# StackOverflow 问答 10970000-10970999

# css - Persian @font-face doesn't work in Chrome, Bug or not?

> ID：10970001
> 
> 赞同：5
> 
> 时间：2012-06-10T15:35:22.780
> 
> 标签：css, font-face, arabic, persian, farsi

Not sure if I'm heading a bug in Chrome or something is wrong with my CSS

Here is a demonstration of what I'm talking about: [demo link](http://3p3r.com/farakhan/)

The problem is that I'm using a custom Farsi font in my website named as `BMitra` (*it is absolutely free in public domain*) and all major browsers (latest FF and IE6+) are rendering this font just fine but my Chrome skips this font and switches to system's default `tahoma`.

Here is my CSS:

```
@font-face {
    font-family: 'BMitra';
    font-weight: normal;
    src: url('fonts/regular/BMitra.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('fonts/regular/BMitra.woff') format('woff'), /* Modern Browsers */
         url('fonts/regular/BMitra.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('fonts/regular/BMitra.svg#svgBMitra') format('svg'); /* Legacy iOS */
    }

@font-face {
    font-family: 'BMitra';
    font-weight: bold;
    src: url('fonts/bold/BMitraBd.woff') format('woff'), /* Modern Browsers */
         url('fonts/bold/BMitraBd.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('fonts/bold/BMitraBd.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('fonts/bold/BMitraBd.svg#svgBMitra') format('svg'); /* Legacy iOS */
    } 
```

So, any ideas? is this a bug in webkit or something else. thanks in advance.

* * *

***Side-notes:***

*   The original font is in true-type format and I converted it using an online tool. but I'm sure that the font is not damaged because all other formats are working fine.
*   I've just figured out that someone had the same problem ([here is the link](https://stackoverflow.com/a/9430222/1055628)) but the solution is not working at all! it also breaks functionality in IE9!
*   I can see that Chrome loads the fonts in Chrome's console so the problem is not with webserver or nonavailability of font resources at the time of page load.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T05:33:35.900

It's not a bug. Your font is not standard and also it's not working correctly in Firefox 11 as well (it shows the characters separated from each other which is the sign of the bad font). You can find the new series of Persian fonts for web here. These fonts have no issue with the new versions of the browsers: [http://www.scict.ir/Portal](http://www.scict.ir/Portal/Home/ShowPage.aspx?Object=News&CategoryID=72ec3b79-8eb2-40bf-8308-4888712e594a&WebPartID=44f4f30f-84f9-48ff-a3a6-7c5be4da31c4&ID=11598936-db75-4615-a9f5-6546fe24d8a3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T13:11:27.870

I've converted the mentioned fonts in your question and uploaded them in the following Internet addresses:

[bMitra Web Font Package](http://www.files.com/shared/540712a3ac7d4/bMitra.zip)

[bMitraBd Web Font Package](http://www.files.com/shared/54071318e5c13/bMitraBd.zip)

Also, You must use the following Style Lines:

```
@font-face {
    font-family: 'BMitra';
    src: url('fonts/regular/bmitra-webfont.eot');
    src: url('fonts/regular/bmitra-webfont.ttf') format('truetype'), url('fonts/regular/bmitra-webfont.eot?#iefix') format('embedded-opentype'), url('fonts/regular/bmitra-webfont.woff') format('woff'), url('fonts/regular/bmitra-webfont.svg#BMitra') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'BMitra';
    src: url('fonts/bold/bmitrabd-webfont.eot');
    src: url('fonts/bold/bmitrabd-webfont.ttf') format('truetype'), url('fonts/bold/bmitrabd-webfont.eot?#iefix') format('embedded-opentype'), url('fonts/bold/bmitrabd-webfont.woff') format('woff'), url('fonts/bold/bmitrabd-webfont.svg#BMitra') format('svg');
    font-weight: bold;
    font-style: normal;
} 
```

and, you should add the following lines in the **.htaccess** file:

```
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf
AddType application/x-font-woff .woff 
```

# mysql - （MySQL）在更新该列之前触发列以将所有值设置为零？

> ID：10970004
> 
> 赞同：2
> 
> 时间：2012-06-10T15:36:17.957
> 
> 标签：mysql, sql, database

基本上我有一个名为“ispushed”的专栏。每当按下网页上的按钮时，该列中的所有值都应重置为零，除了我正在更新的行，该值应设置为 1。

像这样的东西

```
CREATE TRIGGER `TR_ispushed` BEFORE UPDATE on `questions`
FOR EACH ROW BEGIN
    UPDATE  questions set questions.`ispushed` = 0
        WHERE id <> **Current id**
END$$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T15:45:59.313

触发器不是实现此类逻辑所需的。简单的更新语句就可以了：`UPDATE questions SET is_pushed = CASE WHEN id =[your_id] THEN 1 ELSE 0 END`;

# c# - 如何能够在构造函数和“按事件”中加载参数？

> ID：10970018
> 
> 赞同：0
> 
> 时间：2012-06-10T15:39:21.967
> 
> 标签：c#, oop

在对象构造期间，我应该初始化几个参数。举个例子

```
Vehicle (color)
     I
Car (transmission type, air conditioning (boolean))
     I
Cabriolet (roof (boolean)) 
```

我还需要随时`Reload`掌握所有参数的能力（因为我的参数实际上是可变的）。我正在考虑`virtual ReloadParameters()`为每个将调用`super`和加载此类参数的类创建方法。

问题是我还需要在构造过程中加载所有参数，并且我不想从构造函数调用虚拟方法，因为这是不好的做法。

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:03:41.457

为了避免在构造函数中调用虚方法，请创建一个非虚私有方法，并从构造函数和虚方法中调用它：

```
class Vehicle
{
    public Vehicle()
    {
        LoadVehicleParameters();
    }
    virtual void ReloadParameters()
    {
        LoadVehicleParameters();
    }
    private void LoadVehicleParameters();
    {
         //logic here.
    }
}
class Car : Vehicle
{
    public Car() // call to base constructor is implicit
    {
        LoadCarParameters();
    }
    virtual void ReloadParameters()
    {
        base.ReloadParameters();
        LoadCarParameters();
    }
    private void LoadCarParameters();
    {
         //logic here.
    }
} 
```

如果你的基类没有无参数构造函数，或者它有多个构造函数，你需要指定调用哪个基类构造函数，当然，像这样：

```
public Car(int i) : base(i)
//... 
```

# c# - 如何以编程方式将图像添加到资源中？

> ID：10970028
> 
> 赞同：4
> 
> 时间：2012-06-10T15:41:48.207
> 
> 标签：c#, resources

我的资源 [.resx 文件] 中有一些图像文件是我使用 Visual Studio 添加的。但是，现在我需要以编程方式将图像添加到资源中。

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T15:47:10.313

`ResXResourceWriter.AddResource`对要添加到 resx 文件的每个资源使用该方法。使用此方法的*重载*来添加字符串、对象、`and binary (byte array) data`. 如果资源是一个对象，它必须是可序列化的。

有关完整示例，请参见此处 - [http://msdn.microsoft.com/en-us/library/gg418542.aspx](http://msdn.microsoft.com/en-us/library/gg418542.aspx)

# c# - 简单的词法解析器

> ID：10970029
> 
> 赞同：2
> 
> 时间：2012-06-10T15:41:53.633
> 
> 标签：c#, .net, state-machine

我想为常规文本编写一个词法解析器。所以我需要检测以下令牌：

1) 单词 2) 数字 3) 点和其他标点符号 4) “...” “！？” “！！！” 等等

我认为为每个项目写“if else”条件并非易事。那么是否有任何用于 c# 的有限状态机生成器？我知道 ANTLR 和其他工具，但我会尝试学习如何使用这些工具，但我可以编写自己的“ifelse”FSM。

我希望找到类似的东西：

```
FiniteStateMachine.AddTokenDefinition(":)","smile");
FiniteStateMachine.AddTokenDefinition(".","dot");
FiniteStateMachine.ParseText(text); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T16:16:54.413

我建议使用正则表达式。类似的东西`@"[a-zA-Z\-]+"`会选择单词（az 和破折号），而`@"[0-9]*(\.[0-9]+)?"`会选择数字（包括十进制数字）。点等类似 - `@"[!\.\?]+"`- 您可以在方括号内添加所需的任何标点符号（用 转义特殊的正则表达式字符）。

[就成为词法分析器而言，C# 的穷人的“词法分析器”](https://stackoverflow.com/questions/673113/poor-mans-lexer-for-c-sharp)非常接近您正在寻找的东西。我建议在谷歌上搜索单词和数字的正则表达式或其他任何你需要的表达式，以找出你真正需要的表达式。

**编辑**：

或者查看贾斯汀对特定正则表达式的回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T16:13:35.443

我们需要知道你认为一个词或一个数字的细节。话虽如此，我假设“word”表示“C# 风格的标识符”，“number”表示“一串以 10 为基数的数字，可能包括（但不以小数点开头或结尾）”。

根据这些定义，单词可以是与以下正则表达式匹配的任何内容：

```
@"\b(?!\d)\w+\b" 
```

请注意，这[也将匹配 unicode](http://www.regular-expressions.info/refflavors.html)。数字将匹配以下内容：

```
@"\b\d+(?:\.\d+)?\b" 
```

再次注意，这不包括十六进制、八进制或科学记数法，尽管您可以毫不费力地添加它们。它也不包括[数字文字后缀](http://www.dotnetperls.com/suffix)。

在匹配这些之后，您可能可以摆脱标点符号：

```
@"[^\w\d\s]+" 
```

# android - Android 4.0 Webview 无法正常工作

> ID：10970032
> 
> 赞同：3
> 
> 时间：2012-06-10T15:42:08.943
> 
> 标签：android, html, android-webview

我开发了一个移动 HTML5 游戏，当我从 Web 加载 URL 时它运行良好。但是，当我在 Android 4.0 上显示从 assets 文件夹中调用 JavaScript 的 index.html 时，它不起作用。我在下面包含了 logcat 和代码。

```
public class BlockyBlaine extends Activity {
    WebView webview;
    AdView adView;

    private class BlaineViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        adView = (AdView) findViewById(R.id.adView);

        webview = (WebView) findViewById(R.id.webview);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.getSettings().setPluginsEnabled(true);
        webview.getSettings().setSupportZoom(false);
        webview.setVerticalScrollBarEnabled(false);
        webview.setHorizontalScrollBarEnabled(false);
        webview.getSettings().setUseWideViewPort(false);
        webview.getSettings().setDomStorageEnabled(true);
        webview.loadUrl("file:///android_asset/www/index.html");
        webview.setWebViewClient(new BlaineViewClient());
        webview.setFocusableInTouchMode(false);
        adView.loadAd(new AdRequest());
    }
} 
```

* * *

```
06-09 19:06:06.275: I/Ads(1342): To get test ads on this device, call adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
06-09 19:06:06.675: I/Ads(1342): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"preqs":0,"session_id":"8885582241455077410","u_sd":1.5,"seq_num":"1","slotname":"a14fd0f1400116b","u_w":320,"msid":"com.blockyblaine.bobhoil","simulator":1,"cap":"m,a","js":"afma-sdk-a-v6.0.1","isu":"B3EEABB8EE11C2BE770B684D95219ECB","cipa":0,"format":"320x50_mb","net":"ed","app_name":"1.android.com.blockyblaine.bobhoil","hl":"en","u_h":533,"carrier":"310260","ptime":0,"u_audio":4});</script></head><body></body></html>
06-09 19:06:06.715: D/gralloc_goldfish(1342): Emulator without GPU emulation detected.
06-09 19:06:06.765: D/dalvikvm(1342): GC_CONCURRENT freed 220K, 4% free 10110K/10439K, paused 5ms+7ms
06-09 19:06:07.375: D/chromium(1342): Unknown chromium error: -6
06-09 19:06:07.515: E/libEGL(1342): call to OpenGL ES API with no current context (logged once per thread)
06-09 19:06:07.515: D/ShaderProgram(1342): couldn't load the vertex shader!
06-09 19:06:07.525: E/libEGL(1342): call to OpenGL ES API with no current context (logged once per thread)
06-09 19:06:07.525: D/ShaderProgram(1342): couldn't load the vertex shader!
06-09 19:06:07.525: E/libEGL(1342): call to OpenGL ES API with no current context (logged once per thread)
06-09 19:06:07.535: D/ShaderProgram(1342): couldn't load the vertex shader!
06-09 19:06:07.535: E/libEGL(1342): call to OpenGL ES API with no current context (logged once per thread)
06-09 19:06:07.535: D/ShaderProgram(1342): couldn't load the vertex shader!
06-09 19:06:07.545: E/libEGL(1342): call to OpenGL ES API with no current context (logged once per thread)
06-09 19:06:07.555: D/ShaderProgram(1342): couldn't load the vertex shader! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:04:51.097

这只是在黑暗中拍摄，但看起来你的模拟器需要你打电话，

```
AdRequest adRequest = new AdRequest();
adRequest.addTestDevice(AdRequest.TEST_EMULATOR); 
```

打电话之前，

```
adView.loadAd(adRequest); 
```

## 编辑：

阅读[**这个**](https://stackoverflow.com/questions/8390985/android-4-0-1-breaks-webview-html-5-local-storage)和[**这个**](https://stackoverflow.com/questions/9105913/android-4-0-webview-loadurl-oddity)。看起来 Android 团队决定“file:///scheme”是不安全的（从 4.0 开始）。

也许您可以将资产上传到保管箱（或在线某处），然后在运行时下载文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:55:44.963

也许您可以将 javascript 放入标签中，并将所需的任何资产编码为 base64 编码变量。这样，它将是一个文件，您可以以任何您认为合适的方式将其加载到 webview 中。一旦你让它工作，你会想要自动化这个过程。

不过，谷歌决定毁掉 android 4.0 的 webview 似乎很可惜。幸运的是，windows 8 很快就出来了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T09:39:53.293

这可能会迟到，但是默认的 Android webview 无法加载以下划线“_”开头的文件。正是这一点导致`Unknown chromium error: -6`

我在使用 Phonegap 时遇到了同样的问题。将你所有的 javascript 合并到一个文件中可以避免这个问题，并可能使你的应用程序加载更有效。

# android - libgdx 我的第一个三角教程不起作用？

> ID：10970039
> 
> 赞同：0
> 
> 时间：2012-06-10T15:43:22.613
> 
> 标签：android, android-emulator, android-ndk, libgdx

遵循此链接中的我的第一个三角形教程：[我的第一个三角形](http://code.google.com/p/libgdx/wiki/MyFirstTriangle)

桌面版本工作得很好，但是当我部署 android 模拟器版本时，我得到了这个错误：

```
Unfortunately, MyFirstTriangleAndroid has stopped. 
```

有什么建议可以帮助解决这个问题吗？我正在使用 libgdx-0.9.4。

这是目录：

```
06-10 15:32:00.623: D/dalvikvm(528): Not late-enabling CheckJNI (already on)
06-10 15:32:01.653: E/dalvikvm(528): Could not find class 'com.test.myfirsttriangle.MyFirstTriangle', referenced from method com.test.myfirsttriangle.MyFirstTriangleAndroidActivity.onCreate
06-10 15:32:01.653: W/dalvikvm(528): VFY: unable to resolve new-instance 684 (Lcom/test/myfirsttriangle/MyFirstTriangle;) in Lcom/test/myfirsttriangle/MyFirstTriangleAndroidActivity;
06-10 15:32:01.653: D/dalvikvm(528): VFY: replacing opcode 0x22 at 0x0003
06-10 15:32:01.653: D/dalvikvm(528): DexOpt: unable to opt direct call 0x1c88 at 0x05 in Lcom/test/myfirsttriangle/MyFirstTriangleAndroidActivity;.onCreate
06-10 15:32:01.713: D/dalvikvm(528): Trying to load lib /data/data/com.test.myfirsttriangle/lib/libgdx.so 0x412a58e8
06-10 15:32:01.713: D/dalvikvm(528): Added shared lib /data/data/com.test.myfirsttriangle/lib/libgdx.so 0x412a58e8
06-10 15:32:01.713: D/dalvikvm(528): No JNI_OnLoad found in /data/data/com.test.myfirsttriangle/lib/libgdx.so 0x412a58e8, skipping init
06-10 15:32:01.783: D/AndroidRuntime(528): Shutting down VM
06-10 15:32:01.783: W/dalvikvm(528): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-10 15:32:01.793: E/AndroidRuntime(528): FATAL EXCEPTION: main
06-10 15:32:01.793: E/AndroidRuntime(528): java.lang.NoClassDefFoundError: com.test.myfirsttriangle.MyFirstTriangle
06-10 15:32:01.793: E/AndroidRuntime(528):  at com.test.myfirsttriangle.MyFirstTriangleAndroidActivity.onCreate(MyFirstTriangleAndroidActivity.java:11)
06-10 15:32:01.793: E/AndroidRuntime(528):  at android.app.Activity.performCreate(Activity.java:4465)
06-10 15:32:01.793: E/AndroidRuntime(528):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-10 15:32:01.793: E/AndroidRuntime(528):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-10 15:32:01.793: E/AndroidRuntime(528):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-10 15:32:01.793: E/AndroidRuntime(528):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-10 15:32:01.793: E/AndroidRuntime(528):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-10 15:32:01.793: E/AndroidRuntime(528):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-10 15:32:01.793: E/AndroidRuntime(528):  at android.os.Looper.loop(Looper.java:137)
06-10 15:32:01.793: E/AndroidRuntime(528):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-10 15:32:01.793: E/AndroidRuntime(528):  at java.lang.reflect.Method.invokeNative(Native Method)
06-10 15:32:01.793: E/AndroidRuntime(528):  at java.lang.reflect.Method.invoke(Method.java:511)
06-10 15:32:01.793: E/AndroidRuntime(528):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-10 15:32:01.793: E/AndroidRuntime(528):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-10 15:32:01.793: E/AndroidRuntime(528):  at dalvik.system.NativeStart.main(Native Method)
06-10 15:32:06.703: I/Process(528): Sending signal. PID: 528 SIG: 9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T16:13:40.587

这个教程有点过时了。Google 决定更改引用依赖项的方式，您需要转到 Android 项目的属性 -> Java 构建路径 -> 订单和导出选项卡，并确保所有内容都已导出（选中复选框）。

我强烈建议阅读这篇新文章，详细介绍在 Eclipse 中设置 libgdx 项目所需的步骤：[http ://code.google.com/p/libgdx/wiki/ProjectSetupNew?ts=1339344711&updated=ProjectSetupNew](http://code.google.com/p/libgdx/wiki/ProjectSetupNew?ts=1339344711&updated=ProjectSetupNew)

此外，我建议您阅读新的开发人员指南 wiki 文章，这里是目录：[http ://code.google.com/p/libgdx/wiki/TableOfContents?tm=6](http://code.google.com/p/libgdx/wiki/TableOfContents?tm=6)

# python - 与 Python 兼容的 PC^2 等效项

> ID：10970042
> 
> 赞同：0
> 
> 时间：2012-06-10T15:43:47.567
> 
> 标签：python

近期要办一个高中生的编程比赛，本来打算用PC^2（Programming Contest Control System）自动评判方案。该软件常用于 ACM 的国际大学生程序设计大赛区域赛以及世界总决赛。这是一个我以前使用过的优秀系统，但它的一个缺陷是它的语言支持（Java、C 和 C++）。我有点担心，因为并非所有可能参加的高中生都会接触到这些语言中的任何一种。但是，许多当地高中教授 Python 编程入门课程。是否有与支持 Python 的 PC^2 等效的系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:55:18.473

您可以使用在线评委的一些开源实现。例如 ONJ [http://sourceforge.net/projects/onj/](http://sourceforge.net/projects/onj/)

它易于配置，并且可以兼容以在您选择的语言上运行。您不需要在学生将坐的每个系统上的本地副本，您只需在服务器上运行它并为学生提供其网络链接以提交他们的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T18:57:09.790

实际上，我找到了一种更好的方法来实现这一点。在其最新版本中，PC^2 增加了对解释语言（如 Python 等）的支持。由于 PC^2 需要可执行文件，因此您需要“存根”编译命令并简单地使用脚本调用解释器。

完整指南可在[http://pc2.ecs.csus.edu/wiki/Interpreted_languages找到](http://pc2.ecs.csus.edu/wiki/Interpreted_languages)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T16:49:30.873

使用[Sphere Online Judge 来做](http://spoj.com)，比赛主办是免费的，有多种语言可供选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T02:59:29.543

假设你还有兴趣，PC^2 的适应性很强。我使用它运行脚本竞赛并支持 Python、Perl、PHP 和 Ruby。基本上，PC^2 期望一种语言能够编译然后运行。您需要编写一个假装编译代码并返回成功的小脚本。然后运行脚本只是运行脚本提交。很容易做到。

您可以访问[http://acm2012.scusa.lsu.edu](http://acm2012.scusa.lsu.edu)并查看脚本竞赛信息。请随时与我们联系以获取更多信息。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-30T05:34:52.410

它比人们想象的要简单。以下是针对 pc2 9.2.3-2565

添加语言如下（这里以python为例）：

显示名称：Python
编译命令行：touch OK
可执行文件名：OK
程序执行命令行：python {:mainfile}

python3.3 或 python3.4 也可以。

当然，pc2 可能更容易，但 CSUS 似乎没有太多支持。重置比赛将是更大的功能；目前需要克隆目录进行测试、练习和实际比赛非常尴尬。更好地管理数据库（比如删除东西的能力）将使它成为一个很好的工具。没关系，但它可能很棒。

# parallel-processing - 为什么计算一个数的奇偶校验码可以**并行**运行？

> ID：10970044
> 
> 赞同：2
> 
> 时间：2012-06-10T15:44:25.170
> 
> 标签：parallel-processing, bit-manipulation

我正在研究按位运算。

但是，我不明白他们为什么声称代码是并行运行的。

**并行**计算奇偶校验

 **```
unsigned int v;  // word value to compute the parity of
v ^= v >> 16;
v ^= v >> 8;
v ^= v >> 4;
v &= 0xf;
return (0x6996 >> v) & 1; 
```

[我从http://graphics.stanford.edu/~seander/bithacks.html#ParityParallel](http://graphics.stanford.edu/~seander/bithacks.html#ParityParallel)复制了代码

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T15:47:47.740

计算 32 位字的奇偶校验的一种简单的顺序方法将采用（顺序）32 次操作。此方法是并行的（或“矢量化”），因为它一次对多个位进行操作。第一行`v ^= v >> 16`仅在一条指令中组合了 16 个高位和 16 个低位。**

# java - 设置 java 主页

> ID：10970051
> 
> 赞同：1
> 
> 时间：2012-06-10T15:45:04.647
> 
> 标签：java, android, linux

我正在尝试使用命令“ant build”。消息说`java home is not defined correctly we cannot execute /usr/bin/java//bin/java <notice the 2 slashes>`

如果我使用`echo $JAVA_HOME`它返回的命令`usr/bin/java`。这里需要改变什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T15:48:45.650

该`$JAVA_HOME`变量不引用 java 可执行文件，而是引用可执行`bin/java`文件本身的父目录。这就是 Ant 抱怨无法执行一些神秘`/usr/bin/java//bin/java`的 .

例如，在我的情况下（Ubuntu 12.04，OpenJDK），java home 设置为

```
/usr/lib/jvm/java-6-openjdk-amd64/jre 
```

其中显然存在 a `/usr/lib/jvm/java-6-openjdk-amd64/jre/bin/java`，其中`/usr/bin/java`最终代表一个符号链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T15:47:59.283

看起来 Ant 正在假设`/usr/bin/java`开始。也许你不需要设置它。

或尝试添加前导斜杠（`/usr`而不是`usr`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T15:58:10.163

JAVA_HOME 不应指向 java 可执行文件，而应指向 javac 编译器所在的“bin”的父目录。

通常，'/usr/bin/java' 是指向其他地方的实际可执行文件的符号链接，例如，'/usr/lib/java/jdk*/bin/java'，在这种情况下，java home 应该是 /usr /lib/java/jdk*.

# c# - 如何更改 wcf 中的默认 http 方法

> ID：10970052
> 
> 赞同：2
> 
> 时间：2012-06-10T15:45:08.303
> 
> 标签：c#, asp.net, wcf

我是否必须在`[WebGet]`每个操作上方写入属性才能通过“GET”访问？我希望我的默认访问方法是“GET”而不是“POST”。有没有办法在 web.config/app.config 上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:34:14.793

没有办法只在配置中做到这一点。您需要创建一个从 派生的新行为，`WebHttpBehavior`并更改默认值（如果没有，请添加 [WebGet]） - 请参见下面的代码。然后，如果您愿意，您可以定义一个行为配置扩展以通过 config.xml 使用该行为。

```
public class StackOverflow_10970052
{
    [ServiceContract]
    public class Service
    {
        [OperationContract]
        public int Add(int x, int y)
        {
            return x + y;
        }
        [OperationContract]
        public int Subtract(int x, int y)
        {
            return x + y;
        }
        [OperationContract, WebInvoke]
        public string Echo(string input)
        {
            return input;
        }
    }
    public class MyGetDefaultWebHttpBehavior : WebHttpBehavior
    {
        public override void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
            foreach (var operation in endpoint.Contract.Operations)
            {
                if (operation.Behaviors.Find<WebGetAttribute>() == null && operation.Behaviors.Find<WebInvokeAttribute>() == null)
                {
                    operation.Behaviors.Add(new WebGetAttribute());
                }
            }

            base.ApplyDispatchBehavior(endpoint, endpointDispatcher);
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(Service), new WebHttpBinding(), "").Behaviors.Add(new MyGetDefaultWebHttpBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/Add?x=6&y=8"));

        c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/Subtract?x=6&y=8"));

        c = new WebClient();
        c.Headers[HttpRequestHeader.ContentType] = "application/json";
        Console.WriteLine(c.UploadString(baseAddress + "/Echo", "\"hello world\""));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# android - IntentService STICKY 已销毁，但服务仍在 Android 2.3.4 中记录数据

> ID：10970053
> 
> 赞同：1
> 
> 时间：2012-06-10T15:45:30.220
> 
> 标签：android, android-intent, android-service, sticky, intentservice

我有一个安卓应用程序。在一项活动中，我启动了这样的服务：

```
Intent startIntent = new Intent(_context, HandlingService.class);
_context.startService(startIntent); 
```

处理服务定义如下：

```
public class HandlingService extends IntentService 
```

然后在HandlingService里面我有这个：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStartCommand(intent, startId, startId);
    Log.v(ApplicationName,"HandlingService.onStartCommand");
    if ((flags & START_FLAG_RETRY) == 0){
        Log.v(ApplicationName,"Service is restarting");
    }
    return START_STICKY;
} 
```

和这个：

```
@Override
protected void onHandleIntent(Intent sourceIntent) {
    Log.v(ApplicationName, "HandlingService.onHandleIntent");
    sendSomething(); 
} 
```

最后：

```
protected void sendSomething() {
    while (numberOfTry > 0) {
        numberOfTry++;
        Log.v(ApplicationName,"HandlingService.sending Something. Try# " + numberOfTry);
    }
} 
```

numberOfTry 从 1 开始。

然后从启动服务的活动中，当我单击取消按钮时，我称之为：

```
Intent stopIntent = new Intent(CallingActivity.this, HandlingService.class);
CallingActivity.this.stopService(stopIntent); 
```

我看到HandlingService.OnDestroy 被调用，但我一直看到“HandlingService.sendingSomething.Try#”的日志和越来越多的数字。

问题：如果我已经通过调用 stopService 停止了它，为什么它仍然存在？

提前致谢！吉列尔莫。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T07:28:18.937

[IntentService](http://developer.android.com/reference/android/app/IntentService.html)的文档明确指出您不应**在**派生类中覆盖`onStartCommand()`。您可能正在搞乱`IntentService`.

直接从您的类派生`Service`或使用`IntentService`已经为您提供的框架（用于启动/停止自身）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-01T16:43:54.697

来自 IntentService javadoc

**public void setIntentRedelivery（启用布尔值）**

设置意图重新传递首选项。通常使用您喜欢的语义从构造函数中调用。

如果 enabled 为 true，onStartCommand(Intent, int, int) 将返回 START_REDELIVER_INTENT，因此如果此进程在 onHandleIntent(Intent) 返回之前终止，该进程将重新启动并重新传递意图。如果已发送多个 Intent，则保证仅重新交付最近的一个。

如果 enabled 为 false（默认），onStartCommand(Intent, int, int) 将返回 START_NOT_STICKY，如果进程终止，Intent 也会随之终止。

# java - 如何让 HotSpot VM 处于调试模式？

> ID：10970055
> 
> 赞同：5
> 
> 时间：2012-06-10T15:45:47.303
> 
> 标签：java, jvm, jvm-hotspot, compiler-flags, debug-mode

我需要 HotSpot VM 处于调试模式的原因是我想要一些 JVM 选项，比如

```
-XX:+打印CFG文件
```

，得到支持。

我当前的 JVM 版本就像

```
java版本“1.6.0_24”
OpenJDK 运行时环境 (IcedTea6 1.11.1) (suse-3.1-x86_64)
OpenJDK 64 位服务器 VM（内部版本 20.0-b12，混合模式）

```

我必须安装一些工具/补丁来实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T01:10:26.310

经过一段时间的搜索，现在问题看起来更清楚了。

我无法使用该选项的原因

```
-XX:打印CFGToFile
```

是因为我使用的JVM是产品版，不是调试版。

我找到了这样一个提供 JVM 调试版本的网站。以下是链接：http: [//download.java.net/jdk6/6u25/promoted/b03/index.html](http://download.java.net/jdk6/6u25/promoted/b03/index.html)

我已经测试了版本

```
jdk-6u25-ea-bin-b03-windows-i586-debug-27_feb_2011.jar
```

效果很好，可以使用我上面提到的选项，`output.cfg`执行Java程序后会生成一个文件。

安装后会有这样一连串的文件夹`\jdk1.6.0_25\fastdebug>`。我得到以下版本信息：

```
java版本“1.6.0_25-ea-fastdebug”
Java(TM) SE 运行时环境 (build 1.6.0_25-ea-fastdebug-b03)
Java HotSpot(TM) 客户端 VM（构建 20.0-b10-fastdebug，混合模式）

```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-10T15:51:31.483

从jdb手册：

“要使用 jdb 调试的 VM 必须使用以下选项启动：-agentlib:jdwp=transport=dt_shmem,server=y,suspend=n”

这会加载进程内调试库并指定要建立的连接类型。”

# jasper-reports - 在 ireport 中切换页面方向

> ID：10970057
> 
> 赞同：4
> 
> 时间：2012-06-10T15:45:55.070
> 
> 标签：jasper-reports, ireport, orientation-changes

我读过没有办法使用 iReport 本地处理混合方向，但是阅读文档我想知道是否可以通过使用**JRDefaultScriptlet 的 beforePageInit()**以某种方式完成。在我的例子中，有一个纵向首页，与填充它们的数据一样多的横向页面，以及最后一个首页。

另一方面，有人知道：

*   如果这是在不久的将来支持的功能
*   如果有替代方案可以按要求执行并生成符合 jasper 的 xml 文件

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T04:03:59.590

所以我决定玩弄 iReport 看看有什么选择。事实证明，通过一些努力和想象力，这是有可能实现的。这是假设您的第一页在标题部分，最后一页在摘要部分。

1.  以横向模式创建您的报告。

2.  在 iReport 中的 Report Properties 下设置`Title on New Page`并设置`Summary on New Page`为 true。

3.  假设您使用的是标准 8.5" X 11" Letter 大小的页面，所有边距都设置为 20，请将 Title 和 Summary 部分的高度设置为 572。

4.  将您的静态文本字段添加到适当的部分。

5.  现在对于每个静态文本字段，您需要将`Rotate`属性设置为`Left`（实际上可能是`Right`，关键是它们都需要相同。

6.  当然，将您想要的所有其他字段添加到页眉、数据等的相应区域中。

7.  导出您的报告。

**注意**：如果您有任何图像需要进入标题或摘要部分，您需要在 iReport 之外适当地旋转它们并保存。然后将旋转后的图像设置为报表中的图像。不幸的是，图像标签似乎没有旋转属性，因为这会使生活变得轻松。

此外，如果您不设置步骤 2 中列出的属性，您将无法将标题和摘要带的高度设置为适当的宽度。如果您使用不同尺寸的纸张和/或边距，计算最大尺寸（这是您需要的）的简单方法是将带的高度设置为一个非常大的数字。然后它会弹出并告诉你它太大了，以及实际的最大尺寸是多少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:21:51.513

不支持横向和纵向混合子报表，将来他们将添加一个对象调用 JasperBook 或类似的东西，您可以在其中添加不同方向的不同子报表而不会出现问题，但目前您可以通过执行不同的报表来模拟它和在展示它们之前加入它们。

IE

//分别创建报表

```
 InputStream report1 = (InputStream) getClass().getResourceAsStream("/com/app/jasper/reportPortrait.jasper");
        InputStream report2 = (InputStream) getClass().getResourceAsStream("/com/app/jasper/reportLandscape.jasper");
        InputStream report3 = (InputStream) getClass().getResourceAsStream("/com/app/jasper/reportPortrait.jasper");

        JasperPrint jasperPrint = JasperFillManager.fillReport(report, map, conn);
        JasperPrint jasperPrint2 = JasperFillManager.fillReport(report2, map, conn);
        JasperPrint jasperPrint3 = JasperFillManager.fillReport(report3, map, conn);

        JRPdfExporter exp = new JRPdfExporter(); 
```

//将 JasperPrint 对象添加到 ArrayList

```
 List list = new ArrayList(); 

        list.add(jasperPrint);
        list.add( jasperPrint2 );
        list.add(jasperPrint3); 
```

//并告诉出口商加入报告列表。

```
 exp.setParameter(JRPdfExporterParameter.JASPER_PRINT_LIST, list); 
        exp.setParameter(JRExporterParameter.OUTPUT_STREAM, response.getOutputStream());
        exp.exportReport(); 
```

我在我的报告中这样做并且它有效。祝你好运！

# grails - grails 插件未在 netbeans 中列出

> ID：10970063
> 
> 赞同：0
> 
> 时间：2012-06-10T15:46:44.620
> 
> 标签：grails

最近我在 netbeans 中右键单击我的 grails 项目并选择插件。仅列出了 2 个可安装的插件。为什么会这样？netbeans中是否有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:48:09.097

似乎 Grails 在加载插件时遇到了一些问题。问题已在[此处](http://grails.1312388.n4.nabble.com/Apologies-for-the-recent-disruption-td4629743.html)得到解决，并且应该得到解决。

# java - 如何使用带有 PreferenceActivity 的 AndroidAnnotations SharedPref？

> ID：10970068
> 
> 赞同：2
> 
> 时间：2012-06-10T15:47:31.127
> 
> 标签：java, android, android-annotations

我有一个 PreferenceActivity，我想与 AndroidAnnotations @SharedPref 一起使用，所以 PreferenceActivity 将使用 @SharedPref 中的数据。

有没有好的方法来做到这一点？我如何告诉活动使用我在其他地方创建的@SharedPref？有没有一种好方法可以在不设置每个首选项的值的情况下做到这一点？

这是我目前正在使用的活动代码：

```
public class SettingsActivity extends PreferenceActivity {

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T09:05:54.870

A **PreferenceActivity**是一个**Activity**，因此您只需使用**@EActivity**对其进行注释即可开始使用注释，例如**@SharedPref**。

如果您想在 Activity 之间共享首选项，AndroidAnnotations 具有范围的概念，如此处所[定义](https://github.com/excilys/androidannotations/wiki/SharedPreferencesHelpers)。

您应该使用**Scope.UNIQUE**范围在所有活动之间共享它。

SharedPref 被认为是一种将数据轻松存储到 SharedPreferences 中的方法。不一定要与**PreferenceActivity**一起使用。

您可以使用**getSharedPreferences()**访问共享首选项实例，但不能使用它来定义要在活动中使用的首选项。因此，这主要是使用正确的 Android API 的问题。

```
@EActivity
public class SettingsActivity extends PreferenceActivity {

    @Pref
    MyPrefs_ myPrefs;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        getPreferenceManager().setSharedPreferencesName("MyPrefs");
        addPreferencesFromResource(R.xml.preferences);
    }

} 
```

# visual-studio-2010 - 在 VS 2010 中使用 2012 ReportViewer winforms 控件

> ID：10970072
> 
> 赞同：0
> 
> 时间：2012-06-10T15:47:53.997
> 
> 标签：visual-studio-2010, reporting-services, visual-studio-2012

我正在使用 VS2010，在使用 ReportViewer 控件运行本地报表的 WinForms 应用程序上工作。但是，使用 3.0 版语言编写的 .rdl 和 .rdlc 报告不能由此控件运行。这是一种耻辱，因为 3.0 中有一些非常方便的功能。

我在[这里](http://social.msdn.microsoft.com/Forums/en-US/vsreportcontrols/thread/e609a329-58cd-4f30-b8d6-a912657d8eba/)读到了支持 3.0 的新控件预览版。它与 VS2012 预览版相关联。

有谁知道：

1.  是否存在仅针对控件的下载，以及
2.  VS2010是否可以用这个控件建项目？

（我知道 VS2010 报表生成器不适用于 v3.0，但如果我有运行时查看器支持，我可以不用它。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:45:08.140

上面发布了对 Beta 运行时的更新。请参阅我的帖子[http://blogs.msdn.com/b/arvindsh/archive/2012/12/11/microsoft-report-viewer-2012-update-a-gotcha-to-be-aware-of.aspx](http://blogs.msdn.com/b/arvindsh/archive/2012/12/11/microsoft-report-viewer-2012-update-a-gotcha-to-be-aware-of.aspx)细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:26:55.123

这可能是您正在寻找的：[MICROSOFT REPORT VIEWER 2012 RUNTIME](http://www.microsoft.com/en-us/download/details.aspx?id=29024)

# jsp - 如何跨多个 JSP 页面共享 EmbeddedGraphDatabase 实例？

> ID：10970073
> 
> 赞同：1
> 
> 时间：2012-06-10T15:47:56.883
> 
> 标签：jsp, tomcat, neo4j, embedded-database

有什么方法可以跨多个 JSP 页面共享 EmbeddedGraphDatabase 实例？问题是，一旦您启动 tomcat 服务器并为特定的 Neo4j DB 实例化 EmbeddedGraphDatabase，如果您尝试为相同的实例实例化另一个 graphDB，数据库将保持锁定状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:30:28.593

据我了解，这`EmbeddedGraphDatabase`是您的对象，您希望它的实例在应用程序的多个 JSP 页面中共享。

您需要将它的实例放到应用程序范围内，它将对您应用程序的所有类和 JSP 页面可见。

为此，您需要实现`ServletContextListener`接口：

```
public class YourContextListener implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent event) {
       EmbeddedGraphDatabase db = new EmbeddedGraphDatabase();
       event.getServletContext().setAttribute("yourAttrName", db);
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
       event.getServletContext().removeAttribute("yourAttrName");
    }
} 
```

在 web.xml 中定义它

```
<listener>
    <listener-class>your.package.YourContextListener</listener-class>
</listener> 
```

并让它使用：

```
EmbeddedGraphDatabase db = getServletContext().getAttribute("yourAttrName"); 
```

希望这可以帮助。

# python - Django 静态文件和 settings.py 中的文件路径

> ID：10970076
> 
> 赞同：5
> 
> 时间：2012-06-10T15:48:01.097
> 
> 标签：python, css, django

我正在尝试我的第一个合适的 webdev 项目，并且正在学习 django 框架。

我来这里是为了询问使用“静态文件”的最干净的方法，比如我在我的一个 html 模板中提到的外部 CSS。我尝试阅读[有关该主题的官方文档，](https://docs.djangoproject.com/en/dev/howto/static-files/)但作为初学者发现它有点令人困惑，然后我尝试使用谷歌搜索，但我注意到大多数指南或 stackoverflow 答案略有不同，我意识到我需要更好的理解。有点厚脸皮问但是，有人可以向我解释和总结这个过程吗？

作为参考，这是我的项目文件夹层次结构。目前我正在尝试让模板`base.html`在以下位置使用样式表`CSS/base.css`： ![在此处输入图像描述](../Images/df56c4194385958edec36390ecf70cd1.png)

让我失望的还有一件事是使用绝对文件路径。到目前为止，我已经设法摆脱了仅使用相对文件路径的情况，这对我来说更有意义，因为目标是在 django 测试服务器上进行开发，然后当我拥有一个时将其全部转移到我自己的服务器上。（注意：也许是因为我不知道传输过程有多复杂，所以我不明白为什么首选绝对文件路径）。使用相对文件路径有什么问题？

我意识到这已经变成了两个问题，这是违反规则的，但我真的认为这两个问题可以一起回答，如果我理解一个，它可能会帮助我理解另一个。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-22T04:17:52.443

*这是一组来自settings.py*的代码片段，我已更改以包含静态文件

```
import os
import django
DJANGO_ROOT = os.path.dirname(os.path.realpath(django.__file__))
SITE_ROOT = os.path.dirname(os.path.realpath(__file__)) 
```

为 SITE_ROOT 目录动态设置变量

```
 DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.sqlite3', 
            'NAME': os.path.join(SITE_ROOT,'data.db'), 
```

sqlite3数据库的存储位置需要绝对地址

```
 'USER': '',
            'PASSWORD': '',
            'HOST': '',                     
            'PORT': '',                     
        }
    }

STATIC_ROOT = SITE_ROOT
STATIC_URL = '/static/' 
```

在这里存储静态文件

```
STATICFILES_DIRS = (
    os.path.join(SITE_ROOT,'static'),
       ) 
```

存储模板的位置

```
TEMPLATE_DIRS = (
    os.path.join(SITE_ROOT,'templates'),

) 
```

现在在模板中使用

```
 {% load static %} --at beginning
<link href="{% static "css/bootstrap.min.css"%}" rel="stylesheet" media="screen"> 
```

这是一个示例，展示如何访问静态目录中的“ *css/bootstrap.min.css ”*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T16:33:12.883

我将假设您使用的是 Django 1.3 或更高版本，因为它允许您将`staticfiles`( [docs](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/) ) 用于静态文件。这是基本思想：每个 Django 网站由多个应用程序（目录）组成，这些应用程序（目录）包含网站特定部分所需的所有文件（即，一个`models.py`、`views.py`一个`templates`目录和一个`static`目录）。此`static`目录包含 JavaScript 和 CSS 文件（以及该应用程序的其他静态文件。

部署网站时，您运行`collectstatic`命令将所有静态文件收集到一个目录中。然后，您从该目录将静态文件提供给站点的访问者（即，Apache 或不同的 Web 服务器可以为您执行此操作）。

因此，您的 Web 项目的一般结构可能是：

*   管理.py
*   网站/models.py
*   网站/views.py
*   网站/静态/网站/css/base.css
*   网站/静态/网站/js/base.js
*   网站/模板/网站/base.html
*   静止的
*   设置.py
*   网址.py

您会注意到 Django 应用程序的名称在`static`和`templates`目录的子目录中重复出现。`static`这是必要的，因为它在将文件移动到通用目录时将它们分开。在上面的示例中，`STATIC_ROOT`是顶级`static`目录，您的所有静态文件都将复制到该目录中。

绝对值得阅读文档，`staticfiles`因为此项目布局允许您轻松地在其他项目中重用 Django 应用程序。例如，您可以想象一个如下所示的网站：

*   博客/models.py
*   博客/模板/博客/overview.html
*   博客/模板/博客/post.html
*   博客/urls.py
*   博客/views.py
*   照片/模型.py
*   照片/模板/照片/overview.html
*   照片/模板/照片/photo.html
*   照片/urls.py
*   照片/views.py
*   管理.py
*   静止的
*   设置.py
*   网址.py

`blog`如果需要，这些应用程序`photos`现在可以很容易地在其他网站中重复使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:07:13.650

非常感谢@Simeon Visser 的回答所花费的时间，那里有一些非常有用的信息，但这并不完全是我想要的。所以我四处打听，并让 reddit 的 sinister_user_name 对此表示感谢，我认为这可能对其他人有所帮助：

* * *

静态文件在最近的版本中发生了相当大的变化，所以旧博客可能有点乱。

我试一试：

在您的模板中，您可以使用`static_url`标签，django 将为您填写路径。

```
<link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap.min.css"> 
```

它通过查看您的设置文件来填充静态 url。`STATIC_URL`默认设置为`/static/`我认为的设置？如果静态文件在您的公司 Web 服务器上出现一个奇怪的 url，您可以在设置中更改它，它会反映在所有模板中。因此，它们是否是绝对的并不重要。

当你去部署你填写`STATIC_ROOT`你的设置，这只是你设置你的网络服务器来查找静态文件的路径。然后，如果您运行`manage.py collectstatic`，它会将它们复制到该目录。`STATIC_ROOT`这是我认为的唯一功能。

我将模板目录与我的静态目录分开，主要是因为您希望您的网络服务器只提供静态文件，而模板由 python 处理。因此，就 Web 服务器查看静态文件而言，它们几乎不是应用程序的一部分。我将模板和静态文件保存在基本目录中的单独路径中，主要是因为它们都不是 python 源文件。

所以我的项目结构是这样的：

```
manage.py
website/settings.py
app/models.py
app/views.py
templates/base.html
static/js/jquery.js
static/css/bootstrap.css 
```

相对路径的问题在于，如果您的 url 方案更改，它们将需要更改。

可选：我在此博客中发现，这有助于不将绝对文件系统路径放入 settings.py，如果您在多台机器上工作，例如工作和家庭，这很好:( 1.4 的布局略有不同，我在顶部使用它我的设置：

```
import os
import django
import manage

DJANGO_ROOT = os.path.dirname(os.path.realpath(django.__file__))
SITE_ROOT = os.path.dirname(os.path.realpath(manage.__file__)) 
```

而不是他们建议的（设置的位置已在 1.4 或 1.3 中移动）所以`SITE_ROOT`搞砸了。我认为这可能会奏效。在我使用的设置中进一步向下：

```
# Additional locations of static files
STATICFILES_DIRS = (
    os.path.join(SITE_ROOT, 'static'),
) 
```

这将告诉开发服务器在哪里可以找到静态文件。您可以对模板执行相同的操作，或者只使用完整的文件路径。

# javascript - 修改查询字符串而不重新加载页面

> ID：10970078
> 
> 赞同：160
> 
> 时间：2012-06-10T15:48:08.380
> 
> 标签：javascript, jquery, query-string, dhtml

我正在创建一个照片库，并希望能够在浏览照片时更改查询字符串和标题。

我正在寻找的行为经常出现在连续/无限页面的某些实现中，当您向下滚动查询字符串时，会不断增加页码（[http://x.com?page=4](http://x.com?page=4)）等。这应该是理论上很简单，但我想要在主流浏览器中安全的东西。

我找到[了这篇很棒的帖子](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)，并试图按照这个例子进行`window.history.pushstate`操作，但这似乎对我不起作用。而且我不确定它是否理想，因为我并不真正关心修改浏览器历史记录。

我只是希望能够为当前查看的照片添加书签，而无需在每次更改照片时重新加载页面。

这是一个修改查询字符串的无限页面示例：http: [//tumbledry.org/](http://tumbledry.org/)

**更新**找到了这个方法：

```
window.location.href = window.location.href + '#abc'; 
```

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2013-10-09T18:05:05.540

如果您正在寻找哈希修改，您的解决方案可以正常工作。但是，如果您想更改查询，可以使用 pushState，如您所说。这是一个可以帮助您正确实施它的示例。我测试过，效果很好：

```
if (history.pushState) {
    var newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?myNewUrlQuery=1';
    window.history.pushState({path:newurl},'',newurl);
} 
```

它不会重新加载页面，但它只允许您更改 URL 查询。您将无法更改协议或主机值。当然，它需要能够处理 HTML5 History API 的现代浏览器。

了解更多信息：

[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

[https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2018-12-26T08:55:41.990

我想改进 Fabio 的答案并创建一个函数，该函数将自定义键添加到 URL 字符串而不重新加载页面。

```
 function insertUrlParam(key, value) {
        if (history.pushState) {
            let searchParams = new URLSearchParams(window.location.search);
            searchParams.set(key, value);
            let newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?' + searchParams.toString();
            window.history.pushState({path: newurl}, '', newurl);
        }
    }

// to remove the specific key
export function removeUrlParameter(paramKey) {
  const url = window.location.href
  console.log("url", url)
  var r = new URL(url)
  r.searchParams.delete(paramKey)
  const newUrl = r.href
  console.log("r.href", newUrl)
  window.history.pushState({ path: newUrl }, '', newUrl)
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-02-20T16:00:53.337

在 Fabio 的回答的基础上，我创建了两个函数，它们可能对遇到这个问题的人有用。使用这两个函数，您可以`insertParam()`使用键和值作为参数进行调用。它将添加 URL 参数，或者，如果已存在具有相同键的查询参数，它将将该参数更改为新值：

```
//function to remove query params from a URL
function removeURLParameter(url, parameter) {
    //better to use l.search if you have a location/link object
    var urlparts= url.split('?');   
    if (urlparts.length>=2) {

        var prefix= encodeURIComponent(parameter)+'=';
        var pars= urlparts[1].split(/[&;]/g);

        //reverse iteration as may be destructive
        for (var i= pars.length; i-- > 0;) {    
            //idiom for string.startsWith
            if (pars[i].lastIndexOf(prefix, 0) !== -1) {  
                pars.splice(i, 1);
            }
        }

        url= urlparts[0] + (pars.length > 0 ? '?' + pars.join('&') : "");
        return url;
    } else {
        return url;
    }
}

//function to add/update query params
function insertParam(key, value) {
    if (history.pushState) {
        // var newurl = window.location.protocol + "//" + window.location.host + search.pathname + '?myNewUrlQuery=1';
        var currentUrlWithOutHash = window.location.origin + window.location.pathname + window.location.search;
        var hash = window.location.hash
        //remove any param for the same key
        var currentUrlWithOutHash = removeURLParameter(currentUrlWithOutHash, key);

        //figure out if we need to add the param with a ? or a &
        var queryStart;
        if(currentUrlWithOutHash.indexOf('?') !== -1){
            queryStart = '&';
        } else {
            queryStart = '?';
        }

        var newurl = currentUrlWithOutHash + queryStart + key + '=' + value + hash
        window.history.pushState({path:newurl},'',newurl);
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-10T16:12:59.377

我已经成功使用了以下 JavaScript 库：

[https://github.com/balupton/jquery-history](https://github.com/balupton/jquery-history)

它支持 HTML5 历史 API 以及旧浏览器的后备方法（使用 #）。

这个库本质上是一个围绕“history.pushState”的polyfill。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-04-12T08:43:25.863

由于每个回答这个问题的人似乎都忘记了哈希，我想添加我用来保留**所有**URL 参数的代码：

```
const urlParams = new URLSearchParams(window.location.search);

/// Change some part of the URL params

if (history.pushState) {
  const newurl =
    window.location.protocol +
    "//" +
    window.location.host +
    window.location.pathname +
    "?" +
    urlParams.toString() +
    window.location.hash;
  window.history.replaceState({ path: newurl }, "", newurl);
} else {
  window.location.search = urlParams.toString();
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-08-07T10:34:13.443

如果我们只是想更新查询参数而不触及 URL 的其他部分，则无需重新构建 URL。这就是我使用的：

```
const addQueryParam = (key, value) => {
  const url = new URL(window.location.href);
  url.searchParams.set(key, value);
  window.history.pushState({}, '', url.toString());
};

const getQueryParam = (key) => {
  const url = new URL(window.location.href);
  return url.searchParams.get(key) || '';
};
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2022-01-05T10:39:54.357

老问题，现代答案，以帮助未来的开发者；使用[URL](https://developer.mozilla.org/en-US/docs/Web/API/URL)接口：

```
const url = new URL(window.location);
url.searchParams.set('key', value);
window.history.pushState(null, '', url.toString()); 
```

这可以确保您真的只更改所需的查询参数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-10T15:57:00.840

那么历史 API 正是您正在寻找的。如果您也希望支持旧版浏览器，那么在浏览器不提供历史 API 的情况下，寻找一个库来处理 URL 的哈希标记。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-02T03:29:39.880

我想我会在 Fabio 和 Aram 的答案中添加一些内容。我想我有时可能想在 url 中保留哈希。但通常不会，所以我将该参数设置为默认为`false`.

`replaceState`仍然没有在 Chrome 上设置页面标题。所以我添加了几行来更改标题，如果提供的话。

```
function insertUrlParam(key, value, title = '', preserve_hash = false) {
    if (history.pushState) {
        let searchParams = new URLSearchParams(window.location.search);
        searchParams.set(key, value);
        let newurl = window.location.protocol + "//" + window.location.host + window.location.pathname
            + '?' + searchParams.toString();
        if(preserve_hash) newurl = newurl + window.location.hash;
        let oldTitle = document.title;
        if(title !== '') {
            window.history.replaceState({path: newurl}, title, newurl);
            if(document.title !== title) { // fallback if above doesn't work
                document.title = title;
            }
        } else { // in case browsers ever clear titles set with empty string
            window.history.replaceState({path: newurl}, oldTitle, newurl);
        }
    }
} 
```

# string - Matlab字符串操作

> ID：10970080
> 
> 赞同：1
> 
> 时间：2012-06-10T15:48:32.140
> 
> 标签：string, matlab, binary

我已将字符串转换为二进制如下

```
message='hello my name is kamran';
messagebin=dec2bin(message); 
```

有什么方法可以将它存储在数组中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:16:20.987

我不太确定你想在这里做什么，但如果你需要连接二进制表示的行（这是一个 numchars 乘以 bits_per_char 的矩阵），这是代码：

```
message = 'hello my name is kamran';
messagebin = dec2bin(double(message));
linearmessagebin = reshape(messagebin',1,numel(messagebin)); 
```

请注意，双重转换会返回您的 ASCII 码。我在这里无权访问 Matlab 安装，但例如 octave 抱怨您在原始问题中提供的代码。

**笔记**

正如有人向我指出的那样，您必须`messagebin`在“序列化”它之前转置它，以获得正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:12:26.563

如果要将结果作为数字矩阵，请尝试：

```
>> str = 'hello world';
>> b = dec2bin(double(str),8) - '0'
b =
     0     1     1     0     1     0     0     0
     0     1     1     0     0     1     0     1
     0     1     1     0     1     1     0     0
     0     1     1     0     1     1     0     0
     0     1     1     0     1     1     1     1
     0     0     1     0     0     0     0     0
     0     1     1     1     0     1     1     1
     0     1     1     0     1     1     1     1
     0     1     1     1     0     0     1     0
     0     1     1     0     1     1     0     0
     0     1     1     0     0     1     0     0 
```

每行对应一个字符。您可以轻松地将其重塑为 0,1 的序列

# html - IE 导航下拉菜单未按应有的方式显示

> ID：10970090
> 
> 赞同：0
> 
> 时间：2012-06-10T15:50:23.013
> 
> 标签：html, css

我在 html 中创建了一个下拉导航。然后我用不同的浏览器测试了它，比如 chrome、firefox、opera 和 IE。我看到的唯一问题是导航无法在 IE 中正确显示。

HTML：

```
<div id="nav_bar">
    <ul id="nav">
        <li><a href="index.html" title="Go to our Home Page.">Home</a></li>

        <li><a href="#">Krazie</a>
            <ul>
                <li><a href="krazie/colour.html" title="Go to Krazie's Colour portfolio.">Colour</a></li>
                <br />
                <li><a href="krazie/black.html" title="Go to Krazie's Black 'N' Grey portfolio.">Black 'N' Grey</a></li>
            </ul>
        </li> 
<!-- End of Krazie links -->            
        <li><a href="#">Stacy</a>
            <ul>    
                <li><a href="stacy/colour.html" title="Go to Stacy's Colour portfolio.">Colour</a></li>
                <br />
                <li><a href="stacy/black.html" title="Go to Stacy's Black 'N' Grey portfolio.">Black 'N' Grey</a></li>
            </ul>
        </li>
<!-- End of stacy links -->         
        <li><a href="#">Matt</a>
            <ul>    
                <li><a href="matt/colour.html" title="Go to Matt's Colour portfolio.">Colour</a></li>
                <br />
                <li><a href="matt/black.html" title="Go to Matt's Black 'N' Grey portfolio.">Black 'N' Grey</a></li>
            </ul>
        </li>   
<!-- End of matt links -->          
        <li><a href="contact.html" title="Go to our Contact page.">Contact</a></li>
    </ul>
</div> 
```

CSS：

```
#nav 
{
    margin-top:-0px;
    background:rgb(108,108,108);
    position:fixed;
    top:0;
    left:0;
    z-index:10;
    width:100%;
    z-index:9003;
    height:32px;
    list-style:none;
    color:#FFF;
}

#nav li 
{ 
    float: left;
    list-style:none;
}

#nav li a 
{
    display: block;
    height:2em;
    line-height:2em;
    padding:0px 10px;
    text-decoration:none;
    list-style:none;
    color:#FFF;
}

#nav ul 
{   
    padding:0px;
    margin-left:-20px;
    background:rgb(108,108,108);
    position:absolute;
    display:none;
    z-index:9003;
    list-style:none;
}

#nav ul li a
{
    padding:-50px;
    width:110px;
    list-style:none;
}

#nav li:hover ul
{
    display:block;
    list-style:none;
}   

#nav > li:hover > a 
{
    background:rgb(108,108,108);
}

#nav ul li:hover  a
{    
    background:rgb(48,48,50);
} 
```

未正确显示的位是您将鼠标放在它们上方时看到的实际链接。这是它在 chrome 等其他浏览器上的显示方式：http: [//grab.by/e5ik](http://grab.by/e5ik) 但在 IE 中显示为： http: [//grab.by/e5im](http://grab.by/e5im)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:48:13.843

您的代码似乎太复杂而无法完成您的工作。

顺便说一句，请`<br />`在 html 中删除。

然后，添加以下 CSS：（介于`#nav ul`和之间`#nav ul li a`）

```
#nav ul li {
    clear: both;
} 
```

（在 IE8 中测试）

请在浏览器中再次检查是否出现任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:53:05.700

改变这个-

```
#nav ul li a
{
    padding:-50px;
    width:110px;
    list-style:none;
}    
#nav li:hover ul
{
    display:block;
    list-style:none;
}   

#nav > li:hover > a 
{
    background:rgb(108,108,108);
}

#nav ul li:hover a
{    
    background:rgb(48,48,50);
} 
```

对此——

```
#nav ul li a
{
    padding:-50px;
    width:110px;
    list-style:none;
    display:block
}    
#nav a:hover ul
    {
        display:block;
        list-style:none;
    }   

    #nav > li > a:hover
    {
        background:rgb(108,108,108);
    }

    #nav ul li a:hover
    {    
        background:rgb(48,48,50);
    } 
```

有时 ie 无法识别将鼠标悬停在除元素之外的`a`元素上。

# php - 编辑复选框、单选和下拉菜单

> ID：10970094
> 
> 赞同：0
> 
> 时间：2012-06-10T15:51:16.740
> 
> 标签：php, mysql, html

我发现这个站点提供了用于创建、读取、更新和删除的代码。我对如何添加复选框、单选按钮和下拉菜单感到困惑

[http://www.killersites.com/community/index.php?/topic/1969-basic-php-system-vieweditdeleteadd-records/](http://www.killersites.com/community/index.php?/topic/1969-basic-php-system-vieweditdeleteadd-records/)

我根本不关心分页——我主要关心的是能够放入两个下拉菜单，是/否单选按钮，以及使用 PHP 的 3 个复选框的集合。

我的尝试毫无用处，因为当我尝试编辑选项时，值没有保留。包括我的三个文件：pets、editpets 和 view。（我更改了数据库的文件名等）

```
 <?php
     function renderForm($first, $last, $pets, $size, $type, $years, $error)
     {
     ?>
     <!DOCTYPE html>
     <html>
     <head>
     <title>New Customer</title>
     </head>
     <body>

     <?php
     // display possible errors
     if ($error != '')
     {
     echo '<div style="padding:4px; border:1px solid red; color:red;">'.$error.'</div>';
     }
     ?>

     <form action="" method="post">
     <div>
     <strong>First Name:</strong> <input type="text" name="firstname" value="<?php echo  
     $first; ?>" /> 
     <strong>Last Name:</strong> <input align="center" type="text" name="lastname" value="<
    ?php echo $last; ?>" /><br/>

     <p><strong>No. Pets </strong>
     <select name="pets">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option> 
      <option value="4">4</option> 
     </select>
     </p>
     <br/>

     <strong>Size? </strong>
     <br/>
      Big<input type="radio" value="Yes"  name="size" checked><?php echo $size; ?><br />
      Small<input type="radio" value="No" name="size"<?php echo $size; ?><br />
      <br />

<p><strong>Type</strong><br/>
    <input name="type[]" type="checkbox" id="type[]"/>
    Cats
    <input name="type[]" type="checkbox" id="type[]"/>
    Dogs
    <input name="type[]" type="checkbox" id="type[]"/>
    Others
</p>
<br/>
 <strong>Years? </strong>
 <select name="year">
  <option value="Five or Less">Five or More</option>
  <option value="Six or More">Six or More</option>
 </select><br/>

 <input style="color:purple;" type="submit" name="submit" value="Create My Order :-)">
 </div>
 </form>

 <center><a href="view.php">Click Here for Orders</a></center>
 </body>
 </html>

 <?php
 }

 // connect to the database
 include('connect-db.php');

 // check if my form submits and, upon triumph, process the form and save it to the database
 if (isset($_POST['submit']))
 {
 // get form data, check its validity
 $firstname = mysql_real_escape_string(htmlspecialchars($_POST['firstname']));
 $lastname = mysql_real_escape_string(htmlspecialchars($_POST['lastname']));
 $pets = $_POST['pets'];
 $size = mysql_real_escape_string(htmlspecialchars($_POST['size']));
 $type = serialize(mysql_real_escape_string(implode(',', $_POST['type'])));
 $years = mysql_real_escape_string(htmlspecialchars($_POST['years']));

 // check to make sure everything is filled!
 if ($firstname == '' || $lastname == '' || $pets == '' || $size == '' || $type == '' || $years == '')
 {
 // generate error message
 $error = 'ERROR: Please fill in all required fields!';

 // if either field is blank, show the form again
 renderForm($firstname, $lastname, $pets, $size, $type, $years, $error);
 }
 else
 {
 // save the data to the database
 mysql_query("INSERT customers SET firstname='$firstname', lastname='$lastname', pets='$pets', size='$size', type='$type', years='$years'")
 or die(mysql_error());

 // once saved, redirect to cheview page
 header("Location: view.php");
 }
 }
 else
 // if the form is not submitted, show my form again.
 {
 renderForm('','','','','','','');
 }
?>

    <?php

$types = array("Cats", "Dogs", "Others");

 function renderForm($id, $firstname, $lastname, $pets, $size, $type, $years, $error)
 {
 ?>

 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
 <html>
 <head>
 <title>Edit Record</title>
 </head>
 <body>
 <?php
 // if there are any errors, display them
 if ($error != '')
 {
 echo '<div style="padding:4px; border:1px solid red; color:red;">'.$error.'</div>';
 }
 ?>
 <form action="" method="post">
 <input type="hidden" name="id" value="<?php echo $id; ?>"/>
 <div>
 <p><strong>ID:</strong> <?php echo $id; ?></p>
 <strong>First Name: </strong> <input type="text" name="firstname" value="<?php echo $firstname; ?>" /><br/>
 <strong>Last Name: </strong> <input type="text" name="lastname" value="<?php echo $lastname; ?>" /><br/>

 <p><strong>No. Pets </strong>
 <select name="pets">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option> 
  <option value="4">4</option> 
 </select>
 </p>

  <strong>Size? </strong>
 <br/>
  Big<input type="radio" value="Yes"  name="size" checked><?php echo $size; ?><br />
  Small<input type="radio" value="No" name="size"<?php echo $size; ?><br />
  <br />

  <br />
  <br />
<p><strong>Type</strong><br/>
    <input name="type[]" type="checkbox" id="type[]"/>
    Cats
    <input name="type[]" type="checkbox" id="type[]"/>
    Dogs
    <input name="type[]" type="checkbox" id="type[]"/>
    Others
</p>

<br/>
 <strong>Years? </strong>
 <select name="year">
  <option value="Five or Less">Five or More</option>
  <option value="Six or More">Six or More</option>
 </select><br/>
<br /><br />
 <input type="submit" name="submit" value="Resubmit My Order :-)">
 </div>
 </form>
 </body>
 </html>
 <?php
 }

 // connect to the database
 include('connect-db.php');

 // check if the form has been submitted. If it has, process the form and save it to the database
 if (isset($_POST['submit']))
 {
 // check for id being an integer
 if (is_numeric($_POST['id']))
 {
 // get form data, making sure it is valid
 $id = $_POST['id'];
 $firstname = mysql_real_escape_string(htmlspecialchars($_POST['firstname']));
 $lastname = mysql_real_escape_string(htmlspecialchars($_POST['lastname']));
 $pets = $_POST['pets'];
 $size = mysql_real_escape_string(htmlspecialchars($_POST['size']));
 $type = serialize(mysql_real_escape_string(implode(',', $_POST['type'])));
 $years = mysql_real_escape_string(htmlspecialchars($_POST['years']));

 // check that firstname/lastname fields are both filled in
 if ($firstname == '' || $lastname == '' || $pets == '' || $size == '' || $type == '' || $years == '')
 {
 // generate error message
 $error = 'ERROR: Please fill in all required fields!';

 //error, display form
 renderForm($id, $firstname, $lastname, $pets, $size, $type, $years, $error);
 }
 else
 {
 // save the data to the database
 mysql_query("UPDATE customers SET firstname='$firstname', lastname='$lastname', pets='$pets', size='$size', type='$type', years='$years' WHERE id='$id'")
 or die(mysql_error());

 // once saved, redirect back to the view page
 header("Location: view.php");
 }
 }
 else
 {
 // if the 'id' isn't valid, display an error
 echo 'Error!';
 }
 }
 else
 // if the form hasn't been submitted, get the data from the db and display the form
 {

 // get the 'id' value from the URL (if it exists), making sure that it is valid (checing that it is numeric/larger than 0)
 if (isset($_GET['id']) && is_numeric($_GET['id']) && $_GET['id'] > 0)
 {
 // query db
 $id = $_GET['id'];
 $result = mysql_query("SELECT * FROM customers WHERE id='$id' ")
 or die(mysql_error());
 $row = mysql_fetch_array($result);

 // check that the 'id' matches up with a row in the databse
 if($row)
 {

 // get data from db
 $firstname = $row['firstname'];
 $lastname = $row['lastname'];
 $pets = $row['pets'];
 $size = $row['size'];
 $type = serialize($row['type']);
 $years = $row['years'];

 // show form
 renderForm($id, $firstname, $lastname, $pets, $size, $type, $years, '');
 }
 else
 // if no match, display result
 {
 echo "No results!";
 }
 }
 else
 // if the 'id' in the URL isn't valid, or if there is no 'id' value, display an error
 {
 echo 'Error!';
 }
 }
?>

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
        <title>View customer orders</title>
</head>
<body>

<?php

        include('connect-db.php');

        $result = mysql_query("SELECT * FROM customers")
                or die(mysql_error());

        echo "<table border='1' cellpadding='10'>";
        echo "<tr> <th>ID</th> 
                   <th>First Name</th> 
                   <th>Last Name</th> 
                   <th>Pets</th> 
                   <th>Size</th>
                   <th>Type</th> 
                   <th>Years</th> 
                   <th></th> 
                   <th></th>
             </tr>";

        while($row = mysql_fetch_array( $result )) {

                echo "<tr>";
                echo '<td>' . $row['id'] . '</td>';
                echo '<td>' . $row['firstname'] . '</td>';
                echo '<td>' . $row['lastname'] . '</td>';
                echo '<td>' . $row['pets'] . '</td>';
                echo '<td>' . $row['size'] . '</td>';
                echo '<td>' . $row['type']. '</td>';
                echo '<td>' . $row['years'] . '</td>';
                echo '<td><a href="edit.php?id=' . $row['id'] . '">Edit</a></td>';
                echo '<td><a href="delete.php?id=' . $row['id'] . '">Delete</a></td>';
                echo "</tr>";
        }

        echo "</table>";
?>
<p><a href="pets.php">Add a new record</a></p>

</body>
</html> 
```

我真的在这一点上迷路了。我已经为此工作了整整一个月，我不知道我在做什么了。如果有人可以帮助我编辑它以使其工作，我将非常感激。

感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:09:11.470

是的，要从数据库中获取保存的结果，我相信您知道如何执行此操作。

对于您的单选按钮，您需要从数据库中选择“大小”值并使用 if 语句来确定将“选中”哪个单选按钮

名字/姓氏只是从数据库中获取名字/姓氏并将适当的`input`标签设置为获取的值

您已经发布了一种处理组合/下拉框的技术

您将对“类型”复选框执行类似的过程，将数据库值与复选框`input`标签的值进行比较，如果值匹配，则将复选框设置为选中。

下次请更具体地说明您寻求帮助的内容，并将您的代码分成与其包含的文件相对应的段。

如果你有 3 个文件，每个文件都有一个代码块。

# .htaccess - 有时找不到带有 www 的表达式引擎页面，找到带有非 www 的

> ID：10970098
> 
> 赞同：0
> 
> 时间：2012-06-10T15:51:38.007
> 
> 标签：.htaccess, expressionengine

我在 ExpressionEngine 1.6 网站上遇到了一个奇怪的问题。我添加了一个页面，有些人在使用 www 访问该页面时遇到了困难。在网址前面。没有www，似乎没有问题。它似乎也取决于我使用的浏览器 - 如果我使用 Chrome，我看不到 URL 中带有 www 的页面，但如果没有 www，我可以。其他浏览器可以工作。我试过清除 Chrome 中的缓存无济于事。

到底是什么问题？

这是 .htaccess 中的代码，以防与此有关。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteRule ^(.*)$ /index.php/$1 [QSA,L]

RewriteCond %{QUERY_STRING} ^utm_medium
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteRule (.*) /index.php?/pages/index/&%{QUERY_STRING} [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:45:51.647

拥有一个可在 www 和无 www 上访问的网站并不理想，因为这意味着您的 Google 列表会因重复内容而被稀释。通过消除 www，您还将解决您的问题：

```
# Remove the www from the URL
# ------------------------------
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

应该在“RewriteBase /”行之后和主要重写之前。

另一种方法是添加 www：

```
# Add the www to the URL (use instead of www removal)
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} !^localhost [NC]
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

也就是说，为了尝试专门解决这个问题，我假设其他页面都很好，特别是这个页面？也可以通过在路径中包含 index.php/ 来访问页面吗？

这个重写看起来有点奇怪： RewriteCond %{QUERY_STRING} ^utm_medium RewriteCond %{REQUEST_URI} ^/$ [NC] RewriteRule (.*) /index.php?/pages/index/&%{QUERY_STRING} [L]

如果此行是罪魁祸首并且与导致问题的页面相关，请尝试更改最后一行：RewriteRule ^(.*)$ /index.php?/pages/index/&%{QUERY_STRING} [L] 或 RewriteRule (.* ?)index.php?/pages/index/&%{QUERY_STRING} [L]

# c# - 如何在不使用实体框架的情况下使用 POCO 设计 DAL/BAL 以支持延迟加载

> ID：10970101
> 
> 赞同：1
> 
> 时间：2012-06-10T15:51:53.387
> 
> 标签：c#, architecture, data-access-layer, business-logic-layer

我用的是ADO.NET，我已经创建了DAL和BAL，结构如下

```
DAL
   -POCO(Table to Entities mapping)
   -Repository (Add, Delete, Edit, Select, Search)

BAL
   -POCO(DAL to Entities mapping where Entities are complex type here)
   -BusinessManager(Validation and Business rules) 
```

我将使用服务公开 BAL。Web、Window、Mobile 等多个应用程序将使用此 BAL。

我不确定 Sql Transactions 应该从哪里开始。谁负责创建复杂的实体。

例如，复杂实体可能是

```
 Entity
     -Entity Type
     -Contacts
     -EmployeesReporting
     -ReportingTo 
```

现在谁应该创建一个实体？它是 BAL 还是 DAL。SqlTransactions 应该从哪里开始？我应该如何使这些实体支持延迟加载，因为我是存储过程的支持者，并且更喜欢**每个请求使用一个数据库连接**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:59:35.290

我不确定我是否看到您希望每个请求使用一个数据库连接是否符合您支持延迟加载的愿望。

延迟加载的要点是，在最初加载对象图时，您不需要具体化对象图的某些部分，并且您*可能需要也可能*不需要在程序执行的某个稍后时间点加载这些部分。

以某种方式保留连接以满足该需求将非常浪费宝贵的资源（数据库连接）。

由于在业务访问层中使用了对象图，因此最初未具体化的对象图部分必须以某种方式表示，以允许您拦截请求以使其可用，并按需生成它们。在业务层中放置代理的 EF 解决方案反过来激活 DAL 以按需获取对象图的缺失部分，这是一个很好的解决方案。

# java - 在视图类中查找小部件的 ID

> ID：10970104
> 
> 赞同：0
> 
> 时间：2012-06-10T15:52:31.577
> 
> 标签：java, android, xml, view, android-widget

我所拥有的是一个几乎占据整个屏幕的画布，然后在其下我想要一排按钮和一些其他小部件。所以我做了这个。

```
XML Code
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:id="@+id/myLayout"
android:orientation="vertical"
android:layout_height="match_parent" >

<com.zone.manager.Tab3
    android:id="@+id/tab3_display"
    android:layout_width="fill_parent"
    android:layout_height="620dp" />

     <LinearLayout
        android:layout_width="match_parent"
        android:orientation="horizontal"
        android:layout_height="match_parent" >   

        <Button
            android:id="@+id/addZone"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Add Zone" />

        <Button
            android:id="@+id/helpZone"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Help" />

        <SeekBar
            android:id="@+id/seekBar1"
            android:paddingTop="9dp"
            android:layout_width="179dp"
            android:layout_height="wrap_content" />

    </LinearLayout> 
```

Java 代码

```
public class Tab3 extends View implements OnTouchListener, OnClickListener {
  public Tab3(Context context, AttributeSet attrs) {
    View parent = (View) getParent();
    addZone = (Button) parent.findViewById(R.id.addZone);
    addZone.setOnClickListener(this);
  }

    @Override
      protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        . . . draws a bunch of stuff
      }
    @Override
      public void onClick(View v) {
        switch (v.getId()) {
          case R.id.addZone:
            String w = "W~20~0~0~0~0~0";
            Log.d("ZoneSize", "Zone set");
            MyApplication.preferences.edit().putString( "ZoneSize", w ).commit();
            MyApplication.preferences.edit().putBoolean("ZoneSizeReady", true).commit();
            break;
        }
      } 
```

但是我的问题是我相信代码没有重新协调 addZone 的位置。因为当我`addZone.setOnClickListener`激活时，我的程序会崩溃，但是当我没有激活时，布局看起来就像我想要的那样。我必须做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:58:29.553

```
 addZone = (Button) findViewById(R.id.addZone); 
```

addZone 将为**空**，因为`com.zone.manager.Tab3`没有任何子项

所以很明显你的代码会崩溃

因此，您要么给**com.zone.manager.Tab**孩子，它们还需要将基类从 View 更改为 ViewGroup，

或者您从**com.zone.manager.Tab**父级开始。就像是

```
 View parent = (View) getParent ();
 addZone = (Button) parent.findViewById(R.id.addZone); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:29:49.887

我有一些技巧可以让你避免这些奇怪的错误和其他错误：

自定义视图的代码依赖于使用自定义视图的 xml 布局。这是不好的编码。

相反，您应该使用 LayoutInflater ，为其自定义视图使用布局 xml 文件，然后执行“findViewById”并将 clickListeners 添加到您希望的任何视图中。

我认为将自定义视图设置为保留其他视图的单击侦听器而不检查其中哪个被单击也是错误的。要么添加一个检查，要么为每个人添加一个不同的监听器（我个人更喜欢）。

# .net - VS2010 无法以“未知错误”启动

> ID：10970108
> 
> 赞同：2
> 
> 时间：2012-06-10T15:53:23.870
> 
> 标签：.net, visual-studio-2010

我刚刚发现 VS2010 无法启动。它只是显示一个带有“未知错误”消息的对话框，然后退出。

我怀疑这可能与我几天前卸载 VS11 beta 有关，但不确定。

有没有其他人经历过这种情况并得到解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:33:02.837

玩了一段时间后，似乎唯一修复它的是 VS2010 安装程序的修复。

重置设置的各个步骤似乎没有什么不同。

重新安装完整的 .Net Framework 4.0（不是客户端配置文件）部分修复了一些问题 - IDE 将启动并加载解决方案 - 但我遇到了一些奇怪的问题，例如 XML 编辑器无法正常工作，并且在启动时报告了多个包错误。

到目前为止，通过修复，它似乎正在工作，但如果我发现它们，我会发布任何进一步的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T15:58:57.277

转到 Run [Win + R] -> type`devenv`后跟下面的一个参数。对下面列出的每个参数执行相同的操作。

**/Rebuild**清理然后使用指定配置构建解决方案或项目。
**/ResetAddin**删除与指定加载项关联的命令和命令 UI。
**/ResetSettings**恢复 IDE 的默认设置，可选择重置为指定的 VSSettings 文件。
**/ResetSkipPkgs** 清除添加到 VSPackages 的所有 SkipLoading 标记。

如果还是不行，请评论我...

# ruby-on-rails - 页面上的rails无限滚动ajax操作> 1项

> ID：10970111
> 
> 赞同：0
> 
> 时间：2012-06-10T15:53:51.077
> 
> 标签：ruby-on-rails, ajax, infinite-scroll

首先让我声明，这是一个使用很多其他人的代码的实例，并且没有完全理解正在发生的事情以及如何解决我的问题。

我使用 will_paginate 跟随 Railscast 进行无限滚动，并且工作正常。

我每页加载 12 个项目，每个项目都有自己的部分。每个项目都是一个对象，用户可以通过单击“竖起大拇指”按钮来“喜欢”。

我对这个按钮进行了 ajax 化，并为“喜欢”的项目重新加载了部分内容。

这适用于项目 1-12（第一页）。

当用户单击通过无限滚动加载的项目上的竖起大拇指按钮时，ajax 调用会执行，但不会再次找到该对象，并且部分只是变为空白。

这是我的代码-

```
#@messages partial
<div class="span3 well" style="height:360px;" id="message-<%=message.id%>">
<div class="thumbnail">
    <%= image_tag message.gif.url %>
        <div class="caption">
            <h5><%=link_to message.sender, "/profile/#{User.find_by_username(message.sender).id}"%></h5>
            <h5><%=message.chain.subject %></h5>
            <p><em>"<%= message.content %>"</em></p>
            <p><a href="/upvote/<%=message.id%>" data-remote="true" class="btn btn-success"><%=message.up_votes%> 
              <i class="icon-thumbs-up"></i> Nice Work</a>              
        </div>
</div>
</div>

# js.coffee (from railscast)
jQuery ->
  $(window).scroll ->
  url = $('.pagination .next_page').attr('href')
    if url &&  $(window).scrollTop() > $(document).height() - $(window).height() - 50
      $('.pagination').text('Loading more gifs...')
      $.getScript(url)  

# vote.js -- js executed by ajax call
$("#message-<%=params[:id]%>").load(location.href+" #message-<%=params[:id]%>>*", ""); 
```

我很确定问题出在 vote.js 中。`.load(location.href+" #message-<%=params[:id]%>>*", "");`似乎无法在第 2、第 3、第 4 等页面上找到对象，因为它使用作为`location.href`当前 url 的仅提供前 12 个对象的对象。我想我需要以某种方式将页面放在那个 url 中，但我不知道如何做到这一点。

编辑 - 或者，也许我应该为所有未分页的消息设置一个端点，并调用该 url 而不是`location.href +`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T22:57:47.540

这个问题似乎已经解决了。

有趣的是，它似乎并没有在本地工作，而是在 Heroku 上工作。

如果有人对此有解释，我很想听听，否则就解决了！

# backbone.js - socket.io +bone.js - 使用套接字实例作为模型成员的跨源请求错误

> ID：10970112
> 
> 赞同：0
> 
> 时间：2012-06-10T15:53:54.323
> 
> 标签：backbone.js, cross-domain, socket.io, broadcast

我正在使用服务器端的 node.js + express.js 编写一个基于实时聊天室的应用程序，backbone.js 用于客户端，socket.io 用于处理通信。

我在这里面临几个问题：

1）跨域请求问题：

```
var ChatRoom = Backbone.Model.extend( {
    defaults : {
        socket : "",
        scoreBoard : {},
        qMaster : "",
        questionSrc : "",
    },

    initialize : function( scoreServer ) {                      
        this.socket = io.connect( scoreServer );
        var newScores = {};

        this.socket.on('connect', function() {
            console.log( "Connected!" );
        });

        this.socket.on('updateScores', function( scoreUpdates ) { 
        _.each( scoreUpdates, function( update ) {
            newScores[ update['name'] ] = update['score'];
        });
    });
});
var chatRoom = new ChatRoom( "http://localhost:8080/" ); 
```

当我创建这样的对象时，在调用`io.connect`. Chrome 上的输出：

```
XMLHttpRequest cannot load http://[object%20object]:8080/socket.io/1/?t=1339342280788\. Cross origin requests are only supported for HTTP. 
```

究竟是什么将 socket.io 调用中的主机更改为`[object%20object]`？

`http://localhost:8080`是创建页面的服务器。但是，当我将套接字作为 ChatRoom 的成员删除时，并按如下方式执行处理程序绑定：

```
var ChatRoom = Backbone.Model.extend( {
    defaults : {
        scoreBoard : {},
        qMaster : "",
        questionSrc : "",
    },

    initialize : function( ) {                      
        var newScores = {};

        socket.on('connect', function() {
            console.log( "Connected!" );
        });

        socket.on('updateScores', function( scoreUpdates ) { 
        _.each( scoreUpdates, function( update ) {
            newScores[ update['name'] ] = update['score'];
        });
    });
});

var socket = io.connect( "http://localhost:8080" );
var chatRoom = new ChatRoom(); 
```

在这种情况下，事情顺利进行。这怎么可能？

2）客户端成功连接到我的socket.io服务器后，我有以下套接字广播命令：

```
io.sockets.on( 'connection', function( socket ) {
    console.log("Got here");
    socket.broadcast.emit( 'updateScores', scoreUpdate ); 
```

（注意：'scoreUpdate' 在别处初始化）。套接字服务器上的调试消息表明广播已执行，但未显示在客户端上为“updateScores”事件处理程序插入“警报”命令。事实上，甚至没有任何东西写入套接字。但是，只有当第二个客户端连接到同一服务器时，才会调用相应的事件处理程序。

广播命令中是否缺少一些微妙之处？当只有一个客户端时没有广播吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:15:42.243

好的，我已经解决了问题（1）。

本质上，模型实例化应该是：

```
var chatRoom = new ChatRoom( {"server" : "http://localhost:8080"} ); 
```

哦！

问题 2 仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:36:24.877

2) 来自[官方网站](http://socket.io/#how-to-use)的报价：

> 广播消息。
> 
> 要广播，只需在方法调用中添加一个 标志`broadcast`。**广播意味着向除了启动它的套接字之外的**其他所有人发送消息 。`emit``send`

# google-analytics - 谷歌分析简单的访问者计数

> ID：10970113
> 
> 赞同：0
> 
> 时间：2012-06-10T15:54:02.367
> 
> 标签：google-analytics, google-analytics-api

我是 GA 新手，我有以下情况：我有一个网站，除了一页之外根本不需要 GA 服务。此页面的 URL 类似于：[http ://example.com/events?eventId=1234](http://example.com/events?eventId=1234)

我试图实现的是计算参数中指定的不同事件的访问者。（所以稍后我可以检索此信息，并且可以显示有多少人访问了特定事件的站点）。

我一直在查看[https://www.google.com/analytics](https://www.google.com/analytics)一段时间，但是我无法弄清楚如何通过参数区分 GA。到目前为止，我在 GA 注册了唯一代码，我可以将其包含在页面中：

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-xxxxxxxxx-1']);
_gaq.push(['_trackPageview']);

(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(ga, s);
})(); 
```

此外，此 Web 应用程序是使用 Play 框架实现的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:05:31.850

您可以使用[事件跟踪](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)或仅记录[虚拟综合浏览量](https://developers.google.com/analytics/devguides/collection/gajs/asyncMigrationExamples#VirtualPageviews)

例如

```
_gaq.push(['_trackPageview', '/events/{id}']); 
```

`{id}`用实际替换`id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:06:42.600

默认情况下，页面上的 GA 代码段将记录 URL，减去协议和域。这意味着如果你有

`www.example.com/events?eventId=1234`

对比

`www.example.com/events?eventId=4567`

您将在页面报告中看到 2 个单独的条目：

```
/events?eventId=1234
/events?eventId=4567 
```

所以开箱即用，你应该很高兴。

但是...您在评论中提出的一个问题：

> 即使还有其他参数，它也能工作吗？

是的，它会的，这就带来了一个问题。因为这 2 个也将算作 2 个单独的条目：

```
www.example.com/events?eventId=123&a=b
www.example.com/events?eventId=123&a=c 
```

为了解决这个问题，您需要像 tszming 在他的回答中提到的那样：使用自定义事件（或自定义变量）进行跟踪，或者使用您选择的内容覆盖默认页面名称。或者你可以两者都做；每种方法基本上都是查看相同基本数据的不同方式，并允许您做一些稍微不同的事情。但是为了回答您的基本问题“有多少人访问了页面的 {eventId} 版本，所有选项都会回答这个问题。

旁注：无论如何，所有这些解决方案都涉及获取查询字符串参数。GA 没有用于获取查询字符串参数值的内置方法，因此您必须自己获取该值。不幸的是，javascript 也没有内置的方法。幸运的是，编写一个为您执行此操作的函数非常容易（只需 google “javascript get query param”）。

# objective-c - 保存到图像到相机角色需要建议

> ID：10970114
> 
> 赞同：1
> 
> 时间：2012-06-10T15:54:10.610
> 
> 标签：objective-c, ios5, xcode4.3

我的应用程序 ID 中有图像，例如要保存到相机胶卷的用户，这是我的代码

```
- (IBAction)save:(id)sender {

UIImage *img = [UIImage imageNamed:@"england1.png"];  

UIImageWriteToSavedPhotosAlbum(img, self, 
                               @selector(image:didFinishSavingWithError:contextInfo:),    nil); 
```

编译器在抱怨

'NSInvalidArgumentException'，原因：'+[NSInvocation invocationWithMethodSignature:]：方法签名参数不能为 nil'

所以我的问题是，如果我不能为零或自我，那会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:29:50.047

在阅读了 skrams 评论后，设置`img`解决`nil`了问题，并且我已经声明了图像，但是在一些自由撤消操作后它已断开连接！因此，感谢您的意见。

# python - django-social-auth：如何将 example.com 重定向到 127.0.0.1:8000？

> ID：10970115
> 
> 赞同：8
> 
> 时间：2012-06-10T15:54:23.007
> 
> 标签：python, django, django-socialauth

我相信许多 Django 开发人员在使用 social-auth 时一定会遇到这个问题。最初，当您开发它时，您想在本地服务器上对其进行测试，因此您将重定向您的 etc/hosts 中的域名。

我在文档中遇到了这个：

[https://github.com/omab/django-social-auth#facebook](https://github.com/omab/django-social-auth#facebook)

> 如果您在 Facebook 设置页面中定义重定向 URL，请务必不要定义`http://localhost:8000`，因为它在测试时不起作用。相反，我定义[http://myapp.com](http://myapp.com)并在 /etc/hosts 上设置映射或使用 dnsmasq。

据我了解，您不能在 /etc/hosts 中定义任何端口。

因此在那里定义这个条目：

```
127.0.0.1       example.com 
```

仍然没有命中运行在 127.0.0.1:8000 的 Django 服务器。

你们是怎么做到的？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-08T18:31:28.660

每个人都说，“将 example.com 添加到您的主机文件......”但忽略了在启动 runserver 后您应该使用 example.com:8000。以下是对我有用的更详细的步骤：

在 Linux 上：

*   打开一个终端
*   sudo gedit（或用选择的文本编辑器替换 gedit）
*   打开 etc/hosts 文件
*   添加一行：127.0.0.1 example.com（如果您已经有一行以 127.0.0.1 开头，则可以保留它 - [https://serverfault.com/questions/231844/is-it-safe-to-add-additional -127-0-0-1-entry-to-etc-hosts](https://serverfault.com/questions/231844/is-it-safe-to-add-additional-127-0-0-1-entries-to-etc-hosts) )
*   保存文件
*   启动你的 django 开发服务器 - python manage.py runserver
*   打开浏览器并转到 example.com:8000 （这将正确回调到 google 和其他不适用于 127.0.0.1 或 localhost 的网站）
*   您应该会看到 django 站点的主页。
*   转到您要连接的社交网站并设置您的客户 ID，使用 example.com 作为网站名称。例如，google 的回调 url 是[http://example.com:8000/complete/google-oauth2/](http://example.com:8000/complete/google-oauth2/)
*   复制相应的密钥/ID 设置并粘贴到您的 SETTINGS.py
*   现在您的开发服务器应该可以工作了！

我知道这是一篇较旧的帖子，但我无法在任何地方找到完整的步骤。如有必要，请添加说明，因为我不是这方面的专家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T10:26:07.070

安装[提琴手](http://www.telerik.com/download/fiddler)。安装后，转到工具 > 主机。

然后你可以从 127.0.0.1:8000 映射到 mysite.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:03:03.763

我已经按照以下步骤解决了重定向问题：[https ://serverfault.com/questions/397364/how-to-setup-named-virtual-hosts-in-nginx](https://serverfault.com/questions/397364/how-to-setup-named-virtual-hosts-in-nginx)

简而言之，您需要像上面一样在 /etc/hosts 中添加一个条目，并在它们之间添加 nginx 代理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-26T17:23:55.737

如果你们中的任何人在将**127.0.0.1 mysite.com**添加到**/etc/hosts**后仍然苦苦挣扎，请检查您是否使用 VPN。我仍然收到错误**“无法连接到 mysite.com:8000”**。我通过关闭我的 VPN 解决了​​这个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-05T16:40:34.967

以下终于为我修复了它......

在授权的 JavaScript 来源下：[http://localhost:8000](http://localhost:8000)

在授权重定向 URI 下：[http://localhost:8000/page-name-here](http://localhost:8000/page-name-here)

# android - 如何将 admob 横幅集成到 Android 应用程序中

> ID：10970126
> 
> 赞同：-1
> 
> 时间：2012-06-10T15:56:28.530
> 
> 标签：android, admob

如何将 admob 集成到我的 Android 应用程序中？

我使用了这个链接：[google code](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals) ，但我认为并不是所有需要的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:05:53.603

我对本教程不太确定，因为我只是通过 API 来让它工作。这是我的代码：

```
AdView adView = new AdView(OOKL.this, AdSize.BANNER, MY_AD_UNIT_ID);
LinearLayout al = (LinearLayout) findViewById(R.id.AdLayout);
al.addView(adView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

adReq = new AdRequest();
adReq.setTesting(IS_DEBUG);
adView.loadAd(adReq);
adView.setAdListener(new AdListener() {
    public void onReceiveAd(Ad ad) {
        setAdVisible(true);
    }

    public void onFailedToReceiveAd(Ad ad, AdRequest.ErrorCode error) {
        setAdVisible(false);
    }

    public void onPresentScreen(Ad ad) {
    }

    public void onDismissScreen(Ad ad) {
    }

    public void onLeaveApplication(Ad ad) {
    }
});

private void setAdVisible(boolean show) {
    View v = this.findViewById(R.id.AdLayout);
    v.setVisibility(show ? View.VISIBLE : View.GONE);
} 
```

这几乎就是您所需要的。这`IS_DEBUG`是我的私有变量，用于控制我是在测试模式下运行还是在现场生产中运行。 `MY_AD_UNIT_ID`是您在 AdMob 中注册应用时获得的广告单元 ID。 `AdLayout`是一个包含`AdView`- 它是垂直 LinearLayout 中的第一个子元素的 LinearLayout。

# java - 如何在 Coldfusion8 中使用 javaloader 设置 java 库？

> ID：10970133
> 
> 赞同：0
> 
> 时间：2012-06-10T15:57:08.000
> 
> 标签：java, coldfusion, coldfusion-8, bcrypt, javaloader

我试图让 javaLoader 在 Coldfusion8 应用程序中运行，我需要一些帮助才能让我越过终点线。

这是我到目前为止所拥有的：

内部**application.cfc**：

```
...
THIS.mappings["/javaloader"] = GetDirectoryFromPath( GetCurrentTemplatePath() ) & "tools/javaloader";
... 

<cffunction name="onApplicationStart" returnType="boolean" output="false" hint="application initalizer">
    <cfscript>
    Application.str = structNew();
    Application.str.myJavaLoaderKey = "someUUID_javaloader";
    Application.str.jarPaths = arrayNew(1);
    </cfscript>
    <cfif ( NOT structKeyExists(server, Application.str.myJavaLoaderKey) )>
        <!--- add path to class files to jarPath Array --->
        <cfset Application.str.jarPaths[1] = expandPath("/classes/BCrypt.class")>
        <!--- this will map out to: ...htdocs/classes/BCrypt.class --->

        <cfif ( NOT structKeyExists(server, Application.str.myJavaLoaderKey) )>
            <cflock name="#Hash(Application.str.myJavaLoaderKey)#" type="exclusive" timeout="10">
                <cfset server[Application.str.myJavaLoaderKey] = createObject("component", "javaloader.JavaLoader")>
                <!--- tried .init(Application.str.jarPaths) here, but didn't do anything --->
            </cflock>
        </cfif>
    </cfif>
    <cfreturn true />
</cffunction> 
```

这是按照[此处](http://cfsearching.blogspot.co.at/2008/08/how-to-install-poi-on-coldfusion-8.html)和[此处](http://www.compoundtheory.com/javaloader/docs/)的说明完成的。

在我的**handler.cfc**中，我试图访问 javaloader 和 BCrypt 类，如下所示：

```
<cfsript>
    pass = "some_password";
    <!--- this is accessible --->
    cryptonite = server[Application.str.myJavaLoaderKey];
    <!--- now trying to call init() with respective path to create an instance --->
    <!--- BREAKS HERE --->
    bCrypt = cryptonite.init(Application.str.jarPaths[1]);

    hashed = bCrypt.hashpw(pass, bcrypt.gensalt());        
</cfscript> 
```

我可以转储 cryptonite 变量，但是当我尝试创建 BCrypt 的实例时，脚本失败了。

**问题**：
我很高兴我做到了这一点，但是我已经坐了几个小时了，不知道我做错了什么。希望有更多见识的人可以为我指明方向？

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:42:39.323

好的。有几个错误。

要使用 Coldfusion8 和 BCrypt 或您选择的 Java 类设置 Javaloader，请执行以下操作：

1) 将任何 Java 类（.java 文件，而不是 .class 文件）放在 webroot/htdocs(Apache) 的文件夹中。我的 BCrypt 路径如下所示：

```
 htdocs/classes/jBCrypt/ 
```

2）对javaloader做同样的事情。我的路径如下所示：

```
 htdocs/tools/javaloader/ 
```

3) 在**Application.cfc**中：

```
<!--- create mapping to javaloder --->
<cfscript>        
    THIS.mappings["/javaloader"] = GetDirectoryFromPath( GetCurrentTemplatePath() ) & "tools/javaloader";
</cfscript>

<!--- Application start --->
<cffunction name="onApplicationStart" returnType="boolean" output="false" hint="">
    <cfscript>       
        <!--- store a UUID and emptry path array in Application scope --->
        Application.str = structNew(); 
        Application.str.myJavaLoaderKey = "your_uuid_javaloader";
        Application.str.jarPaths = arrayNew(1);
    </cfscript>
     <!--- check if exists --->
    <cfif ( NOT structKeyExists(server, Application.str.myJavaLoaderKey) )>

         <!--- put all paths to your .java files here, this is for JBCrypt --->
         <cfset Application.str.jarPaths[1] = expandPath("/classes/jBCrypt-0.3")>
         <cfif ( NOT structKeyExists(server, Application.str.myJavaLoaderKey) )>

            <cflock name="#Hash(Application.str.myJavaLoaderKey)#" type="exclusive" timeout="10">
                <!--- create javaloader object and init with all submitted paths --->
                <cfset server[Application.str.myJavaLoaderKey] = createObject("component", "javaloader.JavaLoader").init(sourceDirectories=Application.str.jarPaths )>
            </cflock>
        </cfif>
    </cfif>
</cffunction> 
```

设置应在[此处](http://cfsearching.blogspot.co.at/2008/08/how-to-install-poi-on-coldfusion-8.html)的应用程序范围内。这应该设置您现在可以从其他地方引用的所有 .java 类，如下所示：

```
<cfscript>
    var pass = "a_password";
    javaLoader = server[Application.str.myJavaLoaderKey];
    // create an instance of javaloader-BCrypt
    bcrypt = javaLoader.create("BCrypt").init();
    // now you can call methods from bcrypt like so:
    hashed = bcrypt.hashpw(pass, bcrypt.gensalt());
</cfscript> 
```

想通了阅读[here](http://www.compoundtheory.com/?action=displayCategory&ID=22)。原来你必须参考**.java**文件而不是**.class**文件，我最初这样做了。

以下链接也可能有帮助： http:
[//blog.mxunit.org/2011/02/hashing-passwords-with-bcrypt-in.html](http://blog.mxunit.org/2011/02/hashing-passwords-with-bcrypt-in.html)
[http://www.compoundtheory.com/javaloader/docs/](http://www.compoundtheory.com/javaloader/docs/)
[http:// /www.aliaspooryorik.com/blog/index.cfm/e/posts.details/post/using-bcrypt-in-coldfusion-10-370](http://www.aliaspooryorik.com/blog/index.cfm/e/posts.details/post/using-bcrypt-in-coldfusion-10-370)

# wordpress - 简码显示异常

> ID：10970137
> 
> 赞同：0
> 
> 时间：2012-06-10T15:57:40.357
> 
> 标签：wordpress, wordpress-theming, shortcode

我正在尝试获取一个短代码来向 div 添加一个 id，这部分工作正常，但它添加了一些额外的东西，我不确定是因为我做错了什么，还是其他原因。这是实际的简码：

```
function jump_function($params){
    //Extract parameters and supply default values
    extract( shortcode_atts( array(
        'id' => ''
    ), $params ) );

    //The parameters are now stored as variables
    return do_shortcode('<div id="' . $id . '"</div>');
}
add_shortcode( 'jump', 'jump_function' ); 
```

我试图让它显示为

```
<div id="id-here"></div> 
```

但在页面上显示如下：

```
<div div="" <="" id="id-here" style="position: relative;"><div></div></div> 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:52:19.587

`do_shortcode`不能这样工作......
你不需要它。

```
function jump_function($params){
    //Extract parameters and supply default values
    extract( shortcode_atts( array(
        'id' => ''
    ), $params ) );

    //The parameters are now stored as variables
    return '<div id="' . $id . '"</div>';
}
add_shortcode( 'jump', 'jump_function' ); 
```

[http://codex.wordpress.org/do_shortcode](http://codex.wordpress.org/do_shortcode)

# php - 随机定位图像，不重叠

> ID：10970138
> 
> 赞同：0
> 
> 时间：2012-06-10T15:57:41.973
> 
> 标签：php, javascript, jquery, wordpress, position

我正在使用 Wordpress 并使用他们的代码，我将画廊上传输出到特定页面作为无序列表的图像。

我想知道是否有一种方法可以使用 JS 将这些图像绝对定位在容器中（这将是相对的）并且没有任何重叠？因此，它必须定位它们，然后记下该图像的位置并确保下一个图像不重叠等。

每次都应该是随机生成，但我也想知道是否可以使图像及其位置每次都相同？

谢谢大家，期待一些想法。

-R

*编辑：您可以在此处查看 HTML 和进度：[http ://richgc.com/freelance/staton/furniture/](http://richgc.com/freelance/staton/furniture/)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:05:09.757

有一些 jquery 插件可以做到这一点。这是一个：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:06:03.417

选择@lucuma 的回答（我不知道有预先存在的插件）。

如果您要手动实现这样的插件，您可以使用传统上用于优化从钣金切割零件的[切割算法来确定不会重叠的图像位置。](https://stackoverflow.com/questions/4360637/cut-optimisation-algorithm)

如果您选择确定性算法，您应该始终在正确的位置获得图像的占位符。如果图像总是大小不同，这将确保图像总是出现在同一个地方。由于许多图像的大小可能相同，因此您可以按照图像文件名的字母顺序将图像分配给“剪切槽”。

# c# - 如何委派正确的行动 ?

> ID：10970141
> 
> 赞同：6
> 
> 时间：2012-06-10T15:58:15.930
> 
> 标签：c#, .net, interface, delegates, compiler-errors

我是 C# 的初学者，找不到任何答案：

我试图用一些接口参数委托操作，但通过扩展这个接口（或类）的对象推送函数

```
// some class extending interface
public class IntEvent : IFace{}
public class MoveEvent : IFace{}

// function i like to use to verify Action
static void setAction(Action<IFace> evt) {
    // evt ...
}
// function to delegate as Action
static void evtCheck(IntEvent evt) {
    // some func
}
static void evtMove(MoveEvent evt) {
    // some func
}
// class {
//  call method inside class and delegate this function :
setAction(evtCheck);
setAction(evtMove); 
```

我收到“`evtCheck(IntEvent)`无法转换为`Action<IFace>`”的错误，即使`IntEvent`扩展了`IFace`接口。

我应该如何解决这个问题？也许我必须使用 Func 或 Delegate ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T16:09:29.567

你不能做你想做的事——你期待协方差，但它唯一的类型参数[`Action<T>`](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)是*逆变的。*

您不能从`evtCheck`to进行方法组转换，`Action<IFace>`因为它`evtCheck`需要一个比实例期望的更通用类型*更具体*的类型 ( ) 作为其参数。如果允许这样的转换，如果委托执行时使用了实现但不是 的参数，您会期望发生什么？`IntEvent``IFace``Action<IFace>``IFace``IntEvent`

我认为你应该再看看你的设计，因为它看起来有一个缺陷，但如果你愿意，你可以创建一个 lambda 来强制将参数强制转换为所需的类型并接受以下可能性`InvalidCastException`：

```
setAction(iFace => evtCheck((IntEvent)iface)); 
```

更有可能的是，您可能希望`evtCheck`接受更通用的类型或`setAction`接受更具体的委托。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T16:11:07.273

`Action<T>`在 T 中是逆变的，因此采用 an 的方法`Action<T>`也将接受`Action<U>`T 从 U 派生的地方。

`IntEvent`但是，您的类实现了`IFace`接口，这意味着如果编译器接受了您的`setAction()`调用，则可以`evtCheck()`使用另一个`IFace`-derivative 而不是 not的参数进行调用`IntEvent`，运行时错误和明显违反类型安全。

强制性 Eric Lippert 参考资料：[协变和逆变](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/)

编辑：根据您的描述，在我看来，您真正想要的是基于方法参数类型的差异化，因此，例如，您想要一个单独的操作用于`IntEvent`，另一个用于（假设的）`DoubleEvent`等。如果是这种情况，您实际上是双重虚拟分派后，C#中不直接支持，但可以使用[访问者](http://en.wikipedia.org/wiki/Visitor_%28design_pattern%29)设计模式进行模拟。

# templates - 这里哪里有冲突？

> ID：10970143
> 
> 赞同：6
> 
> 时间：2012-06-10T15:58:27.053
> 
> 标签：templates, overloading, d

为什么我不能重载这个模板函数？

```
import std.stdio;

T[] find(T, E)(T[] haystack, E needle)
    if (is(typeof(haystack[0] != needle)))
{
    while(haystack.length > 0 && haystack[0] != needle) {
        haystack = haystack[1 .. $];
    }
    return haystack;
}

// main.d(14): Error: function main.find conflicts with template main.find(T,E) if (is(typeof(haystack[0] != needle))) at main.d(5)
double[] find(double[] haystack, string needle) { return haystack; }

int main(string[] argv)
{
    double[] a = [1,2.0,3];
    writeln(find(a, 2.0));
    writeln(find(a, "2"));
    return 0;
} 
```

据我所知，这两个函数不能接受相同的参数类型。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T17:48:26.373

[由于错误](http://d.puremagic.com/issues/show_bug.cgi?id=1528)，您不能使用非模板函数重载模板函数。这应该有望在未来的某个时候得到解决。

同时，您可以将另一个函数编写为模板特化：

```
T find(T : double[], E : string)(T haystack, E needle)
{
    return haystack;
} 
```

# sql - 数据表练习

> ID：10970148
> 
> 赞同：-1
> 
> 时间：2012-06-10T15:59:14.997
> 
> 标签：sql, database

大家好，我正在做一个数据库练习，遇到了以下练习，我必须从给定的案例场景中创建一组数据表。但是我很难用粗体来计算属性：

*将为大学设计一个数据库，以监控学生在整个学习过程中的进步。学生正在模块化系统的框架内攻读学位（如理学士、理学硕士等）。该大学提供了许多模块，每个模块的特点是其代码、标题、学分、模块负责人、学术人员和他们来自的部门。模块由模块负责人协调，负责人与一名或多名讲师分担教学职责。讲师可以教授多个模块（并担任模块负责人）。学生可以自由选择他们想要的任何模块，但必须遵守以下规则：一些模块需要先修模块，而一些学位课程有必修模块。该数据库还将包含有关学生的一些信息，包括他们的学号、姓名、*

到目前为止，我拥有的表格是：

**大学**

*ModuleCode、ModuleTitle、CreditValue、部门*

**模块**

*ModuleCode、ModuleTitle、LecturerID*

**讲师**

*LecturerID、ModuleCode、ModuleTitle*

**学生**

*StudentID、姓名、地址、学位代码*

**程度**

*学位代码、学位类型、学位标题*

**表现**

*ModuleCode、ModuleTitle、StudentID、结果*

有什么我错过或可以改进的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:20:01.927

在第一遍时，我会阅读这样的描述。（可能的表格用粗体表示，有些表用粗体表示不止一次。）

> 将为大学设计一个数据库，以监测**学生**在整个**学习过程中**的 **进步**。**学生**正在模块化系统的框架内攻读学位**（**如理学士、理学硕士等）。该大学提供了许多**模块**，每个模块都有其代码、职称、学分、**模块负责**人、 **学术人员**和他们来自的**部门。**模块由模块负责人协调，负责人与一名或多名**讲师分担****教学职责********************. 讲师可以教授多个模块（并担任模块负责人）。学生可以自由选择他们想要的任何模块，但必须遵守以下规则：一些模块需要 **先修模块**，而一些**学位课程有必修模块**。该数据库还将包含有关 **学生**的一些信息，包括他们的学号、姓名、地址、他们学习的学位以及他们过去的表现（即，所学的模块和 **考试结果**）。******************

 ****由于这是针对一所大学的，我可能不会创建大学表，尽管我可以提出一个很好的案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:42:34.777

一些想法（排名不分先后）：

*   `ModuleId`我会假设和之间存在一对一的关系`ModuleTitle`。也就是说， a`ModuleId`唯一标识 a `ModuleTitle`。在这种情况下，您不应该在标识模块的任何地方都使用两者`ModuleId`，`ModuleTitle`而应仅使用唯一标识值。`ModuleId`（在定义和之间的关系的表中除外`ModuleTitle`。）
*   讲师可以教授多个模块。但是，您已将`ModuleId`列为 Lecturers 表的一部分。看到这里的问题了吗？
*   模块表中的是否`LecturerId`打算成为模块领导者？如果有，就这么说吧。外键不必总是与主键同名——一般来说这是个好主意，但你要澄清这是一个特殊的讲师。或者，您可能想添加一个表格，专门标识哪些讲师是模块负责人。
*   我在这里看不到任何实现“某些模块需要先决条件模块，而某些学位课程具有强制性模块”要求的东西。
*   In 将“他们来自的部门”解释为指的是学术人员，而不是模块本身。尚不清楚一个模块只能由一个学术部门的人教授。
*   在现实世界中，地址比仅仅`address`作为一个字段要复杂得多。

最后一点有点挑剔，但其余的应该解决。我认为你仍然需要做一些重要的工作来解决这些问题。

一般来说，我认为您需要将其分解为更多表格，以表示每个单独的实体（模块、讲师、部门，然后构建表格来定义它们之间的关系。****

# python - MongoDB：即使成功，为什么 update() 也会返回 null？

> ID：10970149
> 
> 赞同：2
> 
> 时间：2012-06-10T15:59:31.483
> 
> 标签：python, mongodb, pymongo, database

我正在使用此代码向数据库插入（或更新，如果已经存在）新用户：

```
 emailAddress = self.request.params.get('emailaddress')
    googleRefreshToken = self.request.params.get('googlerefreshtoken')

    # upsert new user
    postData = {"emailAddress" : emailAddress,
        "googleRefreshToken" : googleRefreshToken}
    newPost = self.request.db.users.update( { 'emailAddress' : emailAddress }, postData, True );

    return json.dumps( newPost, default=json_util.default) 
```

我假设 update() 应该返回对象 _id 甚至对象本身......但即使 upsert 正常工作，它也总是返回 null 。为什么它返回 null，我怎样才能让它返回 _id 或对象本身？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T16:14:50.280

如[文档](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.update)中所述，如果您`safe=True`在参数中包含 to `update`，则返回对的响应`lastError`，否则返回`None`。如果您想要`_id`更新文档的 ，您要么必须单独查询它，要么使用[`find_and_modify`](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.find_and_modify)而不是`update`.

# c# - 在运行时将动态（用户生成的）字符串添加到列表框

> ID：10970152
> 
> 赞同：-2
> 
> 时间：2012-06-10T15:59:56.033
> 
> 标签：c#, winforms, visual-studio-2010

如何使用 Listbox 控件（或任何其他控件）允许用户**在运行时**向控件添加自定义字符串？我希望这是一个控件，我不想通过添加列表框项在后面的代码中手动添加字符串。我还希望这些项目可以就地编辑。

在 Delphi 中，他们有备忘录组件，它允许用户添加文本行。然后，运行时将此附加文本转换为字符串对象。

在 C# 中是否有类似的可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:01:02.260

您可能会查看**数据网格视图**。

它的行为很像列表框，但用户可以编辑单元格。我相信它可以配置为让用户添加一个新的（空）行，如果没有，一个简单的按钮可以轻松完成此操作。

添加新行后，用户可以根据需要编辑其内容。

见这里：http: [//msdn.microsoft.com/en-us/library/e0ywh3cz.aspx](http://msdn.microsoft.com/en-us/library/e0ywh3cz.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:05:34.180

基于集合的控件通常具有称为“项目”的属性。该属性是一个对象的集合，将被显示。您可以简单地使用：

```
ListBox.Items.Add(yourStringVariable) 
```

如果要添加复杂对象，请覆盖 .ToString 方法以返回对象实例的名称。ListBox 在内部调用对象实例上的 .ToString 来呈现文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T16:07:00.610

只需以这种方式将您的字符串添加到项目中

```
//user fill the   textBox1
//for given ListBox listbox
listbox.Items.Add(textBox1.Text); 
```

# sql - 优化 SQL VB.NET 结果的另一种方法

> ID：10970159
> 
> 赞同：0
> 
> 时间：2012-06-10T16:01:19.033
> 
> 标签：sql, windows, vb.net, winforms, datagridview

我正在尝试使用此代码刷新我的数据网格时遇到一些缓慢的问题，我正在尝试做的是操作列 ACROSS 变量（selltype_code）。

```
objConn.Open()

            Dim sqlConn As String = ("SELECT item_code, item_name, item_quantity, selltype_code, item_selldetail FROM qa_items")
            Dim objDataAdapter As New MySqlDataAdapter(sqlConn, objConn)
            Dim ds As New DataSet

            objDataAdapter.Fill(ds, "items")

            'Fill datagridview with FOR CICLE
            For i As Int16 = 0 To ds.Tables("items").Rows.Count - 1
                If ds.Tables("items").Rows(i).Item("selltype_code") = 1 Then
                    With Me.resultitems_seach_item
                        .Item(3, i).Style.ForeColor = ColorTranslator.FromOle(RGB(39, 74, 109)) 'Color para Precio
                        .Item(3, i).Value = ds.Tables("items").Rows(i).Item("item_selldetail") 'Valor para Precio
                        .Item(4, i).Style.ForeColor = Color.DarkGray
                        .Item(4, i).Value = "---"
                        .Item(5, i).Style.ForeColor = Color.DarkGray
                        .Item(5, i).Value = "---"
                        .Item(6, i).Style.ForeColor = Color.DarkGray
                        .Item(6, i).Value = "---"
                    End With
                ElseIf ds.Tables("items").Rows(i).Item("selltype_code") = 2 Then
                    With Me.resultitems_seach_item
                        .Item(3, i).Style.ForeColor = Color.DarkGray
                        .Item(3, i).Value = "---"
                        .Item(4, i).Style.ForeColor = Color.DarkGray
                        .Item(4, i).Value = "---"
                        .Item(5, i).Style.ForeColor = ColorTranslator.FromOle(RGB(39, 74, 109)) 'Color para Precio
                        .Item(5, i).Value = ds.Tables("items").Rows(i).Item("item_selldetail")
                        .Item(6, i).Style.ForeColor = Color.DarkGray
                        .Item(6, i).Value = "---"
                    End With
                ElseIf ds.Tables("items").Rows(i).Item("selltype_code") = 3 Then
                    With Me.resultitems_seach_item
                        .Item(3, i).Style.ForeColor = Color.DarkGray
                        .Item(3, i).Value = "---"
                        .Item(4, i).Style.ForeColor = ColorTranslator.FromOle(RGB(39, 74, 109)) 'Color para Precio
                        .Item(4, i).Value = ds.Tables("items").Rows(i).Item("item_selldetail")
                        .Item(5, i).Style.ForeColor = Color.DarkGray
                        .Item(5, i).Value = "---"
                        .Item(6, i).Style.ForeColor = Color.DarkGray
                        .Item(6, i).Value = "---"
                    End With
                Else
                    With Me.resultitems_seach_item
                        .Item(3, i).Style.ForeColor = Color.DarkGray
                        .Item(3, i).Value = "---"
                        .Item(4, i).Style.ForeColor = Color.DarkGray
                        .Item(4, i).Value = "---"
                        .Item(5, i).Style.ForeColor = Color.DarkGray
                        .Item(5, i).Value = "---"
                        .Item(6, i).Style.ForeColor = ColorTranslator.FromOle(RGB(39, 74, 109)) 'Color para Precio
                        .Item(6, i).Value = ds.Tables("items").Rows(i).Item("item_selldetail")
                    End With
                End If

            Next i

            objConn.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:09:08.043

确保关闭网格列的任何自动调整大小设置。这大大减慢了获取速度。在进行刷新之前将 Grid AutoresizeMode 设置为 NONE。

# ruby - Rails：通过锚点击提交 Ajax 表单

> ID：10970160
> 
> 赞同：2
> 
> 时间：2012-06-10T16:01:19.517
> 
> 标签：ruby, ruby-on-rails-3

我正在将一个现有的应用程序移植到 Rails，该应用程序广泛使用程式化的锚点来提交表单：

```
 <a class="lozenge-button h25 blue" href="#">
      <span class="left"></span>
      <span class="center">Send</span>
      <span class="right"></span>
   </a> 
```

然而，在 Rails 中，这些锚点不适用于 Ajax 表单提交，因为 Rails 的 UJS 似乎需要输入标签而不是锚点（即`submit_tag("Submit", remote: true)`）。

有没有办法让我的主播触发 Ajax 表单提交？我设法让主播通过以下方式提交表单：

```
$('#my_anchor').click(function() { $(this).closest('form').submit();}); 
```

...但它绕过 Ajax 并执行重新加载页面的正常表单提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:17:01.843

我最终以与[这个问题](https://stackoverflow.com/a/10414549/93995)非常相似的方式解决了它：

```
<%= f.submit id: 'hidden_submit_button', style: 'display: none;' %>

<a class="lozenge-button h25 blue" href="#" onclick="$('#hidden_submit_button').click(); return false;">
    <span class="left"></span>
    <span class="center">Send</span>
    <span class="right"></span>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T18:44:54.713

在 Rails 中，将 remote:true 添加到链接帮助器方法中。然后 rails_ujs（Rails unobtrusive javascript）负责通过 ajax 发送它。请参阅[Rails Ajax 指南](https://github.com/rails/jquery-ujs/wiki/ajax)，以便您的代码变为（在 ERB 中）

```
<%= link_to the_rails_path,remote:true,class:"lozenge-button h25 blue" do %>
 <span>etc</span>
 <span>etc</span>
<%end%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:29:43.580

你可以试试这个

```
var form = $(this).closest('form');
$.post(form.attr('action'), form.serialize()); 
```

# iphone - 使 iPhone 振动：未声明 AudioServicesPlaySystemSound(kSystemSoundID_Vibrate)

> ID：10970162
> 
> 赞同：7
> 
> 时间：2012-06-10T16:01:49.210
> 
> 标签：iphone, xcode, audio, vibration

我想让 iPhone 振动，我找到了代码

```
AudioServicesPlaySystemSound(kSystemSoundID_Vibrate); 
```

但是 Xcode 4.3.2 报告错误：未声明的标识符 kSystemSoundID_Vibrate

有什么问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-10T16:03:28.957

尝试：

```
AudioServicesPlayAlertSound(kSystemSoundID_Vibrate); 
```

**编辑**：还要确保你导入`AudioToolbox.framework`

*   `#import <AudioToolbox/AudioToolbox.h>`

# jquery - 无法使用应用程序中的 REST 资源 - 415 响应不是 JSON 格式

> ID：10970163
> 
> 赞同：0
> 
> 时间：2012-06-10T16:02:12.393
> 
> 标签：jquery, json, ajax, rest, jira

我正在尝试使用来自独立 OpenSocial (Atlassian Jira) 小工具的以下 REST 资源。

我可以使用以下 URL 通过浏览器查询资源：

[https://jira.atlassian.com/rest/api/latest/issue/JRA-9](https://jira.atlassian.com/rest/api/latest/issue/JRA-9)

我可以从我的开发机器发出相同的请求。对我来说，它当然看起来像 JSON ......但是，当我从我的小工具查询时，我得到

```
GET 10.0.15.10:2990/jira/rest/api/latest/issue/CRD-1  415 Unsupported Media Type (32ms) 
```

响应以 HTML 形式返回。这是来自 tomcat 的响应正文：

```
<html><head><title>Apache Tomcat/6.0.20 - Error report</title><style><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 415 - </h1><HR size="1" noshade="noshade"><p><b>type</b> Status report</p><p><b>message</b> <u></u></p><p><b>description</b> <u>The server refused this request because the request entity is in a format not supported by the requested resource for the requested method ().</u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/6.0.20</h3></body></html> 
```

这是我的 AJAX 调用（它本质上是包装在[Atlassian gadget JavaScript Framework](https://developer.atlassian.com/display/GADGETS/Using+the+Atlassian+Gadgets+JavaScript+Framework)中的 JQuery ）：

```
 args: [{
         key: "issueData",
         ajaxOptions: function() {
             return {
                 url: "/rest/api/latest/issue/CRDTRK-1"
             };
         }
  }] 
```

我尝试添加`dataType: "json"`到 ajax 请求，但无济于事。我可能错过了一些简单的东西。

以下是请求/响应标头：

```
Response Headers
Content-Length  1051
Content-Type    text/html;charset=utf-8
Date    Sun, 10 Jun 2012 15:53:06 GMT
Server  Apache-Coyote/1.1
X-AREQUESTID    1013x5993x1
X-ASESSIONID    1bi5et0
X-AUSERNAME admin
X-Seraph-LoginReason    OK

Request Headers
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-gb,en;q=0.5
Connection  keep-alive
Content-Type    application/x-www-form-urlencoded
Cookie  atlassian.xsrf.token=BP8Q-WXN6-SKX3-    
DNT 1
Host    10.0.15.10:2990
Referer http://10.0.15.10:2990/jira/secure/Dashboard.jspa
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
X-Requested-With    XMLHttpRequest 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T09:55:30.440

您的小工具规范文件需要在您的 ajax 选项中发送 contentType 请求标头：

```
args: [{
    key: "issueData",
    ajaxOptions: function() {
        return {
            contentType: 'application/json',
            url: "/rest/api/2.0.alpha1/issue/CRDTRK-1"
        };
    },
}] 
```

检查 HTTP 请求中的请求标头。应该是：`Content-Type: application/json` 而不是：`Content-Type application/x-www-form-urlencoded`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:01:09.633

尝试使用 getJSON 和 out callBack=? 如：

```
$.getJSON('https://jira.atlassian.com/rest/api/latest/issue/JRA-9jsoncallback=?', function(data){ $.each(data, function(){ alert(this.expand); }); }); 
```

# c++ - 使用 SetNamedSecurityInfo 设置 GRANT_ACCESS

> ID：10970164
> 
> 赞同：0
> 
> 时间：2012-06-10T16:02:55.810
> 
> 标签：c++, windows, winapi

我使用[此](http://msdn.microsoft.com/en-us/library/aa379283%28v=vs.85%29.aspx)方法授予\拒绝对注册表项的访问权限：

第一个 GRANT_ACCESS

```
AddAceToObjectsSecurityDescriptor(wKey, SE_REGISTRY_KEY, UserName, TRUSTEE_IS_NAME, GENERIC_ALL, GRANT_ACCESS, SUB_CONTAINERS_AND_OBJECTS_INHERIT); 
```

然后拒绝访问

```
AddAceToObjectsSecurityDescriptor(wKey, SE_REGISTRY_KEY, UserName, TRUSTEE_IS_NAME, GENERIC_ALL, DENY_ACCESS, SUB_CONTAINERS_AND_OBJECTS_INHERIT); 
```

他们都工作了。在这两个电话之后，我试图再次拨打第一个电话以授予访问权限。但我做不到。没有像 ERROR_ACCESS_DENIED 这样的错误消息。AddAceToObjectsSecurityDescriptor 不返回错误代码。我的用户帐户是相应注册表项的所有者。此外，我仍然可以在相同的用户名下通过 regedit 手动更改权限。AddAceToObjectsSecurityDescriptor 方法有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-24T09:41:37.267

尝试使用 DENY_ACCESS 和 SET_ACCESS。例子：

```
AddAceToObjectsSecurityDescriptor(wKey, SE_REGISTRY_KEY, UserName, TRUSTEE_IS_NAME, GENERIC_ALL, SET_ACCESS, SUB_CONTAINERS_AND_OBJECTS_INHERIT); 
```

和

```
AddAceToObjectsSecurityDescriptor(wKey, SE_REGISTRY_KEY, UserName, TRUSTEE_IS_NAME, GENERIC_ALL, DENY_ACCESS, SUB_CONTAINERS_AND_OBJECTS_INHERIT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:24:33.487

好吧，由于您最后一次调用是拒绝对给定对象（注册表键）的访问，因此您不能期望成功访问您刚刚拒绝访问的同一对象。这就是您收到 ERROR_ACCESS_DENIED 的原因。由于您是对象的所有者，您当然可以取得对象的所有权并根据需要重置安全描述符。

# android - Android 渲染脚本可以在 GPU 上运行吗？

> ID：10970165
> 
> 赞同：15
> 
> 时间：2012-06-10T16:03:02.550
> 
> 标签：android, renderscript

是否有任何 Android 设备在 GPU 而不是 CPU 上执行渲染脚本，或者这还没有在任何地方实现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T10:27:52.973

从 JellyBean 4.2 开始，renderscript 有一个直接的 GPU 集成。看到[这个](http://developer.android.com/about/versions/jelly-bean.html)和[这个](http://developer.android.com/about/versions/android-4.2.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T15:02:57.113

我无法确认 Google 的任何官方文档，但我每天都在使用 RenderScript，每次运行它时，我都会看到 logcat 报告在我的设备中加载图形芯片的驱动程序，尤其是 Tegra 2。Google 确实落后了记录 RenderScript，如果他们在讨论中没有纠正这个遗漏，我一点也不感到惊讶。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T09:36:52.440

目前 Renderscript 的计算端只能在 CPU 上运行：

> 目前，计算 Renderscripts 只能利用 CPU 内核，但在未来，它们可能会在其他类型的处理器上运行，例如 GPU 和 DSP。

取自[Renderscript 开发指南](http://developer.android.com/guide/topics/renderscript/compute.html)。

Renderscript 的图形端位于 OpenGL ES 之上，因此着色器将在 GPU 上运行。

ARM 的 Mali-T604 GPU 将为 Renderscript 的计算端提供目标（在未来的 Android 版本中？）（请参阅[ARM 博客条目](http://blogs.arm.com/multimedia/617-gpu-computing-in-android-with-arm-mali-t604-renderscript-compute-you-can/)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T15:12:21.150

RenderScript 的设计使其在 GPU 上运行。这是添加新语言的主要目的。我假设由于缺乏支持，它在 CPU 上运行的设备，但在大多数设备上，它在 GPU 上运行

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T15:32:38.993

我认为这可能取决于您是在进行图形操作还是计算操作。图形操作可能会在 GPU 上执行，但据我所知，计算操作不会。

当您使用 forEach 构造时，计算将在 CPU 上的多个线程中运行，而不是 GPU（您可以在 ICS 源代码中看到这一点）。在未来的版本中，这可能会改变（参见[https://events.linuxfoundation.org/slides/2011/lfcs/lfcs2011_llvm_liao.pdf](https://events.linuxfoundation.org/slides/2011/lfcs/lfcs2011_llvm_liao.pdf)），但我还没有看到任何公告。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-14T15:35:51.587

[目前，似乎](https://groups.google.com/d/msg/android-platform/En9pG3ZZOWQ/kE2JbWOez24J)只有 Nexus 10支持Renderscript GPU 计算。

# visual-studio-2010 - 使用来自同一表中另一列的输入的 SQL 表列

> ID：10970171
> 
> 赞同：0
> 
> 时间：2012-06-10T16:04:13.920
> 
> 标签：visual-studio-2010, sql-server-2008, dataset

我想在表中有一个列，它根据同一个表中的另一列计算值。

例如，我有“有效期”表，其中包含“DateManufactured”、“DateExpires”列。Date Expires 列必须计算值，假设为 Datemanufactured 添加 30 天。我们如何在 Visual Studio2010->DataSet Design->DataTable Column->Properties->Expression 中执行此操作 请[在此处查看相关图片](http://tinypic.com/r/ndlanm/6)

就 SQL Server 表达式而言，可能的表达式是什么？请提出最佳解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:13:37.100

我相信您正在寻找[DateAdd](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

```
SELECT DATEADD(day, 30, '15 Dec 1988') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:14:03.930

```
select dateadd(day,30,getdate()) 
```

这将需要当前日期（getdate（））添加 30 天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:20:15.637

我建议创建一个存储过程，将您的数据插入到您的表中，并使用需要插入的值的参数。然后您可以根据您的日期参数进行计算。例子：

```
Create Procedure InsertValidity
(
  @City varchar(20),
  @Area varchar(20),
  ...
  @DatePosted datetime,
  ...
  @UserID
)

as

declare @DurationFrom datetime
set @DurationFrom = (select DATEADD(dd,30,@DatePosted)

insert into Validity (City, Area, ..., DatePosted, ... UserID)
values(@City, @Area, ..., @DatePosted,...@DurationFrom,...@UserID) 
```

这应该可以解决您的问题。只需通过将 ... 替换为您的其他数据来完成脚本，然后在您的应用程序中执行存储过程。

# java - 如何在 Java Swing 中获取工具提示文本字符串的宽度？

> ID：10970173
> 
> 赞同：4
> 
> 时间：2012-06-10T16:04:26.330
> 
> 标签：java, swing, text, width, tooltip

我有以下几行来获取 JList 项目的工具提示文本：

```
JList aList=new JList(aData)
{
  public String getToolTipText(MouseEvent evt)  // This method is called as the cursor moves within the list.
  {
    String tooltipText="Some tooltip";
    int tooltipWidth= ?
    return tooltipText;
  }
} 
```

在 getToolTipText() 中，如何获取 tooltipText 的宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:07:35.713

您可以使用`FontMetrics`来确定某些文本的大小。

```
FontMetrics metrics = graphics.getFontMetrics(font);
int adv = metrics.stringWidth(text); 
```

[http://docs.oracle.com/javase/tutorial/2d/text/measuringtext.html](http://docs.oracle.com/javase/tutorial/2d/text/measuringtext.html)

要查找使用的字体，您可以查询`LookAndFeel`您正在使用的字体

```
UIDefaults uidefs = UIManager.getLookAndFeelDefaults();
Font font = uidefs.getFont("ToolTip.font");
System.out.println(font);
// prints: FontUIResource[family=Dialog,name=Dialog,style=plain,size=12] 
```

要了解您可以使用的键（此处为“ToolTip.font”），您可以查看 Swing 中默认 LookAndFeels 的文档，例如 Nimbus：

[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:57:02.530

感谢答案，我想通了，这就是我所做的：

```
UIDefaults uidefs=UIManager.getLookAndFeelDefaults();
Font font=uidefs.getFont("ToolTip.font");
GraphicsEnvironment ge=GraphicsEnvironment.getLocalGraphicsEnvironment();
Graphics2D g2d=ge.createGraphics(new BufferedImage(1,1,1));
FontMetrics fontMetrics=g2d.getFontMetrics();
Top_Line_Width=fontMetrics.stringWidth("Toptip text"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T18:05:10.067

> 我像这样在 html 中形成我的工具提示 : `"<html>first line<Br>========<Br>second line</html>"`，我希望分隔线`"====="`与第一行的长度相匹配，所以它看起来更好，..

考虑备选方案 2 和 3，它们都不需要计算并且看起来比“等号行”更好。

![HTML 工具提示](../Images/a57d6e13d70e52cd24c5f74f9c78afd4.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.LineBorder;

public class HtmlToolTip {

    HtmlToolTip() {
        String attempt1 = "<html>first line 1<Br>========<Br>second line</html>";
        JLabel label1 = new JLabel(attempt1);
        label1.setBorder(new LineBorder(Color.BLACK));

        String attempt2 = "<html><u>first line 2</u><br>second line</html>";
        JLabel label2 = new JLabel(attempt2);
        label2.setBorder(new LineBorder(Color.BLACK));

        String attempt3 = "<html>first line 3<hr>second line</html>";
        JLabel label3 = new JLabel(attempt3);
        label3.setBorder(new LineBorder(Color.BLACK));

        JPanel p = new JPanel(new FlowLayout(FlowLayout.LEADING,5,5));
        p.add(label1);
        p.add(label2);
        p.add(label3);

        JOptionPane.showMessageDialog(null, p);
    }

    public static void main(String[] args) throws Exception {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new HtmlToolTip();
            }
        });
    }
} 
```

# sql-server - 如果行已过时，如何只允许对表进行一次更新/插入

> ID：10970181
> 
> 赞同：0
> 
> 时间：2012-06-10T16:05:37.073
> 
> 标签：sql-server

我有一个存储在磁盘上的文件，可以跨网络场中的多个服务器访问。该文件会根据数据库中的数据变化进行必要的更新。我有一个数据库表，其中存储了一行，其中包含该文件的 URI 和一些基于一些数据库表的哈希值。如果哈希与其各自的表不匹配，则需要重新生成文件并插入新行。

如何使只有 1 个客户端重新生成此文件并插入一行？

最简单但最糟糕的解决方案（因为锁）是：

```
BEGIN TRANSACTION
SELECT ROW FROM TABLE (lock the table for the remainder of the transaction)
IF ROW IS OUT OF DATE:
    REGENERATE FILE
    INSERT ROW INTO TABLE
DO SOME STUFF WITH FILE (30s)
COMMIT TRANSACTION 
```

但是，如果多个客户端执行此代码，则所有后续客户端都会在“DO SOME STUFF WITH FILE”处理期间等待很长时间。

有没有更好的方法来处理这个？也许改变我在提交之前处理文件的方式以使其更快？我已经为此困扰了几天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:33:58.167

听起来您需要异步进行文件处理，因此文件处理被分拆并且事务及时完成。有几种方法可以做到这一点，但最简单的可能是将“用文件做事”替换为“将记录插入表 This_File_Needs_To_Be_Updated，然后每隔几分钟运行一个作业以更新该表中的每条记录。或者[这](http://www.motobit.com/tips/detpg_async-execute-sql/)是一些即时生成作业的代码。或者在 Stack Overflow 上查看[这个](https://stackoverflow.com/questions/4571823/sql-server-tsql-is-it-possible-to-exec-statements-in-parallel)问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:20:49.963

答案取决于文件级处理的细节。

如果您只是交换数据库和文件操作，您可能会面临文件损坏或忙于等待的风险（取决于您打开它的方式，以及当并发打开被拒绝时您的代码会做什么）。从吞吐量（或任何其他）的角度来看，繁忙的等待肯定比等待数据库锁更糟糕。

如果您的文件处理确实需要很长时间以至于*经常*导致请求排队，那么唯一的解决方案是添加更强大的硬件或优化文件级处理。

例如，如果文件只反映数据库中的数据，您可能根本不更新它，并且有一个后台进程根据数据库中的数据定期重新生成其内容。您可能需要添加版本控制，以确保*读取*文件的人不会收到过时的数据。如果 URL 指向的文件每次都有一个新名称，那么您可能需要一个错误处理程序来确保`GET`请求不会习惯性地收到`404`对新文件的响应。

# c# - 从 asp.net mvc 4 razor 中的自定义 Html Helpers 访问属性

> ID：10970184
> 
> 赞同：23
> 
> 时间：2012-06-10T16:06:23.143
> 
> 标签：c#, razor, html-helper, asp.net-mvc-4

我在 ASP.NET MVC 4 razor 视图引擎 C# 中创建了 HtmlHelper。
我可以将视图模型属性传递给我的助手类吗？
例如，我有财产

```
[Required]
[Display(Name = "Your Lastname")]
public string Lastname { get; set; } 
```

我可以像这样将此属性传递给我的助手`@Html.Example(model => model.Lastname)`，然后在助手中获取数据注释（如果需要此字段，则显示名称等是什么）？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-10T16:11:33.513

该`[Display]`属性丰富了元数据。因此，您可以从元数据中获取信息。

例如，如果您想在帮助程序中检索显示名称：

```
public static class HtmlHelpers
{
    public static IHtmlString Example<TModel, TProperty>(
        this HtmlHelper<TModel> html, 
        Expression<Func<TModel, TProperty>> ex
    )
    {
        var metadata = ModelMetadata.FromLambdaExpression(ex, html.ViewData);
        var displayName = metadata.DisplayName;
        return new HtmlString(html.Encode(displayName));
    }
} 
```

然后如果我们假设您有一个视图模型：

```
public class MyViewModel
{
    [Required]
    [Display(Name = "Your Lastname")]
    public string Lastname { get; set; }
} 
```

您可以在强类型视图中使用帮助程序：

```
@model MyViewModel

@Html.Example(x => x.Lastname) 
```

现在让我们假设您编写了一个自定义元数据属性：

```
public class FooBarAttribute : Attribute, IMetadataAware
{
    public FooBarAttribute(string bar)
    {
        Bar = bar;
    }
    public string Bar { get; private set; }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.AdditionalValues["foo"] = Bar;
    }
} 
```

你用来装饰你的模型的：

```
public class MyViewModel
{
    [Required]
    [FooBar("This is the bar")]
    public string SomeBar { get; set; }
} 
```

然后在您的助手中，您可以获取自定义属性：

```
public static class HtmlHelpers
{
    public static IHtmlString Example<TModel, TProperty>(
        this HtmlHelper<TModel> html, 
        Expression<Func<TModel, TProperty>> ex
    )
    {
        var metadata = ModelMetadata.FromLambdaExpression(ex, html.ViewData);
        if (metadata.AdditionalValues.ContainsKey("foo"))
        {
            var foo = metadata.AdditionalValues["foo"] as string;
            return new HtmlString(html.Encode(foo));
        }
        return MvcHtmlString.Empty;
    }
} 
```

* * *

更新：

看来您需要获取所需的消息。不知道为什么需要在自定义助手中执行此操作，但这里有一个示例，您可以如何实现这一点：

```
public static class HtmlHelpers
{
    public static IHtmlString Example<TModel, TProperty>(
        this HtmlHelper<TModel> html, 
        Expression<Func<TModel, TProperty>> ex
    )
    {
        var me = (ex.Body as MemberExpression);
        if (me != null)
        {
            var required = me
                .Member
                .GetCustomAttributes(typeof(RequiredAttribute), false)
                .Cast<RequiredAttribute>()
                .FirstOrDefault();
            if (required != null)
            {
                var msg = required.FormatErrorMessage(me.Member.Name);
                return new HtmlString(html.Encode(msg));
            }
        }
        return MvcHtmlString.Empty;
    }
} 
```

# android - SurfaceView 工件

> ID：10970188
> 
> 赞同：1
> 
> 时间：2012-06-10T16:07:15.167
> 
> 标签：android, surfaceview, visual-artifacts

我的 layout.xml 包含一个带有一些 TextView 和 Button 的 FrameLayout，我像 MediaController 一样使用它，它还包含一个 SurfaceView。在代码中，我创建了一个 MediaPlayer 并将 SurfaceView 的 SurfaceHolder 设置为 Display，如下所示：

```
surfaceView = (SurfaceView) findViewById(R.id.video_surfaceview);
surfaceHolder = surfaceView.getHolder();
surfaceHolder.addCallback(this);
mediaPlayer.setDisplay(surfaceHolder); 
```

这非常适合显示视频，但是当我尝试调用时：

```
overLayTextView.setVisibility(View.Gone); 
```

overLayTextView 仍然可见。我试图检索 overLayTextView 的视图状态，并将其设置为 Gone。我认为 SurfaceView 直到感觉像（通常发生在 20 多秒后）才会更新其绘图状态。所以我的问题是我是否可以调用 SurfaceView 或 SurfaceHolder 来通知他们应该“重绘”他们的一些内容？（显然不是视频）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:18:59.690

我刚刚意识到使用视频信息更新覆盖的线程仍然称为：

```
overLayTextView.setText(mediaPlayer.getDuration()); 
```

在“非表面”布局中，这无关紧要，因为 View 是隐藏的，但在 SurfaceView 中显然不是这种情况（至少在某些设备上，这很奇怪）。

希望这会有所帮助，干杯。

# php - mod用查询重写

> ID：10970192
> 
> 赞同：1
> 
> 时间：2012-06-10T16:07:54.947
> 
> 标签：php, .htaccess, mod-rewrite, apache2

> **可能重复：**
> [查询字符串和 Mod 重写](https://stackoverflow.com/questions/487726/query-strings-mod-rewrite)

我正在尝试使用 mod rewrite 使没有 www 的链接更漂亮，并从： `http://example.com/folder/page.html`到 `http://example.com/index.php?page=page&folder=folder`

我已经为不在文件夹中的顶层页面管理了一个基本版本，但我很困惑如何包含此规则并让文件夹出现。我还希望保留查询字符串，以便 piwik 分析链接正常工作，例如： `http://example.com/folder/page.html?piwik=something`转到： `http://example.com/index.php?page=page&folder=folder&piwik=something`

任何帮助将不胜感激，这是我到目前为止所得到的：

```
<IfModule mod_rewrite.c>
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]
RewriteRule ^([^/]*)\.html$ /index.php?page=$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:10:58.300

您想要[`QSA`标志^(*Docs ，*)](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)示例代码如下：

```
RewriteRule ^/([^/]+/)?(.+\.html)$ /index.php?folder=$1&page=$2 [QSA,L] 
```

参考：找到此页面[http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html) 只需按 CTRL+F 并搜索“QSA”（没有语音标记）

# android - ScrollView如何滚动到另一个视图的底部

> ID：10970193
> 
> 赞同：0
> 
> 时间：2012-06-10T16:08:07.413
> 
> 标签：android, android-layout, android-widget

如何将 ScrollView 中的 LinearLayout 滚动到另一个视图的底部？

我的视图顶部有一个日历图像视图。下面有一个 ScrollView，其中包含该月的事件列表。ScrollView 包含几个 LinearLayout，详细说明了该月的事件。当用户通过触摸线性布局中的按钮来选择事件时，我想将当前的线性布局重新定位到滚动视图的顶部，我该如何做到这一点？

为了简洁起见，下面是我的布局的简短片段。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                      android:id="@+id/cirLinLayContainer"
                      android:orientation="vertical"
                      android:layout_width="fill_parent"
                      android:layout_height="fill_parent"
                      android:background="@drawable/bg_calendar">
                <RelativeLayout> 
                <Button             
                    android:id="@+id/calLeft"
                    android:background="@drawable/btn_arrowleft_dwn"/>
                <Button             
                    android:id="@+id/calRight"
                    android:background="@drawable/cal_rightnav_button"/>

                <ImageView android:src="@drawable/cal_september" 
                        android:layout_width="match_parent"
                        android:layout_centerHorizontal="true"
                        android:layout_height="wrap_content" />
                </RelativeLayout>

        <ScrollView xmlns:foo="http://schemas.android.com/apk/res/com.demo.android"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:id="@+id/septemberCalendarScroller">

            <LinearLayout android:id="@+id/sepEventLayout01"/>
            <LinearLayout android:id="@+id/sepEventLayout02"/>
            <LinearLayout android:id="@+id/sepEventLayout03"/>
            <LinearLayout android:id="@+id/sepEventLayout04"/>
       </ScrollView>
       </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:42:19.580

您可以测量线性布局元素的高度，然后使用 ScrollView.scrollTo() 相应地定位滚动视图。

# android - 键盘 Android 在 SoftInputMethod=AdjustPan 的位置

> ID：10970194
> 
> 赞同：3
> 
> 时间：2012-06-10T16:08:28.347
> 
> 标签：android, keyboard, resize, focus, textview

我在我的一个应用程序上的键盘位置遇到了一些大麻烦：我需要将我的键盘设置为保持在特定的 TextView 下，而不是焦点所在的那个。

在图像中，这是我想要实现的示例。

![在此处输入图像描述](../Images/d9e70a41b5ee66b77ee28a380311d180.png)

我正在使用 WindowSoftInputMethod=AdjustPan。有没有办法设置键盘的位置（或目标）？提前致谢

# c# - 忽略通过 JsonPropertyAttribute 设置的字母的大小写

> ID：10970197
> 
> 赞同：1
> 
> 时间：2012-06-10T16:09:07.460
> 
> 标签：c#, windows-phone-7, json.net

我有一个具有三个简单属性的类：

```
public class NewCard {
    [JsonProperty( "name" )]
    public string Name { get; set; }

    [JsonProperty( "desc" )]
    public string Desc { get; set; }

    [JsonProperty( "idList" )]
    public string IdList { get; set; }
} 
```

我期待这样的结果：

```
{"name":"A name","desc":"","idList":"listId"} 
```

不幸的是，我得到的结果如下所示：

```
{"Name":"A name","Desc":"","IdList":"listId"} 
```

远程服务拒绝 json，所以我真的需要降低它们。JSON.NET 版本：使用 NuGET 下载的 4.5.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:33:33.627

当我序列化为时，我得到了你所期望的结果

```
var json = JsonConvert.SerializeObject(new NewCard() {Name="A Name",Desc="A Desc",IdList="ids" }); 
```

# jquery - 如何修改 html 表的克隆？

> ID：10970204
> 
> 赞同：1
> 
> 时间：2012-06-10T16:10:17.903
> 
> 标签：jquery

我正在尝试制作某种调查表。我设法动态增加 id 和 name，并且可以添加不同的答案类型。问题是当我想添加单选按钮时，它会添加 5 个。也与复选框相同。但是当尝试添加文本字段时，我希望它只添加 1，但由于我的隐藏表的结构，它添加了 5。

我可以解决这个问题吗？这是我的代码：

```
<html>
<head>
<title>clone table - 2.0</title>
<script type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
    });
    function cloneRadio() {
        var aydi = $('input#gizli').val();
        $table = $('table#table0').clone().attr('id', 'table' + aydi).attr(
                'name', 'table' + aydi).appendTo("#div1");
        $("input[type='radio']", $table).prop("name", "ans" + aydi);
        $("p", $table).prop("id", "questionTXT_" + aydi);
        aydi++;
        $('input#gizli').val(aydi);
    }
    function cloneCheck() {
        var aydi = $('input#gizli').val();
        $table = $('table#table0').clone().attr('id', 'table' + aydi).attr(
                'name', 'table' + aydi).appendTo("#div1");
        $("input[type='radio']", $table).prop("name", "ans" + aydi);
        $("input[type='radio']", $table).prop("type", "checkbox");
        $("p", $table).prop("id", "questionTXT_" + aydi);
        aydi++;
        $('input#gizli').val(aydi);
    }

    function cloneTextField() {
        var aydi = $('input#gizli').val();
        $table = $('table#table0').clone().attr('id', 'table' + aydi).attr(
                'name', 'table' + aydi).appendTo("#div1");
        $("input[type='radio']", $table).prop("name", "ans" + aydi); // to increase name property of radiobuttons
        $("input[type='radio']", $table).prop("type", "text"); // turns radiobuttons to checkboxes
        $("p", $table).prop("id", "questionTXT_" + aydi);
        aydi++;
        $('input#gizli').val(aydi);
    }
</script>
</head>
<body>
    <input type="hidden" id="gizli" name="gizli" value="1" />
    <br />
    <br />
    <!-- HIDDEN VARIABLE IS FOR INCREASING ID -->
    <div id="div0" style="display: none">
        <table border="1" id="table0" name="table0">
            <tr>
                <td colspan="5">
                    <p id="questionTXT_1">Question text will be here</p></td>
            </tr>
            <tr>
                <td><input type="radio" id="A" name="ans0" /> answer1 <br />
                </td>
                <td><input type="radio" id="B" name="ans0" /> answer2 <br />
                </td>
                <td><input type="radio" id="C" name="ans0" /> answer3 <br />
                </td>
                <td><input type="radio" id="D" name="ans0" /> answer4 <br />
                </td>
                <td><input type="radio" id="E" name="ans0" /> answer5 <br />
                </td>
            </tr>
        </table>
    </div>
    <div id="div1">
        <!-- CLONNED TABLES WILL BE HERE -->
    </div>
    <div>
        <input type="button" id="button1" name="clonner"
            value="Add Radiobutton" onClick="cloneRadio()" /> <input
            type="button" id="button1" name="clonner" value="Add Checkbox"
            onClick="cloneCheck()" /> <input type="button" id="button1"
            name="clonner" value="Add TextField" onClick="cloneTextField()" />
    </div>
</body>
</html> 
```

# android - Android：Android MapView 中的平面图问题

> ID：10970205
> 
> 赞同：3
> 
> 时间：2012-06-10T16:10:34.743
> 
> 标签：android, navigation, android-mapview

现在谷歌地图也有平面图（http://googlemobile.blogspot.de/2011/11/go-indoors-with-google-maps-60-for.html）。

他们是否已经得到了 Android MapView 的适当协助？

特别是可以：

1) 自动缩放到平面图缩放级别？

2）通过代码设置当前平面图级别

3) 用户手动更改平面图级别时的监听器

感谢您的每一次帮助

# macos - 如何修复语法错误：预期的行尾等，但在 applescript 中找到了脚本的结尾？

> ID：10970207
> 
> 赞同：1
> 
> 时间：2012-06-10T16:10:49.837
> 
> 标签：macos, syntax, applescript

我正在为 Minecraft 创建一个仅适用于 Mac 的 Mod 安装程序。它使用多个应用程序分别执行一项任务（每个都是一个 applescript 应用程序）。但是今天我开始制作一个可以做所有事情的应用程序。当我完成脚本并尝试编译时，它给了我语法错误：预期的行尾等，但找到了脚本的结尾。我想我一切都好，但我不知道是什么原因造成的。这是代码：

```
say "You are running iCraft version one point one for minecraft version 1.2.5"
display dialog "Which tool do you want to use?" buttons {"Mod Installer", "Backup", "Restore"} default button 3
set the button_pressed to the button returned of the result 
    if the button_pressed is "Mod Installer" then
        do shell script "~/desktop/iCraft/iCraft.app/contents/resources/scripts/installer.sh"
            display dialog "Insert all mod files into the Mods folder."
            display dialog "Have you inserted all Mod files into the Mods folder?" buttons {"Yes", "No"} default button 2
                    if the button_pressed is "Yes" then
                        do shell script "~/desktop/iCraft/iCraft.app/contents/resources/scripts/installer2.sh"
                                display dialog "Finished"
                        else
                            display dialog "Insert mod files into the Mods folder and restart iCraft.app."
                        end if
if the button_pressed is "Backup" then
    display dialog "Are you sure you want to backup your Minecraft.jar in it's current state?" buttons {"Yes", "No"} default button 2                       
            if the button_pressed is "Yes" then
                    do shell script "~/desktop/iCraft/iCraft.app/contents/resources/scripts/backup.sh"
                            display dialog "Finished, find it in your Backups directory in the iCraft folder"
            else
                display dialog "Backup aborted"             
            end if
else
    display dialog "Are you sure you want to restore your Minecraft.jar with your backup?" buttons {"Yes", "No"} default button 2
            if the button_pressed is "Yes" then
                do shell script "~/desktop/iCraft/iCraft.app/contents/resources/scripts/restore.sh"
                        display dialog "Restore finished"
            else
                display dialog "Restore aborted"            
end if
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:22:24.630

最后一个`end if`实际上是结束`if`缩进的，使外部`if`没有`end if`. 反之亦然，但是您想查看它。

换句话说，`end if`在最后一行之前添加另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T16:56:16.317

这将起作用：

```
say "You are running iCraft version one point one for minecraft version 1.2.5"
display dialog "Which tool do you want to use?" buttons {"Mod Installer", "Backup", "Restore"} default button 3
set the button_pressed to the button returned of the result
if the button_pressed is "Mod Installer" then
    do shell script "~/desktop/iCraft/iCraft.app/contents/resources/scripts/installer.sh"
    display dialog "Insert all mod files into the Mods folder."
    display dialog "Have you inserted all Mod files into the Mods folder?" buttons {"Yes", "No"} default button 2
    if the button_pressed is "Yes" then
        do shell script "~/desktop/iCraft/iCraft.app/contents/resources/scripts/installer2.sh"
        display dialog "Finished"
    else
        display dialog "Insert mod files into the Mods folder and restart iCraft.app."
    end if
    if the button_pressed is "Backup" then
        display dialog "Are you sure you want to backup your Minecraft.jar in it's current state?" buttons {"Yes", "No"} default button 2
        if the button_pressed is "Yes" then
            do shell script "~/desktop/iCraft/iCraft.app/contents/resources/scripts/backup.sh"
            display dialog "Finished, find it in your Backups directory in the iCraft folder"
        else
            display dialog "Backup aborted"
        end if
    else
        display dialog "Are you sure you want to restore your Minecraft.jar with your backup?" buttons {"Yes", "No"} default button 2
        if the button_pressed is "Yes" then
            do shell script "~/desktop/iCraft/iCraft.app/contents/resources/scripts/restore.sh"
            display dialog "Restore finished"
        else
            display dialog "Restore aborted"
        end if
    end if
end if 
```

# c++ - Visual Studio 不允许我使用 sqrt 或 floor，对重载函数的模糊调用

> ID：10970212
> 
> 赞同：6
> 
> 时间：2012-06-10T16:11:14.860
> 
> 标签：c++, sqrt

我有一个电话

```
long long a = sqrt(n/2); 
```

两者`a`and `n`are `long long`'s 但它不会让我编译，因为它说我的使用`sqrt()`是一个模棱两可的调用。我根本看不出它在这里怎么可能模棱两可。我该如何解决这个问题？我有同样的问题`floor()`。

我的包括

```
#include "stdafx.h"
#include <iostream>
#include <cmath>
using namespace std; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T16:14:18.297

和有几个重载，`sqrt()`根据重载解析规则，`floor()`调用没有“最佳匹配” 。`sqrt(long long)`只需将参数转换为适当的类型 - 即，

```
long long a = sqrt(static_cast<double>(n/2)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T16:15:13.073

```
//use 
sqrt(static_cast<double>(n/2));
//instead of 
sqrt(n/2); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T16:15:59.460

`sqrt`函数需要 a 、`float`a`double`或 a `long double`：

```
long long a = sqrt(n * 0.5); 
```

将 a 转换为 a可能会丢失一些*精度*，但值会非常接近。`long long``double`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T16:31:25.293

根据参考

[http://www.cplusplus.com/reference/clibrary/cmath/sqrt/](http://www.cplusplus.com/reference/clibrary/cmath/sqrt/)

我建议先转换为**long double**。**sqrt**的重载不接受整数值

积分参数总是会产生一个“真实”值（float、double、long double）

# javascript - 如何使用jquery动态绑定事件到元素

> ID：10970218
> 
> 赞同：-1
> 
> 时间：2012-06-10T16:13:23.883
> 
> 标签：javascript, jquery

如果这个元素是用 ajax 上传的，有人知道如何将事件处理程序绑定到元素吗？我有包含在页眉中的 js 文件。由 ajax 更新的页面正文。我已经尝试过`live()`和`bind()`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:15:42.100

你需要使用`on`..

```
$('body').on('click', 'a.ajaxadded', function() {

}); 
```

文档：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

# php - 如何包含/需要来自 c/c++ php 扩展的 php 文件，将变量传递给用户空间范围？

> ID：10970222
> 
> 赞同：3
> 
> 时间：2012-06-10T16:13:40.070
> 
> 标签：php, c

首先，我需要从 PHP_FUNCTION() 导入一个文件，并将 C 函数中的一些变量传递给导入的 php 文件到用户空间。

例子：

包含_a_file.c

```
PHP_FUNCTION(include_a_php_file)
{
  zval *var_to_userspace;
  char *str;
  str = "string send to userspace";
  ZVAL_STRING(var_to_userspace, str, 0);

  php_require_once("a_file.php"); // <-- how to?
} 
```

a_file.php

```
<?php
  print "<pre>";
  vardump($var_to_userspace);
  print "</pre>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:16:47.773

尝试调用`zend_compile_string()`：

```
zval nop;
ZVAL_STRINGL(&nop, "return ;", 8, 0);
zend_compile_string(&nop, "NOP" TSRMLS_CC); 
```

这将为您返回指向结构的指针`zend_op_array`，该结构将为您的代码保存 Zend 操作码。因此，您只需转储这些操作码一次，然后`zend_op_array`自己在程序中创建结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-24T12:32:07.273

PHP 7.x

```
zval nop;
ZVAL_STRINGL(&nop, "return ;", 8, 0);
zend_compile_string(&nop, "NOP"); 
```

# java - 用标签替换每个单词

> ID：10970225
> 
> 赞同：4
> 
> 时间：2012-06-10T16:13:44.653
> 
> 标签：java, javascript, android

**需要 JAVASCRIPT 或 JAVA 解决方案**

我正在寻找的解决方案可以使用 java 或 javascript。我有一个字符串中的 html 代码，所以我可以在使用 java 之前或之后使用 javascript 操作它。

***问题***

无论如何，我必须用标签包装每个单词。例如：

```
<html> ... >
Hello every one, cheers
< ... </html> 
```

应该改为

```
<html> ... >
<word>Hello</word> <word>every</word> <word>one</word>, <word>cheers</word>
< ... </html> 
```

* * *

**为什么？**

这将帮助我使用 javascript 选择/突出显示一个单词。似乎唯一的方法是使用我在**JAVASCRIPT 提示**中添加的函数 highlightElementAtPoint ：它只是找到某个 x,y 坐标的元素并突出显示它。我认为如果每个单词都是一个元素，那将是可行的。

我们的想法是使用这种方法来允许我们检测 android WebView 中突出显示的文本，即使这意味着使用扭曲的突出显示方法。多想一下，你会发现很多其他的应用程序。

* * *

**JAVASCRIPT 提示**

我正在使用以下代码突出显示一个单词；但是，这将突出显示属于某个标签的整个文本。当每个单词都是一个标签时，这将在某种程度上起作用。如果有一个替代品可以让我在某个位置突出显示一个*单词，那也是一个解决方案。*

```
function highlightElementAtPoint(xOrdinate, yOrdinate) {
    var theElement = document.elementFromPoint(xOrdinate, yOrdinate);
    selectedElement = theElement;
    theElement.style.backgroundColor = "yellow";
    var theName = theElement.nodeName;
    var theArray = document.getElementsByTagName(theName);
    var theIndex = -1;
    for (i = 0; i < theArray.length; i++) {
        if (theArray[i] == theElement) {
            theIndex = i;
        }
    }
    window.androidselection.selected(theElement.innerHTML);
    return theName + " " + theIndex;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T16:23:50.343

尝试使用类似的东西

```
String yourStringHere = yourStringHere.replace(" ", "</word> <word>" )
yourStringHere.replace("<html></word>", "<html>" );//remove first closing word-tag 
```

应该工作，也许你必须改变......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T16:25:53.863

```
var tags = document.body.innerText.match(/\w+/g);
for(var i=0;i<tags.length;i++){
    tags[i] = '<word>' + tags[i] + '</word>';
} 
```

或者正如@ThomasK 所说：

```
var tags = document.body.innerText;
tags = '<word>' + tags + '</word>';
tags = tags.replace(/\s/g,'</word><word>'); 
```

但是你必须记住：`.replace(" ",foo)`只替换一次空间。对于多个替换，您必须使用`.replace(/\s+/g,foo)`

而且正如@ajax333221所说，第二种方式会包含逗号、点等符号，所以更好的解决方案是第一种

JSFiddle 示例：http: [//jsfiddle.net/c6ftq/4/](http://jsfiddle.net/c6ftq/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T16:36:25.893

您可以尝试以下代码，

```
import java.util.StringTokenizer;

public class myTag 
{
    static String startWordTag = "<Word>";
    static String endWordTag = "</Word>";
    static String space = " ";

    static String myText = "Hello how are you ";

    public static void main ( String args[] )
    {
        StringTokenizer st = new StringTokenizer (myText," ");

        StringBuffer sb = new StringBuffer();

        while ( st.hasMoreTokens() )
        {
            sb.append(startWordTag); 
            sb.append(st.nextToken());
            sb.append(endWordTag);
            sb.append(space);
        }

        System.out.println ( "Result:" + sb.toString() );
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T16:31:22.583

```
inputStr = inputStr.replaceAll("(?<!</?)\\w++(?!\\s*>)","<word>$0</word>"); 
```

# php - PHP：相同的字符串没有匹配在一起，与（

> ID：10970226
> 
> 赞同：0
> 
> 时间：2012-06-10T16:13:44.603
> 
> 标签：php, string, match, bbcode

我一直致力于将 HTML 转换为 bbcode 的功能。我已经编写了我自己的 [spoiler] bbcode 标签，它可以正确翻译成 HTML 等价物。

但是，当我尝试将其转回 bbcode 时，它​​似乎与看似相同的字符串不匹配......

慢慢的一块一块地重建起来看看问题出在哪里，原来是我添加的时候才失败`onclick="showSpoiler(this)"`

到

```
#<div><input type="button" onclick="showSpoiler(this)"/><div>(.*)</div></div>#ig' 
```

我将其进一步缩小到 ( 括号。我试图像这样逃避它们 \(

从 [spoiler] 标签生成的 html 代码是：

`$1

它匹配的字符串是这个

```
'#<div><input type="button" onclick="showSpoiler(this)"/><div>(.*)</div></div>#ig' 
```

这是转换函数

```
<?php
//This function let convert BBcode to HTML
function bbcode_to_html($text)
{
    $text = nl2br(htmlentities($text, ENT_QUOTES, 'UTF-8'));
    $in = array(
            '#\[b\](.*)\[/b\]#Usi',
            '#\[i\](.*)\[/i\]#Usi',
            '#\[u\](.*)\[/u\]#Usi',
            '#\[s\](.*)\[/s\]#Usi',
            '#\[img\](.*)\[/img\]#Usi',
            '#\[url\]((ht|f)tps?\:\/\/(.*))\[/url\]#Usi',
            '#\[url=((ht|f)tps?\:\/\/(.*))\](.*)\[/url\]#Usi',
            '#\[left\](.*)\[/left\]#Usi',
            '#\[center\](.*)\[/center\]#Usi',
            '#\[right\](.*)\[/right\]#Usi',
            '#\[spoiler\](.*)\[/spoiler\]#Usi',
            '#\[fuck\](.*)\[/fuck\]#Usi'
        );
    $out = array(
            '<strong>$1</strong>',
            '<em>$1</em>',
            '<span style="text-decoration:underline;">$1</span>',
            '<span style="text-decoration:line-through;">$1</span>',
            '<img src="$1" alt="Image" />',
            '<a href="$1">$1</a>',
            '<a href="$1">$4</a>',
            '<div style="text-align:left;">$1</div>',
            '<div style="text-align:center;">$1</div>',
            '<div style="text-align:right;">$1</div>',
            '<div><input type="button" onclick="showSpoiler(this)" value="Show/Hide" /><div class="inner" style="display:none;">$1</div></div>',
            '<div><input type="button" onclick="showSpoiler(this)"/><div>$1</div></div>'
        );
    $count = count($in)-1;
    for($i=0;$i<=$count;$i++)
    {
        $text = preg_replace($in[$i],$out[$i],$text);
    }
    return $text;
}
//This function let convert HTML to BBcode
function html_to_bbcode($text)
{
    $text = str_replace('<br />','',$text);
    $in = array(
        '#<strong>(.*)</strong>#Usi',
        '#<em>(.*)</em>#Usi',
        '#<span style="text-decoration:underline;">(.*)</span>#Usi',
        '#<span style="text-decoration:line-through;">(.*)</span>#Usi',
        '#<img src="(.*)" alt="Image" />#Usi',
        '#<a href="(.*)">(.*)</a>#Usi',
        '#<div style="text-align:left;">(.*)</div>#Usi',
        '#<div style="text-align:center;">(.*)</div>#Usi',
        '#<div style="text-align:right;">(.*)</div>#Usi',
        '#<div><input type="button" onclick="showSpoiler(this)" value="Show/Hide" /><div class="inner" style="display:none;">(.*)</div></div>#Ui',
        '#<div><input type="button" onclick="showSpoiler(this)"/><div>(.*)</div></div>#ig'
    );
    $out = array(
        '[b]$1[/b]',
        '[i]$1[/i]',
        '[u]$1[/u]',
        '[s]$1[/s]',
        '[img]$1[/img]',
        '[url=$1]$2[/url]',
        '[left]$1[/left]',
        '[center]$1[/center]',
        '[right]$1[/right]',
        '[spoiler]$1[/spoiler]',
        '[fuck]$1[/fuck]'
    );
    $count = count($in)-1;
    for($i=0;$i<=$count;$i++)
    {
        $text = preg_replace($in[$i],$out[$i],$text);
    }
    return $text;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:01:33.453

在您的正则表达式中，您需要像这样转义大括号：

```
showSpoiler\(this\) 
```

注意正则表达式，它们是一种独立的语言，很难调试，除非您添加更多进行调试的函数（例如，匹配的内容、输出的内容等）。

顺便说一句，您可以通过将数组直接传递给函数来运行多个搜索和替换操作。你不需要遍历它们。

因此，最好再次阅读手册页`preg_replace`并期待如何更轻松地调试模式。例如，在将它们放入函数和类似功能之前对其进行测试。

# android - 安卓报警管理器

> ID：10970229
> 
> 赞同：1
> 
> 时间：2012-06-10T16:14:09.197
> 
> 标签：android, notifications, alarmmanager, android-pendingintent

在下面的代码中，它正在做我目前想要做的主要事情： - 每小时同时重复

有人可以验证我是否或需要做什么来确保以下项目？

(1) 警报最终将基于一个月中的天数。只要他们唤醒手机时它会熄灭（以节省电池）。它不是特定于小时或分钟的。只有一天。如何做到这一点？

（2）如果Activity被销毁或者手机重启，不知道我的AlarmManager是否保持清醒？

(3) 最后，每次应用程序启动时都会重复此代码（从而覆盖任何现有的 AlarmManager；这是一种正确的做事方式，还是我应该检查是否存在警报？

```
 for (int i : AlarmDays) {

        if (String.valueOf(i) == null ) {
            continue;
        }

        Calendar cal = Calendar.getInstance();
        if (cal.get(Calendar.MINUTE) >= i)
            cal.add(Calendar.HOUR, 1);
        cal.set(Calendar.MINUTE, i);

        Intent intent = new Intent(this, TimeAlarm.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(this, i,
                intent, PendingIntent.FLAG_CANCEL_CURRENT);
        am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                60 * 60 * 1000, pendingIntent);
    }

//  TimeAlarm.class
public void onReceive(Context context, Intent intent) {

    String DebtName = null;

    nm = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    CharSequence from = "Payment Due";
    CharSequence message = "Open App and Update your Balance";
    Intent notificationIntent = new Intent(context, ManageDebts.class);
    notificationIntent.getExtras();
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
            notificationIntent, 0);
    Notification notif = new Notification(R.drawable.icon, "Pay "
            + DebtName + " today!", System.currentTimeMillis());
    notif.setLatestEventInfo(context, from, message, contentIntent);
    notif.defaults = Notification.DEFAULT_SOUND
            | Notification.DEFAULT_LIGHTS;
    nm.notify(1, notif);
} 
```

在我的清单中的应用程序标签中：

编辑：

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
 <Application>        
  <receiver
        android:name=".TimeAlarm"
        android:enabled="true"
        android:exported="true" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
 </Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:17:36.740

AlarmManager*不会*在重新启动的手机中持续存在。但是，它*会*在被 Android 调度程序杀死的应用程序中持续存在。因此，您基本上需要：

*   将您的日程安排存储在某个地方，并提出一个日程安排算法来决定您下次想要`AlarmManager`触发的时间。
*   每次收到警报时，安排一个新警报。
*   `AlarmManager`通过捕捉`BOOT_COMPLETED`广播启动开机启动。

# android - 无法解析日期....在android中

> ID：10970231
> 
> 赞同：1
> 
> 时间：2012-06-10T16:14:24.647
> 
> 标签：android, parsing, datetime

这是代码

```
 public static final String KEY_DATE_TIME = "reminder_date_time";
    SimpleDateFormat datetimeFormat = new SimpleDateFormat(DATE_TIME_FORMAT) ;

    try {
    String dateString = reminder.getString(reminder.getColumnIndexOrThrow(ReminderDbAdapter.KEY_DATE_TIME));

    Date date =  (Date) datetimeFormat.parse(reminder.getString(dateString);

    mCalendar.setTime(date); 
    } catch (java.text.ParseException e) {
        Log.e("edit_activity", e.getMessage(), e);
    } 
```

它没有解析日期，因为所有值都已获取，但日期未解析，因此 logcat 显示错误...帮帮我

# php - CakePHP 中的 requestAction 性能

> ID：10970232
> 
> 赞同：2
> 
> 时间：2012-06-10T16:14:45.927
> 
> 标签：php, cakephp, cakephp-2.0

在 CakePHP 的每个文档中都写到 requestAction 会降低 CakePHP 的性能。始终建议使用控制器操作并使用视图文件获取结果。但有时我真的需要requestAction。

[CakePHP 书](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3arequestAction)：

> 如果在没有缓存 requestAction 的情况下使用会导致性能不佳。它很少适合在控制器或模型中使用。

哪些进程使 reuqestAction 降低性能。

应该怎么做，以防止 requestAction 的性能损失？添加这样的东西？

`$this->autoRender = false`
到控制器动作，

```
function beforeFilter() {
  if ( $this->params['action'] == "myaction" ) { return; }
} 
```

到控制器类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:39:19.580

基本上 requestAction() 会通过额外的页面请求来触发您的操作。此外，requestAction() 对 url 的处理方式不同，因为它会返回字符串以外的数据。所以在控制器你需要先检查返回请求的类型。

这是一篇关于[requestAction()的好文章](http://mark-story.com/posts/view/reducing-requestaction-use-in-your-cakephp-sites-with-fat-models)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:44:03.950

你可以先[**看看它是怎么写的**](https://github.com/cakephp/cakephp/blob/2.2/lib/Cake/Core/Object.php#L66)。

当我读到它时，它每次都会重新解析 URL（in [`Router::normalize()`](https://github.com/cakephp/cakephp/blob/2.2/lib/Cake/Routing/Router.php#L1022)），创建新`CakeRequest`实例（[总是加载 configuration](https://github.com/cakephp/cakephp/blob/2.2/lib/Cake/Network/CakeRequest.php#L261)），然后尝试[`Dispatcher::dispatch()`](https://github.com/cakephp/cakephp/blob/2.2/lib/Cake/Routing/Dispatcher.php#L139).

PS ..这是一个巨大的混乱，我什至没有看到缓存在哪一点被使用..如果有的话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-26T17:33:32.180

（经过 1.5 年的 CakePHP 经验）我可以说，如果有 requestAction，就存在重构需求。在最初的几个月里，我添加了太多的 requestActions。在获得 requestAction 降低性能的信息后，我不再添加。

几个月过去了，我几乎从我的代码中删除了所有 requestAction。在一个大代码库中，我们只有 3-4 个 requestAction，而且它们每天只被点击一次。如果你使用 requestAction，你会丢失从控制器层到视图层的有价值的信息。请重新考虑用法。

# ios - 在 sqlite 行中选择单词

> ID：10970234
> 
> 赞同：3
> 
> 时间：2012-06-10T16:15:04.310
> 
> 标签：ios, xcode, sqlite

如何读取 SQLite 数据库中的一行，如下所示：

```
汽车是（绿色/灰色*/红色）

```

在 iOS 应用程序中的结果：

```
汽车是绿色的
          灰色的
          红色的

```

如果您选择正确的单词，该句子将被跳过，取而代之的是下一个。

先感谢您。

# c - C 编程语言，弗洛伊德算法

> ID：10970235
> 
> 赞同：0
> 
> 时间：2012-06-10T16:15:07.793
> 
> 标签：c, floyd-warshall

我正在尝试实现弗洛伊德算法。我认为我的代码有问题，我无法弄清楚。输出是不同的，它们只是缺少一些小东西。在我下面的代码中，我还包含了一个输入、输出和原始输出。我会很感激任何一点帮助。

```
#include<stdio.h>
#define maxVertices   12
#define INF 55
int min(int a,int b){
    return (a<b)?a:b;
}
void init(int distance[maxVertices][maxVertices]){
    int iter,jter;
    for(iter=0;iter<maxVertices;iter++){
            for(jter=0;jter<maxVertices;jter++){
                    if(iter==jter){
                            distance[iter][jter] = 0;
                    }
                    else{
                            distance[iter][jter] = INF;
                    }
            }
    }}
void FloydWarshall(int distance[maxVertices][maxVertices],int vertices){ 
 int k,i,j;
          for(k=0;k<vertices;k++){
            for(i=0;i<vertices;i++){
                    for(j=0;j<vertices;j++){
                       if(distance[i][j] > distance[i][k] + distance[k][j])
            distance[i][j] = distance[i][k] + distance[k][j];
                     }
             }
     }
 }

int main(){
int i,j;    
    int graph[maxVertices][maxVertices];
    int distance[maxVertices][maxVertices];
    int vertices,edges,iter,jter;
    /* vertices represent number of vertices  in the graph. */
         scanf("%d",&vertices);
    /*initialize distance between all pairs as infinity*/
        init(distance);
    int vertex1,vertex2,weight;
    /* Here graph[i][j] represent the weight of edge joining i and j */
    for(iter=0;iter<11;iter++)
    {
            scanf("%d%d%d", &vertex1, &vertex2, &weight);
            graph[vertex1][vertex2] = weight;
            distance[vertex1][vertex2] = weight;
    }
     FloydWarshall(distance,vertices);  
    return 0;}
  /*
 8                       MY INPUT
 1 2 6
 2 1 6
1 6 10
2 6 3
3 2 8
4 5 9
5 4 9
5 7 7
6 1 10
6 2 3
7 5 7 
```

* * *

```
 0  1  2  3  4  5  6  7    MY OUTPUT
0-0 55 55 55 55 55 55 55    
1-55 0 6 55 55 55  9  55 
2-55 6 0 55 55 55  3  55 
3-55 14 8 0 55 55 11 55 
4-55 55 55 55 0 9 55 16         
5-55 55 55 55 9 0 55 7 
6-55 9 3 55 55 55 0 55 
7-55 55 55 55 16 7 55 0 

************************
   0 1  2  3  4  5  6  7      THE ORIGINAL OUTPUT
 0-0 55 55 55 55 55 55 55 
 1-55 0 6 14 55 55 9 55 
 2-55 6 0  8 55 55 3 55 
 3-55 14 8 0 55 55 11 55    
 4-55 55 55 55 0 9 55 16 
 5-55 55 55 55 9 0 55 7 
 6-55 9 3 11 55 55 0 55 
 7-55 55 55 55 16 7 55 0 
```

*/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:47:08.717

我认为您`2 3 8`的输入数据中缺少。或者，您可以通过添加来强制权重对称

```
distance[vertex2][vertex1] = weight; 
```

后

```
distance[vertex1][vertex2] = weight; 
```

# cocoa - 本地通知显示没有 didFinishLaunchingWithOptions：

> ID：10970239
> 
> 赞同：0
> 
> 时间：2012-06-10T16:15:33.730
> 
> 标签：cocoa

我对显示本地通知有一个很好的理解问题。就我在其他线程中阅读的内容而言，首先要使用应用程序创建和安排本地通知。

为了显示该通知，必须使用代表 didFinishLaunchingWithOptions:（如果应用程序处于后台操作）和 didReceiveLocalNotification:（如果应用程序处于前台）。

现在即使我没有更改 didFinishLaunchingWithOptions: 方法，当我的应用程序在后台时，通知已经被查看。

如果 didFinishLaunchingWithOptions: 至少在我指定它时会被使用，那将不是什么大问题。但事实并非如此。

所以我的问题是，即使我没有使用 didFinishLaunchingWithOptions: 方法，通知也会显示出来。当用户点击通知时，应用程序会进入前台并触发 didReceiveLocalNotification: 方法并再次显示通知。

我最初想做的是在执行 didFinishLaunchingWithOptions: 时取消AllLocalNotifications：，但由于它没有被执行，所以我有点卡在这里。

好的，applicationWillEnterForeground: 可能有一个解决方法：但老实说，我想了解为什么即使没有在 didFinishLaunchingWithOptions: 中指定通知也会显示。

你所有的帮助真的很感激！！谢谢！！

```
//
//  myNotificationsClass.m
//

#import "myNotificationsClass.h"

@implementation myNotificationsClass

//Sets up a Local Notification with Message, TimeFromNow, BadgeNumber and UserInfo

//no Class Instance for calling this method needed!!

+ (void)setupLocalNotificationsWithMessage: (NSString *) message andTimeFromNow: (NSTimeInterval) seconds andAlertAction: (NSString *) alertAction andBadgeNumber: (NSInteger) badgeNumber andUserInfo: (NSDictionary *) infoDict {

//[[UIApplication sharedApplication] cancelAllLocalNotifications];

UILocalNotification *localNotification = [[UILocalNotification alloc] init];

// create date/time information
localNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:seconds];
localNotification.timeZone = [NSTimeZone defaultTimeZone];

//setup Appearence and Message
localNotification.alertBody = message; //@"Time to get up!";
localNotification.alertAction = alertAction;
localNotification.soundName = UILocalNotificationDefaultSoundName;
localNotification.applicationIconBadgeNumber = badgeNumber;

localNotification.userInfo = infoDict;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
}

@end

//overwrites the viewWillAppear: Method from the primary Class to display a Test Notification

@implementation UIViewController (localNotification)
- (void)viewWillAppear:(BOOL)animated {

    [myNotificationsClass setupLocalNotificationsWithMessage:@"First Test after 2 Seconds" andTimeFromNow:2 andAlertAction:@"GoTo iSnah" andBadgeNumber:7 andUserInfo:nil];

}
@end

//receive Local Notifications even if the App is in Foreground
//overwrites the primery method
@implementation UIResponder (localNotificationForeground)

- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:[[[NSBundle mainBundle] infoDictionary]   objectForKey:@"CFBundleName"]
                                                        message:notification.alertBody
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];

        [alertView show];

    //reset Badge
    application.applicationIconBadgeNumber = 0;

}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    

    //Because I don't want the Notification to be displayed twice 
    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    UILocalNotification *notification = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];

    if (notification) {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:[[[NSBundle mainBundle] infoDictionary]   objectForKey:@"CFBundleName"]
                                                            message:notification.alertBody
                                                            delegate:nil
                                                    cancelButtonTitle:@"OK"
                                                    otherButtonTitles:nil];

        [alertView show];

        //reset Badge
        application.applicationIconBadgeNumber = 0;

    }

    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:28:13.773

你很亲密。如果应用程序在后台运行，响应通知的用户不会导致应用程序“启动”。“启动”意味着应用程序根本没有运行（前台或后台）。因此，仅将您想要在应用程序启动或由于用户响应您的本地通知而启动时执行的代码放在那里。

因此，您的 didReceiveLocalNotification 方法需要检查应用程序状态，以查看当用户响应本地通知时它是在前台还是在后台。

您可能会执行以下操作来区分前景和背景之间的逻辑：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:    (UILocalNotification *)notification
if ( application.applicationState == UIApplicationStateActive ){
    NSLog(@"Was already in the foreground");
}
else{
    NSLog(@"Was in the background");
} 
```

}

然而，次要的一点。文档指出在 application:didFinishLaunchingWithOptions: 之后调用了 didReceiveLocalNotification 方法：（如果实现了该方法）。因此，如果您实现了这两种方法，则需要确保这两种方法的组合在“启动”情况下正常工作。

# drupal-7 - 即使用户无权访问该字段，Drupal 7 视图暴露过滤器也会显示

> ID：10970246
> 
> 赞同：0
> 
> 时间：2012-06-10T16:16:38.423
> 
> 标签：drupal-7, views

我有一个以表格格式显示用户配置文件字段的视图。有一个“国家”字段，匿名用户无法访问。以匿名用户身份查看时，视图不显示该字段，这是正确的。但是，我也暴露了相同的字段，以便用户可以按“国家”过滤。公开的过滤器显示给匿名用户，并且匿名用户实际上可以按字段过滤，即使他没有看到字段值。我错过了什么还是正常行为？有没有办法强制对匿名用户隐藏过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T17:43:23.703

如果您想在不进行任何自定义编码的情况下实现此目的，您可以尝试将过滤器显示为一个块，并将该块的权限设置为仅显示给经过身份验证的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:35:48.520

这实际上是一个已知问题，详细信息请参见[http://drupal.org/node/1352654](http://drupal.org/node/1352654)。根据该问题的最后一条评论，这“无法解决”。这很奇怪，当然也不是我喜欢的。希望在未来的版本中会有一些解决方案。

# mysql - 涉及时间戳的复杂查询

> ID：10970250
> 
> 赞同：1
> 
> 时间：2012-06-10T16:17:07.830
> 
> 标签：mysql, sql, sqlite

我在处理涉及下表的复杂查询时遇到了一些问题。假设时间使用内置的 sqlite 时间戳数据类型。

我正在尝试退回在第一次购买后 4 小时内第二次购买的客户，如果是在 2 小时内，则必须来自不同的商店。

我在思考如何参考特定行来比较第一次购买和第二次购买时遇到了麻烦。

购买

```
purchase_id | customer_id | store_id | purchase_time
     1             1            1      2009-01-27 10:00:00.0
     2             1            2      2009-01-27 10:30:00.0
     3             2            1      2009-01-27 10:00:00.0
     4             2            1      2009-01-27 10:30:00.0
     5             3            1      2009-01-27 10:00:00.0
     6             3            2      2009-01-27 16:00:00.0
     7             4            3      2009-01-27 10:00:00.0
     8             4            3      2009-01-27 13:00:00.0 
```

商店

```
store_id | misc columns...
    1
    2
    3 
```

顾客

```
customer_id | f_name
     1         name1
     2         name2
     3         name3
     4         name4 
```

`name1, name4`在这种情况下，正确的回报将是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:46:31.000

您将要加入购买表本身，然后选择两个标准之一。

这里唯一真正的技巧是将不同的时间标准制定为：

1.  在不同商店购买的时间少于 2 小时。
2.  在 2 到 4 小时之间进行的购买，独立于`store_id`.

这两者显然适用于相同的`customer_id`.

所以，我们有：

```
select p1.purchase_id purchase_1, 
       p2.purchase_id purchase_2,
       c.name,
       p1.customer_id customer
from purchases p1
join purchases p2 on
p1.customer_id = p2.customer_id
join customer c on c.customer_id = p1.customer_id
where p1.purchase_time < p2.purchase_time
 and (
        (
        addtime(p1.purchase_time,'2:00:00') >= p2.purchase_time
        and p1.store_id <> p2.store_id
        )
      or
        (
        addtime(p1.purchase_time,'2:00:00') < p2.purchase_time
        and addtime(p1.purchase_time,'4:00:00') >= p2.purchase_time
        )
     ) 
```

它通过 customer_id 将购买连接到自身，首先检查您是否将早期购买与以后购买进行比较，然后在`OR`编辑的标准中应用两个不同的标准。

我发现最容易进行时间比较`addtime()`，然后比较结果。其他人可能更喜欢其他方式。

SQL 小提琴在这里： [http ://sqlfiddle.com/#!2/14dda/2](http://sqlfiddle.com/#!2/14dda/2)

结果：

```
PURCHASE_1  PURCHASE_2        NAME        CUSTOMER
1           2                 name1       1
7           8                 name4       4 
```

--

编辑：也许，您可以通过将`p1.purchase_time < p2.purchase_time`up 移入`join`子句来提高效率。尽管针对少量数据的执行计划是相同的，但对于大量数据，这可能会更快。您希望优化器`p1.purchase_time > p2.purchase_time`在进行更昂贵的比较之前消除所有这些情况。但这有点超出了编写此查询的方法的基本问题。

# ruby - 获取所有推文

> ID：10970253
> 
> 赞同：1
> 
> 时间：2012-06-10T16:18:11.040
> 
> 标签：ruby, twitter

有没有办法使用 Twitter Gem 获取某个特定用户的所有推文（或至少 3000 条推文）？

```
Twitter.user_timeline("BarackObama") 
```

没有像预期的那样返回尽可能多的推文......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T16:26:40.127

默认情况下，仅通过单个请求`user_timeline`返回最新（最多）200 条推文[1 。](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline "推特开发 API")您可以使用多个请求（获取每个请求的最后一条推文的 ID 并使用`max_id`参数来请求较旧的推文），但您需要阅读速率限制以确保您不会因过多请求而被阻止。我希望您的应用程序需要某种形式的缓存解决方案来防止这种情况发生。

# java - 在 java 1.5 中：实现的 java.lang.Runnable 接口的 run() 方法是否可以具有 void 以外的返回类型？

> ID：10970254
> 
> 赞同：0
> 
> 时间：2012-06-10T16:18:19.947
> 
> 标签：java, multithreading

我今天出现了面试。面试官让我用java 1.5写一个线程。你可以扩展java.lang.thread类或者实现java.lang.Runnable接口。实现的 run() 方法是否有可能具有除 void 之外的返回类型。Runnable 接口中的方法签名是

```
public void run(); 
```

我的回答是“由于上述签名定义，您不能从 run() 方法返回 int 或字符串。”

面试官说在java 1.5中你可以从run方法返回int或string。

大家能告诉我怎么做吗？

我在下面试过它给出了编译错误：

```
public class SampleInterview implements Runnable {
    @Override
    public int run() {
        System.out.println("Start : inside run of SampleInterview");
        System.out.println("End : inside run of SampleInterview");
    }
} 
```

我搜索了谷歌也找不到任何这样的方式。有没有可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T16:20:21.820

这是不可能的; 要么你误解了面试官，要么他们错了。（您*可能*只是“将返回值写入某个共享变量”，但这似乎不符合要求。）

但是，该`Callable`接口允许您返回一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:22:29.127

我认为面试官指的是`Callable`Java 1.5 中引入的接口：

[https://blogs.oracle.com/CoreJavaTechTips/entry/get_netbeans_6](https://blogs.oracle.com/CoreJavaTechTips/entry/get_netbeans_6)

这意味着他的问题不准确，因为他在谈论 Runnable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T16:22:54.727

请看这个[Runnable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runnable.html)

run 方法只有 void 返回类型，这是从 1.4.2 规范开始的。

所以，你的答案是正确的，可能是你的面试官试图扭曲你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T16:24:24.783

不可能，你是对的......

`run() method will never return anything`.

那是线程的问题，

```
cannot have a return type, and cant throw an exception. 
```

尽管 java 7 已经在它的

```
java.util.Concurrent package 
```

# php - 我如何将 PHP 中的 POS 系统集成到触摸屏显示器？

> ID：10970257
> 
> 赞同：-1
> 
> 时间：2012-06-10T16:18:40.820
> 
> 标签：php, point-of-sale

我想使用生成资产负债表和损益表的库存系统创建一个销售点系统。

*   如何将我的系统集成到触摸屏显示器？

*   在我启动系统之前我需要一个触摸屏显示器还是在我创建系统之后就可以了？

*   我将如何使用 PHP 在热敏打印机中打印？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T16:26:59.063

触摸屏显示器将取代对鼠标和键盘的需求，这反过来意味着你不需要做任何事情来让它工作，除了不要在你的标记中使用悬停的东西，因为大多数用户会点击代替将手指移到链接上。

为了在热敏打印机上打印，您需要某种形式的组件，我建议您查看一些 ActiveX 组件，如 rawdataprinter 或免费的开源 Java Applet，如 jZebra（可在此处找到[http://code.google.com/ p/jzebra/](http://code.google.com/p/jzebra/) ) 这将帮助您将原始数据发送到热敏打印机。除此之外，如果您还不知道打印机语言，则需要学习它。对于 Zebra，您需要查看 ZPL/ZPL II、Intermec IPL 或 Direct Protocol 等。

我一直在使用网络热敏打印进行大量工作，这有点麻烦，但如果你让它工作，它通常是 POS、TA、TMS、WMS 和类似解决方案的有用工具。

祝你好运。:)

# sql - 加入翻译表，在 SQLite 中保留订单索引

> ID：10970258
> 
> 赞同：0
> 
> 时间：2012-06-10T16:19:24.460
> 
> 标签：sql, sqlite

我使用这个 SQL 来获取一些索引：

```
select follow 
from unigram 
where alternativeSpelling like 'test' 
order by freq desc 
limit 10; 
```

然后，我使用此 SQL 将它们一一转换为单词：

```
select word 
from wordIdxTranslate 
where word_idx = <one of the indexes from above> 
```

如何将这些组合到一个查询中，同时保留第一个查询（“freq”）的排名顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T16:32:28.703

未经测试，但应该这样做：

```
SELECT word 
FROM unigram, wordIdxTranslate
WHERE 
    unigram.follow=wordIdxTranslate.word_idx
    AND
    unigram.follow IN (SELECT T1.follow 
                       FROM unigram AS T1 
                       WHERE T1.alternativeSpelling LIKE 'test' 
                       ORDER BY T1.freq DESC 
                       LIMIT 10)
ORDER BY freq DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:28:32.757

一种选择是将查询与 a 结合起来`join`，例如：

```
select  word 
from    (
        select  follow 
        ,       freq
        from    unigram 
        where   alternativeSpelling like 'test' 
        order by 
                freq desc 
        limit 10
        ) uni
join    wordIdxTranslate  wit
on      wit.word_idx = uni.follow
order by
        uni.freq desc 
```

# java - 如何在Java中存储来自未知大小的文件输入的多个变量？

> ID：10970265
> 
> 赞同：0
> 
> 时间：2012-06-10T16:21:29.033
> 
> 标签：java, variables, loops, file-io

我是第一个 Java 编程任务的初学者。对于我们的编程作业，我们将获得一个学生的 .txt 文件，如下所示：

我的问题是：我有一个特定的类，用于将文件中的数据转换为变量，以用于将其打印到屏幕上的不同类。但是，我不知道从输入文件中获取课程编号的变量的好方法，因为该编号不是预先确定的。我能想到的迭代未知数量的唯一方法是使用循环，但这只会覆盖我的变量。另外，老师要求我们不要使用任何 JCL 课程（我真的不知道这是什么意思。）

抱歉，如果我解释得不好，但我想不出更好的方法来概念化它。让我知道我是否可以澄清。

编辑：

```
public static void analyzeData()
{
    Scanner inputStream = null;

    try
    {
        inputStream = new Scanner(new FileInputStream("Programming Assignment 1 Data.txt"));
    }

    catch (FileNotFoundException e)
    {
        System.out.println("File Programming Assignment 1 Data.txt could not be found or opened.");
        System.exit(0);        
    }

    int numberOfStudents = inputStream.nextInt();
    int tuitionPerHour = inputStream.nextInt();
    String firstName = inputStream.next();
    String lastname = inputStream.next();
    String isTuitionPaid = inputStream.next();
    int numberOfCourses = inputStream.nextInt();
    String courseName = inputStream.next();
    String courseNumber = inputStream.next();
    int creditHours = inputStream.nextInt();
    String grade = inputStream.next(); 
```

为了展示我现在使用的方法，我只是使用 Scanner 从文件中读取数据，对于 Scanner inputStream，我使用 nextInt() 或 next() 从文件中获取变量。显然，当我不知道每个学生将有多少个班级时，这将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:42:16.723

1.  创建一个`Class called Student`

2.  在类里面使用`instance variable`like

    字符串名；

    字符串姓氏；

    Boolean isTuitionPaid; // 布尔值导致 isPaid 为真或假

    字符串[] 课程；

    int creditHours;

    弦乐等级；

3.  创建此类的构造函数，该构造函数在其参数中采用以下参数

    Student(String fName,String lName,Boolean isPaid,String[] course,int cHours,String gr)

4.  `When you read the data of a student from a file, store it in the appropriate data type`，如构造函数中所述，然后创建Student类型的Object

5.  创建`Student object with the data, store it an appropriate Collection`. 数组列表、地图等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:24:25.757

解析文件，创建一个 POJO（我们称之为模型）并将其存储在适当的集合中（可能 List 的实现会这样做）。顺便说一句，没有人会解决家庭作业，我相信这是这里的政策。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-10T17:40:04.220

也许这会有所帮助：

```
public static void analyzeData()
{
    try
    {
        Scanner inputStream = new Scanner(new FileInputStream("Programming Assignment 1 Data.txt"));
        String str = inputStream.next();
        String[] s = str.split(" ");
        int numberOfStudents = Integer.parseInt(s[0]);
        int tuitionPerHour = Integer.parseInt(s[1]);
        System.out.println("Number of students: " + numberOfStudents);
        System.out.println("Tuition per hour: " + tuitionPerHour + "\n\n");
        for(int i = 0; i<numberOfStudents; i++)
        {
            String str1 = inputStream.next();
            String[] s1 = str1.split(" ");
            String firstName = s1[0];
            String lastName = s1[1];
            int rollNo = Integer.parseInt(s1[2]);
            String isTuitionPaid = s1[3];
            int numberOfCourses = Integer.parseInt(s1[4]);
            System.out.println("Details of student number " + (i+1));
            System.out.println("Name: " + firstName + " " + lastName);
            System.out.println("Roll No: " + rollNo);
            System.out.println("Is Tuition paid: " + (isTuitionPaid == "Y" ? "Yes" : "No"));
            System.out.println("Number of Courses taken: " + numberOfcourses + "\n");
            for(int j = 0; j<numberOfCourses; j++)
            {
                System.out.println("Details of course no " + (j+1));
                String str2 = inputStream.next();
                String[] s2 = str2.split(" ");
                String courseName = s2[0];
                String courseNumber = s2[1];
                int creditHours = Integer.parseInt(s2[2]);
                String grade = s2[3];
                System.out.println("Course Name: " + courseName);
                System.out.println("Course Number: " + courseNumber);
                System.out.println("Credit Hours: " + creditHours);
                System.out.println("Grade: " + grade + "\n");
            }
        }
    }

    catch (FileNotFoundException e)
    {
        System.out.println("File Programming Assignment 1 Data.txt could not be found or opened.");
        e.printStackTrace();
        System.exit(0);        
    }
    catch(IOException ioe)
    {
        System.out.err("IOException has occurred");
        ioe.printStackTrace();
        System.exit(0);
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
} 
```

# internationalization - MvcSiteMapProvider、DynamicNodeProviderBase 和全球化

> ID：10970267
> 
> 赞同：0
> 
> 时间：2012-06-10T16:21:30.517
> 
> 标签：internationalization, asp.net-mvc-4, globalization, mvcsitemapprovider

**我有以下课程**

```
public class MenuVeiculo
{
    public string Nome { get; set; }
    public string NomeEn { get; set; }
    public Guid ID { get; set; }
} 
```

如您所见，我有两个属性，“Nome”和“NomeEn”。每一个代表名字和英文名字。

**mvc.sitemap**

```
<mvcSiteMapNode key="MenuVeiculo" dynamicNodeProvider="Semep.Extensibilidade.SiteMap.MenuVeiculoDynamicNodeProvider, Semep" title="Menu veiculo" action="Index" controller="Rental"> 
```

**MenuVeiculoDynamicNodeProvider.cs**

```
public class MenuVeiculoDynamicNodeProvider : DynamicNodeProviderBase
{
    public override IEnumerable<DynamicNode> GetDynamicNodeCollection()
    {
        var context = DependencyResolver.Current.GetService<SemepContext>();
        var listDB = (from p in context.MenusVeiculo
                        select new
                                    {
                                        p.Nome,
                                        p.ID
                                    });

        const string keyFormat = "MenuVeiculo_{0}";
        foreach (var menu in listDB.ToList())
        {
            var key = string.Format(keyFormat, menu.ID.ToString().ToUpper());
            var root = new DynamicNode(key, menu.Nome)
                            {
                                Title = menu.Nome
                                ,
                                Key = key
                            };
            root.Attributes.Add("id", menu.ID.ToString());
            root.RouteValues.Add("id", menu.ID);
            yield return root;
        }
    }

    #endregion
} 
```

**问题**

我的问题是，如何使用多语言和 DynamicNodeProviderBase？如您所见，有两个字段，我只显示一个。“Thread.CurrentThread.CurrentCulture”的一个问题是MvcSiteMapProvider缓存了结果，如何处理：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:17:12.960

是的，这是 MvcSiteMapProvider 的缺点之一。在一个项目中，我通过返回所有节点（每个本地化一个节点）并使用自定义 VisibilityProvider 仅显示正确的本地化来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-13T15:14:50.957

您需要使用 lang 参数创建一个额外的 Route：

```
 routes.MapRoute(
        name: "Default_lang",
        url: "{lang}/{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
        constraints: new { lang = @"^(en|ru)$" },
        namespaces: new[] { "PNSoft.WebSite.Controllers" }
    ); 
```

然后，在您的 mvc.sitemap 中，您为根节点和子节点指定 lang="..." 参数，您需要设置 inheritRouteParameters="lang" ，然后您可以从节点 RouteValues 属性中获取 lang ：

```
 public override IEnumerable<MvcSiteMapProvider.DynamicNode> GetDynamicNodeCollection(MvcSiteMapProvider.ISiteMapNode node)
        {
            var lang = (string)node.RouteValues["lang"];
...
        } 
```

就这样！

# expression-web - 是否可以使用表达式 web 创建一个网站以部署在非 asp.net 主机上？

> ID：10970268
> 
> 赞同：0
> 
> 时间：2012-06-10T16:21:51.130
> 
> 标签：expression-web

我想用表达式 web 创建一个非常简单的网站，但我希望能够将它部署在非 asp.net 服务器上。这是可能的还是我必须使用 asp.net 主机？

这些页面只显示图像和文本。我不需要对服务器做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:30:20.857

如果您在 Expression Web 中开发一个不使用 ASP.NET 的站点，您可以将其发布到非 .NET 网络服务器上。Expression Web 可用于 PHP、ASP、ASP.NET 或纯 HTML，服务器要求将相应。

# android - Android SharedPreferences 删除第一个条目，无论密钥

> ID：10970269
> 
> 赞同：1
> 
> 时间：2012-06-10T16:21:59.767
> 
> 标签：android, sharedpreferences

我需要在我的 Android 应用程序中删除 SharedPreferences 的第一个条目

我知道我可以使用`remove("key")`，但在这种情况下我不知道密钥，需要它是动态的

原因是我正在存储具有 10 值容量的数组。当 SharedPreferences 包含 10 个实例时，它会删除第一个并添加新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:30:40.513

我会将您的首选项存储为 json 列表或简单的逗号分隔列表的单个条目。因此，它更容易使用。

对于 JSON，您可以使用 gson 库（android 3.0+ 的一部分）或从以下网址下载：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

# objective-c - 如何从 UIBezierPath 生成 CGPoint-Array（沿给定路径触摸滑动对象）

> ID：10970270
> 
> 赞同：4
> 
> 时间：2012-06-10T16:22:04.967
> 
> 标签：objective-c, ios, cgpoint, uibezierpath

我有一个 UIBezierPath（像“8”一样弯曲，里面只有 4 个点），我需要用它制作某种 CGPoint-Array。有任何想法吗？谢谢！

编辑：

我的贝塞尔曲线是这样初始化的

```
-(void) initBezier
{
    theBezierPath = [UIBezierPath bezierPath];    
    [theBezierPath moveToPoint:P(211.00, 31.00)];
    [theBezierPath addCurveToPoint:P(870.00, 191.00) controlPoint1:P(432.00, -11.00) controlPoint2:P(593.00, 209.00)];
    [theBezierPath addCurveToPoint:P(731.00, 28.00) controlPoint1:P(1061.95, 178.53) controlPoint2:P(944.69, 5.78)];
    [theBezierPath addCurveToPoint:P(189.00, 190.00) controlPoint1:P(529.00, 49.00) controlPoint2:P(450.00, 189.00)];
    [theBezierPath addCurveToPoint:P(211.00, 31.00) controlPoint1:P(-33.01, 190.85) controlPoint2:P(71.00, 37.00)];
} 
```

我用它为一个对象设置动画

```
anim = [CAKeyframeAnimation animationWithKeyPath:@"emitterPosition"];
anim.path = theBezierPath.CGPath;
anim.calculationMode = kCAAnimationCubicPaced;
anim.repeatCount = HUGE_VALF;
anim.duration = tme; 
```

我想逐个像素地为路径上的对象设置动画（通过触摸位置）。我希望对象将给定的触摸坐标“捕捉”到曲线上最近的点，以便它沿着路径触摸滑动对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T16:45:21.753

使用该`CGPathApply()`函数迭代路径中的所有元素。作为参数之一，您必须指定一个指向函数的指针，然后将为每个路径元素调用该函数。路径元素数据结构（类型`CGPathElement`）然后包含描述它的点。

`NSValue`用作包装器将点添加到`NSMutableArray`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T19:38:42.977

既不`UIBezierPath`也不`CGPath`提供评估任意贝塞尔路径上的点的方法，也不提供找到路径上最近点的方法。您必须自己编写该代码。

幸运的是，这是一个经过充分研究的主题。[本教程](http://processingjs.nihongoresources.com/bezierinfo/)有很多有用的信息，可以帮助您入门。您对“三次”或“三阶”贝塞尔曲线感兴趣。

# android - BroadcastReceiver 没有被警报触发

> ID：10970277
> 
> 赞同：2
> 
> 时间：2012-06-10T16:23:43.083
> 
> 标签：android, broadcastreceiver, alarmmanager

我正在尝试设置一个将在后台运行并触发（最终）保存事件的警报。目前我只是将此代码附加到一个按钮上。按下按钮，警报应该开始留下 Toast 消息，以表明它正在运行。目前，除了 BroadcastReceiver 中的 onReceive 之外，一切都在运行，永远不会触发。

这是我的代码：

设置闹钟的班级：

```
//FIXME - rename (ie BackgroundSave; more descriptive)
public class AlarmReceiver extends Service{

    //FIXME - make sure you kill the service
    public void onCreate() {
        super.onCreate();
        Toast.makeText(getApplication().getApplicationContext(), "Service onCreate called", Toast.LENGTH_SHORT).show();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(getApplication().getApplicationContext(), "Service started", Toast.LENGTH_SHORT).show();
        setAlarm(AlarmReceiver.this);
        // We want this service to continue running until it is explicitly
        // stopped, so return sticky.
        return START_STICKY;
    }

    public void setAlarm(Context c) {
        AlarmManager alarmManager = (AlarmManager)c.getSystemService(Context.ALARM_SERVICE);
        Intent i = new Intent(c, Alarm.class);
        PendingIntent pi = PendingIntent.getBroadcast(c, 0, i, 0);
        alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, System.currentTimeMillis() + 1000, 1000, pi);
        Toast.makeText(c.getApplicationContext(), "setAlarm called", Toast.LENGTH_SHORT).show();
    }

    public void cancelAlarm(Context context) {
        Intent intent = new Intent(context, Alarm.class);
        PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        alarmManager.cancel(sender);
    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

这是广播接收器：

```
public class Alarm extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "Alarm", Toast.LENGTH_SHORT).show();
    }

} 
```

这是我的清单：

```
<!-- Alarm -->
        <service android:name="com.xxxx.android.tools.AlarmReceiver" android:enabled="true" />
        <receiver android:name="com.xxxx.android.tools.Alarm" ></receiver> 
```

永远不会触发 onReceive 警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:37:04.790

使用 AlarmManager.ELAPSED_REALTIME_WAKEUP 时，您必须使用 android.os.SystemClock.elapsedRealtime() 作为基准时间。

也就是说，我认为将 AlarmManager 用于保存目的并不是最好的方法。警报管理器非常重量级。您应该考虑使用简单的处理程序来触发您的保存操作。

看看 Handler.postAtTime()。

# java - Java随机插入集合

> ID：10970278
> 
> 赞同：1
> 
> 时间：2012-06-10T16:23:46.017
> 
> 标签：java, collections, insertion

我正在考虑使用最适合随机插入的 Java 集合。我将插入很多内容，最后只阅读一次集合。

我想要的功能是在 <0, current_length> 之间的任意位置在指定索引处添加元素。使用哪个集合最有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:00:34.100

有用的链接供您参考： http: [//www.coderfriendly.com/wp-content/uploads/2009/05/java_collections_v2.pdf](http://www.coderfriendly.com/wp-content/uploads/2009/05/java_collections_v2.pdf)

不完全确定您将如何阅读信息发布输入（以及它对您的重要性）。Hashmap 或 ArrayList 是否有意义取决于您要做什么。也不确定您是否正在寻找线程安全的东西。希望能帮助到你。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-10T20:29:45.233

使用效率低下`List`是该问题的特有现象。每次添加某些内容时，都必须重新索引每个后续元素 - 正如[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28int,%20E%29)所述：

> 将当前位于该位置的元素（如果有）和任何后续元素向右移动（将其索引加一）。

从您的问题/评论来看，您似乎有一堆`Object`s，并且您正在对它们进行排序。我建议对这个问题更有效的解决方案是编写一个`Comparator`（或让你的对象实现`Comparable`），然后使用`Collections.sort(list, comparator)`（或`Collections.sort(list)`）。

您可能会建议您`Object`的 s 根据其他变量进行排序。在这种情况下，您可以创建 的扩展，将`Object`这些其他变量作为字段和扩展`Comparable`，并使用类似的方法`getOriginal()`。您将这些包装的对象添加到列表中，排序，然后遍历列表，将原始对象 (from `getOriginal()`) 添加到新列表中。

有关集合排序算法的信息 - 请参阅此[SO question](https://stackoverflow.com/questions/753237/what-sort-does-java-collections-sortnodes-use)

# android - ANT 构建错误

> ID：10970280
> 
> 赞同：2
> 
> 时间：2012-06-10T16:23:58.967
> 
> 标签：android, linux

这可能是一个长镜头，但我希望有人能帮助我，因为我已经花了一整天的时间来达到这一点，我迫切地想让代码现在工作！

我正在使用的指南来自这里[http://rmtheis.wordpress.com/2011/08/06/using-tesseract-tools-for-android-to-create-a-basic-ocr-app/](http://rmtheis.wordpress.com/2011/08/06/using-tesseract-tools-for-android-to-create-a-basic-ocr-app/)我正在关注逐字逐句的指示。

它告诉我要确保你得到`“BUILD SUCCESSFUL” when ant finishes`

然而我没有！相反，我收到一条错误消息说

> ricki@ubuntu:~/tesseract-android-tools/tesseract-android-tools$ ant release Buildfile: build.xml
> 
> 构建失败/home/ricki/tesseract-android-tools/tesseract-android-tools/build.xml:46：sdk.dir 丢失。确保使用“android 更新项目”生成 local.properties

这很可能对任何人来说都太具体了，在这种情况下可以随意删除。但是，如果有人知道我需要做什么来解决这个问题，请帮助我！

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:26:24.910

正如错误消息所述，您必须在 local.properties 文件中设置您的 sdk 目录。或者，您可以在 ANDROID_HOME 环境变量中设置您的 sdk 目录。

# java - Java：使用涉及数组的方法的 Switch 语句

> ID：10970290
> 
> 赞同：0
> 
> 时间：2012-06-10T16:24:50.360
> 
> 标签：java, arrays, switch-statement

大家好，我目前正在创建一个程序，该程序允许用户创建数组、搜索数组并从数组中删除元素。查看该`LibraryMenu`方法，在 switch 语句中创建数组的第一种情况工作正常，但是当我尝试编译时，其他情况会创建“找不到符号错误”。

我的问题是我希望搜索和删除函数引用第一个开关案例 - 创建库数组。任何帮助表示赞赏，即使它可能来自一个简单的错误。

```
import java.util.*;
public class EnterLibrary
{

public static void LibraryMenu()
    {
        java.util.Scanner scannerObject =new java.util.Scanner(System.in);
        LibraryMenu Menu = new LibraryMenu();
        Menu.displayMenu();
        switch (scannerObject.nextInt() )
        {
            case '1':
            {
                System.out.println ("1 - Add Videos");
                Library[] newLibrary;
                newLibrary = createLibrary();
            }
            break;
            case '2':
                System.out.println ("2 - Search Videos");
                searchLibrary(newLibrary);
                break;
            case '3':
            {
                System.out.println ("3 - Change Videos");
                    //Change video method TBA
            }
            break;      
            case '4':
                System.out.println ("4 - Delete Videos");
                deleteVideo(newLibrary);
                break;
            default:
                System.out.println ("Unrecognized option - please select options 1-3 ");
                break;
        }
    }

public static Library[] createLibrary()
{
    Library[] videos = new Library[4];
    java.util.Scanner scannerObject =new java.util.Scanner(System.in); 
    for (int i = 0; i < videos.length; i++)
    {
        //User enters values into set methods in Library class
        System.out.print("Enter video number: " + (i+1) + "\n");
        String number = scannerObject.nextLine();
        System.out.print("Enter video title: " + (i+1) + "\n");
        String title = scannerObject.nextLine();
        System.out.print("Enter video publisher: " + (i+1) + "\n");
        String publisher = scannerObject.nextLine();
        System.out.print("Enter video duration: " + (i+1) + "\n");
        String duration = scannerObject.nextLine();
        System.out.print("Enter video date: " + (i+1) + "\n");
        String date= scannerObject.nextLine();
        System.out.print("VIDEO " + (i+1) + " ENTRY ADDED " + "\n \n");
        //Initialize arrays
        videos[i] = new Library ();
        videos[i].setVideo( number, title, publisher, duration, date  );
    }
    return videos;
}

public static void printVidLibrary( Library[] videos)
{
    //Get methods to print results
    System.out.print("\n======VIDEO CATALOGUE====== \n");
    for (int i = 0; i < videos.length; i++)
    {
        System.out.print("Video number " + (i+1) + ": \n" + videos[i].getNumber() + "\n ");
        System.out.print("Video title " + (i+1) + ": \n" + videos[i].getTitle() + "\n ");
        System.out.print("Video publisher " + (i+1) + ": \n" + videos[i].getPublisher() + "\n ");
        System.out.print("Video duration " + (i+1) + ": \n" + videos[i].getDuration() + "\n ");
        System.out.print("Video date " + (i+1) + ": \n" + videos[i].getDate() + "\n ");
    }
}

public static Library searchLibrary( Library[] videos)
{
    //User enters values to setSearch
    Library titleResult = new Library();
    java.util.Scanner scannerObject =new java.util.Scanner(System.in); 
    for (int n = 0; n < videos.length; n++)
    {
        System.out.println("Search for video number:\n");
        String newSearch = scannerObject.nextLine();
        titleResult.getSearch( videos, newSearch);

        if (!titleResult.equals(-1))
        {
        System.out.print("Match found!\n" + newSearch + "\n");
        }
        else if (titleResult.equals(-1))
        {
        System.out.print("Sorry, no matches found!\n");
        }
    }
    return titleResult;
}

public static void deleteVideo( Library[] videos)
{
    Library titleResult = new Library();
    java.util.Scanner scannerObject =new java.util.Scanner(System.in); 
    for (int n = 0; n < videos.length; n++)
    {
        System.out.println("Search for video number:\n");
        String deleteSearch = scannerObject.nextLine();
        titleResult.deleteVideo(videos, deleteSearch);
        System.out.print("Video deleted\n");
    }
}

public static void main(String[] args)
{
    Library[] newLibrary;

    new LibraryMenu();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:30:20.140

我认为这是一个糟糕的设计。你把太多东西混在一起了：用户界面、逻辑、数据结构。

首先将您`LibraryArray`与`LibraryMenu`. 您根本不应该在其中看到任何开关或输入或输出。

Java 是一种面向对象的语言。开始从对象的角度考虑您的系统。我没有看到类似`Video`and的类`VideoCatalog`。如果你创建了这个系统，你会发现它更容易实现。

看起来你有一个开始：

```
package model;

public class Video {
    private Long id;
    private String title;
    private String publisher;
    private int durationSeconds;
    private Date publicationDate;
    // add ctors, getters, etc.  Immutable?  Could be...
    // equals, hash code, toString
} 
```

让您的 VideoCatalog 没有用户界面或 I/O：

```
package model;

public interface VideoCatalog {
    List<Video> find();
    List<Video> find(String title);
    List<Video> find(Date startDate, Date endDate) ;
    Long save(Video video);
    void update(Video video);
    void delete(Video video);
} 
```

现在你可以有一个使用你想要的任何数据结构的实现：

```
package model;

public class VideoCatalogImpl implements VideoCatalog {
    private Set<Video> videos; 
    // add implementations here.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:29:52.550

您需要将该数组变量的声明移出 first 的范围`case`，并移至其他情况可以看到它的某个地方。鉴于您的代码的当前结构，最方便的是使其成为类的静态成员 - 即，

```
public class EnterLibrary
{
    Library[] newLibrary; 
```

那么这个类的所有静态方法都可以共享一个变量。但请务必删除出现在其他方法中的所有其他变量声明，否则它们仍将使用单独的变量，并且此类错误可能很难追踪！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T16:30:49.880

试试这个，

声明`Library[] newLibrary;` `as an instance variable (at class scope)`，或`as local variable before the switch statement`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T16:46:06.380

`Library[] newLibrary;`仅在您的案例“1”中定义，您应该在更广泛的范围内定义它，例如您的`LibraryMenu`方法。此外，`Library[] newLibrary`您的 main 中声明的内容不会在任何地方调用，也许您应该在搜索中添加 Null 检查，打印删除方法。

您的构造函数类必须与您的类具有相同的名称，并且其中没有任何修饰符关键字。此外，当您创建类的对象时，它不会使用其中声明的静态方法。

注意：当您使用自己声明的数组时，最好声明一个`int`变量来跟踪数组的实际大小。请注意，它`array.length`返回数组可以有多少项目，而不是它已经有多少项目。

我会将您的定义（而不是代码）重新设计为如下所示：

```
//Note I changed the classname from EnterLibrary to LibraryMenu. Apparently you
//wanted a LibraryMenu class.
public class LibraryMenu {

    private final int MAX_ITEMS = 50;
    private Library[] videos;
    private int size = 0;

    //remove the static and void keyworkds from this method, so this will be 
    //the constructor.
    public LibraryMenu() {
        videos = new Library[MAX_ITEMS];
        //the rest of your code here...
        switch (scannerObject.nextInt()) {
        //if you're reading an int, keep the constants in the case as int.
        case 1: 
            //no need of brackets inside a case statement
            //check that you can add an item in your Library array
            //also, its not good to ask the user to add 4 (or N) videos in 1 round :).
            if (size < MAX_ITEMS) {
                Library video = addVideo();
                videos[size++] = video;
            }
            break;
        case 2:
            break;
        }
    }

    //remove the static keyword so the instance of your class can call the method.
    public Library addVideo() {
        Library video = new Library();
        //your code to read data goes here...
        //then fulfill the video and return it.
        return video;
    }

    //The Library[] videos is declared in your class, so all other methods could
    //use it without having to receive it as a parameter.
    public void printVidLibrary() {
        //your code goes here...
    }

    public Library searchLibrary() {
        //your code goes here...
    }

    public void deleteVideo( Library[] videos) {
        //your code goes here...
    }

    public static void main(String[] args) {
        new LibraryMenu();
    }
} 
```

# java - Android：OpenGL ES：不能处理太宽的纹理？

> ID：10970292
> 
> 赞同：2
> 
> 时间：2012-06-10T16:25:11.960
> 
> 标签：java, graphics, opengl-es, android

我有一个 OpenGL ES 游戏应用程序，它使用一个带有 27 帧水平的 PNG 精灵来表示一个动画怪物。所以，我的 PNG 目前是 27 * 96 像素宽和 96 像素高。

我最近给它添加了新的动画，所以它变成了 57 帧，现在它是 57 * 96，比 5000 像素多一点宽。现在我的纹理只是显示为白色方块！？

我用不同的图像、大小（以 KB 为单位）和分辨率对其进行了测试，我发现任何大于 4000 像素的纹理都会得到这个白色方块，无论文件大小如何。

是内存问题吗？
你对修复它有什么想法吗？

我正在测试我认为与 Adreno 200 GPU 一起运行的 HTC Desire。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T16:33:59.613

OpenGL 实现具有最大纹理宽度和高度，无论是桌面还是移动。你应该做的是当动画纹理变得太宽时，只需开始一个新行。如果您将 glEnvironment 与 GL_MAX_TEXTURE_SIZE 一起使用，您可以找到设备的最大纹理大小：[opengl.org/wiki/Textures_-_more](http://opengl.org/wiki/Textures_-_more)。

请注意，它取决于硬件，因此您的 HTC 可能是 4096（实际上大得惊人），但对于大多数其他手机（尤其是旧手机）来说肯定更小。

# android - 如何在 HTC One X（可能是所有 htc 设备）中启用 ListView 过度滚动？

> ID：10970295
> 
> 赞同：3
> 
> 时间：2012-06-10T16:25:45.143
> 
> 标签：android, listview

我的应用程序中有一个列表视图，在我的 Xoom 和 Galaxy S2 中，当你过度滚动时，你会得到正常的发光效果。但在 HTC One X 中，它没有显示任何过度滚动行为。所有 HTC 应用程序都有手风琴风格的过度滚动行为。他们使用一些自定义列表视图吗？

无论如何，如何在 HTC 手机中显示某种过度滚动效果？此外，是否有一些 ListView 类在所有手机上实现过度滚动效果（不必是相同的效果）。

一些背景：

*   这些手机是 Android 4.0.3，Xoom 是 4.0.4。
*   该应用程序正在使用 Holo Light 主题。
*   最小/目标 API 级别（以及项目 API 级别）设置为 15。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:28:45.600

HTC One X 上滚动视图的行为取决于设备。您不能简单地在默认主题上禁用它。不过，您可以为应用程序设置 Holo 主题以获得默认行为。

# c# - 如何让用户类型 C# 语法突出显示在 VS 2012 RC 中再次工作？

> ID：10970305
> 
> 赞同：76
> 
> 时间：2012-06-10T16:27:44.343
> 
> 标签：c#, visual-studio-2012

不知何故，我的 C# 代码语法高亮部分在 VS 2012 IDE 中消失了。卸载、重新启动和重新安装不会执行任何操作，也不会重置选项对话框中的颜色。

以下是一些项目的示例，这些项目都以默认（黑色）出现，通常有颜色，但没有：

*   属性
*   系统类
*   我自己的课

以下是一些仍然有颜色的关键字：

*   使用
*   上市
*   空白
*   变量
*   为了

有没有其他人经历过这个并设法解决它？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-06-12T20:03:44.473

这是一个简单的解决方案。转到所在的目录`devenv`（对于 2012 RC），然后键入`devenv.exe /setup`. 它将解决您的问题。

`devenv.exe`通常是在类似的东西`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE`。

**编辑：**建议您从 Visual Studio 命令提示符（开始>Microsoft Visual Studio>工具>Visual Studio 命令提示符）执行此操作，和/或确保您的命令提示符具有管理员权限。

**其他注意事项：**这很有可能适用于 Visual Studio 的许多其他版本，包括 2008、2010、11 beta，...

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-08T18:32:08.060

我的问题仅限于“日期时间”类型不像其他类名那样以浅蓝色显示。我通过简单地在 VS 主题之间来回切换来修复它。偶然发现。比重置设置或修复安装快得多...

VS 菜单工具 -> 更改颜色主题

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-01-02T15:48:28.550

这对我有用：

```
1 - delete all in C:\Users\userNAme\AppData\Roaming\Microsoft\VisualStudio\11.0
2 - open vs console as administrator, and run:
      devenv.exe /setup
      devenv.exe /ResetSettings 
```

这将重置您的所有环境设置。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-09-11T19:13:29.357

如果上述方法都不适合您，请删除此注册表项下所有以 GUID 命名的文件夹（确保您的 Visual Studio 实例已关闭）：

**如果您使用的是 Visual Studio 2012：** `HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\FontAndColors`

**如果您使用的是 Visual Studio 2013：** `HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\12.0\FontAndColors`

**如果您使用的是 Visual Studio 2015：** `HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\14.0\FontAndColors`

重新启动 Visual Studio，您应该会看到一些需要配置的“用户类型”。然后，您可以导入您备份的字体和颜色，一切都会好起来的。这也可能适用于以前和未来版本的 VS，但我还没有测试过。

**免责声明：**确保在进行这些注册表调整之前导出/备份当前的字体和颜色设置。我不能为您丢失配置负责:)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-12-10T16:14:06.100

如果您仍然遇到此问题，请尝试 ResetSettings（为我工作）

注意：这将重置 Visual Studio 2012 设置 :)

1) 关闭与关闭

2）打开cmd（以管理员身份）。

3) 转到 devnev.exe 文件夹（类似于 "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE" ）。

4) 键入“devnev.exe /ResetSettings”

5）打开vs，看看漂亮的颜色

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-04-03T09:33:53.720

找到问题的根源：如果您安装了“ **Productivity Power Tools 2012** ”，

你应该去*工具*->*选项*->*生产力工具* 并关闭“**彩色参数帮助**”选项。

这解决了语法高亮问题。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-12-09T16:02:00.603

如果有人遇到与我一样的**Visual Studio 2013**问题，唯一对我有用的解决方案是首先关闭 VS2013，然后删除以下注册表项：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\12.0\FontAndColors 
```

重新打开 VS2013 后，我的类型语法高亮恢复了。

在删除注册表项之前，我注意到工具 > 选项的字体和颜色部分中的所有“用户类型...”设置都丢失了。删除注册表项可以恢复它们。他们达到了默认值，这给了我正在寻找的语法突出显示颜色。

这是唯一对我有用的解决方案。切换主题、将我的个性化设置重置为默认值、使用各种命令行开关运行 devenv.exe 以设置/重置 Visual Studio 均无效。

我还在 Microsoft 的 Connect 站点上创建了以下错误报告：

[http://connect.microsoft.com/VisualStudio/feedback/details/810985/incorrect-syntax-highlighting-for-c-types](http://connect.microsoft.com/VisualStudio/feedback/details/810985/incorrect-syntax-highlighting-for-c-types)。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-02-05T13:16:04.930

对我来说，“生产力电动工具 2012”是原因。这里没有任何建议有帮助。卸下电动工具后，颜色又回来了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-11-25T18:14:38.070

我做了这里列出的*所有*事情，但仍然一无所获（VS2013 Update 3）。我尝试了 /setup、/resetsettings、删除 AppData 中的内容、删除注册表项。尽管如此，即使在默认配色方案中，用户类型也不会突出显示。

最后的帮助是打开字体和颜色对话框，选择标识符，并将其设为粗体。然后删除粗体。即时修复！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-12T20:00:18.017

我有同样的问题....只是单独卸载并重新安装并不能解决问题。我卸载后，在程序文件中删除了VS 2012的所有残余，删除了所有相关的注册表项，并从我的文档中删除了VS 2012文件夹，然后重新安装，用户类型显示在字体和颜色的显示项中一切恢复正常。我的猜测是，这是一个或多个注册表项的问题，但我不能确定。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-10T19:01:39.757

退出开发环境

转到下面的路径 hkey_current_user\software\microsoft\visualstudio！

删除 9.0 、 10.0 、 10.0_config （我的意思是说除 11.0 和 11.0_config 之外的所有其他文件夹）

现在启动 devenv 并看到神奇的颜色恢复正常

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-03T09:02:44.460

1 - 删除 C:\Users\userNAme\AppData\Roaming\Microsoft\VisualStudio\11.0 中的所有内容 2 - 以管理员身份打开 vs 控制台，然后运行：devenv.exe /setup devenv.exe /ResetSettings1 - 删除 C:\Users 中的所有内容\userNAme\AppData\Roaming\Microsoft\VisualStudio\11.0 2 - 以管理员身份打开 vs 控制台，然后运行：devenv.exe /setup devenv.exe /ResetSettings

这对我有帮助...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-25T10:41:20.037

1.  删除 C:\Users\userNAme\AppData\Roaming\Microsoft\VisualStudio\11.0 中的所有内容
2.  以管理员身份打开 vs 控制台，然后运行：

    ```
    devenv.exe /setup
    devenv.exe /ResetSettings 
    ```

这个解决方案对我有用。非常感谢 Gaz Winter

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-10-19T22:04:11.277

如果您已安装 Roslyn 的预览版，请卸载它。这对我有用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-11-07T17:27:40.317

在尝试了这里列出的几个解决方案后，我最终发现我的问题是由一个非常大的（488000+ 个字符）字符串变量引起的。突出显示一直到那条线，但不是在它之后。一旦我减少了字符串的长度，文件其余部分中的突出显示恢复正常工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-05-20T21:42:31.553

我的机器上已经安装了 VS 2012 Pro。然后我安装了 VS 2013 Pro 并开始面临这个颜色问题。然后我删除了 HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\12.0\FontAndColors 键并打开 VS 2013。这种方法解决了我的问题，颜色又回来了。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-06-10T13:19:58.113

如果 Windows 桌面配置了高对比度主题，则语法着色似乎从 Visual Studio 中完全消失。如果是这种情况，请选择普通的 windows 主题并设置纯色背景色（如果您不想要背景图片）以恢复 VS 中的语法着色。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-08-01T09:58:41.540

问题：类名和语法以黑色显示

解决方案：

第 1 步：删除密钥：
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\12.0\FontAndColors

第 2 步：删除文件夹：
C:\Users\UserName\AppData\Roaming\Microsoft\VisualStudio\12.0

第 3 步：打开命令提示符（管理员模式）并在命令行下运行：
C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE>devenv.exe /setup
C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE>devenv.exe /ResetSettings

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2015-09-01T15:46:43.927

它适用于下载此“Productivity Power Tools 2012”并安装，安装此工具后获取此步骤转到工具 -> 选项 -> Productivity Power Tools 并关闭“彩色参数帮助”选项。

这将关键字修复为语法**ActionResult**未设置为默认黑色并解决了突出显示问题。

# python - Hadoop 流式处理：报告错误

> ID：10970310
> 
> 赞同：3
> 
> 时间：2012-06-10T16:28:22.697
> 
> 标签：python, hadoop, amazon-web-services, amazon-emr

使用 Python 脚本在 Hadoop 流中报告异常的最佳实践是什么？

我的意思是：假设我有一个无法理解其输入的映射器脚本，我如何向 Hadoop 发出信号以终止作业并报告错误消息？

我是否使用`logging`并结束`sys.exit`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T17:16:13.540

如果您想发出错误信号，请从您的 python 脚本中返回一个非零代码。您可以将任何日志写入 stderr，hadoop 将在任务日志中捕获该日志。您还可以通过在 stderr 行前加上`reporter:status:<msg>`or来向报告器和计数器发送状态`reporter:counter:<group>,<name>,<increment>`

# javascript - 命名空间内的构造函数

> ID：10970311
> 
> 赞同：9
> 
> 时间：2012-06-10T16:28:24.163
> 
> 标签：javascript, namespaces

我读过为 JavaScript 项目创建命名空间有助于减少与其他库的冲突。我有一些代码，其中包含许多不同类型的对象，我为其定义了构造函数。将它们也放在命名空间中是一种好习惯吗？

例如：

```
var shapes = {
    Rectangle: function(w, h) {
        this.width = w;
        this.height = h;
    }
}; 
```

可以通过以下方式调用：

```
var square = new shapes.Rectangle(10,10); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T16:38:56.903

这通常是个好主意；此外，如果您的对象需要一组不应公开的共享函数，您可以将它们全部包装在闭包中，例如模块：

```
var shapes = (function() {
  // private variables
  var foo = 0;

  // private function
  function get_area(w, h)
  {
    return w * h;
  }

  return {
    Rectangle: function(w, h) {
      this.width = w;
      this.height = h;
      // call private function to determine area (contrived example)
      this.area = get_area(w, h);
    }
  }
}());

var s = new shapes.Rectangle(100, 5); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T16:32:09.630

这种命名空间被称为“[单例模式](http://www.adobe.com/devnet/html5/articles/javascript-design-patterns-pt1-singleton-composite-facade.html)”，它是著名的“[四人帮](http://en.wikipedia.org/wiki/Design_Patterns)”设计模式书推荐的主要模式之一。

来自伟大的（和免费的）书[学习 JavaScript 设计模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#singletonpatternjavascript)：

> 经典地，单例模式可以通过创建一个类来实现，该类具有一个方法，如果该类的新实例不存在，则该方法会创建一个新实例。在实例已经存在的情况下，它只返回对该对象的引用。因此，单例模式之所以为人所知，是因为它将类的实例化限制为单个对象。
> 
> 在 JavaScript 中，单例作为命名空间提供者将实现代码与全局命名空间隔离开来，从而为函数提供单点访问。
> 
> 它们可以采用多种不同的形式，但在最基本的情况下，Singleton 可以实现为与其相关函数和属性组合在一起的对象字面量......

所以是的，它在许多编程语言中是一个很好用的概念，并且非常适合防止 JavaScript 中的全局命名空间对象冲突。

另请参阅：[在 JavaScript 中实现单例的最简单/最干净的方法？](https://stackoverflow.com/questions/1479319/simplest-cleanest-way-to-implement-singleton-in-javascript)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T16:30:30.717

是的。您应该尽可能少地污染全局命名空间

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T16:32:41.370

是的，这是个好主意，因为您避免了因污染全局命名空间而造成的麻烦和混乱。虽然我个人会`shapes`改为`shape`，所以你可以有一个`shape.Rectangle`，这对我来说更有意义（毕竟，一个 Rectangle 只是一个对象）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-10T16:37:22.137

除了不污染命名空间外，它还使您能够进行类型族检查：

```
function doSomethingTo(shape) {
  var shapeName, validArg;

  for (shapeName in shapes) {
    validArg = validArg || shape instanceof shapes[shapeName];
  }

  if ( !validArg ) throw "Argument is not a shape.";
} 
```

# qt - QIcon/QImage 内存泄漏？

> ID：10970316
> 
> 赞同：3
> 
> 时间：2012-06-10T16:29:04.820
> 
> 标签：qt, visual-c++, memory-leaks, qimage, qicon

我使用**QIcon**（Qt 4.8.1 和 MSVC 2008）面临一些内存泄漏。
这发生在简单的**QAction**（如菜单条目，甚至是由 Qt Designer 自动生成的条目）或容器项（如**QTreeWidgetItem**）中。
例如：

```
QTreeWidgetItem *newItem = new QTreeWidgetItem();
newItem->setText(0, "Item");

// This causes a memory leak!
newItem->setIcon(0, QIcon("D:\\Dnl\\QtSandBoxApp\\Resources\\dataset2.png"));

treeWidget->addTopLevelItem(newItem); 
```

经过大量调试后，我发现**QIcon**内部使用了**QImage**，它似乎已被正确销毁（参考计数器降至零）。
我可以产生的最简单的例子如下：

```
#include "stdafx.h"
#include <QtGui/QApplication>
#include <crtdbg.h>

int main(int argc, char *argv[])
{
    _CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);

    QApplication a(argc, argv);
    //QPixmapCache::setCacheLimit(0);

    // MEMORY LEAK!
    // Internally uses QImageReader
    QImage image("D:\\Dnl\\QtSandBoxApp\\Resources\\dataset2.png");

    // NO MEMORY LEAK!
    //QImage image(QSize(16, 16), QImage::Format_ARGB32);
    return 0;
} 
```

我错过了什么吗？
这是一个非常烦人的问题，因为它阻止了正确的内存泄漏跟踪（即由应用程序引起，而不是 Qt）。

编辑：这是内存泄漏报告

```
Detected memory leaks!
Dumping objects ->
{5637} normal block at 0x00A46020, 76 bytes long.
 Data: <d ,g ^      L Bg> 64 D2 2C 67 E8 5E A4 00 00 00 00 00 4C B9 42 67 
{5636} normal block at 0x00A45EE8, 12 bytes long.
 Data: < z   `   z  > 14 7A D3 00 20 60 A4 00 00 7A D3 00 
{5634} normal block at 0x00A46148, 128 bytes long.
 Data: <    6   6   Za  > 01 00 00 00 36 00 00 00 36 00 00 00 5A 61 A4 00 
{5614} normal block at 0x00A45DC8, 76 bytes long.
 Data: <d ,g x      L Bg> 64 D2 2C 67 E8 78 A4 00 00 00 00 00 4C B9 42 67 
{5613} normal block at 0x00A478E8, 12 bytes long.
 Data: <     ]      > A4 96 CA 00 C8 5D A4 00 90 96 CA 00 
{5611} normal block at 0x00A45C48, 128 bytes long.
 Data: <    6   5   Z\  > 01 00 00 00 36 00 00 00 35 00 00 00 5A 5C A4 00 
{5591} normal block at 0x00A477C8, 76 bytes long.
 Data: <d ,g u      L Bg> 64 D2 2C 67 10 75 A4 00 00 00 00 00 4C B9 42 67 
{5590} normal block at 0x00A47510, 12 bytes long.
 Data: <     w      > B8 96 C6 00 C8 77 A4 00 A4 96 C6 00 
{5588} normal block at 0x00A45B88, 128 bytes long.
 Data: <    6   5    [  > 01 00 00 00 36 00 00 00 35 00 00 00 9A 5B A4 00 
{5566} normal block at 0x00A473F0, 76 bytes long.
 Data: <d ,g s      L Bg> 64 D2 2C 67 A8 73 A4 00 00 00 00 00 4C B9 42 67 
{5565} normal block at 0x00A473A8, 12 bytes long.
 Data: <     s      > E0 D7 C3 00 F0 73 A4 00 CC D7 C3 00 
{5563} normal block at 0x00A471E0, 128 bytes long.
 Data: <    6   5    q  > 01 00 00 00 36 00 00 00 35 00 00 00 F2 71 A4 00 
{5543} normal block at 0x00A47008, 76 bytes long.
 Data: <d ,g o      L Bg> 64 D2 2C 67 C0 6F A4 00 00 00 00 00 4C B9 42 67 
{5542} normal block at 0x00A46FC0, 12 bytes long.
 Data: <La   p  8a  > 4C 61 BB 00 08 70 A4 00 38 61 BB 00 
{5540} normal block at 0x00A46DF8, 128 bytes long.
 Data: <    6   6    n  > 01 00 00 00 36 00 00 00 36 00 00 00 0A 6E A4 00 
{5520} normal block at 0x003ED9A8, 76 bytes long.
 Data: <d ,g` >     L Bg> 64 D2 2C 67 60 D9 3E 00 00 00 00 00 4C B9 42 67 
{5519} normal block at 0x003ED960, 12 bytes long.
 Data: <      >     > A4 C6 B4 00 A8 D9 3E 00 90 C6 B4 00 
{5517} normal block at 0x00A46D38, 128 bytes long.
 Data: <    6   5   Jm  > 01 00 00 00 36 00 00 00 35 00 00 00 4A 6D A4 00 
{5496} normal block at 0x003ED8D8, 76 bytes long.
 Data: <d ,g  >     L Bg> 64 D2 2C 67 80 D7 3E 00 00 00 00 00 4C B9 42 67 
{5495} normal block at 0x003ED780, 12 bytes long.
 Data: <<     > (   > 3C CA 00 10 D8 D8 3E 00 28 CA 00 10 
{5491} normal block at 0x00A412A0, 128 bytes long.
 Data: <    6   5       > 01 00 00 00 36 00 00 00 35 00 00 00 B2 12 A4 00 
{5260} normal block at 0x00A48448, 64 bytes long.
 Data: <            Z   > 01 00 00 00 16 00 00 00 13 00 00 00 5A 84 A4 00 
{5233} normal block at 0x00A48380, 56 bytes long.
 Data: <        Ha    Bg> 00 00 CD 00 C0 82 A4 00 48 61 A4 00 04 BA 42 67 
{5231} normal block at 0x00A482C0, 128 bytes long.
 Data: <    6   6       > 01 00 00 00 36 00 00 00 36 00 00 00 D2 82 A4 00 
{4681} normal block at 0x00A48150, 64 bytes long.
 Data: <            b   > 01 00 00 00 16 00 00 00 13 00 00 00 62 81 A4 00 
{4655} normal block at 0x00A47FB8, 56 bytes long.
 Data: <     ~  H\    Bg> 00 00 CA 00 F8 7E A4 00 48 5C A4 00 04 BA 42 67 
{4653} normal block at 0x00A47EF8, 126 bytes long.
 Data: <    5   5       > 01 00 00 00 35 00 00 00 35 00 00 00 0A 7F A4 00 
{4102} normal block at 0x00A47DB8, 64 bytes long.
 Data: <             }  > 01 00 00 00 16 00 00 00 13 00 00 00 CA 7D A4 00 
{4075} normal block at 0x00A47D40, 56 bytes long.
 Data: <     {   [    Bg> 00 00 C6 00 D8 7B A4 00 88 5B A4 00 04 BA 42 67 
{4073} normal block at 0x00A47BD8, 126 bytes long.
 Data: <    5   5    {  > 01 00 00 00 35 00 00 00 35 00 00 00 EA 7B A4 00 
{3522} normal block at 0x00A479F8, 64 bytes long.
 Data: <             z  > 01 00 00 00 16 00 00 00 13 00 00 00 0A 7A A4 00 
{3496} normal block at 0x00A47AA0, 56 bytes long.
 Data: <    8y   q    Bg> 00 00 BD 00 38 79 A4 00 E0 71 A4 00 04 BA 42 67 
{3494} normal block at 0x00A47938, 126 bytes long.
 Data: <    5   5   Jy  > 01 00 00 00 35 00 00 00 35 00 00 00 4A 79 A4 00 
{2943} normal block at 0x00A41220, 64 bytes long.
 Data: <            2   > 01 00 00 00 16 00 00 00 13 00 00 00 32 12 A4 00 
{2917} normal block at 0x00A40418, 56 bytes long.
 Data: <    X    m    Bg> 00 00 B6 00 58 03 A4 00 F8 6D A4 00 04 BA 42 67 
{2915} normal block at 0x00A40358, 128 bytes long.
 Data: <    6   6   j   > 01 00 00 00 36 00 00 00 36 00 00 00 6A 03 A4 00 
{2367} normal block at 0x00A40760, 64 bytes long.
 Data: <            r   > 01 00 00 00 16 00 00 00 13 00 00 00 72 07 A4 00 
{2341} normal block at 0x00A401D0, 56 bytes long.
 Data: <    h   8m    Bg> 00 00 B4 00 68 00 A4 00 38 6D A4 00 04 BA 42 67 
{2339} normal block at 0x00A40068, 126 bytes long.
 Data: <    5   5   z   > 01 00 00 00 35 00 00 00 35 00 00 00 7A 00 A4 00 
{1788} normal block at 0x00A40820, 64 bytes long.
 Data: <            2   > 01 00 00 00 16 00 00 00 13 00 00 00 32 08 A4 00 
{1762} normal block at 0x00A417B0, 56 bytes long.
 Data: <              Bg> 00 00 00 10 B0 18 A4 00 A0 12 A4 00 04 BA 42 67 
{1760} normal block at 0x00A418B0, 126 bytes long.
 Data: <    5   5       > 01 00 00 00 35 00 00 00 35 00 00 00 C2 18 A4 00 
{252} normal block at 0x003E8A08, 40 bytes long.
 Data: <        @B      > 00 00 00 00 CC CD CD CD 40 42 0F 00 00 00 00 00 
{251} normal block at 0x003E8950, 120 bytes long.
 Data: <Lc-g  >     L Bg> 4C 63 2D 67 08 89 3E 00 00 00 00 00 4C B9 42 67 
{250} normal block at 0x003E8908, 8 bytes long.
 Data: < c-gP > > 0C 63 2D 67 50 89 3E 00 
{249} normal block at 0x003E88A0, 40 bytes long.
 Data: <        @B      > 00 00 00 00 CC CD CD CD 40 42 0F 00 00 00 00 00 
{248} normal block at 0x003E8828, 60 bytes long.
 Data: <      >         > 07 00 00 00 08 89 3E 00 80 06 00 00 00 CD CD CD 
Object dump complete.
The program '[2808] QtSandBoxApp.exe: Native' has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T07:33:55.187

我解决了这个问题。
在 Qt中使用 CrtDbg 库 API 似乎**不是**一个好主意。

引自[http://winfig.com/?p=154](http://winfig.com/?p=154)：

> Qt 在它的 DLL 中分配内存，并且在卸载 DLL 时释放该内存。不幸的是，这是在 Visual Studio 报告所谓的泄漏之后。

就是这样，事实上，当我从磁盘请求**QImage**时，会在运行时加载以下模块：

```
'QtSandBoxApp.exe': Loaded 'C:\Libraries\Qt\4.8.1\plugins\imageformats\qgifd4.dll'
'QtSandBoxApp.exe': Loaded 'C:\Libraries\Qt\4.8.1\plugins\imageformats\qicod4.dll'
'QtSandBoxApp.exe': Loaded 'C:\Libraries\Qt\4.8.1\plugins\imageformats\qjpegd4.dll'
'QtSandBoxApp.exe': Loaded 'C:\Libraries\Qt\4.8.1\plugins\imageformats\qmngd4.dll'
'QtSandBoxApp.exe': Loaded 'C:\Libraries\Qt\4.8.1\plugins\imageformats\qsvgd4.dll'
'QtSandBoxApp.exe': Loaded 'C:\Libraries\Qt\4.8.1\bin\QtSvgd4.dll', Symbols loaded.
'QtSandBoxApp.exe': Loaded 'C:\Libraries\Qt\4.8.1\bin\QtXmld4.dll', Symbols loaded.
'QtSandBoxApp.exe': Loaded 'C:\Libraries\Qt\4.8.1\plugins\imageformats\qtgad4.dll'
'QtSandBoxApp.exe': Loaded 'C:\Libraries\Qt\4.8.1\plugins\imageformats\qtiffd4.dll' 
```

[Visual Leak Detector](http://vld.codeplex.com/)正确报告没有内存泄漏。

PS：[这个](http://www.qtcentre.org/wiki/index.php?title=Memory_Leak_Detection_in_VS)来自 QtCentre 的 wiki 条目具有误导性：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-05T08:03:27.080

避免内存泄漏的另一种方法是，您可以使用带有 QPixmap 的 QIcon 调用，在您的示例中如下所示：

```
QTreeWidgetItem *newItem = new QTreeWidgetItem();
newItem->setText(0, "Item");

// This causes a memory leak!
newItem->setIcon(0, QIcon(QPixmap("D:\\Dnl\\QtSandBoxApp\\Resources\\dataset2.png")));

treeWidget->addTopLevelItem(newItem); 
```

正如我在我的博客（[https://programmersexception.blogspot.com/2019/04/memory-leak-con-qicon-en-qt-594-y.html](https://programmersexception.blogspot.com/2019/04/memory-leak-con-qicon-en-qt-594-y.html)）中解释的那样，抱歉是西班牙语，有已知的BUG，我希望他们能尽快修复（[https://bugreports.qt.io/browse/QTBUG-59621](https://bugreports.qt.io/browse/QTBUG-59621)）。

# java - 线程之间的通信

> ID：10970323
> 
> 赞同：1
> 
> 时间：2012-06-10T16:29:54.680
> 
> 标签：java, multithreading, communication

我正在制作一个小型 java 游戏，其中我将有两个线程（以及迈向多线程的第一步......），一个用于逻辑，一个用于绘图。

所以我的问题是：我怎样才能让这两者相互交流？

要求：

*   从另一个线程访问变量和对象

*   同步它们，以便它们每个都在同一时间完成相同数量的“循环”。（逻辑计算，然后另一个绘制结果，循环再次开始......）

那么这在java中是如何实现的呢？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:43:11.123

方法是方法，无论是否在线程内。只需创建一个对所有线程可见的对象，它们都可以访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:48:10.280

```
1\. Create a Class with logic and drawing methods. 
   Whose object is accessible by both the threads.

2\. Now please do synchronize the atomic statements or methods.

3\. So its like an object is shared between 2 threads. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T23:20:15.080

[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)是一种用于在线程之间进行通信的简单结构。

我经常发现，如果您使用 a `BlockingQueue`，它将专注于使线程正确地协同工作。例如，他们不会提供您要求的设施，因为实际上这些设施并不是您想要的。

# android - 从 Android 中的 textview 显示网站的阿拉伯字体

> ID：10970325
> 
> 赞同：1
> 
> 时间：2012-06-10T16:30:14.540
> 
> 标签：android, json, textview, font-face, arabic

我想显示一个网站的阿拉伯语内容，通过 JSON 发送给我。我的目标设备是 2.1 到 4.0 在将数据从服务器以 JSON 格式发送到设备时，我是否必须照顾任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:39:23.433

您应该确保您的内容以 UTF-8 格式发送。Android 将能够显示这些阿拉伯字符。

# mysql - Mysql查询以获取未读响应计数

> ID：10970329
> 
> 赞同：0
> 
> 时间：2012-06-10T16:30:25.590
> 
> 标签：mysql

我有三个 MYSQL 表

```
Requests -  request_id, request_msg, user_id, request_datetime
Responses - response_id, request_id, response_msg, user_id, response_datetime, readflag
Users-      user_id, user_email, user_name

readflag = 0 or 1 
```

我想获取**用户的所有请求，**其中至少有 1 个响应未读此请求、总响应计数和此请求的未读响应计数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:04:06.437

试试这个：

```
SELECT 
    a.request_id,
    COUNT(*) AS total_response_count,
    COUNT(b.request_id) AS unread_response_count
FROM
    Requests a
LEFT JOIN
    Responses b ON a.request_id = b.request_id AND b.readflag = 0
GROUP BY
    a.request_id
HAVING 
    COUNT(b.request_id) > 0 
```

在这里，我们 LEFT JOIN 响应表的关系*以及*未读消息的位置 ( `b.readflag = 0`)。这使得所有具有读取响应的行都具有 NULL 值`b.response_id`。由于`COUNT()`在其计算中不考虑 NULL，我们只过滤具有至少 1 个未读响应 ( `HAVING COUNT(b.request_id) > 0`) 的请求。

因为我们 LEFT JOINed，所有响应都被保留，读取或未读......只是所有*读取*的行都将包含 NULL for `b.request_id`。`COUNT(*)`本质上依赖于一行的存在，所以这给了我们消息的总数。然后`COUNT(b.request_id)`给我们未读消息的计数，因为它仅将非 NULL 值纳入其计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:41:30.723

尝试这样的事情：

```
SELECT COUNT(`res`.`response_id`) AS `total`, COUNT(`res`.`readflag`='0') AS `unread`
FROM `Requests` AS `req`
LEFT JOIN `Responses` AS `res` ON `req`.`request_id`=`res`.`request_id`
WHERE `unread`>1 AND `req`.`user_id`='[PLACE_USER_ID_HERE]' 
```

# php - 在数据库中插入数据的问题

> ID：10970335
> 
> 赞同：-2
> 
> 时间：2012-06-10T16:30:50.343
> 
> 标签：php, mysql, database, insert

```
$message=$_POST['answer'];
$message=nl2br($message);
$message=strip_tags($message, '<p><a><b><i><strong><em><code><sub><sup><img><ul><ol><li>');
$message = mysql_real_escape_string($message);
$user=$_SESSION['SESS_MEMBER_ID'];
$qry="INSERT INTO forum_rules (message,author,date) VALUES ($message,$user,'".date("Y-m-d H:i:s")."')";
$result=mysql_query($qry) or die(mysql_error());
if (!$result) {
echo "error inserting data into database";
} else { 
    ...
    } 
```

这段代码总是输出错误将数据插入数据库，我看不出我做错了什么。我也试图在没有日期部分的情况下这样做，但这并没有奏效。有人可以告诉我我在这里做错了什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:36:40.643

Jared Farrish 表示，这可能是由于文本变量周围缺少单引号引起的。

```
VALUES ('$message','$user', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:41:24.397

更新

```
$qry="INSERT INTO forum_rules (message,author,date) VALUES ('$message','$user')"; 
```

试试这个

# iphone - 从 url 加载图像时 UIWebView 有延迟

> ID：10970340
> 
> 赞同：0
> 
> 时间：2012-06-10T16:31:48.890
> 
> 标签：iphone, ios, image, uiwebview

`UIWebView`从 url 加载图像时出现延迟问题。

在我的代码中是加载本地 html 文件的行：

```
NSBundle *thisBundle = [NSBundle mainBundle];
NSString *path = [thisBundle pathForResource:@"detail" ofType:@"html"];
NSString *html = [NSString stringWithContentsOfFile:path];
NSString *htmlString = [NSString stringWithFormat:html, imageURL];
[webView loadHTMLString:htmlString baseURL:nil]; 
```

以及我的 detail.html 文件中的一行：

```
<img src="%@" height="100%" alt="…"></img> 
```

现在，当我按下按钮并转到 UIWebView 时，起初它是白色的，几秒钟后显示图像和文本。我知道从 URL 加载图像需要时间，但是是否可以先显示文本然后等待加载图像？

通常我在想：按钮->转到`UIWebView`->显示文本->加载时显示图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:38:18.807

您可以做一些事情，其中​​之一就是在显示文本的 uiwebview 下方显示一个视图。将 uiwebview 的 alpha 设置为 0（因此它是透明的），然后当您收到 uiwebview 已完成加载的通知时，使用动画将其淡入，然后删除带有文本的视图。

当调用 webViewDidFinishLoad: 时，您将知道 UIWebView 何时完成加载。

对于这样的动画：

```
 [UIView animateWithDuration:0.4
                 animations:^ {
                     self.webView.alpha = 1.0;                         
                 }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:14:41.067

**在Martin H**的帮助下，我设法解决了这个问题。

首先在我的 local.html 文件中，我被添加到`<head>`以下部分：

```
<script type="text/javascript">
    function loadImage(imageSource) {
         document.getElementById("picture").src=imageSource;
    }
</script> 
```

下一节`<body>`：

```
<img src="" style="border: none;" id="picture"> 
```

接下来在我的 UIViewController 中添加委托方法：

```
- (void) webViewDidFinishLoad:(UIWebView *)web {
    [webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"loadImage('http://example.com/image.jpg')"]];
} 
```

# java - 骰子仿真 - ImageView

> ID：10970341
> 
> 赞同：1
> 
> 时间：2012-06-10T16:31:49.233
> 
> 标签：java, android, eclipse, imageview

我正在尝试使用 ImageView 模拟骰子。当我单击按钮时，似乎什么也没有发生。为了调试目的，我已经对这个示例进行了硬编码，用 imageView4 替换图像（我确保随机不会失败）。现在，当我在 2.2 vanilla 模拟器上运行它时，应用程序崩溃了。谁能指出我做错了什么？我是 Java、Eclipse 和 Android 的新手，所以我确信我可能犯了不止一个错误。

**爪哇：**

```
package mobile.applications.yahztee4;

import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageButton;

public class Yahtzee4Activity extends Activity {
    /** Called when the activity is first created. */

    ImageButton dice1, dice2, dice3, dice4, dice5;
    Button roll, begin;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);              

        PlayGame();

    }

    public void PlayGame()  
    {  
        dice1 = (ImageButton)findViewById(R.id.btndice1);  

        begin = (Button)findViewById(R.id.btnroll);
        roll = (Button)findViewById(R.id.btnbegin);

        begin.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v) {
                Random rand = new Random();     
                int rndInt = rand.nextInt(6) + 1; // Random number between 1 and 6

                String imgName = "die" + rndInt;

                int id = getResources().getIdentifier(imgName, "drawable", getPackageName());  
                dice1.setImageResource(id);                 
            }
        });  
    }  
} 
```

**按钮的 XML：**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" 
    android:baselineAligned="false" >

    <TableLayout
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1.13" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView5"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="1&apos;s" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="TextView" />

            <TextView
                android:id="@+id/textView9"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="3 of Kind" />

            <TextView
                android:id="@+id/textView10"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="TextView" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="2&apos;s" />

            <TextView
                android:id="@+id/textView6"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="TextView" />

            <TextView
                android:id="@+id/textView11"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="4 of Kind" />

            <TextView
                android:id="@+id/textView12"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="TextView" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="3&apos;s" />

            <TextView
                android:id="@+id/textView7"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="TextView" />

            <TextView
                android:id="@+id/textView13"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Full House" />

            <TextView
                android:id="@+id/textView14"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="TextView" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView4"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="4&apos;s" />

            <TextView
                android:id="@+id/textView8"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="TextView" />

            <TextView
                android:id="@+id/textView15"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Sm Straight" />

            <TextView
                android:id="@+id/textView16"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="TextView" />
        </TableRow>

         <TableRow
             android:id="@+id/tableRow5"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content" >

             <TextView
                 android:id="@+id/textView17"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="5&apos;s" />

             <TextView
                 android:id="@+id/textView18"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />

             <TextView
                 android:id="@+id/textView19"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Lg Straight" />

             <TextView
                 android:id="@+id/textView20"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />
         </TableRow>

         <TableRow
             android:id="@+id/tableRow6"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content" >

             <TextView
                 android:id="@+id/textView21"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="6&apos;s" />

             <TextView
                 android:id="@+id/textView22"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />

             <TextView
                 android:id="@+id/textView23"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Yahtzee" />

             <TextView
                 android:id="@+id/textView24"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />
         </TableRow>

         <TableRow
             android:id="@+id/tableRow7"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content" >

             <TextView
                 android:id="@+id/textView25"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Bonus (35)" />

             <TextView
                 android:id="@+id/textView26"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />

             <TextView
                 android:id="@+id/textView27"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Chance" />

             <TextView
                 android:id="@+id/textView28"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />
         </TableRow>

         <TableRow
             android:id="@+id/tableRow8"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content" >

             <TextView
                 android:id="@+id/textView29"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Upper Score" />

             <TextView
                 android:id="@+id/textView30"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />

             <TextView
                 android:id="@+id/textView31"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Lower Score" />

             <TextView
                 android:id="@+id/textView32"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />
         </TableRow>

         <TableRow
             android:id="@+id/tableRow9"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content" >

             <TextView
                 android:id="@+id/textView33"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Yz Bonus" />

             <TextView
                 android:id="@+id/textView34"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />

             <TextView
                 android:id="@+id/textView35"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Total Score" />

             <TextView
                 android:id="@+id/textView36"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />
         </TableRow>

         <TableRow
             android:id="@+id/tableRow10"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content" >

             <TextView
                 android:id="@+id/textView37"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Turn#" />

             <TextView
                 android:id="@+id/textView38"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="TextView" />

             <TextView
                 android:id="@+id/textView39"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Total Score" />

             <TextView
                 android:id="@+id/textView40"
                 android:layout_width="0dp"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"
                 android:text="Roll #" />
         </TableRow>

         <TableRow
              android:id="@+id/tableRow11"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:gravity="center" >

              <ImageView
                  android:id="@+id/btndice1"
                  android:layout_width="60dip"
                  android:layout_height="70dip"
                  android:padding="2dip" />              
              <ImageView
                  android:id="@+id/btndice2"
                  android:layout_width="60dip"
                  android:layout_height="70dip"
                  android:padding="2dip" />

              <ImageView
                  android:id="@+id/btndice3"
                  android:layout_width="60dip"
                  android:layout_height="70dip"
                  android:padding="2dip" />

              <ImageView
                  android:id="@+id/btndice4"
                  android:layout_width="60dip"
                  android:layout_height="70dip"
                  android:padding="2dip" />

              <ImageView
                  android:id="@+id/btndice5"
                  android:layout_width="60dip"
                  android:layout_height="70dip"
                  android:padding="2dip" />

        </TableRow>

          <Button
              android:id="@+id/btnroll"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="@string/roll" 
          />

          <Spinner
              android:id="@+id/spinner"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:prompt="@string/score_prompt_spinner" />

          <Button
              android:id="@+id/btnbegin"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="@string/begin" />

    </TableLayout>

</LinearLayout> 
```

**错误日志文件**

```
06-10 18:21:31.674: D/AndroidRuntime(705): Shutting down VM
06-10 18:21:31.674: W/dalvikvm(705): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-10 18:21:31.684: E/AndroidRuntime(705): FATAL EXCEPTION: main
06-10 18:21:31.684: E/AndroidRuntime(705): java.lang.RuntimeException: Unable to start activity ComponentInfo{michelle.harris.yahztee4/michelle.harris.yahztee4.Yahtzee4Activity}: java.lang.ClassCastException: android.widget.ImageView
06-10 18:21:31.684: E/AndroidRuntime(705):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-10 18:21:31.684: E/AndroidRuntime(705):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-10 18:21:31.684: E/AndroidRuntime(705):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-10 18:21:31.684: E/AndroidRuntime(705):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-10 18:21:31.684: E/AndroidRuntime(705):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-10 18:21:31.684: E/AndroidRuntime(705):  at android.os.Looper.loop(Looper.java:123)
06-10 18:21:31.684: E/AndroidRuntime(705):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-10 18:21:31.684: E/AndroidRuntime(705):  at java.lang.reflect.Method.invokeNative(Native Method)
06-10 18:21:31.684: E/AndroidRuntime(705):  at java.lang.reflect.Method.invoke(Method.java:521)
06-10 18:21:31.684: E/AndroidRuntime(705):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-10 18:21:31.684: E/AndroidRuntime(705):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-10 18:21:31.684: E/AndroidRuntime(705):  at dalvik.system.NativeStart.main(Native Method)
06-10 18:21:31.684: E/AndroidRuntime(705): Caused by: java.lang.ClassCastException: android.widget.ImageView
06-10 18:21:31.684: E/AndroidRuntime(705):  at michelle.harris.yahztee4.Yahtzee4Activity.PlayGame(Yahtzee4Activity.java:28)
06-10 18:21:31.684: E/AndroidRuntime(705):  at michelle.harris.yahztee4.Yahtzee4Activity.onCreate(Yahtzee4Activity.java:22)
06-10 18:21:31.684: E/AndroidRuntime(705):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-10 18:21:31.684: E/AndroidRuntime(705):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-10 18:21:31.684: E/AndroidRuntime(705):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:37:21.277

You're doing nothing to the view itself. You are currently creating a new ImageView object, and assign the drawable to it, but you're not displaying it anywhere. Either in onCreate get your ImageView by findViewById(..) or in the onMyButtonClick you should be able to cast the View you're getting as parameter to ImageView and then change the drawable / resource depending on your "rndInt".

# java - 在手机本身上为 Android 开发

> ID：10970343
> 
> 赞同：3
> 
> 时间：2012-06-10T16:32:13.173
> 
> 标签：java, android, c

我阅读了有关 AIDE 的信息，它能够直接在 Android 上开发和编译 Java，但是 C 支持呢？我读到 PC Android NDK 仅在将其包装在 dll 中时才添加完整的 C 支持，但较新的版本将允许直接在 C 中开发应用程序而无需任何包装器。Android也有类似的东西吗？我知道 c4droid 并且它是 gcc 插件，但我认为这是为 x86 而不是 ARM 开发的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:38:39.643

使用 Android 原生开发工具包 (NDK)，您可以使用 C 实现应用程序的 *部分内容。* [http://developer.android.com/sdk/ndk/index.html](http://developer.android.com/sdk/ndk/index.html)。如果您编写本机代码，您的应用程序仍会打包到 .apk 文件中，并且它们仍会在设备上的虚拟机内运行。基本的 Android 应用程序模型不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:46:41.327

好吧，我猜你可以在手机上安装 linux（在这种情况下是 Ubuntu）并将你的开发环境放在那里。

检查[https://play.google.com/store/apps/details?id=com.zpwebsites.ubuntuinstall](https://play.google.com/store/apps/details?id=com.zpwebsites.ubuntuinstall)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T09:59:51.673

您可以将 NDK 与 JNI（Java 原生接口）一起使用，以下示例很简单，可以帮助您快速了解 NDK 和 JNI：

[使用 NDK 从 Android 应用调用 C 代码](http://marakana.com/forums/android/examples/49.html)

以下文档包含有关使用 NDK 和 JNI 的更多示例和详细信息

[适用于 Android 的 JNI 示例](http://android.wooyd.org/JNIExample/files/JNIExample.pdf)

您的 C 代码将构建为动态 linux 库 (.so)，并在您的应用程序启动时加载。使用 JNI 将允许您的 JAVA 代码使用库中的 C 函数。使用这种解决方案（从 JAVA 调用 C 函数）非常有用，特别是如果您有复杂且持续时间长的算法。与 Java 相比，在 C 中执行此类算法所需的时间要少得多。

# php - 如何将文件指针移动到php中的上一行？

> ID：10970347
> 
> 赞同：1
> 
> 时间：2012-06-10T16:33:07.540
> 
> 标签：php, while-loop, fseek, feof

有问题的文本文件名为 fp.txt，每行包含 01、02、03、04、05、...10。

```
01
02
...
10 
```

代码：

```
<?php
//test file for testing fseek etc
$file = "fp.txt";
$fp = fopen($file, "r+") or die("Couldn't open ".$file);
$count = 0;
while(!(feof($fp))){ // till the end of file
    $text = fgets($fp, 1024);
    $count++;
    $dice = rand(1,2); // just to make/alter the if condition randomly
    echo "Dice=".$dice." Count=".$count." Text=".$text."<br />";
    if ($dice == 1){
        fseek($fp, -1024, SEEK_CUR);
    }
}
fclose($fp);
?> 
```

所以，因为 fseek($fp, -1024, SEEK_CUR); 无法正常工作。我想要的是如果 Dice == 1，将文件指针设置为上一行，即比当前行高一行。但我认为负值是将文件指针设置为文件结尾，从而在文件实际结尾之前结束 while 循环。

期望的输出是：

```
Dice=2 Count=1 Text=01 
Dice=2 Count=2 Text=02
Dice=2 Count=3 Text=03
Dice=1 Count=4 Text=03
Dice=2 Count=5 Text=04
Dice=2 Count=6 Text=05
Dice=2 Count=7 Text=06
Dice=1 Count=8 Text=06
Dice=1 Count=9 Text=06
Dice=2 Count=10 Text=07
....                                    //and so on until Text is 10 (Last Line)
Dice=2 Count=n Text=10 
```

请注意，只要 dice 为 2，则文本与前一个相同。现在它只是在第一次出现 Dice=1 时停止

所以基本上我的问题是如何将文件指针移动/重新定位到上一行？

请注意 dice=rand(1,2) 只是示例。在实际代码中，$text 是一个字符串，当字符串不包含特定文本时 if 条件为真。

编辑：已解决，两个样本（@hakre 和我的）都按需要工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T16:45:41.183

您从文件中读出了一行，但仅在骰子不是 1 时才转发到下一行。

考虑为此使用[`SplFileObject`](http://php.net/SPLFileObject)，它提供了一个更适合您的场景的界面，我会说：

```
$file = new SplFileObject("fp.txt");
$count = 0;
$file->rewind();    
while ($file->valid())
{
    $count++;
    $text = $file->current();
    $dice = rand(1,2); // just to make alter the if condition randomly
    echo "Dice=".$dice." Count=".$count." Text=".$text."<br />";
    if ($dice != 1)
    {
       $file->next();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:56:57.047

```
<?php
$file = "fp.txt";
$fp = fopen($file, "r+") or die("Couldn't open ".$file);
$eof = FALSE; //end of file status
$count = 0;
while(!(feof($fp))){ // till the end of file
    $current = ftell($fp);
    $text = fgets($fp, 1024);
    $count++;
    $dice = rand(1,2); // just to alter the if condition randomly
    if ($dice == 2){
            fseek($fp, $current, SEEK_SET);
    }
    echo "Dice=".$dice." Count=".$count." Text=".$text."<br />";
}
fclose($fp);
?> 
```

此示例也可以按要求工作。

这些变化是：

```
* Addition of "$current = ftell($fp);" after while loop.
* Modification of fseek line in if condition.
* checking for dice==2 instead of dice==1 
```

# android - ?android:attr/selectableItemBackground

> ID：10970350
> 
> 赞同：15
> 
> 时间：2012-06-10T16:33:37.113
> 
> 标签：android, android-layout, android-xml

在编写我使用的 android 应用程序时

```
android:background="?android:attr/selectableItemBackground" 
```

我尝试寻找包含源的 attr.xml 文件，但我找不到它。请在哪里可以找到任何想法。我在其中找到了一个 attr.xml

> C:\Program Files (x86)\Android\android-sdk\platforms\android-13\data\res\values

但它没有上面提到的属性。谁能引导我在哪里可以找到具有上述属性的 xml 资源？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-09T04:05:06.720

我对 Android 没有那么丰富的经验，但我认为您可以在*"data\res\values\themes.xml"*中找到所需的内容。

如果您在该文件中搜索*"selectableItemBackground"*，您应该会找到以下内容：

```
<style name="Theme">
...
        <item name="selectableItemBackground">@android:drawable/item_background</item>
...
</style> 
```

您还将找到*Theme.Holo.Light*和*Theme.Holo*的相应条目。*"item_background"*、*"item_background_holo_light"* 和 *"item_background_holo_dark"* 可绘制对象将位于*"data\res\drawable"*文件夹中。

希望有帮助！

# javascript - 动作完成通知

> ID：10970352
> 
> 赞同：0
> 
> 时间：2012-06-10T16:33:50.840
> 
> 标签：javascript, jsf

我是JSF的新手。我正在处理一些有很多行的表。我想删除一些行：

```
<h:commandButton action="#{users.deleteSelectedUsers}" onclick="return Confirm('Are you sure?')" value="删除用户">
```

删除后，我想在表格顶部添加一个新行，并带有一些信息的通知。我可以向哪个事件添加该功能？如果我将 <f:ajax> 放在 <h:commandButton> 之间，则不会呈现该表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:01:54.033

您应该添加`<f:ajax render="@form">`以便刷新带有表格的表格...

# c++ - 未定义的对 `mysql_init' 的引用

> ID：10970356
> 
> 赞同：15
> 
> 时间：2012-06-10T16:34:23.490
> 
> 标签：c++, c, linker

我正在尝试在我的新服务器上编译我的程序，但目前它对我不起作用。

错误日志是：

```
rasmus@web01:~/c++$ make test
g++ `mysql_config --cflags --libs` main.cpp logger.cpp cpulogger.cpp -o test
/tmp/ccPaMZUy.o: In function `CPULogger':
/home/rasmus/c++/cpulogger.cpp:7: undefined reference to `mysql_init'
/home/rasmus/c++/cpulogger.cpp:8: undefined reference to `mysql_real_connect'
/home/rasmus/c++/cpulogger.cpp:10: undefined reference to `mysql_get_client_info'
/tmp/ccPaMZUy.o: In function `~CPULogger':
/home/rasmus/c++/cpulogger.cpp:16: undefined reference to `mysql_close'
collect2: ld returned 1 exit status
make: *** [all] Error 1 
```

如您所见，我正在针对 MySQL 进行编译 - 我已检查 mysql.h 是否存在于包含路径中。

我错过了什么？

cpulogger.cpp 在顶部有 #include "cpulogger.h"，然后 cpulogger.h 有这个：

```
#include <iostream>
#include <fstream>
#include <mysql/mysql.h> 
```

编译器不会抱怨缺少 mysql/mysql.h，所以那部分必须工作吗？

### mysql_config 的输出：

```
rasmus@web01:~/c++$ mysql_config --cflags --libs
-I/usr/include/mysql -DBIG_JOINS=1  -fno-strict-aliasing  -g
-L/usr/lib -lmysqlclient -lpthread -lz -lm -lrt -ldl 
```

### 生成文件：

```
all:
    g++ `mysql_config --cflags --libs` main.cpp logger.cpp cpulogger.cpp -o test

test: all
    ./test 
```

这是一个全新的 Ubuntu 服务器安装，上面安装了 mysql-server。

**[解决了]：**

将链接器库放在编译器命令的末尾是可行的。

```
all:
    g++ main.cpp logger.cpp cpulogger.cpp -o test `mysql_config --cflags --libs` 
```

请参阅下面的答案以获取解释。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-10T16:46:23.883

链接器的参数顺序很重要。在列出需要它的文件*后*使用 mysql-config 。链接器将看到 cpulogger.o 需要 mysql_init 并在其后列出的库中查找符号。如果这些库在参数中较早列出，则不会再次搜索它们。

# php - php_redis.dll 在 Windows 中不起作用

> ID：10970359
> 
> 赞同：12
> 
> 时间：2012-06-10T16:34:58.540
> 
> 标签：php, windows, apache, redis

我从这里尝试了这两个文件：[https](https://github.com/nicolasff/phpredis/downloads) ://github.com/nicolasff/phpredis/downloads 。我在 Windows 7 Professional 上使用 64 位 wampserver。看起来 apache 正在尝试加载文件，但不知何故无法正确识别它。这是我在错误日志中看到的：

> PHP 启动：无法加载动态库 'D:/wamp/bin/php/php5.3.13/ext/php_redis.dll' - %1 不是有效的 Win32 应用程序。

有人遇到过类似的问题吗？我们有一个可行的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-09-22T11:45:10.533

以防万一它可以帮助某人，我设法解决了 PHP 7.1.12 安装 32 位 DLL 的错误。

我收到了错误：

```
Warning: PHP Startup: Unable to load dynamic library '.../php_redis.dll'
not a valid Win32 application 
```

但是安装32位版本后，警告消失了。

要知道您使用的是哪种 XAMPP/WAMP 架构，请访问 phpinfo() 并查找值“Architecture”，它位于第四行，并且正如预期的那样具有值*x86*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-04T00:25:10.607

我必须检查`Server API`from`phpinfo()`以决定使用哪个版本

如果是 **Apache 2.0 处理程序（mod_php）**，请使用**线程安全**版本

如果是**CGI**，请使用**非线程安全**版本

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T00:12:10.730

不幸的是，我没有运行 64 位版本的 PHP 来测试这个，但是对于 PHP 5.3，你可以试试[这个 dll](http://code.google.com/p/pecl-win/downloads/detail?name=php_redis-2.1.3-5.3-ts.dll&can=2&q=)。

来自[https://github.com/nicolasff/phpredis/downloads](https://github.com/nicolasff/phpredis/downloads) ( php_redis-2.1.3-5.2-vc6-ts-4350b2a.zip ) 的 Dll 在 PHP 5.2.17 ( *32 位版本*) 上运行良好。

我希望你能解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-11T10:55:31.230

我使用 XAMPP x86 / PHP`7.2.5`所以我需要 redis x86 并且目录是这样的：`C:/xampp/php/ext/`.

[https://pecl.php.net/package/redis/4.1.0/windows](https://pecl.php.net/package/redis/4.1.0/windows)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-11T11:40:38.577

我会将我的答案添加到表格中：

我在带有 PHP 5.5 的 Windows 8 下将这些 dll 用于我的 AMPPS 服务器（WAMP 应该相同）： [https ://pecl.php.net/package/redis/2.2.7/windows](https://pecl.php.net/package/redis/2.2.7/windows)

按照本教程

[https://www.linkedin.com/pulse/using-redis-windows-php-shekhar-joshi](https://www.linkedin.com/pulse/using-redis-windows-php-shekhar-joshi)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-15T11:59:40.237

对我来说，原因是`Redis PHP extension`我使用过的版本。

*   xampp架构：x64
*   php版本：7.4
*   php 类型：ts（线程安全）
*   windows上安装的redis版本：3.0.504

最后`Redis PHP extension`对我有用的版本是：

*   对于 php 7.4
*   最新稳定版本：`php_redis-5.3.4-7.4-ts-vc15-x64` 我从这个[链接下载的](https://pecl.php.net/package/redis/5.3.4/windows)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-25T07:37:40.840

对于带有 PHP5.5.12 的 64 位 Windows 7 wampserver，我遇到了同样的问题，并从 Redis 的链接 dll 二进制文件下面为我工作

[http://windows.php.net/downloads/pecl/releases/redis/2.2.7/](http://windows.php.net/downloads/pecl/releases/redis/2.2.7/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-20T12:48:37.940

我有同样的情况，我正在安装 wamp 32bit，但是我以 64bit 导入了库，但是我不得不重新安装 32bit 版本。

在任务管理器中检查您使用的是哪个版本的 wamp！

# command-line - 环境变量不断变化

> ID：10970360
> 
> 赞同：2
> 
> 时间：2012-06-10T16:35:21.010
> 
> 标签：command-line, environment-variables, jdk1.6

我在 Win 7 中工作。所以我在属性、环境变量中设置了 Path 变量。但是当我在命令行中键入 java 时，它直到我写 set Path=... 并设置完全相同的东西我已经在属性 env 变量窗口中手动设置时才识别它。然后它就起作用了。但是当我再次关闭命令行并重新打开它时，它无法识别 javac。所以每次我打开命令行我都必须设置路径。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:52:38.683

在 Windows 中，从命令行使用 set 只会设置该进程的环境变量。当您从命令行执行它然后关闭它时，您将失去您在那里所做的事情。

您说的是属性、环境变量，但让我完成这些步骤，以便我们在同一页面上。

要确保环境变量“粘住”，请单击“开始”按钮，右键单击“计算机”并选择“属性”。单击高级系统设置，然后单击环境变量... 在出现的对话框中，在系统变量部分下双击路径环境变量。滚动到最后，添加分号，然后添加可执行文件的路径。

您现在必须重新启动任何已经在运行的进程。

# java - 大数模n的快速乘法

> ID：10970361
> 
> 赞同：2
> 
> 时间：2012-06-10T16:35:43.890
> 
> 标签：java, algorithm

> **可能重复：**
> [在 mod 1000000007 问题中需要帮助](https://stackoverflow.com/questions/9169167/need-help-in-mod-1000000007-questions)

我有一组数字，我想计算总乘积模 1000007。例如，如果我的数组包含 1000 个数字，那么我需要计算以下内容。

```
int product = 1;
for(int i=0;i<Array_Max;i++)
  product = product * Array[i] 
```

然后产品模 1000007 = ？

是否有任何算法可以优化上述伪代码？现在由于溢出，我无法存储产品。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T16:42:13.540

使用`long`s 作为产品 - 这足以保存两个整数相乘的结果。

您还需要计算每次迭代的模数，以避免溢出（从数学角度来看，这样做是安全的，因为它不会在最后改变模数 1000007 的结果）。

如果你愿意，你也可以使用`BigInteger`s，但它会慢得多。

# ruby-on-rails - 设计路线/：参数不起作用

> ID：10970365
> 
> 赞同：0
> 
> 时间：2012-06-10T16:36:03.013
> 
> 标签：ruby-on-rails, activerecord, devise

使用设计 2.1.0
我正在尝试向`new registration`页面发送`PricingPlan`模型。
所以在我的路线中，我有：

```
devise_scope :user do
    delete "/logout" => "devise/sessions#destroy"
    get "/login" => "devise/sessions#new"
    get "/signup/:plan" => "devise/registrations#new"
  end 
```

我覆盖了设计注册控制器。在我的 routes.rb 中使用它以使其工作：

```
devise_for :users, :controllers => {:registrations => "registrations"} 
```

在我覆盖设计控制器的**实际**注册控制器中，我有：

```
class RegistrationsController < Devise::RegistrationsController
  view_paths = "app/views/devise"
  def new
    super
    @plan = PricingPlan.find_by_name(params[:plan])
  end 
```

这样默认视图仍然可以设计......
在我`new`的控制器视图中，`registration`我称之为：

```
<h3>You've chosen the <%= @plan.name %> plan.</h3> 
```

我得到这个错误：

```
undefined method `name' for nil:NilClass 
```

另外......在我的`PricingPlan`模型中：

```
class PricingPlan < ActiveRecord::Base
  has_many :users 
```

在我的`User`模型中：

```
class User < ActiveRecord::Base
  belongs_to :pricing_plan 
```

我对rails比较陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:51:20.810

出于某种原因，您的@plan 是空的...

尝试更改下面的行以确保您找到计划...

```
@plan = PricingPlan.find_by_id(1) 
```

如果是这样，您可能试图通过错误的论点来查找...您的数据库中是否有“计划”列？

```
@plan = PricingPlan.find_by_name(params[:______]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T02:07:16.847

当我`raise`在我的注册控制器中执行 a 时，我意识到当我点击 /signup/:plan 时，它并没有达到`registrations controller`我从 devises 获得的 overode `registration controller`。
我找出原因：
因为我已经制作了自己的控制器，所以范围不再设计范围......

所以这是**错误**的：

```
get "/signup/:plan" => "devise/registrations#new" 
```

然而，这是**正确**的：

```
get "/signup/:plan" => "registrations#new" 
```

所以我的那部分路线看起来像这样：

```
 devise_scope :user do
    delete "/logout" => "devise/sessions#destroy"
    get "/login" => "devise/sessions#new"
    get "/signup/:plan" => "registrations#new"
  end 
```

代码中的其他所有内容都保持不变。感谢@gabrielhilal 让我找到控制器。

# c# - SQlite 插入不起作用

> ID：10970367
> 
> 赞同：0
> 
> 时间：2012-06-10T16:36:04.863
> 
> 标签：c#, sqlite

我正在编写一个 C# 数据库 winform 应用程序，但在执行此查询时遇到问题。它向我抛出了这个错误：

```
SQLite error
near "SELECT": syntax error 
```

有人能帮助我吗？感谢您的任何回答或建议。

```
"INSERT into subor(idsubor, idpodfk, pnazovfk, datumpravop, podiel, podield, cislozLV,
datumzaradenia, idmajetok)
values (null, " + comboBox1.SelectedValue.ToString() + ", 
         '" + comboBox2.SelectedValue.ToString() + "', 
         '" + dateTimePicker1.Value.ToString("d. M. yyyy") + "', 
         '" + textBox2.Text + "',
          " + podield.ToString("0.0000", System.Globalization.CultureInfo.InvariantCulture) + ", 
         '" + textBox4.Text + "', 
         '" + dateTimePicker2.Value.ToString("d. M. yyyy") + "', 
              SELECT IFNULL(a, '0') AS idmajetok 
              FROM (SELECT MAX(idmajetok) + 1 AS a FROM subor))"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:05:24.423

您的 C# 字符串/SQLite SQL 组合似乎仍然有些混乱，但我看到的一个可能问题如下：

您正在使用`SELECT`语句来指示列表中的一个值`VALUES`。正如您[在语法图](http://www.sqlite.org/lang_expr.html)中看到的那样，该`SELECT`语句必须用括号括起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:41:30.020

我怀疑一些 SQL 语法问题，我对您的 select 语句进行了一些更改。

请尝试：

```
string sqlInsert = "INSERT into subor(idsubor, idpodfk, pnazovfk, datumpravop, 
podiel,podield, cislozLV, datumzaradenia, idmajetok) values (null, '" + 
comboBox1.SelectedValue.ToString() + "','" + comboBox2.SelectedValue.ToString() + "','" + 
dateTimePicker1.Value.ToString("d.M.yyyy") + "','" + textBox2.Text + "','" + 
podield.ToString("0.0000", System.Globalization.CultureInfo.InvariantCulture) + ",'" + 
textBox4.Text + "','" + dateTimePicker2.Value.ToString("d.M.yyyy") + "','" + "SELECT 
IFNULL(a, '0') AS idmajetok FROM (SELECT MAX(idmajetok) + 1 AS a FROM subor) )');";} 
```

# asp.net-mvc-4 - MVC 4 教程错误

> ID：10970371
> 
> 赞同：0
> 
> 时间：2012-06-10T16:36:34.627
> 
> 标签：asp.net-mvc-4

我目前正在关注[http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-model](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-model)以掌握 MVC 4。

我正在尝试添加 MoviesController，但每当我这样做时，都会收到一条错误消息：

```
Unable to retrieve metadata for 'MvcMovie.Models.Movie'
unrecognized configuration section entityFramework
(C:\Users\User\AppData\Local\Temp\tmp4FFB.tmp line 76) 
```

在此之前我做的最后一件事是更改本页末尾的 Web.config 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:52:51.110

看起来您没有正确设置配置设置。

将连接字符串添加到 web.config 时，需要将其添加到

`<connectionStrings> </connectionStrings>`

元素并确保在添加新控制器之前构建项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:19:15.030

将代码放入

```
<configSections></configSections> 
```

而不是把它放在

```
<connectionStrings></connectionStrings> 
```

那应该可以解决问题

# php - 使用 GET 向服务器发送数据

> ID：10970373
> 
> 赞同：0
> 
> 时间：2012-06-10T16:36:42.077
> 
> 标签：php, iphone, xcode, nsurlconnection

我创建了一个网站，显示我在游戏中的所有高分。我使用 php 编写的脚本将我的 iphone 游戏中的分数发送到我的网站。该脚本有效，因为如果我在浏览器中输入我的应用程序生成的链接，则会添加分数。

但是我想从我的应用程序发送分数。该脚本使用 GET 方法来获取名称、分数等。

这就是我现在拥有的：

```
 NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString]];
NSError * e;
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:&e]; 
```

但它不会向我的服务器发送数据。urlString 是正确的，因为如果我在浏览器中输入我的应用程序生成的链接，则会添加分数。

我怎么解决这个问题，

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:49:51.557

您是否检查网址是否包含无效字符？当您将 url 粘贴到浏览器中时，空格和其他有趣的内容会被浏览器转换为 url 编码值。您可能需要对您的 urlString 进行 url 编码以获得所需的响应。

搜索这个 NSString 方法：`stringByAddingPercentEscapesUsingEncoding:`并使用 NSUTF8StringEncoding 作为参数。

# java - 代表用户输入 capthca 值

> ID：10970378
> 
> 赞同：0
> 
> 时间：2012-06-10T16:37:21.307
> 
> 标签：java, jakarta-ee

我有一种情况：我部署在服务器上的 Java 程序从网站上获取一个页面，该页面有一个验证码图像。图像将显示给最终用户，最终用户将输入验证码的值并将该页面提交给服务器。服务器将该值提交给主网站。

我已经使用 http 客户端尝试过，但在提交时，它说图像值无效。

请帮我。显示用户 capthca 图像的代码

```
HttpClient hc=new HttpClient();
GetMethod gm=new GetMethod("https://abc.com/register");
int sta=hc.executeMethod(gm);
String line=gm.getResponseBodyAsString();

    urlStr="https://abc.com/captchaImage";
    URL url=new URL(urlStr);
    BufferedImage img1 = ImageIO.read(url);
    ImageIO.write(img1, "jpg", out); 
```

向 abc.com 提交请求

```
HttpClient hc=new HttpClient();
PostMethod hm=new PostMethod("https://abc.com/submit");
hm.addParameter("pwd","Asdf@123456" );
hm.addParameter("confirmPwd","Asdf@123456");
hm.addParameter("hintQues","Birth+City");
hm.addParameter("hintAns","fdgf");
hm.addParameter("captchavalue",request.getParameter("cap"));
hm.addParameter("register","Register");
int returnCode = hc.executeMethod(hm);
out.println(hm.getResponseBodyAsString()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T17:22:51.543

我没有分析 abc.com 的注册是如何工作的，但我敢打赌它使用了一些隐藏字段（我在你的代码中没有看到任何参数），或者一个 cookie 来记住向用户显示了哪个验证码，从而验证如果浏览器发送的验证码值是正确的值。

由于您不发送隐藏字段值，并且由于您使用的是全新的 HttpClient 实例，因此您正在向服务器发送一个验证码值，但它无法知道您发送该值是针对哪个验证码，所以无法验证。

尝试重用与从服务器获取注册页面相同的 HttpClient 实例。这样，存储在 HttpClient 状态中的 cookie 将被发送回服务器。

# mysql - 表设计-Mysql

> ID：10970384
> 
> 赞同：0
> 
> 时间：2012-06-10T16:38:28.843
> 
> 标签：mysql, database, database-design, hierarchical-data

让我试着解释一下我正在处理的应用程序的情况，

我有接近 7 个类别，比如说 A、B、C、D、E、F 和 G。这些类别在 DB 端没有任何表。现在用户从这 7 个类别中选择一些类别，比如说 C，所以在类别中C，我还有另一组子类别，即 C1、C2、C3 到 C30。现在假设用户选择 C2，对于 C2 子类别，我在数据库中有一个表，一旦用户通过前端输入所有数据，就会插入该表。现在 C2表有 8 列，即 c2t1id,c2t2....c2t8。它还具有自动增量 id 列，该列为该表的每个插入获取自动增量以及该表的主键。

现在我的问题是，我需要向用户显示他们在所有表中的应用程序中的所有插入。用户可以在所有 7 个类别中插入，每个类别都有子类别 upt0 30，根据现有设计，这接近 210 个表.

现在我的登录表由 id/name/pw 构成。

现在从 db 的角度来看我的设计，我开始觉得这个设计有些缺陷，我开始觉得只是要检索用户的 5 条记录，我需要搜索 200 多个表与长的多选择加入？

我需要一些提示，以说明我应该如何进一步处理。如果需要，我准备重新设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:56:37.247

听起来您肯定需要在继续进行之前检查您的设计。

与其泛泛而谈，不如说具体。当人们不知道数据的细节时，很难推荐数据库设计。

所以，具体告诉我们数据是什么。

编辑：

鉴于您告诉我们您的数据，它看起来像这样：

```
USER
----------------------
ID (PK) INTEGER AUTOINCREMENT NOT NULL
EMAIL (PK) VARCHAR(1000) NOT NULL
FIRST_NAME VARCHAR(50) NOT NULL
LAST_NAME  VARCHAR(50) NOT NULL
ENCRYPTED_PASSWORD ....etc

POST
--------------
ID (PK) INTEGER AUTOINCREMENT NOT NULL
USER (FK) INTEGER NOT NULL
CONTENT TEXT NOT NULL
DATE_POSTED TIMESTAMP NOT NULL
DATE_EDITED DATETIME NOT NULL

POST_CATEGORIES
--------------------
ID (PK) INTEGER AUTOINCREMENT NOT NULL
CATEGORY_ID (FK) INTEGER NOT NULL
POST_ID (FK) INTEGER NOT NULL

CATEGORY (hierarchal table)
------------------------------
ID (PK) INTEGER AUTOINCREMENT NOT NULL
PARENT_ID INTEGER
CATEGORY_NAME VARCHAR(200) NOT NULL 
```

请注意，CATEGORY 表使用的是简单的代理列表模型。其他类型的模型是可能的。有关更多详细信息，请参阅优秀[的在 MySQL 中管理分层数据一](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)文。

使用这种设计，获取用户帖子列表将是：

```
select * from POSTS where USER = (select ID from USER where FIRST_NAME = 'John' and LAST_NAME = 'Doe'); 
```

如果您想添加类别，您也可以加入 POST_CATEGORIES 和 CATEGORY 表。显然这是一个简化的示例，但希望您能看到这种设计如何支持在少数表格中包含数十万或数百万个帖子的数百或数千个类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:41:45.500

是的，那个设计是个失败者。210张桌子？再想想。停止考虑表格和列，并将其表达为您要解决的问题。也许关系数据库在这里不合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T23:41:44.010

每个节点都有一个表的层次结构不是通常的答案 - 我建议查看[这个问题](https://stackoverflow.com/questions/5291054/hierarchical-sql-problem)的答案，看看是否有任何建议适用于您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T23:58:04.727

根据您对@wadesworld 的评论/解释这是一个简单的设计，可能会为您指明正确的方向

我使结构尽可能简单，您可以使用更多列/详细信息来适应您的应用程序，并且我已经展示了一些如何查询数据的示例。

```
TABLE: USERS
ID | USERNAME | PASSWORD

TABLE: CATEGORIES
ID | CATEGORY_ID | NAME

TABLE: POSTS
ID | CATEGORY_ID | DESCRIPTION | USER_ID

// list all top level categories (We use NULL in categories.category_id to indicate it has no parents)
SELECT * FROM categories WHERE category_id IS NULL;

// list all sub categories for category_id = 2
SELECT * FROM categories WHERE category_id=2;

// list parent and child categories, for use in a html select
SELECT parent.id, parent.name, child.id, child.name
  FROM categories AS parent
  JOIN categories AS child ON child.category_id=parent.id
  WHERE parent.category_id IS NULL

// insert a post into category_id=2 for user_id = 1
INSERT INTO posts (category_id, description, user_id)
  VALUES ('2', 'test post', 1);

// select all posts by user with username=tom
SELECT * FROM users
 JOIN posts ON posts.user_id=users.id
 JOIN categories ON categories.id=posts.category_id
 WHERE users.username='tom';

 // count the number of posts made by tom in each category
 SELECT categories.name, COUNT(*)
   FROM users
   JOIN posts ON posts.user_id=users.id
   JOIN categories ON categories.id=posts.category_id
   WHERE users.username='tom';
   GROUP BY categories.name 
```

# mysql - 如何获取 2012061000001 格式的 id

> ID：10970385
> 
> 赞同：0
> 
> 时间：2012-06-10T16:38:32.317
> 
> 标签：mysql

我有以下表格结构，其中有列 vid，我想输入今天的日期，然后是 00001，例如“2012061000001”，下次表格更新时，vid 应该是“20120610000002”，如果明天表格将得到更新，那么 vid 应该是 2012061100003

```
+----+------+-------------+---------+------------+-------------+
| id | vid  | visitorname | company | contact    | whometomeet |
+----+------+-------------+---------+------------+-------------+
|  1 | NULL | rakesh      | godrej  | 9987654123 | abcdef      |
|  2 | NULL | samir       | infosys | 9987654123 | abcdef      |
+----+------+-------------+---------+------------+-------------+ 
```

我们怎样才能做到这一点？

这是我的表结构，我将 id 设置为 auto_increment 我们可以有两个字段 auto_increment

```
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| id          | int(11)      | NO   | PRI | NULL    | auto_increment |
| vid         | varchar(15)  | YES  |     | NULL    |                |
| visitorname | varchar(255) | YES  |     | NULL    |                |
| company     | varchar(255) | YES  |     | NULL    |                |
| contact     | varchar(30)  | YES  |     | NULL    |                |
| whometomeet | varchar(255) | YES  |     | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+ 
```

并触发以下查询，我得到如下结果

插入访问者（vid）值（concat（替换（左（current_timestamp，10），'-'，''），lpad（'1'，'5'，'0'）））；

```
+----+---------------+-------------+---------+------------+-------------+
| id | vid           | visitorname | company | contact    | whometomeet |
+----+---------------+-------------+---------+------------+-------------+
|  1 | NULL          | rakesh      | godrej  | 9987654123 | abcdef      |
|  2 | NULL          | samir       | infosys | 9987654123 | abcdef      |
|  3 | 2012061000001 | NULL        | NULL    | NULL       | NULL        |
+----+---------------+-------------+---------+------------+-------------+ 
```

但问题是每次我都会在 vid 中得到那个 1，如果明天我也运行这个查询，我会得到明天的日期，但后面会是 00001，我想要它 00002。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:46:54.230

我建议您不要像这样组合列 - 它使运行与这些字段相关的查询变得非常痛苦（即效率低下......）

相反，有一个`date`列和一个`vid`列。例如

```
+----+----------+------+-------------+---------+------------+-------------+
| id | date     | vid  | visitorname | company | contact    | whometomeet |
+----+----------+------+-------------+---------+------------+-------------+
|  1 | 20120610 |    1 | rakesh      | godrej  | 9987654123 | abcdef      |
|  2 | 20120610 |    2 | samir       | infosys | 9987654123 | abcdef      |
+----+----------+------+-------------+---------+------------+-------------+ 
```

然后，您可以选择给定日期的事件。

根据您的用例，您甚至可以制作`vid`一个`AUTO_INCREMENT`. （虽然在那个时候，很难区分`id`和`vid`。）

# java - 使用 Spring、Hibernate 和 Spring Transaction 支持为单元测试设置数据库

> ID：10970387
> 
> 赞同：5
> 
> 时间：2012-06-10T16:38:37.257
> 
> 标签：java, spring, hibernate, junit

我想在单元测试中测试 dao 层与我的服务层的集成。所以我需要在我的数据库（hsql）中设置一些数据。对于这个设置，我需要在我的测试用例开始时有一个自己的事务，以确保在开始我的测试用例之前我的所有设置都真正提交到数据库。

所以这就是我想要实现的目标：

```
// NotTranactional
public void doTest {
  // transaction begins
  setup database
  // commit transaction

  service.doStuff() // doStuff is annotated @Transactional(propagation=Propagation.REQUIRED)
} 
```

这是我不工作的代码：

```
<bean id="dataSource"
    class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
    p:driverClassName="org.hsqldb.jdbcDriver"
    p:url="jdbc:hsqldb:mem:posmail" p:username="sa"
    p:password="" />

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
        <list>        
            <value>de.diandan.asynch.modell.receipt.Position</value>
            <value>de.diandan.asynch.modell.receipt.Receipt</value>
        </list>
    </property>    

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.connection.useUnicode">true</prop>
            <prop key="hibernate.connection.characterEncoding">UTF-8</prop>
            <prop key="hibernate.connection.charSet">UTF-8</prop>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
            <!-- Enable Hibernate's automatic session context management 
            <prop key="current_session_context_class">thread</prop> -->

            <!-- Disable the second-level cache  -->
            <prop key="cache.provider_class">org.hibernate.cache.NoCacheProvider</prop>

            <prop key="hibernate.show_sql">false</prop>

        </props>
    </property>
</bean>

<bean id="transactionManager" 
      class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

我的测试用例

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"/asynchUnit.xml"})
@DirtiesContext(classMode=ClassMode.AFTER_EACH_TEST_METHOD)
public class ReceiptServiceTest implements ApplicationContextAware {
  @Autowired(required=true)
  private UserHome userHome;

  private ApplicationContext context;

  @Before
  @Transactional(propagation=Propagation.REQUIRED)
  public void init() throws Exception {
    User user = InitialCreator.createUser();
    userHome.persist(user);
  }

  @Test
  public void testDoSomething() {
    ...
  }
} 
```

导致此异常：

```
org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
    at org.springframework.orm.hibernate3.SpringSessionContext.currentSession(SpringSessionContext.java:63)
    at org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:687)
    at de.diandan.asynch.modell.GenericHome.getSession(GenericHome.java:40)
    at de.diandan.asynch.modell.GenericHome.persist(GenericHome.java:53)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
    at $Proxy28.persist(Unknown Source)
    at de.diandan.asynch.service.ReceiptServiceTest.init(ReceiptServiceTest.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我不知道围绕设置数据库获取事务的正确方法是什么。

我尝试了什么：

```
@Before
@Transactional(propagation=Propagation.REQUIRED)
public void setup() {
  setup database
} 
```

-> Spring 似乎没有在 @Before-annotated 方法中启动事务。除此之外，这不是我真正想要的，因为我的测试类中有很多方法需要稍微不同的设置，所以我需要几个初始化方法。

```
@Transactional(propagation=Propagation.REQUIRED)
public void setup() {
  setup database
}

public void doTest {
  init();

  service.doStuff() // doStuff is annotated @Transactional(propagation=Propagation.REQUIRED)
} 
```

--> init 似乎没有在事务中开始

我不想做的事情：

```
public void doTest {
  // doing my own transaction-handling
  setup database
  // doing my own transaction-handling

  service.doStuff() // doStuff is annotated @Transactional(propagation=Propagation.REQUIRED)
} 
```

--> 开始混合弹簧事务处理，我自己的似乎很痛苦。

```
@Transactional(propagation=Propagation.REQUIRED)
public void doTest {
  setup database
  service.doStuff()
} 
```

--> 我想测试尽可能真实的情况，所以我的服务应该从一个干净的会话开始，并且没有打开任何事务

那么为我的测试用例设置数据库的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T17:55:02.550

添加以下注释可以解决问题：

```
@TransactionConfiguration(transactionManager="transactionManager", defaultRollback=false)
@Transactional 
```

这是生成的完整配置：

```
@TransactionConfiguration(transactionManager="transactionManager", defaultRollback=false)
@Transactional
@RunWith(SpringJUnit4ClassRunner.class)
@ConnextConfiguration(locations={"/asynchUnit.xml"})
@DirtiesContext(classMode=ClassMode.AFTER_EACH_TEST_METHOD)
public class ReceiptServiceTest implements ApplicationContextAware { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T19:58:51.950

对于面向弹簧的测试，您可以使用 JUnit 的 spring runner：

```
@RunWith(SpringJUnit4ClassRunner.class) 
```

记录在这里：

[http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch10s03.html](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch10s03.html)

您可能感兴趣的部分是您可以使用以下注释对方法进行注释：

```
@Rollback(false)
@Test
public void testProcessWithoutRollback() {
    // ...
}

@BeforeTransaction
public void beforeTransaction() {
    // logic to be executed before a transaction is started
} 
```

和

```
@AfterTransaction
public void afterTransaction() {
    // logic to be executed after a transaction has ended
} 
```

你甚至可以使用类似的东西

```
@NotTransactional 
@Test
public void testProcessWithoutTransaction() {
    // ...
} 
```

表示您不想对其应用交易。但请注意[此](http://static.springsource.org/spring/docs/3.2.1.RELEASE/spring-framework-reference/html/testing.html#integration-testing-annotations)文档，其中包含以下警告：

> 从 Spring 3.0 开始，不推荐使用 @NotTransactional 以支持将非事务性测试方法移动到单独的（非事务性）测试类或 @BeforeTransaction 或 @AfterTransaction 方法。作为使用 @Transactional 注释整个类的替代方法，请考虑使用 @Transactional 注释单个方法；这样做允许在同一个测试类中混合使用事务和非事务方法，而无需使用@NotTransactional。

# amazon-ec2 - Which Amazon Web Service is right for sending emails?

> ID：10970396
> 
> 赞同：0
> 
> 时间：2012-06-10T16:39:29.697
> 
> 标签：amazon-ec2, amazon-web-services

I don't want to run my own mailserver and the application I'm developing at the moment requires emails to be send to users:

*   when they register (activation email)
*   a cron is run every 3 minutes and checks to see which users recieved a private message during this time and sends an email notification alerting them
*   when they request a new password
*   weekly newsletter

In all these cases the emails will be composed of just plain text and short in size. So the reasons given by Amazon to use SES over SNS doesn't apply to me.

```
Q: How is Amazon SES different from Amazon SNS?

    Amazon Simple Email Service (Amazon SES) is for applications that need to send arbitrary communications via email. Amazon SES supports custom email header fields, and many MIME types.

    By contrast, Amazon Simple Notification Service (Amazon SNS) is for messaging-oriented applications, with multiple subscribers requesting and receiving "push" notifications of time-critical messages via a choice of transport protocols, including HTTP, Amazon SQS, and email. The body of an Amazon SNS notification is limited to 8192 characters of UTF-8 strings, and is not intended to support multimedia content. 
```

My main concern is which service will allow me to send as many emails as I need. In the SES tab on AWS console, it says you are limited to sending 200 emails per a 24 hour period.

I need to send emails depending on need. It can be 0 emails or a million (if the app gets popular). Will Simple Notification Service allow that? Which service is right for this use-case? Or will I be better off setting up my own mail server?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T07:41:22.383

You should go with SES, because it's made for your purpose.

After you've verified your email adress or domain you can **request production access** and start sending up to 10,000 emails per 24-hour period. SES will automatically calculate (and rise) your sending limit once you started sending emails.

Take a look at [Amazon Simple Email Service Developer Guide](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/Welcome.html) for further information :)

# jsp - 如何创建自定义 URL 以支持用户句柄。

> ID：10970397
> 
> 赞同：-1
> 
> 时间：2012-06-10T16:39:46.113
> 
> 标签：jsp, tomcat, servlets

我有一个网站，其中有一个类似 xyz.com/abc.jsp?user=5 的 URL

现在如果这个用户的 id 为 5 ; 想要创建一个像 deepakagra 这样的句柄，以便他可以通过 xyz.com/deepakagra 访问他的个人资料；我怎样才能实现它？

我在tomcat上使用jsp，servlet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:42:43.170

您必须将“deepakagra”解析为页面的 GET 参数，然后进行数据库查找以找到该用户名的 ID 并获取您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:43:56.597

由于您有 servlet，您始终可以创建 servlet 并将 web.xml 中的 servlet-mapping 定义为“deepakagra”，这会将您的请求转发到 abc.jsp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T19:43:25.437

如果我理解正确，您不想在 GET 中使用参数。当你点击 localhost:8080/profile/deepakagra 时，如果它映射到模式，它应该调用这个 servlet

```
@WebServlet(name="profile", urlPatterns={"/profile/*"} )
public class ProfileServlet extends HttpServlet { 
....

protected final String getProfileId(HttpServletRequest request ){
        String base = request.getPathInfo();
        String id = null ;
        if( base.split("/").length >= 2 )
          id = base.split("/")[1] ;
        return id ;
      } 
```

然后在您的 GET/POST 方法中调用 getProfileId 并获取 ID。您从数据库中提取它，进行您需要的处理，然后转发到 JSP。

注意：此代码未经测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T17:08:01.137

我使用了 tuckey 的 urlrewrite。在这里，我们可以轻松地创建一个可以实现上述目标的规则。

# objective-c - 如果子视图拒绝超级视图作为拖动目标

> ID：10970398
> 
> 赞同：5
> 
> 时间：2012-06-10T16:39:53.683
> 
> 标签：objective-c, macos, drag-and-drop, osx-lion, nsview

考虑一个带有子视图 ( )`parent`的视图 ( `child`)。两者都注册了拖拽类型`NSFilenamesPboardType`。

`parent`只对图像文件和`child`音频文件感兴趣。如果他们检测到相应类型的文件，`draggingEntered:`则返回`NSDragOperationCopy`. 如果没有，他们返回`NSDragOperationNone`。

`child`重叠`parent`，当拖动到达 时，无论是否对拖动感兴趣`child`，`parent`都会收到一条消息。`draggingExited:``child`

如果不想要，我怎样才能`parent`收到阻力？`child`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:04:35.553

如果我做对了，您应该致电：

```
[self.superview yourmethod]; 
```

在孩子的功能。

如果孩子从父母那里继承，您可以调用：

```
[super yourmethod]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T18:59:21.973

您可以在这里做几件事：

1.  正如@Thomas 提到的，您可以在子视图中实现逻辑以确定是否应将拖动事件转发到父视图并在适当时转发事件。

2.  您可以从接收拖动消息（`[childView unregisterDraggedTypes]`）中取消注册子视图，然后您可以在父视图中实现所有拖动逻辑。本质上，这个想法是计算拖动的类型和位置以及它是否与子视图相交。如果它确实与子视图相交，则为子视图应用拖动逻辑。否则，为父视图应用拖动逻辑。您可能需要实施`draggingUpdated:`以完成此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:36:36.910

您可以考虑将父母作为唯一注册 NSFilenamesPboardType 的人。

和 UIResponderChain 一样，为每个子视图创建一个类别

```
- (NSView*) dragTest:(id< NSDraggingInfo >)sender; 
```

如果返回值为 nil，则表示子视图（及其子视图）不希望处理拖动事件。

现在回到父视图，当 draggingEntered: 触发时，计算位置并找出它在哪个视图上，调用 dragTest: 来检查相应的子视图是否希望处理它。让返回的非空视图处理事件，否则在父视图中处理。

如果您有许多级别的子视图，此方法将很有帮助。

# android - 使用 NetworkInfo 程序时总是报告网络不可用

> ID：10970399
> 
> 赞同：1
> 
> 时间：2012-06-10T16:40:21.123
> 
> 标签：android

我写了一个程序来检查网络是否可用。这是我的简单代码：

```
 public boolean isNetworkAvailable() {
   Context context = getApplicationContext();
      ConnectivityManager connectivity=ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
   if (connectivity == null) {
  boitealerte(this.getString(R.string.alert),"getSystemService rend null");
   } else {
  NetworkInfo[] info = connectivity.getAllNetworkInfo();
  if (info != null) {
     for (int i = 0; i < info.length; i++) {
        if (info[i].getState() == NetworkInfo.State.CONNECTED) {
           return true;
          }
       }
    }
 }
   return false;
   } 
```

我在我的 Android 手机上运行它，它总是返回 false，但网络可用，我可以拨打电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:43:22.747

状态 NetworkInfo.State.CONNECTED 告诉您是否有数据连接（通过 wifi 或移动设备。不是“通话”电话连接。

# filtering - 获取噪声样本向量的频率

> ID：10970400
> 
> 赞同：1
> 
> 时间：2012-06-10T16:40:34.260
> 
> 标签：filtering, arduino, frequency, noise-reduction

我主要需要一个通用算法，然后我将其移植到我的系统（Arduino 板）上，但我很高兴得到继续研究其他方向的提示；

我有一组大约 650 个样本，覆盖 5 秒，代表一个周期信号，但噪声很大；样本来自 TAOS230 光传感器，信号是基于血流的人体皮肤透明度。

我需要主要/主要信号的频率，这实际上是人类的脉搏。示例看起来类似于此[https://www.dropbox.com/s/fw196r6yf1awhrh/untitled2.bmp](https://www.dropbox.com/s/fw196r6yf1awhrh/untitled2.bmp)

在这里，您有大约 5k 个样本的转储[https://www.dropbox.com/s/efwvyn5oec7ixgg/samples.txt](https://www.dropbox.com/s/efwvyn5oec7ixgg/samples.txt)

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:06:17.580

我经常为 arduino 做的事情是使用一个函数来平均输入数据，比如

newx 包含新的样本数据

```
 x = (9 * x +newx ) /10 
```

这会抑制信号，还要注意焊接不良也与高噪声水平有关，也要检查一下。

下一步是定义实际平均值，然后您可能会计算出高于/低于多少次以检索频率，我会通过将其定义为 -n below 或 +n above 来做到这一点。这是一个有点模糊的实现，但会起作用。（否则，如果你不使用与平均值的距离 n，你会在平均值中得到许多误报。

使函数只计算伪代码中的状态变化：

```
#// counting state changes
if ( state > avg_state + n ) and (oldstate = -1)  {statecount++ : oldstate = +1 } 
if ( state < avg_state - n ) and (oldstate = +1)  {statecount-- : oldstate = -1 } 
```

它可能有点简单（没有 FFT），但通常简单的事情效果很好。

# java - 您将如何为体育节目编写深度图和阵容？

> ID：10970405
> 
> 赞同：0
> 
> 时间：2012-06-10T16:41:20.007
> 
> 标签：java, arraylist

我需要一点概念上的帮助。我正在尝试制作一个小型棒球应用程序。在棒球中，有一个深度图表，其中包含一个球队的所有球员的位置。我还需要创建一个只有在各自深度图表顶部的球员的阵容。最好（最有效的方法）如何去做。我担心我的工作解决方案是原始的（我还是很新，所以如果它没用我很抱歉）

我所拥有的是：

```
 private List<Player>[] depthChart = new ArrayList[9]; // 0 catcher, 1 pitcher, etc
private ArrayList<Player> lineup = new ArrayList<Player>(); // 0 of depthChart only 
```

游戏计划是解析 depthChart 数组并确保只有第一个条目可以进入队列。我必须建立约束和逻辑，以确保你不能有重复，并确保保持阵容顺序。但我不禁想到有更好的方法。

我知道这无济于事，所以如果你想忽略这个。但是，如果那里有更聪明的人，我会喜欢一些提示和指导。你不需要为我编码。我只需要提示如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:43:16.433

我会尝试 a `Map`，其中键是位置枚举，值是`Set`可以`Players`扮演该位置的 a 。给出`Player`一个序数值深度，以便您可以按此排序。

```
public enum Position {
    PITCHER, CATCHER, FIRST, SECOND, SHORT, THIRD, LEFT, CENTER, RIGHT
}

public class Player {
    private String name;
    private Position position;
    private int depth;  
    // be sure to properly override equals and hash code to eliminate duplicates  
} 
```

# java - 扩展 ArrayList 以支持事件

> ID：10970411
> 
> 赞同：1
> 
> 时间：2012-06-10T16:41:48.647
> 
> 标签：java, generics, arraylist, extends

我正在尝试扩展 Java ArrayList 以支持此示例中描述的事件： [http ://www.exampledepot.com/egs/java.util/CustEvent.html](http://www.exampledepot.com/egs/java.util/CustEvent.html)

问题是 java 在以下行中报告*“无法对非静态类型 MyEvent 进行静态引用”*：

```
public interface MyEventListener extends EventListener {
    public void myEventOccurred(MyEvent evt);
} 
```

我认为这与泛型有关，但我真的不知道如何解决这个问题。有人可以帮助我吗？

这是我正在尝试做的全部来源：

```
public class ArrayList<E> extends java.util.ArrayList<E> {

    private static final long serialVersionUID = 1L;

    // Declare the event. It must extend EventObject.
    public class MyEvent extends EventObject {

        private static final long serialVersionUID = 1L;

        public MyEvent(Object source) {

            super(source);
        }
    }

    // Declare the listener class. It must extend EventListener.
    // A class must implement this interface to get MyEvents.
    public interface MyEventListener extends EventListener {
        public void myEventOccurred(MyEvent evt); //Error occurs here
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:48:01.433

正如其他用户所指出的，您可以在他们自己的文件中执行所有类和接口，然后您就不会有问题 - 这是一种更好的方法。如果您打算使用内部类和接口，那么您需要声明它们`static`：

```
public class ArrayList<E> extends java.util.ArrayList<E> {

    private static final long serialVersionUID = 1L;

    // Declare the event. It must extend EventObject.
    public static class MyEvent extends EventObject {

        private static final long serialVersionUID = 1L;

        public MyEvent(Object source) {

            super(source);
        }
    }

    // Declare the listener class. It must extend EventListener.
    // A class must implement this interface to get MyEvents.
    public static interface MyEventListener extends EventListener {
        public void myEventOccurred(MyEvent evt); //Error occurs here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T16:47:18.283

有一个更复杂的解决方案和一个更简单的解决方案。更简单的一个：不要在这里使用内部类或接口；根本没有必要，它们只会使事情复杂化。顺便说一句，为什么您的课程与核心课程的名称相同？如果这样编译（我猜是这样），那么所有人都会感到非常困惑。

编辑：在你的链接中，这些类或接口都不是内部的，所以你抄错了。同样，将每个类和接口放在自己的文件中。有时您会想要使用内部类，但这绝对不是其中之一。

# matlab - 在 MatLab 中从十六进制转换为浮点数

> ID：10970415
> 
> 赞同：-1
> 
> 时间：2012-06-10T16:42:22.503
> 
> 标签：matlab, binary, numbers

我正在使用一个向我发送十六进制值的设备，我需要将这些值转换为他的真实浮点值。在这里你可以看到转换表：

```
01 1111 1111 1111  --> 1.99975g
01 1111 1111 1110  --> 1.99950g
...
...
00 0000 0000 0001  --> 0.00025g
00 0000 0000 0000  --> 0.00000g
11 1111 1111 1111  --> -0.00025g
...
...
10 0000 0000 0001  --> -1.99975g
10 0000 0000 0000  --> -2.00000g 
```

我做了一个 LookUpTable 来解决我的问题，但我只是想知道在 MatLab 中是否有更好的方法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:51:18.650

如果您的二进制表示形式存储为变量中的字符串`b`，这将打印您要查找的内容：

```
integer_part = bin2dec(b(2));
fraction_part = bin2dec(b(4:end)) * 2^-12;

value = integer_part + fraction_part;

if b(1) == '1'
    value = -2 + value;
end

disp(value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:45:03.967

如果没有关于使用的二进制表示的更多信息，这是我能得到的最接近的值：

```
%# values stored as strings
b = [ ...
  '01111111111111'
  '01111111111110'
  '00000000000001'
  '00000000000000'
  '11111111111111'
  '10000000000001'
  '10000000000000'
];

%# convert to numbers
val = sum(bsxfun(@times, b-'0', [-2 0.5.^(0:size(b,2)-2)]), 2); 
```

结果：

```
>> fprintf('%.5f\n', val)
1.99976
1.99951
0.00024
0.00000
-0.00024
-1.99976
-2.00000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T07:01:40.573

我认为@zellus 是对的。这是对 2 的恭维的一种变体。它使用 14 位的“字节”大小，然后在转换为整数（称为索引）后乘以 2/8192 的比例因子。这会将索引值 8192 映射到 2g。像@Amro 一样，这种方法有小的舍入误差，但我希望它能更好地向您展示正在发生的事情（它*可能*在计算上也更快，我无法测试它，因为我没有 MATLAB 许可证）

步骤是

1.  如果传入号码有标记 1，则该号码为负数。否则，它是积极的。无论如何放弃哨兵号码。
2.  将二进制数转换为整数
3.  如果整数为负数，则减 1
4.  将整数乘以比例因子 2/8192。

将此应用于您的数据会产生

```
INCOMING      PROCESS SENTINEL       RAW     INDEX       SCALED
01 1111 1111 1111 --> +1 1111 1111 1111 --> +8191 -->  8191 -->  1.99976g
01 1111 1111 1110 --> +1 1111 1111 1110 --> +8190 -->  8190 -->  1.99951g
...
00 0000 0000 0001 --> +0 0000 0000 0001 -->    +1 -->     1 -->  0.00024g
00 0000 0000 0000 --> +0 0000 0000 0000 -->    +0 -->     0 -->  0.00000g
11 1111 1111 1111 --> -0 0000 0000 0000 -->    -0 -->    -1 --> -0.00024g
...
10 0000 0000 0001 --> -1 1111 1111 1110 --> -8190 --> -8191 --> -1.99976g
10 0000 0000 0000 --> -1 1111 1111 1111 --> -8191 --> -8192 --> -2.00000g 
```

仅从外观上看，自然比例因子似乎是 0.00025。01 1111 1111 1111 是否有可能应该是 2.04775g？

我假设您正在尝试与 2G 到 -2G 规模的加速器（或其他设备）交互。如果文档说 2G 到 -2G，他们可能已经将 2.04775G 到 -2.05G 的真正全范围四舍五入。

如果您不熟悉它，请查找两个赞美。这是很酷的东西。二进制数实际上将自己添加到其中。

编辑：我在第一步中遗漏了一个很大的地方。如果第一位是一个，您还需要不是每个位。

# string - 自动完成的尝试与三元搜索树？

> ID：10970416
> 
> 赞同：18
> 
> 时间：2012-06-10T16:42:26.023
> 
> 标签：string, algorithm, data-structures, autocomplete, trie

我经历了尝试和三元搜索树，我对它们有一些疑问。我已经用谷歌搜索了答案，但我无法得到具体的答案。所以，这是我的问题。

1.  如果尝试空间效率低且 TST 结合了 BST 和尝试的优点，这是否意味着实际上根本不使用尝试？

2.  假设 TST 用于自动完成，..在谷歌的情况下如何工作？我的意思是实际上我们没有一组固定的单词等，..那么如何构建 TST 的树？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-10T17:14:04.500

尝试和三元搜索树代表时间/空间权衡。如果您的字母表中有 k 个符号，则 trie 中的每个节点都包含 k 个指针以及一个额外的位，用于判断该节点是否对单词进行编码。查找长度为 L 的单词总是需要时间 O(L)。三元搜索树为每个节点存储三个指针，加上一个字符和一个位，用于判断该节点是否对一个词进行编码。查找长度为 L 的单词需要时间 O(L log k)。（如果你有一个静态三元搜索树，你可以使用[权重平衡树](http://en.wikipedia.org/wiki/Weight-balanced_tree)来构建 TST ，这将查找时间缩短到 O(L + log k)，但插入的代价非常高。）

对于 trie 中的每个节点都使用其大部分子节点的情况，Trie 比三叉树搜索树的空间效率和时间效率要高得多。如果每个节点存储的子节点相对较少，则三叉搜索树的空间效率要高得多。通常来说，尝试比三元搜索树快得多，因为需要的指针间接更少。

所以在排序上，没有一种结构严格来说比另一种更好。这取决于存储的单词。

稍微混淆一下，简洁的尝试开始成为上述两种方法的可行替代方案。尽管查找时间往往要慢得多，但它们的空间利用率比尝试更好。同样，这取决于应用程序它们是否会比其他两个选项更好或更差。

至于如何构建它们 - 尝试和三元搜索树都支持单个单词的有效插入。它们不需要预先从一组固定的单词中构建出来。

希望这可以帮助！

# machine-learning - Weka 下朴素贝叶斯分类器使用的相似度度量

> ID：10970420
> 
> 赞同：0
> 
> 时间：2012-06-10T16:43:02.357
> 
> 标签：machine-learning, similarity, bayesian, metric

我想知道Weka下朴素贝叶斯分类器使用的相似度度量。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:26:22.393

朴素贝叶斯不使用任何度量。它是一个概率分类器

# android - Android 鼠标光标监听器，如 OnTouchListener

> ID：10970432
> 
> 赞同：3
> 
> 时间：2012-06-10T16:44:49.317
> 
> 标签：android, mouse, ontouchlistener

在 Android 上使用触摸输入时，我可以使用 OnTouchListener 在我的视图中获取用户按下位置的坐标。连接鼠标后，同样的侦听器可用于捕获鼠标移动，但它需要按住鼠标左键。

当鼠标光标移动到我的视图上时，是否有任何侦听器发送消息，而没有按下任何按钮？我没有发现像 OnMouseCursorListener 或类似的任何明显的东西，但它似乎是这样的基本功能，我想我错过了一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T17:00:13.610

从 android 4.0 开始，您可以通过 View.setOnHoverListener() 接收鼠标悬停事件。

检查[http://developer.android.com/sdk/android-4.0.html](http://developer.android.com/sdk/android-4.0.html)

在“悬停事件”部分。

直接链接：http: [//developer.android.com/reference/android/view/View.OnHoverListener.html](http://developer.android.com/reference/android/view/View.OnHoverListener.html)

# sqlite - SQLite + 搜索栏 + uitableview

> ID：10970435
> 
> 赞同：0
> 
> 时间：2012-06-10T16:45:53.683
> 
> 标签：sqlite, uitableview, uisearchbar

我想将 SQlite 与 uisearchbar 和 uitableview 一起使用。有任何例子。我找到了许多带有 uitableview 的 Uisearchbar 和带有 uitableview 的 sqlite 的示例，但没有看到任何混合三个的示例。

如果可能的话，请告诉我任何链接。或示例代码

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:36:27.337

当我们在表格视图中有数据并搜索它时也是如此。我们在搜索后从数据库中选择数据以显示在表格视图中。

# .htaccess - .htaccess 在 URL 中带有 `#`

> ID：10970436
> 
> 赞同：3
> 
> 时间：2012-06-10T16:45:54.623
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, urlencode

我想映射`/tagged/c#`到`/?tagged=c#`我的网站上。显然，`#`服务器不会看到，所以我将它的 URL 编码为`%23`. 这是我正在使用的 .htaccess：

```
RewriteBase /
RewriteEngine On
RewriteRule ^tagged/(.*)$ /?tagged=$1 [NC] 
```

如您所料，这有效，通过以下查询`C#`：

```
/?tagged=C%23 
```

然而这些都没有，都给出了传递的查询`C`

```
/tagged/C%23
/tagged/C%23moretextthatgetslost 
```

我认为`#`它被解释为文字哈希，因此在途中丢失了。

我需要做什么才能使这些第二种情况起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T16:51:26.570

原来我需要使用[`[B]`](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_b)标志：

```
RewriteBase /
RewriteEngine On
RewriteRule ^tagged/(.*)$ /?tagged=$1 [NC,B] 
```

解释文档：

> 使用 B 标志，它将改为映射`/C%2b%2b`到`/index.php?show=/C%2b%2b`.

# php - Zend_Registry 不工作！设置并获取

> ID：10970439
> 
> 赞同：2
> 
> 时间：2012-06-10T16:46:09.390
> 
> 标签：php, zend-framework

我有一个 Zend MVC 应用程序。我之前在应用程序中将其他变量设置为 Zend Registry，它工作得很好。然而这一次它不起作用。当我调用操作 setmanuel 时，脚本会回显测试。但是，通过第二个请求调用 get manuel，我收到一个脚本警告，告诉我 manuel 未在注册表中设置。我现在正在鬼混几个小时。它快把我逼疯了。为什么 Zend_Registry 不保存我的值？

```
public function setmanuelAction(){
    Zend_Registry::set("manuel","test");
    $manu = Zend_Registry::get("manuel");
    echo $manu;
}
public function getmanuelAction(){
    $manu = Zend_Registry::get("manuel");
    echo $manu;
} 
```

我感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:00:22.617

您正在寻找的是会话（这里就是可能`Zend_Session`）。注册表在单个请求期间始终有效。在任何后续请求中，注册表都完全独立于以前的请求。

# jquery - 获取下面重叠内容的JQuery手风琴而不是下推

> ID：10970443
> 
> 赞同：0
> 
> 时间：2012-06-10T16:46:43.497
> 
> 标签：jquery, layout, accordion

有谁知道如何让 JQuery 的手风琴重叠下面的内容而不是向下推？我有一个菜单项手风琴，我想相应地显示和隐藏内容。（我可能会使用 JQuery 来隐藏和显示使用动画的 Div 而不是使用这条路线，但我很好奇，到目前为止已经投入了大量时间寻找答案）。

手风琴的较高 z-index 和下面元素的绝对/固定位置不起作用。

有任何想法吗？

![在此处输入图像描述](../Images/6ad5592e062d697fadd177f15f6a483d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:52:21.557

试着把你的手风琴放进去`div`，然后设置它的以下属性`div`：

```
div 
{
height:150px;
overflow:visible;
} 
```

看看[这个例子](http://www.w3schools.com/cssref/playit.asp?filename=playcss_overflow)。

# ajax - 远程选择，控制器需要更多的表单数据

> ID：10970454
> 
> 赞同：0
> 
> 时间：2012-06-10T16:48:29.140
> 
> 标签：ajax, ruby-on-rails-3.1

我在一个表单中有两个选择字段。每次这些选择字段之一更改值时，应更改表单的其余部分。我对选择字段使用了以下代码：

```
<%= f.collection_select :model1, Model1.all, :id, :name, "data-remote" => true, "data-url" => "/model3/get_rest_form"  %>
<%= f.collection_select :model2, Model2.all, :id, :name, "data-remote" => true, "data-url" => "/model3/get_rest_form"  %> 
```

现在的问题是，model3 控制器需要两个 select 字段的值来制定对发送给它的 Ajax 请求的响应，但它只获取刚刚在 params 中更改的 select 字段的值。

如果更改了 model1 字段，我会得到：

```
params = {"model3"=>{"model1"=>"2"}} 
```

如果更改了 model2 字段，我会得到：

```
params = {"model3"=>{"model2"=>"3"}} 
```

但在这两种情况下我都需要以下内容。

```
params = {"model3"=>{"model1"=>"2", "model2" => "3"}} 
```

我怎么能意识到这一点？

也许有一种方法可以在更改选择字段时发送所有表单数据。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:51:15.530

[阅读jquery_ujs.js](https://github.com/rails/jquery-rails/blob/master/vendor/assets/javascripts/jquery_ujs.js)文件后，我想出了以下解决方案。显然，选择标记的 data-params 属性中存在的数据被添加到使用 ajax 请求发送到控制器的数据中，并且在准备 ajax 请求的最开始时，'ajax:before ' 事件在 select 元素上触发。我使用此事件从表单中读取数据，对其进行序列化并将其放入 select 元素的 data-params 标记中。然后这些数据会自动添加到 ajax 请求中。这是我的代码：

```
$(".add_form_data").on('ajax:before', function(event){
    var form = $(this).closest('form');
    var formData = form.serialize();
    $(this).data("params",formData);
}); 
```

剩下要做的就是将`add_form_data`类添加到两个选择元素中。

```
<%= f.collection_select :model1, Model1.all, :id, :name, "data-remote" => true, "data-url" => "/model3/get_rest_form" :class => "add_form_data"  %>
<%= f.collection_select :model2, Model2.all, :id, :name, "data-remote" => true, "data-url" => "/model3/get_rest_form" :class => "add_form_data" %> 
```

# android - Android中快速变化的位图

> ID：10970455
> 
> 赞同：2
> 
> 时间：2012-06-10T16:48:42.453
> 
> 标签：android, android-canvas

图片链接：http: [//imgur.com/a/3Q2jQ](http://imgur.com/a/3Q2jQ)

我正在使用 Canvas 为我的 android 应用程序制作动画。我有 onDraw 方法，其中一切都在移动或旋转，并且每个动画都很完美。但是，当我尝试更改第二张图片上的动画时，它会卡在那里 1-2 秒，然后它会继续播放第三张图片。如您所见，该应用程序是关于天气的，每个条件都是动画。

有什么想法可以解决这个问题吗？

这是 onDraw 方法中的第一张图片：

```
else {
        if (unknown == null) {
            recycleBitmap();
            condition = 0;
            unknown = BitmapFactory.decodeResource(getResources(),
                    R.drawable.unknown);
            width = getLayoutParams().width;
            height = getLayoutParams().height;
            width = width - (width / 7);
            height = height - (height / 7);
            unknown = Bitmap.createScaledBitmap(unknown, (int) width,
                    (int) height, true);
            initWeatherIcon();
        }
        drawUnknown1((getLayoutParams().width - unknown.getWidth()) / 2,
                ((getLayoutParams().height - unknown.getHeight()) / 2),
                canvas); 
```

这是第三张图片的代码：

```
else if (condition == 6) {
        matrix.reset();
        matrix.setTranslate(getLayoutParams().height / 2,
                icon.getHeight() / 3);
        matrix.postRotate(x, getLayoutParams().width / 2
                + getLayoutParams().width / 4,
                icon.getHeight() / 3 + icon.getHeight() / 2);
        x++;
        RectF rect4 = new RectF(100, 100, 100, 100);
        matrix.mapRect(rect4);
        canvas.drawBitmap(icon, matrix, new Paint());

        drawCloudSun(
                0,
                getLayoutParams().height
                        - (getLayoutParams().height / 2 + getLayoutParams().height / 4),
                canvas);
        invalidate(); 
```

有 if-else 调用动画。当应用程序启动时，它被称为 unknown.png，但是当条件更改为 Cloudy 时，它会进入适当的 if-else 语句并出现问题。

# css - 基本 CSS：向左浮动和内联 div

> ID：10970456
> 
> 赞同：0
> 
> 时间：2012-06-10T16:49:26.503
> 
> 标签：css, layout, flow

我已经[捕获了我设置的 CSS 两列布局的插图](http://screencast.com/t/m9754etFU)，同时对橙色容器使用以下规则：

```
.embedded_post{
    float: left;
    width: 46%;
    margin-right: 20px;
    padding: 10px;
    display: inline-block;
} 
```

可以看出，右列的第二个橙色容器阻止了左列的第二个橙色容器浮动到左上角的框。

这显然是因为`float:left`自动授予具有块级流的元素。

如何让左列的第二个框位于第一个框的下方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:55:43.660

左边第二个 div 的宽度小于其他 div，这可能与它有关。此外，与您的（所需）结构的组合`margin-right`并不是我会做的。事实上，`margin-right`根据 div 的父 div 的设置`embedded_post`，可能会搞砸你的结构并导致定位问题。

当我尝试时它工作正常。

ps 请记住，在 Firefox 中，填充*会增加 div 的宽度/高度，*而这在其他浏览器中不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:08:46.417

您可以将列包装在另一对 div 中，以便在右列中浮动不会影响在左侧浮动？

```
<div id='left_column'>
  <div class='embedded_post'></div>
  <div class='embedded_post'></div>
</div>

<div id='right_column'>
  <div class='embedded_post'></div>
  <div class='embedded_post'></div>
  <div class='embedded_post'></div>
</div> 
```

CSS：

```
#left_column, #right_column {
  float:left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T16:53:12.960

你自己回答了，有几个选择：

1.  通过授予`div`具有内联级别流的元素来欺骗自己，即指定`display: inline`（不推荐）。
2.  将标记更新为更具语义性并更改布局以符合所需的结果，例如将`div`s替换为`span`s（首选）。

# c++ - 在这个算法中动态空间分配实际上是如何工作的？

> ID：10970457
> 
> 赞同：0
> 
> 时间：2012-06-10T16:49:41.143
> 
> 标签：c++, dynamic-arrays, dynamic-allocation

出于学校目的，我自己使用模板对动态分配的数组进行了处理。

虽然我要问的东西有效，但我不知道如何以及为什么，我已经达到了我需要知道的地步。

```
template <typename TElement>
DynamicArray<TElement>::ensureCapacity () {
    if (capacity >= elemNumb) {
        return; //we have space to store the values
    }
    //we need to allocate more space for the values
    TElement *auxArray = myArray;
    //create space to hold more numbers
    capacity = capacity * 2;
    myArray = new TElement[capacity];
    //copy the values
    for (int i = 0; i < size; i++) {
        myArray[i] = auxArray[i];
    }
    //release the memory
    delete[] auxArray;
} 
```

我需要知道：`TElement *auxArray = myArray;`这是如何工作的？是否使用指针，元素是否被一一复制？我需要了解它是如何工作的，这样我才能弄清楚我的算法的复杂性。我不介意有人告诉我复杂性，但我正在寻找的真正答案是它是如何工作的？

另外`myArray = new TElement[capacity];`我在删除旧的之前这样做`myArray`会删除旧的吗？还是它仍然以一种或另一种形式漂浮在内存中的某个地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:53:30.340

这个

```
TElement *auxArray = myArray; 
```

只是意味着`auxArray`指向任何`myArray`指向的东西。没有其他任何东西的复制，它只是一个指针副本。

这个

```
myArray = new TElement[capacity]; 
```

意味着`myArray`现在指向一个新的、动态分配的 TElement 数组。该表达式不会删除任何内容。但是`auxArray`是指向`myArray`这个分配之前指向的东西，所以当你删除时`auxArray`，你释放了最初指向的资源`myArray`。

# java - String.replaceAll 变体

> ID：10970460
> 
> 赞同：0
> 
> 时间：2012-06-10T16:50:05.553
> 
> 标签：java

有没有一种快速的方法可以用从匹配模式派生的数据替换所有出现的模式？

例如，如果我想用相同的数字替换字符串中所有出现的数字，并用 0 填充到固定长度。

在这种情况下，如果长度为 4，`ab3cd5`则将变为`ab0003cd0005`。

我的想法是使用 StringBuilder 和 2 种模式：一种会获取所有数字，另一种会获取非数字的所有内容，并通过找到匹配项的索引将匹配项附加到构建器。

我认为可能有更简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:02:56.267

`appendReplacement`使用and之后，您可能可以实现您的目标`appendTail`，如下所示：

导入 java.util.regex.Pattern；导入 java.util.regex.Matcher；

```
String REGEX = "(\\d+)";
String INPUT = "abc3def45";
NumberFormat formatter = new DecimalFormat("0000");

Pattern p = Pattern.compile(REGEX);
Matcher m = p.matcher(INPUT); // get a matcher object
StringBuffer sb = new StringBuffer();
while(m.find()){
    m.appendReplacement(sb,formatter.format(Integer.parseInt(m.group(1))));
}

m.appendTail(sb);

String result = sb.toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:15:44.870

如果您确切知道要在任何单个数字之前填充多少个零，那么这样的事情应该可以工作：

```
String text = "ab3cd5";
text = text.replaceAll("\\d","0000$0");
System.out.println(text); 
```

否则：

```
Pattern pattern = Pattern.compile("\\d+");
Matcher matcher = pattern.matcher(text);

StringBuffer result = new StringBuffer();
while(matcher.find()){
    matcher.appendReplacement(result, String.format("%04d", Integer.parseInt(matcher.group()))); 
}
matcher.appendTail(result);
System.out.println(result); 
```

格式`%04d`表示：一个整数，由零填充，长度为 4。

# xml - 使用 xslt 将子节点附加到 xml 中的单个父节点

> ID：10970462
> 
> 赞同：0
> 
> 时间：2012-06-10T16:50:29.817
> 
> 标签：xml, xslt

谢谢回复。要求略有变化。给定的xml结构是：

```
<A id=1>
<b>data1</b>
</A>
<A id=1>
<b>data2</b>
</A>

<A id=2>
<b>data1</b>
</A>
<A id=1>
<b>data3</b>
</A>
<A id=2>
<b>data5</b>
</A> 
```

生成的 xml 应该是：

```
<A id=1>
<b>data1</b>
<b>data2</b>
<b>data3</b>
</A>
<A id=2>
<b>data1</b>
<b>data5</b>
</A> 
```

请让我知道，我怎样才能做到这一点。提前致谢。

我有一个像下面这样的 xml 结构：

```
<A>
<a1></a1>
</A>
<A>
<b1></b1>
</A>
<A>
<c1></c1>
</A> 
```

我希望生成的 xml 为：

```
<A>
<a1></a1>
<b1></b1>
<c1></c1>
</A> 
```

任何人都可以帮助我使用 xslt 实现这一目标。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:15:30.527

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="A[1]">
  <xsl:copy>
    <xsl:apply-templates select="@* | node() | following-sibling::A/node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="A[position() &gt; 1]"/> 
```

# mysql - 组合具有相似ID和相同日期的行mysql

> ID：10970463
> 
> 赞同：1
> 
> 时间：2012-06-10T16:50:34.700
> 
> 标签：mysql

需要一些有关 mysql 语法的帮助。我有数千笔交易的清单。

会员 ID 对个人来说是唯一的。前 7 位数字是家庭独有的（后两位数字是针对家庭中的特定个人的）。

我需要按家庭分组并将他们的交易添加到家庭的主要成员（01），只要它们是在同一日期完成的。

**前**

```
ID                Date    Amt

 1\. 888888801         0715    $100
 2\. 888888802         0715    $50 
 3\. 888888802         0720    $300
 4\. 777777701         0715    $250
 5\. 666666601         0630    $75
 6\. 666666604         0630    $100 
 7\. 555555502         0701    $99 
```

2配1，6配5。

**后**

```
 - ID                Date    Amt

 1\. 888888801         0715    $150
 3\. 888888802         0720    $300
 4\. 777777701         0715    $250
 5\. 666666601         0630    $175
 7\. 555555502         0701    $99 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:55:07.017

假设您无法重新设计这些表格，并且如果我没听错的话，这可能就是您想要的：

```
SELECT LEFT(`id`,7) as Family, `date`, SUM(`amt`) as `amt`
FROM mytable 
GROUP BY LEFT(`id`,7), `Date` 
ORDER BY `id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:24:02.047

那这个呢

```
SELECT id, date, sum(amount) FROM myTable
GROUP BY date, LEFT(`id`,7) 
```

## [演示](http://sqlfiddle.com/#!2/30588/3)

# ruby - 从 ruby 中的字符串中提取 img 源链接

> ID：10970468
> 
> 赞同：0
> 
> 时间：2012-06-10T16:51:17.127
> 
> 标签：ruby, parsing, web-scraping, nokogiri

我有这个字符串

```
#<Fletcher::Model::Amazon alt="You Are Not a Gadget: A Manifesto (Vintage)" border="0" element="img" height="240" id="prodImage" onload="if (typeof uet == 'function') { if(typeof setCSMReq=='function'){setCSMReq('af');setCSMReq('cf');}else{uet('af');uet('cf');amznJQ.completedStage('amznJQ.AboveTheFold');} }" onmouseout="sitb_doHide('bookpopover'); return false;" onmouseover="sitb_showLayer('bookpopover'); return false;" src="http://ecx.images-amazon.com/images/I/51bpl1wA%2BaL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg" width="240"> 
```

我只想要 src 属性中的链接：

```
http://ecx.images-amazon.com/images/I/51bpl1wA%2BaL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg" 
```

如何解析此字符串以获取链接

下面是相关函数的列表

```
module Fletcher
  module Model
    class Amazon < Fletcher::Model::Base
      # A regular expression for determining if a url comes from a specific service/website
      def self.regexp
        /amazon\.com/
      end

      # Parse data and look for object attributes to give to object    
      def parse(data)
        super(data)

        case doc
        when Nokogiri::HTML::Document
          # Get Name
          self.name = doc.css("h1.parseasinTitle").first_string

          # Get Description
          self.description = doc.css("div#productDescriptionWrapper").first_string    

          # Get description from meta title if not found
          self.description = doc.xpath("//meta[@name='description']/@content").first_string if description.nil?

          # Get Price
          parse_price(doc.css("b.priceLarge").first_string)

          # Get Images
          self.images = doc.xpath("//table[@class='productImageGrid']//img").attribute_array
          self.image = images.first
        end            
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:45:10.293

```
require 'open-uri'

x = %Q{#<Fletcher::Model::Amazon alt="You Are Not a Gadget: A Manifesto (Vintage)" border="0" element="img" height="240" id="prodImage" onload="if (typeof uet == 'function') { if(typeof setCSMReq=='function'){setCSMReq('af');setCSMReq('cf');}else{uet('af');uet('cf');amznJQ.completedStage('amznJQ.AboveTheFold');} }" onmouseout="sitb_doHide('bookpopover'); return false;" onmouseover="sitb_showLayer('bookpopover'); return false;" src="http://ecx.images-amazon.com/images/I/51bpl1wA%2BaL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg" width="240">}

url = URI.extract(x)

puts url[2] 
```

输出：

```
http://ecx.images-amazon.com/images/I/51bpl1wA%2BaL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA240_SH20_OU01_.jpg 
```

希望这可以帮助。我只是碰巧上周需要能够做到这一点，然后查了一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T22:17:40.023

在那种情况下，我相信它会是： fletchedProduct.image[:src]

# c++ - 如果加载到应用程序中，DLL 中的函数地址是否可以更改？

> ID：10970472
> 
> 赞同：5
> 
> 时间：2012-06-10T16:51:40.317
> 
> 标签：c++, function, dll, memory-address

我反汇编了一个 DLL 并看到了一些功能。我找到了我需要的功能，它的地址是`0x10001340`.

如果我将这个 dll 加载到我的应用程序中，这个地址会保持不变吗？那么我是否可以通过我的应用程序中的地址调用该函数？

我之所以问是因为我不确定：如果加载此 dll 时，主应用程序中的某些函数已经具有相同的地址怎么办？因此，也许 dll 中的函数可以在加载等时更改地址。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T16:54:36.220

在 Windows 上，dll 有一个优先加载地址，但如果加载器注意到虚拟地址空间的这一部分已被使用，它就能够更改所有这些引用。这个过程称为“变基”。

“默认”基地址是在链接时指定的（`/BASE`使用 Microsoft 链接器），如果您打算将 dll 与另一个具有相同基地址的 dll 一起使用，则将其设置为不同于默认值可能会很有用；这加快了加载过程，因为加载程序不必在每次加载时重新设置其中一个 dll。（IIRC 还有一些工具可以重新构建现有的 dll 并将结果保存在磁盘上）

请记住，从 Windows Vista 开始，使用指定标志编译的 dll 总是加载到随机基地址以避免某种漏洞。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T16:58:51.483

您最终得到相同地址的可能性极小*。*DLL 链接器的默认 /BASE 参数是 0x10000000，这就是您的入口点最终到达该地址的方式。但是有*许多*使用默认设置链接的 DLL，实际上只有一个可以在该地址加载。稍后加载的所有其他内容都需要重新设置。

你可以为 /BASE 提供一个更好的值，但是它永远不能保证你得到你要求的加载地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T17:07:35.767

正如 Matteo 所说，DLL 有一个首选的加载地址（在[IMAGE_OPTIONAL_HEADER](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680339%28v=vs.85%29.aspx)结构的 ImageBase 字段中指定）。当系统尝试加载 DLL 时，如果可能，它将在此地址加载它（除非启用了地址空间随机化）并且不需要“修补”。如果它无法在首选地址加载，则重新定位 DLL，这将需要修补 DLL 中的任何绝对引用以补偿重新定位。

因此，回答您的问题：不能保证 DLL 将在其首选地址加载。一旦加载后续加载将不会加载 DLL 的更多副本，因此地址不会改变。但是，一旦卸载（DLL 被引用计数），就不能保证下次它会在相同的地址加载。

# linq-to-entities - Linq To Entities Subquery，限制子查询中的结果

> ID：10970475
> 
> 赞同：0
> 
> 时间：2012-06-10T16:52:34.287
> 
> 标签：linq-to-entities, subquery, limit

我正在为我正在关注的 Minor 完成我的最后一项任务，我正在尝试检索一个艺术家列表，每个艺术家都有多个专辑，每个专辑都有多个曲目。在这些选择中，我的任务是只为每张专辑选择一定数量的曲目，而不是全部。这就是我卡住的地方。

到目前为止，我的尝试让我明白了这一点：

```
var result = (from ta in db.ARTIEST
join tb in db.ALBUM on ta.ARTIEST_ID equals tb.ARTIEST_ID
join tc in db.TRACK on tb.ALBUM_ID equals tc.ALBUM_ID
where tb.TITEL == param && (
         from td in db.TRACK
         where td.ALBUM_ID == tb.ALBUM_ID
         select td.ALBUM_ID
         ).Take(3).Contains(tb.ALBUM_ID)
select ta); 
```

基本上，我的问题是，如何使用 Linq to Entities 构建一个查询，将 2 个表连接到 Artiest 表，同时将第 3 个表中的选定结果限制为 3 条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:34:11.597

最简单的是在专辑和曲目之间使用导航属性：

```
from artist in db.Artists
join album in db.Albums on artist.ARTIEST_ID equals album.ARTIEST_ID
where album.TITEL == param
select new { artist, album, FirstTracks = album.Tracks.Take(3) } 
```

# java - 在 Java (eclipse) 中导入 API

> ID：10970484
> 
> 赞同：2
> 
> 时间：2012-06-10T16:53:27.547
> 
> 标签：java, eclipse, api, google-app-engine, import

我正在尝试将我在网上找到的 API - joda time - 导入我的程序。

我已经下载了这些文件，将它们放在我的源文件夹中，但显然由于它没有集成到我的程序中，它们将无法工作。

我花了很多时间在谷歌上搜索不同的方法（也许我正在寻找错误的东西？）以及在 eclipse 中随机做一堆不同的事情（我正在用 eclipse 开发），其中包括这个词“打包”或“导入”，无济于事。

我不知道是否值得一提，但我的程序是用谷歌应用引擎构建的，他们所有的东西都以很好的 com.xxx.xxxx 格式组织，我认为最终我需要把我的东西放进去- 我只是不知道怎么做。

无论如何，对不起，如果这是一个可笑的微不足道的问题，并提前感谢任何提供帮助的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T16:56:51.007

您只需要将 joda-time jar 文件放在项目的 WEB-INF/lib 文件夹中。此文件夹包含所有必须随应用程序提供的库，并由 Eclipse 自动添加到项目的构建路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:17:27.507

由于您使用的是 Eclipse，因此您可以使用库函数来添加外部包。

*   右键单击您的项目，然后选择*Build Path* --> *Configure Build Path*。
*   单击顶部的*Libraries按钮，然后单击**Add External JARs...*按钮。
*   在您的 JODA 目录中选择 JAR 文件。

如果您使用的是 Eclipse 部署工具，这将自动将您的 JAR 文件打包到您的 Web 应用程序中。如果它没有自动执行此操作，请将相同的 JAR 文件添加到您的 WEB-INF/lib 目录中（将其复制到您的项目中）。

# android - 将文件从文件夹上传到 FTP 服务器。我有两个错误。我该如何解决这些错误？

> ID：10970486
> 
> 赞同：0
> 
> 时间：2012-06-10T16:53:43.427
> 
> 标签：android, ftp, ftp-client

我正在开发一个 FTP 客户端。

我已经创建了一个基于此的 FTP 客户端：[Android How to upload a file via FTP](http://hoang17.com/posts/android/android-how-to-upload-a-file-via-ftp) With this code。可以将包含字符串的 txt 文件发送到我的 FTP 服务器。

我的本地文件夹“/sdcard/ftp/”中有图片

现在我正在尝试更改代码，文件夹中的所有 jpg 文件都可能由 ftp 客户端发送。

```
 package de.android.datenuebertragung;

import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.IOException;

import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPConnectionClosedException;
import org.apache.commons.net.ftp.FTPFile;

import android.app.Activity;
import android.util.Log;

public class FTPManager extends Activity{
    FTPClient con = new FTPClient();{

    try
    {
        con.connect("host");
        if (con.login("user", "password"))
        {

            // in application never use hardcoded paths
            File folder = new File("/sdcard/ftp/");
            File tempFile = null;
            FTPFile[] tempFTPFile = null;

            //get all files in folder
            for(String fileInDir : folder.list()){
                tempFile = new File(fileInDir);
                tempFTPFile = con.listNames(tempFile.getFiles);

                if(tempFTPFile!=null || tempFTPFile.length<=0){
                    con.upload(fileInDir);
                }
            }

        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }

    try
    {
        con.logout();
        con.disconnect();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
}
} 
```

我在这些标记的单词中有两个错误（getFiles 和上传）：

1.  tempFTPFile = con.listNames(tempFile.getFiles ***)*** ;
2.  反对。***上传***（fileInDir）；

con.listNames(tempFile.getFiles) 中的错误是：getFiles cannot be resolve or is not a field

con.upload(fileInDir) 中的另一个错误是： FTPClient 类型的方法 upload(String) 未定义

我已经尝试了一整天来解决这个问题。希望可以有人帮帮我。也许发布更改和工作的代码。我是 Android 编程的绝对新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:09:49.997

如果您直接粘贴了代码并且没有拼写错误，那么它应该是`getFiles()`而不是`getFiles`在这一行中......

```
tempFTPFile = con.listNames(tempFile.getFiles); 
```

另外，我怀疑默认传输模式将是 ASCII（这通常是任何 FTP 客户端软件的情况）。

试着打电话...

```
con.setFileType(FTP.BINARY_FILE_TYPE); 
```

...在尝试上传之前。

# sqlite - SQLite - 没有 GIS 扩展的矩形交叉点的索引

> ID：10970490
> 
> 赞同：3
> 
> 时间：2012-06-10T16:54:27.470
> 
> 标签：sqlite, indexing, intersection

我有一个相当大的 SQLite 数据库来存储一些地理数据。我不能使用 GIS 扩展，而且我也希望一切都可以与其他数据库一起使用。

我的表结构如下：

```
tbl(float fromLon, float fromLat, float toLon, float toLat, binary binaryData) 
```

我在数据库中存储了一些二进制数据（某物的多边形），并以 fromLon、fromLat -> toLon、toLat 的形式存储它的边界框。

接下来我有一些查询，比如“给我这个区域内的所有二进制数据（多边形）（reqLlon1，reqLat1）-（reqLon2，reqLat2）”。一个示例查询是：

```
SELECT binaryData
FROM tbl WHERE
(reqLon1 < toLon) AND
(reqLat1 < toLat) AND
(reqLon2 > fromLon) AND
(reqLat2 > fromLat) 
```

问题是，我似乎无法找到正确的索引来加快速度.. 一个简单的索引，比如

```
idx1(fromLon,fromLat,toLon,toLat) 
```

行不通。我用 MySQL（相同的布局，相同的索引）尝试了同样的事情，它声明（解释 select ..）它只使用了索引长度的一半..

有人可以给我一个提示索引应该是什么样子吗？或者它可能是，这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:02:38.980

您应该考虑使用[R*Tree 模块](http://www.sqlite.org/rtree.html)。

> R-Tree 是一种特殊的索引，专为进行范围查询而设计。R-Trees 最常用于地理空间系统，其中每个条目都是一个具有最小和最大 X 和 Y 坐标的矩形。给定一个查询矩形，R-Tree 能够快速找到包含在查询矩形内或与查询矩形重叠的所有条目。这个想法很容易扩展到三个维度，以便在 CAD 系统中使用。R-Trees 也可用于时域范围查找。

# python - Matplotlib：imshow 中的 set_data 对绘图没有影响

> ID：10970492
> 
> 赞同：15
> 
> 时间：2012-06-10T16:54:41.273
> 
> 标签：python, matplotlib

我有一个奇怪的错误，没有你的帮助我无法解决。在 matplotlib 中设置图像后，`imshow`即使我使用方法更改它，它也始终保持不变`set_data`。看看这个例子：

```
import numpy as np
from matplotlib import pyplot as plt

def newevent(event):
    haha[1,1] += 1
    img.set_data(haha)
    print img.get_array()    # the data is change at this point
    plt.draw()

haha = np.zeros((2,2))
img = plt.imshow(haha)
print img.get_array()        # [[0,0],[0,0]]
plt.connect('button_press_event', newevent)
plt.show() 
```

在我绘制它之后，该方法`set_data`不会改变图中的任何内容。有人可以解释我为什么吗？

**编辑**

只是添加了几行来指出我真正想做的事情。我想在按下鼠标按钮后重绘数据。我不想删除整个数字，因为如果只有一件事发生变化，那就太愚蠢了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-18T05:36:39.670

问题是因为您在第一次调用后没有更新像素缩放。

当您实例化`imshow`时，它会从初始数据中设置`vmin`和，并且永远不会再接触它。`vmax`在您的代码中，它将`vmin`和都设置`vmax`为 0，因为您的数据 ,`haha = zeros((2,2))`处处为零。

您的新事件应包括使用 自动缩放，或通过设置为您喜欢的内容来`img.autoscale()`明确设置新的缩放条款。`img.norm.vmin/vmax`

设置新的函数`vmin`是`vmax`：

```
img.set_clim(vmin=new_vim, vmax=new_vmax) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T17:07:43.357

这是否给了您期望的输出？

```
import numpy as np
from matplotlib import pyplot as plt

haha = np.zeros((2,2))
img = plt.imshow(haha)
print img.get_array()        # [[0,0],[0,0]]
haha[1,1] += 1

img.set_data(haha)    
img = plt.imshow(haha)       # <<------- added this line  
print img.get_array()        # [[0,0],[0,1]]
plt.show() 
```

当我两次显示绘图时（一次在更改为 之前`haha`，最后一次），它确实发生了变化。

# sql-server - 将右外连接转换为 EF 中的 Linq 查询

> ID：10970493
> 
> 赞同：0
> 
> 时间：2012-06-10T16:54:43.737
> 
> 标签：sql-server, linq, entity-framework

我想将下面的 SQL 查询转换为 linq 查询，但我很困惑：

```
SELECT *
FROM dbo.Vahed
INNER JOIN dbo.VahedMahsol ON dbo.Vahed.VahedId = dbo.VahedMahsol.VahedId
RIGHT OUTER JOIN dbo.Mahsol ON dbo.VahedMahsol.MahsolId = dbo.Mahsol.MahsolId 
```

我写了这段代码：

```
vaheds =
(
  from i in db.spGetVahedByWhatWhere(what, wherestr, int.Parse(whattype), new Guid(shahrid))
  join gr in db.GorohSenfis on i.GorohSenfiId equals gr.GorohSenfiID
  join ct in db.Contacts on i.VahedId equals ct.VahedId
  join vm in db.VahedMahsols on i.VahedId equals vm.VahedId
  select i
)
.ToList(); 
```

但我不知道如何转换

```
RIGHT OUTER JOIN dbo.Mahsol ON dbo.VahedMahsol.MahsolId = dbo.Mahsol.MahsolId 
```

到 linq 查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:32:05.803

首先，您可以重写 SQL 查询以使用 LEFT OUTER JOIN 而不是 RIGHT OUTER JOIN（因为这更容易转换为 LINQ）：

```
SELECT *
FROM dbo.Mahsol
LEFT OUTER JOIN dbo.VahedMahsol ON dbo.Mahsol.MahsolId = dbo.VahedMahsol.MahsolId
INNER JOIN dbo.Vahed ON dbo.VahedMahsol.VahedId = dbo.Vahed.VahedId 
```

现在您可以像这样在 LINQ 中转换上面的查询：

```
vaheds = (
  from m in db.Mahsols
  join vm1 in db.VahedMahsols on m.MahsolId equals v.MahsolId into vmgroup
  from vm in vmgroup.DefaultIfEmpty()
  join i in db.spGetVahedByWhatWhere(what, wherestr, int.Parse(whattype), new Guid(shahrid))
    on vm.VahedId equals i.VahedId
  join gr in db.GorohSenfis on i.GorohSenfiId equals gr.GorohSenfiID
  join ct in db.Contacts on i.VahedId equals ct.VahedId
  select i
).ToList(); 
```

我无法对此进行测试，但我希望它有效。

# sql - MS Access 2007 更新/插入或合并或联合

> ID：10970494
> 
> 赞同：1
> 
> 时间：2012-06-10T16:54:55.580
> 
> 标签：sql, ms-access-2007, sql-update, union

我一直在寻找如何做一些在 MS Access 2007 中应该很容易做的事情。

我有一个主表 items_moved，它按类型、按天跟踪收到的文件数。基本结构是：

ID（自动编号）、驱动器（文本）、类型（文本）、日期（DateTime）、file_count（编号）、file_size（编号）

典型数据如下：

```
1777, F:\snaps, pics, 6/09/2010, 66, 151616131
1778, F:\snaps, pics, 6/10/2010, 5, 464864
1779, G:\pics, pics, 6/09/2010, 58, 45645646
1780, G:\pics, pics, 6/10/2010, 70, 123456667 
```

我有一个具有完全相同数据结构的临时表。临时表是通过从 items_moved 表的最后一天（包括）开始并查找新内容来生成的。

典型数据如下：

```
1, F:\snaps, pics, 6/10/2010, 366, 6531616131
2, F:\snaps, pics, 6/11/2010, 5, 464864
3, G:\pics, pics, 6/10/2010, 70, 123456667
4, G:\pics, pics, 6/11/2010, 56, 123645964 
```

我要做的就是将临时表附加到主表上，以便：

1.  没有重复（基于驱动器和日期）
2.  如果临时表具有匹配的驱动器和日期以及更大的值，它将覆盖主表
3.  如果该行存在于临时表中但不存在于主表中，则将其附加到 main 的末尾。

结果将在 items_moved 表中，该表将记录 1-1776 不变，但现在结束如下：

```
1777, F:\snaps, pics, 6/09/2010, 66, 151616131         (Unchanged)
1778, F:\snaps, pics, 6/10/2010, 366, 6531616131       (Updated temp was larger)
1779, G:\pics, pics, 6/09/2010, 58, 45645646           (unchanged)
1780, G:\pics, pics, 6/10/2010, 70, 123456667          (unchanged)
1781, F:\snaps, pics, 6/11/2010, 5, 464864             (added)
1782, G:\pics, pics, 6/11/2010, 56, 123645964          (added) 
```

我已经尝试了我能想到的所有关于加入的变体。

我可以获得具有匹配日期的行，因此我可以将其用于更新语句。我无法从临时表中获取 items_moved 表中日期不匹配的行，因此无法运行插入。

最后一点是当用户从访问数据库请求报告时，将其作为 VB 操作的一部分执行。

这是一个片段

```
INSERT INTO items_moved (drive, type, file_date, file_count, file_size) 
 SELECT 'F:\snaps','pics', temp_table.created, Count(temp_table.created),
  Sum(temp_table.size) FROM temp_table where temp_table.drive = 'F:\snaps' 
  GROUP BY temp_table.created 
```

这有效，但只是添加到表格的末尾。我留下了重复的问题。我确信有一种方法可以即时对表进行重复数据删除，但这似乎是一种浪费。我发现了一些关于使用**union**的提示，但没有关于如何使用 union 更新联合中的一张表的信息。

任何输入将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:23:06.060

似乎匹配在驱动器、类型和日期上，所以对于新记录，也许：

```
INSERT INTO items_moved (drive, type, file_date, file_count, file_size) 
SELECT t.drive, type, t.file_date, t.file_count, t.file_size 
FROM temp_table t
LEFT JOIN items_moved m
ON t.Drive = m.Drive AND t.Type = m.Type and t.file_date = m.file_date
WHERE m.ID Is Null 
```

更新将需要第二个查询：

```
UPDATE items_moved  m
INNER JOIN temp_table t
ON t.Drive = m.Drive AND t.Type = m.Type and t.file_date = m.file_date
SET m.file_count = t.file_count, m.file_size = t.file_size
WHERE m.file_size < t.file_size 
```

或者那里。你是这个意思吗？

# php - 尝试使用 curl 下载文件，其中文件下载被 javascript 阻止？

> ID：10970498
> 
> 赞同：0
> 
> 时间：2012-06-10T16:56:15.797
> 
> 标签：php, file, curl

我正在尝试使用 curl 下载 url 为的 torrent 文件

[http://torcache.net/torrent/006DDC8C407ACCDAF810BCFF41E77299A373296A.torrent](http://torcache.net/torrent/006DDC8C407ACCDAF810BCFF41E77299A373296A.torrent)

您会注意到，在进入页面后，文件的下载通过 javascript 被阻止了几秒钟，我想知道在使用 curl 和 php 时是否有办法绕过这个？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:18:40.530

该文件未通过 javascript 阻止，如果您请求该文件，这只是一条非正式消息。然后重定向是通过 javascript 完成的。

您可以自己模拟请求，这里的重要部分是您添加 HTTP Referrer 请求标头。例子：

```
$ curl -I -H 'Referer: http://torcache.net/torrent/006DDC8C407ACCDAF810BCFF41E77299A373296A.torrent' http://torcache.net/torrent/006DDC8C407ACCDAF810BCFF41E77299A373296A.torrent
HTTP/1.1 200 OK
Server: nginx/1.3.0
Date: Sun, 10 Jun 2012 17:13:59 GMT
Content-Type: application/x-bittorrent
Content-Length: 10767
Last-Modified: Sat, 09 Jun 2012 22:17:03 GMT
Connection: keep-alive
Content-Encoding: gzip
Accept-Ranges: bytes 
```

推荐人是要检查的一件事，请注意 HTTP 规范中的错字，请参阅 Wikipedia。

# c# - ASP.net C# Gridview ButtonField onclick 事件

> ID：10970501
> 
> 赞同：2
> 
> 时间：2012-06-10T16:56:25.097
> 
> 标签：c#, asp.net, data-binding, onclick

我为网上商店类型的项目编写了一个 ASP 代码。有一种方法可以将 ProductID 添加到 cookie 并在产品数量上加 1。另一种方法读取 cookie，将 cookie 转换为数据表并将其放入 gridview。这个gridview 基本上就是shoppingcart.aspx 页面。

我现在需要的是一种将按钮字段添加到该 gridview 的方法，我可以在其中添加一个 ++ 按钮（如产品页面上的添加到购物车按钮），普通的 asp 按钮采用 a`onclick="methodname"`但这些在 gridview 中没有。

```
add1ToShoppingCart(string productId)
{[...]shoppingCartCookie[productId] = (amount + 1).ToString();} 
```

这是我用于所有 ++ 按钮的代码。它需要 button.id (buttonID=productID)。所以我需要一种方法让所有按钮都是相同的图像，但是 buttonID 必须数据绑定到 productID 以便它可以以某种方式执行该方法（使用某种`onclick=""`）。

在过去的几个小时里，我一直在寻找和搜索，但我似乎找不到任何东西。过去我在stackoverflow上找到了很多答案，所以我希望这里有人可以提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T17:18:42.057

您可以使用模板字段：

```
 <asp:TemplateField ItemStyle-Width="33px" ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Middle"
                            ShowHeader="false" HeaderStyle-Height="40px">
                            <ItemTemplate>
                                <asp:ImageButton ID="btnAddToCard" runat="server" ImageUrl="~/Images/btnAddToCard.png" CausesValidation="false"
                                    CommandName="AddToCard" CommandArgument='<%# Eval("ID") %>'
                                    />
                            </ItemTemplate>
                            <HeaderStyle Height="40px"></HeaderStyle>
                            <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="33px"></ItemStyle>
                        </asp:TemplateField> 
```

并在您背后的 C# 代码中创建 gridview 的以下事件并执行您想要的操作：

```
 protected void GV_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "AddToCard")
        {
           //Write code to add to card
        }
   } 
```

GV 是我的 GridView 的 ID！

# c++ - 不同类 C++ 的对象列表

> ID：10970507
> 
> 赞同：0
> 
> 时间：2012-06-10T16:56:58.213
> 
> 标签：c++, class, list

我已经想出使用多态性并让列表存储指向基类的指针，但是在成功将其放置在那里之后，我想知道该对象最初是什么类。我正在为类使用模板，并希望有另一个字段，它是基本类型的枚举。

现在的问题是：有没有办法检查（在运行时或编译期间）

```
(if T == int)  
   field = INT 
```

我虽然可能与预处理器有关，但我对此并不熟悉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T17:04:08.830

多态性背后的整个想法是隐藏特定的实现，使其在程序流中透明。使用类的类型作为指标会使你的代码变得臃肿且`if`难以维护。

我建议您重新考虑您的设计并使用预期的行为方法创建一个抽象类，并将此类类型用作列表对象类型。比为每个对象调用接口方法（在抽象类中声明并在派生类中实现）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:02:14.017

您可以使用运算符`typeid`。

例如，如果`T`是指向基类的指针：

```
if (typeid(SomeDerivedClass) == typeid(*T))
... 
```

（我有点不清楚你为什么谈论`int`多态性。 `int`不能派生自。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T17:28:01.990

您可能正在寻找的东西被称为类型特征。它们允许您确定特定类型的属性并对其采取行动。您可以根据您的要求从那里开始`std::is_integral()`并从那里构建。`std::is_floating_point()`

```
enum Type
{
    Unknown,
    Integral,
    Float
};

....

Type field = Unknown;

if(std::is_integral<T>::value)
{
    field = Integral;
}

else if(std::is_floating_point<T>::value)
{
    field = Float;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T17:04:12.737

C++ 预处理器对 C++ 一无所知。它是一个通用的符号操纵器，可以与大多数编程语言一起使用，或者就此而言，任何文本处理应用程序，例如单词或方程式布局处理的功能。

您可能会将[**typeid**运算符](http://en.wikibooks.org/wiki/C++_Programming/RTTI#typeid)视为构建这种机制的一种方式，但请注意该页面下方*的 RTTI 误用*部分。

# asp.net-mvc - MVC 4 RC 中是否仍然存在共享视图？

> ID：10970510
> 
> 赞同：1
> 
> 时间：2012-06-10T16:57:22.840
> 
> 标签：asp.net-mvc

我是 MVC 的新手，我正在尝试通过音乐商店教程来学习：

[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3)

我可以马上看出 MVC 4 RC 中的情况看起来略有不同，但我遇到的一件大事是，当我添加主视图时，我没有看到任何共享视图被创建。事实上，我在项目中的任何地方都看不到 _Layout* 文件。

所以我的问题是，共享视图是否已被其他机制取代，还是我需要做其他事情来明确添加它？

谢谢，JT

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:06:46.097

来自[http://blogs.msdn.com/b/jasonz/archive/2012/05/31/announcing-the-release-candidate-rc-of-visual-studio-2012-and-net-framework-4-5 .aspx](http://blogs.msdn.com/b/jasonz/archive/2012/05/31/announcing-the-release-candidate-rc-of-visual-studio-2012-and-net-framework-4-5.aspx)：

> 如果您正在进行 Web 开发，您会注意到 RC 中的一些更新。首先，我们更新了一些项目模板。我们使 MVC4 Empty 模板真正为空，并将原来的空模板重命名为现在称为“基本”模板。我们还改进了新项目创建时间的性能。

基本上所有的初始模板都被削减了很多。Empty 项目也不附带 HomeController - 您可以添加任何您需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:18:57.820

显然，这与您启动项目的方式有关。如果您在创建新的 MVC 项目时选择 Internet Application，它将为您构建这些文件，但如果您选择 Empty，则必须手动创建它们。

# oop - 是否有任何高级的、本地编译的面向对象语言被广泛使用？

> ID：10970511
> 
> 赞同：0
> 
> 时间：2012-06-10T16:57:36.950
> 
> 标签：oop, native-code

有很多 oop 语言，但我找不到任何具有像垃圾收集这样的便利，但可以本地编译为机器代码的语言。有点像 C 和 java/c# 之间的东西。我发现的一种有趣的语言是 Vala，但它仅限于 GNOME 平台并且不是那么知名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:09:32.070

[Go](http://golang.org/)可能是最接近的。

但是到底为什么你想要它本地编译呢？

可移植字节码的 JIT 编译已被证明是一种非常有效的策略。它在运行时编译为本机代码（因此您在最初的几次迭代后即可获得本机代码的性能），并且避免了必须构建和管理特定于平台的编译二进制文件的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:59:06.480

你在考虑 C++ 吗？它的使用率很高，几乎可以在任何（主要）平台上编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T09:52:00.767

如果您想使用编译为本机代码的 oo 语言，您将“总是”必须使用头文件和东西，因为 elf 格式不支持 oo（elf 中没有类信息）。如果您想要使用来自外部库的类，您需要让编译器以某种方式了解在您的项目之外声明的类、函数等这一事实。在 C++ 中，这是通过使用头文件来解决的。所以，我认为，这是本机面向对象语言的一个主要缺点。为了解决这个问题，需要对 elf/loader/linker 进行一些调整，以支持您可能期望的那种特性（如“链接”与“类”）。即使垃圾收集机制甚至可以用本机语言实现。

有 C++ 库可以为用户空间应用程序执行此操作，例如：
[Boehm 收集器](http://hboehm.info/gc/)
[智能指针](http://www.boost.org/doc/libs/1_36_0/libs/smart_ptr/smart_ptr.htm)

# javascript - 如何将excel公式转换为javascript

> ID：10970512
> 
> 赞同：-2
> 
> 时间：2012-06-10T16:57:53.683
> 
> 标签：javascript, excel

我在 excel 中有这种长公式，需要将其转换为 javscript 以在网页上使用。

公式如下：

> =IF(B15/Q2<1;0.4*((B15^3)/(Q2^2))-0.09*((B15^2)/Q2)+0.1*B15;B15-(Q2*(0.79*EXP (-0.27*(Q2/B15)))))

`B15`并且`Q2`是整数 >= 0

在 excel`B15 = 292`中何时`Q2 = 251`输出`135`。

在我尝试将其转换为 javascript 时，它会输出 417。甚至不像您所看到的那样接近。

任何帮助将不胜感激。

编辑-

该公式计算对玩家造成的伤害。因为B15是攻击等级，Q2是攻击必须经过的护甲。这些数字的预期损失为 135

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:20:46.313

试试这个：

```
var a = 292,
    b = 251,
    c = null;

if(a/b<1)
    c = 0.4*(Math.pow(a,3)/Math.pow(b,2))-0.09*(Math.pow(a,2)/b)+0.1*a
else
    c = a-(b*(0.79 * Math.exp(-0.27*(b/a))))

console.log(c);​ 
```

演示：http: [//jsfiddle.net/g3ZJH/](http://jsfiddle.net/g3ZJH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:12:20.087

粗略的猜测，如果您按字面意思进行转换，则`^`s 可能会导致问题，因为这些是 Javascript 中的按位 XOR。您应该改用该`pow`方法。例如，公式中的第一个实例是`pow(B15, 3)`.

# jquery - MVC4 - JQuery AutoComplete - .autocomplete 不是一个函数

> ID：10970513
> 
> 赞同：2
> 
> 时间：2012-06-10T16:57:59.107
> 
> 标签：jquery, asp.net-mvc, razor, autocomplete, asp.net-mvc-4

我显然遗漏了一些东西，但是在尝试将自动完成添加到文本框时，我不断收到此消息：.autocomplete is not a function

_Layout（仅头部）：

```
<head>
 <meta charset="utf-8" />
 <title>@ViewBag.Title - My ASP.NET MVC Application</title>
 <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
 <meta name="viewport" content="width=device-width" />
 <link href="../../Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
 <script src="../../Scripts/jquery-1.6.2.min.js" type="text/javascript"></script>
 <script src="../../Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>
 @Styles.Render("~/Content/themes/base/css", "~/Content/css")
 @Scripts.Render("~/bundles/modernizr") 
```

指数：

```
 <script type="text/javascript">
$(function () {
    $("#searchTerm").autocomplete({
       source: "/Search/AutocompleteSuggestions",
       minLength: 3,
       select: function (event, ui) {
             if (ui.item) {
                $("#searchTerm").val(ui.item.value);
                $("form").submit();
             }
       }
      });
}); 
```

```
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl }))'
{
<input id="searchTerm" name="searchTerm" type="text" />
<input type="submit" value="Go" />
} 
```

我很确定 Jquery 插件没有正确加载，但我不明白为什么！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T19:30:35.330

在挠了一个小时左右后，我发现了问题，所以这里是：

1.  您必须将您的 javascript 添加到 @section Scripts {} 部分
2.  我必须包含以下包：@Scripts.Render("~/bundles/jqueryval") @Scripts.Render("~/bundles/jqueryui")

MVC4 附带了正确的 JQuery 文件，并且默认配置已经包含了必要的包。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:01:37.437

您似乎没有包含定义方法的`jquery-ui-1.8.11.js`脚本`autocompete`。您只包括`jquery-1.6.2.min.js`了哪些是必需的，但还不够。此外，我建议您使用捆绑包将所需的脚本和样式组合并缩小到一个文件中，从而减少带宽并缩短页面加载时间：

```
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/css")" rel="stylesheet" type="text/css" />
    <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/themes/base/css")" rel="stylesheet" type="text/css" />
    <script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script>
    <meta name="viewport" content="width=device-width" />
</head> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:37:43.760

在我的情况下，文件`BundleConfig.cs`正在注册

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-{version}.js")); 
```

它会导致 JQuery UI 出现问题。我将其更改为：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include("~/Scripts/jquery-1.7.1.min.js")); 
```

它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T17:16:12.163

> 我很确定 Jquery 插件没有正确加载

你怎么知道 jquery 插件没有正确加载？首先，您应该通过直接组合引用脚本/样式并使用`System.Web.Optimization`helpers( `@Scripts`, `@Styles`..) 来停止搞砸事情。

使用任何一种方法。我建议您首先使用直接加载所需的 css 和脚本，`Url.Content`然后查看一切正常，如果可以，然后将它们完全替换为`@Scripts`and `@Styles`。

要了解有关捆绑/缩小的更多信息，请参阅此链接

[http://ofps.oreilly.com/titles/9781449320317/ch_ClientOptimization.html#_putting_asp_net_mvc_to_work](http://ofps.oreilly.com/titles/9781449320317/ch_ClientOptimization.html#_putting_asp_net_mvc_to_work)

# ios - NSZombie 是否有可能没有用 ARC 指出 EXC_BAD_ACCESS？

> ID：10970516
> 
> 赞同：2
> 
> 时间：2012-06-10T16:58:15.943
> 
> 标签：ios, background, automatic-ref-counting, exc-bad-access, nszombieenabled

我目前正在和一些人一起做一个 ios 项目，我们中的一个人决定在应用程序的一部分中使用 ARC。

不幸的是，我们目前在从后台返回时遇到了一些崩溃。

以下是我们使应用程序崩溃的步骤，我们使用 ios-simulator 执行它们：

1.  启动应用程序
2.  获取 ViewController A（使用 ARC 编码）
3.  上一个 ViewController B（没有用 ARC 编码-老实说我不知道​​它是否相关-）
4.  将应用程序置于后台。
5.  模拟内存警告（感谢模拟器）
6.  再次启动应用程序，我们将在 ViewController B
7.  回到 Viewcontroller A
8.  应用程序崩溃指向带有 EXC_BAD_ACCESS 的主函数

我们确实尝试将 NSZombieEnabled 设置为 YES，但是当我们这样做时，应用程序不会崩溃并保持完美运行，所以我们想知道 NSZombieEnabled 是否可能无法与 ARC 一起使用？

如果有人能给我一个关于 ARC 和 NSZombieEnabled 的快速而清晰的见解，我想我知道它是如何工作的，但显然我必须遗漏一些东西。

无论如何，感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:46:48.700

比使用 NSZombieEnabled 更好的是，您应该对项目进行 Profile，并使用 Zombie 工具。当你做同样的事情时，它应该停下来并说“zombie messaged”，在那里你可以点击一个箭头来查看僵尸类，以及它被分配/释放的位置。

我认为崩溃与 ARC 无关，而是在 viewDidUnload 中释放了一些东西，然后没有设置对 nil 的引用——当你回来时，它会尝试使用无效的引用。

如果一切都使用 ARC 可能会更好，因为它确实有助于解决此类问题（该错误很可能出现在非 ARC 代码中）。

# html - 创建一个只有 css3 的工具提示？

> ID：10970517
> 
> 赞同：0
> 
> 时间：2012-06-10T16:58:36.300
> 
> 标签：html, css, tooltip

好的，我知道如何做剩下的，但我知道如何创建下面的小三角形：

![在此处输入图像描述](../Images/9df4dcff16509381d04264d3d4a17a32.png)
我不得不在 Photoshop 中将其制作出来，但我无法找到任何可靠的指南。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:27:36.913

我必须同意上面的所有评论，一个简单的谷歌搜索将提供一个解决方案。我只是做了一个搜索，看看我发现了什么：

[http://forrst.com/posts/Pure_css_tooltip_box_with_arrow_T_R_B_L-7kR](http://forrst.com/posts/Pure_css_tooltip_box_with_arrow_T_R_B_L-7kR)

[http://forrst.com/posts/Simple_pure_CSS_tooltip_with_arrow-BkY](http://forrst.com/posts/Simple_pure_CSS_tooltip_with_arrow-BkY)

[http://cssdeck.com/item/13/pure-css-tooltip-with-arrow](http://cssdeck.com/item/13/pure-css-tooltip-with-arrow)

我们都想帮忙，但有时感觉就像我们被要求做所有事情。作为开发人员，我们喜欢解决问题，但对于这样的事情，我觉得你确实必须帮助自己（如果我遇到讨厌的事情，抱歉）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T07:26:25.743

我今天在[TalkersCode](http://talkerscode.com)上查看了一个教程，我认为这非常适合您的需要，这里的教程是带有演示[Create CSS3 Tooltip](http://talkerscode.com/webtricks/create-simple-tooltip-using-css3.php)的教程，主要代码是

```
<a title="Create Simple Tooltip Using CSS3" class="tooltip">Some Sample CSS3 Tooltip</a>

.tooltip
{
 display: inline;
 position: relative;
}
.tooltip:hover:after
{
 background: #333;
 background: rgba(0,0,0,.8);
 border-radius: 5px;
 bottom: 26px;
 color: #fff;
 content: attr(title);
 left: 20%;
 padding: 5px 15px;
 position: absolute;
 z-index: 98;
 width: 220px;
}

.tooltip:hover:before
{
 border: solid;
 border-color: #333 transparent;
 border-width: 6px 6px 0 6px;
 bottom: 20px;
 content: "";
 left: 50%;
 position: absolute;
 z-index: 99;
} 
```

# java - Runtime.exec 没有做任何事情......（没有错误）

> ID：10970523
> 
> 赞同：0
> 
> 时间：2012-06-10T16:59:12.223
> 
> 标签：java, batch-file, compilation, runtime

我正在尝试使用 java 在绝对位置运行批处理文件。批处理文件将编译几个 java 文件。

这是我一直在尝试的代码：

```
String s=file.getAbsolutePath() + "\\compile.bat";
Runtime rut = Runtime.getRuntime();
try {
    rut.exec(new String[] {file.getAbsolutePath() + "\\compile.bat"});
}catch(IOException e1) {
    e1.printStackTrace();
}
System.out.println(s); 
```

现在，当这段代码被执行时，我没有得到控制台错误，但是批处理文件没有运行。但是，当我通过 Windows 资源管理器运行批处理文件时，批处理文件可以工作、编译文件并在完成后关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:07:39.137

你怎么知道没有控制台错误？

尝试这个：

```
String s=file.getAbsolutePath() + "\\compile.bat";
Runtime rut = Runtime.getRuntime();
try {
    Process process = rut.exec(new String[] {file.getAbsolutePath() + "\\compile.bat"});
    // prints out any message that are usually displayed in the console
    Scanner scanner = new Scanner(process.getInputStream());
    while (scanner.hasNext()) {
        System.out.println(scanner.nextLine());
    }
}catch(IOException e1) {
    e1.printStackTrace();
}
System.out.println(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:06:07.933

使用 . 检查子进程的返回值`exitValue()`。`getErrorStream()`如果存在值非零，则还要读取错误流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:03:23.443

请注意，当使用[Runtime.exec](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d%29)调用时，正在执行的命令的工作目录将是 java 进程的*当前**工作目录*。您的批处理文件是否需要在特定目录中运行？

如果您需要为子进程设置特定的工作目录，则需要使用另一个版本的[Runtime.exec](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d,%20java.lang.String%5b%5d,%20java.io.File%29)。

# jquery - jQuery 无法正确传输

> ID：10970526
> 
> 赞同：0
> 
> 时间：2012-06-10T16:59:24.860
> 
> 标签：jquery, ruby-on-rails

在我的 Rails (3.2.3) 应用程序中，我使用 Jquery 来提供交互性。但是现在我有一个奇怪的错误，只有部分`jquery.js`库被传输。我使用`jquery-rails-2.0.2`gem 在我的应用程序中提供 Jquery。

具体来说，当我请求 Jquery 文件时，只发送前 3395 行。

我不知道错误可能在哪里。我检查了我的 gem 目录中的实际文件，它有 9000 多行。有没有人遇到过这个错误或者知道我在哪里可以找到一些线索？

**编辑：**

我现在发现了以下内容：

*   手动（使用 netcat）HTTP 请求没有出现错误

*   请求行是`GET /assets/jquery.js?body=1`. 当我卸下`?body=1`零件时，错误消失了。

所以我现在重新提出我的问题：“body”变量的意义是什么，我如何以 rails-y 的方式删除它？

资产链接如下所示：

```
 <%= javascript_include_tag "application" %> 
```

# android - 在应用程序中存储 hashmap 数据

> ID：10970528
> 
> 赞同：1
> 
> 时间：2012-06-10T16:59:39.450
> 
> 标签：android, static, hashmap, final

我想将我的 HashMap 存储在我的应用程序中，这样每次我重新启动应用程序时，我都可以检索我的 HashMap。我通过谷歌看到了很多方法，但在我的情况下，最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:04:06.733

如果数据量不大，您应该使用首选项。将您的 HashMap 转换为 JSON（可能通过 gson），然后将其存储为字符串。

如果您有大量数据需要快速访问，您可以使用集成的 sqlite 数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T17:27:12.820

如果您将`HashMap`用作检索常量数据的一种方式（即，内部的值`HashMap`不会改变），它就像`HashMap`在代码中初始化 一样简单，如下所示：

```
private static final Map map = new HashMap();

static {
    map.put(...);
    map.put(...);
    /* etc... */
} 
```

如果您希望此信息可全局访问，您可以创建一个子类`Application`并在那里初始化它。

# c++ - 打印非常大的浮点数

> ID：10970531
> 
> 赞同：13
> 
> 时间：2012-06-10T17:00:08.953
> 
> 标签：c++, c, floating-point, standards, printf

```
#include <stdio.h>
#include <float.h>

int main()
{
    printf("%f\n", FLT_MAX);
} 
```

来自 GNU 的输出：

```
340282346638528859811704183484516925440.000000 
```

Visual Studio 的输出：

```
340282346638528860000000000000000000000.000000 
```

C 和 C++ 标准是否允许这两种结果？还是他们要求一个特定的结果？

请注意`FLT_MAX = 2^128-2^104 = 340282346638528859811704183484516925440`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T17:04:52.193

我认为 C99 标准的相关部分是 7.19.6.1 p.13 中的“推荐做法”：

> 对于`e`, `E`, `f`, `F`, `g`, 和`G`转换，如果有效小数位数最多为 `DECIMAL_DIG`，则结果应正确四舍五入。如果有效小数位数大于`DECIMAL_DIG`但源值可以用`DECIMAL_DIG`数字精确表示，则结果应该是带有尾随零的精确表示。否则，源值由两个相邻的十进制字符串*L* < *U*限定，两者都具有`DECIMAL_DIG`有效数字；结果十进制字符串*D*的值应满足*L* <= *D* <= *U*, 并额外规定该误差应具有当前舍入方向的正确符号。

我的印象是，这允许在这种情况下打印的内容有一些余地；所以我的结论是 VS 和 GCC 在这里都是合规的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:11:38.700

两者都是 C 标准允许的（C++ 只是导入 C 标准）

来自第 5.2.4.2.2 部分第 10 部分的[草稿版本](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)

> 以下列表中给出的值应替换为具有大于或等于所示值的实现定义值的常量表达式：
> — 最大可表示的有限浮点数，(1 - b -p)b emax

```
FLT_MAX 1E+37 
```

Visual C++ 2012 有

```
#define FLT_MAX         3.402823466e+38F        /* max value */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:23:58.453

The code itself is flawed where it uses `%f` for a value larger than significance held in a `float` or `double`. By doing so you are asking to see "behind the curtain" as to the meaningless guard bits or other floating point noise generated in the conversion to decimal.

Clearly you should not expect any consistency in the metal filings generated after making an engine at Honda versus at Toyota. Nevermind any sensible expectation of such consistency.

The proper way to display such numbers is by using one of the "scientific" formats such as `%g` provided precision is not over-specified. On IEEE-754 implementations, 7 decimal figures are significant for `float`, 15-16 for `double`, about 19 for `long double`, and 34 for `__float128`. So, for the example you have given, `%.15g` would be proper, assuming it is on a IEEE-754 implementation.

# jsf-2 - 带有 nullpointexception 的 ValueChangeListener 问题

> ID：10970534
> 
> 赞同：1
> 
> 时间：2012-06-10T17:00:33.693
> 
> 标签：jsf-2, facelets, icefaces-2

在 SelectOneMenu 组件中使用 ValueChangeListener 时遇到错误。我不确定是由于导致此问题的方法还是因为 xhtml 找不到该方法。

错误

```
12:54:10,815 SEVERE [javax.enterprise.resource.webcontainer.jsf.context] (http--127.0.0.1-8080-7) JSF1073: javax.faces.event.AbortProcessingException caught during processing of APPLY_REQUEST_VALUES 2 : UIComponent-ClientId=j_idt6:j_idt18, Message=/reportPage.xhtml @48,185 valueChangeListener="#{statusReport.retrieveReport}": java.lang.NullPointerException
12:54:10,818 SEVERE [javax.enterprise.resource.webcontainer.jsf.context] (http--127.0.0.1-8080-7) /reportPage.xhtml @48,185 valueChangeListener="#{statusReport.retrieveReport}": java.lang.NullPointerException: javax.faces.event.AbortProcessingException: /reportPage.xhtml @48,185 valueChangeListener="#{statusReport.retrieveReport}": java.lang.NullPointerException
    at javax.faces.event.MethodExpressionValueChangeListener.processValueChange(MethodExpressionValueChangeListener.java:157) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.event.ValueChangeEvent.processListener(ValueChangeEvent.java:134) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:759) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:935) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.10.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.10.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_25]
Caused by: java.lang.NullPointerException
    at com.weeklyreport.bean.StatusReport.retrieveReport(StatusReport.java:163) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_25]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.6.0_25]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.6.0_25]
    at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.6.0_25]
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262) [jbossweb-7.0.10.Final.jar:]
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) [jbossweb-7.0.10.Final.jar:]
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.event.MethodExpressionValueChangeListener.processValueChange(MethodExpressionValueChangeListener.java:144) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    ... 22 more 
```

xhtml代码

```
<ice:panelGroup
                style="border: 1px solid black; background-color: #F0ECEB;padding: 10px; text-align: left;height=20pix;">
                <ice:selectOneMenu value="#{statusReport.projectDetID}" valueChangeListener="#{statusReport.retrieveReport}" onchange="this.form.submit()"  immediate="true" style="width: 150px;" > 
                    <f:selectItem itemLabel="Select One" itemValue="" />
                    <f:selectItems value="#{statusReport.listOfProjectDetail}"
                        var="projectDetail" itemLabel="#{projectDetail.project}              #{projectDetail.startDate}   -    #{projectDetail.endDate}"
                        itemValue="#{projectDetail.pdetailId}" />
                </ice:selectOneMenu>

            </ice:panelGroup> 
```

豆码

```
public void retrieveReport(ValueChangeEvent event){

    System.out.println(" Processing ...code..");
    @SuppressWarnings({ "unchecked", "unused" })
    List<ProjectDetail> listOfProjectDet1 = (List<ProjectDetail>) projectDetailFacade.find(projectDetID);
    System.out.println("project details size" + listOfProjectDet1.size());
    System.out.println("Generated Data:Completed");

} 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:07:54.693

以下任何一项为空

1 ->`projectDetailFacade`为空

```
List<ProjectDetail> listOfProjectDet1 = (List<ProjectDetail>) projectDetailFacade.find(projectDetID); 
```

2 - >`listOfProjectDet1`为空

```
System.out.println("project details size" + listOfProjectDet1.size()); 
```

检查哪个为空，修复应该可以解决您的问题。

# iphone - 如何在游戏中心接受邀请

> ID：10970538
> 
> 赞同：6
> 
> 时间：2012-06-10T17:01:13.673
> 
> 标签：iphone, game-center, multiplayer

我正在尝试使用 Game Center 实施邀请，但有一件事我不明白。好的，我已经从一台设备向另一台设备发送了邀请。然后我在接收器上有一个 UIAlertView 询问我想接受或拒绝邀请。当我接受它时，它的处理方式如下：

```
[GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) 
                 {
                     // Insert application-specific code here to clean up any games in progress.
                     if (acceptedInvite)
                     {
                         GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:acceptedInvite] autorelease];
                         mmvc.matchmakerDelegate = self;
                         [presentingViewController presentModalViewController:mmvc animated:YES];
                     }
                     else if (playersToInvite)
                     {
                         GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
                         request.minPlayers = 2;
                         request.maxPlayers = 4;
                         request.playersToInvite = playersToInvite;

                         GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
                         mmvc.matchmakerDelegate = self;
                         [presentingViewController presentModalViewController:mmvc animated:YES];

                     }
                 }; 
```

嗯，这很好，但接下来呢？发件人设备显然正在等待某种标准类型的响应，因为如果我点击“立即播放”，它还会显示一条警报，告诉我有一些邀请尚未回答。

那么如何接受邀请呢？我应该发回什么样的数据（以及如何发回）？我到底应该在接收方做些什么？游戏应该在点击“接受”后立即开始，还是我应该先关闭 AlertView 然后点击“立即播放”？

[Ray Wenderlich 的教程](http://www.raywenderlich.com/3325/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-22)说我应该选择第二种方式，但是当解除警报并点击“立即播放”时，发件人设备仍在等待响应并且不知道我已经接受了邀请。如果我此时点击“立即播放”，那么正如我上面所说，它会显示一条警报，说明应用程序正在等待响应。因此，如果您曾经这样做过，请解释一下我该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T20:22:22.893

1.  我在游戏加载后立即注册邀请，并在收到邀请时致电代表
2.  因此，inviteReceived 调用匹配器以关闭游戏中心控制器并创建匹配
3.  最后，当找到匹配时，connectionStatusChanged 方法负责呈现所有游戏的视图和玩家等

这是代码：

我在游戏加载后立即注册邀请，并在收到邀请时致电代表：

```
- (void)registerInvites {
    [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) {
        self.pendingInvite = acceptedInvite;
        self.pendingPlayersToInvite = playersToInvite;
        [delegate inviteReceived];
    };
} 
```

因此，inviteReceived 调用 match maker 以关闭游戏中心控制器并创建匹配：

```
- (void)inviteReceived {
    [[GCMultiplayerHelper sharedInstance] findMatchWithMinPlayers:2 maxPlayers:2 viewController:(UIViewController*)[self.superview nextResponder] delegate:self];
}

- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController delegate:(id<GCMultiplayerHelperDelegate>)theDelegate {
    if (!gameCenterAvailable) return;

    matchStarted = NO;
    self.match = nil;
    self.presentingViewController = viewController;
    delegate = theDelegate;

    [presentingViewController dismissModalViewControllerAnimated:YES];
    GKMatchmakerViewController *mmvc;

    if (pendingInvite != nil) {

        mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:pendingInvite] autorelease];

    } else {

        GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease]; 
        request.minPlayers = minPlayers;     
        request.maxPlayers = maxPlayers;
        request.playersToInvite = pendingPlayersToInvite;

        mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];    

    }

    mmvc.matchmakerDelegate = self;
    [presentingViewController presentModalViewController:mmvc animated:YES];

    self.pendingInvite = nil;
    self.pendingPlayersToInvite = nil;
} 
```

最后，当找到匹配时，connectionStatusChanged 方法负责呈现所有游戏的视图、玩家并开始匹配：

```
- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch
{
    self.match = theMatch;
    match.delegate = self;
    if (!matchStarted && match.expectedPlayerCount == 0) {
        NSLog(@"Ready to start match! - didFindMatch");
        [presentingViewController dismissModalViewControllerAnimated:YES];

        [self.delegate connectionStatusChanged:CONNECTIONSUCCESS];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T20:13:44.120

我已经按照 Ray 的教程成功实现了在线游戏中心比赛。您的问题的答案是：您不必向邀请设备发送任何内容。当您调用 line:`GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];`时，matchMakerVController 会处理连接。但是，您应该尽快编写邀请处理程序，最好是在身份验证更改方法中。见我的：

```
-(void) authenticationChanged {

if ([GKLocalPlayer localPlayer].isAuthenticated && !userAuthenticated) {
    NSLog(@"Authentication changed: player authenticated.");
    userAuthenticated = TRUE;

    [self sendUnsentScores];

    [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite){

        NSLog(@"Invite");

        if([AppDelegate mainMenuController].presentedViewController!=nil) {
            [[AppDelegate mainMenuController] dismissViewControllerAnimated:NO completion:^{

            }];
        } // if we're not on the main menu, or another game is going on.
          // this would be easier to do if you were using a navigation controller
          // where you'd just push the multiplayer menu etc.

        self.pendingInvite = acceptedInvite;
        self.pendingPlayersToInvite = playersToInvite;

        [[AppDelegate mainMenuController] presentViewController:[AppDelegate mainMenuController].multiGameMenu animated:NO completion:^{ // push the multiplayer menu

            [[AppDelegate mainMenuController].multiGameMenu duel:nil];
        }];

    };

} 
```

如果您有兴趣，这里是决斗方法。非常混乱的代码，但处理它:)

```
- (IBAction)duel:(id)sender {
NSLog(@"duel");

if (presentingMenu.multiGameController==nil || presentingMenu.multiGame.gameInProgress==NO) {

    presentingMenu.multiGame=nil;
    presentingMenu.multiGameController=nil;

    MultiViewController *mvc = [[MultiViewController alloc] init]; //create game VC

    presentingMenu.multiGameController = mvc; //presenting menu is just the main menu VC
                                              // it holds this menu, and the game
                                              // objects.
}

if (presentingMenu.multiGame == nil) {

    presentingMenu.multiGame = [[MultiGame alloc] // similarly create the game object

    initWithViewController:presentingMenu.multiGameController];
    //they both have pointers to each other (A loose, bad MVC).                        

    presentingMenu.multiGameController.game = presentingMenu.multiGame;

    [presentingMenu.multiGame startGame];

}

if (presentingMenu.multiGameController.gameState==0) { //new game

    presentingMenu.multiGameController.game = presentingMenu.multiGame;

    [[GCHelper sharedInstance] findMatchWithMinPlayers:2 maxPlayers:2 viewController:self delegate:presentingMenu.multiGame]; // the GC magic happens here - it know about the invite.

} else {

    [self presentViewController:presentingMenu.multiGameController animated:YES completion:^{

    }];

}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-06T18:55:46.383

invokeHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) 现在已弃用。查看注册邀请通知的新方法。

[GKMatchMaker 邀请处理程序已弃用](https://stackoverflow.com/questions/20567104/gkmatchmaker-invite-handler-deprecated)

# android - 地理编码器不工作

> ID：10970548
> 
> 赞同：1
> 
> 时间：2012-06-10T17:02:31.370
> 
> 标签：android, eclipse, avd, locationmanager, geocode

我有一个 Android 应用程序，我需要从 lat/long 获取地址。我使用了以下代码库：

```
Geocoder geoCoder = new Geocoder(getApplicationContext(), Locale.getDefault());
List<Address> address = null;
if (geoCoder != null){
   try {
       address= geoCoder.getFromLocation(51.50, -0.12, 1);
       } catch (IOException e1) {
       // TODO Auto-generated catch block
       e1.printStackTrace();
      }
      if (address.size()> 0){
        String postCode = address.get(0).getPostalCode();
        System.out.println(postCode);
      }
} 
```

我还在清单文件中添加了以下内容

```
 uses-permission android:name="android.permission.INTERNET"  
 uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" 
```

但是每次我执行这个块时`address.size()`仍然是“0”，我也尝试过不同的坐标；什么都没有改变。我正在从 eclipse 做这一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:52:16.377

尝试这个：

```
private class ReverseGeocodingTask extends AsyncTask<Location, Void, Void> {
    Context mContext;

    public ReverseGeocodingTask(Context context) {
        super();
        mContext = context;
    }

    @Override
    protected Void doInBackground(Location... params) {
        Geocoder geocoder = new Geocoder(mContext, Locale.getDefault());

        Location loc = params[0];
        List<Address> addresses = null;
        try {
            addresses = geocoder.getFromLocation(loc.getLatitude(),
                    loc.getLongitude(), 1);
        } catch (IOException e) {
            e.printStackTrace();
        }
        if (addresses != null && addresses.size() > 0) {
            Address address = addresses.get(0);
            // Format the first line of address (if available), city, and
            // country name.
            final String addressText = String.format(
                    "%s, %s, %s",
                    address.getMaxAddressLineIndex() > 0 ? address
                            .getAddressLine(0) : "", address.getLocality(),
                    address.getCountryName());

            // Update address field on UI.
            mHandler.post(new Runnable() {
                public void run() {
                    Toast.makeText(getBaseContext(),
                            addressText.toString(), Toast.LENGTH_SHORT)
                            .show();
                }
            });

        }
        return null;
    }
} 
```

# nosql - 哪个 nosql 解决方案适合我的应用程序 HBase OR Hypertable OR Cassandra

> ID：10970549
> 
> 赞同：2
> 
> 时间：2012-06-10T17:02:36.000
> 
> 标签：nosql, cassandra, hbase, hypertable

我有一个拥有 1 亿数据并且还在不断增长的应用程序。我想在它撞到墙上之前扩大规模。

我一直在阅读有关可以有效处理大数据的 nosql 技术的资料。

我的需求：

读比写多。但写的数量也很大（读：写= 4：3）

您能解释一下 HBase、Hypertable 和 Cassandra 之间的区别吗？哪一个符合我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:55:42.890

HBase 和 Hypertable 都需要 hadoop。如果您不使用 Hadoop（例如需要解决与 map/reduce 相关的问题） - 我会选择 cassandra，因为它是独立的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:26:39.637

如果您已经拥有数据[Hive](http://hive.apache.org/)是您的应用程序的最佳解决方案，或者您从头开始开发应用程序，请查看下面的链接，该链接解释了 nosql 世界的概述

[http://nosql-database.org/](http://nosql-database.org/)

[http://www.vineetgupta.com/2010/01/nosql-databases-part-1-landscape/](http://www.vineetgupta.com/2010/01/nosql-databases-part-1-landscape/)

# python - 使用 tweepy 访问 Twitter 的 Streaming API

> ID：10970550
> 
> 赞同：6
> 
> 时间：2012-06-10T17:02:37.357
> 
> 标签：python, twitter, tweepy

我目前无法获取使用 tweepy 访问 Twitter 的 Streaming API 以正确运行的示例代码（错误......或者至少我期望它如何运行）。我正在使用来自 GitHub（标记为 1.9 版）和 Python 2.7.1 的最新克隆 tweepy。

我尝试了来自三个来源的示例代码，在每种情况下都使用“twitter”作为跟踪的测试术语：

1.  O'Rilley Answers 代码：[如何使用 Twitter 的 Streaming API 实时捕获推文](http://answers.oreilly.com/topic/2605-how-to-capture-tweets-in-real-time-with-twitters-streaming-api/)

2.  Andrew Robinson 的博客：[使用 Tweepy 访问 Twitter 流](http://andrewbrobinson.com/2011/07/15/using-tweepy-to-access-the-twitter-stream/)

3.  GitHub 上的 Tweepy 示例存储库（正如 Andrew Robinson 所做的那样，可以轻松修改以支持 OAuth 身份验证）：streamwatcher.py

在所有三种情况下，我得到相同的结果：身份验证成功，没有产生错误，并且主程序循环似乎正在执行而没有任何问题。我看到网络使用率跃升至约 200KB/s，python 进程跃升至接近 100% 的 CPU 使用率，所以我认为正在接收数据。然而，没有任何东西输出到控制台。

我怀疑 tweepy 的 Stream 类由于某种原因没有调用自定义回调方法。我尝试重写每个示例中的回调方法，以便在调用它们*时*产生输出，这似乎证实了这一点。这是基于 Andrew Robinson 的博客条目的一个非常简单的测试代码（当然，我的应用程序的键被删除了）：

```
# -*- coding: utf-8 -*-

import tweepy

consumer_key = ''
consumer_secret = ''

access_token_key = ''
access_token_secret = ''

auth1 = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth1.set_access_token(access_token_key, access_token_secret)

class StreamListener(tweepy.StreamListener):
    def on_status(self, tweet):
        print 'Ran on_status'

    def on_error(self, status_code):
        print 'Error: ' + repr(status_code)
        return False

    def on_data(self, data):
        print 'Ok, this is actually running'

l = StreamListener()
streamer = tweepy.Stream(auth=auth1, listener=l)
#setTerms = ['hello', 'goodbye', 'goodnight', 'good morning']
setTerms = ['twitter']
streamer.filter(track = setTerms) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T23:43:46.633

我也遇到了这个问题，并通过将streaming.py中的第160行更改为

```
if delimited_string.strip().isdigit(): 
```

这似乎是 Tweepy 中的一个已知问题/错误 - 在进行所有调试之前应该检查问题列表 :) -

[https://github.com/tweepy/tweepy/pull/173](https://github.com/tweepy/tweepy/pull/173) [https://github.com/tweepy/tweepy/pull/182](https://github.com/tweepy/tweepy/pull/182)

# vb.net - 在 vb.net 中动态生成后如何访问每个按钮的属性？

> ID：10970554
> 
> 赞同：1
> 
> 时间：2012-06-10T17:02:50.927
> 
> 标签：vb.net

我已经动态生成了一些按钮。现在我需要以这样的方式操作它们，即单击一个按钮应该在另一个按钮上执行某些操作。怎么做？我希望代码尽可能简单，因为我正在辅导业余爱好者。

```
 Private Sub NewButton(ByVal ButtonNumber As Integer)
    ' set the button properties 

    btn.Name = "Button" & ButtonNumber
    btn.Enabled = True
    btn.Size = New Size(25, 25)
    btn.Visible = True
    'use tag to store number of button
    btn.Tag = ButtonNumber
    ' Add button click handler
    AddHandler btn.Click, AddressOf btnclick
    ' Add to this forms controls collection
    Me.Controls.Add(btn)
    arr1(count) = btn.Name
    count = count + 1
End Sub          

Private Sub NewButton(ByVal ButtonNumber As Integer)
    ' set the button properties 

    btn.Name = "Button" & ButtonNumber
    btn.Enabled = True
    btn.Size = New Size(25, 25)
    btn.Visible = True
    'use tag to store number of button
    btn.Tag = ButtonNumber
    ' Add button click handler
    AddHandler btn.Click, AddressOf btnclick
    ' Add to this forms controls collection
    Me.Controls.Add(btn)
    arr1(count) = btn.Name
    count = count + 1
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:19:08.257

将事件与动态创建按钮相关联：

```
AddHandler btn.Click, AddressOf clickevent 'clickeven sub to handle the event

sub clickevent()
    For Each cn As Control In Me.Controls
      Select Case cn.GetType.ToString.Substring(cn.GetType. _
                                      ToString.LastIndexOf(".") +1).ToLower
            Case "button"
                'code goes here
        End Select
    Next
end sub 
```

希望如果最适合你，问候。

# bigdata - OrientDB GraphDatabase：@RID 的 OSQLSynchQuery 以获取 graph.getVertex(rid) ...从索引键加载顶点的最快方法？

> ID：10970556
> 
> 赞同：0
> 
> 时间：2012-06-10T17:02:59.867
> 
> 标签：bigdata, orientdb, gremlin

给定带有索引“名称”（唯一或非唯一）的基本蓝图兼容 OrientGraph，如果需要，有什么建议可以改进以下内容？

注意：我找不到使用索引加载 [blueprints] 顶点的权威指南。我有一个大图，使用 has('name','bob') （在控制台中）需要 2 分钟！另一方面，基于索引的搜索以毫秒为单位返回。

到目前为止我想出的最好的：

```
OrientGraph graph = new OrientGraph("local:/graph1/databases/test", "admin", "admin");
List<ODocument> resultlist = graph.getRawGraph().query(new OSQLSynchQuery<ODocument>("SELECT FROM INDEX:name WHERE KEY = 'bob'"));
ODocument resultodoc = resultlist.get(0).field("rid");
String rid = resultodoc.getIdentity().toString();  // would return something like #6:1500000
Vertex v1 = graph.getVertex(rid);
System.out.println(v1.getProperty("name")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T23:09:03.703

[OrientDB](http://www.orientdb.org)支持[IndexableGraph](https://github.com/tinkerpop/blueprints/blob/master/blueprints-core/src/main/java/com/tinkerpop/blueprints/IndexableGraph.java)接口。要使用它，请查看：

[https://github.com/tinkerpop/blueprints/wiki/Graph-Indices](https://github.com/tinkerpop/blueprints/wiki/Graph-Indices)

# android - 移动应用程序很难在原生或跨平台之间进行选择

> ID：10970560
> 
> 赞同：1
> 
> 时间：2012-06-10T17:03:55.140
> 
> 标签：android, iphone, cordova, web, native

我想创建一个同时支持 Android 和 iPhone 的应用程序。
它将是人们聊天、分享照片等的交互系统。
因此，它将包含登录系统，用户的所有信息都将存储在 mysql 中。
问题来了，我是应该为Android和iPhone写两套代码还是使用Phonegap + jQueryMobile等跨平台工具进行开发。
1）我想知道如果我使用Phonegap，html + css + javascript是否可以完成我想包含在这个应用程序中的所有功能。例如，从db加载数据时如何处理数据传输，我应该创建很多.html对于不同的页面。以及使用Phonegap的性能...

2）另外，开发时间怎么样。假设有一个开发者是 Android 开发者，一个开发者是 iPhone 开发者。如果我们分开发展，我们就无法互相帮助。另一方面，网络可能更容易，我们可以一起研究。

3）然后，对于UI，母语更容易。但是web很难做移动应用这样的东西。
我问了很多问题。但是我真的想了很久这种问题，现在是我做出决定的时候了。
任何人都可以帮助我并给我一些想法吗？真的thx....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:28:00.623

考虑这些因素并做出明智的决定，
您熟悉哪种编码技术（HTML、CSS、JS）或（Java、C#）。

**对于您**关于从数据库传输数据的第一个问题，（您的问题不清楚内部数据库或服务器端数据库）如果内部数据库[这是我的问题](https://stackoverflow.com/questions/10377436/how-to-read-write-in-internal-database-with-phonegap)
，我找不到给定答案的解决方案，如果您能解决同样的问题，请帮助我.
（如果您正在谈论服务器端数据库）对于本机和跨平台，它必须通过 API 的

**开发时间在 PhoneGap 中较少**，当考虑两个平台时，因为您同时为两个平台编码。**仅**当您使用**默认样式**

时， UI 在 Native 中更容易， ****例如，考虑自己添加 *.png 格式的**自定义按钮**。您将以多种尺寸多次添加单个按钮。
如果您想实现点击或悬停效果，您将再添加 2 个自定义按钮。这使得单击单个屏幕和单个方向总共 3 个图像，以实现正确的质量，您必须在 ldpi、mdpi、hdpi、x-hdpi、no-dpi 中添加不同尺寸的相同图像，最终为您带来 5x3=15单个按钮的图像。（想象一下您的应用程序的大小）。
最后你必须添加几行[代码来实现点击效果](http://developer.android.com/reference/android/widget/ImageButton.html)

同样可以在 CSS 中用几行代码（几乎 5 KB）来实现。很多动画也可以用js轻松实现。
只需几行代码即可随时更改 UI。
**UI** - PhoneGap 赢得

您的应用程序在浏览器中运行，Android 和 iOS 都使用相同的浏览器引擎 Webkit，[但即使在 Webkit 中仍然存在显着差异](http://brian.io/slides/debug-mobile/)
这里还有**[几个 PhoneGap 中的问题](http://simonmacdonald.blogspot.in/2012/02/android-issues-all-phonegap-developers.html)**，
**Performance**
Native 获胜。
在 PhoneGap 中，您的浏览器必须加载 js、CSS，这会给您带来明显的延迟，这是**不容**~~忽视~~的。

如果您想要出色的 UI，请使用 CrossPlatform。
要实现性能，请选择 Native。
终于到了做决定的时候了。****

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T18:22:35.927

1.  这取决于你的要求是什么。使用 Phonegap 评估您的所有要求是否可行。有关支持的功能列表，请参阅：[http](http://phonegap.com/about/features) ://phonegap.com/about/features 请注意，您只能使用 phonegap 提供的本机电话功能。

2.  开发时间取决于各种因素，例如复杂性、项目规模和开发人员技能。我认为这里的主要区别在于开发人员的技能，因为项目的复杂性和规模是相同的。

3.  这是您必须做出的权衡。可以在这里找到一个示例 phonegap 应用程序：http: [//coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/](http://coenraets.org/blog/2011/10/sample-application-with-jquery-mobile-and-phonegap/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-25T10:06:37.173

1.如果你使用cordova构建应用程序，页面更多，你的应用程序会变慢，有时会出现更多的设计错误。因此，最好使用单个 html 页面，每个页面都有不同的潜水，并使用“display：none;” 从您的 java 脚本或 JQuery 显示和隐藏您当前的 pages.then 您的应用程序将更快。

2.  cordova 中有很多插件同时支持 iOS 和 android，因此如果您有适当的 html 和 css 设计（如响应式网站），则不需要 iOS 开发人员或 android 开发人员。

3.  如果您使用引导程序构建响应式 html 页面，UI 不会有问题****

# c# - 如何从 Grdiview SelectedIndexChanged 中的模板字段中获取值

> ID：10970561
> 
> 赞同：0
> 
> 时间：2012-06-10T17:04:01.840
> 
> 标签：c#, asp.net

我有一个gridview 和sqldatasource。

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        GridViewRow row = GridView1.SelectedRow;
        TextBox rrdp = (TextBox)row.FindControl("name");
        txt1.Text = rrdp.text.ToString()
    } 
```

但我得到：对象引用未设置为对象的实例。在 txt1.text = //etc..

列是 itemtemplates ，值不是空值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:05:34.377

这基本上意味着 FindControl 无法根据这一行找到名为“name”的控件：

```
(TextBox)row.FindControl("name"); 
```

您是否检查过“名称”是否在任何容器中并且在预期范围内？正如[FindControl 文档](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)指定的那样，它将返回：

> 指定的控件，如果指定的控件不存在，则返回 null。

这就是您正在经历的（未设置对象引用）。

# wordpress - Wordpress query_posts 按自定义字段排序

> ID：10970566
> 
> 赞同：6
> 
> 时间：2012-06-10T17:04:56.000
> 
> 标签：wordpress, sql-order-by

我正在尝试通过自定义字段使用 query_posts 函数对我的结果进行排序。

这是我编辑的 query_posts() 函数：

```
query_posts( "post_type=produkte&".$query_string."&orderby=Price&order=DESC" ); 
```

价格看起来像 {Euro}.{Cent} 例如 1.49。

并且 query_posts() 函数命令它不正确。结果是这样排序的：

0.49、1.99、0.99

出了什么问题？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T17:20:43.947

你可以试试这个（希望它会工作/在网上找到）

```
query_posts( "post_type=produkte&".$query_string."&meta_key=Price&orderby=meta_value_num&order=DESC" ); 
```

[**关于SO**](https://stackoverflow.com/questions/4111255/how-to-sort-a-query-posts-function-by-custom-field-while-limiting-posts-by-an)的另一个答案。

# iphone - 在图像选择器中向图像添加文本

> ID：10970567
> 
> 赞同：0
> 
> 时间：2012-06-10T17:04:56.533
> 
> 标签：iphone, ios, xcode, cocoa

你好我正在使用和创建一个`iOS`应用程序`cocoa``xcode`

我对整个事情都很陌生，有点迷路了。在我的应用程序的一部分中，用户必须从库中选择一张图片或使用相机，然后向其中添加一些文本（就像“id cap that”一样）。问题是我将在哪里添加文本以及如何将其保存到手机中？

我知道有一个`allowsImageEditing`属性，问题是我如何编辑它，而不是裁剪和缩放，它将添加文本并具有保存选项。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:54:36.420

系统决定允许什么样的编辑。你只能告诉它是否允许，但你不能选择什么类型的编辑。如果要为图像添加标题，则必须使用 Core Graphics 来执行此操作。或者，如果您不关心保存的带有标题的图像，您可以简单地在 UIImageView 之上使用 UILabel。

# c# - 将工作流属性绑定到 Visual Studio 2010 中的列表项

> ID：10970571
> 
> 赞同：0
> 
> 时间：2012-06-10T17:05:31.697
> 
> 标签：c#, visual-studio-2010, sharepoint-2010, workflow

我在 Visual Studio 2010 中创建了一个工作流，其中包含一个创建子站点的自定义操作。我在 Visual Studio 的属性窗口中输入 URL 和 SiteName 的值。到目前为止还可以，但是我不想对这些属性进行硬编码，而是想将它们与列表项绑定。

供您参考，工作流程是可重复使用的。因此，它没有附加到共享点列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:03:15.750

工作流操作的重点是可以在运行时设置您的值（基于某些参数或通过 SharePoint 设计器的工作流本身）

如果您想在运行时设置这些值，您需要将这些值传递给您的自定义操作。

我错过了什么？

# java - java android: res\drawable-hdpi\Restaurant-Blue-2-icon.png: 文件名无效：必须只包含 [a-z0-9_.]，无法修复

> ID：10970573
> 
> 赞同：2
> 
> 时间：2012-06-10T17:05:36.737
> 
> 标签：java, android

我正进入（状态：

```
[2012-06-10 12:47:39 - pet_game] Launch canceled!
[2012-06-10 12:49:13 - pet_game] res\drawable-hdpi\Restaurant-Blue-2-icon.png: Invalid file name: must contain only [a-z0-9_.]
[2012-06-10 12:49:13 - pet_game] res\drawable-hdpi\Restaurant-Blue-2-icon.png: Invalid file name: must contain only [a-z0-9_.]
[2012-06-10 12:49:13 - pet_game] res\drawable-hdpi\Restaurant-Blue-2-icon.png: Invalid file name: must contain only [a-z0-9_.]
[2012-06-10 12:49:13 - pet_game] res\drawable-hdpi\Restaurant-Blue-2-icon.png: Invalid file name: must contain only [a-z0-9_.]
[2012-06-10 12:49:13 - pet_game] res\drawable-hdpi\Restaurant-Blue-2-icon.png: Invalid file name: must contain only [a-z0-9_.]
[2012-06-10 12:49:13 - pet_game] res\drawable-hdpi\baseball-icon.png: Invalid file name: must contain only [a-z0-9_.] 
```

我知道这是因为我在图像文件名中有大写字母，所以我删除了这两个文件。但是，我仍然遇到同样的错误。我试图刷新整个项目并重新启动 eclipse，但它没有帮助。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T17:07:19.090

不要使用：`-`. 而是使用：`_`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T11:49:01.357

资源名称不允许使用大写字母。只有小写字母 (az)、数字 0-9、.（点）和 _（下划线）有效。
使用`Restaurant_Blue_2_icon.png`和`baseball_icon.png`作为图像名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:13:42.780

`baseball-icon.png`名字太无效了，把它改成`baseball_icon.png`你就可以了。

# ios - 从 iPhone 媒体库上传文件，2012 年

> ID：10970574
> 
> 赞同：0
> 
> 时间：2012-06-10T17:05:54.957
> 
> 标签：ios, upload, media-library

我即将推出一项服务，其中一项功能是在网站上使用“上传”按钮上传文件。几年前，我为 iPhone 制作了一些程序，我记得不可能从库中上传 MP3，因为每个应用程序都在其沙箱中，尽管我能够上传放置在沙箱中的 MP3。

SO上有一篇关于无法从库上传到网站的旧帖子：

[一个用于移动 safari 的 html5 网络应用程序，用于从 Photos.app 上传图像？](https://stackoverflow.com/questions/3891831/a-html5-web-app-for-mobile-safari-to-upload-images-from-the-photos-app)

在 2012 年 5 月，当点击 html 上传按钮时，iPhone/iPad 是否可能被提示进入音乐库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:46:24.880

我不认为事情会以你的方式在 iPhone 上发展。

我假设您的服务不会在本机objective-c 中。查看 phonegap 的功能，了解当前可以进行哪些交互：http: [//docs.phonegap.com/en/1.8.0/index.html](http://docs.phonegap.com/en/1.8.0/index.html)

您可能可以开发一个专门的应用程序来使用媒体播放器框架提取音乐文件并将它们发送到您的服务，但我几乎不怀疑它可以通过苹果验证团队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:02:22.330

**Apple 不允许您这样做。** 尽管可以使用私有 API 或媒体播放器框架，但 Apple 不会接受。

# ruby - pid/fork vs 运行系统命令

> ID：10970577
> 
> 赞同：0
> 
> 时间：2012-06-10T17:06:11.537
> 
> 标签：ruby

这样做有什么区别：

```
pid = fork{ exec 'mpg123','-q', file } 
```

并这样做：

```
system "mpg123 -q /home/nemo/sfx/dirty_wood.mp3" 
```

我注意到前者的运行速度似乎快了很多倍。如何？为什么？我今天才在 SO 上发现它，但这似乎是性能的巨大改进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:29:11.553

`fork()`派生一个子进程并立即返回，`system()`等待子进程运行。

# javascript - 如何自动包装一个类的所有方法？

> ID：10970579
> 
> 赞同：0
> 
> 时间：2012-06-10T17:06:41.363
> 
> 标签：javascript, methods, coffeescript, wrapper

为了简化调试咖啡脚本应用程序，我希望有一个`logWrapClass(Klass)`函数可以`console.log(method.name, method.arguments)`使用方法包装器自动将 a 添加到我的类中的方法中，这可行吗？

这似乎还不够

```
consoleLogWrapClass = (Klass) ->
  klassName = Klass.toString()
  klassName = klassName.substr 'function '.length
  klassName = klassName.substr 0, klassName.indexOf('(')

  K = Klass.prototype
  for prop of K #in Object.getOwnPropertyNames(K)
    obj = K[prop]
    if typeof(obj) is 'function'
      decoratedName = "#{klassName}::#{prop}"
      K[prop] = () ->
        console.debug 'trace: '+decoratedName, arguments
        return obj.apply this, arguments 
```

当我做

```
class Someclass
    ...

consoleLogWrapClass Someclass 
```

看起来包装器已经合并了初始类的所有功能，就像所有 obj 和 decoratedName 由于某种原因指向同一个元素一样。

编辑：好的，现在更奇怪了，因为如果我将调用分成两个函数

```
consoleLogWrapFunction = (fn, decoratedName) ->
  () ->
    console.debug 'trace: '+decoratedName, arguments
    return fn.apply this, arguments

consoleLogWrapClass = (Klass) ->
  klassName = Klass.toString()
  klassName = klassName.substr 'function '.length
  klassName = klassName.substr 0, klassName.indexOf('(')

  K = Klass.prototype
  for prop of K #in Object.getOwnPropertyNames(K)
    obj = K[prop]
    if typeof(obj) is 'function'
      K[prop] = consoleLogWrapFunction obj, "#{klassName}::#{prop}" 
```

它有效，有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:42:47.580

```
consoleDebugWrapFunction = (name, fn) ->
  ->
    console.log "#{name} called with arguments: #{[].slice.call(arguments).join ', '}"
    fn.apply this, arguments

consoleDebugWrapClass = (Klass) ->
  for prop of Klass.prototype
    obj = Klass.prototype[prop]
    if typeof obj is 'function'
      Klass.prototype[prop] = consoleDebugWrapFunction prop, obj 
```

使用示例：

```
class A
  foo: (a, b) ->
    a + b

consoleDebugWrapClass A
a = new A
console.log a.foo 3, 6 
```

输出：

```
foo called with arguments: 3, 6
9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:43:25.993

也许这次审计有帮助

[如何在 JavaScript 中实现一个简单的优先级监听器模式](https://stackoverflow.com/questions/10839146/how-to-implement-a-simple-prioritized-listener-pattern-in-javascript/10839304#10839304)

您可以使用该技术并包装所有原型成员

```
function wrap(o,f) {for(var n in o) if (typeof(n)=="function") o[n]=f.prefix(o[n]);} 
```

o=要包装的对象

f=审计功能

# php - 如果我们希望先执行 javascript 然后执行 php post 方法，即提交，该怎么办

> ID：10970583
> 
> 赞同：0
> 
> 时间：2012-06-10T17:06:54.550
> 
> 标签：php, javascript

例如：我想接受或拒绝一张照片。

接受的输入按钮和表单是：

```
<form method="post" action="viewRequests.php">
    <input type="submit" onClick="showAlertBox()">
</form> 
```

`showAlertBox()`是一个 javascript 函数，它显示一个带有*Yes*或*No*的确认对话框。如果我选择*否*，则不应触发表单提交。

在这种情况下该怎么办

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T17:08:38.413

`false`如果您不希望触发表单提交，您的 Javascript 函数应该返回。

例如：

```
<script type="text/javascript">
    function showAlertBox() {
        var answer = confirm ("Some yes/no question to the user");            
        return answer; // either true or false
    }
</script>

<form action="submit.php">
    <input type="submit" onClick="return showAlertBox()">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:15:17.080

你可以这样做：

```
onsubmit="return showAlertBox();" 
```

showAlertBox 函数可能是这样的：

```
function showAlertBox()
{
   return confirm('validate');    // confirm returns TRUE on "OK"
} 
```

# objective-c - 为 NavBar 的标题添加阴影

> ID：10970589
> 
> 赞同：5
> 
> 时间：2012-06-10T17:07:21.643
> 
> 标签：objective-c, ios

我从一位同事那里得到了一个程序，他正在使用 .xib 文件来设置他的视图。（作为一名核心编码员，我自己从未使用过 IB...）所以他正在设置他的 ViewControler 并且他有一个 NavBar（我在 .xib 文件中找不到！）。

我想为标题添加阴影。

如果我正在制作 NavBar，则相关代码将类似于：

```
textViewTitle.layer.shadowOpacity = 2.0;
textViewTitle.layer.shadowRadius = 3.0;
textViewTitle.layer.shadowOffset = CGSizeMake(2.0, 3.0); 
```

这很好用。挖掘我发现现在我需要使用这个：

```
NSDictionary *navbarTtlAts = [NSDictionary dictionaryWithObjectsAndKeys:
                             [UIColor whiteColor], UITextAttributeTextColor, 
                             [UIColor blackColor], UITextAttributeTextShadowColor,
                             [NSValue valueWithUIOffset:UIOffsetMake(2.0, 3.0)], UITextAttributeTextShadowOffset,
                             nil];
[self.navigationController.navigationBar setTitleTextAttributes:navbarTtlAts]; 
```

虽然这可行，但我找不到如何添加 shadowOpacity 和 shadowRadius 的东西。

我发现我可以在 NSDictionary 中添加以下内容，但它不起作用......

```
 [NSNumber numberWithFloat: 2.0], @"shadowOpacity",
                           [NSNumber numberWithFloat: 3.0], @"shadowRadius", 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T20:43:38.287

您应该将这些键用于阴影*颜色*和*偏移量*。

```
UITextAttributeTextShadowColor 
UITextAttributeTextShadowOffset 
```

无法将阴影*半径*指定为文本属性。

* * *

如果您真的想要自定义阴影，您可以创建自己`UILabel`的阴影并像第一个示例中那样设置阴影。然后您将该标签设置`titleView`为您的视图控制器的标签`UINavigationItem`。

不过，您必须自己更新文本（导航控制器将不再自动为您更新）。

# dependencies - 我可以在 Microsoft.AspNet.WebApi.Client 旁边安装 ravendb 客户端吗？

> ID：10970591
> 
> 赞同：19
> 
> 时间：2012-06-10T17:07:27.470
> 
> 标签：dependencies, asp.net-mvc-4, ravendb, nuget, asp.net-web-api

我正在尝试一个 ASP.NET MVC4 Web API 项目。我正在尝试通过 nuget 安装 ravendb 客户端。这是错误：

```
Attempting to resolve dependency 'NLog (= 2.0.0.2000)'.
Successfully installed 'Newtonsoft.Json 4.0.8'.
Successfully installed 'NLog 2.0.0.2000'.
Successfully installed 'RavenDB.Client 1.0.960'.
Install failed. Rolling back...
Updating 'Newtonsoft.Json 4.5.1' to 'Newtonsoft.Json 4.0.8' failed. Unable to find a version of 'Microsoft.AspNet.WebApi.Client' that is compatible with 'Newtonsoft.Json 4.0.8'. 
```

所以我可以看到 Microsoft ASP.NET Web API 客户端库（我认为这是我安装的：http: [//nuget.org/packages/Microsoft.AspNet.WebApi.Client](http://nuget.org/packages/Microsoft.AspNet.WebApi.Client)）依赖于 Newtonsoft.Json（≥ 4.5.1)

这表示 ravendb 客户端安装需要 (= 4.0.8) [http://nuget.org/packages/RavenDB.Client/1.0.960](http://nuget.org/packages/RavenDB.Client/1.0.960)

所以我看了一下，这个问题非常相似：[Nuget package dependencies。它是否按应有的方式工作？](https://stackoverflow.com/questions/7908760/nuget-package-dependencies-does-it-work-the-way-it-should)但这有点旧，看起来问题有所不同-这里 Raven 实际上似乎需要 Newtonsoft.Json 4.0.8

所以我的问题是，这可能吗？有什么方法（也许从命令行/通过控制台）可以让我并排安装这两个东西。如何让 Microsoft.AspNet.WebApi.Client 与 Newtonsoft.Json 很好地配合使用？

* * *

**编辑：**这个问题和解决方案已经过时了。自发布此问题以来，已经有[四个稳定的 RavenDB 构建。](http://builds.hibernatingrhinos.com/builds/RavenDB)最新的稳定版本实际上会解决这个问题，人们不应该仅仅为了解决这个问题而尝试不稳定的版本。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-10T17:42:51.067

ravendb google 组有两种解决方案：

使用新的（和不稳定的）v1.2 RavenDB，这通过内部化它们对 Json.Net 的依赖来解决问题，因此您可能能够从 Nuget 获取该版本而不是 v1。

[http://builds.hibernatingrhinos.com/builds/RavenDB-Unstable](http://builds.hibernatingrhinos.com/builds/RavenDB-Unstable)并下载 build 2014

或者显然您可以使用不使用 Json.net 作为其序列化程序的 WebApi 测试版。

有关此问题的更多信息，请查看：

[https://groups.google.com/d/topic/ravendb/7qS4YspGnOo/discussion](https://groups.google.com/d/topic/ravendb/7qS4YspGnOo/discussion) [https://groups.google.com/d/topic/ravendb/4qTcE3Up6k0/discussion](https://groups.google.com/d/topic/ravendb/4qTcE3Up6k0/discussion)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-28T21:20:39.840

正如theoutredge 已经提到的，使用不稳定版本的客户端可以解决问题。我刚刚安装了 RavenDB Client build 2025。

如果要使用 NuGet，则必须使用控制台安装并指定“-Pre”参数：

**安装包 RavenDB.Client -Pre**

抓取最新的不稳定版本的 RavenDB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T21:48:22.093

这个问题和解决方案已经过时了。自发布此问题以来，已经有[四个稳定的 RavenDB 构建。](http://builds.hibernatingrhinos.com/builds/RavenDB)最新的稳定版本实际上会解决这个问题，人们不应该仅仅为了解决这个问题而尝试不稳定的版本。

# c# - 搜索文本文件中的字符串及其上一句和下一句

> ID：10970594
> 
> 赞同：2
> 
> 时间：2012-06-10T17:07:43.280
> 
> 标签：c#, string, file, phrase

如果我有一个搜索条件：`She likes to watch tv`

`text.txt`包含一些句子的输入文件，例如：

`I don't know what to do. She doesn't know that it's not good for her health. She likes to watch tv but really don't know what to say. I don't blame her, but it's not her fault. This was just a test text. This is the end.`

我想在文本文件中搜索字符串，并返回包含字符串的句子，加上它之前和之后的句子。

输出应如下所示：

`She doesn't know that it's not good for her health. She likes to watch tv but really don't know what to say. I don't blame her, but it's not her fault.`

因此，它输出匹配搜索词之前的句子、包含搜索词的句子和搜索词之后的句子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:54:04.120

这里介绍了一种方法：

```
string content = @"I don't know what to do. She doesn't know that it's not good for her health. She likes to watch tv but really don't know what to say. I don't blame her, but it's not her fault. This was just a test text. This is the end.";

string input = @"She likes to watch tv";
string curPhrase = string.Empty, prevPhrase = string.Empty, nextPhrase = string.Empty;

char[] delim = new char[] { '.' };
string[] phrases = content.Split(delim, StringSplitOptions.RemoveEmptyEntries);

for(int i=0; i<phrases.Length; i++){
    if(phrases[i].IndexOf(input) != -1){
        curPhrase = phrases[i];
        prevPhrase = phrases[i - 1];
        if (phrases[i + 1] != null)
            nextPhrase = phrases[i + 1];

        break;
    }
} 
```

它首先将整个文本拆分为 period `.`，将它们存储在一个数组中，然后在数组中搜索输入字符串后取出当前、上一个和下一个短语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T17:28:37.437

像这样的东西怎么样：

```
 string @in = @"I don't know what to do. She doesn't know that it's not good for her health. She likes to watch tv but really don't know what to say. I don't blame her, but it's not her fault. This was just a test text. This is the end.";
    string phrase = @"She likes to watch tv";

    int startIndex = @in.IndexOf(phrase);
    int endIndex = startIndex + phrase.Length;
    int tmpIndex;

    tmpIndex = @in.Substring(0, startIndex).LastIndexOf(". ");
    if (tmpIndex > -1)
    {
        startIndex = tmpIndex + 1;
        tmpIndex = @in.Substring(0, startIndex).LastIndexOf(". ");
        if (tmpIndex > -1)
        {
            startIndex = tmpIndex + 1;
            tmpIndex = @in.Substring(0, startIndex).LastIndexOf(". ");
            if (tmpIndex > -1)
            {
                startIndex = tmpIndex;
            }
        }
    }

    tmpIndex = @in.IndexOf(".", endIndex);
    if (tmpIndex > -1)
    {
        endIndex = tmpIndex + 1;
        tmpIndex = @in.IndexOf(".", endIndex);
        if (tmpIndex > -1)
        {
            endIndex = tmpIndex + 1;
        }
    }

    Console.WriteLine(@in.Substring(startIndex, endIndex - startIndex).Trim()); 
```

我假设您要查找的短语由“。”分隔。此代码的工作原理是查找短语的索引并在匹配的后面查找前一个短语，并在短语前面查找后面的句子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T17:11:28.217

使用`String.IndexOf()`( [docs](http://msdn.microsoft.com/en-us/library/k8b1470s%28v=vs.80%29.aspx) ) 将返回文件中第一次出现的字符串。使用此值，您可以删除包含的短语或句子：

`int index = paragraph.IndexOf("She likes to watch tv")`

然后您将使用设置边界和拆分（可能在[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)`index`中使用大写字母和句号），以拉出两边的句子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T17:40:36.540

您可以使用`Regex`抓取文本：

```
string text = "I don't know what to do. She doesn't know that it's not good for her health. She likes to watch tv but really don't know what to say. I don't blame her, but it's not her fault. This was just a test text. This is the end.";

string target = "She likes to watch tv";

string result = Regex.Replace(text, "(?:.*?\\.\\s)?((?:[^.]*?)" + target + "[^.]*?\\.)(?:.*)", "$1");

//result = "She likes to watch tv but really don't know what to say." 
```

参考： http: [//msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace(v=vs.90).aspx)

# javascript - 如何检测一个形状是否在 html5 画布中碰到另一个形状？

> ID：10970602
> 
> 赞同：2
> 
> 时间：2012-06-10T17:08:59.380
> 
> 标签：javascript, html, canvas, collision-detection

我正在尝试使用 javascript 在 html5 画布中构建摩托车游戏。现在我有一个轮子和一个简单的重力，它从画布顶部增加位置，直到轮子碰到画布底部。当我开始游戏时，轮子刚刚落到画布的底部。

我想为车轮创造一个弯曲的地面。问题是我不知道如何计算车轮是否撞到了地面。

这是一个插图。我希望轮子下降，直到它碰到弯曲的地面，如果我移动轮子，它需要跟随形状的边缘。

[图片 http://i.minus.com/iFvy1dbnouvy6.png](http://i.minus.com/iFvy1dbnouvy6.png)

我不想使用任何库或引擎，只有 javascript 和 html5。你有什么想法或解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T21:44:34.583

与其他答案类似，您可以简单地使用 if 语句来说明

```
if tire.y < line(tire.x) then tire.y = line(tire.x) - 1 
```

线函数可以只是一个数组或一些公式，当给定任何 x 值时，它将包含线的 y 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:22:08.690

为了检测车轮何时撞击地面，您应该拥有地面边界的坐标（例如：折线）以及车轮的射线和中心位置。

您可以通过检查您的车轮 y 坐标（中心 + 射线）在某些*x(s)*处是否低于折线的 y 坐标来检测碰撞。您应该通过仔细选择端点以合理的方式分割您的折线。

可能还有其他方法可以完成此任务，但这是我出来的第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:36:42.790

这是您正在寻找碰撞检测（弹性）的[**解决方案**](http://labs.skookum.com/demos/barcampclt_physics/newton/3)
..-------------------------------- -------------------------------------------------- ----------。
这是一个学习物理的简单而好的[**教程**](http://labs.skookum.com/demos/barcampclt_physics/)，特别是对于游戏开发者

# c# - 这是在滥用 IEnumerator 构造吗？

> ID：10970604
> 
> 赞同：3
> 
> 时间：2012-06-10T17:09:30.697
> 
> 标签：c#, .net, yield, state-machine, ienumerator

我有一个`Sensor`状态机，我已经为其编写了`Cycle()`方法：

```
 /// <summary>
  /// Cycle sets the machine to follow a path from one it's current state to the next. The 
  /// behavior of the sensor is to revert to it's default state should an invalid state be
  /// encountered.
  /// </summary>
  /// <returns></returns>
  public IState Cycle() {
     if(_currentState.Next.IsNullOrEmpty()) {
        _currentState = DefaultState.Set();
     } else {
        _currentState = _currentState.Cycle();
     }
     return _currentState;
  }

  public IEnumerator<IState> Cycle(Func<bool> HasWork) {
     while(HasWork()) {
        yield return Cycle();
     }
  } 
```

执行：

```
 [TestMethod]
  public void SensorExperiment_CycleWhileFunc() {
     float offset = .5f;
     IState previousState = State.Empty;

     IStimulus temp = new PassiveStimulus(68f) {
        Offset = offset
     };
     ISensor thermostat = new Sensor(65f, 75f, temp);

     int cycles = 0;
     // using this func to tell the machine when to turn off
     Func<bool> hasWork = () => {
        previousState = thermostat.CurrentState;
        // run 10 cycles6
        return cycles++ < 10;
     };

     var iterator = thermostat.Cycle(hasWork);

     while(iterator.MoveNext()) {
        Console.WriteLine("Previous State: {0}\tCurrent State: {1}",
           previousState.Name, iterator.Current.Name);
     }
  } 
```

我已经阅读了[Eric Lippert](https://stackoverflow.com/a/1195205/210709)对使用 IEnumerator*作为*StateMachine 进行查询的回答。**我的实现是否滥用或利用了 IEnumerator？**我将我的实现视为提供一系列状态自动化的一种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:17:18.240

我不认为这样使用它真的是一种滥用，毕竟你把结果当成一个集合。

另一方面，我看不出你应该在这里使用迭代器的任何理由。如果您将代码重写为以下内容，它应该可以正常工作。

```
while (hasWork())
    Console.WriteLine("Previous State: {0}\tCurrent State: {1}",
       previousState.Name, thermostat.Cycle().Name); 
```

# javascript - cakephp中外部js文件中的图像声明

> ID：10970609
> 
> 赞同：1
> 
> 时间：2012-06-10T17:10:21.937
> 
> 标签：javascript, cakephp

我将图像声明为

```
 <?php echo $this->Html->image('buttonaft.png', array('alt'=> __('img', true), 'border' => '0'));  ?> 
```

在 cakephp 中默认读取的 javascript 文件中。

该代码无法读取图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:34:57.943

试着给这样..

但请确保您提供正确的路径。

```
echo $html->image('image.png', array('url' => '/' . IMAGES_URL . 'image.png')); 
```

您也可以在 1.2 中执行此操作

```
echo $html->link(
    $html->image('img.png'),
    'img.png',
    array(),
    null, 
    false
  ); 
```

或在 1.3

```
echo $html->link(
    $html->image('img.png'),
    'img.png',
    array(),
    array( 'escape' => false ),     
  ); 
```

# android - 全屏活动菜单

> ID：10970612
> 
> 赞同：2
> 
> 时间：2012-06-10T17:11:16.687
> 
> 标签：android, android-layout, menu, contextmenu

我有一个通过这种方式启动的全屏活动：

```
 super.onCreate(savedInstanceState);
 requestWindowFeature(Window.FEATURE_NO_TITLE);
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
 WindowManager.LayoutParams.FLAG_FULLSCREEN);
 setContentView(R.layout.preview); 
```

我想通过这种方式在屏幕底部显示一个菜单：

```
public boolean onCreateOptionsMenu(Menu menu) {
   MenuInflater inflater = getMenuInflater();
   inflater.inflate(R.layout.menu, menu);
   return true;
} 
```

使用 uiOptions (AndroidManifest) `splitActionBarWhenNarrow`。但是什么都没有出现，是什么问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:00:29.920

这种行为是因为“硬件”菜单按钮正在逐步淘汰，取而代之的是 ActionBar，有关更多信息，请参阅此[Android 开发人员博客文章](http://android-developers.blogspot.sg/2012/01/say-goodbye-to-menu-button.html)。

有关 ActionBar 的更多信息，请参见：

[http://developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:13:07.320

您正在尝试将*布局*膨胀为*菜单*

```
inflater.inflate(R.layout.menu, menu); 
```

也许应该是

```
inflater.inflate(R.menu.menu, menu); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-21T10:57:05.647

在尝试在以前运行良好的应用程序上升级 TargetSDK 时，我遇到了类似的问题。我有一个全屏应用程序，用户可以在整个屏幕上绘制并从选项菜单中保存，但是在尝试升级 TargetSDK 为设备带来新功能时，我发现我失去了这个功能，所有互联网建议都是实施一个动作栏。

经过深思熟虑，我决定最好的选择是从 onBackPressed 实现我自己的菜单，并向用户显示一个方便的提示，以在 Activity 首次启动时提醒用户这种有点奇怪的行为。显然，菜单需要有一个退出选项或在再次按下返回时退出活动。

它违背了标准的 Android 行为，但我唯一的选择是将不需要的 ActionBar 放入我的全屏活动中，不再使其全屏显示，或者将应用程序保留为“旧版应用程序”并且不添加任何新功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T17:16:44.323

您在以下行有问题

```
 inflater.inflate(R.layout.menu, menu); 
```

改成

```
 inflater.inflate(R.menu.menu, menu); 
```

**还要确保您没有保存

> 菜单.xml

在下面

> 布局文件夹

. 将其保存在菜单文件夹中。**

> 路径将是 res->menu->menu.xml

# c++ - MinGW中没有strsafe.h？改用什么？

> ID：10970617
> 
> 赞同：12
> 
> 时间：2012-06-10T17:11:49.400
> 
> 标签：c++, mingw, strsafe

从这里编译第一个片段：http: [//msdn.microsoft.com/en-us/library/ms682499 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms682499(VS.85).aspx)

给出：`d:\!TC\cpp\control.cpp:4:21: fatal error: strsafe.h: No such file or directory compilation terminated.`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-18T10:19:06.890

下载[这个](https://raw.githubusercontent.com/nuigroup/ccv-multicam/master/branches/test/videoInput_GUID/videoInputSrcAndDemos/libs/DShow/Include/strsafe.h)：这是一个头文件。将其复制到路径“/mingw/include”文件夹中即可

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T09:33:03.117

根据您的标签，您正在使用 C++。“strsafe”函数试图让 C 更安全一点。但是 C++ 已经安全得多了。例如，该`StringCchPrintf`功能不如`std::osstream`.

# c# - Windows 如何决定显示屏幕保护程序

> ID：10970625
> 
> 赞同：2
> 
> 时间：2012-06-10T17:12:49.307
> 
> 标签：c#, windows, winapi, screensaver

Windows 有一个内部机制，通过检查用户交互性和其他任务（有人正在观看视频等）来决定何时显示屏幕保护程序（或关闭屏幕）。

是否有一个 Win API 允许我询问用户是否处于活动状态，或者他们最后一次处于活动状态是什么时候？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T17:28:42.030

它被称为“空闲计时器”。您可以通过调用[CallNtPowerInformation()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372675%28v=vs.85%29.aspx)来获取它的值，询问 SystemPowerInformation。返回的 SYSTEM_POWER_INFORMATION.TimeRemaining 字段告诉您空闲计时器还剩多少时间。SystemExecutionState 请求会告诉您是否有任何线程调用 SetThreadExecutionState() 来停止计时器，就像显示视频的应用程序所做的那样。

```
using System;
using System.Runtime.InteropServices;

public static class PowerInfo {
    public static int GetIdleTimeRemaining() {
        var info = new SYSTEM_POWER_INFORMATION();
        int ret = GetSystemPowerInformation(SystemPowerInformation, IntPtr.Zero, 0, out info, Marshal.SizeOf(info));
        if (ret != 0) throw new System.ComponentModel.Win32Exception(ret);
        return info.TimeRemaining;
    }

    public static int GetExecutionState() {
        int state = 0;
        int ret = GetSystemExecutionState(SystemExecutionState, IntPtr.Zero, 0, out state, 4);
        if (ret != 0) throw new System.ComponentModel.Win32Exception(ret);
        return state;
    }

    private struct SYSTEM_POWER_INFORMATION {
        public int MaxIdlenessAllowed;
        public int Idleness;
        public int TimeRemaining;
        public byte CoolingMode;
    }
    private const int SystemPowerInformation = 12;
    private const int SystemExecutionState = 16;
    [DllImport("powrprof.dll", EntryPoint = "CallNtPowerInformation", CharSet = CharSet.Auto)]
    private static extern int GetSystemPowerInformation(int level, IntPtr inpbuf, int inpbuflen, out SYSTEM_POWER_INFORMATION info, int outbuflen);
    [DllImport("powrprof.dll", EntryPoint = "CallNtPowerInformation", CharSet = CharSet.Auto)]
    private static extern int GetSystemExecutionState(int level, IntPtr inpbuf, int inpbuflen, out int state, int outbuflen);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:22:39.750

您应该看一下[GetLastInputInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646302%28v=vs.85%29.aspx)函数，它返回一个结构，其中包含上次用户输入的滴答计数，一个滴答为 1 毫秒。然后，您可以将其与[Environment.TickCount](http://msdn.microsoft.com/en-us/library/system.environment.tickcount.aspx)返回的值进行比较，以获取自上次用户输入以来经过的时间（以毫秒为单位）。

此函数的 AP/Invoke 定义可在此处获得：[http ://www.pinvoke.net/default.aspx/user32.GetLastInputInfo](http://www.pinvoke.net/default.aspx/user32.GetLastInputInfo)

但请注意，由于返回的值是无符号整数，并且 TickCount 是有符号的，因此返回的刻度值`GetLastInputInfo`在 50 天之内返回零，但在 25 天之内返回。在大多数情况下，这可能不是什么大问题，但值得记住的是，有时可能会出现一些奇怪的行为，大约每月一次。`Environment.TickCount``GetLastInputInfo`

# c# - 如何从类的通用列表中设置列表框的数据源

> ID：10970626
> 
> 赞同：0
> 
> 时间：2012-06-10T17:13:02.303
> 
> 标签：c#, asp.net

如何将 List 绑定到 Listbox 的数据源？我想设置可见属性名称。

这是我的班级和清单：

```
 public class Users
 {
    public string Name { get; set; }
    public DateTime Data { get; set; }
    public int Id { get; set; }
    public Users()
    {
        Name = null;
        Data = DateTime.Now;
        Id = 0;
    }
    public Users(string N,DateTime dateTime, int id)
    {
        Name = N;
        Data = dateTime;
        Id = id;
    }
} 
```

这是我尝试绑定数据源的方法：

```
 ListBox1.DataSource = ((List<Users>) Application["Users_On"]);
        ListBox1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:17:01.463

```
 ListBox1.DataSource = ((List<Users>) Application["Users_On"]);
  ListBox1.DataTextField = "Name";
  ListBox1.DataBind(); 
```

您可以使用 ListBox 类的[DataTextField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextfield)属性来显示对象的 Name 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:33:26.623

亚历克斯，不太确定您是如何尝试生成和绑定值的，我将尝试简化，假设我有一个名为 的类`GenericLists`，我将在其中声明所有可重用的通用数据，让我们以产品为例，这样我就可以这样做：

```
private Dictionary<int, string> relatedProducts { set; get;}
public Dictionary<int, string> relatedProductsList { 
        get {return relatedProducts; } 
    }

public GenericLists()
{
        relatedProducts = new Dictionary<int, string>
            {
                    {0, "CTRL + Click to select multiples"},
                    {1, "A"},
                    {2, "B"},
                    {3, "C"},
                    {4, "D"},
             };
} 
```

现在我想将它绑定到任何形式的列表框：

```
 GenericLists gList = new GenericLists();

            products.DataSource = gList.relatedProductsList;
            products.DataValueField = "Key";
            products.DataTextField = "Value";
            products.DataBind(); 
```

我希望这会给你一个想法。

祝你好运

# android - 创建索引和创建唯一索引有什么区别？

> ID：10970628
> 
> 赞同：10
> 
> 时间：2012-06-10T17:13:14.970
> 
> 标签：android, sqlite

Android OS 中使用的 SQLite3 中的`CREATE INDEX`AND有什么区别？`CREATE UNIQUE INDEX`索引在数据库中是如何工作的？它们与表中的列有什么关系？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T17:15:28.603

`CREATE UNIQUE INDEX`不只是一个索引：它添加了所有记录必须为此列或列组合具有不同值的约束。如果您尝试插入具有相同组合的记录，则会引发错误并阻止插入（或更新）。

只要您确定您最多有一条记录某种键（例如用户名），就使用 UNIQUE。

编辑：[这是 CREATE INDEX 文档的链接](http://www.sqlite.org/lang_createindex.html)，它详细描述了语法。

# javascript - 如何使用 javascript 获取特定 url 的 Facebook 共享计数

> ID：10970631
> 
> 赞同：1
> 
> 时间：2012-06-10T17:13:21.313
> 
> 标签：javascript, ajax, facebook, sdk, share

嗨，我已经在互联网上寻找了几天来找到这个问题的答案。

我想知道如何使用 javascript 获取特定 url 的共享计数，然后使用 ajax 发送值服务器端。

如果您能帮助我，我将不胜感激:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T17:41:46.293

您可以使用他们的图形功能： http: [//graph.facebook.com/](http://graph.facebook.com/)

您必须像这样加载页面： http://graph.facebook.com/http: [//graph.facebook.com/](http://graph.facebook.com/http://graph.facebook.com/) 结果将通过 json 返回。但要小心长网址，它们并不总是正确返回。

希望它会有所帮助！

# batch-file - 如何将批处理命令的结果分配给变量

> ID：10970632
> 
> 赞同：0
> 
> 时间：2012-06-10T17:13:26.703
> 
> 标签：batch-file

如果在命令行上执行：

```
c:\digitemp.exe -t0 -o%C -q  > res1.txt 
```

`res1.txt`正确包含以摄氏度为单位的数字温度（例如：24.23456）。但是如果在 bat 文件中执行相同的命令（例如：test.bat）：

```
@ECHO OFF
ECHO Hola pootol!
ECHO.
c:\digitemp.exe -t0 -o%C -q  > res1.txt 
rem set pootol = < res1.txt
rem set pootol
ECHO Prem una tecla per sortir.
pause > null 
```

`res1.txt`包含我怀疑与参数有关的错误摄氏度值`" -o%C "`。如您所见`rem`，在提及之前，变量 assing cause pootol var 错误地分配了摄氏度值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:25:58.110

您的问题是`%`符号，因为它在 cmd-line 和批处理文件中的评估不同。
在批处理文件中，您可以通过加倍来逃避它。

所以你的代码看起来像

```
c:\digitemp.exe -t0 -o%%C -q  > res1.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:17:33.630

在批处理文件`%`中用于表示变量。所以`%C`在批处理文件中被解释为一个变量并替换为它的值。由于它没有值，因此将其替换为空字符串。

使用插入符号`^`转义 the ，`%`以便解释器将`%`视为普通字符。

```
c:\digitemp.exe -t0 -o^%C -q  > res1.txt 
```

# java - 内存数据库选项（开源和基于 Java）

> ID：10970635
> 
> 赞同：2
> 
> 时间：2012-06-10T17:13:56.727
> 
> 标签：java, web-services, caching, jetty, in-memory-database

我有一个代表其客户进行外部 Web 服务调用的 Web 应用程序。我想在 Web 应用程序中缓存某些 Web 服务返回的数据，以便其他客户端可以重用这些数据并对这些缓存数据运行过滤器和查询。

Web 应用程序的当前架构使用 Apache Camel、Spring 和 Jetty。我正在寻找内存数据库选项的选项（优点/缺点）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:12:57.247

Hazelcast (Java API) - 您可以非常轻松地将内存中的数据网格（带有地图、多地图、集合、列表、队列、主题）分布在多个节点上，并将加载/存储接口实现与基于磁盘的数据库一起使用。你可以用 EHCache 做类似的事情。

Redis 是另一种选择（使用 Java 客户端访问它）。您可以简单地配置 conf 文件以将数据写入磁盘（或完全避免）并且不必编写自己的加载/存储类。

除此之外，您还可以使用许多选项。不确定您是否只查看开源选项，查看分布式选项。
希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T15:01:37.260

Try [Redisson](http://redisson.org/) - distributed and scalable familar Java data structures (Set, Map, ConcurrentMap, List, Queue, Lock, AtomicLong, CountDownLatch, Publish / Subscribe) on top of in-memory db Redis.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:19:24.417

您是否考虑过使用[MemCached](http://memcached.org/)？它不是数据库，而是可以从应用程序内部控制的缓存系统。

* * *

这里有一些关于内存数据库的更多想法。首先，几乎每个现代 RDBMS 内部都有一个内存缓存系统。您为数据库服务器提供的内存越多（并将其配置为缓存），它将存储在内存中以供以后使用的内存越多。如果您将一个具有足够内存来缓存所有表的系统放在一起，那么您将拥有一个“内存中”缓存，而不会产生另一个数据库的开销。

大多数总“内存”数据库用于性能非常关键的大容量/大数据系统。而且，因为它们适用于性能极强的系统，所以您需要为它们付费。或者更具体地说，为他们支付额外费用。例如，支持全内存的 SAP/Sybase DB 的成本可能比我们现有的产品高 40% 到 300%。

所以，在回答你的问题时，你真的需要一个吗？

# java - 在庞大的 Java 代码库中查找执行流程

> ID：10970636
> 
> 赞同：1
> 
> 时间：2012-06-10T17:14:03.993
> 
> 标签：java, ant, reverse-engineering, sequence-diagram

我试图在不是我编写的大型 java 代码库中找到执行流程。我已经搜索了使这成为可能的工具（JSonde、JTrace、Java Call Tracert、JavacallTracer），但问题是它们都应该与单个 java/jar/class 文件一起使用。我试图理解的代码是用 Ant 构建的，并且有数百个 jars。因此，它使用 shell 脚本运行。我不知道如何在这段代码中使用这些工具。

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-01T14:20:37.517

我知道，这是一个老问题，但现在我找到了一个解决方案，如果其他人搜索相同的东西，我就把它放在这里：http: [//findtheflow.io/#gettingstarted](http://findtheflow.io/#gettingstarted)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T19:15:36.300

我认为你应该考虑的是一个代码覆盖工具。这将报告您的代码的哪些部分已执行，哪些未执行。有几个这样的工具需要考虑。[Jacoco](http://www.eclemma.org/jacoco/trunk/doc/ant.html)是新兴的宠儿，与[Emma Eclipse](http://www.eclemma.org/)插件相关联。

关于代码覆盖率要记住的一点是它需要由某些东西驱动。通常这是通过运行代码的测试（单元或集成）来完成的。

最后，一旦您对如何启用代码覆盖感到满意，您还可以考虑在[Sonar](http://www.sonarsource.org/measure-code-coverage-by-integration-tests-with-sonar/)中上传和存档它的结果。

# python - python动态创建类方法

> ID：10970639
> 
> 赞同：1
> 
> 时间：2012-06-10T17:15:06.483
> 
> 标签：python

对于某些 sqlalchemy 模型，我有一个相当复杂的基类，我想创建一个 rails 样式的设置器，但是，由于我对 python 还很陌生，所以我遇到了一个我似乎无法绕过的问题。**我在新**方法上创建了 setter，因此我可以在新实例和查询上触发，但无论我定义和执行什么 setter，它总是选择最后一个 setter 来执行。一个例子更好：

```
class Test(object):

    columns = ['email', 'username']

    def __new__( cls, *args, **kwargs ):
        for column in cls.columns:
            setattr( cls, "set%s" % column.capitalize(), lambda cls, v: cls.setAttribute( cls, column, v ) )
        return super( Test, cls ).__new__( cls, *args, **kwargs )

    @staticmethod
    def setAttribute(cls, attribute, value):
        print "Setting attribute %s with value %s" % ( attribute, value )
        setattr( cls, attribute, value )

test = Test()
test.setEmail('test@test.com') 
```

如您所见，我正在设置电子邮件，但是在执行时，代码会尝试设置作为最后一列的用户名。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:22:19.250

发生这种情况是因为您的`lambda`函数引用`column`但没有将其作为参数传递：

```
lambda cls, v: cls.setAttribute( cls, column, v ) 
```

执行此函数时，它将`column`在包含或全局范围内查找名称，并始终找到该值`'username'`，因为这是`column`最后设置的值。

这是使用默认参数值解决此问题的简单方法：

```
 def __new__( cls, *args, **kwargs ):
        for column in cls.columns:
            setattr( cls, "set%s" % column.capitalize(), lambda cls, v, column=column: cls.setAttribute( cls, column, v ) )
        return super( Test, cls ).__new__( cls, *args, **kwargs ) 
```

另一种选择是使用闭包（在某种程度上，可变的默认参数是一种闭包）：

```
 def __new__( cls, *args, **kwargs ):
        def make_setter(column):
            return lambda cls, v: cls.setAttribute( cls, column, v )
        for column in cls.columns:
            setattr( cls, "set%s" % column.capitalize(), make_setter(column))
        return super( Test, cls ).__new__( cls, *args, **kwargs ) 
```

# iphone - cocos2d FPS 一半在视网膜上的原因是什么？

> ID：10970643
> 
> 赞同：2
> 
> 时间：2012-06-10T17:15:33.053
> 
> 标签：iphone, ios, cocos2d-iphone, retina-display

**情况：**
iOS 上的 cocos2d。在模拟器中，我的 FPS 在标准分辨率设备模式下显示为 60，在视网膜设备模式下显示为 30（正好是一半）。谷歌搜索没有立即产生结果……有什么原因吗？

**代码：**

```
- (void) applicationDidFinishLaunching:(UIApplication*)application
{
    // Init the window
    window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Init the View Controller
    viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
    viewController.wantsFullScreenLayout = YES;

    // Try to use CADisplayLink director
    // if it fails (SDK < 3.1) use the default director
    if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
        [CCDirector setDirectorType:kCCDirectorTypeDefault];

    // Create glview
    EAGLView *glView = [EAGLView viewWithFrame:[window bounds]
                                   pixelFormat:kEAGLColorFormatRGBA8
                                   depthFormat:0
                        ];

     // make the OpenGLView a child of the view controller
     [viewController setView:glView];

     // make the View Controller a child of the main window
     [window addSubview: viewController.view];
     [window makeKeyAndVisible];

    // Create director
    director = [CCDirector sharedDirector];

    // attach the openglView to the director
    [director setOpenGLView:glView];

#if GAME_AUTOROTATION == kGameAutorotationUIViewController
    [director setDeviceOrientation:kCCDeviceOrientationPortrait];
#else
    [director setDeviceOrientation:kCCDeviceOrientationLandscapeLeft];
#endif

    [director setAnimationInterval:1.0/60];
    [director setDisplayFPS:YES];
    [director setDeviceOrientation:kCCDeviceOrientationPortrait];

    // Set premultiplied alpha
    [CCTexture2D PVRImagesHavePremultipliedAlpha:YES];

    // Default texture format for PNG/BMP/TIFF/JPEG/GIF images
    // It can be RGBA8888, RGBA4444, RGB5_A1, RGB565
    // You can change anytime.
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    // Enable High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    [director enableRetinaDisplay:YES]

    [self removeStartupFlicker];

    [SceneManager goLoadingScreen];
} 
```

**更新：**
也许这只是一个模拟器问题？见[http://www.cocos2d-iphone.org/forum/topic/20367](http://www.cocos2d-iphone.org/forum/topic/20367)

**为什么不在设备上进行测试？**
而且我不能只在我的视网膜设备上进行测试，因为我无知地将我的 iPhone4 升级到了最新版本的 iOS，而且我还没有准备好为 Lion 更新支付 30 美元......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T17:26:38.377

原因可能是 iPhone 模拟器没有明确的 GPU 硬件加速。在设备上测试，一切都应该没问题。

我的游戏在 iPad 视网膜模拟器上是 8fps，但在真实设备上是 60 FPS。用真机测试游戏性能，不用担心模拟器。

# java - 过滤消息正文，我强制关闭

> ID：10970644
> 
> 赞同：2
> 
> 时间：2012-06-10T17:15:35.093
> 
> 标签：java, android, string, sms, prefix

我想过滤带有前缀“kmsmks”的消息，编译成功但我强制关闭：

```
...
        String firstword = "kmsmks";

        while  (cursor.moveToNext()) 
        {   String address = cursor.getString(1);
            String body = cursor.getString(3);

            String firstmessageword = body.substring(0,7);

         if (firstword.equals(firstmessageword))

            {
                   System.out.println("======> Mobile number => "+address);
                   System.out.println("=====> SMS Text => "+body);

                   sms.add("Address=> "+address+"\n SMS => "+body);   
               }

        }
        return sms;
    }
… 
```

原始代码：[http ://www.technotalkative.com/android-fetch-inbox-sms/](http://www.technotalkative.com/android-fetch-inbox-sms/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:19:48.720

确保您已`android.permission.READ_SMS`在清单中添加

# php - 使用 php 和 javascript 的 url 缩略图预览

> ID：10970647
> 
> 赞同：0
> 
> 时间：2012-06-10T17:15:51.770
> 
> 标签：php, javascript, jquery

我需要在鼠标悬停时预览 url，我的应用程序是基于 php、js 和 jquery 构建的。虽然我有一个想法来满足我的要求，但对正确的方法有点困惑，我检查了这里发布的所有问题，但其中大多数是指一些第三方工具或可安装的。Frnakly 我不想使用它们，我认为我应该自己尝试一个。请您按照您的要求指导我完成最佳步骤吗？

谢谢！

2012 年 6 月 11 日最后我设法使用 Curl 并在我网站上的链接旁边放置的 Div 上预览网站，现在问题是在 Div 中拟合内容..有没有办法让我可以调整提取的 html 页面的 css 以使所有内容都适合 Div.scaledown 选项的固定高度和宽度吗？这会将所有内容缩小到所需的比例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:31:52.770

你可以用普通的 CSS 和 HTML 做到这一点：

```
.mouseover {
  position:absolute;
  width:200px;
  height:200px;
  top:5px;
  left:5px;
  display:none;
}
.link {
  position:relative;
}
.link:hover .mouseover {
  display:block;
} 
```

然后，在 HTML 中：

```
<a href="#" class="link">Link
  <div style="background:url('<URL HERE>')" class="mouseover"></div>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:36:54.843

好的，所以您想要获取网页的缩略图并在鼠标悬停时显示它。为此，您需要使用生成缩略图的工具或自己编写 PHP 脚本。这里有一些工具：

*   [网络快照](http://www.websnapr.com/)
*   [网站缩略图生成器](http://www.zubrag.com/scripts/website-thumbnail-generator.php)- 您可以将其安装在您自己的服务器上

如果您想自己编写，请查看[imagegrabwindow](http://php.net/manual/en/function.imagegrabwindow.php)。请注意，它需要 Windows 服务器。我不知道 PHP 是否有其他方法可以做到这一点。如果您不在 Windows 服务器上，您可以编写一个 bash 脚本来打开浏览器并使用[屏幕截图实用程序](http://freecode.com/projects/scrot)截取屏幕截图并将其保存到文件中以供您的网站获取。

您还必须确保拥有某种缓存，这样您就不会在每次用户将鼠标移到链接上时都这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-26T16:11:03.240

您可以使用 API 来执行此操作。例如， [ApiFlash](https://apiflash.com/)有一个免费计划，您每月最多可以使用 100 个屏幕截图。

这是使用 PHP 的样子：

```
<?php

$params = http_build_query(array(
    "access_key" => "YOUR_ACCESS_KEY"
    "url" => "https://example.com",
));

$image_data = file_get_contents("https://api.apiflash.com/v1/urltoimage?" . $params);
file_put_contents("screenshot_api_example.jpeg", $image_data);

?> 
```

该 API 的正常运行时间非常[好](http://apiflash.com.isdownorblocked.com)，因为它基于 AWS Lambda。

[![在此处输入图像描述](../Images/a9e6c64087fbd3e216b3a6567e07960c.png)](https://i.stack.imgur.com/O9o8Y.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-23T12:56:36.800

您可以为此使用[urlbox.io](https://urlbox.io)，这是该 URL 的示例预览缩略图：

[https://api.urlbox.io/v1/ca482d7e-9417-4569-90fe-80f7c5e1c781/32040df25d7c57da28ef4da7ce461af00d852653/png?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F10970647%2Fthumbnail-preview url-using-php-and-javascript&thumb_width=400](https://api.urlbox.io/v1/ca482d7e-9417-4569-90fe-80f7c5e1c781/32040df25d7c57da28ef4da7ce461af00d852653/png?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F10970647%2Fthumbnail-preview-of-a-url-using-php-and-javascript&thumb_width=400)

您可以看到传递给 Urlbox API 的选项只是**url**和**thumb_width**以设置所需的缩略图宽度（以像素为单位），在本例中我选择了 400 像素宽。

现在你要做的就是将它嵌入到这样的`<img>`标签中：

```
<img src="https://api.urlbox.io/v1/ca482d7e-9417-4569-90fe-80f7c5e1c781/32040df25d7c57da28ef4da7ce461af00d852653/png?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F10970647%2Fthumbnail-preview-of-a-url-using-php-and-javascript&thumb_width=400"/> 
```

# gwt - 将 GWT 从 1.7 升级到 2.0

> ID：10970651
> 
> 赞同：0
> 
> 时间：2012-06-10T17:16:17.650
> 
> 标签：gwt, gwt-rpc, gwt2, gxt

我正在尝试将 GWT 1.7.0 升级到 2.0.0，但出现以下错误。

`Errors in 'jar:file:/C:/src/lib/gxt.jar!/com/extjs/gxt/ui/client/widget/Component.java'`

根据下面的链接，我做了所有事情，如图所示。

[如何将 GWT 从 1.7 升级到 2.0](https://developers.google.com/web-toolkit/doc/2.0/ReleaseNotes_2_0#Upgrading)

我猜没有必要升级 GXT。我使用的 GXT 版本是 1.2.5 任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T20:03:48.667

绝对是 GXT 和 GWT 的兼容性问题。根据 GXT 网站，您需要将 gxt 版本至少升级到 2.0.2 版。尝试下载 GXT 2.2.5（非商业版）并尝试使用 GWT 2.0 甚至 2.4。

参考[这里](http://www.sencha.com/forum/showthread.php?82099-GXT-and-GWT-2.0-Cannot-reduce-the-visibility-of-the-inherited-method-from-Widget)

# javascript - 是否有一种跨浏览器的方法来获取所有元素的所有属性的使用的 css 值？

> ID：10970655
> 
> 赞同：6
> 
> 时间：2012-06-10T17:16:43.680
> 
> 标签：javascript, html, css, dom, w3c

我正在寻找页面上所有 DOM 元素的使用 css 值。当我说“使用的值”时，我指的[是 W3C 规范](http://www.w3.org/TR/CSS2/cascade.html#used-value)中指定的定义：

> **6.1.3 使用值**
> 
> 计算值尽可能在不格式化文档的情况下进行处理。但是，某些值只能在文档布局时确定。例如，如果将元素的宽度设置为其包含块的一定百分比，则在确定包含块的宽度之前无法确定宽度。使用的*值*是取计算值并将任何剩余的依赖关系解析为绝对值的结果。

这些应该是根据实际页面布局计算的最终值。[Mozilla 的文档](https://developer.mozilla.org/en/CSS/used_value)声称您可以使用`window.getComputedStyle`来获取使用的值，但这对我来说没有意义，因为计算的值与使用的值不同（我想要使用的值）。即使这些是使用的值，我也不确定这是否仅适用于 Firefox。有没有办法在所有浏览器中可靠地获取使用值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T17:29:33.690

**注意：**自从问题被提出和回答以来，世界已经在前进。现在有比以前更多的值层：*声明*、*级联*、*指定*、*计算*、*解析*、*使用*和*实际*。`getComputedStyle`返回*解析的值*（根据属性*计算*或*使用）。*以下是图层：

从[CSS 级联和继承级别 4](https://drafts.csswg.org/css-cascade-4/)：

> 一旦用户代理解析了一个文档并构建了一个文档树，它必须为树中的每个元素以及相应的格式化结构中的每个框分配一个适用于目标媒体类型的属性的值。
> 
> 给定元素或框的 CSS 属性的最终值是多步计算的结果：
> 
> 1.  首先，针对每个元素的每个属性，收集应用于元素的所有[*声明值。*](https://drafts.csswg.org/css-cascade-4/#declared-value)可能有零个或多个声明值应用于元素。
> 2.  级联产生[*级联值*](https://drafts.csswg.org/css-cascade-4/#cascaded-value)。每个元素的每个属性最多有一个级联值。
> 3.  默认产生[*指定的值*](https://drafts.csswg.org/css-cascade-4/#specified-value)。每个元素的每个属性都有一个指定的值。
> 4.  解决值依赖关系产生[*计算值*](https://drafts.csswg.org/css-cascade-4/#computed-value)。每个元素的每个属性都只有一个计算值。
> 5.  格式化文档会产生[*使用的值*](https://drafts.csswg.org/css-cascade-4/#used-value)。如果该属性适用于该元素，则该元素仅具有给定属性的使用值。
> 6.  最后，根据显示环境的限制，将使用值转换为[*实际值。*](https://drafts.csswg.org/css-cascade-4/#actual-value)与使用的值一样，元素上的给定属性可能有也可能没有实际值。

然后，[CSS 对象模型](https://drafts.csswg.org/cssom/)定义[*解析值*](https://drafts.csswg.org/cssom/#resolved-values)：

> `getComputedStyle()`历史上被定义为返回元素或伪元素的“计算值”。然而，“计算值”的概念在 CSS 的修订版之间发生了变化，而`getComputedStyle()`为了与部署的脚本兼容，实现必须保持不变。为了解决这个问题，本规范引入了已**解析值**的概念。
> 
> 给定的速记属性的解析值可以如下确定：

...后面是属性列表（特定属性和类别），说明解析的值是*计算*值还是*使用*值。

在这样的背景下：

`getComputedStyle`适用于所有主要的现代浏览器。早期版本的 IE 以[`currentStyle`](http://msdn.microsoft.com/en-us/library/ie/ms535231%28v=vs.85%29.aspx).

[`getComputedStyle`](https://developer.mozilla.org/en/DOM/window.getComputedStyle)返回已*解析的值*，对于任何给定的属性，它要么是*计算值*，要么是*使用的值*，CSSOM 规范清楚地定义了在哪种情况下返回哪些属性以及哪种值。[我在CSSC&I4](https://drafts.csswg.org/css-cascade-4/)或[CSSOM](https://drafts.csswg.org/cssom/)中没有看到任何定义在解析值不是使用值的情况下访问使用值的方法，或访问实际值的方法，[gsnedders](https://stackoverflow.com/users/478176/gsnedders)说他们已经与工作组核实并确认没有办法获得*使用*的值，至少现在还没有。

解析的值可能足以满足您的需要。例如，以下示例显示`207.5px`or 类似，not `50%`。那是解析的值，这也是此特定情况下的使用值（因为我在is not或`width`的元素上使用了），但可能不是实际值，具体取决于子像素渲染在这种情况下是否可行和合适。`display``none``contents`

```
(function() {
  var target = document.getElementById("target");
  var style = window.getComputedStyle(target);
  display("computed width = " + style.width);

  function display(msg) {
    var p = document.createElement('p');
    p.innerHTML = String(msg);
    document.body.appendChild(p);
  }
})();
```

```
<div id="target" style="display: inline-block; width: 50%">x</div>
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-10T23:39:45.863

在大多数情况下，您可以使用 jQuery 或其他首选库。

例如，您的问题标题已`font-size:100%`应用到它，可以用萤火虫检索。但是使用[jQuery api](http://api.jquery.com/css/)，您可以像这样检索使用的值：

```
$('#question-header .question-hyperlink').css('font-size');//run in console
//or enter this in the url bar
//javascript:alert($('#question-header .question-hyperlink').css('font-size'));
//returns "23.06px" 
```

注意这个页面上包含了这个库，但是创建一个包含 jQuery 并轮询必要属性的书签​​是相当简单的。

# jquery - jQuery和ajax响应函数

> ID：10970663
> 
> 赞同：1
> 
> 时间：2012-06-10T17:17:49.470
> 
> 标签：jquery, function, response

我有这些功能。我的目标是将加载函数与脚本的其余部分分开，因为我想自定义加载消息

```
function loadContent(url)
{
    $('body').html('Loading');
    content = load(url);
    $('body').html(content);
}

function load(url)
{

    var result = null;
    var scriptUrl = url;
    $.ajax({
        url: scriptUrl,
        type: 'get',
        dataType: 'html',
        async: false,
        success: function(data) {
            result = data;
        } 
    });
    return result;
} 
```

现在，我调用 loadContent 函数：

```
$(document).ready(function(e) {
    loadContent('index.php');    
}); 
```

问题出在这一行：

```
content = load(url); 
```

因为函数 load() 覆盖了加载消息。

我该如何解决这个问题？多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:20:13.337

由于您的 ajax 成功需要一些时间来从服务器检索数据，因此您的返回将始终为空，即未定义。所以你需要在 ajax 成功函数中加载内容。

```
function beforeLoad(){
   $('body').html('Loading');
}

function loadContent(data)
{
    $('body').html(data);
}

function load(url)
{
    var result = null;
    var scriptUrl = url;
    $.ajax({
        url: scriptUrl,
        type: 'get',
        dataType: 'html',
        async: false,
        success: function(data) {
            result = data;
            loadContent(result);

            // You can also set result as html without calling a loadContent

            $('body').html(data);
        } 
    });
}

$(document).ready(function(e) {
    beforeLoad();
    load('index.php');    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:21:26.710

尝试这个：

```
function load(url)
{
    return $.ajax({
        url: url,
        type: 'get',
        dataType: 'html',
        async: false
    }).responseText;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:40:04.260

在 ajax 事件成功返回之前，您不能尝试使用数据。试试这个，看看它是否有帮助。

```
function loadContent (url) {
    var content = {};
    $('body').ajaxStart(function() {
        $(this).html('Loading');
    }).ajaxSuccess(function() {
        $(this).html(content.key);
    }).ajaxError(function() {
        $(this).html('Error');
    });

    load(url, content);
}

function load(url, content)
{
    var scriptUrl = url;
    $.ajax({
        url: scriptUrl,
        type: 'get',
        dataType: 'html',
        success: function(data) {
            content['key'] = data;
        } 
    });
} 
```

# android - Android 后台线程：从 Activity 启动和从服务启动之间的区别

> ID：10970666
> 
> 赞同：3
> 
> 时间：2012-06-10T17:18:03.370
> 
> 标签：android

`Activity`从 a 和从 a`Service`启动的后台线程有什么区别`Activity`吗？*补充：*后台线程不与 UI 交互。

我目前有一些从`Activity`. 大多数是通过`AsyncTask`，一个是通过我自己的`ExecutorService`。我想知道重构代码以将它们移动到 a`Service`或`IntentService`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:45:28.587

您似乎对活动和服务的定义感到困惑。说清楚：

*   *活动*是根据活动生命周期状态机运行的事物。各个处理程序中的代码与附加到 UI 的事件循环交互。
*   *服务*是根据服务生命周期状态机运行的事物。各个生命周期处理程序中的代码执行操作以处理 Intent 等内容，但不*通过*UI 与用户交互。

然而，这两者都在应用程序的“主线程”上运行。就其本身而言，活动或服务（或广播接收器、内容提供者等）*不是*线程。查看文档，您会发现 Activity 和 Service 类实际上并没有形成线程。相反，它们是在 Android 框架内运行的钩子，框架将在适当的时候在应用程序的“主”线程上调用它们。

您可以为应用程序*创建*单独的线程，或者使用 an`AsyncTask`来完成工作并将其轻松发布到 UI 线程（使用 Service 不太容易实现这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:39:31.017

绑定到活动的线程具有相同的生命周期。因此，如果您重新启动/杀死 Activity，线程也将被重新启动/杀死。如果您不管理 Activity 的生命周期，这将是一个问题。在这种情况下，服务很好。您可以销毁活动，并且仍然在后台（在服务中）运行工作线程。但请注意，如果 Android 系统需要资源（例如内存），它将首先终止服务（然后根据它们的 Sticky 标志重新启动它们）。在我看来，将线程从 Activity 更改为 Service 并没有实际的好处，因为您可以控制 Activity 的工作流程。如果线程很重（并且会暂时停止 UI），请考虑将它们放在单独进程上的服务中（在 AndroidManifest 中放置服务的进程名称）。

在 Android 文档中：

> 注意：使用工作线程时您可能会遇到的另一个问题是由于运行时配置更改（例如当用户更改屏幕方向时）导致活动中的意外重启，这可能会破坏您的工作线程。要了解如何在这些重启之一期间保留您的任务以及如何在活动被销毁时正确取消任务，请参阅 Shelves 示例应用程序的源代码。

# java - 使 RadioGroup 检查 ACTION_DOWN 上的按钮

> ID：10970667
> 
> 赞同：2
> 
> 时间：2012-06-10T17:18:03.990
> 
> 标签：java, android

我设法通过在每个 RadioButton 上添加“actionDownChecker”来做到这一点。

```
private View.OnTouchListener actionDownChecker = new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            if (motionEvent.getAction() == MotionEvent.ACTION_DOWN){
                mTabbar.check(view.getId());
            }
            return true;
        }
    };

public void add(int radioButtonResourceId, Class<? extends Fragment> contentClass) {
    mContent.put(radioButtonResourceId, new TabInfo(radioButtonResourceId, contentClass));
    //hack to check radio button on ACTION_DOWN, not UP!
    mTabbar.findViewById(radioButtonResourceId).setOnTouchListener(actionDownChecker);
} 
```

还有另一种更优雅的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:50:00.173

我知道如何做到这一点的唯一另一种方法是物理更改侦听器中的代码。在为 android 开发时，我不是最聪明的人，但默认构造函数设置附加到 RadioButtons 的框以检查发布。

除非其他人知道我不知道的事情，否则您要么必须修改侦听器类，要么在触发侦听器后修改条目（通过添加您的 actionDownCheker）。就我个人而言，如果是我，我只会复制并粘贴你的 actionDownChecker，这样你的监听器类就不会为你的下一个项目搞砸了。

我敢肯定有一些应用程序，但我不确定你为什么要这样做。如果有人按下了错误的按钮，他们可以在释放按钮之前移开按钮以取消按下。

# php - 从每周开始查找当前一周的日期范围

> ID：10970668
> 
> 赞同：0
> 
> 时间：2012-06-10T17:18:30.343
> 
> 标签：php, date

假设我有一个可用的日期：2012-06-11

我想找到当前周的日期范围，

截至今天当周：2012-06-06 ~ 2012-06-12（周三至下周二）

例 1。06-17(太阳) 范围= 06-13(星期三) ~ 06-19(星期二)
ex2: 06-21(星期四) 范围= 06-20(星期三) ~ 06-26(星期二)

我怎样才能找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:33:44.437

```
echo date('Y-m-d', strtotime('2012-06-21 last wednesday')), ' ~ ', date('Y-m-d', strtotime('2012-06-21 tuesday')); 
```

可能有更好，更有效的方法来做到这一点，但这是快速简便的方法

# performance - 共享服务器上 memcache 的性能

> ID：10970675
> 
> 赞同：1
> 
> 时间：2012-06-10T17:19:32.810
> 
> 标签：performance, wordpress, caching, memcached, lighttpd

最近我一直在尝试提高我的博客的性能，不仅是一键修复，而且还查看代码以及 CDN、缓存等其他内容。

我与我的主机讨论了安装 memcache 以便我可以在 W3 Total Cache 中启用它，他似乎认为它实际上会阻碍我的网站，因为它会立即最大化我的 RAM 使用量（即 1GB）。

你认为他是准确的，我是否应该尝试一下？我的博客和论坛 (MyBB) 每月的综合浏览量达到 200,000 次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T07:05:08.063

事实上，每月有 200.000 次浏览量，我会从“共享”主机中走出来，购买 VPS 或专用服务器或其他东西，Memcache(d) 确实是一个很好的工具，但还有很多其他方法可以获得更好的性能。

如果您知道如何正确使用 Memcached，它是很好的（w3 总缓存 memcached 的东西，不能胜任这项工作）。

作为一名性能工程师，我经常考虑速度，但也考虑服务器负载和其他东西。我在 wordpress 网站上工作很多，我在服务器上将性能提高到最大的方式是生成我的 wordpress 网站的 HTML 页面，这将导致对 PHP 处理程序本身的 0 或最小访问，从而大大提高了性能.

然后你可以做的是在 web 服务器前面添加另一个缓存代理，等等 Varnish，它会缓存结果，这意味着你也永远不会接触 web 服务器。

它会做的是，当客户端请求您的页面时，它将直接通过内存为已经处理的页面提供服务，这非常快。然后，您的文件上有一个 TTL，并且可以低至 50 秒，这是默认值。50 秒听起来并不多。但是，如果您有 200k 的综合浏览量，这意味着如果您每分钟的综合浏览量相同，那么您每分钟将有 4.5 次综合浏览。所以高峰时间不算。

当您进行 1 次页面查看时，将进行大量处理：

向网络服务器发出第一个请求，启动 php 进程，处理数据，从 DB 中抓取东西，处理数据，处理 PHP 站点等。如果我们可以对几个请求执行此操作，它将加快性能.

通常你也应该能够生成你的论坛的 HTML 文件，如果有对文件的请求，它会每 1-2 分钟更新一次。它将需要处理 1 个请求而不是 4-9 个请求（如果不是更多）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T22:47:03.540

您可以限制 memcached 使用的内存量。如果内存已用完，则最旧的条目将被修剪。在 CentOS/Debian 中，您可以使用该标志`/etc/default/memcached`设置最大内存。`-m`

以我的经验，64MB 甚至 32MB 的 memcached 内存对于 Wordpress 来说已经足够了，并且会产生巨大的影响。确保不要缓存整个页面（这会很快填满缓存），而是将 memcache 用于[Wordpress Object Cache](http://codex.wordpress.org/Class_Reference/WP_Object_Cache)。

对于一般性能：确保拥有最新的 PHP 版本（5.3+）并安装了[APC](http://pecl.php.net/package/APC)。对于数据库查询，我会跳过 W3TC 并直接使用[MySQL Query Cache](http://dev.mysql.com/doc/refman/5.5/en/query-cache.html)。

# c# - Asp.NET MVC3 - 访问区域的控制器在 URL 中没有区域

> ID：10970679
> 
> 赞同：1
> 
> 时间：2012-06-10T17:20:26.380
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-3-areas

我使用 ASP.NET MVC3 框架创建了一个 Web 应用程序。在项目中，我使用 HomeController 和 Index 操作添加了名为 Administrator 的新区域。

它与 `http://localhost:2813/Administrator/Home/Index`

但是当我尝试使用 URL 访问时 `http://localhost:2813/Home/Index`

我收到一条错误消息：

> “/”应用程序中的服务器错误。
> 
> 未找到视图“索引”或其主视图，或者没有视图引擎支持搜索的 > > > 位置。搜索了以下位置：~/Views/Home/Index.aspx ~/Views/Home/Index.ascx ~/Views/Shared/Index.aspx ~/Views/Shared/Index.ascx ~/Views/Home/Index。 cshtml ~/Views/Home/Index.vbhtml ~/Views/Shared/Index.cshtml ~/Views/Shared/Index.vbhtml
> 
> 说明：当前web>>>请求执行过程中发生了未处理的异常。请查看堆栈跟踪以获取有关错误的更多信息以及它 > 源自代码的位置。

我还在 maproute 中添加了命名空间，但它仍然无法正常工作。有人有想法吗？谢谢。

更新问题：

这是 Global.ascx 中的 MapRoute `routes.MapRoute( "Default", "{controller}/{action}/{id}", new { controller = "Default", action = "Index", id = UrlParameter.Optional }, new[] { "SampleWebsite.Controllers" } );`

这是 AdministratorAreaRegistration.ascx `context.MapRoute( "Administrator", "Administrator/{controller}/{action}/{id}", new { area = "Administrator", controller = "Dashboard", action = "Index", id = UrlParameter.Optional }, new[] { "SampleWebsite.Areas.Administrator.Controllers" } );`

**编辑**
如果我将 MapRoute 从 Global 移动到 AdministratorAreaRegistration 问题得到解决（我无法理解和解释它）
`context.MapRoute( "Administrator", "Administrator/{controller}/{action}/{id}", new { area = "Administrator", controller = "Dashboard", action = "Index", id = UrlParameter.Optional }, new[] { "SampleWebsite.Areas.Administrator.Controllers" } );`
`context.MapRoute( "Default", // Route name "{controller}/{action}/{id}", // URL with parameters new { area = "", controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults namespaces: new[] { "SampleWebsite.Controllers" } );`

现在，所有请求都`localhost/Home/Index`将是未找到响应 404。仅允许具有确切区域名称（管理员）的请求。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:23:24.930

当您使用该网址时`/Home/Index`，您不会经过该区域。一个区域在您的路由中定义了一个`Administrator`前缀，并且该前缀在 url 中的存在允许路由引擎识别您在该区域内。

有一些[可能的解决方法](https://stackoverflow.com/a/2172349/29407)来设置默认区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:31:02.373

如果您需要区域内的起始页，请在默认区域的 HomeController ( `/Controllers/HomeController.cs`) 中考虑这一点：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return RedirectToAction("Index", "Home",
            new { area = "Administrator" });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T14:57:44.957

感谢您添加路线。如果您想要在 url 中没有指定区域时使用您的管理区域，您可以尝试将 Global.asax 中的路由替换为：

```
routes.MapRoute( "Default", "{controller}/{action}/{id}", new { area = "Administrator", controller = "Home", action = "Index", id = UrlParameter.Optional }, new[] { "SampleWebsite.Areas.Administrator.Controllers" } ); 
```

# php - Facebook 页面访问令牌有效期长度

> ID：10970682
> 
> 赞同：0
> 
> 时间：2012-06-10T17:21:06.847
> 
> 标签：php, facebook, access-token, facebook-access-token

我已经研究出如何获取 facebook 页面访问令牌并将其发布到页面的墙上。我想知道facebook页面访问令牌是否过期，如果过期多久？此外，如果它确实过期了，我该怎么做才能延长它的有效期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:36:41.603

默认情况下，页面访问令牌不会过期——但如果获取它们的用户更改了密码，它们就会失效。

仅当您在从 API 请求页面的 access_token 之前获得页面管理员的长期访问令牌时才适用，否则它会与用户的 access_token 一起过期 - 请参阅场景 5

# winforms - 中止这个文件搜索线程是否安全？

> ID：10970684
> 
> 赞同：1
> 
> 时间：2012-06-10T17:21:28.633
> 
> 标签：winforms, multithreading, thread-safety, thread-abort

首先，代码：

```
lblFileNbr.Text = "?/?";
lblFileNbr.ToolTipText = "Searching for files...";
lock(_fileLock)
{
    _dirFiles = new string[0];
    _fileIndex = 0;
}
if(_fileThread != null && _fileThread.IsAlive)
{
    _fileThread.Abort();
}
_fileThread = new Thread(() =>
    {
        string dir = Path.GetDirectoryName(fileName) ?? ".";
        lock (_fileLock)
        {
            _dirFiles = GetImageFileExtensions().SelectMany(f => Directory.GetFiles(dir, f, _searchOption)).OrderBy(f => f).ToArray();
            _fileIndex = Array.IndexOf(_dirFiles, fileName);
        }
        int totalFileCount = Directory.GetFiles(dir, "*.*", _searchOption).Length;

        Invoke((MethodInvoker)delegate
        {
            lblFileNbr.Text = string.Format("{0}/{1}", NumberFormat(_fileIndex + 1), NumberFormat(_dirFiles.Length));
            lblFileNbr.ToolTipText = string.Format("{0} ({1} files ignored)", dir, NumberFormat(totalFileCount - _dirFiles.Length));
        });
    });
_fileThread.Start(); 
```

我正在构建一个小的图像查看程序。打开图像时，它会列出同一目录中的文件数。我注意到，当我在包含许多其他文件（比如 150K）的目录中打开图像时，构建文件列表需要几秒钟。因此，我将此任务委托给另一个线程。

但是，如果您在完成搜索文件之前打开另一个图像，则旧计数不再相关，因此我将中止线程。

我正在锁定`_dirFiles`，`_fileIndex`因为我想添加一些关键功能`Left`来`Right`在照片之间切换，所以我必须在其他地方访问那些（但在 UI 线程中）。

这安全吗？现在 C# 中处理线程的方法似乎有几十种，我只是想要一些简单的方法。

* * *

`fileName`是一个局部变量（这意味着它将被“复制”到匿名函数中，对吗？），并且`_searchOption`是只读的，所以我想这两个是可以安全访问的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T19:16:59.847

> > 中止这个文件搜索线程是否安全？

简短的回答是**否定的！**

中止线程几乎是不安全的，当您可能正在执行本机代码时，此建议更适用。

如果您不能足够快地合作退出（因为您的调用`Directory.GetFiles`需要时间），您最好的选择是放弃线程：让它干净地完成但忽略它的结果。

一如既往，我推荐阅读[Joe Albahari 的免费电子书](http://www.albahari.com/threading/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:55:40.487

使用 Thread.Abort() 中止线程是不安全的。但是您可以改为实现自己的中止，这可以让您以受控方式安全地关闭线程。

如果使用 EnumerateFiles 而不是 GetFiles，则可以在递增计数器时循环遍历每个文件以获取文件总数，同时检查标志以查看线程是否需要中止。

调用诸如此类的东西来代替您当前的 GetFiles().Length：

```
private bool AbortSearch = false;
private int NumberOfFiles(string dir, string searchPattern, SearchOption searchOption)
{
    var files = Directory.EnumerateFiles(dir, searchPattern, searchOption);
    int numberOfFiles = 0;
    foreach (var file in files)
    {
        numberOfFiles++;

        if (AbortSearch)
        {
            break;
        }
    }
    return numberOfFiles;
} 
```

然后你可以替换

```
_fileThread.Abort(); 
```

和

```
AbortSearch=true;
_fileThread.Join(); 
```

您将使用当前的 Thread.Abort() 实现您的目标，但您将允许所有线程在您希望的时候干净地结束。

# java - 我应该在 Android 中使用 View 还是 Canvas 类进行绘制？

> ID：10970687
> 
> 赞同：2
> 
> 时间：2012-06-10T17:22:02.577
> 
> 标签：java, android

我正在为 Android 开发，对编写 2d 全屏游戏的最佳方式有点困惑。在我的游戏的桌面 PC 版本上，我创建了一个扩展 Canvas 类的类，然后从那里开始，重载 update() 方法以绘制到屏幕上。我的意图是将它移植到Android。

但是我注意到一些在线教程不使用 Canvas，而是使用 View。例如，我习惯于使用 Canvas 和使用 drawImage() 绘制图形对象。

两者（画布或视图）中是否有最佳（即最快、最被接受）的选择，或者无关紧要。也许一个扩展另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:33:05.367

视图是您的基本小部件，可以将其想象为一个空白面板，可以向其中添加其他小部件，或者您可以使用它来实现自己的小部件。视图有一个可以覆盖的绘制方法，该方法将画布作为参数。您使用该方法进行渲染。您正在寻找的绘制操作符应该可以从绘制到 Canvas 的 Paint 类中获得。

# ajax - MVC 4、Jquery Mobile、Ajax.BeginForm 导致表单提交两次

> ID：10970691
> 
> 赞同：5
> 
> 时间：2012-06-10T17:22:22.483
> 
> 标签：ajax, jquery, jquery-mobile, asp.net-ajax, asp.net-mvc-4

有谁知道任何错误或其他见解来解释为什么将 MVC4 与 jquery mobile 一起使用时，使用 Ajax.BeginForm 创建的任何表单都会导致表单被提交两次到控制器。

我原本以为，由于我使用的是 js 捆绑，同一个 js 文件可能已被包含两次，并且可能会在表单提交时触发，但事实并非如此，我的 js 文件列表是：

```
jquery-1.6.4.js
jquery-ui.1.8.11.js
jquery.mobile-1.1.0.js
jquery.unobtrusive-ajax.js
jquery.validate.js
knockout-2.0.0.js
MicrosoftAjax.js
MicrosoftMvcAjax.js
MicrosoftMvcValidation.js
Modernizr.js 
```

在项目中，Ajax 对所有内容都完全启用，即我没有通过 mobileinit 禁用任何内容。

我没有发布任何表单代码，因为它确实发生在每个表单上——具有一个字段和一个提交按钮的表单将导致提交两次——但仅限于使用 Ajax.BeginForm 的地方。

Html.BeginForm 没有表现出任何这些问题。

我已经坚持了几天了，所以任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T17:54:28.290

默认情况下，jQuery Mobile 劫持任何表单提交并执行其自己的 AJAX 请求。要停止这种行为，您可以将`data-ajax="false"`属性放在任何`<form>`标签上。还要确保停止表单的常规行为，使其无法正常提交，例如：

```
$('#my-form').on('submit', false); 
```

文档：http: [//jquerymobile.com/demos/1.1.0/docs/forms/forms-sample.html](http://jquerymobile.com/demos/1.1.0/docs/forms/forms-sample.html)

您也可以只使用内置的 jQuery Mobile AJAX，而不是为其添加额外的 JS。这只需要您将`action`表单的属性添加到它们发布到的服务器端文件中。

# algorithm - 将 BASE-14 转换为 BASE-7 的直接方法

> ID：10970693
> 
> 赞同：1
> 
> 时间：2012-06-10T17:22:43.507
> 
> 标签：algorithm, math, radix

在 base-14 中给出 (3AC)。将其转换为 BASE-7。

一种简单的方法是先将 3AC 转换为 BASE-10，然后再转换为 BASE-7，得到 2105。

我只是想知道是否存在从 BASE-14 到 BASE-7 的直接转换方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:39:41.970

正如其他人所说，没有简单的技术，因为 14 不是 7 的幂。

但是，您不需要通过 base-10。一种方法是编写执行 base-14 算术（特别是加法和乘法）的例程，然后使用它们依次处理每个 base-7 数字：将其乘以相关的 7 次幂，然后将其添加到累加器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T00:24:21.660

我找到了一种方法。

无需计算以 10 为底，然后以 7 为底。可以使用此公式完成！如果 a no X 在基数 14 中表示为 X = an a(n-1) a(n-2) .... a(0)

然后在base 7中我们可以写成

X=.....rqp

其中
**p=(2^0)a(0)%7;
q=((2^1)a(1) + p/7)%7
r=((2^2)a(2) + q/7)%7**
..........
第n项=((2^n)a(n) + (n-1)th term/7)%7
（将更进一步，因为以 14 为底的数字将需要以 7 为底的更多数字）。

逻辑很简单，仅基于碱基的属性，并考虑到 7 是 14 的一半这一事实。否则这将是一项乏味的任务。

例如。这里给出3AC。
C = 12;
所以最后一位是 (2^0 * 12)%7 = 5
A=10
下一位是 (2^1 * 10 + 12/7)%7 = (20+1)%7=21%7=0
下一位是3；
下一个数字是 (2^2 * 3 + 21/7)%7 = (12+3)%7=15%7=1
下一个是空的(0);
下一位是 (2^3 * 0 + 15/7)%7 = (0+2)%7=2%7=2

因此，以 7 为基数的数字将是 2105。这种方法可能看起来令人困惑和困难，但只要稍加练习，它在解决类似类型的问题时可能会非常方便！另外，即使数字很长，比如 287AC23B362，我们也不必不必要地查找基数 10，这可能会消耗至少一些时间，直接计算基数 7！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T17:30:57.880

不，没有一种简单的方法可以随心所欲地做，因为 14 不是 7 的幂。

对于这样的事情，我所知道的唯一技巧（例如很容易从十六进制变为二进制）要求一个基础是另一个基础的力量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T17:25:58.533

[http://mathforum.org/library/drmath/view/55783.html](http://mathforum.org/library/drmath/view/55783.html)给出了一个合理的明确答案。简而言之，从我所知道的方法来看，它有点痛苦。

# python - 在python中绘制饼图（使用matplotlib）

> ID：10970696
> 
> 赞同：0
> 
> 时间：2012-06-10T17:23:17.673
> 
> 标签：python

我有一个`.txt`包含以下数据的文件：

```
He: 22.1
Ar: 21.1
K:  1.22
U:  0.09
P:  22.0 
```

现在我想做的是使用第 2 行到第 4 行绘制一个饼图。我已经设法使用以下代码使用前 4 行绘制了一个类似的饼图：

```
f=open(filename,'r')
line = (f.next() for i in range(4))
pieces = (lin.split(':') for lin in line)
data = (a, float(b)) for a, b in pieces)
labels,values = zip(*data)
plt.pie(values,labels=labels) 
```

使用此代码，我可以设法绘制前 4 行的类似饼图。但是在使用 line2 和 line4 进行选择性绘图的情况下，我如何在此处使用切片来取出所需的线条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T03:20:18.163

这真的很简单，如果我明白你在问什么。将文件读取行更改为

```
line = f.readlines () 
```

这会将所有数据放入列表中。然后将您的最后一行更改为

```
plt.pie (values [start:stop], labels=labels [start:stop]) 
```

当然，您事先定义的位置`start`。`stop`因此，对于第 2 到 4 行，您将设置`start = 2`and `stop = 5`。这就是你所追求的吗？

# parsing - 在语句结尾解析可选分号

> ID：10970699
> 
> 赞同：10
> 
> 时间：2012-06-10T17:23:56.373
> 
> 标签：parsing, bison, yacc, lexer

我正在编写一个解析器来解析类似 C 的语法。

首先，它现在可以解析如下代码：

```
a = 1;
b = 2; 
```

现在我想将行尾的分号设为可选。

最初的 YACC 规则是：

```
stmt: expr ';' { ... } 
```

新行由我自己编写的词法分析器处理（代码被简化）：

```
rule(/\r\n|\r|\n/)          { increase_lineno(); return :PASS } 
```

这里的 :PASS 指令相当于在 LEX 中不返回任何内容，它会删除当前匹配的文本并跳到下一条规则，就像通常对空格所做的那样。

因此，我不能简单地将我的 YACC 规则更改为：

```
stmt: expr end_of_stmt { ... }
;
end_of_stmt: ';'
    | '\n'
; 
```

所以我选择相应地由解析器动态改变词法分析器的状态。

像这样：

```
stmt: expr { state = :STATEMENT_END } ';' { ... } 
```

并添加一个可以将新行与新状态匹配的词法分析器规则：

```
rule(/\r\n|\r|\n/, :STATEMENT_END) { increase_lineno(); state = nil; return ';' } 
```

这意味着当词法分析器处于 :STATEMENT_END 状态时。它会像往常一样首先增加行号，然后将状态设置为初始状态，然后假装自己是一个分号。

奇怪的是它实际上不适用于以下代码：

```
a = 1
b = 2 
```

我调试它并得到它实际上并没有得到';' 正如预期的那样，当扫描数字 1 之后的换行符时，状态指定的规则并没有真正执行。

并且设置新状态的代码在它已经扫描新行并且没有返回任何内容之后执行，这意味着这些工作按以下顺序完成：

1.  扫描`a`，`=`和`1`
2.  扫描换行符并跳过，所以得到下一个值`b`
3.  插入的代码（`{ state = :STATEMENT_END }`）被执行
4.  `b`引发错误——这里出乎意料

这是我所期望的：

1.  扫描`a`，`=`和`1`
2.  发现它符合规则`expr`，所以归约为`stmt`
3.  执行插入的代码以设置新的词法分析器状态
4.  扫描换行符并`;`根据新的状态匹配规则返回a
5.  继续扫描并解析以下行

经过反省，我发现这可能是由于 YACC 使用 LALR(1) 导致的，该解析器将首先向前读取一个令牌。当它扫描到那里时，状态尚未设置，因此无法获得正确的令牌。

我的问题是：如何让它按预期工作？我对此一无所知。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T19:16:56.277

首先要认识到的是，使用像这样的可选行终止符会在您的语言中引入歧义，因此您首先需要确定要解决歧义的方式。在这种情况下，主要的歧义来自可能是中缀或前缀的运算符。例如：

```
a = b
-c; 
```

您想将以上内容视为单个 expr 语句，还是视为省略第一个分号的两个单独语句？类似 C 语言中的函数调用语法也会出现类似的潜在歧义：

```
a = b
(c); 
```

如果您希望这些解决为两个语句，您可以使用您尝试过的方法；您只需要提前设置状态一个令牌。这会变得很棘手，因为如果您有未闭合的括号，您不想设置状态，因此您最终需要一个额外的状态变量来记录括号嵌套深度，并且只设置 insert-semi-before-newline 状态是0。

如果您想将上述情况作为一个语句来解决，事情就会变得棘手，因为您实际上需要更多的前瞻性来决定换行符何时应该结束语句——至少您需要在换行符之后查看标记（以及任何评论或其他被忽略的东西）。在这种情况下，您可以让词法分析器进行额外的前瞻。如果您使用的是 flex （您显然不是？），我建议您使用`/`运算符（直接向前看），或者推迟返回分号，直到与下一个标记匹配的词法分析器规则。

一般来说，在进行这种标记状态记录时，我发现在可能的情况下完全在词法分析器中完成它是最容易的，因此您不必担心有时（但并非总是）由解析器完成的额外前瞻标记. 在这种特定情况下，一种简单的方法是让词法分析器记录看到的括号（+1 表示`(`，-1 表示`)`），并返回最后一个标记。然后，在换行规则中，如果括号级别为 0，并且最后一个标记是可以结束表达式的东西（ID 或常量或`)`或仅后缀运算符），则返回额外的`;`

另一种方法是让词法分析器`NEWLINE`作为自己的标记返回。然后，您将更改解析器以接受`stmt: expr NEWLINE`语法中大多数其他标记之间的可选换行符。这会将歧义直接暴露给解析器（它现在不是 LALR(1)），因此您需要通过使用 yacc 的运算符优先级规则（棘手且容易出错）或使用诸如 bison 的`%glr-parser`选项或 btyacc 的回溯能力来解决它直接带有歧义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T17:37:40.860

您正在尝试的当然是可能的。

事实上，Ruby 正是这样做的，它有一个 yacc 解析器。换行软终止语句，分号是可选的，并且语句“如果需要”会自动在多行上继续。

解析器和词法分析器之间的通信可能是必要的，是的，遗留 yacc 是 LALR(1)。

我不知道Ruby是如何做到的。我的猜测一直是它实际上并没有（太多）通信，而是词法分析器识别显然没有完成的结构，并且默默地将换行符视为空格，直到括号和括号平衡。它还必须注意行何时以二元运算符或逗号结尾并吃掉这些换行符。

只是一个猜测，但我相信这种技术会奏效。[Ruby 是开源的……](http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p194.tar.gz)如果你想看看[Matz](http://en.wikipedia.org/wiki/Yukihiro_Matsumoto)是如何做到的。

# python - 在 Python 中对具有非数字索引的多维字典进行排序

> ID：10970704
> 
> 赞同：2
> 
> 时间：2012-06-10T17:24:52.213
> 
> 标签：python, sorting, dictionary

所以我有一个多维字典，它有一个数字键标识一个内部字典，但内部字典没有数字键。我很难根据内部字典的字符串索引之一的值创建一个排序的键列表。我可能没有正确描述这个问题，所以这里是一个突出问题的示例脚本：

```
#! /usr/bin/python
my_dict = {
        12608: {
                'market_data':  {
                    'sellVolume': 69210, 'buyValue': 296.20999999999998,  
                    'sellValue': 523.20000000000005, 'buyVolume': 9210899
                    }
            },
        24513: {
            'market_data': {
                'sellVolume': 42148, 'buyValue': 548.95000000000005,  
                 'sellValue': 890.0, 'buyVolume': 11213386
                }
            },
        12773:  {
                'market_data': {
                    'sellVolume': 383000, 'buyValue': 609.54999999999995, 
                    'sellValue': 799.98000000000002, 'buyVolume': 10285288
                    }
            },
        24486: {
            'market_data': {
                'sellVolume': 1314250, 'buyValue': 99.780000000000001,  
                'sellValue': 425.0, 'buyVolume': 14690060
                }
            },
        2801: {
            'market_data': {
                'sellVolume': 247577, 'buyValue': 348.98000000000002, 
                'sellValue': 518.94000000000005, 'buyVolume': 10325916
                }
            }
    }

d_sorted = sorted(my_dict, key=lambda \
       x: my_dict[x]['market_data']['buyValue'], reverse=True)

print "key\tbuyValue"
for key in d_sorted:
    print "%d\t%.2f" % (key, my_dict[key]['market_data']['sellValue']) 
```

这是脚本的结果

```
# Results:
# key         buyValue
# 12773   799.98
# 24513   890.00
# 2801    518.94
# 12608   523.20
# 24486   425.00

# Expected:
# key         buyValue
# 24513   890
# 12773   799.98
# 12608   523.2
# 2801     518.94
# 24486   425 
```

示例字典不是我的完整用例，而是显示问题的精简版本（例如，还有另一个对问题不重要的内部字典）。我之所以提到这一点，是因为可能有比我不知道的字典更好的数据类型来使用，这是 python 的新手。

这里的[问题](https://stackoverflow.com/questions/10771234/appropriate-data-structure-for-sorting-a-multi-dimensional-array-in-python)有助于我走到这一步，我看到的主要区别是我的第二维不使用整数键。

如果重要的话，我正在使用 python 版本 2.6.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:33:17.700

正如我在问题下方的评论中所说，您的表格标题显示“BuyValue”并且您正在打印“Sell value”。按照您期望的输出，我认为您在设置排序器功能时犯了一个小错误。

它应该是：

```
lambda x: my_dict[x]['market_data']['sellValue'] 
```

并不是

```
lambda x: my_dict[x]['market_data']['buyValue'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:33:48.560

您按 排序`buyValue`，然后打印`sellValue`但调用它`buyValue`，因此您需要在某个地方修复这种不一致。

以下是一些选项：

*   排序`sellValue`而不是`buyValue`其余的保持不变：

    ```
    d_sorted = sorted(my_dict, key=lambda \
           x: my_dict[x]['market_data']['sellValue'], reverse=True) 
    ```

*   打印`buyValue`, 因为这是您当前正在排序的内容：

    ```
    print "key\tbuyValue"
    for key in d_sorted:
        print "%d\t%.2f" % (key, my_dict[key]['market_data']['buyValue']) 
    ```

# jquery - $(' 是什么意思 '） 做？

> ID：10970705
> 
> 赞同：10
> 
> 时间：2012-06-10T17:24:54.633
> 
> 标签：jquery, html

我在工具提示脚本的 jQuery 工具中看到了这一点。是什么`<div/>`？我从未见过以这种方式使用反斜杠。可能会得到一些反对票，但我必须知道。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-10T17:26:01.150

它用于创建`div`元素。它的捷径`<div></div>`。

例如：

```
$('<div/>', {id: 'hello', 'class': 'new', html: 'New div'}).appendTo('#target'); 
```

`id: hello`将使用,`class: new`使用 html创建 div 并附`New div`加到`#target`.

**[演示](http://jsfiddle.net/QStkd/190/)**

### 更多细节

这意味着“动态创建一个 jQuery 包装的 div 元素”。

> 当参数具有单个标记时，例如`$('<div />')`or `$('<a></a>')`，jQuery 使用原生 JavaScript `createElement()`函数创建元素。

结果它看起来像：

```
$(document.createElement("div")); 
```

详情请看**[这里](http://api.jquery.com/jQuery/)**

# ember.js - 使用 tagName ul 在 CollectionView 中分配 li 元素的 id

> ID：10970708
> 
> 赞同：0
> 
> 时间：2012-06-10T17:25:30.690
> 
> 标签：ember.js

我有以下js：

```
App.Menu = Ember.CollectionView.extend({
tagName: 'ul',
content: [Ember.Object.create({
    id: 'addChild',
    text: 'Als Kind Knoten'
    }),
    Ember.Object.create({
        id: 'insertBefore',
        text: 'davor einfuegen'
    }),
    Ember.Object.create({
        id: 'insertAfter',
        text: 'danach einfuegen'
    })],

itemViewClass: Ember.View.extend({

    template: Ember.Handlebars.compile("the letter: {{content.text}}")
})
}); 
```

和模板：

```
<script type="text/x-handlebars">
  {{#view App.Menu id="Menu"}}

  {{/view}}
</script> 
```

我不知道如何将 content.id 分配给隐式生成的 li 元素的“id”属性？

另外，我想分配一个动作，它可以确定单击了哪个 li 条目。

此致

安德烈亚斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T07:26:38.153

首先，Ember 需要保留生成元素的 id，除非它不再能够维护它。所以改变它是没有意义的。

不过，您可以自定义元素的另一个属性，如以下小提琴所示：http: [//jsfiddle.net/MikeAski/EHPZV/](http://jsfiddle.net/MikeAski/EHPZV/)

此外，您可以访问单击处理程序中显示的元素，那么覆盖包含元素的 id 的确切目的是什么？

# mysql - 按标题有效地从 Wiki 转储中获取文章

> ID：10970709
> 
> 赞同：0
> 
> 时间：2012-06-10T17:25:40.947
> 
> 标签：mysql, wiki, dump

浏览 xml 文件显然需要很多时间。

尝试将其导入 MySQL 数据库，但不幸的是，查询它还需要 10 多秒才能按标题检索一篇文章（即 WHERE title = 'X'）。

```
CREATE TABLE article (
  articleid INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  title VARCHAR(250) NOT NULL DEFAULT '',
  content LONGBLOB NOT NULL,
  PRIMARY KEY (articleid),
  FULLTEXT KEY title (title)
) ENGINE=MyISAM DEFAULT CHARSET=utf8

mysql> SELECT title FROM article WHERE title = 'Main Page';
+-----------+
| title     |
+-----------+
| Main Page |
+-----------+
1 row in set (20.61 sec) 
```

虽然这可能很明显，但我应该注意到转储相当大，大约 2GB 左右。

关于如何有效地做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:53:33.710

您正在使用 FULLTEXT 索引进行不需要的搜索。创建一个正常的索引`title`，你会得到更快的结果。

# iphone - UIScrollview setContentOffset 与非线性动画？

> ID：10970710
> 
> 赞同：28
> 
> 时间：2012-06-10T17:25:43.460
> 
> 标签：iphone, ios, ipad, uiscrollview

当您实际滚动到下一页时，我正在尝试重现启用分页的滚动视图的流畅动画。似乎是`UIViewAnimationCurveEaseInOut`，但我需要有一个“下一页”按钮并以编程方式触发滚动。

这是我的代码：

```
-(void) scrollToPage:(int)page
{
    UIScrollView *scrollView = contentView;
    CGPoint offset = CGPointMake(scrollView.bounds.size.width * page, scrollView.contentOffset.y);
    [scrollView setContentOffset:offset animated: YES];     
    [self pageControlUpdate];
}

-(void) scrollToNextPage 
{
    [self scrollToPage:(pageControl.currentPage + 1)];
} 
```

我无法重现平滑度`UIViewAnimationCurveEaseInOut`，无论是使用`setContentOffset`还是使用`scrollRectToVisible`...它都会以丑陋的线性动画进入下一页

我什至尝试手动对其进行动画处理：

```
[UIView animateWithDuration:.5 delay:0 options:UIViewAnimationCurveEaseInOut animations:^{
    scrollView.contentOffset = offset;
} completion:^(BOOL finished) {    } ]; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-14T11:15:48.950

每次制作自己的动画时，都必须将**NO**作为`animated:`参数传递：

```
- (void)scrollToPage:(int)page
{
    UIScrollView *scrollView = contentView;
    CGPoint offset = CGPointMake(scrollView.bounds.size.width * page, 
                                 scrollView.contentOffset.y);

    [UIView animateWithDuration:.5
                          delay:0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         [scrollView setContentOffset:offset animated:NO];
                     } completion:nil];

    [self pageControlUpdate];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T04:13:27.030

通过使用公共 API，我认为目前这是不可能的。假设您在动画过程中不需要用户交互，那么您最好为您`UIScrollView`的子视图的位置（即滚动视图的内容）设置动画，然后`contentOffset`在完成时调整无动画。你可以这样做：

```
- (void) scrollToPage:(int)page {
    UIScrollView *scrollView = contentView;
    scrollView.userInteractionEnabled = NO;
    CGPoint offset = CGPointMake(scrollView.bounds.size.width * page, scrollView.contentOffset.y);
    CGFloat delta = offset.x - scrollView.contentOffset.x;

    __block int animationCount = 0;
    for (UIView *view in scrollView.subviews) {
        [UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
            animationCount++;
            CGRect frame = view.frame;
            frame.origin.x -= delta;
            view.frame = frame;
        } completion:^(BOOL finished) {
            animationCount--;
            if (animationCount == 0) {
                scrollView.contentOffset = offset;
                for (UIView *view in scrollView.subviews) {
                    CGRect frame = view.frame;
                    frame.origin.x += delta;
                    view.frame = frame;
                }
                scrollView.userInteractionEnabled = YES;
            }
        }];
    }
} 
```

我可以确认这按预期工作，我自己测试过。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T13:32:06.697

```
[UIView animateWithDuration:(Animation_Duration)
                          delay:0.0
                        options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{
                     [scroll setContentOffset:CGPointMake(PointX, PointY) animated:NO];
                      }
                     completion:^(BOOL finished){}];` 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T03:10:53.347

这门课绝对救了我的命：

[GitHub.com 上的 MOScroll](https://github.com/plancalculus/MOScrollView)

它有

`- (void)setContentOffset:(CGPoint)contentOffset withTimingFunction:(CAMediaTimingFunction *)timingFunction duration:(CFTimeInterval)duration;`

就像私有 API 但具有所有公共方法和数学。

# android - Android 图像可接受的图像大小

> ID：10970711
> 
> 赞同：1
> 
> 时间：2012-06-10T17:25:53.450
> 
> 标签：android, bitmap, surfaceview

我正在将位图绘制到表面视图。我想知道在 fps 受到影响之前图像的最大文件大小可能是多少？

# linux - 将用户添加到 Gitolite，权限被拒绝

> ID：10970714
> 
> 赞同：2
> 
> 时间：2012-06-10T17:26:03.697
> 
> 标签：linux, git, gitolite, public-key

我有一个运行在 EC2 上的 Gitolite 服务器，运行良好。我之前添加了用户，添加存储库没有问题。

我的 Macbook Pro 可以毫无问题地将代码推送到存储库（它具有存储库的`RW+`权限）。我还向存储库添加了第二台具有`R`权限的计算机，以便我可以克隆它。

问题是，在尝试克隆存储库时，我不断收到“权限被拒绝（公钥）”。当我使用 Gitolite SSH 进入服务器并查看用户“git”的 authorized_keys 文件时，我*确实*看到了第二台计算机的公钥，所以我不确定问题出在哪里——看起来它正在添加就好了。第二台计算机的公钥也位于`keydir`具有适当名称的下方 ( `raspberry.pub`)

这是我的 gitolite conf，更改了一些信息以保护隐私：

```
repo    statistics-app
        RW+     =   andrew
        R       =   raspberry 
```

注意：“andrew”可以推送代码和克隆 repo，但用户“raspberry”不能。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:50:55.653

在您的第二台计算机上，您应该有一个`~/.ssh/config`文件：

```
host gitolite-raspberry
     user git
     hostname raspberry
     identityfile ~/.ssh/raspberry 
```

（例如，请参阅“[无法使用 Gitolite 添加用户](https://stackoverflow.com/questions/9630937/can-not-add-user-with-gitolite/9633439#9633439)”）

您需要检查是否使用与ssh 帐户`ssh gitolite-raspberry`关联的 Gitolite 权限回答您。`raspberry`

如果没有，`ssh -vvv gitolite-raspberry`将为您提供线索。

* * *

[OP Andrew M](https://stackoverflow.com/users/480033/andrew-m)报告了一个正确的问题：

> **我没有设置要克隆到的文件夹的权限**，所以我“sudoed”了 git 命令。
> Raspberry Pi 上的 root 用户不允许克隆，所以它失败了。

# c# - 在 C# WebBrowser 控件中触发 JavaScript

> ID：10970715
> 
> 赞同：2
> 
> 时间：2012-06-10T17:26:04.043
> 
> 标签：c#, javascript, flash, browser

尝试编写一个在 C# 中搜索 WebBrowser 控件并获取 Flash 页面元素的应用程序。问题是使用 Flash 你无法访问所有的 DOM 对象，如果 Firebug 我得到类似的东西：

```
<div>
  <div class="nvbar_start"></div>
  <div class="nvbar_middle">
    <a **onclick="ajaxLinkSend('globalContainer', 'quests.php');** return false;" href="javascript:;">
      <span class="hover_header">Quests</span>
    </a>
  </div>
  <div class="nvbar_end"></div>
</div> 
```

因此我无法触发 OnClick 事件...尝试研究，我知道答案就在这里，但显然我问错了问题。谁能指出我正确的方向？

谢谢韦恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:33:23.010

如果您可以使用 javascript 触发事件，那么在 WebBrowser 控件中您可以`wb.Navigate("Javascript:DoFoo();");`

使用浏览器控制台窗口找出必要的 javascript（如果在您的上下文中甚至可能的话）。

# javascript - 在 JavaScript 中将 div 附加到 Struts2 动作响应中

> ID：10970716
> 
> 赞同：1
> 
> 时间：2012-06-10T17:26:34.677
> 
> 标签：javascript, struts2, yui

我正在使用 YUI 和 Struts2 来展示一个交互式应用程序。一旦触发*onchange*事件，我需要更新 div 。这是我正在使用的代码：

```
<div id="...">
    <s:form id="..." action="...">
        <s:select id="proyecto_actual_select" .../>
    </s:form>
    <sx:bind sources="proyecto_actual_select" formId="cambiar_proyecto_actual_form" targets="pantalla_principal" events="onchange" afterNotifyTopics="cambioProyecto"/>
</div> 
```

执行该操作后，将执行此脚本：

```
YUI({combine: false, filter: 'raw'}).use('bezier-wire', 'container','image-container',function(Y) {

    window.Y = Y;
    var layerEl = Y.one('#pantalla_principal');

    ...Some changes on layerEl...
}; 
```

当 Struts2 渲染 div *pantalla_principal* 时，显示的 div 没有在脚本期间对其进行更改。我应该怎么做才能使该 div 与 layerE1 完全一样？

# javascript - QUnit 不能识别多个测试

> ID：10970719
> 
> 赞同：25
> 
> 时间：2012-06-10T17:26:54.267
> 
> 标签：javascript, unit-testing, testing, qunit

我在使用 QUNIT 时遇到问题，无论我做什么，测试套件都只会识别一个测试或模块，即使我在 javascript 中有多个测试或模块。任何帮助将不胜感激！

```
 <script>
          $(document).ready(function(){
            QUnit.log = function(result, message)
            {
                if (window.console && window.console.log)
                {
                   window.console.log(result +' :: '+ message);
                }   
            }
            module("Basic Unit Test");
            test("Sample test", function()
            {
                expect(1);
                equal(divide(4,2),2, 'Expected 2 as the result, result was ' + divide(4,2));
            });
                        test("Test two", function() {
                        expect(1);
                        equal(divide(8,2),2,'Expected 4 as the result, result was ' + divide(8,2));
                        });

            function divide(a,b){
                return a / b;
            }
          });

    </script> 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-11T11:33:48.537

您可能在 Url 中有 QUnit-Url-Parameters，它将测试限制在这些过滤器参数中指定的模块/测试（在[http://docs.jquery.com/Qunit](http://docs.jquery.com/Qunit)上，请参阅“URL 参数”）。从一个干净的 URL 开始，然后应该执行所有测试。

例如。您的网址包含`blah.html?testNumber=1`. 这意味着只会运行一项测试。删除`?testNumber=1`.

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-25T22:44:40.227

早些时候，当您设置它时，您单击了“重新运行”。这悄悄地在您的 URL 中添加了一个“?testNumber=1”，排除了所有其他测试的运行。

令人沮丧的是，这是多么安静。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T17:55:06.290

这是一个[示例页面，将运行多个测试](https://gist.github.com/2906762)

它包含您在此处放置的两个测试。

# c# - XNA WP7 Mango：DrawableGameComponent 可以动态添加到Microsoft.Xna.Framework.Game？

> ID：10970724
> 
> 赞同：1
> 
> 时间：2012-06-10T17:27:43.910
> 
> 标签：c#, xna, windows-phone-7.1, drawablegamecomponent

从 DrawableGameComponent 继承的类似乎只能在 Game1 的 Initialize() 阶段添加到 Xna.Framework.Game 中。之后，组件的 Draw 将不会被调用。有什么解决方法吗？组件可以在运行时动态创建。我需要添加要绘制的组件。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:20:51.257

组件可以随心所欲地添加到`Game.Components`集合中。如果在例如Update() 方法中添加一个组件，甚至它的`Initialize()`和`LoadContent()`方法都会被调用。要绘制所有组件，请确保该`Game.Draw()`方法包含对`base.Draw()`.

如果您只是因为稍后添加组件而遇到问题，那么问题可能出在组件本身或其他地方。确保组件所依赖的一切都存在。

# scala - 使用 z3.scala.dsl API 遍历 Z3Context

> ID：10970725
> 
> 赞同：1
> 
> 时间：2012-06-10T17:27:55.313
> 
> 标签：scala, latex, z3

我正在将 scala^Z3 工具用于一个小型库，该库（除其他外）`Z3Context`以乳胶格式打印 a 的约束。虽然可以`Z3AST`通过字符串比较来遍历和乳胶化表达式，但使用包的对象结构会更好`z3.scala.dsl`。有没有办法`z3.scala.dsl.Tree`从 a 获得 a `Z3AST`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:14:00.120

确实，DSL 当前是“只写”的，因为您可以使用它来创建树并将它们发送到 Z3，但不能将它们读回。

读取 Z3 树的标准方法是使用[`getASTKind`](https://github.com/psuter/ScalaZ3/blob/master/src/main/scala/z3/scala/Z3Context.scala#L760)and [`getDeclKind`](https://github.com/psuter/ScalaZ3/blob/master/src/main/scala/z3/scala/Z3Context.scala#L774)from `Z3Context`。代表结果的类分别是[`Z3ASTKind`](https://github.com/psuter/ScalaZ3/blob/master/src/main/scala/z3/scala/Z3ASTKind.scala)和[`Z3DeclKind`](https://github.com/psuter/ScalaZ3/blob/master/src/main/scala/z3/scala/Z3DeclKind.scala)。（由于大多数树都是应用程序，后者是大部分信息所在的位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:14:07.673

看起来这样做的方法是使用创建原始约束`z3.scala.dsl`，然后使用添加每个约束`Z3Context.assertCnstr (tree: Tree[BoolSort])`。这样我就拥有了整个 DSL 树，以便轻松转换为乳胶。出于某种原因，scala^Z3 网站上的示例完全不使用 DSL 组装 AST，因此这种替代方案并不明显。

# c - 比较与设置变量的速度

> ID：10970727
> 
> 赞同：0
> 
> 时间：2012-06-10T17:28:11.650
> 
> 标签：c, performance

“设置变量”和“检查条件后设置变量”之间是否存在速度差异？

那么是不是更好用

```
 if (state != IDLE) {
       state = IDLE;
    } 
```

代替

```
 state = IDLE; 
```

?

在第一种情况下，检查标志需要一些时间。但是这个持续时间可以与第二种情况（只需设置一个变量）进行比较吗？一般哪个更快？

谢谢，马丁

编辑：该程序将在接收 CAN 消息的 IRQ 处理程序内以 120 MHz 的微控制器（NXP LPCXpresso 1769）上运行。我问的原因是因为我不希望 IRQ 处理程序妨碍正常的程序执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:35:37.670

简单的答案是，在大多数情况下，仅写入值将至少与先测试一样快，而且通常更快。

更详细的解释：除了*非常*低端的微控制器，内存总线通常会与内核分离。当您首先测试时，CPU 必须将地址写入内存总线，然后等待内存响应，然后才能真正查看该值。

当您进行写入时，CPU 通常只会将地址/值放入写入队列，然后移至下一条指令。尽管*涉及*内存事务，但执行其他指令不会等待它完成（除非他们读取该值 - 在这种情况下，它将取决于 CPU 是否有缓存；如果有，它会以最小的延迟从缓存中读取值，否则它通常会等待它被写入内存然后再读回它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:35:47.033

**理论上：**

您的第一个示例有两个操作，

1.  检查状态
2.  修改状态

你的第二个例子有一个操作，

*   修改状态

所以在数学/逻辑上，显然第一个示例比第二个示例要快，因为要执行的操作少了一个。

**几乎：**

根据使用的变量，智能编译器可以优化第一个示例和第二个示例以生成相同的汇编指令。
所以两者可能具有相同的性能。

**准确判断：**

**通过使用代表性数据集来分析您的应用程序/代码***，******只有***这样您才能获得正确的图片和比较。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T17:38:55.773

由于第一个片段涉及“读取、比较、写入”，而第二个片段只是“写入”，因此第二个片段的未优化代码将比第一个片段更快，因为选项较少。如果变量用 限定`volatile`，则第一个必须比第二个慢。如果变量没有用 限定`volatile`，编译器可以优化第一个到第二个，因为两个序列的结果将是相同的，而不管赋值之前变量中的内容是什么。**

# encoding - UTF编码之间的区别？

> ID：10970729
> 
> 赞同：9
> 
> 时间：2012-06-10T17:28:28.607
> 
> 标签：encoding, utf

我有一个简单的问题 -和`UTF-8`之间有什么区别？我知道编码的字符串有不同的大小，但是和是什么？不应该能够正确处理所有语言吗？以及如何适应这一点？`UTF-16``UTF-32``UTF-16``UTF-32``UTF-8``UTF-7`

**编辑**

好的，我相对了解整个事情的技术方面，但我仍然看不出我应该使用例如`UTF-16`而不是`UTF-8`在我的应用程序中的原因。所以我的问题是 - 那么其他编码的实际用途是什么`UTF-8`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:38:16.837

著名的 Joel Spolsky 的这篇文章完美地解释了它：http: [//www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

引用：

> 有数百种传统编码只能正确存储一些代码点，而将所有其他代码点都变成问号。一些流行的英文文本编码是 Windows-1252（西欧语言的 Windows 9x 标准）和 ISO-8859-1，又名 Latin-1（也适用于任何西欧语言）。但是尝试以这些编码存储俄语或希伯来语字母，你会得到一堆问号。UTF 7、8、16 和 32 都具有能够正确存储任何代码点的优良特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:36:16.607

也许[Unicode 常见问题解答](http://unicode.org/faq/utf_bom.html)会有所帮助？

有一个比较图表总结了一些差异。

# javascript - Javascript 代码仅在 IE 中不起作用

> ID：10970730
> 
> 赞同：-1
> 
> 时间：2012-06-10T17:28:35.517
> 
> 标签：javascript, internet-explorer

我刚刚验证了我的 javascript 代码在除 IE 之外的所有浏览器中都能正常工作。怎么可能在 Chrome、Safari 中正确读取和执行脚本……但 IE 发现一些莫名其妙的错误并拒绝运行代码？

```
$(document).ready(function() {
        var NewsNavigator = {

            init: function(config) {
                this.news = config.news;
                this.newsNum = this.news.length;
                this.navbuttons = config.navbuttons;
                this.prevButton = config.prevButton;
                this.nextButton = config.nextButton;
                this.displayatonce = config.displayatonce;
                this.maxSteps = Math.ceil(this.newsNum / this.displayatonce);
                this.counter = 0;
                this.navigateNews();
                this.enableNav();
                this.checkButtonsVisibility();

            },

            showNews: function() {
                var start = this.counter * this.displayatonce;
                var end = this.counter * this.displayatonce + (this.displayatonce - 1);
                for (i=start; i<=end; i++) {
                    this.news.eq(i).show();
                }

            },

            hideAllNews: function() {
                console.log("hiding news");
                this.news.hide();
            },

            navigateNews: function() {
                this.hideAllNews();
                this.showNews();
            },

            checkButtonsVisibility: function() {
                if (this.counter <= 0)
                {
                    this.prevButton.css('visibility', 'hidden');
                }
                else
                {
                    this.prevButton.css('visibility', 'visible');
                }

                if (this.counter >= this.maxSteps - 1) 
                {
                    this.nextButton.css('visibility', 'hidden');
                }
                else
                {
                    this.nextButton.css('visibility', 'visible');
                }
            },

            enableNav: function() {
                self = this;
                this.navbuttons.on('click', function(event) {
                    if (($(this).data('dir') === 'prev') && (self.counter > 0)) {
                        self.counter--;
                        self.navigateNews();
                    } else if (($(this).data('dir') === 'next') && (self.counter < self.maxSteps - 1)) {
                        self.counter++;
                        self.navigateNews();
                    }
                self.checkButtonsVisibility();
                event.preventDefault(); 
                });
            }
        };

        NewsNavigator.init({
            news: $('div#cat-news').find('div.oneCol'),
            displayatonce: 3,
            navbuttons: $('div#nav').find('a'),
            prevButton: $('div#nav a.prec'),
            nextButton: $('div#nav a.succ')
        });
}); 
```

IE9 中的错误信息

```
SCRIPT438: The object doesn't support the 'checkButtonsVisibility' property or method.
NewsNavigator.js, Row 69 Character 5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:31:18.463

这可以归结为 JavaScript 的历史。

JavaScript 是基于 ECMAScript 实现的：

[http://en.wikipedia.org/wiki/ECMAScript](http://en.wikipedia.org/wiki/ECMAScript)

每一个 Web 浏览器提供商（Mozilla、Google、Microsoft）都决定他们不想标准化 JavaScript，他们每个人都提出了自己的 ECMAScript 实现，因此也提出了自己的 JavaScript 引擎。

因此，我们程序员在尝试编写兼容所有这些不同 JavaScript 引擎的 JavaScript 时会感到头疼，因为他们每个人都以自己的方式读取 JavaScript（这回答了您的问题，即为什么 IE 会发现一些莫名其妙的错误而其余的却没有）

有趣的事实：只有 Mozilla 的 ECMAScript 实现实际上被称为“JavaScript”。

您应该查找如何编写跨不同 JavaScript 引擎交叉兼容的 JavaScript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T17:29:51.647

使用 javascript 验证工具，例如[JSLint](http://www.jslint.com/)，以确保最大的兼容性。这是因为单个省略的字符（例如`;`,`'`等）可能会导致您的脚本无法在特定浏览器中运行。

JSLint 还将提供关于做什么和不做什么的不同提示，以提供进一步的兼容性。

# android - 如何在android中制作通话记录应用程序

> ID：10970732
> 
> 赞同：3
> 
> 时间：2012-06-10T17:28:41.430
> 
> 标签：android, calllog

我是一个新手程序员 android 我想制作一个 android 应用程序来记录电话活动，例如来电、去电或未接来电，并将日志记录到文件 .txt

我该怎么办 ？请帮我 ...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T17:34:10.523

看看[CallLog.Calls](http://developer.android.com/reference/android/provider/CallLog.Calls.html)

* * *

这里有一些关于使用通话记录的好教程：

[android-tutorial-call-logs](http://www.dcpagesapps.com/developer-resources/android/25-android-tutorial-call-logs)

[Android 应用程序中的通话记录](http://www.android-app-market.com/call-log-content-provider-in-android-application.html)

[从电话读取通话记录](http://ganeshtiwaridotcomdotnp.blogspot.com/2011/10/android-reading-call-log-from-phone.html)

[访问通话记录](http://malsandroid.blogspot.com/2010/06/accessing-call-logs.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T17:31:55.320

使用 PhoneStateListener：

*   [Android 开发者：Telephony-PhoneStateListener](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)

您可以在参考资料中阅读更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:38:37.840

您可能想要创建一个定期记录呼叫日志的服务。我建议使用 CallLog 类，因为您是新手，所以有一些关于创建服务的教程（使用 Google）

# c - C 错误：.o 文件格式无法识别

> ID：10970734
> 
> 赞同：3
> 
> 时间：2012-06-10T17:28:59.353
> 
> 标签：c, netbeans, format

我有一个包含三个 C 文件和一个 .h 文件的 C 项目。我在 NetBeans 工作。当我尝试进行导入时，出现此错误：

```
gcc     -o dist/Debug/GNU-Linux-x86/progetto build/Debug/GNU-Linux-x86/initialization.o build/Debug/GNU-Linux-x86/utility.o build/Debug/GNU-Linux-x86/model_parameters.o build/Debug/GNU-Linux-x86/condensation.o -L/usr/local/lib -lm I have to-lopencv_calib3d -lopencv_contrib -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_gpu -lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml -lopencv_objdetect -lopencv_video -lXm -lXt -lXext -lX11 -lz -lpthread -lcurses -ldl 
build/Debug/GNU-Linux-x86/model_parameters.o: file not recognized: File format not recognized
collect2: ld returned 1 exit status 
```

我试图删除此导入，但错误并没有消失。我不明白问题出在哪里。

# objective-c - UIKeyboard 中的 Next 和 Back 选项卡

> ID：10970735
> 
> 赞同：0
> 
> 时间：2012-06-10T17:29:10.323
> 
> 标签：objective-c, uikeyboard, uikeyboardtype

使用 Xcode 4.3

我正在尝试在 UIKeyboardTypeDecimalPad 键盘中使用后退和下一个选项卡在文本字段之间切换。我可以将它们添加到这种类型的键盘吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:42:16.927

`inputView`您可以使用文本字段上的属性覆盖整个键盘（需要制作自己的数字按钮等） 。

或者，您可以使用普通的 UIKit 键盘，并使用`inputAccessoryView`属性在键盘顶部添加您自己的附件视图和您自己的按钮。

请参阅此示例项目：[https ://developer.apple.com/library/ios/#samplecode/KeyboardAccessory/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009462-Intro-DontLinkElementID_2](https://developer.apple.com/library/ios/#samplecode/KeyboardAccessory/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009462-Intro-DontLinkElementID_2)

# asp.net - ASP.NET - 在传输之前解析/查询 HTML 并插入 CSS 类引用

> ID：10970737
> 
> 赞同：0
> 
> 时间：2012-06-10T17:29:21.010
> 
> 标签：asp.net, xml-parsing, webforms, html-parsing, csquery

作为一名 Web 开发人员，我觉得我的太多时间都花在了 CSS 上。我正在尝试提出一个解决方案，我可以编写可**重用的 CSS**即类并在 HTML 中引用这些类，而无需在 ASPX 或 ASCX 文件等或代码隐藏文件中添加额外代码。我想要一个将 HTML 元素与 CSS 类链接起来的**中介。**

我想要达到的目标：

*   在传输前立即修改 HTML
*   选择 HTML 中的元素
*   基于其他地方定义的规则（例如在与当前正在处理的页面相关的文本文件中）：
*   向多个 HTML 元素添加 CSS 类引用
*   将**多个 CSS 类引用**添加到单个 HTML 元素

我如何设想这个工作：

1.  扩展生成最终 HTML 的 ASP.NET 函数
2.  将所有 HTML 作为字符串抓取
3.  将字符串传递给具有查询（例如 XPATH）方法的对象的构造函数
4.  浏览全局规则列表，例如`ul`先的孩子，`div`然后`class = "navigation"`
5.  浏览页面特定规则的列表，例如对于`ul`第一个`div`然后的孩子`class &= " home"`
6.  从对象获取已处理的 HTML，例如 obj.ToString
7.  ASP.NET 使用已处理的 HTML 恢复页面生成

**所以我需要知道的是：**

1.  在哪里/如何**扩展 ASP.NET 页面生成**功能（获取页面的所有 HTML）
2.  哪些类有**元素/节点查询方法**和属性访问

提前感谢您的帮助。

PS 我正在开发 ASP.NET Web 表单网站，其中包含在 ISS 7 上运行的 VB.net 代码隐藏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:34:48.010

查看我的 CsQuery 项目：[https](https://github.com/jamietre/csquery) ://github.com/jamietre/csquery或在 nuget 上作为“CsQuery”。

这是 jQuery 的 C# (.NET 4) 端口。在基本性能测试（包含在项目测试套件中）中，选择器比 HTML Agility Pack + Fizzler（HAP 的 css 选择器插件）快大约 100 倍；在典型的网站上实时操作输出流非常快。如果你是 amazon.com 什么的，当然是 YMMV。

我开发它的最初目的是从内容管理系统中操作 HTML。启动并运行它后，我发现使用 CSS 选择器和 jQuery API 比使用 Web 控件有趣得多，并开始将其用作服务器渲染页面的主要 HTML 操作工具，并将其构建为涵盖几乎所有的 CSS、jQuery 和浏览器 DOM。从那以后我就再也没有碰过网络控件。

要使用 CsQuery 拦截 Web 表单中的 HTML，您可以在页面代码隐藏中执行以下操作：

```
using CsQuery;
using CsQuery.Web;

protected override void Render(HtmlTextWriter writer)
{

    var csqContext = WebForms.CreateFromRender(Page, base.Render, writer);

    // CQ object is like a jQuery object. The "Dom" property of the context
    // returned above represents the output of this page.

    CQ doc = csqContext.Dom;

    doc["li > a"].AddClass("foo");

    // write it
    csqContext.Render();
} 
```

要在 ASP.NET MVC 中做同样的事情，请参阅描述[该内容的博客文章](http://blog.outsharked.com/2012/06/ive-been-neglecting-csquery-c-jquery.html)。

GitHub 上有 CsQuery 的基本文档。除了输入和输出 HTML 之外，它的工作方式与 jQuery 非常相似。上面的`WebForms`对象只是为了帮助您处理与`HtmlTextWriter`对象和`Render`方法的交互。通用用法很简单：

```
var doc = CQ.Create(htmlString);

// or (useful for scraping and testing)
var doc = CQ.CreateFromUrl(url);

// do stuff with doc, a CQ object that acts like a jQuery object

doc["table tr:first"].Append("<td>A new cell</td>"); 
```

此外，几乎整个浏览器 DOM 都可以使用您在浏览器中使用的相同方法获得。索引器 [0] 返回选择集中的第一个元素，如 jquery；如果您习惯编写 javascript 来操作 HTML，那么应该非常熟悉。

```
// "Select" method is the same as the property indexer [] we used above.
// I go back and forth between them to emphasise their interchangeability.

var element = dom.Select("div > input[type=checkbox]:first-child")[0];
a.Checked=true; 
```

当然，在 C# 中，您可以使用大量其他通用工具，例如 LINQ。或者：

```
var element = dom["div > input[type=checkbox]:first-child"].Single();

a.Checked=true; 
```

完成对文档的操作后，您可能希望获取 HTML：

```
string html = doc.Render(); 
```

这里的所有都是它的。对象上有大量的方法`CQ`，涵盖了所有 jQuery DOM 操作技术。还有一些处理 JSON 的实用方法，它对动态和匿名类型有广泛的支持，以使传递数据结构（例如一组 CSS 类）尽可能容易——就像 jQuery 一样。

**一些更高级的东西**

我不建议这样做，除非您熟悉 asp.net 的 http 工作流程的低级修补。没有什么是可以撤消的，但是如果您从未听说过 HttpHandler，将会有一个学习曲线。

如果您想完全跳过 WebForms 引擎，您可以创建一个`IHttpHandler`自动解析 HTML 文件的引擎。这肯定会比覆盖在 ASPX 引擎上执行得更好——谁知道呢，甚至可能比使用 Web 控件进行类似数量的服务器端处理还要快。然后，您可以[使用 web.config](http://msdn.microsoft.com/en-us/library/46c5ddfy.aspxhttp://msdn.microsoft.com/en-us/library/46c5ddfy.aspx)为特定扩展名（如`htm`和`html`）注册您的处理程序。

另一种自动拦截的方法是使用路由。您可以在 webforms 应用程序中毫无问题地使用 MVC 路由库，[这里有一个关于如何做到这一点的描述。](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)然后，您可以创建一个匹配您想要的任何模式的路由（同样，也许`*.html`）并将处理传递给自定义`IHttpHandler`或类。在这种情况下，您正在做所有事情：您需要查看路径，从文件系统加载文件，使用 CsQuery 解析它，然后流式传输响应。

当然，使用任何一种机制，您都需要一种方法来告诉您的项目为每个页面运行什么代码。也就是说，仅仅因为您已经创建了一个漂亮的 HTML 解析器，那么您如何告诉它为该页面运行正确的“隐藏代码”？

MVC 通过定位一个名称为“PageNameController.cs”的控制器并调用与参数名称匹配的方法来做到这一点。你可以为所欲为；例如，您可以添加一个元素：

```
<script type="controller" src="MyPageController"></script> 
```

您的通用处理程序代码可以查找这样的元素，然后使用反射来定位要调用的正确命名类和方法。这非常复杂，超出了这个答案的范围；但是，如果您正在寻找构建一个全新的框架或其他东西，这就是您将如何去做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:07:07.860

在发送页面之前拦截页面内容是相当简单的。不久前，我在一个动态压缩内容的项目上做了这个：http: [//optimizerprime.codeplex.com/](http://optimizerprime.codeplex.com/)（它很丑，但它完成了它的工作，你也许可以挽救一些代码）。无论如何，您想要做的是以下内容：

1) 创建一个 Stream 对象，保存页面的内容，直到 Flush 被调用。例如，我在压缩项目中使用了它：http: [//optimizerprime.codeplex.com/SourceControl/changeset/view/83171#1795869](http://optimizerprime.codeplex.com/SourceControl/changeset/view/83171#1795869)就像我之前说的，它并不漂亮。但我的观点是，您需要创建自己的 Stream 类来执行您想要的操作（在这种情况下，为您提供页面的字符串输出，解析/修改字符串，然后将其输出给用户）。

2）将页面的过滤器对象分配给它。(Page.Response.Filter) 请注意，您需要尽早执行此操作，以便捕获所有内容。我使用在 PreRequestHandlerExecute 事件上运行的 HTTP 模块来完成此操作。但是如果你做了这样的事情：

```
 protected override void OnPreInit(EventArgs e)
    {
        this.Response.Filter = new MyStream();
        base.OnPreInit(e);
    } 
```

这也很可能奏效。

3）您应该能够使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)之类的东西来解析 HTML 并从那里修改它。

对我来说，这似乎是最简单的方法。

# asp.net - 在运行时的 asp.net 解决方案资源管理器中发现恶意脚本

> ID：10970743
> 
> 赞同：-1
> 
> 时间：2012-06-10T17:29:49.243
> 
> 标签：asp.net, solution, intrusion-detection

我在本地运行时在 asp.net 网站的 Soultion Explorer 中发现了一些未知的 .php 文件。

当我在页面之间导航时，它会以 1.eval 代码和 2.jsc3.js.php 的名称动态创建两个文件

我知道这是对我系统的恶意入侵，我需要克服这个问题。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:23:29.080

以上是从恶意网站自动下载并安装的 Internet Explorer 加载项。

附加名称 - PeteBH 类（相关 DLL - c:\windows\system32 中的 yayWmKee.dll）

有关此威胁的完整信息，请参阅 - [http://www.threateexpert.com/report.aspx?md5=da146c6c26ac0ef5d26dbe571e32008a](http://www.threatexpert.com/report.aspx?md5=da146c6c26ac0ef5d26dbe571e32008a)

如何删除： 1\. 在 Internet Explorer 管理 -addons 选项中禁用此加载项。2.删除bove链接中指定的注册表项（小心，风险自负）。3\. 在安全模式下以管理员身份登录并从“C:\Windows\System32”中删除 yayWmKee.dll。

始终确保访问的页面和下载的内容。

感谢所有的答复。

# java - 如何使用 spring 的 jdbcTemplate 在 SQL 查询中指定参数

> ID：10970745
> 
> 赞同：4
> 
> 时间：2012-06-10T17:29:59.650
> 
> 标签：java, sql, spring, jdbc, jdbctemplate

在以下 jdbctemplate 示例中，我将如何指定“age”参数的值？

```
String sql = "SELECT * FROM CUSTOMER where age = ? ";

    List<Customer> customers = new ArrayList<Customer>();
    JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);

    List<Map> rows = jdbcTemplate.queryForList(sql);
    for (Map row : rows) {
        Customer customer = new Customer();
        customer.setCustId((Long)(row.get("CUST_ID")));
        customer.setName((String)row.get("NAME"));
        customer.setAge((Integer)row.get("AGE"));
        customers.add(customer);
    }

return customers; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T17:35:36.760

您将使用将参数作为参数的[queryForList()](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#queryForList%28java.lang.String,%20java.lang.Object...%29)方法，例如：

```
List<Map<String, Object>> rows = jdbcTemplate.queryForList(sql, theAge); 
```

学习阅读 API 文档（和一般文档）。你就是这样学习的。

# iphone - 如何使用 HTML 表示字符串创建 CGColor

> ID：10970746
> 
> 赞同：-2
> 
> 时间：2012-06-10T17:30:01.163
> 
> 标签：iphone, objective-c, core-graphics, quartz-graphics

我需要创建一个 CGColor 形式的 HTML 表示字符串，如 [NSColor colorWithHTMLName:] 但只能通过 CoreGraphics

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:38:29.847

尝试这样的事情：

```
CGColorRef CGColorFromHTMLString(NSString *str)
{
    // remove the leading "#" and add a "0x" prefix
    str = [NSString stringWithFormat:@"0x%@", [str substringWithRange:NSMakeRange(1, str.length - 1)]];

    NSScanner *scanner;
    uint32_t result;

    scanner = [NSScanner scannerWithString:str];
    [scanner scanHexInt:&result];

    CGColorRef color = CGColorCreateGenericRGB(((result >> 16) & 0xff) / 255.0, ((result >> 8) & 0xff) / 255.0, ((result >> 0) & 0xff) / 255.0, 1.0);

    return color;
} 
```

不要忘记在使用后通过调用`CGColorRelease`它来释放结果。

编辑：如果您不想使用 Foundation，请尝试 CFStringRef 或纯 C 字符串：

```
CGColorRef CGColorFromHTMLString(const char *str)
{

    uint32_t result;
    sscanf(str + 1, "%x", &result);

    CGColorRef color = CGColorCreateGenericRGB(((result >> 16) & 0xff) / 255.0, ((result >> 8) & 0xff) / 255.0, ((result >> 0) & 0xff) / 255.0, 1.0);

    return color;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:57:48.733

感谢H2CO3！

这是 CoreGraphics 解决方案，即没有基础类，但 Coregraphics 和 C++

```
 // Remove the preceding "#" symbol
    if (backGroundColor.find("#") != string::npos) {
        backGroundColor = backGroundColor.substr(1);
    }
    unsigned int decimalValue;
    sscanf(backGroundColor.c_str(), "%x", &decimalValue); 
    printf("\nstring=%s, decimalValue=%u",backGroundColor.c_str(), decimalValue);

    CGColorRef result = CGColorCreateGenericRGB(((decimalValue >> 16) & 0xff) / 255.0, ((decimalValue >> 8) & 0xff) / 255.0, ((decimalValue >> 0) & 0xff) / 255.0, 1.0); 
```

# powershell - 使用 power shell 重命名文件名中包含括号的文件

> ID：10970748
> 
> 赞同：3
> 
> 时间：2012-06-10T17:30:31.260
> 
> 标签：powershell, powershell-2.0

我正在尝试重命名文件名中包含括号的文件。这似乎不起作用，因为 powershell 将 [] 视为特殊字符并且不知道该怎么做。

我的计算机上有一个文件夹 c:\test。我希望能够查看该文件夹并重命名文件的所有文件或部分。以下代码似乎有效，但如果文件中包含任何特殊字符，则代码将失败：

```
Function RenameFiles($FilesToRename,$OldName,$NewName){

    $FileListArray = @()
    Foreach($file in Get-ChildItem $FilesToRename -Force -Recurse  | Where-Object {$_.attributes -notlike "Directory"})
    {
        $FileListArray += ,@($file)
    }

    Foreach($File in $FileListArray)
    {
        IF ($File -match $OldName )
        {
            $File | rename-item -newName {$_ -replace "$OldName", "$NewName" }
        }
    }
}

renamefiles -FilesToRename "c:\test" -OldName "testt2bt" -NewName "test" 
```

我确实找到了一个类似的问题：[Replace square bracket using Powershell](https://stackoverflow.com/questions/4089028/replace-square-bracket-using-powershell)，但我不明白如何使用答案，因为它只是一个解释错误的链接：

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-11-12T12:43:27.233

对于多个文件，这可以用一行来完成。

要删除支架，您应该尝试：

```
get-childitem | ForEach-Object { Move-Item -LiteralPath $_.name $_.name.Replace("[","")} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-10T20:18:58.520

```
Move-Item -literalpath "D:\[Copy].log" -destination "D:\WithoutBracket.txt" 
```

将[literalpath](http://ss64.com/ps/move-item.html)开关与 Move-Item cmdlet 一起使用 [而不是使用 rename-item cmdlet]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T20:17:34.003

就括号而言，您已经在旧的[Technet Windows PowerShell Tip of the Week](http://technet.microsoft.com/en-us/library/ff730956.aspx)中获得了 Microsoft 官方答案。

您可以使用 ：

```
Get-ChildItem 'c:\test\``[*``].*' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T15:07:05.307

感谢大家的帮助，你们都帮了很多忙，这是我在阅读您的回复后最终提出的解决方案。

我的电脑上有一个名为 c:\test 的文件夹，其中有一个名为“[abc] testfile [xas].txt”的文件，我希望将其命名为 testfile2.txt

```
Function RenameFiles($FilesToRename,$OldName,$NewName){

$FileListArray = @()
Foreach($file in Get-ChildItem $FilesToRename -Force -Recurse  | Where-Object {$_.attributes -notlike "Directory"})
{
    $FileListArray += ,@($file.name,$file.fullname)
}

Foreach($File in $FileListArray)
{
    IF ($File -match $OldName )
    {
        $FileName = $File[0]
        $FilePath = $File[1]

        $SName = $File[0]  -replace "[^\w\.@-]", " "

        $SName = $SName -creplace '(?m)(?:[ \t]*(\.)|^[ \t]+)[ \t]*', '$1'

        $NewDestination = $FilePath.Substring(0,$FilePath.Length -$FileName.Length)
        $NewNameDestination = "$NewDestination$SName"
        $NewNameDestination | Write-Host

        Move-Item -LiteralPath $file[1] -Destination $NewNameDestination
        $NewNameDestination | rename-item -newName {$_ -replace "$OldName", "$NewName" }

        }
    }
}

renamefiles  -FilesToRename "c:\test" -OldName "testfile" -NewName "testfile2" 
```

# asp.net-mvc - ASP.NET Web API 文件保存为“BodyPart_3ded2bfb-40be-4183-b789-9301f93e90af”

> ID：10970750
> 
> 赞同：34
> 
> 时间：2012-06-10T17:30:36.957
> 
> 标签：asp.net-mvc, file, http, asp.net-web-api, multipartform-data

我正在使用 ASP.NET Web API 上传文件。我在 RC 之前已经这样做了，但由于某种原因，文件被保存为“BodyPart_3ded2bfb-40be-4183-b789-9301f93e90af”而不是文件名。下面的文件名变量也返回此正文部分字符串，而不是文件名。我似乎无法弄清楚我要去哪里错了。任何帮助表示赞赏。

客户端代码：

```
function upload() {
    $("#divResult").html("Uploading...");
    var formData = new FormData($('form')[0]); 
    $.ajax({
        url: 'api/files/uploadfile?folder=' + $('#ddlFolders').val(),
        type: 'POST',
        success: function (data) {
            $("#divResult").html(data);
        },
        data: formData,
        cache: false,
        contentType: false,
        processData: false
    });
}; 
```

控制器：

```
 public Task<HttpResponseMessage> UploadFile([FromUri]string folder)
    {
        if (!Request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.UnsupportedMediaType));
        }

        // Save file
        MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(HttpContext.Current.Server.MapPath("~/Files"));
        Task<IEnumerable<HttpContent>> task = Request.Content.ReadAsMultipartAsync(provider);

        return task.ContinueWith<HttpResponseMessage>(contents =>
        {
            string filename = provider.BodyPartFileNames.First().Value;
            return new HttpResponseMessage()
          {
              Content = new StringContent(string.Format("File saved in {0}.", folder))
          };

        }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

这些文件看起来像：

![在此处输入图像描述](../Images/4bb482c5826c23c3b51d327cd3658260.png)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-10T20:57:01.543

这是我们做出的一个有意识的改变 - 使用 Content-Disposition 标头字段中提供的文件名被认为存在安全风险，因此我们现在计算一个您所看到的文件名。

如果您想自己控制服务器本地文件名，那么您可以从 MultipartFormDataStreamProvider 派生并覆盖 GetLocalFileName 以提供您想要的任何名称。请注意，这样做可能存在安全考虑。

希望这可以帮助，

亨里克

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-11T07:21:35.973

我更新了本教程的代码以使其与 ASP.NET Web API RC 一起使用。事实上，正如 Henrik 提到的那样，Content-Disposition 不再是一个文件名。请参阅帖子底部的源文件 - [http://www.strathweb.com/2012/04/html5-drag-and-drop-asynchronous-multi-file-upload-with-asp-net-webapi/](http://www.strathweb.com/2012/04/html5-drag-and-drop-asynchronous-multi-file-upload-with-asp-net-webapi/)

请注意，对 MultipartFormDataStreamProvider 的进一步更改并未削减到 RC，因此它现在更加灵活。Henrik 在这里写了关于这些的博客 - [http://blogs.msdn.com/b/henrikn/archive/2012/04/27/asp-net-web-api-updates-april-27.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/04/27/asp-net-web-api-updates-april-27.aspx)。

**编辑：**我已经在博客中介绍了在 Web API RTM 中上传文件的新方法和改进方法，因此希望这有助于让事情井井有条 - [http://www.strathweb.com/2012/08/a-guide-to-asynchronous-file -上传-在-asp-net-web-api-rtm/](http://www.strathweb.com/2012/08/a-guide-to-asynchronous-file-uploads-in-asp-net-web-api-rtm/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-12-07T02:23:16.480

在这里，这对我有用

**在 API 控制器中**

```
// We implement MultipartFormDataStreamProvider to override the filename of File which
// will be stored on server, or else the default name will be of the format like Body-
// Part_{GUID}. In the following implementation we simply get the FileName from 
// ContentDisposition Header of the Request Body.
public class CustomMultipartFormDataStreamProvider : MultipartFormDataStreamProvider
{
    public CustomMultipartFormDataStreamProvider(string path) : base(path) { }

    public override string GetLocalFileName(HttpContentHeaders headers)
    {
        return headers.ContentDisposition.FileName.Replace("\"", string.Empty);
    }
} 
```

然后

```
 string root = HttpContext.Current.Server.MapPath("~/App_Data");       
 CustomMultipartFormDataStreamProvider provider = new CustomMultipartFormDataStreamProvider(root); 
```

谢谢，

# eclipse - 无法在 Ubuntu 12.04 中打开 Eclipse - java.lang.UnsatisfiedLinkError：无法加载 SWT 库

> ID：10970754
> 
> 赞同：11
> 
> 时间：2012-06-10T17:31:13.277
> 
> 标签：eclipse, swt, ubuntu-12.04

我新安装了 Ubuntu 12.04。我还安装了 Java 7。我尝试安装 eclipse-java-indigo-SR2-linux-gtk.tar.gz。我在 /home/ramprabhu 位置提取了这个文件。然后我尝试运行 eclipse 可执行文件。看到日志文件时出现错误。

**我的日志文件：**

```
 !SESSION 2012-06-10 22:47:35.959 -----------------------------------------------
eclipse.buildId=M20120208-0800
java.version=1.7.0_04
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86, WS=gtk, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os linux -ws gtk -arch x86 -product org.eclipse.epp.package.java.product

!ENTRY org.eclipse.osgi 4 0 2012-06-10 22:47:36.757
!MESSAGE Application error
!STACK 1
java.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons: 
    /home/ramprabhu/eclipse/configuration/org.eclipse.osgi/bundles/247/1/.cp/libswt-pi-gtk-3740.so: libXtst.so.6: cannot open shared object file: No such file or directory
    no swt-pi-gtk in java.library.path
    /home/ramprabhu/.swt/lib/linux/x86/libswt-pi-gtk-3740.so: /home/ramprabhu/.swt/lib/linux/x86/libswt-pi-gtk-3740.so: wrong ELF class: ELFCLASS64 (Possible cause: architecture word width mismatch)
    Can't load library: /home/ramprabhu/.swt/lib/linux/x86/libswt-pi-gtk.so

    at org.eclipse.swt.internal.Library.loadLibrary(Library.java:285)
    at org.eclipse.swt.internal.Library.loadLibrary(Library.java:194)
    at org.eclipse.swt.internal.gtk.OS.<clinit>(OS.java:22)
    at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:63)
    at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:54)
    at org.eclipse.swt.widgets.Display.<clinit>(Display.java:132)
    at org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:695)
    at org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161)
    at org.eclipse.ui.internal.ide.application.IDEApplication.createDisplay(IDEApplication.java:153)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:95)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

我无法运行日食。如何解决这个问题并运行eclipse。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-24T19:45:54.497

尝试使用以下命令

*   64位系统：`ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86_64/`

*   32 位系统：`ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86/`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T11:14:09.610

通过将`libswt`文件复制到`~/.swt/lib/linux/x86(or x86_64)`

对于 32 位：

```
/bin/cp /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86/ 
```

对于 64 位：

```
/bin/cp /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86_64/ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-07T16:30:08.793

当我尝试在 64 位 linux 下启动 Eclipse 的 32 位构建时遇到了这个错误。安装**ia32-libs**包后问题得到解决。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-25T19:11:09.413

在为 Blackberry 10 开发安装 QNX Momentic IDE（它基于 32 位 eclipse 发行版）后，我遇到了这个问题。我没有机会安装 ia32-libs 因为

> $ sudo apt-get install ia32-libs 读取包列表...完成 构建依赖树
> 读取状态信息...完成 包 ia32-libs 不可用，但被另一个包引用。这可能意味着该软件包丢失、已过时或仅可从其他来源获得但是以下软件包将替换它： lib32asound2 lib32z1 lib32ncurses5 lib32bz2-1.0
> 
> E: 包 'ia32-libs' 没有安装候选

我在[这篇文章中找到了解决方案](http://devblog.blackberry.com/2013/01/linux-setup-blackberry-10-development/)

> sudo aptitude install libc6:i386 libstdc++6:i386 libatk1.0-0:i386 libc6:i386 libcairo2:i386 libexpat1:i386 libffi6:i386 libfontconfig1:i386 libfreetype6:i386 libgcc1:i386 libgdk-pixbuf2.0-0:i386 libglib2 .0-0:i386 libgtk2.0-0:i386 libpango1.0-0:i386 libpcre3:i386 libpixman-1-0:i386 libpng12-0:i386 libselinux1:i386 libstdc++6:i386 libx11-6:i386 libxau6 :i386 libxcb1:i386 libxcb-render0:i386 libxcb-shm0:i386 libxcomposite1:i386 libxcursor1:i386 libxdamage1:i386 libxdmcp6:i386 libxext6:i386 libxfixes3:i386 libxi6:i386 libxinerama1:i386 libxrandr2:i386 libxrender1:i386 libxtst6:i386 zlib1g: i386

我相信这个解决方案也有助于简单的 32 位 eclipse

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-10T17:44:26.570

您正在混合 64 位和 32 位。下载 64 位版本的 Eclipse 并使用 64 位版本的 Java 7。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-05-29T16:52:25.123

这是我解决问题的方法 `aptitude search libswt-gtk`

然后`sudo apt-get install`没有安装的 ![在此处输入图像描述](../Images/6a2cc7e981afcbecdae36cf39e9c5a6e.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-17T08:51:13.287

我的 64 位系统也有同样的问题，ln 解决方案有效，神奇，64 位系统：ln -s /usr/lib/jni/libswt-* ~/.swt/lib/linux/x86_64/

# c++ - 有没有办法以编程方式遍历头文件？

> ID：10970761
> 
> 赞同：0
> 
> 时间：2012-06-10T17:31:57.013
> 
> 标签：c++, header-files

我有一种情况，我在我的项目中使用大小为 80MB 的库（仅限 C++ 头文件的集合）。

现在，我在我的一个源代码中只包含来自该库的 3 个头文件，但不幸的是，这些头文件中的每一个都包含其他头文件等等。

我想找到一种方法以某种方式遍历从我最初包含的 3 个头文件开始的头文件，以列出所有正在使用的头文件。

我正在尝试这样做，所以我只能从那个庞大的库中包含必要的头文件，以希望减小它的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:35:02.047

GCC 具有生成依赖项列表的[`-M`标志（和类似标志）。](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options)我想其他编译器也有类似的东西。

# ruby-on-rails - 生产中的Rails预编译错误

> ID：10970763
> 
> 赞同：0
> 
> 时间：2012-06-10T17:32:13.597
> 
> 标签：ruby-on-rails, ruby, production-environment

我收到此错误：

```
Sprockets::Helpers::RailsHelper::AssetPaths::AssetNotPrecompiledError in Main#index

Showing /etc/apache2/CrawlFish/app/views/layouts/application.html.erb where line #15 raised:

jquery-ui-1.8.20.custom.min isn't precompiled 
```

在 config/environements/production.rb 中，我添加了这一行：

```
config.assets.precompile += %w( jquery-ui-1.8.20.custom.min.js ) 
```

即使在这样做之后，我也收到上述预编译错误。在 public/assets/manifest.yml 中，没有 jquery-ui-1.8.20.custom.min.js 文件的条目。但是在公共/资产中，会生成以下文件：

```
jquery-ui-1.8.20.custom.min-3ef66af7d5b20341b5fceb4ad1b2755f.js
jquery-ui-1.8.20.custom.min-3ef66af7d5b20341b5fceb4ad1b2755f.js.gz
jquery-ui-1.8.20.custom.min.js
jquery-ui-1.8.20.custom.min.js.gz 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:38:51.490

你有没有像这样 jquery-ui 添加你的 jquery-ui

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs 
```

你为什么这样称呼它？

```
config.assets.precompile += %w( jquery-ui-1.8.20.custom.min.js ) 
```

如果它在资产文件夹中，您应该没有任何问题。

您的 application.rb 上是否有以下代码

```
config.assets.initialize_on_precompile = false 
```

我可能错了，但我会尝试

# sql-server-2008 - 哪里不在子查询中 - SQL Server 2008

> ID：10970765
> 
> 赞同：0
> 
> 时间：2012-06-10T17:32:46.843
> 
> 标签：sql-server-2008, tsql

下面的 SQL 语句中的内部查询是对数据库的一部分（code1、code2、code3 等）进行规范化。使用外部查询我想选择不在查找表中的代码（tblicd）

```
select primarycode from 
(
select id, primarycode from myTable
union
select id, secondarycode from myTable
union 
select id, tertiarycode from myTable) as t
order by id
where primarycode not in tblicd.icd_id 
```

上面的查询没有运行，我想知道我做错了什么。我得到的错误是`the multi-part identifier tblicd.icd_id could not be bound`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T17:35:12.887

一个问题是你的`ORDER BY`and`WHERE`子句被颠倒了。`ORDER BY`子句必须在子句之后`WHERE`。

你的`WHERE`条款也不正确。它应该是这样的：

```
WHERE primarycode NOT IN (SELECT icd_id FROM tblicd)
ORDER BY id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T17:37:01.287

```
where primarycode not in tblicd.icd_id 
```

可能

```
where primarycode not in (SELECT icd_id FROM tblicd ) 
```

# javascript - Openfire 一天后删除 pubsub 节点（不是在服务器重启或删除缓存后）

> ID：10970766
> 
> 赞同：1
> 
> 时间：2012-06-10T17:32:55.187
> 
> 标签：javascript, xmpp, openfire

一天后，我创建的所有 pubsub 节点都消失了，我无法通过 iq 节检索它们。但它们仍然在 mysql 数据库中。无论如何，当我创建节点时，它们可以通过 xml iq 节进行检索..

有人知道会发生什么吗？

Edit1：我注意到我使用标准配置创建的叶节点在一天后不会消失。所以我认为这是我这边的配置问题。

我检索 pubsub 节点：

```
<iq type='get' to='pubsub.server.local'>
  <query xmlns='http://jabber.org/protocol/disco#items'/>
</iq> 
```

或对于特定节点：

```
<iq type='get' to='pubsub.server.local'>
  <query xmlns='http://jabber.org/protocol/disco#items' node='Collection1'/>
</iq> 
```

这不是问题，因为在创建之后我得到了关于我创建的节点的所有信息。一天后我无法找回它们。也许我的配置有误，或者服务器在一天后删除了缓存之类的东西？但是我尝试手动删除缓存，并且可以检索新创建的节点。正如我所说，它们一天后无法恢复。这真的很奇怪。。

编辑2：配置

我创建了 collection/collection/leaf 以下配置：

```
<iq to='pubsub.server.local' type="set">
<pubsub xmlns="http://jabber.org/protocol/pubsub">
<create node="Weird"/> 
<configure><x xmlns="jabber:x:data" type="submit"> 
<field var="FORM_TYPE"><value>http://jabber.org/protocol/pubsub#node_config</value> </field>
<field var="pubsub#node_type"><value>collection</value></field>  
<field var="pubsub#title"><value>NodeName</value> </field>
<field var="pubsub#description"><value>NodeDescription</value></field>
<field var="pubsub#leaf_node_association_policy"><value>whitelist</value></field>
<field var="pubsub#leaf_node_association_whitelist"><value>owner@server.local</value></field>
</x></configure> </pubsub>
</iq> 
```

我可以将所有者的 JID 放入白名单吗？

然后我在第一个集合中创建并配置集合，该集合出于识别原因将“节点”属性设置为 collection_1234，并将“名称”属性设置为可读名称 Collection2

```
<iq to='pubsub.server.local' type="set">
<pubsub xmlns="http://jabber.org/protocol/pubsub">
<create node="collection_1234"/> 
<configure><x xmlns="jabber:x:data" type="submit"> 
<field var="FORM_TYPE"><value>http://jabber.org/protocol/pubsub#node_config</value> </field>
<field var="pubsub#node_type"><value>collection</value></field>
<field var="pubsub#collection"><value>Weird</value></field>   
<field var="pubsub#title"><value>Collection2</value> </field>
<field var="pubsub#deliver_payloads"><value>1</value></field>
<field var="pubsub#leaf_node_association_whitelist"><value>user1@server.local</value></field>
</x></configure> </pubsub>
</iq> 
```

子节点（此处为 Atom）的有效负载类型必须与父集合节点（此处为无）中的相同吗？

然后是 Collection2 中的一片叶子：

```
<iq to="pubsub.server.local" type="set">     
<pubsub xmlns="http://jabber.org/protocol/pubsub">
<create node="leaf_1234"/> 
<configure><x xmlns="jabber:x:data" type="submit"> 
<field var="FORM_TYPE"><value>http://jabber.org/protocol/pubsub#node_config</value></field>
<field var="pubsub#collection"><value>collection_1234</value></field> 
<field var="pubsub#type"><value>http://www.w3.org/2005/Atom</value></field>
<field var="pubsub#persist_items"><value>1</value></field>
<field var="pubsub#max_items"><value>-1</value></field>
<field var="pubsub#type"><value>http://www.w3.org/2005/Atom</value>
<field var="pubsub#publisher">
  <value>nodeowner@server.local</value>
  <value>anotheruser@server.local</value>
</field>
</x>
</configure> </pubsub>
</iq> 
```

我可以将节点所有者配置为发布者吗？我省略了 #publish_model 变量，因为值 publishers 是标准的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:40:21.367

不确定这是否仍然相关，但它可能会帮助其他人：

我也遇到了这个问题，但是使用了字母“H”（正如您在评论中所描述的那样）。我可以创建以“H”开头的节点并正确使用它们，但是当重新启动 openfire 时，即使数据库中确实存在这些节点，也不会找到这些节点。我发现这是因为名为' '的**根节点**`home`。可能是因为这也以“H”开头。我尝试为以不同字符开头的根节点赋予几个不同的名称，但这会导致一个或多个其他起始字符失败。

为了解决这个问题，我将根节点命名为“ `*`”，问题就消失了！一个聪明的方法是将你的数据库导出到一个文本文件，用''替换所有[根节点]（`home`在我的例子中是' `*`'），然后再次导入它，最后重新启动openfire。

# xcode - Xcode .storyboard 运行但没有

> ID：10970767
> 
> 赞同：0
> 
> 时间：2012-06-10T17:32:58.627
> 
> 标签：xcode, build, storyboard

我使用故事板在 Xcode 中构建了一个文件，故事板连接在一起并显示我想要的数据。当我在 iOS 模拟器上编译和运行时，除了一些空单元格和标题之外，什么都没有出现。

# mongodb - 用于酒店预订/房间可用性的 MongoDB 架构

> ID：10970777
> 
> 赞同：4
> 
> 时间：2012-06-10T17:34:08.743
> 
> 标签：mongodb, schema, nosql

我目前正在构建一个与酒店预订网站具有类似模型的应用程序。

目前正在考虑处理可用性搜索的方法。

我的模型看起来有点像下面：

**酒店**
_id
名称
描述
star_rating
地址
lat
lon

然后我想到有一个像这样的可用性集合：

**可用性**
hotel_id（如果可用性是它自己的集合）
date
room_type
room_max_occupancy
price

date 将存储房间可用的一天
room_type 将是“Twin” “Double”<br> room_max_occupancy 将是 2、3 等...

一个示例查询是：
6 月 1 日至 8 日入住的房间，可供 2 人入住。

对于“搜索结果”，我需要返回hotel.name、hotel.description、hotel.star_rating。

我正在寻找为上面列出的查询类型存储此数据的最有效方法？

可用性集合应该是它自己的集合还是 Hotel 的子文档？

如果它是自己的集合，我是否应该将纬度添加到可用性中（连同hotel_id）以提高搜索效率？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T18:06:31.613

让我们从查询开始向后工作。您想要的是一系列日期的可用房间列表。将房间存储为未来日期的“未预订”是不可行的，因此您将收集预订信息。查询如下所示：

```
db.booking.find({date: {$gte: from_date, $lt: to_date}}); 
```

这可能会给我们一个房间 ID 列表。

集合：`booking` 领域：`room_id, date`

下一个查询是为我们提供符合约束条件的房间 ID 列表。就像是：

```
db.rooms.find({room_type: "Double", room_max_occupancy: 2}); 
```

除非房间已被预订的日期，我们可以得到可用性状态。如果每家酒店的平均房间数量很高，则不值得用于潜在地复制酒店信息的空间，相反，我们应该为每个房间提供酒店 ID。然后，您必须汇总唯一的酒店列表以避免重复查询

集合：`rooms`领域：`room_type, room_max_occupancy, price, hotel_id`

最后一个查询用于获取酒店信息：

```
db.hotels.find({id: <ID>}, {'name': 1, 'description': 1, 'star_rating': 1}); 
```

集合：`hotels`领域：`name, description, star_rating, address, lat, lon`

如果您确实需要直接访问可用性信息，则必须确定允许预订的日期限制（比如未来 6 个月）。每天，必须运行一个脚本来向数据库添加新的一天（空白）可用性信息。您可以将预订集合修改为：

集合：`booking`字段：（`room_id, date, is_available, hotel_id`以及保存预订过程详细信息的字段）

您的查询现在应该有一个额外的约束：

```
db.booking.find({is_available: true, date: {$gte: from_date, $lt: to_date}}); 
```

您将可以访问房间 ID 和酒店 ID（一些冗余以跳过其他查询），您可以从中获取酒店的显示详细信息

# ruby - 将元素的索引保存到变量中

> ID：10970780
> 
> 赞同：1
> 
> 时间：2012-06-10T17:35:01.957
> 
> 标签：ruby, arrays, variables

我是 Ruby 新手（和一般编程），并且一直在阅读大量文档、操作方法和 SO 问题，试图找到这个问题的答案，但到目前为止还没有运气。

我有一个整数数组，我试图将对象的一个​​整数保存到一个变量中，以便稍后从数组中删除该对象。到目前为止我所拥有的：

```
array = [3, 5, 1, 2, 6, 9]
objToDel = array[3]
array.delete_at(objToDel)
array 
```

这会删除数组中的“1”......我希望它删除“2”。我知道会发生这种情况，因为变量指向数组 [3] 将其指向“2”，而不是数组中实际的第三个元素。我也尝试过切片方法，但无济于事。

那么，是否可以让变量等于元素的索引而不是其内容？如果不将数组转换为哈希，这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T03:24:49.917

用你的话来说，试试这个：

```
array = [3, 5, 1, 2, 6, 9]
objToDel = 3
array.delete_at(objToDel)
array 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:48:01.283

当然，只需将索引分配给变量：

```
index = 3
array.delete_at(index) # => 2
array # => [3, 5, 1, 6, 9] 
```

您也可以使用该`delete`方法直接删除对象。

```
object_to_delete = 2
array.delete(object_to_delete) # => 2
array # => [3, 5, 1, 6, 9] 
```

请注意，这会删除数组中对象的所有实例，这可能不是您想要的。

# php - 使用 PHP 连接到 Solr

> ID：10970786
> 
> 赞同：1
> 
> 时间：2012-06-10T17:35:20.147
> 
> 标签：php, solr, xsd, schema

我刚刚安装了 Solr，我得到了默认模式。但是当我将模式从默认更改为更简单的模式时，我无法通过 php 通过 solr 进行连接，但仍然可以通过 tomcat 进行连接。我的 php 代码如下所示：

```
require_once 'Apache/Solr/Service.php';

        $solr = new Apache_Solr_Service(
        'xxx.xx.xxx.xxx',
        8080,
        '/dev.example.com/');

        if(!$solr->ping()){         
            echo 'Solr Down';
        } 
```

还有我在 solr 中的架构

```
<?xml version="1.0" ?>
<schema name="testschema1" version="1.5">
  <types>
   <fieldtype name="string"  class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
  </types>

 <fields>
  <!-- general -->
  <field name="id"  type="string"   indexed="true"  stored="true"  multiValued="false" required="true"/>
  <field name="type"    type="string"   indexed="true"  stored="true"  multiValued="false" />
  <field name="name"    type="string"   indexed="true"  stored="true"  multiValued="false" />
  <field name="core0"   type="string"   indexed="true"  stored="true"  multiValued="false" />
 </fields>

 <!-- field to use to determine and enforce document uniqueness. -->
 <uniqueKey>id</uniqueKey>

 <!-- field for the QueryParser to use when an explicit fieldname is absent -->
 <defaultSearchField>name</defaultSearchField>

 <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
 <solrQueryParser defaultOperator="OR"/>
</schema> 
```

当我使用 java -jar start.jr 时也会出现此错误

```
SEVERE: org.apache.solr.common.SolrException: undefined field text
    at org.apache.solr.schema.IndexSchema.getDynamicFieldType(IndexSchema.java:1330)
    at org.apache.solr.schema.IndexSchema$SolrQueryAnalyzer.getAnalyzer(IndexSchema.java:408) 
```

只是为了澄清一下，当我将架构更改为上述架构时，它仅不会从 PHP 连接，solr 提供的默认架构有效。我错过了一些必需的选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:50:29.413

似乎在 solrconfig.xml 中多次引用了文本字段（我通过相同的错误找到了这篇文章）。您可以将这些引用更新为您选择的字段名称（无论在您的架构中是否有意义）。

这样做为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T18:54:21.233

看起来当您尝试与 solr 连接时，它正在寻找一个名为的字段，该字段`text`从您的架构中丢失。

将以下行添加到您的架构中，然后重试：

```
<field name="text" type="text" indexed="true" stored="true" multiValued="true" /> 
```

# javascript - 将回调附加到 JSF 生成的 html - Primefaces

> ID：10970789
> 
> 赞同：0
> 
> 时间：2012-06-10T17:35:34.530
> 
> 标签：javascript, jquery, jsf, callback, primefaces

我有一个 Primefaces 命令按钮，我需要在 document.ready 上的 jQuery 中添加回调。基本上我一直在尝试做的是获取对现有函数的引用，然后在我编写的新函数中调用它：

```
var existingFunction = jQuery("[id~='submit']").live("click");
jQuery("[id~='submit']").live("click", function(){
    existingFunction();
    alert('test');
    updateControlPanel(buildControlPanelUrl(getUrlVars()));
}); 
```

这对我来说似乎很简单，但由于某种原因，这不起作用。当我加载页面并单击提交按钮时，它甚至没有到达警报。

我检查了错误控制台，发现它抛出了以下错误：

```
((f.event.special[s.origType] || {}).handle || s.handler).apply is not a function 
```

页面上存在我没有编写的现有 jQuery 函数，但我想确保此错误与我处理此错误的方式无关。

我正在使用带有旧版本 JQuery（1.3 或 1.4）的 tomcat 6。

谢谢，如果你们需要更多信息，请告诉我。

**编辑**

我已经举了一个我在 JS Fiddle 上尝试做的例子：http: [//jsfiddle.net/anSXH/2/](http://jsfiddle.net/anSXH/2/)

这里有一些进一步的说明：我使用最新的 Primefaces 组件库在 JSF 2.0 (MyFaces) 中将按钮构建为一个项目。然后，我使用了该按钮并将其嵌入到现有网页中。该按钮提交表单，然后调用 JavaScript 函数以在 ajax 请求完成后在页面上显示结果。当我将按钮嵌入页面时，这一切都有效，但我现在需要在按钮调用函数后更新客户端的某些内容。这就是为什么我正在考虑向现有的 onclick 函数添加回调。

附带说明一下，因为我使用的是 Primefaces，所以我可以附加一个 JavaScript 函数以在 ajax 请求完成后运行。我的计划 B 是尝试访问此功能并以某种方式覆盖它。

**编辑第 2 部分** 这是从 primefaces 生成的控件：

```
<button 
 id="topsaveform:submittop"
 name="topsaveform:submittop"
 class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"
 onclick="PrimeFaces.ab({source:'topsaveform:submittop',process:'topsaveform OEIMeasurementsTable',update:'errorMessages submittedPopup',onstart:function(cfg){jQuery('#loadingBar').show('fast');;},oncomplete:function(xhr,status,args){postSubmit();;}});return false;" 
 type="submit">
   <span class="ui-button-text">Save</span>
</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:21:21.077

您是否尝试过制作原始功能`die`（[ref](http://api.jquery.com/die/)）？

```
jQuery("[id~='submit']").die("click");
jQuery("[id~='submit']").live("click", function(){
    alert('test');
    updateControlPanel(buildControlPanelUrl(getUrlVars()));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:32:30.180

问题是我试图用一个 primefaces 按钮来做到这一点。当我切换到标准 JSF 按钮时，我能够将功能附加到它上面没有问题。

# iis - 使用 get-website 在绑定中搜索？

> ID：10970797
> 
> 赞同：2
> 
> 时间：2012-06-10T17:36:31.597
> 
> 标签：iis, powershell

为什么我不能做一个简单的：

```
Get-Website | where { $_.Bindings -like "*DOMAIN*" } 
```

在绑定？但它在名称和物理路径上工作正常吗？有什么方法可以使用 get-website 对 Bindings 进行搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:03:51.937

因为可以有多个绑定。您必须遍历它们中的每一个：

```
Get-Website | 
    Select-Object Bindings |
    Where { $_.BindingInformation -like '*DOMAIN*' } 
```

# actionscript-3 - 尽管所有图块都被转换为单个位图，但基于图块的游戏中的 Flash/AS3 帧率很低

> ID：10970801
> 
> 赞同：0
> 
> 时间：2012-06-10T17:36:55.967
> 
> 标签：actionscript-3, flash

我正在开发一个使用小图块生成关卡的 Flash (AS3) 小游戏。

瓷砖的位置、宽度、高度和其他属性在生成时存储在一个数组中。每个图块都添加到同一个容器影片剪辑中。当所有切片都生成后，将容器动画剪辑转换为位图，从舞台上移除所有切片，并将原始容器从舞台上移除然后删除。除了播放器之外，位图是舞台上唯一剩下的“图形”。

这比允许在游戏过程中单独渲染所有 60,000 多个图块产生更好的性能；但是，随着图块数量的增加，帧速率仍然会降低。这是没有意义的，因为所有图块都添加到一个始终相同大小的位图中，而与图块的数量无关。

生成时有 20,000 个图块，游戏以全 FPS 运行，但在 60,000 个时，它运行相对不稳定，可能在 4-5 FPS 左右。

我已经删除了碰撞检测和通过 tile 数组运行的任何/每个脚本，以排除脚本的其他一些 CPU 密集型部分落后于帧速率的可能性。

知道为什么，尽管所有图块都已从舞台上移除并且它们的容器已删除，但即使背景位图包含相同数量的数据，而不管生成的图块数量如何，游戏仍然运行缓慢？

这是关卡生成算法的最后一部分，它将容器影片剪辑转换为位图，然后删除所有图块：

```
 var temp_bitmap_data:BitmapData = new BitmapData(this.stage_background_mc.width,this.stage_background_mc.height);

        temp_bitmap_data.draw(this.stage_background_mc);

        this.stage_background_bitmap = new Bitmap(temp_bitmap_data);

        main_class.main.stage.addChild(this.stage_background_bitmap);

        for (var block in blocks_array)
        {

             //every block in blocks_array has a child that is the actual graphic of the tile
             blocks_array[block]["block"].removeChild(blocks_array[block]["block"].getChildAt(0));

            if (blocks_array[block]["type"] == "bg_block")
            {
                this.stage_background_mc.removeChild(blocks_array[block]["block"]);
                blocks_array[block]["block"] = null;
            }
            if (blocks_array[block]["type"] == "path_block")
            {

                //path_blocks have a second child in addition to the first one that's already been removed. the second child is the only other child
                blocks_array[block]["block"].removeChild(blocks_array[block]["block"].getChildAt(0));
                this.stage_background_mc.removeChild(blocks_array[block]["block"]);             

            }

        }

        this.stage_background_mc = null; 
```

[编辑] 这是一张游戏图片，让您更好地了解正在发生的事情： ![游戏级别](../Images/3ee3864841d11b281edc245445d9eab5.png)

## [更新：]

即使从舞台上删除最终创建的位图，最终只有 1 个孩子在舞台上，并且将删除的位图设置为 null 也不会提高速度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:39:34.080

几个想法。

首先，您在某种程度上利用了 AS3 快速处理 blitting 的优势。您对舞台上只有一个单曲的想法是正确`Bitmap`的，但之前的步骤（添加`DisplayObjects`到 a`MovieClip`并`draw`在 that 上执行`MovieClip`）并不是最快的过程。一方面，`BitmapData.draw`比`BitmapData.copyPixels`（[这里](http://jacksondunstan.com/articles/1417)有一篇文章）慢。获得速度的最佳方法之一是预先对所有图形进行 blit，并将它们存储为`BitmapData`. 然后，`Object`为每个图形保留参考（包含位置等）。在您的渲染循环中，遍历每个对象，并使用`copyPixels`将图形的像素信息复制到单个舞台位图中的适当位置。这样，一切都慢`BitmapData.draw`命令已经预先发生，现在您只是在推动像素，Flash 非常快。

然而，这个过程并非没有缺点。例如，你不能用它做简单的转换。例如，您必须预先对旋转的所有帧进行 blit，以便旋转单个图形（因为您无法旋转 BitmapData，并且您没有使用`draw`a `DisplayObject`）。尽管如此，如果你能忍受这些限制，它还是非常快的。

这是一篇[文章](http://www.8bitrocket.com/2007/12/23/flash-as3-speed-tests-rendering-and-update-models/)，作为我上面解释的过程的教程。它很旧，但内容丰富。

最后，60,000 是一个非常大的数字。Flash 并不是一个“速度恶魔”。无论多么优化，最终都会达到极限。只是要记住的事情。

哦，这篇附加[文章](http://jacksondunstan.com/articles/1675)提供了一些关于 Flash 性能的重要提示。

# linux - gzip 输出后 Mysqldump 脚本未返回预期结果

> ID：10970803
> 
> 赞同：0
> 
> 时间：2012-06-10T17:37:05.380
> 
> 标签：linux, mysqldump

我正在尝试制作一个通过电子邮件发送我的mysqldump结果的脚本。成功的结果应该是 0，但我得到的错误代码是 1。看起来当我将结果通过管道传输到 gzip 时，结果发生了变化，我不知道如何仅捕获 mysqldump 结果。

这是我的脚本

```
DATE=$(date +"%Y-%m-%d_%Hh%Mm")
BACKUPDIR=/backups
BPAGE=4m

mysqldump -u backup -pCih3brg4 -h localhost --all-databases | gzip > $BACKUPDIR/all_db_$DATE.sql.gz

EXITCODE=$?
if [ $EXITCODE -eq 0 ] ; then

    chmod 600 $BACKUPDIR/all_db_$DATE.sql.gz 

    find  $BACKUPDIR/ -type f -name "*.gz" -mtime +7 -exec rm {} \;

    echo "DONE"

else echo "$0: backup failed with error code $?"

fi 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-27T03:32:15.283

本身没有回答，但 Auto MySQL 会为您完成所有这些，并具有其他一些不错的功能。

[http://sourceforge.net/projects/automysqlbackup/](http://sourceforge.net/projects/automysqlbackup/)

我用了很多年了，很稳。

# c# - 面向 C# .Net 3.0 的 INotifyPropertyChanged

> ID：10970805
> 
> 赞同：3
> 
> 时间：2012-06-10T17:37:21.443
> 
> 标签：c#, .net, inotifypropertychanged

我一直在努力使用 mvp 在 C# 中连接一些 winforms。UI 开发并不完全是我的强项，我一直在寻找一种重构证明方法来实现 INotifyPropertyChanged，而不必求助于字符串来触发更改通知。

msdn 示例[http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)以及我所见过的大多数其他示例都让我觉得这是错误的做法，尤其是关于事实上，如果您重构属性，则必须更改字符串。

我在 stackoverflow 上看到的所有其他选项都使用表达式和 func，遗憾的是，我支持的旧解决方案中没有工具，所以我想知道是否有人有办法复制使用表达式树来获取属性名称的当前解决方案。

我看到的解决方案的一个例子。

```
public static string GetPropertyName<T, TReturn>(Expression<Func<T, TReturn>>      expression) 
{
 MemberExpression body = (MemberExpression)expression.Body; return body.Member.Name; 
} 
```

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T17:46:50.613

对于 .NET 3.0，实现可重构的实现方式的最佳选择 `INotifyPropertyChanged`是通过某种形式的代码生成。例如，[PostSharp](http://www.sharpcrafters.com/)（一种 AOP 工具）使用 IL-weaving 在编译后步骤中修改生成的程序集。`INotifyPropertyChanged` [您可以在此处](http://www.sharpcrafters.com/solutions/notifypropertychanged)找到相关示例。

顺便说一句，[最先进的（C# 5）](http://blogs.microsoft.co.il/blogs/pavely/archive/2012/03/20/inotifypropertychanged-implementation-with-c-5-0.aspx)实现方式`INotifyPropertyChanged` 根本不需要特殊工具：有[`[CallerMemberName]`属性](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute%28v=vs.110%29.aspx).

# javascript - 类型错误：jasmine.getEnv().currentSpec 为空

> ID：10970809
> 
> 赞同：18
> 
> 时间：2012-06-10T17:38:12.597
> 
> 标签：javascript, ruby-on-rails, jasmine, typeerror

当我尝试运行我的茉莉花规格时，我得到

```
TypeError: jasmine.getEnv().currentSpec is null in 
    http://localhost:8888/__JASMINE_ROOT__/jasmine.js (line 498) 
```

不知道为什么，甚至不知道从哪里开始寻找。

第 498 行是：

```
return jasmine.getEnv().currentSpec.expect(actual); 
```

我已经做了几个月的茉莉花，但不是在这个项目上。我以前从未见过这种情况。

那么，我从哪里开始呢？

（这是 rails 3.x 项目中的 jasmine gem）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-10T23:54:10.520

我看到了同样的错误。我有一个`expect`直接在里面的声明`describe`。我将`expect`内部移动了一个`it`块，错误消失了。

感谢[rinat-i​​o](https://stackoverflow.com/users/1224211/rinat-io)的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T16:00:25.547

查看这条推文，它有两个修复程序，也许一个可以帮助您（它们与您正在使用的 getEnv() 方法相关：

[https://twitter.com/dfkaye/statuses/423913741374074880](https://twitter.com/dfkaye/statuses/423913741374074880)

和github链接：

[https://github.com/dfkaye/jasmine-intercept](https://github.com/dfkaye/jasmine-intercept) [https://github.com/dfkaye/jasmine-where](https://github.com/dfkaye/jasmine-where)

也许其中之一会阐明您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T20:36:23.517

你的完整测试是什么样的？我也遇到了这个错误。我的测试看起来像这样：

```
'use strict';

describe("CalendarController", function() {
  var scope, $location, $controller, createController;
  var baseTime = new Date(2014, 9, 14);
  spyOn(Date.prototype, 'getMonth').andReturn(baseTime.getMonth());
  spyOn(Date.prototype, 'getDate').andReturn(baseTime.getDate());
  spyOn(Date.prototype, 'getFullYear').andReturn(baseTime.getFullYear());
  var expectedMonth = fixture.load("months.json")[0];

  beforeEach(module('calendar'));

  beforeEach(inject(function ($injector) {
    scope = $injector.get('$rootScope').$new();
    $controller = $injector.get('$controller');

    createController = function() {
      return $controller('CalendarController', {
        '$scope': scope
      });
    };
  }));

  it('should load the current month with days', function(){
    var controller = createController();
    expect(scope.month).toBe(expectedMonth);
  });
}); 
```

请注意，SpyOn 函数位于描述块中。查看 jasmine 代码时，我们发现 SpyOn 应该位于 a`beforeEach`或`it`块中：

```
jasmine.Env.prototype.it = function(description, func) {
  var spec = new jasmine.Spec(this, this.currentSuite, description);
  this.currentSuite.add(spec);
  this.currentSpec = spec;

  if (func) {
    spec.runs(func);
  }

  return spec;
}; 
```

...

```
jasmine.Env.prototype.beforeEach = function(beforeEachFunction) {
  if (this.currentSuite) {
    this.currentSuite.beforeEach(beforeEachFunction);
  } else {
    this.currentRunner_.beforeEach(beforeEachFunction);
  }
}; 
```

这些是设置的地方`currentSpec`。否则这将为空。所以在我的例子中应该是：

```
'use strict';

describe("CalendarController", function() {
  var scope, $location, $controller, createController;
  var baseTime = new Date(2014, 9, 14);
  var expectedMonth = fixture.load("months.json")[0];

  beforeEach(module('calendar'));

  beforeEach(inject(function ($injector) {
    scope = $injector.get('$rootScope').$new();
    $controller = $injector.get('$controller');

    createController = function() {
      return $controller('CalendarController', {
        '$scope': scope
      });
    };
  }));

  it('should load the current month with days', function(){
    spyOn(Date.prototype, 'getMonth').andReturn(baseTime.getMonth());
    spyOn(Date.prototype, 'getDate').andReturn(baseTime.getDate());
    spyOn(Date.prototype, 'getFullYear').andReturn(baseTime.getFullYear());

    var controller = createController();
    expect(scope.month).toBe(expectedMonth);
  });
}); 
```

然后这将起作用，因为 spyOn 在 it 块中。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T15:28:22.210

我认为问题出在**angular-mocks.js**和**angular-scenario.js**中不同版本的 angular 如果您的配置如下所示：

```
files = [
    JASMINE,
    JASMINE_ADAPTER,
    '../app/lib/angular/angular.js',
//  ANGULAR_SCENARIO,
//  ANGULAR_SCENARIO_ADAPTER,
    '../app/lib/angular/angular-scenario.js',
    '../app/lib/angular/jstd-scenario-adapter.js',
    '../app/lib/angular/jstd-scenario-adapter-config.js',
    '../app/lib/angular/angular-mocks.js',
    '../app/lib/angular/angular-resource.js',
    '../app/lib/angular/angular-cookies.js',
    '../app/js/**/*.js',
    '**/*Spec.js'
]; 
```

尽量避免**使用 ANGULAR_SCENARIO**和**ANGULAR_SCENARIO_ADAPTER** - 将其替换为嵌入到您的角度源中的那些（'../app/lib/angular/angular-scenario.js'、'../app/lib/angular/jstd-scenario-在我的情况下，adapter.js'，'../app/lib/angular/jstd-scenario-adapter-config.js'）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-05T21:37:53.453

我遇到了这个问题并找到了以下文章。好像 jasmine 版本和 Angular 版本没有一起工作。当我对文章概述 angular-mocks.js 进行更改时，错误就消失了。

[http://railsware.com/blog/2014/09/09/make-angularjs-1-0-7-work-with-jasmine-2-0/](http://railsware.com/blog/2014/09/09/make-angularjs-1-0-7-work-with-jasmine-2-0/)

我在学习 PluralSight 课程时遇到了这个问题：*使用 Bootstrap、AngularJS、ASP.NET、EF 和 Azure 构建站点。* 在单元测试模块期间。

问问题 user1040048 问问题 2012-06-10T17:38:23.023 347 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm including a SVG document with a object tag in a webpage. <title>CA/7GroupPDZBP2</title> In my toto.svg document i have some links like this : <svg style="background-color:transparent;" version="1.1" viewBox="0 0 1925 476" width="1925" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><a style="cursor:pointer;" xlink:href="page2.html"><text>Tony</text></a></svg> However if i click on the link, only the content of the object tag is replaced by the destination link in my page. The whole page is not refreshing. Anyone knows how to solve this problem ? Thanks for your help, Cuva Specify target="_top" on the link according to http://www.w3.org/TR/SVG/linking.html#Links htmlobjecthyperlinksvg 4 1 回答 1 This answer is useful 3 根据http://www.w3.org/TR/SVG/linking.html#Links在链接上指定 target="_top" 于 2012-06-10T18:22:08.457 回答 Related 1 java - 扩展 AbstractVisualizer 的困难：获取 ClassCastException 9 fish - 在 Fish Shell 中抑制或自定义介绍消息 2 vb.net - 实体框架 1-1 关系未将数据持久化到数据库 1 javascript - Facebook 应用程序在 Chrome 中无法运行，但在 Firefox 中运行良好 1 python - 影响多个任务的芹菜 rate_limit 2 azure - Azure Blob 存储和 HDF 文件存储 0 matlab - 奇怪的 jordan.m 失败 1 ios - 同步到云端时如何获取 iOS 崩溃日志 3 php - 在第二个浏览器中从一个浏览器中删除会话 1 c++ - QAudioOutput 代码是否存在内存泄漏？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# html - and link in included SVG document I'm including a SVG document with a object tag in a webpage. <title>CA/7GroupPDZBP2</title> 问问题 user1040048 问问题 2012-06-10T17:38:23.023 347 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm including a SVG document with a object tag in a webpage. <title>CA/7GroupPDZBP2</title> In my toto.svg document i have some links like this : <svg style="background-color:transparent;" version="1.1" viewBox="0 0 1925 476" width="1925" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><a style="cursor:pointer;" xlink:href="page2.html"><text>Tony</text></a></svg> However if i click on the link, only the content of the object tag is replaced by the destination link in my page. The whole page is not refreshing. Anyone knows how to solve this problem ? Thanks for your help, Cuva Specify target="_top" on the link according to http://www.w3.org/TR/SVG/linking.html#Links htmlobjecthyperlinksvg 4 1 回答 1 This answer is useful 3 根据http://www.w3.org/TR/SVG/linking.html#Links在链接上指定 target="_top" 于 2012-06-10T18:22:08.457 回答 Related 1 java - 扩展 AbstractVisualizer 的困难：获取 ClassCastException 9 fish - 在 Fish Shell 中抑制或自定义介绍消息 2 vb.net - 实体框架 1-1 关系未将数据持久化到数据库 1 javascript - Facebook 应用程序在 Chrome 中无法运行，但在 Firefox 中运行良好 1 python - 影响多个任务的芹菜 rate_limit 2 azure - Azure Blob 存储和 HDF 文件存储 0 matlab - 奇怪的 jordan.m 失败 1 ios - 同步到云端时如何获取 iOS 崩溃日志 3 php - 在第二个浏览器中从一个浏览器中删除会话 1 c++ - QAudioOutput 代码是否存在内存泄漏？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10970812
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, object, hyperlink, svg

I'm including a SVG document with a object tag in a webpage.

```
<html>
    <head>
         <title>CA/7GroupPDZBP2</title>
    </head>
    <body>
         <object data=".\toto.svg" height="400" src=".\toto.svg" type="image/svg+xml" width="100%"></object>
    <body>
</html> 
```

In my toto.svg document i have some links like this :

```
<svg style="background-color:transparent;" version="1.1" viewBox="0 0 1925 476" width="1925" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <a style="cursor:pointer;" xlink:href="page2.html">
        <text>Tony</text>
    </a>
</svg> 
```

However if i click on the link, only the content of the object tag is replaced by the destination link in my page. The whole page is not refreshing.

Anyone knows how to solve this problem ?

Thanks for your help, Cuva

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T18:22:08.457

根据[http://www.w3.org/TR/SVG/linking.html#Links在链接上指定 target="_top"](http://www.w3.org/TR/SVG/linking.html#Links)

# machine-learning - 随机决策树分类

> ID：10970815
> 
> 赞同：0
> 
> 时间：2012-06-10T17:38:38.583
> 
> 标签：machine-learning

我想了解随机树。我找不到关于随机树的好的参考资料。任何人都可以建议我任何好的参考，或者任何人都可以给我一些关于随机树的解释以及它与决策树的区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:19:25.443

随机树背后的想法是使用其中的许多来执行预测。这有助于模型更加健壮。

最著名的算法是 Leo Breiman 在 2001 年在以下文章中提出的“随机森林”： [Leo Breiman。随机森林。机器学习，45(1):5-32，2001 年 10 月。](http://www.springerlink.com/content/u0p06167n6173512/)

以下是算法的关键点：

*   森林的每棵树都建立在训练数据的引导样本之上
*   在每个树节点，从一组减少的变量中选择最佳分割（随机选择）
*   每棵树都完全长大（无需修剪）
*   预测是通过对所有树的多数投票做出的

# python - 来自不存在的 kwarg 密钥的 django,python keyerror - 我该如何避免这种情况？

> ID：10970817
> 
> 赞同：1
> 
> 时间：2012-06-10T17:38:49.223
> 
> 标签：python, django

如果我有一些代码：

```
variableA = self.kwarg['maybe'] 
```

现在，“也许”有时存在，有时不存在。我真的不在乎它是否不存在 - 我检查 variableA 是否为 None 下线 - 那么我如何避免当它不存在时弹出的哦-如此烦人的“keyerror”？

我只想让 django 让我将一个变量设置为无！

更新：谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:18:27.457

我从来没有使用过 django，但是如果 self.kwarg 是一个字典，你可以使用 get() 函数，它为不在字典中的元素返回 None （或可选的默认值）：

```
d = dict()
d.get("abc")              #-> None
d.get("abc", "default")   #-> "default" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T17:46:54.223

[http://docs.python.org/library/stdtypes.html#dict.setdefault](http://docs.python.org/library/stdtypes.html#dict.setdefault)

> `setdefault(key[, default])`
> 如果`key`在字典中，则返回其值。如果不是，则插入`key`值`default`并返回`default`。`default`默认为`None`.

应用于您的代码：

```
variableA = self.kwarg.setdefault('maybe')
# -> variableA is now None 
```

# python - 在 Python 中提取部分 2D 列表/矩阵/列表列表

> ID：10970821
> 
> 赞同：9
> 
> 时间：2012-06-10T17:39:13.550
> 
> 标签：python, list

我想在 Python 中提取二维列表（=列表列表）的一部分。Mathematica 用的比较多，写起来很方便

```
matrix[[2;;4,10;;13]] 
```

这将提取矩阵的第 2 行和第 4 行以及第 10 和第 13 列之间的部分。

在 Python 中，我只是使用了

```
[x[firstcolumn:lastcolumn+1] for x in matrix[firstrow:lastrow+1]] 
```

是否还有更优雅或更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-10T17:51:57.183

你想要的是[numpy 数组](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html)和 slice 运算符`:`。

```
>>> import numpy

>>> a = numpy.array([[1,2,3],[2,2,2],[5,5,5]])
>>> a
array([[1, 2, 3],
       [2, 2, 2],
       [5, 5, 5]])

>>> a[0:2,0:2]
array([[1, 2],
       [2, 2]]) 
```

# jquery - 如何使用 jQuery 比较文本？

> ID：10970822
> 
> 赞同：1
> 
> 时间：2012-06-10T17:39:23.220
> 
> 标签：jquery, compare, match

我有以下代码：

```
var nowa = [];      
var tab = [{'material':'221214', 'item':'SPRITE 0,33LX24PUS', 'quantity':'2', 'jedn':'CS'}];

$.each(tab, function(index, w) {

 if(($.inArray(w.material, nowa)) == -1){

  nowa.push(w.material);

   if(w.item == '0,33')
    rodzaj = 'can';

   if(w.item == '0.5')
    rodzaj = 'pet';

  $('table.new').append('<tr class="'+w.material+'" id="'+rodzaj+'"><td>'+w.material+'</td><td>'+w.item+'</td><td class="qq">'+w.quantity+'</td><td>'+w.jedn+'</td></tr>');

 }
});//each 
```

在这种情况下如何将 w.item 与其他文本进行比较？

因为这：

```
if(w.item == '0,33')
rodzaj = 'can'; 
```

不管用。

w.item 值可以是：0,5 0.5 0.33 1,0 1.5 2,5 和其他。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:41:27.150

您可以使用

```
w.item.search('0,33') 
```

所以你的比较看起来像

```
if(w.item.search('0.33') >= 0) {
  roadzaj = 'can';
} 
```

阅读更多关于**[.search()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/search)**

> 如果搜索成功，`search()`则返回字符串中被搜索元素的索引。否则，它返回 -1。

# java - 在Java中使用==而不是equals比较不可变对象是否可以？

> ID：10970823
> 
> 赞同：7
> 
> 时间：2012-06-10T17:39:30.043
> 
> 标签：java, equals, immutability

考虑两个调用静态工厂方法 valueOf 的 Integer 类型的引用，如下所示：-

```
 Integer a = Integer.valueOf("10"); 
    Integer b = Integer.valueOf("10"); 
```

考虑到 Integer 是不可变的，是否可以使用 == 而不是使用 equals 方法比较 a 和 b。我猜 valueOf 方法确保只创建一个值为 10 的 Integer 实例，并且为每个创建的值为 10 的 Integer 返回对该实例的引用。

一般来说，是否可以比较使用 == 而不是 equals 调用相同静态工厂方法创建的不可变类的两个引用？

编辑： Integer 类仅用作示例。我知道如果使用 == 进行比较，最多 127 的整数将返回 true。我需要知道的是，当我创建自己的不可变类时，例如使用方法 create() 的 MyImmutable，该方法将确保不会创建重复的 MyImmutable 对象，如果我比较使用 create 方法创建的 2 个 MyImmutable 引用是否可以使用 == 而不是等于。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T17:41:55.340

不，这通常不安全。`==`运算符比较引用，而不是值。

使用`==`恰好适用于 -128 到 127 之间的整数，但不适用于其他整数。以下代码演示了这`==`并不总是有效：

```
Integer a = Integer.valueOf(10); 
Integer b = Integer.valueOf(10); 
System.out.println(a == b);

true

Integer c = Integer.valueOf(1000); 
Integer d = Integer.valueOf(1000); 
System.out.println(c == d);

false 
```

在线查看它：[ideone](http://ideone.com/rvcT1)

这种行为的解释在于实现`Integer.valueOf`：

```
public static Integer valueOf(int i) {
     final int offset = 128;
     if (i >= -128 && i <= 127) { // must cache
         return IntegerCache.cache[i + offset];
     }
     return new Integer(i);
 } 
```

[来源](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.valueOf%28int%29)

也不是该标准要求小输入（-128 到 127）的装箱整数为对象提供相等的引用。

> **5.1.7 拳击转换**
> 
> 如果被装箱的值 p 是真、假、一个字节、一个在 \u0000 到 \u007f 范围内的字符，或者一个介于 -128 和 127 之间的 int 或短数字，则令 r1 和 r2 为任意两次装箱转换的结果p。r1 == r2 总是如此。

但是，该标准对超出此范围的整数没有做出此类保证。

* * *

> 一般来说，是否可以比较使用 == 而不是 equals 调用相同静态工厂方法创建的不可变类的两个引用？

如上所示，一般情况下它不会起作用。但是，如果您确保具有相同值的两个不可变对象始终具有相同的引用，那么是的，它可以工作。但是，您必须仔细遵守一些规则：

*   构造函数不能是公共的。
*   您通过静态方法创建的每个对象都必须被缓存。
*   每次要求您创建对象时，您必须首先检查缓存以查看您是否已经创建了具有相同值的对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-10T17:42:07.753

== 和 equals() 是根本不同的。

您应该阅读这篇文章以获取更多详细信息：

[等于/等于和 == 运算符之间的区别？](https://stackoverflow.com/questions/971954/difference-between-equals-and)

它与不可变对象无关。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-10T17:52:36.683

如果您的工厂方法为相同的输入返回相同的对象，那么将它们与 == 进行比较是安全的。例如 String.intern 就是这样工作的。枚举也可以与 == 进行比较。但是 Integer.valueOf 仅在 -128 ... 127 范围内返回相同的对象（在默认配置中）。

```
Integer.valueOf(127) == Integer.valueOf(127) 
```

但

```
Integer.valueOf(128) != Integer.valueOf(128) 
```

一般来说，您应该使用 equals 方法来比较任何对象。当对象有少量不同的值时，运算符 == 可用于提高性能。我不建议使用这种方法，除非你 100% 确定你在做什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T18:17:25.553

不变性和平等并不一定相互关联。== 比较引用相等，这意味着，它比较两个变量是否指向对象的同一个实例。相等意味着两个对象共享相同的值。不变性现在意味着您不能在构造对象后对其进行更改。

因此，您可能有两个不可变对象，它们表示相同的值（意思是，它们相等，因此 a.equals(b) 返回 true）但它们不是同一个实例。

我在这里给你一个小例子：

```
公共类 MyPoint {
    私人int x；
    私人int y；

    公共MyPoint（int x，int y）{
        这个.x = x;
        这个.y = y;
    }

    公共 int getX() {
        返回 x;
    }

    公共 int getY() {
        返回 y;
    }

    @覆盖
    公共布尔等于（对象 obj）{
        if (!(obj instanceof MyPoint))
            返回假；
        我的点 p = (我的点) obj;
        返回 this.x == px && this.y == py;
    }

    /**
     * @param 参数
     */
    公共静态无效主要（字符串[]参数）{
        我的点 p = 新的我的点 (2, 2);
        我的点 q = 新的我的点 (2, 2);
        我的点 r = q;

        System.out.println(p == q);
        System.out.println(p == r);
        System.out.println(q == r);
        System.out.println(p.equals(q));
        System.out.println(p.equals(r));
        System.out.println(q.equals(r));

    }

}
```

输出为： false false true true true true

MyPoint 是**不可变**的。初始化后，您无法更改其值/状态。但是，如您所见， myPoint 的两个对象可能是**equal**，但它们可能不是同一个实例。

我认为您想到的是某种享元模式，其中对于对象的每种可能状态仅存在一个对象。享元通常也意味着这些对象是不可变的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-10T17:42:34.547

它们不是同一个对象，所以`==`不会是真的。与对象，安全和使用`equals()`。

# python - 在 Ubuntu 上使用 Python 未通过 localhost 发送电子邮件

> ID：10970826
> 
> 赞同：0
> 
> 时间：2012-06-10T17:39:49.210
> 
> 标签：python, ubuntu, smtp

我有以下简单的代码来发送电子邮件：

```
server = smtplib.SMTP('localhost')
server.set_debuglevel(1)
server.sendmail(fromaddr, toaddrs, msg)
server.quit() 
```

但是，消息永远不会被发送。我添加了“set_debuglevel”行以尝试排除故障，但输出对我来说意义不大：

```
send: 'ehlo [127.0.1.1]\r\n'
reply: '250-ubuntu\r\n'
reply: '250-PIPELINING\r\n'
reply: '250-SIZE 10240000\r\n'
reply: '250-VRFY\r\n'
reply: '250-ETRN\r\n'
reply: '250-STARTTLS\r\n'
reply: '250-ENHANCEDSTATUSCODES\r\n'
reply: '250-8BITMIME\r\n'
reply: '250 DSN\r\n'
reply: retcode (250); Msg: ubuntu
PIPELINING
SIZE 10240000
VRFY
ETRN
STARTTLS
ENHANCEDSTATUSCODES
8BITMIME
DSN
send: 'mail FROM:<info@foobarconsulting.com> size=337\r\n'
reply: '250 2.1.0 Ok\r\n'
reply: retcode (250); Msg: 2.1.0 Ok
send: 'rcpt TO:<adam@foobarconsulting.com>\r\n'
reply: '250 2.1.5 Ok\r\n'
reply: retcode (250); Msg: 2.1.5 Ok
send: 'data\r\n'
reply: '354 End data with <CR><LF>.<CR><LF>\r\n'
reply: retcode (354); Msg: End data with <CR><LF>.<CR><LF>
data: (354, 'End data with <CR><LF>.<CR><LF>')
send: 'Hello!\r\n\r\nThe below URLs are either broken or taking too long to respond:\r\nhttp://www.google.com/does-not-exist/\r\nhttp://www.cnn.com/does-not-exist\r\n\r\nLog in and navigate to http://blahblah.com/wp-admin to update the content.\r\n\r\nThanks,\r\n\r\nYour friends at Foo Bar Consulting\r\n.\r\n'
reply: '250 2.0.0 Ok: queued as E7B8820144\r\n'
reply: retcode (250); Msg: 2.0.0 Ok: queued as E7B8820144
data: (250, '2.0.0 Ok: queued as E7B8820144')
send: 'quit\r\n'
reply: '221 2.0.0 Bye\r\n'
reply: retcode (221); Msg: 2.0.0 Bye 
```

我已经安装了 postfix（我相信它是在我使用标准 LAMP 包设置我的 Ubuntu 时默认安装的）但我不知道还能去哪里寻求帮助。

任何见解或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:44:57.413

1.  you might want to check out sendmail's log

2.  make sure your local DNS works. try `ping foobarconsulting.com`

# java - 异步 Servlet 异常

> ID：10970829
> 
> 赞同：4
> 
> 时间：2012-06-10T17:40:14.187
> 
> 标签：java, java-ee-6, tomcat7, servlet-3.0

我是 JavaEE 6 的新手，我了解到它支持称为 AsyncServlets 的异步 servlet。所以我尝试使用JavaEE6创建一个小程序。

这是我的 servlet 代码

```
@WebServlet(name = "AsyncServlet", urlPatterns = {"/AsyncServlet"}, asyncSupported=true)
public class AsyncServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        AsyncContext aCtx = request.startAsync(request, response);
        Executor executor = Executors.newSingleThreadExecutor();
        executor.execute(new MyClass(aCtx));
        System.out.println("Original thread is freed");
    }

} 
```

但是当我尝试运行 servlet 时，我得到一个异常 java.lang.IllegalStateException: Not supported。我使用 tomcat 7.0.14 作为服务器。我没有创建 web.xml。这段代码的问题在哪里？

编辑：

这是异常的完整堆栈跟踪

```
SEVERE: Servlet.service() for servlet [AsyncServlet] in context with path [/AsyncTest] threw exception
java.lang.IllegalStateException: Not supported.
at org.apache.catalina.connector.Request.startAsync(Request.java:1618)
at org.apache.catalina.connector.RequestFacade.startAsync(RequestFacade.java:1031)
at javax.servlet.ServletRequestWrapper.startAsync(ServletRequestWrapper.java:379)
at com.icbt.demo.servlet.AsyncServlet.doGet(AsyncServlet.java:30)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:311)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-31T09:08:29.830

如果你使用 tomcat 作为你的 web 服务器，那么你应该保持你将使用 asyc 请求到 tomcat

在开始异步请求之前把这行代码

```
request.setAttribute("org.apache.catalina.ASYNC_SUPPORTED", true); 
```

我希望你能从中得到你想要的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T06:52:23.420

如果应用程序尝试启动异步操作并且请求处理链中存在不支持异步处理的 servlet 或 servlet 过滤器，则会抛出 IllegalStateException。所以可能有一些错误。请检查您的代码。

# objective-c - 异步传递值

> ID：10970832
> 
> 赞同：0
> 
> 时间：2012-06-10T17:40:41.890
> 
> 标签：objective-c, ios, block

我有以下使用块和完成处理程序的方法：

```
 // Returns YES if photo is stored in a virtual vacation.
- (BOOL) photoIsOnVacation
{
    __block BOOL photoOnFile = NO;

    // Identify the documents folder URL.
    NSFileManager *fileManager = [[NSFileManager alloc] init];
    NSError *errorForURLs      = nil;
    NSURL *documentsURL        = [fileManager URLForDirectory:NSDocumentDirectory
                                                     inDomain:NSUserDomainMask
                                            appropriateForURL:nil
                                                       create:NO
                                                        error:&errorForURLs];
    if (documentsURL == nil) {
        NSLog(@"Could not access documents directory\n%@", [errorForURLs localizedDescription]);
    } else {

        // Retrieve the vacation stores on file.
        NSArray *keys = [NSArray arrayWithObjects:NSURLLocalizedNameKey, nil];
        NSArray *vacationURLs = [[NSFileManager defaultManager] contentsOfDirectoryAtURL:documentsURL
                                                              includingPropertiesForKeys:keys
                                                                                 options:NSDirectoryEnumerationSkipsHiddenFiles
                                                                                   error:nil];
        if (!vacationURLs) photoOnFile = NO;
        else {

            // Search each virtual vacation for the photo.
            for (NSURL *vacationURL in vacationURLs) {
                NSError *errorForName  = nil;
                NSString *vacationName = nil;
                [vacationURL getResourceValue:&vacationName forKey:NSURLNameKey error:&errorForName];
                [VacationHelper openVacationWithName:vacationName usingBlock:^(UIManagedDocument *vacationDocument) {
                    NSError *error              = nil;
                    NSManagedObjectContext *moc = vacationDocument.managedObjectContext;

                    // Build fetch request.
                    NSFetchRequest *request          = [NSFetchRequest fetchRequestWithEntityName:@"Photo"];
                    NSString *currentPhotoID         = [self.chosenPhoto objectForKey:FLICKR_PHOTO_ID];
                    request.predicate                = [NSPredicate predicateWithFormat:@"unique = %@", currentPhotoID];
                    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"unique" ascending:YES];
                    request.sortDescriptors          = [NSArray arrayWithObject:sortDescriptor];

                    // Execute fetch request.
                    NSArray *checkPhotos = [moc executeFetchRequest:request error:&error];
                    if (error) {
                        NSLog(@"Error searching for photo:%@",error);
                    } else {
                        Photo *checkPhoto = [checkPhotos lastObject];
                        if ([checkPhoto.unique isEqualToString:currentPhotoID]) photoOnFile = YES;
                    }
                }];
                if (photoOnFile) break;
            }
        }
    }
    return photoOnFile;
} 
```

我的问题是 photoOnFile 总是错误的，因为执行在包含获取请求的块之前到达返回。我已经尝试在 dispatch_async(dispatch_get_main_queue(),^{ 中嵌入 photoOnFile 分配，但这没有帮助。任何指导表示赞赏。

更新：这是成功结合 Ken 推荐的解决方案的重新编写的代码：

```
 - (void)checkIfPhotoIsOnVacationAndDo:(void(^)(BOOL photoIsOnVacation))completionBlock
{
    __block BOOL photoIsOnVacation = NO;

    // Identify the documents folder URL.
    NSFileManager *fileManager = [[NSFileManager alloc] init];
    NSError *errorForURLs      = nil;
    NSURL *documentsURL        = [fileManager URLForDirectory:NSDocumentDirectory
                                                     inDomain:NSUserDomainMask
                                            appropriateForURL:nil
                                                       create:NO
                                                        error:&errorForURLs];
    if (documentsURL == nil) {
        NSLog(@"Could not access documents directory\n%@", [errorForURLs localizedDescription]);
    } else {

        // Retrieve the vacation stores on file.
        NSArray *keys = [NSArray arrayWithObjects:NSURLLocalizedNameKey, nil];
        NSArray *vacationURLs = [[NSFileManager defaultManager] contentsOfDirectoryAtURL:documentsURL
                                                              includingPropertiesForKeys:keys
                                                                                 options:NSDirectoryEnumerationSkipsHiddenFiles
                                                                                   error:nil];
        if (!vacationURLs) photoIsOnVacation = NO;
        else {

            // Search each virtual vacation for the photo.
            for (NSURL *vacationURL in vacationURLs) {
                NSError *errorForName  = nil;
                NSString *vacationName = nil;
                [vacationURL getResourceValue:&vacationName forKey:NSURLNameKey error:&errorForName];
                [VacationHelper openVacationWithName:vacationName usingBlock:^(UIManagedDocument *vacationDocument) {
                    NSError *error              = nil;
                    NSManagedObjectContext *moc = vacationDocument.managedObjectContext;

                    // Build fetch request.
                    NSFetchRequest *request          = [NSFetchRequest fetchRequestWithEntityName:@"Photo"];
                    NSString *currentPhotoID         = [self.chosenPhoto objectForKey:FLICKR_PHOTO_ID];
                    request.predicate                = [NSPredicate predicateWithFormat:@"unique = %@", currentPhotoID];
                    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"unique" ascending:YES];
                    request.sortDescriptors          = [NSArray arrayWithObject:sortDescriptor];

                    // Execute fetch request.
                    NSArray *checkPhotos = [moc executeFetchRequest:request error:&error];
                    if (error) {
                        NSLog(@"Error searching for photo:%@",error);
                    } else {
                        Photo *checkPhoto = [checkPhotos lastObject];
                        if ([checkPhoto.unique isEqualToString:currentPhotoID]) {
                            photoIsOnVacation = YES;
                            completionBlock(photoIsOnVacation);
                        }
                    }
                }];
                if (photoIsOnVacation) break;
            }
            completionBlock(photoIsOnVacation);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T19:55:16.353

异步性趋于传播。一旦你使一个 API 异步，它的所有调用者也必须重新设计为异步工作。因此，像您这样的方法`- (BOOL) photoIsOnVacation`是站不住脚的，因为它的接口是同步的——调用者希望在调用完成后立即得到答案——但实现方式并非如此。

您必须重新设计为类似`- (void) checkIfPhotoIsOnVacationAndDo:(void(^)(BOOL photoIsOnVacation))block`. 这从调用者那里获取一个块，并在已知时调用带有答案的块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T20:06:24.697

这就是信号量的用途：

```
bool waitForBlockToExecute()
{
    __block bool value = false;

    dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);

    dispatch_async(dispatch_get_global_queue(0, 0), ^{
        // sleep for a bit
        sleep(1);

        value = true;

        // notify that the block is finished
        dispatch_semaphore_signal(semaphore);
    });

    // wait for the semaphore
    dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);
    dispatch_release(semaphore); // clean up the semaphore

    return value;
} 
```

显然，该`dispatch_async`块将替换为您的回调块，但我假设您从上面的代码中获得了图片。

# java - 无法从类型 teaminfo 对非静态方法 acceptadd(String) 进行静态引用

> ID：10970834
> 
> 赞同：0
> 
> 时间：2012-06-10T17:40:55.857
> 
> 标签：java, compiler-errors

目前，我正在尝试让几种方法相互访问。但是，我收到了一个我无法弄清楚的错误。

这是我得到的错误：

无法从类型 teaminfo 对非静态方法 acceptadd(String) 进行静态引用

我查看了一个方法或变量在不应该是静态的时候是否是静态的，但是方法 acceptadd(String) 或我从中调用它的方法都不是静态的。我不知道如何解决这一点，有人可以帮助我吗？

这是我的 GuiAddReject 代码：

[http://pastebin.com/Yj1Ny5Pz](http://pastebin.com/Yj1Ny5Pz)

错误无法从类型 teaminfo 对非静态方法 acceptadd(String) 进行静态引用位于此行：

```
 teaminfo.acceptadd(playername); 
```

这是teaminfo.java：

[http://pastebin.com/NxM8rwrE](http://pastebin.com/NxM8rwrE)

任何帮助，将不胜感激。

另外，对链接感到抱歉，无法使代码括号起作用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T17:44:28.977

The problem is that you're trying to call an *instance* method as if it were static.

On the line that you cited:

```
teaminfo.acceptadd(playername); 
```

`teaminfo` is a *class* name, not a variable referring to an *instance* of that class. You want to create a teaminfo object somewhere in your project, e.g. in GuiAddReject, and call the methods on that object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:45:15.047

The error means that you are trying to access a non-static method (`acceptadd`) from a static context (i.e. not from an object). To solve this you need to make an object of the class to which the method you want to call belongs and call the method from its reference.

for example the correct way would be:

```
teaminfo tf = new teaminfo();
tf.acceptadd(playername); 
```

# python - 为什么我在 python 模块中得到“NameError: name '...' is not defined”？

> ID：10970835
> 
> 赞同：-2
> 
> 时间：2012-06-10T17:40:59.163
> 
> 标签：python, machine-learning

**文件名：recom.py**

```
# Returns a distance-based similarity score for person1 and person2
def sim_distance(prefs,person1,person2):
# Get the list of shared_items
    si={}
    for item in prefs[person1]:
        if item in prefs[person2]:
            si[item]=1
    # if they have no ratings in common, return 0
    if len(si)==0: return 0
    # Add up the squares of all the differences
    sum_of_squares=sum([pow(prefs[person1][item]-prefs[person2][item],2)
    for item in prefs[person1] if item in prefs[person2]])
    return 1/(1+sum_of_squares) 
```

当我尝试***重新加载（recom）时出现错误***

**Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 NameError：名称'recom' 未定义**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-23T10:27:44.750

我使用python 3.4.3，我也遇到了同样的问题。下面的解决方案为我解决了它。

使用时`reload()`也应在使用`from imp import reload`前使用。

至于获得欧几里得距离分数，您可以得到如下答案：

```
 from recom import critics
 from recom import sim_distance
 sim_distance(critics,'Lisa Rose','Gene Seymour') 
```

结果是：0.29429805508554946

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:46:05.127

You need to have imported the module using "import recom" before it can be reloaded. Also, make sure the code is executing where it can resolve the path to recom.

# database - 在 Redis 中对集合的所有项目进行排名

> ID：10970837
> 
> 赞同：1
> 
> 时间：2012-06-10T17:41:00.847
> 
> 标签：database, nosql, redis

我一直在 redis 中尝试使用命令 ZREVRANK ，它似乎在单个项目上效果很好，但我似乎无法找到一种方法来返回一组中所有项目的等级：

"item1" score:3
"item2" score:5
"item3" score:2
"item4" score:3
"item5" score:7

排名结果:

"item5" score:7 rank:0
"item2" score:5 rank: 1
"item1" score:3 rank:2
"item4" score:3 rank:2
"item3" score:2 rank:3

我想知道是否有人找到了实现这一目标的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:07:28.450

您是否看过不使用 zrange 或 zrevrange ？
zcard 将为您提供集合中元素的总数。

# android - Phonegap 表单验证错误，使用后退按钮隐藏

> ID：10970838
> 
> 赞同：1
> 
> 时间：2012-06-10T17:41:03.470
> 
> 标签：android, ios, jquery-mobile, cordova

我正在开发 phonegapp 应用程序。我的应用程序有一个用户应该填写的表单。我使用 Jquery 进行了内联验证。当用户点击一些必填字段并且没有填写该字段时，它会提示错误，或者如果他尝试提交表单，所有必填字段都会出现错误。它按我的意愿工作。我的问题是当用户单击后退按钮而不提交表单时，所有提示的错误都在新页面中。当用户单击后退按钮时，如何隐藏这些提示错误。请帮我。

我已将屏幕截图附加到 picasa 相册。在这里检查

[https://picasaweb.google.com/103544813681982438507/PhonegapApp](https://picasaweb.google.com/103544813681982438507/PhonegapApp)

这是我的代码..

```
<html>

<form id="formID"  method="post" action="submit.action">

    <ul data-role="listview" data-inset="true" data-theme="a">

        <li ><div data-role="fieldcontain">
            <label for="address">Address</label>
            <input type="hidden" name="address" /></div>

            <label for="street">Street:</label>
            <input type="text" name="street" id="street" value="" class="validate[required] text-input" data-prompt-position="topLeft:50" data-prompt-position="top:60"/>

            <label for="suburb">Suburb</label>
            <input type="text" name="suburb" id="suburb" value="" class="validate[required] text-input" data-prompt-position="topLeft:50"/>
            <label for="town">Town</label>
            <input type="text" name="town" id="town" value="" class="validate[required] text-input" data-prompt-position="topLeft:50"/>
            <label for="district">District</label>
            <input type="text" name="district" id="district" value="" class="validate[required] text-input" data-prompt-position="topLeft:50"/></li>

        <li>
        <div data-role="fieldcontain">
        <label for="date">Date</label>
        <input value="" class="validate[required] text-input datepicker" type="text" name="date" id="date" data-prompt-position="topLeft:50" /></div></li>
        <li>
        <div data-role="fieldcontain">
        <label for="owner_name">xxxxxxxx</label>
        <input type="text" name="xxxxx" id="xxxxx" value="" class="validate[required] text-input" data-prompt-position="topLeft:50"/></div></li>

        <li>
        <div data-role="fieldcontain">
        <label for="xxxxxx">xxxxxxxxxxxx</label>
        <input type="text" name="xxxxxxxxxx" id="xxxxxxxxxxx" value=""/></div>
        </li>

        </ul>
     <div data-role="fieldcontain">
     <button type="submit" name="save" id="save" data-theme="a"  value="Save" class="submit"/></div>

    </form>
    </div></div>

     <script type="text/javascript"> 

//Form Validating.................................................
         jQuery(document).ready(function(){
        // binds form submission and fields to the validation engine
        jQuery("#formID").validationEngine({autoHidePrompt:true});          
        $( ".datepicker" ).datepicker();

        });
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:05:46.750

当用户离开当前页面时，您可以隐藏表单验证元素：

```
$(document).on('pagehide', function () {
    $('#formID').validationEngine('hideAll');
}); 
```

*来源：[https ://github.com/posabsolute/jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)*

看起来您并没有完全遵循 jQuery Mobile 页面约定：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-anatomy.html)

快速示例：

```
<body>
    <div data-role="page">
        <div data-role="header>...</div>
        <div data-role="content">...</div>
        <div data-role="footer">...</div>
</body> 
```

请注意，这`.on()`是 jQuery 1.7 的新功能，因此如果您使用的是 1.6.4 或更早版本，请更改`.on()`为`.bind()`.

# javascript - HTML 表单 - 使用操作和 onsubmit

> ID：10970839
> 
> 赞同：0
> 
> 时间：2012-06-10T17:41:04.963
> 
> 标签：javascript, html, forms, onsubmit

我有一个调用 javascript 函数的表单。此功能仅在从我网站上的某个页面（主页）调用时才有效。我希望将表单放在我网站的标题中，以便可以从其他页面填充它，重定向到主页，然后调用 onsubmit 函数。有没有办法可以做到这一点？

我目前用于表单的 html 是 -

```
<form action="#" onSubmit="runRoute();return false;" id="routeForm">
        <input type="text" id="routeDistance" value="" placeholder="1" />
        <select id="routeUnit">
          <option value="miles">miles</option>
          <option value="Km">km</option>
        </select> 
        <input type="text" id="routeStart" value="" placeholder="postcode or location" />
        <input type="submit" value="plan my route" class="submit" />
    </form> 
```

谢谢。

# c# - TreeView 中错误项目的 ContextMenuStrip

> ID：10970841
> 
> 赞同：3
> 
> 时间：2012-06-10T17:41:25.963
> 
> 标签：c#, winforms

我有一个 TreeView，其中所有节点都分配了相同的 ContextMenuStrip。

当我右键单击除已选择的之外的 TreeNode，然后在 ContextMenuStrip 中选择一个项目时，treeView1.SelectedNode 用于右键单击之前选择的节点，而不是右键单击的项目。

如何更改此行为，以便在显示 ContextMenuStrip 之前正确选择右键单击的节点？

```
private void newGroupToolStripMenuItem_Click(object sender, EventArgs e)
{
    TextFieldDialog t = new TextFieldDialog("New Order Group", "Enter the name of the new group");
    t.ShowDialog();
    if (t.DialogResult == DialogResult.OK)
    {
        int lastid = db.NewOrderGroup(t.Value, (int)treeView1.SelectedNode.Tag);
        TreeNode node = new TreeNode(t.Value);
        node.Tag = lastid;
        treeView1.SelectedNode.Nodes.Add(node);
    }
} 
```

在上面的代码`(int)treeView1.SelectedNode.Tag`中，返回我右键单击之前选择的节点的标签，而不是右键单击的节点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T17:56:58.723

它是 TreeView 的一个怪癖，只有鼠标*左键*选择一个节点。重置 ContextMenuStrip 属性并注意行为，当您右键单击时，突出显示会跳转到单击的节点，但在您释放按钮后它会立即跳回。

通过为 NodeMouseClick 事件实现事件处理程序来修复它。选择节点并显示上下文菜单，如下所示：

```
private void treeView1_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e) {
    if (e.Button == MouseButtons.Right) {
        treeView1.SelectedNode = e.Node;
        contextMenuStrip1.Show(treeView1, e.Location);
    }
} 
```

# php - 如何在 Joomla 中增加“列出所有类别”菜单的标题

> ID：10970844
> 
> 赞同：1
> 
> 时间：2012-06-10T17:41:43.307
> 
> 标签：php, joomla

我正在使用 Joomla 2.5 和 Cloudbase2 模板。在我的一个菜单中，我正在使用“列出所有类别”博客。( [http://ictforu.com/index.php/Programming/all/](http://ictforu.com/index.php/Programming/all/) )

问题是列表没有正确划分，看起来很笨拙。我需要增加标题并添加一条水平线进行分界。

我尝试探索代码，但不确定在哪里添加更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:51:02.887

您的问题**非常**主观，但根据我所见，您需要根据自己的喜好调整 CSS 文件，如下所示，或者使用模块的后缀覆盖添加其他 CSS 类：

第 41、43、45 行 [http://ictforu.com/libraries/gantry/css/joomla.css](http://ictforu.com/libraries/gantry/css/joomla.css)

第 9、70、218 行， http: [//ictforu.com/templates/ca_cloudbase2_j25/css/template.css](http://ictforu.com/templates/ca_cloudbase2_j25/css/template.css)

*也许*在第 9、66、67 行的 Gantry [http://ictforu.com/libraries/gantry/css/gantry.css](http://ictforu.com/libraries/gantry/css/gantry.css)

# c# - 为什么我在 windows phone 中使用时收到无法从关闭的 TextReader 读取

> ID：10970847
> 
> 赞同：1
> 
> 时间：2012-06-10T17:41:50.163
> 
> 标签：c#, silverlight, windows-phone-7

我的 Windows 手机应用程序中有以下代码，但会崩溃，但出现以下异常：无法从关闭的 TextReader 中读取。

谁能告诉我为什么，我不知道什么是错的。

```
 IsolatedStorageFile ISF = IsolatedStorageFile.GetUserStoreForApplication();

                IsolatedStorageFileStream FS = ISF.OpenFile("ipview.txt", FileMode.Open, FileAccess.Read);

                using (StreamReader SR = new StreamReader(FS))
                {

                        while (!SR.EndOfStream)
                        {
                             Dispatcher.BeginInvoke(() =>
                    {
                           IPHistoryBox.Items.Add(SR.ReadLine());
                    });
                        }

                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:44:02.203

`StreamReader`此代码在关闭后在调度程序线程上执行：

```
 Dispatcher.BeginInvoke(() =>
 {
     IPHistoryBox.Items.Add(SR.ReadLine());
 }); 
```

像这样改变它：

```
 var x = SR.ReadLine();
 Dispatcher.BeginInvoke(() =>IPHistoryBox.Items.Add(x)); 
```

这样`StreamReader`，在当前线程上读取结果并在 Dispatcher 线程上使用结果。

# jquery - 检测“samsung galaxy Android 2.3.5”的方向（横向和纵向模式）的事件

> ID：10970849
> 
> 赞同：2
> 
> 时间：2012-06-10T17:41:57.397
> 
> 标签：jquery, android, asp.net-mvc-3, jquery-mobile

**我想为横向和纵向模式展示不同的页面设计。**

**我想要一个每次用户将手机从“横向到纵向”和“纵向到横向”更改并且页面显示两种模式的不同设计时触发的事件。**

同样在我的代码中，每次显示横向设计时，它都无法检测到纵向模式。即使我以纵向模式运行页面。

对于以下移动设备：

**设备**：三星盖乐世，

**操作系统版本：** Android 2.3.5。

在这我使用：

**jQuery手机版：** 1.1.0。,

**jQuery版本：** 1.7.1

我的代码在**“iphone、ipad 和 htc android mobile”**上运行良好，但是当我在“Samsung Galaxy”中测试它时，它显示了横向和纵向模式的横向页面设计。

**我的代码是：**

```
 $(document).ready(function () {
    $("#pagecontent.ui-content").css({ 'padding': '0px', 'margin': '0px' });
    checkClientTimeZone();

    position = $.event.special.orientationchange.orientation();
    pagecontentChanges();

    //        $(window).bind("orientationchange", pagecontentChanges);

});
$.event.special.orientationchange.orientation = get_orientation = function () {
    var elem = document.documentElement;
    //alert(elem && elem.clientWidth / elem.clientHeight < 1.1 ? "portrait" :       "landscape");
    return elem && elem.clientWidth / elem.clientHeight < 1.1 ? "portrait" : "landscape";
};
window.addEventListener("orientationchange", function () {
    setTimeout(function () {
        position = $.event.special.orientationchange.orientation();
        pagecontentChanges();
    }, 500);
}, false);
window.addEventListener("resize", function () {
    setTimeout(function () {
        position = $.event.special.orientationchange.orientation();
        pagecontentChanges();
    }, 500);
}, false);

function pagecontentChanges() {

    if (position == "portrait") {
        $("#headertext").css({ "text-align": "center", "margin-top": "-2.6em" });
        $("#login_content").removeClass("landscap_logincontent");
        $("#registerdiv").removeClass("landscap_divwhite");
        $("#tylenol").css({ "width": "100%", "float": "", "margin-right": "0px" });
        $("#button_div .ui-btn").css(" margin-top", ".5em");
        $("#loginbluelink").css("text-align", "center");
        $("#redromantext").css("text-align", "center");
        $('#registerdiv').css({ "float": "" });
        $("#registertext").css({ "margin-top": "0px" });
        $(".divwhite").css({ "width": "60%" });

        $("#loginheader").attr("src", "@img_css_scpt/test_mobile/images/logon_header.png");

    }
    if (position == "landscape") {
        $("#headertext").css({ "text-align": "left", "padding-left": "5%", "margin-top": "1em" });
        $("#login_content").addClass("landscap_logincontent");
        $("#registerdiv").addClass("landscap_divwhite");
        $("#tylenol").css({ "width": "55%", "float": "left", "margin-right": ".5em" });
        $("#button_div .ui-btn").css(" margin-top", "0px");
        $("#loginbluelink").css("text-align", "left");
        $("#redromantext").css("text-align", "left");
        $("#registertext").css({ "margin-top": "5px" });
        $(".divwhite").css({ "width": "71%" });

        $("#loginheader").attr("src", "@img_css_scpt/test_mobile/images/landscap_header_logon.png");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:51:46.543

尝试给`window.resize`事件处理程序一个`setTimeout`：

```
$(window).bind("resize", function () {
    setTimeout(function () {
        position = $.event.special.orientationchange.orientation();
        pagecontentChanges();
    }, 500);
}); 
```

这就是我为`window.resize`运行 Android 2.3.4 的 Droid X 自己的事件处理程序所做的。

# batch-file - 如何在 BAT 文件中转义逗号？

> ID：10970852
> 
> 赞同：0
> 
> 时间：2012-06-10T17:42:09.183
> 
> 标签：batch-file

我正在尝试设置一个变量：

> 设置 pathJDK=%pathDrive%\"Program Files"\Java\jdk\

在 .bat 文件中，但是当我执行它时，它会响应错误消息：“Cannot find jdk at C:\"Program Files"\Java\jdk\"

我也尝试在整个路径的每一端放置逗号，但同样的问题。

由于某种原因，它会因空格而失败，并且当您使用引号时，它无法忽略它们而仅使用它们来转义空格。

有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:34:25.413

```
set "pathJDK=%pathDrive%\Program Files\Java\jdk\" 
```

要不就：

```
set pathJDK=%pathDrive%\Program Files\Java\jdk\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:08:10.497

您可以设置不带引号的 pathJDK 变量

```
set pathJDK=%pathDrive%\Program Files\Java\jdk 
```

但是，当使用依赖于 pathJDK 变量的命令调用其他批处理文件或外部程序时，您需要使用引号。像那样：

```
"%pathJDK%\SomeProg.exe" 
```

或者

```
call "%pathJDK%\SomeScript.cmd" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:58:10.993

尝试定义`Program Files`为变量：

> SET PROGRAMFILES=程序文件

进而

> 设置路径JDK=%pathDrive%\%PROGRAMFILES%\Java\jdk\

# javascript - Javascript：如何隐藏对象的属性？

> ID：10970859
> 
> 赞同：6
> 
> 时间：2012-06-10T17:42:42.140
> 
> 标签：javascript, object, instance, loops, for-in-loop

我想让一个对象的一些属性被隐藏，一些在迭代时可见。所以我尝试使用原型，但这不起作用：

```
​function Car(){}

Car.prototype.version = '1.0';

var car_instance = new Car();
car_instance.make = 'BMW';
car_instance.model = 'x5';

for(property in car_instance){
    document.body.innerHTML += property + '<br>';
} 
```

但这`version`也输出：

```
make
model
version 
```

我真的很喜欢隐藏一些函数/方法但可以轻松访问它的想法`car_instance.version`，事实上，如果我 console.log 该对象在**proto**下也有其他属性，这些属性不包含在 for in 循环中。

那么我应该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T17:45:58.427

要创建私有变量，您必须在函数内部声明它，因为 JS 具有函数范围：

```
function Car(){
  // private var
  var version = '1.0';
  // public var
  this.foo = 'something';
} 
```

迭代对象时，[`hasOwnProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty)仅用于获取实际对象属性：

```
for(property in car_instance){
   if (car_instance.hasOwnProperty(property)) {
     document.body.innerHTML += property + '<br>';
   }
} 
```

**更多信息：**

[http://javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T17:51:19.133

如果要从作为实例的直接属性的`for in`循环中*“*隐藏”属性，可以使用`Object.defineProperty`：

```
Object.defineProperty(car_instance, "version", {
  value: "1.0",
  writable: true,
  configurable: true,
  enumerable: false  // don't make it appear in a for in loop
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T17:48:25.923

```
for(property in car_instance){
    if (car_instance.hasOwnProperty(property)) {
        document.body.innerHTML += property + '<br>';
    }​
} 
```

它输出：

```
 make
 model 
```

或者：

```
var car = Object.create(null);
​car.make = 'BMW';
car.model = 'x5';

for(property in car) {
    document.body.innerHTML += property + '<br>';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T18:00:53.930

### 跳过命名属性：

```
function Car(){
   this.private = {};
}

var inst = new Car();
inst.private.version = '1.0';
inst.make  = 'BMW';
inst.model = 'x5';

for(prop in inst){
    if (prop==='private') continue;        // skip named property
    console.log(prop);
} 
```

使用不同的数据模型。优点是您可以跳过循环中的一个属性，并且因为该属性是一个对象，您可以在其中放入任意数量的键/值。

# python - 图像优化（使用 Python 的 Google App Engine）

> ID：10970864
> 
> 赞同：3
> 
> 时间：2012-06-10T17:43:06.953
> 
> 标签：python, google-app-engine, image-optimization

我还没有找到我正在寻找图像优化的类似问题。

我测试了 Facebook 可以优化多少上传的图片：

> 980KB --> 77KB
> 
> 846KB --> 62.1KB

根据我的发现，Facebook 能够将图像优化多达 10 倍，同时仍然保持一些最低图像质量，就像上面的测试一样。

那么，任何人都可以分享您为优化用户上传的图像而实施的最佳方法是什么？

当我在互联网上搜索时，我看到一些网站提供有偿图片优化服务。但是，我们不希望在现阶段订阅任何用于图像优化的付费服务。

我正在 Google App Engine 环境中使用 Python 语言开发项目。我们可以从 Python 库甚至 Google App Engine 库中重用的任何部分来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T22:14:21.723

可能您应该在[此](http://code.google.com/p/googleappengine/issues/detail?id=1023)问题上加注星标，以便将类似 pngcrush 的功能添加到 AppEngine 图像 API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T17:59:31.367

基本优化归结为：

1.  为图像选择适当的格式（通常是 jpeg 用于照片；如果您不关心图像质量，则可以全面使用 jpeg，否则将 png 用于屏幕截图等可能是明智的）

2.  将图像缩小到适合您应用的最小分辨率

3.  将压缩级别提高到可能的最高级别，同时保持您的质量标准

您还可以通过剥离无关的元数据来挑剔，但这通常是不必要且不可取的。

如果您想以自动化方式完成所有这些操作，则必须全面设置标准格式和压缩级别，并接受它并非在所有情况下都是完美的，或者能够确定哪些设置是以编程方式适用于图像（这非常困难，除非您在上传时直接询问用户）。

通常我会[通过 PythonMagick 绑定使用 ImageMagick 来完成](http://www.imagemagick.org/script/api.php)这项任务，但这在 Google Apps Engine 上可能不可行。在这种情况下，也许看看[Python Imaging Library](http://www.pythonware.com/products/pil/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-11T23:46:34.863

另一种解决方案是使用*3rd*方 api，在这种情况下，您可以使用 tinyPNG。那里的压缩算法可能是最好的算法之一。在此处查看开发人员指南 ~>

[https://tinypng.com/developers](https://tinypng.com/developers)

每月前 500 张照片是免费的，每张图片***0.009***美元（> 500 && < 9500）或***0.002 美元***> 10000 张图片。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T05:07:17.900

不幸的是，你不能使用 PythonMagick。但是可以安装[Python Imaging Library ，使用方法请参见](https://developers.google.com/appengine/docs/python/images/installingPIL)[Google Imaging Service](https://developers.google.com/appengine/docs/python/images/overview)。

没有神奇的 facebookesque 优化。您将不得不尝试开发符合您需要的标准的自己的。现在大多数图像都是 5mp，在网站中将它们调整到 1280x720 或更小是正常的。在调整大小之前也需要裁剪无关图像的能力。

# c# - SQL Connection open but not read here

> ID：10970867
> 
> 赞同：1
> 
> 时间：2012-06-10T17:43:49.473
> 
> 标签：c#, sql, c#-4.0, ado.net

connection object & some ado.net part getting some error while insert to the data,first of all here is my PHP coding part.Here i'm going to convert php codings to .net

```
openConn();
//<user> slett <slettID>
if((sizeof($MessageArray)==3) && (strtolower($MessageArray[1])=='slett'))
 {

$user_id=$MessageArray[2];
if ((int)$user_id > 0)
{
    $username=$MessageArray[0];
    $QueryCheckMak = "SELECT COUNT(*) FROM XYZ WHERE id='$user_id'";
    $QueryCheckMak = odbc_exec($conn, $QueryCheckMak) or die("Query error");
    $user_number = odbc_result($QueryCheckMak, 1);

    if($user_number=="0")
    {
        $message_out = "SOME ERROR OUT ";
    } 
```

Below coding is my try to convert it.I successfully convert.sizeof part & string to lower case part.below that here coding part is used ODBC connection but in my case i sue sql server connection

```
public partial class SeenSMS : System.Web.UI.UserControl
{

    public SqlConnection mycon;
    SqlConnection con = new SqlConnection(@"Data Source=DSOFT\DOMZ;Initial                 Catalog=Vilt;UserID=sa;Password=sa123");

    protected void Page_Load(object sender, EventArgs e)
    {
        string[] msg_arr = Request.QueryString["arr"].Split('|');

        if (!IsPostBack)
        {
            string Moose = Request.QueryString[1];
        }

        if (msg_arr != null)
        {
            if ((msg_arr.Length == 3) && (msg_arr[1].ToLower() == "slett"))

            {
                int user_id = Convert.ToInt32(msg_arr[2]); 

                if(user_id > 0)
                {
                    string username = msg_arr[0]; 

                    SqlDataReader rdr = null;
                    con.open();
                    SqlCommand cmd = new SqlCommand("SELECT COUNT(*) FROM XYZ WHERE id='$user_id",con);

                    if(user_number =='0')
                       {
                     Response.WriteLine("ERROR");

                     // else part here
                    }

                }
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:05:39.590

Use this type of syntax, the `using` block will automatically dispose of the objects at the end of the scope

```
public partial class SeenSMS : System.Web.UI.UserControl
{
    string connectionString = "Data Source=DSOFT\DOMZ;Initial Catalog=Vilt;UserID=sa;Password=sa123";
    protected void Page_Load(object sender, EventArgs e)
    {
        ....       
        using (SqlConnection con = new SqlConnection(connectionString))
        {
            con.Open();
            using (SqlCommand command = new SqlCommand("SELECT COUNT(*) FROM TableName WHERE id='" +user_id +"', con))
            using (SqlDataReader reader = command.ExecuteReader())
            {
                while (reader.Read())
                {
                    response.Write(reader.GetInt32(0), reader.GetString(1), reader.GetString(2));
                }
            }
        }
        ....
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T17:57:39.677

try this:

```
 SqlCommand cmd = new SqlCommand("SELECT COUNT(*) FROM XYZ WHERE user_id=@user_id,con));
 oCmd.Parameters.AddWithValue("@user_id", user_id);

 int user_number = 0;                 
 con.open();
   using (SqlDataReader oReader = cmd.ExecuteReader())
            {                   
                while (oReader.Read())
                {
                   user_number =Convert.ToInt32(oReader["count"]);                                                           
                }
                myConnection.Close();
            }                   

           if(user_number == 0)
                   {
                 Response.WriteLine("ERROR");

                 // else part here
                } 
```

# ruby-on-rails - After validation fails and a form redirects back to itself, why are instance variables empty?

> ID：10970868
> 
> 赞同：4
> 
> 时间：2012-06-10T17:43:50.520
> 
> 标签：ruby-on-rails

In a Rails 3.2 app, when a certain form fails to save (validation fails) and redirects back to the form I get an error:

```
undefined method `map' for nil:NilClass 
```

This form does not display any errors when navigating directly to the new or edit paths.

The error is coming from a select field with a custom `options_from_collection_for_select` method.

```
<%= f.select(:user_ids, options_from_collection_for_select_with_attributes(@users, :id, :name, 'data-attributes', :attributes ), {include_blank:true}, {multiple:true}) %> 
```

If I replace the instance variable `@users` with `User.all` then I don't get an error after redirect.

I guess `@users` is empty after the redirect, hence the error. But why? `@users` is defined in the new and edit controllers.

My controller is:

```
def create
  --bunch of stuff
  if @model.save
    --bunch of stuff
    respond_to do |format|
      format.html { render :text => model_url(@model) }
      format.html { redirect_to(@model, :notice => 'Success!.') }
      format.xml  { render :xml => @model, :status => :created, :location => @model }
    end

  else
    respond_to do |format|
      format.html { render :action => "new" }
      format.xml  { render :xml => @model.errors, :status => :unprocessable_entity }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-10T18:04:03.143

这是因为如果失败，您实际上并没有执行“新”操作。这是一个典型的控制器结构

```
class PotsController < ApplicationController

  def new
    @pot = Pot.new
    @users = User.all
  end

  def create
    @pot = Pot.new(params[:pot])
    if @pot.create
      redirect_to @pot, notice: "Created"
    else
      #****you are here****
      render :new
    end
  end
end 
```

在上面，如果`pot.create`失败，它只会渲染新模板。你应该做的是在这种情况下获取你的实例变量

```
 def create
    @pot = Pot.new(params[:pot])
    if @pot.create
      redirect_to @pot, notice: "Created"
    else
      @users = User.all #this is the important line
      render :new
    end
  end 
```

# ruby-on-rails - Displaying website when not logged in, and displaying app when logged in

> ID：10970869
> 
> 赞同：0
> 
> 时间：2012-06-10T17:43:59.927
> 
> 标签：ruby-on-rails, redirect, web

I have a website and a Rails app.

When a user goes to the website, I want to check if they are logged in or not. If they are, I want to send them to the Rails application. If they are not logged in I want to send them to the website.

pivotaltracker.com has this type of behavior.

What's the best way to go about this? I figure the Rails app needs to do the log in check so it seems the user should always be sent there first and redirect to the website if not logged in?

But it seems like more often than not the result will be to display the website, so it seems like this adds an extra step, and slows things down for the majority of users. But I'm not sure how else to do it.

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:00:30.510

如果您使用的是设计，您可以：

```
Dashboard::Application.routes.draw do

  devise_for :users    
  authenticated :user do
    resources :stuffs
    root to: "home#dashboard"
  end

  root to: "home#website"
end 
```

如果登录，这将向用户显示仪表板，如果未登录，则显示“网站”。然后，您可以显示该网站，或重定向到该网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:49:36.980

在网站的 web 服务器层检查应用会话 cookie，如果有则将其发送到应用程序，如果没有则继续访问网站。

当然，该应用程序将执行实际检查以查找登录用户并重定向到网站，如果任何闻起来很有趣。

是的，它更复杂。

或者，在测量之前停止尝试优化事物。“似乎”意味着您没有检查数字以了解更频繁发生的情况。（这比预期的更讽刺。我想提醒你“过早的优化”，而不是试图对你大喊大叫。）

# ios - Which case should cause memory leaks?

> ID：10970872
> 
> 赞同：0
> 
> 时间：2012-06-10T17:44:22.383
> 
> 标签：ios

the code is just simple:

```
@interface Test : NSObject
@property (nonatomic, strong) NSString * str;  //strong
//@property (nonatomic, weak) NSString * str;  //weak
-(void)func;
@end

@implementation Test
@synthesize str = _str;
-(void)func{
   _str = @"test string";       // using ivar
   //self.str = @"test string"; // using setter
}
@end 
```

there are `four` situations in the code above, strong/weak, ivar/setter

which types will cause memory leaks ?

which types are the same ?

I have test the code with NSLog but all run well (no nil printed) , why ? maybe about `autorelease` ?

--------------edit---------------

i read the document and find that "string constant would be never deallocated"

so the code act different when string initializes with initWithString or initWithFormat (and the code i wrote is wrong )

the weak property always be nil when using initWithFormat

for memory management ivar and setter are the same: [Is self.iVar necessary for strong properties with ARC?](https://stackoverflow.com/questions/7986954/is-self-ivar-necessary-for-strong-properties-with-arc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:32:48.797

我也总是对此感到困惑，但是我认为基本上 weak 意味着当类设置为 nil 时它会消失，而 strong 不会让类消失，直到 var 也被删除，因为它具有 +1 保留计数开始。

您不能真正问哪个会导致泄漏，因为正确使用也不会导致泄漏，并且两者都不能正确使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:56:09.880

如果您使用 ARC，系统会处理内存并且不会报告为泄漏。这是一篇很好的文章，可以检查 ARC 以及强引用和弱引用之间的区别。

[http://www.quora.com/Objective-C-programming-language/In-Objective-C-whats-the-difference-between-a-strong-and-weak-pointer](http://www.quora.com/Objective-C-programming-language/In-Objective-C-whats-the-difference-between-a-strong-and-weak-pointer)

# android - Android widget dimensions?

> ID：10970876
> 
> 赞同：4
> 
> 时间：2012-06-10T17:44:39.070
> 
> 标签：android, android-widget, android-activity, dimension

I have a widget that it's width is "180dp".I want to display an activity when user clicks on a button on widget,and activity's width must be equal to widget's width.It seems to be simple but I could not solve it.Indeed I guess that at least one of these three ways help me,but they do not:
**1-** Setting activity's dimension in manifest exactly "180dp",but I could not find any property like "android:width" for Activity tag in manifest.
**2-** Getting widget dimensions in it's **AppWidgetProvider**, onReceive() method by **intent.getSourceBounds().getWidth()** and use it in Activity's onAttachedToWindow():
In AppWidgetProvider:

```
@Override
public void onReceive(Context context, Intent intent) {

            ...
            int mWidgetHeight = intent.getSourceBounds().height();
            int mWidgetWidth = intent.getSourceBounds().width();
            ...
            App.setmWidgetHeight(mWidgetHeight);
            App.setmWidgetWidth(mWidgetWidth);
            ...

    } 
```

In Activity:

```
@Override
public void onAttachedToWindow() {

        View view = getWindow().getDecorView();
        WindowManager.LayoutParams lp = (LayoutParams) view.getLayoutParams();
        lp.gravity = Gravity.LEFT | Gravity.TOP;

        super.onAttachedToWindow();
        ...

        lp.width = App.getmWidgetWidth();
        lp.height = App.getmWidgetHeight();
        ...
        getWindowManager().updateViewLayout(view, lp);
    } 
```

In this case,when I test my App on emulator,activity's width is in about half of the widget's width.
**3-** Changing "180 dp" to pixel:

```
@Override
public void onAttachedToWindow() {

    View view = getWindow().getDecorView();
    WindowManager.LayoutParams lp = (LayoutParams) view.getLayoutParams();
    lp.gravity = Gravity.LEFT | Gravity.TOP;
    ...
    super.onAttachedToWindow();
    ...
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    float xDpi = metrics.xdpi;
    float yDpi = metrics.ydpi;
    ...
    lp.width = (int) (180 * (xDpi / 160)) ;
    lp.height = (int) (120 * (yDpi / 160));
    ...
    getWindowManager().updateViewLayout(view, lp);
} 
```

In this case, in emulator result seems fine,but in device (GalaxyTab 2.3.3), Activity's width is in about (2/3) of widget's width.
In summary,this is my question:
***If I have my widget's dimensions in dp,how I can set Activity's dimensions exactly equal to it?***

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-04T16:29:04.647

尝试

```
DisplayMetrics metrics = getApplication().getApplicationContext().getResources().getDisplayMetrics();
metrics.widthPixels
metrics.heightPixels 
```

只是出于好奇-为什么需要设置活动的确切大小？使用 android:layout_width="fill_parent" 和 android:layout_height="fill_parent" 的布局会占用小部件中的所有可用空间，无论大小。

# c++ - c++ global namespace compile problems

> ID：10970877
> 
> 赞同：1
> 
> 时间：2012-06-10T17:44:41.493
> 
> 标签：c++, global-namespace

I'm using a specific toolchain (the one that comes with the BlackBerry Playbook NDK). I think it's based on GCC 4.4.2\. When I try compiling certain libraries with this toolchain, I run into strange issues with what I think is c++ global namespace stuff. For example, I'll get errors like:

```
'::sprintf' has not been declared 
```

I never get these errors when linking against the GNU c++ standard library. However, the Playbook NDK uses the Dinkumware C++ libs by default and I always have to go through each error and usually add in the C equivalent (stdio.h in this case). For reasons beyond my control, I can't link to the GNU c++ standard library, which doesn't exhibit any of these problems.

If I'm trying to compile a bigger project, I can get hundreds of these errors. Is there a workaround that doesn't involve editing the source? In the above example, the file would usually include "cstdio" as a header, but that declares sprintf under the 'std' namespace. So the only options I have are to include the C header or add the std namespace.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:59:15.650

实际上，C++ 标准要求标准库中声明的所有符号（包括`<c....>`头文件中的 C 库）都可以在`std::`命名空间中访问。它并不禁止它们*出现*在全局命名空间中，并且出于向后兼容性的原因，C++ 标准库的一些实现（例如 libstdc++）选择让它们出现在全局命名空间中。

你有几种可能性：

*   您可以继续直接包含 C 标头（如`<stdio.h>`），但通常不鼓励这样做，因为它们可能不了解 C++ 并且可能会产生冲突 (1)
*   您可以为每个呼叫添加前缀，尽管这可能不切实际
*   您可以挑选您使用的符号：`using std::printf;`在文件顶部或在每个函数中
*   您可以直言不讳地提出`using namespace std;`指令。但是你会拉很多东西......

我个人的建议是为调用添加前缀或挑选最常用的函数并将它们导入全局或当前命名空间。

就迁移而言，一种直接的可能性是实际“包装”标准标头：

```
// cstdio.hpp

#include <cstdio>

#if defined(_DIRKUMWARE_) // note: you'll have to research the symbol to check
namespace yournamespace {
    using std::printf;
    using std::vptrinf;
} // namespace yournamespace
#endif // defined(_DIRKUMWARE_) 
```

然后有一个脚本将代码库中所有出现的`<stdio.h>`和替换为（显然在这个文件中除外）。这样，您可以针对标准库的每个实现调整此文件，而不是在每个包含这些函数的文件中重复工作。`<cstdio>``<cstdio.hpp>`

*注 (1)：C 标准没有规定功能是由函数还是由宏提供。通常，`min`并且`max`可能是宏。C++ 标准要求函数，这就是为什么使用 C++ 头文件通常更安全的原因。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T17:52:35.077

基本上你被困在一个角落里。

根据 C++ 标准：

> 包括在命名空间和*可能*在全局命名空间`cstdio`中导入符号名称。`std`

 *和

> 包括在全局命名空间和*可能*在 std 命名空间`stdio.h`中导入符号名称。

 *因此，如果在特定实现中包括`cstdio`不导入全局命名空间中的符号，那么您唯一的选择是使用`std`命名空间的完全限定名称。
这是因为 C++ 标准很好地定义了这种行为，只是不太为人所知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:57:46.827

如果源包含一些常见的头文件，您可以只修改那些包含您需要的内容。

GCC 有一个名为的命令行选项`-include`，允许您在编译其余部分之前强制源文件包含文件。您可以修改您的 Makefile 或项目构建脚本的等效文件来为您做包含。

```
// c_includes.h
#include <stdio.h>
#include <stdlib.h>
//...

g++ -include c_includes.h ... 
```**

# python - Instance variables in Python not as I assumed

> ID：10970878
> 
> 赞同：2
> 
> 时间：2012-06-10T17:44:42.173
> 
> 标签：python, arrays, append, instance, instantiation

I have an issue in Python I couldn't believe to find out. See the following code:

```
class Container(object):
    array = []

    def __init__(self):
        print self.array

for i in range(0, 5):
    container = Container()
    container.array.append('Test')
print 'Last Container:', container.array 
```

The output is:

```
[]
['Test']
['Test', 'Test']
['Test', 'Test', 'Test']
['Test', 'Test', 'Test', 'Test']
Last Container: ['Test', 'Test', 'Test', 'Test', 'Test'] 
```

I thought the `Container` class is initialized with the values at the top on instantiation. Why is this not the case?

Thank you!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T17:51:45.687

中的代码在`class:`创建类时执行，而不是在创建类的实例时执行。这是一个更清楚地表明这一点的示例：

```
>>> class Test(object):
...     print "Test"
...     def __init__(self):
...         print "init"
...
Test
>>> t = Test()
init 
```

请注意，“Test”是在创建类时打印的，而不是在我创建 Test 对象时打印的。

正如其他答案所指出的那样，如果您希望属性对于类的特定实例（而不是类的所有实例）是本地的，则必须将代码放在`__init__`方法中：

```
def __init__(self):
    self.array = [] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T17:48:06.057

您直接放置在类定义中的任何属性都是类属性，因此`Container.array`在所有实例之间共享`Container`。

如果您想要一个实例属性，请在以下`self.array = []`范围内设置`__init__()`：

```
 def __init__(self):
        self.array = []
        print self.array 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T17:46:45.027

You should be instantiating the list in __init__ like so:

```
class Container(object):

    def __init__(self):
        self.array = []
        print self.array 
```

Class variables defined at the top level of the class are created at runtime, so if they're mutable -- like a list or a dictionary -- you're going to have this problem when you change them. Attributes set in init are created when the class is instantiated, meaning you get a new list for each object.

# excel - 如何找到每天的最小值/最大值？

> ID：10970880
> 
> 赞同：1
> 
> 时间：2012-06-10T17:44:53.780
> 
> 标签：excel, date, max, min

我有一个日期和时间行列表，每天有多行。对于每个唯一日期，我想获取最小和最大时间值。

如何在 Excel v10（又名 2002）中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:00:48.340

首先，您可以使用 Excel 函数 MIN(range) 和 MAX(range) 来执行此操作，但随后您必须构造一个卷积函数来确定具有给定日期的行的范围。

其次，您可以构建一个数据透视表......使用行的日期列，并具有最小时间和最大时间的值，从时间列中选择并格式化为时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T19:08:21.573

您可以通过添加小计来过滤数据。首先添加具有最小值（值）的小计，然后再次添加最大值（值）而不删除先前的小计。然后隐藏 3-d 级别的行以仅显示每个日期的最小值和最大值。

`=MAX(IF(CellWithTheDate=Date_Range,Value_Range,""))`如果您有唯一日期列表，则可以使用作为**数组公式**输入的公式获取任何特定日期的最小值/最大值

 **唯一日期列表可以通过日期列上的扩展自动过滤器（有一个唯一值复选框）就地或通过制作副本来生成。**

# c# - Recommendations - C#/.NET Link Scraping / Web Crawler Framework

> ID：10970882
> 
> 赞同：0
> 
> 时间：2012-06-10T17:45:05.483
> 
> 标签：c#, multithreading, web-crawler

I'm looking for an implementation of a web crawler or link scraper in C# that I can modify to suit our needs. We need something we can run on-demand to spider a list of our websites to keep an eye out for certain links. The spider doesn't need to store copies of the sites, download images or anything of the sort -- it just needs to report back any pages that link to certain sites that match a small list of substrings.

I've seen crawler implementations like arachnode.net (and a myriad of other examples) but they all contain a massive amount of code revolving around saving the content. We don't need to do that. We just need to parse out every page linked in and report back any that contain a link that meets certain criteria (it will be a simple substring match).

Can anyone recommend a framework or example that might help me get started? It seems like there are a number of ways to do it (especially with .NET 4 and the HTML Agility Pack) but since we'll need to run it on a regular schedule, a high-performing threaded or parallel processing implementation is important.

[edit]

I may have been unclear -- this will have to run on the desktop, not as part of an ASP.Net website. The company-owned sites span many domains, servers and geographic locations so it can't be a server-side solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:20:53.167

SEO 命名空间可以在这里提供帮助吗？您正在寻找的 WebCrawler 类是什么：

[http://msdn.microsoft.com/en-us/library/microsoft.web.management.seo.crawler.webcrawler(v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/microsoft.web.management.seo.crawler.webcrawler(v=VS.90).aspx)

# java - Comparing/matching Strings in java

> ID：10970889
> 
> 赞同：2
> 
> 时间：2012-06-10T17:45:58.320
> 
> 标签：java, string

I'm dealing with a large database which have two columns. The first column `id` is a `long` while second column `name` is a `String`. `name` is the name of a person with corresponding id. So, I wish to compare the `name` of row with `name` of other rows.

```
John Carter
john Carter
Carter
jo car
Willam Carter
C William
Carter j. 
```

All these `name`s in rows should provide matches. If possible it would be great to have the percentage/ratio of match. Is there any java library/snippet that can do this? I'm open to all suggestions.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:02:09.273

这个库对你来说可能很有趣：http: [//sourceforge.net/projects/simmetrics/](http://sourceforge.net/projects/simmetrics/)

它为字符串提供了不同的相似性度量。

从他们的 SourceForge 页面：

> SimMetrics 是一个相似度度量库，例如从编辑距离（Levenshtein、Gotoh、Jaro 等）到其他度量（例如 Soundex、Chapman）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T17:57:18.363

看起来您会对用于计算字符串距离的[Levenshtein 算法感兴趣。](http://en.wikipedia.org/wiki/Levenshtein_distance)[您可以在此处](http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Levenshtein_distance#Java)找到 Java 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:44:13.167

[查看William W. Cohen](http://www.cs.cmu.edu/~wcohen/)等人的论文[“名称匹配任务的字符串距离度量的比较”](http://secondstring.sourceforge.net/doc/iiweb03.pdf)。该论文比较了几个字符串距离度量。

他们还在[SecondString 项目](http://secondstring.sourceforge.net/)中实现了其中的大部分。它是一个“基于 Java 的开源近似字符串匹配技术包”，因此您可以轻松比较不同的指标以评估哪些指标符合您的要求。

如果您只需要匹配名称 - **Jaro-Winkler**是一个不错的选择，它也在[SecondString](http://secondstring.sourceforge.net/)包中实现。

如果您的所有姓名都在数据库中，则将相似性度量实现为存储过程可能是有意义的，以避免获取所有数据以使用 java.util.Date 进行比较。所以你可以使用这样的查询：

```
SELECT t1.name, t2.name, sim(t1.name, t2.name) FROM table t1, table t2 WHERE sim(t1.name, t2.name) > 0.8 
```

# sql-server-2008-r2 - Transpose rows to columns

> ID：10970894
> 
> 赞同：-2
> 
> 时间：2012-06-10T17:46:36.057
> 
> 标签：sql-server-2008-r2, transpose

What is the best way to transpose rows to columns.

Table_1

```
Cust_id  field1  field2 ...
-------  ------  ------ 
```

Table_2

```
Cust_id  status  date_changed
-------  ------  ------------ 
```

View/table output

```
Cust_id  status1      status2        status3      status4
-------  -----------  -------------  -----------  -----------
1        01-jan-2011  05-April-2011  06-Dec-2012  30-Dec-2012 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:58:23.930

假设您知道只有四个可能的状态值，并且您想要任何 cust_id/status 组合的最新日期：

```
DECLARE @table_2 TABLE(Cust_id INT, status INT, date_changed DATE);

INSERT @table_2 VALUES
(1,1,SYSDATETIME()),
(2,1,SYSDATETIME()),
(3,1,DATEADD(DAY, 1, SYSDATETIME())),
(3,1,SYSDATETIME()),
(1,2,SYSDATETIME());

SELECT cust_id, 
    status1 = [1], status2 = [2], 
    status3 = [3], status4 = [4]
FROM 
(
  SELECT cust_id, status, date_changed
  FROM @table_2
) AS t
PIVOT (MAX(date_changed) 
FOR [status] IN ([1],[2],[3],[4])) AS p
ORDER BY cust_id; 
```

结果：

```
cust_id status1    status2    status3 status4
------- ---------- ---------- ------- -------
1       2012-06-10 2012-06-10 NULL    NULL
2       2012-06-10 NULL       NULL    NULL
3       2012-06-11 NULL       NULL    NULL 
```

这是执行此操作的标准方法。根据您的目标和/或您是否事先知道潜在状态值的数量或只想显示那些存在的状态值的列，可能会有更好的方法。如果其中任何一种情况适用，请更新问题。

# ios - SBJson 与 Facebook sdk iOS 冲突

> ID：10970895
> 
> 赞同：1
> 
> 时间：2012-06-10T17:46:37.093
> 
> 标签：ios, facebook, json, sdk, duplicates

我正在使用 SBJson 框架开发应用程序。现在我想将 Facebook SDK 添加到我的应用程序中，但出现重复类错误。

可能 Facebook 使用其他版本的 SBJson 源.. 但文件名相同！

我尝试使用重构工具更改类名称.. 但它似乎并没有解决我的问题。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:51:02.893

Facebook 已经包含了 json 框架。使用已经包含的内容来处理您的 json。无需添加另一个单独的版本。这就是您收到重复错误的原因。

# android - The project shows error while the components don't?

> ID：10970898
> 
> 赞同：1
> 
> 时间：2012-06-10T17:46:48.257
> 
> 标签：android, eclipse, debugging

The contents are not showing any error!! I don't understand what the problem is?![enter image description here](../Images/4f6d628de620373fae12ba9badd6a6d3.png)

Edit: I have already tried cleaning the projects, without success!
It's showing "failed to load properties file!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T17:49:39.813

您可以使用，

```
Window --> Show View --> Problems 
```

和/或

```
Window --> Show View --> Error Log 
```

清理项目并重新启动 Eclipse 也可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:49:54.320

您应该在 Eclipse 中检查这些情况下的“问题”视图。窗口 -> 显示视图 -> 如果当前对您不可见，则会出现问题。可能是java编译器版本错误或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T17:52:36.107

尝试清理您的项目。有时这对我来说很好。

*   项目 -> 清理

使用错误日志

*   窗口 -> 显示视图 -> 错误日志

# vba - Using 0x39FE001E in AdvancedSearch?

> ID：10970901
> 
> 赞同：2
> 
> 时间：2012-06-10T17:46:55.540
> 
> 标签：vba, outlook, vsto

I'm trying the search for emails based on SMTP address. I've found that I need to use `http://schemas.microsoft.com/mapi/proptag/0x39FE001E` but if I try to create a view using the following DASL filter, nothing is displayed:

> "http://schemas.microsoft.com/mapi/proptag/0x39FE001E" = 'name@domain.com'

What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T16:13:03.003

没有消息直接在其上设置该属性。您是否尝试根据发件人 SMTP 地址进行过滤？PidTagSenderSmtpAddress 可能存在也可能不存在（DASL 名称`http://schemas.microsoft.com/mapi/proptag/0x5D01001F`）。

检查您是否可以在[OutlookSpy](http://www.dimastr.com/outspy)中看到该属性（单击 IMessage 按钮）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T15:53:22.793

我相信你必须这样做：

```
"http://schemas.microsoft.com/mapi/proptag/0x39FE001E" CI_STARTSWITH 'name@domain.com' 
```

# ruby-on-rails - 使用 ActiveRecord 创建子选择字符串（Rails 教程第 2 版，清单 11.45）

> ID：10970903
> 
> 赞同：0
> 
> 时间：2012-06-10T17:47:10.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, railstutorial.org, subquery

在The Rails Tutorial 2nd edition 的第 11 章的[清单 11.45](http://ruby.railstutorial.org/chapters/following-users#code%3afrom_users_followed_by_final)`from_users_followed_by`中，类的类方法`Micropost`定义如下：

```
class Micropost < ActiveRecord::Base
...
  def self.from_users_followed_by(user)
    followed_user_ids = "SELECT followed_id FROM relationships
                         WHERE follower_id = :user_id"
    where("user_id IN (#{followed_user_ids}) OR user_id = :user_id", 
          user_id: user.id)
  end
end 
```

在本章的[脚注 13](http://ruby.railstutorial.org/chapters/following-users#fn:11.13)中，有一个指向[此博客文章](http://pivotallabs.com/users/jsusser/blog/articles/567-hacking-a-subselect-in-activerecord)的链接，其中说如果要创建子选择字符串，可以将 ActiveRecord 内部方法`construct_finder_sql`与该方法一起使用。`send`因此，我尝试将`followed_user_ids`字符串替换为：

```
followed_user_ids = Relationship.send(:construct_finder_sql,
                                      select: "followed_id",
                                      conditions: { follower_id: :user_id }) 
```

唯一的问题是它在 Rails 3 中`construct_finder_sql`被[贬值](http://apidock.com/rails/ActiveRecord/Base/construct_finder_sql/class)了，所以我不知道我写的内容是否正确，无论如何我都不能使用它。`:user_id`那么，是否有一种 Rails 3 方法可以在这种情况下使用 ActiveRecord（最好仍然使用参数）创建子选择字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:20:49.530

您可以将您的 seb-select 构建为单独的查询，然后用于`to_sql`获取 SQL：

```
def self.from_users_followed_by(user)
  followed = Relationship.select(:followed_id)
                         .where(:follower_id => user.id)
                         .to_sql
  where("user_id in (#{followed}) or user_id = :user_id", :user_id => user.id)
end 
```

诸如`M.select(...).where(...)`仅构建`ActiveRecord::Relation`实例和逐个构建查询之类的事情，在您要求某些结果（以某种方式或其他方式）之前，不会将任何内容发送到数据库。因此，您可以使用 AREL 的东西来构建查询，然后`to_sql`获取 SQL 版本。

# android - Android: drawing bitmaps with sub-pixel coordinates

> ID：10970904
> 
> 赞同：2
> 
> 时间：2012-06-10T17:47:29.173
> 
> 标签：android, bitmap

I've just noticed that despite `Canvas.drawBitmap()` taking float coordinates (some variants, at least), it performs no sub-pixel anti-aliasing when blitting. That is, the bitmap is always drawn at exact integer coordinates (in my code I use no scaling, canvas matrix is identity, done `paint.setFilterBitmap(true)`).

Can someone confirm this observation? If this is not supported, are there any known plans to include the anti-aliasing blitting feature?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-26T11:21:27.497

根据 Romain Guy 在[类似的 Google 小组问题](https://groups.google.com/forum/m/#!topic/android-platform/X5jsiiQbc_Q)中的说法：

> 如果当前变换只是一个平移，位图（和其他图元）总是以像素对齐的方式绘制。任何其他变换都将执行亚像素定位。

所以一个简单的解决方案是

```
Canvas.scale(1.00001f, 1.00001f); 
```

# git - 在 GitHub 上显示 pdf 差异

> ID：10970910
> 
> 赞同：5
> 
> 时间：2012-06-10T17:48:21.707
> 
> 标签：git, pdf, github

有没有办法显示两个版本的pdf（或doc，odf）文件之间的差异（关于提交信息）？现在我只能下载任何版本（“查看原始”按钮）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T18:03:50.883

PDF、DOC 和 ODF 文件是二进制格式，不包含纯文本。Git 并不真正支持二进制文件的人类可读差异 - 它可以生成**二进制差异**，但如果没有额外的处理就没有多大意义。

有关处理二进制差异的更多信息，请参阅此答案：[https ://stackoverflow.com/a/4705537/247763](https://stackoverflow.com/a/4705537/247763)

据我所知，GitHub 唯一可以显示差异的二进制格式是图像。图像差异是 GitHub 的自定义部分，用于比较存储库中的两个不同图像版本，但这**不是**Git 的原生功能。

如果您需要查看二进制文件的两个版本之间的差异，请查看标准编辑器已有的功能。最新版本的 Microsoft Word 可以显示两个 DOCX 文件之间的差异，但这只能在您的机器上执行，而不是在 GitHub 上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T17:58:48.843

您仍然需要将这两个 PDF 文件下载到您的计算机上。即使您为 chrome/firefox 编写了扩展程序来查看浏览器中的差异，您仍然必须下载文件。

至于做实际的差异，您可以尝试[DiffPDF](http://www.qtrac.eu/diffpdf.html)或 WinMerge 的[xdocdiff](http://freemind.s57.xrea.com/xdocdiffPlugin/en/index.html)插件。

如果您想在 GitHub 网站上查看差异，请向 GitHub 提出添加该功能的建议。避免同时下载这两个 PDF 的唯一方法是让 GitHub 服务器生成差异。

# xml - “AsmXml”的“模式”错误

> ID：10970911
> 
> 赞同：0
> 
> 时间：2012-06-10T17:48:22.017
> 
> 标签：xml, assembly, xml-parsing

根据asmxml，我有一个问题。我尝试将架构写入 xml 文件。架构如下所示：

```
<schema>
        <document name="XRF">
                <collection name="IL">
                        <attribute name="k"/>
                        <collection name="I">
                                <attribute name="k"/>
                                <collection name="M">
                                        <attribute name="k"/>
                                        <attribute name="v"/>
                                </collection>
                                <collection name="P">
                                        <attribute name="k"/>
                                        <attribute name="v"/>
                                        <attribute name="t"/>
                                        <attribute name="d"/>
                                </collection>
                        </collection>
                </collection>
        </document>
</schema> 
```

这里是 XML 文件的片段：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!--<!DOCTYPE XRF SYSTEM "/apid/xml/xrf.dtd">-->
<XRF r="8.5.2" c="iD2" g="" u="DE23580-apiinlife03" k="918887283" d="20120523" t="235602">
<IL k="1">              
<I k="1007667,361,402"> 
<M k="3" v="GB0008762899"/>     
<M k="187" v="BG Group" l="4"/> 
<P k="33,3,2" v="13.065" t="181502" d="20120522" y="524" n="0" b="779"/>
<P k="2,1,1" v="12.56" t="080025" d="20120523" z="74876" y="272" n="459" b="908"/>
<P k="41,1,1" s="5"/>           
<P k="9,3,2" v="12.73" t="163519" d="20120522" z="8322" y="158" n="0" b="779"/>                  
</I>
</IL>
</XRF> 
```

有人可以帮我修复“模式”吗？我不知道我做错了什么。先感谢您。

问候 z。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:34:01.517

老问题，但也许它可以帮助一些新用户登陆这里。在使用 AsmXML 定义模式时，您不能像这样直接覆盖集合。

`<document>`您宁愿通过在该部分之外定义集合，将引用链接到要使用的集合的适当定义。例如，在您的情况下，正确的架构是：

```
<schema>
    <collection name="M">
        <attribute name="k"/>
        <attribute name="v"/>
    </collection>

    <collection name="P">
        <attribute name="k"/>
        <attribute name="v"/>
        <attribute name="t"/>
        <attribute name="d"/>
    </collection>

    <collection name="I">
        <attribute name="k"/>
        <reference name="M"/>
        <reference name="P"/>
    </collection>

    <document name="XRF">
            <collection name="IL">
                    <attribute name="k"/>
                    <reference name="I" />
            </collection>
    </document>
</schema> 
```

此外，请确保包含集合中所需的所有属性，您也可以使用组来执行此操作。更多可以在那里找到： http: [//tibleiz.net/asm-xml/documentation.html](http://tibleiz.net/asm-xml/documentation.html)

希望这可以帮助 ！

# scala - Scala：向/与 Actors 发送/处理类型化消息

> ID：10970915
> 
> 赞同：2
> 
> 时间：2012-06-10T17:48:53.527
> 
> 标签：scala

我正在尝试创建一个具有选项管道的 Scala Actor。我希望能够向这个actor发送选项消息，然后它会继续调用选项管道并对结果做一些事情。如果这样的东西已经存在，你知道我在哪里可以找到它吗？

请在下面找到我的代码以及我遇到的奇怪编译错误：

“SBT 构建器在编译您的项目时崩溃。这是 Scala 编译器或 SBT 中的错误。请查看错误日志了解详细信息。错误消息为：null”

MonadChainActor.scala

```
import scala.actors.Actor

class MonadChainActor[T](monadChain: Option[T]=>Option[T]) extends Actor {

  case class OptionMessage(o:Option[T])

  def act() {
    while(true){
      receive {
        case OptionMessage(o) => println(monadChain(o).get)
      }
    }
  }

} 
```

Main.scala

```
def monadIntChain(a:Option[Int]):Option[Int] = 
  a.map(x => x+1).map(x => x+1).map(x => x+1)

object Main {
  def main(args: Array[String]): Unit = {
    var a = new MonadChainActor(monadIntChain)
    a ! a.OptionMessage(Some(1))  
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:44:28.923

看起来您在 scala 编译器中发现了一个错误。我注意到，如果您不使用 path-dependent type `OptionMessage`，它可以工作（我还添加了一条`Stop`消息）：

```
import scala.actors.Actor

class MonadChainActor[T](monadChain: Option[T]=>Option[T]) extends Actor {
  case object Stop
  def act() {
    while (true) {
      receive {
        case o: Option[T] => println(monadChain(o).get)
        case Stop => exit()
      }
    }
  }
}

object Main {
  def monadIntChain(a:Option[Int]):Option[Int] = 
    a.map(x => x+1).map(x => x+1).map(x => x+1)
  def main(args: Array[String]): Unit = {
    var a = new MonadChainActor(monadIntChain)
    a.start
    a ! Some(3)  
    a ! a.Stop
  }
} 
```

或者你可以在演员之外声明它（我`Stop`在外面声明只是为了保持一致）：

```
import scala.actors.Actor

case class OptionMessage[T](o:Option[T])
case object Stop

class MonadChainActor[T](monadChain: Option[T]=>Option[T]) extends Actor {
  def act() {
    while (true) {
      receive {
        case om : OptionMessage[T] => println(monadChain(om.o).get)
        case Stop => exit()
      }
    }
  }
}

object Main {
  def monadIntChain(a:Option[Int]):Option[Int] = 
    a.map(x => x+1).map(x => x+1).map(x => x+1)
  def main(args: Array[String]): Unit = {
    var a = new MonadChainActor(monadIntChain)
    a.start
    a ! OptionMessage(Some(3))  
    a ! Stop
  }
} 
```

# android - PostgreSQL JDBC 连接在 Android 4.0 上失败

> ID：10970918
> 
> 赞同：4
> 
> 时间：2012-06-10T17:49:37.727
> 
> 标签：android, postgresql, jdbc, android-4.0-ice-cream-sandwich

有谁知道我可以做些什么来使 JDBC 连接在 Android 4.0 上工作。它在 Android 1.6-2.3 上运行良好。我使用 Dave Cramer 的构建： [http ://groups.google.com/group/pgandroid/browse_thread/thread/d8b400f039f66d5f/f77b2e2a99370a36?lnk=raot#f77b2e2a99370a36](http://groups.google.com/group/pgandroid/browse_thread/thread/d8b400f039f66d5f/f77b2e2a99370a36?lnk=raot#f77b2e2a99370a36)

Logcat 说：

```
06-10 17:35:51.043: E/AndroidRuntime(798): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.belonogov.connectjdbc/com.belonogov.connectjdbc.ConnectJDBCActivity}: java.lang.NullPointerException
06-10 17:35:51.043: E/AndroidRuntime(798):  
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at android.os.Handler.dispatchMessage(Handler.java:99)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at android.os.Looper.loop(Looper.java:137)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at android.app.ActivityThread.main(ActivityThread.java:4424)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at java.lang.reflect.Method.invokeNative(Native Method)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at java.lang.reflect.Method.invoke(Method.java:511)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at dalvik.system.NativeStart.main(Native Method)
06-10 17:35:51.043: E/AndroidRuntime(798): Caused by: java.lang.NullPointerException
06-10 17:35:51.043: E/AndroidRuntime(798):  
at com.belonogov.connectjdbc.ConnectJDBCActivity$CustomDrawableView.<init>(ConnectJDBCActivity.java:81)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at com.belonogov.connectjdbc.ConnectJDBCActivity.onCreate(ConnectJDBCActivity.java:27)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at android.app.Activity.performCreate(Activity.java:4465)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-10 17:35:51.043: E/AndroidRuntime(798):  
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-10 17:35:51.043: E/AndroidRuntime(798):  
... 11 more 
```

它只是一个连接到数据库的简单应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:23:05.250

如果可能，请考虑在您的 android 设备上摆脱直接 JDBC。它在往返等方面效率低下，并且在面对不可靠的连接时也不可靠。

请参阅[如何在 android 中安全（间接）查询 postgresql 数据库？](https://stackoverflow.com/questions/10881538/how-can-i-securely-indirectly-query-a-postgresql-database-within-android/10890705#10890705).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T20:41:35.627

您很可能会在这里找到答案：

```
06-10 17:35:51.043: E/AndroidRuntime(798): Caused by: java.lang.NullPointerException
06-10 17:35:51.043: E/AndroidRuntime(798):      at com.belonogov.connectjdbc.ConnectJDBCActivity$CustomDrawableView.<init>(ConnectJDBCActivity.java:81)
06-10 17:35:51.043: E/AndroidRuntime(798):      at com.belonogov.connectjdbc.ConnectJDBCActivity.onCreate(ConnectJDBCActivity.java:27) 
```

这意味着：查找类`ConnectJDBCActivity.java`，第 81 行并查看引用可能是什么`null`。

# drupal-7 - 如何在 Drupal7 View 相册中显示所有图像？

> ID：10970923
> 
> 赞同：1
> 
> 时间：2012-06-10T17:50:07.167
> 
> 标签：drupal-7, photo-gallery

我已经定义了一个自定义内容类型，我在其中添加了一个每行包含无限图像的图像字段。我想在一个相册中显示表中包含的所有图像，但我尝试的相册引擎（Galleria，Gallery formatter）为每条记录显示一个画廊，而不是我需要的。

是否有允许在单个图库中显示所有图像的模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:16:21.303

在不了解您要查找的内容的更多详细信息的情况下，我只能提出显而易见的建议：使用[视图](http://drupal.org/project/views)相应地显示所有图像和主题。

如果您正在寻找特定功能，请在您的问题中说明。（即，您希望画廊看起来像什么/做什么目前仅通过 Views 模块 + 主题无法实现？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:39:58.327

我不懂诶。如果您希望所有图像都附加到内容上，您可以尝试使用[Photowall](http://drupal.org/project/photowall)模块。请看一看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T05:01:09.877

我不知道你到底在搜索什么.. 但以下会有所帮助///

[http://drupal.org/project/galleryformatter](http://drupal.org/project/galleryformatter)

[http://www.lullabot.com/articles/photo-galleries-views-attach](http://www.lullabot.com/articles/photo-galleries-views-attach)

[http://drupal.org/node/758724](http://drupal.org/node/758724)

或者在 drupal 模块中搜索。你肯定会找到一些东西。

# date - JPA 标准：通过截断日期使用 order-by 子句

> ID：10970925
> 
> 赞同：4
> 
> 时间：2012-06-10T17:50:36.247
> 
> 标签：date, jpa, sql-order-by, criteria-api

如何在 JPA 标准 API 中创建“ **order by** ”子句，通过避免日期的时间部分对日期字段进行排序。

相当于 :- 的东西 `SELECT EMP_NAME,DOJ FROM EMPLOYEE ORDER BY trunc(DOJ)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:49:54.260

您可以使用[CriteriaBuilder#function](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#function%28java.lang.String,%20java.lang.Class,%20javax.persistence.criteria.Expression...%29)进行日期提取。但要小心，这种方法依赖于 RDBMS 的特定功能：这**不是**可移植的。

查看我们与 postgresql 一起使用的示例

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Employee> cq = cb.createQuery(Employee.class);
Root<Employee> employee = cq.from(Employee.class);
String postgresTimeUnit = "day";
Expression<Calendar> dateTruncExpr = cb.function("date_trunc", Calendar.class, cb.literal(postgresTimeUnit), employee.get(Employee_.date)).as(Calendar.class);

cq.select(
    employee
).where(
    // where stuff
).orderBy(
    cb.asc(dateTruncExpr)
); 
```

此示例使用 postgresql 函数**date_trunc**及其特定的 dsl 来描述日期字段（此处的“天”表示我们要提取日期字段的日期）

生成的sql查询如下：

```
select employee0_.id as col_0_0_, employee0_.name as col_0_1_, employee0_.date as col_0_2_ from employee employee0_ order by date_trunc(?, employee0_.date) asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:21:46.827

JPA 2.0 规范没有定义任何日期提取函数。因此，您需要使用本机 SQL 或特定于您的 JPA 提供程序的语法。

如果您使用的是 EclipseLink 2.4，您可以使用 EXTRACT，

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Functions](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Functions)

在以前的 EclipseLink 版本中，您可以使用 FUNC 在 JPQL 中调用特定于数据库的函数。

JPA 2.1 草案为此定义了一个 FUNCTION 运算符。

# java - ANTLR 基本行为

> ID：10970927
> 
> 赞同：1
> 
> 时间：2012-06-10T17:50:43.033
> 
> 标签：java, antlr

我使用以下 Java 代码来实例化使用 ANTLR 生成的解析器。

```
package foo;    
public class Test1 {
public static void main(String[] args) throws RecognitionException {
       CharStream stream = new ANTLRStringStream("foo ");
       BugLexer lexer = new BugLexer(stream);
       CommonTokenStream tokenStream = new CommonTokenStream(lexer);
       BugParser parser = new BugParser(tokenStream);
       parser.specification();
    }
} 
```

我的语法：

```
grammar Bug;
options {
  language = Java;
}
@header {
  package foo;
}
@lexer::header {
  package foo;
}
specification : 
   'foo' EOF 
;  
WS 
   : (' ' | '\t' | '\n' | '\r')+ {$channel = HIDDEN;} 
;
SCOLON
   : (~ ';')+
; 
```

我得到的错误是：
line 1:0 mismatched input 'foo' Expecting 'foo'
我希望输入中的空格被忽略，但它不是.. Eclipse 中的 antlr 解释器说它很好，所以我想我的 Java 代码不知何故是错误的，但我只是没有看到它......注意：如果我删除了SCOLON的规则，那么输入就没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:13:56.863

ANTLR 的词法分析器尝试尽可能多地匹配每个标记。因此`"foo "`被标记为单个标记`SCOLON`，而*不是*`'foo'`- 和`WS`标记。

请注意，您的`SCOLON`规则：

```
SCOLON
 : (~ ';')+
 ; 
```

顾名思义，它只匹配一个分号，但实际上匹配一个或多个除分号以外的字符。也许它应该是这样的：

```
SCOLON
 : ';'
 ; 
```

?

## 编辑

> ***海因里希·奥迪写道：***
> 
> 我不知何故认为令牌ANTLR尝试匹配输入有一个优先级（按声明顺序给出）。感谢您的答复。

这是正确的：只要两个（或更多）规则匹配相同数量的字符，首先定义的规则将“获胜”。但是，如果最后定义的规则匹配最多的字符，则它“获胜”。

# python - 以下节点链接

> ID：10970928
> 
> 赞同：1
> 
> 时间：2012-06-10T17:50:43.830
> 
> 标签：python, nodes

我很难弄清楚如何解决这个问题......我不是在要求一个明确的答案，只是对采取什么方法进行提醒。到目前为止，我遇到的每一个问题都遇到了问题。

我有一组节点：

```
nodes = { ('A','B'),
          ('B','C'),
          ('C','D'),
          ('C','E'),
          ('B','E'),
          ('C','F')} 
```

作为集合字典：

```
nodedict = { 'A': {'B'},
             'C': {'B', 'E', 'D', 'F'},
             'B': {'A', 'C', 'E'},
             'E': {'C', 'B'},
             'D': {'C'},
             'F': {'C'} } 
```

我想要做的是建立一个这样的结构：

为一个'

```
 A
                               |
                               B
                      _________|_________
                      |                  |
                      C                  E
                 _____|_____             |
                 |    |     |            C
                 D    E     F        ____|____
                                     |        |
                                     D        F 
```

因此可以找到从 A 出发的所有可能路线。

我一直在使用一个列表来表示分支，然后尝试将 for 循环包装在一个 while 循环中……如果孩子不在列表中，则将每个列表及其子项附加……但我一直卡住了。我有时会很接近，但这是我写明确的 for 循环并确切知道我在寻找什么的时候。

最好先尝试获得一个提示，然后回溯，然后再获得下一个提示...

```
for x in xs:
   ...
   for a in x:
      ...
      for b in a 
```

但显然我不知道节点'n'有多深......嗯......任何有用的建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:06:04.047

我没有使用 python 的经验，但是你说过你不想要一个明确的答案。

你有一棵树。这是目前覆盖得最好的结构之一，有很多方法可以表示和遍历它。

至少您需要知道树的根节点并能够检索任何给定节点的子节点。如果您跟踪自己在做什么，则可以从这两条信息中遍历整个树。

查看[Tree traversal](http://en.wikipedia.org/wiki/Tree_traversal)。

[这里](https://stackoverflow.com/questions/2358045/how-can-i-implement-a-tree-in-python-are-there-any-built-in-data-structures-in)还有一个关于在 python 中实现树的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:56:34.823

您是否考虑过采用[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)？

# cryptography - 从智能卡 T 和 V 缓冲区获取 Simple-TLV

> ID：10970930
> 
> 赞同：0
> 
> 时间：2012-06-10T17:50:56.700
> 
> 标签：cryptography

我正在从一个 java 智能卡中读取一个 PKCS 证书对象，它在两个单独的缓冲区中返回证书数据。一个用于标签和长度，另一个用于值。（即一个 T-BUffer 和一个 V-Buffer）。（ASN.1 编码）

具有 TL 值的缓冲区看起来像..

06 00 15 01 72 27 00 00 80 00 FE 02 06 00 15 01 69 3F 06 00 15 01 68 FF 01 01 06 00 15 01 67 DD 06 00 15 01 DC 0B 06 00 4 0 2 4 01 0 6 2 FF C8 25 00 FF 20 02 DC 05 00 00 90 00 FE 05 07 00 15 01 72 27 07 00 15 01 69 39 07 00 15 01 68 FF 01 01 08 00 15 01 72 27 08 1 00 15 01A 01 00 15 01A 68 FF 01 01 07 00 15 01 67 ED 07 00 15 01 DC 0B 07 00 15 01 66 FF 60 04 08 00 15 01 67 ED 08 00 15 01 DC 0B 08 00 15 01 66 FF

值缓冲区长 5277 字节，看起来像....

00 01 01 33 39 42 43 37 39 39 33 42 2D 42 36 32 32 33 2D 34 33 33 33 33 33 38 2D 42 39 39 39 35 31 2D 42 42 42 42 42 43 33 34 34 35 35 35 35 37 37 37 37 31 44 60 60 60 64 60 64 02 32 45 80 CC B6 FF DF 9E 6C EE DF B8 F8 E0 71 D7 CC 73 35 AE 01 AE B2 76 35 2C 8C 20 25 40 C0 06 63 28 02 49 16 10 83 83 81 EC 33 0B A2 00 DF 07 9F F5 B5 E7 D1 F3 1F 98 41 F2 9A 39 B3 6E 7C 34 4F CB E1 C1 E7 F4 69 17 63 5E CD B8 6C 10 14 8D 6A 4B 32 B0 90 27 22 44 97 A E3 1B 63 75 D5 F2 22 E7 07 22 B3 7F 01 FD 1E 3B BB 66 85 0B 48 68 DF CC 66 11 86 E9 D7 77 1A 31 2E 7D AB BF 89 4C 18 AF 74 B5 B5 5F 9D 313 4D F8 8C 84 12 10 37 E0 9E C5 E6 82 69 B2...

我正在尝试将 TL 和 Vs 组合回单个缓冲区，但无法以有效 ASN.1 的方式完成此操作，而且我似乎总是在到达终点之前用完标签的值。最后，第一个标签表示零长度的对象标识符，这似乎也没有多大意义。

任何帮助将不胜感激。我读过很多规格。并找到答案

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:25:40.813

我也不了解这些 T 和 V 缓冲区如何工作的所有内容，但我可以在您的 T 缓冲区中找到标签，这应该对您有所帮助。

你写道：*“最后，第一个标签表示一个零长度的对象标识符，这似乎也没有多大意义。”*

你说的对！第一个标签**不是**长度为 0x00 的 0x06。

*   在您的 T 缓冲区中，第一个标签是 0x72，长度为 0x27 - 我认为它是根据 NIST IR 6887 的 MSCUID

*   第二个标签是 0x69

*   第三个标签是 0x68（可能是公钥，可能是字节反转）

*   第四个标签是 0x67

*   第 5 个标签是 0xDC（可能是 PKI AID）

*   第 6 个标签是 0x66

*   ETC...

认识模式？在 T 缓冲区中，每个标签前面都有 0_ 00 15 01。在我看到的特定卡片上，标签之前是 00 00 14 01。

不幸的是，我不知道这 4 个字节是什么意思，我也不明白 T 缓冲区中标签长度之后的值是什么，如果你需要的话。

希望这是有价值的信息，可以帮助您入门。干杯，

阿梅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:51:03.687

您写道：*“数据应该包含三个证书，我确实注意到了 06 00 15 01 以及 07 00 15 01 和 08 00 15 01 的模式。”*

有趣的观察。每个证书很可能都被标记为**0x66**。

另外，我在您的**V 缓冲区**中注意到您的第二个对象以**78 9C**开头：这是***Zlib**压缩文件的标头。您可能会在 V 缓冲区的其他地方找到此标头（例如，也用于证书），您需要先解压缩。在您获得有效的 ASN.1 之前，有很多乐趣在等着您 :-)

祝你好运！

阿梅

*http://en.wikipedia.org/wiki/Zlib
*http://zlib.net/

# sql - 显示带有条件 DGV VB.NET 的 SQL 结果

> ID：10970934
> 
> 赞同：0
> 
> 时间：2012-06-10T17:51:20.600
> 
> 标签：sql, vb.net, winforms, datagridview, filter

我的问题在于将值显示到 DGV 控件的单元格中，例如：

MySQL 表：

```
ID - Name      - Price    - Type
1    Mouse Pad   2.85$    -  a
2    Keyboard    10.50$   -  a
3    Hard Disk   80.00$   -  c
4    Web Cam     15.02$   -  b
5    Printer     45.62$   -  c
6    DVD Writer  20.00$   -  b 
```

我的 DataGridView 控件：

```
ID - Name       - PriceA    - PriceB    - PriceC 
```

我想显示结果过滤这些条件[VB.NET sintax]：

```
If SQLcolumn(Type) = a Then, show the price into PriceA into the DGV.
If SQLcolumn(Type) = b Then, show the price into PriceB into the DGV.
If SQLcolumn(Type) = c Then, show the price into PriceC into the DGV. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:04:35.267

一种方法是创建一个包含 5 列的自定义列表：ID、Name、PriceA、PriceB、PriceC，例如，在从数据库获取数据并将数据填充到数据表中之后，您可以逐行处理数据表并检查类型您的 datatablerow 的列是 Type 'a' 然后将该行添加到列表中并将价格添加到列表的 PriceA 列中，在处理整个数据表并将其所有行添加到列表之后，您可以将列表设置为 Datagridview 数据源！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T18:15:08.920

您可以使用 SQL Pivot 运算符来完成：

```
SELECT  ID ,
        Name ,
        [a] AS [TypeA] ,
        [b] AS [TypeB] ,
        [c] AS [TypeC]
FROM    tbl PIVOT ( SUM(Price) FOR TYPE IN ( a, b, c ) ) AS pvt 
```

# java - 从向量java中删除一个条目

> ID：10970936
> 
> 赞同：2
> 
> 时间：2012-06-10T17:51:37.817
> 
> 标签：java, vector

我有一个要从中删除对象的向量。该方法如下所述（以及确保将其删除的检查）。它调用定义向量存储位置的 getVector 方法和返回向量内的对象的 findItem。我知道 getVector 和 findItem 可以正常工作，因为我能够将对象添加到向量并查看向量中的对象。

```
public Message removeMember (Message m)

    //list is the vector location
    //item is the object in the vector i am looking to remove
{
    list = getVector(m);
    item = findItem(list, m);

    if (item != null) // if item exists in the vector (code enters this statement)
    {
        System.out.println("removing " + item.name + " from file");
        list.remove(item);  // remove the item from the vector
        // search for item to insure it is removed
        item = findItem(list, m);
        if (item == null) // if item has been removed
        {
            System.out.println(m.name + " removed from file.");
            m.response = m.name + " removed from file.";
        }
        else  //if the item has not been removed
        {
            System.out.println("Error removing member from file.");
            m.response = "Error removing member from file.";
        }
    }
    else  // item does not exist in vector at all
    {
        m.response = m.name + " was previously removed or never existed.";
    }
    return m;
} 
```

我遇到的问题是，即使我进行检查以确保删除该项目，并且程序进入该检查并且 System.out.println(m.name + " removed from file.") 在控制台上进行验证该条目已被删除，我仍然可以搜索它（通过程序），当我打开矢量位置，浏览文本文件时，我可以看到信息仍在文件中。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:00:04.830

除非我遗漏了一些东西，否则你永远不会真正从文件中删除任何东西。我假设您正在将 Vector 的元素写入代码中其他位置的文件。从 Vector 本身中删除元素不会将其从文件中删除；您必须重写该文件。

如果您将 Vector 保存为序列化对象并尝试在记事本中查看它，则在删除所需元素后仍需要使用新 Vector 对象重写文件。

# android - 在android中重新加载活动

> ID：10970946
> 
> 赞同：2
> 
> 时间：2012-06-10T17:52:43.650
> 
> 标签：android, android-activity, reload, back

我正在制作一个 android 应用程序，我希望该活动在另一个活动上按下后退按钮后自行重新加载。我有一套活动。所以我得到了主要的，还有很多其他的。假设主要的是activity-1，其他的是activity-2,3,4,5,6,7。一旦用户按下一个将他带到活动 2、3 或 4 的按钮，他将再次看到一些按钮，其中一个按钮会将他带到活动 3、4 或 5。所以当用户在从主活动启动的一个活动中，然后按下后退按钮，应该重新加载主活动，这怎么可能？请帮助并提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-31T08:46:18.903

例如，在启动 Activity 时调用完成当前 Activity。

```
 Intent intent = new Intent(getActivity(), AudioRecordingActivity.class);
    startActivity(intent);
    getActivity().finish(); 
```

然后 onbackPressed 调用新的Activity For eg:。

```
@Override
public void onBackPressed() {
    Intent intent = new Intent(getApplicationContext(), IndexPageActivity.class);
    startActivity(intent);
    super.onBackPressed();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:44:54.750

使用 `finish();`它会在您的案例活动 1 中发送回上一个活动，而无需重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T18:00:39.717

尝试：

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
                Intent intent = new Intent(this,name of the class where you want to go to);

                startActivity(intent);

                return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

此代码捕获后退按钮单击事件并将您带到所需的活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T17:55:37.517

覆盖`onBackPressed()`您的 Activity (activity-2, 3, 4 ...) 的方法并编写代码以在其中调用 Main Activity。

例如：

```
@Override
public void onBackPressed() {

    Intent mainIntent = new Intent(context, YourMainActivity.class);
    context.startActivity(mainIntent);

    return;
} 
```

当您从任何活动中按下返回按钮时，这将重新加载您的主要活动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T17:57:41.750

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(null);
} 
```

也许你应该在主要活动中试试这个

# c# - windows 8 地铁导航问题

> ID：10970948
> 
> 赞同：3
> 
> 时间：2012-06-10T17:52:58.727
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

如何在 Windows 8 Metro 风格 xaml C# 应用程序中从用户控件导航到页面。

**更新：实际上这个用户控件在另一个用户控件中。下面的代码在用户控件中使用时可以正常工作，但在嵌套用户控件中它不起作用。**

这是我当前不起作用的代码。

```
 var cntnt = Window.Current.Content;
        var frame = cntnt as Frame;

        if (frame != null)
        { 
            frame.Navigate(typeof(MyPage1), null);
        }
        Window.Current.Activate(); 
```

它不会导航到 MyPage1 ，但也不例外。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T21:13:39.663

您不应将 null 作为参数传递。试着打电话

```
frame.Navigate(typeof(MyPage1)); 
```

# user-interface - 我在哪里可以找到用于创建虚拟主机的 GUI？

> ID：10970949
> 
> 赞同：0
> 
> 时间：2012-06-10T17:53:03.297
> 
> 标签：user-interface, vhosts

创建 Vhosts 非常公式化，所以我想知道是否有任何 GUI 可以简化该过程。

我已经阅读了有关 Webmin 的信息，所以这似乎可行。是否有任何 IDE 对此有帮助，或者为 Mac 或 Windows 内置了管理控制面板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:49:39.687

在 OS X 上，我知道至少 2 个通过 GUI 创建 Apache2 vhost 条目的选项：

[VirtualHostX](http://clickontyler.com/virtualhostx/)和[MAMP Pro](http://www.mamp.info/en/mamp-pro/index.html)

两者都是付费应用程序，主要区别在于 MAMP Pro 使用它自己的、自包含的 Apache2/MySQL/PHP 环境，并且不涉及 OS X 的本机 AMP 配置。另一方面，VirtualHostX 可以与 OS X 的内置 Apache2 或其他服务器配置一起使用，例如 MAMP（MAMP Pro 使用的自包含 AMP 堆栈，但免费且没有 GUI）或 XAMPP。

我不知道其他操作系统的解决方案是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-11T02:09:50.620

在 Windows 上，您可以尝试[HOSTSignalz](http://hostsignalz.com)。它与 VirtualHostX 非常相似。它适用于 XAMPP 或 WAMP，甚至只是一个本地 Apache 安装。

# php - 为什么我的 mod-rewrite 不能在我的分页上工作

> ID：10970951
> 
> 赞同：0
> 
> 时间：2012-06-10T17:53:15.507
> 
> 标签：php, mod-rewrite

> **可能重复：**
> [查询字符串和 Mod 重写](https://stackoverflow.com/questions/487726/query-strings-mod-rewrite)

我已经编写了一个 .htaccess 文件，它可以正确地将以下行转换为

```
http://localhost/questions/32/new-question-from-peter 
```

进入

```
http://localhost/questions.php?question_id=32. 
```

我使用的代码是

```
RewriteRule ^questions/([0-9]+)/[^/]*(?:\?(.+)=(.*))?$ public/questions.php?question_id=$1&$2=$3 [NC,L] 
```

但是，当网址如下时，

```
http://localhost/questions/32/new-question-from-peter?page= <int> 
```

即使我的网址是，它也不会正确处理页面信息

```
http://localhost/questions.php?question_id=32&page=2 
```

它完美地工作。

有人可以帮我解决这个问题吗，我的代码哪里出错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:58:16.457

调试 mod_rewrite 的一个很好的通用方法是设置一个日志文件并检查重写期间发生的情况：

```
<IfModule mod_rewrite.c>
RewriteLog "/var/log/rewrite.log"
RewriteLogLevel 3
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T17:59:49.687

您应该使用`QSA`(Query String Append) 标志，如下所示：

```
RewriteRule ^questions/([0-9]+)/[^/]*/?$ public/questions.php?question_id=$1 [NC,L,QSA] 
```

在这种情况下，查询字符串 ( `&page=2`) 会自动处理，因此您不需要在正则表达式中处理它，它会附加到重写 URL 的末尾。

# powershell - 使用 powershell 更改权限不会传播给孩子

> ID：10970957
> 
> 赞同：8
> 
> 时间：2012-06-10T17:54:09.873
> 
> 标签：powershell, directory-permissions

当我使用 powershell 和 set-acl 设置新的文件系统访问规则时，我设置了继承标志以传播到子对象和叶对象

```
$acl.AddAccessRule((New-Object System.Security.AccessControl.FileSystemAccessRule(
    "username","FullControl", "ContainerInherit, ObjectInherit", "None", "Allow")))
Set-Acl -path $filename -aclObject $acl 
```

当我查看资源管理器中的权限时......在安全选项卡中......高级......传播设置正确。但如果我看看孩子们自己，他们并没有展示新的安全规则。

如果在资源管理器中，我添加另一个具有不同 SID 的规则.. 并保存它（不强制选择“替换所有子对象权限...”）。然后手册和 powershell 规则都会出现在孩子身上。好像需要某种启动来让孩子们接受新的传播规则。为了使子对象显示添加的新规则，我缺少什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T12:19:58.933

我也有同样的逻辑问题...

```
$acl.AddAccessRule((New-Object System.Security.AccessControl.FileSystemAccessRule(
"username","FullControl", "ContainerInherit, ObjectInherit", "None", "Allow"))) 
```

使用最后一个“无”，您是在说：不要传播...更改为：

```
$acl.AddAccessRule((New-Object System.Security.AccessControl.FileSystemAccessRule(
"username","FullControl", "ContainerInherit, ObjectInherit", "InheritOnly", "Allow"))) 
```

它会传播您的设置。在此处查看访问规则选项：http: [//msdn.microsoft.com/en-us/library/ms147785.aspx](http://msdn.microsoft.com/en-us/library/ms147785.aspx)

这些是传播标志：http: [//msdn.microsoft.com/en-us/library/system.security.accesscontrol.propagationflags.aspx](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.propagationflags.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T01:28:17.107

这很奇怪。我有类似的代码以相同的方式设置权限。我从来没有检查过孩子的权限是否被设置。这可能只是 Windows Explorer UI 中的一些奇怪之处。您是否使用 PowerShell 获取其中一个孩子的 ACL 以检查权限是否被应用？

作为参考，这是[我用来授予权限的代码](https://bitbucket.org/splatteredbits/carbon/src/tip/Carbon/Security.ps1)：

```
foreach( $permission in $Permissions )
{
    $right = ($permission -as "Security.AccessControl.FileSystemRights")
    if( -not $right )
    {
        throw "Invalid FileSystemRights: $permission.  Must be one of $([Enum]::GetNames("Security.AccessControl.FileSystemRights"))."
    }
    $rights = $rights -bor $right
}

Write-Host "Granting $Identity $Permissions on $Path."
# We don't use Get-Acl because it returns the whole security descriptor, which includes owner information.
# When passed to Set-Acl, this causes intermittent errors.  So, we just grab the ACL portion of the security descriptor.
# See http://www.bilalaslam.com/2010/12/14/powershell-workaround-for-the-security-identifier-is-not-allowed-to-be-the-owner-of-this-object-with-set-acl/
$currentAcl = (Get-Item $Path).GetAccessControl("Access")

$inheritanceFlags = [Security.AccessControl.InheritanceFlags]::None
if( Test-Path $Path -PathType Container )
{
    $inheritanceFlags = ([Security.AccessControl.InheritanceFlags]::ContainerInherit -bor `
                         [Security.AccessControl.InheritanceFlags]::ObjectInherit)
}
$propagationFlags = [Security.AccessControl.PropagationFlags]::None
$accessRule = New-Object "Security.AccessControl.FileSystemAccessRule" $identity,$rights,$inheritanceFlags,$propagationFlags,"Allow"    
$currentAcl.SetAccessRule( $accessRule )
Set-Acl $Path $currentAcl 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-07T18:50:18.693

我一直在搜索互联网和几个 StackOverflow 问题，试图解决这个问题。我可能没有最好的解决方案，但我认为它满足了这个问题。根据我的研究，Powershell`Set-Acl`只是没有正确处理继承。下面代码的关键是两件事：`System.Security.AccessControl.DirectorySecurity`对象和使用设置 ACL 的替代方法`$dir.SetAccessControl()` 目标文件夹（文件夹和文件）的子级将成功继承附加到目标文件夹的权限。

调用示例：

```
$newACL=@()
$newACL+=New-Object System.Security.AccessControl.FileSystemAccessRule -ArgumentList @("MyLocalGroup1","ReadAndExecute,Synchronize","ContainerInherit,ObjectInherit","None","Allow")
$newACL+=New-Object System.Security.AccessControl.FileSystemAccessRule -ArgumentList @("MyLocalGroup2","FullControl","ContainerInherit,ObjectInherit","None","Allow")
Set-FolderPermissions -Path $Path -KeepDefault -ResetOwner -AccessRuleList $newACL 
```

功能：

```
function Set-FolderPermissions {
  # The whole point of this script is because Set-Acl bungles inheritance
  [CmdletBinding(SupportsShouldProcess=$false)]
  Param ([Parameter(Mandatory=$true, ValueFromPipeline=$false)] [ValidateNotNullOrEmpty()] [string]$Path,
         [Parameter(Mandatory=$false, ValueFromPipeline=$false)] [switch]$KeepExisting,
         [Parameter(Mandatory=$false, ValueFromPipeline=$false)] [switch]$KeepDefault,
         [Parameter(Mandatory=$false, ValueFromPipeline=$false)] [switch]$ResetOwner,
         [Parameter(Mandatory=$true, ValueFromPipeline=$false)] [System.Security.AccessControl.FileSystemAccessRule[]]$AccessRuleList)

  Process {
    $aryDefaultACL="NT AUTHORITY\SYSTEM","CREATOR OWNER","BUILTIN\Administrators"
    $tempACL=@()
    $owner=New-Object System.Security.Principal.NTAccount("BUILTIN","Administrators")
    $acl=Get-Acl -Path $Path

    # Save only needed individual rules.
    if ($KeepExisting.IsPresent) {
      if ($KeepDefault.IsPresent) {
        # Keep everything
        $acl.Access | ForEach-Object { $tempACL+=$_ }
      }
      else {
        # Remove the defaults, keep everything else
        for ($i=0; $i -lt $acl.Access.Count; $i++) { 
         if (!$aryDefaultACL.Contains($acl.Access[$i].IdentityReference.Value)) { $tempACL+=$acl.Access[$i] }
        }
      }
    }
    else {
      if ($KeepDefault.IsPresent) {
        # Keep only the default, drop everything else
        for ($i=0; $i -lt $acl.Access.Count; $i++) { 
         if ($aryDefaultACL.Contains($acl.Access[$i].IdentityReference.Value)) { $tempACL+=$acl.Access[$i] }
        }
      }
      #else { # Do nothing, because $TempACL is already empty. }
    }

    # Add the new rules
    # I could have been modifying $acl this whole time, but it turns out $tempACL=$acl doesn't work so well.
    # As the rules are removed from $acl, they are also removed from $tempACL
    for ($i=0; $i -lt $AccessRuleList.Count; $i++) { $tempACL+=$AccessRuleList[$i] }

    # This is the object that you're looking for...
    $aclDS=New-Object System.Security.AccessControl.DirectorySecurity -ArgumentList @($Path,[System.Security.AccessControl.AccessControlSections]::None)
    # The object, apparently, comes with a bonus rule...
    $aclDS.RemoveAccessRuleSpecific($aclDS.Access[0])
    # Add the rules to our new object
    for ($i=0; $i -lt $tempACL.Count; $i++) {
      # I tried adding the rules directly but they didn't work.  I have to re-create them.
      $tempRule=New-Object System.Security.AccessControl.FileSystemAccessRule -ArgumentList @($tempACL[$i].IdentityReference,$tempACL[$i].FileSystemRights,$tempACL[$i].InheritanceFlags,$tempACL[$i].PropagationFlags,$tempACL[$i].AccessControlType)
      $aclDS.AddAccessRule($tempRule)
    }
    # This has to be done after all the rules are added, otherwise it doesn't work
    $aclDS.SetAccessRuleProtection($true,$false)

    if ($ResetOwner.IsPresent) {
      # Often, the default owner is SYSTEM.  This ownership will prevent you from making any changes.
      # So, we change owner to the local Administrator
      $acl.SetOwner($owner)
      # We have to apply it now because we are applying our ACLs in two stages.  We won't be using Set-Acl again.
      Set-Acl -Path $Path -AclObject $acl
    }

    # Lastly, apply our ACls
    $dir=Get-Item -Path $Path
    $dir.SetAccessControl($aclDS)
  }
} 
```

# javascript - 从 Javascript 中的 rgb 字符串中获取颜色分量？

> ID：10970958
> 
> 赞同：40
> 
> 时间：2012-06-10T17:54:16.177
> 
> 标签：javascript, html, canvas, colors

我正在使用 Javascript 和 Canvas 制作一个绘画应用程序，并使用这种格式的字符串来指定所选颜色：

`"rgb(255,0,0)"`

因为画布上下文 fillStyle 属性接受该格式的字符串。

但是，我现在需要从这个字符串中获取单个组件，并且想知道是否有一种方法可以在不进行混乱的字符串操作的情况下做到这一点。可能有一些内置方法将该字符串转换为某种颜色对象，然后访问其 r、g 和 b 组件？

谢谢。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-10T18:10:03.053

**注意**- 我们都*同意正则表达式吃了我的大脑并踢了我的狗*的态度，但正则表达式版本似乎是更好的方法。我的意见。看看这个。

非正则表达式方法：

```
var rgb = 'rgb(200, 12, 53)';

rgb = rgb.substring(4, rgb.length-1)
         .replace(/ /g, '')
         .split(',');

console.log(rgb); 
```

[http://jsfiddle.net/userdude/Fg9Ba/](http://jsfiddle.net/userdude/Fg9Ba/)

输出：

```
["200", "12", "53"] 
```

或者......一个非常简单的正则表达式：

编辑：哎呀，`i`出于某种原因，在正则表达式中有一个。

```
var rgb = 'rgb(200, 12, 53)';

rgb = rgb.replace(/[^\d,]/g, '').split(',');

console.log(rgb); 
```

[http://jsfiddle.net/userdude/Fg9Ba/2](http://jsfiddle.net/userdude/Fg9Ba/2)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-12T19:09:21.213

更简单的方法..

```
 var rgb = 'rgb(200, 12, 53)'.match(/\d+/g);
    console.log(rgb); 
```

这里的输出为

```
 ["200", "12", "53"] 
```

“***简单总是美丽的***！” :)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-09T14:20:24.370

我的版本采用`HEX`,`RGB`或`RGBa`字符串作为参数，不使用正则表达式，并返回一个具有红色、绿色和蓝色（以及 alpha `RGBa`）数字值的对象。

```
var RGBvalues = (function() {

    var _hex2dec = function(v) {
        return parseInt(v, 16)
    };

    var _splitHEX = function(hex) {
        var c;
        if (hex.length === 4) {
            c = (hex.replace('#','')).split('');
            return {
                r: _hex2dec((c[0] + c[0])),
                g: _hex2dec((c[1] + c[1])),
                b: _hex2dec((c[2] + c[2]))
            };
        } else {
             return {
                r: _hex2dec(hex.slice(1,3)),
                g: _hex2dec(hex.slice(3,5)),
                b: _hex2dec(hex.slice(5))
            };
        }
    };

    var _splitRGB = function(rgb) {
        var c = (rgb.slice(rgb.indexOf('(')+1, rgb.indexOf(')'))).split(',');
        var flag = false, obj;
        c = c.map(function(n,i) {
            return (i !== 3) ? parseInt(n, 10) : flag = true, parseFloat(n);
        });
        obj = {
            r: c[0],
            g: c[1],
            b: c[2]
        };
        if (flag) obj.a = c[3];
        return obj;
    };

    var color = function(col) {
        var slc = col.slice(0,1);
        if (slc === '#') {
            return _splitHEX(col);
        } else if (slc.toLowerCase() === 'r') {
            return _splitRGB(col);
        } else {
            console.log('!Ooops! RGBvalues.color('+col+') : HEX, RGB, or RGBa strings only');
        }
    };

    return {
        color: color
    };
}());

console.debug(RGBvalues.color('rgb(52, 86, 120)'));
  //-> { r: 52, g: 86, b: 120 }
console.debug(RGBvalues.color('#345678'));
  //-> { r: 52, g: 86, b: 120 }
console.debug(RGBvalues.color('rgba(52, 86, 120, 0.67)'));
  //-> { r: 52, g: 86, b: 120, a: 0.67 }
console.debug(RGBvalues.color('#357'));
  //-> { r: 51, g: 85, b: 119 } 
```

可能对某人有用。:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-17T06:00:53.180

如何使用像[xolor 库这样的颜色库](https://github.com/fresheneesz/xolor)：

```
xolor("rgb(200,100,40)").r // returns the red part 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-14T11:14:50.173

如果您对 RGB(A) 作为数值感兴趣：

```
const [r,g,b,a] = "rgb(50,205,50)".match(/\d+/g).map(Number); 
```

注意如果字符串中只有 3 个数字，则 alpha (a) 是未定义的！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-10T18:29:56.120

即使您确定颜色将采用 rgb 格式，而不是 rgbA、十六进制、颜色名称或 hsl，您仍然可以使用 'rgb(25%,55%,100%)'。

```
function Rgb(rgb){
    if(!(this instanceof Rgb)) return new Rgb(rgb);
    var c= rgb.match(/\d+(\.\d+)?%?/g);
    if(c){
        c= c.map(function(itm){
            if(itm.indexOf('%')!= -1) itm= parseFloat(itm)*2.55;
            return parseInt(itm);
        });
    }
    this.r= c[0];
    this.g= c[1];
    this.b= c[2];
} 
```

**var c= Rgb('rgb(10%,25%,55%)'); 警报（[cr，cg，cb]）**

注意-如果您使用的是画布，则有地图。

除此以外-

```
Array.prototype.map=Array.prototype.map || function(fun, scope){
        var T= this, L= T.length, A= Array(L), i= 0;
        if(typeof fun== 'function'){
            while(i<L){
                if(i in T){
                    A[i]= fun.call(scope, T[i], i, T);
                }
                ++i;
            }
            return A;
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-27T16:26:44.390

对于使用颜色选择器的人，这个库还允许转换多种格式的颜色：[https ://tovic.github.io/color-picker/](https://tovic.github.io/color-picker/)

```
CP.RGB2HEX([255, 255, 255]) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-28T06:52:04.490

[Mozilla Fathom](https://github.com/mozilla/fathom/blob/master/fathom/utilsForFrontend.mjs#L515)中实现了一种（某种）简单的正则表达式解决方案，它也可以识别 alpha：

```
/**
 * Return the extracted [r, g, b, a] values from a string like "rgba(0, 5, 255, 0.8)",
 * and scale them to 0..1\. If no alpha is specified, return undefined for it.
 */
export function rgbaFromString(str) {
    const m = str.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/i);
    if (m) {
        return [m[1] / 255, m[2] / 255, m[3] / 255, m[4] === undefined ? undefined : parseFloat(m[4])];
    } else {
        throw new Error('Color ' + str + ' did not match pattern rgb[a](r, g, b[, a]).');
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-04T12:45:32.077

长但适用于 RGB 字符串 abd RGBA 字符串到数字数组。

```
function rgbStringToArray(rgbString){
        let arr=rgbString.replace(/ /g,'').slice(
            rgbString.indexOf("(") + 1,
            rgbString.indexOf(")")
        ).split(",");
        for(let i=0;i<arr.length;i++){
            if(arr.length-1===i && arr.length===4) 
                arr[i]=parseFloat(arr[i]); 
            else 
                arr[i]=parseInt(arr[i]);
        }
        return arr;
    } 
```

# java - JFrame 不会让我 drawString();

> ID：10970962
> 
> 赞同：1
> 
> 时间：2012-06-10T17:54:48.213
> 
> 标签：java, swing, graphics, jframe, drawstring

我需要帮助，因为我正在尝试用 Java 编写游戏。当我发现它不会向 JFrame 绘制字符串时，我停下了脚步。我已经尝试了几种方法来解决这个问题并进行了大量研究，但一无所获。这是代码：- 俄勒冈州（主类）：

```
package com.lojana.oregon.client;

import java.awt.*;

import javax.swing.*;

import com.lojana.oregon.src.Desktop;
import com.lojana.oregon.src.Keyboard;
import com.lojana.oregon.src.Mouse;
import com.lojana.oregon.src.Paint;

public class Oregon extends JFrame {
    private static final long serialVersionUID = 1L;

    // Currently unused but there will be a use for it in the future
    public Desktop desktop;

    public String TITLE = "Oregon";

    public Oregon() {
        /* Window code */
        setTitle(TITLE);
        setSize(640, 640);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        /* Extra code for Window */
        addKeyListener(new Keyboard());
        addMouseListener(new Mouse());
    }

    public void paint(Graphics g) {
        Paint.paint(g);
    }
} 
```

GuiButton（绘画课）：

```
package com.lojana.oregon.src;

import java.awt.*;

public class GuiButton {
    public GuiButton(Graphics g, String text, Font font, int coordX, int coordY,
            int textX, int textY, int width, int height) {
        Color border = Color.gray;
        Color fill = Color.white;
        Color textColor = Color.black;

        Stroke borderSize = new BasicStroke(8);

        g.setColor(border);
        ((Graphics2D) g).setStroke(borderSize);
        g.drawRect(coordX, coordY, width, height);
        g.setColor(fill);
        g.fillRect(coordX, coordY, width, height);
        g.setColor(textColor);
        g.setFont(font);
        g.drawString(text, textX, textY);
    }
} 
```

GuiMainMenu（使用 GuiButton 文件的文件）：

```
package com.lojana.oregon.src;

import java.awt.*;

public class GuiMainMenu {
    public static void paint(Graphics g) {
        new GuiButton(g, "Start Game", new Font("Arial", Font.BOLD, 20), 60, 80, 20, 20, 240, 40);
    }
} 
```

如果您知道如何解决它，请发表评论。非常感谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T19:53:51.380

Swing 程序应该覆盖`paintComponent(Graphics g)`而不是`paint(Graphics g)`直接覆盖`JFrame`. 详情见这篇文章：http: [//java.sun.com/products/jfc/tsc/articles/painting/](http://java.sun.com/products/jfc/tsc/articles/painting/)

In addition it would be better to override the `paintComponent` of a `JPanel` that is added to the (content pane of) `JFrame` instead of the `JFrame` itself, because you want to draw into this content pane. See this tutorial for details: [http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

# php - 拥有一个仅用于清理/转义用户输入的 PHP 类是否有意义？

> ID：10970966
> 
> 赞同：1
> 
> 时间：2012-06-10T17:55:34.733
> 
> 标签：php

我的应用程序将大量数据持久保存到 MySql 数据库中，我想知道是否应该使用单独的类来处理清理/转义，或者这是否是矫枉过正？此外，我正在使用 PDO 的准备好的语句，所以我不确定我应该结合绑定参数执行多少清理或转义数据。

我知道古老的 Perl 格言，“有不止一种方法可以做到这一点”，所以我不要求一个实际的解决方案。我只是想权衡调用另一个类来处理转义的好处，或者这个过程的简单性是否最好在本地处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:00:21.753

如果你需要这样做，那为什么不呢？将东西放入课程然后需要它时，并没有矫枉过正。它还允许您测试您的代码。
无论如何，除了使用裸 PHP 函数外，我没有看到其他方法。

顺便说一句，PDO 确实进行了转义。你们班只会*打扫*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T17:59:24.570

我不知道这是否有*正确*的答案，但我们确实出于您所说的原因使用了一个类。它为我们提供了执行标准清理的标准位置，但在我们的案例中，它还允许我们在数据进入数据库之前将业务规则应用于数据。公平地说，我们传递的不仅仅是数据本身，而是一种很好的中心方式，可以让我们对用户的一般输入进行一些控制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T18:01:05.183

是的，这取决于它是如何构建您的应用程序的，我通常有一个带有此类方法的 Util 类，但是如果您有一些（或很多）用于清理输入数据的方法，您可以为它创建一个子类。

就像*Grep P*说的那样，这不是正确或错误的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T18:01:48.903

每当您添加其他代码时，都会*有人*声称它的运行`X.XX`速度慢了微纳初级秒。权衡好处只能是主观的，所以我认为你需要自己做出决定。

使用类或实用程序文件中的某些全局函数集合来转义数据；唯一真正重要的是您使用的代码很容易理解，并且下一个看到它的开发人员不必费力地[想知道您到底在想什么。](http://i.imgur.com/ecTl7.png)

# core-data - 当排序的属性不相同时，NSFetchedResultsController 无法执行提取

> ID：10970968
> 
> 赞同：0
> 
> 时间：2012-06-10T17:55:50.363
> 
> 标签：core-data, ios5, nsfetchedresultscontroller

我有一个奇怪的问题，只有当所有s 都是相同的数字时`NSFetchedResultsController`才能处理（这使用 对实体进行排序。这有点像使用属性来保持播放列表顺序的播放列表。`performFetch``entity.number``NSFetchedResultsController``number``indexNumber`

```
- (IBAction)addSetPressed {
    int theNumber = [self.nameTextField.text intValue];
    WSet *set = [WSet wSetWithNumber:theNumber inManagedObjectContext:self.workout.managedObjectContext];
    [self.workout addExercisesObject:set];
} 
```

`self.nameTextField`在我`UITableView`的页眉中。我会在那里输入一个数字，`1`例如，然后按一个`UIButton`调用`addSetPressed`. 此代码旨在将实体添加到我的模型中，并`NSFetchedResultsController`检测模型中的更改并更新我的`UITableView`.

这就是问题所在：当我在 中输入`1`（或任何数字）时`self.nameTextField`，我可以按`UIButton`我想按多少次，并且代码运行良好。但是当我更改数字时，`self.nameTextField`我得到一个错误：

```
[__NSCFNumber localizedCaseInsensitiveCompare:]: unrecognized selector sent to instance 0xb665b80
CoreData: error: Serious application error.  Exception was caught during Core Data change processing.  This is usually a bug within an observer of NSManagedObjectContextObjectsDidChangeNotification. 
```

在过去的 12 个小时里，我一直在搞乱我的代码并研究这个问题，但我想不通。

如果您给我小费，或者可以向我指出一些可以提供帮助的文献，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T01:14:58.717

固定的！

这就是问题所在。当我设置我的`sortDescriptor`时，我需要选择适当的选择器来比较我排序的属性类型。

这是正确的，因为 number 被处理为`NSNumber`

```
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"number" ascending:YES selector:@selector(compare:)]]; 
```

我以前有选择器`NSString`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:44:26.090

看起来`NSNumber`不喜欢被发送方法`localizedCaseInsensitiveCompare:`。

我将尝试解决这个问题，看看是否可以`NSString`改为使用排序值。

如果您有更好的想法，请告诉我！

# html - 我可以在 Haxe NME HTML5 目标中屏蔽 Sprite 吗？

> ID：10970970
> 
> 赞同：1
> 
> 时间：2012-06-10T17:56:32.930
> 
> 标签：html, haxe

我有一个非常大的 PNG 文件，我想随着时间的推移制作动画。基本上是一个使用普通旧 HTML div 的“精灵表” `background-position-x`，`y`你可以很容易地做到这一点。在 Haxe NME 中，我想像下面这样。

```
var sprite1 = new Sprite();
addChild(sprite1);

var spriteSheet = new Bitmap(Assets.getBitmapData("assets/someasset.png");
sprite1.addChild(spriteSheet);

var spriteMask = new Sprite();
spriteMask.graphics.beginFill(0xff0000, 1);
spriteMask.drawRect(0,0,400, 330);
spriteMask.endFill();
addChild(spriteMask);

sprite1.mask = spriteMask; 
```

在 Flash 目标中，这似乎工作得很好，但在 HTML5 目标中，我得到的只是我的精灵顶部的一个红色方块。

关于如何让它发挥作用的任何想法。使用这样的东西创建动画真的很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T11:15:59.637

遗憾的是，Jeash（NME 的 HTML5）中既没有实现 mask 也没有实现 scrollRect。 [https://bugs.launchpad.net/jeash/+bug/1001797](https://bugs.launchpad.net/jeash/+bug/1001797)

# dynatree - 动态树最高等级

> ID：10970972
> 
> 赞同：1
> 
> 时间：2012-06-10T17:56:42.230
> 
> 标签：dynatree, jquery-dynatree

是否可以在 Dynatree 中定义最大节点级别？或者，如何定义树中节点的最大深度？

提前Tnx！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:15:10.293

没有办法在一开始就定义它。

您可以使用`node.getLevel()`来检查预定的最大水平。如果达到最大值，则不允许从该节点创建新的子节点。

# ruby-on-rails - mongoid，如何将结果与 map/reduce 合并

> ID：10970973
> 
> 赞同：4
> 
> 时间：2012-06-10T17:56:43.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我尝试使用 out reduce 但我不知道如何调用 output 。例子：

```
@results = Article.collection.map_reduce(map, reduce, :out => 'test')

@results.find()
 => <Mongo::Cursor:0x2c276c4 namespace='myapp_development.test' @selector={} @cursor_id=> 
```

当我尝试：

```
@results1 = Article.collection.map_reduce(map, reduce, :out =>{reduce: 'test'} 
```

预期结果是重复的@results。但是我运行 @results1.find().to_a 我看到它与 @results 相等

以及如何使用 mongoid 在 ruby​​rails 中按名称空间调用结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T21:49:23.573

TLTR：你不能有重复的结果。

当 map 函数发出一些东西，而 reduce 函数返回一些东西时，它是一对 [key, value]。当存储到集合中时，对于每个条目，输出都表示为 Mongoid 文档，如下所示：

```
{
  "_id" => "my key",
  "value" => "my value"
} 
```

我想明确一点：密钥存储为`_id`，因此它在集合中是**唯一的。**

查看[Map/Reduce 输出选项](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Outputoptions)以了解 MongoDb 在输出到现有集合时如何处理重复键：

*   **替换（默认）：**现有集合的内容被删除，输出进入它

*   **合并：**保留现有集合。当存在具有相同 Key（_id）的结果时，它会被新的 map/reduced 替换。

*   **reduce ：**保留现有集合。当存在具有相同 Key（_id）的结果时，MongoDB 会获取它，并获取新的 map/reduce 一个，并对它们两者运行 reduce 函数，并存储结果。

所以，你不能有重复的结果。

**编辑：**

我在这里回复“你能告诉我如何应用输出减少，以及如何调用收集结果”（因为响应很长）：

有很多方法。让我们举一个例子：

```
class Post
  include Mongoid::Document
  include Mongoid::Timestamps

  field :tags, :type => Array
end

Post.create(:tags => ["Dog", "Cat"])
Post.create(:tags => ["Dog", "Puppy"]) 
```

让我们映射/减少这个：

```
map = %Q{
  function() {
    this.tags.forEach(function(tag){
      emit(tag, { count: 1 });
    }); 
  }
}

reduce = %Q{
  function(key, values) {
    var result = { count: 0 };
    values.forEach(function(value) {
      result.count += value.count;
    });
    return result;
  }
}

Post.map_reduce(map, reduce).out(replace: "tags") 
```

好的，将结果放入名为“tags”的集合中并覆盖它。

我们可以创建一个模型来访问它：

```
class Tag
  include Mongoid::Document

  field :value, :type => Hash
end

dog = Tag.find("Dog")
dog._id # => "Dog"
dog.value["count"] # => 2 
```

为了好玩，假设您保留上次执行 map/reduce 的时间戳。您可以`reduce`逐步进行：

```
Post.where(:created_at.gt => Time.at(my_timestamp)).map_reduce(map, reduce).out(reduce: "tags") 
```

** 编辑：固定地图功能 **

# eclipse - 从 Eclipse 运行的 Maven 目标

> ID：10970974
> 
> 赞同：13
> 
> 时间：2012-06-10T17:56:45.277
> 
> 标签：eclipse, maven, m2eclipse

当我从命令行运行`mvn compile`时，它使用`pom.xml`. 但是当我尝试在 Eclipse 中运行它（通过使用 m2eclipse 插件）时，当我右键单击`pom.xml`并作为 maven 构建运行时，它会要求一个目标。我是 Maven 新手，想通过 Eclipse 运行它。那么为什么从命令行运行时它不要求任何东西呢？有默认目标吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T18:06:40.463

是的，有一个默认目标，但它是什么取决于项目，并且可以明确定义。

请参阅[BaseBuild 元素集](http://maven.apache.org/pom.html#BaseBuild_Element)（默认目标是`install`）以及该页面的其余部分以获取更多信息。IIRC，您可以为 m2eclipse 定义一个默认目标，尽管我已经有一段时间没有使用它了。

还有一个设置来定义更新源目录时要运行的目标：

[http://www.sonatype.com/books/m2eclipse-book/reference/preferences.html](http://www.sonatype.com/books/m2eclipse-book/reference/preferences.html)

# ruby-on-rails - Rails FastCSV 导入功能

> ID：10970984
> 
> 赞同：0
> 
> 时间：2012-06-10T17:58:02.897
> 
> 标签：ruby-on-rails

我的 Rails 应用程序中的当前模型代码使用“文本”作为键，然后根据天气更新或创建新行，它是否重复。我正在寻找应将所有行导入数据库的替换代码（因此无需使用文本作为键，可以接受重复的内容）。有谁知道如何做到这一点？

**路线.rb**

```
MyApp::Application.routes.draw do

resources :users do
member do
  get :following, :followers
end
end
resources :sessions,        only: [:new, :create, :destroy]
resources :microposts,      only: [:create, :destroy]
resources :relationships,   only: [:create, :destroy]
resources :password_resets
resources :banklines,       only: [:create, :destroy]
resources :booklines,       only: [:create, :destroy]

root to: 'static_pages#app'

post  '/upload_booklines',  to: 'booklines#upload_booklines'
match '/board',             to: 'static_pages#home'
match '/signup',            to: 'users#new'
match '/signin',            to: 'sessions#new'
match '/signout',           to: 'sessions#destroy', via: :delete
match '/help',              to: 'static_pages#help'
match '/about',             to: 'static_pages#about'
match '/contact',           to: 'static_pages#contact' 
```

**控制器/booklines_controller.rb**

```
class BooklinesController < ApplicationController

require 'csv'

def upload_booklines
 if request.post? && params[:file].present?
  infile = params[:file].read
  n, errs = 0, []

  CSV.parse(infile) do |row|
    n += 1
    next if n == 1 or row.join.blank?
    @bookline = current_user.booklines.build_from_csv(row)
    if @bookline.valid?
      @bookline.save
    else
      errs << row
    end
  end
  redirect_to root_path
  end
end 
```

**模型/bookline.rb**

```
class Bookline < ActiveRecord::Base
attr_accessible :amount, :appendix_number, :date, :text

belongs_to :user, dependent: :destroy

    scope :active, where(:active => true)
    scope :latest, order('created_at desc')

  def self.build_from_csv(row)
    bookline = find_or_initialize_by_text(row[1])
    bookline.attributes ={:date => row[0], :amount => row[2], :appendix_number => row[3]}
  return bookline
  end
end 
```

**视图/static_pages/app.html.erb**

```
<%= form_tag('upload_booklines', :multipart => true) do %>
  <p>
     File:<br />
     <%= file_field_tag 'file' %><br />
   </p>
 <p>
   <%= submit_tag "Upload" %>
 </p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T19:06:30.353

首先，由于你只响应`POST`from `booklines#upload_booklines`（通常一个动作*应该*只响应一个动词），你可以修改你的路由看起来像这样：

`post '/upload_booklines', to: 'booklines#upload_booklines'`

然后您可以删除请求是否为`POST`.

现在，对于你的问题，这就是我要做的：

```
# models/bookline.rb
def self.create_from_csv(row)
    create do |b|
        b.date = row[0]
        b.text = row[1]
        b.amount = row[2]
        b.appendix_number = row[3]
    end
end

# controllers/bookslines_controller.rb
def upload_booklines
    redirect_to root_path, notice => "You must upload a .CSV file to parse." unless params[:file].present?

    CSV.parse(params[:file]) do |row|
        @bookline = current_user.booklines.create_from_csv(row)
    end
end 
```

第一种方法，`create_from_csv`进入模型。它将从控制器传入的 CSV 行创建一个新记录。第二种方法`upload_booklines`进入控制器。它所做的只是打开文件并将每一行读入`create_from_csv`方法中。

我明确设置了属性，`create_from_csv`因为我不确定行中的所有数据是否都进入模型。如果你也不确定，你应该使用这个实现。但是，如果所有数据都映射到所有属性，则执行此操作的 DRYer 和更类似于 Ruby 的方式如下：

```
# models/bookline.rb
# Only use this if all of the data in the CSV row maps to attributes in the model
def self.create_from_csv(row)
    create(row.to_hash)
end 
```

本质上，我们将行对象从 CSV 解析器转换为哈希，可以直接传递给 create 方法。`create`这与标准控制器方法的工作方式非常相似；Rails将`params`变量从请求映射到散列。

此外，作为旁注，您不需要在 Ruby 中显式返回。方法中的最后一条语句会自动返回。在您的原始`build_from_csv`方法中，您可以简单地编写`booklines`，而不使用`return`关键字。在我的`create_from_csv`方法中，将返回新创建的`Bookline`记录，因为这就是`create`方法返回的内容。

# sql - SQL Server Management Studio 2012 挂起

> ID：10970989
> 
> 赞同：29
> 
> 时间：2012-06-10T17:59:00.643
> 
> 标签：sql, ssms, sql-server-2012

当我单击“对象资源管理器”中的“数据库”节点时，它只会继续“加载项目”，直到某个时候它只是挂起。

这仅在连接到远程服务器时发生，而不是在访问我的 PC 上的数据库时发生。

任何其他节点也不会发生这种情况。

网络托管公司的人对此没有任何问题。（但他们运行的是 2008 年，那里的 SQL 服务器也是如此）

我重新安装了整个 SQL 服务器等，但无济于事。

可能是什么问题？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-19T20:30:38.220

我遇到了同样的问题：使用对象资源管理器访问远程服务器时，SSMS 会无限期挂起。Windows 系统事件日志将显示 DCOM 错误 10009（“DCOM 无法使用任何配置的协议与计算机 MACHINE_NAME 进行通信。”）。

**解决方案是从我的个人资料中清除 MRU 历史记录和其他设置。**要做到这一点：

1.  关闭任何打开的 SSMS 2012 实例
2.  在资源管理器中，打开“%AppData%\Microsoft\SQL Server Management Studio”
3.  将“11.0”文件夹重命名为其他名称，例如“11.0.old”
4.  开放 SSMS 2012

您会看到您的 MRU 列表已被清除。然后，您应该能够重新输入您的凭据并正常使用 SSMS。

如果一切正常，您可以删除重命名的文件夹。否则，删除新创建的“11.0”文件夹并将原来的文件夹重命名为“11.0”。

我不知道是否实际上是导致此问题的 MRU 列表，或者是否是其他一些配置文件数据。

我们能够发现 SSMS 正在尝试通过端口 135 与 SQL Server 建立 DCOM 连接（可能用于 SSIS、T-SQL 调试或其他）。我们的防火墙被配置为阻止端口 135。通过在防火墙中打开端口，我们能够使用 SSMS（因此它对本地数据库有效，但对远程数据库无效）。不幸的是，开放的 135 端口会招致很多攻击，所以这对我们来说不是一个实用的解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-28T22:38:58.100

在所有数据库上关闭自动关闭。对我来说就像一个魅力！每次展开或刷新数据库列表时，服务器都必须唤醒导致挂起的数据库。

只需运行它即可找到所有已自动关闭的数据库

```
SELECT name, is_auto_close_on
FROM master.sys.databases AS dtb 
WHERE is_auto_close_on = 1 
ORDER BY name 
```

感谢[http://social.msdn.microsoft.com/Forums/sqlserver/en-US/99bbcb47-d4b5-4ec0-9e91-b1a23a655844/ssms-2012-extremely-slow-expanding-databases?forum=sqltools](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/99bbcb47-d4b5-4ec0-9e91-b1a23a655844/ssms-2012-extremely-slow-expanding-databases?forum=sqltools)

要为数据库关闭此设置 - 在对象资源管理器中右键单击数据库实例 -> 单击属性 -> 在数据库属性窗口的左侧导航窗格中单击“选项” -> 将“自动关闭”属性的值更改为“False”右窗格，如下面的快照所示：

[![SQL Server 2008 R2 中数据库属性窗口中的自动关闭选项](../Images/8115e66e5a0b86c2b0430fdaf7589320.png)](https://i.stack.imgur.com/kFC5y.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-10T18:06:23.317

假设您只能访问托管公司的一个数据库（几乎总是如此，至少使用特定的用户名/密码），您可以通过将注册服务器设置为默认值来避免使用下拉菜单您应该访问的数据库：

![在此处输入图像描述](../Images/d5563d1184df9607ba4b5b7c5b930c6e.png)

（这里也可能需要更长的时间，但这将是一次性的。您也可以键入它而不是等待列表填充。）

这样，即使主机为您创建的登录默认将您路由到 tempdb 或其他东西，Management Studio 仍会将您置于数据库的上下文中。

我现在看到您在谈论对象资源管理器节点，而不是我以某种方式错误解释的“使用数据库”下拉菜单。尝试的一个练习可能是突出显示数据库节点（不要展开它）并单击 F7（对象资源管理器详细信息）。如果这为您加载，那么它可以作为在层次结构中导航的替代方法，并且作为奖励，您可以在此处显示许多实体属性以及多选，这两件事您在对象资源管理器中无法控制。

如果这没有帮助，那么你的主人应该比他们看起来更好地帮助你。如果支持 SSMS 2012，那么他们应该能够在 SSMS 2012 中对此进行测试，并确认或否认他们可以重现它。如果不支持，那么我认为您的办法是安装 SSMS 2008（它们可以共存）并将其用于管理此特定服务器。

当然，您可以在对象资源管理器中做的任何事情（以及很多您不能做的事情），都可以通过使用[目录视图](http://msdn.microsoft.com/en-us/library/ms174365.aspx)和/或[DMV](http://msdn.microsoft.com/en-us/library/ms188754.aspx)来完成。因此，在您确定要做什么之前，您可能想要查看（或与我们分享）您使用对象资源管理器的确切用途 - 如果有一种方法可以在没有对象资源管理器的情况下执行此操作，那么您可能比拥有两个版本更喜欢这种解决方法工具（因为 2012 SSMS 的改进与对象资源管理器完全无关）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-07T16:47:27.507

我花了一个多月的时间与 Microsoft SQL Support 一起解决此问题。它已作为错误提交。

我在 Win 7 (64) 上安装了 SQL 2012 SSMS 和 VS 2012。

删除配置文件文件夹从未在任何合理的时间内起作用。

我们找到的解决方法是确保我的 SSMS 配置文件在连接时默认为主数据库。这似乎与我正在使用 Windows 身份验证连接并且我属于多个分配了 SQL 权限并且我没有在我的 AD 帐户上设置 SQL 特定权限的 AD 组这一事实有关。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-11T10:30:06.323

在我的情况下，删除配置文件文件夹只工作一次。下次我打开 SSMS 2012 时，它会在连接到服务器时再次冻结。SP1 也没有解决这个问题。

直到我[在 connect.microsoft.com 上找到 Ben Amada 在票证](http://connect.microsoft.com/SQLServer/feedback/details/768124/ssms-2012-object-explorer-hangs-when-expanding-databases-node-on-a-server-with-many-dbs)上描述的以下简单解决方法：**始终在关闭 SSMS 2012 之前关闭*对象资源管理器详细信息。***

所以对我来说完整的解决方法是：

1.  按照 Jaecen 的回答，但在创建干净的配置文件文件夹后再次关闭 SSMS 2012
2.  应用 Hoodlum 的推荐并`SqlStudio.bin`从旧的个人资料文件夹复制到新的（旧的个人资料文件夹之后可以删除）
3.  **每次关闭 SSMS 2012 之前，请确保*对象资源管理器详细信息*窗口已关闭**

前两个步骤只需要一次，或者如果“对象资源管理器详细信息”窗口意外打开。

**编辑**

我刚刚注意到，在同一个 SSMS 会话中（重新）连接到 SQL 服务器时，也需要关闭对象资源管理器详细信息窗口。所以基本上每当连接到服务器时，对象资源管理器详细信息窗口都必须关闭。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-26T17:10:17.397

从 2000 年到 2012 年有一些 SQL Server，然后从我的桌面通过 SMSS 访问。问题以不同的频率发生，如下所示：当我在对象资源管理器中折叠服务器时，SMSS 冻结。

查看相关服务器上的活动监视器，我在主数据库中找到一个进程，主机 = 我的桌面执行以下查询

SELECT dtb.name AS [Name] FROM master.dbo.sysdatabases AS dtb ORDER BY [Name] ASC SMSS

杀死进程释放 SMSS。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-17T12:33:42.100

我从 2000 年到 2012 年连接到多个远程服务器。本地 PC 上的 SMSS 是 SQL Server 2012，SMSS 是 11.0.2100.60

SSMS 每天冻结数次。发生这种情况时，我通过 RDP 转到本地服务器 / SMSS / Activity Monitor 并从我的 PC 中终止进程，数据库名称 = master，一次一个，直到我的 PC 上的 SMSS 解冻。

这总是有效的，然而，治愈这种疾病而不是症状会受到高度欢迎。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-01T07:01:53.550

这对我有用 打开 SSMS 单击连接到服务器对话框中的连接到对象资源管理器按钮 展开选项>>单击全部重置 完成！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-10T08:27:03.960

我已经测试了以上所有答案，但我的 SSMS 卡在扩展数据库列表中。我终于找到了问题。问题是因为我恢复了一个数据库，但它最后确实恢复了。然后，当我扩展数据库列表时，它就卡住了。

我运行查询

```
SELECT 
dtb.name AS [Name]
,dtb.database_id AS [ID] 
,CAST(has_dbaccess(dtb.name) AS bit) AS [IsAccessible] FROM master.sys.databases AS dtb 
```

然后结果花了太长时间，最后超时但是当我过滤卡住的数据库时，我得到了结果。

```
SELECT 
dtb.name AS [Name]
,dtb.database_id AS [ID] 
,CAST(has_dbaccess(dtb.name) AS bit) AS [IsAccessible] FROM 
master.sys.databases AS dtb 
Where name <> 'StuckDB' ORDER BY [Name] ASC 
```

最后我决定分离 StuckDB 来解决我的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-20T06:57:10.457

“打开 SSMS 单击连接到服务器对话框中的连接到对象资源管理器按钮展开选项>>单击全部重置” - 它有效

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-03T17:05:58.257

我现在已经应用了 SQL 2012 Service Pack 1（通过 Windows 更新），它现在似乎工作正常，尽管它确实需要很长时间才能加载。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-25T07:40:05.657

我通过将默认数据库更改回主数据库解决了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-27T13:33:19.270

转到 SSMS 的数据库属性并将兼容性更改为 2012。然后检查。

[![在此处输入图像描述](../Images/84a72464e17d964159c3b94d81bd89b6.png)](https://i.stack.imgur.com/Tq2H8.png)

# database - 为什么不能以这种方式将图像保存到数据库？

> ID：10970992
> 
> 赞同：2
> 
> 时间：2012-06-10T17:59:12.700
> 
> 标签：database, asp.net-mvc, asp.net-mvc-3, sql-server-2008, image-uploading

我想将图像和其他一些信息保存到我的 asp.net mc3 项目中的数据库中。我之前已经将图像保存到数据库并且它有效。我在控制器中的代码是这样的：

```
public ActionResult savetodb()
{
    if (Request.Files.Count > 0 && Request.Files[0] != null)
        {
             HttpPostedFileBase file = Request.Files[0];
             var path = Path.Combine(Server.MapPath("~/Content/Image"), file.FileName); 
             file.SaveAs(path);
             byte[] buffer = System.IO.File.ReadAllBytes(path);
             myAd.AdImage = buffer;
             StoreDb.AddToAds(myAd);
             StoreDb.SaveChanges();
        }
        return View();      
    }
} 
```

现在我更改了表格并希望将图像以外的其他信息保存到数据库中。现在我的代码是这样的：

```
 public ActionResult savetodb(AdvertiseView model)
 {
     if (Request.Files.Count > 0 && Request.Files[0] != null)
     {
         HttpPostedFileBase file = Request.Files[0];
         var path = Path.Combine(Server.MapPath("~/Content/Image"), file.FileName);
         file.SaveAs(path);
         byte[] buffer = System.IO.File.ReadAllBytes(path);
         myAd.AdImage = buffer;
     }
     myAd.AdTitle = model.AdTitle;
     myAd.AdContext = model.context;
     myAd.AdScope = model.Scope;
     storedb.AddToAds(myAd);
     storedb.SaveChanges();
     return View();
} 
```

其他信息没有任何问题，但图像无法保存。我明白那个

```
Request.Files.Count 
```

return 0\. 我不知道我现在该怎么办。有人可以帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:41:32.270

我会使用视图模型。

假设您首先有一个域模型：

```
public class MyDomainModel
{
    public byte[] AdImage { get; set; }
    public string Description { get; set; }
} 
```

然后定义一个视图模型：

```
public class MyViewModel
{
    [Required]
    public HttpPostedFileBase File { get; set; }

    [DataType(DataType.MultilineText)]
    public string Description { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            return View(model);
        }

        // TODO: move this mapping logic into a 
        // mapping layer to avoid polluting the controller
        // I would recommend AutoMapper for this purpose
        // http://automapper.org/
        using (var stream = new MemoryStream())
        {
            model.File.InputStream.CopyTo(stream);
            var image = stream.ToArray();
            var domainModel = new MyDomainModel
            {
                AdImage = image,
                Description = model.Description
            };

            // TODO: persist the domain model by passing it to a method
            // on your DAL layer
        }

        return Content("Thanks for submitting");
    }
} 
```

一旦推荐的重构完成：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            return View(model);
        }

        MyDomainModel domainModel = Mapper.Map<MyViewModel, MyDomainModel>(model);

        // TODO: persist the domain model by passing it to a method
        // on your DAL layer

        return Content("Thanks for submitting");
    }
} 
```

最后是允许用户上传文件的视图：

```
@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div>
        @Html.LabelFor(x => x.Description)
        @Html.EditorFor(x => x.Description)
    </div>

    <div>
        @Html.LabelFor(x => x.File)
        @Html.TextBoxFor(x => x.File, new { type = "file" })
        @Html.ValidationMessageFor(x => x.File)
    </div>    
    <button type="submit">OK</button>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T18:16:32.387

用作`HttpPostedFileBase`动作的参数。

如果您只发送一个文件，请使用此选项。如果您允许多个，那么您必须使用`IEnumerable<HttpPostedFileBase> files`作为参数。

```
public ActionResult savetodb(HttpPostedFileBase file)
{
    if(file != null)
    {
        var path = Path.Combine(Server.MapPath("~/Content/Image"), file.FileName);
        file.SaveAs(path);
        byte[] buffer = System.IO.File.ReadAllBytes(path);
        myAd.AdImage = buffer;
        StoreDb.AddToAds(myAd);
        StoreDb.SaveChanges();
    }
    return View();      
} 
```

您还必须确保您的表单正确构建在您的视图中

```
@using (Html.BeginForm("ActionName", "ControllerName", FormMethod.Post, new { enctype = "multipart/form-data" })) {
....
} 
```

另请注意，默认情况下，浏览器文件大小上传限制为 4MB，如果您想上传大于该大小的任何内容，则需要在 web.config 文件中配置您的设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T18:16:48.537

向您的视图模型添加一个属性以获取此文件：

```
public class AdvertiseView
{
    ...    
    public HttpPostedFileBase NameOfFileInput;
    ....
} 
```

因此，您可以将文件作为模型的属性获取：

```
if (myAd.NameOfFileInput != null)
{
    var path = Path.Combine(Server.MapPath("~/Content/Image"), myAd.NameOfFileInput.FileName);
    myAd.NameOfFileInput.SaveAs(path);
    byte[] buffer = System.IO.File.ReadAllBytes(path);
    myAd.AdImage = buffer;
} 
```

当然，您可以使用相同的属性`AdImage`并将其保存到正确的位置，如果缓冲区的类型相同，则无需复制缓冲区。

# java - 登录后，Seam 安全性和漂亮面孔重定向到错误的 url

> ID：10970995
> 
> 赞同：1
> 
> 时间：2012-06-10T17:59:22.753
> 
> 标签：java, jsf, seam3, prettyfaces

当我使用接缝安全登录到我的页面时，它会将我重定向到 /WEB-INF/pages/index.xhtml 而不是简单的 /。这是我的@ViewConfig 的片段：

```
public interface PagesConfig {
    public static final String PAGES_PREFIX = "/WEB-INF/pages/";

    static enum Pages {
        @ViewPattern(PAGES_PREFIX + "index.xhtml")
        @UrlMapping(pattern = "/")
        @LoggedIn
        @LoginView(PAGES_PREFIX + "login.xhtml")
        INDEX,

        @ViewPattern(PAGES_PREFIX + "login.xhtml")
        @UrlMapping(pattern = "/login")
        LOG_IN,
        ...
    }
    ...
} 
```

你知道问题可能出在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:11:42.527

我认为这是一个错误： [https ://issues.jboss.org/browse/SEAMFACES-193](https://issues.jboss.org/browse/SEAMFACES-193)

我想我已经找到了解决办法，所以我在 github 上提交了一个拉取请求： [https ://github.com/seam/faces/pull/75](https://github.com/seam/faces/pull/75)

# ruby-on-rails-3.1 - 两个简单的表格，为什么我不能提交我想要的？

> ID：10970997
> 
> 赞同：0
> 
> 时间：2012-06-10T17:59:31.047
> 
> 标签：ruby-on-rails-3.1, simple-form

我有两种简单的形式如下所示：

```
= simple_form_for(@class_room, :html=>{:id=>'class_room_form'}) do |class_room_form| 
```

和

```
= simple_form_for(@lesson, :html => {:id=>'lesson_form'}) do |lesson_form| 
```

现在，虽然我提交了 id 课程表单的表单，但提交了 id 为 class_room_form 的表单！知道该怎么做吗？

这是我提交课程表格的方式：

```
:javascript
  $('#submit_lesson_button').bind('click', function() {
    $("#lesson_form").trigger('submit');
    }); 
```

这是我提交其他表格的方式（无论如何仍然提交的表格）

```
:javascript
  $('#submit_button').bind('click', function() {
    $('#sidenav a:first').tab('show');
    $('#class_room_form').trigger('submit');
    }); 
```

你看，每个表单都有不同的 id，我用 jQuery 来定位那些不同的 id，那么可能有什么问题呢？

注意表单`lesson_form`包含在表单中`class_room_form`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T18:17:58.683

你不应该包含一个表单是另一种表单。如果你能改变这一点，它肯定会解决你的问题，你的代码也会更干净。

如果不能，请尝试添加`event.preventDefault()`到您的功能中，如下所示：

```
:javascript
  $('#submit_lesson_button').bind('click', function(event) {
    event.preventDefault();
    $("#lesson_form").trigger('submit');
  });

:javascript
  $('#submit_button').bind('click', function() {
    event.preventDefault();
    $('#sidenav a:first').tab('show');
    $('#class_room_form').trigger('submit');
  }); 
```

我想`#submit_lesson_button`并且`#submit_button`是`<input type="submit" ... >`