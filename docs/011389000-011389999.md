# StackOverflow 问答 11389000-11389999

# c++ - 如何使迭代器“自动取消引用”？

> ID：11389000
> 
> 赞同：4
> 
> 时间：2012-07-09T04:13:46.037
> 
> 标签：c++, c++11, iterator

假设我有这样的事情：

```
class Collection
{
private:
    typedef std::vector< std::shared_ptr<Something> >::iterator Iterator;
    std::vector< std::shared_ptr<Something> > data_;

public:
    Iterator begin() {return data_.begin()}
    Iterator end()  {return data_.end()}
} 
```

当我使用`Collection::Iterator`实例时，我需要取消引用它一次，以获取`std::shared_ptr<Something>`对象并再次获取`Something`对象。

但是如果我只想做`std::shared_ptr<Something>`一个实现细节，那么在一次取消引用之后，我应该得到一个`Something`对象是合理的。

那是：

```
Collection collection;
Collection::Iterator it = collection.begin();
Something firstMember = *it;  // instead of the current **it; 
```

我的问题是，我是否需要`Collection`从头开始将 Iterator 作为嵌套类，并从这里[http://www.cplusplus.com/reference/std/iterator/](http://www.cplusplus.com/reference/std/iterator/)实现随机访问迭代器所需的所有功能，或者在那里一些众所周知的方法？可能是 C++11？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T04:20:03.473

听起来你正在实施的东西存在并且被称为[`boost::ptr_vector`](http://www.boost.org/libs/ptr_container/). Boost 还提供[了一个库](http://www.boost.org/libs/iterator/)，用于实现更轻松的迭代器。听起来你正在寻找的是[`boost::indirect_iterator`](http://www.boost.org/libs/iterator/doc/indirect_iterator.html)

# sammy.js - Sammy.js 的好教程/链接

> ID：11389003
> 
> 赞同：0
> 
> 时间：2012-07-09T04:14:41.603
> 
> 标签：sammy.js

我想学习 sammy.js。有没有推荐学习 sammy.js 的好网站/教程/链接？真的很感激...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:27:02.470

也许你应该试试[他们的网站](http://sammyjs.org/)....[他们似乎有据可查](http://sammyjs.org/docs)。谷歌（令人惊讶地）[也可以提供帮助](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-an-introduction-to-sammy-js/)。

# java - 将十六进制转换为特殊字符（Java）

> ID：11389004
> 
> 赞同：0
> 
> 时间：2012-07-09T04:15:03.517
> 
> 标签：java, encoding, hex, ascii, iso-8859-1

我需要在前两个字节中发送消息的长度。

计算了消息长度，结果是 752，比如说 02F0 十六进制。现在我需要计算出对应于这个十六进制值的特殊符号。为了得到我使用的那些

```
 int num1 = Integer.parseInt("F0", 16);
 char c1 = (char) num1; 
```

获取 -> ð 第一个字符在那里不可见（由于编码），但我确实得到了正确的字符。无论如何，但是当我将这些特殊字符连接到最终消息字符串（以 ASCII 格式）时，它会从 02F0 变为 023f（通过在 ultraedit hex 视图中读取最终消息来确认）。为什么会这样？3F 是十进制的 63，我看到下面的代码片段也发生了同样的事情->

```
Charset asciicharset = Charset.forName("ASCII");
Charset iso88591charset = Charset.forName("ISO-8859-1");

byte [] a = new byte[]{(byte)0x02, (byte)0xF0};

ByteBuffer inputBuffer = ByteBuffer.wrap(a);

CharBuffer data = asciicharset .decode(inputBuffer);

ByteBuffer outputBuffer = asciicharset .encode(data); --> This is where instead of 240
for F0 I get 63, in fact I tried with any value more than 63 but it always comes back to
that

byte[] outputData = outputBuffer.array(); 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:31:22.063

我怀疑您的问题没有发生在您评论的那一行，而是*上*一行，即：

```
 CharBuffer data = asciicharset .decode(inputBuffer); 
```

ASCII 字符是 7 位的，而不是 8 位的。因此，任何大于 127（十六进制为 0x7F）的值都不会出现在您的 asciicharset 中，因此`decode()`可能使用默认替换。（请注意，63 对应于字符“？”，作为默认替换是有意义的。）

更新：从上面和下面的评论线程中，既然我对您正在尝试做的事情有了更多的了解，我建议根本不要使用 Charset（因为没有任何标准命名编码适用于任何/所有长度可能有 2 个字节的组合，例如，即使 UTF-16 也有保留值）。相反，我建议仅使用字节缓冲区，并且仅在从中剥离初始长度字节*后*尝试转换为字符串。

# jquery - 如何只获取一次脚本

> ID：11389008
> 
> 赞同：2
> 
> 时间：2012-07-09T04:15:42.897
> 
> 标签：jquery, load, getscript

所以这是一个简化的问题（我用它作为参考，让这个问题变得简单......）

[如果高于 x 像素（jQuery），则使用调整大小来获取脚本](https://stackoverflow.com/questions/11388247/using-resize-to-getscript-if-above-x-pixels-jquery/11388449)

如果我调用一个获取脚本的函数，如果该函数再次触发，它将不会再次加载脚本。

它在 ^ 中是哪个代码。

[getScript - 如果尚未调用，如何仅调用](https://stackoverflow.com/questions/5845230/getscript-how-to-only-call-if-not-already-called)

是一个例子，但我不久前尝试过该代码。

前任：

```
$(function() 
{
  var gotscript=false;   
  $(window).resize(function() 
  {
      //Dekstop
      if (window.innerWidth >= 768) 
      {
           if (!gotscript) 
           {
               // GET DESKTOP SCRIPT TO KEEP THINGS QUICK
               $.getScript("js/desktop.js", function() 
               { 
                   gotscript=true;
               });
           }
       }
       if (window.innerWidth < 768) 
       {
           if (window.innerWidth >= 768) 
           {
               if (!gotscript) 
               {
                   // GET DESKTOP SCRIPT TO KEEP THINGS QUICK
                   $.getScript("js/desktop.js", function() 
                   { 
                       gotscript=true;
                   });
               }
            }
       }
   }) .resize(); // trigger resize event
}) 
```

这会在任何窗口调整大小事件上加载脚本。

我忘了提...

```
var $window = $(window);

function checkWidth() {
    var windowsize = $window.width();

    ////// LETS GET SOME THINGS IF IS DESKTOP 
    var $desktop_load = 0;
    if (windowsize >= 768) {
        if (!$desktop_load) {
            // GET DESKTOP SCRIPT TO KEEP THINGS QUICK
            $.getScript("js/desktop.js", function() { 
                $desktop_load = 1;
            });
        }
    }
    ////// LETS GET SOME THINGS IF IS MOBILE
    if (windowsize < 768) { 

    } 
}

// Execute on load
checkWidth(); 
```

这将在窗口大小高于 768 时起作用，并且由于它只加载此函数一次，因此不会再次加载脚本。如果小于 768，我可以做些什么来使脚本加载，然后超过 768，而不是再次加载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:36:15.463

我希望问题与`getScript`异步有关，因此无法访问`$desktop_load`单独函数范围内的变量。

解决方法是创建`$desktop_load`一个全局变量。

试试这个，

```
var $desktop_load = 0; // <~~ move the variable into global scope
function checkWidth() {
    var windowsize = $window.width();

    ////// LETS GET SOME THINGS IF IS DESKTOP 
    // var $desktop_load = 0; // <~~ remove the variable from local scope 
```

此外，这将避免您在每次运行该函数时将变量重新设置为 false，`checkWidth`因为在您以这种方式进行测试之前它总是为 false - 而不是您想要的。

ps 在 javascript 中使用前缀变量是很不寻常`$`的，除非它是一个缓存`jQuery`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T19:52:10.037

不能完全工作，`cache: true`因为它只是让浏览器决定是否应该再次加载文件。

您需要一个函数，例如`getScriptOnce`. 这种类型的功能有几种可能的解决方案。我为我的代码写了这样一个函数。您可以使用Firebug 或 Chrome 开发工具中的**网络选项卡进行测试。**这只会加载同一个文件一次。您只需要将`getScriptOnce`函数和全局数组复制到您的文件中`ScriptArray`。

注意不要在上一次之后立即下载第二次，因为该函数只是假设文件已加载，在调用回调之后，即在文件加载成功之后。

```
var ScriptArray = []; //global array of urls
function getScriptOnce(url, callback) {
    //the global array doesn't have such url
    if (ScriptArray.indexOf(url) === -1){
        if (typeof callback === 'function') {
            return $.getScript(url, function(script, textStatus, jqXHR) {
                ScriptArray.push(url);
                callback(script, textStatus, jqXHR);
            });
        } else {
            return $.getScript(url, function(){
                ScriptArray.push(url);
            });
        }
    }
    //the file is already there, it does nothing
    //to support as of jQuery 1.5 methods .done().fail()
    else{
        return {
            done: function () {
                return {
                    fail: function () {}
                };
            }
        };
    }
}

/*#####################################################################*/
/*#####################################################################*/

//TEST - tries to load the same jQuery file twice
var jQueryURL = "https://code.jquery.com/jquery-3.2.1.js";
console.log("Tries to load #1");
getScriptOnce(jQueryURL, function(){
  console.log("Loaded successfully #1")
});

//waits 2 seconds and tries to load again
window.setTimeout(function(){
  console.log("Tries to load #2");
  getScriptOnce(jQueryURL, function(){
    console.log("Loaded successfully #2");
  });
}, 2000);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T17:32:39.143

所以没有人想出一个好的答案，也许是我解释得不好。不管我解决了我自己的问题。

它将加载脚本@ 768 或更高版本，并且只加载一次。但是，如果浏览器加载@小于 768，那么浏览器的大小会重新调整到 768 以上，它将加载脚本一次。我使用它通过 ajax 从 desktop.js 中加载代码块和图像。所以当它不工作时，它会重新加载内容，一个例子是一个加载 gif，它会显示并重置内容。这背后的想法是保持对 css 的响应，并在需要时使用 jquery 加载更大的循环。

```
$.ajaxSetup({
  cache: true
});

var $window = $(window);
var onlyonce = 0;

function resizing() {
  var windowsize = $window.width();
  if (windowsize >= 768) {
    getdeskTop();
}};

function getdeskTop() {
  if (onlyonce === 0) {
    grabScript ();
  } else {
  };
};

function grabScript() {
  onlyonce = 1;
  $.getScript("js/desktop.js", function() { });
}

$(window).resize(resizing);
resizing(); 
```

这可能有点难看，但我让它工作了:)。

# android - 在 Android 屏幕中显示服务标记

> ID：11389009
> 
> 赞同：0
> 
> 时间：2012-07-09T04:15:43.883
> 
> 标签：android

似乎Android 不支持[Service Mark UTF 代码。](http://www.fileformat.info/info/unicode/char/2120/index.htm)我的 strings.xml 文件中有以下内容，但我只得到一个空框。版权工作正常。有任何想法吗？

```
<string name="test">Test\u2120</string> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:31:29.313

一种选择是使用具有服务标记的自定义字体。或者也许更容易[使用 superscript](https://stackoverflow.com/questions/3543454/subscript-and-superscript-a-string-in-android)。

# mysql - 在 Rails 的数据库中计算词频

> ID：11389010
> 
> 赞同：0
> 
> 时间：2012-07-09T04:15:45.863
> 
> 标签：mysql, ruby-on-rails, word-frequency

我有一个带有两列（名称和描述）的数据库的 Rails 应用程序。我想运行一个脚本，该脚本将在任一列中找到所有唯一单词，并根据它们出现的频率对它们进行排名。这是为了生成索引。

我明白我需要排除某些词（例如“the”和“a”），并且由于复数，计数可能不完美。但我很高兴在后期处理中手动处理这个，我只是在寻找一个基本的脚本，它会给我所有的单词和它们的频率。

有没有人有任何代码可以做到这一点或任何指导如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:44:53.863

```
def unique_word_count
  @thing = Thing.all
  @hash = Hash.new(0)
  @thing.each do |thing|
    name_array = thing.name.split(' ')
    description_array = thing.description.split(' ')
  end
  name_array.each do |word|
    @hash[word] += 1
  end
  description_array.each do |word|
    @hash[word] += 1
  end
end 
```

我还没有运行代码，但这样的东西可能是你正在寻找的。

# sql - 如何在 sql server 中找到这种模式？

> ID：11389014
> 
> 赞同：2
> 
> 时间：2012-07-09T04:16:10.527
> 
> 标签：sql, sql-server, sql-server-2008, sql-like

如何在表中的 sql server 中找到这样的模式。

我有这样的行表。

```
ST CLAIR, TERESA
JR VISH, DALVI
JACK RIDER
JR JK, SMITH 
```

我想找到遵循此模式的行，`ST CLAIR, TERESA`因此它将返回 3 行，如下所示。

```
ST CLAIR, TERESA
JR VISH, DALVI
JR JK, SMITH 
```

询问

```
select * from table
where column like ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:34:29.527

也许您正在寻找包含空格字符的模式： [column] LIKE '% %, %'

或者，如果您只关心逗号，请使用 LIKE '%,%'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:38:02.820

你是这个意思？

```
select * from table where column like '% %, %' 
```

你可以像这样测试它：

```
WITH Foo (datacol)
AS( SELECT *
    FROM (  VALUES  ('ST CLAIR, TERESA'),
                    ('JR VISH, DALVI'),
                    ('JACK RIDER'), 
                    ('JR JK, SMITH') 
                    ) AS F (datacol))
SELECT datacol
FROM Foo where datacol like '% %, %'; 
```

它会给你你正在寻找的结果：

```
 ST CLAIR, TERESA
 JR VISH, DALVI
 JR JK, SMITH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T05:09:55.690

As suggested by Luxspes you can use '% %, %' to filter the data or you can use parsename to get the result

```
Declare @Sample table
(word varchar(255))

Insert into @Sample
values 
('ST CLAIR , TERESA'),('JR VISH, DALVI'),('JACK RIDER'),('JR JK, SMITH')

Select word from @Sample
where parsename(replace(word,',','.'),2) is not null 
```

# latitude-longitude - 在给定多个选项的情况下，如何仅为一个城市选择唯一的纬度和经度？

> ID：11389020
> 
> 赞同：0
> 
> 时间：2012-07-09T04:17:06.237
> 
> 标签：latitude-longitude, geo, dbpedia

我有以下查询：

```
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dbpedia-owl: <http://dbpedia.org/ontology/>
PREFIX dbpedia: <http://dbpedia.org/resource/>

SELECT DISTINCT ?person1 ?birthplace1 ?person2 ?birthplace2 
                ?lat1 ?long1 ?lat2 ?long2
WHERE 
{
  ?person1 a dbpedia-owl:Person ;
           dbpedia-owl:birthPlace ?birthplace1 ;
           dbpedia-owl:influenced ?person2 .
  ?person2 dbpedia-owl:birthPlace ?birthplace2 .

  ?birthplace1 a dbpedia-owl:City .
  ?birthplace2 a dbpedia-owl:City .

  optional {
    ?birthplace1 geo:lat ?lat1 .
    ?birthplace1 geo:long ?long1 .

    ?birthplace2 geo:lat ?lat2 .
    ?birthplace2 geo:long ?long2 .
   }
} 
```

当我在 iSparql 中查询它时，它会拉出一个长列表。请参阅[永久链接](http://dbpedia.org/isparql/?query=PREFIX%20geo%3A%20%3Chttp%3A%2F%2Fwww.w3.org%2F2003%2F01%2Fgeo%2Fwgs84_pos&endpoint=/sparql&maxrows=50&timeout=&default-graph-uri=&view=1)。我只想要一个城市的个人纬度/经度。没关系，我只想要一个独特的。

另外，谁能告诉我为什么这在 Snorql 中不起作用？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T02:06:02.327

您需要对人员和出生地`GROUP`的结果`BY`进行采样，然后对纬度和经度值进行采样。这只需要对您的 SPARQL 查询稍作更改。现在有

```
GROUP BY ?person1 ?birthplace1 ?person2 ?birthplace2 
```

在底部，经纬度的投影形式包括`SAMPLE`：

```
SELECT DISTINCT ?person1 ?birthplace1 ?person2 ?birthplace2 
                (SAMPLE(?lat1) as ?lat1) (SAMPLE(?long1) as ?long1)
                (SAMPLE(?lat2) as ?lat2) (SAMPLE(?long2) as ?long2) 
```

这是整个查询：

```
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dbpedia-owl: <http://dbpedia.org/ontology/>
PREFIX dbpedia: <http://dbpedia.org/resource/>

SELECT DISTINCT ?person1 ?birthplace1 ?person2 ?birthplace2 
                (SAMPLE(?lat1) as ?lat1) (SAMPLE(?long1) as ?long1)
                (SAMPLE(?lat2) as ?lat2) (SAMPLE(?long2) as ?long2)
WHERE 
{
  ?person1 a dbpedia-owl:Person ;
           dbpedia-owl:birthPlace ?birthplace1 ;
           dbpedia-owl:influenced ?person2 .
  ?person2 dbpedia-owl:birthPlace ?birthplace2 .

  ?birthplace1 a dbpedia-owl:City .
  ?birthplace2 a dbpedia-owl:City .

  optional {
    ?birthplace1 geo:lat ?lat1 ;
                 geo:long ?long1 .

    ?birthplace2 geo:lat ?lat2 ;
                 geo:long ?long2 .
   }
}
GROUP BY ?person1 ?birthplace1 ?person2 ?birthplace2 
```

[SPARQL 结果](http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=PREFIX+geo%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2003%2F01%2Fgeo%2Fwgs84_pos%23%3E%0D%0APREFIX+dbpedia-owl%3A+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2F%3E%0D%0APREFIX+dbpedia%3A+%3Chttp%3A%2F%2Fdbpedia.org%2Fresource%2F%3E%0D%0A%0D%0ASELECT+DISTINCT+%3Fperson1+%3Fbirthplace1+%3Fperson2+%3Fbirthplace2+%0D%0A++++++++++++++++%28SAMPLE%28%3Flat1%29+as+%3Flat1%29+%28SAMPLE%28%3Flong1%29+as+%3Flong1%29%0D%0A++++++++++++++++%28SAMPLE%28%3Flat2%29+as+%3Flat2%29+%28SAMPLE%28%3Flong2%29+as+%3Flong2%29%0D%0AWHERE+%0D%0A%7B%0D%0A++%3Fperson1+a+dbpedia-owl%3APerson+%3B%0D%0A+++++++++++dbpedia-owl%3AbirthPlace+%3Fbirthplace1+%3B%0D%0A+++++++++++dbpedia-owl%3Ainfluenced+%3Fperson2+.%0D%0A++%3Fperson2+dbpedia-owl%3AbirthPlace+%3Fbirthplace2+.%0D%0A%0D%0A++%3Fbirthplace1+a+dbpedia-owl%3ACity+.%0D%0A++%3Fbirthplace2+a+dbpedia-owl%3ACity+.%0D%0A%0D%0A++optional+%7B%0D%0A++++%3Fbirthplace1+geo%3Alat+%3Flat1+%3B%0D%0A+++++++++++++++++geo%3Along+%3Flong1+.%0D%0A%0D%0A++++%3Fbirthplace2+geo%3Alat+%3Flat2+%3B%0D%0A+++++++++++++++++geo%3Along+%3Flong2+.%0D%0A+++%7D%0D%0A%7D%0D%0AGROUP+BY+%3Fperson1+%3Fbirthplace1+%3Fperson2+%3Fbirthplace2&format=text%2Fhtml&timeout=30000&debug=on)

# java - 使用java代码在windows中启动Tomcat

> ID：11389022
> 
> 赞同：0
> 
> 时间：2012-07-09T04:17:14.477
> 
> 标签：java

我想使用 java 程序启动 tomcat。

我已经使用下面的代码在 linux 中开始

```
String command = "c:\program files\tomcat\bin\startup.sh";
Process child = Runtime.getRuntime().exec(command); 
```

它工作正常。

我在windows中使用了以下代码

```
String command = "c:/program files/tomcat/bin/startup.bat";
Process child = Runtime.getRuntime().exec(command); 
```

它不工作。

我想为 Windows 配置任何其他属性吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:20:08.120

尝试正确设置环境变量：

*   JAVA_HOME

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:25:26.680

你的代码是非法的。您需要在 Java 中使用“\\”作为反斜杠。然后，设置环境变量 JAVA_HOME 和 CATALINA_HOME。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-24T05:46:54.123

我有同样的问题。只需使用

```
 String command = "D:/server/apache-tomcat-7.0.67/bin/startup.bat";
 File file = new File("D:/server/apache-tomcat-7.0.67/bin");
 Process p = Runtime.getRuntime().exec(new String[]{"cmd.exe", "/C", "start" ,command, 
 "start"}, null, file);
 Process process = new ProcessBuilder(command , "start" ).start(); 
```

它工作正常。但是一件事文件路径没有任何空格。

# javascript - 我有类似的代码，我想知道是否有办法让它变短

> ID：11389024
> 
> 赞同：2
> 
> 时间：2012-07-09T04:17:24.270
> 
> 标签：javascript, extjs

我想知道如何在我的 js 文件中缩短它们。我有很多类似的代码。我已经一次又一次地重复这个 if 函数也必须重复 else 函数。唯一改变的是 Mission() Doclick() 和 Yesdo()。如果有办法让它简短，请告诉我谢谢。

```
function Buy() {
    if (uida == '234' || uidb == '4563') {
        Mission();
    } else {
        stop();
    };
};

function Start() {
    if (uida == '234' || uidb == '4563') {
        Doclick();
    } else {
        stop();
    };
};

function ReBuy() {
    if (uida == '234' || uidb == '4563') {
        Yesdo();
    } else {
        stop();
    };
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:32:20.870

使用函数指针！

```
function Uida(fn) {
    if (uida == '234' || uidb == '4563') {
        fn();
    } else {
        stop();
    };
}

function Buy() {
    Uida(Mission);
};

function Start() {
    Uida(Doclick);
};

function ReBuy() {
    Uida(Yesdo);
} 
```

当然，您需要将`Uida`函数重命名为更具描述性的名称 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:22:56.323

您可以让它们都调用一个类似的函数并传递一个`uida`参数，如下所示：

```
// You could change the following 3 functions to have ternary statements
// eg: if ( uidaCheck() ) ? Function() : stop();
//
function Buy() {
    if ( uidaCheck() ) {
        Mission();
    } else {
        stop();
    }
}

function Start() {
    if ( uidaCheck() ) {
        Doclick();
    } else {
        stop();
    }
}

function ReBuy() {
    if ( uidaCheck() ) {
        Yesdo();
    } else {
        stop();
    }
}

function uidaCheck() {
    // uida assumed to be globally accessible var
    //
    if ( ( uida == '234' ) || ( uida == '4563' ) ) {
        return true;
    } else {
        return false;
    }
} 
```

无论如何，这是理论，给我一秒钟，我会看看我能不能把它整理一下。（[三元](http://en.wikipedia.org/wiki/Ternary_operation)）

这是一个快速的[jsfiddle](http://jsfiddle.net/U6jCc/)。

# javascript - 动态地向 json root 添加值

> ID：11389025
> 
> 赞同：2
> 
> 时间：2012-07-09T04:17:41.677
> 
> 标签：javascript, json

好吧，我很困惑。我做了一个这样的json元素：

```
var world = {"county": []};
world.county.push({name: "America", flag: "yes", countries: []});
world.county[0].countries.push({name: "Costa Rica", capital: "San Jose"}); 
```

这让我想到两件事：

1.  我正在将数组与 json 对象混合。在这种情况下如何避免使用数组？
2.  如何动态地将元素添加到 json 根？

关于问题2，我遇到了问题，因为我不知道如何将元素添加到根目录，假设我已经尝试过了，但它不起作用：

```
var index = 0;
var word = {};
world.index.push({name: WA}); 
```

所以，通过这种方式，我可以添加元素迭代之前创建的一些数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T04:24:01.220

首先，让我们解决这个问题：如果它是一个表示 JavaScript 对象的**字符串，那么它只是 JSON。**你有一个*对象文字*。

现在，至于您的问题，您可以简单地使用以下方法向对象添加元素：

```
object.newProperty = value; 
```

至于您想避免使用数组，只需使用数组即可。它们是要使用的正确类型的对象，您不应该为该任务使用其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:35:20.447

从 Kolink 的回答开始。然后，对于您在这里所做的事情：

```
var index = 0;
var world = {};
world.index.push({name: "WA"}); 
```

看起来您正在尝试`world`使用索引 0 添加一个属性。假设您随后尝试使用`.push()`它，您似乎希望该属性成为一个数组，在这种情况下，您可以这样做：

```
world[index] = [];
world[index].push({name: "WA"}); 
```

鉴于它`world`以创建此结构的空对象开始：

```
{ "0" : [ {name:"WA"} ] } 
```

一般来说，要访问属性位于变量中的对象属性，您可以使用`[]`数组样式语法。所以：

```
world["somePropName"]
// does the same thing as
world.somePropName
// so with a variable:
var x = "somePropName";
world[x] 
```

# cuda - cuda-sdk 的 nbody 代码中的线程管理

> ID：11389028
> 
> 赞同：3
> 
> 时间：2012-07-09T04:18:23.920
> 
> 标签：cuda

当我阅读 Cuda-SDK 中的 nbody 代码时，我浏览了代码中的一些行，我发现它与他们在 GPUGems3 "Fast N-Body Simulation with CUDA" 中的论文有点不同。

我的问题是：首先，为什么 blockIdx.x 仍然参与从全局加载内存到共享内存，如下面的代码中所写？

```
for (int tile = blockIdx.y; tile < numTiles + blockIdx.y; tile++)
{
    sharedPos[threadIdx.x+blockDim.x*threadIdx.y] =
        multithreadBodies ?
        positions[WRAP(blockIdx.x + q * tile + threadIdx.y, gridDim.x) * p + threadIdx.x] : //this line
        positions[WRAP(blockIdx.x + tile,                   gridDim.x) * p + threadIdx.x];  //this line

    __syncthreads();

    // This is the "tile_calculation" function from the GPUG3 article.
    acc = gravitation(bodyPos, acc);

    __syncthreads();
} 
```

纸上不应该是这样的吗？我想知道为什么

```
 sharedPos[threadIdx.x+blockDim.x*threadIdx.y] =
        multithreadBodies ?
        positions[WRAP(q * tile + threadIdx.y, gridDim.x) * p + threadIdx.x] :
        positions[WRAP(tile,                   gridDim.x) * p + threadIdx.x]; 
```

其次，在每个主体的多个线程中，为什么仍然涉及 threadIdx.x？它不应该是一个固定值还是根本不涉及，因为总和只是由于 threadIdx.y

```
if (multithreadBodies)
{
    SX_SUM(threadIdx.x, threadIdx.y).x = acc.x; //this line
    SX_SUM(threadIdx.x, threadIdx.y).y = acc.y; //this line
    SX_SUM(threadIdx.x, threadIdx.y).z = acc.z; //this line

    __syncthreads();

    // Save the result in global memory for the integration step
    if (threadIdx.y == 0)
    {
        for (int i = 1; i < blockDim.y; i++)
        {
            acc.x += SX_SUM(threadIdx.x,i).x; //this line
            acc.y += SX_SUM(threadIdx.x,i).y; //this line
            acc.z += SX_SUM(threadIdx.x,i).z; //this line
        }
    }
} 
```

谁能给我解释一下？是对更快的代码进行某种优化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T02:04:58.393

我是这段代码和论文的作者。编号的答案对应于您编号的问题。

1.  论文中没有提到blockIdx.x对`WRAP`宏的偏移，因为这是一个微优化。我什至不确定它是否值得。其目的是确保不同的 SM 访问不同的 DRAM 内存条，而不是同时访问同一个内存条，以确保我们在这些负载期间最大化内存吞吐量。如果没有`blockIdx.x`偏移量，所有同时运行的线程块将同时访问同一个地址。由于整个算法是计算而不是带宽限制，这绝对是一个小的优化。可悲的是，它使代码更加混乱。

2.  The sum is across `threadIdx.y`, as you say, but each thread needs to do a separate sum (each thread computes gravitation for a separate body). Therefore we need to use `threadIdx.x` to index the right column of the (conceptually 2D) shared memory array.

To Answer SystmD's question in his (not really correct) answer, `gridDim.y` is only 1 in the (default/common) 1D block case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T09:19:57.110

1）数组SharedPos在每个block的线程同步之前加载到每个block（即每个tile）的共享内存中（用__syncthreads()）。根据算法，blockIdx.x 是图块的索引。

每个线程（索引 threadIdx.x threadIdx.y）加载共享数组 SharedPos 的一部分。blockIdx.x 指的是 tile 的索引（没有多线程）。

2）acc是body索引blockIdx.x * blockDim.x + threadIdx.x的float3（见IntegrateBodies函数开头）

在 q>4 (128 body,p =16,q=8 gridx=8) 的总和期间，我发现 multithreadBodies=true 存在一些问题。（使用 GTX 680）。有些总和没有对整个 blockDim.y 完成......

我更改了代码以避免这种情况，它可以工作，但我真的不知道为什么......

```
if (multithreadBodies)
{
    SX_SUM(threadIdx.x, threadIdx.y).x = acc.x;
    SX_SUM(threadIdx.x, threadIdx.y).y = acc.y;
    SX_SUM(threadIdx.x, threadIdx.y).z = acc.z;

    __syncthreads();

        for (int i = 0; i < blockDim.y; i++) 
        {
            acc.x += SX_SUM(threadIdx.x,i).x;
            acc.y += SX_SUM(threadIdx.x,i).y;
            acc.z += SX_SUM(threadIdx.x,i).z;
        }

} 
```

另一个问题：在第一个循环中：

```
for (int tile = blockIdx.y; tile < numTiles + blockIdx.y; tile++) 
{
} 
```

我不知道为什么从 grid.y=1 开始使用 blockIdx.y。

3) 对于更快的代码，我使用异步 H2D 和 D2D 内存副本（我的代码仅使用引力内核）。

# java - 2 维基于瓦片的游戏：每个瓦片作为一个对象不切实际？

> ID：11389035
> 
> 赞同：1
> 
> 时间：2012-07-09T04:20:14.727
> 
> 标签：java, opengl, lwjgl, multidimensional-array

几个月来，我一直在尝试各种方法来创建基于图块的二维游戏。我一直让每个瓦片成为“瓦片”类的单独对象。瓦片对象存储在对象的二维数组中。这已被证明是非常不切实际的，主要是在同时渲染许多图块的性能方面。我通过只允许渲染玩家一定距离内的瓷砖来帮助实现这一点，但这也不是那么好。当我尝试在游戏中编辑磁贴的值时，我也遇到了对象返回空指针异常的问题。这与 2D 数组中的对象未正确初始化有关。

还有其他更简单的方法吗？我无法想象每个基于图块的游戏都使用这种确切的方式，我一定忽略了一些东西。

编辑：也许 LWJGL 不是要使用的正确库？我在使用 LWJGL 实现字体系统时遇到了类似的问题……输入超过一个句子会使 FPS 降低 100 甚至更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:06:58.450

对于静态对象（不去任何地方，留在原地）1 tile = 1 object 是可以的。这就是在 Wolf3d 中完成的方式。对于移动对象，您有多种选择。

如果您真的想要，您可以将对象子部分存储在相邻的单元格/图块中，当一个对象没有完全包含在其中一个中并且跨越一个或多个单元格/图块边界时。但这可能不太方便，因为您需要动态地将对象拆分为多个部分。

更合理的方法是根本不将移动对象存储在单元格/图块中，并或多或少独立于静态对象来处理它们。但是随后您将需要一些代码来确定对象的可见性。实际上，在图形中最基本的性能问题来自于不必要的计算和渲染。通常，您甚至不想尝试渲染不可见的内容。同样，如果某些计算（尤其是复杂的计算）可以移到最内层循环之外，它们应该是。

除此之外，很难给出任何具体的建议，因为关于你在做什么、你是如何做的以及查看实际代码的细节如此之少。你真的应该试着把你的问题具体化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:10:24.713

Tile 对象的二维数组应该没问题........这是大多数 2D 游戏使用的，您当然应该能够从 OpenGL / LWJGL 中获得足够好的性能来以良好的速度渲染它（ 100FPS+）。

检查事项：

*   确保您正在剪辑以仅显示可见的图块集（根据屏幕宽度和高度以及播放器的位置）
*   确保绘制每个图块的代码快速......理想情况下，您应该为每个图块只绘制一个带纹理的正方形。特别是，您不应该在渲染代码中针对每个图块执行任何复杂的操作。
*   如果你很聪明，你可以在一个 OpenGL 调用中使用 VBO 绘制多个图块/巧妙地使用纹理坐标等。但这对于基于图块的游戏来说可能是不必要的。

# mysql - 负 INNER JOIN [没有 LEFT JOIN & IS NULL]

> ID：11389041
> 
> 赞同：3
> 
> 时间：2012-07-09T04:20:55.530
> 
> 标签：mysql, inner-join

我有 2 个带有 tth 散列的表，我需要获取它们中的哪一个，它们存在于第一个表中但不存在于第二个表中。我会尝试这样的事情：

```
SELECT f.*
FROM files as f
LEFT JOIN trans as t ON t.tth=f.tth
WHERE t.id IS NULL 
```

但它的工作速度非常慢，第一个表 65k 行，第二个表 130k 行，所以查询工作约 5 分钟。这里存在另一种方式吗？谢谢。

PS 两个表中的所有列都有索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:42:28.300

谢谢，[OMG Ponies](https://stackoverflow.com/users/135152/omg-ponies)，我阅读了链接上的一篇文章，以及使用 NOT IN 的一些优化方法，查询速度约为 0.6 秒。

```
 SELECT f.*
    FROM files as f
    WHERE 
    f.tth NOT IN (
      SELECT trans.tth
      FROM trans as t
-- We do not need to look entries across entire table, only from already matched, so create selection "limits" with INNER JOIN.
      INNER JOIN files ON files.tth=t.tth
    ) 
```

# php - 具有特定大小和边界检测的句子

> ID：11389048
> 
> 赞同：0
> 
> 时间：2012-07-09T04:22:02.563
> 
> 标签：php, regex, size, boundary, sentence

这是我的问题：我有一个大字符串（近 8000 个字符），我想要两件事：

1.  检测像“。”这样的句子边界 和
2.  有不超过 600 个字符的句子

我知道在某些情况下不可能两者兼得。在这种情况下，找到一个空格并拆分句子。

***ridgerunner***为条件 1 提供的**这个解决方案就像一个魅力，请参阅原始链接 (** [http://goo.gl/PqI6d](http://goo.gl/PqI6d) )，但它通常输出大于 600 个字符的句子。有光吗？？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:14:19.293

Tks nhahtdh。请看看我是否遗漏了什么。以下是我的字符串的摘录和使用您的建议的输出。

```
<?php 
    $ptn = "/(?:[^.]{1,600}(?: |\.)|\w{600,}(?: |\.)?)/";
    $str = "Amblyopia occurs when the nerve pathway from one eye to the brain does not develop during childhood. This occurs because the abnormal eye sends a blurred image or the wrong image to the brain. This confuses the brain, and the brain may learn to ignore the image from the weaker eye. Strabismus is the most common cause of amblyopia. There is often a family history of this condition. The term "lazy eye" refers to amblyopia, which often occurs along with strabismus. However, amblyopia can occur without strabismus and people can have strabismus without amblyopia.First, any eye condition that is causing poor vision in the amblyopic eye (such as cataracts) needs to be corrected. Children with a refractive error (nearsightedness, farsightedness, or astigmatism) will need glasses. Next, a patch is placed on the normal eye. This forces the brain to recognize the image from the eye with amblyopia. Sometimes, drops are used to blur the vision of the normal eye instead of putting a patch on it. Children whose vision will not fully recover, and those with only good eye due to any disorder should wear glasses with protective polycarbonate lenses. Polycarbonate glasses are shatter- and scratch-resistant. Children who get treated before age 5 will usually recover almost completely normal vision, although they may continue to have problems with depth perception. Delaying treatment can result in permanent vision problems. After age 10, only a partial recovery of vision can be expected. Early recognition and treatment of the problem in children can help to prevent permanent visual loss. All children should have a complete eye examination at least once between ages 3 and 5\. Special techniques are needed to measure visual acuity in a child who is too young to speak. Most eye care professionals can perform these techniques.";
    preg_split($ptn, $str, -1, PREG_SPLIT_NO_EMPTY);
    print_r($result);
    ?> 
```

结果：我需要小于 600 字符的字符串中的句子

```
 Array
(
[0] => childhood.
[1] => brain.
[2] => eye.
[3] => amblyopia.
[4] => condition.
[5] => strabismus.
[6] => amblyopia.
[7] => corrected.
[8] => glasses.
[9] => eye.
[10] => amblyopia.
[11] => it.
[12] => lenses.
[13] => scratch-resistant.
[14] => perception.
[15] => problems.
[16] => expected.
[17] => loss.
[18] => 5.
[19] => speak.
[20] => techniques
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:43:14.737

你可能会更好地匹配字符串。您的匹配正则表达式可能如下所示：

`(.{0,600}?\.)|(.{0,600}(?=\ ))`

简而言之，您首先在句点之前寻找尽可能小的字符串。如果没有，则查找尽可能长的字符串，后跟空格。然后下一场比赛将从你离开的地方开始。

请注意，这是通用正则表达式。您的 php 实现可能会有所不同。

# php - 如何通过php跳过段落中的某些单词

> ID：11389049
> 
> 赞同：1
> 
> 时间：2012-07-09T04:22:15.210
> 
> 标签：php, javascript, mysql, html, css

我在数据库中有一段类似的

> $str =“这是我很快显示的一段，当我点击更多视图时，它将完全显示我正在使用 ajax 并检索它”

我像这样展示

> 这是我很快展示的一段

用于显示第一个单词的 php 是

```
function chop_string($str, $x)// i called the function  
{
    $string = strip_tags(stripslashes($string)); 
    return substr($string, 0, strpos(wordwrap($string, $x), "\n"));
} 
```

当用户点击`view more`它时，它将显示其余部分，但问题在于如何跳过它`this is a paragraph i show shortly` 并显示其余部分

我想`$x`在点击后显示段落`view more`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T04:31:57.707

对于按单词数量的字符截断字符串：

1.  这个[SO question](https://stackoverflow.com/questions/79960/how-to-truncate-a-string-in-php-to-the-word-closest-to-a-certain-number-of-chara)可能会有所帮助。
2.  就像[这个](https://stackoverflow.com/questions/972010/shorten-string-in-php-full-words-only)一样。
3.  [这是一些](http://www.lullabot.com/articles/trim-a-string-to-a-given-word-count)专门按字数计算的代码。

至于在单击链接时显示更多文本，我建议从数据库中加载一次字符串并格式化它的输出。如果你的字符串是：

> 这是从我的数据库中提取的整个字符串。

那么下面的代码将被格式化为：

HTML

```
<p class="truncate">This is the whole string <a class="showMore">Show more...</a><span> pulled from my database.</span></p> 
```

CSS

```
p.truncate span { display: none; } 
```

这样，您可以使用 Javascript（最好通过我为下面的代码选择的 jQuery 之类的库）来隐藏或显示更多您的解决方案，而无需使用 AJAX 发出第二个数据库请求。以下 Javascript 将满足您的要求：

```
$("a.showMore").on("click", function() {
    $(this).parent().find("span").contents().unwrap();
    $(this).remove();
}); 
```

[这是一个可以玩的小提琴！](http://jsfiddle.net/bC8jB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T05:44:06.263

我在这里做了一个例子：[shaquin.tk/experiments/showmore.html](http://shaquin.tk/experiments/showmore.html)。

您可以查看源代码以查看其背后的所有代码。PHP 代码显示在页面上。

如果您不想在`Show more`单击时显示起始字符串，请将 JavaScript 函数替换为`showMore`：

```
function showMore() {
    if(state == 0) {
        state = 1;
        document.getElementById('start').style.display = 'none';
        document.getElementById('end').style.display = 'block';
        document.getElementById('showmore').innerHTML = 'Show less';
        document.getElementById('text-content').className = 'expanded';
        document.getElementById('start').className = 'expanded';
    } else {
        state = 0;
        document.getElementById('start').style.display = 'block';
        document.getElementById('end').style.display = 'none';
        document.getElementById('showmore').innerHTML = 'Show more';
        document.getElementById('text-content').className = '';
        document.getElementById('start').className = '';
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T05:04:10.720

使用此功能：

```
function trim_text($string, $word_count)
{
   $trimmed = "";
   $string = preg_replace("/\040+/"," ", trim($string));
   $stringc = explode(" ",$string);
   //echo sizeof($stringc);
   //echo "&nbsp;words <br /><br />";
   if($word_count >= sizeof($stringc))
   {
       // nothing to do, our string is smaller than the limit.
     return $string;
   }
   elseif($word_count < sizeof($stringc))
   {
       // trim the string to the word count
       for($i=0;$i<$word_count;$i++)
       {
           $trimmed .= $stringc[$i]." ";
       }

       if(substr($trimmed, strlen(trim($trimmed))-1, 1) == '.')
         return trim($trimmed).'..';
       else
         return trim($trimmed).'...';
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T04:31:50.893

```
$wordsBefore = 3;
$numOfWords = 7;
implode(' ', array_slice(explode(' ', $sentence), $wordsBefore, $wordsBefore+$numOfWords)); 
```

如果你将它保存到一个名为 sentence 的变量中，这将返回一个句子的前 7 个单词。

# asp.net - Linq，过滤结果

> ID：11389050
> 
> 赞同：0
> 
> 时间：2012-07-09T04:22:23.250
> 
> 标签：asp.net, asp.net-mvc-3, linq, entity-framework-4

```
var result = (from p in productInQuery
  join o in orderInfoQuery on p.refNo equals o.refNo
  join x in productQuery on p.productNo equals x.no
  join t in productOutQuery on p.no equals t.productInNo into productIn
  from t in productIn.DefaultIfEmpty()
  orderby o.processDate descending
  select new
  {
      qty = p.qty,
      dateIn = o.processDate,
      dateOut = (DateTime?)(from m in orderInfoQuery where m.refNo == t.refNo select m.processDate).FirstOrDefault(),
      etaDate = (DateTime?)(from w in orderInfoQuery where w.refNo == t.refNo select w.eta).FirstOrDefault(),  
  })

   if (etaDate != DateTime.MinValue)
   {
      result = result.Where(x => x.etaDate == etaDate);  // Filter result
   }

   return result.ToArray(); 
```

我想像上面那样过滤 linq 结果，但它不起作用。

任何人都知道，如何使它工作？

[编辑]

出现错误消息，

```
Server Error in '/' Application.
Specified method is not supported.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.NotSupportedException: Specified method is not supported.

Source Error:

Line 147:            result = result.Where(s => s.etaDate == null);
Line 148:
Line 149:            return result.ToArray();
Line 150:        }
Line 151:    }

Source File: WebUI\Models\Reports.cs    Line: 149

Stack Trace:

[NotSupportedException: Specified method is not supported.]
   MySql.Data.Entity.SqlGenerator.Visit(DbApplyExpression expression) +54
   System.Data.Common.CommandTrees.DbApplyExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +65
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +53
   MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression) +132
   System.Data.Common.CommandTrees.DbProjectExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +65
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +53
   MySql.Data.Entity.SelectGenerator.Visit(DbFilterExpression expression) +131
   System.Data.Common.CommandTrees.DbFilterExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +65
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +53
   MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression) +132
   System.Data.Common.CommandTrees.DbProjectExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +65
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +53
   MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression) +132
   System.Data.Common.CommandTrees.DbProjectExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +65
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +53
   MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression) +132
   System.Data.Common.CommandTrees.DbProjectExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +65
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +53
   MySql.Data.Entity.SelectGenerator.Visit(DbSortExpression expression) +168
   System.Data.Common.CommandTrees.DbSortExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type) +65
   MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type) +53
   MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression) +132
   System.Data.Common.CommandTrees.DbProjectExpression.Accept(DbExpressionVisitor`1 visitor) +23
   MySql.Data.Entity.SelectGenerator.GenerateSQL(DbCommandTree tree) +169
   MySql.Data.MySqlClient.MySqlProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree) +559
   System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree) +147
   System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree) +521

[EntityCommandCompilationException: An error occurred while preparing the command definition. See the inner exception for details.]
   System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree) +1267
   System.Data.EntityClient.EntityProviderServices.CreateCommandDefinition(DbProviderFactory storeProviderFactory, DbCommandTree commandTree) +97
   System.Data.EntityClient.EntityProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree) +198
   System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree) +147
   System.Data.Objects.Internal.ObjectQueryExecutionPlan.Prepare(ObjectContext context, DbQueryCommandTree tree, Type elementType, MergeOption mergeOption, Span span, ReadOnlyCollection`1 compiledQueryParameters) +371
   System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption) +642
   System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) +149
   System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() +44
   System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator() +40
   System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator() +40
   System.Linq.Buffer`1..ctor(IEnumerable`1 source) +205
   System.Linq.Enumerable.ToArray(IEnumerable`1 source) +78
   BseWms.WebUI.Models.Reports.GetAllTransaction(TransactionSearchModel searchModel) in C:\Users\mark\Documents\Visual Studio 2010\Projects\BseWms\BseWms.WebUI\Models\Reports.cs:149
   BseWms.WebUI.Controllers.ReportsController.GetAllTransaction(TransactionSearchModel searchModel) in C:\Users\mark\Documents\Visual Studio 2010\Projects\BseWms\BseWms.WebUI\Controllers\ReportsController.cs:187
   lambda_method(Closure , ControllerBase , Object[] ) +108
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8836977
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:06:16.550

所以您确实意识到，在您向我们展示的代码中，etaDate 并未显示为创建或分配，对吗？您在评论中提到它，就像它在那里一样（除非我只是想念它），我认为这增加了混乱。就我个人而言，我发现为不同的目的重新使用变量名相当令人困惑。在您的匿名类型中，您创建一个名为 etaDate 的字段，并将其与我假设的名为 etaDate 的方法的变量进行比较。也许将过滤器一重命名为 etaFilterDate，会有所帮助。如果没有别的，它肯定会对这个问题有所帮助。

尝试使用调试器并在 Where() 子句上停止并检查结果和 etaDate 的内容。我怀疑你会发现没有与 etaDate 完全匹配的 x.etaDate。请记住，日期和时间都必须匹配。根据您的评论，我相信您的 etaDate 会有一个午夜的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:30:59.170

我假设您在第 17 行得到零结果？这种比较对我来说是正确的，可以选择`etaDate`匹配的所有结果`etaDate`。所以我猜你的问题是前面的查询没有找到任何匹配的记录`etaDate`——你能仔细检查一下是不是这样？

# objective-c - IOS FBConnect with Graph 就像 Facebook 中的公开照片

> ID：11389051
> 
> 赞同：0
> 
> 时间：2012-07-09T04:22:26.997
> 
> 标签：objective-c, ios, facebook

```
NSString *graphPath=@"http://graph.facebook.com/#PICTUREOBJECTID#/likes";
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   nil];
[shared requestWithGraphPath:graphPath andParams:params andHttpMethod:@"POST" andDelegate:self];` 
```

我想喜欢一张照片，它给了我这个错误。提前致谢。

> 错误详细信息：错误域 = facebookErrDomain 代码 = 10000 “操作无法完成。（facebookErrDomain 错误 10000。）”

# javascript - jquery 数据标签

> ID：11389052
> 
> 赞同：0
> 
> 时间：2012-07-09T04:22:39.303
> 
> 标签：javascript, jquery

我有以下设置

```
 <div onclick="EditCalendarEvent('@_schedulerEvent.SchedulerID','@_schedulerEvent.SchedulerItemID', event)" 
         class="ScheduleEvent_Draggable ScheduleEvent" 
         data-schedulerID="@_schedulerEvent.SchedulerID"
         data-schedulerItemID="@_schedulerEvent.SchedulerItemID">        
      @_schedulerEvent.Subject
    </div>

    alert($(ui.draggable).attr("data-schedulerID"));
    alert($(ui.draggable).data("schedulerID")); 
```

第一个警报返回正确的 ui，第二个警报语句返回未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:30:26.913

您使用的是哪个版本的 jQuery。[http://api.jquery.com/data/](http://api.jquery.com/data/)

请使用最新版本的 jQuery。这从 1.4 版本开始生效。请访问以上链接了解更多信息。

# javascript - 时间 jQuery fadeTo 效果？

> ID：11389060
> 
> 赞同：0
> 
> 时间：2012-07-09T04:23:54.717
> 
> 标签：javascript, jquery, gif, animated-gif, fadeto

目前我正在使用 jQuery`fadeTO`淡入 div。但是，我在这里有一个时间问题。我有一个动画 GIF 文件，我想用 jQuery`fadeTO`效果来计时。

我试图使用`window.onload`在页面完全加载之前不触发脚本，但是从技术上讲，它在页面加载之前不会触发脚本。根据用户的互联网连接，这可能有很好的时机或推迟时间。我想用 GIF 动画对效果进行计时，以尽可能精确地计时。这是我正在使用的当前脚本：

```
var $j = jQuery.noConflict();
   window.onload = function(){ 
    $j('#fadein').fadeTo(7500, 1, function() {
  });       
 }; 
```

我的问题是如何在 GIF 完全加载并在屏幕上显示后立即触发脚本？我的想法是，一旦加载了 GIF 并且脚本在 GIF 执行时启动，我可以用 GIF 计时脚本以正确淡入。

我对如何更好地安排这些时间的其他想法持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:27:33.450

对 JavaScript 和动画 GIF 进行可靠的计时是不可能的。

获得任何接近的唯一方法是将各个帧作为单独的图像（如果可以的话，也可以作为精灵表），然后在 JavaScript 中手动为这些帧设置动画。

实际上，我为我制作的课程网站提供了一个示例：[链接](http://adamhaskell.net/cw/)和[相关的 JS 文件](http://adamhaskell.net/cw/js/avatar.js)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:30:38.143

这是加载图像后执行代码的示例。

```
image=new Image();
image.src="mygif.gif"
image.onload=function(){
    alert('image Loaded');
} 
```

# java - 在 JScrollPane 中调整 JPanel 的大小 - 从不小于视口

> ID：11389061
> 
> 赞同：0
> 
> 时间：2012-07-09T04:23:55.230
> 
> 标签：java, swing, jpanel, jscrollpane

我创建了一个 JPanel 和 JScrollPane ，如下所示：

```
JPanel panel = new JPanel();
panel.setPreferredSize(5000, 5000);
JScrollPane scrollPane = new JScrollPane(panel, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
scrollPanel.getViewport().setBackground(Color.GRAY); //panel is white 
```

我将使用事件处理程序来动态调整面板的大小。问题是，有时面板比视口小。我会像这样设置面板的大小：

```
panel.setPreferredSize(10, 10); //Just an example 
```

但面板永远不会小于视口。我尝试使用

```
panel.setSize(10, 10); 
```

我看到了灰色闪烁（视口的背景显示出来），这表明面板*的*大小正在调整到我想要的大小，但随后又增长到了视口的大小。我怎么能阻止这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:53:33.713

要控制 JViewport 中视图的大小，让它实现[Scrollable](http://docs.oracle.com/javase/7/docs/api/javax/swing/Scrollable.html)接口。没有，它总是被强制到视口的大小。

# windows-phone-7 - 如何使用 HtmlAgilityPack 解析 Html 以获取图像

> ID：11389067
> 
> 赞同：0
> 
> 时间：2012-07-09T04:25:17.553
> 
> 标签：windows-phone-7

我正在使用 WebClient 下载网页的 html。如何解析以获取图像标签和图像的 src，以便我可以下载图像。谢谢你的帮助。
--- 更新
我下载了 HtmlagilityPack。当我在我的 windows phone 项目中使用添加引用时，我收到了这个错误消息：

HtmlAgilityPAck 不是使用 windows phone 运行时构建的。Windows 项目仅适用于 windows phone 程序集

如何解决此问题，以便我可以按如下方式使用 webclient？谢谢。

```
var client = new WebClient();   
client.DownloadStringCompleted += client_DownloadStringCompleted;  
client.DownloadStringAsync(new Uri(strUrl));

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:53:01.943

您需要获取`HtmlAgilityPack`并构建 HAPPhone 项目的源代码。您可以在 WP7 项目中引用生成的程序集。[更多细节](https://stackoverflow.com/a/6601214/63225)。

# vba - 获取带有 Unicode 文件名的完整路径

> ID：11389069
> 
> 赞同：5
> 
> 时间：2012-07-09T04:25:37.280
> 
> 标签：vba, unicode, path

我有一个简短版本或 DOS 格式的路径（例如**“C:/DOCUME~1”**）并且想要获取它的完整路径/长路径（例如**“C:/Documents And Settings”**）。

我试过 GetLongPathName api。有效。但是当处理 unicode 文件名时，它会失败。

```
Private Declare Function GetLongPathName Lib "kernel32" Alias _
    "GetLongPathNameA" (ByVal lpszShortPath As String, _
    ByVal lpszLongPath As String, ByVal cchBuffer As Long) As Long 
```

我尝试为 GetLongPathNameW 取别名，但它似乎什么都不做，对于 Unicode 和非 Unicode 文件名，总是返回 0。在 MSDN 中只有一篇关于 C/C++ 的 GetLongPathNameW 的文章，而不是任何 VB/VBA 的文章。我可以做错什么吗？

这种情况有什么解决办法吗？我在 Google 和 StackOverflow 上花了几个小时，但找不到。

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T22:00:31.223

这对你有用吗？我已将文件路径转换为短路径名，然后再次将其转换回来，即使是 unicode（例如 C:/Tö+）也会给出正确的字符串

```
Private Declare Function GetShortPathName Lib "kernel32" Alias "GetShortPathNameA" _
    (ByVal lpszLongPath As String, ByVal lpszShortPath As String, ByVal lBuffer As Long) As Long
Private Declare Function GetLongPathName Lib "kernel32" Alias "GetLongPathNameA" _
    (ByVal lpszShortPath As String, ByVal lpszLongPath As String, ByVal cchBuffer As Long) As Long

Public Function GetShortPath(ByVal strFileName As String) As String
    'KPD-Team 1999
    'URL: [url]http://www.allapi.net/[/url]
    'E-Mail: [email]KPDTeam@Allapi.net[/email]
    Dim lngRes As Long, strPath As String
    'Create a buffer
    strPath = String$(165, 0)
    'retrieve the short pathname
    lngRes = GetShortPathName(strFileName, strPath, 164)
    'remove all unnecessary chr$(0)'s
    GetShortPath = Left$(strPath, lngRes)
End Function

Public Function GetLongPath(ByVal strFileName As String) As String
    Dim lngRes As Long, strPath As String
    'Create a buffer
    strPath = String$(165, 0)
    'retrieve the long pathname
    lngRes = GetLongPathName(strFileName, strPath, 164)
    'remove all unnecessary chr$(0)'s
    GetLongPath = Left$(strPath, lngRes)
End Function

Private Sub Test()
    shortpath = GetShortPath("C:/Documents And Settings")

    Longpath = GetLongPath(shortpath)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T22:18:59.523

要使用 vb6/vba 中的 W 函数，您需要声明所有字符串参数：

```
Private Declare Function GetLongPathName Lib "kernel32" Alias "GetLongPathNameW" _
  (ByVal lpszShortPath As Long, _
   ByVal lpszLongPath As Long, _
   ByVal cchBuffer As Long) As Long 
```

并通过`StrPtr(a_string)`而不是仅仅`a_string`.

所以如果你有：

```
dim s_path as string
dim l_path as string

s_path = "C:\DOCUME~1"
l_path = string$(1024, vbnullchar)

GetLongPathNameA s_path, l_path, len(l_path) 
```

它会变成

```
dim s_path as string
dim l_path as string

s_path = "C:\DOCUME~1"
l_path = string$(1024, vbnullchar)

GetLongPathNameW strptr(s_path), strptr(l_path), len(l_path) 
```

# visual-studio-2010 - 如何在安装程序项目中包含项目的所有输出？

> ID：11389072
> 
> 赞同：6
> 
> 时间：2012-07-09T04:25:40.300
> 
> 标签：visual-studio-2010, wix, wix3.5, paraffin

我需要在安装程序中包含一些程序项目的所有输出......我的问题类似于这篇文章中的问题：[如何将整个目录或项目输出添加到 WiX 包](https://stackoverflow.com/questions/414685/how-to-add-a-whole-directory-or-project-output-to-wix-package)

但是，恐怕我并不真正理解此链接中给出的答案。从我所做的所有阅读中，我认为我需要使用石蜡来做到这一点。但是，是否有使用石蜡的“从头开始，操作方法”资源？

我已阅读此页面： http: [//www.wintellect.com/CS/blogs/jrobbins/archive/2008/12/22/paraffin-3-0-now-with-full-wix-3-0-support。 aspx](http://www.wintellect.com/CS/blogs/jrobbins/archive/2008/12/22/paraffin-3-0-now-with-full-wix-3-0-support.aspx) 和其中一篇文章提到从 bat 文件中调用石蜡。这是在他们的安装程序中“使用石蜡”的方式吗？如果它有所作为，我一直在使用 Visual Studio 来处理这个项目，而且我也不确定如何在 Visual Studio 中使用命令行。有没有人有一个非常新的初学者的任何资源？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:01:46.480

我最终手动包含了每个 .dll 和 .exe，因为它们不会经常更改。以这种风格格式化它们相当容易：

```
`<File Id="WhateverId" Name="NameToDisplayAfterInstall"      Source="$(var.ProjectName.TargetDir)Filename.ext" />` 
```

我使用 Excel 快速轻松地格式化文件列表。我将所有这些 File 标签放在`<DirectoryRef Id="INSTALLLOCATION">` 标签中。

我确实弄清楚了如何通过使用 Heat（不是石蜡）并收集目录而不是项目来从项目输出中刮取所有 dll 和 exe。收获一个项目只会产生主要的 exe 和 dll。至少在我的情况下，获取目录的问题在于我最终得到了很多我不想要的多余文件（如 .pdb 和 .xml）。

# python - 使用 Python 解析大型 xml 文件 - etree.parse 错误

> ID：11389073
> 
> 赞同：11
> 
> 时间：2012-07-09T04:25:43.827
> 
> 标签：python, xml, lxml

尝试使用 lxml.etree.iterparse 函数解析以下 Python 文件。

“样本输出.xml”

```
<item>
  <title>Item 1</title>
  <desc>Description 1</desc>
</item>
<item>
  <title>Item 2</title>
  <desc>Description 2</desc>
</item> 
```

我尝试了[Parsing Large XML file with Python lxml and Iterparse中的代码](https://stackoverflow.com/questions/7182234/parsing-large-xml-file-with-python-lxml-and-iterparse)

在 etree.iterparse(MYFILE) 调用之前，我做了 MYFILE = open("/Users/eric/Desktop/wikipedia_map/sampleoutput.xml","r")

但它出现了以下错误

```
Traceback (most recent call last):
  File "/Users/eric/Documents/Programming/Eclipse_Workspace/wikipedia_mapper/testscraper.py", line 6, in <module>
    for event, elem in context :
  File "iterparse.pxi", line 491, in lxml.etree.iterparse.__next__ (src/lxml/lxml.etree.c:98565)
  File "iterparse.pxi", line 543, in lxml.etree.iterparse._read_more_events (src/lxml/lxml.etree.c:99086)
  File "parser.pxi", line 590, in lxml.etree._raiseParseError (src/lxml/lxml.etree.c:74712)
lxml.etree.XMLSyntaxError: Extra content at the end of the document, line 5, column 1 
```

有任何想法吗？谢谢你！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T05:01:29.993

问题是，如果 XML 没有一个顶级标记，那么它的格式就不是很好。您可以通过将整个文档包装在`<items></items>`标签中来修复您的示例。您还需要`<desc/>`标签来匹配您正在使用的查询 ( `description`)。

以下文档使用您现有的代码产生正确的结果：

```
<items>
  <item>
    <title>Item 1</title>
    <description>Description 1</description>
  </item>
  <item>
    <title>Item 2</title>
    <description>Description 2</description>
  </item>
</items> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T04:39:49.620

据我所知，xml.etree.ElementTree 通常希望 XML 文件包含一个“根”元素，即一个包含完整文档结构的 XML 标记。从您发布的错误消息中，我认为这也是这里的问题：

“第 5 行”指的是第二个`<item>`标签，所以我猜 Python 会抱怨在假定的根元素（即第一个`<item>`标签）关闭之后有更多数据。

# blogs - 语法荧光笔在博客提要和移动版本中不起作用

> ID：11389075
> 
> 赞同：0
> 
> 时间：2012-07-09T04:26:04.230
> 
> 标签：blogs, blogger, syntaxhighlighter

我一直在为托管在 Blogger.com 上的博客使用[语法荧光笔](http://alexgorbatchev.com/SyntaxHighlighter/)，但最近我注意到语法荧光笔突出显示的代码没有出现在博客的提要和移动版本上。我试图通过互联网搜索，但找不到任何有用的信息。我是博主/javascript 的新手，不知道为什么我看不到格式化的代码。

任何类型的信息都将在这里受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:51:29.150

经过一番研究，我发现了 prettyprint 语法荧光笔，它也在 Google 网站上使用，例如 developer.android.com。我喜欢它，它非常易于使用且重量轻。

[美化语法高亮博客](http://errorbuster.blogspot.com/2012/07/prettify-syntax-highlighter-for-blogger.html)中显示了 inetgrate 的步骤。

# codeigniter - 无法使用 codeigniter 连接到数据库

> ID：11389078
> 
> 赞同：0
> 
> 时间：2012-07-09T04:26:42.133
> 
> 标签：codeigniter, database-connection

我知道这听起来所以转贴好几次。但我无法解决它。

我尝试将我的应用程序连接到 mysql，这些是我尝试过的（我只尝试了这些选项中的一个，而不是两个）：

1.  `$autoload['libraries'] = array('database');`开`application\config\autoload.php`，但我得到了`Fatal error: Call to a member function get() on a non-object in /Users/zakkafm/Sites/CodeIgniter/application/models/My_models.php on line 15`

2.  `$this->load->database();`on `application\models\My_models.php`on `__construct()`（我也添加了`parent::__construct()`，但我得到了`Fatal error: Call to a member function database() on a non-object in /Users/zakkafm/Sites/CodeIgniter/application/models/My_model.php on line 7`

那么，这里有什么问题呢？

编辑：这是我的`database.php`样子。

```
$active_group = 'default';
$active_record = TRUE;
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'trial';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

解决！！！

毕竟，这都是因为我在 Eclipse 上添加的自动完成功能`system/core/Controller.php`和`system/core/Model.php`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:55:14.923

在你`My_models.php`身上，你不应该打电话`$this->load->database();`应该只有：

```
class My_models extends CI_Model {

    /**
     * Constructor
     */
    function __construct()
    {
        parent::__construct();
    }

    function something(){
    // your model code goes here
    }

} 
```

此外，您只需要启用 就`autoload`可以了（请记住，需要为 PHP 加载**MYSQL库。**

而且您可能在这里遇到错误（看不到您的代码，所以不确定）：

```
Fatal error: Call to a member function get() on a non-object in      
/Users/zakkafm/Sites/CodeIgniter/application/models/My_models.php on line 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:47:59.080

嗯..，我想你不必添加

```
$this->load->database(); 
```

在您的 My_models.php 上，因为我知道它会自动连接到您在 database.php 文件中设置的数据库。因此，将其从 My_models.php 文件中删除并重试。

希望能帮助到你 ：）

# java - 如何在 shell 脚本更新文件时监视 java 中的文件

> ID：11389089
> 
> 赞同：1
> 
> 时间：2012-07-09T04:28:22.187
> 
> 标签：java, file, shell, concurrency

我有一个将由 shell 脚本更新的日志文件。这个shell脚本有很多操作，每次操作后都会更新文件，表示操作已经完成。现在，我需要从 servlet 中“监听”这个文件，并以与日志记录相同的方式将响应发送回最终用户（即操作 A 完成，操作 B 完成等等）。现在，如果 servlet 和 shell 脚本都尝试同时打开文件，我相信我会得到一些错误。在java中，我想我可以将它作为IOException处理并继续尝试读取文件，以便在shell脚本不更新文件时它可以工作。我应该如何在 shell 脚本中处理这个问题？如果我在java中以只读模式打开文件会有帮助吗？另请注意，shell 脚本只写不读，servlet 只读不读

此外，欢迎提出有关实施此工作流程的更好方法的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:32:08.020

您使用的是 Java 7 吗？如果是这样，那么新的 Watcher 服务可能会为您工作。我没有亲自使用它，但想法是当文件/文件夹发生更改时，您会在代码中收到通知。这可能会使您的代码比简单地重复轮询文件更干净。

[http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:03:45.373

由于您不能使用 WatchService，您可以使用`file.lastModified()`.

如果您定期执行此操作，则可以比较结果，如果它们发生更改，则说明文件已被 shell 脚本修改。每次轮询时可能需要创建一个新的 File 对象，但由于根本没有打开文件进行读取，因此不会出现访问问题。

但是，即使您打开文件并比较其内容，也不会遇到任何访问问题，除非您的 shell 以独占访问权限打开文件。

# android - 使用增强的图库显示图像

> ID：11389091
> 
> 赞同：0
> 
> 时间：2012-07-09T04:28:35.960
> 
> 标签：android

我试图寻找解决方案，但我仍然无法解决它并且我`R.java`无法生成`R.id.picture`. 我可以知道我哪里做错了吗？

```
/**
 * PicSelectActivity presents image gallery - user can select new images to
 * Display within scrolling thumbnail gallery - user can select individual image
 * To display at larger size
 * 
 * Sue Smith Mobiletuts+ Tutorial - Importing and Displaying Images with the
 * Android Gallery June 2012
 */

public class FxPhoto extends Activity {

    // variable for selection intent
    private final int PICKER = 1;
    // variable to store the currently selected image
    private int currentPic = 0;
    // adapter for gallery view
    private PicAdapter imgAdapt;
    // gallery object
    private Gallery picGallery;
    // image view for larger display
    private ImageView picView;

    /**
     * instantiate the interactive gallery
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        /*
         * When the user clicks a thumbnail in the gallery it is displayed at
         * larger size
         * 
         * When the user long-clicks a thumbnail they are taken to their chosen
         * image selection activity, either the Android image gallery or a file
         * manager application - on returning the chosen image is displayed
         * within the thumbnail gallery and larger image view
         */

        // call superclass method and set main content view
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // get the large image view
        picView = (ImageView) findViewById(**R.id.picture**);

        // get the gallery view
        picGallery = (Gallery) findViewById(**R.id.gallery**);

        // create a new adapter
        imgAdapt = new PicAdapter(this);
        // set the gallery adapter
        picGallery.setAdapter(imgAdapt);

        // set long click listener for each gallery thumbnail item
        picGallery.setOnItemLongClickListener(new OnItemLongClickListener() {
            // handle long clicks
            public boolean onItemLongClick(AdapterView<?> parent, View v,
                    int position, long id) {
                // update the currently selected position so that we assign the
                // imported bitmap to correct item
                currentPic = position;
                // take the user to their chosen image selection app (gallery or
                // file manager)
                Intent pickIntent = new Intent();
                pickIntent.setType("image/*");
                pickIntent.setAction(Intent.ACTION_GET_CONTENT);
                // we will handle the returned data in onActivityResult
                startActivityForResult(
                        Intent.createChooser(pickIntent, "Select Picture"),
                        PICKER);
                return true;
            }
        });

        // set the click listener for each item in the thumbnail gallery
        picGallery.setOnItemClickListener(new OnItemClickListener() {
            // handle clicks
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                // set the larger image view to display the chosen bitmap
                // calling method of adapter class
                picView.setImageBitmap(imgAdapt.getPic(position));
            }
        });
    }

    /**
     * Base Adapter subclass creates Gallery view - provides method for adding
     * new images from user selection - provides method to return bitmaps from
     * array
     * 
     */
    public class PicAdapter extends BaseAdapter {

        // use the default gallery background image
        int defaultItemBackground;

        // gallery context
        private Context galleryContext;

        // array to store bitmaps to display
        private Bitmap[] imageBitmaps;
        // placeholder bitmap for empty spaces in gallery
        Bitmap placeholder;

        // constructor
        public PicAdapter(Context c) {

            // instantiate context
            galleryContext = c;

            // create bitmap array
            imageBitmaps = new Bitmap[10];
            // decode the placeholder image
            placeholder = BitmapFactory.decodeResource(getResources(),
                    R.drawable.ic_launcher);

            // set placeholder as all thumbnail images in the gallery initially
            for (int i = 0; i < imageBitmaps.length; i++)
                imageBitmaps[i] = placeholder;

            // get the styling attributes - use default Andorid system resources
            TypedArray styleAttrs = galleryContext
                    .obtainStyledAttributes(R.**styleable**.PicGallery);
            // get the background resource
            defaultItemBackground = styleAttrs.getResourceId(
                    R.**styleable**.PicGallery_android_galleryItemBackground, 0);
            // recycle attributes
            styleAttrs.recycle();
        }

        // BaseAdapter methods

        // return number of data items i.e. bitmap images
        public int getCount() {
            return imageBitmaps.length;
        }

        // return item at specified position
        public Object getItem(int position) {
            return position;
        }

        // return item ID at specified position
        public long getItemId(int position) {
            return position;
        }

        // get view specifies layout and display options for each thumbnail in
        // the gallery
        public View getView(int position, View convertView, ViewGroup parent) {

            // create the view
            ImageView imageView = new ImageView(galleryContext);
            // specify the bitmap at this position in the array
            imageView.setImageBitmap(imageBitmaps[position]);
            // set layout options
            imageView.setLayoutParams(new Gallery.LayoutParams(300, 200));
            // scale type within view area
            imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
            // set default gallery item background
            imageView.setBackgroundResource(defaultItemBackground);
            // return the view
            return imageView;
        }

        // custom methods for this app

        // helper method to add a bitmap to the gallery when the user chooses
        // one
        public void addPic(Bitmap newPic) {
            // set at currently selected index
            imageBitmaps[currentPic] = newPic;
        }

        // return bitmap at specified position for larger display
        public Bitmap getPic(int posn) {
            // return bitmap at posn index
            return imageBitmaps[posn];
        }
    }

    /**
     * Handle returning from gallery or file manager image selection - import
     * the image bitmap
     */
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (resultCode == RESULT_OK) {
            // check if we are returning from picture selection
            if (requestCode == PICKER) {

                // the returned picture URI
                Uri pickedUri = data.getData();

                // declare the bitmap
                Bitmap pic = null;
                // declare the path string
                String imgPath = "";

                // retrieve the string using media data
                String[] medData = { MediaStore.Images.Media.DATA };
                // query the data
                Cursor picCursor = managedQuery(pickedUri, medData, null, null,
                        null);
                if (picCursor != null) {
                    // get the path string
                    int index = picCursor
                            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                    picCursor.moveToFirst();
                    imgPath = picCursor.getString(index);
                } else
                    imgPath = pickedUri.getPath();

                // if and else handle both choosing from gallery and from file
                // manager

                // if we have a new URI attempt to decode the image bitmap
                if (pickedUri != null) {

                    // set the width and height we want to use as maximum
                    // display
                    int targetWidth = 600;
                    int targetHeight = 400;

                    // sample the incoming image to save on memory resources

                    // create bitmap options to calculate and use sample size
                    BitmapFactory.Options bmpOptions = new BitmapFactory.Options();

                    // first decode image dimensions only - not the image bitmap
                    // itself
                    bmpOptions.inJustDecodeBounds = true;
                    BitmapFactory.decodeFile(imgPath, bmpOptions);

                    // work out what the sample size should be

                    // image width and height before sampling
                    int currHeight = bmpOptions.outHeight;
                    int currWidth = bmpOptions.outWidth;

                    // variable to store new sample size
                    int sampleSize = 1;

                    // calculate the sample size if the existing size is larger
                    // than target size
                    if (currHeight > targetHeight || currWidth > targetWidth) {
                        // use either width or height
                        if (currWidth > currHeight)
                            sampleSize = Math.round((float) currHeight
                                    / (float) targetHeight);
                        else
                            sampleSize = Math.round((float) currWidth
                                    / (float) targetWidth);
                    }
                    // use the new sample size
                    bmpOptions.inSampleSize = sampleSize;

                    // now decode the bitmap using sample options
                    bmpOptions.inJustDecodeBounds = false;

                    // get the file as a bitmap
                    pic = BitmapFactory.decodeFile(imgPath, bmpOptions);

                    // pass bitmap to ImageAdapter to add to array
                    imgAdapt.addPic(pic);
                    // redraw the gallery thumbnails to reflect the new addition
                    picGallery.setAdapter(imgAdapt);

                    // display the newly selected image at larger size
                    picView.setImageBitmap(pic);
                    // scale options
                    picView.setScaleType(ImageView.ScaleType.FIT_CENTER);
                }
            }
        }
        // superclass method
        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T11:55:01.857

这行得通。

第1步：下载[http://www.androidpeople.com/wp-content/uploads/2010/05/GalleryImageview.zip](http://www.androidpeople.com/wp-content/uploads/2010/05/GalleryImageview.zip)

第 2 步：使用工作版本在此处运行和更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:29:06.737

我也遇到了这个问题，如果你发现类似 import android.R 的东西，看看你的包；删除该行。

# debugging - XNA 游戏通过调试运行得更快

> ID：11389106
> 
> 赞同：2
> 
> 时间：2012-07-09T04:30:32.917
> 
> 标签：debugging, xna

我有一个使用 C#（Visual Studio 2010 express）在 XNA 4.0 中制作的游戏。我的问题是它在调试时比直接运行可执行文件时运行得快得多。我确实尝试切换到发布模式并遇到相同的性能。关于可能导致这种情况的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:12:54.390

确保 XNA 游戏是全屏的。根据我的经验，我注意到窗口模式下的帧减少了。

您还需要使用 Debug -> Start Performance Analysis 检查发生了什么。这将允许您查看哪些方法正在耗尽内存和使用情况。

如果您的游戏具有高级碰撞检测，请务必在该方面实现多线程。当我制作游戏时，我使用 ThreadPool 来处理碰撞方面。

我希望这会有所帮助。

# php - 通过超链接重定向到控制器

> ID：11389121
> 
> 赞同：1
> 
> 时间：2012-07-09T04:32:23.947
> 
> 标签：php, zend-framework

我是 php、MVC 和 Zend 框架的新手。我需要通过超链接重定向到控制器/动作。我使用了这个，因为我已经在表单中使用它来重定向到控制器。`<a href="mycontroller/myaction">`但这一次，它没有奏效。

我的控制器是一个非常基本的控制器，我只尝试显示连接到控制器的视图。这里是：

```
<?php

class NewUserController extends Zend_Controller_Action {

public function init()
{
    /* Initialize action controller here */
}

public function newuserAction()
{
    $this->view->newuser;
}
}

?> 
```

我搜索了答案，每个答案都与我所做的相似。请帮我解决这个问题。

提前感谢查鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:56:11.830

首先将您的控制器名称 NewUser 更改为 Newuser 并尝试像这样传递 url：

```
<?php $url = $this->url(array("controller" => "Newuser", "action" => "newuser")); ?>
<a href="<?php echo $url; ?>">test</a> 
```

在控制器中：

```
<?php

class NewuserController extends Zend_Controller_Action {
    public function init() {
        /* Initialize action controller here */
    }

    public function newuserAction() {
        $this->view->newuser;
        echo "----In newuserAction()----";      
    }
}
?> 
```

希望它对你有用。

# css - jquery ui选项卡的导航菜单的对齐问题

> ID：11389123
> 
> 赞同：3
> 
> 时间：2012-07-09T04:32:33.320
> 
> 标签：css, jquery-ui

我目前正在苦苦挣扎，因为这个问题的标题提到：根据选项卡内容的宽度将菜单选项卡居中。另外我不确定为什么内容和菜单选项卡之间存在差距。

问题：为什么菜单不适应标签内容的宽度？

[活生生的例子](http://google.com)

![在此处输入图像描述](../Images/61a81ebfd284c377b5ebd6cfd8b1d560.png)

CSS jquery ui-tabs.css

```
<style>
    #page-wrap                          { width: 675px; margin: auto; background:#FFF;}

    .ui-tabs                            { zoom: 1; }
    .ui-tabs .ui-tabs-nav               { list-style: none; position: relative; overflow: hidden; 
                                           z-index: 1000; }
    .ui-tabs .ui-tabs-nav li            { position: relative; float: left; 
                                          border-bottom-width: 0 !important;   background: #EBEBEB; }
    .ui-tabs .ui-tabs-nav li a          { float: left; text-decoration: none; padding: 5px 10px ;  outline: medium none; font-weight: bold; font-size:11px; line-height: 
    35px;}
    .ui-tabs .ui-tabs-nav 
    li.ui-tabs-selected                 { border-bottom-width: 0; background: #F9AE5C; color: #6A6A6A;  border-top:1px solid #D4D4D4; border-left:1px solid #D4D4D4; border-right:1px solid #D4D4D4;  }
    .ui-tabs .ui-tabs-nav 
    li.ui-tabs-selected a, .ui-tabs 
    .ui-tabs-nav li.ui-state-disabled a, 
    .ui-tabs .ui-tabs-nav 
    li.ui-state-processing a            { cursor: text;  }
    .ui-tabs .ui-tabs-nav li a, 
    .ui-tabs.ui-tabs-collapsible 
    .ui-tabs-nav li.ui-tabs-selected a  { cursor: pointer; } /* first selector in group seems obsolete, but required to overcome bug in Opera applying cursor: text overall if defined elsewhere... */
    .ui-tabs .ui-tabs-panel             { padding: 20px; display: block; border-width: 0; background: none; 
                                           position: relative; min-height: 100px;  border: 1px solid #D4D4D4; }
    .ui-tabs .ui-tabs-hide              { display: none !important; }
    .pngIcon{ padding:0px 5px 0px 5px; vertical-align:top;}

    a.mover                             { background: #900; padding: 6px 12px; position: absolute;
                                          color: white; font-weight: bold; text-decoration: none;}
    .next-tab                           { bottom: 0; right: 0; -moz-border-radius-topleft: 10px; -webkit-border-top-left-radius: 10px; }
    .prev-tab                           { bottom: 0; left: 0; -moz-border-radius-topright: 10px; -webkit-border-top-right-radius: 10px; }
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:38:50.743

嘿现在用来添加`border-top`到`li`

```
.ui-tabs .ui-tabs-nav li {
    border-top: 1px solid transparent;
} 
```

因为您曾经`active class`在活动类中使用顶部边框并添加到 1px，所以现在您可以在正常类中添加透明颜色边框`li`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:31:15.417

这是解决方案：http: [//jsfiddle.net/surendraVsingh/GDABm/1/](http://jsfiddle.net/surendraVsingh/GDABm/1/)

**CSS 更改：**

```
.ui-tabs{ 
  zoom: 1; 
  text-align:center;  /* Add This */
}

.ui-tabs .ui-tabs-nav{ 
  list-style: none; 
  position: relative; 
  overflow: hidden; 
  z-index: 1000; 
  display:inline-block; /* Add This */
} 
```

# jsf-2 - JSF 渲染属性

> ID：11389127
> 
> 赞同：0
> 
> 时间：2012-07-09T04:33:10.103
> 
> 标签：jsf-2, rendered-attribute

我有几个面板组，一个带有“注册”和“登录”链接，另一个带有“注销”链接。当我登录时，只有“登录”链接消失，“注册”保持呈现，而“注销”永远不会呈现。#{user.loggedIn}" 在用户登录时返回 true。在调试模式下刷新屏幕时，我可以看到该方法正在运行。有关如何使其正常工作的任何建议。代码应该是解释性的，如果不是，请告诉我。

```
<h:panelGroup rendered="#{!user.loggedIn}">
  <li>
    <h:outputLink id="loginLink" value="javascript:void(0)" onclick="dlg.show()" title="login" styleClass="loginpanelclass">Log In</h:outputLink>
  </li>
  <li>
    <h:link value="Register" outcome="/registration/register.xhtml" />
  </li>
</h:panelGroup>

<h:panelGroup rendered="#{user.loggedIn}">
  <li>
    <h:commandLink action="#{user.logout()}">Logout</h:commandLink>
  </li>
</h:panelGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:34:25.357

如果您要引用的元素不在您引用它们的同一命名容器中，则它们必须位于命名容器中。对我来说，当我点击问题中的第一个链接时，我会使用 primefaces 启动登录对话框。对话框内部是一个表单。当该表单完成时，它通过使用 p:dialog update 属性告诉我上面问题中的面板是否呈现。我必须将面板放在我的问题中的命名容器中，然后才能通过层次结构使用“：”符号成功引用它们。

如果有人遇到问题，请查找有关 JSF 中组件层次结构和命名容器的文章。有了 Daniel 在上面的评论中给出的提示，以及我在查看层次结构和命名容器时发现的东西，我现在觉得这个已经足够好了。仍然有一些不确定性，但我的代码现在可以完成我想要它做的事情。:) 我将丹尼尔在他的链接问题中给出的答案标记为一个。

# java - 如何为 URL 创建网络图？

> ID：11389128
> 
> 赞同：1
> 
> 时间：2012-07-09T04:33:21.167
> 
> 标签：java, semantic-web

我正在开发一个 java 项目，在该项目中我从给定的输入 url 收集超链接并抓取这些收集的超链接以收集与第一个给定输入 url 相关的更多网页。收集后，我需要形成一个网络图（如下图所示），显示从一页到另一页的关系。我怎么能在java中做到这一点？

例如 - [http://uploading.com/files/get/2d51d3fb/untitled.JPG](http://uploading.com/files/get/2d51d3fb/untitled.JPG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:47:09.257

你可以在这里找到一些关于绘图的资源：http: [//www.graphviz.org/Resources.php](http://www.graphviz.org/Resources.php)

我不确定它们中的任何一个是否特定于 Java，但它可能会让您朝着正确的方向前进。还有与 Graphvis 本身交互的可能性。您可以构建简单的文本文件来表示图形中的边缘（有向或无向），然后将它们提供给工具并让它们生成图像。这是一种丑陋的解决方案，但根据您的需要，它可能已经足够好了。

# javascript - 填充 ExtJs 列 json

> ID：11389130
> 
> 赞同：0
> 
> 时间：2012-07-09T04:33:29.427
> 
> 标签：javascript, json, extjs

我对列有贪婪。并有一个做json数据的jsp。我在我的 js 中喷射这个 json 并执行`Ext.data.JsonStore`但它没有进入列。

店铺

```
store = new Ext.data.JsonStore({
url: url_servlet+'Kadastr.jsp',
    fields: [
        {name: 'indoor', type: 'bool'},
        {name: 'kad_id', type: 'integer'},
        {name: 'kad_name',type: 'string'}
    ]
});
store.load(); 
```

列

```
var cm = new Ext.grid.ColumnModel({
    columns: [{
        xtype: 'checkcolumn',
        header: '',
        dataIndex: 'indoor',
        width: 50
    }, {
        header: 'id',
        dataIndex: 'kad_id',
        width: 70
    },{
        id: 'kad_name',
        header: 'Участок',
        dataIndex: 'common',
        width: 130,
        }]
}) 
```

网格面板

```
var kad_tab = new Ext.grid.GridPanel({
    store: store,
    cm: cm,
    id: 'kad_greed',
    title:'Список Участков',
    autoScroll: true, 
```

爪哇代码

```
 JSONObject resultJson = new JSONObject();
    resultJson.put("indoor",new Boolean(false));
    resultJson.put("kad_name",fileName);
    resultJson.put("kad_id",new Integer(fileId));
            out.println(resultJson.toString()); 
```

有什么成语吗？我可以添加什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:21:06.427

商店阅读器需要一系列商品，因为我看到您只发送一条记录。所以代替 :`{"indoor":false,"kad_name":"filename"..}`你应该发送一个数组和一个根对象。就像是：

`{"values":[{"indoor":false,"kad_name":"filename"..}]}`然后只需将根“值”添加到 jsonreader。默认根是“”，因此您可以使用默认空白发送它。

# linux - 在 CFS 组计划中，我怎么知道 sched_entity 是叶子（与实际任务相关联）？

> ID：11389135
> 
> 赞同：0
> 
> 时间：2012-07-09T04:35:25.160
> 
> 标签：linux, schedule

因此，如果 sched_entity 是 cfs_rq 树中的叶子节点，它将与实际任务相关联。否则，它将是一个不与任何实际任务直接关联的组调度实体（对吗？所以这意味着 task_of(se) 没有意义？）。

我的问题是：给定一个 sched_entity，我们怎么知道它是一个叶子并与一个真正的 task_struct 相关联？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:33:19.413

每个非叶实体都拥有一个“容器”（实际上它是一个 RB-tree），其中包含`sched_entity(s)`下一级任务组（确切地说是 sched_entity.my_q），除了`sched_entity(s)`与真实线程相关联的那些。这就是`entity_is_task()`工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:26:07.493

我找到了宏：entity_is_task(se)

# java - Java中的接口和抽象类混淆示例

> ID：11389137
> 
> 赞同：18
> 
> 时间：2012-07-09T04:35:36.000
> 
> 标签：java, oop, interface, abstract-class

我无法理解何时使用接口而不是抽象类，反之亦然。另外，我很困惑何时用另一个接口扩展一个接口。很抱歉这篇文章很长，但这很令人困惑。

创建形状似乎是一个流行的起点。假设我们想要一种建模 2D 形状的方法。我们知道每个形状都会有一个区域。以下两种实现之间有什么区别：

带接口：

```
public interface Shape {
    public double area();
}

public class Square implements Shape{
    private int length = 5;
    public Square(){...}

    public double area()
         return length * length;
    }
} 
```

带有抽象类：

```
abstract class Shape {
    abstract public double area();
}

public class Square extends Shape {
    private length = 5;
    public Square(){...}

    public double area(){
        return length * length;
    } 
```

我知道抽象类允许您定义实例变量并允许您提供方法实现，而接口不能做这些事情。但在这种情况下，这两个实现似乎是相同的。那么使用任何一个都可以吗？

但是现在说我们要描述不同类型的三角形。我们可以有等腰、锐角和直角三角形。对我来说，在这种情况下使用类继承是有意义的。使用“IS-A”定义：直角三角形“IS-A”三角形。三角形“IS-A”形状。此外，抽象类应该定义所有子类中通用的行为和属性，所以这是完美的：

带抽象类

```
abstract Triangle extends Shape {
    private final int sides = 3;
}
class RightTriangle extends Triangle {
    private int base = 4;
    private int height = 5;

    public RightTriangle(){...}

    public double area() {
        return .5 * base * height
    }
} 
```

我们也可以使用接口来做到这一点，Triangle 和 Shape 就是接口。但是，与类继承不同（使用“IS-A”关系来定义什么应该是子类），我不确定如何使用接口。我看到两种方法：

第一种方式：

```
 public interface Triangle {
      public final int sides = 3;
  }
  public class RightTriangle implements Triangle, Shape {
      private int base = 4;
      private int height = 5;

      public RightTriangle(){}
      public double area(){
          return .5 * height * base;
      }
  } 
```

第二种方式：

```
public interface Triangle extends Shape {
     public final int sides = 3;
} 
public class RightTriangle implements Triangle {
    ....

    public double area(){
         return .5 * height * base;
    }
} 
```

在我看来，这两种方式都有效。但是你什么时候会使用一种方式而不是另一种方式？使用接口而不是抽象类来表示不同的三角形有什么好处吗？即使我们将形状的描述复杂化，使用接口与抽象类看起来仍然是等价的。

接口的一个关键组件是它可以定义可以在不相关的类之间共享的行为。所以一个接口 Flyable 将出现在飞机类和鸟类中。因此，在这种情况下，显然首选接口方法。

此外，为了构建扩展另一个接口的令人困惑的接口：在决定什么应该是接口时，什么时候应该忽略“IS-A”关系？举个例子：[LINK](http://www.java2s.com/Code/Java/Language-Basics/Extendinganinterfacewithinheritance.htm)。

为什么“VeryBadVampire”应该是一个类而“Vampire”应该是一个接口？'VeryBadVampire' IS-A'Vampire'，所以我的理解是'Vampire' 应该是一个超类（可能是抽象类）。“吸血鬼”类可以实现“致命”以保持其致命行为。此外，一个“吸血鬼”是一个“怪物”，所以“怪物”也应该是一个类。“Vampire”类还可以实现一个名为“Dangerous”的接口来保持其危险行为。如果我们希望创建一个名为“BigRat”的新怪物，它是危险但不致命的，那么我们可以创建一个扩展“Monster”并实现“Dangerous”的“BigRat”类。

上述内容不会与使用“吸血鬼”作为接口（在链接中描述）获得相同的输出吗？我看到的唯一区别是使用类继承并保留“IS-A”关系消除了很多混乱。然而这并没有被遵循。这样做有什么好处？

即使你想让怪物分享吸血鬼的行为，也总是可以重新定义对象的表示方式。如果我们想要一种名为“VeryMildVampire”的新型吸血鬼怪物，并且我们想要创建一个名为“Chupacabra”的类似吸血鬼的怪物，我们可以这样做：

“Vampire”类扩展“Monster”实现“Dangerous”、“Lethal”、“BloodSuckable”
“VeryMildVampire”类扩展“Vampire”类
“Chupacabra”类扩展“Monster”实现“BloodSuckable”

但我们也可以这样做：

'VeryMildVampire' 扩展了 'Monster' 工具危险、致命、吸血鬼
'Chupacabra' 扩展了 'Monster' 工具危险、吸血鬼

第二种方法在这里创建一个“Vampiric”接口，以便我们可以更轻松地定义一个相关的怪物，而不是创建一堆定义吸血鬼行为的接口（如第一个示例中）。但这打破了 IS-A 关系。所以我很困惑...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T07:36:53.553

记住使用抽象类或接口时的基本概念。

当要扩展的类与实现它的类更紧密耦合时，即当两者都具有父子关系时，使用抽象类。

例如：

```
 abstract class Dog {}

       class Breed1 extends Dog {}

       class Breed2 extends Dog {} 
```

`Breed1`并且`Breed2`都是狗的类型，并且有一些作为狗的共同行为。

然而，当实现类具有可以从类中实现的功能时使用接口。

```
 interface Animal {
         void eat();
         void noise();
     }

     class Tiger implements Animal {}

     class Dog  implements Animal {} 
```

`Tiger`和`Dog`是两个不同的类别，但都吃和发出声音，这是不同的。所以他们可以使用eat and noise from `Animal`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T05:14:10.927

Use an abstract class when you want to make one or more methods not abstract.

If you want to keep all abstract, use an interface.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T06:05:32.103

这是在设计比正常情况有点复杂的类层次结构时会遇到的问题。但是通常在使用抽象类和接口时，您需要了解的事情很少

## 抽象类

*   允许您利用使用构造函数和构造函数覆盖的强大功能
*   限制类具有多重继承（如果您正在设计复杂的 API，这特别有用）
*   实例变量和方法实现
*   利用方法超级调用的力量（使用超级调用父抽象类的实现）

## 界面

*   启用多重继承 - 您可以实现 n 个接口
*   只允许表示概念方法（无方法体）

* * *

通常将接口用于“-able”子句（如功能）。例如：-

1.  `Runnable`
2.  `Observable`

对 is-a（进化格式）之类的东西使用抽象类。例如：-

1.  `Number`
2.  `Graphics`

但硬性规定并不容易制定。希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T05:35:09.673

这是一个经常出现的问题，但没有一个“正确”的答案可以让所有人都满意。

类代表*is-a*关系，接口代表*可以做的*行为。我通常遵循一些经验规则：

*   坚持使用一个类（抽象/具体），除非你确定你需要一个接口。
*   如果您确实使用接口，请将它们分成非常具体的功能。如果一个接口包含多个方法，那么你做错了。

* * *

此外，大多数形状和人物（或吸血鬼！）的例子通常都是真实世界模型的糟糕例子。“正确”的答案取决于您的应用程序需要什么。例如，您提到：

```
class Vampire extends Monster implements Dangerous, Lethal, BloodSuckable 
```

您的应用程序真的需要所有这些接口吗？`Monster`s 有多少种不同的类型？您实际上有除`Vampire`该工具之外的其他类`BloodSuckable`吗？

尽量不要泛化太多，并在不需要时提取接口。这又回到了经验法则：除非您的用例需要接口，否则请坚持使用简单的类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T05:25:34.797

你在这里有很多问题。但我认为基本上你是在问接口与抽象类。

使用接口，您可以拥有实现多个接口的类。但是，如果您想将其用作 API，则接口是不耐用的。界面一旦发布，就很难修改界面，因为它会破坏其他人的代码。

使用抽象类，您只能扩展一个类。但是，抽象类对于 API 是持久的，因为您仍然可以在以后的版本中进行修改而不会破坏其他人的代码。同样使用抽象类，您可以有预定义的实现。例如，在您的 Triangle 示例中，对于抽象类，您可能有一个方法 countEdges() 默认返回 3。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-11T15:29:35.633

这是一个很好的问题。这个问题有很多好的和坏的答案。典型的问题是，抽象类和接口之间有什么区别？让我们看看你在哪里使用抽象类以及在哪里使用接口。

**在哪里使用抽象类：** 就 OOP 而言，如果存在继承层次结构，那么您应该使用抽象类来为您的设计建模。
![在此处输入图像描述](../Images/b20114536612e69fc125b0a274fef650.png)

**在哪里使用接口：** 当您必须使用一个通用合约连接不同的合约（非相关类）时，您应该使用接口。让我们以 Collection 框架为例。 ![在此处输入图像描述](../Images/3f5535d87fda33344aa8c2c90a216ef5.png)

Queue、List、Set 与它们的实现有不同的结构。但它们仍然有一些共同的行为，如 add()、remove()。因此我们可以创建一个名为 Collection 的接口，并且我们在接口中声明了通用行为。如您所见，ArrayList 实现了 List 和 RandomAccess 接口的所有行为。这样做我们可以轻松添加新合约，而无需更改现有逻辑。这被称为“接口编码”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-09T05:14:46.000

Your shape example is good. I look at it this way:

You only have abstract classes when you have methods or member variables that are shared. For your example for `Shape` you've only got a single, unimplemented method. In that case always use an interface.

Say you had an `Animal` class. Each Animal keeps track of how many limbs it has.

```
public abstract class Animal
{
    private int limbs;
    public Animal(int limbs)
    {
        this.limbs = limbs;
    }

    public int getLimbCount()
    {
        return this.limbs;
    }

    public abstract String makeNoise();
} 
```

Because we need to keep track of how many limbs each animal has, it makes sense to have the member variable in the superclass. But each animal makes a different type of noise.

So we need to make it an abstract class as we have member variables and implemented methods as well as abstract methods.

For your second question, you need to ask yourself this.

Is a Triangle always going to be a shape?

If so, you need to have Triangle extend from the Shape interface.

So in conclusion - with your first set of code examples, choose the interface. With the last set, choose the second way.

# php - 使用 javascript 和 ajax 插入 mysql 数据

> ID：11389145
> 
> 赞同：0
> 
> 时间：2012-07-09T04:37:15.003
> 
> 标签：php, javascript, mysql, ajax

基本上我需要异步插入文本区域的值，但是当我调用函数 insertSQLData() 时，它会显示页面的源代码，除此之外我找不到其他错误。我也省略了数据库代码和任何不相关的代码。

```
 <?php 
     $q = $_GET["q"];
     $username = $_COOKIE["user"];
 ?>    
  function insertSQLData(str){
    if(str == 0){
        document.getElementById("holder").innerHTML="";
        return;
    }

    if(window.XMLHttpRequest){
        xmlhttp = new XMLHttpRequest();
    } else {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function(){
        if(xmlhttp.readyState == 4 && xmlhttp.status == 200){
            document.getElementById("holder").innerHTML = xmlhttp.responseText;
        }
    }
xmlhttp.open("GET", "index-async.php?q=+str", true);
xmlhttp.send();
}

<form action="" method="get">
<textarea onblur="insertSQLData(this.value);" id="quick-post-form" name="quick-post-form"></textarea>
<input type="button" value="Submit" name="quick-post-btn" id="quick-post-submit">
<div id="holder"></div> 
```

```
 if(isset($username) && !empty($q)){
    mysql_query("INSERT INTO comments (comment,username) VALUES ('$q', '$username')");
} elseif(!empty($q)) {
    mysql_query("INSERT INTO comments (comment,username) VALUES ('$q', 'Guest User')");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:43:33.360

因此，您正在调用 ajax 调用所在的同一页面。显然它会返回代码。

在另一个文件中编写php代码并尝试调用它。有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:55:21.533

您按照下面给出的条件语句编写代码。

```
<?php
        if(isset($_GET["q"]))
        {
             $q = $_GET["q"];
             $username = $_COOKIE["user"];

             if(isset($username) && !empty($q)){
                mysql_query("INSERT INTO comments (comment,username) VALUES ('$q', '$username')");
            } elseif(!empty($q)) {
                mysql_query("INSERT INTO comments (comment,username) VALUES ('$q', 'Guest User')");
            }
        }
        else
        {
        ?>
        <script>
         function insertSQLData(str){
            if(str == 0){
                document.getElementById("holder").innerHTML="";
                return;
            }

            if(window.XMLHttpRequest){
                xmlhttp = new XMLHttpRequest();
            } else {
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function(){
                if(xmlhttp.readyState == 4 && xmlhttp.status == 200){
                    document.getElementById("holder").innerHTML = xmlhttp.responseText;
                }
            }
        xmlhttp.open("GET", "index-async.php?q=+str", true);
        xmlhttp.send();
        }
        </script>
        <form action="" method="get">
    <textarea onblur="insertSQLData(this.value);" id="quick-post-form" name="quick-post-form"></textarea>
    <input type="button" value="Submit" name="quick-post-btn" id="quick-post-submit">
    <div id="holder"></div>
        <?php

        }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T04:44:52.577

您必须在 php 文件启动之前加载它。
您所要做的就是编写一个控制器，并在任何地方而不是您的 index.php 中使用它，并且（在从 DB 加载这些内容之后）将用户重定向到您的 index.php 页面，提供您需要的那些数据。

# javascript - jQuery 有时无法获取所有元素

> ID：11389147
> 
> 赞同：1
> 
> 时间：2012-07-09T04:37:40.650
> 
> 标签：javascript, jquery, google-chrome-extension, google-docs

我有一个有点奇怪的问题。我创建了一个 chrome 扩展，当用户编辑谷歌文档时它会自动向下滚动。当文档处于分页模式时，它似乎工作正常。如果我将它切换到紧凑模式，那么 jQuery 似乎不会获得所有请求的元素。基本的 HTML 树在分页和紧凑模式下几乎相同。我很困惑，不知道为什么它不能正常工作。我们应该主要关注“$currentPage”是如何工作的。有时高度在不应该发生时返回 0。

**[编辑] 这是它会搞砸的时候：**它在分页模式下工作正常。但是，当我在第 2 页上已有文本时以紧凑模式启动扩展程序时，它将按预期工作。如果我将文本一直删除到第 1 页，它仍然会按预期工作。但是，如果我开始在第 2 页输入文本，它就会开始混乱。

这是代码：

```
function autoScrollFunc(){
   if(autoscrollEnabled){
      var oldCount = pageCount;
      // get all the pages
      var $pages = $("div.kix-page");
      // count how many pages there are
      pageCount = $pages.length;
      console.dir($pages);
      console.dir($pages.last());
      console.dir($pages.last().find("div.kix-paragraphrenderer"));
      $currentPage = $pages.last().find("div.kix-paragraphrenderer").first();
      //console.dir($currentPage);
      //pageHeight = $pages.first().height();
      if(pageCount != oldCount){
         // update data if there are changes in page count
         console.log("Number of pages changed! Count: " + pageCount);
         pageHeight = $pages.first().height();
      }
      // scroll to new position
      scrollToNewPosition();
   }
}

function scrollToNewPosition(){
   if(autoscrollEnabled){
      oldHeight = viewLoc;
      var upperSection = toolbarHeight + getRulerHeight();
      var windowHeight = $(window).height();
      var marginHeight = (pageCount > 1) ? getTopMarginHeight() : firstMarginHeight;
      var docViewHeight = (windowHeight > upperSection) ? (windowHeight - upperSection) : 0;

      // calculate the scroll location
      var totalDocHeight = (pageHeight * (pageCount-1)) + $currentPage.height() + marginHeight;
      viewLoc = (totalDocHeight < docViewHeight) ? 0 : totalDocHeight - docViewHeight + $currentPage.height();

      console.log("upperSection: %s, windowHeight: %s, marginHeight: %s, docViewHeight: %s, totalDocHeight: %s, viewLoc: %s, currentPage.height(): %s",
            upperSection, windowHeight, marginHeight, docViewHeight, totalDocHeight, viewLoc, $currentPage.height());

      if(oldHeight != viewLoc){
         // if there are changes in height, then scroll to the new position
         $docScroller.animate({ scrollTop: viewLoc}, 250);
      }
   }
} 
```

如果您想自己尝试扩展，这里是项目 URL：

[http://code.google.com/p/google-docs-autoscroll/](http://code.google.com/p/google-docs-autoscroll/)

提前谢谢各位。

# iphone - 生成当前月份的随机日期

> ID：11389148
> 
> 赞同：2
> 
> 时间：2012-07-09T04:37:53.880
> 
> 标签：iphone, objective-c

我想获得当月的随机日期。

有没有简单的方法来获取月份的随机日期？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T04:42:10.933

```
NSDate *today = [NSDate date]; 
NSCalendar *calendar = [NSCalendar currentCalendar];
NSCalendarUnit unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
NSDateComponents *dateComponents = [calendar components:unitFlags fromDate:today];
NSRange days = [calendar rangeOfUnit:NSDayCalendarUnit 
                       inUnit:NSMonthCalendarUnit 
                      forDate:today]; 
```

要生成随机数，请使用

```
int r = arc4random() % days.length; 
```

然后创建一个日期

```
[dateComponents setDay:r];
NSDate *startDate = [calendar dateFromComponents:dateComponents]; 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-18T06:21:21.937

斯威夫特版本：

```
let date = Date()
let calendar = Calendar.current
var dateComponents = calendar.dateComponents([.year, .month, .day], from: date)
guard
    let days = calendar.range(of: .day, in: .month, for: date),
    let randomDay = days.randomElement()
else {
        return nil
}
dateComponents.setValue(randomDay, for: .day)
return calendar.date(from: dateComponents) 
```

# ubuntu - 在 Ubuntu 12.04 上更新 NVIDIA 驱动程序后，VGA 监视器将无法工作

> ID：11389152
> 
> 赞同：0
> 
> 时间：2012-07-09T04:38:19.937
> 
> 标签：ubuntu, graphics, driver

我最近安装了 Ubuntu 12.04，首先出现的是驱动程序管理器，它告诉我为我的 nvidia 显卡安装驱动程序（我不记得是什么了）。

我有一台笔记本电脑，但我的屏幕坏了，所以我必须使用外接显示器来查看屏幕上的内容。安装并重新启动后，不再检测到外接显示器。如何解决这个问题？我知道显示器仍然可以工作，因为我可以看到笔记本电脑屏幕的底角。

当我恢复到安装驱动程序之前，外接显示器将再次显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:43:58.677

不，您不需要使用外接显示器：

1）“Ctl-Alt-F1”将带您进入文本模式，您应该能够修复驱动程序问题

2）您应该能够重新启动（从命令提示符“sudo reboot -i”）并从启动菜单进入“VESA 模式”

3）这个链接有几个很好的建议，包括：

*   [https://askubuntu.com/questions/125537/nvidia-graphics-resolution-problems-with-new-12-04-lts-installation](https://askubuntu.com/questions/125537/nvidia-graphics-resolution-problems-with-new-12-04-lts-installation)

> 295.40 驱动程序存在很多问题。您可以按照本指南恢复到旧的 nvidia 驱动程序 295.33：
> 
> [http://www.noobslab.com/2011/09/nvidia-drivers-for-ubuntu-1110-oneiric.html](http://www.noobslab.com/2011/09/nvidia-drivers-for-ubuntu-1110-oneiric.html)
> 
> 我必须通过将 nvidia_current 添加到 /etc/modules 来手动加载 nvidia_current 内核模块——重启后工作，执行“modprobe nvidia_current”和“/etc/init.d/lightdm restart”立即工作

# android - 使用 ActionBarSherlock 菜单在新 4.0 及更高版本上显示旧菜单按钮 - 包含图片

> ID：11389159
> 
> 赞同：1
> 
> 时间：2012-07-09T04:39:09.013
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock, android-menu

我一直在寻找一段时间，我只是想知道我是否在浪费时间试图摆脱在我的应用程序中显示的小菜单图标，以支持没有实现 ActionBar 的旧应用程序.

![在此处输入图像描述](../Images/35646587af7ce62e9064aa17a04057f3.png)

我该如何摆脱它（作为奖励：它有实际名称）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T04:52:03.720

首先是奖励：它被称为*遗留*溢出按钮。

在未实现专用菜单按钮的设备上“摆脱”它的正确方法是将`minSdkVersion`或设置`targetSdkVersion`为 11 或更高。在这种情况下，系统将不会添加旧的溢出按钮。

不过有一个小例外：如果您不使用`ActionBar`, 设置`minSdkVersion`为 10 或更低，而设置`targetSdkVersion`为 11、12 或 13，则在 Android 4.0 或更高版本的手机上运行您的应用程序时，Android*将添加旧版溢出按钮。*

您可以在 Android 开发网站上阅读这篇[博文中的所有详细信息。](http://android-developers.blogspot.co.nz/2012/01/say-goodbye-to-menu-button.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T04:51:25.550

将您的设置`targetSdkVersion`为 14 或更高。

# java - 在循环内创建线程的正确性

> ID：11389164
> 
> 赞同：0
> 
> 时间：2012-07-09T04:39:28.507
> 
> 标签：java, multithreading

我不确定这样的代码是否安全。我需要从数据库中读取一个名称，我需要使用，比如说 10 个线程，每个线程都有一个名称，然后在`run`它内部调用一个需要这个名称作为参数的函数。

10 个线程是否适合运行 Intel core i7 和 8GB RAM 的电脑？我如何知道我可以创建的可接受的线程数？此代码是否正确且安全？

我在 Dietel 的书中发现他们在 Executor 之前创建了新线程。他们添加如下行：`PrintTask task1 = new PrintTask( "thread1" );`

检查： http: [//www.deitel.com/articles/java_tutorials/20051126/JavaMultithreading_Tutorial_Part4.html](http://www.deitel.com/articles/java_tutorials/20051126/JavaMultithreading_Tutorial_Part4.html)），但找到以下方法（没有新的声明）：[http ://www.vogella.com/articles/JavaConcurrency/文章.html](http://www.vogella.com/articles/JavaConcurrency/article.html)

换句话说，我应该在循环之前创建它们吗？两个参考使用不同的方法，我很困惑。哪个代码是正确的，这个：

```
 ExecutorService Executor = Executors.newFixedThreadPool(10);

        while(resultSet.next()) 
           {
              name=resultSet.getString("hname");
              MyRunnable worker = new  MyRunnable(name);

               Executor.execute( worker );
               Counter++;
        }

     Executor.shutdown();
     System.out.println("thread shutdown");

// Wait until all threads are finish
while (! Executor.isTerminated()) {

}
System.out.println("Finished all threads"); 
```

或者

```
MyRunnable task1 = new MyRunnable(name );
MyRunnable task2 = new MyRunnable(name );
MyRunnable task3 = new MyRunnable(name );
MyRunnable task4 = new MyRunnable(name );
MyRunnable task5 = new MyRunnable(name );
MyRunnable task6 = new MyRunnable(name );
MyRunnable task7 = new MyRunnable(name );
MyRunnable task8 = new MyRunnable(name );
MyRunnable task9 = new MyRunnable(name );
MyRunnable task10 = new MyRunnable(name );

        ExecutorService Executor = Executors.newFixedThreadPool(10);

        while(resultSet.next()) 
           {
              name=resultSet.getString("hname");
              MyRunnable worker = new  MyRunnable(name);

               Executor.execute( worker );
               Counter++;
        }

     Executor.shutdown();
     System.out.println("thread shutdown");

// Wait until all threads are finish
while (! Executor.isTerminated()) {

}
System.out.println("Finished all threads"); 
```

此外，在实现运行的 MyRunnable 类的构造函数中，我是否必须显式启动线程或者`Executor.execute( worker )`在这种情况下是否足够。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:03:34.480

我会这样重写它：

```
ExecutorService executor = Executors.newFixedThreadPool(10);

while(resultSet.next())
{
    name=resultSet.getString("hname");
    MyRunnable worker = new  MyRunnable(name);
    executor.submit(worker);
    counter++;
}

executor.shutdown();
System.out.println("thread shutdown");

executor.awaitTermination(60, TimeUnit.SECONDS);
System.out.println("Finished all threads"); 
```

小写的变量，awaitTermination 而不是循环。

要使用的线程数取决于几个因素：机器、要执行的任务数、任务的“大小”等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:59:40.493

如果您担心的话，您的第一个循环没有任何线程不安全的地方。我唯一关心的是您使用该`Counter`变量的目的：您知道您不能依赖它在您`MyRunnable`的 s 中的值，对吗？

# iphone - dispatch_async 减慢 UI 和应用程序的速度

> ID：11389167
> 
> 赞同：0
> 
> 时间：2012-07-09T04:39:56.110
> 
> 标签：iphone, objective-c, ios, xcode, multithreading

我`dispatch_async`用于后台上传。从另一个 Stackoverflow 问题中，我发现它`dispatch_async`比`PerformSelectorInBackground`. 但是现在在我调用它之后，用户界面变得非常慢。任何人都可以为此提供解决方案吗？我使用的代码添加如下：

```
__block NSString *someString;
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 
                                         (unsigned long)NULL), ^(void) {

  if(someString != nil)
    {
        Class *className = [class sharedObject];
        [className sendContacts];

    }

}); 
```

功能代码：

```
-(void) sendContacts {

    NSURL *url = [NSURL URLWithString:@"myurl"];

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setRequestMethod:@"POST"];

    [request addRequestHeader:@"d" value:[[UIDevice currentDevice] uniqueIdentifier]];

    NSString *sessionKey = [[NSUserDefaults standardUserDefaults]valueForKey:@"UD_Sessionkey"];

    [request addRequestHeader:@"s" value:sessionKey];

    NSData *data=[[self createContactList] dataUsingEncoding: [NSString defaultCStringEncoding] ];

    NSMutableData *x = [[NSMutableData alloc] init]; 
    [x setData:data];

    [request setPostBody:x];

    [request setShouldContinueWhenAppEntersBackground:YES];
    [request setDelegate:self];
    [request setTimeOutSeconds:60];
    [request setDidFinishSelector:@selector(requestFinished:)];
    [request setDidFailSelector:@selector(requestFailed:)];
    [request startAsynchronous];

}

- (void)requestFinished:(ASIHTTPRequest *)requestData
{

    NSLog(@"Response : %@", [requestData responseString]);

    if (self.currentLimit_ > totalCount) {

        //do nothing
    } else {

        [self sendContacts];
    }

}

- (NSString *)createContactList
{

    self.currentLimit_ = self.currentLimit_ + 10;
    self.currentCount_ = self.currentCount_ + 1;

    ABAddressBookRef addressBook = ABAddressBookCreate();
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
    CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);

    totalCount = nPeople;

    NSMutableString *requestContactsString = [[NSMutableString alloc] init];

    [requestContactsString appendString:@"<list>"];

    for (int i=currentCount; i<self.currentLimit_; i++)
    {
        NSLog(@"Started : %d", i);
        if (self.currentLimit_ > totalCount) {
            break;
        }

        if (i < self.currentLimit_ - 10) {

            continue;
        }

        ABRecordRef ref = CFArrayGetValueAtIndex(allPeople, i);
        CFTypeRef firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
        CFTypeRef lastName = ABRecordCopyValue(ref, kABPersonLastNameProperty);
        CFTypeRef email = ABRecordCopyValue(ref, kABPersonEmailProperty);
        CFTypeRef phone = ABRecordCopyValue(ref, kABPersonPhoneProperty);

        //requestContactsString = [requestContactsString stringByAppendingFormat:@"<item>"];
        [requestContactsString appendString:@"<item>"];

        if(firstName)
        {
            [requestContactsString appendString:[NSString stringWithFormat:@"<firstname>%@</firstname>", firstName]];

            CFRelease(firstName);
            firstName = nil;
        }
        if(lastName)

            [requestContactsString appendString:[NSString stringWithFormat:@"<lastname>%@</lastname>", lastName]];
            CFRelease(lastName);
            lastName = nil;
        }
        if(email)
        {
            if(ABMultiValueGetCount(email)>0)
            {
                CFTypeRef em = ABMultiValueCopyValueAtIndex(email, 0);

                [requestContactsString appendString:[NSString stringWithFormat:@"<email>%@</email>", em]];

                CFRelease(em);
            }
            CFRelease(email);
            email = nil;
        }
        if(phone)
        {
            if(ABMultiValueGetCount(phone)>0)
            {
                CFTypeRef ph = ABMultiValueCopyValueAtIndex(phone, 0);

                [requestContactsString appendString:[NSString stringWithFormat:@"<phone>%@</phone>", ph]];
                CFRelease(ph);
            }
            CFRelease(phone);
            phone = nil;
        }

        [requestContactsString appendString:@"</item>"];

    }

    if(allPeople)
    {
        CFRelease(allPeople);
        allPeople = nil;
    }
    if(addressBook)
    {
        CFRelease(addressBook);
        addressBook = nil;
    }

    [requestContactsString appendString:@"</list>"];

    NSString *hashedContactsString = [self generateHashedPassword:requestContactsString];

    NSLog(@"Contacts : %@", requestContactsString);

    //contact list has changed
    if(![[[NSUserDefaults standardUserDefaults] valueForKey:@"contacts"] isEqualToString:hashedContactsString])
    {
        return requestContactsString;
    }
    else return nil;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:02:25.450

可能是自动释放的对象变慢了……必须在仪器工具中检查哪个功能需要更多时间。

```
//Can you try using autoreleasepool for the threaded function. 
     dispatch_async(yourQueue, ^{
                     @autoreleasepool {
                         //Your code to be run in background
                         dispatch_async(dispatch_get_main_queue(), ^{
                             //Any UI updates
                         });
                     }
                 }); 
```

# php - 数组中的PHP函数

> ID：11389169
> 
> 赞同：1
> 
> 时间：2012-07-09T04:40:06.067
> 
> 标签：php

我的问题是retrieveName() 没有获得$1 的值，但$1 在前一个实例中工作得很好。

```
 function bbcode ($string)
    {
    // All the default bbcode arrays.
    $bbcode = array(
    '#\[quote=(.*?)\](.*?)\[/quote\]#si' => 
'<span class="bbcode_quote"><b>
<a href="userprofile.php?id='.stripslashes('$1').'" target="_blank">
<span class="fake_link">'.retrieveName('$1').'</span></a> Said:</b><BR/>$2</span><BR/>'

    );
    $output = preg_replace(array_keys($bbcode), array_values($bbcode), $string);
    $output = str_replace("\\r\\n", "<br>", $output);
    return $output;
    } 
```

**编辑：** 没有斜线，我希望它是那么简单

```
function retrieveName($poster_id){
$get_name = mysql_query("SELECT * FROM users WHERE userid = 'sanitizeIn($poster_id)'")
or die(mysql_error());
$name_row = mysql_fetch_array($get_name);
return $name_row['username'];
}
function sanitizeIn ($string) {
$output = mysql_real_escape_string($string);
return $output;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:10:09.123

Assuming you are using `preg_*` functions, as you should be, you should use `$1` instead of `\\1`. Both are valid, but `$1` is the preferred syntax.

Also, you might be more interested in one of the following:

```
$output = preg_replace("#\[quote=(.*?)\](.*?)\[/quote\]#sie",  
  "'<span class=\"bbcode_quote\"><b><a href=\"userprofile.php?id='.stripslashes('$1').'\"
    target=\"_blank\"><span class=\"fake_link\">'. 
   retrieveName(stripslashes('$1')) . '</span></a> Said:</b><BR/>$2 
  </span><BR/>'",$input); 
```

Or:

```
$output = preg_replace_callback("#\[quote=(.*?)\](.*?)\[/quote\]#si",function($m) {
    return '<span class="bbcode_quote"><b><a href="userprofile.php?id=\\1"  
    target="_blank"><span class="fake_link">' .  
   retrieveName('\\1') . '</span></a> Said:</b><BR/>\\2 
  </span><BR/>';
},$input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:34:12.667

试试这个方法：

```
$output = preg_replace_callback("#\[quote=(.*?)\](.*?)\[/quote\]#si",function($matches) {
    return '<span class="bbcode_quote"><b><a href="userprofile.php?id='.stripslashes($matches[1]).'" target="_blank"><span class="fake_link">' .  
    retrieveName($matches[1]).'</span></a> Said:</b><BR/>'.$matches[2].'</span><BR/>';
},$input); 
```

# opengl - 超越人脸检测-OpenCV

> ID：11389171
> 
> 赞同：0
> 
> 时间：2012-07-09T04:40:15.387
> 
> 标签：opengl, opencv, mask, face-recognition

我使用 OpenCV wiki 中提供的信息制作了一个人脸检测程序，该程序可以识别相机源中是否存在人脸。我使用的源代码在下面给出的链接中提供

[http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html)

现在我想把它带到另一个层次，这样它也可以真正识别耳朵。因此，我想在用户脸上放置一个面具，显示脸部和耳朵的存在，比如

[http://code.google.com/p/ehci/wiki/6dofhead](http://code.google.com/p/ehci/wiki/6dofhead)

如何在不使用 OpenGL 和使用某种级联分类器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:34:32.487

HaarCascades 可用于耳朵、眼睛、鼻子、嘴巴等。您可以像使用 Face cascades 检测人脸一样使用它们。级联与源一起提供。

`OpenCV-version/data/haarcascades`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:04:45.333

OpenCV 发行版中有一个人脸检测器示例，展示了如何检测人脸和其他一些人脸特征。您所要做的就是将级联名称发送到可执行文件。级联位于 openCV_install/data/cascades/

[这](http://code.opencv.org/projects/opencv/wiki/FaceDetection)是最新的教程

并且[有](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html#cascade-classifier)一个较旧的，与较旧的级联兼容。

# ruby-on-rails - Rails has_many：通过在控制器中创建新的和链接

> ID：11389172
> 
> 赞同：1
> 
> 时间：2012-07-09T04:40:16.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, has-many-through

我正在制作一个网站，通过就业跟踪用户公司。我需要知道我做错了什么，因为当我创建一个新的用户公司时，用户并不知道它。

公司控制器.rb

```
class CompaniesController < ApplicationController
  # GET /companies
  # GET /companies.json
  def index
    @companies = current_user.companies
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @companies }
    end
  end

  # GET /companies/1
  # GET /companies/1.json
  def show
    @company = Company.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @company }
    end
  end

  # GET /companies/new
  # GET /companies/new.json
  def new
    @company = Company.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @company }
    end
  end

  # GET /companies/1/edit
  def edit
    @company = Company.find(params[:id])
  end

  # POST /companies
  # POST /companies.json
  def create
    @company = Company.new(params[:company])

    current_user.employments.create!(company_id: @company.id)

    respond_to do |format|
      if @company.save
        format.html { redirect_to @company, notice: 'Company was successfully created.' }
        format.json { render json: @company, status: :created, location: @company }
      else
        format.html { render action: "new" }
        format.json { render json: @company.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /companies/1
  # PUT /companies/1.json
  def update
    @company = Company.find(params[:id])

    respond_to do |format|
      if @company.update_attributes(params[:company])
        format.html { redirect_to @company, notice: 'Company was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @company.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /companies/1
  # DELETE /companies/1.json
  def destroy
    @company = Company.find(params[:id])
    @company.destroy

    respond_to do |format|
      format.html { redirect_to companies_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:52:12.283

问题出在您的创建操作中，特别是行

```
current_user.employments.create!(company_id: @company.id) 
```

这是在保存公司记录之前执行的，因此它没有 id (== nil)。之后移动那条线

```
if @company.save 
```

它应该通过 :through 关系将它附加到 current_user 。

# php - 在 PHP 中使用 Symfony2 获取 ParameterNotFoundException

> ID：11389173
> 
> 赞同：7
> 
> 时间：2012-07-09T04:40:45.323
> 
> 标签：php, symfony

我是 Symfony2 的新手，我一直在关注[symblog 教程](http://tutorial.symblog.co.uk/docs/validators-and-forms.html)

但是当我加载主页时出现此错误

```
ParameterNotFoundException: You have requested a non-existent parameter "secret". 
```

如果 config.yml 应该在哪个语句中编辑，我应该在哪里检查是否在 config.yml 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T04:53:57.920

该参数将在您的`app/config/parameters.ini`（或较新版本的 .yml ）中设置。确保该文件存在并且看起来像这样：

```
[parameters]
    database_driver   = pdo_mysql
    database_host     = localhost
    database_port     =
    database_name     = symfony
    database_user     = root
    database_password =

    mailer_transport  = smtp
    mailer_host       = localhost
    mailer_user       =
    mailer_password   =

    locale            = en

    secret            = ThisTokenIsNotSoSecretChangeIt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-05T11:23:26.013

我遇到了同样的问题，结果我在 config.yml 中添加了第二个导入部分。所以我删除了它，只是在文件顶部的顶部导入部分添加了我的资源，现在它可以工作了！我正在添加奏鸣曲管理服务。希望这可以帮助。

进口：

```
 - { resource: parameters.yml }

      - { resource: security.yml }

      - { resource: @MyBundle/Resources/config/admin.yml } 
```

而不是不正确的

进口：

```
 - { resource: parameters.yml }

      - { resource: security.yml } 
```

进口：

```
 - { resource: @MMyBundle/Resources/config/admin.yml } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T11:01:56.337

我也研究了这篇文章。而且我也遇到了这个错误。如发现。我没有正确复制文件 app/config/config.yml 中的示例

# ckeditor - 如何在ckeditor状态栏中显示文本？

> ID：11389183
> 
> 赞同：2
> 
> 时间：2012-07-09T04:43:02.113
> 
> 标签：ckeditor, statusbar

我只想知道如何在 ckeditor 状态栏中显示文本。

在 ckeditor 的底部显示元素路径，我只想在该元素路径中显示文本，如状态栏。

例如，当用户在编辑器中找到并替换文本时，我想向用户显示文本中替换的实例数。

任何帮助都是有用的，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:20:28.830

您可以禁用 elementspath 插件：

```
config.removePlugins = 'elementspath'; 
```

然后通过复制`_source/plugins/elementspath`到`plugins/elementspath`.

然后将目录重命名为您的自定义名称并更改 plugin.js 文件的第 33 行以使用新名称（CkEditor 样式指南要求插件名称的所有小写字母）：

```
CKEDITOR.plugins.add( 'newname', 
```

然后在您的配置中添加新插件：

```
config.extraPlugins = 'newname'; 
```

* * *

该`editor.on( 'selectionChange', function( ev )`部分是为该行创建内容的大部分工作。主要部分是这样的：

```
html.unshift(
  '<a' +
    ' id="', idBase, index, '"' +
    ' href="javascript:void(\'', name, '\')"' +
    ' tabindex="-1"' +
    ' title="', label, '"' +
    ( ( CKEDITOR.env.gecko && CKEDITOR.env.version < 10900 ) ?
    ' onfocus="event.preventBubble();"' : '' ) +
    ' hidefocus="true" ' +
    ' onkeydown="return CKEDITOR.tools.callFunction(', onKeyDownHandler, ',', index, ', event );"' +
    extra ,
    ' onclick="CKEDITOR.tools.callFunction('+ onClickHanlder, ',', index, '); return false;"',
    ' role="button" aria-labelledby="' + idBase + index + '_label">',
      name,
      '<span id="', idBase, index, '_label" class="cke_label">eee' + label + '</span>',
  'rrrr</a>' ); 
```

您可以对其进行修改以显示您喜欢的任何内容。

您需要查看其余代码以了解正在发生的一切，并为您的特定目标进行所需的任何其他更改。

# mysql - 如何获取 AI 的 mysql 查询？

> ID：11389186
> 
> 赞同：1
> 
> 时间：2012-07-09T04:43:44.697
> 
> 标签：mysql, artificial-intelligence

我在这里有一个小问题，我尝试创建一些 AI 来响应输入文本，但问题是

说我们有一个名为“AI”的数据库，其中包含“答案”和“问题”列

如果我尝试使用查询询问“嘿，为什么我的手机会爆炸”

```
SELECT * FROM AI where question LIKE "%Hey why are my mobile explode%" LIMIT 1 
```

我有这样的数据库记录......

```
Question  |   Answer
================================
Explode   | because you got suck 
```

我的查询没有得到任何结果，但是如果我更改记录并将查询更改为这样...

询问

```
SELECT * FROM AI where question LIKE "%explode%" LIMIT 1 
```

数据库

```
Question                        |   Answer
=======================================================
Hey why are my mobile Explode   | because you got suck 
```

我得到了回报。。

所以结论是，“LIKE”操作数被读取包含条件文本的值......

VALUE 是 Question 列的值 CONDITION 是 LIKE 条件操作数的条件

```
Value = ... are my mobile **explode**
Condition = **explode** 
```

所以上面的情况是 MATCH

但是，我们有可能反转函数吗？我的意思是，如何读取条件文本中包含的值...

```
Value = ... **explode**
Condition = "....are my mobile **explode** 
```

之前谢谢，希望有人可以在这里帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:48:30.480

这种简单的查询永远不会起作用。[使用FULLTEXT index](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)会更好，它允许这种“自然语言”查询。如果出于某种原因您不能使用全文，那么您将不得不进行大量的预处理来构建查询。对于您的第一个样本，它必须是：

```
SELECT ... WHERE (question LIKE '%hey%') OR (question like '%why%') OR (quetsion LIKE '%...%') 
```

并且性能绝对会很糟糕，因为完全通配符的子句根本不能使用索引。问题中的单词越多，MySQL 必须执行的全表扫描就越多，并且所有操作所需的时间就越长。

相比之下，查询的全文版本将是

```
SELECT ... WHERE MATCH question AGAINST ('Hey why are my mobile explode'); 
```

并且......在元层面上，我希望这个问题的答案是“你为什么要寻找这个而不是去医院治疗你的烧伤/弹片伤口？”

# php - 倒数计时器功能和带有html标签的php

> ID：11389190
> 
> 赞同：-2
> 
> 时间：2012-07-09T04:44:51.053
> 
> 标签：php, javascript, mysql, html

我的代码

```
$sql="SELECT * FROM `room_lists`";
$sqlquery = mysql_query($sql);
while($result = mysql_fetch_array($sqlquery)){

$toDay = strtotime($result['timeStop']); 
//echo $toDay;

?>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=tis620" />
<script type="text/javascript" src="core/jquery-latest.js"></script>
<title>test</title>
<script type="text/javascript">

function countDown(times){
    var toDay=Math.round(new Date().getTime()/1000); 
    var difTime=times-toDay;
    var day=0,hours=0,minutes=0,seconds=0;
    if(difTime>0){
    day=Math.floor(difTime/84600);
    hours=Math.floor((difTime/3600))%24;
    minutes=Math.floor(difTime/60)%60;
    seconds=Math.floor(difTime)%60; 
    countDown_onLoad();
    }
    else{
        alert('asd');   //time out
    }
    $('.show').html(day+' Day '+hours+' Hour '+minutes+' Min '+seconds+' Sec ');
}
function countDown_onLoad(){
    setTimeout("countDown(<?=$toDay ?>);",1000);
}
$(document).ready(function() {
countDown_onLoad();
});

</script>

</head>

<body>
<div class="show"></div>

</body>

</html>
<? } ?> 
```

你好，我是一个使用javascript的新手。我已经创建了倒数计时器，以使用带有 js 函数的拍卖网站，该函数通过 php 查询从数据库（时间戳类型）调用，如果结果是 1 行，它工作正常，但如果超过 1 行，结果与最后一行相同数据库。我怎样才能解决这个问题？

这是我的输出

```
0 Day 1 Hour 41 Min 25 Sec
0 Day 1 Hour 41 Min 25 Sec 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:50:45.247

您似乎正在为每个计数器输出整个 HTML 文档（减去开始`<html>`标记和）。`<!doctype>`

核心问题是您`$(".show").html(...)`用于输出计数器，这实际上是告诉它将该内容放入*每个* `.show`元素中。最终结果是它们都显示相同的东西：无论最后一个计数器在哪里。

您的方法几乎无法挽救，但这是我最好的尝试：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=tis620" />  
    <script type="text/javascript" src="core/jquery-latest.js"></script>  
    <title>test</title>  
    <script type="text/javascript">
      function countDown(){  
          var toDay=Math.round(new Date().getTime()/1000);   
          $(".show").each(function() {
              var elm = $(this);
              var difTime=this.timestamp-toDay;  
              var day=0,hours=0,minutes=0,seconds=0;  
              if(difTime>0){  
                  day=Math.floor(difTime/84600);  
                  hours=Math.floor((difTime/3600))%24;  
                  minutes=Math.floor(difTime/60)%60;  
                  seconds=Math.floor(difTime)%60;   
              }  
              else{  
                  alert('asd');   //time out  
                  elm.removeClass("show");
              }  
              elm.html(day+' Day '+hours+' Hour '+minutes+' Min '+seconds+' Sec ');  
          });
      }  
      function countDown_onLoad(){  
          $(".show").each(function() {
              this.timestamp = parseInt(this.firstChild.nodeValue,10);
          });
          setInterval(countDown,1000);
      }  
      $(document).ready(function() {  
          countDown_onLoad();  
      });  
    </script>  
</head>  
<body>
    <?php
      $sql="SELECT * FROM `room_lists`";   
      $sqlquery = mysql_query($sql);   
      while($result = mysql_fetch_array($sqlquery)){   
          $toDay = strtotime($result['timeStop']);  
          echo "<div class=\"show\">".$toDay."</div>";
      }
    ?>
</body>
</html> 
```

请注意，我不使用 jQuery。我只在这里使用它，因为您已经在使用它。考虑到这一点，我可能错误地使用了`.each()`. 如果您遇到任何错误，请告诉我，我会尝试修复它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:55:55.393

如果要显示倒计时，则必须有一次，而不是多次，因此`LIMIT 1`在检索值时首先设置

而不是这样做

```
function countDown(times){
// blah blah blah
}
function countDown_onLoad(){
    setTimeout("countDown(<?=$toDay ?>);",1000);
}
$(document).ready(function() {
countDown_onLoad();
}); 
```

尝试以下方法

```
var countdown = function(myTime)
    { 
      // blah blah blah
    }
window.setInterval(countdown(<?=$toDay?>), 1000); 
```

# java - 在java中创建变量别名

> ID：11389198
> 
> 赞同：0
> 
> 时间：2012-07-09T04:46:11.490
> 
> 标签：java, variables

我需要一种方法来编写`R1`或`R[1]`引用相同的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T04:53:22.957

如果您尝试使用让 ALPHANUMBER 和 ALPHA[NUMBER] 引用同一个变量的一般模式，则不能这样做。Java中的方括号表示法是指数组中的一个元素，而第一个只是可以引用变量的通用标识符。

在创建两个变量的特定情况下，一个是直接引用，另一个是数组中的元素，您可以简单地指向`r[1] = r1`（只要`r1`已初始化）。

# ipad - 无法在 iPad iOS 5.1.1 上下载应用程序？

> ID：11389200
> 
> 赞同：1
> 
> 时间：2012-07-09T04:46:44.093
> 
> 标签：ipad

我有 2 个应用程序（应用程序'A. 和应用程序'B.）我通过“为企业”分发

我有 3 个 ipad - 2 个 ipad 使用 ios 5.1 - 1 个 ipad 使用 ios 5.1.1

我有网络服务器运行 iis，我将 .ipa 和 .plist 上传到网络服务器，并在网页上为下载应用程序 A 和应用程序 B 创建类似

我使用 ipad (ios 5.1) 下载并安装应用程序 A 和 B 没关系 没有任何问题

当我使用 ipad (ios 5.1.1) 下载并安装应用程序 A 时，没有任何问题，但是当我在 ipad 警报“无法下载应用程序”上下载并安装应用程序 B 时

我该如何解决

谢谢你

ps1。应用程序 A 和 B 相同的配置' ps2\. 对不起我的英语技能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:05:19.990

您是否尝试使用**In House**或**Ad Hoc** Certificate 分发您的申请？如果您不知道其中的区别，您可以查看[这篇](http://blog.appaloosa-store.com/3-things-to-know-to-distribute-your-ios-apps)文章以更好地了解如何分发您的应用程序。

您的问题似乎是一个已知问题：techplex、techiehq 上的文章...

如果您使用的是**Ad Hoc**证书，您应该在您的配置文件中配置了授权设备的 UDID。您确定在此配置文件中为您的 iPad 配置了 5.1.1 吗？

如果您使用的是**内部**证书，那么您不是遇到此问题的人。这似乎是 iOS 5.1.1 的问题。一些可能性是：

*   您使用的是 3G 而不是 Wifi，下载时出现问题。
*   您正在更新您的应用程序，但它不起作用。
*   你有一个 iOS 5.1.1 错误

我正在做[这个](http://www.appaloosa-store.com)。您可以创建一个免费帐户，并尝试使用此服务将您的应用程序分发到您的设备。您将访问诸如您使用的证书类型、引用了哪些设备等信息。

请给我更多信息：

*   内部证书还是临时证书？
*   下载过程中是否出现错误（进度条低于2/3）？
*   您是否尝试使用 Wifi 或 3G 安装您的应用程序？

# c# - 如何将此 T-SQL 转换为 LINQ

> ID：11389204
> 
> 赞同：1
> 
> 时间：2012-07-09T04:46:59.120
> 
> 标签：c#, sql, linq, linq-to-entities

我有以下 SQL 语句

```
 SELECT [CodeHouse]
          ,[CodeReq]
          ,[Address]
      FROM [ShahrdariProject].[dbo].[House]
      where [CodeReq] in
      (select [CodeReq] From [ShahrdariProject].[dbo].[HouseOwner] where [Name] = 'Alex' ) 
```

谁能帮我将此语句转换为 LINQ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:57:28.507

这个 SQL：

```
 SELECT [CodeHouse]
      ,[CodeReq]
      ,[Address]
  FROM [ShahrdariProject].[dbo].[House]
  where [CodeReq] in
  (select [CodeReq] From [ShahrdariProject].[dbo].[HouseOwner] 
   where [Name] = 'Alex' ) 
```

相当于这个 Linq：

```
var q = from h in db.Houses
        where db.HouseOwners.Any(x => x.Name == "Alex" && x.CodeReq == h.CodeReq)
        select h; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:54:17.870

```
using(var dbContext = new /**Your Linq DataContext class here**/())
{

    var results = dbContext.House.Join(
                dbContext.HouseOwner.Where(ho => ho.Name == "Alex"), 
                h => h.CodeReq, 
                ho => ho.CodeReq,
                (h, ho) => select new { h.CodeHouse, h.CodeReq, h.Address }).ToArray();
} 
```

编辑：根据您的查询，我认为可以使用 JOIN 而不是使用 IN 来表达查询

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T04:57:35.857

```
List<string> codeReq = new List<string>();
using(DemoDataContext db = new DemoDataContext()){
var houses = from h db.Houses where codeReq.Contains(h.codeReq) selec h;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T05:50:25.280

尝试使用以下代码，我相信这可以解决您的问题

```
var result = from house in db.Houses
    where db.HouseOwners.Any(z => z.Name == "Alex" && z.CodeReq == house.CodeReq)
    select house; 
```

享受......

# c# - 如何使用 TDD（首先测试）进行密码哈希实现？

> ID：11389206
> 
> 赞同：2
> 
> 时间：2012-07-09T04:47:16.363
> 
> 标签：c#, unit-testing, language-agnostic, hash, tdd

我有一个悖论。

在构建实现​​之前，我正在尝试使用 TDD 为我的密码哈希方法构建测试。但是我不知道如何事先提出预期值，而无需先构建实现。

当然，通过简单的散列实现，我可能会找到一个站点来根据已知的密码/盐创建预期值。

我打赌解决方案是对 TDD 进行例外处理，并首先放弃构建我的测试。相反，构建我的实现以提出正确的盐/哈希值，然后针对这些值构建我的测试以防止回归。

但我想我会发布这个，看看是否有我没有想到的解决方案。

或者，也许有人可以在他们的头脑中生成哈希值，以便首先构建测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:52:57.900

我不知道您是否正在编写自己的散列函数，例如 sha-1（在这种情况下只是不这样做）或者您正在使用外部散列和随机函数来生成盐等。在第二种情况下，您不需要必须知道你的输出。您只需模拟您的哈希和随机提供程序，并检查它们是否在您的输入和/或部分结果上被调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:50:21.850

所以，基本上你在做 TDD 时应该知道“预期”的输出。在您的情况下，预期输出是散列函数的结果。

如果您正在实施已知的散列算法，那么从他们的站点获取测试结果或手动生成它们都不是问题。

如果您正在开发自己的算法。您还应该通过实现算法实现的原型来知道预期的输出。即使您不知道它们是否正确，您也只是假设它们正确并在测试中使用值。如果散列函数的实现发生变化，那些测试就会变成红色。

# python - 为什么将数据添加到数据库时会出现管道损坏错误？

> ID：11389207
> 
> 赞同：3
> 
> 时间：2012-07-09T04:47:20.543
> 
> 标签：python, sqlalchemy, pyramid

不确定是否有更好的方法可以做到这一点，但我的网站上有一个注册页面，在用户注册后，我添加了他们的初始数据（`__init__`数据模型中的内容）然后我开始在同一部分添加一些其他信息给我一个`broken pipe`错误。奇怪的是，代码似乎可以工作，因为我期望的条目在数据库中。我尝试过移动`.flush()`命令以查看它是否有帮助，但似乎没有。

```
Traceback (most recent call last):
  File "/Users/me/Dropbox/code/eclipseWorkSpace/website/pyramidwiki/lib/python2.7/site-packages/waitress-0.8.1-py2.7.egg/waitress/channel.py", line 134, in handle_write
    flush()
  File "/Users/me/Dropbox/code/eclipseWorkSpace/website/pyramidwiki/lib/python2.7/site-packages/waitress-0.8.1-py2.7.egg/waitress/channel.py", line 249, in _flush_some
    num_sent = self.send(chunk)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/asyncore.py", line 365, in send
    result = self.socket.send(data)
error: [Errno 32] Broken pipe 
```

这是我的代码：

```
if 'form.submitted' in request.params:
    firstname = request.params['firstname']
    lastname = request.params['lastname']
    email = request.params['email']
    password = request.params['password']
    try:
        new_user = Users(email, firstname, lastname, password)
        DBSession.add(new_user)
        #DBSession.flush() #commit so we get error if any
        #add some other info
        user_data = DBSession.query(Users).filter(Users.email==email).first()
        user_data.join_date = datetime.datetime.now()
        #create random number for verification url
        user_data.vertified = id_generator(50)

        DBSession.flush() #doesn't seem to make a difference where the flush is
        return HTTPFound(location = request.route_url('new')) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:40:54.293

这可能不会直接回答您的问题，但是“您做错了”（tm）:)

将 User 对象添加到会话后，您不需要重新查询它 - 更重要的是，尝试从数据库中查询它而不先执行 session.flush() 将导致错误，因为数据库中还没有记录. 我会做这样的事情：

```
if 'form.submitted' in request.params:
    firstname = request.params['firstname']
    lastname = request.params['lastname']
    email = request.params['email']
    password = request.params['password']
    try:
        new_user = Users(email, firstname, lastname, password)
        new_user.join_date = datetime.datetime.now()
        new_user.verified = id_generator(50)

        DBSession.add(new_user)
        DBSession.flush() # should fail if user email is in the database
        return HTTPFound(location = request.route_url('new')) 
```

此外，您需要检查所有执行分支（即 except: 子句、“if 'form.submitted' in request.params”的 else: 子句是否返回有意义的内容 - 您可能会收到异常，因为您的视图函数返回在某些情况下没有。实际上，这可能是正在发生的事情——“user_data = DBSession.query(Users)”行引发了一个异常，而 except: 部分没有返回任何内容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T15:00:22.170

我在我的 Pyramid 项目中也遇到了同样的问题，与 github 上的评论相反，它不是`waitress`.

就我而言，问题`Error: Broken Pipe`仅在我使用重定向（等）时`HTTPFound`发生`HTTPMovedPermanently`。由于您的功能也使用`HTTPFound`，我认为问题是一样的。

至少对我来说，这个错误是由于`pyramid_debugtoolbar`扩展造成的。原因可能是每当我们的视图做类似的事情时

`return HTTPFound(foo)`

它在标头中发送一个 302 和一个`Connection:Close`. 该`pyramid_debugtoolbar`扩展为响应添加了一个冗长的正文。客户端在看到标头时关闭连接并且不接受冗长的调试正文。因此`Broken Pipe`消息（至少这是 Wireshark 显示的）。

尝试`pyramid_debugtoolbar`在您的应用程序中禁用`.ini`，它可能会有所帮助。

# svg - 捕获被另一个透明形状阻挡的形状的鼠标悬停事件

> ID：11389212
> 
> 赞同：2
> 
> 时间：2012-07-09T04:48:27.410
> 
> 标签：svg, d3.js

我有许多透明的重叠椭圆（如下所示）。

我在鼠标悬停时突出显示每个椭圆，但不可能突出显示许多椭圆，因为其他椭圆已经绘制在它们上面。

根据我对svg的有限知识，有三种解决方案：

*   找到一些方法来只检测每个椭圆边缘的鼠标悬停。
*   使用贝塞尔曲线绘制椭圆。
*   重新排列椭圆的绘制。我不确定如何做到这一点，或者如果考虑到所有这些形状，是否可以通过这种方式解决它。

任何帮助深表感谢！

![在此处输入图像描述](../Images/13f112121c8097e070e2b6ce9ca90dc3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:44:13.947

svg 中的目标区域只是在屏幕上绘制的任何内容。所以，理论上，你的椭圆应该只能在他们的笔划上悬停。如果不是这种情况，那么您可能会使用其他东西来设置填充`none`（也许`rgba(0,0,0,0)`？）。

您也可能在`g`元素而不是椭圆上设置悬停。

你可以在这里看到一个例子：http: [//jsfiddle.net/r65E9/](http://jsfiddle.net/r65E9/)

```
ellipse {
  stroke: #fff;
  stroke-width: 1;
  fill: none;
}

ellipse:hover {
  stroke: #f66;
} 
```

# mysql - 使用 unix 套接字时，postfix 无法与 mysql 表连接。postmap 成功了吗？

> ID：11389214
> 
> 赞同：5
> 
> 时间：2012-07-09T04:48:36.157
> 
> 标签：mysql, postfix-mta

Postfix抛出一个错误说：

> 7 月 9 日 14:41:26 tmail postfix/trivial-rewrite[4342]：警告：连接到 mysql 服务器 unix:/var/run/mysqld/mysqld.sock：无法通过套接字连接到本地 MySQL 服务器'/var/运行/mysqld/mysqld.sock' (2) Jul 9 14:41:26 tmail postfix/trivial-rewrite[4342]: 致命: mysql:/etc/postfix/mysql-yaa-aliases.cf(0,lock|fold_fix ): 查表问题

在 main.cf 我有：

```
virtual_alias_maps = mysql:/etc/postfix/mysql-yaa-aliases.cf 
```

在 mysql-yaa-aliases.cf 我有：

```
hosts = unix:/var/run/mysqld/mysqld.sock
# hosts = 127.0.0.1
user = yaa_admin
password = ********
dbname = yaa
query = SELECT dest FROM yaa_active_aliases WHERE address='%s' 
```

如果我使用 127.0.0.1 它可以工作（不理想，因为我更喜欢套接字的速度。）另外，如果我用 postmap 测试套接字它可以工作：

```
# postmap -q "bholly@example.org" mysql:/etc/postfix/mysql-yaa-aliases.cf
bholly@example.org, bholly@autoreply.example.org 
```

当我在 trivial-rewrite 守护进程上使用 strace 时，我得到：

```
connect(11, {sa_family=AF_FILE, path="/var/run/mysqld/mysqld.sock"}, 110) = -1 ENOENT (No such file or directory) 
```

而使用 postmap 的 strace 我得到：

```
connect(4, {sa_family=AF_FILE, path="/var/run/mysqld/mysqld.sock"}, 110) = 0 
```

顺便说一句 - 目前正在运行 Postfix 2.7，但故障仍然显示为 2.9

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T02:51:57.647

找到了 :) - trivial-rewrite 发生在 chroot 监狱中，因此套接字文件真的不存在。

解决方案（感谢[https://serverfault.com/questions/229389](https://serverfault.com/questions/229389)帮助我解决此问题）是将其添加到 /etc/fstab：

```
/var/run/mysqld /var/spool/postfix/var/run/mysqld bind defaults,bind 0 0 
```

因此允许 Postfix 保留其 chroot 配置，并允许它访问 mysql 套接字。

# asp.net - 使用 Code First 时是否有向现有数据库“添加”表的方法？

> ID：11389216
> 
> 赞同：1
> 
> 时间：2012-07-09T04:49:09.103
> 
> 标签：asp.net, entity-framework, code-first

我想将基于 Code First 的模块构建添加到一个正在运行的网站，该网站已经有一个数据库。如果我将模块设置为在单独的数据库上运行，它可以正常工作。

但是我的朋友只想将我的模块创建的表“添加”到现有数据库中，而不添加新数据库。

反正有存档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:16:23.280

解决方案很简单也很容易：

*   运行该模块以创建一个新的、干净的数据库
*   使用 SQL Server 生成创建该数据库表的 sql 脚本。我个人认为不需要元数据表
*   针对目标数据库运行这些脚本
*   修改连接字符串以指向目标数据库

现在它运行完美！我很开心

谢谢你。

# javascript - 自定义 jQuery 显示/隐藏 div JS 在 ASP.Net 中不起作用

> ID：11389219
> 
> 赞同：0
> 
> 时间：2012-07-09T04:49:41.823
> 
> 标签：javascript, jquery, .net, master-pages, scriptmanager

我有一个母版页，其中添加了脚本管理器和 Javascript/Jquery。见下文：

```
<asp:ScriptManager ID="SM" runat="server" EnablePartialRendering="true">
    <Scripts>
        <asp:ScriptReference Path="~/Scripts/jquery-1.7.2.min.js" ScriptMode="Release" />
        <asp:ScriptReference Path="~/Scripts/Custom.js" ScriptMode="Release" />
    </Scripts>
</asp:ScriptManager> 
```

自定义 Js：

```
$(".section").click(function () {  
    if ($(this).next(".sectiondetail").is(":hidden")) {
        $(this).next(".sectiondetail").slideDown("slow");
        $(this).children('span').text('[-]');
} else {
        $(this).next(".sectiondetail").slideUp("slow");
        $(this).children('span').text('[+]');
}
}); 
```

我在我的 ASCX 控件中放置了以下 html，该控件添加到使用我的母版页的内容页面中：

```
<div class="section">
    <span>[+]</span> General Information
</div>
<div class="sectiondetail" style="display: none;">
     Details go here.
</div> 
```

JS 功能没有按预期工作。如果我在我的 ASCX 控制页面中添加 JS 函数，它会按预期工作。这里有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T04:53:14.143

当您绑定点击事件时，您可能没有准备好/使用 css 渲染的 html 控件`section`。`On`即使在此脚本块绑定单击之后添加或呈现元素，也会确保添加单击事件。

```
$(".section").on("click", function () {  
    if ($(this).next(".sectiondetail").is(":hidden")) {
        $(this).next(".sectiondetail").slideDown("slow");
        $(this).children('span').text('[-]');
} else {
        $(this).next(".sectiondetail").slideUp("slow");
        $(this).children('span').text('[+]');
}
}); 
```

或者您可以在文档准备好时绑定事件。

```
$(function(){
$(".section").click(function () {  
    if ($(this).next(".sectiondetail").is(":hidden")) {
        $(this).next(".sectiondetail").slideDown("slow");
        $(this).children('span').text('[-]');
} else {
        $(this).next(".sectiondetail").slideUp("slow");
        $(this).children('span').text('[+]');
}
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:00:48.873

使用`style="visibility: hidden;"`代替`style="display: none;"`

```
<div class="sectiondetail" style="visibility: hidden;">
    Details go here.
</div> 
```

如果您使用以下代码，

```
$(this).next(".sectiondetail").is(":hidden") 
```

或者您可以使用；

```
$(this).next(".sectiondetail").css('display') == 'none' 
```

在您当前的情况下，即`style="display: none;"`

# asp.net-mvc - MVC3 - 控制器从根而不是从区域返回视图

> ID：11389222
> 
> 赞同：2
> 
> 时间：2012-07-09T04:49:50.227
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试实现多租户 MVC3 应用程序。包括子域请求在内的所有 url 请求都被定向到主应用程序。解决方案是拥有默认的主控制器和一个名为“客户端”的区域。所以有2条路线。

这在客户区

```
context.MapRoute(
            "Client_default",
            "{controller}/{action}/{id}",
            new { controller = "Dashboard", action = "Index", id = UrlParameter.Optional },
            new {controller = new ClientAreaConstraint()},
            new[] { "MainApp.UI.Areas.Clients.Controllers" }); 
```

这在全球asax

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Dashboard", action = "Index", id = UrlParameter.Optional },
            new[] { "MainApp.UI.Controllers" }
        ); 
```

一个用于区域，一个用于主要区域。在该区域的路由中，我添加了一个路由约束，用于检查 url 是否有子域，如果是则返回 true。

```
public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        var url = httpContext.Request.Headers["HOST"];
        var clientName = url.Split('.')[1];
        return clientName != "mainsite";
    } 
```

这有效，区域控制器正在获取子域请求。但是当我尝试调用 return View() 时。它在主文件夹中而不是在区域文件夹中查找视图。我的网址看起来像这样 [http://www.client.mainsite.com/](http://www.client.mainsite.com/)并且没有区域名称。是不是因为这个？可能是什么问题呢 ？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:27:43.527

检查是否有一个虚拟路径被映射为区域名称。我在 Visual Studio 中设置区域地址只是为了调试，它要求我创建一个虚拟路径。所以 AppRelativeCurrentExecutionFilePath 总是 ~/ 并且路由无法确定区域。对于 IIS 快速删除站点的虚拟路径：

C:\Users\username\Documents\IISExpress\config\applicationhost.config

我花了 4 天时间才发现它。

# mysql - MySQL 查询 - 只有确切的结果或每个选择

> ID：11389223
> 
> 赞同：0
> 
> 时间：2012-07-09T04:50:05.660
> 
> 标签：mysql

我有一个需要帮助的查询 - 作为表单的一部分，我有一个序列号字段，如果有序列号则填充该字段，如果没有则为空白，或者如果它是无效的序列号则没有结果。

```
select * 
from cust_site_contract as cs 
where cs.serial_no = 'C20050' or (cs.serial_no <> 'C20050' and if(cs.serial_no = 'C20050',1,0)=0)
limit 10; 
```

这是常规数据的示例：

```
+----------------------+-----------+-----------+-----------
| idcust_site_contract | system_id | serial_no | end_date
+----------------------+-----------+-----------+-----------
|               561315 | SH001626  | C19244    | 2009-12-21
|               561316 | SH001626  | C19244    | 2010-06-30
|               561317 | SH002125  | C19671    | 2010-05-31
|               561318 | SH001766  | C14781    | 2010-09-25
|               561319 | SH001766  | C14781    | 2011-02-15
|               561320 | SH002059  | C19020    | 2008-07-09
|               561321 | SH002639  | C18889    | 2008-03-31
|               561322 | SH002639  | C18889    | 2008-06-30
|               561323 | SH002715  | C20051    | 2010-04-30
|               561324 | SH002719  | C20057    | 2010-04-30 
```

确切的结果看起来像这样：

```
|               561487 | SH002837  | C20050    | 2012-07-04 
```

我把它写成一个子查询，所以我可以将 system_ids 与客户和合同名称相匹配，但我很早就意识到我得到了垃圾。我很想尝试通过说第三种情况可能不成立来简化它（即，如果它是无效的序列号，允许选择任何客户名称并简单地在数据中标记它）有没有人知道我在哪里会出错吗？条件的组合显然是错误的，我无法弄清楚如何使 or 语句的每一侧互斥即使我尝试仅评估 if(sn = 'blah') 出于明显的原因我得到错误的结果，但想不出一种理智的方式来表达它。非常感谢斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:06:48.870

如果没有序列号为 的合同`C20050`，则此查询将返回所有行，否则，它将仅返回一行，其中`serial_no`is `C20050`：

```
SELECT a.*
FROM cust_site_contract a
INNER JOIN
(
    SELECT COUNT(*) AS rowexists
    FROM cust_site_contract
    WHERE serial_no = 'C20050'
) b ON b.rowexists = 0

UNION ALL

(
    SELECT *
    FROM cust_site_contract 
    WHERE serial_no = 'C20050'
    LIMIT 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:03:01.100

如果您只编写如下查询，如果不存在或序列号无效，您将获得空白。

```
select cs.serial_no from cust_site_contract as cs where cs.serial_no = 'C20050' 
```

# python - 将 dom 文档对象转换为节点类型对象

> ID：11389225
> 
> 赞同：1
> 
> 时间：2012-07-09T04:50:12.707
> 
> 标签：python, linux, ubuntu-10.04, xmldom

我的代码：

```
#!/usr/bin/python 

import xml.dom.minidom
from array import *
import re

count = array('i',[0,0,0,0,0,0,0])

def find_root_tags(file,str1,i):

    dom  = xml.dom.minidom.parse(file)

    if dom == str1:
        count[i] = count[i]+1

    for j in dom.getElementsByTagName(str1.lower()):    
        count[i] = count[i] + 1

    find_text(file,str1,i)
    find_root_attribute(file,str1,i,dom)

 def find_text(file,str1,i):

     str1 = str1.lower()
     exp = re.compile(r'<.*?>')
     with open(file) as f:
         lines = ''.join(line for line in f.readlines())
         text_only = exp.sub('',lines).strip()

     text_only = text_only.lower()
     k = text_only.count(str1)
     count[i] = count[i]+k

def find_root_attribute(file,str1,i,dom):

    str1 = str1.lower()
    for child in dom.childnodes:

         if child.hasAttributes():
             print cmn 
```

当我运行此代码时，它给了我一个错误，即文档对象没有属性`childnodes`。基本上我想将文档实例转换为节点类型实例，然后想使用节点属性`childnodes`。`xml`或者我应该通过创建节点实例再次解析文件。我怎样才能做到这一点 ？

请帮忙，我是`xml`解析新手

# javascript - 看起来很简单，为什么这行不通？

> ID：11389227
> 
> 赞同：0
> 
> 时间：2012-07-09T04:50:21.083
> 
> 标签：javascript, html, css, jsfiddle

[http://jsfiddle.net/TAvtJ/](http://jsfiddle.net/TAvtJ/)

尝试做一些更复杂的事情，但我似乎不了解向元素添加样式的基础知识？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T04:53:00.917

问题是 jsfiddle 默认将您的代码放在`onload`处理程序中，这意味着您的`changeColor()`函数不是全局函数，并且无法从内联事件属性中访问。

如果您查看 jsfiddle 页面的左侧，您可以选择一个要包含的框架（它默认为 MooTools，但您可以使用 jQuery 和其他各种）并选择您的 JavaScript 是在 head、body、onload 处理程序还是onDOMReady 处理程序。

因此，如果您将其包含在头部或正文中，您的代码就可以工作：http: [//jsfiddle.net/TAvtJ/1/](http://jsfiddle.net/TAvtJ/1/)

# android - 移动设备上的 iframe 支持

> ID：11389228
> 
> 赞同：9
> 
> 时间：2012-07-09T04:50:21.770
> 
> 标签：android, html, mobile, jquery-mobile, windows-mobile

在移动设备上使用 iFrame 时是否有任何歧义？是否所有移动设备都支持 iFrame。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T05:04:36.070

Ideally all mobile devices should support iFrame however situation can leads you to some known issues which are mentioned in below links.

You can put `<iframe src="page-1.htm" name="test" height="120" width="600">You need a Frames Capable browser to view this content.</iframe>` code in your page and test on various platform.

Following are known issues.

1.  [iframe is not working android inbuild browser how can resolve issue?](https://stackoverflow.com/questions/9187920/iframe-is-not-working-android-inbuild-browser-how-can-resolve-issue)
2.  [http://androidforums.com/android-applications/7101-android-browser-iframe-question.html](http://androidforums.com/android-applications/7101-android-browser-iframe-question.html)
3.  [http://www.sitepoint.com/forums/showthread.php?843814-Iphone-iframe-browser-crash-issue-anyone](http://www.sitepoint.com/forums/showthread.php?843814-Iphone-iframe-browser-crash-issue-anyone)

For alternate you can also try [jQuery Cycle](http://jquery.malsup.com/cycle/) if that suits your requirements.

# c - C 宏的特殊用途

> ID：11389230
> 
> 赞同：6
> 
> 时间：2012-07-09T04:50:34.327
> 
> 标签：c, enums, constants, preprocessor

阅读 C 库的套接字接口的代码，我发现：

```
/* Types of sockets.  */
enum __socket_type
{
   SOCK_STREAM = 1,     /* Sequenced, reliable, connection-based
               byte streams.  */
#define SOCK_STREAM SOCK_STREAM
   SOCK_DGRAM = 2,      /* Connectionless, unreliable datagrams
               of fixed maximum length.  */
#define SOCK_DGRAM SOCK_DGRAM
... 
```

这个“成语”在 bits/socket.h 中使用。我只是好奇，这些宏的目的是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T04:53:53.427

这些常量过去只是`#define`s，所以您所看到的可能是为了防止您意外混合新旧头文件。使用`enum`来定义常量的一个优点是`enum`成员往往在调试器中可用，而`#define`宏不可用。

如果您（不小心）包含其他一些也尝试包含的头文件`#define SOCK_STREAM`，您将收到编译器警告，而不是默默地使用可能不正确的值。

### 更新

查看[glibc git repo](http://repo.or.cz/w/glibc.git/commit/5b82669229ad4e39c6ba1467045a2d81d44b8ccc?f=bits/socket.h)，我找到了添加`#define`s 的特定提交，并带有以下注释：

```
* sysdeps/generic/socketbits.h: Also make SOCK_* constants available
as macros so that #ifdef works.
* sysdeps/unix/sysv/linux/socketbits.h: Likewise. 
```

你有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T04:53:09.683

它是“枚举”的 C 等价物。

逻辑套接字类型“流”（SOCK_STREAM）对应于二进制值“1”。“数据报”（SOCK_DGRAM）是类型“2”。等等。

“套接字”是在“枚举”成为 C 语言的一部分之前发明的。

上述成语允许您在代码中使用“SOCK_STREAM”（例如）；它还允许您使用“#ifndef SOCK_STREAM”（这在某些遗留程序中可能很重要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T21:54:11.297

历史系统使用宏并且没有这样的枚举。

旧版本的 POSIX/Single Unix（例如[SUSv3](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/socket.h.html)）强制要求`SOCK_xxx`是宏。这意味着这些常量可以用在预处理器指令中（例如`#ifdef SOCK_DGRAM`）。这有时对于在构建时检查系统是否支持非标准套接字类型很有用。

较新的标准（例如[SUSv4](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_socket.h.html)）放宽了对系统的这一要求：`SOCK_xxx`常量可以是任何类型的[符号常量](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_374)。这包括预处理器宏，但也包括任何其他类型的生成常量表达式的定义（适用于静态初始化器和其他需要常量表达式的上下文），例如枚举常量。

您正在查看的实现符合 SUSv3（以及 SUSv4、SUSv3 合规性意味着在这方面 SUSv4 合规性）。仅定义枚举而不定义常量的实现将符合 SUSv4 但不符合 SUSv3。

定义枚举的优点是，如果`SOCK_xxx`在不需要一个常量的上下文中使用常量，或者在`SOCK_xxx`预期值的地方使用任意整数，它允许编译器给出体面的反馈。

许多类似的常量集也是如此。

# android - 如何动态地将 X 个 TextViews 添加到我的小部件中？

> ID：11389231
> 
> 赞同：0
> 
> 时间：2012-07-09T04:50:37.797
> 
> 标签：android, dynamic, android-linearlayout, textview, android-appwidget

我已经搜索和搜索，无论出于何种原因，我似乎都无法让它工作。

我目前正在做的是我有一个配置类，我在其中基于微调器上的选定项目，想要创建 x 数量的 TextViews，我也想设置它们的文本。所以我不能只在 .xml 文件中创建这些 TextView，我必须在运行时创建它们，因为直到那时我才知道需要多少。这些 TextView 必须添加到小部件中，以便在按下配置类的添加小部件按钮时创建小部件时显示它们。我想将文本视图添加到我的小部件垂直线性布局中，该布局包含在相对布局内的水平线性布局中。

到目前为止，我已经能够创建 TextViews 并设置正确的文本，但无论我尝试什么，我只是不知道如何将它们添加到小部件中，以便实际显示它们。我试过膨胀小部件布局，获取 id 并添加它们，试图用 RemoteViews 鬼混，因为我意识到这是一个小部件，这就是它应该如何完成的。似乎没有什么让他们想要添加，即使我只是尝试从代码创建 1 个 TextView 也是如此。我只是无法让它显示自己和我给它的 setText。

我正在使用android 2.2 btw，这是我的第一个android应用程序/小部件，所以请不要太残忍，因为我在某个地方犯了一个愚蠢的错误......

如果您需要代码示例以更好地帮助我，请让我知道，并且稍后尝试添加它。现在我在无法访问代码的计算机上寻求帮助:)

非常感谢您花时间阅读本文！希望有人能告诉我我必须做什么才能完成这项工作。或者它是否可能：S /Chris

编辑：

这是我试图让它工作的事情之一，但我想这不起作用，因为我正在使用一个小部件，我应该使用远程视图并以某种方式完成它？从我读过的东西来看，远程视图似乎只适用于 xml 生成的代码。如果情况确实如此，那么我将如何创建文本视图并将其添加到我的小部件？:S

```
//the context c is defined as this, elsewhere:
c = WidgetConfig.this;

public void createPopulateTable(RemoteViews rv){

LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.widget, null);

LinearLayout vll1 = (LinearLayout)layout.findViewById(R.id.wVertLinearL1);

// Create a TextView for the left column
TextView wLabelTv = new TextView(c);
wLabelTv.setId(200);
wLabelTv.setTextColor(Color.BLACK);
wLabelTv.setLayoutParams(new LayoutParams(
    LayoutParams.WRAP_CONTENT,
    LayoutParams.WRAP_CONTENT));
wLabelTv.setText("No Classes Today");
vll1.addView(wLabelTv);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:17:19.810

I ended up dropping the idea of dynamically creating the amount of TextViews i needed, and instead created a basic layout of sorts, in xml, on which i could (through iterations) set the text and formatting i wanted, and simply add the entire xml file over and over again :)

Each row i needed, was always gonna contain a textview and 3 imageviews. I made that skeleton in the new xml file. And in the code i set them to what i wanted, and added the row to the main layout. I did this for each row i needed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-13T06:54:47.830

```
Hi Chris below is a resouce I developed to dynamically generate spinners and edit texts which are added to a linear layout hope it helps. This function 
```

为元素提供可用于操作元素属性的唯一 ID

```
 /*Dynamic function*/
    public void dynaGen(LinearLayout tbl, ArrayList<Integer> ida, ArrayList<Integer> idab, ArrayList<Integer> idac,
                          ArrayList<Integer> idad, ArrayList<Integer> idae, ArrayList<Integer> idaf, final double eunica) {
        ArrayList<Integer> uniqid = new ArrayList<>();
        ArrayList<String> products = resocs.getallPRD();

        for (int i = 0; i < 6; ++i) {
            uniqid.add(Resources.generateViewId());
        }

        LayoutInflater inflater = (LayoutInflater) ordContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View cont = inflater.inflate(R.layout.order_pluxo, null);

        View child = ((ViewGroup) cont).getChildAt(0);
        Spinner prduct = (Spinner) child;
        prduct.setId(Math.abs(uniqid.get(0)));
        prduct.setPadding(0, 10, 0, 10);
        prduct.setAdapter(new ArrayAdapter(ordContext, R.layout.spinresoc, products) {
            public View getDropDownView(int v, View view, ViewGroup viewGroup) {
                TextView textView = (TextView) super.getDropDownView(v, view, viewGroup);
                textView.setTextSize((float) eunica + 5.0f);
                return textView;
            }

            public View getView(int v, View view, ViewGroup viewGroup) {
                TextView textView = (TextView) super.getView(v, view, viewGroup);
                textView.setTextSize((float) eunica + 5.0f);
                return textView;
            }
        });
        prduct.setOnItemSelectedListener((AdapterView.OnItemSelectedListener) ordContext);
        resocs.spinMod(prduct, eunica);

        View childb = ((ViewGroup) cont).getChildAt(1);
        EditText quanty = (EditText) childb;
        quanty.setId(Math.abs(uniqid.get(1)));
        quanty.setHint("Quantity");
        quanty.setTextSize((float) eunica + 5.0f);
        quanty.addTextChangedListener((TextWatcher) ordContext);

        View childc = ((ViewGroup) cont).getChildAt(2);
        EditText price = (EditText) childc;
        price.setId(Math.abs(uniqid.get(2)));
        price.setHint("Price");
        price.setTextSize((float) eunica + 5.0f);

        View childd = ((ViewGroup) cont).getChildAt(3);
        EditText vat = (EditText) childd;
        vat.setId(Math.abs(uniqid.get(3)));
        vat.setHint("VAT");
        vat.setTextSize((float) eunica + 5.0f);

        View childe = ((ViewGroup) cont).getChildAt(4);
        EditText discount = (EditText) childe;
        discount.setId(Math.abs(uniqid.get(4)));
        discount.setHint("Discount");
        discount.setTextSize((float) eunica + 5.0f);
        discount.addTextChangedListener((TextWatcher) ordContext);

        View childf = ((ViewGroup) cont).getChildAt(5);
        EditText total = (EditText) childf;
        total.setId(Math.abs(uniqid.get(5)));
        total.setHint("Total");
        total.setTextSize((float) eunica + 5.0f);

        tbl.addView(cont, new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,
                ViewGroup.LayoutParams.WRAP_CONTENT));

        ida.add(prduct.getId());
        idab.add(quanty.getId());
        idac.add(price.getId());
        idad.add(vat.getId());
        idae.add(discount.getId());
        idaf.add(total.getId());

    }

/*XML resource*/
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.flexbox.FlexboxLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    app:alignContent="flex_start"
    app:alignItems="flex_start"
    app:flexDirection="row"
    app:flexWrap="nowrap">

    <Spinner
        android:layout_width="wrap_content"
        android:layout_height="40.0dip"
        android:background="@drawable/spintleric"
        android:minWidth="100.0dip"
        android:padding="10.0dip"
        android:popupBackground="@drawable/spinback_resoc"
        app:layout_flexBasisPercent="35.000004%"
        app:layout_flexGrow="1.5" />

    <EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/edtxtdta_resoc"
        android:gravity="center"
        android:minWidth="100.0dip"
        android:padding="10.0dip"
        android:textColor="#ff000000"
        android:hint="@string/ordestringc"
        app:layout_flexBasisPercent="20.0%"
        app:layout_flexGrow="1.5" />

    <EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/edtxtdta_resoc"
        android:gravity="center"
        android:minWidth="100.0dip"
        android:padding="10.0dip"
        android:textColor="#ff000000"
        android:editable="false"
        android:hint="@string/ordestringd"
        app:layout_flexBasisPercent="20.0%"
        app:layout_flexGrow="1.5" />

    <EditText
        android:id="@+id/ordedtxtb"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/edtxtdta_resoc"
        android:gravity="center"
        android:minWidth="100.0dip"
        android:editable="false"
        android:padding="10.0dip"
        android:textColor="#ff000000"
        android:hint="@string/ordestringe"
        app:layout_flexBasisPercent="20.0%"
        app:layout_flexGrow="1.5" />

    <EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/edtxtdta_resoc"
        android:gravity="center"
        android:minWidth="100.0dip"
        android:padding="10.0dip"
        android:textColor="#ff000000"
        android:hint="@string/ordestringf"
        app:layout_flexBasisPercent="20.0%"
        app:layout_flexGrow="1.5" />

    <EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/edtxtcomb_resoc"
        android:gravity="center"
        android:minWidth="100.0dip"
        android:padding="10.0dip"
        android:editable="false"
        android:textColor="#ff000000"
        android:hint="@string/ordestringg"
        app:layout_flexBasisPercent="20.0%"
        app:layout_flexGrow="1.5" />
</com.google.android.flexbox.FlexboxLayout> 
```

# excel - 使用特殊计算器写入表格

> ID：11389233
> 
> 赞同：0
> 
> 时间：2012-07-09T04:50:46.527
> 
> 标签：excel, excel-formula

我有一个下载的 Excel 电子表格，它有一个特殊的内置计算器。

在另一张表中，我列出了 173 个值。这些我输入到计算器单元格中，在另一个单元格中按回车键，然后在另一个单元格中弹出返回值。

我希望每个返回单元格的值与其列表值相邻输入。

我怎样才能在不使用`IF`语句的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:03:47.353

Excel 中有一个特殊的功能可以做这种事情：*数据表*。

您可以从同一个工作表中的任何位置（“特殊计算器”的一部分）指定一个现有的输出单元格和 1 个或 2 个输入单元格，以及一个包含您要使用的输入的范围（在本例中为 173 个值）。然后，您将获得一个 1 路或 2 路表，其中包含输出单元格将为输入单元格的一系列值中的每一个所采用的值。中间计算可以任意复杂，并且可以引用其他工作表上的单元格。

如果您想一次更改两个以上的输入，您需要做的是首先在表格中列出您想用作场景的每个组合：

```
scenario    var1    var2    var3
1   1   1   2
2   1   3   2
3   2   1   1 
```

然后，您可以使用基于包含场景编号的单元格的 vlookups 来填充您想要更改的所有其他单元格，并将场景单元格设置为单向数据表的行输入。

# php - 分页错误--> 未定义索引

> ID：11389236
> 
> 赞同：0
> 
> 时间：2012-07-09T04:51:23.017
> 
> 标签：php, mysql

这不是重复条目。我已经阅读了具有相同内容的上一篇文章，但我找不到解决方案。这就是为什么我决定发布这个。

编辑 02

```
<!-- language: lang-php -->

    <?php

 if (isset($_POST['lab_id']) && is_numeric($_POST['lab_id'])) 
   {         
     $lab_id = $_POST['lab_id']; 
   } 
else if (isset($_GET['lab_id']) && is_numeric($_GET['lab_id'])) 
   {         
     $lab_id = $_GET['lab_id']; 
   } 

//$targetpage = "view_all_chemicallab.php";     
    $limit      = 2; 

    $query = "SELECT COUNT(*) as num FROM chemical 
JOIN lab_inventory_chemical ON chemical.chemical_code = lab_inventory_chemical.chemical_code 
WHERE lab_inventory_chemical.lab_id= '$lab_id' ";         // this is line 71 
    $total_pages = mysql_fetch_array(mysql_query($query)); 
    $total_pages = $total_pages['num']; 

    $stages = 3; 
    $page =isset($_GET['name'])?mysql_escape_string($_GET['page']): ''; 
    if($page){ 
        $start = ($page - 1) * $limit; 
    }else{ 
        $start = 0;     
        }     

    // Get page data 
    $query1 = "SELECT * FROM chemical 
JOIN lab_inventory_chemical ON chemical.chemical_code = lab_inventory_chemical.chemical_code 
WHERE lab_inventory_chemical.lab_id='$lab_id' LIMIT $start, $limit";   //this is line 86 
    $result = mysql_query($query1); 

    // Initial page num setup 
    if ($page == 0){$page = 1;} 
    $prev = $page - 1;     
    $next = $page + 1;                             
    $lastpage = ceil($total_pages/$limit);         
    $LastPagem1 = $lastpage - 1;                     

    $paginate = ''; 
    if($lastpage > 1) 
    {     

   //  $paginate.= "<a href='$targetpage?page=$counter'>$counter</a>

        $paginate .= "<div class='paginate'>"; 
        // Previous 
        if ($page > 1){ 
            $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=$prev'>previous</a>"; 
        }else{ 
            $paginate.= "<span class='disabled'>previous</span>";    } 

        // Pages     
        if ($lastpage < 7 + ($stages * 2))    // Not enough pages to breaking it up 
        {     
            for ($counter = 1; $counter <= $lastpage; $counter++) 
            { 
                if ($counter == $page){ 

                    $paginate.= "<span class='current'>$counter</span>"; 
                }else{ 
                $paginate.= "<a href='view_all_chemicallab.php?lab_id=1&page=$counter'>$counter</a>";}
                 //   $paginate.= "<a href='$targetpage?page=$counter'>$counter</a>";}                     
            } 
        } 
        elseif($lastpage > 5 + ($stages * 2))    // Enough pages to hide a few? 
        { 
            // Beginning only hide later pages 
            if($page < 1 + ($stages * 2))         
            { 
                for ($counter = 1; $counter < 4 + ($stages * 2); $counter++) 
                { 
                    if ($counter == $page){ 
                        $paginate.= "<span class='current'>$counter</span>"; 
                    }else{ 
                        //$paginate.= "<a href='$targetpage?page=$counter'>$counter</a>";
                        $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=$counter'>$counter</a>";}                     
                } 
                $paginate.= "..."; 
                $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=$LastPagem1'>$LastPagem1</a>"; 
                $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=$lastpage'>$lastpage</a>";         
            } 
            // Middle hide some front and some back 
            elseif($lastpage - ($stages * 2) > $page && $page > ($stages * 2)) 
            { 
                $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=1'>1</a>"; 
                $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=2'>2</a>"; 
                $paginate.= "..."; 
                for ($counter = $page - $stages; $counter <= $page + $stages; $counter++) 
                { 
                    if ($counter == $page){ 
                        $paginate.= "<span class='current'>$counter</span>"; 
                    }else{ 
                        $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=$counter'>$counter</a>";}                     
                } 
                $paginate.= "..."; 
                $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=$LastPagem1'>$LastPagem1</a>"; 
                $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=$lastpage'>$lastpage</a>";         
            } 
            // End only hide early pages 
            else 
            { 
                $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=1'>1</a>"; 
                $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=2'>2</a>"; 
                $paginate.= "..."; 
                for ($counter = $lastpage - (2 + ($stages * 2)); $counter <= $lastpage; $counter++) 
                { 
                    if ($counter == $page){ 
                        $paginate.= "<span class='current'>$counter</span>"; 
                    }else{ 
                        $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=$counter'>$counter</a>";}                     
                } 
            } 
        } 

                // Next 
        if ($page < $counter - 1){ 
            $paginate.= "<a href='view_all_chemicallab.php?lab_id=$lab_id&page=$next'>next</a>"; 
        }else{ 
            $paginate.= "<span class='disabled'>next</span>"; 
            } 

    $paginate.= "</div>"; 

} 

// get results from database 
     //   $result = mysql_query("SELECT * FROM members") 
       //         or die(mysql_error());   

        // display data in table 
        echo "<div>"; 
        echo "<table id='table1'>"; 
        echo "<tr> <th>Chemical Name</th> <th>Chemical Code</th> <th>Type</th> <th>Edit</th><th>Delete</th><th>Stock</th>  </tr>"; 

        // loop through results of database query, displaying them in the table 
        while($row = mysql_fetch_array( $result )) 
        { 

                // echo out the contents of each row into a table 
                echo "<tr>"; 
                echo '<td>'. $row['name'] . '</td>'; 
                echo '<td>' . $row['chemical_code'] . '</td>'; 
                echo '<td>' . $row['type'] . '</td>'; 
                echo '<td><a href="editchemical.php?chemical_code=' . $row['chemical_code'] . '">Edit</a></td>'; 
                echo "<td><a href=\"delete_chemical.php?chemical_code=" . $row['chemical_code'] ."\" * onclick=\"return confirm('Are you sure you want to delete?')\">Delete</a></td>"; 
                echo '<td><a href="stock_chemical.php?chemical_code=' . $row['chemical_code'] . '">Stock</a></td>'; 
                echo "</tr>"; 

        } 
       echo "</table>"; 
       echo $paginate; 
       echo "</div>"; 

    ?> 
```

我在php中遇到分页问题。我已经花了 3 天时间，但我找不到错误。所以最后决定向你们寻求帮助。这个分页脚本简单的查询，比如从员工中选择 *。但是当我在 mysql 查询中使用 join 时它会出错（第一页没有错误。但是当我单击分页页面时没有结果并且存在错误）。---错误---
1.注意：未定义变量：F:\xampplite\htdocs\chem\view_all_chemicallab.php 中的lab_id 71
2.注意：未定义变量：F:\xampplite\htdocs\chem\view_all_chemicallab 中的lab_id .php 在第 86 行

（错误行通过使用注释选项显示在上面的代码中）

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:56:18.230

在脚本的顶部定义 $lab_id = null; 希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T04:57:26.837

看起来您的`$lab_id`变量是通过`POST`表单发送的。在您的分页链接中，您不再提及它。因此，当您单击链接时，服务器不再知道查询是什么。`$targetPage`您需要像其他变量（和）一样将其再次传递回页面，`$counter`以便您的查询仍然能够被写入 - 或者在其中保留会话、cookie 或其他内容。

此外，您的代码容易受到注入攻击。您确实应该更改代码以使用[PDO](http://php.net/manual/en/book.pdo.php)或[Mysqli](http://php.net/manual/en/book.mysqli.php)。`mysql_query`不应使用旧类型命令。

编辑：在标题处试试这个：

```
if (isset($_POST['lab_id']) && is_numeric($_POST['lab_id'])) 
{         
    $lab_id = $_POST['lab_id']; 
}
else
{
    if(!isset($_GET['lab_id']))
    {
        $lab_id="";
        // this means that the query will fail and you need to
        // make sure that your script never gets to here
    }
    else
    {
        // Do any other checking/verification here
        $lab_id=$_GET['lab_id'];
    }
} 
```

这将确保 lab_id 始终设置（尽管它可能仍然是空的，请参见上面的代码）。但是在你的`$targetpage`变量中，有这样的东西：

```
$targetpage = "view_all_chemicallab.php?lab_id=".$lab_id; 
```

编辑 2：您将不得不修改代码中的一些链接，以使 href 标记不包含两个 ? 在它们中，例如`$paginate.= "<a href='$targetpage?page=$counter'>$counter</a>`已经有一个？在变量中`$targetpage`。

编辑 3：您目前的代码是：

`$paginate.= "<a href='$targetpage?page=$counter'>$counter</a>"`

问题是`$targetpage`上面已经定义为：

`$targetpage = "view_all_chemicallab.php?lab_id=".$lab_id;`

这意味着当您将两者结合起来时，您最终会得到：

`$paginate.= "<a href='view_all_chemicallab.php?lab_id=1?page=$counter'>$counter</a>" // I used lab_id as 1 fot this example`

这是一个无效的链接。传递多个参数的方法是将它们与`&`符号连接起来。但是，这将适用于分页：

`$paginate.= "<a href='$targetpage&page=$counter'>$counter</a>"`

这将导致链接为：

`<a href='view_all_chemicallab.php?lab_id=1&page=$counter'>$counter</a>`

这是形成它的正确方法。

# .net - 最大消息大小的动态代理创建问题

> ID：11389238
> 
> 赞同：0
> 
> 时间：2012-07-09T04:51:26.263
> 
> 标签：.net, wcf, c#-4.0

我正在创建 wcf 服务的 dyanminc 代理，而不使用 MetadataExchenge 类添加对客户端代码的引用。问题是当我加载小型 wcf 服务的元数据时，例如只有 1 或 2 个方法，代码对我来说工作正常，但是当我尝试加载具有大约 70 到 80 个方法的大型 wcf 服务的元数据时，我收到最大消息大小的错误其中一个端点已超过 65536...尽管我已将 wcf 配置中的所有大小变量都设置为最大值...我的客户端 web.config 文件中没有任何内容...我得到了所有运行时的绑定...有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:23:30.300

您在客户端 web.config 上没有任何东西，因为您正试图从代码中使用 Web 服务？

考虑到您使用 WsHttpBinding 来使用服务，请使用以下代码来增加 MaxRecievedMessageSize 属性。

```
System.ServiceModel.WSHttpBinding binding = new System.ServiceModel.WSHttpBinding(System.ServiceModel.SecurityMode.None);

// Increase the message size
binding.MaxReceivedMessageSize = 50000000;

System.ServiceModel.Description.MetadataExchangeClient mexClient = new System.ServiceModel.Description.MetadataExchangeClient(binding);
System.ServiceModel.Description.MetadataSet mexResult = mexClient.GetMetadata(new System.ServiceModel.EndpointAddress("http://someurl:someport/some"));

foreach (System.ServiceModel.Description.MetadataSection section in mexResult.MetadataSections)
{
                Console.WriteLine (section.Identifier);
                Console.WriteLine (section.Metadata.GetType());
                Console.WriteLine ();
}
Console.ReadLine(); 
```

如果这不能解决您的问题，请要求您发布代码以进行进一步分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:08:41.320

您可以在客户端添加以下代码来设置 readerQuotas，如下所示：

```
 var binding = se.Binding as BasicHttpBinding;
            binding.MaxBufferSize = 2147483647;
            binding.MaxReceivedMessageSize= 2147483647;
            binding.MaxBufferPoolSize = 2147483647;
            XmlDictionaryReaderQuotas myReaderQuotas = new XmlDictionaryReaderQuotas();
            myReaderQuotas.MaxStringContentLength = 2147483647;
            myReaderQuotas.MaxNameTableCharCount = 2147483647;
            myReaderQuotas.MaxArrayLength= 2147483647;
            myReaderQuotas.MaxBytesPerRead= 2147483647;
            myReaderQuotas.MaxDepth=64;                
            binding.GetType().GetProperty("ReaderQuotas").SetValue(binding, myReaderQuotas, null); 
```

在创建代理实例之前需要设置上述代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:34:07.310

我生成 wcf 客户端的代码如下

```
 try
            {

            Uri mexAddress = new Uri("http://##.##.#.###:8732/WCFTestService/Service1/?wsdl");
            //MetadataSet metaSet1 = MEC.GetMetadata(new EndpointAddress(mexAddress));
            // For MEX endpoints use a MEX address and a 
            // mexMode of .MetadataExchange
            MetadataExchangeClientMode mexMode = MetadataExchangeClientMode.MetadataExchange;

            string contractName = "IVehicleservice";
            string operationName = "ProcessNotification";
            object[] operationParameters = new object[] { 1 };

             //Get the metadata file from the service.
            MetadataExchangeClient mexClient = new MetadataExchangeClient(mexAddress, mexMode);

            mexClient.ResolveMetadataReferences = true;
            mexClient.MaximumResolvedReferences = 100;

            MetadataSet metaSet = mexClient.GetMetadata();

            // Import all contracts and endpoints
            WsdlImporter importer = new WsdlImporter(metaSet);

            Collection<ContractDescription> contracts =
              importer.ImportAllContracts();
            ServiceEndpointCollection allEndpoints = importer.ImportAllEndpoints();

            // Generate type information for each contract
            ServiceContractGenerator generator = new ServiceContractGenerator();
            var endpointsForContracts =
       new Dictionary<string, IEnumerable<ServiceEndpoint>>();

            foreach (ContractDescription contract in contracts)
            {
                generator.GenerateServiceContractType(contract);
                // Keep a list of each contract's endpoints
                endpointsForContracts[contract.Name] = allEndpoints.Where(
                    se => se.Contract.Name == contract.Name).ToList();
            }

            if (generator.Errors.Count != 0)
                throw new Exception("There were errors during code compilation.");

            // Generate a code file for the contracts 
            CodeGeneratorOptions options = new CodeGeneratorOptions();
            options.BracingStyle = "C";
            CodeDomProvider codeDomProvider = CodeDomProvider.CreateProvider("C#");

            // Compile the code file to an in-memory assembly
            // Don't forget to add all WCF-related assemblies as references
            CompilerParameters compilerParameters = new CompilerParameters(
                new string[] { 
                    "System.dll", "System.ServiceModel.dll", 
                    "System.Runtime.Serialization.dll" });
            compilerParameters.GenerateInMemory = true;

            CompilerResults results = codeDomProvider.CompileAssemblyFromDom(
                compilerParameters, generator.TargetCompileUnit);

            if (results.Errors.Count > 0)
            {
                throw new Exception("There were errors during generated code compilation");

            }
            else
            {
                // Find the proxy type that was generated for the specified contract
                // (identified by a class that implements 
                // the contract and ICommunicationbject)
                Type clientProxyType = results.CompiledAssembly.GetTypes().First(
                    t => t.IsClass &&
                        t.GetInterface(contractName) != null &&
                        t.GetInterface(typeof(ICommunicationObject).Name) != null);

                // Get the first service endpoint for the contract
                ServiceEndpoint se = endpointsForContracts[contractName].First();

                // Create an instance of the proxy
                // Pass the endpoint's binding and address as parameters
                // to the ctor
                object instance = results.CompiledAssembly.CreateInstance(
                   clientProxyType.Name,
                    false,
                    System.Reflection.BindingFlags.CreateInstance,
                    null,
                    new object[] { se.Binding, se.Address },
                    CultureInfo.CurrentCulture, null);

                // Get the operation's method, invoke it, and get the return value

                //object retVal = instance.GetType().GetMethod(operationName).
                //    Invoke(instance, operationParameters);

                object retVal = instance.GetType().GetMethod(operationName).
                    Invoke(instance, operationParameters);
                Console.WriteLine(retVal.ToString());

                Console.ReadLine();
            }
        }
        catch(Exception ex)
        { 

        } 
```

# iphone - 包含导航栏和标签栏的视图向下移动了 4 毫米

> ID：11389244
> 
> 赞同：1
> 
> 时间：2012-07-09T04:52:11.007
> 
> 标签：iphone, ios, xcode, uinavigationcontroller, uitabbarcontroller

在我的应用程序中，我从登录屏幕导航到一个类，比如 classA ，就像这样

```
classA *objUserHome = [[classA alloc]init];
        [self presentModalViewController:objUserHome animated:YES];
        [objUserHome release]; 
```

并且 ClassA 有一个导航栏和一个标签栏（其中有 5 个标签），我已经像这样以编程方式创建了我的标签栏

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //Create tab bar controller and navigation bar controller

    tabBarController = [[UITabBarController alloc] init];

    NSMutableArray *arrControllers = [[NSMutableArray alloc] initWithCapacity:5];

    //Add PunchClock to tab View Controller
    PunchClock* objPunchClock = [[PunchClock alloc] initWithTabBar];
    NavigationController = [[UINavigationController alloc] initWithRootViewController:objPunchClock];
    NavigationController.navigationBar.tintColor = [UIColor brownColor];
    [arrControllers addObject:NavigationController];
    [NavigationController release];
    [objPunchClock release];

    //Add Time_Sheet to tab View Controller
    Time_Sheet* objTime_Sheet = [[Time_Sheet alloc] initWithTabBar];
    NavigationController = [[UINavigationController alloc] initWithRootViewController:objTime_Sheet];
    NavigationController.navigationBar.tintColor = [UIColor brownColor];
    [arrControllers addObject:NavigationController];
    [NavigationController release];
    [objTime_Sheet release];

    //Add PTO to tab View Controller
    PTO* objPTO = [[PTO alloc] initWithTabBar];
    NavigationController = [[UINavigationController alloc] initWithRootViewController:objPTO];
    NavigationController.navigationBar.tintColor = [UIColor brownColor];
    [arrControllers addObject:NavigationController];
    [NavigationController release];
    [objPTO release];

    //Add PunchClock to tab View Controller
    CrewPunch* objCrewPunch = [[CrewPunch alloc] initWithTabBar];
    NavigationController = [[UINavigationController alloc] initWithRootViewController:objCrewPunch];
    NavigationController.navigationBar.tintColor = [UIColor brownColor];
    [arrControllers addObject:NavigationController];
    [NavigationController release];
    [objCrewPunch release];

    //Add PunchClock to tab View Controller
    Reports* objReports = [[Reports alloc] initWithTabBar];
    NavigationController = [[UINavigationController alloc] initWithRootViewController:objReports];
    NavigationController.navigationBar.tintColor = [UIColor brownColor];
    [arrControllers addObject:NavigationController];
    [NavigationController release];
    [objReports release];

    // Add this view controller array into the tab bar

    //self .viewControllers = arrControllers;
     tabBarController .viewControllers = arrControllers;

    [arrControllers release];
    [self.view addSubview:[tabBarController view]];

} 
```

和`ClassA is inherited from UIViewController`

现在的问题是，在导航到 classA 之后， classA 的视图向下移动了 4 毫米，![像这样](../Images/1a8253722d4b3ed952f1d1e9c6bbf7ec.png) 为什么会这样？我该如何解决这个问题，请提前帮助我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:48:37.347

在使用情节提要和`Modal Transition`2 个或更多视图之间时，您可能会遇到与上述类似的错误。

如果您使用`Modal Transition`from `ViewControllerA`to`ViewControllerZ`然后尝试`Modal Transition`从`ViewControllerZ`back to`ViewControllerA`有时视图`ViewControllerA`会稍微向下推窗口。

可以使用以下方法防止这种情况：

```
[self.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

On从一个事件`ViewControllerZ`返回`ViewControllerA``ViewControllerZ`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:08:04.333

您可能已经在 Interface Builder 或 XIB 文件中选择了一些顶部栏，并另外设置了导航栏。不要选择 XIB 文件中的任何顶部栏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T05:14:24.273

尝试如下

```
[self.navigationController.view addSubview:[tabBarController view]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T06:23:00.243

经过长时间的研究，我终于解决了这个问题，只是通过继承类`UINavigationController`而不是`UIViewControler`

# asp.net-mvc-3 - 不使用 EF4 跟踪实体的单个属性

> ID：11389245
> 
> 赞同：1
> 
> 时间：2012-07-09T04:52:27.493
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4, objectcontext

我的 MVC 操作方法接收默认模型绑定器从表单集合数据创建的实体对象（页面）。有些字段是错误的或空的，因为它们没有在请求中发送到服务器，例如我不发送“ `CreateDate`”，并且默认模型绑定器将此属性设置为一些我不需要的默认值。

一旦附加了对象，它当然会尝试将所有值（包括无效/不需要的值保存到数据库）。我当然可以在每个属性的基础上手动分配，但我想知道是否可以以某种方式标记一个属性，以便在 EntityState 设置为 modified 并调用 SaveChanges() 时它不会持久化。

```
public ActionResult SomeMethod(Page page)
{
page.ModifyDate = DateTime.Now;

       _db.NewsPages.Attach(page);
                _db.ObjectStateManager.ChangeObjectState(page, System.Data.EntityState.Modified);
                _db.SaveChanges();
                _db.Dispose();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:26:35.757

处理此问题的正确方法是使用不同的视图模型类，将空实体附加到上下文并为每个属性分配真实值（或让 AutoMapper 处理这种情况），正如@Darin 在评论中建议的那样。

如果您想按自己的方式行事，则不得更改 POCO 实体的状态，但必须更改每个已更改属性的状态：

```
public ActionResult SomeMethod(Page page)
{
    page.ModifyDate = DateTime.Now;

    _db.NewsPages.Attach(page);
    ObjectStateEntry entry = _db.ObjectStateManager.GetObjectStateEntry(page);
    entry.SetModifiedProperty("ChangedPropertyName");
    // Do the same for all other changed properties
    _db.SaveChanges();
    _db.Dispose();
} 
```

# c# - 如何以编程方式生成 SelectionRangeChanged 事件 ChartControl WinForms

> ID：11389257
> 
> 赞同：0
> 
> 时间：2012-07-09T04:54:57.540
> 
> 标签：c#, winforms, visual-studio-2010, charts

想以编程方式创建一个 selectionRangeChanged 事件，但并没有真正了解如何去做

![在此处输入图像描述](../Images/9f0fa00f0c5f98ca17b183578b75a376.png)

```
 private void btn_10D_Click(object sender, EventArgs e)
    {
        double varRange = 10;
        double var_Sel1 = DatesX[0].ToOADate();

        Chart1.ChartAreas["ChartArea1"].CursorX.IsUserEnabled = true;
        Chart1.ChartAreas["ChartArea1"].CursorX.IsUserSelectionEnabled = true;
        Chart1.ChartAreas["ChartArea1"].CursorX.SelectionColor = Color.LightGray;
        Chart1.ChartAreas["ChartArea1"].CursorX.SelectionStart = var_Sel1;
        Chart1.ChartAreas["ChartArea1"].CursorX.SelectionEnd = varRange + var_Sel1;
        Chart1.ChartAreas["ChartArea1"].CursorX.Position = varRange + var_Sel1;
        Chart1.SelectionRangeChanged += new EventHandler<CursorEventArgs>(Chart1_SelectionRangeChanged);

    }

    void Chart1_SelectionRangeChanged(object sender, CursorEventArgs e)
    {
        throw new NotImplementedException();
    } 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:55:55.940

对于 C# 中的所有事件，如果类创建者没有做出额外的努力来允许在类之外触发事件，那么就不可能触发它们。

根据 MSDN

> Chart.SelectionRangeChanged 事件 在选择的开始位置或结束位置更改时发生。

但是从我的测试中我可以看到它只有在用户而不是程序更改时才会被触发。

如果我正确理解您的意图，您想要处理图表下的那些小按钮，`btn_10D_Click`方法是其中一个的点击处理程序。尝试移动这条线

```
Chart1.SelectionRangeChanged += new EventHandler<CursorEventArgs>(Chart1_SelectionRangeChanged); 
```

到您的构造函数并确保它被调用一次（从其他处理程序中删除它）。这将确保在用户更改选择时执行您的代码。如果您想为您的按钮执行相同的代码，您应该简单地将处理程序内容提取到方法并将其称为表单按钮单击处理程序。

```
void Chart1_SelectionRangeChanged(object sender, CursorEventArgs e)
{
    DoSomething(/*some arguments if you need them*/);
}
private void btn_10D_Click(object sender, EventArgs e)
{
     \\your code
     DoSomething();
 } 
```

# javascript - 在浏览器上按“返回”后，Javascript 切换复选框不再可见

> ID：11389260
> 
> 赞同：2
> 
> 时间：2012-07-09T04:55:15.480
> 
> 标签：javascript, jquery, checkbox, refresh, toggle

我的复选框有问题。我有一系列照片的形式。每张照片都有一个复选框。如果选中照片的复选框，则使用 .show() 显示与照片关联的 div。

这很好，我可以提交表格。但是，如果我在浏览器上按“返回”以返回照片集，复选框仍处于选中状态，但与其关联的 div 不再可见。

即使在“返回”页面时，我需要做什么才能确保检查的照片仍然具有可见的 div？

```
$(document).ready(function () {

$(':checkbox').change(function() {
  var dataID = $(this).attr("id");
  if($(this).is(':checked')) {
    $("#content"+dataID).show();
  }
  else {
    $("#content"+dataID).hide();
  }
});  

}); 
```

形式是这样的：

```
<form>
<input name="box1" id="box1" type="checkbox" />
<input name="box2" id="box2" type="checkbox" />
<input name="box3" id="box3" type="checkbox" />
...
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:58:24.010

尝试在页面加载时显示已检查 div 的图像，例如：

```
$(document).ready(function () {

$(':checkbox').change(function() {
  // ... your code ...
});  

$(':checkbox').each(function() {
  var dataID = $(this).attr("id");
  if($(this).is(':checked')) {
    $("#content"+dataID).show();
  }
  else {
    $("#content"+dataID).hide();
  }
}); 

}); 
```

**清洁版**

```
$(document).ready(function () {
    $(':checkbox').change(function() { checkImage($(this)); });
    $(':checkbox').each(function() { checkImage($(this)); });
});
function checkImage(_checkBox) {
    var dataID = _checkBox.attr("id");
    if(_checkBox.is(':checked')) {
        $("#content"+dataID).show();
    }
    else {
        $("#content"+dataID).hide();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:00:14.893

做这样的事情：

```
$(document).ready(function() {    
    $(':checkbox').change(function() {
        ToggleContent($(this));
    });

    $(':checkbox').each(function() {
        ToggleContent($(this));
    });

    function ToggleContent(chkbox) {
        var dataID = chkbox.attr("id");
        if (chkbox.is(':checked')) {
            $("#content" + dataID).show();
        }
        else {
            $("#content" + dataID).hide();
        }
    }
});​ 
```

# java - 为什么android最多设置4个后台进程？

> ID：11389261
> 
> 赞同：0
> 
> 时间：2012-07-09T04:55:25.903
> 
> 标签：java, android, android-ndk

我知道 android 在单线程上运行，但我想执行 4 个以上的进程。关于为什么 android 最多设置 4 个进程的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:59:12.440

如果您希望任何组件运行到另一个进程中[`android:process`](http://developer.android.com/guide/topics/manifest/application-element.html#proc)可能会有所帮助。

**从文档：**

> 通过将此属性设置为与另一个应用程序共享的进程名称，您可以安排两个应用程序的组件在同一个进程中运行——但前提是这两个应用程序还共享一个用户 ID 并使用相同的证书进行签名。

# java - 我需要导入子类java吗

> ID：11389262
> 
> 赞同：1
> 
> 时间：2012-07-09T04:55:48.917
> 
> 标签：java

假设我有一个导入 java.io.Exception 作为示例的超类。如果我正在处理子类中的异常，是否需要将 java.io.Exception 重新导入子类的代码中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T04:58:23.360

是（除非两个类在同一个文件中）。

导入是每个源代码文件，而不是每个类。它们完全是编译器专用的，在运行时没有影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T04:57:27.260

**是**，如果子类在另一个 .java 文件中，否则没有

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T05:14:04.113

导入范围是*每个源文件*¹：它不向类/类型添加*任何内容*，因此与继承或子类*无关。*

键入每个完全限定的类型太麻烦了，即使对于 Java 也是如此，因此导入指定了如何查找/解析不合格的类型（或静态方法）。

编译器会在无法解析类型时通知您是否缺少导入..

* * *

¹ [导入语句](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)必须出现*在*包名称之后（如果有），并且在文件中声明的所有类型/类*之前。*由于每个文件最多有一个包，因此每个文件最多有一个导入部分，并且它们的范围包含文件的其余部分。

# hibernate - 休眠异常：死锁

> ID：11389267
> 
> 赞同：1
> 
> 时间：2012-07-09T04:56:04.120
> 
> 标签：hibernate, db2, deadlock, websphere-portal

以下代码中**有时会**出现异常“org.hibernate.exception.LockAcquisitionException: could not insert” ：

```
 Question questionClone;
 try {
    questionClone = (Question) question.clone();
 } catch (CloneNotSupportedException e) {
    throw WrappedException.wrap(e);
 }
 questionClone.setCategory(question.getCategory());
 questionClone.setOriginal(false);
 logger.trace("Saving questionClone " + questionClone + " start");
 hibernateSession.save(questionClone);
 logger.trace("Saving questionClone " + questionClone + " end"); 
```

当 questionClone 被保存时。这是问题的克隆方法：

```
public Object clone() throws CloneNotSupportedException {
    Question questionClone = (Question) super.clone();

    questionClone.category = null;

    List<Alternative> alternativesClone = new ArrayList<Alternative>(getInternalAlternatives().size());
    int index = 0;
    for (Iterator<Alternative> iterator = getInternalAlternatives().iterator(); iterator.hasNext();) {
        Alternative alternative = iterator.next();
        Alternative alternativeClone = (Alternative) alternative.clone();
        alternativeClone.setQuestion(questionClone);
        alternativeClone.setIndex(index);
        alternativesClone.add(alternativeClone);
        ++index;
    }
    questionClone.setInternalAlternatives(alternativesClone);

    return questionClone;
} 
```

和替代方法的克隆方法：

```
public Object clone() throws CloneNotSupportedException {
    Alternative alternativeClone = (Alternative) super.clone();

    alternativeClone.index = 0;
    alternativeClone.question = null;

    return alternativeClone;
} 
```

问题的休眠映射包含以下内容：

```
<list name="internalAlternatives" inverse="true" cascade="all-delete-orphan">
   <cache usage="read-write"/>
   <key column="QUESTION_ID"/>
   <list-index column="INDEX"/>
   <one-to-many class="Alternative"/>
</list> 
```

异常表明它无法插入替代项，并且由以下原因引起：com.ibm.db2.jcc.am.SqlTransactionRollbackException：DB2 SQL 错误：SQLCODE=-911，SQLSTATE=40001，SQLERRMC=2，DRIVER=4.14.88。当我发现这是一个僵局。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:07:32.650

```
alternativeClone.setQuestion(questionClone); 
```

和

```
questionClone.setInternalAlternatives(alternativesClone); 
```

似乎是`dealock`因为这些线而发生的。`internalAlternatives`你在你的里面添加列表`question`，然后也在`question`里面设置`alternative`。

# mysql - 在 MySQL 中转换日期时间

> ID：11389270
> 
> 赞同：0
> 
> 时间：2012-07-09T04:56:43.673
> 
> 标签：mysql, datetime, mysqli

我们如何在 MySQL 中将 AM/PM 的时间转换为 24 小时格式？示例 2:50 PM 应转换为 14:50。请帮我转换一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T04:58:54.393

`%p`与_[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

```
SELECT STR_TO_DATE(  '2:50 pm',  '%h:%i %p' ) // will return 14:50:00 
```

# django - Django auth 用户的用户更改表单上的 super() 保存方法

> ID：11389271
> 
> 赞同：1
> 
> 时间：2012-07-09T04:57:19.323
> 
> 标签：django, django-models, django-forms, django-admin

我正在尝试编辑`django.contrib.auth.forms.UserChangeForm`. 基本上，auth_user 的用户编辑页面。

[https://github.com/django/django/blob/master/django/contrib/auth/forms.py](https://github.com/django/django/blob/master/django/contrib/auth/forms.py)

根据源代码，表单没有`save()`方法，所以它应该继承自`forms.ModelForm`对吗？

有关完整代码，[请参见此处](http://pastebin.com/ugbf7yek)

```
class MyUserAdminForm(forms.ModelForm):
    class Meta:
        model = User

    def __init__(self, *args, **kwargs):
        super(MyUserAdminForm, self).__init__(*args, **kwargs)
        instance = getattr(self, 'instance', None)
        if instance and instance.id: # username and user id
            ... the rest of the __init__ is setting readonly fields

    .... some clean methods .....

    def save(self, *args, **kwargs):
        kwargs['commit'] = True
        user = super(MyUserAdminForm, self).save(*args, **kwargs)
        print user.username
        print 'done'
        return user 
```

当我点击保存时，它说`'UserForm' object has no attribute 'save_m2m'`。我已经google了很多，并尝试使用`add()`但没有用。是什么导致了这种行为？

问题是：这两个`print`语句都被打印出来了。但该值从未保存到数据库中。我以为第二行已经保存了一次。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:35:40.747

删除`kwargs['commit'] = True`线，看看会发生什么。

Django Admin 将[在这里](https://github.com/django/django/blob/master/django/forms/models.py#L91)调用，它与when is`form.save_m2m()`挂钩。无条件覆盖 of会破坏of从而引发错误。实际受影响的逻辑在[这里](https://github.com/django/django/blob/master/django/contrib/admin/options.py#L698)：`form``commit``False``kwargs['commit'] = True``setattr``save_m2m()``form``no attribute`

```
def save_form(self, request, form, change):
     """
     Given a ModelForm return an unsaved instance. ``change`` is True if
     the object is being changed, and False if it's being added.
     """
     return form.save(commit=False) 
```

您会发现您的版本无条件`form.save()`覆盖`commit=False`，`commit=True`因此 Django Admin 无法继续，因为它认为`form.save(commit=False)`已被调用，因此`form.save_m2m()`需要调用。

参考[文档](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#the-save-method)：

> 当您的模型与另一个模型具有多对多关系时，会看到使用 commit=False 的另一个副作用。如果您的模型具有多对多关系，并且您在保存表单时指定 commit=False，则 Django 无法立即保存多对多关系的表单数据。这是因为在实例存在于数据库中之前，无法为实例保存多对多数据。
> 
> 为了解决这个问题，每次您使用 commit=False 保存表单时，Django 都会向您的 ModelForm 子类添加一个 save_m2m() 方法。手动保存表单生成的实例后，可以调用 save_m2m() 来保存多对多表单数据。

# c# - 在zedgraph中放大polyobj

> ID：11389277
> 
> 赞同：2
> 
> 时间：2012-07-09T04:57:50.737
> 
> 标签：c#, zooming, zedgraph

我正在使用 ZedGraph 编写一个步进布局程序，我必须能够在其中显示彼此相邻的大小差异很大的项目。

一旦我非常深入地放大一个区域，比当前缩放矩形大 200 倍的填充多边形对象就会消失。我怎样才能避免这种情况？

代码示例：

```
GraphPane gp = zgc1.GraphPane;
gp.GraphObjList.Clear();

foreach (PointD[] pts in allpolygons)
{
    PolyObj po = new ZedGraph.PolyObj(pts, Color.Blue, Color.Red);
    gp.GraphObjList.Add(po);
} 
```

# c++ - 定义的类在编译时似乎未定义

> ID：11389279
> 
> 赞同：0
> 
> 时间：2012-07-09T04:57:55.470
> 
> 标签：c++, class, syntax, header-files

编译时出现以下错误：

```
3>Time Elapsed 00:00:00.10
2>ClCompile:
2>  Main.cpp
2>  CWnd.cpp
2>c:\repo\~\clabel.hpp(11): error C2061: syntax error : identifier 'CWnd'
2>c:\repo\~\cbutton.hpp(11): error C2061: syntax error : identifier 'CWnd'
2>c:\repo\~\cmainwnd.hpp(9): error C2504: 'CWnd' : base class undefined
2>  CMainWnd.cpp
2>  CLabel.cpp
2>  CException.cpp
2>  CButton.cpp
2>  Generating Code...
2>
2>Build FAILED. 
```

我的项目看起来像这样（每个部分都包含上一层的头文件）

```
DefaultHeader.hpp : (windows.h, includes CInterface.hpp, other header files)
-- CInterface.hpp : (includes DefaultHeader.hpp, CWnd.hpp, CLabel.hpp and CButton.hpp)
-- -- CWnd.hpp : (includes CInterface.hpp)
-- -- CLabel.hpp : (includes CInterface.hpp)
-- -- CButton.hpp : (includes CInterface.hpp) 
```

这是CWnd的定义

```
#ifndef __CWnd_hpp__
#define __CWnd_hpp__

#pragma once

#include "CInterface.hpp"

class CWnd
{
...
};

#endif // __CWnd_hpp__ 
```

我不确定为什么在尝试访问 CWnd 时会出现此错误，因为 CWnd（及其所有成员）已明确定义。

发生错误的 3 行（剪掉，供参考）：

```
CLabel ( CWnd* wndParent, INT iX, INT iY, INT iWidth, INT iHeight, LPCTSTR lpszCaption );

CButton ( CWnd* wndParent, INT iX, INT iY, INT iWidth, INT iHeight, LPCTSTR lpszCaption );

class CMainWnd : public CWnd 
```

最奇怪的部分是 Itellisense 在我编译之前看不到任何错误，然后它们会在大约 2 秒后出现和消失。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:38:53.047

结果头文件 CInterface 被锁定，并且在某些文件中不包括 CWnd.hpp。我通过让所有文件包含最高级别的包含文件 DefaultHeader.hpp 来解决此问题，而不是如果它们相应的包含文件 CLabel.hpp、CButton.hpp 等。

# json - 序列化 map[A,B] 与 lift-json 知道 A<->String

> ID：11389285
> 
> 赞同：0
> 
> 时间：2012-07-09T04:58:36.980
> 
> 标签：json, scala, serialization, lift-json

我想用 Lift-json 序列化一个 HashMap[Coord,Unite] 类型的 HashMap。这些类型特定于我的项目，但有 Coord -> String 和 toString 函数，我可以从 String 返回我的 Coord（即使它没有在这里编码，但那不相关）。所以我想我可以让 lift-json 序列化 Map[String,Coord] 但是在这里 serialize(format)(y) 当我希望它使用适用于的序列化函数时尝试应用相同的函数（以递归方式）地图[字符串，坐标]。我不能在 Serializer 之外进行转换的原因是因为这个 HashMap 是更大案例类的一部分，所以我需要 lift-json 来知道如何序列化和反序列化它。

```
class UnitzSerializer extends Serializer[HashMap[Coord,Unite]] {

private val UnitzClass = classOf[HashMap[Coord,Unite]]

def deserialize(implicit format:Formats): PartialFunction[(TypeInfo,JValue), HashMap[Coord,Unite]]= {
case (TypeInfo(UnitzClass,_), json) => json match {
  case x:JValue => (deserialize(format)((TypeInfo(classOf[Map[String,Unite]],None),x))).map(y => (Coord(0,0),y._2))
  case _  => throw new Exception("ONOz")
}
}

def serialize(implicit format: Formats): PartialFunction[Any, JValue] = {
       case x: HashMap[Coord,Unite] => {
     val y:Map[String,Unite] = x.map(z => (z._1.toString,z._2))
 serialize(format)(y)
   }
}

} 
```

我可以重写 Map[String,Unite] 的序列化和反序列化，但这将是很多无用的代码，因为我不明白 lift-json 是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:49:40.610

我可能遗漏了一些东西，但在我看来，这里的问题是类型擦除；`HashMap[Coord, Unite]`在运行时，和之间没有区别`HashMap[String, Unite]`，这可以解释无限递归。

# android - 如何在 Android 中通过 AlarmManager 设置提醒

> ID：11389289
> 
> 赞同：2
> 
> 时间：2012-07-09T04:59:04.580
> 
> 标签：android, alarmmanager, alarms

我想在我的 Android 应用程序中进行提醒。我采用了日期选择器和时间选择器，并将时间和日期存储在 SQLite 数据库中。现在我想将数据库中的日期和时间值与系统日期和时间进行比较，以提供提醒功能（例如生日提醒）。

那么，我应该如何开发它呢？谁能建议或给我一些涵盖此问题的示例代码？

# tfs - 如何使用 PowerShell 从 TFS 获取某些文件？

> ID：11389295
> 
> 赞同：0
> 
> 时间：2012-07-09T04:59:30.290
> 
> 标签：tfs, branch, powershell-2.0

在我们分支发布后，有一些配置文件需要更新。目前，我正在获取特定（新）分支上所有源代码的最新版本。这很耗时并且占用大量磁盘空间。

有没有办法搜索/循环遍历特定分支并且只获取符合特定条件的文件？

例如：

```
Loop through files under branch on the TFS server
If file name matches "foo.proj" or file name matches "foo.ini" 
Get latest version of the file 
```

“get”部分很容易使用 TF ( `tf get $/project/foo.proj`) 的命令行界面。我不确定如何在不首先获取最新版本的情况下遍历服务器对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:04:41.383

查看 TFS PowerToys 中的 TFS PowerShell 管理单元（您需要自定义安装才能选择）。

在 32 位 PSH 实例 ( `Add-PSSnapin Microsoft.TeamFoundation.PowerShell`) 中加载管理单元后，您可以使用：

*   `Get-TFSItemProperty`在文件夹上获取源代码管理下的项目列表。
*   `Update-TfsWorkspace`获取或更新所有或特定文件/文件夹到您的工作区。

***更新***：您可以自己安装 64 位的 PSH TFS 管理单元，通过 PowerToys 安装 32 位（请参阅评论），在这种情况下，这不仅限于 32 位 PSH 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:48:30.753

我最后使用了这个：

使用您下载的 tftp.exe 自定义安装 TFS Powershell 管理单元。

添加管理单元：

```
if ( (Get-PSSnapin -Name Microsoft.TeamFoundation.PowerShell -ErrorAction SilentlyContinue) -eq $null )
{
    Add-PSSnapin Microsoft.TeamFoundation.PowerShell
} 
```

Powershell脚本：

```
param( [string] $ServerBranchLocation )

$tfs=Get-TfsServer -name http://mytfsserver:8080/tfs
$TfExePath = "${env:ProgramFiles(x86)}\Microsoft Visual Studio 10.0\Common7\IDE\TF.exe"

$matchFoo = "foofile.foo"

foreach ($item in Get-TfsChildItem $ServerBranchLocation -r -server $tfs) 
{ 
    if ($item -match $matchFoo)
    { & "$TFExePath" get $item.ServerItem /force /noprompt }
} 
```

我找不到使用 snap in 获取最新版本的方法，所以我不得不使用 ol'trusty tf.exe。

# python - 在 Python 脚本中实现多线程

> ID：11389296
> 
> 赞同：1
> 
> 时间：2012-07-09T04:59:30.250
> 
> 标签：python

我想创建一个 python 脚本来对我的服务器进行压力测试。所以我创建了这个基本的 UDP 泛洪器，我认为它可以正常工作。

我的问题是我将如何为此添加多线程？我阅读了有关 Python 线程的手册，但不明白如何在我的脚本中实际实现它。

```
import socket
import random

print "Target:",
ipaddr = raw_input()

sent = 1
bytes = random._urandom(10000)
port = 1

while sent > 0:
    print "Test Started On", ipaddr, "|", sent, "Packets Sent. Press Ctrl+C To Stop."
    sent += 1
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
s.sendto(bytes,(ipaddr,port))
port = random.randint(1, 65500)

raw_input() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:12:31.747

If you extract the business part of your application into a function like:

```
def do_the_flooding():
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    s.sendto(bytes,(ipaddr,port)) 
```

You can then call it in a thread:

```
import threading
t = threading.Thread(target=do_the_flooding)
t.start() 
```

# iphone - 核心数据谓词：所有在 NSDate 上有活动的组？

> ID：11389299
> 
> 赞同：0
> 
> 时间：2012-07-09T05:00:14.127
> 
> 标签：iphone, ios, core-data, nsdate, fetch

我有以下数据模型：

```
Group(name, color, activities*) // one group may have many activities
Activity(startTime, endTime, location, Group*) // startTime and endTime are NSDate, group is an inverse relationship 
```

因此，如果我想获得在指定 NSDate 上至少有一项活动的所有组，比如 theTime，我应该构造什么谓词？

我的想法：

1.  首先获取所有活动
2.  然后将他们的组放入一个集合中以删除重复的组
3.  将 Set 转换为数组

所以：

```
[NSPredicate predicateWithFormat:@"%@ >= startTime AND %@ <= endTime", theTime] 
```

然后获取一系列活动：

```
for (Activity *activity in activities)
{
    [theSet add:activity.group];
} 
```

所以我得到了一组在 theTime 上至少有一个活动的独特组？

有没有其他方法可以在不进行后处理的情况下进行提取？

谢谢！

编辑：

我可不可以做：

```
[NSPredicate predicateWithFormat:@"%@ >= activities.startTime AND %@ <= activities.endTime", theTime] 
```

？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:11:24.170

如果我理解你的问题，是的。

`Group`您可以针对而不是`Activity`实体来做到这一点。通过这种方式，您可以避免先获取`Activity`ies 实体，然后再应用过滤器。由于`activities`不是标量值，因此您需要谓词修饰符（`ANY`、`ALL`等）或 SUBQUERY。

关于您的问题，我将执行以下操作：

```
[NSPredicate predicateWithFormat:@"(SUBQUERY(activities, $x, $x.startTime >= %@ and $x.endTime <= %@).@count > 0)", theStartTime, theEndTime]; 
```

关于谓词，我想你想找到`Group`包含`Activity`特定范围内的 ies 的 s。

试着让我知道。希望有帮助。

# android - API 级别 10 中带有 ViewPager 的 SurfaceView 在新过渡期间有很长的延迟

> ID：11389302
> 
> 赞同：1
> 
> 时间：2012-07-09T05:00:30.983
> 
> 标签：android, android-viewpager

我有一个非常相似的问题： [ViewPager + SurfaceView = 导航回活动时的长时间延迟](https://stackoverflow.com/questions/11356085/android-viewpager-surfaceview-long-delay-when-navigating-back-to-activity)

除了我使用的是 API 10，所以我没有使用片段。

我在 ViewPager 中有 SurfaceViews - 我工作得很好，除了当我滚动到新页面时，绘制需要一段时间。直到 SurfaceView 在屏幕上可见时才会调用 SurfaceView.surfaceCreated 方法。我希望在调用 ViewPager 的 PagerAdapter.instantiateItem 并通过 addView 将 SurfaceView 添加到 ViewPager 时创建表面。有没有办法强制 SurfaceView 在那个时候创建​​一个表面？

我正在使用基于[Awesome Pager 示例的代码](http://code.google.com/p/viewpagerexample/source/browse/trunk/AwesomePager/src/com/geekyouup/paug/awesomepager/AwesomePagerActivity.java)

```
 @Override
        public Object instantiateItem(View collection, int position) {
            Log.i("Main Activity", "instantiateItem p:" + position);
            View p;
            if(position == 1){
                    // Page003 is a surfaceview
                p = new Page003(cxt, position);
            } else {
                    // in the future I will create more pages!
                p = new Page003(cxt, position);
            }
            ((ViewPager) collection).addView(p);

            return p;
        } 
```

是否有类似于另一个问题的答案的方法 - 通过将 SurfaceView 包装在另一个视图中？我宁愿不要使代码不必要地复杂化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-08T16:51:04.373

在您的 Viewpager 适配器中实现 onAttached() 运行处理程序 2 秒就是这样

这将在 2 秒后加载您的表面，不再有延迟

# php - Zend 框架 fetchall 函数

> ID：11389306
> 
> 赞同：0
> 
> 时间：2012-07-09T05:00:56.773
> 
> 标签：php, zend-framework

我的组织模型中有以下功能。

```
public function getOrganisations($where=null,$order='name ASC',$offset=null,$limit=null){
            $Result = $this->fetchAll($where,$order,$limit,$offset);
            if (!$Result){
                return array();
            }

            return $Result->toArray();
        } 
```

但是如何包含我的 organization_types 模型，以便我可以在组织表中加入到 organization_type_id ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:50:26.437

这是支持使用数据映射器模式的论点的核心。
使用您在示例中似乎使用的结构，尝试将`organisation_types`对象传递到`Organisation`模型中会遇到很大的麻烦。但是，您可以在查询中执行连接以连接到`organisation_types`表，但连接对象不太可能是合理的。

加入[organization_types 表](http://framework.zend.com/manual/en/zend.db.select.html#zend.db.select.building.join)：

```
//assuming this is a DbTable model that extends Zend_Db_Table_Abstract
 function getOrganisations($where=null,$order='name ASC',$offset=null,$limit=null){
     $select = $this->select()->setIntegrityCheck(FALSE);//This locks the table to allow joins
     $select->joinLeft('organisation_types', 'organisation_types.id = organisation.organisation_type_id');//This will join the tables with all feilds, use the join type you like.
     if (!is_null($where) {
         $select->where($where);
     }
     if (!is_null($order) {
         $select->order($order);
     }
     if (!is_null($offset) {
         $select->limit(null,$offset);//offset is second arg in limit() in select()
     }
     if (!is_null($limit) {
         $select->limit($limit);
     }
       $Result = $this->fetchAll($select);
       if (!$Result){
            return array();
       }

       return $Result->toArray();
 } 
```

这应该让您了解表连接的工作方式。如果您想使用这些对象，您需要使用不同的结构重新开始。
我在 PHPMaster 上找到了一些很好的教程，它们帮助我了解数据映射器和域模型。

[构建领域模型，介绍](http://phpmaster.com/building-a-domain-model/)
[集成数据映射器](http://phpmaster.com/integrating-the-data-mappers/)

此外，在线书籍[Survive The Deepend](http://survivethedeepend.com/)有一个很好的数据映射器模式示例以及如何测试它。

祝你好运...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:09:12.320

也许使用`Zend_Db_Select`with`joinLeft()`会更合适：

[http://framework.zend.com/manual/en/zend.db.select.html#zend.db.select.building.join](http://framework.zend.com/manual/en/zend.db.select.html#zend.db.select.building.join)

# mysql - Mysql查询超时问题

> ID：11389307
> 
> 赞同：0
> 
> 时间：2012-07-09T05:00:58.990
> 
> 标签：mysql

我有一个应用程序，可以在其中选择很多选项，其中有四个表，每个过滤器可能有 4 个不同的术语，如果我们进行值计数，并且我不擅长查询，只知道如何获得所需的结果。所以查询可以是：

```
select distinct(maindbgroupid) from ((SELECT mainDBGroupID from 
groupstatisticsdata.seniority where ( `name` = 'Senior' )AND maindbgroupid in (SELECT 
mainDBGroupID from groupstatisticsdata.Function where ( `name` = 'Information Technology' 
)AND (`Value` >1000) AND maindbgroupid in (SELECT mainDBGroupID from 
groupstatisticsdata.Industry where ( `name` = 'Information Technology and Services' )AND 
(`Value` >1000))))) t join maingroupdb.campaigns on campaigns.groupid=t.maindbgroupid 
where campaigns.campaignName='Campaign1101' 
```

这是一个例子，请如何改进它，因为当我使用多个过滤器时总是会超时。

我在查询中所做的是表之间的相交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:11:27.317

试试这个 ：：

```
select distinct(mainDBGroupID)
 from 
 groupstatisticsdata.seniority
 inner join groupstatisticsdata.Function on (groupstatisticsdata.seniority.maindbgroupid=groupstatisticsdata.Function.mainDBGroupID)
inner join  groupstatisticsdata.Industry on (groupstatisticsdata.Industry.mainDBGroupID=groupstatisticsdata.seniority.maindbgroupid)
inner join maingroupdb.campaigns on campaigns.groupid=t.maindbgroupid 
where groupstatisticsdata.seniority.`name` = 'Senior'  AND 
 groupstatisticsdata.Function.`name` = 'Information Technology' 
 AND `Value` >1000 
 AND maindbgroupid 
AND groupstatisticsdata.Industry.`name` = 'Information Technology and Services' )
AND 
groupstatisticsdata.Industry.`Value` >1000 
AND campaigns.campaignName='Campaign1101' 
```

# asp.net - 从 UpdatePanel 内部更新 UserControl

> ID：11389309
> 
> 赞同：0
> 
> 时间：2012-07-09T05:01:22.523
> 
> 标签：asp.net, vb.net, user-controls, updatepanel

我有`UserControl`一个`UpdatePanel`. 当单击内部的按钮时，我想刷新它`UpdatePanel`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:07:12.010

Register the button in updatepanel's `<asp:AsyncPostBackTrigger>` tag.

[http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)

Or

Register the button in `ScriptManager.RegisterAsyncPostBackControl()`.

[http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerasyncpostbackcontrol.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerasyncpostbackcontrol.aspx)

# php - 通过我自己的 API 通过 PDO 仅使用修改后的值更新数据库行

> ID：11389312
> 
> 赞同：0
> 
> 时间：2012-07-09T05:01:31.987
> 
> 标签：php, mysql, codeigniter, pdo

我正在创建一个与通过 PDO 连接到我的数据库的 MVC 设置（CodeIgniter）交互的 API，我想知道如何最好地实现下面描述的场景......

假设以下内容作为一行存在于 中`Table1`：

```
| Id: 1 | Object: Box | Color: "red" | Length: 1 | Height: 2 | Width: 3 | 
```

如果我进行以下 API 调用（伪代码）：

```
$this->post( 'Table1/update', array('id'=>1, 'color' => "blue") ); 
```

假设颜色参数更新为“蓝色”，但所有其他参数保持不变。

**我要通过什么过程只更新颜色参数而不更新其他空参数？[假设有很多可能的参数，而不仅仅是4个] **

在我的模型中，我是否表现得像要更新所有内容并列出每个可能的参数，`bindParam`还是动态地（通过`foreach`循环）迭代所有可用参数以创建 PDO 语句以仅更新这些值？更简单地说，**如何编写 PDO 语句以处理所有可能的行更新组合？**

在我看来，我有以下两种选择，但它们似乎都不是很有效：

**使用 foreach 循环仅考虑当前参数：**

```
$sql = "UPDATE `Table1` 
        SET ";
$i = 0;
foreach( $params as $key => $val )
{
    $sql .= '`' . $key . '` = :' . $key;
    if( $i < count( $params )-1 )
    {
        $sql .= ', ';
    }
    $i++;
} 

$sql .= ' WHERE `Id` = :Id';

$stmt = $this->db->prepare( $sql );
foreach( $params as $key => $val )
{
    $stmt->bindParam( ':' . $key, $val, PDO::PARAM_STR );
}
$stmt->bindParam( ':Id', $params['id'], PDO::PARAM_INT );*/
$stmt->execute();
$stmt->closeCursor(); 
```

**考虑所有参数：**

```
$sql = "UPDATE `Table1` 
        SET `Color` = :Color, `Length` = :Length, `Height` = :Height, `Width` = :Width 
        WHERE `Id` =:Id";

$stmt = $this->db->prepare( $sql ); 
$stmt->bindParam( ':Color', $params['color'], PDO::PARAM_STR );
$stmt->bindParam( ':Length', $params['length'], PDO::PARAM_INT );
$stmt->bindParam( ':Height', $params['height'], PDO::PARAM_INT );
$stmt->bindParam( ':Width', $params['width'], PDO::PARAM_INT );
$stmt->bindParam( ':Id', $params['id'], PDO::PARAM_INT );
$stmt->execute();
$stmt->closeCursor(); 
```

### 更新：

问题的真正症结在于尝试在模型中创建一个方法（称为`update`），API 可以与之交互并可以采用任意数量的参数并使用给定值正确更新该行，同时保持其他原始值不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:09:47.650

我遇到了同样的问题。我目前的想法是将所有字段值传递给 update(...) 函数，并使用布尔 $update 值成功每个值。仅当为此变量传入值 TRUE 时，相应的字段值才会包含在更新语句中。

```
function update_ad($id, $title, $update_title, $text, $update_text, $price, $update_price, $visible, $update_visible) {
            if ($update_title) {$this->db->set('title', $title);}
    if ($update_text) {$this->db->set('text', $text);}
    if ($update_price) {$this->db->set('price', $price);}
    if ($update_visible) {$this->db->set('visible', $visible);}

    $this->db->where('id', $id);
    $this->db->update('ad');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:29:53.630

将所有列包含在更新语句中并将值/参数绑定到语句没有任何意义。您可以将颜色字段放在 set 语句中，并在 where 子句中给出 id。

# actionscript - TypeError：错误＃2007：参数文本必须为非空

> ID：11389313
> 
> 赞同：0
> 
> 时间：2012-07-09T05:01:32.630
> 
> 标签：actionscript

我是 Flash 新手，我真的不知道我收到此错误的原因是什么：

> TypeError：错误 #2007：参数文本必须为非空。
> 在 flash.text::TextField/设置 text()
> 在 sgmap_fla::MainTimeline/mapOver()

我的动作：

```
description.countryName_txt.text = "";
description.zone_txt.text = "";

map_mc.buttonMode=true;

map_mc.addEventListener(MouseEvent.MOUSE_OVER, mapOver);
map_mc.addEventListener(MouseEvent.MOUSE_OUT, mapOut);

map_mc.northZone.countryName = "Singapore"; 
map_mc.northZone.zone = "North Zone";

map_mc.centralZone.countryName = "Singapore"; 
map_mc.centralZone.zone = "Central Zone";

map_mc.eastZone.countryName = "Singapore"; 
map_mc.eastZone.zone = "East Zone";

map_mc.westZone.countryName = "Singapore"; 
map_mc.westZone.zone = "West Zone";

map_mc.southZone.countryName = "Singapore"; 
map_mc.southZone.zone = "South Zone";

function mapOver(e:MouseEvent):void{
    var mapItem:MovieClip = e.target as MovieClip;
    description.countryName_txt.text = mapItem.countryName;
    description.zone_txt.text = mapItem.zone;   
    description.gotoAndStop(mapItem.name);
    TweenMax.to(mapItem, .5, {tint:0xFF9900});
    TweenMax.fromTo(description, .5, {alpha:0, x:50, blurFilter:{blurX:80}}, {alpha:1, x:10, blurFilter:{blurX:0}});
    }

function mapOut(e:MouseEvent):void{
    var mapItem:MovieClip = e.target as MovieClip;
    TweenMax.to(mapItem, .5, {tint:0x990000});
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:00:08.790

文本字段文本不能为空。

具体来说，此错误是由将文本字段`text`属性设置为`null`. 这可以用`TextField`经典文本复制：

经典文字：

```
var tf:TextField = new TextField();
tf.text = null; 
```

这将引发您引用的错误：

> 错误 #2007：参数文本必须为非空。

TLF Text 没有这个问题，可以设置为 null。

根据您的实现，这发生在您的`mapOver(e:MouseEvent)`函数中。要么 要么`mapItem.countryName`为`mapItem.zone`空。很可能它们都是空的。

```
var mapItem:MovieClip = e.target as MovieClip;
description.countryName_txt.text = mapItem.countryName; // null
description.zone_txt.text = mapItem.zone;               // null 
```

鼠标事件似乎没有从您期望的范围内分派。你有一个听众`map_mc`：

```
map_mc.addEventListener(MouseEvent.MOUSE_OVER, mapOver); 
```

您似乎希望从以下任何影片剪辑中发生此事件：`northZone`、`centralZone`、`eastZone`、`westZone`和`southZone`。这些符号具有您正在寻找的属性；但是， map_mc 没有。

因此，根本原因是您的事件侦听`e.target`器不是您期望的符号。

验证是什么符号`e.target`。它可能`map_mc`不具有您期望的属性：

```
map_mc.countryName; // doesn't exist
mac_mc.zone;        // doesn't exist 
```

您正在寻找以下子级的这些属性`map_mc`：

```
map_mc.northZone.countryName;
map_mc.northZone.zone;

map_mc.centralZone.countryName;
map_mc.centralZone.zone;

// etc... 
```

# ruby-on-rails - 辅助程序中使用的非标准轨道路线

> ID：11389314
> 
> 赞同：0
> 
> 时间：2012-07-09T05:01:52.220
> 
> 标签：ruby-on-rails, routes, view-helpers

在我的 routes.rb 中有

```
resources :clients_assessments do
  member do
    get :medical_edit
    get :mental_health_edit
    get :personal_edit
  end
  collection do
  end
end 
```

这给出了路线

```
 medical_edit_clients_assessment GET    /clients_assessments/:id/medical_edit(.:format)       {:action=>"medical_edit", :controller=>"clients_assessments"}
   mental_health_edit_clients_assessment GET    /clients_assessments/:id/mental_health_edit(.:format) {:action=>"mental_health_edit", :controller=>"clients_assessments"}
        personal_edit_clients_assessment GET    /clients_assessments/:id/personal_edit(.:format)      {:action=>"personal_edit", :controller=>"clients_assessments"}
                     clients_assessments GET    /clients_assessments(.:format)                        {:action=>"index", :controller=>"clients_assessments"}
                                         POST   /clients_assessments(.:format)                        {:action=>"create", :controller=>"clients_assessments"}
                  new_clients_assessment GET    /clients_assessments/new(.:format)                    {:action=>"new", :controller=>"clients_assessments"}
                 edit_clients_assessment GET    /clients_assessments/:id/edit(.:format)               {:action=>"edit", :controller=>"clients_assessments"}
                      clients_assessment GET    /clients_assessments/:id(.:format)                    {:action=>"show", :controller=>"clients_assessments"}
                                         PUT    /clients_assessments/:id(.:format)                    {:action=>"update", :controller=>"clients_assessments"}
                                         DELETE /clients_assessments/:id(.:format)                    {:action=>"destroy", :controller=>"clients_assessments"} 
```

当我尝试在帮助文件中使用它们时

```
route = medical_edit_clients_assessment_path(id) 
```

生成错误消息

```
No route matches {:action=>"medical_edit", :controller=>"clients_assessments"} 
```

我必须将其更改为

```
route = "/clients_assessment/#{able_id}/medical_edit" 
```

绕过错误消息。这条路线有什么好笑的

```
route = (able_id.nil? ? new_client_path : edit_client_path(able_id)) 
```

工作得很好。

我知道有人会要求它，所以这里是整个 routes.rb 和 rake 路由的结果

[https://gist.github.com/3074287](https://gist.github.com/3074287)

谢谢，拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:49:31.917

这可能是因为 id 为 nil

# blackberry - 如何使用 phonegap 中的代码签名密钥将 BlackBerry 应用程序构建到 .jad 文件？

> ID：11389316
> 
> 赞同：-1
> 
> 时间：2012-07-09T05:02:04.063
> 
> 标签：blackberry, cordova

我使用 BlackBerry Code 签名密钥构建项目，然后它可以成功构建并尝试下载它。它给了我一个 zip 文件名标准安装程序，里面有几个带有 .cod 文件的文件。因为我在没有签名密钥的情况下尝试构建。它给了我是一个 .jad 文件，但现在有一个无法安装到我的 bb 智能手机的文件夹。怎么来的？

有什么信息可以让我在 phonegap 构建中构建黑莓 .jad 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:21:56.710

对于签署您的智能手机应用程序 -

[签名_你的智能手机应用程序](https://developer.blackberry.com/html5/documentation/ww_publishing/signing_your_smartphone_app_1919664_11.html)

此链接将为您提供指导。

# entity-framework - 创建可更新模型 - 实体框架

> ID：11389317
> 
> 赞同：1
> 
> 时间：2012-07-09T05:02:08.193
> 
> 标签：entity-framework, model, entity

我只想知道是否有办法创建可更新模型。现在，我必须为模型中的所有表创建插入、更新和删除过程。这非常乏味，所以我想知道是否有一种方法可以解决这个问题？

我记得在我之前的工作中，我们过去常常在不创建过程的情况下制作模型并访问它们（CRUD）。但我现在不确定它是如何制作的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:27:23.170

有多种方法可以自动生成（即时或在编译时已生成）对数据库的实际 SQL 调用，以在实体框架中插入、选择、更新和删除。

1.  您可以使用 ORM 工具（例如 Linq to Entities）来最小化或消除原始 SQL 的编写。这意味着您仍然必须在实体上使用正确的属性以及其中的属性/方法，这是一个手动过程。[（此 MSDN 页面](http://msdn.microsoft.com/en-us/data/gg699321.aspx)上的一些背景）

2.  您可以允许框架根据一些现有的数据库模式（仅适用于 SqlServer 类型的数据库）自动生成实体，这基本上为您完成了 90% 的工作。在某些情况下，您可能需要覆盖，例如，使用自定义的默认插入 SQL。这是通过[生成数据库向导](http://msdn.microsoft.com/en-us/library/dd456817.aspx)（我认为它是 Visual Studio 2008+ 的一部分）实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:43:44.193

您可以将`POCO`类与 EF 一起使用。如果您使用的是 4.1 及更高版本，则可以使用[`DbContext`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)该类。要将模型映射到表/列，只需`OnModelCreating`在上下文类中覆盖（继承自`DbContext`）。假设您有一个名为 的模型`User`、一个名为 的表`Users`和上下文类`MyContext`，代码可能是这样的：

```
public class User
{
  public int UserId { get; set; }
  public string UserName { get; set; }
}

public class MyContext : DbContext
{
  public MyContext() :
    base("MyContext")
  {
  }

  public DbSet<User> Users { get; set; }

  protected override void OnModelCreating(ModelBuilder modelBuilder)
  {

    base.OnModelCreating(modelBuilder);

    modelBuilder.Entity<User>().
      .ToTable("Users");
    modelBuilder.Entity<User>().
      .Property(d => d.UserId)
      .HasColumnName("UserId")
    modelBuilder.Entity<User>().
      .Property(d => d.UserName)
      .HasColumnName("UserName");
  }    

} 
```

要使用它，只需将`User`实例添加到您的`DbSet`，然后调用`SaveChanges`：

```
using(MyContext ctx = new MyContext())
{
  var u = new User() { UserId = 1, UserName = "A" };
  ctx.Users.Add(u);
  ctx.SaveChanges();
} 
```

# iphone - FBGraph 和 FQL 用于获取 iphone 中的好友联系电话和 emailID

> ID：11389318
> 
> 赞同：-1
> 
> 时间：2012-07-09T05:02:16.413
> 
> 标签：iphone, facebook, api, facebook-fql

我正在使用 Facebook API 获取朋友的联系电话和电子邮件 ID，我在 fbgraph 和 fql 上工作，并使用来自[https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)的所有查询，但在 facebook 的论坛页面中我发现没有办法获得联系电话和电子邮件 ID。

我还使用了 Facebook API 的扩展权限，但我没有找到任何东西。

如果有人知道，请给出答案...

答案将不胜感激...

提前致谢！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:18:16.870

如果您将此代码与用户访问令牌一起使用

```
var url = "https://graph.facebook.com/me/?access_token=" + token;
var req = new XMLHttpRequest();

req.open("get", url, true);
req.send(null);
req.onerror = function () { alert("Error"); }; 
```

然后你会发现 req.responseText 有你想要的所有用户信息。您还可以在用户登录后获取用户访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:37:28.190

确保在用户进行身份验证时您具有“电子邮件”权限

```
NSArray *permissions = [NSArray alloc] initWithObjects:@"permissions",nil];
[facebook authorize:permissions];
[permissions release]; 
```

然后，当用户登录后，从图中获取“我”：

```
[facebook requestFromGraph:@"me/" withDelegate:self]; 
```

您从“requestDidLoad”回调方法中获取信息：

```
if([result objectForKey:@"first_name"]){
  // do stuff w/ user info
} 
```

身份证是：

```
 [request objectForKey:@"id"]; 
```

# c# - how to change the css of button based on menustrip item click windows application

> ID：11389319
> 
> 赞同：2
> 
> 时间：2012-07-09T05:02:17.343
> 
> 标签：c#, windows

I have five button and a menu strip, I want to apply the color on button based on the menustip click.

Suppose I have btn1, btn2, btn3, and menu stip which items are Test1, Test2, and Test3. When I click on Test1 then btn1 color should become orange, when I click Test2 and btn1 color become white and btn2 color become orange, same as Test3.

some one please help me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:15:17.557

Define the events of your Menu strip Items and you can do the following to change the color of buttons...

```
private void Test1ItemClick(object sender, EventArgs e)
{
    btn1.BackColor = Color.Orange;
}

private void Test2ItemClick(object sender, EventArgs e)
{
    btn1.BackColor = Color.White;
    btn2.BackColor = Color.Orange;
} 
```

Remember **There is no css for buttons in win forms**.

**Updated:**

```
void ChangeColor(string menuItem)
{
  switch(menuItem)
  {
    case "Test1":
      btn1.BackColor = Color.Orange;
      break;
    case "Test2":
      btn1.BackColor = Color.White;
      btn2.BackColor = Color.Orange;
      break;
     // and so on
  }
} 
```

# apache - 同一个 .htaccess 文件中有 2 个条件。

> ID：11389320
> 
> 赞同：0
> 
> 时间：2012-07-09T05:02:18.793
> 
> 标签：apache, .htaccess

当我从手机点击时，我会尝试这样做，我会重定向到手机网站，而从 pc 则意味着普通网站。但是条件不能正常工作。

```
<IfModule mod_rewrite.c>
  RewriteEngine on

  RewriteCond %{HTTP_USER_AGENT} "{android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile}" [NC]
  RewriteRule ^(.*)$ http://localhost:8080/home.html [L,R=301]

  RewriteCond %{HTTP_USER_AGENT} "!{android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile}" [NC]
  RewriteRule ^abc.html$ /abc1.html [R=301,L]
  RewriteRule ^1.html$ /2.html [R=301,L]

</IfModule> 
```

当我从移动设备点击 localhost 时，我可以正确获取移动网站，但是如果我给 localhost/abc.html 会出现第二个条件，但它实际上应该转到移动网站。代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:25:10.403

与其说是答案，不如说是您的方法的一组要点：

*   为什么在你的条件正则表达式中使用 {} 而不是正确的 () ？
*   第二个条件是多余的，因为逆总是匹配 prevoius [L] 规则？（规则 3 没有这个条件顺便说一句。
*   `RewriteBase /`如果你不这样做，你应该使用 a作为引擎有时会感到困惑
*   省略规则 2 和 3 替换字符串上的前导 /

最后也是最重要的，你为什么要做 301 重定向而不是简单的内部重定向，这样就不需要额外的往返和/或 301 的浏览器缓存？

```
RewriteCond %{HTTP_USER_AGENT} (android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile) [NC]
RewriteRule ^(.*)$ mobile/home.html [L]

RewriteRule ^abc.html$ abc1.html    [L]

RewriteRule ^1.html$   2.html       [L] 
```

# android - can we store downloaded files into an image which acts as a folder for downloaded files

> ID：11389324
> 
> 赞同：0
> 
> 时间：2012-07-09T05:03:12.753
> 
> 标签：android

I had an image which has been downloaded from the server.Now,I want this image to be as folder to store other downloaded files into it dynamically..

Is it possible to store the downloaded files into image?

can we use an image as folder ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:08:38.027

您不能将一个图像存储到另一个图像中，这意味着您的图像不会像一个文件夹一样。相反，您可以在其中创建外部文件夹`/mnt/sdcard/path_to_your_image_folder`，该文件夹可以充当下载图像的容器。

# android - How to Get the index of particular(custom) view from ViewGroup (FrameLayout) after doing onLongClick on the View

> ID：11389325
> 
> 赞同：7
> 
> 时间：2012-07-09T05:03:30.143
> 
> 标签：android, indexing, viewgroup, custom-view

Can someone help me with my Syntax? I am dynamically adding some views(custom view) to a FrameLayout that is already defined in XML. those custom view's are different type or same type. I'm able to add views to the screen but unable delete a particular view (either it is same type or different) from ViewGroup. those custom view having `onTouch()`.

Here i'm facing problem : unable to trigger for `long click`, always takes `touch listener`

I have to create two options here if user selects a view when long click on that

1.  change background color
2.  delete view.

**EDIT :** according to `tao` suggestion i am able to get index of long pressed view if there is no touch listener's to view. but i have to implement touch listeners along with long press...

How can I do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T01:27:19.307

好的，您的问题是“无法触发长按，总是需要触摸监听器”，但这还不够。我需要更多细节：

1.  您应该使用哪个视图来处理长按、父视图或子视图？
2.  你用哪个监听器来处理长按，android.view.View.setOnLongClickListener 或 android.view.GestureDetector？

实际上我上周做了同样的工作。我的经验是：不使用 android.view.View.setOnLongClickListener 也不使用 android.view.GestureDetector，**自己**处理对父视图的长按。View.java 就是一个很好的例子。

* * *

**编辑：**

我手头没有编译器，所以我只输入伪代码，它会自行处理长按，对于真实代码，View.java 会给你最好的答案。

首先，您需要一个 runnable 来实现您的操作

```
class CheckForLongPress implements Runnable {
    public void run() {
        if (getParent() != null) {
            // show toast
        }
    }
} 
```

其次，修改你的 onTouchEvent 以检测长按

```
boolean onTouchEvent(...) {
    switch (event.getAction()) {
        case MotionEvent.ACITON_DOWN:
            // post a delayed runnable to detecting long press action.
            // here mPendingCheckForLongPress is instance of CheckForLongPress
            postDelayed(mPendingCheckForLongPress, ViewConfiguration.getLongPressTimeout());
            ...
            break;

        case MotionEvent.ACTION_MOVE:
            // cancel long press action
            if (distance(event, lastMotionEvent) > mTouchSlop) {
                removeCallbacks(mPendingCheckForLongPress);
            }

            ...

            break;

        case MotionEvent.ACTION_UP:
            // cancel long press action
            removeCallbacks(mPendingCheckForLongPress);

            ...

            break; 
```

* * *

**再次编辑：**

以下是真实代码，不是伪代码，非常简单，显示了如何在 View.onTouchEvent() 中处理长按，希望对您有所帮助。

```
public class ItemView extends View {

    public ItemView(Context context) {
        super(context);
    }   

    public ItemView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ItemView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    Runnable mLongPressDetector = new Runnable() {
            public void run() {
                Toast.makeText(getContext(), "Hello long press", Toast.LENGTH_SHORT).show();
            }
        };

    MotionEvent mLastEvent;

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        mLastEvent = MotionEvent.obtain(event);

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            postDelayed(mLongPressDetector, ViewConfiguration.getLongPressTimeout());
            break;

        case MotionEvent.ACTION_MOVE:
            final int slop = ViewConfiguration.get(getContext()).getScaledTouchSlop();
            if (Math.abs(mLastEvent.getX() - event.getX()) > slop ||
                Math.abs(mLastEvent.getY() - event.getY()) > slop) {
                removeCallbacks(mLongPressDetector);
            }
            break;

        case MotionEvent.ACTION_UP:
            removeCallbacks(mLongPressDetector);
            break;

        }
        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:30:48.940

如果您的每个视图都有一个删除按钮或类似的东西，您可以这样做：

```
yourLayout.setTag(view); 
```

在您的删除部分：

```
yourLayout.setOnLongClickListener(new Button.OnLongClickListener() {
        public boolean onLongClick(View view) {
...
...
yourLayout.removeView((View) view.getTag());
return _value;
} 
```

我希望它可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T05:17:58.023

看这里：

[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)

有一个 int getId() 的方法。所以每个视图都有一个唯一的标识符。你可以用它来永远查看。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T05:18:27.667

> 在这里，我的问题是，当用户触摸该视图时，如何从视图组中识别所选视图。

我假设`TwoPointsDraw`&`OnePointDraw`正在扩展 View。

因此，在这种情况下，您可以做的是在创建 TwoPointsDraw.assign 唯一的 Id 或 Tag 对象之后。

```
TwoPointsDraw drawView = new TwoPointsDraw(context);
drawView.setTag("unique identifier"); <-Must be object type
drawView.setId(unique id); <-must be integer type 
```

当您单击特定视图时。您可以使用它来检查其身份。

`view.getTag()`或者`view.getId()`

片段应该看起来像

```
circle.setOnLongClickListener(new OnLongClickListener() {

    @Override
    public boolean onLongClick(View v) {
        Log.i("Long", v.getTag().toString());
        return false;
    }
}); 
```

希望这对您有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T22:45:03.460

为了您`OnLongClickListener`的工作，当您在 onTouch 函数中检测到长按时，您应该返回 false ！

例如：

在您的 GestureDetector 中，为您的 onLongClickListener 提供机会，您应该：

```
@Override
public boolean onDown(MotionEvent ev) {
    return false;
    // return super.onTouchEvent(ev);
} 
```

* * *

否则：

在您的视图中，实现该`setOnLongClickListener`函数并保存`onLongClickListener`传递的实例。每当检测到长按时，调用实例的`onLongClick`函数。

# python - Python Sub-process (Output PIPE)

> ID：11389331
> 
> 赞同：2
> 
> 时间：2012-07-09T05:04:13.100
> 
> 标签：python, subprocess

How can I read from output PIPE multiple times without using process.communicate() as communicate closes the PIPE after reading the output but I need to have sequential inputs and outputs.

For example,

1) `process.stdin.write('input_1')`

2) After that, I need to read the output `PIPE` (how can I accomplish that without using communicate as it closes the `PIPE`) and then give another input as

3) `process.stdin.write('input_2')`

4) And then read the output of step 3

But if I use `process.communicate` after giving first input then it closes the output `PIPE` and i am unable to give second input as the `PIPE` is closed.

Kindly help please.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:06:30.277

`flush()` stdin, then `read()` stdout.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:06:45.157

Instead of `process.communicate()`, use `process.stdout.read()`

# java - 如何从应用引擎数据存储中获取文本？

> ID：11389334
> 
> 赞同：4
> 
> 时间：2012-07-09T05:05:54.100
> 
> 标签：java, google-app-engine, google-cloud-datastore

有人可以告诉我如何使用 Java 从 Google App Engine 数据存储中获取文本值吗？我在数据存储中有一些实体，其中包含名为 longDescription 的 Text 属性。当我尝试这个时：

```
DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
Query q = new Query("Items");
PreparedQuery pq = ds.prepare(q);
for (Entity result : pq.asIterable()) {
    Text longDescription = (Text)result.getProperty("longDescription");
} 
```

我在 longDescription 分配行收到此警告：

```
WARNING: /pstest
java.lang.ClassCastException: java.lang.String cannot be cast to
    com.google.appengine.api.datastore.Text 
```

我在这里完全糊涂了。我的代码中*唯一*的字符串是用于获取正确属性的文字“longDescription”。如果我把它放在赋值行的上方：

```
log.warning("Type is " + (result.getProperty("longDescription")).getClass()); 
```

我看到以下输出：

```
WARNING: Type is class com.google.appengine.api.datastore.Text 
```

好的，所以 result.getProperty("longDescription") 真的是一个 Text 对象，它作为一个对象被传回。我什至尝试使用完全限定名称 (com.google.appengine.api.datastore.Text) 而不是仅使用 Text 具有相同的结果。字符串演员从哪里来？更重要的是，我如何从数据存储中获取该文本？我在这里无能为力，任何帮助将不胜感激！

哦，另一个可能相关的注意事项：这是我在将属性插入数据存储时使用的分配：

```
Entity eItem = new Entity("Items");
eItem.setProperty("longDescription", new Text(req.getParameter("ldes")));
ds.put(eItem); 
```

当我在管理控制台中查看描述时，它似乎超过 500 个字符，并且显示如下：

```
<Text: This is a long form description of an item in the store that is access...> 
```

我是不是在插入的时候搞砸了什么？如果是这样，您如何将文本项插入数据存储区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T06:30:23.983

我发现了问题所在，上面的评论中魏豪是对的。似乎在某个时候，我插入了一个测试字符串作为 longDescription 而不是 Text。我将把这归结为从学校的硬敲门中吸取的教训，因为我对数据存储有点菜鸟。

对于遇到此问题的任何其他人，答案是：如果您正在遍历查询结果列表，请**确保您在返回的****每个**结果中都获得了您期望的结果！请记住，这不是 RDBMS，每个实体都可以为同一属性具有不同的数据类型。所以是的，你可以有 1,572,394 个实体，其中 longDescription 是一个文本，一个实体其中 longDescription 是一个字符串，这会让你感到沮丧。

这是一个可能有助于诊断此问题的小代码片段：

```
DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
Query q = new Query("Items");
PreparedQuery pq = ds.prepare(q);
for (Entity result : pq.asIterable()) {
    if (longDescription isinstanceof Text)
        Text longDescription = (Text)result.getProperty("longDescription");
    else
        log.severe("Unexpected datatype: longDescription is a "
            + result.getProperty("longDescription").getClass().toString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T14:27:09.533

这是我的代码；

```
DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
        Query q = new Query(entityKind);

        PreparedQuery pq = ds.prepare(q);
        for (Entity e : pq.asIterable()) {
            String longtext = ((Text)e.getProperty("somelongdescription")).getValue();} 
```

# javascript - php style function check in javascript

> ID：11389335
> 
> 赞同：0
> 
> 时间：2012-07-09T05:05:58.517
> 
> 标签：javascript, function

I don't recollect exactly what its called but php checks and exists as soon as it finds one false value in a function, like so :

```
// php
if(isset(a["hi"]) && isset(a["hi"]["hello"])) {

} 
```

here if `a["hi"]` is not set, it will not bother to check the next `a["hi"]["hello"]`.

to check something like this in javascript you'd need to nest

```
// js
if(typeof(a["hi"]) != "undefined") {
    if(typeof(a["hi"]["hello"]) != "undefined") {

    }
} 
```

Can we do php style lazy checking in javascript? (I may not be using the best method to check if an element exists in a multi-dimentional array, if there is a succinct way of doing this, would love to know.)

thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:07:23.163

You could use `in` to check property existence.

```
if(a && ('hi' in a) && ('hello' in a['hi'])) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:08:35.147

```
if(a.hi === undefined && a.hi.hello === undefined) { 
```

if you know that a.hi can never be a falsey value (`null` / `false` / `0`) you can do

```
if(!a.hi && !a.hi.hello) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T07:50:13.477

检查`typeof`字符串的a变量`"undefined"`相当于使用`===`检查变量是否与`undefined`关键字的数据类型相同。因此，您可以将嵌套的 if 语句减少为单个语句：

```
if(a.hi !== undefined && a.hi.hello !== undefined) {
  // do something with a.hi.hello
} 
```

值得注意的是，上面的语句假定`a`if 语句发生时不为空，这可能会导致错误。如果您需要`a.hi.hello`在场`if`以评估语句，那么您可以使用虚假检查`a`，`a.hi`因为它们需要是`object`类型（非虚假）：

```
if(!!a && a.hi && a.hi.hello !== undefined) {
  // do something with a.hi.hello
} 
```

# c++ - Deferred/Promise pattern in C++

> ID：11389338
> 
> 赞同：14
> 
> 时间：2012-07-09T05:06:21.450
> 
> 标签：c++, design-patterns, jquery-deferred, promise

I've recently discovered, and fallen in love with, the Deferred/Promise pattern used in jQuery. It just encapsulates so many async use cases, including the wonderful chaining, filtering ability, that I can't believe I missed it for so long.

I've just finished refactoring my AS3 code to use the excellent CodeCatalyst/promise-as3 library ([https://github.com/CodeCatalyst/promise-as3](https://github.com/CodeCatalyst/promise-as3)), and so started thinking about going back to my C++ code and seeing how I could implement the pattern there.

Before I started coding this myself, I checked to see if it had been done before, and discovered the `std::future`/`std::promise` (and boost equivalents), but they are very heavy (they seem use real threads etc, and have a heavy template syntax).

So, my question is: Is there are lightweight, pure C++ implementation of the Deferred/Promise pattern, jQuery-style?

refs:

*   pattern: [http://en.wikipedia.org/wiki/Futures_and_promises](http://en.wikipedia.org/wiki/Futures_and_promises)
*   jQuery: [http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)
*   AS3: [https://github.com/CodeCatalyst/promise-as3](https://github.com/CodeCatalyst/promise-as3)
*   Dart: [http://api.dartlang.org/dart_core/Futures.html](http://api.dartlang.org/dart_core/Futures.html)
*   C++: [http://www.stdthread.co.uk/doc/headers/future/future.html](http://www.stdthread.co.uk/doc/headers/future/future.html)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-08-15T21:05:33.080

[很抱歉玩死灵法师，但我也对在 C++ 中使用A+](https://promisesaplus.com/)风格的 Promise非常感兴趣，并且花了数年时间寻找实现它的最佳方法。我最终成功了，你可以[在这里](https://github.com/LifeWanted/liblw/blob/master/source/lw/event/Promise.hpp)看到我的实现。

用法非常简单，但确实大量使用了模板和模板元编程。这是一个例子：

```
Promise<int> promise;

promise.future().then([](int i){
    std::cout << "i = " << i << std::endl;
    return "foobar";
}).then([](const std::string& str){
    std::cout << "str = " << str << std::endl;
});

promise.resolve(10); 
```

这将打印出：

```
i = 10
str = foobar 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T05:21:52.237

我不确定您所追求的解决方案有多轻巧，但是[std::async](http://en.cppreference.com/w/cpp/thread/async)极大地简化了未来/承诺对的设置，并允许调用者决定工作是由另一个线程异步执行还是延迟执行在同一个线程中执行。在任何情况下，调用者都不必进行任何显式的线程管理。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-09T05:25:31.440

有几个原因我认为你所要求的在 C++ 中几乎是不可能的。

首先，为了使用[C++11 的新 lambda 语法](http://www.cprogramming.com/c++11/c++11-lambda-closures.html)来进行内联函数声明（在 JavaScript 中这等价物是微不足道的且非常轻量级的），您几乎都必须使用模板来使用它们。

其次，与 JavaScript 不同，没有自动的 UI 线程供您将计时器/完成队列停放在上面，因此您几乎必须求助于创建一个线程池来监视准备好执行其任务的任务下一步。

当您说“纯 C++”和“轻量级”（以及隐式无线程）时，您还想到了什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-23T04:27:16.907

您可以使用协作式多任务处理程序。我在我的应用程序中使用了一个。我遇到的唯一问题是，如果我将 lambda 存储在 list<> 中并稍后调用它，则捕获的变量会被破坏。我还没有找到解决方案，但我很确定应该可以做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-20T11:36:13.917

我知道这个问题很老，但是我想还有值得一提的**rili**，它可能完全实现了你想要的。

有一些示例和文档。

与 lifewanted(liblw) 一样，它在很大程度上基于模板。该库的主要功能之一是 A+ Promises 实现 - 包括 Then（单个和两个参数）、Catch 和 finally。

链接：

*   [存储库](https://gitlab.com/rilis/rili/promise)
*   [维基和文档](https://rilis.io/projects/rili/library/promise/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-09T18:57:58.643

这是另一个模仿 JavaScript Promise 的 C++ Promise 库。它被设计为轻量级的，因此它可以用于例如非常 I/O 密集型异步软件，同时具有 JS 所承诺的许多优点。它已经在一个非常受欢迎的项目中使用了多年，因此经过实战证明： [https ://github.com/alxvasilev/cpp-promise](https://github.com/alxvasilev/cpp-promise)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-27T10:22:33.587

只需使用 Facebook 的 Folly 库：[https ://github.com/facebook/folly/blob/master/folly/docs/Futures.md](https://github.com/facebook/folly/blob/master/folly/docs/Futures.md)

Boost.Thread 和 C++17（甚至还不支持组合器）提供的功能不如 Folly。在 Folly 中，您甚至可以收到成功的结果，而不是像用户 Oz 的答案中显示的那样尝试。您可以通过使用线程池执行器（这以前是 Wangle 的一部分，但现在是 Folly 的一部分）甚至内联执行器来限制线程数。如果没有模板，您将无法在 C++ 中走得更远，它们确保了类型安全，这是一件好事。

请记住，您必须对期货使用移动语义，但您可以使用 folly::SharedPromise 从一个承诺创建多个期货。

您还可以查看此列表：[https](https://en.wikipedia.org/wiki/Futures_and_promises#List_of_implementations) ://en.wikipedia.org/wiki/Futures_and_promises#List_of_implementations （“基于非标准库的期货实现：”）。

# android - How can I open the Contacts activity just to view the contact's information, not allowing the user to click (or touch) anything?

> ID：11389342
> 
> 赞同：2
> 
> 时间：2012-07-09T05:06:43.743
> 
> 标签：android, android-intent

I want to open the native Contact activity, not the Contacts list as I already have done that, but a particular contact information using the native activity. The special requirement here is that all I want is to display the contact's information but not allowing the user to click anything. I can open the activity with this code:

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if(requestCode != 1) {
        return;
    }

    if(resultCode != Activity.RESULT_OK) {
        return;
    }

    Uri selectedUserUri = data.getData();
    this.onContactSelected(selectedUserUri);
}

private void onContactsButtonClick() {
    startActivityForResult(new Intent(Intent.ACTION_PICK, Contacts.CONTENT_URI), 1);
}

private void onContactSelected(Uri selectedUserUri) {
    startActivityForResult(new Intent(Intent.ACTION_VIEW, selectedUserUri), 2);
} 
```

I need the user not to be able to click anything because that's not part of the functionalities of my application, in the worst case I would need the activity to report me the clicked phone number or e-mail address instead of opening the dialer or a web browser.

Any help will be greatly appreciated.

Mike

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:32:40.280

试试下面的代码来开始选择联系人活动，比如这个代码写按钮点击事件联系人：

```
try
{
     Intent intent = new Intent(Intent.ACTION_PICK);
     intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
     startActivityForResult(intent, PICK_CONTACT);
}
catch (Exception e) {
    Intent intent = getIntent();
    finish();
    startActivity(intent);
} 
```

获得以下代码的联系电话后：

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent intent) 
    {
      try
      {

      if (requestCode == PICK_CONTACT)
      {         
          Cursor cursor =  managedQuery(intent.getData(), null, null, null, null);
          cursor.moveToNext();
          String contactId = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
           String  name = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME)); 
           String phone=cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.HAS_PHONE_NUMBER));
           String phoneNumber="test";

          if ( phone.equalsIgnoreCase("1"))
              phone = "true";
          else
              phone = "false" ;

          if (Boolean.parseBoolean(phone)) 
          {
           Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId,null, null);
           while (phones.moveToNext()) 
           {
             phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
           }
           phones.close();
          }
          Toast.makeText(this, "You are selected Contact name "+name, Toast.LENGTH_LONG).show();
          if(phone_no.getText().length()!=0)
          {
              phone_no.setText(phone_no.getText().toString()+","+phoneNumber);
          }
          else
          {
              phone_no.setText(phoneNumber);
          }

      }
        }
      catch (Exception e) {
        // TODO: handle exception
        }
    } 
```

此功能选择一个联系人分配电话号码编辑文本这不允许拨打电话！注意：此函数在 onCreate() 方法之后复制粘贴，如下格式：

```
@Override
   public void onCreate(Bundle savedInstanceState) {
     ------------Your Code ---------
}
@Override
   public void onActivityResult(int requestCode, int resultCode, Intent intent) 
   {
       ------------
   } 
```

# javascript - Show different elements of a form depending on dropdown box selection

> ID：11389346
> 
> 赞同：1
> 
> 时间：2012-07-09T05:07:07.143
> 
> 标签：javascript, html, forms

So I have a page that has a dropdown list and form. And what I want to do is depending on the option selected in the dropdown list I want to hide and show different parts of the form.

```
<select id="myselect>
    <option id="option1">Option_1</option>
    <option id="option2">Option_2</option>
    <option id="option3">Option_3</option>
</select>

<form action="" method="post">
    <input id="input_1" name="input_1" type="text" />
    <input id="input_2" name="input_2" type="text" />
    <input id="input_3" name="input_3" type="text" />
</form> 
```

So if Option_1 is selected then show input_1 and input_3, while hiding input_2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:53:08.587

纯JS

```
window.onload=function() {
  document.getElementById("myselect").onchange=function() {
    document.getElementById("input_2").style.display=(this.options[this.selectedIndex].value=="option1")?"none":"block";
  }
  document.getElementById("myselect").onchange(); //trigger
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:30:22.103

我设法通过在您的选项标签中添加“值”属性来解决您的问题：

```
<select id="myselect">
    <option id="option1" value="option1">Option_1</option>
    <option id="option2" value="option2">Option_2</option>
    <option id="option3" value="option3">Option_3</option>
</select>

<form action="" method="post">
    <input id="input_1" name="input_1" type="text" placeholder="input_1"/>
    <input id="input_2" name="input_2" type="text" placeholder="input_2"/>
    <input id="input_3" name="input_3" type="text" placeholder="input_3"/>
</form>​ 
```

并使用 jquery .change() 事件：

```
$select = $('#myselect');
$('#input_2').hide();
$('#input_3').hide(); 

$select.change(function(){
    if($(this).val() == "option1"){
        if($('#input_1').is(":hidden")){
            $('#input_1').show();            
        }        
        $('#input_2').hide();
        $('#input_3').hide(); 
    }
    if($(this).val() == "option2"){
        if($('#input_2').is(":hidden")){
            $('#input_2').show();            
        }
        $('#input_1').hide();
        $('#input_3').hide(); 
    }
    if($(this).val() == "option3"){
        if($('#input_3').is(":hidden")){
            $('#input_3').show();            
        }
        $('#input_1').hide();
        $('#input_2').hide(); 
    }     
});​ 
```

[jsfiddle](http://jsfiddle.net/ukNKP/14/)

# java - Connecting a Java Application through ODBC to an Unknown SQL Data Source

> ID：11389355
> 
> 赞同：1
> 
> 时间：2012-07-09T05:07:47.813
> 
> 标签：java, jdbc, odbc, jdbc-odbc

I have written a Java application where it should connect to "any" SQL based data source/database through Microsoft's ODBC connection and run SQL queries. I used the native Sun/Oracle JDBC-ODBC bridge to serve this very purpose. However, I don't seem to be getting the right data type for certain/random fields, depending on which database I get connected to. For instance, I get a "1.0" for a field where I should be getting a plane integer "1" and for date fields I get different timestamps which could be entirely different to what is originally set on the data source's tables.

I also know that the JDBC-ODBC driver provided by Sun/Oracle is an experimental driver and I'm guessing that is the cause of my issue, so I should be looking for a different driver.

Please keep in mind that as part of the requirements, everything should go through ODBC connections.

Is there any comprehensive drivers out there that could treat the majority of databases and come up with the right ResultSets in terms of their original types?

If not, how do you think I should get around this situation where I have no clue what database my application is dealing with at each particular instance?

Many Thanks,

# android - DateFormat does not get changed when change locale

> ID：11389357
> 
> 赞同：1
> 
> 时间：2012-07-09T05:07:59.980
> 
> 标签：android, localization

I am using this code to format the date according to phone locale

```
private String localisedDate(String date) {

    DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
    try{
    Date d1 = df.parse(date);
    Locale myLocale = Locale.getDefault();
    DateFormat sdf = DateFormat.getDateInstance(DateFormat.SHORT, myLocale);
    StringBuffer sb = new StringBuffer();
    FieldPosition fp = new FieldPosition(DateFormat.YEAR_FIELD);
    sb = sdf.format(d1, sb, fp);
    sb.replace(sb.lastIndexOf("/") ,sb.length(), new SimpleDateFormat("/yyyy").format(d1) );
    Log.e("date",sb.toString());
    return sb.toString();
}catch (Exception e) {
    // TODO: handle exception
    return date;
}
} 
```

This code shows perfect behavior on emulator and on galaxy tab p1000(froyo) But on htc and experia no matter which locale selected shows single format only

i.e. dd/MM/yyyy is there any thing else i need to check for locale while on smartphone? please provide some help. Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:52:48.553

你可以查看[**这个**](https://stackoverflow.com/questions/11201793/code-for-converting-gmt-to-device-time-zone-not-working)链接，也许你可以从这里得到一些想法。

代码之后

`calendar.setTime(date);`

只需转换`calendar`为字符串。

# c++ - boost::qi::parse 似乎会导致编译错误

> ID：11389359
> 
> 赞同：3
> 
> 时间：2012-07-09T05:08:18.837
> 
> 标签：c++, boost, compiler-errors, boost-spirit

我正在尝试使用 Boost::Spirit 编写解析器，并且我已经编写并编译了解析器。问题是，当我尝试编译解析函数时，编译器会抛出一堆模板错误。这是 Qi 语法：

```
template<typename Iterator>
struct etf_parser : qi::grammar<Iterator, std::map<std::string, etfnode>(), ascii::space_type> {
    etf_parser() : etf_parser::base_type(start) {
            using qi::int_;
            using qi::lit;
            using qi::double_;
            using qi::bool_;
            using qi::lexeme;
            using ascii::char_;

            quoted_string %= lexeme['"' >> +(char_ - '"') >> '"'];

            dataVal %= (quoted_string | double_ | int_ | bool_ | listObj | pairObj | mapObj);

            pairObj %= ('<' >> dataVal >> ',' >> dataVal >> '>');

            listObj %= '{' >> dataVal % ',' >> '}';

            mapKey %= +qi::char_("a-zA-Z_-0-9.");
            mapPair %= mapKey >> lit('=') >> dataVal;
            mapObj %= '(' >> mapPair % ',' >> ')';
            start %= mapPair >> ';';
    }

    qi::rule<Iterator, std::string(), ascii::space_type> quoted_string;

    // Data value parsers
    qi::rule<Iterator, etfnode(), ascii::space_type> dataVal;
    qi::rule<Iterator, std::vector<etfnode>(), ascii::space_type> listObj;
    qi::rule<Iterator, std::pair<etfnode, etfnode>(), ascii::space_type> pairObj;
    qi::rule<Iterator, std::map<std::string, etfnode>(), ascii::space_type> mapObj;

    qi::rule<Iterator, std::pair<std::string, etfnode>(), ascii::space_type> mapPair;
    qi::rule<Iterator, std::string(), ascii::space_type> mapKey;

    qi::rule<Iterator, std::map<std::string, etfnode>(), ascii::space_type> start;
}; 
```

这是解析功能。当我注释掉 qi::parse 调用时，代码编译得很好：

```
ETFDocument::ETFDocument(std::string content) {
    etf_parser<std::string::const_iterator> parser;
    std::map<std::string, rwnode> results;
    std::string::const_iterator begin = content.begin();
    std::string::const_iterator end = content.end();
    bool result = qi::parse(begin, end, parser, results);
    if(result) printf("Parsing succeeded\n"); else printf("Parsing failed\n");

    m_root = etfnode(results);
} 
```

当我尝试编译时，编译器会吐出以下错误：

```
In file included from /usr/include/boost/spirit/home/qi/nonterminal.hpp:14:0,
             from /usr/include/boost/spirit/home/qi.hpp:20,
             from /usr/include/boost/spirit/include/qi.hpp:16,
             from libmcg/etf.cpp:8:
/usr/include/boost/spirit/home/qi/nonterminal/rule.hpp: In instantiation of ‘bool boost::spirit::qi::rule<Iterator, T1, T2, T3, T4>::parse(Iterator&, const Iterator&, Context&, const Skipper&, Attribute&) const [with Context = boost::spirit::context<boost::fusion::cons<std::map<std::basic_string<char>, boost::recursive_wrapper<ETFDocument::etfnode> >&, boost::fusion::nil>, boost::spirit::locals<> >; Skipper = boost::spirit::unused_type; Attribute = std::map<std::basic_string<char>, boost::recursive_wrapper<ETFDocument::etfnode> >; Iterator = __gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >; T1 = std::map<std::basic_string<char>, boost::recursive_wrapper<ETFDocument::etfnode> >(); T2 = boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::ascii> >, 0l>; T3 = boost::spirit::unused_type; T4 = boost::spirit::unused_type]’:
/usr/include/boost/spirit/home/qi/reference.hpp:43:71:   required from ‘bool boost::spirit::qi::reference<Subject>::parse(Iterator&, const Iterator&, Context&, const Skipper&, Attribute&) const [with Iterator = __gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >; Context = boost::spirit::context<boost::fusion::cons<std::map<std::basic_string<char>, boost::recursive_wrapper<ETFDocument::etfnode> >&, boost::fusion::nil>, boost::spirit::locals<> >; Skipper = boost::spirit::unused_type; Attribute = std::map<std::basic_string<char>, boost::recursive_wrapper<ETFDocument::etfnode> >; Subject = const boost::spirit::qi::rule<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::map<std::basic_string<char>, boost::recursive_wrapper<ETFDocument::etfnode> >(), boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::ascii> >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type>]’
/usr/include/boost/spirit/home/qi/parse.hpp:86:82:   required from ‘bool boost::spirit::qi::parse(Iterator&, Iterator, const Expr&, Attr&) [with Iterator = __gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >; Expr = etf_parser<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> > >; Attr = std::map<std::basic_string<char>, boost::recursive_wrapper<ETFDocument::etfnode> >]’
libmcg/etf.cpp:113:53:   required from here
/usr/include/boost/spirit/home/qi/nonterminal/rule.hpp:303:17: error: no match for call to ‘(const function_type {aka const boost::function<bool(__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >&, const __gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >&, boost::spirit::context<boost::fusion::cons<std::map<std::basic_string<char>, boost::recursive_wrapper<ETFDocument::etfnode> >&, boost::fusion::nil>, boost::fusion::vector0<> >&, const boost::spirit::qi::char_class<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::ascii> >&)>}) (__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >&, const __gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >&, boost::spirit::qi::rule<__gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >, std::map<std::basic_string<char>, boost::recursive_wrapper<ETFDocument::etfnode> >(), boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal, boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::ascii> >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type>::context_type&, const boost::spirit::unused_type&)’
In file included from /usr/include/boost/function/detail/maybe_include.hpp:33:0,
             from /usr/include/boost/function/detail/function_iterate.hpp:14,
             from /usr/include/boost/preprocessor/iteration/detail/iter/forward1.hpp:67,
             from /usr/include/boost/function.hpp:64,
             from /usr/include/boost/spirit/home/qi/nonterminal/rule.hpp:16,
             from /usr/include/boost/spirit/home/qi/nonterminal.hpp:14,
             from /usr/include/boost/spirit/home/qi.hpp:20,
             from /usr/include/boost/spirit/include/qi.hpp:16,
             from libmcg/etf.cpp:8:
/usr/include/boost/function/function_template.hpp:1021:7: note: candidate is:
/usr/include/boost/function/function_template.hpp:754:17: note: boost::function4<R, T1, T2, T3, T4>::result_type boost::function4<R, T1, T2, T3, T4>::operator()(T0, T1, T2, T3) const [with R = bool; T0 = __gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >&; T1 = const __gnu_cxx::__normal_iterator<const char*, std::basic_string<char> >&; T2 = boost::spirit::context<boost::fusion::cons<std::map<std::basic_string<char>, boost::recursive_wrapper<ETFDocument::etfnode> >&, boost::fusion::nil>, boost::fusion::vector0<> >&; T3 = const boost::spirit::qi::char_class<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::ascii> >&; boost::function4<R, T1, T2, T3, T4>::result_type = bool]
/usr/include/boost/function/function_template.hpp:754:17: note:   no known conversion for argument 4 from ‘const boost::spirit::unused_type’ to ‘const boost::spirit::qi::char_class<boost::spirit::tag::char_code<boost::spirit::tag::space, boost::spirit::char_encoding::ascii> >&’ 
```

据我所知，它正在寻找一个船长，但得到的是 boost::spirit::unused_type 。我不确定为什么会发生这种情况，因为我在解析器定义中指定了 Skipper。我在 gcc 4.7.1 上使用 boost v1.49.0。

**编辑**：这是 etfnode 的定义。在 cpp 文件（包含其他代码片段）的开头有一个 typedef，它将“etfnode”别名为“rwnode”。

```
enum DataType {
    DT_INT,
    DT_STRING,
    DT_FLOAT,
    DT_BOOL,
    DT_LIST,
    DT_PAIR,
    DT_MAP
};

struct etfnode;
typedef boost::recursive_wrapper<etfnode> rwnode;
typedef boost::variant<
        int,
        std::string,
        double,
        bool,
        std::vector<rwnode>,
        std::pair<rwnode, rwnode>,
        std::map<std::string, rwnode> > etfvalue;

struct etfnode {
    DataType type;
    etfvalue value;

    etfnode(const std::string& s);
    etfnode(const int i);
    etfnode(const double d);
    etfnode(const bool b);
    etfnode(const std::vector<rwnode>& n);
    etfnode(const std::pair<rwnode, rwnode>& p);
    etfnode(const std::map<std::string, rwnode>& p);
    etfnode();
}; 
```

和一个测试字符串：

```
foo = 6;
bar = <"bar", 16.5>;
baz = {
    (
        foobar = "foo",
        bar = 12
    ),
    "foobar"
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T15:42:20.830

我认为最重要的罪魁祸首是您使用`qi::parse`而不是`qi::phrase_parse`，而您的语法明确使用了船长。

我还重写了`etfvalue`递归变体的定义。我不确定您的版本是否应该有效，但至少现在，您可以`etfnode`在您期望的所有地方使用。这样对我来说看起来更一致。

这是对我来说编译得很好的代码。`main()`它使用以下输出解析样本输入（请参阅 参考资料）：

```
Parsing succeeded
Unparsed remaining: ';' 
```

如果您真的想接受尾随`;`，请将主要规则修复为更像

```
start   = *(mapPair >> ';'); // or  *(mapPair >> (';'|qi::eoi)) 
```

祝你好运！

```
//add streaming operators for etfnode and etfvalue if you want to debug this:
//#define BOOST_SPIRIT_DEBUG
#include <map>
#include <string>
#include <boost/variant/recursive_wrapper.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/adapted.hpp>

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;

enum DataType {
    DT_INT,
    DT_STRING,
    DT_FLOAT,
    DT_BOOL,
    DT_LIST,
    DT_PAIR,
    DT_MAP
};

struct etfnode;
typedef boost::variant<
        int,
        std::string,
        double,
        bool, 
        boost::recursive_wrapper<std::vector<etfnode> >,
        boost::recursive_wrapper<std::pair<etfnode, etfnode> >,
        boost::recursive_wrapper<std::map<std::string, etfnode> > 
        > etfvalue;

struct etfnode {
    DataType type;
    etfvalue value;

    etfnode(const std::string& s)                       { value = s; type = DT_STRING; }
    etfnode(const int i)                                { value = i; type = DT_INT; }
    etfnode(const double d)                             { value = d; type = DT_FLOAT; }
    etfnode(const bool b)                               { value = b; type = DT_BOOL; }
    etfnode(const std::vector<etfnode>& n)              { value = n; type = DT_LIST; }
    etfnode(const std::pair<etfnode, etfnode>& p)       { value = p; type = DT_PAIR; }
    etfnode(const std::map<std::string, etfnode>& p)    { value = p; type = DT_MAP; }
    etfnode() { }
};

template<typename Iterator>
struct etf_parser : qi::grammar<Iterator, std::map<std::string, etfnode>(), ascii::space_type> {
    etf_parser() : etf_parser::base_type(start) {
            using qi::int_;
            using qi::lit;
            using qi::double_;
            using qi::bool_;
            using qi::lexeme;
            using ascii::char_;

            quoted_string = lexeme['"' >> +(char_ - '"') >> '"'];

            dataVal = (quoted_string | double_ | int_ | bool_ 
                    | listObj    | pairObj 
                    | mapObj
                    );

            listObj = '{' >> dataVal % ',' >> '}';

            pairObj = lit('<') >> dataVal >> ',' >> dataVal >> '>';

            mapKey  = +qi::char_("a-zA-Z_-0-9.");
            mapPair = mapKey >> lit('=') >> dataVal;
            mapObj  = '(' >> mapPair % ',' >> ')';

            start   = mapPair % ';';

            BOOST_SPIRIT_DEBUG_NODE(quoted_string);
            BOOST_SPIRIT_DEBUG_NODE(dataVal);
            BOOST_SPIRIT_DEBUG_NODE(listObj);
            //BOOST_SPIRIT_DEBUG_NODE(pairObj);
            BOOST_SPIRIT_DEBUG_NODE(mapObj);
            BOOST_SPIRIT_DEBUG_NODE(mapKey);
            BOOST_SPIRIT_DEBUG_NODE(mapPair);
            BOOST_SPIRIT_DEBUG_NODE(start);
    }

    qi::rule<Iterator, std::string(), ascii::space_type> quoted_string;

    // Data value parsers
    qi::rule<Iterator, etfnode(),                           ascii::space_type> dataVal;
    qi::rule<Iterator, std::vector<etfnode>(),              ascii::space_type> listObj;
    qi::rule<Iterator, std::pair<etfnode, etfnode>(),       ascii::space_type> pairObj;
    qi::rule<Iterator, std::map<std::string, etfnode>(),    ascii::space_type> mapObj;

    qi::rule<Iterator, std::pair<std::string, etfnode>(),   ascii::space_type> mapPair;
    qi::rule<Iterator, std::string(),                       ascii::space_type> mapKey;

    qi::rule<Iterator, std::map<std::string, etfnode>(),    ascii::space_type> start;
};

int main()
{
    etf_parser<std::string::const_iterator> parser;
    std::map<std::string, etfnode> results;

    std::string content = "foo = 6;\n"
        "bar = <\"bar\", 16.5>;\n"
        "baz = {\n"
        "       (\n"
        "                foobar = \"foo\",\n"
        "                bar = 12\n"
        "   ),\n"
        "   \"foobar\"\n"
        "};";

    std::string::const_iterator begin = content.begin();
    std::string::const_iterator end = content.end();
    bool result = qi::phrase_parse(begin, end, parser, ascii::space, results);
    if(result) printf("Parsing succeeded\n"); else printf("Parsing failed\n");

    if (begin!=end)
        std::cout << "Unparsed remaining: '" << std::string(begin,end) << "'\n";

    //m_root = etfnode(results);
} 
```

# asp.net-mvc-3 - why download file has no file extension?

> ID：11389362
> 
> 赞同：1
> 
> 时间：2012-07-09T05:09:09.280
> 
> 标签：asp.net-mvc-3

i create a simple mvc3(razor) web application and want to use it "for my customers to download files from my site". it works fine on local host but when i upload it on my host when user press download button the browse dialog box come up to download it can not realize file tipe and say unknown file and remove file extension for example : "test.rar" will convert to "test" with no file extension. i tested it on Firefox 12 and ie8 they show one behavior. please help me my code:

```
 public ActionResult down(string id)
        {

        return File(@"c:\test.rar", "rar", "test.rar");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:14:02.397

Try to change content type to `application/x-rar-compressed` or `application/octet-stream`.

# html - 您对 Internet Explorer 支持的立场是什么？

> ID：11389369
> 
> 赞同：-1
> 
> 时间：2012-07-09T05:10:17.860
> 
> 标签：html, css, internet-explorer

我想这是一个普遍的问题，但您对支持以前版本的 Internet Explorer 的官方立场是什么？您或您的同事实际上在多大程度上确保网站的外观、感觉和功能与 Internet Explorer 8... 7... 6 中应有的一样？...

[我记得 Google Apps 像昨天一样放弃对 IE7 的支持的那一天！](http://www.computerworld.com/s/article/9217279/Google_to_dump_support_for_Microsoft_s_IE7) 你对此持什么立场？在做出决定之前，您会考虑哪些事项？这通常是在一个项目到一个项目的基础上决定的（也许通过对观众的评估）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:14:29.073

主要问题很简单：虽然 Chrome、Firefox 和其他浏览器会在后台静默自动更新，但 IE 不会。你必须手动升级 IE，而对于那些短视的董事认为没有收获的公司来说，这是一项繁重的工作。

就个人而言，我尽量至少支持 IE7，但在 Windows XP 过时之前，IE8 应该是高优先级。

另一个个人偏好是列出该站点*打算*在其中工作的一组浏览器，以及下载它们的链接，如果有人有不同的浏览器碰巧可以工作，那么他们的权力就更大了。

编辑：需要考虑的其他事项：在新项目中不支持旧浏览器是可以的。但是，一旦项目已经有了用户，就要准备好给出一个非常好的理由来强迫他们更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:15:50.147

我会说这取决于相关网站的目标受众。

大多数 alpha 极客很久以前就停止使用旧 IE 版本，因此如果您的网站仅针对 alpha 极客，那么支持旧 IE 版本将是浪费时间。

另一方面，如果您的网站由企业用户（他们经常被迫使用特定的旧浏览器版本）或一般不太可能自己更新浏览器的人使用，那么您可能需要支持 IE 6-如果您不想冒失去用户的风险，也可以使用 8（或其他浏览器的旧版本）。这取决于使用旧浏览器的访问者的百分比。

# css - Force numpad on iPad when focusing on textbox in our website

> ID：11389370
> 
> 赞同：0
> 
> 时间：2012-07-09T05:10:20.583
> 
> 标签：css, ios, ipad, html

Hi we have an HTML5 website which will be accessed via iPad (similar to kiosk application). Website prompts user to type their PIN number. What I want is to force iPad to display numpad keyboard when user focuses on PIN textbox. It will be used by very old people and by default to switch to numpad in iPad keyborad you have to click "123" button. Older people wouldn't know that.

Can I use something like

```
<input type="number" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:17:14.110

您可以在 中设置文本字段的类型，`number`它将显示标准的 1-9 拨号盘式键盘。

例子：

```
<input type="number" /> 
```

来源：http: [//developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/InputTypes.html](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/InputTypes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:28:51.783

您可以使用 HTML5 的新文本框类型（数字）。当浏览器不需要它时，它默认为常规文本框。要使用它将输入类型设置为数字。例如：

```
<input type="number" /> 
```

另一种解决方案是使用 Javascript。您可以使用 jQuery UI 的数字选择器、[jStepper](http://jstepper.emkay.dk/default.aspx)之类的插件，或者只需添加以下代码来限制普通文本框。

```
$(document).ready(function() {
    $(".text_field").keydown(function(event) {
        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
         // Allow: Ctrl+A
        (event.keyCode == 65 && event.ctrlKey === true) || 
         // Allow: home, end, left, right
        (event.keyCode >= 35 && event.keyCode <= 39)) {
             // let it happen, don't do anything
             return;
    }
    else {
        // Ensure that it is a number and stop the keypress
        if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
            event.preventDefault(); 
        }   
    }
}); 
```

});

**资料来源：[如何使用 jQuery 在 HTML 输入框中只允许数字（0-9）？](https://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery)**

# javascript - 无法使用 javascript 更改锚点的文本

> ID：11389373
> 
> 赞同：-2
> 
> 时间：2012-07-09T05:10:44.470
> 
> 标签：javascript, anchor

我需要更改锚标记，请参见下面的代码。

```
document.getElementById("stationid").href=urlst;
document.getElementById("stationid").innerHTLM=stdesc;  //I also tried text=stdesc 
```

href 有效，但标签显示的文本保持不变。

在我的许多谷歌中，没有人特别说显示的文本是通过 innerHTML 访问的，但是在许多 Web 开发示例中，假设您知道这些事情。

我试图用谷歌搜索该字段的名称（所以我可以使用 ...displayedText=stdesc）但没有成功。一个暗示它是 nodeValue ，但这也不起作用。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:14:07.363

```
document.getElementById("stationid").innerHTLM=stdesc;

                                           ^^^^
                              here is your problem its `HTML` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:17:59.033

中的拼写错误

```
document.getElementById("stationid").innerHTLM=stdesc; 
```

`innerHTML`写成`innerHTLM`

# jquery - 如何在滚动到达上点时修复元素

> ID：11389376
> 
> 赞同：0
> 
> 时间：2012-07-09T05:11:17.703
> 
> 标签：jquery

我想知道当我们滚动浏览它时如何修复 div 元素。我应该在它原来的地方，但是当我们滚动到它的点时，它应该固定在那个地方。CSS`position:fixed;`在这里不起作用。

我见过很多网站使用这种技术，可能是 JQuery。[http://9gag.com/](http://9gag.com/) < 这是一个使用该技术的网站，向下滚动时可以在右侧边栏看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:15:42.220

`position:fixed`在这里使用。

您要修复的每个元素都有 2 种状态 -`position:absolute`和`position:fixed`. 您要修复的每个元素都有页面滚动值，可以将状态从一个更改为另一个

* * *

```
var 
Node = $('yourDIV'),
Func = function(){
 var Top = $(document).scrollTop();
 if(Top > 300) Node.css({'position':'fixed'});
 else Node.css({'position':'absolute'});
}

$(window).on('scroll',function(){ Func(); }); 
```

# c - c结构声明行为

> ID：11389379
> 
> 赞同：0
> 
> 时间：2012-07-09T05:11:30.557
> 
> 标签：c

我无法理解为什么我会收到此代码的编译错误？如果有人澄清它会很有帮助。

```
int main()
{
  struct xx
  {
    int x;
    struct yy
   {
    int z;
    struct xx *p;
    };
   struct yy *q;
  };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:20:42.827

在 C 语言中，如果不立即引入数据字段，则不允许`struct`在其他类型中声明类型。`struct`即结构声明和数据字段声明应该在一个步骤中完成（作为一个声明）。您违反了该规则：您的定义无缘无故`struct yy`地位于定义内部。`struct xx`

要么将`struct yy`定义拉到 之外`struct xx`，要么确保该`struct yy`定义立即声明 的字段`xx`。

例如，这实现了相同的意图，但正确执行

```
 struct xx
  {
    int x;
    struct yy
    {
      int z;
      struct xx *p;
    } *q; // `struct yy` definition is immediately used to declare field `q`
  }; 
```

但是，通常在 C 语言中没有理由创建嵌套结构定义。在同一级别定义结构通常是一个更好的主意，没有任何嵌套

```
struct yy
{
  int z;
  struct xx *p;
};

struct xx
{
  int x;
  struct yy *q;
}; 
```

你为什么不从一开始就这样做？以“嵌套”方式定义这些结构的意义何在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:14:55.780

你`;`在声明中失踪了`struct xx* p`。

```
 struct xx *p;
} *q 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T05:16:07.713

结构 yy 嵌套在结构 xx 中。因此，yy 的元素将通过结构 xx 的实例来访问，这需要知道 yy 的实例。如果实例是在定义结构之后创建的，编译器将不知道与 xx 相关的实例。因此对于嵌套结构 yy 你必须声明成员。

# ruby - Oauth2 google-api-ruby-client：如何将 Approval Prompt 设置为 Auto？

> ID：11389382
> 
> 赞同：2
> 
> 时间：2012-07-09T05:12:16.530
> 
> 标签：ruby, google-api, oauth-2.0, google-plus

*问题*：如何将批准提示设置为自动？它默认为“approval_prompt=force”

*代码*：我正在这样设置客户端。

```
 @client = Google::APIClient.new(
     :authorization => :oauth_2,
     :host => 'www.googleapis.com',
     :http_adapter => HTTPAdapter::NetHTTPAdapter.new
   )   
   @client.authorization.client_id = 'xxxx.apps.googleusercontent.com'
   @client.authorization.client_secret = 'xxxx' 
```

*上下文*：谷歌 OAuth2

*客户端库*：google-api-ruby-client

*参考*：对于 php 客户端的相同问题：
[Google+ OAuth API 在首次登录和授权后存储和检索令牌](https://stackoverflow.com/questions/10101551/google-oauth-api-store-and-retrieve-tokens-after-first-login-and-authorization?rq=1)

印章文档。我找不到approval_prompt setter [http://signet.rubyforge.org/api/Signet/OAuth2/Client.html](http://signet.rubyforge.org/api/Signet/OAuth2/Client.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T20:41:39.227

这就是我解决问题的方法。

我编写了一个单独的辅助方法，它将生成 Google OAuth URI

```
def build_auth_uri
return @client.authorization.authorization_uri(
 :approval_prompt => :auto
).to_s 
```

结尾

接下来，我没有直接在我的视图中引用 Google OAuth URI，而是调用了 helper。

那成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T22:21:38.077

这就是我解决问题的方法：

在 /app/views/devise/shared/_links.haml 中（_links.erb 类似）：

```
- if devise_mapping.omniauthable?
  - resource_class.omniauth_providers.each do |provider|
    - if provider == :google_oauth2
      = link_to "Sign in with Google", omniauth_authorize_path(resource_name, provider, approval_prompt: :auto)
    - else
      = link_to "Sign in with #{provider.to_s.titleize}", omniauth_authorize_path(resource_name, provider)
    %br/ 
```

编辑：更简单：将其添加到您的 devise.rb 或 omniauth.rb 初始化程序（在 /config/initializers 中）：

```
provider :google_oauth2, ENV["GOOGLE_KEY"], ENV["GOOGLE_SECRET"], {
  approval_prompt: "auto"
} 
```

[在此处](https://github.com/zquestz/omniauth-google-oauth2)查看文档以获取更多信息。

# android - How to move to the next screen while keeping a portion of the current screen android ViewFlipper?

> ID：11389386
> 
> 赞同：1
> 
> 时间：2012-07-09T05:13:07.733
> 
> 标签：android, viewflipper

I have two Layouts (screens) within ViewFlipper. Assume first layout width is longer than the second layout width. (Let's say, first layout width is 1000dp and second one has width of 500dp).

I can switch between these two screens easily. At the beginning first screen is fully displayed. When I click a button, second screen will come from right and first screen goes to the left. But I want to keep the second screen and (remember, second screen has less width) a portion of the first screen. That means a half of the first screen disappear. How can I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:08:34.760

您可以使用这个由 matthieu 制作的自定义可拖动空间。我在这里发布链接。将它放在一个新项目中，否则它将创建对您现有活动的引用。此布局将允许您拖动视图组。

[开发 Android 主屏幕](https://stackoverflow.com/questions/3467461/developing-an-android-homescreen)

# java - JFrame 的 contentPane 的 LayoutManager

> ID：11389387
> 
> 赞同：4
> 
> 时间：2012-07-09T05:13:16.223
> 
> 标签：java, swing, jframe, border-layout, contentpane

如此处所述：[向内容窗格添加组件](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html#contentpane)，

> 默认内容窗格是一个简单的中间容器，它继承自 JComponent，并使用***BorderLayout***作为其布局管理器。

这是一个证明：

```
JFrame frame = new JFrame();
LayoutManager m = frame.getContentPane().getLayout();
System.out.println(m instanceof BorderLayout); // prints true 
```

但是，您能解释一下以下代码的输出吗？

```
JFrame frame = new JFrame();

LayoutManager m = frame.getContentPane().getLayout();
System.out.println(m);
System.out.println(m.getClass().getName());

LayoutManager m2 = new BorderLayout();
System.out.println(m2);
System.out.println(m2.getClass().getName()); 
```

**输出：**

```
javax.swing.JRootPane$1[hgap=0,vgap=0]
javax.swing.JRootPane$1
java.awt.BorderLayout[hgap=0,vgap=0]
java.awt.BorderLayout 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T05:31:41.783

这解释了你的结果：

```
 protected Container createContentPane() {
        JComponent c = new JPanel();
        c.setName(this.getName()+".contentPane");
        c.setLayout(new BorderLayout() {
            /* This BorderLayout subclass maps a null constraint to CENTER.
             * Although the reference BorderLayout also does this, some VMs
             * throw an IllegalArgumentException.
             */
            public void addLayoutComponent(Component comp, Object constraints) {
                if (constraints == null) {
                    constraints = BorderLayout.CENTER;
                }
                super.addLayoutComponent(comp, constraints);
            }
        });
        return c;
    } 
```

创建内容窗格的方法创建了一个继承自 BorderLayout 的匿名内部类。因此对 instanceof 的测试将返回 true 但它是另一个类，因此类名不同。

# entity-framework - Issues with POCO Entities

> ID：11389388
> 
> 赞同：0
> 
> 时间：2012-07-09T05:13:24.500
> 
> 标签：entity-framework, poco, t4

I am using POCO entities in my application.

So i have three files:

```
DBModel1.edmx
DBModel1.Context.tt
DBModel1.tt 
```

Under **DBModel1.tt**, I have all **POCO Entities**.

Now my **DB** is copied to a new Server, wherein **1** new **table** has been **Added** to the database.

So I have to **add** one more **POCO entity** for **new table**.

Since now it's a complete **new DB**, I would have to create a **new EDMX** and **tt** files.

Is there anyway :

*   to make context.tt file point to new EDMX
*   to add new POCO Entities in existing tt file

Any help would be appreciated. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:13:50.977

要将 .tt 文件指向另一个 EDMX 文件，您只需打开该文件并将其声明的文件更改`inputFile`为另一个路径。

# jquery - 选择使用 jquery 创建的选项

> ID：11389391
> 
> 赞同：0
> 
> 时间：2012-07-09T05:14:06.017
> 
> 标签：jquery

我想动态创建选择选项。我有两个数组“年”和“月”。当用户选择 2011 时，其各自的月份应显示在下一个下拉菜单中。例如

如果我们选择 2009 那么下一个下拉选项应该是 "dec","oct","feb'

```
<head>

<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script type="text/javascript">

$(function (){

    $('#first').change(function(){

    var year= new Array('2011','2010','2009');
    var month= new Array('jan_feb_march','jan_march_april','dec_oct_feb');

    var yearVal= $('#first option:selected').text();

for(i=0; i<year.length;i++){

    if(year[i]==yearVal){

    var months=month[i]

}

}

    var y= months.split('_');

for (z=0;z<y.length;z++){

$('#second').append("<option>'"+y[z]+"'</option>")  

    }

    })
})

</script>

</head>

<body>

<div class="menu">
<select id="first">
<option>select</option>
<option>2011</option>
<option>2010</option>
<option>2009</option>

</select>
<select id="second"></select>

</div>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:26:57.227

看这个演示：

[http://jsfiddle.net/rathoreahsan/vMuev/](http://jsfiddle.net/rathoreahsan/vMuev/)

**查询：**

```
var categories = {
    "None":[{value:'3', text:'No cataegory selected'}],
    "2011":[{value:'1', text:'jan_feb_march'}],
    "2010":[{value:'2', text:'jan_march_april'}],
    "2009":[{value:'3', text:'dec_oct_feb'}]
};

function selectchange(){
    var select = $('[name=items]');
    select.empty();
    $.each(categories[$(':selected', this).text()], function(){
        select.append('<option value="'+this.value+'">'+this.text+'</option>');
    });
}

$(function(){
    $('[name=category]').on('change', selectchange);
}); 
```

希望这会有用:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T05:17:27.700

试试这个：

```
$("<option> some value </option>").appendTo($("#second")); 
```

# windows-xp - Why does file/open and command tool refer to different locations for c:\windows\system32\drivers in Windows XP 64?

> ID：11389394
> 
> 赞同：0
> 
> 时间：2012-07-09T05:14:19.377
> 
> 标签：windows-xp

Try the following experiment at your leasure in a Windows XP 64 box:

1.  Run Internet explorer, non-64bit version, or any other 32-bit program.
2.  Do file/open and browse to `c:\windows\system32\drivers` . Note that there are (typically) no files in this directory.
3.  Open a command shell with Start/Run/cmd and do `dir c:\windows\system32\drivers`.

The result is that you see a different set of files. That is, the same path refers to two different physical locations on the hard disk! What is the explanation for this? How can a 32-bit program (e.g. bash) refer to the "real" `c:\windows\system32\drivers` directory?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:20:37.977

查看 IE 文件 open Dialog 的 snip 右侧。什么是文件过滤器类型？

![在此处输入图像描述](../Images/ea5a81baf7c6064cf1fe8d5d90a59810.png)

默认情况下，它是**Web 文档**，因此现在显示文件，因为 Sys32 Drivers 文件夹中没有 Web 文档。

如果我将过滤器更改为所有文件

![在此处输入图像描述](../Images/54eeb8ca151aa8b764f6bf621f6aa79b.png)

# android - getting current location longitude and latitude in android

> ID：11389397
> 
> 赞同：1
> 
> 时间：2012-07-09T05:14:44.890
> 
> 标签：android, google-maps, latitude-longitude, locationmanager

THis is my location class with this i am getting location longitude and latitude, but my problem is if i change my current location the longitude and latitude values are not updating.

if i store my home location in my device, then my app is taking every time the same longitude and latitude values it is not taking my current location details. ex: I was in new york today and I launched a app and the location was my home in new jersey.

```
public class GetLocation extends Activity {
    protected LocationManager locationManager;
    protected Button retrieveLocationButton;
    Context mContext;
    Double Longitude, Latitude;
    String NetworkErrmsg = "", GpsErrmsg = "", ProviderErrmsg = "", NoNetworkmsg = "", GpsSuccesmsg = "", NetworkSuccesmsg = "";
    public GetLocation(Context mContext) {
        // TODO Auto-generated constructor stub
        this.mContext = mContext;
    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
   public void getLocationDetails() {
      locationManager = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10, 100, new MyLocationListener());
        boolean gps_enabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        boolean network_enabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        if (!gps_enabled) {
            GpsErrmsg = "No Gps Connectivity";
        } else {
            showCurrentLocation(LocationManager.GPS_PROVIDER);
            GpsSuccesmsg = "Gps Enabled";
        }
        if (network_enabled && !gps_enabled) {
            showCurrentLocation(LocationManager.NETWORK_PROVIDER);
            NetworkSuccesmsg = "Network Provider Enabled. Please Enable your GPS settings to get exact onaround you list";
        }
        if (!gps_enabled && !network_enabled) {
            NoNetworkmsg = "Please Enable your Network/GPS settings to get onaround you list";
        }
    }
    protected void showCurrentLocation(String provider) {
        Location location = locationManager.getLastKnownLocation(provider);
        if (location != null) {
            Longitude = location.getLongitude
            Latitude = location.getLatitude();
        } else {
            NoNetworkmsg = "Please Enable your Network/GPS settings to get onaround you list";
            Longitude=null; Latitude=null;
        }
    }
    private class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location location) { 
            System.out.println("Longitude " + location.getLongitude());
        }
        @Override
        public void onStatusChanged(String s, int i, Bundle b) {
            // Toast.makeText(GetLocation.this, "Provider status changed", Toast.LENGTH_LONG).show();
        }
        @Override
        public void onProviderDisabled(String s) {
            // Toast.makeText(GetLocation.this, "Provider disabled by the user. GPS turned off",Toast.LENGTH_LONG).show();
        }
        @Override
        public void onProviderEnabled(String s) {
            // Toast.makeText(GetLocation.this, "Provider enabled by the user. GPS turned on", Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:28:20.143

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.util.Log;
import android.os.Bundle;
import android.widget.Toast;

public class GPSLocationBased extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.locationbased);

    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    LocationListener ll = new Mylocationlistener();

    // ---Get the status of GPS---
    boolean isGPS = lm
            .isProviderEnabled(LocationManager.GPS_PROVIDER);

    // If GPS is not enable then it will be on
    if(!isGPS)
    {
        Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
        intent.putExtra("enabled", true);
         sendBroadcast(intent);

    }

    //<--registers the current activity to be notified periodically by the named provider. Periodically,
    //the supplied LocationListener will be called with the current Location or with status updates.-->
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
}

/**
 *Mylocationlistener class will give the current GPS location 
 *with the help of Location Listener interface 
 */
private class Mylocationlistener implements LocationListener {
    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            // ---Get current location latitude, longitude, altitude & speed ---

            Log.d("LOCATION CHANGED", location.getLatitude() + "");
            Log.d("LOCATION CHANGED", location.getLongitude() + "");
            float speed = location.getSpeed();
            double altitude = location.getAltitude();
            Toast.makeText(GPSLocationBased.this,"Latitude = "+
                    location.getLatitude() + "" +"Longitude = "+ location.getLongitude()+"Altitude = "+altitude+"Speed = "+speed,
                    Toast.LENGTH_LONG).show();
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

}

# asp.net - 如何检查控件是否被禁用？

> ID：11389400
> 
> 赞同：0
> 
> 时间：2012-07-09T05:14:52.807
> 
> 标签：asp.net, c#-4.0

我有一个在某些值上禁用并在某些值上启用的下拉列表。在保存期间我想检查它是否被禁用。

我通过以下方式禁用下拉列表：

```
ddlSectorRailway.Attributes.Add("disabled","disabled"); 
```

如何检查下拉菜单是否被禁用？我只想在启用下拉值时才保存它。如何在 C# 中做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:18:21.163

你应该这样编码：

```
ddlSectorRailway.Enabled = false; 
```

然后在保存时您可以检查：

```
if(ddlSectorRailway.Enabled)
{
   //save code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T05:19:05.747

```
if(ddlSectorRailway.Attributes["disabled"]!=null)
{
  if(ddlSectorRailway.Attributes["disabled"]=="disabled")
 {
   //your code 
 }
} 
```

# java - check weather app is live on market or not?

> ID：11389403
> 
> 赞同：2
> 
> 时间：2012-07-09T05:15:02.287
> 
> 标签：java, android

i am developing an app in which i have get all installed app from from my phone and i have display it in listview and want to share it. and there are automatically make market link with formulla "market url + package name".it all going to fine. but here i need to check weather this (xyz)app is live in market or not?

i have tried to find out , but can get more information regarding it so please help me out from this

Thanks Nik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:21:02.967

没有官方的API，所以，一般来说，没有。只需添加您的链接，最糟糕的可能是您收到“找不到匹配的应用程序”或类似错误。如果您尝试动态执行此操作，则必须使用一些非官方 API 或抓取，这可能违反 Google Play 使用条款。

# r - 计算滞后值

> ID：11389415
> 
> 赞同：1
> 
> 时间：2012-07-09T05:16:45.923
> 
> 标签：r, loops, for-loop

我有一个 for 循环将值填充到名为 Df 的数据框中。我的所有列都准确填充，但以下代码行不会产生我想要的值：

```
for(i in 2:(dim(Df)[1])){
Df$dailyReturns200[i] <- (Df$index200[i+1]-Df$index200[i])/Df$index200[i]
} 
```

这是 P2-P1/P1 的简单回报计算。我的一个朋友提出了一个操作顺序问题，但解决方案是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:23:43.030

没有可重复的示例很难回答，但您根本不需要循环执行此操作。这是做你想做的吗？

```
#Start with a simple one column matrix
x <- matrix(1:6, ncol = 1)

#Compute the diffence, pad with an NA at the front, and then divide by x
cbind(x, c(NA, diff(x))/x)
#----
     [,1]      [,2]
[1,]    1        NA
[2,]    2 0.5000000
[3,]    3 0.3333333
[4,]    4 0.2500000
[5,]    5 0.2000000
[6,]    6 0.1666667 
```

从帮助页面，`diff()`返回一个`suitably lagged and iterated differences.`. 在这种情况下，所有的差都为 1，然后除以 x，如上所示。有关`?diff`更多详细信息，请参阅。

# php - 用于设计访问控制列表的邻接列表与 mptt

> ID：11389416
> 
> 赞同：1
> 
> 时间：2012-07-09T05:17:02.347
> 
> 标签：php, tree, acl, adjacency-list, mptt

我正在我的系统中设计访问控制列表。其中将有一个组和帐户树，如下所示

```
所有用户
    管理员
          约翰
    特权成员
          彼得
          麦克风

```

在上面的树中'所有用户''管理员''特权成员是组。我想创建一棵树来存储上述信息。在邻接表遍历中，读操作成本很高，而在 Mptt 遍历中，写操作成本很高。对于 ACL，什么应该更重要，读或写。我认为 read 会被经常使用，但想在这里听取聪明人的意见。在 cake php acl 中，他们使用了 mptt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T09:54:29.287

在现实生活中，您使用的“读取”操作比“写入”操作多得多。所以，最好的办法是使用修改后的预序树遍历 (MPTT) 解决方案，一旦你理解它就非常优雅。这是[一个 PHP 类，它提供了修改后的预序树遍历算法的实现，该算法](http://stefangabos.ro/php-libraries/zebra-mptt/)有很好的文档记录并且易于使用。此外，在页面上，您会找到链接以阅读有关该算法的更多信息。

# delphi - 在 TeeChart 中编辑图例内容

> ID：11389417
> 
> 赞同：0
> 
> 时间：2012-07-09T05:17:05.093
> 
> 标签：delphi, teechart

是否可以在 TeeChart 中以编程方式编辑图例，因此可以区分使用左轴和右轴调用的变量。为了显示：

如果我正在绘制三个系列 p、q 和 r，并且 p 和 q 使用 VertAxis := aLeftAxis，而 r 使用 VartAxis := aRightAxis，那么在图例中我想将 p 和 q 分组在左轴标题和 r 下在右轴标题下。或者，两个单独的图例就足以完成相同的工作。TeeChart 的默认行为是将所有变量无区别地分组在同一个图例中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:20:08.203

是的，您可以显示多个图例，如*All Features\Welcome!\Miscellaneous\Legend\Multiple Legends*示例中所示，或使用 ExtraLegend 工具，如*All Features\Welcome!\Tools\Extra Legend Tool*中包含的新功能演示注册版本或可在[http://www.steema.com/download/vcl](http://www.steema.com/download/vcl)获得。

# android - 是否可以通过更新获得已安装应用程序的新权限？

> ID：11389418
> 
> 赞同：2
> 
> 时间：2012-07-09T05:17:12.863
> 
> 标签：android, android-manifest, android-internet

我想知道是否有可能获得在通过 android 市场安装应用程序时未授予但在更新时获得的新权限（例如 INTERNET 权限）。例如，我给我的应用程序的免费版本没有广告，一段时间后，如果我想用广告更新现有用户和新用户（通过更新清单中的权限）这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:18:37.817

是的，新权限将在用户更新时显示给用户。向现有的免费应用程序添加广告可能不是最好的想法——它肯定会给你一堆 1 星评级。

# c++ - Windows API 建立事件

> ID：11389426
> 
> 赞同：0
> 
> 时间：2012-07-09T05:18:10.150
> 
> 标签：c++, windows, api, event-handling

因此，为了清楚起见，我将仅说明通过 C++ 开发 Windows 应用程序的三种不同方法。

1.  视窗 API。这是最基本的接口，也是最费力的。
2.  MFC
3.  带有 CLR 的 Windows 窗体

所以，是的，我想以艰难的方式做到这一点，Windows API 方式。我已经了解了基础知识并有一个工作程序。

我的问题是这样的：

```
case WM_KEYDOWN:
   rect2.top += 10;
   rect2.bottom += 10;
   InvalidateRect(hWnd, NULL, TRUE);
   return 0; 
```

我只知道一个键是向下的，不知道如何具体一点，也许是向下键。另外，您如何手动建立一个只需在 MFC 或 CLR 中双击的事件。希望各位大神解答，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:23:56.117

[您在“使用键盘输入](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646268%28v=vs.85%29.aspx)”中有一个概述和一些示例。如评论中所述，处理键盘事件可能并不明显，具体取决于您到底想要什么。[此处](http://www.kbdedit.com/manual/low_level_vk_list.html)提供了虚拟键代码列表。

```
case WM_KEYDOWN: 
    switch (wParam) 
    { 
        case VK_LEFT: 

            // Process the LEFT ARROW key. 

            break; 

        case VK_RIGHT: 

            // Process the RIGHT ARROW key. 

            break; 

        case VK_UP: 

            // Process the UP ARROW key. 

            break; 

        case VK_DOWN: 

            // Process the DOWN ARROW key. 

            break; 

        // Process other non-character keystrokes. 

        default: 
            break; 
    } 
```

# c# - 未调用 Windows 服务的 OnStop() 方法

> ID：11389428
> 
> 赞同：1
> 
> 时间：2012-07-09T05:18:20.897
> 
> 标签：c#, logging, windows-services

我用 C# 编写了一个 Windows 服务来记录所有用户登录和注销，并将它们保存在服务器上的表中。

我使用了一个`while`带条件的循环，并在这个循环中每分钟检查一次系统的当前用户，所以当我打开我的系统时`true`，我的服务会进入“正在**启动”状态。**

到这里一切都很好，但问题是`OnStop()`当我关闭系统时该方法没有被调用。我知道问题在于服务启动时的状态，因为当我`while`在服务方法中注释循环时`OnStart()`，该`OnStop()`方法将正确执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T05:37:49.047

OnStart（和 OnStop）不是为了**不**完成而设计的——它们旨在初始化服务，然后完成。我通常做的是创建一个单独的[线程](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)（这是在创建[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)之前），启动线程，然后完成。

在您的情况下，线程将启动一个计时器，并等待一个停止信号，该信号可以在服务停止时从 OnStop 方法发送。当停止信号到来时，它应该停止定时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T05:42:37.220

OnStart() 必须返回操作系统，下面是 MSDN 文档，

> 服务应用程序旨在长时间运行。因此，它通常会轮询或监视系统中的某些内容。在 OnStart 方法中设置监视。但是， OnStart 实际上并不进行监控。 一旦服务的操作开始，OnStart 方法**必须返回到操作系统。****它不能永远循环或阻塞。**

* * *

> 要设置简单的轮询机制，您可以使用 System.Timers.Timer 组件。在 OnStart 方法中，您将在组件上设置参数，然后将 Timer.Enabled 属性设置为 true。然后计时器会定期在您的代码中引发事件，此时您的服务可以进行监控。

[http://msdn.microsoft.com/en-us/library/aa984464%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa984464%28v=vs.71%29.aspx)

# php - 多次提交

> ID：11389432
> 
> 赞同：0
> 
> 时间：2012-07-09T05:19:04.313
> 
> 标签：php, javascript, mysql, submit

这是我的代码。`Onclick`提交时，如果答案正确，则该值将保存在数据库中。我想要的是，当我单击提交按钮时，必须禁用表单中的所有其他提交按钮。我可以这样做吗？请帮我。

```
 <textarea name="questn" id="questn" readonly="readonly" cols="45" rows="5"><?php echo $quest['questnId']; ?>.&nbsp<?php echo $quest['question'];?></textarea>
   <input type="submit" class="myButton" name="option" value="<?php echo $quest['optiona'];?>"/>
   <input type="submit" class="myButton" name="option"  value="<?php echo $quest['optionb'];?>" />
   <input type="submit" class="myButton" name="option"  value="<?php echo $quest['optionc'];?>" />
   <input type="submit" class="myButton" name="option"  value="<?php echo $quest['optiond'];?>" /> 
```

我使用提交而不是无线电的原因是我希望按钮上的值动态显示在它上面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:27:49.630

您可以在表单上编写一个`onsubmit` 事件以禁用所有按钮。

```
<form action="xyz.html" onsubmit="handleSubmit()">
  <input type="submit" name="option" value="b1"/>
  <input type="submit" name="option" value="b2"/>
  <input type="submit" name="option" value="b3"/>
  <input type="submit" name="option"  value="b4"/>
</form>

function handleSubmit(){
   var list = document.getElementsByName('option');

   for(var i=0;i<list.length;i++){
      list[i].disabled=true;
   }

   alert('all disabled');
}​ 
```

[http://jsfiddle.net/4BDaU/1/](http://jsfiddle.net/4BDaU/1/)

* * *

2）如果您不想禁用单击，我会建议使用`onclick`按钮来调用`handleSubmit`. 代码将如下所示。

```
 <input type="submit" name="option" onclick="handleSubmit(this)" value="b1"/>
  <input type="submit" name="option" onclick="handleSubmit(this)" value="b2"/>
  <input type="submit" name="option" onclick="handleSubmit(this)" value="b3"/>
  <input type="submit" name="option" onclick="handleSubmit(this)" value="b4"/> 
```

您处理的函数现​​在将接受`this`将被排除在循环中的函数。

```
function handleSubmit(current){
   var list = document.getElementsByName('option');

   for(var i=0;i<list.length;i++){
      if(list[i]!=current)   // new condition added
         list[i].disabled=true;
   }

   alert('all disabled');
}​ 
```

另请注意，在这种情况下，`onsubmit`您不需要添加`form`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:22:32.673

像这样的东西会起作用：

```
function disableEverything() {
    var inp = document.getElementsByTagName('input'), l = inp.length, i;
    for( i=0; i<l; i++) inp[i].disabled = true;
} 
```

然后你可以调用`onClick`任何提交按钮的这个函数。

* * *

为什么不能使用单选按钮？像这样：

```
<label><input type="radio" class="mybutton" name="option" value="<?=$quest['optiona']?>" /> <?=$quest['optiona']?></label>
... 
```

# css - sass 去声明

> ID：11389441
> 
> 赞同：3
> 
> 时间：2012-07-09T05:20:59.290
> 
> 标签：css, ide, editor, sass

有谁知道任何支持 sass 中的 mixins、函数、变量的“转到声明”的编辑器？

PHPStorm 声称，但它仅在声明位于同一文件中时才有效，而不是从外部文件中导入。

干杯

更新：事实证明[WebStorm](http://www.jetbrains.com/webstorm/)是开箱即用的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:27:36.067

这应该可以通过使用*ctags* [语言配置](http://ctags.sourceforge.net/EXTENDING.html)选项来配置 sass 语言定义，然后使用任何[支持](http://ctags.sourceforge.net/tools.html)ctags 的编辑器。在 Windows 平台上，我使用编辑器*列表中*的 Zeus 编辑器，它与 ctags 配合得很好。

# android - 在 Android 模拟器中运行地图应用程序时出现“wglGetExtensionsStringARB”错误

> ID：11389447
> 
> 赞同：0
> 
> 时间：2012-07-09T05:21:32.283
> 
> 标签：android, android-emulator

我在 Android 中有一个地图应用程序，并且正在 Android 模拟器上测试这个应用程序。问题是，当我运行应用程序时，它会因控制台输出而崩溃：

```
[2012-07-09 10:16:32 - Emulator] could not get wglGetExtensionsStringARB 
```

我不明白问题是什么。这个错误的原因是什么？任何人都可以建议如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:33:53.777

也许，您的应用程序需要 OpenGL 2.0，模拟器直到最近才支持它。如果是这样，请检查此 [Android OpenGL ES 2.0 模拟器](https://stackoverflow.com/questions/8941016/android-opengl-es-2-0-emulator)

# java - Java 中 MySQL 插入语句的性能：批处理模式准备语句与具有多个值的单个插入

> ID：11389449
> 
> 赞同：31
> 
> 时间：2012-07-09T05:21:44.110
> 
> 标签：java, mysql, jdbc

我正在设计一个`MySQL`数据库，它需要在各种 InnoDB 表中每秒处理大约 600 行插入。我当前的实现使用非批处理准备语句。但是，写入`MySQL`数据库瓶颈和我的队列大小会随着时间的推移而增加。

该实现是用Java编写的，我不知道手头的版本。它使用[Java 连接](http://www.mysql.com/downloads/connector/j/)`MySQL`器。我需要考虑切换到明天。我假设这是两个不同的连接器包。`JDBC`

我已阅读有关此问题的以下主题：

*   [优化 MySQL 插入以处理数据流](https://stackoverflow.com/questions/1774142/optimizing-mysql-inserts-to-handle-a-data-stream)
*   [MyISAM 与 InnoDB](https://stackoverflow.com/questions/20148/myisam-versus-innodb)
*   [将二进制数据插入 MySQL（没有 PreparedStatement）](https://stackoverflow.com/questions/10139521/inserting-binary-data-into-mysql-without-preparedstatements)

并从 mysql 站点：

*   [http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html](http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html)

我的问题是：

*   有没有人对在批处理模式下使用带有准备好的语句的 INSERT 与使用`INSERT`具有多个 VALUE 的单个语句的性能差异有建议或经验。

*   `MySQL`Java 连接器与`JDBC`. 我应该使用其中一种吗？

*   这些表用于存档目的，将看到约 90% 的写入到约 10% 的读取（甚至可能更少）。我正在使用 InnoDB。这是对 MyISAM 的正确选择吗？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-09T07:00:27.043

JDBC 只是提供标准接口的数据库访问的 Java SE 标准，因此您不必真正绑定到特定的 JDBC 实现。MySQL Java 连接器 (Connector/J) 是仅用于 MySQL 数据库的 JDBC 接口的实现。出于经验，我参与了一个使用 MySQL 使用大量数据的项目，对于可以生成的数据，我们更喜欢 MyISAM：它可以实现更高的性能丢失事务，但一般来说，MyISAM 更快，但 InnoDB 更可靠。

大约一年前，我也想知道 INSERT 语句的性能，并在我的代码架中找到了以下旧测试代码（对不起，它有点复杂，有点超出你的问题范围）。下面的代码包含插入测试数据的 4 种方法的示例：

*   *单人* `INSERT`；
*   *批处理* `INSERT`；
*   *手动批量* `INSERT`（永远不要使用它 - 这很危险）；
*   最后*准备散装* `INSERT`）。

它使用[TestNG](http://testng.org/doc/index.html)作为运行器，并使用一些自定义代码遗留，例如：

*   该`runWithConnection()`方法 - 确保在执行回调后关闭连接或放回连接池（但下面的代码使用不可靠的语句关闭策略 - 即使没有`try`/`finally`减少代码）；
*   `IUnsafeIn<T, E extends Throwable>`- 接受单个参数但可能抛出 E 类型异常的方法的自定义回调接口，例如： `void handle(T argument) throws E;`.

```
package test;

import test.IUnsafeIn;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import static java.lang.String.format;
import static java.lang.String.valueOf;
import static java.lang.System.currentTimeMillis;

import core.SqlBaseTest;
import org.testng.annotations.AfterSuite;
import org.testng.annotations.BeforeSuite;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

public final class InsertVsBatchInsertTest extends SqlBaseTest {

    private static final int ITERATION_COUNT = 3000;

    private static final String CREATE_TABLE_QUERY = "CREATE TABLE IF NOT EXISTS ttt1 (c1 INTEGER, c2 FLOAT, c3 VARCHAR(5)) ENGINE = InnoDB";
    private static final String DROP_TABLE_QUERY = "DROP TABLE ttt1";
    private static final String CLEAR_TABLE_QUERY = "DELETE FROM ttt1";

    private static void withinTimer(String name, Runnable runnable) {
        final long start = currentTimeMillis();
        runnable.run();
        logStdOutF("%20s: %d ms", name, currentTimeMillis() - start);
    }

    @BeforeSuite
    public void createTable() {
        runWithConnection(new IUnsafeIn<Connection, SQLException>() {
            @Override
            public void handle(Connection connection) throws SQLException {
                final PreparedStatement statement = connection.prepareStatement(CREATE_TABLE_QUERY);
                statement.execute();
                statement.close();
            }
        });
    }

    @AfterSuite
    public void dropTable() {
        runWithConnection(new IUnsafeIn<Connection, SQLException>() {
            @Override
            public void handle(Connection connection) throws SQLException {
                final PreparedStatement statement = connection.prepareStatement(DROP_TABLE_QUERY);
                statement.execute();
                statement.close();
            }
        });
    }

    @BeforeTest
    public void clearTestTable() {
        runWithConnection(new IUnsafeIn<Connection, SQLException>() {
            @Override
            public void handle(Connection connection) throws SQLException {
                final PreparedStatement statement = connection.prepareStatement(CLEAR_TABLE_QUERY);
                statement.execute();
                statement.close();
            }
        });
    }

    @Test
    public void run1SingleInserts() {
        withinTimer("Single inserts", new Runnable() {
            @Override
            public void run() {
                runWithConnection(new IUnsafeIn<Connection, SQLException>() {
                    @Override
                    public void handle(Connection connection) throws SQLException {
                        for ( int i = 0; i < ITERATION_COUNT; i++ ) {
                            final PreparedStatement statement = connection.prepareStatement("INSERT INTO ttt1 (c1, c2, c3) VALUES (?, ?, ?)");
                            statement.setInt(1, i);
                            statement.setFloat(2, i);
                            statement.setString(3, valueOf(i));
                            statement.execute();
                            statement.close();
                        }
                    }
                });
            }
        });
    }

    @Test
    public void run2BatchInsert() {
        withinTimer("Batch insert", new Runnable() {
            @Override
            public void run() {
                runWithConnection(new IUnsafeIn<Connection, SQLException>() {
                    @Override
                    public void handle(Connection connection) throws SQLException {
                        final PreparedStatement statement = connection.prepareStatement("INSERT INTO ttt1 (c1, c2, c3) VALUES (?, ?, ?)");
                        for ( int i = 0; i < ITERATION_COUNT; i++ ) {
                            statement.setInt(1, i);
                            statement.setFloat(2, i);
                            statement.setString(3, valueOf(i));
                            statement.addBatch();
                        }
                        statement.executeBatch();
                        statement.close();
                    }
                });
            }
        });
    }

    @Test
    public void run3DirtyBulkInsert() {
        withinTimer("Dirty bulk insert", new Runnable() {
            @Override
            public void run() {
                runWithConnection(new IUnsafeIn<Connection, SQLException>() {
                    @Override
                    public void handle(Connection connection) throws SQLException {
                        final StringBuilder builder = new StringBuilder("INSERT INTO ttt1 (c1, c2, c3) VALUES ");
                        for ( int i = 0; i < ITERATION_COUNT; i++ ) {
                            if ( i != 0 ) {
                                builder.append(",");
                            }
                            builder.append(format("(%s, %s, '%s')", i, i, i));
                        }
                        final String query = builder.toString();
                        final PreparedStatement statement = connection.prepareStatement(query);
                        statement.execute();
                        statement.close();
                    }
                });
            }
        });
    }

    @Test
    public void run4SafeBulkInsert() {
        withinTimer("Safe bulk insert", new Runnable() {
            @Override
            public void run() {
                runWithConnection(new IUnsafeIn<Connection, SQLException>() {
                    private String getInsertPlaceholders(int placeholderCount) {
                        final StringBuilder builder = new StringBuilder("(");
                        for ( int i = 0; i < placeholderCount; i++ ) {
                            if ( i != 0 ) {
                                builder.append(",");
                            }
                            builder.append("?");
                        }
                        return builder.append(")").toString();
                    }

                    @SuppressWarnings("AssignmentToForLoopParameter")
                    @Override
                    public void handle(Connection connection) throws SQLException {
                        final int columnCount = 3;
                        final StringBuilder builder = new StringBuilder("INSERT INTO ttt1 (c1, c2, c3) VALUES ");
                        final String placeholders = getInsertPlaceholders(columnCount);
                        for ( int i = 0; i < ITERATION_COUNT; i++ ) {
                            if ( i != 0 ) {
                                builder.append(",");
                            }
                            builder.append(placeholders);
                        }
                        final int maxParameterIndex = ITERATION_COUNT * columnCount;
                        final String query = builder.toString();
                        final PreparedStatement statement = connection.prepareStatement(query);
                        int valueIndex = 0;
                        for ( int parameterIndex = 1; parameterIndex <= maxParameterIndex; valueIndex++ ) {
                            statement.setObject(parameterIndex++, valueIndex);
                            statement.setObject(parameterIndex++, valueIndex);
                            statement.setObject(parameterIndex++, valueIndex);
                        }
                        statement.execute();
                        statement.close();
                    }
                });
            }
        });
    }

} 
```

看看用@Test 注释注释的方法：它们实际上执行`INSERT`语句。另外请看一下`CREATE_TABLE_QUERY`常量：在源代码中，它使用 InnoDB 在我安装了 MySQL 5.5 的机器上产生以下结果（MySQL Connector/J 5.1.12）：

```
InnoDB
Single inserts: 74148 ms
Batch insert: 84370 ms
Dirty bulk insert: 178 ms
Safe bulk insert: 118 ms 
```

如果您将`CREATE_TABLE_QUERY`InnoDB 更改为 MyISAM，您会看到显着的性能提升：

```
MyISAM
Single inserts: 604 ms
Batch insert: 447 ms
Dirty bulk insert: 63 ms
Safe bulk insert: 26 ms 
```

希望这可以帮助。

升级版：

对于第 4 种方式，您必须正确自定义`max_allowed_packet`in `mysql.ini`（`[mysqld]`部分），使其足够大以支持非常大的数据包。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-08T21:56:28.733

我知道这个线程已经很老了，但我只是想我会提到，如果你在使用 mysql 时将“rewriteBatchedStatements=true”添加到 jdbc url，它可以在使用批处理语句时带来巨大的性能提升。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T06:50:43.030

您对任何受影响的表有任何触发器吗？如果没有，每秒 600 次插入看起来并不多。

来自 JDBC 的批量插入功能将在同一事务中多次发出同一语句，而多值 SQL 将在单个语句中压缩所有值。在多值语句的情况下，您将不得不动态构造插入 SQL，这可能是更多代码、更多内存、SQL 注入保护机制等方面的开销。首先尝试常规批处理功能，对于您的工作负载，它应该不是问题。

如果您没有批量接收数据，请考虑在插入之前对其进行批处理。我们在单独的线程上使用队列来实现生产者-消费者的安排。在这种情况下，我们会阻止插入，直到经过特定时间或队列的大小超过阈值。

如果您希望通知生产者插入成功，则需要更多管道。

有时只是阻塞线程可能更直接和实用。

```
if(System.currentTimeMills()-lastInsertTime>TIME_THRESHOLD || queue.size()>SIZE_THRESHOLD) {
    lastInsertTime=System.currentTimeMills();
    // Insert logic
    } else {
    // Do nothing OR sleep for some time OR retry after some time. 
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-17T18:10:17.577

经过我自己的一些测试，Jordan L 给出了最好的提示。我认为 Lyubomyr 为 InnoDB 非脏批量插入提供的执行时间是错误的，因为他很可能没有在 JDBC 连接字符串中使用“rewriteBatchedStatements=true”。没有它，批次就一文不值。在我自己的测试中，使用准备好的语句的非脏批量插入甚至比使用准备好的语句的脏方法更快。

# java - JRuby Net::HTTP 失败并出现 OpenSSL::SSL::SSLError：证书不符合算法约束

> ID：11389452
> 
> 赞同：4
> 
> 时间：2012-07-09T05:21:49.127
> 
> 标签：java, https, jruby

Jruby jruby-1.7.0.preview1 JDK：Java(TM) SE Runtime Environment (build 1.7.0_05-b05)

我正在通过 HTTPS 从 REST Web 服务获取数据，几天来一直很好。

我在周末升级到 Ubuntu 12.04（从 11.10）——现在失败了。我只能假设在那段时间里我的 JVM 发生了一些变化。我以前以为我在使用 Java 7，所以我很困惑。

无论哪种方式，失败的代码都是**Net::HTTP.start**的一部分：

```
require "net/http"

Net::HTTP.start(uri.host, :use_ssl => true, :ca_path => "/etc/ssl/certs") do |http|
  #...
end 
```

错误是：

```
OpenSSL::SSL::SSLError: Certificates does not conform to algorithm constraints
    from org/jruby/ext/openssl/SSLSocket.java:180:in `connect'
    from /opt/jruby/active/lib/ruby/1.9/net/http.rb:799:in `connect'
    from org/jruby/ext/timeout/Timeout.java:103:in `timeout'
    from /opt/jruby/active/lib/ruby/1.9/net/http.rb:799:in `connect'
    from /opt/jruby/active/lib/ruby/1.9/net/http.rb:755:in `do_start'
    from /opt/jruby/active/lib/ruby/1.9/net/http.rb:744:in `start'
    from /opt/jruby/active/lib/ruby/1.9/net/http.rb:557:in `start' 
```

任何帮助，将不胜感激。

**编辑：**

我刚刚在 Java 6 上进行了测试，它运行良好。

我想知道它是否与：[https ://forums.oracle.com/forums/thread.jspa?threadID=2405379](https://forums.oracle.com/forums/thread.jspa?threadID=2405379)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:01:50.753

在这里找到了一个解决方案：http: [//sim.ivi.co/2011/07/java-se-7-release-security-enhancements.html](http://sim.ivi.co/2011/07/java-se-7-release-security-enhancements.html)

短版：进入 java_home/jre/lib/security/java.security 并更改

```
jdk.certpath.disabledAlgorithms=MD2 
```

到

```
jdk.certpath.disabledAlgorithms= 
```

但是，请注意，这会重新启用 MD2 散列，这已被证明是不安全的。

见： [https ://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-2409](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-2409)

# java - 如何从谷歌日历获取日期时间

> ID：11389454
> 
> 赞同：1
> 
> 时间：2012-07-09T05:21:55.420
> 
> 标签：java, datetime

```
EventDateTime d1 = event.getStart();
SimpleDateFormat outputFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
String outputDate = outputFormat.format(d1.getDate()); 
```

我无法在字符串中获取日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:03:00.927

`EventDateFormat.getDate()`得到
`The date, in the format "yyyy-mm-dd", if this is an all-day event.`

您可能想改用[getDateTime()](http://javadoc.google-api-java-client.googlecode.com/hg-history/71c8e9b19946f57835aaceee8ed2561c7f76a6f6/apis/calendar/v3/com/google/api/services/calendar/model/EventDateTime.html#getDateTime%28%29)。

# javascript - 有没有办法使用 pdf.js 为 pdf 渲染编写 javascript 事件

> ID：11389459
> 
> 赞同：3
> 
> 时间：2012-07-09T05:22:26.760
> 
> 标签：javascript, flash, pdf, pdf.js

我有一个场景，我被要求制作在线 PDF 查看器，在查看模式下，用户将选择 PDF 的某个区域，并在选择标记区域边界 wrst pdf 后应发送到服务器。

示例 如果用户单击某日期创建的区域，则应将所选区域的边界发送到服务器

现在我搜索了一下，发现**Pdf.js**可以处理 pdf 在浏览器中的呈现。如上所述，我是否可以将事件与 PDF 页面相关联，或者我是否应该寻找其他解决方案，例如`flash`

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:58:31.150

在 中`viewer.js`，有一些听众喜欢：

*   `window.addEventListener('mousedown', function mousedown(evt) {..}`
*   `window.addEventListener('mousemove', function keydown(evt) {..}`

您可以使用它们来执行拖动、选择、..的逻辑。

# ruby-on-rails - 如何将整数转换为二进制数组..

> ID：11389463
> 
> 赞同：4
> 
> 时间：2012-07-09T05:22:54.773
> 
> 标签：ruby-on-rails, ruby

有人可以给出最简单的解决方案，将整数转换为表示其相关二进制数字的整数数组。

```
Input  => Output
1      => [1]
2      => [2]
3      => [2,1]
4      => [4]
5      => [4,1]
6      => [4,2]

One way is :
Step 1 : 9.to_s(2) #=> "1001"
Step 2 : loop with the count of digit
         use / and % 
         based on loop index, multiply with 2
         store in a array 
```

还有其他直接或更好的解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T06:29:36.093

Fixnum 和 Bignum 有一个`[]`方法，它返回第 n 位的值。有了这个我们可以做到

```
def binary n
  Math.log2(n).floor.downto(0).select {|i| n[i] == 1 }.collect {|i| 2**i}
end 
```

您可以通过计算 2 的连续幂直到该幂太大来避免调用 Math.log2：

```
def binary n
  bit = 0
  two_to_the_bit = 1
  result = []
  while two_to_the_bit <= n
    if n[bit] == 1
      result.unshift two_to_the_bit
    end
    two_to_the_bit = two_to_the_bit << 1
    bit += 1
  end
  result
end 
```

更详细，但更快

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T06:07:30.530

这是一个使用 Ruby 1.8 的解决方案。（`Math.log2`在 Ruby 1.9 中添加）：

```
def binary(n)
  n.to_s(2).reverse.chars.each_with_index.map {|c,i| 2 ** i if c.to_i == 1}.compact
end 
```

在行动：

```
>>  def binary(n)
>>       n.to_s(2).reverse.chars.each_with_index.map {|c,i| 2 ** i if c.to_i == 1}.compact
>>     end
=> nil
>> binary(19)
=> [1, 2, 16]
>> binary(24)
=> [8, 16]
>> binary(257)
=> [1, 256]
>> binary(1000)
=> [8, 32, 64, 128, 256, 512]
>> binary(1)
=> [1] 
```

`.reverse`当然，如果您想按降序查看值，请添加 final 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:37:54.803

```
class Integer
  def to_bit_array
    Array.new(size) { |index| self[index] }.reverse!
  end

  def bits
    to_bit_array.drop_while &:zero?
  end

  def significant_binary_digits
    bits = self.bits
    bits.each_with_object(bits.count).with_index.map do |(bit, count), index|
      bit * 2 ** (count - index - 1)
    end.delete_if &:zero?
  end
end 
```

改编自并改进[了`comp.lang.ruby`](http://groups.google.com/group/comp.lang.ruby/browse_thread/thread/a8e4e2e860db9c45).

一些简单的基准测试表明，[此解决方案比涉及以](http://ideone.com/sJwqG)[2 为底的对数](http://ideone.com/Yav9H)或[字符串操作](http://ideone.com/9VikC)的算法更快，并且比[直接位操作](http://ideone.com/wQocY)慢。

# .net - 如何列出 .Net 网页中文件夹中存在的文件的名称

> ID：11389464
> 
> 赞同：0
> 
> 时间：2012-07-09T05:23:05.167
> 
> 标签：.net, webpage

我是.Net 的新手，我有这个要求，我需要列出.Net 网页文件夹中存在的文件的名称。我该怎么做？请帮助和指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:32:33.963

```
string path = Server.MapPath("~/folder/");
string[] files = Directory.GetFiles(path); 
```

# notepad++ - notepad++中的多词搜索和替换

> ID：11389466
> 
> 赞同：32
> 
> 时间：2012-07-09T05:23:23.047
> 
> 标签：notepad++

有谁知道如何在记事本++中一次替换几个不同的单词。

例如;

我有“好”、“好”和“好”，我想一次用“坏”、“差”和“不”来替换它们

我知道我可以一个一个地替换它们，但是我面临的问题需要我替换很多单词，这样做不方便。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-19T12:45:56.933

尝试用正则表达式`(good)|(great)|(fine)`替换`(?1bad)(?2worse)(?3not)`。

搜索查找由 . 分隔的三个备选方案中的任一个`|`。每个备选方案都有自己的捕获括号。替换使用条件形式**?Ntrue-expression:false-expression**其中**N**是十进制数字，该子句检查捕获表达式**N**是否匹配。

在记事本++ 6.3 中测试

更新：

> 从 6.0 版本开始，您可以在以下两个地址找到关于 N++ 使用的新的 PRCE 正则表达式的良好文档：
> 
> [http://www.boost.org/doc/libs/1_48_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html](http://www.boost.org/doc/libs/1_48_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html)
> 
> [http://www.boost.org/doc/libs/1_48_0/libs/regex/doc/html/boost_regex/format/boost_format_syntax.html](http://www.boost.org/doc/libs/1_48_0/libs/regex/doc/html/boost_regex/format/boost_format_syntax.html)
> 
> 第一个涉及搜索中正则表达式的语法
> 
> 第二个是关于 REPLACEMENT 中正则表达式的语法
> 
> 而且，如果你能理解“书面法语”，我做了一个关于PCRE正则表达式的教程，存储在Christian Cuvier（cchris）的个人站点中，地址如下：
> 
> [http://oedoc.free.fr/Regex/TutorielRegex.zip](http://oedoc.free.fr/Regex/TutorielRegex.zip)

（**摘自 THEVENOT Guy**在[http://sourceforge.net/p/notepad-plus/discussion/331754/thread/ca059a0a/](http://sourceforge.net/p/notepad-plus/discussion/331754/thread/ca059a0a/)的帖子）

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-24T16:18:03.820

## 从插件管理器安装[Python 脚本插件。](http://npppythonscript.sourceforge.net/)

## 使用您的替换创建一个文件（例如，C:/Temp/Substitutions.txt），用空格分隔值：

```
good bad
great worse
fine not 
```

## 创建一个新脚本：

```
with open('C:/Temp/Substitutions.txt') as f:
    for l in f:
        s = l.split()
        editor.replace(s[0], s[1]) 
```

## 针对要替换的文本运行新脚本。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-03-28T22:04:48.723

我四处寻找可以同时替换多个术语的软件，Notepad ++ 有字符限制（替换字段中限制为 2046 个字符），所以我决定用 HTML 制作自己的替换版本，这里是网站：

[https://jsfiddle.net/Byte/y50q1e7g/](https://jsfiddle.net/Byte/y50q1e7g/)

```
window.onload = function(){
	$("textarea,input[type='text']").focus(function() { $(this).select(); } );
}

function replace(){

	// Get Configuration
	let separatedBy = new RegExp( $("#separatedBy").val() );
	let useRegex = $("#useRegex").prop("checked");
	let isCaseSensitive = $("#caseSensitive").prop("checked") ? "" : "i";

	// Get 'Find' and 'Replace'
	let find = $('#find').val().split(separatedBy);
	let replace = $('#replace').val().split(separatedBy);

	// Make result equal origin
	$("#result").val($("#original").val());

	// Run in each 'find' item
	for(i=0; i<find.length; i++){
		// check if not use Regex to escape the regex
		find[i] = useRegex ? find[i] : find[i].replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');

		// Replace
		$("#result").val($("#result").val().replace(new RegExp(find[i],"g"+isCaseSensitive), replace[i]));
	}

}
```

```
*{
	font-family: Sans-Serif;
	box-sizing: border-box;
}

body{
	padding:1em 10%;
}

textarea,input[type='text']{
	font-family: monospace;
}

textarea{
	border-radius: 5px;
	width: 100%;
	padding:1em;
}

.config{
	width: 100%;
	border-radius: 5px;
	border: 1px solid #888888;
	padding: 1em;
	display: inline-block;
	color: #888888;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<p>
	Original text:<br />
	<textarea id="original" rows="4" cols="50"></textarea>
</p>

<p>
	Items to find:<br />
<textarea id="find" rows="4" cols="50">item1
item2
item3</textarea>
</p>

<p>
	Items to replace:<br />
<textarea id="replace" rows="4" cols="50">replace1
replace2
replace3</textarea>
</p>

<p class="config">
	<b>Configuration:</b><br><br />
	- Items separated by <input id="separatedBy" type="text" value="\n" size="3" /> (Regex)<br />
	- <input id="useRegex" type="checkbox"/> Use Regex in each item<br>
	- <input id="caseSensitive" type="checkbox" checked/> Use case sensitive
</p>

<p>
	<input type="button" value="Replace" onclick="replace()" />
</p>

<p>
	Result:<br>
	<textarea id="result"  rows="4" cols="50"></textarea>
</p>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-11T19:38:43.020

我需要在**几个文件**上运行替换。

因此，根据[Mauricio Morales](https://stackoverflow.com/a/16197147/5734097 "毛里西奥·莫拉莱斯")的回答，我创建了以下脚本。

```
with open('C:/Temp/Substitutions.txt') as f:
    files = notepad.getFiles()
    for file in files:
        notepad.activateFile(file[0]) 
        for l in f:
            s = l.split()
            editor.replace(s[0], s[1])
        f.seek(0) # reset file input stream 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-05T22:30:52.167

如果您一直在替换多个不同文件中的相同单词，则使用[这些按钮](http://i.stack.imgur.com/6kKVz.png)记录您的操作并将其保存为宏会很有帮助。*记事本++

# javascript - 使用Javascript垂直居中带按钮的Div

> ID：11389470
> 
> 赞同：2
> 
> 时间：2012-07-09T05:23:50.787
> 
> 标签：javascript, html, css

[http://jsfiddle.net/TN6wW/3/](http://jsfiddle.net/TN6wW/3/)

试图让“单击”按钮设置“mainImage”的边距，以便图像在页面上垂直居中。如果可能的话，我也试图避免使用 jQuery（我见过 jQuery 解决方案，但我是一名试图一次学习一件事的学生）

我的最终目标是弄清楚如何执行“单击”按钮应该执行的操作，除非我单击“下一个/上一个”按钮时执行此操作（并确保它使用来自新图像而不是当前图像的数字）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:48:08.637

一种常见的技术是使用 top: 50% 并使用图像高度一半的负边距顶部：http: [//jsfiddle.net/TN6wW/29/](http://jsfiddle.net/TN6wW/29/)

# jsf-2 - Primefaces 动态面板和唯一 ID

> ID：11389474
> 
> 赞同：2
> 
> 时间：2012-07-09T05:24:15.507
> 
> 标签：jsf-2, primefaces

我在理解 Primefaces 中的动态面板生成和单独折叠/关闭每个面板时遇到了一些困难

我在一个由列表支持的 ui:repeat 中生成了一个动态的 p:panels #。将对象添加到列表会自动增加我的面板计数，并且面板内的字段按预期呈现。我使用 varStatus=row 作为面板的唯一索引，但是我注意到面板 ID 对于所有行都是相同的！

尝试通过使用行变量来强制 ID 不起作用，但在面板标题属性中使用了相同的行变量，并且面板标题是动态呈现的。当我关闭或切换导致所有面板无法关闭/切换的面板时，这会导致问题，因为所有行的面​​板 ID 都相同....

如何动态渲染具有相关 close.toggle 功能的面板？

```
 <p:panel header="#{(app.name == null || app.name.length() == 0) ? 'Application '.concat(row.index+1) : app.name }"  
           toggleable="true"  toggleSpeed="500"  collapsed="#{app.panelCollapsed}"> 
```

# .net - 将 MVC3 应用程序重定位到子文件夹 - 如何路由操作

> ID：11389484
> 
> 赞同：1
> 
> 时间：2012-07-09T05:26:11.407
> 
> 标签：.net, asp.net-mvc-3

我正在尝试将 MVC3 应用程序部署到 IIS6 环境中到现有 2.0 站点的子文件夹中。我遇到的问题是，现在我已将应用程序重新定位到子文件夹，所有操作都无法访问控制器。控制器名称为 SurveyController，子目录名称为 Survey。

这就是出问题的地方

```
$.ajax({
    url: '@Url.Action("AddSurvey")',
    type: 'GET',
    async: false,
    contentType: 'application/json',
    success: function (result) {

        ko.applyBindings(new ViewModel(result));
    }
}); 
```

现在我已经移动到一个子文件夹中，我需要做什么来确保正确路由控制器操作？

目前注册的路线是

```
RouteTable.Routes.MapRoute("", "", new { controller = "Survey", action = "Index" }); 
```

编辑：

经过几次测试。我能够浏览到创建简单 hello 字符串的控制器。但是，一旦我介绍了 EF DBContext，它就会抛出一个错误说

“IControllerFactory 'UI.Infrastructure.NinjectControllerFactory' 没有返回名称为 'MyTest' 的控制器。”

```
 public ActionResult MyTest()
    {
        ContentResult cr = new ContentResult();
        cr.Content = "hello";
        return cr;
    } 
```

但不是

```
 public ActionResult MyTest()
    {
        RolloverModel ctx = new RolloverModel("name=MyModel");
        cr.Content = ctx.Connection.ConnectionString;
        return cr;
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:33:50.733

您现有的网站是否在 4.0 框架下运行？如果不是请切换到 4.0 框架。您可以[在此处找到更多详细信息](https://stackoverflow.com/questions/5345308/mvc-3-deployment-to-iis6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:21:45.330

我不知道你做了什么重定位，但你展示的 AJAX 示例不可能工作，因为你使用的`contentType: 'application/json'`是模型绑定器不支持的 GET 动词。

# c# - 如何从aspx页面绑定用户控件中存在的gridview？

> ID：11389491
> 
> 赞同：1
> 
> 时间：2012-07-09T05:27:57.467
> 
> 标签：c#, asp.net

我在 aspx 页面中有一个下拉列表。我在用户控件中有一个网格视图。我已将用户控件放在 aspx 页面中。如何在下拉列表的 selectIndexChanged 事件上绑定网格视图。我想将下拉列表选择的索引传递给一个函数，然后绑定用户控件中的gridview。我想从aspx.cs绑定gridview。

ASPX 页面

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Main.aspx.cs" MasterPageFile="~/HomePage.master" Inherits="Main" %>

<%@ Register TagPrefix="uc" TagName="UserControl" Src="~/UserControl.ascx" %>

<%@ Register Assembly="WebControls" Namespace="WebControls" TagPrefix="cc" %>
<asp:Content ContentPlaceHolderID="mainContent" ID="mainPart" runat="server">
    <asp:Label ID="Label1" runat="server" Text="<%$ Resources:GlobalResource, EmpName %>">></asp:Label>
    <cc:CstDropDown ID="ddl" runat="server" AutoPostBack="true"  OnSelectedIndexChanged="ddl_SelectedIndexChanged">
    </cc:CstDropDown>
    <uc:UserControl ID="UsrCtrl" runat="server" />
</asp:Content>
<asp:Content ContentPlaceHolderID="subContent" ID="sub" runat="server">
</asp:Content> 
```

ASCX 页面

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="UserControl.ascx.cs" Inherits="UserControl" %>

   <asp:GridView ID="dataGrid"  runat="server" AutoGenerateColumns="false" 
    DataKeyNames="EmpID" AutoGenerateDeleteButton="True" AutoGenerateEditButton="True" OnRowEditing="dataGrid_RowEditing"
     OnRowCancelingEdit="dataGrid_RowCancelingEdit" OnRowUpdating="dataGrid_RowUpdating"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:31:15.107

将用户控件 UsrCtrl 中的绑定方法设为 public，并从主页面下拉菜单的 selectedIndexChange 事件中调用。

**在 UsrCtrl 中**

```
public void BindMyGrid(string selectedValue)
{
     //Bind grid here
} 
```

**在 aspx Main.aspx**

```
protected void ddl_SelectedIndexChanged(object source, EventArgs e)
{
   UsrCtrl.BindMyGrid(ddl.SelectedValue);

} 
```

# android - 获取连接网络的 WiFi 信号强度

> ID：11389492
> 
> 赞同：3
> 
> 时间：2012-07-09T05:28:18.240
> 
> 标签：android, broadcastreceiver, android-wifi

我正在尝试在我的 Android 应用中显示连接的 WiFi 网络的信号强度。我尝试了以下方法：

```
//Receiver for information on the network info
private BroadcastReceiver mNetworkReceiver = new BroadcastReceiver()
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        Log.d("INFO", "onReceive()");
        List<ScanResult> scanResult = mWifi.getScanResults();
        for(ScanResult scan : scanResult)
        {
            Log.d("INFO","Network strength: " + String.valueOf(scan.level) + " dBm " + scan.SSID);
        }
    }   
}; 
```

然后我在 onResume()/onPause() 上注册/注销我的接收器：

```
@Override
public void onResume()
{
    super.onResume();
    mActivity.registerReceiver(mNetworkReceiver, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION)); //network info
}

@Override
public void onPause()
{
    super.onPause();
    mActivity.unregisterReceiver(mNetworkReceiver);
} 
```

但这似乎不起作用。我也`ACCESS_WIFI_STATE`启用了权限。我的接收器只有在我手动调用时才会被调用`<WiFiManager>.startScan()`，但我试图让它与我的广播接收器一起工作，这样我就可以在信号强度发生变化时始终显示信号强度。我注意到`onReceive()`提供了一个列表，如果我只想要连接网络的统计信息，这是不必要的。有什么办法也可以改变吗？

编辑：另外，我意识到对此有一些相关的问题，但我读过的那些并没有太大帮助。编辑2：澄清了我的问题。主要问题是我的接收器永远不会被调用，除非我调用`startScan()`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T06:29:17.167

好吧，这段代码对我来说很好，可以在使用 toast 更改时通知 WiFi 信号强度，所以

**我的接收器**是这样的

```
@Override
  public void onReceive(Context context, Intent intent) {
    List<ScanResult> results = wifiDemo.wifi.getScanResults();
    ScanResult bestSignal = null;
    for (ScanResult result : results) {
      if (bestSignal == null
          || WifiManager.compareSignalLevel(bestSignal.level, result.level) < 0)
        bestSignal = result;
    }

    String message = String.format("%s networks found. %s is the strongest.",
        results.size(), bestSignal.SSID);
    Toast.makeText(context, message, Toast.LENGTH_LONG).show();

    Log.d("Debug", "onReceive() message: " + message);
  } 
```

* * *

这就是我在**启动活动**中注册 Receiver 并在 TextView 上获取 Wifi 信息的内容

```
public class WiFiDemo extends Activity {

    WifiManager wifi;
    BroadcastReceiver receiver;

    TextView textStatus;    
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Setup UI
        textStatus = (TextView) findViewById(R.id.textStatus);      

        // Setup WiFi
        wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);

        // Get WiFi status
        WifiInfo info = wifi.getConnectionInfo();
        textStatus.append("\n\nWiFi Status: " + info.toString());

        // List available networks
        List<WifiConfiguration> configs = wifi.getConfiguredNetworks();
        for (WifiConfiguration config : configs) {
            textStatus.append("\n\n" + config.toString());
        }

        // Register Broadcast Receiver
        if (receiver == null)
            receiver = new WiFiScanReceiver(this);

        registerReceiver(receiver, new IntentFilter(
                WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
        Log.d(TAG, "onCreate()");
    }

    @Override
    public void onStop() {
        unregisterReceiver(receiver);
            super.onStop();
    }
    } 
```

* * *

**我在XML 布局文件**中的 TextView 上放置滚动视图

 **```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ScrollView
        android:id="@+id/ScrollView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/textStatus"
            android:text="WiFi Connections :" />
    </ScrollView>

</LinearLayout> 
```

* * *

最后我的**清单**看起来像这样

```
 <uses-sdk android:minSdkVersion="10" />
      <uses-permission android:name="android.permission.ACCESS_WIFI_STATE">
</uses-permission>
      <uses-permission android:name="android.permission.CHANGE_WIFI_STATE">
</uses-permission>

    <activity android:name=".WiFiDemo" android:label="@string/app_name">
          <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
          </intent-filter>
        </activity>

        <receiver android:name=".WiFiScanReceiver">
          <intent-filter>
            <action android:name="com.rdc" />
          </intent-filter>
        </receiver> 
```

还有什么问题告诉我！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T05:38:11.000

在您的接收器中执行此操作-

```
final List<ScanResult> results = _wifiManager.getScanResults();
//do it to get connected info..
    //  final WifiInfo wifiInfo = _wifiManager.getConnectionInfo();
      //           int connectedRssi= wifiInfo.getRssi();
        if (results != null) {
                for (final ScanResult result : results) {
                int rssi=result.level;
            }
              scanResult(rssi);
        } 
```

为扫描结果创建一个界面并在您的活动中调用它，无论您想显示它......

```
 public void scanResult(int rssi){
        _rssiText.setText(rssi);

      } 
```

清单权限——

```
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
  <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

希望这会对您有所帮助...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-22T11:25:06.413

如果您只想监控您可以使用的当前 WiFi 信号强度`IntentFilter`，`WifiManager.RSSI_CHANGED_ACTION`而不是`WifiManager.SCAN_RESULTS_AVAILABLE_ACTION`**

# php - php：在div中“包含”两次

> ID：11389495
> 
> 赞同：2
> 
> 时间：2012-07-09T05:28:26.617
> 
> 标签：php, function, html

文件 a.html

```
 <div id=1>
       <?php Include "a.php?parameter=1" ?>
    </div>

    <div id=2>
       <?php Include "a.php?parameter=2" ?>
    </div> 
```

文件 a.php：

```
 <? Php
    b;
    Function b {}
    ?> 
```

调用 a.html 会产生错误：div 2 中的“无法重新声明`b()`”。原因很容易理解 - 但最有效的解决方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:50:56.857

包含另一个 PHP 文件不会触发新的 HTTP 请求。您不能像这样将参数传递给包含的文件。引号内的文本必须解析为磁盘上的文件，包括该`?parameter=1`部分。

如果要将参数传递给包含的文件，请记住当前范围可用于包含的代码。您可以为全局/局部变量赋值，然后在包含的文件中使用它们。

```
// run.php

<?php
    $name = 'Bob';
    include 'inc.php';
?>

// inc.php

<?php
    echo "Hi, $name!\n";
?> 
```

**更新**

不能多次声明同一个函数，即使使用`include`. 相反，在页面顶部包含声明函数的文件一次。用于[`require_once`](http://php.net/manual/en/function.require-once.php)确保它只发生一次并在找不到文件时中断。然后，在您需要函数效果的任何地方，在您的页面脚本中调用它，而无需执行其他包含。

```
// run.php

<?php require_once 'sayhi.php'; ?>

<div id="1">
    <?php sayhi('Bob'); ?>
</div>
<div id="2">
    <?php sayhi('Frank'); ?>
</div>

// sayhi.php

<?php
    function sayhi($name) {
        echo "Hi, $name!\n";
    }
?> 
```

这将创建所需的输出。

```
<div id="1">
    Hi, Bob!
</div>
<div id="2">
    Hi, Frank!
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:40:37.853

> 当一个文件被包含时，它包含的代码继承了包含发生的行的变量范围。从那时起，调用文件中该行的任何可用变量都将在被调用文件中可用。但是，包含文件中定义的所有函数和类都具有全局范围。

请查看有关[include()](http://php.net/manual/en/function.include.php)函数的信息。函数 b() 不必重新声明，因为它已经存在。如果您尝试修改设置/传递给函数的变量，那么您将为使用相应变量的函数包含一个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T05:56:12.000

如果你想为文件分配参数，那么你可以做两件事，而不是两次包含文件，

1）包含不带任何参数并使用可以为您执行操作的参数调用函数 2）不要在任何地方包含它，而是在您想要使用 exec 或 popen 时执行它并传递您接受为 argv 的参数 :)

# wpf - 如何在 EF、WCF 数据服务和客户端之间共享实体类？

> ID：11389497
> 
> 赞同：0
> 
> 时间：2012-07-09T05:28:42.003
> 
> 标签：wpf, wcf, entity-framework, wcf-data-services

我有一个 WPF 客户端应用程序，它连接到托管 WCF 数据服务和 WCF 服务的 IIS。

理想情况下，我想定义一个代表用户的类，然后能够在 WPF 客户端和 Web 服务器项目中重用相同的类实现。因此，我的验证代码和辅助方法只在一个地方进行了实现和单元测试。例如...

```
1, WPF client calls a WCF Services operation and gets back a User entity.
2, WPF client calls WCF Data Services and gets back a User entity. 
```

可以使用与 WCF 服务和实体框架相同的用户类来获取 WCF 数据服务。如果是这样，是通过自我跟踪实体、POCO 类还是其他选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:00:17.380

似乎您不能以任何有意义的方式共享相同的课程。所以我决定改用自定义 WCF 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T06:48:39.200

其实也没那么难。您可以使用 T4 生成数据服务代理，而不是常规的“添加服务引用”，然后您可以使用相同的命名空间来共享相同的实体。这是执行此操作的基本 T4 模板。（第二个好处是您可以对模板进行自定义）

[在这里](http://blogs.microsoft.co.il/files/folders/adiel_sharabi/entry757406.aspx)您可以找到演示项目（如果您阅读希伯来语，源代码在[此处](http://blogs.microsoft.co.il/blogs/adiel_sharabi/archive/2010/12/16/reuse-types-with-wcf-data-services.aspx?CommentPosted=true#commentmessage)），在演示中我使用它来混合 STE，但您可以将它与 POCO 或其他实体一起使用。

# java - JNI_CreateJavaVM 总是失败

> ID：11389498
> 
> 赞同：-3
> 
> 时间：2012-07-09T05:28:44.403
> 
> 标签：java, c++, java-native-interface

我正在尝试创建一个`JVM`通过 Windows 服务但`JNI_CreateJavaVM`总是失败。这是我的代码，

```
DWORD WINAPI InvokeMain(LPVOID lpParam) {
    // HACK to hang the function
    while(1) {
        if( (_access( "e:\\file", 0 )) != -1 ) {
            break;
        }
    }
    //Load the JVM Dll
    HINSTANCE ghDllInstance = LoadLibrary(L"E:\\jdk1.6.0_26\\jre\\bin\\server\\jvm.dll");

    if( ghDllInstance == 0) {
        Log("Failed to load jvm dll\n");
        return FALSE;
    }
    //resolve the function pointer JNI_CreateJVM
    CreateJavaVM createJVMStart = (CreateJavaVM)GetProcAddress(ghDllInstance, "JNI_CreateJavaVM");

    JavaVMOption options[2];
    options[0].optionString    = "-Djava.class.path=e:\\win\\product\\lib"; // application class path 
    options[1].optionString    = " start";

    JavaVMInitArgs vm_args;
    vm_args.version            = JNI_VERSION_1_6; //JNI Version 1.4 and above
    vm_args.options            = options;
    vm_args.nOptions           = 2;
    vm_args.ignoreUnrecognized = JNI_FALSE;

    //Create the JVM
    JavaVM *vmStart;
    JNIEnv *env;
    jint res = createJVMStart(&vmStart, (void **)&env, &vm_args);
    if (res < 0)  {
        Log( "Error creating JVM");
        return FALSE;
    }       
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:28:58.083

我从未使用过 1.6 虚拟机。但我很确定这`start`不是一个有效的选择。
并且由于您传递`JNI_FALSE`给`ignoreUnrecognized`VM 没有创建。
我猜 start 是你程序的一个参数。但是你需要自己将它传递给 main 函数。

# objective-c - 不使用 drawRect 在视图中绘制多个矩形：

> ID：11389501
> 
> 赞同：0
> 
> 时间：2012-07-09T05:29:13.077
> 
> 标签：objective-c, cocoa-touch, uiview, drawrect

我有这段代码可以在 a 中创建多个矩形`UIView`：

```
CGContextRef ctx = UIGraphicsGetCurrentContext();

CGContextSetLineWidth(ctx, 0.5);

CGContextSetStrokeColorWithColor(ctx, [UIColor blueColor].CGColor);

//newView.xPoints is always equal in count to the other two arrays below.    
for (int i = 0; i < [newView.xPoints count]; i++) 
{
    CGFloat tx = [[newView.xPoints objectAtIndex:i]floatValue];
    CGFloat ty = [[newView.yPoints objectAtIndex:i]floatValue];
    CGFloat charWidth = [[newView.charArray objectAtIndex:i]floatValue];

    CGRect rect = CGRectMake(tx, (theContentView.bounds.size.height - ty), charWidth, -10.5);
    CGContextAddRect(ctx, rect);
    CGContextStrokePath(ctx);
} 
```

我试了一下，`drawRect:`效果很好。但是，我计划`drawRect:`用于其他目的。那么任何人都可以给我提示或提示如何在不使用的情况下做到这一点`drawRect:`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:31:25.530

你不能。Inside of`drawRect:`是当前上下文进入屏幕的唯一时间。您必须使您的“其他目的”与此矩形绘图代码共存。

但是，您可以将此代码分解为另一个方法，只要它仅从内部调用即可`drawRect:`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T05:31:39.770

你不能。唯一`UIGraphicsGetCurrentContext()`对您的视图有效的时间是 inside `drawRect:`。`drawRect:`您可以绘制到 drawRect 之外的图层，但如果您想真正看到它 ，您仍然必须将该图层绘制到您的视图中。

# jquery - jQuery onclick 会淡出

> ID：11389507
> 
> 赞同：1
> 
> 时间：2012-07-09T05:30:18.460
> 
> 标签：jquery, button, onclick

我有这个问题：我的代码正确吗？我在这里尝试做的是，当我单击“选择”按钮并插入按钮的值时，它将淡出意味着它已添加到我的数据库中。

这里的 jQuery 代码我添加了 $('li#static').fadeout();

这是代码：

```
// AJAX/JQUERY FORM
$(function() {
    $(".videoThumbS").click(function() {

        $("li#static").fadeout();

        var dataString = $(this).siblings('input[name="v_w_id"]').val();
        $.ajax({ 
            type: 'POST',                                  
            url: 'api.php',
            data: { v_w_id: dataString },
            dataType: 'html',               
            success: function(data) {
                var viewrecord = dataString;
                $('.selected_thumbs').append("<img class='appendPL' src=http://img.youtube.com/vi/" + viewrecord +"/default.jpg />");
            } 
        });    
    });
}); 
```

我的按钮是：

```
<input id="v_w_id_value" type="hidden" name="v_w_id" value="' . $yValue['videoid'] . '" />
<input class="videoThumbS" type="button" name="selectSel" value="Select" id="selectbut" /> 
```

我的代码正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:40:52.827

备择方案：

1.  用于`complete: function() {$("li#static").fadeout();}`您的 AJAX 请求
2.  利用`$(element).ajaxStop(function() {$("li#static").fadeout();});`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:33:30.660

把`$("li#static").fadeout();`你的成功函数放在里面，这样淡出只会在它插入数据库后发生。

# php - PHP 包含文件和文件系统的性能影响

> ID：11389508
> 
> 赞同：3
> 
> 时间：2012-07-09T05:30:19.270
> 
> 标签：php, filesystems, include

据我了解，当 PHP 遇到`include`（或`require`，或它们的`_once`版本）时，它会在文件系统中查找文件并解析它，就像代码在`include`调用位置时一样（除了`return`在文件中调用） ）。

因此，在繁忙的服务器上，很容易想象很多人会重复访问包含的文件（例如，连接到数据库的文件或定义全局函数的文件）。这会对性能产生显着影响吗？

通过将文件内容转储到相关位置来“编译”包含是否有利？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:12:09.947

我对 include()、require() 等的理解是，它的工作方式很像 C 预处理器 #include 指令，并且基本上运行所有代码，就好像它在当前文件的该位置内联一样，正如您所相信的那样。

正如上面的一些评论所说，如果这些文件被频繁使用（例如，经常通过 include() 调用），它们很可能位于 RAM 或至少一个磁盘缓存中。

无论如何，PHP 文件基本上都是 JIT 编译和缓存的，这毫无价值，因此您不应该注意到任何一种方式的性能损失。（更详细的信息[在这里](https://stackoverflow.com/a/2298282/220307)）。

此外，作为旁注 - 与 include() 和 require() 相比，include_once() 和 require_once()*确实*有很大的开销，所以如果速度是一个因素，请尽量避免使用这些调用。

# android - 取消在 webview [中间] 中加载视频不起作用

> ID：11389512
> 
> 赞同：0
> 
> 时间：2012-07-09T05:31:10.517
> 
> 标签：android, youtube, android-webview

加载 youtube 视频时 webView.stopLoading 不起作用。

```
 public void onCreate(Bundle b)
{

            WebView webView=(WebView) findViewById(R.id.sssWebView);
            webview.setWebViewClient(new WebViewClient());
            WebSettings webSettings = webReview.getSettings();
            webSettings.setJavaScriptEnabled(true);
            webSettings.setJavaScriptCanOpenWindowsAutomatically(false);
            webSettings.setPluginState(PluginState.ON);
            webSettings.setSupportMultipleWindows(false);
            webSettings.setSupportZoom(false);
            webview.setVerticalScrollBarEnabled(false);
            webview.setHorizontalScrollBarEnabled(false);

            webview.loadUrl("http://www.youtube.com/v/" + videoID);

}

@Override
        public void onBackPressed()
        {
        if(progreesDialogue!=null && progreesDialogue.isShowing())
        {

            progreesDialogue.dismiss();

        }

        webview.clearView();        
        webview.stopLoading();       
        this.finish();        
        super.onBackPressed();

        } 
```

# ios - NSUbiquitousKeyValueStore 同步问题

> ID：11389516
> 
> 赞同：7
> 
> 时间：2012-07-09T05:31:23.080
> 
> 标签：ios, icloud, nsubiquitouskeyvaluestore

我在使用 NSUbiquitousKeyValueStore 并让它在两个设备之间可靠地同步时遇到了麻烦。它开始让我发疯。疯狂的。

我看我的代码调用：

```
[[NSUbiquitousKeyValueStore defaultStore] setObject:_someData forKey:@"SomeData"];
[[NSUbiquitousKeyValueStore defaultStore] synchronize]; 
```

但更多时候，数据永远不会出现在其他设备上。

我已经看到它在几秒钟内同步，而其他时候我等了一个小时却从未见过同步。我将设备插入 xcode 并开始调试，有时数据会突然弹出，有时则不会。有时确实如此。

拨打此电话后，退出并重新启动应用程序，如果我阅读它，我会看到旧数据，而不是我刚刚发布的新数据。在同一台设备上。

当应用程序启动时，我会调用：

```
_someData = [[NSUbiquitousKeyValueStore defaultStore] stringForKey:@"SomeData"]; 
```

我假设没有需要运行的初始化代码。我没有找到任何例子。

当它工作时，它工作得很好。

然后今晚我正在查看设备日志，并在我最后一次退出后发现了这个（并尝试发送数据）：

```
Jul  8 21:32:03 unknown syncdefaultsd[17296] <Warning>: Error writing storage for com.mycompany.myapp to /private/var/mobile/Applications/4AC8C56E-6060-408B-84F9-F7EC336221D9/Library/SyncedPreferences/com.mycompany.myapp.plist: Error Domain=NSCocoaErrorDomain Code=4 "The operation couldn’t be completed. (Cocoa error 4.)" UserInfo=0xde80d40 {NSFilePath=/private/var/mobile/Applications/4AC8C56E-6060-408B-84F9-F7EC336221D9/Library/SyncedPreferences, NSUnderlyingError=0xde80b20"The operation couldn’t becompleted. No such file or directory"} 
```

该路径不是我的应用程序沙箱的有效路径（错误的 GUID），所以我想知道这是否是我问题的根源。在开发过程中我确实删除并重新安装了很多应用程序，所以我想知道某处是否缓存了一些旧路径并且它正在尝试同步该数据。有没有办法清除它？

我知道我的所有权利都设置正确，因为它有时确实有效。

`[[NSUbiquitousKeyValueStore defaultStore] synchronize]`正在回归`YES`。

有没有其他人看到这个问题或那个错误？当我的应用程序启动和将数据发送到云时，我还需要做些什么吗？根据文档和示例，这似乎很容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-12T14:33:58.877

我在启动时使用它并立即获得 iCloud 值或 updateKVStoreItems: 在 < 5 秒内被调用。

```
- (void) initializeiCloud
{
    NSUbiquitousKeyValueStore* store = [NSUbiquitousKeyValueStore defaultStore];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(updateKVStoreItems:) name:NSUbiquitousKeyValueStoreDidChangeExternallyNotification object:store];
    if ([store boolForKey:@"fakeSyncBit"])
    {
        NSLog(@"in initiCloud setting syncbit NO");
        [store setBool:NO forKey:@"fakeSyncBit"];  
    }
    else
    {
        NSLog(@"in initiCloud setting syncbit YES");
        [store setBool:YES forKey:@"fakeSyncBit"];
    }
    [store synchronize];
    NSLog(@"icloud store is synchronized. updateKVStoreItems: should be called shortly"); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-26T00:04:38.327

iCloud 键值存储不适用于需要定期频繁同步的数据，Apple 似乎不保证这些操作的及时性。苹果[表示](https://developer.apple.com/library/ios/documentation/cocoa/Conceptual/UserDefaults/StoringPreferenceDatainiCloud/StoringPreferenceDatainiCloud.html "在 iCloud 中存储数据")：

> 键值存储旨在存储不经常更改的数据。如果设备上的应用程序对键值存储进行频繁更改，系统可能会延迟某些更改的同步，以尽量减少与服务器的往返次数。应用程序进行更改的频率越高，以后的更改就越有可能被推迟并且不会立即显示在其他设备上。

如果您的应用程序没有立即同步是可以的，并且您对此的兴趣是加快测试/调试速度，那么除非您更改您的技术，否则这将是一个必要的挫折。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-09T10:38:16.440

NSUbiquitousKeyValueStore 的文档详细说明了同步的工作原理。我认为 Roger 的假设是，当您致电时：

```
[[NSUbiquitousKeyValueStore defaultStore] synchronize]; 
```

它将立即上传数据（假设有网络连接）。不是这种情况。调用`synchronize`只是获取您在内存中设置的键和值，并将它们保存到本地磁盘缓存中。完成此操作后，系统会通知 iCloud 有数据可供上传。`synchronize`方法文档下面提到了关键信息：

> 此方法不会强制将新键和值写入 iCloud。相反，它让 iCloud 知道可以上传新的键和值。不要依赖您的键和值立即在其他设备上可用。系统控制何时上传这些键和值。键值存储的上传请求频率限制为每分钟几个。

[链接到文档](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSUbiquitousKeyValueStore_class/Reference/Reference.html#//apple_ref/occ/instm/NSUbiquitousKeyValueStore/synchronize)

简而言之，系统控制您的键和值何时上传到 iCloud，调用`synchronize`只是将它们存储在本地缓存中，并通知 iCloud 等待上传的新数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T01:54:24.340

它可能是设备已安装应用程序列表中的陈旧缓存。尝试删除设备上的应用程序并重新安装。或者也许重新启动设备。

可以肯定的是，您应该向 bugreport.apple.com 提交报告

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T20:55:33.143

检查您的设备控制台 [通过 Xcode 中的管理器]。它可能包含有用的信息。即使空的 defaultStore 同步返回 YES，您的权利也可能不正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T19:53:42.463

在这种情况下，如果您使用越狱设备，您必须先删除 AppSync，然后 icloud 和 GameCenter 支持才能正常工作。显然，我假设您确实拥有 Apple 开发帐户。

# emacs - emacs-24.1 中的“无法打开加载文件，颜色主题”错误

> ID：11389519
> 
> 赞同：11
> 
> 时间：2012-07-09T05:31:32.483
> 
> 标签：emacs, elisp

我有点菜鸟。所以这个问题可能看起来有点烦人。

当我尝试按照此处的说明将颜色主题包加载到 emacs 中时： http://www.nongnu.org/color-theme/和此处：[http ://emacswiki.org/?](http://www.nongnu.org/color-theme/) [ColorTheme](http://emacswiki.org/?ColorTheme)，我总是收到错误在标题中的引号中。

它可能是我的 init 文件，它是一个 ~/emacs.el 配置。但我想确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:23:53.590

我怀疑颜色主题不在您的加载路径中。我也使用颜色主题。[在这里](https://github.com/rags/.emacs.d)查看我的 .emacs中的 init.el。您将介绍如何在 emacs 中加载第三方库的几个实例。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:25:25.000

不确定之前的任何答案是否解决了您的问题，但另一个问题可能是您的配置在其中，`~/emacs.el`而它应该在`~/.emacs.el`其中（“`.el`后缀是可选的，但前导`.`不是）。

# android - 购买后Android应用内崩溃

> ID：11389522
> 
> 赞同：1
> 
> 时间：2012-07-09T05:31:53.690
> 
> 标签：android, in-app-purchase, in-app-billing, google-play, android-logcat

我的 Android 应用程序在购买后崩溃。并在 logcat 中显示此错误：

```
Unable to start receiver com.blundell.test.BillingReceiver: java.lang.NullPointerException 
```

这是我的 Logcat：

```
07-09 11:10:22.901: I/BillingService(3369): Starting
07-09 11:10:22.971: I/BillingService(3369): Service starting with onCreate
07-09 11:10:22.971: I/BillingService(3369): Market Billing Service Successfully Bound
07-09 11:10:23.031: I/BillingService(3369): Market Billing Service Connected.
07-09 11:10:23.111: D/OpenGLRenderer(3369): Flushing caches (mode 0)
07-09 11:10:25.031: I/BillingService(3369): isBillingSupported response was: RESULT_OK
07-09 11:10:25.031: I/BillingService(3369): requestPurchase()
07-09 11:10:25.051: I/BillingService(3369): current request is:1048018758395364016
07-09 11:10:25.051: I/BillingService(3369): REQUEST_PURCHASE Sync Response code: RESULT_OK
07-09 11:10:25.071: I/BillingService(3369): onPause())
07-09 11:10:25.181: D/OpenGLRenderer(3369): Flushing caches (mode 1)
07-09 11:10:25.181: D/OpenGLRenderer(3369): Flushing caches (mode 0)
07-09 11:10:35.151: I/BillingService(3369): Received action: com.android.vending.billing.IN_APP_NOTIFY
07-09 11:10:35.151: I/BillingService(3369): notify got id: android.test.purchased
07-09 11:10:35.151: I/BillingService(3369): getPurchaseInformation()
07-09 11:10:35.151: I/BillingService(3369): Nonce generateD: -388618139592202345
07-09 11:10:35.171: I/BillingService(3369): current request is:3124515352582500023
07-09 11:10:35.171: I/BillingService(3369): GET_PURCHASE_INFORMATION Sync Response code: RESULT_OK
07-09 11:10:35.601: I/BillingService(3369): Received action: com.android.vending.billing.RESPONSE_CODE
07-09 11:10:35.601: I/BillingService(3369): checkResponseCode got requestId: 1048018758395364016
07-09 11:10:35.601: I/BillingService(3369): checkResponseCode got responseCode: RESULT_OK
07-09 11:10:36.011: I/BillingService(3369): Received action: com.android.vending.billing.PURCHASE_STATE_CHANGED
07-09 11:10:36.011: I/BillingService(3369): purchaseStateChanged got signedData: {"nonce":-388618139592202345,"orders":[{"notificationId":"android.test.purchased","orderId":"transactionId.android.test.purchased","packageName":"org.sugarcrmclient","productId":"android.test.purchased","purchaseTime":1341812436261,"purchaseState":0}]}
07-09 11:10:36.011: I/BillingService(3369): purchaseStateChanged got signature: 
07-09 11:10:36.011: I/BillingService(3369): signedData: {"nonce":-388618139592202345,"orders":[{"notificationId":"android.test.purchased","orderId":"transactionId.android.test.purchased","packageName":"org.sugarcrmclient","productId":"android.test.purchased","purchaseTime":1341812436261,"purchaseState":0}]}
07-09 11:10:36.021: D/AndroidRuntime(3369): Shutting down VM
07-09 11:10:36.021: W/dalvikvm(3369): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
07-09 11:10:36.041: E/AndroidRuntime(3369): FATAL EXCEPTION: main
07-09 11:10:36.041: E/AndroidRuntime(3369): java.lang.RuntimeException: Unable to start receiver org.sugarcrmclient.market.BillingReceiver: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
07-09 11:10:36.041: E/AndroidRuntime(3369):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2146)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at android.app.ActivityThread.access$1500(ActivityThread.java:127)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at android.os.Looper.loop(Looper.java:137)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at android.app.ActivityThread.main(ActivityThread.java:4441)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at java.lang.reflect.Method.invoke(Method.java:511)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at dalvik.system.NativeStart.main(Native Method)
07-09 11:10:36.041: E/AndroidRuntime(3369): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
07-09 11:10:36.041: E/AndroidRuntime(3369):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at java.util.ArrayList.get(ArrayList.java:304)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at org.sugarcrmclient.market.BillingHelper.verifyPurchase(BillingHelper.java:250)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at org.sugarcrmclient.market.BillingReceiver.purchaseStateChanged(BillingReceiver.java:45)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at org.sugarcrmclient.market.BillingReceiver.onReceive(BillingReceiver.java:28)
07-09 11:10:36.041: E/AndroidRuntime(3369):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2139)
07-09 11:10:36.041: E/AndroidRuntime(3369):     ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:51:42.233

有问题的代码仅针对您所描述的场景进行了安全检查，您必须已删除此检查：

```
 if(purchases != null && !purchases.isEmpty()){
                    latestPurchase = purchases.get(0);

                    confirmTransaction(new String[]{latestPurchase.notificationId});
            } else {
                   Log.d(TAG, "BillingHelper.verifyPurchase error. purchase");
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:52:00.113

我可以`IndexOutOdBoundException`在您的日志中看到这一点，您可以检查不将任何位置访问到不可用的数组中。下面是突出显示的问题。

```
07-09 11:10:36.041: E/AndroidRuntime(3369): java.lang.RuntimeException: Unable to start receiver org.sugarcrmclient.market.BillingReceiver: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0 
```

# android - android中的自定义对话框？

> ID：11389523
> 
> 赞同：2
> 
> 时间：2012-07-09T05:31:57.543
> 
> 标签：android, nullpointerexception, customdialog

1.这是添加按钮，当我点击这里时，我应该会出现自定义对话框。

```
Button add = (Button) findViewById(R.id.addbutton);
// add button listener
add.setOnClickListener(new OnClickListener() { 
```

2.这是自定义对话框代码

```
 // custom dialog
    final Dialog dialog = new Dialog(context);
    dialog.setContentView(R.layout.form);
    dialog.setTitle("Custom dailog");

    TextView uname_TV = (TextView) findViewById(R.id.Uname_TV);
    EditText uname_ET = (EditText) findViewById(R.id.Uname_ET);
    TextView dname_TV = (TextView) findViewById(R.id.Drugname_TV);
    EditText dname_ET = (EditText) findViewById(R.id.Drugname_ET);
    spinner = (Spinner) findViewById(R.id.spinner_id);

    ArrayAdapter < String > adapter = new ArrayAdapter < String > (
    context, android.R.layout.simple_spinner_item,
    noof_times);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
    spinner.setSelection(1);
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView <? > parent,
        View view, int position, long id) {
            String item = parent.getItemAtPosition(position).toString();
            String item1 = parent.getSelectedItem().toString();
            Toast.makeText(getApplicationContext(), "Selected:" + item, Toast.LENGTH_LONG).show();
        }

        @Override
        public void onNothingSelected(AdapterView <? > arg0) {
            // TODO Auto-generated method stub
        }
    });
    dialog.show(); 
```

我正进入（状态

```
 Null pointer exception at spinner.setAdapter(adapter); 
```

我没明白，这个错误的一个帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:35:38.587

是的，你会得到，因为

```
TextView uname_TV = (TextView) findViewById(R.id.Uname_TV);
EditText uname_ET = (EditText) findViewById(R.id.Uname_ET);
TextView dname_TV = (TextView) findViewById(R.id.Drugname_TV);
EditText dname_ET = (EditText) findViewById(R.id.Drugname_ET);
spinner = (Spinner) findViewById(R.id.spinner_id); 
```

将这些更改为

```
TextView uname_TV = (TextView) dialog.findViewById(R.id.Uname_TV);
EditText uname_ET = (EditText) dialog.findViewById(R.id.Uname_ET);
TextView dname_TV = (TextView) dialog.findViewById(R.id.Drugname_TV);
EditText dname_ET = (EditText) dialog.findViewById(R.id.Drugname_ET);
spinner = (Spinner) dialog.findViewById(R.id.spinner_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:39:31.497

它应该是

```
spinner = (Spinner) dialog.findViewById(R.id.spinner_id); 
```

试试这条线..希望它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T05:53:49.567

您必须在自定义视图时扩展布局。在点击事件上尝试下面的代码：

```
 LayoutInflater inflater=LayoutInflater.from(YouActivityName.this);
            View view=inflater.inflate(R.layout.form, null);
            AlertDialog.Builder builder=new AlertDialog.Builder(YouActivityName.this);
            builder.setView(view);
            Spinner spinner=(Spinner) view.findViewById(R.id.spinner_id);
            ArrayAdapter<String > adapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_spinner_item,item);
            spinner.setAdapter(adapter);
            builder.create();
            builder.show(); 
```

在代码中声明上面的其余视图。希望这会对您有所帮助。

# c# - C#类属于xaml文件

> ID：11389524
> 
> 赞同：0
> 
> 时间：2012-07-09T05:32:00.487
> 
> 标签：c#, wpf, xaml

我不熟悉 wpf 或 C# 语言，但我想生成 xaml 代码，它是来自概念语言模型 (DSL) 的 cs 代码，我编写了很多模板来生成 xaml 标记和 cs 代码并将它们绑定到我的数据使用 MVVM 模型。例如，我为我的 xaml 文件创建 cs 类的模板是：

```
namespace $domain
{
    /// <summary>
    /// Interaction logic for $name.xaml
    /// </summary>
    public partial class $name : Window
    {
        public $name()
        {
            InitializeComponent();
        }
    }
} 
```

我的问题是：这部分代码是否足以为我的 xaml 文件生成一个 cs 类？InitializeComponent 方法在哪里？

这是我的 xaml 模板

```
<Window x:Class="$domain.$name"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:vm="clr-namespace:$dmdomain"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="$title" Height="350" Width="525">
    <Window.DataContext>
        <vm:$dataModel />
    </Window.DataContext>
    $content
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:35:43.797

如您所见，该类继承了`Window`.

你可能想看看这个：[http ://en.csharp-online.net/XAML%E2%80%94Code-Behind_Class](http://en.csharp-online.net/XAML%E2%80%94Code-Behind_Class)

摘抄：

> InitializeComponent() 方法在您的源代码中不可见，因为它是在您编译应用程序时生成的。本质上，所有 InitializeComponent() 所做的只是调用 System.Windows.Application 类的 LoadComponent() 方法。LoadComponent() 方法从您的程序集中提取 BAML（已编译的 XAML）并使用它来构建您的用户界面。在解析 BAML 时，它会创建每个控件、设置其属性并附加任何事件处理程序。

# asp.net - ASP.NET 请求验证忽略 URL 编码

> ID：11389527
> 
> 赞同：1
> 
> 时间：2012-07-09T05:32:35.403
> 
> 标签：asp.net, .net-4.0, asp.net-4.0

我在 Azure 上运行 ASP.NET 4。我偶然发现了微软的这个很棒的新功能，服务器完全忽略了 URL 编码。

起初我遇到了 %26 的问题，并且收到了不允许使用 & 符号的错误。这显然是一个错误，因为 %26 in not & 并且拥有 %26 的全部意义在于能够安全地在 url 中传递它。

www.example.com/this-is-me-%26-microsoft/

我可以通过将其添加到 Web 配置来解决此问题：

```
 <httpRuntime requestValidationMode="2.0" executionTimeout="20" requestPathInvalidCharacters="" />
    <pages validateRequest="false"/> 
```

这解决了 %26 问题，但现在我看到问题还远未结束，因为编码为 # 的 %23 表现得好像是 # 而不是 %23

www.example.com/%23this-should-work/

我需要永久解决这个问题。我不需要这个完全错误的请求验证。我发现这个[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773774%28v=vs.85%29.aspx)讨论了这种精神错乱，但我不明白如何在网络应用程序中使用这个 URL_ESCAPE_SEGMENT_ONLY。

**编辑：**

从 2009 年找到此[链接](http://connect.microsoft.com/VisualStudio/feedback/details/413312/wcf-uritemplate-strips-some-urlencoded-characters-from-bound-path-segment)： 看起来这个问题现在已经持续了一段时间，但由于微软不在乎，所以正在做记录...

**编辑2！！！：**

经过一整天的工作并尝试了在互联网上找到的所有可能的解决方案/解决方法（足以写一整本书），我已将其隔离为一个非常具体的错误。我的幸运是，测试用例 url 的开头是 %23，就像这样。

```
http://www.example.com/%23eleven/ 
```

事实证明，如果 %23 位于段的开头，它会自动取消转义并处理为 # 并且世界上没有办法改变这一点。

为了说明这一点，只需运行以下命令：

```
Response.Write(Request.Url.GetComponents(UriComponents.SerializationInfoString, UriFormat.UriEscaped)); 
```

在具有流动 URL 的页面中

```
http://www.example.com/%23elevenand%23noteleven/ 
```

响应写入将输出：

`http://www.example.com/#elevenand%23noteleven/`

另外，如果您这样做：

```
Response.Write(Request.Url.GetComponents(UriComponents.Fragment, UriFormat.Unescaped)); 
```

结果将是：

`elevenand#noteleven/`

*PS 除了这个特殊的错误，我在调试的一整天中学到的是，.NET 中的整个 URL 编码和解码在所有旧版本（.NET 4 之前）和所有新版本中都是一场彻底的灾难.NET 4 修改是更大的灾难，就像火上浇油一样。它没有按应有的方式工作，有大量用户报告此问题的帖子，但微软忽略了所有内容，并将报告的错误关闭为已解决和重复。*

# php - Yii: 从 Yii 控制台应用程序调用 Yii::app()->controller

> ID：11389529
> 
> 赞同：2
> 
> 时间：2012-07-09T05:32:47.333
> 
> 标签：php, console, yii

我正在一个 Yii 项目中工作，该项目也有一个控制台应用程序。

形成控制台应用程序，我没有调用任何控制器并且只处理可以正常工作的组件，但在某些地方，我需要从组件目录中的 Controller.php 调用变量/函数。这可以称为例如

```
Yii::app()->controller->aGlobalVariable; 
```

但在控制台应用程序中，我无法做到这一点，它说：

`Trying to get property of non-object`...

如何让控制台应用程序使用它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:40:26.223

在控制台中，您使用没有控制器的 CConsoleApplication，您可以使用从 CConsoleCommand 继承的类模型

`yiic {your command} {your params for command}`

询问谷歌：[https ://www.google.ru/search?q=yii+CConsoleCommand](https://www.google.ru/search?q=yii+CConsoleCommand)

> 我需要从 Controller.php 调用变量/函数

您将变量和函数重新编码为 \protected\components\ 中的独立类，您可以从控制器和控制台命令调用它。

# ios - 动画后COCOS2D消失精灵

> ID：11389530
> 
> 赞同：0
> 
> 时间：2012-07-09T05:32:59.990
> 
> 标签：ios, cocos2d-iphone

我正在设计一个测验。想要动画错误的答案精灵 2-3 秒。然后它应该会自动消失。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:51:00.113

```
CCFadeOut *fade = [CCFadeOut actionWithDuration:3];  //this will make it fade
CCCallFuncN *remove = [CCCallFuncN actionWithTarget:self selector:@selector(removeSprite:)];
CCSequence *seq = [CCSequence actions: fade, remove, nil];
[mySprite runAction:seq]; 
```

这是我们上面分配的 CCCallFuncN 对象调用的方法。

```
-(void) removeSprite:(id)sender 
{
[self removeChild:sender cleanup:YES];
} 
```

希望这有帮助。干杯！

# jquery - JQuery 选择器中的函数参数不带值

> ID：11389531
> 
> 赞同：0
> 
> 时间：2012-07-09T05:33:06.807
> 
> 标签：jquery, .net, jquery-selectors

当在 gridview 选择器中使用时，此函数中的 RowIndex 变量似乎没有携带它的值：

```
 function selectRow(RowIndex) {
        $("#<%= gvwShipments.ClientID %> tr:eq(RowIndex)").css('background-color', '#FFFF99');
       } 
```

标题行是 gridiview 中的第一行，始终处于选中状态。我确定这是一个语法问题，如何让选择器识别 RowIndex 值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T05:36:13.680

是的，这是语法问题，这应该有效：

```
function selectRow(RowIndex) {
     $("#<%= gvwShipments.ClientID %> tr:eq(" + RowIndex + ")").css('background-color', '#FFFF99');
} 
```

# android - 在android中获取自定义地图标记的边界

> ID：11389540
> 
> 赞同：1
> 
> 时间：2012-07-09T05:34:15.217
> 
> 标签：android, google-maps, google-maps-markers, google-maps-mobile

我的地图视图上有一组标记。我想获取地图标记的边界，以便检测我点击了哪个地图标记。我在stackoverflow中进行了搜索，但所有人都在告诉如何设置地图标记（可绘制）的边界。但我想要的是获得我已经绘制的标记的边界。

请帮忙

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:10:43.483

[此链接指向](https://github.com/jgilfelt/android-mapviewballoons#readme)我建议不要复制而是从中获取灵感的项目。看看哪些方法用于什么，也许你可以在那里找到一些好主意。我不建议出于您自己的原因复制 - 在编程时学习（如果您只是复制，您将不会学到任何东西）。

我承认，Android API 中的 MapOverlay 比它应该的要复杂一些，但如果你仔细观察，你会很快了解它。我建议从[这里](https://developers.google.com/maps/documentation/android/)开始，因为对我来说未知的原因，Google 将其分离为外部库，并且不再在旧的开发人员页面上可用。仔细看看[Itemized Overlay](https://developers.google.com/maps/documentation/android/reference/)，我用它在地图上绘制对象。您将需要扩展此类并覆盖一些方法。如您所见，它已经有 onTap 方法，您也可以简单地覆盖它:)

为了确保您理解我的意思 - 这是我自己的逐项叠加：

```
package example;

import java.util.ArrayList;
import java.util.concurrent.ExecutionException;

import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.res.Resources.NotFoundException;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;
/**
 * Paints and stores all the Overlays for CurrentPositionActivity, overrides ItemizedOverlay<OvelayItem>.
 * @author Michal Svacha
 * 
 */
 public class ItemizedOverlayBeta extends ItemizedOverlay<OverlayItem> {
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>(); // ArrayList for the OverlayItems
Context mContext; // Context where the Overlays are to eb displayed
private ArrayList<String> mObjIDs = new ArrayList<String>();
DetailLoader dl;

public void addID(String objId) {
    mObjIDs.add(objId);
}

/**
 * Public constructor.
 * @param defaultMarker
 * @param context
 */
public ItemizedOverlayBeta(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker)); // Calls the constructor of the parent.
    mContext = context;
}

/**
 * Adds overlay to ArrayList.
 * @param overlay
 */
public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

/**
 * Returns OverlayItem based on the index.
 * @param index - position where the OverlayItem is stored in the ArrayList.
 * @return desired OverlayItem.
 */
@Override
protected OverlayItem createItem(int index) {
  return mOverlays.get(index);
}

/**
 * Returns the size of the ArrayList
 * @return calls method size() on the ArrayList
 */
@Override
public int size() {
  return mOverlays.size();
}

/**
 * When tapped on screen this method is called and creates AlertDialog with little data.
 * @param index - place where tapped
 * @return always true
 */
@Override
protected boolean onTap(int index) {
  dl = new DetailLoader();
  try {
    if(dl.execute(index).get()) {
        OverlayItem item = mOverlays.get(index);
        final AlertDialog dialog = new AlertDialog.Builder(mContext).create();
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet() +"\n" + "Hello");
        dialog.setButton("close", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            dialog.dismiss();
        }
      });
      dialog.show();
      }
} catch (NotFoundException e) {
    return false;
} catch (InterruptedException e) {
    return false;
} catch (ExecutionException e) {
    return false;
}
  return true;
}

public void populateNow(){
    populate();
}

private class DetailLoader extends AsyncTask<Integer, Void, Boolean>{
    ProgressDialog pd;

    @Override
    protected void onPreExecute() {
        pd = new ProgressDialog(mContext);
        pd = ProgressDialog.show(mContext, "","Loading",true);
    }

    @Override
    protected void onPostExecute(Boolean result) {
        if(pd != null) pd.dismiss();
    }

    @Override
    protected Boolean doInBackground(Integer... params) {
        // Load data
        return true;
    }
}
} 
```

然后在地图上显示如下：

```
ItemizedOverlayBeta itemizedMoving = new ItemizedOverlayBeta(this.getResources().getDrawable(R.drawable.ic_pin_moving), this);
GeoPoint gp = new GeoPoint((int)(coordinate * 1E6),(int)(coordinate2 * 1E6));
OverlayItem oi = new OverlayItem(gp, "string for the alert dialog";    
itemizedMoving.populateNow();
CurrentPositionActivity.mapOverlays.add(itemizedMoving); 
```

所以基本上当你需要在 pin 上弹出一些 popover 时，你需要在叠加层中实现它，而不是在地图中，因为，你告诉 pin - 嘿，当我点击你时，你需要重绘自己，就像我正在显示警报对话框。

希望能帮助到你！

# linux - 使用 shell 脚本自动终止进程

> ID：11389543
> 
> 赞同：2
> 
> 时间：2012-07-09T05:35:09.070
> 
> 标签：linux, shell

我正在寻找一个可以找到 PID 的命令，例如：

```
ps -ef | grep com.sds.afi.rte.cosmos-1.0.0.jar
cosmos    4690  4689  3 14:27 pts/8    00:00:06 java -Dlog4j.debug -Dlog4j.configuration=file:/data/cosmos/sim/bin/log4j.xml -jar com.sds.afi.rte.cosmos-1.0.0.jar
cosmos    5484  5482  0 14:30 pts/11   00:00:00 grep com.sds.afi.rte.cosmos-1.0.0.jar 
```

然后使用以下命令杀死这些进程：

```
kill -9 pid 
```

我怎样才能制作一个能自动完成上述所有工作的 shell 脚本？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T05:52:04.270

`killall java`

或更笼统地说：

`killall <processname>`

有时我的进程名称相同，但命令行参数不同。要杀死此类进程或任何任意进程而不必输入 ps 然后杀死 pid，我这样做：

`ps aux | grep <something> | awk '{print $2}' | xargs kill`

在哪里

*   `<something>`是您要在 ps aux 命令的输出中搜索的任何短语。
*   `awk '{print $2}'`将仅过滤掉第二列，即 PID 列表
*   `kill`将在每个 PID 上调用。

编辑：正如 Tripleee 指出的那样，`kill -9`除非绝对需要，否则猛烈抨击一个过程是一个坏主意。所以`-9`从上面的命令中删除了部分

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T06:03:38.863

我认为`pkill -9 java`是最简单的方法。`pkill`将使用 grep 查找匹配的进程名称。

请参阅手册页： http: [//linux.die.net/man/1/pkill](http://linux.die.net/man/1/pkill)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T05:45:18.733

尝试这个：

```
kill -9 `pidof java` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T12:57:30.520

如果可用，我会找到最佳选择中提到的**`pkill`/命令。`pgrep`**`nikeairj`我还使用了以下内容，它们也可以在**没有`awk`或其他可能不可用的命令**`awk`的 Linux/Unix 操作系统中工作（我记得在某些**`AIX`**或**`HP-UX`**环境 中无法使用）

```
# subsitute myMatch with your process cmdline match, e.g. "firefox", "firefox -P"
# or anything output by "ps -ef"
ps -ef|grep myMatch|grep -v grep|sed -e "s/^[^0-9]\+\([0-9]\+\)\s.\+$/\1/"|xargs kill "{}" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-17T08:06:58.067

除了[ErJab](https://stackoverflow.com/users/123545/erjab)提供的解决方案之外，我还创建了一个 shell 脚本 killall 来模仿“killall”行为：

```
#!/bin/sh
ps | grep $1 | awk '{print $1}' | xargs kill -9 
```

我放在 /bin 目录中（当然是在 chmod +x 之后）

[qnx](/questions/tagged/qnx "显示标记为“qnx”的问题")

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-08T16:59:33.373

在使用以下几行将其置于监视模式后，我制作了一个 .sh 以重新启动我的 Wifi。

```
#Display PID

echo "Killing network PID'S"

ps aux | grep wpa_supplicant | awk '{print $2}' | xargs kill

ps aux | grep NetworkManager | awk '{print $2}' | xargs kill

#Restart NetworkManager && wpa_supplicant

echo "Restarting NetworkManager && wpa_supplicant"

service NetworkManager restart && service wpa_supplicant restart 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-22T12:33:38.643

您可以在 shell 脚本中包含以下命令，该命令将终止“com.sds.afi.rte.cosmos-1.0.0.jar”的进程 ID

杀 -9`ps aux | grep com.sds.afi.rte.cosmos-1.0.0.jar | grep -v grep | awk '{print \$2}'`

确保您使用倒置 (``) 逗号进行 pid 搜索，如上所用。

如果您想从 expect 命令执行上述命令，那么您可以使用以下命令：

期待“$”

发送“杀死 -9 `ps aux | grep com.sds.afi.rte.cosmos-1.0.0.jar | grep -v grep | awk '{print \$2}'`\r”

干杯，苏拉杰

# javascript - 碰撞“故障”，如果你愿意的话，在画布上

> ID：11389554
> 
> 赞同：1
> 
> 时间：2012-07-09T05:37:25.117
> 
> 标签：javascript, html5-canvas

有一个弧线可以检测底部物体的位置。这条弧线或球在第二次反弹之前反弹得很好，并在地板上出现故障。该变量`ball.gSy`控制球下落的速度。现在它被乘以 10 ( `ball.y += 10*ball.gSy;`) 以加速地板上的故障效果。另外，你可以使用方向键来控制球，它确实会卡在侧壁上，但我特别好奇的是底层问题。

这是一个 jsfiddle 链接，可以更好地满足您的惠顾：http: [//jsfiddle.net/nhQtk/](http://jsfiddle.net/nhQtk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:50:07.327

您的问题是您将球向下移动，但是当发生碰撞时，您并没有将球向上移动到没有卡在地板上的位置。

因此，您正确地检测到了碰撞，但您的球已经部分穿过墙壁并且无法向上移动。

以下是您需要做什么的粗略想法：

```
 ball.y += 10*ball.gSy;
 for(var i = 0; i < objects.length; i++){
                        if(ball.x > objects[i].x - ball.r &&
                          ball.y > objects[i].y - ball.r && 
                          ball.x < ball.r + objects[i].x + objects[i].w &&
                          ball.y < ball.r + objects[i].y + objects[i].h)
                      {
                            ball.gSy = (-1 * ball.gSy);
                            ball.y -= 10;// <--- important step
                            // You need to calculate how much to move the ball BACK up to where it has not quite hit the floor.   

                       } 
```

# embed - 用于验证嵌入标签的正则表达式

> ID：11389555
> 
> 赞同：0
> 
> 时间：2012-07-09T05:37:36.370
> 
> 标签：embed

我有一个文本框，供用户在其中粘贴嵌入标签，但我想验证，因为用户没有输入嵌入标签以外的任何其他代码，因此我需要验证嵌入标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-18T09:53:24.050

```
\s*(https?://)www.youtube(-nocookie)?.com/(?:v|embed)/[\p{L}\p{N}]+[\p{L}\p{N}\p{Zs}.#@$%+&;:_~,?=!/-]*\s* 
```

我冒昧地删除了不必要的捕获组、逃脱和角色。

虽然我个人会使用类似的东西：

```
\s*(https?://www.youtube(?:-nocookie)?.com/(?:v|embed)/([a-zA-Z0-9-]+).*) 
```

这会将整个 youtube URL 放在匹配组 0 中，将视频 id 放在匹配组 1 中。此外，当 youtube 的 URL 不包含 unicode 字符时，使用 unicode 属性也没有多大意义。
演示：[http ://rubular.com/r/jv4zO9ys2L](http://rubular.com/r/jv4zO9ys2L)

# javascript - jquery中的数据表

> ID：11389560
> 
> 赞同：1
> 
> 时间：2012-07-09T05:38:33.463
> 
> 标签：javascript, jquery, datatables

我正在一个项目中工作，我想在要显示的数据中添加网格类型工具。

为此，我正在使用**jquery的****Datatable**插件。

 **它工作正常且完美。

我只有一个担心，每当我尝试从服务器（通过 Ajax）获取更新的表时，Datatable 都会失去其功能。我的意思是每当我从服务器加载新表时，它都会以正常模式显示。

为此，我必须添加如下代码：

```
$.ajax({ 
    url: "<GIVE_ME_NEW_TABLE>",
    type: "POST",
    data: <THE_DATA_TO_BE_POSTED>,
    success: function(data){
        //data is fully prepared HTML string for representing the table
        $('#id_of_the_div_where_to_show_the_table').html(data);
        $('#id_of_the_table').dataTable({
           "bJQueryUI": true
        });
    },
    error : function(){
        //alert error
    }
}); 
```

因此，这将在每次更新表的 Ajax 调用中调用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T09:03:45.610

或者，您可以通过参数将 DataTables 连接到 ajax 数据源`sAjaxSource`。您需要修改服务器端脚本以返回正确的响应。请参阅DataTables 文档中的[*ajax 数组*](http://datatables.net/release-datatables/examples/ajax/ajax.html)和[*ajax 对象*](http://datatables.net/release-datatables/examples/ajax/objects.html)示例。

```
$(document).ready(function() {
    var oTable = $('#example').dataTable( {
        "bProcessing": true,
        "sAjaxSource": "/yoursite/ajaxTableDataSource",
    } );
} ); 
```**

# apache - 为 apache 添加虚拟主机

> ID：11389562
> 
> 赞同：1
> 
> 时间：2012-07-09T05:38:41.343
> 
> 标签：apache, xampp, localhost, virtualhost

我在我的 Windows 7 上安装了 IIS，它使用默认端口 80，可以在`http://localhost`. 现在我也安装了 XAMPP 并设置了 8081 端口，所以我可以在`http://localhost:8081`.

现在，我只想为 xampp 添加虚拟主机，以便我可以通过**`http://test/`**而不是`http://localhost:8081`. 我不想对 IIS 地址进行任何更改，并希望保持其地址不变。为此，我在我的 xampp/apache/conf/extra/httpd-conf 文件中添加了虚拟主机，即

```
NameVirtualHost *:8081
<VirtualHost *:8081>
    ServerAdmin admin@localhost.com
    DocumentRoot "C:/xampp/htdocs"
    ServerName test
    ServerAlias test
</VirtualHost> 
```

我已经重新启动了 apache 但仍然无法访问该地址**`http://test`**。我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:56:02.300

您已经让 XAMPP 在端口 8081 上侦听，而不是感谢 80，这意味着

```
http://test/ 
```

需要是

```
http://test:8081/ 
```

如果 URL 中没有端口号，您只是指默认端口（即 http 的端口 80）

*更新：* 这实际上是可能的，但是 IIS 和 Apache (XAMPP) 需要使用不同的 IP 地址，并且只绑定到自己 IP 地址上的端口 80。 [http://www.iislogs.com/steveschofield/iis7-post-44-iis7-and-apache-on-the-same-machine](http://www.iislogs.com/steveschofield/iis7-post-44-iis7-and-apache-on-the-same-machine)

如果您无法触摸 IIS，那么唯一的选择是使用代理脚本在 IIS 上显示一个代理到 8081 的站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-21T09:34:34.650

第 1 步：转到：C:\Windows\System32\Drivers\etc\hosts 并将其添加到文件底部：

==============

# 127.0.0.1 your.domain.com

第 2 步：转到 [您的 XAMPP 目录]/apache/conf/httpd-xampp.conf

第 3 步：转到文件底部并复制并粘贴此代码：

==============

```
<VirtualHost *:80>
   DocumentRoot "[PATH TO YOUR CUSTOM FOLDER]"
   ServerName your.domain.com

   <Directory "[PATH TO YOUR CUSTOM FOLDER]">
     Options Indexes FollowSymLinks Includes ExecCGI
      AllowOverride All
      Require all granted
    </Directory>

</VirtualHost> 
```

==============

*   将 [PATH TO YOUR CUSTOM FOLDER] 替换为您的文件所在的文件夹。例如：C:/my/www/文件夹/
*   your.domain.com 在第 1 步和第 3 步中必须相同

第 4 步：在 XAMPP 上停止 Apache，等待 5 秒钟，然后单击“开始”重新启动您的 Apache。

如果一切顺利，您可以转到浏览器，输入 your.domain.com，它现在会愉快地指向您的自定义本地文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T06:23:36.180

**最佳最佳选择答案：**

只需要更改 3 个文件：

1.  来自 conf 的 httpd.conf

2.  来自 vhost 文件的 httpd-vhost

3.  来自 Windows 主机文件的主机文件

简单的步骤。你可以自己做。只需点击以下链接：

[**在 XAMPP 上创建多个虚拟主机**](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=video&cd=15&cad=rja&uact=8&ved=0ahUKEwj7hsGEyMnLAhXnC5oKHaxdBKE4ChC3AggnMAQ&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DKDYrkJJff3I&usg=AFQjCNHDt0jbMix3FQeeqWG3OWBZaIi14Q&sig2=kJFZa2C1wCqReWGtSyjJGA&bvm=bv.117218890,d.bGs)

# c - c中相同变量的后增量运算符和前减运算符

> ID：11389563
> 
> 赞同：-1
> 
> 时间：2012-07-09T05:38:43.897
> 
> 标签：c

> **可能重复：**
> [为什么 ++*p++ 有效而 ++i++ 无效？](https://stackoverflow.com/questions/11072407/why-p-works-while-i-does-not)

这在c中可能吗？如果不是，原因是什么？

```
int main()
{
  char *p="hai friends";
   while(*p!='\0')
   {
      ++*p++;
      printf("%c\n",*p);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:43:54.567

这个特殊的例子

```
char *p="hai friends";
while(*p!='\0')
{
    ++*p++;
    printf("%c\n",*p);
} 
```

尝试修改字符串文字，因此是未定义的行为。但一般来说，对于一个指针，你可以做

```
++*p++; 
```

因为后增量和前增量指的是不同的实体。后增量递增*指针*，而前增量递增指向的值。

在同一个实体上使用前减和后减将再次导致未定义的行为，因为这将修改变量两次而不会干预序列点。

# java - 什么是与 JWS java 应用程序的服务器交互的最佳方式

> ID：11389567
> 
> 赞同：0
> 
> 时间：2012-07-09T05:39:09.740
> 
> 标签：java, netbeans, java-web-start, japplet

我在确定如何使用 Java Web Start 程序编写文件时遇到了一些麻烦，我想将文件写入服务器，描述已上传到云服务器的文件。我还想从客户端发送文件名和路径等数据，以便我可以在用户和云存储设施之间建立连接并将他们的文件发送给它。

目前，当我尝试运行我的 Web Start 应用程序时，它工作正常并且没有错误，但根本不会将文件和文件夹写入它所在的服务器。例如，以下代码不起作用：

```
new File ("ArFile Clients\\File Data\\" 
        + user.getCompany().getName() + "\\" + user.getUsername()).mkdirs(); 
```

该目录位于服务器上，创建它是为了存储应用程序用户的数据。但是在运行时它只是被忽略或不执行。

我没有使用套接字或 FTP 或类似的东西，云服务器有它自己的自定义库，我正在使用它，我知道问题必须在于 Java Web Start 的工作原理，我找不到任何好的例子涉及在服务器机器上创建文件并从客户端机器中提取数据（只是文件系统数据，如目录和文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:52:15.783

我认为对 webstart 的真正含义的一些解释将与此处相关:)

首先，web start 是在客户端 JVM 上运行的东西。是的，它使用 jnlp 文件，您应该在其中指定依赖 jars/其他资源的 url。web start 所做的只是读取这个 jnlp 文件（再次在客户端）、解析、找出资源所在的 url 列表并将它们下载到客户端计算机上。从物理上讲，这是通过使用可以在其中找到的 javaws 实用程序来实现的

%JDK_HOME%\bin 文件夹。就像 ''java'' 获得一系列类文件/jars 作为输入并产生一个 jvm，javaws 获得一个 jnlp，读取它，带来资源并产生一个 jvm :) 还有一些额外的东西，web start 可以做（如自动更新），但这是一个“核心功能”。

底线，如果你确实想在服务器上写一些文件，web start 是一个错误的方法。

从概念上讲，一旦您的应用程序被加载并且您希望将文件存储在服务器上 - 从客户端创建某种与服务器计算机的连接并将您的文件上传到那里。Web Start 无法以一种或另一种方式完成 :)

我希望它有帮助

# r - 如何使用 igraph 绘制相互连接的链接？

> ID：11389568
> 
> 赞同：2
> 
> 时间：2012-07-09T05:39:29.173
> 
> 标签：r, plot, igraph

我有这些向量：

```
>dput(SHLRK03)
c("CHSLSCR01", "SHLRK04", "SHLRK05", "WLLWCR01", "WLLWCR02", 
"WNBGORV01", "WNBGORV02", "WNBGORV03", "WNBGORV04", "WNBGORV05", 
"WNBGORV06")
> dput(SHLRK04)
 "SHLRK05"
> dput(WNBGORV01)
 c("WLLWCR02", "WNBGORV02", "WNBGORV03", "WNBGORV04", "WNBGORV05", 
 "WNBGORV06") 
```

我想通过以下方式获得单个连接图：

1.  从 SHLRK03 指向向量中的值。
2.  从 SHLRK03 图中的 SHLRK04 到 SHLRK04 中的值
3.  从带有 SHLRk04 的 WNBGORV01 到 WNBGORV01 中的值

我还有几个相互关联的价值观。我试图在堆栈溢出和网络上搜索此类图，但找不到任何示例。

有人可以帮我解决这个问题吗？我感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T07:50:40.800

一种方法是建立相应的[邻接矩阵](http://en.wikipedia.org/wiki/Adjacency_matrix)。例如，

```
vertices <- c("SHLRK03", unique(c(SHLRK03, SHLRK04, WNBGORV01)))
adj.mat <- matrix(0, nrow=length(vertices), ncol=length(vertices), 
                  dimnames=list(vertices, vertices))
adj.mat["SHLRK03", colnames(adj.mat) %in% SHLRK03] <- 1
adj.mat["SHLRK04", colnames(adj.mat) %in% SHLRK04] <- 1
adj.mat["WNBGORV01", colnames(adj.mat) %in% WNBGORV01] <- 1
library(igraph)
g <- graph.adjacency(adj.mat)
V(g)$label <- V(g)$name
plot(g) 
```

您可以在在线文档中找到用于图形布局、顶点标记等的几个选项。这是上面代码的默认渲染。

![在此处输入图像描述](../Images/b8a581e1eea2446b375a399eede5d50d.png)

如果你有几个这样的向量，你当然可以用一个小辅助函数来自动填充邻接矩阵。

# c - 在 C 中使用文字值与计算值时的错误答案

> ID：11389572
> 
> 赞同：0
> 
> 时间：2012-07-09T05:39:47.707
> 
> 标签：c, function, double, return, literals

首先让我说这是我学习 C 的第四天，如果我的代码不够简洁，请原谅我，但我相信它可以完成工作。此外，我想练习编写所有数学函数，因为我觉得如果我自己编写它们会受益更多。我的编译器是 GNU gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3

当我编写一个将度数转换为弧度的函数时，我遇到了这个错误。当我将 15 度的弧度值处理到我的源代码中时，我得到了**正确**的答案。然后我编写了从弧度转换角度的函数，用它来获取 15 度的弧度值，并将其插入到我的 sin(x) 函数中，它返回了一个**不正确**的值。

然后我测试了很多不同的场景来尝试调试我的代码（正如你在所有 *printf*s 中看到的那样）。然后我打印了我**计算**的弧度值的值（到 54 位十进制数字）并将该数字**复制**到我的源代码中......答案是正确的。

所以我的问题是：在什么情况下使用计算值与使用相同的计算值不同，但直接复制到源代码中？

我知道编译器会自动转换任何文字值，如果它们与函数采用的参数类型不同，但就我而言，我不明白它有何不同。

这是代码。再次，抱歉，如果它非常缓慢，但是，嘿，这仅用于学习目的:) 任何帮助将不胜感激，我只是无法理解可能导致这种情况的原因，而且我 4 小时的研究无济于事。

```
#include <stdio.h>

#define EPSILON 0.000001
#define PI 3.14159

double sin(double x);
int fact(int x);
double powr(double x, int power);
double deg_to_rad(double degrees);

int main(int argc, char *argv[]){

    double radian = deg_to_rad((double)15);

    printf("Correct answer = 0.25881883\n\n");
    printf("Sin approximation using constant .26179917: %1.8f\n\n", sin(.26179917));
    printf("Radian variable calculated by deg_to_rad(15): %1.54f\n", radian);
    printf("Sin approximation using radian variable: %1.8f\n\n", sin(radian));
    printf("Sin approximation using radian variable's value (0.261799166666666638381144593950011767446994781494140625) copied and pasted into source: %1.8f\n", sin(0.261799166666666638381144593950011767446994781494140625));

    return 0;
}

double deg_to_rad(double degrees){

    return ((degrees/180) * PI);
}

double abs_val(double x){

    if (x < 0){
        return (-x);
    }

    else{
        return x;
    }
}

int fact(int x){

    if (x > 1){
        return (x * fact(x - 1));
    }

    else return 1;
}

double powr(double x, int power){

    if (power < 1){

        if (power == 0){
            return 1.0L;
        }

        else{
            puts("This functionality is not yet built in to this function.");
            return 0.0L;
        }
    }

    else if (power > 1){
        return (x * powr(x , power - 1));
    }

    //If power is 1.
    else return x;
}

/*
* Based on the Taylor series: sin(x) = x - x^3/3! + x^5/5! - x^7/7! + x^9/9! - ... +  (-1)^(n-1)*x^(2n-1)/(2n-1)! + ....
*/
double sin(double x){

    static int n = 0;
    n++;

    double result = (powr(-1.0L,n - 1) * (powr(x, (2*n - 1)) / fact(2*n - 1)));

    //If the current n is odd.
    if (n % 2){

        if (abs_val(result) > EPSILON){
            return (result + sin(x));
        }

        else {
            //Reset n and now begin returning from recursions.
            n = 0;
            return result;
        }
    }

    else {

        if (abs_val(result) > EPSILON){
            return (-result +  sin(x));
        }

        else {
            //reset n and now begin returning recurstion
            n = 0;
            return result;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:53:26.713

该调用`sin(constant)`在编译时使用内置的正弦函数进行评估，而不是您的`sin`. 如果您使用`-fno-builtin`标志编译或重命名函数，您的代码也用于计算常量的值，并产生相同（错误）的结果。

错误的结果是由于

```
if (abs_val(result) > EPSILON){
    return (-result +  sin(x));
} 
```

在偶数的情况下`n`。符号已经被合并到`result`中，所以也应该`return result + sin(x)`如此，就像奇数的情况一样`n`。因此两个分支（应该）包含完全相同的代码，因此应该删除分支。

此外，阶乘将在其参数大于 12 时溢出（对于带符号的 32 位`int`s），因此您的`sin`函数将不适用于需要超过六个项才能达到所需精度的大绝对值的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:28:30.913

除了 Daniel 的提示之外，我不会将`EPSILON`精度设置为高于您对`PI`. 好吧，它们是独立的，但你会计算一个非常准确`sin`的不精确度数到弧度的转换。

这是您的代码的更紧凑的版本：

```
static double r_sin(double xx, double term, int n, double result) {
    double r = term * xx/(2*n * (2*n+1));
    if (r > EPSILON) {
        if (n % 2) return r_sin(xx, r, n+1, result-r);
        return r_sin(xx, r, n+1, result+r);
    }
    return result;
}

double my_sin(double x){
    if (x > EPSILON) return r_sin(x*x, x, 1, x);
    return 0;
} 
```

# emacs - 是否可以在不同窗口中显示的同一缓冲区上使用不同的覆盖？

> ID：11389575
> 
> 赞同：1
> 
> 时间：2012-07-09T05:40:16.410
> 
> 标签：emacs, window, overlay, buffer, elisp

到目前为止，据我所知，emacs 中的覆盖应该与特定的缓冲区相关联。而且，*如果我理解正确*，则只有一个覆盖到特定缓冲区可以工作。

目前，我遇到了这样的问题。我想要的是让不同的窗口通过叠加显示不同的东西。

当然，当显示不同的缓冲区时，事情就很容易了。但是当两个窗口显示相同的缓冲区时，问题就出现了。例如，我将 OL-A 和 OL-B 应用于缓冲区 BUF-FOO。但是当 WIN-A 和 WIN-B 显示 BUF-FOO 时，OL-A 或 OL-B 都可以工作。但是我想让OL-A在WIN-A中工作，OL-B在WIN-B中工作。

所以我的问题就像标题显示的那样：是否可以在不同窗口中显示的同一缓冲区上使用不同的覆盖？

答案可能是**NO**，尽管我不希望。
那么，你能给我一些建议或解决这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:29:49.420

我不确定您是在谈论叠加箭头，如`overlay-arrow-position`，还是实际叠加`make-overlay`？

您绝对可以在缓冲区中有多个叠加层（如果它们应用于同一个位置，它们可能会部分相互隐藏，但对于与显示相关的属性，您可以设置叠加层的 `window' 属性以使其仅适用于给窗口，这样你就可以让不同的窗口以不同的方式显示缓冲区）。

# php - PHP类方法之间的继承不用重载，合并就好

> ID：11389578
> 
> 赞同：1
> 
> 时间：2012-07-09T05:40:24.610
> 
> 标签：php, oop, class, inheritance

好的，我有 2 节课

```
class A{  
     public function say(){
        echo "hello<br>";
     }  
  }

 class B extends A{
    public function say(){
        echo "hi<br>";
    }
 }

 $haha = new B();
 $haha->say(); 
```

正如你所看到的，我在 b 类中重载了 say() 方法……但我想要的是合并这两个方法而不是相互覆盖。我想要的输出是这个

```
hello<br>
hi<br> 
```

这可能吗？

注意：如果我的条款有误，请教我正确的条款。我对 PHP OOP 真的很陌生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T05:42:15.843

**编辑：** 根据您的评论，您想要这样的东西：

```
class A{
    final public function say(){
        echo "hello<br>";
        $this->_say();
    }

    public function _say(){
        //By default, do nothing
    }
}

class B extends A{
    public function _say(){
        echo "Hi<br>";
    }
} 
```

我已经调用了新函数`_say`，但是你可以给它任何你想要的名字。这样，你的队友只需定义一个名为 _say() 的方法，它就会被 class`A`的 say 方法自动调用。

这称为[模板方法模式](https://en.wikipedia.org/wiki/Template_method_pattern)

**旧答案**

只需添加`parent::say();`到重载方法：

```
class B extends A{
    public function say(){
        parent::say();
        echo "hi<br>";
    }
 } 
```

这告诉 php 执行重载的方法。如果你不想扩展类来重载它的方法，你可以将它们声明为[final](http://nl3.php.net/manual/en/language.oop5.final.php)。

另请参阅有关[扩展](http://nl3.php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends)类的 php 手册。

# qt - 在 Qt 中制作一个可浮动的小部件

> ID：11389586
> 
> 赞同：0
> 
> 时间：2012-07-09T05:41:55.787
> 
> 标签：qt, qt4

在我的应用程序中，当有一些验证发生时，我需要一个小部件或消息框类型的概念，它会在我的应用程序的右侧底部弹出一段时间（5-10 秒），在那之后它应该消散。

例如，当我们在 Outlook 中收到邮件时，右侧角落会显示一些指示..我必须在我的应用程序中实现相同的功能...您能举个小例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:58:48.890

您需要创建一个消息框类来处理通知。让类继承自 QWidget，并在其构造函数中获取父级。

在构造函数中，设置消息相对于父类的位置。连接超时信号以关闭小部件。如果您正在动态分配它们，您可能希望将其设置为关闭时删除，这样您就不需要管理跟踪和删除它们。

对于非常简单的操作，您可能希望在构造函数中获取消息并使其也显示出来。

# css - 三列DIV布局动态；左 = 固定，中 = 流体，右 = 流体

> ID：11389588
> 
> 赞同：19
> 
> 时间：2012-07-09T05:42:07.427
> 
> 标签：css, layout, html

到目前为止，我发现的最佳解决方案是：

[http://jsfiddle.net/kizu/UUzE9/](http://jsfiddle.net/kizu/UUzE9/)

但事实并非如此。你看，我有三列；其中两个需要避免显式调整大小。好吧，第二个确实需要调整大小；但不完全。

请允许我通过建立我一直试图满足的条件来澄清。

*   所有三列都有固定的高度：准确地说是 65px。
*   第一列的宽度设置为 285px。
*   中心列没有定义大小；它只是占用了剩下的任何空间。
*   右列将根据其中的任何内容调整自身大小。没有明确设置大小，它只是根据内容调整大小，让中心列占据剩余的空间。
*   每列的上方、下方和之间没有空格。

最终结果大致如下所示：

```
   标志 | 播放器 | 姓名     
-------------------------------------------------- ---

```

对于表格，我只需这样做：

```
<table width="100%" height="65px" cellspacing=0 cellpadding=0>
    <tr>
        <td width="285px" height="65px">
            Logo
        </td>
        <td height="65px">
            Player
        </td>
        <td width="1px" height="65px">
            Account
        </td>
    </tr>
</table> 
```

上表代码结果：http: [//jsfiddle.net/zMNYb/](http://jsfiddle.net/zMNYb/)

但我试图摆脱使用表格并使用基于 DIV 的布局。有任何想法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-09T06:58:49.930

您可以通过使用`float:left`第一列、`float:right`最后一列并制作中心列来做到这一点`float:none`

更新演示：http: [//jsfiddle.net/L85rp/3/](http://jsfiddle.net/L85rp/3/)

**HTML**

```
<div class="col1">Column1</div>
<div class="col3">Column3</div>
<div class="col2">Column2</div> 
```

**CSS**

```
.col1 {
    background-color: #ddf;
    float: left;
}
.col2 {
    background-color: #dfd;
    float: none;
}
.col3 {
    background-color: #fdd;
    float: right;
} 
```

* * *

**注意**：有必要在 HTML 中将右列放在中心列之前（见上文，在 HTML 中 col3 位于 col2 之前），以确保当浏览器呈现中心列时，它知道如何正确呈现现有浮动元素。

* * *

**更新的 CSS**

```
.col1 {
    background-color: #ddf;
    float: left;
    width: 285px;
    height: 65px;
}
.col2 {
    background-color: green;
    float: none;
    height: 65px;
    overflow: hidden;
    display: table-cell; /* turn this off to lock height at 65px */
}
.col3 {
    background-color: cyan;
    float: right;
    height: 65px;
} 
```

更新演示：http: [//jsfiddle.net/ew65G/1/](http://jsfiddle.net/ew65G/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T20:54:29.227

这也可以通过嵌套 div 概念来实现。您需要做的就是将您想要的 div 部分划分为 3 列，如下所示

```
<div id="main">
    <div id="column-1"></div>
    <div id="column-2">
        <div id="column-2-1"></div>
        <div id="column-2-2"></div>
    </div>
</div> 
```

请阅读[如何使用 css div 创建 3 列布局](http://www.gitarani.com/classified.htm?classifiedId=11540)以了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T14:11:11.833

```
<div style="float:left; width:33%">Column1</div>
<div style="float:left; width:33%">Column2</div>
<div style="float:right; width:33%">Column3</div> 
```

您可以根据需要调整宽度百分比。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T15:16:23.923

您还需要输入“display:inline;” 因为 div 通常以块的形式显示。如果没有内联，它将显示为三行而不是三列。

# php - 如何在 Joomla 控制器中指定视图列表？

> ID：11389589
> 
> 赞同：1
> 
> 时间：2012-07-09T05:42:11.053
> 
> 标签：php, list, view, joomla, components

我正在构建一个 joomla 2.5 组件，但我`$view_list`在组件视图文件中的值的复数化方面遇到了一些问题。您能否向我展示一个代码示例，说明如何指定一个唯一值`$view_list`，从而覆盖通过复数英文形式加载的自动值？

这是一个类似讨论的链接：http: [//forum.joomla.org/viewtopic.php?f=642 &t=668428](http://forum.joomla.org/viewtopic.php?f=642&t=668428)

本质上，我需要能够“指定控制器中列表视图的正确名称”，如 radiant_tech 所述。这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:33:36.620

试试这个：

在“单一”控制器文件（如 car.php）中创建以下构造函数：

```
public function __construct($config = array())
{
    $this->view_list = 'carz'; 
    parent::__construct($config); 
} 
```

控制器现在应该重定向到“carz”而不是“cars”。

让我知道结果如何。

# jquery - jquery移动页面更改保持相同的查询字符串

> ID：11389594
> 
> 赞同：1
> 
> 时间：2012-07-09T05:42:44.363
> 
> 标签：jquery, jquery-mobile

我正在从 jquery 移动应用程序中的列表视图更改页面，例如，当我选择第一个链接时，我将其设置为显示查询字符串 hello 的警报（用于测试）。它适用于第一个，但是当我单击第二个链接时，它仍然显示你好，而不是再次显示你好。是否有某种缓存设置我可以禁用，以便它不会在该页面上缓存并显示以前设置的内容？我已经在页面上尝试了 data-dom-cache="false" 选项，但我没有运气，感谢您的帮助。

# vb.net - 如何使用鼠标悬停事件在 RichTextBox 中选择一个单词

> ID：11389601
> 
> 赞同：1
> 
> 时间：2012-07-09T05:43:30.373
> 
> 标签：vb.net, winforms, text, richtextbox

我在文本框中有一篇长论文。我想复制长文中的一个词，只需将鼠标移到那个词上，然后等待 2 秒钟。我不想做任何事情，比如突出显示这个词。我可以知道如何让 VB 做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:04:32.430

我在网上找到了以下代码。（归功于 Siri1008）

```
Public Function GetWordUnderMouse(ByRef Rtf As System.Windows.Forms.RichTextBox, ByVal X As Integer, ByVal Y As Integer) As String
    On Error Resume Next
    Dim POINT As System.Drawing.Point = New System.Drawing.Point()
    Dim Pos As Integer, i As Integer, lStart As Integer, lEnd As Integer
    Dim lLen As Integer, sTxt As String, sChr As String
    '
    POINT.X = X
    POINT.Y = Y
    GetWordUnderMouse = vbNullString
    '
    With Rtf
        lLen = Len(.Text)
        sTxt = .Text
        Pos = Rtf.GetCharIndexFromPosition(POINT)
        If Pos > 0 Then
            For i = Pos To 1 Step -1
                sChr = Mid(sTxt, i, 1)
                If sChr = " " Or sChr = Chr(13) Or i = 1 Then
                    'if the starting character is vbcrlf then
                    'we want to chop that off
                    If sChr = Chr(13) Then
                        lStart = (i + 2)
                    Else
                        lStart = i
                    End If
                    Exit For
                End If
            Next i
            For i = Pos To lLen
                If Mid(sTxt, i, 1) = " " Or Mid(sTxt, i, 1) = Chr(13) Or i = lLen Then
                    lEnd = i + 1
                    Exit For
                End If
            Next i
            If lEnd >= lStart Then
                GetWordUnderMouse = Trim(Mid(sTxt, lStart, lEnd - lStart))
            End If
        End If
    End With
End Function 
```

声明一个公共变量 curWord。

然后，在 RichTextBox 的 MouseMove 事件中，将 curWord = GetWordUnderMouse(Me.RichTextBox1, eX, eY)

在窗体上放置一个计时器并将其间隔设置为 2000。在计时器事件中，将 MsgBox(curWord) Me.Timer1.Enabled = False

在 RichTextBox MouseHover 事件中，启用计时器。

Voila, the word is chosen, without highlighting the textbox. Of course, you do not need the msgbox if you are just copying the word, but you should be able to sort that out.

# c# - 使用 LINQ 将 SQL 表转换为 CSV

> ID：11389604
> 
> 赞同：2
> 
> 时间：2012-07-09T05:43:56.187
> 
> 标签：c#, linq-to-sql, csv

我正在尝试将表格放入逗号分隔的 CSV 文件中。我目前正在这样实现它：

```
var csv = new StringBuilder("id,Name,Address,City,State\n");
var delimiter = ",";
var newline = "\n";

using (var db = MyDatabase())
{
     var query = from c in db.Customers select c;
     foreach(var q in query)
         csv.Append(q.id).Append(delimiter)
             .Append(q.name).Append(delimiter)
             .Append(q.address).Append(delimiter)
             .Append(q.city).Append(delimiter)
             .Append(q.state).Append(newline);
} 
```

这会创建一个 csv 罚款。但我的问题是，是否有一种更简化的方式可以在**不**单独指定每一列的情况下实现这一目标？在某些情况下，我想做一个**select all**，但是表格有很多列，这似乎有点笨拙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:56:48.557

为了在不指定要写入 CSV 的每个属性的情况下执行此操作，您需要使用反射。这是一个如何做到这一点的基本示例：

```
List<Customer> query = from c in db.Customers select c;
        foreach (var q in query)
        {
            Type type = typeof(Customer);
            PropertyInfo[] properties = type.GetProperties();
            foreach (PropertyInfo property in properties)
            {
                string value = property.GetValue(type, null) != null
                    ? property.GetValue(type, null).ToString() 
                    : string.Empty; // or whatever you want the default text to be
                csv.Append(q.id).Append(delimiter);
            }
        } 
```

这将遍历查询中的每个客户，然后遍历客户中的每个属性并写入值。这是假设您希望将 Customer 的每个属性写入 CSV 文件。这至少应该让你知道如何做你想要完成的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:14:38.747

您想要实现的最短路径可能是：

```
var props = typeof(Customer).GetProperties(
          BindingFlags.Instance|BindingFlags.Public
      );

StringBuilder result = new StringBuilder(
         (
             from prop in props select prop.Name
         ).Join(',') + "\n"
     );

Function<string,Customer> project = ( 
   Customer c => (
           from prop in props 
           select prop.GetValue(c).ToString()
       ).Join(",")+"\n";
)

using (var db = MyDatabase())
{
    var query = from c in db.Customers select project(c);
    foreach (var res in query) {
        result.append(res);
    }
} 
```

您可以轻松地使其更通用，但是您需要缓存反射的 PropertyInfos 以避免大量使用类型上的反射。

**警告**：您应该正确转义属性值，因为换行符、逗号、引号等可能会破坏您的 CSV 文件。更好的是，使用已经解决了编写正确 CSV 文件问题的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T04:32:28.407

我使用这段代码：

```
string delimiter = "|";
string newLine = Environment.NewLine;

using (mCustDataContext = new CustDataContext()) {
    var props = typeof(Customer).GetProperties();

    StringBuilder headers = new StringBuilder(string.Join(delimiter, props.Select(c => c.Name).ToArray()) + newLine);

    Func<Customer, string> myFunc = c => 
         string.Join(delimiter, props.Select(b => b.GetValue(c,null))) + newLine;

    var query = mCustDataContext.Customers.Select(myFunc);

    foreach(var q in query)
        headers.Append(q);

    File.WriteAllText(yourFileName, headers.ToString(), mEncoding);
} 
```

# css - 如何在响应式 UI 中将选项卡结构转换为手风琴

> ID：11389609
> 
> 赞同：1
> 
> 时间：2012-07-09T05:44:45.470
> 
> 标签：css, tabs, accordion, responsive-design

我正在尝试为基于 php 的网站设计响应式 ui，现在网站中有一个选项卡结构，它通过在单击不同选项卡时通过 url 传递 php 变量将数据加载到单个数据容器中。**但现在我需要将基于标签的结构转换为低分辨率设备中的手风琴**。有没有什么可行的办法。

我的标签结构的示例代码是，

```
<div id="ddTabs">
<ul id="glowingTabs">
   <li>tab1</li>
   <li>tab2</li>
   <li>tab3</li>
   <li>tab4</li>
</ul>
</div>
<div id="dataContainer">
   Data changes here...
</div> 
```

# javascript - 刷新 Google 地图信息窗口中的内容

> ID：11389612
> 
> 赞同：2
> 
> 时间：2012-07-09T05:45:35.813
> 
> 标签：javascript, jquery, google-maps, google-maps-api-2

我将动态内容加载到地图中的 InfoWindow 中。当我关闭信息窗口并重新打开它时，内容是相同的（尚未更新为最新值）。是否有一种简单的方法可以强制信息窗口在每次打开时加载其内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:56:27.470

如何将类/ID 分配给要在 InfoWindow 中更新的元素。并在您有新数据时更新这些元素的 HTML。

确保`new InfoWindow()`只创建一次 InfoWindow ( )。当您想隐藏 infoWindow 使用`infoWindow.close()`并显示它时，请使用`infoWindow.open()`而不是每次都创建新的 infoWindow 实例。

# android - 通过android访问gmail收件箱

> ID：11389614
> 
> 赞同：0
> 
> 时间：2012-07-09T05:46:11.243
> 
> 标签：android, gmail, inbox

有人可以给我一个通过代码访问gmail收件箱的代码/片段，还可以通过邮件下载附件。问题是我必须访问我的 gmail 收件箱，按顺序逐个发送邮件并下载播放录制的对话，这是这些邮件中的附件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T06:01:28.643

Android 提供了访问[Gmail](http://android-developers.blogspot.in/2012/04/gmail-public-labels-api.html)的 API 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:55:39.237

android 上没有对此的正式支持。有一个黑客可以使用 gmail-ls 内容提供程序，但从我收集的内容来看，它不适用于最新版本的 android（有关详细信息，[请参阅此](https://groups.google.com/forum/?fromgroups#!topic/android-developers/EUjweU45ekw)内容）。如果您想使用 gmail-ls 内容提供程序，[请查看此](http://www.thisismobility.com/blog/2011/01/17/fetching-gmail-messages-by-label-on-android/)示例，但请记住这是一个 hack，并未正式支持。因此，如果/当它不起作用时，请不要感到惊讶。

您可能想看看[gmail4j 之](http://g4j.sourceforge.net/)类的东西。它没有正式的内容提供者所具备的良好集成，但它至少有一个已知的 api。

# linux - 如何增加 i/o 吞吐量以在 linux 中更快地读取？

> ID：11389616
> 
> 赞同：1
> 
> 时间：2012-07-09T05:46:26.783
> 
> 标签：linux, linux-kernel, linux-device-driver

我有一个从标准输入读取的 C 程序。我将在 linux 上使用 dd 命令测试我的程序到 2GB 的数据（4KB 的读取缓冲区）。

我在 3.20GHz 机器上获得了 565MB/s。我在 300MHz 机器上变小了。有什么技巧可以最大限度地提高输入速度。我已经阅读了一些 proc 条目，但可以获得任何帮助。（我可以最大化内核 io 缓冲区大小以提高速度吗？）。请尽快回复。

该领域的初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:58:58.337

如果你的 2GB 输入在磁盘上是连续的块，你可以尝试`fadvise`为内核设置。这将使 Linux 内核的预取窗口更大。

请注意，只有在访问硬盘驱动器成为瓶颈时，这才会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:12:31.190

Increasing your read buffer (currently at 4K) will help speed things up. There is no other relevant tunable that can consistently help you. Reducing context-switches and larger batching of work should be your key method.

# sql-server - 如何对两列 SQL Server 应用唯一约束？

> ID：11389618
> 
> 赞同：2
> 
> 时间：2012-07-09T05:46:29.230
> 
> 标签：sql-server

我在数据库中有两列类型和名称。我想应用一个唯一约束，其中名称在每种类型中都是唯一的。

```
Type   Name
 A     ABC
 R     ABC
 B     ABC 
```

应该被允许，而

```
Type  Name
 A    ABC
 A    ABC 
```

不应该被允许

如何在每种类型中名称唯一的情况下强制执行此约束？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T05:50:40.697

您可以像这样创建多列唯一约束

```
ALTER TABLE MyTable ADD UNIQUE (Type, Name) 
```

这将执行您描述的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:53:16.373

创建表时，您可以执行

```
CREATE TABLE YourTable(
  Name VARCHAR(255) NOT NULL,
  Type   VARCHAR(255) NOT NULL,
  PRIMARY KEY (Type, Name)
) 
```

或者你可以改变你的桌子

```
ALTER TABLE YourTable ADD PRIMARY KEY (Type, Name) 
```

之后我执行了以下四个..（最后一个失败）

```
insert into YourTable values('AB','ABD')
insert into YourTable values('AA','ABD')
insert into YourTable values('AA','ABC')
insert into YourTable values('AA','ABD') 
```

谢谢， 吉格

# iphone - 与 NSMutableArray 比较

> ID：11389619
> 
> 赞同：1
> 
> 时间：2012-07-09T05:46:42.507
> 
> 标签：iphone, ios, nsmutablearray, nsmutabledictionary

在我`Array 1`从中加载图像的 中`NSDocumentDirectory`，我加载了它们并添加了一个`NSMutableDictionary`：

```
self.images = [NSMutableArray array];
for(int i = 0; i <= 8; i++) 
{ 
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.png", i]]; 
    if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
        NSMutableDictionary *container = [[NSMutableDictionary alloc] init];
        [container setObject:[UIImage imageWithContentsOfFile:savedImagePath] forKey:@"image"];
        [container setObject:[NSNumber numberWithInt:i] forKey:@"index"];
        [images addObject:container];
    } 
} 
```

在我的另一个数组`Array 2`中，我从应用程序加载了它们。

```
 self.images = [NSMutableArray arrayWithObjects:
                   @"01.jpg",@"02.jpg",@"03.jpg",@"04.jpg",@"05.jpg",@"06.jpg",@"07.jpg",nil]; 
```

我能够`Array 2`像这样添加字符串：

```
for (int x=1; x<8;x++) {
    // add as NSString
    [images addObject:[NSString stringWithFormat:@"%d", x]];

    } 
```

并且能够`Array 2`像这样进行比较：

```
 NSInteger index = carousel.currentItemIndex;
    if ([[images objectAtIndex:index] intValue] == 1){ 
```

我想做的，就是做到`Array 1`。我知道`Array 1`已经添加了`NSNumber`，但我有点新，`NSMutableDictionary`所以我不能这样做`Array 2`。

可以和我的一样`Array 2`吗？或者其他方式是什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:23:27.497

实际上在这里你有字典数组，因为你正在添加字典，它有两个带有键的对象`image`和`index`

因此，为了检索字典数组，

只需记录它，看看会发生什么

**编辑 2.0**

```
for(int i=0; i< [images count]; i++){
    NSNumber *num =[[images objectAtIndex:i] objectForKey:@"index"];

    int index = [num intValue];

    NSLog(@"%d",index)
} 
```

# mysql - mysql 选择和 MAX()

> ID：11389620
> 
> 赞同：1
> 
> 时间：2012-07-09T05:47:00.790
> 
> 标签：mysql, max

我已经疯了，不知道还能尝试什么。我得到了这个数据：

表名是`erste`

```
valuta  kupovni    
EUR     7.435   
GBP     9.2132 
```

然后我试试这个：

```
SELECT valuta, MAX(kupovni)
FROM erste 
```

我明白了：

```
valuta  MAX(kupovni)
 EUR    9.213199615478516 
```

我想得到：

```
GBP 9.2132 
```

列 valuta is`varchar(3)`和`kupovni`is `float (10)`。我真的不知道我做错了什么。当我尝试：

```
SELECT valuta, MAX(kupovni)
FROM erste
GROUP BY kupovni 
```

它做对了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T05:48:24.497

这似乎只是为`kupovni`字段选择具有最高值的行的简单问题。

你可以做：

```
SELECT valuta, kupovni
FROM erste
ORDER BY kupovni DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T05:48:18.013

你很亲近！这是您需要的：

```
SELECT valuta, MAX(kupovni)
FROM erste
where valuta = 'GBP' -- optional where clause
group by valuta 
```

您必须“分组”所有未由[聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)聚合的列。

除非你真的*需要*在`valuta`输出中，因为你知道`valuta`，我会这样做：

```
SELECT MAX(kupovni)
FROM erste
where valuta = 'GBP' 
```

（请注意，mysql 允许从 group by 中省略列，在这种情况下，您将获得每个组遇到的唯一*第一行）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T05:52:09.107

尝试这个：

```
SELECT valuta, TRUNCATE(MAX(kupovni),4)
FROM erste
group by valuta 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T05:57:42.867

```
SELECT erste.* 
  FROM ( SELECT valuta, MAX(kupovni) AS maxtotal
           FROM erste
           GROUP BY valuta) AS dt
INNER JOIN erste
    ON erste.valuta= dt.valuta
   AND erste.kupovni= dt.maxtotal 
ORDER BY items_purchased.val DESC LIMIT 1 
```

# javascript - jQuery 的返回值是 Array，但构造函数是 Object。如何？

> ID：11389623
> 
> 赞同：5
> 
> 时间：2012-07-09T05:47:28.287
> 
> 标签：javascript, jquery

例如，

```
$(document) // [ #document ] : document object in array
typeof $(document) // "object"
$(document).constructor // function Object() { [native code] } or function (a,b) { return some function; } 
```

如果 value 是数组，它必须是 Array 构造函数。

它不是像对象一样的数组。因为像对象一样的数组只有数组属性，而不像 []。

怎么会这样？

补充：如果可以，请显示简单的示例代码。喜欢

```
a = ... 
console.log(a) // [ ... ]
console.log(a.constructor) // function Object or something 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:07:45.913

看看 jQuery[源代码](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.init)。 `$(document)`创建文档元素的克隆 jQuery 对象，然后创建并返回一个[类似数组的对象](http://api.jquery.com/jQuery.makeArray/)。

> jQuery 工厂函数 $() 返回一个 jQuery 对象，该对象具有数组的许多属性（长度、[] 数组访问运算符等），但与数组不完全相同，并且缺少数组的一些属性内置方法（例如 .pop() 和 .reverse()）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:57:22.387

数组，如 中的`[]`，也是 JavaScript 中的对象。在 JS 中，几乎所有东西都是一个对象，例如函数、数组、字面量对象、正则表达式……要真正知道你正在处理的是一个数组，你可以这样做：

```
Object.prototype.toString.apply(myarray) === '[object Array]' 
```

# asp.net - 如何通过离线访问在 Facebook Wall 上发布消息

> ID：11389625
> 
> 赞同：0
> 
> 时间：2012-07-09T05:47:46.703
> 
> 标签：asp.net, facebook

我正在尝试从我在本地主机上运行并具有脱机访问权限的 asp.net 网站发送消息。当我的 asp.net 网站在 localhost 上运行时，我可以在 fb 墙上发布数据吗？那么请给我一些解决方案。我曾尝试在developers.facebook.com 上使用facebook 提供的图形api，并且我正在从服务器端发送代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T05:53:56.970

名为的权限`Offline Access`已被[弃用](https://developers.facebook.com/roadmap/offline-access-removal/)。

您可以通过[创建一个 facebook 应用程序](https://developers.facebook.com/docs/appsonfacebook/tutorial/)来做到这一点。

配置时，您的应用程序的[权限](https://developers.facebook.com/docs/authentication/permissions/)应包括代表您的用户发布的权限（`publish_stream`应该这样做）。

为您的用户授予应用程序权限 - 访问`https://apps.facebook.com/{your_app_name_or_id}/`，您将被要求允许应用程序对您的用户具有某些权限。允许。

获取应用的[令牌](https://developers.facebook.com/tools/access_token/)。

使用您收到的令牌访问图形 API。一种方法（应该更容易，我自己没有机会彻底了解它）是使用[CS SDK](http://csharpsdk.org/)。

# cocos2d-iphone - Cocos2D：TMX 地图无法识别高清文件

> ID：11389626
> 
> 赞同：0
> 
> 时间：2012-07-09T05:47:54.313
> 
> 标签：cocos2d-iphone, retina-display, tmx

我在 Cocos2d 中遇到了 -hd 后缀文件的问题。我的 SD tilesize 是 52x52，地图是 6 宽 x 9 高，HD tilesize 是 104x104。一切都适当地调整了大小，我的 TMX 地图和瓦片集都有 SD 和 HD 版本。

在 Retina 模拟器中，一切正常，尽管在日志中出现以下无意义的行：

```
Filename(sprites-hd.PNG) contains -hd suffix. Removing it. See cocos2d issue #1040
cocos2d: CCFileUtils: Warning HD file not found: sprites-hd.PNG 
```

但在设备上，考虑到错误，它会执行您所期望的操作，并使用看起来很糟糕并且会混淆碰撞检测的原始 SD 文件。它也不会在 TMX 文件上生成 #1040 错误，而且我怀疑它根本没有使用 -hd TMX 文件；当我删除它时，我从来没有看到一条警告我它丢失的行。

这是怎么回事，我该如何解决？

# javascript - 段落中的重叠字符串

> ID：11389627
> 
> 赞同：6
> 
> 时间：2012-07-09T05:48:00.993
> 
> 标签：javascript, html, css

假设我有如下文字：

```
<p>There are many people in Asia.</p> 
```

我想匹配两个字符串：`many people`, 和`people in Asia`. 我希望输出看起来像两个字符串都是独立找到的，可能对每个匹配的字符串应用不同颜色的下划线，如下所示：

![很多亚洲人](../Images/3ceb658334ec10bfdfcd5c1b53e099e4.png)

但是，在 HTML 中，我不能重叠跨度，因为如果我尝试这样做：

```
span.first { border-bottom: 1px solid red; }
span.second { border-bottom: 1px solid blue; }

<p>There are 
    <span class="first">many <span class="second">people</span> in Asia</span>.
</p> 
```

第一个`</span>`会关闭`span.second`。

我的想法是将`div`s 放置在文本下方，以便它们与`p`上面匹配的文本对齐，但我敢打赌，使用 CSS 将这些 div 与匹配字符串的开始和结束位置对齐将是一场噩梦。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T05:53:05.160

您可能可以将每个单词放在它自己的单独 span 元素中，然后使用类来适当地设置它们的样式。一些跨度将有多个类，其中下划线重叠。有点冗长和丑陋的标记，但我认为它会解决你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T05:54:35.633

您可以单独标记重叠组件，例如：

```
<p>There are
  <span class="first">many </span>
  <span class="overlap">people</span>
  <span class="second"> in Asia</span>. 
</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:44:03.630

你可以这样做：

```
<p>There are
  <span class="first">many <span class="second">people</span></span>
  <span class="second">in Asia</span>. 
</p> 
```

不像其他两个解决方案那样简洁，但它的样式与您的原始示例类似。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T06:34:15.020

HTML：

```
 <p>There are
        <span class="first">many </span>
        <span class="second">people</span> 
        in Asia.
    </p> 
```

CSS：

```
span.first { border-bottom: 1px solid red; }
span.second { border-bottom: 1px solid blue; } 
```

# c++ - Windows::Foundation::DateTime

> ID：11389634
> 
> 赞同：2
> 
> 时间：2012-07-09T05:48:43.457
> 
> 标签：c++, windows, windows-8, microsoft-metro

我目前正在使用 Windows::Foundation::DateTime 结构，它为 UTC 时间（其 UniversalTime 成员）提供的值不是 UNIX 时间戳，我找不到任何关于如何阅读的文档它。所以我做了一些测试：

```
Let 
A equal 129862800600000000 where A is UniversalTime's value at 23:00 on 11/7/2012 
and let
B equal 129862476000000000 where B is UniversalTime's value at 15:00 on 11/7/2012

We can there for assume that 8 hours of time in whatever format UniversalTime takes can be interpreted as A-B.  We therefore have
A-B = 3246000000 = 8 hours
(A-B)/8 = 405750000 = 1 hour
((A-B)/8)/60 = 6762500 = 1 minute
(((A-B)/8)/60)/60 = 112708.(3...) = 1 second 
```

事实证明这是完全错误的。例如，如果将 405750000 添加到 DateTime 对象的 UniversalTime 成员，它肯定不会添加一个小时。相反，它似乎只增加了 40 秒。

基本上我只需要能够确定自 unix 时代以来已经过去的天数。

无论如何，如果有人有任何建议或帮助，那就太好了。

编辑：我还考虑过他们使用位掩码获取/设置所有内容的可能性。但目前我不确定如何进行检查。（现在是凌晨 4 点，我需要睡觉。rofl）

编辑2：我目前正在尝试做的示例：

```
if((post_date.UniversalTime/(60*60*24))>num_seconds_since_unix_epoch_for_current_day){
    date_formatter=ref new DateTimeFormatter("{month.abbreviated} {day.integer(1)}, {year.full} at {hour.integer(1)}:{minute.integer(2)}:{second.integer(2)}");
}else{
    date_formatter=ref new DateTimeFormatter("Today at {hour.integer(1)}:{minute.integer(2)}");
}
date_string = date_formatter->format(post_date); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:07:06.687

根据[这个 MS 教程](http://msdn.microsoft.com/en-us/library/windows/apps/hh465045.aspx)，您可以使用 DateTimeFormatter 格式化 DateTime。

```
Windows::Foundation::DateTime dt = (Windows::Foundation::DateTime) value; 
Windows::Globalization::DateTimeFormatting::DateTimeFormatter^ dtf =
    Windows::Globalization::DateTimeFormatting::DateTimeFormatter::LongDate::get();
dtf->Format(dt); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T16:00:09.650

Windows::Foundation::DateTime 的 UniversalTime 字段是自 1601 年 1 月 1 日以来 100ns 单位的数量。[它与 Windows FILETIME](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)结构完全相同。请注意，通用时间是 UTC，通常与本地时间不同。

# android - Android：暂停线程几秒钟

> ID：11389639
> 
> 赞同：0
> 
> 时间：2012-07-09T05:49:27.530
> 
> 标签：android, multithreading

```
ExecutorService exec = Executors.newFixedThreadPool(8);
List<Future<Object>> results = new ArrayList<Future<Object>>();

// submit tasks
for(int i = 0; i < 8; i++) {
    results.add(exec.submit(new ThreadTask()));
}

...

// stop the pool from accepting new tasks
exec.shutdown();

// wait for results
for(Future<Object> result: results) {
    Object obj = result.get();
}

class ThreadTask implements Callable<Object> {

    public Object call() {
        // execute download
        //Inside this method I need to pause the thread for several seconds
        ...
        return result;
    }
} 
```

如评论中所示，我需要将线程暂停几秒钟。希望你能帮我解决这个问题。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:01:26.767

只需调用[`Thread.sleep(timeInMillis)`](http://developer.android.com/reference/java/lang/Thread.html#sleep%28long%29)- 这将暂停当前线程。

所以：

```
Thread.sleep(5000); // Sleep for 5 seconds 
```

显然，您不应该从 UI 线程执行此操作，否则您的整个 UI 将冻结...

请注意，这种简单的方法不允许通过中断线程来唤醒其他线程。如果您希望能够早点唤醒它，您可以`Object.wait()`在任何需要唤醒它的代码都可以访问的监视器上使用它；该代码可以`Object.notify()`用来唤醒等待线程。（或者，使用更高级别的抽象，例如[`Condition`](http://developer.android.com/reference/java/util/concurrent/locks/Condition.html)或[`Semaphore`](http://developer.android.com/reference/java/util/concurrent/Semaphore.html)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T07:15:35.173

你可以实现一个新线程，它不是 UI 线程..

像这样的东西可能会为你做..

```
class ThreadTask implements Callable<Object> {

public Object call() {
Thread createdToWait= new Thread() {
        public void run() {
                    //---some code

                    sleep(1000);//call this function to pause the execution of this thread

                    //---code to be executed after the pause
        }
    };
    createdToWait.start();
 return result;
} 
```

# c# - GoDaddy 的 SMTP 服务器发送电子邮件错误

> ID：11389640
> 
> 赞同：1
> 
> 时间：2012-07-09T05:50:05.970
> 
> 标签：c#, email

我想用我的网络应用程序发送电子邮件。它发布在机架空间专用服务器上，但我使用 GoDaddy 的 SMTP 服务器发送电子邮件。

我得到的错误是：

> System.Net.Mail.SmtpFailedRecipientException：不允许使用邮箱名称。服务器响应是：对不起，从您的位置 [xx.xx.xxx.xx] 中继被拒绝（#5.7.1）

这是我的代码

```
SmtpClient client = new SmtpClient("relay-hosting.secureserver.net", 25); 
string to ="rpanchal@itaxsmart.com"; 
client.DeliveryMethod = SmtpDeliveryMethod.Network;
client.Credentials = new System.Net.NetworkCredential("EmailId@domain.com","**");

MailAddress fromAddress = new MailAddress("myEmailId@domain.com", "CompanyName"); 
MailMessage message = new MailMessage(); 
message.From = fromAddress; 
message.To.Add(to); 
message.Body = "This is Test message";
message.Subject = "hi";

client.Send(message); message.Dispose(); return "Email Send"; 
```

我应该在专用服务器上进行任何配置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:06:34.987

你在本地测试吗？如果是，那么您的 SMTP 服务器可能不允许中继。不要担心，当您部署应用程序时不会有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:45:24.557

如果您使用 RackSpace 进行托管，您应该使用 SMTP RackSpace 推荐的从他们的服务器发送。不幸的是，如果您从 go Daddy Shared 或 4GH 托管发送，您只能使用 relay-hosting.secureserver.net。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T19:52:42.880

开始尝试更改您的端口 465 而不是 25。

或者请记住，中继托管非常有限，每天只能发送 250 封电子邮件，而且接受远程连接不是那么容易。检查是否可以使用 SSL 连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-20T20:25:58.480

就是这么简单：

您必须专注于 smtp 主机、端口、ssl ... 将 smtp 主机更改为：**relay-hosting.secureserver.net** 并**删除** **端口**和**ssl**，仅此而已... **不要使用 smtp 端口和 smtp ssl true 或 false**

```
 var fromAddress = "mailfrom@yourdomain";
    // any address where the email will be sending
    var toAddress = "mailto@yourdomain";
    //Password of your mail address
    const string fromPassword = "******";
    // Passing the values and make a email formate to display
    string subject = TextBox1.Text.ToString();
    string body = "From: " + TextBox2.Text + "\n";
    body += "Email: " + TextBox3.Text + "\n";
    body += "Subject: " + TextBox4.Text + "\n";
    body += "Message: \n" + TextBox5.Text + "\n";
    // smtp settings
    var smtp = new System.Net.Mail.SmtpClient();
    {
        smtp.Host = "relay-hosting.secureserver.net";
**//Warning Delete =>//smtp.Port = 80;**
**//Warning Delete =>//smtp.EnableSsl = false;**
        smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
        smtp.Credentials = new NetworkCredential(fromAddress, fromPassword);
        smtp.Timeout = 20000;
    }
    // Passing values to smtp object
    smtp.Send(fromAddress, toAddress, subject, body); 
```

# tridion - 我可以获取 SDL TRIDION 2011 中以前版本的发布日期吗？

> ID：11389648
> 
> 赞同：2
> 
> 时间：2012-07-09T05:50:26.857
> 
> 标签：tridion

在应用程序中，需要获取所有先前版本的发布日期。在 Tridion 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T06:23:23.787

Tridion 不会保留项目所有发布日期的完整记录。通过 API，您可以了解项目当前发布到哪些目标，以及上次发布操作发生的时间。

作为一种变通方法，您可以使用事件系统来跟踪其中一个发布事件，并将已发布项目的 URI（包括版本）存储在单独的数据库中。

# php - 从 obj c 中的 URL 中删除 %2520 和其他非标准字符

> ID：11389652
> 
> 赞同：5
> 
> 时间：2012-07-09T05:50:43.190
> 
> 标签：php, ios, url, uiwebview

我从服务器获取 URL 并尝试在 webview 中加载 URL。问题是我得到的网址包含非标准字符。网址是：

```
https//p-r3.test.abc.com:443%2Ftablet%2Fjsp%2Fgift%2Fipad%2Fgifter%2FgitGiftList.jsp%3FregId%3D74500002%26filterBy%3DviewAll%26pageId%3DourGifty%26sort%3Dcategory%26groupBy%3Dcategory%26view%3Dlist%26categoryId%3D%26addCat%3Dcat100540004&amp;title=re%20-&amp;imgurl=https%3A%2F%2Fm-r3-testy.tr.com%3A443%2Ftablet%2Fimages%2Ft_Full.jpg%3Fwid%3D300%26hei%3D300. 
```

我需要从 URL 中删除,`%2520`和其他非标准字符等字符。任何人都有想法删除此编码。 任何帮助，将不胜感激`%2F``%3D`

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T05:55:36.760

`%2520`只是一个双重编码的空间。编码一次就得到`%20`，编码两次就得到`%2520`。这不是“非标准”，只是编码不佳。从理论上讲，没有理由不能只`%2520`用空格替换，但据我所知，服务器端代码需要*双*编码字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:26:09.990

找到了答案。我正在使用 iOS 的内置功能删除编码。`abc = [def stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];`

我正在 webview 中加载 abc。它工作正常。感谢大家的回复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T06:01:37.690

在处理 URL 服务器端的代码中，您似乎有太多 urlencode() 或 urldecode() 太少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-20T14:56:36.163

为避免多重编码，请先删除任何编码

```
 _pdfUrl = [ _pdfUrl stringByRemovingPercentEncoding];        
   _pdfUrl = [_pdfUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# asp.net-mvc-3 - 当我将参数值作为空值传递时，为什么我得到“参数字典包含参数 x 的空条目”？

> ID：11389654
> 
> 赞同：1
> 
> 时间：2012-07-09T05:50:50.337
> 
> 标签：asp.net-mvc-3

我有一个像这样的 Action 方法

```
[HttpPost]
public ActionResult DoSearchRequestOperation(SearchRequestModelDto data)
{
     //..
} 
```

当我使用这个 url 字符串`http://localhost:9124/Search/SearchRequest?searchRequestFor=0`时，它可以工作。但是当我使用 url 时`http://localhost:9124/Search/SearchRequest?searchRequestFor=`，它会抛出这个异常

> System.ArgumentException：参数字典包含方法“System.Web.Mvc.ActionResult SearchRequest(xxxx.Shared. 'xxxx.WebServer.UI.Controllers.SearchController 中的 Dto.Process.Search.SearchRequestFor)'

如果用户提供第二个 url，它应该取值 0。

我尝试像下面那样更改 maproute，但这也不起作用。

```
 routes.MapRoute(
            "Default1", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Dashboard", id = 0 } 
        ); 
```

这是 SearchRequestModelDto 类

```
[DataContract]
public class SearchRequestModelDto : UIBoundDto
{
    public SearchRequestModelDto()
    {
        Criteria = new SearchRequestCriteriaDto();
        SearchResult = new SearchRequestResultDto();
    }

    [DataMember]
    public SearchRequestCriteriaDto Criteria { get; set; }

    [DataMember]
    public SearchRequestResultDto SearchResult { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:44:12.040

这是因为 SearchRequestFor 类型应该可以为空

```
public ActionResult SearchRequest(SearchRequestFor? searchRequestFor)
{
    //...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T05:57:30.830

如果您希望能够在查询字符串中发送空值，则可以将视图模型上的`SearchRequestFor`属性设为可为空的整数：`SearchRequestModelDto`

```
public int? SearchRequestFor { get; set; } 
```

您在路由中设置的事实`id=0`对查询字符串参数没有影响。它们不受路由管理，因此您必须编写自定义模型绑定器或在模型上使用可为空的整数。后者是优选的。

# c++ - 如何将文本从编辑控件设置到窗口

> ID：11389656
> 
> 赞同：0
> 
> 时间：2012-07-09T05:50:59.567
> 
> 标签：c++

我正在尝试从我在运行时创建的编辑控件中获取文本，并将其中的文本打印到我也在运行时创建的父窗口（而不是标题栏）上。我该怎么做呢？

```
 const int bufferSize = 1024;
            char textBuffer[bufferSize] = "";

            HWND Editbox = FindWindowEx(hWnd, NULL, "Edit", NULL);
            SendMessage(Editbox, WM_GETTEXT, 
                (WPARAM)bufferSize, (LPARAM)textBuffer);
            HWND Picbox = FindWindowEx(hWnd, NULL, "Picbox", NULL);

            RECT Picbox_Rect;
            GetClientRect(Picbox,&Picbox_Rect);
            Picbox_Rect.top = 3;
            Picbox_Rect.left = 3;
            hdc = GetDC (Picbox) ;
            HFONT fnt = CreateFont(14,0,0,0,FW_DONTCARE,
                FALSE,FALSE,FALSE,DEFAULT_CHARSET,
                OUT_OUTLINE_PRECIS,CLIP_DEFAULT_PRECIS,
                0, VARIABLE_PITCH,TEXT("Verdana"));
            SelectObject(hdc, fnt);
            SetTextColor(hdc,RGB(0,0,255));
            SetBkMode(hdc, TRANSPARENT);
            DrawText(hdc, textBuffer, strlen (textBuffer), 
                &Picbox_Rect, DT_LEFT);
            ReleaseDC (Picbox, hdc) ;
            DeleteObject(fnt);
                //InvalidateRect(Picbox, NULL, TRUE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:02:19.293

您可以使用[GetWindowText](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520%28v=vs.85%29.aspx)从编辑控件中获取文本并使用[DrawText](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162498%28v=vs.85%29.aspx)或[TextOut](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145133%28v=vs.85%29.aspx)来编写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:02:47.867

如果您直接使用 Windows API，只需使用`GetWindowText()`从文本框中获取文本，并将文本`SetWindowText()`写入另一个窗口或控件。

# .net - 您将如何将文件名作为命令行参数并 JSON 在 .net 中解析该文件？

> ID：11389660
> 
> 赞同：0
> 
> 时间：2012-07-09T05:51:18.433
> 
> 标签：.net, mono

假设我有一个文件 abc.json，我想将该文件的位置传递给 dotnet 程序，然后读入该文件并解析它。

命令行将是这样的：

```
myprog.exe -f path/to/abc.json 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:05:45.083

如果您使用 C# 进行开发，那么您的 main 应该看起来像这样

```
static void Main(string[] args) 
```

如果您正在使用 VB.Net 进行开发，那么您可以在 main 中添加这一行

```
Dim args() As String = System.Environment.GetCommandLineArgs() 
```

无论哪种方式，args 数组都将包含命令参数列表中的每个项目，并用空格分隔：

```
args[0]="-f"
args[1]="path/to/abc.json" 
```

之后，您可以使用标准 .Net (System.IO) 函数打开文件并读取行。

```
 Using sw As New System.IO.StreamReader(filename)
        Do
            Dim line As String = sw.ReadLine()
            ProcessLine(line)
        Loop While (Not sw.EndOfStream)
    End Using 
```

# javascript - 滑动在 IE 中不起作用。但它在所有其他浏览器中都可以正常工作

> ID：11389664
> 
> 赞同：0
> 
> 时间：2012-07-09T05:51:57.637
> 
> 标签：javascript, dotnetnuke

嗨，我正在研究 dotnetnuke。我开发了一个滑动图像的模块。滑动在 IE 中不起作用，但在所有其他浏览器中都可以正常工作。我怎么解决这个问题？先感谢您。

这是代码：

```
<script type="text/javascript" >
$(function () {

$('#da-slider').cslider();

    });

</script>. 
```

图像不是滑动的，但所有文本都在同一个图像中重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:30:27.250

`SCRIPT5007: Unable to get value of the property 'getScript': object is null or undefined initWidgets.js, line 6 character 9 SCRIPT5007: Object expected Test.aspx, line 740 character 9`

如果您不使用皮肤小部件，您可以从“管理”>“站点设置”禁用它们。

如果您可以发布 url 或所有错误，这将很有帮助，但大多数情况下，由于 javascript 代码在浏览器中执行方式的性质，您需要修复与 javascript 相关的所有错误。

# c# - 在 vb.net 中清除 gridview

> ID：11389668
> 
> 赞同：0
> 
> 时间：2012-07-09T05:52:03.520
> 
> 标签：c#, vb.net

我正在尝试使用以下代码清除网格视图，但它不起作用：

```
da.Fill(dt);

 GridView1.DataSource = dt;

 GridView1.DataBind();

 DataSourceOperation.Delete=GridView1;

 connection.Close();` 
```

请告诉我这个声明有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:34:56.980

尝试：

```
GridView1.DataSource = null; 
```

`DataSourceOperation`是一个枚举，因此您不能将 Enumeration 设置为`GridView`. 这甚至如何编译？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:30:29.660

试试这个怎么样：

```
dt.Rows.Clear();
GridView1.DataBind(); 
```

# c - 比较 C 中的双精度值

> ID：11389674
> 
> 赞同：4
> 
> 时间：2012-07-09T05:52:34.270
> 
> 标签：c, visual-studio-6

为什么即使输入值999999，它总是会转到else语句？有人可以解释为什么以及这样做的正确方法是什么？

```
#include <stdio.h>

int main(int argc, char **args)
{
    double dValue = 0;

    scanf("%d",&dValue);

    if(10000 < dValue){
            printf("More than");
    } else {
        printf("Less than");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T05:55:15.277

如果您打算将值作为整数读取（使用`"%d"`），那么您应该将其声明为`int`. 如果您打算将值作为 a 读取，`double`则应改为使用`"%lf"`scanf 格式说明符。

# mysql - 如何在 mysql GIS 空间扩展中关闭一个开放的多边形

> ID：11389677
> 
> 赞同：1
> 
> 时间：2012-07-09T05:52:49.660
> 
> 标签：mysql, gis, polygon

我有一个包含多边形的 mysql 表，其中一些是打开的，我需要关闭它们。大概是通过将“StartPoint”附加到“Linestring”的末尾并重写为多边形。有任何想法吗？

当然，我可以拿出并测试一个多边形，看看它是打开还是关闭

```
SELECT ExteriorRing(SHAPE) into @testshape from tablename where OGR_FID=1; 
SELECT (StartPoint(@testshape)) INTO @SP;
SELECT (EndPoint(@testshape)) INTO @EP;
SELECT @EP=@SP as myIsRing; 
```

好的，但是当它打开时，我需要将 Startpoint 附加到行字符串的末尾以关闭多边形。有没有办法附加那个“封闭”点并创建一个封闭的多边形？

可能值得注意的是我尝试过（根据手册页）

```
SELECT UNION(@testshape,@SP) INTO @newshape; 
```

并得到标准语法错误 ERROR 1064 (42000) 好像我的版本不接受 UNION 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:57:37.133

对不起大家，在这个问题上又花了几个小时，得到了以下结果

```
select polygon(geomfromtext(astext(concat(geomfromtext(astext(@testshape)),(geomfromtext(astext(@SP))))))) INTO @newpoly; 
```

不完全干净，但它有效并且可以通过以下方式进行测试：

```
SELECT (StartPoint(EXTERIORRING(@newpoly))) INTO @SP2;
SELECT (EndPoint(EXTERIORRING(@newpoly))) INTO @EP2;
SELECT @EP2=@SP2 as myIsRing; 
```

# android - 查找我的地图上的哪个叠加层被点击了

> ID：11389679
> 
> 赞同：0
> 
> 时间：2012-07-09T05:52:58.977
> 
> 标签：android, google-maps, maps, overlays

我已经在我的应用程序中实现了谷歌地图。我已经编写了自己的覆盖类扩展 ItemizedOverlay 以添加覆盖。使用相同的覆盖类，我还添加了一个覆盖来显示我在地图上的当前位置。

此覆盖类的 onTouchEvent 用于确定触摸的位置，并能够将覆盖对象移动到地图上的任何位置。然而，这导致了一些问题。指向我当前位置的指针也变为可移动的。我想修复这个当前位置指针。

为此，我正在创建一个新类 MyNewLocationOverLay，它扩展了我之前创建的自定义叠加层。我的计划是覆盖 onTouchEvent 方法并返回 super.onTouchEvent 以防触摸其他覆盖，并在触摸 mylocation 覆盖时返回 true。如何找出点击了哪些叠加层。我试过了：

```
public class myOverlayclass extends OverLayClass {

    public myOverlayclass(Drawable marker) {
        super(marker);

        // TODO Auto-generated constructor stub
    }

    public boolean onTouchEvent(MotionEvent motionEvent, MapView mapView) {
        System.out.println("The overlays are*************"+mapView.getOverlays()); //this lists the overlays
        return super.onTouchEvent(motionEvent, mapView);
    }
} 
```

我需要比较它以找出触摸了哪个叠加层。如何比较叠加层。

```
if (mapView.getOverlays().contains(mYLocationOverLay)) 
```

似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:08:19.480

在 onTouchEvent 方法中，我执行了命中测试以找出触摸了哪个叠加层。并将其与 myLocationGeoPoint 进行比较。

```
for(OverlayItem item : overlayItems) 
                    {
                        Point p = new Point();

                        mapView.getProjection().toPixels(item.getPoint(), p);
                        item.setMarker(marker);
                        boolean isHit = hitTest(item, marker, x - p.x, y - p.y);

                        if(isHit && !(item.getPoint().equals(mylocationgeoPoint))) //this is where I'm checking if I hit my current locating geopoint
                        {
                          //NOW THE OVERLAYS ARE MOVABLE
                            System.out.println("-------------------------inside isHit -----------------------"+item.getPoint() +"my locating geo point is" +mylocationgeoPoint);
.
.
. } 
} 
```

希望它可以帮助某人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:37:16.290

大多数触摸位置不会是覆盖位置的精确副本，因此您不能使用 .quals 或 == 。将 +-X 添加到您的计算中，例如：

```
for(Overlay item : mapView.getOverlays()) 
    {

            MarkerOverlay ov = (MarkerOverlay) item;

            if (Math.abs(ov.getGlobalGeoPoint().getLongitudeE6() - geoPoint.getLongitudeE6()) <50 && 
                    Math.abs(ov.getGlobalGeoPoint().getLatitudeE6()-geoPoint.getLatitudeE6())<50) {
                //do ur work here

                return true;
            }
            else{

            }

    } 
```

# fullcalendar - 如何在全日历事件附近显示删除图标

> ID：11389686
> 
> 赞同：0
> 
> 时间：2012-07-09T05:53:31.360
> 
> 标签：fullcalendar

如何在 fullcalender 事件附近显示删除图标.. 我尝试添加 html img 标签，但它在事件中显示为文本...它没有显示图像图标....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:25:47.200

我已经解决了这个问题......

```
eventRender: function(event, element) { element.find('span.fc-event-title').html(element.find('span.fc-event-title').te‌​xt()); }, 
```

# sublimetext - 如何将 sublime text2 更新为最新的开发版本？

> ID：11389687
> 
> 赞同：1
> 
> 时间：2012-07-09T05:53:33.640
> 
> 标签：sublimetext

我在 ubuntu 12.04 上使用 sublime text2 dev。

我当前的版本是 2207 build，但最新版本是 2214
`http://www.sublimetext.com/dev`

我想更新它。我发现这个：
`http://www.webupd8.org/2012/03/sublime-text-2-ppa-separate-development.html`

但是 ppa 没有更新到最新版本。所以我想知道是否有手动更新的方法，或者是否有自动安装程序/更新程序？

我已经下载了最新的 tar 文件。

顺便说一句，如果我更新到最新版本，我的键绑定、插件包等配置仍然可以正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:33:46.227

[最后我在这里](https://gist.github.com/1197854)找到了一个shell脚本，它的工作。

# android - android中的listview布局

> ID：11389692
> 
> 赞同：0
> 
> 时间：2012-07-09T05:54:25.543
> 
> 标签：android, layout

在我的应用程序中，我有 2 个数据库。我的要求是我必须在一个活动中并排显示这 2 个数据库。我不知道数据库中有多少数据。哪种方法容易？我是否应该使用 Listview 或表格布局来获得这个。如果它是 listview 意味着如何拆分屏幕以显示两个数据库（另一件事是我不能放置 2 个列表视图 y 因为如果我滚动屏幕，这两个部分都应该滚动）。任何人请帮助我。我在过去 2 天里一直在寻找这个，我无法得到正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:45:02.073

如果基于数据库值的单击事件并不重要，您可以使用自定义列表视图，您可以使用它在单个列表中显示所有值

请参阅本教程以制作自定义列表

[http://saigeethamn.blogspot.in/2010/04/custom-listview-android-developer.html](http://saigeethamn.blogspot.in/2010/04/custom-listview-android-developer.html)

并且

[http://www.bogotobogo.com/Android/android7dvancedListViewB.php#CustomListView](http://www.bogotobogo.com/Android/android7dvancedListViewB.php#CustomListView)

编辑

您还可以使用表格布局，

首先做一件事，从两个数据库中获取所有数据，并根据它们的大小在更大的数据集的基础上创建一个动态表布局，然后在其中填充值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:10:33.260

所以我建议这样做：

1.  将单个 ListView 放在您的布局上。
2.  为单元格创建布局。
3.  在单元格的上部创建一个不可见的 (Visibility = View.GONE) 分隔符。
4.  实现 ListView 适配器。ListView 适配器在所有位置定义单元格的内容，如下所示

> ```
> public class MySimpleArrayAdapter extends ArrayAdapter<String> 
> {
>   @Override
>   public View getView(int position, View convertView, ViewGroup parent) {
>                 /*CODE*/
>       return rowView;
>   }
> } 
> ```

如您所见，您可以将数据库 1 中的数据放在第 1-N 行中，将数据库 2 中的数据放在第 N+1 - M 行中。您还可以将不可见分隔符的可见性更改为 View.VISIBLE 以创建分隔符在 N 和 N+1 之间。

关于如何做到这一切的文章：

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# python - Python Google App Engine：发送邮件错误

> ID：11389695
> 
> 赞同：1
> 
> 时间：2012-07-09T05:54:39.990
> 
> 标签：python, google-app-engine, email, sendmail

我正在编写一个简单的测试应用程序来使用 Python GAE 发送电子邮件。我在日志中收到以下错误。我尝试过空体和其他更改，但似乎没有任何效果。我需要进行任何配置更改吗？

回溯（最近一次通话最后）：

   文件“/base/data/home/apps/s~xxxx/1.360190002979488583/email.py”，第 5 行，
         从 google.appengine.api 导入邮件文件“/base/python27_runtime/python27_lib/versions/1/google/appengine /api/mail.py"，第 37 行，
         从电子邮件导入 MIMEBase
              ImportError：无法导入名称 MIMEBase

下面是我的 app.yaml 文件

```
application: mailer
version: 1
runtime: python27
api_version: 1
threadsafe: no

handlers:
- url: /email
  script: email.py

libraries:
- name: webapp2
  version: "2.5.1" 
```

[下面是我的 email.py （本质上它与https://developers.google.com/appengine/docs/python/mail/sendingmail](https://developers.google.com/appengine/docs/python/mail/sendingmail)中提到的代码相同。我刚刚更改了一个有效的电子邮件地址）

```
from google.appengine.api import mail
import sys

message = mail.EmailMessage(sender="Example.com Support <valid-from-address@gmail.com>",
                            subject="Your account has been approved")

message.to = "Valid User <valid.user@gmail.com>"
message.body = """
Dear Albert:

Your example.com account has been approved.  

The example.com Team
"""

message.send() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T12:22:27.277

不要命名你的脚本`email.py`；这就是阻止您从标准库`email`模块导入的原因。

# jquery - 如何向按钮添加点击事件并让它调用函数？

> ID：11389701
> 
> 赞同：0
> 
> 时间：2012-07-09T05:55:40.260
> 
> 标签：jquery

我使用以下内容创建了一个模式窗口：

```
function openAdminModal(dObj, content) {
    var modal = $.modal({
        title: dObj.title,
        closeButton: true,
        content: content,
        width: false,
        resizeOnLoad: true,
        buttons: {
            'Submit': function (win) {
                submitHandler(dObj.$link, $('#main-form'), false);
            },
            'Close': function (win) {
                win.closeModal();
            }
        }
    });
} 
```

我不确定这有助于解决这个问题，但我添加它以防万一。

它创建的模态具有以下内容：

```
<div id="modal" style="display: block;">
....
    <button type="button">Submit</button> 
```

按钮不在表单内，并且按钮周围的代码无法移动。我想做的是使用 jQuery 向这个按钮添加一个事件，以便在单击它时触发以下函数。

```
submitHandler(dObj.$link, $('#main-form'), false); 
```

有人可以向我解释如何使用 jQuery 将函数的调用添加到按钮的单击事件中。我不确定的一件事是如何选择该按钮，因为它没有 ID。它唯一的内容是“提交”文本。在进行搜索时，我可以使用第一个代码第 2 行的变量 modal 的值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T05:58:21.720

尝试这个，

**[现场演示](http://jsfiddle.net/dGdAc/)**

```
$('button:contains("Submit")').click(function(){
  submitHandler(dObj.$link, $('#main-form'), false);
});​ 
```

# css - css溢出问题

> ID：11389707
> 
> 赞同：0
> 
> 时间：2012-07-09T05:56:47.853
> 
> 标签：css, overflow

我正在使用 jQuery 和 CSS 为某些内容创建工具提示。它可以正常工作，因为工具提示出现在 mouseenter 上，而在 mouseleave 上消失。我的问题在于我的 CSS 布局。当工具提示呈现到页面时，它被限制在其父级的高度：

html:

```
<div id="allInvTable">
    <div class="invItmCont" style="border-bottom:1px solid white;">
        <div class="invItmItm">An Item</div>
        <div class="invItmStats" style="display:none;">
            <div style="clear:both;">
                ...Some content here...
            </div>
            <span style="display: none; top: -90px;">
                <div style="clear:both;">
                    ...The same content placed here via jquery to display as the tooltip...
                </div>
            </span>
        </div>
    </div>
</div> 
```

CSS：

```
#allInvTable {
    overflow:auto;
}

.invItmCont {
    text-decoration:none;
    display:block;
    float:left;
    padding:0 15px;
    text-align:center;
    position:relative;
    clear: both;
}

.invItmCont span {
    background-color: #000;
    border: 5px solid #826217;
    border-radius:15px;
    -moz-border-radius:15px;
    -o-border-radius:15px;
    -webkit-border-radius:15px;
    -moz-box-shadow: 2px 2px 2px #000;
    -webkit-box-shadow:  2px 2px 2px #000;
   box-shadow:  2px 2px 2px #000;
    width:200px;
    height:auto;
    position:absolute;
    display:none;
    top:-90px;
    color:#fff;
    left:-37px;

} 
```

仅供参考，jquery：

```
<script>
    $("#allInvTable div.invItmCont").append("<span></span>");
    $("#allInvTable div.invItmCont").hover(function() {
        $(this).find("span").animate({opacity:"show", top: "-70"}, "slow");
        var itmStat = $(".invItmStats", this).html();
        $(this).find("span").html(itmStat);
    },
    function() {
        $(this).find("span").animate({opacity:"hide", top: "-90"}, "fast");
    });
</script> 
```

我知道它与`overflow:auto;`on 有关，`#allInvTable`因为当我删除该属性时，它会正确呈现，但项目会从它们的容器中流出。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:02:01.120

嗯，我知道这不能直接回答你的问题，但是你有没有看过现有的工具提示库，比如 Twitter 的 Bootstrap：http: [//twitter.github.com/bootstrap/javascript.html#tooltips](http://twitter.github.com/bootstrap/javascript.html#tooltips)

我之所以这么说是因为，我宁愿花时间在我的应用程序的核心上，也不愿尝试重新发明轮子。除非，您确实在尝试学习创建轮子的过程。顺便说一句，这也很好。这样你也能学到很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T18:21:40.677

您可以做的一件事就是将“工具提示”内容交换到您想要显示它的位置（已经具有您想要的可见性和格式）。

这种方法将 display:none 元素视为内容存储。

```
$("#allInvTable div.invItmCont")
.hover(function() {
    var outgoing = $(".invItmItm", this).html();
    var incoming = $(".invItmStats", this).html();
    $(".invItmItm", this).html(incoming);
    $(".invItmStats", this).html(outgoing);
  }, function() {
    var outgoing = $(".invItmItm", this).html();
    var incoming = $(".invItmStats", this).html();
    $(".invItmItm", this).html(incoming);
    $(".invItmStats", this).html(outgoing);
  }
); 
```

见：http: [//jsfiddle.net/zatz/mgtKD/6/](http://jsfiddle.net/zatz/mgtKD/6/)

或者，您可以开始使用 z-layers，这应该是一种糟糕的体验，您最终会被迫使用/调整现有库之一。

# php - 更改 silverstripes 'mysite' 文件夹的名称

> ID：11389709
> 
> 赞同：2
> 
> 时间：2012-07-09T05:56:50.660
> 
> 标签：php, silverstripe

我正在建立我的第一个 silverstripe 网站，并且有一个非常基本的问题，我似乎无法在任何地方找到答案。有没有办法重命名“mysite”文件夹而不必破解核心代码？唯一的原因是我直接不喜欢那个文件夹的名称，我宁愿我可以将它更改为我正在开发的站点的实际名称。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T07:56:27.103

将`mysite`文件夹名称更改为其他名称是完全有效的。从技术上讲，mysite 文件夹只不过是一个模块，它可以有你想要的任何名称，只要它不与“核心文件夹”（资产、cms ......）

见[http://doc.silverstripe.org/framework/en/trunk/topics/directory-structure](http://doc.silverstripe.org/framework/en/trunk/topics/directory-structure)

# android - Android：我的应用程序使用了多少内存？

> ID：11389713
> 
> 赞同：5
> 
> 时间：2012-07-09T05:57:03.087
> 
> 标签：android, memory-management, heap-memory

记忆似乎是一个很大的话题，我找不到具体的答案。我已经得到了堆中有多少可用的答案，并且我知道我应该使用多少。我需要答案如何编码以编程方式确定我的应用程序使用了多少内存？我使用了多少总内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:21:01.723

这有效：

```
 Debug.MemoryInfo memoryInfo = new Debug.MemoryInfo();
  Debug.getMemoryInfo(memoryInfo);

  String memMessage = String.format("App Memory: Pss=%.2f MB\nPrivate=%.2f MB\nShared=%.2f MB",
  memoryInfo.getTotalPss() / 1024.0,
  memoryInfo.getTotalPrivateDirty() / 1024.0,
  memoryInfo.getTotalSharedDirty() / 1024.0);

  Toast.makeText(this,memMessage,Toast.LENGTH_LONG).show();
  Log.i("log_tag", memMessage); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T06:17:06.727

使用`top -d 1 -n 1`Android Shell 命令获取具有进程名称的所有进程列表或进程使用的内存，然后从系统的返回字符串中提取您的进程信息：

```
BufferedReader in = null;

        try {
            Process process = null;
            process = Runtime.getRuntime().exec("top -n 1 -d 1");

            in = new BufferedReader(new 
            InputStreamReader(process.getInputStream()));

            String line ="";
            String content = "";

            while((line = in.readLine()) != null) {
                content += line + "\n";
            }
            System.out.println(content);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        finally {
            if(in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        } 
```

* * *

你会得到字符串：

```
PID  PPID USER   STAT VSZ  %MEM  %CPU COMMAND
9673 9672 root    R   712   0.1   0.0 top -d 1 -n 1
2489 2386 system  S   369m  87.7  0.0 system_server
3101 2386 app_23  S   304m  72.3  0.0 com.android.browser
2581 2386 radio   S   279m  66.3  0.0 com.android.phone
2585 2386 app_15  S   271m  64.4  0.0 com.android.launcher 
```

# mysql - 如何在 WHERE 子句 codeigniter 中正确编写此 IF 条件

> ID：11389714
> 
> 赞同：0
> 
> 时间：2012-07-09T05:57:05.530
> 
> 标签：mysql, sql, codeigniter, where-clause

我正在使用**`codeigniter`**，我想在 WHERE 子句中使用 IF 条件。但它没有正确执行。

```
$where_string="( a.FirstName LIKE '".$search_phrase."%' OR ( IF(c.PrivacySettingElephantiUser=1,'a.LastName LIKE \'".$search_phrase."%\'  OR CONCAT(a.FirstName, \' \', a.LastName) LIKE \'".$search_phrase."%\' ','')))";
$this->db->where($where_string); 
```

我在这里搜索。by和**concat**。`first name`_`last name``first name` **`last name`**

 **我检查值`c.PrivacySettingsElephantiUser`。如果它是真的，我正在检查姓氏和名字姓氏连接值，问题是如果`c.PrivacySettingsElephantiUser=1`AND `c.PrivacySettingsElephantiUser=0`，

这部分没有执行。

`OR ( IF(c.PrivacySettingElephantiUser=1,'a.LastName LIKE \'".$search_phrase."%\' OR CONCAT(a.FirstName, \' \', a.LastName) LIKE \'".$search_phrase."%\' ','')`

它总是只按名字搜索，忽略 if 条件，

如何正确写这个？

`AND ,OR`有没有一种简单的方法可以使用逻辑来做到这一点？

**更新**

这是我的完整查询

```
public function search_people($profile_id,$search_phrase=NULL,$country=NULL,$state=NULL,$city=NULL,$neighborhood=NULL,$type=NULL,$limit=NULL,$offset=NULL)
{
    $this->db->select('SQL_CALC_FOUND_ROWS a.ProfileID,a.FirstName,a.LastName,a.StateName,a.CityName,a.ShowLastName,a.UserType,a.ProfileImg,b.FriendStatus,b.RequesterID,b.AccepterID',FALSE);
    $this->db->from($this->mastables['xxxxxxxx'].' as a');
$this->db->join($this->mastables['yyyyyyyyyyy'].' as b'," b.RequesterID=a.ProfileID AND b.AccepterID=".$profile_id." OR b.AccepterID=a.ProfileID AND b.RequesterID=".$profile_id,'left');

    $this->db->where('a.ProfileID !=',$profile_id);
    $this->db->where('a.UserType',2);

    if($type=="friend")
    {

        $this->db->join($this->mastables['profile_privacy_settings'].' as c'," c.EntityID=a.ProfileID AND c.UserType=2 AND c.ProfilePrivacySettingDefaultID=1 ",'inner');
        $where_string="( a.FirstName LIKE '".$search_phrase."%' OR ( IF(c.PrivacySettingFriend=1,'a.LastName LIKE \'".$search_phrase."%\'  OR CONCAT(a.FirstName, \' \', a.LastName) LIKE \'".$search_phrase."%\' ','')))";
        $this->db->where($where_string);
        $this->db->where('b.FriendStatus',1);
    }
    else if($type=="other")
    {
        $this->db->join($this->mastables['profile_privacy_settings'].' as c'," c.EntityID=a.ProfileID AND c.UserType=2 AND c.ProfilePrivacySettingDefaultID=1 ",'inner');
        $where_string="( a.FirstName LIKE '".$search_phrase."%' OR ( IF(c.PrivacySettingElephantiUser=1,'a.LastName LIKE \'".$search_phrase."%\'  OR CONCAT(a.FirstName, \' \', a.LastName) LIKE \'".$search_phrase."%\' ','')))";
        $this->db->where($where_string);
        $this->db->where ('(b.FriendStatus IS NULL OR b.FriendStatus=0)');
    } else {    
        $this->db->join($this->mastables['profile_privacy_settings'].' as c'," c.EntityID=a.ProfileID AND c.UserType=2 AND c.ProfilePrivacySettingDefaultID=1 ",'inner');
        $where_string="( a.FirstName LIKE '".$search_phrase."%' OR ( IF(c.PrivacySettingElephantiUser=1 OR c.PrivacySettingFriend=1,'a.LastName LIKE \'".$search_phrase."%\'  OR CONCAT(a.FirstName, \' \', a.LastName) LIKE \'".$search_phrase."%\'','')))";
        //$where_string="( a.FirstName LIKE '".$search_phrase."%' OR ( IF(c.PrivacySettingElephantiUser=1 OR c.PrivacySettingFriend=1,'a.LastName LIKE b%','')))";
        $this->db->where($where_string);
    }

    if($country)
    {
        $this->db->where('a.CountryID',$country);
    }
    if($state)
    {
        $this->db->where('a.StateID',$state);
    }
    if($city)
    {
        $this->db->where('a.CityID',$city);
    }
    if($neighborhood)
    {
        //$this->db->where('',$neighborhood);
    }
    if($limit)
    {
        $this->db->limit($limit,$offset);   
    }

$query = $this->db->get();
//echo $this->db->last_query();die;
$result['result'] = $query->result_array();

$query = $this->db->query('SELECT FOUND_ROWS() AS `Count`');
    $result["totalrows"] = $query->row()->Count;

if(!empty($result))
{
    return $result; 
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:07:42.433

没有得到 PHP 操作只是编写 sql 代码.. 在你的 where 查询中使用[Case](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)语句

```
case when (c.PrivacySettingElephantiUser=1 AND (a.LastName LIKE '%something%' 
OR CONCAT(a.FirstName, \' \', a.LastName) like '%something%') then 1 else 0 end; 
```**

# backbone.js - RequireJs：使用带有 shim 的 autoloading-deps

> ID：11389715
> 
> 赞同：8
> 
> 时间：2012-07-09T05:57:10.160
> 
> 标签：backbone.js, requirejs

我已经定义了一个定义路径和垫片的 RequireJs 配置：

```
require.config({
    // define application bootstrap
    deps: ["main"],

    // define library shortcuts
    paths: {
        app: "app"
        , jquery: "lib/jquery"
        , underscore: "lib/underscore"
        , backbone: "lib/backbone"
        , bootstrap: "lib/bootstrap"
    },

    // define library dependencies
    shim: {
        jquery: {
            exports: "$"
        },
        underscore: {
            exports: "_"
        },
        backbone: {
            deps: ["underscore", "jquery"],
            exports: "Backbone"
        },
        bootstrap: {
            deps: ['jquery'],
            exports: "bootstrap"
        },

        // main application
        app: {
            deps: ["backbone"],
            exports: "App"
        }
    }
}); 
```

如您所见，当我加载主应用程序（-命名空间）时，最后一个“shim”声明应该使其能够访问主干（及其依赖）。

实际上这不起作用：

```
require(["app"], function($, _, Backbone, App){
    app.router = new Backbone.Router.extend({
        // routing and route actions
    });
}); 
```

让我想知道的是，在“backbone-boilderplate”项目中，Backbone（及其部门）可以通过这种方式获得： [https ://github.com/tbranyen/backbone-boilerplate/blob/master/app/main.js](https://github.com/tbranyen/backbone-boilerplate/blob/master/app/main.js)

甚至不必在函数中定义它。

那么我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T11:02:52.637

根据我的阅读，requirejs 根据您在数组中指定的内容传递参数...因此您的调用应如下所示：

```
require(["app"], function (App) { // less arguments
}); 
```

或者像这样：

```
require(
    ["jquery", "underscore", "backbone", "app"], // more deps
    function ($, _, Backbone, App) {
    }
); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T15:05:52.950

从扩展路由器的 -function 中删除`$, _, Backbone`-parameters 。`require`垫片导出全局值，因此无需像常规依赖项那样在`require`或`define`调用中引用它们。

将它们作为参数传递会与全局变量混淆，并且很可能导致它们未定义。

# c - 分割错误出来了？

> ID：11389719
> 
> 赞同：2
> 
> 时间：2012-07-09T05:57:48.313
> 
> 标签：c, string

我试图在不使用的情况下连接 2 个字符串`strcat`，但出现运行时错误。拜托，有人在这里帮我...

另外，这个说法`q=q+len;`正确吗？我们可以将变量添加到指针吗？

```
#include<stdio.h>
#include<string.h>

void xstrcat(char*,char*);
int main()
{
    char source[]="folks";
    char target[30]="hello";
    xstrcat(target,source);
    printf("%s",source);
    printf("%s",target);
    return 0;
}

void xstrcat(char*p,char*q)
{
    int len=0;
    len=strlen(q);
    q=q+len;
    while(*p!='\0')
    {
        *q=*p;
        q++;
        p++;
    }
    *q='\0';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:00:06.940

您的实施中的一些错误：

1 - 您正在访问随机存储器。一旦你的字符串中没有 a `/0`。

```
while(*p!='/0') 
```

一定是：

```
while(*p!='\0') 
```

注意斜线**\**。

2 - 尝试添加时覆盖随机`*p`内存`*q`。您必须创建一个具有足够空间的新变量来存储它们。

> 另外，这个语句是 q=q+len; 正确的？我们可以将变量添加到指针吗？

是的。[这是一个指针算术表达式。](http://www.eskimo.com/~scs/cclass/notes/sx10b.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:03:35.633

您在函数调用中将目标作为第一个参数传递，但该函数似乎试图使用第二个参数作为目标。所以，也许你只需要在函数调用中切换参数的位置。

另一件事是您在转义空字符时使用斜杠而不是反斜杠。因此，将“/0”更改为“\0”。

关于将 int 添加到指针：在您的函数中，指针算术类型是完全合法的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T06:05:16.690

有几件事，首先，您需要检查`\0`而不是`/0`

```
while(*p!='\0') 
```

而且，您正在尝试将字符串添加到字符串文字中，这将导致未定义的行为。转变

```
xstrcat(target,source); 
```

至

```
xstrcat(source, target); 
```

最后，最后一行`xstrcat`应该改为

```
*q='\0'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T06:02:34.373

你正在覆盖内存。

您正在连接的`source`没有足够的内存来保存连接的字符。

您可能想要颠倒`source`和的定义`target`。IE

```
char source[30] = "folks";
char *target = "hello"; 
```

或者

称为`xstrcat`_`xstrcat(source, target);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T06:13:19.047

问题在于您在以下行中的代码：

```
xstrcat(target,source); 
```

它应该是

```
xstrcat(source,target); 
```

或在您的 xstrcat 函数中，尝试将第一个参数视为目标，将第二个参数视为源。

# imagemagick - 如何使用 ImageMagick 在 GIF 中将颜色设置为透明？

> ID：11389721
> 
> 赞同：4
> 
> 时间：2012-07-09T05:57:58.833
> 
> 标签：imagemagick

我很难找到如何使用 ImageMagick 在 GIF 中将颜色（在我的情况下为黑色）设置为透明。如何对一组现有的 GIF 图像执行此操作？

我试过这个选项，但它似乎没有做任何事情：

```
mogrify -transparent-color black -transparent black *.gif 
```

我已经通读了这个，但实际上使颜色在 GIF 中变得透明的原因似乎有点令人困惑：[http ://www.imagemagick.org/Usage/formats/#boolean_trans](http://www.imagemagick.org/Usage/formats/#boolean_trans)

例如：

> 请注意，设置“-transparent-color”不会为 GIF 图像添加任何透明度，也不会将指定的颜色转换为透明。该选项所做的只是指定应在颜色表中放置什么颜色，以用于表示 GIF 图像中的透明颜色的颜色索引。
> 
> 如果要将特定（精确）颜色更改为透明，请使用“-transparent”颜色替换运算符。

但是之后...

> 使用 +transparent 反转匹配的像素。即使所有不匹配的颜色透明。
> 
> -opaque 操作符与 -transparent 完全相同，但将匹配的颜色替换为当前的 -fill 颜色设置，而不是透明的。但是，-transparent 运算符还确保图像启用了 alpha 通道，根据“-alpha set”，并且不需要您修改 -channel 以启用 alpha 通道处理。
> 
> 请注意，这并未将颜色定义为用于颜色映射图像格式（如 GIF）的“透明颜色”。为此使用 -transparent-color

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T08:36:07.710

我想警告你不要使用`mogrify`. `mogrify`确实通过覆盖原始图像来转换图像。如果出现任何问题，您的图像就会消失。

而是使用`convert`. 在确定转换正常后，您可以随时删除原始图像。

要使黑色像素透明，请使用以下命令：

```
convert orig.gif -transparent black transp.gif 
```

非常适合我。

我的 IM 版本：ImageMagick 6.7.8-0 2012-07-04 Q16。你的是啥呢？

如果它仍然对您不起作用，那么您的 GIF 中的“黑色”可能根本不是黑色，而只是非常深的灰色。ImageMagick 还具有枚举 GIF 中所有颜色的工具。在这种情况下，以下 2 个命令可能会对您有所帮助：

```
 identify \
   -format "%f: - Uniq Colors: %k - Image transparency channel enabled: %A - Image Depth: %z %c\n" \
    *.gif 
```

和

```
 convert \
     *.gif \
    -format "%f :\n%c\n\n" \
     histogram:info: 
```

可以通过名称“黑色”、RGB 值“(0, 0, 0)”以及十六进制值“#000000”来识别黑色的使用。所以纯黑色应该出现在最后一个命令的输出中，如下所示：

```
 5000: (  0,  0,  0) #000000 black 
```

例如，深灰色可能是：

```
 100: ( 14, 14, 14,255) #0E0E0E srgba(14,14,14,1)
 2100: (  1,  1,  1,255) #010101 srgba(1,1,1,1) 
```

在 GIF 中启用透明度后，最后一个命令应该为每种颜色显示 4 个值的元组，最后一个值表示 Alpha 通道。您以前的黑色将出现在输出中，如下所示：

```
 5000: (  0,  0,  0,  0) #00000000 none 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-09T06:04:45.620

将 -background color 生成为 GIF 后尝试。

检查[http://www.imagemagick.org/script/mogrify.php](http://www.imagemagick.org/script/mogrify.php)网址以获取 mogrify 和背景选项。见下图。

![在此处输入图像描述](../Images/c733ff078177343d47e1d273ffbcf394.png)

# java - 读入一个分隔和存储变量（String、Double 和 int）的 txt 文件以供以后使用

> ID：11389723
> 
> 赞同：0
> 
> 时间：2012-07-09T05:59:13.123
> 
> 标签：java

初学者 java 程序员，我正在寻找一种在处理与班次类型、事务类型和成本相关的某些数据时读取 txt 文件（从收银台输出）的方法，以提供我想要的结果。

任何帮助将不胜感激。

txt 文档中的示例行：

“**卡片**”，“ 2012 年 5 月 7 日**10:32:42** ”，“层压 A4”，**10、10**，“**夜班**”，1486510814，假，130

所以我需要的相关信息以**粗体显示**，文本行中的其余信息无关紧要。

我需要找到**昨天**（05-07-2012）在**Nightshift**上进行的所有**卡**交易的总**成本**。

 ******到目前为止，我已经到了这里，我试图在夜班时分开。还考虑过使用数组并将每个值存储到自己的变量中，但发现这太难了。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.text.SimpleDateFormat;
import java.util.*;
public class Finder{

public static void main (String args[]) throws FileNotFoundException
{
  Calendar today = Calendar.getInstance();
  SimpleDateFormat formatter= 
  new SimpleDateFormat("dd-MM-yyyy");
  today.add(Calendar.DATE, -1);
  String yesterday = formatter.format(today.getTime());
Scanner sc = new Scanner(new File("textdocument.log"));
while(sc.hasNextLine()) {
String[] numstrs = sc.nextLine().split(yesterday + "\"NIGHTSHIFT\""); // split by "

for(int i = 0; i < numstrs.length; i++)
{
    System.out.println(numstrs[i]);
    System.out.println();

}
}
}
} 
```

期望的输出：

夜班总计 05-07-2012

现金总额 $20

卡总 $40

Eftpos 总计 20 美元

我希望我已经问清楚了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:05:26.413

如果数据将始终保持相同的格式，我建议您使用 CSV 解析器，例如[Java CSV](http://sourceforge.net/projects/javacsv/)来解析您的文件。假设文件具有标准格式，您应该可以毫无问题地选择所需的字段。

如果要删除引号 ( `"`)，可以使用该`.replaceAll("\"","");`函数删除它们（一旦拆分数据并获得所需的字段）。

最后，如之前的 SO 帖子所述，[您](https://stackoverflow.com/questions/3006150/java-how-to-check-if-a-date-object-equals-yesterday)可以检查日期是否恰好是昨天的日期：

```
Calendar c1 = Calendar.getInstance(); // today
c1.add(Calendar.DAY_OF_YEAR, -1); // yesterday

Calendar c2 = Calendar.getInstance();
c2.setTime(getDateFromLine(line)); // your date

if (c1.get(Calendar.YEAR) == c2.get(Calendar.YEAR)
  && c1.get(Calendar.DAY_OF_YEAR) == c2.get(Calendar.DAY_OF_YEAR)) {
     //Do your math here
} 
```

编辑：我会尽量让这一点更清楚一点：

我假设您的所有行都具有相同的格式，如下所示： `"CARD","05-07-2012 10:32:42","Laminate A4",10,10,"NIGHTSHIFT",1486510814,False,130`. 这基本上意味着行中的数据将始终保持其顺序，例如，`NIGHTSHIFT`将始终是行中的第 6 个值。这同样适用于其他信息。

由于您拥有的文件是字符分隔的，在这种情况下，使用逗号，您可以使用 Open CSV 来处理该文件。

提取所需部分后，如果需要，您可以使用该`.replaceAll`功能从提取的数据中删除引号。然后您可以比较您拥有的字符串（Apache 的`StringUtils`类可能很有用）。

如果字符串等于`NIGHTSHIFT`，您可以继续使用我昨天附加的代码段检查日期是否是昨天的日期。如果日期匹配，您可以使用 Java CSV 提取成本，将其转换为数值（因为您正在处理成本，我会推荐该类，因为与or`BigDecimal`相比，它没有舍入问题）并做任何数学运算您需要的操作。`float``double`

所有这一切都应该反过来，给你你所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T07:50:07.393

你可以尝试这样的事情：

```
 final Pattern p = Pattern.compile("CARD(.*)NIGHTSHIFT");
    // Scanner sc = new Scanner(new File("textdocument.log"));
    // while (sc.hasNextLine()) {
    final String nextString = "\"CARD\",\"05-07-2012 10:32:42\",\"Laminate A4\",10,10,\"NIGHTSHIFT\",1486510814,False,130";
    final StringTokenizer st = new StringTokenizer(p.matcher(
        nextString.replaceAll("\"", "")).replaceAll("$1"), ",");
    while (st.hasMoreTokens()) {
        final StringTokenizer sTmp = new StringTokenizer(st.nextToken()
            .trim(), " |-");
        try {
            final Calendar today = Calendar.getInstance();
            final int day = Integer.valueOf(sTmp.nextToken());
            final int month = Integer.valueOf(sTmp.nextToken());
            final int year = Integer.valueOf(sTmp.nextToken());
            today.set(year, month, day);
            today.add(Calendar.DAY_OF_YEAR, -1);
            System.out
                .println(new Date(today.getTimeInMillis()).toString());
        } catch (final Exception e) {
            // I do not understand why catch is used
            System.out.println("Integer hangs, skipped line.");
            continue;
        }
        st.nextToken();
        st.nextToken();
        System.out.println(st.nextToken());
    }
    // } 
```******

# php - PHP MYSQL 日期邮件提醒

> ID：11389724
> 
> 赞同：1
> 
> 时间：2012-07-09T05:59:41.940
> 
> 标签：php, mysql, email

我创建了一个包含 3 个字段（**contract_expired、main_applicant_dob 和 joint_applicant_dob**）的数据库。我如何向自己发送电子邮件以提醒自己这些日期？对于**contract_exprired**如果与当前**dd-mm-yyyy**匹配，则自动发送电子邮件至 myemail@gmail.com。而对于**main_applicant_do**b 和 **joint_applicant_dob**，我可以设置它在匹配 dd-mm 时提前一周提醒我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:04:26.723

编写一个 PHP 脚本来读取数据库字段并检查条件是否适合触发电子邮件。从命令行运行 PHP 脚本`php <scriptname>`以查看它是否运行良好，然后将其设置为 cron 作业。

# ruby-on-rails - 如何使用 paypal_permissions gem 或其他方式从 PayPal 接收付款数据或用户数据？

> ID：11389726
> 
> 赞同：2
> 
> 时间：2012-07-09T05:59:50.257
> 
> 标签：ruby-on-rails, transactions, gem, report, paypal

我正在使用 Rails，需要制作有关付款的报告。我需要接收有关付款的信息。我不知道该怎么做。

我找到了 paypal_permissions gem 以获得获取个人信息的权限。我需要更多，所以我改变了它。在功能更新中添加了 TRANSACTION_DETAILS，添加了 get_transaction_details_data 商家。

```
class MerchantsController < ApplicationController

def update
 callback_url = URI.encode(merchants_request_permissions_callback_url)
permissions =  'EXPRESS_CHECKOUT,DIRECT_PAYMENT,ACCESS_BASIC_PERSONAL_DATA,ACCESS_ADVANCED_PERSONAL_DATA,TRANSACTION_DETAILS'

def get_transaction_details_data merchant
 access_token = merchant.ppp_access_token
 verifier = merchant.ppp_access_token_verifier
::PAYPAL_PERMISSIONS_GATEWAY.get_transaction_details_data(access_token, verifier)
 end
end 
```

这是对的吗 ？我如何接收交易数据和个人数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:05:34.860

你可以试试这个宝石：[paypal_adaptive](https://github.com/tc/paypal_adaptive)吗？

# javascript - 在 Javascript 中访问 ASP.NET 控件

> ID：11389733
> 
> 赞同：0
> 
> 时间：2012-07-09T06:00:46.147
> 
> 标签：javascript, asp.net

我的 ASP.NET Web 应用程序中有以下 Javascript 行：

```
document.getElementById('<%=myTextBox[0].ClientID %>').value = "test"; 
```

如何访问 myTextBox 元素？例如，我想更改此服务器端数组的第 5 个元素，我想将服务器端参数传递给我的函数，我该怎么做？

例如：

```
server side:
ddl.Attributes.Add("onChange", "return OnFoodChange(this,'" + i + "');");

javascript function:
function OnFoodChange(myCmb,myIndex) 
```

using`document.getElementById('<%=myTextBox[myIndex].ClientID %>').value = "test";`给我错误，它说 myIndex 没有定义，我想因为 myIndex 像服务器端参数一样使用，我该如何解决？

这是我完整的 JavaScript 函数：

```
 function OnFoodChange(myCmb,myIndex) {
               //alert('5');
try{
               var q = document.getElementById('<%= HFFoodPrice.ClientID %>').value.toString();
           var q2 = q.split(';');
           var index = 0;
           //alert(myCmb.selectedIndex.toString());

           //var e = document.getElementById(myCmb);
           var strUser = myCmb.options[myCmb.selectedIndex].value;

           document.getElementById('<%=myTextBox[0].ClientID %>').value = strUser;

           for (var j = 0; j < q2.length; j++) {
               if (q2[j] != '') {
                   var q3 = q2[j].split(',');
                   {

                   }
               }
           }
           }
           catch(err)
           {
           alert(err.message);
           }
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:12:16.787

发送此文本框的控件 ID 而不是发送索引作为 asp.net 控件 ID 可能与您期望的不同，

**在后面的代码中**

```
ddl.Attributes.Add("onChange", "return OnFoodChange(this,'" + myTextBox[i].ClientID + "');"); 
```

**在 HTML 中**

```
function OnFoodChange(myCmb,myTextBoxId) {
 currentTextBox = document.getElementById(myTextBoxId);
//Your code...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:09:31.547

您正在尝试将服务器端与客户端混合。它不是这样工作的。您需要将服务器阵列传输到服务器上的 javascript，然后您将能够在客户端访问其索引。

# java - java程序命令行执行

> ID：11389735
> 
> 赞同：-1
> 
> 时间：2012-07-09T06:01:07.610
> 
> 标签：java

我正在使用带有软件 JDK7 的 UBUNTU 11.0.7，但是当我尝试从命令行执行一个简单的 java 程序时，它再次要求我安装 jdk 版本，任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:52:08.317

安装 jdk 并设置路径变量后，编写 java -version 以了解是否正确安装了 java，然后使用 java -jar yourfilePath 运行 .jar 文件

# unicode - 如何转换 UNICODE 希伯来语在 VBScript 中显示为乱码？

> ID：11389740
> 
> 赞同：4
> 
> 时间：2012-07-09T06:01:29.123
> 
> 标签：unicode, utf-8, vbscript, hebrew, windows-1255

1.  我正在使用 vbscript 和 WinHttp.WinHttpRequest.5.1 对象从希伯来语（WINDOWS-1255 / UTF-8 编码）网站收集信息。

例如 ：

```
Set objWinHttp = CreateObject("WinHttp.WinHttpRequest.5.1")
...
'writes the file as unicode (can't use Ascii)
Set Fileout = FSO.CreateTextFile("c:\temp\myfile.xml", true, true) 

....
Fileout.WriteLine(objWinHttp.responsetext) 
```

1.  在记事本/记事本++ 中查看文件时，我将希伯来语视为 Gibrish / Gibberish。例如： **äìëåú - äøá àáøäí éåñó - îåøùú**

2.  我需要一个 vbscript 函数来正确返回希伯来语，该函数应该类似于以下[http://www.pixiesoft.com/flip/](http://www.pixiesoft.com/flip/)选择第二个单选按钮并按转换按钮，您将正确看到希伯来语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:38:23.387

您的脚本正确地获取字节流并按原样保存。那里没有问题。

您的问题是本地文本编辑器不知道它应该将文件读取为 cp1255，因此它会在您的机器上尝试默认的 cp1252。您无法将文件在本地保存为 cp1252，以便记事本正确读取，因为 cp1252 不包含任何希伯来语字符。

什么最终会读取文件或字节流，需要正确地选择希伯来语？如果它不支持 cp1255，您将需要找到该工具支持的编码，并将 cp1255 字符串转换为该编码。建议您尝试 UTF-8 或 UTF-16LE（Windows 的编码误导性地称为“Unicode”。）

在 VBScript/JScript 中的编码之间转换文本可以作为 ADODB 流的副作用来完成。[请参阅此答案](https://stackoverflow.com/a/920405/18936)中的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:45:35.330

Thanks to Charming Bobince (that posted the answer), I am now able to see HEBREW correctly (saving a windows-1255 encoding to a txt file (notpad)) by implementing the following :

```
Function ConvertFromUTF8(sIn)

        Dim oIn: Set oIn = CreateObject("ADODB.Stream")

        oIn.Open
        oIn.CharSet = "X-ANSI"
        oIn.WriteText sIn
        oIn.Position = 0
        oIn.CharSet = "WINDOWS-1255"
        ConvertFromUTF8 = oIn.ReadText
        oIn.Close

End Function 
```

# python - 使用 Python 在内容中精确替换单词

> ID：11389741
> 
> 赞同：3
> 
> 时间：2012-07-09T06:01:35.817
> 
> 标签：python, regex, replace

我正在尝试使用正则表达式替换一些内容。我可以使用以下方法做到这一点

```
EX: """ The search technique is usefull, the search technique is usefull """
old = 'the'
toreplace = "<span class='highlight' STYLE='background-color:yellow'>" +  old + "</span>"
pattern = re.compile(re.escape(old), re.I)
highlighted_txt = re.sub(pattern,toreplace,A,count)

" <span class='highlight' STYLE='background-color:yellow'>the</span> search tech
nique is usefull, <span class='highlight' STYLE='background-color:yellow'>the</s
pan> search technique is usefull " 
```

但我想做的是用在内容中准确找到的东西替换旧词，比如第二个**“The”**应该替换为

```
<span class='highlight' STYLE='background-color:yellow'>The</span>

" <span class='highlight' STYLE='background-color:yellow'>the</span> search tech
nique is usefull, <span class='highlight' STYLE='background-color:yellow'>The</s
pan> search technique is usefull " 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:11:15.133

使用时，`re.sub`您可以`\0`输入替换字符串，该替换字符串将扩展为搜索表达式的匹配项。您需要确保`\0`不被解释为八进制转义，因此使用原始字符串文字很方便。例如，您可以将代码的第三行更改为

```
toreplace = r"<span class='highlight' STYLE='background-color:yellow'>\0</span>" 
```

你应该得到你正在寻找的行为。

由于您想使用整个匹配的字符串，因此您不需要在正则表达式中创建任何组。0 组始终定义为整个匹配的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:08:01.350

将关键字放在捕获组中。

```
old = '(the)' 
```

并使用捕获的文本作为替换（注意`\1`，它表示第一个捕获组）：

```
toreplace = r"<span class='highlight' STYLE='background-color:yellow'>\1</span>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:10:21.000

在这种情况下，您需要使用反向引用（参见[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)），例如：

```
old = 'the (cat|dog|horse)'

replace = '<span>the old \1</span>' 
```

将“猫”替换为“老猫”。

在你的情况下，更换

```
replace = "..." + old + "..." 
```

和

```
replace = "..." + '\1' + "..." 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T05:31:02.103

这解决了我的问题

```
toreplace = "<span class='highlight' STYLE='background-color:yellow'>\g<0></span>" 
```

# iphone - 使用 iphone SDK 和“/api/write”发布到 tumblr

> ID：11389748
> 
> 赞同：1
> 
> 时间：2012-07-09T06:02:06.663
> 
> 标签：iphone, ios, cocoa-touch

如何从 iphone SDK for tumblr 进行身份验证然后将文本发布到 tumblr 请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:15:52.637

* *** @charanjit 我已经写了一个代码，你可以通过它在不倒翁上发布文本试试这个代码：-

```
@interface NSString (MIMEAdditions)
+ (NSString*)MIMEBoundary;
+ (NSString*)multipartMIMEStringWithDictionary:(NSDictionary*)dict;
@end

@implementation NSString (MIMEAdditions)

//this returns a unique boundary which is used in constructing the multipart MIME body of the POST request
+ (NSString*)MIMEBoundary
{
    static NSString* MIMEBoundary = nil;

    if(!MIMEBoundary)
        MIMEBoundary = [[NSString alloc] initWithFormat:@"----_=TheRealTester%@_=_----",[[NSProcessInfo processInfo] globallyUniqueString]];

    return MIMEBoundary;
}

//this create a correctly structured multipart MIME body for the POST request from a dictionary
+ (NSString*)multipartMIMEStringWithDictionary:(NSDictionary*)dict 
{
    NSMutableString* result = [NSMutableString string];

    for (NSString* key in dict)
    {
        [result appendFormat:@"--%@\nContent-Disposition: form-data; name=\"%@\"\n\n%@\n",[NSString MIMEBoundary],key,[dict objectForKey:key]];
    }

    [result appendFormat:@"\n--%@--\n",[NSString MIMEBoundary]];
    return result;
}

@end 
```

**以上代码用于在实现之前写入 .m 文件。之后写这段代码..

```
- (IBAction)postToTumblr1
{
    NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
    BOOL b = [emailTest evaluateWithObject:emailtext.text];

    if (b==NO) {        
        UIAlertView *messageBox = [[UIAlertView alloc]initWithTitle:@" " message:@"Invalid Email ID" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [messageBox show];
        [messageBox release];  
    }
    else {
        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString:@"http://www.tumblr.com/api/write"]];
        [request setHTTPMethod:@"POST"];

        //tell the server to expect 8-bit encoded content as we're sending UTF-8 data, and UTF-8 is an 8-bit encoding
        [request addValue:@"8bit" forHTTPHeaderField:@"Content-Transfer-Encoding"];

        //set the content-type header to multipart MIME
        [request addValue: [NSString stringWithFormat:@"multipart/form-data; boundary=%@",[NSString MIMEBoundary]] forHTTPHeaderField: @"Content-Type"];

        //create a dictionary for all the fields you want to send in the POST request
        NSDictionary* postData = [NSDictionary dictionaryWithObjectsAndKeys:
                                 emailtext.text, @"email",
                                 password.text, @"password",
                                 @"regular", @"type",
                                 @"The Real Compatibility Tester", @"title",
                                 postText, @"body",
                                 nil];

        //set the body of the POST request to the multipart MIME encoded dictionary
        [request setHTTPBody: [[NSString multipartMIMEStringWithDictionary: postData] dataUsingEncoding: NSUTF8StringEncoding]];

        NSLog(@"Tumblr Login:%@\nTumblr ", emailtext.text);

        [NSURLConnection connectionWithRequest:request delegate:self];
        [request release];

        yes=1;

        if(1) {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Tumblr Post" message:@"Post successfully" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];

            [alert show];
            [alert release];
        }
        else 
        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Tumblr Post" message:@"Post not  successfully done" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];

            [alert show];
            [alert release]; 
        }
    }
 }

- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // the user clicked one of the OK/Cancel buttons
    if (buttonIndex == 0)
    {
        [self dismissModalViewControllerAnimated:YES];
    }
    else
    {
        NSLog(@"cancel");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:17:11.683

试试这个功能发帖到tumblr 希望这对你有帮助:)

```
- (IBAction)postToTumblr1
{
    NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
    BOOL b = [emailTest evaluateWithObject:emailtext.text];

    if (b==NO) 
    {
        UIAlertView *messageBox = [[UIAlertView alloc]initWithTitle:@" " message:@"Invalid Email ID" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [messageBox show];
        [messageBox release];
    }
    else
    {
        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString:@"http://www.tumblr.com/api/write"]];
        [request setHTTPMethod:@"POST"];

        // tell the server to expect 8-bit encoded content as we're sending UTF-8 data, and UTF-8 is an 8-bit encoding
        [request addValue:@"8bit" forHTTPHeaderField:@"Content-Transfer-Encoding"];

        //set the content-type header to multipart MIME
        [request addValue: [NSString stringWithFormat:@"multipart/form-data; boundary=%@", [NSString MIMEBoundary]] forHTTPHeaderField: @"Content-Type"];

        //create a dictionary for all the fields you want to send in the POST request
        NSDictionary* postData = [NSDictionary dictionaryWithObjectsAndKeys:
                                 emailtext.text, @"email",
                                 password.text, @"password",
                                 @"regular", @"type",
                                 @"The Real Compatibility Tester", @"title",
                                 postText, @"body",
                                 nil];

        //set the body of the POST request to the multipart MIME encoded dictionary
        [request setHTTPBody: [[NSString multipartMIMEStringWithDictionary: postData] dataUsingEncoding: NSUTF8StringEncoding]];

        NSLog(@"Tumblr Login:%@\nTumblr ", emailtext.text);

        [NSURLConnection connectionWithRequest:request delegate:self];
        [request release];

        yes = 1;

        if(1)
        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Tumblr Post" message:@"Post successfully" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];

            [alert show];
            [alert release];
        }
        else 
        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Tumblr Post" message:@"Post not  successfully done" delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];

            [alert show];
            [alert release];
        }
    }
} 
```

# algorithm - 递归线性搜索的复杂性是多少（使用分而治之的技术）？

> ID：11389749
> 
> 赞同：0
> 
> 时间：2012-07-09T06:02:12.830
> 
> 标签：algorithm, complexity-theory, time-complexity, divide-and-conquer

想分析递归线性搜索的复杂性（使用分治技术）。是 log(n) 还是 n ？如果不是 log(n) 那么实际复杂性是多少以及如何？

```
int linear_search(int *a,int l,int h,int key){
    if(h == l){
        if(key == a[l])
            return l;
        else 
            return -1;
    }       
    int mid =(l+h)/2;
    int i = linear_search(a,l,mid,key);
    if(i == -1)
         i = linear_search(a,mid+1,h,key);
    return i; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:09:55.117

是的，它是 O(n)。但是这个算法没有意义。您所要做的就是遍历数组并查找是否找到了该算法正在执行的元素，但它不必要地复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:23:08.753

是的，它搜索数组中的所有值直到找到它们，它的时间复杂度是 omega(n)。它看起来在 lg(n) 但由于你的 if(h == l) 它搜索你的数组的所有值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:27:26.997

是的，它是 O(n)。递归方法所做的只是一个循环，因此最好使用真正的循环：

```
int linear_search(int *a,int l,int h,int key){
  for (int i = l; i <= h; i++) {
    if (a[i] == key) return i;
  }
  return -1;
} 
```

如果您想使用递归来避免循环，则有一种更糟糕的方法，有时可以在显示递归的（坏）示例中找到：

```
int linear_search(int *a,int l,int h,int key){
  if (l > h) {
    return -1;
  } else if (a[l] == key) {
    return l;
  } else {
    return linear_search(a, l + 1, h, key);
  }
} 
```

它仍然是 O(n)，但更糟糕的是，如果数组太大，它会填满堆栈。分而治之的方法至少不会嵌套比整数中的位数更深。

# cuda - 在 cuda 中分配字符串数组

> ID：11389756
> 
> 赞同：1
> 
> 时间：2012-07-09T06:02:40.263
> 
> 标签：cuda, gpu

让我们假设我们需要将以下字符串存储在 CUDA 数组中。

“你好呀”

“这是”

“谁是”

我们如何在 GPU 上声明一个数组来做到这一点。我尝试使用 C++ `strings`，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:47:58.220

可能最好的方法是使用类似于常见压缩稀疏矩阵格式的结构。将打包的字符数据存储到一块线性内存中，然后使用一个单独的整数数组来存储起始索引，并可能使用第三个数组来存储字符串长度。后者的存储开销可能比为数据中的每个条目存储一个字符串终止字节并尝试在 GPU 代码中解析终止符更有效。

所以你可能有这样的事情：

```
struct gpuStringArray {
    unsigned int * pos; 
    unsigned int * length;  // could be a smaller type if strings are short
    char4 * data; // 32 bit data type will improve memory throughput, could be 8 bit
} 
```

注意我`char4`为字符串数据使用了一个类型；矢量类型将提供更好的内存吞吐量，但这意味着字符串需要对齐/适当地填充到 4 字节边界。这可能是也可能不是问题，具体取决于您的应用程序中典型的真实字符串的外观。此外，可能应该选择（可选）长度参数的类型以反映最大允许字符串长度。如果您有很多非常短的字符串，则可能值得使用 8 位或 16 位无符号类型的长度来节省内存。

* * *

比较以这种方式存储的字符串的非常简单的代码可能*如下*`strcmp`所示：

```
__device__ __host__
int cmp4(const char4 & c1, const char4 & c2)
{
    int result;

    result = c1.x - c2.x; if (result !=0) return result; 
    result = c1.y - c2.y; if (result !=0) return result; 
    result = c1.z - c2.z; if (result !=0) return result; 
    result = c1.w - c2.w; if (result !=0) return result; 

    return 0;
}

__device__ __host__
int strncmp4(const char4 * s1, const char4 * s2, const unsigned int nwords)
{
    for(unsigned int i=0; i<nwords; i++) {
        int result = cmp4(s1[i], s2[i]);
        if (result != 0) return result;
    }

    return 0;
}

__global__
void tkernel(const struct gpuStringArray a, const gpuStringArray b, int * result)
{
    int idx = threadIdx.x + blockIdx.x * blockDim.x;

    char4 * s1 = a.data + a.pos[idx];
    char4 * s2 = b.data + b.pos[idx];
    unsigned int slen = min(a.length[idx], b.length[idx]);

    result[idx] = strncmp4(s1, s2, slen);
} 
```

[免责声明：从未编译，从未测试，没有真实或暗示的保证，使用风险自负]

其中有一些极端情况和假设可能会根据代码中的真实字符串的确切外观来吸引您，但我会将这些作为练习留给读者解决。您应该能够适应并将其扩展到您正在尝试做的任何事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T07:53:32.790

您必须使用 C 风格的字符串`char *str`。在谷歌上搜索“CUDA string”会给你这个 CUDA“Hello World”示例作为第一次点击：[http](http://computer-graphics.se/hello-world-for-cuda.html) ://computer-graphics.se/hello-world-for-cuda.html 在那里你可以看到如何使用`char*`- CUDA 中的字符串。请注意，标准 C 函数在 CUDA 中可用`strcpy`或`strcmp`不可用！

如果你想要一个字符串数组，你只需要使用`char**`（如在 C/C++ 中）。至于`strcmp`和类似的功能，这在很大程度上取决于你想做什么。CUDA 不太适合字符串操作，如果您能提供更多关于您想要做什么的细节，也许会有所帮助。

# jsp - DisplayTag 表中的最后一行重复

> ID：11389757
> 
> 赞同：0
> 
> 时间：2012-07-09T06:02:44.927
> 
> 标签：jsp, jakarta-ee, struts, displaytag

我在 displaytag 表中得到所有行相同的值，即它为所有行显示相同的值（即最后一行值）

下面是我在 formbean 中设置值的 Action 类片段

```
public class FormIdSearch extends Action {

    ResourceBundle rsBundle = ResourceBundle.getBundle("com.mindcraft.resources.ApplicationResource");
    Collection formbeanCol = new ArrayList();

    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {
        Collection a = new ArrayList();
        FormBean formbean = (FormBean)form;
        ActionForward forward = new ActionForward();
        ActionMessages message = new ActionMessages();
        CMBConnection connection=new CMBConnection();
        HRMSUtill hrms = new HRMSUtill();
        IngUtill ing = new IngUtill();
        AppUtill au = new AppUtill();
        try{

            String polNo=formbean.getPolicyNo();
            String appN=(String)request.getAttribute("appno");
            System.out.println("Application No.1" + appN);
            String applnNo=formbean.getAppno();
            System.out.println("Application No.2" + applnNo);
            String appNo=(String)request.getParameter("appno");
            System.out.println("Application No.3" + appNo);
            HashMap<String, String> inpMap = new HashMap<String, String>();

            CMBSearchResults srchResults = null;
            CMBItem item = null;

            inpMap.put(rsBundle.getString("CM_INDEXCLASS_ADVISORSLICENSING"), rsBundle.getString("CM_INDEXCLASS_ADVISORSLICENSING"));
            //inpMap.put(rsBundle.getString("CM_INDEXCLASS_ADVISORSLICENSING"), rsBundle.getString("CM_INDEXCLASS_ADVISORSLICENSING"));
            inpMap.put(rsBundle.getString("CM_COMMON_ADVISORCODE"), "AA5555");
            inpMap.put(rsBundle.getString("CM_COLNAME_ADVISORCODE"), rsBundle.getString("CM_COLNAME_ADVISORCODE"));
            inpMap.put(rsBundle.getString("CM_COMMON_APPNUMBER"), appNo);
            inpMap.put(rsBundle.getString("CM_COLNAME_APPNUMBER"), rsBundle.getString("CM_COLNAME_APPNUMBER"));

            String winId=(String)request.getSession().getAttribute("windowsId");
            String empId = au.getEmpCodeOnWinId(winId);

            System.out.println("winId===="+winId);
            String ingBrCode="";

            if(hrmsBrCode1.equalsIgnoreCase(ingBrCode1))
            {

                ServletContext servletcontext = request.getSession().getServletContext();
                String cmbicmsrvsPath = servletcontext.getRealPath("WEB-INF/cmbicmsrvs.ini");
                System.out.println("cmbicmsrvsPath "+cmbicmsrvsPath);

                String icmsrvfilePath=servletcontext.getRealPath("WEB-INF/cmbicmsrvs.ini");
                String icmmenvfilePath=servletcontext.getRealPath("WEB-INF/cmbicmenv.ini");

                connection = new CMBConnection();
                //CMConnectionPool cmConnect = new CMConnectionPool();
                CMSearchDocuments searchDoc = new CMSearchDocuments();

                CMConnectionPool.setIcmenvfile(icmmenvfilePath);
                CMConnectionPool.setIcmsrvfile(icmsrvfilePath);
                //System.out.println("HHHEYEEEYYEYE TRUE.........3");
                connection=CMConnectionPool.getConnection();

                srchResults=searchDoc.searchForDocumentsInCM(connection, inpMap);

                Integer searchCount=srchResults.getCount();

                System.out.println("searchCount "+searchCount);
                LoggerUtil.logger.debug("searchCount "+searchCount);
                HttpSession session = request.getSession(false);
                session.setAttribute("searchCount",searchCount.toString());
                for (int i = 0; i < searchCount; i++) 
                   {
                    item = srchResults.getItem(i);

                    a=getDocumentMetaData(item,formbean);
                      String pid=item.getPidString();
                      request.setAttribute("pid", pid);
                      formbean.setPid(pid);

                   }
                request.setAttribute("formbeanCol", a);
                Object ia[] = a.toArray(); 
                int sum = 0; 
                // sum the array 
                for(int i=0; i<ia.length; i++) {
                sum += ((Integer) ia[i]).intValue(); 
                System.out.println("Sum is: " + sum); 
                } 

                if(searchCount>0){
                    //for (int i = 0; i < srchResults.getCount(); i++){
                    item = srchResults.getItem(searchCount-1);
                    //getDocumentMetaData(item);

                    String pid = item.getPidString();
                    System.out.println("pid "+pid);
                    request.setAttribute("pid", pid);

                    forward=mapping.findForward("success");

                }
                else
                {   
                    forward=mapping.findForward("failure");
                    message.add("ErrorOccurred", new ActionMessage("Invalid.SearchResult"));
                }
                System.out.println("Search Done");
                LoggerUtil.logger.debug("Search Done");
            }
            else
            {

                System.out.println("No Record Found");
                LoggerUtil.logger.debug("No Record Found");

                forward=mapping.findForward("failure");
                message.add("ErrorOccurred", new ActionMessage("Invalid.SearchResult"));
            }
            saveMessages(request, message);
        }
        catch(Exception e){
            forward=mapping.findForward("failure");
            LoggerUtil.logger.debug("Exception in FormIdSearch ",e);
            e.printStackTrace();
        }
        finally{
            try{
                if(connection!=null){
                    CMConnectionPool.freeConnection(connection);
                }
            }
            catch(Exception e)
            {
                forward=mapping.findForward("failure");
                LoggerUtil.logger.debug("Exception in FormIdSearch in finally block Closing CM Connection",e);
            }
        }
        return forward;
    }
     public Collection getDocumentMetaData(CMBItem item,FormBean formbean)
     throws CMBException, Exception 
{

     // Get document metadata attributes
        String FormID = item.getAttrValue(0);
        System.out.println(item.getAttrValue(0));
        System.out.println(item.getAttrValue(1));
        System.out.println(item.getAttrValue(2));
        System.out.println(item.getAttrValue(3));
        System.out.println(item.getAttrValue(4));
        formbean.setFormID(FormID);
        String MainDocument=item.getAttrValue(1);
        formbean.setMainDocument(MainDocument);
        String SubDocument=item.getAttrValue(2);
        formbean.setSubDocument(SubDocument);
        formbean.setAppNumber(item.getAttrValue(3));
        formbean.setBranchCode(item.getAttrValue(4));
        formbean.setAdvisor_NAME(item.getAttrValue(5));
        formbean.setAdvisor_Code(item.getAttrValue(6));

         formbeanCol.add(formbean);
         System.out.println("formbeanCol.size() "+formbeanCol.size());

  return formbeanCol;
}
} 
```

JSP

```
<display:table name="formbeanCol" export="false" pagesize="20" sort="list" id="data" requestURI="" class="tablelist">

        <display:column title="advisor_Code" sortable="true" property="advisor_Code"></display:column>
        <display:column title="formID" sortable="true" property="formID"></display:column>
        <display:column title="mainDocument" sortable="true" property="mainDocument"></display:column>
        <display:column title="SubDocument" sortable="true" property="subDocument"></display:column>
        <display:column title="AppNumber" sortable="true" property="appNumber"></display:column>
        <display:column title="branchCode" sortable="true" property="branchCode"></display:column>
        <display:column title="advisor_NAME" sortable="true" property="advisor_NAME"></display:column>

</display:table> 
```

![下表我作为输出](../Images/0b88b7f38729d9324de3ca0d1309a10f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:27:25.727

问题是您在 getDocumentMetaData 中使用了 FormBean 的单个实例（由 Struts 传递给 Action 的实例）。因此，您的集合 (formbeanCol) 最终会导致每个条目都指向同一个 FormBean 实例。因此，在您的最后一次迭代中，您将为此 FormBean 的值设置为最后一个数据行，并且所有条目都指向此。

我建议不要为此使用 FormBean（改用简单的 bean），并且每次在 getDocumentMetaData 中创建一个新实例。如果您确实想继续使用 FormBean，那么一个简单的解决方法是更改​​ getDocumentMetaData，如下所示：

```
public Collection getDocumentMetaData(CMBItem item,FormBean formbean)
throws CMBException, Exception 
{
    FormBean bean = new FormBean();

    // Get document metadata attributes
    String FormID = item.getAttrValue(0);
    bean.setFormID(FormID);

    // etc

    formbeanCol.add(bean);
    return formbeanCol;
} 
```

这个问题确实突出了使用“全局”变量（在本例中为 formbean 和 formbeanCol）的危险。

仅供参考，您应该避免在 Actions 中使用实例变量，因为 Struts 1.x 中的 Actions 是全局范围的，即一个实例将在不同请求之间共享。您的 formbeanCol 可能会变得越来越大，并且您可能会遇到并发问题。只需在执行方法中将 formbeanCol 声明为局部变量即可。

# abap - 除法错误（CX_SY_CONVERSION_NO_NUMBER）

> ID：11389759
> 
> 赞同：1
> 
> 时间：2012-07-09T06:02:51.127
> 
> 标签：abap, division

我正在尝试除以我的 2 号。我用不同的类型确定它们。当我尝试划分它们时出现错误。

但我的观点是，当我在调试时，为什么第一个数字显示'*'？问题就是因为这个而发生的。

```
EXCEPTION :  CX_SY_CONVERSION_NO_NUMBER

DATA : sayi1, sayi2 TYPE i.
DATA : sonuc TYPE p LENGTH 3.

BREAK-POINT.
sayi1 = 16.
sayi2 = 19.

sonuc  = sayi1 / sayi2.

WRITE : / sonuc. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T06:32:23.233

你应该在 ABAP 中以不同的方式定义每个参数，你不能像一个“类型 i”那样做:) 它不像其他语言，如 C、C++、Java :)

所以它应该是这样的：

```
DATA : sayi1 type i,
       sayi2 TYPE i.
DATA : sonuc TYPE p LENGTH 3. 
```

希望对您有所帮助

塔尔哈

# java - 无法使用 javamail 发送邮件

> ID：11389760
> 
> 赞同：-1
> 
> 时间：2012-07-09T06:03:08.053
> 
> 标签：java, jsp, exception, sendmail

我正在尝试通过 java api 发送邮件，我已经在 web-inf/lib 中复制了 activation.jar 和 mail.jar，这已经解决了所有问题，但我仍然遇到了一组异常，并且无法运行程序，请看一看

```
**JSP CODE**

   <html>
   <head>
   <title>JSP JavaMail Example </title>
   </head>
   <body>
   <%@ page import="java.util.*" %>
   <%@ page import="javax.mail.*" %>
   <%@ page import="javax.mail.internet.*" %>
   <%@ page import="javax.activation.*" %>
   <%
   String host = "mail.google.com";
   String to = request.getParameter("smzk07@gmail.com");
   String from = request.getParameter("heady.syed@gmail.com");
   String subject = request.getParameter("Create test description");
   String messageText = request.getParameter("hello sir");
   boolean sessionDebug = false;
// Create some properties and get the default Session.
   Properties props = System.getProperties();
   props.put("mail.host", host);
   props.put("mail.transport.protocol", "smtp");
   Session mailSession = Session.getDefaultInstance(props, null);

// Set debug on the Session
// Passing false will not echo debug info, and passing True will.

   mailSession.setDebug(sessionDebug);

// Instantiate a new MimeMessage and fill it with the 
// required information.

   Message msg = new MimeMessage(mailSession);
   msg.setFrom(new InternetAddress(from));
   InternetAddress[] address = {new InternetAddress(to)};
   msg.setRecipients(Message.RecipientType.TO, address);
   msg.setSubject(subject);
   msg.setSentDate(new Date());
   msg.setText(messageText);

// Hand the message to the default transport service
// for delivery.

   Transport.send(msg);
   out.println("Mail was sent to " + to);
   out.println(" from " + from);
                out.println(" using host " + host + ".");
   %>
  </table>
  </body>
  </html> 
```

**例外**

```
org.apache.jasper.JasperException: java.lang.NullPointerException
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

**根本原因**

```
java.lang.NullPointerException
    javax.mail.internet.InternetAddress.parse(InternetAddress.java:673)
    javax.mail.internet.InternetAddress.parse(InternetAddress.java:633)
    javax.mail.internet.InternetAddress.<init>(InternetAddress.java:111)
    org.apache.jsp.send_0020mail_jsp._jspService(send_0020mail_jsp.java:97)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我是 JSP 和 java 技术的新手，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:58:29.513

看看这两行：

```
String to = request.getParameter("smzk07@gmail.com");
String from = request.getParameter("heady.syed@gmail.com"); 
```

您说的是，您想要获取命名为电子邮件地址的参数，相反，您可能想说`String from="smzk07@gmail.com";`，改为尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:57:53.083

您确定要将 request.getParameter 与您正在使用的参数一起使用吗？根据您发布的代码，您的请求将类似于：

```
bob.com/mail?smzk07@gmail.com=someone@bob.com 
```

（显然有正确的转义码）

你得到一个空指针异常的原因是你请求的参数名称没有设置（请求一个不存在的参数会给你一个空结果）

您可能正在尝试执行以下操作：

```
bob.com/mail?from=smzk07@gmail.com&to=.... 
```

在这种情况下，您需要使用：

request.getParameter("来自"); request.getParameter("to");

等等

# php - 如何在特定文件夹上设置 777 权限？

> ID：11389765
> 
> 赞同：31
> 
> 时间：2012-07-09T06:03:37.373
> 
> 标签：php, permissions

如何在文件夹上设置 777 权限。

*   我需要将以下文件夹的权限设置为 777：admin\includes\module_installation

我不知道如何在窗口 7 中的特定文件夹上设置权限 777？

请帮助我如何设置它？我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-09T06:13:30.357

`777`是基于 Unix 的系统中的一种权限，对所有者、组和每个人具有完全的读/写/执行权限。一般来说，我们将此权限授予在 Web 服务器上不需要对公众隐藏的资产，例如图像。 .

您说`I am using windows 7.`如果这意味着您的 Web 服务器是基于 Windows 的，那么您应该登录该服务器并右键单击该文件夹并设置权限`everyone`，如果您使用的是 Windows 客户端并且服务器是基于 unix/linux 的，则使用一些 ftp 软件并在父目录右键单击并更改文件夹的权限。

如果您也想设置权限，`sub-directories`那么通常他们是递归设置权限的选项。

而且，如果您想从命令行执行此操作，请使用 putty 并登录到服务器并转到父目录`includes`并编写以下命令

```
chmod 0777 module_installation/ 
```

对于递归

```
chmod -R 0777 module_installation/ 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T06:06:32.723

将权限设置为 777 的最简单方法是通过 FileZilla 等 FTP 应用程序连接到您的服务器，右键单击文件夹，module_installation，然后单击更改权限 - 然后写入 777 或检查所有权限。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-09T06:06:47.347

1.  右键单击该文件夹，单击属性。
2.  单击安全选项卡
3.  将名称添加`Everyone`到用户列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T12:30:28.593

转到FileZilla并选择您将授予777权限的文件夹，然后右键单击设置权限777并选中复选框，然后确定。

# python - pygame.image.load 不工作

> ID：11389768
> 
> 赞同：4
> 
> 时间：2012-07-09T06:03:51.040
> 
> 标签：python, pygame

我正在尝试为游戏创建世界地图，但是当我尝试将世界地图加载到屏幕时，命令行告诉我我无法这样做。这是代码：

```
import sys 
import pygame
from pygame.locals import * 
pygame.init ()

Surface = pygame.display.set_mode ((1000, 775), 0, 32)
pygame.display.set_caption('World Map')

WorldMap = pygame.image.load('WorldMap.jpg')
white = (255, 255, 255)
while True:
    Surface.fill (white)
    Surface.blit (WorldMap, (900, 675))
    for event in pygame.event.get():
       if event.type == QUIT:
            pygame.quit ()
            sys.exit (0)
    pygame.display.update() 
```

错误看起来像这样----

```
Traceback (most recent call last)
  File "C:\Users\The Folder\WorldMap.py", line 9, in <module> 
    WorldMap = pygame.image.load ('WorldMap.jpg')
  pygame.error: Couldn't open WorldMap.jpg 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T06:37:13.953

错误信息非常清楚：pygame 无法在您所说的位置找到您的图像。

您必须确保图像`WorldMap.jpg`存在于您**当前的工作目录**(CWD) 中。

如果双击 .py 文件，则 CWD 是包含 .py 的目录。所以`WorldMap.jpg`必须在那里。如果您从不同目录的命令行执行它，请为此添加代码或将图像放在其他目录中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-11-12T16:25:54.660

我有同样的问题。我不是从 pogram 的工作目录开始我的 .py 的。在我使用 cd 进入正确的目录之后，一切都很好。所以首先确保让你的当前工作目录与工作目录相同并启动你的程序。

# iphone - 如何使用 mopub sdk 获取添加

> ID：11389771
> 
> 赞同：0
> 
> 时间：2012-07-09T06:04:22.483
> 
> 标签：iphone

我正在做一个应用程序。因为我的要求是使用 mopub sdk，我需要获取广告并显示该应用程序。但主要问题是我不想从 mopub 服务器获取广告。我需要使用自己的服务器地址。所以请告诉我如何更改服务器地址，我可能需要更改任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:31:18.507

我不认为这是可能的。如果你想使用你的服务器。然后在您的应用程序中创建一个底部相同大小的广告的 webview，从您的服务器加载它并每隔 10-15 秒刷新一次。

# php - 将 Flash 网络摄像头流转发到 php 或语言服务器的方法？

> ID：11389777
> 
> 赞同：0
> 
> 时间：2012-07-09T06:04:59.100
> 
> 标签：php, flash

您好我想知道将我的网络摄像头流转发到我的 php 服务器的好方法是什么？除了将视频保存为文件并将其传输到我的服务器或每隔 x 时间捕获帧图像并将其发送到我的服务器之外，我不太确定如何执行此操作。我想知道除此之外是否还有其他可用的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:08:26.887

我不确定到底是什么意图，但您可能对[http://www.red5-recorder.com/之类的内容感兴趣](http://www.red5-recorder.com/)

对于视频聊天，请查看此[http://www.tokbox.com/opentok/api](http://www.tokbox.com/opentok/api)，我已经对此进行了测试，它很棒！

# iphone - 如何实现在 iphone 中获取 JSON 对象的代码？

> ID：11389778
> 
> 赞同：0
> 
> 时间：2012-07-09T06:04:59.753
> 
> 标签：iphone, json, ios5

大家好，我是新的 iphone 开发人员。我从所需的 URL 获得响应，如下所示，我需要获取名称`"CategoryID":1`和名称`"CategoryID":2`都在单独的数组集中。如何实现在 iphone 中获取 JSON 对象的代码？感谢您获得响应的代码：

```
theXML = [[NSString alloc] initWithBytes: [RoutData mutableBytes] length:[RoutData length] encoding:NSUTF8StringEncoding];
NSLog(@"---->>>>>>-->>>:%@",theXML); 
```

**回复：**

```
LocationTracking[1807:f803] ---->>>>>>-->>>:<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><getGearLockerCategoriesResponse xmlns="http://tempuri.org/"><getGearLockerCategoriesResult><status>SUCCESS</status><errorType /><errorMessage /><jsonString>[{"CategoryID":1,"ItemCount":1,"level":1,"Name":"Boots","Description":"Boots descrition","childs":[{"CategoryID":2,"ItemCount":1,"level":2,"Name":"Cold Water","Description":"Cold Water Description","childs":[]}]}]</jsonString><serverTimestamp>63477507673796</serverTimestamp></getGearLockerCategoriesResult></getGearLockerCategoriesResponse></soap:Body></soap:Envelope>

<jsonString>

[{"CategoryID":1,"ItemCount":1,"level":1,"Name":"Boots","Description":"Boots 

descrition","childs":[{"CategoryID":2,"ItemCount":1,"level":2,"Name":"Cold 

Water","Description":"Cold Water Description","childs":[]}]}]

</jsonString>

<serverTimestamp>63477390375625</serverTimestamp>

</DiveTravelerResponse> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:18:16.100

Touch JSON 库是一个很好的解决方案：[https ://github.com/TouchCode/TouchJSON](https://github.com/TouchCode/TouchJSON)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:21:16.923

`NSJSONSerialization`. 如果您的 JSON 在名为“str”的 NSString 中：

```
NSError *jsonError = nil;
NSArray *rootObjectArray = [NSJSONSerialization JSONObjectWithData:[str dataUsingEncoding:NSUTF8StringEncoding] options:0 error:&jsonError];
if (rootObjectArray)
{
   /* you have a foundation object */
}
else
{
   /* something went wrong */
   NSLog(@"jsonError: %@", [jsonError localizedDescription]);
} 
```

# android - 抛出空指针异常

> ID：11389787
> 
> 赞同：0
> 
> 时间：2012-07-09T06:06:15.803
> 
> 标签：android, textview

```
TextView t=(TextView)findViewById(R.id.yourtextview);
String text = "<fontcolor=#cc0029>Erste Farbe</font><font color=#ffcc00>zweiteFare</font>";
yourtextview.setText(Html.fromHtml(text)); 
```

获得 NPE，我什至添加了互联网许可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:08:17.810

使用**t**代替**yourtextview**

```
TextView t=(TextView)findViewById(R.id.yourtextview);
String text = "<fontcolor=#cc0029>Erste Farbe</font><font color=#ffcc00>zweiteFare</font>";
t.setText(Html.fromHtml(text)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:07:49.040

您必须在 textview 中设置文本，而不是在 textview 的 id 中。

试着做这个

```
t.setText(Html.fromHtml(text)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:08:41.090

请更改以下代码行

```
t.setText(Html.fromHtml(text)); 
```

代替

```
yourtextview.setText(Html.fromHtml(text)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T06:22:25.457

您需要调用 TextView t 而不是调用 TextView ID。

使用这个`t.setText(Html.fromHtml(text));` 而不是使用 `yourtextview.setText(Html.fromHtml(text));`

# asp.net-mvc - 这个 LINQ 查询有什么问题

> ID：11389791
> 
> 赞同：2
> 
> 时间：2012-07-09T06:06:38.333
> 
> 标签：asp.net-mvc, linq, entity-framework-4

```
var item1 = (from a in db.Item
                         where
                         (a.ItemNo == Item.ItemNo ||  Item.ItemNo==null ) &&
                         (a.StatusId == Item.StatusId || Item.StatusId == 0) &&
                           (a.LocationId == Item.LocationId || Item.LocationId == 0)
                         select a).ToList();

            return View(item1); 
```

我得到了例外

```
[ Argument # = 1,Name of function(if known) = isnull ] 
```

我也试过这段代码

```
 var item1 = (from a in db.Item
                         where
                         (a.ItemNo == Item.ItemNo ||  Item.ItemNo=="") &&
                         (a.StatusId == Item.StatusId || Item.StatusId == 0) &&
                           (a.LocationId == Item.LocationId || Item.LocationId == 0)
                         select a).ToList();

            return View(item1); 
```

但没有工作得到错误

```
[String truncation: max=0, len=2, value='10'. ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:43:37.417

您可以尝试将其写为 lamdba 表达式，看看是否是同一个问题？

```
var item1 = db.Item.Where(a => (String.IsNullOrEmpty(Item.ItemNo) || a.ItemNo == Item.ItemNo) &&
                               (Item.StatusId == 0 || a.StatusId == Item.StatusId) &&
                               (Item.LocationId == 0 || a.LocationId == Item.LocationId)).FirstOrDefault();

return View(item1); 
```

**更新**

似乎 EF 不支持`String.IsNullOrEmpty`看到[这个问题](https://stackoverflow.com/questions/1368946/linq-syntax-where-string-value-is-not-null-or-empty)。您可以重新编写查询，例如：

```
var item1 = db.Item.Where(a => ((Item.ItemNo == null || Item.ItemNo == String.Empty) || a.ItemNo == Item.ItemNo) &&
                               (Item.StatusId == 0 || a.StatusId == Item.StatusId) &&
                               (Item.LocationId == 0 || a.LocationId == Item.LocationId))
                   .FirstOrDefault(); 
```

如果您仍然无法检查 null，那么您可以分解查询，例如

```
var query = db.Item.Where(a => (Item.StatusId == 0 || a.StatusId == Item.StatusId) &&
                               (Item.LocationId == 0 || a.LocationId == Item.LocationId));

if (!String.IsNullOrEmpty(Item.ItemNo))
{
    query = query.Where(a => a.ItemNo == Item.ItemNo);
}

var item1 = query.FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:13:04.460

**编辑** 尝试这样的事情

```
 string.IsNullOrEmpty(Item.ItemNo) ? a.ItemNo==a.ItemNo
                  : a.ItemNo == Item.ItemNo; 
```

你的代码是

```
var item1 = (from a in db.Item 
                    where
                    ( string.IsNullOrEmpty(Item.ItemNo) ? a.ItemNo==a.ItemNo
                  : a.ItemNo == Item.ItemNo; ) &&
                     ..more 
```

**请注意** ，如果值为`Item.ItemNo`null 或为空，则应该`a.ItemNo==a.ItemNo`满足您的条件...

* * *

确保您的 itmeno 字段可以为空，如下所示

```
int? ItemNo { get; set; } 
```

并尝试这样的事情

```
Item.ItemNo == null ? a.ItemNo : a.ItemNo == Item.ItemNo 
```

所以它会

```
var item1 = (from a in db.Item 
                    where
                    ( Item.ItemNo == null ? a.ItemNo : a.ItemNo == Item.ItemNo ) &&
                     ..more 
```

# qt4 - Qt 4.7：缺少 QUndoCommand？

> ID：11389792
> 
> 赞同：0
> 
> 时间：2012-07-09T06:06:43.767
> 
> 标签：qt4, qt-creator

> ../browser/bookmarks.h:48：致命错误：QtWidgets/QUndoCommand：没有这样的文件或目录

这是我尝试加载时的编译输出

```
#include <QtWidgets/QUndoCommand> 
```

你在哪里找到这个，你如何正确地包含它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T16:29:27.970

Mat 的回答并未涵盖所有可能的极端情况或根本原因。

我在尝试编译[http://fritzing.org/download/0.7.7b/source-tarball/fritzing-0.7.7b.source 时遇到了相同的错误消息“致命错误：QtWidgets/QUndoCommand：没有这样的文件或目录”。 Ubuntu 12.04 LTS 中的tar.bz2](http://fritzing.org/download/0.7.7b/source-tarball/fritzing-0.7.7b.source.tar.bz2) 。

我的解决方案是首先安装缺少的依赖包，它们是：

libqt4-dev libqt4-core libqt4-qt3support

之后，我可以成功执行 qmake、make、sudo make install dance...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T06:10:50.890

`QUndoCommand`在`QtGui`模块中。您不需要在`#include`指令中添加路径。如果您使用的是`qmake`QtCreator，这应该可以工作：

```
#include <QUndoCommand> 
```

# mysql - 我应该为每个用户（数百万用户）存储 90 行数据吗？

> ID：11389797
> 
> 赞同：4
> 
> 时间：2012-07-09T06:07:04.050
> 
> 标签：mysql, database

*我正在规划一个 MySql 数据库的结构，并且可以使用更多经验丰富的专业人士的一些建议。DB所属站点为每个注册用户收集90天的天气数据，必须支持数百万用户。*

我已经为用户准备了一个表格，其中包含他们的登录名和联系信息，但假设我需要第二个表格来存储所有天气数据......

我打算做的基本上是为每个用户存储平均温度、湿度、风向等，每天第四次。并且每天数据库都会更新新一天的数据，同时保留昨天的条目（但仅限于 89 天的旧数据 + 当天的数据） - 适用于所有用户。

现在，拥有一个为每个用户（拥有数百万用户）包含 90 行的巨大“数据”表是否最有意义？还是出于性能原因或类似原因，是否有更聪明的方法可以做到这一点？

*每次用户登录并查看他自己的个人资料或浏览其他人的个人资料时，都会访问（阅读和显示等）90 天的数据。但它每天只会更新一次（覆盖最旧的条目，保持每个用户 90 行的限制。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:19:16.737

编辑：刚才看到每个用户都有不同的天气数据。在答案中保留“共享数据”，但您对第二种情况感兴趣。

**用户共享天气数据**

例如，基于他们最近的气象站 ID。

我会存储一个 (userId, stationId, isActive, isPreferred) 表来了解用户对哪些数据感兴趣，然后我会针对 stationWeatherData 运行查询以获取该站的 90 行天气数据。

**每个用户都有自己的天气数据**

处理 9 亿用户应该没有什么特别的问题。如果你真的需要，你可以根据 userId 在不同的表上“分片”，例如，表 weather174 将保存 (userId % 1000) 给出 174 的所有用户的数据，你会发现自己有 1000 个表 - 可能在不同的服务器 - 大小的千分之一。

因此，您从一张大表开始，并准备分片（或迁移到云存储和非 SQL 密钥库数据库，例如 MongoDB、VoltDB）。或者一旦用户 ID 达到一百万，就根据用户 ID 进行分区。

甚至，您根本不使用数据库。如果您需要搜索或关联/加入数据，那么数据库是有意义的——在这里您只是在访问用户的“气象站”。

如果您知道您永远不会查询“有多少用户的湿度为 60%？”，而始终只查询“用户 1234567 有哪些数据？”，那么您可以将数据以二进制、JSON 或 JSON 格式保存在滚动缓冲区中HTML 格式（在云存储、S3 或 MongoDB 上 - 现在每个用户只有一个文档）。很大程度上将取决于要更新的​​数据是如何到达的，即来自集中器的一大批数据或每个用户上传自己的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:26:13.813

我推荐一个单独的天气数据表，按日期分区（请参阅[MySQL 文档关于范围分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-range.html)）。

这样，您可以轻松摆脱旧数据（只需删除最旧的分区），并且查询天数范围（例如，过去 7 天的平均温度）将非常有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T06:15:21.163

如果您要存储每个用户的位置，则根据位置存储天气数据并按需将其映射到用户会更简单。

UserId --> LocationId --> 天气详细信息。

假设平均而言，每个位置都会有多个用户，这应该会大大减少您的数据库大小，并且应该可以更好地扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T06:13:18.420

对于我的回答（如下），我假设数据是特定于用户的，例如来自他们个人的后院气象站。如果是与其他用户共享的数据，那么我的答案是次优的。

* * *

这似乎是合理的，但为什么要停在 90 天呢？只要他们是有效用户，就保留每个用户的日常信息。所描述的查询总是类似于

```
SELECT temperature_avg, humidity, wind_direction, wind_speed
FROM weather_summary
WHERE user_id = (current_user)
ORDER BY sample_date DESC
LIMIT 90; 
```

只要 和 上有索引`sample_date`，`user_id`这将非常有效。

根据我的经验，为每个用户设置一个单独的表格从来都不是很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T06:20:49.620

1.  在表列上创建索引（id、全文索引）。
2.  作为一个想法，您可以在此表上创建一些视图，这些视图将包含基于位置、天、周、月或季度或字母或其他标准的过滤数据，并基于此您的代码将决定使用哪个视图来获取搜索结果。
3.  或者，如果您的表有很多插入/更新操作，您可以创建多个表，并根据某些标准选择表名以使用您的服务器端编程语言更新/插入数据。

# android - 使用 SAX 解析 Android CDATA，未删除标记

> ID：11389800
> 
> 赞同：0
> 
> 时间：2012-07-09T06:07:08.330
> 
> 标签：android, xml, sax, cdata

我的 xml 包含一些 cdata

```
<desc><![CDATA[<p>This is my html text</p>]]></desc> 
```

我的 SAX 解析器能够解析 xml cdata，但解析的文本包含标签“CDATA”

```
<![CDATA[<p>This is my html text</p>]]> 
```

我只想获取 CDATA 中的 html 文本。我可以使用一些字符串函数来删除它，但我想知道这是否是正常的 SAX 行为？

这是我的 SAX 处理程序代码：

```
public class SAXXMLHandler extends DefaultHandler {
private List<Laptop> laptops;
private Laptop laptop;
private StringBuffer tempSB = new StringBuffer();

public SAXXMLHandler() {
    laptops = new ArrayList<Laptop>();
}

public List<Laptop> getLaptops() {
    return laptops;
}

// Event Handlers
public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
    tempSB.delete(0, tempSB.length());
    if (qName.equalsIgnoreCase("laptop")) {
        laptop = new Laptop();
        laptop.setModel(attributes.getValue("model"));
    }
}       

public void characters(char[] ch, int start, int length)
        throws SAXException {
    tempSB.append(ch, start, length);
}  

public void endElement(String uri, String localName, String qName)
        throws SAXException {
    if (qName.equalsIgnoreCase("laptop")) {
        laptops.add(laptop);
    } else if (qName.equalsIgnoreCase("id")) {
        laptop.setId(Integer.parseInt(tempSB.toString()));
    } else if (qName.equalsIgnoreCase("desc")) {
        laptop.setDescription(tempSB.toString());
    } 
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:18:28.107

请检查“< *p* >”，您可以设置一个布尔值，当到达 CDATA 时它将为真，这样您可以区分 CDATA 中的“< *p* >”标签和常见的“< *p* >”。

# java - 动态创建 JTextField 后，如何使用 getText()？

> ID：11389802
> 
> 赞同：2
> 
> 时间：2012-07-09T06:07:14.417
> 
> 标签：java, swing, jtextfield

我已经提到了这个[我想通过单击添加按钮动态添加一个 JLabel 和文本框来动态](https://stackoverflow.com/questions/5098017/i-want-to-add-a-jlabel-and-text-box-dynamically-by-clicking-add-button)创建我的`JTextField`。

但是我如何使用`getText()`来分别从每个文本字段中检索文本？

```
public class CreateGuestForm2 {

private JFrame jFrame = null;  //  @jve:decl-index=0:visual-constraint="111,10"
private JPanel jContentPane = null;
private int indexer = 1;  //  @jve:decl-index=0:
private List<JLabel> listOfLabels = new ArrayList<JLabel>();  //  @jve:decl-index=0:
private List<JTextField> listOfTextFields = new ArrayList<JTextField>();  //  @jve:decl-index=0:
private JButton jButtonAdd = null;
private JPanel jPanel = null;
private GridBagConstraints textFieldConstraints = new GridBagConstraints();  //  @jve:decl-index=0:
private GridBagConstraints labelConstraints = new GridBagConstraints();//  @jve:decl-index=0:
private JButton jButtonCreate = null;
private JButton jButtonHelp = null;
String textFields = null;

/**
 * This method initializes jFrame   
 *  
 * @return javax.swing.JFrame   
 */
private JFrame getJFrame() {
    if (jFrame == null) {
        jFrame = new JFrame();
        jFrame.setLayout(new GridBagLayout());
        jFrame.setPreferredSize(new Dimension(800, 600));
        jFrame.setTitle("Create Guest Form");
        jFrame.setSize(new Dimension(800, 582));
        jFrame.setContentPane(getJContentPane());
        jFrame.pack();
        jFrame.setVisible(true);
    }
    return jFrame;
}

/**
 * This method initializes jContentPane 
 *  
 * @return javax.swing.JPanel   
 */
private JPanel getJContentPane() {
    if (jContentPane == null) {
        jContentPane = new JPanel();
        jContentPane.setLayout(null);
        jContentPane.add(getJButtonAdd(), null);
        jContentPane.add(getJPanel(), null);
        jContentPane.add(getJButtonCreate(), null);
        jContentPane.add(getJButtonHelp(), null);
        jContentPane.add(getJPanel(), null);
        jContentPane.add(getJPanel(), null);
    }
    return jContentPane;
}

/**
 * This method initializes jButtonAdd   
 *  
 * @return javax.swing.JButton  
 */
private JButton getJButtonAdd() {
    if (jButtonAdd == null) {
        jButtonAdd = new JButton();
        jButtonAdd.setText("Add a guest");
        jButtonAdd.setBounds(new Rectangle(14, 45, 111, 24));
        jButtonAdd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent e) {
                System.out.println("actionPerformed()"); 
                addGuest(e);
            }
        });
    }
    return jButtonAdd;
}

public void addGuest(ActionEvent e){
    // Clear panel
    jPanel.removeAll();

    // Create label and text field
    JTextField jTextField = new JTextField();
    textFields = jTextField.getText();
    jTextField.setSize(100, 200);
    listOfTextFields.add(jTextField);
    listOfLabels.add(new JLabel("Guest " + indexer));

    // Add labels and text fields
    for(int i = 0; i < indexer; i++)
    {
        // Text field constraints
        textFieldConstraints.gridx = 1;
        textFieldConstraints.fill = GridBagConstraints.HORIZONTAL;
        textFieldConstraints.weightx = 0.5;
        textFieldConstraints.insets = new Insets(10, 10, 10, 10);
        textFieldConstraints.gridy = i;

        // Label constraints
        labelConstraints.gridx = 0;
        labelConstraints.gridy = i;
        labelConstraints.insets = new Insets(10, 10, 10, 10);

        // Add them to panel
        jPanel.add(listOfLabels.get(i), labelConstraints);
        jPanel.add(listOfTextFields.get(i), textFieldConstraints);

    }

    // Align components top-to-bottom
    GridBagConstraints c = new GridBagConstraints();
    c.gridx = 0;
    c.gridy = indexer;
    c.weighty = 1;
    jPanel.add(new JLabel(), c);
    indexer++;
    jPanel.updateUI();
}
/**
 * This method initializes jPanel   
 *  
 * @return javax.swing.JPanel   
 */
private JPanel getJPanel() {
    if (jPanel == null) {
        jPanel = new JPanel();
        jPanel.setLayout(new GridBagLayout());
        jPanel.setPreferredSize(new Dimension(600,600));
        jPanel.setBounds(new Rectangle(14, 76, 759, 413));
        jPanel.setBorder(LineBorder.createBlackLineBorder());

    }
    return jPanel;
}

/**
 * This method initializes jButtonCreate    
 *  
 * @return javax.swing.JButton  
 */
private JButton getJButtonCreate() {
    if (jButtonCreate == null) {
        jButtonCreate = new JButton();
        jButtonCreate.setText("Create");
        jButtonCreate.setBounds(new Rectangle(681, 505, 93, 27));
        jButtonCreate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent e) {
                System.out.println("actionPerformed()"); // TODO Auto-generated Event stub actionPerformed()
                createGuest(e);
            }
        });
    }
    return jButtonCreate;
}

public void createGuest(ActionEvent e){
    String record = textFields;
    GuestControl gCreate = new GuestControl();
    if(gCreate.processCreateGuest2(record)){
        JOptionPane.showMessageDialog(null, "Guest record created successfully");
        getJFrame().dispose();
    }
    else
    {
            JOptionPane.showMessageDialog(null, "Guest not created, please try again");

    }

}
} 
```

ps：我正在为一个创建来宾表格的学校项目做这个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:09:48.103

尝试这个....

**当您创建一个 JTextField 动态地给它一个 Name**时，它​​就像一个 id。使用此名称，您可以参考它...

```
for (int i=0 ; i<10 ; i++){

    newButton.setName(String.valueOf(i));

} 
```

**编辑：**

```
 nbutt.putClientProperty("id", Integer.valueOf(i)); 
```

**现在从属性映射中获取值。**

```
Object mProperty = nbutt.getClientProperty("id");

   if (mProperty instanceof Integer) {

      int i = ((Integer)mProperty);

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:20:48.190

`listOfTextFields.get(i).getText()`应该管用。

# coffeescript - 将 Coffeescript 类和 RequireJS（或 Curljs 或类似）用于客户端浏览器库的示例

> ID：11389803
> 
> 赞同：25
> 
> 时间：2012-07-09T06:07:20.093
> 
> 标签：coffeescript, requirejs, curljs

我们想使用 Coffeescript 开发一个浏览器（仅限客户端）库，特别是，除了纯函数之外，我们更倾向于使用 Coffeescript 的“类”功能。该库将相对较大，因此我们希望从使用定义明确的模块模式开始，但不是到我们希望每个咖啡脚本“类”都有一个咖啡文件的地步。我们不想即时编译咖啡文件，而是作为特定的构建步骤，并且希望不必将所有输出的 JS 合并到一个文件中。作为最终要求，我们将使用 Jasmine 之类的东西进行测试。

有谁知道以这种方式开发的一个很好的示例库，将 Coffeescript 与 RequireJS、CurlJS、Browserify 等结合使用？我看过 Github，有一些例子，但我看不到任何特定于我需求的东西。

我尝试了[Coffee-Toaster](http://github.com/serpentem/coffee-toaster)，因为它似乎在简化定义依赖项等方面有一些承诺，但它无法处理 Windows 路径（旧的 \ vs /），所以放弃了，主要是因为它似乎是有点“轻”的一面——像 RequireJS 这样的东西似乎背后有更好的社区支持。

感谢您的任何帮助，您可以提供。如果可能的话，我真的在寻找有效的源代码示例。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-19T18:56:41.577

首先，如果您使用的是 RequireJS，您将很难从定义函数中返回多个“事物”。RequireJS 使用 AMD（！NOT！CommonJS）格式的“标准”，它不包含用于导出“东西”的 module.exports 对象，而是依赖于返回的东西。

话虽如此，我不确定您在这里寻找什么，但是使用 RequireJS 进行课堂工作非常容易。像这样的东西：

```
define ['my/required/module'], (myModule) ->
    class MyOtherModule
        privateField = 0

        constructor: ->
        publicMethod: ->

    return MyOtherModule 
```

就像任何其他脚本一样，这可以在 require/define 函数中使用。举个例子：

```
require ['my/other/module'], (MyOtherModule) ->
    instance = new MyOtherModule() 
```

我们甚至可以将它与“扩展”一起使用

```
define ['my/other/module'], (MyOtherModule) ->
    class MyThirdModule extends MyOtherModule
        ... 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T02:14:13.813

我也在用咖啡烤面包机，我最近发现的帖子很少。
我认为这值得一读，也许我们可以解决：

[http://blog.toastymofo.net/2012/04/coffeescript-requirejs-and-you-part-one.html](http://blog.toastymofo.net/2012/04/coffeescript-requirejs-and-you-part-one.html)
[http://24ways.org/2012/think-first-code-later/](http://24ways.org/2012/think-first-code-later/)

http://jamjs.org[看起来](http://jamjs.org)很酷！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T17:26:08.070

I haven't actually used this technique yet, but:

The only thing to keep in mind here is that CoffeeScript statements are also return values when they are last in a function. So, basically, the following code:

```
define [], () ->
  class Main 
```

translates to:

```
define([], function() {
  var Main;
  return Main = (function() {

    function Main() {}

    return Main;

  })();
}); 
```

and that should work as expected (I see no reason why it wouldn't based on the compiled JavaScript).

For managing code base, I believe the [CS plugin](https://github.com/jrburke/require-cs) should come in handy. It's maintained by James Burke himself, and supports building of CoffeeScript projects the same way JavaScript projects are built.

# ios - 保存和检索图像 - Ios

> ID：11389805
> 
> 赞同：0
> 
> 时间：2012-07-09T06:07:42.310
> 
> 标签：ios, image, sqlite

我想将一些图像保存在本地计算机上的文件夹（示例文档文件夹）中。然后将 url 保存在 sqlite 数据库中。我怎样才能做到这一点 ？我还想检索图像然后显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:16:38.500

您可以导航到您的应用程序的 Documents 文件夹，然后您可以`UIImage`使用保存`UIImagePNGRepresentation`，这将返回`NSData`。

示例代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];
NSString *imgPath = [documentsDir stringByAppendingPathComponent:@"savedImage.png"];
NSData *imageData = UIImagePNGRepresentation(image); // image is the UIImage you want to save
[imageData writeToFile:imgPath atomically:YES]; 
```

然后，您只需将路径/文件名放入数据库并在需要时检索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:16:36.880

获取图片的 NSData: `NSData *imageData = UIImagePNGRepresentation(image);` 然后写入文件： `[imageData writeToFile:filepath atomically:YES];`

# javascript - 启用禁用图像按钮

> ID：11389809
> 
> 赞同：0
> 
> 时间：2012-07-09T06:07:53.657
> 
> 标签：javascript

这是我正在尝试做的事情，是的，我已经在这个网站上四处寻找答案，但我仍然迷路了。我需要帮助的是我正在为 android 和 IOS（IPAD、IPHONE、ITOUCH）设备制作游戏菜单。菜单上会有一个文本图像或只是纯文本。红色按钮被禁用而绿色按钮被启用，例如，如果红色显示您可以听到背景中播放的音乐，并且如果您单击它并显示绿色，则音乐将不再在游戏中播放。跳过功能也是如此，它将启用/禁用这些功能。希望在 javascript 中执行此操作。任何建议都会有所帮助，谢谢。

由于网站规则，我无法发布图片。我会把它写在菜单上。图像 = (红色) (绿色)

* * *

音乐（红色）（绿色）

跳过（红色）（绿色）

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:25:21.830

看这个演示：

[http://jsfiddle.net/rathoreahsan/xQ3PT/](http://jsfiddle.net/rathoreahsan/xQ3PT/)

**Javascript代码**

```
function controls(id) {
    if (id == "play") {
        document.getElementById('play').setAttribute('disabled','disabled');
        document.getElementById('stop').removeAttribute('disabled','disabled');

        // You can define your play music statements here

    } else {
        document.getElementById('stop').setAttribute('disabled','disabled');
        document.getElementById('play').removeAttribute('disabled','disabled');

        // You can define your stop music statements here        
    }
} 
```

**HTML 代码**

```
 Music&nbsp;<button id="stop" onclick="controls(this.id)" disabled="disabled">Stop</button>&nbsp;<button id="play" onclick="controls(this.id)">Play</button> 
```

**CSS**

```
#stop{
    background-color: red;
    border: 0px;
}

#play{
    background-color: green;
    border: 0px;
} 
```

**编辑：**

使用单个按钮的另一种解决方案：

**演示：http:** [//jsfiddle.net/rathoreahsan/xQ3PT/2/](http://jsfiddle.net/rathoreahsan/xQ3PT/2/)

**Javascript代码**

```
function controls(className) {
    if (className == "red") {
        document.getElementById('PlayStop').setAttribute('class','green');
        document.getElementById('PlayStop').innerHTML = "Stop";
        // You can define your play music statements here
    } else {
        document.getElementById('PlayStop').setAttribute('class','red');
        document.getElementById('PlayStop').innerHTML = "Play";
        // You can define your stop music statements here        
    }
} 
```

**HTML 代码**

```
 Music &nbsp; <button id="PlayStop" class="red" onclick="controls(this.getAttribute('class'))">Play</button> 
```

# php - 如何使用数组参数检查数据库？

> ID：11389811
> 
> 赞同：0
> 
> 时间：2012-07-09T06:08:02.607
> 
> 标签：php, arrays, function, parameters

嗨，我有一个数组，我想将一个变量传递给一个函数。

```
'#\@(.*?)\;#si' =>  'some before text' . retrieveName('$1') . 'some after text,'

function retrieveName($poster_id){
    $sanitized_id = sanitizeIn($poster_id);

    $getname = mysql_query("SELECT * FROM users WHERE userid = '$sanitized_id';") 
                or die(mysql_error());
    $namerow = mysql_fetch_array($getname);
    $exists = mysql_num_rows($getname);

    if($exists == "0"){
      return $sanitized_id;
    } else {
      return $namerow['username'];
    }
} 
```

它应该取 的值`$1`，检查数据库中是否有具有该 ID 的用户，然后返回他们的用户名。但是没有参数被传递给retrieveName

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:13:07.890

retrieveName 函数应为：

```
function retrieveName($poster_id){
    $sanitized_id = sanitizeIn($poster_id);
    $get_name = mysql_query("SELECT * FROM users WHERE userid = '$sanitized_id';") or die(mysql_error());
    $name_row = mysql_fetch_array($get_name);
    return $name_row['username'];
} 
```

我强烈建议在那里放置一些错误检查，如果找不到 ID 会发生什么？

编辑：

**如果**您尝试执行“preg_replace 模板”，则该行应为：

```
'#@(.*?);#sie' =>  '"some before text".retrieveName("\1")."some after text"', 
```

'e' 在修饰符中执行代码。

这应该改变，例如，“你好，@lserni；怎么样？” 与“你好，一些文本之前的文本Leonardo Sernisome 文本之后，怎么样？”。

# git - 我怎样才能回去测试哪里出了问题？

> ID：11389813
> 
> 赞同：3
> 
> 时间：2012-07-09T06:08:24.647
> 
> 标签：git

我想回到之前的提交并运行我的程序，直到我发现哪里出了问题，而不会删除或影响我的提交。一旦我找到它工作的最后一个提交，我可以看到是什么改变了返回到当前提交并修复它。

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T06:12:04.823

您应该尝试使用`git bisect`. 此功能允许您基本上通过提交进行二进制搜索。你在事情还不错的时候选择一个提交，在事情坏了的时候选择一个提交，然后从那里继续。

查看此页面以获取教程：

[http://www-cs-students.stanford.edu/~blynn/gitmagic/ch05.html](http://www-cs-students.stanford.edu/~blynn/gitmagic/ch05.html)

（搜索“哪里出了问题？”）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T06:12:38.223

Git 为此提供了正确的命令：`git bisect`. 它将执行二进制搜索，并允许您标记每个测试的提交，`good`或者`bad`

使用以下命令开始对分过程：

```
git bisect start HEAD <last good commit> 
```

然后构建你的源代码，运行它，检查错误，最后标记它：

```
git bisect good # or:
git bisect bad 
```

如果您无法测试提交（构建损坏等），请使用`git bisect skip`.

这样做直到你找到第一个*错误的*提交。要返回原始提交，请运行`git bisect reset`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T11:01:04.553

如果您只想返回一些提交进行测试，您可以执行以下操作：`git checkout SHA`

# cakephp - afterFind() 似乎额外运行了一次，$primary 值不正确

> ID：11389818
> 
> 赞同：0
> 
> 时间：2012-07-09T06:08:53.067
> 
> 标签：cakephp, cakephp-2.0

我有一个名为 ShippingBatch 的模型，它有很多订单。订单是一个关键模型，它又与许多其他模型有关系

我正在尝试对 ShippingBatch 进行 $this->recursive = 2 read() 调用，以便获得订单以及订单的关系。我还在运行 afterFind() 来填充一些计算值。这会导致一些循环，因为结果的 Order 部分也有 ShippingBatch 信息。

它不是太大的问题，因为 afterFind 中的 $primary==false 检查可以解决问题。

但是，在一种情况下，afterFind 运行的时间比它应该运行的时间多，$primary (= true) 的值似乎不正确。

谁能指出我可能出错的地方？

# c++ - 调试会改变多线程 C++ 程序的行为吗？

> ID：11389819
> 
> 赞同：6
> 
> 时间：2012-07-09T06:08:53.997
> 
> 标签：c++, multithreading, debugging, visual-studio-2008, asynchronous

我正在开发一个处理许多同步问题的多线程 C++ 程序。我正在使用 Visual Studio 2008。

当我使用断点对其进行调试时，我的程序的运行时行为（跨线程执行语句的顺序）似乎发生了变化。这可以解释吗？这里有什么概念？我希望执行顺序保持不变。

第二个问题 - 如果 Thread1 被等待函数调用阻塞。Thread2 有语句等待执行，处于就绪状态。是否存在程序将等待 Thread1 继续执行而不是让 Thread2 执行的情况？我已经删除了两个线程之间的所有依赖关系，并确保 Thread2 不等待任何资源。

欣赏回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T06:17:59.843

[这篇关于多线程调试技术](http://www.drdobbs.com/cpp/multithreaded-debugging-techniques/199200938)的文章对这个主题做了一些很好的总结：

> 在调试器下运行时，多线程错误可能不会出现。多线程错误对应用程序中的事件时间非常敏感。在调试器下运行应用程序会改变时间，因此可能会掩盖问题。当您的应用程序在测试或更糟的情况下在客户环境中失败，但在调试器下可靠运行时，几乎可以肯定是代码中的时间问题。

...对于您的后一个具体问题，重要的是要了解 - 在大多数情况下 - 操作系统可以随时中断任何线程的执行，即使是那些“准备好”的线程执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T16:04:08.167

记住：没有办法正常调试多线程应用程序，就像调试它“直到它工作”一样。

您需要以某种方式向自己证明不会出现死锁，并且所有数据访问都在需要的地方进行了序列化。这很难做到，即使是经验丰富的开发人员也可能会错过某些情况。

因此，设计多线程应用程序非常重要，这样设计才能保证某些属性（例如，无死锁）。请注意，上一句中没有提到调试。它需要按设计工作，而不是通过寻找错误来工作。

有两个核心问题：

1.  对数据结构的访问序列化。

2.  僵局。

我在下面讨论的事件驱动或 CSP 方法会自动处理 #1。死锁问题并非微不足道，仍然是一个活跃的研究课题。即，证明没有死锁的方法（以及为它设计的方法！）。

使检查和正式证明某些属性（如免于死锁）变得更容易的设计示例之一是[通信顺序进程 (CSP)](http://en.wikipedia.org/wiki/Communicating_sequential_processes)。

CSP 方法在大多数应用程序开发框架中都可用，并且可以实现为无共享的事件驱动系统。核心特点是：

*   线程通过在彼此之间发送事件（消息）进行通信。

*   数据结构永远不会在线程之间直接共享，而是事件拥有数据。

*   唯一的同步是在发布事件时顺序访问事件队列。

只要更高级别的抽象不使用事件传递来重新实现容易死锁的抽象，这本身就可以确保免于死锁。例如，即使通过事件传递也可以获得哲学家就餐问题的死锁，但您现在通过事件（消息）显式传递有关资源的信息。因此，这个问题至少是明确的，你不得不考虑它。可以这么说，问题并没有被掩盖。

*证明*不会发生死锁/活锁的[正式技术可以更容易地应用于实现 CSP 的事件传递生产代码。](http://wotug.org/parallel/theory/formal/csp/Deadlock/)事件接受代码可以提供运行时自省，允许提取每个状态的已接受事件集以及状态集（在内部它是一个状态机）。此信息通常足以证明没有死锁的可能性，或者可以列举一小组死锁场景，然后可以以其他方式处理这些场景。毕竟，CSP 形式主义通常不能捕获软件的完整语义，因此语义本身可用于进一步表明没有发生死锁，或者以其他方式处理死锁。

# vba - 使用 VBA 复制条件格式的单元格

> ID：11389822
> 
> 赞同：1
> 
> 时间：2012-07-09T06:09:16.473
> 
> 标签：vba, excel, conditional-formatting

我正在编写一个脚本，将数据从一个工作簿复制到另一个工作簿。后者被用作一种数据库（不是我的想法）。作为测试，我正在复制约 300 行数据，其中 3 列条件格式，其余为纯文本。复制文本很容易，几乎是即时的，但格式化比较困难。目前我正在使用下面的代码来复制格式化的单元格：

```
thisSheet.Range("G" & CStr(rRow), "I" & CStr(rRow)).Copy
masterSheet.Range("G" & CStr(mRow), "I" & CStr(mRow)).PasteSpecial (xlPasteAll) 
```

对于大约 300 行，这大约需要 40 秒，这太慢了。我无法复制由多行组成的范围，因为它们不是按顺序粘贴的。

我尝试了以下代码来尝试复制格式。

```
masterSheet.Range("G" & CStr(mRow), "I" & CStr(mRow)).value = thisSheet.Range("G" & CStr(rRow), "I" & CStr(rRow)).value
masterSheet.Range("G" & CStr(mRow), "I" & CStr(mRow)).Font.Color = thisSheet.Range("G" & CStr(rRow), "I" & CStr(rRow)).Font.Color
masterSheet.Range("G" & CStr(mRow), "I" & CStr(mRow)).Interior.ColorIndex = thisSheet.Range("G" & CStr(rRow), "I" & CStr(rRow)).Interior.ColorIndex
'cell color and font color are the only things i am interested in 
```

此代码在大约 3 秒内执行，但不会复制条件格式应用的任何格式。

是否有更有效的方法来复制条件格式应用的单元格和字体颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:21:32.407

尝试将此添加到代码的开头：

```
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual 
```

到最后：

```
Application.ScreenUpdating = True
Application.Calculation = xlCalculationAutomatic 
```

如果这不能将您的速度提高到您需要的地方，我建议将条件格式硬编码到 VBA 中。

因此，例如，如果其中一个条件格式规则将单元格设为红色（如果数字超过 100）。在复制值时将该检查添加到 VBA 中，并根据其值将目标单元格设置为所需的格式。

# machine-learning - 将特征误差纳入随机森林算法

> ID：11389823
> 
> 赞同：4
> 
> 时间：2012-07-09T06:09:20.360
> 
> 标签：machine-learning, random-forest

我正在使用随机森林对大量天文物体进行分类，并且做得相对不错。但是，我想通过合并有关每个功能的方差（或误差条）的信息来进一步提高性能。

在天文学中，每次测量通常都有一个相关的误差线。例如，如果我测量红色和蓝色，每个颜色测量值都是亮度的测量值（在天文学中，即恒星的大小），误差，例如 R 等 14 +- 0.2，B 等12 + - 0.15。

我想弄清楚如何让随机森林使用错误栏作为额外的信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:32:16.150

误差和颜色测量都是数值特征吗？然后我会简单地添加一个新功能，它是这两个功能的产物，我想这就是你所说的 R 中的交互

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T07:54:05.367

您可以考虑做的一件简单的事情是使用每个变量的误差分布对数据进行重新采样。因此，您可以通过 x + u*sigma 生成新示例，其中 u 是正常 (0,1) 绘制，而 sigma 是该变量的错误的标准差。可能需要大量额外的样本才能正确合并噪声（取决于特征的数量），但由于 RF 并行训练非常快，因此它可能是一种简单的方法。还有一个额外的优点是可以很容易地在采样中加入相关噪声。

# php - 打包php API的最有效方式

> ID：11389827
> 
> 赞同：0
> 
> 时间：2012-07-09T06:10:15.633
> 
> 标签：php

我正在编写一个小 api，它将涉及许多具有公共元素的“命令”，其中涉及读取 POST'ed 到脚本的参数并据此采取行动

我希望有最优化的执行，但不确定是否最好有一个较大的脚本来打开 $cmd 变量，或者将每个命令放在它自己的脚本中。

这完全取决于 php 如何处理脚本执行。例如，如果每次都动态地解析和标记脚本，那么最好有很多短脚本，每次都没有加载和解析/标记冗余代码。

但是，如果 php 读取、解析和标记脚本，并将“指令”缓存在内存中，仅在实际编辑脚本时（例如基于文件日期）重新加载/解析/标记化，最好拥有这一切在一个脚本中，因为这样代码可以分解为函数，并且更容易维护，因为不会有重复的代码。我不喜欢包含公共文件的想法，如果该包含每次都会调用重新解析。

希望这个问题本质上不是通用的-我认为没有必要提供示例代码，因为我真的只是想知道“打包”我的 api 的最佳方法

# c++ - 在 C++ 中取消引用 NULL 指针

> ID：11389829
> 
> 赞同：1
> 
> 时间：2012-07-09T06:10:23.850
> 
> 标签：c++, g++, null-pointer

> **可能重复：**
> [在 NULL 指针上访问类成员](https://stackoverflow.com/questions/669742/accessing-class-members-on-a-null-pointer)

我知道取消引用 NULL 指针会使程序崩溃或给出未定义的行为。但是以下程序始终打印`This is a car`出我运行了多少次。在 Linux (g++) 和 AIX (xlc++) 中检查。

```
#include <iostream>
using namespace std;

class Car
{
public:
    void display(){ cout << "This is a car" << endl; }
};

int main()
{
    Car *c = NULL;
    c->display();
} 
```

当我为类添加一个数据成员并尝试打印它的值时，程序就会崩溃。

```
class Car
{
     int i;
 public:
     void display(){ cout << "This is a car" << i << endl; }
}; 
```

因此，取消引用 NULL 指针并调用不访问类的数据成员的成员函数似乎很好。这真的是一种未定义的行为吗？

# php - 存储 cron 作业 Web 服务响应以供前端将来使用

> ID：11389832
> 
> 赞同：0
> 
> 时间：2012-07-09T06:10:50.267
> 
> 标签：php, javascript, cron

我有两个对象作为来自 web 服务调用的响应。该调用是由 cron 作业发出的，因此我必须如何覆盖现有数据并使新数据可用于前端调用以接收。

现在我的 PHP 脚本只是响应响应 - 但这不是正确的方法，对吧？

我如何存储这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:20:54.457

您应该将 json_encode 应用于您的对象并将生成的字符串保存在任何 .txt 文件中，然后您可以通过 ajax 调用访问它，该对象现在将是 json 字符串，您可以使用 JSON.parse(json_string_from_txt_file 轻松在前端重新生成 json 对象）。希望这可以帮助 ：）

# jquery - 手风琴菜单显示问题

> ID：11389834
> 
> 赞同：0
> 
> 时间：2012-07-09T06:10:51.547
> 
> 标签：jquery, accordion

我创建了一个手风琴菜单，它工作正常，但是当我单击菜单下的子菜单时，它也会像主菜单一样向上滑动然后向下滑动。我该如何解决。

我有一个 jsfiddle 文件，这里是链接[http://jsfiddle.net/AR5Zk/](http://jsfiddle.net/AR5Zk/)请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:16:47.477

试试这个[http://jsfiddle.net/FPtsz/](http://jsfiddle.net/FPtsz/)

# c# - 打开网页，登录然后下载文件

> ID：11389836
> 
> 赞同：1
> 
> 时间：2012-07-09T06:11:09.330
> 
> 标签：c#, .net, windows-services, automation, watin

任务：我必须打开一个网页（https），输入用户名和密码，单击一些链接以到达所需的页面，然后将所有文件（pdf）下载到我们内部网络上的共享文件夹中。

我想用每晚运行一次的 Windows 服务来做到这一点。做这个的最好方式是什么？

我试过[watin](http://watin.org/)，很容易启动浏览器，导航到我的网页，输入用户名和密码，点击一些链接，......但是我不知道如何自动下载文件。据我了解，如果没有用户交互，您将无法做到这一点。另外 - 我不知道是否可以从 Windows 服务运行 watin；浏览器实例将在哪里运行？

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:27:49.423

为什么不直接使用 watiN 登录，然后循环浏览 browser.links 集合，使用正常的 c sharp web 请求下载文件？Re as a service 请参阅[使用计划任务或 Windows 服务运行 WatiN](https://stackoverflow.com/questions/2719047/running-watin-using-scheduled-task-or-windows-service)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:59:17.973

*您可以执行以下操作：*

1.  使用输入的用户名和密码保存页面
2.  编写一个小型`C#`客户端程序，该程序将运行一个本地服务器，该服务器将提交页面文件
3.  获得会话，提交之前保存`URL`到可`PDF` 下载页面
4.  在同一个应用程序中添加客户端下载部分，该部分下载该下存在的所有文件`session`。

*编写这样的程序不会花费您一个多小时的时间。*

**好处：**

1.  你可以随着时间改变，你喜欢它的表现方式
2.  您可以完全控制您的客户部分

# gnu - autotools 项目 - 在脚本中使用前缀变量

> ID：11389837
> 
> 赞同：0
> 
> 时间：2012-07-09T06:11:10.890
> 
> 标签：gnu, autotools, configure

在 autotools 项目中使用某些路径的脚本我想将用户在 ./configure 期间输入的前缀转发到这些脚本。假设我有一个 bash 脚本，它在 ./configure 期间设置的目录中回显文件。最好的方法是什么？我正在考虑让预处理器使用 myscript.sh.hpp 并将 -DMYPATH 传递给预处理器以将其替换为 myscript.sh.hpp 以生成具有适当路径的 myscript.sh 。这是正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:11:21.510

`prefix`是安装您的软件的位置，并不是查找`bash`. 最好为用户提供指定 bash 解释器或探测 PATH 以查找 bash 并使用该值的能力。但是，通常需要`prefix`在脚本中引用。最简单的方法是让它`config.status`扩展它。在configure.ac中：

```
AC_CONFIG_FILES([foo]) 
```

在 foo.in

```
@prefix@ 
```

# passwords - 解压脚本密码

> ID：11389838
> 
> 赞同：3
> 
> 时间：2012-07-09T06:11:13.807
> 
> 标签：passwords, zip, archive

好的，这是我的脚本

```
 #!/bin/bash
cd /var/backups/System/
unzip Themes.zip
exit 0 
```

在解压缩受保护的 zip 文件（即 Themes.zip）时，我需要脚本自动输入密码。由于用户不知道密码，我需要在提取 zip 存档时通过脚本输入密码。希望这是因为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T06:16:14.113

使用`-P`标志作为密码。来自`man unzip`：

```
-P password
              use  password to decrypt encrypted zipfile entries (if any).  THIS IS INSECURE!  Many multi-user operating systems provide ways for any user to see the current command line of any other user; even on stand-alone systems there is always the threat of over-the-shoulder peeking.  Storing the plaintext password as
              part of a command line in an automated script is even worse.  Whenever possible, use the non-echoing, interactive prompt to enter passwords.  (And where security is truly important, use strong encryption such as Pretty Good Privacy instead of the relatively weak encryption provided by standard  zipfile  utili-
              ties.) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-05T06:43:48.443

> 解压 -P 密码 Themes.zip

出口 0

# javascript - 图像出现脱节的翻转淡入淡出问题

> ID：11389849
> 
> 赞同：0
> 
> 时间：2012-07-09T06:12:40.937
> 
> 标签：javascript, rollover

我正在处理页面布局，其中页面底部的文本链接将控制单独 DIV 中的淡入淡出翻转效果。我当前拥有的代码允许我在滚动页面底部的文本链接时淡入文本（在 DIV 区域内）。这种不连贯的翻转效果非常适合我正在设计的页面 - 它具有很好的淡入和淡出效果。但是，我想淡入 DIV 区域内的 PNG 图像而不是文本，而现有的脚本似乎不允许我这样做。当我尝试用图像替换文本时，翻转效果不再起作用。有没有办法轻松修改现有代码来实现这一点？任何帮助将不胜感激，并提前感谢您的帮助！

我拥有的当前 HTML 页面如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<script type="text/javascript">
var c=0;
var obj;
var speed=20;
window.onload=function() {
obj=document.getElementById('fader');
var l=document.getElementById('mylink');
l.onmouseover=function() {
fadeinOut('in');
}
l.onmouseout=function() {
fadeinOut('out');
}
}
function fadeinOut(dir){
if(obj.filters) {
obj.style.filter='alpha(opacity='+c+')';
}
else {
obj.style.opacity=c/100;
}
if(dir=='in') {
dir1='in'
c++;
}
else {
dir1='out';
c--;
}
if(c>100){
c=100;
return;
}
if(c<0){
c=0;
return;
}
setTimeout('fadeinOut(dir1)',speed)
}
</script>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<style type="text/css">
#container {
width:324px;
height:200px;
border:3px double #000;
margin:auto;
}
#fader {
height:176px;
padding:12px;
filter:alpha(opacity=0);
opacity:0;
font-family:verdana,arial,helvetica,sans-serif;
font-size:14px;
text-align:justify;
}
</style>

</head>
<body>

<div id="container">

<div id="fader">
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Proin massa. Nam vehicula.
Morbi velit nisi, mollis id, ultrices luctus, adipiscing sit amet, lectus. Nunc rhoncus
nisl ac enim. Maecenas vestibulum dolor ut velit. Maecenas condimentum pulvinar purus.
Pellentesque ac ipsum. Curabitur sodales, elit vel molestie hendrerit,
</div>

<a href="#" id="mylink">My Link Will Go Here</a>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:52:44.123

必须在这里推荐 jQuery。看看你的 javascript 是多么简单！jQuery 为您处理跨浏览器的不透明度。

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
$( function(){
  $('#mylink').mouseenter( function(){
    $('#fader').stop().animate({opacity:1});
  }).mouseleave( function(){
    $('#fader').stop().animate({opacity:0});
  })
});
</script>

<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<style type="text/css">
#container {
border:3px double #000;
margin:auto;
}
#fader {
padding:12px;
filter:alpha(opacity=0);
opacity:0;
font-family:verdana,arial,helvetica,sans-serif;
font-size:14px;
text-align:justify;
}
</style>

</head>
<body>

<div id="container">

<div id="fader">
<img src='http://4.bp.blogspot.com/--owXoE04D_k/T-3epqrKyLI/AAAAAAAAANA/HLRMp2I9T4U/s1600/facebook-smiley-face.jpg'/>
</div>

<a href="#" id="mylink">My Link Will Go Here</a>
</div>
</body>
</html> 
```

# c# - C# Invalidate 没有调用paint方法

> ID：11389850
> 
> 赞同：7
> 
> 时间：2012-07-09T06:12:59.483
> 
> 标签：c#, .net, winforms, paint, invalidation

我重写了 OnPaint 方法以在屏幕上绘制椭圆。

```
 protected override void OnPaint(PaintEventArgs e)
    {
        MessageBox.Show("Paint");
        if (debugStarted)
        {
            int y = rtbLogicCode.PlaceToPoint(new Place(0, debugLine)).Y;
            if (rtbLogicCode.GetVisibleState(debugLine).ToString() == "Visible")
            {
                e.Graphics.FillEllipse(new LinearGradientBrush(new Rectangle(0, y, 15, 15), Color.LightPink, Color.Red, 45), 0, y, 15, 15);
            }
            base.OnPaint(e);
        }
    }

    private void rtbLogicCode_Scroll(object sender, ScrollEventArgs e)
    {
        this.Invalidate();
    } 
```

滚动事件（在 Richtextbox 上）得到了正确处理，但即使我使表单无效，它也没有调用 OnPaint 函数（没有显示消息框）。

这可能是什么原因？

编辑：我忘了提到在子窗体的初始化函数（使用 MDI 属性作为主窗体的控件添加），我设置了以下样式：

```
 private void LogicCodeInit()
    {

            this.SetStyle(ControlStyles.DoubleBuffer, true);
            this.SetStyle(ControlStyles.ResizeRedraw, true);
            this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
            this.SetStyle(ControlStyles.UserPaint, true);

    } 
```

Edit2：我也忘了提到子窗体是作为 TabControl 的控件添加的。然后将 TabControl 添加为主窗体的控件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T07:04:18.103

`Update`之后调用`Invalidate`。`Invalidate`只有当它有焦点时才重新绘制表单，它可能没有得到焦点，因为它是作为一个`TabControl`孩子添加的。

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/598t492a.aspx)：

> 调用 Invalidate 方法不会强制同步绘制；要强制同步绘制，**请在调用 Invalidate 方法后调用 Update 方法**。不带参数调用此方法时，会将整个客户区添加到更新区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:02:25.917

调用`Invalidate`控件将导致部分或全部无效，表明它需要“有时”更新，但不会导致该更新立即发生。调用`Update`将导致控件的任何已失效部分立即重绘。调用`Refresh`将结合上述效果。每当系统空闲时，它将为具有任何无效区域的控件调用进程更新。

该`Invalidate`方法在按顺序执行许多更改控件应显示内容的方法的情况下很有用。不必在更改控件的每个方法之后都重新绘制控件，而是可以让更改控件的方法使那些需要重新绘制的部分无效。一旦完成了所有可能更改控件的方法，就可以使用`Update`重绘控件中已失效的那些部分（如果有）。如果重绘控件需要 1/100 秒，并且需要对其执行 50 次操作，则延迟和合并更新可能会在似乎即时更新的控件和需要半秒的控件之间产生差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:21:48.377

可能不被调用的主要原因`OnPaint`是如果您`ControlStyle`不包含`UserPaint`. 如果您确实设置了它，我会希望您提及这一点，所以我假设您没有。`SetStyle`在这种情况下，在您的构造函数中添加一个调用。

# java - 在运行时更改类文件

> ID：11389856
> 
> 赞同：0
> 
> 时间：2012-07-09T06:13:25.110
> 
> 标签：java, runtime, rxtx

我的要求是在运行时更改 java 文件中的导入语句。我正在通过 COM 端口访问点阵打印机，对于 Windows 和 Linux，我必须使用不同的 Jar 文件 - windows com.jar、rxtx.jar。现在我正在为两个平台进行两次编译。下面是我的课。

```
import javax.comm.CommPortIdentifier;
import javax.comm.SerialPort;
//import gnu.io.*;
public class Posmachine {

} 
```

我想知道是否有办法在运行时更改导入 jar，这将允许我检查它是 linux 还是 windows 并更改类中使用的`Posmachine`类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:19:14.333

您应该为每个平台创建两个实现类。然后通过工厂方法或对象获取所需的类。因此，您将跳过加载依赖于不可用 jar 的类。

# android - 在android中清除屏幕

> ID：11389863
> 
> 赞同：1
> 
> 时间：2012-07-09T06:14:29.800
> 
> 标签：android, android-layout

我正在使用 android 制作一种调查应用程序，我需要清除屏幕以发布新问题。不用说我不能继续创造那么多的活动。我希望流程像

问题 -> 清屏 -> 下一个问题等等。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:46:08.970

您可以使用 ViewGroup 中的`removeView()`或`removeAllViewsInLayout()`函数从布局中删除视图。**ViewParent**和**ViewGroup**通常不能删除视图，因此您需要将其转换为布局才能做到这一点。

这是文档-

[移除视图（android.view.View）](http://developer.android.com/reference/android/view/ViewGroup.html#removeView%28android.view.View%29)

[removeAllViewsInLayout()](http://developer.android.com/reference/android/view/ViewGroup.html#removeAllViewsInLayout%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:21:40.060

您可以在屏幕上创建一个视图寻呼机，当有人回答问题时，只需移动页面以显示另一个问题。你甚至可以把它放在一个片段中，并有多个片段来控制移动，比如移动到一个特定的问题。看这个

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

您可以从适配器提供您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:34:16.457

您可以为此使用视图翻转器

[http://www.bogotobogo.com/Android/android9TabWidgetFlipper.php#Flipper](http://www.bogotobogo.com/Android/android9TabWidgetFlipper.php#Flipper)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T06:48:15.583

你可以通过几种方式做到这一点

1- 删除视图 2- 隐藏视图

# ruby-on-rails - 尝试使用 Bitnami 在 Amazon EC2 上运行 Redmine - 启动实例后该怎么办？

> ID：11389865
> 
> 赞同：1
> 
> 时间：2012-07-09T06:14:34.707
> 
> 标签：ruby-on-rails, amazon-ec2, redmine, bitnami

所以我在这里按照[这些说明](http://wiki.bitnami.org/cloud/How_to_start_a_BitNami_Machine_Image_%28AMI%29?)使用 Bitnami 在 EC2 上安装和运行 Redmine。

我现在正在运行该实例，并且我有一个公共 DNS。但是，在此之后我仍然无法弄清楚如何访问 Redmine？

另一件事是我在注册 EC2 服务时从 Amazon 获得了公钥，但到目前为止还没有人要求我提供公钥。那什么时候用？我是否担心运行Redmine？

我看着 AWS 控制台，我的实例处于“运行”状态，一切都是绿色的。然而，当我将公共 DNS 放在浏览器中并单击 go 时，浏览器处理请求很长时间，最终我收到消息“谷歌浏览器无法连接到公共 DNS。

我不知道该做什么或在哪里寻求帮助......

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:47:16.120

您是否按照步骤 4 进行操作，其中提到您需要在安全组中打开端口 80？如果不是，则可能是默认设置阻止了对 Web 服务器的访问。

# qt - 如何在Qt中重写包含多行的文件中的字母？

> ID：11389867
> 
> 赞同：0
> 
> 时间：2012-07-09T06:14:47.133
> 
> 标签：qt, visual-c++, file-io, qfile

我有一个文件，其中包含许多行，每行都是英文句子。
我的程序要做的是：我必须在其中一行中更改一个字母。

文件如下所示：

```
he has wild dreams  
he walks into the forest alone  
he transforms into a bear 
```

如果我必须更改第二行“the”中的字母“e”，我该如何在 Qt 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:41:09.843

您可以逐行读取文件（使用[`QFile::readLine()`](http://doc.qt.nokia.com/4.7-snapshot/qiodevice.html#readLine-2)），并将其添加到 QStringList。

```
while (file.canReadLine())
    list.append(file.readLine()); 
```

然后您可以在 QStringList 中进行更改并将其输出到同一个文件。

# php - Zend 中的 headMeta() 是什么？

> ID：11389868
> 
> 赞同：0
> 
> 时间：2012-07-09T06:14:59.477
> 
> 标签：php, zend-framework

我是 Zend 框架的初学者。我只是在练习几个教程项目。在某些项目中，我在 layout.phtml 中找到了以下代码，但我不明白这些代码的目的是什么。

```
 <?php echo $this->headMeta(); ?> 
 <?php echo $this->headTitle(); ?> 
```

请解释以上两行。

谢谢埃纳穆尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:22:39.913

这两个助手[在 View Helpers 的 ZF 参考指南](http://framework.zend.com/manual/en/zend.view.helpers.html)中都有详细说明：

> *HeadMeta 助手*
> 
> HTML 元素用于提供有关您的 HTML 文档的元信息——通常是关键字、文档字符集、缓存 pragma 等。元标记可以是“http-equiv”或“名称”类型，必须包含“内容” ' 属性，并且还可以具有 'lang' 或 'scheme' 修饰符属性。

请参阅[http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headmeta](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headmeta)

> 标题助手
> 
> HTML 元素用于为 HTML 文档提供标题。HeadTitle 帮助程序允许您以编程方式创建和存储标题以供以后检索和输出。

请参阅[http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headtitle](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headtitle)

它们都是[占位符助手：](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)

> Placeholder 视图助手用于在视图脚本和视图实例之间持久化内容。它还提供了一些有用的功能，例如聚合内容、捕获视图脚本内容以供以后使用，以及向内容添加前后文本（以及聚合内容的自定义分隔符）。

主要思想是拥有一个容器，您可以在其中填充数据，然后在稍后的视图模板中回显，例如，使用 headMeta 助手，您可以配置要插入网站的各种元关键字，并使用标题助手可以配置页面的title元素。当您回显助手时，他们将以格式化的方式一次回显他们收集的数据。

请参阅参考指南以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:32:20.507

它是辅助类：

[HeadMeta 助手](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headtitle)

HTML 元素用于提供有关您的 HTML 文档的元信息——通常是关键字、文档字符集、缓存编译指示等。元标记可以是“http-equiv”或“名称”类型，必须包含“内容” ' 属性，并且还可以具有 'lang' 或 'scheme' 修饰符属性。

[标题助手](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headtitle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:21:05.977

我建议你在提问之前先开始接受一些问题

```
<?php echo $this->headTitle(); ?> //This will be in your layout/phtml file,giving the title
<?php echo $this->headMeta(); ?> // Giving any meta info 
```

添加这个的目的是说你有两个控制器 FooController 和 BarController 。你想在执行 foo 控制器时给网页标题 foo

```
Class FooController extends Zend_Controller_Action {
public function init(){

$this->view->headTitle('FOO');
}

} 
```

以同样的方式，您也可以为另一个控制器赋予不同的标题

```
Class BarController extends Zend_Controller_Action {
public function init(){

$this->view->headTitle('BAR');
}

} 
```

同样适用于 Meta 也

# wix - 将 EXE 文件转换为 XML

> ID：11389869
> 
> 赞同：1
> 
> 时间：2012-07-09T06:15:15.253
> 
> 标签：wix, windows-installer, wix3.5, wix3.6

我有一个应用程序的可执行包 (.exe)。如何将此可执行文件转换为[MSI](http://en.wikipedia.org/wiki/Windows_Installer)包？

我知道使用以下方法将 .msi 转换为 .wxs。

```
dark.exe installer.msi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:26:47.297

这是一个很棒的小型迷你教程。这可能就是您所需要的：

*   [http://www.codeproject.com/Tips/105638/A-quick-introduction-Create-an-MSI-installer-with](http://www.codeproject.com/Tips/105638/A-quick-introduction-Create-an-MSI-installer-with)

1) 创建 Wix XML 文件

```
EXAMPLE:
<?xml version="1.0"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
</Wix> 
```

2) 为您的 .exe 构建一个 MSI

```
EXAMPLE:
candle example.wxs
light example.wixobj 
```

3）瞧。如果没有比“安装 .exe”更复杂的了，那么您就完成了！将 .msi 带到不同的 PC 上并进行测试。

如果您需要，上面的链接还讨论了其他场景。例如：

```
ANOTHER, MORE REALISTIC .WIX FILE:
<?xml version="1.0"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
   <Product Id="*" UpgradeCode="12345678-1234-1234-1234-111111111111" 
            Name="Example Product Name" Version="0.0.1" Manufacturer="Example Company Name" Language="1033">
      <Package InstallerVersion="200" Compressed="yes" Comments="Windows Installer Package"/>
      <Media Id="1" Cabinet="product.cab" EmbedCab="yes"/>

      <Directory Id="TARGETDIR" Name="SourceDir">
         <Directory Id="ProgramFilesFolder">
            <Directory Id="INSTALLDIR" Name="Example">
               <Component Id="ApplicationFiles" Guid="12345678-1234-1234-1234-222222222222">
                  <File Id="ApplicationFile1" Source="example.exe"/>
               </Component>
            </Directory>
         </Directory>
      </Directory>

      <Feature Id="DefaultFeature" Level="1">
         <ComponentRef Id="ApplicationFiles"/>
      </Feature>
   </Product>
</Wix> 
```

这是“标准”教程，还有很多其他信息：

*   [http://wix.tramontana.co.hu/](http://wix.tramontana.co.hu/)

Bon soir（至少在加利福尼亚这里；））

'希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-13T08:24:40.537

使用[UniExtract](http://legroom.net/software/uniextract "通用提取器")从 EXE 中提取 MSI，然后在 MSI 上应用深色。

# java - JodaTime - 我如何知道夏令时是否在指定的时间段内发生？

> ID：11389877
> 
> 赞同：4
> 
> 时间：2012-07-09T06:16:10.890
> 
> 标签：java, datetime, date, jodatime, dst

我需要知道期间是否定义为：

```
DateTime start;
DateTime end; 
```

里面有夏令时。

我正在迭代由 {start,end} 定义的时间段集合，并在每次迭代中将开始和结束时间向前移动 24 小时。生成的周期从午夜开始，到下一个午夜前 1 毫秒结束。我发现如果时段内有夏令时点会产生不正确的结果，例如：

有：

```
Duration targetDuration = new Duration(24*60*60*1000L-1);
DateTime start = new DateTime("2012-03-10T00:00:00.000-08:00");
DateTime end = new DateTime("2012-03-10T23:59:59.999-08:00"); 
```

然后转移完成：

```
start = end.plusMillis(1);
end = start.plus(targetDuration); 
```

产生：

```
start = "2012-03-11T00:00:00.000-08:00"
end = "2012-03-12T00:59:59.999-07:00" 
```

我想知道JodaTime中是否有任何标准API可以检查时间段内是否有DST？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:21:49.083

使用 DateTimeZone.nextTransition 方法。如果开始时间小于结束日期时间，则其间至少发生了一次时区转换。这不考虑规则更改与 DST。也就是说，时区可能有一个新规则，指示标准时间有一个新的偏移量，这将显示为时区转换。

```
if (start.getZone().nextTransition(start.getMillis()) < end.getMillis()) {
    // Time zone transition occurred, possibly due to DST
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T08:54:00.687

只要`start`和`end`处于正确的时区（例如，使用[此构造函数](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#DateTime%28int,%20int,%20int,%20int,%20int,%20int,%20int,%20org.joda.time.DateTimeZone%29)创建），那么[使用它们创建的间隔](http://joda-time.sourceforge.net/apidocs/org/joda/time/Interval.html#Interval%28org.joda.time.ReadableInstant,%20org.joda.time.ReadableInstant%29)应该考虑该时区的 DST。如果该[间隔的持续时间](http://joda-time.sourceforge.net/apidocs/org/joda/time/base/AbstractInterval.html#toDuration%28%29)不等于 24 小时，那么您已经越过了 DST 点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:25:25.173

因为夏令时严重依赖时区（有些地区不实行 DST，有些移动时钟 1 小时，有些 2 等），所以您的时间变量也必须考虑位置。

因此，您可能需要查看`DateTimeZone`课程

[日期时区](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTimeZone.html)

# iphone - 将数据从 iphone 应用程序保存到 iPhone 应用程序中的文本文件

> ID：11389879
> 
> 赞同：0
> 
> 时间：2012-07-09T06:16:14.790
> 
> 标签：iphone, ios, xcode

我想将我的应用程序数据保存在文档文件夹中的文本文件中我使用以下方式存储但它存储单个字符串我希望我的数据在数组中如何将数组的所有内容存储在文本文件中

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *documentsDirectory = [paths objectAtIndex:0];
  NSString*yourString=@"This is working fine";
  NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"file.txt"];
  NSString *stringWithoutSpaces = [yourString stringByReplacingOccurrencesOfString:@" " withString:@""];
  [stringWithoutSpaces writeToFile:filePath atomically:TRUE encoding:NSUTF8StringEncoding error:NULL]; 
```

我的数组就像关注

```
 DataController *coffeeObj = [appDelegate.coffeeArray objectAtIndex:indexPath.row];

 cell.resturantLocationLabel.text=coffeeObj.resturantLocation;
     cell.foodQualityRatingLabel.text=coffeeObj.foodQualityRating;
     cell.foodPresentationRatingLabel.text=coffeeObj.foodPresentationRating;
     cell.waiterRatingLabel.text=coffeeObj.waiterRating;
     cell.ambienceRatingLabel.text=coffeeObj.ambienceRating;
     cell.overallRatingLabel.text=coffeeObj.overallRating;
     cell.commentsLabel.text=coffeeObj.comments;
     cell.emailAddressLabel.text=coffeeObj.emailAddress;
     cell.addtoMailingListLabel.text=coffeeObj.addtoMailingList;

     NSString*test=coffeeObj.comments; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:29:06.810

```
// Here you set your text.    
NSString *yourAppendingText = @"yourAppendingText";  

// Here you get access to the file in Documents directory of your application bundle.
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDir = [paths objectAtIndex:0];
NSString *documentFile = [documentDir stringByAppendingPathComponent:@"file.txt"];

// Here you read current existing text from that file
NSString *textFromFile = [NSString stringWithContentsOfFile:documentFile encoding:NSUTF8StringEncoding error:nil];

// Here you append new text to the existing one if it is
if(textFromFile){
    NSLog(@"appending");
    NSString *textToFile = [textFromFile stringByAppendingString:[NSString stringWithFormat:@" %@",yourAppendingText]];
    // Here you save the updated text to that file
    [textToFile writeToFile:documentFile atomically:YES encoding:NSUTF8StringEncoding error:nil];

}
else{

    NSLog(@"not appending");
    [yourAppendingText writeToFile:documentFile atomically:YES encoding:NSUTF8StringEncoding error:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:20:28.980

在 NSMutableString 中添加完整的数组数据，然后存储在文本文件中。

# c# - 如何在 ASP.NET 中获得准确的总访问者数

> ID：11389880
> 
> 赞同：2
> 
> 时间：2012-07-09T06:16:25.603
> 
> 标签：c#, asp.net, c#-2.0

我想知道我网站上的在线访问者数量。我进行了研究并找到了两种解决方案。

来源： ASP.NET 中的 Code Project
[Online 活动用户计数器](http://www.codeproject.com/Articles/29792/Online-active-users-counter-in-ASP-NET)

它易于设置和使用，但它也增加了每个 Ajax 请求/响应的用户数。仅我的主页就有 12 个 Ajax 请求（一个页面有 8 个请求，另一个页面有 4 个请求）。这大大增加了用户数量。

资料来源：Stack Overflow Q/A
[统计访客人数](https://stackoverflow.com/questions/2902083/count-the-no-of-visitors) 这一项与上一项完全相同。

来源：ASP.Net 论坛 [如何使用 C# 查看“谁在线”](http://forums.asp.net/t/1216009.aspx/1)

这个看起来比前两个好。这是此解决方案的详细代码。

```
void Application_Start(object sender, EventArgs e) 
    {
        // Code that runs on application startup
        HttpContext.Current.Application["visitors_online"] = 0;
    }

void Session_Start(object sender, EventArgs e) 
    {
        Session.Timeout = 20; //'20 minute timeout
        HttpContext.Current.Application.Lock();
        Application["visitors_online"] = Convert.ToInt64(HttpContext.Current.Application["visitors_online"]) + 1;
        HttpContext.Current.Application.UnLock();
    }

void Session_End(object sender, EventArgs e) 
    {
        HttpContext.Current.Application.Lock();
        Application["visitors_online"] = Convert.ToInt64(HttpContext.Current.Application["visitors_online"]) - 1;
        HttpContext.Current.Application.UnLock();
    } 
```

它似乎可以忽略每个 Ajax 响应的计数增加，但它仍然会为每个页面刷新或页面请求加起来。

有什么方法可以准确统计 ASP.Net 中的在线访问者数量吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T10:41:57.200

您永远无法获得完全准确的数字：无法（可靠地）检测到用户“已导航到另一个站点”（并离开了您的站点）或该用户“关闭了浏览器”。

Session_Start/Session_End 方式的问题是 Session_End 仅在“InProc”会话中调用，如果会话存储在 StateServer 或 SqlServer 中则不会。

你可以做的：

*   `Dictionary<string, DateTime>`在 Application 范围内持有 a 。此存储的会话 ID（字符串键）与最近访问的时间（DateTime 值）相对应
*   对于具有有效会话的每个请求，在字典中查找会话条目并更新其最新访问时间（如果未找到，则添加新条目）
*   当您想获取在线用户数时，首先遍历字典中的所有条目并删除会话超时已过去的项目。剩余的计数是在线用户数。

一个问题（至少）：如果一个用户同时使用两个浏览器，他打开了两个会话并且被计算为双倍。如果用户总是登录，也许你可以依靠 login-id 而不是 session-id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:19:01.027

我想提出完全不同的建议：尝试为此使用 Google Analytic。这些家伙添加了测试版功能，现在可以跟踪在线统计数据。

**编辑：**你不明白我。我提到不是标准的谷歌分析功能。我提到了新功能——实时。查看下一篇文章了解详情 -[您的网站现在发生了什么？](http://analytics.blogspot.com/2011/09/whats-happening-on-your-site-right-now.html)或观看此视频 - [Google Analytics（分析）实时测试版](http://www.youtube.com/watch?v=T3YF85B3TD8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:33:57.863

Hans 的解决方案非常棒，并且完全符合我的要求，但我最近在 MSDN 上发现了这篇文章，这似乎是实现此目的的最佳实践。

参考：http: [//msdn.microsoft.com/en-AU/library/system.web.httprequest.anonymousid.aspx](http://msdn.microsoft.com/en-AU/library/system.web.httprequest.anonymousid.aspx)

全球.asax

```
void Application_Start(Object sender, EventArgs e)
    {
        // Initialize user count property
        Application["UserCount"] = 0;
    }

public void AnonymousIdentification_Creating(Object sender, AnonymousIdentificationEventArgs e)
    {
    // Change the anonymous id
    e.AnonymousID = "mysite.com_Anonymous_User_" + DateTime.Now.Ticks;

    // Increment count of unique anonymous users
    Application["UserCount"] = Int32.Parse(Application["UserCount"].ToString()) + 1;
} 
```

.ASPX 文件

```
<%@ Page Language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">
  void Page_Load(object sender, EventArgs e)
    {
      if (Application["UserCount"] != null)
      {
          lblUserCount.Text = Application["UserCount"].ToString();
          lblCurrentUser.Text = Request.AnonymousID;
      }
  }    
</script>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>AnonymousID Example</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        Number of users: 
        <asp:Label ID="lblUserCount" Runat="server"></asp:Label><br />
    Current user:
        <asp:Label ID="lblCurrentUser" Runat="server"></asp:Label><br />
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-23T12:47:36.340

为什么不检查用户 IP 以获得唯一访问。将它们添加到哈希集中，这样您就可以做一些不错的事情，例如使用位置 API 制作热图：

```
 // count users online on all desktopsites
        void Session_Start(object sender, EventArgs e)
        {
            try
            {
                // lock application object
                Application.Lock();

                // get hashset containing all online ip adresses
                var ips = (HashSet<string>)Application["visitors_online_list_ip"];

                // get user ip
                var ip = HttpContext.Current.Request.UserHostAddress;

                // add ip to hashset
                ips.Add(ip);

                // store ip in session to delete when session ends
                Session["ip"] = ip;

                // save hashset
                Application["visitors_online_list_ip"] = ips;

                // unlock application object 
                Application.UnLock();
            }
            catch {}
        }

        void Session_End(object sender, EventArgs e)
        {
            try
            {
                // lock application object
                Application.Lock();

                // get hashset containing all online ip adresses
                var ips = (HashSet<string>)Application["visitors_online_list_ip"];

                // get user ip from Session because httpcontext doesn't exist
                var ip = Session["ip"].ToString(); ;

                // remove ip from hashset
                ips.Remove(ip);

                // save hashset
                Application["visitors_online_list_ip"] = ips;

                // unlock application object 
                Application.UnLock();
            }
            catch {}
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T11:04:12.160

正如 Hans 提到的，您可能必须将会话状态切换为`StateServer`or `SQLServer`，但这不是代码片段可以做到的。[关于 codeproject](http://www.codeproject.com/Articles/7514/Page-Tracking-in-ASP-NET)有一篇非常可靠和详细的文章可以正确处理这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T01:48:06.387

这是我根据 Hans Kesting 的建议实现的源代码。

全球.asax

```
void Session_Start(object sender, EventArgs e) 
    {
        System.Collections.Generic.Dictionary<string, DateTime> Visitors =
                            new System.Collections.Generic.Dictionary<string, DateTime>();
        Visitors.Add(Session.SessionID, DateTime.Now);        
        HttpContext.Current.Application.Lock();
        Application["Visitors"] = Visitors;
        HttpContext.Current.Application.UnLock();
    } 
```

HttpHandler.cs

```
private static void UpdateVisitors()
    {
        System.Collections.Generic.Dictionary<string, DateTime> Visitors = (System.Collections.Generic.Dictionary<string, DateTime>)HttpContext.Current.Application["Visitors"];
        Visitors[HttpContext.Current.Session.SessionID] = DateTime.Now;
    } 
```

AnyPage.aspx.cs（要在哪里获取总在线用户数）

```
 protected int GetCurrentOnlineUsers()
        {
            int total = 0;
            Dictionary<string, DateTime> Visitors = (Dictionary<string, DateTime>)Application["Visitors"];
            foreach (KeyValuePair<string, DateTime> pair in Visitors)
            {
                TimeSpan Remaining = DateTime.Now - pair.Value;
                int remainingMinutes = Convert.ToInt32(Remaining.TotalMinutes);            
                if (remainingMinutes < 21) //Only count the visitors who have been active less than 20 minutes ago.
                    total++;
            }

            return total;
        } 
```

# clojure - 为什么在clojure中添加 1.00 、 2.00 总是给我 3.0 ？

> ID：11389884
> 
> 赞同：1
> 
> 时间：2012-07-09T06:16:42.957
> 
> 标签：clojure, decimal, add

我不知道这是一个问题还是它的方式，但我需要一个小数点后 2 位的值。我可以编写一个函数来将其四舍五入到小数点后 2 位，但是有没有一种解决方案可以让 clojure 本身在添加时处理它。我的意思是改变数据类型或其他东西。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T06:27:25.560

Clojure 在底层使用 java 的标准双精度浮点数（从 1.3 开始），REPL 只打印表示数字所需的数字，所以在这种情况下，它得到 3.0000000 ...但删除了不必要的数字。

[您可以使用方便的格式](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/format)功能控制打印的数字。

```
(format "%.2f" (+ 1.0 2.0))
> "3.00" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T06:31:49.317

`3.0`在 clojure 中是等于`3.00`，是一个双精度数，如果你想输出一个带 2 位小数的 str，你可以使用 format.

```
user> (= 3.0 3.00)
true
user> (== 3.0 3.00)
true
user> (format "%.2f" 3.0)
"3.00"
user> (class 3.00)
java.lang.Double 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T11:11:57.410

If you need to do exact decimal arithmetic you can write the numbers with an 'M' suffix to indicate they are exact:

```
user=> (+ 1.00M 2.00M)
3.00M 
```

But beware, this is much less efficient than using the standard inexact floating point numbers.

# java - .NET SQL 插入速度比 JDBC 慢？（JDBC 快 4 倍）

> ID：11389887
> 
> 赞同：2
> 
> 时间：2012-07-09T06:17:04.193
> 
> 标签：java, .net, sql, sql-server-2008, jdbc

我在 C# 中的 .NET Native SQL Client 之间进行了一些测试，并与 java 中的 JDBC 驱动程序进行了比较，结果让我大吃一惊，并认为我一定在 .net 代码中做错了。结果在一个带有整数和一个文本字段的表中插入了 100 万个结果，我在每次尝试之前将其清空，运行为发布而构建的程序并由它们自行构建。

*   .NET 100 万行 1 个带有准备好的语句的事务耗时 159 秒。
*   带有来自微软的 JDBC 驱动程序的 java 100 万行 1 个带有准备好的语句的事务花费了 39 秒。

**JDBC 快 4 倍 为什么？**

我有点惊讶 .NET 这么慢，真的希望我的 .net 代码犯了一个大错误。所以有人知道什么是错的，或者为什么.NET 比 jdbc 慢得多？

.NET 代码：

```
SqlConnection con = new SqlConnection("Data Source=localhost;Initial Catalog=testameep;User Id=sa;Password=********;");
        con.Open();
        String tempString = "";
        for(int i = 0;i<400;i++)
        {
            tempString += "insert into test1 values (@A" + i.ToString() + ",@B" + i.ToString() + " );";
        }

        SqlCommand com = new SqlCommand(tempString,con);
        for (int i = 0; i < 400; i++)
        {
            com.Parameters.Add("@A" + i.ToString(), SqlDbType.Int);
            com.Parameters.Add("@B" + i.ToString(), SqlDbType.NVarChar,4000);
        }
        com.Transaction = con.BeginTransaction();
        DateTime start = DateTime.Now;
        com.Prepare();
        for(int i=0;i<2500;i++)
        {
            for (int j=0;j<800;j+=2)
            {
                com.Parameters[j].Value = i;
                com.Parameters[j + 1].Value = "test";
            }
            com.ExecuteNonQuery();
        }
        com.Transaction.Commit();
        label1.Text = "Query took:" + (DateTime.Now - start).TotalMilliseconds + " ms"; 
```

爪哇代码：

```
Class.forName( "com.microsoft.sqlserver.jdbc.SQLServerDriver" );
      String dbURL = "jdbc:sqlserver://localhost;databaseName=testameep;user=sa;password=*******";
      Connection dbCon = DriverManager.getConnection( dbURL, "sa" , "*******" );
      dbCon.setAutoCommit( false );

      String tempString = "";
      for(int i = 0;i<400;i++)
      {
          tempString += "insert into test1 values (?,?);";
      }
      System.out.println("Query start");
      long start = System.currentTimeMillis();
      PreparedStatement ps = dbCon.prepareStatement(tempString);
      for(int i=0;i<2500;i++)
      {
          for (int j=1;j<800;j+=2)
          {
              ps.setInt(j, i);
              ps.setString( j+1, "test");
          }
              ps.executeUpdate();
      //    ps.addBatch();
      }
          //This gave the same speed/result as using ps.executeUpdate();
      //ps.executeBatch();
      ps.close();
      dbCon.commit();
      double total = (double)(System.currentTimeMillis() - start) / 1000.0;
      System.out.printf("Query stop: %f seconds\n", total); 
```

更新：SQL Profiler 结果 .NET：

```
--Creating the prepared statement .NET
 declare @p1 int
 set @p1=1
 exec sp_prepexec @p1 output,N'@A0 int,@B0 nvarchar(4000),@A1 int,@B1 nvarchar(4000),@A2    int,@B2 nvarchar(4000),@A3 int,@B3 nvarchar(4000),@A4 int,@B4 nvarchar(4000),@A5 int,...(continues)
select @p1

--Inserting rows .NET
exec sp_execute   1,@A0=4,@B0='test',@A1=4,@B1='test',@A2=4,@B2='test',@A3=4,@B3='test',@A4=4,@B4='test',@A5=4,@B5='test',@A6=4,@B6='test',@A7=4,@B7='test',@A8=4,@B8='test',@A9=4,...(continues)
...
2500 rows 
```

SQL Profiler 结果 JDBC：

```
--Creating the prepared statment JDBC
declare @p1 int
set @p1=1
exec sp_prepexec @p1 output,N'@P0 int,@P1 nvarchar(4000),@P2 int,@P3 nvarchar(4000),@P4    int,@P5 nvarchar(4000),@P6 int,@P7 nvarchar(4000),@P8 int,@P9 nvarchar(4000),@P10 int,...  (continues)
select @p1

--Inserting rows JDBC
exec sp_execute   1,5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5,N'test',5...(continues)
...
2500 rows 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:27:17.697

```
 com.ExecuteNonQuery();  
    }  
    com.Transaction.Commit(); 
```

对比

```
 ps.addBatch(); 
  } 
  ps.executeBatch(); 
  ps.close();   
  dbCon.commit(); 
```

执行方法对我来说看起来不同

# java - 在 Spring 中将 @Cacheable 用于非参数方法

> ID：11389889
> 
> 赞同：3
> 
> 时间：2012-07-09T06:17:08.830
> 
> 标签：java, spring, caching, annotations

我正在使用 Spring 缓存 API，但遇到了一个问题：我有一个带有 CRUD 操作的 Dao 类，我想做的就是缓存一个无参数方法，它返回一个对象映射（键 - id，值 -实体）

```
class Dao implements IDao<Entity>{

    public Map<Integer, Entity> getAllEntities(){ /* retreiving from DB */ }

    public Entity getEntityByKey(Object key) { ... }

    public void insert(Entity entity){...}

    public void update(Entity entity){...}

    public void delete(Entity entity){...}

} 
```

谁能告诉我如何准确（和正确地）缓存 getAllEntities() 方法以获取实体，缓存 getEntityByKey 以按键获取实体，并且还能够在我执行创建、更新或删除操作时更新缓存？是否可以在更新后使用方法 getAllEntities 的可缓存版本（使用操作插入、更新、删除）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:52:35.417

尝试这个

```
class Dao implements IDao<Entity>{

    @Cacheable(value = "entity.all")
    public Map<Integer, Entity> getAllEntities(){ /* retreiving from DB */ }

    @Cacheable(value = "entity.item", key="#p0")
    public Entity getEntityByKey(Object key) { ... }

    @CacheEvict(value = {"entity.all", "entity.item"}, allEntries=true)
    public void insert(Entity entity){...}

    @CacheEvict(value = {"entity.all", "entity.item"}, allEntries=true)
    public void update(Entity entity){...}

    @CacheEvict(value = {"entity.all", "entity.item"}, allEntries=true)
    public void delete(Entity entity){...}

} 
```

# c# - Word VSTO外接程序开发：如何在RGB格式的Range中查找文本的颜色？

> ID：11389895
> 
> 赞同：1
> 
> 时间：2012-07-09T06:17:29.627
> 
> 标签：c#, vb.net, ms-word, vsto, add-in

我正在使用 C# 为 MS Word 开发一个加载项。我需要在 RGB 格式的 Range 对象中找到文本的颜色。

*   我尝试使用**Range.Font.Color**，它应该给出 RGB 值。但是我从中得到了负值和超出范围的值。
*   **Range.Font.TextColor**给了我一个 NotImplemented 异常。

我正在使用 Visual Studio 2010。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:20:41.103

这是一个小测试方法，可以将字体颜色的 html 样式标签放入文档中（我需要为粗体和斜体这样做，只是想看看我是否能得到颜色）如果你摆弄它，你可能能够得到你需要的 c# vsto for Word

```
private void TEST()
{
        Range currentWord = Globals.ThisAddIn.Application.ActiveDocument.Words.First;
        object collapseStartObj = WdCollapseDirection.wdCollapseStart;
        object oText = "";
        object oMiss = System.Reflection.Missing.Value;
        object oFindStop = WdFindWrap.wdFindStop;
        object oCountOne = 1;
        object oWordUnit = WdUnits.wdWord;
        int count = 0;
        while (currentWord != null)
        {
            count++;
            currentWord.Find.Font.Bold = currentWord.Font.Bold;
            currentWord.Find.Font.Italic = currentWord.Font.Italic;
            currentWord.Find.Font.ColorIndex = currentWord.Font.ColorIndex;
            string text = currentWord.Font.ColorIndex.ToString();
            string thatColor = Regex.Replace(text, @"\d", ""); //remove any digits
            string simpleColor = Regex.Replace(thatColor, "wd", "");//remove the wd
            //MessageBox.Show(simpleColor); //for testing

            currentWord.Find.Forward = true;
            currentWord.Find.Format = true;
            currentWord.Collapse(ref collapseStartObj);
            currentWord.Find.Execute(ref oText, ref oMiss, ref oMiss, ref oMiss, ref oMiss, ref oMiss, ref oMiss, ref oFindStop, ref oMiss, ref oMiss, ref oMiss, ref oMiss, ref oMiss, ref oMiss, ref oMiss);
            if (simpleColor != "NoHighlight")
            {
                try
                {
                    string theText = currentWord.Duplicate.Text;
                    string thatText = Regex.Replace(theText, "\r", "");//get rid of carriage return

                    currentWord.Find.Execute(FindText: thatText, Format: true, ReplaceWith: "<font style = \"color:" + simpleColor + "\">^&</font>", MatchWildcards: true, Replace: Word.WdReplace.wdReplaceOne);

                }
                catch { }
            }
        currentWord = currentWord.Next(ref oWordUnit, ref oCountOne);
        }    
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T12:43:48.857

[使用 Don Rotman 的将 Word 2007 的 WdColor 转换为 .NET 颜色类](http://blogs.microsoft.co.il/blogs/dorr/archive/2008/11/16/converting-word-2007-s-wdcolor-to-net-color-class.aspx)的扩展方法将 Range.Font.Color 转换为 System.Drawing.Color

```
 MSWord.WdColor color = app.Selection.Range.Font.Color;
 Color myColor = color.ToColor(); //ToColor is the extension method described in link 
```

现在，即使 Range.Font.Color 没有返回像 WdOrange 这样的实际枚举值，而是返回如下内容： -654245889 ，它也会被转换为包含所有 RGB 数据的 System.Drawing.Color 对象。

为我工作。对你起作用吗？

# symfony - symfony2 中约束消息的翻译问题

> ID：11389899
> 
> 赞同：0
> 
> 时间：2012-07-09T06:18:37.897
> 
> 标签：symfony, constraints, translation, validation

我按照此链接[http://symfony.com/doc/current/book/translation.html#translating-database-content](http://symfony.com/doc/current/book/translation.html#translating-database-content)将 validators._my_locale_.xlf 复制到我的包中，并自定义了翻译，但它没有用，我将我的语言环境设置为：

> 翻译器：{ 后备：%locale% }

无论我修改了什么，甚至做了一些错误的语法，它什么也没发生，我猜翻译器没有指向我的验证器文件，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:50:30.930

添加新的翻译资源后，您必须清除缓存。

# c# - 防止两个接口之间的转换

> ID：11389900
> 
> 赞同：1
> 
> 时间：2012-07-09T06:18:53.743
> 
> 标签：c#, .net, interface, polymorphism, implementation

我有一个内部类，其中包含不应公开访问的实现细节，包括属性。我必须将这个类传递给公共调用者，并允许他们传递它、存储它、序列化它，或者基本上做他们想做的任何事情。可以通过两种不同的方式公开访问该类。这些方式公开为两个公共接口。我想阻止用户在两个公共接口之间进行转换。这是一些代码来演示我在说什么。

```
void Main()
{
    var container = new ContainsDetails(5);

    Console.WriteLine(container.LessDetail.TheDetails);
    var more = (ContainsDetails.IFooPlus)(container.LessDetail);
    more.TheDetails = 10;
    Console.WriteLine(container.LessDetail.TheDetails);
}

public class ContainsDetails {
    public interface IFooPlus {
        int TheDetails {
            get;
            set;
        }
    }

    public interface IFoo {
        int TheDetails {
            get;
        }
    }

    private readonly Detail _myDetail;

    public ContainsDetails(int x) {
        _myDetail = new Detail(x);
    }

    public IFoo LessDetail {
        get {
            return _myDetail;
        }
    }

    public IFooPlus MoreDetail {
        get {
            return _myDetail;
        }
    }

    public bool ProcessFoo(IFoo foo) {
        var theDeets = foo as Detail;
        if (theDeets != null) {
            return theDeets.TheDetails++%2 == 0;
        } else {
            throw new ArgumentException("foo argument must have originated from ContainsDetails.");
        }
    }

    private class Detail : IFooPlus, IFoo {
        private int _myX;

        private Detail() {}

        internal Detail(int x) {
            _myX = x;
        }

        public int TheDetails {
            get {return  _myX; }
            set { _myX = value; }
        }
    }
} 
```

输出是：

```
5
10 
```

我希望上面的输出是：

```
5
System.InvalidCastException thrown..... 
```

该课程`ContainsDetails`只是为了演示而存在。在我的实际代码中，程序集扮演`ContainsDetails`. 同样，`Detail`是我实际代码中的一个`internal`类。

在这里，用户知道`IFooPlus`和`IFoo`。用户不知道`Detail`存在。用户也不知道返回的对象`LessDetail`可以转换为`IFooPlus`. 我的代码`Detail`在不同时间向用户返回相同的对象，并将其作为`IFoo`或`IFooPlus`取决于某些复杂的状态`Detail`和其他内部对象返回。还要注意中的`ProcessFoo`方法`ContainsDetails`。我的代码需要能够接受`IFoo`来自用户的 a，并将其作为`Detail`.

我想让演员`var more = (ContainsDetails.IFooPlus)(container.LessDetail)`生成一个`InvalidCastException`. `IFooPlus`对所有操作进行运行时检查以确定`Detail`对象是否处于这些操作的正确状态是非常昂贵的。相反，我希望用户永远不能将 a`IFoo`视为`IFooPlus`.

我能想到的唯一选择是在其中嵌入一些`IFoo`成员子类，`Detail`并让 the`Detail`和子类相互引用。呸。

是否有防止这种类型转换的最佳实践，或者我应该将`IFoo`功能包含在成员子类中`Detail`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:25:32.677

最简单的方法是拥有一个只读包装器，它具有对可写包装器的引用。所以`LessDetail`总是会返回相同的包装器引用，但`MoreDetail`会返回对“真实”类型的引用。然后，您可以使它们都实现一个*内部*接口，该接口允许您做任何您需要做的事情，包装器可能会将这些调用代理到底层对象。

或者，您可以尝试重新审视您的设计 - 目前听起来并不理想，无论是不能在类型之间进行转换，还是在编译时`ProcessFoo` *接受*任何类型，但*实际上*只能处理一个特定的执行。这对我来说就像是滥用继承权。`IFoo`

# ruby - 使用 Ruby 在谷歌驱动器中创建文件夹

> ID：11389901
> 
> 赞同：4
> 
> 时间：2012-07-09T06:18:57.953
> 
> 标签：ruby, rubygems, google-drive-api

我正在使用 Ruby 和 Google Drive API。
如何在根位置创建文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:43:28.157

A folder in Google Drive is essentially a file with MIME type `application/vnd.google-apps.folder`, so you can use the Ruby code in the Reference guide and set the `mimeType` field to that value.

Check the docs for the complete snippet:

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

# android - 循环内的 AsyncTask

> ID：11389903
> 
> 赞同：1
> 
> 时间：2012-07-09T06:19:13.603
> 
> 标签：android, multithreading, android-asynctask, threadpool

基本上我想启动几个线程一个接一个地执行。我正在使用`Thread.join()`它。但是应用程序类型挂起并进入 ANR 状态。我想知道将 AsyncTask 放入循环中会一个接一个地串行执行所有任务，还是并行执行？

```
for(String s : list)
{
    new asynctask(s).execute();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:31:33.233

> 基本上我想启动几个线程一个接一个地执行。

阅读此声明后，我立即想到的是您应该考虑使用 IntentService 而不是每次都创建新任务。

基本上 IntentService 是

> IntentService 通过 Intent 接收一个请求，其中包含一些关于要完成的任务的信息。然后将此任务添加到队列中，然后按顺序异步完成所有任务。

使用的好处`IntentService`是

它将保证该操作至少具有“服务进程”优先级，无论活动发生什么情况。强烈建议您要顺序下载多个文件时。

在这里你会找到关于如何实现的非常好的教程`IntentService`。

[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/)

# mobile - 使网站准备好移动

> ID：11389906
> 
> 赞同：1
> 
> 时间：2012-07-09T06:19:26.307
> 
> 标签：mobile

我有一个网站，我希望它可以移动。我发现 Kurogo 对静态网站很有帮助。但是当我有一个有很多表格和所有表格的网站时，这没有用。这是将网站转换为移动设备的最佳方式，它有许多表格，添加，编辑，更新表格等等。我将 php/mysql 用于我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:20:02.890

you can always try to use [bootstrap](http://twitter.github.com/bootstrap/) or [zurb foundation](http://foundation.zurb.com/) and then load the css using a media query

# r - R 高效循环建议

> ID：11389908
> 
> 赞同：0
> 
> 时间：2012-07-09T06:19:32.393
> 
> 标签：r, loops, dataframe

我有一个大约 500,000 行的数据框。其中一列包含正整数值，例如列 A。假设有另一列 B

我现在需要创建第二个数据帧，其行数等于 sum(dataframe$A)。这个完成了。

当我需要用数据填充这个新数据框时，就会出现性能问题。我正在尝试为第二帧创建一个 A2 列，如下所示：

```
A2<-vector() 
for (i in 1:nrow(dataframe)){
  A2<-c(A2,rep(dataframe$B[i],dataframe$A[i]))
} 
```

对于正在处理的大量行，外部循环显然非常慢。有关如何以更快的处理速度完成此任务的任何建议。

感谢您的回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T06:26:08.090

您根本不需要循环。 `rep`已经矢量化了。

```
A2 <- rep(dataframe$B, dataframe$A) 
```

应该管用。作为一个可重现的示例，这是您使用内置`mtcars`数据集的方式。

```
x <- vector()
for(i in 1:nrow(mtcars)) {x <- c(x, rep(mtcars$cyl[i], mtcars$gear[i]))}
> x
  [1] 6 6 6 6 6 6 6 6 4 4 4 4 6 6 6 8 8 8 6 6 6 8 8 8 4 4 4 4 4 4 4 4 6 6 6 6 6
 [38] 6 6 6 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 8
 [75] 8 8 8 8 8 8 8 8 8 8 8 4 4 4 4 4 4 4 4 4 4 4 4 4 4 8 8 8 8 8 6 6 6 6 6 8 8
[112] 8 8 8 4 4 4 4 
```

并矢量化，它是：

```
x2 <- rep(mtcars$cyl, mtcars$gear)
> x2
  [1] 6 6 6 6 6 6 6 6 4 4 4 4 6 6 6 8 8 8 6 6 6 8 8 8 4 4 4 4 4 4 4 4 6 6 6 6 6
 [38] 6 6 6 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 8
 [75] 8 8 8 8 8 8 8 8 8 8 8 4 4 4 4 4 4 4 4 4 4 4 4 4 4 8 8 8 8 8 6 6 6 6 6 8 8
[112] 8 8 8 4 4 4 4 
```

这将比使用循环快几个数量级。

# android - 无法通过键盘输入安卓应用程序？

> ID：11389909
> 
> 赞同：0
> 
> 时间：2012-07-09T06:19:36.843
> 
> 标签：android

我想通过键盘在 android 应用程序中输入用户名和密码，但我不能这样做？请帮帮我？并给出适当的解决方案。这是所有 android 应用程序的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:29:45.713

点击 Windows->AVD 管理器->

之后会出现一个漂亮的窗口来管理你的虚拟设备，然后点击“编辑”

在那里你可以显示“硬件：”.....点击“新建”按钮......

在“属性：”标题下选择“键盘支持”...然后按“确定”...

在此之后，您可以在“硬件：”网格中看到...在其中选择“是”..以获得键盘支持....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:30:17.633

ADT 20 更新后删除了默认键盘支持。

您可以通过编辑 AVD 自行启用它

请检查以下网址

[https://android.stackexchange.com/questions/23333/how-can-i-use-my-pcs-keyboard-on-the-android-emulator](https://android.stackexchange.com/questions/23333/how-can-i-use-my-pcs-keyboard-on-the-android-emulator)

# windows - IE8如何让最大并发连接数为1

> ID：11389912
> 
> 赞同：0
> 
> 时间：2012-07-09T06:19:51.243
> 
> 标签：windows, internet-explorer, registry

目前我可以在 IE8 的 Windows 注册表中设置 FEATURE_MAXCONNECTIONSPERSERVER 和 FEATURE_MAXCONNECTIONSPER1_0SERVER 的值，以确定[链接后的最大并发连接数](http://msdn.microsoft.com/en-us/library/cc304129%28VS.85%29.aspx)

它在我设置大于或等于 2 的值时起作用。但是当我将值设置为 1 时，可能仍然有 2 个并发连接。我是否可以同时为 IE8 建立一个连接？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T11:54:56.960

根据文档[MSDN](http://msdn.microsoft.com/en-us/library/ie/ee330731(v=vs.85).aspx)，“FEATURE_MAXCONNECTIONSPERSERVER”和“FEATURE_MAXCONNECTIONSPER1_0SERVER”的指定值必须介于 2 和 128 之间。

# mysql - 从mysql中的多个表中选择多个列

> ID：11389913
> 
> 赞同：0
> 
> 时间：2012-07-09T06:19:52.087
> 
> 标签：mysql, stored-procedures

以下是我的查询

```
select p.problem_id,
       p.problem_title,
       p.description,
       paps.problem_external_source_id, 
       paps.problem_and_problem_source_id 
  from problem_backup p,
       problem_and_problem_source paps 
 where p.problem_id=paps.problem_id and paps.free_user_id!='null'; 
```

我的问题是如何根据检索到的列选择另一个表列（即在我的查询中，我想根据问题_and_problem_source_id 从另一个表中选择更多列），我想在同一个查询中做，我们可以做整个过程中的工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:20:11.073

您可以以相同的方式加入另一张桌子。注意`paps.free_user_id!='null'`应该是`paps.free_user_id is not null`，除非你的意思是 user_id 真的是字符串`'null'`。

```
select p.problem_id,
       p.problem_title,
       p.description,
       paps.problem_external_source_id, 
       paps.problem_and_problem_source_id,
       yat.*
from problem_backup p
inner join problem_and_problem_source paps
  on  p.problem_id = paps.problem_id
inner join your_another_table yat
  on paps.problem_and_problem_source_id = yat.join_column_name
where  paps.free_user_id is not null 
```

# java - 每次应用程序重新启动时重新创建 SQLite 数据库表

> ID：11389914
> 
> 赞同：1
> 
> 时间：2012-07-09T06:20:04.863
> 
> 标签：java, android

我是 Android 开发的新手。我的申请有问题。每次系统重新启动时，我的 SQLite 数据库表都会重新创建，并且所有保存的内容都会从表中删除。谁能帮我解决这个问题？

这是我的数据库类....

```
package Nsh.android.sms;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.provider.SyncStateContract.Helpers;

public class Database {

public static final String MYDATABASENAME="Mylanguagedbnew.db";
 public static final String MYDATABASETABLE="Mylanguagedb_table1";
public static final int MYDATABASEVERSION=1;
 public static final String KEY_id="_id";
public static final String KEY_language="languages";
public static final String KEY_description="languagedescription";
private static final String SCRIPT_CREATE_DATABASE="create table if not exists
"+MYDATABASETABLE+" ("+KEY_id+" integer primary key autoincrement, "+KEY_language+" 
text not null, "+KEY_description+ " text not null);";
private datahelper sqliteopenhelper;
public static String userselectedlang;
private SQLiteDatabase sqlitedatabase;
private Context context;
 public Database(Context c){
System.out.println("DBcontext!!!1111");
 context=c; 
  }
 public Database openToread()throws android.database.SQLException{
System.out.println("DBINSERTTTTTTTTT!!!OPENREAD22222");
    sqliteopenhelper=new datahelper(context,MYDATABASENAME,null,MYDATABASEVERSION);
    System.out.println("DBINSERTTTTTTTTT!!!OPENREAD22222");
    sqlitedatabase=sqliteopenhelper.getReadableDatabase();
    System.out.println("DBINSERTTTTTTTTT!!!OPENREAD22222");
    return this;
     }
  public Database openTowrite()throws android.database.SQLException{
System.out.println("DBINSERTTTTTTTTT!!!OPENWRITE22222");
sqliteopenhelper=new datahelper(context,MYDATABASENAME,null,MYDATABASEVERSION);
sqlitedatabase=sqliteopenhelper.getWritableDatabase();
return this;
  }
 public void close(){
sqliteopenhelper.close();
 }  
  public Cursor retriveall(){
  System.out.println("RETRIEVE ALL OK!!!!!!!!!");
String[] columns={KEY_id,KEY_language,KEY_description};
Cursor cursor=sqlitedatabase.query(MYDATABASETABLE, columns,null,null,null,null,null);
return cursor;
  } 
  public Cursor retrivelanguages(){
String[] columns={KEY_language};
Cursor c=sqlitedatabase.query(MYDATABASETABLE, columns,null,null,null,null,null);
return c;
    }
  public Cursor retrieveselectedlanguagedecription(){
userselectedlang=listlang.selectedlanguage;
String query="select languagedescription from Mylanguagedb_table1 where languages 
      ='"+userselectedlang+"';";
Cursor c1=sqlitedatabase.rawQuery(query,null);
return c1;
   }
     public long insert(String language,String languagedescription){
System.out.println("DBINSERTTTTTTTTT!!!INSERT !!!!!!!!!1111");
ContentValues contentvalues=new ContentValues();
contentvalues.put(KEY_language,language);
contentvalues.put(KEY_description,languagedescription);
return sqlitedatabase.insert(MYDATABASETABLE, null,contentvalues);
    }
   public int deleteall(){

 return sqlitedatabase.delete(MYDATABASETABLE,null,null);
    }
   /*public int deleterow(){
String selectedrow=listlang.selectedlanguage;

return sqlitedatabase.delete(MYDATABASETABLE,selectedrow, null);
    }*/
     private static class datahelper extends SQLiteOpenHelper{

public datahelper(Context context, String name, CursorFactory factory,
        int version) {
    super(context, name, factory, version);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL(SCRIPT_CREATE_DATABASE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    //db.update(table, values, whereClause, whereArgs)
}

   }    
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:24:35.013

当应用程序启动时，如果不存在，它将创建新的数据库和表，否则它将继续退出数据库。

将此代码放在**应用程序的启动活动的 onCreate()**方法中，以检查数据库是否已经存在。

```
//this is  the name of my database
public static final String DATABASE_NAME = "mydatabase.db";

//this is the complete path of my database stored. you can check in DDMS
public static final String DATABASE_PATH = "/data/data/com.rdc.mydatabase/databases/";

Context context = getBaseContext();

boolean databaseStatus = checkDataBase( DATABASE_PATH,DATABASE_NAME);
//this will check when app start
if (databaseStatus == false) {

    DBAdapter database = new DBAdapter(context);
    //here you can call your create table method 
    //database.createLoginTable();
    Log.v("Debug", "Login table created.");
}
else{
    Log.v("Debug", "Database already exist");
}

//method to check whether db is already exist or not and returns boolean
private boolean checkDataBase(String databasePath, String databaseName) {
        SQLiteDatabase checkDB = null;
        try {
            checkDB = SQLiteDatabase.openDatabase(databasePath + databaseName,
                    null, SQLiteDatabase.OPEN_READONLY);
            checkDB.close();
            Log.v("Debug", "Database exist");
            return true;
        } catch (SQLiteException e) {
            Log.v("Debug", "Database not exist");

        }
        return false;
    } 
```

我希望它会帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:04:36.187

`SharedPreferences`你可以通过使用in 方法解决这个问题`onCreate()`，你可以限制数据的插入（如果是固定数据）只有在应用程序第一次执行时才可以。这样可以解决重复问题。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        SharedPreferences pref = getSharedPreferences(PREFS_NAME1,MODE_PRIVATE);   
        boolean first1 = pref.getBoolean(PREF_FIRST1, false);

        if(first1!=true)
        {
            getSharedPreferences(PREFS_NAME1,MODE_PRIVATE)
            .edit()
            .putBoolean(PREF_FIRST1, true)
            .commit();

            // insert data here or use Background Task to do that 
        }

    } 
```

# objective-c - UIButton 事件。有什么不同？

> ID：11389915
> 
> 赞同：76
> 
> 时间：2012-07-09T06:20:14.307
> 
> 标签：objective-c, ios, uibutton, ibaction

我遇到了一个问题，我的按钮在显示从中调用的弹出框时应该保持“按下”状态。弹出框是某些过滤器的选择器，过滤器显示在按钮本身上。当我点击它并显示弹出框时，无论如何它都会被取消选择。

我想我必须重新定义它在触摸事件上的行为，并让它不响应标准`touch up inside`。然后我想知道其他事件负责什么？但我在 iOS 库和 StackOverflow 中找不到事件列表，只是关于`touch up inside`or的不正确行为的问题`touch down`。

那么触摸事件之间有什么区别呢？

1.  触摸取消 - 当您触摸按钮但将手指移开并保持取消选择时？
2.  触地 - 就在水龙头上。
3.  着陆重复？？
4.  触摸拖动进入？？
5.  触摸拖动退出？？
6.  触摸拖动里面？？
7.  触摸拖到外面？？
8.  内部修饰 - 当您点击并释放按钮时，仍留在其范围内。它将 UIButtons 状态更改为 Normal。
9.  在外面修饰 - 当您点击并释放按钮时离开它的界限？

UIButton 不会发送其他 IBAction，对吧？还有这些事件如何改变 UIButton 的外观？喜欢`highlighted`还是`selected`？

我很感激有关 IBActions 的好文章的链接，因为我找不到它。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-07-09T06:30:53.837

来自[Apple 的文档`UIControlEvents`](https://developer.apple.com/documentation/uikit/uicontrolevents?language=objc)：

> 1.  `UIControlEventTouchCancel`
>     
>     
>     
>     取消控件当前触摸的系统事件。
>     
>     
> 2.  `UIControlEventTouchDown`
>     
>     
>     
>     控件中的触地事件。
>     
>     
> 3.  `UIControlEventTouchDownRepeat`
>     
>     
>     
>     控件中的重复触地事件；对于此事件，UITouch tapCount 方法的值大于一。
>     
>     
> 4.  `UIControlEventTouchDragEnter`
>     
>     
>     
>     手指被拖入控件边界的事件。
>     
>     
> 5.  `UIControlEventTouchDragExit`
>     
>     
>     
>     手指从控件内拖动到其边界外的事件。
>     
>     
> 6.  `UIControlEventTouchDragInside`
>     
>     
>     
>     在控件边界内拖动手指的事件。
>     
>     
> 7.  `UIControlEventTouchDragOutside`
>     
>     
>     
>     手指被拖动到控件边界之外的事件。
>     
>     
> 8.  `UIControlEventTouchUpInside`
>     
>     
>     
>     手指位于控件边界内的控件中的触摸事件。
>     
>     
> 9.  `UIControlEventTouchUpOutside`
>     
>     
>     
>     手指在控件边界之外的控件中的触摸事件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-04-28T23:42:20.300

列出，我会考虑，一个普通按钮的常见使用顺序/出现的可能性：

**UIControlEventTouchDown**：用户点击了按钮。这会在手指/触笔接触时触发。

**UIControlEventTouchUpInside**：用户点击了按钮。这会触发从屏幕拉回的手指/触控笔触点。

* * *

对于滑块和拖动事件（例如移动组件）很有用。以下按出现顺序排列：

**UIControlEventTouchDragInside**：当手指拖入按钮区域时触发。

**UIControlEventTouchDragExit**：在拖动动作期间触发。它只被调用一次，因为用户的手指/触控笔离开了按钮的边界。

**UIControlEventTouchDragOutside**：在拖动动作期间触发，在“UIControlEventTouchDragExit”之后，只要原始触摸继续，**就会连续调用。**

**UIControlEventTouchUpOutside**：这只是手指/触控笔被抬起但仅当手指/触控笔不再在按钮范围内时。需要指出的重要事情（可能很明显）是触摸必须在某个时间点在按钮内才能将此事件与按钮相关联。

注意：我的理解是以上内容可以帮助：

1.  滑块：正如您所料，触摸可能是有意的，但由于快速滑动动作，他们的手指移动可能马虎并抬起到滑块区域之外。
2.  四处移动组件，例如当您在屏幕上推动事物时，您希望在手指/触控笔触摸组件/对象的边界时发生移动。

* * *

其他活动：

**UIControlEventTouchCancel**：用户无法控制的东西正在取消他们的触摸动作。将此视为电话方面的“出错”。

**UIControlEventTouchDownRepeat**：想要检测用户何时生气并疯狂地点击按钮？想要检测他们是否仍处于 Windows 模式并尝试“双击”？或者，也许你设计了一个按钮，如果他们点击两次，就可以做一些不同的事情。这个活动对所有这些都有帮助！

* * *

参考：

[SO 1](https://stackoverflow.com/questions/1304774/wheres-the-difference-between-uicontroleventtouchdragoutside-and-uicontrolevent/1307485)：UIControlEventTouchDragOutside 和 UIControlEventTouchDragExit 之间的差异

[SO 2](https://stackoverflow.com/questions/34931183/what-is-uicontroleventtouchcancel)：什么是 UIControlEventTouchCancel？

# ant - ant 自定义任务，我应该在哪里放置新的类文件？

> ID：11389916
> 
> 赞同：0
> 
> 时间：2012-07-09T06:20:15.537
> 
> 标签：ant

编写自己的任务应该是一项简单的任务。根据文档，您只需要扩展 org.apache.tools.ant.Task。该站点提供了一个简单的类示例：

```
package com.mydomain;

import org.apache.tools.ant.BuildException;
import org.apache.tools.ant.Task;

public class MyVeryOwnTask extends Task {
    private String msg;

    // The method executing the task
    public void execute() throws BuildException {
        System.out.println(msg);
    }

    // The setter for the "message" attribute
    public void setMessage(String msg) {
        this.msg = msg;
    }
} 
```

为了使用 build.xml 使用它：

```
<?xml version="1.0"?>

<project name="OwnTaskExample" default="main" basedir=".">
    <taskdef name="mytask" classname="com.mydomain.MyVeryOwnTask"/>

    <target name="main">
        <mytask message="Hello World! MyVeryOwnTask works!"/>
    </target>
</project> 
```

我的问题是，我应该把 MyVeryOwnTask.java 文件放在哪里，它应该是 .jar 文件吗？它应该以某种方式与 build.xml 文件相关吗？com.mydomain.MyVeryOwnTask 是不是像eclipse中的java项目一样代表文件结构？

我的 ant 目录是 C:\ant。我设置了所有环境变量。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:48:52.700

最好的方法是将它放在一个 jar 文件中，然后在指向 jar的`<classpath>`内部添加一个：`<taskdef>`

```
<taskdef name="mytask" classname="com.mydomain.MyVeryOwnTask">
  <classpath>
    <fileset file="mytask.jar"/>
  </classpath>
</taskdef> 
```

您可以将 jar 放在 ant 自己的 lib 目录中，然后您不需要类路径，但是使用上面的显式类路径元素意味着您的构建文件将与标准的未修改的 ant 安装一起使用，因此进入是一个好习惯特别是如果您要与其他开发人员合作。

# javascript - 实现树视图的最佳方法是什么？

> ID：11389920
> 
> 赞同：0
> 
> 时间：2012-07-09T06:20:34.597
> 
> 标签：javascript, jquery, css, html-lists

我正在使用嵌套的 ul li 标签构建树视图，如下所示：

```
 <ul>
        <li>Level 1 a
            <ul>
                <li>Level 2 a</li>
                <li>Level 2 b
                    <ul>
                        <li>Level 3 a</li>
                        <li>Level 3 b</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>Level 1 b</li>
    </ul> 
```

当在树视图中导航时，我希望列表项在单元格上是可点击的，如下所示：

![在此处输入图像描述](../Images/460e32d937442b8bae205fa04c3051d5.png)

我知道我们可以在列表项上添加 JavaScript 函数，如下所示：

```
 <li onClick="redicrectPage(url)"> 
```

并添加`event.cancelBubble = true`以避免在单击子项时触发父事件。

我的问题是，上面的实现有什么更好的跨浏览器解决方法吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:05:00.070

您可以单独在 CSS 中创建嵌套菜单结构，这将消除冒泡问题。[http://jsfiddle.net/steveukx/HfDBA/](http://jsfiddle.net/steveukx/HfDBA/)上的示例使用直接后代选择器能够重复相同的选择器而无需知道菜单的深度，但如果您支持的浏览器没有这个功能，您应该更改 HTML 以添加类以命名树中的深度并在 CSS 中指定它们。

HTML：

```
<ul class="menu">
    <li><a href="#">Level 1 a</a>
        <ul>
            <li><a href="#">Level 2 a</a></li>
            <li><a href="#">Level 2 b</a>
                <ul>
                    <li><a href="#">Level 3 a</a></li>
                    <li><a href="#">Level 3 b</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a href="#">Level 1 b</a></li>
</ul>​ 
```

CSS

```
* { font-family: tahoma, sans-serif; font-size: 10pt; }
a { text-decoration: none; color: #fff; display: block; }
ul { display: none; }
ul.menu, li:hover > ul { display: block; }
li > ul { position: absolute; top: 25%; left: 100%; margin-left: -1em; 
   box-shadow: -1px 1px 1px rgba(0,0,0,0.5); z-index: 1000; }
li { position: relative; padding: 0.1em 0.5em; width: 100px; background: silver;
   box-shadow: -1px 1px 1px rgba(0,0,0,0.5); margin: 1px 1px 0; }
li:hover { background-color: #333; }
li:hover > a { color: #FAFAFE; } 
```

​</p>

# c# - 如何使用 C# 在 gridview 中获取复选框的值？

> ID：11389928
> 
> 赞同：0
> 
> 时间：2012-07-09T06:21:09.573
> 
> 标签：c#, wpf, gridview, checkbox

我想在 a`CheckBox`中获取 a 的值`GridView`。我可以绑定`GridView`使用事件`RowDataBound`。但是在发生`Click`事件时，`Button`即使`CheckBox`我检查了`CheckBox`.

代码背后：

```
 protected void GridView1_RowDatabound(object sender, GridViewRowEventArgs e)
    {

        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            DropDownList dddate = (DropDownList)e.Row.FindControl("DdlDate");
            DropDownList ddYear = (DropDownList)e.Row.FindControl("DdlYear");
            for (int i = System.DateTime.Now.Year; i > (System.DateTime.Now.Year) - 100; i--)
                ddYear.Items.Add(Convert.ToString(i));
            for (int i = 1; i < 32; i++)
                dddate.Items.Add(Convert.ToString(i)); 
        }
    }
    protected void btnRetrieveCheck_Click(object sender, EventArgs e)
    {
        foreach (GridViewRow row in GridView1.Rows)
        {
            CheckBox cb = (CheckBox)row.FindControl("chkSel");
            if (cb != null && cb.Checked)
            {

                DropDownList dddate = (DropDownList)row.FindControl("DdlDate");              //Bind data to the GridView control.
                DropDownList ddYear = (DropDownList)row.FindControl("DdlYear");
                DropDownList ddmonth = (DropDownList)row.FindControl("DdlMonth");

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:27:51.023

您应该连接到复选框上的 Checked 事件而不是 click 事件。

你的问题不是很清楚。你能发布更多的代码。例如，什么是 btnRetrieveCheck - 它是实际的复选框吗？请使用您的 XAML 更新问题，以便我们可以查看已设置的绑定。

# sql - 设置触发订单使用

> ID：11389929
> 
> 赞同：0
> 
> 时间：2012-07-09T06:21:09.627
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我们可以通过使用`sp_settriggerorder`命令将触发器的 order 选项设置为 first、last 或 none。我想知道设置触发顺序有什么意义。什么时候需要使用这个选项？

我用`SQL Server 2008 R2`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:07:01.330

一个目的是，如果您希望一个触发器在其他触发器（可能具有昂贵的操作）触发之前执行某种形式的健全性检查。如果`first`触发器导致 a`ROLLBACK`发生，则不会触发其他触发器：

```
create table T (
    ID int not null
)
go
create trigger T1
on T
after insert
as
    RAISERROR('T1',10,1) WITH NOWAIT
go
create trigger T2
on T
after insert
as
    RAISERROR('T2',10,1) WITH NOWAIT
go
create trigger T3
on T
after insert
as
    RAISERROR('T3',10,1) WITH NOWAIT
go
sp_settriggerorder 'T1','First','Insert'
go
sp_settriggerorder 'T3','Last','Insert'
go
insert into T(ID) values (1)
--T1
--T2
--T3

--(1 row(s) affected)
go
alter trigger T1
on T
after insert
as
    RAISERROR('T1',10,1) WITH NOWAIT
    ROLLBACK TRANSACTION
go
insert into T(ID) values (2)
--T1
--Msg 3609, Level 16, State 1, Line 1
--The transaction ended in the trigger. The batch has been aborted. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:27:39.167

[它指定](http://msdn.microsoft.com/en-us/library/ms186762.aspx)当多个触发器应用于 SQL 语句时触发器触发的顺序。您只能为特定表、数据库或服务器指定一个第一个或最后一个触发器。

# http - url重定向时如何修复wget下载文件名

> ID：11389933
> 
> 赞同：14
> 
> 时间：2012-07-09T06:21:21.967
> 
> 标签：http, shell, url, download, wget

`Wget`301/302 重定向时无法检测文件名。例如，从[http://www.mysql.com/downloads/mirror.php?id=408580下载 MySQL 源代码](http://www.mysql.com/downloads/mirror.php?id=408580)

```
wget http://www.mysql.com/get/Downloads/MySQL-5.5/mysql-5.5.25a-linux2.6-x86_64.tar.gz/from/http://cdn.mysql.com/ 
```

该文件将另存为`index.html`

```
wget http://cdn.mysql.com/Downloads/MySQL-5.5/mysql-5.5.25a-linux2.6-x86_64.tar.gz 
```

该文件将另存为`mysql-5.5.25a-linux2.6-x86_64.tar.gz`

但第一个 url 只是第二个 URL 的重定向，如下所示：

```
curl -I http://www.mysql.com/get/Downloads/MySQL-5.5/mysql-5.5.25a-linux2.6-x86_64.tar.gz/from/http://cdn.mysql.com/

HTTP/1.1 302 Found
Date: Mon, 09 Jul 2012 06:11:50 GMT
Server: Apache/2.2
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: mirror=http%3A%2F%2Fcdn.mysql.com%2F; expires=Sat, 08-Jul-2017 06:11:50 GMT; path=/
Location: http://cdn.mysql.com/Downloads/MySQL-5.5/mysql-5.5.25a-linux2.6-x86_64.tar.gz
Content-Encoding: gzip
Vary: Accept-Encoding
Content-Type: text/html; charset=utf-8 
```

如何`wget`将[http://www.mysql.com/get/Downloads/MySQL-5.5/mysql-5.5.25a-linux2.6-x86_64.tar.gz/from/http://cdn.mysql.com/](http://www.mysql.com/get/Downloads/MySQL-5.5/mysql-5.5.25a-linux2.6-x86_64.tar.gz/from/http://cdn.mysql.com/)保存为“.tar.gz”自动（不使用`-O`参数）？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-09T06:54:44.780

尝试以下命令：

```
wget --content-disposition http://www.mysql.com/get/Downloads/MySQL-5.5/mysql-5.5.25a-linux2.6-x86_64.tar.gz/from/http://cdn.mysql.com/ 
```

*当此设置为 on 时，将启用对“ Content-Disposition* ”标头的实验性（非全功能）支持。这可能会导致额外的“HEAD”请求往返服务器，并且已知会遭受一些错误，这就是默认情况下当前未启用它的原因。

该选项对于一些使用“ *Content-Disposition* ”标头来描述下载文件的名称的文件下载 CGI 程序很有用。

# html - 使用 CSS 附加 HTML 的 AJAX 最佳实践

> ID：11389935
> 
> 赞同：0
> 
> 时间：2012-07-09T06:21:27.203
> 
> 标签：html, ajax

我正在使用 AJAX 更新我网站中的内容。我的索引页面只有一个菜单栏和一个'#content' div，其中附加了动态 HTML。

我使用的服务器没有 PHP 或数据库功能，因此没有使用 JSON。我直接从服务器下载 HTML 页面并填充索引。我不确定使用 CSS 设置动态页面样式的最佳方式是什么。我应该将样式表链接到索引页面还是每个内容页面？

还需要在内容页面中放置标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:31:25.340

取决于你有多少 CSS。但最可能的最佳解决方案是将所有 CSS 合并到一个文件中，然后从索引页面链接到它，这样做的好处是浏览器可以缓存它，这意味着它保留了一份副本而不必下载它多次。

就内容页面中的标签而言，如果您需要它们，请使用它们，如果您不需要它们，请不要使用它们。

# iphone - 什么时候按钮（UIButton）的目标不是“自我”？

> ID：11389936
> 
> 赞同：2
> 
> 时间：2012-07-09T06:21:36.970
> 
> 标签：iphone, ios, uiviewcontroller, uibutton, action

我是 iOS 的初学者，在编程教程中以编程方式添加按钮时，目标始终设置为 self，并且在创建它的那个控制器中，`IBAction`编写了一个动作 ()。或者通过界面生成器，将目标设置为文件的所有者。

我的问题是，在什么情况下（一个例子会很好）那个目标不是自我。

我能想到的一种情况是，在类的（不是 a `ViewController`）方法中，根据条件创建按钮，因为该类不是 a `ViewController`，在初始化该类的对象时，`ViewController`将设置对当前的引用如果按钮出现，它将用作为按钮定义操作的目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T06:30:36.980

您可以将选择器指向任何目标 - 通常`self`是目标的原因是因为在代码中实例化 UIButton/UIBarButtonItem 是很正常的，因此很多教程都将选择器引用的实现包含在同一类中。

例如，您可以创建一个在 View Controller 中实例化时仅处理这些按钮调用操作的类：

```
#import <UIKit/UIKit.h>
#import "OtherObject.h"

@interface SomeViewController : UIViewController

@property (strong, nonatomic) OtherObject *other;

@end

@implementation SomeViewController

@synthesize other;

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIButton *someButton = [[UIButton alloc] initWithFrame:CGRectZero];
    [someButton addTarget:other action:@selector(someMethodInOther) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:someButton];

    UIButton *anotherButton = [[UIButton alloc] initWithFrame:CGRectZero];
    [anotherButton addTarget:other action:@selector(anotherMethodInOther) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:anotherButton];
}

@end 
```

IBAction 让您告诉 Interface Builder 方法实现可以通过您的 xib/storyboard 连接。

# android-widget - TimePicker 不允许“24:00”？

> ID：11389939
> 
> 赞同：6
> 
> 时间：2012-07-09T06:21:43.877
> 
> 标签：android-widget, timepicker

我需要创建一个“从……到”时间选择并为此创建 2 个 TimePicker 组件。因为它背后的数据库多年来已经存在并且使用 24 小时格式，所以在我的代码中，我正在设置

```
tpOpenFrom.setIs24HourView(true);
tpOpenTo.setIs24HourView(true); 
```

我现在的问题是，看起来，“24:00”不能被选为“to：”值，因为在“23”（：00）之后，组件将“返回”切换到“00”（：00 )，因此无法查明用户是否忘记进行实际选择，例如“09:00”是否已输入“开始”时间，“00:00”已输入“至”时间。或者，如果选择了“00:00”到“00:00”：用户是否忘记输入任何内容，或者他是否打算定义“全天候开放”？

在 24 小时模式下，TimePicker 应该真正允许输入 24:00。ISO 8601 中的 24 小时制将午夜定义为一种特殊情况，可以同时称为“00:00”和“24:00”，因此 TimePicker 应允许将小时设置为 24 并自动阻止分钟到 00。

有谁知道如何利用 TimePicker 实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-10T16:29:28.970

我在使用引导时间选择器时遇到了同样的问题，但实现起来并不难。我正在使用 Joris de Wit 的时间选择器（[http://jdewit.github.io/bootstrap-timepicker/](http://jdewit.github.io/bootstrap-timepicker/)）。

搜索“24”并将所有出现替换为“25”，然后在 bootstrap-timepicker.js 中搜索“23”并将其替换为“24”。

如果你想允许像 24:01、..、24:59 这样的时间，你就完成了。如果您只想接受 24:00 而不是 24 分钟，请转到 getTime 函数所在的第 133 行。

将以下代码放在现有返回之前（但不要删除它）：

```
if (this.hour == 24 && this.minute != 0) {
  this.setTime('00:' + this.minute);
  return '00:' + this.minute;
} 
```

这会将任何 24:XX 时间转换为 00:XX。

# cuda - 在 NVIDIA GPU 上编译 ptx 代码？

> ID：11389942
> 
> 赞同：1
> 
> 时间：2012-07-09T06:22:00.567
> 
> 标签：cuda, opencl, gpu, nvidia, ptxas

我想在 NVIDIA GPU 上拦截 opencl 程序的 PTX 级别。

我想例程可能看起来像这样。

首先，我编写了一个 opencl 程序（主机和设备代码），使用 NVIDIA 编译器生成各自的 ptx 代码。然后我通过修改PTX代码来写我想做的事情（请不要问我为什么没有在设备C代码上这样做——我有一些原因）。但问题是，修改后，如何将这个 PTX 代码编译成二进制代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:41:38.827

您可以使用 ptxas，它包含在 CUDA 工具包中。它将 .ptx 编译成 .cubin，然后可以使用驱动程序 API 加载。

# java - 以自定义格式将 apache pig 数据输出到文件

> ID：11389943
> 
> 赞同：1
> 
> 时间：2012-07-09T06:22:07.013
> 
> 标签：java, hadoop, apache-pig

我有一个制表符分隔的数据输入，由于数据大小，需要使用 Apache Pig 进行处理。我已经成功加载了数据，甚至对其进行了分析，但我想以原始格式将输出存储到文件中，而不是存储元组。

```
Sample Input
A \t B
A \t B

Sample Output
A \t B
A \t B 
```

而不是（A，B），（A，B）

```
 Store D into 'output' using PigStorage('\n') 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:48:02.917

您已加载以制表符分隔的输入，但您将其写回以**换行符 (\n)**分隔。

尝试：

```
Store D into 'output' using PigStorage('\t'); 
```

或者

```
Store D into 'output' using PigStorage(); -- tab is the default delimiter 
```

至于输出的具体格式，我建议您查看 flatten [1] 运算符。

[1] [http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#Flatten+Operator](http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#Flatten+Operator)

# html - 流体和固定头

> ID：11389944
> 
> 赞同：0
> 
> 时间：2012-07-09T06:22:11.220
> 
> 标签：html, css

我想创建一个带有固定标题的网站，它也应该是一个流畅的布局。有没有办法做到这一点？如果有怎么办？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:43:19.260

HTML 上的骨架如下所示：

```
<div class="masterHeader">   
   THIS IS HEADER TEXT
   <br/>

   <span style="float: left;"> LEFT SPAN </span>
   <span style="float: right;"> RIGHT SPAN </span>
</div>

<div class="contentData">
</div> 
```

使用以下 CSS 进行样式设置：

```
.masterHeader
{
    display: block;
    height: 80px;
    position: fixed;
    text-align: center;
    min-width: 700px;
    width: 100%;
}

.contentData
{
    float: left;
    margin-top: 100px;
    padding-bottom: 15px;
    padding-left: 2px;
    position: relative;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:30:58.963

这可以通过 CSS3 媒体查询和/或 HTML4 媒体属性来完成，请参阅[http://affinitysearch.com](http://affinitysearch.com)进行演示（提示：调整浏览器窗口大小）。

基本语法是：

主要样式表（为移动设备构建）：`<link rel="stylesheet" href="/css/style.css">`

600px 及以上样式表：`<link rel="stylesheet" media="only screen and (min-width:600px)" href="/css/600.css">`

960px 及以上的样式表：`<link rel="stylesheet" media="only screen and (min-width:960px)" href="/css/960.css">`

此方法与大多数浏览器兼容。

# css - 如何通过 Bootstrap 垂直分隔线画线？

> ID：11389946
> 
> 赞同：6
> 
> 时间：2012-07-09T06:22:27.327
> 
> 标签：css, twitter-bootstrap, drop-down-menu

我正在使用 Twitter Bootstrap 我需要绘制菜单行： [https](https://www.dropbox.com/s/hl8moeabxxecu8j/dropdown.png) ://www.dropbox.com/s/hl8moeabxxecu8j/dropdown.png 。

所以我需要通过垂直分隔线画线。

这是我现在拥有的 - [http://jsfiddle.net/KckU3/8/](http://jsfiddle.net/KckU3/8/)

我不知道怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-04-03T10:52:52.170

只需使用

```
<hr class="divider"> 
```

那应该给你你想要的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-11T19:42:02.470

现在有：

```
<li class="divider"></li> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T17:45:17.917

首先，你在`.dropdown-toggle`课堂上有一个错字。

然后，您不是在寻找看起来像边框的垂直分隔线，而是在寻找边框，您只需要隐藏其中的一些即可。

这是你的线索：

```
.navbar .nav > li > a.dropdown-toggle {
    position: relative;
    bottom: -1px;
    z-index: 1005;
    background: white;
    padding-bottom: 12px;
}

ul.nav li.dropdown:hover ul.dropdown-menu {
    /* ... */
    border-top: 1px solid #000;
} 
```

`padding-bottom`实际上只是比默认定义的多一个像素。

另一个重要的事情是向左或向右的位置：

```
ul.nav li.dropdown:hover ul.dropdown-menu {  
    /* ... */
    left: 0px;
} 
```

我修复了一些其他的东西以获得更好的效果，但你有主要的想法。

[更新了 jsfiddle](http://jsfiddle.net/Sherbrow/KckU3/10/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T06:31:59.077

如果我理解正确

```
<li><hr></li> 
```

应该有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T15:31:25.470

您的帖子有些混乱，但从您发布的图片来看，您似乎想创建一个带有下拉菜单的选项卡式菜单？如果是这样，Bootstrap 已经让你这样做了。

选项卡菜单：http: [//twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs) 下拉菜单：http: [//twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

这是一个将它们组合在一起的演示：http: [//jsfiddle.net/LWTqS/](http://jsfiddle.net/LWTqS/)

# sql - “使其脱机”过程失败后无法访问数据库

> ID：11389947
> 
> 赞同：12
> 
> 时间：2012-07-09T06:22:36.700
> 
> 标签：sql, sql-server, sql-server-2008-r2

当它给我一个当前正在使用的错误时，我试图分离数据库。因此，我试图让我的数据库离线，但它没有说

```
'an exception occured while executing a transact SQL statement or batch 

-> ALTER DATABASE failed because a lock could not be placed on database 'myDB'. Try again later.
    ALTER DATABASE statement failed. (Microsoft SQL Server, Error: 5061)' 
```

现在，如果我尝试访问数据库，它会说它无法访问。我该怎么做才能使我的数据库再次可访问？

我的目标是分离数据库，将其辅助数据库文件重新定位到新驱动器并重新连接它（仅仅是因为空间问题）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T06:33:25.850

尝试以下步骤。

1.  `services.msc`使用控制台重新启动 SQL Server 服务。
2.  现在使用 SQL Server Management Studio 连接到您的服务器。
3.  在查询分析器中运行以下命令

    ```
     ALTER DATABASE `YOURDATABASE_NAME`  
      SET SINGLE_USER WITH ROLLBACK IMMEDIATE 
    ```

4.  现在右键单击数据库名称，指向任务，然后单击分离。出现分离数据库对话框

或 5\. 运行命令以重定位辅助数据库。

1.  再次将数据库模式设置为多用户

    ```
    ALTER DATABASE `YOURDATABASE_NAME` SET MULTI_USER 
    ```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-15T12:27:28.820

作为 Furqan 答案中第一步的替代方法，您可能不需要重新启动 SQL Server 实例，而只需要重新启动 SQL Server Management Studio 实例，该实例用于启动“脱机”任务。

# c# - 面向对象编程：数据和行为的分离

> ID：11389948
> 
> 赞同：22
> 
> 时间：2012-07-09T06:22:37.240
> 
> 标签：c#, oop, design-patterns

最近我们讨论了类中的数据和行为分离。数据和行为分离的概念是通过将领域模型及其行为放在单独的类中来实现的。
但是，我不相信这种方法的所谓好处。尽管它可能是由“伟大的”创造的（我认为是 Martin Fowler，尽管我不确定）。我在这里举一个简单的例子。假设我有一个 Person 类，其中包含 Person 及其方法（行为）的数据。

```
class Person
{
    string Name;
    DateTime BirthDate;

    //constructor
    Person(string Name, DateTime BirthDate)
    {
        this.Name = Name;
        this.BirthDate = BirthDate;
    }

    int GetAge()
    {
        return Today - BirthDate; //for illustration only
    }

} 
```

现在，将行为和数据分离到单独的类中。

```
class Person
{
    string Name;
    DateTime BirthDate;

    //constructor
    Person(string Name, DateTime BirthDate)
    {
        this.Name = Name;
        this.BirthDate = BirthDate;
    }
}

class PersonService
{
    Person personObject;

    //constructor
    PersonService(string Name, DateTime BirthDate)
    {
        this.personObject = new Person(Name, BirthDate);
    }

    //overloaded constructor
    PersonService(Person personObject)
    {
        this.personObject = personObject;
    }

    int GetAge()
    {
        return personObject.Today - personObject.BirthDate; //for illustration only
    }
} 
```

这应该是有益的，可以提高灵活性并提供松散耦合。我不明白怎么做。据我说，这引入了额外的编码和性能损失，每次我们必须初始化两个类对象。而且我在扩展此代码时看到了更多问题。考虑当我们在上述情况下引入继承时会发生什么。我们必须继承这两个类

```
class Employee: Person
{
    Double Salary;

    Employee(string Name, DateTime BirthDate, Double Salary): base(Name, BirthDate)
    {
        this.Salary = Salary;       
    }

}

class EmployeeService: PersonService
{
    Employee employeeObject;

    //constructor
    EmployeeService(string Name, DateTime BirthDate, Double Salary)
    {
        this.employeeObject = new Employee(Name, BirthDate, Salary);
    }

    //overloaded constructor
    EmployeeService(Employee employeeObject)
    {
        this.employeeObject = employeeObject;
    }
} 
```

请注意，即使我们将行为隔离在一个单独的类中，我们仍然需要 Data 类的对象才能使用 Behavior 类方法。因此，最终我们的 Behavior 类包含数据和行为，尽管我们拥有模型对象形式的数据。
你可能会说你可以添加一些接口到 mix 中，所以我们可以有 IPersonService 和一个 IEmployeeService。但我认为为每个类引入接口并从接口继承似乎并不好。

那么，您能告诉我在上述情况下分离数据和行为所取得的成就是我无法通过将它们放在同一个班级中实现的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T06:30:57.233

实际上，Martin Fowler 说，在领域模型中，数据和行为应该结合起来。看看[AnemicDomainModel](http://martinfowler.com/bliki/AnemicDomainModel.html)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-19T04:16:29.123

我同意，您实施的分离很麻烦。但还有其他选择。具有 getAge(person p) 方法的 ageCalculator 对象呢？或 person.getAge(IAgeCalculator calc)。或者更好的是 calc.getAge(IAgeble a)

分离这些关注点有几个好处。假设您打算让您的实施返回几年，如果一个人/婴儿只有 3 个月大怎么办？你返回0吗？.25？抛出异常？如果我想要狗的年龄怎么办？几十年或几小时的年龄？如果我想要某个日期的年龄怎么办？人死了怎么办？如果我想使用火星轨道一年怎么办？还是希伯来历法？

这些都不应该影响使用人员界面但不使用生日或年龄的类。通过将年龄计算与其使用的数据分离，您可以获得更大的灵活性并增加重用的机会。（甚至可以用相同的代码计算奶酪和人的年龄！）

通常，最佳设计会随环境而有很大差异。然而，这种情况很少见，性能会影响我在这类问题上的决定。系统的其他部分可能是几个数量级的更大因素，例如浏览器和服务器或数据库检索或序列化之间的光速。与理论上的性能问题相比，时间/金钱更适合用于简化和可维护性的重构。为此，我发现分离域模型的数据和行为是有帮助的。毕竟，它们是不同的关注点，不是吗？

即使有这样的优先级，事情也很混乱。现在想要人年龄的类有另一个依赖项，即 calc 类。理想情况下，需要较少的类依赖关系。另外，谁负责实例化 calc？我们注射它吗？创建一个 calcFactory？还是应该是静态方法？该决定如何影响可测试性？追求简单的动力实际上增加了复杂性吗？

OO 的将行为与数据结合起来的实例与单一责任原则之间似乎存在脱节。当所有其他方法都失败时，两种方式都写，然后问同事，“哪个更简单？”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T06:31:21.290

有趣的是，OOP 通常被描述为*结合*了数据和行为。

您在这里展示的是我认为是反模式的东西：“贫血域模型”。它确实存在您提到的所有问题，应该避免。

应用程序的不同级别可能具有更多的程序倾向，这适合于您所展示的服务模型，但这通常只位于系统的最边缘。即便如此，这仍将通过传统的对象设计（数据+行为）在内部实现。通常，这只是一个令人头疼的问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-03T05:58:35.590

我意识到我迟到了大约一年才回复这个问题，但无论如何......哈哈

我之前已经将行为分开，但不是以您展示的方式。

当您的行为应该具有公共接口但允许不同对象的不同（唯一）实现时，分离行为才有意义。

例如，如果我在制作游戏，对象的一些可用行为可能是行走、飞行、跳跃等的能力。

通过定义 IWalkable、IFlyable 和 IJumpable 等接口，然后基于这些接口创建具体类，它为您提供了极大的灵活性和代码重用。

对于 IWalkable，您可能有...

不能行走：IWalkableBehavior

LimitedWalking : IWalkableBehavior

UnlimitedWalking : IWalkableBehavior

IFlyableBehavior 和 IJumpableBehavior 的模式类似。

这些具体的类将实现CannotWalk、LimitedWalking 和UnlimitedWalking 的行为。

在对象（例如敌人）的具体类中，您将拥有这些行为的本地实例。例如：

IWalkableBehavior _walking = new CannotWalk();

其他人可能会使用 new LimitedWalking() 或 new UnlimitedWalking()；

当需要处理敌人的行为时，假设 AI 发现玩家在敌人的某个范围内（这可能是一种行为，也可以说是 IReactsToPlayerProximity），它可能会自然而然地尝试将敌人移近“与“敌人交战。

所需要的只是调用 _walking.Walk(int xdist) 方法，它会自动被整理出来。如果对象正在使用CannotWalk，那么什么都不会发生，因为Walk() 方法将被定义为简单地返回并且什么都不做。如果使用LimitedWalking，敌人可能会向玩家移动很短的距离，如果UnlimitedWalking，敌人可能会向上移动到玩家身边。

我可能没有很清楚地解释这一点，但基本上我的意思是用相反的方式看待它。不是将您的对象（您在此处称为数据）封装到 Behavior 类中，而是使用接口将 Behavior 封装到对象中，这为您提供了“松散耦合”，允许您改进行为并轻松扩展每个“行为基础” （行走、飞行、跳跃等）具有新的实现，但您的对象本身并没有区别。即使该行为被定义为CannotWalk，它们也只是具有Walking 行为。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-10T12:57:19.197

*一个人（任何*人）的内在年龄。因此它应该是 Person 对象的一部分。

hasExperienceWithThe40mmRocketLauncher() 不是人固有的，但可能是接口 MilitaryService 可以扩展或聚合 Person 对象。因此它不应该是 Person 对象的一部分。

一般来说，我们的目标是避免仅仅因为这是最简单的方法就向基础对象（“Person”）添加方法，因为您会在正常的 Person 行为中引入异常。

基本上，如果您看到自己在基础对象中添加了诸如“hasServedInMilitary”之类的内容，那么您就有麻烦了。接下来，您将执行大量语句，例如 if (p.hasServedInMilitary()) blablabla。这在逻辑上与一直进行 instanceOf() 检查在逻辑上是相同的，并且表明 Person 和“看过兵役的人”实际上是两个不同的东西，应该以某种方式断开连接。

退后一步，OOP 是关于减少 if 和 switch 语句的数量，而是让各种对象根据其抽象方法/接口的特定实现来处理事物。分离数据和行为促进了这一点，但没有理由把它走极端并将所有数据与所有行为分开。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-14T18:20:03.050

答案确实是在正确的情况下很好。作为开发人员，您的工作的一部分是确定解决问题的最佳解决方案，并尝试定位解决方案以适应未来的需求。

我不这样做经常遵循这种模式，但如果编译器或环境是专门为支持数据和行为的分离而设计​​的，那么在平台如何处理和组织你的脚本方面可以实现许多优化。

尽可能多地熟悉设计模式对您最有利，而不是每次都自定义构建整个解决方案，并且不要过于判断，因为模式不会立即有意义。您通常可以使用现有的设计模式在整个代码中实现灵活且健壮的解决方案。请记住，它们都是一个起点，因此您应该始终准备好进行定制以适应您遇到的各个场景。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-13T21:23:21.383

您描述的方法与[策略模式](https://en.wikipedia.org/wiki/Strategy_pattern)一致。它促进了以下设计原则：

## **开闭原则**

类应该对扩展开放但对修改关闭

## **组合优于继承**

行为被定义为单独的接口和实现这些接口的特定类。这允许在行为和使用该行为的类之间更好地解耦。可以在不破坏使用它的类的情况下更改行为，并且类可以通过更改使用的特定实现在行为之间切换，而无需任何重大的代码更改。

# iphone - 方法调用

> ID：11389951
> 
> 赞同：0
> 
> 时间：2012-07-09T06:23:04.323
> 
> 标签：iphone, ios, xcode

我对 iOS 有点陌生。我知道一个`void method`ie

```
-(void) pressed {

} 
```

可以这样调用：

```
[self pressed]; 
```

`viewDidAppear` 可以这样称呼：

```
[self viewDidAppear:YES]; 
```

我正在徘徊如何在下面的这种方法中做到这一点，或者如何重新调用它：

```
- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{

    return [images count];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:29:03.593

你不应该调用`-(void)viewDidAppear:(BOOL)animated`，它是生命周期的一部分，`UIViewController`它会被自动调用。至于另一个：

```
- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
    return [images count];
} 
```

我从未使用过`iCarousel`，但它似乎是来自数据源的方法，因此也不应该直接调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:47:26.423

那可能是我的数据源方法......它是从控制器调用的。

```
//And it may be called in the controller as below where delegate is object of some class
    iCarousel *iCarouselObj;
    if(delegate && [delegate respondsToSelector:@selector(numberOfItemsInCarousel:)])
        int items = [delegate numberOfItemsInCarousel:iCarouselObj];

//The below code is just to tell you how to call a method with arguments
iCarousel *iCarouselObj;
int items = [self numberOfItemsInCarousel:iCarouselObj]; 
```

# objective-c - 比较 NSString 文字和常量的问题

> ID：11389952
> 
> 赞同：1
> 
> 时间：2012-07-09T06:23:06.290
> 
> 标签：objective-c, string, cocoa-touch, nsstring, string-literals

我有一个`NSString`, `firstWord`, 其值为“First”。它是这样定义的：

```
NSString *firstWord = [[NSString alloc] init];

firstWord = [textView text]; 
```

但是，当我尝试检查其值时，如下所示：

```
if (firstWord == @"First"){} 
```

比较不会返回 true，或者我猜在 Objective-C 中是 YES。我知道它确实与字符串具有相同的值。所以，从[这里](https://stackoverflow.com/questions/25746/whats-the-difference-between-a-string-constant-and-a-string-literal)我很确定问题是我正在比较指针，这些指针在这里不一样，即使字符串本身确实具有相同的值。那么我怎样才能直接比较字符串本身呢？或者也许更有效，确保两个字符串对象*确实*具有相同的指针，所以我不必进行相对昂贵的字符串比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:28:06.717

> 那么我怎样才能直接比较字符串本身呢？

Cocoa 中的字符串比较是用[`isEqualToString:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-isEqualToString_).

> 或者可能更有效，确保两个字符串对象确实具有相同的指针，

这是不可能的。一个是字符串文字，存储在应用程序二进制文件的 DATA 部分中；另一个在您的应用程序堆上。在某些情况下（使用创建字符串`initWithString:@"literal string"`）你最终会得到相同的地址，但你不应该依赖它。

顺便说一句，您不需要 - 事实上，不应该，因为您正在创建泄漏 - 在将文本视图的文本分配给指针之前分配一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:27:23.730

实际上有两个错误。

你的实际问题：

```
if (firstWord == @"First"){} 
```

需要是

```
if ([firstword compare:@"first"]==NSOrderedSame) ... 
```

仅当 firstword 不为零时才有效。

此外：

```
NSString *firstWord = [[NSString alloc] init];
firstWord = [textView text]; 
```

这会丢失内存，因为您没有将文本视图“复制”到字符串中（无论如何都不可能，因为它不可变），您只是将另一个字符串对象分配给指针。因此，您分配的空字符串丢失了。

做就是了

```
NSString *firstWord;
firstWord = [textView text]; 
```

编辑：确保字符串具有相同的指针会更加昂贵，因为您必须保留一个字符串对象表并在那里查找每个字符串，以便您可以用“唯一”替换您的指针或添加新字符串到桌子上……

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-09-04T06:29:37.877

从 Swift 开始学习 Objective-C。这是我为每个 deviceModel 类型提供不同布局代码的方法。

```
 @property (nonatomic, strong) NSString *deviceModel;

    NSString *iPhoneSE = @"iPhone8,4";
    if ([self.deviceModel isEqualToString:iPhoneSE]) { // iPhone SE
        // layout code
    } 
```

# ajax - 网页无法在 Linux 上运行

> ID：11389954
> 
> 赞同：0
> 
> 时间：2012-07-09T06:23:14.593
> 
> 标签：ajax, linux, webpage

我有一个网页，它使用 PHP、AJAX 和 JavaScript 来显示一些图表和其他数据。使用 Apache 2.2.1 时，页面在 Windows 中运行时运行良好，但在 Linux 中运行时，我可以看到我的页面元素但我没有看到任何数据，我相信这意味着没有通过 AJAX 调用接收到数据。这里出了什么问题？

- - - - - - - - - - - - - - - - - 编辑 - - - - - - - - --------------------------------------

好的，我检查了 AJAX 调用的返回值（ responseText ）。它出来为空。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:25:03.907

你安装PHP了吗？你在linux机器上运行apache吗？你能用 PHP 回显一个字符串吗？您在网络浏览器上启用了 javascript 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:28:41.100

请确定文件系统在 windows 和 linux 中是否真的相同。我怀疑它与托管页面有关。

# java - java spring项目中delphi dll的使用

> ID：11389955
> 
> 赞同：1
> 
> 时间：2012-07-09T06:23:22.217
> 
> 标签：java, delphi, dll, java-native-interface

请帮我把细节放在一起。我已经扫描了互联网很多小时，但结果并不好。

所以我有：

1.  Delphi 为 JNI 编写的 DLL（来自 32 位 Delphi 上的 32 位 comp）

2.  我的 64 位 MAC 上的 Java Web 项目（Tomcat、Spring）

3.  System.out.println(System.getProperty("java.library.path")) 写“/tmp” 是对的

4.  在 /tmp 我有来自 delphi 的 qvs.dll

当我开始项目时，我得到了异常：

```
java.lang.UnsatisfiedLinkError: no qvs in java.library.path 
```

1.  加载库的 Java 代码：

    System.loadLibrary("qvs")

我尝试了许多具有相同结果的组合。只有一个原因我不能尝试。我可以在我的 64 位 MAC 上使用 32 位 DLL 吗？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T06:37:23.933

不可能如你所愿，原因有二：

*   您不能在 Mac (.dylib) 上运行 Windows 库（.dll 文件）；
*   您不能从 64 位进程启动 32 位库。

因此，我看到了三个解决方案：

*   在 Windows 端制作所有内容（无论如何，如何将 Mac 用作服务器？）；
*   使用 Mac OS 版本的 Delphi XE2 编译器（或 FPC 编译器）以对象 pascal 代码（使用套接字）创建一个小型服务器应用程序，然后从 64 位 Java 进程以进程外方式访问它。不是一件容易的事——[这个库不是免费的，但可以帮助你](http://www.remobjects.com/da/java.aspx)；
*   或者，当然，用 Java 或它的字节码重写代码：也许[Oxygene for Java](http://www.remobjects.com/oxygene/java.aspx)或[FPC JVM 后端](http://wiki.freepascal.org/FPC_JVM)可以帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T06:34:29.673

Windows DLL 不能在 Mac OS 系统上使用（Windows 虚拟机除外）。

# dependency-injection - 构造函数中的依赖注入容器

> ID：11389960
> 
> 赞同：4
> 
> 时间：2012-07-09T06:23:30.173
> 
> 标签：dependency-injection

为什么将容器放在构造函数中如此糟糕？例如，您想在另一个类 (C) 的构造函数中解析类 B，因为您需要将类 (B) 与已解析的依赖项一起使用（您开始使用类 C 的方式就像 B 一样，但使用依赖关系已解决）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T07:14:49.393

> 为什么将容器放在构造函数中如此糟糕？

我想您的意思是将容器作为构造函数参数传递。这实际上是 Service Locator 模式的一种变体，在这种情况下被认为是一种反模式。您可能不想这样做有几个原因。

首先，您的类的用户只会知道该类需要一个容器来解决其依赖关系。这个信息量等于没有信息，因为你仍然不知道这个类将依赖什​​么。你想为班级写一个单元测试吗？您必须查看类内部并查看它正在解析的类型，模拟它们并为每个测试初始化​​容器。这也意味着对某些代码的更改将使其编译但可能会破坏某些测试：例如，当新代码依赖于尚未在容器中注册的类时就是这种情况。

使用 Service Locator 时常见的第二个影响是，您永远无法确定在请求依赖项时不会在运行时遇到异常。每个班级都正确注册了吗？虽然某些容器提供了检查是否每个接口都已注册的可能性，但这并不意味着它已注册到正确的类型。例如，一个类型可能会使用两个不同的实现注册两次，并且很难注意到任何一段代码是否可以调用容器。

一个更好的解决方案是[组合根模式](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)。[这篇博文](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)还解释了为什么服务定位器可能不是一个好主意。

* * *

根据新的发展进行编辑：

显然，您正在使用第三方库，该库依赖于您的类具有默认构造函数。让我们假设您无法影响类的实例化，并且您必须让这个框架完成它的工作。请注意，这可能是一个很大的假设，请先调查第三方库是否有可能这样做。乍一看，像 ASP.NET WebForms 和 WCF 这样的框架并没有给你太多机会，但是有一些方法可以减轻这些情况的痛苦。

> 我的意思只是在构造函数中创建容器，将相应的依赖添加到容器并解析对象，这可以通过简单地创建依赖对象的实例并使用它来创建依赖对象来完成。

我可能遗漏了一些东西，但是为什么需要在构造函数中注册依赖项？你不能在构造函数中解决它，但在其他地方注册它吗？那仍然是一个服务定位器，但你至少会做错事。

> 为什么在构造函数中这样做是一个坏主意而在其他地方这样做很好？

*在任何地方*但在一个地方这样做是一个坏主意。你为什么要把你的容器注册分散到所有地方？如果你真的觉得需要决定在运行时使用什么接口实现，请使用像工厂这样的东西。

那么，为什么不好呢？

*   客户端类同时依赖于实现和接口，这并不比在构造函数中新建具体类更好。
*   客户端类现在也依赖于容器，并且出现了服务定位器的问题（见上文），现在这种方法比新建具体类更糟糕。

正如@Steven 所说，您失去了依赖注入的所有优势。真正的潜在问题是：为什么你绝对想在这个地方做 DI？您想使用该方法的哪些优点？根据答案，可能有几种解决方案。我脑海中浮现的两个例子：

**解决方案 1**：丢失第三方库实例化的类的 DI。

**解决方案 2**：使用混蛋注入 + 服务定位器的组合。在这种情况下，两个错误可以成为一个正确的。

```
public class MyClass
{
    public MyClass()
        : this(Container.Resolve<IDependency>())
    {
    }

    public MyClass(IDependency dep)
    {
    }
} 
```

在这种情况下，您没有在构造函数中使用非本地依赖项，因为它是由服务定位器解析的，因此您对实现没有依赖项。

# hadoop - 在 Pig 中对袋子的不同值执行计数

> ID：11389962
> 
> 赞同：3
> 
> 时间：2012-07-09T06:23:36.377
> 
> 标签：hadoop, apache-pig

在执行看起来像是两个级别的分组时，我有一个关于 Pig 的问题。例如，假设我有一些示例输入数据，例如：

```
email_id:chararray    from:chararray        to:bag{recipients:tuple(recipient:chararray)}
e1                    user1@example.com     {(friend1@example.com),(friend2@example.com),(friend3@myusers.com)}
e2                    user1@example.com     {(friend1@example.com),(friend4@example.com)}
e3                    user1@example.com     {(friend5@example.com)}
e4                    user2@example.com     {(friend2@example.com),(friend4@example.com)} 
```

因此，每一行都是从用户“发件人”到用户“发件人”的电子邮件。

我最终想要一个所有发件人和他们发送电子邮件的所有人的列表，包括为每个人发送的电子邮件数量，从高到低排序，例如：

```
user1@example.com     {(friend1@example.com, 2), (friend2@example.com, 1), (friend3@example.com, 1), (friend4@example.com, 1), (friend5@example.com, 1)}
user2@example.com     {(friend2@example.com, 1), (friend4@example.com, 1)} 
```

将不胜感激有关在 Pig 中解决此问题的最佳方法的想法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T15:37:16.557

这是脚本的一个版本：

```
inpt = load '/pig_data/pig_fun/input/from_senders.txt' as (email_id:chararray, from:chararray, to:bag{recipients:tuple(recipient:chararray)});

pivot = foreach inpt generate from, FLATTEN(to);
pivot = foreach pivot generate from, to::recipient as recipient;
dump pivot;
/*
(user1@example.com,friend1@example.com)
(user1@example.com,friend2@example.com)
(user1@example.com,friend3@myusers.com)
(user1@example.com,friend1@example.com)
(user1@example.com,friend4@example.com)
(user1@example.com,friend5@example.com)
(user2@example.com,friend2@example.com)
(user2@example.com,friend4@example.com)
*/

grp = group pivot by (from, recipient);
with_count = foreach grp generate FLATTEN(group), COUNT(pivot) as count;
dump with_count;
/*
(user1@example.com,friend1@example.com,2)
(user1@example.com,friend2@example.com,1)
(user1@example.com,friend3@myusers.com,1)
(user1@example.com,friend4@example.com,1)
(user1@example.com,friend5@example.com,1)
(user2@example.com,friend2@example.com,1)
(user2@example.com,friend4@example.com,1)
*/

to_bag = group with_count by from;
result = foreach to_bag {
    order_by_count = order with_count by count desc;
    generate group as from, order_by_count.(recipient, count);
};
dump result;
/*
(user1@example.com,{(friend1@example.com,2),(friend2@example.com,1),(friend3@myusers.com,1),(friend4@example.com,1),(friend5@example.com,1)})
(user2@example.com,{(friend2@example.com,1),(friend4@example.com,1)})
*/ 
```

希望能帮助到你。

# iphone - PhotoBucket 集成

> ID：11389966
> 
> 赞同：0
> 
> 时间：2012-07-09T06:24:02.123
> 
> 标签：iphone

任何人都可以协助对 photobucket 进行身份验证并从 iPhone 应用程序上传图像吗？我目前配置了许多网络，但我真的找不到关于 photobucket 过程的好的文档。整合照片桶的基本步骤是什么？

这里的任何帮助都会很棒！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T06:27:51.273

检查一下：[http](http://photobucket.com/developer/forum?list,3)
://photobucket.com/developer/forum?list ,3 我认为从所有这些示例代码中，您可以获得一些对您的应用程序有用的信息。
从注册到[http://photobucket.com/developer/开始会很有用](http://photobucket.com/developer/)

# git - 如何在不进行任何更改的情况下跳回我的提交？

> ID：11389971
> 
> 赞同：2
> 
> 时间：2012-07-09T06:24:37.277
> 
> 标签：git

我想跳到以前的提交，并且可以随时跳出它，而不影响我的回购。我将在 git 中使用什么来执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T06:26:09.617

您必须提交或存储您的工作树更改，但您可以

```
git checkout <sha1 of previous commit> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:26:17.637

这可以通过 git [checkout](http://git-scm.com/docs/git-checkout.html)来完成。但我建议阅读一本关于 git 的书，它解释了如何使用 git。[Progit](http://progit.org)是一本不错的免费在线书籍。

# actionscript-3 - 参考共享对象 AS3

> ID：11389972
> 
> 赞同：0
> 
> 时间：2012-07-09T06:24:58.597
> 
> 标签：actionscript-3, flash, actionscript

我试图引用一个共享对象（一个保存数据的对象），但每当我尝试时，我都会崩溃。

此代码工作正常：

```
var var1:Object = { value:1 };
var varRef:Object = var1;

if(var1.value == 1) {
    varRef.value = 50;
}

trace(varRef.value); // outputs 50;
trace(var1.value); // outputs 50; 
```

但是当我尝试使用共享对象时，它不起作用。

```
import flash.net.SharedObject;
var iapso:SharedObject = SharedObject.getLocal("purchases");
var varRef:Object = iapso.data.testing;

varRef = 90
trace ("The shared value is " + iapso.data.testing);
trace ("This should mirror it" + varRef); 
```

如果您能够找出问题所在，请发布固定版本。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T06:53:20.237

您必须来自可以取消引用指针的编程背景。

在这种情况下，`varRef`不是`varRef = &iapso`。设置它的值不会改变`iapso.data.testing`;

最初，您设置`varRef`为指向`iapso.data.testing`：

```
var varRef:Object = iapso.data.testing; 
```

然后，您立即将其更改为常量值对象字面量`90`：

```
varRef = 90; 
```

这不会将 的值设置`testing`为 90 - 这会更改 的值`varRef`。

您可以设置`varRef`为`iapso.data`，然后设置`testing`为：

```
var varRef:Object = iapso.data;
varRef.testing = 90; 
```

然后，以下将产生预期的结果：

```
trace(iapso.data.testing); // 90
trace(varRef.testing); // 90 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T06:53:28.880

设置 varRef 不会更新 iapso.data 中的值 - 数字被复制，而不是被引用。

```
var bar:Object = { data:1 };
var foo:Object = bar.data;

trace(foo); //"1"
bar.data = 2;
trace(foo); //"1" 
```

如果您真的想使用参考，请`data`改用，例如：

```
import flash.net.SharedObject;
var iapso:SharedObject = SharedObject.getLocal("purchases");
var varRef:Object = iapso.data;

varRef.testing = 90
trace ("The shared value is " + iapso.data.testing);
trace ("This should mirror it" + varRef.testing); 
```

# objective-c - 带有 2 个视图的 UIScrollView 分页

> ID：11389974
> 
> 赞同：3
> 
> 时间：2012-07-09T06:25:15.923
> 
> 标签：objective-c, ios, ios5, uiscrollview

我尝试使用本教程中的 2 个视图实现分页：

[UIScrollView 中的多个虚拟页面，只有 2 个子视图](http://cocoawithlove.com/2009/01/multiple-virtual-pages-in-uiscrollview.html)

我想通过将 UIScrollView 放入页面并在每个页面中使用新内容更新它来修改它：

```
-(void)addContent:(NSString*)txt{

    int size  = 5;
    UITextView *txtView;
    int row = 0;

    //from left
    int xPlace = 0;
    //space between row's
    int rowSpace = 20;
    //from top
    int yPlace = 10;

   // int button_with = scrollView.frame.size.width;
    int button_height = 20;

    for (int i = 0; i < size; i++) {

        txtView = [[UITextView alloc] initWithFrame:CGRectMake(xPlace, row*rowSpace+yPlace, scrollView.frame.size.width, 2*button_height)];
        [txtView setFont:[UIFont fontWithName:@"ArialMT" size:14]];
        txtView.backgroundColor = [UIColor blueColor];

        [txtView setText:[NSString stringWithFormat:@"Numer    %@ - %i",txt,i]];

        // answerCheck.titleLabel.font = [UIFont boldSystemFontOfSize:fontSize];

        [scrollView addSubview:txtView];
        [txtView release];
        row++;
    }

    [scrollView setContentSize:CGSizeMake(scrollView.frame.size.width, txtView.frame.size.height*size)];
} 
```

这个想法是在滚动时只需用新内容替换 uiviewcontroller。它调用：

```
- (void)setPageIndex:(NSInteger)newPageIndex
{
    pageIndex = newPageIndex;

    if (pageIndex >= 0 && pageIndex < [[DataSource sharedDataSource] numDataPages])
    {
        NSDictionary *pageData =
            [[DataSource sharedDataSource] dataForPage:pageIndex];
        label.text = @"Tekstas";//[pageData objectForKey:@"pageName"];
        textView.text = [pageData objectForKey:@"pageText"];
        [self addContent:[pageData objectForKey:@"pageText"]];
        CGRect absoluteRect = [self.view.window
            convertRect:textView.bounds
            fromView:textView];
        if (!self.view.window ||
            !CGRectIntersectsRect(
                CGRectInset(absoluteRect, TEXT_VIEW_PADDING, TEXT_VIEW_PADDING),
                [self.view.window bounds]))
        {
            textViewNeedsUpdate = YES;
        }
    }
} 
```

好吧，我卡住了。我的文本视图正在更新，但 UIscrollView 的新内容不会在 iPad 模拟器中更新。

是的，我的意思是在 iphone 中它可以工作，而在 iPad 中它不能。如果我想实现这个功能，我可以改进什么？

也许还有其他方法可以从 iOS 5 进行分页？

我会放一个试图使工作正常的来源。

[下载源](http://minus.com/mGJ9Pgh1Z/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T08:32:35.187

您可以只使用一个`nib`文件添加一个`UIScrollView`带有修复`width`和`height`. 现在制作一些页面作为 a`UIView`并将它们添加到`UIScrollView`相同大小和相同`origin`的 . 在主要`UIView`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    scrollView.contentSize = CGSizeMake(scrollView.frame.size.width, scrollView.frame.size.height * 2);
}

-(void)viewWillAppear:(BOOL)animated{
    CGFloat h = scrollView.frame.size.height;
    [pageView1 setFrame:CGRectMake(0, 0, pageView1.frame.size.width, pageView1.frame.size.height)];

    [pageView2 setFrame:CGRectMake(0, h, pageView2.frame.size.width, pageView2.frame.size.height)];
} 
```

并且不要忘记检查文件`Paging Enabled`中`UIScrollView`的`Attribute`s `nib`。

希望对你有用！

# objective-c - 为什么枚举 NSDictionary 不返回输入序列？

> ID：11389975
> 
> 赞同：0
> 
> 时间：2012-07-09T06:25:20.463
> 
> 标签：objective-c, nsdictionary

我注意到 NSDictionary 的枚举输出没有返回与添加项目的顺序相同的序列。

```
NSMutableArray *arrKeys;
NSMutableArray *arrValues;
NSDictionary *items;

arrKeys = [NSMutableArray arrayWithCapacity:5];
arrValues = [NSMutableArray arrayWithCapacity:5];

[arrKeys addObject:@"A"]; [arrValues addObject:@"First"];
[arrKeys addObject:@"B"]; [arrValues addObject:@"Second"];
[arrKeys addObject:@"C"]; [arrValues addObject:@"Third"];
[arrKeys addObject:@"D"]; [arrValues addObject:@"Fourth"];
[arrKeys addObject:@"E"]; [arrValues addObject:@"Last"];

items = [NSDictionary dictionaryWithObjects:arrValues forKeys:arrKeys];

for (NSString *aKey in items) {
    NSLog(@"%@=%@", aKey, [items valueForKey:aKey]);
} 
```

返回...

A=第一个
D=第四个
B=第二个
E=最后一个
C=第三个

我很欣赏字典允许您按键随机访问项目，但是在枚举集合时返回的任意顺序是否有一些理由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:29:15.633

就是这样，`NSDictionary`不保证迭代顺序。这与您对典型哈希表的预期行为一致——针对快速查找进行了优化，但不适用于有序迭代。

为什么不迭代`arrKeys`你已经拥有的呢？

# javascript - 调用方法时的 Jquery 语法

> ID：11389984
> 
> 赞同：1
> 
> 时间：2012-07-09T06:25:59.807
> 
> 标签：javascript, jquery

这段代码：

```
<script type="text/javascript">

someMethod1();

$(function () {
    someMethod2();
});

</script> 
```

这两个调用有什么区别？我们什么时候打第一个电话，什么时候打第二个电话？方法执行的顺序是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:27:13.807

```
someMethod1(); 
```

这可能在文档准备好之前或之后调用，它不需要 jQuery。如果这是在页面的末尾，它将在所有控件都准备好时调用，但如果它在中间，那么它将只知道已呈现的控件。

```
$(function () {
    someMethod2();
}); 
```

这总是在文档准备好并且所有控件都准备好/渲染后调用。这需要 jQuery。[**您可以在此处**](http://api.jquery.com/ready/)阅读有关准备好的更多信息。这也将帮助您了解其他函数调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T06:29:12.300

someMethod1 立即执行

someMethod2 在执行代码之前等待整个页面加载，包括外部 javascript 文件（其他脚本，或来自其他站点）、CSS 和其他资源。

```
$(function () {
    //run after page loads
}); 
```

Method2 有时以以下形式出现

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

欲了解更多信息：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T06:32:51.673

脚本块中的语句按照它们出现的顺序执行。如果我们对行进行编号并插入一个或两个额外的换行符以便于讨论：

```
1  someMethod1();
2
3  $(
4    function () {
5      someMethod2();
6    }
7  ); 
```

第 1 行，`someMethod1()`首先执行。

然后`$()`执行第 3 行，其中参数 to`$()`是在第 4 到 6 行定义的匿名函数。该`$()`函数安排该匿名函数稍后执行以响应文档就绪事件。也就是那个时候匿名函数没有被执行。

最后，当文档准备好时，执行第 4 到第 6 行的匿名函数，这意味着第 5 行`someMethod2()`出现。

# android - 如何将图像而不是消息发布到facebook？

> ID：11389989
> 
> 赞同：-1
> 
> 时间：2012-07-09T06:26:11.037
> 
> 标签：android

我使用此代码将图像发布到 Facebook。但是此代码没有响应。请帮我。

```
 //I had created onCreate() method as :     

 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            facebook = new Facebook(APP_ID);
            restoreCredentials(facebook);

            //requestWindowFeature(Window.FEATURE_NO_TITLE);

            setContentView(R.layout.main);

            postToWall();                    
        } 
```

//将此代码用于postToWall（）：在此方法中，我给出了要发布的图像的路径 //并且此方法正在调用onCreate（）。

私人无效postToWall（）{

```
 FileInputStream fis = null;
                try {
                    fis = new FileInputStream("/mnt/sdcard/Blue_Dock_by_dimage.jpg");
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                BitmapFactory.Options options = new BitmapFactory.Options();                   
                   options.inSampleSize = 2; 
                Bitmap bm = BitmapFactory.decodeStream(fis);

                AsyncFacebookRunner mAsyncRunner = new   AsyncFacebookRunner(facebook);
                ByteArrayOutputStream stream = new ByteArrayOutputStream();

                bm.compress(Bitmap.CompressFormat.PNG, 100, stream);  // where bm is bitmap from Sdcard
                byte[] byteArray = stream.toByteArray();
                Bundle param = new Bundle();
                param = new Bundle();
                param.putString("message", "All");
                param.putString("filename", "TEst");
                param.putByteArray("image", byteArray);
                mAsyncRunner.request("me/photos", param, "POST", new fbRequestListener(), null);
              } 
```

//将此代码用于 fbRequestListener() 类：

公共类 fbRequestListener 实现 RequestListener {

```
 public void onComplete(String response, Object state) {
              // TODO Auto-generated method stub
              Log.d("RESPONSE",""+response);
          }       
          public void onIOException(IOException e, Object state) {
              // TODO Auto-generated method stub
              Log.d("RESPONSE",""+e);
              showToast("Authentication with Facebook failed!");
                finish();
          }       
          public void onFileNotFoundException(FileNotFoundException e,
                  Object state) {
              // TODO Auto-generated method stub
              Log.d("RESPONSE",""+e);
              showToast("Authentication with onFileNotFoundException failed!");
                finish();
          }      
          public void onMalformedURLException(MalformedURLException e,
                  Object state) {
              // TODO Auto-generated method stub
              showToast("Authentication with onMalformedURLException!");
                finish();
          }       
          public void onFacebookError(FacebookError e, Object state) {
              // TODO Auto-generated method stub
              Log.d("RESPONSE",""+e);
              showToast("Authentication with onFacebookError failed!");
                finish();

          }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:55:35.023

试试这个代码：

```
 try {
HttpClient httpClient = new DefaultHttpClient();
HttpContext localContext = new BasicHttpContext();
HttpPost httpPost = new HttpPost(
"https://graph.facebook.com/me/photos?access_token="+ acess_token);
URL url = new URL("image_url");
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setDoInput(true);
connection.connect();
InputStream input = connection.getInputStream();
Bitmap bi = BitmapFactory.decodeStream(input);
MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
ByteArrayOutputStream bos = new ByteArrayOutputStream();
bi.compress(CompressFormat.PNG,100, bos);
byte[] data = bos.toByteArray();
entity.addPart("source",new ByteArrayBody(data,"testimage.png"));
httpPost.setEntity(entity);
HttpResponse response = httpClient.execute(httpPost,localContext);
Log.v("response ", response+ "");
} catch (MalformedURLException e) {
e.printStackTrace();
} catch (UnsupportedEncodingException e) {
e.printStackTrace();
} catch (ClientProtocolException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:33:58.893

您必须为此使用 GRAPH API 或 HACKBOOK[示例](https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook)

这是简单的方法...

[从这里下载代码](http://dj-android.blogspot.in/2012/05/share-text-to-facebook-twitter-android.html)

检查下面的代码..

在该示例中替换以下代码。

```
public static void postToWall1(String message, Context con, String url,
            String Product) {
        facebook1 = new Facebook(APP_ID);

        Bundle parameters = new Bundle();

        parameters.putString("caption", Product);
        parameters.putString("description", "Share photo!");
        parameters.putString("picture", "" + url);
        parameters.putString("message", "" + message);

        try {
            facebook1.request("me");
            String response = facebook1.request("me/feed", parameters, "POST");    
            if (response != null
                    || !response.equals("")
                    || !response.equals("false")
                    ) 
                showToast("Message posted to your facebook wall!", con);
            }
        } catch (Exception e) {
            showToast("Failed to post to wall!", con);
            e.printStackTrace();
        }
    } 
```

# bash - 对文本文件中的行进行分组并将相应的行聚合到列

> ID：11389990
> 
> 赞同：3
> 
> 时间：2012-07-09T06:26:13.157
> 
> 标签：bash, awk

对文本文件中的行进行分组并将相应的行聚合到列

**现有文本文件**

```
John|Life
John|Temp
John|Admin
Peter|Life
Peter|Admin
Matt|Life
Matt|Admin
Matt|Temp 
```

**期望的输出**

```
John|Life,Temp,Admin
Peter|Life,Admin
Matt|Life,Temp,Admin 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T06:47:39.343

### 命令

```
awk -F '|' '
$1==x{
    printf ",%s", $2
    next
}
{
    x=$1
    printf "\n%s|%s", $1, $2
}
END {
    printf "\n"
}' input.txt 
```

* * *

### 结果

```
John|Life,Temp,Admin
Peter|Life,Admin
Matt|Life,Admin,Temp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:50:30.307

一个`sed`解决方案：

```
sed -e ':a;$!{N;ba};:p' \
 -e 's/^\([^|\n]*|\)\([^\n]*\)\(.*\n\)\1\([^|\n]*\)/\1\2,\4\3/' \
 -e 'tp;s/\n*\n/\n/;P;D;bp' filename 
```

# android - 从源到目的地行车路线的方向箭头

> ID：11389995
> 
> 赞同：0
> 
> 时间：2012-07-09T06:26:46.357
> 
> 标签：android, google-maps-api-3, google-maps-markers, driving-directions

我想要什么：我的应用程序需要绘制从源到目的地的行车路线，这已经完成。我的问题是我需要一个从源到目的地的方向箭头。

我做了什么：我可以画一个箭头，我也计算了角度，但不知道如何将该角度应用于代码以使箭头旋转......我已经尝试了所有代码......没有任何效果，箭头在源处绘制，但指向错误的方向。

PS：我已经[在 android 中的 Google 地图中的两个 GeoPoints 之间尝试了这个方向](https://stackoverflow.com/q/6478564/840520) 没有找到解决方案我不想显示谷歌地图服务..我的意思是我不想使用这个`URI.parse()`东西。

下面是我正在使用的代码：

```
 public class MapRouteActivity extends MapActivity {

    LinearLayout linearLayout;
    MapView mapView;
    private Road mRoad;
    public final double fromLat = 17.40531527709,
            fromLon = 78.46830368042, toLat = 17.42091669870207,
            toLon = 78.4507942199707;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        new Thread() {
            @Override
            public void run() {

                String url = RoadProvider
                        .getUrl(fromLat, fromLon, toLat, toLon);
                InputStream is = getConnection(url);
                mRoad = RoadProvider.getRoute(is);
                mHandler.sendEmptyMessage(0);
            }
        }.start();
    }

    Handler mHandler = new Handler() {
        public void handleMessage(android.os.Message msg) {
            TextView textView = (TextView) findViewById(R.id.description);
            textView.setText(mRoad.mName + " " + mRoad.mDescription);
            MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
            List<Overlay> listOfOverlays = mapView.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);
            mapView.getController().setZoom(14);
            mapView.invalidate();
        };
    };

    private InputStream getConnection(String url) {
        InputStream is = null;
        try {
            URLConnection conn = new URL(url).openConnection();
            is = conn.getInputStream();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return is;
    }

    @Override
    protected boolean isRouteDisplayed() {
        return true;
    }

    class MapOverlay extends com.google.android.maps.Overlay {
        Road mRoad;
        ArrayList<GeoPoint> mPoints;

        public MapOverlay(Road road, MapView mv) {
            mRoad = road;
            if (road.mRoute.length > 0) {
                mPoints = new ArrayList<GeoPoint>();
                for (int i = 0; i < road.mRoute.length; i++) {
                    mPoints.add(new GeoPoint(
                            (int) (road.mRoute[i][1] * 1000000),
                            (int) (road.mRoute[i][0] * 1000000)));
                }
                int moveToLat = (mPoints.get(0).getLatitudeE6() + (mPoints.get(
                        mPoints.size() - 1).getLatitudeE6() - mPoints.get(0)
                        .getLatitudeE6()) / 2);
                int moveToLong = (mPoints.get(0).getLongitudeE6() + (mPoints
                        .get(mPoints.size() - 1).getLongitudeE6() - mPoints
                        .get(0).getLongitudeE6()) / 2);
                GeoPoint moveTo = new GeoPoint(moveToLat, moveToLong);

                MapController mapController = mv.getController();
                mapController.animateTo(moveTo);
                mapController.setZoom(7);
            }
        }

        @Override
        public boolean draw(Canvas canvas, MapView mv, boolean shadow, long when) {
            super.draw(canvas, mv, shadow);
            drawPath(mv, canvas);
            return true;
        }

        public void drawPath(MapView mv, Canvas canvas) {
            int x1 = -1, y1 = -1, x2 = -1, y2 = -1;
            Paint paint = new Paint();
            paint.setColor(Color.GREEN);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(3);
            for (int i = 0; i < mPoints.size(); i++) {
                Point point = new Point();
                mv.getProjection().toPixels(mPoints.get(i), point);
                x2 = point.x;
                y2 = point.y;
                if (i > 0) {
                    canvas.drawLine(x1, y1, x2, y2, paint);
                }
                x1 = x2;
                y1 = y2;
            }

            Point pointFrom = new Point();
            GeoPoint gp1 = new GeoPoint((int) (fromLat * 1E6),
                    (int) (fromLon * 1E6));
            Point pointTo = new Point();
            GeoPoint gp2 = new GeoPoint((int) (toLat * 1E6),
                    (int) (toLon * 1E6));
            Projection projection = mapView.getProjection();
            projection.toPixels(gp1, pointFrom);
            projection.toPixels(gp2, pointTo);
            Bitmap bmp = BitmapFactory.decodeResource(getResources(),R.drawable.arrow1);
            double dlon = gp2.getLongitudeE6() - gp1.getLongitudeE6();
            double dlat = gp2.getLatitudeE6() - gp1.getLatitudeE6();
            double angle = getDegrees(fromLat, fromLon, toLat, toLon, 15);
            Matrix matrix = new Matrix();
            matrix.postTranslate(-25, -25);
            matrix.postRotate((float)Math.toRadians(angle));
            matrix.postTranslate(pointFrom.x, pointFrom.y);       
            paint.setAntiAlias(true);
            paint.setFilterBitmap(true);
            canvas.drawBitmap(bmp, matrix, paint);
        }
    }

    double getDegrees(double lat1, double long1, double lat2, double long2, double headX) {

        double dLat =  Math.toRadians(lat2-lat1);
        double dLon =  Math.toRadians(long2-long1);

        lat1 = Math.toRadians(lat1);
        lat2 =  Math.toRadians(lat2);

        double y = Math.sin(dLon) * Math.cos(lat2);
        double x = Math.cos(lat1)*Math.sin(lat2) -
                Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);
        double brng = Math.toDegrees(Math.atan2(y, x));

        // fix negative degrees
        if(brng<0) {
            brng=360-Math.abs(brng);
        }

        return brng - headX;
    }
} 
```

Road.java 中的代码

```
 public class Road {
    public String mName;
    public String mDescription;
    public int mColor;
    public int mWidth;
    public double[][] mRoute = new double[][] {};
    public Point[] mPoints = new Point[] {};
} 
```

Point.java 中的代码

包 com.abhi.maproute；

```
public class Point {
    String mName;
    String mDescription;
    String mIconUrl;
    double mLatitude;
    double mLongitude;
} 
```

RoadProvider.java 中的代码

```
package com.abhi.maproute;

/**
 * @author asadafale
 *
 */
import java.io.IOException;
import java.io.InputStream;
import java.util.Stack;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class RoadProvider {

    public static Road getRoute(InputStream is) {
        KMLHandler handler = new KMLHandler();
        try {
            SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
            parser.parse(is, handler);
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return handler.mRoad;
    }

    public static String getUrl(double fromLat, double fromLon, double toLat,
            double toLon) {// connect to map web service
        StringBuffer urlString = new StringBuffer();
        urlString.append("http://maps.google.com/maps?f=d&hl=en");
        urlString.append("&saddr=");// from
        urlString.append(Double.toString(fromLat));
        urlString.append(",");
        urlString.append(Double.toString(fromLon));
        urlString.append("&daddr=");// to
        urlString.append(Double.toString(toLat));
        urlString.append(",");
        urlString.append(Double.toString(toLon));
        urlString.append("&ie=UTF8&0&om=0&output=kml");
        System.out.println("url..."+urlString.toString());
        return urlString.toString();
    }
}

class KMLHandler extends DefaultHandler {
    Road mRoad;
    boolean isPlacemark;
    boolean isRoute;
    boolean isItemIcon;
    private Stack<String> mCurrentElement = new Stack<String>();
    private String mString;

    public KMLHandler() {
        mRoad = new Road();
    }

    public void startElement(String uri, String localName, String name,
            Attributes attributes) throws SAXException {
        mCurrentElement.push(localName);
        if (localName.equalsIgnoreCase("Placemark")) {
            isPlacemark = true;
            mRoad.mPoints = addPoint(mRoad.mPoints);
        } else if (localName.equalsIgnoreCase("ItemIcon")) {
            if (isPlacemark)
                isItemIcon = true;
        }
        mString = new String();
    }

    public void characters(char[] ch, int start, int length)
            throws SAXException {
        String chars = new String(ch, start, length).trim();
        mString = mString.concat(chars);
    }

    public void endElement(String uri, String localName, String name)
            throws SAXException {
        if (mString.length() > 0) {
            if (localName.equalsIgnoreCase("name")) {
                if (isPlacemark) {
                    isRoute = mString.equalsIgnoreCase("Route");
                    if (!isRoute) {
                        mRoad.mPoints[mRoad.mPoints.length - 1].mName = mString;
                    }
                } else {
                    mRoad.mName = mString;
                }
            } else if (localName.equalsIgnoreCase("color") && !isPlacemark) {
                mRoad.mColor = Integer.parseInt(mString, 16);
            } else if (localName.equalsIgnoreCase("width") && !isPlacemark) {
                mRoad.mWidth = Integer.parseInt(mString);
            } else if (localName.equalsIgnoreCase("description")) {
                if (isPlacemark) {
                    String description = cleanup(mString);
                    if (!isRoute)
                        mRoad.mPoints[mRoad.mPoints.length - 1].mDescription = description;
                    else
                        mRoad.mDescription = description;
                }
            } else if (localName.equalsIgnoreCase("href")) {
                if (isItemIcon) {
                    mRoad.mPoints[mRoad.mPoints.length - 1].mIconUrl = mString;
                }
            } else if (localName.equalsIgnoreCase("coordinates")) {
                if (isPlacemark) {
                    if (!isRoute) {
                        String[] xyParsed = split(mString, ",");
                        double lon = Double.parseDouble(xyParsed[0]);
                        double lat = Double.parseDouble(xyParsed[1]);
                        mRoad.mPoints[mRoad.mPoints.length - 1].mLatitude = lat;
                        mRoad.mPoints[mRoad.mPoints.length - 1].mLongitude = lon;
                    } else {
                        String[] coodrinatesParsed = split(mString, " ");
                        int lenNew = coodrinatesParsed.length;
                        int lenOld = mRoad.mRoute.length;
                        double[][] temp = new double[lenOld + lenNew][2];
                        for (int i = 0; i < lenOld; i++) {
                            temp[i] = mRoad.mRoute[i];
                        }
                        for (int i = 0; i < lenNew; i++) {
                            String[] xyParsed = split(coodrinatesParsed[i], ",");
                            for (int j = 0; j < 2 && j < xyParsed.length; j++)
                                temp[lenOld + i][j] = Double
                                        .parseDouble(xyParsed[j]);
                        }
                        mRoad.mRoute = temp;
                    }
                }
            }
        }
        mCurrentElement.pop();
        if (localName.equalsIgnoreCase("Placemark")) {
            isPlacemark = false;
            if (isRoute)
                isRoute = false;
        } else if (localName.equalsIgnoreCase("ItemIcon")) {
            if (isItemIcon)
                isItemIcon = false;
        }
    }

    private String cleanup(String value) {
        String remove = "<br/>";
        int index = value.indexOf(remove);
        if (index != -1)
            value = value.substring(0, index);
        remove = "&#160;";
        index = value.indexOf(remove);
        int len = remove.length();
        while (index != -1) {
            value = value.substring(0, index).concat(
                    value.substring(index + len, value.length()));
            index = value.indexOf(remove);
        }
        return value;
    }

    public Point[] addPoint(Point[] points) {
        Point[] result = new Point[points.length + 1];
        for (int i = 0; i < points.length; i++)
            result[i] = points[i];
        result[points.length] = new Point();
        return result;
    }

    private static String[] split(String strString, String strDelimiter) {
        String[] strArray;
        int iOccurrences = 0;
        int iIndexOfInnerString = 0;
        int iIndexOfDelimiter = 0;
        int iCounter = 0;
        if (strString == null) {
            throw new IllegalArgumentException("Input string cannot be null.");
        }
        if (strDelimiter.length() <= 0 || strDelimiter == null) {
            throw new IllegalArgumentException(
                    "Delimeter cannot be null or empty.");
        }
        if (strString.startsWith(strDelimiter)) {
            strString = strString.substring(strDelimiter.length());
        }
        if (!strString.endsWith(strDelimiter)) {
            strString += strDelimiter;
        }
        while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                iIndexOfInnerString)) != -1) {
            iOccurrences += 1;
            iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
        }
        strArray = new String[iOccurrences];
        iIndexOfInnerString = 0;
        iIndexOfDelimiter = 0;
        while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                iIndexOfInnerString)) != -1) {
            strArray[iCounter] = strString.substring(iIndexOfInnerString,
                    iIndexOfDelimiter);
            iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
            iCounter += 1;
        }

        return strArray;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:45:36.563

一个新选项（在 Google I/O 2012 上发布）是折线上的[符号（包括箭头）](https://developers.google.com/maps/documentation/javascript/overlays#PolylineSymbols)，方向渲染器可以创建折线。

# java - 在 Android 中将 Base-16 字符串转换为 Base-32

> ID：11389997
> 
> 赞同：1
> 
> 时间：2012-07-09T06:26:52.800
> 
> 标签：java, android, base32

我想将 base16 字符串转换为 base32 字符串。例如，如果我有一个 base-16 字符串——“000000000288”，现在我想将其转换为 base-32 对应项（“K-8”）。

有一个网站可以做到：

[http://www.unitconversion.org/unit_converter/numbers.html](http://www.unitconversion.org/unit_converter/numbers.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:39:36.547

我认为你可以这样做：

```
int number = Integer.parseInt("000000000288", 16);
String base32 = Integer.toString(number, 32); 
```

**编辑：对不起，我忘了将基数参数添加到第一行。我现在已经改变了。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-17T18:32:26.023

我发现 java 的[BigInteger](https://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)是所有**位操作**中最好的。在其广泛的用途中（主要用于**存储大量数字**，直到您的内存堆栈可以允许以及支持的广泛的操作），您确实可以选择**从 2 到 36 的基本转换**。

*示例代码：*

```
BigInteger num=new BigInteger("000000000288",16);     //Store as Hexa

//Display the result using BigInteger.toString(radix)
System.out.println("Result = "+num.toString(32));    //Showing result in 32 base 
```

当然，如果您要处理具有**小数部分**的数字，则必须使用 Magiccode 的方法`Integer.toString(radix)`。或者，如果您的数字大于`int`可以存储的数字，我建议您为小数部分运行自己的基本转换函数。

# php - 将数据库中表中列的所有值相加

> ID：11389999
> 
> 赞同：0
> 
> 时间：2012-07-09T06:27:06.217
> 
> 标签：php, mysql

我有名称`number`和表名的列`data`。

列号的数字在 1-9 范围内。（只是一些数据）

我需要对列中的所有这些值求和。我怎么做？

任何简单的命令。我试过`sum(number)`但不来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:35:34.053

这这。

```
$web = mysql_query("select SUM(number) as sumNumber FROM data"); 
$web_sum=mysql_fetch_assoc($web); 
echo $web_sum['sumNumber']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T06:48:45.877

你也可以检查一下并玩一些;）[http://sqlfiddle.com/#!3/191ca/1](http://sqlfiddle.com/#!3/191ca/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T06:31:01.940

试试这个，

```
SELECT SUM(column_name) FROM table_name 
```

[MYSQL 总和](http://www.w3schools.com/sql/sql_func_sum.asp)