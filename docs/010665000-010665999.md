# StackOverflow 问答 10665000-10665999

# python - Python：按名称访问另一类当前模块

> ID：10665000
> 
> 赞同：3
> 
> 时间：2012-05-19T12:01:57.593
> 
> 标签：python

我在一个模块中有以下设置：

```
class A(object):
    # stuff

class B(object):
    # stuff 
```

现在我想做的是，`A`在`B`. 我怎样才能避免这个`globals`功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T12:05:14.987

为什么不直接使用`A`？或者你只有一个字符串`'A'`？如果是的话，`globals()['A']`是要走的路。替代方案将是`getattr(sys.modules[__name__], 'A')`但显然`globals()`更合适。

```
>>> dis.dis(lambda: getattr(sys.modules[__name__], 'Foo'))
  1           0 LOAD_GLOBAL              0 (getattr)
              3 LOAD_GLOBAL              1 (sys)
              6 LOAD_ATTR                2 (modules)
              9 LOAD_GLOBAL              3 (__name__)
             12 BINARY_SUBSCR
             13 LOAD_CONST               1 ('Foo')
             16 CALL_FUNCTION            2
             19 RETURN_VALUE

>>> dis.dis(lambda: globals()['Foo'])
  1           0 LOAD_GLOBAL              0 (globals)
              3 CALL_FUNCTION            0
              6 LOAD_CONST               1 ('Foo')
              9 BINARY_SUBSCR
             10 RETURN_VALUE

>>> dis.dis(lambda: Foo)
  1           0 LOAD_GLOBAL              0 (Foo)
              3 RETURN_VALUE 
```

因此，通过查看用于各种访问方式的说明`Foo`，使用`globals()`很可能比浏览要快`sys.modules`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T12:42:53.003

让我看看我是否理解正确：

*   你有一个看起来像的设置文件

    ```
    ...
    connection-type: FooConnection
    ... 
    ```

*   你有很多课程

    ```
    class FooConnection(Connection): ...
    class BarConnection(Connection): ...
    class BazConnection(Connection): ... 
    ```

*   您想`"FooConnection"`从设置文件映射到*类* `FooConnection`。

* * *

如果是这样，我会这样做：

*   放

    ```
    connection-type: Foo 
    ```

    在设置文件中，或者其他一些不依赖于类名的人类可读的名称。

*   编写从人类可读名称到实现的映射：

    ```
    implementations = {
        "Foo": FooConnection,
        "Bar": BarConnection,
        "Baz": BazConnection
    } 
    ```

    如果您想更改例如实现类的方式，您可以更改此映射。这也让你有同义词。

*   在实现字典中的设置文件中查找值以获取所需的类。

* * *

事实上，你已经在这样做了。只是，不是显式写下字符串到类的映射，而是使用`globals`字典；换句话说，假设最终用户知道您要使用的类名。这不好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T12:07:13.930

我不清楚“按名称访问 A 类”是什么意思，但通常有三种主要方法，具体取决于您实际想要做什么。

1.  您在 B 类中创建 A 类的实例`__init__`
2.  您从 B 类中的 A 类继承
3.  @ThiefMaster 发布的内容。

# android - 当文本以编程方式更改时，TextView 向下移动一行

> ID：10665001
> 
> 赞同：1
> 
> 时间：2012-05-19T12:02:36.483
> 
> 标签：android, textview

这是一个简单的 shell 应用程序，当单击按钮时将显示 data/app 文件夹中的文件数量，文本视图按应有的方式对齐，但是当单击按钮时，显示文件数量的文本视图将向下移动一行。为什么？

这是代码和main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="32dp"
    android:text="Button" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView2"
    android:text="@string/user_apps" />

<TextView
    android:id="@+id/tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView2"
    android:text="0" />

</RelativeLayout> 
```

代码：

```
 package rs.test.rootapp;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.TextView;

    public class RootAppActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final Button button=(Button) findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                String command[]={"su", "-c","ls /data/app | wc -l"};
                Shell shell = new Shell();
                String text = shell.sendShellCommand(command);
                setNewTextInTextView(text);
            }
        });

    }

    public void setNewTextInTextView(String text){
        //TextView tv= new TextView (this);
        //tv.setText(text);
        //setContentView(tv);
        TextView tv =(TextView) findViewById(R.id.tv);
        tv.setText(text);
    }
    } 
```

截图：

![http://i.stack.imgur.com/QgYoF.png](../Images/a287506d1eb588e8bf4ad147a2264218.png)

![http://i.stack.imgur.com/8OjB6.png](../Images/243fb0bf1d1ef097e5d324b52d82685a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:22:32.060

完成修剪操作后在textview中设置文本，可能这会起作用，试试看

```
tv.setText(text.trim()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:05:32.047

看起来很快，命令的返回似乎与文本一起出现。尝试 `text`在 TextView 中设置文本之前替换新行。

# ios - 使用 AVAudioPlayer iOS 从 NSData 播放声音

> ID：10665007
> 
> 赞同：2
> 
> 时间：2012-05-19T12:03:17.840
> 
> 标签：ios, avaudioplayer

我想播放从我的服务器检索到的声音文件，作为 base 64 编码文件。

到目前为止，我已经使用 base64 解码了文件并将其写入文件，如下所示：

```
NSFileManager *fileManager = [NSFileManager defaultManager];            
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);             
NSString *documentsDirectory = [paths objectAtIndex:0]; 
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"voicemail.wav"]];
[fileManager createFileAtPath:filepath contents:[responseDict objectForKey:@"ResponseData"] attributes:nil]; 
```

但是，我在实际播放声音文件时遇到了麻烦。我的代码返回错误：

> 操作无法完成。OSStatus 错误 2003334207。

请你能告诉我哪里出错了吗？

```
NSURL * url = [NSURL fileURLWithPath:filePath];
AVAudioPlayer *sound = [[[AVAudioPlayer alloc] initWithContentsOfURL:url error:&err] autorelease];
if (! sound) {
    NSLog(@"Sound had error %@", [err localizedDescription]);
} else {
    [sound prepareToPlay]; 
    [sound play];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T05:29:37.740

@Himanshu

正如 Mattias Wadman 所建议的，我尝试使用 vlc/iTunes 媒体播放器播放下载的文件，但文件没有播放。因此问题可能出在文件的编码或解码中，而不是播放音频代码中。我检查了相同的内容，并且在编码时嵌入了一些额外的字符。我们致力于编码并解决了这个问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T05:51:46.907

```
 NSData *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
     NSString *path = [documentsDirectory stringByAppendingPathComponent:@"FileName.mp3"]
    NSURL *url = [[NSURL alloc] initFileURLWithPath: path];   
    AVAudioPlayer *sound = [[[AVAudioPlayer alloc] initWithContentsOfURL:url error:&err] autorelease];
      if (! sound) {
        NSLog(@"Sound had error %@", [err localizedDescription]);
        } else {
       [sound prepareToPlay]; 
       [sound play];
         } 
```

# iphone - 使用 addTarget 在 UIView 中定位 UIButton

> ID：10665015
> 
> 赞同：2
> 
> 时间：2012-05-19T12:04:29.683
> 
> 标签：iphone, ios, ios5, uikit

我的 ViewController.m 创建了一个 myUIView 的实例。在 myUIView 中创建了一个 UIButton。

一切似乎都很好，除了在 ViewController 级别捕获我使用**addTarget的按钮按下。**按下按钮会导致崩溃，说：**“无法识别的选择器发送到实例 0x6c254e0...”**

这个 addTarget 代码错了吗？将不胜感激任何人的帮助。

```
- (void)viewDidLoad{

<UIVIew implementation etc...>

[myUIView.myButton addTarget:self action:@selector(myButtonIsPressed:) forControlEvents:UIControlEventTouchUpInside];

}

- (void)myButtonIsPressed{
    NSLog(@"Pressed!");
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T12:09:58.960

只需删除：在 myButtonIsPressed 之后：

```
[myUIView.myButton addTarget:self action:@selector(myButtonIsPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

# activerecord - Rails 3.2 使用嵌套属性更新属性

> ID：10665016
> 
> 赞同：2
> 
> 时间：2012-05-19T12:04:37.763
> 
> 标签：activerecord, ruby-on-rails-3.2

我的模型与我在模型中添加`accepts_nested_attributes_for`的许多关系。我的问题是当我尝试使用在父级中添加的新子级来更新父级记录时，这给了我一个 Record Not found 错误。例如：我有 1 个父记录说 P1，其中有 2 个子记录说 C1，C2。现在，我正在更新 2 个孩子的值，并在该父母中添加另一个孩子。所以现在 P1 有三个孩子 C1,C2,C3。现在，当我尝试使用 update_attributes() 对其进行更新时，它给了我一个错误`ActiveRecord::RecordNotFound (Couldn't find UserItem with ID=0`。

如何克服这个问题？

# iphone - 选择没有 UIImagePicker 的图像

> ID：10665024
> 
> 赞同：1
> 
> 时间：2012-05-19T12:05:42.890
> 
> 标签：iphone, objective-c

我是 iphone 的新手。我需要知道如何在不使用 iphone 中的 UIImagePicker 控制器的情况下从库中获取图像。

我通过 UIImagePicker 从库中挑选图像并将图像名称存储在数据库中，但我想从没有 UIImagePicker 控制器的名称的库中取回该图像。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:56:37.037

最好的方法是 uiimagePickercontroller。否则，您可以将它保存在您的数据库中 n 检索它 n 将其显示在 UIActionSheet 上，因为它会在不使用它的情况下给出 imagepicker 的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:19:36.383

首先，使用 UIImagePicker 控制器是最好的方法，但会施加 UI 限制。您可以使用 ALAssetsLibrary 来获取图像并将其显示在您自己的 UI 中。第三个也是最肮脏的技术是从 imagepickercontroller 中选择图像并将其保存在您的文档目录中以便将来从那里选择（我不推荐这种技术，但这是一种没有 imagepickercontroller 的方法）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-19T12:15:28.897

您可以尝试使用 NSFileManager 访问相机目录 /User/Media/DCIM/ 的文件。然后打开文件并将它们加载到 UIImageViews 中。当您访问应用程序沙箱之外的文件时，不确定 Apple 会如何对此做出反应。

# java - oracle.jdbc.driver.OracleConnection 的类转换异常

> ID：10665029
> 
> 赞同：4
> 
> 时间：2012-05-19T12:06:27.947
> 
> 标签：java, jdbc

我在以下代码的第一行收到异常

> java.lang.ClassCastException：oracle.jdbc.internal.OracleConnection$$EnhancerByProxool$$3415e85 无法转换为 oracle.jdbc.driver.OracleConnection

如何将字符串转换为`oracle.sql.Clob`以及如何使用`PreparedStatement`.

```
// con is java.sql.Connection object
oracle.sql.CLOB newClob = oracle.sql.CLOB.createTemporary(con, false, oracle.sql.CLOB.DURATION_SESSION);

newClob.putString(1,transcript); 
pstmt.setClob(1, newClob);
pstmt.setString(2, StringUtils.dateToMillis(endTime));
pstmt.setString(3, sessionID);
int count = pstmt.executeUpdate();
System.out.println("updated count ::"+count);
System.out.println("transcript updated...."); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:14:00.740

```
Clob clob = connection.createClob();
clob.setString(1, transcript); 
```

或者简单地使用 setClob() 方法将阅读器作为参数：

```
pstmt.setClob(1, new StringReader(transcript)); 
```

无需使用任何数据库专有类。JDBC 应该是一个与数据库无关的抽象层。

# android - 启动应用程序的最快方式

> ID：10665032
> 
> 赞同：1
> 
> 时间：2012-05-19T12:06:57.220
> 
> 标签：android, android-intent, android-activity

在我的应用程序中，开始时间很关键——我需要它尽可能小。如果应用程序从主屏幕启动（用户单击图标），则启动时间是可以接受的（不到一秒），但如果我从服务启动应用程序 - 我有一个服务可以根据某些事件启动/聚焦我的应用程序 -开始时间超过一秒。

启动我的应用程序的代码是这样的：

```
Intent i = new Intent(getApplicationContext(), AppActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_NO_ANIMATION );
startActivity(i); 
```

有什么办法可以改善开始时间吗？有时（大部分时间）我的应用程序正在运行，上面的代码只将我的应用程序置于前台（无需启动，只需“聚焦”）。如果应用程序启动或只是获得焦点，时间 - 如我所见 - 不会改变。

如何提高开始/聚焦时间？

# windows - 有人觉得这有用吗？- 在 Windows 上使用 Cywin 和 NDK r5 编译 FFMPEG

> ID：10665039
> 
> 赞同：11
> 
> 时间：2012-05-19T12:07:55.433
> 
> 标签：windows, ffmpeg, cygwin

无论如何，有人觉得这些信息有用吗？

我已经尝试编译这个东西一段时间了，我知道互联网上有许多帖子提供帮助。我已经阅读并尝试了大部分建议，并希望将我的成功整理到这篇文章中，让其他人从中受益。

因为我没有博客，所以我认为在这里发帖不会有什么坏处。

我已经设法使用 NDK r5 和 Cygwin 在 Windows 7（32 位）上编译 FFMPEG 0.10.3（自由）。步骤：

1 - 在 C 驱动器的根目录中下载/安装 Cygwin。我不会对此给出说明，它很简单，并且有*很多*关于此的教程。

[2 - 从这里](http://dl.google.com/android/ndk/android-ndk-r5-windows.zip)下载 NDK r5并解压到 C 盘的根目录。

[3 - 从这里](http://ffmpeg.org/download.html)下载 FFMPEG 0.10.3并解压到 C 盘的根目录。

4 - 在文本编辑器中打开 FFMPEG 目录根目录下的“configure”文件。

5 - 注释掉第 2073、2074 和 2075 行。

6 - 在 2075 以下，添加以下行：

> TMPDIR=c:/cygwin/tmp

7 - 下载[此](http://roman10.net/src/build_android_r5b.txt)脚本（谢谢 roman10）并将其放在您的 FFMPEG 根目录中。将文件重命名为

> build_android.sh

8 - 在文本编辑器中打开脚本并编辑第 17 行以读取

> c:/android-ndk-r5

9 - 单击开始 > 运行并键入“bash”（不带语音标记），然后按 Enter。

10 - 键入以下内容并按 Enter：

> cd /cygdrive/c/ffmpeg-0.10.3

11 - 键入以下内容并按 Enter：

> dos2unix build_andoird.sh

12 - 键入以下内容并按 Enter：

> ./build_android.sh

13 - 坐等... libffmpeg.so 将很快出现在您的“c:\ffmpeg-0.10.3\android\”目录中（该目录在 roman10 博客的脚本底部定义）。默认架构是 armv7-a。

来自 roman10 博客的脚本实际上会编译一个相当大的共享对象 (.so) 文件。可以在 roman10 博客中的脚本中调整编译器标志以满足您的需要。

# c# - 如何将 NULL 表示为神经网络

> ID：10665043
> 
> 赞同：1
> 
> 时间：2012-05-19T12:08:29.663
> 
> 标签：c#, neural-network, encog

我有大量数据集，但是在列中的某处，如果数据不存在，则故意丢失数据，因此它为空，或者它丢失，因此该字段为空。我应该将此值表示为我不使用的数字吗？我的数据范围是 -1 还是其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:11:42.417

您可以使用默认值（T）；你也可以使用 Nullable 的..

[http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)

查看我的报告课程以了解缺失数据

[https://net7ntcip.codeplex.com/SourceControl/changeset/view/89621#1751861](https://net7ntcip.codeplex.com/SourceControl/changeset/view/89621#1751861)

[https://net7ntcip.codeplex.com/SourceControl/changeset/view/89621#1751850](https://net7ntcip.codeplex.com/SourceControl/changeset/view/89621#1751850)

# php - 如何使用未知数量的参数制作准备好的语句？（用于搜索框）

> ID：10665047
> 
> 赞同：2
> 
> 时间：2012-05-19T12:09:13.503
> 
> 标签：php, mysql

我有这个 foreach 循环，用于搜索功能：

```
$keywords=$_GET['keyword']; 
$exploded=explode(' ',trim($keywords));
$mysql_command="SELECT * FROM items WHERE completed='1' AND ";

foreach ($exploded as $key => $value){
    if ($key>0)
        $mysql_command.=' OR ';

    $mysql_command.="title LIKE ? OR description LIKE ?";
        } 
```

我想使用这个准备好的语句：

```
$stmt=$cxn->prepare($mysql_command);
$stmt->execute(array("%$value%","%$value%")); 
```

问题是，我不知道会有多少关键字。那么如何使用未知数量的关键字制作准备好的语句？

提前非常感谢。问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T12:19:42.887

为什么在这样的请求之后不创建数组：

```
$params=Array();
foreach($exploded as $key => $value){
  $params[]="%$value%";
}
$stmt->execute($params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T00:30:44.313

mysqli 不允许直接调用`execute`或`bind_param`使用数组。你必须使用`call_user_func_array`它，像这样：

```
call_user_func_array(array($stmt, "bind_param"), array("s", "%test%")); 
```

然后，要构建数组，您可以使用以下命令：

```
class BindParam{
    private $v = array("");

    public function add( $type, &$value ){
        $this->v[0] .= $type;
        $this->v[] = &$value;
    }

    public function get(){
        return $this->v;
    }
} 
```

这是此[http://php.net/manual/en/mysqli-stmt.bind-param.php#109256](http://php.net/manual/en/mysqli-stmt.bind-param.php#109256)的调整版本。然后像这样使用它：

```
$searchTerms = explode(' ', $filter);
$searchTermBits = array();
foreach ($searchTerms as $term) {
    $term = trim($term);
    if (!empty($term)) {
        $searchTermBits[] = "title LIKE ?";
        $a = '%'.$term.'%';
        $bindParam->add('s', $a); // can't pass by value
    }
}
$filter_sql = "WHERE " . implode(' AND ', $searchTermBits);

/*...*/

call_user_func_array(array($stmt, "bind_param"), $bindParam->get()); 
```

# javascript - Javascript ajax 调用发布不完整的数据

> ID：10665048
> 
> 赞同：1
> 
> 时间：2012-05-19T12:09:16.730
> 
> 标签：javascript, ajax, json, web-crawler, mason

在进行异步 ajax 发布时，我在生产中遇到了不寻常的情况。

```
<script type="text/javascript">
    Mylib.defined('jQuery', function() {
        jQuery.ajax({
            'type':    'POST',
            'url':   '/my/url.html',
            'async':   true,
            'cache':   false,
            'global':  false,
            'data':    {
                    'param1': 'value1' ,
                    'param2': 'value2'
            }
      });
  }); 
```

**Mylib.defined(functionality,callback())**等待功能加载，然后触发回调函数。

/my/url.m 是 mason 文件，它采用两个参数，其中 'param1' 是必不可少的，它应该出现在发布的数据中。

**/my/url.m**的内容

 **```
<%args>
    param1
    param2 => undef
</%args>
<%perl>
   -----
 </%perl>
<%args> 
```

**问题**

我有一种感觉，因为我们从我们的 ajax 调用中发布 JSON 数据（参见上面的 JS），其关键 param1 是硬编码的（尽管 value1 是动态的），所以我永远不会遇到端点（梅森文件）获胜的情况' t 传递必要的 param1。但令我惊讶的是，在很多情况下 param1 没有传递给 mason 文件。我无法得到这个。有人可以在这里帮助我吗？

网络爬虫可以在没有任何参数的情况下点击 url /my/url.html 吗？**

# c++ - 我在擦除功能中遇到垃圾

> ID：10665049
> 
> 赞同：1
> 
> 时间：2012-05-19T12:09:20.617
> 
> 标签：c++, visual-c++

我在我的用户定义的向量中收到垃圾。垃圾在擦除功能之后出现这是代码

```
 #if 1   // Make it 1 to enable this code

#include <iostream>
using namespace std;

class Vector{
protected:
    int l;
    int* v;
public:
    Vector():l(0),v(0){
        cout << "\nBase class: Vector: Default constructor" << endl;
    }
    Vector( int len ):l(len),v(new int[l]) {
        cout << "Vector: Overloaded constructor" << endl;
    }
    void set( int i, int val)
    {
        if( l )
            v[i] = val;
        else{
            cout << "Error: zero size vector\n exiting..." <<endl;
            exit(5);
        }
    }
    int get( int i)
    {
        if( l )
            return v[i];
        else{
            cout << "Error: zero size vector\n exiting..." <<endl;
            exit(5);
        }       
    }   
    ~Vector(){
        cout << "Base dextructor" <<endl;
        delete [] v;
    }

};

class Vector1:public Vector{
private:

public:
    Vector1():Vector(){
        cout << "Derived class: Vector1:: Default constructor" << endl;
    }
    //my functions
    int size()
    {
    return l;
    }
    int front()
    {
    return Vector::get(0);
    }
    int end()
    {
    return Vector::get(l-1);
    }
    void swap(int a,int b)
    {
    int temp=v[a];
    v[a]=v[b];
    v[b]=temp;
    }
    void find(int val)
    {
        bool flag=false;
       for(int i=0;i<l;i++)
       {
         if(v[i]==val)
         {
         flag=true;
         }
       }
       if(flag==true)
           cout<<"\nValue ="<<val<<" =Exists in Vector";
       else
           cout<<"\nValue ="<<val<<" =doesnot Exists in Vector";
    }
    void erase(int val)
    {

        int *temp=new int[l-1];
        int k=0;
        for(int i=0;i<l;i++)
        {
        if(v[i]!=val)
        {
        temp[i]=v[i];
        k++;
        }
        }
        delete []v;
        l=l-1;
        v=new int[l];
        for(int i=0;i<l;i++)
        {
        v[i]=temp[i];
        }

    }
    int resize( int len ) 
    {
        if( l )
            delete [] v;
        l = len;
        v = new int[l];
        return (v!=0);
    }
    void set( int i, int val)
    {
        if( i>= 0 && i<l )
            Vector::set( i, val );
        else{
            cout << "Error: index out of range\n exiting..." <<endl;
            exit(3);
        }
    }
    int get( int i)
    {
        if( i>= 0 && i<l )
            return Vector::get(i);
        else{
            cout << "Error: index out of range\n exiting..." <<endl;
            exit(3);
        }
    }   
    int & operator [](int i)
    {
        return v[i];
    }

    Vector1( int len ):Vector(len)
    {

    }

};

int main()
{
    Vector vec; 

    Vector1 v1;
    v1.resize( 4 );
    v1.set( 2, 4);
    v1.set( 1, 5);
    v1.set( 0, 6);

    int x = v1[2];

    v1[3] = 77;
    cout<<"\nSize of vector is=\n"<<v1.size();
    //v1.set( 5, 4);        // erroneous value
    cout<<"\nFront of vector is=\n"<<v1.front();
    cout<<"\nEnd of vector is=\n"<<v1.end();
   //do swap between values
    cout<<"\n";
    v1.swap(1,3);
    //now values are
    cout<<"v1[1] is equals to= "<<v1[1];
    cout<<"v1[3] is equals to= "<<v1[3];
    v1.find(5);
    v1.find(100);
    cout<<"\nNow v1[0] is equals to= \n"<<v1[0];
    v1.erase(6);
    cout<<"\nNow v1[0] is equals to= \n"<<v1[0]<<"  "<<v1[1];
    cout<<"\n";
}
#endif 
```

输出是这个 ![在此处输入图像描述](../Images/2a75e46aac13caf2f5ea93546e51b570.png)

v1[0] 应该是 5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:19:51.047

在您的`erase`函数中，您实际上并没有擦除给定的数字，您只是将向量中不等于给定数字的每个数字复制到一个新数组中。例如，如果向量中的内部数组包含数字 2、4、6 和 8，并且您正在擦除 6，则只需将 2、4 和 8 复制到索引 0、1 和 3 的新数组中，同时保留插槽 2在新数组中未定义。然后创建比新数组短一个的第三个数组，并将除最后一项之外的所有内容复制到第三个数组中，包括未定义的插槽 2，但不包括最后一个插槽（应该保留）。

我认为 using`temp[k] = v[i]`可以解决您在`erase`函数中的问题，但请注意，它仍然不是一个完美的解决方案，因为被删除的项目可能在向量中出现*多次*，或者它可能根本不存在，所以它不是新长度总是比旧长度小一的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:19:35.307

在擦除功能中，您应该拥有`temp[k] = v[i]`和不拥有`temp[i] = v[i]`.

# c# - Winform 数据网格视图。列列表在构建后重置

> ID：10665058
> 
> 赞同：1
> 
> 时间：2012-05-19T12:11:14.320
> 
> 标签：c#, winforms, datagridview

这辆 DGV 的形式已经生产了几个月。我编辑了表单以将复选框添加到页面上的不相关功能。构建了解决方案，DGV 突然让所有列都可见，并且所有列参数都重置为默认值。

我想‘嗯，这很奇怪’。将 DGV 改回原来的样子，点击调试并运行表单。一切看起来都很好。停止调试，你瞧，所有的列都被重新设置了。

我想‘嗯，这很烦人’。所以我删除了 DGV，添加了一个新的，再次设置它，新的也做了同样的事情。然后我开始使用这些列，只有某些列是唯一显示的列时，DGV 才会重置。通过留下我想要的列和一些我不想要但设置为不可见的列，我已经停止了不良行为。

我没有更改数据集，也没有对基础数据表或存储过程进行任何更改。但只是为了确保我用绑定到相同数据集的 DGV 构建了另一个表单，没有问题。

不知道此时该做什么。现在一切正常，但不得不花半个小时试图弄清楚为什么 VS 不断重新设计我的表单，这很烦人。

其他人遇到过这个问题吗？我会包含代码，但我不认为它是代码问题。也许是 Visual Studio Voodo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:32:44.927

我有类似的东西，但与 DGV 不同，

很久以前就记不得了，但我记得我在构造函数中添加了添加列的代码，这使得设计器总是添加越来越多的内容。

.

另一种可能性是您为表单制作了不同的构造函数，而 Winforms 设计器不会从中调用 InitiateComponent()。

抱歉，我无法提供更多帮助。

# android - 如何使用 Android 中的内置麦克风获取噪音水平

> ID：10665059
> 
> 赞同：1
> 
> 时间：2012-05-19T12:11:22.330
> 
> 标签：android, noise

我想要的是能够通过单击按钮获得以分贝 (dB) 为单位的当前噪音水平。我一直在玩传感器，可以让它们轻松工作，但这......我很难过。我尝试了一些代码，但都没有工作，或者帮助我理解了这一点。

如何做到这一点？

编辑：

我使用以下代码：

```
 private Thread recordingThread;
private int bufferSize = 800;
private short[][] buffers = new short[256][bufferSize];
private int[] averages = new int[256];
private int lastBuffer = 0;

AudioRecord recorder;
boolean recorderStarted = false;

protected void startListenToMicrophone()
{
    if (!recorderStarted)
    {

        recordingThread = new Thread()
        {
            @Override
            public void run()
            {
                int minBufferSize = AudioRecord.getMinBufferSize(8000,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT);
                recorder = new AudioRecord(AudioSource.MIC, 8000,
                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                        AudioFormat.ENCODING_PCM_16BIT, minBufferSize * 10);
                recorder.setPositionNotificationPeriod(bufferSize);
                recorder.setRecordPositionUpdateListener(new OnRecordPositionUpdateListener()
                {
                    @Override
                    public void onPeriodicNotification(AudioRecord recorder)
                    {
                        short[] buffer = buffers[++lastBuffer
                                % buffers.length];
                        recorder.read(buffer, 0, bufferSize);
                        long sum = 0;
                        for (int i = 0; i < bufferSize; ++i)
                        {
                            sum += Math.abs(buffer[i]);
                        }
                        averages[lastBuffer % buffers.length] = (int) (sum / bufferSize);
                        lastBuffer = lastBuffer % buffers.length;
                        Log.i("dB", ""+averages);
                        tv4.setText("" + averages[1]);
                    }

                    @Override
                    public void onMarkerReached(AudioRecord recorder)
                    {
                    }
                });

                recorder.startRecording();
                short[] buffer = buffers[lastBuffer % buffers.length];
                recorder.read(buffer, 0, bufferSize);
                while (true)
                {
                    if (isInterrupted())
                    {
                        recorder.stop();
                        recorder.release();
                        break;
                    }
                }
            }
        };
        recordingThread.start();

        recorderStarted = true;
    }
}

private void stopListenToMicrophone()
{
    if (recorderStarted)
    {
        if (recordingThread != null && recordingThread.isAlive()
                && !recordingThread.isInterrupted())
        {
            recordingThread.interrupt();
        }
        recorderStarted = false;
    }
}
    } 
```

我的应用程序中有两个按钮。第一个调用 startListenToMicrophone，第二个调用 stop。我不明白这是如何工作的。我从这里得到了代码。

textview 获得了一个奇怪且非常大的价值。我需要的是以分贝为单位的声级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:51:12.427

只是一个短暂的想法，我可能非常错误，但是，dB=20xlog(S1/S2) 的幅度。我在您的代码中的任何地方都找不到此计算。您需要做的是获取 S1，这将是当前记录的级别，并获取 S2，这需要是要记录的最大可能值。然后计算dB值。

# android - Android 可以通过 NFC 与 Window Phone 通信吗？

> ID：10665060
> 
> 赞同：1
> 
> 时间：2012-05-19T12:11:26.467
> 
> 标签：android, windows-mobile, nfc

我有一个问题，两个平台是否通过 NFC 相互通信。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T02:25:55.207

使用 pf p2p 通信应该是可能的。还有一种可能性是，一部手机将在卡模拟模式下工作，而另一部手机将读取数据——但这只是一种理论，而不是一种现实的可能性，因为您需要访问安全元件。

我没有检查 WP7 NFC API，但要小心 - 我们对该系统的经验是几乎没有什么是可能的，所以请务必仔细检查 p2p/LLCP API 是否存在，并且它的顶部有 SNEP。 .

另一方面，NFC 堆栈由 INSIDE Secure 提供的有希望的信息（参见[http://wmpoweruser.com/inside-secure-provides-nfc-tech-in-nokia-lumia-610-nfc/](http://wmpoweruser.com/inside-secure-provides-nfc-tech-in-nokia-lumia-610-nfc/)）。另请查看 WIMA 的此演示文稿：http://www.wima.mc/dan/2012/PRESENTATIONS/willem_francois.pdf。我不确定的是，MicroRead NFC 控制器是否带有 SecuRead 安全元件......

在这里查看相当不错的 NFC 堆栈： http: [//nfc-smart-tag.googlecode.com/git/docs/FirmwareStack.png](http://nfc-smart-tag.googlecode.com/git/docs/FirmwareStack.png)

BR 斯坦

# javascript - 如何在来自外部点击事件的 jquery 发布请求中传递额外的参数？

> ID：10665063
> 
> 赞同：0
> 
> 时间：2012-05-19T12:12:06.560
> 
> 标签：javascript, jquery

嗨，我有如下的 jquery 请求，

```
$('#filterForm').submit(function(e){
        e.preventDefault();
        var dataString = $('#filterForm').serialize();
        var class2011 = document.getElementById("2011").className;
        //var validate = validateFilter();
        alert(dataString);
        if(class2011=='yearOn')
            {
                dataString+='&year=2011';
                document.getElementById("2011").className='yearOff';
            }
        else
            {
            document.getElementById("2011").className='yearOn';
            }

         alert (dataString);

          $.ajax({
            type: "POST",
            url: "myServlet",
            data: dataString,
            success: function(data) {
                /*var a = data;
                alert(data);*/
            }
          }); 
```

我的表格就像，

```
<form  method="post" name="filterForm" id="filterForm">
  <!-- some input elements -->
</form> 
```

好吧，我在表单的提交事件上触发 jquery 提交，（它工作正常）我想在表单内部传递一个额外的参数，它不在表单内容的上方，但它在页面外部，如下所示

[查看此图片链接以获取代码预览][1]

那么我如何触发上面的事件，点击，元素类 yearOn（检查上面的 html 片段）和类 yearOff，年的附加参数设置为 2011 或 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:34:31.540

```
$(document).ready(function () {
            $('#filterForm').submit(function (e) {
                e.preventDefault();
                var dataString = $('#filterForm').serialize();
                if ($("#2011").hasClass('yearOn')) {
                    dataString += '&year=2011';
                    $("#2011").removeClass('yearOn').addClass('yearOff');
                }
                else {
                    $("#2011").removeClass('yearOff').addClass('yearOn'); 
                }

                $.ajax({ 
                    url: "/myServlet",
                    type: "POST",                       
                    data: dataString,
                    success: function (data) {
                        /*var a = data;
                        alert(data);*/
                    }
                });
            });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T17:23:45.460

1.) 如果你已经在使用 jQuery，你可以使用 jquery 提供的 $.post() 函数。在大多数情况下，它会让您的生活更轻松。

2.）我总是通过这种方式成功发布带有额外参数的帖子：

**在这里为您构建额外的参数**

```
 commands={
            year:'2011'
    }; 
```

**将它与您的表单序列化结合起来**

```
var dataString=$.param(commands)+'&'+$("#filterForm").serialize(); 
```

**在此处执行您的帖子**

```
$.post("myServlet",data,
        function(data) {
            /*var a = data;
        alert(data);*/
    }
    ); 
```

**或使用 $.ajax 如果你真的喜欢它**

```
$.ajax({
        type: "POST",
        url: "myServlet",
        data: dataString,
        success: function(data) {
            /*var a = data;
            alert(data);*/
      } 
```

* * *

**最后，这是您现在执行的方式的完整代码**

```
 $('#filterForm').submit(function(e){
        e.preventDefault();
        var class2011 = document.getElementById("2011").className;
        //var validate = validateFilter();
        alert(dataString);
        if(class2011=='yearOn') {
                dataString+='&year=2011';
                document.getElementById("2011").className='yearOff';
        } else {
            document.getElementById("2011").className='yearOn';
        }
         commands={
                year:'2011'
         };

         var dataString=$.param(commands)+'&'+$("#filterForm").serialize();

         alert (dataString);

          $.ajax({
            type: "POST",
            url: "myServlet",
            data: dataString,
            success: function(data) {
                /*var a = data;
                alert(data);*/
          }
    }); 
```

# data-structures - BST 上下一个/上一个函数的时间复杂度

> ID：10665065
> 
> 赞同：2
> 
> 时间：2012-05-19T12:12:30.613
> 
> 标签：data-structures, binary-tree, big-o, time-complexity

我对通过二叉搜索树前进和后退的最坏情况效率感兴趣。

**不平衡树：**

```
 5
  /
 1 
  \
   2
    \
     3
      \
       4 
```

看起来最坏的情况是 4->5，这需要 4 次操作。

**平衡树：**

```
 2
  / \
 1   4
    / \ 
   3   5 
```

最坏的情况是 2->3，需要 2 次操作。

我是否认为任何 BST 的最坏情况是 O(height-1)，对于平衡树是 O(log n)，对于不平衡树是 O(n-1)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T12:16:42.197

> 我是否认为任何 BST 的最坏情况是 O(height-1)，对于平衡树是 O(log n)，对于不平衡树是 O(n-1)？

是的，您只需要在从`k`to移动时向上或向下移动，而`k+1`不是两者都需要（因为不变量是`left child < parent < right child`）。

尽管 O(height-1) 可以写成 O(height)（对于 O(n) 也是如此）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:21:24.730

如果您正在考虑按顺序遍历树，那么复杂性在平衡方面不会改变。算法还在

```
 walk( Node n)
    walk( n.left )
    visit( n )
    walk( n.right ) 
```

每步 1 个操作。

当您开始应用查找、插入和删除时，余额就会发挥作用。

为了使这些操作在 O(log N ) 中进行，需要一个平衡树。

如果您试图在树定义的序列中找到下一个元素，您可能需要遍历树的整个高度，当然在平衡树中这是 O ( log N )，而在不平衡树中这是 O(N)

# java - OSGi 性能调试

> ID：10665066
> 
> 赞同：2
> 
> 时间：2012-05-19T12:12:39.120
> 
> 标签：java, osgi, embedded-linux

我正在尝试诊断构建在 OSGi 之上的 Java 应用程序的性能问题。该平台是在嵌入式 Linux 机器上运行的 ARM5 处理器。CPU 利用率通常为 100%，内存消耗量很大。

我在房子的嵌入式 O/S 方面，Java 开发人员在企业应用程序开发方面比嵌入式更熟练。虽然我的背景还包括嵌入式 Java，但正是出于这个原因，我一直避免使用 OSGi。

我正在寻找唾手可得的果实——有哪些常见的设计错误可能会导致 CPU 和内存消耗过多，我可以快速调查这些错误以使 CPU 利用率恢复到更合理的水平。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T10:30:03.977

以下是一些常见的设计陷阱，希望对您有所帮助：

*   线程的创建可能非常“昂贵”。您是否有例如不断创建新线程的消息传递？使用线程池。

*   对于对象（例如消息、测量值）也是如此，尤其是内部只有一个字段发生变化的重包装器。使用对象池——它有很大帮助！

*   对字符串要非常小心，尤其是连接。对字符串调用简单的操作（替换、追加、复制）通常会涉及到许多“表面之下”的临时对象的使用，这对内存和垃圾回收都有负面影响。当在经常执行的代码中对字符串进行修改时（例如，日志助手类的常用方法、负责编写通过协议发送的消息的方法等），然后用不使用的实现替换无效方法的优化临时对象显着提高了性能。

    *   采用`StringBuffer`
    *   尽可能使用自己的字符串解析 via`String.indexOf(int)`而不是`StringTokenizer`
    *   第一个字符比较通过`string.charAt(0)`比`String.startsWith(str)`
    *   尽可能使用`String`'s equals 方法`equalsIgnoreCase`
*   调整日志级别，使其在正常工作期间不包含调试消息。所有这些调试消息的简单创建可能会大大降低系统速度。还输出到控制台（即使您没有看到它）通常会减慢系统速度 - 始终改为登录到 OSGi 日志服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:07:22.457

您发布的分析显示了很多字符串。所以也许你遇到了一个旧的 Java 性能陷阱。

如果您在代码中的某个地方执行以下操作： myString = myString + " "; 或类似的循环它每次都会创建一个新对象。在这些情况下，使用 StringBuilder 是有意义的。这只是一个疯狂的猜测，但它也击中了我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T07:43:44.603

试试 Knopflerfish，他们有一个更专注于嵌入式的开源框架实现。还有一家 Prosyst 公司有一个针对嵌入式的商业 OSGi 框架。

# android - 如何从java反编译中保护apk

> ID：10665070
> 
> 赞同：1
> 
> 时间：2012-05-19T12:13:59.790
> 
> 标签：android, security, apk, decompiling

> **可能重复：**
> [如何防止我的 apk 反编译](https://stackoverflow.com/questions/5639225/how-to-prevent-my-apk-from-decompiling)

您可能知道 - 反编译 APK 文件太容易了：将 apk 解压缩为 zip - 完全破坏清单和所有资源。
使用简单的反编译软件 - 诋毁所有源代码（只有不是原始变量名称..）

我想知道是否有办法以某种方式保护 APK 文件不被反编译。

我认为我需要这个的原因对你们所有人来说都是显而易见的——出于安全原因，我不希望人们阅读源代码或其中的任何部分......

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T12:17:44.357

使用[proguard](http://developer.android.com/guide/developing/tools/proguard.html)。它通过删除未使用的代码并用语义模糊的名称重命名类、字段和方法来缩小、优化和混淆您的代码。结果是较小的 .apk 文件更难进行逆向工程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:18:12.873

据我所知，你不能。如果您根您的手机，您将始终能够提取 apk 及其内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T12:37:20.953

您可以使用 proguard 并在完成编码后，您可以使用带有密钥库的 eclipse 导出 apk 文件。这使您的应用程序更加安全。 [链接到创建密钥库。](http://developer.android.com/guide/publishing/app-signing.html)

# homebrew - HomeBrew Formula : 下载两个 URL 包

> ID：10665072
> 
> 赞同：4
> 
> 时间：2012-05-19T12:14:14.623
> 
> 标签：homebrew

我需要用文件上传包编译 nginx。该模块不是默认 nginx brew 公式的一部分。似乎 brew 公式基于一个下载 pkg，见下文

```
class Nginx < Formula
  homepage 'http://nginx.org/'
  url 'http://nginx.org/download/nginx-1.2.0.tar.gz'
  md5 'a02ef93d65a7031a1ea3256ad5eba626'

  devel do
    url 'http://nginx.org/download/nginx-1.3.0.tar.gz'
    md5 'b02e171c4a088aa9a5ab387943ce08eb'
  end 
```

如何在子文件夹中下载波纹管，比如 nginx/contrib ？

```
url 'http://www.grid.net.ru/nginx/download/nginx_upload_module-2.2.0.tar.gz'
md5 '2681a6167551830a23336fa41bc539a1' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T22:12:47.003

您可以使用“子公式”。您可以将此类定义粘贴在 Nginx 公式文件中：

```
class NginxUploadModule < Formula
  url 'http://www.grid.net.ru/nginx/download/nginx_upload_module-2.2.0.tar.gz'
  md5 '2681a6167551830a23336fa41bc539a1'
end 
```

然后在`install`Nginx 公式的方法中，你会做类似的事情

```
NginxUploadModule.new.brew do
  (buildpath/'where/you/want/the/files').install Dir['*']
end 
```

相应地调整路径。

核心 Homebrew 存储库中有很多这样的例子；grepping“new.brew”应该给你不少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-04T21:01:32.553

来自[https://github.com/Homebrew/homebrew/blob/master/Library/Contributions/example-formula.rb](https://github.com/Homebrew/homebrew/blob/master/Library/Contributions/example-formula.rb)

```
# Additional downloads can be defined as resources and accessed in the
# install method. Resources can also be defined inside a stable, devel, or
# head block. This mechanism replaces ad-hoc "subformula" classes.
resource "additional_files" do
  url "https://example.com/additional-stuff.tar.gz"
  sha1 "deadbeef7890123456789012345678901234567890"
end

# Additional downloads can be defined as resources (see above).
# The stage method will create a temporary directory and yield
# to a block.
resource("additional_files").stage { bin.install "my/extra/tool" } 
```

# jquery - jquery $ajax 获取其他 html 的内容，但获取 3 次而不是 1 次

> ID：10665075
> 
> 赞同：1
> 
> 时间：2012-05-19T12:14:29.210
> 
> 标签：jquery, web

这是代码：

```
$.ajax({
                url:"gegarandeerd.html",
                dataType: "html",
                success: function(data){    
                    $("#content").prepend(data);
                    }   
                });
                $("#content").fadeIn(2000);
        }); 
```

当我运行代码时，它加载的 html 页面在我的屏幕上出现了 3 次......当我不使用 prepend 而只是使用 html.(data) 时，它工作正常。**有人知道该怎么做吗？**

更多代码：

```
$("a#leesmeer").click(function(){
        var teller = 0;

        $("div#topic").toggle('slide',function(){
        $.ajax({
                url:"gegarandeerd.html",
                dataType: "html",
                success: function(data){    
                        $("#content").prepend(data);
                        alert("1");     
                        }   
                });
                $("#content").slideToggle();    
                });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:33:42.570

我认为带有该 ajax 代码的 .js 文件被调用了 3 次。检查 firebug > Net > Js 选项卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:31:46.440

如果在您的页面 jquery.js 中包含多次，那么也在 ajax 调用中应用您包含 jquery 的次数

所以请检查你的来源，jquery包含多少次

# hibernate - 如何避免 HQL 和 Criteria 中不必要的选择和连接

> ID：10665084
> 
> 赞同：7
> 
> 时间：2012-05-19T12:16:29.023
> 
> 标签：hibernate, optimization, join, hql, criteria

我一直在尝试**HQL**和**Criteria**的不同组合，但我无法避免一些不必要的**连接**（在两者中）和一些不必要的**选择**（在 Criteria 中）。

在我们的场景中，我们在**Segment**和**Application实体之间有一个****@ManyToMany**关系（导航是从 Segment 到 Applications）。

 ****首先我尝试了这个**标准**：

```
Application app = ...
List<Segment> segments = session.createCriteria(Segment.class)
    .createCriteria(Segment.APPLICATIONS)
    .add(Restrictions.idEq(app.getId()))
    .list(); 
```

Wich 产生这个 SQL：

```
select
    this_.id as id1_1_,
    this_.description as descript2_1_1_,
    this_.name as name1_1_,
    applicatio3_.segment_id as segment1_1_,
    applicatio1_.id as app2_,               <==== unnecessary APPLICATIONS columns
    applicatio1_.id as id7_0_,
    applicatio1_.name as name7_0_,
    applicatio1_.accountId as accountId7_0_,
    applicatio1_.applicationFlags as applicat5_7_0_,
    applicatio1_.description_ as descript6_7_0_,
from
    SEGMENTS this_ 
inner join
    SEGMENTS_APPLICATIONS applicatio3_ 
        on this_.id=applicatio3_.segment_id 
inner join                                       <==== unnecessary join
    APPLICATIONS applicatio1_ 
        on applicatio3_.app_id=applicatio1_.id 
where
    applicatio1_.id = ? 
```

如您所见，*Criteria 从 APPLICATIONS 中选择列*，我不想被选中。我还没有找到办法（有可能吗？）。此外，它*与 APPLICATIONS 连接*，我认为这不是必需的，因为应用程序 id 已经在连接表 SEGMENTS_APPLICATIONS 中（HQL 也是如此）。

（作为另一个疑问，我想知道直接使用应用程序的限制，而不是 app.getId()。如您所见，我可以在查询的 HQL 版本中做到这一点）

由于我无法限制选择部分（我不需要应用程序属性），我尝试使用“select”子句使用此**HQL ：**

```
Application app = ...
List<Segment> segments = session.createQuery(
    "select s from Segment s join s.applications as app where app = :app")
    .setParameter("app", app)
    .list(); 
```

产生：

```
select
    segment0_.id as id1_,
    segment0_.description as descript2_1_,
    segment0_.name as name1_,
from
    SEGMENTS segment0_ 
inner join
    SEGMENTS_APPLICATIONS applicatio1_ 
        on segment0_.id=applicatio1_.segment_id 
inner join                                        <==== unnecessary join
    APPLICATIONS applicatio2_ 
        on applicatio1_.app_id=applicatio2_.id 
where
    applicatio2_.id=? 
```

您可以看到*HQL 没有从 Application 中选择属性*（感谢“select s”部分），但*仍然加入了 APPLICATIONS*表，我认为这是不必要的。我们怎样才能避免呢？

（作为旁注，请注意在 HQL 中我可以直接使用 app，而不是 app.getId() 就像在 Criteria 中那样）

你能帮我找到一种方法来避免标准中的“选择”和标准和 HQL 中不必要的“连接”吗？

（此示例适用于 @ManyToMany，但我认为 @OneToMany 以及 @ManyToOne 和 @OneToOne 也会发生这种情况，即使 fetch = LAZY 也是如此）。

非常感谢，费兰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T12:34:55.607

[使用 Criteria 时额外选择的列来自Hibernate 中](https://hibernate.atlassian.net/browse/HHH-3538)的一个长期存在的错误。AFAIK，避免它的唯一方法是使用 HQL 或 JPA2 标准 API。

另一个问题也被标记为[bug](https://hibernate.atlassian.net/browse/JPA-19)，但它的影响较小，我不会太在意。****

# android - Android - 如何创建多个线程在后台运行？

> ID：10665089
> 
> 赞同：2
> 
> 时间：2012-05-19T12:16:51.847
> 
> 标签：android, multithreading

我是Android新手，但我遇到了这个问题......我需要一个无限循环来在后台运行一些进程，而另一个无限循环来接受一些套接字连接，然后当一个按钮点击时，我需要做一个与某些服务器的套接字连接。

我能找到的几乎所有示例和教程都在展示如何创建一个线程。

我尝试使用 runnable （这似乎在前台运行？）

```
Runnable r=new Runnable() { 
  public void run()  { 
    while(true){}
  } 
}; r.run(); 
```

我曾尝试使用 AsyncTask （这在后台运行，但每个活动只有一个 AsyncTask ？）

```
private class Run extends AsyncTask<Void, Void, Void> {
  protected Void doInBackground(Void... params) {
  }
} 
```

但无论我做什么，我的程序只执行第一个线程。

我的问题是，是否可以在一个活动中让多线程运行多无限循环？如果是，如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T13:38:02.900

是的，您可以创建多个线程。您可以实现 Runnable 接口。

```
 new Thread(new Runnable() {
        public void run() {
            while (true) {
                //code something u want to do & it will run infinitely.
                //Remove the infinite loop for running finite set of operations.        
                Log.i("Thread", "Running parallely");
            }
        }
    }).start(); 
```

另外，请注意上述线程无限期运行。如果要进行任何有限操作，只需将代码放在 run 方法中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:52:03.673

创建一个监听网络连接的线程

```
new Thread(new Runnable() {
    public void run()
    {
     ServerSocket s = new ServerSocket(PORT_NUMBER);
     while(true)
      {
         Socket c = s.accept();
         // read the socket
          BufferedReader in = new BufferedReader(new InputStreamReader(c.getInputStream()));
          in.read();
       }
      c.close(); //close the socket
    }
 }).strat(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T12:39:56.677

有时您想从后台线程调用 UI 线程。你可以这样做：

```
 Thread t = new Thread(new Runnable() {
                public void run() {
                //Do your background thing here

                 getActivity().runOnUiThread(new Runnable() {
                        public void run() {
                            //Update your GUI here
                        }
                 });
         t.start(); 
```

getActivity 看起来像这样：

```
 public class YourClass extends AppCompatActivity{

                   private Activity getActivity(){
                        return this;
                   }
                  //Rest of class here
          } 
```

# python - 使用多处理记录

> ID：10665090
> 
> 赞同：2
> 
> 时间：2012-05-19T12:16:54.047
> 
> 标签：python, logging, multiprocessing

我确实有以下`logger`课程（如 logger.py）：

```
import logging, logging.handlers
import config

log = logging.getLogger('myLog')

def start():
    "Function sets up the logging environment."
    log.setLevel(logging.DEBUG)
    formatter = logging.Formatter(fmt='%(asctime)s [%(levelname)s] %(message)s', datefmt='%d-%m-%y %H:%M:%S')

    if config.logfile_enable:
        filehandler = logging.handlers.RotatingFileHandler(config.logfile_name, maxBytes=config.logfile_maxsize,backupCount=config.logfile_backupCount)
        filehandler.setLevel(logging.DEBUG)
        filehandler.setFormatter(formatter)
        log.addHandler(filehandler)

    console = logging.StreamHandler()
    console.setLevel(logging.DEBUG)
    console.setFormatter(logging.Formatter('[%(levelname)s] %(message)s')) # nicer format for console
    log.addHandler(console)

    # Levels are: debug, info, warning, error, critical.
    log.debug("Started logging to %s [maxBytes: %d, backupCount: %d]" % (config.logfile_name, config.logfile_maxsize, config.logfile_backupCount))

def stop():
    "Function closes and cleans up the logging environment."
    logging.shutdown() 
```

对于日志记录，我启动`logger.start()`一次，然后`from logger import log`在任何项目文件中导入。然后我只在需要时使用`log.debug()`和`log.error()`。它在脚本的任何地方都可以正常工作（不同的类、函数和文件），但它不适用于通过多处理类启动的不同进程。

我收到以下错误：`No handlers could be found for logger "myLog"`。

我能做些什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T13:02:28.750

来自 python 文档：`logging to a single file from multiple processes is not supported, because there is no standard way to serialize access to a single file across multiple processes in Python.`

请参阅：[http ://docs.python.org/howto/logging-cookbook.html#logging-to-a-single-file-from-multiple-processes](http://docs.python.org/howto/logging-cookbook.html#logging-to-a-single-file-from-multiple-processes)

顺便说一句：我在这种情况下所做的是使用 Scribe，它是一个分布式日志聚合器，我通过 TCP 登录。这允许我将我拥有的所有**服务器**记录到同一个地方，而不仅仅是所有进程。

看到这个项目： http: [//pypi.python.org/pypi/ScribeHandler](http://pypi.python.org/pypi/ScribeHandler)

# android - 长时间保存用户输入数据

> ID：10665092
> 
> 赞同：0
> 
> 时间：2012-05-19T12:17:25.573
> 
> 标签：android

我正在编写一个应用程序来使用登录界面保存密码。用户可以更改登录密码。我使用以下代码保存密码，这样应用程序重新启动时密码不会重置。

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState){
savedInstanceState.putString("pwd", currentPwd);
super.onSaveInstanceState(savedInstanceState);
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState){
    currentPwd = savedInstanceState.getString("pwd");
} 
```

但我发现它只能暂时保存密码。当我等待很长时间，大约1小时，没有重启手机，它会重置我的密码。

如何保存密码以使其不会重置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:46:46.573

我有和你一样的问题，或者确实有。我只是使用了 Shared_Prefs。它将登录数据保存在 XML 文件中，您可以对其进行读写。

这是 Android 文章：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

来写：

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
            SharedPreferences.Editor editor = settings.edit();
            editor.putString("key1", username);
            editor.putString("key2", password);
            editor.commit(); 
```

读书：

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        String username = settings.getString("key1", null);
        String password = settings.getString("key2", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:22:52.463

您必须使用 sharedpreferences 保存数据：

```
SharedPreferences prefs =
     getSharedPreferences("myprefname",Context.MODE_PRIVATE);

SharedPreferences.Editor editor = prefs.edit();
editor.putString("pwd", "thepassword");
editor.commit(); 
```

然后你可以检索它：

```
SharedPreferences prefs =
    getSharedPreferences("myprefname",Context.MODE_PRIVATE);

String password=prefs.getString("pwd",null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T12:20:36.367

您可以使用`sharedPreference`.

```
public class PreferenceData 
{
    static final String PREF_USER_PASSWORD = "user_password";

    public static SharedPreferences getSharedPreferences(Context ctx) 
    {
        return PreferenceManager.getDefaultSharedPreferences(ctx);
    }

    public static void setUserPassword(Context ctx, String userPassword) 
    {
        Editor editor = getSharedPreferences(ctx).edit();
        editor.putString(PREF_USER_PASSWORD, userPassword);
        editor.commit();
    }

    public static String getUserPassword(Context ctx) 
    {
        return getSharedPreferences(ctx).getString(PREF_USER_PASSWORD, "");
    }
} 
```

# photoshop - Photoshop 24 位图像创建问题

> ID：10665093
> 
> 赞同：-1
> 
> 时间：2012-05-19T12:17:26.697
> 
> 标签：photoshop

如何在 Photoshop 中创建 24 位图像？

仅有 8 16 和 32 选项如何创建 24 位图像。

实际上，我必须在 play.google.com 上创建支持 32 位图标和 24 位右侧信息页面的登录页面。那么如何在 Photoshop 中创建 24 位页面？

请给我一些链接或教程。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:34:46.877

32 位意味着有一个 alpha 层，24 位意味着只有红色绿色和蓝色。删除 alpha 或另存为不允许 alpha 的格式，您应该有 24 位。

# maven - 如何将外部jar添加到maven webapp项目

> ID：10665096
> 
> 赞同：12
> 
> 时间：2012-05-19T12:17:53.110
> 
> 标签：maven

我有一个 Spring roo 项目（基本上是一个 Maven 项目）。我想将 dropbox sdk 添加到项目中，问题是它不在 maven 中。我添加了以下文件

```
 <dependency>
        <groupId>com.dropbox</groupId>
        <artifactId>dropbox-sdk</artifactId>
        <version>1.3.1</version>
        <scope>system</scope>
        <systemPath>${project.basedir}/libs/dropbox-java-sdk-1.3.1.jar</systemPath>
    </dependency> 
```

它解决了编译错误，但是当我运行项目时，在 Spring Tool Suite 中，jar 文件没有添加到 war lib 文件夹中。如何让 Maven 将我的外部 jar 文件添加到我的 war lib 文件夹中？

我不想在 maven 中安装 jar，因为我必须在所有使用该项目的机器上安装它

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T01:32:00.567

我终于找到了一个简洁的解决方案，它更容易实现。您在 java 项目中添加一个项目内存储库并在 pom.xml 中链接到它。

您在 Maven 中添加一个项目内存储库，如下所示：

```
<repository>
    <id>in-project</id>
        <name>In Project Repo</name>
        <url>file://${project.basedir}/libs</url>
</repository> 
```

然后在项目的根文件夹中创建一个看起来像这样的文件夹结构

```
/groupId/artifactId/version/artifactId-version.jar 
```

并像往常一样添加依赖项。

这种方法所需的代码和工作量最少，如果该库被添加到 maven 存储库中，您始终可以删除您的项目内存储库。

[http://bit.ly/OGVHSN](http://bit.ly/OGVHSN)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-16T06:19:06.933

有一个更简单的解决方案，即在插件中设置 webResource。通过该解决方案，您可以将本地磁盘的任何文件添加到战争中！示例如下，

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <warName>api</warName>
                <webResources>
                    <resource>
                        <directory>libs/</directory>
                        <targetPath>WEB-INF/lib</targetPath>
                        <includes>
                            <include>**/*.jar</include>
                        </includes>
                    </resource>
                </webResources>
            </configuration>
        </plugin> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-23T02:09:11.680

解决此问题的最佳方法是将这些本地 jar 文件添加到 WEB-INF/lib 文件夹。然后，您会发现所有这些 jar 包都打包在最终的 war 文件中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-20T18:45:23.020

我不推荐这种方法，但您可以添加一些 POM 配置以在单独的配置文件中安装 3rd-party 依赖项：

```
<profiles>
    <profile>
        <id>install-dependencies</id>
        <build>
            <plugins>
                <plugin>
                    <artifactId>maven-install-plugin</artifactId>
                    <version>2.3.1</version>
                    <executions>
                        <execution>
                            <id>install-dropbox-sdk</id>
                            <phase>validate</phase>
                            <goals>
                                <goal>install-file</goal>
                            </goals>
                            <configuration>
                                <groupId>com.dropbox</groupId>
                                <artifactId>dropbox-sdk</artifactId>
                                <version>1.3.1</version>
                                <file>src/main/lib/dropbox-java-sdk-1.3.1.jar</file>
                                <packaging>jar</packaging>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>

    <profile>
        <id>build</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>

        <dependencies>
            <dependency>
                <groupId>com.dropbox</groupId>
                <artifactId>dropbox-sdk</artifactId>
                <version>1.3.1</version>
            </dependency>
        </dependencies>
    </profile>
</profiles> 
```

这里有两个配置文件：`install-dependencies`和`build`。首先将`dropbox-sdk`依赖项安装到您的 Maven 存储库中，并且需要在每台机器上运行一次，如下所示：

```
mvn -Pinstall-dependencies validate 
```

第二个默认启用，并将 Dropbox SDK 添加为依赖项。

不过老实说，这并不比跑步好多少

```
mvn install:install-file -Dfile=src/main/lib/dropbox-java-sdk-1.3.1.jar -DgroupId=com.dropbox -DartifactId=dropbox-sdk -Dversion=1.3.1 -Dpackaging=jar 
```

在每台机器上。

这种方法的另一个缺点是您还必须将所有依赖项添加`dropbox-sdk`到构建中 - 而如果通过将 JAR 和 POM 添加到存储库服务器来正确完成，那么 Maven 将正确计算传递依赖项.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-19T16:08:34.873

我建议在 Maven 存储库服务器（例如 Nexus 或 Artifactory）中创建“第三方”存储库，然后将 jar 上传到那里。尽管这意味着将 jar 放入 Maven，但至少通过存储库服务器，任何将构建您的应用程序的人都可以使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-05T03:10:22.423

1.  将库路径更改为：src/main/webapp/WEB-INF/lib

2.  在 pom.xml 中：

    `<systemPath>${project.basedir}/src/main/webapp/WEB-INF/lib/xxxx.jar</systemPath>`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-09-17T19:01:16.947

我知道我真的迟到了，但我想知道为什么你不将 jar 放入 .m2 文件的本地 repo 中并从那里添加对 pom 的引用？

# iphone - 'performSegueWithIdentifier' 不起作用

> ID：10665100
> 
> 赞同：0
> 
> 时间：2012-05-19T12:18:16.930
> 
> 标签：iphone, xcode4.3, uistoryboardsegue

我`segue`在情节提要中创建了一个名为`"CreateGame"`. 并用我`viewController`的 to Load `CreateGameViewController`using调用它，`[self performSegueWithIdentifier:@"CreateGame" sender:nil]`但它不起作用。它在一段时间前工作，但突然它不工作了。

我查看了我的代码。我的

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
NSLog(@"Segue"); 
```

} 每次我调用时都在执行`[self performSegueWithIdentifier:@"CreateGame" sender:nil]`，然后`CreateGameViewController's "viewDidLoad"`正在执行（符合 using`NSLog();`语句）。但`CreateGameViewController` 没有显示在 iphone 的屏幕上。

我正在使用`NavigationController`So 类型的`segue is 'Push'`. 有时`segue`有效，有时无效。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T15:39:57.577

我有一种强烈的感觉，你正在做一些事情`CreateGameViewController's "viewDidLoad"` （可能是一些循环或一些没有结束的递归函数调用）。那将阻止屏幕出现。如果你能提供代码会更有帮助 `CreateGameViewController's "viewDidLoad"`

# android - 在所有事件中放置提醒 android 日历

> ID：10665102
> 
> 赞同：0
> 
> 时间：2012-05-19T12:18:46.773
> 
> 标签：android, events, calendar, reminders

嗨，我正在尝试提醒我插入了我创建的日历的所有事件。这可以做到吗？如何？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:22:32.393

此示例向事件添加提醒。提醒会在活动开始前 10 分钟触发。

并以这种方式添加事件和提醒：

```
// get calendar
Calendar cal = Calendar.getInstance();     
Uri EVENTS_URI = Uri.parse(getCalendarUriBase(this) + "events");
ContentResolver cr = getContentResolver();

// event insert
ContentValues values = new ContentValues();
values.put("calendar_id", 1);
values.put("title", "Reminder Title");
values.put("allDay", 0);
values.put("dtstart", cal.getTimeInMillis() + 11*60*1000); // event starts at 11 minutes from now
values.put("dtend", cal.getTimeInMillis()+60*60*1000); // ends 60 minutes from now
values.put("description", "Reminder description");
values.put("visibility", 0);
values.put("hasAlarm", 1);
Uri event = cr.insert(EVENTS_URI, values);

// reminder insert
Uri REMINDERS_URI = Uri.parse(getCalendarUriBase(this) + "reminders");
values = new ContentValues();
values.put( "event_id", Long.parseLong(event.getLastPathSegment()));
values.put( "method", 1 );
values.put( "minutes", 10 );
cr.insert( REMINDERS_URI, values ); 
```

您还需要为此方法将这些权限添加到清单中：

```
<uses-permission android:name="android.permission.READ_CALENDAR" />
<uses-permission android:name="android.permission.WRITE_CALENDAR" /> 
```

# asp.net-mvc-3 - 我可以在 App_Code 之外拥有一个全局剃须刀 @helper 吗？

> ID：10665103
> 
> 赞同：21
> 
> 时间：2012-05-19T12:18:47.240
> 
> 标签：asp.net-mvc-3, razor, helper, app-code

问题很简单，如标题中所述：有没有办法在“App_Code”之外使用剃须刀助手？

示例（HtmlEx.cshtml 文件）：

```
@helper Script(string fileName, UrlHelper url)
{
<script src="@url.Content("~/Scripts/" + fileName)" type="text/javascript"></script> 
} 
```

我问这个是因为我真的没有其他东西可以放入 App_Code；我想构建我的项目有点不同。

谢谢。

**更新：**我不想要任何其他类型的扩展。正如斯科特在这里所说，我只对纯剃须刀助手感兴趣：[http ://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax -within-razor.aspx](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-21T09:55:29.213

> 问题很简单，如标题中所述：有没有办法在“App_Code”之外使用剃须刀助手？

不，没有。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-17T02:53:01.610

**永不说永不...**

**方法一：（用于Web应用项目）**

只需添加一个预构建事件即可将您的文件复制到 App_Code 文件夹中。

（但由于该文件可能必须包含在项目中，您可以在 App_Code 目录中添加一个同名的空文件，然后让构建事件对其进行更新。）

（请注意，即使您将文件最初放在 App_code 文件夹中，直到第一次构建您才会获得智能感知，因此无论如何都没有区别。）

**方法二：（用于类库，其中启动项目为web应用）**

在类库中，App_Code 文件夹没有什么特别之处，因此为了能够使帮助页面全局化，我们必须覆盖 razor 代码，因为它是硬编码的，只能为 App_code 文件夹中的代码创建全局帮助器。

此外，剃刀代码的设计是为了为全局帮助程序创建一个基于完整路径的命名空间，您可能不感兴趣。

毕竟我们仍然存在一个问题，即没有可用的智能感知，所以为了避免所有这些问题，我编写了以下代码，假设：

1.  您的 .cshtml（或 vbhtml）文件将被复制到最终项目的输出目录中
2.  您添加一个与全局帮助程序文件名同名的 .cs（或 .vb）文件，并将其构建操作设置为“编译”，（此文件将在启动时自动生成以提供智能感知）
3.  您必须在 AssemblyInfo.cs 文件中注册 PreApplicationStartupClass
4.  您必须在 PreApplicationStartupCode.Start() 方法中进行替换，以按照依赖顺序提供 Bin 文件夹中全局帮助程序页面的相对路径（即，如果一个全局帮助程序文件使用另一个文件中的帮助程序，那么它应在其后列出）。
5.  在 CustomRazorCodeHost 类中，您必须选择适合安装的 MVC 版本的正确 PostProcessGeneratedCode() 方法

这是代码（但必须添加适当的“使用”语句）：

```
[EditorBrowsable(EditorBrowsableState.Never)]
public static class PreApplicationStartCode
{
    private static bool _startWasCalled;

    public static void Start()
    {
        // Even though ASP.NET will only call each PreAppStart once, we sometimes internally call one PreAppStart from 
        // another PreAppStart to ensure that things get initialized in the right order. ASP.NET does not guarantee the 
        // order so we have to guard against multiple calls.
        // All Start calls are made on same thread, so no lock needed here.

        if (_startWasCalled)
        {
            return;
        }
        _startWasCalled = true;

        //Add here the the global helpers based on dependency
        //also note that each global helper should have a .cs file in the project with the same name
        CustomRazorHelperBuildProvider bp = new CustomRazorHelperBuildProvider();
        bp.VirtualPath = "~/Bin/path/to/helpers/file/Helpers.cshtml";
        bp.GenerateCodeAndCompile();

        bp = new CustomRazorHelperBuildProvider();
        bp.VirtualPath = "~/Bin/path/to/helpers/file/DepndentHelpers.cshtml";
        bp.GenerateCodeAndCompile();
    }
}

public class CustomRazorHelperBuildProvider :RazorBuildProvider
{
    static List<string> GeneratedAssemblyReferences = new List<string>();
    public new string VirtualPath { get; set; }
    protected override System.Web.WebPages.Razor.WebPageRazorHost CreateHost()
    {
        return new CustomCodeRazorHost(VirtualPath);
    }
    private WebPageRazorHost _host;
    internal WebPageRazorHost Host
    {
        get
        {
            if (_host == null)
            {
                _host = CreateHost();
            }
            return _host;
        }            
    }
    private CodeCompileUnit _generatedCode = null;
    internal CodeCompileUnit GeneratedCode
    {
        get
        {
            if (_generatedCode == null)
            {
                EnsureGeneratedCode();
            }
            return _generatedCode;
        }
    }
    private CodeDomProvider _provider = null;
    internal CodeDomProvider Provider
    {
        get
        {
            if(_provider == null)
            {
                _provider = GetProvider();
            }
            return _provider;
        }
    }
    private void EnsureGeneratedCode()
    {
        RazorTemplateEngine engine = new RazorTemplateEngine(Host);
        GeneratorResults results = null;
        using (TextReader reader = OpenReader(VirtualPath))
        {
            results = engine.GenerateCode(reader, className: null, rootNamespace: null, sourceFileName: Host.PhysicalPath);
        }
        if (!results.Success)
        {
            RazorError error = results.ParserErrors.Last();
            throw new HttpParseException(error.Message + Environment.NewLine, null, VirtualPath, null, error.Location.LineIndex + 1);
        }
        _generatedCode = results.GeneratedCode;
    }
    private CodeDomProvider GetProvider()
    {
        CompilerType compilerType = GetDefaultCompilerTypeForLanguage(Host.CodeLanguage.LanguageName);
        CodeDomProvider provider = CreateCodeDomProviderWithPropertyOptions(compilerType.CodeDomProviderType);
        return provider;
    }

    /// <summary>
    /// Generates the c# (or vb.net) code, for the intellisense to work
    /// </summary>
    public void GenerateCode()
    {
        //Remember that if there is a razor error, then the next time the project will not compile at all, because the generated .cs file will also have the error!
        //The solution is to add a pre-build event to truncate the file, but not remove it!, also note that the pre-build event will not work in time if the .cs file is open in the VS editor!
        string filePath = VirtualPath.Replace("/", "\\").Replace("~\\Bin", "").Replace("\\Debug", "").Replace("\\Release", "");
        filePath = filePath.Remove(filePath.Length - 4);
        //filePath = filePath.Insert(filePath.LastIndexOf("\\"), "\\HelperAutoGeneratedCode");            
        Assembly curAssem = Assembly.GetExecutingAssembly();
        filePath = HttpRuntime.AppDomainAppPath + "\\..\\" + curAssem.GetName().Name + filePath;

        using (FileStream fs = new FileStream(filePath, FileMode.Truncate))
        {
            using (StreamWriter sw = new StreamWriter(fs))
            {
                Provider.GenerateCodeFromCompileUnit(GeneratedCode, sw, null);                    
                sw.Flush();
                sw.Close();
            }                
            fs.Close();
        }
        //We need to replace the type of the helpers from "HelperResult" to object, otherwise the intellisense will complain that "it can't convert from HelperResult to object"
        string text = File.ReadAllText(filePath);
        text = text.Replace("public static System.Web.WebPages.HelperResult ", "public static object ");
        File.WriteAllText(filePath, text); 
    }

    public void GenerateCodeAndCompile()
    {
        GenerateCode();
        Compile();
    }

    /// <summary>
    /// Compiles the helper pages for use at runtime
    /// </summary>
    /// <returns>Compiler Result</returns>
    public CompilerResults Compile()
    {
        Assembly assem = Assembly.GetExecutingAssembly();
        AssemblyName[] references = assem.GetReferencedAssemblies();
        List<string> referenceNames = references.Select(r => Assembly.ReflectionOnlyLoad(r.FullName).Location).ToList();
        referenceNames.Add(assem.Location);

        //Add here references that are not included in the project, but are needed for the generated assembly, you can see this through the results.Errors
        referenceNames.Add((typeof(WebMatrix.Data.ConnectionEventArgs).Assembly.Location));
        referenceNames.Add((typeof(WebMatrix.WebData.SimpleRoleProvider).Assembly.Location));

        if (GeneratedAssemblyReferences != null && GeneratedAssemblyReferences.Count > 0)
        {
            referenceNames.AddRange(GeneratedAssemblyReferences);
        }

        CompilerResults results = Provider.CompileAssemblyFromDom(new CompilerParameters(referenceNames.ToArray()), new CodeCompileUnit[] { GeneratedCode });
        if (results.Errors.HasErrors)
        {
            IEnumerator en = results.Errors.GetEnumerator();
            en.MoveNext();
            CompilerError error = en.Current as CompilerError;
            throw new HttpParseException(error.ErrorText + Environment.NewLine, null, VirtualPath, null, error.Line);
        }
        Assembly assemblyRef = GetGeneratedType(results).Assembly;
        GeneratedAssemblyReferences.Add(assemblyRef.Location); //So that any subsequent helper page that is dependent on it will have it as a reference
        //We need to make it available for Razor, so it will work with reguler razor pages at runtime
        RazorBuildProvider.CodeGenerationStarted += new EventHandler((sender, args) => (sender as RazorBuildProvider).AssemblyBuilder.AddCodeCompileUnit(this, GeneratedCode));
        return results;
    }

    private static CodeDomProvider CreateCodeDomProviderWithPropertyOptions(Type codeDomProviderType)
    {
        // The following resembles the code in System.CodeDom.CompilerInfo.CreateProvider

        // Make a copy to avoid modifying the original.
        var originalProviderOptions = GetProviderOptions(codeDomProviderType);
        IDictionary<string, string> providerOptions = null;
        if (originalProviderOptions != null)
        {
            providerOptions = new Dictionary<string, string>(originalProviderOptions);
        }

        AssemblyName[] references = Assembly.GetExecutingAssembly().GetReferencedAssemblies();
        foreach (AssemblyName reference in references)
        {
            if (reference.Name == "mscorlib")
            {
                providerOptions["CompilerVersion"] = "v" + reference.Version.Major + "." + reference.Version.Minor;
                break;
            }
        }

        if (providerOptions != null && providerOptions.Count > 0)
        {
            ConstructorInfo ci = codeDomProviderType.GetConstructor(new Type[] { typeof(IDictionary<string, string>) });
            CodeDomProvider provider = null;
            if (ci != null)
            {
                // First, obtain the language for the given codedom provider type.
                CodeDomProvider defaultProvider = (CodeDomProvider)Activator.CreateInstance(codeDomProviderType);
                string extension = defaultProvider.FileExtension;
                // Then, use the new createProvider API to create an instance.
                provider = CodeDomProvider.CreateProvider(extension, providerOptions);
            }
            return provider;
        }

        return null;
    }

    internal static IDictionary<string, string> GetProviderOptions(Type codeDomProviderType)
    {
        // Using reflection to get the property for the time being.
        // This could simply return CompilerInfo.PropertyOptions if it goes public in future.
        CodeDomProvider provider = (CodeDomProvider)Activator.CreateInstance(codeDomProviderType);
        string extension = provider.FileExtension;
        if (CodeDomProvider.IsDefinedExtension(extension))
        {
            CompilerInfo ci = CodeDomProvider.GetCompilerInfo(CodeDomProvider.GetLanguageFromExtension(extension));
            PropertyInfo pi = ci.GetType().GetProperty("ProviderOptions",
            BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.IgnoreCase | BindingFlags.Instance);
            if (pi != null)
                return (IDictionary<string, string>)pi.GetValue(ci, null);
            return null;
        }
        return null;
    }
}

 public class CustomCodeRazorHost : WebPageRazorHost
{
    internal const string ApplicationInstancePropertyName = "ApplicationInstance";
    internal const string ContextPropertyName = "Context";
    internal const string WebDefaultNamespace = "ASP";
    private static readonly string _helperPageBaseType = typeof(HelperPage).FullName;

    public CustomCodeRazorHost(string virtualPath)
        : base(virtualPath)
    {
        DefaultBaseClass = _helperPageBaseType;
        DefaultNamespace = WebDefaultNamespace;
        DefaultDebugCompilation = false;
        StaticHelpers = true;
    }

    //Version for MVC 3
    public override void PostProcessGeneratedCode(CodeCompileUnit codeCompileUnit, CodeNamespace generatedNamespace, CodeTypeDeclaration generatedClass, CodeMemberMethod executeMethod)
    {
        // Add additional global imports
        generatedNamespace.Imports.AddRange(GetGlobalImports().Select(s => new CodeNamespaceImport(s)).ToArray());

        // Create ApplicationInstance property
        CodeMemberProperty prop = new CodeMemberProperty()
        {
            Name = ApplicationInstancePropertyName,
            Type = new CodeTypeReference(typeof(HttpApplication).FullName),
            HasGet = true,
            HasSet = false,
            Attributes = MemberAttributes.Family | MemberAttributes.Final
        };
        prop.GetStatements.Add(
            new CodeMethodReturnStatement(
                new CodeCastExpression(
                    new CodeTypeReference(typeof(HttpApplication).FullName),
                    new CodePropertyReferenceExpression(
                        new CodePropertyReferenceExpression(
                            null,
                            ContextPropertyName),
                        ApplicationInstancePropertyName))));
        generatedClass.Members.Insert(0, prop);

        // Yank out the execute method (ignored in Razor Web Code pages)
        generatedClass.Members.Remove(executeMethod);

        // Make ApplicationInstance static
        CodeMemberProperty appInstanceProperty =
            generatedClass.Members
                .OfType<CodeMemberProperty>()
                .Where(p => ApplicationInstancePropertyName
                                .Equals(p.Name))
                .SingleOrDefault();

        if (appInstanceProperty != null)
        {
            appInstanceProperty.Attributes |= MemberAttributes.Static;
        }
    }

    //Version for MVC 4
    public override void PostProcessGeneratedCode(CodeGeneratorContext context)
    {
        // Add additional global imports
        context.Namespace.Imports.AddRange(GetGlobalImports().Select(s => new CodeNamespaceImport(s)).ToArray());

        // Create ApplicationInstance property
        CodeMemberProperty prop = new CodeMemberProperty()
        {
            Name = ApplicationInstancePropertyName,
            Type = new CodeTypeReference(typeof(HttpApplication).FullName),
            HasGet = true,
            HasSet = false,
            Attributes = MemberAttributes.Family | MemberAttributes.Final
        };
        prop.GetStatements.Add(
            new CodeMethodReturnStatement(
                new CodeCastExpression(
                    new CodeTypeReference(typeof(HttpApplication).FullName),
                    new CodePropertyReferenceExpression(
                        new CodePropertyReferenceExpression(
                            null,
                            ContextPropertyName),
                        ApplicationInstancePropertyName))));
        context.GeneratedClass.Members.Insert(0, prop);

        // Yank out the execute method (ignored in Razor Web Code pages)
        context.GeneratedClass.Members.Remove(context.TargetMethod);

        // Make ApplicationInstance static
        CodeMemberProperty appInstanceProperty =
            context.GeneratedClass.Members
                .OfType<CodeMemberProperty>()
                .Where(p => ApplicationInstancePropertyName
                                .Equals(p.Name))
                .SingleOrDefault();

        if (appInstanceProperty != null)
        {
            appInstanceProperty.Attributes |= MemberAttributes.Static;
        }
    }

    protected override string GetClassName(string virtualPath)
    {
        return ParserHelpers.SanitizeClassName(Path.GetFileNameWithoutExtension(virtualPath));
    }
} 
```

但是请注意，如果.cshtml文件有语法错误，下次编译就会有问题（因为生成的.cs文件会有编译错误），但是Visual Studio显然有问题来定位问题。

有时，上次构建的编译代码（从 .cs 文件编译）有时会与新更新的 .cshtml 文件冲突。

因此，我建议添加一个预构建事件来截断文件

```
echo. > $(ProjectDir)\Path\to\.cs\file 
```

只有在 .cshtml 文件已更改（这也适用于我上面编写的代码）时，您才能更复杂地执行此操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-09T15:30:18.150

在带有助手的视图上使用[Razor Generator扩展，您将在编译之前为视图生成代码。](https://github.com/RazorGenerator/RazorGenerator)生成的视图代码是您项目的一部分并编译到程序集中，因此您可以将视图文件放在任何地方并在任何地方使用帮助程序，即使来自单元测试也是如此。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-19T13:06:44.817

当然，您可以将它们放在代码或项目结构中的任何位置。在您创建帮助程序的文件中，请务必使用 System.Web.Mvc。

然后通常像这样扩展 Helper 类：

```
namespace System.Web.Mvc
{
    static class HtmlHelperExtensions
    {
        public static IHtmlString MyNewHelper(this HtmlHelper helper, string someParam)
        {
            // do something
        }
    }
} 
```

# java - 使用进程构建器或 apache commons exec 执行外部程序

> ID：10665104
> 
> 赞同：3
> 
> 时间：2012-05-19T12:18:57.273
> 
> 标签：java, processbuilder, apache-commons-exec

我需要执行一个外部应用程序，它返回大数据（需要 2 多个小时才能完成）n 并持续输出数据。

我需要做的是异步执行这个程序并将输出捕获到一个文件中。我尝试使用 java process builder，但它似乎只在程序退出或强制终止时才会挂起并返回输出。

我尝试使用进程构建器并创建了一个新线程来捕获输出，但它仍然没有帮助。

然后我阅读了有关 apache commons exec 的信息并尝试了相同的操作。但是，这似乎也需要很长时间并返回不同的错误代码（对于相同的输入）

```
CommandLine cmdLine = new CommandLine("/opt/testsimulator");

    DefaultExecuteResultHandler resultHandler = new DefaultExecuteResultHandler();
    ByteArrayOutputStream stdout = new ByteArrayOutputStream();
    PumpStreamHandler psh = new PumpStreamHandler(stdout);
    ExecuteWatchdog watchdog = new ExecuteWatchdog(60*1000);
    Executor executor = new DefaultExecutor();
    executor.setStreamHandler(psh);
    executor.setWatchdog(watchdog);
    try {
        executor.execute(cmdLine);
    } catch (ExecuteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

任何帮助或工作示例都非常有帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T13:06:52.973

嗯。使用`ProcessBuilder`应该适用于您的配置。例如，以下模式适用于我：

```
ProcessBuilder pb = new ProcessBuilder("/tmp/x");
Process process = pb.start();
final InputStream is = process.getInputStream();
// the background thread watches the output from the process
new Thread(new Runnable() {
    public void run() {
        try {
            BufferedReader reader =
                new BufferedReader(new InputStreamReader(is));
            String line;
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            is.close();
        }
    }
}).start();
// the outer thread waits for the process to finish
process.waitFor(); 
```

我正在运行的程序只是一个包含一大堆`sleep 1`和`echo`行的脚本：

```
#!/bin/sh
sleep 1
echo "Hello"
sleep 1
echo "Hello"
... 
```

`Hello`从进程中读取的线程每秒左右吐出一个。

# android - Android - 以一定间隔刷新页面数据的最佳实践方法？

> ID：10665106
> 
> 赞同：0
> 
> 时间：2012-05-19T12:19:00.580
> 
> 标签：android

我有一个页面可以访问数据库并获取最新数据。问题是多个用户可以访问该数据。因此，如果有人添加数据，当前屏幕不会更新，用户会感到困惑。

为用户不断刷新页面上的数据的最佳方式是什么？我应该每 30 秒左右向服务器发送一次调用以获取最新消息吗？如果这是唯一的方法，我是否必须为此创建一个新线程？怎么做到最好？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:48:48.803

假设您使用的是`WebView`，您可以尝试这样的事情，

```
// Wait 60 seconds before reloading
private static final int WAIT_TIME = 60000;

mWebView = (WebView) findViewById(R.id.MyWebView);
mWebView.loadUrl(/* ENTER URL HERE */);

new Timer().schedule(new TimerTask(){
    @Override
    public void run() {
         mWebView.reload();
    }
}, WAIT_TIME, WAIT_TIME); 
```

# android - 如何将图片从 sdcard 上传到 Facebook 墙？

> ID：10665107
> 
> 赞同：-3
> 
> 时间：2012-05-19T12:19:08.223
> 
> 标签：android

我想将图片从 sdcard 上传到 facebook。我为此尝试了很多，但我无法获得成功。我应该怎么办？

我的代码是：

```
<tr>
Bundle params = new Bundle();
params.putString("message", "Uploaded on " + now());
params.putByteArray("picture", bytes); //bytes contains photo bytes, no problem here
asyncRunner.request("me/photos", params, "POST", new PostPhotoRequestListener(), null);
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:57:25.543

从此[LINK](https://stackoverflow.com/questions/5658877/how-to-upload-image-on-facebook-image-store-in-sdcard-in-android-2-1)复制了解决方案。您应该使用 Facebook API [http://developers.facebook.com/docs/guides/mobile/#android](http://developers.facebook.com/docs/guides/mobile/#android)。然后使用以下代码：

```
 byte[] data = null;
 try {
     FileInputStream fis = new FileInputStream(PATH_TO_FILE);
     Bitmap bi = BitmapFactory.decodeStream(fis);
     ByteArrayOutputStream baos = new ByteArrayOutputStream();
     bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
     data = baos.toByteArray();  
  } catch (FileNotFoundException e) { 
     e.printStackTrace();
     Log.d("onCreate", "debug error  e = " + e.toString());
  }     

     Bundle params = new Bundle(); 
     params.putString("method", "photos.upload");  
     params.putByteArray("picture", data);

     Facebook facebook = new Facebook(FACEBOOK_APP_ID);
     AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
     mAsyncRunner.request(null, params, "POST", new RequestListener() {

        public void onMalformedURLException(MalformedURLException e, Object state) {
            Log.d("request RequestListener", "debug onMalformedURLException");
        }

        public void onIOException(IOException e, Object state) {
            Log.d("request RequestListener", "debug onIOException");
        }

        public void onFileNotFoundException(FileNotFoundException e, Object state) {
            Log.d("request RequestListener", "debug onFileNotFoundException");
        }

        public void onFacebookError(FacebookError e, Object state) {
            Log.d("request RequestListener", "debug onFacebookError");
        }

        public void onComplete(String response, Object state) {
             Log.d("request RequestListener", "debug onComplete");
        }
     }, null); 
```

确保您的应用程序具有互联网和 sdcard 读取权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:27:17.530

我在这里回答了一个类似的问题：[https ://stackoverflow.com/a/10561377/450534](https://stackoverflow.com/a/10561377/450534)

```
protected void uploadPhoto() {
    if (!Utility.mFacebook.isSessionValid()) {
        Util.showAlert(this, "Warning", "You must first log in.");
    } else {
        if (targetUri != null) {
            Bundle params = new Bundle();
            try {
                params.putByteArray("photo", Utility.scaleImage(getApplicationContext(), targetUri));
            } catch (Exception e) {
                e.printStackTrace();
            }
            params.putString("caption", txtPhotoCaption.getText().toString());
            Utility.mAsyncRunner.request( "replace this with your ID"+ "/photos&access_token=" + Utility.mFacebook.getAccessToken(), 
                    params, "POST", new PhotoUploadListener(), null);
            txtPhotoCaption.setText("");
            Toast.makeText(getApplicationContext(), "Photo uploaded successfully", Toast.LENGTH_SHORT).show();
            this.finish();
        }
    }
} 
```

请注意，我使用的方法与示例应用程序中使用的方法相同。没有涉及缩放或不缩放图像的利弊。“**标题**”属性是从 EditText 中提取的。实际图像位于“ **targetUri** ”字段中，该字段被声明为全局变量。它使用设备上的默认图库来获取图像。为了完整起见，这是从默认图库应用程序中获取图像的代码。（这会提示用户选择应用程序）

```
btnAddPhoto.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                startActivityForResult(intent, 0);
            }
        }); 
```

它在`onActivityResult()`这里处理：

**注意**：*我还将 ImageView 中的选定图像设置为登录用户的预览*

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        Bitmap bitmap = null;
        if (resultCode == RESULT_OK)    {
            targetUri = data.getData();
            Log.e("IMG URI", targetUri.toString());
            try {
                bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(targetUri));
                try {
                    Utility.scaleImage(getApplicationContext(), targetUri);
                    imgDisplaySelectedImage.setImageBitmap(bitmap);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }
        }
    } 
```

提到的链接中的答案是将照片上传到*朋友*墙。但是，使用我的 ID 而不是朋友 ID 的相同代码基本上完成了您想要的相同任务。希望这对您也有帮助。

编辑：在第一段代码中，在这里***用您的 ID 替换它***，您也可以调用`"me/photos&access_token="`. 其余的保持不变。

# javascript - 访问对象标签的外部 HTML 页面内容

> ID：10665108
> 
> 赞同：4
> 
> 时间：2012-05-19T12:19:22.343
> 
> 标签：javascript, html, dom

我已经搜索了这个问题的答案，但无法找到解决方法。

我想访问包含在对象标记中的 div 的内容。

我的 include.htm 文件：

```
<div id="includedDiv">This is the included page</div> 
```

我尝试过的：

```
<html>
<head>
<title>Get element from object included page</title>
</head>
<body>
<p>Test: This is the main page</p>
<object id="obj" data="include.htm"></object>
<script>
//alert(document.getElementById("includedDiv").firstChild.nodeValue);
//alert((document.getElementById("obj")).document.getElementById("includedDiv").firstChild.nodeValue);
alert(document.getElementById("obj")["includedDiv"]);
</script>
</body>
</html> 
```

没有任何警报向我打印消息“这是包含的页面”，有没有办法从 DOM 获取此内容？

编辑： window[0].document.getElementById("includedDiv").firstChild.nodeValue; 是通过 DOM 访问的好答案，对象标记只是创建另一个窗口 :) [http://www.w3schools.com/jsref/prop_win_length.asp](http://www.w3schools.com/jsref/prop_win_length.asp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:21:32.443

`document.getElementById('id').innerHTML`或`document.getElementById('id').outerHTML`任何您正在寻找的...

查看[如何使用 innerHTML 附加到对象](https://stackoverflow.com/questions/1601506/how-to-append-to-a-object-with-innerhtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:47:06.857

知道了！只需使用

```
window.parent.mainPageMethod(document.getElementById("includedDiv").firstChild.nodeValue); 
```

在包含的页面中，您可以从主页获取 Javascript 函数中的 div 内容！

感谢您尝试帮助杰，我应该承认，当您谈到 window.name 属性时，它让我走上了正确的方向:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:26:58.787

更好的答案：您可以通过 DOM 访问对象标记内容，它只是另一个窗口！

```
window[0].document.getElementById("includedDiv").firstChild.nodeValue; 
```

就是这样：D [http://www.w3schools.com/jsref/prop_win_length.asp](http://www.w3schools.com/jsref/prop_win_length.asp)

# java - Java中两个同步块的区别

> ID：10665110
> 
> 赞同：1
> 
> 时间：2012-05-19T12:19:34.557
> 
> 标签：java, synchronization

假设我有一个 Employee 类，我将该类的对象创建为

```
Employee emp = new Employee(); 
```

以下两个同步块有什么区别

```
synchronized(emp){ } and
synchronized(Employee.class) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T12:23:49.373

第一个使用*一个 Employee 实例*作为监视器。第二个使用*Employee 类*作为监视器。

如果目标是保护员工的实例变量，那么第一个比第二个更有意义。如果目标是保护 Employee 类的静态变量，那么第二个是有意义的，但不是第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:27:29.243

第一个在类的特定实例上同步。因此，如果您有 2 个线程在该类的两个不同实例上运行，它们可以同时进入块 - 当然是在它们自己的上下文中。

第二个块在类本身上同步。因此，即使您有 2 个线程和两个不同的实例，该块一次也只能由一个线程进入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T12:27:38.170

当您同步时，您需要一个对象来定义为信号量。当线程 A 在对象 A 定义的同步块内时，没有其他线程可以在对象 A 定义的其他此类块中，但它可以在其他对象定义的任何其他同步块内。

`emp`并且`Employee.class`是不同的对象，因此两个同步块不是不兼容的（您可以在第一个内部有一个线程，在第二个内部有另一个线程）。

在更一般的说明中，您应该使用第一个块来保护仅影响单个员工对象的敏感代码，而在更改一个员工可能会影响其他员工关键部分或它们的集合/聚合值的操作中使用第二个块。

# java - Android 应用程序未在模拟器中显示

> ID：10665113
> 
> 赞同：4
> 
> 时间：2012-05-19T12:19:39.200
> 
> 标签：java, android, android-emulator, avd

我安装了 eclipse、android sdk，创建了 AVD（尝试了不同的版本），然后创建了简单的 hello world 程序（自动生成）。

当我运行它时，它应该加载并显示 helloworld 屏幕......但没有任何反应。模拟器刚刚加载并显示 android 主屏幕。我的应用程序无处可见。

日志：

```
[2012-05-19 19:09:34 - GameTest] Android Launch!
[2012-05-19 19:09:34 - GameTest] adb is running normally.
[2012-05-19 19:09:34 - GameTest] Performing org.test.game1.GameTestActivity activity launch
[2012-05-19 19:09:34 - GameTest] Automatic Target Mode: launching new emulator with compatible AVD 'def_avd'
[2012-05-19 19:09:34 - GameTest] Launching a new emulator with Virtual Device 'def_avd' 
```

就是这样……

出了什么问题，我如何才能真正加载我的程序？

一些澄清：我尝试事先运行模拟器，然后运行我的应用程序。我尝试直接从 eclipse“运行为 - Android 应用程序”运行模拟器，但仍然是完全相同的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T15:44:55.327

缺少的东西在您的**AndroidManifest.xml中的 XML 片段下方给出**

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

将此标签添加到您的 xml 中的活动标签下，然后您的应用程序将在您的模拟器上启动

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T13:00:03.127

*Unfortunately nothing suggested in other replies helped, but I found a decent workaround.*

If you have an android device probably the simplest thing to do would be to connect it to usb and just hit "debug as android application" and in 3 or 4 seconds it will load up on your android device.

To use that option you need to instal USB driver package, but that is no problem.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T12:33:51.300

清理项目并刷新模拟器。

其他明智的创建新的模拟器并运行它。

在 Windows 任务管理器中关闭模拟器和 adb，然后

然后尝试创建新的模拟器并运行它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-19T12:40:33.510

试试这个，首先打开 avd 管理器并启动模拟器，然后等待模拟器启动并显示 android 主屏幕。现在尝试运行程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-12T10:08:27.580

当我对所有选项都有一个**意图过滤器**时，我遇到了同样的问题，然后我分成 2 个意图过滤器，应用程序开始出现

```
<intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data
             android:host="java-lang-programming"
             android:scheme="android-app-google-plus-demo" />
    </intent-filter> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-28T04:03:22.830

我知道这是一个老问题，但我也遇到了同样的问题，所以这就是我在 Android Studio 2.1 中修复它的方法。

在运行配置中，我将其设置为自动启动我想要的 AVD，它总是会启动另一个 AVD，而且他们都没有应用程序。因此，我将配置设置为“显示设备选择对话框”，手动启动 AVD，然后当我点击“运行”时，我选择了正在运行的 AVD，它立即弹出。我希望它也适合你！

此外，我已将启动选项设置为明确启动我的主要活动，然后我将其恢复为默认值，并且在更改为默认值后它仍然有效。因此，如果它第一次对您不起作用，也可以尝试这样做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-07T00:23:50.430

请务必单击虚拟设备屏幕上的“使用主机 GPU”，然后启动您的设备。等到设备的 UI 加载完毕。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-16T07:51:39.977

只需检查构建路径并支持 android 库和 android 模拟器版本和应用程序支持版本以及所有

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-19T12:39:11.950

您可以尝试几件事：

*   确保模拟器构建版本与代码相同
*   尝试做：

    ```
    > adb kill-server
    > adb start-server 
    ```

*   重启 Eclipse？

*   查看[此](https://stackoverflow.com/questions/506777/how-to-run-android-emulator-automatically-from-eclipse)问题并按照答案指南进行操作。

*   类似的问题[在这里](https://stackoverflow.com/questions/3037512/android-application-doesnt-start-from-eclipse)，[在这里](https://stackoverflow.com/questions/2317167/helloandroid-emulator-problem)检查一下

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-29T08:55:28.293

我试图自己修复它，但似乎没有任何效果，

所以我只是：

1.  重新安装 Visual Studio
2.  将我的手机重置为出厂默认设置
3.  经历了启用USB调试的快速过程（***设置***>***关于手机***>***软件信息***>点击***内部版本号***七次以启用开发人员选项>转到***开发人员选项（位于设置>搜索******USB调试***并启用它的关于手机下方)
4.  然后我再次插入手机，[按照 NewProger](https://stackoverflow.com/users/786107/newproger)的建议安装***USB 驱动程序包***后，我按照通常的步骤将手机设置为 Android 模拟器。

它现在工作得很好。

我无法准确指出它对我做了什么，但我想在备份必要的文件之后，作为最后的手段，尝试所有四个步骤并没有什么坏处，而不是什么。

希望这可以帮助！

# asp.net - 从 nopcommerce 中删除购物车功能

> ID：10665114
> 
> 赞同：2
> 
> 时间：2012-05-19T12:19:42.703
> 
> 标签：asp.net, nopcommerce

我想开发一个动态网页，管理员可以在其中添加他们的产品规格和图像以及其他促销优惠。我用 asp.net 阅读了 nopcommerce 购物车。我想知道从 nopcommerce 中删除购物车功能以实现我的目标..或者使用纯编码更好..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T21:30:42.513

在管理员中：您转到配置->访问控制列表

然后只需取消选中“公共商店。启用购物车”

关于 Ciwan 的评论，我发现我的许多客户都希望他们的网站是这样的。例如一家只想显示价格而不是在线销售的酒类商店。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T10:44:50.437

你需要做一些代码修复设置 ShoppingCartEnabled = false in

```
//Nop.Web/Controller/CommonController
   In HeaderLinks Action 
```

第二个通过设置禁用“添加到购物车”按钮

```
//Nop.Web/Controller/CatlogController 
 In PrepareProductVariantModel method 
```

您也可以在管理区域 Admin-> Configuration-> Setting -> AllSetting 中进行所有这些设置，它会做所有的更改。如果你想永久地这样做然后修改

```
InstalltionService (Nop.Service/Installtion/InstalltionService.cs) 
```

注意：这适用于2.0到2.65版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:06:21.780

nopCommerce 是一个**电子商务**解决方案。没有购物车功能，就像没有相机的摄影师一样！

如果您只是想在页面上显示动态内容，那么请使用 CMS，我个人喜欢[Umbraco](http://umbraco.org/)，但它的学习曲线相当陡峭。

# java - 使用 wait() 时的同步方法

> ID：10665118
> 
> 赞同：5
> 
> 时间：2012-05-19T12:19:51.987
> 
> 标签：java, multithreading, wait, synchronized

我运行了以下代码：

```
class Counter extends Thread {

 static int i=0;
//method where the thread execution will start
public void run(){
    //logic to execute in a thread

    while (true) {
        increment();
    }
}

public synchronized void increment()  {
    try {
        System.out.println(this.getName() + " " +  i++);
        wait(1000);
        notify();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
//let’s see how to start the threads
public static void main(String[] args){
    Counter c1 = new Counter();
    Counter c2 = new Counter();
    c1.setName("Thread1");
    c2.setName("Thread2");
    c1.start();
    c2.start();
}
} 
```

此代码的结果是（添加的行号）：

```
1: Thread1 0
2: Thread2 1
3: Thread2 2
4: Thread1 3
5: Thread2 4
6: Thread1 4
7: Thread1 5
8: Thread2 6
stopping... 
```

由于增量方法是同步的并且因为它包含 wait(1000) 我没想到：1\. Thread2 打印 2 个连续打印：第 2,3 行我希望线程交错它们的打印 2\. 在第 5,6 行 i 仍然是 4。

谁能给我一个解释？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T12:26:06.867

像这样的同步实例方法：

```
public synchronized void foo() { 
    ... 
} 
```

大致相当于：

```
public void foo() {
   synchronized(this) {
       ...
   }
} 
```

你看到这里的问题了吗？同步在当前实例上完成。

由于您正在创建两个单独的对象，因此`Thread`每个`increment`方法都会在不同的对象上同步，从而使锁变得无用。

您应该使您的增量方法静态（因此锁定在类本身上完成）或使用静态锁定对象：

```
private static final Object locker = new Object();

public void foo() {
   synchronized(locker) {
       ...
   }
} 
```

最后一个建议：在java中创建线程的首选方法是实现`Runnable`，而不是扩展`Thread`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:22:55.930

您仅在实例级别进行同步。要在所有`Counter`实例之间同步，您需要该`increment`方法`static`与`synchronized`.

就目前而言，您的所有线程都可以自由运行，彼此并发，因为它们不共享同步机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T13:12:32.943

这可能是您正在寻找的代码

```
class Counter implements Runnable {

    static int i = 0;
    private Lock lock;
    private Condition condition;

    public Counter(Lock lock, Condition condition) {

        this.lock = lock;
        this.condition = condition;
    }

    public void run() {
        while (true) {
            lock.lock();
            try {
                condition.await(1, TimeUnit.SECONDS);
                System.out.append(Thread.currentThread().getName()).append(" ").println(i++);
                condition.signalAll();
            } catch (InterruptedException e) {
                throw new RuntimeException(e);
            }
        }
    }

    public static void main(String[] args) {
        Lock lock = new ReentrantLock(true);
        Condition condition = lock.newCondition();
        Executor e = Executors.newFixedThreadPool(2);
        e.execute(new Counter(lock, condition));
        e.execute(new Counter(lock, condition));

    }
} 
```

# wpf - 与 TextBlock 的 DataBinding 相关的问题

> ID：10665124
> 
> 赞同：0
> 
> 时间：2012-05-19T12:20:19.307
> 
> 标签：wpf, inotifypropertychanged, databound

我有一个有一些`get;set;`属性的类。和`OnPropertyChange`事件，计算了所有这些`get;set;`属性的添加。还有其他属性，`get;`它返回一个简单的计算，例如：

```
public Double D_F_Percent { 
    get {
        return d_f / total;
    }           
} 
```

这些属性绑定到 TextBlocks。最初，这些值显示为*NaN*。但后来当我输入 的值时`d_f`，它会被加到`OnPropertyChanged`.

现在我的意思是在计算总数之后我如何调用这个属性并触发它以便它在`TextBlock`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:33:01.010

您可以随时触发，`PropertyChanged`绑定引擎将更新 UI。

不需要在属性设置器中执行此操作。因此，在您计算的方法中，`total`只需使用您计算的属性名称引发事件`D_F_Percent`。

参见示例 `CalculateTotal`方法：

```
public class ViewModel : INotifyPropertyChanged
{
    private double d_f;
    public double D_F
    {
        get { return d_f; }
        set { d_f = value; FirePropertyChanged("D_F"); }
    }

    private double total;
    public double Total
    {
        get { return total; }
        set { total = value; FirePropertyChanged("Total"); }
    }

    public Double D_F_Percent
    {
        get { return d_f / total; }
    }

    public void CalculateTotal()
    {
        //Do some calculation set total
        FirePropertyChanged("D_F_Percent");
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void FirePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

# c# - 渲染时纹理显示为灰色

> ID：10665130
> 
> 赞同：4
> 
> 时间：2012-05-19T12:20:59.777
> 
> 标签：c#, directx, textures

我目前正在学习“开始 C# 编程”，并且在第 7 章绘制纹理时遇到了问题。

我使用了与演示 CD 上相同的代码，虽然我不得不将纹理的路径更改为绝对路径，但在渲染时它显示为灰色。

我已经调试了程序以写入文件加载的纹理，这很好 - 没有问题。所以在那之后出现了问题。

以下是一些代码片段：

```
public void InitializeGraphics()
{
    // set up the parameters
    Direct3D.PresentParameters p = new Direct3D.PresentParameters();
    p.SwapEffect = Direct3D.SwapEffect.Discard;
    ...
    graphics = new Direct3D.Device( 0, Direct3D.DeviceType.Hardware, this,
    Direct3D.CreateFlags.SoftwareVertexProcessing, p );
    ...
    // set up various drawing options
    graphics.RenderState.CullMode = Direct3D.Cull.None;
    graphics.RenderState.AlphaBlendEnable = true;
    graphics.RenderState.AlphaBlendOperation = Direct3D.BlendOperation.Add;
    graphics.RenderState.DestinationBlend = Direct3D.Blend.InvSourceAlpha;
    graphics.RenderState.SourceBlend = Direct3D.Blend.SourceAlpha;
    ...
}

public void InitializeGeometry()
{
    ...
    texture = Direct3D.TextureLoader.FromFile( 
            graphics, "E:\\Programming\\SharpDevelop_Projects\\AdvancedFrameworkv2\\texture.jpg", 0, 0, 0, 0, Direct3D.Format.Unknown,
            Direct3D.Pool.Managed, Direct3D.Filter.Linear, 
            Direct3D.Filter.Linear, 0 );
...
}

protected virtual void Render()
{
    graphics.Clear( Direct3D.ClearFlags.Target, Color.White , 1.0f, 0 );
    graphics.BeginScene();

    // set the texture
    graphics.SetTexture( 0, texture );

    // set the vertex format
    graphics.VertexFormat = Direct3D.CustomVertex.TransformedTextured.Format;

    // draw the triangles
    graphics.DrawUserPrimitives( Direct3D.PrimitiveType.TriangleStrip, 2, vertexes );

    graphics.EndScene();
    graphics.Present();
    ...
} 
```

我无法弄清楚这里出了什么问题。显然，如果我在窗口中加载纹理，它会显示得很好——所以书中给出的代码示例中有些地方不对劲。它实际上不起作用，大概我的环境有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:09:29.650

你在那里使用了一种非常古老的技术......我猜你正在尝试制作游戏（就像我们刚开始时所做的那样！），尝试使用 XNA。我最好的猜测是它是你的图形驱动程序。我知道这听起来像是一个警察，但说真的，我以前见过这种情况，一旦我将旧显卡换成新显卡，它就可以工作了！我不是说它坏了，或者它不可能让它工作。但我最好的两个建议是：

1) 开始使用 XNA 并使用[http://www.xnadevelopment.com/tutorials.shtml](http://www.xnadevelopment.com/tutorials.shtml)上的教程 2) 更换你的显卡（如果你想继续你现在正在做的事情）。

# javascript - 检查网页是否被修改

> ID：10665134
> 
> 赞同：0
> 
> 时间：2012-05-19T12:21:46.500
> 
> 标签：javascript, jquery

我正在为 facebook 开发 chrome 扩展。如果您使用 facebook，您就会知道，当您向下滚动到新闻提要/时间线/个人资料的底部时，它会显示更多帖子。该扩展实际上在“喜欢”按钮旁边添加了一个按钮。所以我需要检查是否有更多帖子可以添加该按钮。

现在要检查页面是否已被修改，我使用`setInterval(function(){},2000)`. 我想在用户单击按钮时运行一个函数。但是如果我把它放在外面（甚至里面）setInterval() 这个函数就不起作用了——刚才的 Koder 编辑

如何在不使用循环的情况下检查网页是否已被修改？

例子：

```
$(document).ready(function(){
    window.setInterval(function(){
          $(".UIActionLinks").find(".dot").css('display','none');
          $(".UIActionLinks").find(".taheles_link").css('display','none');
          $(".miniActionList").find(".dot").css('display','none');
          $(".miniActionList").find(".taheles_link").css('display','none');
              //only this function doesn't work:
          $(".taheles_link").click(function(){
            $(".taheles_default_message").hide();
            $(".taheles_saving_message").show();
          });
               //end
          $(".like_link").after('<span class="dot"> · </span><button class="taheles_link stat_elem as_link" title="תגיד תכל&acute;ס" type="submit" name="taheles" onclick="apply_taheles()" data-ft="{&quot;tn&quot;:&quot;&gt;&quot;,&quot;type&quot;:22}"><span class="taheles_default_message">תכל&acute;ס</span><span class="taheles_saving_message">לא תכלס</span></button>');
          $(".taheles_saving_message").hide();
    }, 2000);
}); 
```

将来，这个扩展将使用 AJAX，所以会给`setInterval()`我带来更多的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:36:37.320

如果我理解正确，您希望在页面的 DOM 更改时收到通知。而且您想在不使用 setInterval() 函数的情况下执行此操作。

由于您的问题在于将事件处理程序附加到页面加载后创建的元素，您可能有兴趣查看[jquery.live](http://api.jquery.com/live/)事件附件技术。我认为它会解决你的问题。

通常，您希望页面引发突变事件。有一个可能是您正在寻找的[突变事件规范。](http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-MutationEvent)以下是一些可能有用的链接。

1.  [http://tobiasz123.wordpress.com/2009/01/19/utilizing-mutation-events-for-automatic-and-persistent-event-attaching/](http://tobiasz123.wordpress.com/2009/01/19/utilizing-mutation-events-for-automatic-and-persistent-event-attaching/)

2.  [使用 jQuery 检测元素内容的变化](https://stackoverflow.com/questions/1091661/detect-element-content-changes-with-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:38:31.040

```
$(document).ready(function(){
    setInterval('fun()',5000);
    fun();
});
function fun()
{
    alert(11)
} 
```

# php - 合并用户图片和帖子以显示为用户条目的最佳方式

> ID：10665135
> 
> 赞同：0
> 
> 时间：2012-05-19T12:21:54.503
> 
> 标签：php, mysql, database-design

我正在为一个小社区建立一个社交网络。每个用户都可以上传图片或发布推文并与其他用户分享。

帖子存储在推文表中

```
tweets : id , user_id , text , date 
```

图片在图片表中

```
pics : id , user_id , album_id , title(ie:pic.jpg) , text(description) , date 
```

现在我想在他的墙上将所有这些都显示为用户帖子。我不确定最好的方法是什么。

我可以通过添加第三个表来使用规范化来跟踪用户条目及其类型，例如

```
user_entries: id , entry_type(tweet , pic ) , date 
```

现在我能 ：

```
$entries = $db->get_entries( $user_id );
foreach ( $entries as $ent ){

   if($ent->entry_type == 'tweet' )
    $db->get_tweet($ent->id);
    // show a tweet and for each one get it's comments

   if($ent->entry_type == 'pic' )
    $db->get_pic($ent->id);
    // show a pic and for each one get it's comments

} 
```

但这意味着更慢的代码和大量的数据库连接，更不用说我必须获得每个条目的注释，从长远来看，这会减慢速度。

所以我希望找到一种方法来通过一个查询获得所有这些。我不知道，也许在两个表之间使用 unoin 或更改数据库设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:17:08.533

有第三张表，`posts`如下所示：

```
post_id | user_id 
```

给每个帖子/图像一个唯一的 post_id，并从这个新表中选择所有帖子（这称为用户和帖子之间的多对多关系）。当您查询该`posts`表时，`JOIN`其他表将获得所有相应的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:22:33.047

如果您有一张非常大的桌子；为什么不将 pics 表拆分为较小的表，然后使用 PIC_ID 您可以稍后将这些表连接在一起，或者只是获取您需要的内容。我会更快

> 表格1
> 
> pic_id user_id
> 
> 表_2
> 
> pic_id 专辑 ID
> 
> 表3
> 
> pic_id 标题（即：pic.jpg）
> 
> 表_4
> 
> pic_id 文本（描述）
> 
> 表_5
> 
> pic_id 日期

# mysql - 对mysql中复杂的加入请求感到困惑

> ID：10665136
> 
> 赞同：0
> 
> 时间：2012-05-19T12:21:55.837
> 
> 标签：mysql, sql, join

基本上我有 4 个表和当前组的组 ID。我将列出重要的字段和信息：

```
Users:
ID,
FirstName,
LastName

Groups:
ID,
participantlist_id

participantlist:
list_id

participantlist_links:
list_id,
participant_id 
```

我已经想出了如何用一个小函数在树的最高点显示参与者列表中的所有用户：

```
SELECT Users.ID,Users.FirstName,Users.LastName FROM Users
JOIN participantlist_links ON Users.ID = participantlist_links.participant_id
JOIN participantlist ON participantlist_links.list_id = participantlist.list_id
JOIN Groups ON participantlist.list_id = Groups.participantlist_id AND 
Groups.ID = '".workspaces_tell_me_brainstorm_group_id_from_group_id($group_id)."' 
```

现在我想排除所有链接到当前组的参与者列表.list_id ($group_id) 的用户，但我只是想不出一个在单个查询中完成所有操作的好方法。我认为解决方案将是某种左连接/右连接或左/右外连接比较。

我的临时工作但非常耗时的解决方案是：

```
SELECT table2.id as ID, table2.firstname as FirstName, table2.lastname as LastName
FROM

(SELECT table1.ID,table1.FirstName,table1.LastName FROM Users as table1
JOIN participantlist_links ON table1.ID = participantlist_links.participant_id
JOIN participantlist ON participantlist_links.list_id = participantlist.list_id
JOIN Groups ON participantlist.list_id = Groups.participantlist_id 
AND Groups.ID = '".workspaces_tell_me_brainstorm_group_id_from_group_id($group_id)."')
as table2

LEFT JOIN
(SELECT table4.ID,table4.FirstName,table4.LastName FROM Users as table4
JOIN participantlist_links ON table4.ID = participantlist_links.participant_id
JOIN participantlist ON participantlist_links.list_id = participantlist.list_id
JOIN Groups ON participantlist.list_id = Groups.participantlist_id 
AND Groups.ID = '".$group_id."') 
as table3

ON table2.ID = table3.ID WHERE table3.id is null 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:59:25.440

我会去做一些更简单的事情。

我想`not in`是你的朋友在这里。它应该使您的代码更易于阅读，并且很可能会让 mysql 对其进行更多优化：

```
SELECT table1.ID,
       table1.FirstName,
       table1.LastName 
  FROM Users as table1
  JOIN participantlist_links ON table1.ID = participantlist_links.participant_id
  JOIN participantlist ON participantlist_links.list_id = participantlist.list_id
  JOIN Groups ON participantlist.list_id = Groups.participantlist_id 
   AND Groups.ID = '".workspaces_tell_me_brainstorm_group_id_from_group_id($group_id)."')
   AND table1.id not in (
               SELECT table4.ID
                 FROM Users as table4
                 JOIN participantlist_links ON table4.ID = participantlist_links.participant_id
                 JOIN participantlist ON participantlist_links.list_id = participantlist.list_id
                 JOIN Groups ON participantlist.list_id = Groups.participantlist_id 
                  AND Groups.ID = '".$group_id."'
                ) 
```

# c# - 如何仅获取 WebClient 文件的一部分？

> ID：10665139
> 
> 赞同：0
> 
> 时间：2012-05-19T12:22:46.837
> 
> 标签：c#

我想从 2 个不同的来源检索相同的图像并将它们合并在一起。

```
using (var stream = webclient.OpenRead("http://media-cdn.tripadvisor.com/media/photo-s/01/70/3e/a9/needed-backup-lol.jpg"))
using (var stream2 = webclient.OpenRead("http://img135.imageshack.us/img135/93/neededbackuplol.jpg")) 
```

假设我使用 Stream.Read：

```
stream.Read(buffer, 0, 100)
stream2.Read(buffer, 100, 200) 
```

我的问题是这 2 个连接是否总是向我发送整个图像或只是我请求的部分？我的意思是，当我使用 stream.read(buffer, 100, 200) 时，我只会收到 100 个字节，或者我仍然会收到整个图像，然后只剪掉我感兴趣的部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:28:59.590

考虑使用`HttpWebRequest`和 HTTP RANGE 标头，如下所述：[How to specify range >2GB for HttpWebRequest in .NET 3.5](https://stackoverflow.com/questions/6576397/how-to-specify-range-2gb-for-httpwebrequest-in-net-3-5)

# android - Android - 如何将 ArrayList 的值设置为 TextView

> ID：10665143
> 
> 赞同：0
> 
> 时间：2012-05-19T12:23:22.640
> 
> 标签：android, android-layout, android-xml

我这里有问题。我从解析器类的结果中得到了 ArrayList。然后我想将该值（来自 ArrayList 的值）放入 TextView。

这是我到目前为止所做的工作。我在 main.xml 上创建 TextView

```
<TextView
        android:id="@+id/deskripsi" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="@string/hello"
    /> 
```

在我的 onCreate 方法中，我初始化了文本视图

```
desk = (TextView)findViewById(R.id.deskripsi); 
```

然后我尝试从谷歌地图解析KML文档，并在节点地标处将其值放入ArrayList，这是我的代码

```
ArrayList<String> pathName = new ArrayList<String>();
Object[] objPlace;

//Parser Node Placemark
NodeList nlPlace = doc.getElementsByTagName("Placemark");
        for(int p = 0; p < nlPlace.getLength(); p++){
            Node rootPlace = nlPlace.item(p);
            NodeList itemPlace = rootPlace.getChildNodes();
            for(int y = 0; y < itemPlace.getLength(); y++){
                Node placeStringNode = itemPlace.item(y);
                NodeList place = placeStringNode.getChildNodes();
                //valueName = nameList.item(0).getNodeValue().toString() + "+";
                pathName.add(place.item(0).getNodeValue());
            }
    }

objPlace = pathName.toArray();

desk.setText("");
for (int j = 0; j < objPlace.length; j++){
    desk.append("Deskripsi:\n" + objPlace[j].toString() + "\n");
} 
```

但是当试图将其运行到我的模拟器和真实设备时，我得到了一个错误。这是我的 LogCat ![在此处输入图像描述](../Images/8222899ed97bf28bd4bc68eb3746e9d8.png)

请帮助我，对不起我的英语>_<

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T12:30:23.897

你可以这样做；`pathName`直接在for循环中使用...

```
desk.setText("");
for (int j = 0; j < pathName.size(); j++){
    desk.append("Deskripsi:\n" + pathName.get(j) + "\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:47:02.670

你可以把线

```
 objPlace[] = new Object[pathName.size()] 
```

前

```
objPlace = pathName.toArray(); 
```

并检查输出，否则这样做

```
 desk.setText("");

 for (int j = 0; j < pathName.size(); j++){
     desk.append("Deskripsi:\n" + pathName.get(j) + "\n");
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T12:55:20.597

Thanks my fren. im still not really well on using Object[]. then i used this code for solving my problem

```
String strPlace[] = (String[])pathName.toArray(new String[pathName.size()]);

desk.setText("");
        for (int j = 0; j < strPlace.length; j++){
            desk.append("Deskripsi:\n" + strPlace[j] + "\n");
        } 
```

Thanks for userSeven7s, flameaddict and khan for trying to help me. nice to know u all :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T12:32:23.797

Ii 是由 引起的`NullPointerException`，这意味着一些需要参数并且您已将空值传递给它。根据您的代码，它可能在`desk.setText("");`. 尝试在其中插入一个空格或一些值并运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T12:32:58.960

你永远不会初始化你的数组...... objPlace[] 是一个空数组。

您需要执行以下操作：

```
objPlace[] = new Object[arraysizenumber] 
```

# android - 使用自定义适配器搜索列表视图

> ID：10665144
> 
> 赞同：0
> 
> 时间：2012-05-19T12:23:30.250
> 
> 标签：android, android-listview, android-adapter

我的应用程序有一个带有**自定义适配器的双行****ListView**。我想用 EditText 的输入过滤列表视图的内容。这怎么可能？

 **```
lv.setAdapter(new MyCustomBaseAdapter(getActivity(),recordObjects));
//recordObjects is an ArrayList of objects 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:49:56.447

你必须设置`TextWatcher to your EditText`和

然后使用动态数组过滤您的数据...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:31:47.983

使用该[`addTextChangedListener`](http://goo.gl/IvCYv)方法将一个添加`TextWatcher`到您的`EditText`. 然后在您的实施中，根据需要从您的适配器中`onTextChanged`添加或删除项目。`ListView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T12:43:23.207

这是你想要的那种东西吗？

```
ListView lv = getListView();
            /* Gets a ListView */
            lv.setTextFilterEnabled(true);

            /* sorts the listview */
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                    getApplicationContext(),
                    android.R.layout.simple_list_item_1,
                    result.getheadlines());
            setListAdapter(adapter);
            /*
             * gets the lisadapter from the XML and sets it equal to
             * whatever result is
             */ 
```**

# php - 用于阿拉伯字符的 PDO 数据库

> ID：10665145
> 
> 赞同：2
> 
> 时间：2012-05-19T12:23:31.507
> 
> 标签：php, database, pdo, phpmyadmin, arabic

我想使用 pdo 和 php 将阿拉伯字符插入数据库，但我在数据库中得到了这些字符

```
&#1575;&#1604;&#1580;&#1575;&#1605;&#1593; &#1575 
```

当我使用

```
<META http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

结果是

```
 ?????????? 
```

我在 phpMyadmin 中收集列

```
utf8mb4_unicode_ci 
```

和这个

```
utf_unicode_ci 
```

但我仍然有同样的错误。

我试着像这样建立联系：*（totti，totti 不是我真正的用户名和密码）*

```
parent::__construct('mysql:host=localhost;dbname=ams-competation;charset=utf8"', 'totti', 'totti'); 
```

但我仍然得到同样的错误

我也试过这样：

```
parent::__construct('mysql:host=localhost;dbname=ams-competation;charset=utf8', 'totti', 'totti'
                ,array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")); 
```

并且不起作用:(

在提交表单之后，在插入数据库之前，我回显了这些值并且我得到了阿拉伯字符，这意味着我的问题出在数据库中，**但是回显只是在不使用 meta 的情况下工作**

当我尝试从 phpmyadmin 插入阿拉伯字符时，它可以工作

我在用

```
phpmyadmin in XAMPP 1.7.4
php 5.5.3 
```

***最后我找到了解决方案，它是：***

1.  收集 utf8_unicode_ci 列
2.  放入`<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`标题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T00:49:30.347

在连接到数据库时尝试将连接设置为 utf-8。

*   如果您遵循规则和最佳实践：

首先在配置文件中设置常量，如下所示：

```
define('DB_SERVER', 'your_hostname');
define('DB_USERNAME', 'your_username');
define('DB_PASSWORD', 'your_password');
define('DB_CHARSET', 'UTF-8');
define('DB_DATABASE', 'your_dbname');
define('PDO_DSN', 'mysql:host=' . DB_SERVER . ';dbname=' . DB_DATABASE . ';charset=' . DB_CHARSET); 
```

然后像这样设置你的连接：

```
$_dbhandler = new PDO(PDO_DSN, DB_USERNAME, DB_PASSWORD,array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES UTF8")); 
```

*   又快又脏

像这样设置你的连接：

```
$dbhandler = new PDO('mysql:host=your_hostname;dbname=your_dbname;charset=UTF-8', $user, $pass); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T12:53:49.443

Your problem is most likely not in how you access the database. The characters you see are HTML encoded, so it looks like you're using something like `htmlentities()` on your data before writing it to the DB.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-16T21:27:17.690

> `define('DB_CHARSET', 'UTF-8');`不工作

`define('DB_CHARSET', 'UTF8');`改为使用

# php - 如何创建带限制的 Mysql 选择语句

> ID：10665151
> 
> 赞同：0
> 
> 时间：2012-05-19T12:24:11.273
> 
> 标签：php, mysql, sql

你好。我需要帮助进行 mysql 选择，其中 wins 中的值高于 100 ？所以它只选择赢得超过 100 次的用户

然后我需要将每个插入一个表中。

这是我到目前为止所拥有的

```
<?php
// i have toke my connect out

// Get all the data from the "example" table
$result = mysql_query("SELECT * FROM users") 
or die(mysql_error());  

echo "<table border='1'>";
echo "<tr> <th>username</th> <th>wins</th> </tr>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
    // Print out the contents of each row into a table
    echo "<tr><td>"; 
    echo $row['username'];
    echo "</td><td>"; 
    echo $row['wins'];
    echo "</td></tr>"; 
} 

echo "</table>";
?> 
```

我猜 id 需要一个 are 声明？说选择是胜利> 100？我已经完成了大量的选择，但从未选择结束。我还需要将每个结果插入另一个名为奖励的表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:31:35.897

您当前的查询`SELECT * FROM users`将为您提供表中存在的***所有数据。***

要获取`wins > = 100`只需添加此条件的数据，以便新语句

`SELECT * FROM users where wins >= 100`

## 要插入奖励表（考虑到您有字段作为用户名，获胜），请使用下面

```
insert into rewards 
(username, wins) 
select username, wins 
from users 
WHERE wins >= 100 
```

# visual-studio-2010 - 有没有办法停止 Visual Studio 将焦点放在正在调试的程序上，当它继续时

> ID：10665152
> 
> 赞同：1
> 
> 时间：2012-05-19T12:24:17.017
> 
> 标签：visual-studio-2010, visual-studio

假设我正在调试一个应用程序。它在调试器中暂停。我点击了运行按钮。被调试的应用程序获得焦点（并且 Visual Studio 失去焦点）。

**有没有办法防止这种行为？**

（而且，顺便说一句：为什么会发生这种情况？是 Visual Studio 故意赋予该窗口焦点吗？还是它是调试在 Windows 上工作方式的副作用？还是其他什么？）

有关上下文，请参阅[此答案](https://stackoverflow.com/a/10192314/165500)。尽管我想，如果可能的话，在其他调试场景中防止焦点更改也会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:42:24.923

因为替代方案要糟糕得多，所以聚焦事件在 gui 编程中是一件大事。调试器必须对正在调试的程序产生绝对最小的影响以避免工件，因此恢复执行之前的所有内容非常重要。包括重点。

只需快速 Alt+Tab 即可返回调试器。

# twitter - 了解影响力得分问题

> ID：10665154
> 
> 赞同：0
> 
> 时间：2012-05-19T12:24:48.270
> 
> 标签：twitter, social-networking, klout

在我的 twitter 个人资料 kushalshah02 中，有超过 50000 条推文和 15k 关注者，我也关注超过 15k 人。

我已将此配置文件与我的 klout 集成，然后我的 klout 分数也是 38。

与此相反，我的朋友 twitter 帐户 - frogmode 的关注者甚至不到 1000 条，推文不到 2500 条，尽管他已将他的个人资料整合到 klout 中并且他的分数是 62。

我还问过他没有将任何其他个人资料整合到他的影响力中。那怎么可能呢？

我是否违反了 klout 协议？这就是为什么我没有那么多好成绩的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T12:31:21.507

Klout 得分有很多内容。仅仅拥有很多追随者不会增加它。他们过滤掉已知的垃圾邮件帐户，然后查看推特上的转发等内容。您的朋友可能会让更多人回复/转发他的内容。对于不仅仅由*您的*关注者传播的推文，您可以获得更大的奖励。最后，您连接到 Klout 的社交网络越多，您的得分就越高。他们正在寻找“真正的影响力”，因此理论上您的影响力会随着网络的增加而增长。

# vb.net - SQL Server 连接相关错误

> ID：10665157
> 
> 赞同：0
> 
> 时间：2012-05-19T12:26:04.600
> 
> 标签：vb.net, sql-server-2008, connection-string

在连接到不同数据库的已打开程序中引发以下错误

> 向服务器发送请求时发生传输级错误。（提供者：TCP 提供者，错误：0 - 现有连接被远程主机强行关闭。）

程序详细信息：使用 vb.net 和 SQL Server 2008 作为后端完成的代码

同一 exe 的两个实例在同一台 PC 上同时运行但仅由一个实例引发错误

程序同时使用`SqlConnection`（ADO.NET）和`ADODB`连接（从 VB6 升级），两种类型的连接都会引发错误

如果错误是由于服务器的网络问题，那么为什么很少有程序可以正常工作？我无法追踪程序这种行为的原因

我可以知道为什么会发生此错误以及为什么仅在同一实例的少数程序中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:22:42.470

当您的 exe 的每个实例连接时，它都会获得自己的 SQL Server 进程 ID (SPID)。您收到错误是因为您的实例的连接在服务器级别被终止或在网络级别中断，在它尝试执行发生错误的 SQL 命令之前的某个时间点。

在 SSMS 中，检查您的 SQL Server 日志文件。在这个例子中，我杀死了一个 SPID，并记录了 SPID 的杀死： ![在此处输入图像描述](../Images/81368d3a572f3c4333bcbc796f5faa2d.png)

如果您没有看到记录的事件，您可能正在处理网络问题。进一步的故障排除可能涉及在代码打开 ADODB 连接之后但出现错误之前的某处设置一个或多个断点，然后通过 SSMS 验证该实例的 SPID 是否在断点处运行。`exec sp_who2`是列出服务器上所有当前活动的 SPID 的好命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-25T05:26:55.090

```
Imports System.Data
Imports System.Data.SqlClient

Public Class Form2

Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

End Sub
Private Function call_add()

    Dim tam, eng, mat, sci, soc, tot As Decimal
    tam = 0
    eng = 0
    mat = 0
    sci = 0
    soc = 0
    tot = 0
    If tamil.Text <> "" Then
        tam = Convert.ToDecimal(tamil.Text)
    End If
    If english.Text <> "" Then
        eng = Convert.ToDecimal(english.Text)
    End If

    If maths.Text <> "" Then
        mat = Convert.ToDecimal(maths.Text)
    End If

    If science.Text <> "" Then
        sci = Convert.ToDecimal(science.Text)
    End If

    If social.Text <> "" Then
        soc = Convert.ToDecimal(social.Text)
    End If

    tot = tam + eng + mat + sci + soc
    total.Text = tot.ToString
    percentage.Text = total.Text / 500 * 100

    Return False
End Function

Private Sub total_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles total.TextChanged
    call_add()
End Sub

Private Sub percentage_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles percentage.TextChanged
    call_add()

End Sub

Private Sub tamil_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles tamil.TextChanged
    call_add()

End Sub

Private Sub english_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles english.TextChanged
    call_add()

End Sub

Private Sub maths_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles maths.TextChanged
    call_add()

End Sub

Private Sub science_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles science.TextChanged
    call_add()

End Sub

Private Sub social_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles social.TextChanged
    call_add()

End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim con As SqlConnection
    Dim cmd As SqlCommand
    'Dim str As String
    con = New SqlConnection("server=WHITE-PC\WHITEPC;initial catalog=markreg;Integrated Security=True")
    cmd = New SqlCommand
    con.Open()
    Dim command As New SqlCommand
    cmd.Connection = con
    command = New SqlCommand("stdregno,stdname,tamil,english,maths,science,social,total,percentage", con)
    command.ExecuteNonQuery()
    con.Close()
    MsgBox("Added Sucessfully", MsgBoxStyle.Information, "Succesfully")
    call_clear()
End Sub
Private Function call_clear()

    stdregno.Text = ""
    stdname.Text = ""
    tamil.Text = ""
    english.Text = ""
    maths.Text = ""
    science.Text = ""
    social.Text = ""
    total.Text = ""
    percentage.Text = ""
End Function

Private Sub Button4_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button4.Click
    Form1.Show()
    Me.Hide()
End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    InputBox("Enter the Regno You want search")

End Sub

Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    InputBox("Enter the Regno You want Modify")
End Sub

End Class 
```

# c# - 允许人们修改程序

> ID：10665161
> 
> 赞同：1
> 
> 时间：2012-05-19T12:26:49.663
> 
> 标签：c#

假设某个程序员递给我一个编译程序，没有源代码，它做了一些事情，但没有图形表示它的作用。然而，它确实提供了轻松添加它的能力。但是程序员如何让人们与编译程序中的事物进行交互呢？

这个演示程序只是简单地生成一个随机数，具有最大值，然后触发一个事件，该事件应该向想要在他们自己的程序中使用这些数据的人公开发生的事情。

```
public delegate void MadeRandomEventHandler(int previous,int current,int max);

class MakeRandom
{
    private static int current = 350;
    private static int max = 350;

    public static event MadeRandomEventHandler MadeRandomEvent;
    public static void dowork()
    {
        int curCopy = current;
        Random random = new Random();
        current = random.Next(0, max+1);
        fireMadeRandomEvent(curCopy,current,max);
    }

    private static void fireMadeRandomEvent(int previous, int current, int max)
    {
        if (MadeRandomEvent != null)
            MadeRandomEvent(previous,current,max);
    }
} 
```

当然还有一个带有按钮的表单来调用 dowork()

```
public partial class Form_Main : Form
{
    public Form_Main()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MakeRandom.dowork();
    }
} 
```

所以现在我要做的就是创建一个向我展示发生了什么的 mod，创建一个带有进度条的新表单并处理 MakeRandom 类触发的事件。

表格：

```
public partial class Form_Mod : Form
{
    public static Form_Mod frm;

    public Form_Mod()
    {
        InitializeComponent();
    }

    private void Form_Mod_Load(object sender, EventArgs e)
    {
        frm = this;
        progressBar1.Minimum = 0;
        progressBar1.Maximum = 100;
    }

    public void updateProgress(int percent)
    {
        progressBar1.Value = percent;
    }
} 
```

和事件处理：

```
class Mod_HandleEvents
{
    public static void attach()
    {
        MakeRandom.MadeRandomEvent += new MadeRandomEventHandler(RandomChange);
    }
    public static void detach()
    {
        MakeRandom.MadeRandomEvent -= new MadeRandomEventHandler(RandomChange);
    }

    private static void RandomChange(int previous, int current, int max)
    {
        float percent1 = (float)current / (float)max;
        int percent = (int)(percent1 * 100);

        Form_Mod frm = Form_Mod.frm;
        frm.updateProgress(percent);
    }
} 
```

但是如何将这段代码添加到我提供的程序中？我没有源代码，所以我不能添加它然后重新编译。我见过几个似乎可以即时编译 .cs 文件的程序，而这些 .cs 文件似乎与主程序交互。我该怎么做呢？

而且我可能必须在主表单中添加另一个按钮才能真正打开我的“Form_Mod”表单。所以把主程序交给我的程序员必须提供一种方法来做到这一点，对吧？还是有其他方法？

```
private void button2_Click(object sender, EventArgs e)
{
    Form_Mod frm = new Form_Mod();
    Mod_HandleEvents.attach();
    frm.Show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:41:11.763

您可以创建一个插件。实现一个接口（所有插件通用），描述插件预期提供的所有方法和功能。然后你可以像这样动态加载插件（在运行时）：`Assembly.LoadFrom("plugin.dll")`- 见[http://msdn.microsoft.com/en-us/library/1009fa28.aspx](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)

一篇文章更详细地描述了这种方法：http: [//www.codeproject.com/Articles/4691/Plugin-Architecture-using-C](http://www.codeproject.com/Articles/4691/Plugin-Architecture-using-C)

另一个：[http ://www.c-sharpcorner.com/UploadFile/rmcochran/plug_in_architecture09092007111353AM/plug_in_architecture.aspx](http://www.c-sharpcorner.com/UploadFile/rmcochran/plug_in_architecture09092007111353AM/plug_in_architecture.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T12:43:18.673

此外，我会将插件加载到一个新的应用程序域中，以防止它做任何恶意的事情，但这有点高级......请参阅[编写 C# 插件系统](https://stackoverflow.com/questions/1070787/writing-c-sharp-plugin-system)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T12:32:27.390

最好的方法是将编译后的代码作为参考导入到您自己的项目中。即像使用类库一样使用它，就像所有标准的.NET 引用一样。然后，您可以在自己的应用程序中使用它的类，而无需担心该外部库背后的源代码。

为此，在您的项目下有一个 References 文件夹，右键单击它，添加引用，然后浏览到已编译的 .dll 或 .exe。添加后，您可以`MakeRandom`在代码中使用该类（请记住包含适当的`using`或使用其命名空间限定的名称）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T12:42:44.133

签出此[链接](http://www.codeproject.com/Articles/6334/Plug-ins-in-C)。您所指的通常也称为插件。它基本上是一个类库（dll），它从您的一个 DLL 中实现一个接口，它定义了您期望插件的外观。现在您只需扫描文件夹以查找其他 DLL 并使用反射来查找实现插件接口的类，当您拥有该类并加载程序集时，您可以创建该类型的实例并使用它。

# c++ - 如何使用 QVector at or operator[] 获取指向元素的指针

> ID：10665162
> 
> 赞同：5
> 
> 时间：2012-05-19T12:26:52.027
> 
> 标签：c++, qt

我很想得到一个指向`QVector`元素的指针，这样我就可以在其他地方使用该对象，但是该`at()`方法给了我一个`const T&`值，并且`operator[]`给了我一个`T&`值。

我对如何使用这些来获取指针感到困惑，以便我将使用相同的对象而不是使用复制构造函数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-19T12:27:50.593

值`T&`不是副本，它是[引用](http://en.wikipedia.org/wiki/Reference_%28C++%29)。

引用看起来很像指针：它们很轻，可以用来修改底层对象。只是，您使用它们的语法与直接对象相同（使用点而不是箭头），以及您可能希望在文章中查看的其他一些差异。

要编辑当前在 Vector 中的对象，您可以使用例如`vector[i].action();`. 这将从向量内的对象调用 action() 方法，而不是在副本上。您还可以将引用移交给其他函数（前提是它们带有引用参数），它们仍将指向同一个对象。

您还可以从引用中获取对象的地址：`Object* pObject = & vector[i];`并将其用作任何指针。

如果您确实需要指向对象的指针，您还可以使用指针向量：`QVector<Object*> vector;` 但是，这需要您处理创建/销毁，而对象向量则不需要。

现在，如果你想要一个指向 Vector 本身的指针，只需执行`QVector<Object> *pVector = &vector;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T15:23:59.030

`QVector::operator[]` returns a reference to the element at the given index. A reference is modifiable if it isn't a const reference, what is returned by `QVector::at()`.

You can simply modify the element by assigning a new value or using a modifying member of the object, like in the following examples:

```
// vector of primitive types:
QVector<int> vector;
vector.append(3);
vector.append(5);
vector.append(7);
vector[0] = 2;   // vector[0] is now 2
vector[1]++;     // vector[1] is now 6
vector[2] -= 4;  // vector[2] is now 3

// vector of objects:
QVector<QString> strings;
strings.append(QString("test"));
strings[0].append("ing"); // strings[0] is now "testing" 
```

`QMap` and `QHash` even support `operator[]` for non-existing keys, which makes the folliowing possible:

```
QMap<int, int> map;
map[0] = 4;
map[3] = 5; 
```

One disadvantage of `operator[]` is that the entry gets created if it didn't exist before:

```
// before: map contains entries with key 0 and 3
int myEntry = map[2]; // myEntry is now 0
// after: map contains entries with keys 0, 2 and 3 
```

# python - 在pylab模式下绘制矩形（add_patch）

> ID：10665163
> 
> 赞同：10
> 
> 时间：2012-05-19T12:26:59.250
> 
> 标签：python, matplotlib

我在 pylab 模式下使用 IPython（所有功能都在指尖），并且想注释某些情节，让我们说`plot([1,3,2])`矩形`Rectangle((1,1),1,1)`

如何在这种 pylab 模式下绘制一个简单的矩形，即不使用图形、轴、子图......但以最简单的方式引用刚刚创建的图

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-19T13:05:43.850

> 在这个 pylab 模式下，即不使用图形、轴、子图

pylab 框架中也存在图形、轴和子图。如果我使用的是 pylab 界面，我只需将 a 扔进`subplot(111)`去，然后使用`sp.add_patch(Rectangle(etc))`. 但您也可以使用`gca()`and获取当前坐标轴/图形`gcf()`：

```
>>> from pylab import *
>>> plot([1,3,2])
[<matplotlib.lines.Line2D object at 0x102bc8950>]
>>> gca()
<matplotlib.axes.AxesSubplot object at 0x102790cd0>
>>> gca().add_patch(Rectangle((1,1),1,1))
<matplotlib.patches.Rectangle object at 0x102790510>
>>> savefig("rect.png") 
```

![带矩形的线](../Images/5de299651a44309393b8d07063aa8455.png)

pylab 方法对于非常基本的任务来说足够简单，但不能很好地扩展到更复杂的任务。

# entity-framework - 插入/更新导航属性

> ID：10665164
> 
> 赞同：0
> 
> 时间：2012-05-19T12:27:05.490
> 
> 标签：entity-framework

我有两节课：

```
public class Product : Base
{
    public string Name { get; set; }
    public string Description { get; set; }
    public virtual List<Ingredient> Ingredients { get; set; }
} 
```

和

```
public class Ingredient:Base
{
    public string Description { get; set; }
} 
```

我的问题是：插入/更新产品成分的最佳方式是什么？假设我需要在插入/更新之前验证产品和成分，我应该创建一个产品存储库还是一个产品存储库和成分存储库？

* * *

我看到当我在我的控制器中使用我的 DbContext 时这很容易.. 但是如果我需要一个由 modules(bl,dao) 制作的系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:22:03.677

存储库数量的决定基于对域模型中聚合根的分析。如果没有. `Product`_ `Ingredient`_`Ingredient``Product`

是`Product`聚合根`Ingredient`吗？如果是，您应该单独处理产品和成分，`ProductRepository`如果不是，您应该为这两个实体提供单独的存储库。

您需要两个存储库的通常指示是多对多关系，但在这种情况下，EF 实体不能很好地与存储库配合使用，因为如果您之间有直接导航属性`Product`并且`Ingredient`您没有任何方法可以强制开发人员使用第二个用于`Ingeredient`访问和修改的存储库。

# jquery - css() 在 Safari 中的下一条语句之前没有完成

> ID：10665170
> 
> 赞同：0
> 
> 时间：2012-05-19T12:27:40.473
> 
> 标签：jquery, safari, timing

我有这段代码：

```
$(this).css('color', 'red');
if(confirm('Do you want to delete this item?'))
    window.location.href = link;
else
    $(this).css('color', 'black'); 
```

但不幸的是 css('color', red) 在调用 confirm() 之前没有执行。如果我使用动画而不是 css，并在回调函数中执行确认（），它会在动画实际完成**之前执行。**

注意这个问题没有出现在 chrome 中，它工作正常（对我来说）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:29:18.423

确认对话框可能会阻止页面在关闭之前进行更新。为避免这种情况，请在打开浏览器之前给它时间做一些事情：

```
var $this = $(this); // in the callback we cannot use `this`
$this.css('color', 'red');
window.setTimeout(function() {
    if(confirm('Do you want to delete this item?'))
        window.location.href = link;
    else
        $this.css('color', 'black');
}, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:29:29.200

小超时应该有帮助：

```
var el = $(this);
el.css('color', 'red');
setTimeout(function() {
    if(confirm('Do you want to delete this item?'))
        window.location.href = link;
    else
        el.css('color', 'black');
}, 1); 
```

**演示：http:** [//jsfiddle.net/jWRDq/](http://jsfiddle.net/jWRDq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T12:32:50.153

这在 if 语句中对您有用吗：

同意测试人员的意见——萤火虫太宽容了。

```
var $this = false;
if($this = $(this).css('color', 'red')) {
 if(confirm('Do you want to delete this item?')) {
  window.location.href = link;
 } else {
  $this.css('color', 'black');
 }
} 
```

# css - CSS：对多个 ID 使用单个规则

> ID：10665171
> 
> 赞同：6
> 
> 时间：2012-05-19T12:27:49.370
> 
> 标签：css, css-selectors, css-tables

我对`TH`标签使用了通用规则，`Table`但它扰乱了每一件事。我将规则用作：

```
th
{
    color: #fff;
    background: #7d7e7d;
} 
```

但现在我想为几个表指定 ID，这样它就不会影响其他表。我所做的是：

```
#id1,#id2  th
{
    color: #fff;
    background: #7d7e7d;
} 
```

它也做了什么颜色传播。我如何完成我的任务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T12:29:55.443

您需要指定`th`两次，因为逗号分隔整个选择器：

```
#id1 th, #id2 th
{
    color: #fff;
    background: #7d7e7d;
} 
```

否则，您将选择整个`#id1`以及只是`#id2 th`.

# html - 内容在中间，但图像更宽

> ID：10665178
> 
> 赞同：0
> 
> 时间：2012-05-19T12:28:38.217
> 
> 标签：html, css

如何设置 css 以使内容位于中间但一个 div 像这样：

编辑：

```
+----------------------------+
|         MONITOR            |
|    
|    +----------------+      |
|    |    CONTENT     |      |
|    +-----------------------|---------------+
|    |                       |               |
|    |    IMAGE TO THE RIGHT | REST OF IMAGE |
|    +----------------+------|---------------+
|    |                |      |
|    |    CONTENT     |      |
|    |   MIDDLE OF    |      |
|    |    SCREEN      |      |
|    |                |      |
|    |                |      |
+----------------------------+ 
```

编辑2：

我不想要水平滚动。图像隐藏必须简单地隐藏在右侧。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:42:27.597

```
.content {
    width: 400px; /* whatever fixed width */
    min-height: 500px;
    margin: 20px auto;
} 
```

你可以在这里看到现场演示：http: [//dabblet.com/gist/2730694](http://dabblet.com/gist/2730694)

# matlab - 从 m 大小的列索引向量创建一个由 0 和 1 组成的 m x n 矩阵

> ID：10665179
> 
> 赞同：6
> 
> 时间：2012-05-19T12:28:47.093
> 
> 标签：matlab, matrix, octave

我有一个*m*维的整数向量，范围从 1 到*n*。这些整数是*m × n*矩阵的列索引。

我想创建一个由 0 和 1 组成的*m × n*矩阵，其中第*m*行的列中有一个 1，由我的向量中的第*m*个值指定。

例子：

```
% my vector (3-dimensional, values from 1 to 4):
v = [4;
     1;
     2];

% corresponding 3 × 4 matrix
M = [0 0 0 1;
     1 0 0 0;
     0 1 0 0]; 
```

如果没有 for 循环，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T12:41:19.733

当然，这就是他们发明[稀疏](http://www.mathworks.nl/help/techdoc/ref/sparse.html)矩阵的原因：

```
>> M = sparse(1:length(v),v,ones(length(v),1))
M =

   (2,1)        1
   (3,2)        1
   (1,4)        1 
```

如果您想使用[full](http://www.mathworks.nl/help/techdoc/ref/full.html) ，可以将其转换为完整矩阵：

```
>> full(M)
ans =

     0     0     0     1
     1     0     0     0
     0     1     0     0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T13:56:53.340

或者没有稀疏矩阵：

```
>> M = zeros(max(v),length(v));
>> M(v'+[0:size(M,2)-1]*size(M,1)) = 1;
>> M = M'

M =

 0     0     0     1
 1     0     0     0
 0     1     0     0 
```

使用转置是因为在 matlab 中数组是按列寻址的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T14:23:51.507

在 Octave 中，至少从 3.6.3 开始，您可以使用广播轻松地做到这一点：

```
M = v==1:4 
```

# asp.net - 防止 Firebug 中的 HTML 更改

> ID：10665188
> 
> 赞同：1
> 
> 时间：2012-05-19T12:30:04.817
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-4.0

假设我有一个显示 DropDown 的个人资料页面，并且 1 个管理员用户可以更改不同用户的角色。

例如：

```
2 - Admin
3 - Member 
```

假设`1`为`SuperAdmin`. 如果我们`DropDownList`在 Asp.Net 中有一个并将其绑定到后面代码中的数据源，然后神秘地尝试更改 DropDownList 中的值，然后提交我们得到异常的表单`EventValidation`。但是在 Asp.Net MVC 中，如果我们对其进行编辑，肯定会因为它包含 Web。我能做些什么来防止我的 Web 应用程序中出现这种横切事物吗？

我可以做的一件事是检查表单何时发布，以查看发布的值是 2 还是 3，如果不显示一些消息，例如“您是否正在尝试破解”。有没有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:37:51.150

不要依赖客户端验证。为每个输入构建一个验证器。将一组验证器放在应用程序的服务器端。如果客户端有验证器，请确保在服务器端也实现了相同的验证器。

这里的输入是指基于 URL 的参数、基于表单的参数、隐藏字段、Cookie 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:37:58.030

您提到的解决方案（检查服务器）是防止在任何类型的网站上进行此类黑客攻击的正确解决方案。
使用 firebug 并不是“欺骗”基于 javascript 的验证的唯一选择。它也可以使用任何基本的嗅探器工具来完成，例如 fiddler，它可以帮助潜在的黑客分析发布到您网站的数据，以他希望的任何方式更改它，然后使用浏览器或再次发布它他自己的网络工具。
我通常在所有场景中都使用验证（脚本和服务器端），而在我看来，客户端验证的主要目的是在我已经知道的情况下防止回发到服务器（这会惹恼普通用户）客户端，他做错了什么。
然而，这样的验证永远不能足够安全以保证数据在服务器上被自动信任，因为它太容易修改 javascript/发布的数据，以覆盖它们。

**编辑**
遵循 UnhandleException 的响应： 特别是
在 MVC 中，您可以使用 Data Annotation 属性，使 mvc 引擎为您呈现客户端和服务器端验证
[本教程解释了如何在您的 mvc 应用程序中使用属性验证](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)

# objective-c - 如何更改其他类文本视图中的字体

> ID：10665190
> 
> 赞同：0
> 
> 时间：2012-05-19T12:30:38.967
> 
> 标签：objective-c, uitextview

我在 textview 中使用 UIFont 但不工作 UIFont 因为我在该传递数组中使用 masterViewClass 并且该对象数组传递给 detailViewController 类和 detailViewController 类我传递了 textview。在传递给 textview 但在那个使用的对象数组中

```
msgtxtView.text=selectedmsg;

[msgtxtView setFont:[UIFont fontWithName:@"Verdana-Italic" size:0]]; 
```

所以， selectedmsg 是我在消息传递列表中的数组，但是消息文本没有传递字体和大小，所以，其他类意味着 detailViewController 类，因为 chang 字体和大小如何给出适用于我的代码的任何建议和源代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:25:49.520

我猜你被选中了msg没有出现在msgtxtView中？

在这种情况下，您必须处理要显示的字符串，而不是整个数组，如下所示：

```
msgtxtView.text = [selectedmsg objectAtIndex:0]; 
```

# user-interface - 使用 wxPython 构建一个 gui 应用程序

> ID：10665191
> 
> 赞同：0
> 
> 时间：2012-05-19T12:30:49.120
> 
> 标签：user-interface, wxpython

我正在使用 wxpython 构建一个 gui 应用程序，我在两个不同的文件中创建了两个单独的窗口，即 app1.py 和 app2.py，我想使用单击第一个窗口（app1.py）的按钮打开第二个窗口（app2.py）。 py)。我如何做到这一点。如果有人能帮忙就太好了，谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:02:51.877

我假设您使用的是 wxPython 的“窗口”定义（即在 GUI 中实际可见的任何内容），而不是“带有东西的单独框和角落里的 X 按钮”的常规定义（wxPython 称之为“框架”）

当我编写我的第一个 wxPython GUI 时，我遇到了类似的问题。我希望一个面板中的操作能够影响另一个面板中显示的数据。我的第一个解决方案是编写方法，将请求盲目地传递给面板的父级，直到它到达顶层（我的“主框架”，如果你愿意的话）。这行得通，但显然这是一个糟糕的解决方案。

我的第二个解决方案是使用 wxPython 事件，就像捕捉 wx.Panel 的按钮按下一样。我的想法是我会在一个框架中创建一个按钮，然后将 wx.EVT_BUTTON 与该按钮的 ID 绑定到另一个框架中。我制作了自定义事件和命令事件。在尝试实施此解决方案时，我发现不传播，并且 CommandEvents 只会通过父母传播。因此，如果未捕获 CommandEvent 最终会击中您的“主框架”，但它永远不会击中第二个面板，除非该面板恰好是事件来源的父级。显然，这对你不起作用，因为父母不能隐藏，但孩子是可见的。此外，它会使您的主框架中充斥着代码和委托命令的方法。

终于，我找到了答案！wx.lib.pubsub！基本上，您在 app1.py 中绑定按钮按下，就像平常一样。现在，在处理程序中，您使用 pubsub 发布自定义消息。接下来，在 app2.py 的 init 中，您使用 pubsub 订阅您的自定义消息（我喜欢有一个“message.py”，我将所有消息声明为常量）。当您订阅消息时，您会分配一个处理程序方法，就像事件一样。\

阅读：[http ://wiki.wxpython.org/WxLibPubSub](http://wiki.wxpython.org/WxLibPubSub)

既然你说你想让窗口出现，也许在 app2.py 的 init 方法中你调用 Hide() 方法，然后当你收到消息时调用 Show()。

当我在我的应用程序中实现它时，我使用的是 wxPython2.8。我现在使用的是 2.9，所以我不知道这是否仍然需要，但我发现我需要顶部导入才能调用 pubsub.subscribe() 和 pubsub.sendMessage()。否则我不断收到错误。我不记得我是怎么想出来的，我想我在代码示例中看到了它，并拼命地添加它以使我的代码正常工作。我建议您阅读我上面链接的文档，并尝试在不首先导入的情况下实现您的代码。

```
import wx
from wx.lib.pubsub import setupkwargs #I need this to force pubsub to work. I don't know why.
from wx.lib.pubsub import pub

ID_MYBUTTON = wx.NewId()

class App1(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init___(self, parent)

        button = wx.Button(self, ID_MYBUTTON, "Show App2")
        self.Bind(wx.EVT_BUTTON, self.handleButton, id=ID_MYBUTTON

    def handleButton(self, event):
        pubsub.sendMessage("mybutton.pressed") #send the message

class App2(wx.Window):
    def __init__(self, parent):
        wx.Window.__init__(self, parent)

        self.Hide() #I don't want to be seen yet

        pubsub.subscribe(self.gotMessage, "mybutton.pressed") #listen for the message

    def gotMessage(self):
        self.Show() #Now I want to be seen! 
```

- - -编辑 - - -

我发现这个可能有帮助的问题：[在 wxPython 中创建主框架的子框架](https://stackoverflow.com/questions/1185156/creating-child-frames-of-main-frame-in-wxpython)

请详细告诉我们您要做什么？wxPython 也有“对话框”，如果您所做的只是向用户显示消息或询问更多信息，它会比框架更好。[http://wxpython.org/docs/api/wx.Dialog-class.html](http://wxpython.org/docs/api/wx.Dialog-class.html)

这实际上取决于您要完成的工作。除非您解释您要解决的问题，否则我们无法帮助您。

-----编辑阿吉安-----

看起来问这个问题的人确实想要一个 wx.Dialog。有关教程，请参阅[http://zetcode.com/wxpython/dialogs/](http://zetcode.com/wxpython/dialogs/)另请参阅[Python WX - 从 wx 对话框返回用户输入](https://stackoverflow.com/questions/10520788/python-wx-returning-user-input-from-wx-dialog)

# php - 未设置 Cookie

> ID：10665193
> 
> 赞同：0
> 
> 时间：2012-05-19T12:30:56.973
> 
> 标签：php, cookies

请你帮助我好吗？我的网站没有设置以下简单的 cookie。虽然其他一些登录脚本可以，但这个不起作用。谢谢

测试.php

```
...

<form action="test2.php" method="post">
        Email: <br />
        <input type="email" name="email" value=""/> <br />
        <input type="submit" name="submit" value="Next"/> 
</form>

... 
```

test2.php

```
<?php ob_start(); ?>

<?php
// call the header of the page
require('header.html');

// connect to database
require "connect.php";
?>

<?php
    $email = $_POST['email'];

    // set cookie
    $one_hour = time() + 3600;
    $set = setcookie(user_email, $email, $one_hour);

    if($set == TRUE) {
        print '<p> Cookie set</p>';
    } else {
        print '<p> Cookie not set</p>';
    }

// call footer of the page
require('footer.html');
?>

<?php ob_flush(); ?> 
```

**运行上述脚本后，我收到此错误：**

警告：无法修改标头信息 - 标头已由第 16 行 /websites/public_html/test2.php 中的（输出开始于 /websites/public_html/test2.php:1）发送

未设置 Cookie

*   PS：我脚本的第 16 行是“$set = setcookie(email_noaccount, $email, $hr);”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:37:05.347

只需按以下方式更改上面的代码并尝试，将 ob_start() 放在 require() 之后

```
<?php
require "connect.php";
require('header.html');
?>
<?php ob_start(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:35:53.473

您需要先将内容发送到输出缓冲区：

```
<?php ob_start(); ?>
  <--- right here
<?php
// call the header of the page
require('header.html');

// connect to database
require "connect.php";
?>
  <--- and right here
<?php
    $email = $_POST['email']; 
```

您应该去掉输出中不必要的空格，以便在构建输出之前进行服务器端处理（包括标题修改）。

理想情况下，您不想将两者混为一谈。服务器端处理应该在构建输出之前发生，然后将使用处理结果构建输出并发送到客户端。

# php - 在 Windows 上使用 .htaccess 重写 URL

> ID：10665195
> 
> 赞同：2
> 
> 时间：2012-05-19T12:31:26.160
> 
> 标签：php, apache, .htaccess, mod-rewrite, wampserver

我已经在 Windows 机器上打开了 mod_rewrite 并在我网站的根目录中创建了 .htaccess，现在在我写了 FAIL 之后它给了我一个内部服务器错误然后我用这个替换了代码

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ /$1.php [L,QSA] 
```

我正在尝试删除 .php 并创建友好的 URL，当我尝试在不使用 .php 的情况下加载索引时，它给了我一个 404 Not found 错误，我已经多次重新启动 wamp 服务器并且出现同样的问题。有人可以在这里帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T13:00:37.580

我已将 .htaccess 更改为此

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

它只是以防万一有人面临同样的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:49:58.287

删除线`RewriteCond %{REQUEST_FILENAME}.php -f`。这是不必要的。

# macos - 如何在 Mac OS X 应用程序的 Interface Builder 中插入静态图像？

> ID：10665203
> 
> 赞同：1
> 
> 时间：2012-05-19T12:32:06.800
> 
> 标签：macos, interface-builder

我刚刚开始使用 Xcode 和 Interface Builder，所以像将徽标作为图像 (.png) 插入这样简单的事情，我就是无法理解。

我知道有一个 ImageView，您可以在 iPhone 应用程序上插入，但在开发 OSX 应用程序时我似乎找不到该组件。那么，在 Interface Builder 中将静态图像插入面板的最佳方法是哪种，我是否使用自定义视图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T13:05:10.340

`NSImageView`您可以使用 Interface Builder插入图像视图 ( )。在某些版本中，库中的对象无缘无故被称为“图像井”。只需在对象库中搜索“图像”。

# android - bean对象的适配器是什么？

> ID：10665204
> 
> 赞同：0
> 
> 时间：2012-05-19T12:32:07.960
> 
> 标签：android, android-adapter

我正在将一个 bean 对象从第一个视图发送到第二个视图。其他时候，当我有一个要显示数据的数组时，我会使用 ArrayAdapter，但这次我只有一个要显示的 bean 对象。我必须使用什么类型的适配器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:38:22.327

您不需要使用任何适配器，只需传递对象本身。您可以直接在活动中使用传递的对象，例如设置 UI 控件的内容。当你有一个项目列表时，你需要适配器。此处的类文档提供了有关此的更多信息：http `Adapter`: [//developer.android.com/reference/android/widget/Adapter.html](http://developer.android.com/reference/android/widget/Adapter.html)

# iphone - 如何在 NSString 中查找格式的出现

> ID：10665205
> 
> 赞同：2
> 
> 时间：2012-05-19T12:32:16.550
> 
> 标签：iphone, objective-c, nsstring, find-occurrences

我正在阅读提要，并且需要查找字符串格式的出现，例如在“2012 年 3 月 2 日提要”中。现在该日期将始终采用以下格式：%@/%@/%@。我需要查找是否出现这种格式，从而提取日期。日期和月份可以是任意的，所以我没有要搜索的具体日期。我在文档中搜索，找不到它。对我来说，唯一可能的选择似乎是一个月的所有 12 种组合，如“/12/”，并找到其中任何一种的出现。

有没有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T12:36:57.297

您可以使用正则表达式：

```
NSString *feed = @"Feed for 03/02/2012";

NSError *error;

NSRegularExpression *regex = [NSRegularExpression         
    regularExpressionWithPattern:@"([0-9]{1,2})/([0-9]{1,2})/([0-2][0-9]{3})"
    options:NSRegularExpressionCaseInsensitive
    error:&error];

[regex enumerateMatchesInString:feed options:0 range:NSMakeRange(0, [feed length])    usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop){
    NSString *month = [feed substringWithRange:[match rangeAtIndex:1]];
    NSString *day = [feed substringWithRange:[match rangeAtIndex:2]];
    NSString *year = [feed substringWithRange:[match rangeAtIndex:3]];
    //...
}]; 
```

# objective-c - 从服务器下载可可包

> ID：10665206
> 
> 赞同：0
> 
> 时间：2012-05-19T12:32:16.533
> 
> 标签：objective-c, cocoa, lazy-loading

如何从服务器下载 Cocoa .bundle 文件，然后将其加载到应用程序中？我试过使用 zip，但`shouldDecodeSourceDataOfMIMEType`没有调用该函数。

```
- (IBAction)testDownload:(id)sender {
    // Create the request.
    NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://localhost/SampleBundle.zip"]
                                                cachePolicy:NSURLRequestUseProtocolCachePolicy
                                            timeoutInterval:60.0];

    // Create the connection with the request and start loading the data.
    NSURLDownload  *theDownload = [[NSURLDownload alloc] initWithRequest:theRequest
                                                                delegate:self];
    if (theDownload) {
        // Set the destination file.
        [theDownload setDestination:@"/Users/developer/Desktop/Test-Downloads/SampleBundle" allowOverwrite:YES];
    } else {
        // inform the user that the download failed.
    }
}

- (void)download:(NSURLDownload *)download didFailWithError:(NSError *)error
{
    download = nil;

    // Inform the user.
    NSLog(@"Download failed! Error - %@ %@",
          [error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)downloadDidFinish:(NSURLDownload *)download
{
    download = nil;

    // Do something with the data.
    NSLog(@"%@",@"downloadDidFinish");
}

- (BOOL)download:(NSURLDownload *)download shouldDecodeSourceDataOfMIMEType:(NSString *)encodingType;
{
    BOOL shouldDecode = YES;
    NSLog(@"EncodingType: %@",encodingType);
    return shouldDecode;
} 
```

那么如何从服务器下载 .bundle 解压缩并将其加载到应用程序中呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:49:03.577

根据下载的文档：shouldDecodeSourceDataOfMIMEType：

> 如果下载的文件未编码，则不会调用此方法。

所以，我猜这可能与它有关。你可能最好实现 download:didReceiveResponse: 并检查 NSURLResponse 对象，尤其是状态码——如果不是 200 ，那就是出了问题，你需要查看 HTTP 代码以了解究竟是什么问题。

另外，我不确定这一点，您是否需要提升权限才能安装捆绑包，它是可执行文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T14:57:57.977

shouldDecodeSourceDataOfMIMEType委托效果很好，但仅适用于**gzip** **(.gz) 档案**。我已经对 .zip 和 .gz 进行了广泛的测试。

还应该注意的是它不会调用 tar，所以如果你同时应用了压缩和 tar，如下所示：

```
tar czvf ArchiveName.tar.gz ./ArchiveName/ 
```

shouldDecodeSourceDataOfMIMEType委托会给你留下**：**

```
ArchiveName.tar 
```

因此，存档不会立即可用。

对于**.zip 档案**，正如其他人指出的那样，最好的选择是**[MiniZip](http://www.winimage.com/zLibDll/minizip.html)** (C API) 或基于它的 Objective-C 框架，如**[ZipArchive](https://code.google.com/p/ziparchive/)** (2005) 或更新的**SSZipArchive** (2013)。

# hadoop - 更详细的在 ubuntu 上安装 hbase 和 hadoop 的链接

> ID：10665212
> 
> 赞同：4
> 
> 时间：2012-05-19T12:32:55.470
> 
> 标签：hadoop, hbase

我将在 ubuntu 上安装 hadoop 和 HBase。当我尝试搜索任何好的链接时，我无法找到完全清晰且更具描述性的链接。我需要一个详细的链接，我可以从中轻松设置 hsdoop 和 hbase。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T12:42:50.193

您没有提到要以伪分布式模式或多分布式或单节点或多节点设置这些。不管怎样，这里有一些对你有帮助的链接
[hadoop单节点集群](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)，
[hadoop多节点集群](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)，
对于hbase，我想你应该看到这些链接
[以伪分布式模式安装HBase，](http://ria101.wordpress.com/2010/01/28/setup-hbase-in-pseudo-distributed-mode-and-connect-java-client/)以
[完全分布式模式安装hbase](http://hbase.apache.org/book/standalone_dist.html)

希望它会帮助你 - 谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T15:03:41.057

对于伪分布式模式，我建议使用以下链接

HADOOP 安装 [http://preciselyconcise.com/apis_and_installations/hadoop_installation.php](http://preciselyconcise.com/apis_and_installations/hadoop_installation.php)

HBASE 安装 [http://preciselyconcise.com/apis_and_installations/hbase_installation.php](http://preciselyconcise.com/apis_and_installations/hbase_installation.php)

# java - 为什么 apache servlet 是单例的？

> ID：10665223
> 
> 赞同：-3
> 
> 时间：2012-05-19T12:34:30.323
> 
> 标签：java, servlets

```
 HttpServletRequest request;
  HttpServletResponse response;

  public void doGet(HttpServletRequest request , HttpServlet response){
         this.request = request;
         this.response = response;
  } 
```

如果这个 servlet 一次接收到多个请求会发生什么？

我们遇到了响应不匹配的问题。这是一个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T12:38:46.537

您的 Web 应用程序容器仅加载一个 servlet 实例。

要编写线程安全的 servlet，您几乎不应该使用实例变量。将请求和响应设置为实例变量是完全错误的。servlet 的实例不属于单个请求。

如果您需要使请求或响应的元素可用于其他方法，请将它们传递给这些方法。您不需要它们作为实例变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T12:37:16.510

当然这是个问题。servlet 是一个单例。同一个 servlet 实例用于处理对这个 servlet 的所有请求。请求当然是同时处理的。这意味着如果您这样做，thread1 将使用通常由 thread2 处理的请求和响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T13:00:06.163

引用 Servlet 规范

“每个请求和响应对象只在servlet的service方法范围内有效，或者在filter的doFilter方法范围内有效。容器通常会回收request对象以避免创建request对象的性能开销。开发者必须意识到不建议在上述范围之外维护对请求对象的引用，因为它可能会产生不确定的结果。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T12:54:34.560

这肯定会产生问题，任何实例变量都是共享的，因为 servlet 是单例的，因此并发请求和响应对象将被覆盖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T02:32:48.120

发生的情况是您的 servlet 立即变得不可重入，并且在第一次被多个客户端同时调用时肯定会失败。你不能这样做。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-19T12:56:33.013

这是一个问题，永远不建议将 HttpServletRequest 请求/HttpServletResponse 响应声明为实例变量。实际上 Servlet 正在实现单线程模型，这意味着只创建一个 servlet 实例。每个请求一个线程。因此，如果他们有很多请求，那么 thr 必须有很多线程，并且每个线程都共享相同的 servlet 实例，这将产生数据不匹配或数据不一致的问题。线程将在相同的实例上工作。

# facebook - Facebook 连接工作正常，但在 Facebook iframe 内部出现问题

> ID：10665226
> 
> 赞同：2
> 
> 时间：2012-05-19T12:34:45.753
> 
> 标签：facebook, iframe, facebook-php-sdk, facebook-oauth

我实际上试图找到解决方案，但什么也没有，我希望我能在这里找到解决方案！

我在我的网站中使用 facebook connect，当我登录 facebook 时一切正常，我通过 facebook connect 自动登录到我的网站，反之亦然。

现在我试图让它成为一个 facebook 应用程序，但我遇到了以下问题：我尝试在 facebook iframe 中运行，但不幸的是我没有自动登录。有时它可以工作，有时什么也没发生，有时我会收到这条消息：（**可以没有获得 Facebook 会话。您的服务器可能无法安全地 Facebook 连接到用户以检索信息。）**

我正在使用一些代码：

```
include 'includes/facebook.php';

$facebook = new Facebook(array(
  'appId'  => $setting['facebook_appid'],
  'secret' => $setting['facebook_secret'],
  'cookie' => true, // enable optional cookie support
));

if ($facebook->getUser()) {
$facebook_session = 1;

try {
  $fb_user = $facebook->api('/me');
} catch (FacebookApiException $e) {
  error_log($e);
}

function get_facebook_cookie($app_id, $application_secret) {
  $args = array();
  parse_str(trim($_COOKIE['fbs_' . $app_id], '\\"'), $args);
  ksort($args);
  $payload = '';
  foreach ($args as $key => $value) {
    if ($key != 'sig') {
      $payload .= $key . '=' . $value;
    }
  }
  if (md5($payload . $application_secret) != $args['sig']) {
    return null;
  }
  return $args;
}

$cookie = get_facebook_cookie($setting['facebook_appid'], $setting['facebook_secret']);

$open = @file_get_contents('https://graph.facebook.com/me?access_token='.$cookie['access_token']);

if ($open != FALSE) {
    $fbdata = json_decode($open);
    $fb_user = array();

    foreach($fbdata as $key => $fbdata2) {
        $fb_user[$key] = $fbdata2;
    }
}

}
else {
    $facebook_session = 0;
} 
```

ps：我当然使用的是安全画布 URL

请帮忙 ！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:43:35.637

我的 Facebook Connect 登录运行良好，但在 Facebook Canvas/iFrame 中却没有，它根本无法运行。我不得不更改我的登录方法（现在 facebook 用户必须能够在您的应用程序中自动登录），对我来说基本上有用的是：[如何在画布中使用重定向授权 Facebook 应用程序？](https://stackoverflow.com/questions/3380876/how-to-authorize-facebook-app-using-redirect-in-canvas)

这是我之前的（我使用的是 CakePHP）：

```
$params = array(
   'scope' => 'email'
);

$loginUrl = $facebook->getLoginUrl($params);
$this->redirect($loginUrl); 
```

我把它改成了这个效果很好：

```
$loginUrl = $facebook->getLoginUrl(
        array(
            'canvas' => 1,
            'fbconnect' => 0,
            'req_perms' => 'publish_stream'
        )
    );
echo '<script>top.location="'.$loginUrl.'";</script>'; 
```

我不确定这是否真的对您有帮助，因为您的应用程序似乎比我的更复杂，但也许您可以通过这个答案或我链接到的帖子解决您的问题。

# jquery - 使用 jquery 删除表列和表头，表头具有行跨度和列跨度

> ID：10665230
> 
> 赞同：0
> 
> 时间：2012-05-19T12:35:01.563
> 
> 标签：jquery

我有一个表，需要使用 jquery 删除它的列。使用它但它会删除所有标题，但我希望只删除第一行标题。

```
 <table border="2" style="border-collapse:collapse;">
    <tr>
    <tr>
           <th rowspan="2">#</th>
           <th rowspan="2">A</th> 
           <th rowspan="2">B</th>
           <th rowspan="1" colspan="3">C</th>
    </tr>
<tr>

           <th>C-1</th>
           <th>C-2</th> 
           <th>C-3</th>
</tr>

<tr>

           <td>CONTENT</td>
           <td>CONTENT</td>
           <td>CONTENT</td>        
           <td>CONTENT</td>
           <td>CONTENT</td> 
           <td>CONTENT</td> 
</tr>

</table> 
```

我需要删除列 A 及其相应的 tds ，所以我正在使用：

```
$('tr td:nth-child(2), tr th:nth-child(2)').remove(); 
```

它删除了 TH-A 及其列 CONTENT 但`<th>`：C-2 也被删除了，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:44:56.177

`tr`首先，您的代码顶部有一个额外的。删除它，然后你可以使用 [`first-child`](http://api.jquery.com/first-child-selector/)选择器来完成你想要的这个特定的 html 结构，像这样

```
$('tr td:nth-child(2), tr:first-child > th:nth-child(2)').remove();​ 
```

**解释**

排除的选择器`C-2`是`tr:first-child > th:nth-child(2)`. 它告诉 jQuery 的事情是`find the first tr`then `find the 2nd th`。`>`意思是查找`th`哪些在内部（或 的子级）`tr`。与`C-2`第二个`tr`一样，它被排除在外。让我知道这对你是否有意义。我不是很擅长写作。

[工作演示](http://jsfiddle.net/joycse06/Pwwkb/)

这会改变您想要的元素的颜色。在您的代码中使用 remove 代替。

# javascript - 在重新加载期间通过 url 发送参数

> ID：10665235
> 
> 赞同：4
> 
> 时间：2012-05-19T12:36:14.030
> 
> 标签：javascript, html, url, window.location

我正在执行 ajax 请求，并且在成功回调中我想刷新页面以反映更改。我试图在刷新该页面时将参数传递到同一页面。

网址类似于：

`http://localhost:8080/details#component/12`我正在向其附加参数，如下所述。

```
window.location.href += "?code=approved";
window.location.reload(); 
```

以上在 Firefox 中有效，但在 IE 中无效，您能帮忙吗？

克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:25:39.450

尝试将这些用于 IE：

```
window.location.reload(false); // To get page from cache
window.location.reload(true); // To get page from server 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T14:45:51.363

如果`window.location.hash`为空，则不能在不使用正确函数的情况下为 location.href 分配新值（至少在 chrome 中测试过）。

尝试`window.location.replace`：

```
if (!window.location.hash) 
    {
        window.location.replace(window.location.href + "?code=approved")
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T14:10:46.907

哈希是问题所在；您将数据附加到 URL 片段（# 之后的部分）片段不会发送到服务器，即 url 不会更改，因此无需再次请求页面。尝试手动将“#some_text”添加到浏览器中的 url，看看会发生什么；）

尝试这样的事情：

```
var newloc = document.location.href;
if(document.location.hash){
    // remove fragment
    newloc = newloc.substr(0, newloc.indexOf(document.location.hash));
}
newloc += document.location.search ? ";" : "?"; // prevent double question mark
newloc += 'code=approved';
// append fragment back to url 
```

# sockets - 如果有的话，套接字的同步程度如何？

> ID：10665236
> 
> 赞同：1
> 
> 时间：2012-05-19T12:36:19.543
> 
> 标签：sockets, unix, language-agnostic

我已经阅读[了这个关于套接字同步的问题，](https://stackoverflow.com/questions/2493544/how-the-reading-from-and-writing-to-sockets-are-synchronized)但我仍然不明白。

最近我正在开发一个相对简单的客户端/服务器应用程序，其中通信通过 tcp 套接字进行。客户端是用 PHP 编写的，使用类似 C 的函数（尤其是[`fsockopen`](http://php.net/manual/en/function.fsockopen.php)和[`fgetc`](http://php.net/manual/en/function.fgetc.php)）PHP 提供与套接字交互，服务器是用 node.js 编写的，[`Stream`](http://nodejs.org/docs/latest/api/stream.html)用于输出数据。

协议非常简单，消息只是一个以 0 字节字符结尾的字符串。

基本上它是这样工作的：

```
SERVER: Message 1
CLIENT: Ack 1

SERVER: Message 2
CLIENT: Ack 2

.... 
```

这真的很好用，因为我的客户一次处理一条消息，方法是从套接字读取一个字符一个字符，直到遇到一个表示消息结束的 0 字节。然后客户端向服务器写回它已成功接收到消息（这就是`Ack <message id>`部分）。

现在发生了这样的事情：

```
SERVER: Message 1
CLIENT: Ack 1

SERVER: Message 2
CLIENT: Ack 2

SERVER: Message 3
        Message 4
        Message 5
        Message 6
CLIENT: <DOH!>
.... 
```

这意味着服务器意外地在一个“批次”中向客户端发送了多条消息，尽管每条消息都是服务器上的单个`stream.write(...)`操作。似乎消息在某处缓冲，然后立即发送给客户端。我的客户端代码无法在没有响应的情况下处理套接字中的多条消息`Ack`，因此它切断了 id 3 之后的剩余消息。

所以我的问题是：

*   套接字的读写同步程度如何？从上面的问题我了解到一个套接字基本上是两个单向管道，这意味着它们根本不同步？
*   一些消息以简单的“一条消息一确认”方式发送到我的客户端，然后突然将多条消息写入流，怎么会发生这种情况？
*   如果套接字以阻塞/非阻塞方式打开，它实际上会改变图片吗？

我使用 PHP 5.4 和节点 0.6.x 在 Ubuntu VM 上对此进行了测试（因此没有负载或任何可能引起奇怪行为的东西）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:27:56.293

TCP 是双向流的抽象，因此没有消息的概念，也不能保留消息边界。无法保证多个 send() 或 recv() 调用将如何映射到 TCP 数据包。您应该将 send() 视为多次调用它等同于调用一次并连接所有数据。更重要的是，在接收时，您应该确保您的代码以完全相同的方式解释传入的数据，无论它是如何在单独的 recv() 调用中拆分的。

要正确接收，您可以使用存储不完整消息的缓冲区。但是请注意，当缓冲区中有不完整的消息时，下一个 recv() 调用可能会完成当前消息，*并*提供零个或多个完整消息，并且可能是另一个不完整消息的一部分。

阻塞或非阻塞模式在这里不会改变任何东西——它只是关于你的应用程序与操作系统接口的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T22:31:09.750

有两个同步概念需要处理：

1.  `send()`or的（通常）同步操作`recv()`。
2.  一个进程发送消息的异步方式以及另一个进程处理消息的方式。

如果可以，请尽量避免使客户端和服务器处于进程同步的“锁定步骤”中的设计。那是自找麻烦。如果其中一个进程意外关闭怎么办？另一个进程/线程可能会挂在一个`recv()`永远不会到来的地方。对于您的设计而言，期望每条消息最终都得到确认是一回事，但对于您的设计而言，期望只能发送一条消息，然后必须先确认，然后才能发送另一条消息，则完全是另一回事。

考虑一下：

```
Server: send 1
Client: ack 1
Server: send 2
Server: send 3
Client: ack 2
Server: send 4
Client: ack 3
Client: ack 4 
```

能够适应这种情况的设计比预期的要好：

```
Server: send 1
Client: ack 1
Server: send 2
Client: ack 2
Server: send 3
Client: ack 3
Server: send 4
Client: ack 4 
```

# jquery - 启用客户端验证后，Jquery 验证不再起作用

> ID：10665239
> 
> 赞同：-1
> 
> 时间：2012-05-19T12:36:46.197
> 
> 标签：jquery, asp.net-mvc, validation

为了改进我的应用程序，我激活了客户端验证，它工作得很好，但不幸的是，一些 Jquery 表单验证已被拒绝并且不再工作:(
这是我的 JS 代码：

```
<script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.ui.datepicker.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.ui.core.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.ui.widget.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("form").validate({
            rules: {
                idv: { required: true },
                dd: { required: true },
                df: { required: true },
                remise: { required: true }
            }
        });
    });
</script> 
```

这是我的表单代码：

```
<% using (Html.BeginForm("Promo", "Agence", FormMethod.Post, new { @class = "search_form" })) { %>

    <p>
        Matricule vehicule : <br />
        <%: Html.TextBox("idv")%> <br />
        De : <br />
        <%: Html.TextBox("dd")%> <br />
        Juqu'a  : <br />
        <%: Html.TextBox("df")%> <br />
        Remise : <br />
        <%: Html.TextBox("remise") %> % <br />
        Description : <br />
        <%: Html.TextArea("des", new {rows="4", cols="30" })%>
    </p>
    <input type="submit" value="Ajouter" class="button"/>            
<% } %> 
```

在这种形式中，我不需要使用模型，我在同一页面中使用其他模型，Jquery 验证工作得很好，直到我激活了验证客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:42:10.250

验证这两行是否在该`appSettings`部分的 web.config 文件中

```
<add key="ClientValidationEnabled" value="true"/>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
```

并将这一行添加到您的布局中

```
 <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

还要修改您现有的脚本，以便它们都使用`src="@Url.Content("~/Scripts/...`

# php - 将多条记录作为数组插入

> ID：10665248
> 
> 赞同：3
> 
> 时间：2012-05-19T12:37:56.727
> 
> 标签：php, arrays, forms

```
<input name="name[]">
<input name="email[]">

<input name="name[]">
<input name="email[]">

<input name="name[]">
<input name="email[]">

....
.... 
```

在提交包含这些字段的表单时，我正在尝试构建一个如下所示的数组：

```
array(

  array(
   'name'=> 'name1',
   'email' => 'email1'
  );

  array(
   'name'=> 'name2',
   'email' => 'email3'
  );

  array( ...
  ....
  ....
); 
```

我尝试这样做的原因是我想序列化这个数组并将它作为一个数据条目保存到我的数据库中。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:05:12.720

您可以使用循环逻辑

```
if($_SERVER['REQUEST_METHOD']=='POST'){
    foreach ($_POST as $k=>$v){
   if(is_array($v)){
       foreach ($v as $sk=>$sv){ 
                $arr[$sk][$k]=$sv;
        }
       }
    }
  echo "<pre>";
  print_r($arr);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T13:05:00.370

更改您的命名：

```
<input name="myform[0][name]">
<input name="myform[0][email]">

<input name="myform[1][name]">
<input name="myform[1][email]"> 
```

您的数据数组：

```
$data = $_POST["myform"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T13:02:45.817

要生成您正在寻找的结构，您可以执行以下操作：

```
$data = array();

foreach ($_POST['email'] as $id => $email) {
  $data[$id]['email'] = $email;
}

foreach ($_POST['name'] as $id => $name) {
  $data[$id]['name'] = $name;
} 
```

这给了你类似的东西：

```
Array
(
    [0] => Array
        (
            [email] => email1
            [name] => name1
        )

    [1] => Array
        (
            [email] => email2
            [name] => name2
        )

    [2] => Array
        (
            [email] => email3
            [name] => name3
        )

) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-19T13:01:25.147

您可以简单地序列化整个`$_POST`并保存它。

```
serialize($_POST); 
```

或者

```
serialize($_GET); 
```

# asp.net - 我在 Visual Studio 2010 中看不到 Release Build？

> ID：10665260
> 
> 赞同：0
> 
> 时间：2012-05-19T12:39:34.680
> 
> 标签：asp.net

我有一个网站（目标框架 2.0），我在 Windows 7 Professional 上安装 VS 2010 Ultimate，问题是当我打开网站时，我试图从 Debug->Release 更改 Build 配置，没有“Release”项解决方案配置下拉列表中的选项，它位于标准工具栏上。即使我右键单击解决方案并选择属性，然后选择配置属性，我也只能看到活动（调试）。

我需要发布已发布的副本。（换句话说，aspx 文件中没有 html 代码）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T12:51:32.687

发布配置不适用于网站。你有两个选择：

*   右键单击项目和“发布站点”，或
*   [在http://www.microsoft.com/en-us/download/details.aspx?id=24509](http://www.microsoft.com/en-us/download/details.aspx?id=24509)获取 Web 部署插件。这将允许您打包您的站点并准备​​好进行部署。

我更喜欢第二种选择，它有很多好处，提供了更多选择，如果你做得对，它可以帮助部署过程。

# mysql - MySQL join 有两个条件

> ID：10665261
> 
> 赞同：0
> 
> 时间：2012-05-19T12:40:00.820
> 
> 标签：mysql, performance, join, left-join

使用单个查询，我需要获取所有对象 A 的列表和一个附加列，当与表 B 中的对象 C 有关联时返回“1”，或者在没有与对象 C 的关联时返回“0”在表 B 中。

表 A 保存所有对象 A 表 B 保存与另一个对象 C 关联的所有对象 A。

我知道对象 C 的 ID。

目前我正在使用带有 LEFT JOIN 的查询和两个带有 AND 的 JOIN 条件。对于返回值列，我使用“(TableB.id IS NOT NULL) as associated”。

表 A 可能只保存几十到一百条记录。表 B 可能会保存数千到数十万条记录。表 C 可能会保存数千到数十万条记录。

```
TableA.id is index
TableB.tablea_id is index
TableB.id is index
TableB.tablec_id is index
TableC.id is index 
```

我的查询目前如下所示：

```
SELECT TableA.name, TableA.code, (TableB.id IS NOT NULL) AS associated
FROM TableA 
LEFT JOIN TableB ON TableA.id=TableB.tablea_id AND TableB.tablec_id = $input 
```

我用于 SQL 查询的方法或实现预期结果的更好方法是否存在任何性能问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:56:12.583

Your query looks fine as far as I can see.

However, you should keep in mind that **conditions on `join` should be for matching foreign keys**. Following this practice at least makes your queries more readable and maintainable.

# ssh - 在计算机睡眠时保持 SSH 会话活动？

> ID：10665267
> 
> 赞同：35
> 
> 时间：2012-05-19T12:40:51.530
> 
> 标签：ssh, timeout

计算机睡眠时是否可以保持 SSH 会话处于活动状态？当我让我的 Mac (Lion) 短时间休眠然后唤醒它时，会话仍然存在，但如果我离开它过夜，会话连接就会关闭。

我试过设置：

```
ClientAliveInterval 3600
ClientAliveCountMax 10

```

相同的结果

为什么会话在短时间内“存活”？如何控制此超时？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-22T15:21:25.320

我发现答案取决于 tcp keepalive 设置：

有关可用 TCP 设置的列表（FreeBSD 4.8 和 5.4）：

```
sysctl -A | grep net.inet.tcp 
```

*   `net.inet.tcp.keepidle`- 在发送 keepalive 探测（如果启用）之前（TCP）连接必须处于空闲状态的时间量（以毫秒为单位）。

*   `net.inet.tcp.keepintvl`- 发送到远程机器的 keepalive 探测之间的间隔，以毫秒为单位。在发送 TCPTV_KEEPCNT（默认 8）探测后，没有响应，（TCP）连接被丢弃。

*   `net.inet.tcp.always_keepalive`- 假设在所有 TCP 连接上都设置了 SO_KEEPALIVE，内核会定期向远程主机发送一个数据包以验证连接是否仍然正常。

因此计算最大 TCP 非活动连接时间的公式如下：

```
net.inet.tcp.keepidle + (net.inet.tcp.keepintvl x 8) 
```

结果以毫秒为单位。因此，通过设置

```
net.inet.tcp.keepidle = 10000
net.inet.tcp.keepintvl = 5000
net.inet.tcp.always_keepalive = 1 (must be 1 always) 
```

当 TCP 连接中断时，系统将断开呼叫：`10000 + (5000 x 8) = 50000`毫秒（50 秒）。为了让系统在启动时记住这些设置，您应该将它们添加到`/etc/sysctl.conf`文件中

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-19T12:51:52.523

如果您想要一个优雅的解决方案来保持远程会话处于活动状态，您应该检查该`screen`实用程序。使用此实用程序时，即使在注销或关闭计算机后，您也可以保持远程程序运行。然后您可以`screen`稍后重新连接可用的会话。

Screen需要一些时间来学习基础知识，但是当您掌握它时，您会看到它的强大。

您可以查看此链接以获取有关使用屏幕的教程：[http ://www.thegeekstuff.com/2010/07/screen-command-examples/](http://www.thegeekstuff.com/2010/07/screen-command-examples/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-25T21:56:37.597

另一种可能的解决方案是[mosh](http://mosh.mit.edu)，它不完全是 SSH，但在您的计算机进入睡眠状态时，甚至在更改 IP 地址之后，它确实使您的 shell 连接保持活动状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-30T17:06:32.290

另一种解决方案是使用[autossh](http://www.debianadmin.com/autossh-automatically-restart-ssh-sessions-and-tunnels.html "自动SSH")，它基本上监控您的 ssh 会话并在它被中断时立即重新连接（例如，在睡眠周期之后，但如果您失去 WiFi 连接一段时间，例如）。这对于转发的端口/ssh 隧道特别有效。

这是一个教程： http: [//linuxaria.com/howto/permanent-ssh-tunnels-with-autossh](http://linuxaria.com/howto/permanent-ssh-tunnels-with-autossh)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-19T12:45:05.903

有时，会话在没有数据传输时关闭。保持`htop`打开状态通常会阻止我的 ssh 连接关闭，并提供有用的实时信息。

Keepalive 应该做同样的事情。您可以尝试将间隔（两个 keepalive 之间的延迟）减少到 60 左右，看看它是否会改变任何东西。

# css - 之后包含 CSS 的正确方法

> ID：10665268
> 
> 赞同：20
> 
> 时间：2012-05-19T12:41:02.760
> 
> 标签：css, html, w3c

显然`<link rel="stylesheet" ...`，W3C 标准认为在文档正文中添加是一种不好的做法。在正文中添加`<style>`块也是如此...

那么是否有任何符合标准的解决方案可以在`<head>`标签之外添加 CSS？就像在文件的末尾一样。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-19T13:00:14.657

如果您只想在特定事件中包含 CSS 样式，那么没有什么能阻止您这样做：

```
var linkElement = document.createElement("link");
linkElement.rel = "stylesheet";
linkElement.href = "path/to/file.css"; //Replace here

document.head.appendChild(linkElement); 
```

这具有以异步方式添加样式表的额外好处，这不会阻止浏览器下载其他任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T12:46:56.517

解决该问题的一种方法是加载`CSS`with [.get()](http://api.jquery.com/jQuery.get/)并仅在需要时将其附加到 head 标签：

**查询**

```
var css = "foobar.css";
var callback = function() {
  alert("CSS is now included");
  // your jquery plugin for a navigation menu or what ever...
};

$.get(css, function(data){
  $("<style type=\"text/css\">" + data + "</style>").appendTo(document.head);
  callback();
}); 
```

该`callback`功能有助于使`script`依赖于`CSS`文件的代码正确格式化，仅在`CSS`添加后才能运行！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T14:57:21.170

我认为一旦你开始做服务器端编程或 DHTML 之类的事情，大多数人都会忽略这个标准。

对于静态 HTML 文件，您绝对可以/应该遵循仅在 HEAD 标记中包含 CSS 的规则，但对于条件输出和交互性，它有时也可以简化事情以具有条件样式。考虑到最后，这会使生成的文档变得复杂。尽管浏览器可能会很好地呈现它，但如果您自己查看源代码，如果定义布局/显示的所有样式都在 HEAD 中，则更容易阅读。当然，还有许多其他示例和原因说明为什么这是不好的做法。

HTML 标准与服务器端脚本和 DHTML 之类的东西分开存在，即它不是 HTML/SSS/JavaScript 标准。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T12:46:31.970

只有 HTML5 允许使用 scoped 属性，但请确保正确声明 DOCTYPE。

```
<style type="text/css" scoped>
.textbox {
color: pink
}
</style> 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2015-11-25T14:09:15.467

如果你说的是一个外部的 css sheet，那么正确的方法如下：

```
<link href="....link to your style...." rel="stylesheet"> 
```

如果要包含内联 css，则只需执行以下操作：

```
<style>
 ....Your style here...
</style> 
```

# c# - 安装没有点网框架的C#应用程序

> ID：10665269
> 
> 赞同：1
> 
> 时间：2012-05-19T12:41:03.447
> 
> 标签：c#

我在 C# 2010 上创建了一个新应用程序。创建安装文件后，我知道出于安装目的，用户必须拥有一个 dot net 框架。有什么办法可以摆脱在用户计算机上安装点网框架。每次我尝试在用户计算机上安装我的应用程序时，它都会重定向以安装 dot net 框架。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T12:46:28.070

那是个问题；由于 .NET 应用程序的设计。

这里有一些参考资料： [Visual C#](http://msdn.microsoft.com/library/kx37x362)

> “C#（发音为“C sharp”）是一种编程语言，旨在构建在 .NET Framework 上运行的各种应用程序。” [第一句话]

[C# 和 .NET 简介](http://msdn.microsoft.com/en-us/library/z1zx9t92)

![C# 和 .NET](../Images/cc54da009d33300683282b37cb1eaceb.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T12:47:42.580

正如对问题的评论试图暗示的那样，需要 .NET Framework*才能*执行 .NET 应用程序。

你有两个选择，真的：

1.  要求用户安装 .NET Framework。这是最常见的选择，原因马上就会清楚。有这样的要求并非闻所未闻。这类似于要求用户安装 Windows 才能运行您的 Windows 应用程序。
2.  使用应用程序安装程序分发 .NET Framework。这是可能的，但较少使用，因为 .NET Framework与普通应用程序相比*很大。*但是，如果您必须这样做，那么该选项至少是可用的。一些快速的谷歌搜索把我带到了[这篇有用的博客文章](http://msmvps.com/blogs/haarongonzalez/archive/2007/04/09/772757.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T12:50:09.503

这是不可能的。C# 建立在 .NET 框架之上，因此任何 C# 应用程序都需要有可用的 .NET 版本。在[http://en.wikipedia.org/wiki/.NET_Framework#History](http://en.wikipedia.org/wiki/.NET_Framework#History)，您可以查看在各种 Windows 版本中可用的 .NET 框架版本。简而言之，XP 不包含任何内容，Vista 包含 3.0，Windows 7 包含 3.5。如果您为这些版本之一构建，那么在这些操作系统上，您的用户将不需要安装任何额外的东西。使用客户端配置文件而不是完整的 .NET 还可以帮助减少或消除用户需要执行的安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T12:46:57.693

不幸的是，不。这是不可能的。

用简单的术语来解释它。

假设如果你只写了 1 行代码，你会简单地声明一个`int`变量，谁会告诉操作系统它应该在内存中创建一个空间？

该框架完全可以创建基本环境以在系统中运行您的应用程序。

**OOPs 说的是真实世界的建模和关系，所以让我给你一个。**

**将自己视为 C# 应用程序，将大自然/环境（Greenry）视为 .Net 环境。（.Net 称为环境）**

**你能在没有大自然的情况下生存吗？从你来到这个世界的第一秒开始，你就开始呼吸。谁为你提供氧气。大自然**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-17T13:01:52.717

当您使用托管语言编写您同意使用其 vm 的应用程序时，c# 代码编译为需要 dot net 框架执行的 IL。

.net 框架默认存在于 Windows 7、8、8.1 和 10 上，我不认为这是一个挑战。

但是如果您坚持这样做，那么有一种方法可以使用 Mono，只需从您的项目中删除 Mono 中不支持的功能。

首先安装mono和cygwin，然后将你的exe和mono.dll文件复制到一个文件夹，确保你的文件名不长，因为在某些情况下捆绑失败，现在你可以使用mkbundle命令开始捆绑。

捆绑完成后，您有一个可以在没有 .net 框架的情况下运行的 exe 文件

希望这对你有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-17T12:49:54.953

在创建安装包时，您可以添加 dot net frame work exe 文件作为先决条件，然后在安装应用程序时，它可以检查系统是否具有 .net 框架。如果未安装，您的应用程序可以安装框架。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-12-08T13:10:56.520

我有同样的问题，希望应用程序使用现有的点网框架版本（4.6）进行设置，因为应用程序设置需要 4.7.2 版本，PC 不满足要求

# windows-phone-7 - 使用 SkyDrive Live 从 Skydrive 下载文件

> ID：10665270
> 
> 赞同：1
> 
> 时间：2012-05-19T12:41:07.060
> 
> 标签：windows-phone-7, onedrive

我正在使用 SkyDrive Live 上传文件，但现在我想下载我刚刚上传的文件。在文档中它提到了一个文件 ID，但我没有找到如何获取该 ID。

我有一个文件夹，我将文件放入其中，所以我需要以某种方式传递文件夹 ID，然后获取 fileID ...

有谁知道如何做到这一点或知道这方面的任何教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T14:36:53.597

如果您使用 SkyDrive SDK 上传文件，那么您将通过 UploadCompleted 事件的 e.Result["id"] 获取 fileId

如果您有 folderId，但没有 fileId，则可以使用 client.GetAsync(folderId/files) 查询文件夹的内容。GetCompleted 事件的 e.Result["data"] 返回文件描述的 IDictionary，每个都包含 fileId。在这种情况下，您需要通过 dictionaryEntry["name"] 或其他一些魔法来识别所需的文件。

# android - 没有 TabHost 的具有 ActivityGroup 效果的 Android TabHost

> ID：10665275
> 
> 赞同：0
> 
> 时间：2012-05-19T12:41:25.710
> 
> 标签：android, layout, android-activity, android-tabhost, activitygroup

我想创建一个类似于 TabHost 的选项卡菜单，但我想使用其他一些元素，不仅是该菜单中的按钮，还能够绑定一些其他操作，而不是启动新活动到按钮。

基本上我需要一个具有布局的活动，我将能够在所有其他活动的一部分中显示，就像带有 ActivityGroup 的 TabHost。有可能吗？问我你是否不明白我的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:46:38.660

如何使用具有线性布局（具有水平方向）的水平滚动视图，它具有您提到的所有视图？在它下面，放一个可以改变其内容的片段容器。

如果您不熟悉 Fragments，请查看 api-demos，或者，对于“旧”版本的 android（姜饼及以下），请查看支持库演示（v4）。

# scanf - 插入外壳代码

> ID：10665276
> 
> 赞同：1
> 
> 时间：2012-05-19T12:41:33.143
> 
> 标签：scanf, shellcode

我有一个小问题。

假设我在控制台应用程序中有以下代码：

```
printf("Enter name: ");

scanf("%s", &name); 
```

我想利用这个漏洞并输入以下shell代码（MessageboxA）：

```
6A 00 68 04 21 2F 01 68 0C 21 2F 01 6A 00 FF 15 B0 20 2F 01 
```

如何通过控制台输入我的 shell 代码（十六进制值）？

如果我按原样输入输入，它会将数字视为字符而不是十六进制值。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T12:47:26.443

您可以将具有所需内容的文件用作标准输入或使用 echo 命令。

假设你的 shell 代码是 AA BB CC DD（显然这不是一个有效的 shellcode）：

```
echo -e "\xAA\xBB\xCC\xDD" | prog 
```

# dynamic - 如何比较帕斯卡中的两个线性列表

> ID：10665284
> 
> 赞同：0
> 
> 时间：2012-05-19T12:42:30.187
> 
> 标签：dynamic, hyperlink, linked-list, structure, pascal

任务是创建包含 2 个线性列表的新列表，如果第一个列表的元素等于第二个列表的元素，那么我们必须从新列表中删除相同的元素

```
 procedure CreateList(var t1,L1,t2,L2:plist);
 var 
 tmp1, tmp2:plist;
 begin
  t1 := L1;
  t2 := L2;
  while t1 <> nil do
  begin

  write(t1^.Data, ' ');
  t1 := t1^.Next;

  while t2 <> nil do
  begin
  write(t2^.data, '  ');
  tmp2:=t2;
  t2 := t2^.Next;

   if(t2 = tmp1^.next) then // here is the problem how to compare 2 elements
   begin
   tmp1 := t1; 
   t1 := t1^.Next;
   Dispose(tmp1); 
   end;
end; 
end;
Writeln;
readkey;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:45:37.633

我建议您更改列表的类型，例如：

```
type
  TData = integer;

  PList = ^TList;
  TList = record
    data : TData;
    next : PList;
    copy : boolean;
  end; 
```

之后您将使用 value .copy 来检查副本。这是您需要的简单代码。我试图使所有代码尽可能简单。

```
procedure deleteCopys(var list:PList);
// make all TList.copy := false (after we will use it)
var
  curList : PList;
begin
  curList := list;
  while (curList<>nil) do
  begin
    curList^.copy := false;
    curList := curList^.next;
  End;
End;

procedure createList(var list1, list2, list3:PList);
// we belive that: (list3 is empty) and (there is no copys in list1)
//                 and (there is no copys in list2)
var
  curList1, curList2 : PList;
begin
  deleteCopys(list1);
  deleteCopys(list2);
  deleteCopys(list3);

  // make TList.copy := true for equal elements 
  // from curList1 and curList2
  curList1 := list1;
  while (curList1 <> nil) do
  begin
    curList2 := list2;
    while (curList2 <> nil) do
    begin
      if (curList1^.data = curList2^.data) then
      begin
        curList1^.copy := true;
        curList2^.copy := true;
        break;
      End;
      curList2 := curList2^.next;
    End;
    curList1 := curList1^.next;
  End;

  // now we can put all elements from list1 and list2 
  // with state TLilt.copy=false
  // and each of them will be different
  // (Let's do it :)
  curList1 := list1;
  while (curList1 <> nil) do
  begin
    if (curList1^.copy = false) then
    begin
      //some procedure for new element
      putNewElement(list3, curList1^.data);
    End;
  End;

  curList2 := list2;
  while (curList2 <> nil) do
  begin
    if (curList2^.copy = false) then
    begin
      //some procedure for new element
      putNewElement(list3, curList2^.data);
    End;
  End;

end; 
```

我希望它会帮助你！

# c# - 如何防止显示“程序意外终止”窗口？

> ID：10665288
> 
> 赞同：2
> 
> 时间：2012-05-19T12:42:51.227
> 
> 标签：c#, .net, windows

我有一个使用 AciveX 对象并提供 WCF 服务的 C# WPF 程序。所以有很多线程，很多对非托管代码的调用。有时在满载应用程序崩溃。我正在调查这个问题——看起来问题出在 ActiveX 的某个地方，我无法更改。无论如何，我需要一种在崩溃后恢复程序的方法。至于现在我找到了解决方案：

```
public partial class App : Application
 {
    private static readonly Logger log = LogManager.GetCurrentClassLogger();

    bool isClosing = false;

    [System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute]
    void D_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        log.FatalException("Error UnhandledException ", (Exception)e.ExceptionObject);
        MonitoringSvc.host.Close();
        log.Info("Restarting");
        if (!isClosing)
        {

            System.Windows.Forms.Application.Restart();
            System.Windows.Application.Current.Shutdown();
        }
    }

    private void Application_Startup(object sender, StartupEventArgs e)
    {
        AppDomain D = AppDomain.CurrentDomain;
        D.UnhandledException += new UnhandledExceptionEventHandler(D_UnhandledException);
    }

    private void Application_Exit(object sender, ExitEventArgs e)
    {
        isClosing = true;
    }
} 
```

程序在未处理的异常上重新启动（肯定是模拟的）。但旧副本未关闭，系统消息“程序意外终止”。程序大部分时间不与用户交互，因此没有人可以关闭该消息以关闭程序。问题是如何默默地关闭那个旧窗户？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T23:08:30.200

这是如何禁用程序崩溃时出现的窗口的解决方案。不仅是 WER，因为即使禁用了 WER，也会显示其他窗口（要求关闭或调试程序）。

```
 [DllImport("kernel32.dll", SetLastError = true)]
    static extern int SetErrorMode(int wMode);

    [DllImport("kernel32.dll")]
    static extern FilterDelegate SetUnhandledExceptionFilter(FilterDelegate lpTopLevelExceptionFilter);
    public delegate bool FilterDelegate(Exception ex);

    App()
    {
        FilterDelegate fd = delegate(Exception ex)
        {
            return true;
        };
        SetUnhandledExceptionFilter(fd);

        SetErrorMode(SetErrorMode(0) | 0x0002 );
    } 
```

# android - 当我按下 Clear Memory 时 Android Kill Service

> ID：10665291
> 
> 赞同：0
> 
> 时间：2012-05-19T12:43:11.137
> 
> 标签：android

我已经设置了一个服务，它使用启动 Forground，所以 android 不会杀死它，但是当我在任务管理器中按 Clear Memory 时，它会关闭我的服务，问题出在哪里，如果你用内置媒体播放器来解决这个问题，android 会根本不杀它

我已经使用 start_stricky 和 ​​Notification.FLAG_FOREGROUND_SERVICE

如果我使用 NO_CLEAR ，则没有差异

我怎么解决这个问题 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:10:56.460

您可以检查该服务是否被杀死并重新启动它。请参阅以下答案：

> *   [如何在android中自动重启服务？](https://stackoverflow.com/questions/9707081/how-to-restart-the-service-automatically-in-android)
>     
>     
> *   [Android - 如何确保我的服务重新启动？](https://stackoverflow.com/questions/3607861/android-how-to-make-sure-my-service-is-restarted)
>     
>     
> *   [Android：如何在“强制关闭”后自动重启应用程序？](https://stackoverflow.com/questions/2681499/android-how-to-auto-restart-application-after-its-been-force-closed)

# linq - ADO.NET Linq 一对多选择用户 ID

> ID：10665294
> 
> 赞同：0
> 
> 时间：2012-05-19T12:43:27.683
> 
> 标签：linq, entity-framework

首先踩堆栈溢出，我会尽力做到最好..

下面，我的模型来自 ADO.NET（mysql 数据库）

[http://img585.imageshack.us/img585/4533/screenshot20120519at143.png](http://img585.imageshack.us/img585/4533/screenshot20120519at143.png)

```
// CHECK USER+PASS
rmEntities2 myDb = new rmEntities2();
var query = from c in myDb.users
            where c.use_login == run.name
            where c.use_password == run.pass
            select c.use_id;

if (query.Count() == 0)
{
    return "ERROR USER/PASSWORD";
}
else
{
    // Linq insert DB
    running newRun = new running();
    newRun.run_start_time = new System.DateTime(1970, 1, 1, 0, 0, 0, 0)
        .AddSeconds(Double.Parse(run.start));
    newRun.run_end_time = new System.DateTime(1970, 1, 1, 0, 0, 0, 0)
        .AddSeconds(Double.Parse(run.stop));
    newRun.run_distance = (float)run.distance;
    newRun.run_nbfootsteps = run.nbfootsteps;
    newRun.run_vo2max = run.vo2Max;

    foreach (int u in query)
    {
        newRun.user.use_id = u;
    }

    myDb.AddTorunnings(newRun);
    myDb.SaveChanges();
    return "RUNNING ADDED";
} 
```

问题出在这一行：

```
newRun.user.use_id = u; 
```

我想在我的运行表中设置用户的 run_use_id。

什么是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T17:04:05.143

我希望当您尝试`use_id`在该行中设置值时

```
newRun.user.use_id = u; 
```

你得到一个`NullReferenceException`. 这是因为 newRun.user 为 null - 新运行未与用户关联。

我建议不要使用`use_id`，而是使用`user`.

```
var query = from c in myDb.users
            where c.use_login == run.name
            where c.use_password == run.pass
            select c;
var user = query.SingleOrDefault(); 
```

然后是其中之一：

```
newRun.user = user; 
// or 
user.runnings.Add(newRun); 
```

他们都做同样的事情，但使用对你更有意义的那个。

# jquery - 使用过滤函数链在 jquery 中获取 2 个互补集

> ID：10665295
> 
> 赞同：0
> 
> 时间：2012-05-19T12:43:51.460
> 
> 标签：jquery, jquery-selectors, set

我有一张桌子。我想选择所有符合特定条件的行，对它们执行一些操作，然后对所有其他行执行其他操作。所以我需要将行分成 2 个互补的集合。最好（最快）的方法是什么？我认为下面的代码应该可以工作，但是有更好的解决方案吗？

```
var firstSetOfRows = $(".classA");
var allTheOtherRows = $(":not(.classA)");
firstSetOfRows.filter(function() {
        if (decisionFunctionA(this)) {
            return true;
        } else {
            allTheOtherRows.add(this);
            return false;
        }
    }).filter(function() {
        if (decisionFunctionB(this)) {
            return true;
        } else {
            allTheOtherRows.add(this);
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:55:34.913

我的初始解决方案适用于过滤器函数（在@BoltClock`tr`修复之后），但后来我想在过滤器中使用选择器而不是函数来做同样的事情。在发现`filter()`返回一个新的 JQuery 对象后，让原来的对象保持不变，我想出了这个。（ps 和 fs 数组仅用于调试，因此您可以查看每个阶段通过或失败的行数。）

```
function complementaryFilter(originalSet, fltrs, funcPass, funcFail) {
    var passes = $(originalSet), fails = $();
    var ps = [], fs = [];
    for(var i = 0, j = fltrs.length; i < j; i++) {
        fails = fails.add(passes.not(fltrs[i]).get());
        passes = passes.filter(fltrs[i]);
        ps[i] = passes.length;
        fs[i] = fails.length;
    };
    passes.each(funcPass);
    fails.each(funcFail);
} 
```

但是，这会在行上循环两次 - 一次`not`用于获取失败的行，然后再次`filter`用于获取通过的行。我想只通过一次就可以完成这两个设置。（我尝试查看 JQuery 源代码，但我需要一些时间才能弄清楚其中发生了什么！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T12:50:55.480

```
 $(".classA").removeClass('SelectedClassA NotSelectedClassA');

        $(".classA").each(function () {
            $(this).addClass(function () {
                return ((decisionFunctionA(this) && decisionFunctionB(this)) ? 'SelectedClassA' : 'NotSelectedClassA');
            });
        });

        $(".classA.SelectedClassA").css({ 'Color': 'red' });
        $(".classA.NotSelectedClassA").css({ 'Color': 'Blue' });
 //Or

    var firstSetOfRows = $(".classA");
    firstSetOfRows.filter(function() {
            if (decisionFunctionA(this) && decisionFunctionB(this)) {
                return true;
            } else {
                allTheOtherRows.add(this);
                return false;
            }
        }); 
```

# android - 如何知道谁共享了我的应用程序以及谁获得了该共享

> ID：10665298
> 
> 赞同：1
> 
> 时间：2012-05-19T12:44:43.630
> 
> 标签：android, android-intent

我在我的应用程序中添加了分享按钮，我想知道是否有什么要知道的：

谁在我的应用程序中按下了分享按钮，谁收到了该分享，

这可能吗？

在此先感谢，任何帮助将不胜感激。

我添加共享的代码如下：

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND); 
sharingIntent.setType("text/plain"); 
String shareBody = "Here is the share content body"; 
sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject Here"); 
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody); 
startActivity(Intent.createChooser(sharingIntent, "Share via")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:48:28.893

将谷歌分析添加到您的应用程序。并跟踪这样的共享事件。

```
 tracker.trackEvent(
      "Share",  // Category
      CategoryName,  // Action
      filename // Label
      ,1);       // Value 
```

[https://developers.google.com/analytics/devguides/collection/android/](https://developers.google.com/analytics/devguides/collection/android/)

# ios - 使用 CMDeviceMotion 时，如果设备垂直向上（间距 = 90），它真的很不稳定。无论如何要解决这个问题？

> ID：10665306
> 
> 赞同：4
> 
> 时间：2012-05-19T12:46:31.167
> 
> 标签：ios, math, pitch, core-motion

我知道（俯仰、偏航、滚动）坐标系在数学方面有其自身的缺陷。但是，我真的希望可以替代或从该坐标派生的东西可以替代。

我正在尝试做的是在现实世界中移动设备（假设它是一部 iphone），并试图找出用户眼睛的偏航和俯仰。因此，yaw 的范围应该是 (-180, 180)，pitch 的范围应该是 (-90, 90)。当我将 iphone（始终面向我）从底部移动到前面时，CMDeviceMotion 使我的音高从 0 变化到 90，而当我将 iphone（仍然面向我）从前到上移动时，CMDeviceMotion 使我的音高从 90 向后变化到 0。这些都很好，我对音高数据非常满意。

然而，当俯仰接近 90 度时，偏航非常不稳定且不稳定。威尔，这不是问题，因为我可以忽略俯仰在 90 左右时偏航的变化。但是，真正的问题是偏航的值在俯仰增加之前和俯仰减小之后发生了巨大变化。我的意思是它不仅不稳定，而且平均变化！改变像 180(Pi) 这样的东西。我想那是因为坐标完全改变了。但我现在迷失在坐标转移上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:42:31.193

您刚刚描述的这种混乱的解决方法正是您不应该使用滚动、俯仰和偏航的原因。

你要么在这条路上走得更远，让混乱变得更大，要么[使用旋转矩阵或四元数](https://stackoverflow.com/a/5578867/341970)。

# php - 免费、灵活的 PHP 管理主题？

> ID：10665309
> 
> 赞同：0
> 
> 时间：2012-05-19T12:46:38.790
> 
> 标签：php, codeigniter, themes

对于 PHP，是否有与此类似的主题？

[https://github.com/pilu/web-app-theme](https://github.com/pilu/web-app-theme)

是否可以将其与 PHP 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:19:48.590

只需一点工作，它肯定可以与 PHP 一起使用。布局位于：

```
web-app-theme / lib / generators / web_app_theme / theme / templates 
```

而 CSS 和图像位于：

```
web-app-theme / app / assets / images / web-app-theme 
```

和：

```
web-app-theme / app / assets / stylesheets / web-app-theme 
```

需要一些工作才能将其转换，但仍然可行。

这些模板看起来不错，虽然我没有尝试过： http: [//guitemplates.com/](http://guitemplates.com/)

# python - BeautifulSoup 查找和替换文本导致 HTML 问题

> ID：10665311
> 
> 赞同：2
> 
> 时间：2012-05-19T12:46:46.367
> 
> 标签：python, beautifulsoup

```
for finding in soup.findAll(text=reg_compiled_keyword):
   if finding.parent.name == "img":
      continue

   new_text = re.sub(reg_compiled_keyword,cls.keyword_replace_tmpl.format(escaped_kw,id,escaped_kw),finding)

   finding.replaceWith(new_text) 
```

For 循环返回 NavigableString 对象，如果我使用 replace 函数，它也会替换属性中的文本，这当然会导致 HTML 无效。

如何检查当前的 NavigableString 是否在属性内以便我可以跳过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:38:50.523

我的理解是 find_all() 不会给你 NavigableStrings 是属性值。你确定你得到的是属性值内的 NavigableStrings 吗？

假设你能以某种方式或者我错了，试试这个看看你所拥有的是否是一个属性值。

```
finding.string in finding.parent.attrs.values() 
```

（当然，在此之前检查 .parent 和 .parent.attrs() 是有效的对象））

`True`如果 NavigableString`finding`是一个属性值，这将返回。

如果您想查看是否`finding`是属性（不是属性值），那么您将替换`values()`为`keys()`.

# c# - Uploadify 脚本数据不返回 unicode 字符

> ID：10665317
> 
> 赞同：0
> 
> 时间：2012-05-19T12:47:24.723
> 
> 标签：c#, asp.net-mvc, uploadify

在我的应用程序中，我使用uploadify 上传文件。一切都与标准 unicode az 0-9 完美搭配。

这是一个示例。

```
 <script type="text/javascript" charset="utf-8">
        $(window).load(
                   function () {
                       $('#fileuploaderImage').fileUpload({
                           uploader: '/Scripts/uploader.swf',
                           script: '@Url.Action("Test", "Test")',
                           scriptData: { ProjectName: @Model.ProjectName },
                           cancelImg: '/Images/cancel.png',
                           auto: true,
                           multi: false,
                           folder: '/uploads',
                           fileDesc: 'Image',
                           sizeLimit: '200000000',
                           fileExt: '*.png;',
                           'onComplete': function (event, ID, fileObj, response, data) {
                               $("#img-path").val(response);
                           }
                       });

                   }
                  );    
    </script> 
```

所以你看到我使用 ScriptData 将 ProjectName 属性传递给我的控制器，它会起作用。但如果 ProjectName 类似于控制器中的“MMMÅØÆÅÅØØÆ”属性，则只会返回“MMM”，其余字符串将消失。有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:31:51.653

我认为这是编码问题。

像这样使用：

```
scriptData: { ProjectName: encodeURIComponent('@Model.ProjectName') }, 
```

这应该可以解决您的问题。

# permissions - 可靠地在 Chrome 扩展程序中获取 favicon，chrome://favicon?

> ID：10665321
> 
> 赞同：37
> 
> 时间：2012-05-19T12:47:48.117
> 
> 标签：permissions, google-chrome-extension, favicon

我正在使用`chrome://favicon/`我的[Google Chrome 扩展程序](https://chrome.google.com/webstore/detail/pnjaodmkngahhkoihejjehlcdlnohgmp)来获取 RSS 提要的图标。我所做的是获取链接页面的基本路径，并将其附加到`chrome://favicon/http://<domainpath>`.

它的工作真的很不可靠。很多时候它会报告标准的“无图标”图标，即使页面确实有图标。关于该`chrome://favicon`机制的文档几乎为零，因此很难理解它的实际工作原理。它只是已访问链接的缓存吗？是否可以检测是否有图标？

通过一些简单的测试，它只是您访问过的页面的网站图标缓存。因此，如果我订阅 dribbble.com 的 RSS 提要，它不会在我的扩展程序中显示网站图标。然后，如果我访问`chrome://favicon/http://dribbble.com/`它不会返回正确的图标。然后我在另一个选项卡中打开 dribbble.com，它在选项卡中显示它的图标，然后当我重新加载`chrome://favicon/http://dribbble.com/`-tab 时，它将返回正确的图标。然后我打开我的扩展弹出窗口，它仍然显示标准图标。但是，如果我然后重新启动 Chrome，它将在任何地方获得正确的图标。

现在这只是来自一些基础研究，并没有让我更接近解决方案。所以我的问题是：`chrome://favicon/`我正在做的事情是一个正确的用例。有任何文件吗？它的预期行为是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-20T02:36:34.330

我也看到了这个问题，这真的很令人讨厌。

据我所知，Chrome 会在您访问 URL 后填充 chrome://favicon/ 缓存（如果有，则省略 URL 的 #hash 部分）。它似乎通常在页面完全加载*后的某个时间填充此缓存。*如果您在相关页面完全加载之前尝试访问 chrome://favicon/ [http://yoururl.com ，您通常会返回默认的“地球图标”。](http://yoururl.com)随后刷新您正在显示图标的页面将修复它们。

因此，如果可以的话，可能只是在向用户显示图标之前刷新您正在显示图标的页面，这可能会起到修复的作用。

在我的用例中，我实际上是在打开要从中获取网站图标的选项卡。到目前为止，我发现获得它们的最可靠方法大致如下：

```
chrome.webNavigation.onCompleted.addListener(onCompleted);

function onCompleted(details)
{
    if (details.frameId > 0)
    {
        // we don't care about activity occurring within a subframe of a tab
        return;
    }

    chrome.tabs.get(details.tabId, function(tab) {
        var url = tab.url ? tab.url.replace(/#.*$/, '') : ''; // drop #hash
        var favicon;
        var delay;

        if (tab.favIconUrl && tab.favIconUrl != '' 
            && tab.favIconUrl.indexOf('chrome://favicon/') == -1) {
            // favicon appears to be a normal url
            favicon = tab.favIconUrl;
            delay = 0;
        }
        else {
            // couldn't obtain favicon as a normal url, try chrome://favicon/url
            favicon = 'chrome://favicon/' + url;
            delay = 100; // larger values will probably be more reliable
        }

        setTimeout(function() {
            /// set favicon wherever it needs to be set here
            console.log('delay', delay, 'tabId', tab.id, 'favicon', favicon);
        }, delay);
    });
} 
```

这种方法在大约 95% 的时间为新 URL 返回正确的网站图标，使用延迟 = 100。如果您可以接受，增加延迟会提高可靠性（我的用例使用 1500 毫秒，并且在新 URL 上错过了 <1% 的时间；当同时打开许多选项卡时，这种可靠性会恶化）。显然，这是使其工作的一种非常不精确的方法，但它是迄今为止我想出的最好的方法。

另一种可能的方法是从[http://www.google.com/s2/favicons?domain=somedomain.com](http://www.google.com/s2/favicons?domain=somedomain.com)中提取网站图标。我不太喜欢这种方法，因为它需要访问外部网络，依赖于无法保证启动的服务，并且本身有些不可靠；我已经看到它不一致地返回 www.domain.com URL 的“地球”图标，但只返回 domain.com 的正确图标。

希望这在某种程度上有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-01-17T15:34:10.897

为了在扩展中使用 chrome://favicon/some-site。manifest.json 需要更新：

```
"permissions": ["chrome://favicon/"],
"content_security_policy": "img-src chrome://favicon;" 
```

测试版本 63.0.3239.132（官方版本）（64 位）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-02T16:07:14.567

我检查了 Chrome 历史页面中的网站图标，发现了这个更简单的方法。您可以通过 --

```
favIconURL = "chrome://favicon/size/16@1x/" + tab.url; 
```

不要忘记将“权限”和“content_security_policy”添加到 Chrome。（[https://stackoverflow.com/a/48304708/9586876](https://stackoverflow.com/a/48304708/9586876)）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-11-02T04:27:38.973

在最新版本的 Chrome 中，`Version 78.0.3904.87 (Official Build) (64-bit)`) 测试时，添加`img-src chrome://favicon;`as`content_security_policy`仍会显示 2 个警告：

> `'content_security_policy'``'script-src'`:必须指定CSP 指令（显式或通过 隐式`'default-src'`）并且必须仅将安全资源列入白名单。

和：

> `'content_security_policy'``'object-src'`:必须指定CSP 指令（显式或通过 隐式`'default-src'`）并且必须仅将安全资源列入白名单。

要摆脱它们，请使用：

```
"permissions": ["chrome://favicon/"],
"content_security_policy": "script-src 'self'; object-src 'self'; img-src chrome://favicon;" 
```

现在您可以使用`chrome://favicon/http://example.com`而不会收到任何错误或警告。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-07-17T19:38:59.967

[截至 2020 年 10 月](https://chromium.googlesource.com/chromium/src.git/+/857c4ddd59fd29ed2ff02d67e55ec72008831298)，使用清单版本 3 的 chrome 扩展似乎不再能够访问`chrome://favicon/*`url。我还没有找到消息所指的“专用 API”。

> Manifest v3 和更高版本的扩展将无法访问 chrome://favicon 主机；相反，我们将提供专用的 API 权限和不同的 URL。这导致能够收紧我们对 chrome:-scheme 的权限。

# jquery - jquery 没有加载到 chrome 扩展中

> ID：10665324
> 
> 赞同：2
> 
> 时间：2012-05-19T12:48:20.553
> 
> 标签：jquery, google-chrome

我正在尝试将本地 jquery 文件加载到 chrome 扩展中。这就是我的 manifest.json 的样子：

```
{
  "name": "TV",
  "version": "0.1",
  "description": "Search",
  "icons": { "128": "icon.jpg" },
    "options_page": "options.html",
  "browser_action": {
    "default_title": "TV",
    "default_icon": "icon.jpg",
    "default_popup": "popup.html"
  },
  "permissions": [
    "http://*.thetvdb.com/*", "tabs"
  ],
"content_scripts": [ {
    "matches": [ "http://*/*", "https://*/*", "*://jquery.com/*"],
    "js": [ "jquery.js", "options.js" ]
  }]
} 
```

以及 options.js 中的函数：

```
function searchS(){
    console.log($)
} 
```

并返回我：未捕获的 ReferenceError：$ 未定义

有什么建议么？谢谢！

# iphone - 如何在 HTML 页面中查找某些单词

> ID：10665331
> 
> 赞同：0
> 
> 时间：2012-05-19T12:49:16.887
> 
> 标签：iphone, objective-c, ios, xcode

我对这段代码有疑问：

```
textRange = [[html lowercaseString] rangeOfString:[substring lowercaseString]]; 
```

我想在 HTML 页面中找到一些单词（子字符串）。使用这种方法，我可以找到在“子字符串”中定义的单词，但我只想找到作为要搜索的子字符串的整个单词，而不是任何任意（无限）出现的子字符串。所以我尝试了这种方法，但没有任何改变：

```
textRange = [html rangeOfString:substring options:NSLiteralSearch]; 
```

这是整个代码：

```
NSRange textRange;
textRange = [[html lowercaseString] rangeOfString:[substring lowercaseString]];
if (textRange.location != NSNotFound) {
    check++;
} else {
    // webView.hidden = NO;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:04:51.977

在模式的开头和结尾使用[`NSRegularExpression`](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)并包含`\b`以匹配单词边界。

# c# - For-Loop 在达到上限之前结束

> ID：10665334
> 
> 赞同：1
> 
> 时间：2012-05-19T12:49:30.487
> 
> 标签：c#, .net

出于某种原因，我无法理解我的 for 循环“破坏”了程序。

对于较低的值，它可以正常工作，中断点似乎是 45 秒（600 个位图），高于此值，并且循环只是存在并且函数甚至没有完成。

这是循环：

```
 public void GenBitmaps()
    {
        timespan = new TimeSpan(0, 0, 0, 40);
        int BitmapCount = (int)((timespan.Minutes * 60 + timespan.Seconds) * 1000 / ((double)timer1.Interval));
        bitmaps = new Bitmap[BitmapCount];

        double size = StartSize.Height;

        for (int i = 0; i < BitmapCount; i++)
        {
            this.Text = i.ToString() + " " + BitmapCount.ToString();
            bitmap = new Bitmap(StartSize.Width, (int)size);

            using (Graphics gfx = Graphics.FromImage(bitmap))
            {
                using (SolidBrush brush = new SolidBrush(Color.Red))
                {
                    gfx.FillRectangle(brush, 0, 0, bitmap.Width, bitmap.Height);
                }
            }
            bitmaps[i] = bitmap;
            size -= StartSize.Height / (float)BitmapCount;
        }          
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:37:48.833

我认为您的位图大小接近于零，并且在位图构建过程中引发了一些异常。尝试在 try/catch 中包装位图构造函数

# playframework-2.0 - 播放框架 2.0。用两部分构建网站的更好方法

> ID：10665335
> 
> 赞同：4
> 
> 时间：2012-05-19T12:49:35.493
> 
> 标签：playframework-2.0

我用 Play Framework 2.0 开始了一个小项目，我想知道创建两部分网站的更好方法是：admin 和 public？我只想通过 https 协议进行管理员访问。

我应该指定三个子项目：

*   领域模型项目
*   公共项目
*   管理项目

但即使在这种情况下，我也想知道如何仅通过 https 指定对管理部分的访问权限？或者这可以在一个项目中完成？

我刚刚发现了这个：[https](https://groups.google.com/group/play-framework/browse_thread/thread/d75cdb32d348dc0f/64838b04a452bfaf?lnk=raot) ://groups.google.com/group/play-framework/browse_thread/thread/d75cdb32d348dc0f/64838b04a452bfaf?lnk=raot这表示强制 HTTPS 某些页面不可用。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:37:41.777

要处理 HTTP 或 HTTPS 访问，您可以使用前端 HTTP 服务器。我为此使用了[Nginx](http://wiki.nginx.org/Main)。

然后，使用 Nginx（或[Lighthttpd](http://www.lighttpd.net/)），您可以使用此前端服务器来处理某些 url（例如：www.mydomain.com/secure/*）的 HTTPS 和其他的 HTTP。

对于管理员访问，您可以同时执行以下操作：两个独立的项目或单个项目。第一个解决方案更难维护，并且会引发一些关于共享缓存或会话的问题。

对于这两种解决方案，您都需要查看代理转发，因为您的 HTTP/HTTPS 请求将由您的前端服务器处理，然后转发到您的 Play 应用程序。播放文档详细[说明了如何为此配置 Lighthttpd](http://www.playframework.org/documentation/2.0.1/HTTPServer)。

# php - MySQL 仅在行不存在时才进行插入

> ID：10665336
> 
> 赞同：0
> 
> 时间：2012-05-19T12:49:36.597
> 
> 标签：php, mysql, sql

您好，我有一个简单的 SQL SELECT 和 INSERT，该站点帮助我解决了这个问题，但现在我需要制作它，以便它只插入不存在的行。

因此，如果该行在那里，则跳到下一个。我有它，所以当用户达到 100 场战斗时，它会给他们奖励，但当然，如果它继续插入，他们会因为进行相同的 100 场战斗而获得 100 次奖励。所以需要一些如何检查用户是否获得了奖励然后如果没有给他们呢？

```
// Get all the data from the "example" table
$result = mysql_query("SELECT * FROM users where wins >= 100") 
or die(mysql_error());  

$reward = '100 battles won' ;
$rewardimage = 'chnage after' ;
echo "<table border='1'>";
echo "<tr> <th>username</th> <th>wins</th> </tr>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array( $result )) {
    // Print out the contents of each row into a table

mysql_query("INSERT INTO User_Rewards 
(username, reward_name, reward_image) VALUES('".$row['username']."', '".$reward."', '".$rewardimage."' ) ") 
or die(mysql_error());  

} 
```

我该怎么做呢？因为目前它只是继续插入但需要它，所以如果用户有奖励，那么不要为该用户进行插入。奖励存储在 $reward 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T12:51:31.890

您正在寻找的是**`UNIQUE KEY`**结合[**INSERT ... ON DUPLICATE KEY UPDATE**](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)。

`mysql_*`另外，请停止使用古老的功能编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个相当不错的 PDO 相关教程](http://goo.gl/vFWnC)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:02:49.513

```
while($row = mysql_fetch_array( $result )) {
    if(mysql_num_rows(mysql_query("select * from User_Resards where username='".$row['username']."' ")) == 0) {
        mysql_query("INSERT INTO User_Rewards (username, reward_name, reward_image) VALUES('".$row['username']."', '".$reward."', '".$rewardimage."' ) ") or die(mysql_error());    
    }
} 
```

你可以试试这个。

# c - C中的结构数组初始化

> ID：10665339
> 
> 赞同：2
> 
> 时间：2012-05-19T12:50:06.367
> 
> 标签：c, arrays, struct, initialization

这是我的代码的一部分。我只想初始化`arraylist[0]`as`arraylist[0].x = 0`和`arraylist[0].y = 0`. 我不需要初始化结构数组的其余部分。我该怎么做？谢谢你。

```
#include <stdio.h>
struct example {
    int x;
    int y;
};
struct example arraylist[40];

int main(int argc, char *argv[]){
    printf("%d\n %d\n", arraylist[0].x, arraylist[0].y);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T12:56:17.043

You can initialise any particular element of the struct array.

For example:

```
struct example arraylist[40] = { [0]={0,0}}; //sets 0th element of struct

struct example arraylist[40] = { [5]={0,0}}; //sets 6th element of struct 
```

This is called [Designated Initializers](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html) which used to be a GNU extension before C99 adapted it and is also supported in standard C since C99.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T12:55:36.320

Since you are talking about a variable in file scope, here, you don't have to do anything, since such variables are always initialized by `0` if you don't provide an explicit initializer.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T12:55:17.193

In C *all* static and extern variables are initialized to 0 unless explicitly initialized otherwise.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T12:52:41.320

在 C 中，一旦你初始化了一个结构/数组的一部分，你就用 0 来初始化它的其余部分。

你应该没有问题，因为你不应该首先访问未初始化的变量，并且它们的值没有定义。

# java - Console() 中的 java.lang.System 错误

> ID：10665343
> 
> 赞同：1
> 
> 时间：2012-05-19T12:50:31.350
> 
> 标签：java

```
public class ABC{
    public static void main(string... as)
    {
        char i;
        i = System.console().readLine("Hi ");
        System.out.println(i);
    }
} 
```

我在这段代码中遇到错误。

错误是：- 在 java.lang.System 中找不到 console()。

如果我输入一些常量，那么代码就可以正常工作。

请帮帮我。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T12:57:09.707

使用可用的[扫描仪](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)类。

下面是示例

```
import java.util.Scanner;

public class ScannerDemo {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        //
        // Read string input for username
        //
        System.out.print("Username: ");
        String username = scanner.nextLine();

        //
        // Read string input for password
        //
        System.out.print("Password: ");
        String password = scanner.nextLine();

        //
        // Read an integer input for another challenge
        //
        System.out.print("What is 2 + 2: ");
        int result = scanner.nextInt();

        if (username.equals("admin") 
                && password.equals("secret") && result == 4) {
            System.out.println("Welcome to Java Application");
        } else {
            System.out.println("Invalid username or password, " +
                    "access denied!");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T12:51:25.650

您没有可用的控制台（并非在所有环境中都可用），所以不要使用它。相反，为什么不使用[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)对象？有关这方面的更多信息，请查看[扫描仪教程](http://docs.oracle.com/javase/tutorial/essential/io/scanning.html)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-19T12:55:40.703

使用`java.util.Scanner`或 InputStreamReader。

```
 Scanner sc=new Scanner(System.in);
   sc.nextLine(); 
```

或者

```
 BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
   br.readLine() 
```

# linq - FluentValidation for WP7 - 验证简单类型 （字符串）

> ID：10665352
> 
> 赞同：2
> 
> 时间：2012-05-19T12:52:02.013
> 
> 标签：linq, windows-phone-7, fluentvalidation

我有以下问题，我试图在 Windows Phone 中使用[FluentValidation](http://fluentvalidation.codeplex.com/)来验证字符串是否是有效的用户名。

我遇到的问题是验证器值具有`string`必须测试的类型。在所有示例中，我发现它总是像这样被测试的对象的属性`RuleFor(customer => customer.Surname).NotEmpty();`

当我运行此代码时，出现以下错误

代码：

```
public class UsernameValidator : AbstractValidator<string>
{
    public UsernameValidator()
    {
        RuleFor(username => username).NotNull().NotEmpty().WithMessage("Enter a username");
        RuleFor(username => username).Matches("^[a-zA-Z0-9_]*$").WithMessage("Only letters and numbers");
        RuleFor(username => username).Length(3, 30).WithMessage("Minimum length is 3");
    }
} 
```

错误：

```
FluentValidation for WP7 can only be used with expressions that reference public properties, ie x => x.SomeProperty
   at FluentValidation.Internal.Extensions.CompilePropertyGetterExpression(LambdaExpression expression, Type delegateType)
   at FluentValidation.Internal.Extensions.Compile[TDelegate](Expression`1 expression)
   at FluentValidation.Internal.PropertyRule`1.Create[TProperty](Expression`1 expression, Func`1 cascadeModeThunk)
   at FluentValidation.AbstractValidator`1.RuleFor[TProperty](Expression`1 expression)
   at WorldChat.ViewModels.Validators.UsernameValidator..ctor()
   at WorldChat.ViewModels.RegisterViewModel.get_ErrorUsername()
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
   at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
   at System.Reflection.RuntimePropertyInfo.InternalGetValue(PropertyInfo thisProperty, Object obj, Object[] index, StackCrawlMark& stackMark)
   at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, Object[] index)
   at System.Windows.CLRPropertyListener.get_Value()
   at System.Windows.PropertyAccessPathStep.ConnectToPropertyInSource(Boolean isSourceCollectionViewCurrentItem)
   at System.Windows.PropertyAccessPathStep.ConnectToProperty()
   at System.Windows.PropertyAccessPathStep.ReConnect(Object newSource)
   at System.Windows.PropertyPathListener.ReConnect(Object source)
   at System.Windows.Data.BindingExpression.SourceAcquired()
   at System.Windows.Data.BindingExpression.System.Windows.IDataContextChangedListener.OnDataContextChanged(Object sender, DataContextChangedEventArgs e)
   at System.Windows.Data.BindingExpression.DataContextChanged(Object sender, DataContextChangedEventArgs e)
   at System.Windows.FrameworkElement.OnDataContextChanged(DataContextChangedEventArgs e)
   at System.Windows.FrameworkElement.OnAncestorDataContextChanged(DataContextChangedEventArgs e)
   at System.Windows.FrameworkElement.NotifyDataContextChanged(DataContextChangedEventArgs e)
   at System.Windows.FrameworkElement.OnAncestorDataContextChanged(DataContextChangedEventArgs e)
   at System.Windows.FrameworkElement.NotifyDataContextChanged(DataContextChangedEventArgs e)
   at System.Windows.FrameworkElement.OnTreeParentUpdated(DependencyObject newParent, Boolean bIsNewParentAlive)
   at System.Windows.DependencyObject.UpdateTreeParent(IManagedPeer oldParent, IManagedPeer newParent, Boolean bIsNewParentAlive, Boolean keepReferenceToParent)
   at MS.Internal.FrameworkCallbacks.ManagedPeerTreeUpdate(IntPtr oldParentElement, IntPtr parentElement, IntPtr childElement, Byte bIsParentAlive, Byte bKeepReferenceToParent, Byte bCanCreateParent)
   at MS.Internal.XcpImports.MeasureNative(IntPtr element, Single inWidth, Single inHeight)
   at MS.Internal.XcpImports.UIElement_Measure(UIElement element, Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at System.Windows.Controls.ScrollViewer.MeasureOverride(Size constraint)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight)
   at MS.Internal.XcpImports.MeasureOverrideNative(IntPtr element, Single inWidth, Single inHeight, Single& outWidth, Single& outHeight)
   at MS.Internal.XcpImports.FrameworkElement_MeasureOverride(FrameworkElement element, Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight)
   at MS.Internal.XcpImports.MeasureOverrideNative(IntPtr element, Single inWidth, Single inHeight, Single& outWidth, Single& outHeight)
   at MS.Internal.XcpImports.FrameworkElement_MeasureOverride(FrameworkElement element, Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(Size availableSize)
   at Microsoft.Phone.Controls.PhoneApplicationFrame.MeasureOverride(Size availableSize)
   at System.Windows.FrameworkElement.MeasureOverride(IntPtr nativeTarget, Double inWidth, Double inHeight, Double& outWidth, Double& outHeight) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:58:33.527

我找到了一个解决方法，它需要你有一个额外的字符串包装类。

验证字符串.cs

```
public class ValidationString
{
    public string value { get; set; }

    public ValidationString(string value)
    {
        this.value = value;
    }
} 
```

在用户名验证器类中，我添加了一个静态方法 IsUsername

```
public class UsernameValidator : AbstractValidator<ValidationString>
{
    public UsernameValidator()
    {
        RuleFor(username => username.value).NotNull().NotEmpty().WithMessage("Enter a username");
        RuleFor(username => username.value).Matches("^[a-zA-Z0-9_]*$").WithMessage("Only letters and numbers");
        RuleFor(username => username.value).Length(3, 30).WithMessage("Minimum length is 3");
    }

    internal static bool IsUsername(string value)
    {
        return new UsernameValidator().Validate(new ValidationString(value)).IsValid;
    }
} 
```

现在我既可以在字符串上使用这个 UsernameValidator，也可以在另一个验证器上使用它，例如注册验证器

```
public class RegisterValidator : AbstractValidator<User>
{
    public RegisterValidator()
    {
        RuleFor(user => user.Username).Must(UsernameValidator.IsUsername);
        // some more rules
    }
} 
```

如果您不想在其他验证类中使用您的 UsernameValidator，您可以忽略该`IsUsername`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T13:00:32.230

创建一个只有成员是要测试的东西的虚拟类怎么样？（好吧，为每种类型的数据说一个成员）：

```
public class ForYourTestsOnly
{
    public string MyString { get; set;}
    public int MyInt32 { get; set;}
    //And so on...
} 
```

接着 ：

```
RuleFor(test => test.MyString) 
```

（我承认我对 FluentValidation 一无所知，但如果它是让它工作的唯一方法，我想我会朝那个方向搜索......）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T07:48:16.370

问题与

```
RuleFor(username => username) 
```

是 Fluent Validation 无法提取属性名称。Fluent Validation 期望验证属性，因此它尝试从`RuleFor()`参数中的表达式树中提取属性名称。由于您的表达式未提及属性，因此失败。

您可以通过显式指定属性来禁止 FV 尝试这样做。即使该属性不存在，这也有效，因为据我所知，FV 只需要它来报告验证错误。

所以以下对我有用，**没有**额外的`ValidationString`包装类：

```
public class StringNotEmptyValidator : AbstractValidator<string>
{
    public StringNotEmptyValidator()
    {
        RuleFor(str => str).NotEmpty().OverridePropertyName("StringValue");
    }
} 
```

这是验证字符串不为空的示例。对于您的用户名验证案例，验证器看起来像这样（我没有对此进行测试，但概念是相同的）：

```
public class UsernameValidator : AbstractValidator<string>
{
    public UsernameValidator()
    {
        RuleFor(username => username).NotNull().NotEmpty().WithMessage("Enter a username").OverridePropertyName("UsernameValue");
        RuleFor(username => username).Matches("^[a-zA-Z0-9_]*$").WithMessage("Only letters and numbers").OverridePropertyName("UsernameValue");
        RuleFor(username => username).Length(3, 30).WithMessage("Minimum length is 3").OverridePropertyName("UsernameValue");
    }
} 
```

# xpages - 如何按查找列对视图控件进行排序

> ID：10665355
> 
> 赞同：1
> 
> 时间：2012-05-19T12:52:34.543
> 
> 标签：xpages

我有两个相关的表单，我会将它们组合在一个视图控件中。没那么难。这适用于“一对多”类型的场景。

假设我有一个包含 customerID 和 Customer Name 列的客户视图。然后我有一个视图显示具有 masterCustomerID、orderNumber、orderDate 列的“许多”文档。

在 XPage 上，我创建了许多文档的视图控件，并添加了 masterCustomerID、orderNumber、orderDate 列。然后我在前面添加一列来执行 DbLookup 以获取客户的实际姓名。真的没有什么太花哨的。

我的问题是，在这种情况下，查找列是第一列。按该列对视图列进行排序的策略是什么。默认情况下，它将按顺序视图中的键值排序，这可能与名称值不同。

如果这样更容易，我不反对使用重复控件。

我的第一个想法是以某种方式使用 TreeMaps，但我不知道在可能有很多文档的情况下这是否实用。也许我错过了什么......

任何意见，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:47:37.687

使用具有（客户名称、客户 ID）结构的视图作为主视图。然后根据客户 ID 通过从具有结构的视图（客户 ID、订单 ID、订单日期）中查找来填充其他列。因此它是 1:N 关系，您不能使用单个视图组件，但是两个嵌套的 - 在视图列中重复就可以了。

我希望您了解性能影响（为每个客户行查找订单），因此不要试图一次显示太多客户。

# c - C 中的模式匹配，替代 pcre

> ID：10665356
> 
> 赞同：3
> 
> 时间：2012-05-19T12:52:38.363
> 
> 标签：c, pcre

我正在尝试编写一个 C 代码，它将在邮件中找到超链接并替换它们。使用 pcre 库是一件好事吗？据称，由于 pcre 太慢了，还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:29:50.080

C 是我选择这样做的*最后一种语言。*首先，如果您想以高精度执行此操作 - 使用 MIME 解析器来获取 HTML 正文。Java 有 mime4j，Perl 有 MIME::Parser，Python 有电子邮件等等。这并不难，如果你愿意，我愿意用这些语言中的任何一种来帮助完成这一步。其次，使用 HTML 解析器来隔离链接。

如果你对一些错误没意见，那么只需用 Perl 或 PHP 编写一个单行程序。甚至 sed。真的。如果要替换为固定 URL，请使用 sed。如果您正在修改 URL，则无法按原样工作的唯一原因是您可能必须对其进行 url_encode，P 语言可以在一行中处理它。

# c# - 如何在编辑表单视图时将绑定数据从 aspx 类传递到 cs 类而不将其暴露给用户？

> ID：10665357
> 
> 赞同：1
> 
> 时间：2012-05-19T12:52:40.330
> 
> 标签：c#, asp.net, webforms

我有一个连接到 objectDataSource 的 formview。

这是表单视图的“EditItemTemplate”中的一个非常简单的代码，在 .aspx 类中实现：

```
<EditItemTemplate>
    Var1: <asp:TextBox ID="txtVar1" runat="server" Text='<%# Bind("var1") %>'  />
    Var2: <asp:TextBox ID="txtVar2" runat="server" Text='<%# Bind("var2") %>'  />
    <asp:Button ID="btnSave" runat="server" Text="Save" OnClick="ButtonSave_Click" />
</EditItemTemplate> 
```

当按下“保存”时，“var1”和“var2”的数据与对象一起传递到下一个更新方法，该方法在业务逻辑类中实现：

```
[System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, true)]
public void UpdateMyObject(MyObject updatedObject)
{
    if (updatedObject.EntityState == EntityState.Detached)
            mContext.MyObjects.Attach(updatedObject);
        mContext.ObjectStateManager.ChangeObjectState(updatedObject, System.Data.EntityState.Modified);
        int numberOfAffectedRows = mContext.SaveChanges();
        if (numberOfAffectedRows == 0)
            throw new DataNotUpdatedException("No object updated!");
} 
```

问题是我需要将第三个变量从 aspx 传递给业务逻辑，而不是通过文本框将其暴露给用户。它是一个 Guid，无需更改它。使用当前代码，分配给“updatedObject”的 Guid 只是零，而不是对象的原始 Guid，如果我使用 <%# Bind( "entryGuid") %>。

所以，我的问题是如何将这个 Guid（或任何其他变量）传递给业务逻辑层，而不需要公开它？有没有一种优雅的方法可以不通过文本框将数据绑定到更新的对象？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:06:10.870

我认为您正在寻找 input type="hidden"

这将隐藏用户的输入，并将在回帖中可用。如果他们“查看代码”，用户将能够看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T13:13:52.457

由于@tzerb 的回答遗漏了一个例子，我想我会提供一个。

```
<EditItemTemplate> 
    Var1: <asp:TextBox ID="txtVar1" runat="server" Text='<%# Bind("var1") %>'  /> 
    Var2: <asp:TextBox ID="txtVar2" runat="server" Text='<%# Bind("var2") %>'  /> 
    Var3: <asp:HiddenField id="hdnVar3" runat="server" Value='<%# Bind("var3") %>' />
    <asp:Button ID="btnSave" runat="server" Text="Save" OnClick="ButtonSave_Click" /> 
</EditItemTemplate> 
```

# asp.net-mvc - 如何将数据绑定到asp.net mvc3中的标签

> ID：10665359
> 
> 赞同：0
> 
> 时间：2012-05-19T12:52:49.677
> 
> 标签：asp.net-mvc

我有三个模型类（代码优先）

ProductGroup(p)->product(c)(produGroups 列表在创建新产品时出现在下拉列表中),

现在我的要求是，

产品（p）->首选位置（c），当我选择首选位置（创建操作）链接时，我必须填写特定产品的详细信息。意味着首先我需要在标签中显示单个产品名称，如产品：芒果

在控制器中

```
 public ActionResult  PreferedLocation()
    {
        ViewBag.ProductID = new  SelectList(db.Products,"ProductID","Name");
       //ViewBag.CountryID = new SelectList(db.Countries, "CountryID", "Name");
        return View();

    }

    //
    // POST: /PreferedLocation/Create

    [HttpPost]
    public ActionResult PreferedLocation(PreferredLocation preferredlocation)
    {
        if (ModelState.IsValid)
        {
            db.PreferredLocations.Add(preferredlocation);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        // ViewBag.ProductID = new SelectList(db.Products, "ProductID", "Name", preferredlocation.ProductID);

        return View(preferredlocation);
    } 
```

在视图中：

```
 <div class="editor-field">
        <%: Html.EditorFor(model => model.Name) %>

        <%: Html.ValidationMessageFor(model => model.Name) %>
    </div>

    <div class="editor-label">
        <%: Html.LabelFor(model => model.StreetAdress) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.StreetAdress) %>
        <%: Html.ValidationMessageFor(model => model.StreetAdress) %>
    </div>

    <div class="editor-label">
        <%: Html.LabelFor(model => model.Description) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.Description) %>
        <%: Html.ValidationMessageFor(model => model.Description) %>
    </div>

    <div class="editor-label">
        <%: Html.LabelFor(model => model.Latitude) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.Latitude) %>
        <%: Html.ValidationMessageFor(model => model.Latitude) %>
    </div>

            <div class="display-label">product</div>
<div class="display-field">
    <%: Html.LabelFor(model=>Model.Product.Name) %>
    <%: Html.ValidationMessageFor(model => model.ProductID) %>
</div> 
```

在这里，我尝试了在标签中显示产品名称的代码，但我得到的输出不是产品名称

产品

产品名称。

我必须做哪些修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:58:48.517

Use DisplayFor instead of LabelFor.

# rest - Vala Rest OAuthProxy：未定义的引用错误

> ID：10665361
> 
> 赞同：1
> 
> 时间：2012-05-19T12:53:04.660
> 
> 标签：rest, oauth, twitter-oauth, vala

我正在尝试用 Vala 制作一个简单的 Twitter 应用程序。我正在使用 Vala Rest 绑定（librest-dev v0.7）。一切正常，直到我尝试初始化一个`OAuthProxyCall`，此时我从 vala 编译器得到这个 C 错误：

```
someone@someone-UBook:~/workspace/vala/twitter$ valac --pkg rest-0.7 TwitterAuthTest.vala -o authtest
/home/someone/workspace/vala/twitter/TwitterAuthTest.vala.c: In function ‘twitter_auth_test_main’:
/home/someone/workspace/vala/twitter/TwitterAuthTest.vala.c:206:10: warning: assignment makes pointer from integer without a cast [enabled by default]
/tmp/ccEzeuFy.o: In function `twitter_auth_test_main':
TwitterAuthTest.vala.c:(.text+0x4a8): undefined reference to `oauth_proxy_call_new'
collect2: ld returned 1 exit status
error: cc exited with status 256
Compilation failed: 1 error(s), 0 warning(s) 
```

这是我尽可能简单的代码：

```
using Rest;

public class TwitterAuthTest {
    private static const string CONSUMER_KEY = "XXXXXXXXXXXXXXXXXXXXXX";
    private static const string CONSUMER_SECRET = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX";
    private static const string URL_FORMAT = "https://api.twitter.com";
    private static const string REQUEST_TOKEN_URL = "https://api.twitter.com/oauth/request_token";

    private static const string FUNCTION_ACCESS_TOKEN = "oauth/access_token";
    private static const string FUNCTION_STATUSES_UPDATE = "statuses/update.xml";

    private static const string PARAM_STATUS = "status";

    public static int main(string[] args) {
        // initialize proxy
        var proxy = new OAuthProxy(CONSUMER_KEY, CONSUMER_SECRET, URL_FORMAT, false); // false = url doesn't require expansion

        // request token
        try {
            proxy.request_token("oauth/request_token", "oob");
        } catch (Error e) {
            stderr.printf("Couldn't get request token: %s\n", e.message);
        }

        // prompt user for pin
        stdout.printf("Go to http://twitter.com/oauth/authorize?oauth_token=%s then enter the PIN\n", proxy.get_token());
        string pin = stdin.read_line(); //3001930

        // access token
        try { proxy.access_token(FUNCTION_ACCESS_TOKEN, pin); }
        catch (Error e) {
            stderr.printf("Couldn't get access token: %s\n", e.message);
        }

        // setup call
        OAuthProxyCall call = new OAuthProxyCall();
        call.set_function(FUNCTION_STATUSES_UPDATE);
        call.add_param(PARAM_STATUS, "Hello from librest!");
        try { call.sync(); } catch (Error e) {
            stderr.printf("Cannot make call: %s\n", e.message);
        }

        return 0;
    }
} 
```

我对 REST/OAUTH 完全不熟悉——我需要如何设置我的 OAuthProxyCall 才能正确编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:41:33.193

显然，ProxyCall 没有构造函数。`//setup call`我将该部分的第一行更改为，`ProxyCall call = proxy.new_call();`而不是，`OAuthProxyCall call = new OAuthProxyCall();`这似乎已经摆脱了错误。尽管 Twitter 仍在对我大喊大叫，但它现在可以编译了。

**更新：**这是正确的代码（[带有语法突出显示的版本](http://pastebin.com/yYeNGGWG)）：

```
using Rest;

public class SimpleTweet {
    private static const string CONSUMER_KEY = "#######################"; // this comes from your app's twitter account page
    private static const string CONSUMER_SECRET = "########################################"; // this comes from your app's twitter account page
    private static const string URL_FORMAT = "https://api.twitter.com";
    private static const string REQUEST_TOKEN_URL = "https://api.twitter.com/oauth/request_token";

    private static const string FUNCTION_ACCESS_TOKEN = "oauth/access_token";
    private static const string FUNCTION_STATUSES_UPDATE = "1/statuses/update.xml";

    private static const string PARAM_STATUS = "status";

    public static int main(string[] args) {
        // make sure there is a message to tweet
        if(args[1] == null || args[1] == "") {
            stdout.printf("No tweet message specified.\n");
            return 0;
        }

        /** Authenticating with Twitter */
        // initialize proxy
        var proxy = new OAuthProxy(CONSUMER_KEY, CONSUMER_SECRET, URL_FORMAT, false);

        // request token
        try {
            proxy.request_token("oauth/request_token", "oob");
        } catch (Error e) {
            stderr.printf("Couldn't get request token: %s\n", e.message);
            return 1;
        }

        // prompt user for pin
        stdout.printf("Go to http://twitter.com/oauth/authorize?oauth_token=%s then enter the PIN\n", proxy.get_token());
        string pin = stdin.read_line();

        // access token
        try { proxy.access_token(FUNCTION_ACCESS_TOKEN, pin); }
        catch (Error e) {
            stderr.printf("Couldn't get access token: %s\n", e.message);
            return 1;
        }

        /** sending the tweet */
        // setup call
        ProxyCall call = proxy.new_call();
        call.set_function(FUNCTION_STATUSES_UPDATE);
        call.set_method("POST");
        call.add_param(PARAM_STATUS, args[1]);
        try { call.sync(); } catch (Error e) {
            stderr.printf("Cannot make call: %s\n", e.message);
            return 1;
        }

        // print success
        stdout.printf("Tweet succeeded!\n");

        return 0;
    }
} 
```

# delphi - How to click the Chrome Mic button from Javascript in Delphi 6 app, or at least find the button and get its Windows screen coordinates?

> ID：10665367
> 
> 赞同：4
> 
> 时间：2012-05-19T12:54:38.817
> 
> 标签：delphi, google-chrome, speech-recognition, tchromium

I have a Delphi 6 app that embeds the Chromium web browser. I want to click the Chrome microphone button (speech input control) from Javascript. I tried the usual method of calling the button's click() handler, but nothing happened. Below is the HTML I tried with the first input element being the Chrome speech input control and the second input element being a checkbox that when checked, finds the speech input control and calls its click() handler:

```
<input name="speechInput1" id="speechInput1" size=64 type="text" x-webkit-speech />
<input type="checkbox" onClick="document.getElementById('speechInput1').click();">Check the box to simulate a button click 
```

Is there a way to click the speech input controls microphone button from Javascript? I found another post on Stack Overflow similar to my question but there were no solutions:

[Automate speech input recording in Chrome](https://stackoverflow.com/questions/7751146/automate-speech-input-recording-in-chrome)

If not, is there a way to determine from my Delphi 6 app the location of the button in Windows screen coordinates so I can move the mouse over it and click it?

I know about AutoIt from this Stack Overflow post:

[Send click to google's chrome input html tag](https://stackoverflow.com/questions/8904978/send-click-to-googles-chrome-input-html-tag)

But I want to handle the mouse click myself instead of asking my users to download and set up AutoIt.

I also want to ask if anybody knows if it is possible to call the services made available to Chrome extensions via Javascript. If that were possible, I could call the startSpeechInput() method the speech input control exposes to extensions.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T14:41:31.193

由于. [`Chromium Embedded`](http://code.google.com/p/chromiumembedded/)_ [`this issue`](http://code.google.com/p/chromiumembedded/issues/detail?id=282)您可以通过导航到此站点来验证语音输入支持：

[`http://blogs.sitepointstatic.com/examples/tech/speech-input/index.html`](http://blogs.sitepointstatic.com/examples/tech/speech-input/index.html)

我得到了[`this version`](http://code.google.com/p/delphichromiumembedded/downloads/detail?name=dcef-r306.7z&can=2&q=)Chromium 的以下结果（此时最新的）：

![在此处输入图像描述](../Images/b97ae10f84718cc34f3748764d726c2b.png)

# design-patterns - Design patterns on programming to make white-box testing easier?

> ID：10665368
> 
> 赞同：2
> 
> 时间：2012-05-19T12:54:47.163
> 
> 标签：design-patterns, testing, qa, white-box-testing

I am wondering whether there are some design patterns on programming to make programs easier for white-box testing. I am not talking about Unit Test, but higher level testing, such as white-box based functional testing, system testing or some boundary testing.

For example:

1.  For GUI based program, we can reserve a hidden switch to read inputs from a text file instead of GUI.

2.  For some HTTP based C/S application, providing a parameter to disable the gzip option during package transmit which make it easier to use Fiddler to change the HTTP package.

Any other patterns or principles?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:26:38.253

我不知道我是否完全明白你的问题，但是：

## 想想你的测试策略

换句话说，你必须知道你在什么场景下测试什么（整个系统，只是这个模块/类/函数/什么等等）（当我给它无效输入时，当用户这样做然后那样，等）以及为什么该测试足够重要以供考虑（这是一种常见用途，它测试边界条件等）。

[我认为维基百科关于软件测试](http://en.wikipedia.org/wiki/Software_testing)的文章中的“测试方法”和“测试级别”部分可能会帮助您推断出您想要什么样的测试。

## 测试仍然是代码

您应该使您的测试保持与您的应用程序代码相同的工程质量水平。在这方面，应用所有可以帮助您解决问题的模式，但仅此而已！

## 按原样使用构建

我个人认为，出于多种原因，仅为测试而创建秘密戳洞是一个坏主意。仅举几个：

*   他们可能无法以微妙的方式可靠地再现假定的交互。“测试快捷方式”可能不会像普通用户那样触发完全相同的事情。每次提交对代码和测试的更改时，您必须非常 100% 确定您正在绕过什么（及其影响）。

*   测试需要好的设计。如果测试某些东西让您感到痛苦，您是否考虑过质疑您的设计？测试某些东西只是以脚本的方式使用它。使用您的产品不应该是痛苦的。（然而，测试的脚本在某些环境中可能会很痛苦。是的，我知道。）对于单元测试尤其如此。

*   总有一些不经意的程序员可能会认为将测试快捷方式转变为实际、合法、正常的用例是个好主意。这有一切都可以南下，特别是如果他假设那段代码和其他代码一样经过深思熟虑（通常不是）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:18:45.287

我发现的白盒测试最有用的领域之一是多线程问题的极端情况。只有压力测试+祈祷，或者您尝试通过添加延迟和信号量来覆盖测试以让事情发生。

但我怀疑是否存在测试用例模式。模式只对非常精确定义的情况有用。只要记住 Gamma 对原始模式书的编码有多接近。

其他一切都只是讲故事，分享经验很重要，但不是模式。

# javascript - 使用 JavaScript 在客户端访问 MongoDB

> ID：10665371
> 
> 赞同：8
> 
> 时间：2012-05-19T12:55:19.737
> 
> 标签：javascript, mongodb

我知道这样做是完全不安全的，因为用户可以控制凭据。但是在我正在构建的应用程序中，我并不在乎它完全不安全。

有没有办法使用客户端 JavaScript 在 MongoDb 上打开连接？Mongo 网站上的 JavaScript 驱动程序仅用于 NodeJS。

谢谢，

弗雷德_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:24:55.273

看看 mongodb [http 接口列表](http://www.mongodb.org/display/DOCS/Http+Interface)。启动 mongodb，启动服务器，使用 ajax 从该服务器请求/修改数据。

# java - 具有实时传感器更新的 android listview

> ID：10665380
> 
> 赞同：3
> 
> 时间：2012-05-19T12:56:01.937
> 
> 标签：java, android, eclipse, listactivity, listadapter

我正在开发一个在列表视图中显示某些地方的应用程序。在每个列表视图项目中，都有一个指向该地点（酒店、酒吧等）的箭头。

问题是我不知道如何有效地更新这个箭头，而不是在本地兑现视图（根据谷歌 I/O 视频，这是我永远不应该做的事情）。

每次手机方向传感器事件都需要更新箭头，每秒更新多次。

那么有比在每个事件上调用 notifyDataSetChanged() 并重新填写每个列表项数据更好的方法吗？

**更新**（对于@dharan 和任何感兴趣的人）：

我已经停止了这个项目的工作，因为我现在有一份全职工作，但我想到了一个解决方案（未实现/未经测试）。

首先将旋转角度限制为固定步长，（例如：5、10、15、20、... 355、360）然后缓存每个旋转角度的旋转图像，以避免昂贵的图像旋转计算（但在更高的内存成本）。

之后，我会让我的 getView() 方法知道何时只更新图像而不是所有数据。就我而言，这很简单：

```
public View getView(int position, View convertView, ViewGroup parent) {
     if (convertView != null && place[position].id == (Integer)convertView.getTag()){
         //the place information is already set correctly so just update the image
     }
     ...
} 
```

在这些修改之后，我相信调用 notifyDataSetChanged() 不会导致严重的性能问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T19:29:44.340

如果您在 ListView 中没有太多项目，您可以转换为使用普通的 LinearLayout 并单独控制这些项目。LinearLayout 的问题是，如果一个项目改变了它的大小，那么所有的东西（即所有的孩子）都必须被转发出去。因此，触发一项更改也可以重新触发其他内容以进行布局。现在，因为您要更换指南针，您可能可以绕过它，因为这不会导致每一行都改变其整体尺寸。您只需要重新绘制该项目。

The other option is to write your own layout that takes some short cuts making some assumptions the general purpose layout managers can't. The last thing I might look at is what does notifyDataSetChanged() does under the covers. You might be able to extend ListView and write a method that only redraws the row that changed (of course this assumes the height of the row hasn't changed). If the row height changes then everything after that row has to be relayed out.

# java - Java 代码无法创建代理 (JADE)

> ID：10665383
> 
> 赞同：2
> 
> 时间：2012-05-19T12:56:17.647
> 
> 标签：java, agents-jade

我有这个简单的java代码：

```
public class AnAgent extends Agent 
{
    protected void setup()
    {
         System.out.println("Hello "+getAID().getName()+". I am ready. You?");
    }
} 
```

我阅读[https://wrjih.wordpress.com/2008/11/29/running-jade-under-eclipse/](https://wrjih.wordpress.com/2008/11/29/running-jade-under-eclipse/)将 JADE 集成到 Eclipse 中。我跟着每一步。

![在此处输入图像描述](../Images/420d1b569b0c00b025ed1e6d04b7fa5f.png)

![在此处输入图像描述](../Images/96b1bdc0ee29cdd4b58bc941053673bb.png)

但它给了我

![在此处输入图像描述](../Images/812b2e814fcebe33250dc6138bfd480c.png)

我的错误在哪里？为什么我没有看到我的经纪人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T14:08:40.730

**已解决的问题**

在第二张图片中，在`Arguments`选项卡中，您必须编写：

```
-gui Agent1:AnAgent 
```

代替

```
-gui jade.Boot Agent1:AnAgent.java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T19:39:03.210

错误是当您编写代理类时，您只编写代理类，正确的方法是编写完整类，因此假设您在包测试中有代理类 AnAgent，您应该编写如下 args

```
-gui agent1:test.ِِِِAnAgent 
```

# java - Android：将 PreferenceFragment 与其他小部件组合在单一布局中

> ID：10665384
> 
> 赞同：0
> 
> 时间：2012-05-19T12:56:19.767
> 
> 标签：java, android, android-preferences, preferenceactivity

我正在尝试`Activity`在剩余空间中仅显示几个（或一个）首选项和更多小部件。我很难弄清楚如何做到这一点。

在**/res/xml/preferences_1.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <CheckBoxPreference 
        android:key="test" 
        android:title="test" 
        android:defaultValue="false" />
</PreferenceScreen> 
```

我想包含一个 ui 来编辑这个单一首选项的活动的布局： **/res/layout/test.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <fragment
        android:name="com.test.something.TestActivity$PrefsFragment"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

    <View ... stuff ... />
</LinearLayout> 
```

和`Activity`：

```
public class TestActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    public static class PrefsFragment extends PreferenceFragment {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            // Load the preferences from XML resource
            this.addPreferencesFromResource(R.xml.preference_login);
        };
    }
} 
```

这应该说明我想要实现的目标：让`<fragment>`显示`PreferenceFragment`和下方仍然有一个（或一些）小部件。

可悲的是，这并没有像我希望的那样工作。相反，它在打开活动时抛出。堆栈跟踪的相关部分似乎是：

> E/AndroidRuntime(12584): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test.something/com.test.something.TestActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class分段

有人可以告诉我这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:15:03.190

啊！后来在堆栈跟踪中，实际上有一条更有帮助的消息。`<fragment>`缺少一个`android:id`属性。

# jsf-2 - 如何在 bean 的操作方法中收集 UIData 组件内的 UIInput 组件的值？

> ID：10665385
> 
> 赞同：2
> 
> 时间：2012-05-19T12:56:31.717
> 
> 标签：jsf-2, datatable, richfaces

我试图在 bean 的操作方法期间收集`UIInput`组件内的`UIData`组件值，以验证重复值。我试图将`UIInput`组件绑定到一个 bean 属性并获取它的值，但它会打印`null`. 如果我将它放在数据表之外，那么它会打印预期值。数据表有问题吗？

```
<rich:dataTable binding="#{bean.table}" value="#{bean.data}" var="item">
    <h:column>
        <f:facet name="header">
            <h:outputText value="Field1" />
        </f:facet>
        <h:inputText binding="#{bean.input}" value="#{item.field1}" />
    </h:column>
</rich:dataTable> 
```

这是支持 bean 的代码：

```
private UIData table;
private UIInput input;

public void save() {
    System.out.println(input.getId() + " - " + input.getValue());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:00:27.700

数据表没有任何问题。JSF 组件树中**只有一个** `UIInput`组件，每当父`UIData`组件遍历模型的每个项目时，它的状态都会改变。因此，状态仅*在*`UIData`迭代期间可用，而不是之前或之后。您试图在 bean 的 action 方法中访问单个组件的值，而父`UIData`组件没有对其进行迭代，因此这些值将始终返回`null`。

您需要访问组件树并收集执行中感兴趣的[`UIComponent#visitTree()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#visitTree%28javax.faces.component.visit.VisitContext,%20javax.faces.component.visit.VisitCallback%29)信息。`UIData``VisitCallback`

```
table.visitTree(VisitContext.createVisitContext(FacesContext.getCurrentInstance()), new VisitCallback() {
    @Override
    public VisitResult visit(VisitContext context, UIComponent target) {
        if (target instanceof UIInput) {
            UIInput input = (UIInput) target;
            System.out.println("id: " + input.getId());
            System.out.println("value: " + input.getValue());
        }

        return VisitResult.ACCEPT;
    }
}); 
```

顺便说一句，您通常会`Validator`在`UIInput`组件上使用法线执行验证，或者在这种特殊情况下可能更好，使用`ValueChangeListener`. 这允许更容易的失效和消息处理。

# javascript - How to simplify the error handling in tamejs?

> ID：10665387
> 
> 赞同：1
> 
> 时间：2012-05-19T12:56:49.600
> 
> 标签：javascript, node.js, asynchronous, tamejs

I'm pretty happy with tamejs, it makes my javascript code much clearer. But I still feel the error handling is a little boring.

See the code:

```
// callback should be callback(err, nextInt)
function inc(n, callback) {
   setTimeout(function() {
      callback(null, n+1);
   }, 100);
}

await { inc(3, defer(var err, next));}
if(err) throw new Error(err);          // !!! error handling

await { inc(8, defer(var err, next));}
if(err) throw new Error(err);          // !!! error handling

await { inc(12, defer(var err, next));}
if(err) throw new Error(err);          // !!! error handling

await { inc(39, defer(var err, next));}
if(err) throw new Error(err);          // !!! error handling 
```

Since nearly every asynchronous api has callbacks which have a `error` as the first parameter, we need to get it and check it first.

You can see there are a lot of error handling lines in the sample, which is boring.

Is there any way to simplify it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:21:50.280

```
function asyncCheck(workFunction) {
  await { workFunction(defer(var err, next)) };
  if (err) throw new Error(err);
}

//Then use closures to define the work

asyncCheck(function (callback) { inc(2, callback})); 
```

我自己没有尝试过 tamejs，只是阅读了一下，但也许这种模式会起作用？

# java - 在 mongodb 中查询“between”的语法 - 我正在使用 java

> ID：10665388
> 
> 赞同：0
> 
> 时间：2012-05-19T12:56:59.003
> 
> 标签：java, jakarta-ee, mongodb

我想检索其“价格”字段介于某个最大值和最小值之间的数据，我在 java 中使用下面的语法，但它似乎不起作用。

>

```
 BasicDBObject numeralQ;                                                                
List<DBObject> clauses = new ArrayList<DBObject>();
.
.
.
.
numeralQ.put(datafield,new BasicDBObject("$gt", min).append("$lt", max));
clauses.add(numeralQ);  
.
.//i also have many other conditions that i want to "OR" them with this condition
.
BasicDBList or = new BasicDBList();

for (DBObject clause : clauses)
    or.add(clause);

DBObject query = new BasicDBObject("$or", or);
DBCursor cur = coll.find(query);

while (cur.hasNext()) {
    System.out.println(cur.next());

} 
```

你能看出我在做什么错吗？

- 编辑

```
printing the `query.toString();` results in this string : 
```

`{ "$or" : [ { "Price" : { "$gt" : "2" , "$lt" : "1250"}}]}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T13:48:14.563

您想将价格作为数字而不是字符串进行比较。所以你想得到一个看起来像这样的条件对象：

```
{ "Price": {"$gt": 2, "$lt": 1250 } } 
```

# django - Django Contactme TemplateSyntaxError

> ID：10665391
> 
> 赞同：0
> 
> 时间：2012-05-19T12:57:13.220
> 
> 标签：django, django-forms, django-templates, django-urls

I am getting a TemplateSyntaxError, that is only happening on my dev server, but works fine on the django testing server locally.

Here's my all code: [https://github.com/halitalptekin/HDBlog](https://github.com/halitalptekin/HDBlog)

This error code:

```
TemplateSyntaxError at /iletisim/
Could not parse the remainder: '-post-contact-form' from 'contactme-post-contact-form' 
```

In template /home/templates/hdbootstrap/django_contactme/form.html, error at line 41

Here's line 41

```
<form id="CF" action="{% url contactme-post-contact-form %}" method="post">{% csrf_token %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:36:24.373

正如 Mark Lavin 所问，您可能正在使用[最新版本的`url`标签](https://github.com/django/django/commit/eb351ac9cba2d6b2750aecb4353ba482d6dca87f)

请

*   使用`{% url "contactme-post-contact-form" %}`.
*   或者`{% load url from future %}{% url "contactme-post-contact-form" %}`如果测试服务器反过来失败。

# javascript - Jquery Barcode Scanner Integration

> ID：10665392
> 
> 赞同：3
> 
> 时间：2012-05-19T12:57:23.870
> 
> 标签：javascript, jquery, html, barcode

How can I emulate keyboard press once I scanned a barcode using a usb barcode scanner? I don't have any idea about this and I just want to get some suggestions/instructions on how can I do it. If I have this form, how will the barcode number be inputted in that textbox? thanks!

```
<form method="post" action="">
    <input type="text" id="barcode-input" name="barcode-input" value=""/>
</form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T13:03:34.570

我见过的条码扫描器（我不得不承认没有那么多）就像键盘一样。旧的甚至有一个 PS/2 端口。但即使是 USB 的也喜欢将自己标识为键盘。当您扫描代码时，扫描仪的行为就像您实际按下了键盘上的数字键一样，可能以返回键结束。

因此，您所做的就是将焦点放在您的文本框中，然后扫描您的代码并完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:08:10.243

如果您的扫描仪不像键盘那样工作，并且您必须以编程方式获取代码，则必须使用自动化工具。

根据您使用的语言以及您使用的操作系统，可能有多个用于发送密钥的自动化选项，但其中大多数将无法找到并选择您的文本字段。您必须自己定位光标，然后使用自动化工具为您按下按键。

如果您使用的是 Windows，[PyWinAuto](http://code.google.com/p/pywinauto/)是我的几个同事最喜欢的选择。它有一个简单但可靠的 API 来执行这些基本的自动化任务。

# bash - 将历史文件中的哈希标签时间戳转换为所需的字符串

> ID：10665396
> 
> 赞同：8
> 
> 时间：2012-05-19T12:58:02.083
> 
> 标签：bash, unix, ssh, history, time-format

当我通过 ssh 将历史命令的输出存储在一个文件中时，我得到了这样的结果

```
ssh -i private_key user@ip 'export HISTFILE=~/.bash_history; export HISTTIMEFORMAT="%D-%T "; set -o history; history' > myfile.txt 
```

* * *

输出

```
#1337431451
command 
```

据我所知，这个哈希字符串代表一个时间戳。如何将其更改为所需格式的字符串

PS-在 ssh 中使用历史记录不输出时间戳。几乎什么都试过了。所以我想下一个最好的办法是自己将这些 # 时间戳转换为可读的日期时间格式。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-20T07:38:57.793

您可以使用粘贴命令组合行：

```
paste -sd '#\n' .bash_history 
```

并在 awk 中使用 strftime 转换日期：

```
echo 1461136015 | awk '{print strftime("%d/%m/%y %T",$1)}' 
```

因此，带有时间戳的 bash 历史记录可以由下一个命令解析：

```
paste -sd '#\n' .bash_history | awk -F"#" '{d=$2 ; $2="";print NR" "strftime("%d/%m/%y %T",d)" "$0}' 
```

转换：

```
#1461137765
echo lala
#1461137767
echo bebe 
```

到

```
1 20/04/16 10:36:05   echo lala
2 20/04/16 10:36:07   echo bebe 
```

您也可以使用以下内容创建脚本，例如**/usr/local/bin/fhistory**：

```
#!/bin/bash

paste -sd '#\n' $1 | awk -F"#" '{d=$2 ; $2="";print NR" "strftime("%d/%m/%y %T",d)" "$0}' 
```

并使用下一个命令快速解析 bash 历史文件：

```
fhistory .bash_history 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T13:55:55.887

有趣的问题：我已经尝试过了，但没有找到简单而干净的解决方案来访问非交互式 shell 中的历史记录。不过历史文件的格式比较简单，可以写一个脚本来解析。下面的 python 脚本可能很有趣。调用它`ssh -i private_key user@ip 'path/to/script.py .bash_history'`：

```
#! /usr/bin/env python3

import re
import sys
import time

if __name__ == '__main__':
    pattern = re.compile(br'^#(\d+)$')
    out = sys.stdout.buffer
    for pathname in sys.argv[1:]:
        with open(pathname, 'rb') as f:
            for line in f:
                timestamp = 0
                while line.startswith(b'#'):
                    match = pattern.match(line)
                    if match: timestamp, = map(int, match.groups())
                    line = next(f)
                out.write(time.strftime('%F %T ', time.localtime(timestamp)).encode('ascii'))
                out.write(line) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-17T11:31:51.697

仅使用 Awk 并以稍微更准确的方式：

```
awk -F\# '/^#1[0-9]{9}$/ { if(cmd) printf "%5d  %s  %s\n",n,ts,cmd;
  ts=strftime("%F %T",$2); cmd=""; n++ }
  !/^#1[0-9]{9}$/ { if(cmd)cmd=cmd " " $0; else cmd=$0 }' .bash_history 
```

这仅解析以时间戳 ( ) 开头的行`/^#1[0-9]{9}$/`，编译所有后续行直到下一个时间戳，将多行命令与`" "`(1 个空格) 组合并以类似于`history`包含编号的格式打印命令。

请注意，如果有多行命令，编号不会（必然）匹配。

没有编号和用换行符分解多行命令：

```
awk -F\# '/^#1[0-9]{9}$/ { if(cmd) printf "%s  %s\n",ts,cmd;
  ts=strftime("%F %T",$2); cmd="" }
  !/^#1[0-9]{9}$/ { if(cmd)cmd=cmd "\n" $0; else cmd=$0 }' .bash_history 
```

最后，使用 GNU Awk (gawk) 对列表进行排序的快速而肮脏的解决方案：

```
gawk -F\# -v histtimeformat="$HISTTIMEFORMAT" '
    /^#1[0-9]{9}$/ { i=$2 FS NR; cmd[i]="" }
    !/^#1[0-9]{9}$/ { if(cmd[i]) cmd[i]=cmd[i] "\n" $0; else cmd[i]=$0 }
    END { PROCINFO["sorted_in"] = "@ind_str_asc"
       for (i in cmd) { split(i,arr)
       print strftime(histtimeformat,arr[1]) cmd[i]
    }
}' 
```

# java - Stopping the indeterminate mode of of JProgressBar in SwingWorker

> ID：10665400
> 
> 赞同：3
> 
> 时间：2012-05-19T12:58:40.080
> 
> 标签：java, swing, progress-bar, swingworker

I want to stop the indeterminate mode of the progress bar, once my `doInBackground` (method of SwingWorker) returns `null` (meaning when my task is done). Here is my code inside the button; when I run my code, I get an error. Here is the code:

```
private void StartButtonMouseClicked(java.awt.event.MouseEvent evt) {                                         

final Main f22 = new Main();

initializer();

f22.getfile(FileName, 0);
f22.execute();

SwingUtilities.invokeLater(new Runnable() {

    @Override
    public void run() {
        jProgressBar1.setIndeterminate(true);
        try {
            if (f22.doInBackground() == null) {
                jProgressBar1.setIndeterminate(false);                        
            }
        } catch (IOException ex) {
            Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}); 
```

Here is the error that I get:

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6e1b0750, pid=4988, tid=5464
#
# JRE version: 7.0-b141
# Java VM: Java HotSpot(TM) Client VM (21.0-b11 mixed mode, sharing windows-x86              
# Problematic frame:
# V  [jvm.dll+0xa0750]
#
# Failed to write core dump. Minidumps are not enabled by default on client  

  versions of Windows
#

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T13:04:26.963

您似乎错误地使用了 SwingWorker。您永远不应该`doInBackground()`直接调用，尤其是在事件调度线程中不正确——这与使用 SwingWorker 的全部原因背道而驰——而是在 SW 上调用 execute。将 PropertyChangeListener 添加到 SwingWorker 并基于此更改行为。

例如，

```
 final Main f22 = new Main();
  initializer();
  f22.getfile(FileName, 0);
  f22.addPropertyChangeListener(new PropertyChangeListener() {
     @Override
     public void propertyChange(PropertyChangeEvent pcEvt) {
        if (pcEvt.getNewValue().equals(SwingWorker.StateValue.DONE)) {
           // do your stuff here
        }
     }
  });
  f22.execute(); 
```

# c++ - HSP to C++: Language conversion of a large codebase

> ID：10665402
> 
> 赞同：2
> 
> 时间：2012-05-19T12:58:44.013
> 
> 标签：c++, converter

I have large codebase written in [HSP](http://lhsp.s206.xrea.com/index.en.html)([wikipedia article](http://en.wikipedia.org/wiki/Hot_Soup_Processor) - think "BASIC", but japanese).

By "large" I mean it has 151352 lines of code, 60 source files with total code size of 4.5 megabytes. Also, it has plenty of spaghetti code, no comments and badly needs refactoring. The good thing is that it has a lot of text messages, so not all of those lines represent actual program logic.

I'd like to convert this codebase to C++, while retaining my sanity. "I'd like" means that I'm not **required** to do it, but I'd strongly prefer to find a method to do it.

What's a good way to do it? Obviously, I can't just rewrite it all in C++ (Well, I *could* do it in theory, but it would take up to 2 years, and I would introduce many bugs in process), so (I think) a reasonable decision would be to implement code recompiler/preprocessor that would allow me to convert source code into messy C++ (HSP is much simpler than C++, so it should be possible) and then start refactoring/documenting the result.

Unfortunately, i'm not entirely sure how to approach building the recompiler efficiently. While I know there are Lex/Yacc/Bison/Boost::spirit, I haven't used them personally.

So can you recommend a good way perform such conversion? Any free tool ("free" as in "free beer") that is available on windows platform is allowed, as long as it doesn't affect license of original source code.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:44:18.147

Yacc 它的目标是有效地处理更复杂的任务，而且学习起来很复杂，我认为它是矫枉过正的。

Spirit 应该是更好的选择，如果您已经知道使用它，我个人会使用 Prolog 来完成这项任务。

Prolog 具有内置的语法分析，即所谓的 DCG。对于像 Basic 这样简单的语言，我很确定语法中没有实际问题，并且现代 Prologs（我认为 SWI-Prolog 有效）可以很好地处理源代码中的复杂字符编码。

此外，在 Prolog 中，您可以尝试应用一些天真来展开意大利面条代码。一般来说，这是一项复杂的任务，但如果你只有少量的模式，重复多次，这可能很容易。

模式匹配是此类问题的关键......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T13:50:00.647

好吧，如果你真的想走这条路而忘记评论中的建议，你可能应该好好看看 openhsp 编译器，主要是 codegen 文件：

*   [http://dev.onionsoft.net/trac/browser/trunk/hspcmp/codegen.cpp](http://dev.onionsoft.net/trac/browser/trunk/hspcmp/codegen.cpp)

并且在你的眼睛下面有令牌：

*   [http://dev.onionsoft.net/trac/browser/trunk/hspcmp/token.h](http://dev.onionsoft.net/trac/browser/trunk/hspcmp/token.h)
*   [http://dev.onionsoft.net/trac/browser/trunk/hspcmp/token.cpp](http://dev.onionsoft.net/trac/browser/trunk/hspcmp/token.cpp)

看来HSP并没有那么复杂，可以跳过AST这一步。不过，您可以从中获得很好的优化。不要忘记准备一个 C++ 库来嵌入您生成的代码，这样您就可以管理 HSP 怪异（如全局变量和动态类型）。

如果你能从中破解一些东西，你还必须删除这个编译器所做的大部分工作（创建可执行文件、链接和东西）。不要忘记，这是一项非常漫长而艰巨的任务，可能不会比完全重写更快或更容易。但如果你准备好了，你会发现它很困难:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T23:31:21.607

根据代码库的原始所有者，从版本 3 开始的 HSP 包括 HSP 到 C 代码转换器。由于时间不够，信息没有得到验证，但这篇[博客文章](http://www.onionsoft.net/wp/archives/433)记录了名为 hspcnv 的工具，该工具旨在将 HSP 代码转换为 C 代码。文章是日文的。

# python - Rendering a cube in OpenGL

> ID：10665404
> 
> 赞同：0
> 
> 时间：2012-05-19T12:58:49.780
> 
> 标签：python, opengl, pyqt

I'm trying to program a rotaing cube. Therefore I generate a cube using my `make_cube` method. Unfortunatly some faces of the cube don't get rendered. I tried a lot I don't understand why the cube is not "extruded" fully. Here is my code for generating the cube:

```
def make_cube(self):
    glColor3f(0, 1, 0)
    #front
    GL.glVertex3d(0.0, 0.0, 0.0)
    GL.glVertex3d(0.2, 0.0, 0.0)
    GL.glVertex3d(0.2, 0.2, 0.0)
    GL.glVertex3d(0.0, 0.2, 0.0)
    # back
    GL.glVertex3d(0.0, 0.0, -0.2)
    GL.glVertex3d(0.2, 0.0, -0.2)
    GL.glVertex3d(0.2, 0.2, -0.2)
    GL.glVertex3d(0.0, 0.2, -0.2)
    # right
    GL.glVertex3d(0.2, 0.0, 0.0)
    GL.glVertex3d(0.2, 0.0, -0.2)
    GL.glVertex3d(0.2, 0.2, -0.2)
    GL.glVertex3d(0.2, 0.2, 0.0)
    # left
    GL.glVertex3d(0.0, 0.0, 0.0)
    GL.glVertex3d(0.0, 0.0, -0.2)
    GL.glVertex3d(0.0, 0.2, -0.2)
    GL.glVertex3d(0.0, 0.2, 0.0)
    # top
    GL.glVertex3d(0.0, 0.2, 0.0)
    GL.glVertex3d(0.2, 0.2, 0.0)
    GL.glVertex3d(0.2, 0.2, -0.2)
    GL.glVertex3d(0.0, 0.2, -0.2)
    # bottom
    GL.glVertex3d(0.0, 0.0, 0.0)
    GL.glVertex3d(0.2, 0.0, 0.0)
    GL.glVertex3d(0.2, 0.0, -0.2)
    GL.glVertex3d(0.0, 0.0, -0.2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:06:26.170

它是由剔除引起的。您的正面和背面仅在 z 分量上有所不同，这意味着一个按顺时针方向呈现另一个逆 cw 并且对于其他所有相对侧都相同。

```
#front
GL.glVertex3d(0.0, 0.0, 0.0)
GL.glVertex3d(0.2, 0.0, 0.0)
GL.glVertex3d(0.2, 0.2, 0.0)
GL.glVertex3d(0.0, 0.2, 0.0)
# back
GL.glVertex3d(0.0, 0.0, -0.2)
GL.glVertex3d(0.2, 0.0, -0.2)
GL.glVertex3d(0.2, 0.2, -0.2)
GL.glVertex3d(0.0, 0.2, -0.2) 
```

OpenGL 剔除背面以提高性能，但是您必须拥有所有基元 CW 或 CCW。

看看[glCullFace](http://www.opengl.org/sdk/docs/man/xhtml/glCullFace.xml)和[glFrontFace](http://www.opengl.org/sdk/docs/man/xhtml/glFrontFace.xml)。

# sql - SQL - 从多个表中提取一组，分组，然后求和

> ID：10665413
> 
> 赞同：2
> 
> 时间：2012-05-19T13:00:26.613
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我需要从表 RawData 和 RawDataMeter 中提取数据，并对过去 10 分钟内每个唯一 MeterId 的“值”字段求和（相对于时间戳）。RawData 和 RawDataMeter 表通过 RawDataId 字段使用 INNER JOIN 连接，只有在 BuildingMeter 表中存在 RawData.BuildingId 和 RawDataMeter.MeterId 时才会选择记录。即查询需要从 RawData 和 RawDataMeter 表中选择字段，前提是它们存在于 BuildingMeter 表中，然后需要获取每个仪表的最新记录（基于时间戳），然后检索最后 10 分钟的值。仪表。一旦有了这些值，它需要对每米 10 分钟的值求和并输出结果。

到目前为止我的查询是：

```
SELECT TOP (SELECT COUNT(DISTINCT BuildingMeterId) FROM BuildingMeter)
    MeterId, BuildingId, TimeStamp, Value
FROM
    RawData
    INNER JOIN 
        RawDataMeter 
    ON RawData.RawDataId = RawDataMeter.RawDataId
WHERE
    EXISTS
        (SELECT 
            BuildingId,
            BuildingMeterId
        FROM
            BuildingMeter)
ORDER BY
    TimeStamp DESC 
```

这会产生以下结果：

```
1   1   2012-05-16 12:51:00.000 216
2   1   2012-05-16 12:51:00.000 876989
3   1   2012-05-16 12:51:00.000 389164
4   1   2012-05-16 12:51:00.000 1.298896E+07
5   1   2012-05-16 12:51:00.000 283378
6   1   2012-05-16 12:51:00.000 1541438
7   1   2012-05-16 12:51:00.000 4241823
8   1   2012-05-16 12:51:00.000 5761659
9   1   2012-05-16 12:51:00.000 3
10  1   2012-05-16 12:51:00.000 0
11  1   2012-05-16 12:51:00.000 23
12  1   2012-05-16 12:51:00.000 3822836
13  1   2012-05-16 12:51:00.000 4983960
14  1   2012-05-16 12:51:00.000 909497
15  1   2012-05-16 12:51:00.000 7724438 
```

BuildingMeter 表示例（我只包括 1 座 15 米的建筑物（这是可变的））：

```
BuildingId  BuildingMeterId
1   1
1   2
1   3
1   4
1   5
1   6
1   7
1   8
1   9
1   10
1   11
1   12
1   13
1   14
1   15 
```

RawData 中最后 30 条记录的样本数据：

```
RawDataId, TimeStamp, BuildingId
21677   2012-05-16 00:03:00.000 1
21678   2012-05-16 00:03:00.000 1
21679   2012-05-16 00:03:00.000 1
21680   2012-05-16 00:03:00.000 1
21681   2012-05-16 00:03:00.000 1
21682   2012-05-16 00:03:00.000 1
21683   2012-05-16 00:03:00.000 1
21684   2012-05-16 00:03:00.000 1
21685   2012-05-16 00:03:00.000 1
21686   2012-05-16 00:03:00.000 1
21687   2012-05-16 00:03:00.000 1
21688   2012-05-16 00:03:00.000 1
21689   2012-05-16 00:03:00.000 1
21690   2012-05-16 00:03:00.000 1
21691   2012-05-16 00:03:00.000 1
21662   2012-05-16 00:02:00.000 1
21663   2012-05-16 00:02:00.000 1
21664   2012-05-16 00:02:00.000 1
21665   2012-05-16 00:02:00.000 1
21666   2012-05-16 00:02:00.000 1
21667   2012-05-16 00:02:00.000 1
21668   2012-05-16 00:02:00.000 1
21669   2012-05-16 00:02:00.000 1
21670   2012-05-16 00:02:00.000 1
21671   2012-05-16 00:02:00.000 1
21672   2012-05-16 00:02:00.000 1
21673   2012-05-16 00:02:00.000 1
21674   2012-05-16 00:02:00.000 1
21675   2012-05-16 00:02:00.000 1
21676   2012-05-16 00:02:00.000 1 
```

RawDataMeter 示例：

```
MeterId, RawDataId, Value
15  21691   7722613
14  21690   908944
13  21689   4982947
12  21688   3821899
11  21687   6
10  21686   0
9   21685   0
8   21684   5761656
7   21683   4240048
6   21682   1541372
5   21681   283223
4   21680   1.298603E+07
3   21679   388137
2   21678   876121
1   21677   0
15  21676   7722615
14  21675   908944
13  21674   4982947
12  21673   3821899
11  21672   5
10  21671   0
9   21670   0
8   21669   5761656
7   21668   4240052
6   21667   1541372
5   21666   283223
4   21665   1.298604E+07
3   21664   388137
2   21663   876122
1   21662   0 
```

编辑：

按照 Gordon 概述的步骤，我设法获得了以下 SQL 查询，它似乎工作正常：

```
WITH 
    RawMeterData (MeterId, BuildingId, TimeStamp, LatestTimeStamp, Value) AS
(SELECT
    RawDataMeter.MeterId, 
    RawData.BuildingId, 
    RawData.TimeStamp, 
    MAX(RawData.TimeStamp) OVER (PARTITION BY BuildingMeter.BuildingMeterId) AS LatestTimeStamp, 
    RawDataMeter.Value
FROM
    BMS_RawData AS RawData
    INNER JOIN 
        BMS_RawDataMeter AS RawDataMeter 
    ON RawData.RawDataId = RawDataMeter.RawDataId
    INNER JOIN
        (SELECT 
            DISTINCT BuildingId,
            BuildingMeterId
        FROM
            AST_BuildingMeter) as BuildingMeter 
        ON RawData.BuildingId = BuildingMeter.BuildingId AND 
        RawDataMeter.MeterId = BuildingMeter.BuildingMeterId)
SELECT MeterId, BuildingId, SUM(Value) AS Value FROM RawMeterData WHERE RawMeterData.TimeStamp 
BETWEEN DATEADD(mi, -9, LatestTimeStamp) AND LatestTimeStamp
GROUP BY MeterId, BuildingId 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:10:10.803

这个怎么样：

```
select
  RawDataMeter.MeterId,
  RawDataMeter.BuildingId,
  sum(Value) as sumvalue
from
  RawData,
  RawDataMeter
where
  RawData.RawDataId=RawDataMeter.RawDataId
  RawData.TimeStamp > now() - 10*'1 minute'::interval
group by
  RawDataMeter.MeterId,
  RawDataMeter.BuildingId
order by
  RawDataMeter.MeterId,
  RawDataMeter.BuildingId 
```

如果您的索引制作正确，那么这应该会运行得相当快。此外，您在 RawDataId 上的表之间进行链接似乎很奇怪。我原以为您会链接 MeterId 值。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:21:32.843

我没有足够的时间来编写查询。

您需要执行以下操作：

1.  将两个字段上的存在子句更改为连接。您应该在内部选择中添加“不同”以防止重复影响您。
2.  使用 windows 函数“max(timestamp) over (partition by buildingmeterid)”获取最新的时间戳。
3.  将其设为子查询（或使用“with”子句）。
4.  根据最大时间戳和时间戳之间的差异选择记录
5.  汇总结果以获得总和。

为了编写查询，如果您在所有字段名称前放置别名，将会有所帮助。不经意的读者无法分辨哪些字段来自哪些表。

# ios - 没有动画的两个 UIViewController 之间的转换

> ID：10665417
> 
> 赞同：1
> 
> 时间：2012-05-19T13:01:00.670
> 
> 标签：ios, uiviewcontroller

从我的 appDelegate 我像这样加载 homeScreen ViewController：

```
UIStoryboard* sb = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
UIViewController *controller = [sb instantiateViewControllerWithIdentifier:@"HomeScreen"];
[self.window setRootViewController:controller]; 
```

该应用程序只有在我的“homeScreen”和“PlayViewController”ViewControllers 之间发生变化，并且是这样完成的：

```
 PlayViewControlller* vc = [self.storyboard instantiateViewControllerWithIdentifier:@"PlayViewController"];
[self presentModalViewController:vc animated:NO]; 
```

还有这个

```
UIStoryboard* sb = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
UIViewController *controller = [sb instantiateViewControllerWithIdentifier:@"HomeScreen"];
[self presentModalViewController:controller animated:NO]; 
```

分别。

这一切都很好。我可以在带有 uibuttons 的视图控制器和上面的代码之间切换。但是，我不确定是什么原因造成的，它发生在我在两个视图控制器之间切换几次之后，但是过渡开始变得动画并且在切换时它们开始旋转。

好的，所以我正在尝试缩小问题范围，看看是什么原因造成的。我认为它是我在我的应用程序中使用的其他动画块。但是那里有很多，所以不知道到底是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:18:18.183

好的，如果有人碰巧发现自己处于相同的情况，我找到了导致这种情况的代码行。

```
 [UIView beginAnimations:@"Move" context:NULL]; 
```

# android - 在选项卡中的活动之间传递带有事件的数据 - Android

> ID：10665422
> 
> 赞同：0
> 
> 时间：2012-05-19T13:01:46.690
> 
> 标签：android, android-activity, android-tabactivity

我有一个 TabActivity，里面有 4 个选项卡（活动）。现在我想在这 4 个选项卡之间传递数据。我知道如何将其传递给父级 (TabActivity)，但如何将其传递给正在运行的 Tabs 活动之一？使用 putExtra 我可以向它传递一些数据，但是我如何在另一个 Activity 中知道它获得了数据（类似于事件/回调/其他）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:05:58.650

您可以使用 getExtra 检查数据是否符合意图。我会用公共静态变量来解决这个问题。只需从活动中的 onResume 获取对对象的引用。记得检查它是否为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:20:06.497

选项卡中的每个活动都有其上下文。您可以像往常一样添加额外/获得额外。

另一种方法是：

制作公共静态变量。偏爱。

将其存储在 SQLite 中。

# c# - 结构和身份

> ID：10665423
> 
> 赞同：4
> 
> 时间：2012-05-19T13:02:18.517
> 
> 标签：c#, class, struct

正如它在 MSDN 文档和其他地方所说的那样，结构没有身份，因此应该代表一个永远不会改变的“永恒”值，例如电话号码（电话号码不会改变，但你会得到一个新的）。

这对我的编码决策有何影响？

基于这些知识，我认为没有同一性意味着如果两个结构具有相同的数据，则无法区分它们，所以从概念上讲，它们是相同的东西。因此，代码库中用于数字（例如（7））的两个结构总是相同的。因此，对于类，具有相同数据的两个对象（例如，只有名称的人员对象）可以是不同的人，但对于结构，这种区别不存在。因此，可能代表一项技能（例如钓鱼）的结构将始终是相同的（没有身份可以区分它）。

希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T13:41:06.093

[结构与类共享大部分相同的语法](http://msdn.microsoft.com/en-us/library/saxz13w4.aspx)，但根据[MSDN](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.71%29.aspx)：

> struct 类型适合表示轻量级对象

它们之间的关键区别在于**Classes**生成引用类型对象，而**Structs**生成值类型对象，这意味着以下操作：

```
Point A = new Point();
Point B = A; 
```

如果 Point 是 Class，则 A 和 B 访问相同的内存对象，如果 Point 是 Struct，则创建 A 的新副本并将其分配给 B。

在 Point 是 Struct 的情况下，以下关系成立：

```
Object.Equals(A,B) == true
Object.ReferenceEquals(A,B) == false 
```

因此**，您可以将它们区分开来**，并且这两个结构**不是一回事**，因为它们中的每一个都是内存中的一个对象。

[这个 SO question](https://stackoverflow.com/questions/521298/when-to-use-struct-in-c)讨论了何时使用 Structs 是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T13:54:34.473

结构是一个值。类是一个对象。这与现实生活中的 42 永远等于 42 非常相似，但您可以有两个名为 John Smith 的人。

您在问题中所说的是对值类型与引用类型概念的一个很好的概述。

至于它应该如何影响您的编码，请始终编码以使值等于相同的值，例如 42 必须始终等于 42。在某些情况下，应该按值而不是标识（例如字符串）来比较引用类型。但在大多数情况下，引用类型按标识进行比较。

如果你可以测量或计算它，它就属于一个值类型。否则，使用引用类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:39:22.313

“结构”或“记录”概念是在“类”概念之前创建的。有时，可以互换。

何时使用结构的变量、字段或实例：

(1) 当只有数据成员需要它时，没有方法。或者很少有很少使用的方法，例如构造函数。

例子：

```
struct CoordinateStruct
{
  int X;
  int Y;
} 
```

(2) 当需要大量元素时，由于对象使用额外的内存，有时是不可见的，将方法迁移到容器元素，例如另一个对象、类似模块（命名空间）的对象或单例对象（享元设计图案）。

前：

```
class PointClass
{
  int X;
  int Y;
  // its also an object / class
  Color Color;

  public void assign(int NewX, int NewY, Color NewColor) { ... }
  public void move(int addX, int addNewY) { ... }
}

// multiple element container
class CADAppClass
{
  List<Point> Points;

 // ...
}

// Not enough memory Exception !!! 
```

后：

```
struct PointStruct
{
  int X;
  int Y;
  // its a low memory integer
  int Color;      
}

// multiple element container
class CADAppClass
{
  List<Point> Points;

  public void assignPoint
    (ref PointStruct Point, int NewX, int NewY, Color NewColor) { ... }
  public void movePoint
    (ref PointStruct Point, int addX, int addNewY) { ... }

 // ...
} 
```

(3) 当你需要封装数据元素时，即使是少量的元素，在一个变量中，即使有方法、操作符、事件或“消息”。封装，可能以序列化为例（从 DLL、DCOM、JSON、纯数据文件加载）。

前：

```
class CustomerClass
{
  String FirstName;
  String LastName;

  public void Store(Stream Destination) { ... }
  public void Load(Stream Source) { ... }

  public void CopyTo(CustomerClass Destination) { ... }
  public void CopyFrom(CustomerClass Source) { ... }
} 
```

后：

```
struct CustomerStruct
{
  char[100] FirstName;
  char[100] LastName;
}

// one to one, nested, relationship, seems redudant,
// but required
Class CustomerClass
{
  CustomerStruct Data;

  public void Store(Stream Destination) { ... }
  public void Load(Stream Source) { ... }

  public void CopyTo(CustomerStruct Destination) { ... }
  public void CopyFrom(CustomerStruct Source) { ... }
} 
```

我在面向对象和类的编程语言中使用了这个枚举，而不是结构，但是，它不像 Java 或 C# 那样将枚举视为对象（例如：面向对象的 PHP 和对象 Pascal）。

(4) 前面的案例或场景的混合，没有考虑。

干杯。

# iphone - 从屏幕上绘制的内容中找到框架或位置

> ID：10665426
> 
> 赞同：1
> 
> 时间：2012-05-19T13:02:33.843
> 
> 标签：iphone, ios, core-graphics

我是 ios 核心图形的新手。我有一个字符串

```
NSString *str = [NSString stringWithString:@"Hi Guys How are you ? Just visit the http://www.apple.com and if not satisfied then go to http://www.google.com and Again if you visit http://www.msn.com"]; 
```

现在我已经使用上面的字符串绘制了

[str drawInRect:CGRectMake(0.0f,40,300,200) withFont:[UIFont systemFontOfSize:fontSize] lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft];

它在屏幕上绘制得非常好。我想找到我画在哪个位置 http://www.apple.com

基本上我需要找到已经绘制[http://www.apple.com](http://www.apple.com)的框架？Bcoz 我需要检测上面的 URL，当用户点击上面的 URL 时，我想在网页中找到该 URL。

可能吗？

# java - java聊天系统，收发问题

> ID：10665434
> 
> 赞同：2
> 
> 时间：2012-05-19T13:03:34.363
> 
> 标签：java, system, chat

我的程序已设置并准备就绪，问题出在服务器内。当我的客户发送消息时，它应该存储在哪里？我尝试使用队列但没有用，也尝试使用通常的字符串寄存器，但它部分工作。我使用“读/写 UTF”创建了一个用于发送的线程和一个用于存储的线程。如果有人为我提供算法，或者至少是一个更好的主意，我将不胜感激。代码 ：

```
class clientThread extends Thread {
    DataInputStream fromClient;
    int counter = 0;

    public clientThread(Socket cs) throws IOException
    {
        fromClient = new DataInputStream(cs.getInputStream());
    }

    public void run()
    {
        while (true)
        {
            try {
                toall=Integer.toString(counter)+fromClient.readUTF();
            } catch (IOException ex) {
                Logger.getLogger(ChatTerminalS.class.getName()).log(Level.SEVERE, null, ex);
            }
            counter++;
        }
    }
}

class SendingThread extends Thread
{
    DataOutputStream toClient;
    String s = "";int counter=0;

    public SendingThread(Socket cs) throws IOException
    {
        toClient = new DataOutputStream(cs.getOutputStream());
    }

    public void run()
    {
        while (true)
        {
            if(toall.charAt(0)+""==Integer.toString(counter))
            {}
            else
            {
                try {
                    toClient.writeUTF(toall);
                } catch (IOException ex) {
            Logger.getLogger(ChatTerminalS.class.getName()).log(Level.SEVERE, null, ex);
            }
        counter++;
        }
    }
} 
```

# javascript - 即时验证 EmberJS TextField？

> ID：10665437
> 
> 赞同：8
> 
> 时间：2012-05-19T13:04:14.537
> 
> 标签：javascript, html, validation, ember.js

我需要使用 EmberJS 验证绑定到模型属性的表单文本字段。我希望用户只能输入有效的正数。

我知道 jQuery.isNumber()，但我不知道如何将它连接到字段。我尝试使用 Ember.computed(...) 在模型的属性上编写显式的 getter/setter 函数，但没有成功。

有没有类似于 WinForms onChanging() 事件的东西可以连接到？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T04:39:17.860

有很多方法可以做这种事情。在这里，我们可以使用绑定和观察者来完成此操作。

首先让我们创建一个总是返回一个数字的函数。

```
var onlyNumber = function(input) {
    return input.toString().replace(/[^\d.]/g, "");
}; 
```

使用它我们可以执行以下操作

```
App = Ember.Application.create();

App.person = Ember.Object.create({
    age: 42
});

App.NumberField = Ember.TextField.extend({
    valueBinding: Ember.Binding.from("App.person.age").transform(onlyNumber),

    _cleanValue: function() {
        this.set('value', onlyNumber(this.get('value')));
    }.observes('value')
}); 
```

1）我们正在创建一个绑定到 Person 的年龄，但是通过这个绑定的任何东西都只能是一个数字。有关更多详细信息，请参阅[Ember.Binding](http://docs.emberjs.com/symbols/Ember.Binding.html)到/从转换。

2）我们正在观察文本字段的值，并在它发生变化时将其设置为仅数字。如果用户输入“42a”，我们将立即将其设置回“42”。请注意，即使“42a”在文本输入中出现了短暂的一秒钟，由于我们的转换，它也无法通过绑定。

这是显示此示例的小提琴：http: [//jsfiddle.net/nDBgC/](http://jsfiddle.net/nDBgC/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T13:11:56.177

您可以`keyDown`在 TextField 上添加事件处理程序，请参阅[http://jsfiddle.net/pangratz666/SKJfF/](http://jsfiddle.net/pangratz666/SKJfF/)：

```
App.NumberTextField = Ember.TextField.extend({
    // implementation of this function, see http://stackoverflow.com/a/995193/65542
    keyDown: function(event) {
        // Allow: backspace, delete, tab, escape, and enter
        if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||
        // Allow: Ctrl+A
        (event.keyCode == 65 && event.ctrlKey === true) ||
        // Allow: home, end, left, right
        (event.keyCode >= 35 && event.keyCode <= 39)) {
            // let it happen, don't do anything
            return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) {
                event.preventDefault();
            }
        }
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-22T09:34:13.340

代码（仅处理数字输入并允许绑定数字而不是字符串，如果需要）：

```
App.NumberFieldComponent = Ember.TextField.extend({
  tagName: "input",
  type: "number",

  numericValue: function(key, value) {
    if (arguments.length === 1) {
      return parseFloat(this.get("value"));
    } else {
      return this.set("value", (value !== void 0 ? "" + value : ""));
    }
  }.property("value"),

  didInsertElement: function() {
    return this.$().keypress(function(key) {
      if ((key.charCode !== 46) && (key.charCode !== 45) && (key.charCode < 48 || key.charCode > 57)) {
        return false;
      }
    });
  }
}); 
```

模板：

```
{{number-field numericValue=someNumericProperty}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-27T08:11:04.987

这是最新 Ember 版本（Ember-cli 2.0）的更新答案（来自@neverfox）。它是用咖啡脚本编写的，并进行了一些修改以匹配 becomeFocus 示例（[http://guides.emberjs.com/v1.10.0/cookbook/user_interface_and_interaction/focusing_a_textfield_after_its_been_inserted/](http://guides.emberjs.com/v1.10.0/cookbook/user_interface_and_interaction/focusing_a_textfield_after_its_been_inserted/)）

1.  生成组件：

    ember g 组件编号字段

2.  将蓝图代码 (app/components/number-field.coffee) 更改为

```
 `import Ember from 'ember'`

    NumberFieldComponent = Ember.Component.extend
        tagName: "input"
        type: "number"

    	numericValue: ( (key, value) ->
    		if arguments.length == 1
    			parseFloat(this.get('value'))
    		else
    			return this.set("value", (value? ? "" + value : ""))
    	).property('value')

    	assignFilter: ( ->
    		this.$().keypress (key) ->
    			if ((key.charCode != 46) && (key.charCode != 45) && (key.charCode < 48 || key.charCode > 57))
    				false
    	).on('didInsertElement')

    `export default NumberFieldComponent`
```

# c++ - 定义递归结构的嵌套数组

> ID：10665439
> 
> 赞同：1
> 
> 时间：2012-05-19T13:04:36.423
> 
> 标签：c++

我有一个简单的递归结构`Recursive`，我想用程序需要的值初始化它的 const 数组。然后我将使用一个名为的简单迭代器函数`IterateAux`，并在`main`. 看代码到现在：

```
#include <iostream>
#include <string>

struct Recursive
{
    std::string data;
    Recursive* Children;
};

void IterateAux(Recursive* Item)
{
    int i = -1;
    while (Item[++i].data != "")
    {
        std::cout << Item[i].data << "\n";
        if (Item[i].Children)
            IterateAux(Item[i].Children);
    }
}

int main()
{
    IterateAux( (Recursive*)Parent );
    return 0;
} 
```

现在，如果我有这样的 const 数组，它可以工作：

```
const Recursive Children[] =  {
    {"Child1", NULL},
    {"Child2", NULL},
    {"", NULL}
};

const Recursive Parent[] = {
    {"Parent1", NULL},
    {"Parent2", NULL},
    {"Parent3", Children },
    {"", NULL}
}; 
```

但以下嵌套形式不会：

```
const Recursive Parent[] = {
    {"Parent1", NULL},
    {"Parent2", NULL},

    {"Parent3", (Recursive[])
        {
            {"Child1",NULL},
            {"Child2",NULL},
            {"", NULL}
        }
    },
    {"", NULL}
}; 
```

问题是为什么？我怎样才能让它工作？

在我的调查中，起初我认为`.children`指针可能无效，但是当尝试使用`int`数据而不是`std::string`它时，它可以完美地工作。

随着`std::string`数据 GDB 与消息一起崩溃，`During startup program exited with code 0xc0000135.`所以我什至无法调试程序！也许数组初始化代码在某处弄得一团糟……

在 GCC 4.6 上尝试了所有这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:19:42.770

通过一些工作，我可以让它出现在 gdb 中。在 IterateAux 的 while 语句处设置断点。它通过 Parent 很好，然后当 t 到达 Children 案例时，我在工作案例中看到了这个：

```
(gdb) p Item[0]
$2 = {data = "Child1", Children = 0x0} 
```

这在失败的情况下：

```
(gdb) p Item[0]
$2 = {data = <error reading variable: Cannot access memory at address 0xfffffff4>,
Children = 0x48d24d79} 
```

所以看起来对 Recursive[] 的强制转换隐藏了它没有编译为与第一种情况相同的形式的事实。

我正在使用带有 -Wall 的 g++ 4.6.3 进行编译，并且没有收到任何警告。

# amazon-s3 - 为什么一个 webapp 需要一个在线服务器只需要几个小时？

> ID：10665447
> 
> 赞同：1
> 
> 时间：2012-05-19T13:05:33.537
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services

EC2、RDS按上网小时数收费，但这种资费究竟谁会受益？为什么 webapp 需要每天/每周/等几个小时在线的服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:23:25.237

云部署的主要好处之一是可扩展性。

例如，如果您有一个服务于英国零售业的应用程序，您可能会发现您的使用高峰出现在上午 7 点到 9 点、下午 12 点到 2 点和下午 5 点到 8 点之间，此时您的受众醒着/不工作。

在这些高峰时段，您可能会使用多台服务器，但在流量较低的夜间只有一台服务器。

每小时收费允许这种可扩展性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T15:50:13.780

每小时收费有很多用例。一大是科学研究：天体物理学、理论计算机科学和数学等。传统上，大学需要支付巨额资金购买和现场安装计算集群，即使他们大部分时间都是闲置的，而且数量很少实际处理数据的时间。

随着云计算的出现，研究人员可以启动一个巨大的服务器集群，让它处理数据几个小时或几天，得到结果，然后终止集群。有关更多详细信息，请参阅亚马逊的[高性能计算页面](http://aws.amazon.com/hpc-applications/)。您还可以阅读有关[NASA 喷气推进实验室](http://aws.amazon.com/solutions/case-studies/nasa-jpl/)和[欧洲航天局](http://aws.amazon.com/solutions/case-studies/european-space-agency/)如何利用 EC2 上灵活的 tarriff 云计算集群来处理其数据的案例研究。

另一个用例是自动缩放。[Amazon 的 Autoscaling 功能](http://aws.amazon.com/autoscaling/)允许负载平衡的 EC2 集群根据需要进行扩展和缩减。在重负载期间，将启动额外的服务器并将其添加到集群中，当负载再次下降时，它们将被删除。因此，公司可以拥有巨大的可扩展性，并且仅在其网站的需求需要时才为额外的容量付费。

# c# - 从 C# 连接到 LDAP 数据库并返回一个数组

> ID：10665449
> 
> 赞同：1
> 
> 时间：2012-05-19T13:05:52.630
> 
> 标签：c#, php, .net, ldap

基本上我想从 C# .Net 连接到一个 LDAP 数据库并返回一个对象数组。

我们有一个第三方软件可以在 PHP 中成功执行此操作，PHP 代码如下：

```
$ds = @ldap_connect("127.0.0.1",4000)
@ldap_bind($ds,"XXXXX","88888")
$sr=@ldap_list($ds,"cn=Registrations","objectclass=RegistrationRecord",$att);
$info=@ldap_get_entries($ds,$sr); 
```

我到底从哪里开始在 C# 中重复这个？我什至不是在寻找一个完整的解决方案，只要有人朝正确的方向轻推，就会在我迷路时大有帮助！

谢谢

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:08:52.800

您可以使用`Directory Entry`或`LdapConnection Class`：

```
DirectoryEntry de = new DirectoryEntry("LDAP://127.0.0.1","admin","password",AuthenticationTypes.None);
DirectorySearcher ds = new DirectorySearcher(de);
var findAll = ds.FindAll(); 
```

资料来源：

[使用 DirectoryServices 从 C# 连接到 LDAP](https://stackoverflow.com/questions/1437250/connecting-to-ldap-from-c-sharp-using-directoryservices)

[LDAP 连接](http://msdn.microsoft.com/en-us/library/system.directoryservices.protocols.ldapconnection.aspx)

[连接到 LDAP 连接](http://msdn.microsoft.com/en-us/library/ms257181%28v=vs.80%29.aspx)

# javascript - Android上的Phonegap：加载图像

> ID：10665452
> 
> 赞同：1
> 
> 时间：2012-05-19T13:06:49.493
> 
> 标签：javascript, android, cordova

我从互联网加载图像并在列表视图中使用它们。当我在桌面浏览器中启动我的应用程序时，图像加载速度很快并转到列表视图项。但是设备图像加载速度较慢，并且在加载时不知何故不会进入列表视图项目。

```
 function onLoad() {
    //console.log("init");
    loadImage();
}

function loadImage() {

    $.getJSON(websiteUrl, function(data) {
        imageUrl = data[0]["image"];
        console.log( imageUrl );
        document.getElementById("view_1").src = imageUrl;
    });

}

body onload="onLoad();" 
//some markup here
    <ul data-role="listview" data-theme="b" class="content-primary">

            <li><a href="index.html">
            <img id="view_1" src="" />
            <h3>Broken Bells</h3>
            <p>Broken Bells</p>
            </a></li>

        </ul> 
```

我还注意到在 onLoad 之后会触发“deviceready”事件。我的问题是 - Phonegap 应用程序中的第一个 init 函数是什么，我可以在加载html 正文**之前开始加载图像？**

# visual-studio - 我可以在 Visual Studio 的解决方案资源管理器中折叠所有节点吗？

> ID：10665463
> 
> 赞同：0
> 
> 时间：2012-05-19T13:08:59.810
> 
> 标签：visual-studio

在 Visual Studio 中，似乎没有办法在解决方案资源管理器中折叠项目的所有文件夹？

有谁知道如何做到这一点？

任何人？这困扰了我多年，我只是希望有一种没有宏和插件的方法，就像他们在这个类似的问题中提到的那样[在 Visual Studio 的解决方案资源管理器窗口中一次折叠所有文件](https://stackoverflow.com/questions/4273552/collapse-all-files-at-once-in-the-solution-explorer-window-in-visual-studio)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:30:09.033

微软发布了一个非常方便的扩展名为[CollapseSelection](http://visualstudiogallery.msdn.microsoft.com/cb0ec47d-05a4-40a7-ba39-9a2da6492f1c/)，它就是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:16:01.523

是的你可以。右键单击解决方案资源管理器中的项目 > 卸载。然后重新加载项目。

解决了一个古老的问题。

[（OP的原始答案，隐藏在问题中。现在是真实答案。社区Wiki以防止不公平的代表获得）。]

# latex - 乳胶表格宽度与文本宽度相同

> ID：10665465
> 
> 赞同：14
> 
> 时间：2012-05-19T13:09:33.137
> 
> 标签：latex

我正在生成一些表格，如下所示：

```
\begin{tabular}[l]{|l|l|l|}
\hline
Input & Output& Action return \\
\hline
\hline
DNF &  simulation & jsp\\
\hline

\end{tabular} 
```

我怎样才能给这个表格与文本宽度相同的宽度？对于我使用的图形

> [宽度=\文本宽度]

但这不适用于桌子。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-19T17:15:06.377

包给`tabularx`你

1.  总宽度作为第一个参数，和
2.  一个新的列类型`X`，所有`X`列都会增长到填满总宽度。

对于您的示例：

```
\usepackage{tabularx}
% ...    
\begin{document}
% ...

\begin{tabularx}{\textwidth}{|X|X|X|}
\hline
Input & Output& Action return \\
\hline
\hline
DNF &  simulation & jsp\\
\hline
\end{tabularx} 
```

# php - PHP - 不会将无效的 XML 加载到 DOM 文档中

> ID：10665469
> 
> 赞同：0
> 
> 时间：2012-05-19T13:10:43.563
> 
> 标签：php, xml

我有一个带有如下标头的 xml 文件：

```
<!ENTITY nbsp   "&#160;"><!-- no-break space = non-breaking space,
                                   U+00A0 ISOnum -->
 <!ENTITY iexcl  "&#161;"><!-- inverted exclamation mark, U+00A1 ISOnum -->
 <!ENTITY cent   "&#162;"><!-- cent sign, U+00A2 ISOnum -->
 <!ENTITY pound  "&#163;"><!-- pound sign, U+00A3 ISOnum -->
 <!ENTITY curren "&#164;"><!-- currency sign, U+00A4 ISOnum -->
 <!ENTITY yen    "&#165;"><!-- yen sign = yuan sign, U+00A5 ISOnum -->
 <!ENTITY brvbar "&#166;"><!-- broken bar = broken vertical bar,
                                   U+00A6 ISOnum -->
 <!ENTITY sect   "&#167;"><!-- section sign, U+00A7 ISOnum -->
 <!ENTITY uml    "&#168;"><!-- diaeresis = spacing diaeresis,
                                   U+00A8 ISOdia -->
 <!ENTITY copy   "&#169;"><!-- copyright sign, U+00A9 ISOnum -->
 <!ENTITY ordf   "&#170;"><!-- feminine ordinal indicator, U+00AA ISOnum -->
 <!ENTITY laquo  "&#171;"><!-- left-pointing double angle quotation mark
                                   = left pointing guillemet, U+00AB ISOnum -->
 <!ENTITY not    "&#172;"><!-- not sign, U+00AC ISOnum -->
 <!ENTITY shy    "&#173;"><!-- soft hyphen = discretionary hyphen,
                                   U+00AD ISOnum -->
 <!ENTITY reg    "&#174;"><!-- registered sign = registered trade mark sign,
                                   U+00AE ISOnum -->
 <!ENTITY macr   "&#175;"><!-- macron = spacing macron = overline
                                   = APL overbar, U+00AF ISOdia -->
 <!ENTITY deg    "&#176;"><!-- degree sign, U+00B0 ISOnum -->
 <!ENTITY plusmn "&#177;"><!-- plus-minus sign = plus-or-minus sign,
                                   U+00B1 ISOnum --> 
```

当我尝试将其加载到 dom 文档中时，它似乎没有将其保存到文件中。我认为上面的代码可能会导致解析错误。有没有办法删除这些标题？

这是我的 php 代码：

```
$xml = curl_exec($ch);
$srcDom = new DOMDocument;
$srcDom->load($xml);
$xPath = new DOMXPath($srcDom);
foreach ($srcDom->getElementsByTagName('Venue') as $venue) {
    $dstDom = new DOMDocument('1.0', 'utf-8');
    $dstDom->appendChild($dstDom->createElement('EventsPricePoints'));
    $dstDom->documentElement->appendChild($dstDom->importNode($venue, true));

    $allEventsForVenue = $xPath->query(
        sprintf(
            '/Store/EventsPricePoints/Event[VenueID/@ID=%d]',
            $venue->getAttribute('ID')
        )
    );

    foreach ($allEventsForVenue as $event) {
        $dstDom->documentElement->appendChild($dstDom->importNode($event, true));
    }

    $dstDom->formatOutput = true;
    $dstDom->saveXml(sprintf('/var/www/html/venuexml/%d.xml', $venue->getAttribute('ID')));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:23:00.773

您可能对[strip_tags](http://php.net/manual/en/function.strip-tags.php)感兴趣，但您需要将所有合法标签列入白名单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:35:19.457

您的代码不会导致解析错误（很可能不会，如果您启用错误记录或报告，您可能会看到警告，但我不认为是这种情况）。

相反，您的代码会加载，并且默认情况下 XML 是 UTF-8 编码的，因此您使用的所有这些实体都不必传输，因为 XML 可以包含这些实体的字符而无需这些字符。

因此，XML 中的定义和实体本身都是多余的。我想`DOMDocument`只会删除那些。

此外，如果您出于测试目的提供了一个示例 XML 块，那么您将获得更具体的答案来满足您的澄清需求。

# ios - 从带有标识符“（null）”的捆绑包中的笔尖引用的图像错误

> ID：10665472
> 
> 赞同：0
> 
> 时间：2012-05-19T13:11:08.577
> 
> 标签：ios, localization

这里有几个主题有相同的错误。

我的错误的原因是：

当我通过以下方式创建 ViewController 的实例时：

```
 HomepageViewController *homePageViewController = [[HomepageViewController alloc] initWithNibName:@"HomepageViewController" bundle:nil]; 
```

一切都很好。但我需要本地化。

所以我打电话：

```
 NSString *path= [[NSBundle mainBundle] pathForResource:[self language] ofType:@"lproj"];  
 NSBundle *languageBundle = [NSBundle bundleWithPath:path];

 HomepageViewController *homePageViewController = [[HomepageViewController alloc] initWithNibName:@"HomepageViewController" bundle:languageBundle]; 
```

然后我看不到模拟器中的 png 图像获取“从包中的 nib 引用的图像，标识符为“（null）”错误”是什么导致此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:02:47.377

如果您以推荐的方式进行本地化，那么您的第一个代码示例中的代码应该可以按原样工作。在幕后，`.lproj`将检查本地化文件夹，如果找到，将从那里加载 XIB。因此，您无需`.lproj`像在第二个代码示例中那样尝试自己构建本地化文件夹的路径！

不过，我不确定这是否是您在使用 png 文件时遇到问题的原因。当您在 XCode 中打开本地化的 XIB 时，您是否验证图像正常？也许您的本地化版本之一仅包含对已被删除的文件的引用。

# api - 音乐 API - 在应用程序中用作示例

> ID：10665474
> 
> 赞同：0
> 
> 时间：2012-05-19T13:11:21.163
> 
> 标签：api, spotify, sample

我目前正在寻找一种音乐流媒体服务，它允许我将音乐流式传输到手机应用程序。这将是 Apple iPhone 和任何 Android 手机。其目的是应用程序的用户可以很快地听一些音乐，然后他们可以继续我们的游戏。

您的服务可以做到这一点吗？如果是这样，许可和版权的成本是多少？对国家有什么限制吗？

此致，

灰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T18:22:31.413

是的，libSpotify 允许将音乐流式传输到手机。不过，用户需要拥有 Spotify Premium 帐户才能允许这样做，而且您只能在有限数量的国家/地区创建 Spotify 帐户。

libSpotify 服务的使用条款可在[此处](https://developer.spotify.com/technologies/libspotify/terms-of-use-us/)找到。

# python - Django：如何在应用程序中组织静态页面？

> ID：10665475
> 
> 赞同：1
> 
> 时间：2012-05-19T13:11:22.223
> 
> 标签：python, django, static

据说将每个功能保留为应用程序并使其尽可能可插拔。

那么，您如何组织页面，例如：

*   **主页**
*   **关于我们**
*   **联系我们**
*   **ETC**

这些不完全是功能，那么 django 开发人员是否管理这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:18:33.120

我只是使用 flatpages 应用程序：[http://docs.djangoproject.com/en/dev/ref/contrib/flatpages/](http://docs.djangoproject.com/en/dev/ref/contrib/flatpages/)并为它们准备了一个模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:20:07.250

您可以使用[Django Flat Pages](https://docs.djangoproject.com/en/dev/ref/contrib/flatpages/?from=olddocs)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T19:10:30.007

我把它们放在一个“商业”应用程序中。我觉得真的没有必要多想。

# javascript - 将文本框设置为在提交时只读

> ID：10665477
> 
> 赞同：-2
> 
> 时间：2012-05-19T13:11:58.533
> 
> 标签：javascript

任何人都可以建议我一个javascript函数来将文本框设置为在按下提交按钮时只读。使内容不能被修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:28:15.400

要禁用一个`input`你需要设置它的`disabled`属性。如果您可以使用 jQuery，那么您正在寻找这样的东西：

```
$('#idOfYourInput').attr('disabled', true); 
```

如果 jQuery 不是一个选项，那么您将需要使用该`setAttribute`函数。查看[它的 MDN 文档](https://developer.mozilla.org/en/DOM/element.setAttribute)。像这样的东西：

```
var d = document.getElementById('idOfYourInput'); 
d.setAttribute('disabled', 'true'); 
```

（这两个代码示例都假设您`input`通过其`id`属性来识别您的。如果不是这种情况，则需要更改。jQuery 的更改很简单，您只需要更新您的选择器以识别target 属性。后一个代码示例需要使用其他一些 DOM 导航/选择功能来查找您的`input`元素。）

您希望将其包含在提交按钮的处理程序中。但是，请理解，这仅对页面的当前上下文很重要。所以我*假设*您的提交按钮被用于通过 AJAX 执行提交，而不是实际发布整个页面，对吗？因为如果您要发布整个页面，那么当页面刷新时，您将处于一个全新的页面上下文中。（这意味着与按钮单击事件相关的任何代码都不会运行。）

# groovy - 如何制作“StringWriterMarkupBuilder”

> ID：10665478
> 
> 赞同：2
> 
> 时间：2012-05-19T13:12:04.783
> 
> 标签：groovy

如何创建一个类型，它是 a`MarkupBuilder`但具有用 a 初始化的默认构造函数`StringWriter`并覆盖以`toString()`调用？`toString()``StringWriter`

思路如下，当然不允许在调用超级构造函数之前初始化实例变量：

```
class StringWriterMarkupBuilder extends MarkupBuilder {
    final def sw = new StringWriter()
    StringWriterMarkupBuilder() {
        super(sw)
    }

    @Override String toString() {
        sw.toString()
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:40:37.827

抱歉，我终于通过深入研究 MarkupBuilder 的 Groovy 源代码找到了解决方案！：

```
class StringWriterMarkupBuilder extends MarkupBuilder {
    StringWriterMarkupBuilder() {
        //MarkupBuilder.this(new IndentPrinter(new PrintWriter(writer)))
        super(new StringWriter()) 
    }

    @Override String toString() {
        //IndentPrinter.PrintWriter.StringWriter
        return super.getPrinter().out.out.toString()
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:01:00.817

You could also do this with the `metaClass` like so:

```
import groovy.xml.MarkupBuilder

MarkupBuilder createSWMB() {
  new StringWriter().with { sw ->
    new MarkupBuilder( sw ).with { mb ->
      mb.metaClass.toString = { -> sw.toString() }
      mb
    } 
  }
}

MarkupBuilder mb = createSWMB()
mb.root {
  names {
    name( first:'tim', second:'yates' )
  }
}
println mb.toString() 
```

# php - Ajax 帖子不起作用

> ID：10665479
> 
> 赞同：-5
> 
> 时间：2012-05-19T13:12:17.997
> 
> 标签：php, javascript, jquery, ajax

我的代码是；

```
$.ajax({

      type: "POST",
      url: "mailyaz.php",
      data: {
      name: "testest"
      }
      }); 
```

这适用于简单的“testest”消息。但我需要发布我的 javascript 变量（var mysubject = blabla）。如果我用 mysubject 替换“testest”，它就不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:16:33.057

`var`仅在其函数范围内声明变量。因此，请确保您的 AJAX 调用在该函数内（或删除`var`- 在全局范围内声明变量）。

`mysubject`听起来像提交表单数据。`$('form#myformid').serialize()`如果您想通过 AJAX 调用提交表单数据，请尝试使用 data 属性。

# java - Java 无法执行系统命令（Ubuntu）

> ID：10665483
> 
> 赞同：2
> 
> 时间：2012-05-19T13:13:25.533
> 
> 标签：java, stream

这不是我第一次尝试从 Java 执行系统命令。但这一次证明是非常困难的。我有一个可以从终端正常执行的脚本。它从文件 (input.txt) 读取输入，对其进行处理并将结果导出到另一个文件 (ouput.txt)。整个过程持续不超过1秒。但是，当我尝试从 Java 执行它时，它会卡住并且永远不会完成。这是我的代码：

```
Process p = new ProcessBuilder("./runCalculator.sh").start();
p.waitFor(); 
```

我也试过，`Runtime.getRuntime().exec("./runCalculator.sh")`但都一样。我已经阅读了进程的 InputStream 和 ErrorStream 。错误流只返回一条消息，例如“开始计算...”

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T13:16:58.227

您需要使用以下代码：

```
ProcessBuilder pb = new ProcessBuilder();
pb.command("bash", "-c", "./runCalculator.sh");
Process process = pb.start();
int retValue = process.waitFor(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T13:14:32.613

您可能需要调用 unix 命令解释器/处理器才能使其工作。请参阅：[当 Runtime.exec() 不会](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T13:15:28.347

尝试这个：

```
Process p = new ProcessBuilder("sh ./runCalculator.sh").start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T16:18:33.050

另一个更简单的解决方案是，您可以通过输入程序名称（假设已安装程序）来打开程序，而不是创建脚本并调用它。

请注意，程序的名称并不总是您在 Gnome 的菜单中看到的，例如 Gnome 的计算器是“gnome-calculator”。

关于这个事实，您可以通过以下行运行计算器：

```
Process p = Runtime.getRuntime().exec("gnome-calculator"); 
```

在这种情况下，您不需要任何 sh 脚本（在您的情况下为 runCalculator.sh）。

# animation - 使用 Octave 动画轨迹

> ID：10665497
> 
> 赞同：4
> 
> 时间：2012-05-19T13:17:10.443
> 
> 标签：animation, plot, octave

我有一组`(x,y)`描述物体轨迹的坐标。我想使用 GNU Octave 为这条轨迹制作动画。

数据集非常大，所以如果我希望动画流畅，我将无法在每次迭代时重绘整个绘图。有哪些功能可以让我“更新”绘图而不是重绘它？

另外，我还有另一组`(vx,vy)`点，它们描述了物体的速度。我希望我的动画轨迹考虑到速度。我应该使用什么函数让程序休眠几毫秒，以使轨迹以与对象相同的速度进行动画处理？

（我已经知道 Octave 有 等功能`comet`，但我需要自己编写动画师。）

* * *

**编辑：**这是我到目前为止所拥有的。我希望它运行得太快并且需要我使用`pause`，但它仍然很慢（`x`并且`y`有 10001 个元素）。

```
bounds = [min(x) max(x) min(y) max(y)];
axis(bounds);

hold on
for k = 2 : length(x)
    plot(x(k-1:k), y(k-1:k));
    drawnow("expose");
end
hold off 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T13:52:39.960

您可以使用该`set`命令仅更改某个绘图对象的`XData`和数据：`YData``h`

```
h = plot(my_xdata(0),my_ydata(0))
for i_=1:length(my_xdata)
    set(h, 'YData', my_ydata(i_))
    set(h, 'XData', my_xdata(i_))
    pause(sqrt(vx(i_)^2+vy(i_)^2))
end 
```

`pause(x)`命令暂停几秒钟，`x`可以小于 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:21:59.047

我认为您正在寻找“保持”命令。持有该图将所有以前的数据保留在该图上，并将新数据添加到顶部。

# php - setcookie 不适用于 $value 参数的字符串数组

> ID：10665498
> 
> 赞同：0
> 
> 时间：2012-05-19T13:17:19.633
> 
> 标签：php, arrays, arguments, argument-passing, setcookie

我正在尝试这样做：

```
setCookie('visitor', array(0 => 'one', 1 => 'two'), time()+3600, COOKIEPATH, COOKIE_DOMAIN, false); 
```

但我无法让它工作。php 参考解释了“$value as string[optional]”（据我的理解）应该接受一个字符串数组作为参数。如果我对 php 参考（ string[optional] ）的理解是错误的，请帮助我实现与此类似的事情或纠正我。

这是 setcookie 函数声明：

```
setcookie($name, $value, $expire, $path, $domain, $secure, $httponly); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T13:21:06.150

改为使用`serialize(array(0 => 'one', 1 => 'two'))`。

`unserialize()`再次检索数组时使用。

不：如果 php 手册说函数需要一个字符串......那么他们的意思是一个字符串。不是字符串数组。

也许你被[可选]愚弄了？方括号没有任何意义。整个“[可选]”只是意味着可以在没有此参数的情况下调用该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:32:48.950

如果该`setcookie()`函数确实允许您重载类型，它将通过将数组传递到循环中来实现。由于它不支持数组，我会在函数外使用一个 foreach 循环。

```
foreach (array(0 => 'one', 1 => 'two') as $key => $value) {
    setcookie('visitor[' . $key . ']', $value, time()+3600, COOKIEPATH, COOKIE_DOMAIN, false);
)

var_dump($_COOKIE); 
```

这导致...

```
array(1) {
    ["visitor"]=>
    array(2) {
        [0]=>
        string(3) "one"
        [1]=>
        string(3) "two"
    }
} 
```

# c# - C# 中的计时器在打开程序后触发 X 秒？

> ID：10665500
> 
> 赞同：3
> 
> 时间：2012-05-19T13:17:50.443
> 
> 标签：c#, winforms

如何在程序打开后 10 秒后运行一个功能。

这是我尝试过的，但我无法使其工作。

```
private void button1_Click(object sender, EventArgs e)
{
    Timer tm = new Timer();
    tm.Enabled = true;
    tm.Interval = 60000;
    tm.Tick+=new EventHandler(tm_Tick);
}
private void tm_Tick(object sender, EventArgs e)
{
    Form2 frm = new Form2();
    frm.Show();
    this.Hide();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T13:22:19.710

你有几个问题：

1.  您需要使用`Load`事件而不是按钮单击处理程序。
2.  您应该将间隔设置`10000`为等待 10 秒。
3.  您正在为计时器实例使用局部变量。这使您以后很难参考计时器。将计时器实例改为表单类的成员。
4.  请记住在运行表单后停止时钟，否则它将尝试每 10 秒打开一次

换句话说，是这样的：

```
private Timer tm;

private void Form1_Load(object sender, EventArgs e)
{
    tm = new Timer();
    tm.Interval = 10 * 1000; // 10 seconds
    tm.Tick += new EventHandler(tm_Tick);
    tm.Start();
}

private void tm_Tick(object sender, EventArgs e)
{
    tm.Stop(); // so that we only fire the timer message once

    Form2 frm = new Form2();
    frm.Show();
    this.Hide();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:26:54.133

对你的程序有好处吗？

```
namespace Timer10Sec
{
    class Program
    {
        static void Main(string[] args)
        {
            Thread t = new Thread(new ThreadStart(After10Sec));
            t.Start();
        }

        public static void After10Sec()
        {
            Thread.Sleep(10000);
            while (true)
            {
                Console.WriteLine("qwerty");
            }
        }
    }
} 
```

# android - Android模拟器中的互联网访问

> ID：10665501
> 
> 赞同：1
> 
> 时间：2012-05-19T13:18:05.997
> 
> 标签：android, android-emulator

实际上我无法在android模拟器中访问互联网。当我试图在 webview 中打开网站时，在模拟器中它没有加载。我也尝试在模拟器中使用内置的 webkit 浏览器，但遇到同样的问题，它没有加载。当我在过去 15 天前执行相同的项目时，它执行成功，但现在没有加载。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T14:42:54.173

如果您使用代理，则必须正确配置模拟器的代理设置。最简单的方法是执行以下操作（适用于 Android Emulator 4.0.3）：

1.  去`Menu`

2.  点击`Settings`

3.  点击`More`进入`Wireless and Networks`

4.  点击`Mobile Networks`

5.  点击`Access Point Names`

6.  点击`TelKila`互联网

7.  输入`Proxy`和`Port`

8.  输入`Username`，`Password`如果需要，其余字段留空

9.  按`Save`

# android - java.lang.NullPointerException android 和 jtwitter

> ID：10665502
> 
> 赞同：0
> 
> 时间：2012-05-19T13:18:16.923
> 
> 标签：android, nullpointerexception, jtwitter

我正在尝试使用 android 应用程序从 yamba 中提取时间线，但是每当我运行该程序时，它都会失败并出现以下错误：

```
04-15 15:58:18.578: E/AndroidRuntime(5418): FATAL EXCEPTION: Thread-171
04-15 15:58:18.578: E/AndroidRuntime(5418): java.lang.NullPointerException
04-15 15:58:18.578: E/AndroidRuntime(5418):     at com.example.yamba.UpdaterService$1.run(UpdaterService.java:32) 
```

代码是这样的：

```
package com.example.yamba;
import java.util.List;

import winterwell.jtwitter.Twitter;
import winterwell.jtwitter.Twitter.Status;
import winterwell.jtwitter.TwitterException;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

public class UpdaterService extends Service{
    static final String TAG = "UpdaterService";
    static final int DELAY = 30; //seconden
    Twitter twitter;

    @Override
    public void onCreate() {
        super.onCreate();
        Twitter twitter = new Twitter("student", "password");
        twitter.setAPIRootUrl("http://yamba.marakana.com/api");
        Log.d(TAG, "onCreated");
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        new Thread() {
            public void run() {
                try {
                    while(true) {
                        List<Status> timeline = twitter.getPublicTimeline();

                    for (Status status : timeline) {
                        Log.d(TAG, String.format("%s: %s", status.user.name,
                                status.text));
                        }

                        Thread.sleep(DELAY*1000);
                    }

                } catch (TwitterException e) {
                    Log.e(TAG, "Failed because of network error.", e);
                } catch (InterruptedException e) {
                    Log.d(TAG, "Updater interrupted", e);
                }
            }
        }.start();

        Log.d(TAG, "onStarted");
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.d(TAG, "onDestroyed");
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

第 32 行是：`List<Status> timeline = twitter.getPublicTimeline();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:23:51.947

`Twitter`您在方法内部初始化一个本地实例`onCreate`，因此您的类成员保持为空。

代替

```
Twitter twitter = new Twitter("student", "password"); 
```

它应该是

```
twitter = new Twitter("student", "password"); 
```

# ios - iPhone 中任何类似于 Android ArrayList 的东西

> ID：10665507
> 
> 赞同：1
> 
> 时间：2012-05-19T13:19:12.050
> 
> 标签：ios, arraylist, mapping

我来自 android 背景，我刚开始在 iPhone 上工作，我想在 iPhone 中执行此操作，就像在 Android 中一样。

```
ArrayList<String> aa = new ArrayList<String>();

public void fillArray(String s)
{
    aa.add(s);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:43:51.350

正如**Binyamin Sharet**建议的那样，您必须使用`NSMutableArray`. 此类允许您创建动态数组。您可以执行添加或删除。相反`NSArray`是它的不可变版本。您不能将对象添加或删除`NSArray`一次创建。

相同的区别可以应用于`NSDictionary`和`NSMutableDictionary`（和其他）。

这里举一个简单的例子。

```
NSMutableArray* arr = [[NSMutableArray alloc] init];
[arr addObject:@"first string"];
[arr addObject:@"second string"]; 
```

`NSMutableArray`（同样可以应用于其他类）的一个重要方面是内存管理。当您将对象`NSMutableArray`添加到 a 时，它会保留添加到其中的对象。因此，如果您**不**使用 ARC，则必须处理这方面的问题。

```
NSMutableArray* arr = [[NSMutableArray alloc] init];
id obj = [[NSObject alloc] init]; // a general object
[arr addObject:obj];

[obj release]; 
```

有关更多信息，我建议您阅读有关[NSMutableArray 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)的信息。

希望能帮助到你。

# iphone - 点击没有 alpha 响应的 UIImageView？

> ID：10665511
> 
> 赞同：0
> 
> 时间：2012-05-19T13:19:42.050
> 
> 标签：iphone, objective-c, ipad, transparency, alpha

我有一个具有相对较大的透明度区域的图像，alpha 空间。那么有没有一种方法可以检测到对此的点击，`UIImageView`但如果用户点击 alpha 区域则没有任何响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:41:34.673

这是理论上的，我没有要添加的代码，但是您可以创建一个相同的按钮并将其添加到 UIControlStateTouched 中，这样在触摸按钮/图像时不会发生任何变化。

# json - 使用基于 HTTP 的 JSON 作为点对点？

> ID：10665513
> 
> 赞同：0
> 
> 时间：2012-05-19T13:20:00.077
> 
> 标签：json, http, p2p

我正在复习考试，有点困惑。例如，如果通过 HTTP（httpwebrequest？）传输对象，这是否是对等应用程序？

抱歉，如果这含糊不清，我对此了解不多:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:24:45.227

不太可能，它可能是“客户端-服务器”，客户端是 Internet Explorer 或 Firefox 等“瘦客户端”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T13:30:02.123

您无法仅从它是基于 HTTP 的 JSON 的事实来判断。例如，一个点对点文件共享程序可以根据需要使用 JSON over HTTP 点对点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T13:25:06.950

我不这么认为，它仍然是客户端/服务器，因为您正在请求资源并且服务器将其提供给您。服务器无法向客户端请求任何内容。

# java - 像整数数组这样的原始数据类型如何具有字段“长度”？

> ID：10665518
> 
> 赞同：2
> 
> 时间：2012-05-19T13:20:48.670
> 
> 标签：java, arrays

当它不是一个类时，像整数数组这样的原始数据类型如何具有字段“长度”？例如

```
int a[] = {1,2,3,4};
int j = a.length;
System.out.println(j); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T13:21:14.863

很简单：数组不是原语。相反，它们是引用类型的对象。

另一种体验这一点的方法是查看如果将一个 int 数组传递给一个方法并从该方法中修改该数组的内容会发生什么。您会看到这也会修改原始数组对象，就像所有引用类型（非原始）的变量一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T14:08:55.783

> 当它不是一个类时，像整数数组这样的原始数据类型如何具有字段“长度”？

其他答案解释了数组不是Java中的原始数据类型。

虽然数组类型没有声明为类，但它在许多方面都*像*一个类。例如：

*   每个数组类型都有`java.lang.Object`其隐式超类，
*   数组实例由引用表示，并且可以（在大多数情况下）保持状态，
*   数组类型有方法；即声明的方法`Object`，和
*   你可以调用`getClass()`一个数组实例来获取它的`Class`对象。

如果您考虑这些，则数组具有某些包含数组大小的状态在语义上并不是不一致的。

* * *

Java 语言设计者决定将数组的长度建模为一个只读字段，称为`length`其类型为`int`。这就是它的样子（根据语言语法），这就是它的行为方式。

“长度”字段的“差异性”仅在实现级别很明显：

*   该`length`字段在数组对象的对象头中表示，并且
*   有一个特殊的字节码用于访问数组对象的长度（ARRAYLENGTH - 字节码 190）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T13:36:54.180

数组是引用类型的对象，而不是原语。

# windows - 在 Node.js 中安装“express”时出现 ENOTFOUND 错误 - Windows

> ID：10665528
> 
> 赞同：1
> 
> 时间：2012-05-19T13:21:46.750
> 
> 标签：windows, node.js, npm

我正在尝试通过我的 Windows 7 CMD 安装 Node.js 的 express 包。

我做了一个

```
npm install express 
```

我收到以下错误：

```
npm ERR! Error: getaddrinfo ENOENT
npm ERR!     at errnoException (dns.js:31:11)
npm ERR!     at Object.onanswer [as oncomplete] (dns.js:140:16) 
```

和

```
 npm ERR! cwd D:\node
    npm ERR! node -v v0.6.15
    npm ERR! npm -v 1.1.16
    npm ERR! syscall getaddrinfo
    npm ERR! code ENOTFOUND
    npm ERR! message getaddrinfo ENOENT
    npm ERR! errno {}
    npm ERR!
    npm ERR! Additional logging details can be found in:
    npm ERR!     D:\node\npm-debug.log
    npm not ok 
```

我在防火墙后面工作。这是偶然的，这背后的原因吗？

非常感谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T02:46:59.733

用管理员运行 cmd 就可以了。

# regex - Perl - 将所有匹配字符串生成到正则表达式

> ID：10665538
> 
> 赞同：3
> 
> 时间：2012-05-19T13:23:35.777
> 
> 标签：regex, perl, data-generation

我是 perl 的新手，我想知道是否有一种方法可以生成与正则表达式匹配的所有组合。

如何生成所有匹配字符串的最佳方法是：

```
05[0,2,4,7][\d]{7} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T14:22:43.723

虽然您不能只使用任何正则表达式并生成它可能适合的任何字符串，但在这种情况下，您可以轻松适应和克服。

您可以使用[`glob`](http://perldoc.perl.org/functions/glob.html)生成组合：

```
perl -lwe "print for glob '05{0,2,4,7}'"
050
052
054
057 
```

但是，我不应该告诉你这`\d{7}`实际上意味着几百万个组合，对吧？生成数字列表很简单，可以通过以下方式格式化它们[`sprintf`](http://perldoc.perl.org/functions/sprintf.html)：

```
my @nums = map sprintf("%07d", $_), 0 .. 9_999_999; 
```

那是假设您只在寻找 0-9 数字。

将这些数字与全局数字结合起来：Tada。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T13:27:28.730

不，没有办法为某个正则表达式生成所有匹配项。考虑这个：

```
a+ 
```

该正则表达式有无数个匹配项，因此您无法将它们全部列出。

顺便说一句，我认为您希望您的正则表达式看起来像这样：

```
05[0247]\d{7} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T14:53:50.073

# 2012年答案

*   [字符串::随机](http://p3rl.org/String::Random)
*   [Regexp::Genex](http://p3rl.org/Regexp::Genex) - 生成匹配正则表达式的随机字符串；不是所有可能的字符串，即使对于像这样的有限模式`[class]`
*   [解析::兰德根](http://p3rl.org/Parse::RandGen)
*   [§6.5](http://hop.perl.plover.com/book/pdf/06InfiniteStreams.pdf) [HOP](http://hop.perl.plover.com/book/)中的正则表达式字符串生成

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T04:53:50.100

然后有*一种*方法可以为这个特定的正则表达式生成所有（40 亿个）匹配项，即`05[0247]\d{7}`：

```
use Modern::Perl;

for my $x (qw{0 2 4 7}) {
    say "05$x" . sprintf '%07d', $_ for 0 .. 9999999;
} 
```

# google-chrome - 使用文本阴影时，Firefox 和 Chrome 中的行高不同

> ID：10665541
> 
> 赞同：12
> 
> 时间：2012-05-19T13:24:04.050
> 
> 标签：google-chrome, webkit, css

出于某种原因，Firefox 和 Chrome 在使用 text-shadow 时会以不同的方式呈现 line-height。

CSS：

```
#tracker {
    width:200px;
    color:#999;
    font:normal 12px Verdana,sans-serif;/* Swapped out Arial with Verdana */
}

#tracker ol {
    float: right;
    margin: 0;
    padding: 0;
    white-space: nowrap;
    list-style: none;
}

#tracker li {
    float: left;
    margin: 0 0 0 6px;
    padding: 0;
    height: 13px;
    width: 13px;
    color: #666;
    background-color: #ccc;
    border: 1px solid #c0c0c0;
    border-radius: 9px;
    -moz-border-radius: 9px;
    -webkit-border-radius: 9px;
    text-align: center;
    line-height: 13px;
    font-size: 9px;
    text-shadow: 1px 1px 1px #fff;
    overflow: hidden;
}

#tracker li.current {
    color: #fff;
    text-shadow: -1px -1px 1px #033e69;
    font-weight: bold;
    background-color: #13699e;
    border: 1px solid #369;
}
#tracker li span{display:none;}
#step1:before{content:"1"}
#step2:before{content:"2"}
#step3:before{content:"3"}
#step4:before{content:"4"}​ 
```

HTML：

```
<div id="tracker">
    <span class="steps">Steps <span id="current-step">1</span> of 4</span>
    <ol>
        <li id="step1" class="current"><span>Sender</span></li>
        <li id="step2" class="future"><span>Recipient</span></li>
        <li id="step3" class="future"><span>Delivery info</span></li>
        <li id="step4" class="future"><span>Line items</span></li>
    </ol>
</div> 
```

当文本阴影低于文本（正数）时，它会将文本向上压。

![Tracker-webkit-firefox](../Images/32c55ea7beab1afee8ac5575adda039c.png)

无论阴影在哪里渲染，文本不应该是相同的吗？（如FF和IE所示？）

我发现的唯一解决方法是在阴影低于（使用正数）时增加行高（从 13px 到 15px），但是对于非 webkit 浏览器（Firefox 和 IE）它会搞砸。

[问题演示](http://jsfiddle.net/qU5dc/17/)......有什么想法吗？

**更新：** 我想通了并更新了我的代码。这是一个字体问题。我正在使用 Arial，但是当我将其更改为 Verdana 时，问题就解决了。很奇怪！

**[解决方案！](http://jsfiddle.net/qU5dc/16/)**:)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-19T14:08:44.847

以文本相关单位指定行高将提供跨渲染引擎的一致行为。

只需计算容器高度与文本高度的关系：

> 13 / 9 = 1.444~

...并将其应用于 CSS 中的相关规则：

```
#tracker li {
    line-height: 1.444;
} 
```

**[jsFiddle 上的演示](http://jsfiddle.net/qU5dc/40/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T06:39:58.827

这似乎是 Arial 和 Helvetica 字体在以低于 10 像素的大小呈现时出现的问题。将字体更改为 Verdana 可以解决问题。

我必须更改的代码的唯一部分是 CSS 中的以下声明：

```
#tracker { 
    /* from this...
    font:normal 12px Arial,Helvetica,sans-serif;*/ 
    /* to this...*/
    font: normal 12px Verdana, sans-serif;
} 
```

**[解决方案！](http://jsfiddle.net/qU5dc/16/)**:)

**或者**，如果您为 Arial 或 Helvetica 使用较大的字体大小，它也可以工作，**[如此处所示](http://jsfiddle.net/qU5dc/18/)**。（但是你需要将阶梯圆的高度和宽度从 13px 增加到 14px。）

这是较大字体版本的 CSS，使用 Arial 或 Helvetica：

```
#tracker { 
    /* this has changed */
    font: normal 14px Helvetica, Arial, sans-serif;
    /* the rest is the same as before */
    width: 200px;
    color: #999;
}

#tracker ol {
    float: right;
    margin: 0;
    padding: 0;
    white-space: nowrap;
    list-style: none;
}

#tracker li { 
    /* these were changed */
    height: 14px;
    width: 14px;
    font-size: 11px;
    /* the rest is the same as before */
    float: left;
    margin: 0 0 0 6px;
    padding: 0;
    border: 1px solid #c0c0c0;
    border-radius: 9px;
    -moz-border-radius: 9px;
    -webkit-border-radius: 9px;
    text-align: center;
    line-height: 1.45em;
    color: #666;
    background-color: #ccc;
    text-shadow: 1px 1px 1px #fff;
    overflow: hidden;
}

#tracker li.current {
    color: #fff;
    text-shadow: -1px -1px 1px #033e69;
    font-weight: bold;
    background-color: #13699e;
    border: 1px solid #369;
}

#tracker li span {
    display: none;
}

#step1:before {
    content: "1"
}

#step2:before {
    content: "2"
}

#step3:before {
    content: "3"
}

#step4:before {
    content: "4"
}
​ 
```

# c++ - 如何将单个 32 位浮点加载到 AVX ymm 寄存器中的所有八个位置？

> ID：10665547
> 
> 赞同：3
> 
> 时间：2012-05-19T13:24:54.353
> 
> 标签：c++, optimization, avx

如何将单个 32 位浮点数加载/转换为 AVX 256 ymm 寄存器，以便所有 8 个浮点数都来自单源浮点数？

以前我使用 AVX 128 xmm 寄存器将单个浮点数加载到 4 个压缩浮点数中。

```
 movss    xmm7,[eax];
    shufps   xmm7,xmm7,0;

    add eax, 0x4; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-19T14:15:21.147

这种操作有时被称为“广播”。AVX 有一堆指令可以做到这一点，它们是`vbroadcast128`,`vbroadcastsd`和`vbroadcastss`. 由于您要广播单个单精度浮点值，因此您需要以下最后一个：

```
vbroadcastss ymm7, [eax] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T00:28:22.830

如果您不想仅使用临时内存位置在所有寄存器位置广播值，则可以考虑执行以下操作：

```
shufps      xmm0, xmm0, 0
vinsertf128 ymm0, ymm0, xmm0, 1 
```

假设`xmm0`包含在寄存器的最低双字开头的标量值。`shufps`，当与 0 一起用作立即操作数时，将最低 dword 复制到 XMM 寄存器的所有位置。`vinsertf128`然后用较低的 xmmword 替换 YMM 寄存器的较高 xmmword。

我还没有检查哪个版本实际上更快。您最好在自己的应用程序中进行测试。如果您问我，没有`vbroadcast`带有寄存器操作数的 a 真是太糟糕了。

# asp.net - AntiXSS HtmlEncode Textarea 换行丢失

> ID：10665549
> 
> 赞同：3
> 
> 时间：2012-05-19T13:24:59.473
> 
> 标签：asp.net, xss, html-encode, antixsslibrary

我正在 ASP.NET 上开发 Web 应用程序，我从用户那里获取 textarea 输入，然后在网站上显示此输入。在将输入保存到数据库时，我没有对输入进行编码，而是直接将它们写入 db。

如果输入包含“输入”，我不想丢失换行符。所以我正在替换这样的数据： Replace("\r\n", " `<br />`")

为了在显示之前防止 XSS 攻击，我正在使用 Microsoft 的 AntiXSS 库的 Microsoft.Security.Application.Encoder.HtmlEncode 函数对数据进行编码。

此函数还对“”进行编码`<br/>`，并且在屏幕上我没有任何换行符。

如果我先用 AntiXSS 编码，然后用“”替换“\r\n”，`<br/>`我也没有得到任何换行符，因为我认为 AntiXSS 删除了“\r\n”。

如果我使用 Server.HtmlEncode 然后将 "\r\n" 替换为 " `<br/>`" 那么一切都很好。但我想使用 AntiXSS 库，但我不知道如何实现这一点。

有没有办法使用 AntiXSS HtmlEncode 函数打印换行符？

谢谢

# javascript - 帧间 JavaScript 通信？（在同一个域上）

> ID：10665552
> 
> 赞同：0
> 
> 时间：2012-05-19T13:25:11.943
> 
> 标签：javascript, html, frames

自从我上次在我的编辑器中打字已经有很多年`<frameset>`了，但今天我发现自己就是这样做的。

我正在编写一个使用框架的小工具。在一个框架中，我有一个带有文本输入的文档，在另一个框架中，我有一个`<ul>`项目。当我在一帧中输入文本字段时，我需要在另一帧中显示/隐藏项目`<ul>`。从历史上看，我记得这会很好用。但是今天尝试一下，Chrome 正在抛出一个摇摆不定的问题：

> 不安全的 JavaScript 尝试从具有 URL 文件://localhost/Users/chris/multi_yardoc/projects/menu.html 的框架访问具有 URL 文件://localhost/Users/chris/multi_yardoc/projects/list.html 的框架。域、协议和端口必须匹配。

```
<script>
  $(document).ready(function() {
    $("#search-box").bind("keyup", function() {
      $("li[class*='object-']", top.frames["list"].document).hide();
      $("li[class*='object-" + $(this).val() + "']", top.frames["list"].document).show();
    });
  });
</script> 
```

这个错误对我来说毫无意义，因为域、协议和端口都匹配。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:33:25.180

Chrome 对文件协议 url 有一个特殊的相同域策略。请参阅[不安全的 JavaScript 尝试访问 Google Chrome 中的框架](https://stackoverflow.com/questions/5660116/unsafe-javascript-attempt-to-access-frame-in-google-chrome)

# javascript - HTML/CSS 和 javascript 中的选项卡中的选项卡？

> ID：10665553
> 
> 赞同：3
> 
> 时间：2012-05-19T13:25:12.163
> 
> 标签：javascript, html, css, tabs, nested

我想在 HTML 中创建一个选项卡式视图。我的问题是其中一个选项卡中有选项卡。我的问题是我不知道如何确保子选项卡不显示，除非我在配置文件选项卡中。实现这一目标的最佳方法是什么？如何使用 javascript 相应地更新类而不显示选项卡？任何帮助将不胜感激。我的代码是

```
 <div class="tabheader">
            <ul>
                <li><a href="#addprop_tab" title="">Add Property</a></li>
                <li><a href="#savedprop_tab" title="">Saved Property</a></li>
                <li><a href="#inbox_tab" title="">Inbox</a></li>
                <li><a href="#profile_tab" title="">Update Profile</a></li>
            </ul>
        </div> <!-- End of tabheader -->
        <div class="tabcontent">
            <div id="addprop_tab">
                <p><a href="#" title="Click to add property">Add your property to NPLH</a></p>
                show added property
            </div> <!-- End of addprop_tab -->
            <div id="savedprop_tab">
                <p>Browse your saved properties</p>
            </div> <!-- End of savedprop_tab -->
            <div id="inbox_tab">
                <p>inbox</p>
            </div> <!-- End of inbox_tab -->
            <div id="profile_tab">
                <ul>
                    <a href="#tab1" title="">Tab1</a>
                    <a href="#tab2" title="">Tab2</a>
                    <a href="#tab3" title="">Tab3</a>
                </ul>
            </div> <!-- End of profile_tab -->
        </div> <!-- End of tabcontent -->
        <div class="subtab_content">
            <div id="tab1">
                <p>tab1</p>
            </div> <!-- End of tab1 -->     
            <div id="tab2">
                <p>tab2</p>
            </div> <!-- End of tab2 --> 
            <div id="tab3">
                <p>tab3</p>
            </div> <!-- End of tab3 --> 
        </div> 
```

CSS代码是

```
.tabheader {
    width: 1000px;
    position: relative;
    top: -100px;
}

.tabheader ul { 
    list-style-type: none;
}

.tabheader ul li {
    float: left;
    width: 175px;
    font-size: 15px;
    text-align: center;
    padding: 10px 25px 10px 25px;
    margin: 0px 11px 5px 11px;
    border: 1px solid #aaa;
}

.tabcontent {
    clear: both;
    position: relative;
    top: -100px;
    height: 40px;
    overflow: hidden;
    background: #eee;
}

.tabcontent div {
    height: 40px;
    padding: 10px;
}

.subtab_content {
    clear: both;
    position: relative;
    top: -100px;
    height: 200px;
    overflow: hidden;
    background: #eee;
}

.subtab_content div {
    height: 200px;
    padding: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:52:17.473

我在这里回答我自己的问题......这是几个小时的工作，但我真的不知道 javascript 中的任何其他变量。这是最好的方法吗？

您的意见将不胜感激。

JS

```
<script type="text/javascript">
    function activateTab(mainid, li_id, divid, tabid) {
        var mainDiv = document.getElementById(mainid);
        var li = document.getElementById(li_id);
        var tabDiv = document.getElementById(divid);
        var mainTab = document.getElementById(tabid);

        for (var i = 0; i < mainDiv.childNodes.length; i++) {
            var node = mainDiv.childNodes[i];
            if (node.nodeType == 1) {
                node.style.background = (node == li) ? '#aaa' : 'white';
            }
        }
        for (var i = 0; i < tabDiv.childNodes.length; i++) {
            var node = tabDiv.childNodes[i];
            if (node.nodeType == 1) {
                node.style.display = (node == mainTab) ? 'block' : 'none';
            }
        }
    } 
```

HTML

```
 <div id="tabheader">
        <ul id="tablist">
            <li id="addprop" style="background: #aaa"><a href="javascript:activateTab('tablist','addprop','tabcontent','addprop_tab')" title="">Add Property</a></li>
            <li id="savedprop"><a href="javascript:activateTab('tablist','savedprop','tabcontent','savedprop_tab')" title="">Saved Property</a></li>
            <li id="inbox"><a href="javascript:activateTab('tablist','inbox','tabcontent','inbox_tab')" title="">Inbox</a></li>
            <li id="profile"><a href="javascript:activateTab('tablist','profile','tabcontent','profile_tab')" title="">Update Profile</a></li>
        </ul>
    </div> <!-- End of tabheader -->
    <div id="tabcontent" class="maintab">
        <div id="addprop_tab" style="display: block">
            <p><a href="#" title="Click to add property">Add your property to NPLH</a></p>
        </div> <!-- End of addprop_tab -->
        <div id="savedprop_tab" style="display: none">
            <p>Browse your saved properties</p>
        </div> <!-- End of savedprop_tab -->
        <div id="inbox_tab" style="display: none">
            <p>inbox</p>
        </div> <!-- End of inbox_tab -->
        <div id="profile_tab" style="display: none">
            <p>
                <ul>
                    <a href="javascript:activateTab('tablist','profile','profile_subtab','tab1')" title="">Tab1</a>
                    <a href="javascript:activateTab('tablist','profile','profile_subtab','tab2')" title="">Tab2</a>
                    <a href="javascript:activateTab('tablist','profile','profile_subtab','tab3')" title="">Tab3</a>
                </ul>
            </p>
            <div id="profile_subtab" class="subtab">
                <div id="tab1" style="display: block">
                    <p>tab1</p>
                </div> <!-- End of tab1 -->
                <div id="tab2" style="display: none">
                    <p>tab2</p>
                </div> <!-- End of tab2 -->
                <div id="tab3" style="display: none">
                    <p>tab3</p>
                </div> <!-- End of tab3 -->
            </div>
        </div> <!-- End of profile_tab -->
    </div> <!-- End of tabcontent --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:32:05.213

好的，忘记前面的答案。jQuery 选项卡或类似的解决方案是要走的路。当我问这个问题时，我对 Web 开发真的很陌生

# javascript - tp如何解析在webmethod中与arraylist一起返回的Json结果？

> ID：10665558
> 
> 赞同：2
> 
> 时间：2012-05-19T13:26:44.867
> 
> 标签：javascript, jquery, asp.net, json

这是一个简化的代码。我有`webservice` `(.asmx)`以下内容：我将一些值存储在中`Test class`，然后将其存储`class`在`arraylist`.
我在两个不同的地方做了两次`arraylists`。然后将这两个数组列表存储在 a 中`third arraylist.` ，然后将其传递`arraylist`为`output of webmethod.`

```
 private class Test
        {
            public string Id;
            public string Name;
        } 
```

[网络方法]

```
 public ArrayList RuleReport(long RuleId)
    {
        Test t = new Test();
        t.Id = "1";
        t.Name = "a";

        ArrayList ar = new ArrayList();
        ArrayList ar2 = new ArrayList();
        ArrayList ar3 = new ArrayList();

        ar.Add(t);

t = new Test();
        t.Id = "2";
        t.Name = "b";
        ar2.Add(t);
        ar3.Add(ar);
        ar3.Add(ar2);
        return ar3;
    } 
```

并且在`js`文件中我想解析他的`json`结果以读取每个`Id`和`Name`两个的值`arraylists`。

```
id=1,name=a
id=2,name=b 
```

这是我的jQuery代码：

```
 $.ajax(
{ url: " Ajaxes/Rules.asmx/RuleReport",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    type: "POST",
    data: "{'RuleId':'79'}",
    async: false,
    success: function(data) {
    $.each(data.d, function(index, obj) {
    alert(obj.d[0].Id);// something like this. How to do it???
        })

    }, error: function() { }
}); 
```

这是火灾错误中的 json 响应：

```
{"d":[[{"Id":"1","Name":"a"}],[{"Id":"2","Name":"b"}]]} 
```

如何获得每个`Id`值`Name`？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:38:43.187

使用您当前的`$.each`循环内设置，您将获得

```
[{"Id":"1","Name":"a"}] 
```

作为`obj`. 如您所见，它`array of object`只是`one object`内容。您可以使用 访问它`object`，`obj[0]`然后可以使用`obj[0].Id`和访问它们的属性`obj[0].Name`

您可以使用以下代码执行此操作

```
$.each(data.d,function(index,obj){

       var id = obj[0].Id;
       var name = obj[0].Name;
       // do what ever you want with them
   })​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/uhxBT/)

# javascript - 有没有办法在 jquery 创建的图像中使用 toggleslide？

> ID：10665559
> 
> 赞同：0
> 
> 时间：2012-05-19T13:26:47.303
> 
> 标签：javascript, jquery, flickr

我正在使用 jquery 使用 Flickr API 获取图像，现在我创建了一个连续 6 张照片的 div，我想在第一行之后添加幻灯片切换。有没有办法使用 jquery 来做到这一点？

非常感谢任何有用的建议。

# c# - 在asp.Net中的页面之间保存数据

> ID：10665564
> 
> 赞同：1
> 
> 时间：2012-05-19T13:27:23.203
> 
> 标签：c#, asp.net, visual-studio-2010, web-applications

我正在使用 C# 创建一个 asp.net 网站。

我有一个名为 Set Event 的页面，其中包含一些文本字段。填写其中一些后，有一个按钮将用户重定向到另一个页面。此页面有一个按钮，它将执行一些数据库处理，然后重定向到上一页。

在该页面处理之后，我想重定向回上一页（设置事件）以填充其他文本字段。

问题是：当我重定向到上一页时，我之前填充的数据消失了——空文本框。我的数据去哪儿了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:31:48.737

当您重定向时，它是一个新的 HTTP 请求。HTTP 是无状态的。所以它不会保留您之前输入的数据。您应该从持久存储机制中读取它并将其加载到文本框中。由于您将其保存到数据库中。您可以从数据库表中读取它并将其加载到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:31:28.593

你有两个选择（IMO）

1.  不断地从客户端到服务器来回传递数据，即隐藏字段、视图状态等。

2.  将数据保存在Session中，即Session["field1"] = "field1data"，或者数据库，缓存等。

然后在原始页面上调用它。

# actionscript-3 - 鼠标指针系统默认手形图标（Flixel 游戏制作库）

> ID：10665565
> 
> 赞同：1
> 
> 时间：2012-05-19T13:27:23.550
> 
> 标签：actionscript-3, flash, flixel

例如，如何将鼠标指针更改为系统默认的手形/指针图标悬停按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T00:10:16.730

[http://www.kirupa.com/flash/chang_mouse_cursor.htm](http://www.kirupa.com/flash/changing_mouse_cursor.htm)

```
package 
{
import flash.ui.Mouse;
import flash.ui.MouseCursor;
} 

// function
quitButton = new FlxButton(10, 10, "Quit", onQuit);
quitButton.onOver = function():void { Mouse.cursor = MouseCursor.BUTTON; };
quitButton.onOut = function():void { Mouse.cursor = MouseCursor.AUTO; }; 
```

# sharepoint-2010 - 将页面导航到另一个页面时出错

> ID：10665567
> 
> 赞同：0
> 
> 时间：2012-05-19T13:27:32.857
> 
> 标签：sharepoint-2010, infopath

我正在尝试使用以下代码在信息路径表单的按钮单击上重定向页面：

```
HttpContext.Current.Response.Redirect("http://www.google.com", true); 
```

但我收到此错误：

**“你调用的对象是空的。”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:44:11.267

它对你有帮助吗？

```
HttpContext.Current.Response.Redirect("http://www.google.com", false); 
```

看这里，

[http://mfawazsp.blogspot.in/2010/02/problem-with-responseredirect-in.html](http://mfawazsp.blogspot.in/2010/02/problem-with-responseredirect-in.html)

或/和这个，

[需要信息路径按钮中代码隐藏的逻辑输入](https://stackoverflow.com/questions/7467721/need-inputs-for-logic-for-codebehind-in-infopath-button)

或/和这个，

[http://social.technet.microsoft.com/Forums/sk/sharepoint2010programming/thread/16c7f7c5-545e-4375-b093-91da23041624](http://social.technet.microsoft.com/Forums/sk/sharepoint2010programming/thread/16c7f7c5-545e-4375-b093-91da23041624)

# c++ - EXE 也导出静态库导出

> ID：10665568
> 
> 赞同：3
> 
> 时间：2012-05-19T13:27:50.160
> 
> 标签：c++, pe-exports

我已经创建了一个静态库和一个 EXE 文件（它使用静态库），但是当我在 IDA pro 中打开 EXE 时，导出也列在 EXE 中。

我知道它们应该在 .lib 本身中导出，但为什么它们在 EXE 中也显示为导出？

编辑：这是一个导出/导入（它们在*单独的头文件*中）

这是导出：

```
#define NC_LIBEXPORT(a) extern "C" __declspec(dllexport) a __cdecl
NC_LIBEXPORT(VOID) rol8(unsigned char* a, unsigned char b); 
```

和进口：

```
extern "C" VOID rol8(unsigned char* a, unsigned char b); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T13:42:41.120

您需要确保在构建静态库时不使用`__declspec(dllexport)`.

如果要在 DLL 和可执行文件中使用相同的库，并且不希望可执行文件导出符号，则需要使用 DEF 文件而不是`__declspec(dllexport)`.

# python - Websocket/event-source/... 实现向 python/django 应用程序公开双向 RPC

> ID：10665569
> 
> 赞同：3
> 
> 时间：2012-05-19T13:27:51.283
> 
> 标签：python, django, websocket, rpc

对于我正在开发的 django 应用程序，我需要实现两种 RPC 方式：

*   客户端可以从平台调用 RPC 方法，并且
*   平台可以从每个客户端调用 RPC 方法。

由于客户端大多位于 NAT 之后（这意味着没有公共 IP，以及不可预测的怪异防火墙策略），因此平台到客户端的方式必须由客户端发起。

我对如何从头开始编写这个有一个很好的想法，我也认为我可以从扭曲的发布者/订阅者模型中解决一些问题，但我了解到在 python 中总是有最好的方法来做到这一点。

所以我想知道最好的方法是什么，这也将最好的集成到 django 中。该代码必须能够在短期内覆盖数百个客户，并且（我们希望）在中/长期内覆盖数千个客户。

那么您建议我使用什么库/实现？我主要寻找 RTFM 的起点！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T16:55:29.523

websocket 是一个移动的目标，不时有新的规范。勇敢的开发者实现服务器端库，但很少实现客户端。Web 套接字的客户端是 Web 浏览器。

websocket 不是服务器与客户端对话的唯一方式，[事件源](http://dev.w3.org/html5/eventsource/)是将信息推送到客户端的一种简单实用的方式。这只是一个永无止境的页面。Twitter 消防水带在其规范之前使用了这个技巧。客户端打开一个 http 连接并等待事件。连接保持打开状态，如果出现问题（连接断开，类似的东西），则重新打开。没有超时，您可以在一个连接中发送多个事件。

websocket 和 eventsource 的区别很简单。Websocket 是双向的，难以实现。Eventsource 在客户端和服务器端都是单向且易于实现的。

您可以将事件源用作僵尸控制器。每个客户端连接并重新连接到主服务器并等待指令。当收到指令时，僵尸会采取行动，如果需要，它可以通过经典的 http 连接与它的主人对话，目标是 django 应用程序。

事件源保持连接打开，所以你需要一个异步服务器，比如龙卷风。Django 需要一个同步服务器，所以，你需要两者，还有一个调度器，比如 nginx。Django 或类似 cron 的操作与异步服务器对话，与正确的僵尸对话。Zombie 与 django 对话，因此，异步服务器不需要任何持久性，它只是一个插入了僵尸的集线器。

Gevent 能够处理这样的 http 服务器，但在这一点上没有像样的文档和示例。这是一个耻辱。我想要一辆车，你给我一个螺丝钉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T22:05:48.593

你也可以使用 Tornado + [Tornadio](https://github.com/MrJoes/tornadio) + Socket.io。这就是我们现在用于通知的内容，您应该编写的代码量并不多。

```
from tornadio2 import SocketConnection, TornadioRouter, SocketServer
class RouterConnection(SocketConnection):
__endpoints__ = {'/chat': ChatConnection,
                 '/ping': PingConnection,
                 '/notification' : NotificationConnection
                 }

def on_open(self, info):
    print 'Router', repr(info)

MyRouter = TornadioRouter(RouterConnection)

# Create socket application
application = web.Application(
MyRouter.apply_routes([(r"/", IndexHandler),
    (r"/socket.io.js", SocketIOHandler)]),
        flash_policy_port = 843,
        flash_policy_file = op.join(ROOT, 'flashpolicy.xml'),
        socket_io_port = 3001,
        template_path=os.path.join(os.path.dirname(__file__), "templates/notification")
)

class PingConnection(SocketConnection):
     def on_open(self, info):
       print 'Ping', repr(info)

     def on_message(self, message):
       now = dt.utcnow()
       message['server'] = [now.hour, now.minute, now.second, now.microsecond / 1000]
       self.send(message)
class ChatConnection(SocketConnection):
   participants = set()
   unique_id = 0

   @classmethod
   def get_username(cls):
       cls.unique_id += 1
       return 'User%d' % cls.unique_id

   def on_open(self, info):
       print 'Chat', repr(info)

       # Give user unique ID
       self.user_name = self.get_username()
       self.participants.add(self)

   def on_message(self, message):
       pass

   def on_close(self):
       self.participants.remove(self)

   def broadcast(self, msg):
       for p in self.participants:
            p.send(msg) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T17:46:30.137

这是我可以想出的一个非常简单的解决方案：

```
import tornado.ioloop
import tornado.web
import time

class MainHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous 
    def get(self):
        self.set_header("Content-Type", "text/event-stream")
        self.set_header("Cache-Control", "no-cache")
        self.write("Hello, world")
        self.flush()
        for i in range(0, 5):
            msg = "%d<br>" % i
            self.write("%s\r\n" % msg) # content
            self.flush()
            time.sleep(5)

application = tornado.web.Application([
    (r"/", MainHandler),
])

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

和

```
curl http://localhost:8888 
```

当它出现时给出输出！

现在，我只需要在服务器和客户端之间实现完整的事件源规范和某种数据序列化，但这很简单。完成后，我将发布一个指向我将在此处编写的库的 URL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T16:22:51.150

我最近玩过 Django、Server-Sent Events 和 WebSocket，我在[http://curella.org/blog/2012/jul/17/django-push-using-server-sent写了一篇关于它的文章-事件和 websocket/](http://curella.org/blog/2012/jul/17/django-push-using-server-sent-events-and-websocket/)

当然，这伴随着一个常见的警告，即 Django 可能不是最适合事件的东西，而且这两个协议仍然是草稿。

# php - 每次刷新时的随机图标

> ID：10665570
> 
> 赞同：2
> 
> 时间：2012-05-19T13:27:51.870
> 
> 标签：php, favicon

我正在尝试制作一个脚本，该脚本在每次刷新时都会更改网站图标。

```
<?php
 $dir = "img/icons/";
 $files = array();
 if ($handle = opendir($dir)) {
   while (false !== ($file = readdir($handle))) {
    $files[] = $file;
   }
 }
 $icon = $files[rand(2,count($files)-1)];
 echo "<LINK REL=\"shortcut icon\" HREF=\'img/icons/'.$icon."\">";
?> 
```

该脚本从 /img/icons 文件夹中获取每个 favicon，并随机选择一个。问题是，当我将它粘贴到我的 HTML 文件中时，页面顶部会出现奇怪的字符“；？>。任何人都可以修复我的脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:25:36.650

```
<?php
 $dir = "img/icons/";
 $files = array();
 if ($handle = opendir($dir)) {
   while (false !== ($file = readdir($handle))) {
    $files[] = $file;
   }
 }
 $icon = $files[rand(2,count($files)-1)];
 echo '<LINK REL="shortcut icon" HREF="img/icons/'.$icon.'">';
?> 
```

**[在这里](http://www.ntchosting.com/php/php-in-html.html)**你可以看看在 HTML 中使用 PHP。您的服务器也应该为此正确配置。我总是建议`.php`处理 PHP 脚本。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:05:12.953

你可以试试：

```
echo "<LINK REL=\"shortcut icon\" HREF='img/icons/$icon'>"; 
```

未测试。

你没有正确地逃脱。

* * *

**编辑：**我会使用修改后的版本 Evan Mulawski 的解决方案。我认为未修改的版本更容易阅读。

我的修改是：

```
<link rel="shortcut icon" href="img/icons/<?php echo "$icon" ?>"/> 
```

我这样做是因为在一些系统上，nginx 上的 php 有时会变得有点慢，比如 ~50 毫秒，我在网络上的某个地方读过它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T14:05:30.503

正如我的评论所述，您没有正确地转义某些引文。在双引号内时不会转义单引号（反之亦然）。

将您的`echo`行替换为：

```
?>
<link rel="shortcut icon" href="<?php echo "img/icons/$icon" ?>"/> 
```

解释：

您可以在 PHP 代码中集成 HTML。关闭 PHP 标记后用纯 HTML编写`link`标记，并在需要回显图标位置时使用 PHP。这比试图逃避引用要容易得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T12:40:49.703

尝试这个。对字符串使用单引号有助于避免使用转义字符的问题。

```
echo '<LINK REL="shortcut icon" HREF="img/icons/' . $icon . '">'; 
```

# java - ++ 运算符

> ID：10665571
> 
> 赞同：1
> 
> 时间：2012-05-19T13:27:52.583
> 
> 标签：java, operators

> **可能重复：**
> [java operator ++ 问题](https://stackoverflow.com/questions/6945707/java-operator-problem)

这是代码。我知道 c++ 和 ++c 之间的区别。

```
public class sample {
  public static void main(String[] b){
    int count = 0,a=0;
    for (int i = 0; i < 3; i++){
      count=count++;
      System.out.println(count);
    } 
```

但我期待的是

```
count=count;count=count+1;//output has to be 1  2 3 
```

但输出为 0 0 0。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T13:30:19.313

你的预测是错误的。

count++ 将 count 增加 1 并返回旧值 (0)。这是你的情况。之后，您将旧值 (0) 分配给您的`count`变量。为了使其更易于理解，只需查看此代码

```
count = count; // is the same as count = count++; 
```

不使用`count = count++;`，只使用`count++`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-19T13:30:23.907

在 Java 中，此代码保证使变量具有相同的值。

就像是：

```
int temp;
temp = count;
count = count +1;
count = temp; 
```

为了实现你想要的，写：

```
count++; //or
count += 1; //or
count = count +1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T13:30:33.900

替换`count=count++;`为`count++;`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-19T13:31:34.757

```
count = count ++; 
```

这就是正在发生的事情。

首先，`count++`被评估，其评估为 0，但递增`count`。这`0`被分配给计数。所以 count 保持为 0。以下是不同的，因为 ++count 的计算结果为 1、2...

```
count = ++count; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T13:38:54.380

我稍微修改了你的代码，我已经让它工作了

```
public class sample {
    public static void main(String[] b){
        int count = 0,a=0;
        for (int i = 0; i < 3; i++){
            count++;
            System.out.println(count);
        }
    }
} 
```

您不必重新分配 count++ 的值来计数。Java 会为你做这件事。我添加了一些您的代码中缺少的括号。我希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T13:40:53.870

我想这会给你一个很好的解释。

考虑这个类：

```
public class T
{
    public void f() {
    int count = 0;
    count = count++;
    }
} 
```

这是相关的字节码：

```
public void f();
  Code:
   0:   iconst_0
   1:   istore_1
   2:   iload_1
   3:   iinc    1, 1
   6:   istore_1
   7:   return
} 
```

1.  `iconst_0`将常量 0 加载到堆栈上（这是为变量`count`赋值`0`
2.  `istore_1`将堆栈值（`0`现在）存储到变量 1
3.  `iload_1`将变量 1（`0`现在）的 int 值加载到堆栈中
4.  `zinc 1, 1``1`按变量 1递增（`count = 1`现在）
5.  `istore_1`将堆栈值（`0`现在从步骤 #3 开始）存储到变量 1
6.  返回

现在应该很清楚如何`count = count++`在 Java 中编译了。

# javascript - JavaScript 添加的 HTML 输入中的 UTF-8

> ID：10665577
> 
> 赞同：2
> 
> 时间：2012-05-19T13:28:56.693
> 
> 标签：javascript, html, utf-8, input

我只是不明白。

我的情况是，我的应用程序在页面启动时从我的 PHP 服务器通过 JSON 发送所有需要的 GUI 文本。在我的 PHP 服务器上，我有所有用 UTF-8 编写的文本特殊字符。例子：`F&#252;r`

所以在客户端我有完全相同的值，除了输入字段外，它在任何地方都能很好地显示。当我使用 JavaScript 执行此操作时：

```
document.getElementById('myInputField').value = "F&#214;r"; 
```

然后它就像那样写，没有任何特殊字符的转换。

我理解 UTF-8 概念有什么问题吗？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T13:48:18.510

该符号`&#252;`与 UTF-8 无关。使用字符引用是*避免*使用 UTF-8 的常用方法；它们可以与任何编码一起使用，但如果您使用 UTF-8，则不需要它们。

该符号`&#252;`是 HTML 符号，而不是 JavaScript。当它出现在您的 JavaScript 代码中时，它是否被 HTML 规则解释取决于上下文（例如 HTML 文档中的 JavaScript 与单独的 JavaScript 文件）。最好通过使用字符本身或使用*JavaScript*符号表示字符来避免此问题。

例如，`&#252;`表示与 相同`&#xfc;`，即 U+00FC，ü（带分音符的 u）。用于字符串文字的 JavaScript 表示法是`\u00fc`(`\u`后跟四个十六进制数字)。例如，以下将值设置为“Für”：

```
document.getElementById('myInputField').value = "F\u00fcr"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T13:55:25.450

您使用所谓的[HTML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)来编码与 UTF-8 不同的字符，但当然 UTF-8 字符串可以包含 HTML 实体。

我认为问题在于标签属性不能包含 HTML 实体，因此在分配文本输入值属性时必须使用其他编码。我认为你有两个选择：

在客户端解码 HTML 实体。一个非常丑陋的解决方案，用于搭载浏览器中可用的解码器（我在示例中使用 jQuery，但您可能明白了这一点）。

```
inputElement.value = $("<p/>").html("F&#214;r").text(); 
```

另一个更好的选择是不在服务器响应中发送 HTML 实体，而是对所有字符使用正确的 UTF-8 编码，这些字符在放入文本节点或标签属性时应该可以正常工作。这当然假设 HTML 页面使用 UTF-8 编码。

# java - weblogic 12.1.1 中的 CDI 错误

> ID：10665579
> 
> 赞同：0
> 
> 时间：2012-05-19T13:29:08.453
> 
> 标签：java, weblogic, java-ee-6, cdi, jboss-weld

我有一个用@Named 和@RequestScoped 注释的CDI bean。它在 Glassfish 3.1.2 中运行良好，但是当我在 Weblogic 12.1.1 中部署它时出现以下错误！

> 引起：org.jboss.weld.exceptions.DefinitionException：WELD-000075 正常范围的托管 bean 实现类有一个公共字段：public@Named @RequestScoped 类 com.xyweb.monitoring.MyController

我的 bean 中没有任何公共字段！！！它们都是私有的，我使用 getter 和 setter。这是 weblogic 12.1.1 中的错误吗？如何在 weblogic 中更新焊接版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:54:56.263

听起来确实像是 WebLogic 中的一个问题。我很确定他们使用的是旧版本的 Weld，您必须在 WebLogic 表单或联系人中询问有关更新的信息，我还没有看到有关如何更新版本的任何信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-10T07:55:26.620

某些 IDE（如 Netbeans）会自动导入错误的类`viewscope`。确保您 `javax.faces.bean.ViewScoped`没有导入`javax.faces.view.ViewScoped`.

# python - 如何在 Python 的 for 循环中删除列表元素？

> ID：10665591
> 
> 赞同：106
> 
> 时间：2012-05-19T13:31:01.437
> 
> 标签：python, list

我有一个清单

```
a = ["a", "b", "c", "d", "e"] 
```

我想在 for 循环中删除此列表中的元素，如下所示：

```
for item in a:
    print(item)
    a.remove(item) 
```

但它不起作用。我能做些什么？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-05-19T13:32:42.277

在使用循环对其进行迭代时，不允许从列表中删除元素`for`。

重写代码的最佳方法取决于您要执行的操作。

例如，您的代码相当于：

```
for item in a:
    print(item)
a[:] = [] 
```

或者，您可以使用`while`循环：

```
while a:
    print(a.pop(0)) 
```

> 如果它们符合条件，我正在尝试删除它们。然后我转到下一个项目。

*您可以将每个与条件不*匹配的元素复制到第二个列表中：

```
result = []
for item in a:
    if condition is False:
        result.append(item)
a = result 
```

或者，您可以使用[`filter`](http://docs.python.org/library/functions.html#filter)或列表推导并将结果分配回`a`：

```
a = filter(lambda item:... , a) 
```

或者

```
a = [item for item in a if ...] 
```

where`...`代表您需要检查的条件。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-05-19T13:37:06.020

遍历列表的副本：

```
>>> a = ["a", "b", "c", "d", "e"]
>>> for item in a[:]:
    print(item)
    if item == "b":
        a.remove(item)

a
b
c
d
e
>>> print(a)
['a', 'c', 'd', 'e'] 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-05-19T13:59:07.443

正如其他答案所说，最好的方法是创建一个新列表 - 迭代一个副本，或者构建一个仅包含您想要的元素的列表并将其分配回同一个变量。这些之间的区别取决于您的用例，因为它们会以不同的方式影响原始列表的其他变量（或者，更确切地说，第一个会影响它们，而第二个不会）。

如果由于某种原因无法选择副本，则您确实有另一个选择，该选择依赖于对为什么修改您正在迭代的列表的理解中断。列表迭代通过跟踪索引来工作，每次在循环中递增它，直到它掉出列表的末尾。因此，如果您在当前索引处（或之前）删除，则从该点到结尾的所有内容都会向左移动一个位置。但是迭代器不知道这一点，并且有效地跳过了下一个元素，因为它现在位于*当前*索引而不是下一个。但是，删除当前索引*之后*的内容不会影响内容。

这意味着如果您将列表迭代回前面，如果您删除当前索引处的项目，则它右侧的所有内容都会向左移动 - 但这并不重要，因为您已经处理了右侧的所有元素当前位置，并且您正在向左移动 - 左侧的下一个元素不受更改的影响，因此迭代器为您提供了您期望的元素。

TL;博士：

```
>>> a = list(range(5))
>>> for b in reversed(a):
    if b == 3:
        a.remove(b)
>>> a
[0, 1, 2, 4] 
```

但是，就使代码易于阅读而言，制作副本通常更好。为了完整起见，我只提到这种可能性。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-17T08:11:42.453

```
import copy

a = ["a", "b", "c", "d", "e"]

b = copy.copy(a)

for item in a:
    print(item)
    b.remove(item)
a = copy.copy(b) 
```

作品：为避免更改您正在迭代的列表，您制作一个副本`a`，对其进行迭代并从中删除项目`b`。然后您将`b`（更改后的副本）复制回`a`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-19T13:33:47.300

如何创建一个新列表并将您想要的元素添加到该新列表中。遍历列表时不能删除元素

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-28T05:39:56.910

回答这个问题可能有点晚了，但我刚刚找到了这个线程，并且我之前已经为它创建了自己的代码......

```
 list = [1,2,3,4,5]
    deleteList = []
    processNo = 0
    for item in list:
        if condition:
            print(item)
            deleteList.insert(0, processNo)
        processNo += 1

    if len(deleteList) > 0:
        for item in deleteList:
            del list[item] 
```

这可能是一个很长的路要走，但似乎运作良好。我创建了第二个列表，其中仅包含与要删除的列表项相关的数字。请注意，“插入”在位置 0 处插入列表项编号并推动其余部分，因此在删除项目时，列表将从最高编号删除回最低编号，因此列表保持顺序。

# iphone - 带有 CorePlot 的 iPhone 应用程序 - 存档问题

> ID：10665592
> 
> 赞同：1
> 
> 时间：2012-05-19T13:31:04.897
> 
> 标签：iphone, ios, core-plot, archive

我已经使用 CorePlot 开发了一个应用程序。我已经在模拟器和真实设备上进行了测试并且运行良好。我已经设置了所有这些配置，以便在我的应用程序中使用 CorePlot。但是当我尝试存档应用程序时，我收到此错误： **“CorePlot-CocoaTouch.h 文件未找到”**

有谁知道如何解决这个问题？谢谢。

# javascript - getAttributeNS 的行为是什么？

> ID：10665596
> 
> 赞同：4
> 
> 时间：2012-05-19T13:31:49.003
> 
> 标签：javascript, xml, html, dom

我正在用 JavaScript 编写一个小程序，我想在其中解析以下 XML 小片段：

```
<iq xmlns="jabber:client" other="attributes">
  <query xmlns="jabber:iq:roster">
    <item subscription="both" jid="romeo@example.com"></item>
  </query>
</iq> 
```

因为我不知道元素和属性是否有命名空间前缀，所以我使用的是命名空间感知函数（`getElementsByTagNameNS`, `getAttributeNS`）。

```
var queryElement = iq.getElementsByTagNameNS('jabber:iq:roster', 'query')[0];
if (queryElement) {
  var itemElements = queryElement.getElementsByTagNameNS('jabber:iq:roster', 'item');
  for (var i = itemElements.length - 1; i >= 0; i--) {
    var itemElement = itemElements[i];

    var jid = itemElement.getAttributeNS('jabber:iq:roster', 'jid');
  };
}; 
```

使用此代码，我没有得到属性的值`jid`（我得到一个空字符串），但是当我使用`itemElement.getAttribute('jid')`而不是`itemElement.getAttributeNS('jabber:iq:roster', 'jid')`得到预期的结果时。

如何以命名空间感知的方式编写代码？在我对 XML 的理解中，属性`jid`的命名空间具有命名空间`jabber:iq:roster`，因此函数`getAttributeNS`应该返回 value `romeo@example.com`。

[更新] 问题是（或者是）我对名称空间与 XML 属性一起使用的理解，并且与 DOM API 无关。因此，我创建了另一个问题：[XML Namespaces and Unprefixed Attributes](https://stackoverflow.com/questions/10672635/xml-namespaces-and-unprefixed-attributes)。也因为不幸的是[XML 命名空间和属性](https://stackoverflow.com/questions/41561/xml-namespaces-and-attributes)没有给我答案。

[更新]我现在所做的是首先检查是否存在没有名称空间的属性，然后检查是否存在名称空间：

```
var queryElement = iq.getElementsByTagNameNS('jabber:iq:roster', 'query')[0];
if (queryElement) {
  var itemElements = queryElement.getElementsByTagNameNS('jabber:iq:roster', 'item');
  for (var i = itemElements.length - 1; i >= 0; i--) {
    var itemElement = itemElements[i];

    var jid = itemElement.getAttribute('jid') || itemElement.getAttributeNS('jabber:iq:roster', 'jid');

  };
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T13:55:51.427

重要的是，[**除非您明确地为其添加前缀，否则属性不会获得名称空间**](http://www.w3.org/TR/xml-names/#defaulting)：

`A default namespace declaration applies to all unprefixed element names within its scope. Default namespace declarations do not apply directly to attribute names`

这与从父级继承默认命名空间的元素不同，除非有自己的定义。话虽如此，您的属性没有命名空间，这就是为什么`getAttribute()`有效而`getAttributeNS()`命名空间值无效的原因。

您的源 XML 需要看起来像这样才能“命名空间”属性：

```
<a:query xmlns:a="jabber:iq:roster">
    <a:item a:subscription="both" a:jid="romeo@example.com"></a:item>
</a:query> 
```

这里有更多关于这个主题的内容：[XML 名称空间和属性](https://stackoverflow.com/questions/41561/xml-namespaces-and-attributes)。

如果您只想使用命名空间感知方法，那么它应该（虽然不确定，可能是特定于实现的）适用于`null`命名空间。试试`getAttributeNS(null, "jid")`。如果没有，您始终可以使用 the 来解决它，`hasAttributeNS()`然后才回退到`getAttributeNS()`or `getAttribute()`。

# networking - gmail如何注销所有其他会话？

> ID：10665598
> 
> 赞同：0
> 
> 时间：2012-05-19T13:31:53.813
> 
> 标签：networking, cookies, web, gmail, mac-address

我想知道如何从 Web 服务器单独识别计算机。在 gmail 中登录一台计算机时，即使在同一网络中，我也可以注销其他 gmail 会话？gmail是如何做到的？我猜MAC地址不会是答案。识别计算机的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:34:11.910

我无法评论 GMail 的内部运作。但是您可以使用[cookie](http://en.wikipedia.org/wiki/HTTP_cookie)来跟踪单个会话。

# objective-c - iOS 5 中不显示游戏中心

> ID：10665600
> 
> 赞同：1
> 
> 时间：2012-05-19T13:32:14.570
> 
> 标签：objective-c, ios, ios5

我使用本教程访问 GameCenter。 [http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12) 我可以进入游戏中心，但是如果我想使用此代码：

```
 SFAppDelegate * delegate = (SFAppDelegate *) [UIApplication sharedApplication].delegate;                
    [[GCHelper sharedInstance] findMatchWithMinPlayers:2 maxPlayers:2 viewController:self delegate:self]; 
```

这段代码应该可以工作，但如果我打电话给我，它只会在上面显示带有蓝色工具栏的黑屏。这里的“self”是 UIViewController，这个控制器实现了 GCHelper 委托方法。

方法 find ... 看起来像这样：

```
- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController delegate:(id<GCHelperDelegate>)theDelegate {

    if (!gameCenterAvailable) return;

    matchStarted = NO;
    self.match = nil;
    self.presentingViewController = viewController; // ?
    delegate = theDelegate;               
    [presentingViewController dismissModalViewControllerAnimated:NO];

    if (pendingInvite != nil) 
    {   
        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:pendingInvite] autorelease];
        mmvc.matchmakerDelegate = self;
        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;
    }
    else 
    {   
        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease]; 
        request.minPlayers = minPlayers;     
        request.maxPlayers = maxPlayers;
        request.playersToInvite = pendingPlayersToInvite;

        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];    
        mmvc.matchmakerDelegate = self;

        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;
    }
} 
```

我不知道我做错了什么......感谢任何更正的建议。:)

# opengl - 当相机移过某个点时，OpenGL 光源“无法渲染”？

> ID：10665601
> 
> 赞同：1
> 
> 时间：2012-05-19T13:32:18.880
> 
> 标签：opengl, lighting

我正在 OpenGL 中制作一个小型模拟游戏，其中有一个球在场中，并且相机被锁定以从顶部的某个角度查看球（请参见下面的屏幕截图）。一切正常，但是，当相机经过某个点时，墙上的照明会失效。就好像在新创建的场景中“没有灯光”一样。

这是正确的： ![正确的](../Images/a40686fcb106cb705b9b6472eb9fcf57.png)

这是当相机从某个点经过时，左侧墙上的照明被重置：

![不正确](../Images/58b9fde02725d9f636c7d4706b55aed3.png)

它不会逐渐发生。它在相机移动时突然发生。这是我绘制墙壁的代码：

```
glBindTexture(GL_TEXTURE_2D, brickTexture);
glCallList(wallObjectID); 
```

列表在前面定义的位置：

```
glNewList(wallObjectID, GL_COMPILE);
glBegin(GL_QUADS);
glNormal3f(0, 90, 0);

glTexCoord2f(0, 0);
glVertex3f(0, 0, 0);
glTexCoord2f(0, 1);
glVertex3f(0, level->length, 0);
glTexCoord2f(2, 1);
glVertex3f(0,level->length, 100);
glTexCoord2f(2, 0);
glVertex3f(0, 0, 100);

glNormal3f(90, 0, 0);

glTexCoord2f(0, 0);
glVertex3f(0, 0, 100);
glTexCoord2f(0, 2);
glVertex3f(level->width, 0, 100);
glTexCoord2f(2, 2);
glVertex3f(level->width, 0, 0);
glTexCoord2f(2, 0);
glVertex3f(0, 0, 0);

glEnd();
glEndList(); 
```

以下是在程序开始时初始化的 OpenGL 设置：

```
glEnable(GL_DEPTH_TEST);
glEnable(GL_LIGHTING);
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);
glEnable(GL_CULL_FACE);
glCullFace(GL_BACK);
glShadeModel(GL_SMOOTH);
glEnable(GL_LIGHT0);
glEnable(GL_LIGHT1);
glEnable(GL_TEXTURE_2D);
glEnable(GL_DOUBLEBUFFER);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
float pos[] = { -30, -30, 30 };
float intensity[] = { 1,1,1,1 };
glLightfv(GL_LIGHT0, GL_POSITION, pos);
glLightfv(GL_LIGHT0, GL_SPECULAR, intensity);
glLightfv(GL_LIGHT1, GL_POSITION, pos);
glLightfv(GL_LIGHT1, GL_SPECULAR, intensity);
float diff[] = { 0.6f, 0.6f, 0.75f };
glLightfv(GL_LIGHT1, GL_DIFFUSE, diff); 
```

...

问题的原因可能是什么？谢谢你。

**更新**：不要对球的阴影感到困惑，它只是位于球下方的启用透明的纹理，它不是真正的阴影。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:43:52.170

您没有正确设置灯光的位置。您已经使用了 3D 矢量 - 位置。但根据[功能文档](http://www.opengl.org/sdk/docs/man/xhtml/glLight.xml)，您必须使用 4D 矢量。

第 4 个 (w) 分量表示光是定向光还是点光，1 表示它是点光。1 以外的其他值将导致不正确的翻译，例如。w = 500，您将平移 3 点，然后您的灯光移动 1500 点。

此外，当您更改模型视图矩阵以进行世界平移（相机移动）时，您还必须设置每个灯光的位置，因为当您移动世界时，灯光不会随世界移动，这意味着灯光始终在摄像头前面，即。它正在移动（锁定到）相机。读[这个](http://www.opengl.org/archives/resources/faq/technical/lights.htm)。

> 在调用 glLight*() 指定位置时，当前 ModelView 矩阵会转换灯光的位置

# haskell - 将 Haskell 代码转换为 Agda

> ID：10665607
> 
> 赞同：8
> 
> 时间：2012-05-19T13:33:51.777
> 
> 标签：haskell, agda

我们必须把这个haskell数据类型转换成agda代码：

```
data TRUE
data FALSE
data BoolProp :: * -> * where
PTrue :: BoolProp TRUE
PFalse :: BoolProp FALSE
PAnd :: BoolProp a -> BoolProp b -> BoolProp (a `AND` b)
POr :: BoolProp a -> BoolProp b -> BoolProp (a `OR` b)
PNot :: BoolProp a -> BoolProp (NOT a) 
```

这是我到目前为止所拥有的：

```
module BoolProp where

open import Data.Bool
open import Relation.Binary.PropositionalEquality

data BoolProp : Set wheree
ptrue : BoolProp true
pfalse : BoolProp false
pand : (X Y : Bool) -> BoolProp X -> BoolProp Y -> BoolProp (X ? Y)
por : (X Y : Bool) -> BoolProp X -> BoolProp Y -> BoolProp (X ? Y)
pnot : (X : Bool) -> BoolProp X -> BoolProp (not X) 
```

但是我收到了这个错误：“Set 应该是一个函数类型，但是当检查 true 是 Set 类型函数的有效参数时，它不是”。我认为 Set 需要更改为其他内容，但我对这应该是什么感到困惑。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T14:55:23.967

让我们将`BoolProp`Haskell 中的声明与 Agda 版本进行比较：

```
data BoolProp :: * -> * where
  -- ... 
```

从 Haskell 的角度来看，`BoolProp`它是一个一元类型构造函数（大致意思是：给我一个具体的类型`*`，我给你一个具体的类型）。

在构造函数中，`BoolProp`单独是没有意义的——它不是类型！您必须先给它一个类型（例如，`TRUE`在 的情况下`PTrue`）。

在您的 Agda 代码中，您声明`BoolProp`位于`Set`（类似于`*`Haskell）。但是你的构造函数讲述了一个不同的故事。

```
ptrue : BoolProp true 
```

通过应用`BoolProp`to `true`，您是在告诉它`BoolProp`应该接受一个`Bool`论点并返回一个`Set`(ie `Bool → Set`)。但是你刚才说的`BoolProp`是在`Set`！

显然，因为`Bool → Set ≠ Set`，Agda 抱怨。

修正相当简单：

```
data BoolProp : Bool → Set where
  -- ... 
```

现在因为`BoolProp true : Set`，一切都很好，Agda 很开心。

* * *

实际上，您可以使 Haskell 代码更好一些，并且您会立即发现问题！

```
{-# LANGUAGE GADTs, KindSignatures, DataKinds, TypeFamilies #-}
module Main where

type family And (a :: Bool) (b :: Bool) :: Bool
type instance And True  b = b
type instance And False b = False

type family Or (a :: Bool) (b :: Bool) :: Bool
type instance Or True  b = True
type instance Or False b = b

type family Not (a :: Bool) :: Bool
type instance Not True  = False
type instance Not False = True

data BoolProp :: Bool -> * where
  PTrue  :: BoolProp True
  PFalse :: BoolProp False
  PAnd   :: BoolProp a -> BoolProp b -> BoolProp (And a b)
  POr    :: BoolProp a -> BoolProp b -> BoolProp (Or a b)
  PNot   :: BoolProp a -> BoolProp (Not a) 
```

# android - 为字符串生成文件夹时，android中的资源目录文件夹无效

> ID：10665608
> 
> 赞同：0
> 
> 时间：2012-05-19T13:34:05.957
> 
> 标签：android, xml, localization

我在 res 下创建了文件夹**/values-el_rGr** ，以便为希腊语放置**strings.xml ，但出现错误：**

```
invalid resource directory folder 
```

我阅读了以前的答案，但您没有提出任何建议，只是资源名称使我只有这些：[资源](http://developer.android.com/guide/topics/resources/available-resources.html)。但是我已经阅读了这两个教程[Link1](http://developer.android.com/guide/topics/resources/available-resources.html)和[Link2](http://www.wilsonmar.com/android_localization.htm)，我可以生成该文件夹并将其用于本地化。那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:13:17.010

您已经在 res 下创建了文件夹**/values-el_rGr**。在这里你使用“下划线”

只需替换为**/values-el-rGr**

请参阅此[本地化教程](http://www.icanlocalize.com/site/tutorials/android-application-localization-tutorial/)

# c - 如何循环 select() 以无限次轮询数据

> ID：10665614
> 
> 赞同：5
> 
> 时间：2012-05-19T13:34:47.957
> 
> 标签：c, select, loops, pool, infinite

```
#include <stdio.h>
#include <unistd.h>
#include <sys/time.h>
#include <sys/types.h>

int main ()
{
char            name[20];
fd_set          input_set;
struct timeval  timeout;
int             ready_for_reading = 0;
int             read_bytes = 0;

/* Empty the FD Set */
FD_ZERO(&input_set );
/* Listen to the input descriptor */
FD_SET(0, &input_set);

/* Waiting for some seconds */
timeout.tv_sec = 10;    // 10 seconds
timeout.tv_usec = 0;    // 0 milliseconds

/* Invitation for the user to write something */
printf("Enter Username: (in 15 seconds)\n");
printf("Time start now!!!\n");

/* Listening for input stream for any activity */
ready_for_reading = select(1, &input_set, NULL, NULL, &timeout);
/* Here, first parameter is value of the socket descriptor + 1 (STDIN descriptor is 0, so  
 * 0 +1 = 1)  
 * in the set, second is our FD set for reading,
 * third is the FD set in which any write activity needs to updated, which is not required
 * in this case. Fourth is timeout
 */

if (ready_for_reading == -1) {
    /* Some error has occured in input */
    printf("Unable to read your input\n");
    return -1;
} else {
    if (ready_for_reading) {
        read_bytes = read(0, name, 19);
        printf("Read, %d bytes from input : %s \n", read_bytes, name);
    } else {
        printf(" 10 Seconds are over - no data input \n");
    }
}

return 0; 
```

}

如何做同样的事情，但不仅仅是一次，而是在遇到“退出”字符串后中断的无限循环（例如）。我尝试的每一种方式 - 都失败了。因此，如果 10 秒后没有输入数据，程序只会打印“10 秒结束 - 没有数据输入”，然后再次开始等待。输入后相同 - 只是再次开始并且每次在无限循环中表现相同。
我已经有点绝望了，请 - 帮助。
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T14:29:10.657

我真的没有看到这里的问题。基本上只是把你想要的一切都放在循环中，然后让它运行。你试过这个吗？

```
int main ()
{
   /* Declarations and stuff */
   /* ... */

   /* The loop */
   int break_condition = 0;
   while (!break_condition)
   {
       /* Selection */
       FD_ZERO(&input_set );   /* Empty the FD Set */
       FD_SET(0, &input_set);  /* Listen to the input descriptor */
       ready_for_reading = select(1, &input_set, NULL, NULL, &timeout);

       /* Selection handling */
       if (ready_for_reading)
       {
          /* Do something clever with the input */
       }
       else
       {
          /* Handle the error */
       }

       /* Test the breaking condition */
       break_condition = some_calculation();
   }
   return 0;
} 
```

请注意，您必须不断重置循环内的选择，以便它在下一次迭代中再次响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:19:18.633

*通过将timeout*设置为 NULL ，可以告诉 select() 函数无限期地阻塞。请参阅 select(2) 手册页：

> *timeout是***select** () 返回之前经过的时间量的上限。*如果timeval*结构的两个字段 都为零，则**select** () 立即返回。（这对于轮询很有用。）如果 *timeout*为 NULL（没有超时），**select** () 可以无限期地阻塞。

所以你想要的是：

```
...
ready_for_reading = select(1, &input_set, NULL, NULL, NULL);
... 
```

# macos - Mac OS X Finder 窗口的搜索选项工具栏的键盘导航

> ID：10665619
> 
> 赞同：0
> 
> 时间：2012-05-19T13:34:57.050
> 
> 标签：macos, keyboard-shortcuts

当我在 Finder 窗口中并在 Spotlight 搜索框（窗口右上角）中输入术语，然后按 TAB 键时，搜索位置栏会出现在下方，并且焦点会移动到第一个位置（通常是“本 Mac”）显示（应该）。但是随后焦点似乎锁定在适当的位置，并且我发现没有任何键盘键或组合可以使其移动（大多数情况下，即；有时可以使用键盘选择显示的位置之一，有时我'我们发现可以使用选项卡切换到保存按钮或添加选项 [+] 按钮，然后切换到选项本身，但大多数时候它只是卡住了 [就像现在一样！]，我需要使用鼠标）。多年来我一直对此感到恼火，并且已经没有新的组合键可以尝试了！

# jquery - 如何消除 jQuery 中的问题

> ID：10665623
> 
> 赞同：-5
> 
> 时间：2012-05-19T13:35:35.310
> 
> 标签：jquery

我最近编写了一个小型 jQuery 应用程序来练习该语言，并得到了一些反馈，批评它如下：

1.  您不使用在您的函数中传递的任何消息，
2.  你有一些数据的硬编码值（例如：颜色），
3.  您将初始化代码嵌入而不是提取到单独的 JSON 文件中

但我真的不明白他们的意思，以及我如何消除这些问题。

谁能给我粗略的例子，以及正确的方法？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:43:12.570

1.  可能他建议您只使用全局变量，而不使用带参数的函数。这可以是一个选择，但我想说这在较小的 Web 应用程序中并不重要。

2.  当您想要更改静态数据时，硬编码的静态数据可能会很烦人。如果您决定颜色必须比现在更蓝，您必须找到并替换您使用该颜色的每个地方。使用该颜色的变量，您只需更改一次，并且避免难以发现的错误

3.  还有实际原因。无需编辑整个 JavaScript 文件，您只需更改小的 init 文件。这对于测试目的或在大型项目中可能很方便。

# opengl - 有没有简单的方法在love2d中绘制渐变？

> ID：10665624
> 
> 赞同：2
> 
> 时间：2012-05-19T13:35:46.117
> 
> 标签：opengl, gradient, love2d

我对love2d 比较陌生，想知道是否有一种简单的方法可以在不使用图像的情况下绘制线性渐变。我正在尝试绘制一个黄昏时分的场景，并且想要从背景顶部到底部的微妙渐变，但是创建一个足够大以填充背景的图像似乎太大了。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:16:05.287

尝试使用 1px 宽乘以所需高度的图像，然后像这样水平重复：

```
-- load
bgImage = love.graphics.newImage('gradient.png')
bgImage:setWrap('repeat', 'clamp')
bgQuad = love.graphics.newQuad(
    0, 0,
    WIDTH, bgImage:getHeight(),
    bgImage:getWidth(), bgImage:getHeight()
)

-- draw
love.graphics.drawq(bgImage, bgQuad, X, Y) 
```

将 X、Y 和 WIDTH 替换为您需要的值。在这里使用[四边形](https://love2d.org/wiki/love.graphics.newQuad)可以让 Löve 处理水平重复以实现非常快速的绘图。

（希望这可行，我还没有测试过。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T18:53:41.317

如果您担心图像的大小和性能，最好的方法是制作 1 xn 像素的图像，其中 n 是渐变上的颜色数。例如，如果您想要具有 2 种颜色的垂直背景渐变：

love.graphics.draw(img,0,0,0,love.graphics.getWidth(),love.graphics.getHeight()/2)

:)

# linux - 使用 VMWare 安装作为开发网络服务器

> ID：10665626
> 
> 赞同：0
> 
> 时间：2012-05-19T13:36:17.283
> 
> 标签：linux, ubuntu, webserver, vmware

谁能指出我正确的方向，使用 Ubuntu 或其他 Linux 发行版的 VMWare 安装作为我本地机器上的开发服务器？

我在 Windows 7 32 位机器上，目前正在使用 WAMP。

我注意到在 Windows 机器上开发和我的部署服务器之间存在一些差异，另外我想扩展我在使用命令行在 linux 上工作的知识。

后续问题，在我的本地安装上开发并将该开发推送到我租用的 VPS 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:26:43.437

如果您不想自己构建并在 VMWare Player 上运行，我建议您从[http://www.vmware.com/appliances/directory/cat/0?k=lamp下载 LAMP 设备。](http://www.vmware.com/appliances/directory/cat/0?k=lamp)

如果您想自己构建，可以使用 VMWare Server、Oracle VirtualBox 或任何其他虚拟化软件。创建一个具有 512MB 或 RAM 和 4GB（+ 工具要求 + 2GB 缓冲区）磁盘的新 VM。我推荐 10GB，或者您可以将其设置为 50GB，让虚拟磁盘根据需要增长，而不是预先分配所有空间。

[然后，从http://www.ubuntu.com/download/server](http://www.ubuntu.com/download/server)下载 Ubuntu Server 12.04 ISO 文件，并将其用作 CD 驱动器来启动 VM。按照屏幕上的说明进行安装。最后，选择安装 LAMP 配置的选项。

注意：使用 Ubuntu 的服务器版本意味着您不会获得任何 GUI。

# php - preg_match ，仅在本地有效

> ID：10665627
> 
> 赞同：1
> 
> 时间：2012-05-19T13:36:20.200
> 
> 标签：php, regex

这是在本地有效的代码。

```
$str = <<<SSS
  <H1 class="prodname">Alison Raffaele Reality Base</H1>Foundation, Skintone 1 - Fairest&nbsp;1 fl oz (30 m)<p class="tip"><table id="TblProdForkSellCopy" width="100%" border="0"><tr><td class="contenttd"><p>Get full, flawless coverage with this luxurious oil-free formula. Continually refreshes and re-hydrates your skin for 12+ hours - and guards against premature aging by deflecting damaging free radicals. </p></td></tr></table><p></p>
SSS;

preg_match("~</[hH]1>(.+?)<p~",$str,$name)  ;
var_dump($name) ; 
```

但是在实际解析页面时不起作用。为什么 ？链接到[页面](http://www.beauty.com/alison-raffaele-reality-base-foundation-skintone-1--fairest/qxp184230?catid=179216)。我的代码有什么问题吗。我已经从页面完全复制粘贴。哦，不起作用，我的意思是它匹配得太多了。当在本地匹配时，第一个`'<p'`不包括在内，但在我的实际脚本中（当页面从网上下载时）`'<p'`由于某种原因它包含标签。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:55:06.720

试试这个：

```
/<h1[^>]*>([^<]+)/i 
```

它不起作用，因为您正在关闭标签而忽略了 HTML 标签属性。作为示例的一部分，请参阅`[^>]*`它将与所有 before(the attributes) 匹配。见国旗。不会区分大小写。可以匹配和。`>``class="prodname"``i``h``H`

# php - Flex 数据网格 unicode 字符

> ID：10665633
> 
> 赞同：0
> 
> 时间：2012-05-19T13:37:13.820
> 
> 标签：php, mysql, apache-flex, encoding

所以我被要求构建一个弹性应用程序来存储本地企业的客户。但是，它需要使用希腊字符存储客户端。我的问题是，当在希腊语的数据网格中导入名称时，它可以工作 Î›ÎµÏ‰Î½Î¯Î´Î±Ï，当我尝试使用 phpmyadmin 将其放入数据库时​​，它似乎没问题，但后来它就像 ?? ？？？？？？在数据网格中。我的设置是使用 php 服务连接到 mysql 的 flex 应用程序。我已将数据库的编码设置为 utf8-general ，但没有运气。我不确定这是否是 flex 或服务的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:05:43.297

[该](http://board.flashkit.com/board/showthread.php?t=768105)论坛讨论提出了有关如何在 Flash/Flex 中使用特殊字符（包括希腊字符）的想法。请参阅 Kostas Zotos 的帖子，了解使用这些构建块的潜在解决方案：

*   使用 utf-8 编码。

*   使用带有 CDATA 块的 xml 文件列出希腊字符。

*   使用设备字体，而不是嵌入字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T16:02:42.817

因此，在希腊 flex 和 php 论坛进行了一些研究后，我找到了解决方案。为了从 flex 访问任何 utf8 语言，唯一需要做的就是添加

```
mysqli_query($this->connection, "set names utf8"); 
```

在服务文件 (getAllSomething) 的方法中的任何 sql 语句之前。这将允许以任何语言编写和检索 utf8 字符集而不会出现问题。

我希望这对其他 flex 开发人员也有帮助。

# java - 我创建了没有编译错误的 libgdx 项目，但我无法运行它

> ID：10665636
> 
> 赞同：0
> 
> 时间：2012-05-19T13:37:37.380
> 
> 标签：java, android, libgdx

[我在 Eclipse 中使用此链接](http://chrismweb.com/2011/10/18/how-to-start-creating-android-games-using-the-libgdx-game-development-framework/)创建了 libgdx 项目，没有编译错误。

我按了 ctrl-F11。它不运行。出现了一个转换为有序桌面和 android 项目的窗口。我做的。我将它们导入到 Eclipse 作为所需的帮助屏幕。看来我应该为这个新项目按下 ctrl-F11。但我无法运行它，因为错误“libgdx com.badlogic.gdx.ApplicationListener can not be resolve” in line: new LwjglApplication(new DesktopStarter(), cfg);

顺便说一句，“com.badlogic.gdx”中没有“ApplicationListener”。在新转换的项目中。

那么桌面应用程序是什么？如何运行它？有什么问题？（嗯。我真的应该每次都这样做来运行我的应用程序吗？通过将其转换为通常的桌面或 android 应用程序来运行这样的 libgdx 应用程序让我很不舒服）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:51:52.190

*AndroidApplicationConfiguration.java*是**gdx-backend-android**的一部分，您正在尝试将它与**LWJGL 后端**一起使用。这就是您无法为桌面版本运行此项目的原因。

删除您传递给桌面版本的任何 AndroidApplicationConfiguration 对象。这应该使它工作。

*只是一个提示*

在主项目中创建两个不同的构造函数：

1 - 一个用于以 AndroidApplicationConfiguration 作为参数之一的 android。

2 - 另一个没有 AndroidApplicationConfiguration （你不会在桌面上需要它）

为您的 android 项目使用 android 版本，为桌面项目使用桌面版本。

# asp.net-mvc - 重定向到 ASP.NET MVC3 中的调用方操作

> ID：10665641
> 
> 赞同：1
> 
> 时间：2012-05-19T13:38:14.460
> 
> 标签：asp.net-mvc, asp.net-mvc-3, action, redirecttoaction

假设我们有这样的动作：

```
public ActionResult Display(long Id){

  //Do something

return RedirectToAction(//To the Caller)

} 
```

所以`Display`一些视图调用的动作，比如：

**索引视图**：`@Html.ActionLink("Show", "Display", new { Id=@Model.Id } )`

所以我需要`Display`：`return RedirectToAction("Index")`

或者

**编辑视图**：`@Html.ActionLink("Show", "Display", new { Id=@Model.Id } )`

我需要`Display`：`return RedirectToAction("Edit")`

等等。

我们如何才能找到调用了哪个动作`Display`并在动作结束时返回给调用者的动作呢？你的建议是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:43:56.243

在 ActionLink 方法中再传递一个参数和 id 怎么样？

```
@Html.ActionLink("Show", "Display", new { Id=@Model.Id ,from="Edit"} ) 
```

和

```
@Html.ActionLink("Show", "Display", new { Id=@Model.Id ,from="Index"} ) 
```

并在您的操作方法中，也接受这一点

```
public ActionResult Display(long Id,string from)
{

  //Not 100 % sure what you want to do with the from variable value.
   return RedirectToAction(from);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T22:45:39.653

如果您不想将变量传递给重定向操作方法，您也可以检查`Request.UrlReferrer`并改用它。

```
public ActionResult Display(long Id){

    var caller = Request.UrlReferrer != null 
        ? Request.UrlReferrer : "DefaultRedirect";

    // do something

    return Redirect(caller);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T11:05:22.077

您可以使用 returnUrl 参数。

在来电者上：

```
@Html.ActionLink("Show", "Display", new { returnUrl = this.Url.PathAndQuery }) 
```

并且您的 Display 操作所要做的就是重定向到 returnUrl：

```
this.Redirect(returnUrl); 
```

这对于您将来可能遇到的任何其他情况都足够灵活。

# r - R编程：如何在ggplot中安排日期时间图中的刻度值

> ID：10665651
> 
> 赞同：3
> 
> 时间：2012-05-19T13:39:29.853
> 
> 标签：r, ggplot2

> **可能重复：**
> [使用 ggplot2 在 x 轴上绘制日期，在 y 轴上绘制时间](https://stackoverflow.com/questions/8192343/plot-dates-on-the-x-axis-and-time-on-the-y-axis-with-ggplot2)

我有这些数据，

```
Arrival Date
7:50    Apr-19
7:45    Apr-20
7:30    Apr-23
7:30    Apr-24
7:55    Apr-25
7:20    Apr-26
7:30    Apr-27
7:50    Apr-28
8:00    Apr-30
7:45    May-2
8:30    May-3
8:06    May-4
8:25    May-7
7:35    May-8
7:45    May-9
8:02    May-10
7:53    May-11
8:39    May-14
8:14    May-15
8:08    May-16
8:27    May-17
8:20    May-18
12:00   Apr-19
12:00   Apr-20
12:00   Apr-23
12:00   Apr-24
12:00   Apr-25
12:00   Apr-26
12:00   Apr-27
12:00   Apr-28
11:50   Apr-30
12:00   May-2
11:45   May-3
11:50   May-4
12:00   May-7
11:50   May-8
11:55   May-9
12:10   May-10
11:53   May-11
11:54   May-14
11:40   May-15
11:54   May-16
11:45   May-17
12:00   May-18 
```

我想用ggplot来绘制它，

这就是我所做的，

```
OJT <- read.csv(file = "Data.csv", header = TRUE)

qplot(Date,Arrival, data = OJT, xlab = expression(bold("Date")), ylab = expression(bold("Time"))) + theme_bw() + opts(axis.text.x=theme_text(angle=90)) +geom_point(size = 2, colour = "black", fill = "red", pch = 21) 
```

这是输出

![在此处输入图像描述](../Images/fe14841129d09441307a8c63caf38d20.png)

如您所见，时间和日期没有安排好。我希望时间从早上 7:00 到下午 12:20，日期从 4 月 19 日到 5 月 18 日。我尝试使用

```
as.Date(strptime(OJT$Date,"%m-%dT")) 
```

但我仍然没有得到正确的情节。

我无法通过互联网找到类似的问题。

有什么想法可以帮助我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:33:57.743

我将尝试一种不同的方法，并在`lubridate`. 目标地块：

![日期小时图](../Images/bd8708b7cd15a817efc6f80e89f9f391.png)

代码，包括您的数据：

```
library("ggplot2")
library("lubridate")

df <- read.table(text = "Arrival Date
7:50    Apr-19
7:45    Apr-20
7:30    Apr-23
7:30    Apr-24
7:55    Apr-25
7:20    Apr-26
7:30    Apr-27
7:50    Apr-28
8:00    Apr-30
7:45    May-2
8:30    May-3
8:06    May-4
8:25    May-7
7:35    May-8
7:45    May-9
8:02    May-10
7:53    May-11
8:39    May-14
8:14    May-15
8:08    May-16
8:27    May-17
8:20    May-18
12:00   Apr-19
12:00   Apr-20
12:00   Apr-23
12:00   Apr-24
12:00   Apr-25
12:00   Apr-26
12:00   Apr-27
12:00   Apr-28
11:50   Apr-30
12:00   May-2
11:45   May-3
11:50   May-4
12:00   May-7
11:50   May-8
11:55   May-9
12:10   May-10
11:53   May-11
11:54   May-14
11:40   May-15
11:54   May-16
11:45   May-17
12:00   May-18", header=TRUE)

df$Date <- paste('2012-',df$Date, sep='')
df$Full <- paste(df$Date, df$Arrival, sep=' ')
df$Full <- ymd_hm(df$Full)
df$decimal.hour <- hour(df$Full) + minute(df$Full)/60

p <- ggplot(df, aes(x=Full, y=decimal.hour)) +
    geom_point()
p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:57:43.557

```
#make some data in your kind of format:

tS <- dummySeries()
a<-rownames(tS)
x<-c(a,a)
y<-1:24
dat<-as.data.frame(cbind(x,y))

#get it in the format for the plot

v<-paste(dat$x,dat$y, sep=" ") 
v2<-as.POSIXct(strptime(v, "%Y-%m-%d %H",tz="GMT"))
v3<-sort(v2)
hrs<-strftime(v2,"%H")
days<-strftime(v2,"%Y-%m-%d")
final<-data.frame(cbind(days,hrs))
qplot(days,hrs,data=final) + geom_point()

#ooooff... I bet this can be done much cleaner...i know little about 
#time series data. 
```

![在此处输入图像描述](../Images/83a382a7cbdacef257dbb977667818cb.png)

# silverlight - Windows Phone 7.1 播放录制的 PCM/WAV 音频

> ID：10665654
> 
> 赞同：1
> 
> 时间：2012-05-19T13:40:03.200
> 
> 标签：silverlight, windows-phone-7.1, mediaelement

我正在开发一个记录音频并播放的 WP7.1 应用程序。我正在使用 MedialElement 播放音频。MediaElement 可以很好地播放从服务器下载的 MP4（实际上是重命名的 M4A 文件）。但是，当我尝试播放带有或不带有 WAV RIFF 标头（两种情况下都是 PCM）的录制文件时，它不起作用。它给了我一个错误代码 3001，我无法在任何地方找到它的定义。

谁能指出我在不使用 SoundEffect 类的 WP7.1 中播放录制音频的一些示例代码。不想使用 SoundEffect 类，因为它适用于短音频剪辑。

这是我加载音频文件的方式：

```
using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication())
{
    using (Stream stream = storage.OpenFile(audioSourceUri.ToString(), FileMode.Open))
    {
        m_mediaElement.SetSource(stream);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:30:16.483

这个播放代码看起来不错。问题必须在存储代码中。顺便说一句，`3001`意思是`AG_E_INVALID_FILE_FORMAT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:10:10.900

我刚刚意识到“每秒平均字节数”RIFF 标头值是错误的。我为每个样本的位数使用了错误的值，该值应该是 16 位，因为麦克风以 16 位 PCM 记录。

# qt4 - 如何记录 QApplication 的未捕获异常？

> ID：10665655
> 
> 赞同：6
> 
> 时间：2012-05-19T13:40:06.360
> 
> 标签：qt4, pyqt4

我应该在哪里使用 except 块来记录 a 的异常`QApplication`？

这似乎不起作用：

```
app = QtGui.QApplication(sys.argv)
MainWindow = MainWindow()
MainWindow.show()
try:
    eventLoop = app.exec_()
except Exception, e:
    log.exception(str(e)) 
```

因为异常甚至不会到达那个块。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T18:38:50.433

Qt 不支持从事件处理程序中抛出异常。您必须重新实现 QApplication::notify() 并在那里捕获所有异常。

覆盖函数 bool QApplication::notify(QObject * receiver, QEvent *event) 以便捕获所有抛出的异常。

你可以这样实现。

```
virtual bool notify(QObject * receiver, QEvent * event) 
{
     try 
     {
     return QApplication::notify(receiver, event);
     } 
     catch(std::exception& e) 
     {
      qDebug() << "Exception thrown:" << e.what();
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T21:25:45.763

我通过覆盖来解决它`excepthook`，如以下答案所示：[Logging All Exceptions in a pyqt4 app](https://stackoverflow.com/questions/1015047/logging-all-exceptions-in-a-pyqt4-app)

# c - 操作系统范围的语言本地化？

> ID：10665662
> 
> 赞同：0
> 
> 时间：2012-05-19T13:41:14.190
> 
> 标签：c, localization, internationalization

我一直想知道诸如 Windows 或 Mac OS X 之类的操作系统如何只需单击一次即可更改语言，突然间，所有消息框、按钮等都发生了变化。

这些机制是如何实现的？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T13:55:40.613

国际化的关键是避免对用户将看到的任何文本进行硬编码。相反，调用一个函数，该函数检查语言环境并适当地选择文本。

一个人为的例子：

```
// A "database" of the word "hello" in various languages.
struct _hello {
  char *language;
  char *word;
} hello[] = {
  { "English", "Hello" },
  { "French", "Bon jour" },
  { "Spanish", "Buenos dias" },
  { "Japanese", "Konnichiwa" },
  { null, null }
};

// Print, e.g. "Hello, Milo!"
void printHello(char *name) {
  printf("%s, %s!\n", say_hello(), name);
}

// Choose the word for "hello" in the appropriate language,
// as set by the (fictitious) environment variable LOCALE
char *say_hello() {
  // Search until we run out of languages.
  for (struct _hello *h = hello; h->language != null; ++h) {
    // Found the language, so return the corresponding word.
    if (strcmp(h->language, getenv(LOCALE)) == 0) {
      return h->word;
    }
  }
  // No language match, so default to the first one.
  return hello->word;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T14:46:00.333

在类 UNIX 系统上，消息是[目录并存储在文件中](http://www.gnu.org/software/gettext/manual/gettext.html#Locating-Catalogs)。以编程方式，C 提供了[`gettext()`](http://en.wikipedia.org/wiki/Gettext)国际化和本地化功能以及用于获取文化信息的[locale.h标头。](http://pubs.opengroup.org/onlinepubs/007904975/basedefs/locale.h.html)

[这是在此处](http://oriya.sarovar.org/docs/gettext_single.html)拍摄的代码示例

```
#include <libintl.h>
#include <locale.h>
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
 setlocale( LC_ALL, "" );
 bindtextdomain( "hello", "/usr/share/locale" );
 textdomain( "hello" );
 printf( gettext( "Hello, world!\n" ) );
 exit(0);
} 
```

在 MS-Windows 上，它使用[`MUI(Multilingual User Interface)`](http://en.wikipedia.org/wiki/Multilingual_User_Interface). 在 C 中以编程方式可以使用该[`LoadString()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647486%28v=vs.85%29.aspx)函数。退房[`how to do`](http://msdn.microsoft.com/en-us/library/cc194810.aspx)。

# emacs - 在本地 emacs 中打开远程服务器文件

> ID：10665663
> 
> 赞同：1
> 
> 时间：2012-05-19T13:41:27.933
> 
> 标签：emacs, emacs23

我曾经是一个舒适的 emacs 用户，近 10 年来我完全摆脱了使用 emacs（我知道这是一种耻辱），但我有一个工资记忆，`.emacs`可以通过本地 emacs 在服务器中打开远程文件。

只是为了让场景更清楚：登录到远程服务器（ssh）-> emacs somefileInRemoreServer.file & File 使用本地版本的 emacs 打开。

我的问题是：

1.  这可能吗？
2.  我怎样才能做到这一点？

我在使用[Aquamacs](http://aquamacs.org/)的 mac 上同时拥有 mac 和 ubuntu 。如果我能获得两个版本的说明，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:01:19.653

我不确定您是想在使用 emacs 之前 ssh 还是使用（in）emacs 进行 ssh。如果您想让 emacs 完成所有工作，请查看 phils 添加的链接，TRAMP 模式是在 emacs 中进行远程编辑的方式。
如果您想使用 ssh 挂载远程文件系统（导致使用 emacs 进行“本地”编辑），您应该查看 sshfs（[man](http://linux.die.net/man/1/sshfs "人 sshfs")，[wiki](http://wiki.ubuntuusers.de/FUSE/sshfs "维基")）。
我认为它几乎随当前的任何发行版一起提供（或者可以轻松安装）。它是一个熔断器扩展，它允许将远程目录挂载到本地目录，而不需要对远程端比 ssh 有任何进一步的要求。
我确实喜欢 TRAMP 来编辑一个或两个文件，但使用 sshfs 非常适合处理远程放置且您不想使用其他方法同步的整个项目目录。

# jquery - Jquery数组：防止重复插入

> ID：10665666
> 
> 赞同：0
> 
> 时间：2012-05-19T13:41:47.827
> 
> 标签：jquery, arrays, duplicates, element

根据我看到的一个帖子。我正在通过单击超链接创建一个临时数组元素。我唯一的问题是它可以生成重复的元素，直到现在还没有解决：

```
var items = new Array();
$("ul.dropdown li a").click(function(e)
{
    e.preventDefault();

    var id      = $(this).attr('href');
    var name    = $(this).text();

    if(!$.findFromArray('id', id, items))
    {
        return false;       
    }
    else
    {
        items.push({
            "id"    : id,
            "name": name
        });

        //genate row
        var newRow = $("<tr itemId=\"" + id  + "\" />")
        .appendTo(".form_list.left tbody")
        .append("<td>" + name + "</td>")
        .append("<td><a href=\"#\" class=\"deleteRow\">delete</a></td>");

        $(".deleteRow", newRow).click(function(e) {
                e.preventDefault();
                items = $.removeFromArray('id', $(this).closest("tr").attr("itemId"), items);
                $(this).closest("tr").remove(); 
        });     
    }
}); 
```

我创建了一个函数“$.FindFromArray”，它搜索插入的数组，如果有则返回 FALSE，以避免在数组中插入并在表中生成一行：

```
$.findFromArray = function(property, value, arr)
{
    $.each(arr, function(elem, index)
    {
        if(elem[property] === value)
        {
            return false;           
        }   
    }); 
}; 
```

但是这个函数总是返回 FALSE。

因为我可以在插入元素之前避免重复？如果有更好的方法来做到这一点......我希望我能提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:47:49.413

改变你的方法

```
$.findFromArray = function(property, value, arr)
{
    var matching = $(arr).filter(function(index, elem)
    {
        return elem[property] === value;
    }); 
    return matching.length > 0;
}; 
```

`true`如果它在数组中***找到***元素，则返回（*以这种方式使其更具可读性*），因此您还应该将检查更改为

```
if( $.findFromArray('id', id, items) ) 
```

*删除了`!`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:07:51.323

您在 $.each 中混淆了索引和元素的顺序，并且您只能从 $.each 函数内部返回，而不是从 $.findFromArray 函数内部返回：

```
$.findFromArray = function(property, value, arr)
    var ret=false;
    $.each(arr, function(index, elem) {
        if (elem[property] === value) ret=true;
    }); 
    return ret;
}; 
```

# forms - 使用 Sharepoint Designer 2010 在数据输入表单中添加（自动）日期字段

> ID：10665672
> 
> 赞同：0
> 
> 时间：2012-05-19T13:42:42.623
> 
> 标签：forms, sharepoint

我的列表（检查表）有一个 Sharepoint 数据输入表单，其中有一个名为“输入日期”的字段。我想在用户单击“添加新条目”时自动填充今天的日期和时间，因为我想将其用作审计数据。

现在，我想使用 java 脚本（经过研究，这似乎是最直接的方法），所以我在 NewForm.aspx 页面中添加了以下内容：

```
<asp:Content ContentPlaceHolderId="PlaceHolderAdditionalPageHead" runat="server">
<script language="javascript" type="text/javascript">
var today = new Date(); 
var dd = today.getDate(); 
var mm = today.getMonth()+1; //January is 0! 
var yyyy = today.getFullYear(); 
if(dd<10)
{dd='0'+dd;} 
if(mm<10)
{mm='0'+mm;} 
var formattedToday = mm+'/'+dd+'/'+yyyy;
alert(formattedToday);
document.getElementById('<%=  ((TextBox)this.onetIDListForm.FindControl("ff10_1")).ClientID %>').value = formattedToday;
</script>
</asp:Content> 
```

这`alert(formattedToday);`只是为了测试java脚本是否被拾取，并将在稍后阶段被删除。

好的..我得到了弹出窗口，所以值计算正确并且java脚本工作。我遇到的问题是将此值放入“输入日期”字段。

调用 document.getElementByID 的正确方法是什么？

我尝试了多种变体：

```
document.getElementById('<%=  ((TextBox)this.onetIDListForm.FindControl("ff10_1")).ClientID %>').value = formattedToday; 
```

或者..

```
document.setElementById("Date Entered").value = formattedToday; 
```

或者..

```
document.setElementById("ff10_1").value = formattedToday; 
```

有人可以指出正确的格式，或使这项工作的方式吗？

在上面的脚本旁边，我认为我需要将表单字段“输入日期”行为（启用视图）设置为“False”，但目前超出了范围。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:48:24.797

看看这篇文章。它讨论了如何使用 jQuery 实现这一点。请参阅下面的示例并尝试一下。您将用相应的名称“输入日期”替换列名称。这应该为您填充适当的文本框。

```
<script type="text/javascript">

 $(function() {

  $('input[title=DefaultMeFieldNoSpaces]').attr(
       {value: 'You are in a twisty maze of passages, all alike.'});
  }); 
```

# php - 从插件文件夹中选择图像文件的 WordPress 或 PHP 脚本

> ID：10665673
> 
> 赞同：0
> 
> 时间：2012-05-19T13:43:00.550
> 
> 标签：php, wordpress, file-browser

我正在创建一个 WordPress 插件，它允许用户选择随它分发的几个图像文件之一。是否有一种简单的技术允许用户在类似文件浏览器的界面中查看文件并选择一个？我希望它看起来与在普通文件上传对话框中选择文件尽可能相似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T13:49:15.887

我最终调整了[这个](http://www.dreamincode.net/forums/topic/237790-php-file-browser/)使用 scandir 的文件浏览器的代码。它有一个很好的简单界面，代码很简单，可以合并到一个插件中。

# python - 在Python中连接字符串的任意数量的项目

> ID：10665674
> 
> 赞同：0
> 
> 时间：2012-05-19T13:43:09.137
> 
> 标签：python

给定一个列表`['a','b','c','d','e','f']`。没有。要进行的划分 2 .. 所以在第一个字符串中，我想取列表的 0,2,4 个元素，然后将它们用空格分隔符与第二个 1,3,5 个元素的字符串分隔。输出需要采用以下形式`k = ["a c e", "b d f"]`

实际的程序是输入一个字符串（例如 {ball,bat,doll,choclate,bat,kite}），同时输入接受这些礼物的孩子的数量（例如 2），然后将它们除以第一个孩子拿到礼物，走到最后，第二个孩子拿到礼物，站在后面，这样所有的孩子都接受礼物。如果礼物仍然存在，那么第一个孩子再次接受礼物并继续循环......上述所需的输出例如：{“ball doll bat”，“bat choclate kite”}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T13:51:19.490

这是对任意数量的组执行此操作的一般方法：

```
def merge(lst, ngroups):
    return [' '.join(lst[start::ngroups]) for start in xrange(ngroups)] 
```

以下是它的使用方法：

```
>>> lst = ['a','b','c','d','e','f']
>>> merge(lst, 2)
['a c e', 'b d f']

>>> merge(lst, 3)
['a d', 'b e', 'c f'] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-19T13:46:22.500

```
lst = ['a','b','c','d','e','f']

k = [" ".join(lst[::2]), " ".join(lst[1::2])] 
```

输出：

```
['a c e', 'b d f'] 
```

更通用的解决方案：

```
def group(lst, n):
    return [" ".join(lst[i::n]) for i in xrange(n)]

lst = ['a','b','c','d','e','f']
print group(lst, 3) 
```

输出：

```
['a d', 'b e', 'c f'] 
```

# c# - 检查夏令时是否有效？

> ID：10665678
> 
> 赞同：41
> 
> 时间：2012-05-19T13:43:53.800
> 
> 标签：c#, windows-phone-7, datetime, dst

如何检查丹麦夏令时是否生效，如果是，则在我的数据中添加 1 小时，否则不是？我有一个 xml 文件：

```
<day = "1"
month = "5"
sunrise ="06:30"
sunset ="21:30"
/> 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-05-19T14:24:11.287

认为您需要将此 xml 转换为 DateTime，然后使用 TimeZoneInfo 类。

如果丹麦您的当地时间：

```
DateTime thisTime = DateTime.Now;
bool isDaylight = TimeZoneInfo.Local.IsDaylightSavingTime(thisTime); 
```

否则您需要获得丹麦时区：

```
DateTime thisTime = DateTime.Now;
// get Denmark Standard Time zone - not sure about that
TimeZoneInfo tst = TimeZoneInfo.FindSystemTimeZoneById("Denmark Standard Time");
bool isDaylight = tst.IsDaylightSavingTime(thisTime); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-08T09:36:10.853

当我按上述方式编码时 - 对于纽约，我在调试器中发现时间设置正确（包括 DST）

```
TimeZoneInfo nyTimeZone = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");

DateTime nyTime = GetLocalDateTime(DateTime.UtcNow, nyTimeZone);

if (nyTimeZone.IsDaylightSavingTime(nyTime))
    nyTime = nyTime.AddHours(1);

public static DateTime GetLocalDateTime(DateTime utcDateTime, TimeZoneInfo timeZone)
    {

        utcDateTime = DateTime.SpecifyKind(utcDateTime, DateTimeKind.Utc);

        DateTime time = TimeZoneInfo.ConvertTime(utcDateTime, timeZone);

        return time;

    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-19T14:24:02.210

您可以使用[TimeZoneInfo.IsDaylightSavingTime](http://msdn.microsoft.com/en-us/library/bb460642%28v=vs.90%29.aspx)

```
DateTime theDate = new DateTime(2012, 5, 1); // may 1st
TimeZoneInfo tzi = TimeZoneInfo.FindSystemTimeZoneById("Central European Standard Time");
bool isCurrentlyDaylightSavings = tzi.IsDaylightSavingTime(theDate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T00:21:22.707

这是一个通用测试，如果我的数学不正确，很高兴得到纠正。就我而言，我只需要获取时区的 GMT 偏移量，无论它在世界的哪个地方。

```
 int timezone;

  TimeZoneInfo localZone = TimeZoneInfo.Local;

  DateTime myTime = DateTime.Now;

  bool isDayLight = TimeZoneInfo.Local.IsDaylightSavingTime(myTime);

  if (isDayLight)
            timezone = Math.Abs(localZone.BaseUtcOffset.Hours) + 1;
  else
            timezone = Math.Abs(localZone.BaseUtcOffset.Hours);

  Debug.WriteLine("timezone is " + timezone); 
```

我只是找到了当前时间，如果它在夏令时期间，则将 +1 添加到 GMT 偏移量。

这适用于 Visual Studio Express 2013。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-27T21:22:59.497

你需要做两件事：

1.  称呼`IsAmbiguous`
2.  列表项`IsDaylightSavingTime`。

`if (TimeZoneInfo.Local.IsAmbiguousTime(unclearDate) || TimeZoneInfo.Local.IsDaylightSavingTime(unclearDate)) Console.WriteLine("{0} may be daylight saving time in {1}.", unclearDate, TimeZoneInfo.Local.DisplayName);`

[https://msdn.microsoft.com/en-us/library/bb460642(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/bb460642(v=vs.110).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-18T15:13:25.897

这是我可以在所有时区使用的简短解决方案：

```
DateTime utcTime = DateTime.Parse("30.10.2018 18:21:34")
DateTime localtime = ConvertUTCToLocalTime(utcTime);

public static DateTime ConvertUTCToLocalTime(DateTime UTCTime)
{
    var localZone = TimeZone.CurrentTimeZone;
    var offset = localZone.GetUtcOffset(UTCTime);
    var localTime = UTCTime.AddHours(offset.Hours);
    return localTime;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-15T01:34:32.550

Based on other codes provided above, I made a complete code to run and make tests. The variable cityTz is receiving an IANA timezone name example. IANA timezone pattern is used in Mac and Linux (Windows uses different timezone style). In 2020, daylight-saving (DST) in New York ends on November 01\. If you test the code below, the return will be FALSE, because "theDate" is November 02, the next day after the end of DST. But if you change the line commented and set theDate to November 01 (last DST date in NY), the return will be TRUE.

You can compile this program in Mac or Linux terminal typing:

```
csc testDST.cs 
```

To run your program:

```
mono testDST.exe 
```

Complete code:

```
using System;
using System.Collections.Generic;
using System.Linq;

class Program{
    static void Main(string[] args)
    {
        string cityTz;

        //cityTz = "America/Sao_Paulo";
        cityTz = "America/New_York";

        //DateTime theDate = new DateTime(2020, 11, 1); //returns TRUE
        DateTime theDate = new DateTime(2020, 11, 2); //returns FALSE

        Console.WriteLine("Data: "+theDate);

        TimeZoneInfo tzi = TimeZoneInfo.FindSystemTimeZoneById(cityTz);
        bool isDaylight = tzi.IsDaylightSavingTime(theDate);

        Console.WriteLine("isDaylight this date in "+ cityTz +"?: "+ isDaylight);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-08T21:19:35.317

重要的

myDateTime.IsDaylightSavingTime 确实返回正确的值......但是......它至少精确到一天中的小时，仅通过日期是不够的。

例如，今年 (2019) 3/10/2019 02:00:00 传递为 myDateTime 将返回 false，但 3/10/2019 03:00:00 将返回 true。

# c++ - '<<=' 运算符有什么作用，它叫什么？

> ID：10665685
> 
> 赞同：0
> 
> 时间：2012-05-19T13:44:11.803
> 
> 标签：c++

```
 dy <<= 1;
  dx <<= 1; 
```

那是我找到的一些 C++ 代码，它对变量做了什么，那个运算符叫什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T13:45:32.223

向左移动1 位`dy`。`dx`

它相当于（除非 dy 和 dx 有运算符 =<< 重载）

```
dy = dy << 1;
dx = dx << 1; 
```

如果`dx`和`dy`是整数类型，则相当于乘以 2。

请注意，左移负数是未定义的行为。

这是一个丑陋的 hack，程序员认为这比乘以 2 更有效（这不是，但它的可读性要低得多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:46:33.643

此操作称为位移 - 通过添加零将 dy 和 dx 的二进制表示向左移动一个符号。本质上，结果是 dx 和 dy 乘以 2（除非发生溢出）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T13:49:45.407

它是位移运算符。您可以使用您指定的移位量以一种或另一种方式移位位。

您发布的代码与以下内容相同：

`dx = dx << 1`, 和`dy = dy << 1`.

# php - 减少 MySQL 上的更新负载

> ID：10665686
> 
> 赞同：1
> 
> 时间：2012-05-19T13:44:13.163
> 
> 标签：php, mysql

我的应用程序继续使用每个请求更新各种记录，假设 4/3 如果每个请求 4 选择然后执行 3 更新查询。

这些是仅用于记录的简单更新，假设计算来自每个人等的请求，例如`field`= `field`+ 1 或 - 1 或 time() 等

请建议减少这种负载的最佳方法，我正在考虑将这些更新存储在文本文件中一段时间​​，然后将其刷新到数据库一次，以减少查询次数。

我的方法正确吗？对于这种工作来说，简单的文本文件更安全吗？我应该怎么办？数据库临时表在脚本执行时也被删除。

# javascript - Google Maps Javascript v3：标记的 checkboc 不起作用

> ID：10665689
> 
> 赞同：0
> 
> 时间：2012-05-19T13:44:47.810
> 
> 标签：javascript, google-maps, google-maps-api-3, checkbox, google-maps-markers

你好，向大家问好，

我想在我的地图上为我的标记类别设置一个复选框（谷歌地图 api v3）我想做类似这个例子 [http://www.geocodezip.com/v3_MW_example_categories.html](http://www.geocodezip.com/v3_MW_example_categories.html)

我复制了这个示例的源代码并将其粘贴到我的文本编辑器中，以便我可以更改它，但它不起作用。我认为这是由于外部文件

所以我复制了这个并将其保存在一个名为 script 的文件夹中。它不会再工作了！

以前有没有其他人经历过这个？我的 javascript 和编程技能非常糟糕。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:06:57.960

您的问题很可能是您没有提供带有标记类别的 xml 文件。在示例的源代码中，categories.xml 文件在本地被引用...从[http://www.geocodezip.com/categories.xml](http://www.geocodezip.com/categories.xml)下载文件到与您的网页文件相同的目录，它应该可以工作 - 它为我工作。还有一件事，在 html 文件的第 8 行中，您还需要将 XML 加载脚本的地址更改为[http://www.geocodezip.com/scripts/downloadxml.js](http://www.geocodezip.com/scripts/downloadxml.js)或将其保存在本地

ķ

# php - 为什么 str replace 仅在第一次匹配时起作用？

> ID：10665691
> 
> 赞同：2
> 
> 时间：2012-05-19T13:44:55.203
> 
> 标签：php, css, preg-replace, preg-match, str-replace

我的代码：

```
$css=".class1{
    padding:1330px 2220px 0 auto;
    padding:10px auto 0 20px;
    padding:101px auto 0 200px;
}";

$search=self::extract_unit($css,"padding:",";"); 
```

extract_unit：此函数提取 [padding:] 和 [;] 之间的内容

将返回 1330px 自动 0 2220px

```
$replace=self::resort_padding_margin($search); 
```

Resort_padding_margin：此函数对内容进行重新排序

将返回 1330px 2220px 0 自动

```
$css = str_replace($search, $replace, $css);
echo $css; 
```

当我应用此代码时，结果将显示如下：

```
.class1{
    padding:1330px auto 0 2220px;
    padding:10px auto 0 20px;
    padding:101px auto 0 200px;
} 
```

那么我如何使用这种方法来应用所有填充以像这样显示

```
.class1{
    padding:1330px auto 0 2220px;
    padding:10px 20px 0 auto;
    padding:101px 200px 0 auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:53:54.147

为此，您的`self::extract_unit`方法必须返回一个数组，每次出现一个`padding`.

然后你`self::resort_padding_margin`应该接受搜索数组并返回另一个包含修改的数组。或者，在主代码中编写一个循环，并将每次调用此方法的结果存储在一个数组中。

完成后，您可以将两个数组传递给`str_replace`.

顺便说一句，CSS 应该只有一个`padding`定义。你有三个，这有点奇怪:)

# bash - Bash：创建一个管道来列出前 100 个单词

> ID：10665692
> 
> 赞同：1
> 
> 时间：2012-05-19T13:45:01.033
> 
> 标签：bash, sorting, pipe

好的，所以我需要创建一个命令，在一个文本块中列出任何给定文件中最常用的 100 个单词。我目前拥有的：

```
$ alias words='tr " " "\012" <hamlet.txt | sort -n | uniq -c | sort -r | head -n 10' 
```

输出

```
$ words
     14 the
     14 of
      8 to
      7 and
      5 To
      5 The
      5 And
      5 a
      4 we
      4 that 
```

我需要它以以下格式输出：

```
the of to and To The And a we that 
```

（（（在那张纸条上，我将如何告诉它以全部大写形式打印输出？））

而且我需要对其进行更改，以便可以将“单词”通过管道传输到任何文件，因此初始输入将命名文件，而不是在管道中指定文件，而管道将完成其余的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:55:02.273

好的，一点一点地拿你的观点，虽然不一定按顺序。

* * *

`words`您只需删除该`<hamlet.txt`位即可更改为使用标准输入，因为`tr`默认情况下将从标准输入中获取其输入。然后，如果要处理特定文件，请使用：

```
cat hamlet.txt | words 
```

或者：

```
words <hamlet.txt 
```

* * *

您可以通过制作管道的第一部分来消除大写字母的影响：

```
tr '[A-Z]' '[a-z]' 
```

这将在做任何其他事情之前将您的输入小写。

* * *

最后，如果您采用整个管道（使用上面建议的修改），然后将其传递给更多命令：

```
| awk '{printf "%s ", $2}END{print ""}' 
```

这将打印每行（单词）的第二个参数，后跟一个空格，然后打印一个空字符串，最后以换行符结尾。

* * *

例如，以下脚本`words.sh`将为您提供所需的内容：

```
tr '[A-Z]' '[a-z]' | tr ' ' '\012' | sort -n | uniq -c | sort -r
    | head -n 3 | awk '{printf "%s ", $2}END{print ""}' 
```

（单行：为了便于阅读，我将其拆分）根据以下成绩单：

```
pax> echo One Two two Three three three Four four four four | ./words.sh
four three two 
```

您可以使用以下别名实现相同的目的：

```
alias words="tr '[A-Z]' '[a-z]' | tr ' ' '\012' | sort -n | uniq -c | sort -r
    | head -n 3 | awk '{printf \"%s \", \$2}END{print \"\"}'" 
```

（再次，一行）但是，当事情变得如此复杂时，我更喜欢脚本，如果只是为了避免无休止的转义字符:-)

# python - 如何继续将循环写入文件以及如何在每个条件满足后将初始值重置为 0？

> ID：10665694
> 
> 赞同：0
> 
> 时间：2012-05-19T13:45:13.233
> 
> 标签：python, loops, for-loop, python-3.x, while-loop

如何编写文件而不在循环中重复？如何继续将循环写入文件以及如何在每个条件满足后将初始值重置为 0？

```
def main():
    infile=open("sales.txt","w")
    infilelist=[]
    #call function
    totalsale_each,salesperson=sales(infile,infilelist)

    for salesamount in infilelist:
        infile.write(salesamount)

    infile.close()

def sales(infile, infilelist):
    #set initial
    t_sales=0

    n_sales=int(input("Number of sales"))

    while t_sales<n_sales:

        #increasement
        t_sales+=1

        #for loop
        for s in range(1,n_sales+1):
            totalsale_each=0 #set the acc for total sales by each sales person

            sales_person=input("sales person name:")
            print("sales for sales no. "+str(s)+"by"+sales_person+":")
            infilelist.append(sales_person)               

            for count in range (1,5): #assuming one sales person can sell max and min of 5item per cust
                sales=float(input('sales#' +str(count)+ ':'))

                if sales<=300:
                    t_sales=t_sales+sales
                    totalsale_each=totalsale_each+sales

                if sales>300: #if sales>300, need to change the sales person
                              #that sales person needs to finish serving the rest of that cust's items
                    t_sales=t_sales+sales
                    sales_person=input("another sales pesron")
                    infilelist.append(sales_person)

                infilelist.append(str(totalsale_each)) #to write total sales for each person 
    return totalsale_each,sales_person

main() 
```

这是我的python测试：

```
Number of sales: 2
sales person name:A
sales for sales no.1 by A:
sales#1:100
sales#2:150
sales#3:350
another sales pesronB
sales#4:200
sales person name:C
sales for sales no.2 by C:
sales#1:200
sales#2:500
another sales pesronD
sales#3:500
another sales pesronE
sales#4:200 
```

我运行后得到的文件是

```
 A
100.0
250.0
B
250.0
450.0
C
200.0
D
200.0
E
200.0
400.0 
```

但我想要得到的是如下：

```
A
600
B
200
C
700
D
500
E
200 
```

我该如何纠正？

当销售额超过 300 时询问下一个销售人员后，我无法弄清楚将**infilelist.append(sales_person) 和 infilelist.append(totalsale_each)放在哪里。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T18:40:53.070

如果我理解正确，当销售额超过 300 时，你要写那个人的总销售额，并要求下一个。

所以，你需要做的是，**在计算总销售额之后，加上每个人的总销售额**，这意味着在循环之后`range(5)`。

另外，当你发现一个销售人员已经卖出了超过 300 件后，你需要停止计算销售额。所以，你需要`break`在那个时候循环，并正常继续。

这里的问题是在那之后去找下一个销售人员。要么继续循环，它会像输入任何其他名称一样提示，或者您应该以另一种形式请求它，并将其插入数组中，并确保它不会像通常那样请求另一个名称。如果您需要第二个选项，请在评论中说明，第一个选项更简单。

因此，我建议对`sales`函数进行以下修改：

```
def sales(infile, infilelist):
    #set initial
    t_sales=0

    n_sales=int(input("Number of sales"))

    while t_sales<n_sales:

        #increasement
        t_sales+=1

        #for loop
        for s in range(1,n_sales+1):
            totalsale_each=0 #set the acc for total sales by each sales person

            # EDIT: this seems useless, so remove it
            #sales_no=s*1
            sales_person=input("sales person name:")
            print("sales for sales no."+str(s)+"by"+sales_person+":")
            infilelist.append(sales_person)               

            for count in range (5): #assuming one sales person can sell only 5item per cust
                sales=float(input('sales#' +str(count)+ ':'))

                if sales<=300:
                    t_sales=t_sales+sales
                    totalsale_each=totalsale_each+sales

                if sales>300: #if sales>300, need to change the sales person
                    t_sales=t_sales+sales
                    # write the last sales_person's total, and ask for another one
                    infilelist.append(str(totalsale_each))
                    sales_person=input("another sales pesron")
                    # add it to the list, after that, everything counts for him
                    infilelist.append(sales_person)
                    totalsale_each=sales
            # EDIT: decrease indentation so that the total is written once, after the loop
            infilelist.append(str(totalsale_each)) #to write total sales for each person 
    return totalsale_each,sales_person 
```

**编辑**：我编辑了代码：删除了`break`，写上最后一个的总数，要求另一个销售人员，重置总数计数器，并以他的名义写下所有内容。

另外，关于退货声明的注释（也许你已经知道了）：它将返回最后一个销售人员的总销售额和姓名。

但是，我建议重写整个内容，以便将总数保存在字典中，键 = 销售人员的姓名或索引 (sales_no)。之后，您将它们全部写入列表。

**编辑 2**：如果您注意到，在添加新的 sales_person ( `infilelist.append(sales_person)`) 之后，我会将销售额添加到`totalsales_each`. 您想要的似乎相反，因此您应该在添加新的销售人员之前执行此操作，这将为您提供：

```
if sales>300:
    t_sales=t_sales+sales
    totalsale_each += sales # the last sale counts for the last person
    infilelist.append(str(totalsale_each))

    sales_person=input("another sales pesron")
    infilelist.append(sales_person)
    totalsale_each = 0 # reset the sales for the next person 
```

# c# - 财产担保集

> ID：10665695
> 
> 赞同：0
> 
> 时间：2012-05-19T13:45:14.377
> 
> 标签：c#, .net, properties, private-members

我只是在这里画一个空白。有一个我想要只读属性的类，但有一个可以更新属性的管理类型函数。

```
public class Group : Object, INotifyPropertyChanged
{   // this is read only admin is via UserGroupAdmin
    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    } 

    public Int16 ID { get; private set; }
    public string Name { get; private set; }
    public override bool Equals(Object obj)
        {
            //Check for null and compare run-time types.
            if (obj == null || !(obj is Group)) return false;
            Group item = (Group)obj;
            return (ID == item.ID);
        }

    public override int GetHashCode() { return (int)ID; }
    public Group(Int16 id, string name)
    { ID = id; Name = name;  }
 } 
```

我想要的是一个管理员类型的功能

```
public group ReviseGroupName (Group group, string revisedName)
{
   // write revised name to SQL
   // revise group.name
   // return revised group
} 
```

我知道的 SQL 部分。我考虑的只是创建一个具有相同 ID 和哈希码的新组并返回它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:04:52.813

如果`Admin`是嵌套类，`Group`您可以在函数中设置私有属性：

```
public class Group
{
    public string Name { get; private set; }

    public class Admin
    {
        public Group ReviseGroupName (Group group, string revisedName)
        {
            group.Name = revisedName;
            return group;
        }
    }
} 
```

# php - 如何在 PHP 中按内部数组的长度对二维数组进行排序？

> ID：10665699
> 
> 赞同：0
> 
> 时间：2012-05-19T13:45:48.090
> 
> 标签：php, sorting, multidimensional-array

有人可以帮助我吗？我正在尝试按内部数组的长度（降序）对二维数组进行排序。

这个数组：

```
Array
    (
      [0] => Array
        (
          [0] => "a"
        )

      [1] => Array
        (
          [0] => "a"
          [1] => "b"
          [2] => "c"
        )

      [2] => Array
        (
          [0] => "a"
          [1] => "b"
        )
    ) 
```

应该产生这个排序的数组：

```
Array
    (
      [0] => Array
        (
          [0] => "a"
          [1] => "b"
          [2] => "c"
        )

      [1] => Array
        (

          [0] => "a"
          [1] => "b"

        )

      [2] => Array
        (
          [0] => "a"

        )
    ) 
```

你有提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:52:14.483

```
// Comparison function
function cmp($a, $b) {
    $ca = count($a);
    $cb = count($b);
    if($ca == $cb)
        return 0;
    return ($ca < $cb ) ? -1 : 1;
}

// Sort the array
uasort($array, 'cmp'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T13:48:37.707

是的，用于按元素`usort`排序。`count()`

```
<?php

header("Content-type: text/plain");

$array = array(
    array(
        "item1" => "key1",
        "item2" => "key2",
    ),
    array(
        "item1" => "key1",
        "item2" => "key2",
        "item3" => "key3"
    ),
    array(
        "item1" => "key1",
    )
);

usort($array, function($el1, $el2) {
    if (count($el1) === count($el2)) {
        return 0;
    }
    return count($el1) < count($el2) ? 1 : -1;
});

print_r($array); 
```

# asp.net-mvc - 当文件类型不是文本或图片时，在 ASP.NET MVC3 中正确显示或下载文件

> ID：10665700
> 
> 赞同：3
> 
> 时间：2012-05-19T13:46:10.867
> 
> 标签：asp.net-mvc, asp.net-mvc-3, sql-server-2008, file, fileresult

这是我的行动：

```
public FileResult ShowFile(long Id) {

    DAL.Files.File file = new DAL.Files.FileAccess().GetById(Id);
    return File(file.Content, file.FileType);
} 
```

`GetById`方法从 SQL DB 返回一个文件，当文件类型是文本或图片时，一切正常并正确显示文件，但是当文件类型不同时，如显示一些 Unicode 的 PDF，那么我怎样才能正确显示 PDF 文件，或者让用户下载了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:50:22.340

如上所述，您需要添加 appklication/pdf，但是我还需要正确的标题。

```
 public FileResult ShowFile(long Id)
    {

        DAL.Files.File file = new DAL.Files.FileAccess().GetById(Id);
        // assuming file is a PDF
        Response.AppendHeader("Content-Disposition", "inline; filename=CustomInvoice.pdf");
        return File(file.Content, "application/pdf", "some-pdf-file.pdf");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:39:24.557

该`File()`方法的第二个参数必须是 mime 类型。所以说你的文件是PDF，如果你这样做，它应该可以工作：

```
public FileResult ShowFile(long Id) {

    DAL.Files.File file = new DAL.Files.FileAccess().GetById(Id);
    // assuming file is a PDF
    return File(file.Content, "application/pdf");
} 
```

要强制下载，请使用`File()`带有第三个参数的重载：

```
public FileResult ShowFile(long Id) {

    DAL.Files.File file = new DAL.Files.FileAccess().GetById(Id);
    // assuming file is a PDF
    return File(file.Content, "application/pdf", "some-pdf-file.pdf");
} 
```

# python - Django：“UserProfileRole.userProfile”必须是“UserProfile”实例

> ID：10665701
> 
> 赞同：0
> 
> 时间：2012-05-19T13:46:10.913
> 
> 标签：python, django

我有一个奇怪的谜题要解决：

我使用 UserProfile 扩展了我的 django-1.4 用户对象，如[https://docs.djangoproject.com/en/dev/topics/auth/](https://docs.djangoproject.com/en/dev/topics/auth/)中所述，并希望实现特定于项目的角色。所以我的模型如下所示：

```
class UserProfile(models.Model):
   user = models.ForeignKey(User, unique=True)
   projects = models.ManyToManyField(Project, through='UserProjectRole')
   [...]

class UserProjectRole(models.Model):
   userProfile = models.ForeignKey(UserProfile)
   project = models.ForeignKey(Project)
   group = models.ForeignKey(Group)
   [...] 
```

我需要传递一个 css 类，所以我为 UserProjectRole 创建了一个模型表单，并使用一个小部件实现了 userProfile-Field：

```
class ProjectRoleForm(forms.ModelForm):
   userProfile = forms.ModelMultipleChoiceField(label='Users',
      queryset=UserProfile.objects.all(),
      widget=forms.SelectMultiple(attrs={'class': 'select-multiple'}))

   class Meta:
       model = UserProjectRole 
```

表单正确显示，但是在保存过程中崩溃并出现以下错误

```
Cannot assign "[<UserProfile: MyUser>]": "UserProjectRole.userProfile" must be a "UserProfile" instance. 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T14:23:11.500

我的猜测是因为您使用的是**forms.SelectMultiple**小部件。它为您提供了 UserProfile 实例 ( `[<UserProfile: MyUser>]`) 的列表，而不是单个**UserProfile**实例，这当然需要在**ForeignKey**字段 ( *UserProjectRole.userProfile* ) 上进行设置。因此，我建议尝试使用[**forms.Select**](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.Select)小部件。

# python - MongoAlchemy 中复杂的字符串查询

> ID：10665703
> 
> 赞同：1
> 
> 时间：2012-05-19T13:46:24.187
> 
> 标签：python, mongodb, pymongo, mongoalchemy

我正在学习 MongoAlchemy，它是 MongoDB 的 Python 驱动程序之上的一层。假设有一个 Python 类，映射自 MongoDB 对象，如下所示：

```
from mongoalchemy.document import Document
from mongoalchemy.fields import *
class Person(Document):
    name = StringField() 
```

我像这样查询数据库：

```
for person in query.filter(Person.name == 'Geronimo'):
    print person 
```

它工作正常，但现在我想查询数据库以获取不区分大小写的名称（“geronimo”和“Geronimo”），或者查找其中包含两个 o 的所有名称。`query.filter(Person.name[1:] == 'eronimo')`并且这样不起作用，因为 Person.name 不是字符串，而是 QueryField 对象。

我如何在 MongoAlchemy 中进行如此复杂的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-17T17:35:00.413

要查找任何共现，您可以在查询中使用运算符。像这样：

```
datosquery = datos.query.filter({datos.schema_name: {"$regex": texto}}) 
```

使用正则表达式的`$regex`运算符允许我们在文本字段中进行更复杂的搜索。

这是 mongo 查询的运算符的链接。

[https://charlascylon.com/2013-07-10-tutorial-mongodb-operaciones-de-consulta-avanzadas](https://charlascylon.com/2013-07-10-tutorial-mongodb-operaciones-de-consulta-avanzadas)

# node.js - 如何使用 ExpressJS/RailwayJS (Node.JS) 生成 JSON

> ID：10665705
> 
> 赞同：15
> 
> 时间：2012-05-19T13:46:58.900
> 
> 标签：node.js, express, pug, ejs, railway.js

我正在探索使用 Node.JS 进行开发，发现 ExpressJS 和 RailwayJS（基于 Express）是 Node.js 的框架。使用 Jade/EJS 的模板引擎似乎更适用于 HTML。我如何生成 JSON，例如。当我开发 API 时

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-19T17:12:56.567

Express 和 Railway 都扩展了 node 中的 HTTP 模块，并且都提供了一个“响应”对象作为路由/中间件处理程序回调的第二个参数。此参数的名称通常缩短为`res`以节省一些击键。

为了轻松地将对象作为 JSON 消息发送，Express 公开了以下方法：

```
res.json({ some: "object literal" }); 
```

### 例子：

```
app.use(function (req, res, next) {
  res.json({ some: "object literal" });
});

// -- OR -- //

app.get('/', function (req, res, next) {
  res.json({ some: "object literal" });
}); 
```

查看 expressjs.com 上的文档，并且 github 源代码也有据可查

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-19T15:34:20.537

您只需创建普通的 JavaScript 对象，例如：

```
var x = {
    test: 1,
    embedded: {
        attr1: 'attr',
        attr2: false
    }
}; 
```

和

```
JSON.stringify(x); 
```

将其转换为 JSON 字符串。请注意，`x`可能包含将被省略的功能。如果可用也`JSON.stringify`返回。`x.toJSON()``.toJSON()`

# grails - 如何确保唯一用户注册

> ID：10665707
> 
> 赞同：0
> 
> 时间：2012-05-19T13:47:08.963
> 
> 标签：grails, logic

我想知道确保唯一用户的最佳方法是什么。我将在我的网站上向 100 人发布共同指令。一旦他们来到我的站点，我需要将他们一个接一个地分配到东南西北地区。我还需要防止一个用户拥有多个帐户。（用户可以使用另一台计算机/他们的手机访问）

在 grails 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:05:59.553

没有办法 100% 确定所有用户都是唯一的，顺便说一句，如果您收集并验证尽可能多的详细信息，例如：

*   电子邮件（你知道），顺便说一句容易伪造
*   手机号码（发短信用特殊代码确认号码），但用户也可以使用朋友号码，或购买新的
*   要求扫描人员 ID，和/或
*   地址验证（需要扫描带有完整用户名和地址的票据/其他文件，或发送信函到该地址并带有特殊代码以确认）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T05:39:11.803

您是否在控制谁获得初始指示，例如来自联系人列表或其他什么？如果是这样，可以包括一个“注册密钥”并且只让一个特定的密钥注册一次，或者只让那些特定的电子邮件地址用于注册（一次），或者甚至提前创建用户并向他们发送登录指令。

# matlab - 如何使用微分方程求解脉冲响应？

> ID：10665708
> 
> 赞同：0
> 
> 时间：2012-05-19T13:47:19.307
> 
> 标签：matlab, math, differential-equations

给定一个微分方程： `y[n] - 0.9y[n-1] + 0.81y[n-2] = x[n] - x[n-2]`

一个。找到`h[n], n=0,1,2`使用递归的脉冲响应。

湾。使用 MATLAB 命令过滤器查找脉冲响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T14:39:12.827

我知道这是家庭作业，所以我会尽量为您提供指导，但不会完全放弃答案：

## 使用递归

这实际上很简单，因为微分方程几乎完全包含递归函数的主体：y[n] = **0.9y[n-1]** - **0.81y[n-2]** + x[n] - x[n- 2]

粗体部分实际上是递归调用！您需要做的是构建一个函数（我们称之为`func`），它接收`x`和`n`，并计算`y[n]`：

```
function y = func(x, n)
   if (n < 0)
      %# Handling for edge case n<0
      return 0
   else if (n == 0)
      %# Handling for edge case n=0
      return x(0)
   else
      %# The recursive loop
      return 0.9 * func(x, n-1) - 0.81 * func(x, n-2) + x(n) - x(n-2)
   end 
```

请注意，它是*伪代码*，因此您仍然必须检查边缘情况并处理索引（MATLAB 中的索引以 1 而不是 0 开头！）。

## 使用过滤器

数字滤波器的响应实际上是您正在寻找的 y[n]。正如您可能从课程中知道的那样，该滤波器的系数将是微分方程中指定的系数。MATLAB 有一个内置函数[`filter`](http://www.mathworks.com/help/techdoc/ref/filter.html)可以模拟这一点，所以如果你写：

```
B = [1, 0, 1];        %# Coefficients for x
A = [1, 0.9, -0.81];  %# Coefficients for y
y = filter(B, A, x); 
```

你会得到一个输出向量，它包含 y[n] 的所有值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-11-28T13:49:24.523

```
a=[1 -0.9 0.81]
b=[1 -1]
impz(b,a,50) 
```

# ruby-on-rails - Rails缓存：一个操作使多个页面过期

> ID：10665712
> 
> 赞同：6
> 
> 时间：2012-05-19T13:47:56.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, pagination, kaminari

我已经在我的应用程序中设置了动作缓存（使用清扫器，但我想这在这里无关紧要），到目前为止它工作得很好，除了一件事：

我使用 Kaminari 进行分页，因此当我执行`expire_action`我的操作时，它只会使第一页过期。我知道在使用查询字符串指定页面时缓存不起作用，我设置了一个路由，以便将页面附加到 url 的末尾（例如 /people/123/page/2）。

如有必要，我会在这篇文章中添加更多信息，但我猜我在这里缺少一些明显的东西，所以：有人知道如何使我的其余页面过期吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T06:28:16.453

我仍然对我原来的问题的答案感兴趣，如果出现解决方案，我会改变我接受的答案。也就是说，我最终只通过检查是否指定了页面来缓存原始页面：

caches_action :index, :if => Proc.new { params[:page].nil? }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:30:32.053

这是我想到的一个解决方案，面临同样的问题，虽然还没有实现。将实际到期时间缓存在自己的密钥中。关键是搜索 URL 的规范表示，即没有“page”参数。例如：

用户在[http://example.com?q=foo&page=3](http://example.com?q=foo&page=3)上搜索，所以 params 是`{ q: 'foo', page: 3 }`. 去掉“page=3”，我们就剩下 { q: 'foo' }。

在它上面运行`to_param`并添加一些前缀，我们就会得到一个像`search_expiry_q=foo`.

为这个规范查询查找缓存，即 Rails.cache.read( `search_expiry_q=foo`)。如果它存在，我们会让我们的结果在这个时候过期。不幸的是，我们只有`expires_in`，没有`expires_at`，所以我们必须进行计算。即类似的东西`expires_in: expiry_time - Time.now - 5.seconds`（5 秒有望防止任何竞争条件）。我们以这种方式缓存完整的 URL/参数。

OTOH，如果没有过期，那么最近没有人执行搜索。所以我们这样做：

```
expiry_time = Time.now + 1.hour
Rails.cache.write(`search_expiry_q=foo`, expiry_time, expires_in: 1.hour) 
```

并缓存此片段/页面，再次使用完整的 URL/参数和 expires_in: 1.hour。

# php - 最小匹配逻辑

> ID：10665714
> 
> 赞同：2
> 
> 时间：2012-05-19T13:48:08.870
> 
> 标签：php, logic

我有一个非常大的数据集，我试图找到满足所有数据集的最小集。最终集合中必须有一个值，该值存在于所有数据集中

一小部分数据看起来像

```
[0] => Array
    (
        [0] => 21
        [1] => 21
        [2] => 21
    )

[1] => Array
    (
        [0] => 29
    )

[2] => Array
    (
        [0] => 27
    )

[3] => Array
    (
        [0] => 21
        [1] => 21
        [2] => 21
        [3] => 39
        [4] => 39
        [5] => 43
    )

[4] => Array
    (
        [0] => 29
        [1] => 33
        [2] => 33
        [3] => 43
    ) 
```

在这种情况下，我需要返回 21、27 和 29 的逻辑。返回的值必须是匹配所有数组的最小值。因为我是一名 PHP 程序员，所以我用 PHP 编写了这个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:37:46.197

你可以遵循这个算法：

**测试后更新**

```
$data=array(
            array(21,29,27,57,22),
            array(22,21,23,24,25,26),
            array(31)
            );

$map = array(); // keep a map of values and how many times they occur in other sets
foreach ($data as $setid => $set) {
    foreach (array_unique($set) as $v) {
        $map[$v][$setid] = true;
    }
}

function reverseCount(array $a, array $b)
{
    return count($b) - count($a);
}

// sort reversed on intersection count
uasort($map, 'reverseCount');

// after sorting the first number will be the one that occurs the most
// keep track of which sets have been hit
$setmap = array(); $n = count($data);
foreach ($map as $v => $sets) {
    $hits = 0;
    foreach ($sets as $setid => $dummy) {
        if (!isset($setmap[$setid])) {
            --$n;
            ++$hits;
            $setmap[$setid] = true;
        } else {
            continue;
        }
    }
    if ($hits) {
        echo "value $v\n";
        if (!$n) {
            // all sets are hit
            break;
        }
    }
} 
```

这次测试了。不能证明总能得到正确的结果，因为这被认为是一种贪心逼近算法。

但我希望它能让您了解您可以做什么。让我知道是否有任何事情让您感到困惑，或者我对此是否错了:)

# python - 当前使用 Python 包装现代 Fortran 代码的最佳方法

> ID：10665717
> 
> 赞同：15
> 
> 时间：2012-05-19T13:48:24.767
> 
> 标签：python, numpy, fortran, fortran95, fortran2003

我知道并使用[f2py2e](http://cens.ioc.ee/projects/f2py2e/)来包装一些旧的 Fortran 77 代码，但我的理解是它不适用于较新的 Fortran 95 代码。我已经研究了我应该使用什么，并且遇到了[fwrap](http://fwrap.sourceforge.net/) 和[G3 f2py](https://code.google.com/p/f2py/)，它们似乎都没有对它们的当前状态或如何使用它们给出任何解释。我看到f2py的版本有使用第三代f2py的选项，但被评论为没有功能。鉴于此，我不知道我应该使用哪个项目。我应该使用哪一个？

这个问题现在已经交叉发布到（并在）计算科学堆栈交换站点作为*[我应该使用哪个包来用 Python 包装现代 Fortran 代码？](https://scicomp.stackexchange.com/q/2283/149)*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T16:57:36.663

我之前使用[SWIG](http://www.swig.org/)包装了一些 C/C++ 代码，但它们不支持 Fortran。但是，它们链接到以下内容

*   [FortWrap](http://fortwrap.sourceforge.net/)
*   [pyfortran](http://pyfortran.sourceforge.net/)
*   [F2PY](http://cens.ioc.ee/projects/f2py2e/)
*   [f90wrap](https://github.com/jameskermode/f90wrap)

至少 FortWrap 声明它们支持 Fortran95，但您可能必须使用 FortWrap 来获取 C/C++ 包装器和用于 Python 包装器的 SWIG。f90wrap 将根据 f90 源自动生成 Python 包装器（并支持派生类型）。

# opengl-es - OpenGL ES 顶点缓冲区对象不适用于我的 drawTexture 方法

> ID：10665722
> 
> 赞同：0
> 
> 时间：2012-05-19T13:49:15.840
> 
> 标签：opengl-es, opengl-es-2.0

我已经尝试使用顶点缓冲区对象在屏幕上渲染纹理已有一段时间了。我在这里有一个使用经典方法的工作函数：

[https://github.com/batiste/sdl2-opengl-es/blob/master/common.c#L546](https://github.com/batiste/sdl2-opengl-es/blob/master/common.c#L546)

第一种方法有效。稍微往下一点是 Vertex Buffer 的修改版本：

[https://github.com/batiste/sdl2-opengl-es/blob/master/common.c#L586](https://github.com/batiste/sdl2-opengl-es/blob/master/common.c#L586)

我尝试了许多不同的方法，检查了所有输入并在此站点上搜索类似问题，但没有成功。我需要一个新的，专家的眼光。

问题的第二部分是关于性能的。我想用 then 在我的 Android 手机上显示一些简单的纹理。使用顶点缓冲区可以获得什么样的加速？真的值得用 2 个三角形吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:14:36.913

`glVertexAttribPointers`最后一个参数是缓冲区的字节偏移量。所以看起来`sizeof(GLfloat)`缺少一个因素。

# excel - Excel：如果用户输入的值小于最小值，则强制使用默认值

> ID：10665725
> 
> 赞同：0
> 
> 时间：2012-05-19T13:49:49.503
> 
> 标签：excel, validation

我有一个单元格 (F24)，用户可以在其中输入百分比。但是，如果用户输入的百分比小于指定值（C24/G22），我希望单元格值自动默认为该值。

数据验证让我几乎到了那里，但它不是自动插入最小值，而是简单地弹出一个警报。我更喜欢（这对于这个特定的应用程序最有意义）该过程是自动的。

我忽略了一些简单的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:07:06.950

如果没有一些 VBA，我看不到如何做到这一点：如果您将以下内容放在发生这种情况的工作表中，它应该满足您的需求。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Cells = Cells(24, 6) And Cells(22, 7) <> 0 And Cells(22, 7) <> "" Then
        If Target.Value < Cells(24, 3) / Cells(22, 7) Then
            Target.Value = Cells(24, 3) / Cells(22, 7)
        End If
    End If
End Sub 
```

这是做什么的：

*   首先它检查目标（焦点）是否在 F24 并且 G22 单元格不是 0 或空白如果不满足所有这些条件，则什么也不做。
*   第二检查F24输入值是否小于C24/G22，如果是则用C24/G22结果替换输入值。如果该值等于或大于 C24/G22，则它什么也不做。

仍在考虑非 VBA 方式，但到目前为止还没有想到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T15:15:03.090

如果您不介意在另一个单元格中保存“正确”数据：

用户将在单元格 F24 中输入，添加列 G，因此 G24 将包含：

=IF(G24<(C24/G22),"默认",G24)

# windows - 如何监控Windows中哪个进程修改了文件？

> ID：10665729
> 
> 赞同：0
> 
> 时间：2012-05-19T13:50:50.253
> 
> 标签：windows, monitoring

例如，我想监控我的 hosts 文件。如果某个进程更改了我的主机文件，我需要知道哪个进程以及何时发生。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:33:51.810

安全审计会做这些事情。

# sdl - 在 D (D) 中将 C++ SDL 移植到 Derelict3 时遇到问题

> ID：10665730
> 
> 赞同：1
> 
> 时间：2012-05-19T13:50:56.043
> 
> 标签：sdl, d

我已经让 Derelict3 在 DMD 2.xx 下工作，但现在我无法将我的 SDL 代码从 C++ 移植到 D，以下代码给了我这个错误：

```
C:\Documents and Settings\Kevin Kowalczyk\My Documents\Code\D\Snippets\Dereli
DL>dmd main.d
main.d(14): Error: undefined identifier SDL_SetVideoMode
main.d(14): Error: undefined identifier SDL_HWSURFACE
main.d(14): Error: undefined identifier SDL_DOUBLEBUF
main.d(15): Error: undefined identifier SDL_WM_SetCaption
main.d(21): Error: cannot implicitly convert expression (SDL_Quit) of type ex
n (C) void function() nothrow to uint
main.d(20): Error: non-final switch statement without a default is deprecated 
```

这是代码：

```
import std.stdio;

import derelict.sdl2.sdl;

pragma(lib, "DerelictSDL2.lib");
pragma(lib, "DerelictUtil.lib");

SDL_Surface Surf_Display;
bool running = true;

void main() {
    DerelictSDL2.load();
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_SetVideoMode(640, 480, 32, SDL_HWSURFACE | SDL_DOUBLEBUF);
    SDL_WM_SetCaption("Derelict3SDL test", null);
    SDL_Event event;

    while(running) {
        while(SDL_PollEvent(&event)) {
            switch(event.type) {
            case SDL_Quit:
                running = false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:35:30.190

Derelict3 使用 SDL2，它没有这些功能/标志。

这是新的 API：[http ://wiki.libsdl.org/moin.cgi/CategoryAPI](http://wiki.libsdl.org/moin.cgi/CategoryAPI)

我*认为*您的新初始化代码应该是：

```
SDL_Init(SDL_INIT_EVERYTHING);
SDL_Window* window = SDL_CreateWindow("Derelict3SDL test", 
    SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, 640, 480,
    SDL_WINDOW_FULLSCREEN|SDL_WINDOW_SHOWN);
SDL_Renderer* renderer = SDL_CreateRenderer(window, -1, SDL_RENDERER_ACCELERATED); 
```

这是完全未经测试的。我只是从[SDL wiki](http://wiki.libsdl.org/moin.cgi/SDL_CreateRenderer#flags)复制代码。

# java - 访问另一个正在运行的 Java 程序中的实例？

> ID：10665731
> 
> 赞同：3
> 
> 时间：2012-05-19T13:51:06.607
> 
> 标签：java

我有一个名为 ProccesA 的主类，在我运行它之后我正在启动另一个主类（当 ProccesA 仍在为他自己运行时）并且我希望让 ProccesA 的实例在我的类中使用它，有人可以指导我吗怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T13:53:57.573

进程不像线程：您无法访问在不同*进程*中运行的类的实例，因为它们位于不同的地址空间中。您需要使用[进程间通信工具](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=/rzaha/interpro.htm)与其他进程进行通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T13:56:15.173

两个进程在不同的 JVM 中执行，因此使用不同的类加载器。您无法直接访问它们。

但是，您可以使用 RMI 在其中一个进程中公开所需的类，并以这种方式访问​​它们。

# asp.net - 显示取决于复选框值的图像

> ID：10665733
> 
> 赞同：0
> 
> 时间：2012-05-19T13:51:30.523
> 
> 标签：asp.net, vb.net, datagrid, checkbox

我`DataGrid`在 VB 中使用 ，我有一个复选框。如果它被选中，我`image.visible`转向`true`. 这是在`ItemDataBound`方法内完成的。我怎样才能得到它，所以当复选框状态发生变化时，它`DataGrid`会反弹并使用 if 语句来决定是否显示图像？

**我在 ItemDataBound 中的代码是：**

```
Dim img As Image = e.Item.FindControl("pImage")

'Find the current Part
Dim qJob As qJob = CType(e.Item.DataItem, qJob)
Dim currentJob As New Job(qJob.JobCode)
img.ImageUrl = "~/ImageShow.aspx?JobID=" + JobID.ToString + "&amp;Height=300&amp;Width=300"

'Find the control and whether that part has an image, if there is an image, display the preview button
If currentJob.JObImage IsNot Nothing AndAlso checkShowImages.Checked = True Then
   img.Visible = True
End If 
```

当复选框状态更改时，如何更新数据网格？

谢谢

# php - 如何将变量的值分配给之前的另一个变量？

> ID：10665744
> 
> 赞同：2
> 
> 时间：2012-05-19T13:53:30.487
> 
> 标签：php, mysql, variables

我的代码在这里：

```
$array_letter = array("A","B","C","Ç","D","E","F","G","H","I","İ","J","K","L",
                      "M","N","O","P","R","S","Ş","T","U","Ü","V","Y","Z");

$sql = "SELECT id,city  FROM city WHERE city LIKE '" .$array_letter[$i]."%'"; 
```

在这些代码之后：

```
for ($i=0;$i<27;$i++) {
$result = mysql_query($sql);
while ($row = mysql_fetch_array($result)) {

 echo "<h3>".$row['city']."</h3>";

   }    
} 
```

$sql 没有意义，因为`$array_letter[$i]`在那里不起作用。但是 $sql 必须在这些代码的顶部进行设计。因为我编码`switch-case statement`。根据要求，`$sql`会改这个原因我不能写下`$sql`for循环。但我所有的查询都取决于`$array_letter`. 我怎样才能`$array_letter`工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T14:02:44.727

您应该使用`mysqli`驱动程序和准备好的语句：

```
$st = $mysqli->prepare("SELECT id,city FROM city WHERE city LIKE ?'");
for ($i=0;$i<27;$i++) {
  $st->bind_param("s", $array_letter[$i].'%');
  $st->execute();
  $result = $st->get_result();

  while ($row = $result->fetch_assoc()) {
    echo "<h3>".$row['city']."</h3>";
  }  
} 
```

虽然对于这种情况，我建议只做一个大查询，因为看起来你得到了一切：`SELECT id,city FROM city ORDER BY city`......

出于教育目的，另一种方法是执行以下操作：

```
$sql = "SELECT * FROM foo WHERE bar='%s'";
mysql_query(sprintf($sql, "42")); 
```

这在其他情况下可能很有用，但同样，如果您正在编写 SQL，请使用准备好的语句，因为它们可以更优雅地解决这个问题，并提供额外的保护，帮助防止 SQL 注入攻击并最大限度地减少服务器必须执行的 SQL 解析量.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:07:58.580

正如马修在他的回答中提到的那样，您应该使用准备好的陈述。

否则考虑这个（使用 PHP 5.3 闭包）：

```
$sql = function($i) use ($array_letters) {
    return "SELECT id,city  FROM city WHERE city LIKE '" .$array_letter[$i]."%'";
} 
```

然后在你的循环中：

```
mysql_query($sql($i)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T14:24:08.243

这将有助于减少数据库调用。

```
$array_letter = array("A","B","C","Ç","D","E","F","G","H","I","İ","J","K","L",
                  "M","N","O","P","R","S","Ş","T","U","Ü","V","Y","Z");
for($i=0;$i<count($array_letter);$i++){
if($i!=count($array_letter)-1)
$qstring.="city like '".$array_letter[$i]."%' or ";
 else
$qstring.="city like '".$array_letter[$i]."%'";
}
$sql = "SELECT id,city  FROM city WHERE ".$qstring;
$result = mysql_query($sql);
while ($row = mysql_fetch_array($result)) {
echo "<h3>".$row['city']."</h3>";
  } 
```

# javascript - 带间隔警报的计时器

> ID：10665746
> 
> 赞同：4
> 
> 时间：2012-05-19T13:53:48.337
> 
> 标签：javascript, jquery

我的页面上有一个从 10 倒计时到 0 的 jquery 计时器。在 5 秒时我想显示一条警告消息，然后在 0 秒时我想显示另一条消息。

我使用了下面的代码，它将在表单字段中进行倒计时并发出警报，但是当警报显示时倒计时停止：

```
$(function(){
    var count = 10;
    countdown = setInterval(function(){
        $("#Exam_Timer").val(count + " seconds remaining!");
        if (count == 5) {
            alert('Only 5 Seconds Left');
        }   
        if (count == 0) {
            alert('Times Up')
        }
    count--;
    }, 1000);
}); 
```

有人可以让我知道我将如何重组它以使警报不会停止倒计时吗？

我尝试将警报放入单独的函数中，但这没有帮助。我创建了一个小提琴：

[http://jsfiddle.net/CQu7T/](http://jsfiddle.net/CQu7T/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T14:07:35.500

你不能这样做，`alert`因为它会停止`scripts`执行。但是，您可以使用 jQuery UI 对话框来实现这一点。检查以下演示

[工作演示](http://jsfiddle.net/joycse06/CQu7T/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:08:50.517

警报是一种奇怪的东西，它们在显示时会破坏默认的浏览器设置（控件和脚本）。

您可以做的是使用 jquery [html将警报消息放在另一个元素中](http://api.jquery.com/html/)

```
$(function(){
    var count = 10;
    countdown = setInterval(function(){
        $("#Exam_Timer").val(count + " seconds remaining!");
        if (count == 5) {
            $("#message").html('Only 5 Seconds Left');
        }

        if (count == 0) {
           $("#message").html('Times Up')
        }
        count--;
    }, 1000);
}); 
```

看到这个[jsfiddle](http://jsfiddle.net/CQu7T/8/)。您可以使用一些 css 设置此元素的样式，使其看起来像一个模态窗口。

# c# - 检索 jsonobject 中的属性值，这也是 jsonobject 的属性

> ID：10665747
> 
> 赞同：0
> 
> 时间：2012-05-19T13:53:51.527
> 
> 标签：c#, json

我对 jsonobject 有问题，我想从 jsonobject（位置）中检索属性“名称”，它也是 jsonobject（朋友）的属性。这是我的动态变量朋友

```
 friend = {"id":"100001867845514","name":"ucef nahs","location": {"id":"100245266683893","name":"settat, Casablanca, Morocco"}, "picture":"http://profile.ak.fbcdn.net/hprofile-ak-snc4/49453_100001867845514_620239062_q.jpg"} 
```

可以检索位置的属性名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:05:01.397

```
 var jss = new JavaScriptSerializer();
        var ob = jss.Deserialize<Dictionary<string, object>>(
                "{\"id\":\"100001867845514\",\"name\":\"ucef nahs\",\"location\": {\"id\":\"100245266683893\",\"name\":\"settat, Casablanca, Morocco\"}, \"picture\":\"http://profile.ak.fbcdn.net/hprofile-ak-snc4/49453_100001867845514_620239062_q.jpg\"}");
        var location = ob.FirstOrDefault(friend => friend.Key == "location").Value as IDictionary<string, object>;
        if (location != null)
        {
            var locationName = location.FirstOrDefault(elem => elem.Key == "name").Value;
            Console.WriteLine(locationName);
            Console.ReadLine();
        } 
```

# git - 如何使用 git 同时处理多个不同版本的文件？

> ID：10665752
> 
> 赞同：10
> 
> 时间：2012-05-19T13:54:23.670
> 
> 标签：git, branch, git-branch

我目前正在开发自己的神经影像工具箱，该工具箱在 MATLAB / SPM8 下运行，我的存储库中的大多数程序文件都是 MATLAB`*.m`文件。我有不同的功能分支和一个`analysis`分支，用于使用当前版本进行持续分析。同时，我正在开发代码`master`和功能分支，然后不断合并到`master`分支。

现在的问题是，我在`analysis`分支中运行的分析确实需要很多时间（甚至几天），而在那段时间里我无法`git checkout master`或`git checkout new-feature`. 这严重限制了我的工作效率。

因此，由于不可能同时保持多个分支打开，我正在考虑将`analysis`分支从开发存储库移到它自己的存储库。问题是，如果我`git init`是基于当前分支的新存储库，有没有办法不时地从（开发存储库的）当前分支`analysis`以某种方式在新的开发存储库中使用我的开发存储库的新开发代码分析库？`git merge``master`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T14:08:55.837

如果您`git clone`将现有存储库转换为新存储库，那么您可以`git push`或`git fetch`从一个到另一个来匹配您已更改的参考（分支）；不涉及合并。存储库的内容将自动硬链接以节省磁盘空间。

如果您使用and`--mirror`选项，您将省略远程跟踪分支，只在两者中拥有相同的分支，这更简单、更对称，但不像 git 的常规使用。为了最大限度地“遵循教程”的简单性，请安排第三个“中央”存储库（应该创建），您的两个工作存储库都是克隆的。`git clone``git push``--bare`

不需要合并（除了不是真正合并的“快进合并”，而是用它的新后代替换旧的分支头），因为您正在处理相同的分支；你只有两个副本。当您的分析完成并且您可以更新分析分支时，就`git merge --ff-only master`在`analysis`; 您可以在任何方便的存储库中执行此操作，但不要忘记将更改与`git push other-repository`.

* * *

另一个选项（从 Git 2.5 版开始）是[`git worktree`](https://git-scm.com/docs/git-worktree)命令，它允许多个独立的工作树，您可以在其中`git checkout`独立地等。这个和上面的克隆选项的区别在于这里只有一组*分支*。

但是（从 2.8 版开始）这仍然被认为是一个“实验性”功能，我没有亲自使用它来评论它的可靠性和实用性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T10:42:51.527

作为 Kevin Reid 解释的克隆 repo 的替代方法，您也可以使用`git-new-workdir`为您的 repo 创建第二个工作副本。这样，两个工作副本将始终自动看到相同的分支，因为它们共享一个 git 存储库。

克隆 repo 的优点是不需要任何手动同步/合并。当您在 workdir A 中提交时，该提交将在 workdir B 中可见（例如`git log`）。

唯一需要注意的是：当您更改存储库（提交、变基、重置分支等）时，您不应该在另一个工作目录中签出相同的分支 - 否则 git 会有点混乱（参见[git-new-workdir: Commit在工作树 A 中导致树 B 的虚假变化](https://stackoverflow.com/questions/10455315/git-new-workdir-commit-in-working-tree-a-causes-bogus-changes-in-tree-b) ）。

请参阅：[git 同时在两个分支上工作](https://stackoverflow.com/questions/2048470/git-working-on-two-branches-simultaneously)

# php - 如何处理与我的 PHP 模型的 nm 关系？

> ID：10665755
> 
> 赞同：4
> 
> 时间：2012-05-19T13:54:49.210
> 
> 标签：php, database, oop, coding-style, complexity-theory

我正在为某人编写基于现有数据库创建模型生成器的规范。我创建了以下虚拟数据库来说明规范：

![在此处输入图像描述](../Images/d321c87299bc9cdb5a05609e28ab4015.png)

这是一个代码片段，显示了应该如何操作各种表：

```
<?php
// DISPLAYING VALUES
$companies = new $Companies();
$companies->get_all();
foreach ($companies as $company) {
    echo "Company name: " . $company->name;
    // 1-n relationship FROM company table so company_type is 1 object
    echo "Type of company: " . $company->company_type->name;
    // 1-n relationship TO company table so portfolios is a collection of 0
    // or more objects
    foreach ($company->portfolios as $portfolio) {
        foreach ($portfolio->customers as $customer) {
            echo $customer->amount_of_contract;
            echo $customer->name;
        }
    }
}

// ADDING A PORTFOLIO
$companies = new $Companies;
$company = $companies->get_by_name('mycompany');
$portfolio = new $Portofolio;
$portfolio->company_id = $company->id;
$portfolio->year = '2012';
$portfolio->create(); 
```

由于我不是很技术，我真的不知道上述是否可行，如果可以，生成相应模型所需的工作量是多少。因此，我想问以下问题：

**Q1：从编码风格来看，您是否看到任何（合理）无法实现的东西？**

**`portfolio_has_customer`Q2：它会增加任何价值来为表格增加一个额外的步骤，还是通过上面的对象访问`amount_of_contract`属性？`customer`**

**Q3：有没有一种替代方法来处理这种`n-m`关系，`portfolio_has_customer`实现起来比上面描述的更简单？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:16:26.807

**Q1：**语法类似于[kohana 框架](http://kohanaframework.org/3.2/guide/orm/)使用的 ORM ，对我来说它看起来可以实现

**Q2：**有时会遇到这种使用数据透视表的情况，唯一让我觉得奇怪的是您访问属性的方式（我经常看到投资组合和投资组合_has_customer之间的附加关系），尽管不要认为这是理所当然的

**Q3：**不，我不知道有什么不那么复杂的

# iphone - 从 Plist 加载多个数组？

> ID：10665759
> 
> 赞同：0
> 
> 时间：2012-05-19T13:55:03.110
> 
> 标签：iphone, objective-c, load, nsarray, plist

我已经看到很多关于如何从 plist 中获取字典和东西的内容，但是如何具体指定要从 plist 中获取的数组？

例如，我在一个 plist 中有两个数组，一个叫`array1`另一个叫`array2`我如何最终得到两个 NSArray？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T13:56:49.050

数组将只包含在字典中，因此您可以像从字典中获取任何对象一样获取它们：

```
NSArray *array1 = [someDictionary objectForKey:@"array1"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T13:58:05.330

在 .plist 文件中，您的根对象是数组或字典。如果你说，你的 plist 中有 2 个数组，称为`array1`and `array2`，这意味着你的根对象是一个字典。因此，您将 plist 加载到一个`NSDictionary`并访问您的数组，如下所示：

```
NSDictionary *myPlistRoot = [NSDictionary dictionaryWithContentsOfFile:plistPath];
NSArray *array1 = [myPlistRoot objectForKey:@"array1"];
NSArray *array2 = [myPlistRoot objectForKey:@"array2"]; 
```

# php - 在 yii 中检索具有条件的 CActiveDataProvider

> ID：10665762
> 
> 赞同：5
> 
> 时间：2012-05-19T13:55:18.173
> 
> 标签：php, mysql, yii

我从 yii 开始，尝试使用标准过滤 CActiveDataProvider 时遇到了一些麻烦。

这是我的数据库模型：

```
Table            Columns
Project          [id, name, status]
userToProject    [user_id,project_id,role]
User             [id , ....] 
```

我希望**index**操作显示所有 status=finished 的项目或用户当前分配给该项目的位置。

因此为了测试目的对用户 ID 进行硬编码。这是我的代码：

```
$criteria=array(
            'order'=>'status desc',
            'with'=>array(
               'userToProject','userToProject.user'=>array('alias'=>'user')),
    );
$criteria['condition']='status=='.Project::STATUS_FINISHED;
$criteria['condition'].=' OR user.id = 6';
$dataProvider=new CActiveDataProvider('Project', array(
            'criteria'=>$criteria,
    ));
$this->render('index',array(
            'dataProvider'=>$dataProvider,
    )); 
```

但它会抛出一个异常，说**Unknown column 'user.id**。我错过了什么？谢谢

编辑：错误代码是：

```
 Column not found: 1054
 Unknown column 'users.user_id' in 'where clause'. The SQL statement executed was: 
 SELECT `t`.`id` AS `t0_c0`, `t`.`name` AS `t0_c1`, `t`.`description` AS `t0_c2`, 
 `t`.`status` AS `t0_c3`, `t`.`creation_date` AS `t0_c4` FROM `pgp_project` `t` WHERE
  (status=4 OR users.user_id=6) ORDER BY status desc LIMIT 10 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T15:37:58.450

尝试这个

```
$criteria=new CDbCriteria(array(                    
    'order'=>'status desc',
    'with'   => array('userToProject'=>array('alias'=>'user')),
    'condition'=>'status='.Project::STATUS_FINISHED.' OR user.id = 6',
));

$dataProvider=new CActiveDataProvider('Project', array(
    'criteria'=>$criteria,
));

$this->render('index',array(
    'dataProvider'=>$dataProvider,
)); 
```

# c++ - 我该如何编写这个程序？

> ID：10665767
> 
> 赞同：-6
> 
> 时间：2012-05-19T13:55:47.547
> 
> 标签：c++

*我的任务是编写 main 函数，它定义了一个名为recs[]*的对象数组，大小为 4。 的每个元素都`recs`必须用宽度和长度进行初始化，我必须计算它的面积和周长。

```
#include <iostream>
#include <cmath>
using namespace std;

struct recs
{
    double width;
    double length;
};

class rect
{
    public:
           rect();
           double area; 
           double circumference;
           void setrect();
           void calarea();
           void calcircumf();
           void print(); 
           friend bool operator==(rect rec1,rect rec2);
    private:
            double width,length;
            };
            rect recs[4];

bool operator==(rect rec1,rect rec2)
{
     return (rec1.area == rec1.area && rec1.circumference == rec2.circumference);
}

rect::rect()
{
    width=0.0;
    length=0.0;
}

void rect::setrect()
{
     cout << "width = ";
     cin >> width;
     cout << "length = ";
     cin >> length;
     print();
}

void rect::calarea()
{
     width == length;
     cout << "the return value true" << endl;
}

void rect::calcircumf()
{
     width == length;
     cout << "the return value true" << endl;
}

void rect::print()
{
     cout << "width = " << width << endl;
     cout << "length = " << length << endl << endl;
     }

int main()
{   
    double area;
    double circumference;
    double width;
    double length;

    rect recs[4] = { {10.0, 12.0}, {12.0, 14.0}, {14.0, 16.0}, {16.0, 18.0} };

    for (int i = 0; i <= 4; i++)
    {
        area = width * length;
        cout << "the area "<< i << " = " << area << endl ;

        circumference = ((width + length) + (width + length));
        cout << "the circumference" << i << " = " << circumference << endl;

    };

    system("pause");
    return 0;
} 
```

到目前为止，我已经编辑了这个代码 4 个小时，但我无法编译它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:30:36.800

看到这个。

我希望这有帮助.. ：）

```
//My task is to write the main function which defines an array of objects called recs[] with the size of 4.
//Each element of recs must be initialized with width and length, and I have to calculate its area and circumference.

#include <iostream>

using namespace std;

class Rect{

//Data Abstraction - Not letting the user access the class variables
private:    
    double width;
    double length;

public:

    Rect(){         //default constructor

        width = 0.0;
        length = 0.0;

    }

    //setters for width and length
    void setWidthAndLength(double w, double l);

    //area and circumference calculators
    double area(); 
    double circumference();     
};

void Rect :: setWidthAndLength(double w, double l){

width = w;
length = l;

}

double Rect :: area(){

return width * length;

}

double Rect :: circumference(){

return 2 * width + 2 * length;   

}

int main(int argc, char* argv[]){

Rect r[4];
int i;
double width,length;

for(i=0;i<4;i++){

    cout<<"Enter the width and length for rectangle "<<i<<endl;
    cin>>width>>length;

    //set the width
    r[i].setWidthAndLength(width,length);               

    cout<<"The Area of the Rectangle is "<<r[i].area()<<endl;
    cout<<"The Circumference of the Rectangle is "<<r[i].circumference()<<endl<<endl;

}

return 0;
} 
```

我想知道为什么我不能这样做`this.width = w;`，但无论如何..

# python - 仅运行 python 脚本的 Eclipse 插件

> ID：10665768
> 
> 赞同：2
> 
> 时间：2012-05-19T13:55:50.880
> 
> 标签：python, eclipse-plugin, eclipse-pde

我想生成一个 Eclipse 插件，它只运行带有参数的现有 Python 脚本。

虽然这听起来很简单，但我认为实现起来并不容易。我可以生成一个 Eclipse 插件。我的问题不是如何使用 PDE。但：

*   我可以从 Eclipse 插件中的 Java 调用现有的 Python 脚本吗？
*   它需要从带有一些参数的嵌入式控制台运行

这很容易做到吗？而且我不打算以任何方式重新实现它。从命令行调用它效果很好。我的问题是：Eclipse 也可以执行此操作吗？

最好的，马吕斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:34:07.270

您已经可以从`Run>External Tools>External Tools Configurations`. 您基本上是从 Eclipse 调用程序。然后，任何输出都应显示在 Eclipse 控制台视图中。外部启动配置也可以转换为外部构建器并附加到项目中。

如果您希望在 JVM 中运行您的 python 脚本，那么您需要在 java 中实现 python ...这就是您要找的吗？

# c# - 不使用 SetMaxThreads、GetMaxThreads 的线程池 QueueUserWorkItem

> ID：10665771
> 
> 赞同：1
> 
> 时间：2012-05-19T13:55:59.367
> 
> 标签：c#, multithreading, .net-2.0, threadpool

我正在使用 Threadpool 在 c# .NET 2.0 中进行一些并行处理。

代码 ：

```
int MAXThreads=GetConfigValue("MaxThreadLimit"); //This value is read from app.config

ManualResetEvent[] doneEvents=new ManualResetEvent[MAXThreads];
for(int i=0;i<MaxThreads,i++)
{

doneEvents[i]=new ManualResetEvent(false);

//create workload
DoProcess job=new DoProcess(workload,doneEvents[i]);
ThreadPool.QueueUserWorkItem(job.ThreadPoolCallBack,i);

}
WaitHandle.WaitAll(doneEvents);

//proceed

Class DoProcess
{
private WorkLoad load;
private ManualResetEvent doneEvent;
public DoProcess(WorkLoad load,ManualResetEvent doneEvent)
{
this.load=load;
this.doneEvent=doneEvent;
}
public void ThreadPoolCallBack(object index)
{
//Do Processing
doneEvent.Set();
}
} 
```

MAXThreads 值正在从配置中读取，但我想这与生成的实际线程数无关。只有少数约 4-5 个线程处理所有工作负载。我希望线程数固定在 20 左右。我怎样才能做到这一点？我错过了什么吗？..SetMaxThreads 解决了这个问题吗？..上面的代码将在四核 cpu 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T14:26:40.797

您必须改为设置最小线程数。

一般来说，这不是一个好主意，运行比处理器内核更多的线程通常会完成*更少*的工作，因为操作系统会花时间将它们换入和换出。这些上下文切换并不便宜。线程池管理器尽最大努力将活动线程数限制为核心数。仅当现有线程未及时完成时才允许运行更多线程。最多线程数。默认情况下是一个巨大的值，在您的情况下为 1000。

仅当这些工作线程由于过于频繁地被 I/O 阻塞而没有执行足够的工作时才增加最小线程数。在这种情况下，您真的应该考虑 Thread 对象而不是线程池线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:18:26.740

班上也`SetMinThreads`有`ThreadPool`。将 min 和 max 设置为相同的值“应该”修复线程数，但实际上发生在幕后的是任何人的猜测。

[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.setminthreads.aspx)：

> 线程池按需提供新的工作线程或 I/O 完成线程，直到达到每个类别的最小值。

因此，将最小线程数设置为 20 应该会在池中为您提供不少于 20 个线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T14:05:52.183

假设这是一个 C# 应用程序，您可以使用 .NET Framework 4 的并行编程模型并将线程限制为 20。

```
Parallel.For(0, n, new ParallelOptions { MaxDegreeOfParallelism = 20 }, 
  i => 
  { 
    DoWork(i);
  }); 
```

但是，如果这是一个网站/应用程序，最好一起远离 ThreadPool，除了非常小的工作，1-2 个线程，因为你不想饿死 ThreadPool。并且永远不要在代码中设置最大或最小线程，因为它会影响您的整个站点，以及使用相同线程池的所有其他站点。

在这种情况下，我建议改用[SmartThreadPool](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool)。

# php - 更快地使用 in_array() 或大型 if 条件？

> ID：10665772
> 
> 赞同：1
> 
> 时间：2012-05-19T13:56:05.480
> 
> 标签：php, arrays

我正在循环检查一个字符串是否等于另一个字符串。容易的东西。

但是，似乎我一直在添加要检查的字符串，并且在每个循环中我都会检查十个不同的字符串。只需创建一个要检查的字符串数组，然后执行 in_array(); 就更容易编码，但我想知道哪个解析更快并使用更少的系统资源？

**大批**

```
$hideme  = array(".", "..", "Thumb.db", "index.php", "icons", "index_backup.php",
     "style.css", "highlighter.css", "highlighter.js", "users");
if (!in_array($sub, $hideme)) { 
```

**字符串！=字符串**

```
if ($sub != "." && $sub != ".." ...etc 
```

差异可能可以忽略不计，只是好奇以备将来参考。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T13:58:48.293

使用第一个。速度上不会有太大差异，但可读性才是真正的区别。

*CPU 周期很便宜。程序员的时间不是。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:26:34.757

内置函数总是更快，因为它们是编译的 C 代码。必须解释 PHP 代码。

如果您真的关心 CPU 周期，isset() 是最快的，因此将可能的值设置为数组键将是最快的方法。当然，有 CPU 与内存的使用，因此使用较少的系统资源取决于您要节省哪些资源。

正如@Kendall Frey 所说，这是微优化，因此请保持代码可读性并且不要对优化做任何事情，除非分析器显示此代码对执行有很大影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T10:24:26.517

如果你的 $hideme 数组变大，最简单的解决方案（也许是最快的）是使用 isset()。

```
$hideme  = array(".", "..", "Thumb.db", "index.php", "icons", "index_backup.php",
 "style.css", "highlighter.css", "highlighter.js", "users");

if (!isset($hideme[$sub])) {
    // $sub is not in $hideme
} 
```

对于小型数组， in_array 工作正常，但通常较慢，如果您的数组很大，可能会变得太慢。

# facebook - 无法理解创建相册的脚本，并将照片上传到 Facebook 粉丝页面

> ID：10665773
> 
> 赞同：1
> 
> 时间：2012-05-19T13:56:14.177
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, photos

我正在按照本教程[http://www.webspeaks.in/2012/02/create-album-and-upload-photo-to.html](http://www.webspeaks.in/2012/02/create-album-and-upload-photo-to.html)将照片上传到 Facebook 粉丝页面相册。专辑也是由脚本创建的。

但是，问题是我无法理解某些东西，或者 facebook 更改了流程，并且教程没有更新。

根据教程，此页面：[https](https://developers.facebook.com/tools/explorer?method=GET&path=me%2Faccounts) ://developers.facebook.com/tools/explorer?method=GET&path= me%2Faccounts 应该返回一个带有令牌的 json 数据。

但这是我得到的数据，它只显示应用程序，而不是粉丝页面。{“名称”：“应用程序名称”，“类别”：“应用程序”，“id”：“appid”}

另一个疑问是，如果我想将照片上传到 facebook 粉丝页面，我应该在这些行上放什么？

```
$facebook = new Facebook(array(
 'appId'  => '<app_id>',
 'secret' => '<app_sercret>',
 'fileUpload' => true
)); 
```

我无法理解这一点。我真的需要设置一个新的应用程序，用于将照片上传到粉丝页面？

感谢您的任何澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:06:28.640

如果您想获得有趣的页面列表作为答案，您必须在访问令牌时添加权限“manage_pages”。

```
$facebook = new Facebook(array(  'appId'  => '<app_id>',  'secret' =>
'<app_sercret>',  'fileUpload' => true )); 
```

如果您想使用 grap api，您必须创建自己的应用程序 - [https://developers.facebook.com/apps](https://developers.facebook.com/apps)

# c# - 使用 BouncyCastle 加密私钥

> ID：10665778
> 
> 赞同：5
> 
> 时间：2012-05-19T13:56:52.123
> 
> 标签：c#, .net, vb.net, rsa, bouncycastle

我正在使用 .NET 版本的 BouncyCastle，我必须将 RSA 私钥保存到文件中，显然出于安全原因使用密码加密。

我现在正在尝试的是：

```
Dim rand As New SecureRandom
    Dim arr As Byte() = New Byte(7) {}
    rand.NextBytes(arr)

    Dim privateKeyInfo As EncryptedPrivateKeyInfo = EncryptedPrivateKeyInfoFactory.CreateEncryptedPrivateKeyInfo(
"PBEwithHmacSHA-256",
 Repository.Password.ToCharArray,
 arr,
 1,
 data.BouncyCastlePrivateKey
) 
```

但是 BouncyCastle 在最后一条指令上抛出了 NullReferenceException。由于该方法完全没有记录> :(我想知道你们中是否有人知道如何正确使用它...

（顺便说一下，我的参数都不是NULL，已经检查过了）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:36:22.143

那个特定的 PBE 算法将不起作用。试试这个：`"PBEwithSHA-1and3-keyDESEDE-CBC"`

# java - 需要更有效的暂停循环方式

> ID：10665780
> 
> 赞同：4
> 
> 时间：2012-05-19T13:56:55.417
> 
> 标签：java, android, multithreading, concurrency

是否可以重写此代码以更好地使用处理器？我有一个类，它在一个单独的线程中执行一些具有固定周期的任务。有时可以暂停和恢复此过程。目前我正在使用一个标志来暂停，它工作正常，但是当进程暂停时，以这种方式循环仍然加载处理器。有可能解决这个问题吗？

```
private boolean mIsCanceled = false;
private boolean mIsPaused = true; // TODO more efficient for processor way of pausing is required
private final Thread mTimerThread = new Thread(new Runnable() {
    @Override
    public void run() {
        while(!mIsCanceled){
            try {
                Thread.sleep(UPDATE_PERIOD);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            if (!mIsPaused){
                doStep();
            }
        }
    }
});

public MyClass(){
    mTimerThread.start();
}

private void pause(){
    mIsPaused = true;
}

private void resume(){
    mIsPaused = false;
}

private void doStep(){
    // Some code
} 
```

请提供我的代码的替代实现。

PS 环境是Android OS 2.2+

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T23:33:36.243

可用的工具有：

`wait`/ `notify`- 我们都在试图摆脱这个古老的系统。

`Semaphore`s - 一旦你的线程抓住了它，你就按住它直到释放，所以再次抓住它不会阻塞。这意味着您不能从自己的线程中暂停。

`CyclicBarrier`- 每次使用时都必须重新创建。

`ReadWriteLock`- 我的最爱。您可以让尽可能多的线程暂停您，并且只有在所有线程都调用时您才会恢复`resume`。如果您愿意，您甚至可以暂停自己。

```
import java.util.concurrent.locks.ReadWriteLock;
import java.util.concurrent.locks.ReentrantReadWriteLock;

/**
 * PauseableThread is a Thread with pause/resume and cancel methods.
 *
 * The meat of the process must implement `step`.
 *
 * You can either extend this and implement `step` or use the factory.
 *
 * Note that I cannot extend Thread because my resume will clash with Thread's deprecated one. 
 *
 * Usage: Either write a `Stepper` and run it in a `PausableThread` or extend `PausableThread` and call `blockIfPaused()` at appropriate points.
 */
public abstract class PauseableThread implements Runnable {
  // The lock.
  // We'll hold a read lock on it to pause the thread.
  // The thread will momentarily grab a write lock on it to pause.
  // This way you can have multiple pausers using normal locks.
  private final ReadWriteLock pause = new ReentrantReadWriteLock();
  // Flag to cancel the wholeprocess.
  private volatile boolean cancelled = false;
  // The exception that caused it to finish.
  private Exception thrown = null;

  @Override
  // The core run mechanism.
  public void run() {
    try {
      while (!cancelled) {
        // Block here if we're paused.
        blockIfPaused();
        // Do my work.
        step();
      }
    } catch (Exception ex) {
      // Just fall out when exception is thrown.
      thrown = ex;
    }
  }

  // Block if pause has been called without a matching resume.
  private void blockIfPaused() throws InterruptedException {
    try {
      // Grab a write lock. Will block if a read lock has been taken.
      pause.writeLock().lockInterruptibly();
    } finally {
      // Release the lock immediately to avoid blocking when pause is called.
      pause.writeLock().unlock();
    }

  }

  // Pause the work. NB: MUST be balanced by a resume.
  public void pause() {
    // We can wait for a lock here.
    pause.readLock().lock();
  }

  // Resume the work. NB: MUST be balanced by a pause.
  public void resume() {
    // Release the lock.
    pause.readLock().unlock();
  }

  // Stop.
  public void cancel() {
    // Stop everything.
    cancelled = true;
  }

  // start - like a thread.
  public void start() {
    // Wrap it in a thread.
    new Thread(this).start();
  }

  // Get the exceptuion that was thrown to stop the thread or null if the thread was cancelled.
  public Exception getThrown() {
    return thrown;
  }

  // Create this method to do stuff. 
  // Calls to this method will stop when pause is called.
  // Any thrown exception stops the whole process.
  public abstract void step() throws Exception;

  // Factory to wrap a Stepper in a PauseableThread
  public static PauseableThread make(Stepper stepper) {
    StepperThread pauseableStepper = new StepperThread(stepper);
    // That's the thread they can pause/resume.
    return pauseableStepper;
  }

  // One of these must be used.
  public interface Stepper {
    // A Stepper has a step method.
    // Any exception thrown causes the enclosing thread to stop.
    public void step() throws Exception;
  }

  // Holder for a Stepper.
  private static class StepperThread extends PauseableThread {
    private final Stepper stepper;

    StepperThread(Stepper stepper) {
      this.stepper = stepper;
    }

    @Override
    public void step() throws Exception {
      stepper.step();
    }
  }

  // My test counter.
  static int n = 0;

  // Test/demo.
  public static void main(String[] args) throws InterruptedException {

    try {
      // Simple stepper that just increments n.
      Stepper s = new Stepper() {
        @Override
        public void step() throws Exception {
          n += 1;
          Thread.sleep(10);
        }
      };
      PauseableThread t = PauseableThread.make(s);
      // Start it up.
      t.start();
      Thread.sleep(1000);
      t.pause();
      System.out.println("Paused: " + n);
      Thread.sleep(1000);
      System.out.println("Resuminng: " + n);
      t.resume();
      Thread.sleep(1000);
      t.cancel();
    } catch (Exception e) {
    }
  }
} 
```

**编辑：**代码修改为更通用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:07:08.930

您最好的选择是使用 wait()/notify() 或简单地切换到[ScheduledExecutorService](http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html)

正确使用 wait()/notify() 可能很棘手。我强烈推荐“Java Concurrency in Practice”来了解有关线程的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T14:18:26.233

我相信这里最好的方法是使用`Thread.wait`等待线程而不是睡眠，并`Thread.notify`在您等待的线程中使用。更多信息在这里： [http ://www.javamex.com/tutorials/synchronization_wait_notify.shtml](http://www.javamex.com/tutorials/synchronization_wait_notify.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T14:19:55.583

您可以通过使用监视器而不是休眠线程来显着提高效率。您只需使用关键字 synchronized 在代码中创建块。还有一个充当监视器的最终对象。在监视器上的 API 中查找更多信息。

# php - PHP 和 Wordpress：如何显示已完成自定义用户元字段的所有用户的列表，省略那些字段为空的用户？

> ID：10665781
> 
> 赞同：1
> 
> 时间：2012-05-19T13:56:58.523
> 
> 标签：php, mysql, wordpress

在我正在开发的一个 Wordpress 站点上，我创建了一个自定义用户元字段（矩阵诊断），人们可以在其中添加其他信息。

我正在尝试显示已完成此字段（及其响应）的所有用户的列表，但想省略未完成此字段的用户。

经过大量的谷歌搜索，我得到的最接近的是这段代码......

```
<ul class="unstyled">

<?php
  //these are the arguments for the get_users function below
  $args  = array(
     'fields' => 'all_with_meta',
     'meta_query' => array('key' => 'matrix-diagnosis')
  );

  //get_users calls WP_User_Query and returns an array of matching users
  $users = get_users($args);

  //leaving an array of $users sorted by the value of meta 'points'
  foreach ($users as $user) : ?>

     <li>
        <h3><?php the_author_meta( 'first_name', $user->id ); ?> <?php the_author_meta( 'last_name', $user->id ); ?></h3>
        <p><?php the_author_meta( 'matrix-diagnosis', $user->id ); ?></p>
     </li>

<?php endforeach; /* end for each function */ ?>

</ul> 
```

这实际上将查询数据库并显示所有用户及其响应的列表，但如果有人尚未填写该字段，则仅显示他们的姓名。如何清理该字段没有价值的人员列表？

我有一种预感，秘密不在于使用数组，而在于使用 $wpdp 标记，到目前为止我还没有运气。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:48:05.567

我认为您可以更改`the_author_meta( 'matrix-diagnosis', $user->id );`为`$matrix_check = get_the_author_meta( 'matrix-diagnosis', $user->id, true );`并在您的 foreach 语句上检查是否为空，例如：

```
foreach ($users as $user) : ?>
<?php $matrix_check = get_the_author_meta( 'matrix-diagnosis', $user->id, true );
if ($matrix_check != "") {?>
     <li>
        <h3><?php the_author_meta( 'first_name', $user->id ); ?> <?php the_author_meta( 'last_name', $user->id ); ?></h3>
        <p><?php the_author_meta( 'matrix-diagnosis', $user->id ); ?></p>
     </li> 
```

**注意：未测试，部分标签未关闭**

# php - php.ini：哪一个？

> ID：10665783
> 
> 赞同：71
> 
> 时间：2012-05-19T13:57:10.710
> 
> 标签：php

我从旧的 apache 迁移到 nginx 和 php 5.3.10。当我尝试修改 php.ini 以满足我的需要时，我发现其中有 3 个：

```
$ locate php.ini

/etc/php5/cgi/php.ini
/etc/php5/cli/php.ini
/etc/php5/fpm/php.ini 
```

我应该编辑哪一个？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-05-19T14:15:19.463

一般来说，`cli/php.ini`从命令行调用 PHP 二进制文件时会使用该文件。 您可以从命令行
检查是否运行。`php --ini`

`fpm/php.ini`将在 PHP 作为 FPM 运行时使用 - 这是 nginx 安装的情况。
您可以从您的网络服务器提供的 php 页面检查该调用`phpinfo()`。

`cgi/php.ini`，在您的情况下，很可能不会使用。

使用两个不同的`php.ini`文件*（一个用于 CLI，另一个用于从您的网络服务器提供页面）*是经常使用的，并且有一个主要优点：它允许您在每种情况下拥有不同的配置值。

通常，在`php.ini`网络服务器使用的文件中，您将指定一个相当短的`max_execution_time`: 网页应该快速提供服务，如果一个页面需要超过几十秒*（默认为 30 秒）*，这可能是因为一个错误——页面的生成应该停止。
另一方面，您可以从 crontab（或手动）启动相当长的脚本，这意味着`php.ini`将使用的文件是`cli/`. 对于这些脚本，您将指定比 in`max_execution_time`更长的时间。`cli/php.ini``fpm/php.ini`

`max_execution_time`是一个常见的例子；当然，您可以对其他几个配置指令执行相同的操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-22T15:46:42.900

尽管 Pascal 的回答详细且内容丰富，但在假设每个人都知道如何使用的情况下没有提及一些关键信息`phpinfo()`

对于那些不这样做的人：

导航到您的网络服务器根文件夹，例如`/var/www/`

在此文件夹中创建一个名为`info.php`

编辑文件并输入`phpinfo()`

导航到文件，例如：`http://www.example.com/info.php`

在这里，您将看到以下`php.ini`路径`Loaded Configuration File`：

[![phpinfo](../Images/53e1b395fd487208b7cfd279fb56d7a5.png)](https://i.stack.imgur.com/gykcp.png)

确保完成后删除`info.php`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T14:23:03.517

这真的取决于情况，对我来说它在 fpm 中，因为我使用的是 PHP5-FPM。您的问题的解决方案可能是通用 php.ini，然后使用创建的符号链接，如：

```
ln -s /etc/php5/php.ini php.ini 
```

然后，您所做的任何修改都将保存在一个通用的 .ini 文件中。不过，这可能不是真正的最佳解决方案，您可能需要考虑修改一些配置，以便在一个位置上使用一个文件。不是多个位置一起被黑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-24T19:09:37.887

您可以找到使用的 php.ini 文件是什么：

*   通过在一个php页面中添加**phpinfo()**并显示页面（如下图）
*   在 shell 中，输入： php -i

接下来，您可以在 Loaded Configuration 文件中找到信息（所以这里是 /user/local/etc/php/php.ini）

有时，您已经指出（无），在这种情况下，您只需将您可以在此处找到的自定义 php.ini 放入：[http ://git.php.net/?p=php-src.git;a=blob ;f=php.ini-production;hb=HEAD](http://git.php.net/?p=php-src.git;a=blob;f=php.ini-production;hb=HEAD)

[![](../Images/9b4cef12d28ca29daf1062dab13c4c77.png)](https://i.stack.imgur.com/LyqVm.png)

我希望这个答案会有所帮助。

# java - 引用对象的Java序列化是“丢失值”吗？

> ID：10665786
> 
> 赞同：2
> 
> 时间：2012-05-19T13:57:28.820
> 
> 标签：java, serialization, object-graph

再会，

我有一个我无法理解的有趣问题。我有一个名为“HomeScreenManager”的类，它维护一个名为*chat的***LinkedList<String>**。HomeScreenManager 实例位于服务器上，负责跟踪连接和聊天日志。然后我创建了一个名为“ProtocolHomeScreen”的类，它是一个带有**LinkedList<String>**的类，称为*chat*****并实现可序列化。当需要通过聊天更新所有客户端时，我想发送一个 ProtocolHomeScreen。所以我创建了一个全新的 ProtocolHomeScreen 实例，我说它是字符串的链表“获取”了 HomeScreen 的链表。所以换句话说，我要序列化的链表是在不同的类中创建的，但我用另一个实例指向它。问题是数据没有被发送，只有一个空的 LinkedList 出现在另一边。我已经逐行完成了调试器并检查了所有变量，就在我调用 writeObject 之前，一切似乎都很好，但是在客户端，当我收到 ProtocolHomeScreen 实例时，链接列表是空的！（虽然它不是空的）有什么想法吗？谢谢！****

 ****```
public class HomeScreenManager implements ObjectMessageHandler, Serializable
{
protected LinkedList<User> users;
protected LinkedList<String> chat;
protected LinkedList<String> sessions;

public HomeScreenManager()
{
    chat = new LinkedList<String>();
    users = new LinkedList<User>();
    sessions = new LinkedList<String>();
}
protected void handleChat(String message)
{
    chat.add(message);

    ProtocolHomeScreen p = new ProtocolHomeScreen(this);

    for(User u:users)
    {
        u.connection.WriteObject(p); //At this point in time, p has the correct data, but when I deserialize p, the chat list is empty...
    }
} 
```

然后这里是协议类...

```
public class ProtocolHomeScreen implements Serializable
{
    public LinkedList<String> chat;
    public LinkedList<String> players;
    public LinkedList<String> sessions;

    public ProtocolHomeScreen(HomeScreenManager hms)
    {
        players = new LinkedList<String>();
        for(User u:hms.getUsers())
        {
            players.add(u.getUsername());
        }
        sessions = hms.getSessions();
        chat = hms.getChat();

        chat = new LinkedList<String>();

        for(String s: hms.getChat())
        {
            chat.add(s);
        }

    }

} 
```

**编辑**

这是客户端的代码......请注意，播放器的 LinkedList 很好，但我认为这与我在 ProtocolHomeScreen 的构造函数中创建了一个新实例（在服务器端）有关

```
else if(obj instanceof ProtocolHomeScreen)
        {       
            ProtocolHomeScreen phs = (ProtocolHomeScreen) obj;

            sessionModel.removeAllElements();
            playersModel.removeAllElements();
            chatOutput.setText("");
            for(String s:phs.players)
                playersModel.addElement(s);

            for(String s:phs.sessions)
                sessionModel.addElement(s); 

            for(String s:phs.chat)
            {
                chatOutput.setText(chatOutput.getText()+s);
            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T02:27:03.880

你需要看看`ObjectOutputStream.reset()`它为什么存在。任何给定的对象只会通过 an 发送一次，`ObjectOutputStream`除非您`reset()`使用流或使用`writeUnshared().`****

# mongodb - 如何在 MongoDB 中进行类型检查？

> ID：10665795
> 
> 赞同：12
> 
> 时间：2012-05-19T13:58:36.123
> 
> 标签：mongodb, mongoose

这里的例子

[http://mongoosejs.com/docs/populate.html](http://mongoosejs.com/docs/populate.html)

提供以下代码

```
var story1 = new Story({
      title: "A man who cooked Nintendo"
    , _creator: aaron._id
  }); 
```

_creator 上面定义如下

```
_creator : { type: Schema.ObjectId, ref: 'Person' } 
```

如果我将代码修改为以下

```
 var story1 = new Story({
      title: "A man who cooked Nintendo"
    , _creator: {name: 'test'}
  }); 
```

似乎很乐意将数据插入 MongoDB。

```
{ "title" : "A man who cooked Nintendo", "_creator" : { "name" : "test" }, "_id" : ObjectId("4fb7a55315c5f2de07000002"), "fans" : [ ] } 
```

在插入之前如何捕获错误？我想检查它不仅是一个 ObjectId，而且它对应于一个有效的人。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-19T18:20:07.450

要继续@JohnnyHK 的建议，这里有一个完整的解决方案（假设 _creator 是对数字 id 的引用）。

如果要检查该值是否为有效的 ObjectId

```
function isObjectId(n) {
  return mongoose.Types.ObjectId.isValid(n);
} 
```

验证：[验证器，'我的错误类型']

```
_creator : { type: Schema.ObjectId, ref: 'Person', validate: isObjectId } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-07T14:00:07.617

方法 isValid 不存在（不再存在？），您最好的选择是一个简单的正则表达式，如此[处提供](https://stackoverflow.com/questions/11985228/mongodb-node-check-if-objectid-is-valid)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T14:30:24.280

您可以将验证添加到架构的 _creator 字段，如此处[所述](http://mongoosejs.com/docs/validation.html)。

```
_creator : { type: Schema.ObjectId, ref: 'Person', validate: ... } 
```

# ios - 更改 MKMap 类型，如 iPhone 上的“地图”应用程序

> ID：10665799
> 
> 赞同：0
> 
> 时间：2012-05-19T13:59:04.747
> 
> 标签：ios, curl, map, uiviewcontroller, transfer

我目前正在尝试在另一个视图控制器（BackgroundMapViewController）的分段控件的帮助下更改我的地图的地图类型（来自 MapsViewController）。我使用 page curl 来查看带有分段控件的 viewcontoller（就像 iphone 上的地图应用程序）问题是我不知道如何将信息从我的 BackgroundMapViewController 传递到我的 MapsviewController。（可能有委托？？）我知道你使用委托将一个对象的一些“工作”交给另一个对象，但我不知道我应该如何在这里使用它。如果有人可以帮助我解决我的问题，我将不胜感激

（你可以在这里看到 UI 的图片：http: [//i50.tinypic.com/169masx.png](http://i50.tinypic.com/169masx.png)）

MapsBackgrounsViewController.h

```
 @interface MapBackgroundViewController : UIViewController{
    IBOutlet UISegmentedControl *segmentedControl;
    MKMapType mapType;
    }

    @property (nonatomic) IBOutlet UISegmentedControl *segmentedControl;
    @property(nonatomic) MKMapType mapType;
    - (IBAction)segmentedControllChanged:(id)sender; 
```

MapsViewController.m

```
 @interface MapBackgroundViewController ()
    @end

    @implementation MapBackgroundViewController
    @synthesize segmentedControl, mapType;

    - (IBAction)segmentedControllChanged:(id)sender {

    if (segmentedControl.selectedSegmentIndex == 0) {
        mapType = MKMapTypeStandard;
    }else if (segmentedControl.selectedSegmentIndex == 1) {
        mapType = MKMapTypeSatellite;
    } else if (segmentedControl.selectedSegmentIndex == 2) {
       mapType = MKMapTypeHybrid;
    }

    [self dismissModalViewControllerAnimated:YES]; 
```

}

MapsViewController.h

```
 @interface MapsViewController : UIViewController<MKMapViewDelegate,   UISearchBarDelegate>{
   @private
   IBOutlet MKMapView *map;
   //some other outlet
   }

   @property (nonatomic, retain) IBOutlet MKMapView *map;
   @property (nonatomic, retain) IBOutlet  UISearchBar *searchBar;
   //some other actions and properties 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:11:18.647

不需要存储mapType，直接在地图视图中设置即可：

```
@interface MapBackgroundViewController ()
@end

@implementation MapBackgroundViewController
@synthesize segmentedControl, mapViewController; // Connect mapViewController to your other view controller

- (IBAction)segmentedControllChanged:(id)sender {

if (segmentedControl.selectedSegmentIndex == 0) {
    self.mapViewController.map.mapType = MKMapTypeStandard;
}else if (segmentedControl.selectedSegmentIndex == 1) {
    self.mapViewController.map.mapType = MKMapTypeSatellite;
} else if (segmentedControl.selectedSegmentIndex == 2) {
   self.mapViewController.map.mapType = MKMapTypeHybrid;
}

[self dismissModalViewControllerAnimated:YES]; 
```

# python - 是否存在不存储值的类 Set 对象？

> ID：10665804
> 
> 赞同：3
> 
> 时间：2012-05-19T14:00:19.080
> 
> 标签：python, set

我想要一种数据类型，它可以让我有效地跟踪已“添加”到其中的对象，从而允许我测试成员资格。我不需要任何其他功能。

据我所知，Python 没有这样的数据类型。最接近我想要的是集合，但集合将始终存储值（我不需要）。

目前我能想到的最好的方法是获取`hash()`每个对象的值并将其存储在一个集合中，但在较低级别，正在计算散列的散列，并将散列字符串存储为一个值。

有没有办法只使用 Sets 的低级查找功能而不实际指向任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T14:11:53.177

基本上，不，因为正如我在评论中指出的那样，两个不相等的对象完全有可能共享同一个哈希键。

哈希键指向的不是任何东西或一个对象，而是一个包含零个或多个对象的桶。然后，集合实现需要对其中的每一个进行相等比较，以确定对象是否在集合中。

所以你总是需要至少足够的信息来进行相等比较。如果您有非常大的对象，其相等性可以根据其数据的子集来确定，例如 2 或 3 个字段，您可以考虑创建一个仅包含这些字段的新对象并将其存储在集合中而不是整个对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-06T13:29:47.210

`weakref`模块实现了一堆容器，可以在不“存储”值的情况下测试成员资格，缺点是当最后一个对对象的强引用被删除时，对象从弱容器中消失。

如果这对你有用，`WeakSet`那就是你想要的。

如果这对您不起作用，那么您似乎需要一个概率性的[Bloom 过滤器](https://en.wikipedia.org/wiki/Bloom_filter)（有误报），但对于您的目的来说是稳健的（默认情况下没有误报）。

典型的安排是“在过滤器中尝试，如果不是，则为否；如果是，则检查慢速方式，例如文件中的单词列表”

# php - PHP邮件程序 - 一些电子邮件地址的问题没有收到它们

> ID：10665808
> 
> 赞同：0
> 
> 时间：2012-05-19T14:00:36.187
> 
> 标签：php, phpmailer

我对某些成员没有收到他们的电子邮件有疑问。其中包括 aol.com 和 hotmail.co.uk。

我使用 (1) PHPmailer 和 (2) Thunderbird 发送了相同的电子邮件，并发现在 PHP 中添加了某些内容，但它们没有出现在 PHPmailer.php 文件中的任何位置

例如“X-PHP-Originating-Script: 1003:class.phpmailer.php”

这是从哪里来的，这是电子邮件失败的原因吗？

还是因为在 To: 行中有多个地址 - 如果一个循环并单独发送每个地址，而不是在一个 PHPmail 中发送它们 - 唯一的问题是附件，这会堵塞带宽。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:52:02.603

你得到的原因`X-PHP-Originating-Script: 1003:class.phpmailer.php`是因为 phpmailer 将它自己的签名添加到所有发送的电子邮件中。

要解决这个问题，您应该： - 将 phpmailer 更新到最新版本 - 通过 SMTP 发送邮件 - 作为最后的手段，硬编码更改 X-PHP-Originating-Script 以说出类似“thunderbird”的内容

电子邮件绝对没有通过防火墙，因此进入垃圾邮件。

# .htaccess - Mod重写404错误

> ID：10665813
> 
> 赞同：1
> 
> 时间：2012-05-19T14:01:05.203
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

下面的 mod 重写不起作用.. 例如，使用[http://www.mywebsite.com/category/general](http://www.mywebsite.com/category/general)之类的 url .. 我收到 404 错误。

```
RewriteEngine On
RewriteBase /
RewriteRule ^category/([A-Za-z0-9-]+)&type=([A-Za-z0-9-]+)&r=([A-Za-z0-9-]+)&g=([A-Za-z0-9-]+)&page=([A-Za-z0-9-]+)/?$ /category.php?c=$1&type=$2&r=$3&g=$4&page=$5 [L] 
```

如果我使用下面的 mod rewrite 它可以工作，难道不应该有更好的方法而不是必须输入所有组合。

```
RewriteRule ^category/([A-Za-z0-9-]+)/?$ /category.php?c=$1 [L]
RewriteRule ^category/([A-Za-z0-9-]+)&type=([A-Za-z0-9-]+)/?$ /category.php?c=$1&type=$2 [L]
RewriteRule ^category/([A-Za-z0-9-]+)&page=([A-Za-z0-9-]+)/?$ /category.php?c=$1&page=$2 [L]
RewriteRule ^category/([A-Za-z0-9-]+)&type=([A-Za-z0-9-]+)&page=([A-Za-z0-9-]+)/?$ /category.php?c=$1&type=$2&page=$3 [L]
RewriteRule ^category/([A-Za-z0-9-]+)&r=([A-Za-z0-9-]+)/?$ /category.php?c=$1&r=$2 [L]
RewriteRule ^category/([A-Za-z0-9-]+)&type=([A-Za-z0-9-]+)&r=([A-Za-z0-9-]+)/?$ /category.php?c=$1&type$2&r=$3 [L]
RewriteRule ^category/([A-Za-z0-9-]+)&r=([A-Za-z0-9-]+)&page=([A-Za-z0-9-]+)/?$ /category.php?c=$1&r=$2&page=$3 [L]
RewriteRule ^category/([A-Za-z0-9-]+)&type=([A-Za-z0-9-]+)&r=([A-Za-z0-9-]+)&g=([A-Za-z0-9-]+)&page=([A-Za-z0-9-]+)/?$ /category.php?c=$1&type=$2&r=$3&g=$4&page=$5 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:22:02.933

您的第一个规则集要求每个参数都存在，因此它永远不会在您的示例 URL 上触发。第二个规则集似乎正在处理您的示例，因为您的第一个规则处理“在 'category/' 之后只有一个单词”的情况。

如果您想要一个规则，请尝试：

```
RewriteEngine On
RewriteBase /
RewriteRule ^category/([A-Za-z0-9-]+)(&type=([A-Za-z0-9-]+))?(&r=([A-Za-z0-9-]+))?(&g=([A-Za-z0-9-]+))?(&page=([A-Za-z0-9-]+))?/?$ /category.php?c=$1&type=$3&r=$5&g=$7&page=$9 [L] 
```

或者，由于参数似乎都直接映射：

```
RewriteEngine On
RewriteBase /
RewriteRule ^category/([A-Za-z0-9-]+)(&type=[A-Za-z0-9-]+)?(&r=[A-Za-z0-9-]+)?(&g=[A-Za-z0-9-]+)?(&page=[A-Za-z0-9-]+)?/?$ /category.php?c=$1&type=$2&r=$3&g=$4&page=$5 [L] 
```

两者都假设a）您将始终在“类别/”之后拥有第一位，并且b）其余选项可以混合和匹配，但始终保持相同的顺序。第二个更好，因为这意味着您可以在将来根据需要扩展它 - 第一个已用完反向引用（它使用 9 美元）。

# java - 将幻数插入类文件

> ID：10665815
> 
> 赞同：0
> 
> 时间：2012-05-19T14:01:10.633
> 
> 标签：java, .class-file, magic-numbers

我有一个 jar，其中所有类文件都删除了它们的幻数和类型，我对这个特定领域不是很了解。将 0XCAFEBABE 和类型重新添加回每个类文件并重新打包 jar 的最佳方法是什么？

编辑：我检查过，只有幻数丢失，如果我手动添加文件是完整的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:13:22.913

如果您想在运行时执行此操作，您可以创建自己的类加载器。我附上了一些可能会让你上路的伪代码：

```
public class MyClassLoader extends SecureClassLoader {

  @Override
  protected Class<?> findClass(String name) throws ClassNotFoundException {
     ...
     FileInputStream fis = new FileInputStream(brokenClassFile);
     BufferedInputStream bis = new BufferedInputStream(fis);
     ByteArrayOutputStream bas = new ByteArrayOutputStream((int) encryptedClassFile.length());
     byte[] wrongBytes = bas.toByteArray(); 
     byte[] goodbytes = ...     
     // add  a new byte[] and put in the appropiate missing bytes for the cafebabe and magic number
     CodeSource cs = new CodeSource(jarfile.toURI().toURL(), (CodeSigner[]) null);
     return super.defineClass(name, goodbytes, 0, bytes.length, cs);

  }

} 
```

但我想最好使用一些操作系统工具来修复 jar 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:21:55.163

如果您只想将幻数添加回类文件，您可以为此使用一个简单的 shell 脚本（假设您在 Linux 上，或者在 Windows 上拥有 Cygwin）。

首先创建一个只有 4 个字节头的文件 (CAFEBABE)。

然后，将 jar 中的类文件解压缩到某个目录，并在根目录下运行以下命令：

```
find . -name "*.class" | while read file; do
    mv ${file} ${file}-old
    cat /path/to/file/with/header ${file}-old > $file
    rm ${file}-old
done 
```

注意：上面的脚本可以在 bash 中运行，但是您应该能够为任何 shell 甚至 Windows 编写类似的东西。

**但是“删除**他们的幻数和类型”是什么意思？如果字节码以任何方式被破坏，即使不是不可能，更改也可能更难以修复。

# sql-server - 为键、索引、约束实现命名标准

> ID：10665817
> 
> 赞同：6
> 
> 时间：2012-05-19T14:01:22.613
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我有一个包含很多表的数据库，我想根据以下规则重命名主/外键、索引和默认约束：

*   主键：`PK_<table name>`
*   外键：`FK_<table_name>_<column name1>_column name2>...`
*   索引：`IX_<table_name>_<column name1>_column name2>...`
*   默认约束：`DF_<table_name>_<column name>`
*   检查约束：`CK_<table_name>_<column name>`

有人已经做过类似的 SQL 脚本了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T14:21:54.713

要将主键重命名为简单`PK_TableName`：

```
CREATE PROCEDURE dbo.Rename_PrimaryKeys
    @PrintOnly BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @sql NVARCHAR(MAX);
    SET @sql = N'';

    SELECT @sql = @sql + CHAR(13) + CHAR(10) + 'EXEC sp_rename ''' 
        + REPLACE(name, '''', '''''') + ''', ''PK_' 
        + REPLACE(OBJECT_NAME(parent_object_id), '''', '') + ''', ''OBJECT'';'
    FROM sys.key_constraints
    WHERE type = 'PK'
    AND name <> 'PK_' + REPLACE(OBJECT_NAME(parent_object_id), '''', '')
    AND OBJECTPROPERTY(parent_object_id, 'IsMsShipped') = 0;

    PRINT @sql;

    IF @PrintOnly = 0 AND @sql > N''
    BEGIN
        EXEC sp_executesql @sql;
    END
END
GO 
```

要使用该方案重命名 FK `FK_TableName_col_col_ReferencedName_col_col`：

```
CREATE PROCEDURE dbo.Rename_ForeignKeys_WithColumns
    @PrintOnly BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @sql NVARCHAR(MAX);
    SET @sql = N'';

    SELECT @sql = @sql + CHAR(13) + CHAR(10) 
    + 'EXEC sp_rename ''' + REPLACE(name, '''', '''''')
        + ''', ''FK_' + REPLACE(OBJECT_NAME(fk.parent_object_id), '''', '') 
    + '_' + STUFF((SELECT '_' + REPLACE(c.name, '''', '')
        FROM sys.columns AS c 
            INNER JOIN sys.foreign_key_columns AS fkc 
            ON fkc.parent_column_id = c.column_id
            AND fkc.parent_object_id = c.[object_id]
        WHERE fkc.constraint_object_id = fk.[object_id]
        ORDER BY fkc.constraint_column_id 
        FOR XML PATH(''), 
        TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'') 
    + '_' + REPLACE(OBJECT_NAME(fk.referenced_object_id), '''', '')
    + '_' + STUFF((SELECT '_' + REPLACE(c.name, '''', '')
        FROM sys.columns AS c 
            INNER JOIN sys.foreign_key_columns AS fkc 
            ON fkc.referenced_column_id = c.column_id
            AND fkc.referenced_object_id = c.[object_id]
        WHERE fkc.constraint_object_id = fk.[object_id]
        ORDER BY fkc.constraint_column_id 
        FOR XML PATH(''), 
        TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'')  
        + ''', ''OBJECT'';'
    FROM sys.foreign_keys AS fk
    WHERE OBJECTPROPERTY(parent_object_id, 'IsMsShipped') = 0;

    PRINT @sql;

    IF @PrintOnly = 0 AND @sql > N''
    BEGIN
        EXEC sp_executesql @sql;
    END
END
GO 
```

对于外键，如果你只是想要`FK_TableName_ReferencedName`那么它就简单多了：

```
CREATE PROCEDURE dbo.Rename_ForeignKeys
    @PrintOnly BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @sql NVARCHAR(MAX);
    SET @sql = N'';

    SELECT @sql = @sql + CHAR(13) + CHAR(10) + 'EXEC sp_rename ''' 
        + REPLACE(name, '''', '''''') + ''', ''FK_' 
        + REPLACE(OBJECT_NAME(parent_object_id), '''', '') 
        + '_' + REPLACE(OBJECT_NAME(referenced_object_id), '''', '')
        + ''', ''OBJECT'';'
    FROM sys.foreign_keys
    WHERE OBJECTPROPERTY(parent_object_id, 'IsMsShipped') = 0;

    PRINT @sql;

    IF @PrintOnly = 0 AND @sql > N''
    BEGIN
        EXEC sp_executesql @sql;
    END
END
GO 
```

对于索引，这将重命名所有索引`IX_TableName_Col1_Col2...`。它将忽略主键（因为它们在上面单独处理），将添加`UQ_`到唯一索引/约束（因此`IX_UQ_TableName_Col1_Col2...`，将相同对待唯一约束和唯一索引，并将忽略包含列。（请注意，忽略包含列可能会产生如果您有仅因包含列不同的冗余索引，则命​​名冲突。）

```
CREATE PROCEDURE dbo.Rename_Indexes
    @PrintOnly BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @sql NVARCHAR(MAX);
    SET @sql = N'';

    SELECT @sql = @sql + CHAR(13) + CHAR(10) 
        + 'EXEC sp_rename ''' + REPLACE(i.name, '''', '''''')
        + ''', ''IX_' + CASE is_unique_constraint WHEN 1 THEN 'UQ_' ELSE '' END
        + REPLACE(OBJECT_NAME(i.[object_id]), '''', '') 
        + '_' + STUFF((SELECT '_' + REPLACE(c.name, '''', '')
            FROM sys.columns AS c 
                INNER JOIN sys.index_columns AS ic
                ON ic.column_id = c.column_id
                AND ic.[object_id] = c.[object_id]
            WHERE ic.[object_id] = i.[object_id] 
            AND ic.index_id = i.index_id
            AND is_included_column = 0
            ORDER BY ic.index_column_id 
            FOR XML PATH(''), 
            TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'')  
        +''', ''OBJECT'';'
    FROM sys.indexes AS i
    WHERE index_id > 0 
    AND is_primary_key = 0 -- dealt with separately
    AND OBJECTPROPERTY(i.[object_id], 'IsMsShipped') = 0;

    PRINT @sql;

    IF @PrintOnly = 0 AND @sql > N''
    BEGIN
        EXEC sp_executesql @sql;
    END
END
GO 
```

对于默认约束：

```
CREATE PROCEDURE dbo.Rename_DefaultConstraints
    @PrintOnly BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @sql NVARCHAR(MAX);
    SET @sql = N'';

    SELECT @sql = @sql + CHAR(13) + CHAR(10) 
        + 'EXEC sp_rename ''' + REPLACE(dc.name, '''', '''''') 
        + ''', ''DF_' + REPLACE(OBJECT_NAME(dc.parent_object_id), '''','') 
        + '_' + REPLACE(c.name, '''', '') + ''', ''OBJECT'';'
    FROM sys.default_constraints AS dc
    INNER JOIN sys.columns AS c
    ON dc.parent_object_id = c.[object_id]
    AND dc.parent_column_id = c.column_id
    AND OBJECTPROPERTY(dc.parent_object_id, 'IsMsShipped') = 0;

    PRINT @sql;

    IF @PrintOnly = 0 AND @sql > N''
    BEGIN
        EXEC sp_executesql @sql;
    END
END
GO 
```

最后检查约束：

```
CREATE PROCEDURE dbo.Rename_CheckConstraints
    @PrintOnly BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @sql NVARCHAR(MAX);
    SET @sql = N'';

    SELECT @sql = @sql + CHAR(13) + CHAR(10) 
        + 'EXEC sp_rename ''' + REPLACE(cc.name, '''', '''''') 
        + ''', ''CK_' + REPLACE(OBJECT_NAME(cc.parent_object_id), '''','') 
        + '_' + REPLACE(c.name, '''', '') + ''', ''OBJECT'';'
    FROM sys.check_constraints AS cc
    INNER JOIN sys.columns AS c
    ON cc.parent_object_id = c.[object_id]
    AND cc.parent_column_id = c.column_id
    AND OBJECTPROPERTY(dc.parent_object_id, 'IsMsShipped') = 0;

    PRINT @sql;

    IF @PrintOnly = 0 AND @sql > N''
    BEGIN
        EXEC sp_executesql @sql;
    END
END
GO 
```

请注意，这`PRINT`不一定会显示整个语句，具体取决于您对文本结果的设置和语句的大小。但它应该足以证明脚本正在做正确的工作。我将它们全部设置`PrintOnly`为默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T14:25:41.147

并且要重命名外键，您可以使用类似这样的东西（这还没有*完全按照*您的要求进行 - 但足够接近可以开始使用它）：

```
DECLARE RenameFKCursor CURSOR FAST_FORWARD
FOR 
    SELECT
       'dbo.sp_rename @objName = ''' + fk.Name + ''', @NewName = ''FK_' + t.Name + '_' + ref.Name + ''', @objtype = ''OBJECT'''
    FROM 
        sys.foreign_keys fk
    INNER JOIN 
        sys.tables t ON fk.parent_object_id = t.object_id
    INNER JOIN 
        sys.tables ref ON fk.referenced_object_id = ref.object_id
    WHERE
        fk.is_system_named = 1

DECLARE @RenameFKStmt NVARCHAR(500)

OPEN RenameFKCursor 

FETCH NEXT FROM RenameFKCursor INTO @RenameFKStmt

WHILE (@@fetch_status <> -1)
BEGIN
    IF (@@fetch_status <> -2)
    BEGIN
        PRINT @RenameFKStmt
        EXEC(@RenameFKStmt)
    END

    FETCH NEXT FROM RenameFKCursor INTO @RenameFKStmt
END

CLOSE RenameFKCursor 
DEALLOCATE RenameFKCursor 
GO 
```

基本上，您遍历数据库中定义的所有外键，并将它们重命名为您决定如何构建的名称，`SELECT`这是该游标的基础。

然后，您在所有结果上运行光标，并执行`dbo.sp_rename`存储过程以将您的 FK 约束重命名为您希望它们成为的任何名称。

使用 Aaron 的方法，即基本上只构建一个巨大的 SQL 语句，您甚至可以在不使用游标的情况下摆脱困境。

这将是将“系统命名”默认约束重命名为您自己的命名约定的非常相似的代码 - 它使用与上述相同的方法，`SELECT`针对系统目录视图，然后使用光标迭代所有条目并构建并执行 SQL 重命名语句：

```
DECLARE DFCursor CURSOR FAST_FORWARD 
FOR
    SELECT 
        dc.Name,
        t.Name,
        c.Name
    FROM 
        sys.default_constraints dc
    INNER JOIN  
        sys.tables t ON dc.parent_object_id = t.object_id
    INNER JOIN 
        sys.columns c ON dc.parent_column_id = c.column_id AND dc.parent_object_id = c.object_id
    WHERE 
        is_system_named = 1

DECLARE @OldConstraintName sysname, @TableName sysname, @ColumnName sysname

OPEN DFCursor 

FETCH NEXT FROM DFCursor  INTO @OldConstraintName, @TableName, @ColumnName 

WHILE @@FETCH_STATUS = 0
BEGIN
    DECLARE @Stmt NVARCHAR(999)

    SET @Stmt = 'dbo.sp_rename @objName = ''' + @OldConstraintName + ''', @NewName = ''DF_' + @TableName + '_' + @ColumnName + ''', @objtype = ''OBJECT'''

    PRINT @Stmt
    EXEC (@Stmt)

    FETCH NEXT FROM DFCursor INTO @OldConstraintName, @TableName, @ColumnName
END

CLOSE DFCursor 
DEALLOCATE DFCursor 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-11T22:21:44.570

如果数据库在不同的模式中有类似的表，则提供的解决方案将会中断。[这是我使用的这个解决方案](http://www.mssqltips.com/sqlservertip/2709/script-to-rename-constraints-and-indexes-to-conform-to-a-sql-server-naming-convention/)的修改。

```
CREATE PROCEDURE dbo._ImplementNamingStandard
@SELECT_Only        BIT = 1,
@PrimaryKeys        BIT = 1,
@ForeignKeys        BIT = 1,
@Indexes            BIT = 1,
@UniqueConstraints  BIT = 1,
@DefaultConstraints BIT = 1,
@CheckConstraints   BIT = 1 

AS
BEGIN
SET NOCOUNT ON;

DECLARE @sql NVARCHAR(MAX), @cr CHAR(2);
SELECT @sql = N'', @cr = CHAR(13) + CHAR(10);

DECLARE @TableLimit TINYINT, @ColumnLimit TINYINT;
SELECT @TableLimit = 24, @ColumnLimit = 24; 
```

主键：

```
IF @PrimaryKeys = 1
BEGIN
    SELECT @sql = @sql + @cr + @cr + N'/* ---- Primary Keys ---- */' + @cr;
    SELECT @sql = @sql + @cr + N'EXEC sp_rename @objname = N'''
        + SCHEMA_NAME(schema_id) + '.'
        + REPLACE(name, '''', '''''') + ''', @newname = N''PK_' 
        + LEFT(REPLACE(OBJECT_NAME(parent_object_id), '''', ''), @TableLimit) + ''';'
    FROM sys.key_constraints
    WHERE type = 'PK'
    AND is_ms_shipped = 0;
END 
```

外键：

```
IF @ForeignKeys = 1
BEGIN
    SELECT @sql = @sql + @cr + @cr + N'/* ---- Foreign Keys ---- */' + @cr;
    SELECT @sql = @sql + @cr + N'EXEC sp_rename @objname = N''' 
        + SCHEMA_NAME(f.schema_id) + '.'
        + REPLACE(f.name, '''', '''''') + ''', @newname = N''FK_' 
        + LEFT(REPLACE(t.name, '''', ''), @TableLimit)
        + '_' + LEFT(REPLACE(t2.name, '''', ''), @TableLimit)           
        + '_' + LEFT(REPLACE(c.name, '''', ''), @ColumnLimit)
        + ''';'
    FROM 
        sys.foreign_keys as f
        inner join  sys.foreign_key_columns as fk on f.object_id = fk.constraint_object_id
        inner join sys.tables as t on fk.parent_object_id = t.object_id         
        inner join sys.tables as t2 on fk.referenced_object_id = t2.object_id
        inner join sys.columns as c on fk.parent_object_id = c.object_id and 
                                        fk.parent_column_id = c.column_id 

    WHERE f.is_ms_shipped = 0;
END 
```

独特的约束：

```
 IF (@UniqueConstraints = 1 OR @Indexes = 1)
        BEGIN
            SELECT @sql = @sql + @cr + @cr + N'/* ---- Indexes / Unique Constraints ---- */' + @cr;
            SELECT @sql = @sql + @cr + N'EXEC sp_rename @objname = N''' 
       + CASE is_unique_constraint WHEN 0 THEN
       QUOTENAME(REPLACE(OBJECT_NAME(i.[object_id]), '''', '''''')) + '.' ELSE '' END
                + QUOTENAME(REPLACE(i.name, '''', '''''')) + ''', @newname = N'''
                + CASE is_unique_constraint WHEN 1 THEN 'UQ_' ELSE 'IX_'
                  + CASE is_unique WHEN 1 THEN 'U_'  ELSE '' END 
                END + CASE has_filter WHEN 1 THEN 'F_'  ELSE '' END
                + LEFT(REPLACE(OBJECT_NAME(i.[object_id]), '''', ''), @TableLimit) 
                + '_' + STUFF((SELECT '_' + LEFT(REPLACE(c.name, '''', ''), @ColumnLimit)
                    FROM sys.columns AS c 
                        INNER JOIN sys.index_columns AS ic
                        ON ic.column_id = c.column_id
                        AND ic.[object_id] = c.[object_id]
                    WHERE ic.[object_id] = i.[object_id] 
                    AND ic.index_id = i.index_id
                    AND is_included_column = 0
                    ORDER BY ic.index_column_id FOR XML PATH(''), 
                    TYPE).value('.', 'nvarchar(max)'), 1, 1, '') +''';'
            FROM sys.indexes AS i
            WHERE index_id > 0 AND is_primary_key = 0 AND type IN (1,2)
            AND OBJECTPROPERTY(i.[object_id], 'IsMsShipped') = 0;
        END 
```

默认约束：

```
IF @DefaultConstraints = 1
BEGIN
    SELECT @sql = @sql + @cr + @cr + N'/* ---- DefaultConstraints ---- */' + @cr;
    SELECT @sql = @sql + @cr + N'EXEC sp_rename @objname = N''' 
        + SCHEMA_NAME(schema_id) + '.'
        + REPLACE(dc.name, '''', '''''') + ''', @newname = N''DF_' 
        + LEFT(REPLACE(OBJECT_NAME(dc.parent_object_id), '''',''), @TableLimit)
        + '_' + LEFT(REPLACE(c.name, '''', ''), @ColumnLimit) + ''';'
    FROM sys.default_constraints AS dc
    INNER JOIN sys.columns AS c
    ON dc.parent_object_id = c.[object_id]
    AND dc.parent_column_id = c.column_id
    AND dc.is_ms_shipped = 0;
END 
```

检查约束：

```
IF @CheckConstraints = 1
BEGIN
    SELECT @sql = @sql + @cr + @cr + N'/* ---- CheckConstraints ---- */' + @cr;
    SELECT @sql = @sql + @cr + N'EXEC sp_rename @objname = N'''
        + SCHEMA_NAME(schema_id) + '.' 
        + REPLACE(cc.name, '''', '''''') + ''', @newname = N''CK_' 
        + LEFT(REPLACE(OBJECT_NAME(cc.parent_object_id), '''',''), @TableLimit)
        + '_' + LEFT(REPLACE(c.name, '''', ''), @ColumnLimit) + ''';'
    FROM sys.check_constraints AS cc
    INNER JOIN sys.columns AS c
    ON cc.parent_object_id = c.[object_id]
    AND cc.parent_column_id = c.column_id
    AND cc.is_ms_shipped = 0;
END

SELECT @sql;

IF @SELECT_Only = 0 AND @sql > N''
BEGIN
    EXEC sp_executesql @sql;
END 
```

# .net - 在 DataGridView 中选择数据很慢

> ID：10665818
> 
> 赞同：1
> 
> 时间：2012-05-19T14:01:26.820
> 
> 标签：.net, datagridview, selection

只要有更多行，使用 shift+鼠标单击在 DataGridView 中选择数据就会非常慢。同样通过 DataGridView1[col, row].Selected = true 以编程方式选择单元格非常慢，每选择 100 个单元格大约需要 1 秒。我正在使用具有 5000-20000 行的数据集，并且我需要能够选择单元格进行复制/粘贴操作。

1.  有什么方法可以加快选择方法吗？

2.  如果没有，当用户使用 shift + 鼠标单击时，如何防止选择发生？因为如果用户尝试进行大量选择，这将冻结程序几分钟。

# jquery - 如何在剑道网格中加载大量数据

> ID：10665820
> 
> 赞同：3
> 
> 时间：2012-05-19T14:02:00.820
> 
> 标签：jquery, asp.net, vb.net, kendo-ui

网络方法：

```
 <WebMethod()>
   Public Shared Function Pcpacking() As IEnumerable(Of Packing)
   Dim db As New STOREEntities
   Return db.PC_PACKING_HISTORIES. _
   Where(Function(q) q.PACK_DATE > "1388/11/07"). _
   Select(Function(q) New Packing _
              With {.Packdate = q.PACK_DATE,
                    .Packserialnumber = q.PACK_SERIAL_NUMBER,
                    .Netweight = q.NET_WEIGHT,
                    .Packusername = q.PACK_USER_NAME}).ToList()
   End Function 
```

脚本：

```
$(function () {
       $("#grid").kendoGrid({
           height: 200,
           columns: [
                { field: "Packserialnumber", width: "150px" },
               { field: "Netweight", width: "50px" },
               { field: "Packusername", width: "150px" },
               { field: "Packdate", width: "100px" }
           ],
           editable: false,
           dataSource: {
               schema: {
                   data: "d",
                   model: {
                       id: "Packserialnumber",
                       fields: {
                           Packserialnumber: { editable: false, nullable: true },
                           Netweight: { type: "number", validation: { required: true, min: 1} },
                           Packusername: { validation: { required: true} },
                           Packdate: { validation: { required: true} }
                       }
                   }
               },
               batch: false,
               transport: {
                   read: {
                       url: "Default.aspx/Pcpacking",
                       contentType: "application/json; charset=utf-8",
                       type: "POST"
                   }
               }
           }
       });
   }); 
```

在这种情况下（PACK_DATE > "1388/11/07" **366 记录**）一切正常。但是当我将日期更改为 1388/11/06 **1260 记录**或 1388/11/05 **5460 记录**或...发生以下错误：

> {"Message":"使用 JSON JavaScriptSerializer 进行序列化或反序列化时出错。字符串的长度超过了 maxJsonLength 属性设置的值。","StackTrace":" 在 System.Web.Script.Serialization.JavaScriptSerializer.Serialize(对象 obj、StringBuilder 输出、SerializationFormat serializationFormat)\r\n 在 System.Web.Script.Serialization.JavaScriptSerializer.Serialize(Object obj, SerializationFormat serializationFormat)\r\n 在 System.Web.Script.Services.RestHandler.InvokeMethod(HttpContext上下文、WebServiceMethodData 方法数据、IDictionary`2 rawParams)\r\n
> 在 System.Web.Script.Services.RestHandler.ExecuteWebServiceCall（HttpContext 上下文，WebServiceMethodData 方法数据）”，“ExceptionType”：“System.InvalidOperationException”}

我认为剑道网格不支持大量数据。有什么建议吗？
对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:12:09.967

问题实际上是默认情况下，如果生成的 JSON 字符串大于 100 kB，.NET JSON 序列化程序会引发异常。显然，发送数千条记录大于限制。您可以[更改此设置](https://stackoverflow.com/q/1151987/201952)，但我不建议您将其用于您的应用程序。

相反，将网格配置为一次请求小块数据。看起来您可以[配置 Kendo Grid 以在滚动时加载更多数据](http://demos.kendoui.com/web/grid/virtualization-remote-data.html)。

```
$("#grid").kendoGrid({
    dataSource: {
        type: "odata",
        serverPaging: true,
        serverSorting: true,
        pageSize: 100,
        transport: {
            read: {
                url: "Default.aspx/Pcpacking",
                contentType: "application/json; charset=utf-8",
                type: "POST"
            }
        }
    },
    scrollable: {
        virtual: true
    },

    ...
}); 
```

您的服务器端脚本必须处理 Kendo 发送的（`top`发送多少条记录）和`skip`（从哪里开始）参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T07:13:40.930

```
$(function () {
       $("#grid").kendoGrid({
           height: 200,
           columns: [
                { field: "Packserialnumber", width: "150px" },
               { field: "Netweight", width: "50px" },
               { field: "Packusername", width: "150px" },
               { field: "Packdate", width: "100px" }
           ],
           editable: false,
           dataSource: {
               schema: {
                   data: "d",
                   model: {
                       id: "Packserialnumber",
                       fields: {
                           Packserialnumber: { editable: false, nullable: true },
                           Netweight: { type: "number", validation: { required: true, min: 1} },
                           Packusername: { validation: { required: true} },
                           Packdate: { validation: { required: true} }
                       }
                   }
               },
               batch: false,
               transport: {
                   read: {
                       url: "Default.aspx/Pcpacking",
                       contentType: "application/json; charset=utf-8",
                       dataType: "json"
                   }
               }
           }
       });
   }); 
```

# javascript - 如何在第二次单击时锁定功能

> ID：10665822
> 
> 赞同：1
> 
> 时间：2012-05-19T14:02:31.037
> 
> 标签：javascript, jquery, event-handling

我有一个在悬停时扩展的侧边栏。

因为展开，折叠有时会打扰我想在有人点击侧边栏时解开悬停。

底部的代码第一次用于解除绑定，但再次单击以重新启用悬停不起作用：

```
 $('.action').click(function(){
        $(this).unbind('mouseenter').unbind('mouseleave');
        $(this).click(function(){
            $(this).bind('mouseenter').bind('mouseleave');
        });
    }); 
```

那么如何在锁定时再次绑定悬停（如果构造，请不要）。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:12:26.423

```
$('.action').on('mouseenter mouseleave', doStuffOnHover); //initial handler

var bound = true;

$('.action').on('click', function(){
      $(this)[bound ? 'off' : 'on']('mouseenter mouseleave', doStuffOnHover);
      bound=bound ? false:true;
});

function doStuffOnHover() {
   //do stuff here
} 
```

[小提琴](http://jsfiddle.net/HwNTB/)

如果在 mouseenter/leave 上做不同的事情，你当然需要两个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:06:18.580

您需要绑定实际事件`.bind('mouseenter', function () { /* whatever */ });`。jQuery 不会自动知道您要重新绑定已经存在的内容。如果你愿意，你可以使用一个命名函数，这样你就不必重写它。

# php - 在结果页面上启用用户“排序依据”

> ID：10665825
> 
> 赞同：1
> 
> 时间：2012-05-19T14:02:45.867
> 
> 标签：php, mysql, sorting

我有一个数据库，在管理员方面，管理员为梦幻足球网站输入足球运动员及其统计数据。

在前端，用户会看到一个选项卡式界面（每个位置的选项卡以及该选项卡下的相关球员和统计数据）。

目前我在显示结果时设置了默认的 ORDER BY，如下所示：

```
$result = mysql_query("SELECT Player, Team, Pass_Yds, Pass_TDs, Int_Thrown, Rush_Yds, Rush_TDs, Overall_Pts, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'QB' ORDER BY Pass_Yds DESC;"); 
```

我想添加一个排序方式下拉列表，以便查看者可以更改数据的排序方式（例如，如果他们想按照最多传球达阵 (Pass_TDs) 的顺序对四分卫结果进行排序。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:11:09.823

我建议允许用户简单地在客户端重新排序，而不是允许用户发布表单来更改服务器上的排序。毕竟，用户已经将所有数据交付给他们。对于相同的数据，无需一次又一次地回发到服务器，只是为了对其进行排序。

例如，看一下[jqGrid](http://www.trirand.com/blog/)。您可以将数据加载到其中并让它为您处理排序（以及分页、过滤和搜索等，如果您愿意）。 [Tablesorter](http://tablesorter.com/docs/)是另一种。还有很多其他的。（谷歌搜索“jQuery sortable table”之类的东西会产生很多结果。）

这将提供更好的用户体验，同时减少应用程序的负载，因为您只需将相同的数据交付给用户一次而不是多次。通常它也是一种更简单的方法，因为它有助于将显示的操作与数据的获取分开。所以你的服务器端代码可以保持干净和简单，而不必关心客户端的事情。

# java - 多对多与休眠中的自定义实体 - 级联无法正常工作

> ID：10665827
> 
> 赞同：1
> 
> 时间：2012-05-19T14:04:04.617
> 
> 标签：java, hibernate, many-to-many

在我的项目中，我需要 2 个具有双向多对多关系的实体。但是，连接表必须与其他表有自己的额外关系，所以我自己为连接表创建了一个新实体。

它应该如下所示：

项目 -- InspectorAssignment -- 用户

将检查员分配添加到项目并将其持久化时，该分配也应该被持久化，并且用户也应该添加该分配。

为此，我在服务中有一个方法：

```
projectService.assignInspectorToProject(inspector, project); 
```

但是，当我两次运行此方法时，我的表中会创建**两条**记录。这不应该发生，因为所有的集合都是集合。

有人可以指出我做错了什么吗？

所有相关的方法/类：

**项目服务**

```
public void assignInspectorToProject(User user, Project project) {

    if (!user.hasRole("inspector")) {
        throw new RuntimeException("This user is no inspector");
    }

    project.addInspector(user);
    projectDao.save(project);
} 
```

**项目**

```
@Entity
public class Project extends AbstractPersistentObject {

    @OneToMany(cascade = {CascadeType.ALL}, mappedBy = "project")
    private Set<InspectorAssignment> inspectorAssignments;  

    public void addInspector(User user) {

        InspectorAssignment assignment = new InspectorAssignment(user, this);
        user.addInspectorAssignment(assignment);

        inspectorAssignments.add(assignment);
    }
} 
```

**检查员分配**

```
@Entity
public class InspectorAssignment extends AbstractPersistentObject {

    @ManyToOne
    @NotNull
    private User user;

    @ManyToOne
    @NotNull
    private Project project;

    public InspectorAssignment() {
    }

    public InspectorAssignment(User user, Project project) {
        setUser(user);
        setProject(project);
    }
} 
```

**用户**

```
@Entity
public class User extends AbstractPersistentObject implements UserDetails {

     @OneToMany(mappedBy = "user", cascade = {CascadeType.ALL})
     private Set<InspectorAssignment> inspectorAssignments;

     public void addInspectorAssignment(InspectorAssignment assignment) {
         inspectorAssignments.add(assignment);
     }
}
} 
```

**AbstractPersistenObject 中的 equals 和 hashcode 方法**（我的所有实体都扩展的类）

```
 @Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    AbstractPersistentObject other = (AbstractPersistentObject) obj;
    if (id == null) {
        if (other.id != null)
            return false;
    } else if (id.equals(other.id))
        return true;
    return false;
}

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((id == null) ? 0 : id.hashCode());
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:05:37.913

这对我来说似乎很合乎逻辑。您调用此方法两次。因此，您创建了两个不同的 InspectorAssignment 实例并同时保存它们。即使您通过保存项目来保存它们，该项目也有一组分配，其中包含两个不同的 InspectorAssignment 实例。Set 不会添加第二个它等于第一个，但它不是，因为你没有覆盖`hashCode()`and `equals()`。

我会

*   在分配表中创建唯一约束`userId-projectId`以确保不会发生这种情况并引发异常
*   仅在尚不存在时才创建新的 InspectorAssignment
*   通过显式保存在数据库中创建 InspectorAssignment，而不是依靠从 Project 到 InspectorAssignment 的级联
*   覆盖`equals()`并`hashCode()`在 InspectorAssignment

# python - 给出内部服务器错误的基本python脚本

> ID：10665830
> 
> 赞同：4
> 
> 时间：2012-05-19T14:04:14.180
> 
> 标签：python

我正在使用 hostgator，他们发誓支持 python，但我还没有看到一个有效的 python 脚本。我尝试了几个脚本，我最新的一个是他们在他们的网站上提供的：

```
#!/usr/bin/python
print "Content-type: text/html\n\n";
print "<html><head>";
print "<title>CGI Test</title>";
print "</head><body>";
print "<p>Test page using Python</p>";
print "</body></html>"; 
```

我收到内部服务器错误： [http ://elkuzu.com/cgi-bin/test.py](http://elkuzu.com/cgi-bin/test.py)

该文件有 755 权限，文件夹 cgi-bin 也是如此。他们拒绝帮助我解决他们所谓的“编码”问题......但是我尝试过的所有事情都只收到内部服务器错误，我认为问题出在他们身上。有谁知道可能出了什么问题？

错误日志：

```
[Sat May 19 09:11:38 2012] [error] [client 74.129.48.242] File does not exist: /home/elkuzu/public_html/404.shtml
[Sat May 19 09:11:38 2012] [error] [client 74.129.48.242] File does not exist: /home/elkuzu/public_html/favicon.ico
[Sat May 19 09:11:37 2012] [error] [client 74.129.48.242] File does not exist: /home/elkuzu/public_html/500.shtml 
```

我已经和我的主人（hostgator）谈过了，他们把它变成了一张票，这让我觉得他们有什么事情发生了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T14:10:32.213

有关于如何将 Python 用作 CGI的[文档。](http://docs.python.org/howto/webservers.html)

在您的情况下，问题是行尾。它们是每行末尾的隐藏字符。

> 在类 Unix 系统上，程序文件中的行尾必须是 Unix 风格的行尾。这很重要，因为 Web 服务器检查脚本的第一行（称为 shebang）并尝试运行那里指定的程序。它很容易被 Windows 换行符（回车和换行，也称为 CRLF）混淆，因此您必须将文件转换为 Unix 换行符（仅换行，LF）。这可以通过 FTP 以文本模式而不是二进制模式上传文件来自动完成，但首选方法是告诉您的编辑器以 Unix 行结尾保存文件。大多数编辑都支持这一点。

在 Windows（即记事本）上，它们表示为（CR LF，或`\r\n`），而在 unix 上，它们是（LF 或`\n`）。

在[Notepad++](http://notepad-plus-plus.org/)中，您可以将行尾视为符号，如下所示： View -> Show Symbol -> Show End of Line

要将 windows 换行符替换为 unix 换行符，您可以使用：搜索 -> 替换...

在替换对话框中，找到`\r\n`并将它们替换为`\n`。确保选择了扩展搜索模式。

![Notepad++替换对话截图](../Images/ea0327bd6e73037c898ec64534c5bf6f.png)

* * *

或者，您可以使用编辑 -> EOL 转换 -> UNIX 格式

![Notepad++ EOL 转换截图](../Images/a1dc67ad2f21ac695385285ab2cf2481.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T00:52:39.537

我知道这是一个老问题，但我在使用 hostgator 时也遇到了 500 错误（表明我在一年前放弃了尝试）。几天前决定按照他们的“[教程](http://support.hostgator.com/articles/specialized-help/technical/perl-and-python-scripts)”再试一次，但它又没用。

我尝试一些更简单的东西：

```
#!/usr/bin/python
import sys
print sys.version_info 
```

我再次收到 500 错误，但是在与支持人员聊天后，他们给出了一条日志消息：

> [错误] [client 192.xxx] 来自脚本的错误标头。错误的标头=(2, 6, 6, 'final', 0): test1.py

有了这些信息（日志消息包含 python，所以它以某种方式执行）我在[Unix 站点](https://unix.stackexchange.com/questions/123866/500internal-server-error-from-cgi-program)找到了这篇文章，我得到了这个：

> 正如 HTTP 规范（以及来自 HTTP 服务器的错误消息）所指定的，您需要在 HTTP 标头和正文之间留一个空行，否则服务器不知道标头在哪里结束而正文从哪里开始。

我将脚本更改为：

```
#!/usr/bin/python
print ""
import sys
print sys.version_info 
```

它奏效了！奇怪的是，在成功运行此脚本后，教程中的示例（下面的代码）现在也适用于我

```
#!/usr/bin/python
print "Content-type: text/html\n\n";
print "<html><head>";
print "<title>CGI Test</title>";
print "</head><body>";
print "<p>Test page using Python</p>";
print "</body></html>"; 
```

为什么它现在有效？我不知道，但至少我希望这个答案能帮助处理 hostgator [缺乏] 支持的人。

# string - Qml 文本换行

> ID：10665838
> 
> 赞同：7
> 
> 时间：2012-05-19T14:05:45.867
> 
> 标签：string, qt, text, newline, qml

如果我输入：“主题：”+“/n”+vak+“/n”+klas 作为文本元素的文本属性，它将以直线返回所有内容，其中包含“/n”。

我怎样才能让它创建新行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T14:11:14.090

我不知道 qt 或 qml，但在大多数语言中，[转义字符](http://en.wikipedia.org/wiki/Escape_character)是反斜杠，而不是常规斜杠，因此转义序列将`\n`用于换行符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T09:38:54.037

输入文本为“Hello \n World”它可以工作

# hibernate - Hibernate + SQL Azure = 找不到数据类型 boolean

> ID：10665843
> 
> 赞同：2
> 
> 时间：2012-05-19T14:06:21.637
> 
> 标签：hibernate, azure, azure-sql-database

我正在使用 hbm2ddl.auto=create 在带有休眠的 SQL Azure 数据库中生成架构。当使用带有“无法找到布尔数据类型”的布尔类型或布尔类型时，此操作会失败。例外。

这可能与使用的方言“org.hibernate.dialect.SQLServerDialect”和此[错误报告有关](https://hibernate.onjira.com/browse/HHH-6420?page=com.atlassian.jira.plugins.jira-github-connector-plugin%3agithub-commits-tabpanel)。我正在使用 Hibernate-core 4.1.3，因此应该解决这个错误。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T01:20:32.143

`org.hibernate.dialect.SQLServer2008Dialect`如果您的数据库版本是 SQLServer 2008 ，请将您的方言更改为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:54:50.343

根据我的经验，SQL Server 没有布尔数据类型，请尝试使用位数据类型。

# mysql-workbench - MySQL Workbench：服务器管理配置 - 如何

> ID：10665848
> 
> 赞同：10
> 
> 时间：2012-05-19T14:06:38.757
> 
> 标签：mysql-workbench

尝试创建新服务器实例配置文件时出现错误[（单击此查看图像）](http://bit.ly/JpgrKS)：

操作失败：/usr/local/mysql/support-files/mysql.server 启动无效

我不确定工作台的设置面板在哪里修复启动和停止命令，以及“/usr/local/mysql/support-files/mysql.server”的位置。我正在使用 Zend Server CE，但我没有名为“/usr/local/mysql”的目录，而是 mysql.server 位于“/usr/local/zend/mysql/bin”中，但我如何告诉 Workbench 去寻找它在适当的地方。

启动和停止命令是：

须藤/usr/local/zend/mysql/bin/mysql.server

同样，我该如何为工作台解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:49:31.843

似乎 MySQL Workbench 正在使用命令来启动/停止不适用于您的设置的服务器。您应该手动更正它。

在主 WB 屏幕中，转到**Manage Server Instances**（靠近右下角）并在左侧的列表控件中选择您正在使用的服务器实例。然后转到**系统配置文件**选项卡并相应地更改您的命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-06-10T08:54:12.973

在 MacOS Big Sur 上是这样的：转到服务器 -> 管理访问设置 -> 系统配置文件选项卡，然后将 MySQL 管理框放入命令下方：

```
/usr/local/mysql/support-files/mysql.server start
/usr/local/mysql/support-files/mysql.server stop 
```

请记住检查选项：提升权限以执行启动/停止命令并写入配置数据。

我的安装来自 .dmg 文件。有趣的是，每次我试图停止或启动服务器时，之前都必须选中该框以提升权限，它本身就是取消选中的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-29T08:31:50.710

您可以在 Mac 系统设置页面中找到 MySQL 设置。去那里，你可以启动或停止mysql服务器。它适用于 OSX 10.11。

# haskell - Haskell 的有限域线性代数库

> ID：10665850
> 
> 赞同：10
> 
> 时间：2012-05-19T14:07:02.593
> 
> 标签：haskell, types, linear-algebra, algebra, finite-field

我正在为 Haskell 寻找有限域线性代数库。

像Haskell[的 FFLAS-FFPACK](http://www-ljk.imag.fr/membres/Jean-Guillaume.Dumas/FFLAS/index.html)这样的东西会很棒:-)。

当然，我检查了[hmatrix](http://hackage.haskell.org/package/hmatrix-0.14.0.1)，似乎对[任意矩阵元素类型](http://hackage.haskell.org/packages/archive/hmatrix/0.14.0.1/doc/html/Data-Packed-Matrix.html)有一些支持，但我找不到任何与 hmatrix 一起使用的有限域库。当然我会很感激一个高性能的解决方案:-)

特别是我希望能够将[p] ^(n×1)和[p] ^(1×m)矩阵（向量）乘以[p n] ^(×m)矩阵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T15:41:40.633

您最好的选择是绑定到 FFLAS/FFPACK，它表示本地 Haskell 类型中的数据。但是，我还看不到我们有这样的绑定。

将是一个很好的起点的相关库：

*   [http://hackage.haskell.org/package/vect](http://hackage.haskell.org/package/vect)
*   [http://hackage.haskell.org/package/hmatrix](http://hackage.haskell.org/package/hmatrix)
*   [http://hackage.haskell.org/package/jalla](http://hackage.haskell.org/package/jalla)
*   [http://hackage.haskell.org/package/blas](http://hackage.haskell.org/package/blas)

对于数组结构入门，向量教程还不错：

*   [http://www.haskell.org/haskellwiki/Numeric_Haskell:_A_Vector_Tutorial](http://www.haskell.org/haskellwiki/Numeric_Haskell:_A_Vector_Tutorial)

因此，总而言之，我认为您可能需要快速启动与 fflas 的绑定，然后通过 hmatrix 或向量公开它们。

# zend-framework - zend_mail 电子邮件在第 4 次尝试中被标记为垃圾邮件

> ID：10665855
> 
> 赞同：0
> 
> 时间：2012-05-19T14:07:47.530
> 
> 标签：zend-framework, smtp, gmail, html-email, zend-mail

我使用 zend_mail 作为 html 向服务器发送电子邮件确认，对于第一次和第二次测试，邮件被转发到收件箱，但突然所有邮件都标记为垃圾邮件。这是php代码：

```
$mails = '<div style = "background-color:#6BC6D3;">

<div style = "background-color: #FFFFFF;
margin: 33px auto auto;
width: 400px;
padding : 20px; 
direction: rtl;
font: 15px tahoma">
www
<br />
<br />
اtestetstststtestxs
<br />
testetstststtestxsx
<br />
<br />
<a href="http://forid.ir/user/confirm/123109231109203912">http://forid.ir/user/confirm/123109231109203912</a>

</div>
</div>

 ';
$config = array('auth' => 'login',
                'username' => 'info@forid.ir',
                'password' => '*******',);

$transport = new Zend_Mail_Transport_Smtp('mail.forid.ir', $config);

$mail = new Zend_Mail();
$mail->setBodyText('This is the text of the mail.');
$mail->setFrom('info@forid.ir', 'Some Sender');
$mail->addTo('sjhh.206@gmail.com', 'Some Recipient');
$mail->setSubject('TestSubject');
$mail->setBodyHtml($mails,"utf8");
$mail->setBodyText($mails);
$mail->send($transport); 
```

这是我的电子邮件详细信息

> 投递至：sjhh.206@gmail.com 接收：由 10.100.120.8 发送，SMTP id 为 s8csp160566anc；2012 年 5 月 19 日星期六 06:21:50 -0700 (PDT) 接收时间：10.216.144.216，SMTP id 为 n66mr9808634wej.107.1337433710571；2012 年 5 月 19 日星期六 06:21:50 -0700 (PDT) 返回路径：接收：来自 server6g.axspace.com ([176.9.63.137]) 由 mx.google.com 与 ESMTPS id s62si1351562weh.54.2012.05.19.06.21 .50（版本=TLSv1/SSLv3 密码=OTHER）；2012 年 5 月 19 日星期六 06:21:50 -0700 (PDT) 收到-SPF：通过（google.com：info@forid.ir 的域将 176.9.63.137 指定为允许的发件人）client-ip=176.9.63.137；身份验证结果：mx.google.com；spf=pass（google.com：info@forid.ir 的域将 176.9.63.137 指定为允许的发件人） smtp.mail=info@forid.ir 邮件 ID：<4fb79e6e.547ad80a.7d62.ffff8455SMTPIN_ADDED@mx。google.com> 收到：来自 server6g.axspace.com ([176.9.63.137] helo=localhost) 的 server6g.axspace.com 和 esmtpa (Exim 4.76) (envelope-from) id 1SVjbp-0001po-S0 for sjhh.206@ gmail.com；2012 年 5 月 19 日星期六 15:22:13 +0200 发件人：某个发件人 收件人：某个收件人 主题：TestSubject 日期：2012 年 5 月 19 日星期六 15:22:13 +0200 内容类型：多部分/替代；边界="=_39a92918883006684b860d22bac01025" MIME 版本：1.0
> 
> --=_39a92918883006684b860d22bac01025 内容类型：文本/纯文本；charset=iso-8859-1 内容传输编码：quoted-printable

我不知道为什么它被标记为垃圾邮件，我也不知道如何解决它，我曾经认为使用 smtp 邮件可以解决垃圾邮件问题，但事实并非如此。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T15:57:37.920

标记为垃圾邮件的邮件几乎可以肯定与邮件是使用`Zend_Mail`. 其他因素，如 HTML 标记、内容本身、SMTP 服务器和接收方 (Gmail) 的垃圾邮件检测规则肯定是原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T17:58:25.807

就像@David 所说，您的垃圾邮件评级与使用`Zend_Mail`. 除非您愿意投入大量时间和精力来配置您的邮件服务器以实现最佳交付，否则我强烈建议您外包您的事务性电子邮件发送。[Sendgrid](http://go.sendgrid.com/transactional-email.html?ls=SEM&cid=70180000000cl5Z&lsd=adwords&kw=transactionalemailExact&gaid=SendGrid-US-Main&gclid=CP_w2a72jLACFQc5nAod1xAIrA)、[Sailthru](https://www.sailthru.com/)和[MailChimp](http://mailchimp.com/?pid=GAW&source=website&gclid=CM2Y9cD2jLACFYqb7QodsF32qw)等 ESP将比您做得更好。

# c++ - C++ 图像库 - 找到一种颜色的像素并将它们设为白色，其他一切为黑色

> ID：10665858
> 
> 赞同：1
> 
> 时间：2012-05-19T14:08:05.740
> 
> 标签：c++, image-processing

我正在寻找一个 C++ 图像处理库，通过它我可以找到某种颜色的所有像素，具有用户指定的容差，并将它们着色为白色，并将图片中的其他所有内容着色为黑色。你知道吗？

如果它是一个 C++ 库，而不是我对它过敏的普通 C 库之一，那将是一个奖励。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T14:11:07.333

你应该检查 OpenCV。它同时具有 C 和 C++（基于 OO 原则）API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:09:33.367

[OpenCV](http://opencv.willowgarage.com/wiki/)可以完成这项任务等等！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T14:14:41.570

或者可能是一个 CImg - 一个很棒的仅包含标题的图像处理库。

[http://cimg.sf.net](http://cimg.sf.net)

# javascript - 如何在 html5 画布中制作可点击点？

> ID：10665862
> 
> 赞同：10
> 
> 时间：2012-05-19T14:08:39.230
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

我正在玩一个在画布上画线的[简单教程。](http://www.worldwidewhat.net/2011/06/draw-a-line-graph-using-html5-canvas/)`HTML5`由于它基于 jQuery，因此很容易为绘图添加许多效果。

如何使点可单击/悬停以在单击/悬停时添加 jquery 效果（mouseenter/mouseleave）？这些点由

```
c.fillStyle = '#333';

for(var i = 0; i < data.values.length; i ++) {
    c.beginPath();
    c.arc(getXPixel(i), getYPixel(data.values[i].Y), 4, 0, Math.PI * 2, true);
    c.fill();
} 
```

如何添加 jquery 选择器？基本上，我想**在 click 或 hover 时显示点坐标**。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-19T14:19:41.483

问题是 jQuery 使用 DOM 而不是画布上的绘图。您需要做的是将这些点存储在某处并将鼠标悬停在画布元素上，检查鼠标相对于画布的坐标（即，如果您将鼠标放在画布的左上角，坐标是 [ 0,0] ）在点/形状的区域内。如果是这样，则鼠标悬停在该点上，您可以显示效果。

伪代码更好地理解：

```
// adding shapes to the canvas
var shapes = [];  // make that rects for simplicity.
For (condition):
    shapes.push ( new Rect(x,y,width,height) );
    canvas.rect( x, y, width, height );

// testing hover.
$("#canvas").mousemove(function(e) {
    var offsetX = e.pageX - $(this).position().left;
    var offsetY = e.pageY - $(this).position().top;

    Foreach shape in shapes:
        if( shape.contains(offsetX, offsetY) )    // a fictious method, implement it yourself...lookup for collision detection; not exactly that but something like that...
            Mouse hovers! do something great.
}); 
```

好的，也许要找出一个点是否包含在矩形内，您可以使用以下内容：

```
function contains(rect, x, y) {
    return (x >= rect.x &&
            x <= rect.x + rect.width &&
            y >= rect.y && 
            y <= rect.y + rect.height )
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-19T16:05:50.840

您可以使用像[EaselJS](http://createjs.com/#!/EaselJS)这样的框架，它将处理添加到画布的对象上的鼠标事件的所有艰苦工作抽象出来。

# regex - 如何在perl中使用正则表达式对同一个字符串进行多次搜索？

> ID：10665864
> 
> 赞同：1
> 
> 时间：2012-05-19T14:08:49.733
> 
> 标签：regex, json, perl, search

我需要从网站上获取不同类型的信息。知道格式是这样的（都在一行上）：

```
"name":"BLAHBLAH","contact":{"phone":"12345","twitter":"BLAHBLAH"},
  "location": "address":"NOTTELLING","lat":10,"lng":10,"postalCode":"1234",
  "city":"BLAH","state":"BLAH","country":"BLAH"},
  "categories":[{"id":"BLAH","name":"BLAH"}] 
```

其中一些配置文件会缺少一两个块，例如没有名称，没有城市等。我尝试了这样的代码：

```
 #get name
   $content =~ m!","name":"(.*?)","contact":!igs;
   say ("name:", $1) unless ($1 eq '');
   #get street 
   if ($content =~ m!\},"location":\{"address":"(.*?)","lat":!igs)
   {say ("street:", $1) unless ($1 eq '');}
   #get city 
   if ($content =~ m!,"city":"(.*?)","state":!igs)
   {say ("city:", $1) unless ($1 eq '');}
   #get state
   if ($content =~ m!,"state":"(.*?)","country":!igs)
   {say ("state:", $1) unless ($1 eq '');} 
```

然后我意识到当我使用重复模式时（例如

```
"city":"(.*?)","state":!igs 
```

和

```
"state":"(.*?)","country":!igs) 
```

结果将不准确。（我猜 perl 在第一次到达“state”后会跳过字符串）我的问题是这是怎么发生的？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T14:37:17.647

对我来说，这看起来很像**JSON** —— 确实是这样。找出来，您可以使用以下方法将整个字符串转换为带有字段`name`、`contact`、`location`等的散列：

```
#!/usr/bin/perl
use strict;
use warnings FATAL => qw(all);

use JSON::XS;
use YAML::XS;

my $json = <<HERE;
{
  "name":"BLAHBLAH","contact":{"phone":"12345","twitter":"BLAHBLAH"},
  "location": {"address":"NOTTELLING","lat":10,"lng":10,"postalCode":"1234",
  "city":"BLAH","state":"BLAH","country":"BLAH"},
  "categories":[{"id":"BLAH","name":"BLAH"}]
}
HERE

print $json;

my $hash_ref = decode_json($json);

print Dump $hash_ref->{location}; 
```

我不得不添加一个`{`between `"location":`and `"address":`，猜测这是你的错字。无论如何，那么输出是：

```
{
  "name":"BLAHBLAH","contact":{"phone":"12345","twitter":"BLAHBLAH"},
  "location": {"address":"NOTTELLING","lat":10,"lng":10,"postalCode":"1234",
  "city":"BLAH","state":"BLAH","country":"BLAH"},
  "categories":[{"id":"BLAH","name":"BLAH"}]
}
---
address: NOTTELLING
city: BLAH
country: BLAH
lat: 10
lng: 10
postalCode: '1234'
state: BLAH 
```

我`YAML::XS`为了简洁起见；你不需要那个。如果您还没有看到重点，请考虑：

```
print $hash_ref->{location}->{state}; 
```

给你`BLAH`。

JSON 是“javascript 对象表示法”，它是面向 OO 语言（例如 perl）的常用数据交换格式，尤其是在线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:33:58.907

对于这种特殊情况，JSON 解析器绝对是解决它的正确方法 - 您只描述了尝试使用正则表达式解析 JSON 的众多陷阱之一。

但是，要回答有关正则表达式的实际问题：

当您在标量上下文中使用带有`/g`修饰符的正则表达式时（您的使用是在标量上下文中，因为结果被分配给标量），它只处理第一个匹配项，然后停止并等待您是否会调用相同的正则表达式再次在同一字符串上以获取下一个匹配项。因此，正则表达式 with`/g`通常在标量上下文中使用 a`while`而不是 a `if`：

```
$ perl -E 'while ("This is an example string." =~ /\b(\w{2,6})\b/g) { say $1 }'
This
is
an
string 
```

使用带有`/g`修饰符的正则表达式的另一种方法是将其放在数组上下文中（通过将结果分配给数组）。在这种情况下，它将立即返回所有匹配项的列表：

```
$ perl -E '@matches = "This is an example string." =~ /\b(\w{2,6})\b/g; say join ",", @matches;'
This,is,an,string 
```

如果您没有做这两件事之一（在标量上下文中循环结果或在数组上下文中使用完整的匹配列表），您可能不想使用`/g`正则表达式修饰符。

# c# - 从 Active Directory PrincipalContext 获取所有用户

> ID：10665868
> 
> 赞同：10
> 
> 时间：2012-05-19T14:09:06.370
> 
> 标签：c#, active-directory

我正在使用以下代码访问我的 AD 中的用户列表，但是在我将用户添加到我的组合框的那一行中，我得到了一个空引用异常。

```
PrincipalContext AD = new PrincipalContext(ContextType.Domain, "mydomainip");
UserPrincipal u = new UserPrincipal(AD);
PrincipalSearcher search = new PrincipalSearcher(u);

foreach (UserPrincipal result in search.FindAll())
{
    if (result.DisplayName != null)
    {
        comboBox2.Items.Add(result.DisplayName);
    }
} 
```

知道我做错了什么吗？

我用 a 替换了组合框，`Console.WriteLine(result.DisplayName)`它工作正常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T14:21:53.157

不是 100% 确定这是否是问题所在 - 但`PrincipalSearcher`确实返回了一个`Principal`对象列表。

因此，如果 - 无论出于何种原因 - 您的搜索者将返回*不是*a 的内容`UserPrincipal`，那么您的对象`result`将为 null - 而不是它的`.DisplayName`属性。

因此，您应该将检查更改为：

```
foreach (UserPrincipal result in search.FindAll())
{
    if (result != null && result.DisplayName != null)
    {
        comboBox2.Items.Add(result.DisplayName);
    }
} 
```

# mysql - 统计已经统计并分组的表的结果行

> ID：10665869
> 
> 赞同：2
> 
> 时间：2012-05-19T14:09:08.387
> 
> 标签：mysql, sql

我想统计counted和group by table结果的结果

就像我有一张桌子，`a`：

```
id |name
1  |abc
2  |abc
3  |abc
4  |xyz
5  |xyz 
```

我的查询是`SELECT COUNT(id) as count_id from a GROUP BY name`

...给出结果：

```
count_id
3
2 
```

我想计算这个结果的总行数，即 2

所以我的查询是`SELECT COUNT(SELECT COUNT(id) as count_id from a GROUP BY name) as maincount from a`

...但它给了我这个错误`phpmyadmin`

`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT count.....`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T14:15:02.087

只需这样做：

```
SELECT COUNT(DISTINCT name) FROM a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T14:14:53.877

尽管可能更优雅，但子选择会起作用。

```
 Select count(*) from (SELECT COUNT(id) as count_id from a GROUP BY name) as b 
```

# sql - 在 Oracle 中使用 XQuery

> ID：10665870
> 
> 赞同：2
> 
> 时间：2012-05-19T14:09:25.477
> 
> 标签：sql, oracle, xquery

我正在尝试使用 XQuery 从 Oracle 数据库中检索信息。桌子`customer`看起来像

```
---id---last_name---
   1    Smith
   2    Jackson
   3    Peters 
```

我想要所有的姓氏。
这是我的代码：

```
select last_name, XMLQuery(
'for $i in /customer
return $i/last_name'
PASSING BY VALUE customer
RETURNING CONTENT) last_name
FROM customer; 
```

它说，`%s: invalid identifier`这一行有一个：`PASSING BY VALUE customer`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T14:30:53.383

如果我理解正确，您想使用 XQuery 来查询纯关系数据。

在这种情况下，您可以使用[ora:view](http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb_xquery.htm#autoId19)和诸如：

```
SELECT XMLQuery('
    for $customer in ora:view("customer")/ROW
       return $customer/LAST_NAME
' RETURNING CONTENT) FROM DUAL; 
```

应该做的伎俩。

# javascript - Ajax XML 响应为 NULL

> ID：10665872
> 
> 赞同：0
> 
> 时间：2012-05-19T14:10:23.423
> 
> 标签：javascript, xml, ajax, null, xmlhttprequest

我想要做的是从 ajax 请求中获取 XML，以便从中提取数据（使用 DOM，这并不重要）。不，我确实知道 ajax 可以正常工作，因为如果我尝试获取 AjaxRequest.responseText，它就可以正常工作。我收到的错误消息是：

***“null”不是对象（评估“resturantsCategoriesAjaxXML.getElementsByTagName”）***

当我尝试将 responseXML 写入日志时，我得到的只是空值，就像它没有被定义一样。我已经包含了处理 AJAX 的完整 JS（对于奇怪的变量名称，我只是不想更改它们，以防问题是拼写错误），以及它正在获取的 XML（简单 XML）。 **非常感谢您的帮助：D**

**Java 脚本：**

```
resturantsCategoriesAjaxRequestAdress = "testFiles/categoriesAjax.xml";
resturantsCategoriesAjaxRequest = new XMLHttpRequest();
resturantsCategoriesAjaxRequest.onreadystatechange = function(){
if(resturantsCategoriesAjaxRequest.readyState == 4){
    resturantsCategoriesAjaxXML = resturantsCategoriesAjaxRequest.responseXML;
    console.log(resturantsCategoriesAjaxRequest.responseXML);
    categoriesArray = resturantsCategoriesAjaxXML.getElementsByTagName("category");
    categoriesArraylenght = categoriesArray.length;
    alert(categoriesArraylenght);
    categoriesArrayIritationControl = 0;
    while (categoriesArraylenght >= categoriesArrayIritationControl) {
        categoryName = categoriesArray[categoriesArrayIritationControl].getAttribut("name");
        //create new <li> object
        //add to ctegories menu on restrants page
        alert(categoryName);
    }
}
}
resturantsCategoriesAjaxRequest.open("GET", resturantsCategoriesAjaxRequestAdress, true);
resturantsCategoriesAjaxRequest.overrideMimeType("text/xml");
resturantsCategoriesAjaxRequest.send();
console.log(resturantsCategoriesAjaxRequest.readyState); 
```

**XML:**

```
<?xml version='1.0'?>
<category name="Fast_Food" id="1120"></category>
<category name="Chinese" id="1108"></category>
<category name="Italian" id="1230"></category> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:16:02.383

我认为您的文档不是正确的 xml 文档，您需要上面的父标签`"<category>"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T16:08:11.177

您需要一个封装其他节点的根元素。

也许`<categories>`关闭`</categories>`包含所有`<category>`节点。

# python - python：如何拥有一个属性和一个setter函数来检测值发生的所有变化

> ID：10665874
> 
> 赞同：7
> 
> 时间：2012-05-19T14:10:38.003
> 
> 标签：python, properties

我有两个包含列表的属性。每当此列表中的任何项目发生更改时，我都希望另一个列表自行更新。这包括声明`obj.myProp[3]=5`。现在，该语句调用 getter 函数来获取整个列表，从列表中获取第三个项目，并将其设置为 5。`myProp`列表已更改，但第二个列表永远不会更新。

```
class Grid(object):

    def __init__(self,width=0,height=0):

        # Make self._rows a multi dimensional array
        # with it's size width * height
        self._rows=[[None] * height for i in xrange(width)]
        # Make `self._columns` a multi dimensional array
        # with it's size height * width
        self._columns=[[None] * width for i in xrange(height)]

    @property
    def rows(self):
        # Getting the rows of the array
        return self._rows

    @rows.setter
    def rows(self, value):
        # When the rows are changed, the columns are updated
        self._rows=value
        self._columns=self._flip(value)

    @property
    def columns(self):
        # Getting the columns of the array
        return self._columns

    @columns.setter
    def columns(self, value):
        # When the columns are changed, the rows are updated
        self._columns = value
        self._rows = self._flip(value)

    @staticmethod
    def _flip(args):
        # This flips the array
        ans=[[None] * len(args) for i in xrange(len(args[0]))]
        for x in range(len(args)):
            for y in range(len(args[0])):
                ans[y][x] = args[x][y]
        return ans 
```

示例运行：

```
>>> foo=grid(3,2)
>>> foo.rows
[[None, None], [None, None], [None, None]]
>>> foo.columns
[[None, None, None], [None, None, None]]
>>> foo.rows=[[1,2,3],[10,20,30]]
>>> foo.rows
[[1, 2, 3], [10, 20, 30]]
>>> foo.columns
[[1, 10], [2, 20], [3, 30]]
>>> foo.rows[0][0]=3
>>> foo.rows
[[3, 2, 3], [10, 20, 30]]
>>> foo.columns
[[1, 10], [2, 20], [3, 30]] 
```

如果您查看最后三行，这就是实际问题发生的地方。我将子列表的第一项设置为 3，但从`foo.columns`不更新自身以将 3 放入其列表中。

简而言之，我如何制作一个始终更新另一个变量的变量，即使它的子项正在更改？

我正在使用 Python 2.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T16:17:37.903

您的问题是您没有*设置* `foo.rows`违规行 - 您正在*获取*它，然后修改其中一个成员。这不会解雇二传手。使用您提议的 API，您需要返回一个附有 getter 和 setter 的列表。

您最好不要使用 rows 和 columns 属性来设置条目，并添加`__getitem__`如下方法：

```
class Grid(object):

    def __init__(self, width=0, height=0):
        self._data = [None] * width * height;
        self.width = width
        self.height = height

    def __getitem__(self, pos):
        if type(pos) != tuple or len(pos) != 2:
            raise IndexError('Index must be a tuple of length 2')
        x, y = pos
        if 0 <= x < self.width and 0 <= y < self.height:
            return self._data[x + self.width * y]
        else:
            raise IndexError('Grid index out of range')

    def __setitem__(self, pos, value):
        if type(pos) != tuple or len(pos) != 2:
            raise IndexError('Index must be a tuple of length 2')
        x, y = pos
        if 0 <= x < self.width and 0 <= y < self.height:
            self._data[x + self.width * y] = value
        else:
            raise IndexError('Grid index out of range')

    @property
    def columns(self):
        return [
            [self[x, y] for x in xrange(self.width)]
            for y in xrange(self.height)
        ]

    @property
    def rows(self):
        return [
            [self[x, y] for y in xrange(self.height)]
            for x in xrange(self.width)
        ] 
```

虚线则变为：

```
foo[0, 0] = 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T16:01:39.937

如果您只是返回您的`rows`or`columns`列表，那么您将永远无法控制更改项目时会发生什么。

一种可能性是不提供属性来直接获取/设置列表，而是为位置 x/y 处的项目提供设置器/获取器。

一个不错的版本是让`__setitem__`/`__getitem__`并让他们接受一个元组，这样你就可以使用`foo[x,y]`and访问元素`foo[x,y] = bar`。

另一种方法是在列表周围返回一个包装器，以检测元素何时更改，但是您还必须为每个嵌套列表执行此操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-19T16:56:06.037

我建议您考虑使用[numpy](http://numpy.scipy.org/)。特别是，[transpose](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.transpose.html)方法提供了一个带有转置轴的基础矩阵的“视图”，这意味着如果你改变一个，那么另一个就会改变。

如果这不符合您的需求，那么我可以看到使您想要工作的 API 的唯一方法是定义“行”和“列”方法以返回实际上不存储数据的自定义“视图对象” ，但这又指向网格对象本身中的一些私有（共享）数据。这些可能是类似列表的，但不支持某些操作（例如，追加或清除）。

# windows - 在 Windows 上的路径中列出可执行文件

> ID：10665875
> 
> 赞同：4
> 
> 时间：2012-05-19T14:10:40.573
> 
> 标签：windows, command-line, cmd

在 Windows 上，如何列出路径中的可执行文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T14:15:40.587

```
where *.exe 
```

对于任何其他可执行文件，您应该更改扩展名，例如 .bat、.run。但是这里有一点，`where`也是搜索当前目录，所以如果你只想要 $PATH 中的可执行文件，你应该在一个空目录中运行它，或者手动或脚本排除结果。

# jsf-2 - 点击 在 为每个项目调用操作

> ID：10665879
> 
> 赞同：1
> 
> 时间：2012-05-19T14:10:57.113
> 
> 标签：jsf-2

我正在开发类似于 facebook 的评论结构。在里面`<ui:repeat>`我放置了一个表单，我希望当我单击该表单中的命令链接时，它应该提交包含命令链接的表单。但我得到的是，每个链接的操作都是在单击单个链接时调用的。

支持 bean 是`@ViewScoped`. 我正在使用 Mojarra 2.1.7。

这是如何引起的，我该如何解决？这个问题与`<h:form>`标签有关吗？

```
<ui:repeat var="parentComment" value="#{commentTree.parentComments}">
    <h:form>
        <ul>
            <li>
                #{parentComment.comment}<br />
                <span class="small darkblue">#{parentComment.userNodeImpl.firstName} #{parentComment.userNodeImpl.lastName}</span>
                <span class="small darkblue">#{parentComment.commentTime}</span>

                <ui:repeat var="childComment" value="#{commentTree.getChildComments(parentComment)}">
                    <ul>
                        <li>
                            #{childComment.comment}<br />
                            <span class="small darkblue">#{childComment.userNodeImpl.firstName} #{childComment.userNodeImpl.lastName}</span>
                            <span class="small darkblue">#{childComment.commentTime}</span>
                        </li>
                    </ul>
                </ui:repeat> 

                <div class="small darkblue">
                    <h:commandLink value="comment" action="#{commentTree.saveChildComment(parentComment)}" />
                </div>
            </li>
        </ul>
    </h:form>
</ui:repeat> 
```

# javascript - 使用 Javascript 从链接中删除不需要的 CSS

> ID：10665882
> 
> 赞同：0
> 
> 时间：2012-05-19T14:11:10.140
> 
> 标签：javascript, css, hyperlink, href

我需要我们网站上的链接不继承页面的 CSS 规则 - 目前它显示有边框和下划线等，这对于该特定链接来说是不可取的。

我似乎隐约记得能够将 href 更改为 as`<a href="javascript:;"></a>`有效地覆盖 CSS，但我不记得如何使链接转到所需的页面。可以填我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:27:50.747

您必须覆盖样式表上定义的样式。有几种方法可以做到这一点（下面的示例将颜色设置为红色，但您实际上必须设置`border: 0; text-decoration: none;`）。

**内联样式**

```
<a href="#" id="thelink" style="color:#f00;">link text</a> 
```

**JavaScript**

```
document.getElementById('thelink').style.color = '#f00'; 
```

**外部 CSS 或`<style>`块**（如果您可以为此元素添加特定的 CSS 规则）

```
#thelink { color: #f00; } 
```

如果由于某些更具体的选择器优先，上述方法不起作用：

```
#thelink { color: #f00 !important; } 
```

# algorithm - 一种查找常见编辑的算法

> ID：10665888
> 
> 赞同：10
> 
> 时间：2012-05-19T14:11:38.120
> 
> 标签：algorithm

我有两个单词列表，一个例子：

```
 list 1  list 2

 foot    fuut
 barj    kijo
 foio    fuau
 fuim    fuami
 kwim    kwami
 lnun    lnun
 kizm    kazm 
```

我想找到

```
o → u # 1 and 3
i → a # 3 and 7
im → ami # 4 and 5 
```

这应该按出现次数排序，所以我可以过滤那些不经常出现的。

列表目前由 35k 字组成，在平均服务器上计算大约需要 6 小时。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T23:22:01.020

编辑距离算法和像[LCS](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)方法一样的 Levenshtein 距离是有益的。但是它们用于将一个单词更改为另一个单词，通过这些方法，您可以了解如何以最少的更改量将一个单词更改为另一个单词。但是它们对于查找两个字典中的最小更改量没有用。

> 最长公共子序列（LCS）问题是在一组序列（通常只有两个）中找到所有序列共有的最长子序列。请注意，子序列与子字符串不同，请参阅子字符串与子序列。它是一个经典的计算机科学问题，是 diff 等文件比较程序的基础，并在生物信息学中有应用。

通过使用 LCS 或任何其他方法，对于 list1 中的每个单词，找出该单词如何变为列表 2 中的另一个单词。例如，foot & feet 之间：LCS=FT ,difference = oo=>ee。您应该制作一个二分图，第一部分由不同的词组成，第二部分由 list1 组成。第二部分中的每个节点都连接到第一部分中它自己的相关差异。

我想单词的长度和总部分是有限的。

我们可以用图来模拟这个问题。将每个更改分配给一个节点。例如， **e → i**（确定其中一个变化）是一个节点的标签。例如，如果 p→q 形式的所有操作都设置为二部图中的一个部分，并且每对单词的总差值等于 1，并定义 Edge`uv`连接顶点`U`到`V`if word(u) 的 Edge 集合（在第二部分）更改为正确的单词需要 V 的更改。您在第一部分中最多有 25*26 个节点（对于此示例）。如果在你的情况下*长度> = 1*，所以你需要设置一个限制。我假设每个单词的最大更改部分等于 3。所以我们在第一部分有 3*35K 最大节点。现在您可以通过在第一部分选择一组节点来解决问题，这些节点可以在第二部分覆盖最大单词（您选择的应该发生单词更改为正确的单词）。

在此图中找到最小顶点切割，以找到他们可以提供您的请求的节点集。并重复切割顶点算法，直到得到好的答案。

您可以使用某种边界来减小图形的大小，例如删除第一部分中具有 degree 的所有节点`1`，因为这些节点只连接到一个单词，所以它们似乎没用。

这个图形模拟可以解决你的问题。对于当前的问题陈述，这个算法范围可以正常工作。

例如：![在此处输入图像描述](../Images/7e26bf9515733678f8b77293d1e67e91.png)

这是此图中边界的示例（删除操作部分中具有 1 条边的所有节点）：

> 1-删除节点4，因为它只连接到（nod），然后删除节点（nod） 2-删除节点2，因为它只连接到（sghoul），然后删除节点（sghoul） 3-现在删除节点3，因为它只连接到 (goud)[sghoul 被移除最后一步]，然后移除节点(goud)

现在你有一个操作 oo=>ee 并且你可以选择这个。

我会考虑更多并尝试编辑此文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T14:31:47.020

您可以使用编辑距离算法，例如[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)。可能需要对算法进行一些小的更改以记录精确的修改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T12:03:25.157

我的最终解决方案是使用 mosesdecoder。我将单词拆分为单个字符并将它们用作并行语料库并使用提取的模型。我比较了 Sursilvan 和 Vallader。

```
export IRSTLM=$HOME/rumantsch/mosesdecoder/tools/irstlm
export PATH=$PATH:$IRSTLM/bin

rm -rf corpus giza.* model
array=("sur" "val")
for i in "${array[@]}"; do
    cp "raw.$i" "splitted.$i"
    sed -i 's/ /@/g' "splitted.$i"
    sed -i 's/./& /g' "splitted.$i"
    add-start-end.sh < "splitted.$i" > "compiled.$i"
    build-lm.sh -i "compiled.$i" -t ./tmp -p -o "compiled.lm.$i"
    compile-lm --text yes "compiled.lm.$i.gz" "compiled.arpa.$i"
done

../scripts/training/train-model.perl --first-step 1 --last-step 5 -root-dir . -corpus splitted -f sur -e val -lm 0:3:$PWD/compiled.arpa.sur -extract-options "--SentenceId" -external-bin-dir ../tools/bin/

$HOME/rumantsch/mosesdecoder/scripts/../bin/extract $HOME/rumantsch/mosesdecoder/rumantsch/splitted.val $HOME/rumantsch/mosesdecoder/rumantsch/splitted.sur $HOME/rumantsch/mosesdecoder/rumantsch/model/aligned.grow-diag-final $HOME/rumantsch/mosesdecoder/rumantsch/model/extract 7 --SentenceId --GZOutput

zcat model/extract.sid.gz | awk -F '[ ][|][|][|][ ]' '$1!=$2{print $1, "|", $2}' | sort | uniq -c | sort -nr | head -n 10 > results 
```

# python - 如何在熊猫中获取数据框的列片

> ID：10665889
> 
> 赞同：307
> 
> 时间：2012-05-19T14:11:42.603
> 
> 标签：python, pandas, numpy, dataframe, slice

我从 CSV 文件加载了一些机器学习数据。前 2 列是观察值，其余列是特征。

目前，我执行以下操作：

```
data = pandas.read_csv('mydata.csv') 
```

这给出了类似的东西：

```
data = pandas.DataFrame(np.random.rand(10,5), columns = list('abcde')) 
```

我想将此数据帧分成两个数据帧：一个包含列`a`，`b`一个包含列`c`，`d`和`e`。

不可能写出类似的东西

```
observations = data[:'c']
features = data['c':] 
```

我不确定最好的方法是什么。我需要一个`pd.Panel`吗？

顺便说一句，我发现数据帧索引非常不一致：`data['a']`允许，但`data[0]`不允许。另一方面，`data['a':]`不允许，但允许`data[0:]`。这有实际原因吗？如果列是由 Int 索引的，这真的很令人困惑，因为`data[0] != data[0:1]`

* * *

## 回答 #1

> 赞同：299
> 
> 时间：2017-06-24T12:38:58.427

# 2017 答案 - 熊猫 0.20：.ix 已弃用。使用 .loc

请参阅[文档中的弃用](https://pandas.pydata.org/pandas-docs/stable/indexing.html#ix-indexer-is-deprecated)

`.loc`使用基于标签的索引来选择行和列。标签是索引或列的值。切片`.loc`包含最后一个元素。

> 假设我们有一个包含以下列的 DataFrame：
> `foo`, `bar`, `quz`, `ant`, `cat`, `sat`, `dat`。

```
# selects all rows and all columns beginning at 'foo' up to and including 'sat'
df.loc[:, 'foo':'sat']
# foo bar quz ant cat sat 
```

`.loc`接受与 Python 列表对行和列所做的相同切片表示法。切片符号是`start:stop:step`

```
# slice from 'foo' to 'cat' by every 2nd column
df.loc[:, 'foo':'cat':2]
# foo quz cat

# slice from the beginning to 'bar'
df.loc[:, :'bar']
# foo bar

# slice from 'quz' to the end by 3
df.loc[:, 'quz'::3]
# quz sat

# attempt from 'sat' to 'bar'
df.loc[:, 'sat':'bar']
# no columns returned

# slice from 'sat' to 'bar'
df.loc[:, 'sat':'bar':-1]
sat cat ant quz bar

# slice notation is syntatic sugar for the slice function
# slice from 'quz' to the end by 2 with slice function
df.loc[:, slice('quz',None, 2)]
# quz cat dat

# select specific columns with a list
# select columns foo, bar and dat
df.loc[:, ['foo','bar','dat']]
# foo bar dat 
```

您可以按行和列切片。例如，如果您有 5 行带有标签`v`, `w`, `x`, `y`,`z`

```
# slice from 'w' to 'y' and 'foo' to 'ant' by 3
df.loc['w':'y', 'foo':'ant':3]
#    foo ant
# w
# x
# y 
```

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2012-05-20T22:51:30.290

**注意：** `.ix`自 Pandas v0.20 起已弃用。您应该酌情使用`.loc`or `.iloc`。

DataFrame.ix 索引是您想要访问的。这有点令人困惑（我同意 Pandas 索引有时令人困惑！），但以下内容似乎可以满足您的要求：

```
>>> df = DataFrame(np.random.rand(4,5), columns = list('abcde'))
>>> df.ix[:,'b':]
      b         c         d         e
0  0.418762  0.042369  0.869203  0.972314
1  0.991058  0.510228  0.594784  0.534366
2  0.407472  0.259811  0.396664  0.894202
3  0.726168  0.139531  0.324932  0.906575 
```

其中 .ix[row slice, column slice] 是正在解释的内容。更多关于 Pandas 索引的信息：http: [//pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-advanced](http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-advanced)

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2015-11-30T11:32:15.847

让我们以 seaborn 包中的 Titanic 数据集为例

```
# Load dataset (pip install seaborn)
>> import seaborn.apionly as sns
>> titanic = sns.load_dataset('titanic') 
```

> # 使用列名

```
>> titanic.loc[:,['sex','age','fare']] 
```

> # 使用列索引

```
>> titanic.iloc[:,[2,3,6]] 
```

> # 使用 ix（早于 Pandas <.20 版本）

```
>> titanic.ix[:,[‘sex’,’age’,’fare’]] 
```

或者

```
>> titanic.ix[:,[2,3,6]] 
```

> # 使用重新索引方法

```
>> titanic.reindex(columns=['sex','age','fare']) 
```

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2014-02-25T15:33:29.497

此外，给定一个 DataFrame

> 数据

如您的示例所示，如果您只想提取 a 和 d 列（即第 1 列和第 4 列），则可以使用 pandas 数据框中的 iloc 方法，并且可以非常有效地使用。您只需要知道要提取的列的索引。例如：

```
>>> data.iloc[:,[0,3]] 
```

会给你

```
 a         d
0  0.883283  0.100975
1  0.614313  0.221731
2  0.438963  0.224361
3  0.466078  0.703347
4  0.955285  0.114033
5  0.268443  0.416996
6  0.613241  0.327548
7  0.370784  0.359159
8  0.692708  0.659410
9  0.806624  0.875476 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2012-05-19T15:02:43.627

`DataFrame`您可以通过引用列表中每一列的名称来对 a 的列进行切片，如下所示：

```
data = pandas.DataFrame(np.random.rand(10,5), columns = list('abcde'))
data_ab = data[list('ab')]
data_cde = data[list('cde')] 
```

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2014-10-11T23:21:52.623

如果你来这里寻找切片两个范围的列并将它们组合在一起（像我一样）你可以做类似的事情

```
op = df[list(df.columns[0:899]) + list(df.columns[3593:])]
print op 
```

这将创建一个新的数据框，其中前 900 列和（所有）列 > 3593（假设您的数据集中有大约 4000 列）。

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2017-06-19T21:50:19.760

下面介绍如何使用不同的方法进行选择性列切片，**包括基于选择性标签、基于索引和基于选择性范围的列切片。**

```
In [37]: import pandas as pd    
In [38]: import numpy as np
In [43]: df = pd.DataFrame(np.random.rand(4,7), columns = list('abcdefg'))

In [44]: df
Out[44]: 
          a         b         c         d         e         f         g
0  0.409038  0.745497  0.890767  0.945890  0.014655  0.458070  0.786633
1  0.570642  0.181552  0.794599  0.036340  0.907011  0.655237  0.735268
2  0.568440  0.501638  0.186635  0.441445  0.703312  0.187447  0.604305
3  0.679125  0.642817  0.697628  0.391686  0.698381  0.936899  0.101806

In [45]: df.loc[:, ["a", "b", "c"]] ## label based selective column slicing 
Out[45]: 
          a         b         c
0  0.409038  0.745497  0.890767
1  0.570642  0.181552  0.794599
2  0.568440  0.501638  0.186635
3  0.679125  0.642817  0.697628

In [46]: df.loc[:, "a":"c"] ## label based column ranges slicing 
Out[46]: 
          a         b         c
0  0.409038  0.745497  0.890767
1  0.570642  0.181552  0.794599
2  0.568440  0.501638  0.186635
3  0.679125  0.642817  0.697628

In [47]: df.iloc[:, 0:3] ## index based column ranges slicing 
Out[47]: 
          a         b         c
0  0.409038  0.745497  0.890767
1  0.570642  0.181552  0.794599
2  0.568440  0.501638  0.186635
3  0.679125  0.642817  0.697628

### with 2 different column ranges, index based slicing: 
In [49]: df[df.columns[0:1].tolist() + df.columns[1:3].tolist()]
Out[49]: 
          a         b         c
0  0.409038  0.745497  0.890767
1  0.570642  0.181552  0.794599
2  0.568440  0.501638  0.186635
3  0.679125  0.642817  0.697628 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-05T09:28:25.817

它的等价物

```
 >>> print(df2.loc[140:160,['Relevance','Title']])
 >>> print(df2.ix[140:160,[3,7]]) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-10T13:38:11.777

假设您想要所有行，从 DataFrame 获取列子集的另一种方法是： 如果您想使用数字列索引，您可以这样做：
`data[['a','b']]`和`data[['c','d','e']]`

`data[data.columns[:2]]``data[data.columns[2:]]`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-08T16:54:02.273

如果数据框看起来像这样：

```
group         name      count
fruit         apple     90
fruit         banana    150
fruit         orange    130
vegetable     broccoli  80
vegetable     kale      70
vegetable     lettuce   125 
```

和 OUTPUT 可能就像

```
 group    name  count
0  fruit   apple     90
1  fruit  banana    150
2  fruit  orange    130 
```

如果您使用逻辑运算符 np.logical_not

```
df[np.logical_not(df['group'] == 'vegetable')] 
```

更多关于

[https://docs.scipy.org/doc/numpy-1.13.0/reference/routines.logic.html](https://docs.scipy.org/doc/numpy-1.13.0/reference/routines.logic.html)

其他逻辑运算符

1.  logical_and(x1, x2, /[, out, where, ...]) 按元素计算 x1 AND x2 的真值。

2.  logical_or(x1, x2, /[, out, where, cast, ...]) 按元素计算 x1 OR x2 的真值。

3.  logical_not(x, /[, out, where, cast, ...]) 按元素计算 NOT x 的真值。
4.  logical_xor(x1, x2, /[, out, where, ..]) 按元素计算 x1 XOR x2 的真值。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-25T22:24:57.590

您可以使用该方法[`truncate`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.truncate.html)

```
df = pd.DataFrame(np.random.rand(10, 5), columns = list('abcde'))

df_ab = df.truncate(before='a', after='b', axis=1)
df_cde = df.truncate(before='c', axis=1) 
```

# ruby - 表中断到很晚，并在下一页开始较早

> ID：10665890
> 
> 赞同：0
> 
> 时间：2012-05-19T14:11:53.210
> 
> 标签：ruby, prawn

我使用 prawn 根据显示在表格中的一组数据生成报告。只要我没有太多数据，这就会完美地工作。当我有超过 20 个数据集时，表格会进入我的页脚，并在下一页上从页眉开始。

最好的方法是为显示表格的每个页面定义一种区域。我通过搜索手册没有找到任何解决方案。是否有解决方法或某事。像那样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:27:38.203

一种可能的解决方案（不了解您的用例的太多细节）：

如果行的高度是固定的，您可以将数据分组到适合页面的行数中。然后插入分页符并绘制一个新表格。参考[http://rails.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Array/Grouping.html#M000833](http://rails.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Array/Grouping.html#M000833)

例如：（在haml中）

```
- @people.in_groups_of(5,false) do |people|
  %ul
    - people.each do |person|
      %li= person.name
  %hr 
```

这将创建多个`<ul>`'s，每个标签最多有 5 个`<li>`标签，由 a 分隔`<hr />`

希望以某种方式适用于您的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:23:25.927

solition 将 a`bounding_box`用于整个文档内容，因此即使在分页后也不涉及页脚或页眉。

# node.js - 在 nodejs 中启用 Harmony 代理

> ID：10665892
> 
> 赞同：20
> 
> 时间：2012-05-19T14:11:57.873
> 
> 标签：node.js, ecmascript-harmony

是否可以在 nodejs 中启用 EcmaScript 6 Harmony 代理？如果是这样，有什么优点和缺点？有没有关于如何使用它们的文档？谢谢 ！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-19T16:19:28.713

调用节点`node --harmony-proxies`应该可以解决问题。

优点：当您真正需要代理时，代理是一个非常强大的功能。

缺点：当您不需要代理时（大多数情况下应该是），代理是一个非常强大的功能。此外，实施仍应视为实验性的。

至于文档，真正有 atm 的是 Harmony wiki，特别是这个页面，它反映了 V8（以及节点）中代理的当前实现：

[http://wiki.ecmascript.org/doku.php?id=harmony:proxies](http://wiki.ecmascript.org/doku.php?id=harmony:proxies)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T16:15:00.273

我推荐[Harmony-reflect](https://github.com/tvcutsem/harmony-reflect)，它可以很容易地设置 get/set 陷阱：

**UPDATE**小心，下面是CoffeeScript

```
require 'harmony-reflect'

handler =

  get: ( target, name ) ->
    console.log 'get' name
    return target[ name ]

  set: ( target, name, value ) ->
    console.log 'set' name
    target[ '%is-clean' ] = no if value isnt target[ name ]
    if value is undefined then delete target[ name ]
    else                       target[ name ] = value
    return value

clean = ( x ) ->
  x[ '%is-clean' ] = yes
  return x

p = Proxy {}, handler
p[ 'a' ] = 1
p[ 'b' ] = undefined
console.log p[ 'a' ], p[ 'b' ]
console.log "c" of p, p[ 'c' ]
console.log p
clean p
p[ 'a' ] = 1
console.log p
p[ 'a' ] = 42
console.log p 
```

以上是在 JavaScript 中执行“透明对象持久性”的初始代码。使用`harmony-reflect`，它变得微不足道，以便拦截对象上的所有`get`操作`set`- 在这个演示中，我们设置了一个`%is-clean`属性，以便我们可以测试对象成员是否已更改，并且我们还删除了已设置为未定义的成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-10T09:08:57.680

您可以使用 pimped-proxy，它是代理的轻量级实现，使声明更容易并且与 ES5 兼容。与原生 Proxy 不同，它只能代理创建时已知的属性。

[https://github.com/Boulangerie/pimped-proxy](https://github.com/Boulangerie/pimped-proxy)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-08T21:16:27.297

`Proxy`现在可以在 Node 版本 >= 6 中本地使用。

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2012-11-08T16:42:16.587

Harmony 代理对于 nodejs 来说并不能很好地工作，因为它们实际上是同步类型的函数调用。也就是说，您不能实现异步的代理方法。

有关示例，请参见此 GitHub 存储库： [https ://github.com/mschwartz/SilkJS-Harmony](https://github.com/mschwartz/SilkJS-Harmony)

# html - 如何添加带有 HTML 页面标题的图像？

> ID：10665893
> 
> 赞同：7
> 
> 时间：2012-05-19T14:12:07.047
> 
> 标签：html

如何在 chrome、firefox 或其他浏览器中添加带有该页面标题的页面的图像或徽标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T14:25:22.587

摘自[什么是 Favicon.ico 以及如何为您的网站创建 Favicon 图标](http://www.thesitewizard.com/archive/favicon.shtml)

> **如何创建“Favicon.ico”文件**
> 
> 1.创建大小为 16X16 像素的图像。是的，它真的很小，你不能在里面画太多。您还应该限制自己使用标准的 Windows 16 颜色，尽管我怀疑 256 色可以正常工作。
> 
> 如果您愿意，您还可以创建一个 32X32 像素的图标，该图标将缩放到收藏夹菜单和位置栏的大小。您甚至可以将 16X16 和 32X32 像素图标放入同一个图标文件中。当用户打开设置为显示大图标的文件夹时，Windows 将使用前者作为其菜单，而使用后者。如果你不被打扰，可能真的没有必要这样做。
> 
> 2.将图像保存为 ICO 文件（当然命名为“favicon.ico”）。
> 
> 3.上传到您的网站。如果您不想浪费空间，则无需将其上传到站点的每个目录 - 只需将其放在根目录中，支持网站图标的 Web 浏览器显然最终会找到它。您也可以将其上传到您的图像目录，但如果您这样做，您将需要修改您的网页。有关这方面的更多信息，请参阅本文后面的内容。
> 
> **帮助！我的虚拟主机不允许 ICO 文件！**
> 
> 如果您的托管公司不允许上传带有 .ICO 扩展名的文件，您可以尝试通过使用其他扩展名（如 GIF）上传（以二进制模式）来解决这个问题。一旦它在您的站点上，使用您的 FTP 程序将其重命名为正确的扩展名。

```
<head>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" /> 
</head> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T14:14:35.867

您正在寻找的是一个网站图标。

在 W3 联盟的指导下，添加它的首选方法是`profile`在页面`<head>`标签中使用 a：

```
<head profile="http://www.yoursite.com/profile">
<link rel="icon" 
  type="image/png" 
  href="http://example.com/myicon.png">
[…]
</head> 
```

有关添加到您的站点的说明，请参见[此处](http://www.w3.org/2005/10/howto-favicon)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-18T05:56:38.470

这是为您的网站设置网站图标的代码。您的网站图标将与指定的网页标题一起显示。只需使用以下代码。

```
<!DOCTYPE html>
<html>
    <head>
        <title> mytitle </title>
        <link rel="icon" href="http://i58.tinypic.com/302rtyg.png" type="image/png">

    </head>

</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-17T05:28:31.423

这是一个非常简单的网站，我用它来创建我的网站图标：[favicon.cc](https://www.favicon.cc/)

以下是它的优点：

*   您可以选择自定义颜色*   可下载*   可以发布和共享*   可以调整图片大小以适应大小（虽然可能会失真如果你像我一样有多个 favicon，你应该创建一个名为“favicons”的目录，然后将图片放入其中。

记得给每一个独特的名字，例如 default.ico 或 blog.ico

请记住下载您的网站图标。
以下是访问网站图标的方法：

```
<link href="/YOUR_PATH/favicon.ico" rel="icon" type="image/x-icon" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-04T18:17:58.980

```
<link rel="icon" href="image_name.ico" />
<title>Place your html title here</title> 
```

此处链接指定当前资源之间的关系，即图标 .href 将图像地址提供给浏览器。图像可以是任何类型，例如：jpg 格式

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-28T05:27:11.090

```
<head>
    <link rel="shortcut icon" href="title_icon.png">
</head> 
```

# android - logcat 错误：我正在尝试根据屏幕分辨率更改图像大小？

> ID：10665897
> 
> 赞同：0
> 
> 时间：2012-05-19T14:12:42.273
> 
> 标签：android, logcat, screen-resolution

嗨，我希望根据屏幕分辨率更改图像的高度和宽度，所以我使用下面的代码，但在 logcat 中出现错误：

第一个我的源代码：

```
 public class ImageviewAppActivity extends Activity {

    private ImageView img; 
    private LayoutParams params;
    private int width, height;
    /** Called when the activity is first created. */
    @Override
   public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        height=160; //getWindowManager().getDefaultDisplay().getHeight();
        width = 160; //getWindowManager().getDefaultDisplay().getWidth();

        params = new LayoutParams(width, height);
        img.setLayoutParams(params);

        img =(ImageView) findViewById(R.id.imagetest);
        img.setImageResource(R.drawable.last);
   }} 
```

日志错误：

模拟器错误：

```
05-19 20:02:08.689: D/AndroidRuntime(1933): Shutting down VM
05-19 20:02:08.689: W/dalvikvm(1933): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-19 20:02:08.749: E/AndroidRuntime(1933): FATAL EXCEPTION: main
05-19 20:02:08.749: E/AndroidRuntime(1933): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test/com.test.ImageviewAppActivity}: java.lang.NullPointerException
05-19 20:02:08.749: E/AndroidRuntime(1933):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at android.os.Looper.loop(Looper.java:123)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at java.lang.reflect.Method.invokeNative(Native Method)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at java.lang.reflect.Method.invoke(Method.java:507)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at dalvik.system.NativeStart.main(Native Method)
05-19 20:02:08.749: E/AndroidRuntime(1933): Caused by: java.lang.NullPointerException
05-19 20:02:08.749: E/AndroidRuntime(1933):     at com.test.ImageviewAppActivity.onCreate(ImageviewAppActivity.java:46)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-19 20:02:08.749: E/AndroidRuntime(1933):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-19 20:02:08.749: E/AndroidRuntime(1933):     ... 11 more
05-19 20:02:08.779: W/ActivityManager(75):   Force finishing activity com.test/.ImageviewAppActivity
05-19 20:02:09.329: W/ActivityManager(75): Activity pause timeout for HistoryRecord{40970fc8 com.test/.ImageviewAppActivity}
05-19 20:02:17.199: D/dalvikvm(378): GC_EXPLICIT freed 7K, 54% free 2537K/5511K, external 1625K/2137K, paused 171ms
05-19 20:02:21.880: W/ActivityManager(75): Activity destroy timeout for HistoryRecord{40970fc8 com.test/.ImageviewAppActivity} 
```

应用程序 ImageviewApp(process com.test.app) 已意外停止。请再试一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:22:27.883

`img.setLayoutParams(params);`

把上面的线放在这条线之后

`img =(ImageView) findViewById(R.id.imagetest);`

**和**

这是你的`LayoutParams`问题，更改它检查导入的包的layourparams并更改它......我不知道你有哪个视图组......但是检查下面的包使用一个......

```
import android.widget.RelativeLayout.LayoutParams; 
```

**或者**

```
import android.view.ViewGroup.LayoutParams; 
```

# c# - SetSuspendState 函数的 disableWakeEvent 参数有什么作用？

> ID：10665898
> 
> 赞同：0
> 
> 时间：2012-05-19T14:12:43.193
> 
> 标签：c#, .net

我无法理解 SetSuspendState 函数的 disableWakeEvent 参数的作用。

[msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.setsuspendstate.aspx)将其解释为“true 表示禁用将系统的电源状态恢复为在唤醒事件时处于活动状态，false 表示启用将系统的电源状态恢复为在唤醒事件时处于活动状态。”

所以我的问题是，如果我将其设置为 true，并在休眠/挂起后尝试打开我的系统，我的系统会唤醒吗？

```
Application.SetSuspendState(PowerState.Suspend, true, true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:49:32.427

[在等效的本机 API 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373201.aspx)中对此进行了更好的解释。

> **禁用唤醒事件**
> 
> 如果此参数为 TRUE，则系统禁用所有唤醒事件。如果参数为 FALSE，则任何系统唤醒事件都保持启用状态。

唤醒事件是可以唤醒机器的计划任务之类的事情。例如，也许您有一个计划任务来唤醒机器以每周执行一次完整的病毒扫描。

设置`disableWakeEvent`为`true`将禁用所有其他唤醒事件。因此，当系统挂起时，即使定义了任何此类唤醒事件，它也会保持挂起状态。

# css - 使用 div 的 CSS 布局

> ID：10665899
> 
> 赞同：0
> 
> 时间：2012-05-19T14:12:44.847
> 
> 标签：css, html

我正在使用 CSS 创建一个小仪表板页面，我只是在规划我需要使用的布局和 div。我忍不住想我让这比现在更复杂。我创建了下面的图像，每种颜色都表示不同的 div。

![在此处输入图像描述](../Images/abaca49c3b7cdab02779afe5f338e127.png)

主要的外部红色将是页面上的内容 div。我不确定我是否需要灰色和蓝色的 div？或者深红色的 div 会在灰色的上方但在蓝色的下方。

为这张非常愚蠢的图画道歉，但我认为最好尝试展示我的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:54:01.280

尝试这个...

```
 <div id="wrap">

 <div class="box">
     <div class="title">
         <span class="left">Title</span>
         <span class="right">Link</span>
     </div>
     <div class="results">Results here...</div>
 </div>

 <div class="box">
     <div class="title">
         <span class="left">Title</span>
         <span class="right">Link</span>
     </div>
     <div class="results">Results here...</div>
 </div>

 <div class="box">
     <div class="title">
         <span class="left">Title</span>
         <span class="right">Link</span>
     </div>
     <div class="results">Results here...</div>
 </div>

 <div class="box">
     <div class="title">
         <span class="left">Title</span>
         <span class="right">Link</span>
     </div>
     <div class="results">Results here...</div>
 </div>

 </div>

#wrap {}
.box {display: inline-block; width: 400px; height: 400px; border: 1px solid blue; margin: 0 25px 50px 0;}
.title {position: relative; border: 1px solid red;}
.title span {position: absolute; top: 0; display: inline-block;}
.title .left {left: 0;}
.title .right {right: 0;}
.results {} 
```

希望能帮助到你。

# jquery - Jquery droppable 获取可拖动的id

> ID：10665901
> 
> 赞同：5
> 
> 时间：2012-05-19T14:12:46.330
> 
> 标签：jquery, drag-and-drop, draggable

当我掉到某个 div 时，我想拖拽 id

```
 Drag  <ul id="demo" > 
         <li id="1" ></li>
         <li id="2" ></li>
        <li id="3" ></li>
        </ul>

         <div class="drop"> drop here!! </div> 
```

查询

```
 $(".drop").droppable({ 
                drop: function(event, ui) {

      // i need to get dragged id (note:able to  drag multiple ids)

        1,2,3..     

            }       
            }); 
```

请帮帮我！！谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-19T14:16:45.110

正如他们在 jQuery UI [dropable](http://jqueryui.com/demos/droppable/) doc中所说

> 所有回调都接收两个参数：原始浏览器事件和准备好的 ui 对象，请查看下面的此对象的文档（如果您将第二个参数命名为“ui”）：
> 
> ui.draggable - 当前可拖动元素，一个 jQuery 对象。
> ui.helper - 当前可拖动助手，一个 jQuery 对象
> ui.position - 可拖动助手的当前位置 { top: , left: }
> ui.offset - 可拖动助手的当前绝对位置 { top: , left: }

`ui.draggable`是作为 a 删除的元素`jQuery object`。

所以你可以使用`ui.draggable.prop('id')`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-19T14:15:49.530

您可以使用`ui.draggable`来解决可拖动元素。

```
drop: function(event, ui) {
    var id = ui.draggable.attr("id");
} 
```

**演示：http:** [//jsfiddle.net/9RBJG/](http://jsfiddle.net/9RBJG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T12:40:56.367

您可以将删除的节点附加到 div，通过 div 您可以获得所有删除的 id。像下面

```
$(".drop").droppable({
    drop: function(event, ui) {
        var id= ui.draggable.attr("id");
        $("#dropped-divs").append(id); 
    } 
```

# geolocation - Foursquare - 获取用户注册日期

> ID：10665902
> 
> 赞同：0
> 
> 时间：2012-05-19T14:13:07.953
> 
> 标签：geolocation, location, foursquare

有什么方法可以获取用户注册日期和时间（例如签到时的 created_at）？

[也许https://api.foursquare.com/v2/users/self](https://api.foursquare.com/v2/users/self)中有未记录的功能？像添加参数 &field=created_at

试图从第一次签到的“created_at”参数（或从“新手”徽章的 created_at）获取该日期，但许多用户在注册几个月后第一次签到。那么，如何知道谁是“老”呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T23:29:17.167

遗憾的是，我们目前不提供来自 API 的加入日期信息。正如您所指出的，该信息的合理代理是他们第一次入住的日期。

# c - 如果满足条件，每次迭代都可以扩大数组吗？

> ID：10665904
> 
> 赞同：0
> 
> 时间：2012-05-19T14:13:28.077
> 
> 标签：c, malloc

我有这个结构

```
typedef struct
{
    int numberPipes;              // |
    int numberAmpersands;         // &
    int existsBiggerThan;         // >
    int existsLessThan;           // <
    int existsDoubleLargerThan;   // >>

} lineData; 
```

我在我的循环中运行一个`char`数组（char *），以便找到`'&'`and的所有索引`'|'`。

我不知道多少钱`'&'`，`'|'`我会找到的。是否可以从两个`malloc`大小为 1 的数组（使用）开始并在每次迭代后放大它们，只有当我发现其中一个再次出现时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T14:14:38.300

你可以通过调用来做到这一点[`realloc`](http://www.cplusplus.com/reference/clibrary/cstdlib/realloc/)。

出于性能原因，最好不要为每个新元素调用它，而是在 X 元素中调用一次，这样可以减少对`malloc`/的调用次数`realloc`。

# ios - 第一次只发布 iPhone，后来通用

> ID：10665905
> 
> 赞同：1
> 
> 时间：2012-05-19T14:13:51.030
> 
> 标签：ios, universal-binary

我正在开发一个 iOS 应用程序。我想先将它作为 iPhone 专用应用程序发布，然后（几个月后）将其更新为通用应用程序。我必须是同一个 app-id，因为它是一款带有应用内购买的免费游戏。这可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:21:57.690

是的，这根本不是问题，您只需要编写额外的代码来支持 iPad 并将其作为定期更新提交到您的 iPhone 应用程序（然后成为通用应用程序）。

当 iPad 最初问世时，许多 iPhone 应用程序就是这样做的。

# scheme - 将函数列表映射到列表

> ID：10665906
> 
> 赞同：3
> 
> 时间：2012-05-19T14:14:08.700
> 
> 标签：scheme, map-function

这是作业，所以我不想要答案。我只需要朝着正确的方向推动。我需要将多个功能映射到一个列表中。例如：

```
(map-multi (list plus-one square) '(4 5 6)) => (25 36 49) 
```

我可以让它将第一个函数映射到列表的元素，但是，在那之后我很迷茫。此外，由于这是介绍性的，因此我仅限于介绍性功能（`const`、`append`、`car`、`cdr`、`member`等）

```
(define (map-multi f l)  
    (cond  
        ((null? l)  
            l)  
        (else (cons ((car f) (car l))  
            (map-multi f (cdr l)))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:33:23.063

您需要*组合*在`f`参数中收到的函数。为简单起见，假设列表中只有两个函数 - 那么您需要将第一个函数应用于数字列表中的当前元素，然后将第二个函数应用于其结果。如果您可以使用该[`compose`](http://docs.racket-lang.org/reference/procedures.html)过程，请继续使用它并在您的代码中更改此行：

```
((car f) (car l)) ; you're applying only the 1st function! what about the 2nd? 
```

......有了这个：

```
((compose (cadr f) (car f)) (car l))       ; now we're applying both functions 
```

如果你不能使用`compose`，那么用这一行替换同一行：

```
((cadr f) ((car f) (car l)))               ; now we're applying both functions 
```

现在，如果问题更普遍，并且您需要映射具有*两个以上*元素的函数列表，那么再次用以下代码替换代码中的同一行：

```
((compose-multi f) (car l)) 
```

并实现一个辅助函数，通过连续调用来组合并返回列表中的所有函数`compose`。鉴于它是家庭作业，这个留给你作为练习 - 但如果你了解上面的代码如何仅用于两个函数，那么扩展多个函数列表的结果应该很容易：

```
(define (compose-multi flist)      ; procedure for composing a list of functions
  (if (null? flist)                ; if the list is empty then
      <???>                        ; return the identity function
      (<???> (compose-multi <???>) ; else compose the result of recursive call
             <???>)))              ; with the current element in the list 
```

请注意，在处理函数列表中没有元素的情况时，需要使用恒等函数；它的定义非常简单，它只返回作为参数传递的相同值。

另请注意，`compose-multi`返回一个*函数*，即组合列表中所有函数的结果 -`compose`为您执行此操作，但如果您不允许使用它，请记住：

```
(compose x y) 
```

...相当于这个：

```
(lambda (n) (x (y n))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:33:56.750

把它写成两个函数可能更容易。一个是获取函数列表和单个输入，然后依次应用列表中的所有函数。一个功能应用程序的输出将成为下一个功能应用程序的输入；一旦你用完了函数，你就完成了。

另一个函数将简单地将这个辅助函数映射到输入列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T15:11:30.313

要暖和起来，从一个更简单的问题开始。然后推广解决方案。

你会怎么写这个函数？

```
(define (map-single fs x)
  ...)

> (map-single (list double add1) 3)
7 
```

这需要一个`fs`函数值列表作为参数和一个数字，`x`并计算将函数（组合）`fs`应用于`x`?

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T13:07:27.193

这是另一种方法来定义`multi-map`哪个而不是组合使用称为的操作`fold`。由于您只被允许使用介绍性功能，因此这并不是您作业的真正答案。但它会是，如果你写你自己的定义`fold`（它不是很长！）

```
(define (multi-map operations input)
  (fold map input operations))

> (multi-map (list 1+ square)
             '(4 10 8))
$2 = (25 121 81)

> (multi-map (list 1+ square 1+) 
             '(4 10 8))
$3 = (26 122 82) 
```

# python - 迭代列表时的Python unicode问题

> ID：10665909
> 
> 赞同：0
> 
> 时间：2012-05-19T14:14:28.023
> 
> 标签：python, django

我有一个 Excel 工作簿，我想滚动浏览第一列的内容并将每个唯一值写入一个新工作簿，即没有重复项。

这段代码，不检查重复，工作正常：

```
def get_data_from_sheet(sheet_index, start_row, end_row, count):
for row in range(start_row, end_row):
    cell = sheet.cell(row,0)
    count = count+1 
    if row != start_row:
        sheet1.write(count,0,cell.value)
return count 
```

但是，当我尝试添加条件来检查重复项时，没有任何内容写入 Excel 文件：

```
from django.utils.encoding import smart_str

def get_data_from_sheet(sheet_index, start_row, end_row, count):
for row in range(start_row, end_row):
    cell = sheet.cell(row,0)
    count = count+1 
    if row != start_row:
        list.append(smart_str(cell.value))
        if smart_str(cell.value) not in list:
            sheet1.write(count,0,cell.value)
return count 
```

这让我感到困惑，因为列表包含以下值：

![在此处输入图像描述](../Images/19e30ef3b23cc2e8b4088e01301877e6.png)

那么我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:20:15.987

通过调用这个：

```
 list.append(smart_str(cell.value)) 
```

在这之前：

```
 if smart_str(cell.value) not in list: 
```

您确定测试将始终`False`为 ，因为您将值附加到列表中，然后测试它不在列表中。你这里的逻辑有问题。

注意：避免使用内置类型调用你的变量，调用你的列表对象`lst`或其他任何有意义但不要`list`用作变量的东西。

# javascript - Ajax post onbeforeunload 不起作用

> ID：10665912
> 
> 赞同：2
> 
> 时间：2012-05-19T14:14:33.740
> 
> 标签：javascript, jquery, ajax

此代码将鼠标移动坐标存储在数组中，它应该在卸载前发布。但它没有发布。如果我改变

名称：移动
到
名称：“blabla”

有用。意味着问题出在“moves”变量上。我怎样才能让它工作？

```
$(document).ready(function(){

var moves = [];

$("html").mousemove(function(e){
moves.push(e.pageX + "x" + e.pageY) 
});

window.onbeforeunload = function() {

$.ajax({

      type: "POST",
      url: "mailyaz.php",
      data: {
      name: moves;
      }
      });

});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:33:24.407

你可以试试这个。这是我几个月前开发的一个小例子。在这种情况下，坐标存储在文本文件中，但您可以将其替换为 INSERT 到数据库中。

在客户端放这个：

```
 var moves = ""; //Now an String to store the Coords

    $(document).ready(function(){
        //When you moves the mouse inside the Page then 
        //concat the Coords into the String var and add a Line-Brak at the end
        $("html").mousemove(function(e){
            moves += (e.pageX + " x " + e.pageY + "\n");

        });

        //Here the magic happen: bind a function to onbeforeunload event that POST
        //the String to the server
        $(window).bind('beforeunload', function() {

            $.post("server.php",{name:moves});

        }); 

    }); 
```

现在您需要在服务器端有一个名为 server.php 的页面，其中包含

```
 //Capture the String
    $cursorMoves = ($_POST['name']);

    $myFile = "testFile.txt";
    $fh = fopen($myFile, 'w');
    fwrite($fh, $cursorMoves);
    fclose($fh); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:24:57.377

`onbeforeunload`必须返回一个字符串。但是，显示的对话框将阻止 ajax 请求。如果用户接受并离开页面，请求很可能会被中断。

[https://developer.mozilla.org/en/DOM/window.onbeforeunload](https://developer.mozilla.org/en/DOM/window.onbeforeunload)

[http://jsfiddle.net/sVU7K/1](http://jsfiddle.net/sVU7K/1)

# jquery - 悬停时的jQuery动画抖动

> ID：10665918
> 
> 赞同：1
> 
> 时间：2012-05-19T14:15:10.410
> 
> 标签：jquery, random, jquery-animate

我试图在不使用 jQuery UI 的情况下使元素在悬停时摇晃，并且遇到了以下代码，但是我似乎无法弄清楚如何在悬停时触发，这段代码具有随机效果，每次我尝试时都会让我感到困惑扩散它。我试图让他们一次动画一个而不是完全

[http://jsfiddle.net/g6AeL/](http://jsfiddle.net/g6AeL/)

```
 $(function() {
      var interval = 10;
      var duration= 1000;
      var shake= 3;
      var vibrateIndex = 0;
      var selector = $('aside.featured a'); /* Your own container ID*/
        $(selector).click( /* The button ID */

        function(){ 

        vibrateIndex = setInterval(vibrate, interval);
        setTimeout(stopVibration, duration);

        });

        var vibrate = function(){
        $(selector).stop(true,false)
        .css({position: 'relative', 
        left: Math.round(Math.random() * shake) - ((shake + 1) / 2) +'px', 
        top: Math.round(Math.random() * shake) - ((shake + 1) / 2) +'px'
        });
        }

        var stopVibration = function() {
        clearInterval(vibrateIndex);
        $(selector).stop(true,false)
                .css({position: 'static', left: '0px', top: '0px'});
            };

        }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T14:31:07.477

试试这种方式： -

```
$(function() {
  var interval = 10;
  var duration= 1000;
  var shake= 3;
  var vibrateIndex = 0;
  var selector = $('.box'); /* Your own container ID*/
    $(selector).hover( /* The button ID */
        function(){ 
        vibrateIndex = setInterval(vibrate, interval);    
        },
        function(){ 
            clearInterval(vibrateIndex);
            $(selector).stop(true,false)
                .css({position: 'static', left: '0px', top: '0px'});
        }
    );

    var vibrate = function(){
        $(selector).stop(true,false)
        .css({position: 'relative', 
        left: Math.round(Math.random() * shake) - ((shake + 1) / 2) +'px', 
        top: Math.round(Math.random() * shake) - ((shake + 1) / 2) +'px'
        });
    }
}); 
```

参考这个**[演示](http://jsfiddle.net/SivaCharan/g6AeL/8/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-13T14:00:16.190

使用 CSS

```
.item:hover {
  animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both;
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
  perspective: 1000px;
}

@keyframes shake {
  10%, 90% {
    transform: translate3d(-1px, 0, 0);
  }

  20%, 80% {
    transform: translate3d(2px, 0, 0);
  }

  30%, 50%, 70% {
    transform: translate3d(-4px, 0, 0);
  }

  40%, 60% {
    transform: translate3d(4px, 0, 0);
  }
} 
```

# javascript - jQuery UI 可拖动网格

> ID：10665922
> 
> 赞同：2
> 
> 时间：2012-05-19T14:15:38.667
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

好的，我要创建的是：适合表格单元格（.slot div）的可拖动元素。这是我的 jQuery UI 代码的简化版本：

```
<style>

.draggable, .cell  {
    width: 100px; height: 100px;
}

.cell {
    background: #F00;
}

</style>

<script type="text/javascript">

$(function() {
        $( ".draggable" ).draggable({ 
            distance: 20, 
            containment: "#container", 
            snap: ".slot", 
            snapMode: "inner", 
            snapTolerance: 10, 
        });
    });

</script>

<table id=”container”&gt;
<tr>
    <td class=”cell”&gt; <div class=”slot”&gt; <div class=”draggable”&gt;</div> </div> </td>
    <td class=”cell”&gt; <div class=”slot”&gt;</div> </td>
</tr>
<tr>
    <td class=”cell”&gt; <div class=”slot”&gt; <div class=”draggable”&gt;</div> </div> </td>
    <td class=”cell”&gt; <div class=”slot”&gt;</div> </td>
</tr>
<tr>
    <td class=”cell”&gt; <div class=”slot”&gt;</div> </td>
    <td class=”cell”&gt; <div class=”slot”&gt;</div> </td>
</tr>
</table> 
```

从现在开始，我可以在单元格（.slot）周围移动它们，但我无法实现两件事：

1.  仅将可拖动元素放入“.slot”中（删除放弃单元格中拖动元素的选项）。基本上，当您放下拖动的元素时，它会进入最近的单元格或覆盖最多的单元格。
2.  限制将两个可拖动对象放在一个单元格 (.slot) 中。

任何建议或帮助表示赞赏！

在此先感谢，乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:43:20.743

尝试使用[jQuery UI Sortable](http://jqueryui.com/demos/sortable/)而不是[Draggable](http://jqueryui.com/demos/draggable/)。您可能需要在您的情况下使用[可排序连接列表](http://jqueryui.com/demos/sortable/#connect-lists)。

# python - 如何使用 Python 对大文件进行排序？

> ID：10665925
> 
> 赞同：4
> 
> 时间：2012-05-19T14:15:58.950
> 
> 标签：python, sorting

我在 activestate.com 上找到了一些很有前途的代码来对大文件进行排序。我正在尝试在 Ubuntu 10.04 上的默认 Python 2.6.5 解释器上运行它。当我尝试在一个小测试文件上运行它时，我得到下面的错误跟踪。我在 activestate.com 上寻求帮助，但这个帖子已经沉寂了 18 个月。这里有没有人看到一个明显的解决方案？

谢谢。

```
## {{{ http://code.activestate.com/recipes/576755/ (r3)
# based on Recipe 466302: Sorting big files the Python 2.4 way
# by Nicolas Lehuen

import os
from tempfile import gettempdir
from itertools import islice, cycle
from collections import namedtuple
import heapq

Keyed = namedtuple("Keyed", ["key", "obj"])

def merge(key=None, *iterables):
    # based on code posted by Scott David Daniels in c.l.p.
    # http://groups.google.com/group/comp.lang.python/msg/484f01f1ea3c832d

    if key is None:
        keyed_iterables = iterables
    else:
        keyed_iterables = [(Keyed(key(obj), obj) for obj in iterable)
                            for iterable in iterables]

    for element in heapq.merge(*keyed_iterables):
        yield element.obj

def batch_sort(input, output, key=None, buffer_size=32000, tempdirs=None):
    if tempdirs is None:
        tempdirs = []
    if not tempdirs:
        tempdirs.append(gettempdir())

    chunks = []
    try:
        with open(input,'rb',64*1024) as input_file:
            input_iterator = iter(input_file)
            for tempdir in cycle(tempdirs):
                current_chunk = list(islice(input_iterator,buffer_size))
                if not current_chunk:
                    break
                current_chunk.sort(key=key)
                output_chunk = open(os.path.join(tempdir,'%06i'%len(chunks)),'w+b',64*1024)
                chunks.append(output_chunk)
                output_chunk.writelines(current_chunk)
                output_chunk.flush()
                output_chunk.seek(0)
        with open(output,'wb',64*1024) as output_file:
            output_file.writelines(merge(key, *chunks))
    finally:
        for chunk in chunks:
            try:
                chunk.close()
                os.remove(chunk.name)
            except Exception:
                pass 
```

错误跟踪：

```
Traceback (most recent call last):
  File "./batch_sort.py", line 108, in <module>
    batch_sort(args[0],args[1],options.key,options.buffer_size,options.tempdirs)
  File "./batch_sort.py", line 54, in batch_sort
    output_file.writelines(merge(key, *chunks))
  File "./batch_sort.py", line 30, in merge
    yield element.obj
AttributeError: 'str' object has no attribute 'obj' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:38:40.847

合并代码不正确。如果您不提供键，则每个元素都是字符串而不是键控元组。

试试这个：

```
def merge(key=None, *iterables):
    # based on code posted by Scott David Daniels in c.l.p.
    # http://groups.google.com/group/comp.lang.python/msg/484f01f1ea3c832d

    if key is None:
        for element in heapq.merge(*iterables):
            yield element
    else:
        keyed_iterables = [(Keyed(key(obj), obj) for obj in iterable)
                        for iterable in iterables]
        for element in heapq.merge(*keyed_iterables):
            yield element.obj 
```

# python - 如何从文件中读取八位字节字符串

> ID：10665928
> 
> 赞同：-1
> 
> 时间：2012-05-19T14:16:03.750
> 
> 标签：python, string

我在文件中有一个 base64 编码的八位字节字符串：

> \x7D\x1E\x40\xEE\x62\x12\xE1\x9C\xC9\x28\x63\x95\xB6\x0C\xCB\xF7\xD2\x2F\x6F\xA8\xA1\xF5\x21\x4E\x7A \x4D\x79\x38\x78\xBF\x1B\x2B\x73\x28\x57\x5C\x8F\xB2\x53\xC0\x4C\x57\x6C\x77\xCF\x88\xA3\xAA\x7D\x52 \xEA\x2F\xCD\xE9\x29\x27\xD9\x0F\xA1\xF4\x12\xDB\xBF\x65\x09\x4C\x29\xE9\xC9\xB5\x0F\x3C\xE5\xEC\x82 \xBC\x42\x3C\xBB\xE2\xFF\x7B\x7B\xB1\x32\x3F\x4D\xC5\x14\x66\x69\x98\x0C\x43\xB1\xE2\x9D\x7F\x63\xEF \xF5\xB1\xEA\xA0\xDC\x58\x8B\x1F\x9E\xE1\x12\x14\xA3\xD2\x73\x27\x73\xE5\xC8\x2B\xBD\x0A\x0B\xE6\x05 \x42\x36\x21

我想用 Python 阅读它。但是 Python 自动为我转义了反斜杠，因此我得到了以下字符串：

> \\x7D\\x1E\\x40\\xEE\\x62\\x12\\xE1\\x9C\\xC9\\x28\\x63\\x95\\xB6\\x0C\\xCB\\xF7\\ xD2\\x2F\\x6F\\xA8\\xA1\\xF5\\x21\\x4E\\x7A\\x4D\\x79\\x38\\x78\\xBF\\x1B\\x2B\\x73\ \x28\\x57\\x5C\\x8F\\xB2\\x53\\xC0\\x4C\\x57\\x6C\\x77\\xCF\\x88\\xA3\\xAA\\x7D\\x52 \\xEA\\x2F\\xCD\\xE9\\x29\\x27\\xD9\\x0F\\xA1\\xF4\\x12\\xDB\\xBF\\x65\\x09\\x4C\\ x29\\xE9\\xC9\\xB5\\x0F\\x3C\\xE5\\xEC\\x82\\xBC\\x42\\x3C\\xBB\\xE2\\xFF\\x7B\\x7B\ \xB1\\x32\\x3F\\x4D\\xC5\\x14\\x66\\x69\\x98\\x0C\\x43\\xB1\\xE2\\x9D\\x7F\\x63\\xEF \\xF5\\xB1\\xEA\\xA0\\xDC\\x58\\x8B\\x1F\\x9E\\xE1\\x12\\x14\\xA3\\xD2\\x73\\x27\\ x73\\xE5\\xC8\\x2B\\xBD\\x0A\\x0B\\xE6\\x05\\x42\\x36\\x21

和...

```
>>> repr(sig_bytes)
"'\\\\x7D\\\\x1E\\\\x40\\\\xEE\\\\x62\\\\x12...'"
>>> sig_bytes.replace("\\x","\x")
ValueError: invalid \x escape 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:29:38.953

您可能会在`repr()`某处看到您的字符串版本，这并不意味着您的字符串加载不正确：

```
>>> s = "\x7D\x1E\x40\xEE"
>>> s
'}\x1e@\xee'
>>> repr(s)
"'}\\x1e@\\xee'" 
```

**编辑：**

如果您的字符串已经被双重转义并且您想要删除它们，请使用`replace`，并且不要忘记`\`在参数中转义 the ：

```
sig_bytes.replace("\\\\x","\\x") 
```

**编辑2：**

OP 以某种方式将 repr 字符串加载到其字符串变量中，而不是正确的字符串数据。

```
s = "\\x7D\\x1E\\x40\\xEE" 
```

让我们将其重新解释为 OP 应该从一开始就加载的正确形式。为此，我们将通过用引号括起来来构造字符串的完整字符串 repr，然后`ast`向其询问模块`literal_eval`：

```
import ast
s = "\\x7D\\x1E\\x40\\xEE"
s = '"'+s+'"'
s = ast.literal_eval(s)
>>> s
'}\x1e@\xee' 
```

# mysql - 在特定日期范围之间选择行

> ID：10665930
> 
> 赞同：0
> 
> 时间：2012-05-19T14:16:33.863
> 
> 标签：mysql, sql

> **可能重复：**
> [如何查看两个日期时间之间的可用房间](https://stackoverflow.com/questions/10511205/how-to-look-which-room-is-available-between-2-datetimes)

我有这行数据

```
|room_id|checkin     |checkout  |
+       +            +          +
|1      |2012-05-02  |2012-05-09| 
```

但我不想选择两个日期之间的这一行

我有这个查询

```
SELECT * 
FROM `reservations`  `res` 
WHERE (2012-05-03 
   NOT BETWEEN res.expected_checkin_date AND res.expected_checkout_date) 
 AND COALESCE(2012-05-08 
   NOT BETWEEN res.expected_checkin_date AND res.expected_checkout_date) 
```

但是，我仍然得到不应该出现的这一行。实际上，我的想法是选择不在这两个日期之间的所有行。任何想法？

## 更新 1

基本上，有人试图从 5/3 到 5/8 预订房间，我想查看符合该标准的房间列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:35:27.630

不知道是什么类型`checkin`，`checkout`无论是字符串还是日期/日期时间，问题似乎与您的日期常量没有用单引号分隔（即它们不应该表示为字符串）有关。 )

因此，只需尝试以下操作而不是您的查询：

```
SELECT * 
FROM `reservations`  `res` 
WHERE ('2012-05-03' 
   NOT BETWEEN res.expected_checkin_date AND res.expected_checkout_date) 
 AND COALESCE('2012-05-08' 
   NOT BETWEEN res.expected_checkin_date AND res.expected_checkout_date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:38:06.747

我怀疑你想要：

```
SELECT * 
FROM reservations AS res 
WHERE res.expected_checkout_date <= '2012-05-02'
   OR '2012-05-09' <= res.expected_checkin_date 
```

# javascript - 删除不支持的 unicode 字符，否则显示为正方形

> ID：10665933
> 
> 赞同：0
> 
> 时间：2012-05-19T14:16:49.510
> 
> 标签：javascript, unicode, special-characters

我正在搞砸一些 javascript，它们会在文档的某处插入一个随机的杂项 unicode 符号。（[像这些符号](http://www.alanwood.net/unicode/miscellaneous_symbols.html)）

但是，我想确保我只插入生成的字符，如果该字符不被打印为那些“੟”方块之一。

到目前为止，我正在生成 2600 到 2699 之间的随机数。但我想确保它们是有效的而不是正方形。没关系，我没有生成十六进制代码，只是整数，我缺少哪些符号并不重要。

`String.fromCharCode(2600+(Math.floor(Math.random()*70)));`

多次调用它会给我：“ਖ਼੕ੁ੡਴਱ੜਯ੉”

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:40:20.367

有两个基本的东西可能显示为这样的正方形（或菱形中的问号，或完全不同的东西，例如正方形中的代码点值）：

1.  被 U+FFFD 替换字符替换为显示的非法字符
2.  在所选字体（或其他可能被替换的字体）中没有字形的字符。

对于第一种情况，您可以尝试丢弃无效的代码点（非字符），但对于第二种情况，您几乎没有选择，因为这完全取决于字体、浏览器、其他安装的字体、用于渲染的技术文字等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T09:52:39.870

仅仅因为是星期天，我破解了一个小 JS，用于测试代码点在画布上绘制时是否看起来像 0xFFFF 字符。这只是比较像素的问题。因此，如果您的字体（在示例代码中我使用的任何默认系统字体）没有代码点，那么它（希望）就像 0xFFFF 一样被绘制。

这可以改进，但作为一个星期天的黑客，它是相当令人满意的。你可以在 GitHub 上查看 [代码。](https://github.com/dda/doIhaveThisCodepoint)

# ruby-on-rails-3 - 如何使用 rails_admin 等将我自己的 CMS 构建到 Rails 3.2 应用程序中？

> ID：10665935
> 
> 赞同：3
> 
> 时间：2012-05-19T14:17:23.957
> 
> 标签：ruby-on-rails-3, content-management-system, admin

我为客户建立了一个网站，但他们希望能够对网页的内容进行定制，即图片和文本。我已经尝试过，尝试过，但我无法获得像 RefineryCMS 这样的插件来在我的应用程序中工作。

我在某处读到有人使用 rails_admin、devise、ckeditor、kaminari 等制作了自己的 CMS。但是我怎样才能制作自己的 CMS/管理区域，以便客户可以在不弄乱代码或不必学习的情况下定制内容任何代码？

我有 Ruby 1.9.2 和 Rails 3.2.2。有谁知道我该怎么做，让我自己的 CMS 插入这个现有的应用程序？是否有某种教程或任何人都可以向我解释这个？提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T12:30:24.147

Rails_admin 非常好，但对于某些人的需求来说往往太多了。开发自己的管理部分非常容易。

**如何使用 Rails 3.2 创建自己的 RESTful 管理部分**

*使用 CRUD 为所有模型创建您自己的管理部分，包括使用命名空间的嵌套资源。*

示例 - 博客的管理部分 - 模型：帖子、评论（帖子的嵌套资源）

我假设您已经开发了基本的博客应用程序。请参阅[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)了解如何设置所有这些。

第一步 - 创建管理部分和控制器

```
rails g controller admin/admin 
```

这将生成一个空控制器，我们所有的 Admin 控制器都将从该控制器继承。它还将创建可以充当仪表板的views/admin/admin/index.html.erb。

创建管理控制器

```
rails g controller admin/posts
rails g controller admin/comments 
```

这将在 admin 命名空间中生成一个空的 Admin::PostsController 和一个 Admin::CommentsController

第 2 步 - 为管理控制器添加命名空间转到 config/routes.rb 并添加以下内容

```
 namespace :admin do
      root to: "admin#index"
      resources :posts do
        resources :comments, :only => [:create, :destroy]
      end
    end 
```

第 3 步 - 编辑管理视图和控制器文件以使用管理命名空间现在我们已经生成了所有内容，我们只需要使其与管理控制器而不是前端一起使用。

更改所有 Admin::*Controllers 的继承。

```
class Admin::PostsController < ApplicationController => class Admin::PostsController < Admin::AdminController 
```

和

```
class Admin::CommentsController < ApplicationController => class Admin::CommentsController < Admin::AdminController 
```

将所有模板从 app/views/posts 复制到 app/views/admin/posts 将所有模板从 app/views/comments 复制到 app/views/admin/comments 将所有函数从 posts_controller.rb 复制到 admin/posts_controller.rb 复制所有函数从 comments_controller.rb 到 admin/comments_controller.rb

为您希望管理 CRUD 控制的每个模型添加指向 views/admin/admin/index.html.erb 的链接。比如发帖。

```
<%= link_to "Posts", admin_posts_path %> 
```

编辑 admin/posts_controller.rb。将 3 个 redirect_to 调用更改为使用 admin 命名空间。创建和更新方法：

```
redirect_to @post => redirect_to [:admin, @post] 
```

销毁方法：

```
redirect_to posts_url => redirect_to admin_posts_url 
```

在所有模板中进行类似的更改，以便它们在管理命名空间中使用。您需要进行以下更改：

发布/_form.html.erb：

```
form_for(@post) => form_for([:admin, @post]) 
```

post/ edit.html.erb, index.html.erb, new.html.erb & show.html.erb 查找以下所有实例：

```
<%= link_to ‘Show’, @post %> => <%= link_to ‘Show’, [:admin, @post] %>

posts_path => admin_posts_path

edit_post_path(@post) => edit_admin_post_path(@post)

new_post_path => new_admin_post_path

<%= render "comments/form" %> =>  <%= render "admin/comments/form" %> 
```

评论/_comment.html.erb

```
<%= link_to 'Destroy Comment', [comment.post, comment],... => <%= link_to 'Destroy Comment', [:admin, comment.post, comment],... 
```

评论/ _form.html.erb 更改：

```
<%= form_for([@post, @post.comments.build]) do |f| %>=> <%= form_for([:admin, @post, @post.comments.build]) do |f| %> 
```

就这样。现在，您将拥有一个 /admin 仪表板，其中包含指向 /admin/posts 和可用 CRUD 操作的链接。

向[http://icebergist.com/posts/restful-admin-namespaced-controller-using-scaffolding](http://icebergist.com/posts/restful-admin-namespaced-controller-using-scaffolding)大声疾呼。他从 2008 年开始的解决方案仍然非常重要，但是，与这个答案所解决的 Rails 3.2 显然存在一些差异；包括嵌套资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:19:35.817

所以你想要 rails_admin ...

安装宝石

```
$ gem 'rails_admin' 
```

做一个

```
$ bundle install 
```

然后生成内容

```
$ rails generate rails_admin:install 
```

然后

```
$ rails server 
```

现在你可以去你的管理面板 domain.com/admin 也许你应该浏览一下[https://github.com/sferik/rails_admin](https://github.com/sferik/rails_admin)。如果您有比以前更多的问题，您可能应该首先考虑学习轨道。Rails 并不那么容易使用，因为上传 wordpress.zip 的内容放入一些数据库设置并完成。

# maven - Maven - 如何从一个项目构建多个独立的 Maven 项目

> ID：10665936
> 
> 赞同：29
> 
> 时间：2012-05-19T14:17:25.237
> 
> 标签：maven, configuration, build, compilation, build-process

我有 3 个 Maven 项目

*   网页组件
*   数据组件
*   服务组件

当我构建每个项目时，我必须进入每个文件夹并在每个项目上运行 mvn clean install。

我研究了多模块项目，我看到的大部分资源表明我必须改变现有项目的结构。

是否有可能有一个新项目来构建每个独立项目，而我不必对现有项目中的任何内容（包括它们各自的 pom 文件）进行任何更改？

我可能可以通过编写一个构建每个项目的简单批处理文件来实现这一点，但是可以使用 Maven 吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-19T15:28:57.737

您正在寻找[没有继承的 Maven 聚合](http://maven.apache.org/pom.html#Aggregation)。如所引用的页面所示，您只需创建一个新的 POM，其包装为“pom”并且具有“模块”列表。模块是另一个 Maven 项目的相对路径：

```
<project>
  ...
  <packaging>pom</packaging>
  ...
  <modules>
    <module>foo</module> <!-- module is in a subdirectory of this project -->
    <module>../bar</module> <!-- module is a sibling to this project -->
    <module>../../../other-projects/baz</module> <!-- somewhere else entirely -->
  </modules>
</project> 
```

构建这样一个 pom（称为“聚合器”）时的默认行为是构建所有模块，就像您在每个模块目录中使用相同的参数执行 Maven 一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T15:05:43.360

如果您在将它们命名为模块（模块名称 = 子目录名称）的三个项目上方的目录中添加聚合器项目，它将构建它们而无需对它们自己的 POM 进行任何更改。他们不需要将其作为父母来引用。

# apache-flex - 为什么 Flex 移动组件会对其内容进行两次布局？

> ID：10665937
> 
> 赞同：1
> 
> 时间：2012-05-19T14:17:27.373
> 
> 标签：apache-flex, air, adobe, flex4.5, flex-spark

我在移动项目中使用 IconItemRenderer。我在类中放置了一些日志记录，并注意到在创建视图时，每个项目都会调用 layoutContents 两次。

我还注意到，show 事件也会为视图触发两次。

这显然是低效的。我不认为这是我做过的任何事情（我小心不要修改诸如 creationComplete 和 viewActivate 之类的事件中的属性），但我可以防止重复工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:12:14.887

将为 dataProvider 的每个可见元素创建一次 itemRenderer。因此，请确保您不会混淆不同的 dataProvider 实例。听起来你已经涵盖了这一点。

layoutContents() 方法是从移动 itemRenderers 的 updateDisplayList() 方法中调用的。updateDisplayList() 在组件的“生命周期”中可能会被多次调用。您必须逐步完成整个组件生命周期才能准确了解发生了什么。 [更多信息在这里](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf68641-7ff0.html)。

您必须弄清楚是什么使显示列表无效，从而迫使 updateDisplayList() 再次执行。

这是否会在应用程序中引入低效率是有待解释的。这取决于 updateDisplayList()/layoutContents() 方法中发生了什么。

# html - 是否有任何客户端工具可让您根据其邮政编码以 HTML 表单自动填充某人的城市和州？

> ID：10665938
> 
> 赞同：4
> 
> 时间：2012-05-19T14:17:28.247
> 
> 标签：html, forms, autofill, zipcode

是否有任何客户端工具可让您根据他们的邮政编码以 HTML 表单自动填充某人的城市和州

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:22:37.430

Ziptastic 将解决您的问题 [http://daspecster.github.com/ziptastic/](http://daspecster.github.com/ziptastic/)

例如，zip.elevenbasetwo.com/?zip=10001 响应为 {"country": "US", "state": "NY", "city": "NEW YORK"}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T13:43:38.767

这是执行此操作的 Javascript 代码 - [http://zipcodedistanceapi.redline13.com/Examples](http://zipcodedistanceapi.redline13.com/Examples)

# java - 整数是字符串 - 那怎么可能？

> ID：10665939
> 
> 赞同：1
> 
> 时间：2012-05-19T14:17:42.840
> 
> 标签：java

发生了可怕的错误。

我有

```
ArrayList<Integer> activitiesToDelete; 
```

我需要准备要传递给 Spring jdbcTemplate 的对象数组。然而，由于某种原因，ArrayList 中的元素被视为 String，因此在 jdbcTemplate 的执行点中断，抱怨它无法从 String 转换为 int。然后我尝试在循环内进行转换，看看是否有帮助：-\ 而且我显然不能做 Integer.parseInt，因为 IDE 将它正确地视为 Integer。每当我分配 Integer a = activitiesToDelete.get(i); 它给了我：

```
java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer 
```

int a = 相同...怎么可能？

```
 Object [] objectList = new Object [activitiesToDelete.size()];

    for (int i = 0; i < activitiesToDelete.size(); i++) {

    Integer a = activitiesToDelete.get(i);

        logger.info(String.valueOf(activitiesToDelete.get(i)));

        objectList[i] = activitiesToDelete.get(i).intValue();
}

    jdbcTemplate.update(sql, objectList); 
```

我在这里缺少什么？

**更新：罪魁祸首**

```
 @RequestMapping(value="/activities/delete", method = RequestMethod.POST) public String deleteActivities(@RequestParam("activityId") ArrayList <Integer> activitiesToDelete) 
```

**这是一个与 Spring MVC 相关的片段，它从表单中填充，似乎 Spring 无法向 ArrayList 添加正确的类型。**

任何想知道的人，要么使用 int[] 或 HttpServlet 方法（虽然是额外的代码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:29:14.230

我认为问题是

```
objectList[i] = activitiesToDelete.get(i).intValue(); 
```

intValue() 将 Integer 转换为 int。int 不是 Object，所以它必须把它变成一个 Object 来存储它，我认为它选择了 toString。尝试

```
objectList[i] = activitiesToDelete.get(i); 
```

# c# - 神经网络缩放输入和去缩放输出

> ID：10665940
> 
> 赞同：0
> 
> 时间：2012-05-19T14:17:58.377
> 
> 标签：c#, neural-network, encog

我有用于缩放 NN 的输入和去缩放输出的方法，这些方法是我很久以前在某处发现的，但我不确定它们是否有效，我使用 NN 的 encog 库：

```
public static double Scale(double X)
        {
            double fieldlow = 0;
            double fieldhigh = 1;
            double min = 1;
            double max = 2;
            //double max = 10000;
            double temp = ((X - min) / (max - min)) * (fieldhigh - fieldlow) + fieldlow;
            return temp;
        }
        public static double DeScale(double X)
        {
            double fieldlow = 0;
            double fieldhigh = 1;
            double min = 1;
            double max = 2;
            //double max = 10000;
            double temp = ((min - max) * X - fieldhigh * min + max * fieldlow) / (fieldlow - fieldhigh);
            return temp;
        } 
```

假设 fieldlow 和 fieldhigh 是 NN 输入和输出的范围（我不确定，但看起来像 ActivationTANH 的 0-1 范围），最小值应该是数据中的最小值，而最大值应该是数据中的最大值。我很好奇，如果您获得的新数据的值高于您设置的最大值怎么办？你必须重写这个方法并从头开始训练？

如果这是错误的，请指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:44:14.430

如果我没记错的话，缩放不仅适用于训练数据特征范围，还适用于所有可能的数据特征范围。这意味着如果训练集中的特征具有最小值 - 25 和最大值 - 45，但实际上可以从 1 到 1000，则缩放执行 xMin = 1, xMax = 1000 所以值不能改变

尝试使用这个公式：scaledX = (X - minX)/(maxX - minX)，其中 minX\maxX - 每个输入特征的最小值和最大值

# tcl - Tcl 二进制循环。二进制增量

> ID：10665943
> 
> 赞同：2
> 
> 时间：2012-05-19T14:18:18.370
> 
> 标签：tcl, verilog, modelsim

我正在尝试为我的解码器模块（modelsim 中的 verilog）编写一个 tcl 脚本，我需要将 'din' 输入值从 000 循环到 111
这就是我现在想出的。

```
vsim work.decode_shift
add wave -noupdate -format Logic -radix binary  /decode_shift/din
add wave -noupdate -format Logic -radix binary  /decode_shift/dout
for { set i 0 } { $i==0111 } { incr i } {
    force din $i
    run 100
}
run @500ns 
```

由于某些我不知道如何绕过的类型问题，它不起作用。我在做什么错，在 tcl 中增加二进制数字的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:40:25.103

使用 Tcl，您不会增加二进制数字。您将数字格式化为二进制。在 8.6 之前，您可以使用`binary format`和的组合`binary scan`来进行转换，如下所示：

```
vsim work.decode_shift
add wave -noupdate -format Logic -radix binary  /decode_shift/din
add wave -noupdate -format Logic -radix binary  /decode_shift/dout
for { set i 0 } { $i<=7 } { incr i } {      # Need non-binary literal
    # Convert to 8 binary digits, store result in “i_bin” variable
    binary scan [binary format c $i] B8 i_bin

    force din $i_bin; # Assume takes 8 bits; [string range] to trim otherwise
    run 100
}
run @500ns 
```

如果你有 8.6，你可以这样做：

```
vsim work.decode_shift
add wave -noupdate -format Logic -radix binary  /decode_shift/din
add wave -noupdate -format Logic -radix binary  /decode_shift/dout
for { set i 0 } { $i<=0b111 } { incr i } {   # Binary literal...
    force din [format %04b $i]; # width 4 field, zero padded on left
    run 100
}
run @500ns 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:42:25.177

不知道这是否会帮助您[http://codepad.org/YX4nfMIS](http://codepad.org/YX4nfMIS)（转载如下） 它以二进制表示数字的字符串的升序列表。但这可能不是 Verilog 想要您的数据的方式。

```
set l { "000" "001" "010" "011" "100" "101" "110" "111"}
for { set i 0} { $i<8 } { incr i } {
 puts [lindex $l $i]
} 
```

或者正如多纳尔指出的那样

```
set l { "000" "001" "010" "011" "100" "101" "110" "111"}
foreach i $l {
  puts $i
} 
```

# regex - 正则表达式将“aaa.bbb.ccc”替换为“aaa/bbb/ccc.htm”

> ID：10665947
> 
> 赞同：0
> 
> 时间：2012-05-19T14:18:51.297
> 
> 标签：regex, replace, match

原文：

```
<tag keywords="testpage.page11" index="0">Good</tag> 
```

目标文本：

```
<a href="testpage/page11.htm">Good</a> 
```

我该如何编写正则表达式？

到目前为止我所拥有的：

匹配表达式：`<tag keywords=\"(.+?)\" index="\d+">(.*?)</tag>`

替换表达式：`<a href="\1.htm">\2</a>`

但问题是，我该如何替换`"testpage.page11"`to `"testpage/page11.htm"`？

我应该如何更新我的表达方式？

`"aaa.bbb.ccc"`部分也可能是`"abc.asd.dff.sssdf.sdfafda"`或，项的`"a.b"`长度或项的数量不固定。

另一件事是我必须在一个正则表达式中完成所有替换操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:31:43.980

您要匹配的 Rexex 是这样的：

```
/<tag keywords="([^"]+)" index="\d+">([^<]+)</tag>/ 
```

这显然不能在*单个*替换中替换，但您可以使用类似的函数`preg_replace_callback`在一个函数调用中执行此操作。

在这里，我提供了一个 PHP 代码来替换您的原始文本：

```
$str = '<tag keywords="foo.bar.testpage.page11" index="0">Good</tag>';
$link = preg_replace_callback('#<tag keywords="([^"]+)" index="\d+">([^<]+)</tag>#i',
  create_function('$m',
    'return "<a href=\"" . str_replace(".", "/", $m[1]) . ".htm\">".$m[2]."</a>";'),
           $str);
echo $link . "\n"; 
```

### 输出

```
<a href="foo/bar/testpage/page11.htm">Good</a> 
```

# c# - 对成对的字符进行排序以形成它们的路径/链？

> ID：10665950
> 
> 赞同：0
> 
> 时间：2012-05-19T14:19:33.550
> 
> 标签：c#, sorting

我正在为我朋友的应用程序创建一个方法，该方法返回车辆的路线。例如，Bus1 有 A-to-B、B-to-C、C-to-D 的路线，最后还有一对，其末端是单独的，就像第一对的 A 一样。

由于每辆车的路线顺序不同，查询返回的结果被打乱了，所以我尝试编写一个方法来对这些组合进行排序以形成路径。像一条链子。我在这里使用字符作为位置和字符串作为路线。

```
 public void MakePath(ref List<string> routes)
    {
        for (int i = 0; i < routes.Count - 1; i++)
        {
            for (int j = 0; j < routes.Count; j++)
            {
                if (routes[i][1] == routes[j][0])
                {
                    var temp = routes[i + 1];
                    routes[i + 1] = routes[j];
                    routes[j] = temp;
                    j = routes.Count;
                }
            }
        }
    } 
```

它在某些情况下可以正常工作，也就是说，如果最后一对已经在正确的位置。否则它不起作用，例如

"CD" "AB" "BC"

不适用于此。我知道它不起作用，因为第一个字符串的第二个字符是单独的，因为它应该是最后一对，所以我应该在这种方法中做些什么来照顾最后一对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:33:53.377

您必须首先扫描列表并找到路线的终点站。在其最简单的形式中，这是路线大小的二次算法。

之后，您可以将路线的终端段放在正确的位置。之后运行你的算法来“熨烫”中间的东西。

```
public void MakePath(ref List<string> routes)
{
    bool is_first, is_last;
    for (int i = 0; i < routes.Count - 1; i++)
    {
        is_first = true;
        is_last = true;
        for (int j = 0; j < routes.Count; j++)
        {
             if (routes[i][1] == routes[j][0]){
                is_last = false;
                break;
             }
             if (routes[i][0] == routes[j][1]){
                is_start = false;
                break;
             }
        }
        if (is_first) {
             var temp = routes[i];
             routes[i] = routes[0];
             routes[0] = temp;
        }
        if (is_last) {
             var temp = routes[i];
             routes[i] = routes[routes.Count];
             routes[routes.Count] = temp;
        }
     }           
    for (int i = 0; i < routes.Count - 1; i++)
    {
        for (int j = 0; j < routes.Count; j++)
        {
            if (routes[i][1] == routes[j][0])
            {
                var temp = routes[i + 1];
                routes[i + 1] = routes[j];
                routes[j] = temp;
                j = routes.Count;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:07:00.877

您只需在运行前对列表进行排序，就可以确保从正确的路线开始：

```
public void MakePath(ref List<string> routes)
        {
            routes.Sort(); //just insert here
            for (int i = 0; i < routes.Count - 1; i++)
            {
                for (int j = 0; j < routes.Count; j++)
                {
                    if (routes[i][1] == routes[j][0])
                    {
                        var temp = routes[i + 1];
                        routes[i + 1] = routes[j];
                        routes[j] = temp;
                        continue;
                    }
                }
            }
        } 
```

# for-loop - awk for-in 循环给出意外的输出？

> ID：10665956
> 
> 赞同：2
> 
> 时间：2012-05-19T14:19:53.840
> 
> 标签：for-loop, awk, for-in-loop

我目前正在`awk`bash 脚本中编写脚本。我的一个论点需要拆分和循环。例如：对于一个参数，`1234`我需要按写入的顺序循环遍历每个数字。所以，`2413`不等价。

我曾经`split`创建一个数组，然后创建一个`for-in`循环来循环遍历数组。我以为它会按顺序循环，但事实并非如此。

我的代码如下：

```
split(cols,toShow,"")
for (c in toShow)
    printf "%s\n",c 
```

`cols`使用选项传递给`awk`命令`-v`并给出以下输出：

```
4
1
2
3 
```

在测试了几次之后，使用不同长度的参数并使用数字和字母，`for`循环似乎从数组的第 4 个元素开始，按顺序循环到最后，然后循环遍历元素 1 到 3，而不是预期从元素 1 开始并循环到结束。

无论如何要改变行为还是我做错了什么？

**编辑**为了澄清，我`gawk`在 xubuntu 11.10 中使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T16:02:45.920

awk 中的数组不是（必须）按原始源的顺序存储的。

此外，使用数字作为输入会混淆问题

这是一个可以说明问题的解决方案

```
awk 'END{cols="ABCD";n=split(cols,toShow,"")
for (i=1;i<=n;i++)
    printf "%s\n",toShow[i] }' /dev/null 
```

** 输出**

```
A
B
C
D 
```

要了解我的意思，请将您的代码编辑为 ABCD，您仍然会像`for c in toShow`打印键而不是 assoc 数组的值一样输出数字输出。

如果您在我的示例中将 ABCD 编辑为 1234，您将获得所需的输出。

我希望这有帮助。

# java - Java，Android - 在 csv 导出中处理逗号

> ID：10665959
> 
> 赞同：0
> 
> 时间：2012-05-19T14:20:01.917
> 
> 标签：java, android, csv, comma

我正在将表导出到 .csv 文件，但字段中的逗号通常存在问题。

这就是我填充 .csv 文件的方式：

```
outCSV.write(todoItemsID.get(a) + "," + todoItemsGROUP.get(a)  + "," + todoItemsNAME.get(a) + "," 
+ todoItemsFINISHED.get(a) + "," + todoItemsNOTES.get(a) + "," + todoItemsQUANTITY.get(a) + "\n"); 
```

如果在 todoItemsNotes.get(a) 字段中有逗号或换行符怎么办？我应该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:25:49.640

使用双引号将该字符串括起来。它通常适用于大多数读取 CSV 文件的工具。

```
outCSV.write(todoItemsID.get(a) + "," + todoItemsGROUP.get(a)  + "," + todoItemsNAME.get(a) + "," 
+ todoItemsFINISHED.get(a) + ",\"" + todoItemsNOTES.get(a) + "\"," + todoItemsQUANTITY.get(a) + "\n"); 
```

# ios - 如果执行，如何使用 MDM 锁定 iPhone 终端？

> ID：10665966
> 
> 赞同：1
> 
> 时间：2012-05-19T14:20:37.057
> 
> 标签：ios, apple-push-notifications, mdm

我正在使用 Apple 的“APNs”和“MDM”。应用程序列表也可以使用“MDM”从 iOS 终端获取。但是，只能锁定设备。不显示错误消息。成功的有效载荷。PUT 被执行到服务器。但是，iPhone 终端可以正常使用，无需锁定。MDM 协议参考的“DeviceLock”正在用于有效负载。如果执行，如何使用 MDM 锁定 iPhone 终端？请告诉我。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:25:58.473

发送“DeviceLock”命令时检查设备日志。

当您从 MDM 服务器发送“DeviceLock”命令时，iPhone 屏幕有什么变化？对我来说，发送“DeviceLock”命令时 iPhone 屏幕被锁定，我可以再次滑动手指以解锁设备。

# objective-c - 如何深度复制 NSIndexPath？

> ID：10665968
> 
> 赞同：2
> 
> 时间：2012-05-19T14:21:12.213
> 
> 标签：objective-c, nsindexpath

我想保存一个 NSIndexPath 对象的副本以供以后使用。然后，我想覆盖原来的对象。由于`copy`只增加对象的保留计数，如何制作原始索引路径的深层副本？

```
...
NSIndexPath *originalIndexPath = [tappedIndexPath copy]; // need to make a deep copy here
tappedIndexPath = ...;
...
// need the original index path here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T14:24:53.133

无论如何`NSIndexPath`，它是不可变的，副本是深还是浅都没有关系。事实上，深拷贝会浪费内存。

关于您的示例：对于您想要做的事情，您根本不需要复制索引路径。当您将另一个索引路径对象分配给`tappedIndexPath`（在第二行中）时，这根本不会影响`originalIndexPath`。在您的代码段末尾，`originalIndexPath`仍将指向与以前完全相同的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T14:29:40.403

你的问题不是很清楚。如果您需要将其保存以供以后在另一个课程中使用，您应该尝试以下两种方法。

您不能直接将 NSIndexPath 保存在 NSUserDefaults 中。但是，您可以使用 NSKeyedArchive 和 NSKeyedUnarchiver 来帮助您执行此操作。

[http://gordiychuk.co.uk/2012/02/10/how-to-save-nsindexpath-to-nsuserdefaults/](http://gordiychuk.co.uk/2012/02/10/how-to-save-nsindexpath-to-nsuserdefaults/)

我不确定您对 NSIndexPath 到底需要什么。我这样做了，我只是在创建 UIViewController 时通过 init 方法传递了 NSIndexPath。我需要知道用户在另一个类中选择了哪一行。

例如：

```
- (id)initWithNibName:(NSString *)nibNameOrNil 
               bundle:(NSBundle *)nibBundleOrNil 
   initWithNSIdexPath:(NSIndexPath *)indexPath
{
    // Do something indexPath
} 
```

# linux - Matlab 命令窗口选项卡（选项卡式）

> ID：10665975
> 
> 赞同：2
> 
> 时间：2012-05-19T14:21:58.900
> 
> 标签：linux, matlab, unix

嗨，我希望这个问题符合社区准则。在 Matlab 中工作时，如果命令窗口有选项卡（很像 Linux 中的大多数终端仿真器），我将非常感激。在 Matlab 中可用还是我必须运行不同的 Matlab 实例？

我正在运行一个生成绘图的系统，因此无法通过 -nojvm 在基于文本的模式下运行 Matlab。

编辑：有没有办法获得这样的功能，或者我必须等待 Mathworks 醒来并实现这个简单、省时的工具。

嗯，我认为 Matlab 的工作方式（使用工作区和编辑器）选项卡在性能方面可能没有那么有益，而不是仅仅运行一个新的 Matlab 实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:28:01.853

据我所知，没有这样的功能。

尽管您知道您可以使用该`-nodesktop`标志在当前控制台中运行 Matlab 并且仍然能够调出绘图吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:43:07.507

好吧 - 取决于你打算用标签做什么。您确实有文件编辑器、变量编辑器的选项卡。但我想你的意思是命令窗口。

我有时会打开两个或更多的 Matlab 实例——一个做一些计算，另一个做一些观察和快速的东西——但我不认为它是可取的。

我发现反对使用多个实例，偏好和路径会定期“不可用”（比如每月一次）。

但是由于 Matlab 是“单”线程的 - 在计算时，几乎不可能执行简单的任务，例如编辑代码或在同一实例中打开文件。如果它有标签，我想它会更糟。我认为这个问题深深地存在于 Matlab 的工作原理中，因此不会很快改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T20:36:04.327

在 Linux 中，您可以使用 command 派生新的 MATLAB 实例，`unix`并将要运行的 MATLAB 命令作为命令行参数传递。如果您添加`&`到`unix`输入字符串的末尾，则新的 MATLAB 实例将成为后台进程，因此通过这种方式，您可以从一个 MATLAB 命令窗口在多个 MATLAB 实例中运行命令（带输出），打开一个新的 MATLAB 实例以执行命令并输出。

这是代码：

多线程.m：

```
function multithread(MatlabCommand)
% this is a function to create a new MATLAB instance and run a command in it.
unix([ 'matlab -desktop -r ', MatlabCommand, ' &' ]);
return 
```

测试功能.m：

```
function testfunction()
fprintf('one two three.\n');
return 
```

然后您可以通过这种方式在新实例中运行 MATLAB 命令：`multithread('testfunction');`.

# spring - spring xml文件和导入xml文件循环依赖

> ID：10665978
> 
> 赞同：5
> 
> 时间：2012-05-19T14:22:21.703
> 
> 标签：spring, circular-dependency

看来你可以在春天做到这一点

```
file A.xml imports B.xml
file B.xml imports C.xml
file C.xml imports A.xml or B.xml 
```

这真的扼杀了我们的项目，因为 xml 文件之间的依赖关系被搞砸了，当你只想拉入一个文件时，它往往会拉入所有其他垃圾。春天有什么办法可以防止这种循环依赖的东西，让它在启动时爆炸？

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-25T20:39:19.183

看起来类似的东西在很多年前就被标记了，但尚未实施：[SPR-1142](https://jira.spring.io/browse/SPR-1142)。

# java - NetBeans：JavaDoc 从未显示

> ID：10665982
> 
> 赞同：2
> 
> 时间：2012-05-19T14:22:37.143
> 
> 标签：java, netbeans, javadoc, netbeans-7, maven-javadoc-plugin

我有一个大问题。那就是我使用的是 NetBeans 7.1.2，它永远不会立即向我显示 JavaDoc，当我键入一些方法时，它会在互联网上搜索 JavaDoc，说“正在下载 JavaDoc”。然后只显示该方法的 JavaDoc。我什至尝试手动下载 JavaDoc 并将其设置为 netbeans，但仍然不行。下面的图片将清楚地解释这个问题。

![JavaDoc 不是即时的。 正在下载](../Images/97e0d4eabbc8156c97ed3b693ea38453.png)

![JavaDoc 是手动添加的](../Images/98afa67fa3932474ff61c7cc8b8fc2dd.png)

这里，JavaDoc 正在下载 这里，JavaDoc 是手动添加的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T14:50:52.840

尝试添加网址：`http://download.oracle.com/javase/7/docs/api/`

# data-binding - knockout.js - 函数调用后数据绑定自动更新

> ID：10665990
> 
> 赞同：0
> 
> 时间：2012-05-19T14:23:10.117
> 
> 标签：data-binding, knockout.js

我有一个案例，我将数据绑定到列表中模型内的日期字段：

```
function Model(data) {
    var self = this;
    ko.mapping.fromJS(data, {}, this);
}

<div id="fieldOnPage" data-bind="text: formatDate(myDateField())"></div> 
```

然后，在模式中，我显示相同的日期字段，以便可以对其进行编辑：

```
<div id="fieldInModal" data-bind="text: formatDate(myDateField())"></div> 
```

但是，由于我调用 formatDate 函数对展开的可观察对象执行其工作，因此当我在模式中编辑值时，我无法看到更改被实时写回主页。

另一个警告是我使用了 ko.mapping 插件，所以我不一定在 myDateField 上有一个特定的 ko.computed 字段。这可能与这样的外部功能有关吗？如果没有，如果我必须专门覆盖 myDateField 绑定，我将如何使用 ko.computed 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T17:08:41.147

你可以做类似的事情

```
function Model(data) {
    var self = this;
    ko.mapping.fromJS(data, {}, this);

    this.formattedDate = ko.computed(function () {
       return formatDate(ko.utils.unwrapObservable(self.myDateField));
    });
} 
```

绑定到格式化的日期

```
<div id="fieldInModal" data-bind="text: formattedDate"></div> 
```

希望这可以帮助。

# api - 是否有可能我在短短一个小时的测试中就已经超过了 Google Maps Static 的查询限制？

> ID：10665995
> 
> 赞同：0
> 
> 时间：2012-05-19T14:23:39.593
> 
> 标签：api, google-static-maps

我刚开始使用 Google Map API for Static Images，在短短一个小时内，它就出现了这张图片：

[http://www.coon.it/drop/limit.png](http://www.coon.it/drop/limit.png)

这正常吗？

我的页面需要 6 张静态图片，也就是说我调用它，比如 170 次？我不认为这是可能的，因为图片总是相同的，并且文档说如果我调用相同的图像它不算数。

我能做些什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:30:07.873

它应该显示什么？对我来说，它只是显示一排树的风景（我猜你想看到什么？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:05:04.820

尽管图像数量存在绝对限制，但该限制可能会在比 24 小时更短的时间内计算出来。2400/天可以解释为 100/小时，所以你不能一次性使用所有 2400 [我不记得静态地图的限制是什么，但你明白了]。

大多数谷歌服务也有一个速率限制，并且几乎同时获取六张图像可能会打破速率限制。速率限制因服务器负载而异，但将请求间隔到 200 毫秒应该没问题。

或者它可能看起来像一个自动图像提取器（特别是如果您在过去一小时内运行了 30 次）。谷歌也不喜欢自动爬虫。