# StackOverflow 问答 10735000-10735999

# actionscript - 字符串之间的 ActionScript 替换？

> ID：10735003
> 
> 赞同：0
> 
> 时间：2012-05-24T09:46:41.600
> 
> 标签：actionscript, replace, str-replace

我有一个名为 MESSAGE 的字符串，它取决于人们所说的内容。

有没有办法让 MESSAGE 替换字符串中的字符串内容？

例如，如果 MESSAGE 等于“嘿，伙计们 [rainbow] 看看我很棒的彩虹文字 [/rainbow] 是不是很酷？” 那么我如何通过摆脱“[rainbow]”和“[/rainbow]”并将“看看我的真棒彩虹文本”替换为“[rainbow]看看我的真棒彩虹文字[/rainbow]”部分一个名为 RAINBOWTEXT 的字符串？

我需要这个的原因是因为我希望基于 Flash 的聊天中的用户能够制作彩虹文本，但我使用的方法需要在客户端执行此操作。我确实有一个 PHP 版本，可以将文本提交到数据库中，但由于数据量大，它会切断消息。每个字符的两边都有一个`<font color="#123456">`和一个，所以消息非常长。`</font>`

如果我可以替换 [rainbow] 和 [/rainbow] 指定的内部部分，我可以让每个人的客户端在收到消息后替换它。在数据库中，它将显示“嘿，伙计们 [rainbow] 看看我很棒的彩虹文本 [/rainbow] 是不是很酷？” 但在聊天中会出现“嘿，伙计们，看看我很棒的彩虹文字是不是很酷？” 与实际的文字彩虹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:13:34.780

这听起来像是[正则表达式](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7ea9.html)和`replace()`方法的工作。寻找可以查找和替换 HTML 标记内容的表达式，您应该能够调整您找到的内容以满足您的要求。JavaScript 的示例也应该是有效的，因为 ActionScript 和 JavaScript 都遵守 ECMAScript 正则表达式标准。

一旦您找到了一些东西，您就可以使用这个[方便的工具](http://gskinner.com/RegExr/)来测试 ActionScript 3.0 正则表达式。

# node.js - Node.js 和协议缓冲区 - 我有一个 ? 那是什么？

> ID：10735010
> 
> 赞同：0
> 
> 时间：2012-05-24T09:47:05.753
> 
> 标签：node.js, protocol-buffers

我正在努力理解 node.js 中的协议缓冲区...

我从一个帖子中收到一条消息。我

```
var Schema = require('protobuf').Schema;
var schema = new Schema(fs.readFileSync('/home/ubuntu/workspace/MySchmae.desc'));

var Feed  = schema['MySchema'];
var serialized = Feed.serialize(req.body); 
```

serialized 的值为 a 。我假设这是我要解析的对象。有一个领域叫做国家。我试过 serialized.country 但我没有定义。

作为一个方面..除了非描述性的一个寻呼机表单原型节点之外，还有什么好的教程吗？

# javascript - 如何使用 jquery 更改隐藏的输入值

> ID：10735015
> 
> 赞同：0
> 
> 时间：2012-05-24T09:47:17.207
> 
> 标签：javascript, jquery, html

我想在按下按钮时更改隐藏的输入值。这就是我正在做的事情。

我的隐藏输入

```
<input type="hidden" value="action" id="action" /> 
```

我的按钮

```
<INPUT name=submit value=~#SUBMIT~ type="button" id="btnSubmit" class="submitDatum">
<INPUT name=delete value=~#DELETE~ type="button" id="btnDelete" class="submitDatum"> 
```

我的 javascript

```
$("#btnSubmit").click(function() {
    $('#action').val('submit');
});

$("#btnDelete").click(function() {
    $('#action').val('delete');
}); 
```

有人可以帮忙吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:11:51.140

```
 <INPUT name=submit onclick="change_value('btnSubmit','submit')" value=~#SUBMIT~ type="button" id="btnSubmit" class="submitDatum">
 <INPUT name=delete onclick="change_value('btnDelete','delete')"  value=~#DELETE~ type="button" id="btnDelete" class="submitDatum">

 function change_value(htmlid,value_change) {
    $('#'+htmlid).val(value_change);   
} 
```

试试这个

# asp.net-mvc-3 - JQuery ajax：状态 0（FF、Chrome、Safari）。好的在 IE

> ID：10735022
> 
> 赞同：1
> 
> 时间：2012-05-24T09:47:33.150
> 
> 标签：asp.net-mvc-3, jquery

我有两个应用程序：

*   本地主机中的 AppA：1834
*   本地主机中的 AppB:3597

AppB的html页面调用AppA的方法，代码如下：

```
jQuery.support.cors = true;
$.ajax({
    url: 'http://localhost:1834/Home/SomeAction',
    type: "GET",
    dataType: "html"
}).done(...).error(...); 
```

AppA 返回一个 html 片段。

该代码适用于 IE9（也适用于 type=POST、data=somejson、contenttype="application/json"），但不适用于 FF12 或 Chrome19（Status=0，StatusText="error"）

它与跨站点脚本有关吗？

ps：

*   对 AppA 的调用有效，并且 AppA 发送带有 200 状态代码的响应。
*   jQuery 1.7.2。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:53:29.080

你是对的，它与同源策略有关。您的请求必须在同一个域和同一个端口上。

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

# yii - radioButtonList 默认选中

> ID：10735025
> 
> 赞同：14
> 
> 时间：2012-05-24T09:47:43.297
> 
> 标签：yii

我创建了一个包含 2 个选项的选项列表：是和否，如下所示

```
<?php echo $form->radioButtonList($model,'active', array(1=>'Yes', 0=>'No'), array('separator'=>"" )); ?> 
```

如何将选项 1 设置为默认选择？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-24T09:50:20.430

你必须`$model->active = 1`在你的控制器中设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-26T19:32:24.000

我更喜欢在视图页面上，就在表单元素之前。作为

```
<?php $model->isNewRecord ? $model->active = 1: $model->active = $model->active ;  ?> 
```

这也将处理更新操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-14T16:23:13.453

您还可以在模型本身中设置默认值：

这是一个表单，我使用 radioButtonList 作为 reportType 并默认选择一个：

```
class FreeReportForm extends CFormModel
{
    public $userId;
    public $email;
    public $callId;
    public $reportType = 1;
    public $companyNumber;
    public $expiry;

    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-23T13:30:41.990

您可以将值 1 设置为默认选择值，而无需使用 $model

```
<?php echo $form->radioButtonList($model,'1', array(1=>'Yes', 0=>'No'), array('separator'=>"" )); ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T07:48:59.113

您应该在控制器的函数 actionXXX() 中添加一行“$model->active=1”。例如，如果收音机在创建页面中，则必须有一个名为 actionCreate() 的函数，而这正是您添加代码的地方。

# javascript - 使用 HTML5 Canvas 开发复杂的应用程序

> ID：10735027
> 
> 赞同：0
> 
> 时间：2012-05-24T09:47:48.000
> 
> 标签：javascript, html, canvas

我们正在为 CAD 设计师开发一个 Web 应用程序，现有的类似项目有：

*   [http://mydeco.com/3d-planner/](http://mydeco.com/3d-planner/)
*   [http://sunglass.io/](http://sunglass.io/)

这些项目使用 SVG 或 Canvas 实现。我的问题是：

1.  考虑 SVG 和 Canvas，哪一个更适合类似的项目？
2.  由于 Canvas 只提供了一组低级 API，是否有任何现有的库可以处理对象渲染、图层管理、冲突检测等？例如，使用 wxWidgets、Qt 或 MFC，开发人员不必关心窗口系统中的窗口覆盖和渲染。非常感谢 ：-）

* * *

更新 2

好的，我已经阅读了这些帖子，我会尽量避免此类问题。现在我发现了这个库：[KineticJS](http://www.kineticjs.com/)，它还实现了 SVG 的一些功能。我正在尝试使用它，稍后会得出结论。

* * *

更新

谢谢理查德。此外，由于我们正在将此应用程序部署到 iPad，因此我们正在努力寻找一种高效且易于使用的技术来构建它。在 2D 环境中，Canvas 的性能是否比 SVG 快？iOS 设备上的 SVG 有什么缺陷吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:54:38.823

只是从个人经验来回答，我在 2D 项目中使用 SVG 取得了更大的成功，在 3D 项目中使用画布取得了更好的结果。

如果您想要一个用于在客户端创建 3D 的优秀库，我会查看来自神奇的 Doob 先生的threeJs。

[http://mrdoob.github.com/three.js/](http://mrdoob.github.com/three.js/)

它可以使用画布或 WebGl 进行更快的渲染。

希望这可以帮助。

# .net - 根据属性值显示另一个动态资源

> ID：10735029
> 
> 赞同：1
> 
> 时间：2012-05-24T09:47:48.300
> 
> 标签：.net, wpf, xaml, dynamicresource

在文本块中，我想要一个文本，具体取决于布尔属性的值。由于应用程序支持多种语言，因此必须使用 DynamicResource 获取文本。

DynamicResources 中有两个条目可用，一个用于属性为真时，一个用于属性为假时。

我想在 xaml 中解决这个问题，以便显示正确的 DynamicResource，具体取决于属性的值。

任何人的想法或这是可能的？（如何 ;-） ？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:31:56.907

以下是您的问题的解决方案。

*   资源字典

> ```
> <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
>                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
>                     xmlns:system="clr-namespace:System;assembly=mscorlib"
>                     >
>     <system:String x:Key="Lang1">Lang1 Message</system:String>
>     <system:String x:Key="Lang2">Lang2 Message</system:String>
> </ResourceDictionary> 
> ```

*   应用程序.xaml

> ```
> <Application x:Class="MultiLang.App"
>              xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
>              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
>              StartupUri="MainWindow.xaml">
>     <Application.Resources>
>         <ResourceDictionary>
>             <ResourceDictionary.MergedDictionaries>
>                 <ResourceDictionary Source="LangResources.xaml" />
>             </ResourceDictionary.MergedDictionaries>
>         </ResourceDictionary>
>     </Application.Resources>
> </Application> 
> ```

*   主窗口.xaml

    ```
    <Window.Resources>
        <vm:MainWindowViewModel x:Key="mainVM" />
    </Window.Resources>

    <Grid DataContext="{StaticResource mainVM}">

        <ToggleButton Name="btnLang" IsChecked="{Binding Var}" Content="Change lang" MaxWidth="100" MaxHeight="30">

        </ToggleButton>

        <TextBlock Margin="5" MaxHeight="30" VerticalAlignment="Top">
            <TextBlock.Style>
                <Style TargetType="{x:Type TextBlock}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=DataContext.Var, RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=Grid}}" Value="True">
                            <Setter Property="Text" Value="{DynamicResource Lang1}" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Path=DataContext.Var, RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=Grid}}" Value="False">
                            <Setter Property="Text" Value="{DynamicResource Lang2}" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock> 
    </Grid> 
    ```

*   主窗口视图模型

> ```
> using System;
> using System.Collections.Generic;
> using System.Linq;
> using System.Text;
> using System.ComponentModel;
> 
> namespace MultiLang
> {
>     public class MainWindowViewModel: INotifyPropertyChanged
>     {
>         private bool _var = false;
>         public bool Var
>         {
>             get { return _var; }
>             set
>             {
>                 _var = value;
>                 OnPropertyChanged("Var");
>             }
>         }
> 
>         public event PropertyChangedEventHandler PropertyChanged;
>         public void OnPropertyChanged(string name)
>         {        
>             PropertyChangedEventHandler handler = PropertyChanged;
>             if (handler != null)
>             {
> 
>                 handler(this, new PropertyChangedEventArgs(name));
>             }
>         }
>     }
> } 
> ```

更好的选择是创建两个具有相同键但具有不同值的语言文件，并在运行时合并适当的文件。在这种情况下，您不必每次都检查布尔属性！

# mysql - MySQL 双向关系

> ID：10735030
> 
> 赞同：1
> 
> 时间：2012-05-24T09:47:52.697
> 
> 标签：mysql, triggers, foreign-key-relationship

好的，这就是我面临的问题，我愿意完成架构的重新设计，但我认为我基本上走在正确的轨道上。

**表 1 - 教师**

```
- ID - (Auto increment int)
 - Name
 - employee ID
 - ADDITIONAL COLUMNS NOT IMPORTANT TO THIS QUESTION
 - account_id --> FK relation to (Accounts) 
```

**表 2 - 学生**

```
- ID - (Auto increment int)
 - Name
 - student ID
 - ADDITIONAL COLUMNS NOT IMPORTANT TO THIS QUESTION
 - account_id --> FK relation to (Accounts) 
```

**表 3 - 账户**

```
- ID - (Auto increment int)
 - USERNAME
 - PASSWORD
 - TYPE (Instructor OR Student)
 - person_id --> FK relation to (Students(ID)) & (Instructors(ID)) 
```

所以我目前的逻辑是这样的

1.  插入一个人（学生或教师）
2.  触发器根据他们的名字插入一个帐户
3.  TRIGGER 使用 account_id 更新学生或教师记录

出现问题是因为 mysql 不允许递归触发器，因为这可能是非常糟糕的 AKA 插入 table1 然后在 table2 插入 table1 时触发。

但我不明白为什么我通过触发器更新表 1 有问题，因为当它收到更新时没有触发器等待做某事。

我希望系统像这样运行的原因是因为教师和学生都将有一个中央登录，而且我知道我可以对每个表进行两次 mysql 调用我希望能够只对帐户表。

我需要从人员表（教师/学生）到帐户表的关系的原因是，当我删除教师或学生时，随之而来的帐户也会被删除。

提前致谢！

# jquery - 如何在 Jquery 中使用标签类获取 div 类

> ID：10735032
> 
> 赞同：1
> 
> 时间：2012-05-24T09:47:58.443
> 
> 标签：jquery

我需要使用标签类访问 div 类。将鼠标放在上面的逻辑`<label class="name">` `<div class="hidden">`被调用。请注意`<li>`，`<div>`id 一直是 unqiue

**HTML**

```
 <li id="132" class="main" ><label class="name">Ajay</label>   
    <div class="hidden" id="132" >
       <p>Some Msg!!<p>
    </div>
    </li>

    <li id="192"  class="main"> <label class="name">Raj</label>    
    <div class="hidden" id="192" >
       <p>Some Msg!!<p>
    </div>
    </li>

    <li id="231"  class="main" ><label class="name">David</label>    
    <div class="hidden" id="231" >
       <p>Some Msg!!<p>
    </div>
    </li>

   So on... 
```

**jQuery**

```
 $('.name').hovercard({detailsHTML:$('.hidden').html()}) 
// on placing mouse on label <div class="hidden"> is called 
```

请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:52:05.010

您的标记无效，并且您的描述与您的代码所说的您尝试执行的操作不匹配。我在这里猜测每种情况下的标记应该如下所示：

```
<li id="132" class="main"><label class="name">Ajay</label>
<div class="hidden" id="132" >
   <p>Some Msg!!<p>
</div>
</li> 
```

如果是这样，并且如果您尝试调用`hovercard`元素`label.name`并包含来自`div.hidden`附近的信息，您会想要这样的东西：

```
 $(".name").each(function() {
    var $this = $(this);
    $this.hovercard({detailsHTML:$this.nextAll("div.hidden").html()});
 }); 
```

...因为 the`div`和 the`label`不是父子关系，所以它们是*兄弟姐妹*。没有循环你不能这样做，因为我们需要导航。

* * *

另请注意，在 the和 the`id`上使用相同的值是无效的。值在页面上**必须**是唯一的。另请注意，以数字开头的值[在 HTML5 中有效](http://www.w3.org/TR/html5/elements.html#the-id-attribute)，但[在 HTML4 及更早版本中](http://www.w3.org/TR/html401/types.html#type-name)[无效，在 CSS](http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier)中无效。当您使用 jQuery 时，这意味着您可能会使用大量 CSS 选择器来与您的结构进行交互。由于全数字值在 CSS 中无效，它们在 CSS 选择器中也是无效的，最终只会给自己带来麻烦。`label``div``id`**`id``id`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T09:54:12.850

正如 TJ 所说，您的标记无效。使用正确的标记，您只需使用 HTML 和 CSS 即可实现此目的。

像这样的东西：

**HTML**

```
<li id="231"  class="main">
   <label class="name">David</label>
   <div class="hidden" id="231" >
      <p>Some Msg!!<p>
   </div>
</li> 
```

**CSS**

```
div.hidden {
   display: none;
}
li.main:hover div.hidden {
   display: block;
} 
```

**示例：http:** [//jsfiddle.net/MWbS4/](http://jsfiddle.net/MWbS4/)**

# php - 即使我检查了我收到的所有已经发送的标头，为什么？

> ID：10735037
> 
> 赞同：0
> 
> 时间：2012-05-24T09:48:07.200
> 
> 标签：php, header, output-buffering

在贬低我之前，我应该说我已经阅读了以下大部分文章：
[https://stackoverflow.com/questions/10293545/strange-error-headers-already-sent-by-output-started-at https://stackoverflow.com/questions/10293545/strange-error-headers-already-sent-by-output-started-at](https://stackoverflow.com/questions/10293545/strange-error-headers-already-sent-by-output-started-at)
[https:// /stackoverflow.com/questions/1827314/cannot-modify-header-information-headers-already-sent-why-its-happening](https://stackoverflow.com/questions/1827314/cannot-modify-header-information-headers-already-sent-why-its-happening)
[“警告：无法修改标头信息 - 标头已发送”错误](https://stackoverflow.com/questions/1912029/warning-cannot-modify-header-information-headers-already-sent-by-error)
[CakePHP 应用程序中的标头已发送错误](https://stackoverflow.com/questions/3081589/headers-already-sent-error-in-cakephp-app)

`<?php`而且我很确定我在标签之前或末尾没有任何空格。错误说当我进行重定向时输出从第 3 行开始。我也知道在发送标题之前我不能发送任何字符，甚至是空格。我还检查了 display_errors 是否在 PHP 标记之前不产生任何错误。
我有 root 访问权限，所以我在 php.ini 中打开了 output_buffering 以完全读取 output_buffering，但它仍然抵抗。

我有四个文件：

1- config.php（ob_start() 在那里）

```
<?php
session_start();
// some code here.....
// blah blah blah...
?> 
```

2- header.php（此处包含配置）

```
<?php 
require_once('./config.php');
if (!isset($_SESSION['user'])) { 
    header('Location:' . BASE_URI . '/index.php');
    exit();
}
?> 
```

3- index.php（据说输出从第 3 行开始`header()`：）

```
<?php include_once('./includes/header.php'); 
if (isset($_SESSION['karbar'])) {
    header('Location: ./somewhere.php');
    exit();
}
?> 
```

4- footer.php (ob_end_flush() 在 mysqli_close() 之后被调用；)

```
some code here...
</body>
</html>
<?php if (isset($dbc)) { mysqli_close($dbc); } ?> 
```

这怎么可能发生？还有什么我错过的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:27:10.960

`?>`如果它们已经在最后一行，请删除所有关闭，它们不是必需的，并且很可能导致您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:40:23.577

检查您的文件中是否没有字节顺序标记（BOM，有时称为 Unicode 签名）。字节顺序标记是文件开头的三个字节，对您不可见，但在执行 php 标签中的代码之前由 PHP 发送。

# ruby-on-rails - Ruby on rails（路由错误）

> ID：10735039
> 
> 赞同：1
> 
> 时间：2012-05-24T09:48:22.983
> 
> 标签：ruby-on-rails

嗨，任何机构都可以解决这个错误，因为我正在 `NoMethodError`为我的 prop_manager_controller.rb

**PropManagerController 中的 NoMethodError#new**

```
undefined method `prop_manager?' for #<User:0x471f690> 
```

**控制器**

```
class PropManagerController < ApplicationController

  before_filter :login_required, :except => [:new, :create]
  load_and_authorize_resource

  # GET /prop_manager
  # GET /prop_manager.json

  def index
    @prop_managers= PropManager.order('id:desc').page(params[:page])
    respond_to do |format|
      format.html #index.html.erb
      format.json {render json: @prop_managers}      
    end
  end

  # GET /prop_manager
  # GET /prop_manager.json

  def show
    @prop_managers= PropManager.order('id:desc').page(params[:page])
    respond_to do |format|
      format.html #show.html.erb
      format.json {render json:@prop_managers}
    end
  end

  # GET /prop_manager
  #GET /prop_manager.json

  def new
    @prop_managers= PropManager.new
      respond_to do |format|
        format.html #new.html.erb
        format.json {render json:@prop_managers}
      end
  end

  # GET /prop_manager/1/edit
  def edit
    @prop_manager = PropManager.find(params[:id])
  end

  # POST /prop_managers
  # POST /prop_managers.json
  def create
    @prop_manager = PropManager.new(params[:prop_manager])
    respond_to do |format|
      if @prop_manager.save
        #UserMailer.delay.homeowner_welcome_email(@home_owner, params[:home_owner][:password])
        UserMailer.propmanager_welcome_email(@prop_manager, params[:prop_manager][:password]).deliver
        format.html { redirect_to prop_manager_path(@prop_manager), notice: 'PropManager was successfully created.' }
        format.json { render json: @prop_manager, status: :created, location: @prop_manager }
      else
        @prop_manager.errors[:base] << @exception_message
        format.html { render "new" }
        format.json { render json: @prop_manager.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /prop_manager/1
  # PUT /prop_manager/1.json

  def update
    @prop_manager = PropManager.find(params[:id])
    @prop_manager.card_validity = nil
    begin
      customer = Stripe::Customer.retrieve(@prop_manager.stripe_customer_id)
      customer.email = params[:prop_manager][:email]
      customer.card = { :number => params[:prop_manager][:credit_card_number],
                    :exp_month => params[:prop_manager][:credit_card_expiry_month],
                    :exp_year => params[:prop_manager][:credit_card_expiry_year],
                    :cvc => params[:prop_manager][:credit_card_cvc_code],
                    :name => params[:prop_manager][:credit_card_holder_name] }

      customer.save
      @prop_manager.card_validity = true
    rescue => exception
      @exception_message = exception.message
    end
    respond_to do |format|
      if @prop_manager.update_attributes(params[:prop_manager])
        format.html { redirect_to home_owner_path(@prop_manager), notice: 'PropManager account details updated successfully.' }
        format.json { head :ok }
      else
        @prop_manager.errors[:base] << @exception_message
        format.html { render action: "edit" }
        format.json { render json: @prop_manager.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /home_owners/1
  # DELETE /home_owners/1.json

  def destroy
    @prop_manager = PropManager.find(params[:id])

    begin
      customer = Stripe::Customer.retrieve(@prop_manager.stripe_customer_id)
      customer.delete
    rescue => exception
      # Do nothing - there is no customer record in the stripe account
    end
    @prop_manager.destroy

    respond_to do |format|
      format.html { redirect_to prop_managers_url }
      format.json { head :ok }
    end
  end
end 
```

**路线**

```
GEMS::Application.routes.draw do
  resources :customer_feedbacks

  resources :general_repairs_prices
  resources :steam_cleaning_prices
  resources :window_cleaning_prices
  resources :roof_cleaning_prices
  resources :gutter_cleaning_prices

  resources :residential_jobs do
    member do
      get 'accept'
      get 'decline'
      get 'print_friendly'
    end
    collection do
      post 'create_job_with_estimate'
      put 'update_multiple'
    end
    resources :residential_job_changes do
      member do
        get 'approve'
      end
    end
  end

  resources :home_owners 
  resources :prop_managers 

  resources :contractors do
    member do
      get 'approve'
      get 'disapprove'
    end
  end

  resources :users
  resources :email_templates
  resources :feedback_survey_questions
  resources :decline_reasons
  resources :services
  resources :branches
  resources :sessions
  resources :password_resets

  get "sites/index"
  get "sites/about_us"
  get "sites/home_owner"
  get "sites/home_owner_front"
  get "sites/prop_manager"
  get "sites/owner_register"

  get "login" => "sessions#new", :as => "login"
  get "logout" => "sessions#destroy", :as => "logout"

end 
```

我想我已经正确定义了路线，所以请让我知道需要任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:30:09.213

它看起来像：

您的 User 模型上没有该方法`prop_manager?`。这是您必须自己添加的方法——活动记录本身不会使方法可用，`?`并且可用。

从跟踪的外观来看，这可能发生在用户模型的回调中。您的用户模型中有类似的东西吗？

*   或者 -

你正在使用我注意到的cancan。登录用户的权限可能不包括访问该方法——尽管我认为 cancan 会提供比简单地说该方法不可用更好的错误。

# ant - 如何在ant中创建临时目录？

> ID：10735042
> 
> 赞同：17
> 
> 时间：2012-05-24T09:48:27.747
> 
> 标签：ant

我想在 ant（版本 1.6.5）中创建一个临时目录并将其分配给一个属性。

*   命令“mktemp -d”将是理想的，但我无法从 ant 内部找到类似的功能
*   除了显然只创建文件而不是目录的[tempfile 任务](http://ant.apache.org/manual/Tasks/tempfile.html)之外，我在文档中找不到任何官方功能。
*   我正在考虑使用 exec 调用 tempfile 并获得结果，但是这将使我的 build.xml 依赖于 UNIX/linux，我想避免这种情况。

背景：我正在尝试加快在网络文件系统中构建的现有构建过程。构建已经将所有源代码复制到一个临时目录，但是这是在同一个文件系统上。我已经测试了将其更改为 /tmp/foo 并且它提供了值得的速度提升：3 分钟与 4 分钟。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-24T11:34:52.643

您可以将[tempfile 任务](http://ant.apache.org/manual/Tasks/tempfile.html)与`java.io.tmpdir` [系统属性](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getProperties%28%29)结合起来，以获取用于创建临时目录的文件路径：

```
<project default="test">

    <target name="test">
        <echo>${java.io.tmpdir}</echo>
        <tempfile property="temp.file" destDir="${java.io.tmpdir}" prefix="build"/>
        <echo>${temp.file}</echo>
    </target>

</project> 
```

请注意，该`tempfile`任务不会创建文件（除非您要求）。它只是设置一个属性，您可以使用它来创建文件或目录。

> 此任务将属性设置为临时文件的名称。与 java.io.File.createTempFile 不同的是，这个任务实际上并不创建临时文件，但它确实保证在任务执行时该文件不存在。

在我的环境中输出：

```
test:
     [echo] C:\Users\sudocode\AppData\Local\Temp\
     [echo] C:\Users\sudocode\AppData\Local\Temp\build1749402932 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-10-01T15:29:21.180

上面的答案仅提示如何创建临时目录。关键是只返回一个字符串。更完整的答案是

```
<target name="temptest" description="test making tempdir">
    <tempfile property="mytempdir" destdir="${java.io.tmpdir}"/>
    <tempfile property="mytempfile" destdir="${mytempdir}"/>
    <tstamp>
        <format property="now" pattern="MMMM dd yyyy"/>
    </tstamp>
    <copy tofile="${mytempfile}">
        <string value="today=${now}"/>
    </copy>
    <property file="${mytempfile}"/> 
    <echo message="It it now ${today}"/>
</target> 
```

# wpf - 从 Grid 中删除行时出现意外结果

> ID：10735046
> 
> 赞同：0
> 
> 时间：2012-05-24T09:48:41.953
> 
> 标签：wpf, grid, row

我有一个网格，其行和列是动态填充的。要删除一行，我使用以下代码：

```
seivesTorGrid.RowDefinitions.RemoveAt(rowIndex+1); 
```

一切都只能手动完成。删除行后的操作结果不理想： ![在此处输入图像描述](../Images/b46185c9dfcdb735b3a24a3563a5f528.png)

xml中网格的定义是：

```
<Grid Name="seivesTorGrid" ShowGridLines="False" Margin="10, 0, 10, 0"
                  Width="Auto" Height="Auto" >

                <Grid.ColumnDefinitions> </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" MinHeight="25"/>
                </Grid.RowDefinitions>
            </Grid> 
```

这就是我将 Cols & Row 添加到 Grid 的方式：

```
 private void AddColumns()
    {
        ColumnDefinition newCol = new ColumnDefinition();
        //newCol.Width = GridLength.Auto;
        newCol.MinWidth = 50;
        newCol.MaxWidth = 150;
        seivesTorGrid.ColumnDefinitions.Add(newCol);

        GridViewColumnHeader gch = new GridViewColumnHeader();
        gch.Content = "ID";
        gch.FontSize = 12;

        Grid.SetColumn(gch, 0);
        seivesTorGrid.Children.Add(gch);

        for (int i = 0; i < GlobalUtils.TOR_List.Count; i++)
        {
            newCol = new ColumnDefinition();
            newCol.Width = GridLength.Auto;
            newCol.MinWidth = 80;
            newCol.MaxWidth = 150;                
            seivesTorGrid.ColumnDefinitions.Add(newCol);

            gch = new GridViewColumnHeader();
            gch.Content = GlobalUtils.TOR_List[i].TOR_Id;
            gch.HorizontalContentAlignment = System.Windows.HorizontalAlignment.Center;
            gch.VerticalContentAlignment = System.Windows.VerticalAlignment.Center;
            gch.FontSize = 12;

            Grid.SetColumn(gch, i + 1);
            seivesTorGrid.Children.Add(gch);                
        }

    }

    private void AddRowToGrid(String id)
    {
        RowDefinition newRow = new RowDefinition();

        seivesTorGrid.RowDefinitions.Add(newRow);
        int rowIndex = seivesTorGrid.RowDefinitions.Count - 1;

        TextBlock idTB = new TextBlock();
        idTB.Text = id;
        idTB.TextAlignment = TextAlignment.Left;
        idTB.VerticalAlignment = System.Windows.VerticalAlignment.Center;

        Grid.SetColumn(idTB, 0);
        Grid.SetRow(idTB, rowIndex);
        seivesTorGrid.Children.Add(idTB);

        for (int i = 1; i < 3; i++)
        {
            Button tempBtn = new Button() {
                Height=25, 
                Width=80,
                Margin = new Thickness(5),
                Content = "Add", 
                Background = Brushes.Brown, 
                Tag = rowIndex
            };

            tempBtn.Click += OnIdButtonClick;

            Grid.SetColumn(tempBtn, i);
            Grid.SetRow(tempBtn, rowIndex);                
            seivesTorGrid.Children.Add(tempBtn);
        }                       
    } 
```

为什么删除行后的结果不正确？需要纠正什么？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:14:03.000

当然，您还必须删除该行中的所有子项。

这意味着`seivesTorGrid.Children`集合中的所有元素，其中`Grid.GetRow()`返回要删除的索引。

# ruby-on-rails - Ruby On Rails 上的 Redis - 未初始化的常量

> ID：10735049
> 
> 赞同：2
> 
> 时间：2012-05-24T09:49:09.843
> 
> 标签：ruby-on-rails, redis, passenger, resque, nameerror

我在安装了 Apache 的 Ubuntu 服务器上使用乘客。

当我尝试在其上加载带有 redis 的 ruby​​ 应用程序时，我收到此错误。

```
Error message:
    uninitialized constant Redis::Client::ALIASES

Exception class:
    NameError

Application root:
    /xxx/ruby 

0   /usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-namespace-0.4.3/lib/redis/namespace.rb   128     in `'
1   /usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-namespace-0.4.3/lib/redis/namespace.rb   4   in `'
2   /usr/local/rvm/gems/ruby-1.9.3-p194/gems/redis-namespace-0.4.3/lib/redis/namespace.rb   3   in `'
3   /usr/local/rvm/gems/ruby-1.9.3-p194/gems/resque-1.8.2/lib/resque.rb     1   in `'
4   /usr/local/rvm/gems/ruby-1.9.3-p194/gems/resque-1.8.2/lib/resque/server.rb  3   in `'
5   /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb    68  in `require'
6   /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb    68  in `block (2 levels) in require'
7   /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb    66  in `each'
8   /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb    66  in `block in require'
9   /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb    55  in `each'
10  /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb    55  in `require'
11  /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb    119     in `require'
12  /xxx/ruby/config/application.rb     7   in `'
13  /xxx/ruby/config/environment.rb     4   in `require'
14  /xxx/ruby/config/environment.rb     4   in `'
15  config.ru   3   in `require'
16  config.ru   3   in `block in '
17  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb     51  in `instance_eval'
18  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb     51  in `initialize'
19  config.ru   1   in `new'
20  config.ru   1   in `'/usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb    225     in `eval'
21  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb     225     in `load_rack_app'
22  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb     157     in `block in initialize_server'
23  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/utils.rb    572     in `report_app_init_status'
24  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb     154     in `initialize_server'
25  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb  204     in `start_synchronously'
26  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb  180     in `start'
27  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/rack/application_spawner.rb     129     in `start'
28  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb    253     in `block (2 levels) in spawn_rack_application'
29  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb   132     in `lookup_or_add'
30  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb    246     in `block in spawn_rack_application'
31  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb   82  in `block in synchronize'
32  < td=""> <> prelude>    10:in `synchronize'
33  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb   79  in `synchronize'
34  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb    244     in `spawn_rack_application'
35  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb    137     in `spawn_application'
36  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb    275     in `handle_spawn_application'
37  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb  357     in `server_main_loop'
38  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb  206     in `start_synchronously'
39  /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/helper-scripts/passenger-spawn-server     99  in `' 
```

这就是我的 config.ru 的样子。

```
# This file is used by Rack-based servers to start the application.

require ::File.expand_path('../config/environment',  __FILE__)
run Rack::URLMap.new \
  "/" => xxx::Application,
  "/resque" => Resque::Server.new 
```

这就是我的 resque_r.rb 的样子（它位于 config/initializers 中）。

```
require "rubygems"
require 'resque_scheduler'

Resque.redis = 'localhost:6379'
Resque.redis.namespace = "resque:SchedulerExample"

# If you want to be able to dynamically change the schedule,
# uncomment this line.  A dynamic schedule can be updated via the
# Resque::Scheduler.set_schedule (and remove_schedule) methods.
# When dynamic is set to true, the scheduler process looks for
# schedule changes and applies them on the fly.
# Note: This feature is only available in >=2.0.0.
Resque::Scheduler.dynamic = true

Dir["#{Rails.root}/app/workers/*.rb"].each { |file| require file }

# The schedule doesn't need to be stored in a YAML, it just needs to
# be a hash.  YAML is usually the easiest.
Resque.schedule = YAML.load_file(Rails.root.join('config', 'resque_schedule.yml')) 
```

我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do

  gem 'sass-rails', :require => 'sass'

  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'

  gem 'compass-rails'

end

gem 'twitter-bootstrap-rails', "~> 2.0rc0"

gem 'jquery-rails'

gem 'feedzirra'

gem "friendly_id", "~> 4.0.1"

gem 'acts-as-taggable-on', '~> 2.2.2'

gem 'will_paginate', '~> 3.0'

gem 'gon'

gem 'wikitext'

gem 'twitter'

gem 'yaml_db'

#JSON PARSER
gem "oj", "~> 1.2.8"

gem "mysql2", "~> 0.3.11"

gem 'resque', :require => "resque/server"

gem 'resque-scheduler', :require => 'resque_scheduler'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:36:15.137

从您的堆栈跟踪来看，它看起来像是在加载时发生错误`config.ru`。

看起来您没有包含`resque/server`在 config.ru 文件中。

这是我在我的一个项目中使用的配置：

```
require ::File.expand_path('../config/environment',  __FILE__)
require 'resque/server'

run Rack::URLMap.new \
  "/"       => DmWorkflow::Application,
  "/resque" => Resque::Server.new 
```

另外，我不知道它是否对您有影响，但我将这些包括在我的`Gemfile`喜欢中：

```
gem 'resque'
gem 'resque-loner' 
gem 'resque-scheduler', ">= 2.0.0.h" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:58:38.247

You're running old version of `resque` gem. New version of `resque` [depends](http://rubygems.org/gems/resque/versions/1.20.0) on `redis-namespace` version `1.0.2` and upper, but your stack trace says that it loads `redis-namespace` v0.4.3.

Try running `bundle update`. If the versions still not right, add to your `Gemfile`:

```
gem 'redis-namespace', '~> 1.0.2' 
```

Alternatively you can install edge version of `resque` via git:

```
gem 'resque', github: 'defunkt/resque' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T13:08:56.063

我不太明白你做了什么来解决这个问题，因为我相信它实际上是 redis-namespace 中的一个错误。请参阅[问题 #38](https://github.com/defunkt/redis-namespace/issues/38)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:51:36.367

我在服务器上安装了错误版本的 redis。我没有使用 apt-get install redis-server 我手动安装了 redis-server 并解决了问题！

# java - 如何用mybatis将图片存入mysql？

> ID：10735053
> 
> 赞同：2
> 
> 时间：2012-05-24T09:49:25.910
> 
> 标签：java, mysql, blob, mybatis

有人可以让我知道如何使用 mybatis 将图像存储到 MySQL 中吗？我可以使用 jdbc 代码将图像存储到 MySQL 中，但我希望使用 MyBatis 来做同样的事情，但它不能正常工作，我的映射器如下：

```
<mapper namespace = "myinfo.beans.Resources">
<!-- For Resources Table -->
<insert id="insertResource" parameterType="myinfo.beans.Resources">  
insert into resources(res_name, res_type, res_content,res_path) values (#{res_name, jdbcType=VARCHAR},#{res_type, jdbcType=VARCHAR}, #{res_content, javaType=byte[], jdbcType=BLOB, typeHandler=org.apache.ibatis.type.BlobTypeHandler}, #{res_path, jdbcType=VARCHAR})  
</insert>
</mapper> 
```

实体是

```
public class Resources {
    private int res_id;
    private String res_name;
    private String res_type;
    private byte[] res_content;
    private String res_path;
...
} 
```

道代码是：

```
public void insertResource (Resources res){
    session = sqlfactory.openSession();
    try {
        session.insert("insertResource",res);
    } catch (Exception ex) {
        Logger.getLogger(ResourcesDao.class.getName()).log(Level.SEVERE, null, ex);
    }
    finally {
        session.close();
    }        
} 
```

我打电话给dao：

```
 public void createNewResource() {
        try {
            File file = new File("d:/DSC_0009.JPG");
            fis = new FileInputStream(file);
            byte[] photodata = new byte[(int)file.length()];
            fis.read(photodata);
            Resources res = new Resources();
            res.setRes_content(photodata);
            res.setRes_name("Sunny_Ho");
            res.setRes_type("photho");
            res.setRes_path("d:/");
            res_dao.insertResource(res);     
        } catch (FileNotFoundException ex) {
            Logger.getLogger(ResourcesController.class.getName()).log(Level.SEVERE, null, ex);
        }
          catch (IOException ex){
            Logger.getLogger(ResourcesController.class.getName()).log(Level.SEVERE, null, ex);
          }
    } 
```

我的桌子是

```
CREATE TABLE `resources` (
  `res_id` int(11) NOT NULL AUTO_INCREMENT,
  `res_name` varchar(255) NOT NULL,
  `res_type` varchar(20) DEFAULT NULL,
  `res_content` longblob,
  `res_path` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`res_id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 
```

我用主类运行这些代码，没有出现任何错误，但无法插入记录。

请帮我指出它有什么问题，谢谢

# jsf - 如何在 jsf 中访问 inputtext 绑定

> ID：10735054
> 
> 赞同：1
> 
> 时间：2012-05-24T09:49:27.017
> 
> 标签：jsf

我有以下问题，我无法在任何地方找到解决方案。

我有以下代码：

```
<h:inputText id="username" value="#{registrationBB.userName}" binding="#{userNameToConfirm}"/> 
```

后来：

```
<h:inputSecret id="confirmed-password" value="#{registrationBB.userPasswordConfirmed}">
  <f:validator validatorId="usernameNotInPasswordValidator"/>
  <f:attribute name="username" value="#{userNameToConfirm.value}" />
</h:inputSecret> 
```

inputText 绑定到 #{userNameToConfirm} （它不是任何 backingbean 中的属性），稍后此绑定用于密码验证器。

这一切都很好。

但是，这些字段所在的表单包含一个“重置”按钮，该按钮应该清空表单上的所有字段。

当reset按钮被clicket时，registrationBB中的所有属性都被清空，调用如下代码：

```
getViewRoot().getChildren().clear(); 
```

但是，用户名永远不会为空，因为它总是由“#userNameToConfirm”绑定中的值设置。

我的问题是：如何访问这个绑定并在 faces 后端删除？

我们使用 jsf 1.2 版。

问候，阿拉什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:56:13.793

让重置按钮重新加载页面。

```
<h:commandButton value="Reset" onclick="location.reload(true)" /> 
```

或者由 a`<navigation-case>`和 a `<redirect>`。

```
<h:commandButton value="Reset" action="reloadPagename" /> 
```

和

```
<navigation-rule>
    <navigation-case>
        <from-outcome>reloadPagename</from-outcome>
        <to-view-id>/pagename.jsf</to-view-id>
        <redirect />
    </navigation-case>
</navigation-rule> 
```

# hadoop - 如何使用 webHDFS 查看本地集群外的 Hadoop 文件系统

> ID：10735055
> 
> 赞同：0
> 
> 时间：2012-05-24T09:49:32.443
> 
> 标签：hadoop

我是 Hadoop 的新手，我花了一周的时间找到了 webHDFS，我认为这可以帮助我将 FileSystem 展示出集群。我可以在“http://master:50070/webhdfs/v1/user/hadoop?user.name=hadoopes&op=LISTSTATUS”中查看文件系统，但是它显示，

{"FileStatuses":{"FileStatus":[ {"accessTime":0,"blockSize":0,"group":"supergroup","length":0,"modificationTime":1337823103411,"owner":"hadoop ","pathSuffix":"yijin","permission":"777","re​​plication":0,"type":"DIRECTORY"}, {"accessTime":1337824794722,"blockSize":67108864,"group": "supergroup","length":11,"modificationTime":1337751080433,"owner":"pc","pathSuffix":"hello.txt","permission":"644","re​​plication":2,"type ":"FILE"}, {"accessTime":0,"blockSize":0,"group":"supergroup","length":0,"modificationTime":1337848266732,"owner":"hadoop","pathSuffix":"test","permission":"755","re​​plication":0,"type":"DIRECTORY"}, {"accessTime": 1337824798450,"blockSize":67108864,"group":"supergroup","length":18,"modificationTime":1337751301976,"owner":"pc","pathSuffix":"test2.txt","permission": "644","re​​plication":2,"type":"FILE"}, {"accessTime":0,"blockSize":0,"group":"supergroup","length":0,"modificationTime": 1337821412488,"owner":"hadoop","pathSuffix":"small","permission":"777","复制":0,"type":"DIRECTORY"} ]}}

很难阅读。有没有其他方法可以通过 webHDFS 查看文件系统，这是我的“hdfs-site.xml”

```
<property>
    <name>dfs.replication</name>
    <value>2</value>
</property>
<property>
    <name>dfs.name.dir</name>
    <value>/home/hadoop/hdfs/name</value>
</property>
<property>
    <name>dfs.data.dir</name>
    <value>/home/hadoop/hdfs/data</value>
</property>
<property>
    <name>dfs.webhdfs.enabled</name>
    <value>true</value>
</property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:55:23.187

webHDFS 以 JSON 格式返回其所有内容，如果您想要用户友好的输出格式，只需将浏览器指向`http://master:50070/`并从那里向下钻取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T09:32:04.930

您可以构建一个遵循 LISTSTATUS 操作返回的对象的 JSON 模式的类。使用映射器（例如 Jackson ObjectMapper）读取 JSON 并将其转换为您的 Class 对象。终于可以随心所欲的提示了！

# c# - C# 中的图形和动画

> ID：10735062
> 
> 赞同：1
> 
> 时间：2012-05-24T09:49:54.683
> 
> 标签：c#, flash, animation, windows-forms-designer

我使用 Windows 窗体工具（面板、形状、按钮等）在 C#（多人坦克游戏）中创建了一个游戏，但是**动画**和**图形**太差了，所以有没有简单的图形或动画类型在 C# 中使用以使这个游戏更好一点，我可以在 C# 中使用 flash，什么？！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:03:01.573

XNA 很棒，它是基于 DirectX 的与 Windows Forms 完全不同的技术。

另一个想法是根据您的游戏的复杂程度检查 Silverlight 或 WPF。对于屏幕不太繁忙的简单 2D 游戏，它可能比 XNA 容易得多。

我发现了[一个在 WPF 中构建多人游戏](http://www.codeproject.com/Articles/235236/Writing-a-Multplayer-Game-in-WPF)的好例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:57:04.523

C# 中有许多用于游戏开发的库和方法。

我更喜欢使用[XNA](http://en.wikipedia.org/wiki/Microsoft_XNA)，它基于 DirectX 并由微软自己开发。

但也有许多其他包装器，如 OpenGL 包装器[SharpGL](http://www.codeproject.com/Articles/3144/SharpGL-a-C-OpenGL-class-library)、自定义 DirectX 包装器[SlimDX](http://code.google.com/p/slimdx/)或使用普通的[DirectX SDK](http://www.microsoft.com/en-us/download/details.aspx?id=6812)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:52:31.733

我建议看看[Microsoft XNA](http://msdn.microsoft.com/en-us/centrum-xna.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:53:13.240

我很确定如果你想改进游戏的图形，你将不得不使用设计软件或聘请某人为你做这件事。在 Google 上进行简单查找将引导您找到模型开发软件。

一个好的起点是 microsoft XNA 框架。

我还推荐使用 Blender： http: [//www.blender.org/](http://www.blender.org/)

这是一个完全免费的开源 3D 模型创建程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T12:41:08.853

前段时间我一直在寻找库或框架来改善带有漂亮动画的winforms体验。我最好的选择是 XNA 或[OpenTK](http://www.opentk.com/) (OpenGL) 和[SDL.Net](http://sourceforge.net/apps/mediawiki/cs-sdl/index.php?title=Main_Page)。

# html - HTML 设计在 WPF 中不起作用

> ID：10735063
> 
> 赞同：0
> 
> 时间：2012-05-24T09:49:55.380
> 
> 标签：html, wpf, html-table

我在 HTML 中创建了一个网页，并使用`<Table>`HTML 选项卡对其进行了设计。通常它可以完美运行，但是在 WPF 应用程序中加载页面时，布局会受到干扰。

除了表格之外，设计 html 的最佳方法是什么，以便当它使用 webbrowser 控件嵌入到 wpf 应用程序中时，设计不会扭曲？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-24T12:55:25.437

由于您在 WPF 中嵌入的 webbrowser 控件是 internetexplorer，因此您的网页必须设计为在 IE 上运行。

吹嘘

# resteasy - 使用 RESTful URL 传递不确定的查询参数并在 RESTEasy 中读取它们

> ID：10735064
> 
> 赞同：3
> 
> 时间：2012-05-24T09:49:57.203
> 
> 标签：resteasy, url-parameters

我需要使用 RESTEasy 设计一个 RESTful 服务。客户可以使用他们想要的任意数量的查询参数来调用这个公共服务。我的 REST 代码应该能够以某种方式读取这些查询参数。例如，如果我有图书搜索服务，客户可以拨打以下电话。

```
http://domain.com/context/rest/books/searchBook?bookName=someBookName
http://domain.com/context/rest/books/searchBook?authorName=someAuthor& pubName=somePublisher
http://domain.com/context/rest/books/searchBook?isbn=213243
http://domain.com/context/rest/books/searchBook?authorName=someAuthor 
```

我必须编写一个如下所示的服务类来处理这个问题。

```
@Path("/books")
   public class BookRestService{

    // this is what I currently have, I want to change this method to in-take all the 
    // dynamic parameters that can come
    @GET
    @Path("/searchBook")
    public Response searchBook(@QueryParam("bookName") String bookName,@QueryParam("isbn") String isbn) {

     // fetch all such params
     // create a search array and pass to backend

    }

    @POST
    @Path("/addBook")
    public Response addBook(......) {
    //....
     }
    } 
```

抱歉格式不好（我无法理解代码格式在这个编辑器中的工作原理！）。如您所见，我需要更改方法 searchBook() 以便它接受任意数量的查询参数。

我在这里看到了类似的帖子，但找不到正确的解决方案。

[如何设计一个带有可选参数的 RESTful URL 进行搜索？](https://stackoverflow.com/questions/2323840/how-to-design-a-restful-url-for-search-with-optional-paramaters/2324628#2324628)

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-23T20:43:16.770

在这种情况下，最好的办法是使用包含搜索条件的所有字段的 DTO。例如，您提到了 4 个不同的参数。

1.  书名（书名）
2.  作者姓名（作者姓名）
3.  发布者名称 (pubName)
4.  国际标准书号 (isbn)

为您要将参数映射到的每个属性创建一个包含具有以下注释的字段的 DTO：

```
public class CriteriaDTO{

  @QueryParam("isbn")
  private String isbn;
.
.

Other getter and setters of other properties

} 
```

这是一种方法供您参考：

```
@GET
@Produces("application/json")
@Path("/searchBooks")
public ResultDTO search(@Form CriteriaDTO dto){
} 
```

使用以下 URL 将自动填充 CriteriaDTO 的属性 isbn：

your.server.ip:port/URL/Mapping/searchBooks?isbn=123456789&pubName=testing

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:19:38.570

这里提出了一个类似的问题：[How do you map multiple query parameters to the fields on Jersey GET request?](https://stackoverflow.com/questions/5722506/how-do-you-map-multiple-query-parameters-to-the-fields-of-a-bean-on-jersey-get-r)

我改为使用 kensen john 的答案（UriInfo）。它允许只遍历一组以检查传递了哪些参数。

# tags - 如何使用 OS 环境变量配置 glassfish domain.xml？

> ID：10735076
> 
> 赞同：2
> 
> 时间：2012-05-24T09:50:59.487
> 
> 标签：tags, glassfish, environment-variables, glassfish-3

我想将环境变量传递给 glassfish domain.xml，如下所示：-

```
<jvm-options>-DMY_FILE=file:///${MY_HOME}/a.txt</jvm-options> 
```

`${MY_HOME}`是一个环境变量。

我不确定这是否可能。你能帮忙提供进一步的建议吗？非常感谢您提前提供的帮助。我期待着尽快收到您的来信。

问候，

查理·Ch。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:22:35.570

您只能使用 Java 系统属性 (-D) 来定义 domain.xml 之外的变量。

有关详细信息，请参阅[Oracle GlassFish Server 3.0.1 域文件格式参考](http://docs.oracle.com/cd/E19798-01/821-1753/abhau/index.html)。

如果您需要更好地定期更改设置，您可以编写一个小的包装脚本，该脚本调用 asadmin 来更改配置的特定部分，然后启动/重新启动 GlassFish。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-02T15:20:50.987

如果您正在运行`Payara`(> `4.1.2.172`) 服务器，*现在*可以使用环境变量。

我正在使用官方[文档](https://docs.payara.fish/enterprise/docs/5.26.0/documentation/payara-server/server-configuration/var-substitution/usage-of-variables.html)的摘录：

## 变量引用可以这样使用：

```
<domain log-root="${com.sun.aas.instanceRoot}/${ENV=STAGE_NAME}/logs"> 
```

## 变量引用可以用在这些地方：

### 域配置

*   `domain.xml`（在包含配置值的属性值或文本节点内部）
*   `logging.properties`（内部属性值）

### 包描述符：

*   `web.xml`/`glassfish-web.xml`
*   `ejb-jar.xml`/`glassfish-ejb-jar.xml`
*   `application.xml`/`glassfish-application.xml`
*   `glassfish-resources.xml`

### 框架描述符：

*   持久性.xml
*   面孔-config.xml

### 在注释中：

*   `@EJB`
*   `@WebService`
*   `@Stateless`
*   `@Stateful`
*   `@Singleton`
*   `@ActivationConfigProperty`
*   `@DataSource`
*   `@WebServlet`

### 其他

*   在应用程序内部的 JNDI 查找中
*   在启动前和启动后命令文件中。[自 Payara 服务器 4.1.2.174 起]
*   在 JVM 选项中。[自 Payara 服务器 4.1.2.182 和 5.182 起]
*   在 payara-expression-config.properties 文件中 [自 Payara Server 5.20.0]。

# asp.net-mvc - 第二次没有调用控制器函数

> ID：10735078
> 
> 赞同：2
> 
> 时间：2012-05-24T09:51:08.607
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我正在研究 asp mvc 应用程序。我正在根据数据库中的数据生成图表。当我点击 go 按钮时，我调用了 getReportData() 函数，该函数从 db 中获取结果并设置图表图像。

当我第一次调用时，我的函数工作正常，但第二次只显示网格数据，我的意思是生成图像的函数不是第二次调用，我试图调试它，但只有第一次我得到调试点而不是第二次.

```
 function getReportData() {
        //            debugger;
       //Enable wait Icon & disable others

       $('#span_bar_bg').css('display','none');
       $('#span_bar_wait').css('display','block');
       $('#span_bar_result').css('display','none');
       $('#span_pie_bg').css('display','none');
       $('#span_pie_wait').css('display','block');
       $('#span_pie_result').css('display','none');
       var report='ProductNameBatch';
       var subreport='Non-FaceBook';
        if( report.toLowerCase()=='ctss' )
        {
         alert('Report is temporarily Un-available');
         return;
        }

        if (parent.top.$("input#from_date").val() == "" ||  parent.top.$("input#to_date").val() == "") {
            alert("Invalid Date Range !!!");
            return;
        }

        $("#span_grid_bg").css('display','none');
        $("#span_grid_view").css('display', 'block');

           // "sScrollX": "100%",
           // "sScrollXInner": "101%",
           // "bScrollCollapse": true,

        $('#grid_view').dataTable({
            "bAutoWidth": true,
            "bServerSide": false,
            "sAjaxSource": "fetchGridReport?&from_date=" + parent.top.$("input#from_date").val() + "&to_date=" + parent.top.$("input#to_date").val() + "&report="+report+"&subreport="+subreport,
            "bProcessing": true,
            "bRetrieve": false,
            "bDestroy": true,
            "iDisplayLength": 17,
            "aoColumns": columnList
        });

         $('#grid_view').dataTable().fnAdjustColumnSizing();

        //Request for reports 

         debugger;
           $('#span_bar_result img[alt="Report by Country-Language"]').attr('src','/fetchChartReport?chartType=Bar&from_date=' + parent.top.$("input#from_date").val() + '&to_date=' +parent.top.$("input#to_date").val() +  '&report='+report+'&subreport='+subreport+'&reporttitle=Report by Country-Language&displayformat=2&filterParamList=no');
           $('#span_pie_result img[alt="Report by Country-Language"]').attr('src','/fetchChartReport?chartType=Pie&from_date=' + parent.top.$("input#from_date").val() + '&to_date=' + parent.top.$("input#to_date").val() +  '&report='+report+'&subreport='+subreport+'&reporttitle=Report by Country-Language&displayformat=2&filterParamList=no');

         debugger;
           $('#span_bar_result img[alt="Report by Response"]').attr('src','/fetchChartReport?chartType=Bar&from_date=' + parent.top.$("input#from_date").val() + '&to_date=' +parent.top.$("input#to_date").val() +  '&report='+report+'&subreport='+subreport+'&reporttitle=Report by Response&displayformat=2&filterParamList=no');
           $('#span_pie_result img[alt="Report by Response"]').attr('src','/fetchChartReport?chartType=Pie&from_date=' + parent.top.$("input#from_date").val() + '&to_date=' + parent.top.$("input#to_date").val() +  '&report='+report+'&subreport='+subreport+'&reporttitle=Report by Response&displayformat=2&filterParamList=no');

         debugger;
           $('#span_bar_result img[alt="Report by Resolved vs UnResolved"]').attr('src','/fetchChartReport?chartType=Bar&from_date=' + parent.top.$("input#from_date").val() + '&to_date=' +parent.top.$("input#to_date").val() +  '&report='+report+'&subreport='+subreport+'&reporttitle=Report by Resolved vs UnResolved&displayformat=2&filterParamList=no');
           $('#span_pie_result img[alt="Report by Resolved vs UnResolved"]').attr('src','/fetchChartReport?chartType=Pie&from_date=' + parent.top.$("input#from_date").val() + '&to_date=' + parent.top.$("input#to_date").val() +  '&report='+report+'&subreport='+subreport+'&reporttitle=Report by Resolved vs UnResolved&displayformat=2&filterParamList=no');

         debugger;
           $('#span_bar_result img[alt="Turk Spend by Country($)"]').attr('src','/fetchChartReport?chartType=Bar&from_date=' + parent.top.$("input#from_date").val() + '&to_date=' +parent.top.$("input#to_date").val() +  '&report='+report+'&subreport='+subreport+'&reporttitle=Turk Spend by Country($)&displayformat=2&filterParamList=no');
           $('#span_pie_result img[alt="Turk Spend by Country($)"]').attr('src','/fetchChartReport?chartType=Pie&from_date=' + parent.top.$("input#from_date").val() + '&to_date=' + parent.top.$("input#to_date").val() +  '&report='+report+'&subreport='+subreport+'&reporttitle=Turk Spend by Country($)&displayformat=2&filterParamList=no');

        //register call back functionality invoked when result image response complete
         $('img[id^="img_barchart_result"]').bind('load',function(){
             onLoadComplete('bar');

         });

         $('img[id^="img_piechart_result"]').bind('load',function(){
              onLoadComplete('pie');
         });

    } 
```

这是我的控制功能

```
 public FileResult fetchChartReport(SeriesChartType chartType, string from_date, string to_date, string report, string subreport,string reporttitle,string displayformat, string filterParamList)
    {
        try
        {
            Chart chart = new Chart();
            string repportlistid = "chart-" + report.ToLower() + "-" + subreport.ToLower();
            //List<string> reportNameList=  GetParameterListById(repportlistid); 
            //return View();

            reportObject = getReportInstance(report);
            chart = reportObject.getChartReport(chartType, from_date, to_date, report.ToLower(), subreport.ToLower(), reporttitle,displayformat, filterParamList);

            MemoryStream ms = new MemoryStream();
            chart.SaveImage(ms);

            return File(ms.GetBuffer(), @"image/png");

        }
        catch (Exception ex)
        {
            return File(Server.MapPath(Url.Content("~/Content/dashboard/images/dash_no_data.jpg")), "image/jpg");
        }

    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:21:07.727

铺路，

这是由于在您启动 img 单击时 DOM 发生了变化，因此您的绑定事件处理程序被吹走了。尝试改用 jquery .on() 事件处理程序：

[http://api.jquery.com/on/](http://api.jquery.com/on/)

这与旧的 jquery .live() 事件的工作方式相似，因为即使刷新 DOM 也会保留事件处理程序，直到您发出 .off() 请求或离开页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:25:05.740

我认为这里的 url 有问题 **'/fetchChartReport?chartType=Pie'** 你需要在这里给出正确的控制器和动作名称。如果您从另一个页面“fetchGridReport”发布。所以最好从隐藏字段中获取 url，如下所示。

var url=$("#hdnChartUrl").val();

$('#span_bar_result img[alt="Report by Resolved vs UnResolved"]').attr('src', **url** +'?chartType=Bar&from_date=' + parent.top.$("input#from_date").val () + '&to_date=' +parent.top.$("input#to_date").val() + '&report='+report+'&subreport='+subreport+'&reporttitle=Resolved vs UnResolved报告&displayformat=2&filterParamList=no' );

现在看到 url 是动态添加的。

# iphone - 应用程序是否应该开始位置跟踪以从 CLLocationManager 获取任何最后一个已知位置？

> ID：10735083
> 
> 赞同：5
> 
> 时间：2012-05-24T09:51:22.130
> 
> 标签：iphone, objective-c, location, cllocationmanager

目前，正在开发一个需要从 CLLocationManager 获取最后位置的应用程序（没有任何定期跟踪）。不管多少岁，它是准确的。我不需要也不想开始跟踪——我只需要从缓存中获取最后一个位置就可以了。恕我直言，CLLocationManager 是 iOS 中的共享组件，如果某个应用程序使用位置跟踪，那么另一个应用程序应该能够使用 CLLocationManager.location 中的最新位置。只需分配/初始化 CLLocationManager 并获取其位置就足够了。然而事实并非如此。我已经在 iPhone4 上进行了测试 - 启动了谷歌地图，看到了我当前的位置，然后转到了我的应用程序，但是在 [[CLLocationManager alloc] init] 位置属性之后为 nil。

更新：尝试 [locationManager startUpdatingLocation]；和 [locationManager stopUpdatingLocation]；但结果是一样的。我想，唯一的解决方案是开始定期跟踪？

UPDATE2：很奇怪，但是在 CLLocationManager 的 alloc/init 之后没有“应用程序想要使用位置服务”的警报。这是我的代码片段：

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];

[locationManager startUpdatingLocation];
[locationManager stopUpdatingLocation];
NSLog(@"%@", locationManager.location); //prints nil 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:04:33.890

首先，您应该检查您`locationManager`是否预先保存了一个“静态”位置。

如果是这样，你就完成了。

如果没有，你应该`startUpdatingLocation`然后在`didUpdateToLocation:fromLocation:`回调中，`stopUpdatingLocation`一旦你得到位置。

我的经验表明，这是只获得一个位置的最佳方式。

更新以匹配作者更新：

你不应该`stopUpdatingLocation`只是在`startUpdatingLocation`. `startUpdatingLocation`在后台启动服务，所以你应该等到你得到一个位置，所以在回调方法中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:59:31.903

To make any use of `CLLocationManager` you need to implement `CLLocationManagerDelegate` somewhere.

`-[CLLocationManager startUpdatingLocation]` starts an async process. If you stop it in the same runloop cycle the process never gets started and that is the reason you never see the permission dialog.

It goes something like this:

```
@interface MyClass : NSObject <CLLocationManagerDelegate> {
    CLLocationManager *manager;
    CLLocation *lastLocation;
}

@end

@implementation

- (id)init {
    self = [super init];
    if (self) {
        manager = [[CLLocationManager alloc] init];
        manager.delegate = self;
        [manager startUpdatingLocation];
    }
    return self;
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation;
{   
    lastLocation = newLocation;
    [manager stopUpdatingLocation];
}

// in your real implementation be sure to handle the error cases as well.
@end 
```

# ios - ios动画旋转效果

> ID：10735085
> 
> 赞同：0
> 
> 时间：2012-05-24T09:51:33.263
> 
> 标签：ios, animation, core-animation

在我的应用程序中，我说中心有一颗大恒星“太阳”，周围有小行星。

借助动画，我如何通过触摸将行星（滚动）围绕大星“太阳”移动。

因此，当说行星 A 向右滚动时，它的位置将占据行星 B，它在其左侧，行星 A 的大小变得更小，行星 B 变得更大（以显示远近效果）。

它继续围绕恒星“太阳”旋转。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:27:44.097

最简单的方法是将所有行星图像视图放在以太阳视图为中心的透明容器视图上。让我们称这个不可见的视图为 orbitView。然后在orbitView上放一个旋转手势识别器。如果您围绕它的 Z 轴旋转 orbitView，则所有行星视图都应该围绕 orbitView 的中心旋转，从而为您提供所需的效果。

编辑：重读您的帖子，听起来您可能希望行星以 3D 形式运行，就好像您“在黄道平面上”一样，看着它们的轨道。这种影响更复杂，我不得不考虑一下。

# asp.net - 如何强制 linq to Sql 立即执行查询

> ID：10735086
> 
> 赞同：2
> 
> 时间：2012-05-24T09:51:38.840
> 
> 标签：asp.net, linq-to-sql

我在 aspx 页面上有一个控件中继器。我正在尝试将查询移出控件并进入父页面，因为每个控件的数据库都受到了巨大的打击。问题是我收到以下错误。

```
Cannot access a disposed object.
Object name: 'DataContext accessed after Dispose.'. 
```

我不明白这一点，因为我认为执行 .ToList() 会强制执行查询

我在父页面中的代码

```
Private _activityList As IEnumerable(Of Activity)
Public ReadOnly Property ActivityList() As IEnumerable(Of Activity)
    Get
        Return _activityList
    End Get
End Property

Sub PopulatePage()
    Dim activityList = From a In dbContext.Activities Where a.PA.PA_Key.ToUpper().Trim() = "DCC" _
        Select a

    _activityList = activityList.AsEnumerable()
End Sub 
```

我控制的代码是：

```
Public _activityList As List(Of Activity)
Sub Page_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
    _activityList = CType(Me.Page, ParentPage).ActivityList.ToList()
End Sub

Sub grdSelectedActivities_NeedDataSource(ByVal source As Object, ByVal e As Telerik.WebControls.GridNeedDataSourceEventArgs) Handles grdSelectedActivities.NeedDataSource

    Dim lnqActivities = _activityList
    Dim objActivity As Activity = (From x In lnqActivities Where x.AC_Code = ActivityCode Select x).Single

    Dim lnqRoundActivities = (From roundactivity In objActivity.RoundActivities Where roundactivity.RA_DS_Code = DepartmentalSettingsCode 
                                  Select roundactivity Order By roundactivity.RA_Name)

    grdSelectedActivities.DataSource = lnqRoundActivities
End Sub 
```

**编辑**

我认为这是失败的，因为它试图在`grdSelectedActivities_NeedDataSource`控制方法中获取 RoundActivities。因此我需要发送一个具有 RoundActivityies 子对象的活动对象。

我试图创建这个对象，但得到以下错误：

```
Explicit construction of entity type 'Activity' in query is not allowed.
enter code here 
```

这是更新的代码：

```
 Dim activityList = (From a In dbContext.Activities Where a.PA.PA_Key.ToUpper().Trim() = "DCC" Select New Activity With {.AC_Code = a.AC_Code, .RoundActivities = a.RoundActivities}) 
```

**解决方案：**

我听从了@kristoferA 的建议并做了以下事情

```
Dim loadOptions = New DataLoadOptions()
loadOptions.LoadWith(Of Activity)(Function(a As Activity) a.RoundActivities)
loadOptions.AssociateWith(Of Activity)(Function(a As Activity) a.RoundActivities.Where(Function(z) If(z.RA_DS_Code = departmentCode, False)))
dataContext.LoadOptions = loadOptions 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:20:09.030

听起来你很懒惰加载一些关联。

关闭延迟加载 (dc.DeferredLoadingEnabled = false)，并将 DataLoadOptions 对象传递给 dc.LoadOptions 以指示 DC 您想要预先加载的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:01:22.293

我**请客 dbContext**在 PopulatePage() 完成后得到处置，并且您的 Linq 选择返回类型是 IEnumerable(Of Activity) ，这只是一个准备好的 SQL 语句。

尝试..

```
_activityList = activityList.ToList()//.AsEnumerable() 
```

## 编辑

如果您的模型是无状态的，您可以创建新的 dbContext 然后枚举并处理它。

```
Using db As New dbContext()

    Dim activityList = (From a In dbContext.Activities Where a.PA.PA_Key.ToUpper().Trim() = "DCC" _
    Select a).ToList()

    _activityList = activityList.ToList()
End Using 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:07:12.700

ai.farfa 对 ToList() 是正确的。那是触发实际查询的调用。我认为你应该在这条线上做：

```
 grdSelectedActivities.DataSource = lnqRoundActivities.ToList() 
```

# mysql - 多用户同时访问数据库

> ID：10735090
> 
> 赞同：1
> 
> 时间：2012-05-24T09:51:59.420
> 
> 标签：mysql, sql, database

如果一个数据库被许多用户访问，那么是否有必要锁定数据库？如果是，那么如何锁定表或数据库？如果不带锁有什么问题？例如：如果一个用户更新表并且有人从这个表中获取数据，那么有必要锁定这个表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:01:11.237

你应该使用`Transactions`：

当用户更新表时，`UPDATE`语句应该是 inside`START TRANSACTION`子句。如果 UPDATE 成功，则`COMMIT`else `ROLLBACK`。

您可以使用 锁定表`LOCK TABLES`。但是，如果您使用 LOCK TABLES 锁定表，则所有更新都会停止，直到进行完整性检查。`READ LOCAL`如果您为在表末尾启用并发插入的表获得锁（与写锁相反），则允许读取，其他客户端的插入也是如此。

[http://dev.mysql.com/doc/refman/5.5/en/commit.html](http://dev.mysql.com/doc/refman/5.5/en/commit.html)

[http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:14:48.663

根据您的事务隔离级别，MySQL 将自动发出锁。它们如何交互取决于事务隔离级别。

只有在非常特定的情况下，您才会手动请求对表或数据库资源的锁定。大多数情况下，这是由 MySQL 为您完成的。上面的答案有链接，这些链接对于阅读和理解非常重要。

# silverlight - 双击行时加载视图 - 绑定工作，点击时触发事件，但我如何真正让视图弹出？

> ID：10735091
> 
> 赞同：1
> 
> 时间：2012-05-24T09:52:01.070
> 
> 标签：silverlight, mvvm, view, event-handling, telerik

我在 Silverlight 中有一个包含`telerik:RadGridView`多个列的视图。

我已将其连接起来，以便当用户双击这些列之一时，会触发一个事件。但是，我不知道在事件处理程序中放什么。

```
 private void RowClicked()
        {
          //What goes here?
        } 
```

我想做的就是在我的当前视图上加载一个弹出视图，并带有一个关闭按钮，以便用户可以返回到前一个视图。一个简单的想法肯定会在任何地方完成十亿次，但我无法弄清楚或在任何地方找到这样的例子。

任何人都可以帮忙吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:00:46.060

您可以将前一个视图设置为“RowClicked()”方法的输入参数。您将参考当前方法中的先前视图。您可以通过命令使用它（将命令和命令参数绑定到某些操作/事件）。

我还有一个想法（如果你有很多视图）：你可以创建一个导航服务。它是一个接口，包含事件和方法。您应该使用事件进行导航和方法 - 用于发送所需的数据。视图中的每个人都应该实现这个接口。需要的事件将通过某些操作（例如：按钮单击）在视图下引发。至于事件：您可以创建一个自定义事件处理程序，在那里您将设置一个发送者实例和所需的参数。您应该创建一个导航管理器，在那里您应该为选定的视图创建一个属性并订阅每个人的事件。如果用户想要导航到另一个视图，他将执行一些操作并且系统将引发一个事件。您可以为创建的视图创建自定义容器。此容器可用于获取所需视图的创建实例。如你所知，创建一个新实例对系统来说很重：需要一些时间和系统资源。将很容易获得创建的视图实例，而不是创建一个新的。对于设置默认数据或刷新绑定，您可以使用自定义方法，将为其添加到导航界面的承包商。

这是一个简单的想法，我在一个项目中使用过。至于其他示例：您可以在互联网上找到其他导航框架和自定义类。但是，创建自己的系统的过程将使您的工作经验更上一层楼。

# c# - 如何将数据从 Excel 导入 c# 中 asp.net 页面中的数据集？

> ID：10735097
> 
> 赞同：0
> 
> 时间：2012-05-24T09:52:14.683
> 
> 标签：c#, excel

我有一个包含超过 20,000 条记录的 Excel 表，我想以一种非常有效和快速的方式将这些数据放入数据集或数据表中，以便处理我的数据。请问有人知道如何使用C#代码做到这一点...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:07:49.853

```
public static DataSet exceldata(string filelocation)

{

DataSet ds = new DataSet();

 OleDbCommand excelCommand = new OleDbCommand();OleDbDataAdapter excelDataAdapter = new OleDbDataAdapter();

 string excelConnStr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + filelocation + ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=1""";

OleDbConnection excelConn = new OleDbConnection(excelConnStr);

excelConn.Open();

DataTable dtPatterns = new DataTable();excelCommand = new OleDbCommand("SELECT `PATTERN` as PATTERN, `PLAN` as PLAN FROM [PATTERNS$]", excelConn);

excelDataAdapter.SelectCommand = excelCommand;

excelDataAdapter.Fill(dtPatterns);

"dtPatterns.TableName = Patterns";

ds.Tables.Add(dtPatterns);

return ds;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T02:27:08.750

我自己找到了答案。有一个名为 .dll 的 dll `Excel.dll [2.0.1.0] ExcelDataReader`。我没有链接，因为我是从我的一位朋友那里得到的。我想你可以从网上搜索并下载`exceldatareader.dll`

```
IExcelDataReader iExcelDataReader = null;

FileInfo fileInfo = new FileInfo(FpdUnConLoanUpload.PostedFile.FileName);
string file = fileInfo.Name;

if (file.Split('.')[1].Equals("xls"))
{
    iExcelDataReader = ExcelReaderFactory.CreateBinaryReader(oStream);
}
else if (file.Split('.')[1].Equals("xlsx"))
{
    iExcelDataReader = ExcelReaderFactory.CreateOpenXmlReader(oStream);
}

iExcelDataReader.IsFirstRowAsColumnNames = true;
DataSet dsUnUpdated = new DataSet();
dsUnUpdated = iExcelDataReader.AsDataSet();
iExcelDataReader.Close();
if (dsUnUpdated != null)
{
}
else
{
    lblCmnMesage.Text = "No Data Found In The Excel Sheet!";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:13:36.670

我认为您对 20000 的计数感到惊讶。这不是一个大数目。您可以使用[http://openxmldeveloper.org/](http://openxmldeveloper.org/)高效地导入和处理，而无需依赖互操作。唯一的限制是您需要有 xlsm 格式的 excel（Excel 宏）

# c - 为什么#define 不需要分号？

> ID：10735099
> 
> 赞同：19
> 
> 时间：2012-05-24T09:52:16.507
> 
> 标签：c, c-preprocessor

**我正在用C**编写一些测试代码。`;`错误地我在 a之后插入了a `#define`，这给了我错误。为什么 s 不需要分号`#define`？

进一步来说 ：

**方法一：工作**

```
const int MAX_STRING = 256;

int main(void) {
    char buffer[MAX_STRING];
} 
```

**方法2：不起作用 - 编译错误。**

```
#define MAX_STRING 256;

int main(void) {
    char buffer[MAX_STRING];
} 
```

这些代码的不同行为的原因是什么？这两个 MAX_STRING 都不是常量吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2016-11-07T08:29:18.453

```
#define MAX_STRING 256; 
```

方法：

每当您在预处理时找到 MAX_STRING 时，将其替换为`256;`. 在您的情况下，它将使用方法 2：

```
#include <stdio.h>
#include <stdlib.h>
#define MAX_STRING 256;

int main(void) {
    char buffer [256;];
} 
```

这不是有效的语法。代替

```
#define MAX_STRING 256; 
```

和

```
#define MAX_STRING 256 
```

您的两个代码之间的区别在于，在第一种方法中，您声明一个等于的常量，`256`但在您定义的第二个代码中，您在源文件中定义`MAX_STRING`为代表。`256;`

> #define 指令用于定义预处理器使用的值或宏，以在编译程序源代码之前对其进行操作。因为预处理器定义在编译器作用于源代码之前被替换，所以由#define 引入的任何错误都很难追踪。

语法是：

```
#define CONST_NAME VALUE 
```

如果`;`末尾有 a ，则将其视为`VALUE`.

要了解`#define`s 究竟是如何工作的，请尝试定义：

```
#define FOREVER for(;;)
...
    FOREVER {
         /perform something forever.
    } 
```

[John Hascall](https://stackoverflow.com/users/2040863/john-hascall)的有趣评论：

> 大多数编译器都会为您提供一种在预处理器阶段之后查看输出的方法，这有助于调试此类问题。

[`gcc`](https://gcc.gnu.org/onlinedocs/gcc-6.2.0/gcc/Overall-Options.html#Overall-Options)可以用 flag 来完成`-E`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-24T09:53:15.913

`#define`是[**预处理器指令**](http://en.wikipedia.org/wiki/C_preprocessor)，而不是 C 语法定义的*语句*或*声明*（两者都需要以分号结尾）。每种语法的规则都不同。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-05-24T09:53:34.643

`define`是一个预处理器指令，是一个简单的替换，它不是一个声明。

顺便说一句，作为替代，它可能包含一些`;`作为它的一部分：

```
// Ugly as hell, but valid 
#define END_STATEMENT ;

int a = 1 END_STATEMENT // preprocessed to -> int a = 1; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-11-07T08:29:19.883

两个常数？不。

第一种方法不会产生 C 语言中的*常量*。const 限定的变量不符合 C 中的常量。您的第一种方法之所以有效，是因为*过去的 C99 C*编译器支持可变长度数组 (VLA)。在第一种情况下，您`buffer`是 VLA，特别是因为`MAX_STRING`它*不是*常数。尝试在文件范围内声明相同的数组，您会收到错误消息，因为文件范围内不允许使用 VLA。

第二种方法可用于为 C 中的常量值分配名称，但您必须正确执行此操作。`;`in 宏定义不应该在那里。宏通过文本替换工作，您不想将额外的内容替换`;`到您的数组声明中。定义该宏的正确方法是

```
#define MAX_STRING 256 
```

在 C 语言中，当涉及到定义正确的命名常量时，您基本上仅限于宏和枚举。不要尝试使用`const`“常量”，除非您真的知道它可以满足您的目的。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-05-24T09:53:23.450

因为这就是为***预编译器指令***决定语法的方式。

在 c/c++ 中，只有以 a 结尾的***语句******是预处理器指令而不是语句***。`;`***`#define`***

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-11-07T08:28:00.387

就语言而言，第二个版本没有定义常量，只是一个文本块的替换规则。一旦*预处理器*完成了它的工作，*编译器*就会看到

`char buffer [256;];`

这在语法上无效。

故事的寓意：更喜欢对`const int MAX_STRING = 256;`您、编译器和调试器有帮助的方式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-13T22:06:56.493

这个预处理器指令：

```
#define MAX_STRING 256; 
```

告诉预处理器用- 和*分号*`MAX_STRING`替换所有s 。预处理器语句末尾不需要分号。如果你放一个，预处理器实际上认为你用分号表示它。`256;`

 *如果您`#define`对常量的 s 感到困惑，`const int`可能会更容易理解。

如果您想了解有关如何正确使用这些预处理器指令的更多信息，请尝试查看[此网站。](http://www.cplusplus.com/doc/tutorial/preprocessor/)*

# sockets - NodeJS程序出错时只断开一个socket

> ID：10735100
> 
> 赞同：4
> 
> 时间：2012-05-24T09:52:23.620
> 
> 标签：sockets, node.js, error-handling

目前，当 NodeJS 服务器发生错误时（例如：缓冲区“越界”），整个服务器都会停止运行。有没有办法配置它，以便只有发生错误的套接字断开连接，使服务器在线并且其他连接处于活动状态？我可以使用“uncaughtException”错误，但无法知道哪个套接字导致错误/崩溃。这通常是如何处理的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:15:30.073

您可以使用该`try .. catch(err)`构造来捕获套接字的任何回调中发生的任何异常，然后`socket.end()`在发生错误时断开客户端连接。这可以防止整个服务器崩溃。显然，对于其他“未捕获”错误，您将不得不求助于“未捕获异常”回调，它[不会结束服务器](http://debuggable.com/posts/node-js-dealing-with-uncaught-exceptions:4c933d54-1428-443c-928d-4e1ecbdd56cb)。你为什么不阅读[这个](https://stackoverflow.com/questions/9558360/node-js-reliability-for-large-application)和[这个](https://stackoverflow.com/questions/7310521/node-js-best-practice-exception-handling)以获得更多答案。

# json - 信息窗口仅针对最后的 JSON 记录打开

> ID：10735101
> 
> 赞同：0
> 
> 时间：2012-05-24T09:52:25.783
> 
> 标签：json, google-maps, google-maps-markers, infowindow

我正在尝试显示`InfoWindow`，但问题是我只能看到 JSON 的最后一条记录。

`onmouseover`显示其他 2 个标记的标题，但它们`InfoWindow`的 s 没有打开。请建议如何修复此代码

```
var infoWindow = new google.maps.InfoWindow();
for (var i = 0, length = json.length; i < length; i++) {
  var data = json[i],
  latLng = new google.maps.LatLng(data.lat, data.lng); 

  var marker = new google.maps.Marker({
  position: latLng,
  map: map,
  title: data.title
  });
}

(function(marker, data) {
google.maps.event.addListener(marker, "click", function(e) {
infoWindow.setContent(data.description);
infoWindow.open(map, marker);
 });

})(marker, data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:15:03.590

没关系，我很愚蠢，没有先看到它。我在循环之后添加了点击事件。我需要做的就是这个。

```
var infoWindow = new google.maps.InfoWindow();

for (var i = 0, length = json.length; i < length; i++) {
var data = json[i],
latLng = new google.maps.LatLng(data.lat, data.lng); 

var marker = new google.maps.Marker({
position: latLng,
map: map,
title: data.title
});

(function(marker, data) {

google.maps.event.addListener(marker, "click", function(e) {
infoWindow.setContent(data.description);
infoWindow.open(map, marker);
});

})(marker, data);
} 
```

即闭包必须在循环内

# asp.net - 页面给出关于状态信息无效并且可能损坏的错误

> ID：10735102
> 
> 赞同：1
> 
> 时间：2012-05-24T09:52:28.387
> 
> 标签：asp.net, .net, asp.net-mvc, jmeter

我正在使用 jmeter 并在运行该脚本时录制脚本后，然后在某些页面上出现错误：

```
The state information is invalid for this page and might be corrupted.

   [FormatException: Invalid length for a Base-64 char array.]
   System.Convert.FromBase64String(String s) +0
   System.Web.UI.ObjectStateFormatter.Deserialize(String inputString) +77
   System.Web.UI.ObjectStateFormatter.System.Web.UI.IStateFormatter.Deserialize(String     serializedState) +4
   System.Web.UI.Util.DeserializeWithAssert(IStateFormatter formatter, String serializedState) +37
   System.Web.UI.HiddenFieldPageStatePersister.Load() +113 
```

为什么我收到此错误？

当我手动打开它时，使用 jmeter 出错的页面运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T05:00:27.603

解决方案是使用相关性，因为状态信息将动态生成。

请参考以下链接进行实施：

*   [http://apache-jmeter.blogspot.com/2011/12/correlation-regular-expression.html](http://apache-jmeter.blogspot.com/2011/12/correlation-regular-expression.html)
*   [http://www.youtube.com/watch?v=j8bBiCeQ88w](http://www.youtube.com/watch?v=j8bBiCeQ88w)

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:34:24.677

在发布到服务器之前，您必须对您的（防伪）令牌进行编码（Base64）。

...顺便说一句：在询问之前，为什么不尝试首先搜索答案，如果不是使用谷歌而不是通过这个资源或至少在[Jmeter 邮件存档中搜索？](http://jmeter.512774.n5.nabble.com/)
当然，你会发现很多有用和有趣的东西！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T16:26:02.677

我知道这个问题已经存在两年了，但我遇到了完全相同的问题，包括只有一些线程有错误的事实。我通过检查收到错误的请求中的“使用多部分/表单数据进行 POST”选项来修复它。

# sql - 练习数据库查询（sql/tsql）

> ID：10735105
> 
> 赞同：1
> 
> 时间：2012-05-24T09:52:33.480
> 
> 标签：sql, database, tsql

我希望提高我在 t-sql（远程过程调用等）方面的技能并在 DB 上进行查询。我有一个macbook，想知道有没有什么软件可以用来完成这个？理想情况下，我根本不想在这台计算机上安装任何软件，但如果我别无选择，那就这样吧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:02:38.880

我强烈推荐[SQL Fiddle](http://sqlfiddle.com/)。您可以在多种类型的数据库（不同版本的 SQL Server、MySql、Oracle 等）上创建模式，练习编写查询，甚至将链接发送给人们，以便他们可以在与您相同的模式/示例数据上进行练习。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T10:00:24.950

在这里，您可以在不安装软件的情况下练习查询。

[http://sqlzoo.net/](http://sqlzoo.net/)

# .net - 从远程部分下的配置文件中读取端口号

> ID：10735115
> 
> 赞同：1
> 
> 时间：2012-05-24T09:53:07.840
> 
> 标签：.net, remoting

我正在尝试`<system.runtime.remoting>`从`channels\channel ref="tcp" port="9090"`. `App.config`配置文件如下所示。

```
<?xml version="1.0"?>
<configuration>
<system.runtime.remoting>
    <application Name="MyServer">
      <service>
        <wellknown mode="Singleton" type="MyServer.Servers.SvrConnection, MyServer" objectUri="MyConnection" />
      </service>
      <channels>
       <channel ref="tcp" port="9090">
          <serverProviders>
            <formatter ref="binary" typeFilterLevel="Full" />
          </serverProviders>
          <clientProviders>
            <formatter ref="binary" />
          </clientProviders>
        </channel>
      </channels>
    </application>
  </system.runtime.remoting>
</configuration> 
```

我将如何实现这一目标？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T09:55:34.277

我通过读取`App.config`C# 中的 XML 文档并使用 XML 元素读取端口号解决了这个问题。请告知是否有更好的方法来做到这一点。

# android - ImageButton 因“内部”OnClickListener 而崩溃

> ID：10735127
> 
> 赞同：0
> 
> 时间：2012-05-24T09:53:50.517
> 
> 标签：android, imagebutton, onclicklistener

出于某种原因，将“内部”附加`OnClickListener`到`ImageButton`应用程序会使应用程序崩溃。对于正常`Button`的 s 它工作正常 - 只有它才会`ImageButton`崩溃。

```
public class SomeWidgets extends Activity implements OnClickListener {
    ....
    button1         = (Button)findViewById(R.id.button1);
    button1.setOnClickListener(this);   
    imagebutton     = (ImageButton)findViewById(R.id.imagebutton)
    imagebutton.setOnClickListener(this);
    ....
    ....
} 
```

上面的代码在点击时崩溃`imagebutton`。`button1`工作正常，即使两者都是以`OnClickListener`完全相同的方式创建和附加到的。（是点击导致它崩溃，而不是`onClick`点击的处理。）

但是，如果我创建一个私有内部`OnClickListener`类并将其附加到图像按钮，那么它工作正常。

有任何想法吗？显然，将“内部”附加到 a 时出现问题`(this)` `OnClickListener`，`ImageButton`而将其附加到 a 时工作正常`Button`。

编辑：看起来我发现了问题。如果我像这样覆盖 onClick：

```
public void onClick(View v) {
   if (((Button)v).getText().equals("A button")) {
      edittext2.setText(edittext1.getText());
      edittext1.setText("");
   }
   if (imagebutton.getId() == R.id.imagebutton) {
      Toast.makeText(SomeWidgets.this, "This is an image button.",       
      Toast.LENGTH_LONG).show();
   }
} 
```

它崩溃了。但是，如果我删除第一个 if{} 并且只有图像按钮存在，它就可以工作。这显然是一个愚蠢的错误，但我很感激并解释为什么:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:29:33.290

尝试

```
if (((Button)v).getText().toString().equals("A button")) {
  edittext2.setText(edittext1.getText().toString());
  edittext1.setText("");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:33:34.133

这里更改代码

```
if (v.getId() == R.id.imagebutton) //imagebutton.getId() replace with View v
   {
      Toast.makeText(SomeWidgets.this, "This is an image button.",       
      Toast.LENGTH_LONG).show();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:37:08.963

崩溃是由 imageButton 到 Button 的转换引起的，试试：

```
if (v instanceOf ImageButton) {
   if (((ImagaeButton)v).getText().toString().equals("A button")) { 
```

编辑：如果将 OnClickListener 添加到 Button 和 ImageButon，则必须先确定单击的对象是 Button 还是 ImageButton，然后再进行 (Button) v 之类的转换。因此，您必须执行以下操作：

```
String ButtonText = "";
if (v instanceOf ImageButton) {
   ButtonText = ((ImageButton) v).getText().toString();
}else if(v InstanceOf Button){
   ButtonText = ((Button) v).getText().toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T06:25:55.997

请更新以下代码：-

```
public void onClick(View v) {
   if (v==button1) {
      edittext2.setText(edittext1.getText());
      edittext1.setText("");
   } else if (v==imagebutton) {
      Toast.makeText(SomeWidgets.this, "This is an image button.",       
      Toast.LENGTH_LONG).show();
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T09:22:24.373

谢谢，所有回答的人。我看不出我怎么会错过使用 toString()。不知何故，我赶上了 ImageButton 并认为这是问题所在。修复 onClick() 中按钮的文本检查修复了所有问题。

# c++ - 在 std::vector.reserve() 之后在 std::vector 中重新分配

> ID：10735135
> 
> 赞同：0
> 
> 时间：2012-05-24T09:54:35.953
> 
> 标签：c++, memory-management

我有一段代码，我首先将一些值放入 a 中`std::vector`，然后将它们中的每一个的地址提供给将使用它们的对象之一，如下所示：

```
std::vector < useSomeObject > uso;

// uso is filled

std::vector < someObject > obj;

for (int i=0; i < numberOfDesiredObjects; ++i){
    obj.push_back(someObject());
    obj.back().fillWithData();
}
for (int i=0; i < numberOfDesiredObjects; ++i){
    uso[i].setSomeObject(&obj[i]);
}

// use objects via uso vector
// deallocate everything 
```

现在，由于我有时有点风格怪胎，我认为这很*丑陋*，并且只想使用 1 个 for 循环，有点像这样：

```
for (int i=0; i < numberOfDesiredObjects; ++i){
    obj.push_back(someObject());
    obj.back().fillWithData();
    uso[i].setSomeObject(&obj.back());
} 
```

当然，我不能这样做，因为偶尔会发生重新分配，并且我设置的所有指针都变得无效。

所以，**我的问题是：** 我知道`std::vector.reserve()`如果你知道你需要多少并且想要提前分配内存，那么我知道这是要走的路。如果我*确保*我正在尝试提前分配足够的内存`reserve()`，*这是否保证我的指针将保持有效？*

谢谢你。

* * *

*边注。* [这](https://stackoverflow.com/questions/5396634/is-an-iterator-to-vec-end-still-valid-after-vec-push-back-when-there-is-no-r)是一个类似的问题，但没有我想知道的答案。只是为了防止它作为对该问题的第一条评论弹出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:58:32.190

事实上，这是使用`reserve`. `std::vector`只要向量的新大小不超过旧容量，您就可以保证追加到 an 的末尾不会使迭代器、引用或指向向量中元素的指针无效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T09:58:26.567

> 如果我确保我正在尝试使用 reserve() 提前分配足够的内存，这是否保证我的指针将保持有效？

是的，它保证您的指针将保持有效，除非：

*   *大小*增加超出当前*容量*或
*   除非，你*删除*任何你没有的元素。

向量的迭代器无效规则在**23.2.4.3/1**和**23.2.4.3/3**中指定为：

> 插入点之前的所有迭代器和引用都不受影响，除非新容器大小大于之前的容量（在这种情况下，所有迭代器和引用都无效）
> 
> 擦除点之后的每个迭代器和引用都无效。

# jsf-2 - 如何使用 I18N PrimeFaces 编辑器

> ID：10735138
> 
> 赞同：3
> 
> 时间：2012-05-24T09:54:39.853
> 
> 标签：jsf-2, primefaces

我无法弄清楚如何将国际化添加到 PrimeFaces 编辑器（版本 3.2）。我需要翻译工具提示、组合框中的文本并更改工具栏的图标。在旧用户指南[http://www.scribd.com/doc/49595285/46/Editor](http://www.scribd.com/doc/49595285/46/Editor)中，我发现了一个名为“语言”的属性，但这对于实际版本似乎已被禁用或删除。

我的项目设置是带有 PrimeFaces 3.2 和 GlassFish 3.1.2 的 JSF 2

如果你能告诉我如何解决这个问题，我会很高兴。

谢谢和亲切的问候，

佩德罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T22:27:46.760

JMelnik 是对的。不过有一个解决方法！

您可以通过从 primefaces 颠覆存储库下载 editor.js 文件来做到这一点：[3_3_1/src/main/resources/META-INF/resources/primefaces/editor/editor.js](http://primefaces.googlecode.com/svn/primefaces/tags/3_3_1/src/main/resources/META-INF/resources/primefaces/editor/editor.js)并将其放在项目的`META-INF/resources/primefaces/editor`文件夹中。

现在您可以编辑文件并根据您的语言环境进行更改。我为pt_BR中的一些按钮做了它：

```
buttons: {
  // name,title,command,popupName (""=use name)
  init:
  "bold,Negrito,|" +
  "italic,Itálico,|" +
  "underline,Sublinhado,|" +
  "strikethrough,Tachado,|" +
  "subscript,Subscrito,|" +
  "superscript,Sobrescrito,|" +
  "font,Fonte,fontname,|" +
  "size,Tamanho da Fonte,fontsize,|" +
  "style,Estilo,formatblock,|" +
  "color,Cor da fonte,forecolor,|" +
  "highlight,Cor de Destaque do Texto,hilitecolor,color|" +
  "removeformat,Remove Formatting,|" +
  "bullets,Marcadores,insertunorderedlist|" +
  "numbering,Numeração,insertorderedlist|" +
  "outdent,Diminuir Recuo,|" +
  "indent,Aumentar Recuo,|" +
  "alignleft,Alinhar à Esquerda,justifyleft|" +
  "center,Centralizar,justifycenter|" +
  "alignright,Alinhar à Direita,justifyright|" +
  "justify,Justificar,justifyfull|" +
  "undo,,|" +
  "redo,,|" +
  "rule,Insert Horizontal Rule,inserthorizontalrule|" +
  "image,Insert Image,insertimage,url|" +
  "link,Insert Hyperlink,createlink,url|" +
  "unlink,Remove Hyperlink,|" +
  "cut,,|" +
  "copy,,|" +
  "paste,,|" +
  "pastetext,Paste as Text,inserthtml,|" +
  "print,,|" +
  "source,Mostrar Código Fonte"
}, 
```

一个 i18n 解决方案会很棒，因为这种方法不支持多个语言环境，并使您的代码依赖于特定的编码（因为它可能使用特殊字符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T12:22:40.890

# **分析**

如果我们查看[PrimeFaces 3.2 文档，编辑器组件没有](http://primefaces.googlecode.com/files/primefaces_users_guide_3_2.pdf)*语言*这样的属性，本地化章节中也没有提到任何内容。

PrimeFaces 不提供本地化 Editor 的方法，因为它们[提供了 Calendar](http://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/webapp/ui/calendarLocalization.xhtml?r=6305)。很明显，他们确实为日历提供了它，因为它是 jQuery datePicker 的开箱即用功能，它是 caledar 的基础。

# 结果

在[PrimeFaces 3.2 源](http://repository.primefaces.org/org/primefaces/primefaces/3.2/primefaces-3.2-sources.jar)代码中查找*[editor.js](http://grepcode.com/file/repository.primefaces.org/org.primefaces/primefaces/3.2/META-INF/resources/primefaces/editor/editor.js?av=f)*。有一个部分，所有编辑器按钮都被初始化：

```
buttons: {
   // name,title,command,popupName (""=use name)
   init:
   .....
   "font,,fontname,|" +
   "size,Font Size,fontsize,|" +
   .....
} 
```

提供了单独按钮设置的格式：`name,title,command,popupName`. 该`title`部分是您可以使用的部分。

您可以做什么，**您可以使用提供的自己的标题构建 primefaces 源**，或者以我想不到的其他方式覆盖它们。

# 帮助

如果您使用的是 maven，您可以在自己的本地或集中存储库中安装自定义的 primefaces，并使用它来代替原始依赖项。

# **课**

当您使用较新版本时，您不应该寻找旧文档。查找您正在使用的版本的文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T14:43:24.423

由于 JSF2 和 Primefaces 有 jQuery，您可以简单地在您的页面上运行以下代码：

```
$(function(){
    $(".ui-editor-group>.ui-editor-button").each(function(){
        var title = $(this).attr("title").toLowerCase();
        switch(title){
            case "bold":              title = "Negrito"; break;
            case "italic":            title = "Itálico"; break;
            case "underline":         title = "Sublinhado"; break;
            case "align text left":   title = "Alinhado à esquerda"; break;
            case "center":            title = "Centralizado"; break;
            case "align text right":  title = "Alinhado à direita"; break;
            case "justify":           title = "Justificado"; break;
            case "insert hyperlink":  title = "Inserir link"; break;
            case "remove hyperlink":  title = "Remover link"; break;
        }
        $(this).attr("title", title);
    })
}) 
```

这个小 jQuery 代码可以将 Primefaces 编辑器的字符串更改为您想要的任何位置。我只为一些编辑器的组件制作了它，因为我没有使用所有它们。

如果您需要翻译其他选项，只需将它们添加到 switch 命令中。不要忘记 switch 命令中的所有标题都是小写的，因为第三行的“.toLowerCase()”方法。我这样做是为了简化字符串管理。

您也可以将其放在外部 JavaScript 文件内的函数中以对其进行缓存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-22T14:04:12.827

这是我为希腊语（el_GR 语言环境）制作的一个工作示例，所有按钮：

```
$(".ui-editor-group>.ui-editor-button").each(function () {
                                var title = $(this).attr("title").toLowerCase();
                                switch (title) {
                                    case "bold":
                                        title = "Έντονα";
                                        break;
                                    case "italic":
                                        title = "Πλάγια";
                                        break;
                                    case "underline":
                                        title = "Υπογραμμισμένα";
                                        break;
                                    case "align text left":
                                        title = "Στοίχιση αριστερά";
                                        break;
                                    case "center":
                                        title = "Στοίχιση στο κέντρο";
                                        break;
                                    case "align text right":
                                        title = "Στοίχiση δεξιά";
                                        break;
                                    case "justify":
                                        title = "Στοίχιση";
                                        break;
                                    case "insert hyperlink":
                                        title = "Εισαγωγή συνδέσμου";
                                        break;
                                    case "remove hyperlink":
                                        title = "Αφαίρεση συνδέσμου";
                                        break;
                                    case "strikethrough":
                                        title = "Διεγραμμένα";
                                        break;
                                    case "subscript":
                                        title = "Δείκτης";
                                        break;
                                    case "superscript":
                                        title = "Εκθέτης";
                                        break;
                                    case "font":
                                        title = "Γραμματοσειρά";
                                        break;
                                    case "font size":
                                        title = "Μέγεθος γραμματοσειράς";
                                        break;
                                    case "style":
                                        title = "Στυλ";
                                        break;
                                    case "font color":
                                        title = "Χρώμα γραμματοσειράς";
                                        break;
                                    case "text highlight color":
                                        title = "Χρώμα επισήμανσης κειμένου";
                                        break;
                                    case "remove formatting":
                                        title = "Κατάργηση μορφοποίησης";
                                        break;
                                    case "bullets":
                                        title = "Λίστα με κουκκίδες";
                                        break;
                                    case "numbering":
                                        title = "Αριθμητική λίστα";
                                        break;
                                    case "outdent":
                                        title = "Προεξοχή";
                                        break;
                                    case "indent":
                                        title = "Εσοχή";
                                        break;
                                    case "undo":
                                        title = "Αναίρέση";
                                    case "redo":
                                        title = "Επαναφορά";
                                        break;
                                    case "insert horizontal rule":
                                        title = "Eισαγωγή οριζόντιας γραμμής";
                                        break;
                                    case "insert image":
                                        title = "Εισαγωγή εικόνας";
                                        break;
                                    case "cut":
                                        title = "Κόψιμο";
                                        break;
                                    case "copy":
                                        title = "Αντιγραφή";
                                        break;
                                    case "paste":
                                        title = "Επικόλληση";
                                        break;
                                    case "paste as text":
                                        title = "Επικόλληση ως απλό κείμενο";
                                        break;
                                    case "print":
                                        title = "Εκτύπωση";
                                        break;
                                    case "show source":
                                        title = "Εμφάνιση κώδικα";
                                        break;
                                    case "Show Rich Text":
                                        title = "Εμφάνιση εύκολης επεξεργασίας άρθρου";
                                        break;
                                }
                                $(this).attr("title", title);
                            }); 
```

# ios - 使用附件视图为 UITableViewCell 的 backgroundColor 设置动画

> ID：10735144
> 
> 赞同：3
> 
> 时间：2012-05-24T09:55:09.260
> 
> 标签：ios, uitableview, core-animation

目前，我正在开发 UITableViewController。在其 UITableView 的单元格中，它显示来自 Web 服务的实时数据。当基础数据项之一更新（每两分钟左右一次）时，我希望单元格短暂“闪烁”，以便用户了解该单元格的数据刚刚更新。

到目前为止，我使用了以下代码：

```
[UIView animateWithDuration:0.2 delay:0.0 options:UIViewAnimationOptionAllowUserInteraction|UIViewAnimationOptionCurveEaseInOut animations:^
{
    cell.contentView.backgroundColor = flashColor;
} completion:^(BOOL finished)
{
    [UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationOptionAllowUserInteraction|UIViewAnimationOptionCurveEaseInOut animations:^
    {
        cell.contentView.backgroundColor = [UIColor clearColor];
    } completion: NULL];
}]; 
```

这很好用，直到我想为用户提供一种方法来“查看”给定单元格的数据并添加披露指标。由于框架缩小了内容区域为 Disclosure Indicator 腾出空间，现在 flash 只高亮了左侧 90% 的单元格，但 Disclosure Indicator 的背景颜色没有改变。

```
cell.accessoryView.backgroundColor = flashColor; 
```

和

```
cell.backgroundView.backgroundColor = flashColor; 
```

无助于修复动画。

我读过关于`- (void) setHighlighted: (BOOL)highlighted animated: (BOOL)animated`，但这不会在闪存后立即恢复突出显示的状态，除非我编写了大量令人讨厌的容易出错的代码来防止它飞散。此外，我无法控制动画本身。

有没有办法保持旧的动画效果与附件视图存在，还是我必须开始使用高亮方法进行闪光？

最好的问候，克里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T10:59:22.180

```
[UIView animateWithDuration:0.2 delay:0.0 options:UIViewAnimationOptionAllowUserInteraction|UIViewAnimationOptionCurveEaseInOut animations:^
{
    [cell setHighlighted:YES animated:YES];
} completion:^(BOOL finished)
{
    [UIView animateWithDuration:0.2 delay:0.0 options:UIViewAnimationOptionAllowUserInteraction|UIViewAnimationOptionCurveEaseInOut animations:^
    {
        [cell setHighlighted:NO animated:YES];
    } completion: NULL];
}]; 
```

请注意，单元格将忽略`animateWithDuration`参数中设置的时间，并始终使用 iOS 默认值 0.2 秒。所以最好将该参数设置为 0.2。

解决方法很简单，但当然不能保留原始动画（快速高亮和慢速淡出）。另一方面，这可能是更保守和面向未来的方式。

感谢大卫 Rö​​nnqvist！

克里斯

# ios - RaptureXML 迭代：usingBlock 警告和崩溃

> ID：10735145
> 
> 赞同：1
> 
> 时间：2012-05-24T09:55:12.007
> 
> 标签：ios, xml, nsarray, loops

我正在解析一个如下所示的 XML 文件：

```
<partie numero="1">
      <exercice numero="1" libelle="blabla"></exercice>
      <exercice numero="2" libelle="anything"></exercice>
</partie> 
```

我正在使用 Rapture XML 库，因此如 GitHub 上所述，我执行以下操作：

```
RXMLElement *rxmlPartie = [rxmlParties child:@"partie"];
NSArray *rxmlUnExercice = [rxmlPartie children:@"exercice"]; 
```

我可以使用这一行正确打印来自派对的“numero”属性：

```
 NSLog(@"Partie #%@",[rxmlPartie attribute:@"numero"] ); 
```

但是当我尝试在我的 NSArray 上使用 iterate 方法时：

```
[rxmlPartie iterate:@"partie.exercice" usingBlock: ^(RXMLElement *exercice) {NSLog(@"Exercice: %@ (#%@)", [exercice attribute:@"libelle"], [exercice attribute:@"numero"]);}]; 
```

我收到警告，应用程序崩溃，说：

```
-[RXMLElement iterate:usingBlock:]: unrecognized selector sent to instance 0xc67f870
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-    [RXMLElement iterate:usingBlock:]: unrecognized selector sent to instance 0xc67f870' 
```

我是否忘记导入某些东西，或者我以一种糟糕的方式实现该方法？

如果我尝试使用 iterateWithRootXPath 会发生同样的错误...

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:13:55.610

所以，我发现了我的问题所在。

在执行此操作之前，我对与 Rapture XML 配对一无所知...所以我坚持使用文档（正如学校里有人告诉我的 :-)）。但问题是文档中使用的一个方法，这个“迭代 usingBlock”没有在框架中定义。

而不是使用

```
[rxmlPartie iterate:@"partie.exercice" usingBlock: ^(RXMLElement *exercice)     {NSLog(@"Exercice: %@ (#%@)", [exercice attribute:@"libelle"], [exercice attribute:@"numero"]);}]; 
```

我在用着

```
[rxmlPartie iterate:@"exercice" with: ^(RXMLElement *exercice)     {NSLog(@"Exercice: %@ (#%@)", [exercice attribute:@"libelle"], [exercice attribute:@"numero"]);}]; 
```

这是在框架内明确定义的！

这让我很开心！！

# java - 修改集合会使实体变脏

> ID：10735155
> 
> 赞同：2
> 
> 时间：2012-05-24T09:55:48.113
> 
> 标签：java, hibernate, jpa

我有一个定义如下的实体

```
@Entity(name = "Report")
@Table(name = "REPORTS")
@org.hibernate.annotations.Entity(dynamicInsert = true, dynamicUpdate = true, selectBeforeUpdate = true)
public class Report implements java.io.Serializable        {

    /* other fields, getters and setters*/
    @Column(name = "UPD_TIMESTAMP")
    @Version
    private Long updTimestamp;

    @OneToMany(mappedBy = "report", fetch = FetchType.LAZY)
    private Collection<ReportItem> reportItems = new ArrayList<ReportItem>();

    public Collection<ReportItem> getReportItems() {
       return reportItems;
    }

    public void setReportItems(Collection<ReportItems> reportItems) {
       this.reportItems = reportItems;
    }
} 
```

问题是，当我在 reportItems 中修改某些内容时，报表实体会变脏，并且总是有一个更新只会增加版本字段。

我知道 @OptimisticLock(excluded=true)，但我坚持使用 Hibernate 3.2.0 GA 并且此注释不可用。**我可以在 Hibernate 3.20 GA 中使用此功能的任何解决方法**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:51:48.010

看一下 inverse 关键字，也许这可以提供一个解决方案。[这里](http://www.mkyong.com/hibernate/different-between-cascade-and-inverse/)解释一下。

编辑：原来这是预期的行为。[看到这个问题](https://stackoverflow.com/questions/10974240)

# xml - 使用 FLWOR 连接表

> ID：10735156
> 
> 赞同：2
> 
> 时间：2012-05-24T09:55:48.597
> 
> 标签：xml, xquery, flwor

我有一个关于 FLWOR 连接的问题。这是我的 XML 外观的概述。

```
<user>
  <user-id>...</user-id>
  <username>...</username>
  <password>...</password>
  <!-- By schema file, there could be unbounded role-ids -->
  <role-id>...</role-id>
  <role-id>...</role-id>
  <role-id>...</role-id>
</user>

<role>
  <role-id>...</role-id>
  <name>...</name>
  <!-- By schema file, there could be unbounded permission-ids -->
  <permission-id>...</permission-id>
  <permission-id>...</permission-id>
  <permission-id>...</permission-id>
</role>

<permission>
  <permission-id>...</permission-id>
  <resource-id>...</resource-id>
  <operation-id>...</operation-id>
</permission> 
```

我有一个 FLWOR 表达式查询，它应该返回给定用户的一系列权限。它应该很简单，但是我无法弄清楚为什么每次运行查询时都会得到一个空的 ResourceSet。

```
for $i in collection("data/rbac/users")/user[user-id="..."]/role-id
for $j in collection("data/rbac/roles")/roles/role
for $k in collection("data/rbac/permissions")/permission
where $i = $j/role-id and exists($j/permission-id[. = $k/permission-id])
return $k 
```

任何建议都非常感谢。谢谢，

伊戈尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:59:56.450

您的 XQuery 似乎与您提供的数据不匹配。例如`role-id`不是 的孩子`user`，而且似乎也没有`roles`元素。给定提供的 XML 的此查询可能会返回一个空的资源集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:22:27.073

很难说，因为源 XML 数据的结构并不完全清楚。但似乎有一个小的不一致 - 您的 XQuery 的第二行假定`roles`在您的集合中命名的节点`data/rbac/roles`。也许第二行应该看起来像

> `for $j in collection("data/rbac/roles")/role`

? 只是猜测...

# visual-studio-2010 - 用 VS2010 编译 huffyuv 的 asm 错误

> ID：10735157
> 
> 赞同：1
> 
> 时间：2012-05-24T09:55:52.713
> 
> 标签：visual-studio-2010, assembly

我正在尝试使用 Visual Studio 2010 编译[huffyuv](http://neuron2.net/www.math.berkeley.edu/benrg/huffyuv.html)。我在组装 asm 文件时收到错误消息 A2070。我在下面粘贴了（一些）相关代码：

```
YUV_SHIFT   MACRO   mmb,mma,uyvy    ; clobbers mm4,5

; mma:mmb = ABCDEFGHIJKLMNOP (VYUYVYUY...) - backwards from mem order
;   we want mmb = EDGFIHKJ (prev pixel of same channel)

    movq    mm4,mmb
    punpcklbw   mmb,mma     ; mm4:mmb = AIBJCKDLEMFNGOHP
    punpckhbw   mm4,mma
    movq    mm5,mmb
    punpcklbw   mmb,mm4     ; mm5:mmb = AEIMBFJNCGKODHLP
    punpckhbw   mm5,mm4
    movq    mm4,mmb
    punpcklbw   mmb,mm5     ; mm4:mmb = ACEGIKMOBDFHJLNP
    punpckhbw   mm4,mm5
    psllq   mmb,8+8*&uyvy       ; mm4:mmb = EGIKMO__DFHJLNP_
    psllq   mm4,16-8*&uyvy
    punpckhbw   mmb,mm4     ; mmb = EDGFIHKJ (for YUY2; different for UYVY)

    ENDM

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

MEDIAN_PREDICT_PROC MACRO   procname,uyvy

    PUBLIC  C _&procname

;void __cdecl mmx_MedianPredict(
;   [esp+ 4] unsigned char* src,
;   [esp+ 8] unsigned char* dst,
;   [esp+12] unsigned char* src_end,
;   [esp+16] int stride);

_&procname  PROC

    push    ebp
    mov ebp,esp
    push    edi
    push    esi
    push    ebx

    ; do the first row
    mov esi,[ebp+4+4]
    mov edi,[ebp+8+4]
    mov ebx,[ebp+16+4]
    lea ecx,[ebx+esi+8]
    neg ebx

    pxor    mm2,mm2
    movq    mm3,[esi]   ; for use in next loop

loop0:
    movq    mm0,[esi]
    YUV_SHIFT   mm2,mm0,uyvy
    add esi,8
    movq    mm1,mm0
    psubb   mm1,mm2
    movq    [edi],mm1
    movq    mm2,mm0
    add edi,8
    cmp esi,ecx
    jb  loop0

    mov ecx,[ebp+8+4]   ; recopy first group of four, just for consistency with other compression methods
    movd    [ecx],mm3

    ; do the remaining rows
    mov ecx,[ebp+12+4]
    ; mm2,3 are already initialized from previous loop

    align   32

    ; pixel arrangement:
    ;    mm3 mm1
    ;    mm2 mm0

loop1:
    ; mm2,3 <- appropriate left and above-left pixels
    movq    mm0,[esi]
    movq    mm1,[esi+ebx]

    YUV_SHIFT   mm2,mm0,uyvy    ; note: clobbers mm4,5
    add esi,8
    YUV_SHIFT   mm3,mm1,uyvy

    ; mm4 <- median of mm1,mm2,(mm1+mm2-mm3)

    movq    mm4,mm2     ; (mm2,mm4) <- (min(mm1,mm2),max(mm1,mm2))
    movq    mm5,mm2     ; mm5 <- mm1+mm2-mm3
    psubusb mm4,mm1
    paddb   mm5,mm1
    psubb   mm2,mm4
    psubb   mm5,mm3
    paddb   mm4,mm1

    psubusb mm2,mm5     ; mm2 = max(mm2,mm5)
    paddb   mm2,mm5

    movq    mm5,mm4     ; mm4 = min(mm2,mm4)
    psubusb mm5,mm2
    psubb   mm4,mm5     ; now mm4 = median

    ; write out the result and loop
    movq    mm2,mm0
    movq    mm3,mm1
    psubb   mm0,mm4
    movq    [edi],mm0
    cmp esi,ecx
    lea edi,[edi+8]
    jb  loop1

    emms
    pop ebx
    pop esi
    pop edi
    pop ebp
    retn

_&procname  ENDP

    ENDM

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

MEDIAN_PREDICT_PROC mmx_MedianPredictYUY2,0 ; I get the error on this line
MEDIAN_PREDICT_PROC mmx_MedianPredictUYVY,1 ; and this as well 
```

这些是我遇到的第一个错误（稍后我会遇到更多相同类型的错误，但如果我知道如何修复第一个错误，我可能会修复其余的错误）。

```
1>C:\Development\huffyuv\huffyuv_a.asm(526): error A2070: invalid instruction operands
1>   MEDIAN_PREDICT_PROC(41): Macro Called From
1>    C:\Development\huffyuv\huffyuv_a.asm(526): Main Line Code
1>C:\Development\huffyuv\huffyuv_a.asm(527): error A2070: invalid instruction operands
1>   MEDIAN_PREDICT_PROC(41): Macro Called From
1>    C:\Development\huffyuv\huffyuv_a.asm(527): Main Line Code 
```

我对汇编代码不太了解，所以如果有人能告诉我问题出在哪里以及如何解决，我会很高兴。

# eclipse - Zend Debugger Eclipse 启动错误：eclipse.php.debug.core 无法加载类 debug.core.model.PHPConditionalBreakpoint

> ID：10735158
> 
> 赞同：2
> 
> 时间：2012-05-24T09:55:58.643
> 
> 标签：eclipse, adt, eclipse-pdt, zend-debugger

我在 Mac OSX Lion 上工作，自从我安装了 Zend Debugger 并让它能够调试 php web 应用程序后，我经常遇到这个 Eclipse 启动错误：

> 扩展点 org.eclipse.php.internal.debug.daemon.communication 插件的错误创建扩展插件 org.eclipse.php.debug.core 无法加载类 org.eclipse.php.internal.debug.core.zend .communication.DebuggerCommunicationDaemon。自动激活包 org.eclipse.php.debug.core (258) 时出错。

错误日志包含以下堆栈跟踪：

```
org.eclipse.debug.core.DebugException: Plug-in org.eclipse.php.debug.core was unable to load class org.eclipse.php.internal.debug.core.model.PHPConditionalBreakpoint.  
at org.eclipse.debug.internal.core.BreakpointManager.createBreakpoint(BreakpointManager.java:554
at org.eclipse.debug.internal.core.BreakpointManager.loadBreakpoints(BreakpointManager.java:264
at org.eclipse.debug.internal.core.BreakpointManager.initializeBreakpoints(BreakpointManager.java:449)  
at org.eclipse.debug.internal.core.BreakpointManager.getBreakpoints0(BreakpointManager.java:418)    at org.eclipse.debug.internal.core.BreakpointManager.start(BreakpointManager.java:408)  
at org.eclipse.debug.core.DebugPlugin.start(DebugPlugin.java:682)   
at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
... Omitted for brevity ... 
```

当我重新启动 eclipse 几次时，这个错误通常会消失。我搜索了解决方案并尝试重新安装 eclipse 几次。只有当我同时安装了 ADT（Android 开发工具）和 PDT（PHP 开发工具）+ Zend 调试器时，才会出现此错误。

如果您有有关如何解决此问题的信息，请告诉我。在相关的说明中，我从来没有真正让 PDT + Zend 调试器在 Windows 上工作（如调试）PHP 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:09:14.147

在出现一些类似和不同的错误后，我遇到了类似的问题（当我粘贴错误消息时，您的问题出现在 Google 之上）我决定在我的替代工作区正常工作和调试后检查我的 Eclipse 工作区设置。

事实证明我的 PHP 可执行路径是空的（在之前设置它之后），所以我将它添加回来。到目前为止没有问题。

(ie here...) Eclipse -> Window -> Preferences -> PHP -> PHP Executables -> Add/replace/reselect here。

更新：有时最简单的方法是在“断点”视图（以调试视角打开）下选择“跳过所有断点”。然后重新启动 Eclipse。自从第一次回答以来，我收到了类似的错误消息，并且通常可以完成工作（当然，您可以在此之后从同一个地方取消选择“跳过所有断点”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:20:58.093

即使在 Zend Eclipse PHP 版本中，我也曾多次看到此错误。似乎只有在两件事为真时才会发生：

1）“断点”视图在 Eclipse 开始时可见（也就是说，您可以看到将列出断点的位置）

和

2) 在编辑器中打开和激活的文件不是 PHP 文件

例如，我在调试透视图的编辑器中打开了一个 CSS 文件，并且断点选项卡处于活动状态，从而重复地得到了这个。

绕过它：启动 eclipse 并忽略有关加载插件的错误（暂时）。使 PHP 文件成为编辑器中的活动文档，并从调试透视图更改为 PHP 透视图。关闭eclipse并重新启动。重新启动时，错误应该消失并且调试应该再次处于活动状态。

我不能保证每次都是解决方案，但我可以使用上述断点/非 PHP 条件可靠地复制此故障（和解决方案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T09:00:16.547

这是一种解决方法而不是解决方案，但到目前为止，它进展顺利：

[我从Zend](http://www.zend.com/community/pdt/downloads)网站下载并安装了`Eclipse for PHP Developers`（又名 Zend Eclipse PDT）3.0.2 版，现在我可以调试 Wordpress 和 Joomla，就 PHP 而言，这两个项目都非常复杂。

如果我遇到问题，我会更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T00:45:14.303

我在 Ubuntu 12.04 上使用 Eclipse Indigo，在安装 Java 7 后收到此错误。我的 PDT 设置以前可以工作，但现在停止工作。我的解决方案是卸载 PDT 并重新安装。我不确定这是否与您的问题有关，但它可能会解决问题。

帮助 -> 关于 eclipse 平台

单击“安装详细信息”按钮

点击php开发工具（PDT）sdk功能

点击卸载

按照提示

以正常方式重新安装 pdt

我之前的调试启动已被删除，但我的旧项目保持不变。我从 Run -> Debug Configurations 重新运行了调试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T16:14:27.390

我只是在关闭我启用了各种断点的 Eclipse php 项目后才得到这个。

我的解决方法是一旦项目打开并收到我选择的错误消息`skip all breakpoints`，关闭项目并重新打开它。然后我取消选择跳过断点并开始工作。至少在我的情况下，错误是随机发生的，除了我关闭了启用断点的项目之外没有其他原因。

希望我有更多技术性的解决方案或修复，但我认为我的时间最好花在实际工作上，而不是深入研究。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T09:08:13.340

当我在项目仍在调试模式下运行时关闭 Eclipse 时发生了问题。我做了或多或少与@rahvin_t 相同的方法来修复它。

运行 > 跳过所有断点。关闭 Eclipse，启动 Eclipse，我可以再次启动该项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-20T09:20:49.440

启动时会发生一些与此类似的错误。当编辑器中打开“不寻常”的文件（例如 css 或 javascript）时，它们似乎会发生

通常对我有用的方法：

1.  在 Eclipse 中关闭所有文件 (Ctrl+Shift+W)
2.  重新启动 Eclipse。

# c++ - 使用强类型枚举对类型和子类型进行建模？

> ID：10735164
> 
> 赞同：0
> 
> 时间：2012-05-24T09:56:07.607
> 
> 标签：c++

我想将[ICMP 标头](http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol#Header)定义为 pod 类型：

```
struct ICMPHeader
{
    uint8_t   Type;         // ICMP type
    uint8_t   Code;         // Subtype, value is dependent on ICMP type.
    uint16_t  Checksum;     // Error checking data. See RFC 1071
    uint32_t  RestOfHeader; // Varies based on ICMP type and code.
}; 
```

对于该`ICMPType`领域，我可以使用强类型枚举来使它更好一点：

```
enum class ICMPType : uint8_t
{
    EchoReply              = 0,
    Reserved1              = 1,
    Reserved2              = 2,
    DestinationUnreachable = 3,
    SourceQuench           = 4

    // etc...
};

struct ICMPHeader
{
    ICMPType  Type;         // ICMP type
    uint8_t   Code;         // Subtype, value is dependent on ICMP type.
    uint16_t  Checksum;     // Error checking data. See RFC 1071
    uint32_t  RestOfHeader; // Varies based on ICMP type and code.
}; 
```

现在，我自然也想将`Code`字段指定为枚举。如果我可以使用模板专业化语法会很好，但快速测试表明它不起作用：

```
// Compiler error
template<ICMPType>
enum class ICMPCode;    

template<>
enum class ICMPCode<ICMPType::DestinationUnreachable>
{
    DestinationNetworkUnreachable  = 0,
    DestinationHostUnreachable     = 1,
    DestinationProtocolUnreachable = 2
}; 
```

一种选择是将它们包装在结构中：

```
// Meaning of ICMP code is dependent on ICMP type.
template<ICMPType>
struct ICMPCode;

// Subcodes for DestinationUnreachable
template<> struct ICMPCode<ICMPType::DestinationUnreachable>
{
    enum class Code : uint8_t
    {
        DestinationNetworkUnreachable  = 0,
        DestinationHostUnreachable     = 1,
        DestinationProtocolUnreachable = 2

        // etc...
    };
};

// Access: ICMPCode<ICMPType::DestinationUnreachable>::Code::DestinationHostUnreachable 
```

但这样做让我觉得我只是在胡闹，让事情变得太复杂..

我想这是一个更普遍问题的具体示例：如何设置类型和子类型系统？有什么建议么？

附言：

*   另见：[http ://en.wikipedia.org/wiki/Internet_Control_Message_Protocol#Header](http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol#Header)

示例代码：

```
#include <iostream>

// Trying to model ICMP types and codes with strongly typed enums
// See also http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol#Header

enum class ICMPType : uint8_t
{
    EchoReply              = 0,
    Reserved1              = 1,
    Reserved2              = 2,
    DestinationUnreachable = 3,
    SourceQuench           = 4

    // etc...
};

// Meaning of ICMP code is dependent on ICMP type.
template<ICMPType>
struct ICMPCode;

// Subcodes for DestinationUnreachable
template<> struct ICMPCode<ICMPType::DestinationUnreachable>
{
    enum class Code : uint8_t
    {
        DestinationNetworkUnreachable  = 0,
        DestinationHostUnreachable     = 1,
        DestinationProtocolUnreachable = 2

        // etc...
    };
};

ICMPCode<ICMPType::DestinationUnreachable>::Code GetReasonWhyDestinationIsUnreachable()
{
    return ICMPCode<ICMPType::DestinationUnreachable>::Code::DestinationHostUnreachable;
}

int main()
{
    std::cout << static_cast<int>(GetReasonWhyDestinationIsUnreachable()) << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:30:33.667

我认为您不能在编译时静态地执行此操作，因为您正在更改`ICMPType`运行时。

我会建议：

1.  `code`为您要表示的每个范围创建一个枚举。
2.  为每种类型创建一个容器（即，每种类型都有多个`ICMPHeader`类型，并在那里丢失类型变量）。
3.  创建一个工厂，它采用您的原始 ICMP 标头并生成具有适当`ICMPType`枚举的专用类型之一。

这应该是一种非常灵活的方法，但简单地根据类型转换代码的值可能就足够了，而且更容易处理。

在您的示例中，您只是将其转换回一个 int ，尽管它会剥夺您刚刚开始实现的所有目标..？

*编辑 - 如果您的所有容器都继承自一个公共基类，您可以提供一个通用的 GetDescription() 方法，然后子类可以填充该方法。像这样抽象出细节可以得到一个漂亮的干净设计......*

# c# - 为什么 DateTime.Now.ToBinary() 返回的值与构造函数创建时不同

> ID：10735165
> 
> 赞同：5
> 
> 时间：2012-05-24T09:56:08.503
> 
> 标签：c#, .net, datetime, deserialization

这是我尝试过的：

```
DateTime now = DateTime.Now;
long timeA = now.ToBinary();
long timeB = new DateTime(now.Year, now.Month, now.Day, now.Hour, now.Minute, now.Second, now.Millisecond).ToBinary();

Debug.WriteLine("{0} {1}", timeA, timeB); 
```

这是输出：

```
-8588637543837682554 634734565017110000 
```

`timeA`and本质上`timeB`应该是相同的东西，但是它们被转换为完全不同的（负）二进制文件。

为什么会这样？为什么直接调用`ToBinary()`会`DateTime.Now`产生不同的结果？

**编辑**：由于我的问题被误解（因此被否决），我已更正我的帖子以更好地代表真正的问题。问题出在 DateTime.Kind 中，这是真正的问题，而不是两个连续 DateTime.Now 调用中的微小差异。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T09:59:49.933

你的两个值有不同的`Kind`，并且类型也被序列化了`ToBinary`。

`DateTime.Now`has `Kind == DateTimeKind.Local`，您创建的 DateTime 有`new DateTime(...)`has `Kind == DateTimeKind.Unspecified`。`new DateTime(...)`如果你想要不同的类型，你可以使用另一个重载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T09:58:11.520

它们不是相同的`DateTime`值，因此这是意料之中的。

要处理相同的值，`DateTime`您只需调用`DateTime.Now`一次然后重用它。

```
var now = DateTime.Now;
long timeA = now.ToBinary();
long timeB = new DateTime(now.Ticks, now.Kind).ToBinary();;

Console.WriteLine(timeA);
Console.WriteLine(timeB); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T10:02:57.877

首先，您必须再次使用[`DateTime.FromBinary()`](http://msdn.microsoft.com/library/system.datetime.frombinary.aspx)（重新）创建相同的`DateTime`对象。

但这也可能与由当地时差引起的原始物体不同。请查看[这篇 MSDN](http://msdn.microsoft.com/library/system.datetime.tobinary.aspx)文章，其中详细解释了这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T10:06:15.377

好的，首先这两个 DateTimes 有不同的`Kind`. `DateTime.Now`是 Kind Local，第二个是 Kind Unspecified。

```
var now = DateTime.Now;
var timeA = now.ToBinary();
var dateB = new DateTime(now.Year, now.Month, now.Day, now.Hour, now.Minute, now.Second, now.Millisecond, now.Kind);
var timeB = dateB.ToBinary();
Console.WriteLine(timeA);
Console.WriteLine(timeB); 
```

这会产生不同的结果：

```
-8588637530157241842
-8588637530157245808 
```

但是，使用刻度会给出正确的结果，这是因为刻度使用 100 纳秒的间隔，这比毫秒更准确。

毫秒是您可以指定的最小值，但不是最小的内部变量。

```
var dateB = new DateTime(now.Ticks, now.Kind); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T09:59:39.607

在 DateTime.Now 的两个调用之间，经过了毫秒，这使得两个值不同

# ruby-on-rails - Cancan - 当用户限制在某些站点时，新表单失败

> ID：10735167
> 
> 赞同：1
> 
> 时间：2012-05-24T09:56:42.980
> 
> 标签：ruby-on-rails, cancan

我有用户

```
class User < ActiveRecord::Base
  devise :database_authenticatable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation,
                  :remember_me, :site_id, :role_name

  belongs_to :site

end 
```

网站

```
class Site < ActiveRecord::Base
  has_many :users
  has_one :front_page_campaign
end 
```

和 front_page_campaigns

```
class FrontPageCampaign < ActiveRecord::Base
  belongs_to :site
end 
```

我正在使用 cancan 来限制访问，因此用户只能为自己的站点管理 front_page_campaigns：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)

    case user.role_name

    when "super_admin"
      # can do everything
      can :manage, :all

    when "editor"
      # can edit content for their site
      can [:create, :read, :update], FrontPageCampaign, site_id: user.site_id

    end
  end
end 
```

这对于具有 role_name 的用户`super_admin`以及`editor`on show 和 edit on非常有效`front_page_campaigns`。但是当一个`editor`尝试创建一个新的front_page_campaign时，我收到了一个cancan禁止通知

```
You are not authorized to access this page. 
```

标准表单提供了所有站点的下拉框，我想我需要将其限制为用户自己的站点。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:50:34.080

通过添加以下内容可以解决您的授权问题：

```
can :new, FrontPageCampaign 
```

到cancan能力init的编辑器部分。要在新对象上设置 site_id 并创建对象，您可以设置 before_filter：

```
# FrontPageCampaignsController
before_filter :set_site_id, :only => [:new, :create]

protected

def set_site_id
  @resource.site_id = current_user.site_id if current_user && current_user.role_name == 'editor'
end 
```

您必须确保在创建资源之后但在可以授权之前触发它。

在您的表单中（如果您对超级管理员和编辑器使用相同）将站点下拉选择设置为只读或隐藏 if `current_user.role_name == 'editor'`。

请注意，如果有人篡改了表单并发送了一个陌生的 site_id 作为编辑器，它将被 before 过滤器更正，这不是很好。如果你把 if 拿出来，`:only => :new`然后他们会得到 cancan 的授权错误。如果你是超级学究，你应该得到一个带有验证错误的有效响应。您可以通过 1) 仅将 before_filter 应用于 new 和 2) 在能力初始化中说来实现这一点

```
when "editor"
  # can edit content for their site
  can [:read, :update], FrontPageCampaign, site_id: user.site_id
  can [:create, :new], FrontPageCampaign
end 
```

3) 将站点所有者检查添加到模型验证中。这是我的首选方式，保留对现有资源的非法访问的授权错误。

希望这能回答你的问题

# c++ - 在 MFC 中自定义 CMFCRibbonBar

> ID：10735171
> 
> 赞同：0
> 
> 时间：2012-05-24T09:57:20.053
> 
> 标签：c++, mfc

我正在尝试自定义默认的 MFC RibbonBar。我需要降低它的高度，改变它的颜色等，但到目前为止我还没有找到任何关于如何这样做的信息。我去过msdn，他们只是告诉你如何在功能区上添加新控件。有人能指出我正确的方向吗？这个功能区控件甚至可以自定义吗？我的意思是除了在其上添加类别和其他控件之外，我还想更改功能区的外观。

一些关于如何使用 MFCRibbonControl 的代码示例也会有很大帮助。

# android - Android：Sherlock 操作栏下拉

> ID：10735176
> 
> 赞同：5
> 
> 时间：2012-05-24T09:57:57.747
> 
> 标签：android, drop-down-menu, actionlistener, actionbarsherlock

我正在尝试实现一个下拉列表作为 Android 中操作栏的导航。我可以看到下拉列表和项目，但我无法获得点击事件。

我不确定我错过了什么，因为我正在遵循[http://developer.android.com/guide/topics/ui/actionbar.html中的教程](http://developer.android.com/guide/topics/ui/actionbar.html)

这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
        OnNavigationListener mOnNavigationListener;
        super.onCreate(savedInstanceState);
        // setContentView(R.layout.info_layout);
        // getSupportActionBar().setHomeButtonEnabled(true);
         getSupportActionBar().setDisplayShowTitleEnabled(false);

        getSupportActionBar().setNavigationMode(getSupportActionBar().NAVIGATION_MODE_LIST);
        SpinnerAdapter mSpinnerAdapter = ArrayAdapter.createFromResource(this, R.array.navigation_array, android.R.layout.simple_dropdown_item_1line);
        mOnNavigationListener = new OnNavigationListener() {
            public boolean onNavigationItemSelected(int itemPosition, long itemId) {
                switch (itemPosition) {
                case 1:
                    Intent i = new Intent();
                    i.setClass(getApplicationContext(), ZoekAndBoekActivity.class);
                    break;
                case 2:
                    break;
                case 3:
                    break;
                case 4:
                    break;
                case 5:
                    break;
                }
                // return super.onOptionsItemSelected(itemPosition);
                return true;
            }
        };
        getSupportActionBar().setListNavigationCallbacks(mSpinnerAdapter, mOnNavigationListener);
    } 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:01:49.420

你确定你没有得到点击事件吗？您正在创建意图，但没有对它做任何事情。尝试这样的事情：

```
switch (itemPosition) {
    case 1:
        Intent i = new Intent();
        i.setClass(getApplicationContext(), ZoekAndBoekActivity.class);
        startActivity(i);
        break;
    ...
} 
```

或添加写入日志以确保：

```
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    Log.d("SomeTag", "Get click event at position: " + itemPosition);
    switch (itemPosition) {
        ...
    }
} 
```

并在单击项目时在 logcat 输出中查看带有“SomeTag”的消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T15:13:09.897

我认为在 switch 案例中的 return 语句必须是错误的，并且你的案例必须有括号..希望它有所帮助:)))

# php - 将数组转换为不同格式的php

> ID：10735177
> 
> 赞同：-3
> 
> 时间：2012-05-24T09:57:57.900
> 
> 标签：php, arrays

有没有简单快捷的方法来转换 php 数组

```
 $actions =  Array ( [visits-visit] => Array ( 
                                  [0] => index 
                                  [1] => edit 
                                  [2] => add 
                                  [3] => delete 
                                  [4] => search 
                                ) 
       ) 
```

至

```
Array ( [visits-visit] => Array ( index ,edit ,add ,delete, search ) ) 
```

我有一个第一种格式的数组，需要这样添加

```
 $this->allow($_userRole, 'module-contr', array( index ,edit ,add ,delete, search)); 
```

当我这样

```
$this->allow($_userRole, 'module-contr', array( $actions )); 
```

它没有按我的意愿接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:07:27.827

这两个数组本质上是相同的......第一个数组只是您决定打印出来时的显示方式（`print_r()`例如）。当你定义一个数组 IE 时。创建一个里面已经有值的数组，你会写这样的东西 -

```
$someArr = array(
  'index_of_another_array' => Array ( 'index' ,'edit' ,'add' ,'delete', 'search' )
); 
```

本质上，您正在创建的数组已经具有**它们的出现顺序所暗示的数字索引**......索引处的元素`[0]`是字符串`index`。在索引`[1]`处你有字符串`edit`......在索引处`[2]`你有`add`......等等......

另一件需要注意的是您所说的这一行 -

```
$this->allow($_userRole, 'module-contr', array( $actions )); 
```

使用最后一个参数，您实际上所做的是`$actions` **在**一个额外的数组中传递 ！您正在做的是创建一个第一个元素等于的新数组`$actions`。我认为您应该通过简单地传递`$actions`而**不是** `array( $actions )`

我希望这能澄清一些事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:09:25.687

应该

```
$this->allow($_userRole, 'module-contr', $actions['visits-visit']); 
```

# jquery - 如何编辑表格单元格中的值以更新到数据库

> ID：10735180
> 
> 赞同：1
> 
> 时间：2012-05-24T09:58:04.470
> 
> 标签：jquery

我有数据库表。这里是带有表格的代码：[链接](http://jsfiddle.net/centerwow/hsXRf/9/) 我想单击要更新值的单元格。单元格应具有如下类：

```
.edittd
{
 display:none
} 
```

单击单元格后，该类将是：

```
.edittd
{
font-size:14px;
width:200px;
background-color:#ffffcc;
border:solid 1px #000;
padding:4px;
} 
```

这将使单元格更大，更显眼。

然后在输入新值并在字段外单击后，它会被更新。

我试着像下面那样做：

```
$('tr').click(function(){ 
    $('#display').html(this.id); 
    $('td',this).attr('class').toggleClass('edittd');
});​ 
```

我也不知道如何将常规单元格（td）转换为输入字段并在更新后恢复为常规单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:07:02.283

尝试以下操作：

```
$('td').click(function(e){
    var txt = $(this).text();
    $(this).replaceWith('<input class="edited" type="text" value="' + txt + '" />');
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:07:07.210

示例 HTML 代码...

```
<tr id="5" class="edit_tr">
<td width="50%" class="edit_td">
<span id="first_5" class="text" style="display: inline; ">Priyank</span>
<input type="text" value="Priyank" class="editbox" id="first_input_5" style="display:    none; ">
</td>
<td width="50%" class="edit_td">
<span id="last_5" class="text" style="display: inline; ">Patel</span> 
<input type="text" value="Patel" class="editbox" id="last_input_5" style="display: none;  ">
</td>
</tr> 
```

Javascript代码：

```
$(".edit_tr").click(function(){
    var ID=$(this).attr('id');
    $("#first_"+ID).hide();
    $("#last_"+ID).hide();
    $("#first_input_"+ID).show();
    $("#last_input_"+ID).show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:08:11.367

不要替换会使您的标记无效的 td，只需添加一个输入字段作为子项。

为了给你一个起点，我编辑了你的**[例子](http://jsfiddle.net/poikl/87KHY/1)**

保存后，删除输入字段和类`edittd`。

注意：切换类的正确调用是：`$('td').toggleClass('edittd');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:08:22.587

你可以像这样使用这个插件：**[PLUGIN](http://www.labs.mimmin.com/inlineedit/#demo)**

或者

插件 2：[链接](http://code.google.com/p/jquery-inline-editor/)

```
$('table.myTable').inplacerowedit({

    url: /Some/URL',
        inputs: {
            '0': { type: 'datepicker', name: 'OpenDate' },
            '1': { type: 'datepicker', name: 'CloseDate' },
            '2': { type: 'text', name: 'Cost' },
            '3': { type: 'text', name: 'Description' }
        }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T18:50:30.687

我找到了解决办法。解决方案在单元格上包含两个元素（td 标记）。1 - 一个元素是跨度。2 - 第二个元素是输入字段。正常模式下，span 是可见的，输入字段是隐藏的。编辑模式我们与alemnt的属性相反，这意味着跨度被隐藏并且输入字段被显示。selution [jsfiddle](http://jsfiddle.net/centerwow/Tu2eE/4/)的链接 你应该点击cel名称'colume1'之后你可以编辑它。完成后，您可以在表格外部单击，新值将保留。编码：

```
var COLUME, VAL;
$('td').click(function() {
    COLUME = $(this).attr('id');
    $('#displaycolumeid').html(COLUME);
    $('#colume1').hide();
    $('#inputName').show();

});

$(".edittd").mouseup(function() {
    return false
});

$(document).mouseup(function() {
    $('#colume1').show();
    $('#inputName').hide();
    VAL = $("#inputName").val();
    $("#colume1").html(VAL); 
});​ 
```

的CSS：

```
.edittd
{
font-size:14px;
width:200px;
background-color:#ffffcc;
border:solid 1px #000;
padding:4px;
}
.display{
background:red;
    width:110px;
} 
```

谢谢..

​</p>

# css - CSS背景在Chrome和FF中不起作用

> ID：10735188
> 
> 赞同：-2
> 
> 时间：2012-05-24T09:58:29.173
> 
> 标签：css

您好，我有下一个可以在 IE 中正常工作但不能在 FF 和 Chrome 中工作的 css 类，我应该改变什么来修复它？

```
.extHeaderStyle { background: transparent url(/sline/navigation/header/images/footerBack.gif) repeat-x -1 left; }

<tr class="GridHeaderStyle extHeaderStyle" align="left" style="font-size:14px;">
            <th scope="col">AppErrorId</th><th scope="col">AppName</th><th scope="col">ServerIp</th><th scope="col">ClientIp</th><th scope="col">Request</th><th scope="col">ErrMsg</th><th scope="col">CreatedBy</th><th scope="col">CreatedDate</th>
        </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:02:28.773

后面需要一个单位`-1`，例如`-1px`或`-1em`。只`0`允许没有单位的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:03:08.373

删除-1？或者在值之后使用一个单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:02:36.090

我把类放到标签上，背景已经开始工作了。

# c# - 解析域/主机名的字符串

> ID：10735190
> 
> 赞同：6
> 
> 时间：2012-05-24T09:58:31.527
> 
> 标签：c#, .net, parsing, url, dns

Out 客户可以从域名进入网站。他们还可以从他们的联系人中输入邮件地址。

知道我们需要找到可以将哪些网站的域与邮件地址的域相关联的客户。

所以我的想法是从webadress和url中提取主机并比较它们

那么从 url 获取主机名的最可靠算法是什么？

例如主机可以是：

```
foo.com
www.foo.com
http://foo.com
https://foo.com
https://www.foo.com 
```

结果应始终为 foo.com

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T12:39:23.053

而不是依靠不可靠的正则表达式`System.Uri`为您进行解析。使用这样的代码：

```
string uriStr = "www.foo.com";
if (!uriStr.Contains(Uri.SchemeDelimiter)) {
    uriStr = string.Concat(Uri.UriSchemeHttp, Uri.SchemeDelimiter, uriStr);
}
Uri uri = new Uri(uriStr);
string domain = uri.Host; // will return www.foo.com 
```

**现在只获取您可以使用的顶级域：**

```
string tld = uri.GetLeftPart( UriPartial.Authority ); // will return foo.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:15:18.620

这是一个与您提供的网址匹配的正则表达式。基本上 http 和 https 等是可选的，就像 www 一样，一切都匹配到一个可能的路径；

```
var expression = /(https?:\/\/)?(www\.)?([^\/]*)(\/.*)?$/; 
```

这意味着；

```
var result = 'https://www.foo.com.vu/blah'.replace(expression, '$3') 
```

将评估为

```
result === 'foo.com.vu' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T13:56:36.607

c# 中已经有一个用于提取此信息的 url 解析器

以下是一些示例[http://www.stev.org/post/2011/06/27/C-HowTo-Parse-a-URL.aspx](http://www.stev.org/post/2011/06/27/C-HowTo-Parse-a-URL.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T22:08:12.517

看到这个网址。与权威不同，Host 属性不包括端口号。

[http://msdn.microsoft.com/en-us/library/system.uri.host(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.uri.host(v=vs.110).aspx)

# facebook - 如何获取特定帖子的点赞和评论总数？

> ID：10735197
> 
> 赞同：0
> 
> 时间：2012-05-24T09:58:54.190
> 
> 标签：facebook, facebook-apps

我想获取我网站上特定帖子的点赞和评论总数，例​​如。如果我的网站有 100 个页面，我在每个页面上都集成了 facebook like 按钮，我如何获得与该页面或帖子相关的点赞数？我查看了 GRAPH API，但没有找到与我的问题相关的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:38:25.997

检查此 [Facebook 文档](https://developers.facebook.com/docs/reference/fql/link_stat/)

只需使用此 javascript 代码。（更改网址）

```
 FB.api({
                method: 'fql.query',
                query: 'SELECT url, normalized_url, share_count, like_count, comment_count, total_count, commentsbox_count, comments_fbid, click_count FROM link_stat WHERE url="http://www.facebook.com"'
            }, function(response){}); 
```

# php - 如何在 windows vista 上使用 apache 减少页面加载时间并出现一些错误 404

> ID：10735198
> 
> 赞同：0
> 
> 时间：2012-05-24T09:58:56.310
> 
> 标签：php, performance, apache, http-status-code-404

当我开发页面时，我在本地使用 xampp 包主机站点。
每次我刷新页面时，我都必须等待很长时间才能使用 http 状态 404 解析的元素。
图片显示了它在时间轴上的外观。请为我提供解决方案，以加快
缺少元素的页面加载。 ![带有网络面板的 chorme 开发人员工具](../Images/0564c51bd485be28460af5972f14b0b6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:20:37.367

我在您的屏幕截图中看不到实际发生的情况。是您的本地 Web 服务器需要很长时间才能回复 404 吗？或者您是否正在尝试使用非本地资源？

编辑：从您对另一条评论的回答中，我假设您的本地 Web 服务器没有找到（应该是）本地资源并以 404 回复。=> 检查您的服务器配置以确保它不会做任何愚蠢的事情，例如重新扫描每个请求的所有目录。

# c# - 如何通过实体框架搜索对象及其子对象？

> ID：10735200
> 
> 赞同：1
> 
> 时间：2012-05-24T09:59:07.307
> 
> 标签：c#, .net, entity-framework, linq-to-entities

使用 Entity Framework 4.3 和 Linq，我想将搜索字符串与包含对象的某些属性以及子对象的属性进行匹配。事实证明这是一个相当复杂的查询，我不知道该怎么做。例如，一个属性是一个整数，我不允许在 Linq 查询中调用 .ToString() 。

为了让您了解我正在尝试做什么，请考虑以下示例代码：

```
var dbVersions = from ver in db.Versions 
                 where ver.Name.Contains(search) || 
                       ver.Children.Any(c=>c.Id.ToString().Contains(search)) 
                 select ver; 
```

我应该如何实现这个搜索？也许通过存储过程？

数据库服务器是 SQL Server 2012。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T10:25:11.233

如果你想使用 LINQ，框架会在内部进行适当的优化，根据我的经验，结果还不错。如果您不想使用存储过程并坚持使用 LINQ 将其全部保存在您的类代码中，请使用：

```
SqlFunctions.StringConvert((double)c.Id) 
```

用于将您的 int 转换为字符串。请注意，int 没有重载，因此您需要将其转换为 double 或 decimal。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:09:24.213

在您的情况下，我建议使用存储过程。

如果您最终传递了一个将用于多个列的搜索词，那么您最好编写一个存储过程。我曾经尝试过类似于您正在做的事情，最终结果是非常混乱的 LINQ 语句，让我感觉很脏 :)

很好的参考：

[实体框架不支持 x.ToString() ！](https://stackoverflow.com/questions/6213037/x-tostring-is-not-supported-by-the-entity-framework)

以下是如何将存储过程与 EF 一起使用的示例：

[http://blogs.msdn.com/b/bindeshv/archive/2008/11/20/using-stored-procedures-in-entity-framework.aspx](http://blogs.msdn.com/b/bindeshv/archive/2008/11/20/using-stored-procedures-in-entity-framework.aspx)

请记住在“从数据库更新模型”时添加存储过程。

# javascript - 从显示标签行中的多个复选框中仅选择一个

> ID：10735202
> 
> 赞同：0
> 
> 时间：2012-05-24T09:59:32.867
> 
> 标签：javascript, spring, displaytag

我在我的jsp页面中使用了一个显示表..就像......

```
<display:table name="${MyList}" pagesize="10" requestURI=""  sort="page">
<display:setProperty name="paging.banner.placement" value="bottom" />
<display:column property="Language" sortable="true" title="Name" />
<display:column title="Read">
    <input type="checkbox" name="ReadOnly" id="1" onChange="toggle(this);">
</display:column>
<display:column title="Write">
    <input type="checkbox" name="Write" id="2" onChange="toggle(this);">
</display:column>
<display:column title="Speak">
    <input type="checkbox" name="Speak" id="3" onChange="toggle(this);">
</display:column>
</display:table> 
```

它工作正常。然后我只需要在每一行中选择一个组合框。为此，我使用了 javaScript 函数

```
<script type="text/javascript">
function toggle(chkBox) {
    alert("chk----"+chkBox);
    checkboxes = document.getElementsByTagName("input");
    alert("hai-----"+checkboxes);
    var isChecked = chkBox.checked;
    for (var i = 0; i < checkboxes.length; i++) {
        checkboxes[i].checked = false;
    }
    if (isChecked) {
        chkBox.checked = true;
    }
}
</script> 
```

但现在我只能选择 myList 中的所有复选框之一。我想从每一行中只选择一个组合框..

首先我必须说.. 我不需要那里的单选按钮。

可能吗？我怎样才能让我的代码来实现它？？？

# orientdb - 有没有人在 OrientDB 中有 JSON 插入/选择的工作示例？

> ID：10735203
> 
> 赞同：7
> 
> 时间：2012-05-24T09:59:37.220
> 
> 标签：orientdb

选择查询不适用于 OrientDB 中的 JSON。有人可以提供一个展示两件事的工作示例：

1.  正确插入 JSON 数据

2.  查询 JSON 数据

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-17T11:58:34.960

1.使用**“内容”**实现JSON插入。

例如-
`insert into Person content {"name":"nawab","age":25}`

要运行此程序，您必须事先进行配置 - 1.通过 -
创建顶点 -

```
create class Person extends V 
```

2.然后创建属性**名称**和**年龄**

`create property Person.name string`
`create property Person.age integer`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-17T07:44:08.930

干得好！我一直试图解决这个问题一段时间，终于让它工作了。:)

如图所示运行以下sql命令：

```
create class EXAMPLE

/* The trick is: Do not 'CREATE' the property with any type */

insert into EXAMPLE (my_prop) values ({"name": "James", "age": 23})
insert into EXAMPLE (my_prop) values ({"name": "Harden", "age": 24})

/* Fetch the fields inside the JSON */
select my_prop.name from example
select my_prop.age from example where my_prop.name like 'James' 
```

我从书中读到了这个例子：[Claudio Tesoriero 的 OrientDB 入门](https://books.google.com/books?id=nUD3fWJ3u_8C&pg=PT105&lpg=PT105&dq=insert+JSON+into+records+orientdb&source=bl&ots=VQ_gNtJgIy&sig=2cN5_VELl076VFmanC8k1kTLsbY&hl=en&sa=X&ei=xMEHVdHtNIWpogSJ3IEI&ved=0CFIQ6AEwCQ#v=snippet&q=JSON&f=false)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T22:57:20.377

这个问题在[此处](https://groups.google.com/d/topic/orient-database/bNcurjCpvSY/discussion)的 OrientDB 组中继续。如果一切正常，您是否尝试过？

# jfreechart - 一段时间内的每小时移动平均线

> ID：10735204
> 
> 赞同：0
> 
> 时间：2012-05-24T09:59:37.930
> 
> 标签：jfreechart

我正在尝试在选定的持续时间内创建基于小时的移动平均线。我希望 x 轴代表一天中的 24 小时，y 轴代表整个持续时间内每小时的平均值。例如，我想要一个人 4 月的平均小时数。

我已经编写了以下程序，但它会在第一个程序之后的两天打印。非常感谢任何帮助。

[编辑：在这里](http://www.jfree.org/forum/viewtopic.php?f=3&t=115000)交叉发布。

```
public class MovingAverageDemo extends ApplicationFrame {

private static final long serialVersionUID = -1570942379483983865L;

/**
 * A moving average demo.
 * @param title the frame title.
 */
public MovingAverageDemo(String title) {
    super(title);

    // create a title...
    String chartTitle = "Hourly Average";
    XYDataset dataset = createDataset();

    JFreeChart chart = ChartFactory.createTimeSeriesChart(
            chartTitle,
            "Hours",
            "Actions",
            dataset,
            true,
            true,
            false
    );

    LegendTitle legend = (LegendTitle) chart.getLegend();
    legend.setVisible(true);

    XYPlot plot = chart.getXYPlot();
    XYItemRenderer renderer = plot.getRenderer();
    if(renderer instanceof StandardXYItemRenderer) {
        StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;
        rr.setPlotLines(true);
        rr.setBaseShapesFilled(true);
    }

    NumberFormat format = NumberFormat.getNumberInstance();
    format.setMaximumFractionDigits(2);
    XYItemLabelGenerator generator =
        new StandardXYItemLabelGenerator(
                StandardXYItemLabelGenerator.DEFAULT_ITEM_LABEL_FORMAT,
            format, format);
    renderer.setBaseItemLabelGenerator(generator);
    renderer.setBaseItemLabelsVisible(true);

    DateAxis axis = (DateAxis) plot.getDomainAxis();
    axis.setDateFormatOverride(new SimpleDateFormat("HH"));
    ChartPanel chartPanel = new ChartPanel(chart);
    chartPanel.setPreferredSize(new java.awt.Dimension(500, 270));
    setContentPane(chartPanel);

}

/**
 * Creates a dataset, one series containing unit trust prices, the other a moving average.
 *
 * @return the dataset.
 */
public XYDataset createDataset() {

    TimeSeries s1 = new TimeSeries("New", Hour.class);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 1)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 2)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 3)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 4)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 5)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 6)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 7)), 148);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 8)), 153);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 9)), 142);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 10)), 123);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 11)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 12)), 139);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 13)), 142);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 14)), 138);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 15)), 137);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 16)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 17)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 18)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 19)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 20)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 21)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 22)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 23)), 0);
    s1.add(new Hour(getDateByHour(1, 4, 2012, 24)), 0);

    s1.add(new Hour(getDateByHour(2, 4, 2012, 1)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 2)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 3)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 4)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 5)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 6)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 7)), 168);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 8)), 173);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 9)), 162);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 10)), 143);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 11)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 12)), 119);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 13)), 122);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 14)), 118);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 15)), 117);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 16)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 17)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 18)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 19)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 20)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 21)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 22)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 23)), 0);
    s1.add(new Hour(getDateByHour(2, 4, 2012, 24)), 0);

    TimeSeries s2 = MovingAverage.createMovingAverage(s1, "NewC", 1, 0);

    TimeSeries s3 = new TimeSeries("Cancelled", Hour.class);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 1)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 2)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 3)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 4)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 5)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 6)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 7)), 9);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 8)), 7);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 9)), 2);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 10)), 8);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 11)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 12)), 9);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 13)), 7);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 14)), 3);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 15)), 9);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 16)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 17)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 18)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 19)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 20)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 21)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 22)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 23)), 0);
    s3.add(new Hour(getDateByHour(1, 4, 2012, 24)), 0);

    s3.add(new Hour(getDateByHour(2, 4, 2012, 1)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 2)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 3)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 4)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 5)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 6)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 7)), 9);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 8)), 7);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 9)), 2);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 10)), 8);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 11)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 12)), 9);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 13)), 7);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 14)), 3);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 15)), 9);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 16)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 17)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 18)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 19)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 20)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 21)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 22)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 23)), 0);
    s3.add(new Hour(getDateByHour(2, 4, 2012, 24)), 0);

    TimeSeries s4 = MovingAverage.createMovingAverage(s3, "CancelledC", 1, 0);

    TimeSeriesCollection dataset = new TimeSeriesCollection();
    //dataset.addSeries(s1);
    dataset.addSeries(s2);
    //dataset.addSeries(s3);
    dataset.addSeries(s4);

    return dataset;
}

/**
 * Starting point for the demonstration application.
 *
 * @param args ignored.
 */
public static void main(String[] args) {

    MovingAverageDemo demo = new MovingAverageDemo("Moving Average Demo 1");
    demo.pack();
    RefineryUtilities.centerFrameOnScreen(demo);
    demo.setVisible(true);

}

private Date getDateByHour(int day, int month, int year, int hour) {
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.DAY_OF_MONTH, day);
    cal.set(Calendar.MONTH, month);
    cal.set(Calendar.YEAR, year);
    cal.set(Calendar.HOUR_OF_DAY, hour);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);

    return cal.getTime();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:45:48.187

从我从你的评论中了解到，你真的想在你的情节上显示 4 个系列，而不是 2 - 即

*   2012 年 5 月 1 日 新
*   2012 年 5 月 2 日 新
*   2012 年 5 月 1 日已取消
*   2012 年 5 月 2 日已取消

然后，您可以更改您的方法，或者更好的是，与多次调用`getDateByHour()`的构造函数结合使用：`new Hour(Date)``createDataset()`

```
private Hour makeHour(int hour) {
  return new Hour(hour, 1, 1, 2012);
} 
```

您使用的实际日/月/年应该无关紧要，因为您已将 设置`DateFormat`为“HH”，因此这些都不会被渲染。（前提是您以后不要更改 x 轴...）

# php - ForEach 乘法问题

> ID：10735207
> 
> 赞同：0
> 
> 时间：2012-05-24T09:59:44.693
> 
> 标签：php, foreach

这可能是我忽略的一个愚蠢的问题，但我希望你们中的一个可以帮助我！我有一个循环来列出我的数据库中的产品网格。

到目前为止一切顺利，除了这个小问题外，一切都大致正常。

在列表中，我正在执行以下操作：

```
<ul>
    <?php $i=0; foreach ($products as $product) : $i++; ?>
    <li  <?php 
            if(($i%4) ==0){

                echo 'class="last"';
              } elseif($i%2==0){
                  echo 'class="second"';
              } 
          ?>>

// Then I've got the image thumbnail etc coming in.... 
```

除了最后一行，一切看起来都不错……

因此，例如，如果我有 8 个产品...前 7 个将正确显示在页面上，但在第 8 个产品移动到下一页的最后有一个间隙。

起初我以为是 CSS 宽度之类的，但事实并非如此。即使我有 20 种产品……最后一行总是只显示 3 种，并将最后一个产品放在下一页。

有什么想法吗？

干杯 M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:00:26.447

```
<ul>
    <?php $i=count($products); ?>
    <li  
       <?php 
            if(($i%4) ==0){
                   echo 'class="last"';
              } elseif($i%2==0){
                  echo 'class="second"';
              } 
       ?>> 
```

让我们试试吧。。

# php - Crocodoc api不适用于php

> ID：10735211
> 
> 赞同：1
> 
> 时间：2012-05-24T09:59:56.577
> 
> 标签：php, api

我正在尝试使用带有[以下代码的](https://github.com/prince-mishra/crocodoc-php)[Crocodoc api](https://crocodoc.com/docs/api/)来获取状态。

```
$croco = new Crocodoc();

$uuids = "786e072b-981c-4d2a-8e80-80e215f1f7c2";
echo "\n\nchecking status of : ", $uuids;
$status = $croco->getStatus($uuids);
echo "\n\nstatus is : ", $status;

class Crocodoc { 
    public $api_key = 'HPUd6LZXg5174TAENbvBcx30';
    public $api_url = 'https://crocodoc.com/api/v2/';

    public function getStatus($uuids){
        $url = $this->api_url.'document/status';
        $token = $this->api_key;
        $dataStr = '?token='.$token.'&uuids='.$uuids;
        // this is a GET request
        $output = $this->doCurlGet($url, $dataStr);
        return $output;
    }
} 
```

我没有得到状态，也没有错误。什么是错误的，或者它在评估模式下不起作用。现在我在 XAMPP 本地使用它，这可能是个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:14:40.210

有什么`doCurlGet`作用？

因为[请求](http://hurl.it/hurls/4f438998cf5e33cc95032fb03e90bdef93f0b2d6/30a568f1036079e3d8dc07068c2f025809e47d05)（和响应）很好：

```
HTTP/1.1 200 OK
Server: nginx/1.2.0
Date: Thu, 24 May 2012 10:11:27 GMT
Content-Type: application/json
Transfer-Encoding: chunked
Connection: keep-alive

[
  {
    "uuid": "786e072b-981c-4d2a-8e80-80e215f1f7c2",
    "viewable": true,
    "status": "DONE"
  }
] 
```

您可以尝试使用真正的卷曲，例如：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "/* generated url to crocodoc */");
$data = curl_exec($ch);
curl_close($ch); 
```

或直接：

```
$data = file_get_contents('/* generated url to crocodoc */'); 
```

**编辑：**

刚刚尝试[了这段代码](http://codepad.viper-7.com/wt3U3P)，它工作正常：

```
$croco  = new Crocodoc();
$uuids  = "786e072b-981c-4d2a-8e80-80e215f1f7c2";
$status = $croco->getStatus($uuids);
var_dump($status);

class Crocodoc { 
    public $api_key = 'HPUd6LZXg5174TAENbvBcx30';
    public $api_url = 'https://crocodoc.com/api/v2/';

    public function getStatus($uuids){
        $url = $this->api_url.'document/status';
        $token = $this->api_key;
        $dataStr = '?token='.$token.'&uuids='.$uuids;

        // this is a GET request
        return file_get_contents($url.$dataStr);
    }
} 
```

# c++ - 将文件输入到结构中

> ID：10735217
> 
> 赞同：0
> 
> 时间：2012-05-24T10:00:13.990
> 
> 标签：c++, file, data-structures, input, ifstream

我正在尝试从名为“weapon.txt”的文件中读取行并将它们输入到一个结构中，该结构的行很长

```
struct weapon
{
    char name[20]; //Edited
    int strength;
} 
```

要读取的文件如下所示：

```
Excalibur
150
Throwing Stars
15
Rapier
200
Bow and Arrow
100
Axe
200
Crossbow
100
Scimitar
250
Rusted Sword
10
Soul Slayer
500 
```

我现在的代码是

```
#include<fstream>
#include<iostream>
#include<cstring>

using namespace std;

struct WeaponInfo
{
    char name[16];
    int strength;
};

const int MaxWeap = 10;

void openfile(ifstream&); //Opening the file
void displayfile(ifstream&, WeaponInfo&);//Display file

int main ()
{
    WeaponInfo weapon[MaxWeap];
    ifstream fin;   
    openfile(fin);
    displayfile(fin, weapon[MaxWeap]);  
}

void openfile(ifstream& fin)
{
    fin.open("weapon.txt");
}

void displayfile(ifstream& fin, WeaponInfo& weapon[MaxWeap])
{
    char nm;
    int str;

    while (fin.eof() == 0)
    {
        for(int i = 0; i <= MaxWeap; i++);
        {
            fin.getline(nm);
            fin.getline(str);

            strcpy(weapon[i].name, nm);
            strcpy(weapon[i].strength, str);

            i++;
            cout << weapon[i].name << "\n" << weapon[i].strength << endl;
        }
    }
    fin.close();
} 
```

编辑：这是我重新做之后现在所拥有的，我收到以下编译错误：将“武器”声明为引用数组；在函数 'void displayfile(...) 'fin' 未在此范围内声明；'weapon' 未在此范围内声明；ma,e 查找 'i' 已更改为 ISO 'for' 范围 [-fpermissive]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:41:20.150

我首先倾向于使用`std::string`而不是 char 数组 - 它们更容易使用。所以现在的结构是这样的：

```
struct weapon
{
    string name;
    int strength;
}; 
```

接下来，您需要一些可以从输入流中读取结构的东西：

```
bool getWeapon( ifstream& is, weapon& w )
{
    getline(is, w.name) ;
    string strengthStr;
    getline(is, strengthStr) ;
    w.strength = strtol( strengthStr.c_str(), NULL, 0 );

    return !is.eof();
} 
```

这里有两件事，我用作`strtol`从字符串到 int 的转换函数。`atoi`被使用，但`strtol`给你更多的灵活性，更重要的是，更好的错误检查，虽然我没有费心在这里实现它。A`stringstream`可能是这里的另一种选择。

其次，我返回一个布尔值，指示名称是否为空。这样做的原因是，稍后在代码中检查`eof()`ifstream 时，它实际上并没有设置，直到您读取文件末尾之后。所以最后一次好的阅读不会设置它，但第一次尝试重新阅读它会。然后在此处返回 false 将向调用者指示由于 ifstream 位于文件末尾而导致“获取”失败。

最后，我们需要一些东西来读取所有的武器：

```
ifstream input;
input.open("weapons.txt");
vector<weapon> ws;
if ( input )
{
    while (! (input.eof()))
    {
        weapon w;
        if ( ! getWeapon( input, w ) )
            break;

        ws.push_back( w );
    }
}
input.close(); 
```

这将把所有武器放入一个向量中。`getWeapon`如果没有阻止添加“空”武器，请注意对中断的调用。不是最迷人的解决方案，但它应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:21:24.520

伪代码是这样的，（就像 Martol1ni 为你编码的一样）：

```
open the file
while (!end-of file)
{
  create instance of struct weapon
  read a line and strcpy into weapon.name
  read a line and set weapon.strength = atoi(line)
  do something with the instance, eg. add to list, call a member function, etc.
}
loop
close file. 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T10:15:46.277

假设您控制武器.txt，不必费心检查文件中的错误，您可以这样做。下一次，做一点研究...... :)

```
#include <fstream>
#include <vector>
#include <string>
#include <iostream>
#include <cstdlib>

using namespace std;

struct weapon
{
string name;
int strength;
weapon(string n, int s) : name(n), strength(s) {}
};

void readFileToVec(vector<weapon> &myVec) {
    ifstream in("weapon.txt");
    while (!in.eof()) {
        string name;
        getline(in,name);
        string strength;
        getline(in,strength);
        weapon myWep(name,atoi(strength.c_str()));
        myVec.push_back(myWep);
    }
    in.close();
} 
```

# java - 从 EJB 读取文件

> ID：10735221
> 
> 赞同：2
> 
> 时间：2012-05-24T10:00:23.493
> 
> 标签：java, jakarta-ee, jboss, ejb

似乎 Java EE 规范不允许从 EJB 读取文件，如下一个链接中所述：

[http://java.sun.com/blueprints/qanda/ejb_tier/restrictions.html#file_access](http://java.sun.com/blueprints/qanda/ejb_tier/restrictions.html#file_access)

它说：

> 不允许企业 bean 访问文件主要是因为文件不是事务性资源。允许 EJB 访问文件系统中的文件或目录，或者使用文件描述符，会损害组件的可分发性，并且会带来安全隐患。

那么我应该如何从应用程序服务器中的文件中读取呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:45:09.093

我同意所有反对这种操作的观点，在你引用的链接中得到了很好的解释。该链接还建议了访问业务数据的首选方式，即通过 JDBC 接口。

但是，使用 GlassFish，我可以`@Stateless` `@EJB`从`@ApplicationScoped` `CDI`Bean 和 Bean 中打开和读取驻留在 web 文件夹中的文件。我`ClassLoader`为此目的使用：

```
@Stateless
@LocalBean
public class MyBean {

    @PostConstruct
    public void init() {
        ClassLoader loader = LicenseMessage.class.getClassLoader(); 
        InputStream in = loader.getResourceAsStream("../../resources/myFile.txt");
    }
} 
```

# php - TCPDF，文本总是斜体

> ID：10735224
> 
> 赞同：1
> 
> 时间：2012-05-24T10:00:31.917
> 
> 标签：php, html, pdf-generation, tcpdf

我使用 TCPDF 自动生成动态 PDF。我遇到的问题是，每次我尝试渲染任何类型的文本时，无论是使用`writeHTML()`or`MultiCell()`还是任何其他文本函数。它们似乎都具有默认的斜体文本样式。只是为了澄清一下，在设置字体时，我已经指定样式应该是“正常”的。

任何人都知道如何解决这个问题，谢谢斯科特

# wpf - 如何拦截从 WPF 文本框继承的控件上的文本属性？

> ID：10735225
> 
> 赞同：2
> 
> 时间：2012-05-24T10:00:34.803
> 
> 标签：wpf, textbox, dependency-properties

我想要做的是拦截对从 TextBox 继承的控件上的 Text 属性的分配。我想修改此文本并将修改后的文本显示在文本框中。我还需要能够在读取属性时返回与文本框中显示的内容不同的内容。在 Win Forms 中，我可以通过重写 Text 属性来做到这一点，因为它被声明为虚拟的。显然，依赖属性有些不同。我的一个想法是使用 OverridePropertyMetadata 让我自己的回调检测属性更改，然后调用使用 GetMetadata 获得的原始回调。这不起作用，因为属性更改的回调被合并。如果有另一种特定于该属性的方法，我会很感兴趣，但我想知道一般情况下是否可以“覆盖”依赖属性。

我的应用程序是一个格式化的文本框，当文本设置为 1000 时说（对于数字格式），文本框显示 1,000 但是当您阅读文本时，您会再次返回 1000 - 该框将在内部跟踪未格式化的文本. 我设法相当容易地在 Win Forms 中实现，但现在正试图将其移植到 WPF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:15:52.183

我认为这`OverridePropertyMetadata`是要走的路，但不是定义一个新的`PropertyChangedCallback`，你可以写一个新的`CorceValueCallback`：

```
static object CoerceText(DependencyObject d, object baseValue)
{
    string s = (string)baseValue;

    // Change s to whatever you want
    ...

    return s;
} 
```

# java - DropBox oauth_signature 生成

> ID：10735231
> 
> 赞同：1
> 
> 时间：2012-05-24T10:01:08.927
> 
> 标签：java, oauth, dropbox-api

```
String baseString="POST&";
String subBaseString = "oauth_consumer_key="+oauth_consumer_key+"&oauth_nonce="+nonce+"&oauth_signature_method="+oauth_signature_method;
subBaseString += "&oauth_timestamp="+  oauth_timestamp+"&oauth_token="+oauth_token+"&oauth_version=1.0";
baseString += URLEncoder.encode(baseRequest, "UTF-8");
baseString += "&" +  URLEncoder.encode(subBaseString, "UTF-8");

String result;
try {

    SecretKeySpec signingKey = new SecretKeySpec(oauth_consumer_key.getBytes(), oauth_signature_method);

    Mac mac = Mac.getInstance(oauth_signature_method);
    mac.init(signingKey);

    byte[] rawHmac = mac.doFinal(baseString.getBytes());

    // base64-encode the hmac
    result = Base64.encode(rawHmac);

} catch (Exception e) {
    throw new SignatureException("Failed to generate HMAC : " + e.getMessage());
} 
```

这是我的 oauth_signature 生成代码....

但得到错误..

> {“错误”：“API v1+ 中的 OAuthError。请求错误签名：无效或缺少签名”}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:14:03.570

如果您使用纯 HTTP，OAuth 签名、随机数和时间戳都是必要的安全措施。但是由于 Dropbox API 可以通过 HTTPS 使用，因此您可以放弃所有这些复杂性，而只使用[`PLAINTEXT`签名模式](http://oauth.net/core/1.0/#anchor22)会简单得多。

下面是一些完成这项工作的示例 Java 代码。（它将 OAuth 信息放在“Authorization”HTTP 标头中，但如果需要，您可以使用 URL 参数。）

```
 /**
  * @param token
  *    For all "real" API endpoints, pass in the access token here.
  *    For "/oauth/access_token", pass in the request token here.
  *    (For "/oauth/request_token", use {@link #buildInitialOAuthHeader}.)
  */
 public static HttpHeader buildOAuthHeader(AppInfo appInfo, Token token)
 {
     StringBuilder buf = new StringBuilder();
     buf.append("OAuth ");
     buf.append("oauth_token=\"").append(token.key).append("\"");
     buf.append(", oauth_consumer_key=\"").append(appInfo.key).append("\"");
     buf.append(", oauth_signature_method=\"PLAINTEXT\"");
     buf.append(", oauth_signature=\"").append(appInfo.secret).append("&").append(token.secret).append("\"");
     return new HttpHeader("Authorization", buf.toString());
 }

 /**
  * For "/oauth/request_token".
  */
 public static HttpHeader buildInitialOAuthHeader(AppInfo appInfo)
 {
     StringBuilder buf = new StringBuilder();
     buf.append("OAuth ");
     buf.append(" oauth_consumer_key=\"").append(appInfo.key).append("\"");
     buf.append(", oauth_signature_method=\"PLAINTEXT\"");
     buf.append(", oauth_signature=\"").append(appInfo.secret).append("&\"");
     return new HttpHeader("Authorization", buf.toString());
 } 
```

# c# - C# 使用 .ToList() 将 IEnumerable 转换为 IList？

> ID：10735236
> 
> 赞同：4
> 
> 时间：2012-05-24T10:01:19.350
> 
> 标签：c#, .net, ienumerable, ilist

我正在使用一个外部库，它返回一个`IEnumerable`. 在我收到它们之后，我想在最后添加一些模型。这似乎只有在使用一个`IList`或其他一些集合时才有可能。因此，当我尝试`IEnumerable`使用`.ToList()`它返回的方法将`IEnumerable`. 这不是我所期望的吗？我使用`.ToList()`正确吗？或者还有什么可以解决我的问题？

这是我到目前为止的代码：

```
IList<Models.Browser.Language> languages = GetLanguages(dateDrom, dateTo).ToList();
IList<Models.Browser.Language> primaryItems = languages.Take(10); 
```

最后一行产生一个错误说： `Cannot implicitly convert type 'System.Collections.Generic.IEnumerable<Bogus.Models.Browser.Language>' to 'System.Collections.Generic.IList<Bogus.Models.Browser.Language>'. An explicit conversion exists (are you missing a cast?)`

提前致谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-24T10:03:32.197

的值`languages`是对 a 的引用`List<>`，但是您调用`Take(10)`的是它，它*不会*返回列表。

只需移动您的`ToList()`电话：

```
IEnumerable<Models.Browser.Language> languages = GetLanguages(dateDrom, dateTo);
IList<Models.Browser.Language> primaryItems = languages.Take(10).ToList(); 
```

或者只需一次调用即可：

```
var primaryItems = GetLanguages(dateDrom, dateTo).Take(10).ToList(); 
```

此外，这也不完全正确：

> 在我收到它们之后，我想在最后添加一些模型。

另一种方法是使用`Concat`. 例如：

```
var items = GetLanguages(dateDrom, dateTo).Take(10).Concat(fixedItems); 
```

# php - 谷歌分析 API 库

> ID：10735237
> 
> 赞同：0
> 
> 时间：2012-05-24T10:01:24.567
> 
> 标签：php, mysql, cakephp, google-analytics, google-analytics-api

我想看看我们如何允许用户连接到他们的 Google Analytic 的用户 ID 并连接到我们的应用程序，我们可以从他们的帐户中获取信息。

我期待着一些文章或围绕相同构建的任何库。

我将使用 PHP 和 MySQL。您是否建议 MySQL 以外的任何其他数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:34:48.853

您可以从数据库开始以保持简单，因为您不希望存储太多历史数据。下面的链接应该让您开始使用所有必需的库和文档。

[https://developers.google.com/analytics/devguides/reporting/core/v2/gdataAuthentication](https://developers.google.com/analytics/devguides/reporting/core/v2/gdataAuthentication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T10:13:45.627

选择基于 Web 客户端的身份验证模型而不是服务帐户模型。

这将导致`api`将您的用户重定向到谷歌授权页面，并且您的应用将被授予用户帐户的权限。

确保在刷新令牌重定向回您的应用程序时保存它。请注意，刷新令牌仅在您的应用第一次请求许可时发送，之后不会发送。

# xml - 如何使用 xslt 从源 xml 中删除名称空间和前缀属性？

> ID：10735239
> 
> 赞同：1
> 
> 时间：2012-05-24T10:01:35.060
> 
> 标签：xml, xslt

我有一个xml如下

```
<Publication xmlns:n1="http://www.w3.org/2001/XMLSchema-instance" n1:noNamespaceSchemaLocation="InformaKMSStructure.xsd" 
```

我想复制所有 XML 但不是**xmlns:n1="http://www.w3.org/2001/XMLSchema-instance" 和 n1:noNamespaceSchemaLocation="InformaKMSStructure.xsd"**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:26:08.133

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="*">
     <xsl:element name="{name()}" namespace="{namespace-uri()}">
       <xsl:apply-templates select="node()|@*"/>
     </xsl:element>
 </xsl:template>

 <xsl:template match="node()[not(self::*)]|@*">
  <xsl:copy/>
 </xsl:template>

 <xsl:template match=
 "@*[namespace-uri() = 'http://www.w3.org/2001/XMLSchema-instance']"/>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时**（未提供！）：

```
<Publication
 xmlns:n1="http://www.w3.org/2001/XMLSchema-instance"
 n1:noNamespaceSchemaLocation="InformaKMSStructure.xsd">
  <a x="y">
   <b/>
  </a>

  <c/>
</Publication> 
```

**产生想要的正确结果：**

```
<Publication>
   <a x="y">
      <b/>
   </a>
   <c/>
</Publication> 
```

**说明**：

这遵循覆盖标识规则的通常模式，但是标识规则被两个模板替换——一个匹配任何元素，第二个匹配任何其他节点或属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:02:41.470

n1:noNamespaceSchemaLocation="InformaKMSStructure.xsd" 是一个普通属性，在 XSLT 中“删除”它的方法是避免复制它。如果您在 XSLT 中不执行任何操作，则不会产生任何输出，因此如果您想避免输出某些内容，那么您需要找到输出它的代码并进行更改。您尚未向我们展示您的代码，因此我们无法告诉您如何更改它。

xmlns:n1="http://www.w3.org/2001/XMLSchema-instance" 不同：在 XPath 数据模型中，它不被视为属性，而是作为名称空间。事实上，这个命名空间声明的存在导致命名空间节点出现在其范围内的每个元素上。要摆脱这些命名空间，您需要了解哪些指令复制命名空间，哪些不复制。在 XSLT 1.0 中，xsl:copy 和 xsl:copy-of 在应用于元素时，复制所有元素的名称空间（无论是在该元素上还是在祖先上声明）。要阻止这种情况发生，在 XSLT 2.0 中您可以使用`<xsl:copy copy-namespaces="no">`，但在 1.0 中，唯一的选择是使用 xsl:element 而不是 xsl:copy 来重构元素。

# jquery - 使用 jQuery 动态更改图像的 src

> ID：10735241
> 
> 赞同：0
> 
> 时间：2012-05-24T10:01:44.733
> 
> 标签：jquery, image

我正在尝试进行图像颜色更改项目。您可以在其中更改图片的每个区域的颜色。

**这是HTML**

```
<div id="name">Title</div>

<div id="imageholder">
   <div class="holder"><img src="images/foldername/ar000.png" id="layer_a" /></div>
   <div class="holder"><img src="images/foldername/br000.png" id="layer_b" /></div>
   <div class="holder"><img src="images/foldername/cr000.png" id="layer_c" /></div>
   <div class="holder"><img src="images/foldername/dr000.png" id="layer_d" /></div>
   <div class="holder"><img src="images/foldername/empty.png" id="layer_map" usemap="#imgmap" /></div>
</div>

<map name="imgmap">
   <area shape="poly" id="c" class="map" coords="1,1,1,1,1" href="#" />
   <area shape="poly" id="d" class="map" coords="2,2,2,2,2" href="#" />
   <area shape="poly" id="a" class="map" coords="3,3,3,3,3" href="#" />
   <area shape="poly" id="a" class="map" coords="4,4,4,4,4" href="#" />
   <area shape="poly" id="b" class="map" coords="5,5,5,5,5" href="#" />
</map>

<div id="color">
   <img src="images/image1.jpg" id="r001" class="swatch"/></div>
   <img src="images/image2.jpg" id="r002"class="swatch"/></div>
   <img src="images/image3.jpg" id="r003" class="swatch"/></div>
   <img src="images/image4.jpg" id="r004"class="swatch"/></div>
   ......
</div>

<input name="currentpart" id="currentpart" type="hidden" value="" /> 
```

图像部分（layer_a 到 layer_d）将相互叠加以创建单个图像。“layer_map”包含绘制地图的空白 png 图像。

用户首先单击图像表单“imageholder”上的一个地图，然后单击“color”中的一个图像，这反过来会更改“class =”holder”中的图像。

**这是jQuery代码**

```
// retrieves the image title //
var name = $("#name").text();
// on clicking the mapped areas //
('#imgmap area').click(function(){
    var idmap = $(this).attr('id');
// trying to put the selected area id into a hidden field //
    $("input[name='currentpart']").val(this.idmap);
});

// on choosing what color to change //
$('#color img').click(function(){
// trying to capture the stored id //        
   var mapcurrent = $("input[name='currentpart']").val();
// trying to create the id of the layer inside imageholder div//
   var imgid = "layer_"+ mapcurrent;
// geting the id of the clicked image in color div //
   var id = $(this).attr('id');
// replaces the image in the require layer //
   imgid.attr('src', "images/"+ name +"/"+ mapcurrent + this.id +".png"); 
```

假设我们点击地图**"id=a"**然后点击颜色**"id=r002"**。当我们这样做时，带有“id = layer_a”src的imageholder内部的img将变为 **“images/Title/ar002.png”**

这就是我试图实现的目标，但它不起作用:(

# facebook - 如何获得长期访问令牌，服务器端（PHP）？

> ID：10735246
> 
> 赞同：0
> 
> 时间：2012-05-24T10:02:04.053
> 
> 标签：facebook, oauth-2.0, access-token

> **可能重复：**
> [自offline_access弃用后如何扩展访问令牌有效性](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation)

我尝试为我的应用程序获取长寿命访问令牌（60 天到期时间）。但是我所有的测试只给了我一个简短的标记。

我所做的 ：

*   首先做一个经典的“身份验证”来获得一个短期访问令牌。所以网址：GET graph.facebook.com:443/oauth/access_token?redirect_uri={my_callback}&code={the_code_given_by_fb}&client_id={my_client_id}&client_secret={my_client_secret}

=> 给我两个数据 access_token（一个长字符串）并过期（大约 4000 秒）

*   然后我想将我短暂的生命访问转变为长期访问，所以我尝试调用：

GET graph.facebook.com:443/oauth/access_token?redirect_uri={my_callback}&code={the_code_given_by_fb}&client_id={my_client_id}&client_secret={my_client_secret}&fb_exchange_token={short_life_access_token}&grant_type=fb_exchange_token

=> 这个电话给我，和第一个电话一样的数据（所以没有长寿令牌）

我也尝试： GET graph.facebook.com:443/oauth/access_token?client_id={my_client_id}&client_secret={my_client_secret}&fb_exchange_token={short_life_access_token}&grant_type=fb_exchange_token

=> 相同的结果

所以我不明白我们必须做什么才能获得长寿命的访问令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:59:54.580

You have done correctly. You have extended the short lived access token. Now store that in Database and use it. After 60 days, page admin user will have to come back to your app in that 60 days to get a new access token with the extended time on it.

FYI [offline access removal](https://developers.facebook.com/roadmap/offline-access-removal/)

From the DOC

```
 If you pass an access_token that had a long-lived expiration time, the endpoint will  
 simply pass that same access_token back to you without altering or extending the expiration time. 
```

# css - 使用 CSS 设计第 4 个实例

> ID：10735247
> 
> 赞同：0
> 
> 时间：2012-05-24T10:02:04.703
> 
> 标签：css

我有四个由一段代码创建的选项卡，我想以不同的方式设置第四个选项卡的样式。不幸的是，没有为列表元素单独分配特定的类或 ID，也没有简单的方法来实现这一点。

是否可以单独使用 CSS 设置列表对象的第四个实例的样式？

这是脚本创建的编码示例：

```
<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
   <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#tabs-5310-0-0">Description</a></li>
   <li class="ui-state-default ui-corner-top"><a href="#tabs-5310-0-1">Features</a></li>
   <li class="ui-state-default ui-corner-top"><a href="#tabs-5310-0-2">Specification</a></li>
   <li class="ui-state-default ui-corner-top"><a href="#tabs-5310-0-3">360° Interactive Virtual View</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:03:57.657

您可以[`:nth-child`](http://www.w3.org/TR/selectors/#nth-child-pseudo)在选择器中使用伪类：

```
ul li:nth-child(4) { /* ... */ } 
```

[浏览器支持](http://caniuse.com/#search=nth-child)好；IE < 9 是唯一（诚然并非无关紧要）的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:16:52.917

```
ul li:first-child + li + li + li 
```

This probably has the best browser coverage you can get in this situation.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:06:15.667

在较新的浏览器上你可以做

```
ul li:nth-child(4); 
```

在较旧的浏览器 ( `IE7/8`) 上，您可以为

```
ul li + li + li + li { /* assign a style */ } 
```

然后在下一个列表项上恢复它

```
ul li + li + li + li + li { /* revert the previous style */ } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:06:59.080

如果您更喜欢最后一项而不是第四项，您可以选择使用`nth-last-child`or `last-child`：

```
ul li:nth-last-child(1) { ... }; 
```

或者

```
ul li:last-child { ... }; 
```

# xunit - opencover + xunit 没有结果

> ID：10735248
> 
> 赞同：11
> 
> 时间：2012-05-24T10:02:05.187
> 
> 标签：xunit, opencover

我试图使用 OpenCover（今天下载）来覆盖我的测试。这是我使用过的命令行：

```
OpenCover.Console.exe -target:"c:\Programmes2\xunit\xunit.console.clr4.x86.exe" -targetargs:"""C:\Sources\Project\BackOffice.Tests\bin\Debug\BackOffice.Tests.dll"" /noshadow " -output:bo.coverage.xml -targetdir:"C:\Sources\Project\BackOffice.Tests\bin\Debug" -filter:+[*]* 
```

这是我得到的输出

```
xUnit.net console test runner (32-bit .NET 4.0.30319.269)
Copyright (C) 2007-11 Microsoft Corporation.

xunit.dll:     Version 1.9.0.1566
Test assembly: C:\Sources\Project\BackOffice.Tests\bin\Debug\BackOffice.Tests.dll

31 total, 0 failed, 0 skipped, took 2.760 seconds
Committing...
No results - no assemblies that matched the supplied filter were instrumented
    this could be due to missing PDBs for the assemblies that match the filter
    please review the output file and refer to the Usage guide (Usage.rtf) 
```

生成的报告总是一样的：

```
<?xml version="1.0" encoding="utf-8"?>
<CoverageSession xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Modules />
</CoverageSession> 
```

更多上下文：PDB 存在于目标文件夹中，我以管理员身份运行命令提示符。测试的项目是一个 .net 4/mvc 3 应用程序。我的电脑正在运行 Windows 7/32 位。关于那个主题，不确定这是否有任何关系，但其中的 x86 文件夹是空的，即使我强制目标平台为 x86。

此外，当我尝试使用 regsvr32 注册 OpenCover.Profiler.dll 时，我收到一条错误消息，指出该 dll 可能与我的 Windows 版本不兼容。

如果我尝试使用 -register 或 -register:user 参数，则会出现异常：

```
An exception occured: Failed to register(user:True,register:True,is64:False):3 the profiler assembly; you may want to look into permissions or using the -register:user option instead. C:\Windows\system32\regsvr32.exe /s  /n /i:user "C:\Sources\Opencover\sawilde-opencover-be6e491\main\bin\Debug\x86\OpenCover.Profiler.dll"
stack:    
    à OpenCover.Framework.ProfilerRegistration.ExecuteRegsvr32(Boolean userRegistration, Boolean register, Boolean is64) dans C:\Sources\Opencover\sawilde-opencover-be6e491\main\OpenCover.Framework\ProfilerRegistration.cs:ligne 59
    à OpenCover.Framework.ProfilerRegistration.ExecuteRegsvr32(Boolean userRegistration, Boolean register) dans C:\Sources\Opencover\sawilde-opencover-be6e491\main\OpenCover.Framework\ProfilerRegistration.cs:ligne 45
    à OpenCover.Framework.ProfilerRegistration.Register(Boolean userRegistration) dans C:\Sources\Opencover\sawilde-opencover-be6e491\main\OpenCover.Framework\ProfilerRegistration.cs:ligne 31
    à OpenCover.Console.Program.Main(String[] args) dans C:\Sources\Opencover\sawilde-opencover-be6e491\main\OpenCover.Console\Program.cs:ligne 82 
```

我还尝试使用由不同项目（xunit 也是）测试的 DLL 项目（.net4），结果相同（缺少）。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T12:25:27.777

下载发布包解决了 register 参数的异常。但是运行相同的命令行会产生多个此类错误：

```
BackOffice.Tests.HomeControllerShould.Redirect_To_Action_Feed_Index [FAIL]
   System.MissingMethodException : Méthode introuvable : 'Void     System.CannotUnloadAppDomainException.SafeVisited(Int32)'.
   Stack Trace:
      à BackOffice.Tests.HomeControllerShould..ctor() 
```

结果：

```
31 total, 31 failed, 0 skipped, took 0.241 seconds
Committing...
Visited Classes 0 of 44 (0)
Visited Methods 0 of 183 (0)
Visited Points 0 of 1352 (0)
Visited Branches 0 of 322 (0)

==== Alternative Results (includes all methods including those without corresponding source) ====
Alternative Visited Classes 0 of 53 (0)
Alternative Visited Methods 0 of 268 (0) 
```

在寻找类似问题后，我[在 github 上发现了这个问题](https://github.com/opencover/opencover/issues/88)并尝试了 -oldStyle 参数。它解决了我的问题。

@Shaun Wilde，如果你有机会再次看到这个问题，你能告诉我们这是否是解决它的推荐方法，以及我们是否因为“正常”方式使用它而失去了一些东西（我还建议将此参数添加到[文档页面](https://github.com/sawilde/opencover/wiki/Usage)

# php - PHP 在表格中显示下一张图片

> ID：10735249
> 
> 赞同：0
> 
> 时间：2012-05-24T10:02:08.750
> 
> 标签：php, jquery

我在我的页面上显示来自 db 表的图像，如下所示：

```
<?php
if ($db_found) {
$SQL = "SELECT * FROM myTable where id='$posted_id'";
$result = mysql_query($SQL);

while ($db_field = mysql_fetch_assoc($result)) {

echo '<img src="images/'.$db_field['image'].'" alt="" />';

}
mysql_close($db_handle);
}
?>

<a href="#">Next</a> 
```

如果 $posted_id 是例如 1 ，我该怎么做……当我单击“下一步”链接时，图像 id = 2 会出现，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:06:42.677

为此，您需要刷新页面或使用 ajax。

你可以像这样在url中传递变量posted_id。

```
<a href="www.yourwebsite.com?posted_id=<?php echo ($db_field['id'] + 1);?>">Next</a> 
```

这样，您可以从数据库中传递下一个 id .. 如果您的 id 按顺序排列。

您还需要以编程方式处理问题，例如如果数据库中不存在下一个 id 的记录该怎么办..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:11:27.687

您应该使用 MySQL LIMIT 和 ORDER 过滤器。

```
<?php

if (isset($_GET['current'])) {
    $current = $_GET['current'];
} else {
    $current = 0;
}

$request = "SELECT * FROM myTable ORDER BY id ASC LIMIT " . $current . ",1";

?> 
```

然后，为了赶上下一个项目，您可以执行以下操作：

```
<?php
// make the last item point to the first one
$loop = true;

$count = "SELECT COUNT(*) FROM myTable";

if ($current < $count) {
    $next = $current + 1;

} else if ($loop) {
    $next = 0;

// no loop, then just stay at the end
} else {
    $next = $current;

}

?> 
```

# java - Java 邮件不支持外语

> ID：10735250
> 
> 赞同：2
> 
> 时间：2012-05-24T10:02:08.967
> 
> 标签：java, html, jakarta-mail

我需要发送具有不同语言内容的 HTML。我的配置是：

```
MIME-Version: 1.0 Content-Type: multipart/mixed;    boundary="----=_Part_18_19002270.1337852743826"

------=_Part_18_19002270.1337852743826 Content-Type: text/html; charset=Cp1252 Content-Transfer-Encoding: quoted-printable 
```

并在邮件中将所有字符都设为`?`. 任何人都可以建议我如何设置编码，以便我可以用正确的语言收到邮件。

谢谢

**找到了解决方案:)**

```
 MimeBodyPart htmlPart = new MimeBodyPart();
        htmlPart.setContent(bodyText, "UTF-8");

        htmlPart.setText(bodyText, "utf-8");
        htmlPart.setHeader("Content-Type","text/html; charset=\"utf-8\"");
        htmlPart.setHeader("Content-Transfer-Encoding", "quoted-printable"); 
```

仍然无法对主题行进行编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:44:10.290

这段代码可能会对您有所帮助。:)

```
MimeMessage msg = new MimeMessage(session);
msg.setSubject("yourSubject", "UTF-8"); // here you specify your subject encoding
msg.setContent("yourBody", "text/plain; charset=utf-8");

msg.setFrom("senderAddress");
msg.addRecipient(Message.RecipientType.TO, "recieverAddress");
Transport.send(msg); 
```

**编辑：**

[这](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/MimeMessage.html#setSubject%28java.lang.String,%20java.lang.String%29)是我用来设置主题行编码的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-25T18:39:38.170

将整个 html 文件读取字符串转换为 Unicode 我使用下面的代码使用 FileUtils 将整个 HTML 文件读取为字符串

`String contents = FileUtils.readFileToString(new File("/path/to/the/HTMLfile"), "UTF-8")`

我试图用中文、阿拉伯文、日文和西班牙文发送一封电子邮件。因此，在发送时，我在 MimeMessage 和 MimeMultipart 中设置内容时无法弄清楚

因此，我将整个文件作为字符串读取，然后检查该字符是否介于 1-128 之间，即属于 ASCII 的 ASCII 等效字符（数字特殊字符空间等）。我将它们保留在字符串中，其余所有字符都转换为 Unicode

将 html 文件字符串转换为 Unicode 字符串，然后在 mime body part 和 mime multipart 中设置的函数。希望很清楚

```
public String convertToUniCode(String yourHTMLBodyStr) {
        String str = "<div>Chinese 你好嗎 English How are you Japanese お元気ですか Arabic كيف حالك Spanish  cómo estás</div>";
        String[] codePointAt = new String[str.length()];

        for (int j = 0; j < str.length(); j++) {
            int charactercode = Character.codePointAt(str, j);
            if (charactercode > 0 && charactercode < 128) {
                codePointAt[j] = String.valueOf(str.charAt(j));
            } else {
                codePointAt[j] = "&#" + String.valueOf(charactercode) + ";";
            }

        }

        StringBuilder strBuilder = new StringBuilder();
        for (int i = 0; i < codePointAt.length; i++) {
            strBuilder.append(codePointAt[i]);
        }
        System.out.println("New String :: " + strBuilder.toString());
    } 
```

输出（Unicode 字符串）与 Like 㺃 ：

新字符串 :: Chinese 你好吗 英语 How are you Japanese 元気ですか 阿拉伯语 كيف حالك 西班牙语 cómo estás

```
MimeMessage msg = new MimeMessage(session);
String htmlUnicodeStr = convertToUniCode(yourHTMLBodyStr);

msg.setSubject(UniCodeSubject, "UTF-8"); // here you specify your subject encoding

Multipart emailMimeMultipart;
MimeBodyPart messageBody = new MimeBodyPart();
messageBody.setDataHandler(new DataHandler(new ByteArrayDataSource(htmlUnicodeStr, "text/html")));
    emailMimeMultipart.addBodyPart(messageBody);
//Add UTF-8 In MimeMultiPart While Setting Content and Transport.Send() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:03:37.453

尝试切换`charset=Cp1252`到`charset=UTF-8`.

# jquery - 尝试暂停/停止 jquery css 行为

> ID：10735251
> 
> 赞同：0
> 
> 时间：2012-05-24T10:02:13.693
> 
> 标签：jquery, loops

我希望可见性：可见性保持不变，目前它会暂时闪烁然后消失。

```
$(document).ready(function() {
    $('#subscribe').click(function(e) {
        $('#joinThanks').css('visibility', 'visible');
    })
    e.stopPropagation();
});​ 
```

有任何想法吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:06:18.147

`e.stopPropagation()`调用应该进入点击处理程序：

```
$(document).ready(function() {
    $('#subscribe').click(function(e) {
        e.stopPropagation();
        $('#joinThanks').css('visibility', 'visible');
    })
});​ 
```

此生成的语法错误可能导致您看到的奇怪行为。

# php - 在 PayPal 中为 TransactionSearch 使用 X-PAYPAL-AUTHORIZATION 标头

> ID：10735258
> 
> 赞同：3
> 
> 时间：2012-05-24T10:02:44.397
> 
> 标签：php, paypal, permissions, paypal-sandbox, signature

我正在使用 PayPal API 向商家请求权限以访问其帐户的某些部分。其中之一是 TransactionSearch 方法。

通常只有在提供 USER、PWD 和 SIGNATURE 时才能使用 TransactionSearch。但是，在使用 PayPal 的权限服务时，我无法从商家那里获得该信息。我拥有的唯一信息包括：

*   请求令牌，
*   一个验证码，
*   访问令牌，
*   令牌秘密
*   生成的签名（我假设我正确生成了这个）

使用这些信息，我将以下`X-PAYPAL-AUTHORIZATION`标题放在一起：

`X-PAYPAL-AUTHORIZATION:timestamp=1337848711, token=DmyRT4TygwxPvfNExkH29I53S1il6yTmsJFwXRT7jLjaYyezOfUmnQ, signature=sphzCP0H47JTDJS8uuMsqWHAIAo=`

那么在 的情况下`TransactionSearch`，我如何使用上面的信息来获取我正在寻找的交易？当然，我可以使用自己的`USER`,`PWD`和`SIGNATURE`，但这只会给我自己的交易，即使我使用了`X-PAYPAL_AUTHORIZATION`标头。我需要那些我刚刚获得许可的商家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:55:26.460

如果您代表第三方行事，您需要在您的数据请求中包含一个 SUBJECT 字段并传递第三方商家的电子邮件。如果您已通过此商家的身份验证，您应该获取他们的信息。在 Python 中（抱歉 - 没有 PHP 示例），这些是我作为数据的一部分传入的字段（不是我的标题）。我的标题是空的。

```
return [('VERSION', self.api_version),  # This is 84 for me.
        ('user', self.api_username),  # This is *your* username.
        ('PWD', self.api_password),  # This is *your* password
        ('SIGNATURE', self.api_signature),  # This is *your* signature.
        ('SUBJECT', self.subject)]  # This is the third party's email. 
```

请注意，这根本不使用密钥，这有点不寻常。

# firefox - 使用 CSS3 Rotate 和 Firefox 时如何防止不同宽度的边框出现接缝？

> ID：10735259
> 
> 赞同：4
> 
> 时间：2012-05-24T10:02:44.530
> 
> 标签：firefox, css-transitions

我有不同的宽度`borders`应用于 a ，当使用**CSS3 Transition Rotate**旋转到任何角度`div`时，只有 Firefox 显示细缝。这些细缝*根据*角度略有变化。`div`

 ***如果边框宽度相同，Firefox 的表现会很好。

div 没有使用图像，只是使用彩色背景，但内容似乎与我遇到的不同宽度问题的边框无关。

不幸的是，边界后面的区域将被保留，因此我无法使用另一个 div 作为包装器。

这是一个在 Firefox 中看到的有此问题的示例的[jsFiddle 。](http://jsfiddle.net/tpDyA/2/)Chrome 中没有问题。

**状态更新：**更新 jsFiddle 以在每个 CSS 规则`border-style`之前显示，但没有变化。`border-color`

我想知道这个问题是否是因为`border-image`我没有使用的属性允许最多**八张图像**，每个**边框切片**一张。也就是说，如果有`border-corner-color`属性，那么在使用 Rotate 时可以解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:16:44.817

我`:before`在 CSS: [jsFiddle example](http://jsfiddle.net/tpDyA/6/)中使用了一个解决方案。

我添加了这段代码：

```
#thinLinesInFirefox:before {
    content: '';
    display: block;
    width: 201px;
    height: 201px;
    position: absolute;
    top: -105px;
    left: -120px;
    border-top:    104px;
    border-right:  110px;
    border-bottom: 115px;
    border-left:   119px;

    /* Define border-style before border-class per CSS rule. */    
    border-style: solid;

    /* Define boder-color */
    border-color: black;

    z-index: -1;
} 
```

基本上，它使用 覆盖同一个正方形`:before`，除了我将`border-top`and减小了`border-left`1 个像素，然后将`width`and增加了`height`1 个像素，以便`div`下面的“真实”看起来是相同的大小。

由于`border`s 不同，接缝位置*略有不同*，所以下面的内容不显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:30:18.090

这些看起来像是通过在几个单独的部分中绘制边界的抗锯齿伪影。每一块都在旋转，因此它的边缘得到抗锯齿，结果连接处的一些像素是部分透明的（因为它们是在彼此顶部绘制两个部分透明像素的结果）。

Chrome 中的这个测试用例没有问题，因为它在角落处绘制了彼此下方的边框。当然，这会导致 Chrome 中的非透明边框被完全破坏；见[http://snook.ca/archives/html_and_css/safari-transparent-borders](http://snook.ca/archives/html_and_css/safari-transparent-borders)

如果你要让边框颜色略有不同，你也会在 WebKit 中得到接缝。请参阅[http://jsfiddle.net/YVCeX/](http://jsfiddle.net/YVCeX/)（它以 div 的背景颜色显示接缝，而 Firefox 优化了不透明边框下的背景绘画，这就是为什么您看到红色接缝而不是蓝色接缝的原因。

一般来说，没有关闭边界边缘的抗锯齿和旋转时有锯齿状边界的情况下，确实没有很好的方法来处理这个问题。***

# azure - azure 500 内部服务器错误中的 httphandlers

> ID：10735262
> 
> 赞同：0
> 
> 时间：2012-05-24T10:02:56.293
> 
> 标签：azure, ihttphandler, azure-web-roles

部署后我无法在 azure 中使用 htpphandlers，在本地机器上可以。

在 web.config 我声明如下

```
<system.web>
<httpHandlers>
  <add verb="*" path="*.cspx" type="WebRole1.Handle,WebRole1"/>
</httpHandlers> 
```

在我的 handler.cs 文件中，我编写如下。

```
namespace WebRole1 
```

{ 公共类句柄 : IHttpHandler { #region IHttpHandler 成员

```
 bool IHttpHandler.IsReusable
    {
        get { return true; }
    }

    void IHttpHandler.ProcessRequest(HttpContext context)
    {
        context.Server.Transfer("Test.aspx", true);         
    }
    #endregion
} 
```

}

在我的本地机器上它工作正常。但是在部署到 Windows azure 后出现 500 内部服务器错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:43:10.390

我认为您的问题与在 system.web 而不是 system.webserver 中使用自定义处理程序有关。

将您的自定义 HTTP 处理程序移动到 System.webserver，如下所示：

```
<system.webserver>
 <httpHandlers>
  <add verb="*" path="*.cspx" type="WebRole1.Handle,WebRole1"/>
</httpHandlers>
<system.webserver> 
```

# c# - C# 组合框事件

> ID：10735266
> 
> 赞同：1
> 
> 时间：2012-05-24T10:03:04.443
> 
> 标签：c#, events, drop-down-menu, combobox

目前我正在用 c# 制作一个小应用程序，它要求用户使用组合框选择一个对象，从那里用户可以编辑下面该对象的属性，然后将它们保存到数据库中。

我在尝试询问用户是否要在再次单击组合框但要保存更改时取消时遇到问题。

我所拥有的最好的是下面，但是即使下拉高度意味着他们看不到选项，用户仍然可以使用键盘来选择项目。

```
private void cmbBooks_DropDown( object sender, EventArgs e )
        {
        if ( CheckSave( ) )     //checksave returns true if they want to cancel
            {
            cmbBooks.DropDownHeight = 1;
            }
        } 
```

谢谢

*编辑* 我已经用 SelectedIndexChanged 事件尝试过它，从那里我可以停止框继续并打开该对象，但是组合框将继续选择他们试图选择的对象并且组合框仍然保持打开状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:00:35.053

检查`SelectedIndexChanged`事件。如果用户取消，则将属性设置`SelectedIndex`回较早的值。

**对于您的评论**

创建一个值为 false 的全局布尔标志。检查里面的这个值`SelectedIndexChanged event`。

```
If it is true. 
    return from code
Else 
    continue with your code. 
```

现在，当您设置先前选择的索引属性时，将此标志设置为 true。它会触发`SelectedIndexChanged event`，但这次因为 flag 为真，所以它会从事件中返回。

在下一行设置标志 = 假。如果您不再次将其设置为 false，它将始终返回代码之外。

```
bool flag = false;
private void mycombobox_SelectionIndexChanged(object sender, EventArgs e)
{
  If (flag)
    return;

  //Your normal code.

  If (Canceledbyuser == true)
  {
      flag = true;
      mucomboBox.SelectedIndex = previousindex;
      flag = false;
  }
} 
```

# android - 将 /data/data 中的文件夹复制到 SD 卡，反之亦然

> ID：10735273
> 
> 赞同：4
> 
> 时间：2012-05-24T10:03:22.553
> 
> 标签：android, copy, root, android-sdcard, directory

当我尝试将 /data/data 中的文件夹复制到 SD 卡时出现问题。

我的手机已经root了。

我在我的应用程序中请求超级用户权限：

```
Runtime.getRuntime().exec("su"); 
```

我正在使用`FileUtils`Apache 来复制文件/文件夹。

我发现如果我手动将文件夹权限更改为`READ`可以将其从 /data/data 复制到 SDcard。

有什么方法可以递归地更改*/data/data*`RW`中所有文件夹的权限来读写文件夹？

 *我试过了`chmod`，但它不起作用。

```
Runtime.getRuntime().exec("chmod 777 /data/data"); 
```

我想做一个备份程序，我想读取*/data/data*中的一些文件夹并将它们写入 SDcard 的文件夹中。

然后我想恢复从 SDcard 文件夹中读取它们的文件夹并将它们写入*/data/data*。

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T09:22:56.687

最后我明白了！！！！

我使用带有 cp 命令的 SuperUser 进程来复制文件和文件夹。

我希望你觉得这对你有帮助。

```
String comando = "cp -r /data/data/sourcefolder /sdcard/targetfolder";
Process suProcess = Runtime.getRuntime().exec("su");
DataOutputStream os = new DataOutputStream(suProcess.getOutputStream());
os.writeBytes(comando + "\n");
os.flush();
os.writeBytes("exit\n");
os.flush();
try
{
 int suProcessRetval = suProcess.waitFor();
 if (255 != suProcessRetval)
 {
  // Acceso Root concedido
  retval = true;
 }else
 {
  // Acceso Root denegado
  retval = false;
 }
}
catch (Exception ex)
{
 Log.w("Error ejecutando el comando Root", ex);
} 
```

非常感谢本论坛的所有人以及您提供的所有帮助！！*

# python - python - 获取元组列表第一个索引？

> ID：10735282
> 
> 赞同：35
> 
> 时间：2012-05-24T10:03:41.150
> 
> 标签：python, list, tuples

返回以下内容的最紧凑方式是什么：

给定一个元组列表，返回一个由元组第一个（或第二个，无关紧要）元素组成的列表。

为了：

```
[(1,'one'),(2,'two'),(3,'three')] 
```

返回的列表将是

```
[1,2,3] 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-24T10:12:14.570

如果两者都需要，请使用 zip

```
>>> r=(1,'one'),(2,'two'),(3,'three')
>>> zip(*r)
[(1, 2, 3), ('one', 'two', 'three')] 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-05-24T10:05:05.150

```
>>> tl = [(1,'one'),(2,'two'),(3,'three')]
>>> [item[0] for item in tl]
[1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-24T10:06:35.603

```
>>> mylist = [(1,'one'),(2,'two'),(3,'three')]
>>> [j for i,j in mylist]
['one', 'two', 'three']
>>> [i for i,j in mylist]
[1, 2, 3] 
```

这是使用[列表理解（看看这个链接）](http://docs.python.org/tutorial/datastructures.html)。因此，它依次遍历`mylist`、设置`i`和`j`到元组中的两个元素。它实际上等效于：

```
>>> newlist = []
>>> for i, j in mylist:
...     newlist.append(i)
... 
>>> newlist
[1, 2, 3] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-15T14:22:10.887

试试这个。

```
>>> list(map(lambda x: x[0], my_list)) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-06-02T11:41:07.953

你也可以试试这个。。

```
dict(my_list).keys() 
```

# php - 我想通过修改默认参数来扩展 PHP 代码嗅探器的声纳插件

> ID：10735284
> 
> 赞同：0
> 
> 时间：2012-05-24T10:03:54.227
> 
> 标签：php, plugins, sonarqube

在声纳测试期间，我只想更改一些规则，所以我从

[http://docs.codehaus.org/display/SONAR/Extend+PHP+coding+rules](http://docs.codehaus.org/display/SONAR/Extend+PHP+coding+rules)

并更改规则

scopeIndentIncorrect 并且它有效。因为他们给出了我改变的参数。

但现在我想改变

FunctionCallSignatureIndent 并希望为此传递参数

我所做的每一个结果都会导致创建一个新插件，那么还有其他方法吗？

```
<rule key="PEAR.Functions.FunctionCallSignature.Indent" priority="MAJOR">
<category name="Maintainability"/>
<name>CustomFunctionCallSignatureIndent</name>
<configKey>FUNCTION_CALL_SIGNATURE_INDENT</configKey>
<description><![CDATA[Multi-line function call not indented correctly; expected %s spaces but found %s]]></description>
<param>
  <key>indent</key>
  <description>The number of spaces code should be indented.</description>
  <defaultValue>4</defaultValue>
</param> 
```

这是我在 rules.xml 中所做的条目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:39:43.643

不，您不需要为此编写声纳插件。你只需要：

1.  在 FunctionCallSignatureIndent 中进行更改
2.  添加一条新规则，如[http://docs.codehaus.org/display/SONAR/Extend+PHP+coding+rules中所述](http://docs.codehaus.org/display/SONAR/Extend+PHP+coding+rules)
3.  对于这个新规则，添加一个 "" 标记，就像您在[http://docs.codehaus.org/display/SONAR/Extend+PHP+coding+rules的 PHPMD 示例中看到的那样](http://docs.codehaus.org/display/SONAR/Extend+PHP+coding+rules)

然后，在重新启动 Sonar 后，您应该可以在 Sonar Web UI 中自定义此规则。

# ios - CreateFile w/ CREATE_NEW iOS 中的等价物？

> ID：10735286
> 
> 赞同：2
> 
> 时间：2012-05-24T10:04:00.060
> 
> 标签：ios, multithreading, file

当文件在打开之前不存在时，有没有办法成功打开文件进行只写？

我正在做一些线程工作，在某些时候必须创建一些文件。随机文件名可能会有所帮助，但我想确保没有冲突

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:32:08.883

我不太了解您要完成的工作，但您可以执行以下操作来检查文件是否存在：-

```
NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSString *yourFile = [docPath stringByAppendingPathComponent:@"yourFilewithExtension"];
BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:yourFile]; 
```

如果文件存在，“fileExists”将返回yes，否则返回no。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:03:41.683

在模式字符串中附加“x”

> 最后，作为标准的扩展（因此可能不可移植），模式字符串可以以字母`x'', which insists on creating a new file when used with`w'' 或 ``a'' 结尾。如果路径存在，则返回错误（这相当于使用 open(2) 指定 O_EXCL）。

[http://developer.apple.com/library/Mac/#documentation/Darwin/Reference/ManPages/man3/fopen.3.html](http://developer.apple.com/library/Mac/#documentation/Darwin/Reference/ManPages/man3/fopen.3.html)

# java - 如何从java中的链表中删除一个对象？

> ID：10735288
> 
> 赞同：4
> 
> 时间：2012-05-24T10:04:03.803
> 
> 标签：java, data-structures, linked-list, singly-linked-list

我的代码有一个问题，我做了一个示例程序来显示链接列表中的 emp 详细信息，现在当我尝试删除特定条目时出现问题意味着它不起作用，我希望我在代码中犯了一些错误你能建议怎么做吗？

```
import java.util.*;

class EmpDedup {
    int record;
    String fprint;
    int fid;

    EmpDedup(int record, String fprint, int fid) {
        this.record = record;
        this.fprint = fprint;
        this.fid = fid;
    }

    public int getRecord() {
        return record;
    }

    public String getFprint() {
        return fprint;
    }

    public int getFid() {
        return fid;
    }

    public static void main(String[] args) {
        int count = 0;
        LinkedList<EmpDedup> list = new LinkedList<EmpDedup>();
        list.add(new EmpDedup(101, "entry1", 20));
        list.add(new EmpDedup(102, "entry2", 30));
        list.add(new EmpDedup(103, "entry3", 40));
        list.add(new EmpDedup(104, "entry4", 50));

        Scanner input = new Scanner(System.in);
        System.out.print("Enter record no to display: ");
        int rec = input.nextInt();
        for (EmpDedup data : list) {
            if (data.getRecord() == rec) {
                System.out.println(data.getRecord() + "\t" + data.getFprint() + "\t" + data.getFid() + "\t");

                count++;

            }
        }
        System.out.println("The size of an linkedlist is: \t" + list.size());

        System.out.println("The number of  available record  is :" + count);

        System.out.println("The size of an linkedlist is: \t" + list.size());
        Scanner input1 = new Scanner(System.in);
        System.out.print("Enter record no to delete: ");// here i try to delete a particular record
        int rec1 = input1.nextInt();
        for (EmpDedup data : list) {
            if (data.getRecord() == rec1) {
                // System.out.println(data.getRecord()+"\t"+data.getFprint()+"\t"+data.getFid()+"\t");
                list.remove(data); // problem is here
                count++;

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T10:13:33.883

当您对它们进行迭代时，您不能在列表中操作（添加、删除...项目）。您必须使用迭代器

```
for(Iterator<EmpDedup> iter = list.iterator(); iter.hasNext();) {
    EmpDedup data = iter.next();
    if (data.getRecord() == rec1) {
        iter.remove();
    }
} 
```

请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-24T10:07:23.827

使用 an`Iterator`代替，然后使用上的`remove()`方法`Iterator`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-24T10:10:07.273

当你这样做时：

`list.remove(101);`

您正在调用[此](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedList.html#remove%28int%29)方法，这将不符合您的目的。

你应该使用：

`list.remove(data);`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T10:12:48.487

您尝试删除索引为 101 的元素，但列表中只有 4 个项目。它如何删除索引为 101 的元素？

如果要删除等于 EmpDedup(101,"entry1",20) 的元素，则必须传入 remove 方法这个对象。不要忘记重新定义 EmpDedup 的 equals 和 hash 码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-24T10:28:10.687

该代码尝试删除索引位置 101 处的元素，但列表中只有四个项目。

使用以下代码替换您的代码：

```
for( EmpDedup data : list)
{
   if( data.getRecord() == rec1 )
   {
        list.remove( data );     
         ++count;
    }
} 
```

这就是列表对象将被删除的地方。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-24T10:16:22.050

```
for( EmpDedup data:list)
{
   if(data.getRecord()==rec1)
   {
        list.remove(data);     
         count++;

    }
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-02T14:11:23.337

导入 java.util.Scanner；

// 一个完整的工作 Java 程序来演示单个删除 // 链表 class LinkedList { Node head; // 列表头

```
/* Linked list Node*/
class Node
{
    int data;
    Node next;
    Node(int d)
    {
        data = d;
        next = null;
    }
}

/* Given a key, deletes the first occurrence of key in linked list */
void deleteNode(int key)
{
    // Store head node
    Node temp = head, prev = null;

    // If head node itself holds the key to be deleted
    if (temp != null && temp.data == key)
    {
        head = temp.next; // Changed head
        return;
    }

    // Search for the key to be deleted, keep track of the
    // previous node as we need to change temp.next
    while (temp != null && temp.data != key)
    {
        prev = temp;
        temp = temp.next;
    }    

    // If key was not present in linked list
    if (temp == null) return;

    // Unlink the node from linked list
    prev.next = temp.next;
}

/* Inserts a new Node at front of the list. */
public void push(int new_data)
{
    Node new_node = new Node(new_data);
    new_node.next = head;
    head = new_node;
}

/* This function prints contents of linked list starting from
    the given node */
public void printList()
{
    Node tnode = head;
    while (tnode != null)
    {
        System.out.print(tnode.data+" ");
        tnode = tnode.next;
    }
}

/* Drier program to test above functions. Ideally this function
should be in a separate user class. It is kept here to keep
code compact */
public static void main(String[] args)
{
    LinkedList llist = new LinkedList();

    llist.push(7);
    llist.push(1);
    llist.push(3);
    llist.push(2);

    System.out.println("\nCreated Linked list is:");
    llist.printList();

    Scanner sc = new Scanner(System.in);
    System.out.println("please enter input");
    int aa =sc.nextInt();
    llist.deleteNode(aa); // Delete node at position 4

    System.out.println("\nLinked List after Deletion at position :"+aa);

    llist.printList();

    System.out.println("adding element to the LinkedList");

    System.out.println("enter element");
    int dd = sc.nextInt();
    llist.push(dd);

    llist.printList();
} 
```

}

# java - maven包时我可以强制svn更新吗

> ID：10735292
> 
> 赞同：0
> 
> 时间：2012-05-24T10:04:13.210
> 
> 标签：java, svn, maven, package

有时当我和同事一起做同一个项目时，我忘记在打包之前更新 svn。每当我做一个 Maven 包时，我可以强制 svn 更新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:07:23.967

您可以使用[`scm:update`](http://maven.apache.org/scm/maven-scm-plugin/update-mojo.html)maven-scm-plugin 的目标。

# c# - 使用 LINQ 将元素读入字典对象

> ID：10735293
> 
> 赞同：1
> 
> 时间：2012-05-24T10:04:14.690
> 
> 标签：c#, xml, linq

我正在使用传统的 XmlReader 将 xml 文档解析为字典？但是，我正在寻找不太复杂的方法最少的代码行。我有以下 XML 文档

```
<Msg>
  <field id="0" value="0100"/>
  <field id="3" value="310000"/>
  <field id="7" value="0101150110"/>  
  <field id="11" value="000002"/>
</Msg> 
```

是否可以将以下 xml 文档拆分为一个字典对象，其中键是属性，值是该元素的值？

例如：- 键 = 0 值 =0100

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T10:05:44.193

而不是使用`XmlReader`，我建议使用 LINQ to XML，此时它真的很简单：

```
var dictionary = document.Descendants("field")
                         .ToDictionary(x => (int) x.Attribute("id"),
                                       x => (string) x.Attribute("value")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:06:58.530

```
var query = (from element in document.Descendants("field"))
             .ToDictionary(pair => (int)pair.Attribute("id"), 
                           pair => (string)pair.Attribute("value")); 
```

# c# - 从代码到设计器对象的数据绑定变量

> ID：10735296
> 
> 赞同：0
> 
> 时间：2012-05-24T10:04:17.623
> 
> 标签：c#, wpf, data-binding

我试图弄清楚如何在代码中使用变量在设计器对象中进行数据绑定。我正在尝试实现的示例：假设我有一个`string`firstString，并在代码中为其设置了值。现在我如何`TextBox`通过数据绑定来显示这个值？我知道我可以这样做`TextBox.Text`，但我正在寻找一种数据绑定方式。

怎么样`Generic lists`？如何`ListBox`通过数据绑定使用代码中列表中的对象填充设计器中的元素？

我浏览了[本](http://www.wpfsharp.com/2010/04/13/tutorial-binding-one-element-property-to-another/)教程，了解如何将其他设计器对象相互链接，以及一些[帖子](https://stackoverflow.com/questions/406526/problem-with-wpf-data-binding-defined-in-code-not-updating-ui-elements)如何将整个类用作`DataContext`. 但我没有在他们身上找到这个问题的答案。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:19:28.207

WPF 绑定机制只支持属性。因此属性可以与其他对象绑定，但不允许使用变量。

绑定中的元素名称用于引用其他控件，而不是后面代码中的变量。要在后面的代码中引用变量，您需要将该变量分配给控件的数据上下文属性。

```
 private string firstString; // this is your field.

        public string FirstString // this is your property wrapper for the above field.
        {
            get { return firstString; }
            set { firstString = value; }
        } 
```

XAML 绑定 mec 仅适用于 FirstString 属性，而不适用于 firststring 变量。

也不建议在 C# 概念中创建变量并访问外部变量。这些变量通常是为局部锻炼而设计的。就好像您想分享这些变量的价值一样，财产制作是最佳和首选的解决方案。

# linux - 维护档案内的文件和文件夹权限

> ID：10735297
> 
> 赞同：25
> 
> 时间：2012-05-24T10:04:22.000
> 
> 标签：linux, macos, zip

我正在打包和分发我为 Windows、Linux 和 Mac 制作的程序。我计划将文件和文件夹放在 zip 档案中。

如果我设置正确的文件夹和文件权限，然后压缩成 zip 并重新分发它们，当用户在 Linux 或 Mac 系统中提取它们时，这些权限是否会保留？还是他们必须自己设置权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T14:20:33.597

`zip`不在存档中存储文件权限。

`tar`档案将保留 Linux 和 OS X 上的文件权限。我不知道在 Windows 上会发生什么。如果您可以在 Windows 上进行测试并且可以正常工作，那么这可能是您最好的选择。这可能取决于人们用来解压档案的工具。

另一个选择是创建一个安装程序，尽管创建跨平台安装程序的非商业选项很少。维基百科有[一个列表](https://en.wikipedia.org/wiki/List_of_installation_software#Cross-platform)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T15:02:43.350

安装程序是您最好的选择。让我更好地解释为什么。

Windows 具有以下权限：

```
Modify
Read & Execute
Read
Write 
```

分配给组或用户名，

基于 Unix 的系统具有：

```
Read
Write 
Execute 
```

可以分配给所有者、组和其他人。

您是否可以看到，很难将权限从一个系统映射到另一个系统，因为文件系统处理权限的方式不同。

然而，像 Info-Zip 这样的一些 zip 实用程序支持基于 Unix 的文件系统功能，例如用户和组 ID、文件权限以及对符号链接的支持。它还支持 NTFS 文件系统权限，并在提取文件时尝试将 NTFS 权限转换为 Unix 权限，反之亦然。这可能会导致潜在的意外组合，例如在 NTFS 卷上创建 .exe 文件，但可执行权限被拒绝。*

如果您计划分发您的程序，安装程序确实是您的最佳解决方案。

*来自维基百科：[Zip（文件格式）](http://en.wikipedia.org/wiki/Zip_(file_format))

# jquery - 如何使工具提示保持不变，以便可以单击其中的链接

> ID：10735301
> 
> 赞同：2
> 
> 时间：2012-05-24T10:04:40.400
> 
> 标签：jquery, jquery-plugins, simpletip

我有 jQuery 插件 Tooltipsy 来为链接生成工具提示。在此工具提示中，我还有其他指向相关对象的链接。如果我将鼠标移到它以单击链接，我希望它在初始链接上方弹出并停留。这可能吗？有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:03:48.347

我没能让它保持打开状态，不能再等了，所以我改用另一个工具提示插件，称为[simpletip](http://craigsworks.com/projects/simpletip/)，它提供了我需要的功能。

Simpletip 本身无法从链接中获取 title 属性，因此这是我用来实现此目的的代码。编辑：我将代码更改为采用数据标题（符合 HTML5）代替标题，这样我就不必阻止所有标题默认显示：

```
$(".order_tooltip").simpletip({
    fixed: true,
    position: 'top',
    onBeforeShow: function(){
        this.update(this.getParent().data('title'));
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:15:04.133

您可以在工具提示中放置一个关闭按钮，并在单击关闭按钮时隐藏工具提示。

可以调用工具提示上的隐藏功能，如[http://tooltipsy.com/methods.html#method-hide中所述](http://tooltipsy.com/methods.html#method-hide)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T19:42:35.517

要直接回答您的原始问题，这对我有用：

```
var hoverHand = false;

    $('.hastip').tooltipsy({
            show: function (e, $el) {
                $el.hover( function() { 
                    hoverHand = true;
                }, function() {
                    hoverHand = false;
                });
                $el.fadeIn(100);
            },
            hide: function (e, $el) {
                var tooltipCloserInterval = setInterval(function(){
                    if (hoverHand == false) {
                        $el.fadeOut(100);
                        $el.off( "mouseenter mouseleave" );
                        clearInterval(tooltipCloserInterval);
                    }
                }, 500);
            }
        }); 
```

本质上，您给用户 500 毫秒的时间使用 setInterval 将鼠标移动到工具提示上。500 毫秒后，它会检查鼠标是否仍在工具提示上，如果不是，则关闭工具提示。

# java - 如何在 JPassword 中显示字符

> ID：10735302
> 
> 赞同：3
> 
> 时间：2012-05-24T10:04:42.790
> 
> 标签：java, passwords, character

getPassword() 给了我一个字符数组，但我希望看起来像这样的密码`******`显示出来`MyPaSwOrd`，我该怎么做？

伙计们，我不想提取密码，我只想在 JPasswordField() 中写成“输入您的密码”，当用户点击它时，它就会消失，然后他输入自己的密码，就像这样* * * * * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:09:12.607

两种方式：

1.  使用 setEchoChar 方法（参见[此处](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JPasswordField.html#setEchoChar%28char%29)）并将值设置为 0（如 JavaDoc 解释的那样）
2.  使用一个通用的 JTextField

编辑：

如果您想在您的字段中显示“输入密码”之类的文本并在单击时消失，请尝试以下操作：

```
public class JPassword {

    public static void main(String[] args) {

        JFrame frame = new JFrame();

        final JPasswordField field = new JPasswordField();

        field.addFocusListener(new FocusListener() {

            @Override
            public void focusLost(FocusEvent arg0) {

                char c = 0;
                field.setEchoChar(c);
                field.setText("Enter PW");

            }

            @Override
            public void focusGained(FocusEvent arg0) {

                char c = 1;
                field.setEchoChar(c);
                            field.setText("");
            }
        });

        char c = 0;
        field.setText("Enter PW");
        field.setEchoChar(c);

        frame.setLayout(new FlowLayout());
        frame.getContentPane().add(new JButton("test"));
        frame.getContentPane().add(field);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

注意：您需要检查用户是否输入了密码。如果他有，请不要执行 focuseGained 方法。否则密码会消失。但这应该不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:09:30.883

试试这个：

```
String password = new String(passwordField.getText()); 
```

但是，文档明确指出您不应该使用字符串来检查/操作/传递密码信息。

[这解释了如何检查 char[] 密码。](http://docs.oracle.com/javase/tutorial/uiswing/components/passwordfield.html)

**编辑 ：**

您可以`JField`使用“在此处输入您的密码”作为其普通名称，`text`然后单击`listener`它。每当用户单击它时，将其删除`JTextField`并替换为`JPassword`具有焦点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T12:06:58.807

**肮脏的方式**

制作一个密码字段和一个文本字段...当您选中该框时，密码字段将变为不可见，而文本框将变为可见。

在未选中的情况下，passwordField 将可见，而 textfield 将不可见。

最后，使文本字段复制密码字段中输入的文本。

# sharepoint - Powershell SharePoint Kerberos New-SPWebApplication

> ID：10735304
> 
> 赞同：0
> 
> 时间：2012-05-24T10:04:45.350
> 
> 标签：sharepoint, powershell, sharepoint-2010, kerberos

不工作 - 创建新站点时，是集成安全性 - NTLM：

```
$ap = (New-SPAuthenticationProvider)
$ap | fl
$ap.DisableKerberos = $false
$ap | fl *
Start-Sleep -s 10

New-SPWebApplication -Name $WebAppName -Port $WebAppPort -HostHeader $WebAppHostHeader -URL ("http://" + $WebAppHostHeader) -ApplicationPool $WebAppAppPool -ApplicationPoolAccount (Get-SPManagedAccount $WebAppAppPoolAccount) -DatabaseName $WebAppDatabaseName -DatabaseServer $WebAppDatabaseServer –AuthenticationProvider $ap -AuthenticationMethod Kerberos 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:45:24.653

```
$AP = New-SPAuthenticationProvider -UserWindowsIntegratedAuthentication
$AP | ft
$AP.DisableKerberos - $false
$AP.update
$AP | ft
$AppPoolAccount - Get-SPManagedAccount | where {$_.UserName -eq "domain\apppoolaccount"} 
$AppPoolAccount | ft -AutoSize
New-SPWebApplication -Name "MySPWebApp" -ApplicationPool "SPWebAppPool" -    ApplicationPoolAccount $AppPoolAccount -HostHeader "myspwebapp.domain.com" -Url http://myspwebapp.domain.com" -Port 80 -AuthenticationMethod Kerberos -AuthenticationProvider $AP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:59:40.220

这对我有用

```
$ap = New-SPAuthenticationProvider -UseWindowsIntegratedAuthentication
$ap.DisableKerberos = $false
New-SPWebApplication -Url http://localhost -Port 80  -ApplicationPool "Sharepoint 80" -AuthenticationMethod Kerberos -ApplicationPoolAccount "qatc\spadmin" -Name test -AuthenticationPovider $ap -AuthenticationMethod "Kerberos" 
```

# ruby - SQLite 和 Sequel 的布尔值

> ID：10735306
> 
> 赞同：4
> 
> 时间：2012-05-24T10:05:00.030
> 
> 标签：ruby, sqlite, boolean, sequel

Sequel 支持一个`boolean`类型。它将`true`和存储`false`在SQLite 中`t`。`f`如果您再次阅读，数据将转换回`true`和`false`

SQLite 本身更喜欢存储`true`为 1 和`false`0（一些 SQLite 管理工具期望它）。如果我将布尔值也存储为“1”，Sequel 也会将该值转换为“真”：

```
require 'sequel'
DB = Sequel.sqlite()#'test.db')
DB.create_table(:test){
  boolean :my_truth
  nvarchar :descr, :size => 10
}
DB[:test].insert(1, '1')
p DB[:test].filter(:descr => '1').first #-> {:my_truth=>true, :descr=>"1"} 
```

但是，如果我选择 for `true`，则找不到任何值：

```
DB[:test].filter(:my_truth => true).each{|ds|
  puts "\t%s" % ds[:descr]
} 
```

值`true`和`"t"`被发现：

```
DB[:test].insert(true, 'true')
DB[:test].insert('t', '"t"')
DB[:test].filter(:my_truth => true).each{|ds|
  puts "\t%s" % ds[:descr]    #true and 't'
} 
```

假值也有类似的情况`0`......（请参阅问题后的示例代码）

所以**我的问题**是：我怎样才能`DB[:test].filter(:my_truth => true)`检测`1`-values和 `DB[:test].filter(:my_truth => false)`检测`0`-values？

我不是在寻找类似的东西`DB[:test].filter(:my_truth => [true,1])`

[Activerecord Rails 3 SQLite3 Boolean false](https://stackoverflow.com/questions/6013121/rails-3-sqlite3-boolean-false)的类似问题

我使用续集 3.33.0

* * *

示例代码：

```
require 'sequel'
DB = Sequel.sqlite()#'test.db')
DB.create_table(:test){
  boolean :my_truth
  nvarchar :descr, :size => 10
  fixnum :line  #code line, where data is inserted
}

#All true:
DB[:test].insert(true, 'true', __LINE__)
DB[:test].insert('true', '"true"', __LINE__)
DB[:test].insert(1, 'one', __LINE__)
DB[:test].insert('t', 't', __LINE__)

#All false:
DB[:test].insert(false,'false', __LINE__)
DB[:test].insert('false','"false"', __LINE__)
DB[:test].insert(0,'zero', __LINE__)
DB[:test].insert('f', 'f', __LINE__)
DB[:test].insert('F', 'F', __LINE__)
DB[:test].insert(nil, 'nil', __LINE__)
DB[:test].insert('n', 'n', __LINE__)
DB[:test].insert('N', 'N', __LINE__)

#Also true
DB[:test].insert('x', 'x', __LINE__)
DB[:test].insert(' ', 'space', __LINE__)
DB[:test].insert('', 'empty', __LINE__)

puts "All true values:"
DB[:test].filter(:my_truth => true).each{|ds|
  puts "\t%s (line %i)" % [ds[:descr],  ds[:line] ]
}

puts "All false values:"
DB[:test].filter(:my_truth => false).each{|ds|
  puts "\t%s (line %i)" % [ds[:descr],  ds[:line] ]
}

puts "Data:"
DB[:test].each{|ds|
  puts "\t%-5s is <%s> (line %i)" % [ ds[:descr], ds[:my_truth].inspect, ds[:line] ]
} 
```

结果：

```
All true values:
  true (line 10)
  t (line 13)
All false values:
  false (line 16)
  f (line 19)
Data:
  true  is <true> (line 10)
  "true" is <true> (line 11)
  one   is <true> (line 12)
  t     is <true> (line 13)
  false is <false> (line 16)
  "false" is <false> (line 17)
  zero  is <false> (line 18)
  f     is <false> (line 19)
  F     is <false> (line 20)
  nil   is <nil> (line 21)
  n     is <false> (line 22)
  N     is <false> (line 23)
  x     is <true> (line 26)
  space is <true> (line 27)
  empty is <true> (line 28) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:10:29.087

您可以使用 integer_booleans 设置来使用 1/0 作为真/假，而不是 't'/'f'，请参阅[http://sequel.rubyforge.org/rdoc-adapters/classes/Sequel/SQLite/DatabaseMethods.html](http://sequel.rubyforge.org/rdoc-adapters/classes/Sequel/SQLite/DatabaseMethods.html) . 这是一个例子：

```
DB = Sequel.sqlite(:integer_booleans=>true) 
```

# qt - 在 Qt 4.7 中强制调用 QString(const char *) 构造函数

> ID：10735312
> 
> 赞同：0
> 
> 时间：2012-05-24T10:05:42.137
> 
> 标签：qt, qt4

我正在尝试编译一个用 Qt 4.6 编写的库。在我当前的 Linux 机器上，我只安装了 Qt 4.7。以下代码部分：

```
/*file try.h*/
void fileOpen(QString s = NULL) ; 

/*file try.cpp*/
void MainWindow::fileOpen(QString s) {
     QString filename ;
     if(s.isNull()) filename = QFileDialog::getOpenFileName(
    this,
    "Choose a file",
    ".",
    "Source file (*.)");
else filename = s ;
} 
```

编译时出现以下错误（我使用了 cmake，但相应的行代码是上面列出的行代码）：

```
In member function ‘virtual int MainWindow::qt_metacall(QMetaObject::Call, int,     
void**)’:                                                                                          
/homes/combi/hodorog/Developments/axelOld/build/axel/src/QGui/moc_MainWindow.cxx:141:26:        
error: conversion from ‘long int’ to ‘QString’ is ambiguous
/homes/combi/hodorog/Developments/axelOld/build/axel/src/QGui/moc_MainWindow.cxx:141:26:   
note: candidates are:
/usr/include/QtCore/qstring.h:426:43: note: QString::QString(const char*)
/usr/include/QtCore/qstring.h:105:14: note: QString::QString(const QChar*) 
```

所以我猜问题出在qt中。4.7\. 有两个 QString 构造函数可以将指针作为参数（如编译错误中所列），而在 qt 4.6 中。只有一个 QString 构造函数可以将指针作为参数。如何强制 QString 以 const char * 作为参数调用构造函数？

非常感谢您提前提供的帮助，madalina

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:44:32.520

`void fileOpen(QString s = NULL);`

您正在尝试使用 构造一个`QString`对象`0`。似乎您将指针的 null 与 null 混淆了`QString`。null`QString`是使用构造函数创建的`QString()`。鉴于您的函数是如何实现的（参考`s.isNull()`），您应该将函数声明更改为

```
void fileOpen(QString s = QString()); 
```

# javascript - 如何编写 sql 语句从 web 服务获取数据

> ID：10735316
> 
> 赞同：0
> 
> 时间：2012-05-24T10:05:45.497
> 
> 标签：javascript, ajax, json, web-services

我正在尝试从 Web 服务获取一些数据：

```
 $.ajax({
        type: 'POST',
        contentType: 'application/json;', 
        url: 'http://***.asmx/GetJSONString',
        data: "Select * from con",
        crossDomain:true,
        dataType: 'json',
        success: function(response) { 
            alert(response); 
        },
        error: function(XMLHttpRequest, textStatus, error) {
            alert("Error");
        }            
    }); 
```

我必须在哪里/如何编写 sql？在数据中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:08:53.590

是的，但您忘记传递`POST`参数名称

它可以是对象：

```
data: { sqlQuery: "Select * from con" } 
```

或字符串：

```
data: "sqlQuery=Select * from con" 
```

现在在您的服务器端，您将使用 SQL 字符串获得`POST`变量`sqlQuery`。

阅读更多关于[$.ajax](http://api.jquery.com/jQuery.ajax/)的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:21:02.930

你必须将此参数作为json字符串传递..你可以这样做

```
d={ sqlQuery: "Select * from con" }
$.ajax({
    type: 'POST',
    contentType: 'application/json;', 
    url: 'your url',
    data: JSON.stringify(d),
    crossDomain:true,
    dataType: 'json',
    success: function(response) { 
        alert(response); 
    },
    error: function(XMLHttpRequest, textStatus, error) {
        alert("Error");
    }            
}); 
```

# wpf - 带有自定义绘图和 ActualWidth 的 WPF 自定义控件

> ID：10735317
> 
> 赞同：0
> 
> 时间：2012-05-24T10:05:45.543
> 
> 标签：wpf, xaml, controls, drawingcontext, actualwidth

我正在尝试使用自己的绘图逻辑创建一个自定义控件（从**Control派生）。**该控件只是从控件的左上角到右下角绘制一条对角线。此逻辑基于控件的**ActualWidth**和**ActualHeight**，它们仅在呈现控件 (AFAIK) 时可用。

我的问题是，*有效地进行自定义绘图的正确方法是什么？*

这方面的文档不多，恐怕我在做一些愚蠢或不必要的事情，比如每次触发 OnPropertyChanged 时强制刷新/重绘......

这是控件的模板：

```
<Style TargetType="{x:Type local:MyCustomControl}">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type local:MyCustomControl}">
        <Border Background="{TemplateBinding Background}"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}">
          <Canvas>
            <Line x:Name="PART_Diagonal"
                  Y1="{Binding Path=DiagonalTop}"
                  Y2="{Binding Path=DiagonalBottom}"
                  X1="{Binding Path=DiagonalLeft}"
                  X2="{Binding Path=DiagonalRight}"
                  Stroke="Red" />
          </Canvas>
        </Border>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

这是逻辑：

```
public class MyCustomControl : Control, INotifyPropertyChanged
{
  static MyCustomControl()
  {
    DefaultStyleKeyProperty.OverrideMetadata( typeof( MyCustomControl ), new FrameworkPropertyMetadata( typeof( MyCustomControl ) ) );
  }

  public MyCustomControl()
  {
    DataContext = this;
  }

  protected override void OnRenderSizeChanged( SizeChangedInfo sizeInfo )
  {
    base.OnRenderSizeChanged( sizeInfo );

    var margin = 25d;

// These calculations are based on the control's current size.
    DiagonalTop = margin;
    DiagonalBottom = ActualHeight - margin;
    DiagonalLeft = margin;
    DiagonalRight = ActualWidth - margin;

// Is this forcing redraws (i.e. invalidating the layout)?
    OnPropertyChanged( "DiagonalTop" );
    OnPropertyChanged( "DiagonalBottom" );
    OnPropertyChanged( "DiagonalLeft" );
    OnPropertyChanged( "DiagonalRight" );
  }

  public double DiagonalTop { get; private set; }
  public double DiagonalBottom{ get; private set; }
  public double DiagonalLeft { get; private set; }
  public double DiagonalRight { get; private set; }

  public event PropertyChangedEventHandler PropertyChanged;
  protected void OnPropertyChanged(string propertyname)
  {
    if (PropertyChanged != null)
      PropertyChanged.Invoke( this, new PropertyChangedEventArgs( propertyname ) );
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T12:07:55.173

你可以更容易地做到这一点，而无需任何额外的属性。只需将[Padding](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.padding)属性用于内部间距：

```
<ControlTemplate TargetType="{x:Type local:MyCustomControl}">
    <Border Background="{TemplateBinding Background}" 
            BorderBrush="{TemplateBinding BorderBrush}" 
            BorderThickness="{TemplateBinding BorderThickness}"
            Padding="{TemplateBinding Padding}">
        <Canvas Name="DrawingCanvas">
            <Line X1="0" X2="{Binding ActualWidth, ElementName=DrawingCanvas}" 
                  Y1="0" Y2="{Binding ActualHeight, ElementName=DrawingCanvas}" 
                  Stroke="Red" />
        </Canvas>
    </Border>
</ControlTemplate> 
```

使用带有填充的控件：

```
<local:MyCustomControl Padding="25" ... /> 
```

# android - 如何从蓝牙条码扫描器 Symbol CS3070 读取数据到 Android 设备

> ID：10735318
> 
> 赞同：16
> 
> 时间：2012-05-24T10:05:48.240
> 
> 标签：android, bluetooth, barcode

在我的项目中，我必须使用条形码扫描仪 Symbol CS3070 通过蓝牙读取条形码。IE; 我必须通过蓝牙在 android 设备和条形码扫描仪之间建立连接。谁能告诉我如何从条形码阅读器读取值以及如何设置通信？我已经阅读了[蓝牙开发人员指南](http://developer.android.com/guide/topics/wireless/bluetooth.html)，并且我不想在蓝牙键盘仿真 (HID) 模式下使用条形码阅读器（我有一些可以使用软键盘和条形码阅读器填充的文本视图，但我无法控制焦点）

我会使用这样的线程与读者交流

```
 private class BarcodeReaderThread extends Thread {
    private final BluetoothServerSocket mmServerSocket;

    public BarcodeReaderThread(UUID UUID_BLUETOOTH) {
        // Use a temporary object that is later assigned to mmServerSocket,
        // because mmServerSocket is final
        BluetoothServerSocket tmp = null;
        try {
            // MY_UUID is the app's UUID string, also used by the client code
            tmp = mBluetoothAdapter.listenUsingRfcommWithServiceRecord("BarcodeScannerForSGST", UUID_BLUETOOTH);
            /*
             * The UUID is also included in the SDP entry and will be the basis for the connection
             * agreement with the client device. That is, when the client attempts to connect with this device,
             * it will carry a UUID that uniquely identifies the service with which it wants to connect.
             * These UUIDs must match in order for the connection to be accepted (in the next step)
             */
        } catch (IOException e) { }
        mmServerSocket = tmp;
    }

    public void run() {
        BluetoothSocket socket = null;
        // Keep listening until exception occurs or a socket is returned
        while (true) {
            try {
                socket = mmServerSocket.accept();
                try {
                    // If a connection was accepted
                    if (socket != null) {
                        // Do work to manage the connection (in a separate thread)
                        InputStream mmInStream = null;

                        // Get the input and output streams, using temp objects because
                        // member streams are final
                        mmInStream = socket.getInputStream();

                        byte[] buffer = new byte[1024];  // buffer store for the stream
                        int bytes; // bytes returned from read()

                        // Keep listening to the InputStream until an exception occurs
                        // Read from the InputStream
                        bytes = mmInStream.read(buffer);
                        if (bytes > 0) {
                            // Send the obtained bytes to the UI activity
                            String readMessage = new String(buffer, 0, bytes);
                            //doMainUIOp(BARCODE_READ, readMessage);
                            if (readMessage.length() > 0 && !etMlfb.isEnabled()) //Se sono nella parte di picking
                                new ServerWorker().execute(new Object[] {LEGGI_SPED, readMessage});
                        }
                        socket.close();
                    }
                }
                catch (Exception ex) { } 
            } catch (IOException e) {
                break;
            }
        }
    }

    /** 
     * Will cancel the listening socket, and cause the thread to finish
     */
    public void cancel() {
        try {
            mmServerSocket.close();
        } catch (IOException e) { }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-18T18:52:25.770

我刚收到我的设备，当我配对并连接设备时，它会自动将数据发送到当前聚焦的 EditText。您使用的是什么版本的 Android，因为我在 ICS 和 JB 上尝试过它，它以这种方式工作。我没有在任何早期版本中测试过它。

**编辑：**

我将手机降级为 Gingerbread，发现它的工作方式不同，但我有一个解决方案：

这个很重要！>> 首先，您必须扫描手册中写有“Serial Port Profile (SPP)”的条形码。

```
btAdapter = BluetoothAdapter.getDefaultAdapter();
if (btAdapter.isEnabled())
{
    new BluetoothConnect().execute("");
}

public class BluetoothConnect extends AsyncTask<String, String, Void>
{
    public static String MY_UUID = "00001101-0000-1000-8000-00805F9B34FB";

    @Override
    protected Void doInBackground(String... params)
    {
        String address = DB.GetOption("bluetoothAddress");
        BluetoothDevice device = btAdapter.getRemoteDevice(address);
        try
        {
            socket = device.createRfcommSocketToServiceRecord(UUID.fromString(MY_UUID));
            btAdapter.cancelDiscovery();
            socket.connect();
            InputStream stream = socket.getInputStream();
            int read = 0;
            byte[] buffer = new byte[128];
            do
            {
                try
                {
                    read = stream.read(buffer);
                    String data = new String(buffer, 0, read);
                    publishProgress(data);
                }
                catch(Exception ex)
                {
                    read = -1;
                }
            }
            while (read > 0);
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(String... values)
    {
        if (values[0].equals("\r"))
        {
            addToList(input.getText().toString());
            pickupInput.setText("");
        }
        else input.setText(values[0]);
        super.onProgressUpdate(values);
    }
} 
```

这是我的工作代码的不完整版本，但您应该了解要点。
我希望这个解决方案也适用于你！

# javascript - 如何在和html div中打开一个html页面？

> ID：10735319
> 
> 赞同：0
> 
> 时间：2012-05-24T10:05:53.317
> 
> 标签：javascript, jquery, html, ajax

这个问题可能有点误导，因为我不想知道如何在 div 中打开 html 文档，但我问了这个问题，因为我目前面临无法替换我已经拥有的 html 文件的问题放在一个div中

我已经使用 ajax 在 div 中放置了一个 html 文件，如下所示：

```
$.ajax({
        url: 'calender.aspx',//this is html.aspx file
        cache: false,
        dataType: "html",
        success: function (data) {
           $(".mainBar").html(data);//mainBar is the div
        }
    }); 
```

这个文件被放置在页面加载上，即 document.ready 函数，直到这里一切都很好......当我想替换文件时，我的麻烦开始了，我所做的是调用一个 javascript 函数，在按钮单击时说 replaceFile()编写相同的代码来替换文件（当然要更改 url）

像这样

```
function replaceFile()
{
$.ajax({
        url: 'Another.aspx',
        cache: false,
        dataType: "html",
        success: function (data) {
           $(".mainBar").html(data);
        }
    });
} 
```

但这不起作用，请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:34:46.073

您可以在 Firebug 中加载它并设置断点`$(".mainBar").html(data);`以确保它被调用。您没有失败处理程序，因此它可能实际上接收的是 HTTP 失败代码，而不是成功代码。

我还会查看“网络”选项卡下的网络流量，以查看请求/响应的样子。这是找出大多数 AJAX 调用实际情况的简单方法。如果您想使用 IE9 而不是 Firefox 或 Chrome，则 IE9 具有类似的开发人员工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:10:25.477

我猜当您尝试单击通过 ajax 加载的内容时，您的绑定不起作用。所以你可能想改变`onclick`from的绑定

```
 $("#someButtonId").click(function(){
   replaceFile();
 }); 
```

至

```
 $(document).on("click","#someButtonId",function(){
   replaceFile();
 }); 
```

jQuery on 适用于当前和未来的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:28:08.860

使用此功能，您会将页面加载到名为 result 的元素中

.load（网址，数据，完成（responseText，textStatus，XMLHttpRequest）]）

```
 function replaceFile(url) 
 {
   $('#result').load(url, function() {
     alert('Load was performed.');
  });
 }

replaceFile('htmlfile.html'); 
```

# r - R并行S4类集群错误

> ID：10735327
> 
> 赞同：5
> 
> 时间：2012-05-24T10:06:20.950
> 
> 标签：r, parallel-processing, s4

我在获取一些代码以使用 R 中的并行包时遇到问题。我使用的是 R 2.15。

这是一个简化的示例...我有一个文件“animal.R”，其中包含以下内容：

```
# animal.R
setClass("Animal", representation(species = "character", legs = "numeric"))

##Define some Animal methods
setGeneric("count",function(x) standardGeneric("count"))
setMethod("count", "Animal", function(x) { x@legs})

setGeneric("countAfterChopping",function(x) standardGeneric("countAfterChopping"))
setMethod("countAfterChopping", "Animal", function(x) { x@legs <- x@legs-1; x@legs}) 
```

然后，在我的 R 终端中，我运行：

```
library(parallel)
source('animal.R') 
```

启动两个节点的本地集群：

```
cl <- makeCluster(rep('localhost', 2)) 
```

告诉集群节点有关 Animal 类的信息：

```
clusterEvalQ(cl, parse('animal.R')) 
```

然后在集群上运行一些代码：

```
# This works
parSapply(cl, list(daisy, fred), count)

# This doesn't...
parSapply(cl, list(daisy, fred), countAfterChopping) 
```

停止集群：

```
stopCluster(cl) 
```

对 parSapply 的第一次调用按预期工作，但第二次产生此错误：

```
Error in checkForRemoteErrors(val) : 
  2 nodes produced errors; first error: "Animal" is not a defined class 
```

有什么想法吗？为什么第二次调用 parSapply 不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:22:07.443

所以这就是发生的事情：

对于“Animal”类的 S4 对象，该`count`函数只是提取`legs`槽。如果这就是您所做的一切，您就不需要评估或获取`animal.R`集群节点上的文件。所有必要的信息都将通过`parSapply`。

但是，该`countAfterChopping`函数为插槽分配了一个新值`legs`，这就是有趣的开始。插槽分配函数``@<-``包含``slot<-``对参数的调用`check = TRUE`。这会触发对函数的评估，该函数`checkSlotAssignment`通过查询类的定义来检查“提供的值是否允许用于该插槽”（来自`?checkSlotAssignment`）。

因此，以这种方式分配到槽时必须知道类定义，并且在集群节点上不知道S4类“Animal”。这就是为什么评估解析的文件`animal.R`或获取它的工作原理。但是，您可以只评估文件的第一行，即在每个节点上定义类“Animal”。

这是一个简化的、可重现的示例：

```
animal.R<-"
  setClass('Animal', representation(species = 'character', legs = 'numeric'))

  ##Define some Animal methods
  setGeneric('count',function(x) standardGeneric('count'))
  setMethod('count', signature(x='Animal'), function(x) { x@legs})

  setGeneric('countAfterChopping',function(x) standardGeneric('countAfterChopping'))
  setMethod('countAfterChopping', signature(x='Animal'),
    function(x) { x@legs <- x@legs-1; x@legs})
"
library(parallel)

source(textConnection(animal.R))

cl <- makeCluster(rep('localhost', 2))

daisy<-new("Animal",legs=2,species="H.sapiens")
fred<-new("Animal",legs=4,species="C.lupus")

parSapply(cl, list(daisy, fred), count)
# [1] 2 4

clusterExport(cl,"animal.R") # 
clusterEvalQ(cl,eval(parse(textConnection(animal.R),n=1)))

parSapply(cl, list(daisy, fred), countAfterChopping)
# [1] 1 3 
```

# javadoc - javadoc doclet：如何从类中获取属性

> ID：10735328
> 
> 赞同：1
> 
> 时间：2012-05-24T10:06:30.527
> 
> 标签：javadoc, doclet

我正在玩 Doclets，我遇到了下一个问题。我想从一个类中获取属性，我认为参数方法会有所帮助。我的代码看起来像下一个（我正在为方法的返回类型这样做）：

```
 ClassDoc retType = pMethod.returnType().asClassDoc();
        if(retType == null) {
            System.out.println("No returnType for method " + pMethod.name());
            return false;
        } else {
            System.out.println("returnType for method " 
+ pMethod.name() + " is from type " + pMethod.returnType().typeName());
            }
            FieldDoc[] fields = retType.fields();
            System.out.println("fields length for type " + 
retType.name() + "  is " + fields.length); 
```

我得到的是

> 方法 myMethod 的 returnType 来自类型 MyMethodResponse

```
fields length for type MyMethodResponse is 0 
```

也许我错过了一些东西。ClassDoc.fields() 方法不会给我带来所有属性列表吗？有没有办法做到这一点？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:29:55.247

好的，在网上搜索，我没有找到很多解释/示例。有一个网页：[使用doclet从java源代码](http://www.egtry.com/java/doclet/extract)中提取类、字段、方法信息，其中为了提取属性，他们使用ClassDoc.fields()方法如下：

```
FieldDoc[] fields=classDoc.fields(false); 
```

以这种方式使用它，我得到了我想要的所有属性，因为我禁用了默认启用的访问修饰符过滤器。在 API 中，来自 fields 方法的布尔参数用于启用/禁用在调用 javaDoc（-public、-protected、-package 和 -private）时声明的访问修饰符过滤器。因此，如果我们只想从该类中获取所有属性，我们需要禁用它，将其设置为 false。

# android - Android：WebView 和默认浏览器的区别（核心、js 引擎、HTML5、URI 方案支持等）

> ID：10735329
> 
> 赞同：2
> 
> 时间：2012-05-24T10:06:32.543
> 
> 标签：android, api, browser

我能从技术的角度知道这两者之间有什么区别吗？有没有默认浏览器可以处理而 WebView 默认不能处理的东西？谢谢

莫什

# android - 将数据库中表中的原始数据设置为单选按钮

> ID：10735333
> 
> 赞同：0
> 
> 时间：2012-05-24T10:06:48.590
> 
> 标签：android, database, radio-button

至于[本教程](http://mobileyogi.in/mobile-programming/populating-radio-buttons-in-android-with-database-data/)，我正在尝试设置此光标并完美设置。但据我了解，它从表中的字符串数组中获取值。

我有第一列是 id 的表，第二列是名称。问题是我希望光标获取每个名称（每个名称都有自己的原始名称），上面的代码正在寻找列而不是原始名称。当前结果仅是名字。

数据库是：

```
public class DatBas {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_SHOURS = "start_hour";
    public static final String KEY_SMINUTE = "start_minute";
    public static final String KEY_SDATE = "start_date";
    public static final String KEY_AMOUNT = "amount";
    public static final String KEY_SIDE = "side";
    public static final String KEY_KIND = "kind";

    public static final String KEY_ROW_b_ID = "_id";
    public static final String KEY_b_IMAGE_PATH = "uri_b";
    public static final String KEY_b_NAME = "b_name";
    public static final String KEY_b_GENDER = "b_gender";
    public static final String KEY_b_BORN_DATE_YEAR = "b_age_year";
    public static final String KEY_b_BORN_DATE_MONTH = "b_age_month";
    public static final String KEY_b_BORN_DATE_DAY = "b_age_day";

    private static final String DATABASE_NAME = "TamatDB";
    private static final String DATABASE_TABLE = "stop_watch_records";
    private static final String DATABASE_TABLE_SETTINGS = "settings";

    private static final int DATABASE_VERSION = 3 ;

    private TamarDatabase thdb;
    private static Context tcontext;
    private SQLiteDatabase tdb;

    private static class TamarDatabase extends SQLiteOpenHelper {

        public TamarDatabase(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            String ctData = "CREATE TABLE  " + DATABASE_TABLE + " ( "
                    + KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + KEY_SHOURS + " TEXT, " + KEY_SMINUTE
                    + " TEXT, " + KEY_SDATE + " TEXT, "
                    + KEY_AMOUNT + " TEXT, " + KEY_SIDE
                    + " TEXT, " + KEY_KIND + " TEXT );";
            db.execSQL(ctData);

            String ctSettings = "CREATE TABLE " + DATABASE_TABLE_SETTINGS
                    + " ( " + KEY_ROW_b_ID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                    + KEY_b_IMAGE_PATH + " TEXT, " + KEY_b_NAME
                    + " TEXT, " + KEY_b_GENDER + " TEXT, "
                    + KEY_b_BORN_DATE_YEAR + " TEXT, "
                    + KEY_b_BORN_DATE_MONTH + " TEXT, "
                    + KEY_b_BORN_DATE_DAY + " TEXT);";
            db.execSQL(ctSettings);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE_SETTINGS);
            onCreate(db);
        }
    }

    public DatBas(Context c) {
        tcontext = c;
    }

    public DatBas open() throws SQLiteException {
        thdb = new TamarDatabase(tcontext);
        tdb = thdb.getWritableDatabase();
        return this;
    }

    public SQLiteDatabase getReadableDatabase() throws SQLiteException {
        thdb = new TamarDatabase(tcontext);
        tdb = thdb.getReadableDatabase();
        return tdb;
    }

    public void close() {
        tdb.close();
    }

    public long createEntry(String sh, String sm, String sd, String at,
            String tside, String tkind) {
        ContentValues cv = new ContentValues();
        cv.put(KEY_SHOURS, sh);
        cv.put(KEY_SMINUTE, sm);
        cv.put(KEY_SDATE, sd);
        cv.put(KEY_AMOUNT, at);
        cv.put(KEY_SIDE, tside);
        cv.put(KEY_SIDE, tkind);

        return tdb.insert(DATABASE_TABLE, null, cv);
    }

    public long createEntrySettings(String pt, String bn, String bg,
            String bbdy, String bbdm, String bbdd) {
        ContentValues cv2 = new ContentValues();
        cv2.put(KEY_b_IMAGE_PATH, pt);
        cv2.put(KEY_b_NAME, bn);
        cv2.put(KEY_b_GENDER, bg);
        cv2.put(KEY_b_BORN_DATE_YEAR, bbdy);
        cv2.put(KEY_b_BORN_DATE_MONTH, bbdm);
        cv2.put(KEY_b_BORN_DATE_DAY, bbdd);

        return tdb.insert(DATABASE_TABLE_SETTINGS, null, cv2);
    }

    public String getData() {
        String[] columns = new String[] { KEY_ROWID, KEY_SHOURS, KEY_SMINUTE,
                KEY_SDATE, KEY_AMOUNT, KEY_SIDE, KEY_KIND };
        Cursor c = tdb.query(DATABASE_TABLE, columns, null, null, null, null,
                null);
        String results = "";

        int iRaw = c.getColumnIndex(KEY_ROWID);
        int iShours = c.getColumnIndex(KEY_SHOURS);
        int iSminute = c.getColumnIndex(KEY_SMINUTE);
        int iDate = c.getColumnIndex(KEY_SDATE);
        int iAmount = c.getColumnIndex(KEY_AMOUNT);
        int iSide = c.getColumnIndex(KEY_SIDE);
        int iKind = c.getColumnIndex(KEY_KIND);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            results = results + "the id is " + c.getString(iRaw)
                    + " the sart hour is " + " " + c.getString(iShours)
                    + " the start minute is " + " " + c.getString(iSminute)
                    + " the start date is " + " " + c.getString(iDate)
                    + " the amount is " + " " + c.getString(iAmount)
                    + " the side is " + " " + c.getString(iSide)
                    + " the kind is " + " " + c.getString(iKind) + "\n";
        }
        return results;
    }

    public String getDataSettings() {
        String[] columns = new String[] { KEY_ROW_b_ID, KEY_b_IMAGE_PATH,
                KEY_b_NAME, KEY_b_GENDER, KEY_b_BORN_DATE_YEAR,
                KEY_b_BORN_DATE_MONTH, KEY_b_BORN_DATE_DAY };
        Cursor c = tdb.query(DATABASE_TABLE_SETTINGS, columns, null, null,
                null, null, null);
        String results = "";

        int iRawbId = c.getColumnIndex(KEY_ROW_b_ID);
        int iBIPath = c.getColumnIndex(KEY_b_IMAGE_PATH);
        int iBName = c.getColumnIndex(KEY_b_NAME);
        int iGender = c.getColumnIndex(KEY_b_GENDER);
        int iBBDateYear = c.getColumnIndex(KEY_b_BORN_DATE_YEAR);
        int iBBDateMonth = c.getColumnIndex(KEY_b_BORN_DATE_MONTH);
        int iBBDateDay = c.getColumnIndex(KEY_b_BORN_DATE_DAY);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            results = results + " id " + " " + c.getString(iRawbId)
                    + " path " + " " + c.getString(iBIPath)
                    + " name " + " " + c.getString(iBName)
                    + " gender " + " " + c.getString(iGender)
                    + " year " + " " + c.getString(iBBDateYear)
                    + " month " + " " + c.getString(iBBDateMonth)
                    + " day " + " " + c.getString(iBBDateDay) + "\n";
        }
        return results;
    }

    public String getDataSettingsbName() {
        String[] columns = new String[] { KEY_ROW_b_ID, KEY_b_NAME };
        Cursor c = tdb.query(DATABASE_TABLE_SETTINGS, columns, null, null,
                null, null, null);
        String results = "";

        int iRawbId = c.getColumnIndex(KEY_ROW_b_ID);
        int iBName = c.getColumnIndex(KEY_b_NAME);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            results = c.getString(iRawbId)+ c.getString(iBName)+ "\n";
        }
        return results;
    }

    public DatBas delete() {
        tdb.delete(DATABASE_TABLE, null, null);
        tdb.delete(DATABASE_TABLE_SETTINGS, null, null);
        return null;
    }

    public static class TamarDatabaseCursor extends SQLiteCursor {

        /** The query for this cursor */
        private static final String QUERY = "SELECT _id, b_name FROM settings";

        /** Cursor constructor */
        private TamarDatabaseCursor(SQLiteDatabase db,
                SQLiteCursorDriver driver, String editTable, SQLiteQuery query) {
            super(db, driver, editTable, query);
        }

        /** Private factory class necessary for rawQueryWithFactory() call */

        private static class Factory implements SQLiteDatabase.CursorFactory {
            public Cursor newCursor(SQLiteDatabase db,
                    SQLiteCursorDriver driver, String editTable,
                    SQLiteQuery query) {
                return new TamarDatabaseCursor(db, driver, editTable, query);
            }
        }

        /* Accessor functions get one per database column */

        public int getActressId() {
            return getInt(getColumnIndexOrThrow("settings._id"));
        }

    }

    public TamarDatabaseCursor getActress() {
        SQLiteDatabase d = getReadableDatabase();
        TamarDatabaseCursor c = (TamarDatabaseCursor) d.rawQueryWithFactory(
                new TamarDatabaseCursor.Factory(), TamarDatabaseCursor.QUERY,
                null, null);
        c.moveToFirst();
        return c;
    }

} 
```

活动是：

```
DatBas db = new DatBas(Tamar_appActivity.this);
    TamarDatabaseCursor c = db.getActress();

    if (c.moveToFirst())
        DisplayRadioButton(c);

    else
        Toast.makeText(this, "No title found", Toast.LENGTH_LONG).show();
    db.close();

}

public void DisplayRadioButton(Cursor c) {
    for (int i = 1; i < (c.getColumnCount()); i++) {
        RadioGroup radiogroup = (RadioGroup) findViewById(R.id.bNameSelectGroup);
        RadioButton rdbtn = new RadioButton(this);
        rdbtn.setId(i);
        rdbtn.setText(c.getString(i));
        radiogroup.addView(rdbtn);      
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:49:45.997

您不了解游标和查询的工作原理。

您查询数据库并告诉它从数据库中符合特定条件的特定列返回信息。数据库按照您指定的顺序向您发送游标中的数据，该游标包含您从与您的请求匹配的所有行中指定的所有列的信息。

```
SELECT _id, firstname, lastname FROM actresses 
```

以上将返回数据库中每一行的 _id、firstname lastname 列中的数据。

因此，如果您有三位女演员，它将返回三条记录，信息来自您指定的三列。

```
SELECT _id, firstname FROM actresses 
```

这将只返回每条记录的 _id 和 firstname 列中的信息。

**编辑**

您只会得到名称，因为这是您在进行查询时所要求的全部内容：

```
private static final String QUERY = "SELECT _id, b_name FROM settings 
```

更改它以返回更多列，您将获得更多单选按钮。

# android - 幻灯片应用

> ID：10735340
> 
> 赞同：0
> 
> 时间：2012-05-24T10:07:14.033
> 
> 标签：android, ontouchlistener

我们有包含 imageView、textView1、textView2 的布局。目标是让滑动像在相册中一样可用。但是在哪里设置 OnTouchListener？布局上？它由其他视图覆盖。在每个视图上？这似乎也不是一个好的解决方案。

有人告诉我，我必须再添加一个将 fill_parent 的布局（在级别上，textViews 和 imageView 所在的位置）。它将是不可见的。我做到了，但它也不好用。

谢谢。

# c# - C# - 如何从 Html 中找到自定义标签的名称和文本

> ID：10735342
> 
> 赞同：-1
> 
> 时间：2012-05-24T10:07:16.723
> 
> 标签：c#

我有这样的输入 Html 的要求 -

```
 <col name="col1">Text1</col>
  <col name="col2">Text2</col>
  <col name="col3">text3</col> 
```

现在我必须解析这个 Html 并创建一个带有以下输出的 csv 文件 -

```
col1,col2,col3
Text1,Text2,text3 
```

请让我知道如何在 C# 中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:51:41.417

使用[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)。[不惜一切代价](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)避免使用正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:38:13.177

我使用了这个正则表达式，它工作了 gr8 ......

```
<col[\\s]*name=\"?([0-9a-zA-Z ]*)\"?>((.|\n)*?)</col> 
```

# windows - 将文件夹与我的应用程序关联？

> ID：10735352
> 
> 赞同：0
> 
> 时间：2012-05-24T10:07:54.340
> 
> 标签：windows

如何在 Windows 中将特定文件夹（不是带有扩展名的文件）与我的应用程序相关联，以便当我双击该文件夹时它会打开我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:13:35.117

我假设当你双击一个文件夹时没有应用程序启动，因为你也不能用“打开方式”来“启动”它。但作为一种解决方法，您可以在下创建应用程序的快捷方式，`[systemdrive]\user\[username]\AppData\Roaming\Microsoft\Windows\SendTo`然后通过右键单击->“发送到”菜单启动应用程序。

# python - 我应该把接口通用的异常定义放在哪里？

> ID：10735355
> 
> 赞同：1
> 
> 时间：2012-05-24T10:08:15.267
> 
> 标签：python, zope.interface

在设计某些类时，我养成了使用 zope.interface 的习惯，这一切都很好，但我对异常有点不确定。我还没有看到任何文档谈论它们（尽管只是在粗略搜索之后）。首先，我想知道将某个接口的任何实现都通用的异常 X 放在哪里。

我总是可以将异常放在它自己的模块中。但是一个完整的模块可能是一个简单的例外？我不介意将它放在定义相关接口的同一个模块中，但我想知道这是否以某种方式被认为是不好的形式？

基本上，我想听听一些使用过接口并了解此约定的人的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:56:42.097

最佳实践是拥有一个`interfaces`模块，其中包括所有记录的接口和相应的异常、常量和事件。

这样，您将包的 API 定义在一个明确定义的位置，并且查找接口的人可以看到抛出的任何异常都定义在同一位置。

以下是来自各种项目的一些示例 interface.py 文件：

*   [交易](http://svn.zope.org/transaction/trunk/transaction/interfaces.py?rev=123062&view=markup)
*   [plone.app.iterate](https://github.com/plone/plone.app.iterate/blob/master/plone/app/iterate/interfaces.py)
*   [zope.component](http://svn.zope.org/zope.component/trunk/src/zope/component/interfaces.py?rev=122813&view=markup)

# windows-phone-7 - 如何分析 wp7.1 后台代理中的内存使用情况？

> ID：10735356
> 
> 赞同：4
> 
> 时间：2012-05-24T10:08:16.110
> 
> 标签：windows-phone-7, windows-phone-7.1, background-agents

我正在为 Mango (7.1) 开发预定的后台代理

我已经设法将内存使用量从 10.5MB 减少到 6.5MB，使用基于手动跟踪技术`DeviceStatus.ApplicationPeakMemoryUsage`以及一些关于优化什么的智能猜测。

然而，现在我需要降低到 6MB 以下——而最终的 0.5MB 被证明是难以捉摸的。

我已经设法在主应用程序上运行“ [Windows Phone 性能分析](http://msdn.microsoft.com/en-us/library/hh202935%28v=vs.92%29)”工具，但似乎找不到让它针对代理运行的方法。

是否有任何工具和/或技术可以帮助我弄清楚我的代理的记忆是什么？理想情况下，我想要一种调查整个内存空间的方法 - 包括代码和数据，理想情况下它应该适用于发布版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T10:46:30.080

如前所述，调试器将增加不可忽略的内存开销。所以我找到的最好方法是：

*   激活模拟器的控制台： http: [//nicksnettravels.builttoroam.com/post/2011/01/19/Windows-Phone-7-Console-Window-on-64-bit-machine.aspx](http://nicksnettravels.builttoroam.com/post/2011/01/19/Windows-Phone-7-Console-Window-on-64-bit-machine.aspx)

*   在代码的关键点（例如主要函数的开头和结尾，或分配大对象之后），显示内存消耗：

    ```
    Console.WriteLine("Function {0}: {1}", "name of your function", DeviceExtendedProperties.GetValue("ApplicationCurrentMemoryUsage")); 
    ```

*   在不附加调试器的情况下启动应用程序（Ctrl + F5），坐下来享受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:27:46.640

请记住，如果您在调试模式下运行后台代理，这会在代理的内存占用上增加大约 2MB，因此您可能没问题。

在直接运行应用程序而不是从 Visual Studio 运行应用程序时，您可能仍然可以使用 ApplicationPeakMemoryUsage 并将内存详细信息写入独立存储中的文件。

HTH - 鲁珀特。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:38:04.543

您可能会发现以下博客文章很有趣，您可能已经看过它，但它描述了调试内存添加以及一些减少内存占用的技巧。

[http://www.pitorque.de/MisterGoodcat/post/Windows-Phone-Background-Agents-Pitfalls-(2-of-n).aspx](http://www.pitorque.de/MisterGoodcat/post/Windows-Phone-Background-Agents-Pitfalls-(2-of-n).aspx)

# ios - ios拖拽库

> ID：10735357
> 
> 赞同：1
> 
> 时间：2012-05-24T10:08:20.543
> 
> 标签：ios, ipad

我正在寻找任何允许拖放功能的库，例如 iPad 上 Garage Band 中的曲目。有谁知道存在的好库（开源或商业）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T16:37:15.743

在 Oblong，我们创建了一个独立的 iOS 拖放库，可以跨任意视图工作，并在 github 上公开：

[https://github.com/Oblong/OBDragDrop](https://github.com/Oblong/OBDragDrop)

如果您发现它有用或有您需要的特定增强区域，请继续告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:00:53.793

我还制作了自己的静态库（我不知道 OBDragDrop）

[https://github.com/jmos/JCMDragging](https://github.com/jmos/JCMDragging)（使用 ARC 编译）

该库反映了常见的 UIKit 模式，因此大部分接口实际上是 UIKit 类的类别：

*   拖动事件由 UIResponder 处理和转发
*   拖动事件根据 hitTest:withDrag: 和 pointInside:withDrag: 传递：
*   数据传输使用 [UIPasteboard draggingPasteboard] 和 [UIResponder drag:/drop:]

唯一具体的类是手势识别器。没有管理器或初始化。

查看示例项目以了解如何使用它。

**编辑：**我现在添加了一个自述文件。

# php - 在zend的Jquery自动完成中传递一个隐藏的值

> ID：10735360
> 
> 赞同：0
> 
> 时间：2012-05-24T10:08:24.470
> 
> 标签：php, jquery, autocomplete

我们如何在 zend 中传递 Jquery 自动完成中的隐藏值..

例如..

如果自动完成返回位置列表..那么每个位置的位置 id 也作为隐藏变量返回..以在其他页面上使用..

# jquery - 从相对定位的父级释放绝对定位的子级

> ID：10735362
> 
> 赞同：2
> 
> 时间：2012-05-24T10:08:27.520
> 
> 标签：jquery, css

就是这种情况……

HTML：

```
 <div id="cw">
        <div id="c"></div>        
   </div>
   <a href="#">click me</a> 
```

CSS：

```
#cw {
    position: relative;
    width: 200px;
    height: 200px;
    margin: 100px 200px 0 200px;     
    padding: 10px;
}

#c {
    background: blue;
    display: block;
    height: 200px;
    width: 200px;    
} 
```

-> [http://jsfiddle.net/F6FF2/4/](http://jsfiddle.net/F6FF2/4/)

现在，我想要实现的就是这个。如果单击“单击我”链接，则内部容器`#c`应该从它在页面上呈现的位置扩展到窗口的整个范围。

我认为这只能通过分配`position: absolute`给元素来实现。但后来我遇到了它的父母是相对定位的问题。

所以到目前为止我想出的是克隆`#c`，将其从 DOM 中删除并将克隆附加到`body`在动画其扩展之前提供所需的结果。但是，问题是，如果`#c`包含例如 Google 地图，则必须在克隆事件后重新实例化地图（而不是仅仅刷新图块）。

除了这个解决方案看起来相当混乱之外。必须有更好、更清洁的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:28:13.193

您在此处覆盖内容（地图）：

```
c.text(c_width+" > "+c_height+" > "+c_left+" > "+c_top); 
```

不要覆盖内容，也不要使用克隆（移动原始），而是在完成动画时触发调整大小事件：

[http://jsfiddle.net/F6FF2/10/](http://jsfiddle.net/F6FF2/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:15:07.793

您是否尝试**将**div 移动到 body 元素而不是克隆它？

```
$("body").append($("#c")) 
```

完成后，您可以将其移回：

```
$("#cw").append($("#c")) 
```

# jquery - 需要在 ASP.NET 网站中加入活动日历？

> ID：10735364
> 
> 赞同：1
> 
> 时间：2012-05-24T10:08:41.677
> 
> 标签：jquery, asp.net

我想在我的网站（ASP.NET）中加入事件日历。

我从下面的事件日历中经过。

**wdCalendar**
[http://www.web-delicious.com/jquery-plugins-demo/wdCalendar/sample.php](http://www.web-delicious.com/jquery-plugins-demo/wdCalendar/sample.php)

有人可以建议一些可以处理日、周和月事件的事件日历吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:00:43.063

如果您决定使用[http://arshaw.com/fullcalendar/download/](http://arshaw.com/fullcalendar/download/)，那么您将遇到重复事件的问题，这取决于您如何设计数据库以及要处理的事件类型。几天前我开始使用它。我设法完成了它，但在重复出现时它不是很灵活。我设法完成了它，但我的版本仍然支持每周重复，它无法处理每月重复。如果你有时间，我建议你在 wdCalendar 日历上工作。这个 ASP.Net 版本的例子可以在这个博客[http://wdcalendar.blogspot.com/](http://wdcalendar.blogspot.com/)上找到。我正在寻找非常相似的东西。

如果您正在寻找付费版本，那么他们提供 ASP.NET AJAX 和 ASP.NET MVC 控件。

日历：[http ://demos.telerik.com/aspnet-ajax/calendar/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/calendar/examples/overview/defaultcs.aspx)

调度程序： http: [//demos.telerik.com/aspnet-ajax/scheduler/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/scheduler/examples/overview/defaultcs.aspx)

或者

[http://scheduler-net.com/docs/common_application_with_scheduler.html](http://scheduler-net.com/docs/common_application_with_scheduler.html)

# javascript - 在一页中加载 100 张图片的最佳方法是什么？

> ID：10735366
> 
> 赞同：1
> 
> 时间：2012-05-24T10:08:46.947
> 
> 标签：javascript, html, css

在我的网站上有一个网页，其中有 100 张图片，从浏览器一次加载一张图片是不雅的。

有没有办法让它更优雅、更美观？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:11:10.097

您可以[**延迟加载**](http://www.appelsiini.net/projects/lazyload)图像，这意味着它们仅在浏览器上显示时才会加载。这只需使用以下内容即可工作：

```
$("img.lazy").lazyload(); 
```

但是，如果在页面加载时可见的图像文件非常大，那么您无法采取任何措施来防止这种情况发生。

我之前使用的一个使这个更用户友好的想法是放置每个`img`元素，`div`其中每个元素都有一个[ajax loader](http://ajaxload.info/)的背景图像。这至少给出了正在加载的外观。然后一旦加载图像，这将覆盖加载图像。

* * *

**编辑：**查看您的[最新评论](https://stackoverflow.com/questions/10735366/best-way-to-load-100-images-in-one-page/10735400#comment13946542_10735366)，如果您使用非常小的图像，正如[@afaf12](https://stackoverflow.com/a/10735480/370103)所指出的，使用[**CSS Sprites**](http://css-tricks.com/css-sprites/)将是一个合适的解决方案。许多大型网站，包括 StackOverflow，都使用这些。这意味着不是为所有图像发出 100 个 HTTP 请求，而是发出 1 个 HTTP 请求（即 1 个图像下载），然后使用 CSS 将这个图像定位在不同的位置。

还可以使用各种不同的[CSS Sprite 生成器](http://spritegen.website-performance.org/)来避免您自己制作的繁重任务：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:16:23.010

由于图像非常小，这可能是 css sprite 很有用的情况。

您有 1 个大图像，而不是 100 多个小图像。

当你想显示一个特定的图像时，你必须指定背景坐标，例如：

```
div#div1 {background-position:0px -100px} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T10:22:20.127

让它看起来更令人愉悦的一种方法是让图像在加载后淡入：

```
$('img').css('opacity', '0.0').load(function(){
  $(this).animate({'opacity': '1.0'});
}); 
```

演示：http: [//jsfiddle.net/Guffa/gzFFN/](http://jsfiddle.net/Guffa/gzFFN/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:10:44.667

[http://code.google.com/p/jquery-appear/](http://code.google.com/p/jquery-appear/)

当对象“出现”即在屏幕上可见时触发的 jQuery 出现事件。

为所有图像创建容器，并且仅当它们在屏幕上可见时才加载实际图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T10:15:09.710

另一个有趣的解决方案可以在这个堆栈链接上找到。它适用于所有内容，但答案中提供的代码也可以应用于图像加载。[关联](https://stackoverflow.com/questions/8642142/how-to-synchronize-web-site-content-while-loading-page)

# oracle - Oracle 导出：表不存在

> ID：10735377
> 
> 赞同：1
> 
> 时间：2012-05-24T10:09:27.810
> 
> 标签：oracle

我正在尝试在 oracle 11g 中导出数据

```
exp user/password file=dump.dmp tables = (table1) 
```

通过 sqlplus。

我收到以下错误：

> 即将通过常规路径导出指定的表...
> EXP-00011：USER.TABLE1 不存在
> 导出成功终止并出现警告。

但是当我检查谁是这张桌子的所有者时：

```
SELECT owner, table_name from dba_tables where table_name = 'TABLE1'; 
```

我知道的所有者`TABLE1`是`USER`

我应该怎么做才能导出这个表？

## 更新

实际上，我找到了解决方案。我希望它会帮助别人。从版本 11g 开始，Oracle 引入了称为延迟段创建的新特性。因此，如果现在有行，oracle 不会创建表段。所以我用选项“立即创建段”重新创建了我的表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:49:37.107

实际上，我找到了解决方案。我希望它会帮助别人。从版本 11g 开始，Oracle 引入了称为延迟段创建的新特性。因此，如果其中没有行，oracle 不会创建表段。而且我的表不包含任何数据。所以我用选项“立即创建段”重新创建了我的表

[在这里](http://oracletube.wordpress.com/2011/01/20/oracle-11gr2-exp-00011-occurs-even-object-exist-in-schema/)找到了解决方案。有更多选项如何解决这个问题，并解释为什么这个东西恰好出现在 oracle 11g 中。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T14:04:34.373

除了 Olivia 发布的答案之外，我还想添加一些代码：

```
SELECT 'alter table ' ||  table_name || ' allocate extent;'
from dba_tables where SEGMENT_CREATED = 'NO'; 
```

再次执行输出和exp。您的架构将被导出，包括空表。

编辑：类似的问题[在这里](https://stackoverflow.com/questions/18924704/how-to-export-empty-tables-in-oracle/22859017#22859017)，也许你会在那里找到你的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T14:27:01.923

您可以使用以下查询从特定用户获取表级导出。

```
exp user/password file=dump.dmp tables = user.table1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-05T18:40:17.697

改变这个：

```
exp user/password file=dump.dmp tables = (table1); 
```

对此：

```
exp user/password tables = (table1) file=dump.dmp; 
```

# perl - 在 AWK 中调用 Perl 脚本

> ID：10735378
> 
> 赞同：3
> 
> 时间：2012-05-24T10:09:30.113
> 
> 标签：perl, awk, ksh

我有一个问题，我需要调用传入参数的 Perl 脚本并在 AWK`BEGIN`块中获取 Perl 脚本的返回值。就像下面一样。

我有一个 Perl 脚本 util.pl

```
#!/usr/bin/perl -w
$res=`$exe_cmd`;
print $res; 
```

现在在 AWK`BEGIN`块 (ksh) 中，我需要调用脚本并获取返回值。

```
BEGIN { print "in awk, application type is " type;  
                    } \
            {call per script here;} 
```

如何使用参数调用 Perl 脚本并获取返回值`$res`？

```
res = util.pl a b c; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:58:45.307

Pipe the script into `getline`:

```
awk 'BEGIN {
         cmd = "util.pl a b c"; 
         cmd | getline res; 
         close(cmd);
         print "in awk, application type is " res
     }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:58:34.987

Part of an AWK-script I use for extracting data from a `ldap` query. Perhaps you can find some inspiration from how I do the base64 decoding below...

```
 /^dn:/{
        if($0 ~ /^dn: /){
            split($0, a, "[:=,]")
            name=a[3]
        }
        else if($0 ~ /^dn::/){
            # Special handling needed since ldap apparently
            # uses base64 encoded strings for *some* users
            cmd = "/usr/bin/base64 -i -d <<< " $2 " 2>/dev/null"
            while ( ( cmd | getline result ) > 0 ) { }
            close(cmd)
            split(result, a, "[:=,]")
            name=a[2]
        }
    } 
```

# maven - 在 Maven 中定义额外的源目录

> ID：10735380
> 
> 赞同：15
> 
> 时间：2012-05-24T10:09:35.720
> 
> 标签：maven, intellij-idea, code-generation

我从 wsdl 文件生成 Java 源代码。这些来源不受版本控制（但 wsdl 受）。我们在 maven 中使用 cxf-codegen-plugin，生成的类在`<sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>`.

这在 Maven 中一切正常。

我必须将此目录定义为 Intelij Idea 中的附加源目录。（`target`通常不包括在内）。

但是每次我将maven项目重新导入InteliJ Idea（由于pom更改），我都必须手动编辑Idea中的项目结构并重新定义添加源目录。

有什么办法可以在 maven 中定义这个额外的源目录，以便 Idea 在重新加载时将其拾取，或者告诉 Idea 不要忘记手动源目录定义？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T13:16:41.183

[IntelliJ IDEA Maven FAQ](https://www.jetbrains.com/idea/help/maven-importing.html) , **Generated Sources**部分描述了这种情况：

> 重新导入项目时指定源根目录。
> 您可以选择以下选项之一：
> 
> *   自动检测 这是默认选项。当您选择此选项时，IntelliJ IDEA 会自动检测生成源的位置。IntelliJ IDEA 还检测将哪个目录标记为源根目录。但是，IntelliJ IDEA 仅在 target/generated-sources 和 target/generated-sources/* 目录中搜索生成的源。
>     
>     
> *   target/generated-sources 此选项使您可以手动将目录标记为源根目录。
>     
>     
> *   "target/generated-sources" 的子目录 此选项使您可以手动将子目录标记为源根目录。
>     
>     
> *   不检测 此选项可让您跳过检测过程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T10:17:39.297

看看构建目标（参见[此处](http://blog.tfd.co.uk/2009/07/29/howto-add-more-than-one-source-directory-into-a-maven-build/)`<add-source>`的示例）

引用：

```
<plugin>
 <groupId>org.codehaus.mojo</groupId>
 <artifactId>build-helper-maven-plugin</artifactId>
 <version>1.4</version>
 <executions>
  <execution>
   <id>add-wsdl-source</id>
   <phase>generate-sources</phase>
   <goals>
    <goal>add-source</goal>
   </goals>
   <configuration>
    <sources>
     <source>${basedir}/src-generated/src</source>
    </sources>
   </configuration>
   <!-- [...] -->
  </execution>
 </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:17:41.597

您可以将（外部）源目录定义为模块的依赖项。`Project Structure -> Modules -> Depenencies`. 在那里你必须添加一个新的`JAR or Directory`依赖项。

# php - 计算总值，然后在控制器代码点火器中添加增值税

> ID：10735381
> 
> 赞同：1
> 
> 时间：2012-05-24T10:09:35.893
> 
> 标签：php, codeigniter

我的数据库模型中有一些数据。我想要做的是获得 PAYMENTS_total 的总金额，然后乘以增值税（0.20）

我假设我需要在某处创建某种 FOR 循环，但不太确定在哪里？

我的控制器代码是：

```
function vat_list()
    {
        if(isset($_POST['search_date']))
        {
            $search_date = $this->input->post('search_date', TRUE);
        }
        else
        {
            $search_date = date('D j M Y', strtotime('today - 7 days')) . ' to ' . date('D j M Y');
        }

        $my_result_data = $this->Invoices_model->read_vat($this->viewinguser->BUSINESSES_id, $search_date);
        $my_results = $my_result_data->result();

        $vat_total = $my_results[0]->PAYMENTS_total;
        $vat_total = number_format($my_results[0]->PAYMENTS_total, 2, '.', '') * 0.20;

        $this->template->set('title', 'View VAT Reports');
        $this->template->set('subtitle', $search_date);
        $this->template->set('vat_items', $my_results);
        $this->template->set('vat_total', $vat_total);
        $this->template->build('accounts/invoices/vat_list');
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:18:43.730

**编辑**

不要这样做——不要使用浮点运算来处理货币计算。使用实现定点（十进制）数据类型的东西，有几个可用的库，例如[https://github.com/mathiasverraes/money](https://github.com/mathiasverraes/money)或[https://github.com/sebastianbergmann/money](https://github.com/sebastianbergmann/money)。原始答案仅用于历史目的。

* * *

在不知道你的`$my_results`数组结构的情况下，我不能肯定地说，但我猜这就是你所追求的：

```
// ...

$my_results = $my_result_data->result();

// The VAT rate (you never know, it *might* go down at some point before we die)
$vatPercent = 20;

// Get the total of all payments
$total = 0;
foreach ($my_results as $result) {
  $total += $result->PAYMENTS_total;
}

// Calculate the VAT on the total
$vat = $total * ($vatPercent / 100);

// The total including VAT
$totalIncVat = $total + $vat;

// You can now number_format() to your hearts content

$this->template->set('title', 'View VAT Reports');

// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:13:12.357

试试这个：

```
 $my_results = $my_result_data->result();
    foreach ($my_results as $result) {
       number_format($result->PAYMENTS_total, 2, '.', '') * 0.20;
    } 
```

number_format 的结果可以返回到 $result\a new array\etc。

# ios - 启动图像屏幕时间

> ID：10735386
> 
> 赞同：0
> 
> 时间：2012-05-24T10:10:15.087
> 
> 标签：ios, ipad, launch

提前感谢您抽出时间来看看。我是菜鸟，所以如果这是编程 101，请原谅我，但是在阅读了几篇参考资料并在线搜索之后，我没有想出答案。

有没有办法控制启动图像在应用程序启动之前显示的时间长度？

再次感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:17:29.360

我这样做的方法是手动编写启动图像以在指定时间开始出现，然后切换视图。如果您按照自己的方式进行操作，那么它在屏幕上停留的时间是预先确定的。

# qt - QDialog如何半透明？

> ID：10735391
> 
> 赞同：-1
> 
> 时间：2012-05-24T10:10:35.390
> 
> 标签：qt, qgraphicsitem, qdialog

我尝试将 QGraphicsOpacityEffect 应用于 QDialog，但结果是一个半灰色的小部件，我看不到背景和顶级小部件背后的活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:13:39.447

使用该[`setWindowOpacity`](http://qt-project.org/doc/qt-4.8/qwidget.html#windowOpacity-prop)功能。

> 不透明度的有效范围是从 1.0（完全不透明）到 0.0（完全透明）。

# azure - WindowsEventLogs 未登录到 Azure

> ID：10735396
> 
> 赞同：1
> 
> 时间：2012-05-24T10:10:50.983
> 
> 标签：azure, event-log, azure-diagnostics

我有一个带有以下代码的 Azure WebRole：

```
public override bool OnStart()
{
    setDiagnostics();

    TestClass test = new TestClass();

    return base.OnStart(); 
}

private void setDiagnostics()
{
    string wadConnectionString = "Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString";
    CloudStorageAccount cloudStorageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue(wadConnectionString));

    DeploymentDiagnosticManager deploymentDiagnosticManager = new DeploymentDiagnosticManager(cloudStorageAccount, RoleEnvironment.DeploymentId);
    RoleInstanceDiagnosticManager roleInstanceDiagnosticManager = cloudStorageAccount.CreateRoleInstanceDiagnosticManager(
        RoleEnvironment.DeploymentId,
        RoleEnvironment.CurrentRoleInstance.Role.Name,
        RoleEnvironment.CurrentRoleInstance.Id);

    DiagnosticMonitorConfiguration diagConfig = roleInstanceDiagnosticManager.GetCurrentConfiguration();

    if (diagConfig == null)
        diagConfig = DiagnosticMonitor.GetDefaultInitialConfiguration();

    diagConfig.WindowsEventLog.DataSources.Add("Application!*");
    diagConfig.WindowsEventLog.ScheduledTransferPeriod = TimeSpan.FromMinutes(1D);

    roleInstanceDiagnosticManager.SetCurrentConfiguration(diagConfig);

    DiagnosticMonitor.Start(wadConnectionString, diagConfig);
} 
```

在 my 的构造函数中`TestClass`是以下代码：

```
EventLog.WriteEntry("TestClass", "Before the try", EventLogEntryType.Information);
try
{
    EventLog.WriteEntry("TestClass", "In the try", EventLogEntryType.Information);
    Int32.Parse("abc");
}
catch (Exception ex)
{
    EventLog.WriteEntry("TestClass", ex.Message, EventLogEntryType.Error);
} 
```

`OnStart`出于某种原因，如果我在调试模式下运行它并在方法上设置一个断点并使用`F11`. 但是，如果我删除所有断点并运行它，我不会在我的**WADWindowsEventLogsTable**中看到任何 EventLog 条目。所以这对我来说似乎是一个时间问题......有谁知道我的代码为什么会执行这种行为？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:31:56.470

问题在于`EventLog.WriteEntry()`方法。我使用源“TestClass”作为 EventLog 源。但是，我从未使用启动任务创建此源，并且由于权限不足，它无法记录我的条目。

所以解决方案：使用启动任务创建自己的源或使用跟踪消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:12:08.130

尝试将您的`TestClass`创作[`RoleEntryPoint.OnStart()`](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx)从[`RoleEntryPoint.Run()`](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx).

```
public override void Run() {
  TestClass test = new TestClass();
  base.Run();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:01:33.360

将其部署到 Azure 时，该角色是否实际启动，还是只是在初始化和忙碌之间循环？

如果确实如此，则问题与时间有关。项目会定时从实例传输到 Azure 存储：

```
diagConfig.WindowsEventLog.ScheduledTransferPeriod = TimeSpan.FromMinutes(1D); 
```

如果实例在达到该计时器之前重新启动，则不会将任何内容传输到您的表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T10:37:44.260

1.  您需要确保让应用程序运行超过 1 分钟。
2.  您需要验证以下设置是否已关闭（这可能会导致日志最终位于与您预期不同的位置，更多信息： http: [//michaelcollier.wordpress.com/2012/04/ 02/where-is-my-windows-azure-diagnostics-data/](http://michaelcollier.wordpress.com/2012/04/02/where-is-my-windows-azure-diagnostics-data/)）：

![在此处输入图像描述](../Images/66f2560322f619b2e3d76dc700f1a23a.png)

# php - 区分 PHP 中的两个会话

> ID：10735401
> 
> 赞同：1
> 
> 时间：2012-05-24T10:11:21.187
> 
> 标签：php, session

我尝试通过以下方式在本地主机上为其中一个网站进行编码。说本地主机/ abc：

```
<?php
session_start();
$_SESSION['name']=$row['name']
?> 
```

输出很好。但是当相同的代码用于同一本地主机上的另一个网页时，请说 localhost/xyz。然后名字之间就出现了歧义。好像我需要区分 xyz 和 abc 的会话。

所以我尝试了这个：

```
<?php
session_id(226);
session_name(veer);
session_start();
.
.
.//connection with database and all
.
$_SESSION['name']=$row['name'];
echo($_SESSION['name']);
?> 
```

当另一台机器通过同一服务器登录时，该机器可以访问我创建的会话以访问同一网页。

有什么解决办法。或者如何区分两个会话。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:45:24.173

简而言之……当您使用同一浏览器实例访问同一 Web 服务器上的两个不同站点时，您访问的是服务器的同一内存区域。因此

`http://localhost/xyz`并且`http://localhost/abc`指的是同一个站点 localhost，因此您不会启动另一个会话，`session_start()`而是恢复它。您也可以像[Jon](https://stackoverflow.com/a/10735542/608624)所说的那样创建虚拟主机，但为了测试，我猜您是这样，只需使用不同的浏览器。

此外，您不能正常在不同的机器上共享会话，所以我认为这是您的逻辑错误。或者尝试

```
session_start();
echo (session_id()); 
```

在页面顶部，查看您是否正在开始或恢复我认为您没有的同一会话。我认为您的页面在不同的会话中存储了相同的数据，您被误认为是同一会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:08:46.053

`session_regenerate_id();`在第二个文件（xyz）中使用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:15:49.750

这个？

```
<?php
session_start();
if (!isset($_SESSION['xyz'])) { $_SESSION['xyz'] = array(); }
$_SESSION['xyz']['name'] = $row['name'];
?> 
```

有时，我只是在会话密钥示例前面加上前缀，而不是执行上述操作： $_SESSION['xyz_name']; 在我意识到我的 CPanel 已经使用了一些自己的会话导致我的冲突之后，我这样做了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:20:30.783

从同一个用户代理到同一个 Web 服务器的请求将共享同一个会话，除非显式配置取决于您的确切服务器设置。

通常会避免这个问题，因为“其他网页”实际上会完全位于另一个域上，因此不会共享会话 cookie（以及扩展会话数据）。如果您想独立运行单独的应用程序，这也是您应该做的`localhost`：在单独的内部域上设置单独的虚拟主机。

您也可以纯粹在代码中解决问题，方法是不`$_SESSION`直接使用存储数据，而是使用基于某些差异因素的子键，例如`$_SESSION['SCRIPT_NAME']`. 一个非常简单的例子：

```
$sessionKey = "default";
if (strpos($_SESSION['SCRIPT_NAME'], "dir1/")) {
    $sessionKey = "dir1";
}
else if (strpos($_SESSION['SCRIPT_NAME'], "dir2/")) {
    $sessionKey = "dir2";
}

$_SESSION[$sessionKey]['mydata'] = 'foo'; 
```

**然而，最后一个是一个非常不雅的解决方案，我不推荐。**

# c# - Selenium 在使用 firefoxdriver 时出现 IPv6 问题

> ID：10735404
> 
> 赞同：5
> 
> 时间：2012-05-24T10:11:39.923
> 
> 标签：c#, selenium, ipv6

我正在尝试使用 Selenium 在 Firefox 中驱动一些网络测试，但是当我这样做时

```
FirefoxDriver _driver = new FirefoxDriver(); 
```

我得到了这个例外

> 使用了与请求的协议不兼容的地址 [::1]:7055

这似乎是 selenium 无法解决的某种 IPv6 与 IPv4 问题。但是我需要解决它。在我的以太网上禁用 IPv6 没有任何区别。我还能尝试什么？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:50:14.080

我在这里做了一些假设，但这看起来像是我在连接到本地主机上的 URL 时在 Windows 上使用 Selenium 时遇到的问题。该问题可能是由于 localhost 在 Windows 2008 上解析为 ::1 而不是 127.0.0.1。

如果是这种情况，请将行添加 `127.0.0.1 localhost` 到 C:\Windows\System32\drivers\etc\hosts

# c# - C# 无法反序列化数据表

> ID：10735406
> 
> 赞同：2
> 
> 时间：2012-05-24T10:11:43.800
> 
> 标签：c#, datatable, deserialization, assembly-resolution, binary-deserialization

我有一个客户端/服务器项目，我正在尝试通过套接字将 DataTable（从 TableAdapter 中提取）从服务器发送到客户端。我的服务器命名空间是 srvCentral，我的客户端是 appClient。当我尝试在客户端反序列化 DataTable 时，它​​会抛出一个序列化异常，提示无法找到程序集 'srvCentral，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null' svchost 挂起并强制我关闭，并使用这样的活页夹：

```
sealed class AllowAllAssemblyVersionsDeserializationBinder : SerializationBinder
{
    public override Type BindToType(string assemblyName, string typeName)
    {
        Type typeToDeserialize = null;

        String currentAssembly = Assembly.GetExecutingAssembly().FullName;

        // In this case we are always using the current assembly
        assemblyName = currentAssembly;

        // Get the type using the typeName and assemblyName
        typeToDeserialize = Type.GetType(String.Format("{0}, {1}",
                                         typeName, assemblyName));

        return typeToDeserialize;
    }
} 
```

异常仍然存在......难道不是假设 DataTable 在任何地方都可以反序列化吗？我究竟做错了什么？

我的序列化代码是：

```
public byte[] Serializar(Object item)
{
    BinaryFormatter formatter = new BinaryFormatter();
    MemoryStream ms = new MemoryStream();
    formatter.Serialize(ms, item);
    return ms.ToArray();
}

public Object Deserializar(byte[] buffer)
{
    BinaryFormatter formatter = new BinaryFormatter();
    MemoryStream ms = new MemoryStream(buffer);

    formatter.AssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple;

    formatter.Binder = new AllowAllAssemblyVersionsDeserializationBinder();

    Object a = formatter.Deserialize(ms);

    return a;
}

sealed class AllowAllAssemblyVersionsDeserializationBinder : SerializationBinder
{
    public override Type BindToType(string assemblyName, string typeName)
    {
        Type typeToDeserialize = null;

        String currentAssembly = Assembly.GetExecutingAssembly().FullName;

        // In this case we are always using the current assembly
        assemblyName = currentAssembly;

        // Get the type using the typeName and assemblyName
        typeToDeserialize = Type.GetType(String.Format("{0}, {1}",
                                         typeName, assemblyName));

        return typeToDeserialize;
    }
} 
```

**经过一番挖掘，我已经解决了这个问题；**

这不是解决问题的更好方法，而是避免问题的简单方法。对于小事来说就足够了。如果您只想从表中检索数据以显示内容，请使用此选项。

```
namespace YourLibrary
{
[Serializable]
public class Tabela: ISerializable
{
    protected ArrayList colNames;
    protected ArrayList colTypes;
    protected ArrayList dataRows;

    public Tabela()
    {

    }

    public Tabela (DataTable dt)
    {
        colNames = new ArrayList();
        colTypes = new ArrayList();
        dataRows = new ArrayList();
        // Insert column information (names and types)
        foreach(DataColumn col in dt.Columns)
        {
            colNames.Add(col.ColumnName); 
            colTypes.Add(col.DataType.FullName);   
        }

        // Insert rows information
        foreach(DataRow row in dt.Rows)
            dataRows.Add(row.ItemArray);
    }

    public Tabela(SerializationInfo info, StreamingContext context)
    {
        colNames = (ArrayList)info.GetValue("colNames",typeof(ArrayList));
        colTypes = (ArrayList)info.GetValue("colTypes",typeof(ArrayList));
        dataRows = (ArrayList)info.GetValue("dataRows",typeof(ArrayList));

    }

    void ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue("colNames", colNames);
        info.AddValue("colTypes", colTypes);
        info.AddValue("dataRows", dataRows);
    }

    public DataTable GenerateDataTable()
    {
        DataTable dt = new DataTable();

        // Add columns
        for(int i=0; i<colNames.Count; i++)
        {
            DataColumn col = new DataColumn(colNames[i].ToString(), 
                Type.GetType(colTypes[i].ToString() ));     
            dt.Columns.Add(col);
        }

        // Add rows
        for(int i=0; i<dataRows.Count; i++)
        {
            DataRow row = dt.NewRow();
            row.ItemArray = (object[]) dataRows[i];
            dt.Rows.Add(row);
        }

        dt.AcceptChanges();
        return dt;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T10:20:42.047

> 我究竟做错了什么？

叹; 1：使用`DataTable`和 2：使用`BinaryFormatter`

让我们先看后者；`BinaryFormatter`是一个以类型为中心的序列化器。实际上，如果您只是使用`DataTable`而不是*类型化* `DataTable`的子类，那么您可能会侥幸逃脱，但`BinaryFormtter`最终希望每一端都***具有完全相同***的类型。而你***没有那个***。即使你这样做了，每次你对管道的一端进行版本控制时，事情都会变得有点……狡猾（除非你在这方面投入额外的精力）。

作为临时修复，对于这一步，只需使用`DataTable`而不是类型化的`DataTable`子类，它可能会起作用。

然而，扔掉`DataTable`也是一件*非常*尴尬的事情 - 相当笨拙且用途如此普遍。如果您***需要***它提供的内容（特别是动态列），那么 ....*可能会一推*，但在大多数情况下，使用基本的 POCO/DTO 模型会更可取。这也更容易在客户端/服务器边界上表达，包括大多数 IPC 工具。例如，下面的 POCO/DTO 类（或它们的列表）非常友好：

```
public class Order {
    public int OrderID {get;set;}
    public string Reference {get;set;}
    ...
} 
```

就个人而言，我强烈建议您考虑切换到更简单的基于类的模型，使用对特定类型不挑剔的序列化程序；`XmlSerializer`或`JavascriptSerializer`工作良好。如果您需要小/高效的数据，那么 protobuf-net 也值得一看。所有这些都在套接字上工作得很好，也是。

# sql - sql server：在必要时在外键上创建索引

> ID：10735407
> 
> 赞同：22
> 
> 时间：2012-05-24T10:11:46.640
> 
> 标签：sql, sql-server, database, tsql, sql-server-2005

我有很多带有外键的表，有些有索引，而有些则没有。所有外键都以名为`FK_<name of the foreign key>`的索引命名`IX_<name of the foreign key>`。

考虑到外键的列基数，是否有一些好的做法来创建（或不）索引？这可以编写为 T-SQL 命令吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-24T10:20:44.350

不管它们是通过 T-SQL 脚本还是通过设计器创建的。您的问题有点模棱两可，所以我不确定您是否还问是否可以索引所有外键。但是，如果您这样做，则应在查询中经常引用的列上创建索引，并且您可以执行以下操作来提高性能：

*   运行数据库调整向导，它将提供改进摘要并推荐索引。

*   索引所有外键并运行执行计划（查看查询执行得更快还是更慢）。

要通过以下方式创建索引`T-SQL`：

```
CREATE INDEX IX_INDEX_NAME
ON Table (FieldName); 
```

要获取所有外键的列表：

```
SELECT f.name AS ForeignKey, 
 OBJECT_NAME(f.parent_object_id) AS TableName, 
 COL_NAME(fc.parent_object_id, fc.parent_column_id) AS ColumnName, 
 OBJECT_NAME (f.referenced_object_id) AS ReferenceTableName, 
 COL_NAME(fc.referenced_object_id, fc.referenced_column_id) AS ReferenceColumnName 
FROM sys.foreign_keys AS f 
INNER JOIN sys.foreign_key_columns AS fc 
ON f.OBJECT_ID = fc.constraint_object_id 
```

要生成跨所有外键应用索引的脚本，您可以这样做：

```
SELECT 'CREATE INDEX [IX_' + f.name + '] ON ' + OBJECT_NAME(f.parent_object_id) + '(' + COL_NAME(fc.parent_object_id, fc.parent_column_id) + ')]'
FROM sys.foreign_keys AS f 
INNER JOIN sys.foreign_key_columns AS fc 
ON f.OBJECT_ID = fc.constraint_object_id 
```

[http://msdn.microsoft.com/en-us/library/ms188783.aspx](http://msdn.microsoft.com/en-us/library/ms188783.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-06T13:51:10.690

大家辛苦了，很有帮助。

添加包含表模式的增强功能。如果您愿意，也可以排除 FK 名称（我倾向于不在小表上添加索引）

```
SELECT
    * 
FROM 
(
    SELECT TOP 99 PERCENT
            f.name AS ForeignKeyName

        , s.name 
                + '.'
                + OBJECT_NAME(f.parent_object_id) 
                + '.'
                + COL_NAME(fc.parent_object_id, fc.parent_column_id) 
            ParentTable

        , referencedSchema.name
                + '.'
                + OBJECT_NAME (f.referenced_object_id)
                + '.'
                + COL_NAME(fc.referenced_object_id, fc.referenced_column_id)
            ReferencedTable

        , 'CREATE INDEX [IX_' + f.name + ']'
                + ' ON ' 
                    + '[' + referencedSchema.name + ']'
                    + '.'
                    + '[' + OBJECT_NAME(f.parent_object_id) + ']'
                    + '(' 
                        + COL_NAME(fc.parent_object_id, fc.parent_column_id) 
                    + ')'
            CreateIndexSql          

    FROM 
        sys.foreign_keys AS f 
        INNER JOIN sys.foreign_key_columns AS fc ON f.OBJECT_ID = fc.constraint_object_id
        inner join sys.schemas s on f.schema_id = s.schema_id

        inner join sys.tables referencedTable on f.referenced_object_id = referencedTable.object_id
        inner join sys.schemas referencedSchema on referencedTable.schema_id = referencedSchema.schema_id

    ORDER BY
        2, 3, 1 
) a
where a.ParentTable not in (
    -- Add any exclusions here so you can forget about them
      ''
) 
```

# java - 如何使用一些外部文件管理器应用程序 Android 获取文件路径？

> ID：10735409
> 
> 赞同：0
> 
> 时间：2012-05-24T10:11:49.137
> 
> 标签：java, android

是否可以从 sd 卡中获取文件，该文件是使用某些第三个应用程序（文件管理器）选择的？

我的意思是我有按钮打开文件的活动，当用户按下打开时，它会向他显示使用其他应用程序打开文件的建议，当他选择打开时，我会通过该文件的路径返回我的活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:22:10.483

用这个

```
button.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(
                    Intent.createChooser(intent, "Select Picture"),
                    SELECT_PICTURE);
        }
    }); 
```

并在您的活动中添加两种方法

```
 public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE) {

            Uri selectedImageUri = data.getData();
            String s1 = data.getDataString();
            //String s1 = selectedImageUri.getPath();
            Log.e("GetPath",s1);
            //s1 = s1.replaceAll("file://","");
            //Uri a = Uri.fromParts(s1,null,null);
            Log.e("OK",""+selectedImageUri);
            //Log.e("A",""+a);

            selectedImagePath = getPath(selectedImageUri);
            if(selectedImagePath==null && s1 != null)
            {
                selectedImagePath = s1.replaceAll("file://","");
            }
        //  selectedImagePath = getPath(a);

            Intent intent = new Intent(this, PhotoEditorActivity.class);
            intent.putExtra("path", selectedImagePath);
            startActivity(intent);
            finish();

        }
                  }
               }

///////////////////////////////////
   public String getPath(Uri uri) {

    try{
    String[] projection = { MediaStore.Images.Media.DATA };
    Log.e("OK 1",""+projection);
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    Log.e("OK 2",""+cursor);
    if(cursor==null)
    {
        return null;

    }
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    Log.e("OK 3",""+column_index);
    cursor.moveToFirst();
    Log.e("OK 4",""+cursor.getString(column_index));
    return cursor.getString(column_index);
    }
    catch(Exception e)
    {
        Toast.makeText(PhotoActivity.this, "Image is too big in resolution please try again", 5).show();
        return null;
    }

} 
```

并将这个 int 添加为类成员

```
 private static final int SELECT_PICTURE = 1; 
```

享受编码。。

# java - Java如何从代码中运行另一个.jar程序以响应按钮单击

> ID：10735412
> 
> 赞同：0
> 
> 时间：2012-05-24T10:12:09.790
> 
> 标签：java

我编写了一个 Java 程序，它应该打开另一个程序（这是一个 .jar 文件）。如果我在程序的主类中使用此代码，则一切正常：

```
File logFile = new File("./ePaymentUpdater.jar");
Desktop.getDesktop().open(logFile.getCanonicalFile());
//or
Runtime.getRuntime().exec("java -jar ePaymentUpdater.jar"); 
```

但是，如果我在事件中粘贴相同的代码以响应用户单击按钮，它就无法正常工作：程序似乎在运行，因为它创建了一个应有的文件夹（此代码位于主被调用程序的类），但它没有显示它应该显示的 jFrame

似乎我无法从另一个程序的框架内打开一个框架......

这是我的主要课程：

```
package prove_idiote;
import java.awt.Desktop;
import java.io.File;
import javax.swing.JOptionPane;

public class Main {

    public static void main(String[] args) {  

//        try {
//            Runtime.getRuntime().exec("java -jar ePaymentUpdater.jar");
//        } catch (Exception e) {            
//            System.out.println(e);
//        }

        Tester tester = new Tester();
        tester.setVisible(true);       
    }   
} 
```

这是我的按钮事件：

```
private void ExecuteActionPerformed(java.awt.event.ActionEvent evt) {                                         
    try {

        JOptionPane.showMessageDialog(null, "before" ,"ATTENZIONE!",JOptionPane.WARNING_MESSAGE);

        Runtime.getRuntime().exec("java -jar ePaymentUpdater.jar");

        JOptionPane.showMessageDialog(null, "after" ,"ATTENZIONE!",JOptionPane.WARNING_MESSAGE);

    } catch (Exception e) {            
        System.out.println(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:22:47.117

您可以使用 java 的 Runtime 类并从那里处理您的 jar，如下所示：

```
Runtime.getRuntime().exec("java -jar ./ePaymentUpdater.jar") 
```

Where`Runtime`在运行时处理所有进程并一一执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:49:23.513

我终于找到了问题（和解决方案）在被调用的 .jar 中缺少一些库（我将两个 jar 放在同一个文件夹中，所以它们共享相同的库，但其中一个使用的库是失踪）

感谢提示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:15:23.970

```
Runtime.getRuntime().exec("java -jar yourjarfile") 
```

# java - ProcessBuilder 在 Mac 上给出“没有这样的文件或目录”，而 Runtime().exec() 工作正常

> ID：10735415
> 
> 赞同：40
> 
> 时间：2012-05-24T10:12:22.340
> 
> 标签：java, playframework, runtime.exec, processbuilder

我有一个在 Playframework 上运行的应用程序，它需要对一些视频文件进行编码。我用了

```
Process pr = Runtime.getRuntime().exec(execCode) 
```

为此（并且它工作得很好），但由于我需要输出流和错误流，我正在尝试使用 ProcessBuilder （也推荐）。

但我无法让它工作（在 MacBook 上测试）。Runtime 方法和 ProcessBuilder 之间有根本区别吗？

这是我的 ProcessBuilder 代码（完全相同的代码替换为`Runtime.getRuntime().exec()`）

```
 String execCode = "/opt/local/bin/ffmpeg -i file [...]"; 
    ProcessBuilder pb = new ProcessBuilder(execCode);
    pb.redirectErrorStream(true);
    pb.directory(new File("/Users/[...]/data/"));
    Process pr = pb.start(); 
```

这是控制台输出：

```
11:00:18,277 ERROR ~ There was a problem with with processing MediaFile[13] with error Error during coding process: Cannot run program "/opt/local/bin/ffmpeg -i /Users/[...]/data/media/1/1/test.mov [...] /Users/[...]/data/media/1/13/encoded.mp3" (in directory "/Users/[...]/data"): error=2, No such file or directory
java.lang.Exception: Error during coding process: Cannot run program "/opt/local/bin/ffmpeg -i /Users/Luuk/Documents/Java/idoms-server/data/media/1/1/test.mov -y -f mpegts -acodec libmp3lame -ar 48000 -b:a 64000 -vn -flags +loop -cmp +chroma -partitions +parti4x4+partp8x8+partb8x8 -subq 5 -trellis 1 -refs 1 -coder 0 -me_range 16 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -bt 200k -maxrate -1 -bufsize -1 -rc_eq 'blurCplx^(1-qComp)' -qcomp 0.6 -qmin 10 -qmax 51 -qdiff 4 -level 30  -g 30 -async 2 /Users/Luuk/Documents/Java/idoms-server/data/media/1/13/encoded.mp3" (in directory "/Users/Luuk/Documents/Java/idoms-server/data"): error=2, No such file or directory
    at logic.server.MediaCoder.encodeMediaFile(MediaCoder.java:313)
    at logic.server.MediaCoder.doJob(MediaCoder.java:54)
    at play.jobs.Job.doJobWithResult(Job.java:50)
    at play.jobs.Job.call(Job.java:146)
    at play.jobs.Job$1.call(Job.java:66)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.io.IOException: Cannot run program "/opt/local/bin/ffmpeg -i /Users/Luuk/Documents/Java/idoms-server/data/media/1/1/test.mov -y -f mpegts -acodec libmp3lame -ar 48000 -b:a 64000 -vn -flags +loop -cmp +chroma -partitions +parti4x4+partp8x8+partb8x8 -subq 5 -trellis 1 -refs 1 -coder 0 -me_range 16 -keyint_min 25 -sc_threshold 40 -i_qfactor 0.71 -bt 200k -maxrate -1 -bufsize -1 -rc_eq 'blurCplx^(1-qComp)' -qcomp 0.6 -qmin 10 -qmax 51 -qdiff 4 -level 30  -g 30 -async 2 /Users/Luuk/Documents/Java/idoms-server/data/media/1/13/encoded.mp3" (in directory "/Users/Luuk/Documents/Java/idoms-server/data"): error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at logic.server.MediaCoder.encodeMediaFile(MediaCoder.java:189)
    ... 11 more
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:53)
    at java.lang.ProcessImpl.start(ProcessImpl.java:91)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 12 more 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-24T10:18:06.207

您需要将参数指定为单独的`Strings`：

```
new ProcessBuilder("cmd", "arg1", "arg2", ...); 
```

构造函数接受`String`、`varargs`和`List<String>`。

请参阅[ProcessBuilder 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-27T08:40:23.503

如果您不想每次都将命令分解为令牌，则可以尝试

```
new ProcessBuilder("sh", "-c", execCode); // Linux / Unix terminal 
```

或者

```
new ProcessBuilder("cmd", "/c", execCode); // Windows command line 
```

# javascript - 如何使用 JavaScript 获取元素/组件名称？

> ID：10735416
> 
> 赞同：1
> 
> 时间：2012-05-24T10:12:23.230
> 
> 标签：javascript, asp.net

我有一个网页，其中包含 ASP.NET 面板和获取页面中所有组件的 JavaScript：

```
var items = Sys.Application.getComponents(); 
```

我需要获取 items 变量中每个元素的名称/ID。我尝试了以下代码：（但它不起作用）

```
for (var item in items) 
{
      alert(item.name);
} 
```

“项目”的哪个属性包含名称/ID？我怎样才能修改上面的代码来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:15:34.073

请改用`get_name()`and`get_id()`函数。

```
var items = Sys.Application.getComponents() ;
for( var i = 0 ; i < items.length; i++ ) {
    var item = items[i];
    var id   = item.get_id();
    var name = item.get_name();
} 
```

[http://ajax.asp.net/docs/ClientReference/Sys/ApplicationClass/SysApplicationGetComponentsMethod.aspx](http://ajax.asp.net/docs/ClientReference/Sys/ApplicationClass/SysApplicationGetComponentsMethod.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:13:47.660

没有任何。`item`是您想要的关键/属性`items[item].name`。

但是，如果`items`是一个数组，使用`for..in`它来迭代它是完全不合适的。在这种情况下，在循环体内使用`for(var i = 0; i < items.length; i++)`and 。`var item = items[i]`

# oracle - Oracle Query Subselect with order by

> ID：10735417
> 
> 赞同：1
> 
> 时间：2012-05-24T10:12:24.680
> 
> 标签：oracle, sql-order-by, greatest-n-per-group, subquery

我通常使用 MS SQL，并且是 oracle 的新手。

`ORDER BY`当我在子查询中使用该语句时，我遇到了 oracle 驱动程序问题。

示例（我的真实陈述要复杂得多，但我怀疑这对我的问题很重要 - 如果需要，我可以发布它）：

```
SELECT col1
     , col2
     , (SELECT colsub FROM subtbl WHERE idsub = tbl.id AND ROWNUM=1 ORDER BY coldate) col3
FROM tbl 
```

如果我做这样的构造，我会得到一个 odbc 驱动程序错误：ORA-00907：缺少右括号（从德语翻译，所以括号可能是其他词 :)）。

如果我删除`ORDER BY coldate`一切正常。我找不到任何原因，所以我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:50:29.230

尝试：

```
select
  col1,
  col2,
  colsub
from(
  select
    col1   ,
    col2   ,
    coldate,
    max(coldate) over (partition by st.idsub) max_coldate
  from
    tbl    t,
    subtbl st
  where
    st.idsub = t.id)
where
  coldate = max_coldate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:38:02.867

你做错了什么很清楚。您在子查询中使用 order by。在子查询中使用 order by 没有任何意义，那么为什么要这样做呢？此外，您在始终返回 1 行的子查询上使用 order by。这也没有任何意义。

如果您希望对查询结果进行排序，请在最高级别使用 order by。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T10:52:55.003

以这种方式编写 ROWNUM 和 ORDER BY 没有任何意义，因为 ORDER BY 是在 WHERE 子句之后评估的，这意味着它在这种情况下无效。[这个问题](https://stackoverflow.com/questions/4721620/rownum-in-oracle)给出了一个例子。

这也变得有点复杂，因为如果嵌套太深，很难将子查询连接回主查询。

下面的查询不一定有效，因为您不能以这种方式在 tbl 和 subtbl 之间加入。

```
SELECT 
  col1,
  col2,
  (
    select colsub
    from  (
      SELECT colsub 
       FROM subtbl 
       WHERE idsub = tbl.id
       order by coldate
    )
    where rownum = 1
  ) as col3
FROM tbl 
```

因此，您需要使用某种分析函数，如下例所示：

```
SELECT 
  col1,
  col2,
  (SELECT max(colsub) keep (dense_rank first order by coldate) as colsub
   FROM subtbl 
   WHERE idsub = tbl.id
   group by idsub
) col3
FROM tbl 
```

`FIRST`分析函数比它需要的复杂，但它会完成工作。

另一种选择是使用`ROW_NUMBER`也可以解决问题的分析函数。

```
SELECT 
  col1,
  col2,
  (select colsub
   from (
     SELECT 
       idsub, 
       row_number() over (partition by idsub order by coldate) as rown,
       colsub
   FROM subtbl a 
   ) a
   WHERE a.idsub = tbl.id
   and a.rown = 1
) col3
FROM tbl 
```

# javascript - 如何在 jquery 选项卡的当前活动选项卡上触发（“单击”）

> ID：10735423
> 
> 赞同：11
> 
> 时间：2012-05-24T10:12:54.797
> 
> 标签：javascript, jquery, events, jquery-ui-tabs, eventtrigger

我有一个选项卡式屏幕，并希望在提交表单并且返回有效后触发对所选选项卡的单击。这是html的一部分：

```
<ul id="tabUL" class="tabs js-tabs same-height">
    <li class="current">
        <a class="tabLink" href="#tabProducts" data-url="/bla/bla">Products</a>
    </li>
</ul> 
```

我的成功命令是：

```
success: function(data, textStatus, XMLHttpRequest) {
    $('#tabUL').find('li.current a').trigger('click');
} 
```

这似乎不起作用......感谢任何帮助:)问候安德里亚

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-16T22:31:34.440

尝试使用`a[href=""]`选择器：

```
$('#tabUL a[href="#tabProducts"]').trigger('click'); 
```

我整理了一个[jsfiddle 演示](http://jsfiddle.net/webchemist/G4bXt/)来展示它的实际效果，以及如何选择性地隐藏其他选项卡，因为通常当我以编程方式强制选项卡时，它要求在解锁其他选项卡之前在初始选项卡上输入缺少的强制性信息......

**编辑** 这里是 jsfiddle 的内容：

HTML

```
<div id="tabs">
  <ul>
    <li><a href="#tab0">Address</a></li>
    <li><a href="#tab1">Shipping</a></li>
    <li><a href="#tab2">Parts</a></li>
    <li><a href="#tab3">Datasheets</a></li>
  </ul>
  <div id="tab0">
        <h1>This is the first tab (0)</h1>
  </div>
  <div id="tab1">
     <h1>This is the second tab (1)</h1>
  </div>
  <div id="tab2">
     <h1>This is the third tab (2)</h1>
  </div>
  <div id="tab3">
     <h1>This is the fourth tab (3)</h1>
  </div>
</div>
<br/>
Select the
<select id="tabSelect">
  <option value="0">1st</option>
  <option value="1">2nd</option>
  <option value="2">3rd</option>
  <option value="3">4th</option>
</select>Tab and
<input type="checkbox" id="tabHide" checked="checked" /> Lock the Others 
```

jQuery

```
$(document).ready(function () {
  $('#tabs').tabs();
  $('#tabSelect').change(function () {
        //pass empty array to unlock any locked tabs
    $('#tabs').tabs({disabled: []}).find('a[href="#tab' + $(this).val() + '"]').trigger('click');

    if ($('#tabHide').prop('checked')) {
      //hide will be an array like [0,2,3]
      var hide = Array();
      $('#tabs li').not('.ui-tabs-active').each(function () {
        hide.push($(this).index());
      });      
      $('#tabs').tabs({disabled: hide});
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T10:21:20.360

如果您想以编程方式重新加载选项卡，那么我建议使用 Jquery Tab API 实用程序，如下所示：这使第一个选项卡处于活动状态，然后激活第二个选项卡，非常简单，并且还会引发通常在您直接单击时引发的事件。

```
$( "#myTabs" ).tabs( "option", "active", 0 );

$( "#myTabss" ).tabs( "option", "active", 1 ); 
```

您还可以捕获如下所示的选项卡活动事件以执行任何操作

```
$( "#myTabs" ).on( "tabsactivate", function( event, ui ) {
    // your custom code on tab click
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:24:01.493

而不是试图触发点击事件本身（我认为在这种情况下不可能以编程方式调用用户事件），我建议您触发必须在点击事件上调用的函数，您可能需要查看[triggerHandler](http://api.jquery.com/triggerHandler/)

# sql - 我们可以通过这种方式在动态游标中使用批量删除吗？

> ID：10735424
> 
> 赞同：0
> 
> 时间：2012-05-24T10:12:55.983
> 
> 标签：sql, plsql, oracle10g, oracle11g

我们可以使用 Execute immediate 进行批量删除，例如（对于游标）

```
forall i in rowid.FIRST .. rowid.LAST
Execute Immediate 'DELETE table_name '||PARTIION_NAME||'where rowid =rowid(m)'; 
```

有没有其他方法可以完成这项工作......？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:00:01.337

我真的不明白你想用 做什么`||PARTIION_NAME||`，但你可以做这样的事情：

```
DECLARE
  type rowid_tab is table of rowid;
  rowids rowid_tab;

  cursor c is select rowid from table_name where <some condition>;
BEGIN
  open c;
  fetch c bulk collect into rowids;
  close c;

  -- here is where the "real thing" starts
  forall i in rowids.first .. rowids.last 
    execute immediate 'delete table_name where rowid = :1' using rowids(i);

  commit;  

END; 
```

但我必须问 - 为什么？

# c# - C# Ninject WithConstructorArgument 导致 ActivationException

> ID：10735425
> 
> 赞同：0
> 
> 时间：2012-05-24T10:13:00.560
> 
> 标签：c#, .net, wcf, ninject

继我在[这里](https://stackoverflow.com/questions/10649261/ninject-bind-constructor-argument-to-property-of-other-object)遇到的另一个问题之后，我有一个`MainConfig`对象，我想注入该对象的某些属性而不是实际`MainConfig`对象本身。摘自我的模块`Load`方法：

```
Bind<IConfig>()
    .ToMethod<IConfig>(ctx => MainConfig.Load())
    .InSingletonScope();

var config = Kernel.Get<IConfig>(); //this returns a fully-loaded IConfig, so I know this works

Bind<IProcessingBuffer>()
    .To<ProcessingBuffer>()
    .InSingletonScope()
    .WithConstructorArgument("processingInterval",
                             ctx => ctx.Kernel.Get<IConfig>().WinService.DataProcessingInterval); 
```

的构造函数`ProcessingBuffer`是：

```
public ProcessingBuffer(int processingInterval, IProcessingResults procResults) 
```

但是，当我尝试启动我的应用程序时，我得到了一个，`ActivationException`因为`processingInterval`它没有被注入到`ProcessingBuffer`. 例外是：

```
Ninject.ActivationException was unhandled
  Message=Error activating int
No matching bindings are available, and the type is not self-bindable.
Activation path:
  5) Injection of dependency int into parameter processingInterval of constructor of type ProcessingBuffer
  4) Injection of dependency ProcessingBuffer into parameter procBuffer of constructor of type MyCompanyDataService
  3) Injection of dependency MyCompanyDataService into parameter instance of constructor of type NinjectServiceHost{MyCompanyDataService}
  2) Injection of dependency NinjectServiceHost{MyCompanyDataService} into parameter dataHost of constructor of type MyCompanyWinService
  1) Request for MyCompanyWinService

Suggestions:
  1) Ensure that you have defined a binding for int.
  2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.
  3) Ensure you have not accidentally created more than one kernel.
  4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
  5) If you are using automatic module loading, ensure the search path and filters are correct.

  Source=Ninject
  StackTrace:
       at Ninject.KernelBase.Resolve(IRequest request) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 362
       at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent) in c:\Projects\Ninject\ninject\src\Ninject\Planning\Targets\Target.cs:line 197
       at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent) in c:\Projects\Ninject\ninject\src\Ninject\Planning\Targets\Target.cs:line 165
       at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 114
       at Ninject.Activation.Providers.StandardProvider.<>c__DisplayClass4.<Create>b__2(ITarget target) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 96
       at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
       at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
       at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
       at Ninject.Activation.Providers.StandardProvider.Create(IContext context) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 96
       at Ninject.Activation.Context.Resolve() in c:\Projects\Ninject\ninject\src\Ninject\Activation\Context.cs:line 157
       at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 386
       at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
       at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
       at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent) in c:\Projects\Ninject\ninject\src\Ninject\Planning\Targets\Target.cs:line 197
       at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent) in c:\Projects\Ninject\ninject\src\Ninject\Planning\Targets\Target.cs:line 165
       at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 114
       at Ninject.Activation.Providers.StandardProvider.<>c__DisplayClass4.<Create>b__2(ITarget target) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 96
       at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
       at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
       at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
       at Ninject.Activation.Providers.StandardProvider.Create(IContext context) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 96
       at Ninject.Activation.Context.Resolve() in c:\Projects\Ninject\ninject\src\Ninject\Activation\Context.cs:line 157
       at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 386
       at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
       at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
       at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent) in c:\Projects\Ninject\ninject\src\Ninject\Planning\Targets\Target.cs:line 197
       at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent) in c:\Projects\Ninject\ninject\src\Ninject\Planning\Targets\Target.cs:line 165
       at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 114
       at Ninject.Activation.Providers.StandardProvider.<>c__DisplayClass4.<Create>b__2(ITarget target) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 96
       at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
       at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
       at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
       at Ninject.Activation.Providers.StandardProvider.Create(IContext context) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 96
       at Ninject.Activation.Context.Resolve() in c:\Projects\Ninject\ninject\src\Ninject\Activation\Context.cs:line 157
       at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 386
       at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
       at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
       at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent) in c:\Projects\Ninject\ninject\src\Ninject\Planning\Targets\Target.cs:line 197
       at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent) in c:\Projects\Ninject\ninject\src\Ninject\Planning\Targets\Target.cs:line 165
       at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 114
       at Ninject.Activation.Providers.StandardProvider.<>c__DisplayClass4.<Create>b__2(ITarget target) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 96
       at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
       at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
       at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
       at Ninject.Activation.Providers.StandardProvider.Create(IContext context) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\StandardProvider.cs:line 96
       at Ninject.Activation.Context.Resolve() in c:\Projects\Ninject\ninject\src\Ninject\Activation\Context.cs:line 157
       at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 386
       at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
       at System.Linq.Enumerable.<CastIterator>d__b1`1.MoveNext()
       at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
       at Ninject.ResolutionExtensions.Get[T](IResolutionRoot root, IParameter[] parameters) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 37
       at MyCompany.WinService.Program.Main(String[] args) in C:\Projects\MyProject\MyCompanyWinService\Program.cs:line 41
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

有什么方法可以确认我的`WithConstructorArgument`lambda 甚至被调用然后跟踪它？我已经下载了 Ninject 源代码，但我无法确定在哪里设置断点以找到使用我的回调的位置。

该应用程序是一个 Windows 服务，它使用 Ninject 3.0 和 Ninject.Extensions.Wcf 来承载 WCF TCP 服务。

编辑添加：如果我将`ProcessingBuffer`构造函数更改为获取整个`IConfig`对象并删除`WithConstructorArgument`调用，则该`IConfig`对象被成功注入并且我可以访问适当的属性。但是，我想摆脱注入整个`IConfig`对象以消除依赖关系，而只传递所需的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:46:17.970

你`MyCompanyDataService`的例子是`ProcessingBuffer`not `IProcessingBuffer`。因此，您的绑定不适用。

# android - 从 ImageView 获取可绘制

> ID：10735426
> 
> 赞同：3
> 
> 时间：2012-05-24T10:13:01.327
> 
> 标签：android, drawable, android-imageview

我目前正在构建一个在主视图上有 6 张图像的应用程序，它会从我的`drawable`文件夹中生成随机图像（洗牌）

**初始化卡组：**

```
public static void initDecks() {
    int m = 0;
    for (int i = 0; i < suites.length; i += 1) {
        for (int j = 0; j < regularCards.length; j += 1) {
            regularDeck[m++] = "drawablw/" + suites[i] + regularCards[j]
                    + ".jpg";
        }
    }
    m = 0;
    for (int i = 0; i < suites.length; i += 1) {
        for (int j = 0; j < trickCards.length; j += 1) {
            trickDeck[m++] = "drawable/" + suites[i] + trickCards[j]
                    + ".jpg";
        }
    }

    Collections.shuffle(Arrays.asList(regularDeck));
    Collections.shuffle(Arrays.asList(trickDeck));
} 
```

**洗牌：**

```
public static String[] getCards(int size) {
    String[] result = new String[size];
    for (int i = 0; i < size - 2; i += 1) {
        result[i] = regularDeck[i];
    }
    result[size - 1] = trickDeck[0];
    Collections.shuffle(Arrays.asList(result));
    return result;
} 
```

在我的主要活动中，我将卡片分配给视图，当用户点击它们时，我想知道图像是一张特技卡片还是一张普通卡片。

有没有办法找出被点击的卡片是否是一个技巧？像`if(image.getImageDrawable().equals(R.drawable.trick.jpg)`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:16:46.357

将可绘制对象的名称/ID 存储在您将其设置为 ImageView 的位置。因此，您的类/活动中始终有一个成员变量来保存当前图像标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:26:35.120

```
public static Integer getDrawableId(ImageView obj)
    throws SecurityException, NoSuchFieldException,
    IllegalArgumentException, IllegalAccessException, ClassNotFoundException {
        Field f = ImageView.class.getDeclaredField("mResource");
        f.setAccessible(true);
        Object out = f.get(obj);
        return (Integer)out;
} 
```

I found that the `Drawable` resource id is stored in `mResource` field in the `ImageView` object.

Notice that `Drawable` in `ImageView` may not always come from a resource id. It may come from a `Drawable` object or image Uri. In these cases, the `mResource` will reset to 0\. Therefore, do not rely on this much.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:45:52.783

请看一下这个链接

[获取 ImageView 中可绘制对象的 ID](https://stackoverflow.com/questions/4526585/imageview-drawable-id-in-android)

基本上，当您在 ImageView 中设置图像并从您需要的位置获取时，您可以在 ImageView 标记中设置 id。

# ios4 - -shouldAutorotateToInterfaceOrientation 相关消息

> ID：10735427
> 
> 赞同：1
> 
> 时间：2012-05-24T10:13:02.533
> 
> 标签：ios4, uiinterfaceorientation

这是关于 AutorotateToInterfaceOrientation 的一些奇怪的事情。

在调试器控制台中，我的一个视图控制器收到此消息：

***对于所有界面方向，视图控制器从 -shouldAutorotateToInterfaceOrientation: 返回 NO。它应该支持至少一个方向。***

但实际上，旋转效果很好。而且消息是错误的。这是 -shouldAutorotateToInterfaceOrientation 的代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return ([centerPoint autoRotateFlag]||(interfaceOrientation==centerPoint.userOrientation));
} 
```

并且要么 autoRotateFlag 简单地为真 (YES)，要么如果它不是 centerPoint.userOrientation，则已将其固定为四个可接受值之一。

这已经为我工作了很长时间，并且该应用程序仍然有效。我只是不知道这条消息是从哪里来的。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:23:18.373

通过在我的软件中添加一些跟踪，使用 NSLog；我意识到 shouldAutorotateToInterfaceOrientation 在调用 viewDidLoad 之前被调用了七次。

由于我的变量“autoRotateFlag”仅在通过 viewDidLoad 时才被初始化。这解释了我的问题。

不过我不得不承认，我并没有想到应该在 viewDidLoad 之前调用 shouldAutorotateToInterfaceOrientation。显然我错了。而且我仍然不完全理解所有这些方法的调用顺序。

# actionscript-3 - AS3 单行带条件句

> ID：10735430
> 
> 赞同：1
> 
> 时间：2012-05-24T10:13:11.450
> 
> 标签：actionscript-3, math, median

我怎样才能制作一个也有条件的单行返回线？例如，如果我想做一个“返回中位数”：

```
//assuming sorted input array
return ((inputArray.length % 2) && (inputArray[int(inputArray.length/2)] + inputArray[int(inputArray.length/2)+1]) / 2) || inputArray[int(inputArray.length/2)+1]; 
```

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:27:32.657

您应该使用三元运算符：

```
return (inputArray.length % 2 != 0) ? (inputArray[int(inputArray.length/2)] + inputArray[int(inputArray.length/2)+1]) / 2 : inputArray[int(inputArray.length/2)+1]; 
```

这相当于：

```
if (inputArray.length % 2 != 0) {
    return (inputArray[int(inputArray.length/2)] + inputArray[int(inputArray.length/2)+1]) / 2;
} else {
    return inputArray[int(inputArray.length/2)+1];
} 
```

如果你只想使用`&&`and `||`，你可以使用以下（这不是一个很好的编程风格）：

```
((inputArray.length % 2 != 0) || return inputArray[int(inputArray.length/2)+1]) && return (inputArray[int(inputArray.length/2)] + inputArray[int(inputArray.length/2)+1]); 
```

这相当于：

```
(condition || return value2) && return value1; 
```

因此，由于布尔运算符[的短路评估：](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

*   如果`condition`是`true`,`return value2`不会被评估并且`return value1`会被执行。
*   如果`condition`是`false`，`return value2`将被评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:52:41.230

我会选择一个更易读的版本，没有重复，但有一些变量。

```
var index:int = int(inputArray.length / 2);
var item1:Number = inputArray[index];
var item2:Number = inputArray[index + 1];
var median:Number = (item1 + item2) / 2;

return (inputArray.length % 2 != 0) ? median : item2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:19:54.163

请尝试修改条件：

```
return ((inputArray.length % 2) && (((inputArray[int(inputArray.length/2)] + inputArray[int(inputArray.length/2)+1]) / 2) || inputArray[int(inputArray.length/2)+1])); 
```

# javascript - 如何防止第一次点击执行

> ID：10735432
> 
> 赞同：0
> 
> 时间：2012-05-24T10:13:17.263
> 
> 标签：javascript

我正在编写一个 javascript 函数，该函数动态创建一个带有按钮的 iframe，如果按下该按钮可以删除它的 iframe。

这些是我的 javascript 函数：

```
 function createIframe (iframeName, width, height) {
    var iframe;
    if (document.createElement && (iframe = document.createElement('iframe'))) {
        iframe.name = iframe.id = iframeName;
        iframe.width = width;
        iframe.height = height;
        var connectIP = document.getElementById("ip").value;
        var connectPORT = document.getElementById("port").value;
        iframe.src = "http://"+connectIP+":"+connectPORT;
        document.body.appendChild(iframe);

        addElement(iframe.name);
    }
    return iframe;
}

function removeIframe(iframeName) {
    iframe = document.getElementById(iframeName);  
    if (iframe) { 
        var x=iframe.parentNode.removeChild(iframe) 
    }
}

function addElement(iframeName) {
    var butt = document.createElement('button');
    var butt_text = document.createTextNode('Remove');
    butt.appendChild(butt_text);
    butt.onclick = removeIframe(iframeName);
    document.body.appendChild(butt);
} 
```

问题是，当按钮创建时，onclick 函数会立即执行，而不仅仅是当用户按下它时，所以我的新 iframe 会立即被删除，我看不到它。

我怎么解决这个问题？

此外，是否可以将按钮不在父正文中而是直接添加到新创建的 iframe 中？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:15:28.830

您需要将函数处理程序而不是函数调用结果传递给`onclick`属性。

您可以使用匿名函数来做到这一点：

```
butt.onclick = function() { removeIframe(iframeName); }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:15:51.217

onclick 必须是一个函数，替换以下行

```
butt.onclick = removeIframe(iframeName); 
```

和

```
butt.onclick = function() { removeIframe(iframeName); } 
```

# android - 适用于 Android 的 Evernote SDK 示例中的 OAuth 错误。

> ID：10735433
> 
> 赞同：0
> 
> 时间：2012-05-24T10:13:20.240
> 
> 标签：android, oauth, evernote

我在印象笔记 SDK 示例 HelloEDAM 中的 OAuth 过程中遇到错误。

org.scribe.exceptions.OAuthException：响应正文不正确。无法从中提取令牌和秘密

有没有办法摆脱这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:11:41.760

异常应包括实际的响应正文：

```
throw new OAuthException("Response body is incorrect. Can't extract token and secret from this: '" + response + "'", null); 
```

你能补充一下，这样我们就可以看到你得到了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T19:32:48.243

也许有点晚了......但我会为*未来的访客*回答。默认情况下，您可能没有更改`EVERNOTE_CONSUMER_KEY`and `EVERNOTE_CONSUMER_SECRET`。

您必须在 Evernote for Developers 网页上请求 API 密钥： [https ://dev.evernote.com/](https://dev.evernote.com/)

您应该将其添加到您的`gradle.properties`, 并按照 [https://github.com/evernote/evernote-sdk-android上的说明进行操作](https://github.com/evernote/evernote-sdk-android)

免责声明：至少，我今天在使用最新的 Evernote SDK 时遇到了同样的异常，我不知道三年前情况如何。

# java - Ant junit 任务无法识别当前工作目录

> ID：10735434
> 
> 赞同：0
> 
> 时间：2012-05-24T10:13:26.520
> 
> 标签：java, ant

我正在从父构建文件（在父目录中）的子目录中运行 JUnit 任务，每当遇到子目录中的文件/文件夹时，它都会给出 IO 异常。如果我将这些文件移动到父目录，它工作正常。我该如何克服这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:19:19.600

您可以执行以下操作之一：

1.  尝试将子文件夹专门放在构建路径上
2.  刷新所有文件夹或重启eclipse
3.  清理构建所有项目

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T05:11:09.563

我最终将文件放在父目录中。没有其他东西对我有用。

# c# - MVC3 应用程序：用于在服务器上保存文件的文件夹是什么？

> ID：10735439
> 
> 赞同：2
> 
> 时间：2012-05-24T10:13:43.063
> 
> 标签：c#, asp.net-mvc-3

我有一个应用程序 MVC3 应用程序。我想记录各种事情，比如提交表单时，为了避免写入数据库，我想在 xml 文件中记录详细信息。

问题是我应该使用哪个文件夹，我看到的一些示例建议使用 App_Data 文件夹。对于最少的问题，标准或建议是什么？

所以我用这个：

```
// Create a new XmlSerializer instance with the type of the test class
var serializerObj = new XmlSerializer(typeof(CourseApplicationVM));
// Create a new file stream to write the serialized object to a file

var filename = string.Format("{0}-{1}-{2}{3}", "CourseApp",
                                viewModel.Course.Code + viewModel.Applicant.Name, DateTime.Now.Ticks, ".xml");
var filepath = Path.Combine(Server.MapPath("~/App_Data/Log"), filename);

TextWriter writeFileStream = new StreamWriter(filepath);
serializerObj.Serialize(writeFileStream, viewModel);
// Cleanup
writeFileStream.Close(); 
```

它在本地运行良好，但在发布到服务器时却不行。查看文件夹结构就不足为奇了，因为它在发布时甚至没有 App_Data 文件夹。这导致了这个错误：

```
Could not find a part of the path 'C:\inetpub\wwwroot\MyApplication\App_Data\Log\CourseApp-0385JoeBloggs-634734549879496695.xml'. 

Exception Details: System.IO.DirectoryNotFoundException: Could not find a part of the path 'C:\inetpub\wwwroot\MyApplication\App_Data\Log\CourseApp-0385JoeBloggs-634734549879496695.xml'. 
```

为什么没有那个文件夹（不应该发布）？保存这些东西的正常位置是什么？

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:53:50.707

右键单击文件夹并在上下文菜单中选择“包含在项目/解决方案中”

确保您对文件夹的权限已相应设置。

# mysql - 违反UNIQUE KEY时获取行的id

> ID：10735443
> 
> 赞同：1
> 
> 时间：2012-05-24T10:13:55.647
> 
> 标签：mysql, sql

我有一张桌子`user`。它有列`id`和`email`.

用户表

```
id | email
1  | xxx@gmail.com
2  | yyy@gmail.com 
```

是`id`一个`PRIMARY KEY AUTO_INCREMENT`并且`email`是一个`UNIQUE KEY`。当我在表中插入新行并`DUPLICATE KEY`引发异常时。我想获取引发异常的`id`那个。`DUPLICATE KEY`

现在我正在这样做 -

```
BEGIN
DECLARE EXIT HANDLER FOR 1062
    BEGIN
        SELECT id
        INTO id
        FROM user
        WHERE email = 'xxx@gmail.com';
    END;
    INSERT INTO user
    (email)
    VALUES
    ('xxx@gmail.com');

SELECT LAST_INSERT_ID() INTO id;
END; 
```

我想知道是否有更好的方法来做到这一点。那是为了避免再次扫描表来获取它已经扫描过的id来检查电子邮件的唯一性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:19:44.307

在扫描`UNIQUE KEY` `BTREE`中使用，所以它非常快。

您不想在附加`select`查询中自己检查是否存在价值吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:26:08.920

使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)，然后[像往常一样获取自动递增的 id](http://dev.mysql.com/doc/en/getting-unique-id.html)：

> 如果表包含一`AUTO_INCREMENT`列并[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)插入或更新一行，则该[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)函数返回该`AUTO_INCREMENT`值。例外：对于更新，[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)在 MySQL 5.1.12 之前没有意义。但是，您可以使用. 假设那是列。要使更新有意义，请按如下方式插入行：[`LAST_INSERT_ID(*expr*)`](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)`id``AUTO_INCREMENT`[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)
> 
> ```
> INSERT INTO table (a,b,c) VALUES (1,2,3)
>   ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3;
> ```

# sql - 有没有办法在 SQL SERVER 2008 中将 varchar 转换为 DATETIME？

> ID：10735447
> 
> 赞同：0
> 
> 时间：2012-05-24T10:14:10.873
> 
> 标签：sql, sql-server, sql-server-2008

例如，这是 varchar -->`'24/05/2012 09:56:06'` 我想将其转换为 DATETIME

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T10:16:22.293

试试这个 ：

```
convert(datetime,'24/05/2012 09:56:06',103) 
```

![在此处输入图像描述](../Images/6860e4b891525dca3e7c968ffa59b7f2.png)

另外，参考[这个](http://msdn.microsoft.com/en-us/library/aa226054%28SQL.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:21:42.950

请参阅[CAST 和 CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。样式`dd/mm/yyyy`为103：

```
select convert(datetime, '24/05/2012 09:56:06', 103); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T11:17:23.667

试试这个

> **选择转换（日期时间，'24/05/2012 09:56:06',120）**

请参阅此链接：[http ://www.sql-server-helper.com/tips/date-formats.aspx](http://www.sql-server-helper.com/tips/date-formats.aspx)

它向您展示了更多的 sql 日期格式。随心所欲地使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:17:48.367

尝试更准确地满足您的需求。

```
SET DATEFORMAT ydm
DECLARE @D DATETIME
SELECT @D = CAST('24/05/2012 09:56:06' AS DATETIME)

SELECT @D AS MYDATETIME 
```

# android - 将 Android SurfaceView 保存到 Bitmap 并且缺少某些元素

> ID：10735448
> 
> 赞同：1
> 
> 时间：2012-05-24T10:14:17.577
> 
> 标签：android, canvas, bitmap, surfaceview

我让我的 SurfaceView 启动并运行，一个按钮可以打开相机并拍摄一张用作背景的照片，另一个按钮可以添加位于顶部并且可以移动的项目。这一切都很好，直到我尝试将 SurfaceView 保存为位图，而我得到的只是背景而顶部没有图像。

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    if(_mGotImage){

        canvas.drawBitmap(_mImage, 0, 0, null);
    }else{

            canvas.drawColor(Color.BLACK);
    }

    //if the array is not empty
    if(!_mJazzItems.isEmpty()){

        //step through each item in the array
        for(JazzItem item: _mJazzItems){

            //get the bitmap it is using
            Bitmap bitmap = BitmapFactory.decodeResource(getResources(), item.getBitmap());
            //and draw that bitmap at its X and Y coords
            canvas.drawBitmap(bitmap, item.getX(), item.getY(), null);

        }
    }
} 
```

这是为尝试保存画布而调用的方法。

```
 public void screenGrab(){

    Bitmap image = Bitmap.createBitmap(_mPanelWidth, _mPanelHeight, Bitmap.Config.ARGB_8888);

    Canvas canvas = new Canvas(image);
    this.onDraw(canvas);

    String path=Environment.getExternalStorageDirectory() + "/test2.png";
    File file = new File(path);

    try{

        file.createNewFile();
        FileOutputStream ostream = new FileOutputStream(file);
        image.compress(CompressFormat.PNG, 100, ostream);
        ostream.flush();
        ostream.close();

    }catch (Exception e){

        e.printStackTrace();
    }
} 
```

onDraw 工作正常，我在后台拍摄我的相机，可以将我所有的项目添加到顶部并移动它们。就在我尝试截屏时，顶部的项目都不存在。

谢谢你的帮助！！

- 更新 -

我已将屏幕抓取方法修改为：

```
 public void screenGrab(){

    Bitmap image = Bitmap.createBitmap(_mPanelWidth, _mPanelHeight, Bitmap.Config.ARGB_8888);

    Canvas canvas = new Canvas(image);

    canvas.drawBitmap(_mImage, 0, 0, null);

    //if the array is not empty
    if(!_mJazzItems.isEmpty()){

        //step through each item in the array
        for(JazzItem item: _mJazzItems){

            //get the bitmap it is using
            Bitmap bitmap = BitmapFactory.decodeResource(getResources(), item.getBitmap());
            //and draw that bitmap at its X and Y coords
            canvas.drawBitmap(bitmap, item.getX(), item.getY(), null);

        }
    }

    String path=Environment.getExternalStorageDirectory() + "/test2.png";
    File file = new File(path);

    try{

        file.createNewFile();
        FileOutputStream ostream = new FileOutputStream(file);
        image.compress(CompressFormat.PNG, 100, ostream);
        ostream.flush();
        ostream.close();

    }catch (Exception e){

        e.printStackTrace();
    }
} 
```

我不明白为什么这没有在顶部绘制其他图像......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:33:20.933

就我而言，我正在使用这个：

```
public static Bitmap combineImages(Bitmap c, Bitmap overLayImage, Context con) {
    Bitmap cs = null;
    int width, height = 0;
    width     = c.getWidth();
    height     = c.getHeight();
    cs = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    Canvas comboImage = new Canvas(cs);
    comboImage.drawBitmap(c, 0, 0, null);
    String left = yourleftPosition;
    String top = yourtopPosition;

    comboImage.drawBitmap(overLayImage, Float.parseFloat(left), Float.parseFloat(top),null);
    /******
    *
    * Write file to SDCard
    *
    * ****/
    String tmpImg = String.valueOf(System.currentTimeMillis()) + ".png";
    OutputStream os = null;
    try {
        String pathis = Environment.getExternalStorageDirectory()
        + "/DCIM/Camera/" + tmpImg;
        os = new FileOutputStream(pathis);
        cs.compress(CompressFormat.PNG, 100, os);
    }
    catch (IOException e) {
        Log.e("combineImages", "problem combining images", e);
    }
    return cs;
} 
```

# xpages - 使用 Java/SSJS 获取 NotesViewColumn 中使用的字段

> ID：10735458
> 
> 赞同：0
> 
> 时间：2012-05-24T10:14:53.603
> 
> 标签：xpages, lotus-domino, xpages-ssjs

我有一个 NotesViewColumn 的句柄，并且需要知道该列使用了哪个字段（仅使用字段，没有公式）。

该列设置了“显示：字段”，并且（自然）只包含字段名称。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:47:33.770

请尝试*NotesViewColumn*类的*getItemName()*方法。

 *希望这有助于
斯文*

# sql - 运行总 Sybase

> ID：10735461
> 
> 赞同：0
> 
> 时间：2012-05-24T10:15:09.257
> 
> 标签：sql, sybase

我正在编写一个具有以下要求的 sql 脚本：- 1) 它应该能够从 Asset_Transaction 表中获取每条记录，并为每条资产计算每条记录上的“运行总计”的单位数。通过汇总 Transaction_datetime 小于或等于所显示 Asset_id 的 Transaction_datetime 的所有 Asset_Transactions 的 Units 来计算此运行总计列。我已经做到了，我认为它工作正常。

但是我的第二个要求是：-

2) 计算该日期的单位价值，即从 Unit_Price 表中获取每个资产交易日期和该特定资产的销售单位价格，并将其乘以添加的单位数量（“运行总计”）。我在第 2 步上苦苦挣扎

[SCHEMA FOR Sybase DATABASE 点击链接——](http://imageshack.us/photo/my-images/220/schemai.png/)

**到目前为止我写的代码。**

```
set nocount on
   go

     declare mla_exceptions scroll cursor for
                 select distinct mla.asset_id  from    asset_transaction mla
go

Print 'asset_id, Amount, Transaction Name, Total Units, Transaction Datetime'

declare @ml_asset double precision

open mla_exceptions

fetch first mla_exceptions

              into @ml_asset  

              while (@@sqlstatus = 0)

              begin  
              select    mla.asset_id , ',',
               -- mla.transaction_datetime, ',',
              mla.amount, ',',
              tt.name, ',',
             (select sum (units) from asset_transaction where transaction_datetime <= mla.transaction_datetime  and asset_id = @ml_asset  and status = 'A' ) 'Running Total Units', ',',
              transaction_datetime 
          from    asset_transaction mla noholdlock 
          Left outer join transaction_type tt on tt.transaction_type_id = mla.transaction_type_id  where   mla.asset_id = @ml_asset 
order by mla.asset_id

fetch next mla_exceptions
 into @ml_asset 
end

close mla_exceptions

deallocate cursor mla_exceptions

go 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:16:59.187

恭喜。我很佩服你解决需求 1 的毅力。不幸的是，性能会很差，因为你在同一张表内部读取了两次，并试图用 noholdlock 控制锁。

如果相同的资产 ID 存在多次怎么办？您将多次计算同一资产的总和。

这是一个更好的 SQL 解决方案。创建一个名为 #asset_sum 的临时表，其中包含asset_id 和asset_sum 列。然后将此临时表与原始表连接起来。

结果是没有游标、更少的锁和没有冗余。

我稍后会回来给你一个详细的答案。

# database - redis内存效率

> ID：10735464
> 
> 赞同：4
> 
> 时间：2012-05-24T10:15:18.830
> 
> 标签：database, memory, redis

我想在 Redis 上的 MySQL 中加载 4 列和 80 万行的数据，这样我就可以减少获取延迟。

但是，当我尝试加载所有数据时，它会变大 5 倍。

原始数据为 3gb（导出为 csv 格式时），但当我将它们加载到 Redis 上时，需要 15GB ......这对于我们的系统来说太大了。

我还尝试了不同的数据类型 -

1) 'table_name:row_number:column_name' -> 字符串 2) 'table_name:row_number' -> 哈希

但他们都需要太多。

我错过了什么吗？

添加）

我的数据有 4 列 - （用户 ID（pk）、计数、创建时间和日期）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T02:36:53.817

最节省内存的方法是将值存储为 json 数组，并拆分您的密钥，以便您可以使用 ziplist 编码的哈希存储它们。

1.  使用说 json 数组对数据进行编码，因此您有 key=value 对，例如`user:1234567 -> [21,'25-05-2012','14-06-2010']`.
2.  将您的密钥分成两部分，这样第二部分就有大约 100 种可能性。例如，`user:12345`和`67`
3.  将此组合键存储在这样的哈希中`hset user:12345 67 <json>`
4.  要检索用户 ID 9876523 的用户详细信息，只需执行`hget user:98765 23`并解析 json 数组
5.  确保调整设置[hash-max-ziplist-entries 和 hash-max-ziplist-value](http://redis.io/topics/memory-optimization)

[Instagram 写了一篇很棒的博客文章来解释这项技术](http://instagram-engineering.tumblr.com/post/12202313862/storing-hundreds-of-millions-of-simple-key-value-pairs)，所以我将跳过解释为什么这是内存效率高的原因。

相反，我可以告诉你这种技术的缺点。

1.  您无法访问或更新用户的单个属性；你必须重写整个记录。
2.  即使您只关心某些字段，您也必须始终获取整个 json 对象。
3.  最后，你必须在拆分键上编写这个逻辑，这是添加维护。

与往常一样，这是一种权衡。确定您的访问模式，看看这样的结构是否有意义。如果没有，您将不得不购买更多内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-28T09:37:56.393

+1 在这种情况下可能会释放一些内存的想法 - 基于 crumbs 字典的密钥压缩和用于存储整数的 base62 编码，

它将 user:12345 60 缩小为 'u:3d7' 'Y'，存储密钥所需的内存减少了两倍。

并且通过数据的自定义压缩，不是数组而是一个loooong int（可以将[21，'25-05-2012'，'14-06-2010']转换为这样的int：212505201214062010，最后两个部分已修复长度然后很明显如何打包/重新打包这样的值）

因此，整个键/值的大小现在减少了 1.75 倍。

如果您的代码库是基于 ruby​​ 的，我可能会建议 me-redis gem，它可以无缝地实现来自 Sripathi 答案 + 给定的所有想法。

# internet-explorer - Windows XP 中的 Magento IE-7 修复

> ID：10735469
> 
> 赞同：0
> 
> 时间：2012-05-24T10:15:45.170
> 
> 标签：internet-explorer, magento, windows-xp

我的 Magento 网站在 IE-7 和 IE-9 中出现了很多 javascript 错误。因此，我通过使用将 mysite 强制为 IE-8 文档模式

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

它解决了所有问题，但不适用于 Windows XP。当我使用在 XP 上运行的 IE-6 和 IE-7 检查我的站点时，一些prototype.js 函数似乎失败了。

那么任何人都可以告诉我是否有针对在 XP 上运行的 IE 的任何修复。

仅供参考：网站在所有 IE 中运行完美 - windows-7 和 Vista 上的版本。

错误：**SCRIPT5007：无法获取属性“childElements”的值：对象为空或未定义**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:56:57.870

修复了兼容性问题：-

```
 <!--[if gte IE 7]>
   <meta http-equiv="X-UA-Compatible" content="IE=8" />         
  <![endif]--> 
```

如前所述，我公开使用元标记，它迫使不支持 IE-8 的浏览器进入 qurik 模式，因此它被破坏了。

# telerik - 如何在 Telerik 报告中的同一文本框中的新行中显示字段？

> ID：10735475
> 
> 赞同：0
> 
> 时间：2012-05-24T10:16:14.953
> 
> 标签：telerik, telerik-reporting

我正在使用 Silverlight4 和 Telerik Reporting Q3 2011。我正在尝试生成所有网点的报告。我使用 Table 来显示它的字段。我想在同一个单元格中显示完整地址。我怎么能？

我使用以下表达式在同一单元格中显示完整地址。

```
 = Fields.AddressLine1
 + ", " + Fields.AddressLine2
 + ", " + Fields.Suburb
 + ", " + Fields.City
 + ", " + Fields.State
 + ", " + Fields.Country 
```

我想在同一个单元格中显示它，但希望输出如下所示..

```
 =====================
   Address
 =====================
  15A,
  xxxx xxxRoad,
  xxxxxx,
  xxxxxxxx
 ==================== 
```

但我得到了这个

```
 =====================
   Address
 =====================
  15A, xxxx xxxRoad, xxxxxx, xxxxxxxx
 ===================== 
```

如何获得我想要的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:17:56.603

在这个函数中创建了 Function NewLineFeeds() 我使用 Replace() 方法将特定字符串替换为 newLine(\n) 。

```
public static string NewLineFeeds(string text)
{
    string result = text.Replace(", ", "\n");
    result = result.Replace(", ", "\n");
    result = result.Replace(", ", "\n");
    return result;
} 
```

我的表达是

```
 =NewLineFeeds(Fields.AddressLine1 
  + ", " + Fields.AddressLine2 
  + ", " + Fields.Suburb 
  + ", " + Fields.City 
  + ", " + Fields.State 
  + ", " + Fields.Country) 
```

这调用函数 NewLineFeeds() 并将“，”替换为 \n（新行）。添加这将工作正常..

# .net - f# sum a List of Int32 throws 算术运算导致溢出

> ID：10735476
> 
> 赞同：1
> 
> 时间：2012-05-24T10:16:16.527
> 
> 标签：.net, f#

我试图得到从 0 到 2 000 000 的所有素数的总和

这是我的代码：

```
let getPrimesUpTo (x : System.Int32) =
    let upperBound = Convert.ToInt32(Math.Sqrt(Convert.ToDouble(x)))

    let allNumbers = ref [1..x] in    
    for div = 2 to upperBound do allNumbers := List.filter (fun num -> (num % div <> 0 || div >= num)) !allNumbers    
    allNumbers

let sop = 
    let nums = !(getPrimesUpTo 2000000)
    List.sum nums 
```

当我运行它时，我得到：“算术运算导致溢出”

如果我不做 List.sum 我会得到素数列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:19:27.790

大概`List.sum`是要尝试将这些值求和为一个`Int32`值......并且大概到 2,000,000 的素数之和大于`Int32.MaxValue`. 我怀疑`Int64`会没问题 - 所以试着`Convert.ToInt32`改成`Convert.ToInt64`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:47:10.507

`List.sum`使用引发溢出的检查运算符。你可以通过源来追逐这个

```
List.sum calls Seq.sum
Seq.sum calls Checked.(+) 
```

`Checked.(+)`溢出时抛出错误。旁注：这就是为什么`List.Fold (+)`比`List.sum`

要解决此问题，您需要更改代码以使用 64 位整数（应该足够大），我还整理了 double 和 int 之间的转换

```
let getPrimesUpTo (x : int64) =
    let upperBound = x |> float |>sqrt |> int64

    let allNumbers = ref [1L..x]    
    for div in 2L..upperBound do allNumbers := List.filter (fun num -> (num % div <> 0L || div >= num)) !allNumbers    
    allNumbers

let sop = 
    let nums = !(getPrimesUpTo 2000000L)
    List.sum nums 
```

这种计算素数的方法效率很低。我已经编写了一些非常好的代码来计算 F# 中的大量素数 - 请参见此处[https://stackoverflow.com/a/8371684/124259](https://stackoverflow.com/a/8371684/124259)

# android - 如何在android中为库项目创建测试项目

> ID：10735481
> 
> 赞同：1
> 
> 时间：2012-05-24T10:16:23.993
> 
> 标签：android, junit

我需要为我的应用程序创建 e 单元测试项目。我的应用程序名称是 MyLibApp。它引用了一个库项目 Android_Client。每个控件和编码都在这个库项目中完成。我尝试了不同的方法来为这个库创建一个测试项目项目。但他们都没有工作。请有人告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:24:32.940

对我来说，最好将测试项目与使用该库的应用程序项目连接起来。否则它不会在更改时刷新 apk。只需编写一个使用您的库并针对该库进行测试的简单包装器应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T15:49:03.083

*无耻的插头警报*

我实际上也遇到了这个问题。不幸的是，JUnit 和其他测试库无法测试库。

幸运的是，我创建了一个名为“Alt H”（Android 库测试工具）的解决方案，可在 gitorious：[https](https://gitorious.org/alth) ://gitorious.org/alth 获得。

它仍在开发中，文档有点缺乏，所以如果您有任何问题，请随时联系我。

# javascript - 如何防止缓存网站内容？

> ID：10735484
> 
> 赞同：0
> 
> 时间：2012-05-24T10:16:36.463
> 
> 标签：javascript, html, apache, .htaccess

我有一个动态网页，其中的一小部分内容一直在变化。

每个请求不同的内容由：Javascript和HTML组成

为了使网站正确显示，javascript 和 HTML 需要 100% 来自服务器。我检查了不时发生的页面错误是由旧的/以前加载的 javascript 或 HTML 造成的，而不是来自服务器的新数据。

我在 .htacces 中绑定了以下设置：

```
Header Set Cache-Control "max-age=0, no-store" 
```

上述设置是有效的，但问题是每次都需要重新加载图像，这是不必要的，并且对站点性能不利。

我也在 .htacces 中尝试了以下设置：

```
### turn on the Expires engine
ExpiresActive On

### expires after a month in the client's cache
ExpiresByType image/gif A36000
ExpiresByType image/png A36000
ExpiresByType image/jpg A36000
ExpiresByType image/x-icon A36000
ExpiresByType application/pdf A36000
### ExpiresByType application/x-javascript A36000
### ExpiresByType text/plain A36000 
```

但是，上面的内容似乎不起作用，因为我检查了内容并不总是新鲜的，从而导致页面错误。

我的问题：

如何正确配置服务器，以便始终（通过生成的 php 脚本）使用新的 HTML 和 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:29:15.537

text/html 和 css 文件的过期时间与图像不同呢？

```
ExpiresByType text/html "access plus 5 seconds"
ExpiresByType text/css "access plus 5 seconds"
ExpiresByType image/jpg "access plus 5 minutes"
etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:21:28.550

在我的应用程序具有相同更新要求的情况下，我使用了以下（php）：

```
// disable cache (ajax useful)
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); 
```

# java - 使用定义的根（起始）元素将 DTD 转换为 XSD

> ID：10735488
> 
> 赞同：8
> 
> 时间：2012-05-24T10:16:50.863
> 
> 标签：java, xml, xsd, jaxb, dtd

我有几个大的 DTD 文件。我使用[trang](http://www.thaiopensource.com/relaxng/trang.html)将它们转换为 XSD 文件，因此我可以轻松地从 JAXB 和其他实用程序中使用它。但是，生成的 XSD 文件在顶层具有所有声明的元素。这意味着任何元素都可以是输入 XML 的根元素。我只想指定一个特定的元素。

拥有这些多个根元素会导致一些问题，例如为所有类`xjc`生成`@XmlRootElement`，所以我需要添加更多额外的检查。

据我了解，我需要重写生成的 XSD，将`<xs:element>`s 移动到`<xs:complexType>`s，将`element ref`s 更改为`element type`s 等等，但这将是太多的猴子工作，无法验证是否全部正确完成。

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:23:32.153

根据您所描述的内容，并且忽略了一些评论中指出的转换的“保真度”，我只是在处理这样一个事实，即您只是在寻找某种（我称之为）***XML Schema的自动方式重构***。我与[QTAssistant](http://paschidev.com)相关联，这是一种用于此类工作的产品，所以我会这样做......

无论如何，您必须手动完成的一件事是找出并捕获您希望以 root 身份（或不以 root 身份查看）的元素列表......您就完成了：点击一个按钮，或调用一个命令行，您将确定是否生成了有效的 XSD。

重构引擎采用访问者模式，在您的情况下，它基本上可以满足您的需求：在需要时创建全局类型，删除不需要的全局元素定义，并用内联声明替换任何引用的元素。

（对于阅读本文并了解替换组的任何人，此重构并不是替换对替换组负责人的引用；因为我们讨论的是来自 DTD 的 XSD，所以这不是问题）。

这种简单性，以及可重复和可靠的事实，将是使用专用重构工具的主要优点；另一个优点：它还可以重新分配 xml 命名空间，无论如何你想要......

如果你对更多细节感兴趣，请告诉我，我会用一个小样本和一些插图来更新这篇文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:20:10.513

我使用简单的 XSLT 转换来处理生成的 XSD。适用于我的情况：

```
<?xml version="1.0"?>

<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
        >
    <xsl:template match="@*|node()|comment()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()|comment()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="xs:element/@ref"/>
    <xsl:template match="xs:element[@ref]">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <xsl:attribute name="type"><xsl:value-of select="@ref"/></xsl:attribute>
            <xsl:attribute name="name"><xsl:value-of select="@ref"/></xsl:attribute>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="xs:element[@name = //xs:element/@ref and xs:complexType]">
        <xs:complexType name="{@name}">
            <xsl:apply-templates select="xs:complexType/node()"/>
        </xs:complexType>
    </xsl:template>
    <xsl:template match="xs:element[@name = //xs:element/@ref and @type]">
        <xsl:choose>
            <xsl:when test="//xs:complexType[@name = current()/@type]">
                <xs:complexType name="{@name}">
                    <xs:complexContent>
                        <xs:extension base="{@type}"/>
                    </xs:complexContent>
                </xs:complexType>
            </xsl:when>
            <xsl:otherwise>
                <xs:simpleType name="{@name}">
                    <xs:restriction base="{@type}"/>
                </xs:simpleType>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

它检测引用的元素定义并使其成为`comptexType`s，改变 refs。所有未引用的元素都成为起始元素。

# iphone - 斯坦福iphone开发-CS193P作业1——“罪”操作

> ID：10735495
> 
> 赞同：4
> 
> 时间：2012-05-24T10:17:20.343
> 
> 标签：iphone, objective-c, ios, cs193p

所需的工作之一是在计算器上实现“sin”按钮 添加以下 4 个操作按钮： • sin：计算堆栈顶部操作数的正弦值。

这是我的代码

```
- (double)performOperation:(NSString *)operation
{
  double result = 0;

   if ([operation isEqualToString:@"+"]) {

    result = [self popOperand] + [self popOperand];

   }else if ([@"*" isEqualToString:operation]) {

    result = [self popOperand] * [self popOperand];

   }else if ([operation isEqualToString:@"-"]) {

    double subtrahend = [self popOperand];
    result = [self popOperand] - subtrahend;

   }else if ([operation isEqualToString:@"/"]) {

    double divisor = [self popOperand];
    if(divisor) result = [self popOperand] / divisor;

    }else if([operation isEqualToString:@"sin"]){

    double operd = [self popOperand];
    NSLog(@"operd=%g",operd);
    if(operd) result = sin(operd);

   }

[self pushOperand:result];

     return result;
} 
```

我尝试输入 sin(60) 结果=-0.304811

但实际上我在 Windows 中使用计算器，结果是 0.8860254

我不知道我的代码有什么问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T10:20:02.967

Windows 计算器将 60 解释为度数；您的计算器将 60 解释为弧度。两个答案都是正确的。如果您希望将数字解释为度数，请乘以`M_PI`并除以 180。

```
result = sin(M_PI*operd/180) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:22:31.230

sin() 采用弧度，Windows 计算器默认采用度数。所以，区别。

# c# - 将 HTML 代码转换为纯文本

> ID：10735502
> 
> 赞同：10
> 
> 时间：2012-05-24T10:17:40.550
> 
> 标签：c#, asp.net, .net, string

我有一个字符串，例如：

```
Col&acute;gio 
```

我怎样才能将其转换为：

```
Colégio 
```

无需替换所有 html 代码

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T10:20:54.177

```
System.Web.HttpUtility.HtmlDecode("Col&acute;gio"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-13T01:45:09.530

只是为了完成：

如果您使用的是 .NET 4.0+，您还可以使用 WebUtility.HtmlDecode

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T10:23:02.833

```
SecurityElement securityElement = System.Security.SecurityElement.FromString("<test>H&amp;M</test>");
string unescapedText = securityElement.Text;
Console.WriteLine(unescapedText); // Result: H&M 
```

# javascript - 如何使用母版页而不使用 AJAX 控制加载面板

> ID：10735506
> 
> 赞同：0
> 
> 时间：2012-05-24T10:17:55.740
> 
> 标签：javascript, asp.net, asp.net-ajax, page-loading-message

我有一个 asp.net 项目，我想在**不使用 AJAX**和使用简单的 java-script DIV 魔术的情况下显示进度图像 (​​GIF)。

我要做的就是在母版页（asp.net母版页，所以我不需要在每个内容页面上重复代码）中放置一个div（在页面加载过程中显示动画时钟）并在页面加载时显示它进行中。

我希望你明白我想做什么。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:30:43.400

你可以这样实现

```
<body style="background-color:#FFFFFF;" onLoad="init()">

    <div id="loading" style="position:absolute; width:200px; height:163px; text-align:center;top:310px; left:487px;">
    <img src="images/loading.gif" border=0 style="margin:38px"/>
</div>
 <script>
 var ld=(document.all);
  var ns4=document.layers;
 var ns6=document.getElementById&&!document.all;
 var ie4=document.all;
  if (ns4)
    ld=document.loading;
 else if (ns6)
    ld=document.getElementById("loading").style;
 else if (ie4)
    ld=document.all.loading.style;
  function init()
 {
 if(ns4){ld.visibility="hidden";}
 else if (ns6||ie4) ld.display="none";
 }
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:28:19.060

在文档正文中创建 2 个部分

```
<div id="progress">
// Code for gif image
</div

<div id="content" style="display:none;">
// Whole page content
</div> 
```

之后包括这个 javascript。不在标题中

```
<script>
  document.getElementById("progress").style.display = 'none';
  document.getElementById("content").style.display = 'block';
</script> 
```

如果你知道 jQuery，你可以在 $(document).ready() 事件上做类似的事情

# android - 从新线程中的活动启动服务并让它独立运行？

> ID：10735507
> 
> 赞同：0
> 
> 时间：2012-05-24T10:17:56.580
> 
> 标签：android, multithreading, service, android-activity

我很感激任何关于我能做什么的建议，因为我正在寻找一个例子或一个清晰的解释，但我找不到。

其实我认为我必须分开问题：

1-我想从一个活动中启动一个服务，这个服务应该在一个新线程的后台运行，即使我关闭了活动界面，即使手机没有激活，它也应该一直运行......

2-一旦我再次打开活动（通过单击应用程序图标），我希望活动指示我该服务正在运行，如果我愿意，我可以停止它，或者我可以保持它运行并再次关闭活动界面。

欢迎任何相关教程、链接或代码:-)

谢谢你，R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:47:21.403

Asynk 任务不能做到这一点吗？你试过了吗？？像 Java 一样，我们在 android 中有一种特殊的线程或服务，它在后台工作而不影响您的 UI，这意味着您不会收到任何 ANR（应用程序无响应错误）。

# java - EWS Java API 1.1 创建约会 - 缺少 TimeZoneDefinition

> ID：10735514
> 
> 赞同：3
> 
> 时间：2012-05-24T10:18:43.763
> 
> 标签：java, exchange-server, exchangewebservices, exchange-server-2007, ewsjavaapi

我有一个 Exchange Server 2007 SP1，并想使用 EWS Java API 1.1 创建一个约会。我有一个例外，我必须先设置时区定义。

```
 appointment.setStartTimeZone(new TimeZoneDefinition(){{
        setName( "W. Europe Standard Time" );
    }}); 
```

我试图直接设置它但得到了这个异常：

```
The time zone definition is invalid or unsupported 
```

我看到了一些解决方法，您必须编辑 Java API（例如跳过 TimeZoneDefinition 验证），但如果可能的话，我不想在那里做任何更改。我希望有人知道如何正确设置 TimeZoneDefinition（无需修改基本 Java API）。

编辑：在 .NET 中，您似乎可以直接设置 TimeZoneDefinition，例如：

```
appointment.StartTimeZone = TimeZoneInfo.Local; 
```

但我在 Java API 中找不到这样的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-25T07:05:17.593

我遇到了同样的问题 - 并且几乎尝试了所有方法（除了编辑 java ews api 本身）以使 StartTimeZone 的约会在我的 Spring Web 应用程序中与 Exchange 2007 SP1 一起工作 - 没有成功。

我发现如下评论：不幸的是，Exchange 2007 SP1 不支持 EWS 的 StartTimeZone 属性。如果要使用该属性，则必须使用 Exchange 2010。我应该去，寻找不那么“不稳定”的 Java Exchange 框架。

我很不高兴，因为我听说 .NET 世界中没有这样的问题，所以我决定采用以下解决方案：

我设置了一个自托管的 Nancy 服务器。

请参阅[南希文档](https://github.com/NancyFx/Nancy/wiki/Documentation)

并写了一个简单的 NancyModule：

```
namespace WebServiceNancy
{
public class APIModul : NancyModule
{
    public APIModul() : base("/")
    {

        Post["/saveFooApp"] = _ =>
        {   
            var jsonApp = this.Bind<AppData>();
            string ewsURL = "https://saveFooApp/ews/exchange.asmx";
            System.Uri ewsUri = new System.Uri(ewsURL);

            ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
            service.Url = ewsUri;

            service.Credentials = new WebCredentials(jsonApp.Username, jsonApp.Password);

            Appointment app = new Appointment(service);
            app.Subject = jsonApp.Title;
            app.Start = jsonApp.Start;
            app.End = jsonApp.End;

            app.Save(WellKnownFolderName.Calendar);

            return Response.AsText("OK").WithStatusCode(HttpStatusCode.OK);
        };
    }
}

public class AppData
{
    public string Title { get; set; }
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
}
} 
```

现在我可以通过 RestTemplate 将我的约会数据作为 json 对象从我的 Spring 控制器调用这个 WS：

```
SimpleDateFormat formatter = new  SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String startDate = formatter.format(fooMeeting.getMeetingStart());
String endDate = formatter.format(fooMeeting.getMeetingEnd());

JSONObject obj = new JSONObject();
obj.put("title", fooMeeting.getTitle());
obj.put("start", startDate);
obj.put("end", endDate);
obj.put("username", fooUser.getUsername());                 
obj.put("password", fooUser.getPassword());

RestTemplate rt = new RestTemplate();

HttpHeaders headers = new HttpHeaders();
headers.setContentType(MediaType.APPLICATION_JSON);

JSONSerializer jsonSer = new JSONSerializer();

HttpEntity<String> entity = new HttpEntity<String>(jsonSer.serialize(obj), headers);

ResponseEntity<String> response = rt.exchange("http://localhost:8282/saveFooApp", HttpMethod.POST, entity, String.class);               
System.out.println(response.getStatusCode()); 
```

Ofc 您需要决定在将凭据从一台服务器传递到另一台服务器时是否要使用某种密码加密 - 以及如何实现错误处理。

*   但它对我来说就像一种魅力

*   我对未来有关其他 EWS 功能的请求充满信心。

# android - 不要在 ListView 上滚动

> ID：10735519
> 
> 赞同：1
> 
> 时间：2012-05-24T10:19:04.507
> 
> 标签：android, android-listview, android-scroll

我有一个，它只`ViewFlipper`包含 on `ListView`/previos 视图，ListView（它实现了 swipedetector）向上或向下滚动。如果我只想滑动，是否有可能取消这些滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:32:16.417

您可以创建自己的类来扩展`ViewFlipper`和覆盖`onInterceptTouchEvent(MotionEvent ev)`拦截触摸事件的方法。

如果你总是返回`true`这个函数，你的 viewflipper 将消耗所有的 touchEvents

# c++ - 如何将某个父级的所有子类注册到不同的类

> ID：10735526
> 
> 赞同：0
> 
> 时间：2012-05-24T10:19:36.557
> 
> 标签：c++

我正在设计一个应用程序，其中多个几何基本类型（都继承基`Primitive`类）存储在 class 的对象中`Scene`。

我不想在我的函数中`main()`通过构造基元然后调用以编程方式创建场景`Scene::add(...)`，而是希望有某种在运行时读取的配置文件。
这将使我不必在每次更改场景时都重新编译，这似乎是一个普遍的好主意（以防无法编程的其他人有时可能需要使用我的程序）

我设计了一个小方案，通过`.ini`这样的文件定义场景：

```
[primitivefoo]
type = sphere
pos = 10 20 30
radius = 5.5

[primitivebar]
type = triangle
vertexA = 10 10 -10
vertexB = ...
... 
```

你明白了。

我的计划是让每个子类在类中注册`Primitive`自己的方法。需要某种映射->的映射，以便我知道文件中的哪个类型字符串对应于.`interpretINI(...)``Scene``Scene``string``void* (...)``.ini``Primitive`

如果整个方法是糟糕的设计，并且已经有一种更优雅的方式来实现我想要实现的目标，我很想听听。如果没有，如果有人能帮助我实现我的设计，我将不胜感激。我被困在如何迭代所有`Primitive`子类以让它们在`Scene`...中注册自己

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:31:38.057

您的方法对我来说听起来不错，除了名称应该映射到返回的函数`Primitive*`（而不是`void*`）。这是工厂模式（在两个级别上）

这种方法的一个限制是注册的工厂函数必须接受相同数量/类型的参数。[更新：在阅读您对问题的评论后，这对您来说应该不是问题]。

我不知道枚举特定类的子类的任何自动方式，您需要手动注册已知类（在主类或特殊`register`函数中）

更新：您可以通过使用静态变量（类内或其他）来绕过子类枚举，这些变量将运行特定于问题类的“注册”函数：

```
class MyShape : public Shape
{
  static int reg;
  // appropriate constructor
};

int registerMyShape();

int MyShape::reg = registerMyShape(); // this will be called at program startup 
```

唯一的问题是，不能保证单独编译单元中的静态初始化顺序。也许您可以在注册表类完全初始化后使形状类似于模块并“加载”它们？

# jquery - jQuery Datepicker minDate 不起作用

> ID：10735528
> 
> 赞同：4
> 
> 时间：2012-05-24T10:19:39.047
> 
> 标签：jquery, jquery-ui, datepicker, mindate

我希望以下日期范围从 65 年前开始，到 18 年前结束。相反，minDate 数字被忽略，并设置为结束日期前 10 年。我在 minDate 中输入的任何值都没有区别。

```
$(function() {
    $("#datepicker").datepicker({
        changeMonth: true,
        changeYear: true,
        minDate: "-65y",
        maxDate: "-18y"
    });
});​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T10:36:54.450

您可以[`yearRange`](http://jqueryui.com/demos/datepicker/#option-yearRange)为此使用选项；

```
$('#datepicker').datepicker({
    changeMonth: true,
    changeYear: true,
    yearRange: "-65y:-18y"
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T10:31:25.460

这对我有用；

```
$("#txt_birthdate").datepicker({
  yearRange: "-100:-18",
  changeMonth: true,
  changeYear: true,
  maxDate: new Date()
}); 
```

# android - 转换为 Dalvik 格式失败，在 android 中出现错误 1

> ID：10735529
> 
> 赞同：-3
> 
> 时间：2012-05-24T10:19:39.693
> 
> 标签：android, asp.net

[2012-05-24 15:44:34 - myproject] Dx 故障处理“java/security/Provider.class”：

不构建核心库时对核心类（java.* 或 javax.*）的不明智或错误使用。

这通常是由于在使用 IDE（例如 Eclipse）时无意中在应用程序的项目中包含了核心库文件。如果您确定您不是故意定义核心类，那么这是对正在发生的事情的最可能的解释。

但是，您实际上可能正在尝试在核心命名空间中定义一个类，例如，您可能从非 Android 虚拟机项目中获取了该类的源代码。这肯定是行不通的。至少，它会危及您的应用程序与平台未来版本的兼容性。它的合法性也经常受到质疑。

如果你真的打算构建一个核心库——它只适合作为创建完整虚拟机发行版的一部分，而不是编译应用程序——然后使用“--core-library”选项来抑制这个错误消息。

如果您继续使用“--core-library”，但实际上正在构建应用程序，那么请预先警告您的应用程序在某些时候仍将无法构建或运行。请为愤怒的客户做好准备，他们会发现，例如，一旦他们升级操作系统，您的应用程序就会停止运行。你会为这个问题负责。

如果您合法地使用了一些恰好位于核心包中的代码，那么您拥有的最简单安全的替代方法是重新打包该代码。也就是说，将有问题的类移动到您自己的包命名空间中。这意味着它们永远不会与核心系统类发生冲突。JarJar 是一个可以帮助您完成这项工作的工具。如果你发现你做不到这一点，那么这表明你所走的道路最终会导致痛苦、痛苦、悲伤和悲叹。

[2012-05-24 15:44:34 - myproject] Dx 1 错误；中止 [2012-05-24 15:44:34 - myproject] 转换为 Dalvik 格式失败，错误 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:56:48.580

我在尝试构建 android 项目时遇到了相同的错误消息。原因是我在项目设置中添加了 android.jar 文件的副本作为引用库。当我删除此参考时，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:23:51.593

清理你的项目，然后检查你所有的可绘制名称，它们应该是小写字母。

# android - 如何在 android 中创建用于启动应用程序的接收器

> ID：10735530
> 
> 赞同：1
> 
> 时间：2012-05-24T10:19:40.627
> 
> 标签：android, android-intent, launching-application

我想通过限制某些应用程序（如 youtube 或 gtalk）的使用来加强企业安全。

我的服务在后台运行，它应该在启动任何列入黑名单的应用程序时显示主屏幕。

但是，没有启动 Activity/应用程序的意图。

请让我知道如何做到这一点。

我试过这个：

```
 ActivityManager activityManager = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
    List<RunningTaskInfo> tasks = activityManager.getRunningTasks(3);

    ComponentName componentInfo = tasks.get(0).topActivity;
    String pkgName = componentInfo.getPackageName();
    if (pkgName.contains("com.google.android.youtube")){

        activityManager.killBackgroundProcesses(pkgName);
        Intent homeIntent = new Intent(Intent.ACTION_MAIN);
        homeIntent.addCategory(Intent.CATEGORY_HOME);
        homeIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(homeIntent);

    } 
```

# spring - spring + hibernate + infinispan 作为二级缓存

> ID：10735531
> 
> 赞同：1
> 
> 时间：2012-05-24T10:19:43.030
> 
> 标签：spring, hibernate, jta, infinispan

我尝试在基于 spring+tomcat 的应用程序中将 infinispan 设置为休眠的二级缓存。

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${hibernate.connection.driver_class}"/>
    <property name="url" value="${hibernate.connection.url}"/>
    <property name="username" value="${hibernate.connection.username}"/>
    <property name="password" value="${hibernate.connection.password}"/>
    <property name="maxActive" value="${hibernate.connection.maxActive}"/>
    <property name="maxIdle" value="${hibernate.connection.maxIdle}"/>
    <property name="minIdle" value="${hibernate.connection.minIdle}"/>
    <property name="maxWait" value="${hibernate.connection.maxWait}"/>
</bean>

<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManager">
        <bean class="com.arjuna.ats.jta.TransactionManager" factory-method="transactionManager"/>
    </property>
    <property name="userTransaction">
        <bean class="com.arjuna.ats.jta.UserTransaction" factory-method="userTransaction"/>
    </property>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="packagesToScan" value="com.example"/>

    <!---->
    <property name="hibernateProperties" ref="db-properties"/>
</bean> 
```

属性是：

```
hibernate.cache.use_second_level_cache=true
hibernate.cache.use_query_cache=true
hibernate.cache.region.factory_class=org.hibernate.cache.infinispan.InfinispanRegionFactory 
```

我得到一个例外：

```
Caused by: org.infinispan.CacheException: This is transactional cache but no transaction manager could be found. Configure the transaction manager lookup properly. 
```

如何配置事务管理器查找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:12:54.333

spring 的简单答案是添加（在`id="sessionFactory"`spring XML 配置中）：

```
<property name="jtaTransactionManager" ref="transactionManager"/> 
```

这在 spring 3.2.2.RELEASE 中可用（它也可能在较旧的 spring 版本中可用，我猜从 spring 3.1.x 开始）

这应该实现史蒂夫·埃伯索尔（Steve Ebersole）所指出的。这会导致 Spring 通过类[https://github.com/SpringSource/spring-framework/blob/master/spring-orm-hibernate4/src/main/java/org/springframework/orm/hibernate4/ConfigurableJtaPlatform 提供一个 JtaPlatform。爪哇](https://github.com/SpringSource/spring-framework/blob/master/spring-orm-hibernate4/src/main/java/org/springframework/orm/hibernate4/ConfigurableJtaPlatform.java)

有关 JTA 使用的类 org.springframework.orm.hibernate4.LocalSessionFactoryBean（您正在使用）请参阅 JavaDoc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:52:19.353

Hibernate 和 Infinispan 都需要了解 TransactionManager。如果你告诉 Hibernate TransactionManager，它会反过来告诉你 Infinispan。我猜 Spring 有办法告诉 Hibernate JTA 设置，但我找不到它。Hibernate 就其本身而言（我看到您至少在尝试使用 Hibernate 4）需要被告知要使用哪个 org.hibernate.service.jta.platform.spi.JtaPlatform。org.hibernate.service.jta.platform.spi.JtaPlatform 是 Hibernate 知道如何与 JTA 环境交互的契约。

# android - 关于在其他应用程序上浮动覆盖/元素的 Android 信息

> ID：10735533
> 
> 赞同：6
> 
> 时间：2012-05-24T10:19:47.130
> 
> 标签：android, screen, overlay, launcher, floating

我正在寻找一些关于浮动覆盖的信息 不是 mapView 的覆盖，而是浮动在其他应用程序上的覆盖。

例如，这些应用程序正在做我正在寻找的东西：

[https://play.google.com/store/apps/details?id=com.pvy.batterybar](https://play.google.com/store/apps/details?id=com.pvy.batterybar)

[https://play.google.com/store/apps/details?id=ds.cpuoverlay](https://play.google.com/store/apps/details?id=ds.cpuoverlay)

即使我们不在应用程序中，它们也会在屏幕前显示元素

我尝试了一些搜索，但没有找到任何东西。

有人知道在哪里可以找到一些 API 文档、教程链接、一段代码...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:12:27.453

为此，您需要一个权限“ [android.permission.SYSTEM_ALERT_WINDOW](http://developer.android.com/reference/android/Manifest.permission.html#SYSTEM_ALERT_WINDOW) ”。在清单文件中添加权限后，执行以下操作：

```
final WindowManager.LayoutParams param=new WindowManager.LayoutParams();
param.flags=WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
final View view=findViewById(R.id.my_floating_view);
final ViewGroup parent=(ViewGroup)view.getParent();
parent.removeView(view);
param.format=PixelFormat.RGBA_8888;
param.type=WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;
param.gravity=Gravity.TOP|Gravity.LEFT;
param.width=view.getLayoutParams().width;
param.height=view.getLayoutParams().height;
final WindowManager wmgr=(WindowManager)getApplicationContext().getSystemService(Context.WINDOW_SERVICE);
wmgr.addView(view,param); 
```

另外，我相信这就是 Facebook 聊天头的做法。希望有帮助！

# python - 找不到别名的词法分析器

> ID：10735534
> 
> 赞同：2
> 
> 时间：2012-05-24T10:19:49.950
> 
> 标签：python, parsing, beautifulsoup, pygments

我正在尝试使用 Pygments 和 Beautiful Soup 作为我为 Google App Engine 构建的博客软件的代码突出显示解决方案。

它的工作原理是我的 HTML 帖子将使用 pre 标记来识别代码。像这样：

```
<p>Check out this cool code example<p>    
<pre class="python">
        import this
        def demo():
            pass</pre> 
```

`BeautifulSoup`捕获标签之间的部分`pre`并将其传递给 Pygments。Pygments 应该检查类值并应用正确的 lexar。Pygments 然后应用格式并用格式化的文本替换原始文本。[SaltyCrane 的博客](http://www.saltycrane.com/blog/2008/08/django-blog-project-12-adding-pygments-syntax-highlighting/)更详细地解释了该解决方案。

## 错误

```
ClassNotFound: no lexer for alias [u'python'] found 
```

也许我只是没有正确导入模块？

## 编码

```
from google.appengine.ext import db
import fix_path
import bs4
import pygments
from bs4 import BeautifulSoup
from pygments import highlight
from pygments.lexers import get_lexer_by_name
from pygments.formatters import HtmlFormatter

    def formatter(p):
        soup = BeautifulSoup(p.otext)
        preblocks = soup.findAll('pre')
        for pre in preblocks:
            if pre.has_key('class'):
                code = ''.join([unicode(item) for item in pre.contents])
                code = unescape_html(code)
                lexer = lexers.get_lexer_by_name(pre['class'])
                formatter = formatters.HtmlFormatter()
                code_hl = highlight(code, lexer, formatter)
                pre.replaceWith(BeautifulSoup(code_hl))
            else:
                print "No Go"
        return unicode(soup) 
```

## 追溯

```
Traceback (most recent call last):
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Users\john\webdev\google\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\john\webdev\workspace\bsby\views.py", line 45, in post
    p.ftext = utils.formatter(p)
  File "C:\Users\john\webdev\workspace\bsby\utils.py", line 18, in formatter
    lexer = lexers.get_lexer_by_name(pre['class'])
  File "C:\Users\john\webdev\workspace\bsby\lib\pygments\lexers\__init__.py", line 80, in get_lexer_by_name
    raise ClassNotFound('no lexer for alias %r found' % _alias)
ClassNotFound: no lexer for alias [u'python'] found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:21:01.060

是的，这就是问题所在。我没有导入脚本运行所需的库。这是正确的代码。

```
import fix_path
import bs4
import pygments
from bs4 import BeautifulSoup
from pygments import highlight
from pygments import lexers
from pygments import formatters

    def formatter(p):
        soup = BeautifulSoup(p.otext)
        preblocks = soup.findAll('pre')
        for pre in preblocks:
            if pre.has_key('class'):
                code = ''.join([unicode(item) for item in pre.contents])
                lexer = lexers.get_lexer_by_name("python")
                formatter = formatters.HtmlFormatter()
                code_hl = highlight(code, lexer, formatter)
                pre.replaceWith(BeautifulSoup(code_hl))
                return unicode(soup)
            else:
                return null 
```

这是另一个问题....

我想像这样动态地提取词法名称...

```
lexer = lexers.get_lexer_by_name(pre['class']) 
```

但是，当我这样做时，我收到以下错误。

```
ClassNotFound: no lexer for alias [u'python'] found 
```

如果我做

```
lexer = lexers.get_lexer_by_name("python") 
```

它有效，但仅适用于python。

# r - ggplot2：带有 facet_grid 和自由比例的箱线图

> ID：10735539
> 
> 赞同：7
> 
> 时间：2012-05-24T10:20:07.237
> 
> 标签：r, ggplot2, boxplot

我正在尝试在带有刻面的 Boxplot 图像上使用自由比例尺。

使用这个示例数据集，如果我尝试这个：

```
ggplot(data=mpg) +
geom_boxplot(aes(x=cty, y=model))+
facet_grid(manufacturer ~ drv, scales = "free", space = "free") 
```

[绘制不正确的箱线图 http://dl.dropbox.com/u/9788680/plot1.png](http://dl.dropbox.com/u/9788680/plot1.png)

在这里，自由比例完全按照我的意愿实现，y 轴的不同比例取决于水平刻面规则的可用因子的数量。然而，箱线图没有被正确描绘（即作为实线而不是箱线图）。在寻找解决方案时，我发现我应该使用 coord_flip() 以正确描绘箱线图，即

```
ggplot(data=mpg) +
geom_boxplot(aes(x=model,y=cty))+
facet_grid(manufacturer ~ drv, scales = "free", space = "free")+
coord_flip() 
```

[绘制正确的箱线图，但没有缩放 http://dl.dropbox.com/u/9788680/plot2.png](http://dl.dropbox.com/u/9788680/plot2.png)

在上图中，箱线图现在是正确的。但是，因子的自由比例（在 y 轴上）被删除。现在，对于每个水平分面线，现在包括数据集中的所有可用因子，而不仅仅是每个分面可用的因子（如图 1 所示）。

我想知道如何在两个轴上使用自由比例获得正确的刻面，正确描绘箱线图。

如果有人能指出我正确的方向，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-08T12:34:15.440

至少从 ggplot2 2.2.1 开始支持所需的行为。

```
library(ggplot2)
ggplot(data=mpg[which(mpg$manufacturer %in% c('audi', 'hyundai', 'jeep')),]) +
  geom_boxplot(aes(x=model,y=cty)) +
  facet_grid(manufacturer ~ drv, scales = "free", space = "free") +
  coord_flip() 
```

![](../Images/c484ed4cbd20774c7b148aec18a340b7.png)

```
sessionInfo()
#> R version 3.3.2 (2016-10-31)
#> Platform: x86_64-apple-darwin13.4.0 (64-bit)
#> Running under: OS X El Capitan 10.11.6
#> 
#> locale:
#> [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
#> 
#> attached base packages:
#> [1] stats     graphics  grDevices utils     datasets  methods   base     
#> 
#> other attached packages:
#> [1] ggplot2_2.2.1
#> 
#> loaded via a namespace (and not attached):
#>  [1] Rcpp_0.12.11         digest_0.6.12        rprojroot_1.2       
#>  [4] plyr_1.8.4           grid_3.3.2           gtable_0.2.0        
#>  [7] backports_1.0.5      magrittr_1.5         evaluate_0.10.1     
#> [10] scales_0.4.1.9002    rlang_0.1.1.9000     stringi_1.1.5       
#> [13] reshape2_1.4.2       lazyeval_0.2.0       rmarkdown_1.6.0.9001
#> [16] labeling_0.3         tools_3.3.2          stringr_1.2.0       
#> [19] munsell_0.4.3        yaml_2.1.14          colorspace_1.3-2    
#> [22] htmltools_0.3.6      knitr_1.16           tibble_1.3.3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T17:26:02.010

我昨天独立注意到水平 bxoplots 显示为线条 - 我还不确定它是错误还是功能，或者它可以更改

在你的情况下，我这样做了

```
library(ggplot2)
ggplot(data=mpg) +
  geom_boxplot(aes(y=cty, x=model,fill=model))+
  facet_grid(manufacturer~drv, scales = "free", space = "free")+theme(axis.text.x=element_text(angle=90),legend.position="none") 
```

只是颠倒了 x 和 y，还有 facets=_grid 调用，添加了一些颜色并旋转了 x 标签 - 我认为这就是你想要翻转的

# visual-studio-2008 - 迁移文件问题 - “项目不存在”

> ID：10735545
> 
> 赞同：2
> 
> 时间：2012-05-24T10:20:36.853
> 
> 标签：visual-studio-2008, svn, msbuild

我有一个迁移文件。

```
cd F:\Manoj\Projects\Labtrack\eChecklist_Labinal\EngTrackingMigration
C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\MSBuild build.proj /t:Migrate 
```

我已经更新了我的 SVN 文件夹。并且 Microsoft Visual Studio 构建成功。它给出了一个错误“项目文件不存在”但我给出了正确的路径并且项目文件存在。所做的数据库更改没有反映在我的本地数据库中。这是什么原因。如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:08:04.893

首先，使用 >> 下的Visual Studio*命令提示符*，这样您就不必说明 MSBuild 的完整路径并确保已加载环境变量。`Microsoft Visual Studio 2008``Visual Studio Tools``Visual Studio 2008 Command Prompt`

然后验证 MSBuild 输入参数：

```
MSBuild "F:\Manoj\Projects\Labtrack\eChecklist_Labinal\EngTrackingMigration\build.proj" /t:Migrate 
```

如果仍然失败，您可以打开[日志记录](http://msdn.microsoft.com/en-us/library/ms171470%28v=vs.90%29.aspx)，例如：

```
MSBuild "F:\Manoj\Projects\Labtrack\eChecklist_Labinal\EngTrackingMigration\build.proj" /t:Migrate /l:FileLogger,Microsoft.Build.Engine;logfile=MyLog.log;append=true;verbosity=diagnostic 
```

# .net - 实体框架延迟加载仅加载集合中的一项

> ID：10735551
> 
> 赞同：1
> 
> 时间：2012-05-24T10:20:48.653
> 
> 标签：.net, entity-framework

我使用实体框架构建了两个应用程序，并尝试使用延迟加载来获取相关实体。其中一个延迟加载相关实体按预期工作，但我遇到另一个问题。我仍然可以加载相关实体，但是一旦检索到集合，我只会得到一个实体，即使应该有更多。

我用了：

```
base.ContextOptions.LazyLoadingEnabled = true; 
```

在我的数据上下文中。此外，我将我的相关收藏设为虚拟：

```
public virtual ICollection<Product> Products { get; set; } 
```

我现在花了一天多的时间来寻找这两个应用程序之间的区别，但我找不到任何东西。一个应用程序的位置包含事件并且工作正常。另一个有包含产品的类别，那是不工作的。有没有人遇到过类似的问题？！我在俯瞰什么。

问题是，当我在视图中迭代我的产品时，我只能看到集合中的一个元素：

```
@foreach(var Product in Model.Products) { @Product.Name } 
```

但是后来我只得到一个产品名称，甚至应该不止一个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-28T14:52:19.730

最近遇到一个类似的问题。我们的问题是该表有一个多列键，但其中一列可以为空，因此它不能用作实体键。

从 EF 的角度来看，我们尝试加载的实体都具有相同的密钥，因此只加载了第一个。

我们必须为这个表创建一个唯一的 ID 列来解决这个问题。

# svn - svn+ssh 忽略 ssh 密钥，并且不接受密码 - 为什么？

> ID：10735553
> 
> 赞同：0
> 
> 时间：2012-05-24T10:20:54.287
> 
> 标签：svn, ubuntu, ssh, ssh-keys

我正在设置一台 Ubuntu 10.04.4 机器以从远程服务器上的 Subversion 存储库中提取 Rails 应用程序。

我已经设置了 ssh 密钥身份验证，并且可以很好地登录 - 我可以以适当的用户身份从我的 Ubuntu 机器 ssh 到存储库所在的远程计算机，而无需提示输入密码。

但是，当尝试通过 svn+ssh 运行颠覆命令时，我的 capified Rails 应用程序安装失败。

我试过直接在 Ubuntu 机器上运行类似的 svn 命令，并看到同样的问题。

这不仅会提示我输入密码（忽略密钥），而且在手动输入时也不会接受密码。

```
rails@mubuntubox-001:~$ svn info —username scm_user —password XXXXXXX svn+ssh://scm.mydomain.co.uk/Users/Shared/Repositories/doodle_svn
Password:
Password:
Password:
svn: Network connection closed unexpectedly 
```

我相信这与 Rails 应用程序安装遇到的问题相同。

任何有关导致 svn+ssh 密钥/密码访问被拒绝的提示都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:23:54.650

好的，将其归档在“误导性错误消息”下。

问题是 [或似乎是] svn 参数 --username 不是用于设置 ssh 连接的参数。因此，它默认为我的本地用户，这在我的 SVN 服务器上不存在。

在 svn+ssh 中指定用户（如下）修复了这个...

```
svn info —username scm_user —password XXXXXXX svn+ssh://scm_user@scm.mydomain.co.uk/Users/Shared/Repositories/doodle_svn 
```

# php - 是否可以在 PHP 中找到所有 8 个字符长的字符串？

> ID：10735556
> 
> 赞同：1
> 
> 时间：2012-05-24T10:21:03.543
> 
> 标签：php, string

我知道 strlen 用于确定字符串长度 - 但是否可以搜索整个文本块并提取正好 8 个字符长的字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T10:24:52.030

以下假设“字符串正好八个字符长”您的意思是“单词”，例如在文本中

```
$blockOfText = <<< TXT
codepad is an online compiler/interpreter, and a simple collaboration tool.
Paste your code below, and codepad will run it and give you a short URL you 
can use to share it in chat or email. 
TXT; 
```

你只想找到“编译器”这个词。

* * *

## 非正则表达式解决方案（[演示](http://codepad.viper-7.com/XxofNm)）：

```
print_r(
    array_filter(
        str_word_count($blockOfText, 1),
        function($word) { return strlen($word) === 8; }
    )
); 
```

### 参考：

*   [`str_word_count`— 返回有关字符串中使用的单词的信息](http://php.net/str_word_count)
*   [`array_filter`— 使用回调函数过滤数组元素](http://php.net/array_filter)
*   [回调](http://php.net/manual/en/language.types.callable.php)
*   [匿名函数](http://php.net/closures)

* * *

## 正则表达式解决方案（[演示](http://codepad.viper-7.com/yfFYV1)）：

```
preg_match_all(
    '(
        \b     # match from a word boundary
        \w{8}  # followed by exactly 8 "word" characters
        \b     # followed by a word boundary
    )x', 
    $blockOfText, 
    $matches
);
print_r($matches[0]); 
```

> “单词”字符是任何字母或数字或下划线字符，即任何可以成为 Perl “单词”一部分的字符。字母和数字的定义由 PCRE 的字符表控制，并且如果发生特定于语言环境的匹配，可能会有所不同。例如，在“fr”（法语）语言环境中，一些大于 128 的字符代码用于重音字母，这些字符由 \w 匹配。

### 参考：

*   [`preg_match_all`— 执行全局正则表达式匹配](http://php.net/preg_match_all)
*   [PCRE 模式语法](http://php.net/manual/en/reference.pcre.pattern.syntax.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:24:28.490

使用`explode()`或`preg_split()`通过分隔符拆分字符串并遍历结果数组并使用`strlen()`.

简单示例，查找长度为 2 的所有内容：

```
$string = "abcd ab abc abd ad";
$array = explode(' ', $string);
foreach ($array as $part) {
    if (strlen($part) == 2) {
        echo '"' . $part . '" has a length of 2<br />';
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:27:40.897

```
preg_match_all("/\b[a-zA-Z]{8}\b/", $sText, $aMatches);
$aWords = $aMatches[0]; 
```

另请参阅[此示例](http://ideone.com/00ZOq)。

# android - 选择图片Intent导致nullpointer异常

> ID：10735562
> 
> 赞同：4
> 
> 时间：2012-05-24T10:21:19.280
> 
> 标签：android, image

```
 public void uploadpicture(View view)
        {
            Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(Intent.createChooser(intent,
                    "Select Picture"), SELECT_PICTURE);
        }
        public void onActivityResult(int requestCode, int resultCode, Intent data)
            {

            if (resultCode == RESULT_OK)
                 {
                if (requestCode == SELECT_PICTURE) 
                     {

                    Uri selectedImageUri = data.getData();
                    selectedImagePath = getPath(selectedImageUri);
                    Toast.makeText(this,selectedImagePath,Toast.LENGTH_SHORT).show();
                    Log.i("selectedImagePath",selectedImagePath.trim());

                }

            }

        } 
```

我从 Log-cat 那里得到了这个：

```
05-24 15:57:51.054: E/AndroidRuntime(18016): FATAL EXCEPTION: main
05-24 15:57:51.054: E/AndroidRuntime(18016): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.android.sec.gallery3d.provider/picasa/item/5147009501910019474 }} to activity {ncpl.talentapp/ncpl.talentapp.SignUp}: java.lang.NullPointerException
05-24 15:57:51.054: E/AndroidRuntime(18016):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2821)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2864)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at android.app.ActivityThread.access$1000(ActivityThread.java:122)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1057)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at android.os.Looper.loop(Looper.java:132)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at android.app.ActivityThread.main(ActivityThread.java:4126)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at java.lang.reflect.Method.invokeNative(Native Method)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at java.lang.reflect.Method.invoke(Method.java:491)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
05-24 15:57:51.054: E/AndroidRuntime(18016):    at dalvik.system.NativeStart.main(Native Method)
05-24 15:57:51.054: E/AndroidRuntime(18016): Caused by: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T08:56:43.317

从您的日志看来，您正在尝试从 Picasa 文件夹中选择图像`dat=content://com.android.sec.gallery3d.provider/picasa/item/5147009501910019474`，并且必须以不同方式处理这些图像，因为`MediaStore.Images.Media.DATA`列中的数据对于它们来说将为空。您可以在此链接中了解如何正确处理从 Picasa 中挑选图片：

[http://dimitar.me/how-to-get-picasa-images-using-the-image-picker-on-android-devices-running-any-os-version/](http://dimitar.me/how-to-get-picasa-images-using-the-image-picker-on-android-devices-running-any-os-version/)

只有您还需要处理以“content://com.sec.android.gallery3d”开头的 URI（我在三星 S3 上看到）所以改变

```
if (selectedImage.toString().startsWith("content://com.google.android.gallery3d")) 
```

至

```
if (_selectedImage.toString().startsWith("content://com.google.android.gallery3d") 
    || selectedImage.toString().startsWith("content://com.sec.android.gallery3d")) 
```

我不确定是否还有其他特殊情况（可能是）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-19T19:05:26.767

我遇到了同样的问题，并尝试根据推荐的网站 user1682516 来实现它。因为我的 Picasa 内容 URL 不完全匹配，所以我把头撞到了墙上：我的看起来像“com.sec.android.gallery3d.provider”而不是“com.android.gallery3d.provider”，但似乎不匹配无论我是否更改了 URL，都可以工作。

然后，当我最终意识到我用来在我的应用程序中为 ImageViews 加载远程图像的库[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)为我解决了这个问题时，我感到很愚蠢。我可以使用适当的参数调用 ImageLoader.getInstance().loadImage() 并在回调中获取位图。我不需要担心它是本地图像、远程 Picasa 图像还是普通的远程图像——这由我负责。希望我几个小时前就知道了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-11T07:44:41.933

在三星 SM-A520F 上测试。如果您只想从图库中选择本地图像，则可以使用：

```
fun uploadpicture(view: View?) {
        val intent = Intent()
        intent.type = "image/*"
        intent.action = Intent.ACTION_GET_CONTENT
        intent.putExtra(Intent.EXTRA_LOCAL_ONLY, true) // Restrict choice
        startActivityForResult(Intent.createChooser(intent,
                "Select Picture"), SELECT_PICTURE)
    } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-24T10:33:59.653

测试代码在这里

```
public class SelectPhotoActivity extends Activity {

private static final int SELECT_PICTURE = 1;
private String selectedImagePath="";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = new Intent();
    intent.setType("image/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    intent.addCategory(Intent.CATEGORY_OPENABLE);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivityForResult(intent, SELECT_PICTURE); 
}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE)
        {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);
           // here you can set the image
            }
    }
}

} 
```

# javascript - 正则表达式匹配一个数字代码（数字、星号和锐利）

> ID：10735569
> 
> 赞同：1
> 
> 时间：2012-05-24T10:21:32.967
> 
> 标签：javascript, regex

谁能帮我写一个正则表达式，我将用它来验证必须符合以下标准的javascript中的字段（代表一个digicode）？

*   需要有 4 到 6 个数字（0 到 9）
*   需要在开头或结尾有 1 *（星号）或 1 #（锐角）

所以以下工作：

*   1234*
*   *12345
*   56789#
*   #456789

以下不起作用：

*   1234
*   1*234
*   *1234*
*   *1234#
*   1234*#
*   abcde

非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:30:16.577

```
^(?:[*#]\d{4,6}|\d{4,6}[*#])$ 
```

[在 Regexr 上](http://regexr.com?3126e)查看

你可能想阅读一些关于正则表达式的基础知识：[每个程序员都应该知道的关于正则表达式](http://blog.xisb.de/?p=4)的知识（我自己的博客文章）我在这里使用的所有内容都在这里介绍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:33:58.033

```
var s,
    rg1=/^[*#]\d{4,6}$/,
    rg2=/^\d{4,6}[*#]$/;

s="1234*"; console.info(rg1.test(s)||rg2.test(s));
s="*12345"; console.info(rg1.test(s)||rg2.test(s));
s="56789#"; console.info(rg1.test(s)||rg2.test(s));
s="#456789"; console.info(rg1.test(s)||rg2.test(s));

s="1234"; console.info(rg1.test(s)||rg2.test(s));
s="1*234"; console.info(rg1.test(s)||rg2.test(s));
s="*1234*"; console.info(rg1.test(s)||rg2.test(s));
s="*1234#"; console.info(rg1.test(s)||rg2.test(s));
s="1234*#"; console.info(rg1.test(s)||rg2.test(s));
s="abcde"; console.info(rg1.test(s)||rg2.test(s)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:27:50.667

不知道这是否可以更优化。在 node.js 中测试：

```
var x = new RegExp(/^[*#]\d{4,6}$|^\d{4,6}[*#]$/); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T10:30:39.650

这应该适合你；

```
var expression = /^([*#]?\d{4,6}|\d{4,6}[*#]?)$/; 
```

并且匹配必须至少在 * 或 # 上的地方，即不仅仅是 1234

```
var expression = /^([*#]\d{4,6}|\d{4,6}[*#])$/; 
```

# android - 将源附加到android eclipse项目中的外部jar

> ID：10735571
> 
> 赞同：11
> 
> 时间：2012-05-24T10:21:36.180
> 
> 标签：android, eclipse

我正在构建一个使用多个第三方库的 android 应用程序。我已将它们添加到 /libs 目录，它们会自动添加到名为“Android Dependencies”的库中。但是，当在“配置构建路径”视图中并尝试附加源时，选择源的对话框不会显示。此外，它似乎被标记为“不可修改”

如何附加源？

这是一个屏幕截图。

![截屏](../Images/ef208a20e9eb5fb9dcd572614f872da4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T01:01:57.147

似乎这在 Android SDK 中被破坏了，正如这个 bug 中所报告的：

[http://code.google.com/p/android/issues/detail?id=28658](http://code.google.com/p/android/issues/detail?id=28658)

似乎有一种解决方法，如下所示：

[https://android-review.googlesource.com/#/c/35702/](https://android-review.googlesource.com/#/c/35702/)

由于该解决方法是最近才修复的，它可能在最新版本的 SDK 中不可用，问题的状态似乎表明它尚不可用，虽然我自己没有尝试过，所以可能会更正。

# bash - 在 Bash 中获取文件（仅当它存在时）的最简洁方法是什么？

> ID：10735574
> 
> 赞同：33
> 
> 时间：2012-05-24T10:21:57.333
> 
> 标签：bash, error-handling, include

在 Bash 脚本中，是否有一个单独的语句替代方案？

```
if [ -f /path/to/some/file ]; then
    source /path/to/some/file
fi 
```

最重要的是文件名只存在一次，而不是使其成为变量（这会增加更多行）。

例如，在 PHP 中你可以这样做

```
@include("/path/to/some/file"); // @ makes it ignore errors 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-24T12:54:21.630

是在定义您自己`@include`的选项版本吗？

```
include () {
    [[ -f "$1" ]] && source "$1"
}

include FILE 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-24T11:51:36.950

如果您担心单行而不重复文件名，也许：

```
FILE=/path/to/some/file && test -f $FILE && source $FILE 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-24T10:39:33.380

如果您担心警告（并且缺少源文件对您的脚本来说并不重要），只需摆脱警告：

```
source FILE 2> /dev/null 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-24T10:25:50.447

你可以试试

```
test -f $FILE && source $FILE 
```

如果返回 false，则不评估`test`的第二部分`&&`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-02T11:58:07.910

这是我能得到的最短的（文件名加上 20 个字符）：

```
F=/path/to/some/file;[ -f $F ] && . $F 
```

它相当于：

```
F=/path/to/some/file 
test -f $F && source $F 
```

为了提高可读性，我更喜欢这种形式：

```
FILE=/path/to/some/file ; [ -f $FILE ] && . $FILE 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-04-04T19:12:22.470

如果您想始终获得干净的退出代码，并且无论如何都继续，那么您可以执行以下操作：

```
source ~/.bashrc || true && echo 'is always executed!' 
```

如果您还想摆脱错误消息，那么：

```
source ~/.bashrc 2> /dev/null || true && echo 'is always executed!' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-24T10:39:37.653

如果您不关心脚本的输出，您可以将标准错误重定向到`/dev/null`以下内容：

`$ source FILE 2> /dev/null`

# iphone - iPad 应用程序在启动相机时崩溃

> ID：10735575
> 
> 赞同：-2
> 
> 时间：2012-05-24T10:22:03.653
> 
> 标签：iphone, ios, ipad, qr-code, ip-camera

我正在创建一个应用程序，我需要在其中启动相机并扫描 QR 码。我正在使用一个扫描仪启动的类。它在 iPhone 中很好，但在 iPad 中崩溃。我正在使用代码

```
if(![[appDelegate.tabbarcontroller.viewControllers objectAtIndex:1] isMovingFromParentViewController]) { 
    [[appDelegate.tabbarcontroller.viewControllers objectAtIndex:1] popToRootViewControllerAnimated:NO];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:36:35.827

在 iOS 中使用**防御性编程**是防止崩溃的非常好的策略。

关于您的问题，来自 Apple doc：

> 要使用包含其默认控件的图像选择器控制器，请执行以下步骤：
> 
> 验证设备是否能够从所需的来源中挑选内容。执行此操作调用 isSourceTypeAvailable: 类方法，提供来自“UIImagePickerControllerSourceType”枚举的常量。
> 
> 通过调用 availableMediaTypesForSourceType: 类方法，检查哪些媒体类型对于您正在使用的源类型可用。这使您可以区分可用于视频录制的相机和仅可用于静止图像的相机。

Mugunth **Kumar**的[iphone-tutorial-better-way-to-check-capabilities-of-ios-devices](http://blog.mugunthkumar.com/coding/iphone-tutorial-better-way-to-check-capabilities-of-ios-devices/)链接提供了检查设备功能所需的信息。

 **希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T07:21:43.270

使用媒体时，您可以使用以下代码检查 AVAuthorization 状态。

```
/*
// Media types
AVF_EXPORT NSString *const AVMediaTypeVideo    NS_AVAILABLE(10_7, 4_0);
AVF_EXPORT NSString *const AVMediaTypeAudio    NS_AVAILABLE(10_7, 4_0);
AVF_EXPORT NSString *const AVMediaTypeText    NS_AVAILABLE(10_7, 4_0);
AVF_EXPORT NSString *const AVMediaTypeClosedCaption    NS_AVAILABLE(10_7, 4_0);
AVF_EXPORT NSString *const AVMediaTypeSubtitle    NS_AVAILABLE(10_7, 4_0);
AVF_EXPORT NSString *const AVMediaTypeTimecode    NS_AVAILABLE(10_7, 4_0);
AVF_EXPORT NSString *const AVMediaTypeMetadata    NS_AVAILABLE(10_8, 6_0);
AVF_EXPORT NSString *const AVMediaTypeMuxed    NS_AVAILABLE(10_7, 4_0);
*/

AVAuthorizationStatus status = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeVideo];
if(status == AVAuthorizationStatusAuthorized)
{
    // authorized
    NSLog(@"authorized");
}
else if(status == AVAuthorizationStatusDenied)
{
    // denied
    NSLog(@"denied");
}
else if(status == AVAuthorizationStatusRestricted)
{
    // restricted
    NSLog(@"restricted");
}
else if(status == AVAuthorizationStatusNotDetermined)
{
    // not determined
    NSLog(@"not determined");

    [AVCaptureDevice requestAccessForMediaType:AVMediaTypeVideo completionHandler:^(BOOL granted) {
        if(granted){ // Access has been granted ..do something

        } else { // Access denied ..do something

        }
    }];
} 
```**

# ruby - Redis 存储地理信息，

> ID：10735583
> 
> 赞同：2
> 
> 时间：2012-05-24T10:22:39.550
> 
> 标签：ruby, database, node.js, memcached, redis

我只是遇到一个问题。我使用 redis 来存储地理信息。例如：

```
hset 10001 la 41.000333
hset 10001 lo 121.999999 
```

或者

```
zadd la 41.xxxxx pk-value
zadd lo 121.xxxxx pk-value 
```

大约 40000 个键值，该键用于终端 ID，并设置值，存储终端 gps 信息。我需要计算周围的终端。例如，我的位置是 41.000123、121.999988，我想以最快的速度计算我所在位置周围的终端，我知道如何计算这两个位置的距离。我想要的只是想一种快速迭代所有数据的方法。在 Redis 2.6 中有 lua 支持。它可以帮助解决我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:08:42.167

您可能想要使用 geohashes，然后您将能够以您想要的任何精度存储（和搜索）经度/纬度，而且获取给定边界框中的点也相对容易。

要使用 redis 实现，请查看[geodis](https://github.com/doat/geodis)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:01:12.863

据我了解您的问题，您想找到接近某个坐标的所有值吗？一种方法是使用 Lua 脚本，另一种方法是为每个近似的纬度/经度存储一个排序集（如果您事先知道所需的粒度）。例子：

```
zadd la.41 41.000333 pk-value
zadd lo.121 121.999999 pk-value 
```

然后，当您需要找到接近某些坐标的东西（比如说`(42.01, 122.03)`）时，您会执行以下操作：

```
lat = 42.01
lon = 122.03
lat_min, lat_mid, lat_max = round(lat - 1), round(lat), round(lat + 1)
lon_min, lon_mid, lon_max = round(lon - 1), round(lon), round(lon + 1) 
```

因此，您将查看已排序的集合`la.41`, `la.42`, `la.43`, `lo.121`, `lo.122`, `lo.123`:

```
zinterstore close.${lat},${lon} 6 la.${lat_min}, la.${lat_mid}, la.${lat_max}, lo.${lon_min}, lo.${lon_mid}, lo.${lon_max} 
```

现在，`close.${lat},${lon}`应该包含靠近所提供坐标的每个终端的 ID。

显然，您可以以更大的粒度存储每个坐标，例如`la.41.0`，`lo.121.0`并仅查找关闭的终端。或者，您可以在客户端代码中进一步过滤结果。

# httpclient - HTTPClient 无法在 https 和 http 之间建立路由

> ID：10735586
> 
> 赞同：5
> 
> 时间：2012-05-24T10:23:00.393
> 
> 标签：httpclient, routes

我正在通过混合使用 http 和 https 链接来测试 HttpClient 4.2。

HttpClient 似乎坚持使用第一次调用的协议。如果第一个调用是 http，那么后面的所有 https 调用都会失败，但 http 调用很好。反之亦然。

这是我使用的测试代码。

```
@Test
public void testNoRedirectMixed() throws ClientProtocolException, IOException {
    HttpClient httpclient = new DefaultHttpClient();
    httpclient=WebClientDevWrapper.wrapClient(httpclient);
    HttpClientParams.setRedirecting(httpclient.getParams(), false);

    {
    HttpGet httpget = new HttpGet("http://www.hotmail.com");
    HttpResponse response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    assertTrue(EntityUtils.toString(entity).indexOf("com")>0);
    }

    try {
    HttpGet httpget = new HttpGet("https://www.hotmail.com");
    HttpResponse response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();

    }catch (Exception e) {
        e.printStackTrace();
    }

    {
    HttpGet httpget = new HttpGet("http://www.baidu.com");
    HttpResponse response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    assertTrue(EntityUtils.toString(entity).indexOf("com")>0);
    }
} 
```

第二个请求（https）会失败，但是百度请求没问题。

引起：org.apache.http.HttpException：无法建立路由：planned = {s}-> [https://www.hotmail.com](https://www.hotmail.com)；当前 = {s}-> [http://www.hotmail.com](http://www.hotmail.com) at org.apache.http.impl.client.DefaultRequestDirector.establishRoute(DefaultRequestDirector.java:842)

我还必须禁用重定向，因为 hotmail 重定向请求： http: [//www.hotmail.com](http://www.hotmail.com) -> [https://www.hotmail.com](https://www.hotmail.com)或[https://www.hotmail.com](https://www.hotmail.com) -> [https://www.live .com](https://www.live.com) _ 在任何一种情况下都会引发类似的错误。

包装器如下所示。它用于接受所有证书。

```
public class WebClientDevWrapper {

    public static HttpClient wrapClient(HttpClient base) {
        try {
            SSLContext ctx = SSLContext.getInstance("TLS");
            X509TrustManager tm = new X509TrustManager() {

                public void checkClientTrusted(X509Certificate[] xcs,
                        String string) throws CertificateException {
                }

                public void checkServerTrusted(X509Certificate[] xcs,
                        String string) throws CertificateException {
                }

                public X509Certificate[] getAcceptedIssuers() {
                    return new X509Certificate[]{};
                }
            };
            ctx.init(null, new TrustManager[] { tm }, null);
            SSLSocketFactory ssf = new SSLSocketFactory(ctx);
                ssf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
            ClientConnectionManager ccm = base.getConnectionManager();
            SchemeRegistry sr = ccm.getSchemeRegistry();
            sr.register(new Scheme("https", ssf, 443));
            DefaultHttpClient client= new DefaultHttpClient(ccm, base.getParams());
            return client;
        } catch (Exception ex) {
            ex.printStackTrace();
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T15:32:25.950

HttpClient 应该能够对用户绝对透明地管理连接。此问题可能是由 4.2 版本中引入的回归引起的（[请参阅 HTTPCLIENT-1193](https://issues.apache.org/jira/browse/HTTPCLIENT-1193)）。

在 4.2.1 版本发布之前，使用 PoolingConnectionManager 或 SingleConnectionManager 而不是默认的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:07:44.217

您正在尝试使用一个连接与多个不同的站点进行通信。AFAIR 您必须为每个唯一站点创建新连接（== 新客户端）。

# css - Rails 应用程序中的 f.label

> ID：10735589
> 
> 赞同：0
> 
> 时间：2012-05-24T10:23:11.703
> 
> 标签：css, ruby-on-rails-3

我目前在我的 Rails 应用程序中使用两种表单，一种用于联系表单，另一种用于登录表单。他们都在语法中使用 f.label ，例如白色。

我希望文本在一个是白色的，另一个是黑色的。通常我只会创建一个类，然后使用相关的 ID，但不确定在这种情况下如何使用 f.label。我可以使用内联样式，但这会破坏 CSS 的对象。

以前有人处理过这个问题吗？

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:32:17.363

您可以为每个表单指定 ID，然后在 CSS 文件中指定样式。

```
#login_form label {
  color: #fff;
}

#contact_form label {
  color: #000;
} 
```

# c# - 关联表和 Linq to Sql

> ID：10735590
> 
> 赞同：2
> 
> 时间：2012-05-24T10:23:12.310
> 
> 标签：c#, .net, sql-server, linq, linq-to-sql

假设我有树表用户、产品和用户产品。

一个用户可以有很多产品，一个产品可以分配给很多用户。

我想用 linq 检索所有用户产品。我在 User.cs 类中创建了这个方法：

```
 public List<Product> GetProductList()
    {
        List<Product> listProduct = new List<Product>();
        List<UserProduct> listUserProduct = this.UserProdutcs.ToList();

        foreach (var item in listUserProduct )
        {
            listProduct.Add(item.Product);
        }

        return listProduct; 
    } 
```

我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:26:45.890

您可以使用`LINQ`并投影到匿名类型：

```
var newList = (from products in listProduct
           join uProducts in listUserProduct on products.id equals uProducts.productId
           select new {
                ProductDescription = products.Description,
                ProductAttribute = products.YourAttributes,
                ProductUserProductAttribute = uProducts.YourAttribute
           }).ToList(); 
```

# c# - DBNull 中的额外延迟获取结果

> ID：10735592
> 
> 赞同：1
> 
> 时间：2012-05-24T10:23:30.500
> 
> 标签：c#, nhibernate, mapping

让我们假设以下集合：

```
<list name="Items" inverse="true" cascade="all-delete-orphan" lazy="extra">
    <key column="ItemId"/>
    <index column="Sortorder" />
    <one-to-many class="MyProject.Model.Item, MyProject"/>
</list> 
```

最初是`lazy="true"`，但我想提高性能。只要有物品，它就可以很好地工作。如果没有，以下语句将导致`System.InvalidCastException: Object cannot be cast from DBNull to other types.`：

```
if (items.Count > 0) { // Type of items: IList<item> 
```

不过，这确实有效`lazy="true"`。我在这里想念什么？

sl3dg3

编辑：整个堆栈跟踪：

`[InvalidCastException: Object cannot be cast from DBNull to other types.] System.DBNull.System.IConvertible.ToInt32(IFormatProvider provider) +56 System.Convert.ToInt32(Object value) +28 NHibernate.Persister.Collection.AbstractCollectionPersister.GetSize(Object key, ISessionImplementor session) +334 NHibernate.Collection.AbstractPersistentCollection.ReadSize() +132 NHibernate.Collection.PersistentList.get_Count() +12 MyProject.Provider.MyProvider.SomeMethod() in [...]`

第二次编辑：如果我用调试器打开集合，有一个来自源的 HResult`mscorelib`听起来好像错误已经出现在 .com 的深处 - 世界......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:32:02.800

从我看到的“项目”可能是空的，你正在尝试对空值执行 Count() 。最好在尝试 Count() 之前检查它是否为空

# ruby-on-rails - Rails 的 Ransack 搜索与关联模型的复选框

> ID：10735595
> 
> 赞同：3
> 
> 时间：2012-05-24T10:23:46.023
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, forms, ransack

当我使用 Rails Serching gem 'ransack' 时，我迷路了。

我想要做的是为关联模型工作复选框。

这是我的代码。

显示控制器.rb

```
class ShowsController < ApplicationController
def index
    @q = Show.search(params[:q])
    @shows = @q.result(:distinct => true)
    @shows = @shows.joins(:tickets)

    respond_to do |format|
      format.html # index.html.erb                                                                                                       
      format.json { render json: @shows }
    end
end 
```

index.html.erb

```
<%= search_form_for @q do |f| %>
  <%= f.label "Show's Title: " %>
  <%= f.search_field :title_cont %>
  <%= f.label "Buy at:" %>
  <%= check_box_tag 'q[shows_tickets_store_cont[]]', 'venue' %>At Venue
  <%= check_box_tag 'q[shows_tickets_store_cont[]]', 'ticketmaster' %>Ticketmaster
  <%= submit_tag "Find Now" %>
<% end %>

<% @shows.each do |show| %>
  <%= show.title %> | 
  <% show.tickets.each do |ticket| %>
    <%= ticket.store %><br />
  <% end %>
<% end %> 
```

显示.rb

```
class Show < ActiveRecord::Base
  has_many :tickets
end 
```

票证.rb

```
class Ticket < ActiveRecord::Base
  belongs_to :show
end 
```

当我在 search_field 中写一些东西时，选中“check_box”并单击“Find Now”按钮，日志如下所示；

```
Parameters: {"utf8"=>"✓", "q"=>{"title_cont"=>"something", "shows_tickets_store_cont"=>"venue"}, "commit"=>"Find Now"}
Show Load (1.1ms)  SELECT DISTINCT `shows`.* FROM `shows` INNER JOIN `tickets` ON `tickets`.`show_id` = `shows`.`id` WHERE (`shows`.`title` LIKE '%something%') LIMIT 25 OFFSET 0 
```

我不知道为什么 SQL 没有`WHERE`Ticket.store 的子句，尽管票务控制器收到“shows_tickets_title_cont”=>“venue”。

请为此提出解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:51:25.667

实际上问题是因为你的第二个关键是：`shows_tickets_store_con`但是应该是`shows_tickets_store_cont`。如果它有 predicate ，它接受属性`_cont`。

**搜查文档：**

[https://github.com/ernie/ransack](https://github.com/ernie/ransack)

```
cont (contains) and start (starts with) are just two of the available search predicates. See Constants for a full list. 
```

**# 编辑 1**

我做了一点调查。

我认为您的方法不适合您的情况。如果所有`checkboxes`选项都被选中，那么您的元搜索将出现问题 - 您必须设置另一个`predicate`. 在您的情况下，它可能在谓词中-因为您使用`multiple values`（复选框）。

**拥有像这样的 SQL：**

```
"shows_tickets_store" IN ('venue','something') 
```

**可能的谓词：**

*   [https://github.com/ernie/ransack/wiki/Basic-Searching](https://github.com/ernie/ransack/wiki/Basic-Searching)
*   [https://github.com/ernie/ransack/blob/master/lib/ransack/constants.rb](https://github.com/ernie/ransack/blob/master/lib/ransack/constants.rb)

**另请阅读：**

*   [https://github.com/ernie/ransack/issues/20](https://github.com/ernie/ransack/issues/20)
*   [https://github.com/ernie/ransack/issues/53](https://github.com/ernie/ransack/issues/53)

# performance - Flash动画动态速度

> ID：10735600
> 
> 赞同：1
> 
> 时间：2012-05-24T10:24:07.333
> 
> 标签：performance, flash, animation, dynamic

我想知道flash中是否有可能动态改变动画速度？例如，如果我移动一些滑块，它会增加或降低动画速度。我知道如果在动作脚本中制作动画是可以做到的，但是如果动画很复杂并且在时间轴中制作，那又是什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:47:16.137

对于 Flash 中的复杂动画，只有一种选择，那就是使用[Greensock TweenMax](http://www.greensock.com/tweenmax/)库。

您可以使用最大时间轴创建复杂的动画，它允许您对补间、延迟补间等进行排序。

任何你能想到的都可以使用这个库来完成。

# javascript - 图像是否保证至少有 1 个宽度和 1 个高度？

> ID：10735601
> 
> 赞同：1
> 
> 时间：2012-05-24T10:24:08.753
> 
> 标签：javascript, html

当我们加载图像并且它的`onload`处理程序运行时，是否保证宽度和高度至少为一个？

```
var img = new Image();  
img.onload = function(){
    // is img.width and img.height guaranteed to be at least 1?
    // can we do something like assert img.width >= 1 && img.height >= 1
};
img.onerror = function(){
    alert("error");
}
img.src = 'MyImage.png'; 
```

基本上，我想知道*加载*的图像是否有可能具有 0 的宽度或高度？

或者更确切地说，是否有支持 0 宽或 0 高图像的图像扩展（gif、png、svg、jpg、exif、raw、bmp、tiff 等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:08:19.493

我不知道支持零图像宽度的单个光栅图像编码格式。SVG 可能可以，或者可能是另一种矢量格式，但没有光栅格式可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:05:26.473

width=0px 的图像有什么意义？那么你根本不应该把图像放在那里。所以是的，图像的最小宽度是 1px

但是当您以 % 为单位设置宽度时，可以设置

```
<img src="...." alt="image" width="0%" /> 
```

然后图像不可见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T12:14:34.623

好问题，但据我了解，不，您不能拥有 0 x 0 像素尺寸的图像文件。

使用 CSS 你可以

*   把它藏起来
*   使其成为 1x1 像素
*   绝对定位它，这样它就不会影响您的 UI 布局。

# python - 选择带有 AUI 笔记本 (wx) 的选项卡

> ID：10735602
> 
> 赞同：0
> 
> 时间：2012-05-24T10:24:13.263
> 
> 标签：python, select, tabs, wxwidgets

我将 wx 与 python 一起使用，我想创建一个带有选项卡的**AUI 笔记本**，其中包含两个按钮，允许用户**转到下一个选项卡**或**上**一个选项卡。是否有允许**按索引选择选项卡的**功能？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:29:00.877

是的，它在此处的 API 文档中：[http ://wxpython.org/docs/api/wx.aui.AuiNotebook-class.html](http://wxpython.org/docs/api/wx.aui.AuiNotebook-class.html)

```
notebook.SetSelection(index) 
```

谷歌搜索大约需要 10 秒！

# javascript - 减少谷歌加号按钮的页面重量

> ID：10735603
> 
> 赞同：3
> 
> 时间：2012-05-24T10:24:14.723
> 
> 标签：javascript, html, social

我目前正在开发一个网站，并希望包含 google plus 按钮。然而，我的问题是谷歌加号按钮为页面重量增加了 300kb。其中很多来自[http://apis.google.com/js/plusone.js](http://apis.google.com/js/plusone.js)文件调用的一个文件。

我设法通过异步加载将页面加载时间降至最低，但我想知道是否有任何方法可以调整代码以最小化页面重量？

这是我正在使用的代码...

```
<script>
    window.___gcfg = {lang: 'en-GB'};

    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script>

<div id="google-plusone">
    <g:plusone annotation="none" size="medium"></g:plusone>
</div> 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:41:09.150

您不应该真正担心它，因为它不会影响您的代码启动时间。大多数用户很可能已经将它放在缓存中并从那里加载它。试图以某种方式提供您自己的“最小化”副本实际上会适得其反，因为它不会从访问其他站点的缓存中获利。

# c++ - 在 C++ 中通过模板和继承使用未声明的标识符

> ID：10735611
> 
> 赞同：16
> 
> 时间：2012-05-24T10:24:57.070
> 
> 标签：c++, templates, inheritance

以下代码无法编译 - 使用未声明的标识符。我使用 GCC 和 XCode 进行编译。

一切都在一个头文件中。

```
include "MyArray.h"

template <typename T>
class MyBase {
public:
  MyBase();
  virtual ~MyBase();
  void addStuff(T* someStuff);
protected:
  MyArray<T*> stuff;
};

template <typename T>
MyBase<T>::MyBase() {}
template <typename T>
MyBase<T>::~MyBase() {}

template <typename T>
void MyBase<T>::addStuff(T* someStuff) {
  stuff.add(someStuff);
}

// ---------------------

template <typename T>
class MyDerived : public MyBase<T> {
public:
  MyDerived();
  virtual ~MyDerived();
  virtual void doSomething();
};

template <typename T>
MyDerived<T>::MyDerived() {}
template <typename T>
MyDerived<T>::~MyDerived() {}

template <typename T>
void MyDerived<T>::doSomething() {
  T* thingy = new T();
  addStuff(thingy); //here's the compile error. addStuff is not declared.
} 
```

有人有解释吗？提前致谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-24T10:29:23.043

尝试

```
this->addStuff(thingy); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-24T10:33:18.477

这是由于模板继承。在这种情况下，您应该手动指定使用基本方法：

```
template <typename T>
MyDerived<T>::doSomething() {
  using MyBase<T>::addStuff;
  T* thingy = new T();
  addStuff(thingy); 
} 
```

或者通过这个指针来做：

```
template <typename T>
MyDerived<T>::doSomething() {
  T* thingy = new T();
  this->addStuff(thingy); 
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-24T10:32:29.370

有几个问题：

1.  类定义后缺少分号。
2.  缺少`doSomething`方法声明/定义的类型。
3.  缺少`addStuff`方法定义的类型。

修复后[它似乎工作](http://ideone.com/X5t4R)。

**编辑：**因为您已经修复了语法错误，但它仍然无法正常工作。正如其他人所建议的那样，您的编译器可能会要求您使用前缀调用该`addStuff`方法：`this->`

```
this->addStuff(thingy); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-24T10:34:32.953

使用这个指针来调用 addStuff 方法，即

```
this->addStuff(thingy); 
```

# javascript - 如何获得 Iframe 提交表单的响应？

> ID：10735612
> 
> 赞同：6
> 
> 时间：2012-05-24T10:24:57.910
> 
> 标签：javascript, jquery, forms, iframe, response

我有一个使用 iframe 调用的表单，现在当提交该表单时，我想在主站点中捕获调用 iframe 的响应，并根据它启用/禁用主页中的按钮。
请任何人帮助我..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T12:30:32.210

您可以使用 window.postMessage API。它是 HTML5 功能，并非所有浏览器都支持此功能

在 iframe 和父站点中，您需要检查浏览器是否支持 postMessage

```
if (typeof window.postMessage != 'undefined') { } 
```

你可以发送你的消息

```
window.parent.postMessage("test","*"); 
```

在您的父母（主站点）中，您需要一个事件监听器

```
window.addEventListener('message', receive, false);

function receive(evt)
{
  // handles the event
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:37:26.167

提交表单后，只需`parent`在 iframe 中使用即可。

```
parent.document.getElementById('xx').innerHTML = "hello world"; 
```

# java - 签名 jar 的作者未知

> ID：10735617
> 
> 赞同：0
> 
> 时间：2012-05-24T10:25:12.693
> 
> 标签：java, security, applet, jarsigner, signed-applet

在Java中签名jar，我已经按照这三个步骤进行签名

1.  `keytool -genkey -keystore myKeyStore -alias me`
2.  `keytool -selfcert -keystore myKeyStore -alias me`
3.  `jarsigner -keystore myKeyStore jarfile.jar me`

我的问题如下：

1.  之后我运行了我的小程序，为什么它显示作者未知？
2.  我可以给`-validity`我的罐子没有天数，我可以给的最大天数是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:05:49.803

如`keytool` [*有效期*](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/keytool.html)中所述，

> 每个证书仅在有限的时间内有效。这段时间由开始日期和时间以及结束日期和时间来描述，可以短至几秒，也可以几乎长至一个世纪。

正如@Andrew 和@Robert 所指出的，专业软件需要专业签名的证书。对于随意使用，可以在共享另一个信任渠道的人之间使用自签名证书。它还可以帮助拒绝错误的误判。

*   A 编写了一个开源程序，签名为 A。
*   B 添加了恶意软件，并且无法签署 A，签署 B。
*   C 错误地获得了 B 的版本并指控 A 犯罪。
*   A 可以验证是否发生了篡改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:35:43.043

1.  您创建的证书是自签名证书。只有已由 Java 设置中标记为受信任的信任中心之一签名的证书才会显示为“已验证作者”。

2.  有效性与您的 JAR 文件的工作时间无关。有效期仅标志着您可以使用证书（或更好地属于证书的私钥）进行签名的时间

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T11:35:53.153

1.  它显示为“作者未知”，除非数字证书已通过密钥链认证回 CA（认证机构），例如 Verisign。“自签名”证书的问题在于，虽然您可以创建一个声称您就是您的证书，但其他人也可以创建一个声称***他们*就是*您*的证书。**
    由于一个“自签名”证书与下一个证书一样可以肯定地识别您（IE 毫无价值），因此 JRE 声明“作者未知”。
2.  我不确定，但我记得在以前的证书中使用了 5000 天。也许真正的问题是，在 JRE 永远不会信任到甚至无法显示身份的证书上，声称自己是谁值得多久？如果这是用于商业产品，我强烈建议完成验证（可能很昂贵）。即使是广泛分发的免费产品也不会受到伤害。

# java - 捕获 DOS（命令提示符）的输出并在 JAVA 框架中显示

> ID：10735619
> 
> 赞同：3
> 
> 时间：2012-05-24T10:25:21.460
> 
> 标签：java, capture

当我运行 python 脚本时，输出出现在 DOS 上（Windows 中的命令提示符）。

我希望输出显示在 JAVA 应用程序上，即包含 JTextArea 的窗口上。输出应与 DOS 上的相同。

那么，**如何捕获 DOS 的输出并将其插入 JAVA 应用程序？**

（我尝试将 python 脚本的输出存储在文本文件中，然后使用 JAVA 读取它。但是，在这种情况下，JAVA 应用程序首先等待脚本完成运行，然后显示输出。并且，当输出更多时比屏幕大小，会出现一个滚动条，这样我就可以看到整个输出。）

* * *

在crowder的评论之后，我运行了这段代码。但输出始终是：

错误：进程说：

```
import java.io.*;
import java.lang.*;
import java.util.*;
class useGobbler {
        public static void main ( String args[] )
        {
        ProcessBuilder pb; 
        Process p;
        Reader r;
        StringBuilder sb;
        int ch;

        sb = new StringBuilder(2000);

        try
        {
            pb = new ProcessBuilder("python","printHello.py");
            p = pb.start();

            r = new InputStreamReader(p.getInputStream());
            while((ch =r.read() ) != -1)
            {
                sb.append((char)ch);
            }

        }
        catch(IOException e)
        {
            System.out.println("error");

        }

        System.out.println("Process said:" + sb);
    }
} 
```

谁能告诉我我做错了什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:28:29.470

您可以通过 a 执行该过程[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)，这将为您提供一个[`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)实例，您可以在该实例上通过从[`getInputStream`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getInputStream%28%29).

这是一个运行 Python 脚本`hello.py`并在字符串中构建其输出的示例：

```
import java.io.Reader;
import java.io.IOException;
import java.io.InputStreamReader;

public class RunPython {
    public static final void main(String[] args) {
        ProcessBuilder  pb;
        Process         p;
        Reader          r;
        StringBuilder   sb;
        int             ch;

        // Start the process, build up its output in a string
        sb = new StringBuilder(2000);
        try {
            // Create the process and start it
            pb = new ProcessBuilder("python", "hello.py");
            p = pb.start();

            // Get access to its output
            r = new InputStreamReader(p.getInputStream());

            // Read until we run out of output
            while ((ch = r.read()) != -1) {
                sb.append((char)ch);
            }
        }
        catch (IOException ex) {
            // Handle the I/O exception appropriately.
            // Here I just dump it out, which is not appropriate
            // for real apps.
            System.err.println("Exception: " + ex.getMessage());
            System.exit(-1);
        }

        // Do what you want with the string; in this case, I'll output
        // it to stdout
        System.out.println("Process said: " + sb);
    }
} 
```

然后，您可以对字符串执行任何您喜欢的操作，包括将其放入`JTextArea`任何其他字符串中。（如果你愿意，你可以在`BufferedReader`周围使用 a `InputStreamReader`，但你明白了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:28:19.920

`Runtime.exec()`您可以在使用oder时连接到错误和 inputStream `ProcessBuilder`。

示例可以在这里找到： [http ://www.java-tips.org/java-se-tips/java.util/from-runtime.exec-to-processbuilder.html](http://www.java-tips.org/java-se-tips/java.util/from-runtime.exec-to-processbuilder.html)

# iphone - 如何以编程方式在 UIViewController 中创建多个 UITableView？

> ID：10735620
> 
> 赞同：2
> 
> 时间：2012-05-24T10:25:22.373
> 
> 标签：iphone, ipad, xcode4.3

我想在 UIViewController 中以编程方式创建 2 个 UITableView。对于 *firstTableDatas 和 *secondTableDatas 的数据，我有 2 个 NSMutableArray。我可以设法以编程方式创建一个 UITableView，但是当它变为 2 时，我很困惑代表的 2 个 UITableView 的返回值是什么：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
} 
```

和

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
} 
```

以及如何在 2 个单独的 UITableView 中加载数据。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:29:40.243

采用

```
if(tableView ==Firsttable)
{
...
}
else
{
...
} 
```

在

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:46:58.860

您可以检查如下：

```
if(tableView ==firstTableDatas)
{
    //Code related to First Table
}
else if(tableView ==secondTableDatas)
{
    //Code related to Second Table
} 
```

它将在 UITableViewDelegate 方法中工作。

快乐编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:36:12.783

给 tableView 和标签的基础上的差异标签做所需的功能

例如：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
      if(tableView.tag==1)
      {
          return 100;
      }
      else if(tableView.tag==2)
      {
           return 50;
      }
      return 40;
} 
```

# java - 如何根据限制在java中拆分字符串

> ID：10735621
> 
> 赞同：3
> 
> 时间：2012-05-24T10:25:28.933
> 
> 标签：java, string, string-split

我有以下字符串，当它的长度达到 36 时，我想将此字符串拆分为多个子字符串（通过以 ',' 作为分隔符）。它不完全拆分在第 36 位

```
 String message = "This is some(sampletext), and has to be splited properly"; 
```

**我想得到如下两个子字符串的输出：**
1\. **'这是一些（示例文本）'
2.'并且必须正确拆分'**

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:34:03.970

我能想到的最佳解决方案是创建一个遍历字符串的函数。在该函数中，您可以跟踪空白字符，并且对于每个第 16 个位置，您可以根据最后遇到的空白的位置将子字符串添加到列表中。在它找到一个子字符串后，您从最后遇到的空格重新开始。然后您只需返回子字符串列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T10:37:39.317

这应该适用于所有输入，除非有不超过 16 个空格的字符序列。它还通过索引到原始字符串来创建最少数量的额外字符串。

```
 public static void main(String[] args) throws IOException
  {
    String message = "This is some sample text and has to be splited properly";
    List<String> result = new ArrayList<String>();
    int start = 0;
    while (start + 16 < message.length())
    {
      int end = start + 16;
      while (!Character.isWhitespace(message.charAt(end--)));
      result.add(message.substring(start, end + 1));
      start = end + 2;
    }
    result.add(message.substring(start));
    System.out.println(result);
  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T10:41:30.180

这是一个整洁的答案：

```
String message = "This is some sample text and has to be splited properly";

String[] temp = message.split("(?<=^.{1,16}) ");
String part1 = message.substring(0, message.length() - temp[temp.length - 1].length() - 1);
String part2 = message.substring(message.length() - temp[temp.length - 1].length()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-24T10:48:09.897

基于正则表达式的解决方案：

```
 String s = "This is some sample text and has to be splited properly";
    Pattern splitPattern = Pattern.compile(".{1,15}\\b");
    Matcher m = splitPattern.matcher(s);
    List<String> stringList = new ArrayList<String>();
    while (m.find()) {
        stringList.add(m.group(0).trim());
    } 
```

更新：可以通过将模式更改为以空格结尾或字符串结尾来删除 trim()：

```
 String s = "This is some sample text and has to be splited properly";
    Pattern splitPattern = Pattern.compile("(.{1,15})\\b( |$)");
    Matcher m = splitPattern.matcher(s);
    List<String> stringList = new ArrayList<String>();
    while (m.find()) {
        stringList.add(m.group(1));
    } 
```

group(1) 意味着我只需要模式的第一部分 (.{1,15}) 作为输出。

.{1,15} - 长度在 1 到 15 之间的任意字符 (".") 序列 ({1,15})

\b - 断字（任何单词之前的非字符）

( |$) - 空格或字符串结尾

此外，我在 .{1,15} 周围添加了 ()，因此我可以将它作为一个整体使用 (m.group(1))。根据所需的结果，可以调整此表达式。

*更新*：如果您只想在长度超过 36 的情况下用逗号分割消息，请尝试以下表达式：

```
Pattern splitPattern = Pattern.compile("(.{1,36})\\b(,|$)"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-24T10:46:24.847

如果您有一个如上面显示的简单文本（由空格分隔的单词），您总是可以想到[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)。这是一些适用于您的案例的简单代码：

```
public static void main(String[] args) {

        String message = "This is some sample text and has to be splited properly";
        while (message.length() > 0) {
            String token = "";
            StringTokenizer st = new StringTokenizer(message);
            while (st.hasMoreTokens()) {
                String nt = st.nextToken();
                String foo = "";
                if (token.length()==0) {
                    foo = nt;
                }
                else {
                    foo = token + " " + nt;
                }
                if (foo.length() < 16)
                    token = foo;
                else {
                    System.out.print("'" + token + "' ");
                    message = message.substring(token.length() + 1, message.length());
                    break;
                }
                if (!st.hasMoreTokens()) {
                    System.out.print("'" + token + "' ");
                    message = message.substring(token.length(), message.length());
                }
            }
        }

    } 
```

# python - git svn dcommit -> 通过标准输入传递密码

> ID：10735627
> 
> 赞同：2
> 
> 时间：2012-05-24T10:26:03.893
> 
> 标签：python, git, git-svn, command-line-interface

我正在尝试从 python 脚本运行“git svn dcommit”命令并处理我必须手动指定的密码。该命令的标准输出是：

```
Committing to http://svn/trunk ...
Authentication realm: <http://svn:80> Active Directory credentials for users. Specific name and password for remote
Password for 'username': 
```

此时，我必须指定密码。好的，我需要从标准输出读取三行。

```
proc = subprocess.Popen(' git svn dcommit --username="username" ', shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE)
out = proc.stdout.readline()
print ":"+out
out = proc.stdout.readline()
print ":"+out
out = proc.stdout.readline()
print ":"+out
proc.stdin.write('password\n') 
```

但我明白了

```
:Committing to http://svn/trunk ...
Authentication realm: <http://svn:80> Active Directory credentials for users. Specific name and password for remote
Password for 'username': 
```

在此之后，脚本正在等待“git svn dcommit”未提供的输出。它只读取第一行，就是这样。我怎样才能得到其余的输出？

谢谢你。

# iphone - 在目标c的下载路径中找不到文件

> ID：10735628
> 
> 赞同：1
> 
> 时间：2012-05-24T10:26:13.257
> 
> 标签：iphone, objective-c, ipad, download, nsfilemanager

我是`iPad`开发人员的新手，

我正在`epub reader`申请，

**当用户从互联网`.epub`下载任何文件时，我想检查它的下载文件夹中有多少文件。`epub`**

最后我想将每个 epub 的名称存储在我的`array`...

我应该如何实现这个？

**任何帮助将不胜感激。**

***提前致谢 ！！***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:55:14.187

我不知道它对您有帮助，但请尝试一下我在我的应用程序中使用过，但书籍已添加到我的资源文件夹中

```
NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
NSFileManager *fm = [NSFileManager defaultManager];
NSArray *dirContents = [fm contentsOfDirectoryAtPath:bundleRoot error:nil];

NSPredicate *fltr = [NSPredicate predicateWithFormat:@"self ENDSWITH '.epub'"];
self.onlyJPGs = [dirContents filteredArrayUsingPredicate:fltr]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:50:51.060

您将无权访问该文件夹，如果您以任何方式访问，那么您的应用程序将被拒绝

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:10:08.633

抱歉，对于这里的数据库负载，我找到了解决方案，

```
 NSString *files;
    NSDirectoryEnumerator *direnum = [[NSFileManager defaultManager] enumeratorAtPath:basePath];
    NSMutableArray *movfiles = [NSMutableArray array];
    while(files = [direnum nextObject])
    {
        if([[files pathExtension] isEqualToString:@"epub"])
            [movfiles addObject:files];
    }

    for (int i=0; i<[movfiles count]; i++) {
        NSLog(@"array=%@",[movfiles objectAtIndex:i]);
    } 
```

# math - RGB 的标准 2.2 伽马校正中的所有数字来自哪里？

> ID：10735631
> 
> 赞同：1
> 
> 时间：2012-05-24T10:26:25.517
> 
> 标签：math, colors, formula, gamma

这是标准的 fwd Gamma 2.22 (1 / 0.45) 校正公式：

```
for R,G,B < 0.018
R´ = 4.5 * R
G´ = 4.5 * G
B´ = 4.5 * B
for R,G,B ≥ 0.018
R´ = 1.099 * R^0.45 - 0.099
G´ = 1.099 * G^0.45 - 0.099
B´ = 1.099 * B^0.45 - 0.099 
```

数字 0.18、4.5、1.099 和 0.099 来自哪里？我特别需要知道它们是如何派生的。

我需要知道，因为我正在编写一个伽玛校正函数，并且使用幂和缩放的简单方法，而不是上面的方法，会产生不同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:18:37.673

所以这就是我想的多远。

必须按照以下要求设计伽马校正功能（请参阅[本文](http://www.poynton.com/PDFs/SMPTE93_Gamma.pdf)）：

*   0强度的电压必须为0
*   1 强度的电压必须为 1
*   它必须表现得像接近强度 1 的幂函数（指数 1/2.22=0.45）
*   它必须是接近原点的线性（以减少低强度下传感器噪声的影响）
*   它必须在 [0,1] 中连续且连续可微

所以这个问题可以通过找到定义函数 g:x->g(x) 的数字 {a,b,c,x0} 来解决，例如：

*   g(x) = a*x^.45+b in [x0,1]
*   g(x) = cx im [0,x0[
*   g(1) = 1
*   g(0) = 0
*   lim{x->x0-}(g) = lim{x->x0+}(g)
*   lim{x->x0-}(dg/dx) = lim{x->x0+}(dg/dx)

这产生以下等式：

*   a+b=1
*   c*x0=a*x0^.45+b
*   c=0.45*a*x0^-0.55

相当于：

*   a=1/(1-.55*x0^.45)
*   b=-.55*x0^.45/(1-.55*x0^.45)
*   c=.45*x0^-.55/(1-.55*x0^.45)

如果你将 x0 设置为 0.018，你会得到：

*   a=1.099
*   b=-.099
*   c=4.5

剩下的问题是：他们是如何选择 x0 的？我找不到 0.018 值的任何理由......或者他们可以从其他 3 个参数中的任何一个开始（例如，将脚趾坡度设置为 4.5，他们得出 a、b 和 x0）。

不确定这是否会解决您的问题，无论如何我希望这会有所帮助（我对数学很感兴趣）。

# c# - Directory.CreateDirectory 不起作用

> ID：10735634
> 
> 赞同：1
> 
> 时间：2012-05-24T10:26:39.127
> 
> 标签：c#, directory, .net

我正在使用 C# 2010 创建一个应用程序，其目的是复制具有指定扩展名的文件。它使用 .NET Framework 3.5 。

我有以下代码：

```
 private void GetFiles()
    {
        bool validext;
        foreach (string filePath in Directory.GetFiles(SourcePath, "*.*", SearchOption.AllDirectories))
        {
            //Check if the file has a specified extension
            validext = false;
            foreach (string extension in ext)
                if (HasExtension(filePath, extension))
                {
                    validext = true;
                    break;
                }

            if ((validext && mode == 1) || (!validext && mode == 2))
            {
                Directory.CreateDirectory(Path.GetDirectoryName(filePath));
                to_copy.Add(filePath);
            }
        }
        totalcount = to_copy.Count;
    } 
```

问题出在这个命令上：

```
Directory.CreateDirectory(TrimFile(filePath)); 
```

它不会引发任何异常，它应该创建的目录路径是有效的，并且应用程序以管理员权限运行。然而，该目录并未创建。搜索互联网并没有给我任何答案，所以我的问题是：

为什么`Directory.CreateDirectory(TrimFile(filePath));`不工作？

编辑：我已将 FileTrim 函数替换为`Path.GetDirectoryName(filePath)`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:28:32.140

让我们“调试”代码

```
private void GetFiles()
{
    //1\. Lets say SourcePath = "C:\some\kind\of\directory\"
    foreach (string filePath in Directory.GetFiles(SourcePath, "*.*", SearchOption.AllDirectories))
    {
        //2\. Lets say we have file filePath = "C:\some\kind\of\directory\file.txt"

        //.. all validation

        //3\. At this point Path.GetDirectoryName("C:\some\kind\of\directory\file.txt")
        //   returns "C:\some\kind\of\directory\"
        //4\. Lets create that directory...but wait its already exist and contains some files! 
        //   Why create what already exists?
        Directory.CreateDirectory(Path.GetDirectoryName(filePath));
        to_copy.Add(filePath);
    }
} 
```

所以事实是您的 CreateDirectory 调用是无用的，因为您已经遍历目录中的现有文件。除非您想在所有目录中创建新的子目录“Temp”，否则您需要这样做：

```
Directory.CreateDirectory(Path.Combine(Path.GetDirectoryName(filePath), "Temp")); 
```

之后，您将`C:\some\kind\of\directory\Temp`创建目录。

要将文件复制到其他目录，您需要执行以下操作：

```
string directoryToCopyFiles = @"C:\My\directory\of\file\copies";
if(!Directory.Exists(directoryToCopyFiles))
   Directory.CreateDirectory(directoryToCopyFiles);

File.Copy(Path.Combine(directoryToCopyFiles, Path.GetFileName(filePath)), filePath); 
```

如果该目录`C:\My\directory\of\file\copies`之前不存在，则将创建该目录，并将具有相同名称的文件复制到该目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-17T07:10:52.970

我最近也陷入了这个困境，我很傻，我没有具体化正确的路径，所以它正在创建我具体化的目录......**在`VSProjects/ProjectName/bin/Debug/`**:'D

前：

```
if (!Directory.Exists(Path.GetDirectoryName(properties.ApiConfigRoute)))
      Directory.CreateDirectory("ConfigFolder"); 
```

后：

```
if (!Directory.Exists(Path.GetDirectoryName(properties.ApiConfigRoute)))
      Directory.CreateDirectory(Path.GetDirectoryName(properties.ApiConfigRoute)); 
```

嗬！希望能帮助到你。只要确保您使用**绝对路线**创建它。

# c - 在 OpenGL C Linux 中移动特定对象

> ID：10735638
> 
> 赞同：0
> 
> 时间：2012-05-24T10:27:02.557
> 
> 标签：c, linux, opengl, glut

我在使用 C 移动 OpenGL 中的特定对象时遇到问题。

对象代码

```
glClearColor(0.0, 0.0, 0.0, 0.0);
glClear(GL_COLOR_BUFFER_BIT);
glColor3f(1, 0.73, 0.06);
glOrtho(-1.0, 1.0, -1.0, 1.0, -1.0, 1.0);
glPushMatrix();
glMatrixMode(GL_MODELVIEW);
glRotatef(0,PacX,PacY,0);
glBegin(GL_QUADS);
    glVertex2f(ax, ay);
    glVertex2f(bx, by);
    glVertex2f(cx, cy);
    glVertex2f(dx, dy);
glEnd();
glPopMatrix();
glFlush(); 
```

这将绘制一个正方形，但是在窗口中我还有其他对象，所以当我尝试使用 glTranslatef() 仅移动正方形时，它会移动所有对象，是否有一种方法或变量可以存储指针或 ID 到广场所以我只能移动广场？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:31:59.687

您需要保存和恢复每个对象的变换矩阵，以便每个对象都有自己的矩阵。

见`[glPushMatrix()](http://linux.die.net/man/3/glpushmatrix)`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:14:39.533

阅读OpenGL显示列表，并在显卡中分配一个显示列表。来自 OpenGL 编程指南

```
/* Create display list with Torus and initialize state*/
static void init(void)
{
   theTorus = glGenLists (1);
   glNewList(theTorus, GL_COMPILE);
   torus(8, 25);
   glEndList();

   glShadeModel(GL_FLAT);
   glClearColor(0.0, 0.0, 0.0, 0.0);
} 
```

where调用一个函数，该函数绘制由环境和函数`torus(8, 25)`捕获的元素。然后你的画看起来更像`theTorus``glNewList(...)``glEndList()`

```
void display(void)
{
   glClear(GL_COLOR_BUFFER_BIT);
   glColor3f (1.0, 1.0, 1.0);
   glCallList(theTorus);
   glFlush();
} 
```

这意味着您可以在绘制圆环之前通过调用各种`glRotatef(...)`缩放和转换调用来改变环境。

[可以在此处访问](http://www.glprogramming.com/red/chapter07.html)我从中提取引用的整个示例。

使用一些额外的数据结构，您可以将对象的方向保存在结构中，将变换应用于环境，然后绘制特定的显示列表。之后不要记得取消应用环境的转换，然后您将有效地旋转、移动或对显示列表中表示的单个对象执行任何操作。

# javascript - 从原型转换为 jQuery

> ID：10735640
> 
> 赞同：6
> 
> 时间：2012-05-24T10:27:10.680
> 
> 标签：javascript, jquery, prototypejs

是否有一种一致且通用的方式将原型代码转换为 jQuery？

我不是在问**如何转换特定代码**，例如：
来自：

```
Event.observe(window, 'load', function () { 
    /*code*/ 
}); 
```

至：

```
$(function(e){ 
    /*code*/ 
}); 
```

但是如何将**任何代码**从原型转换为 jQuery。
我不确定这是否可行，但欢迎提出任何建议。
谢谢

**更新：**
我[来过这里](https://stackoverflow.com/questions/256768/is-there-a-resource-to-help-convert-prototype-javascript-to-jquery)，但这已经 4 岁了。
你知道，1990 年的问题（如何在不重新加载页面的情况下从服务器加载数据）会有一个明显的答案：**你不能**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:51:14.897

我意识到这样的工具不可能存在

# c++ - 通过按钮使用 StackedWidget 更改页面不起作用

> ID：10735647
> 
> 赞同：1
> 
> 时间：2012-05-24T10:27:33.473
> 
> 标签：c++, qt

我对 QT 很陌生，所以我试图弄清楚事情是如何发生的，所以很可能我使用了错误的工具来完成这项工作，所以请随时说出我是否是。

现在，需要的是一个 GUI，它基本上是一种运行一组预先确定的测试步骤的方法。So I have a main page that lists the options (as buttons) and when a button is selected it goes through to another page (that may also have a number of pages, I haven't decided yet) returning to the main page eventually.

因此，当我将表单页面更改为页面时，我认为这里的 QStackedWidgets 似乎是一种合适的方法

所以到目前为止都是通过Qtcreator，我为每个选项创建了一些UI表单页面，并创建了一个stackedWidget，它的页面与这里的表单一样多。每一页都被提升为我想要的形式。然后我的主页有一些按钮

但我不确定您如何将按钮与更改页面联系起来。我在按钮上添加了一个点击信号，然后这样做：

```
ui->stackedWidget->setCurrentIndex(1); 
```

但它并没有改变，我不确定我是否对以这种方式对页面进行硬编码感到高兴。

但是，在您如何连接这样的页面时，我是否遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:54:31.197

使用[信号和插槽](http://qt-project.org/doc/qt-4.8/signalsandslots.html)。基本上每次按下按钮时，都会触发信号（如[点击](http://qt-project.org/doc/qt-4.8/qabstractbutton.html#clicked)信号）。您可以连接到自定义插槽，然后更改堆叠的小部件。例如，插槽可以做

```
index = (index + 1) % numStacked;
ui->stackedWidget->setCurrentIndex(index); 
```

# android - 使用 ContentValues 中的表达式进行更新

> ID：10735648
> 
> 赞同：3
> 
> 时间：2012-05-24T10:27:36.863
> 
> 标签：android, datetime, sqlite, sql-update

我正在尝试在 Android 10 中做一些事情，例如；

```
UPDATE MY_TABLE SET DATE_FIELD = date(DATE_FIELD, '+1 days') WHERE _ID=123 
```

现在我可以看到 sqlite3 支持各种[日期函数](http://www.sqlite.org/lang_datefunc.html)，但似乎[ContentResolver.update(Uri uri, ContentValues values, String where, String[] selectionArgs)](http://developer.android.com/reference/android/content/ContentResolver.html#update%28android.net.Uri,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)方法不支持这种方法，因为如果我使用；

```
ContentValues values= new ContentValues();
values.put("DATE_FIELD", "date(DATE_FIELD, '+1 days')");
getContentResolver().update(updateUri, values, null, null); 
```

它只是将字符串`"date(DATE_FIELD, '+1 days')"`作为 的值`DATE_FIELD`。

有没有办法使用这种方法执行这种计算表达式更新，或者我应该使用不同的方法？

# assembly - avx sqrt的三个操作数？

> ID：10735652
> 
> 赞同：3
> 
> 时间：2012-05-24T10:27:47.403
> 
> 标签：assembly, x86, simd, instructions, avx

为什么 avx sqrt（非压缩）指令有三个操作数？

```
vsqrtsd xmm1, xmm2, xmm3 
```

这是否意味着类似的东西`xmm1=xmm2=sqrt(xmm3)`？

**编辑：**下面的详细答案，但简而言之，装配线意味着：

```
xmm1.low  = sqrt(xmm3.low);
xmm1.high = xmm2.high; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T10:42:51.490

*英特尔® 64 位和 IA-32 架构软件开发人员手册*，第 2B 卷，第 4-407 页，“SQRTSD — 计算标量双精度浮点值的平方根”：

> **VSQRTSD xmm1、xmm2、xmm3/m64**
> 
> 计算 xmm3/m64 中低位双精度浮点值的平方根，并将结果存储在 xmm1* 中。此外，来自 xmm2 的高位双精度浮点值 (bits[127:64]) 被复制到 xmm1[127:64]。
> 
> **手术**
> 
> ```
> DEST[63:0] ← SQRT(SRC2[63:0])
> DEST[127:64] ← SRC1[127:64]
> DEST[VLMAX-1:128] ← 0 
> ```

该指令只是遵循其他*二进制* `V___SD`和`V___SS`操作的模式`VSUBSD`，例如

```
DEST[63:0] ← SRC1[63:0] - SRC2[63:0]
DEST[127:64] ← SRC1[127:64]
DEST[VLMAX-1:128] ← 0 
```

和 like `VRCPSS xmm1, xmm2, xmm3/32`，它执行

```
DEST[31:0] ← APPROXIMATE(1/SRC2[31:0])
DEST[127:32] ← SRC1[127:32]
DEST[VLMAX-1:128] ← 0 
```

一般形式就像

```
xmm1.low = f(xmm2.low, xmm3.low);
xmm1.high = xmm2.high, 
```

如*英特尔® 64 和 IA-32 架构软件开发人员手册*第 1 卷第 11.4.1 节“打包和标量双精度浮点指令”中所述。对于 VSQRTSD，我们只定义 f(x, y) = √y，忽略第一个操作数。

* * *

*：注意：英特尔手册在这里写“xmm2”，这是一个错误。

# java - 如何在模型和视图方法中返回 url？

> ID：10735656
> 
> 赞同：0
> 
> 时间：2012-05-24T10:27:56.250
> 
> 标签：java, spring, jsp, spring-mvc, jstl

在我的jsp中，我正在像这样在我的控制器中调用一个方法

```
<a href='<c:url value="/buy/purchase.sp?${Constants.PART_NUMBER}=${suites.partNumber}&${Constants.ID_PARAM}=${suites.entitlementId}&${Constants.LICENSE_TYPE}=${suites.licenseType}&${Constants.QUANTITY}=1&Return_url=${Constants.HOME_URL}&attribName=${Constants.EXISTING_ID}"/>'>
<img src="/licensing/images/purchase.gif" alt="Purchase More Seats" border="0" /></a> 
```

在我的jsp中单击购买选项时，它转到方法购买，我在从url获取后处理所有这些值

```
String myUrl = appPath+"/"+DevTechConstants.ECOMMERCE_URL+"?PART_NUMBER="+partNumber+"&entitlementId="+entitlementId+"&ITEM_TYPE="+itemType+"&QUANTITY=1&RETURN_URL="+DevTechConstants.HOME_URL+"&attribName="+DevTechConstants.EXISTING_ID+"&licenseType="+licenseType; 
```

在此之后它应该导航到 myurl 中的 url 我像这样传递这个值`return new ModelAndView(new RedirectView("myUrl"));`

但它显示错误..请帮助我在单击我的 jsp 后如何将 jsp 中的值重定向到其他 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:50:59.053

我认为您的代码有错字。

只需删除双引号

```
return new ModelAndView(new RedirectView("myUrl")); 
```

然后它会如下所示。

```
return new ModelAndView(new RedirectView(myUrl)); 
```

希望这对您有所帮助。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:46:40.137

```
response.sendRedirect("myUrl") 
```

# c - 使用 C 和 OpenMP 进行矩阵乘法

> ID：10735658
> 
> 赞同：0
> 
> 时间：2012-05-24T10:28:01.710
> 
> 标签：c, performance, matrix, matrix-multiplication

我正在尝试创建一种有效的算法，可以将具有双精度的大值矩阵相乘。我已经创建了算法并首先在小矩阵上对其进行了测试；在尝试 ie A{4096x4096}, B{4096x4096} 之后，循环需要永远结束；例如，这两个矩阵生成 AB 花了我的电脑 30 多分钟才能完成。

我的电脑不是老旧的……它是六核 i7，我想对于桌面工作站来说还不错。在尺寸高达 1024x1024 的小矩阵上，它的完成速度相对较快，不到 30-40 秒，对于 2048x2048 大约需要 5 分钟……对于 16384x16384，它没有在 15 分钟内完成，我停止了执行……

我做错了什么还是可以预料到的？:)

提前致谢！

代码如下：

```
/* calculate */
for(travx = 0; travx < m; travx++) {
    for(travy = 0; travy < n; travy++) {
        /* we only need to calculate it ourside of Z loop */
        tIndex = (travy)+(travx*n); 
        for(travz = 0; travz < p; travz++)
            {
                if(n==1)
                    {bIndex = ((n-1)*travy)+travz;
                     aIndex = ((p)*travx)+travz;} 
                else
                    {bIndex = ((n)*travz)+travy;
                     aIndex = ((p)*travx)+travz;}

                temp = atab_ptr[aIndex]*btab_ptr[bIndex];
                outtab_ptr[tIndex] =  outtab_ptr[tIndex] + temp;
            }
    }
} 
```

这真的很简单......并且在小矩阵上给出了很好的结果......不知道如何在 10 秒内乘以双打，尤其是在 p4 上......听起来有点可疑......特别是如果你考虑到 O(3)问题的复杂性。

更新...根据反馈，我调整了代码，并且...主要是我对其进行了简化，小矩阵完成得更快，即 1024x1024 在 3 秒内完成，但 4096x4096 在 6 分钟内完成.. . 修改后的代码是这样的：

```
for(travx = 0; travx < m; travx++) {
    for(travy = 0; travy < n; travy++) {
      for(travz = 0; travz < p; travz++)
        {outtab_ptr[travy+travx*n] = outtab_ptr[travy+travx*n] + atab_ptr[travy+p*travz] *  btab_ptr[travz+travx*p];}
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:55:42.930

如果可以的话，BLAS 是最好的选择。

话虽如此，从根本上说，矩阵乘法受到复杂性的限制，因此您必须更加智能才能大幅缩短停机时间。矩阵是否以任何方式结构化？它们是[三对角线](http://en.wikipedia.org/wiki/Tridiagonal_matrix)还是[带状的](http://en.wikipedia.org/wiki/Banded_matrix)？它们是[三角形](http://en.wikipedia.org/wiki/Triangular_matrix)的还是[对称](http://en.wikipedia.org/wiki/Symmetric_matrix)的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:04:52.253

您的“高效”算法实际上效率很低。看看当`n`不是 1 时会发生什么：

```
bIndex = ((n)*travz)+travy;
aIndex = ((p)*travx)+travz;
temp = atab_ptr[aIndex]*btab_ptr[bIndex]; 
```

最里面的循环已经结束，`travz`因此`aIndex`随着 的每个增量的步长 1 增加`travz`。另一方面`bIndex`随着步长增加`n`。因此，您正在访问的元素`btab_ptr`在内存中不相邻，因此不在同一缓存行中。

更不用说最内层循环中的条件对可能的向量化有什么影响。

因此，如果所有矩阵的数据都可以放入 Core i7 的 L3 缓存中，那么您的算法运行速度可以接受，但一旦不是这种情况，您的性能就会急剧下降。然后将其进一步乘以 O(N^3) 复杂度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:34:30.380

好吧，矩阵乘法的简单方法是 O(n^3)。这意味着将两个矩阵相乘所需的时间随着输入的大小以三次方式增长。还有更有效的方法。在这里你可以看看：

[http://en.wikipedia.org/wiki/Computational_complexity_of_mathematical_operations#Matrix_algebra](http://en.wikipedia.org/wiki/Computational_complexity_of_mathematical_operations#Matrix_algebra)

这些方法仍然没有低于 O(n^2)。因此，随着矩阵大小的增加，完成时间以超线性方式越来越多，这是正常的。

话虽如此，您观察的时间是否过多，这取决于许多因素（您的机器、您的代码等）。

顺便说一句，您可以查看这个[线程](https://stackoverflow.com/questions/1907557/optimized-matrix-multiplication-in-c)，其中提出了一个非常相似的问题。而且，除非您出于教育目的而这样做，否则最好使用优化的库，例如 ATLAS。

在这里，您还有一个关于如何优化应用程序以更好地使用内存的经典[文档。](http://www.akkadia.org/drepper/cpumemory.pdf)在该文档中，作者使用了对齐和预取等多种技术来优化矩阵乘法的性能。

# mysql - 在 MySQL BLOB 文件中保存特殊字符

> ID：10735659
> 
> 赞同：1
> 
> 时间：2012-05-24T10:28:03.507
> 
> 标签：mysql, grails, utf-8

如何在 MySQL BLOB 字段中写入特殊字符（东欧语言）？我到处都在使用 UTF-8（至少我是这么认为的）。对于常规字符串字段，我得到 cpecial 字符的有效值，但对于 BLOB 字段中的值，我得到问号。

# php - 用 PHP 解析谷歌地理编码 JSON

> ID：10735662
> 
> 赞同：16
> 
> 时间：2012-05-24T10:28:09.900
> 
> 标签：php, arrays, json, google-maps, geocoding

我正在尝试解析来自 Google Geocode API 的 json 响应，但我在理解它时遇到了一些麻烦。

对于那些不熟悉 Geocode API 的人，这里是 URL：[http ://maps.google.com/maps/api/geocode/json?address=albert%20square&sensor=false](http://maps.google.com/maps/api/geocode/json?address=albert%20square&sensor=false)

我正在使用以下代码来解析请求

```
<?php

$address = urlencode($_POST['address']);
$request = file_get_contents("http://maps.google.com/maps/api/geocode/json?address=" . $address . "&sensor=false");
$json = json_decode($request, true);

?> 
```

我正在尝试输出以下内容：

```
echo $json['results'][0]['formated_address']; 
```

我不确定为什么没有任何回应。我也试过了`$json[0]['results'][0]['formated_address']`。我知道这是一个菜鸟问题，但多维数组让我感到困惑。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T10:31:47.807

```
echo $json['results'][0]['formatted_address']; 
```

如果你拼写正确，它会有所帮助；-)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-08T21:15:37.507

...仅供参考，必须正确格式化 JSON 请求 URL 才能返回任何好的内容，否则您可能会收到 NULL 响应。

例如，这是我从 JSON 响应中检索**经度和纬度值的方式：**

```
// some address values
    $client_address = '123 street';
    $client_city = 'Some City';
    $client_state = 'Some State';
    $client_zip = 'postal code';

// building the JSON URL string for Google API call 
    $g_address = str_replace(' ', '+', trim($client_address)).",";
    $g_city    = '+'.str_replace(' ', '+', trim($client_city)).",";
    $g_state   = '+'.str_replace(' ', '+', trim($client_state));
    $g_zip     = isset($client_zip)? '+'.str_replace(' ', '', trim($client_zip)) : '';

$g_addr_str = $g_address.$g_city.$g_state.$g_zip;       
$url = "http://maps.google.com/maps/api/geocode/json?
        address=$g_addr_str&sensor=false";

// Parsing the JSON response from the Google Geocode API to get exact map coordinates:
// latitude , longitude (see the Google doc. for the complete data return here:
// https://developers.google.com/maps/documentation/geocoding/.)

$jsonData   = file_get_contents($url);

$data = json_decode($jsonData);

$xlat = $data->{'results'}[0]->{'geometry'}->{'location'}->{'lat'};
$xlong = $data->{'results'}[0]->{'geometry'}->{'location'}->{'lng'};

echo $xlat.",".$xlong; 
```

...此外，如果 v3 API 不正常，您可以使用相同的代码对 Google Map iframe 进行硬编码并将其嵌入到您的页面中...请参阅此处的简单教程：http: [//pmcds.ca/blog/嵌入-google-maps-into-the-webpage.html](http://pmcds.ca/blog/embedding-google-maps-into-the-webpage.html)

嵌入 **并非完全正确的方法**，但有时它会成为需要的解决方案。

# php - 所有 ajax 调用一个目标页面或每个目标页面一个

> ID：10735670
> 
> 赞同：-1
> 
> 时间：2012-05-24T10:28:21.180
> 
> 标签：php, javascript, ajax, call, echo

如果我的页面上有两个（或更多）ajax 调用，ajax1 和 ajax2，我是创建一个有条件返回字符串的通用目标 url ajax.php，还是每次调用创建一个目标 php 页面，ajax1.php 和 ajax2 .php？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:49:51.620

只需创建一个 php 页面并在所有 ajax 函数中在数据字符串中创建一个标志变量，如“&ajax1="+"1”，并在 php 页面上使用 if 条件

```
if($_REQUEST['ajax1']){
 your code
  }
 if($_REQUEST['ajax2']){
 your code
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:34:57.983

您可以只使用一个主要的 PHP 脚本来处理所有的 AJAX 调用，并且只需将一个额外的参数附加到您的请求中，指定您需要什么响应。

```
$.post('/ajaxResponser.php',{'method':'getData','user_id':'123'},function(response){
  // handle response
},"json"); 
```

然后在你的`ajaxResponser.php`你将决定根据传递的`method`参数调用什么方法 -

```
$method = $_REQUEST['method'];
$user_id = $_REQUEST['user_id'];
switch($method){
  case 'getData':
    echo json_encode(array('data'=>getData($user_id)));
  break;
  default:
    echo json_encode(array('err'=>'unknown method'));
  break;
} 
```

# asp.net-mvc - 不能在 Telerik mvc 网格中使用“OnComplete”客户端事件

> ID：10735676
> 
> 赞同：1
> 
> 时间：2012-05-24T10:28:44.943
> 
> 标签：asp.net-mvc, grid, telerik

我使用 Telerik mvc 版本 2011.2.712，Jquery 1.4.1 问题是：当我使用 clientEvent`OnComplete`或`OnCommand`出现错误时

> 'telerik.web.mvc.UI.fluent.GridClientEventsBuilder'的未知方法'OnComplete'**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:21:45.967

您使用的是旧版本，需要升级。

# java - 如何在android中将字符串转换为浮点值

> ID：10735679
> 
> 赞同：24
> 
> 时间：2012-05-24T10:29:04.467
> 
> 标签：java, android

> **可能重复：**
> [从 EditText 到浮动的字符串](https://stackoverflow.com/questions/4229710/string-from-edittext-to-float)

在应用程序中，我想将编辑框中输入的字符串转换为相应的值，例如`233243664376347845.89`相应的浮点值。但它会在某个数字后返回 IE10，例如`23324366IE10`请帮助我。我的代码是 -

```
NumberFormat format = NumberFormat.getInstance(Locale.US);

try 
{
    number = format.parse(e1.getText().toString());
} catch (ParseException e) 
{
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

编辑文本长度大于 20 位，我也想减去两个编辑文本浮点值...

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-24T10:33:19.587

```
String s = e1.getText().toString();
Float f= Float.parseFloat(s); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-24T10:34:47.557

这将解决您的问题：

```
String str=e1.getText().toString();
number = Float.parseFloat(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:36:35.393

尝试这个。

```
EditText edt = (EditText) findViewById(R.id.edit_float);
float number = Float.valueOf(edt.getText().toString()); 
```

如果 Float 包装类将字符串转换为浮点数，则使用 valueOf() 方法。在此示例中，我使用 getText() 获取该 EditText 的 Editable 对象，在该对象上调用 toString() 方法以从中获取字符串。

# java - 重新打开后包含 pickList 更改位置的 PopupPanel

> ID：10735691
> 
> 赞同：0
> 
> 时间：2012-05-24T10:29:51.720
> 
> 标签：java, jsf, popup, richfaces

我在popupPanel 中有一个pickList。如果我打开 popupPanel，它会出现在窗口的中间。如果我关闭并重新打开它，它看起来会向左和底部移动。只有当我在 popupPanel 中有 pickList 时才会发生这种情况。如果我删除它，一切都会按预期工作。

下面我有一个重现问题的片段。我使用的是 RichFaces 4.1，该问题在 IE、Chrome 和 Firefox 上可重现（其他未测试）。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:rich="http://richfaces.org/rich" 
      xmlns:fn="http://java.sun.com/jsp/jstl/functions">

    <h:head></h:head>
    <h:body>
        <rich:popupPanel domElementAttachment="parent" id="popup" autosized="true" modal="true">
            <h:commandButton value="Close" onclick="#{rich:component('popup')}.hide();" />
            <rich:pickList>
                <f:selectItems value="#{fn:split('Test,TestTest,TestTestTest', ',')}" />
            </rich:pickList>
        </rich:popupPanel>
        <h:commandButton value="Panel" onclick="#{rich:component('popup')}.show();" />
    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:06:37.973

在不理解为什么的情况下，我可以通过更改`domElementAttachment="parent"`为`domElementAttachment="body"`. 如果弹出窗口是在表单内定义的，`body`则可以替换为`form`.

我真的不知道为什么会这样，并且会对解释非常感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T08:24:07.307

原因是[Richfaces 错误 11736](https://issues.jboss.org/browse/RF-11736)。已知的解决方法是：

1.  Sandros：将 domElementAttachment 从父级更改为主体。
2.  在显示面板之前调用 Javascript 函数：

    ```
    onbeforeshow="fixPositioning('#{rich:clientId('popupPanelId')}');" 
    ```

    函数定义如下：

    ```
    function fixPositioning(panelId) {
        var popupPanel = document.getElementById(panelId);
        if (popupPanel) {
            popupPanel.style.visibility = "hidden";
            popupPanel.style.display = "block";
        }
    } 
    ```

    [那里](https://issues.jboss.org/browse/WFK2-500)描述了这个解决方案

# php - 用于写入和读取字和字节的 PHP 脚本

> ID：10735692
> 
> 赞同：0
> 
> 时间：2012-05-24T10:29:51.867
> 
> 标签：php, word, byte

我有一个用 php 脚本控制的 eeprom。我可以控制这个eeprom读写字（16位）的参数，其中一些可以控制两个不同的参数，可以用十进制或十六进制数据写入字的第一个或第二个字节（8位）。有一种方法可以在 php 中写一个单词（可以写第一个或第二个字节）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:38:15.937

我想你正在寻找[`pack()`](http://php.net/manual/en/function.pack.php)：

```
// Unsigned decimal values of the bytes
$firstOctet = 125;
$secondOctet = 213;

$byte = pack('C', $firstOctet);
$word = pack('C*', $firstOctet, $secondOctet); 
```

您可能需要将整数类型的值提供给`pack()`，如果您想在代码中将它们表示为十六进制，您可以执行以下操作之一：

```
// Both of these are identical to "$firstOctet = 125;"
$firstOctet = 0x7D;
$firstOctet = hexdec('7D'); 
```

或者，您可以使用以下语法在字符串中声明文字 Hex 字节：

```
// These should produce the same results as the pack() example
$byte = "\x7D";
$word = "\x7D\xD5"; 
```

如果您需要将正在读取的字节转换回整数进行处理，您可以使用补码函数[`unpack()`](http://php.net/manual/en/function.unpack.php)：

```
$word = "\x7D\xD5";
$bytes = unpack('C*byte', $word);
print_r($bytes);
/*
  Array
  (
      [byte1] => 125
      [byte2] => 213
  )
*/ 
```

# solr - solr dataimport 不适用于 URLdatasource

> ID：10735693
> 
> 赞同：0
> 
> 时间：2012-05-24T10:29:52.207
> 
> 标签：solr, dataimporthandler

这是我的 data-config.xml

```
<dataConfig>
<dataSource name="a" type="URLDataSource"  encoding="UTF-8" connectionTimeout="5000" readTimeout="10000"/>
<document name="products">
                     <entity name="images" dataSource="a"       
                    url="file:///abc/1299.xml"
                    processor="XPathEntityProcessor"
                    forEach="/imagesList/image"
                    >
                            <field column="id"  xpath="/imageList/image/productId" />
                            <field column="image_array"  xpath="/imageList/image/imageUrlString" />
                    </entity>

</document>
</dataConfig> 
```

这是 schema.xml

```
<field name="id" type="string" indexed="true" stored="true" required="true" />
<field name="image_array" type="text" indexed="true" stored="true" multivalued="true"/> 
```

但是当我尝试 deltaimport 时，没有添加任何文档。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:20:18.350

首先，你的 XPath 说`imageList`，你的 XML 说`imagesList`......

# java - 搜索单词时，logstash 抛出 org.elasticsearch.action.search.SearchPhaseExecutionException

> ID：10735694
> 
> 赞同：0
> 
> 时间：2012-05-24T10:29:56.903
> 
> 标签：java

logstash 无法按单词搜索。例外：

查询 '* @timestamp:[2012-05-17 TO 2012-05-26]' 导致以下错误：org.elasticsearch.action.search.SearchPhaseExecutionException：无法执行阶段 [initial]，没有要搜索的索引/分片on，请求的索引是 []

logstash.conf

```
input{
file{
    type => "system_log"
    path => "D:\\application\\logstash\\logs\\*"
}
}
output{
    null{}
} 
```

windows 7中部署的logstash

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:26:43.647

原因是elasticsearch无法加载日志文件。

`logstash.conf`变成

```
input{
   file{    
      type => "system_log"    
      path => "D:\\application\\logstash\\logs\\*"    
   }    
}
output{
   elasticsearch { embedded => true }
} 
```

# .net - GAC 中有未使用的程序集会影响性能吗？

> ID：10735697
> 
> 赞同：0
> 
> 时间：2012-05-24T10:30:15.847
> 
> 标签：.net, performance, assemblies, gac

在[这个答案](https://stackoverflow.com/a/10734373/57428)中有一个相当有趣的说法：在 GAC 中有额外的未使用的 .NET 程序集会降低性能。

具体来说，它是关于以下情况：`X.Y.Z`机器 GAC 中有程序集，并且该机器上没有程序使用此程序集，并且声称在 GAC 中使用此程序集可能会降低性能。

真的吗？有没有这方面的详细数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T12:39:56.047

它影响冷启动，始终是托管代码中最受关注的性能特征，因为它是迄今为止最慢和最引人注目的。托管代码只有很多 DLL 可供查找，包括程序集和 ngen 编辑的 DLL。这在硬盘驱动器上很慢，当文件系统缓存中还没有任何内容时，挖掘文件需要一段时间。更大的目录需要更长的时间来搜索。

这不是托管代码独有的问题，使用大量 DLL 的本机程序也存在此问题。这就是为什么 Office 应用程序或 Acrobat Reader 等大型程序使用“优化器”的原因，这是一个在登录时启动的小程序，除了接触主程序所需的 DLL 集之外什么都不做。预热文件系统缓存。当您第一次登录时，实际上会减慢您*真正*想要启动的任何程序。我总是删除它们，但它们有被放回去的习惯，尤其是 Adob​​e 很糟糕。Windows Superfetch 是卓越的解决方案，它根据实际使用情况动态调整可执行文件集以进行预缓存。

实际上从 GAC 中删除程序集当然不是一个现实的解决方案。反正影响很小。

# clojure - 在 Clojure 代码中嵌入任意对象

> ID：10735701
> 
> 赞同：6
> 
> 时间：2012-05-24T10:30:24.127
> 
> 标签：clojure, metaprogramming, eval

我想在 Clojure 代码中嵌入一个 Java 对象（在本例中为 BufferedImage），`eval`以后可以使用它。

创建代码工作正常：

```
(defn f [image]
     `(.getRGB ~image 0 0))
=> #'user/f

(f some-buffered-image)
=> (.getRGB #<BufferedImage BufferedImage@5527f4f9: type = 2 DirectColorModel: rmask=ff0000 gmask=ff00 bmask=ff amask=ff000000 IntegerInterleavedRaster: width = 256 height = 256 #Bands = 4 xOff = 0 yOff = 0 dataOffset[0] 0> 0 0) 
```

但是，尝试`eval`它时会出现异常：

```
(eval (f some-buffered-image))
=> CompilerException java.lang.RuntimeException: Can't embed object in code, maybe print-dup not defined: BufferedImage@612dcb8c: type = 2 DirectColorModel: rmask=ff0000 gmask=ff00 bmask=ff amask=ff000000 IntegerInterleavedRaster: width = 256 height = 256 #Bands = 4 xOff = 0 yOff = 0 dataOffset[0] 0, compiling:(NO_SOURCE_PATH:1) 
```

有没有办法让这样的工作？

**编辑：**

我尝试这样做的原因是我希望能够生成从图像中获取样本的代码。图像被传递给执行代码生成的函数（相当于`f`上面的），但是（由于各种原因）以后不能作为参数传递给编译的代码。

我需要生成带引号的代码，因为这是一个更大的代码生成库的一部分，它将对生成的代码应用进一步的转换，因此我不能只做类似的事情：

```
(defn f [image] 
  (fn [] (.getRGB image 0 0))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:45:29.193

我猜你需要编写一个宏，在编译时获取对象（或创建所需对象的方法），以二进制格式（字节数组）序列化该对象，宏的输出应该是 - 一个引用的符号到字节数组和一个函数，该函数可用于通过反序列化从序列化数据中获取对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T18:50:12.537

不确定你需要它做什么，但你可以使用以下作弊方法创建对任意对象进行 eval 的代码：

```
(def objs (atom []))

(defn make-code-that-evals-to [x] 
    (let [
         nobjs (swap! objs #(conj % x)) 
         i (dec (count nobjs))]
     `(nth ~i @objs))) 
```

那么你就可以：

```
> (eval (make-code-that-evals-to *out*))
#<PrintWriter java.io.PrintWriter@14aed2c> 
```

这只是一个概念证明，它会泄漏正在生成的对象 - 您可以生成删除 eval 引用的代码，但您只能对其进行一次 eval。

**编辑**：可以通过以下（邪恶的！）黑客来防止泄漏：

上面的代码通过在生成代码时将对象引用存储在外部来绕过 eval 的编译器。这可以推迟。对象引用可以存储在生成的代码中，而编译器被宏绕过。在代码中存储引用意味着垃圾收集器正常工作。

关键是包装对象的宏。它做了原始解决方案所做的事情（即在外部存储对象以绕过编译器），但就在编译之前。生成的表达式检索外部引用，然后删除以防止泄漏。

注意：**这是邪恶的**。宏的扩展时间是最不希望出现全局副作用的地方，而这正是该解决方案所做的。

现在看代码：

```
(def objs (atom {})) 
```

这里是临时存储对象的地方，由唯一键（字典）键控。

```
(defmacro objwrap [x sym]
  (do
   (swap! objs #(assoc % sym x) ) ; Global side-effect in macro expansion
   `(let [o# (@objs ~sym)]
      (do
        (swap! objs #(dissoc % ~sym))
        o#)))) 
```

这是位于生成代码中的邪恶宏，将对象引用`x`和唯一键保存在`sym`. 在编译之前，它将对象存储在键下的外部字典中，`sym`并生成检索它的代码，删除外部引用并返回检索到的对象。

```
(defn make-code-that-evals-to [x]
  (let [s 17]    ; please replace 17 with a generated unique key. I was lazy here.
  `(objwrap ~x ~s))) 
```

没什么花哨的，只是将对象包装在 evil 宏中，并加上一个唯一的键。

当然，如果您只扩展宏而不评估其结果，您仍然会得到泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T14:34:29.513

为什么不： (defmacro m [img] `(.getRGB ~img 0 0)) 然后你可以写： (m some-buffered-image)

不同之处在于 f 是一个函数，因此它的参数将在其主体被评估之前被评估。因此，图像对象本身将被放置在生成的代码中。但是对于宏，它们的参数不会被评估。所以只有符号 some-buffered-image 将被放置在代码中。生成的代码将是：(.getRGB some-buffered-image 0 0)。就像你直接写源代码一样。我想这就是你想要的。

但是为什么我不能在生成的代码中放置一个对象呢？答案是：是的，你可以。异常消息所说的不是事实。您可以在生成的代码中嵌入某些类型的对象，但不是所有类型的对象。它们包括符号、数字、字符、字符串、正则表达式模式、关键字、布尔值、列表、映射、集合等。所有这些对象都将被 Clojure 编译器理解。它们就像其他语言中的关键字、运算符和文字。你不能要求 Clojure 编译器知道所有类型的对象，就像你不能要求 C 或 Java 编译器知道所有不包含在其语法中的单词一样。

# iphone - 如何使用 UIAlertView 生成多行而不是单行？

> ID：10735703
> 
> 赞同：2
> 
> 时间：2012-05-24T10:30:30.897
> 
> 标签：iphone, objective-c, ios4, uialertview

这是我的代码

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Added to Cart" message:@"Some items are added for time being!" delegate:self cancelButtonTitle:@"View Cart" otherButtonTitles:@"Continue \n Shopping", nil];
alert.tag = 20;
[alert show]; 
```

我得到这样的输出：
[![在此处输入图像描述](../Images/2dca4ab3b02642ac3fd51da34434c7c7.png)](https://i.stack.imgur.com/zsbMh.png)

我需要这样：
[![在此处输入图像描述](../Images/bbc5aa24764a9c1601fd8e895fcbf789.png)](https://i.stack.imgur.com/lUhBF.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:33:09.057

我有手动解决方案给你。但我认为这不是一个好的解决方案：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Added to Cart" message:@"Some items are added for time being!" delegate:self cancelButtonTitle:@"View Cart" otherButtonTitles:@"", nil];

    UILabel *buttonTitle = [[UILabel alloc] initWithFrame:CGRectMake(148, 102, 125, 40)];
    buttonTitle.text = @"Continue Shopping";
    buttonTitle.font = [UIFont boldSystemFontOfSize:15];
    buttonTitle.textColor = [UIColor whiteColor];
    buttonTitle.textAlignment = UITextAlignmentCenter;
    buttonTitle.backgroundColor = [UIColor clearColor];
    buttonTitle.numberOfLines = 2;
    [alert addSubview:buttonTitle];
    alert.tag = 20;
    [buttonTitle release];
    [alert show]; 
```

无论如何你都可以使用它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:49:32.440

`UIAlertView`不支持多行按钮。一种选择是仅使用“继续”而不是“继续购物”作为按钮标题，否则您必须使用自定义警报视图组件，例如[CODialog](https://github.com/eaigner/CODialog)（您可能需要对其进行一些自定义以允许多行按钮，但应该很容易）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:51:42.760

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Added to Cart" message:@"Some items are added for time being!" delegate:self cancelButtonTitle:@"View Cart" otherButtonTitles:@"Continue \n Shopping", nil];
alert.tag = 20;
[[[alert buttons] objectAtIndex:1] setLineBreakMode:UILineBreakModeWordWrap];
[alert show]; 
```

这段代码完全符合您的需要。但请注意，

1.  `- [UIAlertView buttons]`无证
2.  `- [UIButton setLineBreakMode]`已弃用。但是，您可以将其替换为

    `[button.titleLabel setLineBreakMode]`这基本上是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:51:44.787

我认为您可以尝试将 numbersOfLine 属性设置为按钮上的标签。但我不知道苹果会同意这一点。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Added to Cart" message:@"Some items are added for time being!" delegate:self cancelButtonTitle:@"View Cart" otherButtonTitles:@"Continue \n Shopping", nil];
NSArray *subviewsArray = [alert subviews];
    for (UIView *subview in subviewsArray) {
        if ([subview isKindOfClass:[UIButton class]]) {
            NSArray *btnSubviews = [subview subviews];
            for (UIView *btnSubview in btnSubviews) {
                if ([btnSubview isKindOfClass:[UILabel class]]) {
                    UILabel *title = (UILabel *)btnSubview;
                    title.numberOfLines = 2;
                }
            }
        }
    }
alert.tag = 20;
[alert show];
[alert release]; 
```

# java - 运行 Eclipse 创建的 JAR 时未显示图像

> ID：10735705
> 
> 赞同：0
> 
> 时间：2012-05-24T10:30:43.120
> 
> 标签：java, eclipse, executable-jar

我的 Eclipse IDE 的源文件夹中有我的 images 文件夹

将应用程序导出到可运行的 JAR 后，我通过命令提示符运行它，但它不显示我使用过的任何图像。当我通过 Eclipse 运行它时，会显示图像。

当我将 source/images 文件夹复制到我的可执行 JAR 所在的位置时，它会显示图像，但我希望我的图像也位于 JAR 本身中。

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:58:24.637

公共 BufferedImage 加载图像（字符串文件名）{

```
BufferedImage buff = null;
try {
    buff = ImageIO.read(getClass().getResourceAsStream(fileName));
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    return null;
}
return buff; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:55:41.017

您的图像不应该在您的源文件夹中。您应该将它们分开保存在另一个文件夹（资产或资源或图像等）中。

要将文件夹包含在您的 jar 中，我强烈建议使用 ANT 脚本（或 maven）来生成您的 jar。它更加灵活。掌握它需要一点时间，但是周围有很多示例和教程，我认为它绝对值得。

# scala - 无法使用 akka java api 的 UnTypedActorFactory 创建演员

> ID：10735716
> 
> 赞同：2
> 
> 时间：2012-05-24T10:31:39.023
> 
> 标签：scala, actor, akka

我正在尝试使用无类型的演员工厂创建演员，编译进行得很好。但是在运行应用程序时，我收到以下错误。我在配置中遗漏了什么吗？

Java 代码：

```
MyActor myactor = new MyActor();  //MyActor extends UnTypedActor
ActorSystem system = ActorSystem.create("mynamespace");
ActorRef actor = system.actorOf(new Props(new UntypedActorFactory() {
      public UntypedActor create() {
          return myactor;
      }
  })); 
```

运行时出错：

> 原因：akka.actor.ActorInitializationException：您无法使用构造函数（新）显式创建 [com.practice.MyActor] 的实例。您必须使用其中一种工厂方法来创建新演员。要么使用：'val actor = context.actorOf(Props[MyActor])'
> （从一个actor内部创建一个受监督的子actor），要么使用'val actor = system.actorOf(Props(new MyActor(..)))' （从 ActorSystem 创建一个顶级演员）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:01:45.710

那是因为您正在`MyActor`创建`ActorSystem`. 在您的工厂内创建 Actor（这就是它的用途 ;-) ），它应该没问题。

```
ActorSystem system = ActorSystem.create("mynamespace");
ActorRef actor = system.actorOf(new Props(new UntypedActorFactory() {
  public UntypedActor create() {
    return new MyActor();
  }
})); 
```

在这种情况下，您甚至不需要工厂，因为您有一个默认构造函数。只需将类作为参数传递给`Props`：

```
system.actorOf(new Props(MyActor.class)); 
```

# scripting - 为什么我的条件语句被忽略？

> ID：10735718
> 
> 赞同：1
> 
> 时间：2012-05-24T10:31:49.290
> 
> 标签：scripting, if-statement, scheme, gimp

我正在尝试为 GIMP 2.8 编写一个方案脚本，它将调整文件的大小和重命名/复制文件。作为其中的一部分，我想根据脚本中设置的布尔值更改输出文件名。

然而，我的条件被忽略了。这是脚本的摘录（基于[此线程](http://www.gimptalk.com/index.php?/topic/34672-script-fu-how-to-increment-filenames/)中的一个）：

```
(define (script-fu-batch-resize globexp globext src) 
 (define (resize-img n f newx suffix srcdir removetailingunderscore) 
  (let* ((fname (car f))

     ;get path, short name + extension (remember to remove source dir to REPLACE with suffix!)
    (fullname (car (last (strbreakup fname "\\"))))
    (filepath (substring fname 0 (- (string-length fname) (string-length (string-append srcdir fullname)))))
    (name0 (car (strbreakup fullname ".")))
    (name1 (substring name0 0 (- (string-length name0) 1)) )

    (when 
    (> 1 0)
    (
        (name0 (name1) )
    )
    )

    (extension (cadr (strbreakup fullname ".")))

     (img   (car (gimp-file-load 1 fname fname)))) 
    (gimp-image-undo-disable img) 
    (let* 
      ( 
         (oldx (car (gimp-image-width  img))) 
         (oldy (car (gimp-image-height img))) 
         (newy (/ oldy (/ oldx newx))) 
       ) 
       (gimp-image-scale img newx newy)         ;changed for Gimp v2.6
     )              
    (gimp-file-save 1 img (car (gimp-image-get-active-drawable img)) (string-append filepath suffix "\\" name1 "." extension) fname) 
        (gimp-image-delete img) 
   ) 
   (if (= n 1) 1 (resize-img (- n 1) (cdr f) newx suffix srcdir removetailingunderscore)) 
  )
 (define sourcepattern (string-append globexp src globext))
 (define files (file-glob sourcepattern 0))                     ;changed for Gimp v2.6 
 (resize-img (car files) (car (cdr files)) 55 "micro" src 1) 

) 
```

我尝试过使用`when`and `if`-else，但无论条件块内的任何语句都不会执行（即，如果我在if 中有相同的true 和false 语句，则两者都不会执行）。我的条件被完全忽略了，但我不知道为什么。GIMP 不报告任何语法错误。

我怀疑我不能在`define`语句中使用条件，除非有一个可以在它下面工作。

**任何人都可以看到有什么问题吗？为什么我的条件被忽略？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T10:38:39.527

`when`表达式有几个问题：

*   它使用了几个不必要的括号
*   条件`(> 1 0)`始终为真，因此无用
*   这不是改变变量值的方法，使用`set!`
*   将整个`when`表达式移到 的变量定义部分之外`let*`，并使其成为主体中的第一条语句`let*`

你需要做的是这样的：

```
(define (script-fu-batch-resize globexp globext src) 
  (define (resize-img n f newx suffix srcdir removetailingunderscore) 
    (let* ((fname (car f))
           (fullname (car (last (strbreakup fname "\\"))))
           (filepath (substring fname 0 (- (string-length fname) (string-length (string-append srcdir fullname)))))
           (name0 (car (strbreakup fullname ".")))
           (name1 (substring name0 0 (- (string-length name0) 1)))
           (extension (cadr (strbreakup fullname ".")))           
           (img   (car (gimp-file-load 1 fname fname))))
      (when (> 1 0)
        (set! name0 name1))
      <rest of the body>))) 
```

# ios - 如何在两个动画之间延迟？

> ID：10735723
> 
> 赞同：6
> 
> 时间：2012-05-24T10:32:03.983
> 
> 标签：ios, objective-c

我正在关闭一个模态视图控制器，然后立即呈现另一个模态视图控制器，但是我目前不能在它们两个上使用动画，只有第二个。

无论如何要延迟该过程以便用户体验两种动画吗？

下面的代码目前有效，但用户显然只能看到第二个动画：

```
// First one configure
detailViewController.modalPresentationStyle = UIModalPresentationFullScreen;
detailViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl; 
[self presentModalViewController:detailViewController animated:YES];

//Dismiss first one
[self dismissModalViewControllerAnimated:NO]; 

//Immediately configure and show second one
navController.modalPresentationStyle = UIModalPresentationFormSheet;
navController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:navController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T10:39:48.480

现在在当前的模态视图控制器中有一个完成块可用。请参阅此[链接](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion%3a)。这在 iOS5.0+ 中可用。

这样做的好处是，如果您要使用计时器解决方案，则无需估计计时器延迟。

只需将第二个动画的代码放入块中：

```
//Block safe reference to self to prevent retain cycles
__block typeof (self) selfReference = self;

// First one configure
detailViewController.modalPresentationStyle = UIModalPresentationFullScreen;
detailViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl; 
[self presentModalViewController:detailViewController animated:YES completion:
^{
    //Dismiss first one
    [selfReference dismissModalViewControllerAnimated:NO]; 

    //Immediately configure and show second one
    navController.modalPresentationStyle = UIModalPresentationFormSheet;
    navController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [selfReference presentModalViewController:navController animated:YES];
 }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:38:48.400

制作一个执行以下操作的选择器：

```
- (void)showSecondModalVC {
  //Dismiss first one
  [self dismissModalViewControllerAnimated:NO]; 

  //Immediately configure and show second one
  navController.modalPresentationStyle = UIModalPresentationFormSheet;
  navController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
  [self presentModalViewController:navController animated:YES];
} 
```

然后在主要代码中：

```
// First one configure
detailViewController.modalPresentationStyle = UIModalPresentationFullScreen;
detailViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl; 
[self presentModalViewController:detailViewController animated:YES];

[self performSelector:@selector(showSecondModalVC) 
         withObject:nil 
         afterDelay:0.5f]; 
```

您必须仔细观察并查看第一个模态显示需要多少时间才能使动画看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:41:03.800

你可以用其他风格来做。

```
detailViewController.modalPresentationStyle = UIModalPresentationFullScreen;
detailViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl; 
[self presentModalViewController:detailViewController animated:YES];

[self dismissModalViewControllerAnimated:NO]; 

[self performSelector:@selector(someFunction) withObject:nil afterDelay:1.0];

- (void) someFunction{
//Immediately configure and show second one
navController.modalPresentationStyle = UIModalPresentationFormSheet;
navController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:navController animated:YES]; 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T10:41:32.000

试试这个：

```
// First one configure
detailViewController.modalPresentationStyle = UIModalPresentationFullScreen;
detailViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl; 
[self presentModalViewController:detailViewController animated:YES];

//Dismiss first one
[self dismissModalViewControllerAnimated:NO]; 
NSTimer Timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(openSecondView) userInfo:nil repeats:NO];

-(void)openSecondView
{
    //Immediately configure and show second one
    navController.modalPresentationStyle = UIModalPresentationFormSheet;
    navController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:navController animated:YES];
} 
```

快乐的编码...

# c# - IEnumerable foreach，对最后一个元素做一些不同的事情

> ID：10735727
> 
> 赞同：11
> 
> 时间：2012-05-24T10:32:09.857
> 
> 标签：c#, .net, ienumerable, control-flow

我有一个[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx). 我想为集合的每个项目做一件事，除了最后一个项目，我想做其他事情。我怎样才能巧妙地编码呢？在伪代码中

```
foreach (var item in collection)
{
    if ( final )
    {
        g(item)
    }
    else
    {
        f(item)
    }
} 
```

所以如果我的 IEnumerable 是`Enumerable.Range(1,4)`我会做 f(1) f(2) f(3) g(4)。注意。如果我的 IEnumerable 恰好是长度 1，我想要 g(1)。

我的 IEnumerable 碰巧有点糟糕，`Count()`就像循环整个事情一样昂贵。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-24T10:38:12.457

既然你提到`IEnumerable[<T>]`（不是`IList[<T>]`等），我们不能依赖计数等：所以我很想展开`foreach`：

```
using(var iter = source.GetEnumerator()) {
    if(iter.MoveNext()) {
        T last = iter.Current;
        while(iter.MoveNext()) {
            // here, "last" is a non-final value; do something with "last"
            last = iter.Current;
        }
        // here, "last" is the FINAL one; do something else with "last"
    }
} 
```

请注意，上述内容在*技术上*仅适用于`IEnuemerable<T>`; 对于非泛型，您需要：

```
var iter = source.GetEnumerator();
using(iter as IDisposable) {
    if(iter.MoveNext()) {
        SomeType last = (SomeType) iter.Current;
        while(iter.MoveNext()) {
            // here, "last" is a non-final value; do something with "last"
            last = (SomeType) iter.Current;
        }
        // here, "last" is the FINAL one; do something else with "last"
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T02:36:09.810

类似于 Marc 的答案，但您可以编写一个扩展方法来包装它。

```
public static class LastEnumerator
{
    public static IEnumerable<MetaEnumerableItem<T>> GetLastEnumerable<T>(this IEnumerable<T> blah)
    {
        bool isFirst = true;
        using (var enumerator = blah.GetEnumerator())
        {
            if (enumerator.MoveNext())
            {
                bool isLast;
                do
                {
                    var current = enumerator.Current;
                    isLast = !enumerator.MoveNext();
                    yield return new MetaEnumerableItem<T>
                        {
                            Value = current,
                            IsLast = isLast,
                            IsFirst = isFirst
                        };
                    isFirst = false;
                } while (!isLast);
            }
        }

    }
}

public class MetaEnumerableItem<T>
{
    public T Value { get; set; }
    public bool IsLast { get; set; }
    public bool IsFirst { get; set; }
} 
```

然后像这样调用它：

```
foreach (var row in records.GetLastEnumerable())
{
    output(row.Value);
    if(row.IsLast)
    {
        outputLastStuff(row.Value);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:41:05.050

如果您想尽可能高效地执行此操作，除了有效地查看当前项目而且还查看“下一个”或“上一个”项目之外别无选择，因此您可以在获得该信息后推迟决定要做什么. 例如，假设`T`是集合中项目的类型：

```
if (collection.Any()) {
    var seenFirst = false;
    T prev = default(T);
    foreach (var current in collection) {
        if (seenFirst) Foo(prev);
        seenFirst = true;
        prev = current;
    }
    Bar(prev);
} 
```

**[看到它在行动](http://ideone.com/6bdeE)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:43:44.877

我不会真的推荐它，但我想你可以做这样的事情......

```
object m_item = notPartOfListFlag = new object();
foreach(var item in enumerator){
   if(m_item != notPartOfListFlag)
   {
      //do stuff to m_item;
   }
   m_item = item;
}
//do stuff to last item aka m_item; 
```

但我会尝试使用某种集合来公开列表中项目的位置，然后使用

```
if(collection.IndexOf(item) == collection.Count-1) do stuff 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T10:46:58.253

不是 100% 肯定我喜欢这个，但您总是可以延迟使用 item 直到您将一步移入 IEnumerable 数组，这样当您走到最后时您还没有使用最后一个条目。

它避免了对枚举数进行强制计数。

```
object item = null;
foreach (var a in items)
{
  // if item is set then we can use it.
  if (item != null)
  {
      // not final item
      f(item);
  }
  item = a;
}

// final item.
g(item); 
```

# tridion - Tridion 2011 SP1：部署内容时出现问题

> ID：10735733
> 
> 赞同：4
> 
> 时间：2012-05-24T10:32:29.203
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们使用没有任何修补程序的 Tridion 2011 sp1 和 .net Web 应用程序 httpupload.aspx 在文件系统中部署内容。我们监测发现有两个问题：

1）在发布队列中成功发布的某些时间页面没有在文件系统中上传/更新。

2) 没有为因错误而失败的页面创建传输包：

部署失败阶段：部署处理阶段失败，无法初始化类 com.tridion.storage.StorageManagerFactory，无法初始化类 com.tridion.storage.StorageManagerFactory

同样在部署程序日志文件和传输程序日志文件中，没有对失败项目事务 ID 的引用。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T10:45:46.060

您的日志中必须有更多关于失败的详细信息，而不仅仅是这些。

无法初始化 StorageManagerFactory 通常会指向配置错误的 cd_storage_conf.xml 或缺少 jar。

如果你偶尔遇到这个问题，那么肯定有一些东西偶尔会失败（比如你的数据库连接或文件系统）。

请浏览您的部署程序和/或核心日志以获取更多信息。

[更新]

我认为您可能有第二个部署程序“侦听”同一个传入目录，并且该第二个部署程序已损坏。

提示：

1.  你说没有创建传输包。我假设您的意思是您找不到传输包 - 它必须在 CM 中创建，否则它不会失败。这意味着“某人”拿起了它

2.  “有时它们会发布，有时不会” == 有时它们会被正确的部署者选中，有时它们会被错误的部署者选中。

3.  日志中没有对事务的引用

在您的服务器中搜索所有 cd_deployer_conf.xml，然后比较所有“传入”文件夹设置。每个传入文件夹只能有一个部署者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:29:04.817

尝试以下操作：

1) 在 Windows 事件日志中确定正在加载的 Deployer 的路径...通常它应该由 Tridion_Home 变量定义，但也有一个汇总逻辑，它也可能从中获取部署者路径如果您已将部署程序配置和 bin 文件夹放在应用程序 bin 文件夹中以供 Tridion Content Delivery API 处理，则您的应用程序配置优先

2) 检查更新后的 SQL JDBC jar 文件是否存在于部署程序 bin 文件夹中

3) 确认您没有在 CMA 和/或 CDA 服务器上安装 1.6.0.26 到 1.6.0.30 之间的 jre 版本 - 检查 32 位和 64 位版本

# iphone - 两个上下文是共享的（sharegroup），只有在主线程中生成的对象才能工作......？

> ID：10735736
> 
> 赞同：1
> 
> 时间：2012-05-24T10:32:38.210
> 
> 标签：iphone, opengl-es

我看过很多关于opengles（iOS）并发编程的文档，仍然无法解决我的问题，所以我在这里寻求您的帮助。

我按照说明，创建了两个线程，每个线程拥有一个上下文，并使它们成为相同的共享组，在主线程中渲染对象，并在第二个线程中创建对象。

我无法理解的是我无法渲染在第二个线程中创建的对象。（如果我将对象创建代码移回主线程，那么它可以工作。）

我在对象的设置序列之后做了 glFlush() 。我只是不明白。

我使用由 XCode4 生成的默认 opengl 演示应用程序。并添加这样的代码进行测试：

```
-(void)setupGL
{

    [EAGLContext setCurrentContext:self.context];
    self.context2 = [ [ EAGLContext alloc ] initWithAPI: kEAGLRenderingAPIOpenGLES2 sharegroup: self.context.sharegroup ];

    if( !self.context2 )
    {
        printf( " error !!!" );
    }
    if( self.context.sharegroup != self.context2.sharegroup )
    {
        printf( " error2 !!!" );
    }    

    ... self.effect = ....
    ... glEnable....
    ...

    [ self performSelectorInBackground: @selector(indicator) withObject: nil ];
}

-(void)indicator // run this in another thread
{
    [EAGLContext setCurrentContext:self.context2];

    glGenVertexArraysOES(1, &_vertexArray);
    glBindVertexArrayOES(_vertexArray);

    glGenBuffers(1, &_vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer2);
    glBufferData(GL_ARRAY_BUFFER, sizeof(gCubeVertexData2), gCubeVertexData2, GL_STATIC_DRAW);

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(0));
    glEnableVertexAttribArray(GLKVertexAttribNormal);
    glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(12));

    glBindVertexArrayOES(0);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    glFlush();
    [ EAGLContext setCurrentContext: nil ];
}

- (void)update
{
    .... generated by XCode4 ....
}
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    .... generated by XCode4 ....
} 
```

我错过了什么 ？？

我发现如果我在主线程中生成和设置对象，我仍然可以在第二个线程中绑定和修改对象的数据，并在主线程中正确渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:11:14.923

我想这可能会回答你的问题：

[顶点数组对象 (VAO) 可以在 OpenGL ES 中跨 EAGLContext 共享吗？](https://stackoverflow.com/questions/7125257)

大多数对象类型将在共享组中共享，但明确不支持 VAO。

# php - admin下magento中的菜单突出显示

> ID：10735740
> 
> 赞同：7
> 
> 时间：2012-05-24T10:32:59.790
> 
> 标签：php, magento

我在父菜单下的 admin 中添加了子菜单，但是当我们选择子菜单时，只有一个子菜单会在 admin 中突出显示，而其他子菜单不会突出显示。

我在 config.xml 文件中添加了以下代码。

```
<menu>
<customersettings module="customersettings">
<title>Advance Settings</title>
<sort_order>100</sort_order>               
<children>                  
<customersettings module="customersettings">
<title>Customer Settings</title>
 <sort_order>0</sort_order>                               
     <action>customersettings/adminhtml_customersettings</action> 
</customersettings>                             
</children>             
</customersettings>
</menu> 
```

请给我一些建议，谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-24T10:44:24.407

在您的控制器文件中，您可以添加

```
public function _initAction()
 {
    $this->loadLayout()->_setActiveMenu('customersettings/customersettings');

     return $this;
} 
```

这将在选择子菜单时突出显示菜单。

希望我是对的。

# asp.net-mvc - 我想拿最后 4 条记录，但总是得到前 4 条记录

> ID：10735747
> 
> 赞同：4
> 
> 时间：2012-05-24T10:33:09.133
> 
> 标签：asp.net-mvc, linq

我的方法中有这个：

```
var qry = db.Forms.Take(4)
                  .Where(m => m.SateliteID == Id)
                  .OrderByDescending(m => m.Tanggal)
                  .ToArray(); 
```

我想要的是从所有可用记录中获取最后 4 条记录，但我得到的是前 4 条记录。我做错了什么？我认为该命令与此相同：

```
SELECT TOP 4 <fields> FROM Forms WHERE sateliteID = Id
ORDER BY tanggal DESC 
```

但似乎他们是不同的。我应该怎么做才能得到我想要的（最后 4 条记录而不是前 4 条记录）？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T10:35:51.707

移动你的镜头：

```
var qry = db.Forms.Where(m => m.SateliteID == Id)
                 .OrderByDescending(m => m.Tanggal)
                 .Take(4)
                 .ToArray(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-24T10:35:20.397

```
var qry = db.Forms.Where(m => m.SateliteID == Id).OrderByDescending(m => m.Tanggal).Take(4).ToArray(); 
```

您应该订购而不是从有序列表中获取一些结果。应该以这种顺序调用方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:37:11.370

只需先应用您 where 和 orderby 子句，然后应用将为您完成工作的函数

```
var qry = db.Forms
                      .Where(m => m.SateliteID == Id) 
                     .OrderByDescending(m => m.Tanggal) 
                     .Take(4)
                     .ToArray(); 
```

供将来使用：[LINQER](http://www.sqltolinq.com/)

![在此处输入图像描述](../Images/3bf4cd5d33b0d0297982daacbe8fbb74.png)

这将允许您轻松地将 SQL QUERIES 转换为 LINQ .....非常有用的工具

# .net - 如何在 MenuItem 上添加鼠标事件处理程序

> ID：10735749
> 
> 赞同：1
> 
> 时间：2012-05-24T10:33:13.067
> 
> 标签：.net, c++-cli, clr

我有这个代码：

```
System::Windows::Forms::MenuItem^ item = gcnew System::Windows::Forms::MenuItem("text");
item->Click += ... 
```

如何将鼠标事件处理程序添加到项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:44:59.293

首先，您需要定义一个具有预期签名的事件处理程序方法：

```
void ItemClicked(Object^ sender, EventArgs^ e) {
    // your code
} 
```

然后使用`+=`运算符注册它：

```
item->Click += gcnew EventHandler(&ItemClicked); // if ItemClicked is static
item->Click += gcnew EventHandler(this, &ItemClicked); // if instance 
```

# java - 带有单元格闪烁的 JTable

> ID：10735758
> 
> 赞同：3
> 
> 时间：2012-05-24T10:33:59.600
> 
> 标签：java, swing, timer, jtable, renderer

我正在使用 Java 中的 Swing 库编写应用程序。我有一个扩展的表格组件，`JTable`在这个组件中我覆盖了方法`getTableCellRendererComponent`，因为我为表格的单元格着色。我有一个自定义表格模型（从默认表格模型扩展而来），并且表格组件本身已添加到 JPanel。这一切都有效。

现在我想在这个表中添加一些功能来让单元格闪烁。潜在地，一次可以有多个单元格闪烁，即（第 1 行，第 2 列）和（第 3 行，第 4 列）处的单元格。

这可能吗？任何可以让我开始的提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:13:01.817

我找到一篇文章来回答你：

[http://www.devx.com/DevX/10MinuteSolution/17167/0/page/1](http://www.devx.com/DevX/10MinuteSolution/17167/0/page/1)

该页面提供下载源代码。

基本上它使用以下方法通知表及时更新单元格。

```
JTable.tableChanged(new TableModelEvent(table.getModel(), firstRow, lastRow, column)); 
```

看了他的代码，我整理了一个他的代码比较简单的版本，你可以改我的代码或者使用他的代码（更优雅也更复杂）。

```
public class FlashCellTable
{
    public static Color color;

    public static void main(String[] args)
    {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setSize(800, 600);

        final JTable table = new JTable(4, 4);
        table.setDefaultRenderer(Object.class, new MyFlashingCellRenderer());
        table.setValueAt("Flashing", 0, 0);
        frame.getContentPane().add(new JScrollPane(table));

        final long startTime = System.currentTimeMillis();

        Thread thread = new Thread()
        {
            @Override
            public void run()
            {
                while (true)
                {
                    long now = System.currentTimeMillis();
                    long second = (now - startTime) / 1000;
                    color = second / 2 * 2 == second ? Color.red : Color.blue;

                    System.out.println("FlashCellTable.run");

                    SwingUtilities.invokeLater(new Runnable()
                    {
                        public void run()
                        {
                            table.tableChanged(new TableModelEvent(table.getModel(), 0, 0, 0));  
                        }
                    });
                    try
                    {
                        Thread.sleep(1000);
                    }
                    catch(InterruptedException e)
                    {
                        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
                    }
                }
            }
        };

        thread.start();

        frame.setVisible(true);
    }

    public static class MyFlashingCellRenderer extends DefaultTableCellRenderer
    {
        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
                                                       int row, int column)
        {
            JLabel label =
                (JLabel)super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

            if ("Flashing".equals(value))
            {
                label.setBackground(color);
            }
            else
            {
                label.setBackground(Color.white);
            }
            return label;
        }
    }
} 
```

# flash - Flash Builder 4 - 多点触控

> ID：10735765
> 
> 赞同：0
> 
> 时间：2012-05-24T10:34:14.943
> 
> 标签：flash, apache-flex, touch, builder, multi-touch

我想在我的应用程序中启用 2 指捏缩放和 3 指拖动。

实现这些基本多点触控功能的最简单方法是什么？无需自定义手势，只需上面提到的两个多点触控功能：

2 指缩放 3 指平移。

谢谢！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:49:56.693

将[输入模式](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/ui/Multitouch.html#inputMode)设置为[gesture](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/ui/MultitouchInputMode.html#GESTURE)，然后监听事件：[TransformGestureEvent.GesturePan](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/events/TransformGestureEvent.html#GESTURE_PAN)和/或[TransformGestureEvent.GestureZoom](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/events/TransformGestureEvent.html#GESTURE_ZOOM)

# .htaccess - 使用 htaccess 阻止特殊目录的所有机器人/爬虫/蜘蛛

> ID：10735766
> 
> 赞同：7
> 
> 时间：2012-05-24T10:34:17.580
> 
> 标签：.htaccess, seo, search-engine

我正在尝试阻止所有机器人/爬虫/蜘蛛获取特殊目录。我该怎么做`htaccess`？我搜索了一下，通过基于用户代理的阻塞找到了解决方案：

```
RewriteCond %{HTTP_USER_AGENT} googlebot 
```

现在我需要更多的用户代理（对于所有已知的机器人），并且该规则应该只对我的单独目录有效。我已经有一个 robots.txt，但并不是所有的爬虫都会查看它......通过 IP 地址阻止不是一个选项。还是有其他解决方案？我知道密码保护，但我必须先询问这是否是一种选择。尽管如此，我还是在寻找基于用户代理的解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-24T11:28:57.907

您需要启用 mod_rewrite。将其放在该文件夹中的 .htaccess 中。如果放在其他地方（例如父文件夹），则需要稍微修改 RewriteRule 模式以包含该文件夹名称）。

```
RewriteEngine On

RewriteCond %{HTTP_USER_AGENT} (googlebot|bingbot|Baiduspider) [NC]
RewriteRule .* - [R=403,L] 
```

1.  我只输入了几个机器人——你自己添加任何其他的（字母大小写无关紧要）。
2.  此规则将以“403 Access Forbidden”结果代码响应此类请求。如果您真的需要，您可以更改为另一个响应 HTTP 代码（考虑到您的要求，403 在这里最合适）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-24T21:12:44.907

为什么将 .htaccess 或 mod_rewrite 用于专门用于的工作`robots.txt`？这是您需要阻止一组特定目录的 robots.txt 片段。

```
User-agent: *
Disallow: /subdir1/
Disallow: /subdir2/
Disallow: /subdir3/ 
```

这将阻止目录中的所有搜索机器人`/subdir1/`，`/subdir2/`并且`/subdir3/`。

有关更多说明，请参见此处：[http ://www.robotstxt.org/orig.html](http://www.robotstxt.org/orig.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-01T07:50:54.527

我知道这个话题是“旧的”，但对于也登陆这里的人（就像我一样），你可以在这里查看[很棒的 5g blacklist 2013](http://perishablepress.com/5g-blacklist-2013/)。
这是一个很大的帮助，不仅对 wordpress，而且对所有其他网站都是如此。工作真棒恕我直言。
另一个值得关注的可能是[Linux 通过 .htaccess 审查反垃圾邮件](http://en.linuxreviews.org/HOWTO_stop_automated_spam-bots_using_.htaccess)

# opencl - 关于 OpenCl 内核中的二维数组

> ID：10735768
> 
> 赞同：0
> 
> 时间：2012-05-24T10:34:23.003
> 
> 标签：opencl

如何找出可以在 OpenCL 内核中创建的最大二维数组的大小？

例如
int anArray[1000][1000]; 在内核内部工作正常。但是当我为更大的场景（如 int anArray[5000][5000] ）重写它时，它显示运行失败。

想知道决定可以成功运行的最大数组大小的因素到底是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:43:11.330

您可以使用 clGetDeviceInfo 检索此类信息。

以下参数应该对您有所帮助（取决于您编写内核的方式）：

*   CL_DEVICE_GLOBAL_MEM_CACHE_SIZE
*   CL_DEVICE_LOCAL_MEM_SIZE

参考：[http ://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clGetDeviceInfo.html](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clGetDeviceInfo.html)

# google-docs-api - 还原文档修订

> ID：10735772
> 
> 赞同：1
> 
> 时间：2012-05-24T10:34:32.057
> 
> 标签：google-docs-api

在修订文档列表 api 中，是否可以还原文档修订？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:20:07.283

您可以下载文档中描述的任何修订：

[https://developers.google.com/google-apps/documents-list/#downloading_individual_revisions](https://developers.google.com/google-apps/documents-list/#downloading_individual_revisions)

# spring - struts2 spring 插件 - 它抱怨找不到 WebApplicationContext 的 getBean()

> ID：10735774
> 
> 赞同：1
> 
> 时间：2012-05-24T10:34:34.907
> 
> 标签：spring, struts2, struts, spring-3, struts2-spring-plugin

我正在使用`Struts 2.2.3.1`它`Struts2-spring plugin 2.2.3.1`。依赖注入工作正常，但我对`ApplicationContext`'`getBean`方法的使用破坏了：

```
WebApplicationContext ac = WebApplicationContextUtils.getWebApplicationContext(context);
AdminService service = ac.getBean(AdminService.class); 
```

`Spring 3.0.6`这就是我过去使用(`AdminService`是在 中声明的 bean )将依赖项注入我的 Struts 项目的方式`applicationContext.xml`。但是现在，随着这个插件的添加，它给出了以下错误：

> 找不到符号符号：方法getBean（java.lang.Class）位置：接口org.springframework.web.context.WebApplicationContext

如果我删除这个插件，那么它就可以工作。什么原因 ？

# android - 将 Eclipse Java 项目转换为 Android 项目

> ID：10735777
> 
> 赞同：0
> 
> 时间：2012-05-24T10:34:38.320
> 
> 标签：android, eclipse, svn

好的，首先，我已经阅读了[将 java 项目转换为 Eclipse 上的 android 项目](https://stackoverflow.com/questions/7171327/convert-java-project-into-android-project-on-eclipse)和 [将 java 项目转换为 Eclipse 上的 android 项目，](https://stackoverflow.com/questions/7171327/convert-java-project-into-android-project-on-eclipse) 但我这里的问题有点不同，列出的这些解决方案都没有工作。这是 Eclipse Classic 3.7.2

基本上，我在一个来自颠覆的项目上做一些协作工作。我的任务是创建一个 Android 分支。所以我从subversion里抓了eclipse项目，然后把这个项目改成android应该很容易吧？除了它似乎什么都不是。我已经尝试了所有列出的内容。没有转换按钮。如果我尝试从现有源创建一个新的 Android 项目，它会显示“已找到 Eclipse 项目！”，如果我删除它需要一个清单文件的 .project，我创建另一个 android 项目并复制清单文件，不行. 一切都编译了，但是我在 logcat 中遇到了很多错误。第一个是“无法加载项目的属性文件”。我复制了属性文件，但仍然出现错误。如果我修改 .

我只想将其转换为一个 android 项目，消除由于 Java 和 Dalvik 之间的库不匹配而可能发生的任何编译时错误，然后将其作为分支上传。我可能会创建一个新的 java 项目并复制源代码，但是我不完全确定如何将它作为分支上传到 subversion，因为我没有修改从存储库中获得的东西......

谢谢你的帮助！

编辑：为了响应一个提供的创建新 android 项目并使用现有源的答案，这根本行不通。我将它指向Java非android项目的目录，它告诉我该目录中已经存在一个项目。我删除 .project 文件，然后我收到错误“构建路径包含项目 com_android_pdstore 的重复条目 'src'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:40:46.497

您可以尝试创建一个新的 android 项目并选择“从现有源创建项目”，我曾经遇到过这种类型的问题，这就是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:44:39.183

右键单击项目，然后单击 Android 工具，单击修复项目属性，可能是不兼容的 API 构建。

# haskell - Haskell 检查数字是否来自斐波那契数列

> ID：10735778
> 
> 赞同：2
> 
> 时间：2012-05-24T10:34:42.753
> 
> 标签：haskell

我是 Haskell 初学者。上次我学习了斐波那契数列，所以我可以创建斐波那契数列。现在我想知道如何编写一个函数来检查数字是否属于 Fib 序列。

我的意思是功能：

```
belongToFib :: Int -> Bool 
```

我真的不需要代码。一些提示如何处理就足够了。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:57:02.547

我将为您提供一些涉及惰性评估的解决方案的提示：

1.  定义所有斐波那契数列。
2.  检查您输入的数字是否属于该序列。

这些是您需要定义的两件事的签名：

```
fib :: [Int]
belongToFib :: Int -> Bool 
```

当然，你需要一些技巧来完成这项工作。即使你的列表有一个（理论上）无限的数字序列，如果你确保你只需要处理一个有限的子序列，由于它的惰性，Haskell 将只生成严格需要的部分，并且你的函数不会永远循环. 因此，在检查您的号码的成员资格时，请`fib`确保您`False`在某个时候返回。

另一种可能的解决方案是尝试找出您的数字是否在斐波那契数列中，而无需实际生成到输入，而是仅依靠算术。作为对此的提示，请查看[此线程](https://math.stackexchange.com/questions/9999/checking-if-a-number-is-a-fibonacci-or-not)。

在[Wikipedia](http://en.wikipedia.org/wiki/Fibonacci_number#Recognizing_Fibonacci_numbers)上，您会找到许多其他方法来检查斐波那契数列的成员资格。

**编辑**：顺便说一句，当心`Int`. 您可能希望`Integer`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:55:51.607

这是一个函数的框架，用于测试一个数字是否出现在一个**递增**的数字列表中：

```
contains _ [] = False
contains n (x:xs) 
   | n == x = True 
   | n < x = ???
   | otherwise = ??? 
```

想想在我未解决的情况下应该发生什么......

或者，如果你既懒惰又允许使用`Prelude`函数，你可以看看`dropWhile`。

# android - 在图表值旁边添加自定义文本 - achartengine

> ID：10735790
> 
> 赞同：2
> 
> 时间：2012-05-24T10:35:08.150
> 
> 标签：android, achartengine

我正在研究带温度的 TimeSeries 图表。我想在图表值旁边添加一个自定义文本，例如我们在图表上有 1,34 和“热”。是否可以将自定义文本添加到图表值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:43:00.160

目前这是不可能的。

但是，如果需要，您可以添加自定义 Y 轴标签。

SVN 添加了对注释的支持。您可以根据[此](http://code.google.com/p/achartengine/source/checkout)页面签出代码并运行`ant dist`以构建包含此修复程序的最新 achartengine.jar 文件。

或者您可以使用[此处](https://repository-achartengine.forge.cloudbees.com/snapshot/)的中间版本。

# asp.net-mvc-3 - ajax jquery传递空值

> ID：10735791
> 
> 赞同：1
> 
> 时间：2012-05-24T10:35:12.953
> 
> 标签：asp.net-mvc-3, jquery

当我使用 jquery ajax 处理请求时，我在控制器中得到空值

**控制器**

```
[HttpPost]
       public ActionResult UpdateAnswers(string answers, string question, string controlid, int eventid)
       {
           var replacetext=string.Empty;
           if (answers.Length>0) 
             replacetext = answers.Replace("\n", ",");
           _service.UpdateAnswers(eventid, replacetext, controlid);
           return PartialView("CustomizedQuestions");
        } 
```

**Jquery - Ajax 代码**

```
 var test = "{ answers: '" + $("#answerlist").val() + "', question: '" + title + "', controlid: '" + controlid + "', eventid: '" + eventid + "' }";
                        $.ajax({
                            url: '@Url.Action("UpdateAnswers")',                                
                            type: 'POST',
                            dataType: 'html',
                            contentType: 'application/html; charset=utf-8',
                            context: $(this),
                            // data: "{ answers: '"+$("#answerlist").val()+"' ,question: '"+ title +"', controlid:'"+ controlid +"',eventid:'"+ eventid+"'}",
                             data: JSON.stringify(test),   
                            success: function (result) {
                                $(this).dialog("close");
                            },
                            error: function () {
                                //xhr, ajaxOptions, thrownError
                               alert('there was a problem saving the new answers, please try again');
                            }
                        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:13:18.060

你`contentType`错了。为什么`application/html`在传递 JSON 时设置为？试试这样：

```
var test = { answers: $('#answerlist').val(), question: title, controlid: controlid, eventid: eventid };
$.ajax({
    url: '@Url.Action("UpdateAnswers")',                                
    type: 'POST',
    dataType: 'html',
    contentType: 'application/json; charset=utf-8',
    context: $(this),
    data: JSON.stringify(test),   
    success: function (result) {
        $(this).dialog("close");
    },
    error: function () {
        //xhr, ajaxOptions, thrownError
        alert('there was a problem saving the new answers, please try again');
    }
}); 
```

或使用`application/x-www-form-urlencoded`默认值：

```
var test = { answers: $('#answerlist').val(), question: title, controlid: controlid, eventid: eventid };
$.ajax({
    url: '@Url.Action("UpdateAnswers")',                                
    type: 'POST',
    dataType: 'html',
    context: $(this),
    data: test,
    success: function (result) {
        $(this).dialog('close');
    },
    error: function () {
        //xhr, ajaxOptions, thrownError
        alert('there was a problem saving the new answers, please try again');
    }
}); 
```

# javascript - 我在这里正确使用模式匹配吗？

> ID：10735794
> 
> 赞同：2
> 
> 时间：2012-05-24T10:35:24.113
> 
> 标签：javascript, regex

我有以下代码。假设变量`u1`可以是以下任何一种：

`NBSLoan|Accept|PPI+No|60Months`
`NBSLoan|Refer|PPI+No|60Months`
`DeBSLoan|Accept|PPI+No|60Months`

另外，最后一部分`60Months`总是不同的，我可以使用以下 JavaScript 进行模式匹配吗？我需要为管道`|`符号输入一个特殊字符吗？或者这不起作用，因为我试图只匹配较长字符串的第一部分？

```
<script type="text/javascript">
var u1 = 'NBSLoan|Accept|PPI+No|60Months';

var n_accept = /^NBSLoan|Accept$/;
var n_refer = /^NBSLoan|Refer$/;
var d_accept = /^DeBSLoan|Accept$/;

if (u1.match(n_accept)) {       
var pvnPixel = '<img src="https://url1.com"/>';
document.write(pvnPixel);
}
else if (u1.match(n_refer)) {       
var pvnPixel2 = '<img src="url2.com"/>';
document.write(pvnPixel2);
}
else if (u1.match(d_accept)) {
var pvnPixel3 = '<img src="url3.com"/>';
document.write(pvnPixel3);  
}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T10:37:42.750

> 我需要为管道输入一个特殊字符吗？象征？或者这不起作用，因为我试图只匹配较长字符串的第一部分？

两个都。

*   您需要使用反斜杠转义管道符号以匹配文字管道字符。没有反斜杠就意味着[交替](http://www.regular-expressions.info/alternation.html)。
*   您还需要删除行尾锚。

试试这个正则表达式：

```
/^NBSLoan\|Accept/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:48:17.370

为什么不首先使用以下方法拆分字段`split('|')`：

```
function dispatch(u) {
  var parts = u.split('|'),
      key = parts[0] + "_" + parts[1];
      disp_table = {
       'NBSLoan_Accept':'url1.com',
       'NBSLoan_Refer':'url2.com',
       'DeBSLoan_Accept':'url3.com'
      },
      url = disp_table[key];

  url && document.write("<img src=\""+url+"\"/>");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:48:20.370

您还想删除 $ （它表示字符串的结尾）或添加 .* 以捕获所有其他字符：

失去结局：

```
/^NBSLoan\|Accept/ 
```

要匹配并捕获其他字符：

```
/^NBSLoan\|Accept.*$/ 
```

# facebook - 未捕获的 CurlException：7：连接失败

> ID：10735798
> 
> 赞同：6
> 
> 时间：2012-05-24T10:36:05.853
> 
> 标签：facebook, facebook-php-sdk

我有一个实时的 Facebook 应用程序。从上周开始，我不断收到

PHP致命错误：未捕获的CurlException：7：无法连接到2a03：2880：2110：3f03：face：b00c：0：1：网络无法访问

它在 facebook sdk 3.1.1 的 base-facebook.php 文件中抛出（使用最新版本）

可能是什么原因？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:39:47.850

也许，您应该检查 IPV6 的网络设置。

在我的应用程序中，错误不断发生。设置网络和编程没有改变。

所以，我已经更改了 IPV6 的网络设置。我已经解决了。

# jquery - JQuery UI对话框模式禁用选项不起作用

> ID：10735800
> 
> 赞同：0
> 
> 时间：2012-05-24T10:36:13.123
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我似乎有一个奇怪的问题，我想知道是否有其他人遇到过这个问题或者可以看到我哪里出错了。

我有一个 jquery ui 对话框模式，当我初始化它时，我将 disabled 标志设置为 true，因为我不希望它显示，直到它被用户调用。这是我使用的代码：

```
function wkgp_config_modal(aWorkgroup, isDisabled){
    $("#wkgp_config_modal").dialog({disabled: isDisabled,
            height: 100,
            modal: true,
            title: aWorkgroup+" config setup",
            resizable:false,
            overlay:{opacity:0,
                     background:"white"}
    });
} 
```

这个函数是从我的 init.js 文件中调用的

```
$(document).ready(function() {
  wkgp_config_modal("test", false);
  //other code here not related to issue
} 
```

该函数被调用并且所有其他设置（如可调整大小）都是正确的，我只是不确定我做错了什么，任何建议都会非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:02:38.080

我不是 100% 确定该`disabled`选项真正应该做什么。我认为当你尝试调用它的方法时，它会让你的对话框不做任何事情。

但是，为避免在创建后立即打开对话框，您将`autoOpen`选项设置为`false`.

```
var wkgp_config_modal = function (aWorkgroup, autoOpen) {
    //default autoOpen to true
    autoOpen = (typeof autoOpen !== 'boolean' || autoOpen);

    //alternatively, default autoOpen to false
    //autoOpen = (typeof autoOpen === 'boolean' && autoOpen);

    $('#wkgp_config_modal').dialog({
            autoOpen: autoOpen,
            height: 100,
            modal: true,
            title: aWorkgroup + ' config setup',
            resizable:false,
            overlay:{
                opacity:0,
                background:"white"
            }
    });
}; 
```

# ios - 通过使用 xml 在 iOS 5 应用程序上创建文件将数据导出到 *.xls 文件

> ID：10735805
> 
> 赞同：3
> 
> 时间：2012-05-24T10:36:38.353
> 
> 标签：ios, xml, export-to-excel, xls

我正在使用以下代码在我的 iOS 应用程序上创建一个 *.xls 文件。一切进展顺利。我可以用 Microsoft Excel 打开它，但如果我想用 Apple Numbers 打开它，它就不起作用。

```
- (void)exportToExcel
{
    NSManagedObjectContext *context = [self managedObjectContext];

    NSFetchRequest *request = [[NSFetchRequest alloc] init];

    NSError *error;
    NSString *header = @"<?xml version=\"1.0\"?>\n<Workbook xmlns=\"urn:schemas-microsoft-com:office:spreadsheet\"\nxmlns:o=\"urn:schemas-microsoft-com:office:office\"\nxmlns:x=\"urn:schemas-microsoft-com:office:excel\"\nxmlns:ss=\"urn:schemas-microsoft-com:office:spreadsheet\"\nxmlns:html=\"http://www.w3.org/TR/REC-html40\">\n<Worksheet ss:Name=\"Sheet1\">\n<Table ss:ExpandedColumnCount=\"";
    NSString *columncount = @"\" ss:ExpandedRowCount=\"";
    NSString *rowcount = @"\" x:FullColumns=\"1\"x:FullRows=\"1\">\n";

    NSString *rowStart = @"<Row>\n";
    NSString *rowEnde = @"\n</Row>\n";

    NSString *stringStart = @"<Cell><Data ss:Type=\"String\">";
    NSString *stringEnde = @"</Data></Cell>";

    NSString *numberStart = @"<Cell><Data ss:Type=\"Number\">";
    NSString *numberEnde = @"</Data></Cell>";

    NSString *footer = @"</Table>\n</Worksheet>\n</Workbook>";

    NSString *xlsstring = @"";

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Form" inManagedObjectContext:context];

    [request setEntity:entity];

    NSArray *arr = [context executeFetchRequest:request error:&error];

    int numberOfRows = 1;
    int numberOfCols = 2;

    for (Form *form in arr) {
        numberOfRows = numberOfRows + 1;
    }

    xlsstring = [NSString stringWithFormat:@"%@%i%@%i%@", header, numberOfCols, columncount, numberOfRows, rowcount];
    xlsstring = [xlsstring stringByAppendingFormat:@"%@%@Patient number%@%@Name%@%@", rowStart, stringStart, stringEnde, stringStart, stringEnde, rowEnde];

    for (Form *form in arr) {
        xlsstring = [xlsstring stringByAppendingFormat:@"%@%@%@%@%@%@%@%@", rowStart, numberStart, form.pnumber, numberEnde, stringStart, form.name, stringEnde, rowEnde];
    }
    xlsstring = [xlsstring stringByAppendingFormat:@"%@", footer];

    [xlsstring writeToFile:@"/Users/***/Desktop/form.xls" atomically:YES encoding:NSISOLatin1StringEncoding error:nil];
} 
```

有谁知道为什么会这样，甚至有解决这个错误的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:44:15.417

Numbers 不会导入 Excel XML 格式。（请参见[此处](https://apple.stackexchange.com/questions/3357/can-numbers-09-import-an-excel-xml-file)。）它将导入 Excel 原生格式，但编写这将不是一件容易的事。

您能否让您的应用程序同时选择 Excel XML（适用于 Excel 用户）和 CSV（适用于 Numbers 用户）？

# ios5 - 在 iOS 上创建自签名证书

> ID：10735806
> 
> 赞同：1
> 
> 时间：2012-05-24T10:36:43.810
> 
> 标签：ios5, ssl-certificate, self-signed

有没有办法以编程方式在 IOS 上创建自签名证书？

我们有一个客户端-服务器连接，配对只确认一次，然后每次都使用证书重新建立连接。

现在我们正在使用 openssl 来做这件事，但这对于我们的需求来说有点过分了。ios 是否有任何机制可以

*   生成 x509 证书
*   将其应用于套接字（ergo 创建等效于 SSL 套接字）
*   查询服务器发送的证书，以便存储以验证服务器身份？

谢谢你！

# c# - 使用域服务访问域模型中的默认值

> ID：10735808
> 
> 赞同：1
> 
> 时间：2012-05-24T10:36:46.297
> 
> 标签：c#, domain-driven-design

我试图找出一个好的和干净的方法，让我的域模型访问在创建新实体对象时在我的数据库中定义的默认值。假设我正在使用 Facebook Connect 为我的网站创建新用户。由于我无法确定 Facebook 用户是否设置了国家/地区，因此在创建新实体时需要访问默认国家/地区。

到目前为止，我已经用一个方法 GetDefaultCountry() 创建了一个域服务——可能还会有更多。

ISettingsService.cs（域服务）：

```
public interface ISettingsService
{
    Country GetDefaultCountry();
} 
```

设置服务在基础设施层实现，可以通过我的 UnitOfWork 访问。然后我创建了一个工厂，它将设置服务作为参数。这负责创建用户实体。

UserFactory.cs（域工厂）：

```
public class UserFactory
{
    private ISettingsService _settings;

    public UserFactory(ISettingsService settings)
    {
        _settings = settings;
    }
    public User CreateFacebookUser(string facebookUserId)
    {
        var user = new User();

        user.AccountType = AccountType.Facebook;
        user.ExternalId = facebookUserId;
        user.Country = _settings.GetDefaultCountry();
        user.Timestamp = DateTime.Now;

        return user;
    }
} 
```

这就是我的用户服务的样子。

UserService.cs（应用服务）：

```
using (var uow = new UnitOfWork())
{
    UserFactory factory = new UserFactory(uow.GetSettingsService());

    var user = factory.CreateFacebookUser(facebookUserId);
    ...
    uow.Save(user);
    uow.SubmitChanges();
} 
```

我的问题是，我在正确的轨道上吗？可以通过域服务访问默认值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:49:04.293

您的解决方案似乎很好，尽管根据您对默认国家/地区的定义可能会有更好的选择。

*   如果你想在代码中定义默认值（例如，如果 Country 是一个值对象），最好有一个静态 Country.Default 属性。比 _settings.GetDefaultCountry() 更简单，更流畅。

*   如果 Country 是存储在数据库中且带有布尔 IsDefault 字段的完整实体，我的直觉是 Repository 将是 GetDefaultCountry() 方法的更好位置。我不会为此创建一个存储库。

# javascript - 每个选择框选项中的颜色字段和文本值

> ID：10735809
> 
> 赞同：0
> 
> 时间：2012-05-24T10:36:46.400
> 
> 标签：javascript, jquery, dynamic, drop-down-menu

我在选择框中动态添加了选项值。但是对于每个选项，我想显示一个小的彩条+关于彩条的描述。描述将是正确的颜色条。

在选择框的每个选项值中动态合并颜色条+描述的方法是什么？

以下代码正在添加选项值。

```
 for (var i = 0; i < item.length; i++) { 
   Options += '<option value="' + item[i] + '">' + item[i] + '</option>';
   } 
```

我的要求是在 item value 旁边使用宽度为 1em 的小文本字段添加颜色条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:18:31.290

如果此栏在文本的背景上，您可以使用选项标签内的适当样式并使用一些数学公式使用 i 使用 rgb 代码计算颜色

```
<option style="background-color: rgb(255,255,i);"> item i </option> 
```

尝试用 i 找到一些计算，产生从 0 到 255 的值，它们之间有很大的差异，公式取决于你的 i 的范围，当然它可以是 255 - ix 10，以便在你的选项之间产生足够的对比

# jquery - 将 LI 元素中的参数传递给 jQuery droppable

> ID：10735811
> 
> 赞同：0
> 
> 时间：2012-05-24T10:36:50.100
> 
> 标签：jquery, html

我可以向 LI 元素添加一个参数，以便我可以在 jQuery 的 droppable 中检索它吗

目前我有：

```
drop: function(event, ui) { 
   var theText = ui.draggable.text();
} 
```

但是我需要访问 LI 元素中的参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:39:58.417

您可以在标签中添加一个`data-*`属性，也可以将一个属性放入其中并将参数存储在那里。`li``input[type=hidden]``li`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:53:46.533

试试这个示例程序。它可以帮助您满足您的要求

```
 $(document).ready(initialize);
        function initialize() 
        {
            $("#divFields li").draggable
            ({
                helper: "clone"
            });

            $("#divDroppedFields").droppable
            ({
                accept: "#divFields li",
                drop: function (event, ui)
                {
                    $(this).find('#txtMessageFields').append((ui.draggable.attr('data-value')));                        
                }
            });
        }

    <div id="divFields">
        <ul>
            <li data-value="data1">iPhone</li>
            <li data-value="data2">iPod</li>
            <li data-value="data3">iPad</li>
        </ul>
    </div>

  <div id="divDroppedFields" class="ui-widget-content">
        <textarea id="txtMessageFields" cols="50" rows="10"></textarea>
  </div> 
```

# actionscript-3 - AS3 CS5 如何在 SOUND_COMPLETE 之后刷新舞台？

> ID：10735814
> 
> 赞同：0
> 
> 时间：2012-05-24T10:37:02.957
> 
> 标签：actionscript-3, flash-cs5

我有一个教育游戏，孩子们听到声音，然后必须从 3 个图像中选择正确的图像。

当他们想再次听到声音时，他们可以按下扬声器按钮。这 3 个图像是动态添加到舞台的动画剪辑（名为 card1、card2 和 card3），其中 buttonMode = true。

每当他们按下扬声器以再次听到声音或在按下错误图像时获得反馈时，我都会在声音持续时间内从卡片中删除 mouse_events。我还设置了 buttonMode = false，所以孩子们知道他们在播放声音时无法点击。

在 SOUND_COMPLETE 上，我再次添加了 eventListeners。现在 buttonMode = true 也再次出现。

我想刷新屏幕，例如 event.updateAfterEvent(); 所以光标会变成一只手，如果他们把它放在其中一张牌上的话。但是 event.updateAfterEvent() 不能附加到 SOUND_COMPLETE，您只能在 MOUSE 或 GESTURE 等交互事件之后使用它。

**tldr; 如何刷新我的舞台，以便在 SOUND_COMPLETE 之后光标变回手？**

这是一些代码：

```
 function speakerClick(event:MouseEvent):void
    {
        remLst();
        SoundMixer.stopAll();
        cardCnl = gameSnd.play();
        cardCnl.addEventListener(Event.SOUND_COMPLETE, sndComplete);
    }
    function sndComplete(event:Event):void
    {
        cardCnl.removeEventListener(Event.SOUND_COMPLETE, sndComplete);
        addLst();           
    }

    function addLst():void
    {
        for (var i:int = 1; i < 4; i++)
        {
            var card:Card = getChildByName("card" + i) as Card;
            card.addEventListener(MouseEvent.CLICK, fnClick);
            card.addEventListener(MouseEvent.MOUSE_OVER, fnOver);
            card.addEventListener(MouseEvent.MOUSE_OUT, fnOut);
            card.buttonMode = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:59:59.343

In your addLst function, when cycling through the 4 cards, you could check for the current mouse position, and check if it is inside the boundaries of one of the cards.

It could work like this:

```
if ( mouseX > card.x && mouseX < (card.x + card.width)
     mouseY > card.y && mouseY < (card.y + card.height))
{
    Mouse.cursor = MouseCursor.BUTTON;
} 
```

I am not 100% sure though if buttonMode changes it back to Arrow when the mouse leaves the object. I usually don't use buttonMode.

# image-processing - 如何处理图像中的浮点坐标值

> ID：10735817
> 
> 赞同：5
> 
> 时间：2012-05-24T10:37:14.780
> 
> 标签：image-processing, opencv, matlab

我正在图像上绘制一些几何图形。问题是坐标以浮点数的形式出现，所以我无法绘制它们。作为一种解决方法，我正在使用 floor(); 将其截断为最接近的整数。这在某些情况下可以正常工作，只是它会稍微改变我的形象。

```
 x=9.7 

  x'=floor(x)= 9  //the plot is now at 9 and not at 9.7 as desired, (this is 'shift') 
```

但是在我的要求是在**相等距离**处绘制多个形状的情况下，我面临的问题是移位（因为 floor();）对于每个形状并不统一。
就像数字通信中的量化噪声一样。

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:55:06.367

这个问题实际上在计算机图形学中很常见。[光栅化](http://en.wikipedia.org/wiki/Rasterisation)是您目前正在努力解决的问题领域。您可能会发现[Bresenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)很好地介绍了该主题。[这](http://www.netgraphics.sk/rasterization-a-line)是一个不错的交互式站点，其中包含一些不同的光栅化算法。

希望有帮助！

# jquery - 查找img是否在jquery中有alt，如果没有，则从数组中添加

> ID：10735820
> 
> 赞同：0
> 
> 时间：2012-05-24T10:37:27.180
> 
> 标签：jquery

首先需要找到站点中的所有img

```
$("#body").find(img) 
```

然后检查 img 是否具有“alt”属性，如果 image 具有该属性，它将被转义，如果没有或 alt 为空，则会从列表或数组中随机添加一个字符串到 img。

我现在必须在函数中使用 .each() 一些方法，但我是 jquery 的新手，所以一点帮助将是完美的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T10:40:39.120

```
var arr = ['hello', 'hi', 'yo'];
$('#body img').each(function() {
    if ( ! $(this).attr('alt'))
        $(this).attr('alt', arr[Math.round(Math.random() * (arr.length - 1)))]);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:40:55.813

您可以使用一个选择器完成所有操作：

```
$("#body img[alt!='']").each(function(){
    // What you want here...
}); 
```

或这个：

```
$("#body img[alt!=''][alt]").each(function(){ 
```

取决于 DOM 结构。

或者有一个`filter`功能：

```
$("#body img").filter(function(){
    return this.alt;
}).each(function(){
    // What you want here...
}); 
```

如果你想用一个来做这一切`each`，你可以使用这个：

```
$("#body img").each(function(){
    if (this.alt)
        // Do something.
    else
        // Do something else.
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:39:15.497

这应该可以帮助您入门：

```
$("#body img").each(function(){
   var $this = $(this);
   if (!$this.attr("alt")){
     //do something
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-23T07:18:09.590

```
Object.keys($('body').find('img')).map((item)=>{
    return $('body').find('img')[item].alt
}) 
```

通过这种方法，您可以获得所有为空的图像 alt，并且您将获得所有没有 alt 属性的图像标签。

# android - 如何与 android 键盘输入和其余按钮交互

> ID：10735830
> 
> 赞同：0
> 
> 时间：2012-05-24T10:38:04.363
> 
> 标签：android

我有一个弹出安卓键盘的编辑框。我想要的是点击键盘上的完成按钮，我想在其中显示一条消息，如果用户点击其余按钮，尽管完成按钮，消息应该是清晰的。我已经使用了这段代码，但它不起作用。请帮我解决这个问题。

**我用过的代码**

```
m_passwrdEditText.setOnKeyListener(new OnKeyListener() 
    {
        public boolean onKey(View v, int keyCode, KeyEvent event) 
        {           
            if (keyCode == KeyEvent.KEYCODE_ENTER)
            {                             
                m_passwrdErrorText.setText("Test Project");
            }
            else 
            {                   
                m_passwrdErrorText.setText("");
            }

            m_passwrdEditText.setTypeface(face);
            return false;
        }
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:47:05.720

`true`从`onKey()`方法返回。

# python - Scrapy spider：处理错误定义字符编码的页面

> ID：10735836
> 
> 赞同：5
> 
> 时间：2012-05-24T10:38:20.190
> 
> 标签：python, unicode, scrapy

**更新：**只需从命令行运行此错误即可重现此错误：

```
scrapy shell http://www.indiegogo.com/Straight-Talk-About-Your-Future 
```

* * *

我正在使用 Scrapy 抓取网站。我抓取的每一页都声称是 UTF-8 编码的：

```
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"> 
```

但偶尔，页面包含不属于 UTF-8 的字节，我会收到 Scrapy 错误，例如：

```
exceptions.UnicodeDecodeError: 'utf8' codec can't decode byte 0xe8 in position 131: invalid continuation byte 
```

我仍然需要抓取这些页面，即使它们包含不可映射的字符。有没有办法告诉 Scrapy 覆盖页面声明的编码，并改用另一种（比如 UTF-16）？

这是捕获异常的地方：

```
2012-05-30 14:43:20+0200 [igg] ERROR: Spider error processing <GET http://www.site.com/page>
    Traceback (most recent call last):
      File "/Library/Python/2.7/site-packages/twisted/internet/base.py", line 1178, in mainLoop
        self.runUntilCurrent()
      File "/Library/Python/2.7/site-packages/twisted/internet/base.py", line 800, in runUntilCurrent
        call.func(*call.args, **call.kw)
      File "/Library/Python/2.7/site-packages/twisted/internet/defer.py", line 368, in callback
        self._startRunCallbacks(result)
      File "/Library/Python/2.7/site-packages/twisted/internet/defer.py", line 464, in _startRunCallbacks
        self._runCallbacks()
    --- <exception caught here> ---
      File "/Library/Python/2.7/site-packages/twisted/internet/defer.py", line 551, in _runCallbacks
        current.result = callback(current.result, *args, **kw)
      File "/Library/Python/2.7/site-packages/scrapy/core/spidermw.py", line 61, in process_spider_output
        result = method(response=response, result=result, spider=spider) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T02:26:03.593

在最新的 dev scrapy (0.15) 中进行了一些编码工作。可能值得尝试最新版本。

Scrapy 允许您通过[response.body_as_unicode](http://readthedocs.org/docs/scrapy/en/latest/topics/request-response.html#scrapy.http.TextResponse.body_as_unicode)访问 unicode 。这以与浏览器类似的方式处理编码检测，您几乎应该始终使用它而不是原始正文。从 scrapy 0.15 开始，它依赖于[w3lib.encoding.html_to_unicode](https://github.com/scrapy/w3lib/blob/master/w3lib/encoding.py#L119)，并进行了一些定制。

当有人请求 unicode 时，解码会延迟发生。您可以创建一个新响应，从您在蜘蛛中收到的编码自己指定编码，但是，这不是必需的。

从回溯中不清楚是哪位代码实际上导致了错误发生。有更详细的吗？另一种可能性可能是身体以某种方式被截断。

如果这些页面由浏览器而不是由scrapy正确处理，那么如果您可以制作一个简单的测试用例并报告错误，将不胜感激。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:31:59.690

由于您可能会在网页上获得各种字符编码，因此通常最好尽快将所有抓取的数据解码为 un​​icode，在蜘蛛中将其作为 unicode 处理，然后在最后一分钟将其编码为您需要的任何编码（在打印之前或放入数据库等）两天前我实际上写了一篇关于这个的文章（基于我自己的scrapy经验），这可能会有所帮助[http://www.harman-clarke.co.uk/answers/python-web-抓取-unicode.php](http://www.harman-clarke.co.uk/answers/python-web-scraping-unicode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:19:20.650

我假设这发生在管道中而不是下载器中。

在填充到项目之前清理（替换无法解码的字节）数据。

# android - 为什么使用 RESTFul Web 服务填充数据库是一个好习惯？

> ID：10735842
> 
> 赞同：2
> 
> 时间：2012-05-24T10:38:42.763
> 
> 标签：android, mysql, rest, database-connection

我的问题实际上在标题中。我正在开发一个填充远程 mysql 数据库（在亚马逊云服务器中）的 Android 应用程序。

为什么不使用 java 程序中使用的相同技术（例如使用导入 java.sql.Connection 对象）？

谢谢你，R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:51:56.440

REST 有很多好处，下面很少

您可以使用适用于每种语言和平台的标准 HTTP 方法调用来发出请求和检索信息

基于标准的安全性：利用 OAuth 协议对 REST 调用进行身份验证

灵活的格式：REST API 支持 XML 序列化和 JSON 格式

# java - 在配置单元中创建表异常？

> ID：10735843
> 
> 赞同：2
> 
> 时间：2012-05-24T10:38:45.423
> 
> 标签：java, apache, hadoop, hive, apache-zookeeper

我已经安装了 Hive，但是当我编写命令来创建表“CREATE TABLE foo(id int, msg STRING);”时。我抛出异常“清理操作完成失败：元数据错误：javax.jdo.JDOFatalDataStoreException：无法创建数据库'metastore_db'，有关详细信息，请参阅下一个异常。NestedThrowables：java.sql.SQLException：无法创建数据库'metastore_db'，有关详细信息，请参阅下一个异常。失败：执行错误，从 org.apache.hadoop.hive.ql.exec.DDLTask 中返回代码 1”。为什么会发生此异常，可能是配置问题或其他原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-28T11:24:07.193

我有同样的问题：

voicestreams@voicestreams:~/testbed/eclipseprojects/workspace/mapreducesort/java$ hive

Hive 历史文件=/tmp/root/hive_job_log_root_201210282200_1123208966.txt

蜂巢>显示表

> 失败：元数据中的错误：javax.jdo.JDOFatalDataStoreException：无法创建数据库“/var/lib/hive/metastore/metastore_db”，有关详细信息，请参阅下一个异常。NestedThrowables: java.sql.SQLException: 无法创建数据库 '/var/lib/hive/metastore/metastore_db'，有关详细信息，请参阅下一个异常。失败：执行错误，从 org.apache.hadoop.hive.ql.exec.DDLTask 返回代码 1

我使用 apt-get install hadoop-hive 安装了 Hive。在我将元存储从 /var/lib/hive/ 移动后，它起作用了。我通过编辑来做到这一点： **/etc/hive/conf.dist/hive-site.xml**

从：

```
<property>
  <name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:derby:;databaseName=/var/lib/hive/metastore/metastore_db;create=true</value>
  <description>JDBC connect string for a JDBC metastore</description>
</property> 
```

至：

```
<property>  
<name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:derby:;databaseName=/home/voicestreams/hive/metastore/metastore_db;create=true</value>
  <description>JDBC connect string for a JDBC metastore</description>
</property> 
```

`

基本上，我将 databaseName= 更改为可写目录 (/home/voicestreams/hive/) 并且它起作用了。当然，我必须在再次运行 hive 之前创建 /home/voicestreams/hive/。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-28T13:05:13.180

确保从 hive 目录的 bin 文件夹启动 hive。它对我有用！

# php - 如何检查会话变量是否被传递给uploadify.php？

> ID：10735847
> 
> 赞同：0
> 
> 时间：2012-05-24T10:39:12.093
> 
> 标签：php, session, uploadify

我在 uploadify (v3.1) 中通过 formData 选项传递会话数据的解决方法遇到了一些困难。我已在[此页面](http://www.uploadify.com/documentation/uploadify/using-sessions-with-uploadify/)上实施了建议，但收到 HTTP 500 错误。

我想知道如何检查我的会话中的内容，看看解决方法是否真的有效，即我的会话ID 是否真的被传递给uploadify.php。返回uploadify.php中回显的变量的常用方法是onUploadSuccess事件，但我不能使用它，因为上传没有成功完成！

所以我想知道我还有什么其他选择。我知道诸如`var_dump( $_SESSION );`or之类的方法`die(print($_SESSION));`，但我不知道在哪里可以找到这些返回的信息。

我在下面包含了完整的 uploadify.php 脚本，以防万一。

谢谢，

缺口

```
<?php
$session_name = session_name();

if (!isset($_POST[$session_name])) {
    exit;
} else {
    session_id($_POST[$session_name]);
    session_start();
}

/*
Uploadify
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
Released under the MIT License <http://www.opensource.org/licenses/mit-license.php&gt; 
*/
// Define a destination
$targetPath = 'media/' . $_SESSION["user_name"] . '/';

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetFile = $targetPath . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:19:40.627

您也可以使用`print_r($_SESSION)`，但`var_dump($_SESSION)`也很有用。

记住，你只能在之后使用`session_start();`

# backbone.js - 主干js的get方法不起作用

> ID：10735848
> 
> 赞同：1
> 
> 时间：2012-05-24T10:39:14.050
> 
> 标签：backbone.js, get, mode

假设我有一个模型：

```
window.PageModel = Backbone.Model.extend({

    default:{
        "device":"ipad",
    "lang":"zh-Hans",
    "page":2,
    "uuid":"3c30e128-ed44-43a7-960a-e937457b8b58"
    },

    initialize: function () {
        console.log('lang',this.get('lang'));
        console.log('device',this.get('device'));

    }
}) 
```

但是当我初始化它时，

```
window.pageModel = new PageModel(); 
```

萤火虫告诉我“ `lang`”和“ `device`”是`undefined`。

为什么会这样？我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:52:44.677

你应该使用
`defaults:{}`
而不是
`default:{}`
这样你的代码将是

```
defaults:{
        "device":"ipad",
    "lang":"zh-Hans",
    "page":2,
    "uuid":"3c30e128-ed44-43a7-960a-e937457b8b58"
    } 
```

# database - 父子表替代

> ID：10735850
> 
> 赞同：0
> 
> 时间：2012-05-24T10:39:18.177
> 
> 标签：database, winforms, webforms, parent-child

是否有任何替代创建两个表：父子表来实现父子表。我正在使用一个数据库，其中父表包含子表的重复字段。这让我觉得这个概念很烦人。我可以用这种方式编码，但这对我来说很烦人。我想重新设计数据库，可能将表合并为 1 并使用视图而不是表。我需要有关解决方法以及可能的利弊的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:46:59.017

您可以在同一个表中添加父 ID 以避免使用 2 个表。

前任。

category_id -------- category_name --------- parent_category_id

* * *

1 --------- CAT A --------- 0

2 -------- 猫孩子 A ------------ 1

3 -------------------- 猫孩子 A 1 ---------- 1

4 -------- 一个孩子 -------------- 2

同样地。希望这会有所帮助。

# iphone - 将默认值添加到 settings.bundle 项目？

> ID：10735853
> 
> 赞同：0
> 
> 时间：2012-05-24T10:39:27.477
> 
> 标签：iphone, objective-c, cocoa-touch

我注意到 settings.bundle (Root.plist) 中的某些值不允许您将默认值与它们关联？

![在此处输入图像描述](../Images/75b6fba906886dd7a26cadd304ceeb1c.png)

有没有办法添加默认字段，或者只是在应用程序中为这些项目添加适当的默认值，使用...

```
NSDictionary *defaultSettings = [NSDictionary dictionaryWithObjectsAndKeys:@"Kinetic", @"IDBombs", nil];
[userDefaults registerDefaults:defaultSettings]; 
```

只是好奇我做对了还是错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:42:41.477

右键单击项目中的任何行，单击`Add row`菜单并选择`Default value`。

# java - 使用 IKVM 和 ikvmc 休眠

> ID：10735864
> 
> 赞同：1
> 
> 时间：2012-05-24T10:40:41.767
> 
> 标签：java, .net, hibernate, porting, ikvm

我在一个项目中工作，我们必须将 Java 应用程序移植到 .Net，但用户希望继续使用它，因此我们还必须提供错误修复和维护。

Java 应用程序是 2 层，后面有 Swing UI 和 Hibernate。我的想法是引入一个服务层，在服务层后面将应用拆分成更多的功能组件。在此之后仅将 UI 移植到 C# 并使用 IKVM 调用 java 组件（使用 ikvmc 将所有 jar 编译为 dll），最后将组件一一移植。（通过这种方式，我们可以继续进行移植并提供支持）

我一直盯着评估 IKVM，但我停留在休眠状态。首先，我想一次为所有库调用 ikvmc：

```
ikvm-7.0.4335.0\bin\ikvmc.exe -target:library -assembly:hibernate_hellow_deps antlr-2.7.6.jar commons-collections-3.1.jar commons-lang3-3.1.jar commons-pool-1.5.6.jar derbyclient.jar dom4j-1.6.1.jar hibernate-commons-annotations-3.2.0.Final.jar hibernate-core-3.6.9.Final.jar hibernate-jpa-2.0-api-1.0.1.Final.jar hibernate-validator-4.2.0.Final.jar javassist-3.12.0.GA.jar jta-1.1.jar log4j-1.2.16.jar slf4j-api-1.6.4.jar slf4j-log4j12-1.6.4.jar validation-api-1.0.0.GA.jar 
```

我收到了很多警告，例如：

```
Warning IKVMC0100: class "org.xmlpull.v1.XmlPullParser" not found 
```

对我来说，我似乎必须用 ikvmc 编译所有 jar 文件，这些 jar 文件位于休眠库的依赖树中，以及依赖项的依赖关系等。

这是正确的方法，我应该编译所有依赖项吗？这是正确的方法，还是我可以以另一种方式将我的 java 组件（jar 文件）与 IKVM 一起使用？

我也会评估 jnbridge。

谢谢，五十

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:45:46.863

您只需要编译所需的 jar 文件。如果这是可选组件，那么您可以忽略此警告。

# sql - 期望从 SQL 中的 XML.value() 返回 null，但得到 0

> ID：10735866
> 
> 赞同：3
> 
> 时间：2012-05-24T10:40:54.340
> 
> 标签：sql, sql-server, xml

我正在尝试从传递给存储过程的 xml 参数中读取特定值。到目前为止，我的代码的一个粗略示例如下。

```
SET @SearchFilter = 
'<?xml version="1.0"?>
 <KeywordSearch xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <SelfEmployed xsi:nil="true" />
 </KeywordSearch>'

SET @SelfEmployed  = @SearchFilter.query('/KeywordSearch/SelfEmployed[1]').value('/', 'bit')

SELECT @SelfEmployed 
```

我遇到的问题是，尽管当元素包含真值或假值时上述正确返回，而元素不包含值，因此我期望为空，但它返回假。有没有办法将数据类型正确获取为可为空的位值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T10:45:09.087

如果您将 XQuery 更改为以下内容：

```
SELECT @SearchFilter.value('(/KeywordSearch/SelfEmployed/text())[1]', 'varchar(100)') 
```

然后你会得到一个`NULL`值回来。由于您正在检查`<SelfEmployed>`节点是否具有任何文本值，因此您应该将其解释`.value()`为字符串类型 - 我在`varchar(100)`这里使用 - 根据需要进行调整。

# kdevelop - KDevelop 设置可以导出吗？

> ID：10735867
> 
> 赞同：1
> 
> 时间：2012-05-24T10:40:54.453
> 
> 标签：kdevelop

我是 KDevelop 的新手。玩弄它，现在我有一个关于项目设置的问题。

是否可以导出详细设置，例如启动配置或其他 make 选项？

在 KDevelop 4 项目文件中，说“myproj.kdev4”，只有基本信息，例如

```
[Project]
Manager=KDevCustomMakeManager
Name=myproj 
```

提供。
如果用户可以为项目导出更详细的设置应该会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:55:05.133

这些设置存储在 .kdev4/ 子文件夹中，您可以将其导出。

但这对我来说不是共享的（或置于版本控制之下）

# android - Eclipse ADT 无法在 SDK 源上设置条件断点：缺少 java 项目上下文

> ID：10735870
> 
> 赞同：6
> 
> 时间：2012-05-24T10:40:56.773
> 
> 标签：android, eclipse, adt, conditional-breakpoint

我正在尝试使用 Eclipse 3.7.1 调试一个简单的 Android 应用程序。我附上了 Android SDK 源代码，这样我也可以单步执行 SDK 的代码。我可以在 SDK 的代码上设置无条件断点，但不能设置条件断点。如果我尝试，我会收到以下错误消息：

> 条件断点错误
> 
> 条件断点有编译错误。
> 
> 原因：
> 
> 无法编译条件断点 - 缺少 java 项目上下文

但是，由自己的来源设置的条件断点有效。

我发现的关于该主题的[唯一相关搜索结果](http://www.eclipse.org/forums/index.php/m/684459/)建议将包含第三方 jar 的项目转换为 Java 项目。但我不知道如何为 Android SDK 执行此操作，即根本不知道如何将其添加为 Eclipse 项目。（这会更明智吗？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T11:04:03.853

要修复此错误，请为您的项目使用的 Android 库创建一个新的 Java 项目。将 SDK 提供的 Android 库的源链接到该项目。排除所有内容 (*)，否则警告和错误消息将淹没您的日志！将新项目的源代码附加到您的项目使用的 «android.jar»。就是这样。

[我在这里](http://convales.blogspot.de/2012/05/eclipse-adt-conditional-breakpoint.html)写了一个更一步一步的解决方案。

# android - TableLayout如何动态设置android:layout_column？

> ID：10735871
> 
> 赞同：0
> 
> 时间：2012-05-24T10:41:03.193
> 
> 标签：android, tablelayout

我有动态填充到代码中的 TableLayout。

但是在设置新行之后，我的新行与标题行不同，标题行本身向右移动。看起来头行的第一列是空的：

在添加行之前（我希望它总是如此！）： ![在此处输入图像描述](../Images/eb8cbe495d04c80e503f344735290d6e.png)

添加后： ![在此处输入图像描述](../Images/4aaea8f81876a89f251c6662a35366e5.png)

红色的 - 它实际上是一个里面有一个空字符串的字段

```
TextView.setText(null); 
```

这可能是一个原因吗？

但无论如何，如果我可以设置，我想我可以修复它

```
android:layout_column 
```

用于新添加的列。

我怎样才能在代码中做到这一点？

已经为标题设置了 layout_column 属性。

**奇怪的解决方案：**

标题行每次都从现有的“空”表中复制。

然后删除所有条目。

然后添加保存的标题，然后添加新行+空视图作为第一列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:16:55.040

在您的 .xml 文件代码中，如果您将任何包含空值的文本视图作为头行的第一个元素放在头行中，那么当您在该表格布局中按代码添加另一行时，它将向右移动。

因此，删除包含空值的文本视图，这些值将放在头行的第一个元素，

它可能会解决你的问题。

# javascript - 构造函数中的方法与函数的原型属性之间的区别

> ID：10735876
> 
> 赞同：0
> 
> 时间：2012-05-24T10:41:11.897
> 
> 标签：javascript, prototype-programming

> **可能重复：**
> [使用原型与直接在构造函数中定义方法的优势？](https://stackoverflow.com/questions/4508313/advantages-of-using-prototype-vs-defining-methods-straight-in-the-constructor)

我试图掌握 JavaScript 中的原型属性，但我遇到了麻烦。

我遵循了一个教程，其中指出：

“所以所有对象都会自动共享 sayHello() 方法/函数，我们必须将它分配给 protoype 属性”。

现在提到的原始代码是：

```
function Pet(name, species, hello)
{
    this.name = name;
    this.species = species;
    this.hello = hello;
    this.sayHello = function()
    {
        alert(this.hello);
    }
} 
```

修改后的使用原型属性：

```
function Pet(name, species, hello)
{
    this.name = name;
    this.species = species;
    this.hello = hello;
}

Pet.prototype.sayHello = function()
{
    alert(this.hello);
} 
```

这里有什么区别，因为这两种方法都会产生相同的结果（据我所知）。例如，以下代码在与上述任一组合时的行为相同：

```
var rufus = new Pet("Rufus", "cat", "miaow");
rufus.sayHello(); 
```

在这两种情况下，都会发出“miaow”警报。

那么有人可以向我解释一下区别以及为什么您会选择其中一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:44:46.553

这是[我最近发表的一篇文章](http://scratchpaper.tk/blog/of-javascript-objects-and-its-prototype-levels/)，[这是一个演示](http://jsfiddle.net/GwHyL/)。在演示中，查看链中的`Test2`位置`foo`和`bar`位置。

```
var Test2 = function() {              //foo attached via constructor
    this.foo = 'foo';                 //    each instance has "it's own" foo
}                    
Test2.prototype.bar = function() {};  //bar attached via prototype
                                      //    all instances "share" the same bar
var mytest2 = new Test2();

  (3) <-------- (2) <--------- (1) <- prototype chain
Object -> Test2 prototype -> mytest2
            '--> bar          '--> bar (from prototype)
                              '--> foo (from constructor) 
```

基本上，通过构造函数附加的任何内容都会出现在每个实例中，但“属于该实例”。从实例修改该属性只会在当前实例处修改它。

另一方面，通过`prototype`is 附加的那些出现在该对象的所有实例上并且是“共享的”。修改该属性会更改所有实例的该属性。

# ruby-on-rails-3 - Rails 应用程序中语言环境文件的组织

> ID：10735882
> 
> 赞同：18
> 
> 时间：2012-05-24T10:41:23.793
> 
> 标签：ruby-on-rails-3, internationalization, locale, i18n-gem, load-path

我的根应用程序的**配置/语言环境**中目前有以下 4 个文件：

```
-en.yml
-de.yml
-simple_form.en.yml
-simple_form.de.yml 
```

在我的位于用于测试应用程序 gem 的**spec** **/dummy**文件夹中的 application.rb 中，我有以下代码行，它似乎正在按预期检索翻译：

```
# The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
config.i18n.default_locale = :de 
```

我现在希望向我的语言环境文件夹的文件结构介绍结构，但是当我添加其他文件夹并更改**application.rb**中的加载路径时，我得到了未找到翻译的错误。这是我的尝试：

尝试在我的根应用程序的**config/locales中包含结构：**

```
-views
  -en.yml
  -de.yml
-models
  -en.yml
  -de.yml
-forms
  -simple_form.en.yml
  -simple_form.de.yml 
```

我在**application.rb**中的加载路径更改为：

```
config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}')] 
```

根据以下导轨指南： http: [//guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-domain-name](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-domain-name)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T14:26:58.180

要测试主机应用程序，您需要将 i18n.load_path 更改为主应用程序的配置文件夹，而不是用于测试目的的虚拟规范。代码如下：

```
config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}')]
config.i18n.default_locale = :en 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T08:51:13.707

我有一个类似的问题，我通过将此行添加到我的 application.rb 配置来解决它：

```
# load the subfolders in the locales
config.i18n.load_path += Dir["#{Rails.root.to_s}/config/locales/**/*.{rb,yml}"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-01T18:05:18.257

以下选项都对我有用

```
config.i18n.load_path += Dir["#{Rails.root.to_s}/config/locales/**/*.yml"]

config.i18n.load_path += Dir["#{Rails.root.to_s}/config/locales/**/*.{rb,yml}"]

config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**' '*.{rb,yml}').to_s] 
```

当然，在**重新启动**网络服务器后......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-10T08:43:24.530

想提一下。上述所有解决方案还`config/locales`再次将文件包含在目录中（第一次 rails 自行添加）。这不是问题，因为值将用相同的键重写。但是，如果您只想在其中包含子目录文件`config/locales`，则最好使用 `config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '*', '**', '*.{rb,yml}')]`

例子。我的结构：

```
config/
  locales/
    en.yml
    breadcrumbs/
      breadcrumbs.en.yml 
```

如果你`config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}')]`添加了 en.yml 几次：

```
irb(main):001:0> Rails.application.config.i18n.load_path
=> ["/home/air/projects/qq2/config/locales/en.yml"]
irb(main):002:0> Rails.application.config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}')]
irb(main):003:0> Rails.application.config.i18n.load_path
=> ["/home/air/projects/qq2/config/locales/en.yml", "/home/air/projects/qq2/config/locales/en.yml", "/home/air/projects/qq2/config/locales/breadcrumbs/breadcrumbs.en.yml"] 
```

与`Dir[Rails.root.join('config', 'locales', '*', '**', '*.{rb,yml}')]`：

```
irb(main):001:0> Rails.application.config.i18n.load_path
=> ["/home/air/projects/qq2/config/locales/en.yml"]
irb(main):002:0> Rails.application.config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '*', '**', '*.{rb,yml}')]
irb(main):003:0> Rails.application.config.i18n.load_path
=> ["/home/air/projects/qq2/config/locales/en.yml", "/home/air/projects/qq2/config/locales/breadcrumbs/breadcrumbs.en.yml"] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-09T15:24:34.483

在`config/application.rb`：

```
module PointsProject
  class Application < Rails::Application
    config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}')]
  end
end 
```

来自 Rails 的国际化指南：http: [//guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-domain-name](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-domain-name)

# google-tv - 为多个平台创建单个 SmartTV 应用程序？

> ID：10735883
> 
> 赞同：10
> 
> 时间：2012-05-24T10:41:26.477
> 
> 标签：google-tv, samsung-smart-tv, design-guidelines

我想为 GoogleTV 平台开发一个 SmartTV 应用程序，我一直在浏览 GoogleTV 指南（[https://developers.google.com/tv/android/](https://developers.google.com/tv/android/)）。

但是，我不希望 GoogleTV 成为我唯一的平台。我还希望相同的应用程序可以在三星 SmartTV 和/或 LG SmartTV 等设备上运行。但是谷歌的指导方针是否与三星的指导方针冲突，我的应用程序代码是否需要大量返工才能在其他设备上工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T19:09:16.880

我正在编辑我的答案。我刚刚查看了三星网站，我很高兴地说，他们把所有的垃圾都扔掉了。

他们过去有许多不同的、不可互换的编码语言。他们也没有真正在其他制造商的电视上工作过。这很可能是为这些平台开发的应用程序很少的原因。

现在他们支持基本的javascript。因此，您有机会为自己构建一个电视网页，并将其作为应用程序加载到三星上，并可能从 Google-TV 浏览器运行它。但是，我会验证您的应用程序是否需要特定的 HTML5 功能（例如离线支持），这些功能可能无法在运行在 Google-TV 上的类似 Android 的浏览器版本中实现。话虽如此，您总是可以构建一个在三星本地加载并从 Google-TV 上的远程服务器运行的应用程序？

...对于我们如何到达我们所处的位置的一些历史观点，您可以继续阅读....

每个制造商都有自己独特的操作系统会导致开发人员碎片化，这对他们来说可能是可以预见的，但他们很可能在恐慌中工作。当他们在 2008 年第一个专利公开时意识到 Apple TV 后，他们明白如果 Apple 提供价值数十万个应用程序的内容并且他们没有什么可竞争的，会产生长期影响。所以他们聚在一起，决定他们将实施的标准，该标准将提供一个非碎片化的解决方案，允许任何应用程序在任何支持制造商的电视上运行。又名：他们做对了。

2009 年，他们中的许多人宣布支持 Yahoo Connected TV 标准。然而，到 2010 年，承诺的开发框架、应用商店等都没有实现。当他们都朝着自己的方向前进时，这很可能发生（尽管您今天仍然可以从三星、索尼、LG、Vizio 和松下购买 Yahoo Connected 电视机）。

随着 Google-TV Market 的实施和开发人员将现有应用程序转换为 Google-TV 应用程序的能力，只需 20% 左右的创建新应用程序的工作量（从而降低成本并支持电视版本的商业案例）他们有一个满足其原始要求的解决方案。

现在，肯定会有点“害羞一次被咬”，再加上收入分享讨论以及谷歌作为硬件制造商（摩托罗拉移动）的影响，但归根结底，不可避免的事情是不可避免的。他们要么采用 Google-TV，要么创建自己的，非常接近，必须运行现有应用程序的 Android 版本。

PS：我没有看其他厂商的网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T13:29:29.137

据我了解，播放器和远程控制管理等核心组件是特定于平台的。

您需要使用配置文件并为每个平台独立实现这些组件。

或者，您可以使用一些跨平台 SDK。

在 Google 上搜索“智能电视应用程序开发”我发现：

Joshfire 智能电视 SDK

[http://www.joshfire.com/products/](http://www.joshfire.com/products/)

*   适用于 Google TV 和三星
*   但不是在 LG

Mautilus 智能电视 SDK

[http://www.mautilus.com/knowhow/smart-tv-application-development/](http://www.mautilus.com/knowhow/smart-tv-application-development/) 正如他们的网站所写，它涵盖

*   LG 网播 2012

*   三星 2012 / 2013 型号。

我希望它能有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-19T16:35:35.053

[orangeejs](https://github.com/orangeejs/orangeejs)是一个新的开源项目，旨在缓解跨平台智能电视应用程序开发的痛苦。目标平台是最新型号的 samsung/lg/android/ios。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-30T16:52:50.617

有一个由 BBC 开发并称为[TAL](http://fmtvp.github.io/tal/index.html)的框架。它旨在帮助您进行跨平台开发。他们所有的智能电视应用程序都是使用这个库开发的，所以看看吧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T21:59:56.950

你可能想看看由 Boxee 开源的[cloudee-couch 。](https://github.com/Boxee/cloudee-couch)此示例/框架构建在 Spine.js 之上。基类负责密钥处理、焦点和 oauth 身份验证。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T13:06:34.643

首先，如果您考虑为许多电视平台开发，请参阅： [https ://developers.google.com/tv/web/lib/jquery/](https://developers.google.com/tv/web/lib/jquery/)

它是 Google TV 的 jQuery 库，因此您可以像在三星和 LG 中一样使用 HTML/JavaScript 开发应用程序。

当然，在按键处理、视频播放器、事件处理方面存在差异，因此您需要开发涵盖所有这些差异的框架。

那里很少有开源框架，但还不够成熟，无法“开箱即用”地使用它。例如： http: [//framework.joshfire.com/](http://framework.joshfire.com/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-22T17:47:37.063

为支持跨设备的智能电视平台制作应用程序并不是什么大不了的事。现在这个行业充满了许多智能电视应用程序开发公司，它们具有独特的功能和特性，可以根据商业模式提供定制的应用程序。仅供参考，我建议您从列表中选择最好的智能电视应用程序构建器。希望对视频内容创建者和企业主在电视上流式传输有所帮助。

1.  已播放
2.  类型
3.  优屏

在此处浏览完整列表参考：[https ://dev.to/dwarak17/5-smart-tv-app-development-companies-to-develop-tv-apps-in-2021-1584](https://dev.to/dwarak17/5-smart-tv-app-development-companies-to-develop-tv-apps-in-2021-1584)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-05-24T16:50:33.520

虽然三星和 LG 都拥有专有的智能电视系统，但它们也都支持 Google TV。如果您为 Google TV 创建应用程序，您只需编写一次，即可在三星的 Google TV、LG 的 Google TV、Vizio 的 Google TV 和索尼的 Google TV 上运行。

# android - Android Activity findviewbyid() 为空

> ID：10735887
> 
> 赞同：7
> 
> 时间：2012-05-24T10:41:36.997
> 
> 标签：android, android-intent, findviewbyid

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.Button;

public class FileExplorerActivity extends Activity 
{
    public static final String TAG="ricky";
    Button button;
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        button = (Button) findViewById(R.id.but);<<<------------------
        if(button == null)
        Log.d(TAG, "FileExplorerActivity: button is null");
    }
    public FileExplorerActivity()
    {
       Log.d(TAG, "FileExplorer: constructor()");
    }
} 
```

这是一个简单的 Activity，它被另一个使用 Intent 的 Activity 带到前面

```
Intent openFileBrowser = new Intent(this, FileExplorerActivity.class);
try
{
    startActivity(openFileBrowser); 
} 
```

运行代码后，我的 LogCat 文件显示“按钮为空”为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-24T10:48:11.167

正如其他人所说，您`setContentView()` *在* 调用`findViewById()`.

> 为什么我需要那个？

因为[`Activity.findViewById()`](http://developer.android.com/reference/android/app/Activity.html#findViewById%28int%29)在当前活动的视图层次结构中搜索。如果您不设置视图层次结构，则找不到任何内容。当这个方法什么也没找到时，它返回 null。

因此，您应该在调用后添加一个布局`super.onCreate()`

```
super.onCreate(savedInstanceState);
setContentView(R.layout.yourlayout);

button = (Button) findViewById(R.id.but);
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:43:35.593

您需要设置布局

```
setContentView(R.layout.main_layout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-16T20:26:42.653

下一个代码解决了这个问题（Xamarin Android）

```
public class MainActivity : WearableActivity
{
    ...

    OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        **SetContentView(Resource.Layout.RoundMain);**

        // Does not return null anymore:

        FindViewById<Button>(Resource.Id.ButtonVgOk).LongClick += (s, e) => ButtonVgOkOnLongClick();

        ...
   } 
```

# asp.net - 为什么我的视图状态没有被清除并在重新加载时再次将值保存到数据库中？

> ID：10735890
> 
> 赞同：0
> 
> 时间：2012-05-24T10:41:47.477
> 
> 标签：asp.net

我在 aspx 页面上注册了用户控件。

用户控件上有一个按钮在某些 aspx 页面上被抵制，该按钮执行一些操作以将 viewste 的值存储到数据库中，在该按钮下方我已经清除了我的 viewstate 值，但是如果我右键单击并重新加载页面，它会重新插入值到数据库，我缺少什么或视图状态没有被清除，我应该如何防止它重新将相同的条目保存到数据库中。

我在下面部分编写我的代码。

```
 protected void btnFinish_Click(object sender, EventArgs e)
    {
        if (ViewState["dtQuestions"] != null)
        {
          foreach (DataRow dr in dtQuestions.Rows)
            {
                int currQueScore = GetAnswerScore(dr["AnswerType"].ToString().Trim(), dr["ClientAnswerValue"].ToString().Trim());
                dr["ClientAnswerScore"] = currQueScore;
                myScore += currQueScore;
                SurveyClientAnswer objDetail = new SurveyClientAnswer();
                objDetail.SurveyClientID = objMaster.SurveyClientID;
                objDetail.QuestionID = int.Parse(dr["QuestionID"].ToString());
                objDetail.Answer = dr["ClientAnswerValue"].ToString();
                objDetail.Score = int.Parse(dr["ClientAnswerScore"].ToString());
                DB.SurveyClientAnswers.InsertOnSubmit(objDetail);
                DB.SubmitChanges();
            }
            objMaster.FinalScore = myScore;
            DB.SubmitChanges();

            ViewState["dtQuestions"] = null;
        }
 else 
        {
            ModalPopupExtender1.Show();
            pnl.Visible = true;

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:01:24.517

如果您不想重新插入数据，只需在数据库上创建一个唯一约束以禁止这种情况。

就在代码中执行此操作而言，您可能只能将数据添加到`if`语句中：

```
if(IsPostBack && (ViewState["dtQuestions"] != null)
{
    //meaning the user is not simply reloading the page but actually posting back
} 
```

请注意，在某些极端情况下这可能不起作用。没有测试很难知道，但我坚信这应该在数据库级别处理。

# python - 在python webdriver中将粘贴从一个文件复制到另一个文件

> ID：10735891
> 
> 赞同：0
> 
> 时间：2012-05-24T10:41:55.000
> 
> 标签：python, webdriver

目前我正在创建一个模板，我的要求是我应该从文本文档中复制内容并将其粘贴到我正在创建的模板中。我想知道*python webdriver*中的一种方法，我在网上搜索但最终没有找到解决方案，我发现了一个类似的问题 Copy odt file to clipboard and paste to another file with python 3.2> here但没有解决方案，任何帮助都会感谢我，因为我在这项特定任务上花费了更多时间。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:08:30.240

这和webdriver没多大关系，更多的是和python有关。如，如何使用 Python 读取 ODT 文件？那是您正在做的事情的核心，因此 webdriver 与该问题无关。

话虽如此，有一个标准库，所以试一试，它可以与所有 MS Office 和 Open Office 文件交互：

[https://github.com/mikemaccana/python-docx](https://github.com/mikemaccana/python-docx)

这里还有一个基于 COM 的库，可以与 Word 和 Excel 交互：

[http://python.net/crew/pirx/spam7/](http://python.net/crew/pirx/spam7/)

如果它是基于 OpenOffice 的文件，那么无论您尝试做什么，都可以自动执行 Open Office：

[http://wiki.services.openoffice.org/wiki/Python](http://wiki.services.openoffice.org/wiki/Python)

这取决于什么类型的文本文档（您只指定它是“文本文档”） - 如果它是一个简单的 .txt 文档，这非常简单易行。

# sencha-touch - Sencha Touch 2：从 Ext.Msg.confirm 中调用控制器功能

> ID：10735894
> 
> 赞同：1
> 
> 时间：2012-05-24T10:42:22.077
> 
> 标签：sencha-touch, sencha-touch-2

我刚刚开始使用 Sencha Touch 2，之前从未使用过 Sencha Touch 1.x。我刚刚完成了本教程（这是迄今为止我发现的最好的入门教程）[http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/)现在我想继续扩展这个 Notes 应用程序。

我有一个控制器和 2 个视图、一个列表视图和一个编辑视图。在编辑视图中，我希望能够删除当前记录。删除功能在控制器中。点击删除按钮后，我想显示一个确认对话框（“您确定要删除...？”）。用户按下是后，应该调用删除函数。

现在我的问题是：如何从 Ext.Msg.confirm 中调用控制器删除功能？

这是我的代码的相关片段。如果缺少重要的东西，请告诉我。

请参阅“onDeleteNoteCommand”功能。“this.someFunction”显然不起作用，因为“this”是一个 DOMWindow。

```
Ext.define('TestApp2.controller.Main', {
extend: 'Ext.app.Controller',

config: {
    refs: {
        noteEditorView: 'noteeditorview'
    },
    control: {
        noteEditorView: {
            deleteNoteCommand: 'onDeleteNoteCommand',
        }
    }
},

onDeleteNoteCommand: function() {
    console.log('onDeleteNoteCommand');

    var noteEditor = this.getNoteEditorView();
    var currentNote = noteEditor.getRecord();

    Ext.Msg.confirm(
        "Delete note?",
        "Do you reall want to delete the note <i>"+currentNote.data.title+"</i>?",
        function(buttonId) {
            if(buttonId === 'yes') {
                            //controller functions!! how to call them?
                this.deleteNote(currentNote);                   
                this.activateNotesList();
            }
        }
    );
},

deleteNote: function(record) {
    var notesStore = Ext.getStore('Notes');
    notesStore.remove(record);
    notesStore.sync();
},

activateNotesList: function() {
    Ext.Viewport.animateActiveItem(this.getNotesListView(), this.slideRightTransition);
},

slideLeftTransition: { type: 'slide', direction: 'left' },
slideRightTransition: { type: 'slide', direction: 'right' },

launch: function() {
    this.callParent();
    Ext.getStore('Notes').load();
    console.log('launch main controller');
},
init: function() {
    this.callParent();
    console.log('init main controller');
}
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:11:14.760

当你进入 Ext.Msg 的回调函数时，作用域从控制器作用域变为全局作用域（窗口），所以你必须将它设置为确认方法的参数：

```
 Ext.Msg.confirm(
      "Delete note?",
      "Do you reall want to delete the note <i>"+currentNote.data.title+"</i>?",
      function(buttonId) {
        if(buttonId === 'yes') {
          this.deleteNote(currentNote);                   
          this.activateNotesList();
        }
      }, 
      this // scope of the controller 
    ); 
```

有关更多信息，请查看 sencha 文档：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.MessageBox-method-confirm](http://docs.sencha.com/touch/2-0/#!/api/Ext.MessageBox-method-confirm)

# wpf - 如何使用 alt+tab 在 wpf vb.net 中隐藏我的无边框窗口应用程序

> ID：10735902
> 
> 赞同：1
> 
> 时间：2012-05-24T10:43:00.297
> 
> 标签：wpf

嗨，伙计，我在此链接中找到了有关如何在无边框窗口应用程序中使用 alt+tab 的代码 [How to hide form from Alt-Tab dialog](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/0eefb6f4-3619-4f7a-b144-48df80e2c603/)

但问题是它是用 C# 编码的，所以当我使用 c# 将它转换为 vb.net 到 vb.net 在线转换时......

来自像这样的 c# 代码：

```
protected override CreateParams CreateParams {
  get {
    // Turn on WS_EX_TOOLWINDOW style bit
    CreateParams cp = base.CreateParams;
    cp.ExStyle |= 0x80;
    return cp;
  }
} 
```

然后我使用在线转换转换为 vb.net。就这样：

```
Protected Overrides ReadOnly Property CreateParams() As CreateParams
Get
    ' Turn on WS_EX_TOOLWINDOW style bit
    Dim cp As CreateParams = MyBase.CreateParams
    cp.ExStyle = cp.ExStyle Or &H80
    Return cp
End Get 
```

结束属性

所以在我的代码中。就这样：

```
Imports System.Windows.Forms
Namespace OSOASA
Partial Public Class WindowLoginForm
    Protected Overrides ReadOnly Property CreateParams() As CreateParams
        Get
            ' Turn on WS_EX_TOOLWINDOW style bit
            Dim cp As CreateParams = MyBase.CreateParams
            cp.ExStyle = cp.ExStyle Or &H80
            Return cp
        End Get
    End Property
End Class
End Namespace 
```

它给了我2个错误

首先： **“不能将属性‘CreateParams’声明为‘覆盖’，因为它不会覆盖基类中的属性。”**

第二： **“‘CreateParams’不是‘System.Windows.Window’的成员”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:44:31.390

以下是一些从`Alt + Tab`. 只需调用方法`Helper.RemoveFromAltTab(Me)`。我已经测试了这段代码，它`ShowInTaskbar="False"`在`Window`.

```
Imports System
Imports System.Runtime.InteropServices
Imports System.Windows
Imports System.Windows.Interop

Public Class Helper
    Friend Const GwlExstyle As Integer = -20
    Friend Const WsExToolwindow As Integer = &H80

    <DllImport("user32.dll", EntryPoint:="GetWindowLong", CharSet:=CharSet.Auto)> _
    Private Shared Function GetWindowLong32(hWnd As IntPtr, nIndex As Integer) As IntPtr
    End Function

    <DllImport("user32.dll", EntryPoint:="SetWindowLong", CharSet:=CharSet.Auto)> _
    Private Shared Function SetWindowLong(hWnd As IntPtr, nIndex As Integer, value As UInteger) As IntPtr
    End Function

    Friend Shared Sub RemoveFromAltTab(hwnd As IntPtr)
        Dim ws As UInteger = GetWindowLong32(hwnd, GwlExstyle)
        SetWindowLong(hwnd, GwlExstyle, ws Or WsExToolwindow)
    End Sub

    Friend Shared Sub RemoveFromAltTab(w As Window)
        RemoveFromAltTab((New WindowInteropHelper(w)).Handle)
    End Sub
End Class 
```

# javascript - IE 7/8 的 jQuery 悬停闪烁错误

> ID：10735904
> 
> 赞同：0
> 
> 时间：2012-05-24T10:43:10.773
> 
> 标签：javascript, jquery, css

根据线程标题，我对 IE 7/8 有一个小问题，当您将鼠标悬停在缩略图上时，它会闪烁。我的代码如下： -

```
function activateThumbnails(intThumbActiveOp, intThumbInActiveOp, intFadeTime,     strThumbClass)
{
    //Hide image title
    jQuery("a " + strThumbClass).attr('title', '');

    //Bind effect to post thumbnails..
    jQuery(window).bind("load", function() {
        var activeOpacity   = intThumbActiveOp,
            inactiveOpacity = intThumbInActiveOp,
            fadeTime = intFadeTime,
            clickedClass = "selected",
            thumbs = strThumbClass;

        jQuery(thumbs).fadeTo(1, inactiveOpacity);

        //Animate thumbnail on hover event..
        jQuery(thumbs).hover(
            function(){
                //Fade into thumbnail..
                jQuery(this).fadeTo(fadeTime, activeOpacity, function(){
                    //Display Preview Body once faded in
                    intId = jQuery(this).closest('div').attr('id'); //Get parent DIV ID
                    jQuery('#previewId' + intId.substr(6)).show();
                });
            },
            function(){
                // Only fade out if the user hasn't clicked the thumb
                if(!jQuery(this).hasClass(clickedClass)) 
                {
                    //Fade out of thumbnail..
                    jQuery(this).fadeTo(fadeTime, inactiveOpacity, function(){
                        //Hide Preview Body once faded out
                        intId = jQuery(this).closest('div').attr('id'); //Get parent DIV ID
                        jQuery('#previewId' + intId.substr(6)).hide();
                    });
                }
            });

        jQuery(thumbs).click(function() {
             // Remove selected class from any elements other than this
             var previous = jQuery(thumbs + '.' + clickedClass).eq();
             var clicked = jQuery(this);
             if(clicked !== previous) 
             {
                 previous.removeClass(clickedClass);
             }
             clicked.addClass(clickedClass).fadeTo(fadeTime, activeOpacity);
         });
    });
 } 
```

请注意，我在悬停图像上放置了一些预览文本，并且当光标位于预览文本（而不是图像本身）上时，您只会在 IE 7/8 中看到闪烁。如果没有文本覆盖，问题就不会发生，这说明了这一点。

任何帮助都将非常感激，因为我的最后期限很紧

亲切的问候和感谢，

ps 这是我的标记：

```
 <div id="postId" class="postContainer">
 <!-- Post Preview canvas -->
<div id="previewId" class='postPreview'>
    <!-- Post preview Title -->
    <div class="previewTitle">
        some title
    </div>
    <!-- Post preview Body -->
    <div class="previewBody">
        some text body
    </div>
</div>
<a href="#"> 
    some thumbnail
</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:17:57.703

通常，闪烁是由于您将悬停在悬停状态下从鼠标下方移出的字符上匹配引起的。IE 的神奇技巧是字符之间的“背景”不算作字符——你实际上必须在一个字母上。考虑将悬停连接到包含此文本的 div，并确保在悬停状态下不会移动或被遮挡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T09:56:04.620

如果您在 Internet Explorer 中的树形视图底部出现闪烁问题，请确保您的文档属于以下类型：

```
<!DOCTYPE html PUBLIC “-//W3C//DTD XHTML 1.0 Transitional//EN”
“http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd”&gt;
<html xmlns=”http://www.w3.org/1999/xhtml”&gt; 
```

当我使用以下内容时：

```
<!DOCTYPE html PUBLIC “-//W3C//DTD HTML 4.01 Frameset//EN”&gt;
<html> 
```

使用该文档类型时，Internet Explorer 7 会闪烁动画。如果您不知道闪烁的原因，那么解决此问题可能需要很长时间 :-)

# c# - 在字典中捕获 DataRowChanged 事件 >

> ID：10735911
> 
> 赞同：0
> 
> 时间：2012-05-24T10:43:47.280
> 
> 标签：c#, winforms, events, dictionary, datarow

如何捕捉`DataRowChanged`每个`DataTable`in 的事件`Dictionary<int, List<DataSet>>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:50:19.943

```
 Dictionary<int, List<DataSet>> dict = new Dictionary<int, List<DataSet>>();
    foreach (var d in dict)
    {
        foreach (DataSet ds in d.Value)
        {
            foreach (DataTable dt in ds.Tables)
            {
                dt.RowChanged += new DataRowChangeEventHandler(dt_RowChanged);    
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:47:35.310

就像是

```
foreach(var kvp in dictionary){
kvp.Value.ForEach(dataset=>dataset.Tables.Cast<DataTable>().ToList().ForEach(table=>table.RowChanged+=yourhandler));
} 
```

或更长的版本：

```
foreach(var kvp in dictionary)
{
    foreach(var dataset in kvp.Value)
    {
        foreach(var table in dataset.Tables)
        {  
            table.RowChanged+=yourhandler;
        }
    }
} 
```

# firefox - 附加 sdk：从 contentscript 到面板的消息传递

> ID：10735912
> 
> 赞同：2
> 
> 时间：2012-05-24T10:00:00.797
> 
> 标签：firefox, firefox-addon-sdk

如何从内容脚本向面板附加脚本发出事件，反之亦然？以及如何动态更新面板内容。请帮忙。这方面的一个例子将对初学者有很大帮助。[此处](https://addons.mozilla.org/en-US/developers/docs/sdk/1.0/dev-guide/addon-development/web-content.html)给出的基本示例不起作用该示例是：

```
var panel = require("panel").Panel({
    contentScript: "self.port.emit('showing', 'panel is showing');"
}); 
panel.port.on("showing", function(text) {
    console.log(text);
}); 
panel.show(); 
```

控制台中没有显示此示例在 Add-on SDK 教程中给出，但仍然无法正常工作。任何人请帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T20:55:01.543

这个例子对我有用。我看到了面板，并且看到了 console.log 消息。

# android - Android - ActionBarSherlock - 在子菜单中设置文本的文本颜色

> ID：10735915
> 
> 赞同：5
> 
> 时间：2012-05-24T10:44:07.013
> 
> 标签：android, android-actionbar, actionbarsherlock, submenu, textcolor

如何在 Action Bar Sherlock 的子菜单中设置文本颜色？我可以设置背景但不能设置文本颜色.. =(

temas.xml

```
<style name="Tema.Laranja" parent="Theme.Sherlock.Light.ForceOverflow">

    <item name="actionBarItemBackground">@drawable/background_selecionado</item>
    <item name="android:actionBarItemBackground">@drawable/background_selecionado</item>

    <item name="android:dropDownListViewStyle">@style/Tema.Laranja.ListSelector</item>
    <item name="dropDownListViewStyle">@style/Tema.Laranja.ListSelector</item>

    <item name="popupMenuStyle">@style/Tema.Laranja.Popup</item>
    <item name="android:popupMenuStyle">@style/Tema.Laranja.Popup</item>
</style>

    <style name="Tema.Laranja.Popup" parent="Widget.Sherlock.Light.PopupMenu">
    <item name="android:popupBackground">@drawable/shape_laranja_arredondado</item>
</style>

<style name="Tema.Laranja.ListSelector" parent="Widget.Sherlock.ListView.DropDown">
    <item name="android:listSelector">@color/listview_actionbar</item>
    <item name="android:textColor">@color/branca</item>
    <item name="android:drawSelectorOnTop">true</item>
</style> 
```

我的 listview_actionbar.xml

```
<item android:state_focused="false"
    android:drawable="@drawable/shape_amarelo_arredondado"/>

<!-- Even though these two point to the same resource, have two states so the drawable will invalidate itself when coming out of pressed state. -->
<item android:state_focused="true" android:state_enabled="false"
    android:state_pressed="true"
    android:drawable="@drawable/shape_amarelo_arredondado" />
<item android:state_focused="true" android:state_enabled="false"
    android:drawable="@drawable/shape_amarelo_arredondado" />

<item android:state_focused="true" android:state_pressed="true"
    android:drawable="@drawable/shape_amarelo_arredondado" />
<item android:state_focused="false" android:state_pressed="true"
    android:drawable="@drawable/shape_amarelo_arredondado" />

<item android:state_focused="true"
    android:drawable="@drawable/shape_amarelo_arredondado" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:26:21.683

```
<style name="MyPopupMenu" parent="Widget.Sherlock.ListPopupWindow">
        <item name="android:popupBackground">@drawable/dropdown_selector</item>
        <item name="android:textAppearance">@style/TextAppearance.Sherlock.Widget.PopupMenu</item>
</style>

<style name="TextAppearance.Sherlock.Widget.PopupMenu" parent="Widget">
        <item name="android:textColor">@color/branco</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:16:27.153

尝试使用

```
<item name="android:textAppearanceLargePopupMenu">
    <!-- @style/some style that has android:textColor as attribute -->
</item> <!-- in Tema.Laranja style --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T05:56:15.903

使用 actionBarWidgetTheme 和 android:textColor。

例子：

```
<style name="Theme.Guide" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="android:actionBarWidgetTheme">@style/ActionBar.Widget.Guide</item>
    <item name="actionBarWidgetTheme">@style/ActionBar.Widget.Guide</item>
</style>

<style name="ActionBar.Widget.Guide" parent="Widget.Sherlock.ActionBar.Solid">
    <item name="android:textColor">@android:color/white</item>
    <item name="android:textSize">@dimen/action_bar_dropdown_menu_text_size</item>
</style> 
```

# iphone - 如何从字符串中消除部分文本

> ID：10735918
> 
> 赞同：0
> 
> 时间：2012-05-24T10:44:22.587
> 
> 标签：iphone

我是 iphone 新手。我遇到了一些问题。我有一个字符串列表，例如 1.mp3 2.mp3 3.mp3 在这里我想消除所有 .mp3 并只获得数字 1,2,3 它是怎样的可能的。如果有人知道这一点，请帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:46:35.937

如果您要删除的项目始终是文件扩展名：

```
NSString *strippedString = [filename stringByDeletingPathExtension]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:57:11.120

```
NSString * str =@"1.mp3";

if ([str hasSuffix:@".mp3"])
{
    str = [str stringByDeletingPathExtension];
    NSLog(@"%@",str);

} 
```

# razor - 对于我用 Razor 语法编写的 C# 代码，我应该遵循 StyleCop 规则吗？

> ID：10735920
> 
> 赞同：2
> 
> 时间：2012-05-24T10:44:25.547
> 
> 标签：razor, stylecop

特别是关于“SA1126：PrefixCallsCorrectly”规则，它告诉我们使用“this”。实例成员的前缀。

我应该在 Razor 语法中遵循这些规则吗？

例子：

```
<span>Name: @this.Model.Name</span> 
```

或者：

```
<span>@this.Html.DisplayFor(m => m.Name)</span> 
```

你可能会注意到“这个”。在这里无效（我同意）。我想遵循适用于我所有日常代码的规则。

StyleCop 不检查 Razor 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:57:40.563

Well, the usage of the "this" prefix is kind of a personal (which can be argumented) choice.

You can find an interesting discussion on this point here [Why does StyleCop recommend prefixing method or property calls with "this"?](https://stackoverflow.com/questions/1562540/why-does-stylecop-recommend-prefixing-method-or-property-calls-with-this)

By the way, Resharper, for example, has the inverse rule by default (remove "useless" this - meaning useless for the compiler).

But frankly, in a View, I think it's more noise than help.

Other point : use HtmlHelpers like `@Html.DisplayTextFor(m => m.Name)` in your case, as they're strongly typed, linked to model, take care of null values, etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:46:35.167

> 我应该在 Razor 语法中遵循这些规则吗？

如果您认为值得在 .cs 文件中添加“this”，为什么不将其应用于其他地方的 C# 代码，例如嵌入到 Razor 视图文件中？如果一个`@{ }`块中有多行 C# 代码怎么办？“这个”会开始看起来更有用吗？（“this”通常是否值得的问题在这里并不特别相关，因为您可能已经标准化了使用它。）

> StyleCop 不检查 Razor 文件吗？

不，StyleCop 不检查 Razor 文件。StyleCop 目前包含的唯一解析器是 C# 解析器，它只检查带有“.cs”扩展名的文件。

# javascript - 如何停止 requestAnimationFrame 递归/循环？

> ID：10735922
> 
> 赞同：75
> 
> 时间：2012-05-24T10:44:37.420
> 
> 标签：javascript, html, fullscreen, webgl, three.js

我正在使用 Three.js 和 WebGL 渲染器来制作一个在`play`单击链接时全屏显示的游戏。对于动画，我使用`requestAnimationFrame`.

我这样启动它：

```
self.animate = function()
{
    self.camera.lookAt(self.scene.position);

    self.renderer.render(self.scene, self.camera);

    if (self.willAnimate)
        window.requestAnimationFrame(self.animate, self.renderer.domElement);
}

self.startAnimating = function()
{
    self.willAnimate = true;
    self.animate();
}

self.stopAnimating = function()
{
    self.willAnimate = false;
} 
```

当我想要时，我调用该`startAnimating`方法，是的，它确实按预期工作。但是，当我调用该`stopAnimating`函数时，事情就坏了！虽然没有报告错误...

设置基本上是这样的：

*   页面上有`play`链接
*   用户单击链接后，渲染器`domElement`应该全屏显示，并且确实如此
*   该`startAnimating`方法被调用并且渲染器开始渲染东西
*   单击转义后，我注册一个`fullscreenchange`事件并执行该`stopAnimating`方法
*   页面尝试退出全屏，确实如此，但整个文档完全空白

我很确定我的其他代码没问题，而且我以某种`requestAnimationFrame`错误的方式停止了。我的解释可能很糟糕，所以我将代码上传到我的网站，你可以在这里看到它：http: [//banehq.com/Placeholdername/main.html](http://banehq.com/Placeholdername/main.html)。

这是我不尝试调用动画方法的版本，全屏进出工作：[http](http://banehq.com/Correct/Placeholdername/main.html) ://banehq.com/Correct/Placeholdername/main.html 。

第一次`play`点击后，游戏初始化并`start`执行它的方法。一旦全屏退出，游戏的`stop`方法就会被执行。每隔一次`play`点击，游戏只执行它的`start`方法，因为不需要再次初始化它。

这是它的外观：

```
var playLinkHasBeenClicked = function()
{
    if (!started)
    {
        started = true;

        game = new Game(container); //"container" is an empty div
    }

    game.start();
} 
```

下面是`start`and`stop`方法的样子：

```
self.start = function()
{
    self.container.appendChild(game.renderer.domElement); //Add the renderer's domElement to an empty div
    THREEx.FullScreen.request(self.container);  //Request fullscreen on the div
    self.renderer.setSize(screen.width, screen.height); //Adjust screensize

    self.startAnimating();
}

self.stop = function()
{
    self.container.removeChild(game.renderer.domElement); //Remove the renderer from the div
    self.renderer.setSize(0, 0); //I guess this isn't needed, but welp

    self.stopAnimating();
} 
```

这个和工作版本之间的唯一区别是，方法调用和`startAnimating`方法`stopAnimating`被**注释掉**了。`start``stop`

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-05-25T05:10:54.237

一种开始/停止的方法是这样的

```
var requestId;

function loop(time) {
    requestId = undefined;

    ...
    // do stuff
    ...

    start();
}

function start() {
    if (!requestId) {
       requestId = window.requestAnimationFrame(loop);
    }
}

function stop() {
    if (requestId) {
       window.cancelAnimationFrame(requestId);
       requestId = undefined;
    }
} 
```

工作示例：

```
const timeElem = document.querySelector("#time");
var requestId;

function loop(time) {
    requestId = undefined;

    doStuff(time)
    start();
}

function start() {
    if (!requestId) {
       requestId = window.requestAnimationFrame(loop);
    }
}

function stop() {
    if (requestId) {
       window.cancelAnimationFrame(requestId);
       requestId = undefined;
    }
}

function doStuff(time) {
  timeElem.textContent = (time * 0.001).toFixed(2);
}

document.querySelector("#start").addEventListener('click', function() {
  start();
});

document.querySelector("#stop").addEventListener('click', function() {
  stop();
});
```

```
<button id="start">start</button>
<button id="stop">stop</button>
<div id="time"></div>
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-03-29T00:46:47.263

停止就像不再调用 requestAnimationFrame 一样简单，重启就是再次调用它。前任）

```
 var pause = false;
        function loop(){
                //... your stuff;
                if(pause) return;
                window.requestionAnimationFrame(loop);
        }
       loop(); //to start it off
       pause = true; //to stop it
       loop(); //to restart it 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T12:25:33.110

我建议看一下[requestAnimationFrame](https://gist.github.com/1579671) polyfill gibhub 页面。有关于如何实施的讨论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T21:16:45.680

因此，在进行了更多测试之后，我发现确实是我的其他代码造成了问题，而不是动画停止（毕竟这是一个简单的递归）。问题在于从页面中动态添加和删除渲染器的 domElement。在我停止这样做之后，因为真的没有理由这样做，并且在初始化发生时将其包含在内，一切都开始正常工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-19T14:38:30.117

我玩了一个[2D Breakout Game](https://github.com/end3r/Gamedev-Canvas-workshop/blob/gh-pages/lesson10.html)的教程，他们也使用了 requestAnimationFrame，我用一个简单的[return](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/return)停止了它。如果 return 的值被省略，return 语句将结束函数执行。

```
if(!lives) {
    alert("GAME OVER");
    return;
}

// looping the draw()
requestAnimationFrame(draw); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-15T03:35:00.680

```
var myAnim //your requestId
function anim()
       {
       //bla bla bla
       //it's important to update the requestId each time you're calling reuestAnimationFrame
       myAnim=requestAnimationFrame(anim)
       } 
```

让我们开始吧

```
myAnim=requestAnimationFrame(anim) 
```

让我们停下来

```
//the cancelation uses the last requestId
cancelAnimationFrame(myAnim) 
```

[参考](https://developer.mozilla.org/en-US/docs/Web/API/Window/cancelAnimationFrame)

# cucumber - 在 Rails 3.2.3 中使用 Cucumber 和 RSpec 测试 http 基本身份验证

> ID：10735923
> 
> 赞同：0
> 
> 时间：2012-05-24T10:44:38.567
> 
> 标签：cucumber, capybara, bdd, ruby-on-rails-3.2, rspec-rails

我想测试 Rails 3.2.3 中内置的基本 http 身份验证机制。我曾尝试在 RSpec 和 Cucumber 中测试 http 身份验证，但在这两个工具中都有一个失败的步骤。在 Cucumber 中，我在运行我的功能时收到以下消息：

```
When I perform HTTP authentication as "admin" with "test" # features/step_definitions/web_steps.rb:1
  undefined method `env' for nil:NilClass (NoMethodError)
  ./features/step_definitions/web_steps.rb:3:in `/^I perform HTTP authentication as "([^\"]*)" with "([^\"]*)"$/'
  features/sign_in_http.feature:4:in `When I perform HTTP authentication as "admin" with "test"' 
```

这是我的 ApplicationController 类：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  http_basic_authenticate_with :name => "admin", :password => "test"
end 
```

Cucumber 中的步骤定义：

```
When /^I perform HTTP authentication as "([^\"]*)" with "([^\"]*)"$/ do |username, password|
  @request.env["HTTP_AUTHORIZATION"] = "Basic " + Base64::encode64("username:password")
  visit '/'
end 
```

黄瓜的特点：

```
Feature: Signing in via http

Scenario: HTTP sign-in
  When I perform HTTP authentication as "admin" with "test"
  Then I should see "Welcome to the app." 
```

在 RSpec 中，http 身份验证步骤似乎通过了，但我从后续步骤中得到消息，它无法在页面上找到预期的内容，因为“访问被拒绝”：

```
1) ApplicationController sign in via http should be successful
 Failure/Error: page.should have_content("Welcome to the app.")
   expected there to be content "Welcome to the app." in "HTTP Basic: Access denied.\n"
 # ./spec/controllers/application_controller_spec.rb:12:in `block (3 levels) in <top (required)>' 
```

这是我的相关规格：

```
require 'spec_helper'

describe ApplicationController do

  describe "sign in via http" do
    it "should be successful" do
      @request.env["HTTP_AUTHORIZATION"] = "Basic " + Base64::encode64("admin:test")
      visit '/'
      response.should be_success
      page.should have_content("Welcome to the app.")
    end
  end
end 
```

我还尝试在黄瓜步骤中的 http 授权行之前访问根路径，但这给了我关于 @request 的*NilClass*的相同消息。使用定义的“admin:test”凭据通过浏览器登录没问题，我可以看到我的应用程序的根页面。

如果有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:41:33.580

这是我如何让它工作的。关键是在您访问任何页面之前运行您的身份验证步骤，否则您已经通过身份验证。

在我的功能中，我放了：

```
Background:
    Given I perform HTTP authentication as "<id>/<password>"
    When I go to the homepage
    Then I should see "Text-that-you-should-see-on-your-home-page" 
```

* * *

HTTP 身份验证的步骤定义如下（我在其他地方找到了这段代码并添加了 puts 语句以查看发生了什么）。

```
Given /^I perform HTTP authentication as "([^\"]*)\/([^\"]*)"$/ do |username, password|
    puts "id/pswd: #{username}/#{password}"
    ### Following works ONLY if performed first before even going to a page!!!
    if page.driver.respond_to?(:basic_auth)
        puts 'Responds to basic_auth'
        page.driver.basic_auth(username, password)
    elsif page.driver.respond_to?(:basic_authorize)
        puts 'Responds to basic_authorize'
        page.driver.basic_authorize(username, password)
    elsif page.driver.respond_to?(:browser) && page.driver.browser.respond_to?(:basic_authorize)
        puts 'Responds to browser_basic_authorize'
        page.driver.browser.basic_authorize(username, password)
    else
        raise "I don't know how to log in!"
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-23T14:22:06.423

现在有一个更简单的解决方案。我不知道它是什么时候实现的，但是 Cucumber 现在有一个方法`basic_authorize`可以解决这个问题。这是我使用的步骤：

```
Given /^I perform basic HTTP authentication with username "([^"]*)" and password "([^"]*)"$/ do |username, password|
  basic_authorize(username, password)
end 
```

这是一个示例用例：

```
Given I perform basic HTTP authentication with username "cool_user" and password "hunter22" 
```

与 JESii 的回答一样，您需要在访问任何页面之前执行此步骤。

我希望这可以节省其他人一些时间，我花了很长时间。

# qt - 使用 Qt 创建表单向导

> ID：10735925
> 
> 赞同：2
> 
> 时间：2012-05-24T10:44:41.443
> 
> 标签：qt, pyqt, formwizard

是否可以使用 Qt 创建多步骤表单？

我想把大的一个一个一个地分成几个更简单的步骤。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T10:57:47.440

使用类[QWizard](http://doc.qt.nokia.com/4.8/qwizard.html)和相关的。

# ruby-on-rails - Sunspot / Solr 全文搜索 - 如何从全文搜索中排除某些字段？

> ID：10735926
> 
> 赞同：6
> 
> 时间：2012-05-24T10:44:44.000
> 
> 标签：ruby-on-rails, sunspot-solr

我已经为我的 rails 应用程序实现了 solr 搜索。我已经为搜索字段编制了索引，并且运行良好。现在我想在搜索时排除一个名为 Title 的特定字段。如何在搜索时跳过这个特定字段。索引文本字段是否也有任何排除选项。

```
searchable  do

  integer :id
  boolean :searchable
  boolean :premium
  string  :status
  time    :updated_at
  time    :created_at

  ###################################################
  # Fulltext search fields

  text :title

  text :summary 
  text :skills

end 
```

在这里我如何才能从全文搜索中仅排除标题字段。

```
 profiles = Profile.search do |s|
   s.fulltext @selected_filters[:query][:value] , exclude => :title
end 
```

有什么办法可以这样做吗？请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T07:43:25.563

您可以指定要在搜索中**包含哪些字段**

```
Profile.search do
  keywords @selected_filters[:query][:value], :fields => [:summary, :skills], :minimum_match => 1
end 
```

# java - 在 Excel 2007 表单 Java 应用程序中使用公式 RTD 从公式单元格中读取计算数据

> ID：10735930
> 
> 赞同：1
> 
> 时间：2012-05-24T10:45:00.883
> 
> 标签：java, excel, excel-formula, poi-hssf, rtd

我正在尝试从我的 Java 代码评估 Excel 2007 中公式单元格 [公式为 RTD] 的单元格值。我使用了 HSSFFormulaEvaluator 类和 evaluate() 方法，简而言之是标准方法。加法、减法和其他简单函数工作正常，但是当我在评估函数 RTD 后返回的控制台上打印 CellValue 对象时，它显示“...[~FUNCTION-NOT-IMPLEMENTED~]”。我怀疑 POI 的 HSSFFormulaEvaluator 还没有实现 RTD 功能。尽管如此，任何帮助或评论将不胜感激。干杯。

# ipad - 将图像从 iPad 上传到 S3 中的存储桶？

> ID：10735933
> 
> 赞同：0
> 
> 时间：2012-05-24T10:45:16.017
> 
> 标签：ipad, amazon-s3, image-uploading

我正在用 HTML5 编写一个应该在 iPad 上运行的网络应用程序。我想将图像从 iPad 直接上传到 S3 存储桶。如果那不可能，我可以满足于上传到我的服务器，然后我自己将它存储在 S3 上。

我在网上看到首选工具是 SWFUpload，但我担心它不会在 iPad 上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:05:13.023

不幸的是，你运气不好。Apple 在 iOS Safari 中阻止文件上传。浏览器无权访问 iOS 文件系统或照片。

[https://apple.stackexchange.com/questions/4104/is-it-possible-to-upload-files-to-a-website-from-safari-on-iphone](https://apple.stackexchange.com/questions/4104/is-it-possible-to-upload-files-to-a-website-from-safari-on-iphone)

您会看到如果您访问 Facebook 的移动网络应用程序 [http://m.facebook.com](http://m.facebook.com)并尝试发布照片，他们会告诉用户将照片通过电子邮件发送到自定义电子邮件地址。

如果您想要上传照片，您必须找到另一条路线来上传或使用 iOS 应用程序。

# asp.net-mvc - ASP.NET Web Api - 将对象发布到自定义操作控制器

> ID：10735944
> 
> 赞同：6
> 
> 时间：2012-05-24T10:46:30.880
> 
> 标签：asp.net-mvc, json, web-services, rest

我有下一个 ApiController

```
public class ValuesController : ApiController
{
    // GET /api/values
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    }

    public User CreateUser(User user)
    {
        user.Id = 1000;
        return user;
    }
} 
```

与下一条路线

```
 routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }); 
```

我想使用这项服务。我可以使用第一种方法：

```
 var client = new WebClient();
    var result = client.DownloadString(@"http://localhost:61872/api/values/get"); 
```

但我不能使用第二种方法。当我下一步做：

```
 var user = new User() { Name = "user1", Password = "pass1" };
    var json = Newtonsoft.Json.JsonConvert.SerializeObject(user);
    result = client.UploadString(@"http://localhost:61872/api/values/createuser", json); 
```

我在没有其他信息的情况下捕获下一个异常

> 远程服务器返回错误：(500) 内部服务器错误。

我有两个问题：

1.  将自定义对象设置为服务方法参数的正确方法是什么？
2.  我怎样才能获得有关“魔术”异常的附加信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T11:04:11.730

如果您打算发送 JSON 请求，请确保您已`Content-Type`正确设置请求标头，否则服务器不知道请求是如何编码的，并且`user`您的 Api 控制器操作采用的参数为空：

```
using (var client = new WebClient())
{
    client.Headers[HttpRequestHeader.ContentType] = "application/json";
    var user = new User() { Name = "user1", Password = "pass1" };
    var json = Newtonsoft.Json.JsonConvert.SerializeObject(user);
    var result = client.UploadString(@"http://localhost:61872/api/values/createuser", json);
} 
```

# multithreading - perl：线程终止被用户输入阻塞

> ID：10735946
> 
> 赞同：0
> 
> 时间：2012-05-24T10:46:35.950
> 
> 标签：multithreading, perl, signals

我制作了一个可以以两种方式终止的程序，用户输入一个字符串say-“kill”或一个特定的线程信号SIGINT。

在这个终结者线程中，我有一个声明（捕捉“kill”）：

```
 $a = <>; 
```

后面跟着一个'return;' 我在顶部也有适当的信号处理程序（用于 INT）：

```
print "signal received\n";
threads->exit(); 
```

但是在自动终止的情况下（即 SIGINT 是从其他线程发送的），打印 stmt 直到我按下某个键才出现，无论我等待多长时间。我想 <> 正在阻塞。

有人可以告诉我如何在自动终止的情况下向 <> 提供某种输入，以便立即查看结果。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-24T19:48:11.123

你不能做你想做的事，你想做的事。如果正在读取文件，并且“等待输入”，则进程进入不间断的等待状态。此时您基本上不能通过信号中断它。不间断等待是内核的事情，关键是防止文件损坏。

要做你想做的事，你可能需要使用类似[`IO::Select`](http://perldoc.perl.org/IO/Select.html)和`can_read`函数的东西。您可以在轮询循环中测试哪些文件句柄已准备好进行 IO - 此轮询循环*可*被终止信号中断。

或者，您可以使用[`Term::ReadKey`](http://search.cpan.org/dist/TermReadKey/ReadKey.pm)它将允许您以非阻塞方式捕获按键，而不是使用文件句柄读取

# jquery - 悬停并单击同一 div 上的功能

> ID：10735950
> 
> 赞同：1
> 
> 时间：2012-05-24T10:46:55.250
> 
> 标签：jquery

在同一个 div 上附加悬停和 onclik 功能的正确方法是什么？

这是我尝试过的，但没有奏效（单击没有任何作用）：

```
$(function outlineHider(){
    $("#hotspot").hover(
        function() {
            $("#outlines").show(); //showing another div element
            function bindClick() {
                $("#hotspot").click(callAnotherFunction())};
            }, 
            function() {
                $("#outlines").hide();
            }
        );  
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:49:43.960

试试这个：

```
$(function() { // document ready handler shortcut
    $("#hotspot").hover(
        function() { $("#outlines").show(); }, 
        function() { $("#outlines").hide(); }
    ).click(function() {
        callAnotherFunction()
    }); 
}); 
```

或者更短的版本，感谢@VisioN：

```
$(function() {
    $("#hotspot")
        .hover(function() { $("#outlines").toggle(); })
        .click(callAnotherFunction);    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:51:37.890

试试这个

```
$(function() { 
    $("#hotspot")
        .hover(
            function() { $("#outlines").show(); }, //mousein
            function() { $("#outlines").hide(); }  //mouseout
        )

        .click(function() { 
            callAnotherFunction();
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:53:43.240

如果我做对了，这应该对你有帮助。

```
$(function outlineHider(){
    $("#hotspot").hover(
        function() {
            $("#outlines").show(); //showing another div element
    }),click(function(){
       $("#outlines").hide();
    });
}); 
```

> [结合悬停和单击功能（jQuery）？](https://stackoverflow.com/questions/2432003/combine-hover-and-click-functions-jquery)
> 
> var hoverOrClick = function () { // 做一些普通的事情 } $('#target').click(hoverOrClick).hover(hoverOrClick);
> 
> 第二种方式：使用绑定：
> 
> $('#target').bind('click hover', function () { // 为两者做一些事情 });

# java - StringBuilder 替换方法像插入方法一样运行

> ID：10735956
> 
> 赞同：3
> 
> 时间：2012-05-24T10:47:11.660
> 
> 标签：java, replace, stringbuilder

我尝试在`StringBuilder`使用该`replace`方法时替换一些字符串，但不幸的是它像该`insert`方法一样运行。

这是一些代码：

```
public class StringBuilderReplace {

    public static void main(String[] args) {
        StringBuilder builder = new StringBuilder();

        builder.append("Line 1\n");
        builder.append("Line 2\n");
        builder.append("Line 3\n");

        builder.replace(builder.indexOf("Line 2"), builder.indexOf("Line 2"), "Temporary Line\n");

        System.out.println(builder.toString());
    }
} 
```

此代码的结果：

```
Line 1
Temporary Line
Line 2
Line 3 
```

**我想要的是：**

```
Line 1
Temporary Line
Line 3 
```

如何做到这一点以获得我想要的结果？

**基于 AljoshaBre 答案的更新**

如果我像这样更改代码，它会起作用：

```
builder.replace(builder.indexOf("Line 2"), builder.indexOf("Line 3"), "Temporary Line\n"); 
```

但是出现了新的问题，如果下一个字符串（对于这个例子`Line 3`）我不知道内容怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T10:49:12.350

这是因为您将“第 2 行”的索引作为起始索引，这是该行的开头，并且您对最后一个索引执行相同的操作。

我认为您应该执行以下操作：

```
public class StringBuilderReplace {
        public static void main(String[] args) {
            StringBuilder builder = new StringBuilder();

            builder.append("Line 1\n");
            builder.append("Line 2\n");
            builder.append("Line 3\n");

            String lineToReplace = "Line 1\n";
            int startIndex = builder.indexOf(lineToReplace);
            int lastIndex = startIndex + lineToReplace.length();

            builder.replace(startIndex, lastIndex, "Temporary Line\n");
            System.out.println(builder.toString());
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:54:27.027

```
final String toReplace = "Line 2\n";
final int start = builder.indexOf(toReplace);
builder.replace(start, start+toReplace.length(), "Temporary Line\n"); 
```

# android - Android 菜单标签

> ID：10735964
> 
> 赞同：1
> 
> 时间：2012-05-24T10:47:42.503
> 
> 标签：android, android-layout

如何创建像本例中这样的标签？我的意思是`Spades w/ Ads`和这些`Spades Settings`和`Partners Spades Options`？

![示例菜单](../Images/0efb69faf6e9b207cc6b8c8f8b806a19.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:54:13.820

使用共享首选项很容易，看看这个[教程](http://androidresearch.wordpress.com/tag/sharedpreferences/)

简而言之：对于所有偏好类别，您都可以添加标题，在您的情况下，黑桃设置和合作伙伴黑桃选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:50:48.460

Spades w/ Ads 是屏幕的标题，其余部分可以使用 xml 轻松创建............

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#ff555555"
    android:gravity="center_vertical" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:text="sample1" />
</LinearLayout> 
```

![在此处输入图像描述](../Images/bea17a108b27738cecc5f6194276aa55.png)

# mysql - Mysql 中的 TEMPORARY 表

> ID：10735965
> 
> 赞同：1
> 
> 时间：2012-05-24T10:47:43.703
> 
> 标签：mysql

如果两个用户使用 PHP 脚本在我的 mysql 数据库中同时创建两个 TEMPORARY 表，它会创建两个不同的表吗？这些用户可以使用自己的表而不会遇到任何问题，并且这些表会被自动删除吗？

谢谢 ：）

```
CREATE TEMPORARY TABLE TempTable ( ID int, Name char(100) ) TYPE=HEAP;
INSERT INTO TempTable VALUES( 1, "Foo bar" );
SELECT * FROM TempTable;
DROP TABLE TempTable; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:19:08.377

如[手册](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)所述：

> `TEMPORARY`表只对当前连接可见，并在连接关闭时自动删除。这意味着两个不同的连接可以使用相同的临时表名称，而不会相互冲突或与现有`TEMPORARY`的同名非表冲突。（在删除临时表之前，隐藏现有表。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:58:34.757

Temporary tables are created in a current session; so, two users can create two temp. tables at the same time in their threads. These tables will be removed on session closing.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:52:14.007

您可以`[IF NOT EXISTS]`在此查询中使用... [参考](http://dev.mysql.com/doc/refman/4.1/en/create-table.html)

# c++ - 字符串解密中的堆栈溢出

> ID：10735969
> 
> 赞同：-3
> 
> 时间：2012-05-24T10:47:58.330
> 
> 标签：c++, visual-c++

> **可能重复：**
> [堆上非常大的数组（Visual C++）](https://stackoverflow.com/questions/3691196/very-large-array-on-the-heap-visual-c)

我需要声明 10 个字符串，每个字符串长度为 100000 个字符。

```
int main(void)
{
long t;
cin>>t;
string str[10][100000];
for(long i=0;i<=t;i++)
{
       getline(cin,str[i][100000]);
}

for(long i=1;i<=t;i++)
{
  getStringSize(str[i][100000]);
}
system("PAUSE");
} 
```

我用 VC++ 编写了代码，但是一旦我编译了代码，就会出现堆栈溢出。如果我将字符串的大小保持为 str[10][10000] 那么代码效果很好。我需要做什么才能使代码工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:55:04.800

这不是您声明十个字符串的方式，每个字符串包含 10,000 个字符 - 您声明了一个 2D 字符串数组，10x10000。

如果您希望每个字符串有 10,000 个字符，这就是您使用 C++ 的方式：

```
vector<string> str(10, string(100000, ' ')); 
```

请注意，您需要指定要重复 10,000 次的字符。由于`std::string`设计为动态增长，因此您可以完全跳过 10,000 部分：库将根据需要分配尽可能多的内存。

```
vector<string> str(10); 
```

您也可以`array`在 C++11 中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T10:50:08.907

您需要动态分配内存：您的情况下的堆栈不足以容纳那么多数据

```
const size_t len = 10;
string* str[len]; 
for(long i=0; i<len; ++i) {
  str[i] = new string[100000];
} 
```

*注意*：不要忘记在不再需要时删除分配的内存。

*注意*：为了让生活更轻松，请使用适当的容器（例如`vector<>`）自动为您进行内存管理

更新：您的代码也有一些其他问题：

```
for(long i=0;i<=t;i++) // t could be lager than 9
{ 
  getline(cin,str[i][100000]); // you are accessing a non-existent element
} 
```

请尝试：

```
long t;   
cin>>t;   
vector<string> str; // declare an auto-resizing container of strings   

for(long i=0; i<t; i++)
{ 
  string tmp; // this string will be able to store a lot of characters by itself
  getline(cin, tmp); // read in the next line
  str.push_back(tmp); // add the line to our container
} 

for(long i=0; i<t; i++)
{
  // do something with str[i] // values str[0]..str[t-1] are guaranteed to be valid
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:51:14.793

您需要在堆中分配内存。像这样..

```
string *str[10];

for(int i = 0; i < 10; i++)
  str[i] = new string[100000]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:53:06.993

如果您使用 std::string 那么它不是固定长度 - 这就是重点。你可能想要的是：

```
char str[10][100000]; 
```

这会给你 10 x char[100000]。就目前而言，您有一个由 10 x 100000 个字符串组成的矩阵。

# css - 处理/编译 LESS

> ID：10735970
> 
> 赞同：0
> 
> 时间：2012-05-24T10:48:05.490
> 
> 标签：css, twitter-bootstrap, less, bootswatch

我已经尝试过 SimpLESS 和 Crunchapp 都返回相同的错误。

我正在尝试编译这个 bootswatch [http://bootswatch.com/cyborg/](http://bootswatch.com/cyborg/)，当我这样做时，我收到以下错误。

```
Compiler Errors
variable @grayLight is undefined (Line: 17) 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T11:53:52.683

您必须在使用它的同一文件中定义变量：

```
@grayLight: #e7e7e7; 
```

或者，如果它在另一个 .less 文件中定义，则必须导入它才能在另一个文件中查看变量：

```
@import "mixins.less"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:20:15.093

您必须先分配变量值，例如：

```
@grayLight: #ffffff; 
```

正如错误所说，您使用未定义的变量。然后你可以在代码的任何地方调用这个变量。如果它发生在您之前定义的情况下，请检查名称是否相等（以及字母大小写）。

# jquery - jQueryTools 可滚动不适用于鼠标滚轮

> ID：10735975
> 
> 赞同：0
> 
> 时间：2012-05-24T10:48:20.903
> 
> 标签：jquery, jquery-plugins

我刚刚升级到 jQueryTools 1.2.7 和 jQuery 1.7.2。我需要一些可滚动插件的额外功能。现在，垂直滚动的鼠标滚轮滚动不起作用，除非我让它表现得圆形。

此代码与 1.2.5 完美搭配

```
$("#productscroll").scrollable({mousewheel:true, vertical: true}); 
```

它不滚动。如果我按“下一步”，它会反应一次并滚动到顶部。奇特。

此设置有效，但我的列表从未停止，这令人困惑。

```
 $("#productscroll").scrollable({circular:true, mousewheel:true, vertical: true}); 
```

有没有人经历过这个并且知道快速修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:57:27.087

原因是一个错误。可能的修复发布在 GitHub 上。这是我的帖子，修复在问题 766 中。 [https://github.com/jquerytools/jquerytools/issues/790](https://github.com/jquerytools/jquerytools/issues/790)

# javascript - 使用 Javascript 从 iframe 中删除/替换特定的 HTML

> ID：10735976
> 
> 赞同：0
> 
> 时间：2012-05-24T10:48:32.637
> 
> 标签：javascript, html, iframe

好的，所以在我的页面中，我有一个 iframe 元素，它将加载 HTML，其中总是有一行特定的 HTML 代码，我需要在加载 iframe 时替换它。iframe src 会有所不同，因此必须在加载 iframe 时完成。我要替换的 HTML 在 iframe 加载的文件中，它看起来像这样：

```
<div class="myclass1" style="height:XXXpx; width:YYYpx;"> 
```

所以我实际上需要的是对于每个具有 class="myclass1" 的 div 来剥离样式的高度属性，并且宽度保持不变。所有“myclass1” div 都将遵循这种格式。所以我想用这样的替换所有行：

```
<div class="myclass1" style="width:YYYpx;"> 
```

我对 javascript 并不是很有经验，所以任何帮助，即使只是指针，都会受到赞赏，因为即使这是可能的，我也不知道如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:05:42.960

如果 iframe 的 src 在同一个域上，请使用：

```
var iFrame = document.getElementById("your-iframe-id");
if ( iFrame.contentDocument ) 
{
   iFrameDocument = iFrame.contentDocument;
}
else if ( iFrame.contentWindow ) 
{ 
  iFrameDocument = iFrame.contentWindow.document;
} 
```

用途`iFrameDocument.getElementById`或您需要的任何东西

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T11:07:39.670

您可以使用以下示例更改加载的 div 的样式，加载页面后调用 javascript 函数。

```
 <html>
       <head>
       <script type="text/javascript">
       function change_style()
        {
          document.getElementById("div_id").style.width="yyypx";
        }  
       </script> 
       </head>
       <body>

        <div  id="div_id" class="myclass1" style="height:XXXpx; width:YYYpx;">
          -------------------
          -------------------
         </div>

      <script>
       change_style();
      </script>
      </body>
      </html> 
```

# python - 从 URL 设置 QIcon() 像素图

> ID：10735977
> 
> 赞同：5
> 
> 时间：2012-05-24T10:48:33.567
> 
> 标签：python, qt, pyqt, pyqt4

如何从 PYQT 中的 url 设置 Qicon，你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T13:50:21.670

一个基本的例子是：

```
from PyQt4.QtGui import *
from PyQt4.QtCore import QUrl
from PyQt4.QtNetwork import QNetworkAccessManager, QNetworkRequest

app = QApplication([])
url = "http://www.google.com/favicon.ico"
lbl = QLabel("loading...")
nam = QNetworkAccessManager()

def finishRequest(reply):
    img = QImage()
    img.loadFromData(reply.readAll())
    lbl.setPixmap(QPixmap(img))

nam.finished.connect(finishRequest)
nam.get(QNetworkRequest(QUrl(url)))
lbl.show()
app.exec_() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-20T04:16:30.587

使用`requests.get`方法下载图像并`QIcon`从中创建一个。

```
import sys
import requests

import PySide6
from PySide6.QtWidgets import QTableView, QWidget, QApplication, QGridLayout, QHeaderView
from PySide6.QtCore import Qt, QAbstractTableModel
from PySide6.QtGui import QColor, QIcon, QPixmap

from datetime import datetime

class MagicIcon():
    def __init__(self, link):
        self.link = link
        self.icon = QIcon()
        try:
            response = requests.get(self.link)
            pixmap = QPixmap()
            pixmap.loadFromData(response.content)
            self.icon = QIcon(pixmap)
        except:
            pass

class MainWindow(QWidget):
    def __init__():
        super().__init__()
        self.setWindowIcon(MagicIcon(
            "https://img.icons8.com/external-flatarticons-blue-flatarticons/65/000000/external-analysis-digital-marketing-flatarticons-blue-flatarticons-1.png"
        ).icon)

if __name__ == "__main__":
    app = QApplication(sys.argv)
    wid = MainWindow()
    wid.show()
    sys.exit(app.exec()) 
```

# iphone - 将地址地理编码为iphone中的坐标

> ID：10735981
> 
> 赞同：26
> 
> 时间：2012-05-24T10:48:53.577
> 
> 标签：iphone, ios, ios5, geocoding

我正在尝试使用以下代码将地址地理编码为坐标：

```
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:@"6138 Bollinger Road, San Jose, United States" completionHandler:^(NSArray* placemarks, NSError* error){
                     for (CLPlacemark* aPlacemark in placemarks)
                     {
                         // Process the placemark.
                         NSString *latDest1 = [NSString stringWithFormat:@"%.4f",aPlacemark.location.coordinate.latitude];
                         NSString *lngDest1 = [NSString stringWithFormat:@"%.4f",aPlacemark.location.coordinate.longitude];
                         lblDestinationLat.text = latDest1;
                         lblDestinationLng.text = lngDest1;
                     }
                 }]; 
```

我已经尝试了很多次，但调试器从不进入块，我无法获得位置。有人可以帮我吗？

问候
潘卡伊

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T11:24:41.953

好吧，我发现了我的错误。代码是正确的并且工作完美。我一直在通过调试器处理它，并试图找出调试器没有进入块的原因。但是现在我发现调试器此时没有进入该块。获取位置值所需的时间很少。它是异步完成的，因此我无法找到它，并且由于崩溃后没有值而导致崩溃。我已将我的代码发布块移到块内，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:07:14.857

我刚刚运行了那个确切的代码，它按预期工作。确保您有一个有效的互联网连接。

尝试在字符串上添加 NSLog 并查看它是否被调用。

```
NSLog(@"lat: %@, lng: %@", latDest1, lngDest1); 
```

您是在模拟器还是设备中运行它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:15:43.737

从 iOS4.0 开始，块是 Objective C 的新特性。您可以将一个块想象为在同一功能块中工作的委托方法。至于调用任何委托方法需要时间，具体取决于条件，当块完成其地理编码工作时，它会以同样的方式执行其中的代码。您可以在苹果文档中阅读有关 Block 的更多信息或阅读[http://www.raywenderlich.com/9438/how-to-use-blocks-in-ios-5-tutorial-part-2](http://www.raywenderlich.com/9438/how-to-use-blocks-in-ios-5-tutorial-part-2)。

您还可以在 GITHUB [https://github.com/Mangesh20/geocoding上查看我的存储库](https://github.com/Mangesh20/geocoding)

# android - Android - 开发哪个版本？

> ID：10735986
> 
> 赞同：0
> 
> 时间：2012-05-24T10:49:15.347
> 
> 标签：android

我被要求开发一个简单的 android 应用程序。我几乎完成了它。（我是一位经验丰富的 Java 开发人员）。

我的问题是。该应用程序或多或少是一个网络视图。我应该为哪个 Android 版本构建？当然——你应该总是为最新版本构建——但大多数安卓手机仍然运行旧软件（2.1）。

我应该为 2.1 构建应用程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T10:52:15.113

您可能应该为 4.0.4 构建，但将最低 SDK 版本设置为 2.1。应根据您的应用程序要求选择最低版本。如果您不使用任何新功能并且您知道自己在做什么（您可能需要进行更多测试），您甚至可以将其设置为 1.5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:55:11.687

如果您的目标是最大的兼容性，那么是的，2.1 将是最佳选择。大约 1% 的设备使用的 API 低于此值。

查看[Current Distribution](http://developer.android.com/resources/dashboard/platform-versions.html) Android 页面以获得更详细的概述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:55:35.680

我认为你应该自己做出这个决定。如果您想用您的应用程序覆盖更广泛的市场，那么 2.1 或 2.2 将是首选版本。如果您的应用程序是特定于客户的，那么就按照他们的要求去做。如果您正在构建市场发布应用程序，也许[此链接可以帮助您做出正确的决定。](http://developer.android.com/resources/dashboard/platform-versions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:56:24.493

我更喜欢 Android 2.3.x 或 2.2，因为大多数智能手机都使用这两个版本中的一个。另一个优点是，2.3.x 和 2.2 兼容最新版本的 Android。

我希望这是一个有用的答案。

来自德国的好运。

# javascript - 如何改进此 JavaScript 代码以使其更具可移植性？

> ID：10735987
> 
> 赞同：0
> 
> 时间：2012-05-24T10:49:24.877
> 
> 标签：javascript, portability

下面是一个小 JavaScript 项目，用于在网页上显示引号。因为我想在许多不同的网站上使用它，所以我阅读了制作可移植 JavaScript 代码的良好实践，例如：

*   不使用全局变量
*   使用命名空间
*   让插件变得容易
*   使用可以被覆盖的默认值

对于那些有编写 JavaScript 库和可移植 JavaScript 代码经验的人，**可以对这段代码进行哪些改进，以 (a) 使其更便携，(b) 避免任何不可预见的问题或冲突，(c) 改进命名约定等.?**

**索引.htm:**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>smart quotes</title>
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/smartquotes.js"></script>
        <script type="text/javascript">
            window.onload = function() {
                SMARTQUOTES.init();
                SMARTQUOTES.quotes = new Array(
                'It\'s tempting to augment prototypes of built-in constructors such as Object(), Array(), or Function(), but it can seriously hurt maintainability.',
                'We come from XHTML backgrounds, so we will close all tags, use lowercase, and use quotation marks around attributes.',
                'Checking to see if a value exists inside an array is always a bore in JavaScript.',
                'JavaScript classes have the same effect on some people that garlic has on Dracula.',
                'Mixins are not supported natively by CoffeeScript, for the good reason that they can be trivially implemented yourself.',
                'Using a single var statement at the top of your functions is a useful pattern to adopt.',
                'Using the Function() constructor is as bad as eval()',
                'Any obstacle that I\'ve encountered during my development by placing JavaScript at the bottom of the page has been easily overcome and well worth the optimization gains.'
                );
                SMARTQUOTES.duration = 8000;
                SMARTQUOTES.start();
            };
        </script>
        <style type="text/css">
            div#quoteWrapper {
                border: 1px solid #999;
                padding: 10px;
                background: #eee;
                color: navy;
                width: 300px;
                border-radius: 5px;
                font-style: italic;
                font-family: arial;
                font-size: 12pt;
                text-align: center;
            }

        </style>
    </head>
<body>
    <div id="quoteWrapper">
        <div id="SMARTQUOTE"></div>
    </div>
</body> 
```

**smartquotes.js：**

```
(function(global) {
    var SMARTQUOTES = {};
    if(global.SMARTQUOTES) {
        throw new Error('SMARTQUOTES has already been defined');
    } else {
        global.SMARTQUOTES = SMARTQUOTES;
    }
})(typeof window === 'undefined' ? this : window);  

SMARTQUOTES.init = function() {
    SMARTQUOTES.quoteIndex = 0;

    SMARTQUOTES.duration = 3000;

    SMARTQUOTES.quotes = new Array();
    SMARTQUOTES.quotes[0] = 'test quote #1';
    SMARTQUOTES.quotes[1] = 'this is the second quote';
    SMARTQUOTES.quotes[2] = 'and now the third and last quote'; 

    SMARTQUOTES.element = $('div#SMARTQUOTE').hide();

    SMARTQUOTES.incrementQuote = function() {
        SMARTQUOTES.quoteIndex++;
        if(SMARTQUOTES.quoteIndex >= SMARTQUOTES.quotes.length) {
            SMARTQUOTES.quoteIndex = 0;
        }
    }

    SMARTQUOTES.displayQuote = function () {
        var quote = SMARTQUOTES.quotes[SMARTQUOTES.quoteIndex];
        SMARTQUOTES.element.fadeOut('slow', function() {
            SMARTQUOTES.element.html(quote);
        });
        SMARTQUOTES.element.fadeIn();
        SMARTQUOTES.incrementQuote();
        SMARTQUOTES.startTimer();
    }

    SMARTQUOTES.startTimer = function () {
        var t = setTimeout('SMARTQUOTES.displayQuote()', SMARTQUOTES.duration);
    }

    SMARTQUOTES.start = function() {
        SMARTQUOTES.displayQuote();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:57:49.673

Few ideas (I'll add more later):

*   You could replace the first part (global) with a

> var SMARTQUOTES = SMARTQUOTES || {};

*   You could add an optional "element" in your init. Something like:

> ```
> SQ.init = function (elem) {     
>   if (elem === undefined) {     
>     elem = 'div#SMARTQUOTE';     
>   }     
>   // ...     
>   SQ.element = $(elem).hide();     
>   // ... 
> ```

*   Maybe enclose it all in a self-executing block:

> ```
> (function (){
>   var SMARTQUOTES = SMARTQUOTES || {};
>   SMARTQUOTES.init = function (elem) {
>   ...
>   }
> }()); 
> ```

*   Even better, use this keyword

> ```
> (function (){
>   var SMARTQUOTES = SMARTQUOTES || {};
>   SMARTQUOTES.prototype.init = function (elem) {
>      var that = this;
>      that.index = ...
>   ...
>   }
>   SMARTQUOTES.prototype.displayQuote = function() {
>      that.startTimer(); ...
>   }
> }()); 
> ```

*   Read [this](http://shichuan.github.com/javascript-patterns/) and [this](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth) article. They are about module patterns.

# php - PHP变量何时自动销毁？

> ID：10735989
> 
> 赞同：0
> 
> 时间：2012-05-24T10:49:29.343
> 
> 标签：php, variables

我正在上传大型 .jpg 图像，然后通过变量对其进行操作。在一个地方，我有；

> $image = imagecreatefromjpeg($_FILES['smileimage']['tmp_name'])

然后稍后，在某种`if`情况下，我必须`$image = $newImage;`在做一些工作之后，我希望变量被销毁，我想如果我不销毁它们，它们可能会继续吃 RAM。所以我做了如下：

```
if(isset($newImage)) {
    imagedestroy($newImage);
}
imagedestroy($image);
imagedestroy($thumbnail); 
```

但这提供了一个错误，因为

> 警告：imagedestroy(): 11 在...中不是有效的图像资源

它告诉 erros 符合`imagedestroy($image)`. 但是`$image`是一个有效的`image`资源。是不是如果我销毁`$newImage`，`$image`也会自动销毁？

但是，如果我删除上面写着的那一行；

```
if(isset($newImage)) {
    imagedestroy($newImage);
} 
```

那么，就没有错误了。但我担心，如果我不销毁`$newImage`它，它可能会在 RAM 上持续存在并在某个时候吃掉整个内存？我该怎么办？而且，我想知道变量什么时候自动销毁？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:52:40.300

因为你做`$image = $newImage`了两个变量都引用*同一个*图像。不创建副本。这两个变量只是引用同一资源的两个不同名称。

当您释放与您一起持有的资源时`$newImage`，`imagedestroy($newImage)`您正在释放由 持有的*相同*资源`$image`，因为它们*共享*它。

这就是第二次调用`imagedestroy`失败的原因，因为图像不再存在。

如果您没有手动调用`imagedestroy`，PHP 会在脚本结束时自动完成。

# c++ - C++：使用 sizeof 的 char 数组的大小

> ID：10735990
> 
> 赞同：11
> 
> 时间：2012-05-24T10:49:32.367
> 
> 标签：c++, arrays, string, sizeof

请看以下 C++ 代码：

```
char a1[] = {'a','b','c'};
char a2[] = "abc";
cout << sizeof(a1) << endl << sizeof(a2) << endl; 
```

虽然`sizeof(char)`是 1 个字节，但为什么输出显示`sizeof(a2)`为 4 而不是 3（如`a1`）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-24T10:51:15.070

C 字符串包含一个空终止符，因此添加了一个字符。

本质上是这样的：

```
char a2[] = {'a','b','c','\0'}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T11:02:55.227

这是因为`'\0'`在 C 字符串的末尾添加了一个额外的空字符，而第一个变量`a1`是一个由三个单独字符组成的数组。

`sizeof`会告诉你变量的字节大小，但`strlen`如果你想在运行时获得 C 字符串的长度，则更喜欢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:52:02.137

对于 a2，这是一个字符串，因此它还包含 '\n'

更正，在 Ethan 和 Adam 评论之后，这当然不是 '\n' 而是空终止符，即 '\0'

# javascript - 我必须在移动浏览器上显示 1000 多个未分类的图片缩略图，我不知道如何

> ID：10735993
> 
> 赞同：1
> 
> 时间：2012-05-24T10:49:39.483
> 
> 标签：javascript, jquery, html, performance

在移动设备上进行测试时，我尝试的一切都失败了。加载时间长得令人无法接受，滚动很生涩等等。我正在使用的缩略图是 120 像素宽。我知道这不是一个具体的问题，但我想听听您将如何解决此类问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T10:57:47.600

I can think of three approaches

1.  the classic way: use pagination, display only 10/20/50.. thumbnails per page
2.  the modern (complex) way: add images when the user is scrolling, remove images from the DOM when they leave the visible area (best known example: the google picture search)
3.  the clumsy way: splice the images together on the server, serve them as cluster of for example 3 x 5 thumbs

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:57:10.157

I would suggest you not to make all the thumbnails load at once. You can load 50 or hundred thumbnails when the page loads first and load remaining if they click on load more. Or you can organize them into pages

Loading at once makes your web page size more than an MB which will obviously take a lot of time to load

# python - 在 Django 应用程序中使用 Ruby gem

> ID：10735998
> 
> 赞同：2
> 
> 时间：2012-05-24T10:50:00.980
> 
> 标签：python, ruby-on-rails, ruby, django, interop

假设我有一些我想从我的 Python (Django) 应用程序中使用的 Ruby gem。我知道这不是最直接的问题，但让我们假设在 Python 中重写 Ruby gem 需要大量工作，我该如何使用它？

我应该使用 Rails 围绕它创建一个 XML-RPC 包装器并调用它吗？在 Python 中是否有类似 ruby​​ 的实现，我可以在其中运行我的 gem 代码？

还有其他我可能错过的方法吗？在我迷失在这个领域之前，我从来没有做过这样的事情。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T11:03:01.030

我建议你：

*   使用 REST 或 XML-RPC 公开一个 ruby​​ 服务。

或者

*   使用 Django 编写一个 ruby​​ 脚本。

要在 Python 和 Ruby 之间传输数据，我建议您使用 JSON、XML 或纯文本（取决于您需要传输的数据类型）。

我建议使用选项 2（从 Python 进程启动 ruby​​ 脚本），因为这会为解决方案引入更少的移动部件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T12:11:41.493

这在一定程度上取决于您需要做什么。XML-RPC 建议已经提出。您实际上可以在 JVM 中一起使用它们，假设您可以接受使用 jython 运行 Django 并使用 jruby。但这是一项工作，可能值得，也可能不值得。

如果您准确描述 Ruby gem 是什么以及它应该解决什么问题，可能会更容易。您可能会得到可以帮助您完全避免问题的建议。