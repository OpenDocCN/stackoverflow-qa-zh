# StackOverflow 问答 11617000-11617999

# java - 线程“主”java.lang.NoClassDefFoundError 中的异常：org/apache/qpid/url/URLSyntaxException

> ID：11617005
> 
> 赞同：1
> 
> 时间：2012-07-23T16:57:23.507
> 
> 标签：java, eclipse, tomcat, qpid

我将 QPid 与 Eclipse 和 Tomcat 一起使用。创建了一个动态 Web 应用程序并设置了 QPID_HOME、QPID_WORK 环境变量。

试用这里提到的 Hello.java 示例：-

[https://svn.apache.org/repos/asf/qpid/trunk/qpid/java/client/example/](https://svn.apache.org/repos/asf/qpid/trunk/qpid/java/client/example/)

但是我在运行这个文件时遇到了这些错误：-

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/qpid/url/URLSyntaxException
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at com.sun.naming.internal.VersionHelper12.loadClass(Unknown Source)
    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
    at javax.naming.InitialContext.init(Unknown Source)
    at javax.naming.InitialContext.<init>(Unknown Source)
    at myApp.runTest(myApp.java:25)
    at myApp.main(myApp.java:15)
Caused by: java.lang.ClassNotFoundException: org.apache.qpid.url.URLSyntaxException
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
 ... 9 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:00:33.420

看起来你失踪了：

```
qpid-common-0.10.jar 
```

可从[http://qpid.apache.org/download.html获得](http://qpid.apache.org/download.html)

或者

```
<dependency>
   <groupId>org.apache.qpid</groupId>
   <artifactId>qpid-common</artifactId>
   <version>0.10</version>
</dependency> 
```

如果您使用的是 Maven。

# sql - 具有 NULL 值的 Oracle SQL Case 语句

> ID：11617010
> 
> 赞同：2
> 
> 时间：2012-07-23T16:58:04.707
> 
> 标签：sql, oracle, parameters

我正在尝试创建一个 Oracle 查询，该查询将使用基于`CommandName`按钮的参数。

所以这是我的查询

```
SELECT id 
FROM table 
WHERE dateTime IS (CASE WHEN :CommandName = 'FIRST' THEN NULL ELSE NOT NULL END) 
```

所以我正在传递参数，但它不起作用 - 我只是得到一个`Missing NULL keyword`错误

我基本上不想根据输入的参数编写两个单独的查询

甚至不确定这是否可能，或者这是否是正确的做法？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:12:54.630

您可能需要更多地阅读 CASE 语句。

我相信您想要以下代码：

```
SELECT
    id 
FROM 
    table 
WHERE 
    (
        (dateTime IS NULL AND :CommandName = 'FIRST')
        OR
        (dateTime IS NOT NULL AND NVL(:CommandName, '') <> 'FIRST')
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:12:28.450

如果不使用动态 SQL 返回字符串“NULL”或“NOT NULL”，您可以使用两个`NVL()`函数：

```
select id
from table
where NVL(dateTime,'FIRST') = NVL(:param,dateTime); 
```

但是，如果 dateTime 被索引（并且 Oracle 可以索引 NULL），则 NVL() 函数将禁用索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:11:42.257

我觉得

```
SELECT id 
FROM table 
WHERE (dateTime IS NULL AND :CommandName='FIRST') OR (dateTime IS NOT NULL AND :CommandName <> 'FIRST') 
```

应该做你需要的。

# node.js - node.js，mongodb + http服务器循环中的范围

> ID：11617012
> 
> 赞同：0
> 
> 时间：2012-07-23T16:58:10.767
> 
> 标签：node.js, mongodb, scope

我是 node.js 的新手（不到一小时）。

我正在尝试建立一个简单的 http 服务器，它将读取一个 mongodb 集合并将数据打印到浏览器窗口。

到目前为止，我有：

```
var http = require ("http")
var mongodb = require('mongodb');

http.createServer(function(request, response) {
    var server = new mongodb.Server("127.0.0.1", 27107, {});
    response.writeHead(200, {"Content-Type": "text/plain"});
    response.write('Collection Data:<br>')
    new mongodb.Db('testdb', server, {}).open(function (error, client) {
      if (error) throw error;
      var collection = new mongodb.Collection(client, 'test_coll');
      collection.find({}, {limit:100}).each(function(err, doc) {
        if (doc != null) {
            console.dir(doc.text);
            response.write(doc.text)
        }
      });
      response.write("some stuff")
      response.end();
    });
}).listen(8080) 
```

这会将集合项的文本放在控制台上，而不是放在浏览器窗口上。我认为这是因为响应对象不在 .each 回调的范围内？我是否以错误的方式构建了这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:03:54.560

问题是`response.end()`在你的回调执行之前被调用。

你必须把它移到里面，像这样：

```
collection.find({}, {limit:100}).each(function(err, doc){
    if (doc != null) {
        console.dir(doc.text);
        response.write(doc.text)
    } else {
        // null signifies end of iterator
        response.write("some stuff");
        response.end();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:11:35.973

res.end 必须在回调内的 for 循环之后发生：

```
client.collection('test_coll', function(err, testColl) {
  testColl.find({}).each(function(err, doc) {
    if (err) {
        // handle errors
    } else if (doc) {
        res.write(doc._id + ' ')
    } else { // If there's no doc then it's the end of the loop
        res.end()
    }
  })
}) 
```

# opengl-es - 为什么 glBindFramebuffer(GL_FRAMEBUFFER, 0) 会导致 cocos2D-iphone 出现黑屏？

> ID：11617013
> 
> 赞同：10
> 
> 时间：2012-07-23T16:58:17.663
> 
> 标签：opengl-es, screen, opengl-es-2.0, framebuffer

**[iPad-3]-[iOS 5.0]-[Objective-C]-[XCode 4.3.3]-[Cocos2D]-[openGL|ES 2.0]**

我正在学习如何使用 openGL|ES 2.0 并偶然发现了帧缓冲区对象 (FBO)

**信息：** 我正在使用 Cocos2D，它有很多额外的绘图处理。我想这可能与这个问题有关。如果 cocos 的“默认”帧缓冲区与绘制到屏幕的实际默认帧缓冲区不同，这可能会导致错误绘制

**我的问题：** 在我的“helloworld.m”类的初始化函数中，如果我放置“glBindFrameBuffer(GL_FRAMEBUFFER, 0);” 在任何地方，我都会得到一个空白屏幕！

```
-(id) init
{
if( (self=[super init])) 
{

CGSize winSize = [CCDirector sharedDirector].winSize;

glBindFramebuffer(GL_FRAMEBUFFER, 0);

CCSprite * spriteBG = [[CCSprite alloc] initWithFile:@"cocos_retina.png"];
spriteBG.position = ccp(512,384);
//[self addChild:spriteBG z:1];

[self scheduleUpdate];
_mTouchDown = NO;

_mSprite = [CCSprite spriteWithTexture:_mMainTexture];
_mSprite.position = ccp(512,384);
[self addChild:_mSprite];

self.isTouchEnabled = YES;

} return self;} 
```

我错过了一些基本而明显的东西吗？

据我所知，函数“glBindFramebuffer(GL_FRAMEBUFFER, 0);” 只需将 Framebuffer 设置为 0 即可应用绘制到屏幕的默认帧缓冲区。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-24T17:17:52.193

问题是 iOS 或 Cocos2D（或两者）都可以有一个独特的帧缓冲区。该唯一帧缓冲区的句柄将不同于 0，并且每次都可能不同。

为了解决这个问题，我必须获取当前 FBO 的句柄，执行我自定义的帧缓冲区内容，然后在完成后重新应用 FBO 的句柄。

**创建一个变量来引用原始帧缓冲区对象**

```
GLint oldFBO; 
```

**将当前使用的 FBO 的句柄（即“GLint”）分配给变量“oldFBO”**

```
glGetIntegerv(GL_FRAMEBUFFER_BINDING, &oldFBO);

//here is when you would create or manipulate custom framebuffers.// 
```

**之后，您将原始 FBO 设置为当前 Framebuffer**

```
glBindFramebuffer(GL_FRAMEBUFFER, oldFBO); 
```

# c# - C++ vs C# BadPointer/BadReference？

> ID：11617016
> 
> 赞同：1
> 
> 时间：2012-07-23T16:58:29.287
> 
> 标签：c#, reference

对不起，我知道在 C++ 中返回局部变量的引用或指针会导致 bad_reference 异常。我不确定它在 C# 中的情况如何？

例如

```
List<StringBuilder> logs = new List<StringBuilder>();
void function(string log)
{
   StringBuilder sb = new StringBuilder();
   logs.Add(sb);
} 
```

在这个函数中，一个本地对象被创建并存储在一个列表中，这是坏的还是必须以另一种方式完成。我真的很抱歉问这个问题，但是在编写 C++ 2 个月后我很困惑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:05:55.223

在 C# 中，垃圾收集器管理您创建的所有（托管）对象。除非不再有对它的任何引用，否则它不会删除它。

所以该代码是完全有效的。`logs`保留对`StringBuilder`. 垃圾收集器知道这一点，因此即使在最初创建它的上下文超出范围后，它也不会清理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:06:10.557

在 C# 中，对象生命周期由 CLR 为您管理；与 C++ 相比，您必须将每个新的与删除相匹配。

但是在 C# 中你不能这样做

```
void fun()
{
    SomeObject sb(10);
    logs.Add(sb);
} 
```

即在堆栈上分配你必须使用 new - 所以在这方面 C# 和 C++ 的工作方式相似 - 除了释放/释放对象引用时。

在 C# 中仍然有可能泄漏内存 - 但它比在 C++ 中更难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T17:14:05.847

您编写的代码没有任何问题。这主要是因为 C# 与任何 .NET 语言一样，是一种“托管”语言，可以为您进行大量内存管理。要在 C++ 中获得相同的效果，您需要显式使用一些第三方库。

为您清理一些基础知识：

在 C# 中，您很少直接处理“指针”或“引用”。如果需要，您可以处理指针，但这是“不安全”的代码，除非您知道自己在做什么，否则您真的会避免这种事情。在您处理引用（例如`ref`或`out`参数）的少数情况下，该语言会对您隐藏所有细节，并让您将它们视为普通变量。

相反，C# 中的对象被定义为引用*类型的**实例*；每当您使用引用类型的实例时，它类似于使用指针，只是您不必担心细节。在 C# 中创建引用类型的新实例的方式与在 C++ 中创建对象的新实例相同，使用分配内存、运行构造函数等的运算符。在代码示例中，两者都是引用类型。*`new``StringBuilder``List<StringBuilder>`*

 *这里重要的托管语言的关键方面是自动垃圾收集。在运行时，.NET 框架“知道”您创建了哪些对象，因为您总是从它自己的内部管理的堆中创建它们（`malloc`在 C# 中没有直接或类似的东西）。它还“知道”一个对象何时完全超出范围——当您的程序中任何地方都没有对它的引用时。一旦发生这种情况，运行时就可以随时释放内存，通常是当它开始耗尽可用内存时，您永远不必这样做。事实上，在 C# 中没有办法显式销毁托管对象（尽管如果使用*非托管*资源，则必须清理它们）。

在您的示例中，运行时知道您已创建 a`StringBuilder`并将其放入 a `List<>`; 它会跟踪那个物体，只要它在里面，`List<>`它就会一直存在。一旦您将其从 中删除`List<>`，或者其`List<>`本身消失，运行时将自动`StringBuilder`为您清理 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T17:04:19.330

您的 C# 代码不返回对象引用，因此它不符合您的关注。然而，这是 C# 中不存在的问题。CLR 不允许您在堆栈上创建对象，只能在堆上创建对象。垃圾收集器确保对象引用保持有效。*

# wpf - 使用 Entity Framework 和 IDataErrorInfo 进行业务逻辑验证

> ID：11617019
> 
> 赞同：1
> 
> 时间：2012-07-23T16:58:36.877
> 
> 标签：wpf, entity-framework, validation, mvvm, idataerrorinfo

我正在使用带有 Entity Framework 4.3 的 WPF 和 MVVM 进行项目，我想知道如何执行实现 IDataErrorInfo 接口的业务逻辑验证。

我的所有模型（POCO 类）都在实现它以执行原始验证，例如最大长度、非负数等......

但是业务逻辑验证呢，比如防止重复记录呢？

想象一下，我有一个用于材料“参考”的文本框，它必须是唯一的，定义如下：

```
 <TextBox Text="{Binding Material.Reference, ValidatesOnDataErrors=True, NotifyOnValidationError=true, 
                                 UpdateSourceTrigger=PropertyChanged}"> 
```

该模型将成功验证引用的长度，但如果我的视图模型的材料 observablecollection 中已经有一个材料，我应该如何从我的 ViewModel 通知用户这一事实，同时利用 IDataErrorInfo 消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:32:15.533

过去，我通过从我的模型中公开一个验证委托来做到这一点，我的 ViewModel 可以挂钩以进行额外的业务逻辑验证

最终结果最终看起来像这样：

```
public class MyViewModel
{
    // Keeping these generic to reduce code here, but they
    // should be full properties with PropertyChange notification
    public ObservableCollection<MyModel> MyCollection { get; set; }
    public MyModel SelectedModel { get; set; }

    public MyViewModel()
    {
        MyCollection = DAL.GetAllModels();

        // Add the validation delegate to each object
        foreach(var model in MyCollection)
            model.AddValidationErrorDelegate(ValidateModel);
    }

    // Validation Delegate to verify the object's name is unique
    private string ValidateObject(object sender, string propertyName)
    {
        if (propertyName == "Name")
        {
            var obj = (MyModel)sender;
            var existingCount = MyCollection.Count(p => 
                p.Name == obj.Name && p.Id != obj.Id);

            if (existingCount > 0)
                return "This name has already been taken";
        }
        return null;
    }
} 
```

我的大多数模型都继承自一个通用基类，其中包括这个验证委托。这是该基类中的相关代码，取自我关于[在 MVVM 中验证业务规则的博客文章](http://rachel53461.wordpress.com/2012/01/22/validating-business-rules-in-mvvm/)

```
#region IDataErrorInfo & Validation Members

/// <summary>
/// List of Property Names that should be validated.
/// Usually populated by the Model's Constructor
/// </summary>
protected List<string> ValidatedProperties = new List<string>();

#region Validation Delegate

public delegate string ValidationErrorDelegate(
    object sender, string propertyName);

private List<ValidationErrorDelegate> _validationDelegates = new List<ValidationErrorDelegate>();

public void AddValidationErrorDelegate(
    ValidationErrorDelegate func)
{
    _validationDelegates.Add(func);
}

#endregion // Validation Delegate

#region IDataErrorInfo for binding errors

string IDataErrorInfo.Error { get { return null; } }

string IDataErrorInfo.this[string propertyName]
{
    get { return this.GetValidationError(propertyName); }
}

public string GetValidationError(string propertyName)
{
    // Check to see if this property has any validation
    if (ValidatedProperties.IndexOf(propertyName) >= 0)
    {
        string s = null;

        foreach (var func in _validationDelegates)
        {
            s = func(this, propertyName);
            if (s != null)
                return s;
        }
    }

    return s;
}

#endregion // IDataErrorInfo for binding errors

#region IsValid Property

public bool IsValid
{
    get
    {
        return (GetValidationError() == null);
    }
}

public string GetValidationError()
{
    string error = null;

    if (ValidatedProperties != null)
    {
        foreach (string s in ValidatedProperties)
        {
            error = GetValidationError(s);
            if (error != null)
                return error;
        }
    }

    return error;
}

#endregion // IsValid Property

#endregion // IDataErrorInfo & Validation Members 
```

这使我可以在我的模型中保留基本数据验证，并且我的 ViewModel 也可以将他们想要的任何自定义业务逻辑验证附加到模型中。

# python - ipython 类似于 ruby 的解释器

> ID：11617021
> 
> 赞同：0
> 
> 时间：2012-07-23T16:58:40.633
> 
> 标签：python, ruby

我来自 python 背景，正在学习 ruby​​。IPython 真的很棒。我现在是 ruby​​ 的新手，想要一些 ipython 的东西。截至目前，我正经历着艰难的时期，沿着红宝石线前进。似乎有点烦人，当按 Tab 不能完成事情时。我遇到了[这个问题](https://stackoverflow.com/questions/2560830/are-there-any-ipython-like-shells-for-ruby-or-rails)并遵循了第一个答案，获得了最多的支持。

它说要做`require 'irb/completion'`

我做了同样的事情，并得到以下错误：

```
LoadError: cannot load such file -- readline
    from /home/letsrock/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/letsrock/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/letsrock/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/letsrock/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from (irb):1
    from /home/letsrock/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

然后我尝试`require 'completion'`了最终导致以下错误：

```
LoadError: cannot load such file -- completion
    from /home/letsrock/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/letsrock/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from (irb):3
    from /home/letsrock/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

让我知道出了什么问题，我使用的是 ubuntu 11.04。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:06:44.567

看看[Pry](http://pryrepl.org/)，它是 IRB 的替代品。

它有：

> 受 IPython、Smalltalk 和其他高级 REPL 启发的许多便利命令

其中一些功能包括：

*   源代码浏览（包括带有 pry-doc gem 的核心 C 源代码）
*   围绕状态导航（cd、ls 和朋友）
*   文档浏览
*   实时帮助系​​统
*   在编辑器中打开方法（edit-method Class#method）
*   语法高亮
*   命令 shell 集成（在 Pry 中启动编辑器、运行 git 和 rake）
*   要点整合
*   运行时调用（使用 Pry 作为开发者控制台或调试器）
*   能够查看和重播历史记录

它也在 2012 年 7 月 14 日发布的 0.9.10 版中得到了非常积极的开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T17:57:49.520

即使你尝试*撬*它也会出错。Ubuntu 与 ruby​​ 相处得并不好，你需要一些额外的库。以下是您可以执行的操作：

```
sudo apt-get install libncurses5-dev libreadline5-dev

uninstall your current ruby version.
sudo apt-get install libreadline-dev
rvm install 1.9.3-p194 --with-readline-dir=/usr/include/readline 
```

这将解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T17:21:06.813

在通过 RVM 安装 Ruby 1.9.3*之前*，您可能没有安装必要的`libreadline-dev`（或者类似的，我忘记了确切的 Ubuntu 名称） 。我建议使用安装必要的 readline 开发库，然后通过 RVM 重新安装 Ruby。*`apt`*

# php - 如何同时使用 $_GET 和 # 锚链接？

> ID：11617022
> 
> 赞同：2
> 
> 时间：2012-07-23T16:58:44.387
> 
> 标签：php, get, anchor

我有一个表单，它使用 $_GET 重定向到原始表单页面以显示任何错误。但表单本身位于页面下方。两者的正确使用方法是什么？

我试过了`www.abc.com/index.php?error=missing_input&#review`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:10:43.760

是的，它肯定[对我](http://codepad.viper-7.com/0v3ufk)有用：

```
<?php

if (!isset($_GET['submitted'])) {
    echo "<form action='#fragment'><input type='text' name='text'><input type='submit' name='submitted' value='Do it'></form>";
} else {
    echo "<div style='height: 800px'>Vertical Padding<br>Your text was: {$_GET['text']}</div><div id='fragment'>This is the fragment</div>";
} 
```

如果它不适合您，我怀疑您正在生成的页面上没有具有参考 ID 的元素，或者您通常对 URL 片段锚的工作方式有错误的想法。

试试这个简单的代码，如果你有任何问题，请回来找我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T17:09:05.257

有关rfc3986 规范， 请参阅此链接：[http ://www.ietf.org/rfc/rfc3986.txt。](http://www.ietf.org/rfc/rfc3986.txt)

```
 foo://example.com:8042/over/there?name=ferret#nose
     \_/   \______________/\_________/ \_________/ \__/
      |           |            |            |        |
   scheme     authority       path        query   fragment
      |   _____________________|__
     / \ /                        \
     urn:example:animal:ferret:nose 
```

尝试删除“missing_input”之后的“&”，看看是否有效。

# sql - 更新表中每个条件的一条记录

> ID：11617023
> 
> 赞同：0
> 
> 时间：2012-07-23T16:58:53.723
> 
> 标签：sql, oracle

我查看了这个帖子，我以为我会在那里找到我的答案，但不幸的是没有......

[Oracle 中的 UPDATE 语句使用 SQL 或 PL/SQL 仅更新第一个重复行](https://stackoverflow.com/questions/244671/update-statement-in-oracle-using-sql-or-pl-sql-to-update-first-duplicate-row-onl)

如果我们的客户没有选择默认电子邮件地址，我需要更新该值。

如果客户还没有默认电子邮件，则以下语句会更新该表的所有记录：

```
update si_contactemails 
set ISDEFAULT = 'Y'
where entityid in
(select customerid from si_customers where custstatus = 'A' and deleted = 0)
and entityid in (select entityid from si_contactemails group by entityid having MAX(ISDEFAULT) = 'N') 
```

但是如果客户碰巧在 si_contactemails 表中有多个条目，我只需要更新该客户的第一条记录，只能有一个默认值。

我尝试了在上面提到的文章中找到的以下添加，但它只更新所有条件都为真的第一条记录 - 如何更新条件为真的所有记录？

```
update si_contactemails 
set ISDEFAULT = 'Y'
where entityid in
(select customerid from si_customers where custstatus = 'A' and deleted = 0)
and entityid in (select entityid from si_contactemails group by entityid having MAX(ISDEFAULT) = 'N')
AND rowid = (SELECT min(rowid) 
                 FROM   si_contactemails 
                 WHERE entityid in (select min(entityid) from si_contactemails group by entityid having MAX(ISDEFAULT) = 'N')) 
```

任何输入表示赞赏:-)

非常感谢，

斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:11:02.073

这是一种方法：

```
UPDATE si_contactemails
   SET isdefault = 'Y'
 WHERE rowid IN
        ( SELECT MIN(rowid)
            FROM si_contactemails
           WHERE entityid IN
                  ( SELECT customerid
                      FROM si_customers
                     WHERE custstatus = 'A'
                       AND deleted = 0
                    MINUS
                    SELECT entityid
                      FROM si_contactemails
                     WHERE isdefault = 'Y'
                  )
           GROUP
              BY entityid
        )
; 
```

`rowid`它为`si_contactemails`每个客户准确找到一个(1) 具有状态`A`且未被删除且 (2) 在 中没有默认记录的客户`si_contactemails`。然后它更新那组`rowid`s 中的每条记录。

（免责声明：未经测试。）

# php - 'IF' 语句不起作用？

> ID：11617027
> 
> 赞同：-2
> 
> 时间：2012-07-23T16:59:16.487
> 
> 标签：php, if-statement, boolean

当我打印出整数（1 或 0）时，所有迭代（在这种情况下有 3 个）都会打印出正确的数字。第一个和第二个返回 1，最后一个返回 0。但是，'if' 语句似乎无论如何都显示了其中的所有内容。我究竟做错了什么？

下面的所有代码都在一个更大的“for”循环中。

```
$yn = 0;

if(!in_array($pos, $blocks)){
    $blocks[$x] = $pos;
    $x++;
    $yn = 1;
}
print_r($blocks);

print "YN: ".$yn; # this prints out 1, 1 and 0 on the last iteration

if(yn){
        # show some stuff (is displayed in all three iterations, but it shouldn't be on the last)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:00:32.030

尝试：

```
if($yn){ 
```

PHP 被解释`yn`为一个字符串，而不是你应该使用的变量。

# java - 表分区的抽象层 - JPA

> ID：11617033
> 
> 赞同：2
> 
> 时间：2012-07-23T16:59:36.940
> 
> 标签：java, postgresql, eclipselink, partitioning, openjpa

## 事实

*   数据库：PostgreSQL（最新）
*   编程语言：Java

## 问题陈述（简化）

我们有 2 个表格 - 概述和详细信息。“概述”中可能有数百万行，并且“概述”的每一行都可以在“详细信息”中与数百万行相关联。外键 details.overview_id 指的是overview.id。大多数查询都是通用形式

`SELECT * FROM details WHERE overview_id = xxx AND details.id > yyy AND details.id < zzz;`

如果我们有一个单独的表来查询详细信息，那么查询将太慢（尽管关于详细信息的查询几乎总是在主键上）。

更多关于 DB 活动的性质：INSERT 和 UPDATE 概述很少发生。INSERT 细节发生得很快，而同一张表上的 UPDATE 几乎从不发生，有时会发生批量 DELETE。

## 我们已经拥有的

过去，我们使用原始 SQL 针对“概览”中的每一行对表“详细信息”进行分区。（实际上，我们实际上并没有进行分区，而是基于模板创建了新表。这些表没有任何名为 overview_id 的列（节省存储空间），而是我们有一个单独的表来完成 overview.id 和特定分区表的表名。）因此，正如您所理解的，分区必须动态生成，因为在概览中插入了新行，并且在从概览中删除行时删除了分区。所有这些都在应用程序内部进行管理。应用程序与数据库的交互速度非常快，但应用程序代码相当复杂，难以维护。此外，到处都是原始 SQL，

## 当前目标

目前，我们正在探索一种机制的选项，通过这种机制可以在幕后发生这种分区 - 可能由 JPA 提供者（我知道这不是 JPA 规范的一部分），以便我们可以专注于应用程序，而底层框架/层负责可扩展性问题。

我查看了 openJPA Slice 和 EclipseLink。它们都提供跨主机的分区（分片）管理。我们当然需要那个。但是**我们还需要在单个主机内进行分区管理**。但是，如果对此有更好或更优雅的解决方案，或者如果有完全不同的角度来看待这个问题，我会很高兴知道这一点。

我将感谢您提供的任何见解。

谢谢。
普拉杰什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:49:13.870

您是否考虑过使用 Postgres 的表分区？

[http://www.postgresql.org/docs/9.1/static/ddl-partitioning.html](http://www.postgresql.org/docs/9.1/static/ddl-partitioning.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:02:07.123

感谢大家迄今为止的评论/回答。我们决定坚持我们已经拥有的东西（参见“我们已经拥有的东西”部分），并稍作修改。

# regex - 正则表达式删除 标签但留下网址

> ID：11617034
> 
> 赞同：0
> 
> 时间：2012-07-23T16:59:41.150
> 
> 标签：regex

如果有人可以帮助我，我对正则表达式很垃圾，非常感激。

我想这将是一个艰难的过程 - 所以我也向任何能解决它的人致敬！

假设我们的文件包含以下格式的 2 个 html 标签：

```
abc1234
<a href="http://google.com">Some Text</a> <P>
<a href="http://www.google.com" rel="nofollow">Some Text</a>
abc1234 
```

我试图删除这些标签中的所有内容，除了 url（并留下其他文本），因此本文档中正则表达式的输出将是

```
abc1234
http://google.com <P>
http://www.google.com
abc1234 
```

有哪位大师能解决这个问题吗？我更喜欢一个正则表达式来处理这两种情况，但两个单独的也可以。

提前致谢/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:27:18.793

ScottStevens，众所周知，尝试用正则表达式解析 html 是很困难的，事实上，关于这个问题有相当[冗长的帖子。](https://stackoverflow.com/a/1732454)但是，如果这是唯一`<a>`采用的两种格式，那么这是解决问题的方法：

关于如何解决这个问题的第一个线索是两个标签都以 开头`<a href="`，并且你想把它去掉，为此，一个简单的 remove on`'<a href="'`就可以了，不需要正则表达式。

您的下一个线索是，有时，您的结束标签有时有`">...</a>`，有时有`" rel=...</a>`（从正则表达式的角度来看，rel= 和无关紧要）。现在注意`" rel="...</a>`它的某处包含一个`">...</a>`. 这意味着您可以`" rel="...</a>`分两步删除`" rel="...`，最多删除`">`，然后删除`">...</a>`。此外，为确保您仅删除 的一个标记`<a...>...</a>`，请添加附加约束，即在`...`中`">...</a>`，不能有任何`<a`.

那和[正则表达式备忘单](http://www.regular-expressions.info/reference.html)可以帮助您入门。

* * *

也就是说，您应该真正使用 html 解析器。[用于 PHP 的强大且成熟的 HTML 解析器](https://stackoverflow.com/questions/292926/robust-mature-html-parser-for-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:26:04.290

我是一名 Rubyist，所以我的示例将使用 Ruby。我建议使用两个正则表达式，只是为了保持直截了当：

```
url_reg = /<a href="(.*?)"/   # Matches first string within <a href=""> tag
tag_reg = /(<a href=.*?a>)/   # Matches entire <a href>...</a> tag 
```

您需要将带有第一个正则表达式的 URL 拉出并临时存储，然后将标记的全部内容（与 tag_reg 匹配）替换为存储的 URL。

您也许可以将其结合起来，但这似乎不是一个好主意。您从根本上改变（通过删除）原始标签，并用其内部的东西替换它。如果您尽可能地将这两个步骤分开，那么出错的可能性就会降低。

**Ruby 中的示例**

```
def replace_tag(input)
  url_reg = /<a href="(.*?)"/    # Match URLS within an <a href> tag
  tag_reg = /(<a href=.*?a>)/     # Match an entire <a href></a> tag

  while (input =~ tag_reg) # While the input has matching <a href> tags
    url = input.scan(url_reg).flatten[0]  # Retrieve the first URL match
    input = input.sub(tag_reg, url)       # Replace first tag contents with URL
  end

  return input
end

File.open("test.html", "r") do |html_input|       # Open original HTML file
  File.open("output.html", "w") do |html_output|  # Open an output file
    while line = html_input.gets                  # Read each line
      output = replace_tag(line)                  # Perform necessary substitutions
      html_output.puts(output)                    # Write output lines to file
    end
  end
end 
```

即使你不使用 Ruby，我希望这个例子是有意义的。我在您给定的输入文件上对此进行了测试，它产生了预期的输出。

# jsf-2 - 处于不可选择状态的 PrimeFaces 复选框树节点没有图标？

> ID：11617035
> 
> 赞同：1
> 
> 时间：2012-07-23T16:59:42.503
> 
> 标签：jsf-2, primefaces, treenode

我正在使用 PrimeFaces，并创建了一个复选框树。

有些节点没有子节点，所以我将它们设置为不可选择：

```
 node.setSelectable( false); 
```

问题是，不可选择的节点根本不显示复选框。他们没有这个“禁用”状态的图标。它只是空旷的空间，看起来并不好。

这是预期的行为还是我错过了什么？

ps

[截图在这里。](http://www.2shared.com/photo/6JxamxWY/PrimeFaces-disabled_tree_node_.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:22:35.367

这是预期的行为。在未来的版本中可能会更改。

# java - DatagramSocket 在 Android 上因“再试一次”而失败

> ID：11617036
> 
> 赞同：1
> 
> 时间：2012-07-23T16:59:43.420
> 
> 标签：java, android, sockets, udp

我正在尝试`DatagramPackets`在我的 Android 应用程序中发送（UDP）：

```
//create a byte to receive data
mClientSocket = new DatagramSocket();
byte[] receiveData = new byte[MAX_RECEIVE_DATA_SIZE_BYTES];
DatagramPacket receivePacket = new DatagramPacket(receiveData,
        receiveData.length);

// Set a receive timeout
mClientSocket.setSoTimeout(timeout);

// receive the packet
mClientSocket.receive(receivePacket);

return new String(receivePacket.getData(), 0,
        receivePacket.getLength()); 
```

我收到以下错误：

> 再试一次

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:54:36.063

那么发送UDP你需要类似的东西：

服务器：

```
String  messageStr="Hello Android!";
int server_port = 12345;
DatagramSocket  s = new DatagramSocket ();
InetAddress  local = InetAddress .getByName("192.168.1.102");
int msg_length=messageStr.length();
byte[] message = messageStr.getBytes();
DatagramPacket  p = new DatagramPacket (message, msg_length,local,server_port);
s.send(p); 
```

客户：

```
String  text;
int server_port = 12345;
byte[] message = new byte[1500];
DatagramPacket  p = new DatagramPacket (message, message.length);
DatagramSocket  s = new DatagramSocket (server_port);
s.receive(p);
text = new String (message, 0, p.getLength());
Log.d("Udp tutorial","message:" + text);
s.close(); 
```

**参考：**

*   [简单的 UDP 通信示例](http://www.helloandroid.com/tutorials/simple-udp-communication-example)

# jquery - jQuery变量和执行延迟

> ID：11617039
> 
> 赞同：1
> 
> 时间：2012-07-23T16:59:53.530
> 
> 标签：jquery

首先，很抱歉标题混乱。我在 jQuery 中遇到了一个愚蠢的问题。这是我的代码：

```
$j('.parent').hover(function(){
     var newWidth = $j(this).find('img').length * 70; // I need number of images within parent and multiply it by 70
     $j(this).stop().animate({'width':newWidth},700); // <-- This does not work
}, function(){
     $j(this).stop().animate({'width':'70'},700); // Back to original width
}); 
```

但是没有动画。如果我提醒 newWidth，它会给我正确的答案。我怀疑动画是在将值分配给 newWidth 时同时执行的，因此没有任何反应。我是否需要在分配变量和执行动画之间添加延迟。还有另一种有效的方法吗？

更新： .parent 的 css 是**内联**的，它如下：

```
element.style {
background-color: #000000;
border-color: #CCCCCC;
border-radius: 0 0 0 0;
border-style: solid;
border-width: 0;
clear: both;
height: 75px;
overflow: hidden;
padding: 0;
position: relative;
width: 70px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:12:35.910

您要更改哪个宽度？`.parent`宽度还是`.parent img`宽度？因为您更改了`this`元素的宽度，即`.parent`. 所以它不会为图像设置动画。

你的代码工作得很好：http: [//jsfiddle.net/WouterJ/QvmBa/](http://jsfiddle.net/WouterJ/QvmBa/)

# php - Grocery CRUD 未排序或搜索结果且 set_model 值未分页

> ID：11617044
> 
> 赞同：2
> 
> 时间：2012-07-23T17:00:05.137
> 
> 标签：php, codeigniter, grocery-crud

我正在使用 Grocery CRUD 来显示我的搜索结果。结果显示正确，但按列搜索和排序似乎不起作用。

其次..我使用 set_model 来使用我的模型来抓取数据..

```
function get_list()
{
    $name = $this->session->userdata('username');

    $progress=$this->db->query("SELECT * FROM (SELECT feeds.url,feeds.id,feeds.SalesID,sales_log.date, sales_log.sales_prob, sales_log.current_stage, sales_log.id AS logid FROM feeds LEFT JOIN sales_log ON sales_log.leadid = feeds.id WHERE feeds.SalesID = '$name' and feeds.archived = 0 ORDER BY sales_log.id DESC )a group by a.url order by logid desc");

    $results_array=$progress->result();

    return $results_array;        
} 
```

详细信息显示在 crud 表中，但它显示该页面中的所有记录 (574)。细节没有被分页。如何只显示 25 条记录而其他记录分页？以及排序/搜索功能也无法正常工作

有人可以建议我如何解决这些问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:00:35.677

尝试查看 Web 浏览器的 javascript 控制台。听起来您可能没有正确链接到 Javascript 或类似的东西。

# facebook - Facebook Open Graph Scraping URL

> ID：11617046
> 
> 赞同：0
> 
> 时间：2012-07-23T17:00:12.850
> 
> 标签：facebook, url, redirect, facebook-opengraph, scraper

我正在尝试开发“想要”和“拥有”按钮。

如果我使用[Facebook 调试工具](http://developers.facebook.com/tools/debug/)，它会告诉我最终 URL 是主页，这是因为页面已被重定向，这是我不想要的。我希望抓取获取的 URL。

由于最终 URL**不是**项目页面，因此抓取的信息不正确，并且调试工具抱怨缺少元数据等。我相信正确的信息在项目页面上，但由于重定向，不正确的信息是解析。

我的问题是：

1）为什么会这样？-*答案：尾部斜线违反了我们的 ISAPI 规则*

2）我该如何解决？-*答：删除尾部斜杠或更新 ISAPI 规则*

3) 我可以强制抓取工具使用特定的 URL 并忽略任何重定向吗？我正在使用 asp.net，因此任何示例都将不胜感激。

正确的页面之前被刮掉了，但现在它没有，我真的不知道是什么改变了这个......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:16:21.633

根据调试工具，当 Facebook 尝试抓取您的页面时，您的页面上有一个 302 重定向。

`URLS REMOVED`

您需要找出发生这种情况的原因并禁用它。结果导致 Facebook 抓取了错误的 URL。修复后，您的页面应该被正确抓取。

# xcode - Boost 在 Xcode 上的线程组

> ID：11617047
> 
> 赞同：3
> 
> 时间：2012-07-23T17:00:14.747
> 
> 标签：xcode, boost, boost-thread

在我的项目中遇到错误后，我试图使用 C++ 在 Xcode (4.2) 上运行一个小型测试程序。

```
#include <boost/thread.hpp>
#include <boost/bind.hpp>    

int main (int argc, const char * argv[])
{
    boost::thread_group tg;
    return 0;
} 
```

但是整个程序构建失败，输出错误：

```
Undefined symbols for architecture x86_64:
  "boost::thread::~thread()", referenced from:
      boost::thread_group::~thread_group()in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

然后我尝试使用

```
thread_group * tg = new thread_group(); 
```

编译没有问题，直到我尝试调用

```
tg->join_all(); 
```

编译器输出错误的地方，例如：

```
Undefined symbols for architecture x86_64:
  "boost::detail::get_current_thread_data()", referenced from:
      boost::detail::interruption_checker::interruption_checker(_opaque_pthread_mutex_t*, _opaque_pthread_cond_t*)in main.o
  "boost::this_thread::interruption_point()", referenced from:
      boost::condition_variable::wait(boost::unique_lock<boost::mutex>&) in main.o
  "boost::this_thread::disable_interruption::disable_interruption()", referenced from:
      boost::shared_mutex::lock_shared()      in main.o
  "boost::this_thread::disable_interruption::~disable_interruption()", referenced from:
      boost::shared_mutex::lock_shared()      in main.o
  "boost::thread::join()", referenced from:
      boost::thread_group::join_all()     in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

有谁知道如何解决这些问题？我一直在使用其他功能，例如 BOOST_FOREACH，没有任何问题。但是在尝试使用线程时遇到这些。

我需要：

*   在我的“其他链接器标志”上指定标志？
*   重新安装升压或某种？目前我正在使用 Boost 1.49.0，使用 homebrew 安装（即 sudo brew install boost）

还是我需要包括任何其他特定配置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:04:22.403

The boost thread library has an actual library object you need to link against (`-lboost_thread` or sometimes `-lboost_thread-mt`).

# javascript - 单击关闭时仅停止一个下拉切换

> ID：11617048
> 
> 赞同：46
> 
> 时间：2012-07-23T17:00:24.153
> 
> 标签：javascript, drop-down-menu, twitter-bootstrap

我有一个按钮下拉列表（只有一个，不是全部），在其中，我想要几个输入字段，人们可以在其中输入内容，而不会在您单击它时立即隐藏下拉列表（但如果你在它外面点击）。

我创建了一个 jsfiddle：http: [//jsfiddle.net/denislexic/8afrw/2/](http://jsfiddle.net/denislexic/8afrw/2/)

这是代码，它是基本的：

```
<div class="btn-group" style="margin-left:20px;">
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    Action
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <!-- dropdown menu links -->
      <li>Email<input type="text" place-holder="Type here" /></li>
      <li>Password<input type="text" place-holder="Type here" /></li>
  </ul>
</div>​ 
```

所以基本上，我希望它不会在单击下拉菜单时关闭（但在单击操作按钮或在下拉菜单之外关闭）。到目前为止，我最好的猜测是给它添加一个类并尝试做一些 JS，但我想不通。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-07-23T17:41:12.480

问题是当您单击其他任何地方时，boostrap 下拉 jQuery 插件会关闭下拉菜单。您可以通过捕获下拉菜单元素上的单击事件并阻止它到达 body 元素上的单击事件侦听器来禁用该行为。

只需添加

```
$('.dropdown-menu').click(function(event){
     event.stopPropagation();
 });​ 
```

jsfiddle 可以在[这里找到](http://jsfiddle.net/8afrw/6/)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-02-07T18:38:04.277

我知道这个问题本身不是针对 Angular 的，但是对于使用 Angular 的任何人，您都可以从 HTML 传递事件并通过 $event 停止传播：

```
<div ng-click="$event.stopPropagation();">
    <span>Content example</span>
</div> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-23T21:25:31.697

实际上，如果你在 Angular.js 中，为它创建一个指令会更优雅：

```
app.directive('stopClickPropagation', function() {
    return {
        restrict: 'A',
        link: function(scope, element) {
            element.click(function(e) {
                e.stopPropagation();
            });
        }
    };
}); 
```

然后，在下拉菜单中，添加指令：

```
<div class="dropdown-menu" stop-click-propagation> 
    my dropdown content...
<div> 
```

特别是如果您想停止多个鼠标事件的传播：

```
...
element.click(function(e) {
    e.stopPropagation();
});

element.mousedown(...
element.mouseup(...
... 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-13T06:54:59.057

另一个快速解决方案，只需将`onclick`属性添加到具有类的 div `dropdown-menu`：

```
<div class="dropdown-menu" onClick="event.stopPropagation();">...</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-23T13:57:35.963

在尝试了很多技术之后，我发现最好的一种，它不会导致任何缺点，这甚至很简单：

```
$(document)
.on( 'click', '.dropdown-menu', function (e){
    e.stopPropagation();
}); 
```

这使您还可以对下拉列表中的内部元素进行一些实时绑定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-12T00:30:42.823

此外，除非单击按钮元素，否则防止单击

```
$('.dropdown-menu').click(function(e) {
    if (e.target.nodeName !== 'BUTTON') e.stopPropagation();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-08T10:57:24.017

我遇到了这个问题，但在反应组件中 - 反应组件位于带有表单的引导下拉菜单中。每次单击下拉列表中的元素时，它都会关闭，从而导致在表单中输入任何内容时出现问题。

由于立即触发 jquery 事件并在此之后尝试进行干预，因此通常不会在 react 应用程序中`e.preventDefault()`工作。`e.stopPropagation()`

下面的代码允许我解决我的问题。

```
stopPropagation: function(e){
    e.nativeEvent.stopImmediatePropagation();
} 
```

或 ES6 格式

```
stopPropagation(e){
    e.nativeEvent.stopImmediatePropagation();
} 
```

希望这对任何在尝试将其用于反应时挣扎于其他答案的人有用。

# sitecore - 应用更改后，sitecore 工作流程未重置

> ID：11617054
> 
> 赞同：1
> 
> 时间：2012-07-23T17:00:48.930
> 
> 标签：sitecore, sitecore6, sitecore-workflow

安装自定义工作流程后我注意到的是，项目仅在首次创建时才通过工作流程。在它们达到最终状态后，对项目的进一步修改不会将其送回“草稿”。关于我可能忽略的任何想法？我需要一些特别的东西来保存事件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T17:26:36.690

您是否正在以管理员身份进行更改？那些不经过工作流程。

# sql-server - 在数据库中查找指定类型的所有列

> ID：11617056
> 
> 赞同：1
> 
> 时间：2012-07-23T17:00:54.830
> 
> 标签：sql-server, database

我有 SQL Server 2008 R2。我想获取这些列所在的列名和表名。我想显示指定类型。例如：假设我想查看所有 tinyint 列。结果应如下所示：

```
ColumnName|TableName
orderID   |Orders
clientID  |Orders
refID     |discounts 
```

是否可以编写查询来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:05:28.457

您将使用这些[`system`](http://msdn.microsoft.com/en-us/library/aa260604%28v=sql.80%29.aspx)表来获取这些数据：

```
SELECT OBJECT_NAME(c.OBJECT_ID) TableName
    , c.name ColumnName
FROM sys.columns c
JOIN sys.types t 
    ON c.user_type_id=t.user_type_id
WHERE t.name = 'tinyint' 
ORDER BY c.OBJECT_ID; 
```

可以找到有关此的其他详细信息：

[SQL SERVER – 2005 – 列出所有具有特定数据类型的列](http://blog.sqlauthority.com/2007/08/09/sql-server-2005-list-all-the-column-with-specific-data-types/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:06:11.240

尝试这个..

```
select ao.name objectname,ac.name columnname,t.name usertypename from sys.all_columns  ac inner join sys.types t
on ac.user_type_id  = t.user_type_id
inner join sys.all_objects ao
on ac.object_id = ao.object_id
and ao.type = 'U'
where t.name ='tinyint' 
```

# javascript - 如何定位以前的 $(this)？

> ID：11617060
> 
> 赞同：2
> 
> 时间：2012-07-23T17:01:11.120
> 
> 标签：javascript, jquery

我有一个在用户单击链接时触发的函数。当他们点击另一个链接时，我想更改他们点击的第一个链接。我该怎么做呢？这是我到目前为止所拥有的：

```
$('a').click(function(){
  //some code ...
  if ( $(this).attr('id') != last.attr('id') ) {
    $('a').click(function()
      /*the original $this*/.parent().parent().quickFlipper({refresh: 0});
      /*the original last*/.parent().parent().quickFlipper({refresh: 0});
    });
    var that = this;
    var that2 = last;
    setTimeout(function(){
      $(that).parent().parent().quickFlipper({refresh :0});
      $(that2).parent().parent().quickFlipper({refresh :0});
    }, 1500);
  //some more code ...
}); 
```

在此先感谢您，如果您不确定我要完成的工作，请提出任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:07:30.310

这是使用闭包的好时机。

```
$('a').click((function () {

   //private
   var lastClicked;

   return function () {
      //your code

      if(lastClicked) {
         //do something to the last clicked element
      }

      lastClicked = this;
   };
})()); 
```

小提琴：http: [//jsfiddle.net/iambriansreed/Mus6N/](http://jsfiddle.net/iambriansreed/Mus6N/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:05:36.677

最后使用全局变量。

就像是

```
$(function(){
    var lastClick;
    $('a').click(function(){
        //do stuff to last click here
        lastClick = $(this); //make this at the bottom
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:04:26.023

```
var previousElement;

$('a').click(function(){
  //some code ...
  previouseElement = ($this);
  if ( $(this).attr('id') != last.attr('id') ) {
    $('a').click(function()
      $(this).parent().parent().quickFlipper({refresh: 0});
      previousElement.parent().parent().quickFlipper({refresh: 0});
    });
    var that = this;
    var that2 = last;
    setTimeout(function(){
      $(that).parent().parent().quickFlipper({refresh :0});
      $(that2).parent().parent().quickFlipper({refresh :0});
    }, 1500);
  //some more code ...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T17:04:38.950

```
var lastClicked = null;

$('a').click(function(){
  //some code ...
  if (lastClicked && $(this).attr('id') != lastClicked.attr('id') ) {
       $(this).parent().parent().quickFlipper({refresh: 0});
      lastClicked.parent().parent().quickFlipper({refresh: 0});

    lastClicked = $(this);
  }
}); 
```

像那样？

# asp.net - 数据绑定 DropDownList

> ID：11617070
> 
> 赞同：-3
> 
> 时间：2012-07-23T17:02:17.553
> 
> 标签：asp.net, ms-access

我有一个字段“oStatus”，我在 MS Access 中设置为列表框值列表，行源：已取消；订购；待办的; 处理，我已经将我的 DropDownList 控件配置到数据源。

但是，当我单击网页中的下拉菜单时，控件仅显示字段的结果（例如订购）。我怎样才能让它在下拉列表中显示其他项目？（已取消、待处理、处理中等）

```
<asp:DropDownList ID="DropDownList1" runa4="server" 
                        DataSourceID="AccessDataSource7" DataTextField="oStatus" 
                        DataValueField="oStatus">
                    </asp:DropDownList>
                    <asp:AccessDataSource ID="AccessDataSource7" runat="server" 
                       DataFile="~/App_Data/DB.mdb" 
                        SelectCommand="SELECT [oStatus] FROM [ordersTable] WHERE (oOrderNo = ?)">
                        <SelectParameters>
                            <asp:QueryStringParameter Name="?" QueryStringField="oOrderNo" />
                        </SelectParameters>
                    </asp:AccessDataSource> 
```

微软访问

字段：oStatus

行源类型：值列表

行来源：已取消；订购；待处理；处理中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:52:42.670

从您的代码来看，您似乎正在使用**订单的单一状态**作为数据源 - 这意味着您只会在下拉列表中获得一个项目。换句话说，您编写的查询只会返回一个项目（因为该行只能包含一个值）。

您应该使用所有可能的选项填充下拉列表，然后选择与订单中的状态匹配的项目。不幸的是，我不知道您将如何使用`<asp:AccessDataSource>`控件来做到这一点，因为我从未使用过它。

选项应该静态填充...

```
<asp:DropDownList runat="server">
  <asp:ListValue value="1">Cancelled</asp:ListValue>
  ...
</asp:DropDownList> 
```

或者如果它们是数据库中的值，那么我猜你使用`<asp:AccessDataSource>`来填充它们，然后使用另一种方法根据`ordersTable`.

# scheme - 取出完美正方形

> ID：11617072
> 
> 赞同：-2
> 
> 时间：2012-07-23T17:02:24.013
> 
> 标签：scheme

你将如何编写一个代码来从列表中删除完美的正方形，只使用过滤器和整数？我相信这是内置的方案。例如。(take-out-perfect-squares '(1 2 9 16 5 64)) 应该返回 (2 5) 因为该列表中其他所有内容的平方根返回一个整数。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:27:23.600

```
(define remove-perfect-square-helper
  (lambda (x y)
    (if (null? x)
        (reverse y)
    (if (integer? (sqrt (car x)))
        (remove-perfect-square-helper (cdr x) y)
        (remove-perfect-square-helper (cdr x) (cons (car x) y))))))

(define remove-perfect-square
        (lambda (x)
          (remove-perfect-square-helper x '())))

(define x '(1 2 9 16 5 64))

(remove-perfect-square x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:50:25.587

```
(define (take-out-perfect-squares l)
  (cond ((null? l) '())
        ((integer? (sqrt (car l)))
         (take-out-perfect-squares (cdr l)))
        (else
         (cons (car l) (take-out-perfect-squares (cdr l)))))) 
```

# php - 使用 PHPExcel 循环工作表

> ID：11617077
> 
> 赞同：19
> 
> 时间：2012-07-23T17:02:55.773
> 
> 标签：php, for-loop, phpexcel, worksheet

我正在使用 PHPExcel 库来读取 Excel 文件并对其执行处理。我想遍历每个工作表。我检查了文档，我能找到的只是更改活动工作表索引或仅加载指定的工作表。如何循环浏览所有工作表？

感谢您的任何帮助。

这是文档的循环示例，供参考：

```
<?php
$objReader = PHPExcel_IOFactory::createReader('Excel2007');
$objReader->setReadDataOnly(true);

$objPHPExcel = $objReader->load("test.xlsx");
$objWorksheet = $objPHPExcel->getActiveSheet();

echo '<table>' . "\n";
foreach ($objWorksheet->getRowIterator() as $row) {
  echo '<tr>' . "\n";

  $cellIterator = $row->getCellIterator();
  $cellIterator->setIterateOnlyExistingCells(false); // This loops all cells,
                                                     // even if it is not set.
                                                     // By default, only cells
                                                     // that are set will be
                                                     // iterated.
  foreach ($cellIterator as $cell) {
    echo '<td>' . $cell->getValue() . '</td>' . "\n";
  }

  echo '</tr>' . "\n";
}
echo '</table>' . "\n";
?> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-23T17:12:29.890

我认为你可以做到这一点。增加活动工作表直到没有任何剩余，然后对每个工作表执行您想要的操作：

```
<?php

    $objReader = PHPExcel_IOFactory::createReader('Excel2007');
    $objReader->setReadDataOnly(true);

    $objPHPExcel = $objReader->load("test.xlsx");

    $i = 0;
    while ($objPHPExcel->setActiveSheetIndex($i)){

        $objWorksheet = $objPHPExcel->getActiveSheet();
        //now do whatever you want with the active sheet
        ...
        $i++;

    }

    ...

?> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-23T17:09:18.750

您正在使用迭代器。您是否查看 /Tests 目录中的迭代器代码示例？如果是这样，您可能已经看到对 WorksheetIterator 的引用

或者，PHPExcel 对象的 getAllSheets() 方法返回一个工作表数组，它允许您使用 foreach 循环

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-18T15:16:09.283

这是一个有用的函数，用于迭代工作表并为每个单元格值返回一个单元格值数组，其中工作表标题作为数组键：

```
function getSheets($fileName) {
    try {
        $fileType = PHPExcel_IOFactory::identify($fileName);
        $objReader = PHPExcel_IOFactory::createReader($fileType);
        $objPHPExcel = $objReader->load($fileName);
        $sheets = [];
        foreach ($objPHPExcel->getAllSheets() as $sheet) {
            $sheets[$sheet->getTitle()] = $sheet->toArray();
        }
        return $sheets;
    } catch (Exception $e) {
         die($e->getMessage());
    }
} 
```

# c++ - 为什么这个 CRTP 不能编译？

> ID：11617078
> 
> 赞同：0
> 
> 时间：2012-07-23T17:02:57.057
> 
> 标签：c++, templates

> **可能重复：**
> [使用 CRTP 和 typedef 的“继承”类型](https://stackoverflow.com/questions/2748969/inherited-types-using-crtp-and-typedef)

```
template<typename T>
struct A {
  typename T::Sub  s;
};

struct B : A<B> {
  struct Sub {};
}; 
```

Clang 正在报告此错误：

```
todo.cc:3:15: error: no type named 'Sub' in 'B'
  typename T::Sub  s;
  ~~~~~~~~~~~~^~~
todo.cc:6:12: note: in instantiation of template class 'A<B>' requested here
struct B : A<B> {
           ^ 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:07:19.577

`B`是一个不完整的类，它请求实例化`A<B>`.

这意味着您只能`B`在模板方法中引用 on `A`，因为这些方法的实例化将延迟到`B`完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:15:53.220

由于`B`继承自`A<B>`,`A<B>`必须在 is*之前* `B`构造。

由于您使用的是 CRTP，这意味着它在构建`B`时是一个不完整的类。`A<B>`因此，编译器无法判断是否`B`有成员 field `Sub`，因此无法编译。

请注意，这一次 gcc 给出了一个更有意义的错误：

> $猫crtp.cpp

```
template<typename T>
struct A {
      typename T::Sub  s;
};

struct B : A<B> {
      struct Sub {};
}; 
```

> $ g++ -c crtp.cpp -o crtp.o

```
crtp.cpp: In instantiation of ‘A<B>’:
crtp.cpp:6:17:   instantiated from here
crtp.cpp:3:21: error: invalid use of incomplete type ‘struct B’
crtp.cpp:6:8: error: forward declaration of ‘struct B’ 
```

# php - 我们应该使用 PHP websocket 还是 Node.js？或者它们是完全不同的东西？

> ID：11617080
> 
> 赞同：1
> 
> 时间：2012-07-23T17:03:02.123
> 
> 标签：php, node.js, websocket

我是套接字和 NODE.js 领域的新手。如果它看起来很明显，我很抱歉。
我最近阅读了很多关于 NODE.js 的文章，但今天偶然发现了[Ratchet websocket](http://socketo.me/)。一个 php 组件库，可用于构建聊天应用程序和其他东西。它们之间有什么区别吗？我们什么时候应该使用节点或其他？它们是相似的还是完全不同的东西？有人可以对这个主题有所了解吗？我现在很黑暗吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:06:36.553

它们都能够运行 Web 套接字服务器。这纯粹是您希望在服务器端使用的内容、javascript 或 PHP 的偏好。

# ruby-on-rails-3 - rails s 或 bundle exec rails s

> ID：11617085
> 
> 赞同：7
> 
> 时间：2012-07-23T17:03:13.847
> 
> 标签：ruby-on-rails-3, bundler

在 rails 3 中确实`rails s`调用了 bundler，这样您就不需要`bundle exec rails s`或`bundle exec`需要`rails s`在您的应用程序 Gemfile 环境中运行？

***更新*** 据了解，`bundle exec`由于rake版本不同，应该在rake任务之前使用。有关详细信息，请参阅[http://railsapps.github.com/installing-rails-3-1.html 。](http://railsapps.github.com/installing-rails-3-1.html)这个问题是关于 rails 脚本的，例如：

```
rails s
rails server
rails c
rails console 
```

^应该`bundle exec`在这些 rails 脚本之前使用，还是 bundler 由 rails 命令调用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T17:16:16.127

你应该在 Rail >= 3.1 中得到这种行为，但是你需要小心，因为你可能使用的是旧版本的 rake：

> 使用命令 bundle exec rake 而不是 rake 是一种很好的做法，因此您将使用 gemfile 中指定的 Rake 版本（或 Gemfile.lock 文件中指定的依赖项）而不是默认版本。例如，运行 bundle exec rake db:migrate 而不是 rake db:migrate。
> 
> 您需要知道的：在安装 Rails 3.1 之前，请确保您使用 Rake 0.9.2.2（或更新版本）和 gem update rake。并使用 bundle exec rake 而不是 rake。

引自：[http ://railsapps.github.com/installing-rails-3-1.html](http://railsapps.github.com/installing-rails-3-1.html)

对于 rails 命令，它看起来正好相反：

> 不要在 rails 命令之前运行 bundle exec，rails 已经通过 Gemfile 检查了 Bundler 的存在，并根据它设置了所有内容，而没有 bundle exec 的开销。rails 命令是该规则的唯一例外。

引自：[https ://www.wyeworks.com/blog/2011/12/27/bundle-exec-rails-executes-bundler-setup-3-times/](https://www.wyeworks.com/blog/2011/12/27/bundle-exec-rails-executes-bundler-setup-3-times/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T18:36:08.840

[http://bundler.io/v1.5/rails3.html](http://bundler.io/v1.5/rails3.html) - “Rails 3 附带了对 bundler 的支持……Bundler 透明地管理您的依赖项！” 所以只需运行服务器

```
rails server 
```

# ios - 将 NSString 中的出现替换为 NSArray 中的出现

> ID：11617088
> 
> 赞同：1
> 
> 时间：2012-07-23T17:03:52.653
> 
> 标签：ios, nsstring, nsarray, nslog

我正在寻找一种在 iOS 应用程序中调试我的 SQLite 查询的快速方法。我有这样的事情：

```
NSString *sql = [NSString stringWithString: @"SELECT * FROM table WHERE foo = ? AND bar = ?"]; 
NSArray *params = [NSArray arrayWithObjects: @"baz", @"bat", nil];
NSLog(@"%@ %@", sql, params); 
```

我想知道是否有一个或两个行来用参数替换问号以使输出更具可读性。我***不是***在寻找输出有效 sql 的东西，而是寻找比我当前的 NSLog 更容易阅读的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:18:12.100

```
@interface NSString (SQLQueryDebugging)
- (NSString *)stringBySubstitutingParameters:(NSArray *)params forInstancesOfPlaceholder:(NSString *)placeholder;
@end

@implementation NSString (SQLQueryDebugging)

- (NSString *)stringBySubstitutingParameters:(NSArray *)params forInstancesOfPlaceholder:(NSString *)placeholder
{
    NSString *composedQuery = self;
    NSRange substitutionRange = [composedQuery rangeOfString:placeholder];
    NSInteger parameterIndex = 0;
    while(substitutionRange.length != 0)
    {
        NSString *currentParam = [params objectAtIndex:parameterIndex];
        composedQuery = [composedQuery stringByReplacingCharactersInRange:substitutionRange withString:currentParam];
        ++parameterIndex;
        NSInteger lastSubstitutionIndex = substitutionRange.location + [currentParam length];
        NSRange searchRange = NSMakeRange(lastSubstitutionIndex, [composedQuery length] - lastSubstitutionIndex);
        substitutionRange = [composedQuery rangeOfString:placeholder options:0 range:searchRange];
    }

    return composedQuery;
} 
```

把它放在某个地方，然后你可以得到你想要的：

```
NSString *completeSQL = [sql stringBySubstitutingParameters:params forInstancesOfPlaceholder:@"?"]; 
```

# amazon-s3 - 如何初始化 Jets3tNativeFileSystemStore

> ID：11617090
> 
> 赞同：0
> 
> 时间：2012-07-23T17:03:57.430
> 
> 标签：amazon-s3

我需要检查 S3 上是否存在存储桶，并具有以下代码：

```
public static final String S3_URI = "s3n://accessKey:secretKey";

FileSystem fs = new NativeS3FileSystem(new Jets3tNativeFileSystemStore(S3_URI, null));
if (!fs.exists(bucket)) {
     getLogger().error("The input directory '{}' does not exists.", bucket);
     return false;
} 
```

但eclipse抱怨无法将Jets3tNativeFileSystemStore解析为一个类型，并且imports语句抱怨org.apache.hadoop.fs.s3native.Jets3tNativeFileSystemStore不可见。检查了 Jets3tNativeFileSystemStore 的源代码，它是

```
class Jets3tNativeFileSystemStore implements NativeFileSystemStore {

  private S3Service s3Service;
  private S3Bucket bucket;
  ... 
```

这是否意味着这是一个私人课程？检查 S3 上是否存在存储桶的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:10:41.643

它是包私有的。您只能从同一个 java 包中访问它。尽管没有什么可以阻止您在该包中声明内容，但这是一个丑陋的 hack。是不是有一个静态方法`FileSystem`可以为任何 URL 提供适当的文件系统，包括 s3n://？

# c# - 在 switch 与字典中的 Func 值，哪个更快，为什么？

> ID：11617091
> 
> 赞同：58
> 
> 时间：2012-07-23T17:04:03.217
> 
> 标签：c#, dictionary, clr, switch-statement, cyclomatic-complexity

假设有以下代码：

```
private static int DoSwitch(string arg)
{
    switch (arg)
    {
        case "a": return 0;
        case "b": return 1;
        case "c": return 2;
        case "d": return 3;
    }
    return -1;
}

private static Dictionary<string, Func<int>> dict = new Dictionary<string, Func<int>>
    {
        {"a", () => 0 },
        {"b", () => 1 },
        {"c", () => 2 },
        {"d", () => 3 },
    };

private static int DoDictionary(string arg)
{
    return dict[arg]();
} 
```

通过迭代这两种方法并进行比较，我发现字典稍微快了一点，即使“a”、“b”、“c”、“d”被扩展为包含更多键。为什么会这样？

这与圈复杂度有关吗？是因为jitter只将字典中的return语句编译为本机代码一次吗？是不是因为字典的查找是 O(1)，而[switch 语句可能不是这种情况](https://stackoverflow.com/questions/44905/c-sharp-switch-statement-limitations-why)？（这些只是猜测）

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-23T17:29:10.200

简短的回答是 switch 语句以线性方式执行，而字典以对数方式执行。

在 IL 级别，一个小的 switch 语句通常被实现为一系列 if-elseif 语句，比较切换变量和每个 case 的相等性。因此，该语句将在与 myVar 的有效选项数量成线性比例的时间内执行；这些案例将按照它们出现的顺序进行比较，最坏的情况是所有比较都已尝试，最后一个匹配或不匹配。因此，对于 32 个选项，最坏的情况是它们都不是，代码将进行 32 次比较来确定这一点。

另一方面，字典使用索引优化的集合来存储值。在 .NET 中，字典基于 Hashtable，它具有有效的恒定访问时间（缺点是空间效率极差）。通常用于“映射”集合（如字典）的其他选项包括平衡树结构，如红黑树，它提供对数访问（和线性空间效率）。任何这些都将允许代码在集合中找到与正确“案例”相对应的键（或确定它不存在），这比 switch 语句可以做的快得多。

**编辑**：其他答案和评论者已经谈到了这一点，所以为了完整起见，我也会这样做。正如我最初推断的那样，Microsoft 编译器并不*总是*将 switch 编译为 if/elseif。它通常在少量案例和/或“稀疏”案例（非增量值，如 1、200、4000）的情况下这样做。对于较大的相邻案例集，编译器将使用 CIL 语句将开关转换为“跳转表”。对于大量稀疏情况，编译器可以实现二进制搜索以缩小范围，然后“遍历”少量稀疏情况或为相邻情况实现跳转表。

但是，编译器通常会选择性能和空间效率最佳折衷的实现，因此它只会在大量密集打包的情况下使用跳转表。这是因为跳转表在内存中需要一个它必须覆盖的案例范围的空间，这对于稀疏案例来说在内存方面是非常低效的。通过在源代码中使用 Dictionary，您基本上可以强制编译器使用；它会按照你的方式去做，而不是为了提高内存效率而牺牲性能。

因此，我希望在大多数情况下，可以在源代码中使用 switch 语句或 Dictionary 以在使用 Dictionary 时表现更好。无论如何，要避免 switch 语句中的大量情况，因为它们的可维护性较差。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-07-23T17:57:47.383

这是一个很好的例子，说明了为什么微基准可能会产生误导。C# 编译器会根据 switch/case 的大小生成不同的 IL。所以打开这样的字符串

```
switch (text) 
{
     case "a": Console.WriteLine("A"); break;
     case "b": Console.WriteLine("B"); break;
     case "c": Console.WriteLine("C"); break;
     case "d": Console.WriteLine("D"); break;
     default: Console.WriteLine("def"); break;
} 
```

生成对每种情况基本上执行以下操作的 IL：

```
L_0009: ldloc.1 
L_000a: ldstr "a"
L_000f: call bool [mscorlib]System.String::op_Equality(string, string)
L_0014: brtrue.s L_003f 
```

然后

```
L_003f: ldstr "A"
L_0044: call void [mscorlib]System.Console::WriteLine(string)
L_0049: ret 
```

即它是一系列的比较。所以运行时间是线性的。

但是，添加额外的情况，例如包括所有来自 az 的字母，会更改为每个生成的 IL：

```
L_0020: ldstr "a"
L_0025: ldc.i4.0 
L_0026: call instance void [mscorlib]System.Collections.Generic.Dictionary`2<string, int32>::Add(!0, !1) 
```

和

```
L_0176: ldloc.1 
L_0177: ldloca.s CS$0$0001
L_0179: call instance bool [mscorlib]System.Collections.Generic.Dictionary`2<string, int32>::TryGetValue(!0, !1&)
L_017e: brfalse L_0314 
```

最后

```
L_01f6: ldstr "A"
L_01fb: call void [mscorlib]System.Console::WriteLine(string)
L_0200: ret 
```

即它现在使用字典而不是一系列字符串比较，从而获得字典的性能。

换句话说，为这些生成的 IL 代码是不同的，这只是在 IL 级别。JIT 编译器可能会进一步优化。

**TL;DR**：所以这个故事的精神是查看真实数据和配置文件，而不是尝试基于微基准进行优化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T18:26:30.550

As with many questions involving compiler codegen decisions, the answer is "it depends".

Building your own hash table will probably run faster than compiler generated code in many cases because the compiler has other cost metrics it is trying to balance that you are not: primarily, memory consumption.

A hash table will use more memory than a handful of if-then-else IL instructions. If the compiler spit out a hash table for every switch statement in a program, memory use would explode.

As the number of case blocks in the switch statement grows, you will probably see the compiler produce different code. With more cases, there is greater justification for the compiler to abandon small and simple if-then-else patterns in favor of faster but fatter alternatives.

I don't know offhand if the C# or JIT compilers perform this particular optimization, but a common compiler trick for switch statements when the case selectors are many and mostly sequential is to compute a jump vector. This requires more memory (in the form of compiler generated jump tables embedded in the code stream) but executes in constant time. Subtract arg - "a", use result as index into jump table to jump to appropriate case block. Boom, yer done, regardless of whether there are 20 or 2000 cases.

A compiler is more likely to shift into jump table mode when the switch selector type is char or int or enum *and* the values of the case selectors are mostly sequential ("dense"), since these types can be easily subtracted to create an offset or index. String selectors are a little harder.

String selectors are "interned" by the C# compiler, meaning the compiler adds the string selectors values to an internal pool of unique strings. The address or token of an interned string can be used as its identity, allowing for int-like optimizations when comparing intern'd strings for identity / byte-wise equality. With sufficient case selectors, the C# compiler will produce IL code that looks up the intern'd equivalent of the arg string (hash table lookup), then compares (or jump tables) the interned token with the precomputed case selector tokens.

If you can coax the compiler into producing jump-table code in the char/int/enum selector case, this can execute faster than using your own hash table.

For the string selector case, the IL code still has to do a hash lookup so any performance difference from using your own hash table is probably a wash.

In general, though, you shouldn't dwell on these compiler nuances too much when writing application code. Switch statements are generally much easier to read and understand than a hash table of function pointers. Switch statements that are big enough to push the compiler into jump table mode are often too big to be humanly readable.

If you find a switch statement is in a performance hotspot of your code, and you have measured with a profiler that it has tangible performance impact, then changing your code to use your own dictionary is a reasonable tradeoff for a performance gain.

Writing your code to use a hash table from the start, with no performance measurements to justify this choice, is over-engineering that will lead to unfathomable code with an unnecessarily higher maintenance cost. Keep It Simple.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T17:58:15.000

默认情况下，字符串上的开关的实现类似于 if / else / if / else 构造。正如 Brian 所建议的，当它变大时，编译器会将开关转换为哈希表。Bart de Smet[在这个 channel9 视频中](http://channel9.msdn.com/Events/DevDays/DevDays-2011-Netherlands/Devdays041)展示了这一点，（开关在 13:50 讨论）

编译器没有针对 4 个项目执行此操作，因为它是保守的，以防止优化的成本超过收益。构建哈希表会花费一些时间和内存。

# xml - 使用 scala 解析 XML 不起作用

> ID：11617093
> 
> 赞同：-1
> 
> 时间：2012-07-23T17:04:09.750
> 
> 标签：xml, parsing, scala

这是我要解析的 XML：

```
val response = "<?xml version=\"1.0\" encoding=\"utf-8\"?><createCustomerProfileResponse xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"AnetApi/xml/v1/schema/AnetApiSchema.xsd\"><messages><resultCode>Error</resultCode><message><code>E00039</code><text>A duplicate record with ID 8386840 already exists.</text></message></messages><customerPaymentProfileIdList /><customerShippingAddressIdList /><validationDirectResponseList><string>1,1,1,This transaction has been approved.,0GR6L8,Y,2173844354,none,Test transaction for ValidateCustomerPaymentProfile.,0.00,CC,auth_only,,Test21,Rasmussen,,1234 test st,San Diego,CA,92107,,,,,none,none,none,none,none,none,none,none,0.00,0.00,0.00,FALSE,none,163C552C4DDDC440BAA35C76C47EB79D,,2,,,,,,,,,,,XXXX0027,Visa,,,,,,,,,,,,,,,,</string></validationDirectResponseList></createCustomerProfileResponse>" 
```

这是我的代码：

```
val source = Source.fromString(response)
val html = new HTML5Parser
val htmlObject = html.loadXML(source)

var resultCode = (htmlObject \ "createCustomerProfileResponse" \ "messages" \ "resultCode").text 
```

resultCode 始终为空。我究竟做错了什么？

编辑：

我更新了响应 XML。现在它只有一个根 XML。它仍然不起作用。

我还将 html5Parser 从 models.html5Parser 更改为 html5Parser。它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:25:23.770

你的结构的根已经是隐式的（`createCustomerProfileResponse`）所以你不需要选择它。

这应该有效：

```
var resultCode = (htmlObject \ "messages" \ "resultCode").text 
```

# c# - 如何使用 c# 登录 https 网站并保持会话？

> ID：11617094
> 
> 赞同：1
> 
> 时间：2012-07-23T17:04:09.467
> 
> 标签：c#, html-parsing, web-scraping

我正在尝试使用 C# 登录网站，然后转到网站的其他页面（需要登录）并获取 HTML，以便我可以使用 htmlagilitypack 进行解析。

我可以获取网页的 html 没问题，但我在部分登录时遇到了困难。

我启动了 Fiddler 并登录以查看会出现什么（我是 fiddler 的新手），列表中出现了两件事，都是 CONNECT （我期待它会是一个帖子，因为表单是 POST ？？？）

我想进入的网站是： [https ://amn.efanniemae.com/AMN/control](https://amn.efanniemae.com/AMN/control)

谁能指出我正确的方向/告诉我如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:07:11.193

您可能需要与网站所有者或文档核实，看看他们是否有任何自动登录方法。一些登录系统通过允许您以查询字符串发送信息（非常不安全）来支持自动登录，或者会为您提供要发送的正确 POST 值。请注意，自动 POST 登录可能与手动登录不同（即：将隐藏表单值设置为 AutoLogin 等），并且出于安全目的，某些站点不希望人们自动登录过程。

如果第一步成功，大多数网站都会向您发送一个包含会话信息的 cookie。因此，要在请求之间保持会话，您只需保存此 cookie，然后将其与下一个请求一起发送。使用 HttpWebRequest 对象，您可以使用 CookieContainer 属性来获取 cookie。

有关保存 cookie 的更多详细信息，请参阅此 SO 帖子，[如何使用 WebClient 登录站点？](https://stackoverflow.com/questions/4740752/how-to-login-with-webclient-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:08:01.153

在您在选项中启用之前，Fiddler 不会解密 ssl 流量。转到 Fiddler 选项，选中“解密 ssl 流量”，信任证书，您将看到流量。

# asp.net-mvc-3 - 条件动作link

> ID：11617096
> 
> 赞同：0
> 
> 时间：2012-07-23T17:04:13.123
> 
> 标签：asp.net-mvc-3, razor

我有这个允许用户支持索引视图的操作链接。

```
@Html.ActionLink("Opened Date", "Index", new {sortOrder= ViewBag.OpenedDateParm, currentFilter=ViewBag.CurrentFilter}) 
```

这是在控制器中处理的地方

```
ViewBag.OpenedDateParm = sortOrder == "Date" ? "OpenedDate desc" : "Date"; 
```

如果当前排序是 desc，我想按 asc 排序，反之亦然。我是否使用 ?: 来评估操作链接中的条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:17:13.840

在你的控制器动作中有这个。`asc`如果当前值为，它将 ViewBag.OpenedDateParm 设置为`desc`，反之亦然

```
 ViewBag.OpenedDateParm = sortOrder == "asc" ? "desc" : "asc"; 
```

在你看来，

```
 @Html.ActionLink("Opened Date", "Index","YourControllerName",
           new { sortOrder = ViewBag.OpenedDateParm,
                 currentFilter = ViewBag.CurrentFilter },null) 
```

# html - 更改到其他页面时，Twitter 引导下拉菜单不起作用？

> ID：11617100
> 
> 赞同：1
> 
> 时间：2012-07-23T17:04:24.267
> 
> 标签：html, css, grails, drop-down-menu, twitter-bootstrap

我正在使用 twitter 引导程序在我的网页中添加一个下拉菜单。但是只有当我在主页时下拉菜单才有效。当我导航到其他子页面时，它不再起作用。请让我知道如何使它在其他页面上工作。谢谢

# sharepoint - SharePoint 2010 搜索结果文件图标更改

> ID：11617102
> 
> 赞同：1
> 
> 时间：2012-07-23T17:04:28.087
> 
> 标签：sharepoint, xslt, search, sharepoint-2010

我正在尝试将 aspx 文件图标从默认图标更改为自定义图标。我为此部分编辑了 results.aspx 页面“获取的属性”的 xsl。我想确保为具有“LegalDocument”内容类型的项目显示 LegalDoc16.gif 图标。如果我不必正确配置语法，请告诉我。我可以进行类似 ContentType:"legaldocument" 的搜索，然后得到所有文件。所以我知道 contenttype 元数据属性正在被提取。请建议。

```
 <div class="srch-Icon" id="{concat($currentId,'_Icon')}"> 
    <xsl:choose>
        <xsl:when test="string(ContentType)='LegalDocument'">
            <img align="absmiddle" src="_layouts/images/LegalDoc16.gif" border="0" alt="{imageurl/@imageurldescription}" />
        </xsl:when>
        <xsl:otherwise>
            <img align="absmiddle" src="{imageurl}" border="0" alt="{imageurl/@imageurldescription}" />
        </xsl:otherwise>  
    </xsl:choose>   
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:24:00.943

我相信有一个错误会阻止使用 ContentType 元数据属性（请参阅[http://social.msdn.microsoft.com/Forums/en/sharepoint2010general/thread/cd059e1c-7af6-454c-8568-a22e7755ce8c](http://social.msdn.microsoft.com/Forums/en/sharepoint2010general/thread/cd059e1c-7af6-454c-8568-a22e7755ce8c)）

您需要创建一个新的托管元数据属性并将其映射到 ows_ContentType 已爬网属性（我称为我的 CType），然后进行完全爬网（您可能需要先删除索引）以使该属性在搜索索引中可用。

然后编辑搜索核心结果 web 部件并添加

```
 <Column Name="CType"/> 
```

到 Fetched Properties（在 Display Properties 下）之后`<columns>`

然后将您的 xml 更新为以下内容

```
<xsl:choose>
    <xsl:when test="ctype = 'LegalDocument'">
        <img align="absmiddle" src="_layouts/images/LegalLinkedDocument.gif" border="0" alt="{imageurl/@imageurldescription}" />
    </xsl:when> 
    <xsl:otherwise>
        <img align="absmiddle" src="{imageurl}" border="0" alt="{imageurl/@imageurldescription}" />
    </xsl:otherwise>
</xsl:choose> 
```

PS 这个问题可能与[我认为我的 xslt 格式可能不正确](https://stackoverflow.com/questions/11614131/i-think-my-xslt-may-not-be-formatted-correctly/11614315)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:26:24.463

一切都很好。在运行 powershell 之前我所要做的就是转到文档库并添加一个基于 Linked to Document 的文件（并删除测试上传文件）。之后它起作用了。

# c# - Linq 按文件名上的数字排序

> ID：11617117
> 
> 赞同：1
> 
> 时间：2012-07-23T17:05:36.943
> 
> 标签：c#, linq, algorithm

我正在尝试根据文件名订购一组文件。输入是一个目录，其中包含以下文件：

```
f0.vesperdp
f1.vesperdp
f2.vesperdp
....
f9.vesperdp
f10.vesperdp
f11.vesperdp
f12.vesperdp 
```

我已经构建了这个 LINQ 查询来对它们进行排序：

```
if (Directory.Exists(path))
{
    var directoryInfo = new DirectoryInfo(path);
    var files = from file in directoryInfo.EnumerateFiles()

    .Where(f => f.Extension == PAGE_FILE_EXTENSION)
                orderby file.Name.Substring(1, file.Name.Length - 1) ascending
                select file.FullName;

    return files.ToArray<string>();
} 
```

但他们回来了

```
f0.vesperdp
f1.vesperdp
f10.vesperdp
....
f19.vesperdp
f2.vesperdp
f20.vesperdp
f21.vesperdp 
```

我需要使用自然顺序（从 0 到 n as ）对它们进行排序`f0,f1,f2...,f9,f10,f11`如何修复我的 orderby 过滤器以匹配这个？或者，如果有其他方法，我该如何实现？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:07:55.857

它对字符串进行了正确排序，您*只需*将数字拉出，转换为整数，然后排序。这是未经测试的，但你明白了：

```
public int GetInt(string filename)
{
    int idx = file.Name.IndexOf(".");
    if(idx < 0) throw new InvalidOperationException();
    return Convert.ToInt32(filename.SubString(1, file.Name.Length - (idx - 1)));
} 
```

然后你的 orderby 部分：

```
.Where(f => f.Extension == PAGE_FILE_EXTENSION)
    orderby GetInt(file.Name) ascending
    select file.FullName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:11:52.317

Naspinski 在理论上是正确的，但这是代码中的解决方案。

```
if (Directory.Exists(path))
{
    var directoryInfo = new DirectoryInfo(path);
    var files = from file in directoryInfo.EnumerateFiles()

    .Where(f => f.Extension == PAGE_FILE_EXTENSION)
                orderby int.Parse(file.Name.Substring(1, file.Name.IndexOf('.')-1)) ascending
                select file.FullName;

    return files.ToArray<string>();
} 
```

order-by 子句基本上更改为提取前导 'f' 和第一个点之间的所有内容，从您的示例中，这将是一个数字字符串，然后将其解析为整数并显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:08:41.337

只需`int`从名称中提取值并`orderby`使用该值：

```
.Where(f => f.Extension == PAGE_FILE_EXTENSION)
        orderby int.Parse(file.Name.Substring(1, file.Name.Length -
                          file.Extension.Length-1)) ascending
        select file.FullName; 
```

# mysql - 在 MySQL 中获取日期的最后一秒

> ID：11617120
> 
> 赞同：2
> 
> 时间：2012-07-23T17:05:59.167
> 
> 标签：mysql, sql

我想在 MySql 5.1 中获取日期的最后一秒。例如，我的表格有一列“日期”。我想用日期的最后一秒设置另一个日期时间列。

就像是：

```
update <TABLE>
set datetime = DATETIME(YEAR(date), MONTH(date), DAY(date), 23,59,59) 
```

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:08:48.253

```
UPDATE tbl SET datetime = DATE(date) + INTERVAL 1 DAY - INTERVAL 1 SECOND 
```

# asp.net-mvc-3 - 在asp.net MVC中的Action退出之前获取执行时间

> ID：11617121
> 
> 赞同：0
> 
> 时间：2012-07-23T17:05:59.813
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我有一个动作如下，我试图追踪执行时间以消除延迟：

```
 public JsonResult DoSomething(IncidentReportSearchCriteria searchCriteria)
 {
    //search database with searchCriteria
    //get the data, do something with it
    //return success in JSON format
    return Json(new { success = true });
 } 
```

VS2010中是否有任何工具可以找出Action DoSomething完成执行需要多长时间？换句话说，就在最后一个`}`

我将时间写入日志，但在将结束时间写入日志和`}`. 带宽不是问题，因为我没有像你看到的那样返回太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:21:31.550

您可以创建一个操作过滤器来衡量执行时间。

```
public class ProfileAttribute: ActionFilterAttribute
{
   private StopWatch timer;

   public override void OnActionExecuting(ActionExceutingContext filterContext)
   {
      timer = StopWatch.StartNew();
   }

   public override void OnResultExecuted(ResultExecutedContext filterContext)
   {
      timer.Stop();
      filterContext.HttpContext.Response.Write("Action method elapsed time: " + timer.Elapsed.TotalMilliSeconds.ToString());
   }
}

[Profile]
public JsonResult DoSomething(IncidentReportSearchCriteria searchCriteria)
{
} 
```

# c# - 为现有控件设计新功能

> ID：11617124
> 
> 赞同：1
> 
> 时间：2012-07-23T17:06:08.803
> 
> 标签：c#, .net, design-patterns, decorator

伙计们，

我需要建议...我想在网格视图中实现“添加新项目”并从同一网格中“删除选定项目”，例如 Add(IEnumerable newItems)。

我不想实现派生的网格视图类，因为我寻找与网格没有强关系的灵活解决方案。

我正在研究在我的案例中使用“装饰器”模式，但我无法设计它：装饰器可以包含/聚合网格视图（这不是问题），但装饰器和网格视图没有通用界面 - 即“添加新项目” ' 是新功能，而网格视图没有。我可以在网格视图中实现空的“添加”方法并将其包装在装饰器中（作为替代方式）。

无论如何，我很高兴有任何想法来设计好的解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:40:57.450

[访问者模式](http://www.dofactory.com/Patterns/PatternVisitor.aspx)似乎非常适合您的问题。

> 它表示要对对象结构的元素执行的操作。Visitor 允许您定义一个新的操作，而无需更改它所操作的元素的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:08:39.297

我认为最简单的方法是扩展方法：

```
public static class GridViewExtensions
{
   public static void RemoveSelectedItems(this GridView grid)
   {
      // implementation goes here
   }

   public static void Add<T>(this GridView grid, IEnumerable<T> items)
   {
      // implementation goes here
   }
} 
```

使用比使用装饰的 GridView 更简单 - 你不需要创建装饰器，只需使用序号 GridView：

```
gridView.RemoveSelectedItems(); 
```

使用装饰器，您必须实现装饰对象的所有公共接口并将调用转移到它。这对 GridView 来说是很多工作。

更新：另一种解决方案 - 只需从 GridView 继承并将您的方法添加到派生类。使用您的 CustomGridView 而不是 GridView。

# android - Android：为什么快照和gpu是互斥的？

> ID：11617131
> 
> 赞同：30
> 
> 时间：2012-07-23T17:06:21.640
> 
> 标签：android, android-emulator

我尝试对模拟器使用快照和 gpu 支持。但模拟器拒绝启动：

> 模拟器：错误：此时快照和 gpu 是互斥的。请关闭其中一个，然后重新启动模拟器。

我想知道这些限制的原因是什么？在我看来，这不是合乎逻辑的冲突。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-07-17T10:30:05.840

Android 模拟器基于 QEMU，它必须模拟各种硬件设备，就像在真手机上运行的 Android 一样。具体来说，它模拟了一个名为“金鱼”的神话电话。

保存快照时，设备 RAM 必须保存在快照中。但是，这不仅仅意味着主 RAM - 它还指代手机硬件的所有其他复杂位 - 例如 CPU 寄存器、实时时钟硬件的状态以及每隔一个的任何/所有寄存器这个虚拟电话中的硬件。

如果您没有启用 GPU，那么图形硬件状态相当简单——它将是一个帧缓冲区，以及一些代表 x 维度、y 维度和像素格式的寄存器。

但是，如果您启用了 GPU 直通，那么保存该硬件的状态会更加复杂。QEMU 必须保存每个纹理的状态、设置的相机、几何形状以及保存在 GPU 中的其他更多内容。流向 GPU 的命令流水线也必须在任意点中断，并记录这些命令的执行状态（很难，因为存在多级流水线，并且某些指令可能已部分执行）。

此外，qemu 实际上可能很难*获得*这些信息，因为 qemu 只是将它传递给主机 GPU。qemu 无法准确地询问主机 GPU 驱动程序执行了什么以及没有执行什么。至少，这需要主机操作系统和 GPU 驱动程序的支持，甚至可能需要更改 GPU 管道以简化事情，以便管道可以在任意点停止和重新启动。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-29T10:08:15.883

首先检查您的 Android 模拟器快照是否启用？（如果选中则将其设置为未选中）在 Eclipse 中转到 AVD->选择您的模拟器->编辑->启用快照->取消选中它。重新启动将正常运行。我为同样的问题做了它。

# iphone - UIPickerView 不更新

> ID：11617133
> 
> 赞同：0
> 
> 时间：2012-07-23T17:06:27.173
> 
> 标签：iphone, ios, uipickerview

我正在从*iOS 5.1.1下的 URL 动态加载**UIPIcker*视图的标签值，因此我需要在呈现视图后对其进行更新。如果我在实例化选择器时用值（通过方法）初始化它，一切正常。如果我延迟调用选择器，它确实会通过该方法查询*数据源*并检索选定的行表明它确实填充了新值。问题是这些字段仍然显示为. 选择器*数据源*、和都设置为文件的所有者（我正在使用*`delegate``reloadAllComponents`*`delegate``blank`*`delegate``IBOutlet``.xib`）。如果我在实例化时将初始虚拟值加载到选择器中，即使在选择器实际更新后也会显示这些值。我正在为这个问题挠头。谁能解释为什么*GUI*值不更新？谢谢，克里夫***

 ****[更新]**
现在，我看到如果我在选择器更新后后台应用程序，它会以正确的值重新显示]。真的感觉就像我错过了一个联系。我试过打电话`setNeedsDisplay`没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:31:46.310

我遗漏了代码，因为我有太多不想分享的应用程序代码。我实际上发现了问题所在。我正在通过`NSNotification`回调填充选择器。这显然没有在主线程中运行并导致问题。通过确保通知回调的主体在主线程中运行

```
dispatch_async(dispatch_get_main_queue(), ^{
    MY CODE HERE
}); 
```

现在一切正常。悬崖**

# iphone - 在核心绘图折线图中旋转数据标签

> ID：11617134
> 
> 赞同：0
> 
> 时间：2012-07-23T17:06:29.300
> 
> 标签：iphone, ios, cocoa-touch, core-plot

截至目前，我用 Core plot 绘制的折线图如下所示：

![在此处输入图像描述](../Images/101e2ad238c7c52298ca66002fc2bb7a.png)

如您所见，地块的一些标签是重叠的。我认为如果我可以垂直显示它们会很好（就像显示 x 轴中的标签一样）。我该怎么做？

这是我的 dataLabelForPlot 代码片段：

```
-(CPTLayer *) dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index {

        NSString *currentlabel = [lineChartPlotXLabel objectAtIndex:index];
        CPTMutableTextStyle *textStyle       = [[CPTMutableTextStyle alloc] init];
        textStyle.color = [CPTColor darkGrayColor];
        textStyle.fontSize  = 10.0f;
        textStyle.fontName = @"Helvetica";
        CPTLayer *layer = [[CPTLayer alloc] 
                            initWithFrame:CGRectMake(0.0, 0.0, 70.0, 20.0)];
        CPTTextLayer *newLayer = nil;
        newLayer = [[CPTTextLayer alloc] initWithText:currentlabel style:textStyle];
        [layer addSublayer:newLayer];
        return layer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:15:51.133

Set the `labelRotation` on the plot.

# jquery - 通过单击按钮关闭对话框 - JQuery UI

> ID：11617136
> 
> 赞同：6
> 
> 时间：2012-07-23T17:06:29.813
> 
> 标签：jquery, jquery-ui

我尝试在 JQuery UI 中创建一个关闭“对话框”窗口的按钮。

要打开我正在使用此代码的对话框：

```
$(".show .edit_site").click(function (){
    rel = $(this).attr("rel");

    $("#dialog_edit").dialog({
            modal: true,
            open: function () {
                $(this).load("<?= site_url()?>/sites/show_update?id="+rel+"&mode=popup");
            },
            close: function() {
                //some code
            },
            height: 370,
            width: 900,
            title: 'Some title'
     });
}); 
```

对话框打开，一切正常。但现在的问题是如何通过单击对话框内的按钮来关闭对话框？

![在此处输入图像描述](../Images/7bf03131ae13186d6c2065462c1f51f2.png) 谢谢大家，对不起我糟糕的英语:)

* * *

我尝试了所有可能的解决方案，这是唯一适合我的解决方案：

```
function close_dialog()
{
    //Close jQuery UI dialog 

    $(".ui-dialog").hide();
    $(".ui-widget-overlay").hide();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T17:07:51.510

这很简单，只需将按钮添加为对话框选项的一部分：

```
$("#dialog_edit").dialog({
    modal: true,
    open: function () {
        $(this).load("<?= site_url()?>/sites/show_update?id="+rel+"&mode=popup");
    },
    height: 370,
    width: 900,
    title: 'Some title',
    buttons: {
        'button text' : function() {
            $(this).dialog('close');
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-23T17:09:37.607

您可以使用[“关闭”](http://jqueryui.com/demos/dialog/#method-close)方法：

```
$("#dialog_edit").on('click', '#closeButtonId', function(){
     $(this).closest("#dialog_edit").dialog('close');
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-05T17:29:51.230

我尝试了下面的代码并且它有效

```
 $('#btnClose').click(function () {
     window.parent.jQuery('#msgbox').dialog('close');
 }); 
```

# javascript - .wrap() 与 resize 函数一起使用时会多次添加选择器

> ID：11617140
> 
> 赞同：0
> 
> 时间：2012-07-23T17:06:41.537
> 
> 标签：javascript, jquery, jquery-selectors

`div`当浏览器宽度小于`801px`或高度大于宽度时，我正在使用调整大小函数用容器包装 a 。我的问题是，当其中任何一个变为真`div`时，选择器会被包裹 8 次。我究竟做错了什么？

这是我的代码：

```
$(document).ready(function(){
 function wrapperWidth() {
  var wrapper_width = $('body').width();
   if (wrapper_width < 801 || window.innerHeight > window.innerWidth) {
      $('.video-profile').wrap("<div></div>");
   }
 }
 wrapperWidth();
 $(window).resize(function() {
wrapperWidth();
 });
}); 
```

当浏览器宽度小于 801 像素时，我得到了这个。

```
<div>
 <div>
  <div>
   <div>
    <div>
     <div>
      <div>
       <div>
        <div class="video-profile"></div>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:16:08.943

浏览器可以在调整大小操作期间多次触发调整大小事件，有关更多详细信息，请参阅此[问题](https://stackoverflow.com/questions/6658517/window-resize-in-jquery-firing-multiple-times)。

我建议检查容器是否存在以避免重复：

```
if (wrapper_width < 801 || window.innerHeight > window.innerWidth) {
    if (!$('.video-profile').parent().hasClass('vp-container')) {
        $('.video-profile').wrap("<div class="vp-container"></div>");
    }
} 
```

# dart - 在许多类中使用相同的变量/跨类共享变量

> ID：11617145
> 
> 赞同：1
> 
> 时间：2012-07-23T17:06:47.843
> 
> 标签：dart

就像我在一个类中获得 CanvasRenderingContext2D 和 CanvasElement 一样，但是如何在其他类中使用我的 CanvasRenderingContext2D？

```
class Unnamed {
    CanvasElement c;
    CanvasRenderingContext ctx;

    Unnamed() {
        this.c = query('#canvas');
        this.ctx = this.c.getContext('2d');
    }
} 
```

以及如何在其他类中使用我的未命名类中的 ctx？就像是：

```
class Box {
    num x,
        y;

    Box() {
        this.x = x;
        this.y = y;
    }

    void draw() {
        myCtxFromUnnamedClass.fillRect(this.x, this.y, 64, 64);
    }
} 
```

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:16:17.860

最好的方法是将 CanvasRenderingContext2D 作为方法 draw 的参数传递。

```
class Box {
    num x, y;

    Box() {
        this.x = x;
        this.y = y;
    }

    void draw(CanvasRenderingContext ctx) {
        ctx.fillRect(this.x, this.y, 64, 64);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:19:51.033

首先，您的 Box() 不会编译为 no`x`并`y`提供给`Box()`构造函数。

和

```
 void draw(CanvasRenderingContext ctx) {
        ctx.fillRect(this.x, this.y, 64, 64);
    } 
```

`ctx`如果您作为`Box`' 构造函数参数传递，则没有任何意义。但要回答你的问题：

```
void main() { 
  Unnamed unnamed = new Unnamed();
  Box box = new Box(unnamed.ctx, 0, 0);
  box.draw();
}

class Unnamed {
  CanvasElement c;
  CanvasRenderingContext ctx;

  Unnamed() : c = query('#canvas') { // variable initialization should be done this way
    this.ctx = c.getContext('2d');
  }
}

class Box {
  num x, y;
  CanvasRenderingContext myCtxFromUnnamedClass;

  Box(this.myCtxFromUnnamedClass, this.x, this.y); // this is an idiomatic Dart constructor

  void draw() {
    myCtxFromUnnamedClass.fillRect(this.x, this.y, 64, 64);
  }
} 
```

# python - ValueError：Django / Python中的选项错误

> ID：11617147
> 
> 赞同：1
> 
> 时间：2012-07-23T17:06:53.180
> 
> 标签：python, django, ldap, python-ldap

我正在构建一个 django 网站并尝试对其实施 LDAP。

每当我打电话`ldap.set_option()`时，我都会收到此错误：

```
ValueError: option error 
```

知道为什么会这样吗？

这是我正在关注的[文档。](http://packages.python.org/django-auth-ldap/)

感谢您对此进行调查，并非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:08:19.400

[http://packages.python.org/django-auth-ldap/#auth-ldap-global-options](http://packages.python.org/django-auth-ldap/#auth-ldap-global-options)

已定义并且其中是否`AUTH_LDAP_GLOBAL_OPTIONS`包含项目？

也许它没有定义？

# linux - LINUX“CD”命令在 shell 脚本中不起作用

> ID：11617148
> 
> 赞同：0
> 
> 时间：2012-07-23T17:06:55.107
> 
> 标签：linux

我制作了一个我想要的 shell 脚本，无论它在哪里都可以进入一个目录。例如，如果外壳在下载中，我希望它去桌面创建一个文件夹去那个文件夹和许多其他的东西，但 CD 命令**不起作用**。

```
#!/bin/bash
cd Desktop 
```

它是这样说的：

```
setup.sh: 2: cd: can't cd to Desktop 
```

我有一种使用它的方法，请帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:09:08.737

'cd' 命令运行良好。它告诉你没有“桌面”目录。

您需要提供“桌面”目录所在位置的相对或绝对路径：

```
#!/bin/bash
cd ~/Desktop
cd /home/user/some/subdir/here/Desktop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:09:18.587

使用绝对路径，或者更好的是，使用环境变量。

```
cd ~/Desktop 
```

# java - 窗口焦点事件的意外行为

> ID：11617151
> 
> 赞同：3
> 
> 时间：2012-07-23T17:07:03.833
> 
> 标签：java, swing, window, focus, awt

我正在创建一个应用程序`Swing`，但我遇到了问题。我想处理`focusLost()`and`focusGained()`事件，但我认为我的代码有问题。

我有以下测试代码：

```
addWindowFocusListener(new WindowFocusListener() {
    @Override
    public void windowLostFocus(WindowEvent e) {
        System.out.println("Lost!");
        System.out.println(e.toString());
    }

    @Override
    public void windowGainedFocus(WindowEvent e) {
        System.out.println("Gained!");
        System.out.println(e.toString());
    }
}); 
```

而且，当我**激活**窗口时，似乎应用程序**一次**处理 2 个事件：

```
获得！
java.awt.event.WindowEvent[WINDOW_GAINED_FOCUS,opposite=null,oldState=0,newState=0] on frame0
丢失的！
java.awt.event.WindowEvent[WINDOW_LOST_FOCUS,opposite=null,oldState=0,newState=0] 在 frame0

```

而且，当我停用窗口时，程序什么也不打印。

还有更有趣的事情。当我打开一个`JFrame`属于我的应用程序的新应用程序时，事件系统**可以正常工作**，即使我关闭了这一秒`Window`。

我只是不知道为什么会这样。请帮忙。

系统规格：

*   **操作系统**：Ubuntu 12.04 x86_64

*   **JVM**：OpenJDK 7

```
m4tx@m4tx-EP35-DS4:~$ java -version
拿起_JAVA_OPTIONS：-Dawt.useSystemAAFontSettings=lcd
java版本“1.7.0_03”
OpenJDK 运行环境 (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu3)
OpenJDK 64 位服务器 VM（构建 22.0-b10，混合模式）

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:42:15.273

好吧，我看不出你的代码有什么问题；所以我整理了一个快速演示，它似乎工作正常：

```
import java.awt.event.WindowEvent;
import java.awt.event.WindowFocusListener;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class WindowEventDemo extends JFrame implements WindowFocusListener {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new WindowEventDemo("Window Event Demo").setVisible(true);
            }
        });
    }

    public WindowEventDemo(String name) {
        super(name);
        addWindowFocusListener(this);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(300, 300);
    }

    @Override
    public void windowGainedFocus(WindowEvent e) {
        System.out.println("WindowFocusListener method called: windowGainedFocus.");
    }

    @Override
    public void windowLostFocus(WindowEvent e) {
        System.out.println("WindowFocusListener method called: windowLostFocus.");
    }
} 
```

启动时会打印：

> WindowFocusListener 方法调用：windowGainedFocus。

当窗口**最小化**，或者**鼠标点击屏幕上的其他地方时，**除了`JFrame`打印：

> WindowFocusListener 方法调用：windowLostFocus。

# three.js - 双面人脸闪烁-z指数格斗

> ID：11617152
> 
> 赞同：3
> 
> 时间：2012-07-23T17:07:06.273
> 
> 标签：three.js

我想用强大的线框线制作网格。当我用双重材料绘制面时，一个用于阴影，第二个用于线条（线框），我得到了这种闪烁的线条。[http://jsfiddle.net/jn_09/atTXN/3/](http://jsfiddle.net/jn_09/atTXN/3/)我猜它直接连接到z-index。那么这种行为有什么解决方案吗？WebGL 接缝以相同的方式工作。

这个案例只是谷歌浏览器。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:44:54.260

这个问题在 GitHub 上多次提出过关于 CanvasRenderer 的问题。看来，当您使用 CanvasRenderer 时，您的脸部会以不同的摄像机角度移位。例如，当您使用某些图像作为纹理时，您将在旋转对象时使图像变形。

看看将阴影面设置为全透明时会发生什么：http: [//jsfiddle.net/EEywu/](http://jsfiddle.net/EEywu/)。它们不再“跳过”您的线框（因为它们是不可见的）。

现在，这就是 WebGL 在游戏中的用武之地，与您所说的相反，它不会产生相同的效果，至少在默认情况下是这样。不好的部分——如果你使用的是 Windows，你不会在 WebGL 上看到任何粗细的线框线：http: [//jsfiddle.net/XQz3g/](http://jsfiddle.net/XQz3g/)。

所以，我想你的选择是：使用 WebGL 来解决这个问题，或者使用不同的几何图形（线平面）增加段数，如下所示：

```
var plane = new THREE.PlaneGeometry( 300, 300, 4, 4 ); 
```

这将创建您的平面，不仅有 2 个面（三角形），而且有 32 个面（4x4x2）。这样，摄像机角度处的刻面偏移量将最小化，并且您不会注意到任何闪烁。如果您将有许多这样的平面由画布渲染，这将杀死您的 FPS。

所以让知道这是否有帮助！

# java - 碰撞后的box2d提升速度

> ID：11617154
> 
> 赞同：0
> 
> 时间：2012-07-23T17:07:11.917
> 
> 标签：java, box2d, game-engine, game-physics

我正在创建一个由 andengine 和 box2d 物理扩展提供支持的手机游戏

我想知道是否有办法在碰撞后**增加**物体的速度。

谢谢，
插座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:31:46.280

看恢复系数。

# javascript - 如何将 JavaScript 文件路径映射到 ASP.Net MVC 控制器操作？

> ID：11617162
> 
> 赞同：0
> 
> 时间：2012-07-23T17:07:51.927
> 
> 标签：javascript, asp.net-mvc

我目前有一个 ASP.Net MVC 3 网站，该网站在以下路径托管一个物理 JavaScript 文件：/bookmarklet/src.js。我想让路径中的内容成为 MVC 控制器操作的结果，以便我可以使该文件的输出动态化。

如何修改我的网站，以便将此文件的请求发送到名为“Javascript”的控制器上名为“Src”的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:32:45.397

这就是我的做法。您只需要在 Global.asax 文件中添加一个自定义路由，如下所示：

routes.MapRoute("bookmarklet", "bookmarklet/src.js", new { controller = "Javascript", action = "Src" });

# c - 如何抑制 C 中的 openssl 错误输出？

> ID：11617163
> 
> 赞同：1
> 
> 时间：2012-07-23T17:07:52.800
> 
> 标签：c, linux, openssl

我有一堆单元测试使用无效的证书来引发错误条件，这很有效，但不幸的是，我整洁的终端输出现在充满了丑陋的 OpenSSL 错误，有人知道我如何抑制这些错误吗？

EDIT1：错误如下所示：

140376922039968:error:0906D06C:lib(9):func(109):reason(108):pem_lib.c:696:Expecting: CERTIFICATE 140376922039968:error:0D0680A8:lib(13):func(104):reason(168) :tasn_dec.c:1319: 140376922039968:error:0D07803A:lib(13):func(120):reason(58):tasn_dec.c:381:Type=X509 140376922039968:error:0906700D:lib(9):func( 103):reason(13):pem_oth.c:83:140376922039968:error:0D0680A8:lib(13):func(104):reason(168):tasn_dec.c:1319:140376922039968:error:0D07803A:lib(13 ):func(120):reason(58):tasn_dec.c:381:Type=X509 140376922039968:error:0906700D:lib(9):func(103):reason(13):pem_oth.c:83:

这些是在我将无效的 X.509 证书传递给 OpenSSL X509 PEM 解码函数时生成的。产生这些错误的代码如下：

```
 BIO *certBio = BIO_new_mem_buf(certData, certSize);
    X509 *x509 = PEM_read_bio_X509(certBio, NULL, NULL, NULL); 
```

EDIT2：对不起，我的错，我在我的代码中调用了打印错误函数，我向那些抽出时间研究这个的人道歉:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:07:57.577

Redirect `stderr`，其中 OpenSSL 打印错误，`/dev/null`如下所示：

```
./your_unit_test 2>/dev/null 
```

您还可以使用以下方式以编程方式重定向它：

```
 fclose(stderr);
  stderr = fopen("/dev/null","w"); 
```

或者，如果 OpenSSL 行始终包含特定内容，您也许可以使用`grep`它们来删除它们。例如，

```
./your_unit_test | grep -v OpenSSL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:09:41.830

可能有效的一件事是将 stderr 切换为管道，并从该管道读取另一个线程/进程并过滤掉您不想要的消息。像这样的东西可能会起作用：

```
// Error checking omitted for expository purposes
int origStderr;
int stderrFilter[2];

void RunTests()
{
    // Save original stderr
    origStderr = dup(STDERR_FILENO);

    // Create pipe to be used for filtering out OpenSSL messages
    pipe(stderrFilter);

    // Move the writing end of the pipe onto stderr
    dup2(pipe[0], STDERR_FILENO);
    close(pipe[0]);

    // Create thread to read from the pipe
    pid_t filterThread;
    pthread_create(&filterThread, NULL, &StderrFilterThreadProc, NULL);

    // Ok, run the actual unit tests
    RunOpenSSLUnitTests();

    // Close down the pipe, join the thread, and restore stderr
    dup2(origStderr, STDERR_FILENO);
    close(origStderr);
    pthread_join(filterThread, NULL);
    close(stderrFilter[1]);
}

void *StderrFilterThreadProc(void *arg)
{
    char buffer[SOME_REASONABLY_LARGE_BUFFER_SIZE];
    int n;

    while((n = read(stderrFilter[1], buffer, sizeof(buffer)) > 0)
    {
        // Parse buffer into lines, determine if each line was an OpenSSL message
        for(each line in buffer)
        {
            if(line came did not come from OpenSSL)
                write(origStderr, line, line_length);
        }
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T22:06:07.090

我已经尝试了一些 OpenSSL 示例，但我并没有真正看到 OpenSSL 强制向终端输出任何内容。

因此，我将建议一个非常简单的解决方案：从您的测试程序中删除错误输出命令。您可能应该寻找`ERR_print_errors()`、`ERR_print_errors_fp()`调用和可能的其他输出函数抓取`ERR_reason_error_string()`.

如果您的代码仍然输出错误，请提供一个示例，我们可以对其进行测试并找出发生这种情况的*原因*。

# javascript - jquery在div上显示图像

> ID：11617165
> 
> 赞同：0
> 
> 时间：2012-07-23T17:07:55.723
> 
> 标签：javascript, jquery

我再次在这里发帖，我似乎无法找到解决这个问题的方法。我正在使用 jquery 和 jstree 插件来构建一棵树，并基于 jstree 的 node_id，我在 div 上显示了一些图像。我面临的问题是一些图像没有加载，即使它们在那里。当我遇到这个问题时，我通过检查图像的宽度来验证有问题的图像实际上没有加载。下面是代码。如何确保在显示之前加载图像。同样，非常感谢任何帮助，因为我对 jquery 很陌生：

```
(document).ready(function () {
    $("#div1").jstree({
        "xml_data": {
            "ajax": {
                "url": "tree.xml"
            },
            "xsl": "nest"
        },
        "plugins": ["themes", "xml_data", "ui", "types"]
    }).bind("select_node.jstree", function (event, data) {
        var node_id = data.rslt.obj.attr("id");
        if (node_id.indexOf("TEAM") >= 0) var teamA;
        var teamB;
        teamA = "image/" + node_id + "-scores.png";
        teamB = "image/" + node_id + "-standing.png";
        img1 = new Image;
        img1.src = teamA;
        img2 = new Image;
        img2.src = teamB;
        $("#div2").html(img1);
        $("#div3").html(img2);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:14:36.587

[`$.html`](http://api.jquery.com/html/)接受一个 HTML 字符串。改为调用[`$.append`](http://api.jquery.com/append/)节点或 jQuery 对象

```
 $("#div2").append(img1);
    $("#div3").append(img2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:21:09.277

您可以使用 jQuery.html，但您必须提供一个字符串（类似于 ' ![](../Images/41d602ca9caa56479881da703e27c8d8.png)'）而不是 Image 对象。您可以尝试将图像对象转换为字符串，也许您会发现此链接很有帮助：[http ://www.dailycoding.com/Posts/convert_image_to_base64_string_and_base64_string_to_image.aspx](http://www.dailycoding.com/Posts/convert_image_to_base64_string_and_base64_string_to_image.aspx)

# php - 错误返回的 PDO execute() 会与它抛出的异常相同吗？

> ID：11617169
> 
> 赞同：2
> 
> 时间：2012-07-23T17:08:03.783
> 
> 标签：php, exception, pdo, execute

根据要求，我重新格式化问题：

对于以下代码：

```
$newPDO=new PDO($DSN,$USER,$PASS);
$newPDO->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);
$SQL='SOME SQL STATEMENT MAYBE FAULTY';
try{
$Query=$newPDO->Prepare($SQL)
$Success=$Query->execute();
if(!$Success)
  echo('A');
}
catch(PDOException $e)
{
  echo('B');
} 
```

问题是，是否可以看到打印的“A”？对于不同类型的`$SQL` 选择或插入，答案会有所不同吗？

原始问题：

*   首先，我将属性设置为 PDO::ATTR_ERRMODE、PDO::ERRMODE_EXCEPTION，这样，我认为，当 execute() 遇到来自 DB 的错误时，它应该抛出异常。然后我意识到，如果这是真的，我什至不必检查 execute() 的返回，只要抛出的异常与返回的“假”相同。我只需要从外面抓。如果没有任何内容，则查询应该没问题。
    但我不确定这一点，因为 execute() 默认情况下不会根据手册抛出异常。当我插入一些东西时，我尝试了一些操作，比如重复 PK 和违反唯一约束。支持我的断言：PDO 将抛出异常，我可以从 DB 获取详细的错误消息。*但是我不知道这是否是普遍真理*. 当我将 ERRMODE 设置为最大值时，是否有可能从 execute() 中得到一个错误，并且没有抛出 PDOEXCEPTION？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:19:17.353

尝试这个：

```
 try {
      //Initial query processing
      $execute = $query->execute()
      if (!$execute) {
        //catch the exception
        throw new Exception ("blah")
      }
    } catch (Exception $e) {
      //Exception logic here

    } 
```

像这样编写您的查询，如果他们在该部分中遇到异常`try`，它将中继到该`catch`部分，您可以随意处理它（是否 id 取决于特定情况）。

如果没有异常，它将永远不会到达该`catch`语句，并且您的查询只会执行。

当涉及到*DUPLICATES* -> 你需要在 SQL 中解决这个问题。例如，您的查询可能是：

```
INSERT INTO table (a,b,c) VALUES (1,2,3),(4,5,6) ON DUPLICATE KEY UPDATE c=VALUES(a)+VALUES(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T15:16:16.043

我已经看到 execute() 返回 false 而没有抛出异常，这在我看来是一种意外/不良行为。这意味着我们基本上必须同时进行错误和异常处理。

就我而言：如果我准备了一个不带任何参数的插入查询，然后使用参数执行。Execute 不会抛出异常，而是返回 false。我建议任何人使用@mlishn 的解决方案。

# javascript - 在回调中使用主干 this.set 的问题

> ID：11617177
> 
> 赞同：1
> 
> 时间：2012-07-23T17:08:42.237
> 
> 标签：javascript, backbone.js, callback, underscore.js

我正在尝试从回调中设置我的主干模型的参数，但我继续收到错误“this.set 不是函数”。我以为 _.bindAll 旨在解决这些情况……我用错了吗？是否有其他方法可以用来确保在回调触发后才设置模型的状态参数？

```
var Service = Backbone.Model.extend({
    defaults : {
        status : "off"
    },
    url : "/status",
    initialize : function {
        _.bindAll(this, "getStatus");
        this.getStatus();
    },
    getStatus : function() {
        $.getJSON(this.url(), function(data) {
            this.set({status : data.status});
        }); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:11:55.953

`this`不会在`.getJSON`回调的上下文中引用您的模型。您可以保存对模型的引用，以便在回调中访问它，如下所示：

```
getStatus : function() {
    var model = this;
    $.getJSON(this.url(), function(data) {
        model.set({status : data.status});
    }); 
} 
```

# vb.net - 如何将 db 字段附加到 url 字符串中？

> ID：11617181
> 
> 赞同：0
> 
> 时间：2012-07-23T17:09:00.763
> 
> 标签：vb.net

我不确定这有多困难，但我有一个从数据库填充值的 checkboxList。

这是标记：

```
<asp:CheckBoxList runat="server" ID="sects"> 
```

字段名是 doclist，我将这些值读入：

```
While objReader.Read()
  With objReader
    Dim li As New ListItem(objReader(0).ToString())
    sects.Items.Add(li)
  End With
End While 
```

到目前为止效果很好。很大程度上要感谢我在这里得到的巨大帮助。

但是，我们希望将与 sects.Items.Add(li) 关联的值连接到一个 url 中。

以下是网址：

[http://default.html](http://default.html)，我们想将它连接起来，使它看起来像这样：

```
http://default.html?parts="+sects.Items.Add(li)+"&docs=answers&name=meter.zip" 
```

这行不通。我收到一个错误，“这不会产生值

我们正在尝试完成的是使用包含该 url 中的 sects 值的 url 字符串填充 checkboxList。

任何想法如何让它发挥作用？

对不起，伙计们，我只是继续回来更多。在来这里之前，我确实尝试先修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:14:26.453

尝试：

```
sects.Items(//Index of Item).ToString()

http://default.html?parts="+sects.Items(//Index of Item).ToString()+"&docs=answers&name=meter.zip" 
```

或者：（对于 asp 已经有一段时间了，但我认为这样的东西是可用的）

```
sects.SelectedValue.ToString() 
```

该部分`sects.Items.Add(li)`是将对象添加到CheckBoxList

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:33:59.167

```
 string urlappend = null;
    for (int i = 0; i < CheckBoxList1.Items.Count; i++)
    {
        urlappend += CheckBoxList1.Items[i].Value + "_";
    } 
```

您需要遍历复选框列表中的项目并将其值附加为字符串，然后将该字符串添加到 URL，这样将获得所有值。同样在上面的代码中，我使用“_”作为分隔符来标识每个项目的值。

如果您只想要选定的项目，那么您可以添加以下条件

```
 for (int i = 0; i < CheckBoxList1.Items.Count; i++)
    {
        if(CheckBoxList1.Items[i].Selected)
        urlappend += CheckBoxList1.Items[i].Value + "_";

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:47:30.177

好吧，我想我理解得更好了。我删除了链接按钮并更改了列表项，因此显示的文本是一个 URL，其中包含数据库字段，作为 URL 参数。该值本身仍然是数据库字段。但如果我可能会问，这是一种什么样的设计？它看起来非常不稳定。您可以导航到呈现不同数据的这些页面吗？您希望允许多项选择，但是如何通过这条路线考虑到这一点。而且，如果您不希望用户能够进行多项选择，则应该使用下拉淹没列表。我希望这对你有用，但我对这个要求及其实施背后的逻辑持怀疑态度。

标记：

```
<asp:CheckBoxList runat="server" ID="sect" CssClass="checkAll" AutoPostBack="true" >
</asp:CheckBoxList> 
```

代码背后：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        Dim strSQL As String = "SELECT AppealNumber FROM Appeals"
        Dim connStr As String = ConfigurationManager.ConnectionStrings("connstr").ConnectionString
        Dim conn As New SqlConnection(connStr)
        Dim cmd As New SqlCommand(strSQL, conn)
        Dim objReader As SqlDataReader
        conn.Open()
        objReader = cmd.ExecuteReader()
        '   |||||   Loop through the Reader to retrieve data    
        '   |||||   and set each checkbox to appropriate data from datasource
        While objReader.Read()
            With objReader
                Dim li As New ListItem("Default.aspx?parts=" + objReader(0).ToString(), objReader(0).ToString())
                sect.Items.Add(li)
            End With
        End While
    End If
End Sub 
```

# php - htaccess 和两个 post 参数

> ID：11617183
> 
> 赞同：2
> 
> 时间：2012-07-23T17:09:06.210
> 
> 标签：php, css, model-view-controller, .htaccess, post

我为我的网站开发了一个小型的自定义 MVC 框架。它是 index.php 检查 $_POST['page'] & $_POST['subpage'] 并包含指定参数的相关 php 文件。

例如：**index.php?page=foods** *（这包括 view/foods.php）*

例如：**index.php?page=foods&subpage=pizza** *（这包括 view/foods/pizza.php）*

现在我想使用 .htaccess 清理我的 URL。我尝试了几种方法来传递第二个参数。但我失败了。这工作正常...

```
RewriteEngine on
RewriteRule ^([^/\.]+)?$ index.php?page=$1 [L] 
```

但是当我试图传递第二个参数时它不能正常工作。这一更改 css/js/iamges 路径。

```
RewriteEngine on
RewriteRule ^([^/\.]+)?$ index.php?page=$1

RewriteRule ^([^/\.]+)/([^/\.]+)?$ index.php?page=$1&sub=$2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:12:20.230

如果您使用 QSA（查询字符串附加）标志，您可以简单地将整个请求字符串传递给索引文件 -

> **QSA** - 将原始请求 URL 中的任何查询字符串附加到在重写目标中创建的任何查询字符串

所以你的规则看起来类似于这个 -

```
RewriteRule %{REQUEST_FILENAME} !-d
RewriteRule %{REQUEST_FILENAME} !-f
RewriteRule ^(.+)$ index.php?uri=$1 [QSA,L] 
```

在您的索引文件中，您可以`.explode()`使用斜杠 -

```
$splitArr = explode('/',$_GET['uri']); 
```

和/或使用内置`parse_url()`函数 - [http://www.php.net/manual/en/function.parse-url.php](http://www.php.net/manual/en/function.parse-url.php)

> `parse_url`— 解析 URL 并返回其组件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T17:14:56.383

大多数这种类型的 url-rewriters 明确排除实际存在的文件/目录：

```
RewriteRule %{REQUEST_FILENAME} !-d
RewriteRule %{REQUEST_FILENAME} !-f 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:13:33.990

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteRule ^public/(js|css|images)(/.*|$) - [L]
RewriteRule ^(.+)$ index.php?page=$1 [QSA,L] 
```

这就是我终于做到了！

# iphone - 轴标签也随着图形滚动：如何禁用？

> ID：11617185
> 
> 赞同：0
> 
> 时间：2012-07-23T17:09:07.783
> 
> 标签：iphone, ios, cocoa-touch, core-plot

首先，感谢 Core Plot 团队在图形 API 上的出色工作！惊人的！:) 用 Core Plot 绘制的图表效果很好。当我水平滚动并且 y 轴标签也随着图表向左滚动时，就会出现问题，如下面的屏幕截图所示：

第一个屏幕截图是显示图表时的初始视图。

![在此处输入图像描述](../Images/b2aec2e52bed239bc5dd509454b09f92.png)

正如您在下面的第二个屏幕截图中看到的那样，当我滚动图表时，y 轴标签也向左滚动。

![在此处输入图像描述](../Images/34cdaa708900ce24e5efa54222d76fbf.png)

即使我应该能够滚动图形，如何防止 y 轴标签滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:14:57.140

Set a constraint on the y-axis, e.g.,

```
y.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0]; 
```

# php - tFPDF不输出特殊字符

> ID：11617195
> 
> 赞同：1
> 
> 时间：2012-07-23T17:09:44.280
> 
> 标签：php, fpdf

> 我需要的

用于 FPDF 的特殊字符，可以使用硬编码字符串或数据库查询的结果

> 我正在使用什么

正如 SO 的一些问题所建议的那样，我正在使用 tFPDF 来让特殊字符起作用。

> 问题

它适用于从 MySQL 数据库中检索到的字符串，但不适用于我的硬编码字符串。

> 输入示例

**数据库字符串：**
![图片](../Images/337c0be5cdb8165e22dfc174bbb328a8.png)
**硬编码等价物：**
`Operação`

> 输出示例

![在此处输入图像描述](../Images/06ec86835da41a800b673800fbd36fb3.png)

如您所见，填充单元格是硬编码的单元格，未填充单元格是数据库的结果。

> 代码

对于表头单元格的硬编码输出，我使用以下代码：

```
$pdf->Cell($wO,$h,'Operação',1,0,'C',true); 
```

为了输出数据库结果，我使用了类似的代码：

```
$pdf->Cell($wO,$h,$oper,1,0,'C',$fill); 
```

我已经尝试过`utf8_encode`了，但它只给了我矩形而不是字符......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:17:41.990

我通过在表格标题上使用**Arial**字体解决了这个问题，并像这样打印单元格，以便它采用特殊字符：

```
$pdf->Cell($wO,$h,'Opera'.chr(231).chr(227).'o',1,0,'C',true); 
```

然后，我再次放置名为**DejaVu**的特殊字体，以便将特殊字符放置在 DB 结果中。
希望它可以帮助任何有同样问题的人，我按照[这个例子](http://fpdf.org/en/script/script4.php)得到了字符号......

# python - 使用 django 在 postgresql 中自我加入

> ID：11617197
> 
> 赞同：2
> 
> 时间：2012-07-23T17:09:56.513
> 
> 标签：python, django, postgresql, django-queryset, django-1.4

首先，Django 添加了不必要的引号，这会导致 PostgreSQL 语法错误：

```
Model.objects.extra(tables=['(SELECT ... FROM model) AS "model_alias"'],
                    where=...) 
```

生产

```
SELECT ... FROM "model" , "(SELECT ...) AS "model_alias"" WHERE ... 
```

-- 语法错误，在哪里

```
SELECT ... FROM "model" , (SELECT ...) AS "model_alias" WHERE ... 
```

没关系。

`tables`其次，它忽略了方法参数中额外出现的表名`extra`，而[文档](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#extra)承诺应该创建别名：

```
Model.objects.extra(tables=['model'], where=...) 
```

只产生`SELECT ... FROM "model" WHERE ...`-- 没有别名。

错误在哪里？如何克服这种 Django 的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:45:22.963

您可能需要使用原始 SQL 来执行此操作。请参阅[执行原始 SQL 查询](https://docs.djangoproject.com/en/dev/topics/db/sql/)。它可能看起来像这样：

```
Model.objects.raw("""
    SELECT * FROM 'model' JOIN 'model_alias' ON (...) 
    WHERE (...)
""") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:42:58.843

首先，你试过这个吗？

```
Model.objects.extra(tables=["(SELECT ... FROM model) AS 'model_alias'"],
                    where=...) 
```

我没有使用过objects.extra，但我认为这应该可行。我不知道第二个，但请确保您已阅读 where/tables 的所有文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:43:17.963

Extra 是一种将字段附加到查询集的方法，它不适用于子查询。您将不得不使用[Django 的聚合系统](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)。

# java - 显示资源文件夹中的所有图像

> ID：11617200
> 
> 赞同：0
> 
> 时间：2012-07-23T17:10:29.400
> 
> 标签：java, android, surfaceview, tiles, drawbitmap

我的资源文件夹中有一个名为“tiles”的文件夹。我希望能够在开发这个游戏时添加或删除tiles，它可以容纳数百个。因此 - 对于我正在制作的地图编辑器 - 我想要一种简单的方法来将它们加载到一个数组中（至少是名称），然后在运行时将它们显示到适当的视图（表面？）中。最好以网格格式，即 3 跨然后基于 for 循环或其他任何东西垂​​直无限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:13:28.583

要列出文件夹中的文件，您可以使用它，它将返回一个 File 对象数组。

```
File dir = new File(Environment.getExternalStorageDirectory() + "/your/directory/on/sdcard/");
File[] files = dir.listFiles(); 
```

# testing - QTP WinComboBox 选择错误

> ID：11617201
> 
> 赞同：0
> 
> 时间：2012-07-23T17:10:30.727
> 
> 标签：testing, automated-tests, qtp

我在网页上有一个“WinComboBox”。然后我尝试按索引选择其中的项目。代码如下：

```
Browser("Browser").Page("Page").WinComboBox("List").Select 5 
```

然后有时选择顺利，有时当第 3 项或第 4 项在 wincombobox 中显示一段时间并在最后一刻更改为第 5 项时，有时不会。然后脚本继续进行。问题是，在这种情况下，即使第 5 项似乎选择得很好，Web 应用程序仍然认为长时间停留的是选择的项，因此测试出错。我尝试了很多方法，没有成功的解决方案。并且组合框中项目的值真的不是常规字符，所以我无法验证它们。

我想知道是否有人可以启发我。许多人当即表示感谢。

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:07:16.037

您不应该在`WinComboBox`下面`Page`有基于 Web 的测试对象或某种 ActiveX/Java。尝试将所有适当的插件加载到您正在测试的应用程序中，看看您是否可以获得更合适的测试对象。

# excel - 将随机列表中的偶数和奇数配对

> ID：11617203
> 
> 赞同：0
> 
> 时间：2012-07-23T17:10:34.420
> 
> 标签：excel

我在这里停留是在互联网上搜索了 3 天试图找到我确定已经存在的东西的结果，但我找不到它。

首先，我不是程序员。我是 35 年前，但不再是。

这就是问题所在：15 名男孩和 15 名女孩坐在男孩/女孩/男孩/女孩 6 到一张有 5 张桌子的桌子上，然后让每个人换成不同的男孩/女孩/男孩/女孩最多 4 次。

所以我的逻辑是：

1.  数字 1 到 30，赔率是男孩，偶数是女孩——这些应该是可变但相等的，这意味着并不总是会有 30 个孩子，而是从 12 到 80 的任何地方（总是能被 2 整除，所以总会有一双）。
2.  从男孩/女孩总数中随机将 1 个男孩与 1 个女孩配对，无需重复。
3.  将结果分组为 5 组，每组 6 组。
4.  然后再重复这个过程最多四次，同时永远不要匹配之前配对的相同的两个男孩/女孩组合。

有人知道这是否可能吗？如果是这样，它可以在 Excel 中完成吗？如果没有，独立的 Windows 程序的建议也会起作用。

我正在尝试为慈善活动做这件事，在这些活动中，青少年男孩和女孩在结识新朋友的同时进行社交活动。他们来自世界各地，我正在努力让他们认识每个人。

几年来我一直在手动执行此操作，但似乎永远无法使其始终成功。我的程序员认为必须有针对这个问题的编程解决方案。

我将不胜感激您能提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:59:49.790

After doing a bit more digging, this appears to be a variation of the [Social Golfer Problem](http://mathworld.wolfram.com/SocialGolferProblem.html). There are several [algorithms](http://www.cs.brown.edu/people/idotu/social.pdf) out there, some relying on brute force or heuristics. It should absolutely be doable in VBA, but you can probably find existing code/apps out there to accomplish the task.

I'll continue looking into this, but let us know if you find an online "scheduler" that solves your problem.

**Edit:**

This could be one solution for 6 tables of 5 kids, but it won't ensure the half boy/girl constraint. According to this [results page](http://www.csplib.org/prob/prob010/index.html):

> For m groups of n players where m < n, it is impossible to find a group of n players for week 2 who all come from different week 1 groups (since there are only m of them).
> 
> For m groups of n players, each player plays with n-1 other players each week. Since there are a total of mn-1 other players, this means a player runs out of partners after (mn-1)/(n-1) weeks.

Therefore 5 groups of 6 kids would have repeats. By the 2nd formula, a kid would run out of partners after 5 turns.

5 weeks play in 6 groups of 5 golfers

[ 1 2 3 4 5 | 6 7 8 9 10 | 11 12 13 14 15 | 16 17 18 19 20 | 21 22 23 24 25 | 26 27 28 29 30]

[ 1 6 11 16 21 | 2 7 12 17 26 | 3 8 13 22 27 | 4 9 18 23 28 | 5 14 19 24 29 | 10 15 20 25 30]

[ 1 8 12 20 28 | 2 6 14 22 30 | 3 9 11 17 24 | 4 7 16 25 29 | 5 15 18 21 27 | 10 13 19 23 26]

[ 1 14 17 25 27 | 2 9 13 20 21 | 3 10 12 18 29 | 4 6 15 24 26 | 5 8 16 23 30 | 7 11 19 22 28]

[ 1 9 15 22 29 | 2 10 16 24 27 | 3 7 14 20 23 | 4 12 19 21 30 | 5 6 13 17 28 | 8 11 18 25 26]

# actionscript-3 - 半控制随机结果

> ID：11617207
> 
> 赞同：2
> 
> 时间：2012-07-23T17:10:52.440
> 
> 标签：actionscript-3, random

我希望某些东西（“目标”）以随机顺序出现五次（总共 10 次）。

下面代码的问题是我可以让它以随机顺序显示，但不一定是五次：

```
function rand_float(min:Number,max:Number=NaN):Number {
            if (isNaN(max)) { max = min; min=0; }
            return Math.random()*(max-min)+min;
}

function rand_integer(min:Number,max:Number=NaN):int {
        if (isNaN(max)) { max = min; min=0; }
        return Math.floor(rand_float(min,max));
}
function rand_boolean(chance:Number=0.5):Boolean {
    return (Math.random() < chance);
}

var a_list:Array = ['a','b','d','e'];

var target:String = 'b';

for (var i:int = 0; i < 10; i++) {
    if (rand_boolean()) {
        trace('random other thing: ' + a_list[rand_integer(0,3)]);
    } else {
        trace('target! :' + target);
    }
} 
```

因为 rand_boolean 方法是 50-50，它要么“显示”，要么“不显示”，但不能保证它总是 10 次中的 5 次。

我想我可以放入一个计数器，然后在 5 次后限制它（如果它超过）或强制它显示更多（如果说，8 次后它只显示一次）但也许有更好的方法来去做这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:16:54.537

一个简单的解决方案：创建一个包含正确数量的所需目标的可能性列表。

```
['a','a','b','b','b','b','b','c','c','d'] 
```

创建它的副本，在选择它们时删除每个项目。拉完所有 10 个后，重新复制列表。

* * *

或者，您可以通过播种 5 个“b”来创建此列表，随机选择 5 个“a”、“c”或“d”，然后您可以从列表中随机选择，如果您不想要非'b'计数是一致的。

要生成随机项数组：

```
var targets:Array = ['b','b','b','b','b'];
var options:Array = ['a','d','e'];

var current:Array = new Array(targets);

while (current.length < 10)
{
    current.push(options[rand_integer(0,3)]);
} 
```

然后在您的随机选择中：

```
var item:String;
if (current.length == 0)
    //regenerate array using above code

//splice(index to start at, # of items to remove) returns an array, we grab the first (only) item in it
item = current.splice(rand_integer(0,current.length),1)[0]; 
```

# mysql - 如何在 MySQL Workbench 中执行多个 SQL 查询？

> ID：11617209
> 
> 赞同：28
> 
> 时间：2012-07-23T17:10:55.940
> 
> 标签：mysql, sql, mysql-workbench

我正在使用适用于 Windows 版本 5.2.40 的 MySQL Workbench CE。

我想一起执行以下 SQL 查询。但是，我只能通过先执行`CREATE TABLE`查询，然后执行查询，然后再执行`INSERT INTO`查询来执行SQL`SELECT`查询。

```
CREATE TABLE testTable(
    Name VARCHAR(20),
    Address VARCHAR(50),
    Gender VARCHAR(10)
)

INSERT INTO testTable
    VALUES
    ('Derp', 'ForeverAlone Street', 'Male'),
    ('Derpina', 'Whiterun Breezehome', 'Female')

Select * FROM testTable 
```

那么如何一键执行`CREATE TABLE`,`INSERT INTO`和`SELECT`查询呢？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2016-03-29T03:22:46.890

您可以使用`Ctrl`++以分号结尾运行所有内容`Shift`。`Enter`

对于 Mac`⌘</kbd>+`shift`+`return``

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-23T17:12:52.440

在每条语句后添加分号：

```
CREATE TABLE testTable(
    Name VARCHAR(20),
    Address VARCHAR(50),
    Gender VARCHAR(10)
);

INSERT INTO testTable
VALUES
('Derp', 'ForeverAlone Street', 'Male'),
('Derpina', 'Whiterun Breezehome', 'Female');

SELECT * FROM testTable; 
```

# java - 如何将自签名证书正确导入默认情况下可供所有 Java 应用程序使用的 Java 密钥库？

> ID：11617210
> 
> 赞同：169
> 
> 时间：2012-07-23T17:10:59.117
> 
> 标签：java, certificate, ssl-certificate, keystore, keytool

我确实想将自签名证书导入 Java，因此任何尝试建立 SSL 连接的 Java 应用程序都会信任此证书。

到目前为止，我设法将其导入

```
keytool -import -trustcacerts -noprompt -storepass changeit -alias $REMHOST -file $REMHOST.pem
keytool -import -trustcacerts -noprompt -keystore cacerts -storepass changeit -alias $REMHOST -file $REMHOST.pem 
```

尽管如此，当我尝试运行时，[`HTTPSClient.class`](http://adywicaksono.wordpress.com/2007/07/15/ssl-connection-with-java/)我仍然得到：

```
javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径
```

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2012-07-23T17:43:09.460

**在 Windows**上，最简单的方法是使用程序[portecle](http://portecle.sourceforge.net/)。

1.  下载并安装portecle。
2.  首先要 100% 确定您知道使用哪个 JRE 或 JDK 来运行您的程序。在 64 位 Windows 7 上可能有很多 JRE。Process Explorer 可以帮助您解决此问题，或者您可以使用：`System.out.println(System.getProperty("java.home"));`
3.  将文件 JAVA_HOME\lib\security\cacerts 复制到另一个文件夹。
4.  在 Portecle 中单击文件 > 打开密钥库文件
5.  选择 cacerts 文件
6.  输入此密码：changeit
7.  单击工具 > 导入可信证书
8.  浏览文件 mycertificate.pem
9.  点击导入
10.  单击确定以获取有关信任路径的警告。
11.  当它显示有关证书的详细信息时，单击确定。
12.  单击是以接受证书为受信任的。
13.  当它要求输入别名时，单击确定，当它说它已导入证书时再次单击确定。
14.  点击保存。不要忘记这一点，否则更改将被丢弃。
15.  将文件 cacerts 复制回您找到它的位置。

**在 Linux 上：**

您可以从已经在使用它的 Web 服务器下载 SSL 证书，如下所示：

```
$ echo -n | openssl s_client -connect www.example.com:443 | \
   sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' > /tmp/examplecert.crt 
```

（可选）验证证书信息：

```
$ openssl x509 -in /tmp/examplecert.crt -text 
```

将证书导入 Java cacerts 密钥库：

```
$ keytool -import -trustcacerts -keystore /opt/java/jre/lib/security/cacerts \
   -storepass changeit -noprompt -alias mycert -file /tmp/examplecert.crt 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2015-03-19T01:04:46.390

```
 D:\Java\jdk1.5.0_10\bin\keytool -import -file "D:\Certificates\SDS services\Dev\dev-sdsservices-was8.infavig.com.cer" -keystore "D:\Java\jdk1.5.0_10\jre\lib\security\cacerts" -alias "sds certificate" 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2015-02-04T14:48:12.477

我最终编写了一个将证书添加到密钥库的小脚本，因此它更易于使用。

您可以从[https://github.com/ssbarnea/keytool-trust获取最新版本](https://github.com/ssbarnea/keytool-trust)

```
#!/bin/bash
# version 1.0
# https://github.com/ssbarnea/keytool-trust
REMHOST=$1
REMPORT=${2:-443}

KEYSTORE_PASS=changeit
KEYTOOL="sudo keytool"

# /etc/java-6-sun/security/cacerts

for CACERTS in  /usr/lib/jvm/java-8-oracle/jre/lib/security/cacerts \
    /usr/lib/jvm/java-7-oracle/jre/lib/security/cacerts \
    "/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/security/cacerts" \
    "/Applications/Xcode.app/Contents/Applications/Application Loader.app/Contents/MacOS/itms/java/lib/security/cacerts"
do

if [ -e "$CACERTS" ]
then
    echo --- Adding certs to $CACERTS

# FYI: the default keystore is located in ~/.keystore

if [ -z "$REMHOST" ]
    then
    echo "ERROR: Please specify the server name to import the certificatin from, eventually followed by the port number, if other than 443."
    exit 1
    fi

set -e

rm -f $REMHOST:$REMPORT.pem

if openssl s_client -connect $REMHOST:$REMPORT 1>/tmp/keytool_stdout 2>/tmp/output </dev/null
        then
        :
        else
        cat /tmp/keytool_stdout
        cat /tmp/output
        exit 1
        fi

if sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' </tmp/keytool_stdout > /tmp/$REMHOST:$REMPORT.pem
        then
        :
        else
        echo "ERROR: Unable to extract the certificate from $REMHOST:$REMPORT ($?)"
        cat /tmp/output
        fi

if $KEYTOOL -list -storepass ${KEYSTORE_PASS} -alias $REMHOST:$REMPORT >/dev/null
    then
    echo "Key of $REMHOST already found, skipping it."
    else
    $KEYTOOL -import -trustcacerts -noprompt -storepass ${KEYSTORE_PASS} -alias $REMHOST:$REMPORT -file /tmp/$REMHOST:$REMPORT.pem
    fi

if $KEYTOOL -list -storepass ${KEYSTORE_PASS} -alias $REMHOST:$REMPORT -keystore "$CACERTS" >/dev/null
    then
    echo "Key of $REMHOST already found in cacerts, skipping it."
    else
    $KEYTOOL -import -trustcacerts -noprompt -keystore "$CACERTS" -storepass ${KEYSTORE_PASS} -alias $REMHOST:$REMPORT -file /tmp/$REMHOST:$REMPORT.pem
    fi

fi

done 
```

```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-03-23T07:14:35.153

这对我有用。:)

```
sudo keytool -importcert -file filename.cer -alias randomaliasname -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass changeit 

```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-05-08T10:53:01.807

如果您使用的是 Java cacerts 文件中默认不包含的证书颁发机构签名的证书，则需要完成以下 HTTPS 连接配置。要将证书导入 cacerts：

1.  打开 Windows 资源管理器并导航到 cacerts 文件，该文件位于安装 AX Core 客户端的 jre\lib\security 子文件夹中。默认位置是 C:\Program Files\ACL Software\AX Core Client\jre\lib\security

2.  在进行任何更改之前创建文件的备份副本。

3.  根据您从使用的证书颁发机构收到的证书，您可能需要将中间证书和/或根证书导入 cacerts 文件。使用以下语法导入证书：

    `keytool -import -alias <alias> -keystore <cacerts_file> -trustcacerts -file <certificate_filename>`

4.  如果您要导入两个证书，则为每个证书指定的别名应该是唯一的。

5.  在“密码”提示符处键入密钥库的密码，然后按 Enter。cacerts 文件的默认 Java 密码是“changeit”。在“信任此证书？”中键入“y” 提示并按 Enter。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-07-01T16:53:11.793

你可以使用`keytool`你的 Java 安装，它应该在`$JAVA_HOME/bin`. Java 密钥库位于`$JAVA_HOME/lib/security/cacerts`或`$JAVA_HOME/jre/lib/security/cacerts`取决于您是否安装了 JDK 或 JRE。

如果使用 Java 9 或更高版本，则无需知道确切位置。您可以将该`-cacerts`选项用作快捷方式。

## Java 9+

因此，对于 Java 9（又名 Java 1.9）或更高版本，只需使用

```
keytool -importcert -trustcacerts -cacerts -file myCert.pem -alias myCert 
```

## 早期的 Java 版本

对于 Java 8（又名 1.8）或更早版本，您必须像这样指定密钥库位置

```
keytool -importcert -trustcacerts -keystore $JAVA_HOME/lib/security/cacerts -file myCert.pem -alias myCert 
```

对于 Java 5（又名 1.5）或更早版本，该`-importcert`选项不存在。它被称为`-import`，但除此之外它是相同的。所以使用

```
keytool -import -trustcacerts -keystore $JAVA_HOME/lib/security/cacerts -file myCert.pem -alias myCert 
```

## 附加选项

*   您将被要求输入信任库密码，默认密码是*changeit*。
*   如果需要在无人值守的情况下运行导入，可以添加`-storepass changeit -noprompt`

## 格式

`keytool`可以导入 X.509 v1、v2 和 v3 证书，以及由该类型 (P7B) 证书组成的 PKCS#7 格式证书链。必须提供要导入的数据

*   采用二进制编码格式 (DER)
*   或以可打印的编码格式（又名 base64 编码），包含在`-----BEGIN`和`-----END`行（PEM）中

*注意：我不确定 PEM 格式的证书链是否真的有效。*

## 奖金脚本

恐怕，它是 bash，所以对于 Windows 用户没有解决方案。

这个简单的脚本是由 stackoverflow 上的几个有用的问题和聪明的答案创建的，它检查 Java 版本并 - 如有必要 - 确定正确的密钥库位置，并且它可以在一个命令中导入多个证书。请注意，您必须在单引号中传递文件模式参数（请参阅用法）。

addcerts.sh

```
#!/bin/bash

# Add custom root certificates to Java trust store

if [ "$#" -ne 1 ]; then
    SCRIPT=`basename "$0"`
    echo "Usage: $SCRIPT 'path/to/certs/*'"
    exit 1
fi

CERTFILES=$1    

JAVA_VERSION=`java -version 2>&1 | head -1 | cut -d'"' -f2 | sed '/^1\./s///' | cut -d'.' -f1`

if (( $JAVA_VERSION >= 9 )); then
    CACERTS="-cacerts"
else    
    # Check where cacerts are located
    # differs depending or jdk or jre installed
    if [ -d "$JAVA_HOME/jre" ]; then
        CACERTS="$JAVA_HOME/jre"
    else
        CACERTS="$JAVA_HOME"
    fi
    CACERTS="-keystore $CACERTS/lib/security/cacerts"   
fi      

# Now add certificates 
for CERTFILE in $CERTFILES; do
    # Remove path, then suffix to derive alias from filename
    ALIAS=${CERTFILE##*/}  
    ALIAS=${ALIAS%.*}
    $JAVA_HOME/bin/keytool -importcert -file "$CERTFILE" -alias "$ALIAS" $CACERTS -trustcacerts -storepass changeit -noprompt
    if [ $? -ne 0 ]; then
        echo "Failed to add $CERTFILE as $ALIAS to $CACERTS"
        exit 1
    fi  
done 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-07-21T03:25:04.867

拳头从提供者那里获得证书。创建一个以 .cer 结尾的文件并粘贴证书。

复制文本文件或将其粘贴到您可以访问的地方，然后以管理员身份使用 cmd 提示符并 cd 到 jdk 的 bin；将使用的命令是： `keytool`

使用以下命令更改密钥库的密码：

```
keytool -storepasswd -keystore "path of the key store from c\ and down" 
```

密码是：`changeit`

然后您将被要求输入两次新密码。然后键入以下内容：

```
keytool -importcert -file "C:\Program Files\Java\jdk-13.0.2\lib\security\certificateFile.cer" -alias chooseAname -keystore  "C:\Program Files\Java\jdk-13.0.2\lib\security\cacerts" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-04T17:36:46.743

简单的命令“keytool”也适用于 Windows 和/或 Cygwin。

**如果您在**此处使用 Cygwin，则这是我从“S.Botha's”答案底部使用的修改后的命令：

1.  确保您在将要使用的 JDK 中识别出 JRE
2.  以管理员身份启动您的提示/cygwin
3.  进入该 JDK 的 bin 目录，例如 cd /cygdrive/c/Program\ Files/Java/jdk1.8.0_121/jre/bin
4.  在其中执行 keytool 命令，最后在其中提供新证书的路径，如下所示：

    ```
    ./keytool.exe -import -trustcacerts -keystore ../lib/security/cacerts  -storepass changeit -noprompt -alias myownaliasformysystem -file "D:\Stuff\saved-certs\ca.cert" 
    ```

请注意，因为如果这是在 Cygwin 下，您将给出非 Cygwin 程序的路径，因此该路径类似于 DOS 并用引号引起来。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-13T16:21:41.093

**在java linux中安装证书**

/opt/jdk(version)/bin/keytool -import -alias aliasname -file certificate.cer -keystore cacerts -storepass 密码

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-15T18:57:46.183

在 Windows 中，这些命令在命令行上运行：

```
cd C:\Program Files\Java\jre1.8.0_301\lib\security\
keytool -import -trustcacerts -alias cert_ssl -file C:\opt\esb-config\keystores\cert.cer -noprompt -storepass changeit -keystore cacerts 
```

`changeit`是信任库的默认密码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-14T14:42:41.107

可能想试试

```
keytool -import -trustcacerts -noprompt -keystore <full path to cacerts> -storepass changeit -alias $REMHOST -file $REMHOST.pem 
```

老实说，如果您只是写，我真的不知道它把您的证书放在哪里`cacerts`只是给它一个完整的路径

# javascript - d3.js 在 android 2.3 上的可视化

> ID：11617215
> 
> 赞同：5
> 
> 时间：2012-07-23T17:11:34.267
> 
> 标签：javascript, canvas, svg, cross-browser, d3.js

我知道 2.3 的 android 浏览器不支持 SVG，但我想知道是否可以在客户端使用[Canvg](http://code.google.com/p/canvg/)将 d3.js SVG 可视化转换为画布。浏览器是否能够解析 SVG 元素，或者这种从 SVG 到 Canvas 的转换是否需要在服务器端进行？提前致谢！

```
// Grab data from server...

var btoken = window.location.search.split( 'bearer_token=')[1].split('&')[0]; 
var endpoint = "http://dcaps-staging.media.mit.edu:8080/api/reality_analysis_service/get_reality_analysis_data?document_key=radialData&bearer_token=" + btoken;
console.log(endpoint);
  d3.json(endpoint, function(json){
  console.log(json);

  var data = json.radialData.data;
  var csvdata; 
      csvdata = data;

    //var data

var output_ = '';
for( property in data) {
output_ += property +':' + data[property]+';';
}
console.log(output_);

  var meta = json.radialData.meta;
  var capitalMeta = [];
  for (i = 0; i < meta.length; i++){
      capitalMeta.push(capitaliseFirstLetter(meta[i]));
  }

console.log(window.innerWidth, window.innerHeight )

//var width = 335,
  //  height = 340,
  var width = window.innerWidth - 5,
      height = window.innerHeight - (window.innerHeight * .35),
    outerRadius = height / 2 - 10,
    innerRadius = 120;

var angle = d3.scale.linear()
    .range([0, 2 * Math.PI]);

var radius = d3.scale.linear()
    .range([0, outerRadius]);

var z = d3.scale.category20();
var whiteColor = d3.rgb(255,255,255);
var redColor = d3.rgb(200,100,50);
var newColor = d3.rgb(100,100,100);
var pink = d3.rgb(238,98,226);

var stack = d3.layout.stack()
    .offset("zero")//.offset(function(d) { return d.y0; })
    .values(function(d) { return d.values; })
    .x(function(d, i) { return i; })
    .y(function(d) { return d.value; });

var replaceY0 = 0;

var nest = d3.nest()
    .key(function(d) { return d.layer; });

var line = d3.svg.line.radial()
    .interpolate("cardinal-closed")
    .angle(function(d,i) { return angle(i); })
    .radius(function(d) { return radius(replaceY0 + d.y); });

var lowestValues = [];

// parse response for lowest values
for (i = 0; i < csvdata.length; i++){
  if (csvdata[i].layer == "averageLow"){
      lowestValues.push(csvdata[i].value);
  }
}

var area = d3.svg.area.radial()
    .interpolate("cardinal-closed")
    .angle(function(d, i) { return angle(i); })
    //.innerRadius(function(d) { return radius(replaceY0); })
    .innerRadius(function(d, i) {
        if (d.layer == "User"){ // Hardcoded check right now, might change later...data tag must have USER in it...
          return radius(d.y);
        }
        else{
        return radius(lowestValues[i]);
      }
    })
    .outerRadius(function(d) { return radius(replaceY0 + d.y); });

var heightPadding = 20;
var widthPadding = 2;

var svg = d3.select("#radial_chart").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + ((width / 2) + widthPadding) + "," + ((height / 2) + heightPadding) + ")");

//console.log("data : ", data);
//console.log("svg : ", svg);

var output_SVG = '';
for( property in svg[0][0]) {
output_SVG += property +':' + data[property]+';';
}
console.log(output_SVG);

  var layers = stack(nest.entries(data));

  // Hardcoded swap for User and Average High
  var swapper = layers[2];
  layers[2] = layers[1];
  layers[1] = swapper;

//  console.log("LAYERS : ",layers);
console.log(capitalMeta[0]);

  // Extend the domain slightly to match the range of [0, 2π].
  angle.domain([0, layers.length]);
  //radius.domain([0, d3.max(data, function(d) { console.log("d.y0: ",d.y0); console.log("d.y: ",d.y); return d.y + replaceY0; })]);
  radius.domain([0, 10]);
  var x = svg.selectAll(".axis");
  alert(svg.toString());
  // create Axis
  svg.selectAll(".axis")
      .data(d3.range(angle.domain()[1]))
    .enter().append("g")
      .attr("class", "axis")
      .attr("transform", function(d) { return "rotate(" + angle(d) * 180 / Math.PI + ")"; })
    .call(d3.svg.axis()
      .scale(radius.copy().range([-5, -outerRadius]))
      .ticks(5)
      .orient("left"))
    .append("text")
      .attr("y", 
        function (d) {
          if (window.innerWidth < 455){
            console.log("innerWidth less than 455: ",window.innerWidth);
            return -(window.innerHeight * .33);
          }
          else{
            console.log("innerWidth greater than 455: ",window.innerWidth);
            return -(window.innerHeight * .33);
          }
        })
      .attr("dy", ".71em")
      .attr("text-anchor", "middle")
      .text(function(d, i) { return capitalMeta[i]; })
      .attr("style","font-size:12px;");

  svg.selectAll(".layer")
      .data(layers)
    .enter().append("path")
      .attr("class", "layer")
      .attr("d", function(d) { return area(d.values); })
      .style("fill",
        function(d, i) 
        {
          if (i === 0){
            return whiteColor;
          }
          else if (i == 1){
            return z(i);
          }
          else
          return newColor; 
        })
      .style("opacity",.6)
      .style("stroke",function(d, i){
       if (i == 0)
        return whiteColor;
      else if (i == 2)
        return pink;
      else if (i == 1)
        return whiteColor;
      })
      .style("stroke-width",function(d, i){

       if (i == 1){
          return 0;
        }
        else if (i == 0)
          return 0;
        else
          return 7;
      });
alert('finished');

/*

 // Create the svg drawing canvas...
      var canvas = d3.select("#radial_chart")
        .append("svg:svg")
          .attr("width", 300)//canvasWidth)
          .attr("height", 75)//canvasHeight);
          .attr("id","legend");

legendOffset = 35;
  legendMarginLeft = 60;

var arrayOfTypes = ["User","Average High-Low"];

      // Plot the bullet circles...
      canvas.selectAll("circle")
        .data(arrayOfTypes).enter().append("svg:circle") // Append circle elements
          .attr("cx", legendMarginLeft)// barsWidthTotal + legendBulletOffset)
    .attr("cy", function(d, i) { return legendOffset + i*25; } )
          .attr("stroke-width", ".5")
          .style("fill", function(d, i) { 
          if (i == 0)
            return pink;
          else
            return z(i) }) // Bar fill color
          .attr("r", 10);

      // Create hyper linked text at right that acts as label key...
      canvas.selectAll("a.legend_link")
        .data(arrayOfTypes) // Instruct to bind dataSet to text elements
        .enter().append("svg:a") // Append legend elements
      .append("text")
              .attr("text-anchor", "left")
              .attr("x", legendMarginLeft+15)
        .attr("y", function(d, i) { return legendOffset + i*24 - 10; })
              .attr("dx", 5)
              .attr("dy", "1em") // Controls padding to place text above bars
              .text(function(d, i) { return arrayOfTypes[i];})
              .style("color","white")
*/

//                 canvg();
    alert('finished');

  });

function capitaliseFirstLetter(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T17:41:18.700

[Android 确实支持 Canvas](http://caniuse.com/#feat=canvas)，所以这当然是一个不错的选择（就 SVG 支持而言，[Android 2.3 不兼容是对的](http://caniuse.com/#cats=SVG)）。

d3中其实可以直接使用canvas；这是 Mike Bostock 进行的比较，通过一个简单的示例展示了使用 SVG 和 Canvas 之间的区别：

[帆布群](http://bl.ocks.org/2647922)/ [SVG 群](http://bl.ocks.org/2647924)

请记住，您不仅限于 SVG 或 Canvas；例如， 已经看到[www.nytimes.com/interactive](https://www.google.com/search?q=inurl:nytimes.com/interactive)使用 d3.js 和 HTML 元素进行可视化（我怀疑更好的跨浏览器支持）。
见：[http ://www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html](http://www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T21:26:07.403

实际上，您可以使用 Canvg 在客户端将 d3 的 SVG 显示为画布。按照此处的代码：http: [//jsfiddle.net/plaliberte/HAXyd/](http://jsfiddle.net/plaliberte/HAXyd/)您只需将带有生成的 SVG 的 div 提供给 Canvg 函数。唯一的问题是，如果您在 d3 操作的一部分中使用“.style”，它会由于某种原因引发错误。例如：

```
.style("text-anchor","middle") 
```

在 Android 2.x 中，它会抛出：

```
TypeError: Result of expression 'this.style' [null] is not an object 
```

因此，您需要修改这些方法以使用 .attr("style" 代替：

```
.attr("style", "text-anchor:middle") 
```

d3 内部也有使用 style 方法的函数，如axis，因此您可能还需要在库中进行这种替换。

# c# - WPF 中的颜色过渡

> ID：11617216
> 
> 赞同：7
> 
> 时间：2012-07-23T17:11:35.170
> 
> 标签：c#, wpf, xaml, colors, transition

我想对`Background`WPF 窗口的颜色进行颜色转换。

**我怎样才能做到这一点？**

例如：

```
Brush i_color = Brushes.Red; //this is the initial color
Brush f_color = Brushes.Blue; //this is the final color 
```

当我点击`Button`button1

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    this.Background = f_color; //here the transition begins. I don't want to be quick. Maybe an interval of 4 seconds.
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T17:29:27.670

在代码中可以用这个来完成

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    ColorAnimation ca = new ColorAnimation(Colors.Red, Colors.Blue, new Duration(TimeSpan.FromSeconds(4)));
    Storyboard.SetTarget(ca, this);
    Storyboard.SetTargetProperty(ca, new PropertyPath("Background.Color"));

    Storyboard stb = new Storyboard();
    stb.Children.Add(ca);
    stb.Begin();
} 
```

正如 HB 指出的那样，这也可以

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    ColorAnimation ca = new ColorAnimation(Colors.Blue, new Duration(TimeSpan.FromSeconds(4)));
    this.Background = new SolidColorBrush(Colors.Red);
    this.Background.BeginAnimation(SolidColorBrush.ColorProperty, ca);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T17:23:02.460

这是一种方法：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Grid x:Name="BackgroundGrid" Background="Red">

        <Button HorizontalAlignment="Left" VerticalAlignment="Top">
            Transition
            <Button.Triggers>
                <EventTrigger RoutedEvent="Button.Click">
                    <BeginStoryboard>
                        <Storyboard>
                            <ColorAnimation  Storyboard.TargetName="BackgroundGrid" From="Red" To="Blue" Duration="0:0:4" Storyboard.TargetProperty="Background" />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Button.Triggers>
        </Button>
    </Grid>
</Window> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T17:19:59.777

您可以使用[动画](http://msdn.microsoft.com/en-us/library/ms752312.aspx)（阅读此内容），特别是 a [`ColorAnimation`](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.coloranimation.aspx)（参见示例）或[`ColorAnimationUsingKeyframes`](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.coloranimationusingkeyframes.aspx).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-21T14:50:33.040

只是为了完成 LPL 和 HB 的回答.....在我的情况下，我需要将控件恢复为与动画之前相同的颜色。

这是我的代码

```
ColorAnimation animation = new ColorAnimation()
{
    From = Colors.Orange,
    To = ((SolidColorBrush)myControl.Background).Color,//Revert to initial control Color
    Duration = new Duration(TimeSpan.FromSeconds(2))
};

myControl.Background = new SolidColorBrush(Colors.Orange);//Do not use a frozen instance
myControl.Background.BeginAnimation(SolidColorBrush.ColorProperty, animation); 
```

# ruby-on-rails - 编码未定义的转换错误 - Ruby on Rails，写入错误

> ID：11617217
> 
> 赞同：12
> 
> 时间：2012-07-23T17:11:38.593
> 
> 标签：ruby-on-rails, ruby

所以我试图从网站下载一个 zip 文件并将该数据放入一个表中。以前可以下载，但是突然不行了。我得到一个“`write': "\xB6" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)”问题。很奇怪，自从我上次运行脚本以来，什么都没有改变。这是有问题的代码部分。我正在使用一个 gem，它允许我解析 zip 文件中的 DBF 文件。

这是代码：

```
`write': "\xB6" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError) 
```

谢谢您的帮助

更新：显然，我正在轨道内运行。我在 rails 环境之外运行脚本，它运行良好。所以 Rails 以某种方式干扰了写入过程。

更新2：已解决-我将“w”更改为“wb”显然这是由rails 3+引起的。我以前没想过要尝试这个。希望这对其他人有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:39:30.463

你可能也可以通过

```
:output_encoding => "binary" 
```

to `File.open`，我认为这与模式'wb'做同样的事情，也许更清楚。但是搞清楚'wb'做得很好:)。

是的，在 ruby​​ 1.9 中，它支持字符编码，你经常需要告诉你想要的编码不同的东西，包括“空编码”“二进制”。

Rails 可能将 设置`Encoding.default_external`为 UTF-8，并且`File`正在使用`Encoding.default_external`，这可能就是为什么 rails 与 not-rails 会有所不同。

ruby 1.9 中的编码问题肯定会很快变得非常混乱，有很多通常隐藏的状态会影响所发生的事情。

# javascript - 加载谷歌图表 API 时，PhoneGap (Cordova) 应用程序崩溃

> ID：11617219
> 
> 赞同：1
> 
> 时间：2012-07-23T17:11:46.483
> 
> 标签：javascript, jquery-mobile, cordova, google-visualization

**我正在 iOS 模拟器上测试这个应用程序**

每当我运行此代码时：

```
google.load("visualization", "1", {packages:["corechart"]}); 
```

我的 phonegap 应用程序崩溃到完全白屏。我有一个页面，其中有一些随机内容和一个按钮，它被分配了一个`.click()` `jQuery`侦听器以开始加载谷歌图表 api。每当我单击该按钮时，一切都会消失，我只剩下一个空白屏幕。

这是代码：

```
$( '#chartsThirdStep' ).live( 'pageinit',function(event){

    $("#chartThirdStepGoButton").click(function(event){

        parseChartInfo();
    });
});

function parseChartInfo() {

    console.log("parseChartInfo()");
    google.load("visualization", "1", {packages:["corechart"]});
    // app completely crashes here - all jquery mobile stuff dissapears
    // and i'm left with a blank screen on the simulator.
    //google.setOnLoadCallback(drawChart);
} 
```

我在用着：

*   Xcode v4.2
*   科尔多瓦 v1.9.0
*   jQuery手机版 v1.1.1
*   jQuery v1.7.1
*   [https://www.google.com/jsapi](https://www.google.com/jsapi)
*   Mac OS X v10.6.8
*   iOS 模拟器 v5.0 (272)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T06:10:32.790

首先，您需要在“就绪”事件处理程序之外加载 API，因为加载程序在其他函数中似乎无法正常工作。
其次，将 click 事件处理程序放在 google.load 回调中，这将防止在 API 加载之前分配 click 事件（因此用户不能在 API 加载之前尝试绘制图表，尽管它通常加载得足够快，以至于您的用户永远不会注意到差异）

# c# - 如何使用 C# 创建没有包含元素的 XML？

> ID：11617222
> 
> 赞同：0
> 
> 时间：2012-07-23T17:11:56.047
> 
> 标签：c#, linq-to-xml

我正在使用以下内容：

```
XElement select = new XElement("select");
XElement optGroup = null;

if (topics.Count() > 0) {
    optGroup = new XElement("optgroup", new XAttribute("label", "Admin"));
    optGroup.Add(new XElement("option", new XAttribute("value", "99"), new XText("Select Topic")));
    optGroup.Add(new XElement("option", new XAttribute("value", "00"), new XText("All Topics")));
    select.Add(optGroup);
    foreach (var topic in topics) {
        // skip root topic
        if (!topic.RowKey.EndsWith("0000")) {
            // optgroup
            if (topic.RowKey.EndsWith("00")) {
                optGroup = new XElement("optgroup", new XAttribute("label", topic.Title));
                select.Add(optGroup);
            }
                // option
            else if (optGroup != null) {
                optGroup.Add(new XElement("option", new XAttribute("value", topic.RowKey), new XText(topic.Title)));
            }
        }
    }
} else {
    optGroup = new XElement("optgroup", new XAttribute("label", "Admin"));
    optGroup.Add(new XElement("option", new XAttribute("value", "88"), new XText("No Topics")));
}                     
return (select.ToString()); 
```

它处理变量中的行并使用数据为 HTML 创建`<select> ... </select>`元素。

它可以工作，但是我需要的是打开和关闭元素的内容，`<select>`而不是打开`<select>`和关闭`</select>`元素。有什么方法可以让这个只返回内容而不是外部`<select>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:21:12.810

只需从结果中修剪你不想要的东西。

```
return (select.ToString().Replace("<select>","").Replace("</select>","")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:21:47.343

添加

```
using System.Xml.XPath; 
```

[`Extensions`](http://msdn.microsoft.com/en-us/library/bb299124.aspx)访问该命名空间中类中定义的扩展方法以获取 an[`XPathNavigator`](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnavigator.aspx)及其[`InnerXml`](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnavigator.innerxml.aspx)属性：

```
string inner = select.CreateNavigator().InnerXml; 
```

# java - JTable 按日期排序

> ID：11617224
> 
> 赞同：0
> 
> 时间：2012-07-23T17:12:00.643
> 
> 标签：java, swing, sorting, jtable

我有一个包含两列**fileName**和**date modified的****JTable**。我为第一列添加了名称**字符串**，并为第二个 dateTime 列添加了名称。******`new Date(tempFile.lastModified())`******

 ******我将 dateTime 列呈现为`new SimpleDateFormat("MM/dd/yy HH:mm:ss")`字符串。

我还启用了 `m_listTbl.setAutoCreateRowSorter(true);`

但是**修改日期**列的排序结果不对。

![在此处输入图像描述](../Images/47dd584985a0a20b372394b7c621ab85.png)

为什么是这样？我还需要编写自己的分拣机吗？

**编辑：**

在注释掉几乎所有额外的代码并且不按日期字符串呈现后，我得到了以下结果。默认情况下，在 JTable Java 中似乎按**天对****Date**对象进行排序。我将进行更多测试以查看我的代码有什么问题。 **![在此处输入图像描述](../Images/99c8af6702c39df767efb025377a4658.png)**

 ****编辑2**

我已经测试并弄清楚了。如果您使用 DefaultTableModel 而不覆盖其 getColumnClass() 方法，您将遇到 Date 或 Number 列的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:33:27.653

EDIT2：当然。在链接到 a 的 jtable 中遇到同样的问题，`tablemodel`我可以确认问题是由于与`tableModel`. 令人惊讶的是 Date 列属于 Object 类，无论`DefaultTableModel`在覆盖 public Object 时在我的子类中返回了完美类型 Date `getValueAt(int row, int col)`。

`getColumnClass`解决方法是在您的子类中覆盖`DefaultTableModel`. 如果您不这样做，那么当您对 Date 列进行排序时，会在 Object for Dates 上进行排序，结果会很奇怪。********

# javascript - CSS 制作不同级别的 div。

> ID：11617225
> 
> 赞同：0
> 
> 时间：2012-07-23T17:12:06.310
> 
> 标签：javascript, jquery, html, css

我有一个网站，基本上是做盒子的，你可以点击盒子，它会展开，如果你再次点击盒子，它就会恢复到原来的大小。这是通过以下方式完成的：

```
$container.on(
  "click",
  ".resultLike",
  function(event){
    $('.resultLike').html("liked");
  }
); 
```

不，那个盒子里面有一个叫做 的 div `resultLike`，当你点击它时，它也会调用一个函数，但问题是盒子关闭了。我想知道是否有一些 css 魔法可以改变这一点。

我尝试将其设置`z-index`为高于该框的数字。徒劳无功。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:17:48.107

您需要停止传播`e.stopPropagation()`：http: [//jsfiddle.net/WouterJ/MVNTW/1/](http://jsfiddle.net/WouterJ/MVNTW/1/)

# javascript - 有没有更好的方法来获得同级别的上一个项目？

> ID：11617226
> 
> 赞同：2
> 
> 时间：2012-07-23T17:12:18.850
> 
> 标签：javascript, jquery

我有这样的表格行：

```
<tr class="parent0 row3" data-parent="0">
   <td>...</td>
</tr>
<tr class="parent3 row7" data-parent="3">
   <td>...</td>
</tr>
<tr class="parent3 row12" data-parent="3">
   <td>...</td>
</tr>
<tr class="parent0 row8" data-parent="0">
   <td>...</td>
</tr>
<tr class="parent0 row9" data-parent="0">
   <td>...</td>
</tr> 
```

所以如果我有一个点击处理程序：

```
$(document).on({
   "click": function(){
      var parentId = $(this).data("parent");
      //get previous sibling:
      //OPTION A:
      var prevParentA = 
              $(this).prev("parent" + parentId); //works sometimes
      //OPTION B:
      var prevParentB = 
              $(this).prevAll("parent" + parentId).eq(0); //works all the time but ugly...
   }

}, "tr"); 
```

**选项 A**仅在直接上一个项目具有相同父项时才有效，但当情况**并非**如此时，`prevParentA === []`这**不是**所需的结果。
**选项 B**似乎总是有效，但它**很难**看，因为它选择了与该类匹配的**所有先前项目并选择它找到的第一个项目。**

有比**选项 B**更好的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T17:24:04.267

jQuery 没有比您的选项 B 更好的东西了。我一直认为这是一个缺失的功能，因为我也经常想要类似的东西。幸运的是，制作自己的方法并不难：

```
jQuery.fn.prevFind = function(selector) {
    var elems = [];
    this.each(function(i, item) {
        while (item = item.previousSibling) {
            if (item.nodeType == 1) {
                if ($(item).is(selector)) {
                    elems.push(item);
                    break;
                }
            }
        }
    });
    return(this.pushStack(elems, "prevFind", selector));
} 
```

也可以这样做`nextFind()`。

在你的例子中，而不是这个：

```
$(this).prevAll("parent" + parentId).eq(0); 
```

你会用这个：

```
$(this).prevFind("parent" + parentId) 
```

* * *

而且，这是两者的实现，`prevFind()`并且`nextFind()`使用了一些通用代码：

```
(function($) {

    $.each({
        'prevFind' : 'previousSibling',
        'nextFind' : 'nextSibling'
    }, function(method, dir) {

        $.fn[method] = function (selector) {

            var elems = [];

            this.each(function(i, item) {
                while (item = item[dir]) {
                    if (item.nodeType == 1) {
                        if ( $.find.matches(selector, [item]).length ) {
                            elems.push(item);
                            break;
                        }
                    }
                }
            });

            return this.pushStack(elems, method, selector);
        };
    });

}(jQuery)); 
```

这是小提琴：http: [//jsfiddle.net/nDYDL/1/](http://jsfiddle.net/nDYDL/1/)

# coldfusion - 向 CFC 发送参数时出现问题

> ID：11617227
> 
> 赞同：0
> 
> 时间：2012-07-23T17:12:19.977
> 
> 标签：coldfusion, cfc

我在传递参数时遇到问题：

```
<cfset result = news.updateNews(form.id, form['title'&form.id])> 
```

我收到最后一个参数的错误，说“元素 title2 在类型为coldfusion.filter.FormScope 的Java 对象中未定义。”。

有小费吗？否则语法应该是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T17:26:36.267

提供的语法期望：

1.  您有一个 HTML 表单，并且
2.  该表单中有一个名为“title2”的字段

如果不这样做，则意味着您错误地将 form.id（在此示例中为“2”）与表单字段名称“title”混合，创建了变量“title2”，该变量预计将存在于表单中范围（来自您的表单提交）。

如果您的表单中*确实*有一个名为“title2”的字段，那么**您的代码将起作用**。我用这个简单的表单脚本亲自测试了它：

```
<cfif isDefined('form.submit')>
    <!--- here's your syntax --->
    <cfoutput>#form['title'&form.id]#</cfoutput>
</cfif>

<form action="form.cfm" method="post">
    <input type="hidden" name="id" value="2" />
    <input type="text" name="title2" value="" />
    <input type="submit" name="submit" />
</form> 
```

您以某种方式想出了一个边缘条件，可能会阻止表单字段 'title2'*存在*。如果没有进一步的代码或解释，我们真的无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:26:29.493

假设变量存在：

```
<cfset result = news.updateNews( form.id, evaluate('form.title#form.id#') ) > 
```

是一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:34:03.500

您正在传入名为“title2”的成员，它是“title”和“form”的结果，它是“title”和 form.I'd 的结果。如果您尝试传入表单 ID，只需使用 form.Id 而不将其包装在表单结构指示符中。如果你试图传入一个名为'title'的表单输入，只需传入form.title。如果您尝试同时传递 form.id 和 form.title，请将它们传递到单独的参数中。

# google-drive-api - https://www.googleapis.com/upload/drive/v2/files 真的支持 CORS 吗？

> ID：11617229
> 
> 赞同：3
> 
> 时间：2012-07-23T17:12:22.157
> 
> 标签：google-drive-api, cors

**更新：**这是 GoogleDrive 中的一个错误，没有为上传 URI 启用 CORS。@Nivco 向我指出了使用 iframe 和代理（不是 CORS）的 Google 客户端库的解决方法。我将（经过测试的）工作代码放在底部，并附有详细说明。请参阅下面的示例的答案。

[Inserting File to Google Drive through API](https://stackoverflow.com/questions/10317638/inserting-file-to-google-drive-through-api) and [Authorization of Google Drive using JavaScript](https://stackoverflow.com/questions/10330992/authorization-of-google-drive-using-javascript)说上传端点支持CORS，但我一直无法使用它们。[我可以使用Files: insert](https://developers.google.com/drive/v2/reference/files/insert)获得授权并插入一个空文件，但我无法将内容上传到其中 - 使用[https://www.googleapis.com/upload时出现 405（不允许的方法）错误/drive/v2/files](https://www.googleapis.com/upload/drive/v2/files)当我使用插入文件堆栈溢出帖子中示例中给出的两种技术中的任何一种时。

CORS 是否可能适用于 v1 而尚未启用 v2？

编辑：顺便说一句，405 错误出现在 chrome 正在发出的 OPTIONS 请求中。

编辑：这是我的一次尝试中的代码：

在我展示代码之前，我想强调一下我能够验证和列出文件。我只是无法将数据上传到文件。

```
var xhr = new XMLHttpRequest();
xhr.open('POST', 'https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart');
xhr.setRequestHeader('Authorization', 'Bearer ' + params.access_token);
xhr.setRequestHeader("Content-Type",  'multipart/related; boundary="END_OF_PART"');
xhr.onreadystatechange = function(data) {
  if (xhr.readyState == DONE) {
    document.getElementById("files").innerHTML = "Uploaded file: " + xhr.responseText;
    };
  }
xhr.send([
  mimePart("END_OF_PART", "application/json", json),
  mimePart("END_OF_PART", "text/plain", "a\nb\n"),
  "\r\n--END_OF_PART--\r\n",
].join(''));
function mimePart(boundary, mimeType, content) {
  return [
    "\r\n--", boundary, "\r\n",
    "Content-Type: ", mimeType, "\r\n",
    "Content-Length: ", content.length, "\r\n",
    "\r\n",
    content,
  ].join('');
} 
```

这是请求：

```
Request URL:https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart
Request Method:OPTIONS 
```

这是回应：

```
Status Code:405 Method Not Allowed
cache-control:no-cache, no-store, must-revalidate
content-length:0
content-type:text/html; charset=UTF-8
date:Mon, 23 Jul 2012 22:41:29 GMT
expires:Fri, 01 Jan 1990 00:00:00 GMT
pragma:no-cache
server:HTTP Upload Server Built on Jul 17 2012 16:15:04 (1342566904)
status:405 Method Not Allowed
version:HTTP/1.1 
```

没有响应，因为 Chrome 收到该 OPTIONS 请求的 405 错误。没有 POST，因为 Chrome 无法继续，因为它的 OPTIONS 请求以 405 失败，因此它在控制台中打印此错误：

```
XMLHttpRequest cannot load https://www.googleapis.com/upload/drive/v2/files?uploadType=multipart. Origin https://leisurestorage.appspot.com is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T00:03:49.280

看来您是对的，上传 API 端点似乎不支持 CORS 请求，而其他端点确实支持它（抱歉没有彻底测试）。这是一个错误，我们已经让我们的工程团队知道了这个问题。

与此同时，似乎唯一的解决方法是使用 Javascript 客户端库并利用它使用的 iframe 代理，如[使用 JavaScript 授权 Google Drive 中所述](https://stackoverflow.com/questions/10330992/authorization-of-google-drive-using-javascript)

感谢您提出这个问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T19:32:11.703

CORS 现在已完全启用。有关如何使用 vanilla JS 进行可恢复上传的示例，请参阅[https://github.com/googledrive/cors-upload-sample 。](https://github.com/googledrive/cors-upload-sample)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:06:32.803

**这个答案（实际上是问题本身）现在是多余的，因为 Steve Bazyl 证实了完全的 CORS 支持**

工作代码，使用@Nivco 的帮助，以及详细说明：

这是对这项技术进行全面测试的工作代码。要使用它，您需要制作两个页面。第一个页面验证并启动第二个页面，这是您的实际应用程序。为了能够访问 Google Drive API 来上传文件，您需要注册一个应用程序，这在[此处](https://developers.google.com/drive/get-started)进行了描述。

您的第一页将使用 OAuth，[此 Stackoverflow 答案](https://stackoverflow.com/a/7947238/1026782)中对此进行了描述。它使用如下所示的片段调用您的应用程序：

```
#access_token=ya29.AHES6ZSb4M4ju8U_X_zgFrz_MD2RsjrQu5V05HjsBtrCl0nh2SrnaA&token_type=Bearer&expires_in=3600 
```

在 JavaScript 中，您可以使用`location.hash`. 保存值后，最好立即设置`location.hash`为空字符串，这样它就不会显示在浏览器的地址栏中。您的应用程序需要在其 CORS 请求以及对上传 API 的代理（非 CORS）请求中使用片段中的 access_token 值。这是一个示例启动页面，它实际上只是 OAuth 示例中代码的一个版本：

```
<html>
  <body>
    <a href="javascript:poptastic('https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file&client_id=270759921607.apps.googleusercontent.com&redirect_uri=https://leisurestorage.appspot.com&response_type=token');">Authorize Leisure Storage</a><br>
    <script>
      function poptastic(url) {
        var newWindow = window.open(url, 'name', 'height=600,width=450');
        if (window.focus) {
          newWindow.focus();
        }
      }
    </script>
  </body>
</html> 
```

这是一个示例应用程序，它使用 Google 的 JavaScript 客户端库上传`a\na\b\n`到您的 GoogleDrive 中调用的文件。`leisureUpload`不需要使用任何 gapi.auth 方法，因为它直接在调用中使用带有 Authorization 标头的原始 gapi.client.request() 调用，就像使用 CORS 使用 xmlHttpRequest() 一样：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Leisure</title>
    <script type="text/javascript">
    var hash = location.hash.substring(1).split('&');
    location.hash = '';
    var params = {};

    for (var i = 0; i < hash.length; i++) {
        var p = hash[i].split('=');

        params[p[0]] = p[1];
    }
    function gapiClientLoaded() {/* do nothing */}
    function uploadTestFile() {
        var json = JSON.stringify({
            mimeType: 'text/plain',
            title: 'leisureUpload',
        });
        var xhr = new XMLHttpRequest();

        gapi.client.request({
            'path': '/upload/drive/v1/files',
            'method': 'POST',
            'params': {'uploadType': 'multipart'},
            'headers': {
                'Content-Type': 'multipart/mixed; boundary="END_OF_PART"',
                'Authorization': 'Bearer ' + params.access_token,
            },
            'body': [
                mimePart("END_OF_PART", "application/json", json),
                mimePart("END_OF_PART", "text/plain", "a\nb\n"),
                "\r\n--END_OF_PART--\r\n",
            ].join('')
        }).execute(function(file) {
            document.getElementById("result").innerHTML = "Uploaded file: " + file;
        });
    }
    function mimePart(boundary, mimeType, content) {
        return [
            "\r\n--", boundary, "\r\n",
            "Content-Type: ", mimeType, "\r\n",
            "Content-Length: ", content.length, "\r\n",
            "\r\n",
            content,
        ].join('');
    }
    </script>
    <script src="https://apis.google.com/js/client.js?onload=gapiClientLoaded"></script>
  </head>
  <body>
    <h1>Welcome to Leisure!</h1>
    <button onclick="uploadTestFile()">Upload Test File</button><br>
    <pre id="result"></pre>
  </body>
</html> 
```

# c# - c#中神秘的“F冒号”

> ID：11617234
> 
> 赞同：11
> 
> 时间：2012-07-23T17:12:37.230
> 
> 标签：c#, syntax

我正在使用 ReSharper 重构一些 c# 代码。我遇到的一件事是我不熟悉的 ac# 运算符。

在我的代码中，我有这个

```
Mathf.FloorToInt(NumRows/2) 
```

其中 NumRows 是一个整数。ReSharper 建议我应该将其更改为

```
Mathf.FloorToInt(f: NumRows/2) 
```

我很确定这`f:`是一些标志，它告诉它将 NumRows 转换为浮点数，但我找不到任何`f:`在线文档。谁能详细说明究竟是什么`f:`或将我链接到有关它的 MSDN 页面？

（虽然我很清楚 f: 的作用，但很难在互联网上搜索冒号，我想在使用它之前知道它的作用）

**更新 1：**无论我想做什么，我都对 f 冒号语法感兴趣

**更新 2：**原来它实际上是 Visual Studio 建议我*可以*添加参数名称“f”而不是 ReSharper，但这不会改变正确的答案..

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-23T17:14:20.947

这是一个[命名参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。看 的定义`Mathf.FloorToInt`，它会有一个名为 的参数`f`。

Resharper 表示，在这种情况下，通过使用命名参数可以使代码更具可读性。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-23T17:15:53.940

在 C# 4.0 中，您可以在方法调用中切换参数表达式。

当只有一个参数时，它对你没有多大帮助，如果有的话：毫无疑问，如果只有一个参数，表达式代表什么。但是，使用多个参数时，该功能变得更加有用：您可以将参数名称与表示其值的表达式配对，并以您喜欢的任何顺序传递参数。您的程序的读者不需要参考方法签名来理解哪个表达式代表哪个参数。

```
private static void MyMethod(int a, int b, int c) {
    Console.WriteLine("{0} {1} {2}", a, b, c);
}

public static void Main(string[] args) {
    MyMethod(1, 2, 3);
    MyMethod(c:1, a:2, b:3);
} 
```

这打印

```
1 2 3
2 3 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T17:15:11.130

您正在查看[命名参数语法](http://bartdesmet.net/blogs/bart/archive/2008/11/01/c-4-0-feature-focus-part-2-named-parameters.aspx)。

# android - 在操作栏中点击图标时显示上一个片段？

> ID：11617235
> 
> 赞同：-1
> 
> 时间：2012-07-23T17:12:39.497
> 
> 标签：android, button, android-fragments, android-actionbar

当用户点击操作栏上的图标时，如何显示上一个按钮。我知道我可以删除现有的片段并添加上一个片段，但是还有其他简单的方法吗？基本上我希望我的后退按钮操作栏像标准后退按钮一样（即显示上一个片段）。

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:02:23.723

iOS 平台使用带有标签的显式后退按钮来允许用户向上导航应用程序的层次结构。

![在此处输入图像描述](../Images/36f6b22650e53836dc9b651930e23b12.png)

相反，Android 使用主操作栏的应用程序图标进行分层导航，使用导航栏的后退按钮进行时间导航。请查看[导航模式](http://developer.android.com/design/patterns/navigation.html)。

![在此处输入图像描述](../Images/691badb94300ada09bad16be68779e2c.png)

您必须遵循此指南才能在整个平台上提供一致的导航体验，因此我建议您删除操作栏中的后退按钮。

# android - MenuItem 有意图地打开链接？

> ID：11617236
> 
> 赞同：3
> 
> 时间：2012-07-23T17:12:39.710
> 
> 标签：android, xml, eclipse, button, menu

好的，我正在创建一个有菜单的应用程序，上面有三个菜单项，一个是访问网页，一个是退出应用程序。退出和关于工作正常，但网页菜单项不起作用，它强制关闭这里是我的菜单代码：

```
public boolean onCreateOptionsMenu(Menu menu){
    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()){
    case R.id.about:
        startActivity(new Intent("com.example.ABOUT"));
        return true;

    case R.id.facebook:
        Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("www.facebook.com"));
        startActivity(browserIntent);

        return true;

    }
    return false;
} 
```

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:37:23.060

像这样使用

```
Uri uri = Uri.parse( "https://www.google.co.in" );
startActivity( new Intent( Intent.ACTION_VIEW, uri ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:45:26.347

您尚未`http://`在 URI 字符串中指定方案。

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.facebook.com")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:40:06.840

以下是如何从菜单转到 facebook 应用程序，非常简单！Intent 意图 = new Intent(Intent.ACTION_VIEW); intent.setClassName("com.facebook.katana", "com.facebook.katana.ProfileTabHostActivity"); intent.putExtra("extra_user_id", "123456789l"); this.startActivity(intent);

# java - 如何在 Windows 7 中打开 JAR 文件

> ID：11617239
> 
> 赞同：0
> 
> 时间：2012-07-23T17:12:48.930
> 
> 标签：java, file, windows-7, jar, executable

我在谷歌上查过这个，似乎没有什么适合我的需要。我正在使用 Windows 7 计算机。我尝试重新安装 Java 7，JRE 和 JDK 下载都说我已经在我的计算机上安装了它。

我目前有这些 Java 文件夹：

*   C:\Program Files\Java\jdk1.6.0_25\
*   C:\Program Files\Java\jdk1.7.0_05\
*   C:\程序文件\Java\jre6\
*   C:\Program 文件 (x86)\Java\jre7\

我的问题：

1.  哪些文件夹已过时并且可以删除？

2.  如何做到这一点，以便当我双击 .JAR 可执行文件时，它会正确打开，而无需我使用命令打开它。当我当前尝试打开 JAR 文件时，它会打开一个 CMD 屏幕，然后立即关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:21:07.857

**1.**如果您上面提到的所有Java文件夹都有指定的Jdk文件夹，那么最好选择`C:\Program Files\Java\jdk1.7.0_05`

**2.**现在复制`C:\Program Files\Java\jdk1.7.0_05\bin`到你`System PATH`。

**3.**在您的命令提示符下键入`java -version`，如果它返回系统上**已安装的 JAVA 版本**，则说明您已正确配置 Java 路径。

**4.**现在如果您的`JAR`文件是**命令行程序**，那么您**需要从命令提示符打开它**

**5.**但是如果你**的JAR文件里面有GUI程序，那么你可以使用下面的在Eclipse中创建一个JAR文件**，然后你可以**双击它来执行它。**

```
File -> Export-> Java ->Runnbale JAR file

Launch configuration : your Class containing the public static void main(String[] args)

Export destination : Target place

Library Handling:

Package required libraries into generated JAR

FINISH 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T17:23:57.327

*   请检查系统环境变量中的 JAVA_HOME 和 CLASSPATH 设置

*   相应地设置您的 JAVA_HOME 或 CLASSPATH 变量

    如果要打开 jar 文件并查看其内容，可以使用 windows 中的“打开方式”选项并使用 winzip 打开它

*   如果您想在单击时执行 jar 文件，那么您的 jar 文件中必须有一个 main-method 并在您的 mainfest 文件中配置它。你应该有一个**Main-Class**属性（下面的 mainfest 文件中的示例条目）

    主类：com.example.MainClass

    类路径：lib/lib1.jar lib/lib2.jar

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T17:32:55.707

检查 .jar 扩展名与什么相关联。尝试从命令提示符窗口运行相同的命令。希望你能看到错误是什么并修复它。

卸载所有 java 环境，然后重新安装你需要的可能会起作用。卸载后还要从 c:\windows\system32 中删除 java*.exe 文件。您不需要设置 JAVA_HOME 环境变量，但某些批处理文件需要设置它。

如果您希望 Java 在您的浏览器中工作，您必须安装 32 位 JRE。

如果您需要运行使用大量内存 (2GB+) 的 java 程序，或者必须直接使用 JNI 或 JNA 调用 64 位 DLL，那么您必须安装 64 位 JRE。如果您进行 Java 开发，那么您应该安装 JDK 而不是 JRE。您的 IDE 可能还要求您安装 64 位 JDK 而不是 32 位 JDK。

# iphone - Core Plot LineChart : 在图形右侧添加填充

> ID：11617245
> 
> 赞同：0
> 
> 时间：2012-07-23T17:13:26.910
> 
> 标签：iphone, ios, cocoa-touch, core-plot

![在此处输入图像描述](../Images/40622987e4dd17a47a23ddc2576ed1c1.png)

正如您在上面的屏幕截图中看到的，最右边的图似乎转到了图的右边缘，几乎看不到 &（如您在上面看到的；只有部分绘图符号可见）。即使我将 xAxisRange 增加 1 以便在右侧留出一些空间（以便在最右边的绘图之后有一些空间），这个额外的空间也会被添加到左侧（即图表的最左侧/开头）&不在最右边。

我在图表初始化方法中添加了填充代码：

```
graph.plotAreaFrame.masksToBorder = NO;
graph.paddingLeft   = 85.0;
graph.paddingTop    = 20.0;
graph.paddingRight  = 20.0;
graph.paddingBottom = 80.0; 
```

这似乎在图表周围看到的矩形“外部”添加了填充，而不是在它“内部”。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:12:47.483

增加绘图范围的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:34:15.037

减少 y.titleOffset = xx.0f;

# objective-c - 如何确定我在搜索过程中单击的 UITableViewCell 是什么？

> ID：11617247
> 
> 赞同：2
> 
> 时间：2012-07-23T17:13:33.487
> 
> 标签：objective-c, xcode, uitableview, xcode4.3, uisearchbar

我有一个带有搜索栏的表格视图。一切都很好：当我在搜索栏中输入文本时，表格视图中的结果会根据我的搜索文本进行更新。我遇到的问题是在我转到详细视图时确定表格单元格的 ID 是什么来传递它。澄清一下：表格视图中的单元格通常是从 SQLite3 数据库生成的，并按其名称排序。因此，如果我有 4 个细胞：（Cabernet Cortis、Cabernet Franc、Cabernet Sauvignon 和 Ruby Cabernet），它们的 ID 通常是（78、79、80、378）。但是，当我搜索“赤霞珠”时，这四个项目出现了，indexPath.row 是 (1, 2, 3, 4) 而不是 (78, 79, 80, 378) 所以它把我带到了错误的葡萄详细视图（这是输入到我的数据库中的 alpha 顺序的前四个葡萄）。

这是一些有助于清除问题的代码。我认为如果我可以获得作为搜索结果出现的每个葡萄的 ID 并且还具有这些值的 MSMutableArray，然后使用`[actualIDNumber objectAtIndex:indexPath.row]`而不是仅使用`indexPath.row`.

```
//ViewGrapesViewController.h
@property (strong, nonatomic) IBOutlet UISearchBar *searchBar;
- (void) searchGrapesTableView;
@property (nonatomic, retain) NSMutableArray *listOfGrapes;
@property (nonatomic, retain) NSMutableArray *searchResult;
@property (nonatomic, retain) NSMutableArray *searchResultID;
@property (nonatomic) Boolean isSearchOn;

//ViewGrapesViewController.m
//synthesize variables, etc
- (void)viewDidLoad
    {
        //obtain grapes from the DB, etc.
        //add searchNames to an NSMutableArray
        listOfGrapes = [[NSMutableArray alloc] init];
        for (int i=1; i<=[self.grapes count]; i++) {
            Grapes *theGrape = [self.grapes objectAtIndex:(i-1)];
            NSString *grapeSearchName = theGrape.searchName;
            [listOfGrapes addObject:grapeSearchName];
        }
        searchResult = [[NSMutableArray alloc] init];
        searchResultID = [[NSMutableArray alloc] init];
        isSearchOn = NO;

    //search bar stuff
    searchBar.autocorrectionType = UITextAutocorrectionTypeNo;

    [super viewDidLoad];
}

- (void) searchBarTextDidBeginEditing:(UISearchBar *)searchBar {
    isSearchOn = YES;
}

- (void) searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
    if ([searchText length] > 0) {
        isSearchOn = YES;
        [self searchGrapesTableView];
    }
    else {
        isSearchOn = NO;
    }
    [self.tableView reloadData];
}

- (void) searchGrapesTableView {
    [searchResult removeAllObjects];
    [searchResultID removeAllObjects];
    for (NSString *str in listOfGrapes)
    {
        NSRange titleResultsRange = [str rangeOfString:searchBar.text options:NSCaseInsensitiveSearch];
        if (titleResultsRange.length > 0) {
            [searchResult addObject:str];
            //would love to add ID to searchResultID array here, don't know how to do that
        }
    }
}

- (void) searchBarSearchButtonClicked:(UISearchBar *)searchBar {
    [self searchGrapesTableView];
}

- (void) searchBarTextDidEndEditing:(UISearchBar *)searchBar {
    isSearchOn = NO;
    [self.searchBar resignFirstResponder];
    [self.tableView reloadData];
}

//table view code
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    //first check if the user is searching
    if (isSearchOn) {
        return 1;
    }
    //if not, then search by alpha order
    else {
        return 24;
    }
}

//create header titles & number of rows in section (it's a lot of code and works fine)

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"grapeCell";
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    //is the user searching?
    if (isSearchOn) {
        NSString *cellValue = [searchResult objectAtIndex:indexPath.row];
        cell.textLabel.text = cellValue;
    }

    //otherwise...
    else {
        NSInteger theNumber;
        NSInteger numberToAdd = [[howManyRowsInSection objectAtIndex:indexPath.section] integerValue];
        theNumberToAdd = numberToAdd;
        theNumber = numberToAdd + indexPath.row;

        //cell title = grape name
        Grapes *grape = [self.grapes objectAtIndex:theNumber];
        NSString *theGrapeName = grape.grapeName;
        cell.textLabel.text = theGrapeName;
    }
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    //is the user searching?
    if (isSearchOn) {
        theNumberToAdd=0; //which is wrong but here for the time being
        //i have to have the ID here in order to do some logic to figure out what row to return
    }

    //otherwise...
    else {
        theNumberToAdd = [[howManyRowsInSection objectAtIndex:indexPath.section] integerValue]; // i performed this logic elsewhere
    }

    ViewGrapeViewController *detailViewController = (ViewGrapeViewController *)self.presentedViewController;
    detailViewController.detailItem = [self.grapes objectAtIndex: (indexPath.row+theNumberToAdd)];
}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"toGrapeDetail"]) {       
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        //is the user searching
        if (isSearchOn) {
            theNumberToAdd=0;  // which is wrong
        }

        //otherwise...
        else {
            theNumberToAdd = [[howManyRowsInSection objectAtIndex:indexPath.section] integerValue];
        }

        NSDate *object = [_objects objectAtIndex:(indexPath.row+theNumberToAdd)];
        [[segue destinationViewController] setDetailItem:object];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:26:13.350

在您的选择项目方法中，从所选单元格中获取文本并遍历您的数组，直到找到匹配的项目，然后打开该单元格的详细视图。仅当您拥有所有唯一的项目名称时，这才有效。

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *str = [[[tableView cellForRowAtIndexPath:indexPath] textLabel] text];
    for (int j=0; j<whateverArray.count; j++)
    {
        NSString *temp = [whateverArray objectAtIndex:j];
        if ([str isEqualToString:temp])
        {
            //do whatever you would do if the user actually clicked the row at position j
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:22:25.517

您还可以为与您的阵列计数相关的每个单元创建一个顺序标签号。然后您获取标签号并将其用于索引处的对象。

这可能比搜索每个字符串更有效，并且可以容纳重复的字符串名称。

代码将在：

```
 - (UITableViewCell *) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SectionCellIdentifier];
 cell.tag = i //where i increments by one each entry into the function.
 } 
```

# mysql - MySQL：如何查询多个表并仅对一个表应用 LIMIT？

> ID：11617249
> 
> 赞同：4
> 
> 时间：2012-07-23T17:13:55.113
> 
> 标签：mysql

假设我有一个包含*items*的表和另一个包含*subitems*的表。我想返回与有限数量的项目相关的*所有子项目。*本质上，我想加入这两个查询：

```
SELECT * FROM subitem

SELECT * FROM item LIMIT 10 
```

其中`subitem.item = item.id`：

我试过这个：

```
SELECT * FROM subitem INNER JOIN item ON subitem.item = item.id LIMIT 10 
```

但是，此查询仅返回 10 个子项（如您所料）。我想检索*所有*子项，同时仅将*项目*数限制为 10。我该如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T17:20:01.360

这将为您提供 10 件物品。但是，您应该添加 WHERE 子句和 ORDER BY 子句来获取您要查找的项目。

```
SELECT * FROM subitem INNER JOIN 
              (SELECT * FROM items LIMIT 10) AS I
              ON subitem.item = I.id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T17:20:48.237

尝试以下查询：

```
select * from item,subitem where id = item and 
  id in (select id from item limit 10) 
```

`IN`如果in有问题`LIMIT`，请尝试以下查询：

```
select * from (select id from item limit 10) as i1, subitem where id =item ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:21:28.893

也许是这样的：

SELECT * FROM subitem WHERE item IN (SELECT id FROM item LIMIT 10);

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-26T11:30:38.037

如何在此查询中使用限制

```
select tbl_thread.id,user_id,name,tbl_User.alert_flag,thread_name,thread_status,(select CAST(count(*) as UNSIGNED) from tbl_message where thread_id=tbl_thread.id AND read_status='0' and msg_from='EU' ) as unread,thread_timestamp,(select CAST(max(id) as UNSIGNED) from tbl_message where thread_id=tbl_thread.id) as max_id from tbl_thread,tbl_User where tbl_User.UserID=user_id ; 
```

# sql - 假脱机到 CSV 文件时删除选择查询之间的空白行

> ID：11617251
> 
> 赞同：2
> 
> 时间：2012-07-23T17:13:59.497
> 
> 标签：sql, export-to-csv, oracle-sqldeveloper

我正在使用 oracle sql developer 将一些数据假脱机到 csv 文件。到目前为止，我在一个文件中有这个：

```
SET head OFF;
SET echo OFF; 
SET termout OFF; 
SET verify OFF; 
set colsep ,
set pagesize 0
set feedback off
@sandbox.sql 
```

Sandbox.sql 包含以下内容：

```
spool "C:\TEMP\test.csv"
select 'Date,Average' from dual;
select to_char(rollup_time, 'mm/dd/yyyy'), average from sample_table
order by 1;
spool off; 
```

这会生成一些如下所示的 csv 文件：

日期平均值

2012 年 1 月 1 日 900 2012 年 1 月 2 日
910

我想摆脱列标题后面的空白行，但我无法设置 trimspool （选项不存在）并且联合都无法工作，因为数据类型不同。有谁知道如何在 oracle 的 sql 开发人员环境中删除该空行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T02:34:23.307

使用“设置新页面无”命令。

设置 NEWP[年龄] {1 | n | NONE} 设置从每页顶部到顶部标题打印的空白行数。零值在每页（包括第一页）的开头放置一个换页并清除大多数终端上的屏幕。如果将 NEWPAGE 设置为 NONE，SQL*Plus 不会在报告页面之间打印空行或换页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-02T13:59:46.213

在这里，使用 SQL Developer（版本 18.2）

我没有你的桌子，但我有 HR.EMPLOYEES。

```
cd c:\sqldev
set feedback off
set pagesize 100
set sqlformat csv
spool so-no-blanks.csv
select 'Date, Average' from dual;
select to_char(hire_date, 'mm/dd/yyyy'), salary from employees
fetch first 3 rows only;
spool off 
```

*-- set sqlformat csv：告诉SQL Developer的脚本引擎自动返回CSV格式的结果集（json、xml、insert、html、delimited也可以）*

SQL Developer 的脚本引擎在几年前进行了更新，以支持 SQL*Plus 提供的几乎所有内容，以及更多内容。就像那个“cd”命令一样——它在做“spool”之类的事情时设置路径

[![在此处输入图像描述](../Images/5446736dca937145ab62f034703ec3b0.png)](https://i.stack.imgur.com/BcQ3f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-20T09:54:36.113

我刚刚发现自己处于与 roostersign 相同的情况，并且我设法避免了 SQL*Plus 中的两个查询之间的空白行：

```
set space 0 
```

我通过测试这里的建议到达那里：[SQL*Plus：格式化查询结果](http://docs.oracle.com/cd/A57673_01/DOC/server/doc/SP33/ch4.htm#toc029)

# php - Jquery将键/值配对数组发送到PHP

> ID：11617257
> 
> 赞同：2
> 
> 时间：2012-07-23T17:14:27.640
> 
> 标签：php, jquery, ajax

老实说，我不确定如何提出这个问题，但这里是。

我有一个包含以下输入字段的表单：

```
<input name="key[23]" type="text" />
<input name="key[29]" type="text" />
<input name="key[65]" type="text" /> 
```

我可以使用 Jquery 创建一个数组以发送到 PHP 脚本，如下所示：

```
 var new_keys = new Array();
$('input[name="keys[]"]').each(function() {
    new_keys.push($(this).attr('value'));
}); 
```

但是，当输入字段已经有键时，我不知道如何创建数组：**input name="test[45]"**

我尝试将我的方法更改为使用类选择器而不是输入名称，但我无法获得键名。

我需要做的是将键名及其值发送到 PHP，以便我可以更新键名等于表 ID 号的表。如果我不使用 Ajax，这很容易做到。

希望这是有道理的。

已编辑

```
<form method="post" id="add-form" class="form" onsubmit="return false;">
<input class="required" type="text" name="name" id="name" />
<input class="required" type="text" name="keys[32]" />
<input class="required" type="text" name="keys[65]" />
<textarea name="Test"></textarea>
<input type="submit" name="submit" value="submit" />
</form>

$(document).ready(function() {
    $.fn.submitForm = function() {
        var name = $('#name').attr('value');
        var new_keys = new Array();
        $('input[name="keys[]"]').each(function() {
            new_keys.push($(this).attr('value'));
        });

        $.ajax({
            type: 'POST',
            data: { 'new_keywords' : new_keywords, 'name' : name },
            dataType: 'json',
            url: 'article/scripts/article.scripts.php',
            success: function($data) {
                var result = $data.result;
                var msg = $data.msg;

                if (result == "success") {
                    formMessageDisplay(msg, result);
                }
                else {
                    formMessageDisplay(msg, result);
                }
            },
            error: function($data) {
                formMessageDisplay('<?php echo AJAX_ERROR; ?>', result);
            }
        })
    }
}); 
```

这是我拥有的脚本的精简版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:20:58.153

你可以做这样的事情，它应该获取字段的名称，然后在数组中分配值。然后，您可以根据需要在 PHP 中处理和清理它：

```
var new_keys = new Array();
$('input[name="keys[]"]').each(function() {
    new_keys[$(this).attr('name')] = $(this).attr('value');
});
$.post('url/to/script/here.php', new_keys, function(data) {
    // process data here on success
}, 'json'); // expecting a json object 
```

有关 ajax 的进一步阅读，请查看 @this 以使用 post 方法[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:18:56.610

您可以尝试将值作为数组传递，将名称作为另一个数组传递，然后在 PHP 中将它们与 结合起来[`array_combine()`](http://php.net/manual/en/function.array-combine.php)，如下所示：

```
var new_keys = new Array();
var new_names = new Array();
$('input[name="keys[]"]').each(function() {
    new_keys.push($(this).attr('value'));
    new_names.push($(this).attr('name'));
});

//Then in PHP
$complete_array = array_combine($new_names, $new_keys); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:32:37.047

只是为了澄清你有一个表格，你想通过 javascript/ajax 将值发送到 php 脚本？

如果是这种情况，那么您将拥有以下内容：

HTML：

```
<form id="myForm" action="phpScript.location" method="post">
   <input/>...
   <input/>...
</form> 
```

Javascript/jQuery：

```
 $('form').bind('submit', function() {
        $.ajax({
            url: 'phpScript/location',
            data: $('form').serialize(),  // This will give you the needed key/pair parameterization you need. 
            type: 'POST',
            dataType: 'html', // This can be one of many values.  Just defines the expected response type. 
            success: function(data, status, xhr) {
                // Success response
            },
        });
        return false;
    }); 
```

在此处序列化文档：http: [//api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# asp.net-mvc - 如何在 MVC4 中将 EditorFor 更改为 DropdownFor？

> ID：11617258
> 
> 赞同：0
> 
> 时间：2012-07-23T17:14:33.040
> 
> 标签：asp.net-mvc, asp.net-mvc-4, webforms

我有一个控制器、模型和视图，我正在尝试将一个已经存在的@html.editoFor 设置为一个@html.dropdownfor，这样我可以限制用户只选择三个可能的值（打开、关闭、保持）。

更具体地说，如果可能，我想将控制器的创建和编辑操作中由 editorFor 创建的输入框更改为选择框。

如果那是不可能的，那么我想知道如何为模型提供三个默认值来接受，以便只有这些值可以提交给数据库......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:59:06.227

您可以轻松更改 EditorFor，但不幸的是，它基于属性的类型，因此如果您`string`的模型中有一个，并且您更改了 EditorFor，那么您正在为使用 EditorFor 的所有字符串更改它。

如果您创建一个自定义对象，其中包含该值，也许还有三个可能的值，那么很容易为此创建一个自定义 EditorFor。

看看这里： [http ://buildstarted.com/2010/09/10/overriding-displayfor-and-editorfor-to-create-custom-outputs-for-mvc/](http://buildstarted.com/2010/09/10/overriding-displayfor-and-editorfor-to-create-custom-outputs-for-mvc/)

（这是针对第 3 版的，但我还没有读到任何针对第 4 版的更改，所以试一试）

# debugging - 带有 4.3" LCD 引导加载程序问题的 FL2440 板

> ID：11617266
> 
> 赞同：0
> 
> 时间：2012-07-23T17:15:33.397
> 
> 标签：debugging, serial-port, arm, bootloader

最近，我买了一块 FL2440（带 4.3" LCD）板，我遇到了一个奇怪的问题：

主机：处理器 - DualCore，操作系统 - Ubuntu 目标板：FL2440，带 4.3" LCD

我使用串行调试电缆将板与 PC 连接，在主机上配置/运行 minicom 并为板加电。

## 情况1：

我在 minicom 控制台上获得了 FL2440 引导加载程序菜单，但是当我按下特定选项（例如 1 或 2）时 - 引导程序提示有时显示我已按下键 0 并因此执行相应的功能。换句话说，引导加载程序提示符下的键盘键解释变得不同。以下是日志：

```
 +------------------------------------------------------------+
 |                     Select Menu                            |
 +------------------------------------------------------------+
 | [0] Download & Run                                         |
 | [1] Download to flash                                      |
 | [2] Download From UART                                     |
 | [3] Boot My Application                                    |
 | [4] Boot Linux                                             |
 | [5] Boot Wince                                             |
 | [6] Erase Flash Partition                                  |
 | [7] Config parameters                                      |
 +------------------------------------------------------------+

Download&Run is selected.

[Above, I typed the key 4 but bootloader menu misinterpret it to 0] 
```

## 案例二：

如果我启动 linux，那么在 linux 提示符下我经常会遇到这个问题。例如

在 linux 提示符下，如果我按 p 则提示显示我已按 `

以下是日志：

```
 +------------------------------------------------------------+
 |                     Select Menu                            |
 +------------------------------------------------------------+
 | [0] Download & Run                                         |
 | [1] Download to flash                                      |
 | [2] Download From UART                                     |
 | [3] Boot My Application                                    |
 | [4] Boot Linux                                             |
 | [5] Boot Wince                                             |
 | [6] Erase Flash Partition                                  |
 | [7] Config parameters                                      |
 +------------------------------------------------------------+
NAND ID is 0xadda 
Set boot params = root=/dev/mtdblock3 init=/linuxrc load_ramdisk=0 console=ttySAC0,115200 mem=65536K devfs=mount display=sam320 
Load Kernel...
Uncompressing Linux................................................................................................................... done, booting the kernel.
Linux version 2.6.28.7 (root@localhost.localdomain) (gcc version 3.4.1) #336 Tue May 12 08:40:50 CST 2009
CPU: ARM920T [41129200] revision 0 (ARMv4T), cr=c0007177
CPU: VIVT data cache, VIVT instruction cache
Machine: SMDK2410
ATAG_INITRD is deprecated; please update your bootloader.
Memory policy: ECC disabled, Data cache writeback
CPU S3C2440A (id 0x32440001)
MM: CPU does not support supersection mapping for 0x55000000000 at 0xf0d00000
S3C244X: core 400.000 MHz, memory 100.000 MHz, peripheral 50.000 MHz
S3C24XX Clocks, (c) 2004 Simtec Electronics
CLOCK: Slow mode (1.500 MHz), fast, MPLL on, UPLL on
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: root=/dev/mtdblock3 init=/linuxrc load_ramdisk=0 console=ttySAC0,115200 mem=65536K devfs=mount display=sam320 
irq: clearing pending ext status 000d0000
irq: clearing subpending status 000000b7
irq: clearing subpending status 00000092
PID hash table entries: 256 (order: 8, 1024 bytes)
timer tcon=00500d00, tcnt a2c1, tcfg 0000020f,00000030, usec 00001eb8
Console: colour dummy device 80x30
console [ttySAC0] enabled
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 64MB = 64MB total
Memory: 61132KB available (3284K code, 312K data, 136K init)
Calibrating delay loop... 199.47 BogoMIPS (lpj=498688)
Mount-cache hash table entries: 512
CPU: Testing write buffer coherency: ok
net_namespace: 288 bytes
NET: Registered protocol family 16
S3C2440: Initialising architecture
S3C2440: IRQ Support
S3C24XX DMA Driver, (c) 2003-2004,2006 Simtec Electronics
DMA channel 0 at c4808000, irq 33
DMA channel 1 at c4808040, irq 34
DMA channel 2 at c4808080, irq 35
DMA channel 3 at c48080c0, irq 36
S3C244X: Clock Support, DVS off
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
NetWinder Floating Point Emulator V0.97 (extended precision)
Installing knfsd (copyright (C) 1996 okir@monad.swb.de).
JFFS2 version 2.2\. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
yaffs May  8 2009 10:19:56 Installing. 
msgmni has been set to 119
io scheduler noop registered
io scheduler anticipatory registered (default)
io scheduler deadline registered
io scheduler cfq registered
Console: switching to colour frame buffer device 40x30
fb0: s3c2410fb frame buffer device
lp: driver loaded but no devices found
ppdev: user-space parallel port driver
Serial: 8250/16550 driver4 ports, IRQ sharing enabled
s3c2440-uart.0: s3c2410_serial0 at MMIO 0x50000000 (irq = 70) is a S3C2440
s3c2440-uart.1: s3c2410_serial1 at MMIO 0x50004000 (irq = 73) is a S3C2440
s3c2440-uart.2: s3c2410_serial2 at MMIO 0x50008000 (irq = 76) is a S3C2440
brd: module loaded
loop: module loaded
Cirrus Logic CS8900A driver for Linux (Modified for SMDK2410)
eth0: incorrect signature 0x000f
dm9000 Ethernet Driver, V1.31
eth0: dm9000a at c487a300,c487e304 IRQ 51 MAC: 00:12:34:56:80:49 (chip)
Uniform Multi-Platform E-IDE driver
ide-gd driver 1.18
ide-cd driver 5.00
Driver 'sd' needs updating - please use bus_type methods
S3C24XX NAND Driver, (c) 2004 Simtec Electronics
s3c2440-nand s3c2440-nand: Tacls=3, 30ns Twrph0=7 70ns, Twrph1=3 30ns
NAND device: Manufacturer ID: 0xad, Chip ID: 0xda (Hynix NAND 256MiB 3,3V 8-bit)
NAND_ECC_NONE selected by board driver. This is not recommended !!
Scanning device for bad blocks
Bad eraseblock 549 at 0x044a0000
Creating 5 MTD partitions on "NAND 256MiB 3,3V 8-bit":
0x00000000-0x00100000 : "Boot"
0x00140000-0x00500000 : "MyApp"
0x00500000-0x00800000 : "Kernel"
0x00800000-0x04400000 : "fs_yaffs"
0x04400000-0x08000000 : "WINCE"
usbmon: debugfs is not available
ohci_hcd: USB 1.1 'Open' Host Controller (OHCI) Driver
s3c2410-ohci s3c2410-ohci: S3C24XX OHCI
s3c2410-ohci s3c2410-ohci: new USB bus registered, assigned bus number 1
s3c2410-ohci s3c2410-ohci: irq 42, io mem 0x49000000
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 2 ports detected
usbcore: registered new interface driver libusual
usbcore: registered new interface driver usbserial
USB Serial support registered for generic
usbcore: registered new interface driver usbserial_generic
usbserial: USB Serial Driver core
USB Serial support registered for FTDI USB Serial Device
usbcore: registered new interface driver ftdi_sio
ftdi_sio: v1.4.3:USB FTDI Serial Converters Driver
USB Serial support registered for pl2303
usbcore: registered new interface driver pl2303
pl2303: Prolific PL2303 USB to serial adaptor driver
mice: PS/2 mouse device common for all mice
s3c2410 TouchScreen successfully loaded
input: s3c2410 TouchScreen as /class/input/input0
S3C24XX RTC, (c) 2004,2006 Simtec Electronics
s3c2440-sdi s3c2440-sdi: host detect has no irq available
mapped channel 0 to 0
s3c2440-sdi s3c2440-sdi: powered down.
s3c2440-sdi s3c2440-sdi: initialisation done.
s3c2440-sdi s3c2440-sdi: running at 0kHz (requested: 0kHz).
s3c2440-sdi s3c2440-sdi: running at 196kHz (requested: 195kHz).
s3c2440-sdi s3c2440-sdi: running at 196kHz (requested: 195kHz).
s3c2440-sdi s3c2440-sdi: running at 196kHz (requested: 195kHz).
s3c2440-sdi s3c2440-sdi: powered down.
usbcore: registered new interface driver usbhid
usbhid: v2.6:USB HID core driver
mapped channel 10 to 2
mapped channel 9 to 1
UDA1341 audio driver initialized
TCP cubic registered
NET: Registered protocol family 17
RPC: Registered udp transport module.
RPC: Registered tcp transport module.
drivers/rtc/hctosys.c: unable to open rtc device (rtc0)
yaffs: dev is 32505859 name is "mtdblock3"
yaffs: passed flags ""
yaffs: Attempting MTD mount on 31.3, "mtdblock3"
yaffs: auto selecting yaffs2
usb 1-1: new full speed USB device using s3c2410-ohci and address 2
usb 1-1: configuration #1 chosen from 1 choice
hub 1-1:1.0: USB hub found
hub 1-1:1.0: 4 ports detected
yaffs_read_super: isCheckpointed 0
VFS: Mounted root (yaffs filesystem).
Freeing init memory: 136K

init started: BusyBox v1.6.0 (2008-01-09 17:10:28 CST) multi-call binary

starting pid 903, tty '': '/etc/init.d/rcS'
mount: mounting none on /dev/pts failed
mount: mounting tmpfs on /dev/shm failed
dm9000 dm9000.0: WARNING: no IRQ resource flags set.
eth0: link down
ifconfig: SIOCSIFADDR: No such device

Please press Enter to activate this console. [9;0][?33l[?25lCould not read calibration: /etc/pointercal
Warning: Need to run firstuse
Warning: language message - en_US
Warning: and its not null
Warning: loading /usr/i18n/en_US/qt.qm
Warning: loading /usr/i18n/en_US/qpe.qm
Warning: loading /usr/i18n/en_US/libqpe.qm
Warning: loading /usr/i18n/en_US/libqtopia.qm
Warning: loading /usr/i18n/en_US/language.qm
Warning: loading /usr/i18n/en_US/timezone.qm
Warning: loading /usr/i18n/en_US/systemtime.qm
^L

starting pid 910, tty '': '/bin/sh'
# `w`
-sh: `w`: not found
# 
[Above, I typed the command pwd] >>>>>> **ISSUE***
# 
# Hb
-sh: Hb: not found
[Above, I typed the command ls]  >>>>>> **ISSUE***
# 
# 
# b@
-sh: b@: not found
# 
[Above, I typed the command cd]  >>>>>> **ISSUE***
# 
```

一般来说，我无法从键盘发出命令，因为键被 FL2440 板误解了

我还尝试了 HyperTerminal 和 DNW（在 Windows 机器上），即使我更换了键盘，但也出现了同样的问题。

由于这个问题，我无法使用 FL2440 板。

需要您的帮助/建议（提前致谢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:51:27.840

我用的是TQ2440，并成功上传了一张图片。您可以尝试我的文章的链接，了解如何从 Windows PC 进行操作。总结一下，

> 1.  使用串行端口和 USB 端口连接电路板。
> 2.  安装设备随附的 USBDownloadDriver 并运行 DNW.exe 以安装映像。
> 3.  打开超级终端（或您正在使用的任何终端仿真器，例如`screen`）并将其配置为 115200 8-N-1。
> 4.  打开设备电源并立即按空格键。引导加载程序菜单将打印到您的终端仿真器。
> 5.  按 9 选择“Format Boot Media for BinFS”，按 B 选择“Mark Ba​​d Block at Reserved Block”，然后按 U，屏幕将显示 USB 已连接。
> 6.  转到DNW.exe，选择传输，然后选择要下载的图像文件。

显然，如果您使用的是 Ubuntu，则需要通过 Wine 运行它，或者找到一个与 DNW.exe 完成相同操作的 Linux 程序。

[此博客文章](http://wincecsharp.blogspot.com/2011/04/pre-reqs-connect-sbc-tq2440-which-you.html)中提供了更多详细信息，包括每个步骤的屏幕截图。

# r - 如何在计算框之前让 geom_boxplot 应用 y 限制？

> ID：11617267
> 
> 赞同：3
> 
> 时间：2012-07-23T17:15:37.047
> 
> 标签：r, ggplot2

这是一个箱线图：

```
qplot(cyl, mpg, data=mtcars) +
  geom_boxplot() +
  scale_y_continuous() 
```

看起来像这样： ![在此处输入图像描述](../Images/5f5e6571b597c12bfefd323a044d3382.png)

现在我在 y 轴上添加限制：

```
qplot(cyl, mpg, data=mtcars) +
  geom_boxplot() +
  scale_y_continuous(limits=c(0,20)) 
```

整个画面发生了变化：

![在此处输入图像描述](../Images/59faf13b313724a9be37d61aad330935.png)

我如何获得与第一张相同的图片，只是使用显示 y=0 到 20 的“视口”？

还有..第二张照片是什么？看起来实际上缺少数据（例如：cyl=4 的 3-4 个点）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T17:23:58.193

从 joran 的评论来看，这是有效的：

```
qplot(cyl, mpg, data=mtcars) +
  geom_boxplot() +
  coord_cartesian(ylim=c(0,20)) 
```

从[文档](http://had.co.nz/ggplot2/coord_cartesian.html)：

> 有两种缩放绘图显示的方法：使用比例尺或使用坐标系。它们以两种截然不同的方式工作。
> 
> 在刻度上设置限制将丢弃不在这些限制范围内的所有数据。这相当于绘制原始数据的子集
> 
> 在坐标系上设置限制会执行视觉缩放，数据不变，我们只查看原始图的一小部分。

谢谢乔兰！

# math - 哪些数学主题对于深入理解 Haskell 最重要？

> ID：11617270
> 
> 赞同：6
> 
> 时间：2012-07-23T17:15:51.947
> 
> 标签：math, haskell

Haskell 是一种具有许多植根于形式数学的特征的语言。我应该学习哪些数学主题才能更深入地了解和理解这门语言？例如，我认为抽象代数和范畴论都是值得探索的好话题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T17:20:14.660

一般来说，离散数学、逻辑、思维集或关系、归纳、证明递归、核心递归、一些基本代数、数论、类型论和 lambda 演算，顺便说一句，有一些书籍涵盖了你在深入学习 haskell 时需要的所有数学知识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T23:12:00.883

我不认为抽象代数（群、环等）与 Haskell 直接相关，尽管抽象代数中使用的思维方式对 Haskell 程序员很有帮助。这与命令式语言形成鲜明对比，命令式语言需要更像微积分或分析中使用的思维过程。

在我看来，了解一点范畴论很有帮助。如果你能理解 Typeclassopedia，那可能就足够了。wikibook [http://en.wikibooks.org/Haskell/Category_theory](http://en.wikibooks.org/Haskell/Category_theory)是一个很好的可读介绍，我发现它比任何数量的 monad 教程都更有帮助。公平地说，这大约是我目前对该主题的知识的限制，所以也许我错过了一些我还不知道的东西。更高级的范畴理论出现在一些高级的 Haskell 主题中，例如泛型，但至少目前我认为这些主题相当专业。我已经开始观看一些 Catsters 视频（在 Youtube 搜索框中输入“catsters”），并且发现它们对于构建“Haskell 来自何处”的视图很有趣，但我还没有看到那么多。

我认为了解一点逻辑也很重要，足以理解 Haskell 函数是由其类型签名（Curry-Howard 对应）表达的谓词的证明。这个概念的更好用（我从远处看到）似乎来自 Coq 和 Agda 中使用的直觉类型理论的知识。去年夏天，很多 Haskeller 正在阅读“软件基础”（[http://www.cis.upenn.edu/~bcpierce/sf/](http://www.cis.upenn.edu/~bcpierce/sf/)），它是关于 Coq 的，看起来很棒，但我有太多时间要花时间我自己。它在我的名单上；-)。

# spring - Spring MVC 3.1 动态加载控制器

> ID：11617273
> 
> 赞同：1
> 
> 时间：2012-07-23T17:16:00.050
> 
> 标签：spring, spring-mvc, controller

我正在为我的 Web 项目使用 Spring MVC 3.1，并且我有一个特定的用例。我必须允许用户删除一个 jar 文件，该文件具有需要动态加载的 RequestMapping 的 @Controller。换句话说，我没有重新启动 Tomcat 或 Context (War) 的选项。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:08:22.110

不确定这是否会解决问题，但您可以尝试通过以下方式重新加载应用程序上下文

```
((ConfigurableApplicationContext)applicationContext).refresh(); 
```

这也有一些缺点，因此请确保您确实需要这种情况。

在一个项目中，我有这样的非常小的要求，但我已经使用 JSP（一种 hack）解决了它。

# backbone.js - 控制器上带有路由器的模块化 Backbone.js Marionette 应用程序 - 路由不起作用

> ID：11617284
> 
> 赞同：1
> 
> 时间：2012-07-23T17:16:53.123
> 
> 标签：backbone.js, marionette, backbone-routing

我目前正在使用 Backbone.js Marionette 框架重写一个已经存在的应用程序。新堆栈应该是相当模块化的，以便可以很容易地添加新控制器。该应用程序有一个 node.js 后端，并为每个调用提供一个 json 响应。

该应用程序是使用（如前所述）Marionette 应用程序定义的：

PlugUI.js: var PlugUI = new Backbone.Marionette.Application();

```
PlugUI.addRegions({
//  adminBarRegion: "#adminbar",
  contentRegion: "#content"
});

PlugUI.bind("routing:started", function(options){
  Backbone.history.start();
  PlugUI.Navigation.showNavigation();
});

Backbone.Marionette.TemplateCache.prototype.loadTemplate = function(templateId, callback){
  ...
});
} 
```

所以，我想，这是相当标准的。然后我确实提供了一个具有一些相当标准内容（即模型、视图和路由器方法）的“控制器”，如下所示：

```
PlugUI.module("Status", function(Status, PlugUI, Backbone, Marionette, $, _) {
  // define the model
  Status.Status = Backbone.Model.extend({
    defaults: {
       ...
    },
    urlRoot: function() {
      return '/api/status';
    },

    fetchStatus: function() {
      var status = new Status.Status();
      status.fetch({
        success: function(data, response){
          Status.showStatus(response);
        }
      })
    }
  });

  Status.showStatus = function(model){
  var status = new Status.Status(model);
  var statusView = new Status.StatusView({
    model: status
  });

  PlugUI.layout.main.show(statusView);
  // add trigger, so that navbar is shown ;-)
  PlugUI.vent.trigger("navbar:show", "status-icon");
}

Status.StatusView = Backbone.Marionette.ItemView.extend({
  tagName: "div",
  className: "one-third column statusbox",
  template: "#status"
});

Status.Router = Backbone.Marionette.AppRouter.extend({
  appRoutes: {
    "status": "showUniqueStatus"
  }
});  

PlugUI.addInitializer(function(options){
  Status.router = new Status.Router({
    controller: PlugUI.Status
  }); 

  PlugUI.vent.trigger("routing:started");    
})
}) 
```

只要我直接触发这个控制器的视图，这就会很好地工作。如果我在其中添加另一个具有相同内容的控制器并通过路由器触发 show 方法，那么基本上什么都不会发生。我现在在前端添加了一个事件，以在新控制器中显示视图，这确实有效，但我认为这些东西应该通过路由器工作。我理解错了吗？

有关完整（不工作）的源代码，请查看[github 项目](https://github.com/triplem/PlugUI/tree/newversion)。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:11:07.670

我不完全确定，但我认为问题在于您的初始化程序（假设您使用的是最新的 Backbone.Marionette 版本）：

```
 PlugUI.addInitializer(function(options){
  Status.router = new Status.Router({
    controller: PlugUI.Status
  }); 

  PlugUI.vent.trigger("routing:started");    
}) 
```

试试`Status.addInitializer`吧

```
 Status.addInitializer(function(options){
  Status.router = new Status.Router({
    controller: Status
  }); 

  PlugUI.vent.trigger("routing:started");    
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T15:42:12.923

很抱歉耽搁了很长时间，但是...

建议的解决方案（移动初始化程序）是解决方案的一部分。此外，我触发了事件“routing:started”，并且该事件触发了“Backbone.history.start();”。我已将此方法的调用移至“initialize:after”，现在一切正常。

```
PlugUI.bind("initialize:after", function(optionns) {
  console.log("initialize:after");
  Backbone.history.start();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-30T23:07:06.360

我想这已经很晚了，但是尝试如下启动 Backbone 历史

```
PlugUI.on("before:start", function(options) {
   console.log("Starting history before start");
   Backbone.history.start();}; 
```

我在这上面浪费了足够多的时间。

PlugUI.on("start") 不起作用，但在 "before:start" 上会

# delphi - 为什么在这里访问冲突？

> ID：11617288
> 
> 赞同：1
> 
> 时间：2012-07-23T17:17:04.027
> 
> 标签：delphi

我正在尝试在一些 Delphi 项目中构建自己的类。代码是这样的：

```
type
 TMyClass = class(TObject)
private
 hwnMain, hwnChild: HWND;
 Buffer, URL: string;
 Timer: TTimer;
public
 procedure ScanForClass;
end;

var
Form1: TForm1;
TimerAccess: TMyClass;

implementation

procedure TForm1.FormCreate(Sender: TObject);
begin
 TimerAccess.ScanForClass;
end;

procedure TMyClass.ScanForClass;
begin
 Timer:= TTimer.Create(Application); **here I get Access Violation!!**
 Timer.Interval:= 5000;
 Timer.Enabled:= true; 
```

为什么会出现访问冲突？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T17:19:16.133

您的代码在使用它之前不会创建该类的实例。

所以它会在这段代码中引发访问冲突异常：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  TimerAccess.ScanForClass;
end; 
```

因为 TimerAccess 仍未初始化（未定义）。

在FormCreate中，调用构造函数并将实例赋值给变量

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  TimerAccess := TMyClass.Create; 
  TimerAccess.ScanForClass;
end; 
```

在 FormDestroy 中，调用析构函数进行清理：

```
procedure TForm1.FormDestroy(Sender: TObject);
begin
  TimerAccess.Free;
end; 
```

注意：如果 TForm1 的实例很多，代码将不起作用，因为变量 TimerAccess 是全局的，并且每个 Form 实例都会在 FormCreate 中分配一个新的 TMyClass 实例，从而导致内存泄漏。一种解决方案是使 TimerAccess 成为 Form 类的属性（或字段）。

# objective-c - 将 UIColor、UIFont 和 NSDictionary 保存到 NSUserDefaults

> ID：11617295
> 
> 赞同：0
> 
> 时间：2012-07-23T17:17:22.350
> 
> 标签：objective-c, ios, cocoa, ios5, nsuserdefaults

在我的应用程序中，我有一些颜色设置、字体设置和一个包含应用程序特定对象的字典（这些对象是具有属性的类，它们是应用程序私有的）。颜色设置和字体设置是应用程序的公共设置。我想将它们保存到**NSUserDefaults**但它会正确显示任何字体或颜色，所以我使用这行代码保存它们

```
// reading the value
NSData *foregroundcolorData = [[NSUserDefaults standardUserDefaults] objectForKey:@"foregroundcolor"];
UIColor *foregndcolor = [NSKeyedUnarchiver unarchiveObjectWithData:foregroundcolorData];

// setting the default values
NSData *foregndcolorData = [NSKeyedArchiver archivedDataWithRootObject:[UIColor blackColor]];
    [[NSUserDefaults standardUserDefaults] setObject:foregndcolorData forKey:@"foregroundcolor"];

// saving the changes, by putting everything in a dictionary called "preferences"
[[NSUserDefaults standardUserDefaults] registerDefaults:preferences];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

我决定将所有设置都放在应用程序 UI 中。为了使上面的代码能够工作，我需要向应用程序项目中添加一个“设置包”文件。这会导致应用程序在设备/系统设置面板中放置一个条目。它是空的，因为我没有在设置包文件中设置任何应用程序配置详细信息。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:40:48.450

自定义持有人对象

```
@interface HolderObject : NSObject

@property (strong, nonatomic) UIColor *xColor;
@property (strong, nonatomic) UIFont *xFont;

@end

@implementation PTextHolder

@synthesize xColor, xFont;

- (void)encodeWithCoder:(NSCoder *)encoder 
{
    [encoder encodeObject:xColor forKey:@"xColor"];
    [encoder encodeObject:xFont forKey:@"xFont"];
}

- (id)initWithCoder:(NSCoder *)decoder 
{
    if (self = [super init]) 
    {
        self.xColor = [decoder decodeObjectForKey:@"xColor"];
        self.xFont = [decoder decodeObjectForKey:@"xFont"];
    }
    return self;
} 
```

# html - 在 IE 上无法完全显示背景

> ID：11617296
> 
> 赞同：0
> 
> 时间：2012-07-23T17:17:24.673
> 
> 标签：html, css, internet-explorer, overflow

这几天我一直在尝试自学 CSS，一切都很顺利。

在此过程中，我遇到了一个问题，希望得到您的帮助。

我正在尝试构建一个简单的三层布局，它在 FF 但不是 IE 上完美运行。

CSS是，

```
#wrapper {
    padding: 5px;
    background-color: yellow;
    margin: 0;
}
#left {
    float :left;
    width: 195px;
    border: 1px solid;
}
#right {
    float: right;
    width: 195px;   
    border: 1px solid;
}
#middle {
    margin-left: 202px;
    margin-right: 202px;
    padding: 0px 3px;
    border: 1px solid;
} 
```

而 HTML 是，

```
<body>
<div id="wrapper">
    <div id="left">
    Lorem ipsum dolor sit amet consect etuer adipi scing elit sed.
    </div>
    <div id="right">
    jnvfr
    </div>
    <div id="middle">
    ubrei
    </div>
</div>  
</body> 
```

背景颜色直到包装结束。添加“溢出：隐藏；”后，它在 FF 中正常工作，但问题仍然存在于 IE 中。

还有谁能解释在这里添加“溢出：隐藏”的目的？

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:44:10.017

容器`#wrapper`的高度对应于没有`float:left|right`or的最高元素的高度`position:absolute|fixed`。
请记住：浮动框不会扩展其父元素。

您可以将*clearfix*添加到`#wrapper`.

```
/* For modern browsers */
#wrapper:before,
#wrapper:after  {
    content:            "";
    display:            block;
    overflow:           hidden;
}
#wrapper:after  {
    clear:              both;
}
/* For IE 6/7 (trigger hasLayout) */
#wrapper {
    zoom:               1;
    clear:              both; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:24:28.270

对我来说，它在 IE9 中似乎工作正常：http: [//jsfiddle.net/bENYd/](http://jsfiddle.net/bENYd/)

确保您对 HTML 使用最新的 DOCTYPE，以便 IE 不会以怪异模式或 IE7-8 标准呈现它。

```
<!DOCTYPE html> 
```

在您的 HTML 文档的开头应该这样做。

# php - 图片上传意外失败

> ID：11617297
> 
> 赞同：0
> 
> 时间：2012-07-23T17:17:29.037
> 
> 标签：php, upload

我有一个图片上传脚本，允许简单的 PHP 上传个人资料图片。现在上传时意外失败。我不完全确定为什么。我检查了 post_max_size 和 upload_max_size ，它们都超过 1MB。我怀疑它与//删除上一张图片有关，但不知道为什么。如果您查看它所说的查询；

```
AND image1 !='../files/noprofile.jpg' 
```

这样一来，如果配置文件图片是默认设置，则默认设置的图像不会被删除。我感觉这与这部分有关，当图像是默认个人资料图片时，上传失败。

我知道我应该使用 mysqli 但请不要提及我正在研究它。

这是整个脚本，为简单起见，删除了一些内容：

```
session_start();
$username=$_SESSION['username'];
$pass = $_SESSION['password']; 
$path = "../imageuploads/";

//Delete previous picture
$pic = mysql_query("
SELECT * FROM members WHERE artist='Y' AND username='$username' AND password='$pass' AND image1 !='../files/noprofile.jpg'
")or die(mysql_error());

 while($fetchpic = mysql_fetch_array($pic)){ 

//if image1 does not equal no profile
unlink( $fetchpic['image1']); 

}

$valid_formats = array("jpg", "png", "gif", "bmp", "jpeg");
if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST")
    {
        $name = $_FILES['photoimg1']['name'];
        $size = $_FILES['photoimg1']['size'];

        if(strlen($name))
            {
                list($txt, $ext) = explode(".", $name);
                if(in_array($ext,$valid_formats))
                {
                if($size<(2024*2024))
                    {
                        $actual_image_name = time().substr(str_replace(" ", "_", $txt), 5).".".$ext;
                        $tmp = $_FILES['photoimg1']['tmp_name'];
                        if(move_uploaded_file($tmp, $path.$actual_image_name))
                            {
                            mysql_query("UPDATE members SET image1='../imageuploads/$actual_image_name' WHERE username='$username' AND password ='$pass' AND artist='Y'");

                                echo "<p1><img src='../imageuploads/".$actual_image_name."'  class='imageright1'></p1>";
                            }
                        else
                            echo "<p1>failed</p1>";
                    }
                    else
                    echo "<p1>Your image is a bit too big. It has to be below 1MB.</p1>";                   
                    }
                    else
                    echo "<p1>Only JPG, PNG GIF and BMP file formats are accepted.</p1>";   
            }

        else
            echo "<p1>You've gotta select an image first!</p1>";

        exit;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:22:22.647

在您的表单标签中，添加属性 enctype：

```
<form action="page.php" method="post" enctype="multipart/form-data"> 
```

# paypal - PayPal 的订阅按钮是否需要用户创建 PayPal 帐户？

> ID：11617303
> 
> 赞同：0
> 
> 时间：2012-07-23T17:18:09.900
> 
> 标签：paypal, paypal-ipn, recurring-billing

我需要为我在我的网站上提供的服务设置定期计费。PayPal的[订阅按钮](https://www.paypal.com/cgi-bin/webscr?cmd=_subscr-intro-outside)似乎是一个很好的解决方案，但是我不希望我的用户创建不必要的 PayPal 帐户。我希望他们只需输入最少量的信息以进行付款（他们的信用卡信息）。

PayPal 是否提供此功能？

ps：我不介意用户从我的网站重定向到 PayPal 的网站，我只是想确保他们不会因为创建*另一个*帐户的义务而不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:04:31.897

如果您使用 PayPal Payments Standard 的增强定期付款，则买家无需拥有 PayPal 帐户。更多细节：

[https://merchant.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=merchant/erp_overview](https://merchant.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=merchant/erp_overview)

也可以看看：

[https://www.paypal-community.com/t5/Merchant-services-Archive/buttons-require-a-paypal-account/td-p/71293](https://www.paypal-community.com/t5/Merchant-services-Archive/buttons-require-a-paypal-account/td-p/71293)

# linux - 为什么使用 echo/sudo 时 shell 重定向失败？

> ID：11617305
> 
> 赞同：0
> 
> 时间：2012-07-23T17:18:24.283
> 
> 标签：linux, bash, shell, file-io, permissions

我有一个行为出乎意料的简单脚本。

```
path='/usr/local/bin/new_script'

content='#!/bin/bash\nls'

sudo echo -e "$content" > "$path" 
```

**引发错误：**

`bash: /usr/local/bin/new_script: Permission denied`

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:25:09.387

您没有对文件 /usr/local/bin/new_script 或目录 /usr/local/bin 的写入权限

使用 sudo 执行 echo 命令没有帮助，因为 echo 只是写入 stdout 指向的任何文件。问题是外壳打开了您尝试重定向到的文件，该文件仍以普通用户身份运行。

一个解决方案是确保最终打开和写入文件的进程以 root 身份运行，例如：

```
echo -e "$content" | sudo dd of="$file" 
```

这会导致 'dd' 以 root 身份运行，并让它打开文件进行写入，而不是你的 shell。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T17:38:35.460

您可以使用以下方法进行重定向：

```
sudo sh -c "echo -e '$content' > $path" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T17:24:32.093

重定向由当前用户处理，而不是作为根用户。因此，除非当前用户对*$path*具有写入权限，否则重定向可能会失败。

*您可以使用tee*绕过此限制。例如：

```
# echo as current user; tee as root
echo -e "$content" | sudo tee "$path" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T17:25:28.450

您可能没有写入权限`/usr/local/bin/`。您正在使用 sudo，但文件重定向 (>) 被应用于 sudo 的输出`sudo`，而不是 sudo 的命令 (echo)。所以重定向的特权没有升级。

# simperium - Simperium IOS 的自定义登录

> ID：11617310
> 
> 赞同：1
> 
> 时间：2012-07-23T17:18:37.507
> 
> 标签：simperium

我正在尝试通过 IOS 使用 Simperium。但我有一个明显的问题。我不想使用内置的`LoginViewController`. 因此，出于这个原因，我使用 Post 方法进行 POST`https://auth.simperium.com/1/{app_id}/authorize/`并授权应用程序并取回访问令牌。

但是当我在 SPUser 实例中设置访问令牌并将 SPUser 实例添加到 Simperium 时获得访问令牌后，我得到：

> Simperium 未找到现有的身份验证令牌。**

这是代码：

```
simperium = [[Simperium alloc]initWithRooViewController:window.rootViewController];
[simperium enableManualAuthentication];
SPUser *spUser = [[SPUser alloc]initWithEmail:email token:accessToken]; //received accesstoken from Postmethod 
[simperium setUser:spUser];
[simperium startWithAppID:@"" .....]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:26:49.157

[请参阅GitHub 上 Simperium 存储库](https://github.com/Simperium/simperium)的“iosupdate”分支以及[相关讨论](https://github.com/Simperium/simperium/issues/23)。您会发现在这个分支中自定义流程的最简单方法是创建您自己的 的子类`SPLoginViewController`，然后您无需担心网络方面的事情。

# javascript - 引用 SELECT 列表 jQuery

> ID：11617312
> 
> 赞同：0
> 
> 时间：2012-07-23T17:18:41.180
> 
> 标签：javascript, jquery, ajax, select

我有一个 SELECT 列表如下

```
<select id="LIST">
   <option value="1">New York</option>
   <option value="2">Chicago</option>
   <option value="3">Miami</option>
       .
       .
       .
   <option value="N">Nth location</option>
</select> 
```

我有一个不相关的点击按钮，它进行返回位置 ID 的 API 调用。位置 ID 对应于上面 SELECT 列表中的值。与进行第二次 API 调用以将 ID 解析为名称相反，我如何在 jQuery 中执行以下操作

```
 $("#LIST")[returned_id].html() 
```

例如，如果按钮返回位置 id 2：

```
 $("#LIST")[2].html() 
```

应该返回“芝加哥”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:21:11.273

您可以使用`attribute selector`. 尝试以下操作：

```
var txt = $('#LIST option[value='+ id +']').text() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:21:16.510

您可以使用[jQuerys 选择器](http://api.jquery.com/category/selectors/)为您完成工作 - 特别是[Attribute Equals Selector](http://api.jquery.com/attribute-equals-selector/)

> `jQuery('[attribute="value"]')`

所以你的代码需要看起来像这样 -

```
var cityName = $('#LIST > option[value="'+ RETURNED_ID +'"').text(); 
```

这里我们说我们希望所有`<option>`标签的 value 属性等于 的值`RETURNED_ID`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T17:21:38.893

```
var valueOfItemToChange=2
alert($("#LIST option[value='"+valueOfItemToChange+"']").text()) 
```

将警告值为 2 的选项文本

工作样本[http://jsfiddle.net/EctGG/5/](http://jsfiddle.net/EctGG/5/)

# lua - Luabind - 无法找到 Lua 库

> ID：11617313
> 
> 赞同：3
> 
> 时间：2012-07-23T17:18:41.260
> 
> 标签：lua, luabind

我正在尝试为我的项目编译 Luabind，但收效甚微。我将 lua 目录（包含 src、makefile 等）作为 luabind 的兄弟。我将 LUA_PATH 设置为 /my/dirs/lua 文件夹。我正在运行 OSX 服务器 10.4。

当我进入 luabind 并输入 bjam 时，出现错误：

```
error: at Jamroot:101
error: *** Unable to find Lua Library 
```

如果我将 LUA_PATH 设置为*不正确*的目录，则错误位于第 73 行（无法确定 Lua 包含目录）。

我已经松散地遵循了本教程：[http ://cfc.kizzx2.com/index.php/building-luabind-on-mac-os-x/](http://cfc.kizzx2.com/index.php/building-luabind-on-mac-os-x/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T19:25:56.980

我刚遇到和你一样的问题。

我正在运行 Mageia 3。

在 Jamroot 中，我注意到它用于`local lib = $(prefix)/lib ;`指定路径。在我的机器中，安装 LUA 的路径是`/lib64`. 我改变了，它奏效了。

检查文件并查看它是否与您的系统对应。我注意到不仅路径是硬编码的，LUA 库版本也是如此。

是的，我知道您的系统使用 MAC，并且这篇文章来自 2012 年。我只是希望这个答案可以帮助任何最终遇到此问题或类似问题的人。

# trigger.io - trigger.io 的根 url 是什么？

> ID：11617315
> 
> 赞同：1
> 
> 时间：2012-07-23T17:18:54.390
> 
> 标签：trigger.io

只是尝试将其作为 phonegap 的替代方案，并且只是想知道每个平台的根 url 位置是什么。

我知道安卓是：

`file:///android_asset/src`

但有人能告诉我其他平台的根 url 是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:51:50.510

最好使用我们的[forge.tools.getURL](http://docs.trigger.io/en/v1.4/modules/tools.html#geturl)方法，而不是硬编码每个平台的根 URL。

除了更容易使用该方法外，这还使您的代码能够抵抗我们模板结构的任何更改。

# php - 将屏幕宽度存储在变量中以及如何在 html 和 css 中使用它

> ID：11617318
> 
> 赞同：1
> 
> 时间：2012-07-23T17:19:13.193
> 
> 标签：php, javascript, html

我想要的是建立一个非常灵活的网站供个人使用。实际上，我的浏览器中有这个。![在此处输入图像描述](../Images/3932a72422ce97afe5010de4d3d2b994.png)这将是我的起始页面。问题是我将容器设置为 70% 的宽度。我怎样才能将字体大小和单词之间的间隙设置为容器宽度的 x%？我认为答案与 javascript 相关，但我可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:19:30.890

你应该真的可以用 CSS 解决这个问题，但是如果你想用 js 和 php 来解决这个问题，你可以这样做。

1.  您的第一页应该只包含一个 jquery 函数，该函数检索屏幕分辨率并同步通过 GET 或 POST ajax 将其发送到 php 脚本。然后脚本将分辨率保存到 $_SESSION。在服务器上获得分辨率数据后，将浏览器重定向到真实页面。您的真实页面应该有一个动态输出的 CSS，例如 style.php。在这个 php 中，您应该返回正确的标题，说明它是一个样式表文件（mime），然后输出您的 css，其中的值是根据您在会话中的分辨率计算得出的。

好吧，这是我的想象，你可能不应该这样做，因为它很丑而且有很多开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:23:39.903

我相信这实际上更像是一个带有一点 javascript/jquery 的 css 问题。这应该可以帮助您实现您的目标：[http ://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

# android - 单击时GridView突出显示不正确的位置

> ID：11617324
> 
> 赞同：0
> 
> 时间：2012-07-23T17:19:43.253
> 
> 标签：android, gridview, highlight

我正在尝试拥有一个可以单击以触发各种事件的图像 GridView。GridView 应该自动突出显示我按下的单元格。

问题是，当正确的单元格实际被按下时，高亮效果会出现在不同的单元格上。对于 GridView 中的大多数（但不是全部）行，无论实际按下哪个单元格，都会在该行的第一个单元格上突出显示。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:26:20.017

一些东西。要么您没有对传入的实际视图执行 findViewByIds。检查您是否正在执行 view.findViewById() 并确保您从 getItem(int position) 返回正确的对象。即不只是返回位置，尊重您的数据并实际返回对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-17T19:52:52.853

GridView 回收其内容，即位置 0 的内容可以有多个值，具体取决于应用程序的状态 //scroll 等

GridView 仅存储当前在屏幕上可见的内容

您必须为预期的行为编辑适配器代码

参考：[GridView按位置获取视图，第一个子视图不同](https://stackoverflow.com/questions/20548276/gridview-get-view-by-position-first-child-view-different)

# search - 遵循构建 DAWG 的步骤会产生 Trie。为什么？

> ID：11617325
> 
> 赞同：1
> 
> 时间：2012-07-23T17:19:48.747
> 
> 标签：search, full-text-search, trie, finite-automata, directed-acyclic-graphs

我正在尝试实现一组函数，这些函数可以在线性时间内直接创建一个 DAWG，用于我正在为个人项目编码的某些搜索功能。我阅读[了这篇论文](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.117.9069)，其中详细介绍了 DAWG 背后的想法，甚至还提供了线性时间构建的伪代码！

但是，遵循伪代码似乎会产生（在我看来）类似 trie 的结构。具体来说，似乎没有明确共享后缀（实际上由图中的边连接）。相反，它们由后缀指针表示，后缀指针实际上与图的实际遍历没有关系。

例如，看看这张 DAWG 的图片中的单词`{tap, taps, top, tops}`（来自[DAWG Wikipedia 页面](http://en.wikipedia.org/wiki/Directed_acyclic_word_graph)）：

![在此处输入图像描述](../Images/6e90f5cbf99fbf9daded32e782ae39b3.png)

现在，将其与上述论文中详述的这些步骤所获得的结构进行比较（使用这组单词手动完成所需的时间可以忽略不计）：

```
Note: Edges are labeled by letters
      Nodes are labeled by the concatenation of the labels of the primary edges
      used to reach them
      Suffix pointers are not visually represented on the graph

      primary edges:   solid edges used to traverse graph
      secondary edges: dotted edges implying a suffix relationship between
                       the letter labeling the edge and the substring 
                       represented by the target node

builddawg(S)
    1\. Create a node named source.
    2\. Let activenode be source.
    3\. For each word w of S do:
        A. For each letter 'a' of w do:
            Let activenode be update (activenode, a).
        B. Let activenode be source.
    4\. Return source.

update (activenode, a)
    1\. If activenode has an outgoing edge labeled 'a', then
        A. Let newactivenode be the node that this edge leads to.
        B. If this edge is primary, return newactivenode.
        C. Else, return split (activenode, newactivenode).
    2\. Else
        A. Create a node named newactivenode.
        B. Create a primary edge labeled 'a' from activenode to newactivenode.
        C. Let currentnode be activenode.
        D. Let suflxnode be undefined.
        E. While currentnode isn’t source and sufixnode is undefined do:
            i. Let currentnode be the node pointed to by the suffix
               pointer of currentnode.
            ii. If currentnode has a primary outgoing edge labeled 'a',
                then let sufixnode be the node that this edge leads to.
            iii. Else,if currentnode has a secondary outgoing edge labeled 'a' then
                a. Let childnode be the node that this edge leads to.
                b. Let suffixnode be split (currentnode, childnode).
            iv. Else, create a secondary edge from currentnode to newactivenode
                labeled 'a'.
        F. If sufixnode is still undefined, let suffixnode be source.
        G. Set the suffix pointer of newactivenode to point to sufixnode.
        H. Return newactivenode.

split (parentnode, childnode)
    1\. Create a node called newchildnode.
    2\. Make the secondary edge from parentnode to childnode into
       a primary edge from parentnode to newchildnode (with the same label).
    3\. For every primary and secondary outgoing edge of childnode,
       create a secondary outgoing edge of newchildnode with the
       same label and leading to the same node.
    4\. Set the suffix pointer of newchildnode equal to that of childnode.
    5\. Reset the suffix pointer of childnode to point to newchildnode.
    6\. Let currentnode be parentnode.
    7\. While currentnode isn’t source do:
        A. Let currentnode be the node pointed to by the 
           suffix pointer of currentnode.
        B. If currentnode has a secondary edge to childnode,
           then make it a secondary edge to newchildnode (with the same label).
        C. Else, break out of the while loop.
    8\. Return newchildnode. 
```

我得到的结构不等同于上图。事实上，它看起来几乎与 trie 相同，除了将次要边转换为主要边所产生的额外节点。与上面的 DAWG 等效的 trie 是：

![在此处输入图像描述](../Images/934dcfe0cbecfe249279a04dbbf8ee28.png)

我只是应用了错误的算法，有几种类型的 DAWGS，还是我只是误解了 DAWG 应该是什么样子？

我看过的大多数详细介绍 DAWG 的论文都有似乎是由算法创建的结构，但我读过的大多数在线资料（以及我看过的图片）都有连接常见后缀的实际边缘。我不知道该相信什么，或者它们是否实际上是等价的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:24:22.347

我相信我找到了解决方案。

构建 DAWG 后，您可以从上到下遍历节点，并删除带有 的子树`suffixPointer != source`，将它们直接连接到指向的节点`suffixPointer`。

# asp.net-mvc - 我需要澄清有关 JQuery AJAX 和 MVC 3 的 GET 和 POST

> ID：11617329
> 
> 赞同：0
> 
> 时间：2012-07-23T17:20:20.430
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, postback

我想知道这是否是一个全有或全无的情况。我想做的是，通过普通的 MVC 3 加载（GET）我的页面。控制器获取模型并将其传递给视图。View 和 Razor 渲染它。但是，当我回发时，我希望它通过 AJAX 回发所选信息。这可能吗？还是我用 AJAX 做 GET 和 POST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:22:11.373

您当然可以在使用其他方式获取之后使用 AJAX 发布。

这是一个关于 SO 的随机问题，它就是这样做的：

[MVC 3 中的 Ajax 帖子与多表单视图](https://stackoverflow.com/questions/9999703/ajax-post-in-mvc-3-with-multiple-form-view)

GET 和 POST 操作根本不必相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:25:56.207

试试下面的东西。
控制器代码：

```
[HttpGet]
    public ActionResult WhateverActionName()
    {
        YourViewModel yvm = new YourViewModel();
        //Initalize viewmodel here
        Return view(yvm);
    }
[HttpPost]
public ActionResult WhateverActionName(YourViewModel yvm)
{
    if (ModelState.IsValid) {
        RedirectToAction("OtherAction", "OtherController")
    }
    return View(yvm);
} 
```

阿贾克斯：

```
$.ajax({
    url: myurl
    // processData: false, // you may need this option depending on service setup
    success: function(){
        location.href = "TARGET LOCATION";
    },
    type: "POST"
}); 
```

对于目标位置：您需要为 ajax 提供一个变量，该变量包含以下生成的任何 URL

```
@URL.Action("Action", "Controller") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:29:33.977

[http://knockoutmvc.com](http://knockoutmvc.com)提供了一种将服​​务器端代码与客户端集成的好方法，看起来它可以帮助您轻松实现您想要的。

# html - 如何确保所有图像正确加载

> ID：11617331
> 
> 赞同：1
> 
> 时间：2012-07-23T17:20:30.243
> 
> 标签：html, image, browser

在我的 HTML 页面中，我从同一个域加载了大约 40 张图像（在页面启动时，所有图像同时加载）。问题是，有时有些图像不显示，它们只是一个左上角带有红色 X 的白框。但是，如果我尝试刷新页面一次（或几次），则该图像会正常加载。

有谁知道为什么会发生这种情况以及如何确保所有图像加载正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:23:39.750

发生这种情况是因为图像没有及时完成加载。您可以尝试[使用 javascript 预加载它们](http://www.yourhtmlsource.com/images/preloading.html)

我要做的是确保图像很小（使用缩略图），以便它们可以加载。然后，一次只加载几个，并在页面滚动或用户请求更多图像时加载更多。

有关其工作原理的示例，请参见 google images 或 pinterest。当您滚动页面时，会加载更多图像，而不是一次加载所有图像。

# java - 根据用户输入创建多个元组

> ID：11617334
> 
> 赞同：0
> 
> 时间：2012-07-23T17:20:53.817
> 
> 标签：java, mysql

我只是有一个关于 MySql + java 的问题。我需要能够根据用户输入创建元组。

所以问题会出现

“你想在部门表中有多少个元组？” 用户：100。

在部门表中创建了 100 个元组。

我知道将使用一个循环，但我不确定是否要继续。

不是找人来做我的HWk，而只是一个寻找一点方向的初学者。

提前致谢。

布兰登

编辑：

// 我必须为 Pk 做一个增量；

其实我明白了。刚用了一个

```
'While (count < userinput)
{
       insert into department (col1,col2,col3) values ('"+counts+"', null, null)

       counts++;
       count++;

} 
```

'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:05:14.717

您可以只创建一个存储部门 id 大小和名称的表，然后为用户输入一个表，其中每个元组都有一个相应的部门 id。

## 部门

```
did int primary key
size int
name varchar(100) 
```

## 内容

```
id int autoincrement
did int
content1 int
content2 int 
```

部门的百货商店列表，所有部门的用户输入的内容商店列表。

# haskell - 安装接穗浏览器时出错

> ID：11617335
> 
> 赞同：2
> 
> 时间：2012-07-23T17:20:54.810
> 
> 标签：haskell, cabal

尝试安装 scion-browser 软件包时出现以下错误，如下所示：

```
% cabal install scion-browser-0.2.9
<snipped>
[23 of 23] Compiling Main             ( src/Main.hs, dist/build/scion-browser/scion-browser-tmp/Main.o )

src/Main.hs:31:24:
    No instance for (MonadException BrowserM)
      arising from a use of `getInputLine'
    Possible fix:
      add an instance declaration for (MonadException BrowserM)
    In a stmt of a 'do' block: maybeLine <- getInputLine ""
    In the expression:
      do { maybeLine <- getInputLine "";
           case maybeLine of {
             Nothing -> return ()
             Just line -> do { ... } } }
    In an equation for `loop':
        loop
          = do { maybeLine <- getInputLine "";
                 case maybeLine of {
                   Nothing -> return ()
                   Just line -> ... } }
cabal: Error: some packages failed to install:
scion-browser-0.2.9 failed during the building phase. The exception was:
ExitFailure 1 
```

知道如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:08:38.210

问题是[haskeline-0.7.0.0](http://hackage.haskell.org/package/haskeline-0.7.0.0)改变了使用的`StateT`类型。在`haskeline < 0.7`中，它使用了`Control.Monad.State`来自[mtl](http://hackage.haskell.org/package/mtl)的模块，在 0.7.0.0 版本中，删除了对并直接使用了[transformers](http://hackage.haskell.org/package/transformers)包的monad 转换器`haskeline`的依赖。这本身不是问题，因为now 只是. 但是，使用的模块is ，而from wraps 。就这样`mtl``StateT``mtl``transformers``haskeline``Control.Monad.Trans.State.Strict``Control.Monad.State``mtl``Control.Monad.Trans.State.Lazy`

```
instance MonadException m => MonadException (StateT s m) where
    controlIO f = StateT $ \s -> controlIO $ \(RunIO run) -> let
                    run' = RunIO (fmap (StateT . const) . run . flip runStateT s)
                    in fmap (flip runStateT s) $ f run' 
```

from`System.Console.Haskeline.MonadException`不再用于`StateT`scion [-browser](http://hackage.haskell.org/package/scion-browser)。

简单的解决方法是限制`haskeline`到早期版本，

```
cabal install --constraint="haskeline < 0.7" scion-browser 
```

另一个修复方法是将`scion-browser`源中的导入更改为`Control.Monad.State.Strict`使用`haskeline-0.7.0.0`.

# javascript - html + jquery（在onclick之前绑定onclick事件以执行操作）

> ID：11617337
> 
> 赞同：0
> 
> 时间：2012-07-23T17:20:59.060
> 
> 标签：javascript, jquery, html

我对“事件点击”和“执行顺序”有疑问。

我在这里做一个例子（HTML 是由外部 javascript 生成的）：

**HTML**：

```
<a href="#" id="comments-replybutton" onclick="alert('Action');return false;">Comment</a>​ 
```

**JavaScript：**

```
$(document).ready(function(){
    $('#comments-replybutton').click(function(){
        alert('2 attach event');
    });
});​ 
```

我希望在单击“评论”时首先执行 jquery 的操作（绑定事件）。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:30:31.710

我相信你正在寻找`preventDefault()`.
更多[在这里](http://api.jquery.com/event.preventDefault/)。

```
$(document).ready(function(){
    $('#comments-replybutton').click(function(e){
        e.preventDefault();
        alert('2 attach event');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:25:20.323

```
$(document).ready(function(ev){
    $('#comments-replybutton').click(function(ev){
        alert('2 attach event');
        ev.stopPropagation();
    });
});​ 
```

你的意思是，像这样？

*评论后编辑*

您还可以将函数命名为取消绑定：

```
var myEventHandler = function myFunction(ev){
    $(this).unbind(myFunction);
    alert('attach event 2');
    ev.stopPropagation();
}
$('#comments-replybutton').bind('click', myEventHandler); 
// $(something).click(fn) is just a shorthand to $(something).bind('click', fn); 
```

*编辑 2*

我想你可以很容易地杀死原始事件，只需说 document.getElementById('comments-replybutton').onclick = "" 或类似的东西。您可以通过复制之前重新附加它：

```
var original_event_handler = $('#comments-replybutton')[0].onclick;
$('#comments-replybutton')[0].onclick = "";
$('#comments-replybutton').click(original_event_handler); 
```

有点脏，但我懒得去查：S preventDefault 在这里帮不了你。

[http://jsfiddle.net/C37ka/](http://jsfiddle.net/C37ka/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:29:23.093

试试这个：

```
$(document).ready(function(){
    $('#comments-replybutton').unbind('click').click(function(){
        alert('2 attach event');
    });
});​ 
```

如果你还需要在最后执行 inline 语句，你将需要这样的东西：

```
$(document).ready(function(){
    var initialEvent = $('#comments-replybutton')[0].onclick;
    $('#comments-replybutton').click(function(){
        alert('2 attach event');
    }).click(initialEvent);
});​ 
```

# php - 在 PHP 中使用“this”和“self”

> ID：11617344
> 
> 赞同：4
> 
> 时间：2012-07-23T17:21:24.213
> 
> 标签：php

> 使用 $this 来引用当前对象。使用 self 来引用当前类。换句话说，对非静态成员使用 $this->member，对静态成员使用 self::$member。

[http://board.phpbuilder.com/showthread.php?10354489-RESOLVED-php-class-quot-this-quot-or-quot-self-quot-keyword](http://board.phpbuilder.com/showthread.php?10354489-RESOLVED-php-class-quot-this-quot-or-quot-self-quot-keyword)

```
class Demo
{
    private static $name;
    private $age;

    public function __construct($name, $age) 
    {
        self::$name = $name;
        $this->age=$age;
    }   

    public function show()
    {       
        echo "Name : ", self::$name, "<br/>";   //Accessing by self
        echo "Name : ", Demo::$name, "<br/>";   //Accessing by class name 
        echo "Age  : ", $this->age, "<br/>";    
    } 
}

$demo = new Demo("Tiny", 13);
$demo->show(); 
```

这会产生以下输出。

```
Name : Tiny
Name : Tiny
Age : 13 
```

`self::$name`和`Demo::$name`前面的代码片段有什么区别？

* * *

```
class Person1
{
    private $name;
    private $address;

    public function __construct($name,$address)
    {
        $this->name = $name;
        $this->address = $address;
    }

    public function show()
    {
        echo "Name    : ", $this->name, "<br/>";    
        echo "Address : ", $this->address, "<br/>";  //Accessing by this
    }
}

$p1=new Person1("xxx", "yyy");
$p1->show();

class Person2
{
    private $name;
    private $address;

    public function __construct($name,$address)
    {
        self::$name = $name;
        self::$address = $address;
    }

    public function show()
    {
        echo "Name    : ", self::$name, "<br/>";    
        echo "Address : ", self::$address, "<br/>"; //Accessing by self 
    }
}

$p2=new Person1("xxx", "yyy");
$p2->show(); 
```

前面两个类`Person1`并`Person2`产生相同的输出，如下所示。

```
Name : xxx
Address : yyy 
```

`Preson1`（如在类中，`show()`方法中）有什么区别

```
$this->name;
$this->address; 
```

和（如在`Preson2`类中，`show()`方法）

```
self::$name;
self::$address; 
```

**在这种情况下**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:39:59.907

在类中使用`Demo::$name`and `self::$name`from`Demo`实际上是相同的。您可以通过名称访问它，因为该变量是静态且可访问的，就像您可以使用类的名称从不同的类访问*公共*静态变量一样，例如。

*因此，在这种情况下，按名称访问主要只是能够从可访问类访问任何*公共静态变量的副产品。

第二个输出与第一个输出相同，因为您显然是在创建一个新`Person1`对象，而不是一个`Person2`对象（请参阅`$p2=new Person1("xxx", "yyy");`：）

如果您要创建一个`Person2`对象，那么您会得到一个错误，因为您不能将值分配给一个尚未声明的静态变量（您在 and 中有对象级变量`name`，`address`但不是静态的）。如果您将它们声明为`static`，那么您将从修改后的`show`方法中获得相同的输出，因为它使用的是静态调用。

如果您不确定对象（读取：实例）变量和静态变量之间的区别是什么，那么我鼓励您参与一些谷歌搜索，但基本上静态变量存在于类级别，而不是对象级别，并且可以访问来自指定类型的任何类方法或对象（例如，如果您有 100 个实例，`Person2`它们都可以访问*同一个* `name`变量），而实例变量对于单个对象本身是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:52:11.337

在您的第一个示例中`self::$name`，`Demo::$name`如果在`Demo`类中使用它们实际上是相同的。

您的第二个示例应该会导致错误，因为您尚未声明静态`$name`和`$address`属性并且正在访问它们。它适用于您的情况，因为您正在创建一个实例`Person1`（可能是无意的）：

```
$p2=new Person1("xxx", "yyy"); 
```

# javascript - HTML onchange 显示/隐藏表格

> ID：11617345
> 
> 赞同：0
> 
> 时间：2012-07-23T17:21:25.843
> 
> 标签：javascript, jquery, html, onchange

我知道已经有很多关于 onchange 的例子，但我觉得我做错了什么，因为它们不起作用......

我有两张桌子，想根据他们从下拉菜单中选择的内容来显示一张。

```
<select name="test" id="test" onchange="" size="1">
    <option value="0">Select Table...</option>
    <option value="1">Table 1</option>
    <option value="2">Table 2</option>
</select> 
```

表

```
<table id = "t1" border="1">
<tr>
<th>Header 1</th>
<th>Header 2</th>
</tr>
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table> 

<table id = "t2" border="1">
<tr>
<th> 1</th>
<th> 2</th>
</tr>
<tr>
<td> 1,  1</td>
<td> 1,  2</td>
</tr>
<tr>
<td> 2,  1</td>
<td> 2,  2</td>
</tr>
</table> 
```

我应该在 onchange 部分放置什么以便它显示选择的表？

我也在使用 jQuery，并且知道我可以调用它的 show() 和 hide() 函数，但不知何故我不知道如何使用 onchange="" 部分来做到这一点......有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:25:28.730

如果你想使用 jQuery：

```
$('#test').change(function() {
    $('#t1,#t2').hide();
    $('#t' + $(this).val()).show();
}) 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ypec3/)**

仅使用纯 JavaScript：

```
var opt = document.getElementById('test');
opt.onchange = function() {
    document.getElementById('t1').style.display = 'none';
    document.getElementById('t2').style.display = 'none';
    document.getElementById('t' + this.value).style.display = '';
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ypec3/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:27:18.047

老实说，您不应该在 HTML 元素的属性中添加*任何内容。*`onchange`最好将功能与标记分开。在页面的其他地方（或页面引用的单独 JavaScript 文件中），您可以绑定到更改事件：

```
$('#test').change(function () {
    $('#t1,#t2').hide();
    var tableValue = $(this).val();
    $('#t' + tableValue).show();
}); 
```

**编辑：**为清楚起见，最后一行使用来自`select`目标表的`id`. 这是基于两者总是相关的假设，但我想我无法准确地做出这个假设*。*更明确的方法是：

```
$('#test').change(function () {
    $('#t1,#t2').hide();
    var tableValue = $(this).val();

    if (tableValue == 1) {
        $('#t1').show();
    } else if (tableValue == 2) {
        $('#t2').show();
    }
}); 
```

*   **优点：**代码更明确。
*   **优点：**`select`表的 s 和s 中的值`id`不必手动维护以随着代码的变化而随着时间的推移而匹配。
*   **缺点：**添加新`select`值和新表意味着还需要修改此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:27:59.590

```
$('select#test').on('change', function () {
    var _tableID = $(this).val();

    $('table[id^="t"]').hide(); // assuming they all start with #id t then a #
    $('#t' + _tableID).show(); // make sure the values in the select options line up
}); 
```

# sql-server - 开发到登台到生产

> ID：11617351
> 
> 赞同：0
> 
> 时间：2012-07-23T17:21:34.723
> 
> 标签：sql-server, database, reporting-services, ssis, ssas

我拥有的工具： SQL Server Database/SSIS/SSAS/SSRS Dev/Stage/Prod 的不同服务器 Dev/Stage/Prod 的不同数据库 (SSMS/SSAS)

目标：在开发环境中创造一些东西。将其传递给暂存。验证后，将其传递给生产。

问题：我该怎么做？

一旦我在 dev 中制作了一些表、包、多维数据集、包，我如何将其推送到登台服务器，最后推送到生产服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:51:35.520

您没有指定您使用的版本，所以我只假设 2012 以外的版本。以下信息适用于 2005、2008 或 2008 R2 版本。

对于 SSIS - 请参阅：http://technet.microsoft.com/en-us/library/cc966389.aspx。简短的故事 - 您在 BIDS 中使用了一个包部署实用程序，它可以用来组合一个清单，允许管理员将您的所有包推送到目标位置，无论是在文件系统上还是在 MSDB 中。

对于 SSRS - 请参阅：[http](http://rsbuild.codeplex.com/) ://rsbuild.codeplex.com/了解可用于部署报告的工具。您还可以编写一个 RSS 脚本，将您的 RDL 文件提供给管理员以进行部署。您可以在以下位置了解有关此选项和其他选项的更多信息：[http ://www.sqlservercentral.com/articles/Administration/2967/](http://www.sqlservercentral.com/articles/Administration/2967/)

对于 SSAS - 您可以从 Microsoft SQL Server 20xx 程序组中的 Analysis Services 文件夹（从“开始”菜单）中打开一个部署向导。您将其指向一个 ASDATABASE 文件并逐步通过向导来配置您想要的任何设置（例如更改的连接字符串）并生成一个 XMLA 脚本文件，您可以将其交给管理员以便在目标服务器上执行。在此处了解更多信息：http: [//msdn.microsoft.com/en-us/library/ms174817.aspx](http://msdn.microsoft.com/en-us/library/ms174817.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:30:19.740

在 SSIS 上，您可以生成部署清单并将其发送给 DBA 进行部署

在 SSAS 上，有几种部署方式，例如 BIDS 和同步数据库向导，但最好的选择是 Deployment Wizardo，它使您能够生成更新多维数据集和维度结构的增量部署脚本。还可以自定义角色和分区的处理方式。我通常将它与运行向导但不实际部署多维数据集的 /a 模式一起使用，只创建脚本，然后将脚本发送给 DBA 进行实际部署

在 SSRS 上将报告文件发送给 DBA，并为他们提供有关将其上传到的文件夹的说明。还要求创建所需的任何数据源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:14:51.230

不是为私人公司骗钱，但我的组织使用[http://www.sqldelta.com/](http://www.sqldelta.com/)，这是一个相当容易使用的工具。允许逐个比较数据库对象和可选的数据库表数据。

# sql - MSSQL 在表 1 中给出新的主键并在表 2 中更新相应的键

> ID：11617357
> 
> 赞同：0
> 
> 时间：2012-07-23T17:21:53.520
> 
> 标签：sql, foreign-keys, primary-key

我有一个 product 和 product_detail 表对，我需要从中复制数据并更新主键。基本上我要做的是从两个表中复制昨晚的数据，给它们新的主键，这样它们就不会与当前数据发生冲突，并在更新了一些信息的情况下插入回表中 - pk/fk，update_date ，以及标记为不同内容的两个字段。

我不能对表进行更改，所以我不能使用更新级联。我们有一个文件，它执行一天结束批处理并将数据插入表中。我们还有一个文件，该文件在白天每次发生交易时都会更新，所以我想我可以做的是复制昨晚的数据，更新密钥以使它们不会发生冲突，然后用新的数据集更新白天从文件中输入。现在的情况是，我们的用户必须等到一天结束才能看到我们在哪里。随着白天的更新，他们可以随着一天的进展看到余额。

我相信我将不得不从主表中获取信息，获取新的 pk，更新其他信息，并将新的 pk 传递给第二个表以替换它拥有的原始 fk 并逐行执行。

我是否朝着正确的方向前进？

# qt - QImage 写入时复制

> ID：11617358
> 
> 赞同：2
> 
> 时间：2012-07-23T17:21:55.320
> 
> 标签：qt, qimage, pimpl-idiom, copy-on-write, qshareddata

是`QImage`基于`QSharedData`？`Qimage`跟随`pimpl`or `copy on write`? _ 例如，复制（通过复制或分配）Qimage 会制作像素的深层复制吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:32:33.787

QImage 是写时复制。在您开始修改它之前，它不会复制像素。

对于将它传递给函数时的价值，我总是使用 const QImage & 无论如何不要吓到任何人。

# asp.net-mvc - Orchard CMS：帮助建立一对一的关系

> ID：11617359
> 
> 赞同：0
> 
> 时间：2012-07-23T17:21:54.993
> 
> 标签：asp.net-mvc, orchardcms

我正在阅读[http://docs.orchardproject.net/Documentation/Creating-1-n-and-nn-relations#Building_an_iN-Ni_Relationship_34](http://docs.orchardproject.net/Documentation/Creating-1-n-and-n-n-relations#Building_an_iN-Ni_Relationship_34)但它似乎没有说明应该创建哪些文件以及在哪里创建。例如，第一部分说，“这是地址部分的代码”，但它没有说明将文件保存为什么名称以及将其放置在何处。有人可以告诉我该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T23:26:46.130

1.  你可以下载源码压缩包看看。
2.  您可以查看`class`例如的代码：

    ```
    namespace RelationSample.Models {
        public class AddressPart : ContentPart<AddressPartRecord> 
    ```

    它告诉您创建一个名为*Models*的文件夹并将文件*AddressPart.cs*放入其中。

# c# - 编辑列表中的对象 不创建该对象的新实例？

> ID：11617363
> 
> 赞同：2
> 
> 时间：2012-07-23T17:22:08.000
> 
> 标签：c#

我在 EF4.1 Code First 中创建一个数据库。我有一张表 MedicalPlan，它与 CoverageLevel 具有一对多的关系。CoverageLevel 主键正在递增。当我创建 MedicalPlan 时，我声明了 coveragelevels 并创建了这些表，如下所示：

```
medicalPlan.CoverageLevels = new List<CoverageLevel>();
medicalPlan.CoverageLevels.Add(new CoverageLevel() { Cost = 1200, Description = "single" });
medicalPlan.CoverageLevels.Add(new CoverageLevel() { Cost = 1500, Description = "spouse" });
medicalPlan.CoverageLevels.Add(new CoverageLevel() { Cost = 1100, Description = "family" }); 
```

我还有一个更新功能，我可以在其中更新医疗计划。我还想要更新 MedicalPlan 的 CoverageLevels 的功能。在伪代码中，类似于：

```
in medicalPlan edit first item in CoverageLevels() { Cost = 1500 }; 
```

关键是我实际上并不想*替换*CoverageLevel，因为它具有唯一的自动递增主键，所以如果我创建一个新主键，它将具有与原始主键不同的主键。有没有办法以我尝试的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:25:47.763

您可以在 EF 上下文中改变实体或相关实体，并且保存更改应该为您正确处理所有更新，而无需创建新条目：

```
// get EF Context
var firstCoverage = myMedicalPlan.CoverageLevels.FirstOrDefault();
if (firstCoverage != null) firstCoverage.Cost = 1500;
// save changes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T17:27:47.797

从数据库中加载 MedicalPlan 后，您应该能够使用 Linq 使用它和任何相关实体，或者通过 MedicalPlan 上的属性直接访问，就好像它是 .NET 对象的正常集合一样。

调用 Save 将持久化回数据库。

例如

```
var medicalPlan = GetMedicalPlanFromDataContext(); //example method
medicalPlan.CoverageLevels.First().Cost = 1500;
//OR
medicalPlan.CoverageLevels[0].Cost = 1500
medicalPlan.Save(); 
```

或者可能更有可能..

```
var medicalPlan = GetMedicalPlanFromDataContext();
var coverage = medicalPlan.CoverageLevels.Where(x=>x.Description == "family").Single();
coverage.Cost = 1500;
medicalPlan.Save(); 
```

# mongodb - 在不正确关闭时禁用锁定文件的方法？

> ID：11617364
> 
> 赞同：3
> 
> 时间：2012-07-23T17:22:09.183
> 
> 标签：mongodb

我经常在运行 MongoDB 的情况下关闭我的 comp...这是不正确的关闭，然后当我再次启动 mongod 时我必须删除锁定文件。这个锁文件有什么意义？我可以在这种情况下禁用它吗？以这种方式关闭对我有害吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:41:36.467

锁定文件的目的是帮助从意外关闭中恢复 [这里](http://docs.mongodb.org/manual/tutorial/recover-data-following-unexpected-shutdown/) 和[这里](https://stackoverflow.com/questions/6857781/what-is-the-use-of-the-mongo-lock-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:32:17.757

您应该将 MongoDB 作为服务运行，这样当您关闭操作系统时，它将完全停止 MongoDB 服务，您的问题就会消失。您没有提及您使用的是什么操作系统，但如果在 Linux 上，请查看此页面：

[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian-or-ubuntu-linux/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian-or-ubuntu-linux/)

如果在 Windows 上看这里：

[http://www.mongodb.org/display/DOCS/Windows+Service](http://www.mongodb.org/display/DOCS/Windows+Service)

对于 OS X，您可以使用 port/brew 或滚动您自己的控制脚本。

# javascript - JS - 读取 XML 标签之间的数据

> ID：11617367
> 
> 赞同：2
> 
> 时间：2012-07-23T17:22:26.203
> 
> 标签：javascript, split

我只需要在两个标签之间提取一些信息，在这种情况下，`<title>`

例如：

```
...
<title>I Need This!</title>
... 
```

我只需要能够获取标签之间的信息。我在考虑使用`split()`，但是，我无法弄清楚如何在之前和之后剪切所有数据，而只是捕捉标题标签中的内容。如您所知，我是文本格式的初学者。谢谢！

编辑：我正在查看的文件类型的示例如下：[https ://gdata.youtube.com/feeds/api/videos/http://youtu.be/_OBlgSz8sSMg?v=2](https://gdata.youtube.com/feeds/api/videos/http://youtu.be/_OBlgSz8sSMg?v=2)

我只是想利用标题标签中的内容来获取视频的标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T17:27:01.747

```
var text = '<title>I Need This!</title>',
    match = text.match(/<title>([^<]*)<\/title>/),
    youGotThis = match[1]; 
```

这是小提琴：http: [//jsfiddle.net/RPbSE/](http://jsfiddle.net/RPbSE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:28:37.513

DOM 对 XML 和对 HTML 一样有效，所以一个简单的

```
var titleNodeList = yourXMLDocument.getElementsByTagname('title');
var firstTitle = titleNodeList[0];
var titleTextNode = firstTitle.firstChild;
alert(titleTextNode); 
```

应该做。

# django - 如何在 forms.ModelChoiceField 上定义属性？

> ID：11617374
> 
> 赞同：12
> 
> 时间：2012-07-23T17:23:14.473
> 
> 标签：django

在我的 ModelForm 中，我创建了一个不直接绑定到模型上的任何内容的下拉列表。因此，我在实例化时传入查询集。

```
class CallsForm(ModelForm): 
     def __init__(self, company, *args, **kwargs):
        super(CallsForm, self).__init__(*args, **kwargs)        
        self.fields['test_1'].queryset = company.deal_set.all() 

     test_1      =   forms.ModelChoiceField(queryset = '') 
```

这工作得很好。但是如何为它指定一些属性？

对于其他模型绑定小部件，我通常在 Meta 中执行此操作：

```
class Meta:
        model = Conversation
        widgets = {
                    'notes': forms.Textarea(attrs={'class': 'red'}),                    
                   } 
```

但在我的情况下覆盖它是没有意义的。

我试图在实例化时设置属性，但没有任何运气。

```
test_1      =   forms.ModelChoiceField(attrs={'class':'hidden'}, queryset = '') 
```

但它说： `__init__() got an unexpected keyword argument 'attrs'`

肯定有办法的...

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-23T18:02:29.877

`attrs`仅对小部件有效，对字段无效。尝试：

```
test_1 = forms.ModelChoiceField(queryset = '', widget=forms.Select(attrs={'class':'hidden'})) 
```

# c# - 在项目中查找最高 JIRA 问题 ID 的有效方法

> ID：11617376
> 
> 赞同：0
> 
> 时间：2012-07-23T17:23:21.637
> 
> 标签：c#, api, soap, jira

我正在尝试使用 JIRA SOAP API 优雅地确定某个项目中 JIRA 问题的所有 ID 号中最高的 ID 号。上限很好；我不需要确切的答案。

我正在考虑通过查找现有问题的数量来做到这一点，但我没有找到一个很好的方法来做到这一点。我还想也许我可以创建一个新问题并将新问题的 ID 号用作问题数。这不是一个很好的方法，因为我有一个没有意义的额外问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:22:32.743

我会以不同的方式完成此操作，我会使用[Jira Scripting Suite](https://marketplace.atlassian.com/16346)创建一个后函数，将当前问题密钥写入磁盘的某个位置，并将该函数置于进入`Open`状态的事务中。通过这种方式，您可以轻松快速高效地检索最新的问题编号。

工作代码：

```
import os
f = open('/tmp/workfile', 'w+')
f.write(str(issue.getKey()))
f.close() 
```

**请注意 -** 解决问题并不精确且效率不高！

如果您有很多问题，则必须通过所有问题才能找到最后一个问题，这与我的解决方案不同，它会让您很快知道最后一个问题的关键是什么。同样，假设有人错误地将问题从一个项目转移到另一个项目，注意到他的错误，然后将问题移回。如果在复制之前最高问题密钥是 200，并且复制了 200 个问题而不是删除，则当前最高问题密钥是 400，即使最后一个问题在索引 200 处。你怎么知道没有更多问题？相当于[停机问题](http://en.wikipedia.org/wiki/Halting_problem)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:42:00.060

*   执行搜索（http://example.com:8080/jira/rest/api/2/search）将`"maxResults"`值设置为您想要的任何值并 startAt = 0
*   对这些值做任何你想做的事情，同时保持这个查询返回的计数*和*累积计数。
*   如果 queryCount == maxResults，则使用 maxResults 和 startAt = 累积计数进行搜索。
*   如果 queryCount != maxResults，你就完成了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T00:25:13.037

我过去遇到过这个问题，只是使用了如果无法检索连续 5 个问题的方法，那么您已经达到了最新的问题。当一个问题被移动到另一个项目或被删除时，问题键序列中会出现一个漏洞。

我想 2^16 的二进制印章也可以涵盖大多数情况。

# c# - 以毫秒为单位获取两个 DateTime 实例的差异

> ID：11617377
> 
> 赞同：5
> 
> 时间：2012-07-23T17:23:26.873
> 
> 标签：c#, asp.net-mvc, datetime

这样做的正确方法是什么？我正在使用 ASP.NET MVC 3。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T17:27:10.483

```
 DateTime a = ...
        DateTime b = ...
        var ms = a.Subtract(b).TotalMilliseconds; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T17:27:14.223

```
(datetime2 - datetime1).TotalMilliseconds 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T17:27:37.533

我想这应该可行。既然您要求万无一失，我假设您不知道两者中的哪一个是较晚的日期:)

```
Math.Abs((date1 - date2).TotalMilliseconds) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-05T09:38:00.043

```
 public static Int64 GetDifferencesBetweenTwoDate(DateTime newDate, DateTime oldDate, string type)
    {
        var span = newDate - oldDate;
        switch (type)
        {
            case "tt": return (int)span.Ticks;
            case "ms": return (int)span.TotalMilliseconds;
            case "ss": return (int)span.TotalSeconds;
            case "mm": return (int)span.TotalMinutes;
            case "hh": return (int)span.TotalHours;
            case "dd": return (int)span.TotalDays;
        }
        return 0;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T17:28:02.523

减法是我的选择...

```
DateTime earlier = DateTime.Now;
// ...
DateTime later = DateTime.Now;
double result = (later - earlier).TotalMilliseconds; 
```

# google-chrome-extension - Google Chrome 扩展程序 - 消息 + 调用弹出页面和内容脚本之间的函数

> ID：11617379
> 
> 赞同：5
> 
> 时间：2012-07-23T17:23:35.100
> 
> 标签：google-chrome-extension

在 Google Chrome 扩展程序中，我想在内容脚本和弹出页面之间传递消息。我还希望在弹出页面向内容脚本发送执行此操作的信号时触发内容脚本中的一个函数。

Google Chrome 扩展开发者文档中的消息部分指出，消息可以“从您的内容脚本传递到扩展页面，反之亦然”（引自[http://code.google.com/chrome/extensions/messaging. html](http://code.google.com/chrome/extensions/messaging.html) )

这是否意味着我可以在内容脚本和弹出页面之间发送/接收消息？因为我看到的用法是用于后台页面和内容脚本之间的通信。

或者我是否必须设置一个 3 路消息传递路线 - 即。内容脚本 <--> 背景页面 <--> 弹出页面。如果是这种情况，我如何在后台页面 <--> 弹出页面之间设置消息传递？

在从弹出页面向内容脚本发送信号后，如何在内容脚本中触发函数？这是否也需要存在后台脚本？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T17:49:38.287

内容脚本只能向后台页面发送消息。如果要将消息从内容脚本发送到弹出窗口，则必须：

1.  将消息从内容脚本发送到后台页面。

    ```
    chrome.runtime.sendMessage( ...message... , function() { /*response*/ }); 
    ```

2.  在后台接收消息。

    ```
    chrome.runtime.onMessage.addListener(function(message, sender, sendResponse) { ... }); 
    ```

3.  将消息传递到弹出窗口。要获取`window`对弹出窗口的全局对象的引用，请使用[`chrome.extension.getViews`](https://developer.chrome.com/extensions/extension.html#method-getViews). 注意：与大多数其他 chrome API 不同，此方法是同步的：

    ```
    var popupWindows = chrome.extension.getViews({type:'popup'});
    if (popupWindows.length) { // A popup has been found
        // details is the object from the onMessage event (see 2)
        popupWindows[0].whatever(message, sendResponse);
    } 
    ```

4.  在弹出窗口中，定义`whatever`方法。

    ```
    function whatever(message, sendResponse) {
        // Do something, for example, sending the message back
        sendResponse(message);
    } 
    ```

5.  当`sendResponse`(4) 被调用时，`details.sendResponse`(参见 3) 被调用。这反过来`function() { /*response*/ }`又从 1 调用。

注意：`chrome.runtime.sendMessage`/`onMessage`仅在 Chrome 26+ 中受支持。`chrome.extension.sendMessage`如果您还想支持旧版浏览器，请使用。

# php - MySQL分页限制

> ID：11617382
> 
> 赞同：-1
> 
> 时间：2012-07-23T17:23:41.473
> 
> 标签：php, mysql

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '-20, 20' 附近使用正确的语法

这是我收到的错误消息。当我搜索其中一个项目时它有效，但对于搜索的所有其他项目返回此。我知道这与我的分页有关。

不确定它是否与系统中的记录有关，因为我还没有很多测试项目。我确保我不会搜索任何会出现在一半以上结果中的内容。我已经看了一段时间了，不知道为什么限制是错误的！

这是我的代码。

```
 $sql = mysql_query("SELECT * FROM users ORDER BY `$sortby` ASC")  or die(mysql_error());

///////////////////////////////////  Pagination Logic ////////////////////////////////////////////////////////////////////////
$nr = mysql_num_rows($sql); // Get total of Num rows from the database query
if (isset($_GET['pn'])) { // Get pn from URL vars if it is present
    $pn = preg_replace('#[^0-9]#i', '', $_GET['pn']); // filter everything but numbers for security(new)
    //$pn = ereg_replace("[^0-9]", "", $_GET['pn']); // filter everything but numbers for security(deprecated)
} else { // If the pn URL variable is not present force it to be value of page number 1
    $pn = 1;
} 
//This is where we set how many database items to show on each page 
$itemsPerPage = 20; 
// Get the value of the last page in the pagination result set
$lastPage = ceil($nr / $itemsPerPage);
// Be sure URL variable $pn(page number) is no lower than page 1 and no higher than $lastpage
if ($pn < 1) { // If it is less than 1
    $pn = 1; // force if to be 1
} else if ($pn > $lastPage) { // if it is greater than $lastpage
    $pn = $lastPage; // force it to be $lastpage's value
} 
// This creates the numbers to click in between the next and back buttons
// This section is explained well in the video that accompanies this script
$centerPages = "";
$sub1 = $pn - 1;
$sub2 = $pn - 2;
$add1 = $pn + 1;
$add2 = $pn + 2;
if ($pn == 1) {
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;';
} else if ($pn == $lastPage) {
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;';
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
} else if ($pn > 2 && $pn < ($lastPage - 1)) {
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub2 . '">' . $sub2 . '</a> &nbsp;';
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;';
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;';
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add2 . '">' . $add2 . '</a> &nbsp;';
} else if ($pn > 1 && $pn < $lastPage) {
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;';
    $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
    $centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;';
}
// This line sets the "LIMIT" range... the 2 values we place to choose a range of rows from database in our query
$limit = 'LIMIT '.($pn - 1) * $itemsPerPage .', ' .$itemsPerPage; 
// Now we are going to run the same query as above but this time add $limit onto the end of the SQL syntax
// $sql2 is what we will use to fuel our while loop statement below
$sql2  = mysql_query("SELECT * FROM users ORDER BY $sortby ASC $limit")  or die(mysql_error());
//////////////////////////////// END  Pagination Logic ////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////// Pagination Display Setup /////////////////////////////////////////////////////////////////////
$paginationDisplay = ""; // Initialize the pagination output variable
// This code runs only if the last page variable is ot equal to 1, if it is only 1 page we require no paginated links to display
if ($lastPage != "1"){
    // This shows the user what page they are on, and the total number of pages
    $paginationDisplay .= 'Page <strong>' . $pn . '</strong> of ' . $lastPage. '&nbsp;  &nbsp;  &nbsp; ';
    // If we are not on page 1 we can place the Back button
    if ($pn != 1) {
        $previous = $pn - 1;
        $paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $previous . '"> Back</a> ';
    } 
    // Lay in the clickable numbers display here between the Back and Next links
    $paginationDisplay .= '<span class="paginationNumbers">' . $centerPages . '</span>';
    // If we are not on the very last page we can place the Next button
    if ($pn != $lastPage) {
        $nextPage = $pn + 1;
        $paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $nextPage . '"> Next</a> ';
    } 
}
//////////////////////////////// END  Pagination Display Setup //////////////////////////////////////////////////////////////////////////////// 
```

抱歉，如果它有一大块代码：S 任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:30:22.010

```
// This line sets the "LIMIT" range... the 2 values we place to choose a range of rows from database in our query
$limit = 'LIMIT '.($pn - 1) * $itemsPerPage .', ' .$itemsPerPage; 
```

这似乎是您的问题...如果给您第 0 页会发生什么？那么它将是 0 - 1 * 20 = -20, 20

您不能有负偏移量...您需要更改正确解释页码的方式，例如如果检测到 $pn 的 0 则将其设置为 1？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:30:04.507

看来您可能正在执行 LIMIT -20, 20 这不是有效范围。

$itemsPerPage 应该是有效范围的正数，例如 1 , 20

还至少使用 mysql_real_escape_string() 清理您的数据输入

请在此处阅读有关此内容。

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

# android - 在 Twilio Android 客户端中拨打电话时出现“格式错误的请求”错误

> ID：11617383
> 
> 赞同：0
> 
> 时间：2012-07-23T17:23:43.567
> 
> 标签：android, request, voip, twilio, malformed

我正在尝试将 Twilio 客户端集成到更大的应用程序中。在我打电话之前，一切似乎都很好`device.connect(parameters, connectionListener)`。我得到了`31100 Generic Malformed Request`错误，就是这样。

在同一设备上，使用相同的 Twilio 帐户和相同的 Twilio 应用程序，随 Twilio Android SDK (MonkeyPhone) 提供的示例代码可以完美运行。

我找不到有关错误含义或可能原因的更多详细信息。虽然我假设我正在发送无效数据，但我不明白这怎么可能。Capability Token 没问题，我已经根据 MonkeyPhone 示例应用程序中生成的那个进行了验证。创建一个`Device`工作正常，没有错误。即使我没有在`connect()`方法中发送任何参数，也会引发错误。的`onConnecting()`方法`ConnectionListener`被调用，但随后`onDisconnected(Connection inConnection, int inErrorCode, String inErrorMessage)`调用`Malformed Request`错误。

Voice TwiML 的代码运行良好，它只是一个简单的 PHP 脚本，可以生成最简单的`<Dial>`动词：

```
<Response>
    <Dial>someone</Dial>
</Response> 
```

其他具体信息...我在我的应用程序中运行另一个服务，用于执行各种其他操作。这会以某种方式干扰吗？另外，我使用的是试用帐户，我住在罗马尼亚，那里不支持拨打真实电话号码（但我反正不使用电话号码）。这会以任何方式影响我吗？

我为抛出巨大的代码墙提前道歉，但我希望第二双眼睛能发现错误。这是与 MonkeyPhone 示例最相似的代码版本。唯一的区别是我使用 AsyncTask 来获取功能令牌（`JsonAsyncRequestWithError`类。

```
public class MonkeyPhone implements Twilio.InitListener, DeviceListener {
private static final String TAG = "MonkeyPhone";

private Context context;
private Device device;
private Connection connection;

public MonkeyPhone(Context context) {
    this.context = context;
    Twilio.initialize(context, this /* Twilio.InitListener */);
}

@Override
/* Twilio.InitListener method */
public void onInitialized() {
    Log.d(TAG, "Twilio SDK is ready");

    // the Emulator has a somewhat unique "product" name
    String clientName = "doug";

    HttpGet get = new HttpGet("http://teamphoenix.zzl.org/capability.php?ClientName=" + clientName);

    JsonAsyncRequestWithError asyncRequestWithError = new JsonAsyncRequestWithError(context, "test", new AsyncRequestWithErrorListener() {

        @Override
        public void onResult(AsyncRequestResponse response, Object destination) {
            createDevice(response.getMessage());
        }

        @Override
        public void onErrorResult(AsyncRequestResponse response, Object destination) {

        }
    });

    asyncRequestWithError.execute(get);

}

public void createDevice(String token) {
    try {
        device = Twilio.createDevice(token, this /* DeviceListener */);

        Intent intent = new Intent(context, SpringshotPhoneActivity.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
        device.setIncomingIntent(pendingIntent);

    } catch (Exception e) {
        Log.e(TAG, "", e);
    }
}

@Override
/* Twilio.InitListener method */
public void onError(Exception e) {
    Log.e(TAG, "Twilio SDK couldn't start: " + e.getLocalizedMessage());
}

@Override
/* DeviceListener method */
public void onStartListening(Device inDevice) {
    Log.i(TAG, "Device is now listening for incoming connections");
}

@Override
/* DeviceListener method */
public void onStopListening(Device inDevice) {
    Log.i(TAG, "Device is no longer listening for incoming connections");
}

@Override
/* DeviceListener method */
public void onStopListening(Device inDevice, int inErrorCode, String inErrorMessage) {
    Log.i(TAG, "Device is no longer listening for incoming connections due to error " + inErrorCode + ": " + inErrorMessage);
}

@Override
/* DeviceListener method */
public boolean receivePresenceEvents(Device inDevice) {
    return false; // indicate we don't care about presence events
}

@Override
/* DeviceListener method */
public void onPresenceChanged(Device inDevice, PresenceEvent inPresenceEvent) {
}

public void connect(String phoneNumber) {
    Map<String, String> parameters = new HashMap<String, String>(1);
    parameters.put("PhoneNumber", phoneNumber);
/// ---------------- THIS IS THE CALL THAT FAILS ------------------------------------//
    connection = device.connect(parameters, null /* ConnectionListener */);
    if (connection == null)
        Log.w(TAG, "Failed to create new connection");
}

public void disconnect() {
    if (connection != null) {
        connection.disconnect();
        connection = null;
    }
}

public void handleIncomingConnection(Device inDevice, Connection inConnection) {
    Log.i(TAG, "Device received incoming connection");
    if (connection != null)
        connection.disconnect();
    connection = inConnection;
    connection.accept();
}

@Override
protected void finalize() {
    if (connection != null)
        connection.disconnect();
    if (device != null)
        device.release();
}
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:30:30.160

我解决了这个问题。显然，我必须使用 UTF-8 编码从服务器读取 InputStream（即使令牌中没有特殊字符）。

```
 char[] buf = new char[1024];
    InputStream is = response.getEntity().getContent();
    StringBuilder out = new StringBuilder();

    Reader in = new InputStreamReader(is, "UTF-8");

    int bin;
    while ((bin = in.read(buf, 0, buf.length)) >= 0) {
        out.append(buf, 0, bin);
    }

    return out.toString(); 
```

# php - 格式化 date() 的响应

> ID：11617385
> 
> 赞同：0
> 
> 时间：2012-07-23T17:23:47.350
> 
> 标签：php, date

该函数`date("y-M-d H:m:s")`返回 12-Jul-23 19:07:35。

但我需要它返回 2012-07-23 19:07:35。

如何写 07 而不是 Jul 和 2012 而不是 12（yyyy 不这样做）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:25:43.960

[http://php.net/date](http://php.net/date)

*   YA 年份的完整数字表示，4 位数字
*   m 月份的数字表示，前导零
*   d 日期，2 位数字，前导零

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T17:27:02.730

这应该工作：

```
date("Y-m-d H:m:s") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T17:27:22.693

我相信这是日期（'Ymd H:m:s'）

# c# - 无法获取头部的内部内容，因为内容不是文字。- 试图附加到标题

> ID：11617394
> 
> 赞同：2
> 
> 时间：2012-07-23T17:24:22.867
> 
> 标签：c#, asp.net, .net, header

我有一个带头的 aspx 页面

```
<head runat="server" id="head">
    <title></title>
</head> 
```

现在我正在处理的站点正在从 xml 文件中提取信息，我想从 xml 文件中获取一个节点并将其附加到 head 部分。

```
 <head runat="server" id="head">
        <title></title>
        <script></script> // comes from the xml file
    </head> 
```

但是，当我尝试其中任何一个时。

```
 protected void Page_Init(object sender, EventArgs e)
    {

        this.Page.Header.InnerHtml += xml.Header; // errors out
        this.Page.Header.InnerHtml = this.Page.Header.InnerHtml + xml.Header; // errot ut

    } 
```

它出错了

> System.Web.HttpException 未被用户代码处理 Message=Cannot get inside content of head 因为内容不是文字。

如果我这样做

```
protected void Page_Init(object sender, EventArgs e)
        {

            this.Page.Header.InnerHtml = xml.Header; 

        } 
```

一切皆好。

如果我这样做

```
<head runat="server" id="head">
   // removed the title tag so now nothing is in head
</head> 
```

然后这样做

```
protected void Page_Init(object sender, EventArgs e)
        {

            this.Page.Header.InnerHtml += xml.Header; // works
            this.Page.Header.InnerHtml = this.Page.Header.InnerHtml + xml.Header; //works

        } 
```

有用。所以我不确定为什么当头部已经有标签时它会失败。

如果我也尝试从头部获取内容，我也会得到同样的错误

```
 var a = this.Page.Header.InnerHtml;
var a = this.Page.Header.InnerText; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:40:21.567

此问题可能是由于 head 标记与其中的 script 标记一起呈现的方式

也可能是页面渲染得太快了

我建议您在页面获取 Page_PreRender 事件时尝试在 head 标记中插入脚本标记

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:33:38.060

您可以使用 (VB) 完成此操作：

```
 Dim sw As New StringWriter()
    Dim w As New HtmlTextWriter(sw)
    NameOfYourElementID.RenderControl(w)
    Dim s As String = sw.GetStringBuilder().ToString() 
```

现在您可以使用变量 's' 对其进行任何操作。

不要忘记导入 System.IO 来完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T21:50:34.780

问题出在使用 MasterPage 时。this.Page.Header.InnerHtml 不起作用

# python - 如何使用 gevent 创建一个简单的调度程序？

> ID：11617395
> 
> 赞同：2
> 
> 时间：2012-07-23T17:24:23.480
> 
> 标签：python, gevent

我正在寻找一个使用 gevent 的简单调度程序实现。它似乎`gevent.core.event`能够做到这一点，但我不确定。

调度器非常简单。我希望能够安排稍后执行的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:28:12.273

有`gevent.spawn_later`一个需要几秒钟的回调函数以及回调的 *args 和 **kwargs。

这是关于[http://www.gevent.org/gevent.html#gevent.spawn_later的文档](http://www.gevent.org/gevent.html#gevent.spawn_later)

# objective-c - 没有任何动画的自定义segue

> ID：11617396
> 
> 赞同：1
> 
> 时间：2012-07-23T17:24:24.710
> 
> 标签：objective-c, ios5

> **可能重复：**
> [如何使用情节提要在 4.2 Xcode 中创建自定义模态序列](https://stackoverflow.com/questions/8097398/how-to-create-custom-modal-segue-in-4-2-xcode-using-storyboard)

我正在尝试实现一个没有任何动画的自定义 segue，只是目标视图控制器看起来很简单。我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:32:00.967

您将执行与[How to create custom modal segue in 4.2 Xcode using storyboard](https://stackoverflow.com/questions/8097398/how-to-create-custom-modal-segue-in-4-2-xcode-using-storyboard) question's answer中相同的操作，只是没有动画：

```
[src.navigationController pushViewController:yourViewController animated:NO]; 
```

# android - 启用主页按钮 ActionbarSherlock、Sherlockfragment

> ID：11617399
> 
> 赞同：5
> 
> 时间：2012-07-23T17:24:36.487
> 
> 标签：android, android-fragments, actionbarsherlock, android-homebutton

我想在我的片段中启用主页按钮。这个问题在前面被问过，但只是针对一项活动。
我试过了 ...

```
 getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

...但这不起作用。
这是我的代码：

```
import com.actionbarsherlock.R;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.view.MenuItem;

import android.support.v4.app.Fragment;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;

public class SafanTab extends SherlockFragment {

    @Override
    public View onCreateView(LayoutInflater inflater,
                             ViewGroup container,
                             Bundle savedInstanceState) {
        return inflater.inflate(R.layout.safantab, container, false);
    }

    public OnClickListener onOverClick = new OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), Over_Safan.class);
            startActivityForResult(myIntent, 0);
        }
    };

    public OnClickListener onProductenClick = new OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), Over_Safan.class);
            startActivityForResult(myIntent, 0);
        }
    };

    public OnClickListener onTwitterClick = new OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), Over_Safan.class);
            startActivityForResult(myIntent, 0);
        }
    };

} 
```

如何在 SherlockFragment 上启用主页按钮？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-23T17:35:11.733

您还需要覆盖选项菜单选择：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == android.R.id.home) {
        finish();
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

请记住，上面的代码将在活动中运行（因此`finish()`）。如果你不使用`Activity`（这对我来说很奇怪......），那么你需要替换它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-23T17:39:09.417

您是否尝试将以下代码添加到主要活动 - 那个`extends SherlockActivity`或`extends SherlockFragmentActivity`？

```
ActionBar actionBar = getSupportActionBar();
actionBar.setDisplayHomeAsUpEnabled(true); 
```

我不认为你可以`getSupportActionBar`只做一些事情`extends SherlockFragment`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T20:14:17.630

最简单的解决方案是遵循以下三个简单步骤：

1 - 在`AndroidManifest`which 中声明您的活动的父项：

```
<activity android:theme="@style/Theme.MyApp"
            android:name="com.example.CurrentActivity" 
            android:parentActivityName="com.example.MainActivity" >
        <!-- Parent activity meta-data to support 4.0 and lower -->
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.ParentActivity" /> 
```

2 - 在操作栏中添加向上图标，只需从您的`onCreate`方法调用：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

3 - 指定当用户按下向上按钮时要打开的活动：

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == android.R.id.home) {
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    } 
```

**注意：** 如果您致电（如@Eric 建议的那样）：

```
finish(); 
```

代替：

```
NavUtils.navigateUpFromSameTask(this); 
```

您并没有真正执行“向上导航”，因为正如[文档](http://developer.android.com/guide/topics/ui/actionbar.html#Home)所述：

**向上导航不同于系统后退按钮提供的后退导航。Back 按钮用于按时间倒序浏览用户最近使用过的屏幕历史记录。它通常基于屏幕之间的时间关系，而不是应用程序的层次结构（这是向上导航的基础）。**

# bash - 使用 bash 中文件中的键：值搜索/替换？

> ID：11617402
> 
> 赞同：1
> 
> 时间：2012-07-23T17:24:49.220
> 
> 标签：bash

所以我有一个“钥匙”文件，例如：

```
key1
key2
key3 
```

我有一个键：值对文件：

```
key1:value1
key2:value2
key3:value3 
```

我想用 key:value 文件中的相应值替换我的键文件中的键。因此，完成后的密钥文件将如下所示：

```
value1
value2
value3
... 
```

在 bash 中执行此操作的最佳方法是什么？请注意，一个键可能在密钥文件中出现多次，但在 key:values 文件中应该只出现一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:40:09.237

如果 join 命令在您的环境中可用，则以下内容应该有效。需要通过 awk 命令添加索引来恢复原始键顺序（通过 Schwartzian 变换）。

```
join -o 1.1,2.2 -t':' -1 2 -2 1 <(awk '{print(NR":"$0)}' key_file | sort -k2,2 -t':') <(sort -k1,1 -t':' key_values_file) | sort -k1,1 -t':' | cut -f2 -d':' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:51:00.987

由于我对纯 bash 解决方案有兴趣，因此我将发布此解决方案。它只适用于 bash 4+，因为它使用关联数组。

```
#!/bin/bash

while IFS=: read key value; do
    declare -A hash[$key]=$value
done < pairfile

while read key; do
    printf '%s\n' "${hash[$key]}"
done < keyfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:34:05.433

我知道你想要 "bash" ，但这很容易用一个快速的 perl 脚本解决。假设您有文件`pairs.txt`和`keys.txt`：

```
use strict;
my %keys2values; 

# read through the pairs file to get the key:value mapping
open PAIRS, "cat pairs.txt |" ; 
while(<PAIRS>) { 
   chomp $_; 
   my ($key,$value) = split(":",$_); 
   $keys2values{$key} = $value; 
} 

open KEYS, "cat keys.txt |"; 
while(<KEYS>) { 
   chomp $_; 
   my $key = $_; 
   if(defined $keys2values{$key}) { 
      print "$keys2values{$key}\n"; 
   }
   # if a key:value pair isn't defined, just print the key
   else { 
      print "$key\n";  
   }
 } 
```

# internet-explorer - IE中的可点击区域旋转超链接？

> ID：11617404
> 
> 赞同：1
> 
> 时间：2012-07-23T17:25:19.590
> 
> 标签：internet-explorer, css, rotation, css-transforms

在 Internet Explorer 9 中旋转超链接时，屏幕上的绘画似乎处理得很好，但可点击区域似乎不尊重这一点。

旋转是用`-ms-transform`,`filter`还是`-ms-filter`似乎无关紧要。`a:link`是否旋转超链接本身 ( ) 或它的容器 (例如 a )似乎也无关紧要`div`。对于后者，`overflow:hidden`也不尊重（同样，对于可点击区域；绘制区域按预期剪裁）。

有什么办法可以解决这个问题，还是我应该回退`area[coords]`（当然，这不是可取的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:48:51.767

可悲的是，我在尝试将按钮旋转 90 度时遇到了同样的问题。IE 中的可点击区域仅在按钮的顶部。垃圾IE =[

我真的不想将图像用作按钮...

找到这个线程：[Rotating clickable elements in IE8+](https://stackoverflow.com/questions/8876322/rotating-clickable-elements-in-ie8)也许它会帮助你（和我）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T14:57:40.447

查看此解决方案（[使用 CSS3 旋转按钮并将其应用到绝对正确的位置不起作用](https://stackoverflow.com/questions/11930610/rotating-the-button-using-css3-and-applying-it-on-absolute-right-position-doesn)）

在此处复制文本以供参考：

> 我已经使用 -ms-transform: rotate(-90deg); 修复了它。不知何故，我在线使用的生成器中没有添加。可点击区域现在可以在 IE 中使用。– 用户 1466179

# ruby - 在 Ruby 中解析日期字符串

> ID：11617410
> 
> 赞同：30
> 
> 时间：2012-07-23T17:25:40.453
> 
> 标签：ruby, ruby-1.8

我有一个字符串`20120119`，它代表格式中的日期`'YYYYMMDD'`。

我想将此字符串解析为表示 Date 的 Ruby 对象，以便我可以进行一些基本的日期计算，例如与今天日期的差异。

我使用的是 1.8.6 版（要求）。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-23T17:32:30.260

您可以使用`Date.strptime`Ruby 标准库中提供的方法：

```
require 'date'
string = "20120723"
date = Date.strptime(string,"%Y%m%d") 
```

或者，正如评论中所建议的，您可以使用`Date.parse`，因为在这种情况下启发式方法可以正常工作：

```
require 'date'
string = "20120723"
date = Date.parse(string) 
```

`ArgumentError`如果日期无效，两者都会引发：

```
require 'date'
Date.strptime('2012-March', '%Y-%m')
#=> ArgumentError: invalid date

Date.parse('2012-Foo') # Note that '2012-March' would actually work here
#=> ArgumentError: invalid date 
```

如果您还想表示小时、分钟等，您应该查看[DateTime](http://www.ruby-doc.org/stdlib-2.1.5/libdoc/date/rdoc/DateTime.html)。DateTime 还提供了一种`parse`方法，其工作方式与 . 上的 parse 方法类似`Date`。也是如此`strptime`。

# r - 为 GGPlot2 直方图中 X 值以上的任何内容创建一个 bin

> ID：11617411
> 
> 赞同：11
> 
> 时间：2012-07-23T17:25:40.840
> 
> 标签：r, ggplot2, histogram

使用`ggplot2`，我想创建一个直方图，其中 X 以上的任何内容都被分组到最终的 bin 中。例如，如果我的大部分分布在 100 到 200 之间，并且我想按 10 分箱，我希望将 200 以上的任何东西分箱到“200+”中。

```
# create some fake data    
id <- sample(1:100000, 10000, rep=T)
visits <- sample(1:1200,10000, rep=T)

#merge to create a dataframe
df <- data.frame(cbind(id,visits))

#plot the data
hist <- ggplot(df, aes(x=visits)) + geom_histogram(binwidth=50) 
```

如何限制 X 轴，同时仍代表我想要限制的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T17:35:42.007

也许您正在寻找以下`breaks`论点`geom_histogram`：

```
# create some fake data    
id <- sample(1:100000, 10000, rep=T)
visits <- sample(1:1200,10000, rep=T)

#merge to create a dataframe
df <- data.frame(cbind(id,visits))

#plot the data
require(ggplot2)
ggplot(df, aes(x=visits)) +
  geom_histogram(breaks=c(seq(0, 200, by=10), max(visits)), position = "identity") +
  coord_cartesian(xlim=c(0,210)) 
```

这看起来像这样（需要注意的是，这里的假数据看起来很糟糕，并且轴也需要调整以匹配中断）：

![直方图上的手动中断](../Images/6368f40cbbe6f2df73fc25d8cf3cc910.png)

**编辑：**

也许其他人可以在这里权衡：

```
# create breaks and labels
brks <- c(seq(0, 200, by=10), max(visits))
lbls <- c(as.character(seq(0, 190, by=10)), "200+", "")
# true
length(brks)==length(lbls)

# hmmm
ggplot(df, aes(x=visits)) +
  geom_histogram(breaks=brks, position = "identity") +
  coord_cartesian(xlim=c(0,220)) +
  scale_x_continuous(labels=lbls) 
```

情节错误：

```
Error in scale_labels.continuous(scale) : 
  Breaks and labels are different lengths 
```

看起来像[这样](https://github.com/hadley/ggplot2/issues/261)，但那是 8 个月前修复的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-24T12:32:27.823

如果您想稍微捏造一下以解决 bin 标签问题，那么只需对您的数据进行子集化并在新的牺牲数据框中创建 binned 值：

```
id <- sample(1:100000, 10000, rep=T)
visits <- sample(1:1200,10000, rep=T)

#merge to create a dataframe
df <- data.frame(cbind(id,visits))
#create sacrificical data frame
dfsac <- df
dfsac$visits[dfsac$visits > 200 ] <- 200 
```

然后使用`breaks`命令`scale_x_continuous`轻松定义您的 bin 标签：

```
ggplot(data=dfsac, aes(dfsac$visits)) + 
  geom_histogram(breaks=c(seq(0, 200, by=10)), 
                 col="black", 
                 fill="red") +
  labs(x="Visits", y="Count")+
  scale_x_continuous(limits=c(0, 200), breaks=c(seq(0, 200, by=10)), labels=c(seq(0,190, by=10), "200+")) 
```

[![在此处输入图像描述](../Images/8c6fa876e38a70b54a6cbb79bd879bd5.png)](https://i.stack.imgur.com/q8Q7C.png)

# core-plot - 实心与渐变条形图颜色

> ID：11617412
> 
> 赞同：2
> 
> 时间：2012-07-23T17:25:41.873
> 
> 标签：core-plot

我正在尝试创建一个简单的纯色条形图，并且正在使用 Core Plot。我能找到的只是tubularBarPlotWithColor 方法：

```
+(CPTBarPlot *)tubularBarPlotWithColor:(CPTColor *)color horizontalBars:(BOOL)horizontal; 
```

是否有等效的“flatBarPlotWithColor”（非渐变）方法？

...我刚刚通过实例化方法找到了答案：

```
plot.fill = [CPTFill fillWithColor:[CPTColor greenColor]]; 
```

不过，最好有一个简单的类方法来处理这个问题。

里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:10:49.247

只需使用`+alloc`/`-initWithFrame:`像任何其他图层一样，然后将填充设置为您想要的任何内容。管状条法只是构造渐变填充的一种方便方法。

# opengl - VBO中的混合类型？

> ID：11617415
> 
> 赞同：1
> 
> 时间：2012-07-23T17:25:53.273
> 
> 标签：opengl, types, lwjgl, vbo

假设我想在一次绘图调用中将无符号整数*和*浮点数据上传到显卡。我使用标准 VBO（不是 VAO，我使用的是 OpenGL 2.0），将各种顶点属性数组组合成单个`GL_ARRAY_BUFFER`，并分别指向 using `glVertexAttribPointer(...)`，因此：

```
 glBindBuffer(GL_ARRAY_BUFFER, vertexBufferId);
    glEnableVertexAttribArray(positionAttributeId);
    glEnableVertexAttribArray(myIntAttributeId);
    glVertexAttribPointer(positionAttributeId, 4, GL_FLOAT, false, 0, 0);
    glVertexAttribPointer(colorAttributeId, 4, GL_UNSIGNED_INT, false, 0, 128);

    glClear(...);
    glDraw*(...); 
```

我在这里遇到的问题`vertexBufferId`是我的缓冲区（由其他方式 - 它是一个或另一个，因为缓冲区不能是两种类型）。`FloatBuffer``GL_FLOAT``GL_INT`

有任何想法吗？这将如何在本机 C 代码中处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:44:36.843

这将在 C 中（以安全的方式）通过以下方式处理：

```
GLfloat *positions = malloc(sizeof(GLfloat) * 4 * numVertices);
GLuint *colors = malloc(sizeof(GLuint) * 4 * numVertices);

//Fill in data here.

//Allocate buffer memory
glBufferData(..., (sizeof(GLfloat) + sizeof(GLuint)) * 4 * numVertices, NULL, ...);
//Upload arrays
glBufferSubData(..., 0, sizeof(GLfloat) * 4 * numVertices, positions);
glBufferSubData(..., sizeof(GLfloat) * 4 * numVertices, sizeof(GLuint) * 4 * numVertices, colors);

free(positions);
free(colors); 
```

还有其他方法可以做到这一点，其中涉及大量的铸造等。但是此代码模拟了您在 LWJGL 中必须执行的操作。

# javascript - 加载时添加类

> ID：11617424
> 
> 赞同：1
> 
> 时间：2012-07-23T17:26:34.020
> 
> 标签：javascript, jquery, html

有没有办法在 jQuery 中使用 AddClass 在页面和资产加载时添加一个类？

例如，您可以向 body 标记添加一个加载类。

您不能使用 DOM 就绪功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:45:12.833

将我的评论作为答案，以便可以将此问题标记为已回答...

在 html 中设置加载类，然后`.removeClass`在文档完成加载后将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:51:32.000

这可能会给你一些关于如何去做的想法。

[https://plus.google.com/116910304844117268718/posts/UkaymyuTzaF](https://plus.google.com/116910304844117268718/posts/UkaymyuTzaF)

我通常做的是设置一个属性，然后在所有资产准备好后让 JS 将其关闭。然后在 CSS 中，我在我希望它们出现的身体区域定义加载动画。

# javascript - 插入 div 时运行脚本

> ID：11617430
> 
> 赞同：1
> 
> 时间：2012-07-23T17:27:09.620
> 
> 标签：javascript, jquery, ruby-on-rails-3, jqplot

我有一个使用[jqplot](http://jqplot.com)进行绘图的脚本。当使用 jquery 的 .each 方法加载文档时，它可以正常工作。但是，当我单击一个栏时将 div 替换为另一个时，问题就出现了。假设在旧图的位置渲染另一个图。它更改图形但不执行脚本。

加载项目的脚本具有将所有 div 更改为图形的功能：

```
$("div.barchart").each(function(){
    barChart($(this).attr("id"),$(this).attr("data-xmlurl"));
}); 
```

是否有另一种方法可以做到这一点，以便在更改 div 时也可以工作？

### 更新：

Rails 生成一个运行的脚本。但是，当我有这个时它似乎不起作用：

```
chart$=$("#<%=params[:chart_id]%>");
chart$.replaceWith("<%=escape_javascript(render :partial=>"chart_partial"}%>");
barChart(chart$.get(0).attr("id"),chart$.get(0).attr("data-xmlurl")); 
```

### 笔记：

供参考，实际源代码可以在[jquery_cheats 项目中找到](https://github.com/plowdawg/jquery_cheats/blob/master/app/assets/javascripts/jqueryCheats.js)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:36:28.313

也许您可以在父元素上添加一个侦听器？如果 barChart() 函数被多次调用，可以吗？

也许是这样的：

```
$("div.barchart").parent().on("DOMSubtreeModified", function(e) {
    // (or maybe use DOMNodeInserted event instead)
    $("div.barchart[id][data-xmlurl]").each(function() {
        barChart($(this).attr("id"),$(this).attr("data-xmlurl"));
    });
}); 
```

你可以在这里查看我的[jsFiddle 。](http://jsfiddle.net/quant/KNhuC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:48:38.427

在我正在处理的当前应用程序中，我坚持使用 1.5.2 版。为了解决这个问题，我将取消绑定并重新绑定我的事件并在“ajaxComplete”和“ready”中加载初始化。我无法让 DOM 自动重新绑定事件。代表应该像“开”一样工作，但在我的例子中，我仍然必须使用下面的逻辑。

简而言之，它看起来像这样。

```
$(document).ready(function () {
    InitSomethingCool();
});

$(document).ajaxComplete(function() {
    InitSomethingCool();
});

function InitSomethingCool(){
    $(".something").unbind('click').click(function(e) {
        //Unbind and rebind click event.
        alert('You clicked me!');
    });
} 
```

参考：

*   [http://api.jquery.com/on/](http://api.jquery.com/on/)
*   [http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

# git - git bash 问题

> ID：11617433
> 
> 赞同：43
> 
> 时间：2012-07-23T17:27:15.410
> 
> 标签：git, bash

[我刚刚从http://msysgit.github.com/](http://msysgit.github.com/)下载了 msysgit，并且正在尝试学习如何使用它。我还从他们的 wiki 下载了一份 pro git 手册。在第 2 章中，它讨论了在项目目录中键入“$ git init”以让系统创建一个 .git 文件夹。

我只是 unix / linux 的新手，所以你必须原谅这些简单的问题。假设我的项目文件夹位于：c:\myapp\abc，这就是我要运行 git init 命令的地方

我不确定如何将目录更改为项目文件夹。当我从我所在的位置执行**“ls”**命令时，我可以通过文件夹中的内容判断我实际上在**C:\Program Files (x86)\Git 中。** 我试过“cd /myapp/abc”，但它只是给了我“没有这样的文件或目录”的消息。我觉得我在这里错过了一些非常基本的东西。我打开 git bash 时的提示是：

$myname@mypcname /

也许我只需要一个 bash 教程？我也一直在玩 GIT GUI，我能够在另一个项目文件夹中创建一个新的 repo，但我希望能够按照手册进行操作，目前该手册似乎正在使用 git bash 工具谢谢。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-23T17:32:01.200

“Git Bash”终端会将每个驱动器的根目录放入`/<drive-letter>`，因此驱动器`C:\`将位于`/c/`，驱动器`E:\`将位于`/e/`，等等。尝试`cd /c/myapp/abc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-18T21:46:01.977

这应该是“Git Bash”终端中的 /mnt/drive-letter

# iphone - 为什么 [NSArray class] 没有返回我所期望的？

> ID：11617444
> 
> 赞同：1
> 
> 时间：2012-07-23T17:27:49.933
> 
> 标签：iphone, parsing, nsarray

我正在尝试解析通过 Web 服务获得的一些 JSON。逻辑是：

```
id jsonObject = ....;      //This can be string or array 

if([jsonObject class] == [NSString class] || [jsonObject class] == [NSMutableString class]{

// DO some thing
}
else if([jsonObject class] = [NSArray class] || [jsonObject class] == [NSMutableArray class]{

// Do some thing else
} 
```

然而，对于其中一个元素，我遇到了一个奇怪的问题。这个元素的类应该是 NSArray，但是当我运行代码时，我看到的类是 __NSArrayM。这与第二个 if 块不匹配。

有人能告诉我我做错了什么吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T17:29:23.817

改用：

```
if ([jsonObject isKindOfClass:[NSArray class]]) {
} 
```

对于类集群，这是唯一正确的方法——isKindOfClass 检查对象是类的实例还是它的子类之一。有一个类似的方法，isMemberOfClass:，它测试严格的类相等/成员关系（即没有子类实例被认为是相等的）。

# javascript - 收到错误“未找到 socket.io”

> ID：11617445
> 
> 赞同：2
> 
> 时间：2012-07-23T17:27:58.127
> 
> 标签：javascript, jquery, socket.io

> **可能重复：**
> [socket.io：加载资源失败](https://stackoverflow.com/questions/11653237/socket-io-failed-to-load-resource)

我的服务器已经在**[http://localhost:4250上运行](http://localhost:4250)**

我有 socket.io 目录，我是从 socket.io github 下载的。

我正在尝试连接到服务器，例如：

```
<script src="socket.io/socket.io.js"></script> 
```

以及我如何连接到服务器：

```
<script>
  var socket = io.connect('http://localhost:4250');

  socket.on('connect', function (data) 
  {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });

</script> 
```

我收到这些错误：

```
NetworkError: 404 Not Found - http://localhost/socket.io/socket.io.js" 
```

和

```
ReferenceError: io is not defined 
```

我已经尝试了我所知道的一切，所以我现在不知道该怎么办。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:48:06.843

## **问题**

*   通过`http://localhost:4250`在链接标记中的其余源之前添加（对于 socket.io）解决了这个问题。这显然是由于网络将端口绑定到 localhost 的方式，但是我将尝试找到有关原因的更多信息；

## **要改变什么：**

* * *

**使 socket.io 行为：**

`<script src="/socket.io/socket.io.js"></script>`

应该改为

`<script src="http://localhost:4250/socket.io/socket.io.js"></script>`

* * *

# xml - 从 Flash AS3 中的根节点获取 XML 值

> ID：11617448
> 
> 赞同：0
> 
> 时间：2012-07-23T17:28:06.137
> 
> 标签：xml, actionscript-3, flash

我的 xml 文件看起来像这样。

```
<?xml version='1.0' encoding='iso-8859-1' ?>    
<template number='23' scroll='0'>
   <option id='audio' active='0' blockNext='0' forwardNext='0' url='media/'    cc='media/0000000_cc.xml'/>
   <option id='info' active='0' url='txt/p007info.txt'/>
   <option id='txtpop' active='0' url='txt/p007pop.txt'/>
</template> 
```

在 AS3 中，我试图从根“模板”节点的参数“数字”中获取值“23”。

我什至无法追踪它。

```
var myXML:XML;
var myLoader:URLLoader = new URLLoader();
myLoader.load(new URLRequest("xml/p030.xml"));
myLoader.addEventListener(Event.COMPLETE, processXML);
function processXML(e:Event):void
    {
   myXML = new XML(e.target.data);

   trace(myXML);
   trace(myXML.template);

    }
} 
```

它不会给我一个错误，但它也没有向我显示任何东西。

跟踪这不会给我一个错误，但也不会跟踪。

```
trace(myXML.template.@number); 
```

如果我创建一个变量**var number；**然后使该变量的值等于 myXML.template.@number，然后跟踪 number 变量，有些东西在那里，但它看起来像一个空白空间。

```
number = myXML.template.@number; 
trace("number: "+ number) 
```

如果我在选项节点上跟踪任何其他值，我可以毫无问题地看到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:32:36.837

因为`template`是根节点，所以你只需要通过以下方式引用它：

```
number = myXML.@number; 
```

# python - 使用 Python 检查 zip 文件中是否存在目录

> ID：11617450
> 
> 赞同：14
> 
> 时间：2012-07-23T17:28:15.247
> 
> 标签：python, unzip

最初我正在考虑使用`os.path.isdir`，但我认为这不适用于 zip 文件。有没有办法查看 zip 文件并验证该目录是否存在？我想尽可能避免使用`unzip -l "$@"`，但如果这是唯一的解决方案，那么我想我别无选择。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T17:38:17.327

只需检查文件名末尾带有“/”的文件名。

```
import zipfile

def isdir(z, name):
    return any(x.startswith("%s/" % name.rstrip("/")) for x in z.namelist())

f = zipfile.ZipFile("sample.zip", "r")
print isdir(f, "a")
print isdir(f, "a/b")
print isdir(f, "a/X") 
```

你用这条线

```
any(x.startswith("%s/" % name.rstrip("/")) for x in z.namelist()) 
```

因为存档可能不包含明确的目录；只是带有目录名称的路径。

执行结果：

```
$ mkdir -p a/b/c/d
$ touch a/X
$ zip -r sample.zip a
adding: a/ (stored 0%)
adding: a/X (stored 0%)
adding: a/b/ (stored 0%)
adding: a/b/c/ (stored 0%)
adding: a/b/c/d/ (stored 0%)

$ python z.py
True
True
False 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T17:32:11.793

[您可以使用ZipFile.namelist()](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.namelist)检查目录。

```
import os, zipfile
dir = "some/directory/"

z = zipfile.ZipFile("myfile.zip")
if dir in z.namelist():
    print "Found %s!" % dir 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-14T03:28:57.383

## 对于python（> = 3.6）：

这是`is_dir()`在python源代码中实现的方式：

```
def is_dir(self):
    """Return True if this archive member is a directory."""
    return self.filename[-1] == '/' 
```

它只是检查文件名是否以斜杠结尾`/`，无法判断这在某些情况下是否能正常工作（因此 IMO 实施得很糟糕）。

## 对于python（<3.6）：

如`print(zipinfo)`将显示`filemode`但没有提供相应的属性或字段，我深入研究 zipfile 模块源代码并找到它是如何实现的。（见`def __repr__(self):` [https://github.com/python/cpython/blob/3.6/Lib/zipfile.py](https://github.com/python/cpython/blob/3.6/Lib/zipfile.py)）

### 可能是个坏主意，但它会起作用：

如果您想要简单易行的东西，这在大多数情况下都可以使用，但它可能会失败，因为在某些情况下不会打印此字段。

```
def is_dir(zipinfo):
    return "filemode='d" in zipinfo.__repr__() 
```

## 最后：

我的解决方案是手动检查文件模式并确定引用的文件是否实际上是受[https://github.com/python/cpython/blob/3.6/Lib/zipfile.py](https://github.com/python/cpython/blob/3.6/Lib/zipfile.py)第 391 行启发的目录。

```
def is_dir(fileinfo):
    hi = fileinfo.external_attr >> 16
    return (hi & 0x4000) > 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T17:46:13.327

您可以使用内置库 ZipFile 完成此操作。

```
import zipfile
z = zipfile.ZipFile("file.zip")

if "DirName/" in [member.filename for member in z.infolist()]:
    print("Directory exists in archive") 
```

使用 Python32 测试并运行。

# mysql - phpMyAdmin 不工作

> ID：11617452
> 
> 赞同：0
> 
> 时间：2012-07-23T17:28:26.373
> 
> 标签：mysql, phpmyadmin, php-ini, phpinfo

当我运行 phpmyadmin 时，它会向我显示以下消息：

```
phpMyAdmin - Error
The mysqli extension is missing. Please check your PHP configuration. <a href="Documentation.html#faqmysql" target="documentation"><img src="themes/dot.gif" title="Documentation" alt="Documentation" class="icon ic_b_help" /></a> 
```

我已经修改了我的 php.ini 以获得 php_mysqli.dll 的正确地址，取消注释它。我什至将其复制并重命名为 mysqli.dll。然后重新启动电脑，没有任何效果。在这里我粘贴 phpinfo();

```
Build Date  May 15 2012 00:57:24
Compiler    MSVC9 (Visual C++ 2008)
Architecture    x64
Configure Command   cscript /nologo configure.js "--enable-snapshot-build" "--without-dblib" "--without-pdo-dblib" "--without-pdo-mssql" "--with-pdo-oci=C:\php-sdk\php54dev\vc9\x64\deps\instantclient_10_2\sdk,shared" "--with-oci8=C:\php-sdk\php54dev\vc9\x64\deps\instantclient_10_2\sdk,shared" "--with-oci8-11g=C:\php-sdk\php54dev\vc9\x64\deps\instantclient_11_2\sdk,shared" "--disable-debug-pack" "--disable-static-analyze"
Server API  Apache 2.0 Handler
Virtual Directory Support   enabled
Configuration File (php.ini) Path   C:\windows
Loaded Configuration File   C:\wamp\bin\apache\apache2.4.2\bin\php.ini
Scan this dir for additional .ini files (none)
Additional .ini files parsed    (none)
PHP API 20100412
PHP Extension   20100525
Zend Extension  220100525
Zend Extension Build    API220100525,TS,VC9
PHP Extension Build API20100525,TS,VC9
Debug Build no
Thread Safety   enabled
Zend Signal Handling    disabled
Zend Memory Manager enabled
Zend Multibyte Support  disabled
IPv6 Support    enabled
DTrace Support  disabled
Registered PHP Streams  php, file, glob, data, http, ftp, zip, compress.zlib, phar
Registered Stream Socket Transports tcp, udp
Registered Stream Filters   convert.iconv.*, mcrypt.*, mdecrypt.*, string.rot13, string.toupper, string.tolower, string.strip_tags, convert.*, consumed, dechunk, zlib.*

This program makes use of the Zend Scripting Language Engine:
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies
    with Xdebug v2.2.0, Copyright (c) 2002-2012, by Derick Rethans

PHP Credits

Configuration

apache2handler

Apache Version  Apache/2.4.2 (Win64) PHP/5.4.3
Apache API Version  20120211
Server Administrator    admin@localhost
Hostname:Port   localhost:80
Max Requests    Per Child: 0 - Keep Alive: on - Max Per Connection: 100
Timeouts    Connection: 60 - Keep-Alive: 5
Virtual Server  No
Server Root C:/wamp/bin/apache/apache2.4.2
Loaded Modules  core mod_win32 mpm_winnt http_core mod_so mod_access_compat mod_actions mod_alias mod_allowmethods mod_asis mod_auth_basic mod_authn_core mod_authn_file mod_authz_core mod_authz_groupfile mod_authz_host mod_authz_user mod_autoindex mod_cgi mod_dir mod_env mod_include mod_isapi mod_log_config mod_mime mod_negotiation mod_setenvif mod_php5

Directive   Local Value Master Value
engine  1   1
last_modified   0   0
xbithack    0   0

Apache Environment

Variable    Value
HTTP_HOST   localhost
HTTP_CONNECTION keep-alive
HTTP_CACHE_CONTROL  max-age=0
HTTP_USER_AGENT Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11
HTTP_ACCEPT text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
HTTP_ACCEPT_ENCODING    gzip,deflate,sdch
HTTP_ACCEPT_LANGUAGE    en-US,en;q=0.8,es;q=0.6
HTTP_ACCEPT_CHARSET ISO-8859-1,utf-8;q=0.7,*;q=0.3
PATH    C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;c:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;c:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;c:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;c:\Program Files (x86)\Common Files\Roxio Shared\OEM\12.0\DLLShared\;c:\Program Files (x86)\Roxio\OEM\AudioCore\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\Common Files\Autodesk Shared\;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files (x86)\GtkSharp\2.12\bin;C:\Program Files (x86)\Autodesk\Backburner\;
SystemRoot  C:\windows
COMSPEC C:\windows\system32\cmd.exe
PATHEXT .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
WINDIR  C:\windows
SERVER_SIGNATURE    no value
SERVER_SOFTWARE Apache/2.4.2 (Win64) PHP/5.4.3
SERVER_NAME localhost
SERVER_ADDR 127.0.0.1
SERVER_PORT 80
REMOTE_ADDR 127.0.0.1
DOCUMENT_ROOT   C:/wamp/www/
REQUEST_SCHEME  http
CONTEXT_PREFIX  no value
CONTEXT_DOCUMENT_ROOT   C:/wamp/www/
SERVER_ADMIN    admin@localhost
SCRIPT_FILENAME C:/wamp/www/pruebaSQL.php
REMOTE_PORT 50605
GATEWAY_INTERFACE   CGI/1.1
SERVER_PROTOCOL HTTP/1.1
REQUEST_METHOD  GET
QUERY_STRING    no value
REQUEST_URI /pruebaSQL.php
SCRIPT_NAME /pruebaSQL.php

HTTP Headers Information

HTTP Request Headers
HTTP Request    GET /pruebaSQL.php HTTP/1.1
Host    localhost
Connection  keep-alive
Cache-Control   max-age=0
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip,deflate,sdch
Accept-Language en-US,en;q=0.8,es;q=0.6
Accept-Charset  ISO-8859-1,utf-8;q=0.7,*;q=0.3
HTTP Response Headers
X-Powered-By    PHP/5.4.3

bcmath

BCMath support  enabled

Directive   Local Value Master Value
bcmath.scale    0   0

calendar

Calendar support    enabled

com_dotnet

COM support enabled
DCOM support    disabled
.Net support    enabled

Directive   Local Value Master Value
com.allow_dcom  0   0
com.autoregister_casesensitive  1   1
com.autoregister_typelib    0   0
com.autoregister_verbose    0   0
com.code_page   no value    no value
com.typelib_file    no value    no value

Core

PHP Version 5.4.3

Directive   Local Value Master Value
allow_url_fopen On  On
allow_url_include   Off Off
always_populate_raw_post_data   Off Off
arg_separator.input &   &
arg_separator.output    &   &
asp_tags    Off Off
auto_append_file    no value    no value
auto_globals_jit    On  On
auto_prepend_file   no value    no value
browscap    no value    no value
default_charset no value    no value
default_mimetype    text/html   text/html
disable_classes no value    no value
disable_functions   no value    no value
display_errors  On  On
display_startup_errors  Off Off
doc_root    no value    no value
docref_ext  no value    no value
docref_root no value    no value
enable_dl   On  On
enable_post_data_reading    On  On
error_append_string no value    no value
error_log   no value    no value
error_prepend_string    no value    no value
error_reporting no value    no value
exit_on_timeout Off Off
expose_php  On  On
extension_dir   C:\php  C:\php
file_uploads    On  On
highlight.comment   #FF8000 #FF8000
highlight.default   #0000BB #0000BB
highlight.html  #000000 #000000
highlight.keyword   #007700 #007700
highlight.string    #DD0000 #DD0000
html_errors On  On
ignore_repeated_errors  Off Off
ignore_repeated_source  Off Off
ignore_user_abort   Off Off
implicit_flush  Off Off
include_path    .;C:\php\pear   .;C:\php\pear
log_errors  Off Off
log_errors_max_len  1024    1024
mail.add_x_header   Off Off
mail.force_extra_parameters no value    no value
mail.log    no value    no value
max_execution_time  30  30
max_file_uploads    20  20
max_input_nesting_level 64  64
max_input_time  -1  -1
max_input_vars  1000    1000
memory_limit    128M    128M
open_basedir    no value    no value
output_buffering    0   0
output_handler  no value    no value
post_max_size   8M  8M
precision   14  14
realpath_cache_size 16K 16K
realpath_cache_ttl  120 120
register_argc_argv  On  On
report_memleaks On  On
report_zend_debug   On  On
request_order   no value    no value
sendmail_from   no value    no value
sendmail_path   no value    no value
serialize_precision 17  17
short_open_tag  On  On
SMTP    localhost   localhost
smtp_port   25  25
sql.safe_mode   Off Off
track_errors    Off Off
unserialize_callback_func   no value    no value
upload_max_filesize 2M  2M
upload_tmp_dir  no value    no value
user_dir    no value    no value
user_ini.cache_ttl  300 300
user_ini.filename   .user.ini   .user.ini
variables_order EGPCS   EGPCS
windows.show_crt_warning    Off Off
xmlrpc_error_number 0   0
xmlrpc_errors   Off Off
zend.detect_unicode On  On
zend.enable_gc  On  On
zend.multibyte  Off Off
zend.script_encoding    no value    no value

ctype

ctype functions enabled

date

date/time support   enabled
"Olson" Timezone Database Version   2012.2
Timezone Database   internal
( ! ) SCREAM: Error suppression ignored for
( ! ) Warning: phpinfo(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in C:\wamp\www\pruebaSQL.php on line 2
Call Stack
#   Time    Memory  Function    Location
1   0.0008  239088  {main}( )   ..\pruebaSQL.php:0
2   0.0008  239696  phpinfo ( ) ..\pruebaSQL.php:2
Default timezone UTC 
Directive   Local Value Master Value
date.default_latitude   31.7667 31.7667
date.default_longitude  35.2333 35.2333
date.sunrise_zenith 90.583333   90.583333
date.sunset_zenith  90.583333   90.583333
date.timezone   no value    no value

dom

DOM/XML enabled
DOM/XML API Version 20031129
libxml Version  2.7.8
HTML Support    enabled
XPath Support   enabled
XPointer Support    enabled
Schema Support  enabled
RelaxNG Support enabled

ereg

Regex Library   Bundled library enabled

filter

Input Validation and Filtering  enabled
Revision    $Id: e523cdc8829892d1b4f9cb7c3c57b2ba1c36b9ea $

Directive   Local Value Master Value
filter.default  unsafe_raw  unsafe_raw
filter.default_flags    no value    no value

ftp

FTP support enabled

hash

hash support    enabled
Hashing Engines md2 md4 md5 sha1 sha224 sha256 sha384 sha512 ripemd128 ripemd160 ripemd256 ripemd320 whirlpool tiger128,3 tiger160,3 tiger192,3 tiger128,4 tiger160,4 tiger192,4 snefru snefru256 gost adler32 crc32 crc32b fnv132 fnv164 joaat haval128,3 haval160,3 haval192,3 haval224,3 haval256,3 haval128,4 haval160,4 haval192,4 haval224,4 haval256,4 haval128,5 haval160,5 haval192,5 haval224,5 haval256,5

iconv

iconv support   enabled
iconv implementation    "libiconv"
iconv library version   1.11

Directive   Local Value Master Value
iconv.input_encoding    ISO-8859-1  ISO-8859-1
iconv.internal_encoding ISO-8859-1  ISO-8859-1
iconv.output_encoding   ISO-8859-1  ISO-8859-1

json

json support    enabled
json version    1.2.1

libxml

libXML support  active
libXML Compiled Version 2.7.8
libXML Loaded Version   20708
libXML streams  enabled

mcrypt

mcrypt support  enabled
mcrypt_filter support   enabled
Version 2.5.8
Api No  20021217
Supported ciphers   cast-128 gost rijndael-128 twofish cast-256 loki97 rijndael-192 saferplus wake blowfish-compat des rijndael-256 serpent xtea blowfish enigma rc2 tripledes arcfour
Supported modes cbc cfb ctr ecb ncfb nofb ofb stream

Directive   Local Value Master Value
mcrypt.algorithms_dir   no value    no value
mcrypt.modes_dir    no value    no value

mhash

MHASH support   Enabled
MHASH API Version   Emulated Support

mysqlnd

mysqlnd enabled
Version mysqlnd 5.0.10 - 20111026 - $Id: b0b3b15c693b7f6aeb3aa66b646fee339f175e39 $
Compression supported
SSL supported
Command buffer size 4096
Read buffer size    32768
Read timeout    31536000
Collecting statistics   Yes
Collecting memory statistics    No
Tracing n/a
Loaded plugins  mysqlnd,example,debug_trace,auth_plugin_mysql_native_password,auth_plugin_mysql_clear_password
API Extensions  no value

mysqlnd statistics  
bytes_sent  0
bytes_received  0
packets_sent    0
packets_received    0
protocol_overhead_in    0
protocol_overhead_out   0
bytes_received_ok_packet    0
bytes_received_eof_packet   0
bytes_received_rset_header_packet   0
bytes_received_rset_field_meta_packet   0
bytes_received_rset_row_packet  0
bytes_received_prepare_response_packet  0
bytes_received_change_user_packet   0
packets_sent_command    0
packets_received_ok 0
packets_received_eof    0
packets_received_rset_header    0
packets_received_rset_field_meta    0
packets_received_rset_row   0
packets_received_prepare_response   0
packets_received_change_user    0
result_set_queries  0
non_result_set_queries  0
no_index_used   0
bad_index_used  0
slow_queries    0
buffered_sets   0
unbuffered_sets 0
ps_buffered_sets    0
ps_unbuffered_sets  0
flushed_normal_sets 0
flushed_ps_sets 0
ps_prepared_never_executed  0
ps_prepared_once_executed   0
rows_fetched_from_server_normal 0
rows_fetched_from_server_ps 0
rows_buffered_from_client_normal    0
rows_buffered_from_client_ps    0
rows_fetched_from_client_normal_buffered    0
rows_fetched_from_client_normal_unbuffered  0
rows_fetched_from_client_ps_buffered    0
rows_fetched_from_client_ps_unbuffered  0
rows_fetched_from_client_ps_cursor  0
rows_affected_normal    0
rows_affected_ps    0
rows_skipped_normal 0
rows_skipped_ps 0
copy_on_write_saved 0
copy_on_write_performed 0
command_buffer_too_small    0
connect_success 0
connect_failure 0
connection_reused   0
reconnect   0
pconnect_success    0
active_connections  0
active_persistent_connections   0
explicit_close  0
implicit_close  0
disconnect_close    0
in_middle_of_command_close  0
explicit_free_result    0
implicit_free_result    0
explicit_stmt_close 0
implicit_stmt_close 0
mem_emalloc_count   0
mem_emalloc_amount  0
mem_ecalloc_count   0
mem_ecalloc_amount  0
mem_erealloc_count  0
mem_erealloc_amount 0
mem_efree_count 0
mem_efree_amount    0
mem_malloc_count    0
mem_malloc_amount   0
mem_calloc_count    0
mem_calloc_amount   0
mem_realloc_count   0
mem_realloc_amount  0
mem_free_count  0
mem_free_amount 0
mem_estrndup_count  0
mem_strndup_count   0
mem_estndup_count   0
mem_strdup_count    0
proto_text_fetched_null 0
proto_text_fetched_bit  0
proto_text_fetched_tinyint  0
proto_text_fetched_short    0
proto_text_fetched_int24    0
proto_text_fetched_int  0
proto_text_fetched_bigint   0
proto_text_fetched_decimal  0
proto_text_fetched_float    0
proto_text_fetched_double   0
proto_text_fetched_date 0
proto_text_fetched_year 0
proto_text_fetched_time 0
proto_text_fetched_datetime 0
proto_text_fetched_timestamp    0
proto_text_fetched_string   0
proto_text_fetched_blob 0
proto_text_fetched_enum 0
proto_text_fetched_set  0
proto_text_fetched_geometry 0
proto_text_fetched_other    0
proto_binary_fetched_null   0
proto_binary_fetched_bit    0
proto_binary_fetched_tinyint    0
proto_binary_fetched_short  0
proto_binary_fetched_int24  0
proto_binary_fetched_int    0
proto_binary_fetched_bigint 0
proto_binary_fetched_decimal    0
proto_binary_fetched_float  0
proto_binary_fetched_double 0
proto_binary_fetched_date   0
proto_binary_fetched_year   0
proto_binary_fetched_time   0
proto_binary_fetched_datetime   0
proto_binary_fetched_timestamp  0
proto_binary_fetched_string 0
proto_binary_fetched_blob   0
proto_binary_fetched_enum   0
proto_binary_fetched_set    0
proto_binary_fetched_geometry   0
proto_binary_fetched_other  0
init_command_executed_count 0
init_command_failed_count   0
com_quit    0
com_init_db 0
com_query   0
com_field_list  0
com_create_db   0
com_drop_db 0
com_refresh 0
com_shutdown    0
com_statistics  0
com_process_info    0
com_connect 0
com_process_kill    0
com_debug   0
com_ping    0
com_time    0
com_delayed_insert  0
com_change_user 0
com_binlog_dump 0
com_table_dump  0
com_connect_out 0
com_register_slave  0
com_stmt_prepare    0
com_stmt_execute    0
com_stmt_send_long_data 0
com_stmt_close  0
com_stmt_reset  0
com_stmt_set_option 0
com_stmt_fetch  0
com_deamon  0
bytes_received_real_data_normal 0
bytes_received_real_data_ps 0

example statistics  
stat1   0
stat2   0

odbc

ODBC Support    enabled
Active Persistent Links 0
Active Links    0
ODBC library    Win32

Directive   Local Value Master Value
odbc.allow_persistent   On  On
odbc.check_persistent   On  On
odbc.default_cursortype Static cursor   Static cursor
odbc.default_db no value    no value
odbc.default_pw no value    no value
odbc.default_user   no value    no value
odbc.defaultbinmode return as is    return as is
odbc.defaultlrl return up to 4096 bytes return up to 4096 bytes
odbc.max_links  Unlimited   Unlimited
odbc.max_persistent Unlimited   Unlimited

pcre

PCRE (Perl Compatible Regular Expressions) Support  enabled
PCRE Library Version    8.12 2011-01-15

Directive   Local Value Master Value
pcre.backtrack_limit    1000000 1000000
pcre.recursion_limit    100000  100000

PDO

PDO support enabled
PDO drivers no value

Phar

Phar: PHP Archive support   enabled
Phar EXT version    2.0.1
Phar API version    1.1.1
SVN revision    $Id: 2a47d3d0354109d8077e34d59f1228ccfd021d59 $
Phar-based phar archives    enabled
Tar-based phar archives enabled
ZIP-based phar archives enabled
gzip compression    enabled
bzip2 compression   disabled (install pecl/bz2)
Native OpenSSL support  enabled

Phar based on pear/PHP_Archive, original concept by Davey Shafik.
Phar fully realized by Gregory Beaver and Marcus Boerger.
Portions of tar implementation Copyright (c) 2003-2009 Tim Kientzle.

Directive   Local Value Master Value
phar.cache_list no value    no value
phar.readonly   On  On
phar.require_hash   On  On

Reflection

Reflection  enabled
Version $Id: 1cf65cee164ed57874ce2d29e5c46b82f6139524 $

session

Session Support enabled
Registered save handlers    files user
Registered serializer handlers  php php_binary wddx

Directive   Local Value Master Value
session.auto_start  Off Off
session.cache_expire    180 180
session.cache_limiter   nocache nocache
session.cookie_domain   no value    no value
session.cookie_httponly Off Off
session.cookie_lifetime 0   0
session.cookie_path /   /
session.cookie_secure   Off Off
session.entropy_file    no value    no value
session.entropy_length  0   0
session.gc_divisor  100 100
session.gc_maxlifetime  1440    1440
session.gc_probability  1   1
session.hash_bits_per_character 4   4
session.hash_function   0   0
session.name    PHPSESSID   PHPSESSID
session.referer_check   no value    no value
session.save_handler    files   files
session.save_path   no value    no value
session.serialize_handler   php php
session.upload_progress.cleanup On  On
session.upload_progress.enabled On  On
session.upload_progress.freq    1%  1%
session.upload_progress.min_freq    1   1
session.upload_progress.name    PHP_SESSION_UPLOAD_PROGRESS PHP_SESSION_UPLOAD_PROGRESS
session.upload_progress.prefix  upload_progress_    upload_progress_
session.use_cookies On  On
session.use_only_cookies    On  On
session.use_trans_sid   0   0

SimpleXML

Simplexml support   enabled
Revision    $Id: 455280fc74f9f002b7314def7a456f6c3080eb92 $
Schema support  enabled

SPL

SPL support enabled
Interfaces  Countable, OuterIterator, RecursiveIterator, SeekableIterator, SplObserver, SplSubject
Classes AppendIterator, ArrayIterator, ArrayObject, BadFunctionCallException, BadMethodCallException, CachingIterator, CallbackFilterIterator, DirectoryIterator, DomainException, EmptyIterator, FilesystemIterator, FilterIterator, GlobIterator, InfiniteIterator, InvalidArgumentException, IteratorIterator, LengthException, LimitIterator, LogicException, MultipleIterator, NoRewindIterator, OutOfBoundsException, OutOfRangeException, OverflowException, ParentIterator, RangeException, RecursiveArrayIterator, RecursiveCachingIterator, RecursiveCallbackFilterIterator, RecursiveDirectoryIterator, RecursiveFilterIterator, RecursiveIteratorIterator, RecursiveRegexIterator, RecursiveTreeIterator, RegexIterator, RuntimeException, SplDoublyLinkedList, SplFileInfo, SplFileObject, SplFixedArray, SplHeap, SplMinHeap, SplMaxHeap, SplObjectStorage, SplPriorityQueue, SplQueue, SplStack, SplTempFileObject, UnderflowException, UnexpectedValueException

standard

Dynamic Library Support enabled
Internal Sendmail Support for Windows   enabled

Directive   Local Value Master Value
assert.active   1   1
assert.bail 0   0
assert.callback no value    no value
assert.quiet_eval   0   0
assert.warning  1   1
auto_detect_line_endings    0   0
default_socket_timeout  60  60
from    no value    no value
url_rewriter.tags   a=href,area=href,frame=src,form=,fieldset=  a=href,area=href,frame=src,form=,fieldset=
user_agent  no value    no value

tokenizer

Tokenizer Support   enabled

wddx

WDDX Support    enabled
WDDX Session Serializer enabled

xdebug

xdebug support  enabled
Version 2.2.0
IDE Key 

Supported protocols Revision
DBGp - Common DeBuGger Protocol $Revision: 1.145 $

Directive   Local Value Master Value
xdebug.auto_trace   Off Off
xdebug.cli_color    0   0
xdebug.collect_assignments  Off Off
xdebug.collect_includes On  On
xdebug.collect_params   0   0
xdebug.collect_return   Off Off
xdebug.collect_vars Off Off
xdebug.coverage_enable  On  On
xdebug.default_enable   On  On
xdebug.dump.COOKIE  no value    no value
xdebug.dump.ENV no value    no value
xdebug.dump.FILES   no value    no value
xdebug.dump.GET no value    no value
xdebug.dump.POST    no value    no value
xdebug.dump.REQUEST no value    no value
xdebug.dump.SERVER  no value    no value
xdebug.dump.SESSION no value    no value
xdebug.dump_globals On  On
xdebug.dump_once    On  On
xdebug.dump_undefined   Off Off
xdebug.extended_info    On  On
xdebug.file_link_format no value    no value
xdebug.idekey   no value    no value
xdebug.manual_url   http://www.php.net  http://www.php.net
xdebug.max_nesting_level    100 100
xdebug.overload_var_dump    On  On
xdebug.profiler_aggregate   Off Off
xdebug.profiler_append  Off Off
xdebug.profiler_enable  Off Off
xdebug.profiler_enable_trigger  Off Off
xdebug.profiler_output_dir  \   \
xdebug.profiler_output_name cachegrind.out.%p   cachegrind.out.%p
xdebug.remote_autostart Off Off
xdebug.remote_connect_back  Off Off
xdebug.remote_cookie_expire_time    3600    3600
xdebug.remote_enable    Off Off
xdebug.remote_handler   dbgp    dbgp
xdebug.remote_host  localhost   localhost
xdebug.remote_log   no value    no value
xdebug.remote_mode  req req
xdebug.remote_port  9000    9000
xdebug.scream   Off Off
xdebug.show_exception_trace Off Off
xdebug.show_local_vars  Off Off
xdebug.show_mem_delta   Off Off
xdebug.trace_enable_trigger Off Off
xdebug.trace_format 0   0
xdebug.trace_options    0   0
xdebug.trace_output_dir \   \
xdebug.trace_output_name    trace.%c    trace.%c
xdebug.var_display_max_children 128 128
xdebug.var_display_max_data 512 512
xdebug.var_display_max_depth    3   3

xml

XML Support active
XML Namespace Support   active
libxml2 Version 2.7.8

xmlreader

XMLReader   enabled

xmlwriter

XMLWriter   enabled

zip

Zip enabled
Extension Version   $Id$
Zip version 1.9.1
Libzip version  0.9.0

zlib

ZLib Support    enabled
Stream Wrapper  compress.zlib://
Stream Filter   zlib.inflate, zlib.deflate
Compiled Version    1.2.7
Linked Version  1.2.7

Directive   Local Value Master Value
zlib.output_compression Off Off
zlib.output_compression_level   -1  -1
zlib.output_handler no value    no value

**PHP Variables**

Variable    Value
_SERVER["HTTP_HOST"]    localhost
_SERVER["HTTP_CONNECTION"]  keep-alive
_SERVER["HTTP_CACHE_CONTROL"]   max-age=0
_SERVER["HTTP_USER_AGENT"]  Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11
_SERVER["HTTP_ACCEPT"]  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
_SERVER["HTTP_ACCEPT_ENCODING"] gzip,deflate,sdch
_SERVER["HTTP_ACCEPT_LANGUAGE"] en-US,en;q=0.8,es;q=0.6
_SERVER["HTTP_ACCEPT_CHARSET"]  ISO-8859-1,utf-8;q=0.7,*;q=0.3
_SERVER["PATH"] C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;c:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;c:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;c:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;c:\Program Files (x86)\Common Files\Roxio Shared\OEM\12.0\DLLShared\;c:\Program Files (x86)\Roxio\OEM\AudioCore\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\Common Files\Autodesk Shared\;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files (x86)\GtkSharp\2.12\bin;C:\Program Files (x86)\Autodesk\Backburner\;
_SERVER["SystemRoot"]   C:\windows
_SERVER["COMSPEC"]  C:\windows\system32\cmd.exe
_SERVER["PATHEXT"]  .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
_SERVER["WINDIR"]   C:\windows
_SERVER["SERVER_SIGNATURE"] no value
_SERVER["SERVER_SOFTWARE"]  Apache/2.4.2 (Win64) PHP/5.4.3
_SERVER["SERVER_NAME"]  localhost
_SERVER["SERVER_ADDR"]  127.0.0.1
_SERVER["SERVER_PORT"]  80
_SERVER["REMOTE_ADDR"]  127.0.0.1
_SERVER["DOCUMENT_ROOT"]    C:/wamp/www/
_SERVER["REQUEST_SCHEME"]   http
_SERVER["CONTEXT_PREFIX"]   no value
_SERVER["CONTEXT_DOCUMENT_ROOT"]    C:/wamp/www/
_SERVER["SERVER_ADMIN"] admin@localhost
_SERVER["SCRIPT_FILENAME"]  C:/wamp/www/pruebaSQL.php
_SERVER["REMOTE_PORT"]  50605
_SERVER["GATEWAY_INTERFACE"]    CGI/1.1
_SERVER["SERVER_PROTOCOL"]  HTTP/1.1
_SERVER["REQUEST_METHOD"]   GET
_SERVER["QUERY_STRING"] no value
_SERVER["REQUEST_URI"]  /pruebaSQL.php
_SERVER["SCRIPT_NAME"]  /pruebaSQL.php
_SERVER["PHP_SELF"] /pruebaSQL.php
_SERVER["REQUEST_TIME_FLOAT"]   1343063976.618
_SERVER["REQUEST_TIME"] 1343063976
_SERVER["argv"] 
Array
(
)
_SERVER["argc"] 0 
```

pjpinfo() 中向我显示了一个警告，但我不知道为什么，它来自 date()，即使我没有使用它。但我不认为这是问题所在。

我在 windows7 x64 机器上安装了 WAMP（最新版本）。

请帮忙，我已经卡在那里一个多星期了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:26:33.677

wamp 有两个 php.ini 文件。一个在 PHP 文件夹中，另一个在 apache\bin 文件夹中。您必须修改 apache 文件夹中的 php.ini 文件。

否则通过系统托盘 wamp 图标也可以打开 ini 文件。确认您是否修改了正确的文件。并检查 phpinfo 是否启用了 MYSQLI

# java - Windows 7 上的 WEKA，命令行参数很少

> ID：11617456
> 
> 赞同：0
> 
> 时间：2012-07-23T17:28:46.877
> 
> 标签：java, command-line-arguments, weka

我正在尝试编写一个调用 **weka.classifiers.trees.J48**的 perl 脚本。我有几个全球性的想法要问你，我感谢你的反馈。

1-WEKA 是用 Java 编写的。为了运行 weka.jar 我需要 java。与拥有 HelloWorld.jar 相同

2-我安装了 Java 并将其添加到 Path 变量中。Weka.jar 需要一些参数。如果我写 **java -jar** * *" **c:\programs\weka.jar** "* * **input1 input2** 是否正确？

3-java -jar** **"**c:\programs\weka.jar * *input1 input2*** *** "** or java ** "c:\programs\weka.jar" **input1 input2** **-jar怎么样**

4-我需要类 weka.classifiers.trees.J48 。我应该写 **java -jar** * *" **c:\programs\weka.classifiers.trees.J48** "* * **input1 input2** 没有.jar 吗？

5-stackoverflow 中的某个人建议将 weka 放入应称为 CLASSPATH的**用户环境变量中。**我的问题是我不确定我是否应该将 WEKA 文件夹放在这个环境变量中（就像我们在路径**系统**环境变量中所做的那样）或者我将**weka.jar**文件而不是 CLASSPATH 中的文件夹所以，假设 weka . **jar**现在在我的类路径中，命令是否更改为 java -jar weka.classifiers.trees.J48 **input1 input2**

我很困惑，我在线程“main”java.lang.NoClassDefFoundError: weka/classifiers/tree s/J48 中遇到异常我想知道**命令序列**是如何工作的，以及它是否是**一般情况**。感谢您的任何见解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:24:22.210

Weka 安装提供 RunWeka.bat 文件。您可以查看其内容作为示例。我在下面提供了一个不同的例子。

要测试您的 weka 安装，您可以使用 **weka.core.SystemInfo**。此类不期望任何参数。你可以使用这个类来看看你的命令行环境是否可以看到weka jar。

wekaTest.cmd

```
SET WEKA_HOME=D:\atilla\tools\Weka-3-7
SET CLASSPATH=%CLASPATH%;%WEKA_HOME%\weka.jar
java weka.core.SystemInfo 
```

# php - PHP：“保存”或缓存变量以供以后使用、编辑和重新缓存的最佳方式？

> ID：11617468
> 
> 赞同：0
> 
> 时间：2012-07-23T17:29:47.497
> 
> 标签：php, database, file, caching

我的脚本要求我每 24 小时制作、“保存”、使用、编辑和重新保存非常复杂的变量（因为新数据每 24 小时出现一次）很长一段时间，通常是一年左右。我有一个包含其他数组、对象的数组，它还包含更多数组和对象，因此它使它成为一个非常复杂的数组。我想知道对于这个长期数据，哪个选项是最有效的选项。一个 sql 数据库，或将变量保存在一个 php 文件中，该文件可以包含在其他脚本中以供使用或 php APC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:35:17.503

您可以尝试使用 NoSQL 类型的数据库来存储复杂的数据结构，因为这样您就不需要将它们分解为定义良好的模式。或者，如果您的数据结构对于 PHP 序列化是安全的，您可以将其存储在按日期键入的 SQL 数据库中。另一个建议可能是使用 memcached 或类似的。

如果存储在适合您的情况的文件系统中，我通常也会将数据结构存储在 JSON 编码的文件中。

# java - 将版本添加到 @@WebService

> ID：11617471
> 
> 赞同：1
> 
> 时间：2012-07-23T17:30:04.747
> 
> 标签：java

我正在使用 javax.jws.WebService 来创建我的 web 服务，除了 targetNamespace 之外，我还想包含一个“版本”属性来标记我的服务版本。除了这个标签之外，我还可以使用什么其他标签来实现这一点，所以我的 wdsl 看起来像：

```
<schema targetNamespace="http://example.com/2009/02/15/webservice" version="1.1" xmlns="http://www.w3.org/2000/10/XMLSchema> 
```

即它有一个版本属性

# asp.net - Asp.net 覆盖 HTTP 引荐来源网址

> ID：11617472
> 
> 赞同：1
> 
> 时间：2012-07-23T17:30:08.210
> 
> 标签：asp.net

理想情况下，我想删除/覆盖 HTTP 响应引用标头。我的代码看起来像：

```
Response.AddHeader("Referer", "");
Response.Redirect(url); 
```

我这样做是因为我没有在流水线模式下运行，所以我无法直接访问标头。

这似乎没有做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:50:37.037

当您使用 Response.Redirect 时，您正在向客户端发送 http 302 或位置更改响应。

然后，客户端对 302 响应中指定的位置发出新请求。

referer 标头将由客户端设置。你不能那样改变它。

# android - 图像在 LinearLayout 中显示是否被拉伸？

> ID：11617474
> 
> 赞同：0
> 
> 时间：2012-07-23T17:30:10.930
> 
> 标签：android, android-linearlayout, android-imageview

我无法在`LinearLayout`. 我正在尝试获得白色的背景颜色并`ImageView`在我`LinearLayout`的图像中显示，并且可以找到背景颜色，但是图像被拉伸了。

什么是比例图像显示它显示正常的好方法？有任何想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   android:background="#FFFFFF">
<LinearLayout
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"
  >
  <ImageView
    android:src="@drawable/day1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
  </ImageView>
</LinearLayout>
</ScrollView> 
```

# c++ - opencv/c++-cli 中的内存泄漏

> ID：11617477
> 
> 赞同：1
> 
> 时间：2012-07-23T17:30:14.317
> 
> 标签：c++, opencv, c++-cli

我有一个运行良好的 c++-cli/opencv 程序，但它的一部分存在内存泄漏。我包括了内存泄漏最多的部分。我已经修复了轮廓 0 和轮廓 1 中的泄漏，这将内存泄漏减少了 1/3，但是仍然存在泄漏。有没有办法仍然减少内存泄漏？谢谢。

```
// capture video frame and convert to grayscale
     const int nFrames0 = (int) cvGetCaptureProperty( capture0 , CV_CAP_PROP_FRAME_COUNT ); 
     printf("LICENSECOUNT=%d\n",nFrames0);
     img = cvQueryFrame( capture0 );

     IplImage* frame1;
     cvReleaseImage(&frame1);
     frame1=cvCreateImage(cvSize(img->width,img->height),img->depth, 1 );
     cvConvertImage(img, frame1,0);

// create blank images for storing
     cvReleaseImage(&img00);
     img00=cvCreateImage(cvSize(img->width,img->height),img->depth, 3 );
     cvReleaseImage(&img10);
     img10=cvCreateImage(cvSize(img->width,img->height),img->depth, 1 );
     cvReleaseImage(&img20);
     img20=cvCreateImage(cvSize(img->width,img->height),img->depth, 1 );
     cvReleaseImage(&img30);
     img30=cvCreateImage(cvSize(img->width,img->height),img->depth, 1 );
     cvReleaseImage(&imggray1);
     imggray1=cvCreateImage(cvSize(img->width,img->height),img->depth, 1 );
     cvReleaseImage(&imgdiff);
     imgdiff=cvCreateImage(cvSize(img->width,img->height),img->depth, 1 );
     cvReleaseImage(&imgco);
     imgco=cvCreateImage(cvSize(img->width,img->height),img->depth, 1 );

     int flagp=1;
     int licf=0;

    CvSeq *contour0; 
CvSeq* result0;

storage0 = cvCreateMemStorage(0); 

     CvRect r0;
//skip a few frames 
      for (int i=0;i<cf1-1;i++)

     img = cvQueryFrame( capture0 );

// go through all frames to find frames that contain square with certain dimension
     while ( key != 'q')
     {
         img = cvQueryFrame( capture0 );
              if( !img ) break;

        cvConvertImage(img,img00,0);    

          cvSetImageROI(img,cvRect(0,img->height-35,img->width,35));
          cvZero(img);
          cvResetImageROI(img);

          cvConvertImage(img, img10,0);
          cvConvertImage(img, img20,0);
          cvConvertImage(img, imggray1,0);

       int flagp=1;

       cvAbsDiff(img10,frame1,imgdiff);
           cvThreshold(imgdiff, imgdiff,60,255,CV_THRESH_BINARY);

     mem0 = cvCreateMemStorage(0);

     CvSeq *ptr,*polygon;

 //vary threshold levels for segmentation 
     for (int thr=1;thr<11;thr++)

     {
         // do morphology if segmentation does not work
         if (thr==10)
         {

          cvEqualizeHist( img20, img10 );
          cvSetImageROI(img10,cvRect(0,0,20,img->height));
          cvZero(img10);
          cvResetImageROI(img10);
          cvMorphologyEx(img20,img10,img20,cvCreateStructuringElementEx(20,10,10,5,CV_SHAPE_RECT,NULL),CV_MOP_TOPHAT,1);

  IplImage  *frame_copy1 = 0; 
  frame_copy1 = cvCreateImage(cvSize(img10->width,img10->height),IPL_DEPTH_16S,1 ); 
  cvSobel(img10,frame_copy1,1,0,3); 
  cvConvertScaleAbs(frame_copy1, img10, 1, 0);
  cvSetImageROI(img10,cvRect(0,0,20,img->height));
  cvZero(img10);
  cvResetImageROI(img10);

  cvSetImageROI(img10,cvRect(img->width-20,0,20,img->height));
  cvZero(img10);
  cvResetImageROI(img10);

cvMorphologyEx(img10,img10,img20,cvCreateStructuringElementEx(16,5,8,3,CV_SHAPE_RECT,NULL),CV_MOP_CLOSE,1);

cvThreshold(img10,img10,180,255,CV_THRESH_BINARY | CV_THRESH_OTSU);

cvErode(img10,img10,cvCreateStructuringElementEx(10,5,5,2,CV_SHAPE_RECT,NULL),1);
cvErode(img10,img10,cvCreateStructuringElementEx(5,10,2,5,CV_SHAPE_RECT,NULL),1);

cvDilate(img10,img10,cvCreateStructuringElementEx(5,10,2,5,CV_SHAPE_RECT,NULL),1);
cvDilate(img10,img10,cvCreateStructuringElementEx(10,5,5,2,CV_SHAPE_RECT,NULL),1);

cvErode(img10,img10,cvCreateStructuringElementEx(10,5,5,2,CV_SHAPE_RECT,NULL),2);
cvDilate(img10,img10,cvCreateStructuringElementEx(10,5,5,2,CV_SHAPE_RECT,NULL),1);

         }

  //segmenation
         else 

             {
  cvThreshold(img20,img10,thr*255/11,255,CV_THRESH_BINARY);

    cvDilate(img10,img10,cvCreateStructuringElementEx(10,5,5,2,CV_SHAPE_RECT,NULL),1);
cvDilate(img10,img10,cvCreateStructuringElementEx(20,30,10,15,CV_SHAPE_RECT,NULL),1);

    }

   //trim the sides of the image

cvSetImageROI(img10,cvRect(0,0,20,img->height));
cvZero(img10);
cvResetImageROI(img10);

cvSetImageROI(img10,cvRect(img->width-20,0,20,img->height));
cvZero(img10);
cvResetImageROI(img10);

cvReleaseImage(&imgco);

imgco = cvCloneImage(img10); 

///find contours to find squares with certain dimension
cvRelease((void**)&contour0);
int Nc0;
Nc0= cvFindContours(imgco, storage0, &contour0, sizeof (CvContour), 
             CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE); 

float k;
int white=0;

while( contour0 )

{

r0 = cvBoundingRect(contour0, 0);
double s,t;
if( ((r0.width*r0.height)>2000 ||  (r0.width*r0.height && thr==10)>1000) && (r0.width*r0.height) < 40000 && (float(r0.width)/float(r0.height))>1.7 && (float(r0.width)/float(r0.height))<5   )  
{

    k=0.8;
if (thr==10 && licf<2)
    k=0.6       ;

   cvSetImageROI(img10,r0);

cc=cvCountNonZero(img10);

cvResetImageROI(img10);

//if area of contour is a percentage of area of rectangle surrounding contour
if (cc>k*r0.width*r0.height && (cvCountNonZero(imgdiff)>10000))
    {   

cvSetImageROI(img,cvRect(0,img->height-35,img->width,35));
cvSet(img, cvScalar(255,255,255));
cvResetImageROI(img);

      //process the image contained inside the contour area 
cvSetImageROI(img,cvRect(r0.x-5,r0.y-10,r0.width+10,r0.height+20));

img30 = cvCreateImage( cvGetSize( img), IPL_DEPTH_8U, 1);  

         cvCvtColor( img, img30, CV_RGB2GRAY );  

         IplImage* img_temp=cvCreateImage(cvSize(2*r0.width,2*r0.height+20),img->depth, 1 );
         IplImage* img_tempo=cvCreateImage(cvSize(2*r0.width,2*r0.height+20),img->depth, 1 );

         cvResize(img30,img_tempo);

CvMemStorage *storage1; 
    CvSeq *contour1; 
    CvSeq* result1;

    storage1 = cvCreateMemStorage(0); 
    CvRect r1;

    //segment inside squares check if square contains letters or numbers with certain dimension

    for (int th=20;th<200;th+=5)

 {
    cvThreshold(img_tempo, img_temp, th, 255, CV_THRESH_BINARY);
    cvThreshold(img_temp, img_temp, 0, 255, CV_THRESH_BINARY_INV);           

    {
cvErode(img_temp,img_temp);

cvDilate(img_temp,img_temp);
cvErode(img_temp,img_temp);

    }

    cvResize(img_temp,img30);

    cvRelease((void**)&contour1);

    int Nc=cvFindContours(img30, storage1, &contour1, sizeof (CvContour), 
             CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE) ;

    int count =0 ;

    while( contour1)

        {

            r1 = cvBoundingRect(contour1, 0);

            int s_y1av=0;
            int s_y2av=0;
            int s_x1av=0;

        {

        int s_x1=r1.x; 

        int s_y1=r1.y;

        float width1=r1.width;

        float height1=r1.height;

        float ratio1= width1/height1;

        //if contours match certain dimensions

        if(ratio1>0.05 && ratio1<1 && height1>0.3*r0.height && width1>0.05*r0.width && width1<0.3*r0.width && width1*height1>60 && width1*height1<2000)

        {  
            count+=1;

        }

        s_y1av=s_y1;
        s_y2av=s_y1+height1;

        }
        contour1=contour1->h_next;
        }

            //if there are more than 3 letters/numbers and less than 9  
        if (count>=3 && count<9)
            {
                th=200;
                thr=11;
                if (thr!=10)
                licf=1;

                if (a)
                {
                cvNamedWindow( "license", 1 );
                cvShowImage( "license", img00 );
                cvWaitKey(1);
                }       

    int jpeg_params[] = { CV_IMWRITE_JPEG_QUALITY, 80, 0 };
    CvMat* buf0 = cvEncodeImage(".jpeg", img00, jpeg_params);
    int img_sz=buf0->width*buf0->height;
    array <Byte>^ hh = gcnew array<Byte> (img_sz);
    Marshal::Copy( (IntPtr)buf0->data.ptr, hh, 0, img_sz );

    if(!myResult->TryGetValue("PLATE", thisList4))
        {
            thisList4 = gcnew List<array<Byte>^>();
            myResult->Add("PLATE", thisList4);}

    thisList4->Add(hh);

             }
        cvResetImageROI(img);

            }

       }

         }

contour0=contour0->h_next;
}

     }

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:15:03.767

较新的 OpenCV C++ 接口会自动为您处理内存 - 分配和解除分配。您应该查看 samples/cpp 文件夹中的示例并将其作为模型。

有了它，您可以忘记内存泄漏。

使用新界面编写的部分代码将如下所示

```
VideoCapture cap("SomeVideo.avi");
if(!cap.isOpen())
    return 0;

const int nFrames = cap.get(CV_CAP_PROP_FRAME_COUNT );
...
cv::Mat img;
cap >> img; 
```

您应该记住，所有以 cv.. 开头的函数和数据类型，例如 CvSeq，都来自 C 接口，并且在 C++ 中有更好的对应物。

例如：

*   IplImage -> cv::Mat
*   CvPoint -> cv::Point
*   CvSeq -> std::vector<>

等。新界面中的大多数功能保持相同的名称，只是没有“cv”。我在上面写了该规则的主要例外情况。

顺便说一句，您的某些操作似乎是多余的或效率低下的。您应该仔细查看其中哪些是需要的，并重用一些矩阵，以最小化内存分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:39:22.170

使用一些内存泄漏检测工具，例如 Valgrind 可能是有用的，也是开始调试的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:43:59.303

我建议看一下 C++11 中新改进的智能指针。它不会提供自动 garbaje 收集，但至少它处理了 C++ 内存管理的痛苦。您还可以查看 JavaCV，它只是一个包装器，但消除了内存泄漏的一些痛苦。

如果您没有使用最新的 C++ 标准，请查看 autoptr。如果不是，则可能是 OpenCV 的错误。

# java - 将选定的行从数据表发送到操作方法？

> ID：11617479
> 
> 赞同：1
> 
> 时间：2012-07-23T17:30:21.403
> 
> 标签：java, jquery, struts2, datatable

我正在使用数据表在 jsp 页面上显示客户记录，其中我在数据表中显示客户姓名、姓氏、部门、加入日期。我还有一列是选择框。现在用户可以从 ui 中选择任意数量的客户记录并发送到服务器端的操作以进行更新。在我的 jquery 函数中，我得到数据表中的选定行。**但我无法弄清楚如何将这些行发送到操作方法？** 我期望的是我将这些行从 ajax 发送到 action 方法，该方法具有一个方法参数作为列表（代表选定的行），我可以从列表中的每一行中提取字段值，代表 UI 中的选定行。 **但我不确定该列表将包含什么类型的对象？有人可以用一些简短的例子指出我正确的方向吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:43:01.687

为什么不在每一行中给出一个复选框，其值将是相应记录的 id

```
<input type="checkbox" name="rec" value="{id of the record}"/> 
```

然后，当您提交时，获取选定的 ID

```
var selectedRec="";
$("input[name='rec']:checked").each(function(){
  selectedRec += $(this).val()+","; 
}); 
```

您现在可以`selectedRec`作为字符串变量传递给操作。在您的操作中，您可以将此字符串拆分为数组

```
String[] recArray =  selectedRec.split(","); 
```

然后在循环中你可以得到每个 id 如下

```
int customerId = Integer.parseInt(recArray[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:06:02.943

这是另一种方法，您不需要在 JQuery 中迭代所选记录并在 Script 中创建字符串。

步骤 1\. 创建复选框

```
<s:checkbox name="Bean.record" id="record" fieldValue="%{id of the record}" /> 
```

步骤 2\. 在您的 Bean 类中创建 String[]

```
private String[] record; 
```

就是这样......所以无论您将在 JSP 上选择什么记录，值都将添加到字符串数组中，您可以在您的操作中获取它。

希望这会有所帮助。

# javascript - “this”在 JS 中返回什么？

> ID：11617481
> 
> 赞同：-3
> 
> 时间：2012-07-23T17:30:28.823
> 
> 标签：javascript, jquery

我有 2 个问题

1.  `this`指的是什么？我知道它是相关对象的某种容器。

2.  由于缺乏更好的选择，我正在尝试使用表单传递变量。我的想法是在 , 中有一个`<a onclick>`and`onclick``this.form.submit();`

```
<form action="/justtesting/" method="post">   
     <a onclick="this.form.submit();" href="">click this</a>  
     <input name="pageid" value="12" type="hidden">  
     <input name="mid" value="5" type="hidden">  
</form> 
```

这样我就传递了变量。

我以前见过这个，但`<a>`他们没有使用按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:39:21.907

简短的回答： `this`指的是调用当前正在执行的函数的对象

长答案： [https ://developer.mozilla.org/en/JavaScript/Reference/Operators/this](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:36:22.120

this 指的是当前元素，在你的情况下它指的是`A`标签

如果你使用 `<Button type="Submit">click this</Button>`，那么它可以在没有 javascript 的情况下工作

如果你使用`A`标签，那么不要留下 href 属性，因为它可能会导致问题

`<a href="javascript:this.form.submit()">click this</a>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T17:37:17.637

内联绑定（例如元素`onclick`的`onload`属性）内部，`this`指的是元素本身。因此，例如：

```
<a href="http://google.com" onclick="alert(this.href);">Click me</a>
<!-- Alerts "http://google.com" -->

<img src="foo.jpg" width="50" height="50" onload="alert(this.width+'x'+this.height);" />
<!-- Alerts "50x50" --> 
```

因此，通过说`this.form`您是在说“获取该元素所属的表单（如果有）”，那么您就是在调用表单元素的`submit()`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T17:39:16.633

当传递给事件时， this 指的是作为参数传递给函数的锚对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T17:46:08.183

1.  在事件处理程序的情况下，“this”指的是有问题的目标事件

例子：

```
<div onclick="console.log(this) id="me">click me</div> 
```

2\. 在对象的情况下，它指的是有问题的对象

例子：

```
x = { hi: function(){console.log("Hi "+this.name)}};
x.name= "Bill";
x.hi(); // Hi Bill 
```

3 这两种行为都可以通过调用所谓的绑定来改变，可以使用绑定、应用或调用（此处实现绑定）

```
var bind = function(obj, fn){ return function(){ return fn.apply(obj, arguments)}
y.name = "Joe";
x.hi = bind(y, x.hi);
x.hi(); //Hi Joe 
```

4 不指定时this指的是一个全局对象，在兼容模式下相当于浏览器中的window，在所谓严格模式下相当于undefined。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-23T17:33:20.933

没有任何上下文的“this”总是指 -window- 对象。

```
var test = 123;

alert(test); // 123
alert(this.test); // 123 
```

你会希望有某种 jQuery click 事件，搜索你想与表单提交一起传递的任何值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-23T17:38:17.037

在正常的 Javascript 事件中，`this`指的是处理程序绑定到的元素。但是，如果您的事件`attachEvent`在 IE 中是绑定的，`this`则指的是窗口。在您的代码中，`this`指的是单击的锚标记。以下是在 jQuery 中正确实现所需功能的方法：

```
$("a").click(function() {
     $(this).closest("form").submit();
 }); 
```

# php - imagettftext() 不工作

> ID：11617484
> 
> 赞同：-1
> 
> 时间：2012-07-23T17:30:35.537
> 
> 标签：php

```
/*create watermark*/

    // Create the image
    $im = imagecreate(460, 50);

    // Create some colors
    $grey = imagecolorallocate($im, 230, 231, 232);
    $dark_grey = imagecolorallocate($im, 128, 130, 133);

    // The text to draw
    $text = "foobar";

    // Set the enviroment variable for GD
putenv('GDFONTPATH=' . realpath('.'));

$font = 'Tondu_beta';

    // Add the text
    imagettftext($im, 15, 0, 15, 35, $dark_grey, $font, $text);

    $wm_w = imagesx($im); //get width
    $wm_h = imagesy($im); //get height

    $wmresource = $im; //watermark resource

//imagejpeg($wmresource);

/*end watermark*/ 
```

字体文件是 Tondu_Beta.ttf。上面的代码在我的本地机器上工作得很好，但在上传到实时服务器后它只给了我一个灰色框。这里有什么问题？谢谢^^

**更新**：我记得它给了我这个错误：`Could not find/open font bla.bla..bla...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T01:10:22.543

尝试使用

```
"./Tondu_beta.ttf" 
```

当字体和php文件都在根目录中时为我工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:42:38.887

直接来自[文档](http://php.net/manual/en/function.imagettftext.php)：

> 字体文件
> 
> 您希望使用的 TrueType 字体的路径。
> 
> 根据 PHP 使用的 GD 库的版本，当 fontfile 不以前导 / 开头时，.ttf 将附加到文件名，并且库将尝试沿着库定义的字体路径搜索该文件名。
> 
> 当使用低于 2.0.18 的 GD 库版本时，使用空格字符而不是分号作为不同字体文件的“路径分隔符”。无意使用此功能将导致警告消息：警告：无法找到/打开字体。对于这些受影响的版本，唯一的解决方案是将字体移动到不包含空格的路径。
> 
> 在许多情况下，字体与使用它的脚本位于同一目录中，以下技巧将缓解任何包含问题。

```
<?php
// Set the enviroment variable for GD
putenv('GDFONTPATH=' . realpath('.'));

// Name the font to be used (note the lack of the .ttf extension)
$font = 'SomeFont';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:34:35.230

该错误是不言自明的。您的实时服务器没有安装有问题的字体 (Tondu_Beta.ttf)。将字体安装到您的服务器上，或选择您的服务器拥有的字​​体。

# android - 如何从 string.xml 文件中检索数据到 android 应用程序？

> ID：11617485
> 
> 赞同：0
> 
> 时间：2012-07-23T17:30:37.453
> 
> 标签：android

我是 android 应用程序开发项目的新手。我的项目中有一个**string.xml**文件。我的问题是如何从**string.xml**中检索数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:37:17.070

```
String string =  context.getString(R.string.string_name); 
```

或者

```
String string =  this.getString(R.string.string_name); 
```

查看[字符串资源](http://developer.android.com/guide/topics/resources/string-resource.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:43:51.147

```
String myString = getResources().getString(R.string.stringname); 
```

**如果是字符串数组**

```
String[] stringArray ;
stringArray = getResources().getStringArray(R.array.stringArrayName); 
```

# sql - 从多个表中进行多项选择还是从所有表中选择所有数据更好？

> ID：11617491
> 
> 赞同：4
> 
> 时间：2012-07-23T17:31:26.847
> 
> 标签：sql, sql-server

我有多个可以通过连接查询数据的表。

关于数据库性能：

我应该从多个表中针对所需数据运行多个选择吗？

或者

我是否应该编写 1 个使用一堆连接的选择来一次从所有表中选择所需的数据？

编辑：

我将用于选择的 where 子句包含表的索引字段。听起来正因为如此，使用 1 条带有许多连接的 select 语句会更快。但是，我仍然会测试 2 之间的性能差异。

感谢所有伟大的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:32:52.287

这可能是其中之一，很好，它取决于，但通常如果您正在编写直接 SQL 做一个查询 - 特别是因为连接可能会限制您返回的一些数据。

如果您对每个表中的一条记录执行多个点查询，则很有可能，如果您使用表的主键进行查找，则每个查询的连接成本将比实际查询的成本更高。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T17:34:18.517

只需编写一个带有连接的查询。如果您担心性能，有多种选择，包括：

*   创建有助于提高选择性能的索引
*   创建所需数据的持久非规范化形式，以便您可以查询一个表。这很可能是一个索引视图或另一个表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T17:34:08.273

这取决于表的连接方式。如果您对所有表进行交叉乘积，则最好进行单独的选择。但是，如果您的表已正确编入索引并且经过深思熟虑，则一个带有多个选择的查询会更有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T17:37:57.287

如果您的表上有适当的索引，则使用 JOIN 可能会更好，但它们通常是造成瓶颈的原因。您可能会寻找非规范化数据的方法，而不是多选。当用户执行操作以更新多个表中的计数或时间戳时，它的“成本”要低得多，这使您不必加入这些表。

我发现查询性能调优的最佳工具是使用 EXPLAIN。在查询之前键入 EXPLAIN，您可以看到扫描了多少行。您的目标是数字越低越好，这意味着您的索引正在工作。另一件事是在创建索引时，在多个字段上使用复合索引，并按照它们在 WHERE 子句中出现的顺序从左到右排列它们。

例如，您在某个表中有 10,000 行：

```
SELECT id, name, description, status FROM sometable WHERE name LIKE '%someName%' AND status = 'Active'; 
```

您可以在查询之前键入 EXPLAIN，它可能会返回 10,000 作为扫描匹配的行数。然后创建一个复合索引：

```
ALTER TABLE sometable ADD INDEX idx_st_search (name, status); 
```

然后，您再次对表执行 EXPLAIN，它可能会在扫描的行数和性能显着提高时返回 1。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T17:39:02.020

取决于您的表设计。

大多数时候，一个大查询更好，但一定要

*   尽可能在 where 子句中使用主键进行连接。

*   使用索引字段或为 where 子句中使用的字段创建索引。

# ms-access - 是否可以对访问中的表达式列求和？

> ID：11617492
> 
> 赞同：1
> 
> 时间：2012-07-23T17:31:50.637
> 
> 标签：ms-access

我有一个访问列，我需要得到总数。当我在查询中尝试以下方法时，我收到错误“您尝试执行的查询不包括指定的表达式‘ID’作为聚合函数的一部分。”

```
Expr1: Sum([Column1]) 
```

编辑我的查询：

```
SELECT tblTest.ID,Field1,Sum([Field1]) AS Expr1 From tblTest; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:37:15.960

你的问题需要更多细节，但我认为你想要这个：

```
SELECT Sum(yourColumn)
FROM yourTable 
```

然后，如果你需要，你将不得不添加一个`GROUP BY`

```
SELECT Sum(yourColumn)
FROM yourTable
GROUP BY yourTable.Id 
```

根据您的评论，您的查询将是：

```
SELECT ID
    ,Field1
    ,Sum([Field1]) AS Expr1 
From tblTest
GROUP BY ID, Field1; 
```

# java - Easymock 测试方法内部的多个方法调用

> ID：11617493
> 
> 赞同：0
> 
> 时间：2012-07-23T17:31:51.430
> 
> 标签：java, unit-testing, easymock

所以我使用easymock在我的类中编写单元测试fpr一个方法。我在这个方法中模拟了一个对象，它工作正常。问题出在这个测试方法中，我在同一个类中多次调用其他方法。

例如，

```
public class testClass { 
    public void testMethod() { 
        mockedObject.method(); --> I define a return type for this and it works fine.
        this.otherMethod() {
        --> Inside this method I have a call to the mocked object with different methods..
    }
} 
```

所以我的问题是，当方法使用 this.otherMethod() 调用另一个方法时，我应该在 otherMethod 中定义 mockedObject 调用的所有返回值吗？有没有办法为 otherMethod 指定返回值，这样它甚至不会进入另一个方法？请注意，这不是 mockedObject，这就是为什么我不能为此使用 eaymock 返回值。我在想也许有办法解决这个问题。

谢谢。

更新：我发现这是为了部分模拟方法：[http](http://www.easymock.org/EasyMock2_2_2_ClassExtension_Documentation.html) ://www.easymock.org/EasyMock2_2_2_ClassExtension_Documentation.html 这有助于只模拟特定的方法。但是当我尝试使用它时，它在 createMock 方法上越过了一条线......就像错误的语法一样！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:15:52.830

谢谢大家，

我找到了这个链接： http: [//fczaja.blogspot.com/2011/11/easymock-create-partial-mocks.html](http://fczaja.blogspot.com/2011/11/easymock-create-partial-mocks.html)

答案是部分模拟在此方法中调用的那些方法，以隔离这些方法调用。

再次感谢。

# wordpress - 有没有办法使用 htaccess 重写部分 URL？

> ID：11617504
> 
> 赞同：-1
> 
> 时间：2012-07-23T17:32:21.550
> 
> 标签：wordpress, .htaccess, url, rewrite

在使用 wp_get_archives 显示每周帖子时，我遇到了 wordpress 的问题。我需要的是显示特定类别的每周存档，但 wordpress 只允许每月和每年存档，而不是每周存档。我想出了一个想法，只显示 URL，然后使用 htaccess 重写 URL，但我想知道如何只更改 URL 的一部分。例如，改变

[http://www.domain.com/2012?w=29](http://www.domain.com/2012?w=29)

至

[http://www.domain.com/category/name?w=20?m=2012](http://www.domain.com/category/name?w=20?m=2012)

我需要保留 ?w=29 并在其前面插入 'http://www.domain.com/category/name' 并在 URL 包含 2012?w= 之后插入 ?m=2012

这是网站中唯一以这种方式显示档案的部分，因此它不会破坏网站上的任何其他内容，这就是我想采用这种方法的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:40:36.147

这应该这样做：

```
RewriteEngine on

RewriteRule /^(.*)\?w\=(.*)$                    /category/name?w=$1&m=$2 
```

# windows - R和foreach循环中的doMC不起作用

> ID：11617506
> 
> 赞同：4
> 
> 时间：2012-07-23T17:32:33.240
> 
> 标签：windows, r, foreach, parallel-processing, domc

我正在尝试让 foreach 包在 R 中进行并行处理，但我遇到了几个问题：

使 foreach 工作所需的 doMC 包在 CRAN for Windows 上不存在。一些博客建议 doSNOW 应该做同样的工作。但是，当我使用 doSNOW 运行 foreach 命令时，它的运行`%dopar%`速度似乎并不比`%do%`. 事实上，它要慢得多。我的 CPU 是带有 8 GB RAM 的 Intel i7 860 @ 2.80GHz。下面是我的代码：

```
##Run example in 1 core 
require(foreach)
require(doSNOW)
x= iris[which(iris[,5] != "setosa"),c(1,5)]
trials = 10000
system.time({
r= foreach(icount(trials), .combine=cbind) %do% {
ind=sample(100,100,replace=TRUE)
results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit))
coefficients(results1)
}
})[3]
#  elapsed 
#  37.28 

# Same example in 2 cores
registerDoSNOW(makeCluster(2,type="SOCK"))
getDoParWorkers()
trials = 10000
system.time({
r= foreach(icount(trials), .combine=cbind) %dopar% {
ind=sample(100,100,replace=TRUE)
results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit))
coefficients(results1)
}
})[3]
# elapsed 
#  108.14 
```

我重新安装了所有需要的软件包，但仍然是同样的问题。这是输出：

```
sessionInfo()

#R version 2.15.1 (2012-06-22) 
#Platform: i386-pc-mingw32/i386 (32-bit)

#locale:
#[1] LC_COLLATE=English_United States.1252 
#[2] LC_CTYPE=English_United States.1252   
#[3] LC_MONETARY=English_United States.1252
#[4] LC_NUMERIC=C                          
#[5] LC_TIME=English_United States.1252    

#attached base packages:
#[1] parallel  stats     graphics  grDevices datasets  utils     methods  
#[8] base     

#other attached packages:
#[1] doParallel_1.0.1 codetools_0.2-8  doSNOW_1.0.6     snow_0.3-10     
#[5] iterators_1.0.6  foreach_1.4.0    rcom_2.2-5       rscproxy_2.0-5  

#loaded via a namespace (and not attached):
#[1] compiler_2.15.1 tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:50:39.870

你最好在 Windows 中使用`doParallel()`：

```
require(foreach)
require(doParallel)
cl <- makeCluster(6) #use 6 cores, ie for an 8-core machine
registerDoParallel(cl) 
```

然后运行你的`foreach() %dopar% {}`

编辑：OP提到仍然看到问题，所以包括我的确切代码。在 4 核 Windows7 VM、R 2.15.1 32 位上运行，只允许`doParallel`使用我的 3 个内核：

```
require(foreach)
require(doParallel)
cl <- makeCluster(3)
registerDoParallel(cl)

x= iris[which(iris[,5] != "setosa"),c(1,5)]

trials = 1000 
system.time( 
  foreach(icount(trials), .combine=cbind) %do% 
  {  
    ind=sample(100,100,replace=TRUE) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    coefficients(results1) 
  })[3] 

system.time( 
  foreach(icount(trials), .combine=cbind) %dopar% 
  {  
    ind=sample(100,100,replace=TRUE) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    coefficients(results1) 
  })[3] 
```

就我而言，我得到 17.6 秒`%do%`和 14.8 秒`%dopar%`. 观察任务执行，似乎大部分执行时间是`cbind`，这是并行运行的常见问题。在我自己的模拟中，我已经完成了自定义工作，将我的详细结果保存为并行任务的一部分，而不是通过返回它们`foreach`，以消除那部分开销。YMMV。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T20:43:24.193

我知道这是一个较老的问题，但我在寻找其他东西时遇到了它，并认为我会添加我的解决方案。我发现将试验的总数分成单独的试验组（组的数量等于处理器内核的数量）比尝试一次并行化所有试验并处理所有开销更有效。这是使用 OP 示例的比较：

```
require(doParallel)

x <- iris[which(iris[,5] != "setosa"),c(1,5)]
trials <- 10000

# example using a single core
t1 <- system.time({
  r1 <- foreach(icount(trials), .combine=cbind) %do% {
    ind <- sample(100,100,replace= TRUE)
    results1 <- glm(x[ind,2]~x[ind,1],family=binomial(logit))
    coefficients(results1)
  }
})[3]

# example using 4 cores and parallelizing each model trial
nCores <- 4
cl <- makeCluster(nCores)
registerDoParallel(cl)

t2 <- system.time({
  r2 <- foreach(icount(trials), .combine=cbind) %dopar% {
    ind <- sample(100,100,replace= TRUE)
    results1 <- glm(x[ind,2]~x[ind,1],family=binomial(logit))
    coefficients(results1)
  }
})[3]

# example using 4 cores and parallelizing a group of trial runs
trialsPerCore <- as.integer(ceiling(trials / nCores)) # number of trials
                                                   # do to on each core
# function to do a single model run
model <- function(x) {
  ind <- sample(100,100,replace= TRUE)
  results1 <- glm(x[ind,2]~x[ind,1],family=binomial(logit))
  coefficients(results1)
}
# function producing a group of model runs
modelRun <- function(trials, x) {
  replicate(trials, model(x))
}
# call the model run for each core
t3 <- system.time(
  r3 <- foreach(icount(nCores), .combine= cbind) %dopar% modelRun(trialsPerCore, x)
)[3]

stopCluster(cl) 
```

在运行 Ubuntu 12.04 的 3.4 GHz 四核 i7 上的执行时间：

```
> t1
elapsed 
   34.5 
> t2
elapsed 
   26.5 
> t3
elapsed 
  8.295 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T17:53:30.977

对于这种类型的并行来说，这并不是不典型的，并且可能取决于操作系统。我的结果与您相似，但是当我对代码进行了愚蠢的更改时

```
require(foreach)
require(doSNOW)

x= iris[which(iris[,5] != "setosa"),c(1,5)]

trials = 1000 
system.time( 
  foreach(icount(trials), .combine=cbind) %do% 
  {  
    ind=sample(100,100,replace=TRUE) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit)) 
    coefficients(results1) 
  })[3] 

registerDoSNOW(  makeCluster(2,type="SOCK")) 
getDoParWorkers() 
trials = 1000 
system.time(
  foreach(icount(trials), .combine=cbind) %dopar% 
  {
    ind=sample(100,100,replace=TRUE) 
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit))
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit))
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit))
    results1 = glm(x[ind,2]~x[ind,1],family=binomial(logit))
    coefficients(results1) 
  })[3] 
```

为了模拟 foreach 中的繁重工作，我得到了两者的收支平衡。这是开销的代价。我最近有一个类似的案例，并直接使用 MPI 处理它，它的开销要低得多，但使用起来要复杂得多（我认为 Dirk 会不同意）。（将其更改为“不那么优雅”。

# android - 将图像上传到 Facebook 问题

> ID：11617513
> 
> 赞同：0
> 
> 时间：2012-07-23T17:33:02.163
> 
> 标签：android, facebook

我正在尝试将图像上传到 Facebook。我现在拥有的代码正在运行。我正在使用图像路径从我的数据库中上传图像。

```
 public void postImage() {

    facebook.authorize(this, new DialogListener() {
        public void onComplete(Bundle values) {
             byte[] data = null;
             String upploadpath = ((MyVariables) getApplication()) .getUpploadPath();

             Bitmap bi = BitmapFactory.decodeFile(upploadpath);
             Bitmap scaledimage = Bitmap.createScaledBitmap(bi, 720, 520, false);

             ByteArrayOutputStream baos = new ByteArrayOutputStream();
             scaledimage.compress(Bitmap.CompressFormat.JPEG, 100, baos);
             data = baos.toByteArray();

             Bundle params = new Bundle();
             params.putString(Facebook.TOKEN, facebook.getAccessToken());
             params.putString("method", "photos.upload");
             params.putByteArray("picture", data);
             params.putString("caption", "Caption text");

             AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
             mAsyncRunner.request(null, params, "POST", new PhotoUploadListener(), null);
        }

        public void onFacebookError(FacebookError error) {}

        public void onError(DialogError e) {}

        public void onCancel() {}         
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
}

/*
 * callback for the photo upload
 */
public class PhotoUploadListener extends BaseRequestListener {

    @Override
    public void onComplete(final String response, final Object state) {
        Log.e("Facebook", "onComplete");

    }

    public void onFacebookError(FacebookError error) {

    }
} 
```

这里的问题是我硬编码了图像的调整大小。并且方向不起作用，因此即使照片是以纵向模式拍摄的，照片也会横向上传。

使用 facebooks hackbook，图像得到重新缩放和正确的方向。我试图改用这段代码：

```
 public void postImage() {

    facebook.authorize(this, new DialogListener() {
        public void onComplete(Bundle values) {

             String upploadpath = ((MyVariables) getApplication()) .getUpploadPath();
             Uri photoUri = Uri.parse(upploadpath);

             if (photoUri != null) {
                 Bundle params = new Bundle();
                 try {
                     params.putByteArray("photo",
                             Utility.scaleImage(getApplicationContext(), photoUri));
                 } catch (IOException e) {
                     e.printStackTrace();
                 }
                 params.putString("caption", "FbAPIs Sample App photo upload");

 Utility.mAsyncRunner.request("me/photos", params, "POST",
                         new PhotoUploadListener(), null);
             } else {
                 Toast.makeText(getApplicationContext(),
                         "Error selecting image from the gallery.", Toast.LENGTH_SHORT)
                         .show();
             }
        }

        public void onFacebookError(FacebookError error) {}

        public void onError(DialogError e) {}

        public void onCancel() {}         
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
}

/*
 * callback for the photo upload
 */
public class PhotoUploadListener extends BaseRequestListener {

    @Override
    public void onComplete(final String response, final Object state) {
        Log.e("Facebook", "onComplete");

    }

    public void onFacebookError(FacebookError error) {

    }
} 
```

但这给了我错误：

```
 07-23 18:47:22.290: E/LOG_TAG(9293): Setting filepath: /mnt/sdcard/Pictures/MyApp/IMG_20120721_192609.jpg
 07-23 18:47:27.340: E/AndroidRuntime(9293): FATAL EXCEPTION: main
 07-23 18:47:27.340: E/AndroidRuntime(9293): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=32665, result=-1, data=Intent { (has extras) }} to activity {com.ubbep.myapp/com.ubbep.myapp.ViewContact}: java.lang.NullPointerException
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2992)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3035)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at android.app.ActivityThread.access$1100(ActivityThread.java:127)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1189)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at android.os.Handler.dispatchMessage(Handler.java:99)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at android.os.Looper.loop(Looper.java:137)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at android.app.ActivityThread.main(ActivityThread.java:4507)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at java.lang.reflect.Method.invokeNative(Native Method)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at java.lang.reflect.Method.invoke(Method.java:511)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at dalvik.system.NativeStart.main(Native Method)
 07-23 18:47:27.340: E/AndroidRuntime(9293): Caused by: java.lang.NullPointerException
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at com.ubbep.myapp.ViewContact$3.onComplete(ViewContact.java:360)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at com.facebook.android.Facebook.authorizeCallback(Facebook.java:433)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at com.ubbep.myapp.ViewContact.onActivityResult(ViewContact.java:381)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at android.app.Activity.dispatchActivityResult(Activity.java:4649)
 07-23 18:47:27.340: E/AndroidRuntime(9293):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2988) 
```

所以通过删除：

```
 facebook.authorizeCallback(requestCode, resultCode, data); 
```

从：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
} 
```

我没有收到任何错误，但图片没有上传。

facebook hackbook Utility.java 中包含以下代码：

```
 public static byte[] scaleImage(Context context, Uri photoUri) throws IOException {
    InputStream is = context.getContentResolver().openInputStream(photoUri);
    BitmapFactory.Options dbo = new BitmapFactory.Options();
    dbo.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(is, null, dbo);
    Log.e("scaleImage", "scaling image" + photoUri);
    is.close();

    int rotatedWidth, rotatedHeight;
    int orientation = getOrientation(context, photoUri);

    if (orientation == 90 || orientation == 270) {
        rotatedWidth = dbo.outHeight;
        rotatedHeight = dbo.outWidth;
    } else {
        rotatedWidth = dbo.outWidth;
        rotatedHeight = dbo.outHeight;
    }

    Bitmap srcBitmap;
    is = context.getContentResolver().openInputStream(photoUri);
    if (rotatedWidth > MAX_IMAGE_DIMENSION || rotatedHeight > MAX_IMAGE_DIMENSION) {
        float widthRatio = ((float) rotatedWidth) / ((float) MAX_IMAGE_DIMENSION);
        float heightRatio = ((float) rotatedHeight) / ((float) MAX_IMAGE_DIMENSION);
        float maxRatio = Math.max(widthRatio, heightRatio);
        Log.e("Bitmap srcBitmap", "srcBitmap");
        // Create the bitmap from file
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = (int) maxRatio;
        srcBitmap = BitmapFactory.decodeStream(is, null, options);
        Log.e("Create Bitmap", "Creating new bitmap");
    } else {
        srcBitmap = BitmapFactory.decodeStream(is);
    }
    is.close();

    /*
     * if the orientation is not 0 (or -1, which means we don't know), we
     * have to do a rotation.
     */
    if (orientation > 0) {
        Matrix matrix = new Matrix();
        matrix.postRotate(orientation);

        srcBitmap = Bitmap.createBitmap(srcBitmap, 0, 0, srcBitmap.getWidth(),
                srcBitmap.getHeight(), matrix, true);
    }

    String type = context.getContentResolver().getType(photoUri);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    if (type.equals("image/png")) {
        srcBitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
    } else if (type.equals("image/jpg") || type.equals("image/jpeg")) {
        srcBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    }
    byte[] bMapArray = baos.toByteArray();
    baos.close();
    return bMapArray;
}

public static int getOrientation(Context context, Uri photoUri) {
    /* it's on the external media. */
    Cursor cursor = context.getContentResolver().query(photoUri,
            new String[] { MediaStore.Images.ImageColumns.ORIENTATION }, null, null, null);

    if (cursor.getCount() != 1) {
        return -1;
    }

    cursor.moveToFirst();
    return cursor.getInt(0);
}
 } 
```

那么我做错了什么，我在网上尝试了很多不同的解决方案，但没有任何效果。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:08:17.230

图像的方向存储为 EXIF 数据。您似乎没有将 EXIF 数据从原始位图复制到缩放位图。

您可以使用[ExifInterface](http://developer.android.com/reference/android/media/ExifInterface.html)将相关信息从旧位图复制到新位图中。

# java - Eclipse Juno 的内容辅助将所有内容显示两次

> ID：11617514
> 
> 赞同：2
> 
> 时间：2012-07-23T17:33:11.243
> 
> 标签：java, eclipse, configuration

我刚刚安装了 Eclipse Juno 并接下来配置了内容辅助：

![在此处输入图像描述](../Images/8c4a610b3f80224fc7fce93c999aa70c.png)

现在一切都出现了两次：

![在此处输入图像描述](../Images/b851ad29608bc2bfbca637cc5ef34202.png)

**有人知道正确的配置吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T20:01:08.487

Java 提案“种类”包含 Java 类型提案和 Java 非类型提案。要么删除 Java 提案，要么删除其他两个提案，然后应该解决重复问题。

# python - pamie 如何访问框架集中的变量

> ID：11617520
> 
> 赞同：0
> 
> 时间：2012-07-23T17:33:46.503
> 
> 标签：python, html, frame, pamie, frameset-iframe

我的问题是关于访问包含在框架集中的框架所以就像那样

```
IFRAME 
 \
   FRAMESET
           \FRAMESET
                   \
                    FRAME 
```

我已经非常努力地解决它，但我只能访问 iframe，它会自动访问 FRAMESET 但仍然找不到访问最后一帧的方法！

所以让我们看看 pamie ：

```
self.frameName = None               # The current frame name or index. Nested frames are
                                    # supported in the format frame1.frame2.frame3 
```

我不明白说`supported in the format`..etc是什么意思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:43:32.583

```
ieobj.Document.Frames[framName].document.Frames[innerFrame] 
```

设定值

```
ieobj.Document.Frames[framName].document.Frames[innerFrame].document.forms[myForm][textBox].value="someval" 
```

# java - PayPal 的未知主机异常

> ID：11617521
> 
> 赞同：1
> 
> 时间：2012-07-23T17:33:47.857
> 
> 标签：java, api, paypal, unknown-host

我正在尝试使用 PayPal 按钮管理器 API。每次运行文件时，无论调用类型如何，都会得到以下错误输出：

```
run:
Request sent to PayPal: USER=xxxxxxxxxxxxxxx&PWD=xxxxxxxxx&SIGNATURE=xxxxxxxxxxxx&METHOD=BMButtonSearch&VERSION=59.0&STARTDATE=2012-10-11T00:00:00Z&ENDDATE=2012-10-11T00:00:00Zjava.net.UnknownHostException: sandbox.paypal.com/cgi-bin/webscr
    at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
    at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:866)
    at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1258)
    at java.net.InetAddress.getAllByName0(InetAddress.java:1211)
    at java.net.InetAddress.getAllByName(InetAddress.java:1127)
    at java.net.InetAddress.getAllByName(InetAddress.java:1063)
    at java.net.InetAddress.getByName(InetAddress.java:1013)
    at BM_ButtonSearch.main(BM_ButtonSearch.java:48)
BUILD SUCCESSFUL (total time: 0 seconds) 
```

我的课程代码如下：

```
import java.net.*;
import javax.net.ssl.*;
import java.io.*;
import java.security.MessageDigest;
import java.util.Date; 

public class BM_ButtonSearch { 

   public static void main(String[] args) {
      try {
         //String hostname = "paypal.com/cgi-bin/webscr"; //Set as host if live
         String hostname = "sandbox.paypal.com/cgi-bin/webscr"; //Set as host if testing
         // Set variables for PayPal transaction
         String user = "xxxxxxxxxxxxxxxxxxxx"; //Set PayPal API username
         String password = "xxxxxxxxxxx"; //API password, not acct password
         String signature = "xxxxxxxxxxxxxxxxxxx"; //Set unique user signature
         String method = "BMButtonSearch"; //Set Button Manager button type
         String version = "59.0"; //Set Button Manager Version as ##.#
         String startdate = "2012-10-11T00:00:00Z"; //Set start date using YYYY-MM-DDTHH:MM:SSZ
         String enddate = "2012-10-11T00:00:00Z"; //Set end date using YYYY-MM-DDTHH:MM:SSZ

         String requestID = "";
         MessageDigest md5 = MessageDigest.getInstance("MD5");
         byte[] md5summe = md5.digest(new Date().toString().getBytes()); 

         for (int it = 0; it < md5summe.length; it++) {
            String temp = Integer.toHexString(md5summe[it] & 0xFF);
            /*
             * toHexString has the side effect of making stuff like 0x0F
             * only one char F(when it should be '0F') so I check the length
             * of string
             */
            if (temp.length() < 2) {
               temp = "0" + temp;
            }
            requestID += temp.toUpperCase();
         } 

         // Build NVP String (currency string added, declare in variables)
         String paramNVP = "USER=" + user + "&PWD=" + password + "&SIGNATURE="
               + signature + "&METHOD=" + method + "&VERSION=" + version
               + "&STARTDATE=" + startdate + "&ENDDATE=" + enddate; 

         System.out.print("Request sent to PayPal: " + paramNVP); 

         // Create the SSL Socket
         int port = 443;
         InetAddress addr = InetAddress.getByName(hostname);
         SSLSocketFactory factory = (SSLSocketFactory) SSLSocketFactory.getDefault();
         SSLSocket sslsock = (SSLSocket) factory.createSocket(addr, port); 

         // Open Socket Output Stream
         String path = "/";
         BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(sslsock.getOutputStream(), "UTF8"));

         // Send data as a POST
         bw.write("POST " + path + " HTTP/1.0\r\n"); 

         // Write header info to the socket
         bw.write("Connection: close\r\n");
         bw.write("Content-Type: text/namevalue\r\n");
         bw.write("Content-Length: " + paramNVP.length() + "\r\n");
         bw.write("Host: " + hostname + "\r\n");
         bw.write("X-VPS-REQUEST-ID: " + requestID + "\r\n");
         bw.write("X-VPS-CLIENT-TIMEOUT: 240\r\n");
         // Sets the Payflow client IP variable
         // bw.write("PP_REMOTE_ADDR: 192.168.0.123\r\n");
         bw.write("\r\n"); 

         // Write the NVP String to the Socket
         bw.write(paramNVP);
         // Flush the stream
         bw.flush(); 

         // Read the Socket response
         BufferedReader br = new BufferedReader(new InputStreamReader(
               sslsock.getInputStream()));
         String line;
         while ((line = br.readLine()) != null) {
            System.out.println(line);
         }

         // Close the writer, reader, and the socket
         bw.close();
         br.close();
         sslsock.close();
      } 

      catch (Exception e) {
         e.printStackTrace(System.out);
      }
   } // end main()
}// end class SocketTest 
```

任何帮助，将不胜感激。我看到大多数人建议尝试通过浏览器访问 URL，这在我的情况下是有效的，只是在使用我的 java 类时不行。

提前致谢！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:36:22.070

`sandbox.paypal.com/cgi-bin/webscr`不是主机名。您的主机名应该只是`sandbox.paypal.com`. 此外，您的路径应该是`/cgi-bin/webscr`，而不是`/`。

也可以看看：

*   [InetAddress.getByName](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29)

# c# - 如何重用 TCP 客户端？

> ID：11617523
> 
> 赞同：3
> 
> 时间：2012-07-23T17:33:59.090
> 
> 标签：c#, tcp, tcpclient, system.net.sockets

在与多线程和套接字消耗的兼容性方面，我遇到了 System.Net.WebRequest 和 System.Net.HttpRequest 的问题。我试图降低一个级别并推出我自己的简单 Http 类。

由于之前的问题是每个线程太快地创建了太多的套接字，我试图在多次迭代（一个 for 循环）中使用一个套接字（每个线程 1 个）。

**代码：**

我的测试类（有硬编码的 ip 和端口，直到我可以让它工作）：

```
public sealed class Foo : IDisposable {

        private string m_ip = "localhost";
        private int m_port = 52395;
        private TcpClient m_tcpClient;

        public Foo() {
            m_tcpClient = new TcpClient( m_ip, m_port );
        }

        public void Execute() {
            using( var stream = m_tcpClient.GetStream() )
            using( var writer = new StreamWriter( stream ) )
            using( var reader = new StreamReader( stream ) ) {
                writer.AutoFlush = true;
                // Send request headers
                writer.WriteLine( "GET /File HTTP/1.1" );
                writer.WriteLine( "Host: " + m_ip + ":" + m_port.ToString() );
                writer.WriteLine( "Connection: Keep-Alive" );
                writer.WriteLine();
                writer.WriteLine();

                // Read the response from server
                string response = reader.ReadToEnd();
                Console.WriteLine( response );
            }
        }    

        void IDisposable.Dispose() {
            m_tcpClient.Client.Dispose();
        }
    } 
```

静态无效主要：

```
using( Foo foo = new Foo() ) {
    for( int i = 0; i < 10; i++ ) {
        foo.Execute();
    }
} 
```

**错误**

我收到的错误是`The operation is not allowed on non-connected sockets.`在 for 循环的第一次迭代成功完成之后。

我了解错误的原因，（读取响应后`TcpClient.Client`关闭），但我不知道如何明确告诉套接字保持打开状态。

**编辑** 进一步检查我从其中包含的服务器返回的 HTTP 响应`Connection: Close`。我假设因为这是原始 TCP，所以它不会解析 HTTP。这可能是问题的根源吗？（如果是有没有办法忽略它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:39:04.400

更改*main*方法中的顺序，因此每次迭代都会创建一个新对象

```
for( int i = 0; i < 10; i++ ) 
{
    using( Foo foo = new Foo() ) 
    {
        foo.Execute();
    }
} 
```

* * *

如果你想保持你的套接字打开，你需要稍微重构你的应用程序，这样它就不会`Dispose`在一次迭代后调用，例如

```
public sealed class Foo : IDisposable {    
    private string m_ip = "localhost";
    private int m_port = 52395;
    private TcpClient m_tcpClient;

    private Stream stream;
    private StreamWriter writer;
    private StreamReader reader;

    public void Execute() {         
        // Send request headers
            ...    
        // Read the response from server                
    }   

    void Open(){
        m_tcpClient = new TcpClient( m_ip, m_port );
        stream = m_tcpClient.GetStream();
        writer = new StreamWriter( stream );
        reader = new StreamReader( stream );
    }   

    void Close() {
        m_tcpClient.Client.Dispose();
        reader.Dispose();
        writer.Dispose();
        stream.Dispose();
    }

    //Plus Dispose implementation
} 
```

这是用法

```
using( Foo foo = new Foo() ) {
    foo.Open();
    for( int i = 0; i < 10; i++ ) {
        foo.Execute();
    }
    foo.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:47:43.387

我认为您对 KeepAlive 的实施不太正确。当您关闭流时，您正在关闭底层套接字。将您的流创建移动到构造函数。

```
public Foo() 
{
    m_tcpClient = new TcpClient( m_ip, m_port );
    m_tcpStream = m_tcpClient.GetStream();
} 
```

然后让它们都保持活动状态，直到整个对象关闭：

```
 void IDisposable.Dispose() 
    {
        m_tcpStream.Close();
        m_tcpClient.Client.Dispose();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:02:20.527

当 first`Execute`被调用时，`using`closes(disposes) `m_tcpClient`。你不需要`using`那些

```
using( var stream = m_tcpClient.GetStream() ) 
```

# objective-c - 如何使用新的 iOS SDK 3 扩展访问令牌？

> ID：11617530
> 
> 赞同：0
> 
> 时间：2012-07-23T17:34:22.000
> 
> 标签：objective-c, ios, facebook, facebook-ios-sdk

使用新的 iOS SDK 3.0，如何扩展访问令牌？这还有必要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:15:50.243

Facebook SDK 自己处理它。

您可以随时访问它，如下所示：

```
NSString *accessToken = [FBSession activeSession].accessToken; 
```

如果没有设置令牌，这将返回 accessToken 或 nil。您甚至可以在会话上定义令牌缓存规则集。享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:37:45.543

我认为当您使用 FBSession 时，它会在内部处理它。

# jquery - jQuery Mobile：所有平台的滚动事件

> ID：11617533
> 
> 赞同：1
> 
> 时间：2012-07-23T17:34:47.840
> 
> 标签：jquery, scroll

我正在寻找适用于所有平台的 jQuery-Mobile 事件。

```
$(document).bind('scrollstop', function () {}); 
```

此代码适用于个人电脑，但不适用于我的 iPhone。（可笑的是，它适用于 iOS 版 Chrome，但不适用于 iPhone-Safari ......）

所以，我的问题是：是否有适用于 iOS**和**Android 的滚动事件的有效实现？

# jquery - JQuery - 使用 CsTransPie 在输入 [type=file] 中自定义大小

> ID：11617536
> 
> 赞同：0
> 
> 时间：2012-07-23T17:35:08.417
> 
> 标签：jquery, file-io

如何自定义大小输入：使用[CsTransPie](http://www.pkoretic.net/csTransPie/file.html)的文件？

试过了，但没有运气：

```
$("#SomeID").css('width','470px'); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:47:27.867

修改 CTP 创建的元素的宽度。

```
$("#SomeID").closest("span").find(".cTPFileInput").css("width","470px"); 
```

# c# - Web 浏览器 Win 表单控制登录 向 facebook 注册应用程序

> ID：11617541
> 
> 赞同：0
> 
> 时间：2012-07-23T17:35:35.897
> 
> 标签：c#, facebook, winforms, facebook-login, autologin

我正在将 Web 浏览器控件用于 win 表单应用程序。

我正在尝试注册一个应用程序抛出 Facebook 登录\应用程序注册。

我的问题是，首先身份验证过程会弹出登录名，然后出现一系列重定向，我似乎无法遵循......

有人做过吗？

在此处尝试登录 INetGiant 时可以查看示例流程：

[http://www.inetgiant.com/user/login](http://www.inetgiant.com/user/login)

我该怎么做？

这是一些代码：

```
 /// <summary>
    /// Grabs an add from the ad table.
    /// </summary>
    private void GrabAnAdFromTheAdsTableAndHrefToLoginInFacebook()
    {
        HtmlElement adTd = Document.GetElementFromPoint(FirstAdPosition);

        AdContent = adTd.InnerHtml;

        ProcessBrowser.Navigate(Resources.FacebookLoginURL);
    }

    private void LoginToFacebook()
    {
        HtmlElement form = Document.GetElementById("login_form");

        if (form == null)
        {
            return;
        }

        HtmlElement email = Document.GetElementById("email");
        HtmlElement password = Document.GetElementById("pass");

        if (email != null)
        {
            email.SetAttribute("value", this.UserNameForFacebook);
        }

        if (password != null)
        {
            password.SetAttribute("value", this.PasswordForFacebook);
        }

        form.InvokeMember("submit");
    }

    private void LoginToFacebookAndHrefToLoginInInetGiant()
    {
        LoginToFacebook();

        if (!_beforeRegisterToInetGiantWithFacebook)
        {
            LoadingTimer.Tick += new EventHandler(OnFacebookLoginPageLoad);
            LoadingTimer.Start();
        }
    }

    private void OnFacebookLoginPageLoad(object sender, EventArgs e)
    {
        LoadingTimer.Stop();
        LoadingTimer.Tick -= new EventHandler(OnFacebookLoginPageLoad);
        LoadingTimer.Enabled = false;

        ProcessBrowser.Navigate(Resources.InetgiantLoginURL);
    } 
```

# c++ - C++ - 将 null 分配给 std::string

> ID：11617552
> 
> 赞同：44
> 
> 时间：2012-07-23T17:36:27.713
> 
> 标签：c++, string, pointers, null

我正在自学 C++。我有以下代码，但它给出了错误。

```
#include <iostream>
#include <string>
using namespace std;

int setvalue(const char * value)
{
    string mValue;
    if(value!=0)
    {
       mValue=value;
    }
    else
    {
       mValue=0;
    }
}

int main ()
{
 const char* value = 0;
 setvalue(value);

 cin.get();
 return 0;
} 
```

所以想创建一个接受 char 指针的函数，我想将指针传递给它。该函数将指针分配给其成员变量。我故意传递一个空指针。以下是我得到的错误：

```
 D:\CPP\TestCP.cpp In function `int setvalue(const char*)': 

 note C:\Dev-Cpp\include\c++\3.4.2\bits\basic_string.h:422 candidates are: std::basic_string<_CharT, _Traits, _Alloc>& std::basic_string<_CharT, _Traits, _Alloc>::operator=(const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>] 

 note C:\Dev-Cpp\include\c++\3.4.2\bits\basic_string.h:422                 std::basic_string<_CharT, _Traits, _Alloc>& std::basic_string<_CharT, _Traits, _Alloc>::operator=(const _CharT*) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>] 

 note C:\Dev-Cpp\include\c++\3.4.2\bits\basic_string.h:422                 std::basic_string<_CharT, _Traits, _Alloc>& std::basic_string<_CharT, _Traits, _Alloc>::operator=(_CharT) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>] 
```

它基本上是在抱怨 line: mValue=0;

为什么抱怨这条线？我不能为字符串分配空值？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-23T17:39:35.387

> 我不能为字符串分配空值？

No. `std::string`不是指针类型；它不能设为“null”。它不能表示没有值，这是用空指针表示的。

可以通过为它分配一个空字符串（*或*`s = ""`）`s = std::string()`或清除它（`s.clear()`）来使其为空。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-23T17:41:12.183

您不能将`NULL`或分配`0`给 C++`std::string`对象，因为该对象不是指针。这是与 C 风格字符串的一个关键区别。C 风格的字符串可以是`NULL`或有效的字符串，而 C++`std::string`总是存储一些值。

对此没有简单的解决方法。如果您想保留一个标记值（例如，空字符串），那么您可以执行类似的操作

```
const std::string NOT_A_STRING = "";

mValue = NOT_A_STRING; 
```

或者，您可以存储指向字符串的指针，以便将其设置为 null：

```
std::string* mValue = NULL;

if (value) {
    mValue = new std::string(value);
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-23T17:39:08.290

文字`0`是类型`int`，您不能分配`int`给`std::string`. 使用`mValue.clear()`或分配一个空字符串`mValue=""`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-27T08:33:51.460

我不会争辩说这是一个*好*主意（或与不是*指针*`nullptr`的事物一起使用的语义），但创建一个提供“可为[空](https://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)”语义的类相对简单（参见[nullable_string](http://ideone.com/nYJR5M)）。

 *但是，这更适合 C++17 的[std::optional](http://en.cppreference.com/w/cpp/utility/optional)：

```
#include <string>
#include <iostream>
#include <optional>

// optional can be used as the return type of a factory that may fail
std::optional<std::string> create(bool b)
{
    if (b)
        return "Godzilla";
    else
        return {};
}

int main()
{
    std::cout << "create(false) returned "
              << create(false).value_or("empty") << std::endl;

    // optional-returning factory functions are usable as conditions of while and if
    if (auto str = create(true))
    {
        std::cout << "create(true) returned " << *str << std::endl;
    }
} 
```

`std::optional`，如示例中所示，可转换为`bool`，或者您可以使用该`has_value()`方法，具有错误访问的异常等。这为您提供了可为空的语义，这似乎是[Maria](https://stackoverflow.com/users/1546511/maria)试图完成的。

如果您不想等待 C++17 兼容性，[请参阅有关 Boost.Optional 的答案](https://stackoverflow.com/a/6884585/1136311)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-07T12:30:04.003

有两种方法需要考虑，它们在处理指向 C 样式字符串的空指针时达到相同的效果。

三元运算符

```
void setvalue(const char *value)
{
    std::string mValue = value ? value : "";

} 
```

或不起眼的 if 语句

```
void setvalue(const char *value)
{
    std::string mValue;
    if(value) mValue = value;

} 
```

在这两种情况下，`value`只分配给*when 不是*`mValue`空`value`指针。在所有其他情况下（即何时*为*空），将包含一个空字符串。*`value` *`mValue`**

 **在缺少 from 的值的情况下，三元运算符方法可能有助于提供替代的默认字符串文字`value`：

```
std::string mValue = value ? value : "(NULL)"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T17:41:37.107

这种`else`情况是不必要的，当您创建一个`string`对象时，默认情况下它是空的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-06T15:48:48.370

许多 C API 使用空指针来指示“使用默认值”，例如[mosquittopp](https://mosquitto.org/api/files/mosquitto-h.html)。这是我正在使用的模式，基于[David Cormack](https://stackoverflow.com/users/2050744/david-cormack)的回答：

```
 mosqpp::tls_set(
        MqttOptions->CAFile.length() > 0 ? MqttOptions->CAFile.c_str() : NULL,
        MqttOptions->CAPath.length() > 0 ? MqttOptions->CAPath.c_str() : NULL,
        MqttOptions->CertFile.length() > 0 ? MqttOptions->CertFile.c_str() : NULL,
        MqttOptions->KeyFile.length() > 0 ? MqttOptions->KeyFile.c_str() : NULL
    ); 
```

这有点麻烦，但允许`std::string`在 API 调用本身之前保持一切。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-14T19:18:19.580

编译器给出错误，因为在分配 mValue=0 时编译器找到赋值运算符 =(int ) 用于编译时绑定，但它不存在于字符串类中。如果我们像 mValue=(char)0 这样将以下语句键入到 char 中，那么它的编译成功，因为 string 类包含 operator=(char) 方法。***

# objective-c - RKObject 子类化

> ID：11617555
> 
> 赞同：1
> 
> 时间：2012-07-23T17:36:49.300
> 
> 标签：objective-c, ios, xcode, restkit

我刚开始使用 RestKit，在尝试创建 RKObject 子类时遇到了问题；显然，没有找到这样的类，但这个例子[http://mobile.tutsplus.com/tutorials/iphone/restkit_ios-sdk/](http://mobile.tutsplus.com/tutorials/iphone/restkit_ios-sdk/)展示了如何制作它。我安装了它，它似乎工作正常。

所以我想知道该课程是否已被删除并且有替代方案还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:06:30.193

是的，RKObject 已被移除。[这](https://groups.google.com/forum/?fromgroups#!topic/restkit/ACaAQdWl-po)是同一问题的答案。

# android - 当 Activity 在进程被杀死后重新创建时，Fragments backstack 是否也恢复了？

> ID：11617559
> 
> 赞同：5
> 
> 时间：2012-07-23T17:37:04.450
> 
> 标签：android, android-fragments

由于碎片回栈是由宿主活动管理的，如果这个活动被系统销毁（因为系统需要更多的内存在其他地方）并在用户回来之后重新创建，碎片回栈状态是否也会被重新创建？系统？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T17:47:34.520

我不相信默认情况下会保存片段回栈。但是，您可以请求添加它：

```
FragmentTransaction.addToBackStack() 
```

# iphone - 限制来电 iphone 应用程序

> ID：11617566
> 
> 赞同：-4
> 
> 时间：2012-07-23T17:37:28.987
> 
> 标签：iphone, ios, core-telephony

我想创建一个 iPhone 应用程序来限制来自给定电话号码的来电和短信。

电话不会响铃或点亮屏幕。当收到来自该号码的呼叫时，它根本不会做任何事情。此外，在最近的通话列表中，该号码不应该出现。当用户打开我的应用程序时，它会显示黑名单号码。

这有可能开发吗，苹果会批准吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:40:02.567

不，您不能以任何方式干扰电话或短信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:40:24.767

绝对没有办法做到这一点，并且仍然在 App Store 中被接受。Apple 提供的任何 API 都不能做这样的事情。我不知道我还能说什么来回答这个问题。

也许[Core Telephony](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html)会帮助您采取不同的方法。甚至你可以做的一些事情可能会阻止你的应用程序被 App Store 接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:42:37.067

首先，我认为甚至不可能拦截来电。所有进程都分配有优先级，电话是最高优先级之一（比标准应用程序更重要），因此应用程序不能中断更高优先级的进程。

其次，应用程序不可能拦截来电（或短信），因为这是一个主要的安全漏洞。您的应用程序只能访问其沙箱的内容（以及一些共享目录，例如照片）。

# python - 脚本运行时安装包和插件——Python？

> ID：11617571
> 
> 赞同：1
> 
> 时间：2012-07-23T17:37:57.680
> 
> 标签：python, installation

我见过许多 GUI 应用程序，当启动时，会检查系统中的某些包和插件，如果它们不存在，它会自动安装它们。如何在我的 GUI 在 python 中启动之前对其执行相同的操作？我可以在 .sh 脚本或某种控制台脚本中执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:49:04.970

来自[https://stackoverflow.com/a/4529027/1413321](https://stackoverflow.com/a/4529027/1413321)：

```
from pkg_resources import WorkingSet , DistributionNotFound
working_set = WorkingSet()

# Printing all installed modules
print tuple(working_set)

# Detecting if module is installed
try:
    dep = working_set.require('paramiko>=1.0')
except DistributionNotFound:
    pass

# Installing it (anyone knows a better way?)
from setuptools.command.easy_install import main as install
install(['django>=1.2']) 
```

# css - 文本逐渐向下移动，不再与文本框顶部齐平

> ID：11617573
> 
> 赞同：0
> 
> 时间：2012-07-23T17:38:02.287
> 
> 标签：css, asp.net-mvc

我在页面上有一系列标签和输入框/选择列表。对于每一行，标签从输入框/选择列表的顶部移动一点。我希望标签的顶部与每一行的输入框顶部齐平。

我确定它与 CSS 相关，但我需要更改什么来解决此问题？

这说明了问题。在顶部，您可以看到文本与框对齐，但每行都从顶部移开一点。![图片](../Images/fb869383c5e8d113d0bdc63fd03fdbcf.png)

这显示了应用于标签的 CSS。![图片](../Images/a32bcb5ff7da1573a97a11ac3566164e.png)

这显示了应用于选择列表的 CSS。两者都在顶部的第 5 项。 ![图片](../Images/dc0334f246bdd06954cab746a3cd3e54.png)

这是每一行的典型 HTML...

```
 <div class="editor-label">
        <label for="DOB">DOB</label>
    </div>
    <div class="editor-field">
        <input class="text-box single-line" data-val="true" data-val-date="The field DOB must be a date." data-val-required="The DOB field is required." id="DOB" name="DOB" type="date" value="1/23/1945" />
        <span class="field-validation-valid" data-valmsg-for="DOB" data-valmsg-replace="true"></span>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:50:47.153

看起来您没有在标签或字段上设置高度或行高。我相信您需要同时指定高度和行高，以便每个都占用相同数量的垂直空间。

# javascript - Javascript 的参考问题

> ID：11617575
> 
> 赞同：0
> 
> 时间：2012-07-23T17:38:10.133
> 
> 标签：javascript, jquery

我有一个使用 JS 数组缓存在客户端的对象数组。

```
var scannerDictionary = new Array();            //Holds all scanners unmodified
var modifiedScannerDictionary = new Array();    //Holds all scanners with modified values 
```

使用 GUI 设置/更改每个对象的属性并在对象中更新。每个对象都包含 InputParameters 列表（包含 Name、Value 和其他成员的 Parameter 类数组）。

请看一下GUI。

![在此处输入图像描述](../Images/c45eb7339020617a36a997710629e103.png) ![在此处输入图像描述](../Images/05bdb90e2fd1cedc22716f0f4ad6f195.png) ![在此处输入图像描述](../Images/5a8e2046b6b6fdb3eefdedf6705a7f56.png) ![在此处输入图像描述](../Images/8e9b3f5a73830f906f4656f81bef91db.png)

下面是我用来呈现控件的代码 -

```
function renderControls(scannerId) {
        var currentScanner = modifiedScannerDictionary[scannerId];

        //Render Input Parameters
        $("#tblInputCriteria").find('tr:gt(5)').remove();
        for(var i=0;i<currentScanner.InputParameters.length;i++) {
            var propType = currentScanner.InputParameters[i].DataType;
            var inParName = currentScanner.InputParameters[i].Name;

            switch(propType) {
                case 0: //Number
                    var eRow1 = $("#tblInputCriteria").find('#emptyNumRow').clone();
                    $(eRow1).removeClass('hidden').attr('id', 'Row_'+currentScanner.InputParameters[i].Name);
                    $(eRow1).appendTo($('#tblInputCriteria'));
                    var prop1 = $(eRow1).find('#InNumPropName');
                    $(prop1).attr('id', 'InNumPropName_'+currentScanner.InputParameters[i].Name);
                    var propName1 = currentScanner.InputParameters[i].Name;
                    $(prop1).html(propName1);
                    var propVal1 = $(eRow1).find('#InNumPropValue');
                    $(propVal1).attr('id', 'InNumPropValue_'+currentScanner.InputParameters[i].Name);
                    $(propVal1).val(currentScanner.InputParameters[i].Value);
                    $(propVal1).blur(function () {
                        if(!ValidateNumber(this, propName1)) {
                            alert('Value should be numeric in ' + propName1);
                            setTimeout(function() {$(propVal1).focus();}, 100);
                        }else {
                            UpdateData(currentScanner.Id, propName1, $(propVal1).val());
                        }
                    });

                    break;
                case 1: //String
                    var eRow2 = $("#tblInputCriteria").find('#emptyStrRow').clone();
                    $(eRow2).removeClass('hidden').attr('id', 'Row_'+currentScanner.InputParameters[i].Name);
                    $(eRow2).appendTo($('#tblInputCriteria'));
                    var prop2 = $(eRow2).find('#InStrPropName');
                    $(prop2).attr('id', 'InStrPropName_'+currentScanner.InputParameters[i].Name);
                    var propName2 = currentScanner.InputParameters[i].Name;
                    $(prop2).html(propName2);
                    var propVal2 = $(eRow2).find('#InStrPropValue');
                    $(propVal2).attr('id', 'InStrPropValue_'+currentScanner.InputParameters[i].Name);
                    $(propVal2).val(currentScanner.InputParameters[i].Value);
                    $(propVal2).blur(function () {
                        UpdateData(currentScanner.Id, propName2, $(propVal2).val());
                    });
                    break;
                case 2: //Boolean
                    var eRow3 = $("#tblInputCriteria").find('#emptyBoolRow').clone();
                    $(eRow3).removeClass('hidden').attr('id', 'Row_'+currentScanner.InputParameters[i].Name);
                    $(eRow3).appendTo($('#tblInputCriteria'));
                    var prop3 = $(eRow3).find('#InBoolPropName');
                    $(prop3).attr('id', 'InBoolPropName_'+currentScanner.InputParameters[i].Name);
                    var propName3 = currentScanner.InputParameters[i].Name;
                    $(prop3).html(propName3);
                    var propVal3 = $(eRow3).find('#InBoolPropValue');
                    $(propVal3).attr('id', 'InBoolPropValue_'+currentScanner.InputParameters[i].Name);
                    $(propVal3).val(currentScanner.InputParameters[i].Value);
                    $(propVal3).blur(function () {
                        UpdateData(currentScanner.Id, propName3, $(propVal3).val());
                    });
                    break;
    }
}
} 
```

问题：这里的问题是开关内部的变量作为参考变量。因此，该`UpdateData()`函数获取相似类型属性的姓氏。即如果字段是数字类型，则只有最后一个属性通过`UpdateData()`方法更新。

谁能帮我解决这个问题。感谢您分享您的时间和智慧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:32:21.753

尝试类似以下的操作。它有点矫枉过正，但会将变量的值绑定到闭包。

```
var fnOnBlur = (function(thePropName, thePropVal) {
    return function () {
        if(!ValidateNumber(this, thePropName)) {
            alert('Value should be numeric in ' + thePropName);
            setTimeout(function() {$(thePropVal).focus();}, 100);
        }else {
            UpdateData(currentScanner.Id, thePropName, $(thePropVal).val());
        }
    };
})(propName1, propVal1);
$(propVal1).blur( fnOnBlur ); 
```

Felik King 提供的链接有更详细的讨论。

# python - Django 安装 - virtualenv.py 出错

> ID：11617576
> 
> 赞同：1
> 
> 时间：2012-07-23T17:38:16.053
> 
> 标签：python, django, virtualenv

我正在尝试为我的 django 站点创建一个虚拟环境。命令如下。但它说“你必须提供一个 DEST_DIR”，尽管我给了目录名称“SOWL”。

virtualenv.py SOWL --no-site-packages

[http://screencast.com/t/rej893zrg](http://screencast.com/t/rej893zrg)

我为此花了半天时间。我在谷歌搜索上也找不到任何东西。任何帮助深表感谢。

谢谢，SHM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:47:45.060

我认为你的参数只是乱序。你试过了吗

virtualenv.py --no-site-packages SOWL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:11:22.880

乍一看，您的命令不正常；标志在前，目录在后。然而，这似乎并不重要；当您运行该命令时，它适用于我在 Mac 和 Windows 上。

我猜问题出在您安装的 virtualenv 上。Virtualenv 也是那些似乎永远不会更新的工具之一。确保你有最新的。`pip`使用（首选）安装，或者如果您需要实际`virtualenv.py`文件，请按照[此处](http://pypi.python.org/pypi/virtualenv/)的说明进行安装。

**更新**这是一个 install-Python-in-Windows 指南。我知道您已经拥有 Python，但这将确保您的 PATH 已设置并获得 PIP 和 Virtualenv。

1.  使用 Windows 安装程序安装[Python](http://www.python.org/download/)
2.  [将此添加](http://pythoncentral.org/how-to-install-python-2-7-on-windows-7-python-is-not-recognized-as-an-internal-or-external-command/)到您的 PATH 环境变量中：`C:\Python27\;C:\Python27\Scripts\`
3.  通过下载文件获取[分发。](http://pypi.python.org/pypi/distribute)`distribute_setup.py`（没有 Windows 安装程序；脚本可以完成所有工作。）
4.  通过下载文件获取[PIP 。](http://www.pip-installer.org/en/latest/installing.html)`get-pip.py`
5.  `python distribute_setup.py`
6.  `python get-pip.py`
7.  `pip install virtualenv`

现在你已经设置了**virtualenv**。然而还有更多[——virtualenvwrapper](http://virtualenvwrapper.readthedocs.org/en/latest/index.html)让生活变得轻松。它仅适用于 bash shell，但这里有一个 Windows[端口](https://github.com/davidmarble/virtualenvwrapper-win)。有安装说明、提示和包装器为您提供的漂亮新命令的概要。

1.  `pip install virtualenvwrapper-win`
2.  `pyassoc`
3.  创建一个新的环境变量：`WORKON_HOME=%USERPROFILE%\Envs`

现在您可以这样做来创建您的 virtualenv（并注意提示更改以指示您所在的环境）：

```
mkvirtualenv --distribute SOWL
>>>(SOWL) C:\Users\User> 
```

# android - Robolectric：如何将语言环境指定为 en-US 或 fr 以测试字符串格式？

> ID：11617581
> 
> 赞同：1
> 
> 时间：2012-07-23T17:38:39.463
> 
> 标签：android, robolectric

在测试中，我们要测试英语和法语的字符串格式。如何在 robolectric 中指定语言环境？

这篇文章中的方法不起作用： [Change language programmatically in Android](https://stackoverflow.com/questions/2900023/change-language-programatically-in-android)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T22:41:06.240

Robolectric 现在包含一个`@Config`注释，您可以将其放在单元测试中以指定此类内容。请参阅[此处](http://robolectric.blogspot.com/2013/05/configuring-robolectric-20.html)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:13:12.330

以下是单元测试涉及语言环境时所做的事情：

1.  从 Robolectric 获取上下文
2.  使用上下文获取字符串（单数/复数形式）直接构造预期的字符串。
3.  根据返回字符串的方法的输出检查它。

# windows - 让 Windows 8 UI 控件填充整个水平空间

> ID：11617582
> 
> 赞同：1
> 
> 时间：2012-07-23T17:38:43.640
> 
> 标签：windows, xaml, visual-c++, windows-8, microsoft-metro

对于 Windows 8 Metro 应用程序，我在主 Grid 内的 Canvas 内有一个 Rectangle，这样：

```
<Grid>
...
  <Canvas>
    <Rectangle />
    ...
  </Canvas>
</Grid> 
```

如何使矩形动态占据屏幕的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:36:38.177

Canvas 不会限制或更改其子项的大小或位置。如果您希望矩形与屏幕宽度一样长，我建议将其放在网格内，因为网格具有矩形所需的大小（使用 Horizo​​ntalAlignment="Strech"）。或者您可以将 Rectangle.Width 绑定到 Grid.ActualWidth。

# php - 如果我要与远程 mysql 数据库建立安全连接，是否需要两台服务器上的证书

> ID：11617594
> 
> 赞同：3
> 
> 时间：2012-07-23T17:39:32.247
> 
> 标签：php, mysql, ssl

我需要使用 php 与远程 mysql 数据库建立安全连接。我需要在两台服务器上安装 ssl 证书吗？或者只是在我有mysql数据库的服务器上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:42:17.933

这取决于您要保护的内容。

如果要保护用户代理（浏览器）与 Web 服务器之间的通信，则需要在 Web 服务器上设置证书。

如果要保护 Web 服务器（DB 客户端）和 MySQL 服务器之间的通信，则需要在 MySQL 服务器上设置证书。

此外，您可以使 MySQL 客户端（您的 PHP 脚本）使用客户端证书向 MySQL 服务器进行身份验证。如果足够考虑 MySQL 用户名/密码，这可能不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:42:02.997

如果您想从脚本连接到数据库，证书仅驻留在 MYSQL 服务器端。您的数据库服务器永远不会启动与您的 Web 代码的连接，因此 Web 端不需要用于数据库通信的证书。如果您想保护客户端浏览器与数据库之间的通信，那么您需要网站的证书以供客户端浏览器使用。

# playframework - 部署为 war 文件时如何运行 Play Framework 演变

> ID：11617599
> 
> 赞同：0
> 
> 时间：2012-07-23T17:39:51.327
> 
> 标签：playframework, playframework-1.x

将 Play Framework 1.2.x 应用程序部署为 war 文件时，有什么方法可以运行 Play Framework 演变？具体来说，我试图让我们的应用程序在 Amazon Elastic Beanstalk 架构上运行，而数据库演化部分是其中的关键组成部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:30:54.647

当您将应用程序打包到 WAR 文件中时，显然不支持它。有些人通过禁用进化并编写自己的插件来解决这个问题，无论您是处于 DEV 还是 PROD 模式，都会自动运行脚本。

# knockout.js - 在 Knockoutjs 级联下拉菜单中设置 OptionValue

> ID：11617601
> 
> 赞同：0
> 
> 时间：2012-07-23T17:39:58.033
> 
> 标签：knockout.js

有一个奇怪的问题，在我指定 optionsValue 之前一切正常。你可以在这里看到我的问题

**作品** [http://jsfiddle.net/abritez/ttyhE/2/](http://jsfiddle.net/abritez/ttyhE/2/)

**不起作用** [http://jsfiddle.net/abritez/ttyhE/4/](http://jsfiddle.net/abritez/ttyhE/4/)

您需要做的就是尝试使用注释的 select 运行它，您将在尝试级联时看到问题。

JSON数据

```
var productCategories = [{
"name": "Comapany A",
"abbr": "cA",
"disiplineList": [{
    "name": "Math",
    "abbr": "math",
    "courseList": [{
        "name": "Algebra",
        "abbr": "alg"
    }]
}, {
    "name": "English",
    "abbr": "eng",
    "courseList": [{
        "name": "Phonics",
        "abbr": "phon"
    }]
}]
}, {
"name": "Company B",
"abbr": "cB",
"disiplineList": [{
    "name": "Gym",
    "abbr": "gym",
    "courseList": [{
        "name": "Kick Ball",
        "abbr": "kb"
    }]
}]
}]; 
```

HTML 代码

```
<table width='100%'>
<tbody data-bind='foreach: lines'>
  <tr>
         <td>

            <select data-bind='options: productCategories, optionsText: "name",  optionsCaption: "Select...", value: company'> </select>

        </td>
    </tr>
    <tr>
         <td data-bind="with: company">
            <select data-bind='options: disiplineList, optionsText: "name", optionsCaption: "Select...", value: disipline'> </select>
        </td>
    </tr>
     <tr>
         <td data-bind="with: disipline">
            <select data-bind='options: courseList, optionsText: "name",  value: product'></select>
        </td>
    </tr>

</tbody>
</table> 
```

​ Java Script (knockoutjs)

```
function ProductLine(){
                    self.company = ko.observable();
                    self.disipline = ko.observable();
                    self.product = ko.observable();

                    // Whenever the category changes, reset the product selection
                    self.company.subscribe(function() {
                        self.disipline(undefined);
                        self.product(undefined);
                    });
                }

                function Product(){
                    self.lines = ko.observableArray([new ProductLine()]); // Put one line in by default
                }

                ko.applyBindings(new Product());​ 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:24:35.233

我还是不明白。

但是，如果您想显示姓名和*缩写*，您可以：

```
 <select data-bind='options: productCategories,
       optionsText: function(item) {return item.name + " - " + item.abbr},  optionsCaption: "Select...", value: company'> </select> 
```

如果你想显示你的*缩写*，你可以：

```
<td data-bind="with: company">
                            <select data-bind='options: disiplineList, optionsText: "name", optionsCaption: "Select...", value: disipline'> </select>
                             <span data-bind="text: abbr"/> <-- like this
                        </td> 
```

# flash - 如何获取 .swf 文件以立即开始播放？

> ID：11617604
> 
> 赞同：0
> 
> 时间：2012-07-23T17:40:03.027
> 
> 标签：flash, swfobject, swfloader, adobe-captivate

我有一些使用 adobe captivate 6 创建的培训视频。当我观看视频时，它们需要 10 到 60 秒才能加载，然后才会开始播放，然后才会出现在窗口中（文件范围从 1MB 到 5MB）。我正在使用 jquery 将它们加载到 jquery-ui 对话框中，并在文件完全下载后让浏览器开始播放。

我遇到的问题是在播放开始之前等待 .swf 完全下载。我希望它开始播放，然后在播放时继续下载，这样用户就不必等待很长时间才能看到一些东西。

像这样的视频培训对我来说是一个相对较新的领域，所以我真的不知道我的选择是什么......如果 .swf 不是要走的路，我有哪些使用 captivate 的选择？我尝试了 captviate 的 youtube 导出，但它调整了视频的大小以适合 youtube，并且使字体太小而无法阅读。

当我在 youtube 上观看视频时，它们会立即开始播放，但在观看时继续下载...我喜欢这个概念，并想知道是否可以使用我现有的 .swf 文件实现类似的效果。

这个问题有哪些选择和可能的解决方案？

在此先感谢您的帮助。

这是加载对话框的调用：

```
<span onclick="$('#popup_tutorial').dialog('option', 'position', 'top').dialog('option','title','Portfolios - Creating a new portfolio').load('tutorials/acctg_payments.php').dialog('widget').dialog('open');" class="a_link edit_link">View Tutorial</span> 
```

这是#popup_tutorial html：

```
<div id="popup_tutorial" style="text-align:left"></div>
<script type="text/javascript">
    $("#popup_tutorial").dialog({
        bgiframe: true,
        autoOpen: false,
        Height: 740,
        width: 900,
        modal: false,
        close: function () {$(this).empty();}
    });
</script> 
```

这是包含 .swf 代码并放置在 #popup_tutorial div 内的 .php 页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>

<script src="standard.js" type="text/javascript"></script>
</head>

<body   bgcolor="#f5f4f1">

    <div id="CaptivateContent">&nbsp;
    </div>
    <script type="text/javascript">
       var so = new SWFObject("acctg_payments_making.swf", "Captivate", "881", "720", "10", "#CCCCCC");
        so.addParam("quality", "high");
        so.addParam("name", "Captivate");
        so.addParam("id", "Captivate");
        so.addParam("wmode", "window");
        so.addParam("bgcolor","#f5f4f1");
        so.addParam("menu", "false");
        so.addParam("AllowScriptAccess","always");
        so.addVariable("variable1", "value1");
        so.setAttribute("redirectUrl", "http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash");
        so.write("CaptivateContent");
    </script>

    <script type="text/javascript">
        document.getElementById('Captivate').focus();
        document.Captivate.focus();
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:11:03.297

Captivate 和大多数 Flash 电影并不是像电影一样以线性方式构建，即使它们的某些内容可能会以这种方式出现。有大量的交互逻辑可供 SWF 播放。也就是说，您几乎可以看到它们就像 DLL、EXE、Java JAR 或 IPA (iphone)，在下载整个二进制文件之前无法运行。

也就是说，SWF 为内容开发人员提供了在 SWF 部分加载时运行和播放内容的方法，但是这取决于生成 SWF 的开发人员或生成此输出的程序的能力，通常它是非常复杂的大多数开发人员尚未达到的水平。在您的情况下，我认为 Captivate 不提供这种功能。

但是，如果你想实现它，你可以考虑将 Captivate 电影分成更小的电影并将它们链接在一起，但我怀疑 Captivate 会在当前电影播放时预加载下一部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-07T10:01:50.677

Captivate 6 和 7（可能还有 8 个）允许您确定在电影开始播放之前应该下载多少百分比的电影。我有一段时间没有使用 Captivate 6，所以我不记得它在 UI 中的确切位置，但在 Captivate 7 上，`Quiz -> Quiz Preferences`从主菜单中选择以打开首选项对话框。在那里你可以调整`preloader %`. 这是在播放开始前将被下载的电影的百分比。默认情况下，它设置为 100%，这可以解释为什么您的电影在完全下载之前不会开始。

以我的经验设置这个 % 将在某些设置中起作用，但在其他设置中不起作用。尽管如此，还是值得一试。

-帕特里克

# javascript - 根据 jQuery 中的当前值更改选项值

> ID：11617609
> 
> 赞同：0
> 
> 时间：2012-07-23T17:40:13.370
> 
> 标签：javascript, jquery

我有以下 HTML：

```
<select class="file_image_type" name="file_image_type">
        <option>Gallery</option>
        <option>Feature</option>
        <option>Thumbnail</option>
    </select> 
```

这是动态生成的，并为每个项目重复。由于只能有一个特征图像，因此每当将新图像选为“特征”时，我想重置任何标记为“特征”的选项值。

我试过这个 jQuery 但它似乎没有响应：

```
current.find(".file_image_type option[value='Feature']").val("Gallery"); 
```

我可以使用以下方法将图像设置为 Feature 就好了：

```
current.find(".file_image_type").val("Feature"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:43:49.657

“画廊”不是`val()`，它是`text()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:54:16.583

人，人，你不需要`option`在jQuery中直接选择s。我不敢相信我看到这个错误多少次。

```
$('.file_image_type').change(function() {  
    $('.file_image_type').not(this).each(function() {
        var $this = $(this);
        if ($this.val() === 'Feature') {
            $this.val('Gallery');
        }
    });
});​ 
```

# c# - 如何使用顶部浮动控件和自动调整大小创建布局？

> ID：11617611
> 
> 赞同：2
> 
> 时间：2012-07-23T17:40:18.113
> 
> 标签：c#, winforms, layout, user-controls, controls

我目前坚持为 WinForms 控件创建布局：

我的用户控件托管以下子控件：

```
RichTextBox
Label B
  Control B
  Control B
  Control B
Label C
  Control C
  Control C
Label D
  Control D
  Control D 
```

RichTextBox 始终可见。它的高度应该增长到显示所有没有滚动条的文本所需的高度。

根据我的数据对象，如果存在，我想显示一些附加信息。例如，可以有 5 个控件 B、0 C 和 20 D。
我希望控件“浮动”到顶部。每个控件都应该能够增加高度以显示其全部内容。

我尝试了多种 TableLayoutPanels、FlowLayoutPanels、停靠和自动调整大小设置的组合，但没有一个能满足我的期望。

如何按照我在上面发布的顺序排列我的控件，并使用停靠顶部和自动调整大小的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:53:23.113

1.  创建具有 4 行和 1 列的外部 TableLayoutPanel。为行设置`SizeType = AutoSize`。
2.  将 RichTextBox 放入第一行。
3.  创建具有如此多行的内部 TableLayoutPanel，如您的控件计数和 2 列。为所有行设置`SizeType = AutoSize`。为内部 TableLayoutPanel设置`AutoSize = true`。将其放在下一行。
4.  将标签放置到第一个单元格。设置`ColumnSpan = 2`为标签。
5.  将控件放入其他行的第二列。
6.  `B`对其他内部和重复 3-5`C`

# c# - 在 ASP.NET 中运行时创建动态锁

> ID：11617616
> 
> 赞同：9
> 
> 时间：2012-07-23T17:40:34.227
> 
> 标签：c#, asp.net, thread-safety

以下假设是否适用于此代码？我在代码下放了一些背景信息，但我认为这无关紧要。

**假设 1：**由于这是一个单一的应用程序，我假设它将由一个进程处理。因此，静态变量在线程之间共享，并且静态声明我的锁对象集合是有效的。

**假设 2：**如果我知道该值已经在字典中，我不需要锁定读取。我可以使用 ConcurrentDictionary，但我相信这个会是安全的，因为我没有枚举（或删除），并且当我调用`UnlockOnValue()`.

**假设 3：**我可以锁定 Keys 集合，因为该引用不会改变，即使底层数据结构会改变。

```
private static Dictionary<String,Object> LockList = 
    new Dictionary<string,object>();

private void LockOnValue(String queryStringValue)
{
    lock(LockList.Keys)
    {
        if(!LockList.Keys.Contains(queryStringValue))
        {
            LockList.Add(screenName,new Object());
        }
        System.Threading.Monitor.Enter(LockList[queryStringValue]);
    }
}

private void UnlockOnValue(String queryStringValue)
{
    System.Threading.Monitor.Exit(LockList[queryStringValue]);
} 
```

然后我会使用这样的代码：

```
LockOnValue(Request.QueryString["foo"])
//Check cache expiry
//if expired
    //Load new values and cache them.
//else
    //Load cached values
UnlockOnValue(Request.QueryString["foo"]) 
```

**背景：** 我正在 ASP.NET 中创建一个应用程序，该应用程序根据查询字符串中的单个用户定义变量下载数据。值的数量将非常有限。我需要在指定的时间段内缓存每个值的结果。

**方法：**我决定使用本地文件来缓存数据，这不是最好的选择，但我想尝试一下，因为这不重要，性能也不是大问题。我每个选项使用 2 个文件，一个带有缓存到期日期，一个带有数据。

**问题：**我不确定执行锁定的最佳方法是什么，而且我对 .NET 中的线程问题并不太熟悉（我选择这种方法的原因之一）。根据可用的内容以及我阅读的内容，我认为上述内容应该可行，但我不确定并想要第二意见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T17:04:32.700

您当前的解决方案看起来不错。我要改变的两件事：

1：UnlockOnValue 需要进入 finally 块。如果抛出异常，它永远不会释放它的锁。

2：LockOnValue 有点低效，因为它会进行两次字典查找。这对于小型字典来说没什么大不了的，但对于较大的字典，您将需要切换到 TryGetValue。

此外，您的假设 3 成立 - 至少目前如此。但是 Dictionary 契约不保证 Keys 属性总是返回相同的对象。而且由于很容易不依赖它，我建议不要这样做。每当我需要锁定一个对象时，我只是为此目的创建一个对象。就像是：

```
private static Object _lock = new Object(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:18:44.003

`lock`仅具有单个进程的范围。如果你想跨越进程，你将不得不使用像`Mutex`(named) 这样的原语。

`lock``Monitor.Enter`与和相同`Monitor.Exit`。如果你也这样做`Monitor.Enter`and `Monitor.Exit`，那是多余的。

您不需要锁定读取，但您必须锁定检查值是否不存在并添加它的“事务”。如果您不锁定该系列指令，则在您检查密钥和添加并添加密钥之间可能会出现其他情况，从而导致异常。您正在做的锁足以做到这一点（您不需要额外调用 Enter 和 Exit —— lock 会为您做到这一点）。

# python - 与 Python 中的多处理相比，concurrent.futures 有哪些优势？

> ID：11617619
> 
> 赞同：17
> 
> 时间：2012-07-23T17:40:39.190
> 
> 标签：python, multithreading, multiprocessing, concurrent.futures

我正在用 Python 编写一个应用程序，我需要同时运行一些任务。模块 multiprocessing 提供类 Process 并且 concurrent.futures 模块具有类 ProcessPoolExecutor。两者似乎都使用多个进程来执行它们的任务，但它们的 API 是不同的。为什么我应该使用一个而不是另一个？

我知道 concurrent.futures 是在 Python 3 中添加的，所以我想它会更好吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T18:23:12.230

concurrent.futures 的动机包含在[PEP](http://www.python.org/dev/peps/pep-3148/)中。

在我的实践经验中，concurrent.futures 为长时间运行的任务提交和监控情况提供了更方便的编程模型。我最近使用 concurrent.futures 编写的一个程序涉及在 2-3 小时的窗口内监视目录中的传入文件，在每个文件到达任务时将其翻译，提交等等。ProcessPoolExecutor 返回的未来对象允许以方便的方式跟踪任务状态、提供中间状态报告等。

# objective-c - 在 XCode 中将文本标签更改为图像

> ID：11617620
> 
> 赞同：0
> 
> 时间：2012-07-23T17:40:45.127
> 
> 标签：objective-c, uilabel

我正在开发的 iOS 应用程序的 XCode 项目中有以下代码：

```
 testLabel = [[UILabel alloc] initWithFrame:CGRectMake(0,0, 320, 480)];
    UIFont *Font = [UIFont fontWithName:@"Arial" size:40];
    [testLabel setFont:Font];
    [testLabel setTextAlignment:UITextAlignmentCenter];
    [testLabel setTextColor:[UIColor colorWithRed:(float) 55/255 green:(float) 41/255 blue:(float) 133/255 alpha:1.0]];
    testLabel.text = @"Here We Go"; 
```

我希望在该位置放置图像而不是文本。我需要用什么替换此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:44:45.277

要么制作图像并将其放入 an 中，`UIImageView`要么制作一个`UIView`子类，在该子类中在方法内绘制文本`drawRect`。在第二种情况下，`drawRect`你这样做：

```
[self.yourStringProperty drawAtPoint:CGPointMake(100,150) withFont:[UIFont systemFontOfSize:14.0]]; 
or
[self.yourStringProperty drawInRect:rect withFont:[UIFont systemFontOfSize:14.0]]; 
```

此外，请 在[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)查看这些功能的详细说明，这些功能还可以考虑可用宽度、最小尺寸、换行符等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:06:09.100

我上面的答案是第二部分的最佳答案：使用 UIView 并根据您的需要将您的标签或 UIImageView 放入其中。这是图像的样子：

```
UIView *container = [[UIView alloc] initWithFrame:CGRectMake(<<your image frame here>>)];
UIImageView *image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourImage.png"]];
image.frame = CGRectMake(<<your image frame here>>);
[container addSubview:image];
[self.view addSubview:container]; 
```

# android - 按应用名称而不是包名称的字母顺序对列表视图进行排序

> ID：11617627
> 
> 赞同：1
> 
> 时间：2012-07-23T17:41:18.657
> 
> 标签：android, listview, sorting

我正在尝试使此 ListView 正常工作，并且我正在尝试按应用程序名称而不是包名称的字母顺序对列表进行排序。

MainActivity.java

```
// load list application
mListAppInfo = (ListView)findViewById(R.id.lvApps);
// create new adapter
AppInfoAdapter adapter = new AppInfoAdapter(this, Utilities.getInstalledApplication(this), getPackageManager());
// set adapter to list view        
mListAppInfo.setAdapter(adapter); 
```

AppInfoAdapter.java

```
public AppInfoAdapter(Context c, List list, PackageManager pm) {
    mContext = c;
    mListAppInfo = list;
    mPackManager = pm;
}

public View getView(int position, View convertView, ViewGroup parent) {
    // get the selected entry
    ApplicationInfo entry = (ApplicationInfo) mListAppInfo.get(position);

    // reference to convertView
    View v = convertView;

    // inflate new layout if null
    if(v == null) {
        LayoutInflater inflater = LayoutInflater.from(mContext);
        v = inflater.inflate(R.layout.layout_appinfo, null);
    }

    // load controls from layout resources
    ImageView ivAppIcon = (ImageView)v.findViewById(R.id.ivIcon);
    TextView tvAppName = (TextView)v.findViewById(R.id.tvName);
    TextView tvPkgName = (TextView)v.findViewById(R.id.tvPack);

    // set data to display
    ivAppIcon.setImageDrawable(entry.loadIcon(mPackManager));
    tvAppName.setText(entry.loadLabel(mPackManager));
    tvPkgName.setText(entry.packageName);

    // return view
    return v;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T18:09:05.837

修改你`Utilities.getInstalledApplication(this)`的使用`Collections.sort()`：

```
public static List<ApplicationInfo> getInstalledApplication(Context context) {
    PackageManager packageManager = context.getPackageManager();
    List<ApplicationInfo> apps = packageManager.getInstalledApplications(0);
    Collections.sort(apps, new ApplicationInfo.DisplayNameComparator(packageManager));
    return apps;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-05T19:40:42.630

如果[您](https://stackoverflow.com/questions/11617627/sorting-listview-alphabetically-by-app-name-instead-of-package-name/11618019#11618019)使用`packageManager.queryIntentActivities(intent, 0)`.

```
List<ResolveInfo> apps = packageManager.queryIntentActivities(intent, 0);
Collections.sort(apps, new ResolveInfo.DisplayNameComparator(packageManager)); 
```

# excel - Excel - 将年龄分组为预定义的类别

> ID：11617628
> 
> 赞同：0
> 
> 时间：2012-07-23T17:41:24.353
> 
> 标签：excel, vba, grouping, excel-formula

我将这些分组与我在一个列中使用的一些人口数据（**称之为 Data1**）：

```
10 至 14 岁  
15至17岁  
18 岁和 19 岁  
20年  
21 年  
22 至 24 岁  
25 至 29 岁  
30 至 34 岁  
35 至 39 岁  
...  
85岁及以上
全部的

```

而且我还有另一条数据（**称为 Data2**）我正在使用它而不是分组，只是按年龄从 1 到 100 的人口。

我需要将data2分组到与data1相同的分组中，

我开始使用 Excel 公式（使用 IF 语句），但有 24 个不同的年龄组，所以我很快就放弃了。

有没有更简单的方法来使用公式/vba/其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:15:48.790

如果我了解您的数据，似乎 Data2 是年龄的原始列表，而 Data1 是分箱数据。

您可以通过数组公式将原始年龄数据移动到绑定中

```
=FREQUENCY(<bins>,<Data2>) 
```

你的垃圾箱在哪里

```
10
15
18
20
21
22
25
30
35
40
45
50
55
60
65
70
75
80
85 
```

另外，如果我的第一个猜测不是您想要的，您可以尝试这个 UDF...

```
Public Function Between(inputCell As Range, twoColBetweenRage As Range, outputLabel As Range)

    If twoColBetweenRage.Rows.Count <> outputLabel.Rows.Count Then
        Err.Raise 12345, "", "Input ranges are not equally sized"
        Exit Function
    End If

    Dim r As Integer, inputValue As Double
    inputValue = inputCell.Value
    For r = twoColBetweenRage.Row To twoColBetweenRage.Rows.Count
        If twoColBetweenRage(r, 1) <= inputValue And twoColBetweenRage(r, 2) >= inputValue Then
            Between = outputLabel(r, 1)
            Exit Function
        End If
    Next r

    If IsEmpty(Between) Then
        Err.Raise 12345, "", "No value was found"
        Exit Function
    End If

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:34:45.230

如果您正在运行 excel 2007 或更高版本，则`COUNTIF`可以使用。

10 至 14 岁`=COUNTIF(Data2,">=10",Data2,"<=14")`
15 至 17 岁`=COUNTIF(Data2,">=15",Data2,"<=17")`
18 和 19 岁`=COUNTIF(Data2,">=18",Data2,"<=19")`
20 岁`=COUNTIF(Data2,"=20")`
21 岁`=COUNTIF(Data2,"=21")`

ETC...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:51:35.547

如果您构建一个两列查找表，您可以使用一个简短的公式，例如在 Y2 中，按升序排列每个范围的下限，例如Y2 中的**10** 、 Y3 中的**15 、Y4 中的****18**等，然后在相应的行中Z列可以放组文字，例如Z2中的**“10到14年”**在Z3中，**“15到17年”**等。

现在对于 A1 中的特定年龄，您可以使用此公式获得正确的组

`=LOOKUP(A1,$Y$2:$Z$25)`

# php - PHP未定义变量错误新手在这里，似乎无法弄清楚如何修复错误

> ID：11617633
> 
> 赞同：1
> 
> 时间：2012-07-23T17:41:38.333
> 
> 标签：php

我正在尝试创建一个所谓的希腊数字转换器工具。这里的输入将是字母，这些字母将转换为数字。对于每个字母，都会有一个相应的数字，并且还会考虑数字。现在，我的想法是创建一个数组，其中将放置所有字母及其对应的数值。因此，当用户输入字母组合（最多 3 位数字）时，convert() 函数将查找输入的这些字母的相应值，获取这些值，并将所有内容相加。不幸的是，当我进行编码时，我遇到了这个错误（标题中提到的那个），我似乎无法弄清楚如何解决它。这听起来可能很愚蠢，但请理解，因为我仍在学习 PHP 的过程中。

这是我能够想出的代码。

```
<?php error_reporting(0);
    class GreekNum
    {

        public function setText($text)
        {
            $this->text=$text;
        }

        public function getText()
        {
            return $this->text;
        }       

        public function Convert($text)
        {

            $TextLength = strlen($text);
            $text = strtoupper($text);
            $text = str_split($text);

            $collection = array(
                                    "A" => 1,
                                    "B" => 2,
                                    "G" => 3,
                                    "D" => 4,
                                    "E" => 5,
                                    "#" => 6,
                                    "Z" => 7,
                                    "Y" => 8,
                                    "H" => 9,
                                    "I" => 10,
                                    "K" => 20,
                                    "L" => 30,
                                    "M" => 40,
                                    "N" => 50,
                                    "X" => 60,
                                    "O" => 70,
                                    "P" => 80,
                                    "Q" => 90,
                                    "R" => 100,
                                    "S" => 200,
                                    "T" => 300,
                                    "U" => 400,
                                    "F" => 500, 
                                    "C" => 600,             
                                    "$" => 700,
                                    "W" => 800,
                                    "3" => 900, 
                                );

            if(isset($text))
            {
                $total = 0;
                for($i=0; $i<$TextLength; $i++)
                {
                    if(array_key_exists($text[$i], $collection))
                    {
                        $total += $collection[$text[$i]];
                    }

                    if(end($text)!='.')
                    {
                        echo "Please make sure your line ends with a period. <br><br>"; 
                        return false;
                    }
                }
                return $total;

            }                   
        }

    }   

    $GreekNum = new GreekNum();

    $text = $_POST['text'];
    $GreekNum->setText($text);

    echo "<br>";
    echo "<b>Entered Values: </b><br>". $GreekNum->getText();
    echo "<br>";
    echo "<br>";

    echo "<b>Decimal Number Equivalence: </b><br/>". $GreekNum->Convert($text);

    ?> 
```

错误是关于 $total 的，我似乎不知道如何解决这个问题。任何帮助将不胜感激。非常感谢！

这已经解决了，但是为了任何可能需要的人，我再次将其编辑为当前适用于我的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:43:29.033

需要先声明`$total`后才能使用，试试下面的

```
....
$total = 0;
for($i=0; $i<$TextLength; $i++)
{
      ..... 
```

它在您的情况下不起作用的原因是因为您这样做`$total += $text[$i];`会扩展为`$total = $total + $text[$i];`不幸的`$total`是，等号的右侧不存在，因此它是未定义的。

*我也想知道为什么你访问 $text 就好像它是一个数组，它是一个字符串，我相信 $collection 是包含你的值的数组。*

所以你需要做的是`$text`首先将字符串拆分成一个字符数组。然后对于这些字符中的每一个，在集合中查找它，如果存在，则将其值添加到运行总数中。

```
....

$text = "AQ3";
$TextLength = strlen($text);
$splitText = str_split($text);

$total = 0;
for($i=0; $i<$TextLength; $i++)
{
    $currentCharacter = $splitText[$i];
    if(array_key_exists($currentCharacter, $collection))
    {   
        $total += $collection[$currentCharacter];
    }
}

.... 
```

如您所见`$splitText[$i]`，这是当前字符，它在搜索中用作键，但在以下语句中也需要`$total += $collection[$splitText[$i]];`它，因为它是用于查找的键。

对于字符串**AQ3**，这将返回值**991**，我认为这是您的预期结果？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:44:58.800

我假设这一行有错误：

```
$total += $text[$i]; 
```

问题是您本质上是在尝试这样做：

```
$total = $total + $text[$i]; 
```

在您的第一次迭代中，$total 的值没有设置，所以您会收到这个 PHP 通知。

您可能希望在脚本中的某个较早点声明 $total = 0 或类似内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T17:47:40.533

基本上你在 for 循环中声明了 $total 。这是一个问题的原因是因为当您在某处声明变量时，这意味着它只能在该域中使用。将整个文件想象成一个圆圈，每次创建 for 循环时，都会在其中创建小圆圈。因此，当您创建 $total 时，它是在较大圆圈内的那个小圆圈中创建的。它的范围仅在 for 循环内。当你退出 for 循环时，变量就消失了。像 python 这样的一些语言允许你这样做，但也许不是 php。如果要解决此问题，请在 for 循环外声明 $total 变量。这意味着更大圈子中的任何东西都可以使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T17:42:54.233

`$total`因为您在`for`循环中引用它之前从未定义过。您应该这样定义它（您可能希望从零开始）：

```
$total = 0; // <-- Define total here
for($i=0; $i<$TextLength; $i++)
{
    if(array_key_exists($text[$i], $collection))
    {
        $total += $text[$i];
    }
}
return $total; 
```

# unix - 猎UNIX软件配置Uber-script

> ID：11617634
> 
> 赞同：0
> 
> 时间：2012-07-23T17:41:54.220
> 
> 标签：unix, installation

我最近一直在安装很多 Linux 软件。安装几乎总是需要运行“配置”脚本。我终于明白，几乎每个人都在通过采用一个广泛的通用脚本并根据自己的目的对其进行调整来制作他们的配置脚本。如果有人知道我在说什么，你能告诉我这个通用配置脚本的来源吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:47:04.963

那将是[autoconf](http://www.gnu.org/software/autoconf/)。

我想[山羊书](http://sourceware.org/autobook/)提供了对它的全面处理。

不要嘲弄 autoconf。

# haskell - 如何使用格式化打印在 Haskell for CGI 中显示 UTF-8？

> ID：11617639
> 
> 赞同：3
> 
> 时间：2012-07-23T17:42:02.823
> 
> 标签：haskell, utf-8, cgi, printf

我有一个代码

```
module Main where

import Text.Printf

main = printf "%s%s" ("Content-type: text/html; charset=utf-8\n\n" :: String ) ("And немного русского" :: String) 
```

如果我在终端执行它，我有我想要的：

```
Content-type: text/html; charset=utf-8

And немного русского 
```

但是当我尝试将它作为 cgi 程序执行时，我只是`And`（因为在这个词之后我有西里尔字符并且它们不想被显示）。

`putStr $ fromString`当我使用from `Data.ByteString.Char8`and时没有问题，`Data.ByteString.UTF8`所以我不认为我的 LAMPP 服务器有问题。而且我还包含`AddDefaultCharset utf-8`在 httpd.conf 中。

而我真正想要做的是读取带有特殊符号（例如等）的模板文件`%s`，`%d`然后在 的帮助下`printf`，将它们（符号）替换为我需要的，具体取决于查询字符串和显示。

我这样做只是为了好玩，我希望这个问题只能用纯 Haskell 来解决。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T09:15:39.360

让 CGI 程序依赖于语言环境可能合适，也可能不合适；例如，如果您生成的 HTML 有一个编码标头说它是 UTF-8，那么您应该独立于您的系统区域设置生成 UTF-8。

与语言环境无关的方法是在打印任何内容之前设置 stdout 的编码：

```
import System.IO

main = do
    hSetEncoding stdout utf8
    printf "%s%s" ("Content-type: text/html; charset=utf-8\n\n" :: String ) ("And немного русского" :: String) 
```

你的代码：

```
/tmp $ echo $LANG
de_DE.utf8
/tmp $ ./Test2
Content-type: text/html; charset=utf-8

And немного русского
/tmp $ LANG=C ./Test2 
Content-type: text/html; charset=utf-8

And Test2: <stdout>: commitBuffer: invalid argument (invalid character) 
```

修改后的代码：

```
/tmp $ ./Test2
Content-type: text/html; charset=utf-8

And немного русского
/tmp $ LANG=C ./Test2 
Content-type: text/html; charset=utf-8

And немного русского 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-15T07:10:39.650

非常好的解决方案是通过将字符串`SetEnv LANG en_US.UTF-8`放入其中一个文件中，在 httpd.conf、.htaccess 或 httpd-vhosts.conf（在 LAMPP 中）中设置环境变量 LANG。

在 httpd.conf 中，您可以为所有服务器设置此变量。

要使用 .htaccess 文件进行设置，您必须在 vhosts.conf 中启用此机会

```
<Directory "<.htaccess directory>">
    AllowOverride All
</Directory> 
```

然后，您将能够使用 SetEnv 使用 set 目录中的 .htaccess 文件更改变量。

在 vhosts.conf 中，您可以`SetEnv LANG en_US.UTF-8`在`VirtualHost`块中添加字符串。

此解决方案允许您使用 UTF-8 和其他没有库（如 Data.ByteString.Char8）的库。

再次感谢纳米！

# python - 使用 python dtype 作为压缩 csv 的标头

> ID：11617641
> 
> 赞同：1
> 
> 时间：2012-07-23T17:42:15.593
> 
> 标签：python, csv, numpy

我有一个结构化的元组的一维 numpy 数组`dtype`。我正在使用`np.savetxt`将数组写入（压缩）csv 文件。我只想将字段名称添加`dtype`为第一行的标题。当我打印 array.dtype 我得到

数组是一个类型的对象：

```
[('time', '<u8'), ('timeStr', '|S27'), ('person', '|S24'), ...] 
```

我认为`('time', 'timeStr', 'person'...)`从array.dtype 中创建一个元组并将其添加为数组中的第一个元组可能很简单，但是dtype 对象似乎很难处理（例如，您不能对其进行迭代）。

有没有一种简单的方法可以做到这一点？

编辑：senderle 指出 array.dtype.names 的存在解决了第一个问题。但是，理想情况下，我想输出一个 gzip 压缩的 csv 文件，而不是先写出完整的 csv 文件，然后再压缩它。np.savetxt 本身支持压缩，但将标头添加到 numpy 数组似乎会导致问题，因为它的类型错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:11:32.483

这是获取字段名称元组的简单方法：

```
>>> a = numpy.array([(1, 2, 3), (4, 5, 6)], dtype=[('time', '<u8'), 
                                                   ('timeStr', '|S27'), 
                                                   ('person', '|S24')])
>>> a.dtype.names
('time', 'timeStr', 'person') 
```

这是使用数据创建 csv 文件的简单方法：

```
>>> with open('data.txt', 'w') as datafile:
...     datafile.write(', '.join(a.dtype.names) + '\n')
...     numpy.savetxt(datafile, a, '%i, %s, %s') 
```

之后的内容`data.txt`：

```
time, timeStr, person
1, 2, 3
4, 5, 6 
```

如果您运行的是 1.7 或更高版本，您也可以传递`', '.join(a.dtype.names)`给新[`header`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html#numpy-savetxt)参数。（但请注意，最后一个断言未经测试，因为我的版本`numpy`较旧。）

您可以对模块执行基本相同的操作`gzip`。不过，这可能会更慢，因为它可能`numpy`不再处理压缩。做一些测试。

```
>>> with gzip.GzipFile('data.gz', 'w') as datafile:
...     datafile.write(', '.join(a.dtype.names) + '\n')
...     numpy.savetxt(datafile, a, '%i, %s, %s')
... 
```

结果是`data.gz`，解压后与上面列出的内容相同。

# django - 在 Django 项目中重命名文件夹但旧名称仍然存在

> ID：11617648
> 
> 赞同：1
> 
> 时间：2012-07-23T17:42:57.877
> 
> 标签：django, directory, rename, project-structure

在阅读了有关常见 Django 项目结构的更多信息后，我将我的“媒体”文件夹重命名为“静态”，因为它包含我的 Web 应用程序的 CSS、javascript 和图像，并且没有用户上传的文件。但是，我的项目没有找到新目录，并且 favicon 仍在提供服务，可以从 localhost:8000/ **media** /images/ favicon.png 的旧目录下载！

在我的模板中，我直接链接到 css/js 文件，如下所示：

```
<link href="/static/css/map.css" type="text/css" rel="stylesheet" /> 
```

**urls.py**中也没有什么有趣的事情发生：

```
urlpatterns = patterns('',

    url(r'^$', 'EventMapperApp.views.map', name='map'),

    # AJAX
    url(r'^all_events/', 'EventMapperApp.views.all_events'),
    url(r'^user_created_events/', 'EventMapperApp.views.user_created_events'),
    url(r'^all_user_events/', 'EventMapperApp.views.all_user_events'),

    # event actions
    url(r'^save_event/', 'EventMapperApp.views.save_event'),
    url(r'^unsave_event/', 'EventMapperApp.views.unsave_event'),
) 
```

有任何想法吗？

* * *

# 编辑

* * *

出于某种原因，我认为 urls.py 不必为我的 Django 应用程序解析所有 URL？不太确定我在想什么......无论如何，我已经根据文档对我的代码进行了我认为的适当更改，但我仍然无法让它工作。

**设置.py**

```
PROJECT_PATH = os.path.dirname(os.path.abspath(__file__))

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/var/www/example.com/media/"
MEDIA_ROOT = (os.path.join(PROJECT_PATH, "media"))

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://example.com/media/", "http://media.example.com/"
MEDIA_URL = '/media/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/var/www/example.com/static/"
STATIC_ROOT = (os.path.join(PROJECT_PATH, "static"))

# URL prefix for static files.
# Example: "http://example.com/static/", "http://static.example.com/"
STATIC_URL = '/static/' 
```

**网址.py**

```
urlpatterns = patterns('',
    # Examples:
    url(r'^$', 'EventMapperApp.views.map', name='map'),

    # Required to make static serving work
    (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}),

    # AJAX
    url(r'^all_events/', 'EventMapperApp.views.all_events'),
    url(r'^user_created_events/', 'EventMapperApp.views.user_created_events'),
    url(r'^all_user_events/', 'EventMapperApp.views.all_user_events'),

    # event actions
    url(r'^save_event/', 'EventMapperApp.views.save_event'),
    url(r'^unsave_event/', 'EventMapperApp.views.unsave_event'),
) 
```

**模板**

```
<link rel="icon"
      type="image/png"
      href="{{ STATIC_URL }}images/WWWfavicon.png" />
<link href="{{ STATIC_URL }}css/map.css" type="text/css" rel="stylesheet" />
<link href="{{ STATIC_URL }}css/ui-lightness/jquery-ui-1.8.21.custom.css" type="text/css" rel="stylesheet" />
<link href="{{ STATIC_URL }}css/timepicker.css" type="text/css" rel="stylesheet" /> 
```

我不确定我现在做错了什么......`STATIC_ROOT`当我浏览代码时似乎可以正确解决（“静态”文件夹与 settings.py 位于同一目录中）。

* * *

# 编辑 2

* * *

根据[https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)，我将**urls.py**更改为以下内容：

```
from django.conf.urls import patterns, url
from django.conf import settings
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

urlpatterns = patterns('',
    # Examples:
    url(r'^$', 'EventMapperApp.views.map', name='map'),

    # AJAX
    url(r'^all_events/', 'EventMapperApp.views.all_events'),
    url(r'^user_created_events/', 'EventMapperApp.views.user_created_events'),
    url(r'^all_user_events/', 'EventMapperApp.views.all_user_events'),

    # event actions
    url(r'^save_event/', 'EventMapperApp.views.save_event'),
    url(r'^unsave_event/', 'EventMapperApp.views.unsave_event'),
)

# only in development
urlpatterns += staticfiles_urlpatterns() 
```

仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:01:54.413

请参阅此处： [模板](https://docs.djangoproject.com/en/dev/howto/static-files/#referring-to-static-files-in-templates)中的静态文件和 [在开发中提供静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/#referring-to-static-files-in-templates)

# php - 重定向从 MySQL 查询填充的 PHP

> ID：11617654
> 
> 赞同：-2
> 
> 时间：2012-07-23T17:43:08.190
> 
> 标签：php, redirect

我需要将用户从页面资源/?group=168 重定向到资源/?group=205。

最好的方法是在 htaccess、php 重定向或可能在 index.php 中切换大小写？

我试过没有成功：

**htaccess**

```
Redirect resources/?group=168 http://www.site.com/resources/?group=205 
```

**机箱开关**

```
switch ($id) { case '168': $id = 205; break;} 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:47:31.543

```
if ($_GET['id'] == 168) {
  header('Location: http://www.site.com/resources/?group=205');
} 
```

如果标头重定向不起作用，请使用 javascript

```
<script type="text/javascript">
<!--
window.location = "http://www.site.com/resources/?group=205"
//-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:47:44.257

我自己会用一个`if`语句：

```
if ($id == '168') $id = 205; 
```

但这真的取决于你的需求，我想。如果您希望 URL 栏反映重定向，我建议使用 .htaccess。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:49:30.493

我不确定`switch`在你的例子中应该做什么（本身）但是怎么样

```
switch($_GET['group']) {
    case 168: $redirGrp = 205;break;
}
if(!empty($redirGrp)) header("Location:?group=$redirGrp"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T17:52:23.717

如果您希望用户永久使用此组 ID 而不是另一个，我会在 htacces 或 Apache 配置中这样做，您可以发送适当的 3XX 系列响应标头，让浏览器（和搜索引擎蜘蛛）知道这是该资源的新位置。

```
RewriteEngine On
RewriteRule ^resources/\?group=168$ /resources/?group=205 [R=301,L] 
```

如果您的确切 URI 不是 /resources/?group=168 那么您可能需要做一些不同的模式，例如：

```
RewriteRule ^resources/(\?|.*&)group=168(&.*$|$) /resources/$1group=205$2 [R=301,L] 
```

# java - 如何将 UTF-8 文件的内容转换为 ASCII 以在 android 中显示？

> ID：11617656
> 
> 赞同：0
> 
> 时间：2012-07-23T17:43:09.830
> 
> 标签：java, android, android-layout, android-emulator

你好。我正在编写一个示例应用程序来在 Android 中显示泰卢固语字体。我能够读取文件并在 android 中显示内容。但问题是我在泰卢固语中的发音是错误的。

谁能帮我比较一下泰卢固语字符的编码并纠正错误的发音。请在下面找到代码。

感谢你的帮助。

```
public class TeluguTestAppActivity extends Activity {
    float textsize = 12;
    TextView tv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        /*Incorporate font file to convert into Telugu fonts */
        Typeface tf = Typeface.createFromAsset(getAssets(), 
                      "fonts/DroidSansRegionalAAD.ttf");

        tv = (TextView) findViewById(R.id.myFont);
        tv.setTypeface(tf);
        String st = readText();
        tv.setText(st);        
    }

    private String readText(){
        StringBuffer sb = null;
        BufferedReader bufReader = null;
            /* Reading txt file which is placed in raw folder. 
            This contains telugu information. */
        InputStream inputStream = getResources().openRawResource(R.raw.ad1);
        try {
            bufReader = new BufferedReader(new InputStreamReader(
                                           inputStream, "UTF-8"));

        sb = new StringBuffer();
        String line = null;

            while((line = bufReader.readLine()) != null){
                sb.append(line + "\n");
            }
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return sb.toString();
    }        
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T18:15:07.123

这是一个问题：`bufReader = new BufferedReader(new InputStreamReader( inputStream, "UTF-8"));` ASCII 不支持国际语言，因此，您正在丢失指定“发音”的文件中的数据。尝试不指定编码或使用 UTF-16。

编辑：对于您指定的语言，它没有。编辑：是的，我将 UTF-8 与 ASCII 混淆了。不过还是不行。因为问题说他想转换为ASCII。

# xml - 创建自定义 XML 文件的软件

> ID：11617661
> 
> 赞同：0
> 
> 时间：2012-07-23T17:43:33.340
> 
> 标签：xml, user-interface, editor

我目前正在创建一个显示用于物种识别的生物密钥的 android 应用程序。在按键的每一步，两个或多个带有文本的图像都显示为描述某些功能的按钮，点击这些按钮后，用户将转到下一个相应的节点。密钥在 XML 文件中定义。一个简化的片段如下所示。我创建了一个大型 XML 文件，但它变得笨拙。我想知道是否有一个工具可以用图形表示我的 XML 文件和节点之间的关联。理想情况下，我希望能够编辑、添加和删除节点。

我知道这是一个很大的问题，但我愿意创建一个工具来完成这项任务。只是想我最好在重新发明轮子之前先问清楚。

干杯，

尼尔

```
<uktrees>
<node id="root" >
    <terminal_node>false</terminal_node>
    <question>
        <text>Needle-like or scale-like Leaves that often overlap</text>
        <nextnode>conifers</nextnode>
        <image>pine.jpg</image>
    </question>  
    <question>
        <text>Leaves are not scales or needles and don't overlap </text>
        <nextnode>broad_leaf</nextnode>
        <image>broad_leaf.jpg</image>
    </question>
 </node>

 <node id="conifers">
      <terminal_node>true</terminal_node>
      <name>Conifers</name>
      <image>conifers.jpg</image>
      <description>A description of this species of group of species</description>
  </node>
      <node id="broad_leaf">
      <terminal_node>true</terminal_node>
      <name>Conifers</name>
      <image></image>
      <description>A description of this species of group of species</description>
  </node>
</uktrees> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T18:23:22.467

最后，我使用 Qt 创建了自己的工具，使用以下内容作为指南：[http ://doc.qt.nokia.com/4.7-snapshot/itemviews-simpledommodel.html](http://doc.qt.nokia.com/4.7-snapshot/itemviews-simpledommodel.html)

# php - CMS 应该用于摄影师作品集网站吗？

> ID：11617663
> 
> 赞同：2
> 
> 时间：2012-07-23T17:43:48.847
> 
> 标签：php, web, content-management-system, gallery, photography

我的朋友摄影师让我开发一个投资组合网站，我想知道是否应该为此目的使用内容管理系统 (CMS)？该网站包含最少的动态内容，大部分只是照片库和“联系人”页面。

我有一些使用 PHP 框架（Yii 和 CI）的开发经验，所以我想知道什么是最轻松有效的开发方法：

*   a) 使用某种 CMS（需要时间和精力来学习和定制 CMS 以满足我的需要）

*   b) 使用 MVC 框架从零开始开发网站（需要编写更多代码，但对开发流程的控制更多）

在开发此类网站方面经验丰富的人提供的任何提示都非常受欢迎。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T21:43:04.383

我认为使用 CMS 的最大好处是，一旦您为他们将网站放在一起，您应该能够将网站的控制权完全交给您的朋友，因为 CMS 已经完成了所有管理界面用于（在您的情况下）添加图片并对站点进行其他小的更改。

即使您是好朋友，您最不想要的就是每月发送一封电子邮件，只是为了在网站上添加更多图片。滚动您自己的管理界面当然是可能的，但这需要更多时间，而且很可能没有大多数主要 CMS 提供的选项那么多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T09:36:45.217

为自己节省大量时间和头痛。有一些很好的摄影作品集 CMS 解决方案，它们很容易学习。您的朋友只需要标准的基本功能（图库、静态页面和联系表格），因此无需自定义代码，只需模板即可。

我推荐的 CMS 平台：

WordPress [http://wordpress.org](http://wordpress.org) ZenPhoto [http://zenphoto.org](http://zenphoto.org)

使用可靠的 CMS 构建网站有很多好处，例如节省时间，为您提供所有必需的工具，这些 CMS 都经过良好测试、安全和稳定（除了 WP 和 ZP 肯定是），它们提供 SEO 工具和 SEO 就绪代码（如果您选择或创建适当的主题/模板）等。使用这两个 CMS 平台，升级真的很容易，没有任何痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:36:43.673

*c) 一个主要是静态站点，仅在绝对需要*的情况下使用服务器端代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T22:38:46.670

如果他是一名摄影师，那么使用许多流行的 CMS 中内置的任何自动调整器都不是一个好方法，例如，你说得对，这些 CMS 不会给你进一步升级网站的灵活性（不能避免）。因此，作为开发人员，我总是避免使用 Joomla 和任何类似的工具。我对他们没有足够的清晰和灵活，这是我的经验之声。

**如果您使用 Yii**，我可以根据您的技能和情况为您提供灵活的扩展：

**[Yii 的 AutoAdmin CMS 框架](http://www.yiiframework.com/extension/autoadmin/)**

有了它，您可以随心所欲地设计数据库，根据需要编程前端（您是程序员，不是吗？），并非常快速地配置后端面板 - 完全适合您的数据库结构。

或者当然你可以搜索类似的东西。**使用带有扩展的 Yii 为您提供了一个标准化的站点**，将来可以轻松升级。而不是像 Joomla 一样的系统，它总是以内置解决方案的客户为导向（对于熟练的开发人员来说都是负面的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T21:42:55.813

使用 mvc 框架，您可以获得反映您的控制器和操作结构的 URL。这不是您想要的搜索引擎优化的 100%。当然，如果您知道怎么做，您可以编写自己的 URL 调度程序。框架最适合 Web 应用程序而不是网站。

所以最好使用cms。我听说contao（以前的Typolight）应该内置大部分功能并且应该很容易学习（一天左右）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T05:28:17.460

我在这里不需要 CMS，但如果您愿意，可以尝试使用 wordpress 并安装适合摄影的内置主题。

# xslt - 布尔运算符 OR 在使用 XSLT 的 where 子句中

> ID：11617668
> 
> 赞同：5
> 
> 时间：2012-07-23T17:44:04.557
> 
> 标签：xslt

大家好，我正在尝试为 XML 中的标记设置一个固定值，以与条件值进行比较。如

```
<xsl:when test="(//TestInput='XYZA') OR (//TestInput='XYZB') OR (//TestInput='XYZC') OR (//TestInput='XYZD')">abcd</xsl:when> 
```

当我尝试使用带有标签的 XML 运行转换时`<TestInput>`，它给了我一个错误

```
Extra illegal tokens: '(', '/', '/', 'TestInput', '=', ''XYZA'', ')', 'OR', '(', '/', '/', 'TestInput', '=', ''XYZB'', ')', 'OR', '(', '/', '/', 'TestInput', '=', ''XYZC'', ')', 'OR', '(', '/', '/', 'TestInput', '=', ''XYZD'', ')' 
```

请帮助我根据条件在 where 子句中使用 OR 运算符设置此标签的值。

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T17:56:00.973

`or`大小写对 XML/XSLT/XPath 很重要，因此请使用`OR`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T17:57:11.490

我使用以下 XML 创建了一个测试：

```
<?xml version="1.0" encoding="utf-8"?>
<Test>
  <Item>DAC</Item>
  <Item>DAD</Item>
  <Item>DAE</Item>
</Test> 
```

以及以下 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
      <test>
      <xsl:choose>
        <xsl:when test="//Item[text()='DAC'] or //Item[text()='DAE']">
          <output>Here is the text!</output>
        </xsl:when>
        <xsl:otherwise></xsl:otherwise>
      </xsl:choose>
      </test>
    </xsl:template>
</xsl:stylesheet> 
```

我得到以下输出：

```
<?xml version="1.0" encoding="utf-8"?>
<test>
  <output>Here is the text!</output>
</test> 
```

使用 Micorosft.Net 的 XmlDocument 类进行测试。关键的区别在于' *or* ' 语句的**情况。**

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:59:48.057

问题是 //TestInput 选择了一组元素，而不仅仅是一个。

你应该使用 xsl:for-each

```
<xsl:for-each select="//TestInput[.='a'or'b'or'c']">abc</xsl:for-each> 
```*

# ruby - 如何在gem中要求目录中的所有文件？

> ID：11617673
> 
> 赞同：11
> 
> 时间：2012-07-23T17:44:17.737
> 
> 标签：ruby, rubygems

我知道我可以使用目录中的所有文件

```
Dir['path/to/files/**/*.rb'].each { |file| require file } 
```

但是，我正在尝试为 gem 设置文件执行此操作，如下所示：

```
class MyGem
  module NS; end
end

Dir['lib/my_gem/files/**/*.rb'].each { |file| require file } 
```

（其中所有文件`lib/my_gem/files`都在 MyGem::NS 下命名）。使用如下所示的目录结构：

```
lib                              
|-- my_gem                        
|   |-- files              
|   |   |-- file1.rb       
|   |   |-- file2.rb         
|   |   |-- file3.rb         
|   |   `-- ... (many more)      
`-- my_gem.rb                     
my_gem.gemspec 
```

而且，`Dir`当我在另一个文件中需要我的 gem 时，该命令似乎不起作用，因为它似乎在运行时在我的项目根目录中查找文件路径（无论我需要我的 gem 的任何项目）。

如何要求 in`lib/my_gem/files`中的所有文件`lib/my_gem.rb`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T18:19:24.823

Rubygems 有一个名为[find_files](https://github.com/rubygems/rubygems/blob/5818e9d7fadebd6237f71c5c19539e996cc58df0/lib/rubygems.rb#L455-485)的工具，可让您根据加载路径中的任何内容进行搜索：

```
Gem.find_files("my_gem/files/**/*.rb").each { |path| require path } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T17:56:13.370

您可以使用*find*进行递归搜索，然后遍历响应列表并逐行包含它们。

就像是

```
`find #{root_path}/lib/my_gem/files/**/*.rb`.split("\n").each { |p| require p } 
```

# jquery - Live() 与 jQuery 中的自定义事件

> ID：11617674
> 
> 赞同：0
> 
> 时间：2012-07-23T17:44:24.717
> 
> 标签：jquery, events, live

我正在为鼠标事件和触摸事件使用事件规范器。这样，我不需要维护两段代码：一段响应触摸事件，另一段响应触摸事件。

它工作正常，但我不能让它与 live() 函数一起工作。

在规范化过程结束时，以这种方式触发规范化事件：

```
var touchMouseEvent = normalizeEvent(type, event, event.pageX, event.pageY);
$(event.target).trigger(touchMouseEvent); 
```

我试图让现场活动使用这些电话进行：

```
$('.MyClass').live('TouchMouseEvent', function(){...});
$('.MyClass').live('normalizeEvent', function(){...});
$('.MyClass').live('touchMouseEvent', function(){...}); 
```

但没有任何效果。

通常，自定义事件的触发器被称为像 $('.Class').trigger('customName') 这样的字符串，所以我想知道这是否就是我为此苦苦挣扎的原因。

这是我用于规范化的代码。 [https://gist.github.com/2375726](https://gist.github.com/2375726)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:55:28.943

我找到了解决方案。我没有使用 live() 函数，而是使用了委托函数。

例如：

```
$('#wayPointList').delegate('.deleteWayPoint', TouchMouseEvent.UP, function(){
//do something here
}); 
```

奇迹般有效！感谢大家的回答/建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:47:49.007

不确定 live() 是否可以处理基于委托的自定义方法/事件。委托本身依赖于被触发的实际 DOM 事件，但它们被委托到 document.body 级别。尝试使用 bind() 代替。

# ios - 缩放和裁剪图像 ios

> ID：11617676
> 
> 赞同：3
> 
> 时间：2012-07-23T17:44:38.563
> 
> 标签：ios, objective-c, uiimage, scale, crop

我正在为 iOS 使用缩放和裁剪图像的功能（类似于 camara 应用程序），下面的代码工作正常，只是生成的图像是颠倒的，我想了解原因。

谢谢

```
- (UIImage*)imageByCropping:(UIImageView *)imageViewToCrop toRect:(CGRect)rect
{
    //create a context to do our clipping in
    CGRect newRect = CGRectApplyAffineTransform(rect, imageViewToCrop.transform);
    UIImage *imageToCrop = imageViewToCrop.image;
    UIGraphicsBeginImageContext(newRect.size);
    CGContextRef currentContext = UIGraphicsGetCurrentContext();

    //create a rect with the size we want to crop the image to
    //the X and Y here are zero so we start at the beginning of our
    //newly created context
    CGRect clippedRect = CGRectMake(0, 0, rect.size.width, rect.size.height);
    CGContextClipToRect( currentContext, clippedRect);

    //draw the image to our clipped context using our offset rect
    CGContextDrawImage(currentContext, newRect, imageToCrop.CGImage);

    //pull the image from our cropped context
    UIImage *cropped = UIGraphicsGetImageFromCurrentImageContext();

    //pop the context to get back to the default
    UIGraphicsEndImageContext();

    return cropped;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:42:42.023

我也遇到过这个问题，没有解释。但是找到了解决该问题的解决方法。只需将以下两行放入您的代码中，然后再试一次。这个对我有用。

```
CGContextTranslateCTM(context, 0.0, newRect.size.height);
CGContextScaleCTM(context, 1.0, -1.0);//flip context 
```

# java - Amazon (EMR) 使用哪个 Hadoop 版本？

> ID：11617678
> 
> 赞同：2
> 
> 时间：2012-07-23T17:44:48.437
> 
> 标签：java, hadoop, amazon-ec2, cloudera, amazon-emr

我想创建一个 Hadoop 作业并在 EC2 Map Reduce 上运行它。我还想在上传到 EC2 之前在本地运行该作业。

我应该在本地拥有哪个版本/类型的 Hadoop？我可以使用 Cloudera 虚拟机吗？亚马逊使用哪个 Hadoop 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:32:44.433

Amazon Elastic MapReduce 支持 Hadoop 0.18、0.20 和 0.20.205 (http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/EnvironmentConfig_AMIVersion.html#ami-versions-supported)。

您可以指定要运行哪一个。您不能选择 Cloudera；我想你可以在 EC2 上运行原始实例并设置你自己的 Cloudera 集群。

在本地运行与 EMR 无关；只需在伪分布式模式下设置一个 Hadoop 集群进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T18:25:50.743

Amazon EMR 现在使用 Hadoop 2.4.0。更新信息： [http ://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/ami-versions-supported.html](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/ami-versions-supported.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:51:58.467

Recently Amazon also added support for MapR M3 and M5:

[http://aws.amazon.com/elasticmapreduce/mapr/](http://aws.amazon.com/elasticmapreduce/mapr/)

You can download MapR binaries at the following link:

[http://www.mapr.com/products/download/download-mapr-on-premise](http://www.mapr.com/products/download/download-mapr-on-premise)

Shameless plug: At [Axemblr.com](http://axemblr.com) we are building an alternative to Amazon EMR based on Cloudera Manager target at multiple clouds. Drop us a line at hello@axemblr.com if you want early acceess.

# jasper-reports - Jasper Reports Group VS Oracle 排序方式

> ID：11617679
> 
> 赞同：0
> 
> 时间：2012-07-23T17:44:50.037
> 
> 标签：jasper-reports, ireport

我有一份报告，我正在从 Crystal Reports 转换为 JasperReports。我正在使用 iReport 4.5 和 JasperReport Server 4.5 设计报告。返回的 Oracle 存储过程`REF_CURSORS`用于填充数据。下面是一个示例 SQL：

```
Select First_Name, Last_Name, DOB, City From PPL Order By DOB; 
```

当我在报表设计器中使用此 SQL 并设计报表并按如下方式创建组时

父组是 First_Name 第二组是城市

基本上我想在它适用的所有城市中将所有具有相似名字的人分组。

预期成绩：

```
First_Name       Last_Name      DOB              City
Alan             Kum            10/01/2010       Mumb
Alan             Boss           01/10/2001       Mumb 
Alan             Cross          10/10/2000       Irvn 
```

但是由于 SQL 有一个 order by 子句，我的数据没有以上面显示的预期方式显示。我该如何克服这个问题？

问题是我无法更改程序，因为它正在应用程序中使用，而且报告的 Excel 版本使用相同的查询，他们希望按 DOB 顺序查看数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:01:01.087

嗯......“正确”的解决方案是将查询更改为按您要排序的字段排序：First_Name、City（然后可能按 DOB 或 Last_Name 进行完全确定的排序）。

但由于您没有该选项可用，您可以改为在 JasperReports 中进行排序。编辑您的查询，然后单击“排序选项...”按钮。这应该允许您根据需要重新排序数据。它会在报表引擎中进行较慢的排序，但较慢且正确的结果远好于不满足您需求的快速结果。

# sockets - 什么时候 htonl(x) != ntohl(x) ？（或者什么时候在同一台机器上转换网络字节顺序不等效？）

> ID：11617684
> 
> 赞同：9
> 
> 时间：2012-07-23T17:45:04.773
> 
> 标签：sockets, endianness

关于[htonl](http://linux.die.net/man/3/htonl)和[ntohl](http://linux.die.net/man/3/htonl)。这两行代码中的任何一个何时评估为假。

```
 htonl(x) == ntohl(x);

 htonl(ntohl(x)) == htonl(htonl(x)); 
```

换句话说，这两个操作何时**在同一台机器上**不等效？我能想到的唯一情况是一台机器不能使用 2 的补码来表示整数。

原因主要是历史原因，是为了编码清晰，还是出于其他原因？

今天是否存在任何现代架构或环境，其中这些在同一台机器上与网络字节顺序之间的转换在任何一个方向上都不是相同的代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-07-30T14:36:45.957

多年前，我为 UNIVAC 1100 系列大型机编写了一个 TCP/IP 堆栈。这是一个 36 位、字可寻址的计算机体系结构，具有 1 的补码算法。

当这台机器进行通信 I/O 时，来自外部世界的 8 位字节将被放入每个 9 位四分之一字的低 8 位。因此，在这个系统上，ntohl() 会将每个四分之一字中的 8 位压缩到该字的低 32 位（前 4 位为零），以便您可以对其进行算术运算。

同样，htonl() 将获取一个字中的低 32 位并撤消此操作以将每个 8 位数量放入每个 9 位四分之一字的低 8 位。

因此，要回答最初的问题，此计算机架构上的 ntohl() 和 htonl() 操作彼此非常不同。

例如：

```
COMP*                                 . COMPRESS A WORD
          LSSL      A0,36             . CLEAR OUT A0
          LSSL      A1,1              . THROW AWAY TOP BIT
          LDSL      A0,8              . GET 8 GOOD ONE'S
          LSSL      A1,1              .
          LDSL      A0,8              .
          LSSL      A1,1              .
          LDSL      A0,8              .
          LSSL      A1,1              .
          LDSL      A0,8              .
          J         0,X9              .
.
DCOMP*                                . DECOMPRESS A WORD
          LSSL      A0,36             . CLEAR A0
          LSSL      A1,4              . THROW OUT NOISE
          LDSL      A0,8              . MOVE 8 GOOD BITS
          LSSL      A0,1              . ADD 1 NOISE BIT
          LDSL      A0,8              . MOVE 8 GOOD BITS
          LSSL      A0,1              . ADD 1 NOISE BIT
          LDSL      A0,8              . MOVE 8 GOOD BITS
          LSSL      A0,1              . ADD 1 NOISE BIT
          LDSL      A0,8              . MOVE 8 GOOD BITS
          J         0,X9              . 
```

COMP 等效于 ntohl()，DCOMP 等效于 htonl()。对于那些不熟悉 UNIVAC 1100 汇编代码的人 :-) LSSL 是“左单移逻辑”一个由多个位置组成的寄存器。LDSL 是“Left Double Shift Logical”按指定计数的一对寄存器。所以 LDSL A0,8 将串联的 A0,A1 寄存器左移 8 位，将 A1 的高 8 位移到 A0 的低 8 位。

这段代码是在 1981 年为 UNIVAC 1108 编写的。几年后，当我们有一个 1100/90 并且它发展了一个 C 编译器时，我开始移植 BSD NET/2 TCP/IP 实现并实现 ntohl() 和 htonl () 以类似的方式。可悲的是，我从未完成过这项工作..

如果您想知道为什么某些 Internet RFC 使用术语“八位字节”，那是因为当时的某些计算机（如 PDP-10、Univacs 等）具有不是 8 位的“字节”。“八位字节”专门定义为 8 位字节。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T08:52:23.290

我找不到 Posix 规范的原始草案，但最近[在网上找到](http://www.open-std.org/Jtc1/sc22/open/n4217.pdf)的一份有提示。

> 网络字节顺序可能不方便处理实际值。为此，将值存储为普通整数更为明智。这称为“主机字节顺序”。按主机字节顺序：
> 
> ```
> The most significant bit might not be stored in the first byte in address order.
> 
> **Bits might not be allocated to bytes in any obvious order at all.** 
> ```
> 
> 存储在 uint8_t 对象中的 8 位值不需要与主机字节顺序进行转换，因为它们具有相同的表示形式。可以使用 htonl()、htons()、ntohl() 和 ntohs() 函数转换 16 位和 32 位值。

有趣的是，以下声明是在讨​​论下做出的

> POSIX 标准明确要求 8 位字符和二进制补码算法。

所以这基本上排除了我对 1 的补码机器实现的想法。

但是“任何明显的顺序”声明基本上表明 posix 委员会至少*考虑*了 posix/unix 在大端或小端以外的其他东西上运行的可能性。因此，不能排除将 htonl 和 ntohl 声明为不同的实现。

所以简短的回答是“htonl 和 ntohl 是相同的实现，但是两个不同函数的接口是为了将来与未知的兼容。”

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-23T17:52:46.693

并非所有机器都具有相同的字节顺序，这些方法可以解决这个问题。假设“网络顺序”是大端。如果您有一台运行大端架构的机器并运行 ntohl，则输出将与输入相同（因为端序与网络相同）。如果您的机器是小端架构，ntohl 会将数据从大端转换为小端。关于 htonl 也可以这样说（必要时将主机数据转换为网络字节顺序）。要回答您的问题，当您在具有不同字节顺序的两台机器之间传输数据时，这两个操作并不等效。

# sql - 即使使用列入白名单的 IP，也无法连接到 Azure SQL 数据库

> ID：11617687
> 
> 赞同：21
> 
> 时间：2012-07-23T17:45:14.050
> 
> 标签：sql, database, azure

我目前无法从私有数据中心中的单独远程独立专用框连接到我的 Azure SQL 数据库。

我有一个 Azure SQL 数据库，我在其中管理可以连接到该数据库的 IP 地址列表。到目前为止，这一直很有效。我最近在一个私有数据中心设置了一个新的专用框，它需要每隔 5 秒定期查询 Azure SQL 数据库，给予或接受。

问题是，尽管能够连接到其他远程 FTP 服务器、MySQL 服务器等，但此专用框无法建立与 Azure SQL 数据库的连接。Azure SQL 数据库确实在允许的连接上具有专用框的 IP 地址列表。此外，我暂时在 Azure SQL 数据库上开放了大量允许的 IP 地址（0.0.0.0 -> 255.255.255.255），以查看无法连接是否可能是由于 IP 阻塞造成的。

有没有人对可能导致这种情况的原因以及如何开始更好地调试情况有任何建议或想法？

澄清一下：我可以在我的办公室和其他地方使用具有单独 IP 地址的笔记本电脑连接到 Azure SQL 数据库，只要它们已被添加到数据库白名单中；我可以从专用盒子向外连接到远程 FTP 和 MySQL 服务器；我试图在 Azure SQL 上打开大量允许的 IP 地址，但没有成功。

**编辑**

```
C:\Users\graphite.rack.ID17157>osql -S v7o06blktw.database.windows.net -U XXXXXXX@v7o06blktw -P XXXXXXX  
[SQL Server Native Client 11.0] Named Pipes Provider: Could not open a
connection to SQL Server [53].  
[SQL Server Native Client 11.0] Login timeout expired  
[SQL Server Native Client 11.0] A network-related or instance-specific error
has occurred while establishing a connection to SQL Server. Server is not
found or not accessible. Check if instance name is correct and if SQL Server
is configured to allow remote connections. For more information see SQL Server
Books Online. 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-24T12:05:24.623

总结一下。

Windows Azure SQL 数据库（以前称为 SQL Azure）仅在 TCP 端口 1433 上运行。截至目前，它仅支持 SQL Server 身份验证、TCP 连接和 TDS 协议。

为了成功建立与 SQL Azure 的连接，必须满足以下要求：

*   创建 SQL Azure 服务器和数据库
*   设置 SQL Azure Server 的防火墙规则以接受来自将连接到该服务器的应用程序 IP 地址的连接
*   确保盒子（无论是虚拟的、家庭的还是其他的）没有阻塞出站 TCP 端口 1433
*   在连接字符串中显式强制加密
*   明确选择不信任连接字符串中的服务器证书

[请注意，由于SQL Slammer 蠕虫](http://en.wikipedia.org/wiki/SQL_Slammer)，许多（如果不是全部）ISP（互联网服务提供商）和托管商以及公司内的 IT 人员确实会阻止传出 TCP 端口 1433 。这种传出端口阻塞似乎是 SQL Azure 新手最面临的问题之一。

**2015 年 11 月更新**

自 2015 年 8 月起，提供预览功能，使您能够使用 Azure AD 对 Azure SQL 数据库进行身份验证。您可以在此处阅读有关此新预览功能的更多信息：[https ://azure.microsoft.com/en-us/documentation/articles/sql-database-aad-authentication/](https://azure.microsoft.com/en-us/documentation/articles/sql-database-aad-authentication/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-27T11:42:00.627

如果您使用企业网络访问互联网并遇到此问题，解决此问题的一种简单方法是使用手机的移动热点访问互联网。

一定要禁用你的以太网连接，它也可能连接到互联网。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-08T18:59:35.337

在这个问题上花了几个小时。最终发现我的修复是我在 Xfinity 防火墙上的设置。我把它设置为高。将设置更改为低安全性后，我可以毫无问题地连接到 Azure sql 数据库。

# javascript - JQuery 显示/隐藏链接

> ID：11617691
> 
> 赞同：1
> 
> 时间：2012-07-23T17:45:35.053
> 
> 标签：javascript, jquery, css, animation

所以这是我的困境。一直在这里使用这个 Jquery 极端代码，我需要帮助来判断某个链接是否显示。这就是我所拥有的。

切换：

```
<a href="#" id="visbilitybutton" class="button" title="Visible"><span class="icon icon84"></span></a>

<a href="#" id="visbilitybutton" class="button" title="Invisible"><span class="icon icon85"></span></a> 
```

（注意唯一不同的是图标编号）当有人单击#visbility 按钮时，这些需要来回切换。不确定执行此操作以及捕获所选内容的最佳方法。

我目前拥有的唯一代码使切换单向，但再次单击时不会返回。

```
 $(document).ready(function () { 
    $('#visbilitybutton').click(function() {
         $(this).replaceWith('<a href="#" id="visbilitybutton" class="button" title="Invisible"><span class="icon icon85"></span></a>');
    }); 
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:49:27.117

首先，您`id`的页面上不应有多个相同的属性。做`visibilitybutton`一堂课。

无论如何，您可以使用 jQuery`toggle()`函数来指定每次连续单击时要执行的操作：

```
$(".visibilitybutton").toggle(function(){
    $(this)
        .attr("title","Invisible")
        .find("span").toggleClass("icon84 icon85");
}, function(){
    $(this)
        .attr("title","Visible")
        .find("span").toggleClass("icon84 icon85");
}); 
```

如果您想提高效率，您可以像这样使用 jQuery 一口气完成所有操作，并使用一些好的技术：

```
var vis = ["Invisible","Visible"];
$(".visibilitybutton").click(function(){
    var i = 0;
    $(this)
        .attr("title",vis[i])
        .find("span").toggleClass("icon84 icon85");
    i = (i==0)?1:0;
}); 
```

更重要的是创建一个在添加元素时隐藏元素并在删除它时显示它的类（`display:none`在 CSS 中应用的类名可以正常工作）：

```
$(".visibilitybutton").click(function(){
    $(this)
        .toggleClass("hide")
        .find("span").toggleClass("icon84 icon85");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:49:39.333

你需要有唯一的ID；因此，您应该按类别选择项目。你可以使用[toggle()](http://api.jquery.com/toggle/)来处理连续的点击，你可以使用[toggleClass()](http://api.jquery.com/toggleClass/)来处理类的交换。

**HTML**：

```
<a href="#" class="button" title="Visible"><span class="icon icon84"></span></a>
<a href="#" class="button" title="Invisible"><span class="icon icon85"></span></a> 
```

**Javascript**：

```
 $(document).ready(function () { 
    $('.button').toggle(function() {
          var $button = $(this);

          $button.prop("title","Invisible");
          $button.find('.icon85').toggleClass('icon85', 'icon84');
    }, function() {
          var $button = $(this);

          $button.prop("title","Visible");
          $button.find('.icon85').toggleClass('icon84', 'icon85');
    });
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:56:15.623

该`id`属性应该对每个元素都是唯一的。`id`将属性更改`class`为每个超链接的属性。

然后，在您的 jQuery 代码中，通过类名获取超链接：

```
$('.visbilitybutton').click(function() {
    // code goes here
}); 
```

在您的事件处理程序中，您应该使用 test`title`属性，如下所示：

```
$('.visibilitybutton').click(function() {
    $this = $(this);
    if ($this.attr("title") == "Visible")
        $this.attr("title", "Invisible").find("span")
            .removeClass("icon85").addClass("icon84");
    else
        $this.attr("title", "Visible").find("span")
            .removeClass("icon84").addClass("icon85");
}); 
```

# ios - RestKit：发送特定的 JSON，请帮助，我已经尝试了我能想到的一切

> ID：11617692
> 
> 赞同：1
> 
> 时间：2012-07-23T17:45:42.343
> 
> 标签：ios, json, restkit

全部 ...

我整个周末都在这个问题上，问题仍然存在。我不知道还能做什么，任何帮助将不胜感激。我正在尝试像这样发送 JSON：

```
 { 
    "proof": 
    {
      "name":"fluff",
      "media_type":"Photo",
      "description":"This is a description"
    },
    "auth_token":"mphxNcEGJMJyU7iPmaLw"
 } 
```

我不断从 RestKit 收到以下异常：

2012-07-23 10:29:17.001 restkittest[8389:707] ***由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[valueForUndefinedKey:]：此类不符合密钥 auth_token 的密钥值编码。”

我怀疑这是因为 auth_token 不是我要传递的对象（证明）的一部分，但我不知道如何将 auth_token 与证明一起传递，因为 postObject 只需要一个对象来发布。

...这是我尝试这样做的代码：

```
@implementation proof
@synthesize name;
@synthesize description;
@synthesize media_type;
@synthesize duration;
@synthesize frequency_id;
@end

@implementation auth_token
@synthesize auth_token;
@end

- (BOOL)createProof:(proof *)proof
{
    BOOL ret = NO;

    [self.objectManager postObject:proof usingBlock:^(RKObjectLoader *loader)
     {
         loader.delegate = self;

         RKObjectMapping *proofMappingAccept = [RKObjectMapping mappingForClass:[proof class]];
         [proofMappingAccept mapKeyPath:@"name" toAttribute:@"name"];
         [proofMappingAccept mapKeyPath:@"description" toAttribute:@"description"];
         [proofMappingAccept mapKeyPath:@"media_type" toAttribute:@"media_type"];
         [proofMappingAccept mapKeyPath:@"duration" toAttribute:@"duration"];

         RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[NSMutableDictionary class]];

         [mapping mapKeyPath:@"auth_token" toAttribute:@"auth_token"];
         [mapping mapKeyPath:@"proof" toRelationship:@"proof" withMapping:proofMappingAccept];

         loader.serializationMapping = [mapping inverseMapping];

         loader.objectMapping = mapping;
     }];

    return ret;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:23:52.440

创建一个 NSDictionary，将您的证明对象作为键“proof”的值，将 auth_token 作为键“auth_token”的对象，并将 loader.sourceObject 设置为该字典。

# uiviewcontroller - 如何控制另一个 uiviewcontroller 的插座

> ID：11617696
> 
> 赞同：0
> 
> 时间：2012-07-23T17:46:02.770
> 
> 标签：uiviewcontroller, controls, iboutlet, popviewcontroller

连续3天试图解决这个问题，但仍然没有。所以我想使用从矩形按钮（按下按钮）出现的弹出视图中的滑块来控制 uiview 的 alpha，所以这里我已经做了，

主视图 .h 文件：

```
@class popView;
@interface brightscreenViewController : UIViewController <UIPopoverControllerDelegate>
{    
    IBOutlet UIView *darkView;
    IBOutlet UIButton *brightbtn;
    UIPopoverController *popvover;
    popView *pop;   
}

@property(nonatomic, retain) UIPopoverController *popover;
@property (nonatomic, retain) UIView *darkView;
@property (nonatomic, retain) popView *pop;

- (IBAction)showPop:(id)sender; 
```

主视图 .m 文件：

```
#import "brightscreenViewController.h"
#import "popView.h"

@class popView;
@interface brightscreenViewController ()

@end

@implementation brightscreenViewController
@synthesize popover;
@synthesize darkView;
@synthesize pop;

-(IBAction)showPop:(id)sender
{    
    popView *brightpop = [[popView alloc] init];
    popover = [[UIPopoverController alloc] initWithContentViewController:brightpop];
    [popover setDelegate:self];
    [popover presentPopoverFromRect:[brightbtn bounds] inView:brightbtn permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
    [popover setPopoverContentSize:CGSizeMake(229, 57)];
} 
```

在包含 uipopview 和滑块的第二个视图 .h 上：

```
@class brightscreenViewController;

@interface popView : UIViewController
{

    brightscreenViewController *brightscreen;
    IBOutlet UISlider *slider;   
}

@property (nonatomic, retain)UISlider *slider;
@property (nonatomic, retain) brightscreenViewController *brightscreen;

-(IBAction)setBrightness:(id)sender; 
```

secondview .m 文件：

```
#import "popView.h"
#import "brightscreenViewController.h"

@interface popView ()

@end

@implementation popView
@synthesize slider;
@synthesize brightscreen;

-(IBAction)setBrightness:(id)sender
{   
    brightscreen.darkView.alpha = slider.value;
} 
```

弹出框工作得很好，但不是滑块。它根本没有反应。我已经尝试使用相同的代码将滑块直接放在主视图上，它工作得很好，但是当我把它放在 uipopover 上时不起作用我真的希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:01:58.373

怎么样：

```
popView *brightpop = [[popView alloc] init];

// New line
brightpop.brightscreen = self;

popover = [[UIPopoverController alloc] initWithContentViewController:brightpop]; 
```

# ember.js - Ember.js 路由 - 有条件地阻止路由/状态更改

> ID：11617701
> 
> 赞同：12
> 
> 时间：2012-07-23T17:47:01.007
> 
> 标签：ember.js, ember-old-router

我试图弄清楚如何防止或暂停路线更改。对于我的编辑屏幕，如果用户在未保存更改时导航离开（后退按钮或其他机制），我想提示他们确保他们想要离开页面。与 非常相似`window.onbeforeunload`，但通过路由器。

以前版本的 Ember 中的状态图为您提供了一个可以使用的转换对象。似乎在 ember-latest 中，情况不再如此。那么解决这个问题的最佳方法是什么？

* * *

**编辑：**

上述问题很旧，列出的答案已过时。Ember 现在有一种本地方式来处理这个问题。请参阅文档：[http ://emberjs.com/guides/routing/preventing-and-retrying-transitions/](http://emberjs.com/guides/routing/preventing-and-retrying-transitions/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T16:02:04.150

您想要做的是使您的转换有条件。而不是`Ember.Route.transitionTo`直接使用，你想要类似的东西：

```
var transitionAfterConfirmation = function(target){
  var defaultEvent = Ember.Route.transitionTo(target),
      event = function(stateManager, context){
          if( confirm("Really go?")){
              defaultEvent(stateManager,context);
          }
      };

  event.transitionTarget = target;

  return event;
}; 
```

有关示例，请参见[http://jsfiddle.net/hjdivad/KsHCN/ 。](http://jsfiddle.net/hjdivad/KsHCN/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-26T02:28:59.340

Ember 的路由器现在有一个本地机制可以很容易地做到这一点。请参阅文档：[http ://emberjs.com/guides/routing/preventing-and-retrying-transitions/](http://emberjs.com/guides/routing/preventing-and-retrying-transitions/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T22:57:49.620

我不确定这是否可能，因为在退出状态之前（也许我错过了一些东西）没有可用的处理程序。查看[触发进入状态](https://github.com/emberjs/ember.js/blob/master/packages/ember-states/lib/state_manager.js#L646)和[enterState() 代码](https://github.com/emberjs/ember.js/blob/master/packages/ember-states/lib/state_manager.js#L670)，看起来您无法中断或取消两种状态之间的转换。

我认为这是由 Tom Dale 在[Allow canceling state transitions](https://github.com/emberjs/ember.js/issues/745)中解释的。

在您的情况下，也许您可​​以声明一个中间状态，如果用户取消，则负责重定向到先前的状态，或者如果用户接受，则转到新状态。我不得不说编写比实现更容易:(

# qt - 为什么应该只有一个 QApplication

> ID：11617702
> 
> 赞同：1
> 
> 时间：2012-07-23T17:47:01.887
> 
> 标签：qt

这是 Qt 文档的引用：

> 对于任何使用 Qt 的 GUI 应用程序，只有一个 QApplication 对象

这很清楚。但我不知道为什么。我在面试的时候被问到这样一个问题，现在我找不到合适的答案，谁能解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:04:54.773

`QCoreApplication`文档给出了提示：

> QCoreApplication 包含主事件循环，来自操作系统（例如，定时器和网络事件）和其他来源的所有事件都在其中被处理和分派。它还处理应用程序的初始化和完成，以及系统范围和应用程序范围的设置。

并且在任何给定时间（在单个线程中）只能运行一个事件循环，因此不同的`QCoreApplication`对象需要相互调用。在处理事件队列时，每个队列只能看到整个交互的一部分。对我来说似乎没有吸引力...

另外，我认为，这基本上是整个过程的抽象，因此在 Qt 进程和对象`QCoreApplication`之间强制执行 1:1 对应是有意义的。`QCoreApplication`

从技术上讲，诸如`QCoreApplication::instance()`或相应的`qApp`宏之类的东西显然需要一个`QCoreApplication`实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:31:15.673

`QApplication`包含几个单例，如消息循环和其他。

# objective-c - 使用 Xcode 访问 SOAP Web 服务

> ID：11617703
> 
> 赞同：0
> 
> 时间：2012-07-23T17:47:02.627
> 
> 标签：objective-c, sql-server, xcode

我的 Web 服务用于从 SQL Server 访问表中的数据。Web 服务有一个方法可以将前 25 行数据作为 DataSet 返回。我可以使用这个 DataSet 类还是需要返回 XML 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:54:14.827

您不能返回 DataSet，因为 Cocoa 不会将其识别为对象，因为它是 NSData 二进制或垃圾值。如果您使用某种遗留 API，则需要一个返回 XML 的方法和一个自定义 XML 解析器。

最好的解决方案是使用 JSON 数据格式返回具体值。发出请求并返回值后，您可以通过 SBJSON 解析器根据数据格式将它们解析为方便的 NSArray 或 NSDictionary。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:00:34.080

您不能使用 DataSet 对象，不。你看过[wsdl2objc](http://code.google.com/p/wsdl2objc/)吗？如果您想使用 XML，这可能会对您有所帮助。不过，我推荐 JSON，因为 .NET 提供了对 JSON（反）序列化的支持，而 Cocoa 提供了相同的支持。在 C#/VB 中将 DataSet 转换为 JSON，然后在 Objective-C 中将其转换回；我认为这是您最轻松的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:27:51.317

请记住，从 JSON 获取值时，它们最初都必须符合这个标准。

*   顶级对象是 NSArray 或 NSDictionary。
*   所有对象都是 NSString、NSNumber、NSArray、NSDictionary 或 NSNull 的实例。
*   所有字典键都是 NSString 的实例。
*   数字不是 NaN 或无穷大。

阅读此处了解更多信息。[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

# sql - 如何在“Where”子句中使用“and”和“or”

> ID：11617705
> 
> 赞同：9
> 
> 时间：2012-07-23T17:47:10.470
> 
> 标签：sql, where-clause

我有一个查询，它根据一组条件收集信息。基本上我想知道一个位置是否在当天支付了超过 50 美元，或者评论部分是否包含“过滤器”这个词......

我的查询是：

```
SELECT        Store_Id, Paid_Out_Amount, Paid_Out_Comment, Paid_Out_Datetime, Update_UserName, Till_Number
FROM            Paid_Out_Tb
WHERE        (Store_Id = 1929) AND (Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, 
                         GETDATE()), 0)) AND (Paid_Out_Amount > 50) OR
                         (Paid_Out_Comment LIKE N'%' + 'Filter' + '%') 
```

问题是它返回 460 个结果，应该只返回 2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T17:51:16.310

您需要将您的 Paid_Out_Amoutn 和 Paid_Out_Comment 标准包装在第二组括号中：

```
SELECT Store_Id, Paid_Out_Amount, Paid_Out_Comment, Paid_Out_Datetime, 
    Update_UserName, Till_Number 
FROM Paid_Out_Tb 
WHERE (Store_Id = 1929) AND (Paid_Out_Datetime >= 
    DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND 
    (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)) AND 
    (
        (Paid_Out_Amount > 50) OR (Paid_Out_Comment LIKE N'%' + 'Filter' + '%')
    ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T17:55:15.967

这实际上取决于您使用 OR 的目的。您有 Paid_Out_Amount 大于 50 或 Paid_Out_Amount 类似于 N%Filter%。在你的子句中添加一些括号

```
WHERE 
(
    (1 = 1)
    AND
    (2 = 2)
)
OR
( 3 = 3 ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T17:51:16.593

看起来您缺少一组括号：

```
SELECT        
    Store_Id
    , Paid_Out_Amount
    , Paid_Out_Comment
    , Paid_Out_Datetime
    , Update_UserName
    , Till_Number
FROM            
    Paid_Out_Tb
WHERE        
    Store_Id = 1929
    AND Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)
    AND Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)
    AND
    (
        Paid_Out_Amount > 50
        OR
        LOWER(Paid_Out_Comment) LIKE '%filter%'
    ) 
```

您还需要查看 LIKE 命令 - 更新代码以将注释全部设置为小写并搜索单词过滤器。

另请查看命令 BETWEEN 以进行 Paid_Out_Datetime 检查

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T17:50:32.487

`AND`优先于`OR`. 如果要控制优先级，则需要对条件进行分组。尝试这个：

```
SELECT        Store_Id, Paid_Out_Amount, Paid_Out_Comment, Paid_Out_Datetime, Update_UserName, Till_Number
FROM            Paid_Out_Tb
WHERE        (Store_Id = 1929) AND (Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, 
                     GETDATE()), 0)) AND ( (Paid_Out_Amount > 50) OR
                     (Paid_Out_Comment LIKE N'%' + 'Filter' + '%') ) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-23T17:55:55.277

```
SELECT        Store_Id, Paid_Out_Amount, Paid_Out_Comment, Paid_Out_Datetime, Update_UserName, Till_Number
FROM            Paid_Out_Tb
WHERE        (Store_Id = 1929) AND (Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, 
                         GETDATE()), 0)) AND (Paid_Out_Amount > 20) OR
                         (Store_Id = 1929) AND (Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, 
                         GETDATE()), 0)) AND (Paid_Out_Comment LIKE N'%' + 'Filter' + '%') 
```

我结合了您的一些建议，并得出了上述建议。这行得通。谢谢！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-23T17:50:47.693

尝试以下查询：

```
SELECT        Store_Id, Paid_Out_Amount, Paid_Out_Comment, Paid_Out_Datetime, Update_UserName, Till_Number
FROM            Paid_Out_Tb
WHERE       ((Store_Id = 1929) AND (Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, 
                         GETDATE()), 0)) AND (Paid_Out_Amount > 50)) OR
                         (Paid_Out_Comment LIKE N'%' + 'Filter' + '%') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-23T17:50:39.040

您需要将 where 子句的第一部分（直到 'OR'）括在括号中。

```
(
 (Store_Id = 1929) AND (Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, 
                         GETDATE()), 0)) AND (Paid_Out_Amount > 50)

) OR (Paid_Out_Comment LIKE N'%' + 'Filter' + '%') 
```

# sql - 如何在 Transact/SQL 中创建数据透视表？

> ID：11617713
> 
> 赞同：6
> 
> 时间：2012-07-23T17:47:43.513
> 
> 标签：sql, sql-server-2008, tsql, pivot

我的源数据表是

```
MemID Condition_ID Condtion_Result
----------------------------------
1     C1           0
1     C2           0
1     C3           0
1     C4           1
2     C1           0
2     C2           0
2     C3           0
2     C4           0 
```

我想要创建的预期视图是....

```
MemID C1 C2 C3 C4
------------------
1     1  0  0  1
2     0  0  0  1 
```

这是另一个条件。在上面的源表示例中，给定的 MemID 只有 4 行。这个数字会因实际情况而异。我的数据透视表（或任何其他解决方案）应该选择任意数量的条件结果并将它们显示为列。怎么做 ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-23T18:03:48.417

您需要使用[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 您可以使用知道要转换的列的值的 STATIC PIVOT，也可以使用在执行之前列未知的 DYNAMIC PIVOT。

**静态数据透视** （参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/e4891/1)）：

```
select *
from 
(
    select memid, Condition_id, Condition_Result
    from t
) x
pivot
(
    sum(condition_result)
    for condition_id in ([C1], [C2], [C3], [C4])
) p 
```

**Dynamic Pivot**（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/e4891/2)）：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

SET @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.condition_id) 
            FROM t c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT memid, ' + @cols + ' from 
            (
                select MemId, Condition_id, condition_result
                from t
           ) x
            pivot 
            (
                sum(condition_result)
                for condition_id in (' + @cols + ')
            ) p '

execute(@query) 
```

两者都会产生相同的结果。

# postgresql - Amazon EC2 postgresql 备份：将数据目录或 pg_dump 快照到一致快照的 EBS 卷上？

> ID：11617718
> 
> 赞同：6
> 
> 时间：2012-07-23T17:47:56.217
> 
> 标签：postgresql, amazon-ec2, backup, snapshot

我在亚马逊 EC2 上有一个 postgresql 数据库，需要确定备份这些数据的最佳方式。我正在考虑两种选择：

(1) 将 EBS 卷挂载到某个目录，例如 /pgsqldata，并将该目录用作 postgresql 数据目录（在 Amazon Linux 上，默认为 /var/lib/pgsql/data/）。然后这个卷会得到频繁的快照。

或者

(2) 将 postgresql 数据目录保留在其默认位置。然后使用 pg_dump 频繁地将备份转储到 /pgsqldumps 之类的位置，并且该卷将在每个 pg_dump 之后获得一个快照。

第三种选择是简单地对根设备卷进行快照（我使用的是 EBS 支持的实例），因为在我的情况下它既是 Web 服务器又是数据库。不过，我喜欢为数据备份提供专用卷的想法。

最后，如果我要对实时 postgresql 数据目录进行直接快照，我是否需要担心在快照过程中可能对数据库进行更改？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:45:08.983

无论如何，您都应该将卷移至其自己的 EBS 卷，这有助于解决 EBS 卷上的写入争用以及其他好处。此外，我将日志写入自己的卷并进行备份。

为了回答这个问题，我两个都做。对 EBS 卷进行快照并转储数据库。这样，如果您想将实时数据同步到开发盒（取决于数据库上的 PII），转储和恢复很容易，但您也可以轻松恢复新实例并附加快照。如果您数据库转储小于 5gb，您可以将其同步到 S3，而不必将备份存储在自己的卷上，但如果不是，您需要将其存储在自己的 EBS 卷上，然后定期快照基础。

[这](https://github.com/chandlerh/EBS-Snapshot)是我为此编写的脚本，它可能已过时，但应该可以工作。

# python - 如何使用输入 *.txt 文件绘制一个非常简单的条形图（Python、Matplotlib）？

> ID：11617719
> 
> 赞同：25
> 
> 时间：2012-07-23T17:48:01.953
> 
> 标签：python, matplotlib, bar-chart

我使用 Python 2.7 和 matplotlib。我有一个 *.txt 数据文件：

```
0 14-11-2003
1 15-03-1999
12 04-12-2012
33 09-05-2007
44 16-08-1998
55 25-07-2001
76 31-12-2011
87 25-06-1993
118 16-02-1995
119 10-02-1981
145 03-05-2014 
```

我的文件的第一列（数字）应该在我的条形图中的 Y 轴上，我的文件的第二列（日期）应该在我的直方图中的轴 OX 上。我只知道如何读取文件：

```
OX = []
OY = []

try :
    with open('data.txt', 'r') as openedFile :
        for line in openedFile :
            tab = line.split()
            OY.append(int(tab[0]))
            OX.append(str(tab[1]))
except IOError :
    print("IOError!") 
```

我确实阅读了 matplotlib 文档，但它仍然对我没有帮助。我还想将我读到的日期添加到我的条形图中，让它看起来像

![这个](../Images/2df14993809276eb2e6d386584aa8470.png)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-23T18:34:13.187

你在谈论直方图，但这不太有意义。直方图和条形图是不同的东西。例如，直方图是表示每年值总和的条形图。在这里，您似乎只是在追求酒吧。

以下是您数据中的一个完整示例，该示例显示每个日期每个所需值的条形：

```
import pylab as pl
import datetime

data = """0 14-11-2003
1 15-03-1999
12 04-12-2012
33 09-05-2007
44 16-08-1998
55 25-07-2001
76 31-12-2011
87 25-06-1993
118 16-02-1995
119 10-02-1981
145 03-05-2014"""

values = []
dates = []

for line in data.split("\n"):
    x, y = line.split()
    values.append(int(x))
    dates.append(datetime.datetime.strptime(y, "%d-%m-%Y").date())

fig = pl.figure()
ax = pl.subplot(111)
ax.bar(dates, values, width=100)
ax.xaxis_date() 
```

您需要解析日期`strptime`并将 x 轴设置为使用日期（如[本答案](https://stackoverflow.com/a/5902579/372643)中所述）。

如果您对让 x 轴显示线性时间刻度不感兴趣，而只是想要带有标签的条形图，则可以这样做：

```
fig = pl.figure()
ax = pl.subplot(111)
ax.bar(range(len(dates)), values) 
```

编辑：在评论之后，对于所有的刻度，并让它们居中，将范围传递给`set_ticks`（并将它们移动一半的条宽）：

```
fig = pl.figure()
ax = pl.subplot(111)
width=0.8
ax.bar(range(len(dates)), values, width=width)
ax.set_xticks(np.arange(len(dates)) + width/2)
ax.set_xticklabels(dates, rotation=90) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-23T18:28:02.673

此代码将执行您要查找的操作。它基于[此处](http://scienceoss.com/bar-plot-with-custom-axis-labels/)和[此处](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.bar)找到的示例。

该`autofmt_xdate()`调用对于使 x 轴标签可读特别有用。

```
import numpy as np
from matplotlib import pyplot as plt

fig = plt.figure()

width = .35
ind = np.arange(len(OY))
plt.bar(ind, OY, width=width)
plt.xticks(ind + width / 2, OX)

fig.autofmt_xdate()

plt.savefig("figure.pdf") 
```

![在此处输入图像描述](../Images/f1b95d121c013906c16a3989a237145f.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T18:11:56.563

首先，您要查找的是**柱形图**或**条形图**，而不是真正的直方图。直方图由连续变量的频率分布制成，该连续变量被分成多个 bin。在这里，您有一个针对单独标签的列。

要使用 matplotlib 制作条形图，请使用该**`matplotlib.pyplot.bar()`**方法。看看matplotlib 文档的[这个页面，它通过示例和](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.bar)[源代码](http://matplotlib.sourceforge.net/mpl_examples/pylab_examples/bar_stacked.py)很好地解释了如何做到这一点。

但是，如果可能的话，我只是建议对于像这样的简单任务，如果您可以避免编写更好的代码。如果您有任何电子表格程序，这应该是小菜一碟，因为这正是它们的用途，您不必“重新发明轮子”。以下是您在 Excel 中的数据图：

![Excel中的条形图](../Images/a302e44c48006a50ef27825241228430.png)

我刚刚从问题中复制了您的数据，使用文本导入向导将其放在两列中，然后我插入了一个柱形图。

# jquery - 获取命名函数以在 jQuery 中不断重复自身

> ID：11617722
> 
> 赞同：5
> 
> 时间：2012-07-23T17:48:15.770
> 
> 标签：jquery

我试图让一个功能在它开始后重复，但我今天必须离开，因为我无法弄清楚。这是我的代码：

```
function runNext() {
    galleryNext().delay(1500).runNext();
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T17:56:59.500

如果你想定期调用一个函数，你应该使用[`setInterval()`](https://developer.mozilla.org/en/DOM/window.setInterval).

```
var myFunction = function() {};
setInterval(myFunction, 1000); // call every 1000 milliseconds 
```

如果您需要永远停止调用该函数， setInterval() 会返回一个 id，您也可以使用它来停止计时器。这是一个例子。

```
var myFunction = function() {};
var timer = setInterval(myFunction, 1000);
clearTimeout(timer); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T17:53:52.100

您不能像 DOM 方法那样附加用户定义的函数。jQuery 链接适用于 DOM 操作和动画，因为每个进程都会返回相关的 DOM 节点。加上`delay`只是延迟动画，你想要的是在一段时间后不断运行一个函数，所以使用 setTimeout：

```
(function foo() {
  setTimeout(function() { foo() },1000);
  })(); 
```

# android - LinearLayout achartengine 图表未在 ScrollView 中显示

> ID：11617727
> 
> 赞同：8
> 
> 时间：2012-07-23T17:48:44.900
> 
> 标签：android, xml, scrollview, android-linearlayout, achartengine

我正在尝试在滚动视图中创建一个 achartengine 图表，但它不会显示！它只是显示黑屏，但不会崩溃或任何东西。问题是如果我只是将我的标签更改为图表显示就好了。在我的 Java 代码中，我确实有 renderer.setInScroll(true); 用于图表渲染器。这是我的xml的问题吗？

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

    <LinearLayout
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:orientation="vertical" >

        <LinearLayout
        android:id="@+id/trendchart"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" />
    </LinearLayout>

</ScrollView> 
```

（目前 ScrollView 中唯一的东西是我计划添加更多元素以使滚动成为必要的图表，我只是希望它首先显示）

此外，我尝试在有和没有环绕线性布局的情况下显示它，结果是相同的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T19:50:46.980

在滚动视图下，您必须插入

```
android:fillViewport="true" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T06:53:12.667

您还必须执行以下调用，否则会出现显示问题：

```
renderer.setInScroll(true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T17:35:42.953

其他解决方案是为您的 LinearLayout @+id/trendchart 指定大小：

例如：

```
<LinearLayout
        android:id="@+id/trendchart"
        android:layout_width="fill_parent"
        android:layout_height="180dp"
        android:orientation="vertical" />
    </LinearLayout> 
```

对我来说很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-29T09:00:48.630

我已经尝试了接受的答案，但它们都不适合我。我通过添加解决了我的问题

```
chartView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 500)); 
```

但不要使用
`chartView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT))`;
因为由于某种原因它仍然没有显示图表。希望对某人有所帮助

# python - 有没有办法在不运行 gnuplot 的情况下运行 grid.py？

> ID：11617730
> 
> 赞同：1
> 
> 时间：2012-07-23T17:48:51.630
> 
> 标签：python, libsvm

有没有办法在不运行 gnuplot 的情况下执行 grid.py？我宁愿不显示与程序相关的图或警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:52:09.180

[这是`grid.py`](https://github.com/dougalsutherland/libsvm/blob/master/tools/grid.py)（在我的代码的github镜像中`libsvm`）的来源。

它不是很可定制；有一些选项是通过愚蠢的手动解析而不是`optparse`/etc 完成的，并且路径`gnuplot`甚至是硬编码的；没有不画的选项。但是修改文件并删除所有与gnuplot相关的代码应该不难。

事实上，我认为你所要做的就是注释掉最后一行`process_options`

```
gnuplot = Popen(gnuplot_exe,stdin = PIPE).stdin 
```

和`redraw()`接近结束的电话`main()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-19T19:38:34.823

调用 grid.py 时，只需将路径参数替换为“null”即可。

例如，而不是：

```
cmd = '{0} -svmtrain "{1}" -gnuplot "{2}" "{3}"'.format(grid_py, svmtrain_exe, gnuplot_exe, scaled_file) 
```

利用：

```
cmd = '{0} -svmtrain "{1}" -gnuplot "{2}" "{3}"'.format(grid_py, svmtrain_exe, "null", scaled_file) 
```

# android - Android - 从网络加载图片不再工作

> ID：11617736
> 
> 赞同：-1
> 
> 时间：2012-07-23T17:49:11.693
> 
> 标签：android, url, imageview, drawable

我有我从另一个项目中复制的代码，它允许你向它传递一个 url，它会返回一张图片......然后你将它设置为一个图像视图，它会显示图片......但在某个地方...它不再显示检索到的图片...你们可以看看这段代码并告诉我是否有问题吗？？？

点击事件

```
void NextPic(View v)
{
    picNum++; //int holding what pic number we are on
    Drawable bPic = LoadImageFromWebOperations(picData[]); //picData = String[] with url data in it
    imgView.setImageDrawable(bPic); //Cast earlier in the code
} 
```

获取图片功能

```
private Drawable LoadImageFromWebOperations(String url)
{
    try
    {
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        return d;
    }
    catch(Exception e)
    {
        //Custom error handler
        uu.SendError(e.getMessage(), "Main.GetPickTask.LoadImageFromWeboperations(String url)");
        return null;
    }
} 
```

LogCat 什么都没有显示...没有发现任何错误...而且图片一直显示为空白...我什至使用 ic_launcher 图形作为占位符，所以看看它是否是 imageview 本身...但显示出来了几秒钟然后变黑

这是我使用的示例 URL [http://app.guycothal.com/Funnys/2012722133515231.jpg](http://app.guycothal.com/Funnys/2012722133515231.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:55:15.093

```
 private Drawable ImageOperations(Context ctx, String url, String saveFilename) {
        try {
            InputStream is = (InputStream) fetch(url);
            Drawable d = Drawable.createFromStream(is, "src");
            return d;
        } catch (MalformedURLException e) {
            return null;
        } catch (IOException e) {
            return null;
        }
    }
    public Object fetch(String address) throws MalformedURLException,IOException {
        URL url = new URL(address);
        Object content = url.getContent();
        return content;
    } 
```

# c++ - 在文本浏览器中打印 Qt 浮点变量

> ID：11617739
> 
> 赞同：0
> 
> 时间：2012-07-23T17:49:18.100
> 
> 标签：c++, qt

我确定我在这里遗漏了一些简单的东西，但是有没有办法在 Qt TextBrowser 中打印浮点变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:11:49.577

最简单的解决方案：

```
double d = 3.1415
QTextBrowser b;
b.append(QString::number(d)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:27:50.080

你有没有尝试过这样的事情？

```
float f = 1.414213;
QString fStr;
fStr.setNum(f);
QTextBrowser b;
b.append(fStr); 
```

# .net - 配置 IIS 7.5 以发送压缩后的 JSON 响应，NO_MATCHING_CONTENT_TYPE

> ID：11617744
> 
> 赞同：23
> 
> 时间：2012-07-23T17:49:39.613
> 
> 标签：.net, json, iis-7, http-compression

所以我试图让我的应用程序使用动态压缩和 gzip 发送它的 JSON 响应。不幸的是，这不起作用。服务器上的所有静态压缩工作正常，但不是动态的。

我已经通过添加：

```
<add mimeType="application/json" enabled="true" />
<add mimeType="application/json; charset=utf-8" enabled="true" /> 
```

到applicationHost.config 文件中的`<dynamicTypes>`部分。`<httpCompression>`我正在使用 Charles 来检查 HTTP 请求，并且可以验证我正在发送带有`Accept-Encoding: gzip, deflate`标头集的请求。我已经尝试过`Accept: */*`和`Accept: application/json`。当它不工作时，我启用了“失败的请求”跟踪日志来查找错误代码`DYNAMIC_COMPRESSION_NOT_SUCCESS`，即`NO_MATCHING_CONTENT_TYPE`.

我一直在尝试在论坛和谷歌上进行研究，但我所看到的只是人们说使用带有指定字符集的 mimeType 可以解决他们的问题，但在我的情况下它仍然无法正常工作，我可以验证响应是否到来用标题说`Content-Type: application/json; charset=utf-8`

为 JSON 响应提供服务的端点是标准的 .NET ASMX WebServices，`[ScriptService()]`在类和`[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]`方法处标注有注释。他们返回 JSON 很好，但我无法让动态压缩为我的生活工作。

由于这些也是常规的网络方法，我还添加了：

```
<add mimeType="text/xml" enabled="true" />
<add mimeType="text/xml; charset=utf-8" enabled="true" /> 
```

尝试对 XML 响应进行 gzip 压缩。令人沮丧的是，这种压缩有效，而从同一方法发送 JSON 则无效。在这一点上，我有点不知所措。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-04T17:49:56.363

您要确保`*/*`mime 类型在您添加的类型之后。还要确保您已经使用服务器管理器（或 OptionalFeatures.exe）安装了动态压缩模块

这是我用来确保完成良好压缩的命令行。（但请确保您确实安装了动态和静态压缩模块）：

```
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/serverRuntime /frequentHitThreshold:"1"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/urlCompression /doDynamicCompression:"True"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /-"dynamicTypes.[mimeType='application/json']"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/json',enabled='True']"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /-"dynamicTypes.[mimeType='application/json; charset=utf-8']"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/json; charset=utf-8',enabled='True']"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /-"dynamicTypes.[mimeType='application/javascript']"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/javascript',enabled='True']"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /-"dynamicTypes.[mimeType='application/x-javascript']"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/x-javascript',enabled='True']"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /-"dynamicTypes.[mimeType='application/x-javascript; charset=utf-8']"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/x-javascript; charset=utf-8',enabled='True']"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /-"dynamicTypes.[mimeType='*/*']"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='*/*',enabled='False']"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /-"staticTypes.[mimeType='application/javascript']"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"staticTypes.[mimeType='application/javascript',enabled='True']"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /-"staticTypes.[mimeType='application/x-javascript']"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"staticTypes.[mimeType='application/x-javascript',enabled='True']"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /-"staticTypes.[mimeType='application/x-javascript; charset=utf-8']"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"staticTypes.[mimeType='application/x-javascript; charset=utf-8',enabled='True']"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /-"staticTypes.[mimeType='*/*']"
call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"staticTypes.[mimeType='*/*',enabled='False']"

call %windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /noCompressionForHttp10:"False" /noCompressionForProxies:"False" /minFileSizeForComp:"2700" 
```

运行此之后，您的 %windir%\system32\inetsrv\config\ApplicationHost.config 应该类似于（注意*/*在底部）：

```
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files" minFileSizeForComp="2700" noCompressionForHttp10="false" noCompressionForProxies="false">
    <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
    <dynamicTypes>
        <add mimeType="text/*" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="application/json" enabled="true" />
        <add mimeType="application/json; charset=utf-8" enabled="true" />
        <add mimeType="application/javascript" enabled="true" />
        <add mimeType="application/x-javascript" enabled="true" />
        <add mimeType="application/x-javascript; charset=utf-8" enabled="true" />
        <add mimeType="*/*" enabled="false" />
    </dynamicTypes>
    <staticTypes>
        <add mimeType="text/*" enabled="true" />
        <add mimeType="message/*" enabled="true" />
        <add mimeType="application/atom+xml" enabled="true" />
        <add mimeType="application/xaml+xml" enabled="true" />
        <add mimeType="application/javascript" enabled="true" />
        <add mimeType="application/x-javascript" enabled="true" />
        <add mimeType="application/x-javascript; charset=utf-8" enabled="true" />
        <add mimeType="*/*" enabled="false" />
    </staticTypes>
</httpCompression> 
```

# javascript - Emberjs 返回 TypeError: stateManager is undefined

> ID：11617745
> 
> 赞同：0
> 
> 时间：2012-07-23T17:49:42.937
> 
> 标签：javascript, ember.js

我目前正在构建一个 emberjs，我正在尝试让路由器工作。我想测试代码，它总是给我返回一个 TypeError: stateManager is undefined error。我做错了什么吗？仅供参考，我现在只使用 json 数据没有使用任何后端。编辑：我正在使用 Ember 0.9.8.1

```
App = Em.Application.create({}); 

/* Main menu*/
App.MenuModel = Em.Object.extend({
    id : null,
    titre : null,
    questions : null,
    route: null
});

/* Submenu */
App.SubMenuModel = Em.Object.extend({
    titre : null, 
    id : null
});

/*Questions*/
App.QuestionsModel = Em.Object.extend({
    id : null,
    question : null,
    points: 0
}); 

/*************************************** Controller */
App.ApplicationController = Em.ArrayController.extend();

/* Main Menu controller */
App.MenuController = Em.ArrayController.extend({
    content:[],
        init : function(){
            var self = this;
            var data = menuComplet;
            console.log(menuComplet);
            console.log(this);
                data.forEach(function(item){
                    console.log(self);
                    self.pushObjects(App.MenuModel.create(item));
                }, data);
        }
});

/* Sub Menu controller */
App.SubMenuController = Em.ArrayController.extend({

});

/* Question controller */
App.QuestionController = Em.ArrayController.extend({

});

App.ApplicationView = Em.View.create({
    templateName: 'application'
 });

App.MenuView = Em.View.extend({
    templateName : "navigation", 
    contentBinding : "App.MenuController.content"
});

/****************************************** Router */
App.Router = Em.Router.extend({
    enableLogging : true,
    location : 'hash',
    root: Ember.State.extend({
    // STATES
        index: Ember.State.create({
            route: '/',
            connectOutlets: function (router) {
                router.get('App.ApplicationController').connectOutlet('index');
            }
        })
    })  
});
App.initialize(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:09:51.257

1.  使用最新版本的 Ember.JS。最后一个版本我不是指最后一个稳定版本，我是指 Ember.JS 的最后一个版本（自己构建或[在此处](http://cloud.github.com/downloads/emberjs/data/ember-data-latest.js)下载）
2.  将 Ember.State 替换为 Ember.Route。
3.  用 router.get('applicationController') 更改 router.get('App.ApplicationController')
4.  connectOutlet('index') 似乎也是错误的。它查找 IndexView 和 IndexController 所以我猜你需要用 'menu' 替换 'index'
5.  Replace ApplicationView.create with ApplicationView.extend (read more about it [here](https://gist.github.com/2728699))

# java - 签署 Java 小程序 - “密钥库被篡改，或密码不正确”

> ID：11617747
> 
> 赞同：3
> 
> 时间：2012-07-23T17:49:56.500
> 
> 标签：java, code-signing, keytool, jarsigner

我有一个`.cer`来自证书颁发机构（内部）的文件。我已使用以下命令将其导入密钥库：

`keytool -import -alias javaapplet -file certificate.cer -keystore javasign`

我输入了两次密钥库密码，密钥库是在当前目录中生成的（恰好是`.jar`所在的文件夹。

尝试对文件进行签名（使用`jarsigner appletname.jar javaapplet -keystore javasign`）时，在提示输入密码后出现以下错误：

`Keystore was tampered with, or password was incorrect`

我*知道*密码是正确的。输入命令的密码时`keytool -list -v -keystore javasign`，它*确实*有效。它唯一不起作用的是使用`jarsigner`命令。

有关如何解决此问题并签署我的小程序的任何线索？

# android - 应用程序通知弹出移动设备网络浏览器

> ID：11617748
> 
> 赞同：3
> 
> 时间：2012-07-23T17:49:58.090
> 
> 标签：android, iphone

不太确定如何正确描述这一点，所以希望你们中的一些人知道我的意思。

我们的客户正在为他们的网站获得一个移动应用程序，希望很快，我注意到在 android 设备上并且确定它们可能也存在于 iphones 上，一个弹出窗口通知你所说的网站有一个应用程序。我在支持 Tapatalk 的论坛和 sammobile.com 网站上看到了它。它是一条小消息和一个“确定”和“取消”按钮，确定将您带到市场上的应用程序。

只有当您知道或至少可以正确描述您要查找的内容时，Google 才会真正有用。

有谁知道 A）iPhone 也有这个功能，B）我将如何触发这样的弹出/通知？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T11:04:28.707

使用来自 java 推送触发器的一些信息以及其他一些堆栈，我把它放在一起。

```
<script type="text/javascript">
  if( /Android|iPhone|BlackBerry/i.test(navigator.userAgent) ) {
  var url=confirm("Would you like to download our mobile application?");
    if (url==true)
  {
    var url = window.location.href = 'http://www.google.com';
    url.show(); 
  }
    else
  {

  }
  }
  </script> 
```

将测试提到的 3 台设备，如果是这样，将创建一个确认框，确认后会将用户定向到另一个 url。

# sql-server - 执行计划 - 哈希与 sql 中的合并与存储过程

> ID：11617749
> 
> 赞同：1
> 
> 时间：2012-07-23T17:49:59.677
> 
> 标签：sql-server, sql-execution-plan

我遇到了一个执行非常糟糕的存储过程的问题。奇怪的是，如果我运行该程序需要几个小时。如果我在 ssms 中将程序的内容作为批处理运行，它会在合理的时间内运行。我已将问题缩小到 proc 中的单个语句。

我的第一个想法是一个糟糕的查询计划缓存。但是，将 WITH RECOMPILE 添加到 proc 或 OPTION(RECOMPILE) 到 proc 中的违规语句没有任何区别。

因此，我从执行过程和直接运行语句中捕获了（实际）执行计划，并发现了这种差异：

慢速存储过程版本`<Merge ManyToMany="True">`在 xml 中有一个元素，而普通 sql 版本有一个`<Hash>`元素。

我认为我对执行计划了解得不够多，无法确定它为什么会选择一个或另一个。

两个版本都在相同的数据上运行——等等：

```
BEGIN TRANSACTION;
exec myproc; --capture plan
ROLLBACK TRANSACTION;
BEGIN TRANSACTION
SQL Statements from procedure -- capture 2nd plan
ROLLBACK TRANSACTION 
```

当直接从 ssms 执行时，哪些类型的事情会影响程序中的计划？有人对如何进一步缩小范围有任何建议吗？

我不知道特定查询在这里有多大帮助，但它是一个 MERGE 语句：

```
MERGE schema.UpdatableView FORUPDATE
USING
 (
    large select statement that's not part of the problem
 ) DATA
ON DATA.field = FORUPDATE 
WHEN MATCHED THEN  -- 50% of the cost is here
    UPDATE SET
      LOTS of field updates
WHEN NOT MATCHED THEN -- other 50% is here
   INSERT (FIELDS)
   VALUES (FIELDS
OPTION (RECOMPILE)
; 
```

可更新视图可能是问题的一部分，但 SQL Profiler 似乎并不这么认为。视图上的基础 INSERT 和 UPDATE 触发器直到语句运行几个小时后才开始，并且它们在合理的时间内完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:39:00.853

这通常是由于不同的运行时设置，如`ANSI_NULLS`和`QUOTED_IDENTIFIER`。我建议您在用于测试查询的同一 SSMS 选项卡（同一会话）中重新创建存储过程和视图。这将确保两者都使用相同的设置。我想你会注意到两者都使用相同的计划。

# ios - 如何使用 wsdl2objc ios 捕获 Web 服务调用响应

> ID：11617750
> 
> 赞同：0
> 
> 时间：2012-07-23T17:50:10.883
> 
> 标签：ios, wsdl2objc

我正在开发一个使用 WSDL 服务器的应用程序。我已经从 wsdl2objc 生成了代码。我已经完成了创建肥皂信封请求标头并即将开始服务器调用。你们中的一些人可以建议我如何捕获我的服务器调用的响应。是否有任何委托方法来捕获响应，例如`onload()`生成的 sudzc WSDL 代码中的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T20:58:55.070

在这里您可以找到处理响应的示例编码：

```
- (IBAction)buttonPressed:(id)sender {
  LocalTimeSoapBinding *binding = [[LocalTime LocalTimeSoapBinding] initWithAddress:@"http://www.ripedevelopment.com/webservices/LocalTime.asmx"];
  binding.logXMLInOut = YES;  // to get logging to the console.

  LocalTime_LocalTimeByZipCode *request = [[LocalTime_LocalTimeByZipCode alloc] init];
  request.ZipCode = @"29687";  // insert your zip code here.

  LocalTimeSoapBindingResponse *resp = [binding LocalTimeByZipCodeUsingParameters:request];
  for (id mine in resp.bodyParts)
  {
          if ([mine isKindOfClass:[LocalTime_LocalTimeByZipCodeResponse class]])
          {
                  field.text = [mine LocalTimeByZipCodeResult];
          }
  }
} 
```

# c++ - 将输入流迭代器与数组一起使用

> ID：11617753
> 
> 赞同：1
> 
> 时间：2012-07-23T17:50:22.443
> 
> 标签：c++, arrays, stream, inputstream, std

```
#include <iterator>
#include <iostream>

using namespace std;

const int MAX_NAME_LENGTH=100;

int main()
{
    char name[MAX_NAME_LENGTH];

    cout<<"Introduce yourself\n";

    istream_iterator<char> eos;
    istream_iterator<char> isi(cin);

    for(int i=0;i<MAX_NAME_LENGTH; i++)
    {   
        if(isi == eos) 
        {
            name[i]=0; //Breakpoint is set here.
            break;
        }
        name[i] = *isi;
        isi++;
    }
    cout<<"Hi "<<name<<endl;

    system("pause");

} 
```

当我输入名称并按 Enter 键时，该程序仍然只产生一个命令提示符。经过调试，结果发现“if”永远达不到；似乎无法到达流（eos）的结尾。

1.  为什么“if”中的条件总是错误的？
2.  解决我的问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:02:14.577

到达文件末尾时满足条件，但控制台没有自然EOF，因此您需要明确告诉它末尾在哪里。您可以通过在 Windows 中按 ctrl+z 或在 Unix 中按 ctrl+d 将 EOF 字符输入到控制台。这是一个有效的示例运行：

**输入**

```
Chris
^Z 
```

**输出**

```
Hi Chris 
```

# android - Android - MediaPlayer 在播放期间/之前/播放期间更改旋转？

> ID：11617756
> 
> 赞同：0
> 
> 时间：2012-07-23T17:50:36.500
> 
> 标签：android, android-mediaplayer

我正在尝试使用 android 的相机录制视频，并希望使用 android 提供的媒体播放器播放该视频。

那么在播放时/期间/之前我们可以旋转视频吗？

# jquery-mobile - Backbone 和 JQuery Mobile：页面转换后取消绑定事件

> ID：11617759
> 
> 赞同：0
> 
> 时间：2012-07-23T17:50:38.457
> 
> 标签：jquery-mobile, backbone.js

我想在更改页面时取消绑定所有事件。我采用了[这个解决方案](http://coenraets.org/blog/2012/01/backbone-js-lessons-learned-and-improved-sample-app)，它通过 this.unbind() 调用扩展了 View 的 close 函数，并尝试将它与路由器中的 changePage 函数中的 JQM 页面转换从[这里](http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/)结合起来：

```
changePage: function(page){
        $(page.el).attr("data-role", "page");
        page.render();
        $("body").append($(page.el));
        var transition = $.mobile.defaultPageTransition;
        if(this.firstPage){
            transition = "none",
            this.firstPage = false;
        }
        $.mobile.changePage($(page.el), {changeHash: false, transition: transition});
    } 
```

然后 changePage 看起来像这样：

```
changePage: function(page){
        if (this.currentView)
            this.currentView.close();
        $(page.el).attr("data-role", "page");
        this.currentView = page;
        page.render();
        $("body").append($(page.el));
        var transition = $.mobile.defaultPageTransition;
        if(this.firstPage){
            transition = "none",
            this.firstPage = false;
        }
        $.mobile.changePage($(page.el), {changeHash: false, transition: transition});
    } 
```

但后来我得到了 JQM 错误：

```
Uncaught TypeError: Cannot call method '_trigger' of undefined jquery.mobile-1.1.0.js:2788
transitionPages jquery.mobile-1.1.0.js:2788
$.mobile.changePage jquery.mobile-1.1.0.js:3390
window.AppRouter.Backbone.Router.extend.changePage 
```

我还有 jqm-config.js，它在 pagehide 事件中删除页面的 DOM。我可以在这里取消绑定所有事件，例如：`$(event.currentTarget).unbind();`？但这也不起作用。

```
 $('div[data-role="page"]').live('pagehide', function (event, ui) {
    $(event.currentTarget).remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:17:37.467

我有同样的问题。`this.remove()`发生 JQM 错误是因为您尝试调用`close()`主干扩展方法，但事件“pagehide”已经从 DOM 中删除了视图。

```
Backbone.View.prototype.close = function () {
    if (this.beforeClose) {
        this.beforeClose();
    }
    this.remove();
    this.unbind();
}; 
```

如果您评论`this.remove()`close*方法*，它会起作用。

另一种选择是评论`$(event.currentTarget).remove();`pagehide *jqmobile*事件而不评论`this.remove()`close*方法*。

你不能两者都做，你应该选择两个选项之一。我更喜欢第二种选择，但我认为它类似于第一种选择。我不建议调用*pagehide*`unbind()`事件。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T11:24:32.737

我遇到了同样的问题，由于某种原因，pagechange 事件没有被触发，并且之前的页面没有从 DOM 中删除。一旦我删除了非活动页面，CSS 就会恢复运行。

所以我加了

```
 $('div[data-role="page"]').bind('pagehide', function (event, ui) {
        $(event.currentTarget).remove();
    }); 
```

里面

```
 $(document).bind('pagechange', function() {

     }); 
```

所以我的 jqm-config.js 看起来像这样

```
$(document).bind("mobileinit", function () {
     console.log('mobileinit');
     $.mobile.ajaxEnabled = false;
     $.mobile.linkBindingEnabled = false;
     $.mobile.hashListeningEnabled = false;
     $.mobile.pushStateEnabled = false;
//$.mobile.defaultPageTransition = "none";
});

  $(document).bind('pagechange', function() {
    $('div[data-role="page"]').bind('pagehide', function (event, ui) {
        console.log("Removing page");
        $(event.currentTarget).remove();
    });
}); 
```

我花了几个小时和[这个](https://stackoverflow.com/questions/10092111/jquery-mobile-loses-all-styles-after-navigating-pages)SO 线程来解决这个问题。希望这可以帮助某人。*

# django - Django - 如何覆盖模型上的过滤器？

> ID：11617764
> 
> 赞同：7
> 
> 时间：2012-07-23T17:51:06.350
> 
> 标签：django, django-models, django-orm

我很好奇是否有最佳实践或推荐的方法来实现这一目标？

假设我有这样的模型：

```
class Cat(models.Model):
    field1=models.CharField(...)
    field2=models.CharField(...)
    evil=models.BooleanField(...) 
```

我想要完成的是我不希望任何视图能够访问邪恶为真的 Cat 记录。

我真的需要在每个 Cat.objects.filter 调用中添加 .filter(evil=False) 吗，或者有什么方法可以在课堂上做一次，让邪恶的猫永远不会出现在任何地方？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T18:01:51.043

好的，自定义管理器可以适应这里。只需查看[文档](https://docs.djangoproject.com/en/dev/topics/db/managers/#custom-managers)。就像 Chris Pratt 所说，请记住，第一位经理会成为默认经理。

希望这会导致正确的方向。

更新（也许你可以这样做）：

```
from django.db import models

class EvilCategoryManager(models.Manager):
    def get_query_set(self):
        return super(EvilCategoryManager, self).get_query_set().filter(evil=False)

class Cat(models.Model):
    #.... atrributes here
    objects = models.Manager()
    no_evil_cats = EvilCategoryManager() 
```

# python - 我的 mod_wsgi Web 应用程序没有运行另一个脚本

> ID：11617765
> 
> 赞同：0
> 
> 时间：2012-07-23T17:51:12.627
> 
> 标签：python, linux, r, web-applications, mod-wsgi

我是 Web 开发的新手，我正在尝试创建一个简单的 mod_wsgi 应用程序，该应用程序调用一个 R 脚本，该脚本会将一些文本写入 .txt 文件，然后 mod_wsgi 读取该文件并将其显示在网页上。当我在命令行手动执行时，python 和 R 代码可以工作，但是当我尝试将它与我的 Web 应用程序集成时，它根本不执行 R 脚本，因此不会生成 .txt 文件供 Web 应用程序读取。这会导致 500 错误。

我正在使用 os.system() 将一些命令行参数传递给 R 脚本，但就像我之前所说的，R 脚本没有被执行：

```
a=2
b=3    
commandString = "/home/usr/bin/R --no-save --quiet --slave --args " + str(a) + " " + str(b) + " <webcalc.R"
os.system(commandString)
f=open('/home/usr/webapps/simple/htdocs/prob.txt','r')  #This is the file that the R script was supposed to write.
prob=f.read(2)
prob=str(prob)+'%'
f.close() 
```

我正在使用 Apache 服务器。这是我从错误日志中得到的确切错误：

```
[Mon Jul 23 17:45:42 2012] [error] [client 127.0.0.1] mod_wsgi (pid=10367): Exception occurred processing WSGI script '/home/usr/webapps/simple/htdocs/index.py'.
[Mon Jul 23 17:45:42 2012] [error] [client 127.0.0.1] Traceback (most recent call last):
[Mon Jul 23 17:45:42 2012] [error] [client 127.0.0.1]   File "/home/usr/webapps/simple/htdocs/index.py", line 88, in application
[Mon Jul 23 17:45:42 2012] [error] [client 127.0.0.1]     f=open('/home/usr/webapps/simple/htdocs/prob.txt','r')
[Mon Jul 23 17:45:42 2012] [error] [client 127.0.0.1] IOError: [Errno 2] No such file or directory: '/home/usr/webapps/simple/htdocs/prob.txt'
[Mon Jul 23 17:45:42 2012] [error] [client 127.0.0.1] File does not exist: /home/usr/webapps/simple/htdocs/favicon.ico 
```

我确信这是一个非常简单的问题，但我无法在任何地方找到解决方案。我真的很感激你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:11:52.367

**重要提示：这不受恶意输入的保护**

```
import subprocess
a=2
b=3
commandString = "/home/usr/bin/R --no-save --quiet --slave --args " + str(a) + " " + str(b) + " < /path/to/webcalc.R"
# This is BAD PRACTICE, but necessary in this instance,
# if my assumptions of R are correct.
retval = subprocess.call(commandString, shell=True) 
```

除非您的 R 解释器（或其他任何解释器）可以直接接受文件名而不是使用输入重定向，否则您必须将字符串传递给 subprocess.call() 并使用 shell=True，这是一个坏事 (tm)。

您还应该通过绝对路径而不是相对路径来指定输入脚本，就像我在示例中所做的那样。

# c++ - C++子字符串POS

> ID：11617770
> 
> 赞同：1
> 
> 时间：2012-07-23T17:51:27.980
> 
> 标签：c++, substring

我编写了一个程序，在一个包含许多有效和无效电子邮件的文本文件中查找有效的电子邮件地址。

& 然后在另一个文本文件中输出有效的电子邮件。

我遇到的问题是创建一个子字符串或对象，它将读取@符号左侧的行，如果有多个“。”，则读取为真。

例如：将这行文本作为有效的电子邮件阅读 - Jimmy.Cole@yahoo.com

&

如果有更多的“。” @ 符号后读为假。这是我的代码：

```
#include<iostream>
#include<string>
#include<fstream>
using namespace std;
const string DEFAULT_INPUT_FILENAME="fileContainingEmails.txt";
const string DEFAULT_OUTPUT_FILENAME="copyPasteMyEmails.txt";
const int N=1000;   //assuming atmost 1000 email 

//function prototypes
bool isNotDuplicateEmail(string emails[], int emailCount, string emailTemp);
bool isValidEmail(string emails[], string emailTemp);
void WriteToFile(string emails[], int emailCount, string outputFile);
void DisplayEmailsToConsole(string emails[], int emailCount);
bool isValidEmailChar(char c);
int countOccurenceOfAt(string emailTemp);
int countOccurenceOfDot(string emailTemp);

int main()
{
    //variable declaration
    ifstream fin;
    string inputFile;
    string outputFile;
    int emailCount=0;
    string emails[N];

    //ask user for input and output file name
    cout<<"Enter input file name: ";
    getline(cin,inputFile);
    cout<<"Enter output file name: ";
    getline(cin,outputFile);

    //check for default names
    if(inputFile=="")
        inputFile=DEFAULT_INPUT_FILENAME;
    if(outputFile=="")
        outputFile=DEFAULT_OUTPUT_FILENAME;

    cout<<"Input File Name = "<<inputFile<<endl;
    cout<<"Output File Name = "<<outputFile<<endl;

    //open input file
    fin.open(inputFile.c_str());
    //if file does not exists, display error message and return
    if(!fin)
    {
        cout<<"ERROR: "<<inputFile<<" doen not exists."<<endl;
        return 1;
    }

    string emailTemp;
    /*read each line from file, and if it is not a duplicate email and a valid email
    then add it to email list and increment count*/
    while(getline(fin,emailTemp))
    {
        if(isNotDuplicateEmail(emails,emailCount,emailTemp) && isValidEmail(emails,emailTemp))
        {
            emails[emailCount]=emailTemp;
            emailCount++;
        }
    }
    //close input file
    fin.close();

    //call function to write emails to output file and console
    if(emailCount>0)
    {
        WriteToFile(emails, emailCount, outputFile);
        cout << endl << emailCount << " email addresses were found, and copied to the file " << outputFile<<endl;
        DisplayEmailsToConsole(emails, emailCount);
    }
    else
    {
        cout << "Sorry, no email addresses were found in the file " << inputFile << endl;
    }

    cout << endl<< "Press ENTER to continue..." << endl;
    cin.get();
    return 0;
}

bool isNotDuplicateEmail(string emails[], int emailCount, string emailTemp)
{
    /*Check each email address and if a duplicate email is found, return false*/
    /*If email is not a duplicate email, return true*/
    for(int i=0;i<emailCount;i++)
    {
        if(emailTemp==emails[i])
            return false;
    }
    return true;
}
bool isValidEmail(string emails[], string emailTemp)
{
    if(emailTemp=="")
        return false;
    /*If there are more than 1 @*/
    if (countOccurenceOfAt(emailTemp)!=1)
        return false;
    /*If there are more than 1 .*/
    if(countOccurenceOfDot(emailTemp)!=1)
        return false;

    int index1=-1;
    int index2=-1;

    //check each character for valid email char
    for (int i=0; i<emailTemp.size(); i++)
    {
        if(!isValidEmailChar(emailTemp[i]))
            return false;
    }

    //find index of @ and .
    index1=emailTemp.find_first_of('@');
    index2=emailTemp.find_first_of('.');

    if(index1<1)
        return false;
    if(index2<index1)
        return false;
    if((index2-index1)==1)
        return false;

    if(((emailTemp.size()-1)-index2)==0)
        return false;

    return true;
}

bool isValidEmailChar(char c)
{
    /* check for valid email characters 0-9, @, ., A-Z, a-z, _, +, - */
    if(c>='0' && c<='9')
        return true;
    if(c>='A' && c<='Z')
        return true;
    if(c>='a' && c<='z')
        return true;
    if(c=='@' || c=='.' || c=='_' || c=='+' || c=='-')
        return true;

    return false;

}

/*Function to count occurence of @ in email address*/
int countOccurenceOfAt(string emailTemp)
{
    int count=0;
    for(int i=0;i<emailTemp.size();i++)
    {
        if(emailTemp[i]=='@')
            count++;
    }
    return count;
}

/*Function to count occurence of . in email address*/
int countOccurenceOfDot(string emailTemp)
{
    int count=0;
    for(int i=0;i<emailTemp.size();i++)
    {
        if(emailTemp[i]=='.')
            count++;
    }
    return count;
}

void DisplayEmailsToConsole(string emails[], int emailCount)
{
    /*Display console message and then display each email address, one at a line*/
    cout << endl << endl << "You can open the output file and copy/paste its contents into the \"to\", \"cc\", or \"bcc\" field of any email message. It is best to use the \"bcc\" field so that everyone's email address does not appear in the message, to protect their privacy"<<endl;
    cout << endl << "Email List is: "<< endl;
    for (int i=0; i<emailCount; i++)
    {
        cout << emails[i] << endl;
        cout << endl;
    }
}

void WriteToFile(string emails[], int emailCount, string outputFile)
{
    /*Open file and write each email address to output file followed by ; */
    ofstream fout;
    fout.open(outputFile.c_str());
    for(int i=0; i<emailCount; i++)
    {
        fout << emails[i] << "; " << endl;
    }
    //close file
    fout.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:04:10.973

以下代码来自《[Secure Programming Cookbook for C and C++](http://www.oreillynet.com/network/excerpt/spcookbook_chap03/index3.html) 》一书：

```
#include <string.h>

int spc_email_isvalid(const char *address) {
  int        count = 0;
  const char *c, *domain;
  static char *rfc822_specials = "()<>@,;:\\\"[]";

  /* first we validate the name portion (name@domain) */
  for (c = address;  *c;  c++) {
    if (*c == '\"' && (c == address || *(c - 1) == '.' || *(c - 1) == 
        '\"')) {
      while (*++c) {
        if (*c == '\"') break;
        if (*c == '\\' && (*++c == ' ')) continue;
        if (*c <= ' ' || *c >= 127) return 0;
      }
      if (!*c++) return 0;
      if (*c == '@') break;
      if (*c != '.') return 0;
      continue;
    }
    if (*c == '@') break;
    if (*c <= ' ' || *c >= 127) return 0;
    if (strchr(rfc822_specials, *c)) return 0;
  }
  if (c == address || *(c - 1) == '.') return 0;

  /* next we validate the domain portion (name@domain) */
  if (!*(domain = ++c)) return 0;
  do {
    if (*c == '.') {
      if (c == domain || *(c - 1) == '.') return 0;
      count++;
    }
    if (*c <= ' ' || *c >= 127) return 0;
    if (strchr(rfc822_specials, *c)) return 0;
  } while (*++c);

  return (count >= 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:11:50.503

如果您只需要知道 @ 符号之前是否有多个句点，那么只需执行以下操作：

```
if (email.find_first_of('.') == email.find_last_of('.')) 
```

如果该表达式返回 true，那么您知道该字符串只有一个句点（或没有句点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T18:05:59.633

看看这个链接： http: [//www.codeproject.com/Articles/22777/Email-Address-Validation-Using-Regular-Expression](http://www.codeproject.com/Articles/22777/Email-Address-Validation-Using-Regular-Expression)

您可以使用正则表达式来处理具有更好性能的模式匹配。

# forms - 将表单数据发布到 iframe？

> ID：11617774
> 
> 赞同：1
> 
> 时间：2012-07-23T17:51:37.497
> 
> 标签：forms, iframe

我有一个收集用户姓名和电子邮件的表单。截至目前，表单正在将收集到的数据发送到一个 txt 文件，然后将用户重定向到我网站上的一个新页面，其中有一个 iframe。

我想要做的也是将数据发送到 iframe 并将数据输入到 iframe src 中。

这就是我的表单现在的样子：

```
<form id="subform" onSubmit="window.location='/go/' "action="http://XXXXX.com/php/subscribe-form.php" method="post">
        <fieldset>
          <p>
            <input id="name" name="name" onfocus="if (this.value == 'Your Name') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Your Name';}" value="Your Name"/>
          </p>
          <p>
            <input id="email" name="email" onfocus="if (this.value == 'Your Email') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Your Email';}" value="Your Email"  class="required email" />
          </p>
          <p>
            <input class="submit" type="submit" value="Click Here"/>
          </p>
          <div id="result_sub"></div>
        </fieldset>
      </form> 
```

subscribe-form.php 然后将数据记录在一个 txt 文件中。

我想要发生的事情是仍然将数据记录在一个txt文件中，而且还将“名称”和“电子邮件”数据输入到“/go/”上的iframe的src中......例如：

```
<iframe src="http://XXXXX.com/sample=432&name=&email="></iframe> 
```

以便将用户在表单中输入的“姓名”和“电子邮件”数据插入到 iframe src`&name=`中`&email=`

这将如何完成？我真诚地感谢任何帮助，因为我几天来一直在努力解决这个问题。谢谢！

# c - 条件表达式在 C 中是否总是计算为 0 或 1？

> ID：11617776
> 
> 赞同：6
> 
> 时间：2012-07-23T17:51:54.340
> 
> 标签：c, semantics, logical-operators

条件表达式，例如那些涉及**&&**和**||的表达式** ，他们总是评估为 0 还是 1？或者对于真实情况，1以外的数字是可能的？我问是因为我想分配这样的变量。

```
int a = cond1 && cond2; 
```

我想知道我是否应该改为执行以下操作。

```
int a = (cond1 && cond2)? 1:0; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T17:53:25.220

逻辑运算符（`&&`、`||`和`!`）都计算为`1`or `0`。

C99 §6.5.13/3：

> 如果两个操作数比较不等于，则运算`&&`符应让步；否则，它会产生. 结果有类型。`1``0``0``int`

C99 §6.5.14/3：

> 如果任一操作数比较不等于，则运算`||`符应让步；否则，它会产生. 结果有类型。`1``0``0``int`

C99 6.5.3.3/5：

> 逻辑否定运算符的结果`!`是`0`如果其操作数的值比较不等于`0`，`1`如果其操作数的值比较等于`0`。结果有类型`int`。表达式 !E 等价于 (0==E)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:11:47.803

```
'&&'
  The logical-AND operator  produces the value 1 if both operands have nonzero 
  values. If   either operand is equal to 0, the result is 0\. If the first operand of a 
  logical-AND operation is equal to 0, the second operand is not evaluated. 

'||'
      The logical-OR operator performs an inclusive-OR operation on its operands. 
  The result  is 0 if both operands have 0 values. If either operand has a nonzero
  value, the result is 1\. If the first operand of a logical-OR operation has a nonzero 
  value, the second operand is not evaluated. 
```

逻辑与和逻辑或表达式的操作数从左到右计算。如果第一个操作数的值足以确定运算结果，则不计算第二个操作数。这称为“短路评估”。在第一个操作数之后有一个序列点。

谢谢， ：）

# c# - SelectorRegionAdapter 和 TabControl：如何正确使用？

> ID：11617781
> 
> 赞同：0
> 
> 时间：2012-07-23T17:52:10.277
> 
> 标签：c#, .net, wpf, prism, prism-4

我正在使用 Prism 4，并且试图弄清楚如何将 TabControl 用作区域。文档说 SelectorRegionAdapter 将用作它的区域适配器。我的主要问题是关于添加视图。

1.  适配器如何确定视图的 TabItem 的标头？

2.  如何控制 TabItem 的标题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:55:19.433

适配器不会为 TabItem 生成标头。UserControl 视图变为 TabItem.Content。要生成标题，您必须创建一个样式并将标题设置为与 Content 属性下的视图相关。然后将此样式绑定到`TabControl.ItemContainerStyle`选项卡控件上的属性。当您将视图添加到绑定到 TabControl 的区域时，将使用 ItemContainerStyle 属性中指定的样式创建一个 TabItem，并按照样式中指定的方式设置 Header。

# python - python中的有效字符串比较，包括数值评估

> ID：11617782
> 
> 赞同：3
> 
> 时间：2012-07-23T17:52:19.423
> 
> 标签：python, optimization, string-comparison

我有两个中等大小的 ascii 文件，其中包含固定格式的数据。我需要测试第一个文件的一行中的 6 个给定字段是否匹配（在给定的容差范围内）第二个文件的任何行上的六个字段，然后输出一个公共行以继续处理。

我目前正在使用 fortran 样式的行阅读器拆分文件中的每一行，并为每个列表中的每个元素生成一个具有正确类型的列表列表。我将两个文件中的列表列表存储在内存中，同时对它们进行操作

我需要比较的字段都是浮点数，我目前正在使用以下类型的流：

```
tol = 0.01
for entry1 in file1List:
    for entry2 in file2List:
        if (abs(entry1[1] - entry2[1]) < tol and abs(entry1[2] - entry2[2]) < tol 
            and abs(entry1[3] - entry2[3]) < tol and abs(entry1[4] - entry2[4]) < tol
            and abs(entry1[5] - entry2[5]) < tol and abs(entry1[6] - entry2[6]) < tol):
            print entry1,entry2 
```

在只包含少量行的文件上执行此操作很好，但超过 30000 行仅此部分的执行时间超过 1 分钟！

我相当肯定必须有一个更快的比较方法，但我很难找到它，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:16:57.370

如果您可以将元素存储在numpy 数组中`file1list`，`file2list`那么您的比较就会变得更加简单（而且可能更快）：

```
for entry1 in file1list:
    for entry2 in file2list:
        if(np.all(np.abs(entry1[1:7] - entry2[1:7]) > tol)):
            print entry1,entry2 
```

转换为 numpy 数组很轻松：

```
file1list = [ np.array(entry) for entry in file1list ] 
```

对于 sorted 来说，这会更好一些`file2list`

```
file2list=sorted(file2list,key=operator.itemgetter(1,2,3,4,5,6))
for entry1 in file1list:
    for entry2 in file2list:
        d=np.abs(entry1[1:7]-entry2[1:7])
        if(np.all(d < tol)):
            print entry1,entry2
        elif(d[0] > tol):
            break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:03:29.507

您当前的处理是`O(n m)`，`n`文件 1 中的行`m`数和文件 2 中的行数在哪里。当 时`n ~ m ~ 30,000`，它会进行 900,000,000 次比较：毫不奇怪，需要一分钟！

由于允许您偏离公差，这使情况变得更加复杂：如果它是完全匹配的，您可以从其中一个文件中创建一个值的字典，然后有`O(m)`时间构建字典以及`O(n)`进行查找的时间，因为基于散列的字典具有恒定时间查找。

一种有点相似的可能性是制作一个四舍五入值的字典，以便其中的内容由相同的值作为键，然后在找到可能的匹配项时`tol`确保所有内容都在其中。`tol`您可以通过将每个条目四舍五入到略大于`tol`: 也就是说，如果`tol`是`1e-3`，则 key 基于四舍五入到的条目`1e-2`。这有多有效取决于您的值与 的分布`tol`，但它应该非常好。

也就是说，做这样的事情（未经测试，但它应该可以工作）：

```
 import math
 import operator

 cmp_fields = operator.itemgetter(1, 2, 3, 4, 5, 6)

 # higher-order function to get a key-getting function for a given tolerance
 def key_getter(tol):
     prec = -math.log10(tol) - 1
     def inner(entry):
         return tuple(math.round(x, prec) for x in cmp_fields(entry))
     return inner

 # make the key function we want here
 key_fn = key_getter(tol)

 # build the dictionary of entries from file2: key maps to a list of entries
 file_2_entries = collections.defaultdict(list)
 for entry in file2List:
     file_2_entries[key_fn(entry)].append(entry)

 for entry1 in file1List: # for each entry from file1...
     # check only the potential matches based on rounding from 2
     for entry2 in file_2_entries[key_fn(entry2)]:
         if all(abs(x1 - x2) < tol for x1, x2
                in zip(map(cmp_fields, (entry1, entry2)))):
             print entry1, entry2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T18:09:29.027

您当前方法的问题是您将第一个文件中的每一行与第二个文件中的每一行进行比较。为了减少运行时间，您需要一种方法来短路第二个`for`循环，并使用一些逻辑，例如“如果此迭代匹配某个条件，那么我可以跳出这个循环，因为任何后续条目都不可能匹配”。

要支持此逻辑，您首先需要对两个列表进行排序，例如：

```
from operator import itemgetter
comp_fields = itemgetter(1, 2, 3, 4, 5, 6)
file1List.sort(key=comp_fields)
file2List.sort(key=comp_fields)
for entry1 in file1List:
    for entry2 in file2List:
        if (abs(entry1[1] - entry2[1]) < tol and abs(entry1[2] - entry2[2]) < tol 
            and abs(entry1[3] - entry2[3]) < tol and abs(entry1[4] - entry2[4]) < tol
            and abs(entry1[5] - entry2[5]) < tol and abs(entry1[6] - entry2[6]) < tol):
            print entry1,entry2
        elif entry2[1] - entry1[1] >= tol:
            # we know subsequent lines in file2List can't match due to ordering
            break 
```

这是一个非常幼稚的解决方案，例如，一个可能的改进是跟踪起点，例如，如果在上一次迭代中`file1List`我们在找到匹配项之前进入了 2000 行`file2List`，那么在下一次迭代中`file1List`我们可以开始迭代`file2List`在第 2000 行。它也只在第一列上进行短路，并且您可以添加一些额外的逻辑以使其在后续列上也短路（由于存在容差，而不是要求完全匹配）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T18:37:01.547

您可以根据值对 file1List 和 file2List 进行排序

```
entry1[1]^2 + entry1[2]^2 + ... + entry1[6]^2 
```

这是六空间中的两个向量度量列表。给定 file1List 中的向量，您可以使用 Newton-Raphson 方法（或二分法：Python [已经支持][1] this.

扫描 file2List 中与 file1List 的下一个值匹配的下一个值，您只需向前扫描，file2List 中的第一个值超过 tol 将意味着对 file1List 的特定值的搜索结束。

我相信原始 JOIN 实用程序的算法或多或少相似。

# ssis - 我的事实表中所有 FK 列的 FK 值是否相同？

> ID：11617785
> 
> 赞同：0
> 
> 时间：2012-07-23T17:52:22.607
> 
> 标签：ssis, ssas, data-warehouse, sql-server-2012

我是多维数据仓库的新手，我的工作场所负责开发用于报告目的的数据仓库解决方案，所以这可能是一个愚蠢的问题，但在这里......

我的事实表中的每条记录都有 FK 列，这些列链接到它们各自的维度表（例如 dimCustomer、dimGeography、dimProduct）。

在 ETL 过程中加载数据仓库时，我首先加载包含详细信息的维度表，然后加载事实表并进行查找转换以找到要放入事实表的 FK 值。这样做时，事实表中的每一行似乎都有相同值的 FK（例如，row1 在每列中的 FK 为 1，row2 的值为 2……等等）

我只是想知道这是否是典型的，或者我是否需要重新考虑仓库和 ETL 流程的设计。

任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:56:39.190

根据您的评论，听起来您的 ETL 流程中缺少步骤。

对于呼叫中心/联络中心，我可能会从这样的事实表开始：

```
CallFactID - unique key just for ETL purposes only
AssociateID - call center associate who initially took the call
ProductID - product that the user is calling about
CallTypeID - General, Complaint, Misc, etc
ClientID - company / individual that is calling
CallDateID - linked to your Date (by day) Dimension
CallTimeOfDayID - bucketed id for call time based on business rules
CallStartTimestamp - ANSI timestamp of start time
CallEndTimestamp - ANSI timestamp of end time
CallDurationTimestamp - INTERVAL data type, or integer in seconds, call duration 
```

您的维度表将是：

```
AssociateDim
ProductDim
CallTypeDim
ClientDim
DateDim
TimeOfDayDim 
```

您的 ETL 将需要首先构建维度。如果您的源系统中有一个关系模型，您通常只需转到各种事物的“查找”表，例如“产品”表或“关联”表，并对任何有意义的关系进行非规范化以包含为属性。例如，关系产品表可能如下所示：

```
PRODUCTS: ProductKey, 
          ProductName, 
          ProductTypeKey, 
          ProductManufacturerKey, 
          SKU, 
          UPC 
```

您可以通过查找产品类型和制造商将其非规范化为一般产品维度，最终得到如下内容：

```
PRODUCTDIM: PRODUCTID (DW surrogate key), 
            ProductKey, 
            ProductName, 
            ProductTypeDesc, 
            ManufacturerDesc,
            ManufacturerCountry,
            SKU,
            UPC 
```

对于仅在您的事务（通话记录）表上但基数较低的属性，您可以通过`SELECT DISTINCT`对这些表执行操作来创建维度。

加载完所有维度后，您可以通过基于自然键（已保存在维度中）对每个维度进行查找来加载事实，然后将该键分配给事实行。

有关使用 DW 星型模式的 ETL 的更详细指南，我强烈推荐 Ralph Kimball 的书[The Data Warehouse ETL Toolkit](https://rads.stackoverflow.com/amzn/click/com/0764567578)。

# iphone - beginBackgroundTaskWithExpirationHandler 永远不会被调用

> ID：11617786
> 
> 赞同：8
> 
> 时间：2012-07-23T17:52:24.917
> 
> 标签：iphone, objective-c, ios, background-process, uiapplication

我有一个在后台播放音频的应用程序。我正在尝试`beginBackgroundTaskWithExpirationHandler`在当前曲目完成后跳到下一首曲目。

这是播放状态更改时调用的代码。即使同一方法中的其他代码在后台成功实现，它也不会记录“beginBG called”。

```
UIApplication *app = [UIApplication sharedApplication];
bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    [self ffwButtonPressed:ffwButton];
    NSLog(@"beginBG called");
    [app endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
}]; 
```

`ffwButtonPressed`调用几种不同的方法来改变轨道。当那完成...

```
UIApplication *app = [UIApplication sharedApplication];
    if (bgTask != UIBackgroundTaskInvalid) {
        [app endBackgroundTask:bgTask]; 
        bgTask = UIBackgroundTaskInvalid;
        NSLog(@"end bgTask"); 
```

**编辑：**声明

```
UIBackgroundTaskIdentifier bgTask; 
```

**编辑：**在 ViewDidLoad

```
bgTask = 0; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-25T17:24:53.513

您实际上误解了该功能 `-(UIBackgroundTaskIdentifier)beginBackgroundTaskWithExpirationHandler:(void (^)(void))handler`

称为“处理程序”的块参数是后台任务到期（10 分钟）时会发生的情况。

要让您的代码运行，您需要将您的代码从过期处理程序中取出：

```
UIApplication *app = [UIApplication sharedApplication];
bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    bgTask = UIBackgroundTaskInvalid;
};

[self ffwButtonPressed:ffwButton];
NSLog(@"beginBG called");
[app endBackgroundTask:bgTask]; 
```

这是[文档的链接](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:39:35.707

我最终根本不需要`beginBackgroundTaskWithExpirationHandler`。这条线解决了我的问题...

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T09:34:47.227

beginBackgroundTaskWithExpirationHandler 处理程序仅在计时器用完时调用，该值相当大。上面 Tomsum 提到的实际任务不应该是块的一部分。还记得调用 endBackgroundTask: 最后 if backGroundTaskID != UIBackgroundTaskInvalid 并且唯一需要在块中完成的事情是设置回任务变量 = UIBackgroundTaskInvalid

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-27T17:35:31.457

您的应用是否有权作为音频应用在后台运行？（需要在您的 Info.plist 中放置正确的模式）

查看[Apple 的文档](https://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-05T10:21:40.127

可以稍作修改，我们应该在过期处理程序中添加 endBackgroundTask：

```
IApplication *app = [UIApplication sharedApplication];
bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    [app endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
};

[self ffwButtonPressed:ffwButton];
NSLog(@"beginBG called");
[app endBackgroundTask:bgTask]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-19T15:13:12.977

**斯威夫特版本：**

```
 var backgroundTask: UIBackgroundTaskIdentifier? = 0
    backgroundTask = UIApplication.shared.beginBackgroundTask(withName: "backgroundTask", expirationHandler: {() -> Void in
        backgroundTask = UIBackgroundTaskInvalid
    })

    // Perform actions in background
    YOUR_CODE_GOES_HERE (e.g. fetch requests, etc.)

    UIApplication.shared.endBackgroundTask(backgroundTask!) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-23T17:58:35.027

这是你所有的代码吗？也许`bgTask`变量没有初始化，你需要在分配之前声明bgTask。尝试这个 -

```
UIBackgroundTaskIdentifier bgTask = nil; 
```

# c++ - 如何使用 CUDA Parallel NSight 调试器查看参考变量？

> ID：11617788
> 
> 赞同：1
> 
> 时间：2012-07-23T17:52:30.540
> 
> 标签：c++, reference, cuda, visual-studio-debugging, nsight

在使用 NSight 进行调试时，我可以正确地观察任何变量或指针，但不能对参考变量进行观察。我已经尝试将引用转换为手表或即时窗口中的指针，但无济于事。我不想使用指针重写我的代码。我在 Windows 7 64 位机器、CUDA 4.0、Parallel NSight 2.0 中使用 Visual Studio 2010 SP1，并且我的代码正在为 Win32 编译。

示例：__ device__ void 函数（int& 参数）

无法调试参数。调试器无法访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:24:40.500

我已经在我的机器上重现了这个问题。Windows 7 64 位、Visual Studio 2010、CUDA 4.1。

我无法调试：

```
__device__ int myfunc(int& myint)
{
  return myint * 5;
} 
```

我可以在带有 的行上设置断点`return`，但我无法查看该变量，因为它是通过引用传递的。

如果我将其更改为：

```
__device__ int myfunc(int& myint)
{
  int debug(myint);
  return debug * 5;
} 
```

我可以查看`debug`变量。

我认为您应该向 NVIDIA 提交错误。我不知道他们的系统是否已经恢复到足够的程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:03:18.137

更新到 Nsight 2.2、CUDA 4.2 和 Dev 驱动程序 301.32 就成功了。

# ios - 将有符号 16 位 PCM 样本转换为无符号 8 位 PCM 样本时出现削波

> ID：11617791
> 
> 赞同：2
> 
> 时间：2012-07-23T17:52:36.780
> 
> 标签：ios, c, audio, signal-processing, pcm

我已经签署了存储在 SInt16 缓冲区中的单声道 16 位 PCM 音频样本，我正在尝试将它们转换为存储在 UInt8 缓冲区中的无符号单声道 8 位 PCM 样本。我编写了以下基本工作代码：

```
for (int i=0; i < numSamples; i++) { 
    SInt8 tempSigned8Bit = signed16BitBuffer[i]/127; // In 2 passes
    unsigned8BitBuffer[i] = tempSigned8Bit + 127;    // for clarity
} 
```

但是，我可以在生成的音频中听到最大幅度的削波，或者至少这是我对失真发生位置的印象。这是重新量化的产物，还是我需要包含某种钳位，如本问题中所述，关于类似转换但没有任何符号转换：

[将 16 位 pcm 转换为 8 位](https://stackoverflow.com/questions/5717447/convert-16-bit-pcm-to-8-bit)

不需要按位优化，但我当然不会拒绝它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T17:56:26.667

对于较大的值，这将失败，因为您需要除以 256 而不是 127。偏移量也需要为 128，而不是 127。

```
for (int i = 0; i < numSamples; i++) { 
    SInt8 tempSigned8Bit = signed16BitBuffer[i] / 256;
    unsigned8BitBuffer[i] = tempSigned8Bit + 128;
} 
```

+/- 满量程和零的转换如下所示：

```
Signed    Divide    Add
16 bit    by 256    128
sample

 32767 ->  127 ->   255    ; Full scale +
     0 ->    0 ->   128    ; 0
-32768 -> -128 ->     0    ; Full scale - 
```

# javascript - Web 浏览器对 Javascript 中未定义变量的操作“严格”

> ID：11617793
> 
> 赞同：0
> 
> 时间：2012-07-23T17:52:40.243
> 
> 标签：javascript, twitter-bootstrap, undefined-behavior, use-strict

如果变量`foo`未定义，通常我可以执行以下操作：

```
!foo;
foo === undefined;
foo !== 'some value'; 
```

但是，我现在正在处理的代码库中有一些东西似乎指示浏览器的解释器对除此之外的未定义变量的任何操作抛出异常：

```
typeof foo !="undefined"; 
```

我正在使用通常使用的浏览器（Chrome 和 Firefox）。但这次我将在中间进行这个项目，而不是从头开始。这是一个使用 Backbone.js、下划线、车把、jQuery、yepnope 的 dJango 项目。

这种行为可能是由于指令`"use strict"`出现在全局命名空间中的某处吗？我在项目中搜索了文本字符串“use strict”，并在一些似乎来自 twitter 的代码中找到了它：

```
    文件：bootstrap.js
           脚本.js
    来自：http://twitter.github.com/bootstrap/javascript.html#transitions

```

我还在 json2 文件中找到了它。但是我很确定这个文件在我上次使用它时没有给我带来问题：

```
    文件：json2.js
    来自：http://www.JSON.org/json2.js

```

据我所知，这甚至不是由在某处包含“使用严格”引起的......

有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:54:56.293

未声明变量时，**不能**在比较中使用它。

```
undeclaredvar = 1; 
```

是唯一有效的：`undeclaredvar`在全局命名空间中隐式声明。

函数内部的严格模式声明永远不会“泄露”全局范围的严格性。因此，`"use strict";`在 Twitter bootstrap / JSON2 中不会影响脚本的严格性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:57:49.780

*undefined*和*undeclared*之间有一个重要的区别。

```
function test() {
    var foo;
    if (foo) { /* not executed */ }
} 
```

这很好，因为`foo`已声明，但其值为*undefined*。

```
function test() {
    if (foo) { /* exception! */ }
} 
```

这将引发异常 ( `ReferenceError`)，因为`foo`未*声明*。（除非有一个`window.foo`。）

# c# - 将 Rtf、Excel、Pdf 或 Html 文件格式转换为图像

> ID：11617805
> 
> 赞同：0
> 
> 时间：2012-07-23T17:53:29.930
> 
> 标签：c#, .net, c#-4.0

我正在开发一个支持添加/编辑 Rtf 或 Excel 内容的 .NET 4 WPF/WCF/EF 4/SQL 2008 应用程序的功能。我们使用来自 Telerik 和 GrapeCity 的 3rd 方组件来支持我们产品内部的 Rtf 和 Excel 编辑。

在其他相关字段中，“Entry”实体很简单，包括`RtfContent varchar(max)`、`ExcelContent varbinary(max)`和`IsRtf (bit)`。IsRtf 指示条目是使用 Rtf (true) 还是 Excel (false)。它们是相互排斥的。

使用第 3 方控件，我可以将 Rtf 和 Excel 数据“导出”为 Pdf、Html 或 Rtf 和 Xlsx。

我们希望将 Rtf 或 Excel 内容包含到报告中，并且我们正在使用 Data Dynamics Reporting 包。由于 Data Dynamics 不提供对 Rtf、Excel、Html 或 Pdf 的支持，我对如何甚至是否可以满足此请求感到困惑。但是，它们确实提供对 Tiff（和其他一些图像格式）的支持。

我不确定这是否是一个微不足道的转换，但它可能是将此内容包含在数据动态报告中的唯一方法。

是否可以将这些格式中的任何一种转换为 Tiff 图像？或者是否有可能以某种方式将第三方控件之一的内容“捕获”为 Tiff？

我不能说我喜欢这样执行转换的想法，但我的想法已经不多了。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:13:34.353

这个问题解决了将 PDF 转换为 C# 中的不同图像的问题，并且可能对您有用。

[https://stackoverflow.com/questions/711942/convert-pdf-file-to-jpg-asp-net](https://stackoverflow.com/questions/711942/convert-pdf-file-to-jpg-asp-net)

# node.js - 如何在“消息”侦听器上删除 Redis

> ID：11617811
> 
> 赞同：17
> 
> 时间：2012-07-23T17:53:50.117
> 
> 标签：node.js, websocket, redis, publish-subscribe

一个典型的 Redis 聊天示例将是这样的（参见[https://github.com/emrahayanoglu/Socket.io-Redis-RealTime-Chat-Example/blob/master/chatServer.js](https://github.com/emrahayanoglu/Socket.io-Redis-RealTime-Chat-Example/blob/master/chatServer.js)仅一个这样的示例）：

```
io.sockets.on('connection', function (client) { //websocket connection

  redis1.subscribe("chat");

  redis1.on("message", function(channel, message) {
      console.log(message);
      client.send(message);
  });

  client.on('message', function(msg) {
    redis2.publish("chat",msg.message);  
  });

  client.on('disconnect', function() {
      redis1.quit();
  });
}); 
```

但是，这里的问题是，当`client`“断开连接”时，`redis1.on('message',FUNC(){})`侦听器仍处于连接状态。控制台将继续打印出`message`. 如果要检查 的事件侦听器`redis1`，他们仍然会发现匿名函数正在侦听。

问题是没有`redis1.off(...)`功能。那么，如何解除绑定/取消订阅/删除/移除redis消息监听器呢？

注意：不能只做 redis1.end()，因为这会破坏其他 websocket 连接用户的 redis 连接。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-23T17:53:50.117

我通过在节点 REPL 中玩耍找到的唯一解决方案是不使用该`redis.on()`功能进行订阅。相反，应该使用`redis.addListener()`and`redis.removeListener()`函数。此外，不得将匿名函数用作事件回调。可以做这样的事情：

```
var callback = function(channel, message){

};

redis1.addListener('message', callback);

client.on('disconnect', function(){
  redis1.removeListener('message', callback);    
}) 
```

# c++ - 创建“项目”定义

> ID：11617815
> 
> 赞同：0
> 
> 时间：2012-07-23T17:53:57.013
> 
> 标签：c++, vector, parameters, directx, game-engine

我正在尝试为我使用 DirectX 在 C++ 中创建的小型游戏定义基本项目的好方法。现在结构看起来像：

```
struct itemdef {
    string name;
    ID3DXMesh* mesh;
    vector<IDirect3DTexture9*> textures;
    vector<short> abilities;
}; 
```

我遇到的问题是我本质上想要制作这些基本属性的数组，而不为纹理或能力创建上限。

基本上想象它有另一个“itemdef”数组

```
vector<itemdef> itemDefs; 
```

然后想要将项目添加到该数组中，无论是硬编码还是从文件中：

```
itemDefs.push_back(NewItem("Wall", Assets.GetMesh(Mesh_Wall), ???, ???)); 
```

基本上，我不知道如何将多个单个项目放入向量数组的参数列表中。第二个问题是需要在一组参数中创建两个列表。

所以我的问题是：应该用什么来代替“？？？” 上述声明中的字段？或者，如果做不到这一点，我应该使用什么*更好*的方法来存储这些基本定义？

（为了清楚起见：纹理指针的获取方式与上面的网格几乎相同，“能力”只是短整数。虽然应该注意，对于这些定义，网格和纹理都可以用它们的枚举代替，而不是指针）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:23:39.610

我首先将向量构建为局部变量，然后将它们发送到项目构造函数：

```
vector<IDirect3DTexture9*> tex;
vector<short*> abil;
// fill them with the data you need
itemDefs.push_back(NewItem("Wall", Assets.GetMesh(Mesh_Wall), tex, abil));

itemdef NewItem(const string& name, ID3DMesh* mesh, const vector<IDirect3DTexture9*>& textures, const vector<short*>& abilities)
{
  itemdef retval;
  retval.name = name;
  retval.mesh = mesh;
  retval.textures = textures;
  retval.abilities = abilities;
  return retval;
} 
```

或者，您可以编写一些函数来构建并返回向量。

PS：你为什么使用一些全局`NewItem`函数而不是构造函数？

# python - 如何绑定到 Tkinter 中的所有数字键？

> ID：11617816
> 
> 赞同：3
> 
> 时间：2012-07-23T17:53:57.647
> 
> 标签：python, user-interface, tkinter

有没有办法绑定到 Tkinter 中的所有数字键？

它应该等同于：

```
frame.bind("0", my_handler)
frame.bind("1", my_handler)
frame.bind("2", my_handler)
... 
```

我希望我能找到类似的东西：

```
frame.bind("< num>", my_handler) 
```

但显然这不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T17:56:10.160

只需使用一个循环：

```
for i in xrange(10):
    frame.bind(str(i), my_handler) 
```

（如果使用 Python 3，请替换`range`为`xrange`。）

# silverlight - 操作 silverlight 媒体元素并与 jQuery UI Widget 关联

> ID：11617818
> 
> 赞同：-1
> 
> 时间：2012-07-23T17:54:09.830
> 
> 标签：silverlight

我没有 ASP 和 Silverlight 的背景。作为一名 jQuery UI 小部件开发人员，我必须为 silverlight 媒体元素播放器编写一个搜索栏小部件。如果我必须将它与 silverlight 相关联，我需要了解如何为我的小部件定义一个接口？

如何拦截 MediaElement 实例？
我怎么知道什么是总媒体时长？
我如何知道当前的媒体位置？
我怎样才能让玩家从某个特定位置进行比赛？
如何将事件与 silverlight 播放器绑定，以便每次滴答时它都应该调用我的搜索栏来更新？

所有我想要的 JS/jQuery 环境。什么是开始的最佳来源？

注意：我来自 linux 背景，所以我的浏览器有月光。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:19:39.337

您应该阅读MSDN 上[用于 Silverlight 的 JavaScript API](http://msdn.microsoft.com/en-us/library/cc903928%28v=vs.95%29.aspx)参考。它将为您的所有问题提供答案。

# c++ - C++ 类中的任意数据类型

> ID：11617821
> 
> 赞同：2
> 
> 时间：2012-07-23T17:54:22.817
> 
> 标签：c++, polymorphism

我想创建一个类来将辅助数据存储在任意对象中-这样做的干净方法是什么？

```
class A{
    std::string _name;
    int _val;
    void * _extraData;

    //I want to implement these methods
    void setExtraData(void * data){
        //
    }   

    void * getExtraData(){
    }   
};

class B{
    std::vector<A *> v;

    void foo(){
        //use A here - _extraData will      
        //be a (say) a vector<int>
    }
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T17:57:12.107

`boost::variant`如果你有一组已知的类型，我会开始`boost::any`。您总是可以评估您的设计，看看具有抽象接口的多态性是否也可以解决您的问题（有时它没有帮助）。有关您尝试解决的实际问题的更多详细信息可能有助于得出更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:07:14.923

模板，如果您在编译时知道将使用哪种数据类型：

```
template typename T
class A{
  std::string _name;
  int _val;
  T _extraData;

  void setExtraData(T data){
  }   

  T getExtraData(){
  }   
};

class B{
  std::vector<A<int> *> v;
  void foo(){
  }
}; 
```

如果您在编译时不知道，即它取决于例如用户输入，那么 a `union`or `boost::any`（如@chris 所建议）是解决方案。

# android - 开始使用 github

> ID：11617822
> 
> 赞同：0
> 
> 时间：2012-07-23T17:54:32.593
> 
> 标签：android, github, commonsware

我正在浏览一本带有链接的书，告诉我从 github 下载东西。例如查看[https://dl.dropbox.com/u/39662979/githubShot.png](https://dl.dropbox.com/u/39662979/githubShot.png)。对于我的生活，我无法弄清楚如何下载那个 ActionBarSherlock 目录的内容。我习惯了有一个“下载”按钮，你只需点击按钮就可以得到你的东西。有人可以给我一个线索吗？

我通过了帮助，但没有帮助。

谢谢，加里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:06:53.393

当您位于项目的根目录时，有一个标有“ZIP”的下载按钮。这将下载*整个*项目。我知道没有简单的方法可以下载*单个*目录。

![我所看到的...](../Images/1cde91fa3c68572ce49e59974ecfa159.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:59:39.773

阅读 GitHub 本身的帮助页面，了解如何分叉存储库：

[https://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)

在本文之后，您将获得本地计算机上存储库的副本。

或者，如果您单击右上角的“下载”链接（该图像中的标签 7 旁边），Github 将打开一个 doalog 并为您提供将存储库下载为 zip 文件或 .tgz（tar + gzip) 文件。

希望有帮助。

# asp.net - 将会话数据持久化到子视图 MVC 3

> ID：11617826
> 
> 赞同：0
> 
> 时间：2012-07-23T17:54:50.223
> 
> 标签：asp.net, asp.net-mvc-3, session, razor

因此，我正在开发一个 MVC 3 项目，该项目从遗留数据源的多个 (10) 表中提取到具有 6 个部分的主视图。有一个表包含每个子视图的数据，因此我们决定将其存储在会话数据中，然后使用所需的任何其他数据填充其余子视图。

当我们最初尝试这样做时，我们得到了会话数据的空引用异常。我想出了一个解决方案，但它看起来很笨拙，我不认为这是最佳实践/引入不必要的状态。

相关代码如下：

这就是我们在主控制器上的内容：

```
public ActionResult PolicyView(string PolicyID)
    {
        IPolicyHolder phdata = new PolicyHolderData();
        Polmast policy = phdata.GetPolicyFromUV(PolicyID);
        ViewBag.FullName = policy.FULLNAME;
        ViewBag.PolicyID = PolicyID;
        Session["polmast"] = policy;
        return View("PolicyView");
    } 
```

然后在我们的主视图中，部分子视图的链接之一：

```
<div id="Billing">
@{ Html.RenderAction("Billing", Session["polmast"] ); }
</div> 
```

在子控制器中：

```
public ActionResult Billing(object sessiondata)
    {
        return PartialView("_Billing", sessiondata);
    } 
```

在子视图中：

```
@{var polmast = (Polmast)Session["polmast"];}
**snip**

<table id="premiumsgrid" class="display" border="1" 
cellpadding="0" cellspacing="0" width="50%">
<thead>
    <tr>
        <th>Annual</th>
        <th>Semi-Annual</th>
        <th>Quarterly</th>
        <th>Monthly</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>@polmast.PAN</td>
        <td>@polmast.PSA</td>
        <td>@polmast.PQT</td>
        <td>@polmast.PMO</td>
    </tr>

</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:03:44.113

我建议开始使用模型并将它们返回到您的视图中，而不是传递会话对象并将其投射到您的视图中。它会使这段代码更干净。

这就是我构建代码的方式：

```
public ActionResult PolicyView(string PolicyID)
    {
        IPolicyHolder phdata = new PolicyHolderData();
        Polmast policy = phdata.GetPolicyFromUV(PolicyID);

        PolicyModel model = new PoliceModel() {
            FullName = policy.FULLNAME,
            PolicyID = PolicyID
            //Populate other properties here.
        };

        Session["polmast"] = policy;

        return View("PolicyView", model);
    } 
```

然后我将设置您的主视图（无需将此调用包装在花括号中，并且您不需要传递任何路由值）：

```
<div id="Billing">
    @Html.RenderAction("Billing")
</div> 
```

子控制器：

```
public ActionResult Billing()
    {
        //Get the data out of session; it should already exist since your parent controller took care of it.
        var policyData = (Polmast)Session["polmast"];

        PolicyModel model = new PoliceModel() {
            FullName = policy.FULLNAME,
            PolicyID = PolicyID
            //Populate other properties here.
        };

        return PartialView("_Billing", model);
    } 
```

和你的孩子观点：

@model Polmast **截图**

```
<table id="premiumsgrid" class="display" border="1" 
cellpadding="0" cellspacing="0" width="50%">
<thead>
    <tr>
        <th>Annual</th>
        <th>Semi-Annual</th>
        <th>Quarterly</th>
        <th>Monthly</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>@Model.PAN</td>
        <td>@Model.PSA</td>
        <td>@Model.PQT</td>
        <td>@Model.PMO</td>
    </tr>

</tbody>
</table> 
```

# ios - iOS 故事板应用程序 + AppDelegate

> ID：11617827
> 
> 赞同：0
> 
> 时间：2012-07-23T17:54:55.107
> 
> 标签：ios, xcode, storyboard

无法在配置文件中指出我的应用程序委托是 AppDelegate.h 的位置？或者也许这个名字默认使用总是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:06:30.693

如果您查看 main.m，UIApplicationMain() 的第四个参数是应用程序委托的类：

```
@autoreleasepool {

    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));

} 
```

该调用的结果将创建此类的一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:57:15.333

查看 main.m（对 的调用`UIApplicationMain`）。那里的样板有类定义。

# php - PHP代码的正则表达式？

> ID：11617829
> 
> 赞同：0
> 
> 时间：2012-07-23T17:54:56.320
> 
> 标签：php, regex, drupal

我有以下代码

```
<?
php drupal_set_message("Your registration submission has been received.");
drupal_goto("/events-initiatives/events-listing");
?> 
```

我想删除所有内容，但`Your registration submission has been received.`这个消息会改变，所以我需要它是一个通配符。所以它也会说

```
<?php

drupal_set_message("Testing!!!"); 
drupal_goto("/events-initiatives/events-listing"); 

?> 
```

但我不知道如何编写 PHP 代码，我目前的代码是

```
preg_replace('#(<?php drupal_set_message(").*?("); drupal_goto("/guidelines-resources/professionals/lending-library"); ?>)#', '$1$2', $string); 
```

但这不起作用，其中的 ( 似乎有问题。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:12:41.590

通过查看您的原始帖子，（在您的正则表达式更改为 PHP 代码段之前）我建议您正在寻找一个正则表达式：

`#<\?php\s+drupal_set_message\(".*?"\);\s+drupal_goto\("/guidelines-resources/professionals/lending-library"\);\s+\?>#`

请注意，此正则表达式：

*   使用前面的斜杠转义所有特殊字符（例如 ?、( 和 )）
*   替换`\s+`与一个或多个连续空白字符匹配的单个空格

**编辑**

重读您的问题后，如果您只想留下作为参数传递给 的文本，请`drupal_set_message`尝试以下操作：

```
$pattern = '#\bdrupal_set_message\("(.*?)"\)#';
$found = preg_match($pattern, $subject, $matches);

// if found, $matches[1] will contain the argument to drupal_set_message 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T17:59:34.687

您可以使用反斜杠转义特殊字符（尽管实际上，只是左括号和右括号）。附带说明一下，如果您有一个不错的 IDE，那么它应该具有复杂的正则表达式搜索和替换功能；使用它（尽管如果这样做，您可能还需要转义正斜杠，因为这些是您的 IDE 最有可能使用的分隔符）。

# sql-server - 使用同义词跨数据库共享存储过程

> ID：11617832
> 
> 赞同：3
> 
> 时间：2012-07-23T17:55:16.577
> 
> 标签：sql-server, stored-procedures, code-reuse

我有两个不同的 SQL Server 数据库（在同一台服务器上——如果有帮助的话），它们需要共享相同的存储过程逻辑。我试图实现的解决方案如下所示：

```
Database1
  Table: TestTable
  Synonym: sp_MyProc pointing at SharedDatabase.dbo.sp_MyProc

Database2
  Table: TestTable
  Synonym: sp_MyProc pointing at SharedDatabase.dbo.sp_MyProc

SharedDatabase
  Proc: sp_MyProc which runs queries against TestTable 
```

我希望使用同义词，这样如果我在 Database1 的上下文中执行 sp_MyProc，它将使用 Database2.TestTable。如果我在 Database2 的上下文中执行 sp_MyProc，它将违反 Database2.TestTable。但是，当我通过任一同义词执行 sp_MyProc 时，它会忽略同义词的上下文并执行查找未找到的 TestTable 的本地副本。

有没有办法通过同义词或其他机制实现对不同数据库中表的不同副本执行的共享存储过程？

**编辑**
我应该提到，在我的情况下，我希望使用大量现有表和过程来执行此操作，因此任何需要修改过程或表本身的解决方案都不理想。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:08:06.310

像这样的东西适用于过程的定义。一定要防止 SQL 注入，因为它是动态构建的。

```
CREATE PROCEDURE [dbo].dosomething 
  @databaseName sysname,
  @schema sysname,
  @tableName sysname
  as
  declare @cmd as nvarchar(max)
  set @cmd = N'select * from ' + quotename(@schema) + N'.' + quotename(@tableName)
  exec sp_executesql @cmd 
```

然后像这样使用它：

```
 dosomething 'SampleDb', 'dbo', 'sampleTable' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:17:22.153

如果存储过程在 SharedDatabase 中，那么它将始终在 SharedDatabase 的上下文中运行。为了完成您试图集中代码的操作，我可能会传入一个参数来指定它来自哪个服务器，这样您就可以针对该特定的 TestTable 执行查询。基本上，您需要使用它们的完全限定名称来引用每个表 - 即 Database1.dbo.TestTable

```
 USE SharedDatabase

  CREATE PROCEDURE [dbo].sp_MyProc 
  @dbsource varchar(50)
  as 

  if(@dbsource == 'DB1')
  begin

    select * from Database1.dbo.TestTable

  end
  else
  begin

    select * from Database2.dbo.TestTable

  end

  GO 

```

另一种选择是在 SharedDatabase 中创建一个视图，该视图将被称为 TestTableComposite，并带有一个额外的列来标识源数据的位置。然后将其作为参数传入，SharedDatabase 上的 SP 将始终位于该数据库的上下文中。

# java - 从 Javascript 调用 Java 方法

> ID：11617837
> 
> 赞同：0
> 
> 时间：2012-07-23T17:55:53.487
> 
> 标签：java, javascript, android, cordova

> **可能重复：**
> [在 javascript 代码中调用 java 方法](https://stackoverflow.com/questions/6649125/calling-java-methods-in-javascript-code)

可以从javascript调用java方法吗？我正在使用phonegap，但未集成推送通知功能，因此我决定创建由Java 制成的Push 部分，然后我想从Javascript 调用Java 几个函数。这是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:59:38.290

使用[Direct Web Remoting](http://directwebremoting.org/dwr/index.html)进行 Javascript 到 Java 的交互

> DWR 是一个 Java 库，它使服务器上的 Java 和浏览器中的 JavaScript 能够尽可能简单地进行交互和调用。
> 
> DWR 是 Java 的简易 Ajax

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:59:58.770

根据 java 代码，可以将其转换为 javascript，提供可以从现有 javascript 调用的 javascript 方法。

[GWT](https://developers.google.com/web-toolkit/overview)编译器可用于从 java 代码生成 javascript，但您可以使用哪些 java 库存在限制。

由于您提到了 phonegap，这可能对您也有用：[gwt-phonegap](http://code.google.com/p/gwt-phonegap/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T17:58:32.650

`Javascript`在客户端浏览器上`java`运行，代码在服务器上运行，除非您使用其他方式（HTTP），否则`Applet`无法直接调用 java`javascript`

# java - 为什么这段代码输入字符串并输出 int 不起作用？爪哇

> ID：11617843
> 
> 赞同：3
> 
> 时间：2012-07-23T17:56:10.893
> 
> 标签：java, string, if-statement, int

> **可能重复：**
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

我认为这将是构建选择器方法的一种巧妙方法，但输出不会转到前两个 if 语句，而只输出最后一个

```
 public int myPickerMethod(){

        System.out.println("please select from the options ");
        System.out.println("please select 1 for option 1 ");
        System.out.println("please select 2 please select 2 for option 2");
        String input = keyboard.readLine();
        System.out.println("input = " + input);     

        if(input=="1"){

                return 1;
        }
        else if(input=="2"){
            return 2;
        }
        else{
            return 42;
        }
   } 
```

这是我从终端得到的结果：

```
 please select from the options 
   please select 1 for option 1 
   please select 2 please select 2 for option 2
   1
   input = 1
   response = 42 
```

如果我放入 2 也是如此。“响应”打印语句是主类中打印语句的方法的输出。

我以前没有尝试过这种方式，但我认为它应该可以工作。我真的不明白为什么它不是。任何人都能够清除这个？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T17:59:11.893

在 Java 中，您需要使用 equals 方法比较字符串：

```
if ( input.equals("1") ) {
    // do something...
} 
```

从 Java 7 开始，您也可以在 switch 语句中使用字符串：

```
switch ( input ) {

    case "1":
        // do something...
        break;

    case "2":
        // do something...
        break;

} 
```

**编辑：**作为我的回答的补充，这里是一个使用带有字符串的开关和类的反汇编代码（使用 javap -c）以及它为什么工作（标签 8 和 11）的示例。

**Foo.java**

```
public class Foo {

    public static void main( String[] args ) {

        String str = "foo";

        switch ( str ) {

            case "foo":
                System.out.println( "Foo!!!" );
                break;

            case "bar":
                System.out.println( "Bar!!!" );
                break;

            default:
                System.out.println( "Neither Foo nor Bar :(" );
                break;

        }

    }

} 
```

**反汇编的 Foo.class 代码：**

```
Compiled from "Foo.java"
public class Foo {
  public Foo();
    Code:
       0: aload_0       
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return        

  public static void main(java.lang.String[]);
    Code:
       0: ldc           #2                  // String foo
       2: astore_1      
       3: aload_1       
       4: astore_2      
       5: iconst_m1     
       6: istore_3      
       7: aload_2       
       8: invokevirtual #3                  // Method java/lang/String.hashCode:()I  << hashCode here! (I wrote this!)
      11: lookupswitch  { // 2

                 97299: 50                  // 97299: hashCode of "bar" (I wrote this!)

                101574: 36                  // 101574: hashCode of "foo" (I wrote this!) (yep, they where swaped. the lesser hashCode first)
               default: 61
          }
      36: aload_2       
      37: ldc           #2                  // String foo
      39: invokevirtual #4                  // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      42: ifeq          61
      45: iconst_0      
      46: istore_3      
      47: goto          61
      50: aload_2       
      51: ldc           #5                  // String bar
      53: invokevirtual #4                  // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      56: ifeq          61
      59: iconst_1      
      60: istore_3      
      61: iload_3       
      62: lookupswitch  { // 2

                     0: 88

                     1: 99
               default: 110
          }
      88: getstatic     #6                  // Field java/lang/System.out:Ljava/io/PrintStream;
      91: ldc           #7                  // String Foo!!!
      93: invokevirtual #8                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      96: goto          118
      99: getstatic     #6                  // Field java/lang/System.out:Ljava/io/PrintStream;
     102: ldc           #9                  // String Bar!!!
     104: invokevirtual #8                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
     107: goto          118
     110: getstatic     #6                  // Field java/lang/System.out:Ljava/io/PrintStream;
     113: ldc           #10                 // String Neither Foo nor Bar :(
     115: invokevirtual #8                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
     118: return        
} 
```

一件有趣的事情是，另一个开关是用整数创建的（标签 62），它是不是在做“真正的工作”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T17:57:58.713

**1.**在java中用于比较，在Java中`.equals`是一个**Object**。`Objects``String`

 ****例如：** `if(input.equals("1"))`

**2.**这是**可选**的，但如果你尝试使用 Scanner 类，它也会很好。

**例如：**

```
Scanner scan = new Scanner(System.in);
String input = scan.nextLine(); 
```

**3.**最好用`switch`statement**代替** `if-else`ladder，如果用switch的`String`话**就必须有** `jdk 1.7 or above`，**否则如果你用的jdk版本小于** `1.7`，那么可以**把String转成character然后在switch中使用。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-23T17:58:36.083

要测试 Object（非原始类型）相等性，请使用`Object.equals()`.

```
if(input.equals("1")) {

    return 1;
} 
```

运算符检查对对象的`==`引用是否相等。`String.equals() method`除其他检查外，在中完成了对引用相等性的测试。以下是该`String.equals()`方法的 Java 源代码：

```
public boolean equals(Object anObject) {
     if (this == anObject) {      // Reference equality
         return true;
     }
     if (anObject instanceof String) {
         String anotherString = (String)anObject;
         int n = count;
         if (n == anotherString.count) {  // Are the strings the same size?
             char v1[] = value;
             char v2[] = anotherString.value;
             int i = offset;
             int j = anotherString.offset;
             while (n-- != 0) {
                 if (v1[i++] != v2[j++])        // Compare each character
                     return false;
             }
             return true;
         }
     }
     return false;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T17:57:43.247

不要比较字符串（或任何对象）的值`==`。使用`equals`方法如`if(input.equals("1"))`.

`==`用于检查引用是否包含相同的对象，例如

```
Integer i1=new Integer(1);
Integer i2=new Integer(1);
Integer i3=i1;
//checking references
System.out.println(i1==i2);//false
System.out.println(i1==i3);//true

//checking values
System.out.println(i1.equals(i2));//true
System.out.println(i1.equals(i3));//true 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-23T17:57:52.620

对象比较应该[`.equals`](http://blogs.adobe.com/cantrell/archives/2003/04/how_equals_work.html)不是`==`而且`String`是对象。

input=="1" 应该是 input.equals("1")

**编辑** 即使您使用以下始终有效，`==`因为它们是文字并且 java 分配相同的内存位置。

```
 String s ="Hi";
 String s1= "Hi";

 if(s==s1)
 {
     System.out.println("Yes they are same");
 } 
```

但是，当我们读取两个单独的字符串`(new String())`时，除非您覆盖`equals`and `hashcode`，否则可能不满足相等条件。阅读上面的链接了解更多详情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-23T17:59:44.383

使用`equals`方法......

```
public int myPickerMethod(){

    System.out.println("please select from the options ");
    System.out.println("please select 1 for option 1 ");
    System.out.println("please select 2 please select 2 for option 2");
    String input = keyboard.readLine();
    System.out.println("input = " + input);     

    if(input.equals("1")){

            return 1;
    }
    else if(input.equals("2")){
        return 2;
    }
    else{
        return 42;
    } 
```

}**

# android - 2D Quads：在 Android 上使用 OpenGL ES 2.0 进行翻译

> ID：11617846
> 
> 赞同：3
> 
> 时间：2012-07-23T17:56:15.857
> 
> 标签：android, opengl-es, matrix, 2d, translation

我有一个简单的 2D 引擎，可以渲染 2D 纹理四边形，现在我可以缩放四边形或旋转它，但是当我尝试翻译它时，我有一个奇怪的失真（四边形在屏幕的左半部分被挤压无限透视效果），代码如下：

```
private final float quad_vertex[] = {
-0.5f, 0.5f, 0.0f,   // top left
-0.5f, -0.5f, 0.0f,  // bottom left
0.5f, -0.5f, 0.0f,   // bottom right
0.5f,  0.5f, 0.0f    // top right
}; 

final float left = -width/2.0f;
final float right = width/2.0f;
final float bottom = -height/2.0f;
final float top = height/2.0f;
final float near = 0.1f;
final float far = 200.0f;

Matrix.orthoM(projection_matrix, 0, left, right, top, bottom, near, far);
Matrix.setLookAtM(view_matrix, 0, 0, 0, 1.0f, 0.0f, 0f, 0f, 0f, 1.0f, 0.0f); 
```

...

```
Matrix.setIdentityM(model_matrix, 0);

Matrix.scaleM(model_matrix, 0, scale_width, scale_height, 1.0f);
Matrix.translateM(model_matrix, 0, x, 0, 0);
//Matrix.rotateM(model_matrix, 0, x, 1, 0, 0);
x = x + 1.0f;

Matrix.multiplyMM(viewprojection_matrix, 0, projection_matrix, 0, view_matrix, 0);
Matrix.multiplyMM(modelviewprojection_matrix, 0, viewprojection_matrix, 0, model_matrix, 0); 
```

那么，知道是什么问题吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T01:39:46.017

听起来像我遇到的类似问题。我在[http://developer.android.com/training/graphics/opengl/index.html](http://developer.android.com/training/graphics/opengl/index.html)使用教程代码。将着色器代码中的一行从更改`gl_Position = vPosition * uMVPMatrix;`为`gl_Position = uMVPMatrix * vPosition;`修复问题。

矩阵乘法是一种非交换运算——操作数的顺序很重要！

# database - 如何在数据库中实现标签跟踪？

> ID：11617859
> 
> 赞同：1
> 
> 时间：2012-07-23T17:57:12.970
> 
> 标签：database, database-schema

我正在制作一个用户可以关注标签的微博网站。就像在 twitter 中一样，用户可以关注其他用户。在我的项目中，他们也可以关注标签。实现标签跟踪的数据库设计应该是什么？用户跟踪很容易。

一种方法是在包含帖子的表中有 5 个标签 ID 列：

表：帖子
列：PostID、AuthorID、TimeStamp、Content、Tag1、Tag2...Tag5

我将制作两个逗号分隔的列表：一个是给定用户关注的用户，另一个是给定用户关注的标签：$UserFollowingList 和 $TagFollowingList

并且选择查询可以是：

select ... from `Posts` where ($Condition1) or ($Condition2) order by `PostID` desc ...

$Condition1 = "$UserFollowingList 中的`AuthorID`"
$Condition2 = " ($TagFollowingList 中的`Tag1`) 或($TagFollowingList 中的`Tag2`) ...或($TagFollowingList 中的`Tag5`)"

请建议一个更好的方法？如果我不想限制为 5 个标签怎么办？我有一个想法，但想知道像你这样有经验的开发人员会做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:04:20.253

您可以使用一张桌子来关注谁喜欢谁

```
CREATE TABLE `followers` (
`targetID` INT(10) UNSIGNED NOT NULL,
`targetType` ENUM('user','tag') NOT NULL,
`userID` INT(10) UNSIGNED NOT NULL,
PRIMARY KEY (`targetID`, `targetType`),
INDEX `userID` (`userID`)
) 
```

另一个用于每个帖子中的标签，例如

```
CREATE TABLE `postTags` (
`postID` INT(10) UNSIGNED NOT NULL,
`tag` INT(10) NOT NULL,
PRIMARY KEY (`postID`, `tag`)
) 
```

编辑：抱歉，第一次没有考虑到它。为了避免使用字符串，因为`targetID`也必须有一个`tags`表

```
CREATE TABLE `tags` (
`tagID` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
`tag` VARCHAR(255) NOT NULL DEFAULT '',
PRIMARY KEY (`tagID`)
) 
```

这将为您提供 $currentUser 正在关注的帖子

```
SELECT
    p.*
FROM posts p
JOIN posttags pt on pt.postID = p.postID
JOIN followers f ON f.targetType = 'tag' AND f.targetID = pt.tagID
WHERE 
    f.followerID = $currentUserID

UNION 

SELECT
    p.*
FROM posts p
JOIN followers f ON f.targetID = p.authorID AND f.targetType = 'user'
WHERE 
    f.followerID = $currentUserID 
```

# ruby-on-rails - 当我从 Rails Guide 添加 Far-Future Expires 子句时，Apache 崩溃

> ID：11617861
> 
> 赞同：4
> 
> 时间：2012-07-23T17:57:15.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache

为了尝试使用 Apache 为我的预编译资产提供服务，根据[本](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)Rails 指南，我尝试更改此内容：

```
<VirtualHost *:82>
  ServerName localhost
  DocumentRoot "C:/RubyStack-3.2.5-0/projects/release_checklist/public"
  <Directory "C:/RubyStack-3.2.5-0/projects/release_checklist/public">
    Allow from all
    Options -MultiViews
  </Directory>
  ProxyPass / http://localhost:3001/
  ProxyPassReverse / http://localhost:3001/
  ProxyPreserveHost On  
</VirtualHost> 
```

对此：

```
<VirtualHost *:82>
  ServerName localhost
  DocumentRoot "C:/RubyStack-3.2.5-0/projects/release_checklist/public"
  <Directory "C:/RubyStack-3.2.5-0/projects/release_checklist/public">
    Allow from all
    Options -MultiViews
  </Directory>
  ProxyPass / http://localhost:3001/
  ProxyPassReverse / http://localhost:3001/
  ProxyPreserveHost On

  <LocationMatch "^/assets/.*$">
    Header unset ETag
    FileETag None
    # RFC says only cache for 1 year
    ExpiresActive On
    ExpiresDefault "access plus 1 year"
  </LocationMatch>
</VirtualHost> 
```

在我的`httpd.conf`档案中。但是，添加第二个选项后，Apache 服务器将不会启动。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T18:11:51.643

它给你什么错误？您确定您已将 mod_expires 编译到 apache 中并且已加载该模块吗？

> 无效的命令“ExpiresActive”，可能拼写错误或由未包含在服务器配置中的模块定义

是的，如果您使用映射到未加载模块的指令（或只是拼写错误的指令，与 apache 相同），通常会出现这种错误。您需要检查 httpd.conf 并确保该`LoadModule expires_module modules/mod_expires.so`行没有被注释掉，如果它丢失，添加它。根据您的 apache 版本，该行可能会略有不同。

# mongodb - 如何在没有 `db.repairDatabase()` 的情况下回收已删除的空间？

> ID：11617862
> 
> 赞同：15
> 
> 时间：2012-07-23T17:57:28.377
> 
> 标签：mongodb

我想通过回收已删除的空间来缩小数据文件的大小，但我无法运行`db.repairDatabase()`，因为可用磁盘空间不够。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T18:35:02.140

**更新**：使用 WiredTiger，*可以*释放空间。[`compact`](https://docs.mongodb.com/manual/reference/command/compact/)

 *这个问题的原始答案在这里： [Reducing MongoDB database file size](https://stackoverflow.com/questions/2966687)

除此之外，真的没有任何东西`repair`可以回收空间。这`compact`应该允许您在现有空间上走更长的时间。否则，您将不得不迁移到更大的驱动器。

一种方法是使用副本集中的离线辅助节点。这应该为您提供一个完整的维护窗口来迁移、修复、移回和恢复。

如果您没有运行副本集，那么是时候考虑这样做了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-23T18:04:08.193

您可以在单个集合上运行该`compact`命令，也可以在要缩小的所有集合中一个接一个地运行该命令。

[http://www.mongodb.org/display/DOCS/Compact+Command](http://www.mongodb.org/display/DOCS/Compact+Command)

```
db.runCommand( { compact : 'mycollectionname' } ) 
```

正如评论中指出的，我弄错了，compact 实际上并没有回收磁盘空间，它只是整理和重建集合索引。

但是，如果您有另一个可用的驱动器具有可用空间，则可以使用“--repairpath”选项。

例如：

```
mongod --dbpath /data/db --repair --repairpath /data/db0 
```

此处显示：http: [//docs.mongodb.org/manual/tutorial/recover-data-following-unexpected-shutdown/](http://docs.mongodb.org/manual/tutorial/recover-data-following-unexpected-shutdown/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-27T13:01:38.507

您也可以手动执行 mongodump 和 mongorestore。这与 repairDatabase 所做的基本相同。这样，您可以将其转储到/从具有足够磁盘空间的不同机器上恢复。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-22T21:22:56.163

如果您正在运行副本集，您将希望在每个辅助节点上发出重新同步，一次一个。完成此操作后，将主节点降级并重新同步新分配的辅助节点。

要重新同步，请停止您的 mongod 实例，删除本地并重新启动该过程。查看日志以确保一切正常启动并启动重新同步。

如果您有很多数据/索引，请确保您的 oplog 足够大，否则它可能会过时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T00:27:51.470

如果您使用的是副本集，还有另一种选择，但有很多警告。您可以故障转移到另一个集合成员，然后删除现在以前的主节点上的文件并执行完全重新同步。完全重新同步以与修复类似的方式从头开始重写文件，但您还必须重建索引。这不能掉以轻心。

如果您走这条路，我的建议是在执行此操作以回收磁盘空间之前拥有一个 3 成员副本集，以便在成员从头开始同步的任何时候，您都有 2 个成员集完全正常工作。

如果您没有副本集，我建议创建一个，带有两个辅助节点。当您最初同步它们时，您将创建一个很好的未碎片化和未填充的数据版本。更多在这里：

[http://www.mongodb.org/display/DOCS/Replica+Set+Configuration](http://www.mongodb.org/display/DOCS/Replica+Set+Configuration)*

# wpf - InfoBox MapControl WPF（不是 Silverlight）

> ID：11617864
> 
> 赞同：0
> 
> 时间：2012-07-23T17:57:40.023
> 
> 标签：wpf, bing-maps

有人可以告诉我，当您使用“Bing Maps Windows Presentation Foundation (WPF) Control, Version 1.0”按下图钉时是否可以显示一个浮动的“信息框”

[http://www.microsoft.com/en-us/download/details.aspx?id=27165](http://www.microsoft.com/en-us/download/details.aspx?id=27165)

我可以创建图钉，并且可以检测到它们何时被单击，但我不知道如何显示浮动窗口。听起来我可以使用信息框，但我没有这个....这仅在 Silverlight 中可用吗？

Visual Studio 2010\. WPF 应用程序

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:15:31.787

您可以使用画布和拇指：

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:maps="clr-namespace:Microsoft.Maps.MapControl.WPF;assembly=Microsoft.Maps.MapControl.WPF" 
        x:Class="WpfApplication15.MainWindow">
    <Grid>
        <maps:Map/>
        <Canvas>
            <Grid Name="grid"
                  Canvas.Left="0" Canvas.Top="0"
                  Width="200" Height="100">
                <!-- Your control begin -->
                <Rectangle Fill="Blue"/>
                <!-- Your control end -->
                <Thumb Name="thumbMove">
                    <Thumb.Template>
                        <ControlTemplate>
                            <Rectangle Fill="Transparent"/>
                        </ControlTemplate>
                    </Thumb.Template>
                </Thumb>
            </Grid>
        </Canvas>
    </Grid>
</Window>

thumbMove.DragDelta += (s, e) =>
{
    Canvas.SetLeft(grid, Canvas.GetLeft(grid) + e.HorizontalChange);
    Canvas.SetTop(grid, Canvas.GetTop(grid) + e.VerticalChange);
}; 
```

# r - 访问多页图

> ID：11617881
> 
> 赞同：0
> 
> 时间：2012-07-23T17:58:38.973
> 
> 标签：r

我正在使用该`plot()`函数从`MCMCglmm`包中绘制诊断信息（我认为使用哪个包并不重要，因为其他包也会发生同样的事情）：

```
fit <- MCMCglmm(.....)
plot(fit) 
```

然后这会产生一页图，在控制台中它显示`Waiting to confirm page change...`通常当我想保存一个图（例如放入文字处理文档）时，我只需右键单击该图并选择其中一个选项，例如“复制为位图”。但是，当我对多页绘图执行此操作时，右键单击会显示下一页，我只能访问最后一页。有没有办法防止这种情况，或者有其他方法可以访问中间页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:58:50.993

实际上，使用哪个包很重要，因为它们通常带有自己的绘图方法。

例如，`plot.lm`其他一些具有参数`which`：

```
fit<-lm(c(1,2,4,5,6)~c(3,4,5,6,7.2))
plot(fit)
plot(fit,which=1) 
```

`plot.MCMCglmm`好像没有这个参数：

```
require(MCMCglmm)
data(PlodiaPO) 
model1<-MCMCglmm(PO~1, random=~FSfamily, data=PlodiaPO, verbose=FALSE)
plot(model1)
plot(model1$VCV)
plot(model1$VCV[,1])
plot(model1$VCV[,2])
plot(density(model1$VCV[,1]))
plot.default(model1$VCV[,1],type="l") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-19T15:53:45.650

解决方案非常简单。您可以按“Esc”键，停留在当前绘图并复制/保存它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T17:10:41.733

你为什么不使用

```
dev.print(width=480,height=480,device=png,paste("folder/graph",i,".png",sep="")) 
```

# c# - Topshelf 服务/应用程序停留在“正在创建”

> ID：11617887
> 
> 赞同：2
> 
> 时间：2012-07-23T17:59:10.270
> 
> 标签：c#, topshelf

我正在尝试启动 Topshelf 的一个实例。我已经下载了 v. 2.3 的二进制文件并提取了所有内容。

然后我创建了一个空的控制台应用程序。我已将框架更改为`.NET 4.0 framework`并将以下代码添加到我的`static void Main()`方法中：

```
Host h = HostFactory.New(x =>
{
    x.Service< MyApp>(s =>
        {
            s.SetServiceName("Something");
            s.ConstructUsing(name => new MyApp());
            s.WhenStarted(tc => tc.Start());
            s.WhenStopped(tc => tc.Stop());
        });

    x.RunAsLocalSystem();

    x.SetDescription("Something");
    x.SetDisplayName("Something");
    x.SetServiceName("Something");
});

h.Run(); 
```

当我按 F5 时，consoleapp 按预期运行。

然后我将 bin/release 输出复制到 topshelf/services/test 目录并运行 Topshelf.Host.exe。这是结果： ![Topshelf 控制台输出](../Images/db2a9259893981d103bb75e10bb06f58.png)

如果我将浏览器指向仪表板，这就是我所看到的： ![顶级仪表板](../Images/cb73eda6413a7b06468a5e789a855f6b.png)

“测试”服务一直说“正在创建”（等待超过 15 分钟）。

我究竟做错了什么？我尝试过多种控制台应用程序。如果我调用`install`我的控制台应用程序，该应用程序将成功注册。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:04:45.350

当您将 Topshelf DLL 链接到您的控制台应用程序时，您应该从命令行运行您的控制台应用程序。据我所知，您正在尝试使用 Topshelf 主机。尝试运行您的控制台应用程序，您应该会看到它正确启动了您的服务。

# windows - 远程桌面连接不断超时

> ID：11617888
> 
> 赞同：0
> 
> 时间：2012-07-23T17:59:10.327
> 
> 标签：windows, remote-desktop

我使用 RDP 连接到服务器，并在工作时将其保持连接状态，但它总是不断断开我的连接 - 我有其他服务器不这样做......我需要在某处进行设置吗？这是什么设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:02:01.043

这可能最适合 ServerFault，但我会检查 RDP 空闲断开连接和其他计时器。请参阅[http://technet.microsoft.com/en-us/library/cc754272](http://technet.microsoft.com/en-us/library/cc754272)。

# android - 将 Jelly Bean 启动器移植到 GingerBread

> ID：11617892
> 
> 赞同：1
> 
> 时间：2012-07-23T17:59:38.447
> 
> 标签：android, android-4.2-jelly-bean, android-2.3-gingerbread, backport

在尝试将 JB 启动器移植到 GB 时，我遇到了很多与新 API 相关的错误。我添加了支持库 rev。9 - 没有任何改变，我收到大约 1000 个错误。有没有办法在不重写代码的情况下对其进行反向移植？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:34:00.597

查看您遇到的错误，然后对照[在线 API 参考](http://developer.android.com/reference/packages.html)检查其中的一些错误， 看看它们是否是新添加的。

查看“Android API”旁边的下拉菜单，您可以在其中选择目标 API 级别。选择 API Level 7 (Gingerbread)，然后查找“错误”，看看它们是否只是添加的功能。

然后，检查是否正确导入了支持库。例如，如果您的代码使用片段，它可能针对新 API 中的包，而不是支持库。要轻松完成此操作，请尝试使用 Ctrl+Shift+O 自动导入任何新内容。不过要小心；有时它可以导入错误的东西，或者删除它说“未使用”的导入，因为您使用该导入的行被视为错误。

在某些情况下，您肯定必须重写；但是如果你在开始重写之前尽你所能，你可能会为自己节省很多时间。

# ios - 可缩放视图中的 UIbezierpaths

> ID：11617902
> 
> 赞同：6
> 
> 时间：2012-07-23T17:59:54.413
> 
> 标签：ios, drawing, quartz-graphics, uibezierpath

我在可缩放的 UIView（pdf 阅读器的绘图层）中绘制 bezierpaths。当我放大文档时，UIView 也会放大，但是所有的绘图和线条看起来都更加像素化。有没有办法在没有太多像素化的情况下渲染这些路径？它假设贝塞尔路径是基于矢量的......

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T18:21:43.350

你是正确的 UIBezierPath 是基于矢量的。但是，当您将路径绘制到视图中时，它会使用`contentScale`视图层上的属性来确定绘制时要使用的细节量。

您可以做的是当用户完成缩放时，将内容比例设置为正确的数量。

`drawingView.layer.contentScale = [[UIScreen mainScreen] scale] * zoomAmount;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:10:25.577

您可以改用[CAShapeLayer](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html)。只需创建 CAShapeLayer，添加 CGPath 并将一个图层作为子图层添加到您的 UIView 图层

# c# - 在局部视图中异步加载时，mvc2 中的链接停止正确遵循虚拟路径

> ID：11617906
> 
> 赞同：-1
> 
> 时间：2012-07-23T18:00:08.547
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, asynchronous, partial-views

我在大型 MVC2 应用程序中遇到了一些边缘情况问题。最初，我有一个主视图，它会在加载时加载部分视图，其中包含链接。我有一个本地工作环境，它在项目设置页面中使用了一个空的虚拟路径设置，还有一个暂存环境，它（为了更好地反映多应用生产环境）有一个特定于应用程序的虚拟路径。两者都运行良好。最近，我有理由将部分视图加载从页面加载切换到异步加载。没有进行其他更改。链接继续在本地运行，但在升级到暂存时，忽略添加特定于应用程序的路径设置，导致所有链接中断。我能够找到一种解决方法，基于使用一个更彻底的地址，

为了更清楚（因为我意识到前面可能有点不清楚），这个特定的错误只有在以下都为真时才会发生：

*   `.html()`包含链接的部分视图必须由 asych get 调用和 jquery函数放置到位。当它由 MVC 直接加载到页面中时，一切正常。
*   必须位于虚拟路径设置为非空的服务器上。这里的问题不知何故来自于未从虚拟路径设置中附加字符串。实际上，如果您在适当位置手动输入生成链接的虚拟路径，它们就可以正常工作。
*   至少对于部分视图调用，它必须是形式`PartialView("partialViewName", dataObject)`而不是`PartialView("~/Areas/appName/Views/controllerName/partialViewName.ascx", dataObject)`. 以较长格式交换确实有效。

诚然，我可以通过反复试验找出某种方法来将较长的名称也换成内部链接，并让一切都或多或少地工作，但这不是一个非常干净的解决方案，我可能需要这样做将来在其他地方也会发生同样的事情，我觉得那里一定有更好的答案。似乎无论出于何种原因，该`PartialView()`调用都未能进行某种链接按摩，而该`View()`调用（它包含在原始非异步版本中的所有内容中）正在自动处理。有谁知道我可以做些什么来告诉异步调用`partialView()`应用与基础相同的虚拟路径`View()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:32:31.023

我已经找到了答案。似乎异步服务的部分视图中的相对链接是基于`.post()`调用它们的链接所使用的——并且至少在某些情况下，MVC 设法比从它们进行的链接更宽容。更改获取调用地址以正确覆盖虚拟路径可以修复它。

# android - 如何强制网络位置？

> ID：11617908
> 
> 赞同：1
> 
> 时间：2012-07-23T18:00:24.147
> 
> 标签：android, gps, location

我想打开网络位置（“无线网络”- 由 Wi-fi 和/或移动网络确定的位置）。这可能吗？

在我的应用程序中，我可以强制 3g 连接（仅在 Android 2.3+ 中，我在 Android 2.2 上遇到 WRITE_SECURE_SETTINGS 问题）和 GPS 定位。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T18:05:06.067

如果必须，您可以通过 root 方法执行此操作，但是，我建议在大多数情况下提示用户。

[如果禁用提示，](https://stackoverflow.com/questions/3470693/android-get-location-or-prompt-to-enable-location-service-if-disabled)请参阅Android 获取位置或提示以启用位置服务。我真的不确定 root 方法，但我确定它记录在 XDA-Forums 的某个地方。

# magento - 左侧边栏的 Magento 自定义导航

> ID：11617910
> 
> 赞同：0
> 
> 时间：2012-07-23T18:00:40.600
> 
> 标签：magento

嗨，我想创建一个 Magento 导航，该导航应在类别页面上可见。这有点令人困惑。

1.我有一个父类Designer3。
2\. 分为CAT1、CAT2、CAT3三个子类。
3\. 现在，CAT1 有三个 subcat：subcat1、sucat2 和 subcat3。

现在，当我转到 CAT1 页面时，我希望 CAT1 CAT2 和 CAT3 在导航菜单中都可以看到它们的子目录。

根据当前选择的类别（CAT1、CAT2 或 CAT3）：

--> 如果当前类别为 CAT1，则首先显示 CAT1 及其子类别。
--> 如果当前的猫是 CAT2，导航将是：：

CAT2 及其子猫，CAT1 及其子猫，CAT3 及其子猫。

此外，如果我们在 CAT1 中选择子类别，Nav 的位置应该是 CAT1 - with subcats、CAT2 with subcats 和 CAT3 with subcats，并且现在应该突出显示当前类别的 CAT1 subcat。

希望这是有道理的。

我尝试了很多东西......但在编码方面我非常有挑战......所以

这就是我厌倦的......这给了我当前的类别和它的子猫，但是当一个子猫被点击时，一切都会被折腾......任何帮助和建议都会被认可......当它出现时我有点挑战来到magento ...

```
 <p><a href="<?php $currentCategory = Mage::registry('current_category');
    //Display current category url
    echo $this->getCurrentCategory()->getUrl();?>" class="ctActiveTitle">
    <?php
    $currentCategory = Mage::registry('current_category');
    //Display current category
    echo $this->getCurrentCategory()->getName();?></a> 
    <!--SHOWING SUB CATEGORIES OF CURRENT CATEGORY-->
    <?php
    $obj = new Mage_Catalog_Block_Navigation();// create obj
    $cat = Mage::getModel('catalog/category')->load($obj->getCurrentCategory()-  >getId()); //get current cat
    $subcats = $cat->getChildren(); // find them kids
    // loop on it
    foreach(explode(',',$subcats) as $subCatid){ // split up the mage data for use
    $_category = Mage::getModel('catalog/category')->load($subCatid);  
    $caturl  = $_category->getURL(); 
    $catname = $_category->getName();   
    // echo a link
    echo '<a href="'.$caturl.'" class="ctBrownLink"> '.$catname.'</a>';

    }?> </p> <p>Tnaks Moody</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:36:19.347

您实际上不需要为此编写自定义代码。该块`Mage_Catalog_Block_Navigation`已经包含所有这些逻辑，并将解决您的大部分问题。至少您描述的问题被选为子类别。有关`renderCategoriesMenuHtml()`更多信息，请参阅。

```
/**
 * Render categories menu in HTML
 *
 * @param int Level number for list item class to start from
 * @param string Extra class of outermost list items
 * @param string If specified wraps children list in div with this class
 * @return string
 */
public function renderCategoriesMenuHtml($level = 0, $outermostItemClass = '', $childrenWrapClass = '')
{
    $activeCategories = array();
    foreach ($this->getStoreCategories() as $child) {
        if ($child->getIsActive()) {
            $activeCategories[] = $child;
        }
    }
    $activeCategoriesCount = count($activeCategories);
    $hasActiveCategoriesCount = ($activeCategoriesCount > 0);

    if (!$hasActiveCategoriesCount) {
        return '';
    }

    $html = '';
    $j = 0;
    foreach ($activeCategories as $category) {
        $html .= $this->_renderCategoryMenuItemHtml(
            $category,
            $level,
            ($j == $activeCategoriesCount - 1),
            ($j == 0),
            true,
            $outermostItemClass,
            $childrenWrapClass,
            true
        );
        $j++;
    }

    return $html;
} 
```

此外，此方法还会自动处理在非平面和平面类别之间交换时会遇到的差异，以及考虑是否应显示类别等问题。

关于您对导航顺序的看法。从可用性的角度来看，您可能希望在选择类别后保持订单不变。人们可能会期望导航或其中的一部分位于特定位置。玩弄它们并不是最佳选择，因为预期的位置会有所不同，所以你会让人们搜索东西。

# excel-2007 - 如果一个或多个单元格包含指定字符串，则格式化行

> ID：11617912
> 
> 赞同：0
> 
> 时间：2012-07-23T18:00:50.753
> 
> 标签：excel-2007, excel-formula

在 excel 2007 中，我想在整个工作簿中应用一个格式化规则，当且仅当该行包含一个或多个带问号的单元格时，它将格式化一行。我正在尝试这个公式：

```
=IF(countif(c2:l2, "?")>0) 
```

其中第 1 行包含一个标题，我要检查的值应该从 C 列到 L 列。Excel 说有一个错误但是，谁能看到那个错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:23:38.163

问题是那个“？” 是通配符。你需要用波浪号转义它：

```
=COUNTIF($C2:$L2, "~?")>0 
```

此外，您没有对列的绝对引用。此外，您不需要`IF`条件格式。“条件”是IF。

# eclipse - 远程调试时没有命中断点

> ID：11617913
> 
> 赞同：2
> 
> 时间：2012-07-23T18:00:57.683
> 
> 标签：eclipse, debugging, weblogic

我在 Eclipse 中运行远程调试会话，连接到 weblogic (10) 在“服务器启动”中指定了参数：

```
-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=8115,server=y,suspend=n 
```

...在 Eclipse 调试配置中，我指定了端口和服务器名称。

这对我来说工作了一年多。今天，在我没有任何更改的情况下，我正在尝试调试的应用程序没有遇到断点。基本上它看起来调试器没有激活，而一切看起来都是如此。我在哪里可以诊断和调解问题？

谢谢

# django - 用另一个替换 Django 模型对象

> ID：11617914
> 
> 赞同：2
> 
> 时间：2012-07-23T18:01:03.740
> 
> 标签：django, django-admin, django-orm

我正在开发一个应用程序，我们必须在接受模型更改之前对其进行审查。

为此，当用户在应用程序前端编辑公司模型对象之一时，表单的初始数据将填充原始对象中的数据，然后存储到使用`origin_company`字段标记的新对象中（这是一个外键对象的先前版本）。

所以基本上当有人编辑公司时，就会创建一个新的、不活跃的公司。

要应用更改，我想将所有数据从更改后的公司复制到原始公司。（我正在使用自定义 django-admin 操作来执行此操作。）最简单的方法可能是开始交易，删除原始公司并更改已更改公司的主键以匹配原始公司。但是通过这样做，更改后的公司不会被更新，而是被复制。并且相关的数据库条目 (FK) 也不会更新。

有没有一种简单的方法可以将所有数据（包括 FK 关系）从一个模型实例复制或移动到另一个模型实例？还是我解决这个问题的整个方式都搞砸了？

这是模型定义：

```
class Company(models.Model):
    company_name = models.CharField(max_length=150)
    ...
    origin_company = models.ForeignKey('self', related_name=u'CompanyEdits',
            null=True, blank=True, default=None) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:13:34.277

尝试以下操作：

```
# get the company instance's data as a dict
data = company_instance.__dict__.copy()
# remove the `id` and `origin_company` keys. don't need these
del data['id']
del data['origin_company_id']
# update the origin company instance
Company.objects.filter(id=company_instance.origin_company.id).update(**data) 
```

# dart - 如何在 Dart lang 中处理图像

> ID：11617915
> 
> 赞同：2
> 
> 时间：2012-07-23T18:01:09.413
> 
> 标签：dart

我之前在这里发布了一个问题（[如何在 Dart 中加载图像](https://stackoverflow.com/questions/11599113/dart-lang-how-to-load-image)）并得到答案，但同时得到更多问题。为什么我只能以这种方式绘制图像：

```
image.on.load.add((e) {
    context.drawImage(image, 0, 0);
}); 
```

但如果我写的是这样的：

```
ImageElement image = new ImageElement();
image.src = 'myImage.png';
context.drawImage(image, 0, 0); 
```

^^^ 这不起作用，不要绘制图像。为什么？

```
bool loaded = false;
ImageElement image = new ImageElement();
image.src = 'myImage.png';
image.on.load.add((e) {
    loaded = true;
});
print(loaded); // on console get - false 
```

^^^ 为什么我是假的？如果图像加载的变量加载为真，但加载的变量不为真，我就创建了。

对不起我的英语不好。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T18:34:26.427

至于你的第一个问题，如果你遗漏了

```
image.onLoad.listen((e) {
    context.drawImage(image, 0, 0);
}); 
```

那么加载图像时不会执行任何代码。

on.load.add **(...)**构造基本上分配了一个函数（通常称为处理程序），该函数将在浏览器加载图像时执行。如果没有分配这样的函数，则加载图像时不会发生任何事情，因此**context.drawImage(image, 0, 0)**将不起作用。

您的第二个问题与此功能有关。加载图像是一个异步过程，这意味着您的加载处理程序 ( **on.load.add(...)** ) 在客户端成功加载图像时首先被触发。这意味着在加载您的加载处理程序执行后继续执行您的下一个调用：**print(loaded)**这将是错误的，因为图像尚未加载。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-01T20:37:35.723

较新的图像加载语法：

```
readFile() {
  ImageElement image = new ImageElement(src: "plant.png");
  document.body.nodes.add(image);
  image.onLoad.listen(
      onData, 
      onError: onError, 
      onDone: onDone, 
      cancelOnError: true
   );
}

onData(Event e) {
  print("success");
}

onError(Event e) {
  print("error: $e");
}

onDone() {
  print("done");
} 
```

# jquery - 根据图像大小计算移动 div

> ID：11617916
> 
> 赞同：0
> 
> 时间：2012-07-23T18:01:22.440
> 
> 标签：jquery, css, image, position

我用一个隐藏了溢出的 div 来掩盖一个图像。我试图通过将容器设置为所有内容所在的更大 div 来限制图像可以拖动的数量。我在让容器 div 根据一半图像向上和左重新定位时遇到问题宽度/高度。目标是让用户能够将图像拖动到任何位置，而不能将其拖动到图像边缘之外。

这是一个 jsfiddle：http: [//jsfiddle.net/richcoy/uEBDW/20/](http://jsfiddle.net/richcoy/uEBDW/20/)

HTML

```
<div id="container">
    <div id="window">
        <img src="http://alumniconnections.com/olc/filelib/COU/cpages/48/Library/chicago_skyline.jpg" class="drag img" alt="chicago" width="300" height="300" />
    </div>
</div> 
```

CSS

```
body {
    background: white;
    margin: 30px;
}

#container {
    width: 400px;
    height: 400px;
    position: relative;
}

#window {
    width: 200px;
    height: 200px;
    border: 1px solid #6D6D6D;
    overflow: hidden;
    cursor: move;
    position: absolute;
    /* Stop blue overlay on photo */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

jQuery

```
$().ready(function() {
    $(".drag").draggable({
        containment: "#container"
    });

$('.img').each(function() {
    var imageWidth = $(this).width();
    var imageHeight = $(this).height();
    alert('Width: ' + $(this).width() + '\nHeight: ' + $(this).height()); // For testing purposes only
    var positionTop = -(imageHeight / 2);
    var positionLeft = -(imageWidth / 2);
    alert('Top: ' + positionTop + '\nLeft: ' + positionLeft); // For testing purposes only
});

$('#container').css({
    'top': positionTop + 'px',
    'left': positionLeft + 'px'
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:36:07.770

运行 jsfiddle 时查看控制台窗口，当您尝试访问范围外的变量时会看到一些错误。

但是，我要做的是使用“停止”事件并进行定位。有关更多信息，请参阅[事件停止](http://jqueryui.com/demos/draggable/#event-stop)。下面我正在查看父容器“窗口”的设置，然后检查新的顶部位置是否大于它。如果为真，则将位置设置为父高度的一半。

```
$().ready(function() {
    $(".drag").draggable({
        containment: "#container",
        stop: function(e,ui) {
            var $me = $(ui.helper[0]);
            var $container = $me.closest('div');
            console.log("Top: " +ui.position.top);
            //console.log("Height: " +$me.height());
            var newTop = $me.parent().height() / 2;
            console.log(newTop);            
            if(ui.position.top > newTop){
                console.log('Setting top to: ' + newTop);
                $me.css({'top' : newTop + 'px','left': '0px' });
            }
       }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:33:43.453

我找到了这个：

[http://odyniec.net/projects/imgareaselect/](http://odyniec.net/projects/imgareaselect/)

猜猜这与您想要做的事情相似。希望能帮助到你！

# asp.net - 在文字中创建 asp:checkbox 不会显示。ASP.NET

> ID：11617917
> 
> 赞同：0
> 
> 时间：2012-07-23T18:01:31.620
> 
> 标签：asp.net, checkbox, literals

我的 html 代码中有我的文字。

```
<tbody>
        <asp:Literal ID="Literal1" runat="server"></asp:Literal>    
</tbody> 
```

在我的 VB 代码中，我告诉它创建一个 asp:checkbox：

```
Protected Sub Page_LoadComplete(sender As Object, e As System.EventArgs) Handles Me.LoadComplete

Literal1.Text &= "<tr>" &
                     "<td>" & MyDataReader(0) & "</td>" &
                     "<td>" & MyDataReader(1) & "</td>" &
                     "<td>" & MyDataReader(2) & "</td>" &
                     "<td>Files Go Here</td>" &
                     "<td><asp:CheckBox ID=""CheckBox" & MyDataReader(0) & """ runat=""server"" /></td></tr>" 
```

我的问题是该复选框在加载后没有显示在页面上，其他所有内容都会显示。我查看了页面的源代码，asp:checkbox 在表格的源代码中，但没有显示在网页本身上。我可以输入一个非 asp:checkbox:`<input id="Checkbox1" type="checkbox" />`它会显示出来。字面量在`<form id="form1" runat="server">`. 有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:06:22.270

由`asp:checkbox`处理器渲染。你不能像这样将它插入到文字中。您可以创建一个`new CheckBox()`并将其添加到`Placeholder`控件。

例如：

```
 CheckBox chk = new CheckBox()
 chk.ID = "CheckBox" + MyDataReader(0)
 placeholder.Controls.Add(chk) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:06:23.597

尝试添加 runat="server" 作为属性。

那是

```
<input id="Checkbox1" type="checkbox" runat="server" /> 
```

另外，请查看此论坛帖子： [http ://forums.asp.net/t/1676105.aspx/1](http://forums.asp.net/t/1676105.aspx/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:06:46.517

我认为问题在于您的控件被添加为文本而不是呈现的控件。ASP.NET 处理页面并在呈现页面之前将标记替换为“runat='server'”。我认为您正在输出带有无效标记的文本，因此没有显示任何内容。

您可用的选项之一是将表创建为 ASP.NET 表，然后通过代码隐藏添加控件。

未经测试的代码看起来像这样：

```
Dim table myTable as table
Dim tableRow tr as new TableRow
Dim cell as new TableCell
cells.controls.Add(new CheckBox("values","here")) 'Pseudo code here 
tr.Cells.Add(cell)
table.Rows.Add(tr) 
```

或者你可以用简单的方法将“runat=server”添加到你的表中。

# java - Servlet 重定向不显示请求的页面

> ID：11617926
> 
> 赞同：0
> 
> 时间：2012-07-23T18:02:25.737
> 
> 标签：java, servlets, redirect

我有一个页面 - 让我们称之为页面 X - 我在其中进行了一个`ajax`调用，该调用填充了用`jqGrid`. `localhost:8080/servlet/ajax/Data.json`所以在这里我称之为`servlet`. 现在，如果页面过期并且用户仍然想要访问表（例如搜索数据），我想将请求重定向到`Login`页面。

该`ajax`调用调用与我的页面（即）不同的 Data.json `servlet`，因此我不能使用转发（我使用的是 JBoss 4.2，我只能在同一个中转发）。`servletcontext``Login``localhost:8080/servlet/myapp``servlet``servletcontext`

我尝试使用 重定向`sendRedirect`，它能够调用`Login`实际执行但未显示的页面。这就是我迷路的地方。我的`Login`页面已执行，但我仍然看到页面 X。我试图将返回的 HTML（来自`Login`页面）写入页面 X 的响应（我也将 设置`Content-Type`为`text/html`）。HTML 在响应中返回，但不显示。

我正在使用`Apache Turbine`which 是另一个`servlet`在请求时检索页面的方法。你有什么想法？我不知道该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:08:32.660

看起来您的 servlet`servlet/ajax/Data.json`正在告诉 AJAX 请求重定向到登录页面。然后该页面将尝试使用登录页面呈现 jqGrid 表，这可能无法正常工作。

您需要在进行 AJAX 调用的位置添加代码，`servlet/ajax/Data.json`以检查浏览器本身是否需要重定向。如果 servlet 返回 302 重定向作为响应，或者 servlet 返回一个简单的“SESSION EXPIRED”错误，那么浏览器端对 servlet 进行 AJAX 调用的 javascript 知道会话已过期并重定向浏览器进入登录页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:08:46.843

Ajax 调用是异步调用，ajax 调用上的 sendRedirect 调用永远不会有效（ajax 响应总是向发起者发送响应）。

您可能需要使用 XMLHttpRequest 状态码找出页面过期时间，然后使用 java 脚本 window.location 将浏览器 url 重置为登录 url。

# ruby-on-rails-3 - 使用带有外键的 where 子句

> ID：11617928
> 
> 赞同：0
> 
> 时间：2012-07-23T18:02:38.620
> 
> 标签：ruby-on-rails-3, activerecord

在我的应用程序中，我有一个搜索字段来查找足球访问量。想能用访问的俱乐部搜索。在我的模型中访问 belongs_to 俱乐部，所以访问有一个字段“club_id”。因此，当我使用 ID 搜索时，它会找到俱乐部，但我希望能够通过俱乐部名称找到它。“club_id”应该替换为“visit.club.name”之类的东西，但我怎样才能做到这一点？这是我当前的查询：

```
 # Find visits
  def find_anything(find_phrase)
    unless find_phrase.blank?
      @visits = Visit.where('address LIKE ? OR ground LIKE ? OR club_id LIKE ?',
                "%#{find_phrase}%",
                "%#{find_phrase}%",
                "%#{find_phrase}%")
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:03:24.273

这应该够了吧：

```
Visit.where(club_id: Club.where(name: "ClubName")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T04:50:42.450

```
 Club.joins(:visits).where('visits.club_id' => club_id).first.name 
```

*这假设 Club 模型 has_many :visits

或者

```
 Club.find(Visit.find_by_club_id(club_id)).name 
```

# ssis - SSIS 无法将 Unicode 转换为非 Unicode 字符串错误

> ID：11617930
> 
> 赞同：0
> 
> 时间：2012-07-23T18:03:09.290
> 
> 标签：ssis, dataflowtask

我们的团队创建了一个 SSIS 包，将数据从 Oracle 源导入 SQL 数据库，该包使用 Oracle Provicer for OLEDB 到客户端到 Oracle SOR。

源数据库和目标数据库之间的主要数据类型差异是，虽然源具有字符串列，但目标数据库支持非 Unicode 格式。

我们添加了数据转换组件并让程序包运行，虽然它可以在开发服务器（具有 oracle 11g 组件）上运行，但它似乎无法在测试服务器上运行（已安装 Oracle 8）

我们还尝试将 Cast 语句添加到 Source 查询中，但是外部和输出列似乎没有采用 Converted 格式。

到目前为止，已经尝试过，衍生列，数据转换

非常需要想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:55:38.570

我通过设置源任务的 ValidateExternal 元数据属性使代码工作，在开始使用 SSIS 和 Oracle 进行开发之前，请确保您确实安装了 Oracle Provider for .NET ODTwithODAC112030 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T06:53:15.933

在一个旧版本的 oracle 组件中存在一个错误——要与 Visual Studio 正确集成（并且在部署后仍然在 64 位环境下运行），您需要使用 ODAC112040 32 位——请注意旧的 .30 版本仍然有错误;

# r - R将字符串转换为原始字符串？

> ID：11617931
> 
> 赞同：3
> 
> 时间：2012-07-23T18:03:11.813
> 
> 标签：r, binary

如何从 转换`"character"`为`"raw"`？

```
class ( plot_binary  )
# [1] "raw"
plot_binary[3]
# [1] 4e
class ( plot_binary[3] ) 
# [1] "raw" 
```

我想做从字符`"4e"`到原始的转换`4e`。

我该怎么做呢？

`as.raw`显然不起作用，因为

```
as.raw("4e")
# [1] 04 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T18:07:12.763

找到了解决方案：

```
as.raw ( as.hexmode ( "4e" ) )
#[1] 4e 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T18:05:14.897

尝试查看：`rawToChar`和`charToRaw`

# ios - iOS开发制作一个按钮在其他视图控制器上做某事

> ID：11617934
> 
> 赞同：0
> 
> 时间：2012-07-23T18:03:22.330
> 
> 标签：ios

我需要制作一个按钮来在另一个页面上做某事。我知道如何编写一个按钮以在同一页面（相同的视图控制器）上制作想要的东西也使该按钮打开另一个页面（另一个视图控制器）但是我怎样才能同时制作它呢？

这是一个简单计算器的示例。

*   打开程序
*   输入两个数字
*   点击按钮
*   SecondPage 出现并显示第一页的结果

是关于代表的事情吗？请解释。

我收到了一些答案，谢谢，让我们让它变得简单，让那个按钮在第二页的标签上写一些东西你能不能也写那个代码？它很简单，第一页的一个按钮会在第二页的标签上写一些东西页。第一个视图控制器名称是 ru1 第二个视图控制器名称是 ru2

你也能解释一下我在哪里写我是菜鸟，我很难理解你在说什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:20:07.447

您可以创建一个选择器来完成它...

```
[myButton addTarget:self action:@selector(mySelector) forControlEvents:UIControlEventTouchUpInside]; 
```

你的选择器

```
- (void)mySelector {
    myNewViewController *secondController = [[myNewViewController alloc] init];
    [secondController setMyProperty:@"SOME_VAR"];
    [self.navigationController pushViewController:secondController animated:YES];
} 
```

在里面`secondController.h`

```
@property (nonatomic, strong) NSString *myProperty; 
```

在里面`secondController.m`

```
@synthesize myProperty; 
```

在您的第二个（ru2）控制器中`-(void)viewDidLoad:`

```
UILabel *lblSecond = [[UILabel alloc] initWithFrame:CGRect(10, 10, 20, 100)];
[lblSecond setText:myProperty];
[self.view addSubview:lblSecond]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:28:29.313

如果在点击按钮时存在“其他”视图控制器（例如，它位于导航堆栈中的某个位置），您可以发布通知。“其他”视图控制器必须在初始化时执行此操作：

```
[[NSNotificationCenter defaultCenter] addObserver:self name:YourCustomNotificationName object:nil]; 
```

并且，在 dealloc 上：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

点击按钮（当前视图控制器）：

```
[[NSNotificationCenter defaultCenter] postNotificationName: YourCustomNotificationName object:self userInfo:someCustomDictionary]; 
```

'YourCustomNotificationName' 是一个 NSString，你必须定义一个对两个视图控制器可见的地方。

或者，如果您以编程方式创建按钮，则可以在调用“addTarget:action:forControlEvents”时使用其他视图控制器（而不是 self）。如果您使用的是 IB，我不知道...有整个“文件所有者”的东西...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:10:35.357

在第二个视图控制器的头文件中添加要传递给它的变量：

```
@interface ATSecondViewController : UIViewController <UINavigationControllerDelegate>{
    IBOutlet UITableView *_tableView;
    NSFileManager *fileManager;
    NSString *documentsDir;
    IBOutlet UILabel *top_bar;
} 
```

在您推送新控制器的方法中，它们可以通过以下方式访问：

```
ATSecondViewController *detailViewController = [[ATSecondViewController alloc] initWithNibName:@"ATBuyTripViewController" bundle:nil];
    detailViewController.documentsDir = @"SOME DIR"; 
```

如果您在 SecondViewController 中合成这些变量，则可以通过您的代码访问它们。

# c# - Isolatedstoragesettings.applicationsettings.save 不保存

> ID：11617937
> 
> 赞同：0
> 
> 时间：2012-07-23T18:03:44.983
> 
> 标签：c#, windows-phone-7, user-interface, state, application-settings

我正在为 windows phone 7 开发一个应用程序。我的应用程序与服务器通信，该服务器向它发送一些我在 UI 上显示的数据。我将应用程序的状态保存在 ApplicationSettings 中。

我发现有时

ApplicationSettings.Save() 不保存当前状态。相反，当我启动我的应用程序时，它会恢复成功存储的先前状态。

实际上，当我的应用程序关闭时，我会调用 save 方法。

但是我只是想知道我的应用程序是否在ui上进行了一些更改。那么是否有可能是不保存状态的原因。

如果是这种情况，那么我应该怎么做才能正确保存我的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T23:15:56.937

如果您仅在应用程序关闭时保存（即 Application_Closing），那么您捕获状态的频率不够高。根据您退出应用程序的方式，有时应用程序只是被停用，但不一定关闭。如果应用程序在停用后随后被墓碑化，您将需要适当地保存状态以将其恢复。

这是一篇文章，可让您更好地了解不同的状态。

[Windows Phone 7 墓碑](http://msdn.microsoft.com/en-us/magazine/hh148153.aspx)

# php - 将参数从 PHP 传递给 Powershell exec

> ID：11617938
> 
> 赞同：1
> 
> 时间：2012-07-23T18:03:46.157
> 
> 标签：php, powershell, parameter-passing

我正在尝试编写一个*PHP 脚本*，它允许我选择一些文件从预定位置下载。我希望我的脚本将一个数组传递给一个之前编写的*Powershell 脚本*，并让我的*Powershell 脚本*处理下载（基本上，php 文件只需要告诉*powershell*文件需要下载什么）。我查看了一些选项，似乎这`exec`是我应该使用的命令（因为我不关心我不应该需要的命令行输出`shell_exec`）。

到目前为止，我已经打开了`OFF`安全模式以允许我使用此命令。我还应该注意，*php*文件将从服务器运行，但是*powershell*文件位于本地计算机上。

到目前为止处理参数传递的代码片段如下所示：

```
if(isset($_POST['formSubmit'])) 
{
    $choosePlugin = $_POST['wpPlugin'];
    $chooseTheme = $_POST['wpTheme'];

    if(isset($_POST['wpTheme'])) 
    {
        echo("<p>You selected: $chooseTheme</p>\n");
        exec('powershell.exe C:\Wordpress Setup\setupThemes.ps1 $chooseTheme');

    } 
    else 
    {
        echo("<p>You did not select a theme</p>\n");
    } 
```

我有点困惑我应该在里面放什么`exec`。当我运行上面的代码时，没有错误但是没有任何反应。我对此有点陌生，所以如果需要更多信息，我深表歉意。感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:17:51.160

试着做：

```
echo exec('powershell.exe C:\\Wordpress Setup\\setupThemes.ps1 $chooseTheme'); 
```

要查看 powershell.exe 的结果（记住双 \），还要确保将绝对路径放入 exe 文件：

```
 echo exec('c:\\PATH_TO_POWERSHELL.EXE\\powershell.exe C:\\Wordpress Setup\\setupThemes.ps1 $chooseTheme'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:22:41.223

如果你想传递变量的内容，你应该使用双引号来实际扩展它，我猜。此外，您应该引用脚本名称，因为路径包含空格：

```
exec("powershell.exe \"C:\Wordpress Setup\setupThemes.ps1\" $chooseTheme"); 
```

# python - 在 Python 中按事件解析数据

> ID：11617942
> 
> 赞同：0
> 
> 时间：2012-07-23T18:04:07.183
> 
> 标签：python, events, formatting, text-parsing

我正在尝试使用 Python 从格式如下的文本文件中解析数据：

```
<event>  
A   0.8
B    0.4  0.3 -0.5  0.3
</event>
<event>  
A   0.2
B    0.3  0.2 -0.5  0.8
C    0.1  0.3 -0.3  0.2
C   -0.2  0.4 -0.1  0.9
</event>
<event>  
A   0.4
B    0.4  0.3 -0.5  0.3
C    0.3  0.7  0.6  0.5
</event> 
```

变量 A 和 B 始终存在于每个事件中，但正如您所见，C 变量在一个事件中最多可以出现两次，有时根本不会出现。总共有大约 10,000 多个事件。

我想格式化所有这些，以便我可以单独调用每条数据（即事件 3 中变量 B 的第 2 列），以及分组（即绘制变量 A，所有事件的第 0 列），但是重复 C 变量让我有点吃惊。理想情况下，我希望为 C 变量 #1 和 C 变量 #2 提供一列数据，其中当事件中只有一个或零个 C 变量时，数据可以简单地为 0。

我的代码目前远非优雅，输出格式也不是它所需要的，所以我喜欢关于如何简化和改进它的建议。

```
M = 10000        # number of events 
file = open('data.txt')
a_lines = open('a.txt','w')
b_lines = open('b.txt','w')
c1_lines = open('c1.txt','w')
c2_lines = open('c2.txt','w') 
c1 = []
c2 = []

for i in range(M):
    for line in file: 
        if not line.strip():
            continue  
        if line.startswith("</event>"):
            break 
        elif line.startswith("<event>"):
            a = file.next()
            print >>a_lines,i,a

for i in range(M):
    for line in file: 
        if line.startswith("B"):
            print >>b_lines,i,line.strip()
            nextline=file.next().strip()
            c1.append(nextline)
            nextline2=file.next().strip()
            c2.append(nextline2)
            break

# Parsing the duplicate C columns...
# I've formatted it so the 0 is aligned with the other data

for i in range(M):
    if "C" in c1[i]:
        print >>c1_lines, i, c1[i]
    else: 
        print >>c1_lines, i, "C    0" 

for i in range(M):
    if "C" in c2[i]:
        print >>c2_lines, i, c2[i]
    else: 
        print >>c2_lines, i, "C    0"

#  Sample variable formatting attempt: 

b_event_num,b_0,b_1,b_2,b_3=loadtxt("b.txt",usecols=(0,1,2,3,4),unpack=True)
b_0=array(b_0)
b_1=array(b_1)
b_2=array(b_2)
b_3=array(b_3)
b_0=b_0.reshape((len(b_0)),1)
b_1=b_1.reshape((len(b_1)),1)
b_2=b_2.reshape((len(b_2)),1)
b_3=b_3.reshape((len(b_3)),1)
b_points=np.hstack((b_0,b_1,b_2,b_3)) 
```

提取的数据本身看起来不错，但是当我尝试在列中加载时，出现以下错误，我不知道为什么：

```
vals = [vals[i] for i in usecols]
IndexError: list index out of range 
```

任何帮助，将不胜感激; 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:25:09.413

The IndexError is coming from trying to access vals[0] when vals = []. If you expand your code the error might make more sense:

```
vals = []
for i in usecols:
    vals[i] = i 
```

The error happens in the first use of the loop because vals[0] isn't in the list. I would suggest a fix, but I'm not sure what your trying to do. If you just want vals to be the list [0,1,2,3,4] you can just use

```
vals = range(5) 
```

Edit: On a side note I don't think that saving it in a separate file is necessary. It would be a lot better to just save it directly into the array, like:

```
M = 10000        # number of events 
file = open('data.txt')
a = []
b = []
c2 = []
c2 = []

def parseLine(line, section):
    line = line.split()
    line = line[1:]  # To take out the letter at the start
    section.append(line)

file.next()
for i in range(M):
    parseLine(file.next(), a)
    parseLine(file.next(), b)
    nextLine = file.next()
    if nextLine.startswith("C"):
        parseLine(nextLine, c1)
        nextLine = file.next()
        if nextLine.startswith("C"):
            parseLine(nextLine, c2)
            file.next()    # To get to the end of the event
        else:
            c2.append([0])
    else:
        c1.append([0])
        c2.append([0])
    file.next() 
```

Be careful though because to get the element from the 2nd element from the 8th event for b you would do b[7][1], so it's b[event-1][column-1]

# objective-c - 搜索 NSArray 并返回该行的 id

> ID：11617944
> 
> 赞同：0
> 
> 时间：2012-07-23T18:04:08.093
> 
> 标签：objective-c, nsarray

我想搜索一个数组并返回行号，即 0-10。原因是我正在从数据库加载信息，需要在 uipicker 视图中自动选择一个值，据我了解，您只能通过行 id 在 uipicker 视图中选择内容。所以我想用一个字符串搜索数组并返回行ID，这样我就可以告诉uipicker视图要选择哪一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:17:17.457

采用

```
NSInteger index = [array indexOfObject:@"string"]; 
```

# orm - 冷融合左连接未返回预期结果

> ID：11617945
> 
> 赞同：0
> 
> 时间：2012-07-23T18:04:09.517
> 
> 标签：orm, coldfusion, hql, left-join

我正在处理左连接查询，但我没有得到预期的结果。我一遍又一遍地搜索，但无法找到导致此问题的原因。当我执行以下代码时，它返回 LEFT INNER JOIN 的结果（仅左侧的记录与右侧的项目匹配）。我试图指定 LEFT OUTER 没有成功。我错过了一些简单的东西吗？

```
var records = ORMExecuteQuery("SELECT new map(inst.id AS installationId,
                                                inst AS installation,
                                                uaa.id AS id,
                                                uaa.permission AS permission,
                                                uaa.app AS app)
                                            FROM Installation AS inst, 
                                                LEFT JOIN inst.userApplicationAccesses AS uaa
                                                    WITH uaa.user.userId = ?", [Arguments.userId]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:20:35.503

好的，你的左连接很奇怪。您将加入一列，而不是表，并且该列是您的第一个表的一部分（您甚至引用 as 名称）。

您的外部联接应该类似于：

```
Select *
From Table_A as A
Left Outer Join Table_B as B on B.ID = A.ID 
```

是的，Table_A 和 Table_B 都可以是同一张表，但该表应该列出两次。

# java - 死锁和等待/通知

> ID：11617949
> 
> 赞同：3
> 
> 时间：2012-07-23T18:04:27.620
> 
> 标签：java, concurrency

如何通过等待/通知持有多个锁？

想象一下有两个可锁定资源的情况：打印机和扫描仪。我遇到了死锁，所以我决定在打印机锁之前获取扫描仪锁。现在，如果我只想要打印机，我仍然需要锁定扫描仪。这里的情况是一个（打印）线程到达打印机，它注意到另一个（进纸）线程需要进纸。我的设计要求打印线程等待进纸线程进纸。

如果我在打印机上等待。我想我仍在锁定扫描仪。线程 2 怎么会输入通知代码？

在这种情况下常用的设计是什么？假设我需要持有 2 个锁（以避免死锁）。如何在两个锁都持有的情况下等待/通知？示例代码如下。

一种明显的方法是在整个代码中反转锁定获取顺序，并希望我不需要在扫描仪上等待。

还有其他出路吗？

示例代码：打印线程：

```
 synchronized (scanner) {
        synchronized (printer) {
            // action
            while (trayEmpty) {
                printer.wait();
            }
        }
    } 
```

进线示例代码：

```
 synchronized (scanner) {
        synchronized (printer) {
            // action
            trayEmpty=false;
            printer.notify();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:15:45.617

```
Is there another way out? 
```

我建议您不要使用等待/通知，而是使用[Java Concurrent Api 显式锁](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)`lock`，您可以`unlock`按顺序使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:12:03.483

这种特定情况的一个想法是使用单个锁。例如，在位于 row/col 交叉点的对象上创建一个锁定对象（例如，创建一个锁定对象矩阵）。

# firefox - Firefox：在 Firefox 中为某些事件设置延迟

> ID：11617950
> 
> 赞同：1
> 
> 时间：2012-07-23T18:04:30.417
> 
> 标签：firefox, firefox-addon

我正在捕获有关网站加载的视频。我注意到 Firefox 甚至在 GUI 完全加载之前就发送了 http 请求，所以有时一开始会有灰/白屏幕。我的问题是如何在 Firefox 或扩展中设置任何事件（在我的情况下为 http 请求事件）的延迟？

# c# - 转换为列表 用于返回函数

> ID：11617953
> 
> 赞同：1
> 
> 时间：2012-07-23T18:04:37.623
> 
> 标签：c#, list, function, inheritance

所以我正在尝试创建一个返回数据列表的函数，数据有许多“子”类，其中一个是评论，但是，如果日期的类型是评论（我用 IF 语句测试）那么我想orderby 编辑日期而不是 id（ID 可用于所有数据对象，而编辑日期仅可用于评论类）。因此，我没有做 TypeOf，而是做 TypeOf，然后我可以在编辑日期订购它，但是它想返回一个列表，但我需要它是一个列表，但是我已经用谷歌搜索了一个小时 + 并没有找到运气关于如何转换它。这是方法：

```
private List<T> GetAllData<T>() where T : Data, new()
    {
        List<T> TmpList = new List<T>();
        if (typeof(T) == typeof(Comment))
        {
            TmpList = _newdb.Data.OfType<Comment>().OrderBy(x => x.EditDate).ToList();
            // THIS ABOVE doesn t work ofc since it wants to return a List<Comment> but TmpList is a List<T>

            //List<Comment> TmpComments = _newdb.Data.OfType<Comment>().OrderBy(x => x.EditDate).ToList();
            // List<T> tempzor = new List<T>(TmpComments.ToList());
            //TmpList = (List<T>(TmpComments));
            // TmpList = TmpComments.ConvertAll;
        }
        else
        {
            TmpList = _newdb.Data.OfType<T>().OrderBy(x => (x.Id)).ToList();
        }
        return TmpList;
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T18:07:56.077

您可以投射整个列表：

```
TmpList = _newdb.Data.OfType<Comment>().OrderBy(x => x.EditDate).Cast<T>().ToList(); 
```

# c++ - 回溯 - 用硬币填充网格

> ID：11617955
> 
> 赞同：1
> 
> 时间：2012-07-23T18:04:47.307
> 
> 标签：c++, algorithm, backtracking

我试图回答我在查找面试问题时遇到的这个问题。我们被问到将 r 个硬币放置在一个 *m 网格上以使每一行和每列至少包含一个硬币的方法的数量。

我想到了一个回溯解决方案，以行大顺序处理网格中的每个单元格，我已经以这种方式设置了我的递归。似乎我的方法有问题，因为它每次都输出 0。有人可以帮我找到我的方法中的错误。? 谢谢。

约束。n , m < 200 和 r < n*m;

这是我想出的代码。

```
#include<cstdio>
#define N 201
int n, m , r;
int used[N][N];
int grid[N][N] ;  // 1 is coin is placed . 0 otherwise. // -1 undecided.

bool isOk()
{
    int rows[N];
    int cols[N];

    for(int i = 0 ; i < n ; i++) rows[i] = 0;
    for(int i = 0 ; i < m ; i++) cols[i] = 0;
    int sum = 0;
    for(int i = 0 ; i < n ; i++)for(int j = 0; j < m ; j++)
    {
        if(grid[i][j]==1)
        {
            rows[i]++;
            cols[j]++;
            sum++;  
        }
    }
    for(int i = 0 ; i < n ; i++) 
    {
        if(rows[i]==0) return false;
    }

    for(int j = 0 ; j < n ; j++)
    {
        if(cols[j]==0) return false;
    }
    if(sum==r) return true;
    else return false;
}

int calc_ways(int row , int col,  int coins)
{
    if(row >= n) return 0;
    if(col >= m) return 0;
    if(coins > r) return 0;
    if(coins == r) 
    {
        bool res = isOk();
        if(res) return 1; 
        else 0;
    }

    if(row == n - 1 and col== m- 1) 
    {
        bool res = isOk();
        if(res) return 1;
        else return 0;
    }

    int nrow, ncol;

    if(col + 1 >= m)
    {
        nrow = row + 1;
        ncol = 0;
    }
    else
    {
        nrow = row;
        ncol = col + 1;
    }
    if(used[row][col]) return calc_ways(nrow, ncol, coins);
    int ans =  0;
    used[row][col] = 1;
    grid[row][col] = 0;
    ans += calc_ways(nrow , ncol , coins);

    grid[row][col] = 1;
    ans += calc_ways(nrow , ncol , coins + 1);

    return ans;
}

int main()
{
    int t;
    scanf("%d" , &t);
    while(t--)
    {
        scanf("%d %d %d" , &n , &m , &r);
        for(int i = 0 ; i <= n ; i++)
        {
            for(int j = 0; j <= m ; j++)
            {
                used[i][j] = 0;
                grid[i][j] = -1;
            }
        }
        printf("%d\n" , calc_ways(0  ,  0 , 0 ));
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T23:07:30.577

你几乎不需要一个程序来解决这个问题。

不失一般性，令 m <= n。

首先，我们必须有 n <= r，否则没有解决方案是可能的。

然后，我们将问题细分为一个大小为 mxm 的正方形，我们将在其上沿主对角线放置 m 个硬币，以及一个余数，我们将在其上放置 n - m 个硬币以满足剩余条件。

有一种方法可以沿正方形的主要对角线放置硬币。

余数有 m^(n - m) 个可能性。到目前为止，我们可以在 n 中置换总数！方式，尽管其中一些将是重复的（留给学生练习的有多少）。

此外，还有 r - n 个硬币可以放置，还有 (m - 1)n 个硬币可以放置。

把这些放在一起，我们有一个上限

```
1 x m^(n - m) x n! x C((m - 1)n, r - n) 
```

问题的解决方案。将此数字除以重复排列的数量，您就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:38:15.527

## 问题 1

代码将首先在每个方格上放置一枚硬币并将每个方格标记为已使用。

然后它将测试最终位置并确定最终位置不符合 r 个硬币的目标。

接下来它将开始回溯，但永远不会真正尝试另一个选择，因为 used[row][col] 设置为 1，这会使代码短路以放置硬币。

换句话说，一个问题是“已使用”中的条目被设置，但在递归期间从未被清除。

## 问题 2

代码的另一个问题是，如果 n,m 的大小为 200，则它永远不会完成。

问题是这个回溯代码的复杂度为 O(2^(n*m))，因为它将尝试放置硬币的所有可能组合（n=m=200 的许多宇宙生命周期......）。

我建议你看看不同的方法。例如，您可能需要考虑动态规划来计算将“k”个硬币放置在棋盘剩余的“a”列上的方式，这样我们就可以确保将硬币放置在棋盘的“b”行上。目前没有硬币的棋盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T09:01:24.120

它可以被视为可以用 r 个硬币填充 d 网格的总方式 - （留下单行和填充 d 剩余的总方式 - 留下单列和填充 d 剩余的总方式 - 留下行和列的总方式一起 nd 填充 d 休息）这意味着

```
p(n*m ,r) -( (p((n-1)*m , r) * c(n,1)) +(p((m-1)*n , r) * c(m,1))+(p((n-1)*(m-1) , r) * c(n,1)*c(m,1)) ) 
```

我只是这么认为，但不确定！

# jquery - 放入for循环时，jquery评级星星显示在顶部

> ID：11617956
> 
> 赞同：0
> 
> 时间：2012-07-23T18:04:49.137
> 
> 标签：jquery, rating

我的问题是 JQuery 明星插件。我有一些有评级的评论。但是每当我将代码放入 for 循环时，所有评论的所有星星都会立即显示在顶部。我的测试代码如下：

```
{% for rec in recent %}                 
Rating:
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="1" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="2" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="3" disabled="disabled"  checked="checked"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="4" <input class="star {split:4}" type="radio" name="test-4-rating-6" value="5" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="6" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="7" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="8" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="9" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="10" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="11" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="12" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="13" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="14" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="15" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="16" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="17" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="18" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="19" disabled="disabled"/>
<input class="star {split:4}" type="radio" name="test-4-rating-6" value="20" disabled="disabled"/>
{% endfor %} 
```

出于测试目的，我检查了值 3。

我什至尝试像这样从javascript调用`('input').rating('select','3')`；

[根据http://www.fyneworks.com](http://www.fyneworks.com)中的演示，我正在使用 5 星评级

一次意义——例如我在页面上显示了 12 条评论。每个评论都有评论文本和一些字段和评级。这意味着它不是为每条评论显示 5 颗星，而是在页面顶部显示所有评论的评级星。这意味着在第一次评论的顶部，我显示了 5*12=60 颗星。

对于我的生活，我不知道为什么它会那样做。网站上还提供了 jquery 星级评定的 css 文件。关于问题的文档不多。

我真的很感激任何帮助..即使是对其他评级插件的建议也会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:46:47.033

作为对另一个评级插件的建议：[下载 RateIt](http://rateit.codeplex.com)，[查看示例](http://www.radioactivethinking.com/rateit/example/example.htm)

# php - PHP回显输出没有延迟？

> ID：11617957
> 
> 赞同：1
> 
> 时间：2012-07-23T18:04:53.283
> 
> 标签：php, echo

又快又脏：是否可以让 php 立即将每个输出发送回浏览器？现在，当我运行它时，它似乎要么等待填充不同的部分，要么等待脚本完全执行。

如果是这样，它会影响性能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T18:07:43.860

您可以使用[`flush()`](http://php.net/flush)，但它是否会做任何事情取决于堆栈的其他部分 - Web 服务器、任何缓存服务器等。

# sql - 根据表的另一个总和对表的一列求和

> ID：11617958
> 
> 赞同：3
> 
> 时间：2012-07-23T18:04:54.677
> 
> 标签：sql, sum

我有这个代码：

```
declare @ReportLines table 
    (RebateInvoiceID int, 
     RebateSetupID int ,
     ShortItemNo float primary key(RebateInvoiceID,RebateSetupID,ShortItemNo),
     TotalAmount float,
     InvoiceTotal float,
     TotalQuantity int )
insert @ReportLines
select
  i.RebateInvoiceID
, coalesce(rs.WholesalerRebateSetupID,r.RebateSetupID)
, bl.ShortItemNo
, sum(round(r.Amount,2)) as TotalAmount
, sum(round(TotalAmount,2)) as InvoiceTotal
, sum(r.Quantity) TotalQuantity
from
  @Invoices i
  join RebateInvoices ri (nolock) on 
    ri.RebateInvoiceID=i.RebateInvoiceID
  inner loop join Rebates r (nolock) on
    r.RebateInvoiceID=i.RebateInvoiceID       
  join RebateSetup rs (nolock) on
    rs.RebateSetupID=r.RebateSetupID
  join BidLines bl (nolock) on 
    r.BidLineGuid=bl.BidLineGuid
  join @Products p on
    p.ShortItemNo=bl.ShortItemNo
  left join ChargebackDetailHistory cd (nolock) on 
    r.DocumentBranchPlant = cd.DocumentBranchPlant
    and r.DocumentNumber = cd.DocumentNumber
    and r.DocumentType = cd.DocumentType
    and r.LineNumber = cd.LineNumber
  left join EDI.dbo.JDE_SaleDetail sd (nolock) on 
    r.DocumentBranchPlant = sd.BranchPlant
    and r.DocumentNumber = sd.OrderNumber
    and r.DocumentType = sd.OrderType
    and r.LineNumber = sd.LineNumber

where 
    cd.InvoiceDate between @BeginDate and @EndDate
    or sd.InvoiceDate between @BeginDate and @EndDate
group by
  i.RebateInvoiceID
, coalesce(rs.WholesalerRebateSetupID,r.RebateSetupID)
, bl.ShortItemNo 
```

我想从总金额列中汇总发票总金额列。当我运行上面的查询时，我得到了一堆奇怪的总数。发票总额应该是每一行的一个数字，并且与 rebateinvoiceid 一致，因为那是它的分组依据，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:18:06.650

您可以进行另一个 Nesty 查询... 像这样：

```
insert @ReportLines
select
   RebateInvoiceID
   , ID
   , ShortItemNo
   , TotalAmount
   , sum(round(TotalAmount,2)) as InvoiceTotal
   , TotalQuantity
from
( 
   select
   i.RebateInvoiceID
   , coalesce(rs.WholesalerRebateSetupID,r.RebateSetupID) as ID
   , bl.ShortItemNo
   , sum(round(r.Amount,2)) as TotalAmount
   , sum(r.Quantity) TotalQuantity
  from (... <the rest of your code here> ...) 
) As MyTable
group by
 RebateInvoiceID, ID, ShortItemNo, TotalAmount, TotalQuantity 
```

# asp.net - RadControls 是否有类似 JqGrid 的等效搜索框/过滤器？

> ID：11617959
> 
> 赞同：0
> 
> 时间：2012-07-23T18:04:55.520
> 
> 标签：asp.net, ajax, jqgrid, rad-controls

JqG​​rid 搜索过滤器功能是我使用 RadControls[在“船舶名称”搜索框中输入任何文本所追求的](http://www.trirand.net/demoaspnetmvc.aspx)。

我在 Telerik 演示中看到的最接近的是[this](http://demos.telerik.com/aspnet-ajax/combobox/examples/functionality/filteringcombo/defaultcs.aspx)，但它提供了列表中所有项目的下拉菜单，并且没有内置到网格中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:20:45.283

此过滤看起来更接近您正在寻找的内容：http: [//demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/filtering/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/generalfeatures/filtering/defaultcs.aspx)

# sql - 以毫秒为单位计算Oracle中两个时间戳之间的差异

> ID：11617962
> 
> 赞同：65
> 
> 时间：2012-07-23T18:05:08.880
> 
> 标签：sql, oracle, datetime

如何计算 Oracle 中两个时间戳之间的时间差（以毫秒为单位）？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-07-23T18:58:24.710

当您减去两个类型的变量时`TIMESTAMP`，您会得到一个`INTERVAL DAY TO SECOND`包含毫秒数和/或微秒数的数值，具体取决于平台。如果数据库是在 Windows 上运行的，`systimestamp`一般都会有毫秒。如果数据库运行在 Unix 上，`systimestamp`一般都会有微秒。

```
 1  select systimestamp - to_timestamp( '2012-07-23', 'yyyy-mm-dd' )
  2*   from dual
SQL> /

SYSTIMESTAMP-TO_TIMESTAMP('2012-07-23','YYYY-MM-DD')
---------------------------------------------------------------------------
+000000000 14:51:04.339000000 
```

您可以使用该`EXTRACT`函数来提取单个元素`INTERVAL DAY TO SECOND`

```
SQL> ed
Wrote file afiedt.buf

  1  select extract( day from diff ) days,
  2         extract( hour from diff ) hours,
  3         extract( minute from diff ) minutes,
  4         extract( second from diff ) seconds
  5    from (select systimestamp - to_timestamp( '2012-07-23', 'yyyy-mm-dd' ) diff
  6*           from dual)
SQL> /

      DAYS      HOURS    MINUTES    SECONDS
---------- ---------- ---------- ----------
         0         14         55     37.936 
```

然后，您可以将这些组件中的每一个转换为毫秒并将它们相加

```
SQL> ed
Wrote file afiedt.buf

  1  select extract( day from diff )*24*60*60*1000 +
  2         extract( hour from diff )*60*60*1000 +
  3         extract( minute from diff )*60*1000 +
  4         round(extract( second from diff )*1000) total_milliseconds
  5    from (select systimestamp - to_timestamp( '2012-07-23', 'yyyy-mm-dd' ) diff
  6*           from dual)
SQL> /

TOTAL_MILLISECONDS
------------------
          53831842 
```

但是，通常情况下，使用`INTERVAL DAY TO SECOND`表示或将小时、分钟、秒等分开的列比计算两个`TIMESTAMP`值之间的总毫秒数更有用。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-11-16T20:02:53.847

这是一个存储过程：

```
CREATE OR REPLACE function timestamp_diff(a timestamp, b timestamp) return number is 
begin
  return extract (day    from (a-b))*24*60*60 +
         extract (hour   from (a-b))*60*60+
         extract (minute from (a-b))*60+
         extract (second from (a-b));
end;
/ 
```

如果您还想击败否定他工作的 Oracle 开发人员的废话，请投票！

因为第一次比较时间戳应该每个人都需要一个小时左右......

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-23T18:08:25.450

### 更简单的解决方案：

```
SELECT numtodsinterval(date1-date2,'day') time_difference from dates; 
```

### 对于时间戳：

```
SELECT (extract(DAY FROM time2-time1)*24*60*60)+ 
(extract(HOUR FROM time2-time1)*60*60)+
(extract(MINUTE FROM time2-time1)*60)+
extract(SECOND FROM time2-time1)
into diff FROM dual;

RETURN diff; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-23T18:08:35.157

```
Select date1 - (date2 - 1) * 24 * 60 *60 * 1000 from Table; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-12T16:19:17.990

我知道这已经被详尽地回答了，但我想与大家分享我的功能。它使您可以选择是否希望您的答案以天、小时、分钟、秒或毫秒为单位。您可以对其进行修改以满足您的需要。

```
CREATE OR REPLACE FUNCTION Return_Elapsed_Time (start_ IN TIMESTAMP, end_ IN TIMESTAMP DEFAULT SYSTIMESTAMP, syntax_ IN NUMBER DEFAULT NULL) RETURN VARCHAR2 IS
    FUNCTION Core (start_ IN TIMESTAMP, end_ IN TIMESTAMP DEFAULT SYSTIMESTAMP, syntax_ IN NUMBER DEFAULT NULL) RETURN VARCHAR2 IS
        day_ VARCHAR2(7); /* This means this FUNCTION only supports up to 99 days */
        hour_ VARCHAR2(9); /* This means this FUNCTION only supports up to 999 hours, which is over 41 days */
        minute_ VARCHAR2(12); /* This means this FUNCTION only supports up to 9999 minutes, which is over 17 days */
        second_ VARCHAR2(18); /* This means this FUNCTION only supports up to 999999 seconds, which is over 11 days */
        msecond_ VARCHAR2(22); /* This means this FUNCTION only supports up to 999999999 milliseconds, which is over 11 days */
        d1_ NUMBER;
        h1_ NUMBER;
        m1_ NUMBER;
        s1_ NUMBER;
        ms_ NUMBER;
        /* If you choose 1, you only get seconds. If you choose 2, you get minutes and seconds etc. */
        precision_ NUMBER; /* 0 => milliseconds; 1 => seconds; 2 => minutes; 3 => hours; 4 => days */
        format_ VARCHAR2(2) := ', ';
        return_ VARCHAR2(50);
    BEGIN
        IF (syntax_ IS NULL) THEN
            precision_ := 0;
        ELSE
            IF (syntax_ = 0) THEN
                precision_ := 0;
            ELSIF (syntax_ = 1) THEN
                precision_ := 1;
            ELSIF (syntax_ = 2) THEN
                precision_ := 2;
            ELSIF (syntax_ = 3) THEN
                precision_ := 3;
            ELSIF (syntax_ = 4) THEN
                precision_ := 4;
            ELSE 
                precision_ := 0;
            END IF;
        END IF;
        SELECT EXTRACT(DAY FROM (end_ - start_)) INTO d1_ FROM DUAL;
        SELECT EXTRACT(HOUR FROM (end_ - start_)) INTO h1_ FROM DUAL;
        SELECT EXTRACT(MINUTE FROM (end_ - start_)) INTO m1_ FROM DUAL;
        SELECT EXTRACT(SECOND FROM (end_ - start_)) INTO s1_ FROM DUAL;
        IF (precision_ = 4) THEN
            IF (d1_ = 1) THEN
                day_ := ' day';
            ELSE
                day_ := ' days';
            END IF;
            IF (h1_ = 1) THEN
                hour_ := ' hour';
            ELSE
                hour_ := ' hours';
            END IF;
            IF (m1_ = 1) THEN
                minute_ := ' minute';
            ELSE
                minute_ := ' minutes';
            END IF;
            IF (s1_ = 1) THEN
                second_ := ' second';
            ELSE
                second_ := ' seconds';
            END IF;
            return_ := d1_ || day_ || format_ || h1_ || hour_ || format_ || m1_ || minute_ || format_ || s1_ || second_;
            RETURN return_;
        ELSIF (precision_ = 3) THEN
            h1_ := (d1_ * 24) + h1_;
            IF (h1_ = 1) THEN
                hour_ := ' hour';
            ELSE
                hour_ := ' hours';
            END IF;
            IF (m1_ = 1) THEN
                minute_ := ' minute';
            ELSE
                minute_ := ' minutes';
            END IF;
            IF (s1_ = 1) THEN
                second_ := ' second';
            ELSE
                second_ := ' seconds';
            END IF;
            return_ := h1_ || hour_ || format_ || m1_ || minute_ || format_ || s1_ || second_;
            RETURN return_;
        ELSIF (precision_ = 2) THEN
            m1_ := (((d1_ * 24) + h1_) * 60) + m1_;
            IF (m1_ = 1) THEN
                minute_ := ' minute';
            ELSE
                minute_ := ' minutes';
            END IF;
            IF (s1_ = 1) THEN
                second_ := ' second';
            ELSE
                second_ := ' seconds';
            END IF;
            return_ := m1_ || minute_ || format_ || s1_ || second_;
            RETURN return_;
        ELSIF (precision_ = 1) THEN
            s1_ := (((((d1_ * 24) + h1_) * 60) + m1_) * 60) + s1_;
            IF (s1_ = 1) THEN
                second_ := ' second';
            ELSE
                second_ := ' seconds';
            END IF;
            return_ := s1_ || second_;
            RETURN return_;
        ELSE
            ms_ := ((((((d1_ * 24) + h1_) * 60) + m1_) * 60) + s1_) * 1000;
            IF (ms_ = 1) THEN
                msecond_ := ' millisecond';
            ELSE
                msecond_ := ' milliseconds';
            END IF;
            return_ := ms_ || msecond_;
            RETURN return_;
        END IF;
    END Core;
BEGIN
    RETURN(Core(start_, end_, syntax_));
END Return_Elapsed_Time; 
```

例如，如果我现在（12.10.2018 11:17:00.00）使用 Return_Elapsed_Time(TO_TIMESTAMP('12.04.2017 12:00:00.00', 'DD.MM.YYYY HH24:MI:SS.FF' ),SYSTIMESTAMP)，它应该返回如下内容：

```
47344620000 milliseconds 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-12T14:05:24.133

最好使用这样的程序：

```
CREATE OR REPLACE FUNCTION timestamp_diff
(
start_time_in TIMESTAMP
, end_time_in TIMESTAMP
)
RETURN NUMBER
AS
l_days NUMBER;
l_hours NUMBER;
l_minutes NUMBER;
l_seconds NUMBER;
l_milliseconds NUMBER;
BEGIN
SELECT extract(DAY FROM end_time_in-start_time_in)
, extract(HOUR FROM end_time_in-start_time_in)
, extract(MINUTE FROM end_time_in-start_time_in)
, extract(SECOND FROM end_time_in-start_time_in)
INTO l_days, l_hours, l_minutes, l_seconds
FROM dual;

l_milliseconds := l_seconds*1000 + l_minutes*60*1000 + l_hours*60*60*1000 + l_days*24*60*60*1000;
RETURN l_milliseconds;

END; 
```

您可以通过调用来检查它：

```
SELECT timestamp_diff (TO_TIMESTAMP('12.04.2017 12:00:00.00', 'DD.MM.YYYY HH24:MI:SS.FF'), 
                      TO_TIMESTAMP('12.04.2017 12:00:01.111', 'DD.MM.YYYY HH24:MI:SS.FF')) 
            as milliseconds
    FROM DUAL; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-07T07:03:59.027

我知道很多人发现这个解决方案简单明了：

```
create table diff_timestamp (
f1 timestamp
, f2 timestamp);

insert into diff_timestamp values(systimestamp-1, systimestamp+2);
commit;

select cast(f2 as date) - cast(f1 as date) from diff_timestamp; 
```

答对了！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-14T00:39:35.300

时间戳在格式之间正确转换，否则字段可能会被误解。

当从表 TableXYZ 中考虑两个不同的日期（Date2、Date1）时，这是一个正确的工作示例。

```
SELECT ROUND (totalSeconds / (24 * 60 * 60), 1) TotalTimeSpendIn_DAYS,
       ROUND (totalSeconds / (60 * 60), 0) TotalTimeSpendIn_HOURS,
       ROUND (totalSeconds / 60) TotalTimeSpendIn_MINUTES,
       ROUND (totalSeconds) TotalTimeSpendIn_SECONDS
  FROM (SELECT ROUND (
                    EXTRACT (DAY FROM timeDiff) * 24 * 60 * 60
                  + EXTRACT (HOUR FROM timeDiff) * 60 * 60
                  + EXTRACT (MINUTE FROM timeDiff) * 60
                  + EXTRACT (SECOND FROM timeDiff))
                  totalSeconds,
          FROM (SELECT TO_TIMESTAMP (
                            TO_CHAR (Date2,
                                     'yyyy-mm-dd HH24:mi:ss')
                          - 'yyyy-mm-dd HH24:mi:ss'),
                       TO_TIMESTAMP (
                          TO_CHAR (Date1,
                                   'yyyy-mm-dd HH24:mi:ss'),
                          'yyyy-mm-dd HH24:mi:ss')
                          timeDiff
                  FROM TableXYZ)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-01T22:04:15.237

以上有一些语法错误，请在oracle上使用以下内容：

```
SELECT ROUND (totalSeconds / (24 * 60 * 60), 1) TotalTimeSpendIn_DAYS,
  ROUND (totalSeconds      / (60 * 60), 0) TotalTimeSpendIn_HOURS,
  ROUND (totalSeconds      / 60) TotalTimeSpendIn_MINUTES,
  ROUND (totalSeconds) TotalTimeSpendIn_SECONDS
FROM
  (SELECT ROUND ( EXTRACT (DAY FROM timeDiff) * 24 * 60 * 60 + EXTRACT (HOUR FROM timeDiff) * 60 * 60 + EXTRACT (MINUTE FROM timeDiff) * 60 + EXTRACT (SECOND FROM timeDiff)) totalSeconds
  FROM
    (SELECT TO_TIMESTAMP(TO_CHAR( date2 , 'yyyy-mm-dd HH24:mi:ss'), 'yyyy-mm-dd HH24:mi:ss') - TO_TIMESTAMP(TO_CHAR(date1, 'yyyy-mm-dd HH24:mi:ss'),'yyyy-mm-dd HH24:mi:ss') timeDiff
    FROM TABLENAME
    )
); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-26T08:57:08.307

I）如果您需要计算两个时间戳列之间经过的时间（以秒为单位），请尝试以下操作：

```
SELECT 
    extract ( day from (end_timestamp - start_timestamp) )*86400 
    + extract ( hour from (end_timestamp - start_timestamp) )*3600 
    + extract ( minute from (end_timestamp - start_timestamp) )*60 
    + extract ( second from (end_timestamp - start_timestamp) ) 
FROM table_name 
```

II）如果您只想以字符格式显示时差，请尝试以下操作：

```
SELECT to_char (end_timestamp - start_timestamp) FROM table_name 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-26T13:35:25.483

我在[这里](https://stackoverflow.com/a/63597872/6866545)发布了一些将间隔转换为纳秒和纳秒转换为间隔的方法。这些方法具有纳秒级精度。

您只需要调整它以获得毫秒而不是纳秒。

将间隔转换为纳秒的更短方法。

```
SELECT (EXTRACT(DAY FROM (
    INTERVAL '+18500 09:33:47.263027' DAY(5) TO SECOND --Replace line with desired interval --Maximum value: INTERVAL '+694444 10:39:59.999999999' DAY(6) TO SECOND(9) or up to 3871 year
) * 24 * 60) * 60 + EXTRACT(SECOND FROM (
    INTERVAL '+18500 09:33:47.263027' DAY(5) TO SECOND --Replace line with desired interval
))) * 100 AS MILLIS FROM DUAL;

MILLIS
1598434427263.027 
```

# ruby-on-rails - 豹升级到狮子后安装pg gem并运行服务器时出错

> ID：11617967
> 
> 赞同：0
> 
> 时间：2012-07-23T18:05:26.173
> 
> 标签：ruby-on-rails, macos, postgresql, osx-lion, pg

使用时间机器备份将文件从运行 Leopard 的 macbook 同步到运行 Lion 的 macbook pro。由于我正在运行 sqlite3，在推送到 heroku 时遇到了麻烦，我在尝试安装 pg gem 时陷入了困境。

```
gem install pg 
```

产量：

```
 /Users/taylorjackson/.rvm/rubies/ruby-1.9.2-p136/bin/ruby extconf.rb 
checking for pg_config... yes
Using config values from /usr/local/bin/pg_config
checking for libpq-fe.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

我是 Unix 新手，担心时间机器在将 32 位豹与 64 位狮子混搭时创建的文件结构存在严重问题。到目前为止我已经采取的步骤。

重新安装 XCode

```
Xcode 4.3.3
Build version 4E3002 
```

通过首选项在 XCode 中安装命令行工具。

更新到 rvm 1.14.6 (master)

```
rvm get head 
```

试图用 macports 在本地安装 postgre 时头撞墙。卸载 macports 并安装 homebrew

关注的记录来自

```
brew doctor 
```

然后

冲泡安装postgresql

遇到 python 问题并按照建议安装 w/o python

```
brew install --no-python postgresql 
```

似乎得到了 postgresql 的全新安装，但我的输出来自

```
gem install pg 
```

还是：

```
 /Users/taylorjackson/.rvm/rubies/ruby-1.9.2-p136/bin/ruby extconf.rb 
checking for pg_config... yes
Using config values from /usr/local/bin/pg_config
checking for libpq-fe.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

也试过

```
bundle install 
```

和

```
bundle config build.pg --with-pg-config=/users/taylorjackson/postgresql/bin/pg_config
bundle install 
```

结果相同 我过去 7 小时的工作效率下降到零。找不到相关的 mkmf.log 文件。还有其他想法吗？

编辑：

找到 mkmf.log。以下是相关内容：

```
def have_devel?
  unless defined? $have_devel
    $have_devel = true
    $have_devel = try_link(MAIN_DOES_NOTHING)
  end
  $have_devel
end

def try_do(src, command, &b)
  unless have_devel?
    raise <<MSG
The complier failed to generate an executable file.
You have to install development tools first.
MSG
  end
  begin
    src = create_tmpsrc(src, &b)
    xsystem(command)
  ensure
    log_src(src)
    rm_rf 'conftest.dSYM'
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:58:05.937

您找到的文件是`mkmf.rb`，不是`mkmf.log`。开始时将`mkmf.log`看起来像这样：

```
find_executable: checking for pg_config... -------------------- yes

--------------------

find_header: checking for libpq-fe.h... -------------------- yes
"/usr/bin/gcc-4.2 -o conftest -I/Users/mgranger/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/x86_64-darwin11.3.0 -I/Users/mgranger/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/backward -I/Users/mgranger/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1 -I. -I/Users/mgranger/.rvm/usr/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/usr/include  -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration  -fno-common -pipe conftest.c  -L. -L/Users/mgranger/.rvm/rubies/ruby-1.9.3-p194/lib -L/Users/mgranger/.rvm/usr/lib -L. -L/usr/local/lib -L/usr/lib     -lruby.1.9.1  -lpthread -ldl -lobjc "
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: int main() {return 0;}
/* end */ 
```

您可以在解压后的 gem 的 'ext' 目录中找到它。在 bash 下，这对我有用：

```
less $(dirname $(gem which pg))/../ext/mkmf.log 
```

在 OSX 下，第一个标头失败几乎总是表明您的编译器设置存在问题，特别是如果它找到了您的`pg_config`（并且看起来像您的）。查看命令开头的引号中的“gcc”实际上存在于您的机器上。就我而言，这是`/usr/bin/gcc-4.2`. 如果缺少，您需要先修复它，然后才能从源代码正确安装*任何扩展。*

另一方面，如果您`gcc`确实存在，请附上该`mkmf.log`文件，该文件通常包含为您指明正确方向所需的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:55:06.887

重新启动，并注意到不知何故 PostgreSQL 已被添加为用户（！）。删除用户，将 gem 'pg' 添加到安装的 gemfile 和 bundle 中，整个事情进展顺利。不确定安装过程中有什么奇怪的地方会导致这种情况发生。我没有更改安装中的任何默认值 - 但我的猜测是使用过期版本的 macports 会出现问题。

对于那些处于类似情况的人，我建议 1) 永远不要使用时间机器备份切换操作系统。2) 全新安装 xcode、xcode 开发人员工具（来自 xcode 首选项菜单）和 homebrew。3) 强制更新 rvm 4) 使用 brew install postgresql 在本地安装 postgresql。5) 重新启动并尝试再次捆绑安装 pg gem。我做了很多事情，但我认为这些是我认为有效的步骤。

# dependency-injection - 在解决方案中使用多个项目时如何初始化存储库并使用依赖注入处理 objectcontext

> ID：11617969
> 
> 赞同：2
> 
> 时间：2012-07-23T18:05:41.240
> 
> 标签：dependency-injection, asp.net-mvc-4, repository-pattern, entity-framework-4.3

我的解决方案中有 4 个 dll 项目。

1.  MVC 4 网络应用程序
2.  业务层
3.  数据访问层（实现存储库模式）
4.  域（在上述所有项目中引用）

我正在尝试为此架构实现依赖注入。我发现的每个示例都解释了依赖注入在控制器内的构造函数中创建了一个存储库实例，并在存储库上调用了一个 dispose 方法，该方法反过来处理对象上下文，这意味着 DAL 在 Web 层中直接引用。但是，我不想在 web 和 DAL 之间直接引用业务，而应在 web 中引用业务，而应在业务中引用 dal。WEB -> 商业 -> DAL。

我的问题是如何使用上述方法初始化存储库并处理 objectcontext？我是否还需要为我的业务类创建接口并使用它们而不是存储库接口来注入依赖项，然后从具体业务类的构造函数中依次初始化存储库，或者我是否应该在 Web 层中同时引用 DAL 和 BLL，从控制器的构造函数中初始化存储库并将该对象传递给业务层？

# wpf - 最后一列后的DataGrid尾随空格

> ID：11617970
> 
> 赞同：2
> 
> 时间：2012-07-23T18:05:52.617
> 
> 标签：wpf, datagrid

在 wpf 数据网格中，如果数据网格比列宽的总和更宽，则会得到尾随空格。默认情况下，单击该区域不会选择行，选择行突出显示也不会覆盖该区域。

如何注册来自该区域的点击以选择适当的行，并允许选择行突出显示延伸到该区域。

这个问题： [WPF DataGrid full row selection](https://stackoverflow.com/questions/5518807/wpf-datagrid-full-row-selection) is similar but I cannot add a dummy column or set my column widths to *.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T22:24:55.990

```
<DataGrid Name="dg">
    <DataGrid.RowStyle>
        <Style TargetType="{x:Type DataGridRow}">
            <EventSetter Event="MouseLeftButtonDown" Handler="DataGridRow_MouseLeftButtonDown" />
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{StaticResource {x:Static SystemColors.HighlightBrushKey}}" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </DataGrid.RowStyle>
</DataGrid> 
```

后面有这段代码

```
private void DataGridRow_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    dg.SelectedIndex = (sender as DataGridRow).GetIndex();
} 
```

应该管用。

# windows - 尝试通过导入部分直接调用函数

> ID：11617974
> 
> 赞同：1
> 
> 时间：2012-07-23T18:06:11.303
> 
> 标签：windows, x86, nasm, portable-executable

我一直在搞乱汇编语言中的 PE 文件结构。我很确定我已经正确地进入了导入部分。我将此用作参考，其中每个框等于 4 个字节：

```
+-------------------------+-------------------------+
|     RVA to a list of    |       DATE/TIME         |
| pointer to APIs names   |                         |  IMPORT DATA DIRECTORY
+-------------------------+-------------------------+          #1
| .DLL address (unused)   |     RVA to .DLL name    |
+-------------------------+-------------------------+
|RVA to API address list  | 
+-------------------------+ 
```

![奥利德。 注意右侧 eax 的值 (00402048)，这是我在导入部分查找的值，然后查看突出显示的指令的值 (00402000)](../Images/aacd29129439c665771d8471bfeb105f.png)

奥利德。注意右边eax的值（00402048），然后看高亮的调用指令的值是跳转到（00402000）。

我试图从（RVA 到 API 地址列表）调用第一个函数，即**ExitProcess** ，但是当我尝试对该地址发出调用时，它导致我的程序崩溃。当我用 Ollydbg 调试它时，我发现发出**调用 ExitProcess**时的地址与我在列表中找到的地址不同。在 Ollydbg 中，我发现的地址指向 <&KERNEL32.ExitProcess>，而**调用 ExitProcess**指向 <JMP.&KERNEL32.ExitProcess>。我在某处读到过某种 jmp 存根。就是这样吗？我应该如何调用“RVA 到 API 地址列表”中的函数？

我知道这可能令人困惑。如果您需要更多说明，请告诉我。

这是代码：

```
extern printf
extern ExitProcess
global _start
section .code
 _start:
    mov eax, [imagebase]
    mov esi, eax
    add eax, 3ch
    mov eax, DWORD [eax]
    add eax, esi; PE header pointer in eax
    add eax, 128; 24 for PE Optional Header offset and then 104 for import RVA
    mov ebx, DWORD [eax]
    add ebx, DWORD [imagebase]; ebx now has import section offset
    mov eax, DWORD [ebx+16]
    add eax, DWORD [imagebase]; has array offset
    mov ecx, ExitProcess
    push 0
    call ecx
    ;call eax
    ;jmp ecx
    ;call ExitProcess

imagebase: db 0,0,64,0; 0x00400000; This is right 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:59:37.610

好像我找到了数组，但我从未检索到该地址的值。所以我试图在数组的地址而不是数组的第一个元素处调用函数。

```
extern printf
extern ExitProcess
global _start
section .code
_start:
    mov eax, [imagebase]
    mov esi, eax
    add eax, 3ch
    mov eax, DWORD [eax]
    add eax, esi; PE header pointer in eax
    add eax, 128; 24 for PE Optional Header offset and then 104 for import RVA
    mov ebx, DWORD [eax]
    add ebx, DWORD [imagebase]; ebx now has import section offset
    mov eax, DWORD [ebx+16]
    add eax, DWORD [imagebase]; has array offset
    mov eax, [eax];This is what I needed to do
    push 0
    call eax

imagebase: db 0,0,64,0; 
```

# asp.net - 身份连接字符串，从本地到主机

> ID：11617979
> 
> 赞同：0
> 
> 时间：2012-07-23T18:06:36.330
> 
> 标签：asp.net, ado.net, connection-string

所以我的**本地**web.config 文件中有以下内容：

```
<connectionStrings>
<add name="orangefreshConnectionString1" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\orangefresh.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient" />
<add name="orangefreshEntities" connectionString="metadata=res://*/App_Code.Orangefresh.csdl|res://*/App_Code.Orangefresh.ssdl|res://*/App_Code.Orangefresh.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\orangefresh.mdf;integrated security=True;user instance=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

我将我的网站上传到我的主机，创建了我的数据库并附加了必要的文件（mdf 文件和日志文件），运行查询显示数据库具有所有正确的数据并且工作正常。

主持人给了我以下连接字符串：

```
workstation id=orangefresh.mssql.somee.com;packet size=4096;user id=xxxx;pwd=xxxx;data source=orangefresh.mssql.somee.com;persist security info=False;initial catalog=orangefresh 
```

（我涂黑了用户/通行证详细信息）这个连接字符串，我猜是替换本地“orangefreshConnectionString1”连接字符串，我已经完成了。现在我想知道用什么来替换我的身份连接字符串，即使用实体框架的“orangefreshEntities”。

这显然会导致使用 ADO 的页面出现错误，所有其他页面似乎都可以正常工作。关于如何处理实体连接字符串的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:47:04.453

固定的：

```
<add name="orangefreshEntities" connectionString="metadata=res://*/App_Code.Orangefresh.csdl|res://*/App_Code.Orangefresh.ssdl|res://*/App_Code.Orangefresh.msl;provider=System.Data.SqlClient;provider connection string=&quot;workstation id=orangefresh.mssql.somee.com;packet size=4096;user id=xxxx;pwd=xxxx;data source=orangefresh.mssql.somee.com;persist security info=False;initial catalog=orangefresh&quot;" providerName="System.Data.EntityClient" /> 
```

诀窍是将连接字符串放在 $quot 标记之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:11:02.147

在 orangefreshEntities 中，您可以参考`connection string=&quot;data source=.\SQLEXPRESS;`...

我会用新的连接字符串更改那部分。

剩下的你就可以走了。csdl、msl 和 ssdl 的路径不会改变。

# html - 带有单选按钮的奇怪 Firebug 行为

> ID：11617981
> 
> 赞同：3
> 
> 时间：2012-07-23T18:06:48.387
> 
> 标签：html, css, firefox, firebug

以下是一个很小的问题，我只是想了解为什么会发生这种情况。

创建一个如下所示的 html 文档：

```
<html>
<head>
    <title></title>
    <style>
        body {font-family: Arial;}
    </style>
</head>
<body>
    <input type="radio" name="radio" />
</body>
</html> 
```

现在在 Firefox 中打开它（我使用的是 build 14.0.1）并右键单击单选按钮以打开上下文菜单。从该菜单中选择“Inspect Element with Firebug...”，这将打开 Firebug，同时打开 HTML 选项卡并突出显示单选按钮 HTML 代码。

现在尝试选择单选按钮。它将被选中一秒钟，但随后它会迅速取消选择。为什么？

我知道如果我删除该正文样式定义，上述行为将不会发生，或者如果我在 Firebug 打开时位于不同的选项卡（例如“控制台”选项卡），它不会发生，或者如果 Firebug 没有打开它会赢不会发生。

我知道这是非常次要的而且非常有情境，我只是想至少知道这是为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:16:33.827

我以前听说过这个，我的建议是将它报告给 FireBug，现在继续尝试，直到找到解决方法。也许尝试在它周围包裹一个表格或在它周围添加内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:52:39.660

这是一个已知的萤火虫问题，遗憾的是仍然开放

[http://code.google.com/p/fbug/issues/detail?id=5744](http://code.google.com/p/fbug/issues/detail?id=5744)

令人讨厌的是，如果您不知道它，它会造成一个[heisenbug](http://en.wikipedia.org/wiki/Heisenbug)情况，您无法弄清楚为什么单选按钮不会为您检查。

# sencha-touch-2 - Sencha Touch 2 carousel.setItems() 不工作

> ID：11617984
> 
> 赞同：0
> 
> 时间：2012-07-23T18:06:59.777
> 
> 标签：sencha-touch-2, sencha-architect

我正在尝试使用 Sencha Architect 构建动态图像轮播。我在标签面板中添加了一个轮播。轮播设置为从名为“pictureStore”的商店读取图像。我有一个从商店中提取图像并创建轮播项目的功能 - 我可以从商店获取图像但无法创建轮播。当我尝试使用 carouself.setItems() 或 carousel.add() 时，出现错误“对象 # 没有方法”。如果我创建动态轮播的方法不正确，请查看并告诉我。感谢您的帮助和有关如何修复的知识

谢谢，

读取图像和创建轮播项目的功能（直到下面的评论）：

```
onMycarouselActivate: function(container, newActiveItem, oldActiveItem, options) {
        Ext.getStore('pictureStore').load(function(pictures) {
            var items = [];

            Ext.each(pictures, function(picture) {
                console.log(picture.get('image'));
                if (!picture.get('image')) {
                    return;
                }

                items.push({
                    xtype: 'myimage',
                    picture: picture
                });
            });

            //following doesn't work for adding the carousel images:

            //carousel.setItems(items);
            //carousel.add(items);
            //carousel.items = [{html: items}];
            //carousel.add(carousel.items);
            //carousel.setActiveItem(0);
        });
    }, 
```

带有图像信息的 JSON 示例

```
{
    "test": {
        "cat": {
            "entries": [
                {
                    "image": "/images/1.png"
                },
                {
                    "image": "/images/2.png"
                }
            ]
        }
    }
} 
```

使用 carousel.add 或 carousel.setItems 时的错误消息：

```
Object #<HTMLDivElement> has no method 'add' 
Object #<HTMLDivElement> has no method 'setItems' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T05:09:30.387

你可以试试这个，这对我有用......

```
Ext.getStore('Pictures').load(function(pictures) {

        Ext.each(pictures, function(picture) {
            if (picture.get('image')) {

                carousel.add({
                        html: '<img style="max-width: 100%; max-height: 100%;" src="' + picture.get('image') + '"/>'
                });
            }
        });
 }); 
```

希望对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:58:04.987

试试这个代码

```
 myCarousel.add({
                    xtype: 'image',
                    scr:'path of image'
                }); 
```

其中 myCarousel 是轮播的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:06:36.783

如果您的变量`carousel`没有方法`add`，或者`setItems`它可能不是您的轮播。

为了确保这一点，您可以尝试`console.log(carousel);`弄清楚它到底是什么。此外，它似乎没有在您的代码中的任何地方声明......

但这很容易修复。我假设您已经在轮播中添加了一个事件侦听器来侦听`activate`事件，如果您查看[此事件的文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.carousel.Carousel-event-activate)，您会看到发送给回调函数的第一个参数是容器（在这种情况下，您的旋转木马）

所以你必须写的是：

```
onMycarouselActivate: function(carousel, newActiveItem, oldActiveItem, options) { 
```

而不是这个

```
onMycarouselActivate: function(container, newActiveItem, oldActiveItem, options) { 
```

你应该准备好了

**编辑**

此外，如果您查看[图像组件的文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.Img)，您会看到配置中没有`picture`，但有一个`src`属性。所以你应该写：

```
items.push({
  xtype: 'myimage',
  src: picture
}); 
```

希望这有帮助

# linux - 使用哪种语言编写 linux 发行版 GUI 安装程序

> ID：11617985
> 
> 赞同：-1
> 
> 时间：2012-07-23T18:07:01.743
> 
> 标签：linux, installation

我想知道，如果我想为 Linux 发行版制作 GUI 安装程序，我应该使用哪种编程语言？是GTK吗？或者 ？像这样： http: [//www.castellan.net/linux_firewall/fedora_install_1.jpg](http://www.castellan.net/linux_firewall/fedora_install_1.jpg)或多或少。这是我想尝试的 ArchLinux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:10:16.870

您可以使用与目标平台支持的 GUI 工具包绑定的任何语言。一些例子：

*   C 和 GTK+。
*   C++ 和 gtkmm。
*   C++ 和 Qt。
*   C# 和 Gtk#。
*   Python 和 PyGTK。
*   Python 和 PyQt。

这绝不是一份详尽的清单。

换句话说：从你熟悉的语言开始，看看是否有可用的可用 GUI 工具包，要么以该语言本地实现，要么通过绑定。

# google-maps-api-3 - 在更新融合表时自动进行地理编码 - 谷歌专家

> ID：11617992
> 
> 赞同：0
> 
> 时间：2012-07-23T18:07:23.670
> 
> 标签：google-maps-api-3, google-fusion-tables

每当更新融合表时，我想自动化谷歌地图地理编码。或任何其他以编程方式调用地理编码的网络服务。

参考：请检查此图片

[http://imageshack.us/photo/my-images/829/7232012113102pm.png/](http://imageshack.us/photo/my-images/829/7232012113102pm.png/)

这正是我以编程方式需要的。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:55:12.130

这还不可能。有一个[待处理的功能请求](http://code.google.com/p/fusion-tables/issues/detail?id=230&q=Type=Feature_Request&colspec=ID%20Type%20Status%20Summary%20Stars%20Component&start=100)，请随意给它加星标，这表明您也想要此功能。

在此之前，您可以在将数据插入 Google Fusion Tables 之前对其进行地理编码。您可以使用多种服务（[Google Geocoding API](https://developers.google.com/maps/documentation/geocoding/)、[Yahoo PlaceFinder](http://developer.yahoo.com/geo/placefinder/)、[MapQuest Geocoding API](http://developer.mapquest.com/web/products/dev-services/geocoding-ws)）。一旦你得到属于你的数据的 lat/lng 数据，你可以简单地将它插入到你的 Fusion Table 中。

# ruby-on-rails - 从 Rails 中另一个对象的显示动作创建一个对象

> ID：11617993
> 
> 赞同：0
> 
> 时间：2012-07-23T18:07:41.617
> 
> 标签：ruby-on-rails, activerecord

所以我有一个相当典型的博客应用程序，其中包含帖子和评论。

每个评论属于一个帖子 一个帖子可以有很多评论。

基本上我想在帖子的显示操作中添加一个评论表单，而在评论模型中的 attr_accessible 下没有 post_id 。

在我的帖子控制器中，我有：

```
def show
    @post = Post.find(params[:id])
    @poster = "#{current_user.name} #{current_user.surname} (#{current_user.email})"
    @comment = @post.comments.build( poster: @poster )
  end 
```

我不完全确定我应该在评论控制器中做什么（如果我说实话，我也不相信上面的代码是正确的）。目前我有：

```
 def create
  @post = Post.find(params[:post_id])
  @comment = @post.comments.build(params[:post])
  if @comment.save
    redirect_to @post, notice: "Comment posted"
  else
    redirect_to @post, error: "Error!"
  end
end 
```

我的路线：

```
 resources :comments

  resources :posts do
    resources :comments
  end 
```

最后是表格：

```
<%= form_for @post.comments.build do |f| %>
        <%= f.label :content, "WRITE COMMENT" %>
        <%= f.text_area :content, rows: 3 %>
        <%= f.hidden_field :post_id, value: @post.id %>
        <%= f.submit "Post" %>
    <% end %> 
```

这里的问题是我无法将我的 post_id 从 posts 控制器的 show 操作传递到 comments 控制器的 create 操作。任何帮助深表感谢。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T18:22:53.780

你的帖子控制器看起来不错......但假设你的路线看起来像

```
resources :posts do
  resources :comments
end 
```

那么你的 CommentsController#create 应该/可能看起来像：

```
def create
  @post = Post.find(params[:post_id])
  @comment = @post.comments.build(params[:comment])
  if @comment.save
    redirect_to @post, notice: "Comment posted"
  else
    redirect_to @post, error: "Error!"
  end
end 
```

你的表格：

```
<%= form_for [@post, @comment] do |f| %>
    <%= f.hidden_field :poster, value: @poster %>
    <%= f.label :content, "WRITE COMMENT" %>
    <%= f.text_area :content, rows: 3 %>
    <%= f.submit "Post" %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:20:03.740

您的节目帖子的 URL 应该是`post/show/(:id)`.
现在，在评论表单中，您可以放置​​一个隐藏字段，其值为`params[:id]`。

```
hidden_field(:post_id, :value => params[:id]) 
```

当您提交表单时，您可以使用隐藏字段获取 post_id 的值。

```
def create
        @comment = Comment.new(params[:comment])
        @comment.post_id = params[:post_id]

        if @comment.save
          flash[:notice] = 'Comment posted.'
          redirect_to post_path(@comment.post_id)
        else
          flash[:notice] = "Error!"
          redirect_to post_path(@comment.post_id)
        end
    end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:24:12.693

我会假设你的帖子模型 has_many comments 和 comment belongs_to post

比你在你的路线文件中你可以做这样的事情

```
resources :posts do
  resources :comments
end 
```

这将为您提供一个 url 方案，例如

/posts/:post_id/comments ，允许您始终拥有评论parrent的post_id

# google-maps - 如何在所有缩放级别中创建具有相同半径的谷歌地图 v3 圆？

> ID：11617998
> 
> 赞同：22
> 
> 时间：2012-07-23T18:08:00.683
> 
> 标签：google-maps, google-maps-api-3, google-maps-api-2

我正在研究从 v2 到 v3 的地图代码迁移。

在 v2 中，我在 GProjection 和 Overlay 的帮助下创建了圆圈，它在所有缩放级别中看起来都相同。

在 v3 中，谷歌提供了 Circle 类，它将在地图中创建圆圈，但它会在不同的缩放级别上发生变化。

我想创建在所有缩放级别都具有相同大小的圆圈。

我想知道谷歌地图v3中的任何其他方式，我可以为所有缩放级别创建具有相同大小的圆圈。

提前致谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-24T17:10:39.923

要在屏幕上创建具有相同像素大小的圆圈（相对于地理坐标中相同的区域大小），您通常会使用带有自定义图标的圆形标记。但现在您可以更加灵活并使用 v3 中相对较新的符号。

```
var marker = new google.maps.Marker({
  position: new google.maps.LatLng(-122.5,47.5),
  icon: {
    path: google.maps.SymbolPath.CIRCLE,
    fillOpacity: 0.5,
    fillColor: '#ff0000',
    strokeOpacity: 1.0,
    strokeColor: '#fff000',
    strokeWeight: 3.0, 
    scale: 20 //pixels
  }
}); 
```

另外：您也可以用这些符号制作很酷的动画：http: [//googlegeodevelopers.blogspot.com/2012/06/powerful-data-visualization-with.html](http://googlegeodevelopers.blogspot.com/2012/06/powerful-data-visualization-with.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-04T10:12:20.227

我使用此代码来管理我的 Google Map V3 上的缩放和缩放圆圈：

```
google.maps.event.addListener(iMap.map, 'zoom_changed', function () {
    for (var i = 0; i < iMap.circle.length; i++) {
        var p = Math.pow(2, (21 - iMap.map.getZoom()));
        iMap.circle[i].setRadius(p * 1128.497220 * 0.0027);
    }

    menu.hide();
}); 
```