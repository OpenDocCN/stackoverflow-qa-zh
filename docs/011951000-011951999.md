# StackOverflow 问答 11951000-11951999

# flot - Flot饼图改变图例位置

> ID：11951012
> 
> 赞同：8
> 
> 时间：2012-08-14T11:08:20.863
> 
> 标签：flot, legend

我们可以将图例的位置从默认左侧更改为右侧或底部吗？

我们如何在鼠标指针上实现悬停，即内容应该显示在鼠标指针上而不是其他 DIV 中

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T16:09:01.517

legend 选项采用“位置”属性来指定它的位置：

```
 legend: {
    position: "ne" or "nw" or "se" or "sw"
  } 
```

“在鼠标指针上”是什么意思。你想让“内容”跟随指针吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-27T23:15:05.347

这是您正在使用的库的文档：

[https://github.com/flot/flot/blob/master/API.md#customizing-the-legend](https://github.com/flot/flot/blob/master/API.md#customizing-the-legend)

```
legend: {
    show: boolean
    labelFormatter: null or (fn: string, series object -> string)
    labelBoxBorderColor: color
    noColumns: number
    position: "ne" or "nw" or "se" or "sw"
    margin: number of pixels or [x margin, y margin]
    backgroundColor: null or color
    backgroundOpacity: number between 0 and 1
    container: null or jQuery object/DOM element/jQuery expression
    sorted: null/false, true, "ascending", "descending", "reverse", or a comparator
} 
```

# c# - 在 NHibernate 中实现对象的内存中实例

> ID：11951015
> 
> 赞同：1
> 
> 时间：2012-08-14T11:08:42.953
> 
> 标签：c#, nhibernate, nhibernate-mapping

无论如何要在 NHibernate 中实现内存中或固定/硬编码的对象实例，这些实例在所有意图和目的看来都是从数据库中读取的对象的真实实例？

我有一个历史数据库，其中有许多针对许多不同表的缺失外键值，因为它们在旧 DAL 中是固定/硬编码的。

这导致我的 NHibernate 映射出现问题。

这方面的一个例子是一个固定的不可变用户，比如存在于代码中但不存在于数据库中的“ADMIN”。这个 'ADMIN' 用户仍然在各种外键中使用，因此需要存在于 NHibernate 中，以便它可以管理 FK 映射。

我已经通过使用明确添加了硬编码行的 sql 视图来管理作弊加载，但是我当然不能写入这样的视图，因此需要一个替代解决方案。

我确实找到了对 uNhAddIns WellKnowInstanceType 的引用，它似乎做了类似的事情，但我无法开始工作。

有人有任何替代建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:40:11.250

我能想到的一个技巧是在查询之前将想象的 User 实例附加到会话中，使用`sess.Lock(admin, LockMode.None);`它应该注意引用。但我不确定在急切加载参考时会发生什么。

# c++ - C++ Sqlite3，执行 2 条 sql 语句 - 第 2 条语句得到 Segmentation Core Dump Error

> ID：11951018
> 
> 赞同：0
> 
> 时间：2012-08-14T11:09:04.197
> 
> 标签：c++, sqlite

我尝试执行以下操作。

添加记录后，我将从同一个表中选择以获取用户标识，即自动增量和主键。但是当我尝试执行以下操作时，我得到了分段核心转储

插入代码有效，但是当我尝试执行 select 语句时，这就是我的代码导致错误的地方。我正在尝试从数据库中获取用户 ID 字段并将其分配给字符串或向量结果 [0]；

我的 test2.cpp 代码：

```
#include <iostream>
#include <sqlite3.h>
#include <vector>

//g++ -o test2 test2.cpp -lsqlite3
using namespace std;

string quotesql( const string& s ) {
    return string("'") + s + string("'");
}

int main()
{
int counter = 0;

    sqlite3 *db;
    sqlite3_stmt * stmt, * stmt2;

string name = "Kungfu Panda2";
string department = "normal";
string password = "hellopassword";

string sqlstatement = "INSERT INTO abe_account (name,department,password) VALUES ("
+quotesql(name) + ","
+quotesql(department) + ","
+quotesql(password) + ");";

    if (sqlite3_open("abeserver.db", &db) == SQLITE_OK)
    {
    sqlite3_prepare( db, sqlstatement.c_str(), -1, &stmt, NULL );//preparing the statement
    sqlite3_step( stmt );//executing the statement
        }
    else
    {
        cout << "Failed to open db\n";
    }

    sqlite3_finalize(stmt);

//after insert ,we select back to get the user id;

sqlstatement = "select * from abe_account where name="
+quotesql(name) + " AND department=" 
+quotesql(department)+";";

    sqlite3_prepare( db, sqlstatement.c_str(), -1, &stmt2, NULL );//preparing the statement
    sqlite3_step( stmt2 );//executing the statement

std::vector< std::vector < std:: string > > result;

while( sqlite3_column_text( stmt2, 0 ) )
{
    for( int i = 0; i < 4; i++ )
    result[i].push_back( std::string( (char *)sqlite3_column_text( stmt2, i ) ) );
    sqlite3_step( stmt2 );
}

   //cout << result.size() << endl;

    sqlite3_finalize(stmt2);
    sqlite3_close(db);

    return 0;

} 
```

如果添加成功，如何检索我的数据。我需要检索以检查我的语句是否正确执行，并获取自动递增并创建为主键的用户 ID，因为我需要 cout 到客户端，他的用户 ID 是 +userid+

如果我对 select 语句的向量使用错误，如何在我的 insert 语句执行后获取用户 ID，我的 insert 语句在我检查我的数据库时工作，记录已添加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:46:57.287

除了未初始化的嵌套`vector`s 的问题（请参阅 Joachim Pileborg 的回答），您不应该检查`sqlite3_column_text`循环条件中的结果。[SQLite 文档](http://www.sqlite.org/c3ref/column_blob.html)指出：

> 如果 SQL 语句当前未指向有效行，或者列索引​​超出范围，则结果未定义。

我更愿意检查`sqlite3_step`while 条件下的结果，如下所示：

```
std::vector< std::vector < std:: string > > result;

while(sqlite3_step(stmt2) == SQLITE_ROW)
{
    result.push_back(vector<std::string>());

    for( int i = 0; i < 4; i++ )
    {
         result[i].push_back( std::string( (char *)sqlite3_column_text( stmt2, i ) ) );
    }
} 
```

如果您采用这种方法，则必须删除`sqlite3_step`循环上方的几行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:16:00.457

问题是这个电话：

```
result[i].push_back(...); 
```

`result`是向量的向量，但它是空的。所以尝试使用`result[i]`会导致失败。

**编辑：**

将内部循环更改为如下所示：

```
for( int i = 0; i < 4; i++ )
{
    result.push_back(vector<std::string>());
    result[i].push_back(...);
} 
```

也许你的意思是这样的：

```
for (int i = 0; sqlite3_column_text(stmt2, 0); i++ )
{
    result.push_back(vector<std::string>());

    for (int j = 0; j < 4; j++)
        result[i].push_back(...);

    sqlite_step(stmt2);
} 
```

# web-services - 保护我的网站托管服务器

> ID：11951025
> 
> 赞同：0
> 
> 时间：2012-08-14T11:09:32.647
> 
> 标签：web-services, .htaccess

我将我的网站托管在使用 php5（没有 mySQL）的 linux 服务器上。现在我是管理员，我正在建立我的第一个网站。我想了解安全性，如何保护我的网站免受恶意注入和黑客攻击？使用 htaccess 文件？我需要在那里放什么？

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:18:10.033

如果您没有 SQL，则不必担心注入攻击。

您网站的安全性取决于您在网站上运行的内容。如果它只是 PHP，我建议保留重要的代码，这些代码可能会泄露密码和身份验证密钥或函数等内容，并将其包含在 wwwroot 之外的单独 php 文件中。

例子：

您的网站在 /home/wwwroot/ 中运行

将包含重要数据或函数的 php 文件放在 /home/privatephp/ 中

现在，在您想要使用这些私有函数或调用您想要隐藏的数据的所有 php 文件中，您只需 `include (../privatephp/privatestuff.php);`在每个 php 文件的顶部使用即可。

您的 privatestuff.php 文件可以包含以下内容

`$adminusername="imtheadmin";`或者`$adminpassword="adminpassword";`

然后，您可以在使用了 include 命令的任何 PHP 文件中简单地引用这些变量。

# ipc - MSMQ 与其他 IPC 方法的区别

> ID：11951026
> 
> 赞同：1
> 
> 时间：2012-08-14T11:09:32.857
> 
> 标签：ipc, msmq

我正在阅读有关 msmq 的教程以了解它的用途。

我知道这是一种进程间通信方法。但是微软并没有在这个主题下添加 msmq：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx)

那么这有什么特殊的原因吗？MSMQ 与其他 IPC 方法有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:28:38.640

MSMQ 对于同一机器上的进程间通信来说有点重量级。它通常用于盒子之间的可靠通信，或者在需要离线排队时在同一个盒子上。

对于同一盒子上的 IPC，请使用 WCF NetNamedPipeBinding。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:58:27.180

MSMQ 是一个消息传递平台，用于连接需要部分或全部安全传输、有序消息传递、事务消息传递、离线支持的系统。

MSMQ 也可以用于 IPC，但性能远不及 IPC。

MSQM 通过使用队列来隔离应用程序，该队列可以是本地队列，也可以是另一台计算机上的队列，而 IPC 或多或少是应用程序之间的直接通信。

MSMQ 通常与 BizTalk 结合使用，您可以在其中实现系统之间完全异步且可靠的消息路由。

所以 MSMQ 更适合企业级通信。

# r - 将 outer() 与多变量函数一起使用

> ID：11951034
> 
> 赞同：16
> 
> 时间：2012-08-14T11:10:10.337
> 
> 标签：r

假设你有一个函数`f<- function(x,y,z) { ... }`。您将如何将常量传递给一个参数，但让其他参数发生变化？换句话说，我想做这样的事情：

```
 output <- outer(x,y,f(x,y,z=2)) 
```

此代码不评估，但有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T11:22:03.950

```
outer(x, y, f, z=2) 
```

函数后面的参数是它的附加参数，`...`参见`?outer`. 这种语法在 R 中很常见，例如整个`apply`家族的工作方式都是一样的。

**更新：**

我无法准确说明您想在后续问题中完成什么，但认为此表单上的解决方案可能是您应该使用的。

```
outer(sigma_int, theta_int, function(s,t)
    dmvnorm(y, rep(0, n), y_mat(n, lambda, t, s))) 
```

`sigma_int`这将为和中的值的每个组合计算方差矩阵`theta_int`，使用该矩阵定义密度并在 中定义的点中对其进行评估`y`。我无法测试它，因为我不知道所涉及变量的类型和维度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T16:47:51.547

`outer`（连同 apply 系列函数和其他函数）会将额外的参数传递给它们调用的函数。但是，如果您正在处理不支持这种情况的情况（`optim`作为一个示例），那么您可以使用更通用的柯里化方法。对函数进行柯里化是创建一个新函数，该函数具有（某些）变量固定，因此具有更少的参数。

```
library("functional")
output <- outer(x,y,Curry(f,z=2)) 
```

# c# - 如何为 WP7 优化 HTTP 客户端

> ID：11951036
> 
> 赞同：1
> 
> 时间：2012-08-14T11:10:26.690
> 
> 标签：c#, windows-phone-7, optimization, httpwebrequest

为了与 REST 服务通信，我创建了自己的实现（非常简单）。GET 请求的代码可以在下面找到。但是，我想知道我的代码中是否存在一些明显的缺陷，导致请求的性能比它们可能的更差。他们目前工作得体，但我觉得我本可以做得更好。

任何反馈将不胜感激！

```
public static void Get<T>(string url, Action<Result<T>> callback, NetworkCredential credentials = null, JsonConverter converter = null)
{
    // Checks for no internet
    if (!NetworkInterface.GetIsNetworkAvailable())
    {
        callback(new Result<T>(new NoInternetException()));
        return;
    }

    // Sets up the web request for the given URL (REST-call)
    var webRequest = WebRequest.Create(url) as HttpWebRequest;

    // Makes sure we'll accept gzip encoded responses
    webRequest.Headers[HttpRequestHeader.AcceptEncoding] = "gzip";

    // If any credentials were sent, attach them to request
    webRequest.Credentials = credentials;

    // Queues things up in a thread pool
    ThreadPool.QueueUserWorkItem((object ignore) =>
    {
        // Starts receiving the response
        webRequest.BeginGetCompressedResponse(responseResult =>
        {
            try
            {
                // Fetches the response
                var response = (HttpWebResponse)webRequest.EndGetResponse(responseResult);

                // If there _is_ a response, convert the JSON
                if (response != null)
                {
                    // Gives us a standard variable to put stuff into
                    var result = default(T);

                    // Creates the settings-object to insert all custom converters into
                    var settings = new JsonSerializerSettings();

                    // Inserts the relevant converters
                    if (converter != null)
                    {
                        if (converter is JsonMovieConverter)
                        {
                            settings.Converters.Add(new JsonMovieListConverter());
                        }
                        settings.Converters.Add(converter);
                    }

                    // Depending on whether or not something is encoded as GZIP - deserialize from JSON in the correct way
                    if (response.Headers[HttpRequestHeader.ContentEncoding] == "gzip")
                    {
                        var gzipStream = response.GetCompressedResponseStream();

                        result = JsonConvert.DeserializeObject<T>(new StreamReader(gzipStream).ReadToEnd(), settings);
                    }
                    else
                    {
                        result = JsonConvert.DeserializeObject<T>(new StreamReader(response.GetResponseStream()).ReadToEnd(), settings);
                    }

                    // Close the response
                    response.Close();

                    // Launch callback
                    callback(new Result<T>(result));
                }
            }
            catch (Exception ex) // Deals with errors
            {
                if (ex is WebException && ((WebException)ex).Response != null && ((HttpWebResponse)((WebException)ex).Response).StatusCode == HttpStatusCode.Unauthorized)
                {
                    callback(new Result<T>(new UnauthorizedException()));
                }
                else
                {
                    callback(new Result<T>(ex));
                }
            }
        }, webRequest);
    });
} 
```

一般来说，这段代码应该很容易解释，但这里还有一些事实：

*   我正在使用[延迟优化的 gzip-decoder](http://blogs.msdn.com/b/delay/archive/2012/04/19/quot-if-i-have-seen-further-it-is-by-standing-on-the-shoulders-of-giants-quot-an-alternate-implementation-of-http-gzip-decompression-for-windows-phone.aspx)，它为我提供了方法`GetCompressedResponse()`（与原始方法基本相同）。
*   我创建了一些 JSON.net 自定义 JsonConverter 类，以便正确反序列化我的 JSON。这些都相当简单，不会影响性能。
*   结果类只是我的结果的包装类（包含值和错误字段）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:37:21.397

我不知道 JSON.net，但是否有一种形式可以采用流或流读取器，而不是强制您先将整个字符串读入内存？如果流可能很大，那将是相当浪费的，尽管如果它们都很小，那将没有什么区别。

有过一个`HttpWebrequest.AutomaticDecompression`属性可以简化您的代码（公平地说，我自己总是忘记这一点）。

您可以使用该`CachePolicy`属性让请求使用 IE 缓存，如果您将访问相同的 URI 并且服务器会适当地处理它（适当的 max-age，正确处理条件 GET），这可以节省大量资金。它还允许一些灵活性 - 例如，如果您的使用对新鲜度有很高的要求，您可以使用`Revalidate`级别，因此您将始终联系服务器，即使 max-age 建议不应该联系服务器，但您仍然可以采取行动适当地在 304 上（呈现给您的代码就好像它是 200，所以您不需要重写所有内容）。

您甚至可以在此之上构建一个对象缓存，您可以在其中使用该`IsFromCache`方法来了解使用缓存对象是否安全，或者您是否需要重建它，因为它所构建的数据已更改。（实际上这真的很甜蜜，有句名言是关于缓存失效是一个难题，这让我们可以将这个难题的责任转嫁给 HTTP 层，同时让实际的缓存项目存在于 .NET 层中，而不是需要再次反序列化-这是一项工作，因此如果由于数据的性质而不会频繁地缓存命中，请不要这样做，但是在它起作用的地方，它会摇摆不定）。

# python - BadRequestError：projection 和 keys_only 不能同时设置

> ID：11951037
> 
> 赞同：1
> 
> 时间：2012-08-14T11:10:32.450
> 
> 标签：python, google-app-engine

嗨，我在这条线上遇到了错误。它在当地工作。我刚刚删除了 apppot 的所有实体。

```
#query line
sent_list = db.GqlQuery("SELECT email FROM MailListNew WHERE active = True")
#error line
sent_count = sent_list.count()

projection and keys_only cannot both be set
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~merdiven-mailservice/1.361030076545076265/index.py", line 89, in post
    sent_count = sent_list.count()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2120, in count
    result = raw_query.Count(limit=limit, **kwargs)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/datastore.py", line 1670, in Count
    batch = self.GetBatcher(config=config).next()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2671, in next
    return self.next_batch(self.AT_LEAST_ONE)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2708, in next_batch
    batch = self.__next_batch.get_result()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_query.py", line 2450, in __query_result_hook
    self._batch_shared.conn.check_rpc_success(rpc)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1216, in check_rpc_success
    raise _ToDatastoreError(err)
BadRequestError: projection and keys_only cannot both be set 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:15:56.897

您需要将查询更改为：

```
sent_list = db.GqlQuery("SELECT * FROM MailListNew WHERE active = True") 
```

或更好）：

```
sent_list = db.GqlQuery("SELECT __key__ FROM MailListNew WHERE active = True") 
```

# java - weblogic 10.3.6，首次登录时出现 InvalidSession 异常

> ID：11951039
> 
> 赞同：1
> 
> 时间：2012-08-14T11:10:39.117
> 
> 标签：java, jsf-2, weblogic

我在登录到部署在 weblogic 10.3.6 上的 JSF2 应用程序时收到 InvalidSession 异常，该异常是随机抛出的

我在网上搜索了很多关于这个问题但我没有找到任何东西，所以我想知道为什么会抛出这个异常以及我该如何处理它或编写一个解决方法来处理异常

堆栈跟踪

```
<Aug 14, 2012 2:07:36 PM GMT+02:00> <Error> <HTTP> <BEA-101020> <[ServletContext@32196770[app:SAMEAR module:SAMWeb path:/SAMWeb spec-version:2.5]] Servlet failed with Exception
java.net.SocketException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
    at weblogic.utils.io.ChunkedOutputStream.writeTo(ChunkedOutputStream.java:284)
    at weblogic.servlet.internal.ServletOutputStreamImpl.writeHeader(ServletOutputStreamImpl.java:167)
    Truncated. see log file for complete stacktrace
> 
<Aug 14, 2012 2:07:36 PM GMT+02:00> <Notice> <Diagnostics> <BEA-320068> <Watch 'UncheckedException' with severity 'Notice' on server 'AdminServer' has triggered at Aug 14, 2012 2:07:36 PM GMT+02:00\. Notification details: 
WatchRuleType: Log 
WatchRule: (SEVERITY = 'Error') AND ((MSGID = 'WL-101020') OR (MSGID = 'WL-101017') OR (MSGID = 'WL-000802') OR (MSGID = 'BEA-101020') OR (MSGID = 'BEA-101017') OR (MSGID = 'BEA-000802')) 
WatchData: DATE = Aug 14, 2012 2:07:36 PM GMT+02:00 SERVER = AdminServer MESSAGE = [ServletContext@32196770[app:SAMEAR module:SAMWeb path:/SAMWeb spec-version:2.5]] Servlet failed with Exception
java.net.SocketException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
    at weblogic.utils.io.ChunkedOutputStream.writeTo(ChunkedOutputStream.java:284)
    at weblogic.servlet.internal.ServletOutputStreamImpl.writeHeader(ServletOutputStreamImpl.java:167)
    at weblogic.servlet.internal.ResponseHeaders.writeHeaders(ResponseHeaders.java:444)
    at weblogic.servlet.internal.ServletResponseImpl.writeHeaders(ServletResponseImpl.java:1288)
    at weblogic.servlet.internal.ServletOutputStreamImpl.sendHeaders(ServletOutputStreamImpl.java:281)
    at weblogic.servlet.internal.ServletOutputStreamImpl.flush(ServletOutputStreamImpl.java:118)
    at weblogic.servlet.internal.ServletResponseImpl.sendRedirect(ServletResponseImpl.java:893)
    at weblogic.servlet.security.internal.FormSecurityModule.processJSecurityCheck(FormSecurityModule.java:334)
    at weblogic.servlet.security.internal.FormSecurityModule.checkUserPerm(FormSecurityModule.java:213)
    at weblogic.servlet.security.internal.FormSecurityModule.checkAccess(FormSecurityModule.java:96)
    at weblogic.servlet.security.internal.ServletSecurityManager.checkAccess(ServletSecurityManager.java:82)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2209)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2179)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1490)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221)
 SUBSYSTEM = HTTP USERID = <WLS Kernel> SEVERITY = Error THREAD = [ACTIVE] ExecuteThread: '6' for queue: 'weblogic.kernel.Default (self-tuning)' MSGID = BEA-101020 MACHINE = 00IT8T83D TXID =  CONTEXTID = 43d101969fafeaf3:78b99118:13924e1c932:-8000-0000000000000991 TIMESTAMP = 1344946056374  
WatchAlarmType: AutomaticReset 
WatchAlarmResetPeriod: 30000 
> 
<Aug 14, 2012 2:07:36 PM GMT+02:00> <Warning> <javax.enterprise.resource.webcontainer.jsf.context> <BEA-000000> <JSF1091: No mime type could be found for file error_128_128.png.  To resolve this, add a mime-type mapping to the applications web.xml.> 
<Aug 14, 2012 2:07:36 PM GMT+02:00> <Warning> <javax.enterprise.resource.webcontainer.jsf.context> <BEA-000000> <JSF1091: No mime type could be found for file error_128_128.png.  To resolve this, add a mime-type mapping to the applications web.xml.> 
<Aug 14, 2012 2:07:36 PM GMT+02:00> <Error> <HTTP> <BEA-101020> <[ServletContext@32196770[app:SAMEAR module:SAMWeb path:/SAMWeb spec-version:2.5]] Servlet failed with Exception
java.lang.IllegalStateException: HttpSession is invalid
    at weblogic.servlet.internal.session.SessionData.getInternalAttribute(SessionData.java:759)
    at weblogic.servlet.internal.session.SessionData.getInternalAttribute(SessionData.java:754)
    at weblogic.servlet.security.internal.FormSecurityModule.processJSecurityCheck(FormSecurityModule.java:287)
    at weblogic.servlet.security.internal.FormSecurityModule.checkUserPerm(FormSecurityModule.java:213)
    at weblogic.servlet.security.internal.FormSecurityModule.checkAccess(FormSecurityModule.java:96)
    Truncated. see log file for complete stacktrace 
```

# javascript - 为什么 CoffeScript 不“重用”循环变量？

> ID：11951041
> 
> 赞同：3
> 
> 时间：2012-08-14T11:10:43.703
> 
> 标签：javascript, loops, coffeescript

我是 CoffeeScript 的新手，对此非常兴奋。[我在这里](http://coffeescript.org/#try%3aconsole.log%20food%20for%20food%20in%20fruits%0A%0Aconsole.log%20food%20for%20food%20in%20vegetables)做了一些基本的循环。现在，CoffeeScript 正在为***每个***循环定义一个循环变量，如下所示：

```
var food, _i, _j, _len, _len1;

for (_i = 0, _len = fruits.length; _i < _len; _i++) {
  food = fruits[_i];
  console.log(food);
}

for (_j = 0, _len1 = vegetables.length; _j < _len1; _j++) {
  food = vegetables[_j];
  console.log(food);
} 
```

我曾经这样编写循环代码：

```
for(var i = 0; i < fruits.length; i++) {
    console.log(fruits[i]);
}

for(var i = 0; i < vegetables.length; i++) {
    console.log(vegetables[i]);
} 
```

`i`是**每个**循环的循环变量（不包括嵌套循环）。现在我了解到您应该始终在定义变量之前声明它。所以我改变了我的编码习惯：

```
var i;
for(i = 0; i < fruits.length; i++) {
    console.log(fruits[i]);
}

for(i = 0; i < vegetables.length; i++) {
    console.log(vegetables[i]);
} 
```

只要我在同一个范围内，我就没有发现任何问题，但是编译后的 CoffeeScript 代码让我感到疑惑。

为什么 CoffeeScript 会为**每个**循环使用不同的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:27:25.557

在没有查看 CoffeeScript 源代码的情况下，这是我的（受过教育的）猜测：

CoffeeScript 解释器只是为您编写`for`的每个代码创建一个新的循环结构。`for .. in`在构建输出 JS 时，它维护一个局部变量名称表，并根据需要附加到该表中。

毕竟，您可以嵌套这些`for .. in`循环，在这种情况下，无论如何您都需要在 JS 中使用单独的循环变量。

有必要跟踪局部函数范围内的哪些变量可能被重用。这是可能的，但比它的价值更复杂——它根本没有提供任何好处，所以 CoffeeScript 没有这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:52:42.187

The other side of this is, CS can't count on you only using the variable inside of the loop. While it could be dangerous to rely on your iteration variable for use outside the loop, it's possible you will want to. CS reusing it wouldn't give you that chance, if it always used the same variable.

# c# - 如何实现自定义同步提供程序？

> ID：11951043
> 
> 赞同：1
> 
> 时间：2012-08-14T11:10:51.277
> 
> 标签：c#, outlook, microsoft-sync-framework

是的，我读过[这篇](http://msdn.microsoft.com/en-us/library/dd937818)文章，但很不清楚，尤其是当你想为 Outlook 编写一个提供程序时，也许你知道一个关于如何做到这一点的普通教程，或类似的？

我猜，盯着 MSDN 代码 4 到 5 个小时后，我可以得到启蒙......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:53:59.510

我刚刚在 MSDN 上找到了一篇关于整个主题的旧文章。这不是很有帮助，也没有提供完整的样本。但作者实际上[写了一本](http://www.apress.com/us/book/9781430210054)关于该主题的书。他们甚至提供了[可作为公共下载](https://github.com/apress/pro-sync-framework)的冗长示例。您可以在“\Pro Sync Framework\Chapter III\Code\CustomProvider\CustomProvider.sln”的存档中找到自定义同步提供程序的实现。

# ember.js - Ember.js 路由器事件作为功能不起作用

> ID：11951047
> 
> 赞同：0
> 
> 时间：2012-08-14T11:11:02.987
> 
> 标签：ember.js, ember-old-router

[我使用http://emberjs.com/guides/outlets/#toc_the-router](http://emberjs.com/guides/outlets/#toc_the-router)中的示例在我的应用程序中设置了一些基本路由

在根目录中，我有一些从视图操作触发的事件，例如：

```
gotoStepOne: Ember.Route.transitionTo('stepOne'),
gotoStepTwo: Ember.Route.transitionTo('stepTwo'),
gotoStepThree: Ember.Route.transitionTo('stepThree'),
gotoStepFour: Ember.Route.transitionTo('stepFour'),
gotoStepFive: Ember.Route.transitionTo('stepFive'), 
```

完整示例路由器代码位于[http://jsfiddle.net/hellosmithy/WdjXT/](http://jsfiddle.net/hellosmithy/WdjXT/)

目前这一切都很好。问题是我想在这些事件中添加其他代码。例如：

```
gotoStepOne: function() {
    if (someCondition) {
        Ember.Route.transitionTo('stepOne');
    }
    someOtherFunction();
} 
```

但是，这样做会破坏路由而不会引发任何错误。它只是不再过渡。

具体来说，我只希望在满足某个状态时发生转换——用户在每个阶段都选择或输入了某些内容，然后才能继续。是否有解决方法，或者我应该在其他地方抽象这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:50:54.573

我理解路由器的方式是，它是应用程序状态的表示。

> 具体来说，我只希望在满足某个状态时发生转换——用户在每个阶段都选择或输入了某些内容，然后才能继续。

因此，用户输入或选择某些内容会使您的应用程序处于某种状态，该状态由路由器反映。

恕我直言，在视图（或控制器）中应该是这样的：

```
userDidSomething: function(condition) {
  if (condition) {
    App.get('router').send('stepOne');
  }else{
    someOtherFunction();
  }
} 
```

# http - 是否有高于 1024 的 https (443) 的替代默认端口号？

> ID：11951055
> 
> 赞同：16
> 
> 时间：2012-08-14T11:11:14.770
> 
> 标签：http, https

我们想在firefox地址栏中隐藏端口号，因为我们没有root用户，所以不能更改为端口443。那可能吗？

对于 Firefox 浏览器，是否存在高于 1024 的“替代默认 https 端口”，并且当 url 以 https 开头时，firefox 会尝试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:50:41.713

正如评论所提到的，不，你不能。但是，您可以使用任何您想要的端口，只要客户明确提及它。任何 1024 或更高的端口都是非标准端口，可以使用。

# java - 我怎样才能将多个表合并为一个新表

> ID：11951056
> 
> 赞同：0
> 
> 时间：2012-08-14T11:11:16.537
> 
> 标签：java, sql, join

我有多个表，比如说 20 个。它们的方案与

```
CREATE TABLE index[1-20]
(
[id] [bigint] NOT NULL,
[word] [varchar](100) NOT NULL,
[positions] [nvarchar](max) NOT NULL,
primary key(id,word)
) 
```

我现在要做的是将这些表连接到一个表中。假设表格可以包含相同的单词。在这种情况下，我们只是将位置组合在一起。否则只需将不同的单词保留到新表中。

我认为我们可以使用完全连接。但是在java中有什么好主意吗？逻辑怎么写？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:13:31.120

我宁愿在 SQL 中进行连接，否则您将通过网络将所有数据拉入您的 JVM。让数据库做它擅长的事情。执行连接的方式很大程度上取决于您的数据库。

但是，我也会质疑导致将 20 个表连接在一起的数据库建模。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:14:02.723

`JOIN`不是你需要的，但是[`UNION`](https://en.wikipedia.org/wiki/Set_operations_%28SQL%29#UNION_operator)。

但是*为什么*你首先要有这些表呢？

# multithreading - 锁定是如何实现的？

> ID：11951063
> 
> 赞同：1
> 
> 时间：2012-08-14T11:12:06.037
> 
> 标签：multithreading, locks

我有以下代码：

```
 while(lock)
      ;   
 lock = 1;
 // critical section
 lock = 0; 
```

因为读取或更改锁定值本身就是一条多指令

```
read lock
change value
write it 
```

如果它发生如下：

```
1) One thread reads the lock and stops there
2) Another thread reads it and sees it is free; lock it and do something untill half
3) First thread wakes up and goes into CS 
```

那么如何在系统中实现锁定？将变量放在另一个变量之上是不对的：这就像守卫？

停止其他处理器线程也不对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:23:15.287

它是 100% 特定于平台的。通常，CPU 提供某种形式的原子操作，例如交换或比较和交换。一个典型的锁可能是这样工作的：

1）创建：在变量中存储0（解锁）。

2）锁定：原子地尝试将变量的值从0（解锁）切换到1（锁定）。如果我们失败了（因为它一开始没有解锁），让 CPU 休息一下，然后重试。使用内存屏障来确保未来的内存操作不会隐藏在此之后。

3) 解锁：使用内存屏障来确保之前的内存操作不会偷偷溜过去。以原子方式将 0（解锁）写入变量。

请注意，除非您想设计自己的同步原语，否则您实际上不需要了解这一点。如果你想这样做，你需要了解更多。对于每个程序员来说，对他正在制作的硬件做什么有一个大致的了解当然是一个好主意。但这是一个充满严重魔法的领域。有很多很多方法可能会出错。因此，只需使用创建平台、编译器和线程库的天才提供的锁定原语。这里是龙。

例如，SMP Pentium Pro 系统有一个错误，需要在解锁操作中进行特殊处理。锁定算法的幼稚实现将导致分支预测逻辑期望操作继续旋转，从而在最坏的可能时间（当您第一次获取锁定时）导致巨大的性能损失。锁定算法的简单实现可能会导致两个内核各自等待同一个锁定使总线饱和，从而减慢需要完成工作以释放锁定的 CPU。这些都需要大量的魔法和对要处理的硬件的深刻理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:37:54.537

在我在 Uni 学习的一门课程中，以与处理器启动的内存操作相关联的“原子性位”的形式提出了一种可能的用于实现锁的固件解决方案。

基本上，在锁定时，您会注意到您有一系列操作需要以原子方式执行：测试标志的值，如果未设置，则将其设置为`locked`，否则重试。通过将一个位与 CPU 发送的每个内存请求相关联，可以使该序列成为原子序列。第一个 N-1 操作将设置位，而最后一个将取消设置，以标记原子序列的结束。

当存储标志数据的内存模块（可以有多个模块）接收到序列中第一个操作的请求（其位被设置）时，它将为它服务并且不会接受来自任何其他CPU的请求，直到CPU启动原子序列发送带有未设置原子性位的请求（因为这些事务通常很短，因此可以接受这样的粗粒度方法）。请注意，汇编器提供的“比较和设置”类型的专门指令通常会使这变得更容易，这些指令与我之前提到的完全一样。

# c++ - 委派模板成员功能的良好设计

> ID：11951071
> 
> 赞同：3
> 
> 时间：2012-08-14T11:12:24.307
> 
> 标签：c++, templates, encapsulation

我在为以下场景找到简单而优雅的设计时遇到了麻烦。类`Worker`使用模板类`Helper`做一些工作。在简单的场景中，它看起来像这样：

```
template<typename T>
class Helper {
  public:
    void Help(T data) : m_data(data) {} //NOTICE: Copy
    T const& Data() const { return m_data; }

    T m_data;
}

class SimpleWorker {
  public:
    SimpleWorker() : m_helper(SimpleData()) {} // non-temp used in reality
    void DoWork()
    {
        m_helper.help();
    }        

    Helper<SimpleData> m_helper;
} 
```

当模板参数更复杂并且与工人的业务领域相同时，事情对我来说变得复杂。工作人员需要使用帮助程序，但它还需要在数据对象上调用一些帮助程序甚至不知道的方法（在此设计中）。就像是：

```
template<typename T>
class Helper {
  public:
    Helper(T data) : m_data(data) {} //NOTICE: Copy
    T const& Data() const { return m_data; }

    T m_data;
}

class ComplexWorker {
  public:
    ComplexWorker() : m_helper(ComplexData()) {} // non-temp used in reality

    void DoWork()
    {
        m_helper.help();
        m_helper.GetData().DoSomethingComplexNotConst(); // <-------------
    }    

    Helper<ComplexData> m_helper;    
} 
```

明显的问题是我不能在`Data()`结果上调用 not const 函数。制作`Data()`非常量似乎是一个坏主意，因为`Helper`它也用于不同的上下文中。我的目标是找到一种优雅的方式来`ComplexData`使用它的成员函数进行更改，`ComplexWorker` 首先`ComplexData`需要更改，以便`Helper`可以继续使用更改后的数据。

**编辑：**更改`Helper`构造以复制提供的数据以更好地类似于实际流程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:24:11.963

我认为最好`Helper`只使用静态函数，而不是维护状态（因为您在自己的代码中创建临时函数`ComplexData()`）`ComplexWorker`。根据是否需要修改，通过引用或 const-reference 传递数据。

```
// primary template
template<typename T>
class Helper {
public:
    static void help(T const& data) const {} // non-modifying
};

// specialization for ComplexData
template<>
class Helper<ComplexData> {
public:
    static void help(ComplexData const& data) const { } // non-modifying

    static void DoSomethingComplexNotConst(ComplexData& data) // modifying
    {
         // your implementation here
    }
};

class ComplexWorker {
public: 
    ComplexWorker() : m_data(ComplexData()) {} // create new data

    void DoWork()
    {
        Helper<ComplexData>::help(m_data);
        Helper<ComplexData>::DoSomethingComplexNotConst(m_data); // <--- now no problem
    }

   private:
       ComplexData m_data;         
}; 
```

请注意，**我**为`ComplexData`. 有一些代码重复，`help()`但您可以轻松地将其提取到一个常见的非成员帮助函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:24:23.103

在我看来，这取决于`Helper`实际在做什么。您的示例仅提供了一个构造函数和一个访问器，但我怀疑这就是它在实践中所做的一切。

您是否考虑过简单地使用继承？您的`Helper`模板将如下所示：

```
template<typename T>
class Helper : public T {
    Helper(T data) : T(data) {}
    void Help() {};
} 
```

在这种情况下，您可以`Helper<ComplexData>`直接在“is-a”关系中使用该对象：

```
class ComplexWorker {
    Helper<ComplexData> m_helper;

    void DoWork()
    {
        m_helper.help();
        m_helper.DoSomethingComplexNotConst();
    }        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:40:49.687

为什么不参考STL中Container部分的实现。Data() 函数的重载可以在安全和优雅之间取得平衡。

```
template <typename T>
class Helper {
public:
    Helper(T data) : m_data(data) {} //NOTICE: Copy
    T const& Data() const { return m_data; }
    T& Data() {return m_data; }
private:
    T m_data;
}

class ComplexWorker {
public:
    ComplexWorker() : m_helper(ComplexData()) {} // non-temp used in reality

    void DoWork()
    {
        m_helper.help();
        ComplexData &cd1 = m_helper.Data();
        cd1.QuerySth();
        const ComplexData &cd2 = m_helper.Data();
        cd2.ModifySth();
    }    
private:
    Helper<ComplexData> m_helper;    
} 
```

# jquery - 如何在不删除任何内部标签的情况下替换锚标签的文本？

> ID：11951078
> 
> 赞同：1
> 
> 时间：2012-08-14T11:12:48.870
> 
> 标签：jquery

如何在不删除任何内部标签的情况下替换锚标签的文本？

```
<div class="xyz">
  <a>Hello <b class="caret"></b></a>
</div>

$('.xyz').click(function(){
  $(this).find('a').text('hello2');  
}); 
```

JSFiddle：http: [//jsfiddle.net/DXR32/](http://jsfiddle.net/DXR32/)

当单击蓝色区域时，我正在更改锚标记中的文本，但即使锚中的 b 标记也会消失。有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:18:00.820

类似下面的东西会起作用，将按钮附加到任何文本更改的末尾：http: [//jsfiddle.net/DXR32/1/](http://jsfiddle.net/DXR32/1/)

```
var blueButton = '<b class="caret"></b>';

$('.xyz').click(function(){
   $(this).find('a').html('hello2 '+blueButton); 
}); 
```

编辑：

或者，正如@Nikola Radosavljević 和@François Wahl 在下面建议的那样，将您想要更改的文本封装在锚内自己的元素中，如下所示：

```
<div class="xyz">
    <a><span class="switchable">Hello</span> <b class="caret"></b></a>
</div>

$('.xyz').click(function(){
   $(this).find('.switchable').text('hello2');
}); 
```

这避免了必须对任何按钮 html 进行硬编码，并且还允许您在任意数量的锚元素上重用 click 功能，例如，它们所需要的只是它们自己的包含您要切换的文本的`span`类；`switchable`

```
<div class="xyz">
    <a><span class="switchable">Click Me 1</span> <b class="caret"></b></a>
</div>
<div class="xyz">
    <a><span class="switchable">Click Me 2</span> <b class="caret2"></b></a>
</div>
<div class="xyz">
    <a><span class="switchable">Click Me 3</span> <b class="caret3"></b></a>
</div>

$('.xyz').click(function(){
   $(this).find('.switchable').text('You Clicked Me!');
}); 
```

显然，您的应用程序可能与上一个示例完全不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:20:08.533

你有两个选择

*   [将要更改的内容附在标签中并更改](http://jsfiddle.net/3BCNp/1/)

> ```
> <div class="xyz">
>     <a><span id="hello">Hello </span><b class="caret"></b></a>
> </div>
> $('.xyz').click(function() {
>     $(this).find('#hello').text('hello2');
> }); 
> ```

*   [做字符串替换（这对于比 hello world 更复杂的东西都不好）](http://jsfiddle.net/m6Evb/1/)

> ```
> $('.xyz').click(function() {
>     var a = $(this).find("a");
>     a.html(a.html().replace("Hello ", "Hello2 "));    
> }); 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:23:54.063

您可以尝试在替换文本之前保存锚的**.children()**，如下所示：

```
$('.xyz').click(function() {
    var cache = $(this).find('a').children();
    $(this).find('a').text('Hello2');
    $(this).find('a').append(cache);
});​ 
```

然后**.append()**将它们返回。我已经用这个更新[了你的 jsFiddle](http://jsfiddle.net/DXR32/8/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:19:15.733

试试这个：

```
$('.xyz').click(function(){
   var b = '<b class="caret"></b>'; 
   $(this).find('a').html('hello2' + b);    
}); 
```

[http://jsfiddle.net/DXR32/3/](http://jsfiddle.net/DXR32/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T11:20:47.463

```
$('.xyz').click(function(){
    $(this).find('a').html(function(i, oldHtml) {
      return oldHtml.replace('Hello', 'hello2');
    });
});    
​ 
```

**[演示](http://jsfiddle.net/DXR32/7/)**

# sql - 动态生成表名

> ID：11951079
> 
> 赞同：0
> 
> 时间：2012-08-14T11:12:51.570
> 
> 标签：sql, oracle

我想编写一个查询，其中表名是根据某些参数动态生成的。我无法找到一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:35:03.663

查看文档中详述的动态 SQL。

[http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg09dyn.htm#26799](http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg09dyn.htm#26799)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:21:28.157

我不确定您有什么确切要求（而且我知道加入 sys 表可能不是一个好主意），但您可以使用下面的查询来获取所有表的列表 -

```
select owner, table_name 
  from all_tables; 
```

请注意，查询`all_tables`表`column_name`也包含 。

# ios - 正方体 OCR 相机

> ID：11951080
> 
> 赞同：2
> 
> 时间：2012-08-14T11:12:58.263
> 
> 标签：ios, xamarin.ios, ocr, tesseract

我在我的 iOS 应用程序中使用 Tesseract OCR 3.01，当我从手机库中选择图像时，它显示了 90% 的数据准确率。但是如果我使用相机中的相同图像，它会显示混乱的字母。我按照[本教程](http://tinsuke.wordpress.com/2011/11/01/how-to-compile-and-use-tesseract-3-01-on-ios-sdk-5/)进行操作，请指导我是否可以做些什么来确保它在相机上工作，因为它适用于画廊图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:27:22.140

是的，有三件事要具体说明，首先，OCR 适用于黑白图像而不是彩色图像，因此，如果您可以尝试将图像转换为黑白，它将提高准确性。

第二件事是大小和方向，你需要强制图像为640*480或320大小，这样既可以提高识别速度，也可以提高准确率，对于方向，有很多方法可以管理.

最后，如果您可以允许用户指定他想要执行 OCR 的确切位置或图像的哪个部分，这将大大提高准确性和时间，因为库不需要检查整个图像的文本，而是您已经指定了要搜索的部分。

PS：过去几周我一直致力于创建一个 OCR 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:30:56.040

几乎可以肯定，问题是“方向”。苹果倾向于以一种位图的形式创建图像——图像位的布局就好像相机在它的一侧，音量按钮在顶部和右侧。您看到的看起来更高而不是更宽的图像仍按上述方式布置，但图像中包含的 EXIF 对象中有一个“方向”。

我猜测 tesseract 不会查看 EXIF，但希望图像采用“标准”格式，以便文本处于阅读文本的位置。

您可以使用右上角的音量按钮拍摄的相机图像来测试我的假设。

如果它们有效，那么您需要自己处理图像，并根据方向设置重新排列位。这并不难做到，但需要您阅读 vImage 和/或位图上下文。

# php - 如何仅从图像 url 回显字符串？

> ID：11951083
> 
> 赞同：-1
> 
> 时间：2012-08-14T11:13:06.173
> 
> 标签：php

如何从 url 中提取唯一的名称 jenir 和 ellbull？没有数字和扩展名？

```
1330001337_jenir.jpg
1330001327_ellbull.png 
```

// 输出

```
jenir
ellbull 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:16:51.017

在 _ 上使用 explode 或使用正则表达式。

对于此类任务，我更喜欢爆炸。

```
$str = "1330001327_ellbull.png";
list($first,$second) = explode("_", $str);
echo $second; 
```

现在你有了 ellbull.png。

如果您也想松开 .png，请对“.”执行相同操作。并使用第一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:26:36.847

```
$somevar = pathinfo(preg_replace('/^\d+_/', '', $file_name), PATHINFO_FILENAME); 
```

也会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:14:52.477

```
preg_match("/^\\d+_(\\w+)\\.[a-z]+$/", "1330001337_jenir.jpg", $match);
echo ($match[1]) // --> jenir 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:15:50.727

在你的情况下使用

```
$var = explode('_', $imageName);
echo $var[1]; 
```

UPD：如果您不需要文件扩展名，那么您再使用一次，`explode('.', $var[1])` 或者只是`echo substr($var[1], -4)` 或真正使用 regExp 来仅获取名称

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T11:22:10.323

```
$var = explode('_', $imgname);
$var = explode('.', $var[1]);
echo $var[0]; 
```

没有正则表达式。

# mysql - 具有多个数据库（mongodb、mysql）的 ruby on rails

> ID：11951085
> 
> 赞同：3
> 
> 时间：2012-08-14T11:13:10.277
> 
> 标签：mysql, mongodb, ruby-on-rails-3.2, connection, database

我打算为我的项目使用多个数据库（mongodb、mysql）。
我对此一无所知。
有没有人可以告诉我如何将mongodb和mysql连接到rails？
或任何参考资料？
谢谢。

-我正在使用 Ruby 1.9.3 和 Rails 3.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T21:36:53.040

您需要使用两个数据库连接来设置您的 rails 项目。

首先，对于 Mongo，您需要决定要使用哪个驱动程序包装器（如果您使用的话）。两个常见的是 MongoID 和 MongoMapper。两者都做几乎相同的事情，并以类似于 ActiveRecord 的方式轻松与 Mongo 交互。

要安装这些，您只需安装适当的 gem，例如对于 mongomapper，您需要运行“gem install mongomapper”

按照这些 Railcasts 获取分步说明： [MongoMapper](http://railscasts.com/episodes/194-mongodb-and-mongomapper)或 [MongoID](http://railscasts.com/episodes/238-mongoid)

现在对于 mysql，再次安装一个 gem，“gem install mysql”，然后按照 ruby​​ on rails 指南中的“入门”说明配置数据库文件。

请记住，对于 mongo 和 mysql，您需要将它们安装并运行在可以从开发环境访问的某个地方

# windows - 如何连接 Windows 批处理文件的命令输出

> ID：11951091
> 
> 赞同：3
> 
> 时间：2012-08-14T11:13:34.893
> 
> 标签：windows, batch-file, dos

我正在编写一个 Windows 批处理文件，它将清除超过 90 天的日志。如何连接命令的输出以使它们出现在一行中？我还想稍后将此输出附加到文件中。到目前为止，我的批处理文件是：

```
@echo off    
time /t && echo "--" && date /t && echo " -I- Purging " && FORFILES /P "D:\Logs" /M *.log /D -90 /C "cmd /c echo @file @fdate"
rem FORFILES that will purge the files 
```

这输出：

```
12:08
--
14/08/2012
 -I- Purging

"<filename>" 02/08/2012
"<filename>" 30/07/2012 
```

如何连接这些输出？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:13:03.980

将除 FOR 输出之外的所有内容放在一行上很容易。您只需要使用动态 %TIME% 和 %DATE% 变量而不是 TIME 和 DATE 命令

```
@echo off    
echo %time% "--" %date% -I- Purging 
FORFILES /P "D:\Logs" /M *.log /D -90 /C "cmd /c echo @file @fdate"
rem FORFILES that will purge the files 
```

如果您还希望文件名出现在同一行，那么您可以使用 EitanT 建议的临时变量。但这将文件的数量限制在最大 8191 可变大小的范围内。要处理无限数量的文件，您可以改用 SET /P。似乎不需要 FOR /F 语句，但是没有它我无法解决引用问题。

```
@echo off
<nul (
  set/p="%time% -- %date% -I- Purging "
  for /f "delims=" %%A in (
    'FORFILES /P "D:\Logs" /M *.log /D -90 /C "cmd /c echo @file @fdate"'
  ) do set/p="%%A "
)
rem FORFILES that will purge the files 
```

没有理由不在列出文件的同时清除文件。由于 FORFILES 非常慢，因此在同一命令中清除和列出会更有效。

```
@echo off
<nul (
  set/p="%time% -- %date% -I- Purging "
  for /f "delims=" %%A in (
    'FORFILES /P "D:\Logs" /M *.log /D -90 /C "cmd /c del @path&echo @file @fdate"'
  ) do set/p="%%A "
) 
```

**2015-01-06 更新**

我想出了一个不使用 FOR /F 的解决方案。我使用 0x22 将 SET /P 提示符括在引号中，并使用 FINDSTR 消除 FORFILES 在任何请求的输出之前写入的空行。

```
@echo off
<nul (
  set/p="%time% -- %date% -I- Purging "
  forfiles /p "d:\logs" /m *.log /d -90 /c "cmd /c del @path&set/p=0x5e0x22@file @fdate 0x5e0x22"'|findstr .
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:21:27.207

如果要连接输出中的行，可以设置`CMD_STR`为所需的命令，并使用`for /f`循环，如下所示：

```
@echo off
setlocal enabledelayedexpansion
set "CMD_STR=time /t && echo "--" && date /t && echo " -I- Purging " && FORFILES /P "D:\Logs" /M *.log /D -90 /C "cmd /c echo @file @fdate""
set CONCAT_STR=
for /f %%i in ('%CMD_STR%') do set "CONCAT_STR=!CONCAT_STR! %%i"
echo !CONCAT_STR! 
```

循环遍历输出的行并将它们一一追加到`CONCAT_STR`.

# iphone - 从 iphone 中的 sqlite 和 tableview 中删除数据

> ID：11951093
> 
> 赞同：2
> 
> 时间：2012-08-14T11:13:38.127
> 
> 标签：iphone, ios, sqlite

我正在尝试从 sqlite .data 中删除数据，我将从下到上删除数据，但随机删除数据从一行详细信息滑到另一行的数据，请帮助我删除数据。

这是我的代码

appdelegate.m

```
-(void)deleteData:(NSString *)str:(NSString *)string
{   
    NSLog(@"intIndexpath:--> %d",intIndexpath);

    [self createEditableCopyOfDatabaseIfNeeded];

    sqlite3_stmt *deleteStatement = nil;

    NSString *sql;

    int returnvalue;

    sql = [NSString stringWithFormat:@"DELETE FROM UserInfo_1 WHERE rowid=%d",intIndexpath+1];

    returnvalue = sqlite3_prepare_v2(database, [sql UTF8String], -1, &deleteStatement, NULL);

    if (returnvalue == 1)
    {
        NSAssert1 (0,@"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
    }

    sqlite3_bind_text(deleteStatement, 1,[strAcountName UTF8String], -1, SQLITE_TRANSIENT);

    if (SQLITE_DONE!= sqlite3_step(deleteStatement))
    {
        NSAssert1(0, @"Error while deleteing data. '%s'", sqlite3_errmsg(database));
    }

    if (sqlite3_prepare(database, [sql UTF8String], -1, &deleteStatement, NULL) == SQLITE_OK) 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Delete" message:@"Record Deleted" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];   
        [alert show];
        [alert release];

        alert=nil;

    }
    else
        sqlite3_reset(deleteStatement);

    sqlite3_finalize(deleteStatement);
    deleteStatement = NULL;
} 
```

表格视图.m

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        apd.intIndexpath = indexPath.row;

        [apd deleteData:[apd.ArrAcName objectAtIndex:indexPath.row] :apd.strAcountName];
        [apd.ArrAcName removeObjectAtIndex:indexPath.row];

        apd =(PasswordAppDelegate *)[[UIApplication sharedApplication]delegate];

//        NSLog(@"apd.strAcountName is:--> %@",apd.strAcountName);

        // [apd deleteData:apd.strAcountName];

        self.navigationItem.title =@"Details";

        [tableView reloadData];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:04:04.770

几个反应：

1.  看起来您正在使用`rowid`它，就好像它是一个行号。它不是。它是唯一的行标识符，无论您添加还是删除其他行，对于给定行都不会更改。因此，如果您有五行（`rowid`从 1 到 5）并删除第一行，那么`rowid`后续四条记录的与`rowid`1) 的行。如果您有“随机”删除的记录，我想知道您是否`row`从您的数字中获取数字`indexPath`并假设该数字将对应于表`rowid`值，而在您从表中删除一条记录后它不会。

    您想要做的是，当您从数据库中读取数据时，也读取并保存相应的`rowid`（或者更好的是，如果您的表有主键，请使用它）。然后，当去删除一行时，你不应该只使用`rowid`等于你的`indexPath.row`，而是你应该抓住`rowid`你在开始时保存的与当前对应的唯一（或主键）`indexPath.row`来弄清楚如何删除有问题的行。

2.  不相关，但您似乎不需要做任何`sqlite3_bind`. 您似乎没有任何需要绑定的参数。

3.  也不相关，但是在你之后`sqlite3_step`，你又在做另一个`sqlite3_prepare`，这是没有意义的。如果`sqlite3_step`成功，您可以直接`sqlite3_finalize`退出。

4.  顺便说一句，您可能需要考虑使用 Objective-C 包装器，例如出色的[FMDB](https://github.com/ccgus/fmdb/)。它确实简化了 SQLite 编程过程。

# android - 来自android中url的图库图片？

> ID：11951094
> 
> 赞同：5
> 
> 时间：2012-08-14T11:13:41.363
> 
> 标签：android, gallery, android-image

我想创建一个从 url 获取图片的图片库..这是我的代码，但不起作用......

```
 public class ImagesActivity extends Activity
 {    

private String[] imageIDs= {"http://lh5.ggpht.com/_mrb7w4gF8Ds/TCpetKSqM1I/AAAAAAAAD2c/Qef6Gsqf12Y/s144-c/_DSC4374%20copy.jpg",  
"http://lh5.ggpht.com/_Z6tbBnE-swM/TB0CryLkiLI/AAAAAAAAVSo/n6B78hsDUz4/s144-c/_DSC3454.jpg",  
"http://lh3.ggpht.com/_GEnSvSHk4iE/TDSfmyCfn0I/AAAAAAAAF8Y/cqmhEoxbwys/s144-c/_MG_3675.jpg",  
"http://lh6.ggpht.com/_Nsxc889y6hY/TBp7jfx-cgI/AAAAAAAAHAg/Rr7jX44r2Gc/s144-c/IMGP9775a.jpg"
};

@Override    
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.displayview);

    Gallery gallery = (Gallery) findViewById(R.id.gallery1);

    gallery.setAdapter(new ImageAdapter(this));        
    gallery.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView parent, View v, int position, long id) 
        {                
 //                             Toast.makeText(getBaseContext(), "pic" + (position + 1) + " selected", Toast.LENGTH_SHORT).show();
                          //---display the images selected---
                            ImageView imageView = (ImageView) findViewById(R.id.image1);                
                            imageView.setImageResource(imageIDs[position]);
        }
    });

}

public class ImageAdapter extends BaseAdapter 
{
    private Context context;
    private int itemBackground;

    public ImageAdapter(Context c) 
    {
        context = c;
        //---setting the style---
        TypedArray a = obtainStyledAttributes(R.styleable.Gallery1);
        itemBackground = a.getResourceId(
            R.styleable.Gallery1_android_galleryItemBackground, 0);
        a.recycle();                    
    }

    //---returns the number of images---
    public int getCount() {
        return imageIDs.length;
    }

    //---returns the ID of an item--- 
    public Object getItem(int position) {
        return position;
    }            

    public long getItemId(int position) {
        return position;
    }

    //---returns an ImageView view---
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(context);
        imageView.setImageResource(imageIDs[position]);
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.setLayoutParams(new Gallery.LayoutParams(150, 120));
        imageView.setBackgroundResource(itemBackground);
        return imageView;
    }
}    

} 
```

ViewsActivity.java

```
 public class ViewsActivity extends Activity 
 {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
 //        setContentView(R.layout.main);

    startActivity(new Intent(this, ImagesActivity.class));

  }
 } 
```

错误是我不能使用 imageView.setImageResource(imageIDs[position]); 对于字符串...请帮忙？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T11:19:07.003

例如，您需要从链接中解码图像，

```
URL url = new URL("load your URL");
Bitmap bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream());
img_downloaded.setImageBitmap(bmp); 
```

**更新：**

我修改了你的代码，你可以试试这个，

```
public class MainActivity extends Activity {

    private String[] imageIDs = {
            "http://lh5.ggpht.com/_mrb7w4gF8Ds/TCpetKSqM1I/AAAAAAAAD2c/Qef6Gsqf12Y/s144-c/_DSC4374%20copy.jpg",
            "http://lh5.ggpht.com/_Z6tbBnE-swM/TB0CryLkiLI/AAAAAAAAVSo/n6B78hsDUz4/s144-c/_DSC3454.jpg",
            "http://lh3.ggpht.com/_GEnSvSHk4iE/TDSfmyCfn0I/AAAAAAAAF8Y/cqmhEoxbwys/s144-c/_MG_3675.jpg",
            "http://lh6.ggpht.com/_Nsxc889y6hY/TBp7jfx-cgI/AAAAAAAAHAg/Rr7jX44r2Gc/s144-c/IMGP9775a.jpg" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Gallery gallery = (Gallery) findViewById(R.id.gallery1);

        gallery.setAdapter(new ImageAdapter(this));
        gallery.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent, View v, int position,
                    long id) {
                // Toast.makeText(getBaseContext(), "pic" + (position + 1) +
                // " selected", Toast.LENGTH_SHORT).show();
                // ---display the images selected---
                ImageView imageView = (ImageView) findViewById(R.id.imageview1);
                URL url = null;
                try {
                    url = new URL(imageIDs[position]);
                    Bitmap bmp = null;
                    try {
                        bmp = BitmapFactory.decodeStream(url
                                .openConnection().getInputStream());
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    imageView.setImageBitmap(bmp);
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });

    }

    public class ImageAdapter extends BaseAdapter {
        private Context context;
        private int itemBackground;

        public ImageAdapter(Context c) {
            context = c;
            // ---setting the style---
             TypedArray a = obtainStyledAttributes(R.styleable.Gallery1);
            itemBackground = a.getResourceId(
             R.styleable.Gallery1_android_galleryItemBackground, 0);
             a.recycle();
        }

        // ---returns the number of images---
        public int getCount() {
            return imageIDs.length;
        }

        // ---returns the ID of an item---
        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        // ---returns an ImageView view---
        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imageView = new ImageView(context);
            // imageView.setImageResource(imageIDs[position]);
            URL url;
            try {
                url = new URL(imageIDs[position]);
                Bitmap bmp = BitmapFactory.decodeStream(url.openConnection()
                        .getInputStream());
                imageView.setImageBitmap(bmp);
                imageView.setScaleType(ImageView.ScaleType.FIT_XY);
                imageView.setLayoutParams(new Gallery.LayoutParams(150, 120));
                imageView.setBackgroundResource(itemBackground);

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return imageView;
        }
    }

} 
```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Gallery
        android:id="@+id/gallery1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <ImageView
        android:id="@+id/imageview1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/gallery1" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T11:18:48.777

在 getView 方法中：

```
URL newurl = new URL(imageIDs[position]); //Your URL String.
Bitmap image = BitmapFactory.decodeStream(newurl.openConnection().getInputStream());  
imageView.setImageBitmap(image); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T09:57:33.887

在此图库中使用 url 的图片 答案[单击链接](http://indianwebsitepost.wordpress.com/2012/08/22/android-image-gallery-view-using-url/#more-206)

# iphone - 是否可以根据语言有 2 个不同的应用程序图标？

> ID：11951095
> 
> 赞同：2
> 
> 时间：2012-08-14T11:13:41.900
> 
> 标签：iphone, ios, xcode, ipad

> **可能重复：**
> [iPhone 中图标和默认屏幕的本地化](https://stackoverflow.com/questions/2700311/localization-of-icon-and-default-screen-in-iphone)

正如我的问题已经说过的，我想要 2 个不同的应用程序图标。例如，如果英语是设备上的母语，我希望它不仅有不同的应用程序名称，还有不同的图标。那么这真的可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T11:53:12.817

根据苹果文档，你可以做到。

> iOS 应用程序应该是国际化的，并且它支持的每种语言都有一个 language.lproj 文件夹。除了提供应用程序自定义资源的本地化版本外， **您还可以通过在特定语言的项目目录中放置具有相同名称的文件来本地化应用程序图标和启动图像。**但是，即使您提供本地化版本，您也应该始终在应用程序包的顶层包含这些文件的默认版本。默认版本用于特定本地化不可用的情况。有关本地化资源的更多信息，请参阅“捆绑包中的本地化资源”。</p>

此信息是从这里提取的： [https ://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:58:52.110

如果您愿意，您也可以这样做...只需单击您的图标文件（考虑**Icon.png**）现在只需单击右侧“本地化”窗格中的“+”。

添加您要提供支持的语言。考虑到您有英语和西班牙语支持，添加这两种语言。它将创建“en.lproj”和“es.lproj”。

现在只看那些目录，你可以看到两个目录都有自己的**Icon.png**副本。所以只需替换该图像并确保新文件与被替换的文件具有相同的名称。

现在运行它。**并通过在设置>国际>语言**中更改语言来检查

 **基本的东西是基于语言的，它将检查本地化是否可用于该特定资源，如果存在，它将被使用。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-14T11:18:45.197

~~不，您不能拥有本地化的应用程序图标~~

对不起，我错了，这是可能的。我很确定，但我的信息显然已经过时了:)。**

# deployment - 在 Eclipse Juno 和 GlassFish 3.1.2.2 上增量发布

> ID：11951096
> 
> 赞同：3
> 
> 时间：2012-08-14T11:13:55.323
> 
> 标签：deployment, glassfish, eclipse-juno

在将我的 Eclipse 更新到 Juno 并将最新的 GlassFish 更新到 3.1.2.2 之后，我失去了从服务器选项卡中增量部署应用程序的选项（我在那里看到服务器并部署和运行我的 Java EE 应用程序，但现在如果我更改任何 xhtml 文件我需要重新部署所有应用程序）。

我曾经在服务器内的已部署应用程序中有一个菜单，我可以在其中进行完全部署或增量部署，每当我进行任何细微更改时，我都会经常使用它。

我使用的是外部 Glassfish，而不是内部运行时，我使用的是 MacOS Lion。

# ruby-on-rails - 在 rails 2 模型中获取完整的链接 url

> ID：11951099
> 
> 赞同：1
> 
> 时间：2012-08-14T11:14:02.397
> 
> 标签：ruby-on-rails, ruby-on-rails-2

我如何在 rails 2 中获取带有主机名的完整 url

我正在寻找的是`url_for`在模型类中使用并在开头附加当前主机 url

例如

从模型类调用它

> url_for(:controller => 'wiki', :action => 'show', :project_id => page.project, :id => page.title)

这应该返回

> [http://www.hostname.com/wiki/show/projectname/wikipageid](http://www.hostname.com/wiki/show/projectname/wikipageid)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:37:40.527

在您的模型中包含以下模块

```
 include ActionView::Helpers::UrlHelper
  include ActionView::Helpers
  include ActionDispatch::Routing
  include Rails.application.routes.url_helpers 
```

然后您可以创建一个名为generete_url 的函数并将url_for 调用到该函数中

```
 class User
   include Mongoid::Document
   include ActionView::Helpers::UrlHelper
   include ActionView::Helpers
   include ActionDispatch::Routing
   include Rails.application.routes.url_helpers

   def generate_url

     url_for(:host => "abcd",:action => 'new', :controller => 'users', :only_path => false, :protocol => 'https') 
   end   
 end 
```

这是我的用户模型，当我这样做时，我得到了输出

```
u = User.new
u.generate_url 
# => https://abcd/users/new 
```

# wpf - 将 DataGrid 列宽设置为 Star 样式

> ID：11951100
> 
> 赞同：1
> 
> 时间：2012-08-14T11:14:03.197
> 
> 标签：wpf, xaml, .net-4.0, datagrid

如何将 DataGrid 标头的 XAML 宽度设置为`*`？此代码不起作用：

```
<DataGrid>
    <DataGrid.Resources>
        <Style x:Key="CbClmn" TargetType="DataGridColumnHeader">
            <Setter Property="Width" Value="30" />
        </Style>
        <Style x:Key="TxtClmn" TargetType="DataGridColumnHeader">
            <Setter Property="Width" Value="*" />
        </Style>
    </DataGrid.Resources>
    <DataGrid.Columns>
        <DataGridCheckBoxColumn HeaderStyle="{StaticResource CbClmn}" />
        <DataGridTextColumn Header="Title" HeaderStyle="{StaticResource TxtClmn}" />
        <DataGridCheckBoxColumn Header="Selected" HeaderStyle="{StaticResource CbClmn}" />
    </DataGrid.Columns>
</DataGrid> 
```

样式`TxtClmn`生成异常`'*' string cannot be converted to Length`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:14:11.327

在对象浏览器中查看：

```
//DataGridColumn
public System.Windows.Controls.DataGridLength Width { set; get; }

//DataGridColumnHeader
public double Width { set; get; } 
```

这就是为什么你不能那样做。它是双重类型。

# ios - 如何在 iOS 中获取绝对图像位置？

> ID：11951101
> 
> 赞同：3
> 
> 时间：2012-08-14T11:14:11.820
> 
> 标签：ios

目前，我的视图中有一个框架内的图像。我想获得图像的绝对位置。

通过使用`image.frame.origin.x`我得到一个相对于图像所在框架的位置。例如，如果框架在底部，我应该得到一个大数字 x 和 y。但是我收到 0 和 0，因为图像就在框架的顶部和左侧边框旁边。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T11:24:46.743

尝试：

```
CGRect absolutePosition = [image convertRect:self.view.bounds toView:nil]; 
```

这将为您提供窗口中的位置。如果您希望它引用另一个视图，请将 nil 更改为该视图。

# asp.net - 获取到 localhost 的连接被中断。尝试发送 [DataContract] 标记对象的 JSON 表示时

> ID：11951105
> 
> 赞同：2
> 
> 时间：2012-08-14T11:14:28.670
> 
> 标签：asp.net, json, wcf, asp.net-4.0, datacontractserializer

我正在使用以下方法通过本地计算机上托管的 WCF 服务发送自定义对象列表的**JSON 表示：**

```
 [OperationContract]
    [WebInvoke(Method = "GET", RequestFormat = WebMessageFormat.Json,
               ResponseFormat = WebMessageFormat.Json)]
    public List<MyObject> GetObjects()
    {
        return MyObject.GetObjects();
    } 
```

MyObject 类标有 [DataContract] 属性，当我使用 Rest URL 请求方法时，出现错误

> 此网页不可用，与 localhost 的连接已中断。

当我删除**[DataContract]**属性时，它工作正常。我阅读了许多文章，您应该启用 SSL 并配置服务行为以设置证书名称和存储以及诸如此类的东西，但这是使其工作的正确且唯一的方法吗？不应该直截了当吗？

MyObject 的代码是：

```
 [DataContract]
public class MyObject
{

    [DataMember]
    public int ID { get ; set; }
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string Description { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T11:25:10.550

确保所有标记为 [DataMember] 的属性都已获取和设置，也就是说它们不是只读的，不知道为什么，但我曾经遇到过这个问题并像这样解决了它。

# wordpress - 如何在 magento 的博客页面上显示购物车和帐户链接？

> ID：11951106
> 
> 赞同：0
> 
> 时间：2012-08-14T11:14:34.493
> 
> 标签：wordpress, magento, integration

我已经集成了与magento和集成主题集成的fishpig wordpress博客

但我需要`my cart, my account, login, blog`在博客页面的标题中显示

那么我可以`header.php`在博客的文件中写什么

请帮帮我

谢谢并希望得到答复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:15:28.540

也许尝试在布局 XML 中使用页面的句柄。

然后只需添加块 top.links。

如果您需要有关布局 XML[的帮助，请参见此处](http://alanstorm.com/layouts_blocks_and_templates)

逾越节

# iphone - iPhone SDK - 将我的基于委托的函数转换为块

> ID：11951110
> 
> 赞同：3
> 
> 时间：2012-08-14T11:14:52.357
> 
> 标签：iphone, objective-c, objective-c-blocks

我有一个非常简单的类（目前用作测试类），它使用`delegate/protocol`方法与其父类交互。但是，我真的很想将其转换为使用`blocks`. 但是我找不到很好的资源或教程来帮助我弄清楚如何做到这一点。所有的积木教程都太复杂了，我真的想要一个小而简洁的例子来说明如何做到这一点。

我目前有课程：

```
#import <Foundation/Foundation.h>

@protocol TestObjectDelegate <NSObject>

@optional
-(void)testObjectSucceeded:(BOOL)passedTest;
-(void)testObjectedFailed:(NSError *)error;
@end

@interface TestObject : NSObject {
    id<TestObjectDelegate> _delegate;
}
-(void)compare:(NSString *)stringA with:(NSString *)stringB;

@end

#import "TestObject.h"

@implementation TestObject 

- (id)initWithDelegateController:(id<TestObjectDelegate>)delegate {
    self = [super init];
    if (self) {
        _delegate = delegate;
    }
    return self;
}

-(void)compare:(NSString *)stringA with:(NSString *)stringB {
    if ([stringA isEqualToString:stringB]) {
        if(_delegate && [_delegate respondsToSelector:@selector(testObjectSucceeded:)]) {
            [_delegate testObjectSucceeded:YES];
        }
        else {
            [_delegate testObjectSucceeded:NO];
        }
    }
    else {
        if(_delegate && [_delegate respondsToSelector:@selector(testObjectedFailed:)]) {
            [_delegate testObjectedFailed:nil];
        }
    }
}
@end 
```

我怎样才能开始将其转换为基于块的功能？另外，我知道在实现块功能时需要注意“保留周期”。将此类转换为使用块而不是委托/协议时，我需要注意什么？谷歌搜索“保留周期”也给出了一些过于复杂的答案。

任何起始指针将不胜感激？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T11:31:35.323

也许这个例子给你一个想法：

```
typedef void (^MyCallbackBlock)(BOOL);

@interface TestObject : NSObject {

}
@property (nonatomic, copy) MyCallbackBlock myBlock;
@end

#import "TestObject.h"

@implementation TestObject 

-(void) yourMethod
{
    ...
        self.myBlock(YES); // call block with argument
    ...
}

- (void)dealloc 
{
    [myBlock release];   
    myBlock = nil;
    [super dealloc];
}

@end 
```

使用对象时，您可以像这样定义块：

```
TestObject* theTestObject = [[TestObject alloc] init];
theTestObject.myBlock = ^(BOOL theParameter){
    NSLog(@"foo");
}; 
```

# ios - 如何在启用编辑的表格视图中移动行后显示重新排列控件

> ID：11951111
> 
> 赞同：0
> 
> 时间：2012-08-14T11:14:58.997
> 
> 标签：ios, uitableview, setediting

所以昨晚我偶然发现了 iOS SDK 的一个相当不方便的“功能”，我想与你们分享我的发现和解决方案。还要获得输入，是否有更好的解决方案。

**设想**

我有一个表格视图，有两个部分，一个是*最喜欢的项目*，另一个是*所有其他项目*。点击表格视图中的一行将切换该项目是否被标记为收藏；在*最喜欢的项目*部分中点击一行，会将其从收藏夹中删除，而在*所有其他项目*部分中点击一行会将这个项目添加到收藏夹中。

当收藏的状态被切换时，我`moveRowAtIndexPath:toIndexPath:`会做一个漂亮的小动画并将行从*收藏*部分移动到*所有其他*部分。

**问题**

因此，问题出现了，因为不仅用户应该能够切换收藏状态，而且*收藏*部分中的所有项目都应该是可重新排列的。因此，我想在*最喜欢的项目*部分的每一行中显示一个重新排列控件。

但是，调用时不会重绘单元格，`moveRowAtIndexPath:toIndexPath:`并且 fromIndexPath 和 toIndexPath 都在可见区域中。*这意味着在收藏项*部分添加新行时不会显示重新排列控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:14:58.997

**解决方案**

在逐页查看文档中的页面后，在 StackOverflow 上进行线程并尝试各种东西后，我终于找到了解决方案。

调用后，我还立即`moveRowAtIndexPath:toIndexPath:`调用以下几行：

```
[cell setEditing:NO]
[cell setEditing:YES] 
```

这将导致一个单元格了解它对重新排列的限制已更改，从而适当地显示/隐藏重新排列控件。

我发现这个解决方案非常老套，所以我很高兴听到更好的解决方案。但至少，现在有一个解决方案，供其他人享受。

# encryption - 两个级别的加密（有一个扭曲）

> ID：11951113
> 
> 赞同：0
> 
> 时间：2012-08-14T11:15:03.367
> 
> 标签：encryption

我有一个场景，我需要加密一个文档，然后将其转换为另一种格式，然后从该特定格式解密，转换为如果我们在没有加密的情况下转换原始文档会得到的格式。

```
In Steps - 
 Document D, Encryption E, Conversion C

 D with E gives ED
 ED converted with C gives CED
 D converted with C gives CD
 CED when decrypted should return CD 
```

有谁知道任何可以帮助我做到这一点的算法/软件/技术？

感谢您的帮助，问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:03:56.773

在加密方面，只有当您的加密 E 是流密码并且转换 C 是精确的字节到字节转换时，这才有可能。对字节数的任何更改（例如，不同的行尾代码）都会使其变得不可能。

在象征意义上：

```
D XOR E => ED    (encryption)
ED XOR C => CED  (conversion ED -> CED)
D XOR C => CD    (conversion D -> CD)
CED XOR E => CD  (decryption) 
```

分离加密和转换要简单得多。仅转换文档的解密版本。

# c# - 从多个列表框打印

> ID：11951115
> 
> 赞同：0
> 
> 时间：2012-08-14T11:15:12.450
> 
> 标签：c#

我在下面有这段代码，它从 4 个不同的列表框打印，但不打印列表框中的信息，但我可以在打印预览中查看需要打印的信息，但在打印时不显示。但是没有打印出来......

提前致谢。

```
 private void btnPrint_Click(object sender, EventArgs e)
    {
        printDocument1.OriginAtMargins = true;
        printDocument1.DocumentName = "Barcode";
        printPreviewDialog1.Document = printDocument1;

        string itemcode = "";
        string itemDescription = "";
        string inclValue = "";
        string exclValue = "";

        foreach (object x in lstbxItemCode.Items)
        {
            itemcode = itemcode + x + "\n";
        }
        foreach (object y in lstbxItemDesc.Items)
        {
            itemDescription = itemDescription + y + "\n";
        }
        foreach (object z in lstbxInclValue.Items)
        {
            inclValue = inclValue + z + "\n";
        }
        foreach (object y in lstbxExclValue.Items)
        {
            exclValue = exclValue + y + "\n";
        }
        myReader = new StringReader("ItemCode: " + itemcode + "\n" + "ItemDescription: " + itemDescription + "\n" + "InclValue: " +"R " + inclValue + "\n" + "ExclValue: " +"R " + exclValue);
        printPreviewDialog1.Show();
    }

    private void printDocument1_PrintPage(object sender, PrintPageEventArgs ev)
    {

        int count = 0;
        float leftMargin = ev.MarginBounds.Left;
        float topMargin = ev.MarginBounds.Top;
        string line = null;
        Font printFont = lstbxItemCode.Font;
        using (var myBrush = new SolidBrush(Color.Black))
        {
            float linesPerPage = ev.MarginBounds.Height/printFont.GetHeight(ev.Graphics);

            // Iterate over the string using the StringReader, printing each line.
            while (count < linesPerPage && ((line = myReader.ReadLine()) != null))
            {
                // calculate the next line position based on
                // the height of the font according to the printing device
                float yPosition = topMargin + (count * printFont.GetHeight(ev.Graphics));

                // draw the next line in the rich edit control

                ev.Graphics.DrawString(line, printFont,
                                       myBrush, leftMargin,
                                       yPosition, new StringFormat());
                count++;
            }
        } 
```

}

# unit-testing - 定时断言是个好主意吗？

> ID：11951117
> 
> 赞同：0
> 
> 时间：2012-08-14T11:15:25.210
> 
> 标签：unit-testing, integration-testing

首先为奇怪的标题道歉，但我不知道如何命名我想谈论的内容，所以我称之为“定时断言”。
基本上可以说一个人想要测试某些类功能，但类方法是异步的（例如 instance.Start() 立即返回，但私有成员 instance.Mode 将在 2 秒后更改为 enum Started ）。所以会像：

```
MyObject instance; 
instance.start();
// invented function, first part is the normal assert, 3000 is delay  in milliseconds 
timed_assert(instance.GetMode()==MyObject::Mode::Started, 3000); 
```

是个好主意吗？请不要将 timed_assert 实现为阻塞函数是微不足道的（睡眠 + 正常断言），使其成为非阻塞超出了我的技能 lvl，但如果你确定它可以完成，你可以自由地将其视为一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:53:46.897

我想你已经在评论中得到了答案……“不。定时断言不是一个好主意。”

您描述的“在 500 毫秒内状态必须更改为 X，原因：用户讨厌延迟”的那种要求不够具体。

系统在什么硬件上运行？它在什么负载下？

这种绝对要求必须精确指定，并且应该被视为性能测试而不是单元或集成测试。无论您在什么测试环境上执行单元/集成测试，都应该运行绿色。你不是在测试你的硬件，是吗？

# c++ - 检查指针是否指向特定类 C++

> ID：11951121
> 
> 赞同：10
> 
> 时间：2012-08-14T11:15:33.897
> 
> 标签：c++, pointers

> **可能重复：**
> [在 C++ 中查找对象的类型](https://stackoverflow.com/questions/351845/finding-the-type-of-an-object-in-c)

我有一个检查指针的问题，看看它们是否符合特定的派生类并采取必要的措施。

假设我目前有 2 个派生类`DerivedClass1`和`DerivedClass2`基类`BaseClass`。我想检查以下操作。

`Ptr<BaseClass> ptr;`

`if (ptr points to DerivedClass1)` `{` 动作 1 `}` 否则 `{` 动作 2 `}`

如何检查指向特定 DerivedClass 的 ptr 点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-14T11:17:13.343

如果您要考虑更多面向对象，则只需将其设置为基类上的虚拟方法：

```
Ptr<BaseClass> ptr;

ptr->Action(); 
```

并让每个类根据需要实现它。我意识到这不是一个实际的答案，但它是实现目标的另一种方式，通常被认为更好，这就是我认为值得一提的原因。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-14T11:17:48.700

如果`BaseClass`是多态的（包含虚函数），可以测试：

```
if (dynamic_cast<DerivedClass1*>(ptr.get())) 
```

但通常你应该按照 unwind 的建议使用动态调度，可能是访问者模式，用于这类事情。乱扔代码`dynamic_cast`使维护变得困难。我`dynamic_cast`几乎从不使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-14T11:17:31.053

```
if(dynamic_cast<DerivedClass1*>(ptr))
{
  // Points to DerivedClass1
}
else if(dynamic_cast<DerivedClass2*>(ptr)
{
  // Points to DerivedClass2
} 
```

# php - 如何将“值”字段的值放在输入类型为数据库复选框的表单中？

> ID：11951122
> 
> 赞同：0
> 
> 时间：2012-08-14T11:15:37.827
> 
> 标签：php, mysql, html

我尝试了很多以从数据库中获取值并将其放入复选框数组但失败了。请帮助！

* **img[] 一直是空的，就像我使用 $_POST(['img']) 调用该部分时没有任何值进入它一样！！*** 这是我的代码：

```
 echo " <h2>Select image to delete: <h2>";
   $s = mysql_query("SELECT * FROM image WHERE u_id = '$u_id'");
   $num = mysql_num_rows($s);

   if($s)
   { 
      ?>
   <form name="f1" method="post" action=""> 
      <?php
    while($row = mysql_fetch_array($s))
    { 
      ?>      
    <input type="checkbox" name="img[]" value="<?php $row['path'] ;?>" />
    <img width="100" src="<?php echo $row['path']." ";?>">
    <?php                 
    }
    ?>
       <br />
       <br />
       <input type="submit" name= "subDel" value = "Delete" />
       </form>
     <?php

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:21:26.533

那这个呢？:)

```
<input type="checkbox" name="img[]" value="<?php $row['path'] ;?>" /> 
```

=>

```
 <input type="checkbox" name="img[]" value="<?php ECHO $row['path'] ;?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:26:22.920

使用 $_POST['variableName'] 在 PHP 中检索发布数据 - 没有括号，大小写很重要

在您的情况下， $_POST['img'] 的类型是*array*。未选中的项目没有价值。如果未检查任何内容，则您的 post 变量为空甚至未定义（尚未测试）。

通过以下方式访问您的价值观

```
if (array_key_exists($index, $_POST['img']) == true) {
    // $index is checked
    $doSomething = $_POST['img'][$index];
} 
```

# java - 按钮多次打开新的 JFrame。我该如何阻止这个？

> ID：11951123
> 
> 赞同：1
> 
> 时间：2012-08-14T11:15:39.503
> 
> 标签：java, swing, window, jframe, jpanel

我正在使用不同的类：一个持有一个带有按钮的主 JFrame，另一个持有一个在按下按钮时调用的新 JFrame。

```
if( event.getSource() == noteBtn ) { MiniPad.pad(); return;} 
```

（MiniPad.pad() 引用新 JFrame 上的类和 pad() 方法）

当我在承载按钮的 JPanel 上 removeAll()，然后 revalidate() 和 repaint() 时，按钮会多次打开 JFrame，这根本不是我想要它做的。

有没有办法告诉 MiniPad 类你不能在任何时候打开多个 JFrame 副本？顺便说一下，我扩展了 JFrame，以防万一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:25:33.977

最好的解决方案是打开一个[模态对话框](http://docs.oracle.com/javase/tutorial/uiswing/misc/modality.html)而不是框架。请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/a/9554657/418556)更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T11:38:07.627

编辑：下面的所有内容都是有效的编程知识，但您可能还想考虑`MiniPad`扩展`JDialog`类。我以前没用过，但它的实现看起来很像`JFrame`. 你实际上可能不需要在`MiniPad`课堂上做太多改变。文档在这里：[http ://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html)

如果您想知道原因，请在[此处](https://stackoverflow.com/a/9554657/418556)查看 Andrew Thompson 的帖子。

--

根据我对您的问题的理解，`MiniPad`extends`JFrame`和该`pad()`方法创建了`MiniPad`该类的一个新实例。最简单的解决方案是将`MiniPad`类（至少通过`pad()`方法）变成单例。单例是一种在任何给定时间只能存在一个实例（或对象）的类。通过调用静态方法（在这种情况下`pad()`），您可以检查对象的实例是否已经存在；如果是这样，只需使用该现有对象：

```
public class MiniPad extends JFrame {

    //whatever code you have

    private static MiniPad padInstance = null; //the singleton instance of your MiniPad

    public static MiniPad pad() {
        if(padInstance == null)
            padInstance = new MiniPad();
        //If you want to reset the object every time you call the method for whatever reason, do it here
        pad.setVisible(true); // I believe this is all you want to do
    }
} 
```

这应该做你想要的。通过调用该`pad()`方法，只会`MiniPad`出现一个。

但是，如果我读错了你的问题，请告诉我，我会修改我的答案。

关于单身人士的信息： [http ://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

# php - 继续获取为 foreach() 提供的无效参数

> ID：11951124
> 
> 赞同：0
> 
> 时间：2012-08-14T11:15:49.020
> 
> 标签：php

我不断收到此警告：

警告：这里为 foreach() 提供的参数无效是我的完整代码，它执行 mysql 的函数列表输出并将其分页每页 10 个输出，错误出现在最后一页

```
<?php
    require_once('dbconnect.php');

    $yesterday = date("Y-m-d", strtotime("yesterday")); 
    $page=intval($_POST['p']);
    if($page=='')
    {
        $page=1;    
    } 
    $dbadd=($page-1)*10;

    $query = "SELECT * FROM ranking";
    $totalposts=mysql_num_rows(mysql_query($query));
    $totalpages=ceil($totalposts/10);
    $query = "SELECT  r.ranking,r.screenname,r.name,r.followers,r.tweets,r.location,r.`join    date`,r.avatar, h.date, r.followers-h.followers followers_diff, r.tweets-h.tweets tweets_diff  FROM ranking r, ranking_hist h WHERE r.screenname=h.screenname and h.date='$yesterday' AND r.ranking>$dbadd AND r.ranking<($dbadd+11) ORDER BY ranking ASC LIMIT 10 ";

    $result = mysql_query($query);

    if( !$result ) {
    die("Error: " . mysql_error() );
    } 

    while($row = mysql_fetch_assoc($result) ) {
    $tweep = $row['screenname']; 
    $tweeps[$tweep] = $row; 
    }

    $query = "SELECT r.ranking,r.screenname,r.name,r.followers,r.tweets,r.location,r.`join date`,r.avatar  FROM ranking r  WHERE r.screenname NOT IN ( SELECT DISTINCT screenname from ranking_hist ) AND r.ranking>$dbadd AND r.ranking<($dbadd+11)  ORDER BY ranking ASC LIMIT 10";

     $result = mysql_query($query);
     if( !$result ) {
    die("Error: " . mysql_error() );
     } 

     while($row = mysql_fetch_assoc($result) ) {
    echo "";
    $tweep = $row['screenname']; 
    $tweeps[$tweep] = $row; 
     }

     mysql_free_result($result);

     $i = 0;
     $total_amount = count($tweeps);

     foreach  ($tweeps as $tweep) {
         $i++;
         if ($total_amount == $i) {
             $class = 'divrow divrowlast';
         } else {
             $class = 'divrow';
         }

         $col5 = "";
     if( $tweep['followers_diff'] > 0 ) {                   
         $col5 = "<span style='color:green; display:inline;'> +" . $tweep['followers_diff'] . "▲ </span>";
         }
     else if( $tweep['followers_diff'] < 0 ) {
         $col5 = "<span style='color:red; display:inline;'> -" . $tweep['followers_diff'] . "▼ </span>";
         }

         $html_table .=   '<div class="'.$class.'"><ul>' .
             "<li class='row100rank'> " . $tweep['ranking'] . "</li>" .      
             "<li class='row100user'>
          <div class='avatar'><img width='32' height='32' src='" . $tweep['avatar'] . "' alt='" . $tweep['screenname'] ."' /></div>
          <div  class='feature-author'><a class='text_bigger' href='http://www.twitter.com/" . $tweep['screenname'] . "/'>@".$tweep['screenname']."</a></div>
        <div class='row100description'>".$tweep['name']."<br />".$tweep['location']."</div></li>" .
              "<li class='pad'><div class='stat'> <span>" . $tweep['followers'] . " $col5</span> followers</div></li>" .
              "<li class='pad rowTwitte'><div class='stat'> <span>" . $tweep['tweets'] . " $col6</span> tweets</div></li>" .
              "<li class='pad rowJoionDate'><div class='stat'> <span>" . date  ( 'd M y', strtotime($tweep['join date'])) . "</span> joindate</div></li>" .
              "</ul></div>";
          }

      echo $html_table;

?>

<div class="dataTables_paginate paging_full_numbers" ><span   class="first paginate_button" ><a class="pagelinks" href="javascript:void(0);" pageid="1" onClick="changepage(1);">First</a></span>
              <span class="previous paginate_button" ><a class="pagelinks" href="javascript:void(0);" pageid="<?php echo $page>1?($page-1):1;?>" onClick="changepage(<?php echo $page>1?($page-1):1;?>);" >Previous</a></span>

<span>
<?php
    switch($page){
        case 1:
             $it=1;
             $itl=6;
             break;
        case 2:
             $it=1;
             $itl=6;
         break;
        case $totalpages:
         $it=$totalpages-4;
         $itl=$totalpages+1;
            break;
        case $totalpages-1:
         $it=$totalpages-4;
         $itl=$totalpages+1;
         break;
        default:
         $it=$page-2;
         $itl=$page+3;
    }

    for(;$it<$itl;$it++){
?>
  <span class="<?php echo  $page== $it?'paginate_active':'paginate_button'; ?>"> 
      <a class="pagelinks" href="javascript:void(0);" pageid="<?php echo $it;?>" onClick="changepage(<?php echo $it;?>);" ><?php echo $it; ?></a></span>
<?php
   }
?>

  </span>
  <span class="next paginate_button" ><a class="pagelinks" href="javascript:void(0);" pageid="<?php echo $page<$totalpages?($page+1):$page;?>" onClick="changepage(<?php echo $page<$totalpages?($page+1):$page;?>);">Next</a>
  </span>

   <span class="last paginate_button" >
       <a class="pagelinks" href="javascript:void(0);" pageid="<?php echo $totalpages;?>" onClick="changepage(<?php echo $totalpages;?>);">Last</a>
   </span></div>

   <div class="dataTables_info"> 
        Showing <?php echo ($page-1)*10+1;?> to <?php echo ($page-1)*10+10;?> of <?php echo $totalposts;?> 
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:17:34.217

尝试代码打击。您的 $tweeps 在某些情况下可能不是数组或对象，请检查数组是否不为空并且`is_array($tweeps)`.

```
$i = 0;
$total_amount = count($tweeps);
if(is_array($total_amount) && !empty($tweeps))
{
    foreach  ($tweeps as $tweep)
    {
        $i++;
        if ($total_amount == $i)
        {
           $class = 'divrow divrowlast';
        }
        else
        {
           $class = 'divrow';
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:35:51.547

您的问题很可能是查询没有重新调整任何数据。

您正在循环内将新条目填充到`$tweeps`数组中，但如果没有数据，它将永远不会进入该循环。

您没有`$tweeps`在其他任何地方初始化变量，因此如果它不进入循环，`$tweeps`则不会是数组，它将是未定义的。如果您尝试在`foreach()`.

在开始填充变量之前，您需要添加一行来初始化变量：

```
$tweeps = array(); 
```

这将位于您第一次开始填充的循环上方的某个位置`$tweeps`。

希望有帮助。

# sql - SQL根据一列中的最大值从多列中选择不同的行

> ID：11951135
> 
> 赞同：1
> 
> 时间：2012-08-14T11:16:59.300
> 
> 标签：sql, sql-server, sql-server-2005

这是我的 SQL 视图 - 我们称之为 MyView ：

```
ECode SHCode TotalNrShare CountryCode Country
000001 +00010 100 UKI 英国
000001 ABENSO 900 USA 美国
000355 +00012 1000 ESP 西班牙
000355 000010 50 FRA 法国
000042 009999 10 GER 德国
000042 +00012 999 ESP 西班牙
000787 ABENSO 500 USA 美国
000787 000150 500 ITA 意大利
001010 009999 100 GER 德国

```

我想为每个 ECode 返回 TotalNrShare 列中数字最大的单行。

例如，我想从上面的视图返回这些结果：

```
ECode SHCode TotalNrShare CountryCode Country
000001 ABENSO 900 USA 美国
000355 +00012 1000 ESP 西班牙
000042 +00012 999 ESP 西班牙
000787 ABENSO 500 USA 美国
001010 009999 100 GER 德国

```

（请注意，在 ECode 000787 的情况下，其中有两个 SHCode，每个 500，因为它们的数量相同，我们可以只返回第一行而不是两者，对我来说返回哪一行并不重要，因为这种情况很少发生并且我的分析不需要是 100%）

我尝试了各种方法，但似乎无法返回唯一的结果或我需要的其他国家代码/国家信息。

这是我的尝试之一（基于此站点上的其他解决方案，但我做错了）：

```
SELECT tsh.ECode, tsh.SHCode, tsh.TotalNrShare, tsh.CountryCode, tsh.Country
FROM  dbo.MyView AS tsh INNER JOIN
                   (SELECT DISTINCT ECode, MAX(TotalNrShare) AS MaxTotalSH
                    FROM   dbo.MyView
                    GROUP BY ECode) AS groupedtsh ON tsh.ECode = groupedtsh.ECode AND tsh.TotalNrShare = groupedtsh.MaxTotalSH 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:25:08.203

```
WITH
  sequenced_data AS
(
  SELECT
    *,
    ROW_NUMBER() OVER (PARTITION BY ECode ORDER BY TotalNrShare) AS sequence_id
  FROM
    myView
)
SELECT
  *
FROM
  sequenced_data
WHERE
  sequence_id = 1 
```

但是，这应该给出与您的示例查询相同的结果。这只是完成同一件事的不同方法。

但是，当您说出了点问题时，请您详细说明出了什么问题？`TotalNrShare`例如实际上是一个字符串吗？这是否会扰乱您的订购*（等等`MAX()`）*？

**编辑：**

即使上面的代码与您的 SQL Server 不兼容，它也不应该完全崩溃。您应该只收到一条错误消息。例如，尝试执行`Select * By Magic`，它应该只是给出一个错误。我强烈建议您查看和/或重新安装 Management Studio 的安装。

就替代方案而言，您可以这样做...

```
SELECT
  *
FROM
  (SELECT ECode FROM MyView GROUP BY ECode) AS base
CROSS APPLY
  (SELECT TOP 1 * FROM MyView WHERE ECode = base.ECode ORDER BY TotalNrShare DESC) AS data 
```

理想情况下，您可以将`base`子查询替换为已经具有您感兴趣的所有 ECode 的不同列表的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:26:22.740

尝试这个;

```
with cte as( 
 SELECT tsh.ECode, tsh.SHCode, tsh.TotalNrShare, tsh.CountryCode, tsh.Country,
 ROW_NUMBER() over (partition by ECode order by SHCode ) as row_num 
FROM  dbo.MyView)
select * from cte where row_num=1 
```

# objective-c - didSelectRowAtIndexPath UIButton

> ID：11951137
> 
> 赞同：0
> 
> 时间：2012-08-14T11:17:10.330
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

> **可能重复：**
> [检测在 UITableView 中按下了哪个 UIButton](https://stackoverflow.com/questions/1802707/detecting-which-uibutton-was-pressed-in-a-uitableview)

我有一个 UIButton 添加到 UITableViewCell 我希望这个按钮调用我已经知道调用的“didSelectRowAtIndexPath”

```
 [self tableView:self.tableView didSelectRowAtIndexPath:indexpath]; 
```

但是我无法获取索引路径并尝试了的问题

```
[self.Tableview indexPathForRowAtPoint:[self.view convertPoint:[sender center] fromView:self.Tableview]] 
```

方法，但它返回相同的 CGPoint ，有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:22:28.243

首先，你不应该直接给`didSelectRowAtIndexPath`自己打电话。它是一个委托方法，表视图应该调用它。

相反，创建一个单独的方法来做你想做的事情，然后从`didSelectRowAtIndexPath`.

其次，您可以像这样获取索引路径：

```
UIButton* button = (UIButton*) sender;
UITableViewCell *cell = (UITableViewCell*)button.superview.superview;
NSIndexPath *indexPath = [self.tableView indexPathForCell:cell]; 
```

这是可行的，因为如果一切都以标准方式设置，则按钮的超级视图应该是单元格的`contentView`，并且应该是单元格的子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:43:12.930

根据我的说法，最好的方法是给**ROW NUMBER AS TAG VALUE FOR tableViewCell' button**，所以当你点击**按钮**时，它的动作将被调用，你会从中得到**发件人 id** sender_id 只不过是 UIButton 实例，获取它的标签值..

例如：你有 UIButton *testButton;
它的选择器是@selector (testButtonPressed:)

所以当tableViewCell的Button被按下时，它会调用@selector (testButtonPressed:)

```
-(void)testButtonPressed:(id)sender
 {
     NSLog(@"index is %d", sender. tag);
 } 
```

# eclipse - 以 m2eclipse 友好的方式在多个项目中共享过滤后的资源

> ID：11951140
> 
> 赞同：1
> 
> 时间：2012-08-14T11:17:15.363
> 
> 标签：eclipse, maven, jar, m2eclipse, m2e

**精简版：**

寻找建议以某种方式将包含常见版权信息、项目名称、版本、inceptionYear 和 currentYear 的过滤资源文件分发到多个项目，使用从 Eclipse 与 m2e 插件一起使用时不会出错的东西。

**描述：**

现在，我们有一个项目 buildInfo，其中包含一个属性文件，其中包含 ${project .name}、${project.version}、${inceptionYear}、${currentYear} 等内容。

我们有一个 parent.pom 执行以下操作：

*   使用 build-helper-maven-plugin:timestamp-property 目标定义 currentYear 属性
*   使用 dependency:unpack 目标将 buildInfo 属性文件解压缩到 ${project.build.directory}/buildInfo/${project.artifactId}。
*   使用 resources:copy-resources 目标将属性文件复制并过滤到目标/类。

从 parent.pom 继承的所有项目现在都会获得属性文件的副本，该文件使用该项目的特定名称、版本和开始年份进行过滤。

然后在每个项目中使用它来在项目初始化时将版权声明转储到日志中。具体来说，该项目知道其属性文件位于以该项目命名的子文件夹中。

**为什么：**

为了删除需要转储版权和版本信息的每个项目中的属性文件的重复，我们已将属性文件放在其自己的项目中。

除了将它放在每个项目的唯一命名文件夹中之外，我们找不到任何其他方法来查找正确的属性文件。

我们使用大量这些项目构建应用程序（重新），这意味着我们需要在许多不同的 jar 文件中找到这些信息，因此属性文件的名称/路径需要是唯一的。

**问题：**

Eclipse m2e-plugin 不喜欢 dependency:unpack 和 build-helper-maven-plugin:timestamp-property 目标。

当使用 m2e-plugin 将项目签出为 maven 项目时，它会将继承自 parent.pom 的 pom 文件标记为有错误。

*   我们将两个目标的执行移到了打包阶段，这应该是 m2e 无趣阶段，但仍然报错（见：[https](https://docs.sonatype.org/display/M2ECLIPSE/Project+build+lifecycle+mapping) ://docs.sonatype.org/display/M2ECLIPSE/Project+build+lifecycle+mapping ）。
*   我们添加了带有配置的生命周期映射插件以忽略时间戳属性目标，但令人讨厌的是，它仍然在结帐时出错，然后在结帐后消失。
*   我们还添加了忽略 unpack 目标的配置。

通过所有三个更改，它似乎有效。不幸的是，当从 Eclipse 运行项目时，我们不再拥有属性文件......

**问题：**

所有这些都是为了消除重复并避免需要为每个版本提交文件更改。

烦人的是，我们的解决方案仍然要求我们知道应用程序包含哪些项目，以便从每个 jar 中读取信息并显示在 About-box 中。

**问题：**

您如何建议将公共信息添加到应用程序中使用的多个项目，并能够为每个 jar 文件查找它？

而且，它可以用 maven 以 m2e 友好的方式完成吗？

期待建议，
/Henrik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:00:46.453

如[另一个 SO answer](https://stackoverflow.com/a/11464137/944849)中所述，我已将 maven 远程资源插件用于类似目的。我仍然必须在我的 POM 中添加 m2e 生命周期映射的东西，我使用了这个`<execute>`动作。在`mvn`命令行和 Eclipse 中运行良好。

我遇到的唯一问题是，如果我编辑它，有时 Eclipse 似乎会对资源文件持有某种锁定；然后以下`mvn clean`报告“无法删除文件，因为它正在使用中。” 在 Eclipse 中的资源项目上运行“更新项目配置”可以解决此问题。我接受这个痛点，因为至少我可以避免重复，而且我不倾向于经常编辑共享资源。（我也希望我尚未升级到的最新 Eclipse 会有所帮助！）

# android - 在活动中看不到 onResume 方法

> ID：11951141
> 
> 赞同：0
> 
> 时间：2012-08-14T11:17:17.777
> 
> 标签：android, android-activity, tabs, adapter, onresume

我有一个活动，我在其中创建选项卡，每个选项卡对应一个活动

我创建选项卡的活动：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // ActionBar bar = getSupportActionBar();

        // requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);

        Resources res = getResources();
        LocalActivityManager mlam = new LocalActivityManager(this, false);
        final TabHost tabHost = (TabHost) findViewById(android.R.id.tabhost);
        mlam.dispatchCreate(savedInstanceState);
        tabHost.setup(mlam);
        TabHost.TabSpec spec;
        Intent intent;

        // TabHost tabHost = getTabHost();
        // tabHost.setup();

        TabSpec specAll = tabHost.newTabSpec("All");
        specAll.setIndicator("All");
        Intent allIntent = new Intent(this, allActivity.class);
        specAll.setContent(allIntent);

        // specAll.setContent(R.id.allList);

        Log.d("SpecAll", "" + specAll.setContent(allIntent));

        TabSpec specIn = tabHost.newTabSpec("in");
        specIn.setIndicator("In");
        Intent inIntent = new Intent(this, inActivity.class);
        specIn.setContent(inIntent);

        TabSpec specOut = tabHost.newTabSpec("Out");
        specOut.setIndicator("Out");
        Intent outIntent = new Intent(this, outActivity.class);
        specOut.setContent(outIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(specAll); // Adding all tab
        tabHost.addTab(specIn); // Adding in tab
        tabHost.addTab(specOut); // Adding out tab

        tabHost.setOnTabChangedListener(new OnTabChangeListener() {

            @Override
            public void onTabChanged(String tabId) {

                int i = tabHost.getCurrentTab();
                // Log.i("@@@@@@@@ ANN CLICK TAB NUMBER", "------" + i);

                if (i == 0) {
                    Log.d("TAB", "" + i);

                } else if (i == 1) {
                    Log.d("TAB", "" + i);
                } else
                    Log.d("TAB", "" + i);
            }
        });

    } 
```

我需要知道为什么当我调用选项卡的活动时，为什么我不能进入 OnResume() 方法。我只能在 OnCreate 和 onStart 上输入。在 onResume 内的 Log.d 下面的代码中永远不会显示。

一个选项卡的活动：

```
ProgressDialog pDialog;
EfficientAdapter adap;
Databasehandler db;

ArrayList<Message> menuItems = new ArrayList<Message>();
int current_page = 0;
int index = 0;
int limit = 0;

private static final int TYPE_MO = 0;
private static final int TYPE_MT = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.all);

}

@Override
public void onStart() {
    super.onStart();

    db = new Databasehandler(this);
    List<Message> messages;
    messages = db.getMessages(0, 5);
    index += 5;
    limit = limit + 5;

    for (Message mg : messages) {
        // Log.d("mpika",mg.getBody());
        menuItems.add(new Message(mg.getID(), mg.getPhoneNumber(), mg
                .getBody(), mg.getStatus(), mg.getIsMO(), mg.getDate()));

    }

    adap = new EfficientAdapter(this, menuItems);

    ListView lv = (ListView) findViewById(R.id.listall);

    // Creating a button - Load More
    Button btnLoadMore = new Button(this);
    btnLoadMore.setText("Load More");

    // Adding button to listview at footer
    lv.addFooterView(btnLoadMore);

    lv.setAdapter(adap);
    btnLoadMore.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // Starting a new async task
            // CharSequence text = "Ok dude you pressed me ";
            // Toast toast = Toast.makeText(getApplicationContext(), text,
            // Toast.LENGTH_SHORT);
            // toast.show();
            new loadMoreListView().execute();
        }
    });
    db.close();

}

@Override
public void onResume()
{
    super.onResume();
    Log.d("OnResume", "inside onResume");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:31:05.307

在活动`TabActivity`中`onResume()`不会调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:21:32.893

那是不可能的，`onResume()`当所有控件映射后活动获得焦点时将被调用，这是不可避免的。

在 Logcat 中查看，您没有查询某些文本，并且必须在过滤器选项中选择 Verbose 选项![在此处输入图像描述](../Images/66a6aa94e6446b4f4f817c3dfa02f43f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:33:45.883

正如您在 Activity 生命周期中看到的：http: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，onResume()**总是**在 onCreate() 和 onStart() 之后自动调用。

现在，我想我已经找到了与此答案相关的解决方案：

[使用 TabHost 和 LocalActivityManager 时未调用 Android OnResume](https://stackoverflow.com/questions/8660540/android-onresume-not-called-when-using-tabhost-and-localactivitymanager/9430997#9430997)

您必须使用第二个参数 true 初始化 mlam： mlam = new LocalActivityManager(this, true);

# php - 防止用户按下返回、重新加载或关闭按钮

> ID：11951143
> 
> 赞同：-4
> 
> 时间：2012-08-14T11:17:23.973
> 
> 标签：php, javascript, html

如何实现阻止用户使用浏览器的返回、重新加载和关闭按钮的功能？我的意思是即使用户按下重新加载、返回或关闭按钮，这些按钮也不起作用。

我在 stackoverflow 上看到了类似的问题，但没有找到任何相关的答案。

我想实现这一点，因为我的笔记本电脑有一些问题，这些按钮有时会自动工作，这会打断我的工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T11:18:11.087

您不能，您无权在客户端计算机上这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T11:19:20.433

使用 javascript 重定向页面 - 尽管这些对用户来说很烦人。

假设您有一个表单，使用 PHP`header()`重定向到一个页面，该页面包含一个`meta-refresh`类似于 ( `<meta http-equiv="refresh" content="0;URL='http://example.com/'">`) 的 javascript，它强制用户进入一个新页面。当他们回击时，他们将点击该页面并再次被迫前进。

编辑：您*无法*对关闭做任何事情 - 但如果您使用它重定向到不处理表单信息等任何内容的页面，那么用户点击刷新将无关紧要。无论如何，它们都在静态页面上。

编辑 2：我认为有趣的是，当我们使用 PHP`header()`将用户重定向到意外两次处理支付交易时，这被认为是一件好事 - 但是当出现这样的问题时，每个人都认为某人最糟糕正在劫持一个带有可怕广告的网页，或者发送一些废话或其他垃圾邮件（因此是反对票）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:19:05.083

这不能用 javascript 实现。然而，有些浏览器支持一种“信息亭模式”，正是这样做的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T11:34:50.923

您可以使用[jquery-hashchange](https://github.com/cowboy/jquery-hashchange)插件来检测后退按钮单击并向用户显示警报。但是，您无法按照您的建议完全控制浏览器操作。毕竟是他的电脑诶！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T11:49:03.017

这是你做的最大可能的事情..

```
function PreventClosing() {
    if ( /Firefox[\/\s](\d+)/.test(navigator.userAgent) && new Number(RegExp.$1) >= 4) {
        alert("Warning - may lost data.");
    }
    return "Warning - may lost data.";
}
window.onbeforeunload = PreventClosing; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T11:19:31.673

没有办法做到这一点，这是一件好事，因为否则网站可能会做一些非常不道德的事情。

最接近这一点的是使用 onbeforeunload 事件，它会提示用户是否想离开。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T11:19:37.623

简单的答案是你不能。

过去有多种方法可以“制动”后退按钮（例如，通过清除历史记录，但我不确定这些方法是否有效。

但是，您不能直接弄乱重新加载和/或关闭按钮，这是肯定的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-14T11:30:49.390

you can not do this because browser's setting is manged by each browser at client side.and we can change browser settings with our web script.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-14T12:03:27.333

您可以将值保存在会话中，并在他每次重新访问同一页面时重新加载它们。您可以创建某种重定向以重定向到同一页面。

请注意，这样做会很烦人，我们对烦人的网站做了什么=>我们再也不会访问它们了。

# javascript - 如何更改互联网浏览器标题栏 bgColor

> ID：11951147
> 
> 赞同：-4
> 
> 时间：2012-08-14T11:17:36.723
> 
> 标签：javascript, html, titlebar

我使用 html 更改了标题栏背景颜色：但它不起作用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:22:13.647

你不能。

HTML 定义了网站。

标题栏是浏览器应用程序的一部分，而不是网站的一部分。您无法控制应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:25:04.590

除非您的网站使用 IE 9/10 固定，否则您无法设置它：

```
<meta name="msapplication-navbutton-color" content="#FF3300" /> 
```

但它只设置导航按钮的颜色。

有关 MSDN 的更多信息：http: [//msdn.microsoft.com/en-us/library/ie/gg491732 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/gg491732(v=vs.85).aspx)

例如[，将 Cut the Rope](http://www.cuttherope.ie/)固定到您的任务栏并打开它。

# jquery - 如何使用表格排序脚本对跨度列标题进行排序

> ID：11951157
> 
> 赞同：2
> 
> 时间：2012-08-14T11:18:01.343
> 
> 标签：jquery, datatables, tablesorter

我正在尝试对 html 表进行排序，如下所示

![在此处输入图像描述](../Images/95723c0531a691c86576f9d935b448f3.png)

我喜欢在点击表格标题（人员、用户#、唯一 ID、全名、交易编号、标志、进出）时进行排序。

使用表格排序单击 User# 和 UniqueID 列时如何排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:38:15.203

嗯，它仍然不完美，但我在 github 上有一个 tablesorter 的分支，它能够对单击的列下方的列进行排序......尝试“全名”标题单元格以了解我的意思。我需要修复它在“Product”和“In”列中更新 css 的方式。

无论如何，这是一个使用上图信息[的演示。](http://jsfiddle.net/eY8uH/116/)它使用了未记录的`cssChildRow`选项 - 请参阅[此处的原始演示](http://www.pengoworks.com/workshop/jquery/tablesorter/tablesorter.htm)。第二个演示中的代码已添加到 tablesorter 2.0.5。这[是使用原始表格排序器的相同演示](http://jsfiddle.net/eY8uH/117/)......您可以看到单击“全名”列只会对“ID#”列进行排序

# c# - 如果列表只有一项，则无法选择下拉列表中的项目

> ID：11951160
> 
> 赞同：0
> 
> 时间：2012-08-14T11:18:25.303
> 
> 标签：c#, asp.net

我有 2 个下拉列表，第一个下拉列表绑定到第二个下拉列表。如果第二个下拉列表只有一项，则无法选择此项，因此无法触发任何功能。我去了已经上传的任何相关答案......但它没有帮助......这很重要。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:28:42.587

> 无法选择此项，因此无法触发任何功能

无法选择此项目，因为它已被选中。因此，您的`onchange`事件等不会被触发，因为它没有被更改。

您有 2 个选项：

1.  使用[@Kapil](https://stackoverflow.com/a/11951214/370103)的添加“默认”项目的建议，以便可以选择第二个项目。
2.  调用相同的函数`onload`以及`onchange`. 因此，当页面加载时，级联下拉列表也将被填充：

.

```
protected void Page_Load(){
   BindCascadeDropDown();
}

protected void ddl_onchange() {
   BindCascadeDropDown();
}

protected void BindCascadeDropDown(){
   //Bind here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:21:52.987

只需将默认 ListItem 添加到您的第二个下拉列表中。

例如。

```
<asp:ListItem Text="--Select--" Value="-1"></asp:ListItem> 
```

您也可以从 c# 添加：在您从数据源填充下拉列表后编写此内容。

```
DropDownList1.Items.Insert(0, new ListItem("--Select--", "-1")); 
```

# c# - AppDomain.CreateInstanceAndUnwrap 在 Windows 2k3 上使用 STG_E_ABNORMALAPIEXIT 引发异常 FileLoadException

> ID：11951161
> 
> 赞同：0
> 
> 时间：2012-08-14T11:18:25.690
> 
> 标签：c#, asp.net, reflection

在 ASP.NET 应用程序中，我试图从存储在 bin 子文件夹中的不同程序集执行 AppDomain 中的方法。我正在创建 AppDomain 并调用 AppDomain.CreateInstanceAndUnwrap。它在我的计算机和 Windows Server 2K8 上运行良好，但在 Windows Server 2k3 上抛出异常：

> 在 System.AppDomain.CreateInstanceAndUnwrap(String assemblyName, String typeName) 在 System.AppDomain.CreateInstance(String assemblyName, String typeName) 在 System.Activator.CreateInstance(String assemblyName, String typeName) 在 System.Activator.CreateInstance(String assemblyName, String System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark & stackMark, Boolean forIntrospection) ) 在 System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean for Introspection,Boolean suppressSecurityChecks) 在 System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark & stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) 在 System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase , 证据 assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean for Introspection, Boolean suppressSecurityChecks)Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean for Introspection, Boolean suppressSecurityChecks)
> 
> System.IO.FileLoadException：无法加载文件或程序集“MyAssembly”或其依赖项之一。API 调用异常退出。（来自 HRESULT 的异常：0x800300FA (STG_E_ABNORMALAPIEXIT)） System.IO.FileLoadException：无法加载文件或程序集“MyAssembly，版本=2.23.7.23064，Culture=neutral，PublicKeyToken=null”或其依赖项之一。API 调用异常退出。（来自 HRESULT 的异常：0x800300FA (STG_E_ABNORMALAPIEXIT)）

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:07:42.423

我的回答（[在 IIS6 上运行的 ASP.NET 站点拒绝 AppDomain shadow 复制文件访问](https://stackoverflow.com/questions/9390648/appdomain-shadow-copied-file-access-denied-with-asp-net-site-running-on-iis6/12053224#comment16095512_12053224)）：问题的原因是 CachePath 默认值。如果 AppPool 在网络服务下运行，则使用 DefaultUser 临时文件夹位置（我不知道为什么）。但网络服务无权访问该文件夹，这是异常的原因。解决方案是显式设置 CachePath。例如，我们可以使用 ASP.NET AppPool 缓存路径：

```
var domainInfo = new AppDomainSetup
  {
    CachePath = AppDomain.CurrentDomain.SetupInformation.CachePath
    /* ...*/
  }; 
```

# blackberry - 如何处理这个错误？“图形加速错误 - BlackBerry 9900 Simulator”

> ID：11951162
> 
> 赞同：2
> 
> 时间：2012-08-14T11:18:32.420
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

> 图形加速错误 - BlackBerry 9900 Simulator
> 
> 检测到您当前的图形加速设置有问题。图形加速需要具有最新视频驱动程序的 OpenGL 1.x+ 兼容视频卡。请通过导航到视图菜单尝试较低的图形加速设置。
> 
> 模拟器现在将恢复为软件渲染。
> 
> 无法创建纹理 (err=0x501)

我读了[这个](https://stackoverflow.com/questions/11844265/graphics-acceleration-error-in-blackberry-simulator)，但我遇到了同样的问题，这个问题的答案[停止](https://stackoverflow.com/questions/11844265/graphics-acceleration-error-in-blackberry-simulator)了。

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T12:09:54.527

```
fledge /graphics-acceleration=0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:17:59.043

您可以手动编辑 BlackBerry 智能手机模拟器配置文件以禁用图形加速。查看 C:\Users\YOUR_USERNAME\net\rim\fledge-2，您应该会看到一堆 .conf 文件，用于您已安装的模拟器。在文本编辑器中打开 fledge-saved.conf 并更改（3 到 0）：

```
<BodyBuilder::opengl-acceleration>3</BodyBuilder::opengl-acceleration> 
```

至：

```
<BodyBuilder::opengl-acceleration>0</BodyBuilder::opengl-acceleration> 
```

这将禁用图形加速。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T06:25:21.503

如果您没有找到该标签，那么只需将值为 0 的标签粘贴到您的`fledge-settings.conf`文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T13:29:27.003

就像 MSohm 所说，您可以通过 C:\Users\YOUR_USERNAME\net\rim\fledge-2 set 禁用图形加速

```
<BodyBuilder::opengl-acceleration>3</BodyBuilder::opengl-acceleration> 
```

至

```
<BodyBuilder::opengl-acceleration>0</BodyBuilder::opengl-acceleration> 
```

如果在文件中找不到标签，只需添加设置

```
<BodyBuilder::opengl-acceleration>0</BodyBuilder::opengl-acceleration> 
```

前`</fledge-configuration>`

希望这可以帮助。在我的情况下，我找不到设置，我只是添加它，它工作正常。

# python - 如何从谷歌应用引擎数据存储中删除带有 blobkeys 的实体

> ID：11951165
> 
> 赞同：0
> 
> 时间：2012-08-14T11:18:44.673
> 
> 标签：python, google-app-engine, google-cloud-datastore

删除包含 blob 键的 ndb 实体的最佳做法是什么？

我应该把它包在一个try catch中吗？我可以将 for 循环展平成批处理（尽管 ndb 是 asnyc）吗？

这是我迄今为止尝试过的，但我不确定这是否是最好的方法：

```
to_delete = BlogPost.query(ancestor=ndb.Key('BlogPost', int(id))).fetch(1)[0]
for blob_key in to_delete.blob_keys:
    info = blobstore.BlobInfo(bob_key)
    info.delete()
to_delete.key.delete()
delete_success = "successfully deleted"

self.response.out.write(delete_success) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:26:36.577

我认为您应该删除任务中的 blob，而不是与实体本身内联。
您可以创建一个事务，将任务排队并立即删除实体。

删除任务中的 blob 将使您在发生错误时重试，并且在您有很多 blob 的情况下不会延迟删除操作。

# ruby-on-rails - 发现给定缓存键的过期时间

> ID：11951170
> 
> 赞同：0
> 
> 时间：2012-08-14T11:19:00.517
> 
> 标签：ruby-on-rails, caching, ruby-on-rails-3.1, pagination, memcached

使用带有 Memcached 实现的 Rails 缓存，有没有办法发现特定项目计划到期的时间（如果它存在）。

我正在尝试解决此处提到的相同问题，但未解决： [Rails caching: E​​xpiring multiple pages for one action](https://stackoverflow.com/questions/10665712/rails-caching-expiring-multiple-pages-for-one-action)。基本上，涉及分页时的缓存。

# json - 如何使用 Json.NET 或其他序列化程序序列化/反序列化 Json *no named* 数组

> ID：11951178
> 
> 赞同：0
> 
> 时间：2012-08-14T11:19:27.357
> 
> 标签：json, json.net

我正在使用 Json.NET（也尝试过 DataContractJsonSerializer），但我只是不知道在序列化/反序列化时如何处理没有命名的数组？

我的 c# 类看起来像这样：

```
public class Subheading
{
    public IList<Column> columns { get; set; }

    public Subheading()
    {
        Columns = new List<Column>();
    }

}

public class Column
{
    public IList<Link> links { get; set; }

    public Column()
    {
        Links = new List<Link>();
    }

}

public class Link
{
    public string label { get; set; }
    public string url { get; set; }

} 
```

生成的 Json 是这样的：

```
{
          "columns": [
            {
              "**links**": [
                {
                  "label": "New Releases",
                  "url": "/usa/collections/sun/newreleases"
                },
               ...
              ]
            },
           ]
    ...
} 
```

我该怎么做才能松开“链接”以使其像这样？：

```
{
      "columns": [
          [
            {
              "label": "New Releases",
              "url": "/usa/collections/sun/newreleases"
            },
           ...
          ],
          ...
      ]
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:02:11.967

I think the only solution is a custom `JsonConverter`. Your code should look like this:

```
class SubheadingJsonConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        // tell Newtonsoft that this class can only convert Subheading objects
        return objectType == typeof(Subheading);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        // you expect an array in your JSON, so deserialize a list and
        // create a Subheading using the deserialized result
        var columns = serializer.Deserialize<List<Column>>(reader);

        return new Subheading { column = columns };
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        // when serializing "value", just serialize its columns
        serializer.Serialize(writer, ((Subheading) value).columns);
    }
} 
```

Then you have to decorate your `Subheading` class with a `JsonConverterAttribute`:

```
[JsonConverter(typeof(SubheadingJsonConverter)]
public class Subheading
{
    // ...
} 
```

# node.js - 在发送到浏览器之前过滤 node.js 响应（标题和正文）？

> ID：11951184
> 
> 赞同：3
> 
> 时间：2012-08-14T11:20:02.113
> 
> 标签：node.js

[我正在寻找构建在node-http-proxy](https://github.com/nodejitsu/node-http-proxy)之上但添加缓存支持的 NPM 模块，如 squid/varnish，但在 node.js 中。

在我的脑海中，它会像这样工作：

*   我的 NPM 模块不依赖于 http-proxy，只会“包装”任何给`http.createServer`. 这个想法是你将它与 http-proxy 结合起来，但它并不假设。
*   它将查看，`req`如果它有一个缓存的版本，它会提供服务。
*   如果没有，它将委托给原始回调，检查响应以查看是否可以缓存。
*   发生缓存，并返回实际响应。

逻辑非常简单，但我对 node.js 的内部结构和概念不是很熟悉，我什至在努力弄清楚如何获取响应的内容。

给定这个例子：

```
var http = require('http');

http.createServer(function(req, res) {
  res.writeHead(200, { 'Content-Type': 'text/plain; charset=utf-8' })
  res.write('Hello World!');
  res.end();
}).listen(80); 
```

我如何从该响应对象中取回数据？理想情况下，我只是“观察”响应并在写入数据时对其进行处理，而不是回顾性地将数据从中提取出来。

我试着做：

```
res.on('data', function(chunk) {
  console.log('Data written: ' + chunk);
}); 
```

但这似乎永远不会被调用。

然后我尝试了：

```
res.connection.on('data', function(chunk) {
  console.log('Data written: ' + chunk);
}); 
```

但这只是转储了请求数据，而不是响应数据。假设您对响应是如何生成的一无所知，那么过滤响应数据的正确方法是什么？

如果我表达我对 node 的完全缺乏理解并且应该阅读某种“node.js 概念的新手指南”，请指导我。我不是懒惰，我只是迷路了。

EDIT | Looks like I can method-swizzle `write()` and `writeHead()` on the response to intercept the invocations to them, but this feels wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:05:28.013

Looks like redifinition write and writeHead methods of [ServerResponse](https://github.com/joyent/node/blob/master/lib/http.js) the only way to do that. Node API has no native events to handle outgoing data.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:06:56.200

The easiest and most efficient way is replacing those functions with your custom function. When creating a http server by `myhttp.createServer` you call `http.createServer` and intercept the `function(req, res)` callback. You replace `res` with your wrapper calling the original `res` object. But you can add logic for logging `res.writeHead` calls.

# jquery - 如何在 Jquery Mobile 按钮中添加图像？

> ID：11951189
> 
> 赞同：0
> 
> 时间：2012-08-14T11:20:25.743
> 
> 标签：jquery, html, jquery-mobile

我的html5代码是

```
<div class="renew">
     <button><img src="images/btn.png"/>Renew Your Policy</button>
</div> 
```

我想使用 jquery 移动库在按钮的左侧添加此图像，但图像未显示。谁能帮我完成此任务？先感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:25:39.737

```
$('.renew button').before($('.renew img'))​; 
```

**[演示](http://jsfiddle.net/wC9VS/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:27:46.710

[检查此页面](http://jquerymobile.com/demos/1.1.1/docs/buttons/buttons-icons.html)的“自定义图标”部分

# visual-c++ - 我们可以导出或导入 Visual C++ 6.0 目录设置吗？

> ID：11951190
> 
> 赞同：0
> 
> 时间：2012-08-14T11:20:29.077
> 
> 标签：visual-c++, ide, visual-c++-6

![](../Images/a6b25acc7302ed2d177404505a085306.png)

我的项目在 Visual C++ 6.0 设置中有很多设置：工具 > 选项 > 目录

包含/链接/源文件

有没有办法将这些设置保存到文件中，或者它在 VC 6.0 中的什么位置？

我想在另一台计算机上使用此设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:51:46.060

它们存储在注册表中：

```
[HKEY_CURRENT_USER\Software\Microsoft\DevStudio\6.0\Build System\Components\Platforms\Win32 (x86)\Directories] 
```

因此，如果需要，您可以使用 regedit 导出注册表文件。

这不是您所要求的，但在大多数情况下，您最好将目录信息存储为项目设置（在 .dsp 文件中）。它使处理多个项目（和多个版本）变得更加容易。

# sql - HSQLDB 自动截断

> ID：11951192
> 
> 赞同：1
> 
> 时间：2012-08-14T11:20:34.630
> 
> 标签：sql, hsqldb

是否可以在超过限制时截断 varchar 的连接字符串中创建触发器或参数？

我试图在插入/更新之前创建一个触发器，但我继续收到以下异常：

java.io.IOException：java.sql.BatchUpdateException：数据异常：字符串数据，在 org.apache.gora.sql.store.SqlStore.flush(SqlStore.java:340) 在 org.apache.gora.sql 处右截断。 store.SqlStore.close(SqlStore.java:185)

gora 是因为我正在使用 nutch。

谢谢

编辑1：

触发器是： CREATE TRIGGER typeconversionUpdate BEFORE UPDATE ON WEBPAGE REFERENCING NEW AS newrow FOR EACH ROW SET newrow.TEXT=''

和创建语句：

```
CREATE TABLE WEBPAGE (id VARCHAR(512) PRIMARY KEY,headers BLOB,text VARCHAR(32000),status INTEGER,markers BLOB,parseStatus BLOB,modifiedTime BIGINT,score FLOAT,typ VARCHAR(32),baseUrl VARCHAR(512),content BLOB(65536),title VARCHAR(512),reprUrl VARCHAR(512),fetchInterval INTEGER,prevFetchTime BIGINT,inlinks BLOB,prevSignature BLOB,outlinks BLOB,fetchTime BIGINT,retriesSinceFetch INTEGER,protocolStatus BLOB,signature BLOB,metadata BLOB) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:38:35.387

一种可能的解决方案是增加相关列的最大大小：

```
ALTER TABLE WEBPAGE ALTER COLUMN TEXT SET DATA TYPE VARCHAR(1000000) 
```

触发器解决方案不能与 2.2.9 及以下版本的 HSQLDB 一起使用，但可能在下一个版本中允许使用。

# jpa - EAR 中的 EJB3 代码看不到 EJB 客户端 jar（在 /lib 中）中定义的 JPA 实体（抛出“java.lang.IllegalArgumentException: Not an entity:”）

> ID：11951193
> 
> 赞同：0
> 
> 时间：2012-08-14T11:20:35.613
> 
> 标签：jpa, jboss, ejb-3.0

我已将我的 EJB3 代码分解为：

(i) 用于构建“ [EJB 客户端 jar](https://stackoverflow.com/questions/3484063/using-the-client-jar-in-ejb-3-and-design-patterns) ”的业务逻辑接口和 POJO 实体 bean，以及

(ii) 实现业务接口并使用数据库执行 JPA 的业务逻辑代码。

部署的平台是带有 Hibernate JPA 的 JBoss AS7.1。

这个想法是*EJB 客户端 jar*是接口，它也将与访问业务逻辑代码的一个或多个*战争**一起部署。*我将**EJB3**业务逻辑代码部署为内部没有**WAR的****EAR**（**WAR**是独立部署的）。因此，顶层业务逻辑**EAR**的结构如下：

 *******```
.
├── lib
│   ├── commons-lang3-3.1.jar
│   └── Users-client.jar
├── META-INF
│   ├── application.xml
│   └── MANIFEST.MF
└── Users-ejb.jar 
```

在我上面的例子中，**Users-client.jar**是*EJB 客户端 jar*（接口），而**Users-ejb.jar**是业务逻辑实现和 JPA 代码。

业务逻辑实现代码（**Users-ejb.jar**）的结构为：

```
├── base
│   └── AbstractFacade.class
├── facades
│   ├── PrivateUserDataFacade.class
│   └── UserFacade.class
├── META-INF
│   ├── MANIFEST.MF
│   ├── persistence.xml
│   └── postgres-ds.xml
└── utils
    └── JPUtil.class 
```

其中**persistence.xml**包含以下标签：

```
 <exclude-unlisted-classes>false</exclude-unlisted-classes> 
```

但是，通过上述设置，**Users-ejb.jar**中的代码无法识别将**Users-client.jar**定义为实体的 @Entity beans。这不是代码编译和部署时*找不到类*的问题，而是在运行时引发“非实体”异常。

因此，例如**UserFacade.class**类中的以下测试方法：

```
public String boo(String name)
{                                                                   
    javax.persistence.criteria.CriteriaQuery cq =
      getEntityManager().getCriteriaBuilder().createQuery();
    cq.select(cq.from(User.class)); // <-- exception thrown
    List<User> all = getEntityManager().createQuery(cq).getResultList();
    return "boo"+name;
} 
```

在标有跟踪的地方失败：

```
Caused by: java.lang.IllegalArgumentException: Not an entity: class entities.User
at org.hibernate.ejb.metamodel.MetamodelImpl.entity(MetamodelImpl.java:158)
[hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.criteria.QueryStructure.from(QueryStructure.java:136)
[hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.criteria.CriteriaQueryImpl.from(CriteriaQueryImpl.java:177)
[hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at facades.UserFacade.boo(UserFacade.java:46) [Users-ejb.jar:] 
```

我应该怎么做才能确保在 lib/Users-client.jar 中找到的类被我的业务逻辑代码识别为实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:56:23.430

定义实体`peristence.xml`

```
 <persistence-unit name="YourUnit">
     <class>com.package.User</class>
     <class>com.package.AnotherEntity</class>
... 
```*******

# c - opengl顶点缓冲区

> ID：11951194
> 
> 赞同：0
> 
> 时间：2012-08-14T11:20:37.520
> 
> 标签：c, opengl, graphics, vertex-buffer

使用 VertexBuffers 的有效方法是什么？我正在绘制一个简单的立方体[（链接到代码）](http://pastie.org/4473143)。理想情况下，我应该将顶点加载到 gpu 上一次，然后我不必每次都将它们复制到 gpu（这是我在 renderScene 中所做的，第 115 行）。我怎么做？这里也提供了代码（它来自一个教程）：

```
//
// This code was created by Jeff Molofee '99 (ported to Linux/GLUT by Richard Campbell '99)
//
// If you've found this code useful, please let me know.
//
// Visit me at www.demonews.com/hosted/nehe 
// (email Richard Campbell at ulmont@bellsouth.net)
//
#include"stdafx.h"
//#include<glload\gl_3_1.h>
#include<Windows.h>
#include<GL/glew.h>
#include <GL/glut.h>    // Header File For The GLUT Library 
#include <GL/gl.h>  // Header File For The OpenGL32 Library
#include <GL/glu.h> // Header File For The GLu32 Library
#include<GL/freeglut_ext.h>

//#include <unistd.h>     // Header File For sleeping.

/* ASCII code for the escape key. */
#include <stdlib.h>
#include <GL/glut.h>

// Location/Normals
#define X_POS 0
#define Y_POS 1
#define Z_POS 2

// Texture Coordinates
#define U_POS 0
#define V_POS 1

// Colours
#define R_POS 0
#define G_POS 1
#define B_POS 2
#define A_POS 3

// Vertex structure
typedef struct
{
    GLfloat location[3];
    GLfloat tex[2];
    GLfloat normal[3];
    GLfloat colour[4];
    GLubyte padding[16];
} Vertex;

// A helper macro to get a position
#define BUFFER_OFFSET(i) ((char *)NULL + (i))
#define INC_SCALE (1.00001)
// GLUT functions
void renderScene();
void changeSize(int w, int h);
void processNormalKeys(unsigned char key, int x, int y);

// VBO functions
void initVBO();

// Other functions
void buildCube();

// Globals - typically these would be in classes, 
// but in this simple example, I'm using globals
Vertex verts[24]; // We're making a cube, 6 faces * 4 verticies per face
GLubyte index[36]; // 2 Triangles per face (possible to use quads, but they're being phased out of OpenGL3, so we're using triangles instead)
GLuint vboID; // Vertex Buffer Object ID
GLuint indexVBOID; // Index Buffer Object ID
float angle = 0.0; // Just for display rotation

int main (int argc, char * argv[]) 
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_SINGLE | GLUT_RGBA);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(320, 320);
    glutCreateWindow("VBO Example");
    //glutFullScreen();
    glutDisplayFunc(renderScene);
    glutIdleFunc(renderScene);
    glutReshapeFunc(changeSize);
    glutKeyboardFunc(processNormalKeys);
    glEnable(GL_DEPTH_TEST);
    buildCube();
    glewInit();
    initVBO();  
    glMatrixMode(GL_PROJECTION);
    gluLookAt(0.0, 0.0, 5.0,
              0.0, 0.0, -1.0,
              0.0, 1.0, 0.0);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glutMainLoop();
    return 0;
}

void renderScene()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    initVBO();
    glPushMatrix();
    glRotatef(angle, 1.0, 1.0, 1.0);

    // Bind our buffers much like we would for texturing
    glBindBuffer(GL_ARRAY_BUFFER, vboID);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexVBOID);
    void* b= glMapBuffer(GL_ARRAY_BUFFER, GL_READ_WRITE);
    for(int i=0;i<24;i++)
    {
        Vertex* v= &verts[i];
        v->location[X_POS]*=INC_SCALE;
        v->location[Y_POS]*=INC_SCALE;
        v->location[Z_POS]*=INC_SCALE;
    }
    memcpy(b, verts, 24*sizeof(Vertex));
    glUnmapBuffer(GL_ARRAY_BUFFER);
    // Set the state of what we are drawing (I don't think order matters here, but I like to do it in the same 
    // order I set the pointers
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnableClientState(GL_COLOR_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    // Resetup our pointers.  This doesn't reinitialise any data, only how we walk through it
    glTexCoordPointer(2, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(12));
    glNormalPointer(GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(20));
    glColorPointer(4, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(32));
    glVertexPointer(3, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(0));

    // Actually do our drawing, parameters are Primative (Triangles, Quads, Triangle Fans etc), Elements to 
    // draw, Type of each element, Start Offset
    glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_BYTE, BUFFER_OFFSET(0));

    // Disable our client state back to normal drawing
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisableClientState(GL_COLOR_ARRAY);
    glDisableClientState(GL_NORMAL_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY);

    glPopMatrix();
    glutSwapBuffers();
    angle += 0.01;
}

void changeSize(int w, int h)
{
    if (h == 0) // Prevent divide by zero
        h = 1;

    float ratio = 1.0 * w / h;
    glLoadIdentity();
    glMatrixMode(GL_PROJECTION);

    glViewport(0, 0, w, h);

    gluPerspective(45, ratio, 1, 1000);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0.0, 0.0, 5.0,
              0.0, 0.0, -1.0,
              0.0, 1.0, 0.0);

}

void processNormalKeys(unsigned char key, int x, int y)
{
    if (key == 27)
        exit(0);
}

void initVBO()
{
    glGenBuffers(1, &vboID); // Create the buffer ID, this is basically the same as generating texture ID's
    glBindBuffer(GL_ARRAY_BUFFER, vboID); // Bind the buffer (vertex array data)

    // Allocate space.  We could pass the mesh in here (where the NULL is), but it's actually faster to do it as a 
    // seperate step.  We also define it as GL_STATIC_DRAW which means we set the data once, and never 
    // update it.  This is not a strict rule code wise, but gives hints to the driver as to where to store the data 
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertex) * 24, NULL, GL_STREAM_DRAW);
    //glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(Vertex) * 24, verts);

    // Set the pointers to our data.  Except for the normal value (which always has a size of 3), we must pass 
    // the size of the individual component.  ie. A vertex has 3 points (x, y, z), texture coordinates have 2 (u, v) etc.
    // Basically the arguments are (ignore the first one for the normal pointer), Size (many components to 
    // read), Type (what data type is it), Stride (how far to move forward - in bytes - per vertex) and Offset 
    // (where in the buffer to start reading the data - in bytes)

    // Make sure you put glVertexPointer at the end as there is a lot of work that goes on behind the scenes
    // with it, and if it's set at the start, it has to do all that work for each gl*Pointer call, rather than once at
    // the end. 
    glTexCoordPointer(2, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(12));
    glNormalPointer(GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(20));
    glColorPointer(4, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(32));
    glVertexPointer(3, GL_FLOAT, sizeof(Vertex), BUFFER_OFFSET(0));

    // When we get here, all the vertex data is effectively on the card

    glGenBuffers(1, &indexVBOID); // Generate buffer
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexVBOID); // Bind the element array buffer
    // Upload the index array, this can be done the same way as above (with NULL as the data, then a 
    // glBufferSubData call, but doing it all at once for convenience)  
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, 36 * sizeof(GLubyte), index, GL_STATIC_DRAW);
}

void buildCube()
{
    // Ugh, ugly code this

    // Top

    verts[0].location[X_POS]    = 1;    verts[0].location[Y_POS]    = 1;    verts[0].location[Z_POS]    = -1;
    verts[0].normal[X_POS]      = 0;    verts[0].normal[Y_POS]      = 1;    verts[0].normal[Z_POS]      = 0;
    verts[0].tex[U_POS]         = 0;    verts[0].tex[V_POS]         = 0; 

    verts[1].location[X_POS]    = -1;   verts[1].location[Y_POS]    = 1;    verts[1].location[Z_POS]    = -1;
    verts[1].normal[X_POS]      = 0;    verts[1].normal[Y_POS]      = 1;    verts[1].normal[Z_POS]      = 0;
    verts[1].tex[U_POS]         = 0;    verts[1].tex[V_POS]         = 1; 

    verts[2].location[X_POS]    = -1;   verts[2].location[Y_POS]    = 1;    verts[2].location[Z_POS]    = 1;
    verts[2].normal[X_POS]      = 0;    verts[2].normal[Y_POS]      = 1;    verts[2].normal[Z_POS]      = 0;
    verts[2].tex[U_POS]         = 1;    verts[2].tex[V_POS]         = 1; 

    verts[3].location[X_POS]    = 1;    verts[3].location[Y_POS]    = 1;    verts[3].location[Z_POS]    = 1;
    verts[3].normal[X_POS]      = 0;    verts[3].normal[Y_POS]      = 1;    verts[3].normal[Z_POS]      = 0;
    verts[3].tex[U_POS]         = 1;    verts[3].tex[V_POS]         = 0;

    // Bottom
    verts[4].location[X_POS]    = 1;    verts[4].location[Y_POS]    = -1;   verts[4].location[Z_POS]    = 1;
    verts[4].normal[X_POS]      = 0;    verts[4].normal[Y_POS]      = -1;   verts[4].normal[Z_POS]      = 0;
    verts[4].tex[U_POS]         = 0;    verts[4].tex[V_POS]         = 0; 

    verts[5].location[X_POS]    = -1;   verts[5].location[Y_POS]    = -1;   verts[5].location[Z_POS]    = 1;
    verts[5].normal[X_POS]      = 0;    verts[5].normal[Y_POS]      = -1;   verts[5].normal[Z_POS]      = 0;
    verts[5].tex[U_POS]         = 0;    verts[5].tex[V_POS]         = 1; 

    verts[6].location[X_POS]    = -1;   verts[6].location[Y_POS]    = -1;   verts[6].location[Z_POS]    = -1;
    verts[6].normal[X_POS]      = 0;    verts[6].normal[Y_POS]      = -1;   verts[6].normal[Z_POS]      = 0;
    verts[6].tex[U_POS]         = 1;    verts[6].tex[V_POS]         = 1; 

    verts[7].location[X_POS]    = 1;    verts[7].location[Y_POS]    = -1;   verts[7].location[Z_POS]    = -1;
    verts[7].normal[X_POS]      = 0;    verts[7].normal[Y_POS]      = -1;   verts[7].normal[Z_POS]      = 0;
    verts[7].tex[U_POS]         = 1;    verts[7].tex[V_POS]         = 0;

    // Front
    verts[8].location[X_POS]    = 1;    verts[8].location[Y_POS]    = 1;    verts[8].location[Z_POS]    = 1;
    verts[8].normal[X_POS]      = 0;    verts[8].normal[Y_POS]      = 0;    verts[8].normal[Z_POS]      = 1;
    verts[8].tex[U_POS]         = 0;    verts[8].tex[V_POS]         = 0; 

    verts[9].location[X_POS]    = -1;   verts[9].location[Y_POS]    = 1;    verts[9].location[Z_POS]    = 1;
    verts[9].normal[X_POS]      = 0;    verts[9].normal[Y_POS]      = 0;    verts[9].normal[Z_POS]      = 1;
    verts[9].tex[U_POS]         = 0;    verts[9].tex[V_POS]         = 1; 

    verts[10].location[X_POS]   = -1;   verts[10].location[Y_POS]   = -1;   verts[10].location[Z_POS]   = 1;
    verts[10].normal[X_POS]     = 0;    verts[10].normal[Y_POS]     = 0;    verts[10].normal[Z_POS]     = 1;
    verts[10].tex[U_POS]        = 1;    verts[10].tex[V_POS]        = 1; 

    verts[11].location[X_POS]   = 1;    verts[11].location[Y_POS]   = -1;   verts[11].location[Z_POS]   = 1;
    verts[11].normal[X_POS]     = 0;    verts[11].normal[Y_POS]     = 0;    verts[11].normal[Z_POS]     = 1;
    verts[11].tex[U_POS]        = 1;    verts[11].tex[V_POS]        = 0;

    // Back
    verts[12].location[X_POS]   = 1;    verts[12].location[Y_POS]   = -1;   verts[12].location[Z_POS]   = -1;
    verts[12].normal[X_POS]     = 0;    verts[12].normal[Y_POS]     = 0;    verts[12].normal[Z_POS]     = -1;
    verts[12].tex[U_POS]        = 0;    verts[12].tex[V_POS]        = 0; 

    verts[13].location[X_POS]   = -1;   verts[13].location[Y_POS]   = -1;   verts[13].location[Z_POS]   = -1;
    verts[13].normal[X_POS]     = 0;    verts[13].normal[Y_POS]     = 0;    verts[13].normal[Z_POS]     = -1;
    verts[13].tex[U_POS]        = 0;    verts[13].tex[V_POS]        = 1; 

    verts[14].location[X_POS]   = -1;   verts[14].location[Y_POS]   = 1;    verts[14].location[Z_POS]   = -1;
    verts[14].normal[X_POS]     = 0;    verts[14].normal[Y_POS]     = 0;    verts[14].normal[Z_POS]     = -1;
    verts[14].tex[U_POS]        = 1;    verts[14].tex[V_POS]        = 1; 

    verts[15].location[X_POS]   = 1;    verts[15].location[Y_POS]   = 1;    verts[15].location[Z_POS]   = -1;
    verts[15].normal[X_POS]     = 0;    verts[15].normal[Y_POS]     = 0;    verts[15].normal[Z_POS]     = -1;
    verts[15].tex[U_POS]        = 1;    verts[15].tex[V_POS]        = 0;

    // Left
    verts[16].location[X_POS]   = -1;   verts[16].location[Y_POS]   = 1;    verts[16].location[Z_POS]   = 1;
    verts[16].normal[X_POS]     = -1;   verts[16].normal[Y_POS]     = 0;    verts[16].normal[Z_POS]     = 0;
    verts[16].tex[U_POS]        = 0;    verts[16].tex[V_POS]        = 0; 

    verts[17].location[X_POS]   = -1;   verts[17].location[Y_POS]   = 1;    verts[17].location[Z_POS]   = -1;
    verts[17].normal[X_POS]     = -1;   verts[17].normal[Y_POS]     = 0;    verts[17].normal[Z_POS]     = 0;
    verts[17].tex[U_POS]        = 0;    verts[17].tex[V_POS]        = 1; 

    verts[18].location[X_POS]   = -1;   verts[18].location[Y_POS]   = -1;   verts[18].location[Z_POS]   = -1;
    verts[18].normal[X_POS]     = -1;   verts[18].normal[Y_POS]     = 0;    verts[18].normal[Z_POS]     = 0;
    verts[18].tex[U_POS]        = 1;    verts[18].tex[V_POS]        = 1; 

    verts[19].location[X_POS]   = -1;   verts[19].location[Y_POS]   = -1;   verts[19].location[Z_POS]   = 1;
    verts[19].normal[X_POS]     = -1;   verts[19].normal[Y_POS]     = 0;    verts[19].normal[Z_POS]     = 0;
    verts[19].tex[U_POS]        = 1;    verts[19].tex[V_POS]        = 0;

    // Right
    verts[20].location[X_POS]   = 1;    verts[20].location[Y_POS]   = 1;    verts[20].location[Z_POS]   = -1;
    verts[20].normal[X_POS]     = 1;    verts[20].normal[Y_POS]     = 0;    verts[20].normal[Z_POS]     = 0;
    verts[20].tex[U_POS]        = 0;    verts[20].tex[V_POS]        = 0; 

    verts[21].location[X_POS]   = 1;    verts[21].location[Y_POS]   = 1;    verts[21].location[Z_POS]   = 1;
    verts[21].normal[X_POS]     = 1;    verts[21].normal[Y_POS]     = 0;    verts[21].normal[Z_POS]     = 0;
    verts[21].tex[U_POS]        = 0;    verts[21].tex[V_POS]        = 1; 

    verts[22].location[X_POS]   = 1;    verts[22].location[Y_POS]   = -1;   verts[22].location[Z_POS]   = 1;
    verts[22].normal[X_POS]     = 1;    verts[22].normal[Y_POS]     = 0;    verts[22].normal[Z_POS]     = 0;
    verts[22].tex[U_POS]        = 1;    verts[22].tex[V_POS]        = 1; 

    verts[23].location[X_POS]   = 1;    verts[23].location[Y_POS]   = -1;   verts[23].location[Z_POS]   = -1;
    verts[23].normal[X_POS]     = 1;    verts[23].normal[Y_POS]     = 0;    verts[23].normal[Z_POS]     = 0;
    verts[23].tex[U_POS]        = 1;    verts[23].tex[V_POS]        = 0;

    // Colours
    for (int i = 0; i < 24; i++)
    {
        verts[i].colour[R_POS] = 1.0;
        verts[i].colour[G_POS] = 1.0;
    //  verts[i].colour[B_POS] = 1.0;
        verts[i].colour[A_POS] = 1.0;
    }

    // Index Array (define our triangles)
    // A Face looks like (numbers are the array index number of the vertex)
    // 1      2
    // +------+
    // |      |
    // |      |
    // +------+
    // 0      3
    index[0] = 0;   index[1] = 1;   index[2] = 2;
    index[3] = 2;   index[4] = 3;   index[5] = 0;

    index[6] = 4;   index[7] = 5;   index[8] = 6;
    index[9] = 6;   index[10] = 7;  index[11] = 4;

    index[12] = 8;  index[13] = 9;  index[14] = 10;
    index[15] = 10; index[16] = 11; index[17] = 8;

    index[18] = 12; index[19] = 13; index[20] = 14;
    index[21] = 14; index[22] = 15; index[23] = 12;

    index[24] = 16; index[25] = 17; index[26] = 18;
    index[27] = 18; index[28] = 19; index[29] = 16;

    index[30] = 20; index[31] = 21; index[32] = 22;
    index[33] = 22; index[34] = 23; index[35] = 20;

} 
```

# python - 展平嵌套列表

> ID：11951196
> 
> 赞同：3
> 
> 时间：2012-08-14T11:20:53.393
> 
> 标签：python, list

我有数百行如下所示的数据：

```
[[u' 16 '], [u'1x23'], [u'Mr Test', u' (5)'], [u'John Smith'], [u'54.5'], [], [u'10%'], [u'40%'], [u'$26,503']] 
```

有些值是嵌套的，有些也是空的。

我正在尝试将它按摩成这样：

```
['16', '1x23', 'Mr Test', '(5)', 'John Smith', '54.5', '', '10%', '40%', '$26,503'] 
```

我尝试了一些在这里找到的想法，比如展平，包括以下例程：

```
def traverse(o, tree_types=(list, tuple)):
    if isinstance(o, tree_types):
        for value in o:
            for subvalue in traverse(value):
                yield subvalue
    else:
        yield o 
```

这适用于我已经解析过的一些表，但仅在没有空值时才有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:42:07.163

试试这个，

```
sum((item or [""] for item in a), []) 
```

很奇怪吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:37:49.760

这可以解决问题（即使是空值）：

```
import operator
def flatten(a):
    return reduce(operator.add, a) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:42:15.603

如果你唯一的问题是空值，你可以先在里面检查它`if`：

```
def traverse(o, tree_types=(list, tuple)):
    if isinstance(o, tree_types):
        if len(o) == 0:
            yield ''
        for value in o:
            for subvalue in traverse(value):
                yield subvalue
    else:
        yield o 
```

# c - 在C中的库外初始化.lib的函数指针

> ID：11951201
> 
> 赞同：0
> 
> 时间：2012-08-14T11:21:07.233
> 
> 标签：c, function, pointers

我认为这是一个微不足道的问题，但我永远无法让它发挥作用！

我通过 .lib 内的函数指针进行了函数调用，并将 .lib 附加到在库外部设置函数指针的应用程序。以下是代码片段

库：

```
void (*PopulateBuffer)(byte *NALBuffer,unsigned int *readbytes); // The Declaration

PopulateBuffer(NALBuffer,&readbytes); // The function Call 
```

应用 ：

```
extern void (*PopulateBuffer)(char *NALBuffer,unsigned int *readbytes);

void UpdateNALBuff(char *Buffer,unsigned int *readbytes)

{

    //Buffer content is updated
    //readbytes is updated

}

main()

{

    PopulateBuffer= &UpdateNALBuff;

        LibMain(); // this is the main call in which the function pointer is called
} 
```

我这样做对吗？？？因为当函数调用在库中接近时，它会抛出以下错误：

> DecoderTestApp.exe 中 0x00536e88 处的未处理异常：0xC0000005：访问冲突读取位置 0x7ffef045。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:23:23.627

看起来没问题，但是我怀疑您读入的缓冲区太小，这就是您遇到访问冲突的原因。

```
void UpdateNALBuff(char *Buffer,unsigned int *readbytes)
{
   //put values in Buffer but no more than *readbytes passed in,
   //finally update *readbytes with actual number of bytes read.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:41:17.823

一般为了处理函数指针，你可以通过以下方式进行：

```
typedef void (*PopulateBuffer)(byte *NALBuffer,unsigned int *readbytes); //This should be exposed from the library 
```

在库中创建一个指针变量，用于存储函数指针

```
PopulateBuffer PpBuffFunc = NULL; 
```

从库中提供一个函数来设置函数

```
void setPopulateBufferFuncPointer(PopulateBuffer func)
{
    PpBuffFunc = func;
} 
```

现在从您的应用程序中调用此函数

```
setPopulateBufferFuncPointer(UpdateNALBuff); 
```

在适当位置的库内，`PpBuffFunc`通过传递适当的参数来调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:15:10.820

知道了！:)

问题是，我在另一个文件中调用函数指针而没有提供相同的原型，

因此它将“返回类型”作为 INT，并且由于该函数的返回类型为 void，因此引发了错误！..这是一个愚蠢的错误！谢谢大家！:)

# c# - 如何保护 app.config，而它打算在多台机器上使用？

> ID：11951202
> 
> 赞同：2
> 
> 时间：2012-08-14T11:21:07.843
> 
> 标签：c#, app-config

我想创建一个连接到中央远程数据库的应用程序，该应用程序旨在提供给多个用户在本地网络中的计算机上使用。我们面临的主要挑战是向用户隐藏连接字符串，以防止潜在的恶意使用。
到目前为止，我发现我必须使用[那里](http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.aspx)`RsaProtectedConfigurationProvider`描述的类来加密和解密它。但我不知道如何将所需的 RSA 密钥提供给客户端？以及这一切如何防止破解者找到密钥并使用它来解密？ `app.config``app.config`

谢谢大家 ;)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:25:00.380

如果您阅读了[如何：使用 MSDN 上的 RSA 加密 ASP.NET 2.0 中的配置部分的](http://msdn.microsoft.com/en-us/library/ff650304.aspx)[Web 场场景](http://msdn.microsoft.com/en-us/library/ff650304.aspx#paght000006_webfarmscenarios)，您将了解如何创建密钥并从中提取私钥和公钥以安装公共键在不同的机器上。

概括：

1.  创建自定义键：

    ```
    aspnet_regiis -pc "CustomKeys" -exp 
    ```

2.  在配置文件中添加一个`configProtectedData`部分，以使用自定义键

3.  加密想要的部分

4.  导出密钥：

    ```
    aspnet_regiis -px "CustomKeys" "C:\CustomKeys.xml" -pri 
    ```

5.  复制并导入其他机器中的密钥：

    ```
    aspnet_regiis -pi "CustomKeys" "C:\CustomKeys.xml" 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T11:27:41.220

> 我们面临的主要挑战是向用户隐藏连接字符串

您不能让用户拥有直接连接到数据库的客户端应用程序，并期望能够隐藏连接字符串。这是做不到的。

如果连接字符串必须保密，请将其存储在服务器上并让客户端应用程序连接到 Web 服务，而不是直接连接到数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-18T03:04:56.060

这些天我遇到了同样的问题并找到了另一个解决方案，也许不是很优雅，但它对我有用。我使用 AES 算法用我定义的密钥加密连接字符串，并替换了配置文件中的结果字符串。然后我在我的应用程序中添加了一个具有相同密钥的解密函数，并在 get connectionstring 方法中使用它，如下所示：

```
public string myConnectionString {
    get {
        return ((new Cypher().Decrypt(this["myConnectionString"].ToString())));
    }
} 
```

主要缺点是这些更改可能会在编译时被覆盖，因此最好在您的应用程序准备好时执行此操作。我使用了在这里找到的加密/解密方法： [AES 加密解密（密码学）教程，在 ASP.Net 中使用 C# 和 VB.Net 的示例](https://www.aspsnippets.com/Articles/AES-Encryption-Decryption-Cryptography-Tutorial-with-example-in-ASPNet-using-C-and-VBNet.aspx)

# c++ - QTreeView 的两个嵌套代理模型和段错误

> ID：11951206
> 
> 赞同：1
> 
> 时间：2012-08-14T11:21:27.033
> 
> 标签：c++, qt

我正在使用 QTreeView 和两个基于 QSortFilterProxyModel 的过滤器。

我需要获取 QTreeView 中当前显示项目的列表，所以我采用选定的索引（通过 ->selectionModel()->selectedIndexes()），将它们传递给简单的递归函数，但总是得到 SIGSEGV。在调试时，我发现调用堆栈结束的地方——它在 QVector::fill 中的某个地方。

也许我做错了什么？如果我通过索引，`mapToSource()`我会得到所有项目，而不仅仅是显示的项目。

迭代器函数很简单：

```
void CollectionTreeWidget::iterator(const QModelIndex & index, QModelIndexList & items)
{
    int count = p->dateFilterProxy->rowCount(index);
    for (int i=0; i<count; i++) {
        QModelIndex t = index.child(i, 0);
        iterator(t, items);
    }
} 
```

这`dateFilterProxy`是一个用作 QTreeView 模型的模型。`rowCount`代码在调用时崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:35:52.220

我想我在上面的算法中发现了错误，为了消除段错误，我们不能计算索引叶子的子索引（即没有子节点的节点）。

# jquery - jquery htm5form 验证

> ID：11951213
> 
> 赞同：0
> 
> 时间：2012-08-14T11:21:51.503
> 
> 标签：jquery

我在我的表单上使用 html5form 验证，但我有一个选择框，我可以在其中选择要填写的表单。

但我的验证不起作用......可以帮助我吗？

我的代码：

```
<script type="text/javascript">
$(document).ready(function(){
    $('#box1').hide();
    $('#box2').hide();

    $("#curso_atual").change(function(){
        if(this.value == 'all'){
            $("#boxes").children().hide();
            } else {
            $("#" + this.value).show().siblings().hide();
        }
    });

    $('#box1').html5form({
            responseDiv : '#response',
            messages: 'br',
            colorOn :'#f4e6b2',
            colorOff :'#f4e6b2',
            allBrowsers : true,
        });

    });

</script> 
```

`#box1`是我的表单 ID，并且`#box2`是同一页面上另一个表单的 ID，我只是使用选择下拉菜单显示/隐藏。

我哪里错了？- 我的小提琴[http://jsfiddle.net/QyLfH/1/](http://jsfiddle.net/QyLfH/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:46:12.553

我解决了这个问题 - [http://jsfiddle.net/QyLfH/3/](http://jsfiddle.net/QyLfH/3/)

这是代码：

```
$('#box1').hide();
$('#box2').hide();

$("#curso_atual").change(function(){
    if(this.value == 'all'){
        $("#boxes").children().hide();
        } else {
        $("#" + this.value).show().siblings().hide();
        $("#" + this.value).html5form({
                    responseDiv : '#response',
                    messages: 'br',
                    colorOn :'#000000',
                    colorOff :'#000000',
                    allBrowsers : true
         });
    }
}); 
```

# c# - 数据网格验证单元

> ID：11951216
> 
> 赞同：0
> 
> 时间：2012-08-14T11:21:57.440
> 
> 标签：c#, wpf, datagrid

我有一个绑定到 ObservableCollection 的数据网格，我想在 CellEditEnding 操作之前验证单元格输入。

例子：

如果验证返回 true -> CellEditEnding 操作；else -> 不要等待另一个输入；

这怎么可能？

我的课：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;
using System.ComponentModel;
using System.Text.RegularExpressions;

namespace WpfApplication7
{
    public partial class ProdList : INotifyPropertyChanged, IDataErrorInfo
    {
        private String mprodID = String.Empty;
        private String mprodName = String.Empty;
        private Double mprodPrice = 0;
        private Double mprodQuantity = 0;
        private String mprodSize = String.Empty;
        private String mprodColor = String.Empty;
        private Double mprodSubtotal = 0;
        private Double mprodDiscount = 0;

        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }

        // This is the public factory method.
        public static ProdList CreateNewProdList()
        {
            return new ProdList();
        }

        public String prodID
        {
            get { return mprodID; }
            set
            {
                if (mprodID != value)
                {
                    mprodID = value;
                    NotifyPropertyChanged("prodID");
                }
            }
        }

        public String prodName
        {
            get { return mprodName; }
            set
            {
                if (mprodName != value)
                {
                    mprodName = value;
                    NotifyPropertyChanged("prodName");
                }
            }
        }

        public Double prodPrice
        {
            get { return mprodPrice; }
            set
            {

                if (mprodPrice != value)
                {
                    mprodPrice = value;
                    NotifyPropertyChanged("prodPrice");
                }
            }
        }

        public Double prodQuantity
        {
            get { return mprodQuantity; }
            set
            {
                if (mprodQuantity != value)
                {
                    mprodQuantity = value;
                    NotifyPropertyChanged("prodQuantity");

                }
            }
        }

        public String prodSize
        {
            get { return mprodSize; }
            set
            {
                if (mprodSize != value)
                {
                    mprodSize = value;
                    NotifyPropertyChanged("prodSize");
                }
            }
        }

        public String prodColor
        {
            get { return mprodColor; }
            set
            {
                if (mprodColor != value)
                {
                    mprodColor = value;
                    NotifyPropertyChanged("prodColor");
                }
            }
        }

        public Double prodSubtotal
        {
            get { return mprodSubtotal; }
            set
            {
                if (mprodSubtotal != value)
                {
                    mprodSubtotal = value;
                    NotifyPropertyChanged("prodSubtotal");
                }
            }
        }

        public Double prodDiscount
        {
            get { return mprodDiscount; }
            set
            {
                if (mprodDiscount != value)
                {
                    mprodDiscount = value;
                    NotifyPropertyChanged("prodDiscount");
                }
            }
        }

        #region IDataErrorInfo Members

        public string Error
        {
            get { return "Error occurred"; }
        }

        public string this[string columnName]
        {
            get
            {
                return this.GetResult(columnName);
            }
        }

        private string GetResult(string columnName)
        {
            Console.WriteLine("columnName: " + columnName);
            if (columnName.Equals("prodID"))
            {
                PropertyInfo info = this.GetType().GetProperty(columnName);
                if (info != null)
                {
                    string value = info.GetValue(this, null) as string;

                    if (string.IsNullOrEmpty(value))
                        return string.Format("{0} has to be set", info.Name);
                    else if (value.Length < 5)
                        return string.Format("{0}'s length has to be at least 5 characters !", info.Name);
                }

            }

            return null;

        }
        #endregion

    }

} 
```

和我的 XAML：

```
<Window.Resources>
        <ObjectDataProvider x:Key="objDs"
                            ObjectType="{x:Type data:ListDataAccess}"
                            MethodName="GetProducts">

        </ObjectDataProvider>

    </Window.Resources>

    <Grid DataContext="{Binding Source={StaticResource objDs}}">

        <DataGrid Margin="12,58,12,188" AutoGenerateColumns="False" Name="dataGrid1" ItemsSource="{Binding}" IsSynchronizedWithCurrentItem="true"
                  ColumnWidth="auto" HorizontalContentAlignment="Center" CanUserSortColumns="False" CanUserReorderColumns="False" CanUserAddRows="True" CellEditEnding="dataGrid1_CellEditEnding">

            <DataGrid.Columns>
                <DataGridTextColumn Width="2*" Header="#ID" Binding="{Binding Mode=TwoWay, Path=prodID, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}" ></DataGridTextColumn>
                <DataGridTextColumn Width="4*" Header="Descripció" Binding="{Binding Mode=TwoWay, Path=prodName}" IsReadOnly="True" ></DataGridTextColumn>
                <DataGridTextColumn Width="1*" Header="Color" Binding="{Binding Mode=TwoWay, Path=prodColor}" IsReadOnly="True"></DataGridTextColumn>
                <DataGridTextColumn Width="1*" Header="Talla" Binding="{Binding Mode=TwoWay, Path=prodSize}" IsReadOnly="True"></DataGridTextColumn>
                <DataGridTextColumn Width="1*" Header="Quantitat" Binding="{Binding Mode=TwoWay, Path=prodQuantity}"></DataGridTextColumn>
                <DataGridTextColumn Width="2*" Header="Preu" Binding="{Binding Mode=TwoWay, Path=prodPrice, StringFormat=F}" IsReadOnly="True" ></DataGridTextColumn>
                <DataGridTextColumn Width="1*" Header="% Dpt" Binding="{Binding Mode=TwoWay, Path=prodDiscount}"></DataGridTextColumn>
                <DataGridTextColumn Width="2*" Header="Import" Binding="{Binding Mode=TwoWay, Path=prodSubtotal}" IsReadOnly="True"></DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:28:01.387

在 ObservableCollection 类型中实现一个`INotifyPropertyChanged`和`IDataErrorInfo`接口。

# ruby-on-rails - Rails 日期时间间隔人性化

> ID：11951217
> 
> 赞同：0
> 
> 时间：2012-08-14T11:22:02.353
> 
> 标签：ruby-on-rails, datetime, humanize

我想写出漂亮的日期时间间隔。

如果只是写类似

```
"from #{date_start.strftime('%d.%m.%Y %H:%M')} 
 till #{date_end.strftime('%d.%m.%Y %H:%M')}"` 
```

但在某些情况下，这看起来很糟糕。例如：

> 从 14.08.2012 00:00 到 16.08.2012 00:00

我能做些什么来使其人性化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:22:02.353

为了更漂亮地展示它，我在 application_helper.rb 中写了 helper：

```
def humanize_date_range date_start, date_end

  date_to_show = [:Y, :m, :d]
  time_to_show = [:H, :M]

  date_to_show.delete(:Y) if date_start.year == date_end.year
  date_to_show.delete(:m) if date_start.month == date_end.month
  date_to_show.delete(:d) if date_start.day == date_end.day
  time_to_show.delete(:H) if date_start.hour == date_end.hour
  time_to_show.delete(:M) if date_start.min == date_end.min
  if time_to_show.empty? and date_to_show.empty?
    return "#{date_start.strftime('%d.%m.%Y')} in #{date_start.strftime('%H:%M')}"
  elsif time_to_show.size == 2 and date_to_show.empty?
    return "From #{date_start.strftime('%H:%M')} till #{date_end.strftime('%H:%M')} #{date_end.strftime('%d.%m.%Y')}"
  elsif date_to_show.size == 1 and time_to_show.empty? and date_to_show.index(:d)
    return "From #{date_start.strftime('%d')} till #{date_end.strftime('%d')} #{date_start.strftime('%b %Y')}"
  elsif time_to_show.empty? 
    return "From #{date_start.strftime('%d.%m.%Y')} till #{date_end.strftime('%d.%m.%Y')}"
  else
    return "C #{date_start.strftime('%d.%m.%Y %H:%M')} по #{date_end.strftime('%d.%m.%Y %H:%M')}"
  end
end 
```

现在它看起来更漂亮了：

> 2012 年 8 月 14 日至 16 日

# javascript - 谷歌图表 json 数据馈送

> ID：11951228
> 
> 赞同：0
> 
> 时间：2012-08-14T11:22:49.357
> 
> 标签：javascript, json, google-visualization

我正在使用 google piechart api，我需要使用 google DataTable 提供数据。

我在页面中有一个 ajax 回调。在回调解析 json 数据后，我需要在 json 解析时设置 google dataTable。我需要用这个数据表参数调用 drawChart() 函数。

如何在 jquery 每个函数中设置谷歌数据表？

```
var googleData= new google.visualization.DataTable();
    googleData.addColumn('string', 'Topping');
    googleData.addColumn('number', 'Slices');

$.ajax({
   url: 'getCharData.aspx',
   success: function(data) {
     $.each(data.GeneralData, function (i, item) {

         .... need to set googleData rows with jsondata....

     });
     drawChart(googleData); 
   }
 });

  google.load('visualization', '1.0', { 'packages': ['piechart'] });

  function drawPieChart(data) {
    var chart = new google.visualization.PieChart(document.getElementById('chart_div'))
    chart.draw(data, options);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:34:34.563

有关javascript 和包装器的结构，请参阅[通过 dataTable JSON 在 google 饼图上设置颜色。](https://stackoverflow.com/questions/13064929/set-colors-on-google-piechart-via-datatable-json)还需要服务器返回以生成饼图的数据格式。

请注意，您的 .aspx 页面没有返回实际的 .aspx 页面。

一般要点；

*   列数据需要在 JSON 中的行数据旁边
*   使用 ChartWrapper，因为它可以让您很好地将他的设置与渲染分开。

# html - IE7：位置：绝对不会将元素从文档流中取出

> ID：11951229
> 
> 赞同：1
> 
> 时间：2012-08-14T11:22:56.617
> 
> 标签：html, css, internet-explorer, internet-explorer-7

我们试图通过隐藏实际的复选框输入元素并使用`input:checked+label`CSS 选择器更改标签的样式来创建一个带有自定义复选框的页面。这很好用，但在 IE7 上，隐藏的复选框仍然占用文档流的空间，弄乱了布局。

这是该问题的极其简化的演示：

```
<style type="text/css">
div.hello { position: absolute; left: 200px; }
</style>

<ul>
    <li><div class="hello">Hello</div><div>First</div></li>
    <li><div class="hello">Hello</div><div>Second</div></li>
    <li><div class="hello">Hello</div><div>Third</div></li>
</ul> 
```

似乎从文档流中取出的任何块元素`position:absolute`仍然占用 IE7 上的垂直空间。

这是在较新的浏览器上的样子：

```
First         Hello
Second        Hello
Third         Hello 
```

在 IE7 上它看起来像这样：

```
 Hello
First
              Hello
Second
              Hello
Third 
```

有关更接近我们实际场景的示例，请参阅[this fiddle](http://jsfiddle.net/naRUc/3/)。我们错过了什么吗？我们如何隐藏复选框元素，以便它仍然可以工作并且不占用布局中的空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:57:35.410

您可以使用此 css 为输入设置样式以隐藏 ie 中的输入。（正如@Abody97 所说）

```
input { 
    position: absolute; 
    top: -9999px; 
    left: -9999px; 
    opacity: 0; 
    width: 0px; 
    height: 0px; 
} 
```

但是为了删除由输入创建的空间。删除输入标签之间的空格。`<input /><input />`不喜欢`<input /> <input />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:09:45.997

尝试`input`使用这组样式设置您的样式：

```
input {
    position: absolute;
    top: -9999px;
    left: -9999px;
    opacity: 0;
    width: 0px;
    height: 0px;
} 
```

这似乎也适用于 IE。我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:23:47.737

我没有IE7，所以无法测试

但我会放在`display:none`那里

```
input { display:none } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T12:35:16.963

`:checked`是一个 CSS3 选择器，在 IE7 中不起作用。

~~你为什么不隐藏你的复选框`display:none`而不是用绝对定位移动它？~~

你也可以隐藏它`visibility: hidden;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T12:51:03.873

通过删除规则`label { display: block; }`，这似乎有效；[JSF](http://jsfiddle.net/naRUc/25/)中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T13:36:31.137

我添加了以下 CSS 规则来修复它：

```
label
{
    display: block;
    *zoom: 1;
} 
```

这会在 IE7 中启用*hasLayout*行为并使其正确呈现内容。`*`之前的规则确保这仅适用于 IE7。如果您需要有效的 CSS 2.1 解决方案，请回复，我会尝试以另一种方式修复它。

# com - 使用 Wix 注册 COM 服务器

> ID：11951230
> 
> 赞同：4
> 
> 时间：2012-08-14T11:23:01.510
> 
> 标签：com, installation, wix, com-server

我有以下注册 COM 服务器组件的 WiX 代码

```
<Component Id="ServerComponent" Guid="<someguid>">
    <File Id="comserverid" Name="comserver.exe" Source="path_to_com_server" DiskId="1" Checksum="yes" >
        <TypeLib Id="{<TYPELIBGUID>}" Description="ComServer 1.0 Type Library"  HelpDirectory="INSTALLLOCATION"  Language="0" MajorVersion="1" MinorVersion="0">
            <AppId Description="ComServer" Id="{<APPIDGUID>}}">
                <Class Id="{<SOMECLASSGUID>}" Context="LocalServer32" Description="ComServerClass Class" ThreadingModel="apartment" Advertise="no">
                    <ProgId Id="ComServer.ComServerClass.1" Description="ComServerClass Class">
                        <ProgId Id="ComServer.ComServerClass" Description="ComServerClass Class" />
                    </ProgId>
                </Class>
            </AppId>                                
        </TypeLib>
    </File>
    <RegistryValue Root="HKCR" Key="AppID\comserver.exe" Name="AppID" Value="{<APPIDGUID>}" Type="string" Action="write" />
</Component> 
```

它成功注册了服务器，但是当我以“运行方式”模式运行程序时，程序没有看到 COM 服务器。

请建议 - 我应该如何更改 WIX 代码

更新：答案是 - 以提升的权限运行 WiX 脚本或`comserver.exe /regserver`以提升的权限运行，但它不起作用。我认为上面的脚本很有用，所以我保留问题并创建一个稍微不同的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:20:36.567

检查您的[ALLUSERS 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367559%28v=vs.85%29.aspx)的值。如果您想要每台机器安装，您应该将其定义为 1 或 2。如果它以每个用户的身份安装，则注册表更新将写入 HKCU 而不是 HKLM。（根据安装范围，HKCR 可以指向 HKCU\Software\Classes 或 HKLM\Software\Classes）。

# html - onclick 分别水平展开和收缩 div

> ID：11951233
> 
> 赞同：0
> 
> 时间：2012-08-14T11:23:13.820
> 
> 标签：html, onclick, expand, contract

我在下面有一个 jfiddle，它有两个独立和水平扩展两个 div 的链接。 [http://jsfiddle.net/j9W7R/](http://jsfiddle.net/j9W7R/)

我将如何在任何给定时间**只看到一个div？**假设您单击第一个，然后单击第二个，它会导致第一个收缩。或者，如果您单击第一个并再次单击第一个，它也会缩回。

这个想法是链接将是一个 Facebook 图标，下一个链接将是另一个社交媒体图标，等等等等，我将嵌入一点“喜欢我们”或与用户进行某种互动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:32:41.567

您可以通过以下方式进行操作：

为所有的滑动`<div>`添加一些类。`class="slickbox"`例如。

每个都`.click()`首先`$('.slickbox').hide();`隐藏所有框，然后*扩展**您*需要的框。

例如：

```
<div style="clear:both;">

  <div style="float:left;">
    <a href="#" id="slick-slidetoggle2">Slide toggle the box 2</a>
  </div>

  <div id="slickbox2" class="slickbox">
    2: This is the box that will be shown and hidden and toggled at your whim. :)
  </div>

</div> 
```

其中一个`click`s 看起来像这样。

```
$('#slick-slidetoggle2').click(function() {
    $('.slickbox').hide(); // hide all boxes (doesn't matter if they were opened or not)
    $('#slickbox2').show('slide', 400); // and open one that was clicked
    return false;
}); 
```

通过这种方式，您可以轻松地**扩展**添加新项目，而无需为每个打开/关闭的项目`Like Us`编写。`.hide()`

**更新：**如果您需要在用户再次单击项目时*关闭*`show/hide`项目，您可以将按钮`.click()`处理程序的部分更改为以下内容。

```
$('#slick-slidetoggle2').click(function() {

    if ( $('#slickbox2').is(':hidden') ) { // check if current box is hidden
        $('.slickbox').hide(); // hide all boxes (doesn't matter if they were opened or not)
        $('#slickbox2').show('slide', 400); // and open this one
    } else // if it was already opened
        $('#slickbox2').hide('slide', 400); // hiding the box

    return false;
}); 
```

`:hidden`选择器将跟踪对象*可见性*的状态，并据此决定如何处理该框。

# jquery - Jquery 获取复选框 id 列表以发送到 mvc 控制器操作

> ID：11951239
> 
> 赞同：0
> 
> 时间：2012-08-14T11:23:41.080
> 
> 标签：jquery, asp.net-mvc-2

我有多个具有唯一 ID 的表单，并且具有相同的复选框元素集。我想使用 jQuery 获取数组中的复选框 id 列表并将其发送到参数为 IEnumberable 类型的 mvc 操作。

我在 jQuery 中使用下面的代码来获取表单内的选中复选框，但没有成功。谁能帮我解决这个问题？

```
 var test = $("#11form input[type='checkbox']:checked");
        alert(test.length); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:26:33.467

```
var test = $("#11form input[type='checkbox']:checked");

var ids = test.map(function() {
  return this.id;
}).toArray(); 
```

**[演示](http://jsfiddle.net/wC9VS/6/)**

# .net - 使用函数导入延迟加载

> ID：11951245
> 
> 赞同：3
> 
> 时间：2012-08-14T11:24:00.763
> 
> 标签：.net, sql-server, entity-framework, entity-framework-4, lazy-loading

我有一个函数导入，它返回一个类型的数据集，该数据集`Package`有一个名为 with 的属性，是对对象`PackageRoles`列表的外键引用。`PackageRole`

当我像这样调用我的函数导入时......

```
List<Package> orders = db.GetTopOrders(); 
```

我得到了我的清单，但`PackageRoles`尚未填充属性。

有没有办法使用`Include()`例如来填充它？我需要能够获得这些，而不想迭代`Packages`理想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:00:07.793

我找不到这样做的方法，所以我决定采用这种方法。将结果枚举到 List<> 中，然后遍历列表，使用 ObjectContext 上的 LoadProperty 加载所需的属性。

```
List<Package> orders = db.GetTopOrders().ToList();

foreach (var order in orders)
{
    db.LoadProperty<Package>(order, o => o.PackageRoles);
} 
```

# c# - 肥皂反序列化问题

> ID：11951248
> 
> 赞同：0
> 
> 时间：2012-08-14T11:24:16.737
> 
> 标签：c#, wcf

我有一个通过 HTTP 托管的 WCF 服务。该服务具有以下操作：

```
[OperationContract]
MyResponse ProcessRequest(MyRequest request); 
```

和消息合同：

```
[MessageContract]
public class MyRequest
{
    [MessageBodyMember(Namespace = "http://company.com/schema/myobjectschema/2", Name = "RequestPayLoad")]
    public RequestPayLoadType RequestPayLoad{ get; set; }
} 
```

RequestPayLoadType 对象是使用 xsd.exe 从架构文件中生成的，并具有所有适当的命名空间。

现在，当我从 SOAP UI 调用此服务操作时，我发现 ProcessRequest 操作的soap UI 请求在请求中包含 RequestPayLoadType 中的所有私有字段。这实际上不符合模式，并且正在消耗它的 java 客户端因此而中断。

例如，我的 requestpayloadtype 结构如下：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://company.com/schema/myobjectschema/2")]
[System.Xml.Serialization.XmlRootAttribute("EventHeader", Namespace = "http://company.com/schema/myobjectschema/2",
    IsNullable = false)]
public class RequestPayLoadType 
{
    private string messageIDField;
    public string MessageID
    {
        get
        {
            return this.messageIDField;
        }
        set
        {
            this.messageIDField = value;
        }
    }
} 
```

当我向服务发送请求时，请求形成如下：

```
 <ns:TimeSeriesPayload>
       <messageIDField >?</messageIDField >
 </ns:TimeSeriesPayload> 
```

我的问题是：为什么私有字段出现在请求中。为什么不是公共财产。我是否设置了一个属性来防止这种情况发生？我的模式有深层嵌套，所以我可以在根级别使用属性来防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:32:20.257

对于 WCF，您通常将参数对象定义为[Data Contract](http://msdn.microsoft.com/en-us/library/ms733127.aspx)。您`RequestPayLoadType`将使用`[DataContract]`属性定义，您的公共属性`MessageID`将使用`[DataMember]`属性定义。这可能会提示序列化程序使用您的公共财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:34:33.463

我假设您是`MessageContract`故意使用属性而不是使用`DataContract`属性。

如果我的假设是正确的，那么您应该使用相关`MessageBodyMember`属性标记您的内部类。您的内部数据类没有标记`MessageContract`和`MessageBody`属性；因此框架假设您正在尝试发布内部类的所有属性。

# c# - 查看已安装设备的端口地址和属性

> ID：11951261
> 
> 赞同：1
> 
> 时间：2012-08-14T11:25:31.530
> 
> 标签：c#, sockets, port

我在我的计算机上安装了一个设备（例如读卡器）。我运行了这段代码，但`ComboBox`没有填写。

代码：

```
using System.Management;
using System.IO.Ports;

foreach (string portname in SerialPort.GetPortNames())
        {
            comboBox1.Items.Add(portname);
        } 
```

由于这不起作用，我如何查看计算机上安装的设备的端口地址和属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:21:02.340

GetPortNames() 函数提供了串行端口名称的列表，[请参见 GetPortNames() 页面](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.getportnames.aspx)，它们不是套接字。

这是[有关 SerialPort 类的文档，](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)其中包含可用于确定特定串行端口属性（包括波特率等）的方法。我怀疑您想要的基本大纲是使用该`SerialPort.GetPortNames()`方法生成端口列表名称，然后在`SerialPort (String)`遍历提供的端口列表时使用 来询问特定端口的属性`GetPortNames()`。

如果它实际上是您感兴趣的套接字，您可能想知道[众所周知的 TCP 和 UDP 端口列表，](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)但是就像盗版代码一样，这些更像是指导而不是实际规则，并且端口上的实际内容可能不是标准使用文件。这取决于正在运行的软件以及软件的配置方式。[除了通过标准列表、向端口发送特定于服务的查询或使用诸如 netstat 之类的实用程序](http://en.wikipedia.org/wiki/Netstat)来生成列表之外，我不知道有任何方法可以知道哪些服务可能正在使用特定端口。

# sql - 扭曲的 adbapi：受影响的行数和最后插入 id

> ID：11951267
> 
> 赞同：2
> 
> 时间：2012-08-14T11:26:06.510
> 
> 标签：sql, twisted

ConnectionPool.runQuery 返回 Transaction.fetchall()。如何获取受影响的行数或最后插入 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:01:34.920

您可以使用该属性`Transaction.lastrowid`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-27T08:41:41.647

下面是一个使用[Transaction](https://twistedmatrix.com/documents/current/api/twisted.enterprise.adbapi.Transaction.html)获取最后插入 id的[示例，请参考问题演示代码。](https://stackoverflow.com/questions/12953784/twisted-adbapi-runinteraction-last-insert-id)

如果您在两个单独的查询中这样做，您将始终得到 0：

self.dbpool.runQuery('insert into table_x (%s, %s)', ('str1', 'str2'))
self.dbpool.runQuery('select LAST_INSERT_ID()')

# iphone - 使用 BJImageCropper 在 ios 中裁剪图像

> ID：11951268
> 
> 赞同：3
> 
> 时间：2012-08-14T11:26:15.270
> 
> 标签：iphone, ios, objective-c, ios5, crop

我在 iOS 中使用 BJImageCropper 进行图像裁剪，但是当我触摸图像的最后一个角时，它会自动更新另一侧的高度和宽度。

![](../Images/9a59a9ec2f1d6a9ea1912a30a6299e19.png)

示例代码是[https://github.com/barrettj/BJImageCropper/zipball/master](https://github.com/barrettj/BJImageCropper/zipball/master)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T13:01:19.807

获取我刚刚推送的提交。应该固定在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:36:51.547

那是代码中的一个错误。联系作者纠正错误:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:35:30.137

您可以使用另一个选项来裁剪图像，即 ContextRect

一个简短的例子是：

```
CGRect contextRect = CGRectMake(50, 50, 200, 200);

UIGraphicsBeginImageContext(contextRect.size);

[self.view.layer renderInContext : UIGraphicsGetCurrentContext()];

UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

CGImageRef imageRef = CGImageCreateWithImageInRect([viewImage CGImage], contextRect);

UIImage * savedImage = [UIImage imageWithCGImage:imageRef scale:1.0 orientation:viewImage.imageOrientation]; 
```

您可以根据您的图像编辑视图的 x,y 原点和宽度 n 高度。

# c# - 根据下拉列表值插入

> ID：11951279
> 
> 赞同：0
> 
> 时间：2012-08-14T11:26:44.933
> 
> 标签：c#, asp.net

好吧，根据下拉值，我需要将表单中的值插入到数据库表中。但它现在不起作用。

这是我的 aspx 页面-

```
<asp:DropDownList ID="DropDownList1" class="box" runat="server" AutoPostBack="True">
        <asp:ListItem>Confirm Order</asp:ListItem>
        <asp:ListItem>Tentative Order</asp:ListItem>
    </asp:DropDownList> 
```

然后我用开关..

```
switch (DropDownList1.SelectedValue) 
{ 
    case "Confirm Order": 
        ... INSERT 
    break; 
    case "Tentative Order": 
        ...Insert 
    break;
} 
```

但它给出了一个错误-

`No mapping exists from object type System.Web.UI.WebControls.ListItem to a known managed provider native type.`

正确的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:40:47.713

确保您正在使用：

**DropDownList1.SelectedValue**

或者

**DropDownList1.SelectedItem.Value**

或者

**DropDownList1.SelectedItem.Text**

在您的插入查询中。

（而不是 DropDownList1.SelectedItem - 这将给出 ListItem）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:30:39.390

它应该是

```
switch (DropDownList1.SelectedItem.Text)
{
    //Rest Remains the same
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:34:23.303

我想问题是你正在将你的 DDL 映射到类“box”，并且在你的 switch/case 语句中你没有使用这个映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:41:45.040

尝试使用：

```
DropDownList1.SelectedItem.Value 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T11:44:11.097

您可以将 ddl.SelectedItem.Value 作为参考并将值传递给所需的方法。

字符串 tempString = yourDDL.SelectedItem.Value

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T11:58:16.167

为什么不使用 ID 值，例如。

```
<asp:DropDownList ID="DropDownList1" runat="server">
        <asp:ListItem runat="server" Text="Confirm Order" Value="1"></asp:ListItem>
 </asp:DropDownList> 
```

并切换

```
switch (DropDownList1.SelectedValue) 
{ 
    case "1": 
        ... INSERT 
} 
```

# html - Sublime Text 2 中的 HTML 键盘快捷键？

> ID：11951280
> 
> 赞同：16
> 
> 时间：2012-08-14T11:26:50.387
> 
> 标签：html, keyboard-shortcuts, sublimetext, sublimetext2

在过去的几个月里，我从 Textmate 切换到了 Sublime，一直忙于重新训练我的大脑和手指以使用新的快捷键。

在 Textmate 中，当编辑 HTML 文档时，我可以突出显示文本并执行`Command`+`b`以将所选文本包装在`<b></b>`标签中，或者`Command`+`i`以包装在`<i></i>`...以及各种其他命令/标签中。

那么，有没有办法在 Sublime 中做到这一点？我知道我可以键入`b`,`TAB`来创建一组空的`<b></b>`标签，但我希望能够将选定的文本包装在各种标签中。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-14T12:53:59.667

**麦克：**
`Ctrl` + `Shift`+`W`

**Windows/Linux:**
`Alt` + `Shift`+`W`

然后键入您想要的标签（`i`、`b`等）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-26T17:06:25.940

```
 { "keys": ["super+alt+b"], "command": "insert_snippet", "args": {"contents": "<strong>${0:$SELECTION}</strong>" } },
{ "keys": ["super+alt+i"], "command": "insert_snippet", "args": {"contents": "<em>${0:$SELECTION}</em>" } } 
```

上面可以添加到用户键绑定文件中，以便在按下 Cmd+Alt+b 时由强标记包围选择，在按下 Cmd+Alt+i 时由斜体标记包围选择（在 Mac 上）。

来源：[https ://gist.github.com/3436510](https://gist.github.com/3436510)

# html - 将 html 网站上传到 wordpress 服务器

> ID：11951282
> 
> 赞同：0
> 
> 时间：2012-08-14T11:27:00.877
> 
> 标签：html, wordpress

我有一个wordpress网站。我是一名网络开发人员。我想展示我的网站。所以，我想将它们托管在我的服务器中。它们只是 php mysql 网站。不使用 CMS。代码是自己写的。但我无法在 wordpress 中上传它们。我已经尝试将它们上传到子域中。但这也行不通。当我输入子域的地址时，wordpress 正在针对该地址生成 404 错误。请给我一些建议，以便我可以将网站与 Wordpress 并排托管。对不起，我的英语不好。提前致谢。

-苏曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:38:56.303

您可以将网站托管在您的 ftp 服务器上的文件夹中，然后您可以链接到它们或使用[iframe](http://www.w3schools.com/TAGs/tag_iframe.asp)来查看它们。

[http://www.w3schools.com/TAGs/tag_iframe.asp](http://www.w3schools.com/TAGs/tag_iframe.asp)

* * *

如果您使用的是 php 和 sql 网站，而不是您在问题标题中提到的 HTML 网站，则需要在子域或类似域中运行代码和数据库

# sql - Informix SQL / 在另一个查询中重用存储过程的结果

> ID：11951287
> 
> 赞同：3
> 
> 时间：2012-08-14T11:27:15.007
> 
> 标签：sql, informix

我想在另一个查询中使用存储过程的结果。但我不知道正确的语法。DBMS：IBM Informix，存储过程，我使用。

```
Select col1 from table (MULTISET(EXECUTE PROCEDURE procedure ('param1','param2'))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:35:39.180

这个例子：

```
CREATE FUNCTION SF_DYN_REP_EXEC(i_sql varchar)
    RETURNING INT, VARCHAR(30);

    DEFINE ret_groupid int;
    DEFINE ret_groupname varchar(30);
    FOREACH cursor1
    FOR
        SELECT groupid,
             groupname INTO 
             ret_groupid,
             ret_groupname
        FROM tctaddinmessagegroups
        RETURN ret_groupid,
             ret_groupname WITH RESUME;
    END FOREACH;
END FUNCTION;

select vret_groupid C1,
             vret_groupname C2 from
table (function SF_DYN_REP_EXEC('blablabla'))
vtab1(vret_groupid,
             vret_groupname)
order by vret_groupid,
             vret_groupname; 
```

# iphone - XMLParser 版本在后台线程 iOS 5.1.1 中崩溃

> ID：11951291
> 
> 赞同：0
> 
> 时间：2012-08-14T11:27:26.460
> 
> 标签：iphone, ios

在我的应用程序中，我在后台线程中从服务器下载 XML 数据，然后解析和更新数据库表

后台线程将在应用程序启动期间创建并继续运行。

但问题是在 NSXMLParser 对象发布期间，我得到 EXC_BAD_ACCESS (SIGSEGV) 这是 XML Parser 代码：

```
 - (void)parseXMLWithData:(NSMutableData *)pObjXMLBufferPtr
    {
        @try
        {
             [[NSURLCache sharedURLCache] setMemoryCapacity:0];
            [[NSURLCache sharedURLCache] setDiskCapacity:0];

            NSMutableData   *lTempData = [pObjXMLBufferPtr copy];
             NSXMLParser *lObjXMLParserPtr = [[NSXMLParser alloc] initWithData:lTempData];
            [lTempData release];

           [pObjXMLParserPtr setShouldResolveExternalEntities: YES];
           [pObjXMLParserPtr setDelegate: m_cObjSAXHandler];
           //m_cObjSAXHandler is my custom class. here is declaration SAXHandler :      
           NSObject<NSXMLParserDelegate>
          [pObjXMLParserPtr parse];

            [lObjXMLParserPtr setDelegate:nil];
            [lObjXMLParserPtr release];
            lObjXMLParserPtr = (NSXMLParser *)nil;
        }
        @catch (NSException *ex)
        {
               NSLog(@"parseXMLWithData Exception!!!");
        }
    }

Here is the crash log:
0   libicucore.A.dylib              0x34c00578 ucnv_close + 28
1   libxml2.2.dylib                 0x342a81ba xmlCharEncCloseFunc + 30
2   libxml2.2.dylib                 0x342c62d0 xmlFreeParserInputBuffer + 28
3   libxml2.2.dylib                 0x342aacbc xmlFreeInputStream + 108
4   libxml2.2.dylib                 0x342aace4 xmlFreeParserCtxt + 12
5   Foundation                      0x37d14b22 -[NSXMLParser dealloc] + 158 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:45:15.213

您正在释放解析器并在方法之后设置其委托 nil `parse`。解析也在内部后台进行，因此您必须等待解析结束。

您可以在方法中设置一些通知或调用方法来释放解析器`parserDidEndDocument`。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T20:50:00.517

我遇到了类似的问题，这似乎是因为我正在`NSXMLParser`与访问 libxml 的其他代码混合 - 使用 wsdl2objc 生成的 SOAP 客户端。两者都在同一个线程中，但是如果一个线程的生命周期与另一个线程重叠，我会得到与您完全相同的崩溃和堆栈跟踪。通过仔细控制这两个变体的生命周期，它解决了我的问题。我相信我遇到的问题是由于`NSXMLParser`与 SOAP 客户端代码调用 xmlInitParser 的方式不同，尽管我尚未对此进行验证。

还值得一提的是，我正在使用 ARC，（尽管我选择将包含类的 NSXMLParser 转移到主要协助调试的非 ARC） - 基础 SDK 5.1 / 6，部署目标为 4.0

[附带说明一下，Colin-C在这里](http://coin-c.tumblr.com/post/18063869172/thread-safe-xmllib2)有一篇关于构建 libxml 的线程安全版本的优秀文章。

希望能帮助您或其他人偶然发现这一点。

# python - Postfix + Django：SMTPException：服务器不支持 SMTP AUTH 扩展

> ID：11951292
> 
> 赞同：3
> 
> 时间：2012-08-14T11:27:32.543
> 
> 标签：python, django, email, smtp, postfix-mta

我是 Postfix 的新手，刚刚为 Ubuntu 设置了默认的 Postfix，通过 telnet 测试它并发送邮件正常，但是当我尝试通过 django (host='localhost', port='25', user=' '，密码=''），我刚刚得到

`SMTPException: SMTP AUTH extension not supported by server.`

[这是我](https://gist.github.com/3348411)的 main.cf：https://gist.github.com/3348411

您能否建议，我需要添加什么来设置仅用于发送电子邮件的最小工作 smtp？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T11:35:42.017

看起来您并不想使用 AUTH。在这种情况下，用户和密码应该是 None，而不是空字符串。如果您查看代码库，Django 会[明确检查 None](https://github.com/django/django/blob/master/django/core/mail/backends/smtp.py#L21)。由于默认值已经是 None，您可以省略用户名和密码参数。

！

# c# - C# 发送字节不起作用

> ID：11951298
> 
> 赞同：-2
> 
> 时间：2012-08-14T11:27:51.040
> 
> 标签：c#, sockets, bytearray, send

我只是想问为什么当我尝试发送一个字节时，它根本没有发送，我做了一个简单的程序并且不知道为什么它现在工作（在客户端和服务器中发送属性）这是我的服务器端代码

```
 public void ServerStartReceiving()
    {
        sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        sck.Bind(new IPEndPoint(0, 1980));
        sck.Listen(0);
        acc = sck.Accept();
        sck.Close();
        new Thread(() =>
        {
            while (true)
            {
                byte[] sizeBuff = new byte[4];
                acc.Receive(sizeBuff, 0, sizeBuff.Length, 0);
                int size = BitConverter.ToInt32(sizeBuff, 0);
                MemoryStream ms = new MemoryStream();
                while (size > 0)
                {
                    byte[] buffer;
                    lblStatus.Text = "Receiveing Text....";
                    if (size < acc.ReceiveBufferSize)
                    {
                        buffer = new byte[size];
                    }
                    else
                    {
                        buffer = new byte[acc.ReceiveBufferSize];
                    }
                    int rec = acc.Receive(buffer, 0, buffer.Length, 0);
                    size -= rec;
                    ms.Write(buffer, 0, buffer.Length);
                }
                ms.Close();
                byte[] data = ms.ToArray();
                ms.Dispose();

                while (true == true)
                {
                    byte[] sizelang = new byte[4];
                    acc.Receive(sizelang, 0, sizelang.Length, 0);
                    lblStatus.Text = "Receiving Language Data....";
                    int sizela = BitConverter.ToInt32(sizelang, 0);
                    MemoryStream ms1 = new MemoryStream();
                    while (sizela > 0)
                    {
                        byte[] lang;

                        if (sizela < acc.ReceiveBufferSize)
                        {
                            lang = new byte[sizela];
                        }
                        else
                        {
                            lang = new byte[acc.ReceiveBufferSize];
                        }
                        int rec = acc.Receive(lang, 0, lang.Length, 0);
                        sizela -= rec;
                        ms1.Write(lang, 0, lang.Length);
                    }
                    ms1.Close();
                    byte[] datalang = ms1.ToArray();
                    ms1.Dispose();

                    Invoke((MethodInvoker)delegate
                        {
                            string lang = Encoding.Default.GetString(datalang);
                            string datall = Encoding.Default.GetString(data);
                            Translator t = new Translator();
                            t.SourceLanguage = lang;
                            t.SourceText = datall;
                            t.TargetLanguage = ReadLangRead();
                            lblStatus.Text = "Translating...";
                            t.Translate();
                            txtLog.Text += System.Environment.NewLine + "Other Person: " + t.Translation;
                        });
                }

            }
        }).Start();
    }

    public void ServerSend(byte[] message,string lang)
    {
        message = Encoding.Default.GetBytes(txtMessage.Text);
        sck.Send(BitConverter.GetBytes(message.Length),0,4,0);
        sck.Send(message);
        //--------------------------------------------
        byte[] langbyte;
        langbyte = Encoding.Default.GetBytes(lang);
        sck.Send(BitConverter.GetBytes(langbyte.Length),0,4,0);
        sck.Send(langbyte);
    } 
```

和客户端代码

```
 public void ClientSend(byte[] message, string lang)
    {
        message = Encoding.Default.GetBytes(txtMessage.Text);
        sck.Send(BitConverter.GetBytes(message.Length), 0, 4, 0);
        sck.Send(message);
        //--------------------------------------------
        byte[] langbyte;
        langbyte = Encoding.Default.GetBytes(lang);
        sck.Send(BitConverter.GetBytes(langbyte.Length), 0, 4, 0);
        sck.Send(langbyte);
    }
    public void ClientStartReceiving()
    {
        MemoryStream lgst = new MemoryStream();
        MemoryStream bfst = new MemoryStream();
        new Thread(() =>
            {
                while (true)
                {
                    byte[] bufferSize = new byte[4];
                    byte[] buffer;
                    byte[] langsize = new byte[4];
                    byte[] lang;
                    NetworkStream ns = new NetworkStream(sck);
                    ns.Read(bufferSize, 0, bufferSize.Length);
                    int datasize = (BitConverter.ToInt32(bufferSize, 0));

                    buffer = new byte[datasize];
                    int read = 0;
                    while (read != buffer.Length)
                    {
                        read += ns.Read(buffer, 0, buffer.Length);
                    }

                    bfst.Write(buffer,0,buffer.Length);

                    //------------------------------------
                    ns.Read(langsize, 0, langsize.Length);

                    int langsizeint = (BitConverter.ToInt32(langsize, 0));
                    lang = new byte[langsizeint];
                    int read1 = 0;
                    while (read1 != lang.Length)
                    {
                        read1 += ns.Read(lang, 0, lang.Length);
                    }

                    lgst.Write(lang, 0, lang.Length);
                    lgst.Close();
                    bfst.Close();
                    byte[] langau = lgst.ToArray();
                    byte[] dataau = bfst.ToArray();
                    lgst.Dispose();
                    bfst.Dispose();

                    Invoke((MethodInvoker)delegate
                    {
                        string langst = Encoding.Default.GetString(langau);
                        string datall = Encoding.Default.GetString(dataau);
                        Translator t = new Translator();
                        t.SourceLanguage = langst;
                        t.SourceText = datall;
                        t.TargetLanguage = ReadLangRead();
                        lblStatus.Text = "Translating...";
                        t.Translate();
                        txtLog.Text +=System.Environment.NewLine +"Other Person: "+ t.Translation;
                    });
                }
            }).Start();
    }

    public void ClientConnect()
    {

        Select_Partnener Form = new Select_Partnener();
        sck.Connect(new IPEndPoint(IPAddress.Parse(Form.IP),1980));

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:31:23.687

Here's the most obvious bug:

```
 while (read != buffer.Length)
                {
                    read += ns.Read(buffer, 0, buffer.Length);
                } 
```

1) You don't want to read into `buffer` if you've already read some bytes. You need to read into the right part of the buffer.

2) You don't want to read `buffer.Length` bytes. You want to read however many bytes you haven't read yet.

# haproxy - 可以使用 HAProxy 来限制按主机分组的前端的传入连接数吗？

> ID：11951299
> 
> 赞同：1
> 
> 时间：2012-08-14T11:27:57.257
> 
> 标签：haproxy

我知道可以限制到 HAProxy 前端的最大活动连接。但是，是否有可能以某种方式限制来自单个主机的并发连接数？我希望进一步的连接排队。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:36:56.597

Haproxy 可以根据不同的标准（可以混合在一起）按源 IP 阻止：HTTP 或 TCP 连接的数量或速率。看看stick-tables（并使用HAProxy 1.5）。

这里的一些例子： [http ://blog.exceliance.fr/2012/02/27/use-a-load-balancer-as-a-first-row-of-defense-against-ddos/](http://blog.exceliance.fr/2012/02/27/use-a-load-balancer-as-a-first-row-of-defense-against-ddos/)

干杯

# html - CSS 样式表的令人沮丧的行为

> ID：11951301
> 
> 赞同：0
> 
> 时间：2012-08-14T11:28:05.117
> 
> 标签：html, css

我有一个相当紧张的问题。我应用了一个名为 input 的 div 类来设置我的用户名/密码字段上的框的样式，如下图所示。

![在此处输入图像描述](../Images/9cc488ff578a1983e0475fcc19a97e0a.png)

但是现在我想对搜索栏应用不同的样式，但无论我做什么，即使我使用内联样式表，它也会使用旧输入元素的样式。我几乎尝试了一切。

## 登录html

```
<div class="form">  

<form name="form1" method="POST" action="login.php">
<div class="input">
  <input name="username" id="username" placeholder="Username">

  <input name="password" id="password" placeholder="Password">
  </div>

  <input type="submit" name="Submit" value="Login" class="submit">

</form>
</div> 
```

## 搜索栏 html

```
<div class="ajax-div">

    <div class="searchbar">

     <input type="text" onKeyUp="getScriptPage('box','text_content')" id="text_content">

    </div>

    <div id="box"></div>
</div> 
```

## 最后一个 width: 输入中的参数指示页面上所有输入栏的宽度。

```
.form {

    margin-top:-182px;
    margin-left:1100px;
    position:static;
    width: 220px;
    height:150px;
    padding: 20px;
    padding-top:10px;
    border: 1px solid #270644;

  background:url(bg-right.png);

}

.label {
        font-size: 12px;
        font-family: arial, sans-serif;
        list-style-type: none;
        color: #999;
        text-shadow: #000 1px 1px;
        margin-bottom: 10px;
        font-weight: bold;
        letter-spacing: 1px;
        text-transform: uppercase;
        display: block;
    }   

input {
      /* input boxes*/
      -webkit-transition-property: -webkit-box-shadow, background;
      -webkit-transition-duration: 0.25s;
        padding: 6px;
        border-bottom: 0px;
        border-left: 0px;
        border-right: 0px;
        border-top: 1px solid #666;
        -moz-box-shadow: 0px 0px 2px #000;
        -webkit-box-shadow: 0px 0px 2px #000;
        margin-bottom: 10px;
        background: #FFF;
        width: 130px;

    } 
```

我试图应用于搜索栏的 css：

```
searchbar {

left: 350px;
top:100px;
width: 300px;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:34:47.583

你的 CSS 选择器是错误的。

而不是这个：

```
searchbar {

left: 350px;
top:100px;
width: 300px;

} 
```

尝试这个：

```
.searchbar #text_content {

left: 350px;
top:100px;
width: 300px;

} 
```

“点”表示您要定位类名。“哈希”表示您要定位特定 ID。CSS 的名字有一个线索；***级联***样式表。样式从通用到更具体的“涓涓细流”。因此，如果您只想定位一个元素，那么 ID 是可行的方法……它通常会覆盖元素上的任何通用样式。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:33:43.420

您是否尝试将类直接应用于输入标签**或**使用此 CSS -

```
.searchbar input{
// this CSS will only be applied to searchbar input box
left: 350px;
top:100px;
width: 300px;

} 
```

您尝试应用于搜索栏的 CSS 是错误的。Searchbar 是 div 的类而不是输入框。尝试使用上面的 CSS 并检查它是否有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:35:36.163

input { } 将样式应用于所有输入元素 input[type="text"] 等...

而是应用 .input input {} 为输入类中的输入元素应用样式

要为搜索栏中的输入元素应用样式，请使用 .searchbar input{}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:34:38.367

您正在为所有输入字段使用通用选择器（CSS 的最后一部分：input { ..）。因此样式将应用于所有输入。

我建议给每个输入它自己的类，这样你就可以为每个输入分配不同的样式。例如。

**CSS**

```
.search
{
    background: red;
}

.login
{
    background: blue;
} 
```

HTML

```
<input type="text" class="search" /> 
```

此外，选择器“搜索栏”不会选择任何内容，因为它的目标是一个名为搜索栏的元素。如果要定位类，则需要使用 . 例如：.searchbar

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T11:33:38.987

所以，`searchbar`选择器应该以一个`.`字符开头并覆盖输入选择器，它可能应该是`.searchbar input`

而对于`input`，您可能想要`.input input`作为选择器..？

# wordpress - 如何使用 WordPress 自定义链接创建可点击的电话链接？

> ID：11951302
> 
> 赞同：0
> 
> 时间：2012-08-14T11:28:06.380
> 
> 标签：wordpress, phone-number

我正在使用 WordPress 自定义链接，我需要为电话号码创建可点击的链接。我从来没有遇到过使用以下内容在 HTML 中执行此操作的问题`<a href="tel:2065221677">(206) 522-1677</a>`：但是 WordPress 显然有自己的想法，更改了代码，并且我的链接无法用我的 iPhone 打开。

我发现[这篇文章](https://stackoverflow.com/questions/11943367/wordpress-change-url-from-http-to-tel/11944631#11944631)有人遇到了类似的问题，我尝试了 jQuery 脚本，但是当我单击链接时它不起作用。我收到一个错误：需要身份验证，需要用户名和密码。我相信如果它是可点击的而不是加载的，这个代码会起作用。使用“phone”作为 CSS 类也很棒。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:56:12.170

我希望你们不建议更改核心或主题文件。将此功能捆绑到像这样的插件中要好得多[http://wordpress.org/extend/plugins/telephone-number-linker/](http://wordpress.org/extend/plugins/telephone-number-linker/)

# arrays - Doctrine 和 Postgres 数组

> ID：11951303
> 
> 赞同：6
> 
> 时间：2012-08-14T11:28:12.403
> 
> 标签：arrays, postgresql, doctrine

我发现 Doctrine 数组类型正在使用序列化/反序列化并将数据存储在“简单”字段中，如文本、整数。

但是我有一个带有 postgres 数据库的项目，其中一些字段作为数组（主要是文本）。我想将该数据库与 Doctrine 一起使用。有办法处理吗？

谢谢

**编辑 ：**

ps：感谢 Craig Ringer，我现在知道 sql 数组是一个很好的实践。

也许我可以创建一个自定义类型。有没有人已经做到了？

**编辑2：**

问题解决了一半：

```
<?php
namespace mysite\MyBundle\Types;

use Doctrine\DBAL\Types\Type;
use Doctrine\DBAL\Platforms\AbstractPlatform;

 /**
  * My custom postgres text array datatype.
 */
class TEXTARRAY extends Type
{
     const TEXTARRAY = 'textarray'; // modify to match your type name

    public function getSqlDeclaration(array $fieldDeclaration, AbstractPlatform $platform)
    {
        return $platform->getDoctrineTypeMapping('TEXTARRAY');
    }

    public function convertToPHPValue($value, AbstractPlatform $platform)
    {
    // This is executed when the value is read from the database. Make your conversions here, optionally using the $platform.
        return explode('","', trim($value, '{""}') );
    }

    public function convertToDatabaseValue($value, AbstractPlatform $platform)
    {
    // This is executed when the value is written to the database. Make your conversions here, optionally using the $platform.

        settype($value, 'array'); // can be called with a scalar or array
        $result = array();
        foreach ($set as $t) {
            if (is_array($t)) {
                $result[] = to_pg_array($t);
            } else {
                $t = str_replace('"', '\\"', $t); // escape double quote
                if (! is_numeric($t)) // quote only non-numeric values
                    $t = '"' . $t . '"';
                $result[] = $t;
            }
        }
        return '{' . implode(",", $result) . '}'; // format      

    }

    public function getName()
    {
        return self::TEXTARRAY; // modify to match your constant name
    }
} 
```

和控制器

```
<?php

namespace mysite\MyBundle;

 use Symfony\Component\HttpKernel\Bundle\Bundle;
 use Doctrine\ORM\EntityManager;
 use Doctrine\DBAL\Types\Type;

 class mysiteMyBundle extends Bundle
{
    public function boot() {
        Type::addType('textarray', 'mysite\MyBundle\Types\TextArray');
        $em = $this->container->get('doctrine.orm.default_entity_manager');
        $conn = $em->getConnection();
        $conn->getDatabasePlatform()->registerDoctrineTypeMapping('TEXTARRAY', 'textarray');
    }
} 
```

我知道想用 'myword' = ANY(myarrayfield) 之类的查询在这些数组中搜索...有人知道吗？

#doctrine2 频道上有人告诉我构建一个自定义 DQL 函数，所以这里是：

```
<?php
use Doctrine\ORM\Query\Lexer;
use Doctrine\ORM\Query\AST\Functions\FunctionNode;

class ANY extends FunctionNode {

    public $field;

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker) {
        return 'ANY(' .
            $this->field->dispatch($sqlWalker) . ')';
    }

    public function parse(\Doctrine\ORM\Query\Parser $parser) {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->field = $parser->StringPrimary();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }
} 
```

但是，我使用查询构建器构建我的查询，其中包含诸如

```
$arr[] = $qb->expr()->like($alias.".".$field, $qb->expr()->literal('%'.trim($val).'%') ); 
```

并加入他们

```
if(count($arr) > 0) $qb->Where(new Expr\Orx($arr));
else unset($arr); 
```

那么，如何使用我的功能呢？:\

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T09:22:38.977

在 QueryBuilder 中，您只需编写自定义函数即可使用它们：

```
$qb->where("ANY(a.b)"); 
```

一些进一步的信息：

1.  您可以将自定义类型添加到 Symfony 应用程序的“教义”配置部分。
2.  自定义 DQL 函数也是如此。

有关 Symfony 2.1 中的语法，请参见 CLI 上的“config:dump-reference DoctrineBundle”命令，否则请参见 symfony.com 网站。

# javascript - Shopify scripttag install -> URI::BadURIError

> ID：11951304
> 
> 赞同：0
> 
> 时间：2012-08-14T11:28:17.200
> 
> 标签：javascript, heroku, shopify

我想使用 Rails 应用程序为 shopify 安装脚本标签。我的 js 文件在这里：[http://javascript.dataglobe.eu/index.js](http://javascript.dataglobe.eu/index.js)，它只有一个 sayHello() 函数。我在我的 Rails 应用程序中进行了身份验证，获得了令牌，并添加了两行来安装脚本标签：

```
ShopifyAPI::Base.site = @token
s = ShopifyAPI::ScriptTag.create(:event => "onload",:src => "http://javascript.dataglobe.eu/index.js") 
```

我的应用程序部署到heroku，安装后，我总是得到这个错误：URI::BadURIError（两个URI都是相对的）：app/controllers/home_controller.rb:19:in `index'

我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:24:02.593

您似乎没有遵循 gem 的说明，即这部分：

1.  使用该令牌来实例化一个准备好调用给定商店的会话。

    token = params[:access_token] session = ShopifyAPI::Session.new("yourshopname.myshopify.com", token) session.valid？# 返回真

6.现在您可以激活会话并设置：

```
ShopifyAPI::Base.activate_session(session) 
```

从这里的 gem 文档：[https ://github.com/Shopify/shopify_api](https://github.com/Shopify/shopify_api)

验证事情是否正常的一个好方法是请求一些数据，例如产品或订单，然后查看请求是否完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T04:01:09.087

很抱歉提出一个旧帖子。但我发现，如果我放入我的控制器：

```
around_filter :shopify_session 
```

它为我解决了很多问题。我正在使用他们提供的 Shopify 应用程序。

# javascript - 包含在函数中的异步 AJAX 请求不适用于 promise()

> ID：11951305
> 
> 赞同：0
> 
> 时间：2012-08-14T11:28:18.907
> 
> 标签：javascript, jquery, ajax, asynchronous

我正在执行正在`wrapped`运行的异步 AJAX 请求。$.ajax 是 Deferred 对象，我可以正确使用 .promise（检查：Initially Loaded），那么我将无法对“现在真正加载”执行相同操作，这将在 ajax 完成加载之前执行。

```
function WSCall(method, data, callback, type, async, bg) {
    // .. code ..
    var promise = $.ajax({
        'url': useSampleData ? useSampleData || null,
        //'async': false,
        'type': 'POST',
        'dataType': (type == null) ? 'json' : type,
        'data': data,
        'beforeSend': bg ? null : LoadingBegin,
        'complete': bg ? null : LoadingEnd,
        'success': callback,
        'error' : bg ? null : function(jqXHR, textStatus, errorThrown) { networkError = 1; }
    });

    promise.done(function(){ console.log('Initially loaded') });
}

function aSyncEvent() { 
    WSCall(
        'status',
        {},
        function (data) {
            if (data.error) { 
                console.log('Error occured'); return ShowDialogAlert(data.error); }
            if (data.statusResult) {
                var parts = data.statusResult.split('-');
                if (parts[1] === '0') { 
                    sId = parts[0]; 
                    console.log('Wow its loaded!'); 
                    return true; 
                }               
            }
        }
    )   
}

$.when( aSyncEvent() ).then( function () { console.log('now really loaded')}); 
```

最初加载并且哇，它的加载将在 ajax 以正确的顺序执行之后正确显示，但是“现在真正加载”将在 ajax 完成执行之前出现。

我请求帮助解决这个问题。

谢谢迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:35:39.223

您是否尝试过退回您的延期？

```
function WSCall(method, data, callback, type, async, bg) {
    // .. code ..
    return promise.done(function(){ console.log('Initially loaded') });
} 
```

和

```
function aSyncEvent() { 
    return WSCall(
        // .. code ..
    );
} 
```

# asp.net - ASP.NET MVC 3 允许基于AD组的内网站点访问

> ID：11951307
> 
> 赞同：2
> 
> 时间：2012-08-14T11:28:25.107
> 
> 标签：asp.net, asp.net-mvc-3

有没有办法允许基于 AD 组的站点范围访问我的 Intranet 站点，而不必`[Authorize]`在每个控制器上使用属性？

我正在使用 Windows 身份验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:34:01.500

在 webconfig 中使用

```
 <system.web>
    <authentication mode="Windows">
    </authentication>
    <authorization>
        <allow users="groupname"/>
        <deny users="*"/>
    </authorization>
 </system.web> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:32:37.530

您可以将 添加`AuthorizeAttribute`到全局过滤器集合中，如此[处](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)所述。

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters) {
    filters.Add(new AuthorizeAttribute());
    filters.Add(new HandleErrorAttribute());
} 
```

为此使用 Web.config 元素通常*不是*一个好主意，`authorization`因为这会[限制基于文件的访问](http://weblogs.asp.net/jgalloway/archive/2012/04/18/asp-net-mvc-authentication-global-authentication-and-allow-anonymous.aspx)。但是，当您保护整个站点时，使用 Web.config 文件也同样有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:36:38.263

# IIS 7 和 IIS 8

1.  打开 IIS 管理器并导航到您的网站。
2.  在功能视图中，双击身份验证。
3.  在身份验证页面上，选择 Windows 身份验证。如果 Windows 身份验证不是一个选项，您需要确保在服务器上安装了 Windows 身份验证。

**要在 Windows 上启用 Windows 身份验证：**

a) 在控制面板中打开“程序和功能”。

b) 选择“打开或关闭 Windows 功能”。

c) 导航到 Internet 信息服务 > 万维网服务 > 安全并确保选中 Windows 身份验证节点。

**要在 Windows Server 上启用 Windows 身份验证：**

a) 在服务器管理器中，选择 Web 服务器 (IIS) 并单击添加角色服务

b) 导航到 Web 服务器 > 安全并确保选中 Windows 身份验证节点。

***最后***

1.  在“操作”窗格中，单击启用以使用 Windows 身份验证。
2.  在身份验证页面上，选择匿名身份验证。
3.  在“操作”窗格中，单击禁用以禁用匿名身份验证。

# IIS 快递

1.  右键单击 Visual Studio 中的项目并选择使用 IIS Express。
2.  在解决方案资源管理器中单击您的项目以选择该项目。
3.  如果“属性”窗格未打开，请将其打开 (F4)。
4.  在项目的“属性”窗格中：

    a) 将“匿名验证”设置为“禁用”。

    b) 将“Windows 身份验证”设置为“启用”。

# javascript - 即使代码正在执行，Firebug 也不会达到断点

> ID：11951308
> 
> 赞同：4
> 
> 时间：2012-08-14T11:28:32.370
> 
> 标签：javascript, debugging, firefox, firebug, breakpoints

在某些地方，当我设置断点时，即使代码正在执行，Firebug 也不会命中断点。在下面的特定情况下，我知道代码正在执行，因为我编写了一个显示的警报。

![在此处输入图像描述](../Images/f640f05a63ac3986b72546b8fc062aa4.png)

正如您在屏幕截图中看到的那样，这并不是因为该行没有绿色的行号。

即使代码正在执行，Firebug 是否有任何理由不会停止到断点？

**编辑 14-08-2012 09:23**

在得到一些评论的帮助后，我尝试添加一个语句“调试器”并且 Firebug 已被停止，但它没有破坏我的 javascript，而是分解成一个奇怪的文件，你可以在下面看到。这些文件是什么？

仅供参考，名为“9”的文件是我的 javascript，但已缩小。

感谢您的帮助。

![在此处输入图像描述](../Images/27867282fcd8a53fbc9b70900f32b37e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:24:22.327

如果涉及异步性，则可能会发生这种情况（例如，您遇到了一个断点，而在此之前，您调用了`setTimeout`）。

由于您的函数被调用`eventCreateOnSuccess`，我猜它是一个异步回调。

在另一个线程中查看我的答案： [https ://stackoverflow.com/a/11834880/245966](https://stackoverflow.com/a/11834880/245966)

你是把断点*只*放在这一行，还是放在其他一些在它之前执行的行中？如果是前者，请尝试禁用所有断点，并仅启用这个断点 - 它应该可以正常工作。否则，真的很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-27T14:53:37.987

我遇到了这个问题，因为我使用的是源地图。在源映射文件中设置的断点不会触发（与 Chrome 不同）。要在 Firefox 中禁用源映射，请单击 Firefox 开发工具右上角的齿轮图标，然后取消选择显示原始源。然后，在原始 JS 文件中设置断点。 [看截图](http://i.stack.imgur.com/2fRMx.png)

# android - 超出 Android Twitter api 速率限制

> ID：11951313
> 
> 赞同：0
> 
> 时间：2012-08-14T11:28:53.700
> 
> 标签：android, api, twitter

嗨，我正处于我的应用程序的测试阶段，因为除了 twitter 提要之外一切正常。出于某种原因，在我的手机上它可以在另一部手机上正常工作，但我收到了这个错误消息

```
08-14 12:24:18.730: W/System.err(25844): org.json.JSONException: Value {"error":"Rate limit exceeded. Clients may not make more than 150 requests per hour.","request":"\/1\/statuses\/user_timeline.json?screen_name=myleague&count=10"} of type org.json.JSONObject cannot be converted to JSONArray
08-14 12:24:18.730: W/System.err(25844):    at org.json.JSON.typeMismatch(JSON.java:111)
08-14 12:24:18.735: W/System.err(25844):    at org.json.JSONArray.<init>(JSONArray.java:91)
08-14 12:24:18.735: W/System.err(25844):    at org.json.JSONArray.<init>(JSONArray.java:103)
08-14 12:24:18.735: W/System.err(25844):    at .TwitterActivity.loadtweets(TwitterActivity.java:186)
08-14 12:24:18.735: W/System.err(25844):    at .TwitterActivity$PostTask.doInBackground(TwitterActivity.java:154)
08-14 12:24:18.735: W/System.err(25844):    at TwitterActivity$PostTask.doInBackground(TwitterActivity.java:1)
08-14 12:24:18.735: W/System.err(25844):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
08-14 12:24:18.735: W/System.err(25844):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-14 12:24:18.735: W/System.err(25844):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-14 12:24:18.735: W/System.err(25844):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-14 12:24:18.735: W/System.err(25844):    at 

java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) 
```

有谁知道为什么我之前在多部手机上尝试过它并且它有效。我认为不会达到速率限制但有点困惑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:39:18.640

发生这种情况是因为本质上这些小部件*`API clients`*与任何其他小部件一样*`API client`*，但它们向 API 发出未经身份验证的请求，而单个小部件`IP address`只有`150 requests/hour`.

如果您的任何其他设备、*Web 浏览器*或*应用程序*在`IP address`给定的时间块向 API 发出未经身份验证的请求，它将从池中***递减。***

当另一个用户从不同的 IP 地址查看小部件时，他们很可能会看到它显示得很好。

您可以要求 Twitter 提高该限制:: 请参阅**[此处的流程](http://dev.twitter.com/pages/rate-limiting)**

您可以查看这个有用的链接：

1.  [链接 1](https://groups.google.com/forum/?fromgroups#!topic/twitter-development-talk/xxtthfKf7Iw%5B1-25%5D)
2.  [链接 2](http://dev.twitter.com/pages/auth)

# sql - 使用 SQL Loader 和 perl 导入 csv 错误

> ID：11951319
> 
> 赞同：2
> 
> 时间：2012-08-14T11:29:20.327
> 
> 标签：sql, perl, oracle, sql-loader

大家好，我有一个问题希望你们能帮助我。我试图包括所有相关信息。我正在构建一个 perl 脚本，该脚本最终将遍历不同的 sqlloader 控制文件并将它们各自的 csv 数据导入到 oracle sql 数据库表中。我在循环它们之前测试多个控制负载。问题是，即使脚本连接到数据库并上传所有 csv 数据而我看不到任何问题，我也会收到错误消息。所有行都被考虑在内，日志并没有真正帮助：

```
 ================================================================================
 [root@sanasr06 scripts]# perl db_upload.pl
 connection made! Starting database upload...
 Error: Can't open import control_general to SQL DB : at db_upload.pl line 44
 ================================================================================ 
```

第44行是系统连接：

> system ("sqlldr $userid\@$sid/$passwd control=@control_pools log=$log silent=all ") or $logger->logdie("Error: Can't open import control data to SQL DB :$!" );

我包括控制文件输出、perl 脚本和控制文件。（提到的跳过的文件是针对 csv 标头的：）

```
 SQL*Loader: Release 11.2.0.1.0 - Production on Tue Aug 14 12:32:36 2012
 Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.
 Control File:   /despliegue/san/project/sql_ctrl/general.ctl
 Character Set UTF8 specified for all input.

 Data File:      /despliegue/san/project/csv/Pools.csv
 Bad File:     /despliegue/san/project/logs/sql_error.bad
 Discard File: /despliegue/san/project/logs/sql_discard.dsc 
 (Allow all discards)

 Number to load: ALL
 Number to skip: 1
 Errors allowed: 50
 Bind array:     64 rows, maximum of 256000 bytes
 Continuation:    none specified
 Path used:      Conventional
 Silent options: FEEDBACK, ERRORS and DISCARDS

 Table I_GENERAL, loaded from every logical record.
 Insert option in effect for this table: TRUNCATE
 TRAILING NULLCOLS option in effect
 Column Name                  Position   Len  Term Encl Datatype
 ------------------------------ ---------- ----- ---- ---- ---------------------
 OBJECTID   (FILLER FIELD)           FIRST     *     ,  O(")  CHARACTER

 DESCRIPTION   (FILLER FIELD)         NEXT     *     ,  O(")  CHARACTER  

 SERIALNUMBER                         NEXT     *     ,  O(")  CHARACTER  

 PRODUCT_NAME                         NEXT     *     ,  O(")  CHARACTER   

 CONTROLLER_VERSION                   NEXT     *     ,  O(")  CHARACTER    

 NUMBER_OF_CONTROLLERS                NEXT     *     ,  O(")  CHARACTER    

 CAPACITY_GB                          NEXT     *     ,  O(")  CHARACTER    

 PRODUCT_CODE                         NEXT     *     ,  O(")  CHARACTER            

 value used for ROWS parameter changed from 64 to 15

 Table I_GENERAL:
 2512 Rows successfully loaded.
 0 Rows not loaded due to data errors.
 0 Rows not loaded because all WHEN clauses were failed.
 0 Rows not loaded because all fields were null.

 Space allocated for bind array:                 247680 bytes(15 rows)
 Read   buffer bytes: 1048576
 Total logical records skipped:          1
 Total logical records read:          2512
 Total logical records rejected:         0
 Total logical records discarded:        0

 Run began on Tue Aug 14 12:32:36 2012
 Run ended on Tue Aug 14 12:32:38 2012 
```

==================================================== =================================

上述文件当然会缩短，但包含所有相关信息。这是 perl 脚本。

```
#!/usr/bin/perl
use strict;
use warnings;
use DBI;
use Log::Log4perl;
#this script loads multiple saved csv files into the database using the control files

################ Initialization #############################################
my $homepath = "/despliegue/san/project";

my $log_conf = "$homepath/logs/log.conf";
Log::Log4perl->init($log_conf)or die("Error: Can't open log.config Does it exist? $!");
my $logger = Log::Log4perl->get_logger();

################ database connection variables####
my ($serial, $model);
my $host="me.notyou33.safety";
my $port="1426";
my $userid="user";
my $passwd="pass";
my $sid="sid";
my $log="$homepath/logs/sql_import.log";

#Control file location
my @control_pools= "$homepath/sql_ctrl/pools.ctl";
my @control_general = "$homepath/sql_ctrl/general.ctl";
my @control_ports= "$homepath/sql_ctrl/ports.ctl";
my @control_replication = "$homepath/sql_ctrl/replication.ctl";

#######################Database connection and data upload #################
my $dbh = DBI->connect( "dbi:Oracle:host=$host;sid=$sid;port=$port", "$userid", "$passwd", 
{ RaiseError => 1}) or $logger->logdie ("Database connection not made: $DBI::errstr");

print " connection made! Starting database upload...\n";

system ("sqlldr $userid\@$sid/$passwd control=@control_general log=$log silent=all") or $logger->logdie("Error: Can't open import control_general to SQL DB :$!");

print "one done moving to next one\n";

system ("sqlldr $userid\@$sid/$passwd control=@control_pools log=$log silent=all ") or $logger->logdie("Error: Can't open import control data to SQL DB :$!");

system ("sqlldr $userid\@$sid/$passwd control=@control_ports log=$log  ") or $logger->logdie("Error: Can't open import control data to SQL DB :$!");

print "three done moving to last one\n";

system ("sqlldr $userid\@$sid/$passwd control=@control_replication log=$log silent=feedback ") or    $logger->logdie("Error: Can't open import control data to SQL DB :$!");

print "................Done\n";
############################################################################
$dbh->disconnect; 
```

==================================================== ================================= 控制文件：

```
OPTIONS (SKIP=1) 
LOAD DATA
CHARACTERSET UTF8
INFILE      '/despliegue/san/project/csv/Pools.csv'
BADFILE     '/despliegue/san/project/logs/sql_error.bad'
DISCARDFILE '/despliegue/san/project/logs/sql_discard.dsc'
TRUNCATE INTO TABLE I_GENERAL 
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY "\"" 
 TRAILING NULLCOLS
( 
OBJECTID FILLER,
DESCRIPTION FILLER,
SERIALNUMBER,
PRODUCT_NAME,
CONTROLLER_VERSION,
NUMBER_OF_CONTROLLERS,
CAPACITY_GB,
PRODUCT_CODE,
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:00:50.690

有`Logdie`哪个应该有`logdie`，AFAIU

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:07:21.043

`system()`返回`wait`调用的返回值，其中包括您执行的程序的返回值。如果一切顺利，这将是`0`. 这与 Perl 中几乎所有其他功能不同，您希望它们返回一些在布尔上下文中计算为 True 的值。因此，使用 or 运算符的常用错误处理无法正常工作。您可能想尝试这样的事情：

```
system ("sqlldr $userid\@$sid/$passwd control=@control_pools log=$log silent=all") == 0
    or $logger->logdie("Error: Can't open import control data to SQL DB :$?"); 
```

[您可以在perldoc -f system](http://perldoc.perl.org/functions/system.html)`system()`下的文档中阅读有关处理返回值的更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T12:26:07.053

问题是系统调用期望返回值 0 是“成功的”。您的 sqlldr 作业，如果它跳过或丢弃记录，将不会返回 0（我已经看到它返回 2，请检查文档以确定）。因此，除非您成功加载所有记录，否则您的 perl 脚本（如所写）将退出。

perl[系统](http://perldoc.perl.org/functions/system.html)
sqlldr[返回码](http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_params.htm#i1005019)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T12:47:26.137

就我而言，我使用反引号（类似于系统）执行 sqlldr，这有助于我在变量中获得任何反馈。

```
my $sqlldr = "sqlldr userid=usr/pss\@TNS control=\'$controlfile\' log=\'$logfile\' silent=header,feedback";
$execution = `$sqlldr 2>&1`; 
```

诀窍是 perl 中的返回值不是 0，您必须将该值右移 8 位以确保获得 0。在我的情况下，我执行以下操作：

```
# Get the returned code from the last execution
my $ret = $? >> 8;

if ($ret == 0) {
    $logger->info("Class DLA_Upload: All rows were successfully loaded");
}
elsif ($ret == 1) {
    die("Class DLA_Upload: Executing sqlldr returned the following error:\n$execution");
}
elsif ($ret == 2) {
    $logger->info("Class DLA_Upload: SQL*Loader was executed but some or all rows were rejected or discarded, please check $logfile for further information");
}
else {
    die("Class DLA_Upload: FATAL ERROR: sqlldr corrupted or not found");
} 
```

为什么，[在这里你有一个来自 Perl 僧侣的链接](http://www.perlmonks.org/?node_id=822569)，它正确地解释了它。

# c++ - 我是否使用头文件中包含的标准库预处理器与相应的实现文件有关系吗？

> ID：11951320
> 
> 赞同：3
> 
> 时间：2012-08-14T11:29:26.053
> 
> 标签：c++

如果我有一个项目

```
main .cpp 
Knife .h and .cpp
Cucumber .h and .cpp 
```

并且我想在 Cucumber 中使用 Knife 的成员，是否使用以下内容是否重要：

```
#include "Knife.h"
#include <iostream>
using namespace std; 
```

在 Cucumber.h 或 Cucumber.cpp 中（假设 Cucumber.cpp 已经包含 Cucumber.h）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:33:39.220

我的建议是尽量减少头文件中包含的文件数量。因此，如果可以选择，我更喜欢包含在源文件中。

修改头文件时，必须重新编译包含该头文件的所有文件。

因此，如果`cucumber.h`包含`knife.h`和`main.cpp`包含`cucumber.h`，并且您修改`knife.h`，所有文件都将被重新编译（`cucumber.cpp`和`knife.cpp`）`main.cpp`。

如果`cucumber.cpp`include`knife.h`和`main.cpp`includes ，而`cucumber.h`你修改`knife.h`, 只会重新编译，这样你的编译时间就减少了。`cucumber.cpp``knife.cpp`

如果您需要在黄瓜中使用刀，您可以这样进行：

```
// Cucumber.hpp
#ifndef CUCUMBER_HPP
#define CUCUMBER_HPP

class Knife;

class Cucumber
{
public :
///...
    private :
    Knife* myKnife
}
#endif

//Cucumber.cpp
#include "Cucumber.hpp"
#include "Knife.hpp

// .. your code here 
```

这个“技巧”被称为“前向声明”。这是 C++ 开发人员众所周知的技巧，他们希望最大限度地减少编译时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:41:02.920

是的，你应该把它放在`.cpp`文件中。

您将拥有更快的构建、更少的依赖项以及更少的工件和噪音——在 iostream 的情况下，GCC 声明：

```
// For construction of filebuffers for cout, cin, cerr, clog et. al.
static ios_base::Init __ioinit; 
```

在命名空间内`std`。`Knife.h`该声明将产生大量（冗余）静态数据，如果包含在许多文件中，则必须在启动时构建这些数据。所以有很多胜利，唯一的损失是你必须明确地包含你实际需要的文件——你需要它们的每个地方（这在某些方面也是一件非常好的事情）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:34:46.087

我所看到的建议是只包含给定源文件所需的最低限度，并尽可能多地包含在标题之外。在编译时，它可能会减少依赖关系。

要注意的另一件事是您的命名空间使用情况。您肯定要小心在标题中包含此类内容。它可能会更改您未计划的文件中的命名空间使用情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T11:46:53.513

作为一般规则，尝试将您的包含添加到实现文件而不是标头中，原因如下：

*   减少潜在的不必要的包含，并将其保留在需要的地方。
*   减少编译时间（在我见过的某些情况下相当显着。）避免过度暴露实现细节。
*   降低出现循环依赖的风险。
*   避免将您的标头用户锁定为不得不间接包含他们可能不想要/不需要的文件。

如果您通过指针引用类或仅在标题中引用，则无需包含适当的标题；一个类声明就足够了。

可能还有很多其他原因 - 以上可能是最重要/最明显的原因。

# jsf-2 - 如何将get请求和参数与JSF和ajax请求一起使用？

> ID：11951323
> 
> 赞同：1
> 
> 时间：2012-08-14T11:29:31.760
> 
> 标签：jsf-2, primefaces, http-request-parameters

我想知道将get请求、参数和ajax请求与JSF一起使用的常用方法是什么？

我想要实现的是将 id 参数传递给 JSF 页面，从数据库中检索具有给定参数的实体并在 JSF 页面上显示该实体。然后，我想对实体进行一些更改并将其填充回数据库（通过 ajax）。

我坚持了一步，我想将更改填充回数据库。这是我到目前为止所拥有的：

我有一个非常简单的 JSF 页面和一个控制器（ManagedBean）。

**JSF 页面**

```
<h:body>
    <h:form id="myForm">
        <p:messages />
        <h:panelGrid columns="3">
            <h:outputLabel value="#{requestController.id}" />
            <p:commandButton value="Update" action="#{requestController.updateEntity}" update="myForm" />
        </h:panelGrid>
    </h:form>
</h:body> 
```

**控制器**

```
@Component("requestController")
@Scope("request")
public class RequestController {

@Value("#{request.getParameter('id')}")
private String id;

private String entity;

@PostConstruct
public void init() {
    if(id == null || id.equals("")) {
        entity = "Entity not found";
    }
    else if("1".equals(id)) {
        entity = "FirstEntity";
    }
    else {
        entity = "SecondEntity";
    }
}

public String getEntity() {
    return entity;
}

public void updateEntity() {
    entity += "_updated";
}

public String getId() {
    return id;
}
} 
```

我可以使用 id 参数打开 JSF 页面，实体将正确显示。但是，当我单击更新按钮时，控制器将被新实例化，并且 id 参数消失了。

JSF中处理请求参数和ajax请求的常用方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:17:06.020

解决方案是在页面中的**每个**请求处添加请求参数。这可以通过`<f:param>`标签来完成。

因此，要使上述代码正常工作，您只需在命令按钮中包含初始请求参数：

```
<p:commandButton value="Update" action="#{requestController.updateEntity}" update="myForm" >
    <f:param name="id" value="#{requestController.id}" />
</p:commandButton> 
```

# ios - 带有 TabBarController 的 SimpleDrillDown 示例

> ID：11951326
> 
> 赞同：0
> 
> 时间：2012-08-14T11:29:45.503
> 
> 标签：ios, uitabbarcontroller, xcode4.3

我一直在尝试 Apple 的 SimpleDrillDown 示例，并尝试将其放入选项卡栏中。问题是视图现在没有显示，我知道是 App Delegate 中的以下代码导致了它。我正在努力改变它以适应标签栏，并希望得到一些指示。

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {

  // Create the data controller and pass it to the root view controller.
  UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
  RootViewController *rootViewController = (RootViewController *)[[navigationController viewControllers]objectAtIndex:0];

  DataController *controller = [[DataController alloc] init];
  rootViewController.dataController = controller;
  self.dataController = controller;
} 
```

我已将其替换为以下内容，但此行`EatCatTVC *rootViewController = (RootViewController *)[[navigationController viewControllers]objectAtIndex:0];`会引发错误

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  // Override point for customization after application launch.
  UITabBarController *tabBar = (UITabBarController *)self.window.rootViewController;
  // Create the data controller and pass it to the root view controller.

  EatCatTVC *rootViewController = (RootViewController *)[[navigationController viewControllers]objectAtIndex:0];
  DataController *controller = [[DataController alloc] init];
  rootViewController.dataController = controller;
  self.dataController = controller;
  return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:13:25.270

您的代码失败，因为您正在访问不存在的对象

```
EatCatTVC *rootViewController = (RootViewController *)[[navigationController viewControllers]objectAtIndex:0]; 
```

`navigationController`在您的“修改”版本中不存在此行。

确保将“rootController”设置为`UITabBarController`类（我假设您确实在 Interface Builder 中进行了设置）。

然后用于`setViewControllers:animated:`提供`UITabBarController' instance with (for instance)`应该存在的 UIViewController` 实例。

# ruby-on-rails - Rails 3 Ubuntu ENV['http_roxy'] 为空

> ID：11951327
> 
> 赞同：0
> 
> 时间：2012-08-14T11:29:45.577
> 
> 标签：ruby-on-rails, ubuntu

为什么在 Ubuntu 下 ENV['http_roxy'] 变量为空，但在 Windows XP 下不为空。

在 Windows XP 下，我使用的是瘦服务器。
在 Ubuntu 下，我使用的是 Nginx 服务器。

# objective-c - Is there any function to retrieve the path associated with an inode?

> ID：11951328
> 
> 赞同：2
> 
> 时间：2012-08-14T11:29:54.980
> 
> 标签：objective-c, macos, inode

I am writing a utility that walks a directory tree on Mac OS X (10.6 and higher) and tries to detect changes that have occurred since the directory was last synchronized with a back-up location.

When I initially synchronize the files and folders I obtain the inode number and store it in the database record for that file or folder:

```
NSString *oldFilePath = /* ... */;
NSError *error = nil;
NSDictionary *attributes = [[NSFileManager defaultManager] attributesOfItemAtPath:oldFilePath error:&error];
/* set database record for oldFilePath to [attributes fileSystemFileNumber] */ 
```

When I encounter a new file or folder I first do a database lookup using the inode number to find the original file, if any.

But in the case where a file has moved from a parent directory to a sub-directory, and I am trying to detect changes to the parent directory I would like to be able to use the saved inode number to identify the new path so that I can distinguish between a move and a delete.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-21T12:36:58.457

在 Mac 上，GetFileInfo 命令执行对 inode 编号的反向查找。

```
GetFileInfo /.vol/234881029/344711 
```

应该产生：

```
file: "/path/to/file"
... 
```

Martin R 的答案仅适用于目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T12:06:45.210

inode 编号仅在文件系统中是唯一的，因此您至少需要设备*和*inode 编号来识别文件。

在 HFS+ 文件系统上，inode 编号实际上与“Macintosh File Id”相同，并且有一个特殊的“/.vol”文件系统允许您通过设备和 inode 查找目录。

例子：

```
$ cd /.vol/234881029/342711
$ pwd
/Volumes/Data/tmpwork/test20/test20.xcodeproj
$ stat .
234881029 342711 drwxr-xr-x 5 martin staff 0 170 ...... 
```

如您所见，234881029 是“/Volumes/Data”的设备编号，342711 是该文件系统中“tmpwork/test20/test20.xcodeproj”的 inode 编号，并且

```
cd /.vol/<deviceNo>/<inodeNo> 
```

将您直接转移到该文件夹​​。您现在可以使用`getcwd()`来确定该文件夹的真实路径。

“/.vol”文件系统记录在旧版[技术问答 QA1113](http://developer.apple.com/legacy/mac/library/#qa/qa2001/qa1113.html#//apple_ref/doc/uid/DTS10001661)中。

免责声明：我只在 OS X 10.7 上尝试过，我很确定它适用于旧系统。我不知道您是否可以在 OS X 的未来版本中依赖此功能。而且它非常特定于 HFS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T11:42:31.120

在类 Unix 系统上，许多文件名可能引用相同的 inode，因此您必须搜索文件系统。我不知道 MacOS 是否提供了快捷方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T23:14:06.537

请注意，如上所述，/.vol/ 'magic' 目录需要卷的设备 ID，以及目录或文件的 inode。您可以将卷的设备 ID 作为返回的第一个数字，如此[处不同答案](https://superuser.com/questions/163941/what-is-the-vol-directory-for)`stat`中所述。

```
# stat returns device ID as '234881026' and confirms inode is '32659974'
~$ stat /Volumes/Foo
234881026 32659974 lrwxr-xr-x 1 root admin 0 1 ... /Volumes/Foo

# access file using ./vol/<device ID>/<inode>
~$ cd /.vol/234881026/1017800
:../Prague 2011 March$

~$ GetFileInfo /.vol/234881026/1017800/IMG_3731.JPG
file: "/Users/roger/Pictures/Prague 2011 March/IMG_3731.JPG" 
```

# graph - Hadoop MapReduce implementation of shortest PATH in a graph, not just the distance

> ID：11951329
> 
> 赞同：3
> 
> 时间：2012-08-14T11:30:01.997
> 
> 标签：graph, hadoop, mapreduce, shortest-path

I have been looking for "MapReduce implementation of Shortest path search algorithms".

However, all the instances I could find "computed the shortest distance form node x to y", and none actually output the "**actual shortest path like x-a-b-c-y**".

As for what am I trying to achieve is that I have graphs with hundreds of 1000s of nodes and I need to perform frequent pattern analysis on shortest paths among the various nodes. This is for a research project I am working on.

It would be a great help if some one could point me to some implementation (if it exists) or give some pointers as to `how to hack the existing SSSP implementations to generate the paths along with the distances`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:52:53.427

基本上，这些实现与某种消息传递一起工作。因此消息在 map 和 reduce 阶段之间发送到 HDFS。

在 reducer 中，它们按距离分组和过滤，最小的距离获胜。在这种情况下更新距离时，您必须设置消息来自的顶点（嗯，可能是某个 ID）。

因此，每个顶点都有额外的空间要求，但您可以重建图中每条可能的最短路径。

根据您的评论：

很可能是

> 我需要编写另一个顶点对象类来保存这些附加信息。感谢您的提示，尽管如果您能指出我可以在何时何地捕获最小重量来自何处的信息，这将非常有帮助，可能来自您博客的任何内容:-)

是的，对于 Apache Hama 来说，这可能是一个很酷的主题。大多数实现只是考虑成本而不是真正的路径。在您的情况下（来自您上面链接的博客），您将必须提取一个顶点类，该类实际上将相邻顶点保存为`LongWritable`（可能是一个列表而不是文本对象上的这个拆分）并简单地添加一个父或源 id 作为场（当然也是`LongWritable`）。您将在映射器中传播时设置此项，即在当前关键节点的相邻顶点上循环的 for 循环。

在化简器中，您将在迭代分组值时更新某处的最低值，在那里您必须将关键顶点中的源顶点设置为更新为最小值的顶点。

您实际上可以从我的博客中获取一些顶点类： [Source](http://codingwiththomas.blogspot.de/2011/04/graph-exploration-with-hadoop-mapreduce.html) 或直接从存储库中获取： [Source](http://code.google.com/p/hama-shortest-paths/source/browse/#svn/trunk/hama-gsoc/src/de/jungblut/mapreduce/graphSource)

也许它对你有帮助，它是完全无人维护的，所以如果你有一个具体的问题，请回来找我。

这是 BSP 中与 Apache Hama 相同的算法：

[https://github.com/thomasjungblut/tjungblut-graph/blob/master/src/de/jungblut/graph/bsp/SSSP.java](https://github.com/thomasjungblut/tjungblut-graph/blob/master/src/de/jungblut/graph/bsp/SSSP.java)

# web-applications - How does Google implement "Undo" in GMail?

> ID：11951333
> 
> 赞同：0
> 
> 时间：2012-08-14T11:30:33.147
> 
> 标签：web-applications, undo

I've read about [how to implement Undo in web applications](http://www.azarask.in/blog/post/undo-made-easy-with-ajax-part-1/). There are several drawbacks to this light-weight approach on the client-side.

Does anyone know how Google implements "Undo" in their apps, e.g. GMail? Is it a client-side implementation like Aza Raskin's solution? Is it some kind of "Delete" record in a DB that gets removed again? Or something entirely different?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:18:28.583

下面的博客解释了它是如何使用 python 完成的。感谢 Alexandre Bourget 提出的建议

[http://blog.abourget.net/2010/2/20/gmail-undo-cancel-feature-introducing-python-webundo/](http://blog.abourget.net/2010/2/20/gmail-undo-cancel-feature-introducing-python-webundo/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:03:23.970

他们可能会将电子邮件的实际发送延迟一段时间，您有机会取消它。

# java - Propagate exception caught during Display.syncExec to invoking thread

> ID：11951336
> 
> 赞同：1
> 
> 时间：2012-08-14T11:30:45.070
> 
> 标签：java, concurrency, swt

A Pattern that I've seen a few times now and still am unsure if it's correct: I need to invoke some code on the SWT UI thread via Display.syncExec. The code that runs in the UI thread catches a checked exception and wants to propagate this exception to the waiting thread. The pattern looks like this:

```
SomeCheckedException[] exc = new SomeCheckedException[] { null };
display.syncExec(new Runnable(){
   public void run(){
      try {
         new Work().something();
      } catch (SomeCheckedException e){
         exc[0] = e;
      }
   }
});

if (exc[0] != null){
 //..
} 
```

Even if there's no real concurrency here, I still think that this is not really safe in terms of visibility: It could well happen that the UI thread stores an exception, but the invoking thread won't see this and still read 'null' when accessing the array after taking control again. Am I right? Is the best way then just to catch SWTException and check its throwable field via `instanceof`? EDIT: Hm, that won't work so easy if it's a checked exception. I'd need to throw the SWTException from the catch block myself. Better solutions?

Thanks for your help and comments.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:01:14.263

这是[AtomicReference](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicReference.html)的一种情况：

```
 void foo() throws SomeCheckedException {
    final AtomicReference<SomeCheckedException> exRef = new AtomicReference<>();
    display.syncExec(new Runnable() {
      public void run() {
        try {
          new Work().something();
        } catch (SomeCheckedException e) {
          exRef.set(e);
        }
      }
    });
    SomeCheckedException ex = exRef.get();
    if (ex != null) {
      throw ex;
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:46:01.223

这里有真正的并发，因为 UI Thread 与你的主线程是不同的线程。这肯定会导致 exc[0] 为空。

如果您希望主线程等到 UI 线程填满，则必须同步对数组的访问，然后将异常放在那里。你也需要计时。可能您的主线程将不得不一遍又一遍地检查，直到它被填满。或者您可以暂停它（睡眠）并让 UI 线程唤醒它（通知）。

编辑：等待线程的解决方案，没有通知，只是休眠几毫秒，然后检查。

```
//object properties
volatile Exception e = null;
volatile Exception completed = false;
...
display.syncExec(new Runnable(){
    public void run(){
        try
        {
          ...
          e = thrownException;
          ....
        } catch (...){};
        //must be after the try block:
        completed = true;
    }
...
while(! completed)
    Thread.sleep(500) //or something, lookup the javadoc
//after the while ends, you can safely access e 
```

# javascript - 渲染 Ext.view.View 后调用函数

> ID：11951338
> 
> 赞同：0
> 
> 时间：2012-08-14T11:30:50.860
> 
> 标签：javascript, extjs

渲染Ext.view.View后如何调用函数？

```
Ext.create('Ext.view.View', {
store: Ext.data.StoreManager.lookup('imagesStore'),
tpl: imageTpl,
itemSelector: 'div.thumb-wrap',
emptyText: 'No images available',
renderTo: Ext.getBody()}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:38:25.663

您应该像这样使用 afterrender 事件：

```
Ext.create('Ext.view.View', {
    store: Ext.data.StoreManager.lookup('imagesStore'),
    tpl: imageTpl,
    itemSelector: 'div.thumb-wrap',
    emptyText: 'No images available',
    renderTo: Ext.getBody(),
    listeners: {
        afterrender: function() {
           // Do something here
        }
    }
}); 
```

您可以在[此处访问相关文档](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.view.View-event-afterrender)

# php - Is it possible to build a RewriteRule regex with database values?

> ID：11951344
> 
> 赞同：0
> 
> 时间：2012-08-14T11:31:21.233
> 
> 标签：php, .htaccess

When my client adds a page to the site, the new pagename should be appended to a RewiteRule regex. So with, for instance fwrite(), I would like PHP to change that RewiteRule regex with values retracted from the database. If this could be done, are there any pitfalls in the process?

> Edit: handling in a PHP script would be the solution, if there would'nt be more to it... First domain/index.php?page=pagename is 301 redirected to "domain/pagename" to warn the visitor this page is permanently moved - (this is the old PUBLIC location of the URL and should give this 301). Then requests like "domain/pagename" (the new public location), would be silently,internally rewritten to domain/index.php?page=pagename where verification takes place and a 404 is given when not valid. But just the key, the "page" part of ?page=pagename, is static and can be verified and will give a 404 directly from within the .htaccess . Now, requests like domain/index.php?page=crap will first nicely give a 301 like the valid domain/index.php?page=pagename does, and only when arrived in the index.php can be identified as crap. So there is still a need to get the pagenames from the database to inside the .htaccess.

This is a sample of the .htacces content to give some background to this problem:

```
ErrorDocument 404 http://localhost/testsite/404.php

RewriteEngine on
RewriteBase /testsite/

## block craprequests without extension like domain/crap > 404  
# The requests domain/pagename that do not go to existing pages, will now be redirected with a 302 to index.php?page=pagename and only then give a 404 through the errorcheck in the code.
# This should be done here, with a RewriteCond regex with database content
RewriteCond %{REQUEST_URI} !404.php$
RewriteRule .* 404.php [R=404,L]

## block-direct-queries ##
RewriteCond %{QUERY_STRING} !marker=1$
RewriteCond %{QUERY_STRING} page=(.*)
RewriteRule ^.*$ %1? [R=301,L]

## strip-extensions ##
RewriteCond %{QUERY_STRING} !.
RewriteCond %{REQUEST_URI} !404.php$
RewriteRule ^([\w+%*\d*\+*\-*]+)\.(php[\s]{0,3}|htm[\s]{0,3}|html[\s]{0,3})$ $1 [R=301,L]

## put-querystring
RewriteRule ^([\w\-_]+)\/?$ index.php?page=$1&marker=1 [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:00:22.547

很抱歉再次向您重复这一点，但没有必要将页面名称存储在 .htaccess 中。这一切都可以在 PHP 中更简单地完成。

您需要的唯一重写规则是：

```
RewriteCond %{REQUEST_URI} !^/?index\.php$
RewriteRule .* /index.php [L,QSA] 
```

现在，在 PHP 中，您可以执行以下操作：

```
// The important point here is that $_SERVER['REQUEST_URI'] contains the actual
// path the user typed into their browser, which is what you are interested in

if (strtolower(basename(parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH))) === 'index.php') {
    // The user directly requested index.php
    if (!empty($_GET['page']) || value_of_page_is_crap()) {
        // The user requested a bad page
        header("{$_SERVER['SERVER_PROTOCOL']} 404 Not Found");
    } else {
        // Redirect to correct URL
        header("{$_SERVER['SERVER_PROTOCOL']} 301 Moved Permanently");
        header("Location: http://{$_SERVER['HTTP_HOST']}/{$_GET['page']}");
    }
    exit;
}

// The request is allowed to continue
$requestedPage = pathinfo($_SERVER['REQUEST_URI'], PATHINFO_FILENAME); 
```

.htaccess 将通过 PHP 盲目地路由每个请求，其中可以使用比 mod_rewrite 笨拙的基于 PCRE 的规则更精确的逻辑。

PHP 脚本检查用户在浏览器地址栏中键入的 URI。如果他们直接请求`index.php`，它将检查是否`$_GET['page']`包含合理的值，如果包含，则将它们重定向到正确的 URL，如果没有响应 404。如果用户没有直接请求 index.php，则脚本可以继续。我添加了一个示例行来展示如何提取*他们*请求的页面的值，但是如何从这里继续取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:35:19.377

这很可能是可能的（尽管写入权限可能是一个问题）。但是，通过 index.php 文件路由来自客户端的所有请求并让 PHP 处理路由不是更好的方法吗？

这样，您将具有最大的灵活性，并且您不必做“hacky”的事情。

**编辑**

所有形式的重定向都可以通过 PHP 完成。例如一个`301`重定向的例子：

```
header ('HTTP/1.1 301 Moved Permanently');
header ('Location: http://example.com/new/path'); // note the full address
exit(); 
```

有关使用的更多信息，请参阅[手册](http://php.net/manual/en/function.header.php)`header()`。

# jquery - jquery validate - hide error message if field left blank or default value

> ID：11951347
> 
> 赞同：1
> 
> 时间：2012-08-14T11:31:27.817
> 
> 标签：jquery, validation, jquery-validate

I am using the jquery validate plugin with a custom validator.

I would like to use the error message as a tooltip so it appears on focus. The code below does this, but as the field is not required I need the error message (tooltip) to hide if the value is nothing or the default value on blur.

[http://jsfiddle.net/Yr4Dw/2/](http://jsfiddle.net/Yr4Dw/2/)

```
$.validator.addMethod("showOnfocus", function(value, element) {
    var re = new RegExp(/^([FG]?\d{5}|\d{5}[AB])$/);
    return value !== element.defaultValue && re.test(value);
});

$("#myform").validate({
    debug: true,
    rules: {
        field: {
            showOnfocus: true
        }
    },
    messages: {
        field: {
            showOnfocus: "This message will act as a tooltip"
        }
    },
    success: function(label) {
        label.text("Good result!");
    },
    submitHandler: function() {
        alert("submitted!");
    }
});

//I WOULD LIKE TO THINK SOME OF THIS COULD BE INCLUDED IN THE VALIDATE CODE ABOVE - NOT SURE HOW THOUGH
$("#field").focus(function() {
    if ($(this).val() == $(this).prop("defaultValue")) {
        $(this).val("");
    }
    $(this).valid();
});

$("#field").blur(function() {
    if ($(this).val() == "") {
        $(this).val($(this).prop("defaultValue"));
    }
});

$("#field").keyup(function() {
    $(this).valid();
});​ 
```

html:

```
<form id="myform">
    <input class="left" id="field" name="field" value="hello" defaultValue="hello" />
  <br/>
  <input type="submit" value="Validate!" />
</form> 
```

# vba - Error in opening a report from a form

> ID：11951348
> 
> 赞同：0
> 
> 时间：2012-08-14T11:31:34.117
> 
> 标签：vba, ms-access, ms-access-2007, ms-access-2010

I've designed a simple form and a few reports in Access. I have designed it in Windows 7, with Access 2010, and when I open it on a Windows XP PC with Access runtime, I get the error "The expression on click you entered as the event property setting produced the following error". Can anyone help me with this one, please?

```
Private Sub cmdShoppingList_Click()
  On Error GoTo Err_cmdShoppingList_Click
    Dim stDocName As String

    stDocName = "Shopping List"
    DoCmd.OpenReport stDocName, acViewReport
  Exit_cmdShoppingList_Click:
    Exit Sub

  Err_cmdShoppingList_Click:
    MsgBox Err.Description
    Resume Exit_cmdShoppingList_Click

End Sub 
```

I hope to get the answer soon. Here is a pic of my error message:

![](../Images/55f8bff50855f27abf888a1cb18f492e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:53:48.940

（太愚蠢了，我不能在没有至少 50 名声望的情况下发表“评论”）

由于它适用于 Windows 7，但不适用于 Windows XP，因此在我看来，您可能已在仅存在于 Windows 7 中的报告上放置了 ActiveX 控件。在分发 MS Access 数据库/项目时，您将需要分发任何 DLL /OCXs 您已用于目标计算机。

# android - Android: How to not publish an app to Google Play and still be able to let others easily install and test the app?

> ID：11951352
> 
> 赞同：2
> 
> 时间：2012-08-14T11:31:41.727
> 
> 标签：android, testing, export, publish

I created a small Android project during my free time, and I decided to give a group of people I specifically know of to try the app out. The group of people created a forum community where everyone gathers around to share some of their own projects. They usually upload their programs written in C++, Java, C#, and sometimes give out tips to newcomers.

I wrote an app that does bitmap manipulation stuffs, and was hoping that others can easily test the app out without having to go through Google Play market. I just don't want my app to go entirely public to anyone in the market.

I told them that I am going to upload an Android app so they can check my project out. I understood that they are all not Android developers, so they haven't seen anyone in the community upload an Android app onto the forums yet.

So, I started to do a little research on this.

I thought about exporting the project as an unsigned Android app, but a Google search made me realize that unsigned Android app can't be installed onto an Android phone, even with "Unknown sources - Allow installation of non-Market apps" ticked in the Settings -> Security menu.

Another way I tried to do is to self-sign the application. I give the app 1 year before the certification is invalid, signed the app by using the Eclipse -> Export Android application wizard. I uploaded the app, and got notified by one of the group of people that the app can't be installed onto their phone.

This is where I am stuck and now I'm clearly in need of assistence. Is there a way you can upload an Android app onto a forum, let another user download the APK file, and install it onto their phone with no hassle? Just want to keep this testing session in private, if it matters.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:51:08.597

我用来让用户下载和测试应用程序的一种简单方法是要求他们这样做：

设置 -> 应用程序 -> 未知来源 -> 勾选复选框

然后导出您应用的未签名 APK 并提供给他们。一种简单的方法是将 APK 上传到保管箱或将其托管在您的网站上，或者只是将文件通过电子邮件发送给他们。一旦他们下载了 APK，他们只需打开它，它就会安装并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:36:44.853

如果您勾选设置 -> 安全菜单中的选项，您可以安装未签名的 APK 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T14:19:32.203

您可以将您的 apk 作为 alpha 版本上传到 GP，发布并允许对这些人进行测试。

他们可以从 GP 下载这个应用程序。

# blackberry - blackberry sdk installtion with netbeans

> ID：11951359
> 
> 赞同：0
> 
> 时间：2012-08-14T11:32:12.713
> 
> 标签：blackberry, netbeans, java-me

Any one can tell me that how to Blackberry sdk installation with netbeans for Mobile application development

i am trying to plugin but not able to do .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:31:42.210

我过去使用过[本教程](http://smhumayun.blogspot.com/2007/11/j2me-development-with-netbeans.html)。您可以忽略有关 J2ME Polish 的部分。另外，我认为**Mobility Pack**现在可能会随新版本的 Netbeans 一起提供（以前没有这样做）。或者，您可能需要确保在**Netbeans -> Tools -> Plugins菜单中安装了****Java ME**插件。

他引用了更旧的 SDK 版本，但只要您在此处从 BlackBerry[下载较新的 JDE 版本（SDK），相同的基本说明应该对您有用。](https://developer.blackberry.com/java/download/previousjdeversions/)

近年来，我越来越少使用 Netbeans，而越来越多地使用[BlackBerry Eclipse 插件](https://developer.blackberry.com/java/download/eclipse)，尽管我更喜欢 Netbeans 作为通用 IDE。不幸的是，您会发现 RIM 目前专注于 Eclipse。

但是，如果您愿意，您应该仍然可以使用 Netbeans。

# c++ - “MyClass mc = MyClass()”还是“MyClass mc”？

> ID：11951365
> 
> 赞同：4
> 
> 时间：2012-08-14T11:32:33.480
> 
> 标签：c++, initialization

和有什么区别

```
MyClass mc = MyClass(); 
```

和

```
MyClass mc; 
```

在 C++ 中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T11:36:55.757

第一个调用复制构造函数，以临时对象作为参数 -`MyClass()`创建临时对象。

第二个调用默认构造函数。

实际上，在大多数情况下，它们都针对相同的代码进行了优化，但这就是语义上的差异。

* * *

正如*Negal*提到的，这种情况与 POD 类型有点不同。当“MyClass”是 POD 时，第二个片段不会 value-initialize `mc`，而第一个片段会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:37:18.347

第一个是复制初始化，第二个是默认初始化。

例如，以下代码将无法编译：

```
class MyC
{
public:
MyC(){}
private:
MyC(const MyC&) {}
};

int main()
{
  MyC myc = MyC();
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:34:06.307

自定义复制构造函数和默认构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:36:43.980

首先创建`temp-object`通过`c-tor without arguments`，然后调用`copy-ctor`对象（不考虑任何优化）。第二次调用`c-tor without arguments`，没有副本。通过编译器优化，两种情况都是平等的。

差异在于基本类型，所以

```
// initialized to something
int c;
// initialized to int() that is 0 by standard.
int c = int(); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-14T11:39:38.120

没有不同。默认 ctor 调用。语法糖）没有复制ctor！！！！

```
class PPP{
public:
    PPP(PPP&){
        std::cout<<"PPP1"<<std::endl;
    }
    PPP(const PPP&){
        std::cout<<"PPP2"<<std::endl;
    }
    PPP(){
        std::cout<<"PPP3"<<std::endl;
    }
};
PPP ppp = PPP(); 
```

并且您在控制台中仅找到 PPP。

# javascript - Open CKEDITOR dialog without CKEDITOR

> ID：11951370
> 
> 赞同：1
> 
> 时间：2012-08-14T11:32:48.623
> 
> 标签：javascript, ckeditor

I was triying to open a CKEDITOR dialog without a CKEDITOR editor. I have included the CKEDITOR javascript file and included

```
var dialogObj = new CKEDITOR.dialog( editor, 'smiley' ); 
```

But obviusly editor is not defined and do not know how to instance it without a CKEDITOR input. I'm using CKEDITOR 3.6.4

¿Any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-28T06:24:35.230

1方式->在这种情况下，您应该添加document.ptototype.dialog并根据需要自定义所有对话框插件。

2方式->我们可以在页面中添加ckeditor并使用css隐藏它然后我们可以使用它

# android - eclipse中的BlueStack模拟器

> ID：11951374
> 
> 赞同：1
> 
> 时间：2012-08-14T11:33:18.520
> 
> 标签：android

我已经安装了 BlueStack 模拟器并运行它，之后我运行了 eclipse，但是当我切换 DDMS 透视图时，设备窗口上没有运行模拟器。我尝试在 adb util 中使用 adb connect 127.0.0.1 命令，但得到相同的结果。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:39:57.730

但在我的情况下，当我在第一次安装后重新启动系统时......它工作得很好......

# python - 检查 git 服务器上的样式

> ID：11951375
> 
> 赞同：0
> 
> 时间：2012-08-14T11:33:19.080
> 
> 标签：python, git, hook

有没有办法在 git 服务器端设置 Python 源代码检查？

像这样的东西（这是`pre-commit`钩子）：

```
#!/bin/sh
FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -e '\.py$')

if [ -n "$FILES" ]; then
    flake8 -r $FILES
fi 
```

但在服务器端（可能带有`update`钩子）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:40:36.653

您可以添加一个更新挂钩，它将以 . 格式获取输入文件`${ref} ${oldrev} ${newrev}`，例如`refs/heads/master ddf343f635fe4440cad528e12f96f28bd50aa099 f59abbf28696389c91c2697c7db31f20cfa91d8a`.

有了这些知识，您就可以在这两个提交之间进行比较，列出存在的文件，检查它们的语法，并在您不喜欢它们的情况下失败。如果推送了一个全新的分支，`${oldrev}`则将是 40 个零，因此您可能必须检查新提交中的所有文件。

# ios5 - iOS5 上 webkit 错误的解决方法。错误描述：具有 -webkit-transform: scale(x) 父级的 iframe 的内容被缩放 2 倍

> ID：11951378
> 
> 赞同：0
> 
> 时间：2012-08-14T11:33:33.137
> 
> 标签：ios5, webkit

我遇到了一个 webkit 错误 [1] 的问题。长话短说，如果 iframe 的祖先带有 -webkit-transform: scale(x) ，则 iframe 的内容将缩放 2 倍。发生这种情况的平台是 iOS5（在 Safari 和 UIWebView 中）。我已经在 iOS4、iOS6 和 webkit 的最新夜间版本上进行了测试，但我无法在那里重现它。所以这个问题似乎在较新的版本中得到了解决。

我尝试了其中一个错误评论 [2] 中描述的解决方法，但它并没有完全解决问题。为了让它工作，我必须首先添加 -webkit-transform-style: preserve-3d 然后在超时内添加 -webkit-transform: scale(x) 到同一个元素。这是可以接受的，但是如果在 iframe 的祖先之一中更改了任何继承属性，则解决方法将无效并且内容再次缩放 2 倍。

有人知道解决此问题的更好方法吗？

链接：

[1] 错误链接：[https ://bugs.webkit.org/show_bug.cgi?id=15676](https://bugs.webkit.org/show_bug.cgi?id=15676)

[2] 解决方法说明：[https ://bugs.webkit.org/show_bug.cgi?id=15676#c10](https://bugs.webkit.org/show_bug.cgi?id=15676#c10)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T23:36:53.907

我遇到了同样的问题并设法以这种方式解决它：

```
webkit-transform: scale(x)
zoom: 1/x 
```

此外，您可能希望在 Android 2.x 上对几乎所有内容进行相同的修复

尽管在 iOS5.1 上我仍然有一个问题，尽管内容被正确缩放，如果它的一部分在可见视口后面（在溢出：隐藏），它在缩放的 iframe 中仍然显示为空白。

# symfony - 为奏鸣曲管理员扩展树枝模板时的最大功能嵌套

> ID：11951379
> 
> 赞同：1
> 
> 时间：2012-08-14T11:33:33.620
> 
> 标签：symfony, twig, sonata-admin

我正在使用以下模板来扩展特定的小部件

```
{% use 'SonataAdminBundle:Form:form_admin_fields.html.twig' %}
{% form_theme form _self %}
{% block textarea_widget %}
  {% spaceless %}
  <div class="textarea_widget">
    <textarea {{ block('widget_attributes') }}>{{ value|raw }}   
    </textarea>
  </div>
  {% endspaceless %}
{% endblock textarea_widget %} 
```

主要问题是它达到了最大的功能嵌套。扩展模板时必须有一些无限递归。当我从扩展模板复制代码时，一切正常。知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:33:36.667

这可能是由您必须使用参数配置的 xDebug 引起的`xdebug.max_nesting_level`。默认值为 100，但我通常将其升级到 1000 以保持安静。

在 Debian 上，它位于`/etc/php5/conf.d/xdebug.ini`.

关于这个参数的官方文档：

> xdebug.max_nesting_level 类型：整数，默认值：100
> 
> 控制无限递归保护的保护机制。此设置的值是在中止脚本之前允许的最大嵌套函数级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:46:21.620

要修复此错误，我需要在 app/Resources/SonataAdmin/views/Form 中创建 form_admin_fields.html.twig 文件，其内容如下：

```
 {% block textarea_widget %}
    {% spaceless %}
    <div class="textarea_widget">
        <textarea {{ block('widget_attributes') }}>{{ value|raw }}   </textarea>
    </div>
    {% endspaceless %}
    {% endblock %} 
```

所以没有必要使用或扩展模板，只需重新定义一些块。

# visual-c++ - 许多未声明的标识符与使用 GLFW 的 OpenGL 相关

> ID：11951380
> 
> 赞同：8
> 
> 时间：2012-08-14T11:33:34.260
> 
> 标签：visual-c++, opengl, glfw

我正在尝试在 Visual c++ 2008 (Windows 7) 中使用 GLFW 设置 OpenGL 项目。我已将 GLFW 包含和库目录添加到项目的包含和库路径中，并将以下内容放入其他依赖项中：

```
GLFW.lib glu32.lib opengl32.lib 
```

这就是我需要做的一切，不是吗？但是当我尝试编译任何 OpenGL 程序时（除了一个非常简单的程序，它只使用 glClear 清除屏幕），我得到一堆未声明的标识符和未找到标识符的错误。知道为什么会发生这种情况吗？这是完整的错误列表：

```
1>Compiling...
1>main.cpp
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(9) : error C2146: syntax error : missing ';' before identifier 'VBO'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(9) : error C2377: 'GLuint' : redefinition; typedef cannot be overloaded with any other symbol
1>        c:\program files\microsoft sdks\windows\v6.0a\include\gl\gl.h(52) : see declaration of 'GLuint'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(9) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(43) : error C3861: 'glEnableVertexAttribArray': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(45) : error C2065: 'GL_ARRAY_BUFFER' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(45) : error C3861: 'glBindBuffer': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(47) : error C3861: 'glVertexAttribPointer': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(55) : error C3861: 'glDisableVertexAttribArray': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(78) : error C3861: 'glGenBuffers': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(80) : error C2065: 'GL_ARRAY_BUFFER' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(80) : error C3861: 'glBindBuffer': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(82) : error C2065: 'GL_ARRAY_BUFFER' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(82) : error C2065: 'GL_STATIC_DRAW' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(82) : error C3861: 'glBufferData': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(87) : error C2146: syntax error : missing ')' before identifier 'ShaderProgram'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(87) : error C2182: 'AddShader' : illegal use of type 'void'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(87) : error C2440: 'initializing' : cannot convert from 'Vector3f' to 'int'
1>        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(87) : error C2059: syntax error : ')'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(89) : error C2143: syntax error : missing ';' before '{'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(89) : error C2447: '{' : missing function header (old-style formal list?)
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(144) : error C2146: syntax error : missing ';' before identifier 'ShaderProgram'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(144) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(144) : error C3861: 'glCreateProgram': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(148) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(158) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(158) : error C2065: 'GL_VERTEX_SHADER' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(160) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(160) : error C2065: 'GL_FRAGMENT_SHADER' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(166) : error C2065: 'GLchar' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(166) : error C2146: syntax error : missing ';' before identifier 'ErrorLog'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(166) : error C2065: 'ErrorLog' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(166) : error C2059: syntax error : '{'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(166) : error C2143: syntax error : missing ';' before '{'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(166) : error C2143: syntax error : missing ';' before '}'
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(170) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(170) : error C3861: 'glLinkProgram': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(172) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(172) : error C2065: 'GL_LINK_STATUS' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(172) : error C3861: 'glGetProgramiv': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(176) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(176) : error C2065: 'ErrorLog' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(176) : error C2070: ''unknown-type'': illegal sizeof operand
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(176) : error C2065: 'ErrorLog' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(176) : error C3861: 'glGetProgramInfoLog': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(178) : error C2065: 'ErrorLog' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(186) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(186) : error C3861: 'glValidateProgram': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(188) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(188) : error C2065: 'GL_VALIDATE_STATUS' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(188) : error C3861: 'glGetProgramiv': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(192) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(192) : error C2065: 'ErrorLog' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(192) : error C2070: ''unknown-type'': illegal sizeof operand
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(192) : error C2065: 'ErrorLog' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(192) : error C3861: 'glGetProgramInfoLog': identifier not found
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(194) : error C2065: 'ErrorLog' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(202) : error C2065: 'ShaderProgram' : undeclared identifier
1>c:\glfw-2.7.3\opengl ikasi\main.cpp(202) : error C3861: 'glUseProgram': identifier not found 
```

编辑：这是整个程序

```
#include <stdio.h>

#include <string.h>
#include <GL/glfw.h>

#include "math_3d.h"

GLuint VBO;

static const char* pVS = "                                                    \n\
#version 150                                                                  \n\
\n\
layout (location = 0) in vec3 Position;                                       \n\
\n\
void main()                                                                   \n\
{                                                                             \n\
gl_Position = vec4(0.5 * Position.x, 0.5 * Position.y, Position.z, 1.0);  \n\
}";

static const char* pFS = "                                                    \n\
#version 150                                                                  \n\
\n\
out vec4 FragColor;                                                           \n\
\n\
void main()                                                                   \n\
{                                                                             \n\
FragColor = vec4(1.0, 0.0, 0.0, 1.0);                                     \n\
}";

static void RenderSceneCB()

{

    glClear(GL_COLOR_BUFFER_BIT);

    glEnableVertexAttribArray(0);

    glBindBuffer(GL_ARRAY_BUFFER, VBO);

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glDrawArrays(GL_TRIANGLES, 0, 3);

    glDisableVertexAttribArray(0);

    glfwSwapBuffers();

}

static void CreateVertexBuffer()

{

    Vector3f Vertices[3];

    Vertices[0] = Vector3f(-1.0f, -1.0f, 0.0f);

    Vertices[1] = Vector3f(1.0f, -1.0f, 0.0f);

    Vertices[2] = Vector3f(0.0f, 1.0f, 0.0f);

    glGenBuffers(1, &VBO);

glBindBuffer(GL_ARRAY_BUFFER, VBO);

glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

}

static void AddShader(GLuint ShaderProgram, const char* pShaderText, GLenum ShaderType)

{

    GLuint ShaderObj = glCreateShader(ShaderType);

    if (ShaderObj == 0) {

        fprintf(stderr, "Error creating shader type %d\n", ShaderType);

        return ;

    }

    const GLchar* p[1];

    p[0] = pShaderText;

    GLint Lengths[1];

    Lengths[0]= strlen(pShaderText);

    glShaderSource(ShaderObj, 1, p, Lengths);

    glCompileShader(ShaderObj);

    GLint success;

    glGetShaderiv(ShaderObj, GL_COMPILE_STATUS, &success);

    if (!success) {

        GLchar InfoLog[1024];

        glGetShaderInfoLog(ShaderObj, 1024, NULL, InfoLog);

        fprintf(stderr, "Error compiling shader type %d: '%s'\n", ShaderType, InfoLog);

        return;

    }

    glAttachShader(ShaderProgram, ShaderObj);

}

static void CompileShaders()

{

    GLuint ShaderProgram = glCreateProgram();

    if (ShaderProgram == 0) {

        fprintf(stderr, "Error creating shader program\n");

        return;

    }

    AddShader(ShaderProgram, pVS, GL_VERTEX_SHADER);

    AddShader(ShaderProgram, pFS, GL_FRAGMENT_SHADER);

    GLint Success = 0;

    GLchar ErrorLog[1024] = { 0 };

    glLinkProgram(ShaderProgram);

    glGetProgramiv(ShaderProgram, GL_LINK_STATUS, &Success);

if (Success == 0) {

glGetProgramInfoLog(ShaderProgram, sizeof(ErrorLog), NULL, ErrorLog);

fprintf(stderr, "Error linking shader program: '%s'\n", ErrorLog);

        return;

}

    glValidateProgram(ShaderProgram);

    glGetProgramiv(ShaderProgram, GL_VALIDATE_STATUS, &Success);

    if (!Success) {

        glGetProgramInfoLog(ShaderProgram, sizeof(ErrorLog), NULL, ErrorLog);

        fprintf(stderr, "Invalid shader program: '%s'\n", ErrorLog);

        return;

    }

    glUseProgram(ShaderProgram);

}

int main(int argc, char** argv)

{

    glfwInit();

    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);

    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2);

    glfwOpenWindow(600, 600, 0, 0, 0, 0, 0, 0, GLFW_WINDOW);

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);

    CreateVertexBuffer();

    CompileShaders();

   while (1)

   {

       RenderSceneCB();

   }

    return 0;

} 
```

编辑 2：这里是 math_3d.h 标头

```
#ifndef MATH_3D_H
#define MATH_3D_H

struct Vector3f
{
    float x;
    float y;
    float z;

    Vector3f()
    {
    }

    Vector3f(float _x, float _y, float _z)
    {
        x = _x;
        y = _y;
        z = _z;
    }
};

#endif 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T12:42:02.353

The problem is spelled out pretty clearly on [the OpenGL Wiki's Getting Started page](https://www.khronos.org/opengl/wiki/Getting_Started). Your problem is that you don't have a mechanism to load OpenGL functions, which is a necessary step in using OpenGL. You are [strongly encouraged to use a library to do that](https://www.khronos.org/opengl/wiki/OpenGL_Loading_Library).

# spring - Quartz cron 表达式 - 每个月的最后一个星期四

> ID：11951387
> 
> 赞同：8
> 
> 时间：2012-08-14T11:33:47.373
> 
> 标签：spring, cron, quartz-scheduler, spring-batch

我正在使用 Quartz Scheduling 和 Spring Batch，我需要在每个月的最后一个星期四运行一项特定的工作。

是否可以创建这样的 Quartz cron 表达式？

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T12:58:56.857

**是**的，[Quartz](http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)有一个特殊的字符-- `L ("last")`，它允许您定义表达式，例如*每月的最后一个星期五*。

要在`5L`每个月的最后一个星期四 ( ) 上午 10 点解雇工作，您可以使用以下 cron 表达式：

```
0 0 10 ? * 5L 
```

# security - ssas 限制访问

> ID：11951388
> 
> 赞同：0
> 
> 时间：2012-08-14T11:33:47.940
> 
> 标签：security, ssas, restrict

我有一个 SSAS 多维数据集，其中一些用户只能看到一些值。它基于维度 Country。如何设置限制，以便始终完成对国家/地区的过滤，即使我确实使用了该维度。目前，仅对该维度设置了限制。如果选择全部，则所有国家/地区都将包括在计算中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:54:05.247

您需要创建角色，将用户（最好是用户组）分配给角色，并配置维度成员以在角色成员浏览多维数据集时允许或排除。您可以使用 Enable Visual Totals 将 All 成员更改为仅显示他们被允许查看的成员的聚合。如果您将其禁用（默认设置），那么用户会看到 All 成员的真实值（即 All 成员包括每个成员的总数，即使是用户看不到的成员）。

基本信息位于[http://technet.microsoft.com/en-us/library/ms174840.aspx](http://technet.microsoft.com/en-us/library/ms174840.aspx)。

这是一个视频演练：[http](http://channel9.msdn.com/blogs/philo589/dimension-security-in-sql-server-analysis-services) ://channel9.msdn.com/blogs/philo589/dimension-security-in-sql-server-analysis-services 。

以及带有示例下载和屏幕截图的可读演练：[http ://www.mssqltips.com/sqlservertip/1834/introduction-to-dimension-security-in-sql-server-analysis-services-ssas-2005/](http://www.mssqltips.com/sqlservertip/1834/introduction-to-dimension-security-in-sql-server-analysis-services-ssas-2005/)

# android - 如何使列表不可点击？

> ID：11951391
> 
> 赞同：0
> 
> 时间：2012-08-14T11:33:54.993
> 
> 标签：android, listview, clickable

我正在使用 AsyncTask 类来搜索一个词，所以我想在执行过程时在列表中出现“搜索”这个词

好的，我想要做的是在搜索完成之前有一个不可点击的列表，为了，如果点击搜索词没有任何反应......

执行此操作的正确方法是什么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:40:56.333

在加载、搜索和获取数据时，您可以在`ListView`. 只需在设置适配器之前添加这些视图。当您搜索一个单词时，调用[`setClickable(false)`](http://developer.android.com/reference/android/view/View.html#setClickable%28boolean%29)并`ListView`启用您的页眉/页脚视图，例如，调用[`addFooterView(mFooterView)`](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View%29)以显示您的消息。

请注意，您必须在设置适配器之前添加视图。

例子：

```
LayoutInflater inflater = getLayoutInflater();
mFooterView = inflater.inflate(R.layout.footer, null, false);
mListView.addFooterView(mFooterView);       
mListView.setAdapter(mAdapter); 
```

在此之后，请随时致电`addFooterView()`以显示您的消息并致电[`removeFooterView()`](http://developer.android.com/reference/android/widget/ListView.html#removeFooterView%28android.view.View%29)以隐藏您的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:43:20.113

我不知道任何直接的解决方案（必须有），但我这样做的方法是：

**onPreExecute**：

1.  制作您的*ListView* `setEnabled(false)`使其不可点击。
2.  将自定义布局（包含搜索消息）的可见性设置为`setVisibility(View.VISIBLE)`，以使其在*ListView*顶部可见。为此，您需要将*ListView*和自定义布局组合在`FrameLayout`.

**onPostExecute**：

*   *更改ListView*内容后，只需反转该过程

通过这种方式，您可以显示覆盖整个*ListView*的透明/半透明区域，并在其顶部或中心显示一条消息。

我在我的一个项目中使用了这种方法，它看起来非常好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:39:26.163

当您使用`AsyncTask`时，您可以`ProgressDialog`在方法中使用带有“搜索”消息的 a`onPreExecute`并在完成后将其关闭（在 中`onPostExecute`）。

这样，您的 ListView 也将被禁用。

```
@Override
protected void onPreExecute() {     
    super.onPreExecute();       
    mProgressDialog = ProgressDialog.show(mContext, message, "Please wait...");
    mProgressDialog.setCancelable(false);
}

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
    if(mProgressDialog != null && mProgressDialog.isShowing())
        mProgressDialog.dismiss();

   // set data for listview     
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:47:42.890

为什么不使用通知来显示查询正在执行？

因为即使您使用其他应用程序，它也可以确保搜索继续进行。

您提出的问题意味着您的应用程序的用户等待很长时间来搜索一个单词而什么都不做，这对于人类应用程序的设计来说是不可取的

# php - Preg_replace 仅当整个规则发生时，保持单个匹配完整

> ID：11951393
> 
> 赞同：0
> 
> 时间：2012-08-14T11:34:00.643
> 
> 标签：php

我有一个字符串，其中包含单个数字（可以是单个数字，也可以是多个）和带有方括号的数字，例如`[4]`

我正在使用正则表达式并尝试使用方括号删除所有出现的数字，只留下常规数字。

例如，如果字符串是`32 02 53 [1] [2] [33]`，则结果应该是`32 02 53`。

我使用的当前代码是：

```
$data = preg_replace('#[(\d+)]#', '', $data); 
```

但这会替换/删除所有数字并留下括号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:36:52.013

试试这个：

```
$data = preg_replace('#\[[0-9]+\]#', '', $data); 
```

因为未转义的括号意味着：一组一个或多个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:38:01.343

[ 和 ] 是保留符号 - 查看正则[表达式.info](http://www.regular-expressions.info)

尝试添加一个 "\" -> \[ 和 \]

# search - 如何在 google 上搜索最新内容？

> ID：11951396
> 
> 赞同：1
> 
> 时间：2012-08-14T11:34:20.447
> 
> 标签：search

在谷歌搜索框中，当我们输入“'java code' + inurl:javalobby”之类的内容时，我们将获得搜索结果，其中网站链接包含字符串 javalobby，页面将包含字符串 java code。

同样，有没有办法在互联网上搜索包含在搜索框中输入的关键字的最新更新内容？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T06:03:04.883

谷歌有两个技巧可以根据日期缩小搜索范围。它使用关键字**daterange:startdate-enddate**或按**内容创建日期**。

**1.**使用语法**daterange:startdate-enddate**：要注意的是日期必须表示为[儒略日期](http://en.wikipedia.org/wiki/Julian_day)，即自公元前 4713 年 1 月 1 日中午 UTC 以来的连续天数。因此，例如，2002 年 7 月 8 日是儒略日期 2452463.5，1968 年 5 月 22 日是 2439998.5。此外，谷歌不喜欢其日期范围内的小数：查询；仅使用整数：2452463 或 2452464。您可以[在此处在线](http://aa.usno.navy.mil/data/docs/JulianDate.php)转换儒略日期。

示例：- Geri Halliwell 在 1998 年 5 月 27 日左右离开辣妹。如果你想获得很多关于分手的信息，你可以尝试在十天的窗口中进行日期搜索——比如 5 月 25 日到 6 月 4 日。该查询将如下所示：

```
"Geri  Halliwell"  "Spice  Girls"  daterange:2450958-2450968 
```

**2.**按**内容创建日期**搜索：尝试将一串常见日期格式添加到您的查询中。例如，如果你想要 2003 年 5 月的东西，你可以尝试附加：

`("May * 2003" | "May 2003" | 05/03 | 05/*/03)`

然而，像这样的查询会占用您的十个查询限制中的大部分内容，因此最好是明智的——也许一次循环使用这些格式。如果其中任何一项为您提供了太多结果，请尝试将您的搜索限制在页面的标题标签内。

如果您感觉非常幸运，您可以搜索完整的日期，例如 2003 年 5 月 9 日。然后您的决定是您是否要搜索上述格式或多种变体之一的日期：2003 年 5 月 9 日，9/ 5/2003、2003 年 5 月 9 日等。确切日期搜索将严重限制您的结果，除非作为最后的选择，否则不应使用。

使用日期范围搜索时，您的思维必须灵活，搜索比其他方式更通用（因为日期范围搜索会大大缩小您的结果范围），并且在查询中坚持不懈，因为不同的日期和日期范围会产生非常不同的结果。但是您将获得专注于非常具体的事件和主题的较小结果集。

# java - 如何在 servlet 中获取数据？

> ID：11951408
> 
> 赞同：0
> 
> 时间：2012-08-14T11:35:01.977
> 
> 标签：java, web-services, http, servlets

我使用 servlet 和 tomcat 6.0 创建了一个 web 服务。我创建了示例 java 应用程序来调用 Web 服务并且它工作正常。我需要在调用 Web 服务时发送一些数据。我在java应用程序中创建如下

```
StringEntity zStringEntityL = new StringEntity(zAPIInputStringP.toString());
zStringEntityL.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
        "application/json"));
HttpParams aHttpParamsL = new BasicHttpParams();
HttpProtocolParams.setVersion(aHttpParamsL, HttpVersion.HTTP_1_1);
HttpProtocolParams.setContentCharset(aHttpParamsL, HTTP.UTF_8);

SchemeRegistry aSchemeRegistryL = new SchemeRegistry();
aSchemeRegistryL.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));

ClientConnectionManager ccm = new ThreadSafeClientConnManager(aHttpParamsL, aSchemeRegistryL);
DefaultHttpClient client = new DefaultHttpClient(ccm, aHttpParamsL);
HttpPost aHttpPostL = new HttpPost(URL + zAPIName);
aHttpPostL.setHeader("Authorization", "Basic");

aHttpPostL.setEntity(zStringEntityL);
HttpResponse aHttpResponseL;
aHttpResponseL = client.execute(aHttpPostL); 
```

这里“zAPIInputStringP”是我的 JSON 格式的数据。
在网络服务中，我需要如何获取这些数据？我在 eclispe 中检查了调试模式，我无法找到它。

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{
    //How to get data?
} 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:00:12.723

当您通过 post 方法将数据发送到 servlet 时，数据可通过**input stream**获得。以下是您的 post 方法的外观。

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

String zAPIInputStringP = "";

BufferedReader in = new BufferedReader(new InputStreamReader(
                request.getInputStream()));
String line = in.readLine();
while (line != null) {
    zAPIInputStringP += line;
    line = in.readLine();
}

} 
```

您的 JSON 字符串包含在`zAPIInputStringP`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:00:22.280

这要简单得多。基本上看起来像这样：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
      response.setContentType("application/json");
    // Get the printwriter object from response to write the required json object to the output stream      
    PrintWriter out = response.getWriter();
    // Assuming your json object is **zStringEntityL**, perform the following, it will return your json object  
    StringEntity zStringEntityL = new StringEntity(zAPIInputStringP.toString());
    out.print(zStringEntityL);
    out.flush();
    } 
```

# html - bootstrap：将表格调整为模态大小

> ID：11951411
> 
> 赞同：0
> 
> 时间：2012-08-14T11:35:16.133
> 
> 标签：html, css, twitter-bootstrap

我使用模态显示表格：

```
 <div class="modal-body">
            <form class="form-horizontal">
                <label><h5>dev</h5></label>
                <input type="text" class="input-xlarge" id="dconDev">
                <label><h5>speed</h5></label>
                <input type="text" class="input-xlarge" id="dconSpeed">
                <input type="button" class="btn" id="dconBut" onclick="$('#appBlock').fadeIn('normal'); $('#dcon').show(); addPort('dcon',$('#dconDev').val(),$('#dconSpeed').val())" value="Добавить">
                <table class="table table-condensed">
                    <thead>
                        <th>lbl</th>
                        <th>edizm</th>
                        <th>id</th>
                        <th>a</th>
                        <th>b</th>
                        <th>en_spar</th>
                        <th>spar</th>
                        <th>en_period</th>
                        <th>peiod</th>
                    </thead>
                    <tbody id="dconTable">
                        <th><input type="text" id="lbld"></th>
                        <th><input type="text" id="edizmd"></th>
                        <th><input type="text" id="idd"></th>
                        <th><input type="text" id="ad"></th>
                        <th><input type="text" id="bd"></th>
                        <th><input type="text" id="en_spard"></th>
                        <th><input type="text" id="spard"></th>
                        <th><input type="text" id="en_periodd"></th>
                        <th><input type="text" id="periodd"></th>
                    </tbody> 
                </table>
            </form>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Close</a>
            <a href="#" class="btn btn-primary">Save changes</a>
        </div>
    </div> 
```

如何使模态扩展为表格大小，或使表格适合模态边框？我试图在 bootstrap.css 中编辑模态部分，但模态的新位置不在中心。我还尝试`class="span4`在表格内添加类似 a 的标签，这似乎没有任何作用。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:41:58.703

假设模态宽度为 600px。要将模态定位在 center ，请使用

.modal { 左：50%; 左边距：-300px；（宽度的一半的负数；）}

# powershell - Azure powershell 命令获取 vm 的端口

> ID：11951413
> 
> 赞同：0
> 
> 时间：2012-08-14T11:35:19.237
> 
> 标签：powershell, azure, azure-powershell

我正在尝试通过 powershell 命令在 azure 中获取 vm 的端口。我们无法获得任何命令，因此请向我们建议任何 azure powershell 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:48:23.133

您可以为此使用 Get-AzureEndpoint：

```
Get-AzureVM -ServiceName "MyTestVM1" -Name "MyTestVM2" | Get-AzureEndpoint 
```

![在此处输入图像描述](../Images/43463f23199fae99483151dc582bb2c5.png)

# hibernate - Hibernate EntityManager 4 ClassNotFound 异常

> ID：11951415
> 
> 赞同：4
> 
> 时间：2012-08-14T11:35:33.247
> 
> 标签：hibernate, hibernate-entitymanager

我使用 maven 将我的应用程序从 hibernate-entitymanager-3.6.10.Final 升级到了 hibernate-entitymanager-4.1.6.Final。在应用程序初始化阶段，它引发了以下错误；

java.lang.NoClassDefFoundError: org/hibernate/util/xml/Origin at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:55) at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63) at javax。我调用 Persistence.createEntityManagerFactory("OLAHA") 后的 persistence.Persistence.createEntityManagerFactory(Persistence.java:47)

我查看了所有带有发行版的罐子。我能找到的唯一 Origin.java/Origin.class 在 org.hibernate.INTERNAL.util.xml.Origin 中。发布有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-15T18:23:52.073

原因是`org/hibernate/util/xml/Origin`在 Hibernate 4.x 中删除了类，因此您必须将其降级到 v.3.6.10 或升级所有其他依赖项。

# c# - 在资源管理器扩展中通过 WCF 获取自定义对象不起作用，但在 Winform 中

> ID：11951417
> 
> 赞同：0
> 
> 时间：2012-08-14T11:35:36.267
> 
> 标签：c#, .net, wcf, operationcontract

我有一个像这样的 WCF 主机：

```
[ServiceContract]
public interface IMountToOs
{
    [OperationContract]
    char GetMountDriveLetter();

    [OperationContract]
    MyTestClass MyTest();
}

public class MyTestClass
{
    public string A { get; set; }
    public string B { get; set; }
} 
```

客户

```
 private IMountToOs _proxy;
    public IMountToOs Proxy
    {
        get
        {
            if (_proxy == null)
            {
                NetTcpBinding binding = new NetTcpBinding();
                binding.MaxReceivedMessageSize = 2147483647;
                binding.OpenTimeout = TimeSpan.FromMilliseconds(50000);
                EndpointAddress address = new EndpointAddress("net.tcp://localhost:1234/MountToOsHost");
                //_proxy = new MountToOsClient(binding, address);
                ChannelFactory<IMountToOs> factory = new ChannelFactory<IMountToOs>(binding);
                _proxy = factory.CreateChannel(address);
            }

            return _proxy;
        }
    } 
```

虽然我可以访问

```
 MessageBox.Show("Okay - " + Proxy.GetMountDriveLetter()); 
```

我不能调用这个方法：

```
 MessageBox.Show("Okay - " + Proxy.MyTest().A); 
```

完整的扩展不起作用。但仅在扩展中使用它时。即使我在扩展的第一行插入一个消息框，它也不会被命中。我不知道为什么。它似乎进行了预检查并找到了被拒绝的自定义类的调用......如果我使用winform左右没有问题。

`.net 3.5`

奇怪的是，我有一个断点和一个主机端的消息。所以我看到没有调用该方法

**现在更新** 我在扩展的加载方法中移动了 wcf-call 并得到了一个异常：

> System.MissingMethodException：找不到方法：“Contracts.Interfaces.MyTestClass Contracts.Interfaces.IMountToOs.MyTest()”。

我的 winform 测试和此扩展使用相同的接口，因此应该从两者都知道该方法。没有任何合同过时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:42:35.337

我们看不到类 MountToOsClient: IMountToOs 所以我们只能假设它是好的。

```
[DataContract] // Missing
public class MyTestClass 
{ 
    [DataMember] // Missing
    public string A { get; set; } 
    [DataMember] // Missing
    public string B { get; set; } 
} 
```

没有这些属性，MountToOsClient 无法公开 Mytestclass。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:21:19.687

根据我在[这里](http://developergeeks.com/article/38/calling-wcf-service-using-client-channnel-factory)和帖子评论中找到的内容：“要使用客户端通道工厂方法创建动态服务代理，您将需要服务的数据合同。如果您没有数据合同但您有服务 URL，那么您可以使用反射在运行时创建代理并调用服务方法。”

似乎客户端不知道 MyTestClass 类型，所以我认为您可以使用反射，或者在客户端和服务器之间共享类，或者更简单，使用 datacontract 属性。

另外，在[MSDN](http://social.msdn.microsoft.com/Forums/en-US/wcfprerelease/thread/b33f7bd3-b871-4fcc-8ced-147530d82ab6)上发现了类似这样的内容：

"**什么时候使用代理？**

我们使用 svcutil.exe 创建代理。该工具的输出提供了一个代理类并对应用程序配置文件进行了相应的更改。如果您知道某个服务将被多个应用程序使用，或者其通用性足以在多个地方使用，那么您将希望继续使用生成的代理类。我们在 WCF 中使用代理来与客户端共享服务合同和实体。代理有几个限制，比如他们需要获取和设置，不能暴露构造函数，不能暴露服务契约以外的方法，重复代码，每次我们添加/修改服务契约/数据契约/消息契约时，我们需要为客户端重新生成代理。

**何时使用 ChannelFactory**

另一种选择是使用 ChannelFactory 类在客户端和服务之间构建一个通道，而不需要代理。在某些情况下，您可能拥有与客户端应用程序紧密绑定的服务。在这种情况下，直接引用接口 DLL 并使用 ChannelFactory 调用您的方法是有意义的。ChannelFactory 路由的一个显着优势是它使您可以访问如果您使用 svcutil.exe 则无法使用的方法。

**何时使用 ChannelFactory 与 Proxy 类？**

如果客户端代码在您的控制之下，并且您希望与客户端共享的不仅仅是服务合同——例如与实体关联的一些实用方法，并使客户端和服务代码更紧密地绑定，则 DLL 会很有帮助。如果您知道您的实体不会发生太大变化并且客户端代码更少，那么 DLL 将比代理更好地工作。如果您的服务的客户端在系统外部，例如 API，则使用代理是有意义的，因为通过提供代码文件而不是 DLL，它可以更轻松地共享合约。”

# android - 如何循环播放我的媒体播放器文件？

> ID：11951420
> 
> 赞同：4
> 
> 时间：2012-08-14T11:35:38.207
> 
> 标签：android, loops, media-player, android-mediaplayer

基本上我有 3 首歌曲，一旦 3 首歌曲的循环完成，我希望用户能够循环回到第一首歌曲。为什么这行不通？它将播放所有 3 首歌曲，然后在第四次单击时，不播放任何歌曲。

```
MediaPlayer song0, song1, song2;
Button play, next;
ArrayList<MediaPlayer> music = new ArrayList<MediaPlayer>();
int track = 0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     song0 = MediaPlayer.create(TheParty0Activity.this, R.raw.blacksunempire);
     song1 = MediaPlayer.create(TheParty0Activity.this, R.raw.blueskies);
     song2=  MediaPlayer.create(TheParty0Activity.this, R.raw.fuckingnoise);

     music.add(song0);
     music.add(song1);
     music.add(song2);

     play = (Button) findViewById(R.id.button0);
     next = (Button) findViewById(R.id.button1);

     play.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            music.get(track).start();

        }
    });

     next.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            music.get(track).stop();
            track++;
            if(track == 3)
                track = 0;

            music.get(track).start();

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T11:47:52.367

调用函数：

[MediaPlayer.setLooping(true|false)](http://developer.android.com/reference/android/media/MediaPlayer.html#setLooping%28boolean%29)

在你打电话后在 mediaplayerObject 上`MediaPlayer.prepare()`

**例子：**

```
Uri mediaUri = createUri(context, R.raw.media); // Audiofile in raw folder
Mediaplayer mPlayer = new MediaPlayer();
mPlayer.setDataSource(context, mediaUri);
mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mPlayer.prepare();

mPlayer.setLooping(true);

mPlayer.start(); 
```

# drupal - Drupal 7 - 重写特定页面的所有 url

> ID：11951424
> 
> 赞同：0
> 
> 时间：2012-08-14T11:35:45.860
> 
> 标签：drupal, drupal-path-aliases

我的 drupal 7 站点中有一个页面（商店）。在这个页面上是一个请求 web 服务的 php 脚本。响应取决于 URL，例如。/shop/pid-1234/pink-shoes.html 将显示 id 为 1234 的产品。因此，无论 shop/ 之后的 URL 是什么样的，我都需要 Drupal 加载 /shop 页面。我如何做到这一点？我曾尝试在 URL 别名模块 ($,%) 中使用通配符，但这不起作用。我也看过 pathauto 和 redirect，但似乎没有帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:13:41.663

您可能需要一个 Apache mod_rewrite 规则。如果你正在使用一个，你可以在你的 .htaccess 文件中添加一些东西。

# c# - wpf绑定代码在后面

> ID：11951431
> 
> 赞同：4
> 
> 时间：2012-08-14T11:36:11.530
> 
> 标签：c#, wpf, binding

在代码中，我成功地将列添加到列表视图。但我想将绑定添加到列而不是添加到列表视图。

拳头是 xaml 中的工作代码。

```
<GridViewColumn x:Name="colName" Header="Name" Width="130">
  <GridViewColumn.CellTemplate>
    <DataTemplate>
      <TextBlock Text="{Binding Path=Values, Converter={StaticResource LoadProfileConverter},ConverterParameter=active_total}"/>
    </DataTemplate>
  </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

后面的代码：

```
GridViewColumn column = new GridViewColumn();
column.Header = "Header";
column.Width = 130;                     

FrameworkElementFactory controlFactory = new FrameworkElementFactory(typeof(TextBlock));

var itemsBinding = new System.Windows.Data.Binding("Values")
{
    Converter = new LoadProfileConverter(),
    ConverterParameter = "active_total",
};

controlFactory.SetBinding(TextBox.TextProperty, itemsBinding);

DataTemplate template = new DataTemplate();
template.VisualTree = controlFactory;

column.CellTemplate = template;

LoadProfileGrid.Columns.Add(column); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T11:45:23.233

```
var itemsbinding = new Binding("Values")
            {
                Converter = new LoadProfileConverter(),
                ConverterParameter = key
            };

        controllerFactory.SetBinding(TextBox.TextProperty, itemsbinding); 
```

使用上面的代码创建正确的绑定。

绑定对象上的大量额外属性可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:47:19.370

```
 GridViewColumn column = new GridViewColumn();
                            column.Header = key;
                            column.Width = 130;                     

                            FrameworkElementFactory controlFactory = new FrameworkElementFactory(typeof(TextBlock));

                            var itemsBinding = new System.Windows.Data.Binding("Values")
                            {
                                Converter = new LoadProfileConverter(),
                                ConverterParameter = key

                            };                           

                            column.DisplayMemberBinding = itemsBinding;
                            LoadProfileGrid.Columns.Add(column); 
```

# multithreading - 如何知道 CloseThreadPool() 函数何时完成？

> ID：11951432
> 
> 赞同：0
> 
> 时间：2012-08-14T11:36:12.327
> 
> 标签：multithreading

我是 Sockets 编程和阅读文档的新手。

从我发现的有关 CloseThreadPool() 函数的文档中：

关闭线程池函数。如果没有未完成的回调对象绑定到线程池，则线程池将立即关闭。如果有，那么当这些未完成的对象被释放时，线程池将被异步释放。

该线程池位于线程本身中。我的主线程接受输入以退出。如果输入退出，我将全局变量 KEEP_LISTENEING 设置为 false。

我将如何等待我的主线程停止/休眠，直到这个函数在另一个线程中真正完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:47:27.777

使用清理组[等待所有回调](http://blogs.msdn.com/b/harip/archive/2010/10/11/introduction-to-the-windows-threadpool-part-1.aspx)。顺序是：

1.  CreateThreadpoolCleanupGroup()

2.  SetThreadpoolCallbackCleanupGroup(&CallbackEnvironment, pointerCleanup, ...)

3.  CloseThreadpoolCleanupGroupMembers(, FALSE, )

4.  CloseThreadpoolCleanupGroup()

# php - 将朋友标记到 Facebook 应用程序中的链接

> ID：11951433
> 
> 赞同：-2
> 
> 时间：2012-08-14T11:36:17.857
> 
> 标签：php, facebook, facebook-graph-api, facebook-apps, tagging

我在 facebook 上做了一个应用程序，我添加了链接共享选项、链接评论和相同链接的赞。现在我想要的是生成链接的人也可以标记他的朋友。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:47:06.370

请参阅我之前对此问题的回答[Facebook Graph API Post with_tags 选项](https://stackoverflow.com/questions/11614574/facebook-graph-api-post-with-tags-option/11614915#11614915)据我所知，您需要指定一个“地点”来执行此操作

编辑****

根据开发者博客，您现在可以使用提及标记，这可能是您想要的 [https://developers.facebook.com/docs/opengraph/mention_tagging/](https://developers.facebook.com/docs/opengraph/mention_tagging/)

# android - 如何获取从 Android 中的图库中选择的图像的大小？

> ID：11951440
> 
> 赞同：2
> 
> 时间：2012-08-14T11:36:38.423
> 
> 标签：android

我正在做一个 Android 项目，我必须使用相机或从图库中拍照。

通常，当我们这样做时，我们会得到图像的 URL，然后我就得到了。但是让我知道有没有办法以编程方式获取我们从该图库中选择的图像的大小？

任何人都可以提出解决方案，或者您是否知道与此相关的任何有用链接。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:02:15.180

The determine the size of a bitmap object use [getRowBytes()](http://developer.android.com/reference/android/graphics/Bitmap.html#getRowBytes%28%29)

```
Bitmap image = ..
final int sizeInBytes = image.getHeight() * image.getRowBytes(); 
```

Since API level 12 you can use [getByteCount()](http://developer.android.com/reference/android/graphics/Bitmap.html#getByteCount%28%29) instead

```
final int sizeInBytes = image.getByteCount(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:06:39.483

```
Bitmap image = BitmapFactory.decodeStream(getContentResolver().openInputStream(filePathOfSelectedImage), null, null); 
```

**现在您可以使用位图的getHeight()**和**getWidth()**方法来获取高度和宽度。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T11:59:47.423

将您的图像放入一个`Bitmap`对象中，然后使用Bitmap 对象`getWidth()`的`getHeight()`方法来获取图像的大小。

```
Bitmap image = BitmapFactory.decodeResource(context.getResources(), R.drawable.my_image);
int w = image.getWidth();
int h = image.getHeight(); 
```

# web-services - 对经过身份验证的 Web 表单解决方案的建议

> ID：11951441
> 
> 赞同：0
> 
> 时间：2012-08-14T11:36:41.350
> 
> 标签：web-services, forms

我的任务是为人们创建一个网络表单来更新他们的详细信息。我有现有数据，我需要根据这些数据对用户进行身份验证，以确保我们正在更新正确的人。我觉得如果我从头开始编写代码，我将重新发明轮子。

我正在寻找像 SurveyMonkey 这样的在线调查解决方案（但不是 SurveyMonkey，因为它没有自动身份验证）或我可以安装和配置的 Web 表单系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:50:13.550

好像我需要建立自己的。

我将使用 PHP 编写代码并使用 MySQL 数据库。登录屏幕将包含三位信息，如果在数据库中的记录中找到这些信息，则会向用户显示一个包含他们旧数据的屏幕，以及一个用于更新此数据的表单。他们输入新数据并点击提交，这会将他们的信息放入数据库中的另一个表中。

没什么难的，但我宁愿使用一个已经调试过并带有一些内置工具的预制系统，以便用户可以操作数据。

# android - Android：getView 没有在自定义适配器中调用

> ID：11951448
> 
> 赞同：1
> 
> 时间：2012-08-14T11:36:52.597
> 
> 标签：android, adapter, customdialog

在我的活动中，我有一个按钮，当我单击该按钮时，它会显示包含标题和的自定义对话框`ListView`。

`ListView`我为但未调用方法设置适配器。我的`getView()`数组是`ArrayList<String>`＆它的大小是 3。

这是我的代码。

在 Activity.java ::

```
 notification_btn = (Button) findViewById(R.id.notifications_btn);
    notification_btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            Dialog dialog = new Dialog(Home.this,android.R.style.Theme_Translucent_NoTitleBar);
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog.setContentView(R.layout.notifications_layout);

            ListView list = (ListView) dialog.findViewById(R.id.listView_notifications);
            TextView title = (TextView) dialog.findViewById(R.id.dialogTitle);
            TextView footer = (TextView) dialog.findViewById(R.id.notification_footer);

            title.setText("Title");

            NotificationAdapter adapter = new NotificationAdapter(Home.this,array);
            list.setAdapter(adapter);

            dialog.show();
        }
    }); 
```

NotificationAdapter.java ::

```
public class NotificationAdapter extends BaseAdapter{

ArrayList<String> items;
private Context context;
private LayoutInflater mInflater;

static class ViewHolder {
    TextView text;
}

public NotificationAdapter(Context context, ArrayList<String> items) {
    this.context = context;
    this.items = items;
    mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
    return items.size();
}

@Override
public Object getItem(int arg0) {
    return items.get(arg0);
}

@Override
public long getItemId(int arg0) {
    return arg0;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) { // if it's not recycled, initialize some
                                // attributes
        convertView = mInflater.inflate(R.layout.notifiation_row, null);
        holder = new ViewHolder();
        holder.text = (TextView) convertView.findViewById(R.id.text_notification);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    try {

            holder.text.setText(items.get(position));

    } catch (Exception e) {
        VLogger.getLogger().info("Exception occured :: "+e);
    }

    return convertView;
}
  } 
```

为什么`getView()`不调用方法？我没找到原因。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:13:42.383

将适配器设置为列表后：

```
listview.setAdapter(adapter) 
```

您必须通知适配器更改的数据集，以便它重新填充列表：

```
adapter.notifyDataSetChanged() 
```

# html - 网页浏览器开发

> ID：11951451
> 
> 赞同：0
> 
> 时间：2012-08-14T11:37:06.607
> 
> 标签：html, css, browser, language-agnostic, standards

如果要从头开始构建新的 Web 浏览器；为了遵守标准，他们需要哪些文件？

* * *

他们会只使用 W3C 网站来获取有关如何解析 HTML 和 CSS 的信息吗？

如果这个问题过于宽泛，或者我没有提供足够的信息，我深表歉意，但我不太确定我应该如何准确地提出这类问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T11:46:54.733

构建自己的网络浏览器是一回事；从头开始构建 Web 浏览器和[渲染/布局引擎是另一回事。](https://en.wikipedia.org/wiki/Web_browser_engine)

渲染引擎是“执行” HTML/CSS/Scripting 代码并将其更改为可渲染的内容。例如，Mozilla Firefox 使用**[Gecko](https://en.wikipedia.org/wiki/Gecko_%28layout_engine%29)**引擎，而 Chrome 和 Safari 使用**[WebKit](https://en.wikipedia.org/wiki/WebKit)**。编写一个像样的引擎并不简单——要遵循许多标准。有开源引擎（如 Gecko），因此您不必编写自己的引擎。但无论如何，有两个主要标准需要遵循：

*   [W3C 标准](http://www.w3.org/standards/)
*   [IETF RFC 草案](http://www.ietf.org/rfc.html)

祝你好运，希望对你有所帮助！

# c# - 错误 - 调用 print 方法时程序没有给出输出

> ID：11951453
> 
> 赞同：1
> 
> 时间：2012-08-14T11:37:15.523
> 
> 标签：c#

这是我创建的一个简单程序——一个表类，一个主类。在表类中，我创建了一个简单地输出我的名字的打印方法。从主类我调用 print 方法但没有得到输出。

```
namespace ConsoleApplication3
{

    class table
    {

        public static void print()
        {
            Console.WriteLine("My name is prithvi-raj chouhan");
        }
    }

    class Program
    {
        public static void Main()
        {
            table t = new table();
            t.print();  // Error the program is not giving output while calling the print method

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:40:06.130

由于您调用的函数是静态的。使用此语法

```
public static void Main()
         { 
            table.print();     
         } 
```

引用 MSDN：-

> 即使没有创建类的实例，也可以在类上调用静态方法、字段、属性或事件。**如果创建了类的任何实例，则它们不能用于访问静态成员**。静态字段和事件只存在一份副本，静态方法和属性只能访问静态字段和静态事件。静态成员通常用于表示不会响应对象状态而改变的数据或计算；例如，数学库可能包含计算正弦和余弦的静态方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:40:09.927

`print`是一个`static`方法，所以称它为静态方法：

```
public static void Main()
{
    table.print();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:40:41.297

尝试这个：

```
class Program
    {
        public static void Main()
        {
           table.Print();

        }
    } 
```

打印（）; 是一个静态方法，所以你不需要实例化一个新的 Table 对象来访问它的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:41:02.373

您正在调用 print() 作为实例方法，但它是静态的。尝试从方法中删除 static 关键字。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-14T11:40:12.797

尝试添加一个`Console.ReadLine();`after `table.print();`。

**更新：**

错过了静态部分，现在更正了。

# android - 相机意图和异步任务的 doInBackground 冲突

> ID：11951461
> 
> 赞同：0
> 
> 时间：2012-08-14T11:37:54.730
> 
> 标签：android, android-asynctask, android-camera-intent

1.  在我的活动中，我有一个 AsyncTask，我在其中覆盖了 doInBackGround。

2.  在同一个活动中，我有一个相机意图打开相机并允许用户拍照

问题是当我调用相机意图时，它会触发我覆盖的 doInBackGround 方法。这最终给了我一个`SingleClientConnManager`例外，要求我在再次分配客户端之前释放它。

这是我的活动代码：

```
public class UserProfileActivity extends Activity {

//many instance fiels here
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.user_profile);

        new LongOperation().execute("");

        userImage = (ImageView) findViewById(R.id.profileImage);
        userName = (TextView) findViewById(R.id.userName_profile);
        userLocation = (TextView) findViewById(R.id.userLocation_profile);
        editInfo = (TextView) findViewById(R.id.edit_profile);
        changeImage = (TextView) findViewById(R.id.changeImage_profile);
        userScore = (TextView) findViewById(R.id.userScore_profile);
        friendsLabel = (TextView) findViewById(R.id.userFriends_profile);

            changeImage.setOnClickListener(new View.OnClickListener() {

                public void onClick(View arg0) {
                    Intent cameraIntent = new Intent(
                            android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    startActivityForResult(cameraIntent, CAMERA_REQUEST);
//Point 1
                }
            });
//Point 2
    }
    private class LongOperation extends AsyncTask<String, Void, String> {

        private InputStream is;
        private StringBuilder sb;
        private String result;
        private ProgressDialog dialog = new ProgressDialog(context);

        @Override
        protected String doInBackground(String... params) {

//Point 3
            try {
                HttpResponse response;

                    HttpPost httppost = new HttpPost(
                            "http://www.xxxxx.com/yyyy/zzzz");
                    //httpclient is global to maintain sessions
                    response = SignUpActivity.httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();

                try {
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(is, "iso-8859-1"), 8);
                    sb = new StringBuilder();
                    sb.append(reader.readLine() + "\n");
                    String line = "0";
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    result = sb.toString();
                } catch (Exception e) {
                    Log.e("error in reading input stream", e.toString());
                }
                try {
                    JSONObject jObj = new JSONObject(result);
                    String status = jObj.getString("status");
                    score = jObj.getInt("credits");
                    level = jObj.getInt("level");
                    image = jObj.getString("image");
                    fname = jObj.getString("fname");
                    lname = jObj.getString("lname");
                    city = jObj.getString("city");
                    email = jObj.getString("email");
                    clickedUserId = jObj.getInt("user_id");

                    JSONArray friendsJsonArray = jObj.getJSONArray("friends");
                    size = friendsJsonArray.length();

                    ArrayList<String> friendsNames = new ArrayList<String>();
                    friendsIds = new int[size];
                    for (int i = 0; i < size; i++) {

                        friendsNames.add(friendsJsonArray.getJSONObject(i)
                                .getString("name"));
                        friendsIds[i] = friendsJsonArray.getJSONObject(i)
                                .getInt("user_id");
                    }
                    adapter = new ArrayAdapter<String>(context,
                            R.layout.simple_listview_item, friendsNames);
                } catch (Exception e) {

                    Log.d("error in creating json object", e.toString());
                }
            } catch (Exception e) {
//Point 5
                Log.e("error main try", "Error in http connection" + e.toString());
            }
            return "Executed";
        }
        @Override
        protected void onPostExecute(String result) {

            friendsList.setAdapter(adapter);
            userScore.setText(score + " points" + "   level " + level);
            userName.setText(fname + "  " + lname);
            userLocation.setText(city);
            changeImage.setText("Change image");
            editInfo.setText("Edit");
            friendsLabel.setText("Friends");
            Bitmap bitmap = null;
            try {
                bitmap = BitmapFactory
                        .decodeStream((InputStream) new URL(image).getContent());
                userImage.setImageBitmap(bitmap);
            } catch (MalformedURLException e1) {

                e1.printStackTrace();
                userImage.setImageResource(R.drawable.xxx);
            } catch (IOException e2) {

                e2.printStackTrace();
                userImage.setImageResource(R.drawable.xxx);
            }

            if (dialog.isShowing()) {
                dialog.dismiss();
            }
        }

        @Override
        protected void onPreExecute() {

            this.dialog.setMessage("Please wait");
            this.dialog.show();
        }

        @Override
        protected void onProgressUpdate(Void... values) {

        }
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);

//Point 4
        if (resultCode == RESULT_OK) {
            if (data != null) {

                photo = (Bitmap) data.getExtras().get("data");
                userImage.setImageBitmap(photo);

            }else{

                Intent intent = new Intent(UserProfileActivity.this,
                        UserProfileActivity.class);
                startActivity(intent);
            }
        } else {

            Intent intent = new Intent(UserProfileActivity.this,
                    UserProfileActivity.class);
            startActivity(intent);
        }
    }
} 
```

在代码中的第 1、2、3、4、5 点给出了单击`changeImage`TextView 后的代码流序列。

请帮助我解决这种情况。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:59:19.990

如果我是正确的，问题是因为当您打开相机时您的设备方向发生了变化。这会再次调用您的活动的 onCreate() 方法，请将此行插入到您的活动中**，**这会导致问题

```
 <activity
            android:name="your activity" android:configChanges="keyboardHidden|orientation"
          /> 
```

# php - 下载在浏览器中打开的文件而不是下载

> ID：11951463
> 
> 赞同：-1
> 
> 时间：2012-08-14T11:38:06.200
> 
> 标签：php, javascript, html, jsp, dom

> **可能重复：**
> [如何强制下载文件？](https://stackoverflow.com/questions/531292/how-to-force-download-of-a-file)

如何下载默认在浏览器中直接打开的文件。例如，在旧版浏览器中，如果我打开一首 mp3 歌曲的链接，它就会被下载；但是现在，它们开始在浏览器本身中播放。一种方法是右键单击链接并单击将链接另存为，然后将歌曲保存；但很多时候，提供的链接是其他链接的掩码，实际上是歌曲。那么在这种情况下该怎么办呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:47:11.623

您需要在标题中将内容处置设置为附件，如下所示：

```
header('Content-Disposition: attachment'); 
```

还包括您可以使用的文件名：

```
header('Content-Disposition: attachment; filename=abc.mp3'); 
```

或者也许配置 apache [如果你在 apache 上] 为你想要强制下载的文件类型定义这个，比如

```
<FilesMatch "\.(mp3|mov|pdf)">
    Header set Content-Disposition attachment
</FilesMatch> 
```

# android - SeekBar 拇指动画

> ID：11951465
> 
> 赞同：4
> 
> 时间：2012-08-14T11:38:16.590
> 
> 标签：android, animation, seekbar

我的问题是双重的。我目前有一个 seekBar，它不是定制的，但我担心将来需要它。我的问题围绕着拇指图像：

1.  我的 seekBar 拇指需要是可点击的，因为我希望在触摸时发生动作 我设法使用 onTouchlistener 实现了问题是我希望在单击拇指时获得视觉反馈图像，我尝试使用可绘制选择器来实现无济于事。

2.  第二个问题是我想在方向变化时为我的搜索栏拇指设置动画。这个我不知道该怎么做...

任何帮助将不胜感激！

**编辑：** 我试图实现的动画是旋转，因此图像将始终是“直立的”

我尝试用于点击反馈的代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:drawable="@drawable/camera_button_feedback" android:state_pressed="true"/>
<item android:drawable="@drawable/camera_button_feedback" android:state_selected="true"/>
<item android:drawable="@drawable/camera_button_icon"/>

</selector> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:49:49.547

所以我经过深思熟虑后所做的是在拇指下创建一个视图，该视图随着拇指前进并使搜索栏的拇指不可见，以便获得触摸事件并根据需要为底层视图设置动画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:57:09.563

问题 1.) 的解决方案：我已经亲自对此进行了测试，因此我可以向您保证它可以正常工作，并且您**将**获得视觉反馈。

1.) 在您的项目中创建一个名为“xml”的文件夹，然后向其中添加一个名为 thumb_drawable.xml 的 XML 文件。在此文件中定义以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item 
android:state_pressed="true"
android:drawable="@drawable/seek_thumb_pressed">
</item>
<item 
android:drawable="@drawable/seek_thumb_normal">  
</item>
</selector> 
```

'seek_thumb_normal' 是默认的 android seekbar thumb，下载该图像的链接如下：[http](http://www.tutomobile.fr/wp-content/uploads/2011/02/seek_thumb_normal.png) ://www.tutomobile.fr/wp-content/uploads/2011/02/seek_thumb_normal.png 。'seek_thumb_pressed' 是默认 android seekbar thumb 的修改版本，只是有不同的颜色。现在，您可以轻松地将其替换为您想要的其他图像，方法是将该图像放在您的可绘制文件夹中，然后在此处引用该名称。

2.) 这是我用来在布局文件中定义 SeekBar 的代码：

```
<SeekBar android:id="@+id/seekbar"
         android:max="100"
         android:layout_width="fill_parent"
         android:layout_height="30dp" 
         android:minWidth="30dp"
         android:minHeight="30dp" 
         android:thumb="@xml/thumb_drawable"/> 
```

问题 2：现在，这是我有点困惑的地方，因为您说“我要实现的动画是旋转，因此图像将始终是“直立的”，默认情况下，Android 会处理当您将手机的方向从纵向更改为横向时图像，因此您的图像默认保持直立。我刚刚在冰淇淋三明治上测试了这一点，当我改变方向时，搜索栏拇指自行旋转。所以，除非我'已经误解或者你有其他想法，在处理方向转换时你不需要动画任何东西。如果你有其他想法，请告诉我，我会帮助你解决这个问题。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-21T14:05:47.937

检查以下代码段，它可能会对您有所帮助...

```
 seekBar = (SeekBar)findViewById(R.id.seekBar);
    seekBar.setOnTouchListener(this);
          private void updateSeekProgress() {
    if (mediaPlayer.isPlaying()) {
        seekBar.setProgress((int)(((float)mediaPlayer.getCurrentPosition() / lengthOfAudio) * 100));
        handler.postDelayed(r, 1000);
    }
} 
```

# javascript - Raphael.js 中的火灾事件

> ID：11951469
> 
> 赞同：8
> 
> 时间：2012-08-14T11:38:26.133
> 
> 标签：javascript, jquery, events, raphael

我有一个带有点击事件处理程序的 Raphael 元素：

```
var paper = Raphael("container", 770, 160);
var c = paper.rect(10, 10, 50, 50);
c.click(function () {
    alert("triggering");
}) 
```

我如何手动触发此事件？（`c.click()`不工作）
谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T15:19:34.823

虽然这个问题已经回答了，但我会发布我随机找到的解决方案。Raphael 内部结构是可能的：

当您像这样附加事件侦听器时`element.click(func)`，该`element`对象包含一个包含所有事件的数组。在这个数组中有一个对象，它有一个`f`触发事件的方法（奇怪的命名约定）。

因此，总而言之，您可以在知道事件顺序的情况下调用您的事件，在您的情况下，只有`click`索引 0 上的事件，您可以这样称呼它：`c.events[0].f();`

一个更通用的解决方案是一个类似的函数

```
function triggerClick(element) {
    for(var i = 0, len = element.events.length; i < len; i++) {
        if (element.events[i].name == 'click') {
            element.events[i].f();
        }
    }
}​ 
```

但请注意，如果您有多个`click`事件都被触发。

[](http://jsfiddle.net/FHKvu/)**这是一个要演示[**的小提琴。**](http://jsfiddle.net/FHKvu/)**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T22:33:05.757

尽管这已经在不久前得到了回答，但我一直在寻找一些在自然界中更“原生”的东西。以下是我不依赖 Mootools 或 jQuery 的方法。

```
var evObj = document.createEvent('MouseEvents'); 
evObj.initEvent('click', true, false); 
c.node.dispatchEvent(evObj); 
```

这基本上是在浏览器中创建事件，然后将其分派到与 Raphaël 对象关联的节点。

这里也是 MOZ 链接供参考： [https ://developer.mozilla.org/en-US/docs/DOM/document.createEvent](https://developer.mozilla.org/en-US/docs/DOM/document.createEvent)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T11:50:36.807

编辑 ：

Dan Lee 提出的解决方案效果更好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-21T22:11:20.700

我实际上找到了一种更优雅的方式来使用 Kris 的方法。Raphael 支持 element 对象的原生扩展，所以我构建了一个小补丁，将触发方法添加到 raphael

这里是：

```
//raphael programatic event firing
    Raphael.el.trigger = function (str, scope, params){ //takes the name of the event to fire and the scope to fire it with
        scope = scope || this;
        for(var i = 0; i < this.events.length; i++){
            if(this.events[i].name === str){
                this.events[i].f.call(scope, params);
            }
        }
    }; 
```

我设置了一个 Js fiddle 来展示它是如何工作的：[这里](http://jsfiddle.net/fJWsW/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-12T07:44:20.860

我为此写了一个插件，使用event来计算正确的位置；

```
Raphael.el.trigger = function(evtName, event) {
    var el = this[0];      //get pure elements;
    if (event.initMouseEvent) {     // all browsers except IE before version 9
        var mousedownEvent = document.createEvent ("MouseEvent");
        mousedownEvent.initMouseEvent (
            "mousedown", true, true, window, 0, 
            event.screenX, event.screenY, event.clientX, event.clientY, 
            event.ctrlKey, event.altKey, event.shiftKey, event.metaKey, 
            0, null);
        el.dispatchEvent (mousedownEvent);
    } else {
        if (document.createEventObject) {   // IE before version 9
            var mousedownEvent = document.createEventObject (window.event);
            mousedownEvent.button = 1;  // left button is down
            el.fireEvent (evtName, mousedownEvent);
        }
    }
}; 
```

用法：

```
circle2.mousedown(function(e) {
  var circle = this.clone();
  circle.drag(move, down, up);
  circle.trigger("mousedown", e);
}); 
```**

# java - mysql 查询字符串中不支持的字符

> ID：11951470
> 
> 赞同：0
> 
> 时间：2012-08-14T11:38:32.950
> 
> 标签：java, mysql, escaping, special-characters

我在哪里可以找到 mysql 不允许在查询字符串中使用的不受支持的字符列表。我一直在使用转义字符功能。由于某些奇怪的字符，这是否仍然为可能的查询失败留有空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:41:52.633

您可以在查询之前执行

```
StringEscapeUtils.escapeSql(query); 
```

StringEscapeUtils 来自 commons-lang 库

# apache - 在 apache 中定义 VirtualHosts 失败

> ID：11951472
> 
> 赞同：0
> 
> 时间：2012-08-14T11:38:46.513
> 
> 标签：apache, apache2

我尝试在 apache 中使用 vhost 文件（**httpd-vhosts.conf**）为不同的域名定义不同的目录。我将其定义如下并重新启动apache。

没有成功 - 当我尝试访问**www.domain.mx**时，它不会将我带到 documentroot 中提到的路径。

我确保 vhost 文件包含在**httpd.conf**文件中，并且它的模块已加载。

我究竟做错了什么？

```
NameVirtualHost 12.12.65.90:80
NameVirtualHost domain.mx:80
NameVirtualHost www.domain.mx:80

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost 12.12.65.90:80>
    ServerAdmin webmaster@23.21.65.90
    DocumentRoot "C:/xampp/htdocs/"
    ServerName 12.12.65.90
    ServerAlias http://12.12.65.90/
    ErrorLog "logs/general-errors.log"
    CustomLog "logs/general.log" combined
</VirtualHost>

<VirtualHost domain.mx:80>
    ServerAdmin webmaster@domain.mx
    DocumentRoot "/taska/"
    ServerName domain.mx
    ServerAlias domain.mx
    ErrorLog "logs/domain-errors.log"
    CustomLog "logs/domain.log" combined
</VirtualHost>

<VirtualHost www.domain.mx:80>
    ServerAdmin webmaster@domain.mx
    DocumentRoot "/taska/"
    ServerName www.domain.mx
    ServerAlias www.domain.mx
    ErrorLog "logs/domain-errors.log"
    CustomLog "logs/domain.log" combined
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:23:31.603

显然这是这样做的方法（使用serverAlias）：

```
NameVirtualHost *:80

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
    ServerAdmin webmaster@domain.mx
    DocumentRoot "c:/xampp/htdocs/taska"
    DirectoryIndex taska.html
    ServerName domain.mx
    ServerAlias domain.mx
    ErrorLog "logs/domain-errors.log"
    CustomLog "logs/domain.log" combined
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@domain.com
    DocumentRoot "c:/xampp/htdocs/taska"
    DirectoryIndex taska.html
    ServerName www.domain.mx
    ServerAlias *.domain.mx
    ErrorLog "logs/domain-errors.log"
    CustomLog "logs/domain.log" combined
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@21.11.65.90
    DocumentRoot "c:/xampp/htdocs/"
    ServerName localhost
    ServerAlias 21.11.65.90
    ErrorLog "logs/general-errors.log"
    CustomLog "logs/general.log" combined
</VirtualHost>

<Directory C:/xampp/htdocs/taska>
  Order Deny,Allow
  Allow from all
</Directory> 
```

# c# - 使用 GraphicsPath 向矩形添加圆弧

> ID：11951475
> 
> 赞同：1
> 
> 时间：2012-08-14T11:38:50.250
> 
> 标签：c#, winforms, graphics, 2d, graphicspath

我正在尝试绘制一个 IC 封装的顶视图，它应该看起来像这样（抱歉，我什至无法使用 windows 的油漆将它画得足够好！）

![在此处输入图像描述](../Images/915229778ec7d0f504b0f8ed5c71f49e.png)

我正在使用路径对象，但我的路径对象的结果与我期望的相差甚远。至少完整的矩形本身画得很好，但我无法制作您在示例图片中看到的顶部弧线。如果你能指出我正确的地方，那就太好了。这是我的代码：

```
 private GraphicsPath DrawDilBounds(Size size)
    {
        var p = new GraphicsPath(FillMode.Alternate);
        p.StartFigure();
        p.AddLine(0, 0, 0, size.Height);
        p.AddLine(0, size.Height, size.Width, size.Height);
        p.AddLine(size.Width, size.Height, size.Width, 0);
        p.AddLine(size.Width, 0, (size.Width/2) - 10, 0);
        p.AddArc(size.Width/2 - 10, 0, 10, 10, 10, 10); //This arc looks like no arc!
        p.AddLine((size.Width/2) + 10, 0, 0, 0);
        p.CloseFigure();

        return p;
    } 
```

所以我在这里做的是从左上角开始一些线，到左下角，到右下角，最后到右上角，然后我添加了一条从右上角到顶部中间的线，负 10 像素然后我想添加宽度为 20 像素的弧，然后完成绘图回到左上角。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:07:31.943

您可以通过其边界框指定弧。使用 10 作为半径给出一个 20 x 20（您使用 10 x 10）的框，其左上角位于距离圆弧中心（-10, -10）处（您使用 (-10, 0)）。最后两个参数必须是*度数*，即开始和结束角度。由于您从左到右绘制它，因此它将是 0 度和 180 度（您使用了 10 和 10）。您还摸索了顶部两条线的长度，它们应该是宽度 -10 的一半（您使用了 +10）。使固定：

```
 p.AddLine(size.Width, 0, (size.Width / 2) + 10, 0);
        p.AddArc(size.Width / 2 - 10, -10, 20, 20, 0, 180);
        p.AddLine((size.Width / 2) - 10, 0, 0, 0); 
```

这让你：

![在此处输入图像描述](../Images/799c5bdd58ef03a19327ca82dfde6101.png)

# php - 我可以计算会话以确定在线人数吗？

> ID：11951476
> 
> 赞同：2
> 
> 时间：2012-08-14T11:38:50.623
> 
> 标签：php, mysql, session

我对某事感到困惑。当我尝试搜索如何在 PHP 中计算在线用户时，所有答案都与 MySQL 和许多不同的方式相关。

在我的脚本中，任何提交登录表单的用户都会创建一个 $_SESSION['$nickname']

所以我想，我可以用 count($_SESSION['$nickname']); 来计算登录会话数吗？并将其显示在我的页面中？

或者这完全是一个错误的逻辑？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:42:06.760

首先，您必须定义“在线”的含义。用户是否应该在过去 5 分钟内点击了链接？

我假设您的数据库中已经有一个用户表。所以最简单的方法是添加一个新列，例如`lastAction TIMESTAMP`.

当用户点击你页面上的链接时，你的脚本应该更新这个值。

在您的统计页面或其他页面上，您可以使用该代码获得*在线*用户的数量：

```
SELECT COUNT(*) FROM users WHERE lastAction > (NOW() - 60*5) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T11:44:02.530

完全错误的逻辑。$_SESSION 是每个用户的事情。一个用户的会话不与任何其他用户的会话共享。想想看 - 一个用 PHP 编写的在线银行，都共享一个 $_SESSION - 每个人都会看到每个人的帐户详细信息。

假设您使用的是标准的基于 PHP 文件的会话，您可以在它们存储的任何目录中计算会话文件，例如

```
$users = count(glob(session_save_path() . '/*')); 
```

请注意，这仅计算会话文件 - 它无疑会包含尚未被垃圾收集的陈旧/死会话。如果您想要一个实际的“现在真的在线”，您必须解析每个会话文件并检查其内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T11:46:34.033

PHP 在会话存储方面非常灵活，您可以定义自己的会话保存/恢复处理程序。

但是，默认会话存储是`files`，其中每个会话单独存储到磁盘。这意味着，为了找出有多少用户有“**在线**”（这里，我假设“*在线=会话存在`$_SESSION['$nickname']`set* ”），您需要打开存储在磁盘上的所有会话文件，并检查有多少唯一昵称存在于其中。这在时间和所需资源方面都非常繁重。

因此，大多数教程建议通过维护每个用户的最后一次看到的时间戳（并检查有多少用户在最后 X 分钟内最后一次看到）来在数据库中计算这一点。

如果您希望合并，可以通过定义您自己的*会话保存处理程序*来将会话信息存储在数据库中来实现...

* * *

关于会话的一些附加说明：

*   关闭浏览器时会话不会立即销毁。事实上，浏览器不会以任何方式告诉服务器它正在关闭。这意味着服务器应该提出一些基于时间的算法来决定谁在线谁不在线。
*   会话彼此隔离，因此`$_SESSION["foo"]`不能由多个不同的会话共享 -`Global.asa`在 PHP 中没有等价物。不是开箱即用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:44:24.877

这是错误的逻辑，会话仅在最终用户的 PC 上本地存储并立即销毁，因此如果用户不做任何事情，就无法从服务器读取它以进行任何确认。服务器端会话仅在垃圾清理时被销毁。

您最好的选择是为每个用户设置一个时间戳，每当用户执行任何操作时都会更新该时间戳。这意味着您需要通过 JS/AJAX、PHP 触发此更新。然后，您可以查看最近 5 分钟内有多少时间戳，这可以让您大致了解当前有多少用户在线。

您还可以有一个隐藏的 iframe，它每隔几秒不断刷新并更新时间戳，或者 JS/AJAX 也每 X 秒更新一次时间戳......

# google-maps - 谷歌地图区域边界有多条线

> ID：11951480
> 
> 赞同：0
> 
> 时间：2012-08-14T11:39:18.807
> 
> 标签：google-maps, google-maps-api-3

我们已经在我们的网站[www.kozaza.com](http://www.kozaza.com)中实施了谷歌地图边界。昨天我们注意到区域边界上显示了多条线。你能帮我解决这个问题吗？我相信这与谷歌地图代码有关，因为我们在过去的 1 个月里没有碰过我们的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:14:52.467

听起来谷歌更新了他们的地图图块。如果您找不到与现有边界匹配的边界数据，您应该能够设置[地图样式以删除现有边界。](https://developers.google.com/maps/documentation/javascript/styling)

看起来它们也不匹配[Natural Earth 数据集中的边界](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_query_sidebarF_local.html?country=Korea,%20South)：

# java - FileZilla 错误 错误 550、错误 501

> ID：11951481
> 
> 赞同：0
> 
> 时间：2012-08-14T11:39:22.317
> 
> 标签：java, android, file-upload, ftp, filezilla

大家好，我在我的电脑上安装了 filezilla ftp 服务器。我正在尝试在 android 应用程序上上传文件。但是，我收到错误 550（未找到目录）和错误 501（语法错误）。我在互联网上进行了一些搜索，但没有找到解决方案。请你帮助我好吗？这也是 FileZilla 界面上的日志：

```
(000001)14.08.2012 14:36:07 - (not logged in) (192.168.10.179)> Connected, sending welcome message...
(000001)14.08.2012 14:36:07 - (not logged in) (192.168.10.179)> 220 FTP server' a hoşgeldiniz.
(000001)14.08.2012 14:36:07 - (not logged in) (192.168.10.179)> USER users
(000001)14.08.2012 14:36:07 - (not logged in) (192.168.10.179)> 331 Password required for users
(000001)14.08.2012 14:36:07 - (not logged in) (192.168.10.179)> PASS *******
(000001)14.08.2012 14:36:07 - users (192.168.10.179)> 230 Logged on
(000001)14.08.2012 14:36:07 - users (192.168.10.179)> CWD murat.alemdagtp
(000001)14.08.2012 14:36:07 - users (192.168.10.179)> 550 CWD failed. "/murat.alemdagtp": directory not found.
(000001)14.08.2012 14:36:07 - users (192.168.10.179)> TYPE I
(000001)14.08.2012 14:36:07 - users (192.168.10.179)> 200 Type set to I
(000001)14.08.2012 14:36:08 - users (192.168.10.179)> PASV
(000001)14.08.2012 14:36:08 - users (192.168.10.179)> 227 Entering Passive Mode (192,168,10,179,9,71)
(000001)14.08.2012 14:36:08 - users (192.168.10.179)> STOR 
(000001)14.08.2012 14:36:08 - users (192.168.10.179)> 501 Syntax error
(000001)14.08.2012 14:36:09 - users (192.168.10.179)> QUIT
(000001)14.08.2012 14:36:09 - users (192.168.10.179)> 221 Goodbye
(000001)14.08.2012 14:36:09 - users (192.168.10.179)> disconnected. 
```

这是我的上传代码：

```
public Void doInBackground(Object... arg0) 
{  

  String server = "192.168.10.179";
  // TODO Auto-generated method stub
      try
      {
        ftpClient.connect(server,21);
        ftpClient.login("users", "1234567");
        ftpClient.changeWorkingDirectory("murat.alemdag\ftp");
        ftpClient.enterLocalPassiveMode();
        FileInputStream in=new FileInputStream(file);
        ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
        ftpClient.storeFile(filename, in);
        publishProgress(100); 
        ftpClient.logout();

      }

      catch (Exception ex)
      {
          ex.printStackTrace();
      }    
  return null;
 }//end of doInBackground method 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:48:19.673

请确保目录条目“murat.alemdagtp”完全存在。它似乎没有。您可以使用任何 ftp 客户端（如 filezilla 客户端）执行此操作，并记下您在登录后可以看到哪些目录，而无需提供起始目录。

然后尝试使用正斜杠“/”来提交路径，看看是否可行。

更新：关于您的语法错误：STOR 需要远程文件名作为参数。我在日志中看不到这一点。看看这里：nsftools.com/tips/RawFTP.htm#STOR

所以检查变量文件名在

```
tpClient.storeFile(filename, in); 
```

目前包含。

# matlab - 使用文件的创建日期并将其添加到 matlab 中的文件名中

> ID：11951488
> 
> 赞同：0
> 
> 时间：2012-08-14T11:39:39.770
> 
> 标签：matlab

我有很多文件，我想通过包含文件的创建日期来编辑所有名称。

这是我到目前为止所拥有的，但它不起作用：

```
a='c:\test_for_namn_andring\*.*';

file_info=dir('c:\test_for_namn_andring\*.*');

names={file_info.name};
dates={file_info.date};

for i=3:length(names)

   oldfilename = names;
   newfilename = (strcat(names(1,3:end), dates(1,3:end)));
   newfilename = fullfile(a, newfilename);
   movefile(fullfile(a,oldfilename{i}),newfilename);

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:57:04.577

像这样的东西应该工作：

```
file_info = dir(a);

for ii = 1:length( file_info )
    if ~ file_info(ii).isdir
        oldName = fullfile( a, file_info(ii).name );
        newName = fullfile( a, sprintf( '%s_%s', file_info(ii).name, file_info(ii).date ) );
        movefile( oldName, newName );
    end
end 
```

您可能还应该检查返回`movefile`以处理错误。有关更多信息，请参阅[文档](http://www.mathworks.com/help/techdoc/ref/movefile.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:23:49.533

我过去做过类似的事情。这是代码，已根据您的需要进行调整

```
% define params
folder = 'd:/test';
name_filter = '*.*';                % any filter, e.g. '*.txt'
date_format = '_yyyymmddHHMMSSFFF'; % define the desired date string format

% process
f = dir(fullfile(folder, name_filter));
f([f.isdir]) = [];
names = {f.name}';
fullnames_old = cellfun(@(x) fullfile(folder, x), names, 'UniformOutput', false);

dates = cellstr(datestr([f.datenum]', date_format));  
[pathstr, name, ext] = cellfun(@(x) fileparts(x), names, 'UniformOutput', false);
fullnames_new = cellfun(@(x, d, e) fullfile(folder, [x, d, e]), name, dates, ext, 'UniformOutput', false);
status = cellfun(@(x, y) movefile(x, y, 'f'), fullnames_old, fullnames_new);
assert(all(status), 'failed!');     % check result 
```

# c# - c# aspRepeater数据在使用ItemDataBound根据字段创建按钮时不显示

> ID：11951492
> 
> 赞同：0
> 
> 时间：2012-08-14T11:40:07.090
> 
> 标签：c#, asp.net, itemdatabound, asprepeater

基本上我正在尝试填充一个部门表，并根据更改日期，为某个日期范围内的任何部门创建一个按钮。问题是，按钮创建但没有数据，

这是我到目前为止所拥有的 - onPageLoad 我绑定了所有工作并显示的数据源，直到我尝试 iTemDataBound

ASP.net

```
<asp:Repeater ID="DepartmentsList" runat="server" OnItemDataBound="DepartmentsList_ItemDataBound"/>
<HeaderTemplate>
     <table id="grouptable" class="table table-bordered table-striped"> 
      <thead>
              <tr>
          <th>Send</th>
          <th>ID</th>
          <th>Name</th>
          <th>Last Modified</th>
          <th>Actions</th>
          </tr>
           </thead>
           <tbody>
</HeaderTemplate>
<ItemTemplate>
              <tr>
                  <td>
                  <input type="checkbox" name="SendSelect[]" value="<%# Eval("Dept_ID") %>"</input></td>
                  <td><%# Eval("Dept_ID") %></td>
                  <td><a href="<%# Eval("gURL") %>"><%# Eval("DESC") %></a> </td>
                  <td><asp:Label ID="chg_date" runat="server" Text='<%# Eval("chg_date") %>'></asp:Label></td>
                  <td><a class="btn btn-info" href="<%# Eval("gURL") %>"><i class="icon-pencil icon-white"></i> Edit </a>&nbsp;&nbsp<asp:Button ID="bcastBtn" runat="server" Text="Send Now" CssClass="btn btn-danger" /> </td>
              </tr>
</ItemTemplate>
<FooterTemplate>
      </tbody>
      </table>
</FooterTemplate>
</asp:Repeater> 
```

c# 代码

```
protected void DepartmentsList_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            RepeaterItem item = e.Item;
            if (e.Item.ItemType != ListItemType.Item && e.Item.ItemType != ListItemType.AlternatingItem) 
            {
                return;
            }
            else
            {
                Repeater bcastbuttonControl = (Repeater)item.FindControl("bcastBtn");
                Repeater DepartmentsList = (Repeater)item.FindControl("chg_date");

                //Coding for date validation to go here - at the minute just checking based on empty or null
                if (String.IsNullOrEmpty(chg_date.Text))
                {
                    bcastBtn.Visible = false;

                }
                else
                {
                    bcastBtn.Visible = true;
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:55:03.200

```
Repeater bcastbuttonControl = (Repeater)item.FindControl("bcastBtn");
Repeater DepartmentsList = (Repeater)item.FindControl("chg_date"); 
```

我认为上面的代码有问题。您应该将第一个转换为按钮，将第二个转换为文本框（或任何控件，但它肯定不是中继器），当您添加 onitemdatabound 时，您的数据可能会因为无效转换异常而消失

```
RepeaterItem item = e.Item; 
```

删除上面的代码，而是简单地使用：

```
Label chg_date = (Label)e.Item.FindControl("chg_date"); 
```

如果这不起作用，您可以发布您的 page_Load 代码吗？

# apache-flex - 抑制 Flex 对象的事件

> ID：11951493
> 
> 赞同：0
> 
> 时间：2012-08-14T11:40:08.923
> 
> 标签：apache-flex, events, actionscript, flex3

[编辑] 这里的主要问题松散地翻译为“Flex 是多线程的”吗？从那以后我发现它不是，所以我不会在操作中途让数据神秘地改变。下面的代码有效，但让事情变得尴尬和混乱。我最终通过架构更改解决了这个问题，消除了抑制事件的需要。正如第一位评论者所建议的那样。

通过改变监听事件的方式和明确地执行某些操作而不是通过事件来消除无限循环。

使用命令模式更容易整理事件。

基本上，如果您遇到此页面，请不要使用下面的代码！[/编辑]

我正在使用简单、轻量级的 MVC 模式构建一些 Flex 应用程序。模型扩展或封装调度程序并在更新时触发事件。我坚持使用 Flex 3.5。

在某些情况下，我会想要抑制这些事件以避免无限循环或帮助将多个操作整理到单个事件中。

我第一次尝试的解决方案不会用不必要和令人困惑的代码乱扔模型是这样的：

```
 private var _suppressEvents:Boolean = false;
    public function suppressEvents(callback:Function):void
    {
        // In case of error, ensure the suppression is turned off, then re-throw
        var err:Error = null;
        _suppressEvents = true;
        try 
        {
            callback();
        }
        catch(e:Error)
        {
            err = e;
        }
        _suppressEvents = false;
        if (err)
        {
            throw (err);
        }
    }

    public function dispatch(type:String, data:*):void
    {
        // Suppress if called from a suppress callback.
        if (!_suppressEvents)
        {

            _dispatcher.dispatchEvent(new DataEvent(type, data));
        }
    } 
```

显然，我使用包含我希望运行的模型代码的函数调用“suppressEvents”。

我的问题：

1：我是否有可能使用这种技术意外丢失事件？

2：在确保我不会在通话后意外进入抑制状态时，我是否需要考虑任何其他错误边缘情况？

3：有没有我想念的更清洁的方式？

谢谢！

# android - 如何在我的应用程序的软键盘上使用 Enter？

> ID：11951500
> 
> 赞同：1
> 
> 时间：2012-08-14T11:40:28.353
> 
> 标签：android, keyevent, enter

我的 keyevent 有很大问题，我试图调用我的另一个活动，但 keyevent 不起作用，请检查我的代码犯了什么错误。实际上，如果我按下笔记本电脑中的软键盘输入按钮，则我创建了一个轮播设计，keyevent 不起作用...

这个案子对我不起作用...

```
case KeyEvent.KEYCODE_ENTER:
                System.out.println("enter pressed");
            if(position==0);{
                Intent intent = new Intent(sampleActivity.this, test.class);
                startActivity(intent); 
```

![在此处输入图像描述](../Images/4d0a346782b093d2c6751e7f5cf5fe0b.png) }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:51:17.367

我想您需要启用键盘输入。尽管开发人员文档说默认启用键盘支持，但在 SDK rev 20 中似乎并非如此。我在模拟器的 config.ini 文件中明确启用了键盘支持，并且有效！

添加：hw.keyboard=yes

至：~/.android/avd/.avd/config.ini

参考：http: [//developer.android.com/tools/devices/managing-avds-cmdline.html#hardwareopts](http://developer.android.com/tools/devices/managing-avds-cmdline.html#hardwareopts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:07:51.620

您的代码似乎是正确的（除了 synthax 错误），我从工作示例中看到的唯一区别是您的 event.getAction() 条件。我建议检查 ACTION_DOWN 子句。

# c# - 应该为分布式应用程序中插件的动态加载定制 MEF 的哪些部分

> ID：11951501
> 
> 赞同：2
> 
> 时间：2012-08-14T11:40:35.630
> 
> 标签：c#, wpf, mef

我的模拟应用程序将使用插件来提供模拟算法和数据结构来存储模拟数据。该应用程序由两部分组成。首先是提供 UI 的主机应用程序（作为 WPF UI 或作为 CAD 应用程序的插件）。此应用程序处理与用户的所有交互，但不执行任何模拟计算，也不存储任何模拟数据。第二部分是执行模拟计算的数据应用程序。数据应用程序没有任何方式让用户直接与其交互，所有输入都是通过与主机的连接提供的（如果两者都在同一台机器上，则通过命名管道；如果它们在不同的机器上，则通过 TCP）。

数据应用通过一个或多个插件提供数据存储方式、仿真算法等，方便添加新功能。为了实现这一点，计划是：

*   让宿主应用程序执行插件搜索。主机应该存储描述插件及其元数据的数据，但它永远不会实例化任何插件类。为了防止将程序集加载到主机应用程序中，有必要以某种序列化格式存储插件的描述。
*   数据集应用程序将从主机请求插件信息，确定要加载的所需插件，请求传输正确的程序集（分布式计算所必需的）并加载插件。
*   正确插件的选择应基于类型（如 System.Type）和附加信息，如优先级等。

为了使所有这些工作，我认为我必须：

*   为数据应用程序编写某种延迟加载目录（类似于 Silverlight 中的 DeploymentCatalog）。诀窍可能是仅在应用程序确定需要实例化哪些类之后才请求传输和加载程序集。
*   为宿主应用程序编写我自己的程序集扫描机制，以某种序列化（字符串？）格式存储插件信息，以防止插件程序集被加载到宿主应用程序中。
*   编写某种加载机制，可以选择正确的插件类并确定如何加载它以及提供哪些构造参数。
*   找到一些方法来允许插件指定设置值（包括默认值和所述值的本地化描述）和元数据。

我想做尽可能少的工作，因此我查看了一些可用的 .NET 插件系统。从外观上看，MEF 似乎是最有希望的候选人。我已经阅读了 MEF 的架构和能力，但对于我应该将精力集中在哪里，我仍然有些不知所措。所以我的问题是必须定制 MEF 的哪些部分才能使 MEF 与我计划的方法一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T02:42:42.420

事实证明，MEF 缺少延迟加载插件程序集所需的某些位，但是可以在应用程序的插件部分中使用 MEF 的某些部分。

*   组件的延迟加载是通过实现 AppDomain.AssemblyResolve 事件的处理程序来完成的。此解析器使用现有的通信功能（在主机应用程序和数据集应用程序之间进行通信所必需的）来传输所需的程序集。
*   插件数据的扫描和序列化按照相关问题的[答案中的说明实现。](https://stackoverflow.com/a/12850277/539846)这部分大量使用MEF来做插件数据的检测和序列化。
*   在 MEF 中似乎不可能在不实例化对象的情况下组合部件，因此应用程序的这一部分是按照此[答案提供的实现来实现的](https://stackoverflow.com/a/13852234/539846)

# html - 需要有关“从侧面浮动”项目的指导吗？

> ID：11951505
> 
> 赞同：0
> 
> 时间：2012-08-14T11:40:50.950
> 
> 标签：html, css, scroll, effect

我正在尝试制作一个具有以下效果的网站：

1.  加载页面时，什么都没有显示
2.  然后，当您向下滚动时，图片会从浏览器窗口的两侧浮入，然后在窗口中间堆叠起来。（喜欢的位置：固定）
3.  当您进一步滚动时，更多图片将浮出并添加到中间的堆栈中。

很难解释和找到，但这里有一个非常高级[的效果](http://www.nike.com/jumpman23/aj2012/)示例。

我真的希望你能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:39:29.600

试试这个....

```
   $(文档).ready(函数(){

    $("body").css("display","none");
    $("body").fadeIn(2000);
    });

```

在这个中，首先整个页面将是空的......然后它会淡入......

```
    $('#element').animate({
    不透明度：1，
    左：'+=50'，
    顶部：'+=200'
    }，2000，函数（）{
    // 动画完成。
    });

```

使用上面的代码移动对象....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:54:09.207

我建议您考虑使用 JQuery 动画以及搜索“无限滚动”或“无限滚动”。

JQuery UI 可能是您最好的选择并且看起来不错。有几种方法可以做到这一点，这里写的太多了。

至于无限滚动，也有很多方法可以解决这个问题。

这是一个开始： http: [//masonry.desandro.com/demos/infinite-scroll.html](http://masonry.desandro.com/demos/infinite-scroll.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:46:20.253

首先，将所有元素设置为 display:none; 在你的 CSS 中。使用 jquery 动画：

*   使用[scroll()](http://api.jquery.com/scroll/)事件来决定何时开始
*   使用[animate()](http://api.jquery.com/animate/)来完成实际工作。

例如：

```
$('#element').animate({
  opacity: 1,
  left: '+=50',
  top: '+=200'
}, 2000, function() {
  // Animation complete.
}); 
```

这将导致 id 为“元素”的元素淡入，同时在 2 秒内向右移动 50 像素并向下移动 200 像素。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T11:53:04.270

您也可以使用 jQuery，它具有良好的框架效果。

# java - Spring AMQP：想将消息放入队列并立即发送ACK

> ID：11951508
> 
> 赞同：4
> 
> 时间：2012-08-14T11:40:57.227
> 
> 标签：java, spring, rabbitmq, amqp, spring-amqp

我编写了 Java 应用程序，它将消息发送到 RabbitMQ。然后 Flume 从 RabbitMQ 队列中获取消息。我很感兴趣没有人从队列中提取消息，除了水槽。

我的应用程序使用 Spring AMQP Java 插件。

## 问题：

使用下面的代码，消息进入 RabbitMQ 队列并永远保持“未知”。据我了解，RabbitMQ 正在等待来自 MessageListener 的 ACK，但 MessageListener 永远不会 ACK。有人知道如何解决吗？

编码：

```
public class MyAmqpConfiguration {

    @Autowired
    ConnectionFactory connectionFactory;

    @Bean
    public SimpleMessageListenerContainer messageListenerContainer() {

    SimpleMessageListenerContainer container = new SimpleMessageListenerContainer(connectionFactory);
    container.setQueues(activityLogsQueue());
    container.setMessageListener(MyMessageListener());
            container.setConcurrentConsumers(3);

    return container;
    }

        @Bean(name="myTemplate")
        public RabbitTemplate rabbitTemplate() {
        RabbitTemplate template = new RabbitTemplate(connectionFactory);
        template.setMessageConverter(MyMessageConverter());
        return template;
        }
}

public class MyMessageListener implements MessageListener {

   public MyMessageListener(MessageConverter converter, MyMessageHandler<MyObject> messageHandler) {
      this.converter = converter;
      this.messageHandler = messageHandler;
    }

   @Override
   public void onMessage(Message message) {
     this.messageHandler.doThings();
   }

}

public class MyMessageHandler  {

     @Autowired
     @Qualifier("myTemplate")
     RabbitTemplate template;

     @Override
     public void handleMessage(MyObject thing) {
         template.convertAndSend(exchange, routingKey, thing);
     }

}

public class MyMessageConverter extends JsonMessageConverter {

    @Override
     protected Message createMessage(Object object, MessageProperties messageProperties) { 
        //do things
     }

     @Override
     public Object fromMessage(Message message) throws MessageConversionException {
         throw new UnsupportedOperationException("fromMessage is not supported in "+this.getClass().getName());
     }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:38:53.650

如果您不想确认每条消息，那么您可以通过执行在 SimpleMessageListenerContainer 上设置 AcknowledgeMode

```
container.setAcknowledgeMode(AcknowledgeMode.NONE); 
```

查看[API 参考](http://static.springsource.org/spring-amqp/docs/1.1.x/apidocs/org/springframework/amqp/rabbit/listener/SimpleMessageListenerContainer.html)以获取更多信息。

更新：应该是**AcknowledgeMode.NONE**

> 设置为 AcknowledgeMode.NONE 告诉代理不要期望任何确认，并且它将假定所有消息在发送后立即得到确认（这在本机 Rabbit 代理术语中是“自动确认”）。如果 AcknowledgeMode.NONE 则通道不能是事务性的（因此如果该标志被意外设置，容器将在启动时失败）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:28:43.987

这是导致阅读解决方案的讨论：

[http://forum.springsource.org/showthread.php?129304-Spring-AMQP-would-like-to-put-message-to-queue-and-send-ACK-immediately&p=422064&posted=1#post422064](http://forum.springsource.org/showthread.php?129304-Spring-AMQP-would-like-to-put-message-to-queue-and-send-ACK-immediately&p=422064&posted=1#post422064)

# vim - Vim 状态行在 Linux 中不会立即更新

> ID：11951510
> 
> 赞同：3
> 
> 时间：2012-08-14T11:41:01.107
> 
> 标签：vim, vim-plugin

我正在使用[Powerline](https://github.com/Lokaltog/vim-powerline/)，但我所说的对于常规 VIM 状态行也是如此。在 Windows 中，当我要进入粘贴模式（粘贴切换）时，我会立即在状态行中看到这个 - 带有“PASTE”的红色条。但是在 Linux（Ubuntu）中，我需要在任何移动之前进行一些移动（j、k、w、b 等）来查看结果 - 状态行没有更新。[PS使用Shell.vim](http://www.vim.org/scripts/script.php?script_id=3123)插件并进入全屏模式我可以在Windows中获得相同的效果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T00:22:59.457

由于@DaniloSousa 答案中的链接不再有效，我想我会添加对我有用的内容（可能非常接近该解决方案）：

```
nnoremap <silent> <F2> :set paste!<CR>
set pastetoggle=<F2> 
```

这将在正常和插入模式下切换粘贴打开/关闭，并立即更新电力线中的状态。我不知道没有电力线它是否可以工作；可能取决于您定义的状态`showmode`和/或您定义`statuline`的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T21:26:39.127

您是否尝试过使用`paste!`而不是`pastetoggle`Lokaltog 在 issue [#103](https://github.com/Lokaltog/vim-powerline/issues/103#issuecomment-4302754)中建议的那样？

为我工作！

# c# - 我如何计算行总值的总和

> ID：11951511
> 
> 赞同：0
> 
> 时间：2012-08-14T11:41:00.780
> 
> 标签：c#, javascript, asp.net

我有一个嵌套的网格视图：

```
<gridview id="gvParent" runat="server" >
  <Columns>
    <asp:TemplateField>
     <ItemTemplate>
       <asp:Label Id="name" runat="server" Text='<%# Eval("Name")%>' />

        <gridview id="gvChild" runat="server" >
          <Columns>
           <asp:TemplateField>
            <ItemTemplate>
            <input type="text" id="Val1'<%# Eval("Identifiant")%>'" value='<%# Eval("Val1">' onchange=  "CalculateSumRow(Val2'<%# Eval("Identifiant")%>');"/>

           </ItemTemplate>
          </asp:TemplateField>

        <gridview id="gvChild" runat="server" >
          <Columns>
           <asp:TemplateField>
            <ItemTemplate>
       <input type="text" id="Val2'<%# Eval("Identifiant")%>'" value='<%# Eval("Val2")%>' onchange="CalculateSumRow(Val2'<%# Eval("Identifiant")%>');"/>

           </ItemTemplate>
          </asp:TemplateField>

         <asp:TemplateField>
          <ItemTemplate>
            <input type="text" id="TotalRealise<%# Eval("Identifiant")%>'" value='<%# Eval       ("TotalRealise")%>'/>

            </ItemTemplate>
          </asp:TemplateField>

      </Columns>

    </gridview>

    </ItemTemplate>
  </asp:TemplateField>
  </Columns> 
```

在javascript函数CalculateSumRow中，我在字段TotalRealise中对每行的val1和val 2求和，我需要总共字段TotalRealise。我尝试创建一个从CalculateSumRow调用的javascript函数。我尝试逐行解析第一个网格，然后第二个网格，我想获取所有 totalrealise 字段并用它求和，但是当我搜索第二个网格时收到错误。我想从 javascript 进行计算。

```
 function CalculateSumRow (identifiant)
 {
   ......
  CalculateTotal();
 }

 function CalculateTotal()
 {
   var grdPar=document.getdocumentById('<%= gvParent%>');

   for(row=1;row<grdPar.rows.length;row++)
   {

      var grdChild=document.getdocumentById('<%= gvChild%>');

      for(rowC=1;row<grdChild.rows.length;rowC++)
       {
         alert(grdChild.rows[rowc].cell[3].value);
       }

    }
   } 
```

有人可以帮我赚到这笔钱吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:07:38.863

最好在网格的 OnRowDataBound 事件中执行此操作

```
double totalSum = 0;
protected void OnRowDataBound(object sender, GridViewRowEventArgs e)
{
    int columnValue = 0;

    // get the value from column index 0, can be any other index where you have your value
    int.TryParse(e.Row.Cells[0].Text, out columnValue);

    if (columnValue > 0)
    {
        totalSum = totalSum + columnValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:58:01.737

如果你习惯使用 jQuery，试试这个：

```
$(function(){
  var sum = 0;
  $("input[id^="TotalRealise"]").each(function(){
    sum = sum + parseFloat($(this).val());
  });
}); 
```

调用以下函数 onchange 输入值事件：

```
function CalculateTotalRealise()
{
 var sum = 0;
  $("input[id^="TotalRealise"]").each(function(){
    sum = sum + parseFloat($(this).val());
  });
 return sum;
} 
```

这将为您提供 TotalRealise 字段的总和。

# hibernate - JBoss 中的休眠环境

> ID：11951519
> 
> 赞同：1
> 
> 时间：2012-08-14T11:41:33.527
> 
> 标签：hibernate, jboss

我有两个相同的 JBoss 副本和相同的类路径条目以及类路径中的相应 jar，它们位于两台服务器上的同一文件夹层次结构中。当我在一台服务器上启动 JBoss 时，它显示

```
[Environment] Hibernate 3.3.1.GA
[Environment] hibernate.properties not found
[Environment] Bytecode provider name : javassist 
```

另一个正在显示

```
[Environment] Hibernate 3.1.1
[Environment] hibernate.properties not found
[Environment] using CGLIB reflection optimizer 
```

在哪里可以找到正在使用的休眠和字节码提供程序。此查询与我之前的查询链接我认为这是原因。我再次重复类路径中的 JBoss 副本和 jar 文件，并且 .bash_profile 副本是相同的。有吗任何依赖于系统的东西？提前致谢。

问候， 阿尔卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:34:21.480

查找文件夹`%JBOSS_HOME%/common/lib`并检查内部使用的 Hibernate 版本`hibernate-core.jar`（打开`META-INF/MANIFEST.MF`文件）。

如果 JBoss 副本相同，则两个版本的 jar 文件应该相同。

# javascript - 在 django 模板中使用 javascript

> ID：11951525
> 
> 赞同：0
> 
> 时间：2012-08-14T11:41:58.917
> 
> 标签：javascript, django, forms

我有一个可用的 javascript 文件，它使用元素 ID 标记在 html 页面上添加和删除复选框和下拉列表。我想将 javascript 代码应用于由 django 应用程序生成的表单。我试图通过更改 javascript 元素 ID 来隐藏字段，如下所示，

```
id1.style.visibility = 'hidden'; 
```

匹配由 django 生成的表单上的元素，但 javascript 没有生效并且该字段仍然可见。

在我的 django 模板 html 文件中，我包含了来自 django 提供的站点的 js 文件。

```
<head>
   <script type="text/javascript" src="/static/js/submitform.js"></script>
   <script src="http://code.jquery.com/jquery-latest.js"></script>
</head> 
```

我可以在模板页面源代码中看到上面的js文件，可以点击链接查看javascript代码。所以我知道 javascript 文件包含在模板中。

我对我的 css 文件做了类似的事情，并且在模板页面上生效，但是我无法正确应用 javascript。

我已经为此苦苦挣扎了一段时间，以前没有这样做过。任何人都可以提供帮助或知道我可以阅读的任何文档，这些文档告诉我如何做到这一点？

对不起，如果这不是一个合适的问题，但以前没有这样做过，我只是坚持这个。我正在从事的项目是一个内部测试站点，所以我现在并不担心压缩 js 文件给客户或我可能接触到的任何注射……只是了解如何做到这一点。！

谢谢 - 奥利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:22:08.500

您需要在包含 jquery 文件之前包含 Jquery 库，因此将其交换为：

```
<head>
   <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
   <script type="text/javascript" src="/static/js/submitform.js"></script>
</head> 
```

编辑：

jquery 库的脚本标记中也缺少“类型”属性。我已经更新了代码，看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:27:40.293

你可以这样做：

```
#html
{% block main-menu %} 
    <br>
    <br>
    Click here to play with username
    <button id="show_button">show</button>
    <button id="hide_button">hide</button>
    <br>
    <br>
    <script type="text/javascript">
        $(function() {
                $("#show_button").click(function() {
                    $("#id_username").show();
                });
                $("#hide_button").click(function() {
                    $("#id_username").hide();
                });
        });
    </script>
    <div class="contentarea">
        <form method="post" action="">{% csrf_token %}
            {{ reg_form.as_p }}
            <input type="submit" value="register" />
        </form>
    </div>

#forms.py
class RegistrationForm(forms.Form):
    username = forms.CharField(label="Username", max_length=30)
    email = forms.EmailField(label="Email")
    password = forms.CharField(label="Password", widget=forms.PasswordInput())
    password2 = forms.CharField(label="Password (Again)", widget=forms.PasswordInput())

Here your clean methods and so on 
```

Django 会自动为你的字段创建一个 id，比如 id_yourfield。

# android - 将许可代码添加到 Libgdx 项目后崩溃

> ID：11951527
> 
> 赞同：1
> 
> 时间：2012-08-14T11:42:05.197
> 
> 标签：android, libgdx, android-lvl

我要求在我的代码中找到一个导致应用程序崩溃的问题。我有许可代码和 libgdx 代码，它们可以作为单独的应用程序正常工作。我在 Libgdx 项目的主要活动中添加了许可代码。之后，应用程序在设备上崩溃。我不知道为什么。

Logcat如下：

![日志猫](../Images/e463b08168f28e0490abd228a4951958.png)

主要活动代码在这里：

```
public class MyActivity extends AndroidApplication {
private static final String BASE64_PUBLIC_KEY = "!!!!! PLACE YOUR KEY HERE!!!!!!";

// Generate your own 20 random bytes, and put them here.
private static final byte[] SALT = new byte[] {
        -45, 65, 30, -128, -103, -57, 74, -64, 51, 88, -95, -45, 77, -117, -36, -113, -11, 32, -64,
        89
};

private TextView mStatusText;
private Button mCheckLicenseButton;

private LicenseCheckerCallback mLicenseCheckerCallback;
private LicenseChecker mChecker;
// A handler on the UI thread.
private Handler mHandler;

public void onCreate (android.os.Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    print("MyLog====","00000000000000000");

    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    setContentView(R.layout.main);

    mStatusText = (TextView) findViewById(R.id.status_text);
    mCheckLicenseButton = (Button) findViewById(R.id.check_license_button);
    mCheckLicenseButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            doCheck();
        }
    });

    mHandler = new Handler();

    // Try to use more data here. ANDROID_ID is a single point of attack.
    String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);

    // Library calls this when it's done.
    mLicenseCheckerCallback = new MyLicenseCheckerCallback();
    // Construct the LicenseChecker with a policy.
    mChecker = new LicenseChecker(
            this, new ServerManagedPolicy(this,
            new AESObfuscator(SALT, getPackageName(), deviceId)),
            BASE64_PUBLIC_KEY);
    print("MyLog====","11111111111111");
    doCheck();

}

protected Dialog onCreateDialog(int id) {

    final boolean bRetry = id == 1;
    return new AlertDialog.Builder(this)
            .setTitle(R.string.unlicensed_dialog_title)
            .setMessage(bRetry ? R.string.unlicensed_dialog_retry_body : R.string.unlicensed_dialog_body)
            .setPositiveButton(bRetry ? R.string.retry_button : R.string.buy_button, new DialogInterface.OnClickListener() {
                boolean mRetry = bRetry;
                public void onClick(DialogInterface dialog, int which) {
                    if ( mRetry ) {
                        doCheck();
                    } else {
                        Intent marketIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(
                                "http://market.android.com/details?id=" + getPackageName()));
                        startActivity(marketIntent);
                    }
                }
            })
            .setNegativeButton(R.string.quit_button, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    finish();
                }
            }).create();

}

private void displayDialog(final boolean showRetry) {
    print("MyLog====","DisplayDialog");
    mHandler.post(new Runnable() {
        public void run() {
            setProgressBarIndeterminateVisibility(false);
            showDialog(showRetry ? 1 : 0);
            mCheckLicenseButton.setEnabled(true);
        }
    });

}

private void doCheck() {
    mCheckLicenseButton.setEnabled(false);
    setProgressBarIndeterminateVisibility(true);
    mStatusText.setText(R.string.checking_license);
    mChecker.checkAccess(mLicenseCheckerCallback);
}

private void displayResult(final String result) {
    print("MyLog====","3333333333333");

    mHandler.post(new Runnable() {
        public void run() {
            print("MyLog====","aaaaaaaaaaaa");
            mStatusText.setText(result);
            print("MyLog====","bbbbbbbb");
            setProgressBarIndeterminateVisibility(false);
            print("MyLog====","cccccccc");
            mCheckLicenseButton.setEnabled(true);
            print("MyLog====","ddddddd");
        }
    });
}

private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
    public void allow(int policyReason) {
        print("MyLog====","444444444444444");
        if (isFinishing()) {
            // Don't update UI if Activity is finishing.
            return;
        }
        // Should allow user access.
        displayResult(getString(R.string.allow));
        // setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
       // initialize(new Game3(), false);

    }

    public void dontAllow(int policyReason) {
        print("MyLog====","55555555555555555");
        if (isFinishing()) {
            // Don't update UI if Activity is finishing.
            return;
        }
        //displayResult(getString(R.string.dont_allow));
        // Should not allow access. In most cases, the app should assume
        // the user has access unless it encounters this. If it does,
        // the app should inform the user of their unlicensed ways
        // and then either shut down the app or limit the user to a
        // restricted set of features.
        // In this example, we show a dialog that takes the user to Market.
        // If the reason for the lack of license is that the service is
        // unavailable or there is another problem, we display a
        // retry button on the dialog and a different message.
        displayDialog(policyReason == Policy.RETRY);
    }

    public void applicationError(int errorCode) {
        print("MyLog====","6666666666666666666666");
        if (isFinishing()) {
            // Don't update UI if Activity is finishing.
            return;
        }
        // This is a polite way of saying the developer made a mistake
        // while setting up or calling the license checker library.
        // Please examine the error code and fix the error.
        //if (errorCode==Policy.
        String result = String.format(getString(R.string.application_error), errorCode);
        displayResult(result);
        print("MyLog====","9999999999999999999");
        String msg="";
        if (errorCode==1) msg="1-NOT_LICENSED";
        if (errorCode==2) msg="2-LICENSED_OLD_KEY";
        if (errorCode==3) msg="3-ERROR_NOT_MARKET_MANAGED";
        if (errorCode==4) msg="4-ERROR_SERVER_FAILURE";
        if (errorCode==5) msg="5-ERROR_OVER_QUOTA";
        if (errorCode==6) msg="6-ERR";
        print("MyLog====",msg);

    }
}

@Override
protected void onDestroy() {
    super.onDestroy();
    mChecker.onDestroy();
} 
```

我已经从许可代码中删除了我的密钥。您应该输入您的代码来尝试，否则它将是无效的密钥异常。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:45:22.423

`AndroidApplication`要求您`initialize(...)`或`initializeForView(...)`在`onCreate(...)`. 由于您没有在上面包含它，我只能假设您的代码中缺少它。

如果你需要一个原生的 Android UI，你需要使用`initializeForView(...)`来获取一个 LibGDX 表面，然后将它插入到视图层次结构中。或者，您可以通过界面从游戏内触发检查。

# c# - C# & XNA - 2D 引擎 - 来自汽车的组精灵

> ID：11951531
> 
> 赞同：2
> 
> 时间：2012-08-14T11:42:15.493
> 
> 标签：c#, xna, 2d, grouping, sprite

我开始使用 XNA，我想构建一个基本的基于 2D 瓦片的引擎。

到目前为止，我已经做了一些汽车转向数学和操控，但还没有碰撞。

现在我决定让汽车可以破坏，所以当我撞到墙时，汽车的区域会被碰撞。

![图片](../Images/82f50e2e4746255966cf2c187d75efb4.png)

车的中心部分保持不变，但是当另一辆车从左侧撞到玩家车时，我想用左侧的“碰撞”图像替换左侧的“正常”图像。

我的问题是，我什至现在都不知道如何对汽车的所有部件进行分组（还会添加前后灯），所以当我开车时，所有部件都在跟随。

到目前为止，我有一个简单的**Car**和**CarParts**类，如下所示：

```
public Car() {
    Vector2D Position;
    float Rotation;
    Vector2D Direction;
    Texture2D BaseTexture;
    List<CarParts> Parts;
}

public CarParts() {
    Vector2D RelativePosition;
    Texture2D Testure;
} 
```

在哪里：

```
List[0] = FrontPart;
List[1] = FrontLeftPart;
List[2] = FrontRightPart;
List[3] = LeftPart;
List[4] = RightPart;
List[5] = RearLeftPart;
List[6] = RearRightPart;
List[7] = ReartPart; 
```

我怎样才能让那些孩子和主车一起移动？

°编辑：还是有其他方法可以做到这一点？

感谢你的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:29:05.963

如果您正在使用`SpriteBatch`，则处理此问题的方法是仔细设置方法的**origin**参数`Draw`（[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.draw.aspx)）。在这个我说“精灵”的答案中，我的意思是一次调用`Draw`- 所以你的车将由多个精灵组成。

origin 参数设置精灵的位置、缩放和旋转发生的原点。**您可以将原点设置为精灵边界*之外的位置。***

原点位置被解释为相对于精灵源矩形的左上角。（如果不指定源矩形，则假定源矩形覆盖整个纹理）。原点以与源纹理中的像素匹配的单位指定。

所以 - 你应该维护组成汽车不同部分的 9 个纹理（或 9 个源矩形，如果你使用精灵表）的列表。并且，对于每个部分，也存储一个原点位置。

您为每个精灵设置的原点位置将是**`(centre of car) - (top left of sprite)`**.

![汽车零件示例](../Images/7dae237fcdbc5940e8726fec3892ef78.png)

所以对于汽车的中心精灵，它将大约在矩形的中心。对于汽车的左上角，它在两个轴上都是正值，但超出了精灵的边界。对于右下角，原点在两个轴上都是负的，因此在精灵边界之外。其他部分依此类推。

然后，简单地绘制构成汽车的所有 9 个精灵，每个精灵都有*不同*的源矩形/纹理和原点。但每一个都有*相同的*位置、比例和旋转。

无需弄乱矩阵或任何东西:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:56:27.993

移动汽车时，仅更新汽车的位置。零件的偏移量应保持不变。当您绘制精灵时，您会将汽车的位置与零件的相对位置结合起来。例如：

```
var partPosition = List[0].RelativePosition;
var position = Position + partPosition; 
```

然后，您可以使用矩形将其绘制到位

```
var rectangle = new Rectangle(position.X, position.Y, partWidth, partHeight); 
```

要应用任何旋转，您需要一个旋转矩阵来应用到位置/矩形。XNA 在 Matrix 类上有 Helper 方法来帮助您解决这个问题（请参阅[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.matrix_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.matrix_members.aspx)）。

如果您不熟悉矩阵和向量数学，我建议您先复习一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:53:32.877

您可以使用描述汽车位置和方向的矩阵。您可以将其应用于 spritebatch 并仅使用局部坐标 (RelativePosition) 进行绘制。

否则，您可以在矩阵中描述每个部分的转换，并将其与汽车的矩阵进行多重播放。然后，您可以将每个部分的方向和位置与转换矩阵相乘，以将其转换为屏幕位置。

# javascript - 将 CSV 文件读入 javascript 字符串或数组

> ID：11951534
> 
> 赞同：0
> 
> 时间：2012-08-14T11:42:24.740
> 
> 标签：javascript, cakephp, google-docs-api, mapbox

我有一个非常具体的问题，所以我希望有人能提供帮助。我正在使用 CakePHP 后端框架构建地图应用程序。我目前正在尝试将一些数据导入我的应用程序以进行操作，我有一个 google docs CSV 文件（我也有一个本地版本），并且我还在使用自定义 js 库。所以我有一个这样的声明：

`mapbox.markers.layer().csv('csvstring');`

csvstring 相当于 CSV 数据的标准字符串，我查看了 mapbox 网站上的一些示例，但都有硬编码数据，例如`csvstring = 'lat,lon\n,0,0';`

有没有一种简单的方法来读取谷歌文档，或者从我的 CakePHP 目录中读取文件，到一个字符串变量中，或者，如果失败，一个数组？我已经在互联网上搜索了几天，但无法找到解决方案。如果有可能让 PHP 做脏活，然后将字符串传递给 js var，那也很好。最后它必须是一个字符串，或者一个字符串数组。

我已经看到很多人建议熟悉 Google Docs API，但实际上，我对 CakePHP 和 javascript 都是个菜鸟，要做到这一点需要做很多工作，我的脑袋已经快要爆炸了我只是认为我不能再参加一次大型阅读会议，我的项目时间不多了。另外，不要以为我什么都知道，非常感谢您提供完整的白痴回复，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:54:22.753

如果文件位于应用程序的本地文件（在同一台服务器上），则可以使用简单的 PHP 文件 I/O。

```
<?php
$filename = "/YOUR/FILE/URL/HERE.csv";
$file = fopen( $filename, "r" );
if( $file == false ) {
    echo "Error!";
    exit();
}
$csv_string = fread( $file, $filesize );
fclose( $file );
?>

mapbox.markers.layer().csv("<?php echo $csv_string; ?>");
//Make sure you put the quotes around the php tag. Otherwise the JavaScript will not recognize it as a string. 
```

（大量来自[http://www.tutorialspoint.com/php/php_files.htm](http://www.tutorialspoint.com/php/php_files.htm)）。我希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:47:40.013

使用 reqwest：[这是一个加载单独 csv 文件的工作示例](http://bl.ocks.org/3363480)。

# android - 按下退出后停止 GPS

> ID：11951538
> 
> 赞同：0
> 
> 时间：2012-08-14T11:42:50.310
> 
> 标签：android

我有一个应用程序，它在 GPS 的帮助下跟踪位置。现在，当我返回时，跟踪仍在继续。即使我按下退出按钮，这种情况也会继续。我使用了 finish() ，但是当我按下退出按钮时 GPS 并没有停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:49:19.240

中断 GPS：

```
myLocationManager.removeUpdates(myLocationListener); 
```

对按键后按事件不执行任何操作：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            myActivity.finish();
        }
        if (keyCode == KeyEvent.KEYCODE_HOME) {
            myLocationManager.removeUpdates(myLocationListener);
            myActivity.finish();
        } 
        return super.onKeyDown(keyCode, event);;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:53:15.593

您的活动需要实现该`onPause`方法，该方法在用户离开时触发。在其中，您可以通过调用以下命令停止 GPS：

```
myLocationManager.removeUpdates(myLocationListener); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:21:52.527

看到您的代码中有 a ，这将自行`MyLocationOverlay`启动 a 。`SensorThread`您也必须禁用它。

```
protected void onPause() {
    //....your code
    myLocationOverlay.disableMyLocation();
} 
```

它也会关闭它。

# svn - jenkins 中的 SVN 命令行由于服务器证书不匹配而失败

> ID：11951546
> 
> 赞同：14
> 
> 时间：2012-08-14T11:43:22.680
> 
> 标签：svn, jenkins

当我从 Jenkins shell 运行 svn 命令行时，出现以下错误：

```
 D:\Jenkins\jobs\Merge Trunk to Stable\workspace\stable>svn up --trust-server-cert --non-interactive 
 Updating '.':
 svn: E175002: Unable to connect to a repository at URL 'https://xxx/stable'
 svn: E175002: OPTIONS of 'https://xxx/stable': Server certificate verification failed: certificate issued for a different hostname,  issuer is not trusted (https://xxx) 
```

但是当我从命令行 CMD 窗口运行相同的命令时，就可以了：

```
 D:\Jenkins\jobs\Merge Trunk to Stable\workspace\stable>svn up
 Updating '.':
 At revision 1797. 
```

或者

```
 D:\Jenkins\jobs\Merge Trunk to Stable\workspace\stable>svn up --trust-server-cert --non-interactive
 Updating '.':
 At revision 1797. 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-11-20T08:19:03.143

很老的问题，但仍然很活跃。

如您所知，问题在于接受的证书缓存（以及用户名/密码缓存）是每个用户的，并且由于 Jenkins 作为不同的用户（很可能是 SYSTEM）运行，它不知道您的普通用户缓存。

并不是所有的 SVN 客户端都让你在那里做“echo p”的事情（它对我不起作用），而且`--trust-server-cert`显然在这种情况下也不起作用。

对我有用的是[打开一个控制台窗口作为 SYSTEM](https://blogs.technet.com/b/askds/archive/2008/10/22/getting-a-cmd-prompt-as-system-in-windows-vista-and-windows-server-2008.aspx)，并在那里进行交互式 acceptcertificate-login-password 舞蹈。

由于所有这些都已缓存，因此您只需执行一次，从那时起，所有`svn up`和类似的请求都将起作用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-14T14:55:35.863

我终于设法解决了这个问题！我所做的只是放入 Jenkins 脚本中：

```
echo p | svn up --username <usr> --password <pwrd> 
```

这解决了它！因为 echo 模拟了手动输入以永久接受证书。

根本原因是 Jenkins shell 脚本在 Windows 服务用户下运行的事实 - 因此使用不同的位置用于用户配置文件缓存（`C:\Windows\System32\config\systemprofile\AppData\Roaming\Subversion`而不是`%USERPROFILE%\AppData\Roaming\Subversion\`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-04T16:45:12.463

`echo p | svn commands`

在 Jenkins windows 批处理命令提示符下工作得很好。这样做一次将永久接受 Jenkins 用户在 Build 框中的证书。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-31T08:53:47.667

即使您接受了证书，这也可能发生。

在 Linux 中，Jenkins 使用自己的用户名。您可以使用命令`sudo su jenkins`切换到 jenkins 用户，然后使用命令`cd ~`并 `ls`查看 jenkins 用户的根路径。对我来说，它是 jenkins 安装路径（var/lib/jenkins）。

您可以在您的用户包中看到`.subversion`包。如果您之前接受过证书，您可以`auth`在 .subversion 中看到包。

将整个`.subversion`包复制到 jenkins 安装包（jenkins 用户的根路径）。

再试一次，`svn up`在 jenkins shell 中使用命令，它会工作。

我的英语很差，谢谢你的阅读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T07:37:07.427

也许，证书颁发给不同的主机名（不是 xxx，而是类似 xxx.yourcompany.com）。如果是，则使用此主机名进行干净签出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-08T20:29:43.453

通过 Jenkins 在奴隶上运行 Svn 命令给我带来了困难。我做了以下事情：

如果您使用的是 unix，请点击以下链接： http: [//www.microhowto.info/howto/configure_subversion_to_trust_a_given_ssl_certificate.html](http://www.microhowto.info/howto/configure_subversion_to_trust_a_given_ssl_certificate.html)

如果您在 Windows 上，请执行以下操作：

```
cd %APPDATA%\Subversion\ 
```

然后通过从元素中删除符号来编辑该`server`目录中的文件，并更新存储 ssl 证书文件的路径。`#``ssl-authority-files`

如果您喜欢它来存储您的凭据，还可以更改以下内容。

```
store-passwords = yes 
store-ssl-client-cert-pp = yes 
```

完成后，您还需要按照将证书[添加到受信任的根 CA 存储中，将证书添加到您的 Windows 机器](http://www.systemroot.ca/2014/09/git-stash-set-up-self-signed-ssl-certificate-windows/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-29T18:01:08.087

这似乎是一个可怕的答案，但在用尽了其他问题之后，由于其他问题对我不起作用，我选择了改变 SVN 服务器以不使用 SSL 的路线。

这只是一个选项，因为我刚刚设置了这台服务器，它完全位于内部网络上，但它确实完全消除了这个问题。我用完了其他选择和时间。

我也只建议这样做，以防有人没有意识到它甚至是一种选择。无论服务器暴露如何，使用 SSL 都会让我感觉好多了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-22T20:39:20.493

Jenkins 和 Window 7 有同样的问题。我通过进入服务并选择 Jenkins 并转到登录并输入管理凭据并重新启动 jenkins 服务来解决此问题。

希望这能解决您的问题。

# php - MySQL concat 根据结果数

> ID：11951548
> 
> 赞同：1
> 
> 时间：2012-08-14T11:43:27.483
> 
> 标签：php, mysql, while-loop, case, concat

我已经研究了我的问题的答案两天了，但我没有任何运气，可能是因为我不知道如何准确地描述我在寻找什么，就我需要使用的方法而言。

基本上在我的数据库中，我有两个表，一个名为 tblCounties（ID，County_vc），另一个名为 tblOrganizations（ID，Organization_vc）。我有第三张表将两者联系在一起，称为 jnCountyOrg (Org_fk_id, County_fk_id)。一个组织至少可以属于一个县，最多可以属于三个县。当我使用 php 对我的选择查询进行 while 循环时，它会正确地回显结果，如下所示：

县名1县名2县名3

我尝试过使用 mysql_fetch_array 和 mysql_fetch_assoc。

我希望结果的格式是这样的。

如果只有一个县与组织相关联，则回显“xxx 县”。

如果两个县与组织关联，则回显“xxx 和 xxx 县”。

最后，如果三个县（最大值）与组织相关联，则为“xxx、xxx 和 xxx 县”。

我很困惑是否要使用 CASE 语句在 SQL 中执行此操作，或者我是否应该在从数据库查询结果后使用 php 以这种方式格式化我的结果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:27:02.047

这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!2/a9b24/17)。它也适用于县计数 > 3：

```
select id,CompanyNAme,countyCount,countyNAmes,
if(countyCount=1,concat(countyNAmes,' County'),
   if(countyCount=2,concat(REPLACE(countyNAmes,', ',' and '),' Counties'),

         CONCAT(SUBSTRING_INDEX(countyNAmes,',',countyCount-1)
            ,' and '
            , SUBSTRING_INDEX(countyNAmes,',',-1)
            ,'  Counties'
            )
      )
) RESULT
from
(
select o.id,max(o.Organization_vc) CompanyNAme,
group_concat(c.County_vc separator ', ') CountyNames,count(c.id) CountyCount 

from tblOrganizations o
left join jnCountyOrg co on (o.id=co.Org_fk_id) 
left join tblCounties c on (co.County_fk_id = c.id)
group by o.id
) m
order by m.id 
```

# python - Django书第7章

> ID：11951549
> 
> 赞同：2
> 
> 时间：2012-08-14T11:43:32.867
> 
> 标签：python, django

嗨，我正在阅读 Django 书，直到第 7 章。我结束了，想知道是否有人可以为我解释这段代码。

```
<div class="field{% if form.message.errors %} errors{% endif %}">
{% if form.message.errors %}
    <ul>
    {% for error in form.message.errors %}
        <li><strong>{{ error }}</strong></li>
    {% endfor %}
    </ul>
{% endif %}
<label for="id_message">Message:</label>
{{ form.message }}
<div> 
```

我不明白你为什么需要第一部分：

```
<div class="field{% if form.message.errors %} errors{% endif %}"> 
```

刚刚：

```
<div class="field"> 
```

似乎做同样的事情。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T11:46:20.267

当您的表单出现错误时，该属性`form.message.errors`将不为空。因此，如果它不为空，则该值`'errors'`将输出到您的 html 中，结果是：

```
<div class="field errors"> 
```

然后它可以与 CSS 文件一起使用，以特殊格式显示错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:04:15.147

```
{% if form.message.errors %} errors{% endif %} 
```

`errors`如果有任何错误通过您的视图方法传递给模板，这将打印该单词。

```
<div class="field{% if form.message.errors %} errors{% endif %}"> 
```

在这里，该类`"errors"`被添加到 div 类中，因此如果您的表单有错误，它将生成：

```
<div class="field errors"> 
```

这并不是真正需要的，但可能有助于样式化和识别 html 元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:46:04.093

如果该字段有错误，则代码会将`errors`css 类添加到`div`. 这对于突出显示该字段很有用。

# javascript - javascript中的错误：对象不是函数

> ID：11951550
> 
> 赞同：3
> 
> 时间：2012-08-14T11:43:41.510
> 
> 标签：javascript, jquery

当我在下面运行我的代码时，它会`object is not a function`在控制台中显示错误。这个错误`var todo = new Todo('contents');`在我`script.js`文件的这一行。我怎样才能让它工作？

这是我的 todo.js 文件

```
var Todo = (function(c) {
var contents = $('.' + c);

var showel = function (d) {
    contents.prepend(d);
},

add = function (name) {
    if(name != "") {
        var div = $('<div class="names"></div>')
        .append('<span>' + name + '</span>')
        .append("<button class='update' class='update'>Edit</button>")
        .append("<button class='remove' name='remove'>Remove</button>");
    }

    return showel(div);
},

addUpdateField = function (dom) {
    var name = dom.parent().find('span').text(),
        field = $('<input type="text" value="' + name + '" />'),
        update = $('<button class="updateBtn">Update</button>');
    dom.parent().html('').append(field).append(update);

    return;
},

update = function(el) {
    var val = el.parent().find('input').val();
    el.parent().html('<span>' + val + '</span>')
    .append('<button class="update" class="update">Edit</button>')
    .append('<button class="remove" class="remove">Remove</button>');

    return;
},

remove = function (el) {
    return el.remove();
};

return {
    add             : add,
    update          : update,
    remove          : remove,
    addUpdateField  : addUpdateField
};
})(); 
```

这是我的 script.js 文件

```
$(function () {
var todo = new Todo('contents');

$('.addBtn').on('click', function() {
    var name = $(this).parent().find('input[type="text"]').val();
    todo.add(name);
});

$('.contents').on('click', '.remove', function() {
    var el = $(this).parent();
    todo.remove(el);
});

$('.contents').on('click', '.update', function() {
    var dom = $(this);
    todo.addUpdateField(dom);
});

$('.contents').on('click', '.updateBtn', function() {
    var el = $(this);
    todo.update(el);
});

}); 
```

**这是html代码**

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js">    </script>
<script type="text/javascript" src="todo.js"></script>
<script type="text/javascript" src="script.js"></script>
<link rel="stylesheet" type="text/css" href="styles.css">
<title></title>
</head>

<body>
<div class="container">
    <label>Name</label>
    <input type="text" class="name" name="name" />
    <input type="button" class="addBtn" name="add" value="Add" />
    <div class="contents"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T11:49:45.060

您正在立即执行分配给 的功能`Todo`。该函数返回一个对象，因此`Todo`指的是返回的对象，而不是函数（因此出现“非函数”错误）。

我假设你的意图是这样的：

```
var Todo = function () {

    this.add = function () { //Note the use of `this` here
        //Do stuff
    };
    //etc...

}; //No self-invoking parentheses here 
```

现在，`Todo`指的是您可以使用`new`运算符调用的构造函数，就像您当前正在尝试做的那样。

另请注意，此模式将导致每个实例`Todo`都有每个方法的单独副本，这不是很有效。最好将方法声明为的属性`prototype`：

```
var Todo = function () {
    //Initialize the Todo instance
};
Todo.prototype.add = function () {
    //Do stuff
}; 
```

现在，所有实例都`Todo`将共享方法的一个副本。

# .net - 正则表达式 az, 0-9, #, +, -, 中的任意字符

> ID：11951551
> 
> 赞同：-4
> 
> 时间：2012-08-14T11:43:41.927
> 
> 标签：.net, regex

如何以任何顺序匹配包含 az、0-9、#、+、- 和句点的字符串？没有其他字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:44:58.607

使用[字符类](http://www.regular-expressions.info/charclass.html)：

```
^[a-z0-9#+.-]+$

```

**解释**

*   `^`是字符串[锚](http://www.regular-expressions.info/anchors.html)的开始。
*   `[...]`是一个字符类。
*   `+`意思是“一个或多个”。
*   `$`是字符串锚的末端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:52:20.990

```
using System;
using System.Text.RegularExpressions;

public class Example
{
   public static void Main()
   {
      string[] myStrings = { "1-2&3-4",
                             "ABC#123", 
                             "12+abc-34#" };
      string pattern = @"^[a-z0-9&#+.-]+$";
      foreach (string myString in myStrings)
         Console.WriteLine("{0} {1} a valid string.", 
                           myString, 
                           Regex.IsMatch(myString, pattern) ? "is" : "is not");
   }
} 
```

[在此处](http://ideone.com/eFbpc)测试此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:46:30.430

使用这个正则表达式：

```
^[\da-z#+.&-]+$

```

# asp.net-mvc-3 - 修改 MVC3 Grid (@grid.GetHtml) 的排序标头 URL

> ID：11951552
> 
> 赞同：0
> 
> 时间：2012-08-14T11:43:53.497
> 
> 标签：asp.net-mvc-3, sorting, grid

我有一些 MVC3 网格。

```
@grid.GetHtml(
        tableStyle: "grid",
        headerStyle: "CenteredHeader",
        alternatingRowStyle: "alt",
        columns: grid.Columns( 
```

在该方法中，我通过一些**通用** `checkboxes`的 .

```
[IsAuthenticated]
[HttpPost]
public ActionResult Movies(int? id, FormCollection formCollection)
{ 
```

**当我尝试对已过滤的数据进行排序时，问题出现了。我的意思是列标题 URL 没有任何参数，我也不能使用 [HttpPost]。**

当我单击这些复选框时，任何线索如何访问选定的复选框或修改列标题 URL？

此链接具有 MVC3 Grid 的列标题 url。

```
http://localhost:16349/MyWebsite/Movies/807?sort=TechnologyName&sortdir=DESC 
```

谢谢！

PS 代码

```
<h2>
    <a class="mainmenu" href="@Url.Action("Index", "Home/Areas")">Areas\</a><a class="mainmenu"href="@Url.Action("Index", "BoxOffice")">Box
        Office\</a><span class="currentmenu">Cinema @ViewBag.ChainName</span></h2>
@{        

    var grid = new WebGrid(source: Model,
                 defaultSort: "MovieName",
                 rowsPerPage: 30);
}
@using (Html.BeginForm())
{
    <fieldset>
        <legend>Fecha de inicio y de finalización</legend>Fecha de inicio
        <input type="text" id="startDate" size="10" class="datepicker" autocomplete="off" name="startDate" value="@ViewBag.StartDate" />
        Fecha de finalización
        <input type="text" id="endDate" size="10" class="datepicker" autocomplete="off" name="endDate" value="@ViewBag.EndDate"/>
        <input type="submit" value="Buscar" class="button" />
        @if (ViewBag.TechnologyNames != null)
        {
            <div style="margin: 8px;">
                <b>Tecnologias</b>&nbsp;&nbsp;&nbsp;
                @if (Session["TechList"] == null)
                {
                    <input type="checkbox" name="option_all" id="checkbox_all" checked="checked" value="-1" /> <label>Todos</label>
                    foreach (var technologyName in ViewBag.TechnologyNames)
                    {
                        if (!technologyName.TechnologyID.ToString().Equals("-1"))
                        {
                    <input type="checkbox" name="option_@(technologyName.TechnologyID)" id="checkbox_@(technologyName.TechnologyID)"
                                        value="@technologyName.TechnologyID" />  @technologyName.Name
                        }
                    }
                }
                else
                {
                    var lst = (List<string>)Session["TechList"];

                    if (lst.Contains("-1"))
                    {
                    <input type="checkbox" name="option_all" id="checkbox_all" checked="checked" value="-1" /> <label>Todos</label>
                    }
                    else
                    {
                    <input type="checkbox" name="option_all" id="checkbox_all" value="-1" /> <label>Todos</label>
                    }

                    foreach (var technologyName in ViewBag.TechnologyNames)
                    {
                        bool isSelected = false;

                        foreach (var t in lst)
                        {
                            string n = technologyName.TechnologyID.ToString();

                            if (n.Equals(t))
                            {
                                isSelected = true;
                                break;
                            }
                        }

                        if (isSelected)
                        {
                            if (!technologyName.TechnologyID.ToString().Equals("-1"))
                            {                                                   
                    <input checked="checked" type="checkbox" name="option_@(technologyName.TechnologyID)" id="checkbox_@(technologyName.TechnologyID)"
                                        value="@technologyName.TechnologyID" />  @technologyName.Name
                            }
                        }
                        else
                        {
                            if (!technologyName.TechnologyID.ToString().Equals("-1"))
                            {                                                     
                    <input type="checkbox" name="option_@(technologyName.TechnologyID)" id="checkbox_@(technologyName.TechnologyID)"
                                        value="@technologyName.TechnologyID" />  @technologyName.Name
                            }
                        }
                    }
                }
            </div>
        }
    </fieldset>
}
<br />
<div id="grid">
    @if (Model != null)
    {

        @grid.GetHtml(
        tableStyle: "grid",
        headerStyle: "CenteredHeader",
        alternatingRowStyle: "alt",
        columns: grid.Columns(
                           grid.Column(format: (item) => Html.ActionLink("Detalles", "Movie", new { id = item.MovieID })),
                           grid.Column("MovieName", "Pelicula"),
                                    grid.Column("TechnologyName", "Tecnologia"),
                                grid.Column("Visitors", "Espect.", style: "CenteredNumbers"),
                                grid.Column("TotalSum2", "Monto", format: (item) => item.TotalSum2.ToString("#,0.00"), style: "CenteredNumbers"),
                                grid.Column("MoviePromedio", "TP", format: (item) => item.MoviePromedio.ToString("#,0.00"), style: "CenteredNumbers"),
                                grid.Column(format: (item) => Html.ActionLink("Comparativo por complejo", "Compare", new { id = item.MovieID }))
        )
    )     
    }
</div> 
```

# iphone - 在 Web 服务中解析数据 Json 或 XML 哪个更快？

> ID：11951561
> 
> 赞同：3
> 
> 时间：2012-08-14T11:44:11.610
> 
> 标签：iphone, ios, json, xml-parsing

以前我在我的 Web 服务中使用 XML soap 进行数据交换，但是显示数据需要花费很多时间。

在什么情况下您需要使用 XML 或 json 进行 Web 服务响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:46:18.090

绝对是 JSON。试试这个库 - [https://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)

[此外，这可能是 Is parsing JSON faster than parsing XML](https://stackoverflow.com/questions/4596465/is-parsing-json-faster-than-parsing-xml)的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:46:33.060

JSON 是一种比 XML 更好的 Web 响应服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T09:34:40.863

绝对使用 JSON Web 服务。一旦你使用它，你会发现它比 SOAP Web 服务更重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:46:51.200

JSON 总是比 XML 快。

您应该通过[此](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)链接了解更多信息。

# c++ - 在 C++ 中做模板的另一种方法？

> ID：11951567
> 
> 赞同：0
> 
> 时间：2012-08-14T11:44:50.953
> 
> 标签：c++, templates, template-classes

当我发现创建模板类的这种依赖于预处理器的方法时，我只是在搞砸：

```
#include <iostream>
#include <typeinfo>

// Is this a valid template class?
#define TEMPLATE_CLASS(T)\
class TemplateClass_ ## T\
{\
private:\
    T value;\
public:\
    void print_type()\
    {\
        std::cout << typeid(T).name() << std::endl;\
    }\
}

class Sample {};

TEMPLATE_CLASS(int) obj1;
TEMPLATE_CLASS(char) obj2;
TEMPLATE_CLASS(Sample) obj3;

int main(int argc, char* argv[])
{
    obj1.print_type();
    obj2.print_type();
    obj3.print_type();
} 
```

我简单地编译了这个：

```
g++ src.cpp -o main.exe 
```

输出：

```
i
c
6Sample 
```

现在，如您所见，它的工作方式与模板类几乎相同。除了一个明显的事实之外，对象只能在全局范围内声明，因为它实际上在您使用时定义了一个新类 inline `TEMPLATE_CLASS(T)`，而新类不能在函数中定义。对此的解决方案可以是：

```
TEMPLATE_CLASS(float);

int main() { TemplateClass_float obj; } 
```

不管怎样，这给了我很多思考。首先，这甚至可以称为有效的泛型类吗？那么，它可以用来*代替*标准模板功能吗？显然，使用标准模板功能要方便得多，但我的意思是，这也可以吗？最后，由 C++ 标准定义的模板功能是否在内部执行类似于我对预处理器所做的事情？如果不是，这个实现和 C++ 的标准模板特性有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T11:52:02.753

它仅在最简单的情况下与模板执行相同的操作。尝试使用宏执行此操作：

```
template <class Ty> class C {};
template <class Ty> class C<Ty*> {};
template <class Ty> class C<std::vector<Ty> > {}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T11:50:31.680

你所做的不是`templates`，而是`macros`。使用宏而不是模板是一个很好的方法来射击自己。这是一个例子`msdn`

```
//macro
#define min(i, j) (((i) < (j)) ? (i) : (j))

//template
template<class T> T min (T i, T j) { return ((i < j) ? i : j) } 
```

以下是宏的一些问题：

1.  编译器无法验证宏参数的类型是否兼容。宏在没有任何特殊类型检查的情况下展开。

2.  i 和 j 参数被评估两次。例如，如果任一参数具有后增量变量，则增量执行两次。

3.  因为宏是由预处理器扩展的，所以编译器错误消息将引用扩展的宏，而不是宏定义本身。此外，宏将在调试期间以扩展形式显示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T11:55:28.290

预处理器可用于创建宏，如果您使用的是 C，您可能会使用它来完成您所做的事情。C++ 提供模板作为语言的一部分，因此您可以执行此操作等等。例如，您的宏不会是强类型的，您将错过大量编译时检查，这可能会发现预处理器永远不会发现的错误。

几乎在所有情况下都使用宏而不是模板不是可行的方法。您的代码也将难以维护，因此难以遵循。所以，换一种说法，如果你想让你的同事少看你，并且对提到你的名字感到恼火，那就继续使用宏。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T11:51:28.193

好吧，它混淆了类的实际类型，从而使使用函数等变得更加困难。而且您似乎不能在您的方法中使用模板递归，因为每次使用该宏时它都会定义新类。除此之外，您无法使其图灵完备，因为您无法为模板类定义异常情况。它还缺乏定义基于值的模板类的能力：DI 认为您可以轻松列出更多问题，但这些可能是主要问题。

# liferay - 使用什么：社区/站点或用户组满足我们的要求

> ID：11951569
> 
> 赞同：0
> 
> 时间：2012-08-14T11:45:01.500
> 
> 标签：liferay, liferay-6

嘿，我是liferay的新手。

无论如何，我想提供一个采购订单和妥协授权系统，它应该根据谁登录提供两种类型的用户组。

这两个用户是：

1.  与 PO 相关的用户（比如客户，公司的销售部门）

2.  公司的各个供应商（例如 Vendor_A、Vendor_B、Vendor_C）

登录时：

1.  帐户可以根据 vendor_id 和 reference_PO_no 查看各种供应商

2.  登录时的特定供应商应该只看到他的详细信息，而不是其他供应商的详细信息。

我不确定如何实现这一目标；创建用户组或社区。如果用户组/社区 Vendor_A 如何不**查看**Vendor_B 的个人资料。如果有人在 Liferay 6.1 中有解决方案或做过类似的事情，请提供帮助

使用软件：
Liferay Portal 6.1.0（与tomcat7.0.23捆绑）、MySql 5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:33:43.227

我认为您可以结合使用用户页面（公共/私人）和站点/社区/组织。Liferay[用户指南](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/using-liferay-portal-6-1)部分[管理用户](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/managing-users-user-groups-organizations-sites-teams-and-roles)可能会帮助您了解`UserGroup`用户公共/私人页面之间的关系。

> 1) 账户可以根据 vendor_id & reference_PO_no 查看不同的供应商

您可以创建一个显示 vendor_id 和 reference_PO_no 的 portlet，并且可以将它放在只有特定用户可以访问的站点/社区/组织页面上。否则，您将在 portlet 本身中向某些具有权限的用户显示 vendor_id 和 reference_PO_no 的逻辑。

> 2) 登录时的特定供应商应该只看到他的详细信息，而不是其他供应商的详细信息。

为此，您可以使用`User Public page`http://liferay.com[使用](http://liferay.com)它。如果您在 liferay 上有一个帐户，您可以看到它有一个用户公共页面，其中包含像 Wall、Friends 活动等仅适用于用户公共页面的 portlet，并且每个用户只能看到与其帐户相关的信息。因此，您可以以类似的方式为供应商创建一个 portlet 并将其放在供应商用户（公共/私人）页面上。这样他们就只能看到他们的信息。

这些只是帮助您入门的一些提示。可能不是全部答案。

# mysql - MySQL CREATE USER 有一个变量？

> ID：11951570
> 
> 赞同：14
> 
> 时间：2012-08-14T11:45:02.577
> 
> 标签：mysql

我想这样做：

```
#Variables
SET @username="jdoe", @password="secret";

# Insert a new MySQL User
CREATE USER @username@'localhost' IDENTIFIED BY @password;GRANT USAGE ON *.* TO @username@'localhost' IDENTIFIED BY @password WITH MAX_QUERIES_PER_HOUR 120 MAX_CONNECTIONS_PER_HOUR 60 MAX_UPDATES_PER_HOUR 60 MAX_USER_CONNECTIONS 2; 
```

但是得到：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@username@'localhost' IDENTIFIED BY @password' at line 2 
```

如何在 CREATE USER 语句中使用变量？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T11:48:18.210

您可以`dynamic SQL`用作：

```
SET @query1 = CONCAT('
        CREATE USER "',@username,'"@"localhost" IDENTIFIED BY "',@password,'" '
        );
PREPARE stmt FROM @query1; EXECUTE stmt; DEALLOCATE PREPARE stmt;

SET @query1 = CONCAT('
    GRANT USAGE ON *.* TO "',@username,'"@"localhost" IDENTIFIED BY "',@password,'" WITH
          MAX_QUERIES_PER_HOUR 120 MAX_CONNECTIONS_PER_HOUR 60 MAX_UPDATES_PER_HOUR 60 
          MAX_USER_CONNECTIONS 2'
        );
PREPARE stmt FROM @query1; EXECUTE stmt; DEALLOCATE PREPARE stmt; 
```

# virtualbox - 将 Vagrant 添加到现有的 VirtualBox 机器

> ID：11951579
> 
> 赞同：4
> 
> 时间：2012-08-14T11:45:35.547
> 
> 标签：virtualbox, vagrant

有没有办法在现有的虚拟机上添加 Vagrant 而无需将虚拟机变成一个盒子并导入它？我有一个我广泛使用的虚拟机，我想添加 vagrant 以运行它以快速编译代码，而不必完全启动虚拟机，但如果不将它作为一个盒子创建，我看不到任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T09:37:03.370

不，添加现有 VirtualBox VM 的方式是从中创建一个盒子。

# ruby-on-rails - 当我在 rails 中使用 select 标签时，验证不起作用

> ID：11951580
> 
> 赞同：-1
> 
> 时间：2012-08-14T11:45:41.813
> 
> 标签：ruby-on-rails, validation, select

当我在 rails 中**使用 select 标签时**，验证不起作用

**如果我删除验证一切正常**。

但是如果我在发生错误后继续验证

```
undefined method `map' for nil:NilClass
Extracted source (around line #10):

 <div class="field">

 <%= f.label :Vehicle_Number %><br />  
 <%= f.select "vehicle_id",
 options_from_collection_for_select(@vehicledevice,"vehicle_id","vehicle_number"),
 :prompt  => "No vehicle"%>

 </div> 
```

请解决问题

错误在 f.select "vehicle_id" 完整行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:56:50.313

错误是您在新操作中声明了@vehicledevice，并且当您提交表单时，它会将您带到创建操作，这反过来会给您验证错误。只需在您的respond_to 的else 块中的创建操作中调用相同的@vehicledevice，问题就会得到解决。

# grails - Grails 和 Maven 集成

> ID：11951581
> 
> 赞同：1
> 
> 时间：2012-08-14T11:45:44.147
> 
> 标签：grails, maven-2

我正在尝试为现有的 grails 项目进行 Grails 和 Maven 集成。但它抛出异常

```
maven-test (default) on project Co-optimum: Unable to start Grails:    java.lang.reflect.InvocationTargetException: org/springframework/security/web/authentication/LoginUrlAuthenticationEntryPoint: org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint 
```

我的 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.samples</groupId>
    <artifactId>Co-optimum</artifactId>
    <packaging>war</packaging>
    <name>Co-optimum</name>
    <properties>
        <sourceComplianceLevel>1.6</sourceComplianceLevel>
    </properties>
    <version>0.1</version>

    <dependencies>
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.5.8</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.5.8</version>
            <scope>runtime</scope>
        </dependency>
    </dependencies>
    <build>

        <plugins>

            <plugin>
                <groupId>org.grails</groupId>
                <artifactId>grails-maven-plugin</artifactId>
                <version>1.3.7</version>
                <extensions>true</extensions>
                <executions>
                    <execution>
                        <goals>
                            <goal>clean</goal>
                            <goal>config-directories</goal>
                            <goal>maven-compile</goal>
                            <goal>maven-test</goal>
                            <goal>maven-war</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:30:57.080

Grails 2.1.0 对 Maven 集成进行了重新设计，现在还需要在 Maven pom 文件中定义插件依赖项。以前，插件依赖项是使用 BuildConfig.groovy 或 application.properties 管理的。

您需要将所有插件和常规依赖项从 BuildConfig.groovy 和 application.properties 移动到 pom.file。

对于某些插件，可能需要在 pom 中显式添加使用标准 Grails 未显式需要的依赖项。但这会在使用 Maven 启动 Grails 时从错误日志中变得清楚。

具体来说，您缺少对 Spring 安全插件的依赖项，需要将以下 XML 片段添加到您的依赖项列表中：

```
 <dependency>
            <groupId>org.grails.plugins</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>1.2.7.3</version>
            <scope>compile</scope>
            <type>zip</type>
        </dependency> 
```

您还需要通过将以下片段添加到 pom 文件来确保 Grails maven 存储库可用：

```
<repositories>
    <repository>
        <id>grails</id>
        <name>grails</name>
        <url>http://repo.grails.org/grails/core</url>
    </repository>
    <repository>
        <id>grails-plugins</id>
        <name>grails-plugins</name>
        <url>http://repo.grails.org/grails/plugins</url>
    </repository>
</repositories> 
```

# c# - 在对象列表中打印所有属性的最佳方法是什么？

> ID：11951600
> 
> 赞同：3
> 
> 时间：2012-08-14T11:46:53.143
> 
> 标签：c#, .net, linq

假设你有这个：

```
class A
{
    public string name;
} 
```

然后你有一个`List<A>`并且想要打印`name`每个对象的。
通常，如果您只想打印项目，您会执行类似的操作

```
String.Join(", ", myList); 
```

但我需要打印`name`属性，而不是`myList`对象名称。有比 foreach 更简单的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T11:47:48.820

采用

```
String.Join(", ", myList.Select(x => x.name)); 
```

为此，您必须包含`System.Linq`命名空间

**编辑：**

如果您想在他的代码之后寻求亚当的答案，请执行此操作

```
String.Join(", ", myList.Select(x => x.ToString())); 
```

**礼貌 Adam Goss 对答案的评论：**

您不需要调用`.Select(x => x.ToString())`，因为它会在内部被 object inside 调用`String.Join()`，所以如果您覆盖`ToString()`，您只需调用`String.Join(", ", myList);`

所以在他的代码做你所想的之后

```
String.Join(", ", myList); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:49:47.403

如果您只想要 name 属性，那么最好的方法实际上是覆盖类 A 上的 ToString() 方法。

```
public override String ToString()
{
    return name;
} 
```

如果您有更多属性，请调整您的 ToString() 以匹配：

```
public override String ToString()
{
    return String.Format("Name: {0}. Prop1: {1}", name, prop1);
} 
```

ETC...

# git - 将nodejs部署到heroku

> ID：11951616
> 
> 赞同：2
> 
> 时间：2012-08-14T11:48:01.293
> 
> 标签：git, node.js, deployment, heroku

我已按照入门指南将 nodejs 应用程序部署到 heroku：[https ://devcenter.heroku.com/articles/nodejs](https://devcenter.heroku.com/articles/nodejs)

它工作得很好，直到`git push heroku master`. 这以以下输出终止：

```
git push heroku master
Counting objects: 1018, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (894/894), done.
Writing objects: 100% (1018/1018), 4.03 MiB | 64 KiB/s, done.
Total 1018 (delta 75), reused 0 (delta 0)

-----> Heroku receiving push
-----> Node.js app detected
-----> Resolving engine versions
       Using Node.js version: 0.6.20
       Using npm version: 1.0.106
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm

       > ws@0.4.21 install /tmp/build_ngyi26sy7e54/node_modules/socket.io/node_modules/socket.io-client/node_modules/ws
       > node install.js

       [ws v0.4.21] Attempting to compile blazing fast native extensions.
       [ws v0.4.21] Native code compile failed (but the module will still work):
       [ws v0.4.21] The native extensions are faster, but not required.
       [ws v0.4.21] On Windows, native extensions require Visual Studio and Python.
       [ws v0.4.21] On Unix, native extensions require Python, make and a C++ compiler.
       [ws v0.4.21] Start npm with --ws:verbose to show compilation output (if any).

       > hiredis@0.1.14 preinstall /tmp/build_ngyi26sy7e54/node_modules/socket.io/node_modules/redis/node_modules/hiredis
       > make || gmake

       cd deps/hiredis && make static
       make[1]: Entering directory `/tmp/build_ngyi26sy7e54/node_modules/socket.io/node_modules/redis/node_modules/hiredis/deps/hiredis'
       make[1]: Nothing to be done for `static'.
       make[1]: Leaving directory `/tmp/build_ngyi26sy7e54/node_modules/socket.io/node_modules/redis/node_modules/hiredis/deps/hiredis'
       node-waf configure build
       Setting srcdir to                        : /tmp/build_ngyi26sy7e54/node_modules/socket.io/node_modules/redis/node_modules/hiredis 
       Setting blddir to                        : /tmp/build_ngyi26sy7e54/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build 
       Checking for program g++ or c++          : /usr/bin/g++ 
       Checking for program cpp                 : /usr/bin/cpp 
       Checking for program ar                  : /usr/bin/ar 
       Checking for program ranlib              : /usr/bin/ranlib 
       Checking for g++                         : ok  
       Checking for node path                   : not found 
       Checking for node prefix                 : ok /tmp/node-node-Wyfk 
       'configure' finished successfully (0.029s)
       Waf: Entering directory `/home/lhk/Desktop/zwillenhomepage/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build'
       Waf: Leaving directory `/home/lhk/Desktop/zwillenhomepage/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build'
       Traceback (most recent call last):
         File "/tmp/node-node-Wyfk/bin/node-waf", line 16, in <module>
           Scripting.prepare(t, os.getcwd(), VERSION, wafdir)
         File "/tmp/node-node-Wyfk/bin/../lib/node/wafadmin/Scripting.py", line 145, in prepare
           prepare_impl(t, cwd, ver, wafdir)
         File "/tmp/node-node-Wyfk/bin/../lib/node/wafadmin/Scripting.py", line 135, in prepare_impl
           main()
         File "/tmp/node-node-Wyfk/bin/../lib/node/wafadmin/Scripting.py", line 188, in main
           fun(ctx)
         File "/tmp/node-node-Wyfk/bin/../lib/node/wafadmin/Scripting.py", line 386, in build
           return build_impl(bld)
         File "/tmp/node-node-Wyfk/bin/../lib/node/wafadmin/Scripting.py", line 405, in build_impl
           bld.compile()
         File "/tmp/node-node-Wyfk/bin/../lib/node/wafadmin/Build.py", line 268, in compile
           os.chdir(self.bldnode.abspath())
       OSError: [Errno 2] No such file or directory: '/home/lhk/Desktop/zwillenhomepage/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build'
       make: *** [all] Error 1
       sh: gmake: not found
       npm ERR! hiredis@0.1.14 preinstall: `make || gmake`
       npm ERR! `sh "-c" "make || gmake"` failed with 127
       npm ERR! 
       npm ERR! Failed at the hiredis@0.1.14 preinstall script.
       npm ERR! This is most likely a problem with the hiredis package,
       npm ERR! not with npm itself.
       npm ERR! Tell the author that this fails on your system:
       npm ERR!     make || gmake
       npm ERR! You can get their info via:
       npm ERR!     npm owner ls hiredis
       npm ERR! There is likely additional logging output above.
       npm ERR! 
       npm ERR! System Linux 2.6.32-343-ec2
       npm ERR! command "/tmp/node-node-Wyfk/bin/node" "/tmp/node-npm-Rq2Y/cli.js" "rebuild"
       npm ERR! cwd /tmp/build_ngyi26sy7e54
       npm ERR! node -v v0.6.20
       npm ERR! npm -v 1.0.106
       npm ERR! code ELIFECYCLE
       npm ERR! 
       npm ERR! Additional logging details can be found in:
       npm ERR!     /tmp/build_ngyi26sy7e54/npm-debug.log
       npm not ok
 !     Failed to rebuild dependencies with npm
 !     Heroku push rejected, failed to compile Node.js app

To git@heroku.com:morning-plateau-9747.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:morning-plateau-9747.git' 
```

我不知道如何解决这个问题。该应用程序仍然是准系统。我决定在 heroku 上启动并运行它，然后逐步添加我想要的功能。它在 localhost 上运行良好，npm 安装所有依赖项都没有错误，并且使用 Procfile 它甚至可以与工头一起使用。我使用 github 创建了 repo 并将其克隆到我的机器上。部署到我的 github 帐户没有问题。这是 repo 的链接[https://github.com/lhk/zwillenhomepage](https://github.com/lhk/zwillenhomepage)

我能做些什么 ？

相关包.json：

```
{
  "name": "zwillen-webseite",
  "scripts": {
    "start": "server.js"
  },
  "version": "0.0.1",
  "engines": {
    "node": "0.6.x"
  },
  "dependencies": {
    "express": "3.0.x",
    "socket.io": "0.9.8",
    "jade": "0.27.0"
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:19:39.890

基本上，socket.io 正在使用上下文中的hiredis 模块。

如果您参考 eis 的回答中提到的线程，您会看到你们俩都在使用 socket.io 0.9.8。

尝试使用 0.9.6（我在 heroku 上使用它并且从未遇到过此类问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T07:53:28.527

您需要通过将其添加到文件中`node_modules/hiredis`来从源代码管理中删除。[在 heroku 上的 socket.io + node.js 上](https://stackoverflow.com/questions/11674550/socket-io-node-js-on-heroku/15427146#15427146)`.gitignore`查看完整答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T12:00:15.323

基本上它正在尝试编译hiredis并且失败了。这是故意的，你需要吗？您的应用程序中是否引用了hiredis？如果是这样，那可能是罪魁祸首。如果没有，我会尝试联系 Heroku 支持。

另请参阅[此线程](https://stackoverflow.com/questions/11674550/socket-io-node-js-on-heroku)。

# database - 启动时带有数据的应用程序

> ID：11951619
> 
> 赞同：0
> 
> 时间：2012-08-14T11:48:12.017
> 
> 标签：database, ios5, core-data, data-management

我目前正在开发一个需要数据的应用程序。示例：书籍清单。在首次启动时创建预先填充的数据库的最佳方法是什么？还是我们需要在首次启动时填充核心数据库？

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:53:39.993

您可以以任何您喜欢的方式存储“种子数据”、文本文件、plist 等，甚至可以存储在数据库中（可能是 sqlite）。

然后在启动您的应用程序时，检查数据是否已存在于您的核心数据存储中。如果没有，请将文件导入数据库。

您还可以有一个预配置的数据库并将其复制到应用程序文档目录以使其可写。这是一种更复杂的方法，因为每次种子数据或模型更改时，您都必须重新生成此种子数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:13:38.090

在我的应用程序中，我有一个仅用于读取（不写入）的数据库，我将其包含在分发的捆绑包中。然后我更新 AppDelegate->persistentStoreCoordinator 方法以指向我的数据库的正确位置。

如果我需要写入数据库，那么我需要在访问它之前将它移动到 Documents 目录。并且不需要对 AppDelegate->persistentStoreCoordinator 进行更改。

# ruby-on-rails-3 - 在rails 3.2的某个区域将日期转换为时间

> ID：11951621
> 
> 赞同：1
> 
> 时间：2012-08-14T11:48:19.277
> 
> 标签：ruby-on-rails-3, date, datetime, time, timezone

我有 3 个对象 - @date、@time 和 @datetime。如何使用对象@time 和@datetime 中的区域将对象@date 转换为时间（和日期时间）？

例子：

```
@date = '2012-1-1'
@time = '2012-08-14 14:48:47 +1000'
@datetime = '2012-08-14 14:48:47 +0500'
@converted_date_to_time = ...     # should give '2012-1-1 00:00:00 +1000'
@converted_date_to_datetime = ... # should give '2012-1-1 00:00:00 +0500' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:34:20.640

您可以像这样解析日期

```
1.9.3p194> date = '2012-1-1'
=> "2012-1-1" 
1.9.3p194> Time.parse(date)
=> 2012-01-01 00:00:00 +1300 
```

那是使用我当地的时区（惠灵顿，+13）。你也可以用同样的方式解析你的时间字符串

```
1.9.3p194> time = '2012-08-14 14:48:47 +1000'
=> "2012-08-14 14:48:47 +1000" 
1.9.3p194> Time.parse(time)
=> 2012-08-14 16:48:47 +1200 
```

你会注意到它看起来有点不对，但那是因为它再次使用我的本地时区，所以它是准确的，但目前在我的时区。然后，您可以将其转换为您想要的任何时区。

```
1.9.3p194> Time.parse(time).in_time_zone('Moscow')
=> Tue, 14 Aug 2012 08:48:47 MSK +04:00

1.9.3p194> Time.parse(time).in_time_zone('Brisbane')
=> Tue, 14 Aug 2012 14:48:47 EST +10:00 
```

这也适用于您的`datetime`字符串。

如果要使用特定时区，可以按如下方式进行

```
1.9.3p194> Time.find_zone('Tokyo').parse('2012-08-14 14:48:47 +0500')
=> Tue, 14 Aug 2012 18:48:47 JST +09:00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T16:14:35.057

如果要在 中指定的区域中解析时间`config.time_zone`，可以使用：

```
Time.zone.parse('2012-08-14 14:48:47 +1000') 
```

不过，除非您有一些特殊要求，否则我不会使用 DateTime，因为 Time 类现在支持大范围的日期，并且 Rails 通过 Time.zone 处理时区非常好。

# bash - 使用 for 和 while 循环在 bash 中使用 telnet 进行日志记录

> ID：11951624
> 
> 赞同：4
> 
> 时间：2012-08-14T11:48:23.233
> 
> 标签：bash

我在一个文件中有一个 IP 地址列表，我需要使用 telnet 登录并执行一些命令（这​​些命令对所有机器都不是唯一的，因此不能完全自动化。）。

所以下面是部分自动化任务的脚本（即远程登录到IP地址并显示登录屏幕，一旦退出该远程登录会话，脚本应该远程登录文件中存在的下一个IP地址等等。

我编写了两个脚本（都做同样的工作）来完成上述任务，一个使用**for**循环，一个使用**while**循环。使用**for**循环的脚本工作正常，而使用**while**循环的脚本在登录到第一个 ip 后退出。

使用 for 循环的脚本：-

```
for i in `cat host_ip.txt`;
do 
    telnet $i;
done 
```

使用失败的while循环的脚本：-

```
while read line;
do
   telnet $line ;
done < host_ip.txt 
```

上面失败的while循环脚本的输出是

```
10.102.10.0
Trying 10.102.10.0...
telnet: connect to address 10.102.10.0: Network is unreachable
10.102.10.1
Trying 10.102.10.1...
Connected to 10.102.10.1.
Escape character is '^]'.
Connection closed by foreign host. 
```

使用 while 循环的脚本有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:40:43.937

在您的 while 循环中，标准输入已从文件重定向，我怀疑 telnet 也通过标准输入从该文件中读取。尝试以下操作：

```
while read -u 3 line; do
    telnet $line
done 3< host_ip.txt 
```

这使用 0 以外的文件描述符（标准输入）从文件中读取，保留 telnet 命令的标准输入。

# android - 适用于私人客户的应用程序 Android 和 iOS - No Play 或 Apple Store

> ID：11951625
> 
> 赞同：-1
> 
> 时间：2012-08-14T11:48:25.437
> 
> 标签：android, ios, app-store, google-play

应用程序已关闭，并针对某些公司进行了自定义，没有合同的人不应下载该应用程序。如果用户下载的不是 Apple Store 或 Play，我想知道信息。

或者它会为官方商店中的每个客户创建一个特定版本。（Apple Store 或 Play）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:17:56.223

[http://www.apple.com/iphone/business/apps/in-house/](http://www.apple.com/iphone/business/apps/in-house/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:58:45.677

在 Android 上，欢迎您通过自己的方式在 Play 商店之外分发您的应用程序。您还将负责分发更新，并且您的用户需要选中“设置”中的“未知来源”复选框以允许非 Play 商店安装。

我不能为 iOS 说话。

# windows - 除了 Windows 目录监视之外，Windows 中目录监视的任何替代方法

> ID：11951628
> 
> 赞同：0
> 
> 时间：2012-08-14T11:48:39.723
> 
> 标签：windows, active-directory

我在 Windows 中使用目录监视来获取文件系统通知。但是当我处理大量文件时说 10K 或更多文件，我错过了一些删除通知。我不能错过删除通知。但是 Windows 目录监控并没有正确地给我所有的通知。它似乎错过了一些事件。

我只是将需要 FS 通知的文件夹排队，添加通知标志并等待通知。我只是按照这个例子做的，几乎没有修改。

[http://www.news2news.com/vfp/?example=400&ver=vcpp](http://www.news2news.com/vfp/?example=400&ver=vcpp)

除了 Windows's Own 之外，Windows 中的目录监视还有其他选择吗？还是我在我的程序中犯了任何错误，实际上我已经检查了我的代码。我很确定它正在处理它收到的所有通知。

# iphone - 如何仅获取具有地址字段的联系人

> ID：11951630
> 
> 赞同：1
> 
> 时间：2012-08-14T11:48:59.757
> 
> 标签：iphone, objective-c, ios, ios5

我只想显示那些具有地址字段的联系人。我正在使用此代码..请帮助..

```
- (ABAddressBookRef)getValidAddress{

    ABAddressBookRef allPeople = ABAddressBookCreate();
    ABAddressBookRef contactsWithAddress = ABAddressBookCreate();
    CFArrayRef allContacts = ABAddressBookCopyArrayOfAllPeople(allPeople);
    CFIndex numberOfContacts = ABAddressBookGetPersonCount(allPeople);
    CFErrorRef  anError = NULL; 

    for(int i=0; i<numberOfContacts;i++){
        ABRecordRef aPerson = CFArrayGetValueAtIndex(allContacts, i);
        ABMultiValueRef AddressProperty = ABRecordCopyValue(aPerson, kABPersonAddressProperty);
        if(ABMultiValueGetCount(AddressProperty)>0){
            NSLog(@"this dude has address, he's on the list");
            //ABAddressBookAddRecord(contactsWithEmail, aPerson, &anError);
        }
        else{
            NSLog(@"this guy has no address, removing them from the addressBook");
            ABAddressBookRemoveRecord(contactsWithAddress, aPerson, &anError);
        }

    }

    return contactsWithAddress;
}

- (void)searchBarBookmarkButtonClicked:(UISearchBar *)searchBar
{

    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];

    ABAddressBookRef test = [self getValidAddress];
    [picker setAddressBook:test];

    NSArray* emailProp = [NSArray arrayWithObjects:
    [NSNumber numberWithInt:kABPersonPhoneProperty], 
    [NSNumber numberWithInt:kABPersonEmailProperty],
    [NSNumber numberWithInt:kABPersonBirthdayProperty],
    [NSNumber numberWithInt:kABPersonAddressProperty],
    nil];;
    picker.displayedProperties = emailProp;

    picker.peoplePickerDelegate = self;
    [self presentModalViewController:picker animated:YES];
    //[parentController presentModalViewController:picker animated:YES];

    [picker release];

} 
```

现在它在选择器中显示有地址的联系人，但现在我的输出是：

> TEST1 44-541541-52 D-551，纽约，TEST2 54-965684-85 jV street India，TEST3 95-95684-956 NIL，TEST3 20-95684-956 NIL，
> 
> 现在我得到这个输出：
> 
> 测试1 测试2 测试2 测试2

请帮助...它显示重复..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:57:52.080

恐怕你运气不好。`ABPeoplePickerController`是一个相当有限的课程。

您将不得不滚动您自己的人员选择器控制器，并使用您之前迭代和过滤的地址簿中的所有记录填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:03:28.797

The code which worked for me is in [my Answer](https://stackoverflow.com/questions/8411442/possible-ways-to-export-iphone-addressbook-db/8411806#8411806). You can check whether address exists or not, if not then you may skip that contact.

For this you have to import ABAddressbook frame work in your project and your .m file as well.

Best luck !!

# windows-phone-7 - 向测试人员临时部署 Windows Phone 7 应用程序

> ID：11951631
> 
> 赞同：0
> 
> 时间：2012-08-14T11:49:00.753
> 
> 标签：windows-phone-7, deployment, ad-hoc-distribution

我正在开发一个针对多个设备、iOS、Android 和 WP7 的应用程序。对于 iOS，我可以使用[TestFlight](https://testflightapp.com/)将新版本的应用程序部署给测试人员。同样，在 Android 上，可以使用[Zubhium](https://www.zubhium.com/)来做与仅用于 Android 的 TestFlight 几乎相同的事情。

所以我的问题是：是否有类似的方法可以轻松地将应用程序分发给测试人员，假设他们的设备都在 AppHub 上注册为 WP7 平台上的开发人员设备？我并不真正需要 TestFlight 和 Zubhium 提供的所有统计数据或错误报告，但它当然会很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:15:17.703

在新格式下，您可以将您的应用程序作为 beta 应用程序上传到开发中心（新的 App Hub）并输入测试人员的邮件 ID。完成测试后，您可能需要再次重新发布应用程序以获得 MS 认证。请查看屏幕截图并访问以`https://dev.windowsphone.com/en-us/AppSubmission/Application`获取更多详细信息。

![在此处输入图像描述](../Images/7f767413b5db4ba9b295c5f9c7fa4585.png)

# jquery - Jquery 表单验证：解释性段落未显示

> ID：11951634
> 
> 赞同：-1
> 
> 时间：2012-08-14T11:49:09.777
> 
> 标签：jquery, forms, validation

我在使用 JQuery 进行表单验证时遇到问题。

我的代码应该在页面加载时在页面顶部显示一个解释必填字段的段落。这一段没有出现。

这是我的完整文件：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="form_jquery.aspx.cs"
Inherits="form_jquery" %>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">

        <head runat="server">
            <title></title>
            <link rel="Stylesheet" href="form.css" type="text/css" media="screen"
            />
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">

            </script>
            <script type="text/javascript">
                $(document).ready(function () {
                    var requiredFlag = ' * ';
                    var requiredKey = $('input.required:first').next('span').text();
                    requiredKey = requiredFlag + requiredKey.replace(/^\((.+)\)$/, "$1");
                    var conditionalFlag = ' ** ';
                    var conditionalKey = $('input.conditional:first').next('span').text();
                    conditionalKey = conditionalFlag + conditionalKey.replace(/\((.+)\)/, "$1");
                    $('form :input').filter('.required').next('span').text(requiredFlag).end().prev('label').addClass('req-label');
                    $('form :input').filter('.conditional').next('span').text(conditionalFlag);
                    $('<p></p>').addClass('field-keys').append(requiredKey + '<br />').append(conditionalKey).insertBefore('#contact');
                });
            </script>
        </head>

        <body>
            <form id="form1" runat="server">
                <div>
                    <fieldset>
                        <legend>Personal Info</legend>
                        <ol>
                            <li>
                                <label for="first-name">First Name</label>
                                <input class="required" type="text" name="first-name"
                                id="first-name" />
                                <span>(required)</span>
                            </li>
                            <li>
                                <label for="last-name">Last Name</label>
                                <input class="required" type="text" name="last-name"
                                id="last-name" />
                                <span>(required)</span>
                            </li>
                            <li>How would you like to be contacted? (choose at least one method)
                                <ul>
                                    <li>
                                        <label for="by-email">
                                            <input type="checkbox" name="by-contact-type" value="E-mail" id="by-email"
                                            />by E-Mail</label>
                                        <input class="conditional" type="text" name="email" id="email"
                                        />
                                        <span>(required when corresponding checkbox checked)</span>
                                    </li>
                                    <li>
                                        <label for="by-phone">
                                            <input type="checkbox" name="by- contact-type" value="Phone" id="by-phone"
                                            />by Phone</label>
                                        <input class="conditional" type="text" name="phone" id="phone"
                                        />
                                        <span>(required when corresponding checkbox checked)</span>
                                    </li>
                                    <li>
                                        <label for="by-fax">
                                            <input type="checkbox" name="by- contact-type" value="Fax" id="by-fax"
                                            />by Fax</label>
                                        <input class="conditional" type="text" name="fax" id="fax"
                                        />
                                        <span>(required when corresponding checkbox checked)</span>
                                    </li>
                                </ul>
                            </li>
                        </ol>
                    </fieldset>
                </div>
            </form>
        </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:32:11.133

你有这个：

```
.insertBefore('#contact') 
```

`id="contact"`但我在您的页面上没有看到任何带有 a 的元素。有什么遗漏吗？否则，您需要为 jQuery 提供一个有效的选择器来定位。

另外，你没有在你的问题中标记这个，但是你的第一行让我假设你正在做 WebForms 开发。请注意，任何带有 a 的标记`runat="server"`都不`id`会让您在标记（或设计器）中键入。

# iphone - iphone中的登录regestarion密码和confirmpassword验证和验证

> ID：11951637
> 
> 赞同：4
> 
> 时间：2012-08-14T11:49:17.347
> 
> 标签：iphone, ios5, sqlite

我是 iPhone 编程的新手。我正在开发一个应用程序。我的要求是

在我的第一个视图中，我将输入密码并确认密码插入到 sqlite。然后将执行验证。之后，如果密码匹配，则将推送下一个视图。我需要将确认密码保存在 sqlite 中以供下次验证。

如果我将在验证后关闭我的应用程序，那么如果我将再次构建并运行我的应用程序。现在不应打开密码验证窗口。

只有一个视图会简单地询问密码，如果当前密码等于终止应用程序之前的密码，则应用程序的成功视图将打开。现在这里的验证应该与当前密码和确认密码值进行比较[即旧密码，在终止我的应用程序之前存储]。

有可能做到这一点吗？请帮我

谢谢。

我做了这么多

```
-(void)insertDatapsw:(NSString *)password:(NSString *)confirmpsw

{

    //[self createEditableCopyOfDatabaseIfNeeded];

    sqlite3_stmt *insertStatement = nil;

    NSString *sql;

    int returnvalue;

    sql = [NSString stringWithFormat:@"insert into LogInPsw(ConfirmPsw) values (?)"];

    returnvalue = sqlite3_prepare_v2(database, [sql UTF8String], -1, &insertStatement, NULL);

    if (returnvalue == SQLITE_DONE)

    {

        NSAssert1 (0,@"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));

    }

     //sqlite3_bind_text(insertStatement, 1,[strPasswd UTF8String], -1, SQLITE_TRANSIENT);

     sqlite3_bind_text(insertStatement, 1,[strConfirmPsw UTF8String], -1, SQLITE_TRANSIENT);

       if (SQLITE_DONE!= sqlite3_step(insertStatement))

    {

        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));

    }

    else

        sqlite3_reset(insertStatement);

    sqlite3_finalize(insertStatement);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:23:22.867

如果我对您的理解正确，您希望在正确输入密码后保存密码以供以后使用。

首先，我不会使用 sqlite 来保存密码。标准方法是使用钥匙串。看看这个[钥匙串示例](http://iosdevelopertips.com/core-services/using-keychain-to-store-username-and-password.html)。您可以使用[众多包装器](http://www.alexcurylo.com/blog/2010/11/13/keychain-wrappers/)中的一种来使生活更轻松。

更简单但更不安全的方法是使用[NSUserDefaults](http://codeexamples.wordpress.com/2011/02/12/nsuserdefaults-example/)，我强烈建议您不要这样做。

拥有密码和保存的密码，您所要做的就是比较。

额外提示：当您将密码保存在数据库中时，请勿将密码保存为纯文本。保存密码的哈希值（您可以使用类似[SHA2](http://de.wikipedia.org/wiki/Secure_Hash_Algorithm)的东西），然后，当用户输入密码时，您可以将密码哈希值与保存的哈希值进行比较。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T09:46:42.110

您使用“NSUserDefault” `and save password in 'NSUserDefault`，如果您关闭应用程序并第二次运行应用程序，您会看到“NSUserDefault” `value if it exist then go on second view and second condition if you logout the app then you delete the 'NSUserDefault`，下次运行该应用程序时，“NSUserDefault”不存在，然后您要求输入密码

# java - 通过servlet中的scriptlet调用类对象方法

> ID：11951639
> 
> 赞同：1
> 
> 时间：2012-08-14T11:49:36.353
> 
> 标签：java, servlets, scriptlet

我有一个 servlet，我想通过 scriptlet 运行 .java 代码。我在 Temp.java 中有一个简单的类。

```
package pack;

import static java.lang.System.out;

public class Temp {

    public static void main()
    {out.println("trololo");

    }

} 
```

我想通过 index.jsp 中的 scriptlet 调用 main 方法

```
<body>
    <%@ page import="pack.*" %>

    <%
    out.println("whatever");
    Temp temp = new Temp();
    temp.main();
    %>

</body> 
```

通过 scriptlet 调用后，我必须做什么才能使 main 函数工作？打印“whatever”有效，但 main 函数不打印任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:52:29.330

它将在控制台上打印，检查日志

你进口的

```
import java.lang.System.out; 
```

这是标准输出，所以检查你的标准输出日志

改用[JSTL](https://stackoverflow.com/tags/jstl/info) _

# javascript - 更新/破坏我的观点，我相信我的逻辑可能需要注意

> ID：11951640
> 
> 赞同：-1
> 
> 时间：2012-08-14T11:49:38.323
> 
> 标签：javascript, backbone.js, underscore.js

我有一个骨干项目，可以从各种 API 中提取播客。

我要解决的问题是删除当前显示的所有视图。我想通过将事件绑定到单击“删除”锚点时触发的每个视图来做到这一点。

目前，集合重置触发并删除所有模型，但我无法确保视图也被销毁。我想我的逻辑需要帮助。

这是我的代码：

```
podSearch = Backbone.Model.extend();
podSearchCollection = Backbone.Collection.extend({
    model: podSearch,
    parse: function(response) {
        return response.results;
    }
});

ownerList = Backbone.Model.extend();
ownerListCollection = Backbone.Collection.extend({
    model: ownerList,
    parse: function(response) {
        return response.results;
    }
});

Search = Backbone.View.extend({
    initialize: function(){
        this.searchCollection = new podSearchCollection();
        this.searchCollection.bind('reset', this.appendResult, this);
    },
    events: {
        "click button" : "getTerm"
    },
    doSearch: function(term){
        /* get term and collection url */
        this.searchCollection.fetch();
    },
    appendResult: function(){
        _.each(this.searchCollection.models, function (item) {
            var listItem = new ownerItem({model:item});
            $('#results').append(listItem.render().el);
        });
    },
    removeAll: function(){
        console.log(this.searchCollection);
        this.searchCollection.reset();
    }
});

ownerItem = Backbone.View.extend({
    template: $("#castOwner").html(),

    initialize: function(){
        this.ownerListCollection = new ownerListCollection();
        this.ownerListCollection.bind('reset', this.appendResult, this);
        this.model.bind("reset", this.removeSelf);
    },
    render: function(){
        var tmpl = _.template(this.template);
        this.$el.html( tmpl( this.model.toJSON() ) );
        return this;
    },
    events: {
        "click a" : "pullCasts",
        "click a.removeAll" : "removeAll"
    },
    pullCasts: function(e){
        e.preventDefault();
        var id = this.$el.find('a').attr("href");
        this.ownerListCollection.url = 'http://itunes.apple.com/lookup?id=' + id + '&entity=podcast&callback=?';
        this.ownerListCollection.fetch();
    },
    appendResult: function(){
        _.each(this.ownerListCollection.models, function(item){
            /* do something with each item */
        }, this);
        $(this.el).append('<p><a href="#" class="removeAll">Remove All</a></p>');
    },
    removeAll: function(){
        search.removeAll();
    },
    removeSelf: function(){
        console.log("rm");
    }
});

search = new Search(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:54:46.993

为了在模型被销毁时删除视图，您可以向视图添加一个侦听器，如果模型被销毁，它将删除视图：-

```
initialize: function () {
    //view gets re-rendered if model is changed
    this.model.on("change", this.render, this);
    //view gets removed if model is destroyed
    this.model.on("destroy", this.remove, this)
}, 
```

# android - 如何通过 intent.putExtra 发送位置

> ID：11951644
> 
> 赞同：2
> 
> 时间：2012-08-14T11:49:50.653
> 
> 标签：android, android-intent, location

我有一个问题，我有一个主要活动，它有一个`locationlistener`，我想在不同的活动中使用这个位置信息（比如`location.getAccuracy()`或）。`location.getAltitude()`什么是更好的解决方案，`locationListener`在新活动中实施新的或使用发送位置`intent.putExtra`？

# linq - 我如何聚合一列中的所有元素以通过 linq 获得一个字符串

> ID：11951645
> 
> 赞同：-2
> 
> 时间：2012-08-14T11:49:55.653
> 
> 标签：linq

我如何聚合一列中的所有元素以通过 linq 获得一个字符串

例如：我有一个名为：Items 的表和名为：ListItem 的表的一列

```
 ListItem
                      1
                      2
                      3 
```

如何选择 Column ListItem 中的所有元素以具有字符串：123

（不选择列的每个值并连接在一起）

谢谢大家的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:55:27.350

假设您使用类型化数据作为 List 并且它具有 id 作为属性。然后将 id 聚合到一个字符串中，您可以这样做。

```
string.Join(" ", listofEmployees.Select(e=>e.Id)); 
```

这将像打印

```
1 2 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:56:39.110

您可以使用 a[`Select`](http://msdn.microsoft.com/en-us/library/bb548891.aspx)来提取您需要的值并将它们组合成一个字符串[`String.Join`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)

```
var table = new DataTable("Items");
table.Columns.Add(new DataColumn("LiItem", typeof(int)));
table.Rows.Add(1);
table.Rows.Add(2);
table.Rows.Add(3);

Console.WriteLine(String.Join("", table.AsEnumerable().Select(r => r["LiItem"]))); 
```

输出：

> 123

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:01:32.537

既然您说的是“聚合”，那么您可能有兴趣知道这是一个实际的 LINQ 方法：

```
var a = new[]{"1","2","3"};
var concatenated = a.Aggregate("",(t,s)=>t+s); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T12:14:44.427

我认为 string.Join 的所有答案都不完整，因为此方法需要**一个字符串数组**，而不是**IEnumerable**。

这应该有效。

```
var data = ...
var result = string.Join(" ", data.Select(x => x.ListItem).ToArray()); 
```

这导致：

```
"1 2 3" 
```

# java - java中的setRGB()

> ID：11951646
> 
> 赞同：9
> 
> 时间：2012-08-14T11:50:02.667
> 
> 标签：java, image, image-processing, pixel

我正在使用 setRGB() 来更改图像像素的值。

```
int rgb=new Color(0,0,0).getRGB();
image1.setRGB(i,j,rgb); //where i,j is the boundaries of the image 
```

在这里，我将所有像素值设置为白色。但是这种变化并没有反映在图像中。任何人都知道`setRGB()`它是如何工作的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-14T12:07:13.990

白色在 RGB 255,255,255 中，因此：

```
Color myWhite = new Color(255, 255, 255); // Color white
int rgb = myWhite.getRGB();

try {
    BufferedImage img = null;
    try {
        img = ImageIO.read(new File("bubbles.bmp"));
    }
    catch (IOException e) {
    }

    for (int i = 0; i < 100; i++) {
        for (int j = 0; j < 100; j++) {
            img.setRGB(i, j, rgb);
        }
    }

    // retrieve image
    File outputfile = new File("saved.png");
    ImageIO.write(img, "png", outputfile);
}
catch (IOException e) {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T09:23:38.900

```
 Color col = new Color(newValue, newValue, newValue);
            image1.setRGB(i, j, col.getRGB()); 
```

# xaml - 边框控件未填充到网格的行宽

> ID：11951650
> 
> 赞同：0
> 
> 时间：2012-08-14T11:50:11.917
> 
> 标签：xaml, windows-8, microsoft-metro

我有一个网格控件，它已按列拆分。

```
<Grid HorizontalAlignment="Stretch">
    <Grid.ColumnDefinitions>
         <ColumnDefinition />
         <ColumnDefinition Width="80" />
         <ColumnDefinition Width="65" />
    </Grid.ColumnDefinitions>
</Grid> 
```

我在第 0 列中有一个边框控件。但是我面临一个问题，即边框控件没有填充到该列的宽度。边框包含一个启用了环绕的文本块。如果文本块中的文本大于宽度，则它会被包裹并拉伸以填充可用空间。

但是，如果文本块包含只有大约 5-10 个字符的小文本，则边框控制不会延伸。

边框控件使用 Horizo​​ntalAlignment 和 VerticalAlignment 显式设置为 Stretch，Margin 为 0。但边框仍然没有拉伸到第 0 列中可用的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:18:32.260

Try setting the width of the border. If you want to let the border take up the space then set the ColumnDefinition to * (First)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:34:36.620

我*相信*你的第一列不能

```
<ColumnDefinition /> 
```

相反，我认为应该是

```
<ColumnDefinition Width="*" /> 
```

ColumnDefinition.Width 是 GridLength 类型。GridLength 是一个结构，默认为“自动”。Auto 将尝试占用其子控件所需的最小空间。“*”的值表示相对于其他 * 列占用所有空间。（一列 2* 占用的空间是一列 1* 的两倍。我通常建议使用 1 到 100 之间的数字并将它们视为百分比）。由于没有其他列是 * 列，简单的“*”值表示占用所有剩余空间。

您会认为通过使所有其他列的宽度固定，它会强制第一列为“*”，但我认为情况并非如此。

您可以在此处阅读有关 GridLength 的更多信息：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.gridlength.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.gridlength.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T21:32:29.393

请向我们展示您对边界的定义。它位于星型列中，但您可能已经给出了`Border`a`HorizontalAlignment`或`VerticalAlignment`它会否定填充父级内容区域的默认行为。我已经验证了这个例子在 Kaxaml 中运行良好。

```
<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="80"/>
            <ColumnDefinition Width="65"/>
        </Grid.ColumnDefinitions>
        <Border Background="LightGreen"/>
        <TextBlock Grid.Column="1" Foreground="Blue" Text="Column01"/>
        <TextBlock Grid.Column="2" Foreground="Red" Text="Column02"/>
    </Grid>
</Page> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T12:02:48.700

```
 <DataGridTemplateColumn Width="150">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    BorderBrush="Red"
                                    BorderThickness="2">
                                <TextBlock Text="{Binding Name}" />
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn> 
```

# c - 带有 C 代码的 4 位 LCD

> ID：11951653
> 
> 赞同：2
> 
> 时间：2012-08-14T11:50:15.040
> 
> 标签：c, microcontroller, microprocessors, lcd

我正在使用 Winstar Display LCD (WH2004A-YYK-CP) 和 STM32 处理器，代码是用 C 编写的。我需要以 4 位模式运行它。我运行它并写下我想要的。

如您所知，4 位模式发送 8 位数据为 2 倍 4 位。问题是，当我在 2 个半字节之间重置时，它会打印出奇怪的字符，无论我重置多少，它都无法正常工作。我想出的唯一解决方案是重置它几次。

为了弄清楚发生了什么，我在 2 个半字节（每个 4 位）之间添加了 2 秒延迟，并打印了一个长句子。因此，每当我重置它时，处理器都会等待发送第二个半字节。

我正在重置它，它打印出一些奇怪的东西，第二次重置后它什么也没打印，第三次重置后它再次正确打印。第 4 次重置它再次打印一些奇怪的东西，第 5 次没有打印，第 6 次再次正确打印......并像这样继续。因此，我现在确定问题出在这些分割字节上。

类似的代码在 8 位模式下工作得很好。

我要问的是：我如何确定“当我重置 STM32 处理器时，LCD 不会等待在前一个会话中发送第一个半字节的某些数据的第二个半字节。” 通过使用 C 代码？

**更新：**

我也在这里发送我的代码：http: [//pastebin.com/kHQQEqjx](http://pastebin.com/kHQQEqjx)

LCD 命令也在这里：http: [//imgur.com/mfDlj](http://imgur.com/mfDlj)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T22:03:18.007

这是详细说明在 4 位模式下初始化 LCD 控制器所需的所有步骤的流程图。

![在此处输入图像描述](../Images/2c5f41020b1cc86af72f1e80b621cbba.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:57:19.197

通常，会有一种重置 LCD 设备的方法，您可以在处理器启动过程中执行此操作。

这样，处理器的复位也会使 LCD 处于已知状态。

您需要掌握数据表（或其他编程规范）并了解它是如何完成的。几乎可以肯定有一种方法可以让 LCD 恢复到已知的初始状态。

否则，您可能需要将复位开关连接到处理器*和*LCD 控制器。

# visual-studio-2010 - VS2010工具栏加载时间过长

> ID：11951654
> 
> 赞同：6
> 
> 时间：2012-08-14T11:50:16.003
> 
> 标签：visual-studio-2010, visual-studio

每次我打开 VS2010 应用程序时，工具栏似乎都需要很长时间才能加载（每次应用程序启动时加载工具箱至少需要 10 分钟）。VS2010 屏幕底部的状态消息显示：

```
Loading toolbox content from package 'Microsoft.VisualStudio.IDE.ToolboxControlsInstaller.ToolboxInstallerPackage' 
```

除了 Visual Studio 中的标准控件之外，我的工具箱中还添加了 Telerik ASP.NET、Silverlight 和 WinForms 控件。

尝试禁用 AutoToolboxPopulate 但这没有帮助。关于如何加快速度的任何想法？

附加信息：

*   工具箱设置为自动隐藏
*   在第一个 10 分钟延迟加载之后，工具箱在我运行 Visual Studio 的剩余时间内工作正常。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T12:03:24.413

此修复有助于[修复损坏的工具箱（在 Visual Studio 2010 SP1 中） - Michael Crump](http://michaelcrump.net/fixing-a-broken-toolbox-in-visual-studio-2010-sp1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-01T06:34:26.883

我通过将“Microsoft.VisualStudio.IDE.ToolboxControlsInstaller.dll”从 C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies 移动到 C:\Program Files\Microsoft Visual Studio 来解决问题10.0\Common7\IDE\PrivateAssemblies\bk

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T21:08:03.603

有一个[Connect 错误报告](https://connect.microsoft.com/VisualStudio/feedback/details/551183/loading-toolbox-content-from-package-takes-55-seconds-or-more "连接错误报告")。它已经关闭，因此您无法投票，但请通过单击“我也可以”让 Microsoft 知道您遇到了问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T12:12:59.243

您是否尝试过查看日志？[http://forums.silverlight.net/t/231462.aspx/1](http://forums.silverlight.net/t/231462.aspx/1)

# bash - 如何在tail -f命令后继续运行脚本

> ID：11951655
> 
> 赞同：7
> 
> 时间：2012-08-14T11:50:16.697
> 
> 标签：bash, signals, tail

我有以下脚本：

```
tail -f nohup.out
echo 5 
```

当我按`Ctrl`+ `C`on`tail -f`时，脚本停止运行：`5`未打印。`echo 5`停止命令后如何运行`tail`命令？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T13:07:48.203

`Ctrl`+`C` sends the [SIGINT](http://en.wikipedia.org/wiki/SIGINT_%28POSIX%29) signal to all the processes in the foreground [process group](http://en.wikipedia.org/wiki/Process_group). While `tail` is running, the process group consists of the `tail` process and the shell running the script.

Use the [`trap`](http://pubs.opengroup.org/onlinepubs/009695399/utilities/trap.html) builtin to override the default behavior of the signal.

```
trap " " INT
tail -f nohup.out
trap - INT
echo 5 
```

The code of the trap does nothing, so that the shell progresses to the next command (`echo 5`) if it receives a SIGINT. Note that there is a space between the quotes in the first line; any shell code that does nothing will do, except an empty string which would mean to ignore the signal altogether (this cannot be used because it would cause `tail` to ignore the signal as well). The second call to `trap` restores the default behavior, so that after the third line a `Ctrl`+`C` will interrupt the script again.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:02:00.073

```
#!/bin/bash
trap "echo 5" SIGINT SIGTERM
tail -f nohup.out 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:31:43.060

您可以`tail`在新的 shell 中启动，如下所示：

```
#!/bin/bash
bash -i -c 'tail -f nohup.out'
echo 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T07:52:11.903

如[rwos 所述](https://stackoverflow.com/a/11953396/4149210)，但添加了内联陷阱。

```
bash -i -c "trap ' ' SIGINT; tail -F '$1'; trap - SIGINT" 
```

在发出后续 SIGINT 信号时，这将在不关闭腻子会话的情况下工作（这是我的问题）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-21T00:17:22.010

在 bash 中以单个 & 符号结束该行，以异步方式在后台运行命令

```
tail -f nohup.out & 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-14T15:37:16.610

在 perl 中查找 File:Tail，在不同的项目中多次使用它来自动跟踪日志并执行日志输出的特定操作。

google ftp-upload-mon 我上传到 sourceforge 的一个项目，它使用 File:Tail to tail -f xferlogs

# ruby - 红宝石：Hello World 练习

> ID：11951656
> 
> 赞同：0
> 
> 时间：2012-08-14T11:50:24.700
> 
> 标签：ruby, vim, ubuntu-11.10

我知道我的问题不是一个新问题，但我会更具体，希望也能得到一个具体的答案。

我在用：

*   Ubuntu 11.10 -->（我人生中第一次使用 Windows vista 上的虚拟机）
*   尝试安装 rvm 和 Ruby -->（成功但老实说我不知道​​它们是 :D）
*   通过vim教程
*   尝试了 Hello_World 练习，如下所示：

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

```
:! mkdir rubymonk
cd rubymonk
:e hello_world.rb
-------------------------
vim (insert mode)
puts "Hello World"
-------------------------
:wq 
```

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

*   返回终端
*   键入：ruby hello_world.rb
*   得到通常的错误（ruby：没有这样的文件或目录——hello_world.rb（LoadError）

希望我能得到你们的答复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T15:08:11.947

看起来你在 vim 中创建了目录 ruby​​monk，然后 cd 进入它。但那是在 vim 里面，所以你需要在你的终端中做同样的事情：

```
cd rubymonk
ruby hello_world.rb 
```

# web-services - 我在这个特定的 MATLAB 示例中使用 SOAP 的方式有什么问题？

> ID：11951661
> 
> 赞同：1
> 
> 时间：2012-08-14T11:50:37.023
> 
> 标签：web-services, debugging, matlab, dom, soap

我正在尝试使用以下 MATLAB 代码连接到[http://www.webservicex.net/上的示例肥皂服务器：](http://www.webservicex.net/)

```
% createSoapMessage(NAMESPACE,METHOD,VALUES,NAMES,TYPES,STYLE) creates a SOAP message.
% VALUES, NAMES, and TYPES are cell arrays.  
m = createSoapMessage('http://www.webserviceX.NET', 'GetCitiesByCountry', ...
  {'Australia'}, {'CountryName'}, { '{http://www.w3.org/2001/XMLSchema}string' }, 'rpc')

%    callSoapService(ENDPOINT,SOAPACTION,MESSAGE) sends the MESSAGE,
%    a Java DOM, to the SOAPACTION service at the ENDPOINT.
response = callSoapService('http://www.webservicex.net/globalweather.asmx?WSDL', ...
  'http://www.webserviceX.NET/GetCitiesByCountry', m); 
```

我得到以下响应（插入行尾以供查看）：

```
val =
  <?xml version="1.0" encoding="utf-8"?>
  <soap:Envelope
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
      <soap:Fault>
        <faultcode>soap:Server</faultcode>
          <faultstring>System.Web.Services.Protocols.SoapException: 
          Server was unable to process request. 
          ---&gt; System.Data.SqlClient.SqlException: 
          Procedure or function 'getWCity' expects parameter '@CountryName',
          which was not supplied.
          at WebServicex.GlobalWeather.GetCitiesByCountry(String CountryName)
          --- End of inner exception stack trace ---
        </faultstring><detail />
      </soap:Fault>
    </soap:Body>
  </soap:Envelope> 
```

我知道服务器正在响应。我可以像这样用 Python 和 suds 询问它：

```
from suds.client import Client
url = 'http://www.webservicex.net/globalweather.asmx?WSDL'
client = Client(url)
result = client.service.GetCitiesByCountry('Australia') 
```

我的简单问题是我做错了什么？

我还想知道如何查看 createSoapMessage 创建的 DOM 对象以及如何查看 MATLAB 发送和接收的 xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:19:40.570

正确的代码如下所示：

```
% createSoapMessage(NAMESPACE,METHOD,VALUES,NAMES,TYPES,STYLE) creates a SOAP message.
message = createSoapMessage( ...
  'http://www.webserviceX.NET', ...
  'GetCitiesByCountry', ...
  {'Australia'}, ...
  {'CountryName'}, ...
  {'{http://www.w3.org/2001/XMLSchema}string' }, ...
  'document')

% callSoapService(ENDPOINT,SOAPACTION,MESSAGE) sends the MESSAGE,
response = callSoapService( ...
  'http://www.webservicex.net/GlobalWeather.asmx', ...
  'http://www.webserviceX.NET/GetCitiesByCountry', ...
  message);

% parseSoapResponse Convert the response from a SOAP server into MATLAB types.
cities = parseSoapResponse(response) 
```

具体的区别是：

*   STYLE 参数是“文档”，而不是“rpc”
*   www.webservicex.net 的资本化方式非常不一致，这很重要！
*   端点参数以 .asmx 结尾，不包括 ?WDSL。

我也添加了一个`parseSoapResponse`调用示例。这也给我带来了麻烦。对于此 Web 服务，此调用仅返回包含所请求数据的结构。在同一主机上使用不同服务时，`parseSoapResponse`返回两个输出，一个好/坏结果和数据。请参阅[使用 Matlab 发送 SOAP 请求](https://stackoverflow.com/questions/11220900/sending-soap-request-with-matlab)。

最后，在回答我关于在 MATLAB 中查看中间 XML（例如`message`肥皂消息）的补充问题时，请使用以下命令：

```
 javaString = message.saveXML(message.getFirstChild()) 
```

在 java 字符串中获取 XML，然后：

```
 matlabString = char(javaString) 
```

在 matlab 字符串中获取 XML。

下面的代码添加了换行符和空格以在多行中显示 XML 以帮助调试。

```
ms2 = regexprep(matlabString ,'>','>\n')
ms3 = regexprep(ms2,' x','\n  x') 
```

我仍然不知道如何在 MATLAB 中查看传出和传入的 HTTP 流量，就像在浏览器中一样。

# drupal - 显示最大字段数

> ID：11951662
> 
> 赞同：0
> 
> 时间：2012-08-14T11:50:39.213
> 
> 标签：drupal, drupal-7, drupal-files

添加节点时，它一次只显示一个上传字段，但是我允许每个节点上传 3 张图像，所以我想向添加节点的用户显示这个最大数量的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:00:16.497

我为此找到的唯一选择是使用 plupload。

# php - PHP 到 csv 导出错误

> ID：11951663
> 
> 赞同：0
> 
> 时间：2012-08-14T11:50:43.733
> 
> 标签：php, csv, export

我的代码有问题。当我填写 PHP 表单并在页面上提交时，我遇到了 2 个问题；

1-它根据我的需要将来自 6 个文本区域的所有 6 个输入写入 csv 文件的下一行。但是它将它们全部写入行的第一个单元格，我当然希望它写入 6 个不同的单元格。2- 提交表单后，如果您按退格键，表单将再次打开，之前在 textareas 中输入，我希望它们为空。如果您能提供帮助，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:56:51.863

您必须提供有关如何编写 csv 文件以及尝试打开它们的程序的更多信息。

关于返回最后一页：该行为来自您的浏览器-> 最好在提交页面中添加按钮/链接以添加新条目

# parsing - 使用 Tcl 解析结构化文件并选择一些值？

> ID：11951670
> 
> 赞同：1
> 
> 时间：2012-08-14T11:50:58.607
> 
> 标签：parsing, tcl

我有一个半结构化文本文件，我想从中提取值并将它们保存以备后用。该文件包含一些模拟环境的配置数据，即 env。由不同的子系统组成，对于这些子系统之一，我想找到它们的数量，以及它们的具体类型。这就是文件的结构

```
<Begin_Subsystem_Configuration>
Subsystem_Name:"PLC1_ARR":
Subsystem_Identifier:0x01B1B000:
Subsystem_Type:PLC_BERGHOF:
IP_Address:"10.70.9.11":
Port_Numbers:3500:3500:
Alive_Message_Period:10:
Max_Communication_Latency:5:
Switch_Over_Timeout:15:
Member_Count:6:
Subsystem_Member_1:77:77:       # PS SR1
Subsystem_Member_2:106:106:     # SZ PTHA
Subsystem_Member_3:110:110:     # SZ PTH1
Subsystem_Member_4:310:310:     # SZ YL1
Subsystem_Member_5:311:311:     # SZ DOOR1
Subsystem_Member_6:312:312:     # SZ FIRE1
<End_Subsystem_Configuration> 
```

现在我想知道，模式 PLC_BERGHOF 多久在文件中出现一次，我实际上已经可以这样做了，但是现在如果找到它，我想保存在某种 assoc 中。数组之前行的键值对，以及找到模式的行之后的 3 行。

稍后在我的脚本中，我希望能够访问这样的值：设置 plc1_IP_Address 数组 ['plc1_IP_Address']，访问的确切 sysntax 并不重要，代码只需进入 Tcl 脚本

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:05:58.977

如果您使用的是 Tcl 8.5，那么我建议您逐行阅读文件，构建一组[dict](http://www.tcl.tk/man/tcl/TclCmd/dict.htm)对象以将每个子系统保存为 name:item 对的集合。然后，您可以创建一个此类 dicts 的列表来表示整个文件或对您有意义的任何内容。然后是这样的：

```
foreach config $list_of_dicts {
    if {[dict get $config Subsystem_Type] eq "PLC_BERGHOF"} {
        puts "[dict get $config IP_Address]\n[dict get $config Port_Numbers]"
    }
} 
```

虽然从你描述的声音来看：`grep -A 3 PLC_BERGHOF`就足够了。

如果不使用 8.5，那么您没有，`dict`但可以以几乎相同的方式管理名称项对的列表。您最终只是使用`lsearch`更多或将对列表转换为数组只是为了查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:36:11.433

```
set fh [open "file.data" r]
array set data []
while {[gets $fh line] != -1} {
    switch -exact -- $line {
        "<Begin_Subsystem_Configuration>" -
        "<End_Subsystem_Configuration>"   {continue}
        default {
            set fields [split $line ":"]
            set values [list]
            foreach value [lrange $fields 1 end-1] {
                if {[string match {"*"} $value]} {
                    lappend values [string range $value 1 end-1]
                } else {
                    lappend values $value 
                }
            }
            set data([lindex $fields 0]) $values
        }
    }
}
close $fh 
```

然后你可以使用

```
if {$data(Subsystem_Type eq "PLC_BERGHOF"} {
    puts "IP address is: $data(IP_Address)"
} 
```

我假设您的文件实际上格式如下，并且您无法正确格式化您的问题：

```
<Begin_Subsystem_Configuration>
Subsystem_Name:"PLC1_ARR":
...
<End_Subsystem_Configuration> 
```

# javascript - 确定 iPhone 用户是否在 Safari 屏幕上

> ID：11951672
> 
> 赞同：-2
> 
> 时间：2012-08-14T11:51:08.613
> 
> 标签：javascript, iphone, safari

有没有办法确定 iPhone 用户是否在实际的 Safari 屏幕上？

我想用 JavaScript、PHP、HTML 或 JS 来解决这个问题。

我正在构建一个代码，iPhone 用户实际上可以看到我重新定位的网页。

==================================================== ==============

我必须查明 Safari 是否在后台运行。

我知道除非我在 iPhone 上运行我自己的应用程序，否则我无法弄清楚。

但是，我相信有一种方法可以使用 JavaScript 或其他语言来解决它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:01:03.530

我真的不认为有任何方法可以这样做，因为您无法访问 iOS 正在执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:18:06.573

检查[页面可见性 API](http://davidwalsh.name/page-visibility)是否可以帮助您。

# php - PHP文件下载完成事件

> ID：11951673
> 
> 赞同：0
> 
> 时间：2012-08-14T11:51:08.840
> 
> 标签：php, download

我正在动态创建用户应该下载的 zip 文件，下载完成后我想删除文件。我认为所有 JS 方式都不安全。因此，php 它是一种服务器端语言并不是什么秘密，这让我认为在某种程度上，该客户端和我的服务器之间的字节不再传输，所以我可以说现在下载已完成。有没有类似的方法来完成我上面描述的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:53:44.420

据我所知，没有办法知道用户何时完成下载。

我会将文件存储在一个单独的队列中，并在经过一定时间后删除它们（介于 1h 和 1d 之间）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:16:01.243

如果您在 PHP 中处理下载，您可以使用 ignore_user_abort() 在连接中断的情况下保持脚本运行，并在发送数据块时检查 connection_aborted()。如果在设置所有块之前发生中止，则下载失败。由于 Web 服务器缓冲了 PHP 输出，因此无法保证传输确实已经结束。

另一种可能的方法是设置一个管道 Apache 日志，它将事件通知发送到 PHP 脚本。即使下载不是由 PHP 本身处理的，它也可以工作。我相信 Apache 不会将请求标记为使用 HTTP 200 完成，除非服务器收到最后一个数据包已安全到达的 TCP/IP 确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:19:34.810

为什么不让 php 处理下载？

```
//you may need setting php runtime limit to zero.

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');

$filename = "myfile.zip";
$file = file_get_contents($filename);
echo $file;

//download complete
unlink($filename); //delete file 
```

注意：在我的测试中，我没有删除，而是将输出作为“下载完成”提供给 syslog，然后观察 syslog 并运行脚本，

它说下载完成，因为下载似乎 ~1900KB/2000KB 这可能是 chrome 问题，但您可以使用 sleep(3)；并在删除文件之前等待 3 秒钟以确保没有问题。

编辑：即使下载因任何原因失败，此脚本也会删除文件。您可能需要为每次下载尝试创建文件。我会去：

1- 创建文件 2- 用户下载/失败 3- 删除文件 4- 如果用户想再次下载：转到 1

# c# - 将 Provider 的最低 OpenID 版本要求提高到 2.0，以保护此无状态 RP 免受重放攻击

> ID：11951675
> 
> 赞同：0
> 
> 时间：2012-08-14T11:51:13.170
> 
> 标签：c#, .net, openid, dotnetopenauth

我们使用`OpenAuthAuthentiocation.dll`并收到以下警告：

> 将 Provider 的最低 OpenID 版本要求提高到 2.0，以保护此无状态 RP 免受重放攻击

我们该如何解决？我怎样才能让这个警告消失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:41:31.437

[您可以通过自己在配置文件](http://www.dotnetopenauth.net/?page_id=1116)^([semi-dead link])中将 Providers 的最低 OpenID 版本要求提高到 2.0 来使警告消失。

```
<dotNetOpenAuth>
    <openid>
        <relyingParty>
            <security minimumRequiredOpenIdVersion="V20" />
        </relyingParty>
    </openid>
</dotNetOpenAuth> 
```

对您的 RP 的影响是相同的，但由于您是自己做的，DotNetOpenAuth 不会警告您它正在​​为您做这件事。

# javascript - 画布弧线的像素完美碰撞

> ID：11951676
> 
> 赞同：2
> 
> 时间：2012-08-14T11:51:15.833
> 
> 标签：javascript, html, canvas, collision

我在画布上有许多实体。我正在检查玩家实体是否正在触摸食物实体。玩家实体根据用户的输入移动，食物实体在屏幕周围随机缓慢移动。目前我正在这样做：

```
for (var i = 0; i < foodPieces.length; i++) {
    if (Math.abs(foodPieces[i].x - player.x) < (foodPieces[i].radius + player.radius) 
        && Math.abs(foodPieces[i].y - player.y) < (foodPieces[i].radius + player.radius))
    { 
        return true;        
    }
} 
```

然而，玩家通常会提前检测到食物实体，最多会偏离 5-10 像素左右。如果重要的话，食物实体半径在一定程度上是随机的，并且玩家实体半径在整个游戏中都会增加。我试图弄清楚为什么会及早检测到碰撞以及如何让它正确检测到。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T11:57:27.697

您基本上检查了边界矩形碰撞而不是圆形碰撞。

尝试计算点之间的实际距离：

```
var dist = Math.sqrt(Math.pow(foodPieces[i].x - player.x,2)+Math.pow(foodPieces[i].y - player.y,2));
if (dist<(foodPieces[i].radius + player.radius)) return true; 
```

这使用毕达哥拉斯语句计算距离：C^2 = A^2 + B^2 ![为什么你的代码中断](../Images/dca33c9e64888a55be8820170d653144.png)

# iphone - 制作 Activator 监听器时遇到问题（使用 theos）

> ID：11951679
> 
> 赞同：2
> 
> 时间：2012-08-14T11:51:18.850
> 
> 标签：iphone, ios, jailbreak, activator, tweak

我最近开始学习如何使用 theos 进行调整，挂钩到应用程序等。我想制作一个简单地说出测试的 Activator 侦听器。说出测试而不是记录，是的，我知道。

我最近在 Cydia 上发现了这个名为**speak**的命令行实用程序，它允许我的设备通过终端说话。我在 Github 上的 AppleNerd 的 repo 上找到了一个 Activator 模板，它运行良好，直到编译部分到来。我使用了系统（口语测试）；我在哪里写了这样的代码：

```
#import "libactivator.h"
@interface Testivator : NSObject<LAListener> 
{} 
@end

@implementation Testivator

-(void)activator:(LAActivator *)activator receiveEvent:(LAEvent *)event {
   system("speak Test");
}

+(void)load {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];
    [[LAActivator sharedInstance] registerListener:[self new] forName:@"um"];
    [p release];
}
@end 
```

makefile 看起来像这样：

```
include theos/makefiles/common.mk

TWEAK_NAME = Testivator
Testivator_FILES = Listener.xm
Testivator_LDFLAGS = -lactivator

include /var/theos/makefiles/tweak.mk 
```

我正在使用 RPetrich 的最新激活头，但是当我尝试编译时，它告诉我找不到该库。像这样：

> ld：找不到 -lactivator 的库

为什么编译不出来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T02:35:47.310

解决了！我将 libactivator.dylib 从 usr/lib/ 放到 var/theos/lib/（Mac 上的 opt/theos/），然后尝试编译它，瞧！我可以编译它。还要注意一件事，如果您正在创建一个激活器侦听器，请制作一个像调整一样的 plist，它会过滤跳板（取决于您的调整）并将必要的框架也添加到您的 makefile 中！

# php - 使用 PHP 从 PDF 中提取文本

> ID：11951680
> 
> 赞同：0
> 
> 时间：2012-08-14T11:51:19.943
> 
> 标签：php, pdf, imagick

我正在使用 Imagick 库从每个 PDF 生成图像，尽管我也需要一些方法来从每个页面中获取文本。Imagick 中是否有任何选项或者我应该使用另一个 PHP 库？

# regex - 匹配单括号 (])，但忽略双括号 (]])

> ID：11951681
> 
> 赞同：-2
> 
> 时间：2012-08-14T11:51:25.283
> 
> 标签：regex

所以，我试图在任一位置找到单括号（注意粗体单括号）：

[[ [http://www.example.com/](http://www.example.com/) **[** [[图片：http://www.example.com/images/logo.gif]] **]** ]]

请记住，我可能有如下数据：[[ [http://www.example.com/](http://www.example.com/) **]** ]]

或： [[ **[** [http://www.example.com/](http://www.example.com/) ]]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:57:40.727

如果实施，则使用前瞻和后瞻断言

在 perl 中：`/(?<!\[)\[(?!\[)/`

有关详细信息，请参阅[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

# java - netty：我可以删除不需要的功能吗？

> ID：11951683
> 
> 赞同：0
> 
> 时间：2012-08-14T11:51:43.707
> 
> 标签：java, networking, netty

我需要在 tcp/ip 之上实现一个协议。3.5.3 netty jar 为 1.1MB。我希望它更小。

Netty 包含我不需要的功能，例如 HTTP Tunnel、In-VM Pipe、HTTP、WebSocket、SSL、StartTLS、Google ProtBuf、zlib/gzip 压缩、大文件传输、RTSP。

我可以摆脱这些以使 netty jar 更小吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:06:18.863

你可以

*   下载源
*   删除你不想要的类/方法。
*   检查您需要的所有测试仍然通过
*   建立一个新的罐子。

每次升级 netty 版本时都必须这样做。

鉴于 1.1 MB 的磁盘成本几乎为零，我怀疑这是否值得。1.1 MB 在 a 上花费 0.005 美分的 HDD 磁盘空间，在 SSD 上花费 0.09 美分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:16:38.570

您可以使用 proguard 工具：

*   [http://proguard.sourceforge.net/](http://proguard.sourceforge.net/)

我认为可以将 jar 缩小到您使用的功能，但您需要正确配置它。

但是如果你成功了，方法应该比修改原始 jar 更干净。

# java - Itext 更新具有相同字段名称的多个字段的 PDF 表单

> ID：11951685
> 
> 赞同：0
> 
> 时间：2012-08-14T11:51:50.540
> 
> 标签：java, pdf, itext

我有一个要求，我必须使用 Itext 在 PDF 表单中填充值。

我拥有的表单有多个具有相同字段名称的字段。概念是在 PDF 表单字段名称常见的情况下填充相同的值。

因此，如果有 2 个或多个名称为 txtSysTime 的字段，则代码应在所有字段中填写系统时间。

我的问题基本上是

1.  Itext 是否完全支持这种功能？
2.  如果它是可能的，那么我们怎么能做同样的事情。

我正在使用以下代码尝试相同的操作：

```
PdfReader pdfTemplate = new PdfReader(inputFilePath);
FileOutputStream fileOutputStream = new FileOutputStream(outputFilePath);
ByteArrayOutputStream out = new ByteArrayOutputStream();
PdfStamper stamper = new PdfStamper(pdfTemplate, fileOutputStream);
stamper.setFormFlattening(true);
stamper.getAcroFields().setField("TextBox", "value filled"); 
```

使用此代码，第一个同名字段中的值被正确填充，但其余部分为空白。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T08:25:03.840

您可能想要做的是使用 pdf 表单字段的“自动填充”功能？因此，您填写一个字段，并且具有该字段名的所有其他字段将自动填充相同的内容。**这是完全可能的。**（您可能在 adobe reader / acrobat 中尝试过）

但是你必须区分（技术上）：这些表单域有一个“数据”表示和几个小部件（几个视觉表示）。因此，您只需要用某个值填充该字段（它的小部件有多个坐标）：

```
boolean successful = stamper.getAcroFields().setField("TextBox", "some value"); 
```

如果您随后在 PDF 查看器软件（如 adobe reader）中打开该 PDF，则所有字段都具有相同的内容。出于好奇，你为什么用 平铺田地`setFormFlattening(true)`？然后您的所有字段都将被删除并展平。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T09:50:31.757

itext 正在使用小部件注释，对于具有相同名称的多个字段..表示重复字段，名称将是一个但坐标将是多个。

下面的代码会帮助你..

```
 InputStream pdfFileStream = new FileInputStream(file);
        PdfReader reader = new PdfReader(pdfFileStream);
        PdfStamper stamper = null;

        try {
            stamper = new PdfStamper(reader, tempOS, '\0');

        } catch (DocumentException e1) {
            e1.printStackTrace();
        }

        AcroFields form = stamper.getAcroFields();
        Object[] keys = form.getFields().keySet().toArray();

        for (Entry<String, AcroFields.Item> entry : fields.entrySet()) {

        String docFieldName = entry.getKey();
            List<FieldPosition> fieldPosition = form.getFieldPositions(docFieldName); // for multiple filed with same name  size and co ordinate  will more then 1..
            for(int i=0;i<fieldPosition.size();i++) {
            Rectangle position = fieldPosition.get(i).position;
            float left = position.getLeft();
            float top = position.getTop();
            float width = position.getWidth();
            float height = position.getHeight();
            int currentPage = fieldPosition.get(i).page;
            ........................here you can set value to list..

            }

        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-10T13:30:04.700

实际上，只要这些字段位于不同的页面上，您**就可以在一个 PDF 表单中拥有多个具有相同名称的字段。**我目前正在寻找解决此问题的方法...

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-12T07:21:28.007

PDF 表单不支持具有相同名称的 2 个字段。要求无效

# c# - OOP：使用 C# 在主方法中实例化包含控制台方法的类？

> ID：11951688
> 
> 赞同：0
> 
> 时间：2012-08-14T11:52:01.940
> 
> 标签：c#, oop

在下面的 C# 代码中，我试图通过在`consoleread`方法中实例化它来执行方法中的代码`Main`。我是 OOP 的完整初学者，它似乎有效，但我只是想确定这是否是正确的方法？

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO.Ports;

namespace ConsoleApplication1
{
    class ConsoleRead
    {
        public void consoleread()
        {
            string[] sPorts = SerialPort.GetPortNames();
            foreach (string port in sPorts)
            {
                var serialPort = new SerialPort();
                serialPort.PortName = port;
                serialPort.Open();
                serialPort.WriteLine("ATI");
                var message = Console.ReadLine();
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            ConsoleRead c = new ConsoleRead();
            c.consoleread();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:57:24.843

是的，它是正确的方式。但是您在其中遇到任何问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:59:25.590

是的，没关系。您有一个带有实例方法的类，因此您实例化该类并针对该实例调用该方法。

现在，对于“这是正确的做法”这个问题，如果没有更多背景知识，这有点难以回答。在您的特定示例中，如果您的应用程序的唯一目标是在串行端口上编写一些字符串而没有任何可重用性问题，那么创建一个仅实例化一次的类可能是无用的，您应该将代码从您的`consoleread`方法移动到`main`方法.

# android - Android ArrayList 值

> ID：11951690
> 
> 赞同：-1
> 
> 时间：2012-08-14T11:52:02.597
> 
> 标签：android

我有一个 int n ，它选择一个随机数。每次我将 n 保存在 arraylist 数组中。现在我想比较一下 int n 是否等于最后两个随机数。例如，如果我们有 `2 - 3 - 5- 3`，它应该选择 3 作为重复的 int。我应该这样比较它们吗？

```
if(n == array.size()-2) { 
} 
```

它不像这样工作。问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:54:20.360

```
if(n == array.get(array.size()-2)) { 
//some code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:58:19.863

要比较最后**两个整数**，请使用：

```
if(n == array.get(array.size()-2) || n == array.get(array.size()-1)) { 
     //do the Logic here if they are Same
} 
```

# c - 在 Visual Studio 2010 中编译 C 不创建 .EXE 文件

> ID：11951694
> 
> 赞同：0
> 
> 时间：2012-08-14T11:52:33.903
> 
> 标签：c, compilation

我能够在 Visual Studio 2008 中调试 C 程序并构建它。但是，构建过程似乎并没有在它构建的文件夹中留下 .exe。无论我选择“发布”还是“调试”。.exe 可以发送到其他地方吗？我怎么知道？

项目主文件夹下Debug文件夹的内容：
`cl.command.1.tlog
CL.read.1.tlog
CL.write.1.tlog
ConsoleApp.Build.CppClean.log
ConsoleApp.exe.embed.manifest
ConsoleApp.exe.embed.manifest.res
ConsoleApp.exe.intermediate.manifest
ConsoleApp.lastbuildstate
ConsoleApp.log
ConsoleApp.obj
ConsoleApp_manifest.rc
link-cvtres.read.1.tlog
link-cvtres.write.1.tlog
link.1504-cvtres.read.1.tlog
link.1504-cvtres.write.1.tlog
link.1504.read.1.tlog
link.1504.write.1.tlog
link.command.1.tlog
link.read.1.tlog
link.write.1.tlog
mt.command.1.tlog
mt.read.1.tlog
mt.write.1.tlog
rc.command.1.tlog
rc.read.1.tlog
rc.write.1.tlog
stdafx.obj
vc100.idb
vc100.pdb`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:01:31.797

右键单击项目节点并打开属性页：-

在配置属性的常规节点中。
在那里你会看到两个字段：-

1.  输出目录
2.  目标扩展。如果目标扩展名是 .exe，那么一切都很好。
    查看输出目录，您将找到可执行文件。

编辑：-您正在寻找错误的地方。你必须在这里看到（一个例子）： -

```
C:\Documents and Settings\USER\My Documents\Visual Studio 2010\Projects\C\The_c\Debug 
```

你在这里看到

```
C:\Documents and Settings\USER\My Documents\Visual Studio 2010\Projects\C\The_c\The_c\Debug 
```

即当前目录之上的两个目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:55:31.880

您是否尝试过检查项目属性中的输出路径？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-12T17:52:24.603

当（由于某种原因）在任务管理器中找到多个 MSBuild.exe 时，我遇到了这个错误。我把他们都杀了，它又起作用了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-22T15:16:17.463

我发现这是因为当你制作一个新的控制台应用程序时，Visual Studio 构建目录结构的方式反直觉。你得到两个文件夹和两个调试文件夹，即

```
├───MakeSubscriber
│   ├───Debug
│   ├───ipch
│   │   └───makesubscriber-67e243a
│   └───MakeSubscriber
│       └───Debug 
```

所以所有 tlog 和中间文件都放在一个 Debug 文件夹中，而 exe、ilk 和 pdb 放在另一个文件夹中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-20T01:26:43.433

我花了大约 3 个小时试图弄清楚这一点，终于明白了：您会注意到在项目文件中，有一个调试文件夹。在这个文件夹中通常应该是

```
an .exe file, 
a .ilk file, 
and a .pdb file. 
```

这些对我来说是缺失的。我如何修复它：

我从另一个项目的调试文件夹中复制了这 3 个文件并将它们粘贴到我的项目的调试文件夹中。然后我重命名它们以匹配我的 C++ 文件 (.cpp) 的名称。然而，这还不够，您必须像这样保存它，然后关闭 Visual Studio，然后从 Windows 资源管理器再次打开项目文件。

那是为我做的！最后！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-01T07:28:47.333

我能够为全班解决这个问题。问题是在清空 Win32 控制台应用程序然后创建 .cpp 时，程序没有将 .cpp 添加到 .cpp 文件名的末尾。当我手动添加它时，例如 practice.cpp 而不是仅仅练习，它创建了 .exe 文件。它适用于遇到问题的每个人。

# solrj - 嵌入式 Solr DIH

> ID：11951695
> 
> 赞同：0
> 
> 时间：2012-08-14T11:52:37.150
> 
> 标签：solrj, dih

谁能告诉我如何在 Solrj 中配置 Embedded Solr DIH？我试过这个..

`SolrQuery qry = new SolrQuery(); qry.setQueryType("/import"); qry.setParam("command", "full-import"); qry.setParam("clean", false); embeddedSolrServer.query(qry);`

它停在这一点上。

> 1437 [main] INFO org.apache.solr.core.CoreContainer - 注册核心：main
> 
> 1468 [Thread-1] INFO org.apache.solr.handler.dataimport.DataImporter - 开始完全导入
> 
> 1468 [main] INFO org.apache.solr.core.SolrCore - [main] webapp=null path=/import params={qt=%2Fimport&command=full-import&clean=false} status=0 QTime=15

在此之后，我希望在 Solr HTTP Server 中得到类似的东西：

> 阅读 import.properties
> 
> org.apache.solr.handler.dataimport.JdbcDataSource$1 调用为带有 URL 的实体 ID 创建连接：jdbc:mysql://localhost/solrdb
> 
> org.apache.solr.handler.dataimport.JdbcDataSource$1 调用

等等...

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:58:42.457

你可以这样做：

```
URL url = new URL(completeUrl);
HttpURLConnection conn = (HttpURLConnection)url.openConnection(); 
```

看看我是怎么做到[的](http://code.google.com/p/solr-data-import-scheduler/source/browse/trunk/org/apache/solr/handler/dataimport/scheduler/HttpPostScheduler.java#132)。

# java - 是否可以从 java 更改 CMD 目录？如果是这样，怎么做？（如 CMD 中的“CD”）

> ID：11951697
> 
> 赞同：2
> 
> 时间：2012-08-14T11:52:41.000
> 
> 标签：java, directory, cmd

我制作了 2 个 .java 文件和 1 个 .bat 文件。让我们将第一个 .java 文件称为“First.java”，将第二个称为“Second.java”。批处理文件是“compile.bat”。假设 First.java 位于“.../Desktop/temp/First.java”中，而 Second.java 与批处理文件（“.. ./Desktop/Test/compile.bat")。现在，compile.bat 包含以下代码：

```
cmd /c "cd C:\blahblah\temp && javac First.java" 
```

我在 CMD 和双击中都对其进行了测试，它可以工作。我想使用以下代码从 Second.java 编译 First.java：

```
Process p1 = Runtime.getRuntime().exec("C:\\blahblah\\compile.bat"); 
```

（我必须导航到目录，因为 CMD 的默认目录与 compile.bat 的目录不同）。这行不通。似乎它只是忽略了代码。正如我所说，我尝试了很多不同的东西，我什至尝试使用其他一些应该改变目录的库。请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:39:40.743

最简单的方法：你应该使用`start`. 也可以设置工作目录，看这个例子：

```
Runtime r=Runtime.getRuntime();
    r.exec("cmd.exe /c start compile.bat",         //path to executable
            null,                                  // env vars, null means pass parent env
            new File("C:\\blahblah"));              // working directory 
```

附加信息：如果您不想在它的单独控制台中启动您的进程（这就是`start`您可以做的）`r.exec("cmd.exe /c compile.bat");`，但因为它在其父控制台的上下文中执行，您**必须**等待`p.waitFor()`或读取它的输入流 - 否则它可能会静默失败。这将运行并显示您的命令的输出：

```
Process p=r.exec("cmd.exe /c compile.bat",         //path to executable
            null,                                  // env vars, null means pass parent env
            new File("C:\\blahblah"));

    InputStream is=p.getInputStream();
    BufferedReader br= new BufferedReader(new InputStreamReader(is));

    String line=new String();
    while ((line=br.readLine())!=null) System.out.println (line); 
```

**同样从 1.5 开始， ProcessBuilder 是启动进程的首选方式**（来自 Java doc）：

> java.lang.进程
> 
> 创建进程的方法可能不适用于某些本机平台上的特殊进程，例如本机窗口进程、守护进程、Microsoft Windows 上的 Win16/DOS 进程或 shell 脚本。
> 
> 默认情况下，创建的子进程没有自己的终端或控制台。它的所有标准I/O（即stdin、stdout、stderr）操作都将被重定向到父进程，在那里可以通过使用getOutputStream()、getInputStream() 和getErrorStream() 方法获得的流来访问它们。父进程使用这些流向子进程提供输入并从子进程获取输出。由于部分原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。
> 
> 如果需要，也可以使用 ProcessBuilder 类的方法重定向子进程 I/O。
> 
> 当没有更多对 Process 对象的引用时，子进程不会被终止，而是子进程继续异步执行。
> 
> 不要求由 Process 对象表示的进程相对于拥有该 Process 对象的 Java 进程异步或并发执行。
> 
> 从 1.5 开始，ProcessBuilder.start() 是创建流程的首选方式。
> 
> 自：JDK1.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:03:23.373

如果这是来自 Java 的直接引用，那么您将缺少末尾的分号、字符串中必要的转义字符以及 cmd 命令以向 Windows 指示它需要 cmd.exe 才能启动它：

```
Process p1 = Runtime.getRuntime().exec("cmd C:\\blahblah\\compile.bat"); 
```

您还可以在 cmd 之后添加 /c 以在进程完成后立即关闭进程，和/或 start 指示它应该在另一个窗口中启动。

# android - 无法从android中的sqlite中清除表格

> ID：11951698
> 
> 赞同：0
> 
> 时间：2012-08-14T11:52:45.830
> 
> 标签：android, database, sqlite

我使用服务每 5 分钟更新一次服务器数据表，我想清除表中的所有数据，然后从服务器更新新数据，所以我在更新表以清除数据之前使用此代码：

```
public boolean deleteServerData() {
    SQLiteDatabase db = this.getWritableDatabase();
    if (getServerDataCount() > 0) {
        if (db.delete(TABLE_SERVER_CONTACTS, null, null) > 0)
            return true;
        else
            return false;
    } else
        return true;
} 
```

但是当在删除之前计算表中的行数时它会给我任何数字说“13”并且在删除它之后给我零但是当我在表数据中看到它仍然存在并且更新的数据被附加到表中所以表不能彻底清除数据。

如果有任何解决方案或我在代码中犯了任何错误，请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:58:56.577

试试**execSQL**：

```
db.execSQL("DELETE FROM "+ TABLE_SERVER_CONTACTS); 
```

# python - Python 2.7 Itertools 星图

> ID：11951699
> 
> 赞同：1
> 
> 时间：2012-08-14T11:52:50.917
> 
> 标签：python, map, itertools

有一个函数，`func`它需要*两个*字符串参数，第一个有效，但根据 itertools 文档，第二个不应该也有效吗？该函数当前打印一个随机字符串，作为回报，但第二次没有打印任何内容

```
func(*("dog", "cat")) //works

itertools.starmap(func, [("dog", "cat")]) //fails without error message, nothing gets printed to screen 
```

也许晚上太晚（或太早），我在这里错过了一个明显的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:55:08.190

`itertools.starmap`返回一个迭代器；要真正让它执行，您需要遍历它，例如使用`list`：

```
list(itertools.starmap(func, [("fall", "2007")])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:56:46.747

问题是您的`starmap()`函数调用的结果返回一个迭代器（即`itertools.starmap`对象），而不是一个值列表本身。

您的函数工作正常，但您应该通过迭代来逐个获取结果：

```
for result in itertools.starmap(func, [("fall", "2007")]):
    # print result here or do some other stuff 
```

要在开始时获取结果列表（如果您不需要延迟结果获取） - 将您的迭代器调整为列表：

```
list(itertools.starmap(func, [("fall", "2007")])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-11T01:19:20.550

要在开始时获取结果列表（如果您不需要延迟结果获取） - 将您的迭代器调整为`list`（在 Python3 中）：

```
>>> list(starmap(lambda x,y:x**y, [(1,2),(3,4)]))
[1, 81] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-09T18:38:32.490

就个人而言，我只是避免星图。相反，我使用以下自制函数

```
def one_arg(f) :
    return lambda x : f(*x) 
```

并将其应用于func。

# php - Zend - 从应用程序文件夹中移动文件

> ID：11951700
> 
> 赞同：1
> 
> 时间：2012-08-14T11:52:55.683
> 
> 标签：php, file, zend-framework, phpexcel

我正在使用 PHPExcel 在 Zend Framework 项目中创建 Excel 电子表格。

spreadsheat 是在我的控制器中创建的，PHPExcel_Writer_Excel2007 类的保存函数中似乎没有参数可以将文件保存在其他位置。

如果我错了，请纠正我，但我认为我不能使存储在应用程序文件夹中的文件可供下载，因为只有 public_html 文件夹中的文件是可访问的？

如何将文件从 /application/admin/controllers 文件夹移动到 /public_html/files 文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:57:06.933

当您在 excel 对象上调用 save 时，请提供带有文件名的路径

或者也可以将路径存储在变量中并使用。

```
$object->save('/path/to/777/dir/file.xls'); 
```

您必须有权写入该文件夹。

# python - 在 Python 中解析用户提供的数学公式的安全方法

> ID：11951701
> 
> 赞同：27
> 
> 时间：2012-08-14T11:52:59.430
> 
> 标签：python

是否有 Python 的数学表达式解析器 + 求值器？

我不是第一个问这个问题的人，但答案通常指向`eval()`. 例如，可以这样做：

```
>>> safe_list = ['math','acos', 'asin', 'atan', 'atan2', 'ceil', 'cos', 'cosh', 'degrees', 'e', 'exp', 'fabs', 'floor', 'fmod', 'frexp', 'hypot', 'ldexp', 'log', 'log10', 'modf', 'pi', 'pow', 'radians', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'abs']
>>> safe_dict = dict([ (k, locals().get(k, None)) for k in safe_list ])
>>> s = "2+3"
>>> eval(s, {"__builtins__":None}, safe_dict)
5 
```

但这[并不安全](http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)：

```
>>> s_badbaduser = """
... (lambda fc=(
...     lambda n: [
...         c for c in 
...             ().__class__.__bases__[0].__subclasses__() 
...             if c.__name__ == n
...         ][0]
...     ):
...     fc("function")(
...         fc("code")(
...             0,0,0,0,"KABOOM",(),(),(),"","",0,""
...         ),{}
...     )()
... )()
... """
>>> eval(s_badbaduser, {"__builtins__":None}, safe_dict)
Segmentation fault 
```

此外，`eval`用于解析和评估数学表达式对我来说似乎是错误的。

我找到[了 PyMathParser](http://www.bestcode.com/html/evaluate_math_expressions_pyth.html)，但它也在幕后使用`eval`并且没有更好的：

```
>>> import MathParser
>>> m=MathParser.PyMathParser()
>>> m.expression = s_badbaduser
>>> m.evaluate();
Segmentation fault 
```

是否有一个库可以在不使用 Python 解析器的情况下解析和评估数学表达式？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T12:31:52.457

查看[Paul McGuire 的 pyparsing](https://github.com/pyparsing/pyparsing)。[他为算术表达式](https://github.com/pyparsing/pyparsing/blob/master/examples/fourFn.py)编写了通用解析器和语法：

```
from __future__ import division
import pyparsing as pyp
import math
import operator

class NumericStringParser(object):
    '''
    Most of this code comes from the fourFn.py pyparsing example
    http://pyparsing.wikispaces.com/file/view/fourFn.py
    http://pyparsing.wikispaces.com/message/view/home/15549426
    __author__='Paul McGuire'

    All I've done is rewrap Paul McGuire's fourFn.py as a class, so I can use it
    more easily in other places.
    '''
    def pushFirst(self, strg, loc, toks ):
        self.exprStack.append( toks[0] )
    def pushUMinus(self, strg, loc, toks ):
        if toks and toks[0] == '-':
            self.exprStack.append( 'unary -' )
    def __init__(self):
        """
        expop   :: '^'
        multop  :: '*' | '/'
        addop   :: '+' | '-'
        integer :: ['+' | '-'] '0'..'9'+
        atom    :: PI | E | real | fn '(' expr ')' | '(' expr ')'
        factor  :: atom [ expop factor ]*
        term    :: factor [ multop factor ]*
        expr    :: term [ addop term ]*
        """
        point = pyp.Literal( "." )
        e     = pyp.CaselessLiteral( "E" )
        fnumber = pyp.Combine( pyp.Word( "+-"+pyp.nums, pyp.nums ) + 
                           pyp.Optional( point + pyp.Optional( pyp.Word( pyp.nums ) ) ) +
                           pyp.Optional( e + pyp.Word( "+-"+pyp.nums, pyp.nums ) ) )
        ident = pyp.Word(pyp.alphas, pyp.alphas+pyp.nums+"_$")       
        plus  = pyp.Literal( "+" )
        minus = pyp.Literal( "-" )
        mult  = pyp.Literal( "*" )
        div   = pyp.Literal( "/" )
        lpar  = pyp.Literal( "(" ).suppress()
        rpar  = pyp.Literal( ")" ).suppress()
        addop  = plus | minus
        multop = mult | div
        expop = pyp.Literal( "^" )
        pi    = pyp.CaselessLiteral( "PI" )
        expr = pyp.Forward()
        atom = ((pyp.Optional(pyp.oneOf("- +")) +
                 (pi|e|fnumber|ident+lpar+expr+rpar).setParseAction(self.pushFirst))
                | pyp.Optional(pyp.oneOf("- +")) + pyp.Group(lpar+expr+rpar)
                ).setParseAction(self.pushUMinus)       
        # by defining exponentiation as "atom [ ^ factor ]..." instead of 
        # "atom [ ^ atom ]...", we get right-to-left exponents, instead of left-to-right
        # that is, 2^3^2 = 2^(3^2), not (2^3)^2.
        factor = pyp.Forward()
        factor << atom + pyp.ZeroOrMore( ( expop + factor ).setParseAction(
            self.pushFirst ) )
        term = factor + pyp.ZeroOrMore( ( multop + factor ).setParseAction(
            self.pushFirst ) )
        expr << term + pyp.ZeroOrMore( ( addop + term ).setParseAction( self.pushFirst ) )
        self.bnf = expr
        # map operator symbols to corresponding arithmetic operations
        epsilon = 1e-12
        self.opn = { "+" : operator.add,
                "-" : operator.sub,
                "*" : operator.mul,
                "/" : operator.truediv,
                "^" : operator.pow }
        self.fn  = { "sin" : math.sin,
                "cos" : math.cos,
                "tan" : math.tan,
                "abs" : abs,
                "trunc" : lambda a: int(a),
                "round" : round,
                # For Python3 compatibility, cmp replaced by ((a > 0) - (a < 0)). See
                # https://docs.python.org/3.0/whatsnew/3.0.html#ordering-comparisons
                "sgn" : lambda a: abs(a)>epsilon and ((a > 0) - (a < 0)) or 0}
        self.exprStack = []
    def evaluateStack(self, s ):
        op = s.pop()
        if op == 'unary -':
            return -self.evaluateStack( s )
        if op in "+-*/^":
            op2 = self.evaluateStack( s )
            op1 = self.evaluateStack( s )
            return self.opn[op]( op1, op2 )
        elif op == "PI":
            return math.pi # 3.1415926535
        elif op == "E":
            return math.e  # 2.718281828
        elif op in self.fn:
            return self.fn[op]( self.evaluateStack( s ) )
        elif op[0].isalpha():
            return 0
        else:
            return float( op )
    def eval(self, num_string, parseAll = True):
        self.exprStack = []
        results = self.bnf.parseString(num_string, parseAll)
        val = self.evaluateStack( self.exprStack[:] )
        return val

nsp = NumericStringParser()
print(nsp.eval('1+2'))
# 3.0

print(nsp.eval('2*3-5'))
# 1.0 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T12:51:02.600

我建议使用[`ast.parse`](http://docs.python.org/library/ast#ast.parse)解析树然后将其列入白名单。

```
tree = ast.parse(s, mode='eval')
valid = all(isinstance(node, whitelist) for node in ast.walk(tree))
if valid:
    result = eval(compile(tree, filename='', mode='eval'),
                  {"__builtins__": None}, safe_dict) 
```

这里`whitelist`可能是这样的：

```
whitelist = (ast.Expression, ast.Call, ast.Name, ast.Load,
             ast.BinOp, ast.UnaryOp, ast.operator, ast.unaryop, ast.cmpop,
             ast.Num,
            ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-12T01:50:28.390

我在这里建立了一些帖子来创建一个评估器类。还使用 了我基本上重写为类对象的[eval 示例。](https://stackoverflow.com/a/9558001/3457624)

```
import sys
import ast
import operator as op
import abc

import math

class IEvaluator:
    __metaclass__ = abc.ABCMeta

    @abc.abstractmethod
    def eval_expr(cls, expr, subs):  # @NoSelf
        '''IMPORTANT: this is class method, overload it with @classmethod!
        Evaluate an expression given in the expr string.

        :param expr: str. String expression.
        :param subs: dict. Dictionary with values to substitute.
        :returns: Evaluated expression result.
        '''

class Evaluator(IEvaluator):
    '''Generic evaluator for a string expression. Uses ast and operator
    modules. The expr string is parsed with ast resulting in a node tree.
    Then the node tree is recursively traversed and evaluated with operations
    from the operator module.

    :implements: IEvaluator
    '''

    @classmethod
    def _get_op(cls, node):
        '''Get the operator corresponding to the node.
        :param node: Operator node type with node.op property.
        '''
        # supported operators
        operators = {
            ast.Add: op.add,
            ast.Sub: op.sub,
            ast.Mult: op.mul,
            ast.Div: op.truediv,
            ast.Pow: op.pow,
            ast.BitXor: op.xor,
            ast.USub: op.neg
        }
        return operators[type(node.op)]

    @classmethod
    def _get_op_fun(cls, node):
        # fun_call = {'sin': math.sin, 'cos': math.cos}[node.func.id]
        fun_call = getattr(math, node.func.id)
        return fun_call

    @classmethod
    def _num_op(cls, node, subs):
        '''Return the value of the node.
        :param node: Value node type with node.n property.
        '''
        return node.n

    @classmethod
    def _bin_op(cls, node, subs):
        '''Eval the left and right nodes, and call the binary operator.
        :param node: Binary operator with node.op, node.left, and node.right
            properties.
        '''
        op = cls._get_op(node)
        left_node = cls.eval(node.left, subs)
        right_node = cls.eval(node.right, subs)
        return op(left_node, right_node)

    @classmethod
    def _unary_op(cls, node, subs):
        '''Eval the node operand and call the unary operator.
        :param node: Unary operator with node.op and node.operand properties.
        '''
        op = cls._get_op(node)
        return op(cls.eval(node.operand, subs))

    @classmethod
    def _subs_op(cls, node, subs):
        '''Return the value of the variable represented by the node.
        :param node: Name node with node.id property to identify the variable.
        '''
        try:
            return subs[node.id]
        except KeyError:
            raise TypeError(node)

    @classmethod
    def _call_op(cls, node, subs):
        arg_list = []
        for node_arg in node.args:
            arg_list.append(cls.eval(node_arg, subs))
        fun_call = cls._get_op_fun(node)
        return fun_call(*arg_list)

    @classmethod
    def eval(cls, node, subs):
        '''The node is actually a tree. The node type i.e. type(node) is:
            ast.Num, ast.BinOp, ast.UnaryOp or ast.Name.
        Depending on the node type the node will have the following properties:
            node.n - Nodes value.
            node.id - Node id corresponding to a key in the subs dictionary.
            node.op - operation node. Type of node.op identifies the operation.
                type(node.op) is one of ast.Add, ast.Sub, ast.Mult, ast.Div,
                ast.Pow, ast.BitXor, or ast.USub.
            node.left or node.right - Binary operation node needs to have links
                to left and right nodes.
            node.operand - Unary operation node needs to have an operand.

        The binary and unary operations call eval recursively.
        '''
        # The functional logic is:
        # if isinstance(node, ast.Num):  # <number>
        #     return node.n
        # elif isinstance(node, ast.BinOp):  # <left> <operator> <right>
        #     return operators[type(node.op)](eval_(node.left, subs),
        #                                     eval_(node.right, subs))
        # elif isinstance(node, ast.UnaryOp):  # <operator> <operand> e.g., -1
        #     return operators[type(node.op)](eval_(node.operand, subs))
        # else:
        #     try:
        #         return subs[node.id]
        #     except KeyError:
        #         raise TypeError(node)

        node_type = type(node)

        return {
            # Value in the expression. Leaf.
            ast.Num: cls._num_op,  # <number>

            # Bin operation with two operands.
            ast.BinOp: cls._bin_op,  # <left> <operator> <right>

            # Unary operation such as neg.
            ast.UnaryOp: cls._unary_op,  # <operator> <operand> e.g., -1

            # Sub the value for the variable. Leaf.
            ast.Name: cls._subs_op,  # <variable>

            ast.Call: cls._call_op

        }[node_type](node, subs)

    @classmethod
    def eval_expr(cls, expr, subs=None):
        '''Evaluates a string expression. The expr string is parsed with ast
        resulting in a node tree. Then the eval method is used to recursively
        traverse and evaluate the nodes. Symbolic params are taken from subs.

        :Example:
            >>> eval_expr('2^6')
            4
            >>> eval_expr('2**6')
            64
            >>> eval_expr('1 + 2*3**(4^5) / (6 + -7)')
            -5.0
            >>> eval_expr('x + y', {'x': 1, 'y': 2})
            3

        :param expr: str. String expression.
        :param subs: dict. (default: globals of current and calling stack.)
        :returns: Result of running the evaluator.

        :implements: IEvaluator.eval_expr

        '''
        # ref: https://stackoverflow.com/a/9558001/3457624
        if subs is None:
            # Get the globals
            frame = sys._getframe()
            subs = {}
            subs.update(frame.f_globals)

            if frame.f_back:
                subs.update(frame.f_back.f_globals)

        expr_tree = ast.parse(expr, mode='eval').body
        return cls.eval(expr_tree, subs) 
```

这里有些例子：

```
import sympy

from eval_sympy import Evaluator

# test case...
x = sympy.Symbol('x')
y = sympy.Symbol('y')

expr = x * 2 - y ** 2
# z = expr.subs({x:1, y:2})

str_expr = str(expr)
print str_expr

x = 1
y = 2
out0 = Evaluator.eval_expr(str_expr)
print '(x, y): ({}, {})'.format(x, y)
print str_expr, ' = ', out0

subs1 = {'x': 1, 'y': 2}
out1 = Evaluator.eval_expr(str_expr, subs1)
print 'subs: ', subs1
print str_expr, ' = ', out1

sin_subs = {'x': 1, 'y': 2}
sin_out = Evaluator.eval_expr('sin(log10(x*y))', sin_subs)
print 'sin_subs: ', sin_subs
print 'sin(log10(x*y)) = ', sin_out 
```

结果

```
2*x - y**2

(x, y): (1, 2)
2*x - y**2  =  -2

subs:  {'y': 2, 'x': 1}
2*x - y**2  =  -2

sin_subs:  {'y': 2, 'x': 1}
sin(log10(x*y)) =  0.296504042171 
```

# jquery - 追加并仅选择追加的元素

> ID：11951703
> 
> 赞同：0
> 
> 时间：2012-08-14T11:53:04.427
> 
> 标签：jquery

我正在尝试为附加元素触发 keyup 函数，但具有相同类的所有元素都在接收事件。

```
this.ul.append('<li><div class="suggest_tag addSectionTag"><span class="LabelInput"><input type="text" class=""><span class="LabelInput_Label">Adiciona um título...</span></span></div></li>').hide() 
```

这是我的简单代码。这将隐藏 this.ul = $('#testing ul') 选择器内的所有 LI 元素。我只是希望它隐藏附加的元素。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:56:10.070

假设您正在使用 jquery：

```
this.ul.append('<li><div class="suggest_tag addSectionTag"><span class="LabelInput"><input type="text" class=""><span class="LabelInput_Label">Adiciona um título...</span></span></div></li>');
this.ul.find('li:last').hide(); 
```

# ear - 在 EAR 中添加具有相同 jar 和公共持久性单元的多重战争

> ID：11951716
> 
> 赞同：2
> 
> 时间：2012-08-14T11:53:51.660
> 
> 标签：ear

我需要有关 EAR 设计问题的帮助。我有 WAR 文件的工作知识，但在处理 EAR 文件时我是新手。

我有 4 个基于 Maven 的项目 -

```
common (JAR, containing common utilities, domain object and JPA/Hibernate based DAOs)
core (WAR, dependent on the common project)
front (WAR, dependent on the common project)
back (WAR, dependent on the common project) 
```

我只有 3 个主要的 WAR 项目，它们使用几乎相同的 JAR 文件集（Spring、Hibernate、Struts 等）和 DAO 层。

问题 1：如何使用 Eclipse IDE 将我的项目打包到 EAR 中？

问题 2：如何确保我没有相同 JAR 文件的重复副本？

问题 3：如何让我的 DAO 层（Hibernate）以非常有效的方式被所有三个 Web 项目共享？

问题4：这是一个好的设计吗？

如果您能提供一些帮助，我将非常感激。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T08:43:24.253

简单的方法是使用 Maven 在 maven-ear-plugin 上查看：[文档here](http://maven.apache.org/plugins/maven-ear-plugin/)

在您的情况下，您必须将依赖项添加到您耳朵中的公共 jar 中，并将依赖项添加到您的战争中的公共 jar 中作为“提供”。然后将 webmodules 添加到您的耳朵并指定 defaultLibBundleDir 之类的`<defaultLibBundleDir>/lib</defaultLibBundleDir>`

# css - 在css中发出多个背景图像（3images）

> ID：11951717
> 
> 赞同：0
> 
> 时间：2012-08-14T11:53:53.870
> 
> 标签：css

我在我的网站正文的背景中添加了三张图片。其中两张效果很好（其中一张是重复的，但第三张似乎不起作用。尝试了很多搜索，但什么也没找到 [http://ixia.x90x .net/urdu.php](http://ixia.x90x.net/urdu.php)

```
 body 
{
    background-image:     url(../_images/urdulower.png),   url(../_images/urduhead.png) ,   url(../_images/urdurepeating.png);
    background-position:  left bottom,                     left top,                        left 118px;
    background-repeat:    no-repeat,                       no-repeat,                       repeat-y; 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:17:58.843

实际上，它有效。但是，您的重复图像（http://ixia.x90x.net/_assets/_images/urdurepeating.png）不透明，因此覆盖了底部图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:10:06.173

采用

```
z-index:20; 
```

最高值将在前面。

# javascript - 在 Ember 1.0.0 pre 中路由时

> ID：11951720
> 
> 赞同：1
> 
> 时间：2012-08-14T11:54:11.053
> 
> 标签：javascript, ember.js

我正在尝试使用以下内容在我的 ember 应用程序中创建路由：

```
app= Ember.Application.create({
        ApplicationController: Ember.ObjectController.extend(),
        ApplicationView: Ember.View.extend(),

        Router: Ember.Router.extend({
            root: Ember.Route.extend({
                route: '/',

                aRoute: Ember.Route.extend({
                    route: '/routeA'
                }),
                bRoute: Ember.Route.extend({
                    route: '/routeB'
                })
            })
        })
});

app.initialize(); 
```

但是当打开页面时出现以下错误：

```
Uncaught Error: assertion failed: Could not find state for path 
```

在深入研究 ember 的源代码时，我永远不会设置位置的“哈希”属性 - 应该在浏览器触发某种哈希事件时设置。

我在正确的轨道上，我该如何解决这个问题？​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:04:42.887

只有叶子路由是可路由的，当输入'/'时，路由器不知道自己要去哪里。我建议你定义一个索引路由，它只重定向到一个叶子路由。例如：

```
 Router: Ember.Router.extend({
        root: Ember.Route.extend({
            index: Ember.Route.extend({
                route: '/',
                redirectsTo: 'aRoute'
            }),

            aRoute: Ember.Route.extend({
                route: '/routeA'
            }),
            bRoute: Ember.Route.extend({
                route: '/routeB'
            })
        })
    }) 
```

# android - 禁用识别侦听器的“就绪”声音

> ID：11951723
> 
> 赞同：9
> 
> 时间：2012-08-14T11:54:53.797
> 
> 标签：android

我在选项卡式片段活动中实现了[RecognitionListener 。](http://developer.android.com/reference/android/speech/RecognitionListener.html)发生的情况是，当用户滚动时，实现侦听器的片段被创建/销毁，并且在我的 Nexus 7 和 Galaxy Nexus 上，您会听到与 RegonitionListener 相关联的声音，或者可能是 SpeechRecognizer[准备](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)好使用。无论哪个类是声音的原因，我都希望允许用户禁用它。我现在意识到我的问题是我正在倾听而没有我正在解决的用户关注；但是，我仍然不想在默认情况下听到声音，而是更喜欢让用户选择接收通知声音。

所以我的问题是，是否可以禁用与侦听器关联的通知声音？我一直无法在文档中找到这个。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-21T12:53:38.970

正如 zapl 所说，没有直接的方法可以做到这一点，但您可以尝试将系统音量静音，正如您一样，腾讯表示您正在避免任何形式的黑客攻击。然后我必须说目前还没有方法可以做到这一点，但我仍然在为那些遭受同样问题并且可能不介意“黑客”技巧的人分享这个技巧解决方案。只是节省了他们的沮丧时间。

在特定时间静音系统音量，然后取消静音。这个怎么做：

在您的班级中，创建以下对象

```
private AudioManager mAudioManager;
private int mStreamVolume = 0; 
```

在您的**onCreate**方法中执行以下操作。

```
mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE); 
```

当您开始收听语音识别时，请执行以下操作

```
speechRecognizer.startListening(intent); // this method make that annoying sound
mStreamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC); // getting system volume into var for later un-muting 
mAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0); // setting system volume to zero, muting 
```

在您的 Speech **RecognitionListener**接口中应该有一个**onReadyForSpeech**方法。

```
class MyRecognitionListener implements RecognitionListener          
{
  public void onReadyForSpeech(Bundle params)
  {
    // this methods called when Speech Recognition is ready
    // also this is the right time to un-mute system volume because the annoying sound played already
    mAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, mStreamVolume, 0); // again setting the system volume back to the original, un-mutting
  }
} 
```

这就是你可以用这种烦人的声音来耍花招的方法。显然，任何其他声音也将静音一秒钟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-09T10:11:10.553

先前的答案是可以的，除非它会因为 NullPointer 异常而崩溃（`getStreamVolume`正在对空对象调用）。要解决此问题，请在该`getStreamVolume`行之前添加：

`AudioManager mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-30T18:30:33.930

如果您也想这样`stop the end sound`做，您可以取消静音`onResults`和`onError`而不是`onReadyForSpeech`。

创建一个处理程序作为成员变量：

```
private Handler mHandler = new Handler(); 
```

`RecognitionListener`方法：

```
@Override
public void onResults(Bundle results) {
    // Your logic here
    startAudioSound();
}

@Override
public void onError(int errorCode) {
    // Your logic here
    startAudioSound();
}

private void startAudioSound(long delay) {
    mHandler.postDelayed(() -> {
        mAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, mStreamVolume, 0); // again setting the system volume back to the original, un-mutting
    }, 300);
} 
```

我已经用 300 毫秒的延迟进行了测试，它可以工作。更短的延迟也可能起作用。

# drupal - 自定义模块给出 404

> ID：11951724
> 
> 赞同：0
> 
> 时间：2012-08-14T11:54:55.233
> 
> 标签：drupal, drupal-7, drupal-modules

我为 drupal 7 编写了一个自定义模块，将文件夹和所需文件放在 /sites/all/modules/module_name 下并通过后端启用。这是我的 hook_menu 函数；

```
function blog_contact_settings_menu(){
    $items = array();
    $items["blog_contact/send_to_all"] = array(
        "title"=>"Mail all bloggers",
        "page callback"=>"drupal_get_form",
        "page arguments"=>array("blog_contact_page"),
        "access arguments"=>array("access content")
    );
    $items["blog_contact/send_to_one"] = array(
        "page_callback"=>"single_blogger_contact",
        "access_arguments"=>array("access content"),
        "type"=>MENU_CALLBACK
    );
    return $items;
} 
```

我的博客联系人页面应该返回一个带有表单的页面，但是当我转到时`/?q=blog_contact/send_to_all`，它给出了 404。为什么你们这些小爱因斯坦会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:59:43.613

*   尝试清除缓存（管理 > 配置 > 开发 > 性能 > 清除所有缓存）。
*   您的 blog_contact_page 函数是否返回表单数组？
*   根据你的函数名，你的模块的机器名应该是“blog_contact_settings”。没有其他方法会起作用。
*   您可以通过向您的 hook_menu 函数添加如下代码片段来检查您的函数是否被调用。

    drupal_set_message('钩子菜单功能被触发！');

# html - AppHub 中的 Html5 应用程序

> ID：11951725
> 
> 赞同：0
> 
> 时间：2012-08-14T11:54:55.483
> 
> 标签：html, windows-phone, marketplace

我只是想知道是否可以在市场上销售用 HTML5 编写的应用程序？有什么缺点吗？我知道我们可以使用 Silverlight 或 XNA 开发应用程序，但是 HTML 5 呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:55:35.930

事实上，是的！有许多像 PhoneGap 这样的框架可以帮助我们。基本上，它使用 WebBrowser Control 并导航到内部页面。

# php - CodeIgniter 通过控制器从另一个视图加载视图

> ID：11951728
> 
> 赞同：0
> 
> 时间：2012-08-14T11:55:02.800
> 
> 标签：php, codeigniter, controller

出于安全原因，此处提到[http://codeigniter.com/user_guide/installation/index.html](http://codeigniter.com/user_guide/installation/index.html)我已将系统和应用程序文件夹放在另一个名为 OSW_appnsys 的文件夹中，该文件夹位于 Web 根文件夹上方。现在我在以下目录中有一个名为“Pages”的控制器类和一个“View”函数。

```
C:\wamp\www\OSW_appnsys\application\controllers 
```

现在，当我从另一个名为“header.php”的视图文件中调用控制器“页面”的“视图”方法时，我收到了这样的 404 错误

```
The requested URL /CodeIgniter_2.1.2/pages/view/products was not found on this server. 
```

其中产品是 URI。

我这样称呼：

```
<a class="mainmenu" href="<?php echo base_url('pages/view/products')?>">Products</a> 
```

任何帮助将不胜感激。泰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:07:39.887

You don't link to a view, you link to the name of a controller. If your controller is named 'Pages', you have to link to:

```
<a class="mainmenu" href="<?php echo base_url('pages/controllers/products')?>">Products</a> 
```

Assuming that you have placed your controllers in a 'pages/controllers/' folder. In the controller named 'pages' you load the view (a file named products_view.php or something, which is in your views folder) like so:

```
$this->load->view('products_view.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:33:54.503

看来您可能已经了解 CodeIgniter 的工作原理了。

如上所述，在您的配置文件中，您将拥有

```
$application_folder = 'application';
$system_folder = 'system'; 
```

将这些更改为

```
$application_folder = '../OSW_appnsys/application';
$system_folder = '../OSW_appnsys/system'; 
```

然后将浏览器指向 CodeIgniter 的 index.php 所在的 URL。

IE

```
\
\OSW_appnsys
\OSW_appnsys\application
\OSW_appnsys\system
\htdocs
\htdocs\index.php 
```

通过

`http://localhost/index.php`

此外，在访问控制器或视图时，您只需要访问控制器名称即可。IE

```
<a href="<?php echo site_url('pages/view'); ?>">Go to page</a> 
```

然后，您将拥有一个带有 View 操作的 Page 控制器，其中将执行

```
<?php
class Pages extends CI_Controller {

    public function view()
    {
        echo $this->load->view('pages/view');
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:11:36.123

在锚标签中试试这个

```
base_url().'index.php/pages/view' 
```

`products.php`并在控制器的视图功能中加载视图

# c++ - 布尔值的排序

> ID：11951729
> 
> 赞同：20
> 
> 时间：2012-08-14T11:55:07.583
> 
> 标签：c++, c, boolean, comparison-operators

在 C++ 或C99 下，如何为布尔值定义`<stdbool.h>`小于运算符？`<`

或者，解释此代码的行为：

```
#ifndef __cplusplus
#include <stdbool.h>
#endif
#include <stdio.h>

int main() {
    bool b = -1;
    if(b < true) {
        printf("b < true\n");
    }
    if(b < false) {
        printf("b < false\n");
    }
    if(true < false) {
        printf("true < false\n");
    }
    if(false < true) {
        printf("false < true\n");
    }
} 
```

在 MSVC 版本 10 下，编译为 C++ 代码，GCC 4.6.3-ubuntu5 编译为 C 代码，G++ 4.6.3-1ubuntu5 编译为 C++ 代码，你得到的只是

```
false < true 
```

也就是说，以下不等式都是`false`：

```
(bool)-1 < true
(bool)-1 < false
true < false 
```

以下是`true`：

```
false < true 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T12:04:11.780

在 C++ 中（我怀疑在 C 中也是如此），`bool`s 比较就像 `false`were`0`和`true`were 一样`1`。如果类型是，则和`bool`以外的值都不可能。`true``false`

与其他数字类型比较`bool`时，它将转换为`int`，再次`false`转换为`0`和`true`转换为`1`。

**编辑：** C++ 和`stdbool.h`C99 中的布尔值都强制为 0（假）或 1（真）——`bool b = -1;`将 的值设置`b`为 1。因为`1 < 1`和`1 < 0`都是假的，所以问题中的不等式是正确的。

**编辑：（**詹姆斯）除了上面的编辑不是真的正确，至少对于C++。A`bool`的值不是 0 或 1，它的值是`false`or `true`。只有当它被提升到时`int`，转换才会创建 和 的`0`值`1`。

`bool`正如康拉德所指出的，价值观没有可比性。比较运算符会发生“通常的算术转换”，这意味着两个操作数上的整数提升，这意味着 `bool`转换为`int`（如`char`or `short`... 或枚举）。

所有这些都是相当技术性的。在实践中，您可以记住 `false`< `true`，或者您可以考虑`false`为 0 和`true`1，以最适合您的为准。唯一要记住的重要事情是 a`bool`可以*没有*其他值。

（有趣的是，我不认为 a 的位模式`bool`是由标准强加的。实现可以使用位模式 `0x55`，`0xAA`例如，只要所有到整数类型的转换都给出 0 和 1，转换为`bool`总是给出适当的值等。包括静态变量的零初始化。）

最后一点：`bool b = -1;`设置`b`为`-1 != 0`( 是 `true`, not `1`，但当然会在任何数字上下文中`true`转换为。`1`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T12:04:04.193

这很有意义。整数类型 => bool 转换是有效的`b = i != 0`。为了进行`<`比较，它通过规则 false=>0 和 true=>1 将 bool 提升为 int。在您的第一种情况下`-1`，将等于 true，并且两者都将提升为 1，因此它是错误的。显然，对于第二种和第三种情况，1 永远不会小于 0，而`0 < 1`在最后一种情况下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T12:04:17.483

对于 C++，只需`false`<`true`

因为 C 更难回答。我懂了

`typedef char _Bool; /* For C compilers without _Bool */` 在我的 stdbool.h

似乎，如果编译器支持，它就像在 C++ 中一样工作并自动转换为 0/1，但如果不是，它应该作为 char 工作，如果 char 被签名`_Bool`，它将是`b < true``b < false`

对我来说 (int)(bool) -1 即使在 C 中也是 1，所以`bool`定义为非字符

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T12:04:49.417

布尔值按`false`小于的顺序排列`true`。根据标准， a`bool`只能包含两个值：`true`和`false`，因此转换`(bool)-1`应该已经产生`true`（因为转换为 bool 时所有非 0 值都是`true`）。这就是 clang 和 g++-4.7 中的行为。

实际比较（我相信）是在提升`int`之后进行的`bool`，您测试的编译器似乎避免了通过 bool 进行转换的中间步骤，而只是提升了实际`bool`值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T12:02:44.663

运算符 > 和 < 基于此：

```
true == (1)
false == (0) 
```

这个错误： (bool)-1 < true (bool)-1 < false 因为 bool b = -1 中的滚动算术；

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-14T12:03:04.460

bool 似乎被定义为（有符号）整数类型，false 为 0，0 为 1。这解释了为什么 true > false (1 > 0) 为 true。

此外，将 -1 与无符号数进行比较会使 -1 转换为无符号数，并且在您的平台上，这会导致整数溢出，从而导致 UINT_MAX（或任何类型的 bool 已被键入）。这现在解释了为什么以下表达式是错误的：

```
((bool)-1) < true i. e. UINT_MAX < 1
((bool)-1) < false i. e. UINT_MAX < 0
true < false i. e. 1 < 0 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-14T12:12:45.803

这是一个解释，虽然我没有检查过标准。从您的实验看来，“<”运算符似乎没有为布尔值定义。比较的是布尔值转换为的无符号整数。从理论上讲，该标准可能无法保证所有“真实”布尔值都转换为相同的值。并且 -1 被转换为最大的无符号整数。

作为另一个实验，下面的代码

```
#include <iostream>

int main()
{
std::cout<< (((bool)1) == true) << "\n";
std::cout<< (((bool)2) == true) << "\n";
std::cout<< (((bool)0) == false) << "\n";
std::cout<< (((bool)1) == false) << "\n";
  return 0;
} 
```

打印 1 1 1 0

所以任何非零值都是“真”。

# ruby - rspec --drb 不适用于带有 Spork 的 RSpec

> ID：11951731
> 
> 赞同：1
> 
> 时间：2012-08-14T11:55:10.203
> 
> 标签：ruby, ruby-on-rails-3, railstutorial.org, autotest, spork

在完成 Michael Hartl 的优秀 Rails 教程后，我决定尝试使用 Autotest 和 Spork 来加速我的测试。一切似乎都安装正确，但是当我遇到最后一个障碍（使用 --drb 标志运行 rspec）时，我收到以下错误：

```
$ rspec --drb spec/
*****************************************************************
DEPRECATION WARNING: you are using a deprecated constant that will
be removed from a future version of RSpec.

/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/run_strategy/forking.rb:13:in `run'

* Spec is deprecated.
* RSpec is the new top-level module in RSpec-2
*****************************************************************

Exception encountered: #<NameError: uninitialized constant RSpec::Runner::CommandLine>
backtrace:
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/test_framework/rspec.rb:6:in     `run_tests'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/run_strategy/forking.rb:13:in `run'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/forker.rb:21:in `initialize'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/forker.rb:18:in `fork'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/forker.rb:18:in `initialize'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/run_strategy/forking.rb:9:in `new'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/run_strategy/forking.rb:9:in `run'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/server.rb:48:in `run'
/usr/lib/ruby/1.8/drb/drb.rb:1558:in `__send__'
/usr/lib/ruby/1.8/drb/drb.rb:1558:in `perform_without_block'
/usr/lib/ruby/1.8/drb/drb.rb:1518:in `perform'
/usr/lib/ruby/1.8/drb/drb.rb:1592:in `main_loop'
/usr/lib/ruby/1.8/drb/drb.rb:1588:in `loop'
/usr/lib/ruby/1.8/drb/drb.rb:1588:in `main_loop'
/usr/lib/ruby/1.8/drb/drb.rb:1584:in `start'
/usr/lib/ruby/1.8/drb/drb.rb:1584:in `main_loop'
/usr/lib/ruby/1.8/drb/drb.rb:1433:in `run'
/usr/lib/ruby/1.8/drb/drb.rb:1430:in `start'
/usr/lib/ruby/1.8/drb/drb.rb:1430:in `run'
/usr/lib/ruby/1.8/drb/drb.rb:1350:in `initialize'
/usr/lib/ruby/1.8/drb/drb.rb:1630:in `new'
/usr/lib/ruby/1.8/drb/drb.rb:1630:in `start_service'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/server.rb:29:in `listen'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/lib/spork/server.rb:20:in `run'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/bin/../lib/spork/runner.rb:75:in `run'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/bin/../lib/spork/runner.rb:10:in `run'
/usr/lib/ruby/gems/1.8/gems/spork-0.9.0.rc8/bin/spork:10
/usr/lib/ruby/gems/1.8/bin/spork:23:in `load'
/usr/lib/ruby/gems/1.8/bin/spork:23 
```

如果我只输入 $ rspec spec/ ，测试就可以完美运行，但是当然非常慢。所以看来问题可能出在我对 Spork 所做的事情上。我按照[http://ruby.railstutorial.org/chapters/static-pages?version=3.0#sec:spork](http://ruby.railstutorial.org/chapters/static-pages?version=3.0#sec:spork)上的说明进行操作 （使用 v3.0 而不是 v3.2，因为这就是我开始使用的）。

请注意，我在 Windows 上运行 Cygwin，这意味着我使用的是 Ruby v1.8.7 而不是 1.9.2+。我不知道这是否会有所作为。

任何关于如何让 Spork 运行的想法（自动测试似乎很好）将不胜感激。

提前致谢！

抢

PS 我的 spec/spec_helper.rb 看起来像这样：

```
require 'rubygems'
require 'spork'

Spork.prefork do
  # Loading more in this block will cause your tests to run faster. However,
  # if you change any configuration or code from libraries loaded here, you'll
  # need to restart spork for it take effect.
  # This file is copied to spec/ when you run 'rails generate rspec:install'
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    # ## Mock Framework
    #
    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
    #
    # config.mock_with :mocha
    # config.mock_with :flexmock
    # config.mock_with :rr

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false
end

Spork.each_run do
  # This code will be run each time you run your specs.

end

  def test_sign_in(user)
    controller.current_user = user
  end
end 
```

编辑 2：我更改了 spec_helper.rb 文件的结尾。我不认为我有额外的，正如建议的那样，但我认为他们在错误的地方，因为我的缩进很差。生成的文件（删除了所有注释）如下所示：

```
require 'rubygems'
require 'spork'

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|

    config.mock_with :rspec

    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    config.use_transactional_fixtures = true

    config.infer_base_class_for_anonymous_controllers = false
  end
end

Spork.each_run do
end

def test_sign_in(user)
  controller.current_user = user
end 
```

错误消息仍然相同。明天，如果有机会，我会尝试卸载 Ruby v1.8.7 并安装 v1.9.2 或 3，因为没有其他想法。非常感谢迄今为止提供的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:07:16.970

您使用的是旧版本的 Spork。您应该尝试升级到 v0.9.2 看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:09:03.333

我知道我`bundle exec rspec . --drb`在另一个标签中运行 spork 后一直忘记。这消除了对我的任何奇怪的警告。也许这是给谷歌的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T12:30:53.383

请参阅 lx00st 对[spork 0.9.2 和 rspec 3.0.0 = uninitialized constant RSpec::Core::CommandLine (NameError)](https://stackoverflow.com/questions/24030907/spork-0-9-2-and-rspec-3-0-0-uninitialized-constant-rspeccorecommandline-n/24085168#24085168)的回答，引用：

> 原因是在 Rspec3 [https://github.com/rspec/rspec-core/blob/master/Changelog.md中删除了 RSpec::Core::CommandLine](https://github.com/rspec/rspec-core/blob/master/Changelog.md)
> 
> 将 RSpec::Core::CommandLine（从未正式公开）合并到 RSpec::Core::Runner 中。（迈伦·马斯顿）
> 
> 但是 spork 依赖于这个代码。
> 
> spork 的 github 上已经存在问题，可以在以下 spork 的 fork 中找到解决方案：
> 
> [https://github.com/codecarson/spork/commit/38c79dcedb246daacbadb9f18d09f50cc837de51#diff-937afaa19ccfee172d722a05112a7c6fL6](https://github.com/codecarson/spork/commit/38c79dcedb246daacbadb9f18d09f50cc837de51#diff-937afaa19ccfee172d722a05112a7c6fL6)
> 
> 一般 - 更换
> 
> ::RSpec::Core::CommandLine.new(argv).run(stderr, stdout)
> 
> 和
> 
> ::RSpec::Core::Runner.run(argv,stderr, stdout)
> 
> 在 soprks 源代码中

它对我来说效果很好（尽管我怀疑 spork gem 更新可能会删除源代码修复）。我刚刚用来自 github 的建议内容替换了内容 'spork/test_framework/rspec.rb'：

```
require 'rspec/core/version'

class Spork::TestFramework::RSpec < Spork::TestFramework
  DEFAULT_PORT = 8989
  HELPER_FILE = File.join(Dir.pwd, "spec/spec_helper.rb")

  def run_tests(argv, stderr, stdout)
    if rspec1?
      ::Spec::Runner::CommandLine.run(
        ::Spec::Runner::OptionParser.parse(argv, stderr, stdout)
      )
    elsif rspec3?
      options = ::RSpec::Core::ConfigurationOptions.new(argv)
      ::RSpec::Core::Runner.new(options).run(stderr, stdout)
    else
      ::RSpec::Core::CommandLine.new(argv).run(stderr, stdout)
    end
  end

  def rspec3?
    return false if !defined?(::RSpec::Core::Version::STRING)
    ::RSpec::Core::Version::STRING =~ /^3\./
  end

  def rspec1?
    defined?(Spec) && !defined?(RSpec)
  end
end 
```

# android - 我的应用程序外的弹出窗口中的活动

> ID：11951734
> 
> 赞同：0
> 
> 时间：2012-08-14T11:55:17.137
> 
> 标签：android

我有一个活动和布局，我希望能够在手机或主屏幕上当前打开的任何应用程序之上启动，但我希望活动在用户可以交互的半透明弹出式窗口中启动和。我不知道从哪里开始，任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:59:20.263

如果您从服务开始您的活动，您可以执行以下操作：

```
Intent dialogIntent = new Intent(getBaseContext(),DialogActivity.class);
                    // If invoking from outside app activity, needs to include 
                    // New task flag.
                    dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    getApplication().startActivity(dialogIntent); 
```

您的活动可以有一个对话框主题，以便它显示为一个对话框。

# sql - 仅按日期分组，而不是 Ruby 中的日期时间

> ID：11951742
> 
> 赞同：2
> 
> 时间：2012-08-14T11:55:37.147
> 
> 标签：sql, ruby-on-rails, ruby

我需要在 ruby​​ on rails 应用程序中创建一个 sql 查询。

我想按日期对结果进行分组 我有一个名为 created 的列，它是一个日期时间列 我需要按日期进行分组，而不是日期时间有任何帮助吗？

查询：

```
@trackings_per_post = Tracking.select("sum(1) as total, created_at").where(query).group("created_at") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:04:45.270

采用`aliases`

```
@trackings_per_post = Tracking.select("sum(1) as total, to_char(created_at,'dd/MM/yyyy') as created_at_date").where(query).group("created_at_date") 
```

# c# - 当应用程序以不同的用户身份运行时，如何获取当前登录的用户名和帐户类型（管理员，非管理员）

> ID：11951745
> 
> 赞同：2
> 
> 时间：2012-08-14T11:56:03.503
> 
> 标签：c#, .net, c#-4.0

如果`C#`应用程序由不同的用户执行，如何获取当前登录的 Windows 用户`Run as`？

`WindowsIdentity.GetCurrent();`总是给`Run as`用户或冒充用户。我只想让 windows 登录用户名和用户帐户类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:39:25.603

尝试使用 WMI 获取登录用户会话：“Select * from Win32_LogonSession Where LogonType = 2”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:24:51.610

据我所知，只有一种特殊情况可以做到这一点：操作系统必须是非服务器的（Windows XP/Vista/7）并且禁用快速用户切换。

在这种情况下，“当前登录的 Windows 用户”只是 explorer.exe 进程的所有者。

如果合适的话，我稍后会提供一些示例代码来展示如何做到这一点。

[如何在 C# 中确定进程的所有者？](https://stackoverflow.com/questions/777548/how-do-i-determine-the-owner-of-a-process-in-c)（有代码示例）

[你如何获得进程所有者的用户名？](https://stackoverflow.com/questions/300449/how-do-you-get-the-username-of-the-owner-of-a-process)（链接到一些更先进的技术）

一些短代码即将推出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:13:56.297

几年前我写了一个类叫*[Unimpersonator](http://weblogs.asp.net/avnerk/archive/2005/11/10/430162.aspx)*，用来解决ASP.NET服务器端代码在模拟上下文下运行，无法访问网络资源的问题。

它的作用是捕获当前的模拟上下文，还原所有模拟，以便您返回登录帐户，然后在释放对象时重新模拟：

```
// Running as impersonated account.
using (new Unimpersonator())
{
   // Running as logged-in-account
}
// Running as impersonated account again. 
```

# android - 如何在方向更改时处理 ProgressDialog？

> ID：11951748
> 
> 赞同：-2
> 
> 时间：2012-08-14T11:56:10.817
> 
> 标签：android, exception, progressdialog

> **可能重复：**
> [如何处理显示 ProgressDialog 的方向变化？](https://stackoverflow.com/questions/3695484/how-to-deal-with-orientation-change-with-a-progressdialog-showing)

```
08-14 17:23:31.078: E/AndroidRuntime(25099): FATAL EXCEPTION: main
08-14 17:23:31.078: E/AndroidRuntime(25099): java.lang.IllegalArgumentException: View not attached to window manager
08-14 17:23:31.078: E/AndroidRuntime(25099):    at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:378)
08-14 17:23:31.078: E/AndroidRuntime(25099):    at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:223)
08-14 17:23:31.078: E/AndroidRuntime(25099):    at android.view.Window$LocalWindowManager.removeView(Window.java:432)
08-14 17:23:31.078: E/AndroidRuntime(25099):    at android.app.Dialog.dismissDialog(Dialog.java:278)
08-14 17:23:31.078: E/AndroidRuntime(25099):    at android.app.Dialog.access$000(Dialog.java:71)
08-14 17:23:31.078: E/AndroidRuntime(25099):    at android.app.Dialog$1.run(Dialog.java:111)
08-14 17:23:31.078: E/AndroidRuntime(25099):    at android.app.Dialog.dismiss(Dialog.java:268)
08-14 17:23:31.078: E/AndroidRuntime(25099):    at android.app.Dialog.cancel(Dialog.java:951) 
```

以上是我在显示进度对话框时旋转屏幕时得到的结果。我该如何处理这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:03:20.687

```
try this one

 <activity android:label="@string/app_name" 
    android:configChanges="orientation|keyboardHidden" 
    android:name=".your.package"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:01:57.070

请将此行插入您在**清单中的活动**

```
 <activity
            android:name="your activity" android:configChanges="keyboardHidden|orientation"
          /> 
```

# python - 使用多处理管理器共享对象（类实例）

> ID：11951750
> 
> 赞同：15
> 
> 时间：2012-08-14T11:56:19.097
> 
> 标签：python, multiprocessing, multiprocessing-manager

我需要在 python 中的多个进程之间共享一个对象及其方法。我正在尝试使用`managers`（在模块中`multiprocessing`），但它崩溃了。这是一个生产者-消费者的愚蠢示例，其中两个进程之间的共享对象只是具有四种方法的数字列表。

```
from multiprocessing import Process, Condition, Lock  
from multiprocessing.managers import BaseManager  
import time, os  

lock = Lock()  
waitC = Condition(lock)  
waitP = Condition(lock)  

class numeri(object):  
    def __init__(self):  
        self.nl = []  

    def getLen(self):  
        return len(self.nl)  

    def stampa(self):  
        print self.nl  

    def appendi(self, x):  
        self.nl.append(x)  

    def svuota(self):  
        for i in range(len(self.nl)):  
            del self.nl[0]  

class numManager(BaseManager):  
    pass  

numManager.register('numeri', numeri, exposed = ['getLen', 'appendi', 'svuota', 'stampa'])  

def consume(waitC, waitP, listaNumeri):  
    lock.acquire()  
    if (listaNumeri.getLen() == 0):  
        waitC.wait()  
    listaNumeri.stampa()  
    listaNumeri.svuota()  
    waitP.notify()  
    lock.release()  

def produce(waitC, waitP, listaNumeri):  
    lock.acquire()  
    if (listaNumeri.getLen() > 0):  
        waitP.wait()  
    for i in range(10):  
        listaNumeri.appendi(i)  
    waitC.notify()  
    lock.release()  

def main():  
    mymanager = numManager()  
    mymanager.start()  
    listaNumeri = mymanager.numeri()  
    producer = Process(target = produce, args =(waitC, waitP, listaNumeri,))  
    producer.start()  
    time.sleep(2)  
    consumer = Process(target = consume, args =(waitC, waitP, listaNumeri,))  
    consumer.start()  

main() 
```

无论如何，它总是这样崩溃，告诉我：

```
Process Process-3:
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/usr/lib/python2.7/multiprocessing/process.py", line 114, in run
    self._target(*self._args, **self._kwargs)
  File "./trySemProc.py", line 61, in consume
    if (listaNumeri.getLen() == 0):
  File "<string>", line 2, in getLen
  File "/usr/lib/python2.7/multiprocessing/managers.py", line 755, in _callmethod
    self._connect()
  File "/usr/lib/python2.7/multiprocessing/managers.py", line 742, in _connect
    conn = self._Client(self._token.address, authkey=self._authkey)
  File "/usr/lib/python2.7/multiprocessing/connection.py", line 169, in Client
    c = SocketClient(address)
  File "/usr/lib/python2.7/multiprocessing/connection.py", line 293, in SocketClient
    s.connect(address)
  File "/usr/lib/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 2] No such file or directory 
```

那是怎么回事？我应该如何使用这些`managers`来共享对象及其方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T12:03:31.110

您必须[加入](http://docs.python.org/library/multiprocessing.html#multiprocessing.Process.join)您的进程以防止主进程在子进程继续执行之前退出。因此，将连接添加到您的代码中：

```
 consumer.join()
 producer.join() 
```

在您调用`start()`流程的方法之后。

# c++ - 全局变量和 MPI

> ID：11951758
> 
> 赞同：5
> 
> 时间：2012-08-14T11:56:59.780
> 
> 标签：c++, c, global-variables, mpi

我知道全局变量是不好的，应该尽量避免。但是，例如在使用 MPI 编写并行程序时，某些变量只会被初始化一次，并且永远不会改变（此任务的数量、任务总数等）。将这些变量作为全局变量仍然被认为是不好的做法吗？由于您几乎总是需要访问这些变量，因此在 main 中为它们创建一个类并将指向它的指针传递给程序中 99% 的函数似乎很愚蠢。到目前为止，我的方法是将它们隐藏在名称空间 mpi_glob 中（对于 C++ 的情况，我想我不会费心将它们放在 C 中的结构中来模拟名称空间）。我想这个问题也适用于其他仅设置一次的变量，例如单位制等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:06:32.823

全局变量“不好”的原因是它们引入了难以识别和跟踪的单独源文件之间的耦合。特别是，如果全局变量在程序中的某个时刻出现意外状态，则很难弄清楚它在哪里被修改。

将全局变量替换为通过引用传递给程序中每个函数的局部变量并不能消除该问题。在设计方面，它是“流浪数据”，即即使在不需要的地方也会四处游荡的数据。

现在，这里的重点是，正如您所建议的，初始化一次且从未更改过的数据不会出现使全局变量“坏”的问题。由于问题不存在，因此不需要解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:03:32.340

不应该遵循任何规则，具体情况完全取决于您正在编写的程序类型。

如果您的程序相对较小（或者您是唯一一个编写/维护它的人），那么将“全局”变量留在一个特殊的命名空间中可能没问题。至少这样你就不会在某个地方的本地范围内意外地对它们进行阴影或踩踏。这是假设你没有做这样的事情：

```
using namespace mpi_glob; 
```

这与仅将全局变量放在某个文件中并且并不能很好地保护它们几乎没有什么不同。

如果它通过使用全局变量使您的程序更加清晰易懂，那么就使用它们。如果可以将它们保留在本地，请将它们保留在本地，因为从长远来看，这通常会使维护变得更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:11:54.337

我想[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)应该可以帮助您更好地管理它，因此您不必传递指针。实际上，`mpi_glob`做同样的事情，`Singleton`只是更习惯的方式。

或者，您仍然可以使用全局变量——它们本身也不错。如果你想强调一次性赋值，你可以声明它们`const`并通过静态初始化器设置它们，如下所示：

```
const int number_of_tasks = get_preconfigured_number_of_tasks(); 
```

如果您的全局变量用于保存编译时常量，那么将它们替换为`enum`成员或预处理器定义是非常好的。这样做会减轻编译器的负担，因为它可以在没有内存访问的情况下就地使用立即值。

* * *

归功于 Pete Becker 在他的评论中指出 Singleton 问题。如果这些问题也困扰您，那么可以采取完全不同的方法。

还记得 Java 程序是如何实现的吗？有一个带有主方法的主类，所有程序的工作都在该主方法中运行。Main 仍然是成员函数，即它可以独占访问主类的一些私有字段（在 Java 的情况下它们必须是静态的，但这不是这里的重点）。

我们可以进一步将该概念扩展到类似[命令](http://en.wikipedia.org/wiki/Command_pattern)的实现。与传统 Java 的不同之处在于您的 main 等效方法不是静态的，而具有特定于包含程序的值的全局变量是非静态成员变量。所有需要访问全局状态数据的函数都将转换为成员函数。这是可能的，因为 main 方法也是成员函数。

这样，我认为，您可以实现更好的封装和数据安全。

# symfony - FR3LdapBundle 的 Ldap 配置

> ID：11951761
> 
> 赞同：0
> 
> 时间：2012-08-14T11:57:03.243
> 
> 标签：symfony, ldap, fr3dldapbundle

我配置了 FR3DLdapBundle。

我必须修改 app/config/config.yml

```
# app/config/config.yml
fr3d_ldap:
 client:
    host:         192.168.1.101
    username:     cn=admin,dc=test,dc=local
    password:     12345
    optReferrals: false

    baseDn: dc=test, dc=local
    filter: (&(ObjectClass=*))
    attributes:
       - { ldap_attr: mail,  user_method: setUserName } 
```

但它不起作用。添加 phpldapadmin 屏幕截图。

![在此处输入图像描述](../Images/5b30429e99c0868d89948b7188a1c0c8.png)

配置对吗？什么是“用户方法：setUserName”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T17:55:59.820

```
attributes:
       - { ldap_attr: mail,  user_method: setUserName } 
```

意味着 LDAP 属性“mail”将作为参数传递给用户类的方法“setUserName”

根据您的屏幕截图，属性邮件似乎不存在。

你也修改了security.yml吗？

# javascript - 更改标签值

> ID：11951768
> 
> 赞同：1
> 
> 时间：2012-08-14T11:57:28.207
> 
> 标签：javascript, jquery, html

有什么线索可以访问每个`th`下`class="CenteredHeader"`以通过 jQuery 添加更多参数来`a`标记？

```
<tr class="CenteredHeader">
  <th scope="col"></th>
  <th scope="col">
      <a href="/BoxOffice/Movies/807?sort=MovieName&amp;sortdir=ASC">Pelicula</a>
  </th>
  <th scope="col">
      <a href="/BoxOffice/Movies/807?sort=TechnologyName&amp;sortdir=DESC">Tecnologia</a>
  </th>
</tr> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T11:59:22.237

```
$('.CenteredHeader th a').each(function() {
    $(this).attr('href', function(i, oldhref) {
         return oldhref + '&amp;p1=111'
     });
})​; 
```

如果需要，您可以通过上述解决方案对每个`a`标签使用不同的参数。

也可以像[@François Wahl 评论](https://stackoverflow.com/questions/11951768/change-th-tag-value/11951795#comment15924653_11951795)所说的那样做：

```
$('.CenteredHeader th a').attr('href', function(i, oldhref) {
     return oldhref + '&amp;p1=111'
})​; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:00:04.420

试试这个：

```
$('.CenteredHeader th a').attr('href', "/BoxOffice/Movies/807?sort=MovieName&amp;sortdir=ASC&amp;p1=111") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T12:01:46.133

```
$('.CenteredHeader a').each(function(index, a) {
  var newHref = $(a).attr('href')+'&key=value';
  $(a).attr('href', newHref );
}); 
```

# c# - ASP.NET 母版页错误

> ID：11951772
> 
> 赞同：2
> 
> 时间：2012-08-14T11:57:40.523
> 
> 标签：c#, asp.net

母版页被调用两次。呈现整个页面后一次。此时isPostback 值为false，SESSION 为null。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        //SOME CODE

        try
        {
            strUserId = Session[USERID].ToString();
        }
        catch
        {
            Response.Redirect("error.aspx");
        }
    }
} 
```

对于母版页的第一页加载（在页面呈现之前），一切都很好。再次渲染后调用母版页的 page_load。这次访问 SESSION 给出了一个例外：

> HttpException（会话状态只能在 enableSessionState 设置为 true 时使用，无论是在配置文件中还是在 Page 指令中。还请确保 System.Web.SessionStateModule 或自定义会话状态模块包含在`<configuration>\<system.web>\<httpModules>`应用程序的部分中配置。）。

如果 page_load 被调用两次或三次，我没有任何问题。我只是不想在第二页加载时访问 SESSION。

**编辑 2**

由于我之前监督过的这段代码（当前 Global.asax 文件），第二个母版页加载正在发生

```
 void Application_Error(object sender, EventArgs e) 
    {         
       Server.Transfer("~/ErrorMessage.aspx");
    } 
```

ErrorMessage.aspx 页面是母版页的子页面:(

但仍然回答的问题是为什么即使在成功呈现页面时也会生成 Application_Error() ？我试图在 Application_Error() 处保留一个断点，并且事件 args 每次都是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:26:22.390

尝试将以下代码添加到您的`Web.config`文件中 - 您可能必须将其移植，因为我不知道它目前的样子。您可以参考这篇[文章](http://forums.asp.net/t/1499512.aspx/1)来查看整个对话和条件。

```
<system.webServer>
    <modules>
         <!-- UrlRewriter code here -->
         <remove name="Session" />
         <add name="Session" type="System.Web.SessionState.SessionStateModule" preCondition="" />
    </modules>
</system.webServer> 
```

# 编辑 1

这个问题很可能围绕着您试图在`ASPX`母版页的页面中连接事件处理程序这一事实。这总是会导致诸如访问`Session`甚至`Application`变量之类的问题。所以，请尝试以下方法：

1.  从文件中删除标记的事件处理程序`ASPX`。
2.  在母版页的构造函数中放置以下代码。

**构造函数代码**

```
public MasterPage()
{
    this.Load += new EventHandler(Page_Load);
} 
```

然后运行您在同一个处理程序中运行的代码。

# 编辑 2

检查您的`Web.config`并查看它是否正确设置了以下部分。

```
<system.web>
    <pages enableSessionState="true" />
    ...
</system.web 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:07:34.580

在检查了 firebug 中的请求后，我想我已经找到了问题的原因。一些 ajax 请求是针对两个不存在的 .gif 文件。因此，调用了 Global.asax 中的 Application_Error()。那里产生的异常是“找不到文件”。然后在Application_Error()中有一个Server.Transfer("~/ErrorMessage.aspx")。不幸的是，ErrorMessage.aspx 是母版页的子页。因此，在每个页面上都发出 AJAX 请求，导致“找不到文件”异常，然后将其传输到 ErrorMessage.aspx，看起来母版页 page_load 被调用了两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:20:55.423

错误描述告诉您检查使用的设置`Session`。您是否检查过该设置 ( `enableSessionState`)？

此外，检查`error.aspx`不使用母版页，直到你知道它工作得更好，否则你可能会得到一些奇怪的错误......

# shell - imagemagick 转换 CPU 错误

> ID：11951776
> 
> 赞同：0
> 
> 时间：2012-08-14T11:57:55.537
> 
> 标签：shell, imagemagick, cpu

我正在通过 apache/python 脚本调用的 shell 脚本中运行 Imagemagick 的转换函数。它通常工作正常，但有时服务器的 CPU 会耗尽并且不会恢复。这是'top'的打印：

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND           
9672 apache    20   0  357m 1452  640 R 52.9  0.1 223:44.88 convert            
9457 apache    20   0  294m 161m  648 R 47.1  9.8 222:50.15 convert 
```

我能做些什么来 1\. 防范这种情况 2\. 杀死进程？如果我不手动终止进程，它们会无限期地闲置，使服务器停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:46:17.610

您有几个选择，但正确的答案取决于您的具体情况。

您可以使用 Python 中的子进程命令之一，然后终止耗时过长的作业。如果您只是发出一个简单的 shell 命令，您可能想查看“超时”实用程序是否可用于您的操作系统和发行版。

除此之外，您可能希望将图像处理与您的 Web 服务基础架构分离。

最后，发布您正在调用“转换”的选项可能是一个好主意。可能有些人知道的足够多，可以指出您使用该工具的方法存在明显问题。

# java - 找出调用线程是否是 SWT UI 线程 - 确定调用线程

> ID：11951786
> 
> 赞同：7
> 
> 时间：2012-08-14T11:58:39.203
> 
> 标签：java, swt

我有这个模块在应用程序 COMM 的多个部分（在 SWT Ui 端、后端等）中使用。这个模块有一个方法 sendMessage，我想在其中添加一个例程来确定调用线程（以防在 UI 中使用它）是否是 SWT UI 线程。并警告程序员他正试图从 UI 线程进行耗时的操作......这很糟糕 :)

我当然想通过不添加对 UI 模块（来自 COMM）的任何依赖项来做到这一点。

如何确定调用线程是否是 SWT UI 线程？

谢谢，米尔恰

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T13:28:19.207

您可以调用`Display.getThread()`以获取应用程序的当前 UI 线程。

如果您不想依赖 SWT UI，那么您将不得不使用反射。例如：

```
public static boolean isUIThread()
{
    Object uiThread = null;

    try
    {
        Class displayClass = Class.forName("org.eclipse.swt.widgets.Display");
        Method getDefaultMethod = displayClass.getDeclaredMethod("getDefault", new Class[] { });
        Object display = getDefaultMethod.invoke(null, new Object[] { });

        Method getThreadMethod = displayClass.getDeclaredMethod("getThread", new Class[] { });
        uiThread = getThreadMethod.invoke(display, new Object[] { });
    }
    catch(Exception e)
    {
        log.warn("Could not determine UI thread using reflection", e);
    }

    return (Thread.currentThread() == uiThread);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T12:56:38.203

我相信这段代码将在运行时确定当前线程是否是 SWT 中的 UI 线程。它与之前添加的答案基本相同，但不使用反射。

> if(Thread.currentThread() == Display.getDefault().getThread())

# vba - 使用 ActiveSheet 对象更改 excel 单元格颜色

> ID：11951788
> 
> 赞同：1
> 
> 时间：2012-08-14T11:58:45.183
> 
> 标签：vba, excel

我正在使用 Excel 的 Active Sheet 对象来循环遍历行和列。

我需要更改单元格的背景颜色，但在此行上出现应用程序定义或对象定义错误

```
ws.Cells(rw, 4).Interior.ColorIndex = 0 
```

这是我正在使用的代码

```
Dim ws As Worksheet

Set ws = ActiveSheet

With ws

For rw = 7 To ws.Rows.Count

   For col = 2 To 12

    'Check the first column and if null then exit

    If ws.Cells(rw, 2) = "" Then
        Exit Sub
    End If

   'Check if article code is less than eight digits
    If Len(ws.Cells(rw, 4)) < 8 Then
        ws.Cells(rw, 4).Interior.ColorIndex = 3
    Else
        ws.Cells(rw, 4).Interior.ColorIndex = 0
    End If

  Next col

Next rw

End With 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:24:59.087

代码没有问题。您收到该错误是因为您的工作表受到保护。您需要取消保护工作表，然后更改单元格颜色。完成颜色更改后，您可以重新保护它。请参阅此代码。

```
Sub Sample()
    Dim ws As Worksheet
    Dim Mypassword As String

    '~~> Change password here
    Mypassword = "Blah Blah"

    Set ws = ActiveSheet

    With ws
        '~~> Unprotect sheet
        .Unprotect Mypassword
        For rw = 7 To .Rows.Count
            For col = 2 To 12
                'Check the first column and if null then exit
                If .Cells(rw, 2).Value = "" Then Exit Sub

                'Check if article code is less than eight digits
                If Len(.Cells(rw, 4)) < 8 Then
                    .Cells(rw, 4).Interior.ColorIndex = 3
                Else
                    .Cells(rw, 4).Interior.ColorIndex = 0
                End If
            Next col
        Next rw
        '~~> Reprotect sheet
        .Protect Mypassword
    End With
End Sub 
```

# java - PHP数组结构的Java等价

> ID：11951790
> 
> 赞同：0
> 
> 时间：2012-08-14T11:58:54.077
> 
> 标签：java, php, data-structures

> **可能重复：**
> [Java 关联数组](https://stackoverflow.com/questions/5122913/java-associative-array)

我在 PHP 中有一个数组，我需要一种在 Java 中描述相同类型数组的方法。Java的等价物是什么？

```
<?php
$data = array(
    "Artist 1" => array(
        "Album 1" => array(
            array("id", "title", "genre", "length", "year"),
            array("id", "title", "genre", "length", "year"),
            array("id", "title", "genre", "length", "year")
        ),
        "Album 2" => array(
            array("id", "title", "genre", "length", "year"),
            array("id", "title", "genre", "length", "year"),
            array("id", "title", "genre", "length", "year")
        )
    ),
    "Artist 2" => array(
        "Album 1" => array(
            array("id", "title", "genre", "length", "year"),
            array("id", "title", "genre", "length", "year")
        )
    )
);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:04:04.073

使用更新的示例，我将使用

```
List<Record> records = ...
records.add(new Record("Artist 1", "Album 1", "id", "title", "genre", "length", "year"));
// etc 
```

之后，我将创建所需的索引，甚至使用 MySQL 之类的数据库或从普通 CSV 加载数据

```
Artist 1,Album 1,id,title,genre,length,year
Artist 1,Album 1,id,title,genre,length,year
Artist 1,Album 2,id,title,genre,length,year
Artist 1,Album 2,id,title,genre,length,year
Artist 2,Album 1,id,title,genre,length,year 
```

* * *

除非有充分的理由嵌套数据，否则我会使用复合键

```
Map<String, List<String>> map = new LinkedHashMap<>();
map.put("1,1", Arrays.asList("abcdefgh", "abcdefgh", "abcdefgh"));
map.put("1,2", Arrays.asList("abcdefgh", "abcdefgh", "abcdefgh"));
map.put("2,1", Arrays.asList("abcdefgh", "abcdefgh")); 
```

Java 作为一种面向对象的语言，最好尽可能使用对象来存储您的数据结构。

# php - PHP 回复错误 - 附带管理员电子邮件而不是联系表的发件人

> ID：11951792
> 
> 赞同：0
> 
> 时间：2012-08-14T11:59:03.500
> 
> 标签：php

我有下面的 PHP 联系表格，其中包含验证码以确保正确。但是，当我从网站回复电子邮件时，它会随机发送一封电子邮件，我认为这是服务器管理员，但是，我希望它是发送表单的人的电子邮件。下面是代码，你能不能帮我？

```
<?php session_start();
if(isset($_POST['Submit'])) {   if( $_SESSION['chapcha_code'] == $_POST['chapcha_code'] && !empty($_SESSION['chapcha_code'] ) ) {
$youremail = 'info@domain.com';
$fromsubject = 'www.domain.co.uk';
$title = $_POST['title'];
$fname = $_POST['fname'];
$mail = $_POST['mail'];
$phone = $_POST['phone']; 
$subject = $_POST['subject']; 

$message = $_POST['message']; 
$to = $youremail; 
$mailsubject = 'Message from Website'.$fromsubject.' Contact Page';
$body = $fromsubject.'

The person that contacted you is:  '.$fname.'
 Phone Number: '.$phone.'
 E-mail: '.$mail.'
 Subject: '.$subject.'

 Message: 
 '.$message.'

|---------END MESSAGE----------|'; 
echo "Thank you for your message. I will contact you shortly if needed.<br/>
Go to <a href='/index.html'>Home Page</a>"; 
mail($to, $subject, $body);
    unset($_SESSION['chapcha_code']);
} else {

echo 'Sorry, you have provided an invalid security code';
}
} else { 
echo "You must write a message. </br> Please go to 
<a href='/contact.html'>Contact Page</a>"; 
}
?> 
```

有人告诉我将以下内容放入代码中，但我应该把它放在哪里？

```
$headers = "From: $mail\r\n"; 
$headers .= "Reply-To: $mail\r\n";   

mail($to, $subject,$body,$headers); 
```

非常感谢

GS-计算机

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:01:20.450

请更换

```
mail($to, $subject, $body); 
```

用你的代码

```
 $headers = "From: $mail\r\n"; 
   $headers .= "Reply-To: $mail\r\n";   

   mail($to, $subject,$body,$headers); 
```

# c# - Modal Popup Extender Show() 方法不起作用

> ID：11951800
> 
> 赞同：0
> 
> 时间：2012-08-14T11:59:40.437
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, modalpopupextender, linkbutton

我有一个`ListView`with `LinkButton`s。我正在使用`OnItemCommand`带有 a 的方法`CommanName`来打开一个对话框。

如果用户单击`LinkButton`，我希望它打开一个对话框（带有控件等）。但是我每次都遇到同样的错误：

> System.InvalidOperationException：ListView“myListView”有一个 SelectedIndexChanging-Event 执行，未处理。

我的代码：aspx

```
...

<asp:HiddenField ID="hidForModel" runat="server" />

    <asp:scriptmanager id="ScriptManager1" runat="server">
       </asp:scriptmanager> 

       <asp:modalpopupextender id="PopUpDialog" 
                runat="server" cancelcontrolid="btnCancel" 
                okcontrolid="btnOkay" targetcontrolid="hidForModel" 
                popupcontrolid="Panel1" popupdraghandlecontrolid="PopupHeader" 
                drag="true" backgroundcssclass="ModalPopupBG" >

</asp:modalpopupextender>

            <div class="popupConfirmation" id="Panel1" runat="server" >
              <asp:Panel runat="server" ID="PopupHeader" CssClass="modalPopup">Benutzerinformationen</asp:Panel>
                <div class="Body">
                    Hallo
                    <asp:TextBox ID="txtVorname" runat="server"></asp:TextBox>
                    <asp:Button id="btnOkay" runat="server" text="Speichern" />
                    <asp:Button id="btnCancel" runat="server" text="Abbrechen" />
                </div>

            </div>

...

 <asp:ListView runat="server" ID="myListView" OnItemCommand="myListView_ItemCommand">

        <LayoutTemplate>
            <table id="UserTable" runat="server" border="0" width="800" cellpadding="0" cellspacing="0">
                <tr style="background-color:#E5E5FE" class="TableClass">
                    <th id="th1" runat="server"><asp:LinkButton ID="lnkBenutzer" runat="server" >id_Benutzer</asp:LinkButton></th>
                    <th id="th2" runat="server"><asp:LinkButton ID="lnkemail" runat="server" >id_Email</asp:LinkButton></th>
                    <th id="th3" runat="server"><asp:LinkButton ID="lnkVorname" runat="server" >id_Vorname</asp:LinkButton></th>
                    <th id="th4" runat="server"><asp:LinkButton ID="lnkNachname" runat="server" >id_Nachname</asp:LinkButton></th>
                    <th id="th5" runat="server"><asp:LinkButton ID="lnkTelefon" runat="server" >id_Telefon</asp:LinkButton></th>
                </tr>
                <tr runat="server" id="ItemPlaceholder">
                </tr>
            </table>
        </LayoutTemplate>

        <ItemTemplate>

            <tr class="TableClass">    
                <td align="left" ><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server"  /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server"  /></td>

              <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </ItemTemplate>

        <AlternatingItemTemplate>

            <tr class="TableClass"> 

                <td align="left" ><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink"  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>

                <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </AlternatingItemTemplate>

        </asp:ListView>

... 
```

c#代码：

```
protected void myListView_ItemCommand(object sender, ListViewCommandEventArgs e)
        {
            if (e.CommandName == "Select")
            {
                txtVorname.Text = "test";

                PopUpDialog.Show();  //<-- Here is the error 

            }
        } 
```

我可以使用`Button`（用于测试）打开对话框，但不能使用`LinkButton`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:12:44.780

```
protected void myListView_ItemCommand(object sender, ListViewCommandEventArgs e)
{
 if (e.CommandName == "Select")
  {
  ModalPopupExtender popUp = (ModalPopupExtender)lvAlbum.FindControl("PopUpDialog");
  popUp.Show();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:26:38.863

您只需要`SelectedIndexChanging`处理`ListView`.

标记

```
<asp:ListView runat="server" ID="myListView" OnItemCommand="myListView_ItemCommand"
    OnSelectedIndexChanging="myListView_SelectedIndexChanging" > 
```

代码隐藏：

```
protected void myListView_SelectedIndexChanging(object sender, EventArgs e)
{

} 
```

`ListView`如果它们触发，则需要处理其中的某些事件。如果这些事件*尝试*触发（例如单击具有“Select”的“CommandName”触发 SelectedIndexChanging 事件的列表项）并且未处理它们，则会收到与您提到的错误类似的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T14:53:15.877

不要使用命令 text `Select`。由于某种原因，它使弹出窗口不显示。例如执行以下操作：

```
if(e.CommandName == "ShowPopup") 
```

这解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-18T16:22:20.457

我的解决方案需要特定的 ajax 脚本管理器。asp 没有用。

`<ajax:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></ajax:ToolkitScriptManager>`

# java - 如何使用反射动态获取调用者实例的实例

> ID：11951802
> 
> 赞同：0
> 
> 时间：2012-08-14T11:59:44.140
> 
> 标签：java, swing, inheritance, reflection

我正在使用 Swing 应用程序。

```
public class Owner extends JPanel{
  Child child=null;
  public Owner(){
   child=new Child();
  }
}

public  class Child extends JPanel{
   public Child(){
     // Here I want the instance of Owner class.
     // This child class is being created from many classes(almost 1000) like the Owner class.
   }
} 
```

我想要一些方法来获取调用类实例的实例，也许使用反射。这样我就可以将 a 关联`KeyListener`到每个实例。这是必需的，否则我必须在所有 1000 个类中编写相同的代码。

我所有的类都在扩展，一旦组件关联到父组件`JPanel`，我就可以从属性中获取父级。`Parent`但是在这里我需要它在 的构造函数中`Child`，即组件尚未关联`Owner`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:04:39.057

```
public class Owner extends JPanel{
 Child child=null;
 public Owner(){
 child=new Child(this);
 }
}

public  class Child extends JPanel{
    Object owner ;
    public Child(Object owner ){
       this.owner = owner ;
      // Here I want the instance of Owner class.
      // This child class is being created from many classes(almost 1000) like the       Owner class.
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:05:10.667

类似的东西可以帮助你：

```
public class Owner extends JPanel {
    Child child;

    public Owner() {
        child = new Child(this);
    }
}

public class Child extends JPanel {
    Owner owner;

    public Child(Owner owner) {
        this.owner = owner;
        // add key listeners here to owner
        owner.addKeyListener(...)
    }
} 
```

# database - 我可以在 Symfony2 中设置多个数据库吗？

> ID：11951810
> 
> 赞同：0
> 
> 时间：2012-08-14T12:00:08.703
> 
> 标签：database, symfony, doctrine-orm

我想知道我是否可以在其中设置多个数据库`Symfony2`（我将它与 Doctrine2 一起使用），因为当我想查看另一个应用程序时，它说有一个错误并且这样的表不存在。

我的问题是每次当我想查看不同的应用程序时，我必须更改我的数据库（我在`parameters.ini`文件中进行）还是有其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:22:07.790

基本上，您必须为每个数据库定义（至少）1 个 EntityManager 和（至少）每个数据库的 1 个连接。这是通过以下配置实现的`app/config/config.yml`：

```
# Doctrine Configuration
doctrine:
    dbal:
        default_connection: conn1
        connections:
            conn1:
                driver:   %database_driver%
                host:     %database_host%
                port:     %database_port%
                dbname:   %database_name%
                user:     %database_user%
                password: %database_password%
                charset:  UTF8
            conn2:
                driver:   %database2_driver%
                host:     %database2_host%
                port:     %database2_port%
                dbname:   %database2_name%
                user:     %database2_user%
                password: %database2_password%
                charset:  UTF8

    orm:
        auto_generate_proxy_classes: %kernel.debug%

        default_entity_manager:   em1
        entity_managers:
            em1:
                connection:       conn1
                mappings:
                    XxxBundle1: ~
            em2:
                connection:       conn2
                mappings:
                    XxxBundle2: ~ 
```

由于您必须告诉哪个包包含给定 EntityManager 的映射实体，因此您必须为每个数据库创建（至少）1 个包。正如我在[这里](http://blog.alterphp.com/2011/10/configuration-trick-for-multiple-entity.html)写的，不要忘记删除`auto_mapping`orm 部分中的参数！

[有关此主题的官方文档文档](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:03:14.783

这可能是有用的建议如何实现这个[http://www.theodo.fr/blog/2011/09/symfony2-working-with-multiple-databases/](http://www.theodo.fr/blog/2011/09/symfony2-working-with-multiple-databases/)

# javascript - 在浏览器中隐藏安卓软键盘

> ID：11951814
> 
> 赞同：1
> 
> 时间：2012-08-14T12:00:29.937
> 
> 标签：javascript, android

我正在为 ios/android 构建一个 webapp，但目前遇到了问题

我的应用程序有一个输入元素，当人们关注它时，软键盘照常显示。但有时我想用javascript隐藏它，我试过这个：

```
document.getElementById('oneinput').blur() 
```

它在 ios safari 中运行良好，但在 android 浏览器中，输入元素刚刚失去焦点，但仍然出现软键盘。

我还尝试通过 javascript 在某些元素上创建单击事件，但也无法正常工作。有任何想法吗？

# magento - Nginx Magento 配置 index.php 循环错误

> ID：11951816
> 
> 赞同：3
> 
> 时间：2012-08-14T12:00:33.243
> 
> 标签：magento, nginx

我正在尝试在 Nginx 上设置 Magento，但不断收到以下错误

*41 处理“/index.php”时重写或内部重定向循环

我的这个域的配置文件如下，我已经用 DOMAIN.info 替换了我的域

我还注释掉了一些与 SSL 相关的部分，因为我还没有设置 SSL

任何帮助将不胜感激。

```
server {
# Listen on port 80 as well as post 443 for SSL connections.
listen 80;
listen 443 default ssl;

server_name DOMAIN.info www.DOMAIN.info;

# Specify path to your SSL certificates.
#ssl_certificate /etc/nginx/certificates/yourcertificate.crt;
#ssl_certificate_key /etc/nginx/certificates/yourcertificate.key;

# Path to the files in which you wish to
# store your access and error logs.
access_log /var/log/nginx/access.log;
error_log /var/log/nginx/error.log;

# If the site is accessed via yourdomain.com
# automatically redirect to www.yourdomain.com.
if ($host = 'DOMAIN.info' ) {
    rewrite ^/(.*)$ http://www.DOMAIN.info/$1permanent;
}

root usr/share/nginx/www;

location / {
    index index.html index.php;
    try_files $uri $uri/ @handler;
}

# Deny access to specific directories no one
# in particular needs access to anyways.
location /app/ { deny all; }
location /includes/ { deny all; }
location /lib/ { deny all; }
location /media/downloadable/ { deny all; }
location /pkginfo/ { deny all; }
location /report/config.xml { deny all; }
location /var/ { deny all; }

# Allow only those who have a login name and password
# to view the export folder. Refer to /etc/nginx/htpassword.
location /var/export/ {
    auth_basic "Restricted";
    auth_basic_user_file htpasswd;
    autoindex on;
}

# Deny all attempts to access hidden files
# such as .htaccess, .htpasswd, etc...
location ~ /\. {
     deny all;
     access_log off;
     log_not_found off;
}

# This redirect is added so to use Magentos
# common front handler when handling incoming URLs.
location @handler {
    rewrite / /index.php;
}

# Forward paths such as /js/index.php/x.js
# to their relevant handler.
location ~ .php/ {
    rewrite ^(.*.php)/ $1 last;
}

# Handle the exectution of .php files.
location ~ .php$ {
    if (!-e $request_filename) {
        rewrite / /index.php last;
    }
    expires off;
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_param HTTPS $fastcgi_https;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_param MAGE_RUN_CODE default;
    fastcgi_param MAGE_RUN_TYPE store;
    include fastcgi_params;
}
} 
```

我的 nginx.conf 文件看起来像这样

```
user www-data;
worker_processes 5;
pid /var/run/nginx.pid;

events {
    worker_connections 768;
    # multi_accept on;
}

http {

    ##
    # SSL Support
    ##

    map $scheme $fastcgi_https {
    default off;
        https on;
    }

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    # server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable "msie6";

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # nginx-naxsi config
    ##
    # Uncomment it if you installed nginx-naxsi
    ##

    #include /etc/nginx/naxsi_core.rules;

    ##
    # nginx-passenger config
    ##
    # Uncomment it if you installed nginx-passenger
    ##

    #passenger_root /usr;
    #passenger_ruby /usr/bin/ruby;

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}

#mail {
#   # See sample authentication script at:
#   # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript
# 
#   # auth_http localhost/auth.php;
#   # pop3_capabilities "TOP" "USER";
#   # imap_capabilities "IMAP4rev1" "UIDPLUS";
# 
#   server {
#       listen     localhost:110;
#       protocol   pop3;
#       proxy      on;
#   }
# 
#   server {
#       listen     localhost:143;
#       protocol   imap;
#       proxy      on;
#   }
#} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T15:46:18.580

最有可能的问题是缺少“/”在

> ```
> root usr/share/nginx/www; 
> ```

如果 /index.php 找不到，您的配置确实会创建无限循环：

> ```
> location ~ .php$ { 
>     if (!-e $request_filename) { 
>         rewrite / /index.php last; 
>     }
>     ... 
> ```

Note that request to /index.php will be redirected to /index.php if `-e $request_filename` test fails. The request will be again matched by the same location, test will fail again and so on - till nginx will notice there are too many internal redirects and abort request processing with the above error.

# android - 支持 Webview 中的日文和西班牙文文本

> ID：11951818
> 
> 赞同：1
> 
> 时间：2012-08-14T12:00:34.403
> 
> 标签：android, webview

我有一个`WebView`从中加载 html 页面的`res/raw resource.`

`WebView`不`Japanese text`支持。因此，我阅读了 html 文件并将文本转换为`utf-8`并使用以下方法显示它：

```
webView.loadDataWithBaseURL( null, readDataFromFile("res/raw/page.html"),  
                                  "text/html", "UTF-8", null ); 
```

该函数`readDataFromFile()`读取 html 文件并以`UTF-8`格式返回 String。这适用于显示`Japanese text`，但无法显示`Spanish`and`Danish`文本。

一些`ASCII`字符显示在上面的解决方案之间。

我无法使用 loadURL()，因为它在显示 .But 时遇到`Japanese text`问题`Spanish`和`Danish`。

有人可以帮助我提供简化的解决方案，以便我可以正确显示所有语言`WebView`。

在此先感谢，斯内哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:46:51.000

自己找到了解决方案，只需将语言特定的文本转换为 utf-8 格式。完成此操作后，它会在 webview 中正确显示所有文本。还将 html 文件在 eclipse 中保存为 utf-8。

# android - 我可以将谷歌驱动器与移动应用程序集成吗？

> ID：11951820
> 
> 赞同：0
> 
> 时间：2012-08-14T12:00:34.943
> 
> 标签：android, google-drive-api

我是 android 开发的新手。我想将 google drive 与我的 android 应用程序集成以存储我的应用程序的 Sqlite 数据库文件。所以任何人都可以帮助我如何做到这一点？？？

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:03:55.487

从他们的文档中：`Google Drive provides a REST API`...

我之前没有使用 Google Drive 的经验，但由于他们提供 REST API，我认为将 GD 集成到移动应用程序中没有任何困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:15:12.540

有关如何与 Drive 的 Android 应用程序集成的详细信息，请查看文档：[https ://developers.google.com/drive/integrate-android-ui](https://developers.google.com/drive/integrate-android-ui)

# bash - Bash：键值漂亮打印

> ID：11951823
> 
> 赞同：0
> 
> 时间：2012-08-14T12:01:01.237
> 
> 标签：bash, pretty-print

我有一个键值对形式的命令输出：

```
key1: value 1 key2: value 2 ...
key1: long value 1 key2: value 2 ...
key1: val 1 key2: value 2 ... 
```

我想要的是漂亮地打印这个输出，以便“：”对齐：

```
key1: value 1      key2: value 2 ...
key1: long value 1 key2: value 2 ...
key1: val 1        key2: value 2 ... 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:29:40.003

只要您可以容忍错误放置键，以下非常简单的解决方案就可以工作：

```
cat input | column -t -s ":" 
```

顺便说一句，如果在管道到列之前提取键，输出看起来会更好。

使用 awk、perl 或 python 可以获得更好的结果，但是这在 bash 中当然是可行的，但是脚本会更大（我已经开始但尚未完成）。背后的想法很简单：使用两遍——第一遍计算每个键的最大偏移量并将其存储在数组中，第二遍基于偏移量的路径注入精确数量的空格。

# java - 使用 JSF 获取异常的 Spring Web 流配置

> ID：11951825
> 
> 赞同：1
> 
> 时间：2012-08-14T12:01:13.103
> 
> 标签：java, spring, jsf, spring-webflow

使用 JSF 获取执行的 Spring Web 流配置

```
 java.lang.NoSuchMethodError: org.springframework.core.env.ConfigurableEnvironment.merge(Lorg/springframework/core/env/ConfigurableEnvironment;)V
org.springframework.context.support.AbstractApplicationContext.setParent(AbstractApplicationContext.java:392)
org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:585)
org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
javax.servlet.GenericServlet.init(GenericServlet.java:212)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Thread.java:662) 
```

当我为流程配置了所有东西但我得到了这个例外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:27:21.940

这可能是由于您的类路径上的 Spring 版本冲突。#merge 在 Spring Framework 3.1.2 中引入：[http ://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/core/env/ConfigurableEnvironment.html#merge(org.springframework .core.env.ConfigurableEnvironment](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/core/env/ConfigurableEnvironment.html#merge(org.springframework.core.env.ConfigurableEnvironment) )

我猜你有一个 spring-context 3.1.2 jar 和一个 spring-core 3.1.0 或 3.1.1 jar 试图在这里相互交互，显然失败了。

# selenium - 在 Cucumber 测试中调用 @javascript 之后会丢失种子数据

> ID：11951827
> 
> 赞同：1
> 
> 时间：2012-08-14T12:01:14.363
> 
> 标签：selenium, cucumber, capybara

我通过 Cucumber 使用 Capybara 来测试 Rails 应用程序。

Rails 应用程序在 db/seeds.rb 中有一些种子数据，它设置了授权角色和默认用户帐户，并且我添加了一个 test_seed.rake 文件来在`rake db:test:prepare`运行后为测试数据库播种，因为`rake db:seed`没有播种测试数据库。

当我使用 Capybara 运行 Cucumber 功能时，这些种子数据将被单独保留，并且在测试每个功能时所做的任何更改都会回滚。

但是，如果我尝试测试基于 AJAX 的功能，通过将`@javascript`测试放在前面以便 Selenium 运行它，一旦测试完成，种子数据就会被删除。这意味着后续基于授权的测试`rake db:test:prepare`在再次运行之前会失败，因为它们在创建用户帐户时无法找到 role_id。

Selenium 为什么要这样做？更重要的是，我该如何阻止它？

（我知道我可以在每次测试之前使用 Cucumber hooks 加载数据。但是这些数据也需要在基于 RSpec 的单元测试之前加载。它还需要加载到开发和生产数据库中。所以使用内置的- in seed 机制似乎更 DRY。无论如何，数据库不应该因为 Selenium 被调用而以不同的方式回滚！）

**编辑：**我将 database_cleaner 与该`:transaction`策略一起使用。[https://github.com/jnicklas/capybara](https://github.com/jnicklas/capybara)上的文档提到了 database_cleaner，但似乎只是在谈论使用它`:truncation`来使其他一切工作方式与 Capybara 在调用外部浏览器时所做的事情相同。我没有尝试过那个页面上的补丁，因为我不喜欢“奇怪的失败”——有没有更干净的方法？我开始认为删除测试并只关注 AJAX 内容将是最快、最简单的方法……</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:55:30.220

我最终将 DatabaseCleaner.strategy 更改`:truncation`为 Cucumber 和 RSpec，并移至 SeedFu 为数据库播种。

对于黄瓜，将其添加到`env.rb`：

```
Before do
  SeedFu.quiet = true
  SeedFu.seed
end 
```

（记得更改 DatabaseCleaner.strategy！）

对于 RSpec，将其添加到`spec_helper.rb`：

```
config.before(:suite) do
  DatabaseCleaner.strategy = :transaction
  DatabaseCleaner.clean_with(:truncation)
end

config.before(:each) do
  DatabaseCleaner.start
  SeedFu.quiet = true
  SeedFu.seed
end

config.after(:each) do
  DatabaseCleaner.clean
end 
```

遗憾的是，这使得*所有*测试的运行速度都慢了一点，因为以前数据库只播种一次然后回滚，而不是每次都播种。即使种子文件中只有五个角色，也很明显。

# c++ - “包含文件过多”错误 C1014

> ID：11951828
> 
> 赞同：0
> 
> 时间：2012-08-14T12:01:16.760
> 
> 标签：c++, visual-studio, include

我收到以下无法解决的错误。

```
1>k:\school\c++\project_2\project_2\mechanic.h(8): fatal error C1014: too many include files : depth = 1024
1>  Maintenance.cpp
1>k:\school\c++\project_2\project_2\maintenance.h(8): fatal error C1014: too many include files : depth = 1024
(continues for many other files in the project)... 
```

项目中的示例头文件：bike.h

```
//#pragma once      //Make sure it's included only once

using namespace std;
#include <iostream>

#include "Date.h"
#include "Cyclist.h"
#include "Maintenance.h"

#ifndef BICYCLE_H_
#define BICYCLE_H_

class Bicycle
{
public:
Bicycle(Date, int, int, Cyclist);
~Bicycle(void);
    Datum   getDateJoined() const;
    int getFrameSize() const;
    int getBicycleID() const;
    Cyclist getCyclist();

    void    setDateJoined(Date);
    void    setFrameSize(int);

private:
Date dateJoined;
int frameSize;
int bicycleID;
Cyclist cyclist;
list<Maintenance> maintenanceNotes;
};

#endif /* BICYCLE_H_ */ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T12:03:18.130

将您的包含移动到 IFNDEF 语句中。您递归地包含您的文件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T12:07:32.303

猜测一下，我想你有一个循环包含问题。您的标题之一是否`Datum.h`包含任何机会？或者他们是否包含一个包含它的文件？`Wielrenner.h``Onderhoud.h``Fiets.h`

您可以通过确保您的标头 - 包括任何包含的标头 - 由预处理器包含保护器保护来避免这种情况，例如

```
// top of file
#ifndef INCLUDED_MYFILE_H
#define INCLUDED_MYFILE_H

// ... body of the file ...

#endif
// end of file 
```

这将防止您的文件多次包含在编译单元中。

您可能会发现您的构建工具包含一个显示包含树的选项，该选项可以帮助您了解正在发生的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T12:04:24.647

将包含移入`#ifndef FIETS_H_`以避免多次包含它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T12:04:58.953

在每个头文件的开头，都有一个包含保护：

```
#ifndef _THIS_HEADER_
#define _THIS_HEADER_

/* contents */

#endif 
```

确保每个编译单元的每个标头都包含一次。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T12:13:36.583

#pragma once 和 #ifndef / #define / #endif 组合都具有相同的目的：防止相同的定义被意外包含两次到相同的编译单元中。这种结构的公认名称是[“包含守卫”](http://en.wikipedia.org/wiki/Include_guard "包括后卫")。

因此，#pragma once 应该始终是头文件中的第一个语句*，紧随其后的是 #ifndef/#define 对。然后跟随头文件的全部内容，然后是#endif。

如果您了解预处理器的工作方式，您会看到第一次包含标头时，#ifndef 将为真 - 在您的示例中“BICYCLE_H_”尚未定义。因此#ifndef 的主体将被编译，首先#defining "BICYCLE_H_" 然后声明所有你想在头文件中声明的东西。

同一头文件被拉入同一编译单元“BICYCLE_H_”的第二次和任何连续时间实际上已经在第一次定义，并且#ifndef 将为假。这意味着文件的整个正文将被跳过，因此最终结果是*几乎*不管你的结构有多复杂，任何标题都只会被包含一次。

现在，在您的特定情况下，如果您解决了这个问题，您可能会看到另一个问题：我从大量的包含和相对较少的文件中猜测您在某处有一个包含循环。例如，bike.h 可能包含 cyclist.h，而后者又包含了 bike.h，你会得到一个无限的、无法解决的循环。要解决此问题，请查看“[前向声明](https://stackoverflow.com/questions/4926105/what-is-forward-declaration-in-c)”示例。

*   (*) #pragma once 在技术上是特定于编译器的，但得到广泛支持。它执行与#ifdefs 相同的目的，因此从技术上讲，您可以选择其中一个。但是，您经常会同时看到两者“以防万一”编译器一次不理解#pragma。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T12:04:42.383

我从来没有达到包含文件数量的限制，我目前正在研究 1M LOC。我最好的猜测是你有一个包含循环：文件 X 包含 Y，Y（直接或间接）包含 X。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T12:05:22.427

你为什么取消评论`#pragma once`？它是特定于编译器的，工作方式类似于`#ifndef`守卫。我通常在头文件中使用两者。

此外，将警卫放在最开始，甚至在其他`#include`语句之前。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-14T13:06:01.387

首先，您不需要 #pragma once 并且 #ifndef 包含警卫。一个就足够了。

其次，将您的包含放在包含保护中：

```
#ifndef BLAH_H
#define BLAH_H
#include <stuff>
#endif // BLAH_H 
```

第三，为什么不在标题中声明需要的类，然后将它们包含在源中？

```
#ifndef BICYCLE_H_
#define BICYCLE_H_

class Date;
class Cyclist;
class Maintenance;

class Bicycle
{
public:
Bicycle(Date, int, int, Cyclist);
~Bicycle(void);
    Datum   getDateJoined() const;
    int getFrameSize() const;
    int getBicycleID() const;
    Cyclist getCyclist();

    void    setDateJoined(Date);
    void    setFrameSize(int);

private:
Date dateJoined;
int frameSize;
int bicycleID;
Cyclist cyclist;
list<Maintenance> maintenanceNotes;
};

#endif /* BICYCLE_H_ */ 
```

# xml - 如何在浏览器中查看 xsl 输出？

> ID：11951831
> 
> 赞同：2
> 
> 时间：2012-08-14T12:01:24.443
> 
> 标签：xml, xslt

每个人！

我正在基于一些 xml 数据文件构建一个网站，所以我选择使用 XSLT 来绑定浏览器中的样式表。

起初它工作得很好，但最近，随着模板变得越来越复杂，发生了一些奇怪的事情。

我使用“copy-of”元素将数据复制到样式表中。这是代码：

```
<div class="section1">
    <xsl:copy-of select="article/bodydata/*" />
</div> 
```

所以，基本上，我将“bodydata”节点的所有子元素复制到 <div /> 中。

但它不起作用。例如，我在 bodydata 中有一个 <img /> 元素，如果我在浏览器中访问 xml 文件，该图像不会出现。另一方面，如果我手动将“bodydata”元素复制到该 div 中，并将 .xsl 文件转换为 .html 文件，则该图像会显示出来。

所以，这是我的问题，我可以在浏览器中查看 xml 数据和 xsl 数据的组合输出吗？我需要任何扩展或什么？

以及关于可能出现什么问题的任何建议？我对 xslt 很陌生，所以我似乎误解了 XSLT 的真正作用。谢谢！

更新

为了说明这个问题，我写了一个小样本。

首先，我创建了一个示例 xml 数据文件：

```
<?xml version='1.0' encoding='utf-8'?>
<?xml-stylesheet type="text/xsl" href="article.xsl"?>
<article>
    <bodydata>
        <center>
            <img alt="sample" src="http://www.google.com/logos/classicplus.png" />
        </center>
        <p>
          <data class="tts_data">
          this is the paragraph.
          </data>
        </p>
        <p>
          <data class="tts_data">this is the second paragraph</data>
          <data class="tts_data">more data</data>
          <data class="tts_data">...</data>
        </p>
    </bodydata>
</article> 
```

所以，你可以看到，“bodydata”元素中的所有节点都是需要在网页上显示的html元素。为了显示它，我创建了一个示例 xsl 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
      <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
          <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
          <meta name="robots" content="noindex" />
        </head>
        <body>
          <article>
           <header>
                  header of the article
               </header>
               <section>
                  <xsl:copy-of select="article/bodydata/*" />
           </section>
      </article>
          <footer>
          footer part of the page
          </footer>
        </body>
     </html>
    </xsl:template>
</xsl:stylesheet> 
```

结果是这样 ![xslt 结果](../Images/12d5a06a709ab5af11ededd680bc1221.png) 的：img 元素就这样消失了。

接下来，我将 bodydata 元素复制到部分部分，并形成了一个新的 html 文件。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="robots" content="noindex" />
</head>
<body>
  <article>
    <header>
     header of the article
    </header>
    <section>
      <center>
        <img alt="sample" src="http://www.google.com/logos/classicplus.png" />
      </center>
      <p>
        <data class="tts_data">
        this is the paragraph.
        </data>
      </p>
      <p>
        <data class="tts_data">
        this is the second paragraph, 
        </data>
        <data class="tts_data">
        more data
        </data>
        <data class="tts_data">...</data>
      </p>
  </section>
    </article>
    <footer>
    footer part of the page
    </footer>
  </body>
</html> 
```

这里的结果是： ![html文件的结果](../Images/a48273c97c8d765beb9bd9b681768419.png) 图像出现了。

所以我想知道这里有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:13:31.167

考虑向我们展示最小但完整的示例来演示问题，否则很难说清楚。`xsl:copy-of`听起来对我来说是正确的方法，假设`bodydata`元素具有 HTML 元素作为子元素。至于查看转换结果，现在大部分浏览器都自带开发工具（或者你可以安装类似Firebug的工具），然后你可以在浏览器中按F12查看文档的DOM树来查看结果。至于复制到结果树的元素没有显示出来，通常可能是名称空间问题（即复制 HTML 名称空间-less`img`到 XHTML 结果文档）。因此，请向我们展示您尝试过哪些浏览器的更多详细信息，`output`您的 XSLT 具有的方法，您尝试创建的 HTML 版本作为转换结果（即 HTML 4.01、XHTML 1.0、HTML5）。

[编辑] 在您当前的示例中，您使用在 XHTML 1.0 命名空间中命名的根元素`html`作为结果树，Firefox/Mozilla 将您的结果呈现为命名空间很重要的 XML。当您`img`从输入 XML 复制`img`元素时，您将没有名称空间的元素复制到 XHTML 文档中，因此由于元素上缺少正确的名称空间，`img`浏览器不会将该`img`元素识别为 XHTML`img`元素。因此，您要么需要更改输入 XML 以将 XHTML 命名空间用于要复制的 (X)HTML 片段，要么在我看来，这些天的重点是没有命名空间的 HTML 4 或 HTML5，您只需使用样式表的结果树中的那个版本的 HTML，即你**没有为文档的根元素使用命名空间**, 你设置`<xsl:output method="html" version="4.01"/>`或`<xsl:output method="html" version="5.0"/>`. 这样问题就应该消失了。

作为替代方案，如果您确实希望结果是 XHTML，但您想将`img`无命名空间中的 XML 元素复制到 XHTML 结果树中，正确的方法是不使用`copy-of`，而是使用`<xsl:apply-templates/>`，然后您需要编写将您需要的元素转换为 XHTML 命名空间的模板，例如

```
<xsl:template match="img | p | center">
  <xsl:element name="{local-name()}" namespace="http://www.w3.org/1999/xhtml">
   <xsl:copy-of select="@*"/>
   <xsl:apply-templates/>
  </xsl:element>
</xsl:template> 
```

在我看来，所有浏览器供应商都专注于不带命名空间的 HTML5，但我建议不要转换为 XHTML，而是以不带命名空间的 HTML 4.01 或 HTML5 为目标，您可以在浏览器中与 XSLT 1.0 获得更好的跨浏览器互操作性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:17:45.123

**当我使用 IE9 显示 XML 文件时，我得到了完整的想要的结果**：

![在此处输入图像描述](../Images/d27fe9f83c2ea581937e98c22a82551c.png)

**更新**：

如 Martin Honnen 所示，缺少的`xsl:output`语句会导致`xml`使用输出方法（默认），这就是导致浏览器不将输出视为 HTML 的原因。

添加`<xsl:output method="html"/>`解决问题。

# ruby-on-rails - 不要在 HABTM 中使用 AND 条件

> ID：11951837
> 
> 赞同：0
> 
> 时间：2012-08-14T12:01:50.107
> 
> 标签：ruby-on-rails

我正在使用 rails，我有两个表 Post 和 Tags 与 habtm 关系。

以下句子起作用：

```
@posts = Post.find(:all, :include=>:tags, :conditions => ['tags.term LIKE ? OR tags.term LIKE ?', "%Barcelona%", "%restaurante%" ]) 
```

或者

```
@posts = Post.find(:all, :include=>:tags, :conditions => ['tags.term  in (?)', ['Barcelona','restaurante'] ]) 
```

但这一个，`AND`有条件，不起作用：

```
@posts = Post.find(:all, :include=>:tags, :conditions => ['tags.term LIKE ? AND tags.term LIKE ?', "%Barcelona%", "%restaurante%" ]) 
```

我想知道获得所有包含这两者的帖子的句子`tags.term`：“Barcelona and restaurante”

提前致谢

埃米利奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:19:09.070

我回应自己，为我工作，希望可以帮助别人：

@posts = Post.find_by_sql("select * from posts p where (select count(distinct t.id) from posts_tags pt left join tags t on pt.tag_id=t.id where t.term in ('Barcelona', 'restaurante ') 和 pt.post_id = p.id) >= 2")

# jquery - jQuery UI 自动完成等待搜索事件完成

> ID：11951839
> 
> 赞同：1
> 
> 时间：2012-08-14T12:01:53.367
> 
> 标签：jquery, jquery-ui

我有一个绑定到 jQuery UI 自动完成的文本框。当用户从自动完成下拉列表中选择一个选项时，JSON 数据用于使用来自远程源的用户详细信息填充表单。

我有一个绑定了以下功能的重置按钮：

```
$('#btn_reset').on('click', function() {
    $('#txt_name').autocomplete('search');
    $('.ui-menu-item').children().eq(0).click();
    return false;
}); 
```

`search`这适用于调用之前完成的少量本地数据`click()`，但是对于大量外部数据，它`search`不会及时完成，从而给我一个`'item' is null or not an object`错误。

如何让 jQuery`search`在调用之前等待完成`click()`？

这是使用本地数据源的工作小提琴：http: [//jsfiddle.net/3KTtT/3/](http://jsfiddle.net/3KTtT/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:56:34.580

解决方案是将函数绑定到`open`自动完成事件，以检查布尔变量以确定是否正在重置表单。

```
var reset = false;
$(function() {    
    $('#txt_name').autocomplete({
        source: [{"label":"john smith","address":"19 Tree Lane"}],
        delay: 0,
        autoFocus: true,
        open: function() {
            if(reset){
                $('.ui-menu-item').children().eq(0).click();
                reset = false;
            }
        },
        select: function(event, ui) {
            $('#txt_address').val(ui.item.address);
        }

    });

    $('#btn_reset').on('click', function() {
        reset = true;
        $('#txt_name').autocomplete('search');
        return false;
    });

}); 
```

在这里查看小提琴：http: [//jsfiddle.net/RVnkz/2/](http://jsfiddle.net/RVnkz/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:20:23.107

我已经更改了您的示例以包含一个延迟循环，它会检查是否有值，然后我调用了您的点击事件。应该让你走上正确的轨道：

[jsFiddle 演示](http://jsfiddle.net/jjay225/3KTtT/18/)

如果您查看下面的代码，我得到的大于 0 只是为了您可以测试代码，但它应该小于 1。

```
 $('#btn_reset').on('click', function() {
    $('#txt_name').autocomplete('search');
    if($('#txt_name').val().length>0) //THIS LINE
    {
      CheckValue();
   } 
    else
    {                      
    $('.ui-menu-item').children().eq(0).click();
    return false;
    }
}); 
```

# iphone - 如何为 UITextview 调用 textViewShouldEndEditing 方法？

> ID：11951840
> 
> 赞同：-3
> 
> 时间：2012-08-14T12:01:54.943
> 
> 标签：iphone, objective-c, ios

在我的 UITextView 中，我已经完成了编辑，我希望调用我的 textViewShouldEndEditing 来移除键盘焦点。我已经尝试使用返回键，但它正在添加新行。我该怎么做才能删除 UITextView 的键盘。我已经完成了具有 SentNotification 的文本字段。在这里做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:13:53.010

~~为了使返回键关闭键盘，实现~~

 ~~```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
   [textField resignFirstResponder];
   return NO; // to not insert the return character
} 
```~~  ~~在导航栏中实现一个按钮，用

```
[_textView resignFirstResponder]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:20:28.170

如果想在按下回车键后隐藏键盘，实现如下*UITextViewDelegate*方法：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    // Did user press return key?
    if([text isEqualToString:@"\n"]) {
        // tell the textView to resign being first responder, which will also hide the keyboard
        [textView resignFirstResponder];

        // Don't allow textView to insert a LF into its text property
        return NO;
    }

    // allow all other edits
    return YES;
} 
```

如果您想要多行，则不能使用返回键，因此您必须为此创建一个按钮。鉴于您的 ViewController 被推送到 UINavigationController 的导航堆栈上，请将以下代码添加到您的 init 方法中：

```
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonItemStyleDone
                                                                             target:self
                                                                             action:@selector(done)];
self.navigationItem.rightBarButtonItem = doneButton;
[doneButton release]; 
```

done 方法只是告诉 UITextView 辞去第一响应者的职务：

```
- (void)done;
{
    [self.textView resignFirstResponder];
} 
```

这显然要求您可以通过属性或 IBOutlet 访问您的 UITextView。

如果您不使用 UINavigationController，请向您的视图添加一个简单的 UIButton（例如通过您的视图 XIB 文件中的 Interface Builder）并通过目标操作调用*done方法：*

```
[button addTarget:self action:@selector(done) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:23:23.790

您必须在 .h 文件中为 textview 设置委托，`UITextViewDelegate`然后编写以下方法来返回键盘。

```
-(void) textViewDidEndEditing:(UITextView *)textView
{
  [textView resignFirstResponder];
} 
```~~

# html - 删除空白空间 - 100% CSS HTML 页面

> ID：11951844
> 
> 赞同：0
> 
> 时间：2012-08-14T12:02:01.213
> 
> 标签：html, css

我刚刚设法启动并运行了一个基于 style.css 的网站

CSS 文件代码为

```
html 
{
    height:100%;
}
{
  position: relative;
  z-index: 0;
  width: 100%;
  left: 0;
  top: 0;
  cursor:default;
  overflow:visible;
}

body
{
  padding: 0; 
  margin:0;
  color: #000000;
  height:100%;
  min-height:100%;
  background-color: #D3D8FD;
  background-image: url('images/Bottom_texture.jpg');
  background-repeat: repeat-x;
  background-attachment: fixed;
  background-position: top center;
  min-width: 820px;
}

.cleared
{
  display:block;
  clear: both;
  float: none;
  margin: 0;
  padding: 0;
  border: none;
  font-size: 0;
  height:0;
  overflow:hidden;
} 
```

我无法理解如何更改此值，因此当在大屏幕上打开页面时，空白空间和 100% 水平拉伸不存在。我只需要页面的实际大小。所以没有留下空白空间。我已经阅读了所有关于 css 的内容，但无法获得合适的代码，因为我不太擅长。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:10:23.560

如果我明白你想要做什么......

这应该适用于您拥有的代码，使 html 和 body 100% 高度，但您还需要添加

```
div#yourdiv { 
  height:100% 
} 
```

对于您想要占据浏览器窗口的整个 100% 高度的任何 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:29:08.507

更新代码，用这个替换你的所有代码：

**CSS**

```
{ 
  position: relative; 
  z-index: 0; 
  width: 100%; 
  left: 0; 
  top: 0; 
  cursor:default; 
  overflow:visible; 
}     
body 
{ 
  padding: 0;  
  margin:0; 
  color: #000000; 
  background-color: #D3D8FD; 
  background-image: url('images/Bottom_texture.jpg'); 
  background-repeat: repeat-x; 
  background-attachment: fixed; 
  background-position: top center; 
  min-width: 820px; 
} 
.cleared 
{ 
  display:block; 
  clear: both; 
  float: none; 
  margin: 0; 
  padding: 0; 
  border: none; 
  font-size: 0; 
  height:0; 
  overflow:hidden; 
} 
```

希望这就是你要找的...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:22:45.997

查看页面上的 HTML，您有一个标签，其中包含
检查 html 的第 111 行。

您的文本检查第 113 行右侧还有一个空座位。

这仅适用于主页，但删除它们，您将删除文本之后和页脚之前存在的空白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:13:35.327

尝试放置：

```
margin:0px 0px 0px 0px; <---I used this for IE
size: 100%; <---image stretches with any browser 
```

# sql - 如何查找数据库字符串“JAN-11”的上个月？

> ID：11951845
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:02:09.297
> 
> 标签：sql, date

我有一个`p_name`包含月份数据的数据库列`MMM-YY`（例如“JAN-11”）。它是类型`varchar`。如何找到该数据的上个月（在示例“Dec-10”中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:16:48.570

*假设您使用 SQL Server：*

转换`JAN-11`为`datetime`对象，减去 1 个月，然后转换回您的字符串格式。

```
declare @date nvarchar(10) = 'JAN-11'

declare @dt datetime = '1-' + @date --Converts to datetime
SET @dt = DATEADD(m, -1, @dt) --Subtracts 1 month

RETURN UPPER(REPLACE(RIGHT(CONVERT(nvarchar(9), @dt, 6), 6), ' ', '-'))
--Returns "DEC-10" 
```

然后，您可以将此逻辑放入[用户定义的函数](http://msdn.microsoft.com/en-us/library/aa175085%28v=sql.80%29.aspx)中，并将其称为：

```
SELECT dbo.PreviousMonth("JAN-11") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:16:33.780

```
Declare @pramDate varchar(10)
set @pramDate = '01/05/2012'

SELECT UPPER(LEFT(DateName( month,DATEADD(mm, DATEDIFF(mm, 0, CONVERT(datetime,@pramDate)) - 1, 0)),3)) + 
   '-' + substring(DateName( Year, CONVERT(datetime,@pramDate) ) ,3,4) 
```

只需参考这个例子，你就会得到你正在寻找的东西

# python - 需要帮助使用 Ctypes 加载共享库

> ID：11951846
> 
> 赞同：1
> 
> 时间：2012-08-14T12:02:11.057
> 
> 标签：python, shared-libraries, ctypes

我必须为大型 C 库创建一个 python 包装器。我正在尝试使用 ctypes 模块来执行此操作，但是当我尝试加载共享库时出现错误。这是我目前正在运行的python代码。

```
import ctypes

praatlib_path = '/n/banquet/da/martega/Programming/libs/libpraat.so'
praatlib = ctypes.CDLL(praatlib_path)

print 'Hello, World!' 
```

不幸的是，我收到以下错误，我不知道如何调试：

```
Traceback (most recent call last):
  File "./praatlib.py", line 9, in <module>
    praatlib = ctypes.CDLL(praatlib_path)
  File "/usr/local/lang/python-2.7.3/lib/python2.7/ctypes/__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: /n/banquet/da/martega/Programming/libs/libpraat.so: undefined symbol: _Znaj 
```

谁能解释这意味着什么以及我该如何解决它？

如果有用，这里是 Makefile 中构建共享库的命令。

```
gcc -shared -Wl,-soname,libpraat.so -o libpraat.so `find num glpk audio stat LPC FFNet dwtools artsynth fon dwsys GSL kar FLAC mp3 library -name "*.o"` 
```

**编辑：** 我用 g++ 而不是 C++ 重新编译了它。这修复了原始错误，但现在我收到以下错误，我可能必须自己修复：

```
Traceback (most recent call last):
  File "./praatlib.py", line 9, in <module>
    praatlib = ctypes.CDLL(praatlib_path)
  File "/usr/local/lang/python-2.7.3/lib/python2.7/ctypes/__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: /n/banquet/da/martega/Programming/libs/libpraat.so: undefined symbol: Melder_hasError 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:17:19.770

缺少的符号`_Znaj`demanges 为`operator new[](unsigned int)`：

```
$ c++filt _Znaj
operator new[](unsigned int) 
```

尝试使用 g++ 而不是 gcc 编译您的库

# java - 为什么 f:param 返回 null？

> ID：11951851
> 
> 赞同：2
> 
> 时间：2012-08-14T12:02:26.470
> 
> 标签：java, jsf, richfaces, jboss-4.2.x

jsf 1.2、jboss 4.2.3 和richfaces 3.3.3

我正在尝试将 a 的索引作为 a 发送，但它一直返回 null：

```
<ui:repeat id="al11" var="albumslistvalue1" value="#{AlbumDetailBean.getAlbumImagesList()}" varStatus="listimages">
  <h:form>
    <h:commandLink value="proxima" id="next" action="#{AlbumDetailBean.escreveparam()}">
      <f:param name="fotoid" value="#{listimages}" />
    </h:commandLink>
  </h:form>
</ui:repeat> 
```

escreveparam() 方法只写入参数：

```
public void escreveparam(){
    String fotoid = ((HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest()).getParameter("fotoid");
    System.out.println("Teste:" + fotoid);
} 
```

为什么总是为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:21:34.560

您正在使用 JSF 1.x，这意味着您正在使用 Facelets 1.x（如`jsf-facelets.jar`文件中所示）。该`<ui:repeat>`标签在[Facelets 1.x中](http://facelets.java.net/nonav/docs/dev/docbook.html#template-repeat) **没有** `varStatus`属性。它是在[Facelets 2.0](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/repeat.html)中引入的。

您需要寻找替代方法。例如`<c:forEach>`

```
<c:forEach value="#{bean.albums}" var="album" varStatus="loop">
  <h:form>
    <h:commandLink id="next" value="proxima" action="#{bean.next}">
      <f:param name="id" value="#{loop.index}" />
    </h:commandLink>
  </h:form>
</c:forEach> 
```

*（请注意，您最初对`varStatus`对象的使用是完全错误的，它不会给您原始索引，而是一个[完整的对象](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/jstl/core/LoopTagStatus.html)，其中包含所有迭代状态详细信息，其中包括一个`getIndex()`方法，您实际上应该使用`#{listimages.index}`或其他东西——提供您使用的是 Facelets 2.x）*

或者只是迭代`Album`对象本身的 ID

```
<ui:repeat value="#{bean.albums}" var="album">
  <h:form>
    <h:commandLink id="next" value="proxima" action="#{bean.next}">
      <f:param name="id" value="#{album.id}" />
    </h:commandLink>
  </h:form>
</ui:repeat> 
```

无论哪种方式，只需使用`<managed-property>`in或 的`faces-config.xml`值来检索它：`#{param.id}``ExternalContext#getRequestParameterMap()`

```
public void next() {
    String id = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("id");
    // ...
} 
```

顺便说一句，由于您的环境似乎支持 JBoss EL（如在 EL 中使用带括号的完整方法名称所示），您也可以将整体`Album`作为操作方法参数传递

```
<ui:repeat value="#{bean.albums}" var="album">
  <h:form>
    <h:commandLink id="next" value="proxima" action="#{bean.next(album)}" />
  </h:form>
</ui:repeat> 
```

和

```
public void next(Album album) {
    // ...
} 
```

# scala - 递归函数的返回类型

> ID：11951853
> 
> 赞同：3
> 
> 时间：2012-08-14T12:02:27.143
> 
> 标签：scala

一般是什么类型的`fs`？

```
 lazy val fs  = List(2,3,4).zip(fs.tail) 
```

编译器要求在编译时设置它。

更新：我想考虑第二个欧拉项目问题的解决方案：

```
 lazy val fs: Stream[Int] =
      0 #:: 1 #:: fs.zip(fs.tail).map(p => p._1 + p._2)

   fs.view.takeWhile(_ <= 4000000).filter(_ % 2 == 0).sum 
```

我只是想调试在这些步骤中发生的事情

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T12:28:27.803

我认为没有最精确的类型可以描述它。当然，它不能被计算，所以实际的类型是`Nothing`.

如果我们忘记隐含的 canBuildFrom，则 zip in 的签名`List[A]`将是

```
def zip[B](l: List[B]) : List[(A,B)] 
```

从 A = Int 开始，很明显我们有一个`List[(Int, B)`]，甚至没有考虑到`zip`is的论点`fs.tail`。如果我们添加该知识，我们现在拥有`List[(Int, (Int, B))]`并且可以从那里循环，您可以键入它`List[(Int,(Int, (Int, _)))]`并嵌套任意多个级别。

我相信没有办法在 scala 中表达最精确的类型（嵌套到无限）。反正它是无人居住的，这个类型不包含任何值，fs 也无法计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:27:56.490

以下编译，但由于定义 recursize 性质，访问会`fs`生成 a 。`StackOverflowError`

```
lazy val fs:List[Product] = List(2,3,4).zip(fs.tail) 
```

如果我们想更具体地了解类型，我们可以执行以下操作：

```
lazy val fs:List[(Int, (Int, Product))] = List(2,3,4).zip(fs.tail) 
```

类型不是`Nothing`。由于以下内容无法编译：

```
scala> lazy val fs:Nothing = List(2,3,4).zip(fs.tail)
<console>:8: error: value tail is not a member of Nothing
   lazy val fs:Nothing = List(2,3,4).zip(fs.tail) 
```

如果我们将 fs 定义为 等，也会发生类似的类型错误`List[Nothing]`。`List[(Int, Nothing)]`所以很明显，表达式的类型是 a `List`of `Product`。现在如果我们`Stream`改用，我们可以做一些不会导致运行时错误的东西：

```
scala> lazy val fs:Stream[Any] = 0 #:: 1 #:: fs.zip(fs.tail).map(p => p:Any)
fs: Stream[Any] = <lazy>

scala> fs take 5 foreach println
0
1
(0,1)
(1,(0,1))
((0,1),(1,(0,1))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:30:52.377

我认为这不可能以类型安全的方式进行，请看：

```
scala> lazy val fs=List(1,2,3).zip(fs.tail)
<console>:7: error: recursive lazy value fs needs type
       lazy val fs=List(1,2,3).zip(fs.tail)
                                   ^

scala> lazy val fs:List[(Int,Int)]=List(1,2,3).zip(fs.tail)
<console>:7: error: type mismatch;
 found   : List[(Int, (Int, Int))]
 required: List[(Int, Int)]
       lazy val fs:List[(Int,Int)]=List(1,2,3).zip(fs.tail) 
```

至少我看不到如何获得任何有用的结果。你的意图是什么？

另一方面，我们可以这样做：

```
scala> val l = List(1,2,3)
l: List[Int] = List(1, 2, 3)

scala> val fs = l.zip(l.tail)
fs: List[(Int, Int)] = List((1,2), (2,3)) 
```

这是你想要的结果吗？

# c# - 如何将图像的 BLOB 保存到 sql 数据库中而不先将其保存到文件系统？

> ID：11951859
> 
> 赞同：0
> 
> 时间：2012-08-14T12:02:38.520
> 
> 标签：c#, .net, sql-server, upload, blob

我一直试图找出的是如何将图像的 BLOB 存储到我的数据库中，而无需先将其保存到文件系统，因此直接从服务器的内存中。

我使用 sql server 和其他表单信息，我有 2 张图像需要存储在数据库中。我还想知道如何将它们读出并将它们转换回图像。

在数据库中，我有“图像”类型的“缩略图”。如果我没有错，那应该是正确的。

对于图像上传，我使用以下 asp 控件：

```
<asp:FileUpload ID="_imageUpload" runat="server" /> 
```

我从来没有做过这样的事情，因为我对使用数据库非常陌生，尤其是与网站一起使用。

哦，对不起，如果这个问题已经被问到并得到了回答。

提前致谢！

**[编辑]**

我的整个代码：

```
protected void _uploadImageBtn_Click(object sender, EventArgs e)
{
    string extension;

    // checks if file exists
    if (!_imageUpload.HasFile)
    {
        _resultLbl.Text = "Please, Select a File!";
        return;
    }

    // checks file extension
    extension = System.IO.Path.GetExtension(_imageUpload.FileName).ToLower();

    if (!extension.Equals(".jpg") && !extension.Equals(".jpeg") && !extension.Equals(".png"))
    {
        _resultLbl.Text = "Only image files (.JPGs and .PNGs) are allowed.";
        return;
    }

    // checks if image dimensions are valid
    if (!ValidateFileDimensions(140, 152))
    {
        _resultLbl.Text = "Maximum allowed dimensions are: width 1520px and height <= 140px.";
        return;
    }

    int fileLen;
    string displayString = "";

    // Get the length of the file.
    fileLen = _imageUpload.PostedFile.ContentLength;

    // Create a byte array to hold the contents of the file.
    byte[] input = new byte[fileLen - 1];
    input = _imageUpload.FileBytes;

    // Copy the byte array to a string.
    for (int loop1 = 0; loop1 < fileLen; loop1++)
    {
        displayString = displayString + input[loop1].ToString();
    }

    try
    {

        SqlConnection sqlCn = new SqlConnection("Data Source=localhost;Initial Catalog=database;User ID=user;Password=pw");

        string qry = "INSERT INTO Project (thumbnail) VALUES (@thumbnail)";

        SqlCommand sqlCom = new SqlCommand(qry, sqlCn);

        sqlCom.Parameters.Add("@thumbnail", SqlDbType.Image, input.Length).Value = input;

        sqlCn.Open();
        sqlCom.ExecuteNonQuery();
        sqlCn.Close();

    }

    catch (Exception)
    {
        (...)
    }
}

public bool ValidateFileDimensions(int aHeight, int aWidth)
{
    using (System.Drawing.Image image = System.Drawing.Image.FromStream(_imageUpload.PostedFile.InputStream))
    {
        return (image.Height == aHeight && image.Width == aWidth);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:06:57.313

您可以将*返回*的字节数组保存在`FileUpload.FileBytes`.

```
if(_imageUpload.HasFile)
{
 byte[] imageData = _imageUpload.FileBytes;

 using(SqlConnection sqlCn = new SqlConnection("Server=localhost;database=databaseName;uid=userName;pwd=password"))
  {
    string qry = "INSERT INTO Project (thumbnail) VALUES (@thumbnail)";
    using(SqlCommand sqlCom = new SqlCommand(qry, sqlCn))
     {
       sqlCom.Parameters.Add("@thumbnail",
                              SqlDbType.Image,
                              imageData.Length).Value=imageData;
       sqlCn.Open();
       sqlCom.ExecuteNonQuery();
       sqlCn.Close();
     }
   }
} 
```

编辑：

```
protected void _uploadImageBtn_Click(object sender, EventArgs e)
{
    string extension;

    // checks if file exists
    if (!_imageUpload.HasFile)
    {
        _resultLbl.Text = "Please, Select a File!";
        return;
    }

    // checks file extension
    extension = System.IO.Path.GetExtension(_imageUpload.FileName).ToLower();

    if (!extension.Equals(".jpg") && !extension.Equals(".jpeg") && !extension.Equals(".png"))
    {
        _resultLbl.Text = "Only image files (.JPGs and .PNGs) are allowed.";
        return;
    }

    // checks if image dimensions are valid
    if (!ValidateFileDimensions(140, 152))
    {
        _resultLbl.Text = "Maximum allowed dimensions are: width 1520px and height <= 140px.";
        return;
    }

    byte []input = _imageUpload.FileBytes;
    SqlConnection sqlCn = new SqlConnection("Data Source=localhost;Initial 
                                 Catalog=database;User ID=user;Password=pw");

    string qry = "INSERT INTO Project (thumbnail) VALUES (@thumbnail)";
    SqlCommand sqlCom = new SqlCommand(qry, sqlCn);
    sqlCom.Parameters.Add("@thumbnail", SqlDbType.Image, input.Length).Value = input;
    sqlCn.Open();
    sqlCom.ExecuteNonQuery();
    sqlCn.Close();
} 
```

# c# - 如何使类型变量与 Linq to SQL 一起使用？

> ID：11951864
> 
> 赞同：0
> 
> 时间：2012-08-14T12:03:00.900
> 
> 标签：c#, linq-to-sql

我正在尝试制作各种通用功能，在我的代码的某个地方我有这些行

```
myDataContext dc = new myDataContext();
.
.
.(some code later)
.
Sucursal sucursal = dc.Sucursal.SingleOrDefault(s => s.Id == id); 
```

效果很好。现在，当我尝试制作“通用”表单时，问题就来了

```
public static void FindWithId<DataBaseTable>(Table<DataBaseTable> table, int id)
    where DataBaseTable : class
{                    
   DataBaseTable t = table.SingleOrDefault(s => s.GetType().GetMember("Id").ToString() == id.ToString());
} 
```

执行此行时

```
FindWithId<Sucursal>(dc.Sucursal,01); 
```

我收到以下错误

> 方法 'System.Reflection.MemberInfo[] GetMember(System.String)' 不允许转换 SQL。

大致翻译为：

> 方法 'System.Reflection.MemberInfo [] GetMember (System.String)' 不支持转换为 SQL。

我能做些什么来完成这项工作？

谢谢！

**更新**解决方案

我一直在努力寻找解决方案，直到我遇到这个[线程](https://stackoverflow.com/questions/735140/c-sharp-linq-to-sql-refactoring-this-generic-getbyid-method)，它给出了一个非常彻底的答案，但为了我的目的，我将其调整为：

```
 public class DBAccess
{
    public virtual DataBaseTable GetById<DataBaseTable>(int id, Table<DataBaseTable> table) where DataBaseTable : class
    {
        var itemParameter = Expression.Parameter(typeof(DataBaseTable), "item");
        var whereExpression = Expression.Lambda<Func<DataBaseTable, bool>>
            (
            Expression.Equal(
                Expression.Property(
                    itemParameter,
                    "Id"
                    ),
                Expression.Constant(id)
                ),
            new[] { itemParameter }
            );
        return table.Where(whereExpression).Single();
    }
} 
```

希望它对某人有用：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:14:14.397

如果您只想要获取 Id 属性的通用方法，则可以更改

```
where DataBaseTable : class 
```

成为像

```
where DataBaseTable : IEntity 
```

其中 IEntity 是一个带有 Id 属性的接口，您的所有实体都可以实现该接口。

您收到错误的原因是因为它试图将反射方法转换为 SQL，这在 SQL 中没有任何意义，因为表上没有“方法”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:17:01.423

您不能那样做，因为您基本上是在尝试在 SQL 中使用反射方法：作为参数传递的内容`SingleOrDefault()`将被转换为 SQL。

旁注：`s.GetType().GetMember("Id")`返回 type 的值`MemberInfo`，而`MemberInfo.ToString()`不是您要查找的值。

# android - 安卓手机控制

> ID：11951865
> 
> 赞同：7
> 
> 时间：2012-08-14T12:03:02.073
> 
> 标签：android, admin, device

我不想做广告，但我的应用程序行为的示例应用程序是 ESET 防病毒软件。

我的应用程序要求的一项功能是卸载需要密码。我将我的应用程序添加到设备管理列表中，现在无法卸载它。但是您可以将应用程序停用为管理设备。当您转到“设置”>“位置和安全”>“选择设备管理员”并尝试停用 ESET Security 时，它会启动正在等待密码并且您的手机已锁定的活动（我猜来自 DeviceAdminReceiver.onDisableRequested()）。Home 键、返回键甚至 SwitchOff 键都没有反应=>

Home，Back，SwitchOff和Camera按钮怎么可能没有反应？

编辑 - 删除了第二个问题（在我从手机中取出电池后 - ESET 也不是设备管理员）

谢谢你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:49:25.207

好的，抱歉 ESET，但这个功能看起来很有趣，所以我看了一下反编译的源 :)

基本工作流程如下：

*   `com.eset.ems.antitheft.receiver.AdminReceiver`的子类`DeviceAdminReceiver`已注册广播操作`DEVICE_ADMIN_ENABLED`，并且`DEVICE_ADMIN_DISABLED`
*   当设备管理员被禁用时`com.eset.ems.antitheft.receiver.AdminReceiver.onDisabled()`被调用
*   `com.eset.ems.antitheft.LockActivity`是从`AdminReceiver.onDisabled()`
*   `LockActivity`显示`com.eset.ems.antitheft.LockingDialog`最阻碍魔法发生的地方

至于 Home 和其他按钮块防病毒软件，请执行以下技巧 - 它使用Android 内部的[ActivityManagerNative](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/ActivityManagerNative.java)。为了保持`LockActivity`在所有其他活动的顶部，它启动了一个线程，该线程不断调用`ActivityManagerNative.moveTaskToFront()`任务`LockActivity`ID。在 API 级别 10 之前，反射用于访问隐藏`moveTaskToFront()`的[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)类，而在 API 10 之后，它只使用`ActivityManagerNative`Android 代码库中的代码来访问它。也`LockActivity`多次`LockingDialog`调用`ActivityManagerNative.closeSystemDialogs()`方法。这样做可能是为了取消长按电源按钮后出现的系统对话框。

至于停止执行`DeviceAdminReceiver.onDisableRequested`实际上我在代码中没有注意到它有什么特别之处。它仅在禁用设备管理员后才开始活动，仅此而已。在我取出电池后，我的手机设备管理员被禁用。

# javascript - 为 HTML5 游戏添加游戏加载器

> ID：11951870
> 
> 赞同：2
> 
> 时间：2012-08-14T12:03:14.693
> 
> 标签：javascript, html

我正在用 HTML5 和 JavaScript 创建一个简单的游戏。

最初，当游戏开始时，加载图像和声音需要一些时间。在此期间，用户必须等待并且屏幕看起来不愉快。

所以这就是我想做的

1.  检查图像和声音的加载状态。

2.  加载资源时增加加载百分比，并分别增加进度条。

我真的没有从哪里开始的任何关键。请引导我完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:20:03.507

监控所有加载项的加载状态可能令人生畏，但简而言之，最好的方法是执行以下操作：

*   首先，添加一个`totalResources`计数器，这样游戏就知道需要多少资源。

*   添加`eventListeners`到加载资源，并添加到`loadingResources`计数器。如果加载成功或失败，请添加到`loadingResources`计数器。

*   一旦计数器相等，要么加载所有资源，要么加载某些文件时出现错误。

这种方法的问题是，在极少数情况下，`loadingResources`可以过早地匹配`totalResources`变量。您可以通过制作一个标志来检查需要加载的所有资源是否已经开始加载来解决此问题。

现在，根据您制作游戏的方式，失败的资源加载不应真正阻止游戏运行。例如，如果声音没有正确加载，它就不会播放。如果需要加载资源，您可能需要重试或中止。

至于基于百分比的加载，这有点不确定。HTML5 规范包含一个进度条，但对于多个资源，您最好的选择可能只是一个在加载资源时填满的进度条。

**附录：**

声音文件加载起来非常痛苦，而且我在所有浏览器上都没有成功完善它。这是我的做法：

1.  首先，不要依赖`load()`函数调用加载`audio`元素。相反，强制它播放，如下所示：

    `sound.channels[i].volume = 0;`

    `sound.channels[i].play();`

    （此外，要重放声音，请`duration`在声音暂停时将 设置为接近 0 的值。）

2.  为了允许同时播放多个声音，最好有多个音频元素（因此是`channels`上面的数组）。但是，您无需等待所有声道加载完毕。一旦加载，克隆节点并再次强制静音播放以避免任何延迟。

3.  有趣的是，使用`canplaythrough`事件回调来查看声音是否准备好更可靠。如果声音加载失败，请使用`error`回调。问题是有许多错误会导致声音文件无法加载。

4.  不要忘记使用`<source>`元素来允许多种音频格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T15:02:31.733

像这样的东西：

```
var assetsToLoad = [],
    assetsLoaded = 0;

var image = new Image();
image.addEventListener("load", loadHandler, false);
image.src = "image.png";
assetsToLoad.push(image);

//...Load other assests, following the same format...

function loadHandler() {
    assetsLoaded++;
    //Display "Loading" in the console while assets are being loaded
    console.log("Loading...");
    //If everthing is loaded, do this:
    if (assetsLoaded === assetsToLoad.length) {
      //Make the game play, possibly by changing its state from "loading" to "playing"
      console.log("All assets loaded");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T05:48:37.243

想加上我的两分钱。除了有一个`loadCounter`，我建议你有一个`errorCounter`并根据当前文件是成功还是失败来增加这些变量中的每一个。在循环结束时，您可以检查这两者的总和是否等于`totalCounter`.

# jquery - Rails 选择需要

> ID：11951873
> 
> 赞同：0
> 
> 时间：2012-08-14T12:03:20.673
> 
> 标签：jquery, ruby-on-rails, select

我在我的 Rails 视图部分中看到了这样的选择标签：

```
= f.select :shipping_id, options_for_select(["Select"] + @shippings.map{ |c| [c.name, c.id]}), :required => true 
```

我不会做的是：如果页面加载，这个选择只显示“请选择我：D”，我必须从选择中选择一些值，而不是这个（“请选择我：D”），如果我有选择或默认“请选择我：D”，我得到错误，或类似的东西？如果我单击此选择，它必须是占位符之类的东西，隐藏哪个值？我知道如何在 jQuery 中执行此操作，但想在 rails 视图中执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:30:36.117

```
= f.select :shipping_id, [["Select Me", "Value for Jquery to attach to"]] + @shippings.map{ |c| [c.name, c.id]}, {:required => true} 
```

你是这个意思吗？

# jquery - 使用 html() 方法显示图像？

> ID：11951874
> 
> 赞同：4
> 
> 时间：2012-08-14T12:03:21.460
> 
> 标签：jquery, html, image, default

我有一个对象包括文本和图像。我想显示它的图像，但如果此图像不可用，则显示默认图像。

像这样的语法：

`$('#MyPlace').html(object.toRender());`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:08:45.843

你可以试试这个。

```
$('#MyPlace img').error(function () {
  $(this).unbind("error").prop("src", 'default image path');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:16:40.027

您可以使用 jQuery 的**.load**和**.error**事件，请参阅[这个 jsFiddle 示例](http://jsfiddle.net/kfGUS/)：

**标记**

```
<img src="http://cdn.dreamincode.net/home/images/monthlygiveaway.gif"></img>

<span id="result"></span>​ 
```

**jQuery**

```
$("img")
    .load(function() {
        $("#result").text("loaded");
    })
    .error(function() {
        $("#result").text("not loaded");
    });
​ 
```

# javascript - D3.js：调整缩放示例以使用折线图？

> ID：11951882
> 
> 赞同：0
> 
> 时间：2012-08-14T12:03:38.300
> 
> 标签：javascript, d3.js

我正在尝试调整[D3.js 存储库中](https://github.com/mbostock/d3/blob/master/examples/zoom/zoom.html)的“缩放”示例以使用折线图。可以在此处找到原始的工作缩放示例 - 只需在较小的图形中选择一个区域即可放大较大的图形：

[http://nestoria.darkgreener.com/zoom.html](http://nestoria.darkgreener.com/zoom.html)

好的！我的折线图改编（从[D3 附带](https://github.com/mbostock/d3/blob/master/examples/line/line.html)的“线”示例中工作）在这里，但它不是很有效。如您所见，当您单击较小的图形时，较大图形上的 x 轴会正确缩放，但该线不会：

[http://nestoria.darkgreener.com/line.html](http://nestoria.darkgreener.com/line.html)

我认为问题出在 line.html 源代码中：

```
focus.select("path").attr("d", area); 
```

应该是

```
focus.select("path").attr("d", line); 
```

但这无济于事。基本上，我并不完全了解修改后的数据如何`context`实际更新`focus`. 请谁能解释我做错了什么？

我在这里创建了一个 jsfiddle 以使其更容易：http: [//jsfiddle.net/MYWRS/4/](http://jsfiddle.net/MYWRS/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:28:57.730

更改

```
focus.select("path").attr("d", area); 
```

到

```
focus.selectAll("path").attr("d", line); 
```

你会看到线路更新。这只是需要做的一部分——如您所见，点没有更新，线条也没有正确剪裁。

我的建议是重构您当前拥有的内容，并将创建线和点的调用包装在一个函数中，该函数将范围显示为参数。使用当前代码，正确的功能将更难实现，因为画线的代码实际上并没有明确地获取数据或范围。

您可能还想看看[dygraphs](http://dygraphs.com/)，它可能已经提供了您想要的所有功能。

# html5-audio - 播放前播放前一个位置的声音从 html 音频标签中的指定位置继续

> ID：11951895
> 
> 赞同：0
> 
> 时间：2012-08-14T12:04:11.960
> 
> 标签：html5-audio

我正在制作 HTML5/javascript 浏览器游戏，但我的音频有问题。

我将所有剪辑都放在一个 mp3 文件中，以最小化发送的请求数量，当我想播放剪辑时，我会寻找剪辑起始位置 (audio.currentTime = startTime) 并播放 (audio.play())音频标签通过事件监听器触发“搜索”事件。

当我暂停播放时，我使用 audio.pause() 方法。

我遇到的问题是，在我要播放的声音开始之前，文件的一瞬间从寻找之前播放音频的位置播放。

还有其他人遇到过这个问题吗？

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:29:38.570

如果您使用的是 Safari，[这](https://stackoverflow.com/questions/9811429/html5-audio-tag-on-safari-has-a-delay?rq=1)可能是您的问题。

此外，我发现 Web Audio API 看起来越来越有吸引力（请参阅我对自己问题的[可能答案，哈哈）](https://stackoverflow.com/questions/11708317/splitting-an-html5-audio-object-into-multiple-audio-objects/11982417#11982417)

编辑：最后，如果您想坚持使用整个 HTML5 音频对象，[这个问题](https://stackoverflow.com/questions/5932412/html5-audio-how-to-play-only-a-selected-portion-of-an-audio-file-audio-sprite)可能会为您指明不同的方向。

# android - 我该如何解决这个模拟器相关的错误

> ID：11951899
> 
> 赞同：0
> 
> 时间：2012-08-14T12:04:19.237
> 
> 标签：android

错误信息：

```
[2012-08-14 17:32:18 - thermometer] Failed to install thermometer.apk on device 'emulator-5556': Connection refused: connect
[2012-08-14 17:32:18 - thermometer] java.net.ConnectException: Connection refused: connect
[2012-08-14 17:32:18 - thermometer] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:23:00.203

尝试这个

```
adb kill-server

adb start-server 
```

然后它不工作 检查您的**防病毒**程序控制对话框，例如 Norton Antivirus 和 ZoneAlarm 或 ESET。

# ruby-on-rails-3 - haml 中的语法错误

> ID：11951902
> 
> 赞同：0
> 
> 时间：2012-08-14T12:04:28.843
> 
> 标签：ruby-on-rails-3, haml

我收到以下haml的语法错误

```
= javascript_include_tag :reports 
= stylesheet_link_tag    :form
= stylesheet_link_tag    :tab

.tabcontainer
  %ul.tabs
    %li#reports
      Reports
  .tab
    .field

= form_for @report, {:html => {class => "form"}} do |f|
  .field
    = f.label :Property
b
%form{ :action => "/reports/find/employees", :method => "get"}
  %fieldset
    %ol
      %li
        %label{:for => "property"} Property:
        %input{:type => "text", :name => "query[1][property]" }
      %li
        %label{:for => "comp"} Comparator:
        %input{:type => "text", :name => "query[1][comp]" }
      %li
        %label{:for => "value"} Value:
        %input{:type => "text", :name => "query[1][value]"}
    %input{:type => "submit", :value => "Go" } 
```

我得到的错误是：

```
index.html.haml:12: syntax error, unexpected tASSOC
haml_temp =  form_for @report, {:html => {class => "form"}} do |f|
                                                  ^
index.html.haml:12: syntax error, unexpected '}', expecting keyword_end
haml_temp =  form_for @report, {:html => {class => "form"}} do |f|
                                                          ^
index.html.haml:17: syntax error, unexpected keyword_ensure, expecting $end
Extracted source (around line #12):

9:   .tab
10:     .field
11: 
12: = form_for @report, {:html => {class => "form"}} do |f|
13:   .field
14:     = f.label :Property
15: b 
```

是什么导致了这个错误？

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:13:33.957

您缺少`:`, 应该是：

```
haml_temp =  form_for @report, {:html => {:class => "form"}} do |f| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:13:11.750

在表单标签有`'html=> {some code}`，你错过`:`了`class

# joomla - 发件人和收件人都在 php 脚本中获取邮件

> ID：11951903
> 
> 赞同：-1
> 
> 时间：2012-08-14T12:04:35.127
> 
> 标签：joomla

我想要一个 php 脚本，其中发送者和接收者都在核心 php 中收到电子邮件......请给我示例或完整脚本的 Web 链接......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:11:40.530

I'm a little confused as to exactly what you need, however seeing as you have tagged this question as Joomla related, I don't see the point in download Zend.

I think a simple contact form extensions will suffice.

[http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms](http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:22:31.043

```
<?php

class MailerDaemon {

/**
* Set $isHTML to true in case the content to be send is in HTML
* if no CC is required, set $cc to be NULL
*/

public function sendMail($toEmail, $toName, $subject, $content, $isHTML, $cc) {
    try {
        $config = array(
            'ssl' => 'tls',
            'port' => '587',
            'auth' => 'login',
            'username' => '<Replace with your Mail Sender Username>',
            'password' => '<Replace with your Mail Sender Password>',
        );
        $transport = new Zend_Mail_Transport_Smtp("<Replace with your SMTP Hostname>", $config);
        Zend_Mail::setDefaultTransport($transport);
        $mail = new Zend_Mail();
        if ($isHTML) {
            $mail->setBodyHtml($content);
        } else {
            $mail->setBodyText($content);
        }
        $mail->setFrom("<Replace with your Mail Sender Username/Email ID>", "<Replace with your Mail Sender Full Name>");
        $mail->addTo($toEmail, $toName);
        if($cc==NULL){$mail->addCc($cc);}
        $mail->setSubject($subject);
        $mail->send($transport);
    } catch (Exception $exc) {
        echo $exc->getTraceAsString();
        return false;
    }
    return true;
}

}

?> 
```

1.  下载并提取 Zend 库 [http://www.zend.com/en/community/downloads](http://www.zend.com/en/community/downloads)
2.  将“Zend”文件夹复制到您的工作目录，该目录可以在解压缩的文件夹中找到（希望在库目录下）。
3.  将以下代码粘贴到 PHP 文件中并按照指示进行必要的更改。

# java - 键盘向上时ListView被向上推

> ID：11951907
> 
> 赞同：0
> 
> 时间：2012-08-14T12:04:43.197
> 
> 标签：java, android, listview, android-edittext, android-softkeyboard

我遇到了这个问题：

当我关注我的 EditText 时，键盘会出现（当然），但它也会将我的 ListView 向上推而不是越过它。
这是没有选择 EditText：

```
---item 1---  
---item 2---  
---item 3---  
---item 4---  
---EditText--- 
```

选择 EditText：

```
---item 3---  
---item 4---  
---EditText---  
---Keyboard--- 
```

现在项目 1 和 2 不在屏幕上（在顶部）。

但我试图实现的是：

```
---item 1---  
---item 2---  
---EditText---  
---Keyboard--- 
```

这只发生在我在清单中得到它时：`android:windowSoftInputMode="adjustPan"`
我使用它是因为当我不使用该行时，会发生这种情况：

```
---item 1---  
---item 2---   
---item 3---  
---keyboard--- 
```

现在 EditText 在键盘后面......

希望大家对如何获取有一些建议：

```
---item 1---  
---item 2---  
---EditText---  
---Keyboard--- 
```

XML:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="424dp" />

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:layout_weight="0.66" >

    <EditText
        android:id="@+id/txt_zoeken"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/btn_zoeken"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:onClick="btn_zoeken"
        android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:46:22.330

试试这个（将你的 EditText 包装在 ScrollView 中），当我遇到同样的情况时，它对我有用。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="424dp" />

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:layout_weight="0.66" >

        <EditText
            android:id="@+id/txt_zoeken"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/btn_zoeken"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:onClick="btn_zoeken"
            android:text="Button" />
    </RelativeLayout>
</ScrollView> 
```

# file - 32 位和 64 位平台上的文件大小是否有任何差异，操作系统可以是任何

> ID：11951911
> 
> 赞同：-2
> 
> 时间：2012-08-14T12:04:50.907
> 
> 标签：file, filesystems, operating-system

我想在我的一个应用程序上显示文件大小。我们的应用程序大部分是 32 位和 64 位的 unix 和 windows 平台。32 位和 64 位平台上的文件大小是否有任何差异，操作系统可能是任何差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T18:00:11.120

如果文件是二进制文件，则应该没有任何大小/FS/VM/OS 问题。如果文件是文本，则文件中可能存在一些差异变化，如 unix 和 windows 之间的“\n/”\r”差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:00:35.563

文件大小限制可能因底层文件系统使用的 32 位或 64 位数据结构而异

# java - OSGi 包之间的 OpenJPA 持久性

> ID：11951918
> 
> 赞同：1
> 
> 时间：2012-08-14T12:05:10.733
> 
> 标签：java, spring, osgi, openjpa, apache-karaf

我`OSGi`在 Apache Karaf 容器上部署了两个包。假设它们是 A 和 B。A 包是包含所有数据库实体和持久性逻辑的主包。B`OSGi`包是一个应用程序，它使用来自 A 的方法将一些数据存储到数据库中。捆绑 B 还具有`CXF`Web 服务端点。持久性由 处理`OpenJPA`。

bundle A 中的方法包装了实体管理器的persist 方法。在包 B 中，有一个方法将对象作为参数，该参数在包 A 中定义，并具有持久化数据的方法。当我在捆绑 B 中调用该方法时，一切正常，数据按预期保存到数据库中。

问题是我想更新 B 包的`CXF`端点实现类中的一个实体，它作为 Spring bean 公开，并`OSGi`引用来自包 A 的对象，其中包含`find`查找我需要更新的实体的语句。

当我调用`find`方法时，实体会正确返回给我，但是当我设置一些新值时，事务不会被提交并且数据不会出现在数据库中。

据我所知，其中一个`OpenJPA`功能是当您调用持久对象时，稍后您可以为其设置一些新数据，并进行所需的事务以更新该实体。它似乎不适用于我的情况。我试图用注释来注释`CXF`端点实现类`org.springframework.transaction.annotation.Transactional`。但这也不起作用。

也许有人知道问题出在哪里？我是否需要编写查询来更新`CXF`端点中的实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:58:04.223

在这种情况下，我建议从 spring 切换到 blueprint。如果您查看 Karaf 使用的 aries 蓝图（例如），您可以从 Bundle A 中检索例如 DAO，从 Bundle B 中调用“更改方法”，它将由附加到 Bundle 的事务管理器持久保存一种。

# c# - WCF 服务中的优先级

> ID：11951924
> 
> 赞同：1
> 
> 时间：2012-08-14T12:05:40.137
> 
> 标签：c#, wcf, web-services

目前，我在单个服务中有多个端点，它们调用相同的操作，但根据它们的优先级具有不同的节流配置。

```
 <serviceBehaviors>
    <behavior name="PriorityService1">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceThrottling maxConcurrentCalls="3" maxConcurrentSessions="3"
        maxConcurrentInstances="3" />
    </behavior>
    <behavior name="PriorityService2">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceThrottling maxConcurrentCalls="5" maxConcurrentSessions="5"
        maxConcurrentInstances="5" />
    </behavior>
    <behavior name="PriorityService3">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceThrottling maxConcurrentCalls="10" maxConcurrentSessions="10"
        maxConcurrentInstances="10" />
    </behavior>
  </serviceBehaviors> 
```

其中每一个都以完全相同的方式处理传入的 SOAP 请求（它只是根据优先级限制它们）。每个优先级都只是继承自`BaseService`这样的类。

```
public class Priority1Service : BaseService { }

public class Priority2Service : BaseService  { }

public class Priority3Service : BaseService  { } 
```

如您所见，Priority 类中没有实现，因为我只是使用继承的行为。有一个更好的方法吗？有没有办法我可以通过肥皂消息中的优先级并让服务根据它处理它？理想情况下，我希望能够摆脱这些只继承行为的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:29:34.137

尝试在 web.config 文件中定义不同的服务配置；

```
<services>
      <service behaviorConfiguration="PriorityService1" name="Sample.Sample">
        ...
      </service>
      <service behaviorConfiguration="PriorityService2" name="Sample.Sample">
        ...
      </service>
      <service behaviorConfiguration="PriorityService3" name="Sample.Sample">
        ...
      </service>
</services> 
```

# linux - ssh-copy id 并期望在 bash

> ID：11951926
> 
> 赞同：1
> 
> 时间：2012-08-14T12:05:44.907
> 
> 标签：linux, bash, shell, expect

我正在用 bash 中的期望进行自动传递。代码是；

```
ssh-copy-id -i $SSH_KEY_PATH_PUB $REMOTE_HOST_USER@$REMOTE_HOST_IP (here asks pass)

VAR=$(expect -c" 
     expect "*?assword:*"
     send "$REMOTE_HOST_PASSWD\r";
     send -- "\r"
     expect eof
     ")

echo "$VAR" 
```

它仍然询问密码。这是什么问题

已解决：ssh-copy-id -i $SSH_KEY_PATH_PUB $REMOTE_HOST_USER@$REMOTE_HOST_IP 必须在期望块中；

```
spawn ssh-copy-id -i $SSH_KEY_PATH_PUB $REMOTE_HOST_USER@$REMOTE_HOST_IP 
```

和线

```
 send "$REMOTE_HOST_PASSWD\r"; 
```

一定是

```
send \"$REMOTE_HOST_PASSWD\r\"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:24:02.230

```
VAR=$(expect -c "expect '' \
  {eval spawn \
  ssh-copy-id -i $SSH_KEY_PATH_PUB $REMOTE_HOST_USER@$REMOTE_HOST_IP; \
  interact -o -nobuffer -re .*assword.* return; \
  send "$REMOTE_HOST_PASSWD\r"; send -- "\r"; \
  expect eof;} ")

echo "$VAR" 
```

# c# - Windows 手机 Web 客户端

> ID：11951929
> 
> 赞同：1
> 
> 时间：2012-08-14T12:06:00.110
> 
> 标签：c#, windows-phone-7, webclient, vk

我正在使用 WebClient 从 web 获取页面，当我得到 google 起始页面时一切正常，但是当我从 vk api WebClient 获取页面时返回 Serer 未找到，但浏览器正常打开此页面我的代码：

```
private void log_Click(object sender, RoutedEventArgs e)
{
    string auth;
    string login = Uri.EscapeUriString(this.login.Text);
    string password = Uri.EscapeUriString(this.pass.Password);
    auth = "https://api.vk.com/oauth/token";
    auth += "?grant_type=password" + "&client_id=id&client_secret=code&username=" + login + "&password=" + password + "&scope=notify,friends,messages";

    //auth = "https://google.com/";

    WebClient client = new WebClient();
    client.DownloadStringCompleted +=new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
    Uri.EscapeUriString(auth);
    client.DownloadStringAsync(new Uri(auth));
}
void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if (e.Error == null)
         MessageBox.Show("Using WebClient: " + e.Result);

    else
        MessageBox.Show(e.Error.Message);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:32:26.173

这只发生`https`在无`200`响应状态的呼叫中。如果您收到`Not found`正确的凭据，请检查您的请求参数。

尝试此解决方法用于非`200`：

```
client.AllowReadStreamBuffering = true; 
```

另外，我看到这条线`Uri.EscapeUriString(auth);`我认为必须是`auth = Uri.EscapeUriString(auth);`

# android - android：如何滚动不断更新文本

> ID：11951930
> 
> 赞同：1
> 
> 时间：2012-08-14T12:06:10.290
> 
> 标签：android

我正在android中开发一个应用程序，我必须在底部水平滚动不同城市的时间。一次，我可以获取这些城市的当地时间，并以水平滚动的文本显示它们。此外，我可以获取每分钟更新的时间并更新整个文本视图。但是，如何在不断滚动的文本中更新那个时间？？？下面是我想做的例子

[http://www.itfseafarers.org/](http://www.itfseafarers.org/)看最上面的黑条...它每分钟自动更新时间，并且字符串连续移动而不从头开始。

# jquery - 如何使用 jQuery 隐藏和显示 div

> ID：11951937
> 
> 赞同：1
> 
> 时间：2012-08-14T12:06:26.223
> 
> 标签：jquery, css, html

我有一个名为“信息”的 div，我希望在单击按钮时显示它。

```
<button>Toggle</button>
<div id="toggle">
Test
</div> 
```

基本上我想使用 jQuery 来显示它的滑动功能，但我不知道如何。我可以在网上找到大部分代码并查看代码片段，但我实际上并不知道将大部分代码放在哪里，有人可以指导我了解我需要将相关代码（从头开始）放在什么地方和什么地方得到这个工作？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:07:43.727

***CSS***

```
#toggle {
  display: none
} 
```

***jQuery***

```
$(document).ready(function() {
   $('button').on('click', function() {
     $('#toggle').slideToggle();
   });
}); 
```

***一点解释：***

*   `$('button')`是`button`标签的选择器。

*   `$('button').on('click',`用于将点击事件绑定到`button`.

*   这里的第二个参数`on()`是回调处理程序，其中的代码将在点击后执行`button`。

*   `$('#toggle')``div`是with的选择器`id=toggle`。

*   `$('#toggle').slideToggle()``div`将在单击按钮时产生滑动（上下）效果。

* * *

### 笔记

您应该在 jQuery dom 就绪函数中编写代码。这就像：

```
$(document).ready(function() {
  // your code
}) 
```

简而言之

```
$(function() {
  // your code
}); 
```

由于这些是 JavaScript 代码，因此您需要将它们放在`<script>`标签中。例如：

```
<script type="text/javascript">
    $(document).ready(function() {
       $('button').on('click', function() {
         $('#toggle').slideToggle();
       });
    });
</script> 
```

但是，如果您将此代码写入外部文件，则必须将该文件包含在`<head>`标记中，如下所示：

```
<script type="text/javascript" src="src_to_script"></script> 
```

* * *

### 根据评论

*是否可以在第一次单击时使按钮消失？*

是的，可能。尝试如下：

```
$(document).ready(function() {
   $('button').on('click', function() {
     $(this).hide(); // disappear the button after first click
     $('#toggle').slideToggle();
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:10:02.897

你也可以这样做：

[这是要检查的jsFiddle](http://jsfiddle.net/DEQ99/)

```
$(document).ready(function() {
  $('button').bind('click', function() {
     if ($('#toggle').is(':visible')) {
       $('#toggle').hide();
     }else{
       $('#toggle').show();
     }
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T12:21:28.940

[在此处输入链接描述](http://jsfiddle.net/n9kre/18/)您可以试试这个：

```
$(document).ready(function(){
    $('div#toggle').hide();
    $('button').on('click', function(){
       $('#toggle').slideToggle();                    
    });
}); 
```

# python - python - 同一目录中模块的绝对导入

> ID：11951941
> 
> 赞同：14
> 
> 时间：2012-08-14T12:06:35.440
> 
> 标签：python

我有这个包：

```
mypackage/
    __init__.py
    a.py
    b.py 
```

而且我想将模块a中的东西导入模块b，在模块b中编写是否有意义

```
from mypackage.a import * 
```

还是我应该使用

```
from a import * 
```

两个选项都可以，我只是想知道哪个更好（第二个有意义，因为它在同一级别，但我正在考虑第一个以避免冲突，例如，如果系统从包含名为的文件的文件夹运行a.py)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T12:11:26.100

您可以安全地使用数字 2，因为不应该有任何冲突 - 您将始终从与当前包相同的包中导入模块。请注意，如果您的模块与标准库模块之一具有相同的名称，它将被导入而不是标准模块。从[文档](http://docs.python.org/tutorial/modules.html#the-module-search-path)：

> 当一个名为的模块`spam`被导入时，解释器首先搜索一个具有该名称的内置模块。`spam.py`如果没有找到，它会在由变量 给出的目录列表中搜索一个文件[`sys.path`](http://docs.python.org/library/sys.html#sys.path)。`sys.path`从这些位置初始化：
> 
> > *   包含输入脚本的目录（或当前目录）。
> > *   [`PYTHONPATH`](http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)（目录名称列表，语法与
> > *   壳变量`PATH`）。
> > *   安装相关的默认值。
> 
> 初始化后，Python 程序可以修改`sys.path`. **包含正在运行的脚本的目录位于搜索路径的开头，位于标准库路径之前。**这意味着将加载该目录中的脚本，而不是库目录中的同名模块。除非打算更换，否则这是一个错误。有关详细信息，请参阅[标准模块](http://docs.python.org/tutorial/modules.html#tut-standardmodules)部分。

该选项`from mypackage.a import *`可用于整个项目的一致性原因。在某些模块中，无论如何您都必须进行绝对导入。因此，您不必考虑模块是否在同一个包中，只需在整个项目中使用统一的样式。此外，这种方法更可靠和可预测。

[Python 风格指南](http://www.python.org/dev/peps/pep-0008/#imports)不推荐使用相对导入：

> 非常不鼓励用于包内导入的相对导入。始终对所有导入使用绝对包路径。即使现在 [PEP 328](http://www.python.org/dev/peps/pep-0328/#guido-s-decision)已在 Python 2.5 中完全实现，它的显式相对导入风格也被积极劝阻。绝对导入更便携，通常更具可读性。

从 python 2.5开始，引入了[包内相对导入](http://docs.python.org/tutorial/modules.html#intra-package-references)的新语法。现在您`.`可以引用当前模块并`..`引用上面1级的模块。

```
from . import echo
from .. import formats
from ..filters import equalizer 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T12:15:40.043

你应该使用`from mypackage.a import things, you, want`.

There are two issues here, the main one is relative vs absolute imports, the semantics of which changed in Python 3, and can optionally be used in Python 2.6 and 2.7 using a `__future__` import. By using mypackage.a you guarantee that you will get the code you actually want, and it will work reliably on future versions of Python.

The second thing is that you should avoid import *, as it can potentially mask other code. What if the a.py file gained a function called `sum`? It would silently override the builtin one. This is especially bad when importing your own code in other modules, as you may well have reused variable or function names.

Therefore, you should only ever import the specific functions you need. Using pyflakes on your sourcecode will then warn you when you have potential conflicts.

# msbuild - msbuild 脚本无法构建 C++ Builder 2010 项目的特定构建配置

> ID：11951953
> 
> 赞同：0
> 
> 时间：2012-08-14T12:07:03.863
> 
> 标签：msbuild, c++builder, c++builder-2010

我在 C++ Builder 2010 中有一个项目组。它包含多个项目。其中一个项目除了*Debug*和*Releae*之外，还有一个*Demo*构建配置，它是Release*的**子*配置。

 *我遇到的问题是，如果我从我们拥有的构建脚本中运行它，调用项目组文件并告诉它我想使用*Demo*配置进行构建，我会收到一个关于*unresolved WinMain*的错误。通过使用不存在的构建配置名称，我得到了同样的错误。所以我最初的想法是，这一定是因为项目组中的其他项目没有*Demo*配置。但是，当我尝试从 cmd 对项目组文件运行 msbuild 并将其传递给*Demo*时，它构建得很好。

```
C:\src\foo\AutoBuild> msbuild ..\foo.groupproj /t:build /p:Configuration=Demo 
```

使用 cmd 中的 msbuild 构建特定项目也是如此。我已经检查了*Config* /*Configuration* 属性是否通过每个`<msbuild />`任务调用进行了传递，并且确实如此。

破解项目组（*.groupproj ）文件并在运行**Release*时强制它为有问题的项目运行*Demo*也有效。

 *```
...

<Target Name="Foo:Make">
  <MSBuild Targets="Make" Projects="Foo.cbproj" Properties="Config=Demo"/>
</Target>

... 
```

知道是什么原因造成的吗？

**更新**

*此外，通过在选择Demo*时仅运行主构建脚本中的特定项目，它也可以正常工作。请注意，*发布*版本已由之前的构建脚本构建。

```
<Target Name="Foo:Build">

...

  <MSBuild Condition="$(Configuration)==''" Targets="Make" Projects="..\Server\Bar.groupproj" Properties="Config=Release" />
  <MSBuild Condition="$(Configuration)==''" Targets="Foo" Projects="..\Server\Bar.groupproj" Properties="Config=Demo" />

...

</Target> 
```**

# matlab - round() Matlab 函数的可微近似

> ID：11951957
> 
> 赞同：1
> 
> 时间：2012-08-14T12:07:20.997
> 
> 标签：matlab, approximation, calculus

您能否建议`round`Matlab 函数的可微近似？

该`round`函数如下所示：

![在此处输入图像描述](../Images/5cab8c3fd60c61cb64057a52d82c82bd.png)

我想要一个[非常]类似于图中的可微函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:36:39.650

[您可以使用dirac delta](https://en.wikipedia.org/wiki/Dirac_delta_function)编写导数- 它称为“dirac comb”。

您也可以将轮函数编写为[Heaviside 阶跃函数](https://en.wikipedia.org/wiki/Heaviside_step_function)的总和。

两者都有很多近似值 - 只需选择一个可微分的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:55:32.210

嗯，`y=x`是可微的，如果你站在足够远的地方，看起来就像你的目标函数。它的不同之处`round`在于它将实数映射到实数，而不是将实数映射到整数。

我认为除了诸如`f(r) = 1 for all r in Reals`.

通过明智地选择三角函数，您可能会得到更接近阶跃函数的东西。例如，这个

![在此处输入图像描述](../Images/e53db7e877478dae5b6764fa9d2599e1.png)

是 的图`sin(x)+x`。如果我有更多时间，我可能会调整它以通过`(k,k)`所有整数`k`，但我没有，所以我会把它留给你或其他路人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:56:23.393

您的函数的导数几乎在所有地方都是 1。如果可能，仅使用 1。

如果确实需要使函数平滑，请考虑使用低通滤波器。

# linux - GDB - 在回溯中禁用源视图

> ID：11951958
> 
> 赞同：1
> 
> 时间：2012-08-14T12:07:19.263
> 
> 标签：linux, security, debugging, gdb

是否可以在回溯中禁用源代码视图，仅显示行号和文件名？

我的意思是不要将这些信息包含在应用程序中，因为您也可以从应用程序文件中读取。

我不想让任何人看到我的源代码。

如果在 GDB 中不可能，是否还有其他具有此类功能的调试器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:39:24.957

如果 GDB 可以找到您的原始源文件，它只能显示您的源代码。如果人们可以在回溯中看到您的源代码，那么他们大概也可以看到您的整个源代码库。

因此，我怀疑您的意思是您不希望编译器将您的任何源代码包含在应用程序二进制文件中？

事实上，应用程序二进制文件只包含源文件名、行号、符号名（例如函数和变量名）以及一些类型信息。如果您使用`-g3`它们，那么它们可能还包括预处理器宏，但大多数人只使用`-g`.

排除“源”信息的最简单方法是*不*发送带有调试信息的二进制文件。您可以在不使用的情况下构建它，也可以在事后`-g`使用它来删除它。`strip`

不使用调试信息构建将删除所有非绝对必要的符号名称（包括`static`函数和所有局部变量名称），但不会删除外部可见函数的符号名称：链接器需要查看这些名称。`strip`我认为也可以删除其中的一些，尽管我从未尝试过。请注意，库*必须*具有外部可见功能的符号名称。

删除调试信息也会删除行号信息和源文件名，所以这仍然不是你想要的。

我建议 a) 重构您的源代码，以免尴尬和/或泄露任何线索，并且 b) 不要附带调试信息。

# php - 如何使用 PHP 将数据和 base64 图像导出到 Excel？

> ID：11951964
> 
> 赞同：1
> 
> 时间：2012-08-14T12:07:40.773
> 
> 标签：php, excel, export, base64

我正在尝试将以下内容导出到 excel，但图像未通过。

例子：

```
$today = date("d/m/y : H:i:s", time());
header ("Content-Type: application/x-msexcel");
header ("Content-Disposition: attachment; filename=\"export.xls\"" );
echo '
    <table>
        <tr>
            <th nowrap="nowrap">Client ID</th>
            <th nowrap="nowrap">Client Name</th>
            <th nowrap="nowrap">No. of Staff</th>
            <th nowrap="nowrap">No. of Events</th>
            <th nowrap="nowrap">Fail all\'s</th>
            <th nowrap="nowrap">Fail Section</th>
            <th nowrap="nowrap">Fail all %</th>
        </tr>
        <tr>
            <td nowrap="nowrap">8</td>
            <td nowrap="nowrap">SEAI</td>
            <td nowrap="nowrap"><div> 17 </div></td>
            <td nowrap="nowrap"><div> 354 </div></td>
            <td nowrap="nowrap"><div> 7 </div></td>
            <td nowrap="nowrap"><div> 0 </div></td>
            <td nowrap="nowrap"><div> 1.98% </div></td>
        </tr>
    </table>

    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA24AAAEsCAYAAAC7XuApAAAWw0lEQVR4nO3dT2scd57HcV/yiHKf257mT47zDPoQMAOzLJNkyBwNjcH4kmXsTMbgPmgV55SsmxmoYE1AMPgQDTQdCAi0B8HQGpCRs7HJzsB3D6Y61a1qqaXq+qm6fq8XvCFWWq1SLs6Hqq669fbgwVu/+OCzT3723qevf/fHr84efP71650vv4n/kiRJkiQlbefLb+LB51+//t0fvzr76W8+ff3O+589fHvw4K1b77z/5Pf/8Z9ffv/dqx8CAACAbnj5/Q/x64+K79/54MlHt37+3pNX//v6/276mAAAAFjy3asf4mfvffr61oeffPXypg8GAACAer/9+C8vb/3hi4N/3fSBAAAAUO/B5wf/vPX4T5ObPg4AAABWePynSRhuAAAAHWa4AQAAdJzhBgAA0HGGGwAAQMcZbgAAAB1nuAEAAHSc4QYAANBxhhtATz0Z78VPfvmrcz0Z7135vf568E385Je/ir8efNPCkV5deTzVVh3b8mtX/f5171l2/Pd/XPnYqsfTtf9+AGwfww2gp8rhVh0d5ddSDohNj5a7D3fP/V7Hf/9H/OSXv4q7D3fPvX7V11cd51VG2roMNwCaMtwAeqpuuEWsP2Q2ZZOjZdXvFPHjeKueUav72mXHabgB0EWGG0BPrTvcynFz0aWBdcOj+v7VyzKr7113uWb1PcqzZ+tekvjuh/cvHJ13H+7Gux/eXzjmdS8TXXe4Lf9Oy++57qWS5ftU1Q3N6veW/72Wf+a7H95fOCYA+sdwA+ipuuG2PAzqhkLd5ZQXDY+7D3fn33+Vz3fVDZeLrHP2bPl33vQZt78efLPwXnWXbbY13N798H7tGbvlsVweEwD9YrgB9NSqEVOekYp4c6am+udVX79oeFx2aeKq4VY9O7aO8r0vutxweXxdZ7ite9OT6vdcNtI2MdzqfoeL3sNlmQD9YrgB9FTdZYrL//O/6vNuy4Pgsksll99zneFWPb51pBpubdxBclOXSi5bNbxTf44RgPYZbgA9ddGNPCIuHjXL39vGcKu+x/KZwKse76pjamO4Xfa5vZTDre4MYd1nDQHYfoYbQE9dNtwibvaMW93Pu2xsXOXmJBGbH27lTUAuGrRdOOMGQP8YbgA9tc5w28Rn3DYx3C46lnV/p7YfB7DuqLrqcKt7zt5Vz1i28QgDALrFcAPoqXX+p34Td5W8bLitGk/XPTN2lQdwb/qM26o7OG5izD0Z7639flXlWUAA+s1wA+ipdc/GbOI5blV1Q6n6ubDqe1z3M1l1d4CsGzZtPA5g+Wcuj62rPBKh+hy7J+O9K18qWar73J3PuAH0i+EGAADQcYYbAABAxxluAAAAHWe4AQAAdJzhBgAA0HGGGwAAQMcZbgAAAB1nuAEAAHSc4QYAANBxhhsAAEDHGW4AAAAdZ7gBAAB03NYMt8lkEoPBYN4qRVEsvK4oioRHCQAAsHlbM9xGo9HCP1f/XFUUhbEGAAD0ytYMt6qiKAw3AAAgG1s53IbDYUwm9cdcvVTyKgNub29PkiRJkpK3jq0bboPBYOVoWzYcDp19AwAAtt5WDbfBYBCz2Wzt108mk5WXVAIAAGyLrRlu1zl7NhqNnHEDAAC23tYMt+ot/geDwfxM2mw2WzgTNxqNzr0GAABgm23NcAMAAMiV4QYAANBxhhsAAEDHGW4AAAAdZ7gBAAB0nOEGAADQcYYbAABAxxluAAAAHWe4AQAAdJzhBgAA0HGGGwAAQMcZbgAAAB1nuAEAAHSc4QYAANBxhhsAAEDHGW4AAAAdZ7gBAAB0nOEGAADQcYYbAABAxxluAAAAHWe4AQAAdJzhBgAA0HGGGwAAQMcZbgAAAB1nuAEAAHSc4QYAANBxhhsAAEDHGW4AAAAdZ7gBAAB0nOEGAADQcYYbAABAxxluAAAAHWe4AQAAdJzhBgAA0HG9G26TySQGg8E8AACAbde74TYajRb+ufpnAACAbdS74VZVFMXaw21vb0+SJEmSkreOXg+34XAYk0k/fzfoipcvX0qSNA9oR2+H22AwMNogAX9JA/Dtt9/Gt99+6+8EaFEvh9tgMIjZbHbThwFZKP+S/rdf70iSMiwi4s9//rPhBi3r3XAbDodRFMVNHwZkw3CTpLyLMNwghd4Nt+qjAAaDgbtKQssMN0nKuwjDDVLo3XAD0jLcJCnvIgw3SMFwAxox3CQp7yIMN0jBcAMaMdwkKe8iDDdIwXADGjHcJCnvIgw3SMFwAxox3CQp7yIMN0jBcAMaMdwkKe8iDDdIwXADGjHcJCnvIgw3SMFwAxox3CQp7yIMN0jBcAMaMdwkKe8iDDdIwXADGjHcJCnvIgw3SMFwAxox3CQp7yIMN0hho8Pt2fPpua/tjPfj9p1HcfvOo5geHm/k5wDdYbhJUt5FGG6QwsaH2+07j+Z/nh4ex/Tw2HCDHjPcJCnvIgw3SGGjw215pE0PjxfOwt17/HQjPwfoDsNNkvIuwnCDFFr5jFs53HbG+/OzcM64QT8ZbpKUdxGGG6TQ2hm3nfH+wufbDDfoJ8NNkvIuwnCDFDY63O49frow3Hy+DfrPcJOkvIsw3CCFjQ+30rPn0/lYq146CfSL4SZJeRdhuEEKrZ9xK5WXTjrzBv1iuElS3kUYbpBCq59xq/v3hhv0i+EmSXkXYbhBCq3cVRLIh+EmSXkXYbhBCoYb0IjhJkl5F2G4QQqGG9CI4SZJeRdhuEEKhhvQiOEmSXkXYbhBCoYb0IjhJkl5F2G4QQqGG9CI4SZJeRdhuEEKrQ23k9Oz+aMBpofHcXJ6tvCAbqAfDDdJyrsIww1SaG24VR/GbbhBfxlukpR3EYYbpNDqcDs5PYud8f78odu37zza+M8BbpbhJkl5F2G4QQrJhtuz51PDDXrIcJOkvIsw3CCF1obbznh/4XLJnfF+7Iz3N/5zgJtluElS3kUYbpBCq3eVXB5uQP8YbpKUdxGGG6TgcQBAI4abJOVdhOEGKWzNcJtMJjEYDGIwGFz4uqIo5q8bDAZRFEWiI4Q8GW6SlHcRhhuksDXDLSJiNputNdyMNUjHcJOkvIsw3CCF1oZb+dm2uq7LcIPuMdwkKe8iDDdI4UaG23UfxL3ucLvOZZJ7e3uSrtF4PI4Iw02Sci0i4u7duzEajWI8Ht/430vSNraOVp/jVj54O+LHxwNMD49bHW5Vw+HQ2TdomTNukpR3Ec64QQqtnnGrOjk9mw+2VMNtMpnEaDS61s8C1mO4SVLeRRhukEKrw+3Z8+n8z8+eT+Pe46cLA+6qrjrcRqORM27QMsNNkvIuwnCDFFobbjvj/Xj2fLrwubad8f7Gh1v5tdlsFhFvxlr5GTdn26B9hpsk5V2E4QYptPo4gJ3xfuMbkgDdZrhJUt5FGG6QQtLnuBlv0D+GmyTlXYThBim0eqnkph4DAHSX4SZJeRdhuEEKSZ/jZrhB/xhukpR3EYYbpND64wCePZ/GyelZnJyeLdxlEugHw02S8i7CcIMUWn0AdznWysG2/Gw3YPsZbpKUdxGGG6TQ6mfcTk7PYnp4vPBYAKBfDDdJyrsIww1SSHJXyfJGJS6VhP4x3CQp7yIMN0gh6eMAgP4x3CQp7yIMN0ih1c+4rfM1YLsZbpKUdxGGG6SQdLj5jBv0j+EmSXkXYbhBChsfbienZ7XPcHNzEugnw02S8i7CcIMUkg43NyeB/jHcJCnvIgw3SCHppZJA/xhukpR3EYYbpOCukkAjhpsk5V2E4QYptDbcqg/d9hk36C/DTZLyLsJwgxRaG25uTgJ5MNwkKe8iDDdIodXhBvSf4SZJeRdhuEEKrd6cZGe8v/H3BbrFcJOkvIsw3CAFl0oCjRhukpR3EYYbpGC4AY0YbpKUdxGGG6TgcQBAI4abJOVdhOEGKRhuQCOGmyTlXYThBim0NtxOTs/ml0dOD4/j5PQs7j1+uvGfA9wsw02S8i7CcIMUWr2rpOEG/We4SVLeRRhukEKrw+3k9Cx2xvsxPTyOCM92gz4y3CQp7yIMN0gh2XB79nxquEEPGW6SlHcRhhuk0Npw2xnvL1wuuTPe90Bu6CHDTZLyLsJwgxRavavk8nAD+sdwk6S8izDcIAWPAwAaMdwkKe8iDDdIwXADGjHcJCnvIgw3SKG14bZ8IxKPA4B+MtwkKe8iDDdIwXADGjHcJCnvIgw3SKHVxwGUz2+LiJgeHicZbpPJJAaDQQwGg9Z/FmC4SVLuRRhukEKrw628o+TtO4/i3uOnyc64zWYzww0SMdwkKe8iDDdIodWbkywPt1QMN0jHcJOkvIsw3CCFXt5V8jrDbW9vT9I1Go/HEWG4SVKuRUTcvXs3RqNRjMfjG/97SdrG1tHqpZI3xRk3SMcZN0nKuwhn3CAFww1oxHCTpLyLMNwghVaH27Pn042/7zoMN0jHcJOkvIsw3CCFVp/jVlcKhhukY7hJUt5FGG6QQi+HG5CO4SZJeRdhuEEKvbyrJJCO4SZJeRdhuEEKhhvQiOEmSXkXYbhBCq0Nt5PTs/nlkdPD4zg5PbvRO00C7TDcJCnvIgw3SKHVu0oabtB/hpsk5V2E4QYptDrcTk7PYme8H9PD44gINyeBHjLcJCnvIgw3SCHZcHv2fGq4QQ8ZbpKUdxGGG6TQ2nDbGe8vXC65M96PnfH+xn8OcLMMN0nKuwjDDVJo9a6Sy8MN6B/DTZLyLsJwgxQ8DgBoxHCTpLyLMNwgBcMNaMRwk6S8izDcIIWNDrfp4fH80sjbdx7FyenZRt4X6C7DTZLyLsJwgxQ2Otyqn2krA/rNcJOkvIsw3CCFjQ+38izbyenZ/OHbQH8ZbpKUdxGGG6Sw8eFW9ez5NJ49n27kvYFuMtwkKe8iDDdIYaPDbfkyybqAfjHcJCnvIgw3SMFwAxox3CQp7yIMN0jB4wCARgw3Scq7CMMNUjDcgEYMN0nKuwjDDVIw3IBGDDdJyrsIww1SMNyARgw3Scq7CMMNUjDcgEYMN0nKuwjDDVIw3IBGDDdJyrsIww1SMNyARgw3Scq7CMMNUjDcgEYMN0nKuwjDDVIw3IBGDDdJyrsIww1SMNyARgw3Scq7CMMNUjDcgEYMN0nKuwjDDVIw3IBGDDdJyrsIww1SMNyARgw3Scq7CMMNUjDcgEYMN0nKuwjDDVIw3IBGDDdJyrsIww1SMNyARgw3Scq7CMMNUjDcgEYMN0nKuwjDDVLYquE2GAzmrVIUxcLriqJIeISQH8NNkvIuwnCDFLZmuA2Hw5hM3hxnURQxHA5rX1cUhbEGCRlukpR3EYYbpLAVw202m507yzYYDGI2m517reEGaRlukpR3EYYbpLAVw20ymZw7w1Y9A1dVvVTyKgNub29P0jUaj8cRYbhJUq5FRNy9ezdGo1GMx+Mb/3tJ2sbW0bvhtvwaZ9+gXc64SVLeRTjjBilsxXC7yqWSVZPJJEajUZuHBtkz3CQp7yIMN0hhK4ZbxPo3J6kajUbOuEHLDDdJyrsIww1S2JrhFlH/OIDybFx59m00Gs1f42wbtM9wk6S8izDcIIWtGm5A9xhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhukYLgBjRhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhukYLgBjRhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhukYLgBjRhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhukYLgBjRhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhukYLgBjRhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhukYLgBjRhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhukYLgBjRhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhukYLgBjRhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhukYLgBjRhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhukYLgBjRhukpR3EYYbpGC4AY0YbpKUdxGGG6RguAGNGG6SlHcRhhuk0MvhNhgM5gHtMtwkKe8iDDdIoXfDbTgcxmTy5vcpiiKGw+ENHxH0m+EmSXkXYbhBCr0abrPZ7NxZtsFgELPZ7IaOCPrPX9IAGG7Qvl4Nt8lkcu4MW/UM3EX2/vY/kiRJknQjXcZwAwAAuEHZDTeXSgIAANsmu+EW4eYkAADAdslyuEV4HAAAALA9sh1uAAAAfWK4AcAKo9Go9iqO6tcGg0EURbHwfcPhsPZSfVeCAHBdhhsA1Ki7U3HpohtflTfKqnuN4QbAdRluAFBjMpmsHFoXDbeiKKIoihiNRjEajc59HwBch+EGACuUl0ouXwq5fKnk8r+bzWYrH1EDANdhuAHAJeo+41Z3xm0ymSycZRsOhwujz3AD4LoMNwBYw2g0mo+wVcNtOByeOxtX/Zyc4QbAdRluALCG4XAYk8mbvy/rhttsNlt5J8nq9wHAdRhuAFCjKIqVt/yvO6tWPSO3/D7l5ZOGGwDXZbgBAAB0nOEGAADQcYYbAABAxxluAAAAHWe4AQAAdJzhBgAA0HGGGwAAQMcZbgAAAB1nuAEAAHSc4QZA9qaHx3H7zqOF7j1+Ov/3O+P9uH3nUTx7Pq39MwC0zXADIGvPnk/nY+3k9CwiIk5OzxbGm6EGwE0z3ADIWjnapofHK1/T9nAzDAG4jOEGQLbKM2u37zy68HXrXCp57/HThUstd8b7575/uZPTs4Uzfstn/gCgZLgBkK3qZ9suctlwK0dbedZu1evLUVb+uRx3zrgBcBnDDYBsbeqMW93ZtIuGmeEGwFUZbgBk7TqfcVs13Fa9h+EGQFOGGwBZq37GrDq87j1+uvKukqv+XH2EQNW6w636uTgAqDLcAMhe3XPcqpdPrnNzkrobkKx7qeTyz3dzEgCWGW4AAAAdZ7gBAAB0nOEGAADQcYYbAABAxxluAAAAHWe4AQAAdJzhBgAA0HGGGwAAQMcZbgAAQCfdv3+/ldduI8MNAADYuBcvXpwbU7u7u/HixYuIeDO0yn9exXD7keEGAABs3GXDbR2ph9tVjy8lww0AANi4q5xxK4oi7t+/H/fv3z/3moODg/nXS9XXF0Vx4WvL15X/vvoe5euPjo7m/1x93e7u7rn3q6o7jrqvvXjxInZ3d+fvd3R0NH/NukPRcAMAADauHG7LLQ+3o6Ojc0NrebhF/Dj6ytGzrO61y8ezPP6WB1n1+5Zfv6zuOJZ/l93d3Tg6Opr/t3jx4sV8IJbHcHR0tPJnVBluAADAxq17xu3g4GDhTNjya5a/fnBwMD+TVVX32vKfq2fzSnWjaXnwlSOr7ufVHcfy18rfrToCq68x3AAAgBu17nCrnqWqnpkqX7P8vRedcat77fLliqV1httFX7/qGTfDDQAA6JyrfMat+lmyy864RcTC59Gqn3Fb9XPK965eTlk3msrPpx0cHCx8Dm3VsKw7jos+41Z+z7WH28MvDv651qsBAABaUjf2eOP3n3/9z1sffvLVy5s+EAAAIE+r7vzIj3778V9e3vr5e09evfz+h5s+FgAAAJZ89+qH+Pl7T17deuf9J7//94++fPXdK+MNAACgK15+/0P8+qPi+3c+ePLRrbcHD976xQefffLT33z6+v2Hey8//uLgX3/477+FJEmSJCl9H39x8K/3H+69/OlvPn39iw8+e/D24MFb/w8FVkJZAxfZ3wAAAABJRU5ErkJggg==" />
'; 
```

我尝试了以下方法但没有成功：

```
echo file_get_contents(base64_decode($img)); 
```

有无标签，有无 file_get_contents 和 base64_decode。

我觉得这应该是可能的，但我错过了一些东西:(。有人有什么想法吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:56:12.413

据我所知，您正在尝试创建一个保存标题的 excel 文件 (XLS)。

标题还不够！

您需要一组库。我建议您使用[PHPExcel](http://phpexcel.codeplex.com/) 您可以轻松地向其中添加图像。把这个图书馆放在手边！它可以做更多的事情。

安装后，您可以参考[此答案](https://stackoverflow.com/questions/11337142/php-code-can-insert-image-to-excel-file-and-open-it-correctly-in-ms-excel)以获取更多分步说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:02:10.277

Try complete solution using PHPExcel that I also recommend for this job.

[http://phpexcel.codeplex.com/discussions/271473](http://phpexcel.codeplex.com/discussions/271473)

# android - ImageView 去中心化

> ID：11951979
> 
> 赞同：0
> 
> 时间：2012-08-14T12:08:31.170
> 
> 标签：android, android-layout

我有一个代码可以在 a 中动态添加按钮`RelativeLayout`（MyButton 扩展了 Button 并且有一个`setTag`and`getTag`来设置一个`ImageView`）。这些按钮可能有`ImageView`一个图标或没有。

分配 ImageView 按钮（如图标）的代码：
//如果用户使用图标设置主题

```
if (this.isShowIcons() == true) {
    if (newButton.getTag() != null) {

        newButton.setCompoundDrawablesWithIntrinsicBounds(null, ((ImageView) newButton.getTag()).getDrawable(), null, null);
        newButton.setPadding(leftpadding, toppadding, rightpadding, bottompadding);
    } else {
        newButton.setPadding(5, 5, 5, 5);
    }
} else {
    newButton.setCompoundDrawablesWithIntrinsicBounds(null, null, null, null);
    newButton.setPadding(5, 5, 5, 5);
} 
```

事实证明，当我在清单中插入指定目标和最小版本的行时，图标出现在按钮内的底部位置。

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="10" /> 
```

如果我只是删除线`uses-sdk`，适用于大多数设备，但布局是**平板电脑**中的问题，例如：

ImageView 示例：

```
ImageView imb1 = new ImageView(this.getBaseContext());
imb1.setImageResource(R.drawable.icon_1);
imb1.setMaxHeight(120);
imb1.setMaxWidth(120);
imb1.setScaleType(ImageView.ScaleType.CENTER);

MyButton b1 = new MyButton(this);
b1.setText("Label...");
b1.setId(1001);
b1.setTag(imb1); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:38:01.670

解决方案：我在两种情况下都删除了填充，它起作用了。

# java - 在 Eclipse SWT 中执行代码之前的 setVisible()

> ID：11951981
> 
> 赞同：1
> 
> 时间：2012-08-14T12:08:35.833
> 
> 标签：java, eclipse, progress-bar, swt

我想在执行某些代码之前`ProgressBar`通过 a 设置可见。`SelectionListener`但是，代码将被执行，但`ProgressBar`仍然不可见。

代码如下所示：

```
...
progressBar().setVisible(true);
parseFile(...);
...

public void parseFile(File file) {
    System.out.println("Parsing File: " + file);
    BufferedReader br = null;
    BufferedWriter bw = null;
    try {
        br = new BufferedReader(
                new InputStreamReader(new FileInputStream(file), "UTF-8"));
        File fileToWrite = new File(file.getParentFile().getAbsolutePath()
                + File.separator + "anonym_"
                + file.getName());
        bw = new BufferedWriter(new FileWriter(fileToWrite));
        String line;
        while ((line = br.readLine()) != null) {
            bw.write(replacements.getSubstitutedText(line));
            bw.newLine();
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (br != null) {
                br.close();
            }
            if (bw != null) {
                bw.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

`parseFile()`将被执行但`setVisible`不会。如果我删除`parseFile()`，`setVisible`将被执行。

`doSth()`设置progressBar可见后如何执行？

完整代码：

匿名类2：

```
package main;

import view.MainView;

public class Anonymous2 {

    public static void main(String[] args) {
            new MainView().open();
    }
} 
```

类主视图：

```
package view;

import java.io.File;

import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.swt.SWT;
import org.eclipse.swt.custom.TableEditor;
import org.eclipse.swt.layout.FormAttachment;
import org.eclipse.swt.layout.FormData;
import org.eclipse.swt.layout.FormLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.List;
import org.eclipse.swt.widgets.ProgressBar;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;
import org.eclipse.swt.widgets.TableItem;

import controller.MainViewController;

public class MainView {

protected Shell shlAnonymous;
private List list;
private Table table;
private TableViewer tableViewer;
private TableEditor editor;
private ProgressBar progressBar;

public Table getTable() {
    return table;
}
public TableViewer getTableViewer() {
    return tableViewer;
}
public Shell getShell() {
    return shlAnonymous;
}
public TableEditor getEditor() {
    return editor;
}
public ProgressBar getProgressBar() {
    return progressBar;
}

/**
 * @wbp.parser.entryPoint
 */
public void open() {
    Display display = Display.getDefault();

    shlAnonymous = new Shell();

    shlAnonymous.setSize(800, 404);
    shlAnonymous.setText("Anonymous");
    shlAnonymous.setLayout(new FormLayout());

    createContents();

    shlAnonymous.open();
    shlAnonymous.layout();

    while (!shlAnonymous.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
}

/**
 * Create contents of the window.
 */
protected void createContents() {
    MainViewController controller = new MainViewController(this);

    Label lblHeader = new Label(shlAnonymous, SWT.NONE);
    FormData fd_lblHeader = new FormData();
    fd_lblHeader.top = new FormAttachment(0, 10);
    fd_lblHeader.left = new FormAttachment(0, 10);
    lblHeader.setLayoutData(fd_lblHeader);
    lblHeader.setText("Files to Replace");

    Button btnQuit = new Button(shlAnonymous, SWT.NONE);
    btnQuit.addSelectionListener(controller);
    FormData fd_btnQuit = new FormData();
    fd_btnQuit.left = new FormAttachment(100, -106);
    fd_btnQuit.bottom = new FormAttachment(100, -10);
    fd_btnQuit.right = new FormAttachment(100, -10);
    btnQuit.setLayoutData(fd_btnQuit);
    btnQuit.setText("Quit");
    btnQuit.setData("name", "quit");

    Button btnAnon = new Button(shlAnonymous, SWT.NONE);
    btnAnon.addSelectionListener(controller);
    FormData fd_btnAnon = new FormData();
    fd_btnAnon.right = new FormAttachment(btnQuit, 0, SWT.RIGHT);
    fd_btnAnon.bottom = new FormAttachment(btnQuit, -6);
    fd_btnAnon.left = new FormAttachment(btnQuit, 0, SWT.LEFT);
    btnAnon.setLayoutData(fd_btnAnon);
    btnAnon.setText("Replace");
    btnAnon.setData("name", "anon");

    Button btnAdd = new Button(shlAnonymous, SWT.NONE);
    btnAdd.addSelectionListener(controller);
    FormData fd_btnAdd = new FormData();
    fd_btnAdd.right = new FormAttachment(0, 106);
    fd_btnAdd.bottom = new FormAttachment(100, -10);
    fd_btnAdd.left = new FormAttachment(0, 10);
    btnAdd.setLayoutData(fd_btnAdd);
    btnAdd.setText("Add");
    btnAdd.setData("name", "add");

    Button btnDelete = new Button(shlAnonymous, SWT.NONE);
    btnDelete.addSelectionListener(controller);
    FormData fd_btnDelete = new FormData();
    fd_btnDelete.right = new FormAttachment(btnAdd, 102, SWT.RIGHT);
    fd_btnDelete.bottom = new FormAttachment(100, -10);
    fd_btnDelete.left = new FormAttachment(btnAdd, 6);
    btnDelete.setLayoutData(fd_btnDelete);
    btnDelete.setText("Delete");
    btnDelete.setData("name", "delete");

    list = new List(shlAnonymous, SWT.BORDER | SWT.MULTI);
    list.addKeyListener(controller);
    FormData fd_list = new FormData();
    fd_list.left = new FormAttachment(0, 10);
    fd_list.bottom = new FormAttachment(btnAnon, 0, SWT.BOTTOM);
    fd_list.top = new FormAttachment(lblHeader, 6);
    list.setLayoutData(fd_list);

    table = new Table(shlAnonymous, SWT.BORDER | SWT.FULL_SELECTION);
    table.setLinesVisible(true);
    fd_list.right = new FormAttachment(table, -6);
    FormData fd_table = new FormData();
    fd_table.right = new FormAttachment(btnAnon, -22);
    fd_table.bottom = new FormAttachment(100, -41);
    fd_table.top = new FormAttachment(0, 31);
    fd_table.left = new FormAttachment(0, 336);
    table.setLayoutData(fd_table);
    table.setHeaderVisible(true);

    tableViewer = new TableViewer(table);
    tableViewer.setUseHashlookup(true);

    TableColumn tblclmnTerm = new TableColumn(table, SWT.NONE);
    tblclmnTerm.setWidth(160);
    tblclmnTerm.setText("Term");

    TableItem tableItem = new TableItem(table, SWT.NONE);
    tableItem.setText("");

    TableColumn tblclmnSubstitution = new TableColumn(table, SWT.NONE);
    tblclmnSubstitution.setWidth(156);
    tblclmnSubstitution.setText("Replace With");

    progressBar = new ProgressBar(shlAnonymous, SWT.NONE);
    FormData fd_progressBar = new FormData();
    fd_progressBar.right = new FormAttachment(table, 0, SWT.RIGHT);
    fd_progressBar.bottom = new FormAttachment(btnQuit, 0, SWT.BOTTOM);
    fd_progressBar.left = new FormAttachment(btnDelete, 6);
    progressBar.setLayoutData(fd_progressBar);
    progressBar.setMinimum(0);
    progressBar.setVisible(false);
}

public void addListItem(String item) {
    list.add(item);
}

public void addListItems(String rootFolder, String[] items) {
    for (String item : items) {
        addListItem(rootFolder + File.separator + item);
    }
}

public File[] getFilesToParse() {
    File[] files = new File[list.getItemCount()];
    for (int i = 0; i < list.getItemCount(); i++) {
        files[i] = new File(list.getItem(i));
    }
    return files;
}
} 
```

类 MainViewController：

```
package controller;

import model.Parser;

import org.eclipse.swt.SWT;
import org.eclipse.swt.events.KeyEvent;
import org.eclipse.swt.events.KeyListener;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.events.SelectionListener;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.FileDialog;

import view.MainView;

public class MainViewController implements SelectionListener, KeyListener {

private MainView mainView;

public MainViewController(MainView mainView) {
    this.mainView = mainView;
}

@Override
public void widgetDefaultSelected(SelectionEvent arg0) {
    processSelectionEvent(arg0);
}

@Override
public void widgetSelected(SelectionEvent arg0) {
    processSelectionEvent(arg0);
}

private void processSelectionEvent(SelectionEvent e) {
    if (e.getSource() instanceof Button) {
        Button button = (Button)e.getSource();
        if (button.getData("name").equals("quit")) {
        } else if (button.getData("name").equals("anon")) {

            mainView.getProgressBar().setVisible(true);
            Parser parser = new Parser();
            parser.parseFiles(mainView.getFilesToParse());

        } else if (button.getData("name").equals("add")) {
            FileDialog fileDialog = new FileDialog(mainView.getShell(), SWT.MULTI);
            fileDialog.setText("Dateien wählen");
            fileDialog.open();
            mainView.addListItems(fileDialog.getFilterPath(), fileDialog.getFileNames());
        }
    }
}

@Override
public void keyPressed(KeyEvent arg0) {}

@Override
public void keyReleased(KeyEvent arg0) {}

} 
```

类解析器：

```
package model;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;

public class Parser {

public boolean parseFile(File file) {
    System.out.println("Parsing File: " + file);
    BufferedReader br = null;
    BufferedWriter bw = null;
    try {
        br = new BufferedReader(
                new InputStreamReader(new FileInputStream(file), "UTF-8"));
        File fileToWrite = new File(file.getParentFile().getAbsolutePath()
                + File.separator + "anonym_"
                + file.getName());
        bw = new BufferedWriter(new FileWriter(fileToWrite));
        String line = br.readLine();
        if (line != null) {
            bw.write(line);
            while ((line = br.readLine()) != null) {
                bw.newLine();
                bw.write(line);
            }
        }
        return true;
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (br != null) {
                br.close();
            }
            if (bw != null) {
                bw.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return false;
}

public void parseFiles(File[] files) {
    for (File file : files) {
        parseFile(file);
    }
}
} 
```

我已经削减了很多代码，但问题仍然存在。

有问题的行是 Parser 类中的第 40-42 行。第 40 行在第 41-42 行之后执行。

一些解释：progressBar 在解析器完成工作后变得可见。要查看问题，我建议添加足够多的文件（添加按钮），以便解析器可以工作（替换按钮）至少 1 秒。progressBar 将在一秒钟后可见，并且应在单击按钮后立即可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:57:31.617

您不应该在 UI 线程中运行解析器。当您的代码正在解析时，swt 没有机会重新绘制您的进度条。所以解析完成后绘制进度条。您应该在单独的线程中解析并使用 Display.asyncExec() 从该线程更新进度条。请参阅[http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet56.java](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet56.java)示例如何执行此操作。

# file - 如何将系统命令输出提取到 awk 程序内的变量中？

> ID：11951982
> 
> 赞同：1
> 
> 时间：2012-08-14T12:08:38.850
> 
> 标签：file, awk, io-redirection

我从 AWK 脚本调用的系统命令的输出显示在终端上。我不希望 shell 显示系统命令的输出，而是希望将此输出读入脚本的变量（系统命令的输出是一个单词字符串“yes”或“no”） . 然后需要将此变量与脚本中的字符串（如果它的“是”或“否”）进行比较，并且命令的输出最终需要保存到一个新文件中。我如何在 AWK 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:32:46.393

```
"command" | getline var 
```

这将执行`command`并将输出，一次一行，放入变量`var`中。例如

```
$ awk 'BEGIN{while("seq 3" | getline x) print "output: " x}'
output: 1
output: 2
output: 3 
```

它也会在通话之间持续存在：

```
$ seq 3 | awk '{"seq 4 7" | getline x; print x}'
4
5
6 
```

注意 7 没有打印，因为没有第四行输入。

[这里](https://stackoverflow.com/q/1960895/900873)的帖子显示 using `|&`，它没有出现在手册页中，我不确定有什么区别。我认为它也可能捕获 stderr，但在我的测试中并没有这样做。

# mysql - 如何在 MySQL 中“显示属于特定用户的数据库”？

> ID：11951986
> 
> 赞同：0
> 
> 时间：2012-08-14T12:08:46.120
> 
> 标签：mysql, database, show, privileges

“显示数据库”显示您（登录用户）具有某些权限的所有数据库。

有没有办法显示用户“xxx”具有某些特权的所有数据库？

编辑：我有一个用户“mickey”：

```
mysql> show grants for mickey;
+-------------------------------------------------------------------------------------------------------+
| Grants for mickey@%                                                                                   |
+-------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'mickey'@'%' IDENTIFIED BY PASSWORD '*B9E506CBC9D7D8352A3C02DBC94677A5DEF491B8' |
| GRANT ALL PRIVILEGES ON `mickey\_%`.* TO 'mickey'@'%'                                                 |
+-------------------------------------------------------------------------------------------------------+ 
```

用户 mickey 可以创建/删除名为“mickey_%”的数据库和表。过滤掉这些数据库很容易，但这只是因为他的数据库有前缀“mickey_”。

有一个名为“mickey_example2”的数据库，其中 mickey 拥有所有权限。我无法在 information_schema 或 mysql db 中找到此数据库。

这是 information_schema.USER_PRIVILEGES 中关于 'mickey' 的唯一信息：

```
mysql> SELECT * FROM information_schema.USER_PRIVILEGES WHERE GRANTEE LIKE '%mickey%';
+--------------+---------------+----------------+--------------+
| GRANTEE      | TABLE_CATALOG | PRIVILEGE_TYPE | IS_GRANTABLE |
+--------------+---------------+----------------+--------------+
| 'mickey'@'%' | def           | USAGE          | NO           |
+--------------+---------------+----------------+--------------+ 
```

[MySql 手册](http://dev.mysql.com/doc/refman/5.1/en/show-databases.html)说：

> MySQL 将数据库实现为数据目录中的目录，因此该语句仅列出该位置中的目录。但是，输出可能包含与实际数据库不对应的目录名称。

这对我来说意味着在 information_schema 中不必有任何可用的信息（关于现有数据库），尤其是在数据库为空的情况下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:15:40.000

经过大量搜索和阅读后，我发现没有一种很好且干净的方法可以为其他用户找到“显示数据库”。

我通过执行以下操作更改了我的数据库设计： - 每个数据库名称都以 $username_ 开头 - $username 不能包含下划线“_”

我有一个用户没有任何授权，除了“SHOW DATABASES”，我发现用户的数据库使用 WHERE LIKE 和 SHOW DATABASES 命令：

```
SHOW DATABASES WHERE `Database` LIKE ? 
```

和 ？替换为：

```
'$username\_%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:14:55.740

您可以获得从“information_schema”查询表 USER_PRIVILEGES 的给定用户的权限。

例如，要测试名为“root”的用户的“CREATE”权限，您可以查询：

> SELECT * FROM information_schema.USER_PRIVILEGES WHERE GRANTE LIKE "'root'%" AND PRIVILEGE_TYPE="CREATE";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T11:32:15.613

```
Select Host, Db, User from mysql.db; 
```

这将向您显示您的主机、数据库名称和相应的用户

# svn - Web 服务器：SVN 存储库

> ID：11951987
> 
> 赞同：0
> 
> 时间：2012-08-14T12:09:00.103
> 
> 标签：svn, webserver, hudson, phpunit, trac

我正在寻找可以放置我的 SVN 存储库的 Web 服务器。

该解决方案应该有一个像**TRAC**这样的票证跟踪系统，并且能够使用像**Hudson**这样的工具从服务器进行实时部署，并在部署时内置**PHPUnit测试。**

有谁知道我在哪里可以找到这样的东西？

我找到了 SVN 服务器、Hudson 等。但是所有单独的解决方案，但是我正在寻找所有在同一个服务器包上的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:23:03.097

我在 Linux 服务器上运行 Apache Web 服务器，并在该环境中运行 Subversion 和 Trac。这是一篇帮助您开始[在 Apache 下使用 Subversion的文章](http://www.techrepublic.com/article/configuring-apache-for-subversion-use/5902186)

这是一篇关于 Debian[在 Debian 中使用 Apache 下的 Subversion的文章](http://www.debuntu.org/2006/05/20/54-how-to-subversion-svn-with-apache2-and-dav/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:12:59.137

[Ubersvn](http://www.wandisco.com/ubersvn)最接近你想要的，但没有什么是一体化的包。您应该尝试自己组合这些部分，您将学到好东西并获得完全适合您需求的解决方案。无论如何，所有这些事情都是这样做的，将单独的部分组合起来，形成一个比部分更好的整体。

Ubersvn 有一个“[应用商店](http://www.wandisco.com/uberapps/apps)”，包括用于构建的 Jenkins 以及它提供的部署，但您仍然需要为 PHPUnit（和[Clover](https://wiki.jenkins-ci.org/display/JENKINS/Clover+PHP+Plugin)）[配置它](http://jenkins-php.org/)

# mysql - MySQL查询 - 根据列获取计数总和

> ID：11951989
> 
> 赞同：3
> 
> 时间：2012-08-14T12:09:19.697
> 
> 标签：mysql

我有一个带有操作和 question_ids 的 mysql 表。每个动作都有这样的分数：

```
 ACTION       | SCORE
downvote_question |  -1
upvote_question   |  +1
in_cardbox        |  +2 
```

我想查询得分最高的问题，但我无法弄清楚。

[http://sqlfiddle.com/#!2/84e26/15](http://sqlfiddle.com/#!2/84e26/15)

到目前为止，我的查询是：

```
SELECT count(*), l1.question_id, l1.action 
FROM `log` l1
GROUP BY l1.question_id, l1.action 
```

这给了我每个 question_id 及其所有累积操作。

我想要的是这样的：

```
QUESTION_ID | SCORE
     2      |   5
     1      |   4
     3      |   1
     4      |   1
     5      |   1 
```

我想不通 - 我可能需要子查询、JOINS 或 UNIONS ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:19:16.413

也许你可以试试这个。

```
SELECT  a.question_id, sum(b.score) totalScore
FROM   `log` a INNER JOIN scoreValue b
          on a.`action` = b.actionname
group by a.question_id
ORDER BY totalScore DESC 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/bc2c8/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:13:32.290

您应该将 count(*) 替换为 sum(l1.score) 因为 sum 将根据 group by 语句添加所有值

```
SELECT sum(l1.score), l1.question_id, l1.action 
FROM `log` l1
GROUP BY l1.question_id, l1.action 
```

在 SQL Fiddle 上使用恒定分数（按问题分组）：

```
SELECT 
sum(
  CASE WHEN l1.action = 'downvote_question' THEN -1 
  WHEN l1.action = 'upvote_question' THEN 1 
  ELSE 2 END
) score,
l1.question_id
FROM `log` l1
GROUP BY l1.question_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:12:50.903

```
SELECT sum(SCORE), l1.question_id, l1.action 
FROM `log` l1
GROUP BY l1.question_id, l1.action 
```

这是你想要的吗？

upd：在您的 fidel 代码中，没有诸如 score 之类的列，但我认为创建带有操作的表不会有问题 | 得分并将其加入总和（得分）

# asp.net - 限制从 URL 访问文件

> ID：11951990
> 
> 赞同：3
> 
> 时间：2012-08-14T12:09:24.940
> 
> 标签：asp.net, redirect, hosting, web-hosting, directory-listing

我有一个托管在 ASP.NET 中的站点。现在在我的站点中有一个名为“upload”的文件夹，其中保存了一些 .rar 文件供私人使用。当我直接键入 url 时，文件被下载。假设文件位于“http://www.mathew.com/uploads/mine.rar”，如果我在浏览器中输入 url 并回车，即使目录列表不存在，它也会下载文件。

我想限制这个..我怎样才能实现它。谢谢， 马修

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:24:30.437

您可以通过授权来限制它。`web.config`在此文件夹中放置一个文件：

```
<configuration>
    <system.web>
        <authorization>
            <deny users="*"/>
        </authorization>
    </system.web>
</configuration> 
```

**编辑 ：**

这将不起作用，因为 rar 文件不由 asp.net 处理，因此您还需要为 asp.net 添加一个处理程序，将 rar 文件视为 aspx 文件：

对于经典模式：

```
<system.web>
  <httpHandlers>
    <add verb="*" path="*.rar" type="System.Web.UI.PageHandlerFactory" />
  </httpHandlers>
</system.web> 
```

对于集成模式（默认为`iis 7.5`and `VS 2012`）

```
<system.webServer>
  <handlers>
    <add name="rar" path="*.rar" verb="*" type="System.Web.UI.PageHandlerFactory"/>
  </handlers>
</system.webServer> 
```

# node.js - 猫鼬不保存文件

> ID：11951992
> 
> 赞同：0
> 
> 时间：2012-08-14T12:09:30.853
> 
> 标签：node.js, csv, mongoose

我正在尝试使用 node.js/mongoose 保存一些文档。

我从 csv 文件中检索数据并使用 csv 模块导入数据。

不知何故，它说所有记录都正确保存到数据库，但是当我通过“mongo”命令打开它并解析数据库时，根本没有保存任何信息。

这是我正在使用的代码：

```
//import.js
var csv = require('csv');
var mongoose=require("mongoose"),
db = mongoose.createConnection('127.0.0.1','camelot');

db.on('error',function(){
console.error.bind(console,'conection error');
console.log("Error al crear conexion");
});
db.once('open',function(){
console.log("DB open")
// Definicion de jugador
var playerSchema = new mongoose.Schema({
    nombre: String,
    alianza: String,
    correo: String,
    poder: Number,
    nivel: Number,
    villa1: {
        nombre: String,
        x: Number,
        y: Number
    },
    villa2: {
        nombre: String,
        x: Number,
        y: Number
    }
});
var jugador = db.model('jugador',playerSchema);
csv().fromPath('datos.csv',{columns: ['timestamp', 'nombre','alianza','x','y','nivel','poder','notas']})                                                
.on('end',function(count){
    console.log('Lineas:'+count)
})
// --> PARSEO DE CADA LINEA DEL CSV <--//   
.on('data',function(data,index){
    var j = new jugador({ nombre: data.nombre });
    j.save(function (err){
        if(err){
            console.log('Error al escribir en la DB');
        }else
        {
            //console.log("Guardado: "+data.nombre);
        }
    })
})
});` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:43:24.473

Mongoose 默认将模型名称复数。如果需要，您可以通过将第三个参数传递给 db.model 来手动设置集合名称：

```
var jugador = db.model('jugador',playerSchema, 'jugador'); 
```

# yii - Yii DAO 实现。

> ID：11951993
> 
> 赞同：1
> 
> 时间：2012-08-14T12:09:40.387
> 
> 标签：yii

如果我在 Yii 中只使用 DAO 保存数据，我可以使用模型的规则功能吗？当然我不会声明 AR instance 。我仍然可以使用规则功能进行验证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:59:33.500

创建一个扩展 CModel 的新模型类。

像往常一样创建规则方法。

然后你可以做

```
$model = new MyModel();
$model->myAttribute = 'value';

if ($model->validate())
{
    Yii::app()->db->createCommand()
        ->update(
            'MyTable',
            array('myAttribute' => $model->myAttribute),
            'key=:id',
            array(':id' => 'key')
        );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:31:56.363

是的，您可以毫无问题地使用。

以下是一些可以帮助您的链接：

*   [http://www.yiiframework.com/doc/guide/1.1/en/database.dao](http://www.yiiframework.com/doc/guide/1.1/en/database.dao)
*   [http://www.yiiframework.com/forum/index.php/topic/25825-dao-vs-activerecord-methods/](http://www.yiiframework.com/forum/index.php/topic/25825-dao-vs-activerecord-methods/)
*   [http://www.sheldmandu.com/php/php-mvc-frameworks/yii-dao-vs-active-record-performance](http://www.sheldmandu.com/php/php-mvc-frameworks/yii-dao-vs-active-record-performance)

# javascript - 在查询字符串中查找 where 子句？

> ID：11951996
> 
> 赞同：0
> 
> 时间：2012-08-14T12:09:51.470
> 
> 标签：javascript

我有一个有查询的字符串。

问题是我不能只是附加到它，在 where 子句之后有一个 group by。

所以说我得到了这个字符串：

```
var query = "select stuff from db where something = 3 group by stuff" 
```

现在我想追加`"somethingelse > 5 AND "`

结果：

```
query = "select stuff from db where somethingelse > 5 AND something = 3 group by stuff" 
```

我需要做什么才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T12:11:19.793

```
query = query.replace(/where/,'where somethingelse > 5 AND'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:14:47.907

[如果您按原样传递查询字符串，大卫的回答](https://stackoverflow.com/a/11952024/45664)是最实用的。

或者，如果您自己构建它，最好允许传入选择器列表、查询约束等，以便您最初创建正确的查询字符串。有点像：

```
val query = "select " + selectors.join() +
            " from " + tables.join() +
            " where " + constraints.join() +
            " group by " + groupings.join() 
```

# mysql - MySQL表和字段名应该是大写的？

> ID：11951997
> 
> 赞同：2
> 
> 时间：2012-08-14T12:09:59.277
> 
> 标签：mysql

或者它们应该是小写字母？有什么标准吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:12:37.420

我总是使用小写的 mysql 表和字段名。您可以在表名和字段中使用 (_) 下划线使其更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:19:50.700

我已经分别尝试过大写和小写。到目前为止，我没有遇到任何问题。对于多个单词，我使用下划线来分隔它们。您也可以像这样使用 sampleTable。

# php - ñ 返回 null - jQuery 和 PHP

> ID：11951999
> 
> 赞同：0
> 
> 时间：2012-08-14T12:10:03.097
> 
> 标签：php, jquery, json, utf-8

我使用 jQuery 在 PHP 中运行一个函数来从数据库中获取数据。

```
 $.ajax({
            url: 'service.php',
            data: { functie: type, param: radiobutton },
            dataType: 'json',
            success: function (data) {}
        }); 
```

一切正常。除了带有特殊字符的字符串在 succes 函数中返回为空。例如：ñ

这里解释了这个问题的答案： [Special characters break json returned to jQuery](https://stackoverflow.com/questions/7084578/special-characters-break-json-returned-to-jquery)

但这对我不起作用。

在php中我试过：

```
$result = mysql_query("SELECT * FROM wines");
$array = array();

while($row = mysql_fetch_assoc($result)){
    $array[]=htmlentities($row);
} 
```

谁知道如何确保一切都以良好的方式返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:17:34.693

在您的 while 语句中，您使用`htmlentities`的是数组，而不是字符串（数组中的每个键都是数据库中的一列）。

您可以执行以下任一操作：

使用[array_map](http://php.net/manual/en/function.array-map.php)：

```
while($row = mysql_fetch_assoc($result)){
    $array[] = array_map("htmlentities", $row);
} 
```

或更改您的 while 循环：

```
while($row = mysql_fetch_assoc($result)){
    foreach ($row as $key => $value) {
        $row[$key] = htmlentities($value);
    }
    $array[] = $row;
} 
```