# StackOverflow 问答 10211000-10211999

# javascript - 如何修复使我的移动应用程序崩溃的 ajax 调用？

> ID：10211008
> 
> 赞同：0
> 
> 时间：2012-04-18T14:01:23.633
> 
> 标签：javascript, ruby-on-rails, ajax, html, cordova

我目前正在使用 phonegap 使用 HTML5 和 Zepto.js 编写移动应用程序。我们的服务器正在使用 ruby​​ on rails。在 Playbook（测试设备）上，应用程序在这一屏幕上冻结了大约 20% 的时间。如果发生这种情况，它不会响应，并且如果拖动页面将滚动（通常是禁用的）。我们很确定这是对我们服务器的 ajax 调用。这是电话：

```
 $.ajax({
        url: myurl+ajaxData+'&callback=?',
        dataType: 'json',
        async: true,
        callback: "callback",
        success: function(body) { 
            if (body.status === "successful"){
                successful();
            }
            else {
                var errstring = body.status + ": " + body.result
                console.log (errstring);
                alert(errstring);
            }
        },
        error: function(xhr, type) { 
            var errorstring = type + ": " + xhr.status + "\n" + xhr.statusText + "\n" + xhr.responseText;
            alert (errorstring);
            console.log (errorstring);
            storage.setItem("retrieved", "false");
        }
    }) 
```

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:11:37.687

**我建议您通过为调用设置适当的超时**和一个错误函数来捕获问题所在，从而更新您的代码，如下所示：

```
$.ajax({
    url: myurl+ajaxData+'&callback=?',
    dataType: 'json',
    async: true,
    error: function(jqXHR, strError){
        if(strError == 'timeout')
        {
          //do something. Try again perhaps?
        }
    },
    success: function(){
        //do something
    },
    timeout:3000
}); 
```

您可以通过访问错误的 textStatus 参数来查看引发了什么类型的错误：function(jqXHR, textStatus, errorThrown) 选项。选项是“timeout”、“error”、“abort”和“parsererror”。

# java - 从 jsoup 解析中省略链接、广告等

> ID：10211014
> 
> 赞同：2
> 
> 时间：2012-04-18T14:01:47.420
> 
> 标签：java, web-scraping, jsoup

我正在使用 jsoup 来抓取不同的 html 页面：

```
public class HtmlParse {
    public static void main(String[] args) throws IOException {
     String site = args[0];
        Document doc = Jsoup.connect(site).get();
        String htm = doc.body().text();
        System.out.println(htm);
    }
} 
```

它工作得很好。然而，它的回报似乎有很多绒毛（即：网站链接 [a href]）。有没有一种快速的方法可以在 jsoup 中省略它？我找到了[getElementsByTag](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#getElementsByTag%28java.lang.String%29)文献，但很难使用它。

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T14:16:26.707

您可以“清理”已解析的文档，请参阅[示例](http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer)。例如，只留下简单的文本：

```
Whitelist whitelist = Whitelist.simpleText();
String result = Jsoup.clean(doc.html(), whitelist); 
```

或者，您可以简单地删除所有`a`标签：

```
doc.select("a").remove(); 
```

# algorithm - 你知道加权图的最短路径算法吗？边缘上有硬时间窗口并允许等待？

> ID：10211017
> 
> 赞同：2
> 
> 时间：2012-04-18T14:01:52.277
> 
> 标签：algorithm

我有一个加权图 G={V,E,ETW}，其中 V 是节点集，E 是边集，ETW 是一组边时间窗口。边缘时间窗口是一个 3-Tuple (edge, starttime, endtime)，其含义是在区间 [starttime, endtime] 中给定的边缘不可用。现在的问题是找到一条从开始节点到结束节点的最短路径，在该路径中允许在节点处等待（在其时间窗口之后使用边）。

有人知道这个问题的算法吗？（最好是发表该算法的论文）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:52:48.673

假设边缘值是非负的，这仍然是[dijkstra 的算法。](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)你只需要稍微修改一下。

您必须进行以下修改 - 如果您正在查看的当前节点 v 具有传出边 e，由于边的时间窗口，这是不允许的，请添加从当前节点到达时间窗口末尾所需的时间时刻（到达节点 v 的时刻）到边的权重。否则算法保持不变。

# java - 使用线程池查询远程数据库

> ID：10211019
> 
> 赞同：0
> 
> 时间：2012-04-18T14:01:54.677
> 
> 标签：java, database, multithreading, threadpool

我有一个长字符串要并行查询。我想做的是将字符串解析为更小的单元，并将每个单元发送到远程数据库并获取每个单元的查询结果。

我的并行化是这样工作的：每个解析的字符串都需要查询远程数据库，所以我创建了一个线程池，并添加了几个可运行的对象来为每个解析的字符串查询数据库。但在这种情况下，我只有一个数据库实例。所以代码大致是这样的：

```
for (String s : bigQuery)
   // this function connects to that database instance and queries the string "s"
   queryMyDatabase(s, databaseInstance); 
```

不幸的是，我的线程池实现并没有提高我的查询速度，我想知道这是否是因为我只使用了一个客户端/实例。在那种情况下我需要实现一个连接池吗？我使用 CouchDB 作为远程数据库，您对连接池有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:20:28.493

假设您的线程实现是正确的，问题可能是您的所有查询都共享与 DB 的相同连接。您可以尝试将每个查询专用于它自己的独立数据库连接（如果您愿意，可以从池中连接）。

另一种可能性是数据库无法足够快地处理您的请求，因此您这边的并行性不会给您太多。

# python-3.x - python比较单词

> ID：10211020
> 
> 赞同：4
> 
> 时间：2012-04-18T14:01:55.083
> 
> 标签：python-3.x

我遇到了以下问题：我正在尝试从电子邮件中获取主题和比较（它保存在磁盘上，以 UTF-8 发送电子邮件）

```
import re

def check_subj():
    subj = ""
    file = open("/home/hikaru/Desktop/sub.eml", "r")

    for line in file:
        try:
            a = re.search("Subject:\ ", line, re.IGNORECASE)
            a = line[a.end():]
            subj = a
            break
        except AttributeError:
            pass
    return subj

print(check_subj())

if check_subj() == 'sub':
    print("yay") 
```

对我来说一切都很好，“打印”成功地向我展示了“子”，但比较不会为我打印“耶”。我不明白为什么-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:42:58.277

正如建议的那样，行尾可能是您的问题的原因。这是一个更强大的解决方案（仅限循环）

```
for line in file:
   match = re.search("Subject:\ (.*)", line, re.IGNORECASE)
   if match:
      subj = match.group(1)
      break 
```

# php - 日期 highstock highchart

> ID：10211027
> 
> 赞同：1
> 
> 时间：2012-04-18T14:02:09.557
> 
> 标签：php, javascript, highcharts, highstock

有人能告诉我如何阅读这个日期：[1113955200000,35.51]，这个代码 1113955200000 给了我 2005 年 4 月 19 日星期二的任何想法？？？？？？这个数字意味着什么以及如何转换

```
$(function() {
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-   c.json&callback=?', function(data) {

    // Create the chart

      window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 0
        },

        title : {
            text : 'TTm'
        },

        series : [{
            name : 'AAPL Stock Price',
            data :[[1113868800000,37.09],
[1113955200000,35.51],
[1114041600000,37.18],
[1114128000000,35.50],
[1114387200000,36.98],
[1114473600000,36.19],
[1114560000000,35.95],
[1114646400000,35.54],
[1114732800000,36.06]],
            type : 'area',
            threshold : null,
            tooltip : {
                valueDecimals : 2
            },
            fillColor : {
                linearGradient : {
                    x1: 0, 
                    y1: 0, 
                    x2: 0, 
                    y2: 1
                },
                stops : [[0, Highcharts.getOptions().colors[0]], [1, 'rgba(0,0,0,0)']]
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:06:17.610

这个数字是以毫秒为单位的 Unix 时间（我认为是纪元时间）。这就是javascript处理时间值的方式。

当从您的数据中传递值以添加到图表时，它可能看起来像`01/01/1928 00:00:00`. 要将其转换为供 HighCharts 使用的适当格式，您可以执行以下操作（在 javascript 中）：

```
Date.parse('01/01/1928 00:00:00') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:06:20.073

它是一个 UNIX 样式的日期，即自特定日期 (1-1-1970 00:00) 以来的毫秒数，
请参阅[epochconverter.com](http://www.epochconverter.com/)以快速转换为人类可读的。[有关维基](http://en.wikipedia.org/wiki/Unix_time)
的更多信息

# javascript - 用于在表单输入中查找乱码的 Javascript 脚本

> ID：10211028
> 
> 赞同：5
> 
> 时间：2012-04-18T14:02:09.637
> 
> 标签：javascript, jquery, regex

我需要一个脚本或正则表达式（我将使用 Javascript / jQuery 来检查网站上的表单输入）来检查是否有人输入了大部分是乱码的单词。

正常的单词或句子应该通过测试：

```
This is a normal sentence (pass)

Peterborough (pass) 
```

像这样的词应该无法通过测试：

```
bfygrydyyisg (fail)

hjrrjmsjsinz (fail)

yqymuqawsioy (fail) 
```

我曾想过连续检查大约 6 个辅音或元音，但上面的最后一个例子仍然会通过，我知道一些像“节奏”这样的英语单词会失败（尽管这不太可能需要）。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:38:21.400

也许你可以使用像[http://www.javascriptspellcheck.com/](http://www.javascriptspellcheck.com/)这样的拼写检查 API，或者你可以参考 John Resig 的[http://ejohn.org/blog/revised-javascript-dictionary-search/](http://ejohn.org/blog/revised-javascript-dictionary-search/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:51:53.600

可能这个讨论可能会给你一些方向：[关于 JS 乱码检测的帮助](http://www.webdeveloper.com/forum/archive/index.php/t-157846.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-04T12:07:38.073

我最近遇到了同样的问题。基本上，我们需要查找表单字段是否包含乱码答案。我们希望快速检测到这一点（以免减慢表单填写速度）并推动用户提供正确的答案。

有一些新的前端和后端库进行这种检测。

1.  [https://www.npmjs.com/package/gibberish-detector](https://www.npmjs.com/package/gibberish-detector)相当自我描述
2.  恰当地命名为[https://www.npmjs.com/package/asdfjkl](https://www.npmjs.com/package/asdfjkl)
3.  在 Python 中还有：[https ://github.com/rrenaud/Gibberish-Detector](https://github.com/rrenaud/Gibberish-Detector)

希望这对其他人有帮助。

# mysql - 跨层次数据优化 MySQL 查询

> ID：10211029
> 
> 赞同：13
> 
> 时间：2012-04-18T14:02:13.187
> 
> 标签：mysql, sql, database-design, data-structures, query-optimization

我有一个相当稳定的有向图，其阶数约为 100k 个顶点，边数约为 1k。它是二维的，因为它的顶点可以通过一对整数`(x, y)`（基数 ~100 x ~1000）来识别，并且所有边都严格递增`x`。

此外，还有一个`(key, val)`与每个顶点相关联的约 1k 对字典。

我目前将图形存储在三个（InnoDB）表的 MySQL 数据库中：一个顶点表（我认为这与我的问题无关，所以我省略了包括它和引用的外键约束它在我下面的摘录中）；存放字典的表；以及 Bill Karwin 雄辩地描述的连接顶点的“闭合表”。

顶点字典表定义如下：

```
CREATE TABLE `VertexDictionary` (
  `x`   smallint(6) unsigned NOT NULL,
  `y`   smallint(6) unsigned NOT NULL,
  `key` varchar(50) NOT NULL DEFAULT '',
  `val` smallint(1) DEFAULT NULL,
  PRIMARY KEY (`x`, `y`  , `key`),
  KEY  `dict` (`x`, `key`, `val`)
); 
```

连接顶点的闭包表为：

```
CREATE TABLE `ConnectedVertices` (
  `tail_x` smallint(6) unsigned NOT NULL,
  `tail_y` smallint(6) unsigned NOT NULL,
  `head_x` smallint(6) unsigned NOT NULL,
  `head_y` smallint(6) unsigned NOT NULL,
  PRIMARY KEY   (`tail_x`, `tail_y`, `head_x`),
  KEY `reverse` (`head_x`, `head_y`, `tail_x`),
  KEY `fx` (`tail_x`, `head_x`),
  KEY `rx` (`head_x`, `tail_x`)
); 
```

还有一个字典`(x, key)`对，这样对于每个这样的对，所有用 that 标识的顶点`x`在它们的字典中都有一个 that 的值`key`。该字典存储在第四个表中：

```
CREATE TABLE `SpecialKeys` (
  `x`   smallint(6) unsigned NOT NULL,
  `key` varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (`x`),
  KEY `xkey`  (`x`, `key`)
); 
```

我经常希望提取具有特定 的所有顶点的字典中使用的键集，以及任何连接到左侧`x=X`的相关值：`SpecialKeys`

```
SELECT DISTINCT
  `v`.`key`,
  `u`.`val`
FROM
       `ConnectedVertices` AS `c`
  JOIN `VertexDictionary`  AS `u` ON (`u`.`x`, `u`.`y`  ) = (`c`.`tail_x`, `c`.`tail_y`)
  JOIN `VertexDictionary`  AS `v` ON (`v`.`x`, `v`.`y`  ) = (`c`.`head_x`, `c`.`head_y`)
  JOIN `SpecialKeys`       AS `k` ON (`k`.`x`, `k`.`key`) = (`u`.`x`, `u`.`key`)
WHERE
  `v`.`x` = X
; 
```

其`EXPLAIN`输出为：

```
id select_type table type possible_keys key key_len ref rows Extra
 1 SIMPLE k index PRIMARY,xkey xkey 154 NULL 40 使用索引；使用临时
 1 SIMPLE c ref PRIMARY,reverse,fx,rx PRIMARY 2 db.kx 1 使用 where
 1 SIMPLE v ref PRIMARY,dict PRIMARY 4 const,db.c.head_y 136 使用索引
 1 SIMPLE u eq_ref PRIMARY,dict PRIMARY 156 db.c.tail_x,db.c.tail_y,db.k.key 1 使用 where

```

但是这个查询需要大约 10 秒才能完成。一直把我的头撞在砖墙上试图改善问题，但无济于事。

可以改进查询，还是应该考虑不同的数据结构？非常感谢您的想法！

* * *

**更新**

尽管我确实重建了表并发现`EXPLAIN`输出略有不同，但我仍然无能为力（如上所示，从中获取的行数`v`已从 1 增加到 136！）；查询仍然需要大约 10 秒才能执行。

我真的不明白这里发生了什么。获取所有元组`(x, y, SpecialValue)`和所有`(x, y, key)`元组的查询都非常快（分别约为 30 毫秒和 150 毫秒），但实际上加入这两者的时间比它们的总时间长 50 倍......我如何才能缩短执行该连接所花费的时间？

下面的输出`SHOW VARIABLES LIKE '%innodb%';`：

```
变量名值
-------------------------------------------------- ----------
have_innodb 是
ignore_builtin_innodb ON
innodb_adaptive_flushing ON
innodb_adaptive_hash_index 开启
innodb_additional_mem_pool_size 2097152
innodb_autoextend_increment 8
innodb_autoinc_lock_mode 1
innodb_buffer_pool_size 1179648000
innodb_change_buffering 插入
innodb_checksums ON
innodb_commit_concurrency 0
innodb_concurrency_tickets 500
innodb_data_file_path ibdata1:10M:autoextend
innodb_data_home_dir /rdsdbdata/db/innodb
innodb_doublewrite 开启
innodb_fast_shutdown 1
innodb_file_format 羚羊
innodb_file_format_check 梭子鱼
innodb_file_per_table ON
innodb_flush_log_at_trx_commit 1
innodb_flush_method O_DIRECT
innodb_force_recovery 0
innodb_io_容量 200
innodb_lock_wait_timeout 50
innodb_locks_unsafe_for_binlog 关闭
innodb_log_buffer_size 8388608
innodb_log_file_size 134217728
innodb_log_files_in_group 2
innodb_log_group_home_dir /rdsdbdata/log/innodb
innodb_max_dirty_pages_pct 75
innodb_max_purge_lag 0
innodb_mirrored_log_groups 1
innodb_old_blocks_pct 37
innodb_old_blocks_time 0
innodb_open_files 300
innodb_read_ahead_threshold 56
innodb_read_io_threads 4
innodb_replication_delay 0
innodb_rollback_on_timeout 关闭
innodb_spin_wait_delay 6
innodb_stats_method nulls_equal
innodb_stats_on_metadata 开启
innodb_stats_sample_pages 8
innodb_strict_mode 关闭
innodb_support_xa 开启
innodb_sync_spin_loops 30
innodb_table_locks 开启
innodb_thread_concurrency 0
innodb_thread_sleep_delay 10000
innodb_use_sys_malloc 开启
innodb_version 1.0.16
innodb_write_io_threads 4

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:10:45.383

没有花时间测试它，你提供了一个不完整的例子？您绝对应该尝试**重新排序**连接的表。解释输出提供了一些信息，假设通过 key_len 排序应该是启发式最快的。我相信，要过滤的第一个表应该列在最后，以防优化器无法解决这个问题。

所以，假设'c，v，k，u'顺序是最好的。

```
SELECT DISTINCT
  `v`.`key`,
  `u`.`val`
FROM
  `VertexDictionary`  AS `u`
  JOIN `SpecialKeys`       AS `k` ON (`k`.`x`, `k`.`key`) = (`u`.`x`, `u`.`key`)
  JOIN `VertexDictionary`  AS `v`
  JOIN `ConnectedVertices` AS `c` ON (`u`.`x`, `u`.`y`  ) = (`c`.`tail_x`, `c`.`tail_y`)
           AND (`v`.`x`, `v`.`y`  ) = (`c`.`head_x`, `c`.`head_y`)
WHERE
  `v`.`x` = X
; 
```

'rows' 会建议 'c/u, k, v' 顺序，但这取决于数据：

```
SELECT DISTINCT
  `v`.`key`,
  `u`.`val`
FROM
  `VertexDictionary`  AS `u`
  JOIN `VertexDictionary`  AS `v`
  JOIN `SpecialKeys`       AS `k` ON (`k`.`x`, `k`.`key`) = (`u`.`x`, `u`.`key`)
  JOIN `ConnectedVertices` AS `c` ON (`u`.`x`, `u`.`y`  ) = (`c`.`tail_x`, `c`.`tail_y`)
                                 AND (`v`.`x`, `v`.`y`  ) = (`c`.`head_x`, `c`.`head_y`)
 WHERE
  `v`.`x` = X
; 
```

希望这可以帮助。

**更新**（避免 varchar 连接）：

```
SELECT DISTINCT
  `v`.`key`,
  `u`.`val`
FROM
       `ConnectedVertices` AS `c`
  JOIN `VertexDictionary`  AS `u` ON (`u`.`x`, `u`.`y`  ) = (`c`.`tail_x`, `c`.`tail_y`)
  JOIN `VertexDictionary`  AS `v` ON (`v`.`x`, `v`.`y`  ) = (`c`.`head_x`, `c`.`head_y`)
WHERE
  (`u`.`x`, `u`.`key`) IN (SELECT `k`.`x`, `k`.`key` FROM `SpecialKeys` AS `k`)
AND
  `v`.`x` = X
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:34:55.813

我不认为强制使用特定索引是一个好主意。Mysql 优化器通常有很好的估计。

你有索引吗`v`？`x`?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T16:01:21.273

我怀疑你的问题是语法的一切

( `k`. `x`, `k`. `key`) = ( `u`. `x`, `u`. `key`)

可以改写成吗？

kx = yx 和 k.key = u.key

当您在子句的左侧进行计算时，dbms 无法优化。通过将比较设置为直接比较，您可以提高性能。

例如

年（我的日期）='2012'

比

'2012' = 年（我的日期）

我不确定mysql是否将比较视为列比较或计算。

请尝试修改您的查询以进行列值比较。

* * *

二次优化

另外 - 您正在交叉连接 4 张桌子。乘法不是加法 - 它是指数的。你确定这是你想要的吗？从最小的结果集开始，然后只将该结果集加入下一个集，您可能会得到更好的服务。

```
select a.c1
from (
select t1.c1
from t1
join t2 on t1.c1 = t2.c1
) a
join t3 on t3.c1 = a.c1 
```

ETC...

* * *

第三次优化

如果选项 2 有帮助，您可能希望创建索引视图并从这些视图而不是直接从表中工作。

* * *

第四次优化

不要使用mysql。除非您有一个 dbas 团队不断监控性能和调整，否则您将遇到 mysql 的糟糕时期。mysql 在简单的事情上很好而且很快，但是如果你做一些中等复杂的事情，它就会变得很糟糕。4 年前，我从 mysql 迁移到 sql server express，我的 10 分钟查询用相同的表、索引和查询花费了 <2 秒...

如果你想要开源，postgres 也比 mysql 聪明得多

* * *

创建一个视图，其中包含在 v.key、u.val 字段上编制索引的前 3 个表。然后从第 4 个表和视图中运行查询。在运行之前确保索引是建立在视图上的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:29:28.457

尝试分阶段重建查询；或者至少给我们更多的点来确定瓶颈在哪里。如果可以在不修改架构或数据集的情况下，以下查询的某些组合应该可以为您提供合理的性能。

以下查询的行数和执行时间是多少，以获取合适的尾顶点列表（即，具有 SpecialKey）

```
SELECT -- DISTINCT
    vd.x as tail_x, vd.y as tail_y, vd.val
FROM
    VertexDictionary vd
WHERE
    EXISTS (
        SELECT
            1
        FROM
            SpecialKeys sk
        WHERE
            vd.x = sk.x
        AND
            vd.key = sk.key
    ) 
```

或者

```
SELECT -- DISTINCT
    vd.x as tail_x, vd.y as tail_y, vd.val
FROM
    VertexDictionary vd
JOIN
    SpecialKeys sk
ON
    vd.x = sk.x
AND
    vd.key = sk.key 
```

或者

```
SELECT -- DISTINCT
    vd.x as tail_x, vd.y as tail_y, vd.val
FROM
    VertexDictionary vd
WHERE
(vd.x, vd.key) IN (SELECT x, key FROM SpecialKeys)
-- also could try vd.key IN (SELECT sk.key FROM SpecialKeys sk WHERE sk.x = vd.x) 
```

我希望其中一个返回小的结果集，或者至少可以快速产生结果。如果低基数和大结果应用不同。

从前两个查询中选择最好的一个，然后添加到下一步：将这些合适的“尾巴”连接到“合适的头”

```
SELECT -- DISTINCT
    cv.head_y as y,
    tv.val
FROM
(
    -- ADD SUB QUERY HERE also try nesting the subquery like: (select tail_x, tail_y, val from ([SUBQUERY]) as sq)

) as tv -- tail verticies
JOIN
    ConnectedVerticies cv
ON
    cv.tail_x = tv.tail_x
AND
    cv.tail_y = tv.tail_y
WHERE
    cv.head_x = X -- lets reduce the result set here. 
```

同样，我希望其中一个返回小的结果集，或者至少可以快速产生结果。如果低基数和大结果应用不同。

如果它在这一点上倒下，那么应用最后一个阶段的速度并没有太大希望，最好尝试不同的方法。

由于从前面的查询中知道了 head x，我们现在只需要加入 head_y 和 X 即可获得 v.key

```
SELECT DISTINCT
    inner_query.val,
    head.key
FROM
(
 -- previous nested subquery behemoth here, again, try a few things that might work.

) as inner_query
JOIN
    VertexDictionary as head
ON
    head.x = X
AND
    head.y = inner_query.y 
```

另一种方法是获取 head.key、tail_x 和 tail_y 的列表

```
SELECT -- DISTINCT
    cv.tail_x as x,
    cv.tail_y as y,
    vd.key
FROM
    VertexDictionary vd
JOIN
    ConnectedVerticies cv
ON
    cv.head_x = vd.x
AND
    cv.head_y = vd.y
WHERE
    vd.head_x = X 
```

这需要多长时间才能执行，有和没有不同？有多少结果（w & w/o distinct）？

如果它很快和/或很小，请尝试将其用作子查询，并加入到 SpecialKeys 和 VertexDictionary 的另一个子查询（如果它们运行良好的话）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T17:12:01.137

其他人可能不同意，但我已经并定期提供 STRAIGHT_JOIN 用于查询......一旦你知道数据和关系。由于您的 WHERE 子句针对“V”表别名并且它是“x”值，因此您对索引很好。将 THAT 移到前面位置，然后从那里加入。

```
SELECT STRAIGHT_JOIN DISTINCT
      v.`key`,
      u.`val`
   FROM
      VertexDictionary AS v 

         JOIN ConnectedVertices AS c
            ON v.x = c.head_x
            AND v.y = c.head_y

            JOIN VertexDictionary AS u 
               ON c.tail_x = u.x 
               AND c.tail_y = u.y

               JOIN SpecialKeys AS k
                  ON u.x = k.x
                  AND u.key = k.key
   WHERE
      v.x = {some value} 
```

很想知道这种重新调整如何为您服务

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T23:22:01.777

`DISTINCT`往往是个坏朋友。尝试将其替换为`GROUP BY`. 像这样 ：

```
SELECT sub.key, sub.val
FROM (
    SELECT 
      v.key,
      u.val
    FROM
      ConnectedVertices AS c
      JOIN VertexDictionary  AS u ON (u.x, u.y  ) = (c.tail_x, c.tail_y)
      JOIN VertexDictionary  AS v ON (v.x, v.y  ) = (c.head_x, c.head_y)
      JOIN SpecialKeys       AS k ON (k.x, k.key) = (u.x, u.key)
    WHERE (v.x = @X)
) AS sub
GROUP BY sub.key, sub.val 
```

**更新：**

然后尝试以下查询强制使用索引：

```
SELECT DISTINCT
  v.key,
  u.val
FROM
  ConnectedVertices AS c USE INDEX (fx,rx)
  JOIN VertexDictionary  AS u USE INDEX (primary) ON (u.x, u.y  ) = (c.tail_x, c.tail_y) 
  JOIN VertexDictionary  AS v USE INDEX (primary) ON (v.x, v.y  ) = (c.head_x, c.head_y)
  JOIN SpecialKeys       AS k USE INDEX (primary) ON (k.x, k.key) = (u.x, u.key)
WHERE (v.x = @X) 
```

如果还是不行，试试这个：

```
SELECT DISTINCT
  v.key,
  u.val
FROM
       ConnectedVertices AS c
  JOIN VertexDictionary  AS u ON (u.x=c.tail_x) AND (u.y=c.tail_y)
  JOIN VertexDictionary  AS v ON (v.x=@X) AND (v.y=c.head_y)
  JOIN SpecialKeys       AS k ON (k.x=u.x) AND (k.key=u.key)
WHERE
  v.x = @X 
```

# ruby - Ruby rails - jquery ajax 提交表单

> ID：10211032
> 
> 赞同：2
> 
> 时间：2012-04-18T14:02:22.527
> 
> 标签：ruby, ajax, ruby-on-rails-3

发送ajax请求是否正确？此代码不起作用，我需要在这里更改什么？发送ajax表单的更好方法？

```
<%=  form_tag item_create_path, :remote => true, :id => 'create_item'  do %>
  <p>
   <b> <%= label_tag :"Name" %></b> <%= text_field_tag :name, nil, :maxlength => 40, :size => 70 %>
   <b> <%= label_tag :"Date" %></b> <%= text_field_tag :date, nil, :maxlength => 10, :size => 10, :value => Time.now.utc.strftime("%Y-%m-%d") %>
   <b> <%= label_tag :"Time" %></b> <%= text_field_tag :time, nil, :maxlength => 10, :size => 10, :value => Time.now.localtime.strftime("%H:%M:%S") %>
   </p>
  <p>
   <b> <%= label_tag :Description %></b> <%= text_field_tag :description, nil, :maxlength => 50, :size => 50 %>
  </p>

<%= hidden_field_tag :type, nil, :value => "new" %>
<p class="button"><%= submit_tag "  Create  ",:onclick=>"javascript:submitForm()" %></p>
<% end %>

function submitForm() {
    $.ajax({type:'POST', url: '/item/create', data:$('#create_item').serialize(), success: function(response) {
        $('#create_item').find('#item').html(response);
    }});

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:13:25.047

使用它肯定会起作用

```
 <%= form_for(:customer, :url => {:controller => "subscribers", :action => "change_password"}, :html => {:id => 'edit_password_form', :method => :get, :onsubmit => "return false;"}) do |f| %>
      <%= hidden_field_tag "ids", :id => "ids"%>
      <div class="ports-fields">
        <div class="pass">
          <label style="margin-top:4px;">Password</label> 
          <%= f.password_field :password, :class=> 'fields', :placeholder => 'Password' %>
        </div>
        <div class="pass">
           <label>Confirm Password</label> 
           <%= f.password_field :password_confirmation, :class=> 'fields', :placeholder => 'Password Confirmation' %>
        </div>
        <div class="change-pass-btn-submit"> 
           <%= submit_tag "CHANGE PASSWORD", :id => "edit_password_btn" %>
        </div>
        <!--modify ports ends-->
      </div>
    <% end %> 
```

和为此的jquery代码

```
 <script type="text/javascript">
       $("#edit_port_btn").click(function() {
            var container = $("#info");
            $("#edit_port_form").submit(function() {
                $(this).unbind('submit').ajaxSubmit({
                    success: function(data) {
                        container.html(data);
                        hudMsg('success', 'Modify ports successfully.');
                    }
                })
            }); 
       });
   </script> 
```

和享受....

# objective-c - 在objective-c中声明属性和@property的区别

> ID：10211033
> 
> 赞同：4
> 
> 时间：2012-04-18T14:02:23.913
> 
> 标签：objective-c, cocoa-touch, cocoa

我知道@property 在Objective-c 中生成getter 和setter。但是我见过一些类，它们使用各自的@property 声明属性，有时只是没有属性的@property，并且接缝以相同的方式工作。有什么不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T14:19:09.590

> 我知道@property 在Objective-c 中生成getter 和setter。

不，你没有。 `@property` **声明**一个属性，它是一个 getter 和可选的 setter（用于读/写属性）。getter 和 setter 的生成是由`@synthesize`实现中的（或由您编写 getter 和 setter）完成的。

> 但我见过一些类，它们用各自的@property 声明属性

你的意思是这样吗？

```
@interface Foo : NSObject
{
    Bar* anAttribute; // <<=== this is an instance variable
}

@property (retain) Bar* anAttribute;

@end 
```

在现代 Objective-C 运行时，如果你`@synthesize`是属性，你可以省略实例变量声明，编译器会为你放入。是否显式声明实例变量是个人喜好问题。

* * *

只是为了让您有点困惑，在最新的编译器中，您可以省略`@synthesize`并且只要您没有显式创建 getter 或 setter，编译器就会为您放入它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T14:24:15.193

在 ios 5.0 下，您可以将十种不同的属性附加到属性声明：nonatomic、readwrite、readonly、getter= *name*、setter= *name*、strong、retain、copy、weak、assign。（强，弱是 ios 5.0 下的新功能，只有在使用 ARC 时才有意义）。

nonatomic 声明不应保护变量访问*免受*多线程并发访问。这不是默认设置，尽管 99% 的时间都是您想要的（因为如果您不进行多线程处理，这种保护会使您的代码运行速度变慢而没有任何好处）。

readwrite/readonly 应该相当明显 - readwrite 是默认设置，如果您声明一个属性 readonly，它没有设置器。

getter=, setter= 控制应该调用什么 getter 和 setter 方法。如果省略它们，它们将分别称为*属性名称*和 set*property name*。

其余属性（强、弱、保留、复制、分配）是内存管理器的提示，它们的行为取决于您是否使用 ARC。如果你不是，那么“retain”属性会告诉 setter 方法在它获得引用的任何对象上自动调用*retain 。*这意味着您还必须在释放器中调用*release*。

“assign”属性告诉setter不要调用*retain——*所以如果对象被另一个对象释放，这个指针可能会悬空。

“复制”属性告诉设置器调用*保留*并制作属性的副本 - 当您获得 NSDictionary 并且您不希望调用者传递 NSMutableDictionary 的实例并更改内容时，这很有用从你下面出来。

如果您使用 ARC，通常只会设置“强”或“弱”。（强是保留的同义词，因此它们可以互换使用）。“强”告诉 ARC 为您保留变量 - “弱”告诉它不要。当您有潜在的“保留周期”时，“弱”很有用，其中对象 A 引用对象 B 和对象 A - 如果它们都相互保留，则存在内存泄漏，因此您需要将其中一个设为弱参考。

# java - Eclipse Web 项目不是用 ANT 构建的吗？

> ID：10211034
> 
> 赞同：0
> 
> 时间：2012-04-18T14:02:24.767
> 
> 标签：java, eclipse, ant

Eclipse Web 项目不是用 ANT 构建的……我让 Eclipse 构建了我的 build.xml 文件，但是如果我转到注释行并运行 ANT，它不会在任何地方生成 WAR 文件。有人可以告诉我为什么吗？

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- WARNING: Eclipse auto-generated file.
              Any modifications will be overwritten.
              To include a user specific buildfile here, simply create one in the same
              directory with the processing instruction <?eclipse.ant.import?>
              as the first entry and export the buildfile again. -->
<project basedir="." default="build" name="MemberInquiry">
    <property environment="env"/>
    <property name="debuglevel" value="source,lines,vars"/>
    <property name="target" value="1.6"/>
    <property name="source" value="1.6"/>
    <path id="Apache Tomcat v6.0 [Apache Tomcat v6.0].libraryclasspath">
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/tomcat-i18n-ja.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/catalina.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/commons-pool.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/jasper-el.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/jasper-jdt.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/jboss-logging-jdk.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/mysql-connector-java-5.0.5.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/catalina-ant.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/tomcat-coyote.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/jsp-api.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/jasper.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/tomcat-i18n-fr.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/commons-dbcp.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/tomcat-juli-adapters.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/el-api.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/catalina-ha.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/tomcat-dbcp.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/log4j.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/annotations-api.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/mod-cluster.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/jboss-logging-spi.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/servlet-api.jar"/>
        <pathelement location="../../jboss-ews-1.0/tomcat6/lib/tomcat-i18n-es.jar"/>
    </path>
    <path id="Web App Libraries.libraryclasspath">
        <pathelement location="WebContent/WEB-INF/lib/activation-1.0.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/antlr-2.7.6.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/aopalliance-1.0.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/asm-1.5.3.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/asm-attrs-1.5.3.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/cas-client-core-3.2.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/cglib-2.1_3.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-beanutils-1.7.0.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-codec-1.4.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-collections-2.1.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-dbcp.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-digester-1.8.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-email-1.0.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-fileupload-1.1.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-io-1.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-lang-2.5.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-logging-1.1.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-pool.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/dom4j-1.6.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/dumbster-1.6.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/ehcache-1.2.3.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/hibernate-3.2.6.ga.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/hibernate-annotations-3.3.1.GA.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/hibernate-commons-annotations-3.0.0.ga.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/hibernate-entitymanager-3.3.2.GA.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/hibernate-search-3.0.0.GA.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/hibernate-validator-4.0.2.GA.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/httpclient-4.1.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/httpclient-cache-4.1.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/httpcore-4.1.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/httpmime-4.1.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/icu4j-2.6.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/javassist-3.4.GA.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/jaxb-api-2.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/jaxb-impl-2.1.3.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/jaxen-1.1.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/jdom-1.0.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/jstl-1.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/jta-1.1.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/log4j-1.2.14.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/lucene-core-2.3.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/lucene-highlighter-2.0.0.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/mail-1.4.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/mysql-connector-java-5.0.5.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/persistence-api-1.0.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/quartz-1.5.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/slf4j-api-1.5.6.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/slf4j-log4j12-1.5.6.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-aop-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-asm-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-beans-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-context-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-core-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-expression-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-jdbc-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-ldap-1.3.0.RELEASE-all.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-orm-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-acl-3.0.5.RELEASE-sources.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-acl-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-aspects-3.0.5.RELEASE-sources.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-aspects-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-cas-client-3.0.5.RELEASE-sources.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-cas-client-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-config-3.0.5.RELEASE-sources.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-config-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-core-3.0.5.RELEASE-sources.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-core-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-ldap-3.0.5.RELEASE-sources.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-ldap-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-openid-3.0.5.RELEASE-sources.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-openid-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-taglibs-3.0.5.RELEASE-sources.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-taglibs-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-web-3.0.5.RELEASE-sources.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-security-web-3.0.5.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-tx-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-web-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/spring-webmvc-3.0.1.RELEASE.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/stax-api-1.0-2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/validation-api-1.0.0.GA.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/xalan-2.6.0.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/xercesImpl-2.6.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/xml-apis-1.3.02.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/xmlParserAPIs-2.6.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/xom-1.0.jar"/>
        <pathelement location="WebContent/WEB-INF/classes"/>
    </path>
    <path id="EAR Libraries.libraryclasspath"/>
    <path id="MemberInquiry.classpath">
        <pathelement location="build/classes"/>
        <path refid="Apache Tomcat v6.0 [Apache Tomcat v6.0].libraryclasspath"/>
        <path refid="Web App Libraries.libraryclasspath"/>
        <path refid="EAR Libraries.libraryclasspath"/>
        <pathelement location="WebContent/WEB-INF/lib/httpclient-4.1.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/httpclient-cache-4.1.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/httpcore-4.1.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/httpmime-4.1.2.jar"/>
        <pathelement location="WebContent/WEB-INF/lib/commons-codec-1.4.jar"/>
        <pathelement location="WebContent/WEB-INF/classes/log4j.xml"/>
    </path>
    <target name="init">
        <mkdir dir="build/classes"/>
        <copy includeemptydirs="false" todir="build/classes">
            <fileset dir="src">
                <exclude name="**/*.java"/>
            </fileset>
        </copy>
    </target>
    <target name="clean">
        <delete dir="build/classes"/>
    </target>
    <target depends="clean" name="cleanall"/>
    <target depends="build-subprojects,build-project" name="build"/>
    <target name="build-subprojects"/>
    <target depends="init" name="build-project">
        <echo message="${ant.project.name}: ${ant.file}"/>
        <javac debug="true" debuglevel="${debuglevel}" destdir="build/classes" source="${source}" target="${target}">
            <src path="src"/>
            <classpath refid="MemberInquiry.classpath"/>
        </javac>
    </target>
    <target description="Build all projects which reference this project. Useful to propagate changes." name="build-refprojects"/>
</project> 
```

这是屏幕的输出：

[jsmith@wcmisdlin07 MemberInquiry]$ ant Buildfile: build.xml

构建子项目：

init: [copy] 将 1 个文件复制到 /home/jsmith/uft-workspace/MemberInquiry/build/classes

build-project: [echo] MemberInquiry: /home/jsmith/uft-workspace/MemberInquiry/build.xml

建造：

构建成功总时间：0 秒

请让我知道要尝试什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T21:03:13.937

那个特定的 ant 脚本不会构建战争，它所做的只是编译 java.util. 除了简单地运行这个 ant 脚本之外，您还必须在 eclipse 中执行一些其他操作来创建一个 war 文件。

# c++ - 在元素自己的析构函数中擦除指向静态向量中元素的指针

> ID：10211036
> 
> 赞同：0
> 
> 时间：2012-04-18T14:02:27.647
> 
> 标签：c++, visual-c++, pointers, destructor, stdvector

下面的代码来自我用动态内存管理编写的游戏。我有一个名为“all_gadgets”的静态向量，其中包含指向游戏中每个小工具的指针。在运行时删除小工具时，我想从静态向量中删除相应的指针。我试过这个：

```
Gadget::~Gadget(){
    int i = Gadget::all_gadgets.size();
    for (std::vector<Gadget *>::iterator it = Gadget::all_gadgets.begin(); it!=all_gadgets.end(); ++it){

        if ((*it)==this){
            Gadget::all_gadgets.erase(it);

            break;
        }
    }

    int j = (i - Gadget::all_gadgets.size());
    if(j!=1)
        std::cout << j << " ooops! Gadget not deleted!!" << std::endl;
} 
```

在上面的代码中， j 将变成零 :( 有什么建议吗？

将指针设置为 null 不是一种选择。我正在使用VC10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:25:40.680

为此使用侵入性双链表，插入、删除和按顺序迭代会更有效。

通常，链表的局部性很差。但是对于您的指针向量，虽然指针本身可能以很大的局部性存储，但内容需要额外的间接级别和局部性丢失。

使用侵入式链表，局部性与内容的局部性完全一样。所以你达到了局部性的理论上限，加上便宜的插入和删除。

* * *

您的实际问题可能源于没有为每个构造函数进行插入。编译器默认生成一个复制构造函数（在 C++11 中，移动构造函数），它不会更新您的`all_gadgets`列表，除非您提供自己的。

# javascript - 这个 javascript 正则表达式会替换空格吗？

> ID：10211037
> 
> 赞同：0
> 
> 时间：2012-04-18T14:02:31.147
> 
> 标签：javascript, regex

我正在浏览 twitter bootstrap 的代码，我已经在这个片段中昏迷了几次。

```
href.replace(/.*(?=#[^\s]+$)/, '') //strip for ie7 
```

正则表达式是我的盲点，我无法弄清楚其中的大部分。它在取代什么？#后面是空格吗？

边注。任何人都可以推荐一个好的正则表达式学费来源吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T14:07:05.347

这是它正在寻找的内容：

```
.*     # any number of characters (optional)
(?=    # open a lookahead
#      # find a hash tag
[^\s]+ # at least one non-whitespace character
$      # end of line
)      # close the lookahead 
```

因此，例如，它匹配哈希标记之前的内容：

```
replace this!#foobar   <-- matches: replace this!
hello world#goodbye    <-- matches: hello world
no match here !        <-- doesn't match anything because there is no hash
what?#                 <-- does not match because there is nothing after the hash
what?# asd             <-- does not match because there is a whitespace-character 
```

# iphone - 我想在值后打印浮点值和 % 符号

> ID：10211039
> 
> 赞同：-2
> 
> 时间：2012-04-18T14:02:33.533
> 
> 标签：iphone, objective-c, c

示例：2.3666% 我正在使用。但不工作..

```
float n = 2.3666;
NSLog(@"%f%",n); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T14:04:55.253

您需要[使用`%%`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)

```
float n = 2.3666;
NSLog(@"%f%%",n); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-18T14:04:57.500

逃脱`%`：

```
NSLog(@"%f%%",n); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:08:14.720

使用 %% 在 NString NSLog 中转义 % 字符

# jquery - 使用包含选择器使用 jquery 突出显示确切的字符串

> ID：10211040
> 
> 赞同：2
> 
> 时间：2012-04-18T14:02:43.410
> 
> 标签：jquery, string, match

我试图准确地突出显示包含某个字符串的所有字段，在下面的示例中，我还将匹配 someuser2、someuser3 等。

```
$("div.forumbody .username:contains('someuser')").css("background", "#6a5acd"); 
```

如何搜索确切的字符串并制作字段#6a5acd 的背景？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:08:04.753

试试[这个](http://www.foliotek.com/devblog/jquery-custom-selector-for-selecting-elements-by-exact-text-textequals/)

创建自定义选择器

```
$.expr[':'].textEquals = function(a, i, m) {
return $(a).text().match("^" + m[3] + "$");
}; 
```

并使用它

```
$("div.forumbody .username:textEquals('someuser')").css("background", "#6a5acd"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:27:28.583

这对我来说是正确的...确保您的选择器在没有包含的情况下正常工作...

```
$("div.forumbody .username").css("background", "#6a5acd"); 
```

**编辑**

对于文本字段：

```
$("div.forumbody .username[value*=someuser]").css("background", "#6a5acd"); 
```

或者，如果它们没有预先填充（基于 Govind 的回答）：

```
$.expr[':'].valHas = function(a, i, m) {
  return $(a).val().match("^" + m[3] + "$");
};

$("div.forumbody .username:valHas('someuser')") 
```

**双重编辑**

这经过测试工作更简单：

```
jQuery("div.forumbody .username:text[value*='someuser']").css("background", "#6a5acd"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T10:13:50.520

尝试添加一个扩展伪函数：

```
$.expr[':'].textEquals = $.expr.createPseudo(function(arg) {
    return function( elem ) {
        return $(elem).text().match("^" + arg + "$");
    };
}); 
```

然后你可以这样做：

```
$("div.forumbody .username:textEquals('someuser')").css("background", "#6a5acd"); 
```

# sql-server - 使用触发器插入最后一个主键而不是身份

> ID：10211043
> 
> 赞同：0
> 
> 时间：2012-04-18T14:02:57.710
> 
> 标签：sql-server, sql-server-2008, primary-key

我有一个插入触发器来插入表的主键（varchar）。我想获取最后插入的主键值。这是我的插入触发器

```
 ALTER TRIGGER dbo.equipment_insert_pk 
     ON  dbo.Equipment 
     INSTEAD OF INSERT
AS 
BEGIN
    SET NOCOUNT ON;
    declare @id int;
    declare @cat varchar(2);
    select @cat=CategoryID from INSERTED;
    select @id=cast(max(right(EquipmentID,4)) as int) from Equipment where CategoryID=@cat;
    set @id=isnull(@id,0)+1;
    -- Insert statements for trigger here
    insert into Equipment
    select CategoryID+right('0000'+cast(@id as varchar(4)),4)
    ,CategoryID
    ,Location
    ,Detail
    ,'../BarcodeImage/'+CategoryID+right('0000'+cast(@id as varchar(4)),4)+'.jpeg'  from INSERTED;

END 
```

我试图编写一个函数来获取最后插入的主键值，但它似乎不起作用..因为触发器之外没有“插入”的范围。帮助我..我在触发器中尝试了这段代码，输出子句没有结果所以远的..

```
insert into Equipment 
    output INSERTED.EquipmentID into @Temp_Tbl
    select CategoryID+right('0000'+cast(@id as varchar(4)),4)
    ,CategoryID
    ,Location
    ,Detail
    ,'../BarcodeImage/'+CategoryID+right('0000'+cast(@id as varchar(4)),4)+'.jpeg'  from INSERTED; 
```

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:36:14.397

行。几周前我遇到了同样的问题。

我尝试了许多不同的方法 - 无济于事。长话短说 - 我最终添加了一个类型为`UNIQUEIDENTIFIER`(guid)的新列

因此，使用您的示例-假设有一个名为`guid`in`dbo.Equipment`

大致来说，这是你如何做到的：

```
insert into Equipment 
    output INSERTED.EquipmentID, INSERTED.guid into @Temp_Tbl
    select CategoryID+right('0000'+cast(@id as varchar(4)),4)
    ,CategoryID
    ,Location
    ,Detail
    ,'../BarcodeImage/'+CategoryID+right('0000'+cast(@id as varchar(4)),4)+'.jpeg'
    ,NEWID() -- new column 
```

来自插入；

然后您可以查询`dbo.Equipment`使用`@Temp_Tbl.guid`以获取插入的ID。例如：

`SELECT EquipmentID FROM dbo.Equipment e WHERE EXISTS (SELECT * FROM @Temp_Tbl tt WHERE tt.guid = e.guid)`

# c# - 处理数据库中的 Char 值

> ID：10211044
> 
> 赞同：0
> 
> 时间：2012-04-18T14:02:59.083
> 
> 标签：c#, asp.net, char

我将 char 值保存在表中，类型为“char(10)”。当我尝试获取表中一行的值时，我执行以下操作：

```
DataTable table = MyAdoHelper.ExecuteDataTable(GlobalVar.dbName, Query); 
```

Ado 助手只是一个从表中提取数据的工具，没有什么特别之处。

当我做下一个时：

```
string MemberGender = (table.Rows[0]["member_gender"].ToString() == "m") ? "Male" : "Female"; 
```

但即使在数据库中有“m”时，MemberGender 也始终是“女性”。

我应该如何处理 char 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:18:03.520

除了@Heinzi 和@JonSaunders 回复

在数据库级别处理它？原因是，它在数据库中与代码隐藏操作相比更快，并且案例非敏感性是加分点。

假设数据库是`Sql Server`.

```
create table #t
(
  Nam char(10)
)

Insert into #t(Nam)Values('M')
Insert into #t(Nam)Values('F)

Select Case When Nam = 'm' Then 'Male' Else 'Female' End As Member_Gender From #t

Drop Table #t 
```

* * *

## 结果集

![在此处输入图像描述](../Images/a0e42dff286f03e6a3d10486dca4a81e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:12:37.670

`Char`值用空格填充，所以你实际得到的是`"m         "`. [在 SQL Server 上，可以使用SET ANSI_PADDING](http://msdn.microsoft.com/en-us/library/ms187403.aspx)语句打开和关闭此行为（对于可为空的字符） 。

要在 C# 端解决这个问题，`Trim()`在比较之前你的值：

```
... table.Rows[0]["member_gender"].ToString().Trim() == "m" ... 
```

`Char(1)`或者，通过将数据类型更改为或来修复您的数据库架构`Varchar(10)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:08:59.020

“m”与“M”不同。它在数据库中可能相同，但在 C# 中则不同。

# java - Hibernate jdbc 找不到合适的驱动程序

> ID：10211049
> 
> 赞同：1
> 
> 时间：2012-04-18T14:03:08.310
> 
> 标签：java, hibernate, jdbc

使用 Hibernate 时，我收到可怕的未找到合适的驱动程序错误。我很确定驱动程序 jar 在类路径中，我可以这样做`Class.forName("com.mysql.jdbc.Driver")`。事实上，现在我只是在构建会话工厂之前调用它，我的代码就可以工作了。但这“安全”吗？为什么会这样？这是我的配置：

```
<session-factory>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/test</property>

    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">password</property>

    <property name="connection.pool_size">1</property>

    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>

    <property name="show_sql">true</property>
    <property name="format_sql">true</property>
    <property name="use_sql_comments">false</property>

    <mapping resource="User.hbm.xml" />
</session-factory> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:24:40.780

听起来 JAR 在`CLASSPATH`. `NoClassDefFound`如果不是这种情况，你会得到一个例外。

没有合适的驱动程序通常意味着连接 URL 语法对于给定的驱动程序不正确。

MySQL 需要`"jdbc:mysql://server:3306/database"`- 你的看起来是正确的。

如果它不能解析本地主机，你就会遇到问题。也许 127.0.0.1 会更好。

MySQL 是否在监听 3306 端口？

您要求连接的数据库是否存在？你可以通过 MySQL 客户端登录并查看表和数据吗？

# c# - ExecuteScalar() 返回 null alough 数据已添加到 DB

> ID：10211050
> 
> 赞同：7
> 
> 时间：2012-04-18T14:03:10.373
> 
> 标签：c#, sql, tsql, ado.net, executescalar

我有如下代码，我尝试将数据插入表中并返回新元素的 ID（由自动增量给出）。

```
int newEquipmentID = new int();

query = database.ParameterizedQueryString("INSERT INTO Equipment (EquipmentTypeID) VALUES ({0})", "equipmenttypeID");

newEquipmentID = (int)database.Connection.ExecuteScalar(query, DefaultTimeout, equipment.EquipmentTypeID); 
```

但它失败并返回 null，就好像尚未添加新项目一样。但实际上我可以看到新项目在数据库中进行了简单的咨询。

我的问题是“何时”将数据实际添加到数据库中，以及如何获取新添加项目的 ID。谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T14:07:26.033

您不需要两个查询来创建新记录并检索新的身份值：

```
using (var con = new SqlConnection(ConnectionString)) {
    int newID;
    var cmd = "INSERT INTO foo (column_name)VALUES (@Value);SELECT CAST(scope_identity() AS int)";
    using (var insertCommand = new SqlCommand(cmd, con)) {
        insertCommand.Parameters.AddWithValue("@Value", "bar");
        con.Open();
        newID = (int)insertCommand.ExecuteScalar();
    }
} 
```

旁注：我不会使用这样的数据库类，因为[它容易出错](https://stackoverflow.com/questions/9705637/executereader-requires-an-open-and-available-connection-the-connections-curren/9707060#9707060)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:06:33.707

您的 SQL 查询不会返回新生成的 Id。要返回它，请使用一个[`OUTPUT`子句](http://msdn.microsoft.com/en-us/library/ms177564.aspx)：

```
INSERT INTO Equipment (<list of fields>) 
    OUTPUT inserted.EquipmentTypeID 
VALUES (<list of values>) 
```

需要注意的一些事项：

*   `<list of fields>`表示您将为其提供值的列的逗号分隔列表
*   字段列表*不应*包含自动递增 ID 列（将自动分配一个值）
*   `<list of values>`表示将插入上述指定字段的逗号分隔值列表。值的数量应该等于字段的数量并且数据类型必须匹配

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T14:04:20.823

要返回刚刚插入的行的 id，您需要选择它，因为`ExecuteScalar()`返回

> 查询返回的结果集中第一行的第一列

并且`INSERT`不选择/返回任何东西。

```
insert ...
select ... 
```

有关更多详细信息，请参阅@Tim 的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:09:44.727

OUTPUT 子句将帮助您获取新添加项目的 ID。欲了解更多信息，请参阅以下链接：

点击[这里](http://blog.sqlauthority.com/2007/10/01/sql-server-2005-output-clause-example-and-explanation-with-insert-update-delete/ "点击这里查看更多详情")！了解更多详情

# php - yii cdbexpression 表达式带有别名错误

> ID：10211052
> 
> 赞同：0
> 
> 时间：2012-04-18T14:03:10.837
> 
> 标签：php, yii

我有以下代码

```
$criteria=new CDbCriteria;
$criteria->with = array('owner'=>array('select'=>array('*','payment_info'=>'payment_account'))); 
```

效果很好，但是当我将 concat 添加到其中时

```
$criteria->with = array('owner'=>array('select'=>array('*','payment_info'=>'concat(payment_account)'))); 
```

它给我一个错误

```
Active record "User" is trying to select an invalid column "concat(payment_account)". Note, the column must exist in the table or be an expression with alias. 
```

如何为其提供别名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:10:36.420

尝试给它一个别名，例如：

`$criteria->with = array('owner'=> array('select'=> array('*','payment_info'=>'concat(payment_account) as conc')));`

我以前用过这种方法没有问题。

# blackberry - 用户需要为应用程序升级付费。为什么？

> ID：10211053
> 
> 赞同：-1
> 
> 时间：2012-04-18T14:03:16.923
> 
> 标签：blackberry

我们之前已经上传了一个付费版本（1.0）的应用程序。现在我们上传了新的付费版本，其中包含一些更改和错误修复，并推出了新版本 (1.1) 并上传到 App-world。

现在，它只是一个升级，用户必须能够免费升级他的应用程序。（这在所有其他移动平台上都可以理解和通用）

但是我们收到了用户关于新版本的询问。用户（在尝试升级同一个应用程序时）被要求为应用程序升级付费。我很困惑怎么会发生这种情况。？

在 Blackberry App-world 上传新版本时我错过了什么吗？请帮忙。我需要解决这个问题。感谢任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T22:21:23.080

听起来您在提交新版本时可能不小心指定了**升级价格。**这与初始版本的**价格**是分开的。这在[文档](http://docs.blackberry.com/en/developers/deliverables/40036/1278467.jsp)中有所说明：

> 如果您要添加的版本不是产品的初始版本，请在**升级价格**下拉列表中，单击您希望向用户收取的价格以升级到产品的最新版本。

# sql - 如何使用存储过程查看表的全部内容

> ID：10211054
> 
> 赞同：1
> 
> 时间：2012-04-18T14:03:18.983
> 
> 标签：sql, stored-procedures, db2

如何使用存储过程来查看 IBM DB2 中表的全部内容（以及我猜想的任何其他内容，因为 SQL 脚本在所有这些内容中都是相同的）？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:36:15.680

在 DB2 中，您必须创建一个从您需要的表中读取数据的游标，然后打开它以获取结果。我会给你一个没有参数的样本。

```
CREATE PROCEDURE MY_SCHEMA.SP_SEL_TABLEX()
RESULT SET 1
LANGUAGE SQL
BEGIN
    DECLARE C_TABLEX CURSOR FOR
        SELECT COL1, COL2
        FROM MY_SCHEMA.TABLEX;
    OPEN C_TABLEX;
END; 
```

# cxf - 如何告诉 CXF wsdl2Java 为特定版本的 XMLBeans 生成 java 代码

> ID：10211056
> 
> 赞同：0
> 
> 时间：2012-04-18T14:03:23.413
> 
> 标签：cxf, wsdl2java

我面临 CXF wsdl2java 的任何问题。我需要为特定版本的 xmlbeans 使用带有 xmlbeans 数据绑定的 CXF wsdl2java 生成 Java 代码。

默认情况下，它看起来像是为 2.5.0 生成的。就我而言，我想为 xmlbeans 2.4.0 生成代码

CXF wsdl2Java 命令使用 -db 选项指定数据绑定，但寻找如何给出数据绑定的版本。找不到怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:19:28.690

CXF 将只使用它在类路径中找到的 XMLBeans 版本。因此，如果您需要 2.4.0，只需删除 CXF 提供的 2.5.0 jar 并确保 2.4.0 版本在类路径中可用。也就是说，我不确定 CXF 是否已经用 2.4.0 测试了一段时间。

# python - Scikit LDA 在 RFECV 中的使用

> ID：10211060
> 
> 赞同：0
> 
> 时间：2012-04-18T14:03:45.187
> 
> 标签：python, machine-learning, scikit-learn, scikits

我正在使用递归特征排名函数 i scikit-learn (http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFECV.html#sklearn.feature_selection.RFECV)。但是，我想使用 LDA 分类器作为估计器。我有这个代码：

```
X, y = make_friedman1(n_samples=50, n_features=10, random_state=0)
estimator = LDA()
#selector = RFE(estimator,5,step = 1)
selector = RFECV(estimator, cv = 5,step = 1)
selector=selector.fit(X,y)
print selector.support_
print selector.ranking_ 
```

当我执行此代码时，出现错误。如果我用 RFE 执行相同的代码，就可以了。或者如果我使用 SVR 分类器，它可以正常工作。我的问题是，当我调用 LDA() 方法时，我是否得到了一个分类器。RFECV 将使用“估计器”中的分类器对特征进行排名。LDA有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:14:26.097

从[文档](http://scikit-learn.org/stable/modules/generated/sklearn.datasets.make_friedman1.html#sklearn.datasets.make_friedman1)：

> `sklearn.datasets.make_friedman1`：生成“Friedman #1”**回归**问题

（重点补充）

您不能明智地在回归问题上使用分类器。起作用的原因`SVR`不是分类器学习器，而是回归学习器。

# javascript - 正则表达式问题：自定义电话号码格式

> ID：10211061
> 
> 赞同：0
> 
> 时间：2012-04-18T14:03:46.063
> 
> 标签：javascript, regex

我第一次使用正则表达式，我真的很惊讶！好吧，新发现总是令人惊讶:)。我在 JavaScript 中使用。我正在使用以下方式；（有很多字段，除了这个电话格式之外，所有字段都工作得很好）

```
function validate(form) {
    var phone = form.phone.value;
    var phoneRegex = /^(\+|00)\d{2,3}-\d{1,2}-\d{3}-\d{4}$/g;
    //Checking 'phone' and its regular expressions  
    if(phone == "") {
      inlineMsg('phone','<strong>Error</strong><br />You must enter phone number.',2);
    return false;
    }
    if(!phone.match(deptRegex)) {
      inlineMsg('phone','<strong>Error</strong><br />Enter valid phone <br />+xxx-x-xxx-xxxx (or) <br />00xxx-x-xxx-xxxx.',2);
    return false;
    }
  return true;
} 
```

**HTML**

```
<div id="wrapper">
  <form name="form" id="form" class="form" onsubmit="validate(this);return false">
<label for="phone">Phone:</label><input type="text" name="phone" id="phone" />
<input type="submit" value="Submit" class="submit" />
</div> 
```

现在我很困惑，我可能写错了表达式，但我也测试了它。我想我用 JavaScript 写表达式是错误的。有人可以帮忙吗？

**PS**以下是我测试表达式的[正则表达式在线测试仪的图像。](http://www.cyber-reality.com/regexy.html)

![表达测试](../Images/cd1c07fbf4ac536abfd1eb87d298f20f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:28:17.047

我可以看到您的代码存在两个问题：

*   最后一个之前没有结束`</form>`标签`</div>`
*   您正在为您的正则表达式使用两个不同的变量名称：`phoneRegex`和`deptRegex`.

纠正这些问题后，代码运行良好。看看它在 jsFiddle 上的工作：http: [//jsfiddle.net/XFWGk/](http://jsfiddle.net/XFWGk/)

如果这不起作用，则问题可能出在您的`inlineMsg`功能上。我不熟悉那个，所以请确保您正确使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:40:21.440

```
 ^(\+|00)\d{2,3}-\d{1,2}-\d{3}-\d{4}$ 
```

这匹配 +nn[n]-n[n]-nnn-nnnn 或 0nn[n]-n[n]-nnn-nnnn

那是给哪个国家的？

除了 00 拨号前缀外，您可能还希望包括美国/加拿大使用的 011 拨号前缀。

# iphone - iPhone 在设置和更改尺寸时，我应该怎么做才能保持角度？

> ID：10211064
> 
> 赞同：0
> 
> 时间：2012-04-18T14:03:54.893
> 
> 标签：iphone, ios, rotation, scale

我正在使用两个 UISlider 调整视图的缩放和旋转。

当我改变视图的旋转然后改变它的比例时，旋转返回到 0 并且比例也被初始化。

在设置和更改比例时，我应该怎么做才能保持旋转不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:25:29.610

您应该像这样连接转换：`CGAffineTransformConcat(CGAffineTransformMakeScale(scaleX, scaleY), CGAffineTransformMakeRotation(angle));`

# ruby-on-rails - 为什么“新”方法会保存我的关系而不仅仅是初始化它

> ID：10211066
> 
> 赞同：1
> 
> 时间：2012-04-18T14:04:02.213
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有一个与配置文件模型有 has_one 关系的顾问模型，在我的控制器中我有一个配置文件页面，其中包含以下代码：

```
@advisor = Advisor.includes(:profile).find(current_advisor_user.id)
@advisor.profile ||= AdvisorProfile.new 
```

当我加载该配置文件页面时 - 它在数据库中为配置文件创建一条记录，但是我只想初始化它，因此它在我的表单中不是 nil。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:09:51.913

我想你想要`@advisor.build_profile`

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one)

> **association=(associate)** — 分配关联对象，提取主键，将其设置为外键，并**保存关联对象**。
> 
> **build_association(attributes = {})** — 返回已用属性实例化并通过外键链接到该对象**但尚未保存**的关联类型的新对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:09:37.990

尝试这个，

```
@advisor.build_profile 
```

它将返回“已用属性实例化并通过外键链接到该对象但尚未保存的关联类型的新对象”。看到[这个](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)。

# android - 从另一个活动加载 Android 延迟列表

> ID：10211070
> 
> 赞同：1
> 
> 时间：2012-04-18T14:04:15.597
> 
> 标签：android, listview

我有一个函数 findLocalEvents()，它返回我想在 ListView 中显示的项目列表。然后，在填充列表视图的活动的 onCreate() 中，我有以下代码：

```
 View header = (View) getLayoutInflater().inflate(
            R.layout.list_header_view, null);
    getListView().addHeaderView(header);

    TextView title = (TextView) findViewById(R.id.list_view_name);
    title.setText("Events nearby: ");

    setListAdapter(new ArrayAdapter<String>(this, R.layout.event_list_item,
            findLocalEvents()));

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

    // LIST ITEM IS CLICKED
    lv.setOnItemClickListener(...) 
```

我想要做的是显示一些东西（例如“正在加载”）来告诉用户正在填充列表，然后在 findLocalEvents() 函数最终完成运行时显示所有项目。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:23:07.053

您需要这里的线程来显示加载消息。以下代码将让您了解如何

```
ProgressDialog dialog = ProgressDialog.show(this, "Validating Postcode/Zipcode", 
                                    "Please wait...!", true);
startThread();

private void startThread() {
        new Thread(new Runnable() {

            public void run() {
                try {
                    ArrayList<t> arr = NetworkCalls.fetchCategoriesByZipCode();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                runOnUiThread(categoriesReturned);
            }                   
        }).start(); 
    } 
```

然后在可运行时加载 ListView

```
private Runnable categoriesReturned = new Runnable() {

        public void run() {
               //load listview
            }
}; 
```

# c# - 如何在 C# 中实现泛型多态性？

> ID：10211072
> 
> 赞同：5
> 
> 时间：2012-04-18T14:04:22.790
> 
> 标签：c#, generics, inheritance, casting, covariance

为了避免混淆，我总结了一些代码：

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main()
        {
            IManager<ISpecificEntity> specificManager = new SpecificEntityManager();
            IManager<IIdentifier> manager = (IManager<IIdentifier>) specificManager;
            manager.DoStuffWith(new SpecificEntity());
        }
    }

    internal interface IIdentifier
    {
    }

    internal interface ISpecificEntity : IIdentifier
    {
    }

    internal class SpecificEntity : ISpecificEntity
    {
    }

    internal interface IManager<TIdentifier> where TIdentifier : IIdentifier
    {
        void DoStuffWith(TIdentifier entity);
    }

    internal class SpecificEntityManager : IManager<ISpecificEntity>
    {
        public void DoStuffWith(ISpecificEntity specificEntity)
        {
        }
    }
} 
```

当我调试代码时，我在`Main()`.

我知道`ISpecificEntity`实现`IIdentifier`. 但显然从 an 直接`IManager<ISpecificEntity>`转换为 an`IManager<IIdentifier>`是行不通的。

我认为使用协方差可以解决问题，但更改`IManager<TIdentifier>`为`IManager<in TIdentifier>`也无济于事。

那么，有没有办法强制`specificManager`转换成`IManager<IIdentifier>`?

谢谢，一切顺利。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T14:11:06.360

有了`IManager<IIdentifier>`你可以做这样的事情：

```
IIdentifier entity = new NotSpecificEntity();
manager.DoStuffWith(entity); 
```

这将在您的 , 中导致异常，`SpecificEntityManager`因为它只接受类型的参数`ISpecificEntity`

[更新：您可以在Eric Lippert 的博客](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/)中阅读有关 C# 中协变和逆变的更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:32:47.863

为什么不：

```
ISpecificEntity bankAccountManager = new SpecificEntity();
IManager<IIdentifier> manager = (IManager<IIdentifier>)bankAccountManager;
manager.DoStuffWith(new SpecificEntity()); 
```

?

# c# - Windows RPC 调优

> ID：10211074
> 
> 赞同：2
> 
> 时间：2012-04-18T14:04:26.963
> 
> 标签：c#, windows, wmi, rpc

我正在使用 WMI 来监控数百台主机。我大约每 5 秒轮询一次 CPU 使用率。我正在使用 C# 的线程池来运行当前计划的适当 WMI 查询。通常，运行查询的线程不超过 30 个左右。有时会有 16 秒的间隔，而不是 5 秒，没有可见的 CPU 使用率。由于 CPU 未得到充分利用，我怀疑瓶颈在 RPC 或 TCP/IP 堆栈中。但是我认为它不是 TCP/IP 堆栈，因为连接是永久保持打开的。所以我怀疑瓶颈在监控机器上的 RPC 中。

**我可以在监控机器上进行任何 RPC 调整吗？**

*更新 1：*

在发布之前，我已经进行了一些 .NET 调整。我已经调整了`ThreadPool`和`ThreadPool.SetMinThreads(200, 200)`调用`ThreadPool.SetMaxThreads(300,300)`。我正在使用这些`Task`对象，所有这些都是用`TaskCreationOptions.LongRunning | TaskCreationOptions.PreferFairness`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:11:52.633

> 我正在使用 C# 的线程池

如果您正在运行执行大量阻塞和很少执行的代码，这不是一个好主意。就像 WMI 查询一样。线程池调度程序尝试将执行线程的数量限制为机器上的核心数量。这是一种优化，它减少了线程上下文切换的开销。但它无法预测或检测到线程实际上并未执行代码。它有一个自适应调度算法来处理它，当现有线程没有完成时允许额外的线程执行，但运行缓慢。

您可以调用 ThreadPool.SetMinThread() 来增加允许并发执行的线程数。默认值为核心数。将其增加到 30 可以解决您的问题，但会产生全局副作用。使用 Thread 代替线程池是一种本地解决方案。

# javascript - 如何将存储的 javascript 从 node.js 保存到 mongodb

> ID：10211076
> 
> 赞同：7
> 
> 时间：2012-04-18T14:04:43.427
> 
> 标签：javascript, node.js, mongodb

下面的一段代码：

```
var mongo = require('mongodb');

var db = new mongo.Db('test', new mongo.Server('127.0.0.1', 27017, {}));

var callback = function (e, result) {
if (e) {
    console.log(e);
    process.exit(1);
}

console.log(result);
process.exit(0);
}

db.open(function (e) {
if (e)  callback(e);

db.collection('system.js', function (e, coll) {
    if (e)  callback(e);

    coll.save({
        "_id" : "myFunction",
        "value" : "function myFunction() { return 123; }"
    }, function (e) {
        if (e)  callback(e);

        db.eval("myFunction()", [], function (e, result) {
            if (e)  callback(e);

            callback(undefined, result);
        });

    });
});

}); 
```

输出：

```
[Error: eval failed: invoke failed: JS Error: TypeError: myFunction is not a function nofile_a:0] 
```

我发现问题与包装函数定义的引号（“”）有关。

在 mongo-cli 上：

```
> db.system.js.find()
{ "_id" : "myFunction", "value" : "function myFunction() { return 123; }" } 
```

但是之后：

```
> db.system.js.save({_id : "myFunction", value : function myFunction() { return 123; }}); 
```

和

```
> db.system.js.find()
{ "_id" : "myFunction", "value" : function cf__5__f_myFunction() {  
return 123;  
} } 
```

db.eval("myFunction()")，有效！

所以，我的问题是：如何使用 node-mongodb-native 驱动程序从 node.js 保存存储过程？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T14:22:16.927

在阅读了有关驱动程序数据类型的[文档](http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html#mongo-db-data-types)后，我意识到我需要传递一个 mongo.Code 对象，而不是使用代码传递字符串：

```
{
  "_id" : "myFunction",
  "value" : new mongo.Code("function myFunction() { return 123; }")
} 
```

# objective-c - 如何在目标c中设置代理配置

> ID：10211077
> 
> 赞同：1
> 
> 时间：2012-04-18T14:04:45.130
> 
> 标签：objective-c, macos, proxy, network-programming

我是目标c的新手。我正在开发一个包含多个网络通信的 mac 应用程序。通常我使用直接互联网连接将数据发布到我们的数据中心。我想使用本地代理连接做同样的事情。我可以使用 NSURLConnection 做到这一点吗？如果不能，请告诉我使用代理连接发送和接收数据的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:51:51.453

您可以使用 ASIHTTP 框架来做到这一点。

您可以从以下 URL 下载框架。

[http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

## 通过代理发布数据的示例代码。

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:fullURL];

    [request setProxyHost:proxyIP];

    [request setProxyPort:proxyPort];

    [request setProxyUsername:proxyUserName];

    [request setProxyPassword:.proxyPassword];

    [request appendPostData:theBodyData];

    [request startSynchronous]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:32:56.847

`NSURLConnection`将自动使用代理的系统设置。您无需执行任何操作即可启用它。

# c# - 如何使用 NetworkStream 参数对方法进行单元测试？

> ID：10211081
> 
> 赞同：-1
> 
> 时间：2012-04-18T14:05:05.173
> 
> 标签：c#, unit-testing, network-programming, networkstream

我是测试的初学者。我需要像这样使用 NetworkStream 为方法创建单元测试：

```
void Do(NetworkStream str)
{...} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:10:51.867

将输入参数更改为 Stream 类型。然后，您可以使用准备好的 MemoryStream 调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:12:52.567

不幸的是，NetworkStream 是不可模拟的。您必须创建一个自定义的“MockNetworkStream”来测试您将从流中遇到的所有内容。

有关更多信息，请查看：[How to moq a NetworkStream in a unit test？](https://stackoverflow.com/questions/2176975/how-to-moq-a-networkstream-in-a-unit-test)

# c++ - 没有正则表达式库的简单正则表达式？

> ID：10211085
> 
> 赞同：0
> 
> 时间：2012-04-18T14:05:09.560
> 
> 标签：c++, c

有没有办法在不使用正则表达式库的情况下知道字符串是否以“goodbye”结尾？

也许使用 strcpy、strlen、ecc。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:07:05.580

```
str.length() >= 7 && str.substr(str.length() - 7) == "goodbye" 
```

或者您可以使用[boost::ends_with](http://www.boost.org/doc/libs/1_34_0/doc/html/boost/algorithm/ends_with.html)，这可能更有效，因为它不会像那样分配新字符串`string::substr`。

我可以像这样使标准库版本更高效：

```
str.length() >= 7 && std::equal(str.end() - 7, str.end(), "goodbye"); 
```

实际上，现在我把它打出来了，我意识到它并不像我想象的那么麻烦，所以这可能应该比第一个版本更受欢迎。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:07:42.163

是的，这是可能的，它需要两个步骤：

1.  用于`strlen`获取长度并查看是否至少为 7。如果不是，则不匹配。
2.  使用长度检查字符串的最后 7 个字符并使用`strcmp`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T14:27:24.447

在 C 中：

```
bool ends_with(char const * string, char const * ending) {
    size_t const slen = strlen(string);
    size_t const elen = strlen(ending);
    return slen >= elen && memcmp(string+slen-elen, ending, elen) == 0;
} 
```

在 C++ 中：

```
bool ends_with(std::string const & string, std::string const & ending) {
    return string.length() >= ending.length() && 
           std::equal(ending.rbegin(), ending.rend(), string.rbegin());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T14:13:33.350

```
#include <string>

int main(void) {
    std::string a="hellogoodbye";
    size_t pos = a.rfind("goodbye");
    if(pos != string::npos && pos == a.length() - 7) std::cout << "true";
} 
```

# apache-karaf - Pax Exam Karaf：mavenBundle 配置选项有效，与文件捆绑：URL 无效

> ID：10211088
> 
> 赞同：0
> 
> 时间：2012-04-18T14:05:27.037
> 
> 标签：apache-karaf, pax-exam

这适用于 Pax Exam 本机容器（Pax Exam 2.3.1），但不适用于 Pax Exam Karaf 容器（0.5.2）：

```
@Configuration
public Option[] config() {
    return options(
            // karafDistributionConfiguration()
            // .frameworkUrl(
            // maven().groupId("org.apache.karaf")
            // .artifactId("apache-karaf").type("zip"))
            // .karafVersion("2.2.6").name("Apache Karaf"),
            provision(bundle("reference:file:/path/to.jar")));
} 
```

检查捆绑包是否已安装的测试：

```
@Inject
BundleContext bundleContext = null;

@Test
public void sameRepositoryProvidesFBServiceAndUserService() {
    for (Bundle b : bundleContext.getBundles()) {
        if (b.getSymbolicName().equals(myBundleName)) {
            return;
        }
    }
    fail("Bundle " + myBundleName + " not found");
} 
```

如果我取消注释`karafDistributionConfiguration`并替换`bundle(url)`为`mavenBundle(groupId, artifactId)`，则测试会在 Pax Exam Karaf 下再次通过。有可能解决吗？我需要使用`bundle`在我的工作区中针对捆绑包的开发版本运行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:47:42.137

原来是时间问题，在 0.5.3 中修复。

# ruby - Padrino 中的会话和用户身份验证

> ID：10211092
> 
> 赞同：2
> 
> 时间：2012-04-18T14:05:40.510
> 
> 标签：ruby, authentication, login, session-cookies, padrino

我对 Padrino（我来自 PHP 背景）和一般的 ruby​​ Web 框架非常陌生，并且一直试图弄清楚如何实现一个简单的用户身份验证和会话管理系统，但还没有真正找到太多关于主题。我知道 padrino 带有一个预先构建的“管理员”包，其中包括用户登录/身份验证等，但是我宁愿从头开始自己动手，而不是尝试定制他们的解决方案以满足我自己的需求。

所以我的问题是，在 Padrino 中，一旦针对数据库验证了用户/通行证组合，我将如何通过设置会话数据来实现一个简单的基于会话的身份验证系统来登录用户，检索该会话数据以检查用户是否当请求保护某些页面/资源时登录，使用会话数据获取用户的 ID/角色/等，然后在用户注销时销毁该会话。作为一名 PHP 程序员，我习惯于`$_SESSION`为此目的使用超全局，在 padrino/ruby 中是否有类似的东西？我注意到 app.rb 中有一个`enable :sessions`，是`:sessions`pardrino 等价的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T14:26:28.440

是的，

```
session[:cart] = cart_id
Cart.find(session[:cart].to_i) if session[:cart].present? 
```

出于身份验证目的，您可以使用更简单的方法避免 padrino-admin 和内置身份验证：

```
# in app.rb
use Rack::Auth::Basic, 'Restricted Area' do |username, password|
  user == 'admin' and password == 'pwd'
end 
```

如果您需要控制更多会话/cookie，您可以使用：

```
set :sessions,
  :key          => '__awesome_key',
  :secret       => 'awesome_password',
  :expire_after => 1.year 
```

# wcf - WCF 服务可以访问在同一进程中运行的其他服务主机吗？

> ID：10211094
> 
> 赞同：2
> 
> 时间：2012-04-18T14:05:50.773
> 
> 标签：wcf, service, monitoring, servicehost

我想创建一个服务，其工作是监视在同一进程中运行的其他服务，然后报告基本信息，如运行状况或服务依赖关系。我无法确定监视服务访问有关其他服务的详细信息的最佳方式，而不必让每个服务发布其元数据或公开监视服务可以与之通信的某些自定义端点。如果我加载配置并通读它，我可以获得大部分的方法，但这种方法有一些缺点：

*   获取每个端点的绝对 URI 可能很困难，尤其是在使用 IIS 托管或无文件激活时。
*   任何以编程方式完成的配置都无法被监控服务读取

我希望能够以某种方式访问​​ ServiceDescription 以获取我需要的关于每个 ServiceHost 的所有信息，而无需服务设计人员的任何工作将其提供给我。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:52:22.837

一种替代方法是使用 WCF 的内置[运行状况监视](https://stackoverflow.com/questions/7927082/wcf-health-monitoring-similar-to-asp-net)和[性能监视](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/cd82a9bb-20be-4e49-91ff-242d1930fa3b)功能。不过，这适用于个人服务级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:27:08.413

如果您检查了[Channs 链接](https://stackoverflow.com/a/10212040/9711)并确信您需要推出自己的健康监控基础架构，您可能需要从[ServiceHost](http://msdn.microsoft.com/en-us/library/aa702697.aspx)派生或全力以赴并从[ServiceHostFactoryBase](http://msdn.microsoft.com/en-us/library/system.servicemodel.activation.servicehostfactorybase.aspx)派生，或者可能根据您需要实现的内容同时执行这两种操作。他们将让您在每个服务启动时访问该`ServiceDescription`实例。

# c# - 在主页加载之前，我需要一个来自 javascript 的值，然后想在代码中使用该值

> ID：10211095
> 
> 赞同：2
> 
> 时间：2012-04-18T14:05:50.977
> 
> 标签：c#, javascript, asp.net, html

在主页加载之前，我需要一个来自 javascript 的值，然后想在代码中使用该值。我为此目的使用的代码是：

我已经制作了一个 test.aspx 页面。代码如下：-

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="test.aspx.cs" Inherits="test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title> <script type="text/javascript" language="javascript">   
function GetScreenHeightAndWidth()

 {   
        var width = screen.width;   
        var height = screen.height;
        var object = 'Label1';

document.getElementById(object ).innerHTML=height ;
//alert(height);

'<%Session["Screensize"] = "' + height +'"; %>' ;

    }   

    </script>  
</head>
<body onload="GetScreenHeightAndWidth();" >
    <form id="form1" runat="server">
    <div>
    <asp:Label ID="Label1" runat="server" Text="test"></asp:Label>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    </div>
    </form>
</body>
</html> 
```

test.aspx.cs 页面的代码如下：-

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.IO;
using System.Windows.Forms;

public partial class test : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Session["Screensize"] = Label1.Text;
        TextBox1.Text=Session["Screensize"].ToString();

    }
} 
```

结果如下：-

768测试

结果我需要的是768和768。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:11:01.457

你问的是不可能的。为什么首先需要知道服务器端的屏幕大小？无论您需要在服务器生成的 html 上提供什么，都可以通过适当的 CSS 规则或 Javascript 进行调整（如果您更喜欢该框架，则为 JQuery）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:14:08.267

如果您将宽度/高度值设置为脚本中的隐藏字段，则可以**在 postback 之后**从代码隐藏中访问它们。标签未与表格一起发布，因此您不能使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T12:48:58.567

首先感谢大家回答我的问题。经过大量搜索，我找到了我真正想要的东西。为此，我必须再使用一页并将此代码添加到我的原始代码中：

```
if (!IsPostBack)
        {
            if (Session["ScreenResolution"] == null)
            {
                Response.Redirect("detectscreen.aspx");
            }
            else
            {
                Session["Screensize"] = Session["ScreenResolution"].ToString();
            }

            TextBox1.Text = Session["Screensize"].ToString();
        } 
```

新页面的代码是：

```
 protected void Page_Load(object sender, EventArgs e)
    {
         if (Request.QueryString["action"] != null) {

            Session["ScreenResolution"] = Request.QueryString["res"].ToString();
            Response.Redirect("Catalogue.aspx");
        }
    } 
```

新页面中的脚本将如下所示：

```
 <script language="javascript" type="text/javascript">
    res = "&res="+screen.height
    top.location.href="detectscreen.aspx?action=set"+res

</script> 
```

# c# - 调用 UI 元素时线程运行缓慢

> ID：10211096
> 
> 赞同：4
> 
> 时间：2012-04-18T14:05:56.203
> 
> 标签：c#, wpf, multithreading, user-interface, dispatcher

我正在编写一个基准工具，它从线程中的本地服务器读取一堆变量。

```
 int countReads = 1000;

            Int64 count = 0;

            for (int i = 0; i < countReads; i++)
            {
                Thread.CurrentThread.Priority = ThreadPriority.Highest;
                DateTime start = DateTime.Now;

                session.Read(null, 0, TimestampsToReturn.Neither, idCollection, out ReadResults, out diagnosticInfos);

                DateTime stop = DateTime.Now;
                Thread.CurrentThread.Priority = ThreadPriority.Normal;

                TimeSpan delay = (stop - start);

                double s = delay.TotalMilliseconds;
                count += (Int64)s;

                Dispatcher.Invoke(DispatcherPriority.Render, new Action(() =>
                {
                    progressBar1.Value = i;
                }));
            }

            double avg = (double)count / countReads;

            Dispatcher.Invoke(DispatcherPriority.Input, new Action(() =>
            {
                listBox1.Items.Add(avg);
            })); 
```

我正在计算进行读取所需的时间跨度并在最后获得平均时间跨度。

```
 DateTime start = DateTime.Now;

            session.Read(null, 0, TimestampsToReturn.Neither, idCollection, out ReadResults, out diagnosticInfos);

            DateTime stop = DateTime.Now 
```

如果我在不更新进度条的情况下运行代码，则平均需要大约 5 毫秒。但如果我运行它

```
 Dispatcher.Invoke(DispatcherPriority.Render, new Action(() =>
            {
                progressBar1.Value = i;
            })); 
```

平均大约需要 10 毫秒。

我的问题是，为什么使用进度条时时间跨度更高？我只是在计算读取的时间跨度。不包括进度条更新。

有什么办法可以疏散 ui-painting 以免影响我的阅读时间跨度？

谢谢你的帮助。

最好的祝福

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T15:03:18.163

停止`Invoke`用于将进度信息传输到 UI 线程。将进度信息发布到共享数据结构或变量，并让 UI 线程在合理的时间间隔内使用计时器对其进行轮询。我知道似乎我们都被洗脑了，认为`Invoke`这是进行工作者到 UI 线程交互的万能方法，但对于简单的进度信息来说，它可能（而且通常是）最糟糕的方法。

在 UI 线程上使用计时器的轮询方法提供以下好处。

*   它打破了`Invoke`强加于 UI 和工作线程的紧密耦合。
*   UI 线程可以决定何时以及多久更新一次进度信息，而不是相反。当你停下来思考它时，无论如何它应该是这样的。
*   您可以在 UI 和工作线程上获得更多吞吐量。

我知道这并不能直接回答您关于为什么`session.Read`看起来运行速度较慢的问题。尝试将更新进度信息的策略从推模型（通过`Invoke`）更改为拉模型（通过计时器）。看看这是否有所作为。即使不是这样，由于上述原因，我仍然会坚持使用拉动模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:18:41.393

这是 MSDN 关于[Dispatcher.Invoke的说明](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)

> 在 Dispatcher 关联的线程上**同步**执行指定的委托。

因此，基本上，`Dispatcher.Invoke`阻塞直到调度程序线程处理了请求。

试试`Dispatcher.BeginInvoke`吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:13:24.187

如果当前正在执行的线程与您正在使用的 Dispatcher 相关联 -`Invoke()`将阻止该线程，因此在这种情况下尝试使用[Dispatcher.BeginInvoke()](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvoke.aspx)它将异步完成工作。

[MSDN，Dispatcher.Invoke 方法](http://msdn.microsoft.com/en-us/library/ms591593.aspx)：

> Invoke 是同步操作；因此，直到回调返回后，控制才会返回给调用对象。

顺便说一句，只是有兴趣尝试一下`DispatcherPriority.Send`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-13T16:49:39.837

我迟到了 9 年，但我认为这是一个更简单的解决方案：等到进度条值达到某个阈值再更新它。在我的示例中，我每隔五分之一的最大值刷新一次工具栏。

```
private static int progressBarMaxValue = -1;
private static int progressBarChunkSize = -1;

        public static void progressBarSetNotRealTimeValue(ProgressBar progressBar, int argNewValue)
        {
            if (progressBarMaxValue != -1)
            {
                if (argNewValue < progressBarChunkSize)
                {
                    //Threshold not reached yet, discard the new value.
                    return;
                }
                else
                {
                    //Allow the update, and set the next threshold higher.
                    progressBarChunkSize += progressBarChunkSize;
                }
            }

            if (Thread.CurrentThread.IsBackground)
            {
                progressBar.BeginInvoke(new Action(() =>
                {
                    if (progressBarMaxValue == -1)
                    {
                        progressBarMaxValue = progressBar.Maximum;
                        progressBarChunkSize = progressBar.Maximum / 5;
                    }

                    progressBar.Value = argNewValue;
                }));
            }
            else
            {
                progressBar.Value = argNewValue;
            }
        } 
```

# eclipse - 重新排列 Eclipse 中的工具栏项。“新安卓项目”

> ID：10211097
> 
> 赞同：0
> 
> 时间：2012-04-18T14:06:01.367
> 
> 标签：eclipse

一般日食问题。

在工具栏中>文件>新建>我有Java项目/项目/一堆其他/其他带有android子菜单的。

如何将“新 Android 项目”移动到“文件”>“新建”>“此处”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:36:12.460

你不能。该菜单（和工具栏）的内容取决于当前处于活动状态的透视帽。如果您更改为另一个透视图，您会看到它发生了变化。菜单中的项目（及其分组）由插件提供；Android ADT 以您所见的方式贡献了它的菜单项；你不能改变它。

如果您在 Java 透视图中工作，您可以右键单击一个 Android 项目或项目中的一个文件夹，然后新建菜单在顶层有一些 Android 特定的项目。

# java - 从 Java 运行 weblogic wsdlc 任务时出错

> ID：10211110
> 
> 赞同：0
> 
> 时间：2012-04-18T14:06:39.490
> 
> 标签：java, ant, weblogic-10.x, wsdlc

在参考[了这篇文章](https://stackoverflow.com/questions/6733684/run-ant-from-java)和[这篇文章](http://www.ibm.com/developerworks/websphere/library/techarticles/0502_gawor/0502_gawor.html#sec2b)之后，我试图从一个 java 类中运行 ant 脚本，如下所示：

```
 File buildFile = new File("D:\\Utility\\artifacts\\build.xml");
    Project p = new Project();
    p.setUserProperty("ant.file", buildFile.getAbsolutePath());
    DefaultLogger consoleLogger = new DefaultLogger();
    consoleLogger.setErrorPrintStream(System.err);
    consoleLogger.setOutputPrintStream(System.out);
    consoleLogger.setMessageOutputLevel(Project.MSG_INFO);
    p.addBuildListener(consoleLogger);
    try
    {
        p.fireBuildStarted();
        p.init();
        ProjectHelper helper = ProjectHelper.getProjectHelper();
        p.addReference("ant.projectHelper", helper);
        helper.parse(p, buildFile);
        p.executeTarget(p.getDefaultTarget());
        p.fireBuildFinished(null);
    }
    catch (BuildException e)
    {
        p.fireBuildFinished(e);
    } 
```

以下是 build.xml 文件：

```
<project name="buildWebservice" default="generate-from-wsdlc">

       <taskdef name="wsdlc" classname="weblogic.wsee.tools.anttasks.WsdlcTask"
            classpath="D:\bea\wlserver_10.3\server\lib\weblogic.jar" />

       <target name="generate-from-wsdlc">
            <wsdlc srcWsdl="D:\Utility\WSDLs\someWSDL.wsdl"
                type="JAXWS" destJwsDir="temp\JWS_InterfaceDir" destImplDir="temp\JWS_ImplDir">
            </wsdlc>
       </target>
</project> 
```

但是当我执行这个java代码时，我在控制台中得到以下异常：

```
BUILD FAILED
D:\Utility\artifacts\build.xml:21: java.lang.NoSuchMethodError: com.sun.xml.ws.util.JAXWSUtils.getEncodedURL(Ljava/lang/String;)Ljava/net/URL; 
```

我什至反编译了 jaxws-rt.jar 以在 JAXWSUtils 类中查找 getEncodedURL 方法，但没有找到任何此类方法。

请帮忙！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T23:32:11.820

尝试有关此论坛条目的不同实现： [https ://forums.oracle.com/forums/thread.jspa?threadID=1125462](https://forums.oracle.com/forums/thread.jspa?threadID=1125462)

# c# - PHP DOTNET 地狱

> ID：10211114
> 
> 赞同：8
> 
> 时间：2012-04-18T14:06:56.407
> 
> 标签：c#, php, .net

我是 PHP 的新手，今天我发现了[DOTNET](http://php.net/manual/en/class.dotnet.php)类。
所以我研究了手册，上网找了一些例子，最后写了我的测试应用程序：

1.  使用 Framework 4.0 Client Profile 创建了一个新的 DLL
2.  使用强名称密钥签署程序集
3.  将程序集标记为 COM-Visible

这是我写的测试代码

```
using System;

namespace CSharpCOM
{
    public class CSharpCOMClass
    {
        public string Base64(string s)
        {
            return Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(s));
        }
    }
} 
```

我编译了程序集，然后在 GAC ( `gacutil /if fullpath\CSharpCOM.dll`) 中注册。
如果我使用`gacutil /l CSharpCOM`我看到

> La cache di assembly globale contiene gli assembly seguenti：
> csharpcom，Version=1.0.0.0，Culture=neutral，PublicKeyToken=beb607ae770f5750，processorArchitecture=MSIL
> 
> 元素数 = 1

所以一切似乎都很好。
然后写了这个基本的php：

```
<?php
try{
    $csclass = new DOTNET("CSharpCOM, Version=1.0.0.0, Culture=neutral, " .
                          "PublicKeyToken=beb607ae770f5750",
                          "CSharpCOM.CSharpCOMClass");
    echo $csclass->Base64("Test string"),"\n";
} catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
}
?> 
```

无论我尝试什么，加载托管在 Apache ( `http://localhost/test01/dotnet.php`) 中的页面我总是得到

> 捕获的异常：无法实例化 .Net 对象 [CreateInstance] [0x80070002] 不可能的 trovare il 文件规范。
> 翻译可能是：找不到指定的文件

[还有一件事：使用一些例子（这里](http://geekswithblogs.net/tkokke/archive/2009/04/24/how-to-use-.net-assemblies-in-php.aspx)是一个非常基本的例子）我读到我的程序集（注册时）应该在 上找到`%windir%\assembly`，但我只能在`%windi%\Microsoft.NET\assembly\GAC_MSIL\CSharpCOM\v4.0_1.0.0.0__beb607ae770f5750`: 这是正确的吗？为什么我的第一个目录没有它？

更多：如果我创建另一个框架项目并尝试添加 .NET 引用，我找不到我的程序集：这与我无法从 PHP 加载此程序集有关吗？

最后一点：我在 Windows XP Professional SP3 32bit 和 Windows Seven Enterprise 64bit 上试过

**更新：**
这有效：

```
$form = new DOTNET('System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089', 'System.Windows.Forms.Form'); 
```

但是这个没有：

```
$form = new DOTNET('System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089', 'System.Windows.Forms.Form');` 
```

PHP 是否有可能只加载框架 2.0 程序集？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T14:50:45.177

根据这个[错误报告](https://bugs.php.net/bug.php?id=55847)，DOTNET 类没有加载 .NET 4.0 DLL。如果您没有使用 .NET 4.0 中的任何新库，您可以通过打开项目属性并在“应用程序”选项卡上将“目标框架”更改为“.NET Framework 3.5 客户端”来定位到 .NET 3.5 或更低版本轮廓”

现在，当您将 DLL 安装到 GAC 中时，它将安装到 CLR 2.0 GAC 中，并且应该能够使用 PHP 中的 DOTNET 类进行加载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-10T16:50:55.063

有一个名为 NetPhp ( [https://github.com/david-garcia-garcia/netphp](https://github.com/david-garcia-garcia/netphp) ) 的库可以让你：

*   使用任何 .Net 二进制文件（即使没有 COM 可见性）和任何版本的 .Net 框架，包括 CLR4
*   转储 PHP 类模型
*   直接从 PHP PHP 类模型生成迭代 .Net 集合，以使用 PHP 类，就像在 .Net 中一样 将 .Net 错误自动传播到可以正确处理的原生 PHP 异常中
*   访问本机枚举和静态方法
*   使用带参数的类构造函数
*   同时调试 .Net 和 PHP 代码，就好像它是一个应用程序一样。

这里有一个带有代码示例的项目：

[https://github.com/david-garcia-garcia/netphp-sample](https://github.com/david-garcia-garcia/netphp-sample)

这是一段带有 NetPhp 的代码的样子：

```
$datetime = $runtime->TypeFromName("System.DateTime");
$datetime->Instantiate();

echo $datetime->ToShortDateString()->Val(); // Outputs 01/01/0001

// We can only use Int32 from native PHP, so parse
// an Int64 that is equivalent to (long) in the DateTime constructor.
$ticks = $runtime->TypeFromName("System.Int64")->Parse('98566569856565656');
$ticks = \ms\System\netInt64::_Parse('98566569856565656');

$datetime->Instantiate($ticks);
echo $datetime->ToShortDateString()->Val(); // Outputs 07/05/0313

$now = $runtime->TypeFromName("System.DateTime")->Now;
echo $now->ToShortDateString()->Val(); // Outputs "23/10/2015"

$now = $runtime->TypeFromName("System.DateTime")->Now();
echo $now->ToShortDateString()->Val(); // Outputs "23/10/2015"

$timer = $runtime->TypeFromName("System.Timers.Timer")->Instantiate();
$timer->AutoReset(TRUE);
$timer->AutoReset = TRUE; 
```

# actionscript-3 - 替换AS3中最后一次出现的字符串的最有效方法是什么

> ID：10211130
> 
> 赞同：2
> 
> 时间：2012-04-18T14:07:42.723
> 
> 标签：actionscript-3

String.replace 替换字符串中第一次出现的字符串，但我想替换字符串中最后一次出现的字符串。有没有简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:17:26.540

您可以使用[lastIndexOf](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#lastIndexOf%28%29)函数来确定要替换的字符串在哪里，然后在出现之前和之后添加子字符串以获得您想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:29:11.983

建议的功能有错误...这是更正后的功能：

```
public static function replaceLastOccurrence(str:String, find:String, replace:String):String {
    var pre:String = str.substr(0, str.lastIndexOf(find));
    var post:String = str.substr(str.lastIndexOf(find)+find.length, str.length); 

    return pre + replace + post;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T10:31:07.833

我会先检查是否有发生：

```
public static function replaceLastOccurrence(str:String, find:String, replace:String):String  
{
    if (str.lastIndexOf(find) != -1)
    {
        var pre:String = str.substr(0, str.lastIndexOf(find));
        var post:String = str.substr(str.lastIndexOf(find) + find.length, str.length); 
        return pre + replace + post;
    }
    else
    {
        return str;
    }
} 
```

否则，如果没有出现，它将弄乱字符串的结尾。

# algorithm - 如何使用边界矩形纠正 OCR 分割错误？

> ID：10211131
> 
> 赞同：5
> 
> 时间：2012-04-18T14:07:44.193
> 
> 标签：algorithm, ocr, tesseract, error-correction

我正在使用 tesseract 进行 OCR 并注意到，有时会发生分段错误，并且“显然”属于一起的字符被拆分为单独的字符串。

基于在一个文本行中找到的字符列表及其边界框以及初步 OCR 结果提示，这些字符中的哪些属于一个单词，我可以应用哪些算法来纠正分割错误或验证结果？

所以这是可用的数据：

```
List<Word> words;
for(Word word : words){
    for(Char c : word.getChars()){
        char ch = c.getValue();
        Rectangle rect = c.getRect();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T15:41:35.630

对于考虑字符和单词但**不考虑边界框的****OCR 后校正**，一种常见的做法是

 ***   使用**有效词的字典**，尽可能全面
*   对照该词典检查 OCR 算法产生的单词
*   如果在字典中找不到一个单词作为完全匹配的单词，尝试找到一个*相似*的单词

为了使这成为可能，您需要准备字典实现，以便能够搜索相似的字符串，也称为***近似字符串匹配***或*模糊字符串匹配*。

我知道的两种主要方法是

*   **Levenshtein atomata**，如[Schulz 等人](http://scholar.google.com/scholar?cluster=9946036749686151606&hl=en&as_sdt=0,5)所述(DOI: 10.1007/s10032-002-0082-8)
*   **度量树，例如**[Baeza-Yates 和 Navarro](http://scholar.google.com/scholar?cluster=18181033095376770885&hl=en&as_sdt=0,5)描述的 BK 树(DOI: 10.1109/SPIRE.1998.712978)

这些方法以及一般的近似字符串匹配方法（例如搜索尝试、q-gram 匹配和 n-gram 匹配）都固有地使用某种编辑距离度量，或多或少类似于[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)。在**分析了您正在处理的特定 OCR 错误**之后，您可能需要**调整编辑距离算法**和您正在使用的其他资源以满足您的特定需求。这可能涉及以下内容：

*   假设您的 OCR 程序经常混淆的字符之间的替换距离较小，或者在使用您正在处理的字体或样式呈现时看起来特别相似的字符
*   通过将频繁出现的单词对放入字典中（除了单个单词）来考虑可能的切分错误
*   确保您的字典包含尽可能多的命名实体和其他特定于域（或特定于语料库）的元素

此外，您可以尝试使用**语法**和/或**统计语言模型**，例如隐马尔可夫模型或条件随机场模型——类似于 POS 标注器使用的模型——*在上下文*中进行单词更正。**

# ios - ios UITextView 显示不正确（错误？）

> ID：10211133
> 
> 赞同：0
> 
> 时间：2012-04-18T14:07:55.197
> 
> 标签：ios, uiscrollview, uitextview

我在启用了分页`UITextView`的情况下水平放置了 10 秒。`UIScrollView`

当我的视图被初始化并被查看时，初始页面的`UITextView`文本不会出现。背景颜色显示正常，但文本在屏幕上不可见。

现象如下：

只要您拖动`UIScrollView`偶数**1px**，文本就会*神奇地*显示它自己。这是怎么回事？我怎样才能解决这个问题？

** 编辑 - kai 的代码 **

```
[self.messageBodyTxt setFont:[UIFont fontWithName:@"MuseoSlab-300" size:16.67]];
[self.messageBodyTxt setText:[[data objectForKey:@"Description"] valueForKey:@"text"]; 
```

注意 - 我已经尝试过使用系统字体。此外，此代码适用于不同的视图，所以我不确定是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T21:11:58.423

```
CGRect f = self.myTextView.frame;
f.size.height += 1;
[self.myTextView setFrame:f]; 
```

因为我`UITextView`已经在一个`XIB`文件中，所以我只需将现有高度修改 1px 和 viola。正如@larsacus 指出的那样，仅当模块的宽度超过*512px 时才*需要这样做。

# java - Java 方法名称的有效字符是什么？

> ID：10211135
> 
> 赞同：11
> 
> 时间：2012-04-18T14:08:01.220
> 
> 标签：java, methods, naming, rules

我阅读了有关[Java 变量命名的信息](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)。它说 Java 变量不能以任何数字和特殊字符开头，除了 $ 和 _。

一些有效的例子：

```
int count;
int _count;
int $count; 
```

还有一些无效的例子：

```
int %count;
int 4count;
int #count; 
```

相同的规则是否适用于方法名称？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T14:10:35.913

是的，方法名和变量名就是所谓的“标识符”。标识符都共享有关接受字符的相同规则。查看Java 语言规范中的第[3.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)节，以准确了解标识符可能包含的内容，并查看[第 6.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.2)，了解有关如何使用标识符的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-30T20:52:32.250

当方法中有不寻常的字符时，您可能会感到惊讶，例如：

```
public void mój_brzuch_zacznie_burczeć() 
```

它工作得很好。查看[此博客](https://thomassundberg.wordpress.com/2015/01/30/bdd-with-cucumber-jvm-at-geecon-tdd-2015/)以查看更多精美示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:12:29.357

来自 Java 教程：

“虽然方法名称可以是任何合法标识符，但代码约定限制了方法名称。” [http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

# javascript - 在 JavaScript 中获取当前日期和时间

> ID：10211145
> 
> 赞同：577
> 
> 时间：2012-04-18T14:08:44.027
> 
> 标签：javascript, date, time, concatenation

我有一个在 JavaScript 中打印当前日期和时间的脚本，但`DATE`总是错误的。这是代码：

```
var currentdate = new Date();
var datetime = "Last Sync: " + currentdate.getDay() + "/" + currentdate.getMonth() 
+ "/" + currentdate.getFullYear() + " @ " 
+ currentdate.getHours() + ":" 
+ currentdate.getMinutes() + ":" + currentdate.getSeconds(); 
```

它应该打印`18/04/2012 15:07:33`并打印`3/3/2012 15:07:33`

* * *

## 回答 #1

> 赞同：703
> 
> 时间：2012-04-18T14:11:58.877

`.getMonth()`返回一个从零开始的数字，因此要获得正确的月份，您需要加 1，因此调用`.getMonth()`may 将返回`4`而不是`5`。

因此，在您的代码中，我们可以使用它`currentdate.getMonth()+1`来输出正确的值。此外：

*   `.getDate()`返回月份中的哪一天**<- 这是你想要的那一天**
*   `.getDay()`是`Date`对象的一个​​单独方法，它将返回一个表示当前星期几的整数 (0-6)`0 == Sunday`等

所以你的代码应该是这样的：

```
var currentdate = new Date(); 
var datetime = "Last Sync: " + currentdate.getDate() + "/"
                + (currentdate.getMonth()+1)  + "/" 
                + currentdate.getFullYear() + " @ "  
                + currentdate.getHours() + ":"  
                + currentdate.getMinutes() + ":" 
                + currentdate.getSeconds(); 
```

* * *

> JavaScript Date 实例继承自 Date.prototype。您可以修改构造函数的原型对象以影响 JavaScript Date 实例继承的属性和方法

您可以使用`Date`原型对象创建一个新方法，该方法将返回今天的日期和时间。这些新方法或属性将被`Date`对象的所有实例继承，因此如果您需要重用此功能，它特别有用。

```
// For todays date;
Date.prototype.today = function () { 
    return ((this.getDate() < 10)?"0":"") + this.getDate() +"/"+(((this.getMonth()+1) < 10)?"0":"") + (this.getMonth()+1) +"/"+ this.getFullYear();
}

// For the time now
Date.prototype.timeNow = function () {
     return ((this.getHours() < 10)?"0":"") + this.getHours() +":"+ ((this.getMinutes() < 10)?"0":"") + this.getMinutes() +":"+ ((this.getSeconds() < 10)?"0":"") + this.getSeconds();
} 
```

然后，您可以通过执行以下操作简单地检索日期和时间：

```
var newDate = new Date();
var datetime = "LastSync: " + newDate.today() + " @ " + newDate.timeNow(); 
```

或者调用内联方法，这样它就可以简单地 -

```
var datetime = "LastSync: " + new Date().today() + " @ " + new Date().timeNow(); 
```

* * *

## 回答 #2

> 赞同：407
> 
> 时间：2015-05-14T19:39:47.130

要获取时间和日期，您应该使用

```
 new Date().toLocaleString();

>> "09/08/2014, 2:35:56 AM" 
```

仅获取您应该使用的日期

```
 new Date().toLocaleDateString();

>> "09/08/2014" 
```

只得到你应该使用的时间

```
 new Date().toLocaleTimeString();

>> "2:35:56 AM" 
```

或者，如果您只想要`hh:mm`美国英语没有 AM/PM格式的时间

```
 new Date().toLocaleTimeString('en-US', { hour12: false, 
                                             hour: "numeric", 
                                             minute: "numeric"});
>> "02:35" 
```

或英式英语

```
 new Date().toLocaleTimeString('en-GB', { hour: "numeric", 
                                             minute: "numeric"});

>> "02:35" 
```

[在这里](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleString)阅读更多。

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2013-10-04T07:54:41.497

对于真正的 mysql 样式输出，请使用以下函数： `2019/02/28 15:33:12`

*   如果您单击下面的“运行代码片段”按钮
*   它将向您展示一个简单的实时数字时钟示例
*   该演示将出现在代码片段下方。

```
function getDateTime() {
        var now     = new Date(); 
        var year    = now.getFullYear();
        var month   = now.getMonth()+1; 
        var day     = now.getDate();
        var hour    = now.getHours();
        var minute  = now.getMinutes();
        var second  = now.getSeconds(); 
        if(month.toString().length == 1) {
             month = '0'+month;
        }
        if(day.toString().length == 1) {
             day = '0'+day;
        }   
        if(hour.toString().length == 1) {
             hour = '0'+hour;
        }
        if(minute.toString().length == 1) {
             minute = '0'+minute;
        }
        if(second.toString().length == 1) {
             second = '0'+second;
        }   
        var dateTime = year+'/'+month+'/'+day+' '+hour+':'+minute+':'+second;   
         return dateTime;
    }

    // example usage: realtime clock
    setInterval(function(){
        currentTime = getDateTime();
        document.getElementById("digital-clock").innerHTML = currentTime;
    }, 1000);
```

```
<div id="digital-clock"></div>
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2015-01-31T19:55:14.347

只需使用：

```
var d = new Date();
document.write(d.toLocaleString());
document.write("<br>"); 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2020-08-03T13:00:32.037

# 最短的

我开发了[史蒂夫的答案](https://stackoverflow.com/a/28255885/860099)以得到 OP 所需要的

```
new Date().toLocaleString().replace(',','') 
```

```
console.log(new Date().toLocaleString().replace(',',''));
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2012-04-18T14:11:52.300

```
var currentdate = new Date();

    var datetime = "Last Sync: " + currentdate.getDate() + "/"+(currentdate.getMonth()+1) 
    + "/" + currentdate.getFullYear() + " @ " 
    + currentdate.getHours() + ":" 
    + currentdate.getMinutes() + ":" + currentdate.getSeconds(); 
```

`.getDay()`将方法更改为`.GetDate()`并在月份中添加一，因为它从 0 开始计算月份。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-04-18T14:13:03.253

这应该可以解决问题：

```
function dateToString(date) {
    var month = date.getMonth() + 1;
    var day = date.getDate();
    var dateOfString = (("" + day).length < 2 ? "0" : "") + day + "/";
    dateOfString += (("" + month).length < 2 ? "0" : "") + month + "/";
    dateOfString += date.getFullYear();
    return dateOfString;
}

var currentdate = new Date();
var datetime = "Last Sync: ";
datetime += dateToString(currentdate );
datetime += + currentdate.getHours() + ":"
            + currentdate.getMinutes() + ":"
            + currentdate.getSeconds(); 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-05-20T15:14:57.463

基本 JS（好学）：我们使用 Date() 函数并完成我们需要以自定义格式显示日期和日期的所有操作。

```
var myDate = new Date();

let daysList = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
let monthsList = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Aug', 'Oct', 'Nov', 'Dec'];

let date = myDate.getDate();
let month = monthsList[myDate.getMonth()];
let year = myDate.getFullYear();
let day = daysList[myDate.getDay()];

let today = `${date} ${month} ${year}, ${day}`;

let amOrPm;
let twelveHours = function (){
    if(myDate.getHours() > 12)
    {
        amOrPm = 'PM';
        let twentyFourHourTime = myDate.getHours();
        let conversion = twentyFourHourTime - 12;
        return `${conversion}`

    }else {
        amOrPm = 'AM';
        return `${myDate.getHours()}`}
};
let hours = twelveHours();
let minutes = myDate.getMinutes();

let currentTime = `${hours}:${minutes} ${amOrPm}`;

console.log(today + ' ' + currentTime);
```

* * *

*Node JS（快速简单）：使用（ npm install date-and-time* ）安装 npm pagckage ，然后运行以下命令。

```
let nodeDate = require('date-and-time');
let now = nodeDate.format(new Date(), 'DD-MMMM-YYYY, hh:mm:ss a');
console.log(now); 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-04-21T07:02:02.077

我找到了从这里获取 JavaScript 中当前日期和时间的最简单方法 - [How to get current Date and Time using JavaScript](http://www.codexworld.com/how-to-guides/get-current-date-time-using-javascript/)

```
var today = new Date();
var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
var CurrentDateTime = date+' '+time; 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-04-18T14:12:37.613

`getDay()`获取星期几。 `3`是星期三。你想要`getDate()`，那会回来`18`的。

也是`getMonth()`从 开始`0`，需要加到`1`（`4`四月）。

演示：http: [//jsfiddle.net/4zVxp/](http://jsfiddle.net/4zVxp/)

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2012-04-18T14:15:00.147

您需要使用 getDate() 来获取日期部分。getDay() 函数返回天数（Sunday = 0, Monday = 1...），getMonth() 返回基于 0 的索引，因此您需要将其递增 1。

```
 var currentdate = new Date(); 

 var datetime = "Last Sync: " + currentdate.getDate() + "/"+  (parseInt(currentdate.getMonth())    + 1)
   + "/" + currentdate.getFullYear() + " @ "  
   + currentdate.getHours() + ":"  
   + currentdate.getMinutes() + ":" + currentdate.getSeconds(); 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2021-09-21T03:35:29.700

```
const date = new Date()
console.log(date.toLocaleTimeString("en-us", {timeStyle: "medium"})) // Only Time 
console.log(date.toLocaleString()) // For both Date and Time 
```

[对于文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-07-25T11:17:40.633

获取当前日期和时间

```
var now = new Date(); 
  var datetime = now.getFullYear()+'/'+(now.getMonth()+1)+'/'+now.getDate(); 
  datetime += ' '+now.getHours()+':'+now.getMinutes()+':'+now.getSeconds(); 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-12-19T02:20:43.140

这个问题很老了，答案也很老。我们现在可以使用 moment.js 来获取当前日期，而不是那些可怕的函数，这实际上非常容易。所要做的就是在我们的项目中包含[***moment.js***](http://momentjs.com/)并获得格式正确的日期，例如，通过：

```
moment().format("dddd, MMMM Do YYYY, h:mm:ss a"); 
```

我认为这使得在 javascript 中处理日期变得更加容易。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-04-18T14:14:51.150

.getDay 返回星期几。你需要 .getDate 代替。.getMonth 返回从 0 到 11 的值。您需要在结果中加 1 以获得“人类”月份数。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-03-22T09:44:20.847

```
function getTimeStamp() {
       var now = new Date();
       return ((now.getMonth() + 1) + '/' + (now.getDate()) + '/' + now.getFullYear() + " " + now.getHours() + ':'
                     + ((now.getMinutes() < 10) ? ("0" + now.getMinutes()) : (now.getMinutes())) + ':' + ((now.getSeconds() < 10) ? ("0" + now
                     .getSeconds()) : (now.getSeconds())));
} 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-12-15T18:06:24.203

*这个小代码很简单，可以在任何地方使用。*

```
<p id="dnt"></p>
<script>
document.getElementById("dnt").innerHTML = Date();
</script> 
```

*有设计空间*

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-04-28T15:01:02.403

```
function UniqueDateTime(format='',language='en-US'){
    //returns a meaningful unique number based on current time, and milliseconds, making it virtually unique
    //e.g : 20170428-115833-547
    //allows personal formatting like more usual :YYYYMMDDHHmmSS, or YYYYMMDD_HH:mm:SS
    var dt = new Date();
    var modele="YYYYMMDD-HHmmSS-mss";
    if (format!==''){
      modele=format;
    }
    modele=modele.replace("YYYY",dt.getFullYear());
    modele=modele.replace("MM",(dt.getMonth()+1).toLocaleString(language, {minimumIntegerDigits: 2, useGrouping:false}));
    modele=modele.replace("DD",dt.getDate().toLocaleString(language, {minimumIntegerDigits: 2, useGrouping:false}));
    modele=modele.replace("HH",dt.getHours().toLocaleString(language, {minimumIntegerDigits: 2, useGrouping:false}));
    modele=modele.replace("mm",dt.getMinutes().toLocaleString(language, {minimumIntegerDigits: 2, useGrouping:false}));
    modele=modele.replace("SS",dt.getSeconds().toLocaleString(language, {minimumIntegerDigits: 2, useGrouping:false}));
    modele=modele.replace("mss",dt.getMilliseconds().toLocaleString(language, {minimumIntegerDigits: 3, useGrouping:false}));
    return modele;
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-06-15T04:00:04.083

```
var datetime = new Date().toLocaleString().slice(0,9) +" "+new Date(new Date()).toString().split(' ')[4];
console.log(datetime); 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-12-05T13:51:45.260

我想我很晚才分享我的答案，但我认为这是值得的。

```
function __getCurrentDateTime(format){
    var dt=new Date(),x,date=[];
    date['d']=dt.getDate();
    date['dd']=dt.getDate()>10?dt.getDate():'0'+dt.getDate();
    date['m']=dt.getMonth()+1;
    date['mm']=(dt.getMonth()+1)>10?(dt.getMonth()+1):'0'+(dt.getMonth()+1);
    date['yyyy']=dt.getFullYear();
    date['yy']=dt.getFullYear().toString().slice(-2);
    date['h']=(dt.getHours()>12?dt.getHours()-12:dt.getHours());
    date['hh']=dt.getHours();
    date['mi']=dt.getMinutes();
    date['mimi']=dt.getMinutes()<10?('0'+dt.getMinutes()):dt.getMinutes();
    date['s']=dt.getSeconds();
    date['ss']=dt.getSeconds()<10?('0'+dt.getSeconds()):dt.getSeconds();
    date['sss']=dt.getMilliseconds();
    date['ampm']=(dt.getHours()>=12?'PM':'AM');
    x=format.toLowerCase();
    x=x.indexOf('dd')!=-1?x.replace(/(dd)/i,date['dd']):x.replace(/(d)/i,date['d']);
    x=x.indexOf('mm')!=-1?x.replace(/(mm)/i,date['mm']):x.replace(/(m)/i,date['m']);
    x=x.indexOf('yyyy')!=-1?x.replace(/(yyyy)/i,date['yyyy']):x.replace(/(yy)/i,date['yy']);
    x=x.indexOf('hh')!=-1?x.replace(/(hh)/i,date['hh']):x.replace(/(h)/i,date['h']);
    x=x.indexOf('mimi')!=-1?x.replace(/(mimi)/i,date['mimi']):x.replace(/(mi)/i,date['mi']);
    if(x.indexOf('sss')!=-1){   x=x.replace(/(sss)/i,date['sss']);  }
    x=x.indexOf('ss')!=-1?x.replace(/(ss)/i,date['ss']):x.replace(/(s)/i,date['s']);
    if(x.indexOf('ampm')!=-1){  x=x.replace(/(ampm)/i,date['ampm']);    }
    return x;
}

console.log(__getCurrentDateTime());  //returns in dd-mm-yyyy HH:MM:SS
console.log(__getCurrentDateTime('dd-mm-yyyy'));    //return in 05-12-2016
console.log(__getCurrentDateTime('dd/mm*yyyy'));    //return in 05/12*2016
console.log(__getCurrentDateTime('hh:mimi:ss'));    //return in 13:05:30 
```

console.log(__getCurrentDateTime('h:mi:ss ampm')); //在下午 1:5:30 返回

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-05-17T18:51:31.807

我需要弄清楚这一点，以备后效。这是我从几个不同来源获取元素后得出的结果——格式为 MM/DD/YYYY HH:MM AM/PM

```
D = new Date(Date(00));
M = D.getMonth()+1;
H = D.getHours();
Mi = D.getMinutes();

N = "AM"
if (H >= 12)
N = "PM"
if (H > 12)
{
H = H-12
}

amtOfZeroes = 2;
isNeg = false;

if (M < 0)
{
M = Math.abs(M);
isNeg = true;
}
Mo = Math.round(M) + "";
while(Mo.length < amtOfZeroes)
{

Mo = "0" + Mo; 
}
if (isNeg)
Mo = "-" + Mo;

if (H < 0)
{
H = Math.abs(H);
isNeg = true;
}
Ho = Math.round(H) + "";
while(Ho.length < amtOfZeroes)
{
Ho = "0" + Ho; 
}
if (isNeg)
Ho = "-" + Ho;

if (Mi < 0)
{
Mi = Math.abs(Mi);
isNeg = true;
}
Min = Math.round(Mi) + "";
while(Min.length < amtOfZeroes)
{
Min = "0" + Min; 
}
if (isNeg)
Min = "-" + Min;

T = Ho + ":" + (Min)

Mo + "/" + D.getDate() + "/" + D.getFullYear() + "  " + T + " " + N 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-08-07T18:19:18.040

```
dt= new Date();
alert(dt.toISOString().substring(8,10) + "/" + 
dt.toISOString().substring(5,7)+ "/" + 
dt.toISOString().substring(0,4) + " " + 
dt.toTimeString().substring(0,8)) 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-12-22T09:10:34.870

```
function display_c(){   
    var refresh = 1000; // Refresh rate in milli seconds    
    mytime = setTimeout('display_ct()', refresh)    
}

function display_ct() {

    var strcount    
    var currentdate = new Date();

    document.getElementById('ct').innerHTML = currentdate.toDateString() + " " + currentdate.getHours() + ":" + currentdate.getMinutes() + ":" + currentdate.getSeconds();

    tt = display_c();   
}

id = 'ct'     // Replace in Your id

onload = "display_ct();"     // Type inside a Body Tag 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-05-03T22:02:11.037

我精心准备的答案是使用这一点点 JS：[https ://github.com/rhroyston/clock-js](https://github.com/rhroyston/clock-js)

```
clock.now   --> 1462248501241
clock.time  --> 11:08 PM
clock.weekday   --> monday
clock.day   --> 2
clock.month --> may
clock.year  --> 2016
clock.since(1462245888784)  --> 44 minutes
clock.until(1462255888784)  --> 2 hours
clock.what.time(1462245888784)  --> 10:24 PM
clock.what.weekday(1461968554458)   --> friday
clock.what.day('14622458887 84')    --> 2
clock.what.month(1461968554458) --> april
clock.what.year('1461968554458')    --> 2016
clock.what.time()   --> 11:11 PM
clock.what.weekday('14619685abcd')  -->     clock.js error : expected unix timestamp as argument
clock.unit.seconds  --> 1000
clock.unit.minutes  --> 60000
clock.unit.hours    --> 3600000
clock.unit.days --> 86400000
clock.unit.weeks    --> 604800000
clock.unit.months   --> 2628002880
clock.unit.years    --> 31536000000 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-09-11T07:15:57.680

它简单而精湛

```
 $(document).ready(function () { 
            var fpsOut = document.getElementById('myTime');
            setInterval(function () {
                var d = new Date(); 
                fpsOut.innerHTML = d;
            }, 1000);
        });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="myTime"></div>
```

请找到下面的提琴手的例子

[http://jsfiddle.net/4zVxp/483/](http://jsfiddle.net/4zVxp/483/)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-03-27T08:48:43.077

如果有人在寻找功能

```
console.log(formatAMPM());
function formatAMPM() {
  var date = new Date();
  var hours = date.getHours();
  var minutes = date.getMinutes();
  var seconds = date.getSeconds();
  var ampm = hours >= 12 ? 'PM' : 'AM';
  hours = hours % 12;
  hours = hours ? hours : 12; // the hour '0' should be '12'
  minutes = minutes < 10 ? '0'+minutes : minutes;
  return strTime = date.getMonth() + '/' + date.getDay()+'/'+date.getFullYear()+' '+ hours + ':' + minutes +':'+ seconds + " " +ampm;
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-01-24T13:25:01.903

这是我全天候工作的完整格式，包含日期、日期、年份和时间，并确保您的 PC 的日期设置为正确的日期，如果您使用的是 PHP，请确保在 php.ini date.timezone=xx where xx your当前时区

```
function startTime()
{
    var today=new Date();
    //                   1    2    3    4    5    6    7    8    9   10    11  12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33
    var suffixes = ['','st','nd','rd','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','th','st','nd','rd','th','th','th','th','th','th','th','st','nd','rd'];

    var weekday = new Array(7);
    weekday[0] = "Sunday";
    weekday[1] = "Monday";
    weekday[2] = "Tuesday";
    weekday[3] = "Wednesday";
    weekday[4] = "Thursday";
    weekday[5] = "Friday";
    weekday[6] = "Saturday";

    var month = new Array(12);
    month[0] = "January";
    month[1] = "February";
    month[2] = "March";
    month[3] = "April";
    month[4] = "May";
    month[5] = "June";
    month[6] = "July";
    month[7] = "August";
    month[8] = "September";
    month[9] = "October";
    month[10] = "November";
    month[11] = "December";

    document.getElementById('txt').innerHTML=(weekday[today.getDay()] + ',' + " " + today.getDate()+'<sup>'+suffixes[today.getDate()]+'</sup>' + ' of' + " " + month[today.getMonth()] + " " + today.getFullYear() + ' Time Now ' + today.toLocaleTimeString());
    t=setTimeout(function(){startTime()},500);
}
```

```
<style>
sup {
        vertical-align: super;
        font-size: smaller;
    }
</style>
```

```
<html>
<body onload="startTime()">
<div id="txt"></div>
</body>
</html>
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-12-27T12:05:40.057

这个英国时区的例子.. `offset`为特定的**时区**设置。示例：印度：+05:30，英国：+1

```
 function realUKTime() {
        // create Date object for current location
        var d = new Date();
        offset ='+1';

        // convert to msec
        // subtract local time zone offset
        // get UTC time in msec
        var utc = d.getTime() + (d.getTimezoneOffset() * 60000);

        // create new Date object for different city
        // using supplied offset
        var nd = new Date(utc + (3600000*offset));

        // return time as a string
        var s = nd.getSeconds();
        var i = nd.getMinutes();
        var h = nd.getHours();
        var cDate =  nd.getDate();
        var m =  nd.getUTCMonth();
        var y = nd.getFullYear();

       var newUkTime = nd.toDateString() + " "+ (Number(h)-1)+":"+i+':'+s
        $("#realTime").html(newUkTime);

    }

    setInterval(realUKTime(),1000); 
```

> **输出**:: 2021 年 12 月 27 日星期一 12:6:3

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2022-02-12T05:12:17.677

简短而简单：-

```
console.log(new Date().toLocaleString()); 
```

[参考](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleString)

* * *

## 回答 #30

> 赞同：-2
> 
> 时间：2013-04-12T15:26:11.523

看看这个可能对你有用

```
<script language="JavaScript">
var dayarray=new Array("Sunday","Monday",
 "Tuesday","Wednesday","Thursday","Friday","Saturday")

var montharray=new Array("January","February","March",
 "April","May","June","July","August","September",
 "October","November","December")

function getthedate(){
var mydate=new Date()
var year=mydate.getYear()
if (year < 1000)
year+=1900
var day=mydate.getDay()
var month=mydate.getMonth()
var daym=mydate.getDate()
if (daym<10)
daym="0"+daym
var hours=mydate.getHours()
var minutes=mydate.getMinutes()
var seconds=mydate.getSeconds()
var dn="AM"
if (hours>=12)
dn="PM"
if (hours>12){
hours=hours-12
}
if (hours==0)
hours=12
if (minutes<=9)
minutes="0"+minutes
if (seconds<=9)
seconds="0"+seconds
//change font size here
var cdate="<small><font color='000000' face='Arial'><b>"+dayarray[day]+", 
    "+montharray[month]+" "+daym+", "+year+" "+hours+":"
 +minutes+":"+seconds+" "+dn
    +"</b></font></small>"
if (document.all)
document.all.clock.innerHTML=cdate
else if (document.getElementById)
document.getElementById("clock").innerHTML=cdate
else
document.write(cdate)
}
 if (!document.all&&!document.getElementById)
  getthedate()
  function goforit(){
  if (document.all||document.getElementById)
 setInterval("getthedate()",1000)
}

 </script>

enter code here

 <span id="clock"></span> 
```

* * *

## 回答 #31

> 赞同：-4
> 
> 时间：2018-01-10T21:03:27.317

```
<p id="DateTimeBox">Click The Button To Show Date And Time</p>
<button onclick="ShowDate();"> Show Date </button>
<script>
  function ShowDate() {
    document.getElementById('DateTimeBox').innerHTML = Date();
  }
</script>
```

# javascript - jQuery 正则表达式（正则表达式）

> ID：10211151
> 
> 赞同：1
> 
> 时间：2012-04-18T14:09:03.573
> 
> 标签：javascript, jquery, regex

任何人都可以帮助我尝试使用这个 jQuery 我无法让正则表达式工作

```
cj("input[id='PRE_TEXT_'(.*)'_POST_TEXT']").hide(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:14:28.307

您不能在 jQuery 选择器中使用正则表达式。使用过滤功能：

```
cj("input").filter(function() {
    if (/^PRE_TEXT_(.*)_POST_TEXT$/.test(cj(this).prop("id"))) {
        return true;
    }
    return false;
}).hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:17:07.300

您不能使用正则表达式，但您应该能够使用开始和结束。

```
cj("input[id^='PRE_TEXT_'][id$='_POST_TEXT']").hide(); 
```

# zend-framework - ZendFramework 评论框和关系数据库

> ID：10211152
> 
> 赞同：-1
> 
> 时间：2012-04-18T14:09:04.173
> 
> 标签：zend-framework, phpmyadmin

我是 Zend 框架的新手，这是我的第一个项目，我有一个俱乐部列表，点击后会转到您指定的俱乐部的描述页面。然后我想在描述页面上为这个俱乐部提供一个评论框。我的数据库中有一个评论表、用户表和俱乐部表，所有这些表都必须通过外键链接，以便我可以看到评论是针对哪个俱乐部以及哪个用户发布了评论。我遇到的问题是了解哪些键将是外键以及如何在 phpmyadmin 中执行此操作。设置好之后，我想知道如何在 ZendFramework 中实现这一点，是否有人知道我可以阅读的与此类问题相关的任何有用的在线资料？

谢谢

里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:44:39.900

在表中，外键是不是表主键的“id”，因此如果您有 2 个表、俱乐部和评论，那么在评论表中，外键将是 club_id 列，因此您可以参考俱乐部主键。

您应该花时间了解 Zend 应用程序的结构，查看 ZendFramework 网站上的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:58:04.510

一旦你设置了你的数据库，使用[Zend_Db_Adapter](http://framework.zend.com/manual/fr/zend.db.adapter.html)连接到你的数据库并为你的每个表定义类，扩展抽象类[Zend_Db_Table_Abstract在](http://framework.zend.com/manual/fr/zend.db.table.html)[这里](http://framework.zend.com/manual/en/zend.db.table.html#zend.db.table.defining)解释。

> 然后我想知道如何在 ZendFramework 中实现这一点是否有人知道我可以阅读的与此类问题相关的任何有用的在线资料

阅读[本教程](http://akrabat.com/wp-content/uploads/Getting-Started-with-Zend-Framework.pdf)以帮助您开始使用 ZF（它有一个类似于您正在尝试做的示例）。

还请看一下[Zend_Db_Select](http://framework.zend.com/manual/en/zend.db.select.html)，它将帮助您从数据库中检索数据。[Zend_Db_Table 关系](http://framework.zend.com/manual/en/zend.db.table.relationships.html)也很有用。

# cakephp-2.0 - cakeRequest 导致“未定义的属性”错误

> ID：10211153
> 
> 赞同：0
> 
> 时间：2012-04-18T14:09:08.777
> 
> 标签：cakephp-2.0

我正在处理一个请求对象：

```
$this->request 
```

并收到以下错误：

```
Undefined property: EventsController::$request 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:02:39.677

你确定你运行的是 Cake 2.0 而不是 1.3？的输出是`Configure::version()`什么？

Cake 只有在属性实际上是未定义的时候才会抛出这个错误。在 2.0 中，您应该得到一个完全填充的请求对象。在 1.3 中使用`$this->request`会引发您收到的错误。

# html - 我怎样才能拥有一个定位其整个父标题标签的锚标签？

> ID：10211163
> 
> 赞同：0
> 
> 时间：2012-04-18T14:09:46.343
> 
> 标签：html, css, w3c-validation

我有许多网站，其中有很多链接，其中锚标签位于标题标签内，例如：

```
<a href="#">
    <h2 style="padding-left: 50px;">
       A hyperlinked heading
    </h2>
</a> 
```

这允许我单击 h2 元素中的任何位置，包括 h2 元素上的任何填充（！），并触发超链接。但是，它不符合 W3C（通过[http://validator.w3.org/](http://validator.w3.org/)检查）

为了符合 W3C，内联标签（即 a）内不能有任何块标签（即 h2）。因此，解决方法是将锚标签放置在标题标签内：

```
<h2 style="padding-left: 50px;">
    <a href="#">
        A hyperlinked heading
    </a>
</h2> 
```

该解决方案的问题是我现在只能通过单击 h2 内的**文本**来触发超链接，但我实际上希望能够单击h2 元素上的**任何位置。**

我发现我可以将 display:block 添加到锚标签，如下所示：

```
<h2 style="padding-left: 50px;">
    <a href="#" style="display: block;">
        A hyperlinked heading
    </a>
</h2>​​​​​​​​​ 
```

这部分解决了这个问题，因为它允许我单击大部分 h2 元素来触发超链接，但仍然不允许我通过单击 h2 的任何填充区域来触发超链接。

可以在此处找到突出问题的 JSFiddle：http: [//jsfiddle.net/84rDG/](http://jsfiddle.net/84rDG/)

有人建议我可以从 h2 元素中删除所有 CSS 并将其添加到 h2 类中，然后我可以将 h2 类应用于任何 h2 标签**和**任何需要 h2 标签外观的锚标签。不过，这不是很好，因为我必须用锚标签替换我的大部分 h2 标签，这会扰乱任何基于 h2 元素的 SEO。

似乎 HTML5 将允许锚标签围绕标题标签，可能是因为很多人都试图实现我在这里概述的内容，但我需要一个同时有效的解决方案。

任何建议都将受到欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:18:50.680

您应该从`h2`-element 中删除填充并将其添加到`a`-element

CSS：

```
h2.anchor {
    border: 1px solid red;
    font-size: 40px;
    padding: 0px;
}
h2 > a {
    display: block;
    padding-left: 50px;
} 
```

HTML：

```
<h2 class="anchor">
    <a href="#">
        A hyperlinked heading
    </a>
</h2>​​​​​​​​​ 
```

# c# - ItemsControl 条形图 条形的缩放

> ID：10211166
> 
> 赞同：0
> 
> 时间：2012-04-18T14:10:01.997
> 
> 标签：c#, wpf, charts, itemscontrol

**编辑：添加代码**

此外，由于 DateTimes 不是真正的 Datetimes（hh:mm:ss 格式的 sStrings），我决定只使用字符串并使用 TimeSpan 来检索总分钟数。

```
<ObjectDataProvider x:Key="odpLbGrafiek" ObjectType="{x:Type myClasses:GrafiekBar}" MethodName="GetDataGrafiek"/>

    <DataTemplate x:Key="GrafiekItemTemplate">
        <Border Width="Auto" Height="Auto">
            <Grid>
                <Rectangle StrokeThickness="0" Height="30"  
                           Margin="15" 
                           HorizontalAlignment="Right" 
                           VerticalAlignment="Bottom"
                           Width="{Binding Value}"
                           Fill="{Binding Fill}">
                    <Rectangle.LayoutTransform>
                        <ScaleTransform ScaleX="20" />
                    </Rectangle.LayoutTransform>
                </Rectangle>
            </Grid>
        </Border>
    </DataTemplate> 
```

Fill 实际上给出了条形图本身的大小。

项目控制：

```
<ItemsControl x:Name="icGrafiek"  
            Margin="20,3,0,0" 
            ItemsSource="{Binding Source={StaticResource odpLbGrafiek}}"
            ItemTemplate="{DynamicResource GrafiekItemTemplate}" 
            RenderTransformOrigin="1,0.5" HorizontalAlignment="Left" VerticalAlignment="Top" Grid.RowSpan="6">
            <ItemsControl.RenderTransform>
                <TransformGroup>
                    <ScaleTransform ScaleY="-1" ScaleX="1"/>
                    <SkewTransform AngleY="0" AngleX="0"/>
                    <RotateTransform Angle="180"/>
                    <TranslateTransform/>
                </TransformGroup>
            </ItemsControl.RenderTransform>
        </ItemsControl> 
```

在数据绑定中调用以下方法。那里 bar.Value 给出了数据模板中 Width 值的值，该值给出了条的大小。

```
 public ObservableCollection<GrafiekBar> GetDataGrafiek()
    {
        var converter = new System.Windows.Media.BrushConverter();

        Double maxValueStilstanden = GetLargestValueStilstanden();

        TimeSpan tsMaxValue = TimeSpan.Parse(maxValueStilstanden.ToString());
        totalMinutesMaxValue = tsMaxValue.TotalMinutes; 

        //calculate % of stilstanden Values
        foreach(String t in stilStandenList)
        {
            TimeSpan ts = TimeSpan.Parse(t);
            Double totalMin = ts.TotalMinutes;

            totalMin = totalMin / totalMinutesMaxValue * 100;

            valuesChartPercentage.Add(totalMin);
        }

        for (int j = 0; j < valuesChartPercentage.Count; j++)
        {
            GrafiekBar bar = new GrafiekBar();
            bar.Value = valuesChartPercentage[j];
            bar.Fill = converter.ConvertFromString(kleuren[j]) as Brush;
            listGrafiek.Add(bar);
        }

        return listGrafiek;
    } 
```

另一个问题实际上是宽度（条的大小）。我实际上必须做 * 10000 才能获得酒吧本身的任何视觉效果。

* * *

我使用的*ItemsControl*的样式看起来像条形图。

例如，一个包含 5 个值从 1 到 5 的数组会创建 5 个具有不同大小且每个颜色不同的条。与以下示例非常相似[http://www.c-sharpcorner.com/uploadfile/mahesh/bar-chart-in-wpf/](http://www.c-sharpcorner.com/uploadfile/mahesh/bar-chart-in-wpf/)

**问题：**

我的问题是条的比例大小（在这种情况下为 width 属性，因此需要 int/double 值）。

*   我的程序以 HH:mm:ss 格式记录了几个 DateTimes
*   条形图应在这些日期时间进行缩放

例如，我可以有一个 01:22:11 的条形图或一个 00:01:11 的条形图，最大数量为 6。

将这些 DateTime 值缩放到某个 double 值的最佳方法是什么？该值将用于给出图表上条形的大小。

猜猜我正在寻找某种计算方法来计算我所有的值都一样，所以我不会突然得到一个非常大的值并超出我的 UI。

最干净的解决方案是将所有条相互比较，当一个改变时，另一个会增长/缩小，但这不是必需的，除非它不像听起来那么复杂。

条形字符本身不需要过于精确，它仅用于大致了解情况。确切的值将写入数据库。

欢迎任何建议！

谢谢彼得P。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:19:29.037

标准化。

*   将总时间转换为秒。
*   （总可用宽度除以总时间）=因子A
*   要找到每个条的适当宽度，请将其时间乘以 factorA

编辑：选择一个合适的日期/时间来测量零，或者您可以只使用 DateTime 对象的总秒数属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:19:40.743

我会选择一个基准日期，并让您的收藏图表显示基准日期和数据日期之间的天数/小时/分钟数

您甚至可以使用转换器来执行此操作，将基准日期作为转换器参数传入。

您的两个示例日期（`01:22:11`和`00:01:11`）实际上是时间，所以在这种情况下，我只需绘制自 0 以来的分钟数，因此您要绘制的实际数据值为 82 和 1

为了响应您询问缩放的编辑，您将以百分比的形式绘制所有内容。在这种情况下，取最大的数字并根据最大数字的百分比每隔一个数字绘制图表。

因此，使用您的两个示例时间，我会将它们转换为数字 82 和 1，将较大的数字 (82) 作为 100%，并返回一个包含每个数字到 82 的百分比的列表，因此返回列表将包含 100 % 和 1.2% (1/82)。

您仍然可以在 the`ViewModel`或`ItemsSource`Converter 中执行此操作（转换器会将整个列表作为参数，并返回整个列表作为返回值）

* * *

**编辑**

为了回应您在下面的评论，这是我将如何`Converter`使用`ItemsSource`. 转换器只是获取一个数据值，并将其转换为另一个仅特定于显示 UI 的值。

初始 XAML 如下所示：

```
<ItemsControl ItemsSource="{Binding MyCollection, 
    Converter="{StaticResource MyTimeConverter}}" /> 
```

哪里`MyCollection`是`ObservableCollection<DateTime>`, 并`MyTimeConverter`执行以下操作：

1.  将传入的转换`value`为 as `ObservableCollection<DateTime>`，因为所有转换器参数都传入 as`object`
2.  循环遍历集合并找出最大的时间
3.  取集合中最长的时间，并计算它有多少分钟。这将是您将基于所有其他时间的 100% 值，因此将您最大时间的分钟数存储在一个变量中
4.  `List<decimal>`为返回值创建一个新的
5.  循环开始收集。对于集合中的每个时间，将其除以您在步骤 3 中存储的“100% 值”，这将为您提供该条应与最大值进行比较的百分比。将此百分比添加到回报中`List<decimal>`
6.  返回`List<decimal>`到`ItemsControl`. 这`List<decimal>`将用作`ItemsSource`代替实际的`ObservableCollection<DateTime>`

这意味着您`ItemsControl`现在绑定到一组小数，其中一个值为 100% 并将占据屏幕的整个宽度，所有其他值都缩放到最大值。

关于您关于使用计时器更新集合的问题，您的计时器应该更新绑定到的`ObservableCollection<DateTime>`调用。计时器根本不应该知道或关心转换器代码。`MyCollection``ItemsControl`

例如，如果您的计时器想要重新创建`MyCollection`一组全新的时间，那么它可以，并且 UI 将自动重新运行转换器代码并更新条形图，因为`ObservableCollections`当集合发生更改时会告诉 UI 并且UI 需要更新。

至于我在下面的评论中提到的“基准日期”，如果您要绘制一组日期而不是时间，您将需要一个基准日期，这样您的图表就不会回溯到`1/1/0001`. 您不想使用最小日期，因为这会导致您的最低值在条形图中显示为 0，因此您将传递`Converter`特定日期以用作图表中的起点。如果基准日期是 2012 年 1 月 1 日，而您的最大日期是 12 年 3 月 1 日，那么您的图表将从 2012 年 1 月 1 日延伸到 2012 年 3 月 1 日。

基准日期将在转换器的第 3 步和第 5 步中使用。例如，您可以获取基准日期和数据日期之间的天数，而不是获取时间中的分钟数。

您还可以在转换器中计算基准日期，例如最低日期前 10 天，尽管根据数据，这可能会比您希望的更偏斜图表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:18:49.703

听起来您只需要跟踪所有值的最大值。然后，根据此最大值缩放每个值：

```
var scale = value / maximum;
var height = scale * ActualHeight; 
```

当然，您实际设置每个项目高度的方式可能是通过绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:19:28.807

恕我直言，整个条形图的背面应该有一个 ViewModel，这个 VM 具有计算最大值然后定义缩放的逻辑。

# java - 检查 JToggleButton 是否被按下并禁用它

> ID：10211174
> 
> 赞同：1
> 
> 时间：2012-04-18T14:10:27.457
> 
> 标签：java, swing, jtogglebutton

我有一个 JTogglebuttons 数组和一个 JButton，当按下 JButton 时它会启动一个循环，该循环遍历所有 JTogglebuttons 以查看它是否被按下，如果是它应该使其禁用/不可点击

这是有问题的代码片段

```
Public void actionPerformed(ActionEvent e){
        Object pressed = e.getSource(); 
        if (pressed == btnPurchase) {
            for(int row = 0; row<8 ; row++){
                for(int column = 0; column < 4; column++) {     
                    if (seat[row][column].isPressed()) {
                        seat[row][column].setEnabled(false);
                    }
                }
            }
        } 
```

我收到这个错误

```
cannot find symbol
symbol  : method isPressed()
location: class javax.swing.JToggleButton
                    if (seat[row][column].isPressed()) { 
```

如果我使用 .isSelected

我明白了

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at cinemaManager.actionPerformed(cinemaManager.java:174)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6375) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:24:51.670

寻找 ButtonModel，那是返回预期的方法，包括 isSelected

```
import javax.swing.ButtonModel;
import javax.swing.JFrame;
import javax.swing.JToggleButton;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class JToggleButtonChangeListener {

    public static void main(String args[]) {
        JFrame frame = new JFrame("Selecting Toggle");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JToggleButton toggleButton = new JToggleButton("Selecting Toggle / Deselacting Toggle");
        toggleButton.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                ButtonModel buttonModel = toggleButton.getModel();
                boolean armed = buttonModel.isArmed();
                boolean pressed = buttonModel.isPressed();
                boolean selected = buttonModel.isSelected();
                System.out.println("Changed: " + armed + "/" + pressed + "/" + selected);
            }
        });
        frame.add(toggleButton);
        frame.pack();
        frame.setLocation(150, 150);
        frame.setVisible(true);
    }
} 
```

注意：背景的变化不适用于所有外观

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:10:11.077

我发现我在错误的位置重新定义了数组，导致它丢失了现有元素。现在修好了谢谢

# .net - Quartz.NET vs JAMS vs？

> ID：10211176
> 
> 赞同：1
> 
> 时间：2012-04-18T14:10:29.293
> 
> 标签：.net, quartz.net, job-scheduling, quartz.net-2.0

我们目前使用的是 Quartz.NET 1.1。（我看到 Quartz.NET 2.0 是在几周前发布的）

1.) 有没有人亲自使用过 Quartz.NET 和 JAMS？如果是这样，两者中哪个“更好”（易于实施、易于配置、可靠）？

2.) 有没有人从 Quartz.NET 1.1 迁移到 Quartz.NET 2.0？如果是这样，那是怎么回事？我们应该注意什么？

3.) 有人使用他们喜欢并推荐的 Quartz.NET 或 JAMS 以外的东西吗？

谢谢！

格伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:43:31.157

我们在这里使用 JAMS，我是一个大支持者。我们使用 JAMS 运行 400 多个独特的流程 - 有些每 5 分钟运行一次，有些每天运行一次，有些每月运行一次，等等。有一些学习曲线，但他们的支持是一流的，他们帮助了我们的每一步方式。我对 Quartz 很熟悉，所以我从一开始就知道它对我们来说不够灵活，所以我们甚至没有考虑它。此外，JAMS 并不便宜——它的售价高达数千美元，因此如果您正在考虑使用 JAMS，则需要准备好花费 $$$。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:30:46.067

1.) 我有一些使用 Quartz.NET 的经验和大量使用 JAMS 的经验（我是开发人员之一）。如果不了解您的需求，我不能说哪个更好，它们并不是一回事。Quartz.NET 是开发人员在构建应用程序时可以使用的框架。JAMS 是一种开箱即用的商业产品。它有一个广泛的 .NET 类库，开发人员可以在构建他们的应用程序时使用它，但是您不必从那里开始。如果您想构建自己的作业调度程序，请从 Quartz.NET 开始。如果您想购买作业调度程序，请使用 JAMS。

2.) 没做过。

3.) 我喜欢果酱！

# web-services - 接收错误 您尝试保存或检索的文件已被服务器管理员阻止访问此网站。 0x800401e6

> ID：10211177
> 
> 赞同：1
> 
> 时间：2012-04-18T14:10:30.370
> 
> 标签：web-services, sharepoint, deployment, wsdl, webexception

构建和部署后，从中央管理检查解决方案管理，它是一个简单的 Web 服务方法，它只在尝试检索 wsdl 时创建一个包含几列的文档库列表，甚至只是从地址调用 WS，因为它一个无效的方法我收到一些错误：

```
 The file you are attempting to save or retrieve has been blocked from this Web site by the server administrators.<nativehr>0x800401e6</nativehr><nativestack></nativestack> 
```

当从另一个已经部署的 Web 服务项目调用时，相同的方法运行良好，因此代码没有任何问题。我很可能做错了什么，但无法弄清楚。该系统运行在带有sharepoint 2010、framework 3.5 和“ANY”cpu 模式的win server 2008 上。谢谢你！

[编辑]现在通过从中央管理中的阻止文件列表中删除 asmx 扩​​展来摆脱以前的错误，而不是我收到 404 错误：

```
 The resource cannot be found. 
  Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

  Requested URL: /_layouts1/my2claims/tt_claims.asmx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:31:34.453

它必须在与 SharePoint 相同的应用程序池下运行

# java - 从java中的多个类更改setText

> ID：10211178
> 
> 赞同：0
> 
> 时间：2012-04-18T14:10:31.107
> 
> 标签：java, swing, oop

我正忙于一个在`JFrame`（使用`BorderLayout`）中运行的应用程序，并且具有：

*   底部的状态栏
*   左侧固定按钮
*   顶部菜单（与特定功能相关的更改），
*   右侧的按钮（与特定功能相关的更改）。

我正在设置它，对于左侧的每个按钮，将为它的功能和过程创建一个单独的类文件。在这个阶段，大约有 8 个额外的课程。

如何通过该特定类更改每个类的按钮和菜单上的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:16:17.627

如果您为每个按钮创建一个单独的类，我会确保该类 extends `JButton`。通过这样做，要更改按钮上的值，您仍然可以访问所有常规`JButton`方法，例如`setText();`

所以希望你的自定义按钮类看起来像这样......

```
public class MyButton1 extends JButton {

    public MyButton1(String label){
        super(label);
    }

// your other methods go here
} 
```

要创建按钮，您将执行此操作，这将设置按钮标签...

```
MyButton1 button1 = new MyButton1("Hello"); 
```

`JButton`如果您想稍后更改标签，您仍然可以调用方法，就像这样......

```
button1.setText("Goodbye"); 
```

# java - Java Collection比较扩展接口的通用类扩展可比较

> ID：10211180
> 
> 赞同：2
> 
> 时间：2012-04-18T14:10:35.530
> 
> 标签：java, generics

我有这个界面

```
public interface IDataPoint<T> extends Comparable<T>  {
    public T getValue();
} 
```

而这个实现......

```
public class IntegerDataPoint implements IDataPoint<Integer> {

    // ... some code omitted for this example

    public int compareTo(Integer another) {
         // ... some code
    }
} 
```

和另一堂课……

```
public class HeatMap<X extends IDataPoint<?> {
    private List<X> xPoints;
} 
```

现在我想在`xPoints`列表中使用 Collections.max （和类似的），但这不起作用，可能是因为我的泛型都搞砸了。

有什么建议可以解决这个问题（没有`Comparator`）？

```
Collections.max(xPoints); 
```

给我这个错误：

```
Bound mismatch: The generic method max(Collection<? extends T>) of type Collections is not applicable for the arguments (List<X>). The inferred type X is not a valid substitute for the bounded parameter <T extends Object & Comparable<? super T>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:20:11.543

问题是`Collections.max(Collection<? extends T>)`希望 T 与**自己**相比，而不是其他类型。

在你的情况下`IntegerDataPoint`是可比的**`Integer`**，但不是**`IntegerDataPoint`**

您无法轻松解决此问题，因为`IntegerDataPoint`不允许同时`Comparable<Integer>`实施`Comparable<IntegerDataPoint>`。

# javascript - Javascript json eval() 注入

> ID：10211183
> 
> 赞同：3
> 
> 时间：2012-04-18T14:10:39.103
> 
> 标签：javascript, json, eval, code-injection

我在 AJAX 书籍的指导下制作了一个 AJAX 聊天室，教我使用 JSON 和 eval() 函数。该聊天室具有正常的聊天功能和白板功能。当一条普通的文本消息来自 JSON 格式的 php 服务器时，浏览器中的 javascript 会执行以下操作：

没有白板命令 -------------------------------------------

```
function importServerNewMessagesSince(msgid) {
    //loadText() is going to return me a JSON object from the server
    //it is an array of {id, author, message}
    var latest = loadText("get_messages_since.php?message=" + msgid);
    var msgs = eval(latest);
    for (var i = 0; i < msgs.length; i++) {
                    var msg = msgs[i];
                    displayMessage(escape(msg.id), escape(msg.author), escape(msg.contents));
    }   ... 
```

* * *

白板绘图命令由服务器以 JSON 格式发送，带有特殊的用户名“SVR_CMD”，现在 javascript 稍作更改：

使用白板命令 ----------------------------------------------------------- ---

```
function importServerNewMessagesSince(msgid) {
    //loadText() is going to return me a JSON object from the server
    //it is an array of {id, author, message}
    var latest = loadText("get_messages_since.php?message=" + msgid);
    var msgs = eval(latest);
    for (var i = 0; i < msgs.length; i++) {
                    var msg = msgs[i];
                    if (msg.author == "SVR_CMD") {

                        eval(msg.contents);  // <-- Problem here ...

                         //I have a javascript drawLine() function to handle the whiteboard drawing
                        //server command sends JSON function call like this: 
                        //"drawLine(200,345,222,333)" eval() is going to parse execute it
                        //It is a hacker invitation to use eval() as someone in chat room can
                        //insert a piece of javascript code and send it using the name SVR_CMD?

                   else {
                        displayMessage(escape(msg.id), escape(msg.author), escape(msg.contents));
                    }

    }   ... 
```

* * *

现在，如果黑客在脚本中将他的用户名更改为 SVR_CMD，然后在消息输入中开始输入 javascript 代码，而不是 drawLine(200,345,222,333)，他正在注入 redirectToMyVirusSite()。eval() 只会在聊天室中每个人的浏览器中为他运行它。因此，如您所见，让 eval 执行聊天室中其他客户端的命令显然是黑客邀请。我知道我所遵循的这本书只是对功能的介绍。在实际情况下，我们如何正确使用 JSON？

例如，javascriptencode/escape 是否有服务器端 php 或 .net 函数，以确保没有黑客可以将有效的 javascript 代码发送到其他客户端的浏览器作为 eval() ？或者使用 JSON eval() 是否安全，它似乎是一个强大但邪恶的功能？

谢谢你，汤姆

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T14:19:03.083

这本书是什么？`eval`是邪恶的，永远没有一个使用它的理由。

要将 JSON 字符串转换为 javascript 对象，您可以执行以下操作：

```
var obj = JSON.parse(latest) 
```

这意味着您可以使用：

```
[].forEach.call(obj, function( o ) {
    // You can use o.message, o.author, etc.
} ) 
```

做相反的事情（javascript对象-> JSON字符串），以下工作：

```
var json = JSON.stringify(obj) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:28:48.610

只有当执行的代码是由其他客户端生成而不是由服务器生成时，它才是不安全的。当然，您需要阻止任何人使用该名称，尽管我不明白您为什么要使用“作者”字段？只需发送一个对象`{"whiteboard":"drawLine(x,y,z)"}`而不是`{"author":"SVR_CMD","contents":"drawLine(x,y,z)"}`.

但没错，eval() 仍然是对黑客的邀请。人们总是可以发送无效数据并尝试或多或少地直接影响输出。转义的唯一方法是正确序列化您想要接收和发送的数据 - 图纸数据。您如何接收白板命令？没有服务器端“转义”功能可以使 javascript 代码“干净”——它始终是一个安全漏洞。

我希望像这样的序列化

```
message = {
    "author": "...", // carry the information /who/ draws
    "whiteboard": {
         "drawline": [200, 345, 222, 333]
    }
} 
```

这样您就可以轻松清理命令（此处为“drawline”）。

`eval()`如果您有非常复杂的命令并希望通过在服务器端构建它们来减少传输的数据，则使用可能是可以的。尽管如此，您仍需要正确解析和转义从其他客户端接收到的命令。但我建议在没有评估的情况下找到解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:32:16.913

撇开 eval 问题不谈，不要使用用户可以填写的字段 -`.author`在您的代码中 - 用于身份验证。将另一个字段添加到您的 JSON 消息中，例如`.is_server_command`当存在时，将表示对消息的特殊处理。该字段将不依赖于用户输入，因此不会被“黑客”劫持。

# php - 使用php从csv文件中明智地选择数据列

> ID：10211185
> 
> 赞同：-2
> 
> 时间：2012-04-18T14:10:44.523
> 
> 标签：php, csv

我有 csv 文件

```
a, b, c, d
1, 2, 3, 4
5, 6, 7, 8
9, 10, 11, 12 
```

我想要使​​用 php 的如下输出

```
a 1 5 9
b 2 6 10
c 3 7 11
d 4 8 12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:25:59.820

使用这个函数[str_getcsv()](http://www.php.net/manual/en/function.str-getcsv.php)

```
<?php
$row=str_getcsv(string);

$field=array('a','b','c','d');
$n=0;
while($n<count($field)) { 
echo $field[$n]
foreach($row as $item){
    echo $item[$n];
    echo ' ';
}
echo '\n';
$nbfield++
} 
```

# javascript - 两个地点之间的距离 - 谷歌地图

> ID：10211187
> 
> 赞同：25
> 
> 时间：2012-04-18T14:10:48.877
> 
> 标签：javascript, google-maps-api-3, distance

我正在尝试使用谷歌地图找到两点之间的位置。这是我正在使用的代码：

```
function initialize() {
          var myOptions = {
            center: new google.maps.LatLng(36.8813329,-103.6975488),
            zoom: 4,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

           var impactCoordinates = [
              new google.maps.LatLng(37.772323, -122.214897),
              new google.maps.LatLng(34.1633766,-81.6487862),
                             ];
            var ImpactPath = new google.maps.Polyline({
              path: impactCoordinates,
              strokeColor: "#FF0000",
              strokeOpacity: 1.0,
              strokeWeight: 2
            });

            ImpactPath.setMap(map);

            var loc1 = new google.maps.LatLng(37.772323, -122.214897);
            var loc2 = new google.maps.LatLng(34.1633766,-81.6487862);

            alert(google.maps.geometry.spherical.computeDistanceBetween(loc1, loc2));
        } 
```

这是我从控制台得到的错误：

> 未捕获的类型错误：无法读取未定义的属性“球形”

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-18T14:17:14.410

如果您还没有这样做，请在`<script>`标签 中显式添加几何库`src="http://maps.googleapis.com/maps/api/js?libraries=geometry&sensor=false">`

# python - Python 错误：'utf8' 编解码器无法解码位置 85 中的字节 0x92：无效的起始字节

> ID：10211188
> 
> 赞同：1
> 
> 时间：2012-04-18T14:10:51.583
> 
> 标签：python, web-scraping, lxml

我正在使用 python2.7 和 lxml。我的代码如下

```
import urllib
from lxml import html

def get_value(el):
    return get_text(el, 'value') or el.text_content()

response = urllib.urlopen('http://www.edmunds.com/dealerships/Texas/Frisco/DavidMcDavidHondaofFrisco/fullsales-504210667.html').read()
dom = html.fromstring(response)

try:
    description = get_value(dom.xpath("//div[@class='description item vcard']")[0].xpath(".//p[@class='sales-review-paragraph loose-spacing']")[0])
except IndexError, e:
    description = '' 
```

代码在try内部崩溃，报错

```
UnicodeDecodeError at /
'utf8' codec can't decode byte 0x92 in position 85: invalid start byte 
```

无法编码/解码的字符串是：不应该

我尝试过使用很多技术，包括 .encode('utf8')，但没有一个能解决问题。我有两个问题：

1.  如何解决这个问题呢
2.  当问题代码在尝试之间时，我的应用程序如何崩溃，除了

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T14:16:57.680

该页面正在提供`charset=ISO-8859-1`。从中解码为 un​​icode。

[![来自浏览器的详细信息快照。 信用@老熊猫]](../Images/afa7100d66b54dcbb7e87df800dad86f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:14:17.713

您的 except 子句仅处理 IndexError 类型的异常。问题是 UnicodeDecodeError，它不是 IndexError - 所以异常不是由那个 except 子句处理的。

'get_value' 的作用也不清楚，这很可能是实际问题出现的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:13:13.220

1.  *   跳过错误字符，或将其正确解码为 un​​icode。
2.  *   你只捕获 IndexError，而不是 UnicodeDecodeError

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:14:21.527

1.  解码对 unicode 的响应，在使用 fromhtml 解析之前正确处理错误（错误时忽略）。

2.  捕获 UnicodeDecodeError 或所有错误。

# ios - iOS：在故事板中将子类从 UIView 更改为 UIScrollView

> ID：10211198
> 
> 赞同：18
> 
> 时间：2012-04-18T14:11:15.173
> 
> 标签：ios, uiview, uiscrollview, subclass

我创建了一个基于故事板的项目。在视图控制器的视图之一中，需要放置一些额外的元素，这会导致视图高度增加，这样视图现在必须是可滚动的。是否可以在情节提要中简单地将 UIView 的类类型更改为 UIScrollView ？它真的会将顶级 UIView 转换为 UIScrollView 吗？只是寻找一种快速简便的方法，无需太多更改。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-06-14T11:07:26.127

您可以将故事板作为 xml 源代码文件打开，找到视图对象并将其替换为滚动视图。`.storyboard`在 Xcode 中右键单击文件并选择 Open As → Source Code。然后搜索场景的 xml 片段（例如，Cmd+F 并键入控制器名称）。顶视图对象将如下所示：

```
<view key="view" contentMode="scaleToFill" id="Jjm-HD-A8W">
  ...
  (suviews and constraints)
  ...
</view> 
```

`view`将元素更改为`scrollView`（不要忘记结束标签）：

```
<scrollView key="view" contentMode="scaleToFill" id="Jjm-HD-A8W">
  ...
  (suviews and constraints)
  ...
</scrollView> 
```

然后`.storyboard`使用 Interface Builder 打开。您的视图现在变成了滚动视图。

此方法有两个优点：您不会失去任何约束，并且您可以在属性检查器中看到所有滚动视图特定的属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T22:26:33.790

您必须将`UIView`类型更改为`UIScrollView`(identity inspector) 并在控制器`viewDidLoad`方法中`contentSize`通过将视图转换为 a 来分配视图 a `UIScrollView`：

```
[(UIScrollView *)self.view setContentSize:CGSizeMake(320, 700)]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-15T22:49:27.277

实际上有一个更好的方法来做到这一点。

1.  在 StoryBoard 中切换打开并将`UIView`其中的任何内容剪切到剪贴板。
2.  删除`UIView`.
3.  `UIScrollView`在StoryBoard 中插入一个对象。
4.  从剪贴板粘贴到这个新对象中。

此方法将保留您为视图内的事物配置的所有委托和 IBOutlet 设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T04:32:51.863

一种更简单的方法是仅使用滚动视图并将 contentsize 设置为与框架相同的大小 - 因此没有可滚动区域。例如

```
scrollview.contentsize = CGSizeMake(320,480); 
```

然后当您需要放大视图时，只需根据需要进行更新。您需要确保关闭反弹功能，否则您仍然可以在滚动视图中拖动。

# html - 将html转换为字符串

> ID：10211201
> 
> 赞同：0
> 
> 时间：2012-04-18T14:11:21.333
> 
> 标签：html, string, telerik, editor

如何将 Html 转换为字符串。例如我有 html: `<p>This is Test</p><p></p><p>Test</p>`。我想将html转换成这个：

这是一个测验

测试

我不希望`<p>`标签打印在屏幕上，但我希望它们表现得像实际的段落。

我已经尝试过 HtmlDecode 但这也不起作用。我从 mvc telerik 编辑器获取字符串。

任何帮助，将不胜感激。谢谢 ：）

**更新：** 我确实通过在我的视图中使用 HTML.Raw 将 html 转换为字符串来部分解决了我的问题。我想知道是否有任何与 Html.Raw 等效的东西，我也可以在服务器端使用，即在我的控制器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:12:56.700

您需要使用解析器。[HTMLAgility](http://htmlagilitypack.codeplex.com/)包是这里不断推荐的工具。

# javascript - 滚动子 div 滚动窗口，我该如何停止呢？

> ID：10211203
> 
> 赞同：96
> 
> 时间：2012-04-18T14:11:24.957
> 
> 标签：javascript, html

我有一个带有滚动条的 div，当它到达末尾时，我的页面开始滚动。无论如何我可以阻止这种行为吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-18T14:21:18.207

您可以通过执行以下操作来停用整个页面的滚动：

```
<div onmouseover="document.body.style.overflow='hidden';" onmouseout="document.body.style.overflow='auto';"></div> 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-05-09T10:57:06.470

找到了解决方案。

[http://jsbin.com/itajok](http://jsbin.com/itajok)

这就是我需要的。

这就是代码。

[http://jsbin.com/itajok/edit#javascript,html](http://jsbin.com/itajok/edit#javascript,html)

使用 jQuery 插件。

* * *

**由于弃用通知而更新**

从[jquery-mousewheel](https://github.com/jquery/jquery-mousewheel)：

> `delta`向事件处理程序添加三个参数（ 、`deltaX`和）的旧行为`deltaY`现已弃用，并将在以后的版本中删除。

然后，`event.deltaY`现在必须使用：

```
var toolbox = $('#toolbox'),
    height = toolbox.height(),
    scrollHeight = toolbox.get(0).scrollHeight;

toolbox.off("mousewheel").on("mousewheel", function (event) {
  var blockScrolling = this.scrollTop === scrollHeight - height && event.deltaY < 0 || this.scrollTop === 0 && event.deltaY > 0;
  return !blockScrolling;
}); 
```

[**演示**](http://plnkr.co/edit/oz3CL7)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-05-07T21:31:35.667

选定的解决方案是一件艺术品。觉得这个插件值得。。。。

```
$.fn.scrollGuard = function() {
    return this
        .on( 'wheel', function ( e ) {
            var event = e.originalEvent;
            var d = event.wheelDelta || -event.detail;
            this.scrollTop += ( d < 0 ? 1 : -1 ) * 30;
            e.preventDefault();
        });
}; 
```

这一直给我带来不便，与我见过的其他黑客相比，这个解决方案非常干净。很想知道它是如何工作的以及它会得到多么广泛的支持，但是为 Jeevan 和最初提出这个问题的人欢呼。顺便说一句 - stackoverflow 答案编辑器需要这个！

**更新**

我相信这更好，因为它根本不会尝试操纵 DOM，只会有条件地防止冒泡......

```
$.fn.scrollGuard2 = function() {
  return this
    .on( 'wheel', function ( e ) {
      var $this = $(this);
      if (e.originalEvent.deltaY < 0) {
        /* scrolling up */
        return ($this.scrollTop() > 0);
      } else {
        /* scrolling down */
        return ($this.scrollTop() + $this.innerHeight() < $this[0].scrollHeight);
      }
    })
  ;
}; 
```

在 chrome 中效果很好，比其他解决方案简单得多......让我知道它在其他地方的表现如何......

[小提琴](http://jsfiddle.net/3dxpyjoz/10/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-18T14:22:01.383

您可以在 div 上使用 mouseover 事件来禁用正文滚动条，然后使用 mouseout 事件再次激活它？

例如 HTML

```
<div onmouseover="disableBodyScroll();" onmouseout="enableBodyScroll();">
    content
</div> 
```

然后像这样的javascript：

```
var body = document.getElementsByTagName('body')[0];
function disableBodyScroll() {
    body.style.overflowY = 'hidden';
}
function enableBodyScroll() {
    body.style.overflowY = 'auto';
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-07-02T22:23:24.000

这是在 Y 轴上执行此操作的跨浏览器方法，它适用于桌面和移动设备。在 OSX 和 iOS 上测试。

```
var scrollArea = this.querySelector(".scroll-area");
scrollArea.addEventListener("wheel", function() {
    var scrollTop = this.scrollTop;
    var maxScroll = this.scrollHeight - this.offsetHeight;
    var deltaY = event.deltaY;
    if ( (scrollTop >= maxScroll && deltaY > 0) || (scrollTop === 0 && deltaY < 0) ) {
        event.preventDefault();
    }
}, {passive:false});

scrollArea.addEventListener("touchstart", function(event) {
    this.previousClientY = event.touches[0].clientY;
}, {passive:false});

scrollArea.addEventListener("touchmove", function(event) {
    var scrollTop = this.scrollTop;
    var maxScroll = this.scrollHeight - this.offsetHeight;
    var currentClientY = event.touches[0].clientY;
    var deltaY = this.previousClientY - currentClientY;
    if ( (scrollTop >= maxScroll && deltaY > 0) || (scrollTop === 0 && deltaY < 0) ) {
        event.preventDefault();
    }
    this.previousClientY = currentClientY;
}, {passive:false}); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-12-13T14:06:28.827

[正如这里](https://stackoverflow.com/a/54202811/5952509)所回答的，大多数现代浏览器现在都支持`overscroll-behavior: none;`CSS 属性，它可以防止滚动链接。就是这样，只有一行！

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-06-30T08:58:19.983

我写了解决这个问题

```
 var div;
  div = document.getElementsByClassName('selector')[0];

  div.addEventListener('mousewheel', function(e) {
    if (div.clientHeight + div.scrollTop + e.deltaY >= div.scrollHeight) {
      e.preventDefault();
      div.scrollTop = div.scrollHeight;
    } else if (div.scrollTop + e.deltaY <= 0) {
      e.preventDefault();
      div.scrollTop = 0;
    }
  }, false); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-04-18T14:52:25.533

如果我正确理解了您的问题，那么当鼠标悬停在 div 上（比如说侧边栏）时，您希望防止滚动主要内容。为此，侧边栏可能不是主要内容的滚动容器（即浏览器窗口）的子项，以防止滚动事件冒泡到其父项。

这可能需要以下列方式进行一些标记更改：

```
<div id="wrapper"> 
    <div id="content"> 
    </div> 
</div> 
<div id="sidebar"> 
</div> 
```

查看它在[此示例小提琴](http://jsfiddle.net/qndjW/94/)中的工作，并将其与[此示例小提琴](http://jsfiddle.net/qndjW/95/)进行比较，后者的侧边栏鼠标离开行为略有不同。

另请参阅[使用浏览器的主滚动条仅滚动一个特定的 div](https://stackoverflow.com/a/6966621/757830)。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-09-03T12:49:11.360

如果您输入选择器元素，这将禁用窗口上的滚动。像魅力一样工作。

```
elements = $(".selector");

elements.on('mouseenter', function() {
    window.currentScrollTop = $(window).scrollTop();
    window.currentScrollLeft = $(window).scrollTop();
    $(window).on("scroll.prevent", function() {
        $(window).scrollTop(window.currentScrollTop);
        $(window).scrollLeft(window.currentScrollLeft);
    });
});

elements.on('mouseleave', function() {
    $(window).off("scroll.prevent");
}); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-06-17T16:27:37.223

您可以通过执行以下操作来停用整个页面的滚动，但显示滚动条！

```
<div onmouseover="document.body.style.overflow='hidden'; document.body.style.position='fixed';" onmouseout="document.body.style.overflow='auto'; document.body.style.position='relative';"></div> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-11-02T19:43:11.517

```
$this.find('.scrollingDiv').on('mousewheel DOMMouseScroll', function (e) {
  var delta = -e.originalEvent.wheelDelta || e.originalEvent.detail;
  var scrollTop = this.scrollTop;
  if((delta < 0 && scrollTop === 0) || (delta > 0 && this.scrollHeight - this.clientHeight - scrollTop === 0)) {
    e.preventDefault();
  }
}); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-10-12T21:09:20.387

根据 ceed 的回答，这是一个允许嵌套滚动保护元素的版本。只有鼠标悬停的元素会滚动，而且滚动非常流畅。这个版本也是可重入的。它可以在同一个元素上多次使用，并且会正确删除和重新安装处理程序。

```
jQuery.fn.scrollGuard = function() {
    this
        .addClass('scroll-guarding')
        .off('.scrollGuard').on('mouseenter.scrollGuard', function() {
            var $g = $(this).parent().closest('.scroll-guarding');
            $g = $g.length ? $g : $(window);
            $g[0].myCst = $g.scrollTop();
            $g[0].myCsl = $g.scrollLeft();
            $g.off("scroll.prevent").on("scroll.prevent", function() {
                $g.scrollTop($g[0].myCst);
                $g.scrollLeft($g[0].myCsl);
            });
        })
        .on('mouseleave.scrollGuard', function() {
            var $g = $(this).parent().closest('.scroll-guarding');
            $g = $g.length ? $g : $(window);
            $g.off("scroll.prevent");
        });
}; 
```

`scroll-guard`一种简单的使用方法是向页面中允许滚动的所有元素添加一个类，例如。然后`$('.scroll-guard').scrollGuard()`用来保护他们。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-18T14:12:59.960

如果您应用一种`overflow: hidden`样式，它应该会消失

编辑：实际上我读错了你的问题，这只会隐藏滚动条，但我认为这不是你要找的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-12-10T06:55:02.660

我无法得到在 Chrome 和 Firefox 中工作的任何答案，所以我想出了这个合并：

```
$someElement.on('mousewheel DOMMouseScroll', scrollProtection);

function scrollProtection(event) {
    var $this = $(this);
    event = event.originalEvent;
    var direction = (event.wheelDelta * -1) || (event.detail);
    if (direction < 0) {
        if ($this.scrollTop() <= 0) {
            return false;
        }
    } else {
        if ($this.scrollTop() + $this.innerHeight() >= $this[0].scrollHeight) {
            return false;
        }
    }
} 
```

# java - 使用什么来满足这个要求，Array，List，Map，？

> ID：10211204
> 
> 赞同：1
> 
> 时间：2012-04-18T14:11:26.433
> 
> 标签：java, arrays, list, hashmap

在制作我的程序时，我遇到了这个要求，我必须为我创建的一些对象分配唯一的 ID。现在我在 GUI 上动态创建对象，最初我使用简单的计数器将 int 值分配给创建的节点，它工作得很好。

然而，这种方法产生的问题是，如果在创建 GUI 时，如果必须删除某个节点，则该 id 也会被删除并且不再使用。对于下一个新节点，每次我必须使用最新的计数器值，如果在此过程中删除节点，这会产生大量缺失的 int 值。

我想在创建新节点时重用那些丢失的 id，为此我很困惑我应该添加哪种方法。

**我的想法：**

1.  使用包含可用值的 ArrayList，加上如果删除了一个节点，它的 id 将添加到该列表中，我对该列表进行排序并为新节点使用最小值。很好，但是，当我使用这个值时，如果我从列表中删除它，索引不会被删除，这会导致问题。
2.  HashMap，与上面类似，我添加了可用的 id 并删除了未使用的，但不确定如何对这个 hashMap 进行排序？？？

你能建议我应该怎么做吗？可能我需要某种堆栈，我可以在其中推送值，对其进行排序并使用最小值，如果我使用过，它会从这个堆栈中删除，请给出一些关于如何完成这个任务的想法？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:15:59.577

保留已删除 ID 的列表，并在创建新节点时检查该列表以查找要重复使用的 ID（无论您使用哪个 ID）；如果列表是空的（因为它最初是空的），则以“旧方式”获取一个新 ID。更聪明的是：使列表成为一个对象，如果其中没有任何已删除的 ID，则该对象将生成一个新 ID，因此调用者不必担心 ID 是如何到达的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:14:39.647

您可以使用 a [`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)（它会自动将添加的所有条目从最小到最大排序）来存储已删除的 id ( `myTreeSet.add(old_id)`)。这样，当您创建一个新实例时，您将检查`TreeSet`第一个实例中是否有任何条目。要获取最低值，您将使用`myTreeSet.first()`（这应该是一个`O(1)`操作）。如果`TreeSet`为空，这意味着所有已知的 id 当前都在使用中，那么您将继续使用下一个可用的 id 正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:18:12.150

如何[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)存储使用的 ID？然后，您可以使用它[`higher(0)`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#higher%28E%29)来查找最低的免费 ID。如果它返回`null`，那么您知道您没有使用过的 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:17:27.657

只有当您的节点很少时，第一个解决方案才能正常工作！想象一个有数千个节点的应用程序！内存消耗呢？Hashmap 解决方案更适合您的目标并且需要更少的控制。

# jquery - Jquery 移动地理定位。IP地址问题

> ID：10211206
> 
> 赞同：0
> 
> 时间：2012-04-18T14:11:30.943
> 
> 标签：jquery, android, iphone, mobile

我使用 Jquery mobile 创建了一个移动网站。用户需要在文本框中输入他们的位置。

为了让这更容易，我想使用地理定位来为他们找到他们的位置。

我的理解是，当没有 gps 功能可用时（例如在大多数笔记本电脑上），地理定位服务将使用他们的 IP 地址以及该地区的 wifi 信号来提供位置。这很糟糕。这告诉我，我所在的计算机距离我实际的位置 9 英里....

我在我的 iPhone 上运行了这个网站，它完美地找到了我的位置。这是因为它使用了手机中的gps功能。

所以，我想做的是：以某种方式检查用户设备（iPhone、Android、笔记本电脑、PC）是否有 gps。如果是这样，请使用地理位置来找到他们的位置。如果，不要跳过地理位置搜索并手动输入位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:20:42.297

Geolocation api 不会为您提供有关用于提供用户位置的方法的任何信息（除非您使用一些底层框架，如 phonegap）。可能您应该处理精度参数以检查该位置是否可以接受。

# perl - Perl 解析日志/存储结果/读取结果

> ID：10211207
> 
> 赞同：1
> 
> 时间：2012-04-18T14:11:42.083
> 
> 标签：perl, writing

不久前，我创建了一个日志解析器。日志可以是几千行到几百万行。我将解析的条目存储在哈希引用数组中。

我正在寻找有关如何存储输出的建议，以便在再次运行脚本时可以快速读回它（这可以防止重新解析日志的需要）。

最终目标是拥有一个允许用户创建查询的 Web 界面（基本上将解析的输出视为存在于数据库中）。

我已经考虑将 Data::Dumper 的输出写入文件。

这是一个使用 Data::Dumper 打印的示例数组条目：

```
``$VAR = 
          {
            'weekday' => 'Sun',
            'index' => 26417,
            'timestamp' => '1316326961',
            'text' => 'sys1  NSP
Test.cpp      1000
This is a example error message.
',
            'errname' => 'EM_TEST',
            'time' => {
                        'array' => [
                                     2011,
                                     9,
                                     18,
                                     '06',
                                     22,
                                     41
                                   ],
                        'stamp' => '20110918062241',
                        'whole' => '06:22:41',
                        'hour' => '06',
                        'sec' => 41,
                        'min' => 22
                      },
            'month' => 'Sep',
            'errno' => '2261703',
            'dayofmonth' => 18,
            'unknown2' => '1',
            'unknown3' => '1',
            'year' => 2011,
            'unknown1' => '0',
            'line' => 219154
          },`` 
```

`有没有更有效的方法来实现我的目标？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:17:58.140

如果您的输出是一个对象（或者如果您想将其变成一个对象），那么您可以使用[`KiokuDB`](http://p3rl.org/KiokuDB)（以及您选择的数据库后端）。如果没有，那么您可以使用[`Storable`](http://p3rl.org/Storable). 当然，如果您的数据结构本质上是模拟 CSV 文件，那么您只需将输出写入文件即可。或者，您可以将数据输出到可以存储在文件中的 JSON 对象中。或者，您可以放弃中间人，直接使用数据库。

您提到您的数据结构是“哈希数组”（大概您的意思是哈希引用数组）。如果每个哈希引用的键相同，则可以将其存储在 CSV 中。

如果不更具体地了解您的数据，您不太可能得到具体的答案。

**编辑：** 现在您已经发布了一些示例数据，您可以简单地将其写入 CSV 文件或数据库，其中包含`index`、`timestamp`、`text`、`errname`、`errno`、`unknown1`、`unknown2`、`unknown3`和的值`line`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:03:51.360

```
use Storable;

# fill my hash
store \%hash, 'file';

%hash = ();
%hash = %{retrieve('file')};
# print my hash 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:57:09.777

您始终可以使用 KiokuDB、Storable 或我们拥有的任何东西，但如果您打算进行聚合，从长远来看，使用关系数据库（或一些支持查询的数据存储）可能是最好的解决方案。具有 SQLite 等 SQL 引擎且不需要运行数据库服务器的轻量级数据存储可能是一个很好的起点。`

# python - matplotlib 条形图中高度为零的强制箱

> ID：10211208
> 
> 赞同：5
> 
> 时间：2012-04-18T14:11:44.723
> 
> 标签：python, matplotlib

考虑以下脚本：

```
import pylab
counts = [0,0,0,125,56,0,0,0,34,77,123,0,0,0]
pylab.bar(*zip(*enumerate(counts)), align='center')
pylab.show() 
```

当我运行它时，我得到以下图像。 ![条形图](../Images/ad23e87929b9aaea4d148570f379a1fe.png)

如您所见，未绘制绘图边缘的 0 高度箱。但是，我确实希望它们被绘制出来。我能做些什么来实现这一目标？

我知道我可以设置轴 ( `Axes.set_xlim`) 的 x_lim。如果不存在其他选项，那么哪种方法最优雅地考虑了条的宽度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T14:39:01.783

一种方法类似于以下内容：

```
import pylab
counts = [0,0,0,125,56,0,0,0,34,77,123,0,0,0]
artists = pylab.bar(*zip(*enumerate(counts)), align='center')

lefts = [item.get_x() for item in artists]
rights = [item.get_x() + item.get_width() for item in artists]
pylab.xlim([min(lefts), max(rights)])

pylab.show() 
```

![在此处输入图像描述](../Images/7b0df322f9cc8f95a2eba29f9ff5306f.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T14:41:09.850

找到了另一种可能比以下更可靠的解决方案`set_xlim`：

```
import pylab
counts = [0,0,0,125,56,0,0,0,34,77,123,0,0,0]
# add a epsilon to counts to force bins to be plotted
epsilon = 1e-7
counts = [x+epsilon for x in counts]
pylab.bar(*zip(*enumerate(counts)), align='center')
pylab.show() 
```

![条形图](../Images/4928230930968b23bd43bd29fd53bca9.png)

# ant - 不想在使用 ANT 制作 EAR 文件时制作 application.xml 文件

> ID：10211211
> 
> 赞同：0
> 
> 时间：2012-04-18T14:11:57.400
> 
> 标签：ant, build, ear

我不想在耳标中包含或制作 application.xml

我怎样才能关闭这个参数

```
<ear earfile="${builddir}/myapp.ear"
appxml="ear_deploy_descriptor/application.xml"
basedir="${builddir}"
includes="*.jar,*.war"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:12:30.277

[请参阅http://ant.apache.org/manual/Tasks/ear.html](http://ant.apache.org/manual/Tasks/ear.html)上的 earTask 文档。如果您指定**update="true"**，则**不需要 appxml**属性。

Java EE 5 应用程序不需要在 EAR 文件中提供 application.xml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T13:29:46.657

处理此问题时，ANT 似乎存在问题。这是在这里报告的：[https ://issues.apache.org/bugzilla/show_bug.cgi?id=51761](https://issues.apache.org/bugzilla/show_bug.cgi?id=51761)

尝试使用 jar 任务而不是 ear，它应该可以工作。

```
<jar destfile="${builddir}/myapp.ear"
basedir="${builddir}"
includes="*.jar,*.war"/> 
```

# c# - 在 devexpress gridview 模板 DetailRow 中查找控件

> ID：10211213
> 
> 赞同：1
> 
> 时间：2012-04-18T14:11:58.293
> 
> 标签：c#, asp.net, .net, gridview, findcontrol

我想通过 id 在我的 gridview.Template 详细信息行中找到控件

```
 bool IsAllAud = false;
        var item = (CheckBox)VendorsGrid.Templates.DetailRow.FindControl("CBIsAllAudience");
        IsAllAud = item.Checked;
        if (IsAllAud)
        {

        } 
```

```
<dx:ASPxGridView ID="rt" ClientInstanceName="rt" runat="server"
            AutoGenerateColumns="false" DataSourceID="rtt" KeyFieldName="ID" Width="100%">
            <SettingsDetail AllowOnlyOneMasterRowExpanded="true" />
            <Columns>
                <dx:GridViewDataTextColumn FieldName="Name" Caption="Name" />
            </Columns>
            <Templates>
                <DetailRow>
                    <asp:CheckBox ID="CBIsAllAudience" runat="server" />
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:02:42.477

由于这是 DetailRow，您需要调用[ASPxGridView.FindDetailRowTemplateControl 方法](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_FindDetailRowTemplateControltopic)

var item = VendorsGrid.FindDetailRowTemplateControl(index, "CBIsAllAudience");

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:08:17.677

在控制事件中只写这段代码

```
{
 for (int i = 0; i < gvVndInvoiceDevExp.VisibleRowCount ; i++)
            {
                GridViewDataColumn col1 = gvVndInvoiceDevExp.Columns[0] as GridViewDataColumn;
                GridViewDataColumn col2 = gvVndInvoiceDevExp.Columns[8] as GridViewDataColumn;
                CheckBox chk = gvVndInvoiceDevExp.FindRowCellTemplateControl(i, col1, "chk") as CheckBox;
                ASPxCheckBox chkIsVal = gvVndInvoiceDevExp.FindRowCellTemplateControl(i, col2, "chkIsVal") as ASPxCheckBox;

                if (chk.Checked == true)
                {
                    chkIsVal.Enabled = true;

                }
                else
                {
                    chkIsVal.Enabled = false;

                }

            }
} 
```

# ruby-on-rails - 使用日期时，我可以用 nil 值做什么？

> ID：10211220
> 
> 赞同：1
> 
> 时间：2012-04-18T14:12:13.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我的数据库中有一个带有日期字段的对象，但有时它会为零。视图中有没有办法可以将其显示为字符串值。可能是 TBA 之类的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T14:14:05.223

`<%= @event.date || "TBA" %>`应该这样做。

作为对您的评论的回应，是的，您可以在模型中执行此操作，但这是一个坏主意。为什么？

首先，它是关于数据的呈现，因此它属于视图。

其次，它可能会破坏事物。如果您在模型中执行此操作，`@event.date`有时会返回日期，有时会返回字符串。如果你打电话给你会`@event.date.hour`发生`date`什么`"TBA"`？你会得到一个错误。唯一的解决办法是到处检查它，这太可怕了。

如果你真的要做很多，你可以创建一个辅助方法`application_helper.rb`，看起来像这样：

```
def date_or_tba(date)
  date || "TBA"
end 
```

所以你可以在你的视图中写：

```
<%= date_or_tba @event.date %> 
```

这并没有少多少打字，但具有将字符串“TBA”的使用限制在一个地方的不可忽视的优势——这意味着如果你需要更改它（例如用于 I18n 目的）——这真的很容易。

# c# - Visual Studio 设计器视图无法获得正确的形式

> ID：10211223
> 
> 赞同：2
> 
> 时间：2012-04-18T14:12:19.477
> 
> 标签：c#, winforms, visual-studio-2010, windows-forms-designer

我在 C# 中有 GUI 项目。主窗口类的定义如下所示：

FormView.cs 文件

```
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace RssReader
{
    partial class FormView : Form, IView
    {
        private SplitContainer MainContainer;
        private TreeView Items;
        private MenuStrip MainMenu;
        private ToolStripMenuItem File;
        private ToolStripMenuItem AddFeed;
        private ToolStripSeparator Separator;
        private ToolStripMenuItem Quit;
        private WebBrowser Message;

        /* some methods here which are implementing some kind of logic */
    } 
} 
```

FormViewInit.cs 文件

```
namespace RssReader
{
    partial class FormView
    {
        private void InitializeComponent()
        {
            this.MainContainer = new System.Windows.Forms.SplitContainer();
            this.Items = new System.Windows.Forms.TreeView();
            this.Message = new System.Windows.Forms.WebBrowser();
            this.MainMenu = new System.Windows.Forms.MenuStrip();
            this.File = new System.Windows.Forms.ToolStripMenuItem();
            this.AddFeed = new System.Windows.Forms.ToolStripMenuItem();
            this.Separator = new System.Windows.Forms.ToolStripSeparator();
            this.Quit = new System.Windows.Forms.ToolStripMenuItem();

            // the only component in this file is InitializeComponent method
            // all, what it does is just defining items on the form
            // and initializing it, i.e., creating instances, assign names etc.
        }
    }
} 
```

FormViewEventHandlers.cs 文件

```
using System;
using System.IO;
using System.Windows.Forms;

namespace RssReader
{
    partial class FormView
    {

        private void Quit_Click(object sender, EventArgs e)
        {
            if (MessageBox.Show("Do you really want to quit?", "Exit", MessageBoxButtons.YesNo)
                == DialogResult.Yes)
                Application.Exit();
        }

        // here goes event handler functions
    }
} 
```

问题是：当我尝试在 Visual Studio 2010 的设计视图中查看 FormView.cs 时，为什么我得到一个尺寸错误且没有元素的表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:15:14.403

您的 FormView 中有构造函数吗？如果是，是否调用了 InitializeComponent() 方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:18:47.297

表单必须是一个`public`类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T11:20:32.253

通过将元素定义移动到 FormViewInit.cs 文件（具有 InitializeComponent 方法的文件）中解决。

文件看起来有问题之前的样子。文件现在的样子：

```
public partial class FormView
{
    private System.ComponentModel.IContainer components = null;

    private SplitContainer MainContainer;
    private TreeView Items;
    private MenuStrip MainMenu;
    private ToolStripMenuItem File;
    private ToolStripMenuItem AddFeed;
    private ToolStripSeparator Separator;
    private ToolStripMenuItem Quit;
    private ContextMenuStrip ContextMenu;
    private ToolStripMenuItem RemoveItem;
    private WebBrowser Message;

    protected void InitializeComponent()
    {
        this.components = new System.ComponentModel.Container();
        this.MainContainer = new System.Windows.Forms.SplitContainer();
        this.Items = new System.Windows.Forms.TreeView();
        this.Message = new System.Windows.Forms.WebBrowser();
        this.MainMenu = new System.Windows.Forms.MenuStrip();
        this.File = new System.Windows.Forms.ToolStripMenuItem();
        this.AddFeed = new System.Windows.Forms.ToolStripMenuItem();
        this.Separator = new System.Windows.Forms.ToolStripSeparator();
        this.Quit = new System.Windows.Forms.ToolStripMenuItem();
        this.ContextMenu = new System.Windows.Forms.ContextMenuStrip(this.components);
        this.RemoveItem = new System.Windows.Forms.ToolStripMenuItem();
        this.MainContainer.Panel1.SuspendLayout();
        this.MainContainer.Panel2.SuspendLayout();
        this.MainContainer.SuspendLayout();
        this.MainMenu.SuspendLayout();
        this.ContextMenu.SuspendLayout();
        this.SuspendLayout();

        /*  there goes properties initializing, like setting names, sizes etc  */
    }

    // Added just in case

    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }
} 
```

您应该在设计器模式下查看 FormViewInit.cs 文件，而不是 FormView.cs

# c# - 重新计算 SQL 数据库中的大表

> ID：10211230
> 
> 赞同：3
> 
> 时间：2012-04-18T14:12:45.117
> 
> 标签：c#, .net, sql-server-2008-r2

我们正在解决这个问题：

*   我们在`SQL Server 2008 R2`（R2 ！）中有一个大表（数百万行）
*   我们需要遍历这个表，每一行都需要通过`C#`代码重新计算（所以表是从`C#`应用程序加载的）

如果性能至关重要，如何做到这一点？某种批处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:18:11.877

如果性能至关重要，请使用 SQL CLR 计算新值。您可以这样使用更新语句。SQL CLR 对您可以使用的代码设置了限制，因此这可能不是一个简单的选择。

如果 SQL CLR 不是一个选项，还有另一种方法：

我假设有一个整数主键。我会这样做：

*   请求一批行（10k 左右）
*   计算更新
*   发送更新
*   重复

诀窍是跟踪您已经处理了哪些行。保留处理的最后一行的 ID 值。请求这样的批次：

```
select top 10000 *
from T
where ID > @lastIDProcessed
order by ID 
```

这将保证快速可靠的执行。

# git - 带有多个分支的 Git pull - 与错误的分支合并

> ID：10211234
> 
> 赞同：2
> 
> 时间：2012-04-18T14:12:59.807
> 
> 标签：git, git-pull

我的设置是：

```
$ git remote show origin
* remote origin
  Fetch URL: ssh://repo.xxx/project.git
  Push  URL: ssh://repo.xxx/project.git
  HEAD branch: master
  Remote branches:
    test  tracked
    test2 tracked
  Local refs configured for 'git push':
    test  pushes to test  (up to date)
    test2 pushes to test2 (up to date) 
```

我在分支 test2 上，我添加了一个新文件，提交并推送。现在我签出“测试”分支并发出 git pull：

```
touch file.txt
git add file.txt
git commit -m "file.txt"
git push

Counting objects: 3, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 241 bytes, done.
Total 2 (delta 0), reused 0 (delta 0)
To ssh://repo.xxx/project.git
   98dd105..fbbd238  test2 -> test2

git checkout test
git pull 
```

突然'test2' 分支的内容被合并到我当前的'test' 分支中。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:29:39.387

'git pull --help' 的文档描述了如何确定要合并的远程分支：

> 在获取后确定要合并哪个远程分支的规则有点涉及，以免破坏向后兼容性。

```
 If explicit refspecs were given on the command line of git pull, they are all merged.

   When no refspec was given on the command line, then git pull uses the refspec from the configuration
   or $GIT_DIR/remotes/<origin>. In such cases, the following rules apply:

    1\. If branch.<name>.merge configuration for the current branch <name> exists, that is the name of
       the branch at the remote site that is merged.

    2\. If the refspec is a globbing one, nothing is merged.

    3\. Otherwise the remote branch of the first refspec is merged. 
```

根据您的描述，案例 1 似乎不适用，因为如果它适用，那么 'git remote show ...' 将在“为 'git pull' 配置的本地分支：”行下列出分支。因此，当您在分支“test”上时，案例 3 必须匹配“origin/test2”。

当然，你可以通过明确本地和远程分支之间的映射来避免这个问题。采用：

```
$ git branch --set-upstream test origin/test
$ <similar for test2> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:20:10.147

`git pull`相当于运行`git fetch & git merge`您不向它传递任何参数，因此它连接到原点并获得两个分支并将其合并到您当前的分支中。

您可以`git fetch & git merge origin/test1`在本地 test1 分支上使用 while ，也可以使用`git pull origin test1`. 我更喜欢第一个，因为我可以在获取时看到远程发生的变化。

# c# - 更改图片框中背景图像的大小模式

> ID：10211237
> 
> 赞同：6
> 
> 时间：2012-04-18T14:13:04.813
> 
> 标签：c#, winforms, background-image, picturebox, image-resizing

我的目标是更改背景图像并将其 SizeMode 设置为 Stretch。到目前为止尝试了很多，有什么想法吗？

编辑：我正在使用 C# 表单应用程序。尝试简单地设置 bg 图片的大小模式：

```
picturebox1.BackgroundImage = Properties.Resources.Image;
picturebox1.SizeMode = PictureBoxSizeMode.StretchImage; 
```

试图绕过它...没有成功...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T14:19:59.170

看看[BackgroundImageLayout](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.backgroundimagelayout.aspx)。
例子：

```
whatever.BackgroundImageLayout = ImageLayout.Stretch 
```

# java - 针对 XSD 的 XML 验证：cvc-elt.1：找不到元素“xxx”的声明

> ID：10211238
> 
> 赞同：0
> 
> 时间：2012-04-18T14:13:05.583
> 
> 标签：java, xml, xsd

我有以下 XML 文件：

```
<?xml version="1.0"?>
<!DOCTYPE library SYSTEM "library.dtd">
<library
xmlns="http://example.com/a"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://example.com library.xsd"
name=".NET Developer's Library">
<book>
<category>computerss</category>
<title>Programming Microsoft .NET</title>
<author>Jeff Prosise</author>
<isbn>0-7356-1376-1</isbn>
</book>
<book>
<category>computer</category>
<title>Microsoft .NET for Programmers</title>
<author>Fergal Grimes</author>
<isbn>1-930110-19-7</isbn>
</book>
</library> 
```

以及以下 Java 代码：

```
DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
SchemaFactory sf = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
docBuilderFactory.setSchema(sf.newSchema(new File("library.xsd")));
docBuilderFactory.setNamespaceAware(true);
DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
docBuilder.parse(new FileInputStream("data.xml")); 
```

它产生以下错误：

`[Error] :7:33: cvc-elt.1: Cannot find the declaration of element 'library'.`

如果我删除 XML 文件中的 XSD 声明一切正常...

任何内部高度赞赏。谢谢。

这是架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="library">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="book" maxOccurs="unbounded"/>
            </xs:sequence>
            <xs:attribute name="name" type="xs:string" use="optional"/>
        </xs:complexType>
    </xs:element>
    <xs:element name="book">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="category"/>
                <xs:element ref="title"/>
                <xs:element ref="author"/>
                <xs:element ref="isbn"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:element  name="category">
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <xs:enumeration value="computer" />
            <xs:enumeration value="poetry" />
        </xs:restriction>
    </xs:simpleType>
    </xs:element>
    <xs:element name="title" type="xs:string"/>
    <xs:element name="author" type="xs:string"/>
    <xs:element name="isbn" type="xs:string"/>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:22:59.317

您的 XML 引用了命名空间 (xmlns="http://example.com/a")，这与您的架构中的不同。您是否尝试过在任何 XML 编辑器（例如 Altova 或 Eclipse 等）中针对模式验证您的 XML。

到目前为止，您的解析错误似乎是合法的，根据架构，XML 无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:44:20.023

您的架构定义不正确。首先，正如 maximdim 所说，您的架构在架构标记中没有`targetNamespace="http://mysite.com/a"`属性。

其次，您的架构看起来好像应该只有一个根元素，而您的有 6 个。

您的 XML 实例的正确架构是：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://mysite.com/a" targetNamespace="http://mysite.com/a">

  <xs:element name="library">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="book" type="book" maxOccurs="unbounded" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:complexType name="book">
    <xs:sequence>
      <xs:element name="category">
        <xs:simpleType>
          <xs:restriction base="xs:string">
            <xs:enumeration value="computer" />
            <xs:enumeration value="poetry" />
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
      <xs:element name="title" type="xs:string"/>
      <xs:element name="author" type="xs:string"/>
      <xs:element name="isbn" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>

</xs:schema> 
```

# iphone - UIScrollView 添加的子视图但不能滑动到它们

> ID：10211242
> 
> 赞同：0
> 
> 时间：2012-04-18T14:13:16.560
> 
> 标签：iphone, objective-c, ios

```
- (void)viewDidLoad
{
MyData *data = [MyData SharedData];

scrollerView.pagingEnabled = YES;
scrollerView.bounces = YES;

int numberOfViews = [data.placePhotos count];
for (int i = 0; i < numberOfViews; i++) {

    CGFloat yOrigin = i * self.view.frame.size.width;
    UIView *awesomeView = [[UIView alloc] initWithFrame:CGRectMake(yOrigin, 0, self.view.frame.size.width, self.view.frame.size.height)];
    awesomeView.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:1];

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 0, 300 , 320)];

    NSString * photourl = [[data.placePhotos objectAtIndex:i] stringByReplacingOccurrencesOfString:@"150x75" withString:@"440x440"];

    [imageView setImageWithURL:[NSURL URLWithString:photourl]];
    [awesomeView addSubview:imageView];

    [scrollerView addSubview:awesomeView];
    awesomeView = nil;
    imageView =nil;
} 
```

我在 .xib 文件中添加了 UIScrollView，当我尝试从左到右拉动滚动视图时它不会移动，我添加了 4 个子视图但为什么我无法查看它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:16:15.877

你应该设置滚动视图的内容大小

```
 [self. scrollerView setContentSize:CGSizeMake(320, 1000)]; 
```

给你的宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:37:31.180

在循环之后添加（即使我对为什么在您的代码`scrollerView.contentSize = CGSizeMake(yOrigin + self.view.frame.size.width, scrollerView.frame.size.height);`中调用 x-origin 有点困惑......）`yOrigin`

# python - 从列表中创建元组列表

> ID：10211243
> 
> 赞同：1
> 
> 时间：2012-04-18T14:13:21.410
> 
> 标签：python

我有一个清单，例如：

```
data=['January', 'February', 'March',
      2007, 2008, 2009,
      'value1', 'value2', 'value3'] 
```

现在我需要按以下格式创建元组列表

```
[('January', 2007,'value1'),('February', '2007','value2'),('March', 2007,'value3'),
('January', 2008,'value1'),('February', 2008,'value2'),('March', 2008,'value3'),
('January', 2009,'value1'),('February', 2009,'value2'),('March', 2009,'value3')] 
```

请告诉我这个概念

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:22:39.673

有很多解决方案，因为您的问题对您想要的内容有点模棱两可，以下是我建议的解决方案。

无论您想要什么，第一步是将列表拆分为独立的列表。最干净的方法是使用生成器（对于生成器，还有[其他方法](https://stackoverflow.com/a/312644/722121)可以做到这一点，而不是列表，但对于您的用例来说，这是矫枉过正的）：

```
def segments(l, n):
    for i in range(0, len(l), n): #Use xrange in python 2.x
        yield l[i:i+n] 
```

尽管完全可以使用生成器表达式，但它的可读性并不高：

```
(data[y:y+3] for y in range(0, len(data), 3)) 
```

无论我在哪里使用`segments(data, 3)`，您都可以使用这个生成器表达式，但我会坚持使用更易读的版本。

如果你想要匹配的输出`(month, year, value)`，那么答案很简单：

```
list(zip(*segments(data, 3)) #No need to use list() in 2.x 
```

产生：

```
[('January', 2007, 'value1'), ('Febraury', 2008, 'value2'), ('March', 2009, 'value3')] 
```

我们将三个列表解压缩为参数`zip()`，其中为我们提供了一个`(month, year, value)`项目生成器。

如果您想要所有的组合，`(month, year, value)`那么您可以使用`itertools.product()`：

```
from itertools import product
...
list(product(*segments(data, 3)) 
```

如您的输出所示，如果您只想要与值和年份相关的月份的集合产品，那么您将需要：

```
from itertools import product
...
months, years, values = segments(data, 3)
[(month, year, value) for ((month, value), year) in product(zip(months, values), years)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:26:54.913

就像是：

```
>>> l1 = ['January', 'February', 'March']
>>> l2 = [2007,2008,2009]
>>> l3 = ['value1','value2','value3']
>>> for year in l2:
...     print zip(l1, [year] * len(l1), l3)
...
[('January', 2007, 'value1'), ('February', 2007, 'value2'), ('March', 2007, 'value3')]
[('January', 2008, 'value1'), ('February', 2008, 'value2'), ('March', 2008, 'value3')]
[('January', 2009, 'value1'), ('February', 2009, 'value2'), ('March', 2009, 'value3')] 
```

将给定列表拆分为树段作为 OP 的练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T16:05:19.907

```
>>> from itertools import product,cycle
>>> data = ['January','February','March', 2007,2008,2009,'value1','value2','value3']
>>> block = 3
>>> months,years,values = zip(*[iter(data)]*block)
>>> [(m,y,v) for (y,m),v in zip(product(years,months),cycle(values))]
[('January', 2007, 'value1'), ('February', 2007, 'value2'), ('March', 2007, 'value3'),
 ('January', 2008, 'value1'), ('February', 2008, 'value2'), ('March', 2008, 'value3'), 
 ('January', 2009, 'value1'), ('February', 2009, 'value2'), ('March', 2009, 'value3')] 
```

# php - 从 Amazon S3 流式传输私有视频

> ID：10211245
> 
> 赞同：0
> 
> 时间：2012-04-18T14:13:25.007
> 
> 标签：php, amazon-s3, video-streaming, wordpress

我需要在我的 wordpress 博客上显示上传到我的 Amazon S3 帐户的 ACL:PRIVATE 的视频/图像文件。

我是基于 PHP oops 的编码的新手。任何脚本帮助、链接参考、免费插件甚至逻辑算法都会有很大帮助:)

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T10:14:31.810

这个问题可以通过执行以下步骤来解决：

1.  [从这里](http://aws.amazon.com/sdkforphp/)下载最新的稳定版 SDK
2.  提取 .zip 文件并放在`wamp/www`文件夹中
3.  将 config-sample.inc.php 文件重命名为**config.inc.php**
4.  将**访问密钥和密钥**（从 Amazon S3 帐户检索）添加到上述文件中，保存并退出
5.  创建示例文件以显示来自 Amazon S3 的公共/私有对象

该文件的内容应如下所示：

```
require('sdk.class.php');
require('services/s3.class.php');

$s3 = new AmazonS3();
$bucket = "bucketname";
$temp_link = $s3->get_object_url($bucket, 'your/folder/path/img.jpg', '5 minute');

echo $temp_link; 
```

在上面的代码中，您收到的输出 URL 是您的私有对象的签名 URL，因此它仅在 5 分钟内有效。

您可以授予未来某个日期的访问权限，并只允许授权用户访问您在 Amazon S3 上的私有内容或媒体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T07:40:18.673

这个问题有点老了，但无论如何我都会发布它。我今天有一个类似的问题，发现有一个简单的答案。

aws doc 清楚地解释了它并有一个例子。

[http://docs.aws.amazon.com/aws-sdk-php-2/guide/latest/service-s3.html#amazon-s3-stream-wrapper](http://docs.aws.amazon.com/aws-sdk-php-2/guide/latest/service-s3.html#amazon-s3-stream-wrapper)

基本上，您需要注册 AWS 的流包装器并使用 s3:// 协议。

这是我的代码示例。

```
use Aws\Common\Aws;
use Aws\S3\Enum\CannedAcl;
use Aws\S3\Exception\S3Exception;

$s3 = Aws::factory(array(
    'key'    => Config::get('aws.key'),
    'secret' => Config::get('aws.secret'),
    'region' => Config::get('aws.region')
))->get('s3');

$s3->registerStreamWrapper();

// now read file from s3
// from the doc.

// Open a stream in read-only mode
if ($stream = fopen('s3://bucket/key', 'r')) {
    // While the stream is still open
    while (!feof($stream)) {
        // Read 1024 bytes from the stream
        echo fread($stream, 1024);
    }
    // Be sure to close the stream resource when you're done with it
    fclose($stream);
} 
```

# php - 如何从 ChoiceListInterface 类中访问 Doctrine？

> ID：10211247
> 
> 赞同：1
> 
> 时间：2012-04-18T14:13:25.560
> 
> 标签：php, symfony, doctrine-orm

我需要根据我的一个实体类中包含的信息填充选择列表，但我无法从扩展 ChoiceListInterface 的类中访问 Doctrine。如何从类中查询正确的实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:19:29.497

您应该使用/扩展 EntityChoiceList 接口！

Symfony\Bridge\Doctrine\Form\ChoiceList\EntityChoiceList

# c - errno 值未更新

> ID：10211248
> 
> 赞同：2
> 
> 时间：2012-04-18T14:13:26.270
> 
> 标签：c, errno

如果在连续调用套接字函数期间未更新 errno 值，问题可能会发生什么？

```
socket (AF_INET, -1, 0);
socket (AF_INET, SOCK_STREAM, -1); 
```

第一个应该有 errno = EINVAL 第二个应该有 errno = EPROTONOSUPPORT

* * *

从@JonathanLeffler 下面提供的代码中，cygwin 的输出如下：

```
*$ ./socket.exe
Error from socket(AF_INET, -1, 0): 124 (Socket type not supported)
-- errno = 124 (Socket type not supported)
Error from socket(AF_INET, SOCK_STREAM, -1): 123 (Protocol not supported)
-- errno = 123 (Protocol not supported)
socket(AF_INET, SOCK_STREAM, 0) succeeded (fd = 3)
-- errno = 123 (Protocol not supported)* 
```

* * *

在创建套接字之前，编辑了下面的上述代码以创建套接字 fd0

```
int fd0 = socket(AF_INET, SOCK_STREAM, 0);
if (fd0 < 0)
    printf("Error from socket(AF_INET, SOCK_STREAM, 0): %d (%s)\n", errno, strerror(errno));
else
{
    printf("socket(AF_INET, SOCK_STREAM, 0) succeeded (fd = %d)\n", fd0);
    close(fd0);
}
printf("-- errno = %d (%s)\n", errno, strerror(errno));

int fd1 = socket(AF_INET, -1, 0);
..... 
```

结果如下：

```
*$ ./socket.exe
socket(AF_INET, SOCK_STREAM, 0) succeeded (fd = 3)
-- errno = 0 (No error)
Error from socket(AF_INET, -1, 0): 124 (Socket type not supported)
-- errno = 124 (Socket type not supported)
Error from socket(AF_INET, SOCK_STREAM, -1): 123 (Protocol not supported)
-- errno = 123 (Protocol not supported)
socket(AF_INET, SOCK_STREAM, 0) succeeded (fd = 3)
-- errno = 123 (Protocol not supported)* 
```

* * *

预计第一个和最后一个套接字创建应该具有相同的 errno 值。

* * *

但是如何解释这个输出呢？第 5 和第 6 个套接字创建具有相同的 errno 值，但错误原因不同。

```
$ ./test_select.exe
[1] ierr = 124, iSocket = -1 socket(AF_INET, -1, 0);
 : Socket type not supported
[2] ierr = 124, iSocket = -1 socket(AF_INET, -1, 0);
 : Socket type not supported
[3] ierr = 124, iSocket = 3 socket(AF_INET, SOCK_STREAM, 0);
 : Socket type not supported
[4] ierr = 124, iSocket = -1 socket (AF_INET, -1, 0);
 : Socket type not supported
[5] ierr = 123, iSocket = -1 socket (AF_INET, SOCK_STREAM, -1);
 : Protocol not supported
[6] ierr = 123, iSocket = -1 socket (AF_INET, -1, 0)
 : Protocol not supported
[7] ierr = 124, iSocket = -1 socket(AF_INET, SOCK_STREAM, -1)
 : Protocol not supported 
```

实际代码如下：

```
 sockfd = socket(AF_INET, -1, 0);
    err = errno;
    printf("[1] err = %d, sockfd = %d socket(AF_INET, -1, 0);\n", err, sockfd);
    perror(" ");
    sockfd = socket(AF_INET, -1, 0);
     err = errno;
    printf("[2] err = %d, sockfd = %d socket(AF_INET, -1, 0);\n", err, sockfd);
    perror(" ");
     sockfd = socket(AF_INET, SOCK_STREAM, 0);
    err = errno;
    printf("[3] err = %d, sockfd = %d socket(AF_INET, SOCK_STREAM, 0);\n", err, sockfd);
    perror(" ");
    close(sockfd);
    sockfd = socket(AF_INET, -1, 0);
    err = errno;
    printf("[4] err = %d, sockfd = %d socket (AF_INET, -1, 0);\n", err, sockfd);
    perror(" ");
    sockfd = socket(AF_INET, SOCK_STREAM, -1);
    err = errno;
    printf("[5] err = %d, sockfd = %d socket (AF_INET, SOCK_STREAM, -1);\n", err, sockfd);
    perror(" ");
    sockfd = socket(AF_INET, -1, 0);
    err = errno;
    printf("[6] err = %d, sockfd = %d socket (AF_INET, -1, 0)\n", err, sockfd);
    perror(" ");
    err = errno;
    sockfd = socket(AF_INET, SOCK_STREAM, -1);
    printf("[7] err = %d, sockfd = %d socket(AF_INET, SOCK_STREAM, -1)\n", err, sockfd);
    perror(" "); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T14:18:23.297

`errno`不会被标准库函数清除，只会设置。此外，它可以由任何未以其他方式记录以禁止该行为的标准库函数虚假设置。

本质上，唯一正确的使用方法`errno`是仅在标准库函数*返回指示错误的值*后立即检查它，并将其保存在另一个变量中，如果您需要保留它以备后用。

对于`select`大多数系统调用，指示错误的返回值为 -1，这意味着您应该只检查`errno`它是否返回 -1。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-18T14:19:35.510

没有库函数设置`errno`为零。如果你想让它归零，你的程序必须这样做。

`errno`只有当一个函数说它失败时，你才能有意义地测试信息（即使那样，只有当它的手册页表明它设置了`errno`）。您可以通过成功的功能找到`errno`设置为非零。例如，在 Solaris 上，`errno`当写入文件而不是终端时，您经常会在标准 I/O 调用之后找到 ENOTTY。

在您的示例中，无法保证给定的对函数的错误调用将设置多个可能的错误值中的哪一个。只要报告了一个有效的错误条件，系统就可以决定它报告哪个错误。因此，您需要给出一个令人信服的示例，说明为什么第二次调用应该返回 EINVAL 而不是 EBADF；您所写的问题没有包含足够的信息来让我们发表意见。

另请注意，唯一安全的声明方法`errno`是通过标头：`#include <errno.h>`. 特别是在线程环境中，它通常不是简单`extern int errno;`的 . 例如，在 Mac OS X 上，它可以定义为：

```
extern int * __error(void);
#define errno (*__error()) 
```

也就是说，`__error`是一个返回指向整数的指针的函数，并且`errno`是一个取消引用该指针的宏，成为一个可修改的左值。

* * *

### 代码分析

给定的代码是：

```
socket (AF_INET, -1, 0);
socket (AF_INET, SOCK_STREAM, -1); 
```

转换成可运行的代码，这可能变成：

```
#include <errno.h>
#include <stdio.h>
#include <string.h>
#include <sys/socket.h>
#include <unistd.h>

int main(void)
{
    int fd1 = socket(AF_INET, -1, 0);
    if (fd1 < 0)
        printf("Error from socket(AF_INET, -1, 0): %d (%s)\n", errno, strerror(errno));
    else
    {
        printf("socket(AF_INET, -1, 0) succeeded (fd = %d)\n", fd1);
        close(fd1);
    }
    printf("-- errno = %d (%s)\n", errno, strerror(errno));

    int fd2 = socket(AF_INET, SOCK_STREAM, -1);
    if (fd2 < 0)
        printf("Error from socket(AF_INET, SOCK_STREAM, -1): %d (%s)\n", errno, strerror(errno));
    else
    {
        printf("socket(AF_INET, SOCK_STREAM, -1) succeeded (fd = %d)\n", fd2);
        close(fd2);
    }
    printf("-- errno = %d (%s)\n", errno, strerror(errno));

    int fd3 = socket(AF_INET, SOCK_STREAM, 0);
    if (fd3 < 0)
        printf("Error from socket(AF_INET, SOCK_STREAM, 0): %d (%s)\n", errno, strerror(errno));
    else
    {
        printf("socket(AF_INET, SOCK_STREAM, 0) succeeded (fd = %d)\n", fd3);
        close(fd3);
    }
    printf("-- errno = %d (%s)\n", errno, strerror(errno));

    return(0);
} 
```

在 Mac OS X 10.7.3 上运行，这会产生：

```
Error from socket(AF_INET, -1, 0): 43 (Protocol not supported)
-- errno = 43 (Protocol not supported)
Error from socket(AF_INET, SOCK_STREAM, -1): 43 (Protocol not supported)
-- errno = 43 (Protocol not supported)
socket(AF_INET, SOCK_STREAM, 0) succeeded (fd = 3)
-- errno = 43 (Protocol not supported) 
```

正如我之前所说，返回的错误取决于系统。

# hibernate - NHibernate中的继承和多态我如何获取实际实例

> ID：10211249
> 
> 赞同：0
> 
> 时间：2012-04-18T14:13:27.313
> 
> 标签：hibernate, nhibernate

这是这种情况。我有 4 个表和类，Order、OrderItem、Product 和 Cristal。

Product 是 Cristal 的具体类和基类。我正在测试插入一个 Cristal，然后将其作为产品检索，产生一个 Cristal istance。到目前为止，一切都很好。

现在的问题。我在“产品”属性中保留包含产品和水晶实例的项目的订单。当我从数据库中检索 Order 对象时，OrderItem 实例中的 Product 属性始终是 Product 实例。哪里必须是 Cristal，有一个 Product 正确加载了公共字段，但显然，我无法访问特定的 Cristal 字段。

我怎样才能解决这个问题？提前致谢！

**Products 及其子类 Cristal 的映射**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
       assembly="MyNamespace"
       namespace="MyNamespace">
  <class name="Product" table="Products">
    <id name="Id" column="id">
      <generator class="guid.comb" />
    </id>
    <property name="Name" column="name" type="string" not-null="true" />
    <property name="Code" column="code" type="string" not-null="true" />

    <union-subclass name="Cristal" table="Cristals">
      <property name="Esf" column="esf" precision="5" scale="3" not-null="true" />
      <property name="Cil" column="cil" precision="5" scale="3" not-null="true" />
      <property name="Diameter" column="diameter" type="int" not-null="true" />
    </union-subclass>
  </class>
</hibernate-mapping> 
```

**订单映射**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
               assembly="MyNamespace"
               namespace="MyNamespace">
  <class name="Order" table="Orders">
    <id name="Id" column="id">
      <generator class="guid.comb" />
    </id>
    <property name="Number" column="number" type="int" not-null="true" />
    <set name="Items" cascade="all-delete-orphan" inverse="true">
      <key column="idOrder" not-null="true" />
      <one-to-many class="OrderItem"/>
    </set>
  </class>
</hibernate-mapping> 
```

**OrderItem 的映射**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
               assembly="MyNamespace"
               namespace="MyNamespace">
  <class name="OrderItem" table="OrderItems">
    <id name="Id" column="id">
      <generator class="guid.comb" />
    </id>

    <property name="Price" column="price" precision="15" scale="3" not-null="true" />
    <many-to-one name="Order" column="idOrder" foreign-key="FK_OrderItems" not-null="true"  />
    <many-to-one name="Product" column="idProduct" foreign-key="FK_ProductOrderItems"  />

   </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:20:06.263

自从我使用 NHibernate 以来已经有一段时间了，但我想我知道问题可能出在哪里。

由于 Product 是一个具体的类，NHibernate 不会寻找任何 Cristals。也就是说，NHibernate 不会在连接中包含 Cristal。创建一个抽象基类 (ProductBase) 和两个具体实现，一个用于 Product，另一个用于 Cristal。

# excel - 计算机被锁定时如何发送电子邮件？

> ID：10211250
> 
> 赞同：12
> 
> 时间：2012-04-18T14:13:30.850
> 
> 标签：excel, vba, email, outlook, scheduled-tasks

我想使用 Excel VBA 发送 Outlook 电子邮件。

该代码`Sendupdate`在手动运行时有效。

我的第二个宏旨`StartTimer`在在我不在办公桌前的设定时间执行上述操作。

当计算机被锁定时，电子邮件不会发送。当我回到办公桌前，电子邮件作为草稿挂在那里，我需要单击`send`按钮。

```
Sub SendUpdate()
    Recipient = "x@y.com"
    Subj = "update"
    Dim msg As String
    msg = "hello”

    HLink = "mailto:" & Recipient & "?"
    HLink = HLink & "subject=" & Subj & "&"
    HLink = HLink & "body=" & msg
    ActiveWorkbook.FollowHyperlink (HLink)
        Application.Wait (Now + TimeValue("0:00:01"))
        Application.SendKeys "%s"
    End Sub

    Sub StartTimer()
    Application.OnTime TimeValue("18:00:00"), "SendUpdate"

End Sub 
```

有没有办法确保电子邮件被推送？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-18T15:32:44.413

我将分 3 步打破这个“教程”

1) 编写 Excel 宏

2) 准备你的 vbscript 文件

3) 在 Windows 任务计划程序中设置任务

* * *

**编写 Excel 宏**

* * *

在 Excel 中打开一个新文件并在模块中粘贴此代码

```
Option Explicit

Const strTo As String = "abc@abc.com"
Const strCC As String = "def@abc.com"  '<~~ change "def@abc.com" to "" if you do not want to CC
Const strBCC As String = "ghi@abc.com" '<~~ change "ghi@abc.com" to "" if you do not want to BCC

Sub Sample()
    Dim OutApp As Object, OutMail As Object
    Dim strbody As String, strSubject As String

    strSubject = "Hello World"
    strbody = "This is the message for the body"

    Set OutApp = CreateObject("Outlook.Application")

    Set OutMail = OutApp.CreateItem(0)

    On Error Resume Next
    With OutMail
        .To = strTo
        .CC = strCC
        .BCC = strBCC
        .Subject = "This is the Subject line"
        .Body = strbody
        .Send
    End With
    On Error GoTo 0

    Set OutMail = Nothing
    Set OutApp = Nothing
End Sub 
```

保存 Excel 文件，`C:\Tester.Xlsm`就像您使用的是 Excel 2007 及更高版本一样，或者`C:\Tester.Xls`您使用的是 Excel 2003 并退出

* * *

**准备 VBSCRIPT 文件**

* * *

打开记事本，然后粘贴此代码。根据需要更改扩展名“.xls”。

```
Dim xlApp
Dim xlBook

Set xlApp = CreateObject("Excel.Application")
Set xlBook = xlApp.Workbooks.Open("C:\Tester.xls", 0, True)
xlApp.Run "Sample"
xlBook.Close
xlApp.Quit

Set xlBook = Nothing
Set xlApp = Nothing 
```

将文件另存为`Tester.vbs`并关闭它

![在此处输入图像描述](../Images/e355ec075ad1fa61f8b3cb02e90ee3c1.png)

* * *

**在 WINDOWS 任务计划程序中设置任务**

* * *

> > > 你能确认你的windows操作系统吗？– Siddharth Rout 36 分钟前
> > > 
> > > 视窗XP。它是我的工作计算机（通常的登录名等）。– keynesiancross 18 分钟前

点击开始按钮 | 所有程序 | 配件 | 系统工具 | 安排任务以获取此窗口

![在此处输入图像描述](../Images/6e2a1d7b8d0a0c68d778564667e69df6.png)

双击“添加计划任务”以获取此窗口

![在此处输入图像描述](../Images/31dd8b41bcab2107f9417544d5fe5953.png)

点击下一步

![在此处输入图像描述](../Images/f7e9336a729a2cc87be16d536ad38605.png)

点击“浏览”，选择我们之前创建的vbs文件，点击“打开”

您获得的下一个窗口至关重要，因为在这里我们需要提及何时需要运行脚本

![在此处输入图像描述](../Images/b4ca945eeb586e1a9db7b1ae41f203ae.png)

完成所需的操作后，单击下一步。

![在此处输入图像描述](../Images/45fd835455e20a6ae5eec7885ac5e92b.png)

在此窗口中，输入您的登录详细信息，以便即使您的屏幕被锁定，脚本也可以运行。

完成后单击“下一步”，然后在下一个窗口中单击“完成”。您的任务计划程序现在看起来像这样

![在此处输入图像描述](../Images/0d37d1fa985ea1e30d54d27519057237.png)

你完成了

* * *

锁上你的电脑，去喝杯咖啡休息一下；）当你回来时（*取决于你在任务计划程序中设置的时间以及你的休息时间*），电子邮件就会发送出去。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T02:28:43.023

我使用 HTML 和 JavaScript setInterval 来运行 vba 代码来克服这样的问题。代码：

```
<html>
<script>

var flag = false;
var xlApp;
var xlBook;
var i = 0;

function processExcel()
{
//Open the excel containing macro for the first time
if(flag==false)
{
  xlApp = new ActiveXObject ( "Excel.Application" );
//Your Excel containing VBA code
  xlBook=xlApp.Workbooks.Open("Count1.2.xlsm")

}
// "a" is the VBA macro
 xlApp.Run("a");

flag=true;

 i++;
 window.status="Last Updated " + new Date();

}

var w
function run()
{

processExcel();

 w= setInterval("processExcel()",120000);

}
function stop()
{

 clearInterval(w);

}

</script>

<body >

<input type="button" value="Start" onclick="run()" />
<input type="button" value="Stop"  onclick="stop()"/>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:35:35.003

SendKeys 可能是罪魁祸首。我仍然使用 CDO 通过 Excel VBA 发送电子邮件。这应该让你开始： [http ://www.rondebruin.nl/cdo.htm](http://www.rondebruin.nl/cdo.htm)

# android - 以编程方式删除布局

> ID：10211252
> 
> 赞同：6
> 
> 时间：2012-04-18T14:13:36.887
> 
> 标签：android, android-layout

我的应用程序活动有以下 xml 结构。现在我想用 id layer1Front 以编程方式删除子 RelativeLayout。我将如何在代码中做到这一点。我不想隐藏它，由于我的应用程序中的内存问题，我需要将其删除。同样在以某种方式删除它之后，我的应用程序会比当前的应用程序更轻、更快吗？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/layer1Front" >
    </RelativeLayout>   
    <HorizontalScrollView android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <FrameLayout android:layout_width="wrap_content"
            android:layout_height="fill_parent"                   
            android:id="@+id/parallaxLayers"        
            android:visibility="gone">      
        </FrameLayout>
    </HorizontalScrollView>
    <RelativeLayout android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/frontView">

    </RelativeLayout>       

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-18T14:24:56.307

最简单的是

```
findViewById(R.id.layer1front).setVisibility(View.GONE); 
```

但是你也可以有类似的东西

```
View root = findViewById(R.id.your_root);
root.removeView(yourViewToRemove); 
```

不，您的应用在删除后不会变得更轻或更快

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:21:14.963

尝试获取父布局而不是删除子布局

```
parentView.remove(child) 
```

我希望这行得通。

# c# - 如何通过 WPF 组合框选择从数据库中填充列表集合

> ID：10211257
> 
> 赞同：0
> 
> 时间：2012-04-18T14:14:03.500
> 
> 标签：c#, .net, wpf, wpf-controls

我有多对多表，想在 WPF 控件中显示一些字段。

![在此处输入图像描述](../Images/b00cfded7089752cfa21926f20a5264e.png)

`List<Course> courses = new List<Course>()`每当我在组合框中选择 InstructorID 时，如何填写列表集合？我只想在 ListView 控件的列表中显示 CourseID 和 Title

这是我的代码：

```
public partial class MainWindow : Window
{
    SchoolEntities db = new SchoolEntities();
    public MainWindow()
    {
        InitializeComponent();
        var instructors = db.Instructors.Where(f => f.HireDate == 2011).ToList();

        this.comboBox1.ItemsSource = instructors;
        this.comboBox1.DisplayMemberPath = "LastName";
        this.comboBox1.SelectedValuePath = "InstructorID";           
    }
    List<Course> courses = new List<Course>();

    private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        int S = (int)this.comboBox1.SelectedValue;
        var InstrSelection = db.Instructors.Include("CourseInstructors.Course").SingleOrDefault(f => f.InstructorID == S);

        foreach (var C in InstrSelection.CourseInstructors)
        {
            courses.Add(C.Course);
        }

        this.listView1.DataContext = null;
        this.listView1.DataContext = courses;
    }
} 
```

和窗口 xaml

```
<Window x:Class="School.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="773" Width="677">

<Grid>        
    <ComboBox Height="23" HorizontalAlignment="Left" Name="comboBox1"  SelectionChanged="comboBox1_SelectionChanged"></ComboBox>
    <ListView  HorizontalAlignment="Left" Name="listView1">
        <ListView.View>
         <GridView>
            <GridViewColumn Width="140" Header= "CourseID" />
            <GridViewColumn Width="140" Header= "Title" />                
         </GridView>
        </ListView.View>
    </ListView>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:31:12.347

我会让我的父数据模型包含子数据模型的集合，并将子数据模型绑定到父数据模型中`ComboBox`的选定项`ComboBox`

例如，您的`Instructor`模型将包含

```
int InstructorId
字符串名字
字符串姓氏
日期时间雇用日期
列出课程

```

并且您会将您`ComboBox`的讲师绑定到`List<Instructor>`. 然后您可以将您的课程绑定`ComboBox`到讲师 ComboBox 的`SelectedItem.Courses`

```
<ComboBox x:Name="InstructorList" ... />

<ComboBox x:Name="CourseList"
          ItemsSource="{Binding ElementName=InstructorList, 
                                Path=SelectedItem.Courses}"
          DisplayMemberPath="Title"
          SelectedValuePath="CourseId" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:32:59.623

我不确定我明白你在问什么。您是否只是想知道为什么您当前的代码没有在 ListView 中显示任何课程？如果是这样，那么您的问题是您在设置 ItemsSource 时设置了 ListView 的 DataContext。在添加新课程之前，您可能还应该清除课程列表：

```
private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    courses.Clear();
    ...

    this.listView1.ItemsSource = null; // ItemsSource instead of DataContext
    this.listView1.ItemsSource = courses;
} 
```

## 编辑

您还必须将 DisplayMemberBindings 添加到 GridViewColumns：

```
<GridViewColumn 
    Width="140" 
    Header="CourseID" 
    DisplayMemberBinding="{Binding CourseID}" /> <!-- Here -->
<GridViewColumn 
    Width="140" 
    Header="Title" 
    DisplayMemberBinding="{Binding Title}" /> <!-- And Here --> 
```

# jakarta-ee - Tomcat 可以为 Java EE 提供完整的实现吗？

> ID：10211259
> 
> 赞同：4
> 
> 时间：2012-04-18T14:14:07.977
> 
> 标签：jakarta-ee, tomcat

我发现 Tomcat 无法为 Java EE 提供全部功能。它只是一个 servlet 容器。因此，如果我想添加更多 Java EE 功能，我必须迁移到 Glassfish 还是有其他解决方案？

如果我将一些 glassfish 的 .jar 文件添加到 Tomcat 的 /lib 文件夹中，我可以扩展 Tomcat 的功能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T14:21:24.453

也许你想看看[TomEE](http://tomee.apache.org/)

# vb.net - Label.Text 不会在循环中改变

> ID：10211262
> 
> 赞同：1
> 
> 时间：2012-04-18T14:14:21.277
> 
> 标签：vb.net, winforms

我正在尝试更改在 Visual Basic 中的 Do While 循环的每次迭代期间标签显示的文本。一个标签（显示一个整数）工作正常，但另一个标签保持空白，直到循环完成并显示最终结果。可能是什么问题呢？

```
Private Sub btnCalc_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)
Handles btnOblicz.Click
Dim W As Single
Dim L As Integer
Dim J As Integer
Dim Y As Double

W = Val(txtW.Text)

L = InputBox("Input L")

J = 0

If W > 0 And W < 100 Then

Do

    Y = (2 * Math.Sqrt(W)) / (L - J)
    J = J + 1
    lblJ.Text = Str(J)
    lblY.Text = Str(Y)
    MsgBox("Next...")

Loop Until Y < 0

Else
    MsgBox("No calculations, because the number is less than zero or greater than a hundred.")

End If

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:48:51.130

正如其他人所建议的那样，Application.DoEvents() 可以工作。但是，您应该知道它有一些负面影响，例如可能会创建 StackOverflowExceptions。

解决这个问题的*正确*方法是使用[BackgroundWorker 组件](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)。

至于*为什么*会发生这种情况……请记住，所有 Windows 程序的工作原理都是通过一个循环来检查来自用户和操作系统的消息（例如鼠标移动事件、单击、击键等）。当您设置标签的文本属性时，您并*没有*告诉标签在屏幕上重新绘制自己。相反，您正在向操作系统发布一个事件，然后您的程序的消息循环必须接收并处理该事件。随着新事件的出现，消息循环（或泵）将这些事件发送到正确的方法。

您的`btnCalc_Click()`功能就是这样一种方法。如果您的函数正在运行，它是由核心 Windows 消息传递循环调用的，该循环现在*正在等待*您的方法完成并返回控制：它已被阻止。在您的函数完成之前，循环无法继续接收和分派方法，因此您的程序界面中的任何内容都无法更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:21:15.243

在我使用 VS2010 所做的小副本中，这对我来说效果很好

可能需要消息泵。尝试这个 ：

System.Windows.Forms.Application.DoEvents()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:18:49.247

可能，在您的循环执行时，您处理操作系统事件消息的窗口函数是不可访问的。尝试显式调用调度消息。例如，在循环内分配标签文本后插入

```
Application.DoEvents 
```

# count - HQL 中的 MAX FROM COUNT

> ID：10211270
> 
> 赞同：0
> 
> 时间：2012-04-18T14:14:40.043
> 
> 标签：count, hql, max

我有医生和病人课程，每个医生都有一些病人（1：m）。如何找到 HQL 患者最多的医生（或多个医生）？

这里是 SQL 查询：

`SELECT D.doctorName, count(D.patientId) AS tot FROM Doctors AS D GROUP BY D.doctorName HAVING count(D.patientId)= (SELECT max(A.pid) FROM( SELECT count(D.patientId) AS pid FROM Doctors AS D GROUP BY D.doctorName) AS A)`

主要问题是我无法在 FROM 位置编写子查询。

非常感谢。

R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:10:47.323

解决了！我创建了一个 CRITERIA 函数来替换子查询。不优雅但有效！

```
 def myList = []
    String tempName = ""
    int patPosition = 0
    int myListPosition = -1
    int find = 0
    int maxOcc = 0

    def c = Doctor.createCriteria()
    def pat = c.list {              
        patients {          
        }
    }

    while(patPosition<pat.size()){

        find=0
        tempName=pat[patPosition].lastName //Some constraints to add 
        find=pat.lastName.count(tempName)

        if(find>maxOcc){
            maxOcc=find
        }

        myListPosition=myListPosition+1
        myList[myListPosition]=find

        patPosition=patPosition+find

    }

    print "\n\nLIST -> "+myList
    print "MAX -> "+maxOcc

    String queryToDo=   "SELECT d.name, count(p) "+
                        "FROM Doctor as d INNER JOIN d.patients as p "+
                        "GROUP BY d.name "+
                        "HAVING count(p) = $maxOcc" 

    def query = Doctor.executeQuery(queryToDo)  
    render query 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:21:14.307

更多合成：

```
pat.eachWithIndex{item, index-> 
          if (index.equals(index2)){
            patCount=0
            patCount=pat.count(item)    
            index2=index2+patCount
                if(patCount>maxOcc){
                    maxOcc=patCount
                }
          } 
     } 
```

# c++ - 类主体之外的模板定义

> ID：10211273
> 
> 赞同：21
> 
> 时间：2012-04-18T14:15:13.860
> 
> 标签：c++, templates, virtual, inline

类模板的虚函数可以在它的主体之外定义吗？虚函数不能内联，但为了避免编译单元中的多个定义，它们应该被标记`inline`（假设模板头将包含在多个源文件中）。另一方面，编译器可以随意忽略`inline`，所以这似乎是有效的。举个例子，下面的代码是否正确：

```
template <typename T>
class C
{
public:
    virtual void f(T val);
};

template <typename T>
inline
void C<T>::f(T val)
{
  //definition
} 
```

?

BTW gcc（3.4.2）允许`inline`在函数定义之前省略，`f(T val)`但不能在常规类的类似函数之前省略。它只是gcc的行为吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-18T14:22:16.753

是的，即使没有`inline`. 它对普通成员函数和静态变量的工作方式相同：

```
// everything in the header:
template <class T>
class A
{
  static int i;
};

template <class T>
int A<T>::i=0; 
```

标准报价：(3.2/5)

> 类类型（第 9 条）、枚举类型（7.2）、带有外部链接的内联函数（7.1.2）、类模板（第 14 条）、非静态函数模板（14.5.6）可以有多个定义、类模板的静态数据成员 (14.5.1.3)、**类模板的成员函数**(14.5.1.1) 或在程序中未指定某些模板参数的模板特化 (14.7, 14.5.5)，前提是每个定义出现在不同的翻译单元中，并且只要定义满足以下要求...

要求基本上说这两个定义必须相同。

It doesn't work in case of regular classes. There has to be at most one definition in the whole program.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-18T14:19:12.550

`class`您可以在定义之外，在同一个标​​头中定义模板方法，而无需使用`inline`也不会收到多个定义错误。

**这是因为模板函数本身不会生成定义，如果它不是完全专用的**。为了证明我的观点，以下内容：

```
void C<int>::f(int)
{
} 
```

将导致链接器错误，因为在这种情况下函数具有定义。（前提是您将其包含在多个翻译单元中。如果您将其标记为内联：

```
inline void C<int>::f(int)
{
} 
```

错误不再发生。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T14:18:53.237

您可以在那里定义函数，只要任何需要实例化相关函数的代码在编译时（而不是链接时）都可以看到该代码。

将模板分成 2 个文件是很常见的，一个是传统的标头，第二个是实现，与非模板化函数及其实现一样。唯一的区别是当你想使用它时，你需要#include 模板实现文件以及头文件。

# java - Jfreechart：如何制作一个在 x 轴上有字符串，在 y 轴上有整数的直方图？

> ID：10211275
> 
> 赞同：1
> 
> 时间：2012-04-18T14:15:16.690
> 
> 标签：java, jfreechart

我有一个哈希图

这些值只是字符串，而整数是一个数字，表示字符串在文本中出现的次数

我想使用这个散列图来创建一个直方图或一个通常在 x 轴上的图形，来自散列图中的字符串

在 y 轴上是与它们关联的整数

这可能吗？我将如何解决这个问题？

我见过的大多数例子都只是整数和双精度数

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T01:34:54.550

`Hashmap<String, Integer>`听起来像是一张`CategoryDataset`条形图的工作；[源](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/BarChartDemo1.html#line.65)包含在分发中。[`BarChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/demo/BarChartDemo1.html)

# nhibernate - Nhibernate QueryOver 的具有 HasMany 属性的 SelectList

> ID：10211278
> 
> 赞同：2
> 
> 时间：2012-04-18T14:15:33.533
> 
> 标签：nhibernate, queryover

我在使用 QueryOver 的 JoinAlias 和 List 属性的 SelectList 在 Nhibernate 中构建投影时遇到问题。

我有具有 IList 属性 PageHeaders 的域对象 PageRic：

```
 public class PageRic: AuditableLegacy
{
    public virtual string Ric { get; set; }
    public virtual McdDistId McdDistId {get; set; }
    public virtual IList<PageHeader> PageHeaders { get; set; }
    public virtual string Pointer { get; set; }
    public virtual bool Dup { get; set; }
    public virtual int Throttle { get; set; }
} 
```

PageHeaders 属性映射为 HasMany：

```
 public class PageRicMapping : ClassMap<PageRic>
{
    public PageRicMapping()
    {
        Table("PAGE_RICS");
        Id(x => x.Ric, "RIC").Not.Nullable();

        References(x => x.McdDistId, "MCD_DIST_ID")
            .Not.LazyLoad()
            .Nullable();

        HasMany(x => x.PageHeaders)
            .KeyColumn("RIC")
            .Fetch.Subselect()
            .Inverse()
            .Cascade.AllDeleteOrphan()
            .Not.LazyLoad();

        Map(x => x.Pointer, "POINTER");
        Map(x => x.Dup, "DUP").Not.Nullable().CustomType<YesNoType>();
        Map(x => x.Throttle, "THROTTLE");
        }
} 
```

当我执行此查询时：

```
 PageRicDTO pageRicDTO = null;
        McdDistId McdDistAlias = null;

        var results = Session.QueryOver<PageRic>()
            .JoinAlias(x => x.McdDistId, () => McdDistAlias)
            .SelectList(list => list
                                    .Select(x => McdDistAlias.Id).WithAlias(() => pageRicDTO.McdDistId)
                                    .Select(x => McdDistAlias.ShortName).WithAlias(() => pageRicDTO.McdDistName)
                                    .Select(x => x.Ric).WithAlias(() => pageRicDTO.Ric)
                                    .Select(x => x.Throttle).WithAlias(() => pageRicDTO.Throttle)                                        
                                    .Select(x => x.Rowstamps).WithAlias(() => pageRicDTO.Rowstamps)                                        
                                    .Select(x => x.PageHeaders).WithAlias(() => pageRicDTO.PageHeaders)
            )
            .TransformUsing(Transformers.AliasToBean<PageRicDTO>())
            .List<PageRicDTO>(); 
```

我得到 IndexOutOfRangeException: Index was outside the bounds of the array。这是我在日志文件中得到的内容：

2012-04-18 15:00:38,823 [CurrentAppDomainHost.ExecuteNodes] 调试 NHibernate.SQL - 选择 mcddistali1_.MCD_DIST_ID 作为 y0_，mcddistali1_.SHORT_NAME 作为 y1_，this_.RIC 作为 y2_，this_.THROTTLE 作为 y3_，this_.ROWSTAMPS 作为 y4_ , this_.RIC as y5_ FROM PAGE_RICS this_ inner join MCD_DIST_IDS mcddistali1_ on this_.MCD_DIST_ID=mcddistali1_.MCD_DIST_ID

2012-04-18 15:00:39,306 [CurrentAppDomainHost.ExecuteNodes] WARN NHibernate.Util.ADOExceptionReporter - System.IndexOutOfRangeException：索引超出了数组的范围。在 NHibernate.Loader.Criteria.CriteriaLoader.GetResultColumnOrRow(Object[] row, IResultTransformer resultTransformer, IDataReader rs, ISessionImplementor session) 在 NHibernate.Loader.Loader.GetRowFromResultSet(IDataReader resultSet, ISessionImplementor session, QueryParameters queryParameters, LockMode[] lockModeArray, EntityKey optionalObjectKey , IList hydradObjects, EntityKey[] 键, Boolean returnProxies) 在 NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) 在 NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters,

当我注释掉 **.Select(x => x.PageHeaders).WithAlias(() => pageRicDTO.PageHeaders) 时**，我得到了 DTO 对象。

你能帮我找到这个问题的解决方案吗？

# apache-flex - 更改 Flex Spark ButtonBar 控件的标签和图标位置

> ID：10211281
> 
> 赞同：0
> 
> 时间：2012-04-18T14:15:43.173
> 
> 标签：apache-flex, components, flex-spark, spark-skinning

我正在尝试为 ButtonBarButton 创建自定义外观。我需要为 mx ButtonBar 组件创建图标和标签放置的垂直布局，就像在这个示例中一样：http: [//blog.flexexamples.com/2008/01/08/sharing-the-label-placement-for-a-flex-按钮栏控制/](http://blog.flexexamples.com/2008/01/08/changing-the-label-placement-for-a-flex-buttonbar-control/)

不幸的是，火花组件中没有“labelPlacement”属性，我也找不到更改自定义 SparkButtonSkin 的默认 BasicLayout 布局的方法。

找到了一个解决方案，您可以使用函数“setStyle”设置图标位置（在火花皮肤初始化程序处理程序中）

```
protected function sparkbuttonskin_initializeHandler(event:FlexEvent):void
    {
        setStyle("iconPlacement", IconPlacement.TOP);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T05:55:12.490

Spark Button 中有一个`iconPlacement`属性。但是如果你想把按钮放在`ButtonBar`组件内，你必须做这样的事情[http://blog.flexexamples.com/2009/07/28/displaying-icons-in-a-spark-buttonbar-control-in-flex -4/](http://blog.flexexamples.com/2009/07/28/displaying-icons-in-a-spark-buttonbar-control-in-flex-4/)

# java - 何时使用国家代码和语言代码

> ID：10211285
> 
> 赞同：0
> 
> 时间：2012-04-18T14:15:55.870
> 
> 标签：java, android, localization

我很想知道为什么我应该在本地化我的应用程序时指定国家代码和语言代码？我确定有一个正当的理由，但谷歌搜索时间并没有使这一点变得明显。当然，仅语言代码就涵盖了所有基础吗？谢谢杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:21:11.293

即使他们使用相同的基本语言，国家之间也存在一些差异。这些差异可以小到拼写（颜色 [AE] 与颜色 [BE]）、不同的词（汽车中的树干 [AE] 与引导 [BE]）甚至完全不同的句子，因为礼貌表达某事的形式可能不同.

如果这些差异无关紧要，只需使用仅语言代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:19:20.790

通常只使用语言代码，如果您需要非常具体，也可以使用国家代码 - [http://www.olat.org/docu/i18n/ch01s02.html](http://www.olat.org/docu/i18n/ch01s02.html)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:38:13.737

*在我看来，如果*你能给我铁板钉钉的保证，你的应用程序只会处理本地化的语言方面，这很好 - 附带条件，正如 Kai 上面所说，一些方言是相同的语言，但有本地化成语 - 在德国讲的德语与在奥地利讲的德语不同（但大多兼容）；又不同于瑞士的德语。

如果您的应用程序需要任何其他本地化（货币、时间/日历、地址格式、语言习语），那么您至少应该存储国家代码，即使您还不需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:38:23.943

例如，**zh**表示中文，但它有中国大陆使用的**简体中文**和台湾或香港使用的**繁体中文。**不仅字形，许多加载词的翻译也可能不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T14:41:13.637

四个例子：

*   墨西哥西班牙语可能与西班牙的西班牙语有点不同
*   巴西葡萄牙语可能与葡萄牙葡萄牙语有些不同
*   美式英语可能与英式英语有些不同
*   加拿大法语可能与法语法语有点不同

对于您的应用程序，这些差异可能...或可能不...重要。这取决于应用程序。您可能直到稍后出现特定情况时才意识到您的翻译需要不同的本地化版本。

# java - 如何查看 wsdl2java 代码生成的请求？

> ID：10211287
> 
> 赞同：2
> 
> 时间：2012-04-18T14:15:57.337
> 
> 标签：java, soap, axis2

我使用 wsld2java 生成的存根：

> ServicesStub.ResponseMessage resp = stub.processService(rm);

此外，Rampart 模块也被使用，其中包括一个安全标头。如何查看发送到服务器的完整 XML 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:58:58.653

或者，如果您不想绑定到 Eclipse，请使用 TCPMON [http://ws.apache.org/commons/tcpmon/](http://ws.apache.org/commons/tcpmon/)

您基本上通过 TCPMON 重定向流量，并且您可以准确查看在您的传出 Web 服务调用（REST 或 SOAP）之间发生的 HTML 操作，并且您可以进行诊断，这对于 SOAP 错误无法正确转换为带有有用错误消息的 Java 时非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:22:05.273

Eclipse 有一个内置的 tcp/monitor 工具 - netbeans 类似的东西。也可能是普通的网络监控工具，如鲨鱼或用于调试目的的 Web 代理构建。

# python - Ruby 中 Python 的 itertools.product 等价物是什么？

> ID：10211293
> 
> 赞同：4
> 
> 时间：2012-04-18T14:16:17.703
> 
> 标签：python, ruby, arrays, itertools

我正在寻找一种与`itertools.product`Ruby 中的 Python 具有相同效果的方法。采用以下 Python 代码：

```
from itertools import product

chars = []
for i in range(97,123):
    chars.append(chr(i))

for a in range(1,3):
    for i in product(chars,repeat=a):
        s = ''.join(i)
        print s 
```

输出如下：

```
a, b, c... x, y, z, aa, ab, ac... ax, ay, az, ba, bb, bc.. etc. 
```

我试图将其翻译成 Ruby：

```
(1..2).each do |n|
  ('a'..'z').to_a.combination(n).each do |c|
    s = c.join
    puts s
  end
end 
```

但是输出不一样。一个字符的工作正常（az），但是当它进入两个字符的时候，它不能像我预期的那样工作：

```
ab, ac, ad.. ax, ay, az, bc, bd, be 
```

它没有生成`aa`,`ba`或者`bb`- 所以它似乎正在生成所有组合而不重复字符或其他东西？

那么我应该使用什么方法来生成*所有*的组合，就像`itertools.product`在 Python 中所做的那样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:50:48.900

我会写（简化为 3 个元素，需要 Ruby 1.9）：

```
xs = ["a", "b", "c"]
strings = 1.upto(xs.size).flat_map do |n| 
  xs.repeated_permutation(n).map(&:join)
end
#=> ["a", "b", "c", "aa", "ab", "ac", ...,  "cca", "ccb", "ccc"] 
```

一个懒惰的解决方案：你可以很容易地用`each`s 而不是 s 来编写它`map`，但是让我们检查一下 Ruby 2.0 中的“lazy”：

```
xs = ("a".."z").to_a
strings = 1.upto(xs.size).lazy.flat_map do |n| 
  xs.repeated_permutation(n).lazy.map(&:join)
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:30:44.700

你有[Array#product](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-product)这就像[itertools.product](http://docs.python.org/library/itertools.html#itertools.product)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T15:18:38.323

魔术（虽然不是很漂亮）：

```
a = ('a'..'z').to_a
result = (0..2).map { |n| 
  a.product(*n.times.inject([]) { |s,x| s << a }) }.map { |x| x.map(&:join) } 
}

puts result 
```

说明：为了作为 python 工作，`product`您需要`n-1`在参数中重复数组时间`product`。

在 ruby​​ 中也是`product('abc', repeat=n)`一样的：

```
a = ['a','b','c']
a.product()     # n = 1
a.product(a)    # n = 2
a.product(a, a) # n = 3 
```

这就是 nasty`inject`在上面的代码中所做的。它会自动构建这样一个“参数数组”。虽然它不是非常有效的代码，所以不要试图用它来构建大型“产品”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T17:32:45.980

在 ruby​​ 中， Array#product 产生一个Cathesian产品。添加原始数组将产生相同的结果。

```
ar = (?a..?z).to_a
ar + ar.product(ar).map(&:join) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T15:21:45.057

在我写完这篇文章后，我注意到 Casper 的解决方案基本相同。有些人可能会发现这个更具可读性，所以我离开它..

```
arr = ['a', 'b', 'c']

p (0..2).inject([]) { |acc, a|
  acc + arr.product(*[arr]*a).map(&:join)
}

=> ["a", "b", "c", "aa", "ab", "ac", "ba", "bb", "bc", "ca", "cb", "cc", "aaa", "aab", "aac", "aba", "abb", "abc", "aca", "acb", "acc", "baa", "bab", "bac", "bba", "bbb", "bbc", "bca", "bcb", "bcc", "caa", "cab", "cac", "cba", "cbb", "cbc", "cca", "ccb", "ccc"] 
```

关键的“陷阱”是

*   `*[arr]*a`，它首先创建一个 s 数组`a` `arr`，然后将其放入方法`a`的参数中`product`。
*   `map(&:join)`，这是一个简写形式`map{|e| e.join}`
*   `inject`（又名“reduce”，来自“map-reduce”名声），FP 支柱之一

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T17:33:14.427

在 tokland 的帮助下，我得到了它：

```
(1..2).each do |n|
  ('a'..'z').to_a.repeated_permutation(n).each do |a|
    s = a.join
    puts s
  end
end 
```

而且它很懒，所以当你使用它来生成更长的字符串时它不会占用 RAM。

# php - 输入显示带有数据的表单字段的数量（jQuery）

> ID：10211295
> 
> 赞同：0
> 
> 时间：2012-04-18T14:16:28.273
> 
> 标签：php, jquery, forms, input, formula

我有一个很长的表格，我需要计算其中包含数据的输入和文本区域的数量。我需要一个输入字段，该字段将显示一个数字，该数字表示在我的表单中包含数据的输入和文本区域的数量。

我更喜欢 jquery 或 PHP。

有没有例子或建议？

谢谢。埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:18:03.377

使用 jQuery，您可以使用它

```
var number = $('#form').find('input, textarea')
                       // filter out every empty input/textarea
                       .filter(function() { return $(this).val() == ''; })
                       .length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:26:23.980

您可以执行一个 onkeypress 函数，该函数使用包含数据的字段数运行和更新您的 div。

在我的脑海中，但也许：

```
function tallyFields() {

var totalFilledFields = 0;
var fieldAVal = document.getElementByID("fieldA").value;
// add more fields here the same way

if(fieldAVal.length > 0) {
 totalFilledFields++;
}
// check more fields here the same way and increment the same var

document.getElementByID("yourTotalDiv").innerHTML=totalFilledFields;

} 
```

在每个表单字段的 onkeypress 上分配此功能可能会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:19:57.260

这应该可以解决问题：

```
$(".myform :input").length; 
```

# c# - C#，使用接口

> ID：10211296
> 
> 赞同：2
> 
> 时间：2012-04-18T14:16:31.720
> 
> 标签：c#, asp.net, interface

我正在尝试使用接口类，但我对接口方法参数有疑问。

我有一个接口类让子类使用特定的方法。但是子类需要不同数量的方法参数。

例子，

```
public interface IPayment
{
  void MakePayment();
} 
```

并在子类中定义 MakePayment 方法。

```
public class PayPay : IPayment
{
  public void MakePayment(string a); // it needs only one parameter
}

public class Google : IPayment
{
  public void MakePayment(string a, int b); // it needs two parameters.
} 
```

像上面的情况一样，我怎样才能修改我的接口类？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T14:19:04.723

一个干净的方法可以是简单地使用一个`PaymentParameters`类并使用一个名为`public void MakePayment(PaymentParameters params);`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T14:23:59.427

更改您的界面以使用包含每个不同服务可能需要的所有参数的 PaymentParameters 类。

```
public interface IPayment 
{ 
   void MakePayment(PaymentParameters p);   
} 

public class PaymentParameters{
    public string A { get; set; }
    public int B { get; set; }
} 
```

您的`Google`和`PayPay`实现将仅使用来自`PaymentParameters`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-18T14:22:26.120

好吧，接口的原则是不知道实现。所以接口的调用者不会知道它是否是一个`Google`子`PayPay`类，并且总是会调用相同的方法。

但是如果你有更复杂的参数，你应该使用`IPaymentParameters`和这个原型的方法

```
public interface IPayment
{
     void MakePayment(IPaymentParameters parameters);
} 
```

还有两个实现`GooglePayementParameters`和`PayPayPaymentParameters`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-18T14:32:28.093

您的`PayPay`和`Google`类是否代表*描述*付款所需的数据？通常，支付类应该代表支付。如果该类的工作是*处理*付款，它可能应该有一个类似的名称`PaymentProcessor`，并且它的接口类似`IPaymentProcessor`（或者实际上`IPaymentService`，或类似的东西）。

如果支付类代表实际支付，那么该类的方法不需要任何参数`MakePayment()`；相反，它将依赖实例数据来描述正在支付的款项。

或者，你可以有这样的东西（仍然`Payment`用来描述付款本身）：

```
interface IPaymentProcessor<T> where T : IPayment
{
    void ProcessPayment(T payment);
}
class PayPayPaymentProcessor : IPaymentProcessor<PayPay>
{
    void ProcessPayment(PayPay payment) { /* some implementation here */ }
}
class PayPayPaymentProcessor : IPaymentProcessor<Google>
{
    void ProcessPayment(Google payment) { /* some implementation here */ }
} 
```

我可能会命名类`PayPayPayment`，`GooglePayment`因此名称更清楚地代表了类型：

```
class PayPayPaymentProcessor : IPaymentProcessor<PayPayPayment>
{
    void ProcessPayment(PayPayPayment payment) { /* some implementation here */ }
}
class PayPayPaymentProcessor : IPaymentProcessor<GooglePayment>
{
    void ProcessPayment(GooglePayment payment) { /* some implementation here */ }
} 
```

请注意，这与其他建议的使用类的方法非常相似`PaymentParameters`，但它更接近于单一职责原则。在 Brian Cauthon 的回答中，`PaymentParameters`该类必须为任何类型的付款保留所有可能参数的并集；在这里，参数类型可以（并且应该）特定于它们所代表的支付需求。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-18T14:20:44.413

您可以定义两个接口，也可以使用以下接口；

```
public interface IPayment
{
    void MakePayment(string a, int b=0);
} 
```

当只传递字符串参数时，该方法会将 b 设置为 0；你可以忽略它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T14:21:15.243

如果您使用 .NET 4.0，则可以为您的 Interface-Method 提供默认值

```
public interface ITest{
void Function(stirng s1, string s2 = "");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T14:25:18.673

直接来自 MSDN -

*接口仅包含方法、委托或事件的**签名***

*方法的**签名**由方法的名称**及其每个形式参数的类型和种类（值、引用或输出）组成，**按从左到右的顺序考虑*

如果您不提供方法的实现（包括每个参数的类型和种类），那么您还没有真正“实现”接口。

祝你好运！:)

格伦

# c# - 如何将日历选定的值绑定到 txt bx

> ID：10211297
> 
> 赞同：0
> 
> 时间：2012-04-18T14:16:35.090
> 
> 标签：c#, asp.net, ajax

我正在尝试创建一个 ajax 弹出日历。因此，当用户单击图像按钮时，应该会弹出日历，并且从日历中选择的日期应该绑定到文本框。

**这是我的 aspx 代码：**

```
<asp:TextBox ID="txtBxDate" runat="server" MaxLength="10" Width="75px">
</asp:TextBox>
<asp:ImageButton ID="ImageButton1" runat="server" 
ImageUrl="~/images/toolbox.gif" />
<asp:PopupControlExtender ID="ImageButton1_PopupControlExtender" runat="server" 
DynamicServicePath="" Enabled="True" ExtenderControlID="" 
PopupControlID="Panel1" Position="Bottom" TargetControlID="ImageButton1">
</asp:PopupControlExtender>
<asp:Panel ID="Panel1" runat="server" Width="200px">
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
<asp:Calendar ID="Calendar1" runat="server" 
onselectionchanged="Calendar1_SelectionChanged"></asp:Calendar>
</ContentTemplate>
</asp:UpdatePanel>
</asp:Panel> 
```

**我的代码背后：**

```
protected void Calendar1_SelectionChanged(object sender, EventArgs e)
{
    txtBxDate.Text = Calendar1.SelectedDate.ToString();
} 
```

但是当我从日历中选择一个日期时，所选日期没有绑定到文本框。我在这里做错了什么？或者我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:22:46.133

它不更新的原因是因为`txtBxDate`在`UpdatePanel`. 要么将`txtBxDate`日历放入更新面板，要么将其放入单独的更新面板。

**编辑**

在更仔细地检查您的代码之后，您似乎正在尝试手动创建已内置到 AJAX Toolkit`Calendar`控件中的功能。

请参阅此处：[日历示例](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:20:13.623

看来你有你的`targetcontrolid`和`popupcontrolid`混淆了。我认为应该是：

```
PopupControlID="ImageButton1" TargetControlID="txtBxDate" 
```

您可以摆脱在文本字段上设置所选日期的代码隐藏。日历扩展器应该自动处理这个问题。

# iphone - 将整数转换为时间格式

> ID：10211298
> 
> 赞同：0
> 
> 时间：2012-04-18T14:16:36.370
> 
> 标签：iphone, objective-c, xcode, ipad

如何将 115900 等整数转换为时间？我想对时间进行算术运算，这样：115900 + 100 将等于 120000，而不是 11600。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:23:20.650

您的大问题是整数的行为不像日期/时间。由于您使用的是 Objective-C，因此您确实应该使用 NSDate 类和相关的类来格式化日期和时间以及管理日历。

首先阅读[日期和时间编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtDates.html#//apple_ref/doc/uid/20000183-BCIDBADB)。这比我把它全部写出来要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:11:08.847

```
 int seconds = 115900 % 60; 
   int minutes = (115900 / 60) % 60; 
   int hours = 115900/ 3600; 
   return [NSString stringWithFormat:@"%02i:%02i:%02i",hours, minutes, seconds]; 
   //output like is HH:MM:SS 
```

# javascript - 检查对 CSS 属性的支持

> ID：10211300
> 
> 赞同：1
> 
> 时间：2012-04-18T14:16:47.267
> 
> 标签：javascript, jquery, css, cross-browser

我想测试浏览器是否支持特定的 css 属性。对于 CSS 属性，我可以这样做

```
document.createElement("detect").style["-webkit-overflow-scrolling"] === "" 
```

但是如果我必须检查特定的类或属性怎么办。例如，我想测试对

```
position:fixed 
```

我该怎么做（除了使用 Modernizr）？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:20:39.283

```
function isFixedSupported() {
  var isSupported = null;
  if (document.createElement) {
      var el = document.createElement("div");
      if (el && el.style) {
          el.style.position = "fixed";
          el.style.top = "10px";
          var root = document.body;
          if (root && root.appendChild && root.removeChild) {
              root.appendChild(el);
              isSupported = el.offsetTop === 10;
              root.removeChild(el);
          }
      }
  }
  return isSupported;
}

var canUseFixed = isFixedSupported(); //true:false 
```

[小提琴](http://jsfiddle.net/adeneo/zyCLt/)

# tcl - 使用 regsub 删除美元符号

> ID：10211302
> 
> 赞同：0
> 
> 时间：2012-04-18T14:16:56.573
> 
> 标签：tcl

现在我的 $arg 返回一个货币价值。例如：65.88 美元

现在我正在尝试删除美元符号，因为我想对此进行一些计算。多变的。以下不起作用。它仍然返回一个带有 $ 符号的值。

```
regsub -all {$} $arg {} arg 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:42:08.413

此任务不需要正则表达式。用于`string map`将美元符号替换为空字符串，或搜索美元符号，然后使用字符串命令将其删除。

正则表达式很好，但是如果您不理解它们并且只是使用从 Internet 上获得的表达式，那么您创建的软件可能很难维护。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:32:51.213

$ 通常意味着行尾 - 转义 $ 并且一切都应该很好

[编辑]

```
regsub -all {\$} $arg {} arg 
```

[/编辑]

# .net - 为什么 FtpWebRequest 恰好在长传输结束时抛出 WebException？

> ID：10211307
> 
> 赞同：2
> 
> 时间：2012-04-18T14:17:07.657
> 
> 标签：.net, ftp, webclient, ftpwebrequest, system.net.sockets

我正在尝试连接到 FTP 服务器并下载文件，但遇到了一些问题。

最初我使用WebClient.DownloadFileAsync，它适用于一个小文件，但一个大文件会到达下载的末尾，但从不调用DownloadFileCompleted ...

我尝试切换到 FtpWebRequest 并使用 FileStream 使用标准方法写入文件：

```
var FtpRequest = WebRequest.Create(uri) as FtpWebRequest
FtpRequest.Credentials = _Credentials;
FtpRequest.Method = WebRequestMethods.Ftp.DownloadFile;

using(var InputResponse = (FtpWebResponse)FtpRequest.GetResponse())
using (var InputStream = InputResponse.GetResponseStream())
using (var OutputStream = new FileStream(_DownloadDirectory + "\\" + fileName, FileMode.Create))
{
    var Buffer = new byte[1024];
    int TotalReadBytesCount = 0;
    int ReadBytesCount;
    while ((ReadBytesCount = InputStream.Read(Buffer, 0, Buffer.Length)) > 0)
    {
        OutputStream.Write(Buffer, 0, ReadBytesCount);
        TotalReadBytesCount += ReadBytesCount;
        var Progress = (int)(((double)TotalReadBytesCount / (double)FileSize) * 100);
        UpdateProgressBar(progressBar, Progress);
    }
} 
```

这个也适用于小文件，但对于大文件，它将下载整个文件，然后我将在 InputStream.Read 处获得 System.Net.WebException。

编辑：异常移动取决于代码的结构...删除“使用”语句并关闭每个流，响应导致最后一个 x.close() 抛出异常。我还注意到 TotalBytesReceived 是 == 到 fileSize 所以下载在技术上是完整的。结束编辑

内部异常：底层连接已关闭：接收时发生意外错误。

启用 system.Net.Tracing 后，我得到以下日志文​​件：

```
System.Net Verbose: 0 : [2440] WebRequest::Create(ftp://ftp.******.com/)
System.Net Information: 0 : [2440] FtpWebRequest#63621045::.ctor(ftp://ftp.******.com/)
System.Net Verbose: 0 : [2440] Exiting WebRequest::Create()     -> FtpWebRequest#63621045
System.Net Verbose: 0 : [2440] FtpWebRequest#63621045::GetResponse()
System.Net Information: 0 : [2440] FtpWebRequest#63621045::GetResponse(Method=SIZE.)
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Created connection from ***.**.***.**:***** to **.**.**.**:**.
System.Net Information: 0 : [2440] Associating FtpWebRequest#63621045 with FtpControlStream#44374744
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Received response [220 Microsoft FTP Service]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Sending command [USER ******]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Received response [331 Password required for cashipftp.]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Sending command [PASS ********]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Received response [230 User logged in.]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Sending command [OPTS utf8 on]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Received response [200 OPTS UTF8 command successful - UTF8 encoding now ON.]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Sending command [PWD]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Received response [257 "/" is current directory.]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Sending command [SIZE Superintendents/MSK/Stock Keeper_be.zip]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Received response [213 96601015]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Sending command [QUIT]
System.Net Information: 0 : [2440] FtpControlStream#44374744 - Received response [221 Goodbye.]
System.Net Information: 0 : [2440] FtpWebRequest#63621045::(Releasing FTP connection#44374744.)
System.Net Verbose: 0 : [2440] Exiting FtpWebRequest#63621045::GetResponse() 
System.Net Verbose: 0 : [2440] FtpWebResponse#50706457::Close()
System.Net Verbose: 0 : [2440] Exiting FtpWebResponse#50706457::Close() 
System.Net Verbose: 0 : [2440] WebRequest::Create(ftp://ftp.******.com/)
System.Net Information: 0 : [2440] FtpWebRequest#89223::.ctor(ftp://ftp.*****.com/)
System.Net Verbose: 0 : [2440] Exiting WebRequest::Create()     -> FtpWebRequest#89223
System.Net Verbose: 0 : [2440] FtpWebRequest#89223::GetResponse()
System.Net Information: 0 : [2440] FtpWebRequest#89223::GetResponse(Method=RETR.)
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Created connection from ***.**.***.**:***** to **.**.**.**:**.
System.Net Information: 0 : [2440] Associating FtpWebRequest#89223 with FtpControlStream#4015056
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Received response [220 Microsoft FTP Service]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Sending command [USER ******]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Received response [331 Password required for cashipftp.]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Sending command [PASS ********]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Received response [230 User logged in.]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Sending command [OPTS utf8 on]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Received response [200 OPTS UTF8 command successful - UTF8 encoding now ON.]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Sending command [PWD]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Received response [257 "/" is current directory.]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Sending command [TYPE I]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Received response [200 Type set to I.]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Sending command [PASV]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Received response [227 Entering Passive Mode (77,44,60,82,106,69).]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Sending command [RETR *****]
System.Net Information: 0 : [2440] FtpControlStream#4015056 - Received response [125 Data connection already open; Transfer starting.]
System.Net Verbose: 0 : [2440] Exiting FtpWebRequest#89223::GetResponse() 
System.Net Information: 0 : [1312] ServicePoint#42865679 - Closed as idle.
System.Net.Sockets Error: 0 : [2440] Socket#10316078::UpdateStatusAfterSocketError() - TimedOut
System.Net.Sockets Error: 0 : [2440] Exception in Socket#10316078::Receive - A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
System.Net Information: 0 : [2440] FtpWebRequest#89223::(Releasing FTP connection#4015056.)
System.Net Verbose: 0 : [2440] FtpWebResponse#19201658::Close()
System.Net Verbose: 0 : [2440] Exiting FtpWebResponse#19201658::Close() 
```

编辑 19/04/2012：我用 ftp 过滤器尝试了 wireshark，我可能发现了更多信息，我也不知道该去哪里......

编辑：新信息...我在另一个论坛上找到了一些信息，这些信息更加清楚但仍然没有提供答案...看起来文件大小没有区别。下载一个小文件但在循环中休眠线程以延长下载时间具有相同的效果。似乎任何超过 x 时间的操作（其他帖子估计为 100 秒）都会到达终点并立即超时。我还注意到，在调试器单步执行时，接收到的总字节数等于文件大小，因此它与它尝试读取文件的最后一个文件的结果完全相同，只是发现没有剩余，除非它永远不会发现，因为服务器永远不会告诉它！结束编辑

假设 ftp 服务器响应 226 - 关闭数据连接。请求的文件操作成功（例如，文件传输或文件中止）。

但是，当我使用wireshark 时，我可以看到它前面没有出现[TCP Retransmission]。还不知道这是什么......仍在谷歌搜索。但我确信它具有相关性。

所以看起来有些东西正在超时或提前关闭，但对于 FTP 和对 .net 来说都是新手，我不知道从哪里开始。

我尝试了很多不同的东西：

*   保活=假
*   SetPointManager.MaxIdleTime
*   增加服务器超时

似乎是服务器把我踢走了，但它与 filezilla 配合得很好，所以必须有一些方法来避免这种情况。

编辑 20/04/2012：它不适用于 filezilla（或资源管理器）我尝试使用资源管理器从 ftp 下载并收到操作已超时的消息。Filezilla 下载文件然后超时，但它巧妙地使用 REST 命令再次尝试。我怀疑实施这可能是理想的解决方案，所以我要弄清楚这一点。如果我成功，将作为答案发布。结束编辑

需要注意的一点是，在传递 WebException 之前，对下载文件的访问被阻止。因此，在我无法影响超时的 WebClient 的情况下，它只会长时间挂在 100% 上。然后抛出异常。如果我将 FtpRequest 超时设置为 1000 并处理异常，则文件似乎已完全下载，并且我能够将其提取而不会损坏。

如果有人有任何提示或指示，甚至更好的解决方案:) 我将不胜感激。所有输入都将被接受。

谢谢

PS 我试图提供尽可能多的信息，但如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:06:48.877

尝试查看源应用程序配置是否限制了下载大小。

# php - 根据请求拥有大量结果的页面的最有效方法

> ID：10211313
> 
> 赞同：0
> 
> 时间：2012-04-18T14:17:31.590
> 
> 标签：php, jquery, mysql, ajax

我能想到的最好的例子是体育名人堂页面。

然后，您可以有一个导航，可以根据用户的请求限制结果，例如过去 3 个月和拳击。

显示多种结果布局的最佳方式是什么，例如，

游泳结果与足球有不同的布局，足球与拳击不同，然后按时间戳添加时间限制。

这些是我迄今为止想到的选项，并希望得到您的意见。

**简单的 PHP**

```
if($_GET['sport'] = "boxing"){
    if(isset($_GET['timescale'])){
        $start = 1334752108;
        $end = 1334759108;
        $query = "SELECT athlete_name, athlete_age, athlete_desc FROM `athletes` WHERE  `timestamp` BETWEEN '".$start."' AND '".$end."' AND `sport` = 'boxing' LIMIT 30";
    }   else    {
        $query = "SELECT athlete_name, athlete_age, athlete_desc FROM `athletes` WHERE `sport` = 'boxing' LIMIT 30";
    }

    while($row = mysql_fetch_array(mysql_query($query))){
        echo "<div class='boxing'>";
        //show results
        echo "</div>";
    }
}
if($_GET['sport'] = "swimming"){
    //repeated
}
if($_GET['sport'] = "football"){
    //repeated
} 
```

**阿贾克斯**

有一个页面将处理包含与上述 PHP 类似的代码的所有请求 (ajax_request_hof.php)。

**编辑** skafandri 建议了一个数据映射类，其他人会建议这个或能给我看一个例子吗？

任何关于我如何改进这一点的想法都非常受欢迎和需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:33:42.727

您在 SO 聊天中提到您对框架没有任何经验，所以这里有一个没有框架的建议。

我知道我可能会为此大发雷霆，但是知道这是一个组织结构问题，您可以窃取 MVC 的一些概念并使用它们，直到您可以将其移植到更合适的结构以至少使其更清洁和更容易管理。

*免责声明：这绝不是一个好的结构，但对于您的问题，考虑到您告诉我您对 OOP 和/或模式没有任何背景，但作为临时解决方案，它“足够好”。*

如果您像这样订购它，您可以将它插入到几乎任何框架中，而无需做很多工作。

这是您可以做到的一种方法。

有以下课程：

```
<?php

class BasketballPage
{
    protected $mapper;

    public construct ( $mapper )
    {
        $this->mapper = $mapper;
    }

    public function display_player_info( $playerid, $sportid )
    {
        $basketball_player = $this->mapper->get_sports_player( $playerid, $sportid )

        echo '<p>Basketball player name ' . $basketball_player['name'];
        echo '<p>Some other HTML, etc</p>';
    }

    public function display_match_data($matchid, $sportid)
    {
        //Same as above but would call to $this_mapper->get_match_data(); And display relevant HTML.
    }

    public function display_player_info_AJAX( $playerid, $sportid )
    {
        $player = $this->mapper->get_sports_player();
        header('Content-type: text/json');
        header('Content-type: application/json');
        echo json_encode(  $player );
        exit();
    }
}

class BoxingPage
{
    protected $mapper;

    public function display_player_info( $playerid, $sportid)
    {
        $boxing_person = $this->mapper->get_sports_player( $playerid, $sportid)

        echo '<p>Person\'s boxing name ' . $boxing_person['name'];
        echo '<p>Some other HTML, etc</p>';
    }
}

class Mapper
{
    protected $connection;

    public function __construct ( $connection )
    {
        $this->connection = $connection;
    }

    public function get_sports_player($id, $sportid)
    {
        $query = $this->connection->prepare( 'SELECT * FROM players WHERE id = :player_id AND sport_id' );
        $query->bindValue(':player_id', $id, PDO::PARAM_INT);
        $query->bindValue(':sport_id', $sport_id, PDO::PARAM_INT);
        $query->execute();

        return $query->fetchAll( PDO::FETCH_ASSOC );
    }

    public function get_match_data($matchid, $sportid)
    {
        //some query here that returns match data.
    }
}

?> 
```

每个类都有一个 php 页面，因为它们会变大。IE：

*   篮球页面.php
*   装箱页.php
*   映射器.php

然后将这些文件包含到您的 index.php 中。你的索引可能看起来像这样：

index.php?playerid=1&sportid=2

```
<?php

//Instantiate the classes first.

$connection = new PDO($dsn,$username,$password); //your database credentials
$mapper = new Mapper( $connection );
$basketballpage = new BasketballPage( $mapper );
$boxingpage = new BoxingPage( $mapper );

if( $_GET['page'] == 2]) //lets say basketball is id 2 in your database
{
    $basketballpage->display_player_info( $_GET['playerid'], $_GET['sportid'] );
}

//In this same page you'd also add this other line, but lets say they visit the bottom link instead: index.php?playerid=1&sportid=3

if( $_GET['page'] == 3]) //lets say boxing is 3 in your database
{
    $boxing->display_player_info( $_GET['playerid'], $_GET['sportid'] );
}

//THEN lets say someone visits a different link like: index.php?index.php?matchid=1&sportid=2&page=2

if( $_GET['page'] == 2] && $_GET['matchid'])
{
    $boxingpage->display_match_data( $_GET['playerid'] );
}

//On the above you can use that same category, but a different function will display a different page!

//Bonus example, you can use it for AJAX easily. Lets say they visit the url index.php?playerid=1&sportid=2&AJAX=1

if( $_GET['page'] == 2 && GET['AJAX'] == 1) 
{
    $basketballpage->display_player_info_AJAX( $_GET['playerid'], $_GET['sportid'] );
}

?> 
```

它看起来很复杂，但是一旦你看到它是如何连接的，请注意你的索引页面只有大约 30-40 行！它可以使事情变得非常整洁，您可以只专注于在 index.php 上路由您的请求，而其他文件负责其余的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:21:00.033

[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)是处理不同数据模型的一个很好的解决方案，你也可以写一个数据映射类，虽然我推荐你使用 PHP 框架，为什么不 ZEND？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T16:03:58.173

解决这个问题的基本思路是：

从显示中分离数据检索。

```
class Model { public function getData() {} }
class View { public function write() {} }
$model = new Model();
$view = new View();
$view->write($model->getData()); 
```

实现模型::getData:

*   循环构建您感兴趣的运动，以便您可以在查询中对它们进行 OR。
*   获取所有结果。
*   使用 PHP 将数组排序为运动。

实现 View::write:

*   循环播放每项运动，正确显示。

# java - 抽象类与具体类有何不同？

> ID：10211317
> 
> 赞同：25
> 
> 时间：2012-04-18T14:17:42.167
> 
> 标签：java, class, abstract

我了解为什么我们需要 Java 中的抽象类 - 来创建子类。但是同样可以通过具体的类来实现。例如，Class Child 扩展了 Parent。这里的 Parent 可以非常抽象和具体。那么为什么我们有抽象？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-18T14:19:56.353

抽象类不能直接实例化。将一个类声明为抽象意味着您不希望它被实例化并且该类只能被继承。您正在代码中强加一个规则。

如果您进一步扩展您的父/子关系示例以包含一个 Person 类，那么将 Person 设为抽象是很有意义的。父母是一个具体的想法，孩子也是。人是现实和代码中的抽象概念。

一个好处是您**明确**定义和保护抽象类的想法。当您将类声明为抽象时，您或使用您的代码的任何其他人都无法通过实例化它来错误地使用它。这种推理类似于为什么我们将函数和字段指定为公共、私有或受保护的。如果您将函数或成员声明为私有，则实际上是在保护它免受来自客户端代码的不当访问。Privates 是用来在类中使用的，仅此而已。抽象类意味着被继承，就是这样。

现在，*您是否必须使用抽象类*并将函数和字段定义为私有而不是公共？**不，你没有**。但是提供这些概念是为了帮助保持代码整洁和组织良好。据我所知，抽象类是用所有面向对象的语言实现的。如果你环顾四周，你会发现 C++、C#、VB.NET 等都使用这个概念。

一个更好的，具体的例子：

![形状层次UML图](../Images/2a49fb6ac042eb8058075460f4ea0197.png)

在上面的示例中，Shape 类应该是抽象的，因为它本身没有用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-18T14:23:50.523

抽象类意味着它是抽象的不完整的。它需要另一个类来完成它和/或其功能。您需要扩展抽象类。它将对某些类很有用，例如。水果 所有水果都具有相同的属性，例如颜色。但是你可以对不同的水果有不同的特性，比如它是果肉，比如橙子，还是不是香蕉等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-25T19:17:00.833

我知道这是一个老问题，但看起来发帖者仍然对使用抽象类的好处有一些疑问。

如果你是唯一一个会使用你的代码的人，那么真的没有任何好处。但是，如果您正在编写代码供他人使用，则有好处。例如，假设您编写了一个缓存框架，但希望允许客户端创建自己的缓存实现类。您还希望跟踪一些指标，例如假设打开了多少缓存。您的抽象类可能看起来像这样：

```
public abstract class AbstractCache {
    public final void open() {
        ... // Do something here to log your metrics
        openImpl();
    }

    protected abstract void openImpl() { }
} 
```

AbstractCache 类本身是无用的，您不希望客户端尝试实例化一个并将其用作缓存，如果该类是具体的，他们将能够做到这一点。您还想确保他们无法绕过您的指标日志记录，如果您只为他们提供缓存接口，他们将能够做到这一点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-18T14:25:54.760

抽象的重点不是创建子类。它更多是关于在您的代码中创建接缝。您希望代码可测试和解耦，从而实现可维护性的最终目标。出于类似的原因，抽象也使我们能够在不产生副作用的情况下替换一些代码。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-22T05:38:42.530

抽象类旨在用作派生其他类的基类。派生类应为未在基类中实现的方法提供实现。实现所有缺失功能的派生类称为具体类

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-01T14:18:28.730

根据我的理解

***抽象类***是一个只描述行为但不实现它的类。考虑抽象类的这个 Java 示例：

```
public interface DoSomething(){
public void turnOnTheLight(); 
} 
```

***具体类***是那些要实现的类。例如：

```
 public abstract class A(){
        public void doIt(); 
    } 
    public class B extends A(){
        public void doIt(){ 
        //concrete method
        System.out.println(“I am a Concrete Class Test”); 
    }
 } 
```

换句话说，java中的具体类是任何这样的类，它具有从接口或抽象类继承的所有成员的实现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-30T21:47:38.223

对于那些只寻求纯技术方法差异的人来说，具体父类和抽象父类之间最明显的区别是子类**有义务**包含/实现特定方法。

具体的父类不能强制/强制其子类包含/实现方法。抽象父类通过声明抽象方法来强制其子类这样做。

除了上述之外，还涉及到设计和功能要求来决定抽象类的使用。这样的例子可以在`javax.servlet.http.HttpServlet`课堂上找到

# ocaml - OCamlbuild 和 camlp4 选项

> ID：10211326
> 
> 赞同：5
> 
> 时间：2012-04-18T14:18:06.277
> 
> 标签：ocaml, ocamlbuild, camlp4

我正在使用 camlp4.macro 来启用条件编译。我在通知 OCamlbuild 标记为“use_jscore”的某些文件必须使用给定的 camlp4 选项进行预处理时遇到问题。这是我目前拥有的：

```
let _ = dispatch begin function
  | After_rules ->
    flag ["ocaml"; "use_jscore"] (S[A"-package"; A"camlp4.macro"; A"-syntax"; A"camlp4o"; A"-ppopt"; A"-DUSE_JSCORE"]); 
```

但这被 OCamlbuild 完全错误地逃脱了。我正在使用 ocamlfind，所以基本上我想告诉 OCamlbuild 的是，所有标记为“use_jscore”的 OCaml 文件都必须由 camlp4.macro 预处理，该文件也提供了 -DUSE_JSCORE 选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T21:31:35.130

_tags 和命令行方法也应该可以工作，尽管它不会针对单个文件。

_tags的内容：

```
<*.*>: syntax(camlp4o), package(camlp4.macro) 
```

命令行：

```
ocamlbuild -use-ocamlfind -cflags -ppopt,-DUSE_JSCORE ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T17:06:33.420

您在匹配的标志列表中缺少一个标志：

```
 let options = S[...] in
 flag ["ocaml"; "compile"; "use_jscore"] options;
 flag ["ocaml"; "ocamldep"; "use_jscore"] options 
```

实际上，您只想在计算依赖项（启用“ocamldep”标志）和编译（启用“编译”标志）时使用camlp4选项，而不是在使用预处理器时（其中“pp " 标志启用）或链接时（启用“链接”标志时）。

所以现在如果你使用`ocamlbuild -use-ocamlfind <target>`它应该可以正常工作。

# oracle-adf - af:validateRegExp 的 ADF 问题（绑定长字段）

> ID：10211332
> 
> 赞同：0
> 
> 时间：2012-04-18T14:18:16.520
> 
> 标签：oracle-adf, webcenter

我在 WebCenter 环境中有一个 portlet 应用程序。这个应用程序是使用 JSF（使用 ADF 实现）制作的，所以我有一个这样的字段：

```
<af:inputText visible="#{CadastrarFormularioContato.showCodigoEc}"
                        label="#{msg.CODIGODOEC}" id="it2" required="true"
                        requiredMessageDetail="#{msg.INFORMECODIGOEC}"
                        showRequired="true"
                        value="#{CadastrarFormularioContato.item.cdEstabelecimento}">                        
                        <af:validateRegExp messageDetailNoMatch="#{msg.CODIGOECSOMENTENUMEROS}" pattern="^[0-9]{1,}$"/>              
                        <af:convertNumber type="number"/>
                        </af:inputText> 
```

但是，当我调用表单提交时，我收到以下错误：

```
javax.portlet.faces.BridgeException: java.lang.IllegalArgumentException: 'value' is not of type java.lang.String. 
```

我的 Object.longField 是：

```
private Long longField 
```

（及其获取器/设置器）

我尝试使用 convert、convertNumber 等，但没有成功。

问题是关于“validateRegExp”标签（如果我删除它，工作）那么，为什么？

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:58:51.317

validateRegExp 只接受字符串。如果您可以更改 java 类，那么添加一个 String 字段来隐藏 Long 是一个简单的修复。如果没有，您可以编写自己的正则表达式验证器。

# cron - 除了 01:00 和 02:00 之间的小时，每 5 分钟的 Cron 表达式？

> ID：10211333
> 
> 赞同：7
> 
> 时间：2012-04-18T14:18:21.450
> 
> 标签：cron

我的需求在标题中很明确。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T14:38:58.887

你试过这个：

```
0 0/5 0,2-23 * * ? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:39:24.770

尝试这样的事情`0 0/5 0,2-23 * * ?`

# android - ScrollView 内的视图并没有占据所有位置

> ID：10211338
> 
> 赞同：160
> 
> 时间：2012-04-18T14:18:36.260
> 
> 标签：android, layout, scrollview

我在 ScrollView 中有一个 RelativeLayout。我的 RelativeLayout 有`android:layout_height="match_parent"`，但视图没有占用整个大小，它就像一个 wrap_content。

有没有办法拥有真正的 fill_parent/match_parent 行为？

我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

    <ImageView
    android:id="@+id/top"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:scaleType="fitXY"
    android:src="@drawable/top" />

    <ImageView
    android:id="@+id/header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/top"
    android:scaleType="fitXY"
    android:src="@drawable/headerbig" />

    <ImageView
    android:id="@+id/logo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/header"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="3dp"
    android:src="@drawable/logo" />

    <ScrollView
    android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/bottom"
    android:layout_below="@+id/logo"
    android:background="@drawable/background" >

        <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

             <ImageView
            android:id="@+id/dashboard01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/dashboard02"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="30dp"
            android:src="@drawable/dashboard01"
            android:visibility="visible" />

            <ImageView
            android:id="@+id/dashboard02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_alignParentRight="true"
            android:layout_marginRight="10dp"
            android:src="@drawable/dashboard02" />

             <ImageView
            android:id="@+id/dashboard03"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/dashboard02"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="40dp"
            android:src="@drawable/dashboard03"
            android:visibility="visible" />
         </RelativeLayout>
    </ScrollView>

    <ImageView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/logo"
    android:layout_centerHorizontal="true"
    android:scaleType="fitXY"
    android:src="@drawable/bar" />

    <ImageView
    android:id="@+id/bottom"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:scaleType="fitXY"
    android:src="@drawable/bottom" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：496
> 
> 时间：2012-04-18T14:22:06.273

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-01-03T14:22:16.317

Just add android:fillViewport="true" in yout xml layout in Scrollview

```
<ScrollView android:layout_height="match_parent"
    android:layout_width="match_parent"
    android:background="@color/green"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fitsSystemWindows="true"
    android:fillViewport="true"
    >

<!--define views here-->

</ScrollView> 
```

# maven - maven 和大气 0.8.4

> ID：10211339
> 
> 赞同：-1
> 
> 时间：2012-04-18T14:18:36.300
> 
> 标签：maven, atmosphere

我的 pom.xml 中需要 Atmosphere 0.8.4

```
 <dependency>
        <groupId>org.atmosphere</groupId>
        <artifactId>atmosphere-runtime</artifactId>
        <version>0.8.4</version>
        <type>bundle</type>
    </dependency> 
```

但我明白了

```
Could not find artifact org.atmosphere:atmosphere-runtime:bundle:0.8.4 in central (http://repo1.maven.org/maven2) -> [Help 1] 
```

有人知道具有这种依赖关系的存储库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:32:27.563

它就在那里[http://repo1.maven.org/maven2/org/atmosphere/atmosphere-runtime/0.8.4/](http://repo1.maven.org/maven2/org/atmosphere/atmosphere-runtime/0.8.4/) 你需要从你的依赖声明中删除类型包。

# python - 在 Python 中将元组拆分为所需的格式

> ID：10211350
> 
> 赞同：3
> 
> 时间：2012-04-18T14:19:03.030
> 
> 标签：python, sqlite, tuples

我从 sqlite3 读取数据，输出就像 `(3252, u'https://www.google.fr/search?aq=f&sourceid=chrome&ie=UTF-8&q=python+split+tuple', u'Using the split command in a list - Python', 10)`

所以我想将它重新格式化为一个表格： `table = [["", "number", "url", "title"], ["number", 3252], ["urls", .....], ["title", ....]]` 那么，我怎么能这样，因为拆分不能用于元组......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:22:54.703

```
keys = ["number", "url", "title"]
table = [zip(keys, tup) for tup in lines if len(tup) == 3] 
```

如果你想要它作为字典：

```
table = [dict(zip(keys, tup)) for tup in lines if len(tup) == 3] 
```

# c# - 只有最后一个单元格被添加到行

> ID：10211368
> 
> 赞同：4
> 
> 时间：2012-04-18T14:19:41.847
> 
> 标签：c#, asp.net

我正在尝试手动将三个标题添加到表中。该表使用来自 SqlDataReader 的数据很好地填写，但我无法让第一行保持不变。

```
 TableRow iRow = new TableRow();
        TableCell iCell = new TableCell();
        iCell.Text = "SUBMITTED BY";
        iRow.Cells.Add(iCell);
        iCell.Text = "ON";
        iRow.Cells.Add(iCell);
        iCell.Text = "ISSUE DESCRIPTION";
        iRow.Cells.Add(iCell);
        table.Rows.Add(iRow); 
```

仅导致最后一个条目（在本例中为 ISSUE DESCRIPTION）显示在表上。我找到了一种解决方法

```
 TableRow iRow = new TableRow();
        TableCell iCell = new TableCell();
        TableCell iCell2 = new TableCell();
        TableCell iCell3 = new TableCell();
        iCell.Text = "SUBMITTED BY";
        iRow.Cells.Add(iCell);
        iCell2.Text = "ON";
        iRow.Cells.Add(iCell2);
        iCell3.Text = "ISSUE DESCRIPTION";
        iRow.Cells.Add(iCell3);
        table.Rows.Add(iRow); 
```

但这让我很困扰。我的逻辑有问题，还是我在 C# 中遗漏了什么？我对 C 有很好的掌握，但几周前才开始使用 C#。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T14:23:52.323

> 有什么我在 C# 中缺少的东西吗

听起来像，是的。

这：

```
TableCell iCell = new TableCell(); 
```

创建一个`TableCell`对象，并将对它的*引用*`iCell`分配给变量。的值`iCell`只是对对象*的*引用。这不是对象本身。这：

```
iRow.Cells.Add(iCell); 
```

将该*引用*传递给该`Add`方法。它*不会*将对象传递给`Add`- 你永远不能在 C# 中这样做。因此，您的行最终会包含对同一单元格的大量引用，并且您在以下行中所做的所有更改：

```
iCell.Text = "ON"; 
```

只是互相覆盖，因为他们正在对同一个对象进行更改。

您可能会发现这些文章很有用：

*   [参考和价值](http://pobox.com/~skeet/csharp/references.html)
*   [C#中的参数传递](http://pobox.com/~skeet/csharp/parameters.html)

就个人而言，我会更改您的代码以使用集合初始化程序和对象初始化程序：

```
TableRow row = new TableRow {
    Cells = {
        new TableCell { Text = "SUBMITTED BY" },
        new TableCell { Text = "ON" },
        new TableCell { Text = "ISSUE DESCRIPTION" },
    }
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T14:22:17.333

`iCell`您每次都需要重新创建，否则您将一遍又一遍地重新添加相同的实例并且只是更改其文本。由于它们都是同一个实例，因此`.Add(..)`操作会识别它并且不会再次添加它，因此在代码末尾的行中实际上仍然只有一个单元格 - 的单个实例`iCell`。

这是一个应该可以正常工作的示例：

```
TableRow iRow = new TableRow();
TableCell iCell = new TableCell();
iCell.Text = "SUBMITTED BY";
iRow.Cells.Add(iCell);
iCell = new TableCell(); // create new cell
iCell.Text = "ON";
iRow.Cells.Add(iCell);
iCell = new TableCell(); // create new cell
iCell.Text = "ISSUE DESCRIPTION";
iRow.Cells.Add(iCell);
table.Rows.Add(iRow); 
```

如果你想让你的代码更简洁一些，你可以创建一个帮助方法，它返回一个新的单元格实例，并为文本提供一个参数：

```
public TableCell CreateCell(string text) {
    TableCell iCell = new TableCell();
    iCell.Text = text;
    return iCell;
} 
```

然后您的代码可以简化为以下内容：

```
TableRow iRow = new TableRow();
iRow.Cells.Add(CreateCell("SUBMITTED BY"));
iRow.Cells.Add(CreateCell("ON"));
iRow.Cells.Add(CreateCell("ISSUE DESCRIPTION"));
table.Rows.Add(iRow); 
```

# java - 如何估计 Java 中数据结构/变量的内存大小？

> ID：10211369
> 
> 赞同：1
> 
> 时间：2012-04-18T14:19:45.917
> 
> 标签：java, jung

我正在为一个课程做一个项目，我应该实现研究论文中描述的算法并运行论文中描述的实验。该论文与最短路径查询有关，因此我使用的是[JUNG](http://jung.sourceforge.net/)库；用于实验的论文和数据集可在[此处](http://dbis.informatik.uni-freiburg.de/index.php?project=TEDI)找到。

无论如何，实验的一部分涉及将算法使用的数据结构（从原始图派生的树和最短路径上的一些信息）与其他算法中的数据结构在运行时使用的内存进行比较。同一张图。该论文的作者用 C++ 编写了代码，但我的教授让我们选择在这个项目中使用哪种语言，所以我选择了 Java，因为我使用它的次数更多，因此用它编写代码更快……但现在我不是确定如何弄清楚这个内存使用情况。

我发现一些问题提出了类似的问题，但有几个问题很老（4 或 5 年），而其他问题似乎并没有提出完全相同的问题；他们正在计算不会改变的结构的大小。所以我希望有人能给我指出一个算法、方法，甚至更好的库，可以对此给出一个很好的估计。我认为它不需要准确，但我至少需要某种估计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:24:25.460

您想查看各种 SizeOf 实现：

*   这里：[http ://sizeof.sourceforge.net/](http://sizeof.sourceforge.net/)

*   在这里： [http](http://www.javaworld.com/javaworld/javaqa/2003-12/02-qa-1226-sizeof.html) ://www.javaworld.com/javaworld/javaqa/2003-12/02-qa-1226-sizeof.html （虽然这是为静态大小而不是运行时大小设计的）

不过，[这个问题](https://stackoverflow.com/questions/52353/in-java-what-is-the-best-way-to-determine-the-size-of-an-object)似乎有更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:31:35.430

我认为这取决于 Java 虚拟机的实现。在文档[http://java.sun.com/docs/books/jni/download/jni.pdf](http://java.sun.com/docs/books/jni/download/jni.pdf)或[http://en.wikipedia.org/wiki/Java_Native_Interface](http://en.wikipedia.org/wiki/Java_Native_Interface)中，类型映射到 C++ 到 Java。

例如，

java boolean 类型是 unsigned char jboolean unsigned 8 bits

# jquery - 在播放器加载之前获取歌曲的持续时间

> ID：10211370
> 
> 赞同：2
> 
> 时间：2012-04-18T14:19:46.057
> 
> 标签：jquery, jplayer

我可以用类似的东西得到它：

```
$("#jquery_jplayer_1").jPlayer("getDuration") ? 
```

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:27:26.180

jPlayer 将有关正在播放的文件的信息放入`data`它绑定到的元素的集合中。试试这个：

```
var duration = $("#jquery_jplayer_1").data("jPlayer").status.duration; 
```

# ejb - JPA CDI 将 DAO 注入实体

> ID：10211371
> 
> 赞同：2
> 
> 时间：2012-04-18T14:19:55.380
> 
> 标签：ejb, entity, jpa-2.0, java-ee-6, cdi

我是 JPA 和 CDI 的新手，我正在尝试使用这些框架创建企业应用程序。

我知道如何注入 bean 并保持一切整洁和无状态。我还知道 JPA 会为我加载关系等，这样我就不必再担心了。我仍然将我的 DAO 用于特定的查找方法，当然还可以创建新实体。

我知道我不想将东西注入我的实体，因为它们由 JPA 管理，我需要使用`new`关键字来创建一个新实体（而不是加载）。

我习惯于使用其他类来管理我的实体，例如，如果我们有一个用户和一个组，我使用无状态 bean 来管理组（创建新的、查找的等），并且这个无状态 bean 使用我的 DAO 来检索和发送数据。

我使用 Group 实体来管理用户（也许这是错误的？）但我不想将 DAO 注入到 Group 中，因为它是一个实体。我知道这个设计有问题，但我找不到最佳实践。

所有管理类都应该是 EJB 吗？我习惯于为我的逻辑创建域类，我是否应该抛弃这个概念，将我的所有逻辑放在 EJB 中并仅使用实体来保存数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:49:42.173

> 我使用 Group 实体来管理用户（也许这是错误的？）但我不想将 DAO 注入到 Group 中，因为它是一个实体。我知道这个设计有问题，但我找不到最佳实践。

如果 a`Group`有`User`s，则将其映射为一个集合（可能是 OneToMany）。

使用另一个不同的 bean 来封装持久性操作，例如 a`GroupService`或 a `GroupDao`。在这个 bean 中，您将注入一个 EntityManger，它负责持久性（“管理用户和组”）。

[本教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnbpz.html)应该给你一个开始。

> 所有管理类都应该是 EJB 吗？

当然不一定。但是在不知道您的要求的情况下很难说（阅读：*不可能）。*我建议您添加带有更多信息的孤立问题，然后更容易讨论您的问题......

根据经验：尝试将实体（Group、User）与业务逻辑和持久性操作（GroupService、...Dao）分开。

我发现[**这本书**](https://rads.stackoverflow.com/amzn/click/com/0557078326)对后 J2EE 模式进行了很好的概述和讨论。

# python - 在没有 Ghostscript 的情况下在 Windows 上将第一个 PDF 页面提取为图形

> ID：10211378
> 
> 赞同：1
> 
> 时间：2012-04-18T14:20:12.530
> 
> 标签：python, windows, pdf

我正在寻找一种解决方案，可以将 Windows 上的 PDF 文件的第一页提取为图像，而无需安装 Ghostscript（过于依赖）。我尝试了 ImageMagick （转换），但这也代表了 Ghostscript。是否有其他一些独立的工具可以在 Windows 上执行此任务？

对于集成，我正在寻找一种可以在 Python 级别直接使用或通过 os.system() 调用或类似方法使用的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:31:59.847

我建议[Poppler](http://poppler.freedesktop.org/)或[MuPDF](http://www.mupdf.com/)。后来为 Windows 提供了二进制文件，根据我的经验（尽管在 Linux 上）非常有效。Poppler 是 GPLv2 许可，MuPDF 是 GPLv3。

更新：不幸的是，自 1.2 版以来，MuPDF 切换到 Affero GPLv3。

# opengl-es - 在 OpenGLES 中使用坐标数组绘制自定义形状

> ID：10211380
> 
> 赞同：0
> 
> 时间：2012-04-18T14:20:17.867
> 
> 标签：opengl-es

现在，我在添加三角形或正方形等多边形时没有问题，但是当我尝试添加更复杂的东西时问题就来了。

这是我用于正方形的：

```
GLfloat squareVertices[] = {
        50, 50,
        150, 50,
        50, 150,
        150, 150
    };
    GLfloat squareTexture[] = {
        0, 0,
        1, 0,
        0, 1,
        1, 1
    };

    glColor4f( 1, 0, 0, 1 );

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glEnable(GL_BLEND);
    glBlendFunc( GL_ONE, GL_ONE_MINUS_SRC_ALPHA );

    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, 0, squareVertices);
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 0, squareTexture 
```

这很有效，但是任意数量的点呢？

例如，假设我有一个 L 形，具有以下几点：

```
0,0         10,0

            10,80                     100,80

0,100       10,100                    100,100 
```

这是一个 L（尝试查看连接坐标的线）

我的问题是，鉴于这 7 点（或 8 或 100），我该如何绘制图形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:48:44.757

给定坐标点列表，您需要生成三角网格和一组 uv 坐标（如果您真的需要它们）。三角化后，您可以使用`gldrawarrays`

以下是一些可能对您有所帮助的资源：

三角剖分 [http://www.cs.unc.edu/~dm/CODE/GEM/chapter.html](http://www.cs.unc.edu/~dm/CODE/GEM/chapter.html)

另一个可能有助于生成 UV 的问题： [计算任意网格的平面 UV 坐标](https://stackoverflow.com/questions/8960930/calculating-planar-uv-coordinates-for-arbitrary-meshes)

如果您使用的是桌面 OpenGL 而不是 OpenGL ES，您实际上可以在没有三角测量的情况下使用`GL_POLYGONS`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:21:37.087

您必须将形状转换为三角形列表。

# asp.net - 在 ASP.NET 中使用 HttpWebRequest

> ID：10211382
> 
> 赞同：1
> 
> 时间：2012-04-18T14:20:19.620
> 
> 标签：asp.net, httpwebrequest, credentials

我有一个类使用 HttpWebRequest 发布一些 XML 并接收一些 XML。它在 Windows 应用程序上运行良好，但是当我在 ASP.Net Web 端使用它时，我得到 WebException“无法连接到远程服务器”。我认为这与通过我的公司代理有关。但我不确定如何设置凭证以便它可以在网页中工作。下面是发布 XML 的代码（m_Credentials 已使用“CredentialCache.DefaultCredentials”设置：

```
 private string PostData(string url, string postData)
    {
      HttpWebRequest request=null;

      Uri uri = new Uri(url);
      request = (HttpWebRequest) WebRequest.Create(uri);
      request.Method = "POST";
      request.ContentType = "application/x-www-form-urlencoded";
      request.ContentLength = postData.Length;

      // Tell it to use our credentials else we may not get through 
      if (m_Credentials != null)
      {
        request.Proxy.Credentials = m_Credentials;
      }

      using(Stream writeStream = request.GetRequestStream())
      {
        UTF8Encoding encoding = new UTF8Encoding();
        byte[] bytes = encoding.GetBytes(postData);
        writeStream.Write(bytes, 0, bytes.Length);
      }

      string result=string.Empty;
      using (HttpWebResponse response = (HttpWebResponse) request.GetResponse())
      {
        using (Stream responseStream = response.GetResponseStream())
        {
          using (StreamReader readStream = new StreamReader (responseStream, Encoding.UTF8))
          {
            result = readStream.ReadToEnd();
          }
        }
      }
      return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:24:25.633

> 下面是发布 XML 的代码（m_Credentials 已使用“CredentialCache.DefaultCredentials”设置

这可能是问题所在。在 Windows 应用程序上，用于通过代理进行身份验证的凭据将是当前登录用户的凭据。在 ASP.NET 应用程序上，使用的凭据将来自运行 asp.net 进程的本地服务帐户的凭据。一种选择是将凭据设置为网络上的实际有效帐户。

```
request.Credentials = new NetworkCredential("username","password","domain"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:20:00.427

问题被追溯到我需要为请求设置代理的事实

```
request.Proxy = new WebProxy(m_ProxyAddress); 
```

并且 IE 中的代理地址是一个 java 脚本，它返回要使用的真实地址

感谢您的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:27:29.017

尝试将值放在这里：

```
 request.Credentials = new NetworkCredential(cre.Username, cre.Password, cre.Domain); 
```

如果您不想每次都发送，也可以使用 CredentialCache...）

```
CredentialCache cache = new CredentialCache();
Uri prefix = new Uri ("http://exchange.somedomain.com");
cache.Add (prefix, "Digest", new NetworkCredential ("joe", "passwd"));
cache.Add (prefix, "Negotiate", new NetworkCredential ("joe", "passwd")); 
```

# android - Facebook Android sdk 在身份验证中抛出丢失的重定向 uri

> ID：10211387
> 
> 赞同：1
> 
> 时间：2012-04-18T14:20:37.960
> 
> 标签：android, facebook, sdk, single-sign-on

我有与此链接相同的问题：[here](https://stackoverflow.com/questions/7721333/facebook-android-sdk-throwing-missing-redirect-uri-on-authetication)

但是在我的应用程序的高级设置中禁用增强的身份验证对话框不会改变任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:34:18.110

我在我的 Android 应用程序中遇到了同样的问题。禁用增强的身份验证对话框会将错误更改为更一般的“发生错误”消息，因此它根本无法解决问题。作为第二个测试，我从我的帐户中删除了流行的 FriendCaster android 应用程序的权限，并尝试重新登录。它有完全相同的错误。

所以这似乎是一个临时的 Facebook 错误，希望他们能尽快修复它。

作为参考：http: [//developers.facebook.com/bugs/381202678591889](http://developers.facebook.com/bugs/381202678591889)

# r - 用另一个数据框增加数据框缺失值

> ID：10211394
> 
> 赞同：0
> 
> 时间：2012-04-18T14:20:50.153
> 
> 标签：r, join, merge

我有以下数据框：

```
> df1 = data.frame(ind = 1:4, x=c('a', 'b', NA, 'd'))
> df2 = data.frame(ind = 1:4, x=c(NA, NA, 'c', NA))
> df1
  ind    x
1   1    a
2   2    b
3   3 <NA>
4   4    d
> df2
  ind    x
1   1 <NA>
2   2 <NA>
3   3    c
4   4 <NA> 
```

我想将它们组合起来，用 df2 中的数值填充 df1 中的缺失值。我怎样才能做到这一点？我不能使用合并或连接命令来做到这一点：

```
> merge(df1, df2, by='ind', all=T)
  ind  x.x  x.y
1   1    a <NA>
2   2    b <NA>
3   3 <NA>    c
4   4    d <NA> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:52:32.913

您构建测试用例的方式会产生因素，并为紧凑的解决方案施加额外的障碍，因为级别不一致。您可以使用 levels= 它们唯一值的并集来创建因子，或者最好使用字符向量：

```
df1 = data.frame(ind = 1:4, x=c('a', 'b', NA, 'd'), stringsAsFactors=FALSE)
df2 = data.frame(ind = 1:4, x=c(NA, NA, 'c', NA), stringsAsFactors=FALSE)
df1[is.na(df1)] <- df2[is.na(df1)] # the key is same index on both sides
 df1
#---------
  ind x
1   1 a
2   2 b
3   3 c
4   4 d 
```

可以说不太受欢迎的方法（但对于您不想重新处理的一对就地数据集来说可能更好）是：

```
 df1$x <- factor(df1$x, levels=union(levels(df1$x), levels(df2$x) ) )
 df2$x <- factor(df2$x, levels=union(levels(df1$x), levels(df2$x) ) )
 df1[is.na(df1)] <- df2[is.na(df1)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:44:13.643

`x`如果`NA`在两个数据集中你会怎么做？这是做你想做的吗？

```
x <- merge(df1, df2, all = TRUE, by = "ind")
x <- transform(x, newcol = ifelse(is.na(x.x), as.character(x.y), as.character(x.x)))

> x
  ind  x.x  x.y newcol
1   1    a <NA>      a
2   2    b <NA>      b
3   3 <NA>    c      c
4   4    d <NA>      d 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:23:30.097

这个怎么样：

```
rbind(df1[complete.cases(df1),],df2[complete.cases(df2),])
  index x
1     1 a
2     2 b
3     3 c
4     4 d 
```

# .net - 仅针对 .NET 框架 4 的客户端配置文件的解决方案中的一些项目

> ID：10211398
> 
> 赞同：0
> 
> 时间：2012-04-18T14:21:13.267
> 
> 标签：.net, wpf, architecture, .net-client-profile

如果 WPF 应用程序解决方案中的大多数项目都以**.NET Framework 4**为目标，那么同一解决方案的某些类库项目能否以**.NET Framework 4 Client Profile**为目标？
完全没问题，还是这样的组合有问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:24:24.087

是的，这完全没问题。Client Profile 是完整框架的[严格子集](http://msdn.microsoft.com/en-us/library/cc656912.aspx)，因此整个应用程序都可以正常工作。

该应用程序将要求安装*完整*的.NET 4.0，但可以重用以 CP 本身为目标的类库（例如，作为同样以 CP 为目标的另一个应用程序的一部分）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:24:28.707

没关系，但我认为您缺少 .NET Framework 4 客户端配置文件的想法。

> .NET Framework 4 客户端配置文件是针对客户端应用程序优化的 .NET Framework 4 的子集。它为大多数客户端应用程序提供功能，包括 Windows Presentation Foundation (WPF)、Windows Forms、Windows Communication Foundation (WCF) 和 ClickOnce 功能。这为面向 .NET Framework 4 客户端配置文件的应用程序提供了更快的部署和更小的安装包。

您的应用程序需要在具有完整 .NET4 环境的计算机上运行，​​尽管您使用 .NET Framework 4 客户端配置文件来定位某些项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T14:25:29.930

应该没问题，除非 Client Profile 项目之一引用了完整的 Framework 项目之一。那么以 CP 为目标有点毫无意义，因为需要完整的框架。我认为混合它们不会有问题，但如果项目相关，将它们全部设置为完整的 .NET 可能是个好主意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T14:24:12.890

我能看到的唯一问题是，如果你有一个或多个`projects`正在`solution`使用`.NET Framework 4`目标，而不是`Client Profile`它会迫使你的整体`solution`需要完整的`.NET Framework`. 除此之外，它不应该有太大的区别，您可以轻松更改所有项目以使用完整的`.NET Framework`，或者如果您不需要`.NET`为您的`solution`.

最重要的是它可以正常工作，但如果一个或多个项目正在使用完整版本`.NET Framework 4`，则可能需要您的客户安装额外的更新，具体取决于您的要求。

一个很好的概念介绍以及这里提供的客户端配置文件的内容列表：http: [//blogs.msdn.com/b/jgoldb/archive/2009/05/27/net-framework- 4-client-profile-introduction.aspx](http://blogs.msdn.com/b/jgoldb/archive/2009/05/27/net-framework-4-client-profile-introduction.aspx)

# delphi - 创建新项目时出现“项目已包含名为 Unit1 的表单或模块”错误

> ID：10211402
> 
> 赞同：1
> 
> 时间：2012-04-18T14:21:18.227
> 
> 标签：delphi, ide, delphi-2007

我正在使用 Delphi 2007。当我尝试创建一个新的 VCL 表单应用程序（**File->New->VCL Forms Application**）时，IDE 立即响应上述错误。

我以前也遇到过这种情况，甚至以为我在 StackOverflow 上问过答案。但对于我的生活无法找到答案。如果我记得它与实际的**unit1.pas**文件有关，它不应该在某个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:07:24.560

我终于偶然发现了这个问题。 **工具->选项->环境选项->默认项目**设置为**E**

# javascript - ExtJS 4 动态添加按钮

> ID：10211404
> 
> 赞同：1
> 
> 时间：2012-04-18T14:21:22.007
> 
> 标签：javascript, extjs

我有一个显示数据库记录的网格。我有列 - 一个是记录的名称，第二个是我想放置一个按钮并在此之后添加一些逻辑。我有这个网格：

```
Ext.create('Ext.grid.Panel', {
        id: 'id-procedures',
        title: 'Documents',
        store:'Procedures',
        columns: [{
            header: 'Title'  
            dataIndex: 'name', 
            width: 500
        },{
            header: 'Open',
            renderer: this._renderOpenProcedure,
            width:50
        }), 
```

然后我尝试这个动态添加按钮：

```
_renderOpenProcedure: function() {

    var button = Ext.create('Ext.Button', {
            text: 'Click me',
            renderTo: Ext.getBody(),
                handler: function() {
            alert('You clicked the button!')
                            }
                        });
            return  button;
    }, 
```

但我在专栏中得到的是：

> [对象对象]

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:23:36.603

看看这里：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.column.Action](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.column.Action)

不需要将按钮渲染到单元格中，为此已经有特殊类型的列。

# eclipse - 在 Eclipse indigo 上安装 JBoss 工具 3.3 时出现问题

> ID：10211409
> 
> 赞同：1
> 
> 时间：2012-04-18T14:21:43.037
> 
> 标签：eclipse, jboss, eclipse-plugin

我在 eclipse indigo 上安装 jboss 工具 3.3 时遇到问题。更准确地说，我正在使用：

面向 Web 开发人员的 Eclipse Java EE IDE。版本：靛蓝发布

我必须在课堂上安装它，所以我按照给出的安装教程进行操作：[http ://www.jboss.org/tools/download/installation/update_3_3](http://www.jboss.org/tools/download/installation/update_3_3)

当我尝试安装（我只需要 Maven Support e Web 和 Java EE Development 包）时，我收到以下错误：

```
Cannot complete the install because of a conflicting dependency.
 Software being installed: JBoss JAX-RS Tools 1.2.2.v20120323-1522-H83-Beta2        (org.jboss.tools.ws.jaxrs.feature.feature.group 1.2.2.v20120323-1522-H83-Beta2)
 Software currently installed: Eclipse IDE for Java EE Developers 1.4.0.20110615-0550     (epp.package.jee 1.4.0.20110615-0550)
 Only one of the following can be installed at once: 
Debug UI 3.7.102.v20111129-1423_r372 (org.eclipse.debug.ui 3.7.102.v20111129-1423_r372)
Debug UI 3.7.0.v20110518 (org.eclipse.debug.ui 3.7.0.v20110518)
Debug UI 3.7.101.v20110817_r371 (org.eclipse.debug.ui 3.7.101.v20110817_r371)
Cannot satisfy dependency:
From: Eclipse IDE for Java EE Developers 1.4.0.20110615-0550 (epp.package.jee 1.4.0.20110615-0550)
To: org.eclipse.epp.package.jee.feature.feature.group [1.4.0.20110615-0550]
Cannot satisfy dependency:
From: Java EE IDE Feature 1.4.0.20110615-0550 (org.eclipse.epp.package.jee.feature.feature.group 1.4.0.20110615-0550)
To: org.eclipse.platform.feature.group [3.7.0.v20110530-9gF7UHNFFt4cwE-pkZDJ7oz-mj4OSEIlu9SEv0f]
Cannot satisfy dependency:
From: Eclipse Platform 3.7.0.v20110530-9gF7UHNFFt4cwE-pkZDJ7oz-mj4OSEIlu9SEv0f (org.eclipse.platform.feature.group 3.7.0.v20110530-9gF7UHNFFt4cwE-pkZDJ7oz-mj4OSEIlu9SEv0f)
To: org.eclipse.debug.ui [3.7.0.v20110518]
Cannot satisfy dependency:
From: JBoss JAX-RS Tools 1.2.2.v20120323-1522-H83-Beta2 (org.jboss.tools.ws.jaxrs.feature.feature.group 1.2.2.v20120323-1522-H83-Beta2)
To: org.jboss.tools.ws.jaxrs.ui [1.2.2.v20120323-1522-H83-Beta2]
Cannot satisfy dependency:
From: JBoss JAX-RS Tooling (UI) 1.2.2.v20120323-1522-H83-Beta2 (org.jboss.tools.ws.jaxrs.ui 1.2.2.v20120323-1522-H83-Beta2)
To: bundle org.eclipse.debug.ui [3.7.101,3.8.0) 
```

任何人都知道我该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:50:32.460

将您的 Eclipse 升级到 3.7.2 并安装。

参考这里[http://download.jboss.org/jbosstools/updates/development/indigo/](http://download.jboss.org/jbosstools/updates/development/indigo/)

仅供参考 Jboss 工具 3.3 不是一个稳定的版本。所以最好使用 JBoss Tools 3.2.2.Final Stable Release 和 Eclipse 3.6.2。

# perl - 在 Perl 中调用命令行函数并以字符串形式获取输出

> ID：10211410
> 
> 赞同：3
> 
> 时间：2012-04-18T14:21:55.727
> 
> 标签：perl, postgresql, command-line, plperl

在 Perl 中执行命令行函数的最佳/最简单方法是什么，以便我可以将输出作为字符串？

我实际上想要做的是从 PostgreSQL 的 PL/Perl 函数中调用一个 Java 程序，我想要输出字符串，但是目前它似乎只是返回 0。

这是一段简单的代码来解释我所追求的：

```
CREATE OR REPLACE FUNCTION perl_func()
  RETURNS character varying AS
$BODY$    
  return system("java -version");
$BODY$
  LANGUAGE plperlu VOLATILE
  COST 100; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:26:20.283

您可以使用反引号。引自[`perldoc perlop`](http://perldoc.perl.org/perlop.html)：

> *qx/字符串/
> 
> *`字符串`
> 
> 一个字符串，它（可能）被插值，然后作为系统命令使用 /bin/sh 或其等效命令执行。将接受 Shell 通配符、管道和重定向。返回收集到的命令标准输出；标准误差不受影响。在标量上下文中，它以单个（可能是多行）字符串的形式返回，如果命令失败，则返回 undef。在列表上下文中，返回一个行列表（但是您已经使用 $/ 或 $INPUT_RECORD_SEPARATOR 定义了行），如果命令失败，则返回一个空列表。

您不能使用[`system`](http://perldoc.perl.org/functions/system.html)它，因为它只返回参数的返回值（当作为 shell 命令运行时）。这应该有效：

```
CREATE OR REPLACE FUNCTION perl_func()
  RETURNS character varying AS
$BODY$
  my $output=`java -version`;
  chomp($output);
  return $output;
$BODY$
  LANGUAGE plperlu VOLATILE
  COST 100; 
```

请注意，反引号命令的输出通常包含一个尾随换行符，因此通过 摆脱它通常很有用`chomp`。

# database - 在 Microsoft Access 中导入 mp3 文件元数据

> ID：10211412
> 
> 赞同：1
> 
> 时间：2012-04-18T14:22:01.513
> 
> 标签：database, vb.net, ms-access, mp3, metadata

我想为我的应用程序创建一个媒体收藏数据库。我想为此创建一个库。现在我想要的是用户应该能够将他自己的歌曲添加到数据库中。

如何访问数据库中的 mp3 文件元数据？如何使用我的应用程序更新该数据库。

PS：我的应用程序是使用 Visual Studio 在 Visual Basic 中制作的媒体播放器。我是数据库新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:33:15.597

至于标签阅读，您可以使用预制库：

[http://sourceforge.net/projects/csid3lib/](http://sourceforge.net/projects/csid3lib/)

或者根据规格编写自己的：

[http://www.id3.org/ID3v1](http://www.id3.org/ID3v1)

[http://www.id3.org/id3v2.3.0](http://www.id3.org/id3v2.3.0)

（如果您真的想阅读 v2 标签，请使用库，处理它们很头疼）。

然后对于数据库存储，如果您只想存储某些项目（例如，ID3v1 标记的内容），请创建一个包含每个信息位的列的表。

# php - 如何在 apache 的自定义错误响应包中包含错误文档的页眉和页脚？

> ID：10211413
> 
> 赞同：0
> 
> 时间：2012-04-18T14:22:01.500
> 
> 标签：php, html, error-handling, apache

我的 PHP 脚本中有这一行，其中包含apache 提供的“*找不到文件”404 自定义错误：*

```
include('/var/www/error/HTTP_NOT_FOUND.html.var'); 
```

我的浏览器上显示的只是自定义错误页面的正文：

> 内容语言：cs 内容类型：text/html；charset=ISO-8859-2 正文：----------cs-- Po�adovan� URL nebylo na tomto serveru nalezeno。Zd� se, �e odkaz na ">odkazuj�c� str�nce je chybn� nebo zastaral�. Informujte, pros�m, autora

错误页面包含以下注释：

```
<!--#include virtual="include/top.html" --> 
```

和

```
<!--#include virtual="include/bottom.html" --> 
```

这应该是包含文件夹中的页眉和页脚。但这在我的文档根目录之外，`/var/www/html`.

如何在不将错误文件夹移动到文档根目录的情况下包含页眉和页脚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:28:07.150

在 php.ini 上配置 include_path，您可以包含它们。

[http://www.php.net/manual/en/ini.core.php#ini.include-path](http://www.php.net/manual/en/ini.core.php#ini.include-path)

或者你可以使用 php header 函数。

```
header("HTTP/1.0 404 Not Found"); 
```

另请参阅[http://httpd.apache.org/docs/2.0/mod/core.html#errordocument](http://httpd.apache.org/docs/2.0/mod/core.html#errordocument)你可以拥有

```
ErrorDocument 404 /my_custom_404_handler.php 
```

# ruby-on-rails - Rails Web 应用程序的本机移动应用程序

> ID：10211426
> 
> 赞同：0
> 
> 时间：2012-04-18T14:22:22.833
> 
> 标签：ruby-on-rails, ios

我应该如何使用我的`Rails 3`代码库并从中制作原生 iOS 应用程序？我不确定是否可以使用我必须直接构建到 iOS 应用程序中的 Rails 代码库。我的代码库需要翻译成`Objective C`吗？使用像 Appcelerator Titanium 这样的集成 IDE 是否有意义？

这应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T21:39:03.473

好吧，我确定最好的方法（如果只有一个？！）是使用 Rhodes [https://github.com/rhomobile/rhodes](https://github.com/rhomobile/rhodes)

但可以肯定的是，您不能简单地将代码库“翻译”到 Rhodes，但您可以重用大量代码。

# java - 在 Droid 手机上安装 Android 应用程序

> ID：10211433
> 
> 赞同：-2
> 
> 时间：2012-04-18T14:22:42.330
> 
> 标签：java, android, deployment, android-sdk-2.3

我最近完成了一个 Android 应用程序的编程，我想在我的手机上试用它。我按照在线说明，通过 Dropbox 将 .apk 文件放到了我的手机上。但是，当我进入手机上的保管箱安装应用程序时，我的手机显示“解析包时出现问题”。有人可以帮我解决这个问题吗？

我使用 android 模拟器和 AVD 在 eclipse 中编程。我已启用我的手机使用未知来源。它在安卓模拟器上运行良好。我使用的是安卓 4.0.3。

我正在使用 Droid Pro 型号：4.7.3 Android 版本：2.3.4 <- 这可能是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:32:38.173

你说你为 4.0.3 编译了它。尝试使用 2.3 (Gingerbread) 制作 AVD 并查看是否安装了 apk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:37:20.323

为什么不直接从 Eclipse 将它安装在手机上呢？

启用 USB 调试，然后将手机插入计算机。当您在 Eclipse 中运行该应用程序时，它应该在您的手机上安装该应用程序，然后运行它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-18T14:29:11.170

您是否启用了“未知来源”？

要在您的 Android 设备上启用或禁用非电子市场应用程序的安装：

1.  点击主页
2.  点击菜单
3.  点击设置
4.  点击应用程序
5.  点击未知来源复选框以允许/禁止安装非市场应用程序

[关联](http://androidforums.com/tattoo-support-troubleshooting/13772-parse-error-there-problem-parsing-package.html#post3770996)

# java - 如何在android中替换双引号内的char

> ID：10211436
> 
> 赞同：0
> 
> 时间：2012-04-18T14:22:55.147
> 
> 标签：java, android, regex, replace

在我的 Android 应用程序中，我想更改双引号之间的字符串的值。例如，我想替换`{"txt":`为`{"":`

我尝试了以下正则表达式，但它们不起作用......

```
 String abc=replace(str, "{\\txt\\:", "");
    String abc=replace(str, "{'txt':", "");...,etc 
```

任何人都可以提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:24:55.007

您需要使用反斜杠转义每个双引号。

您的问题有点模棱两可，所以我将介绍两种最合理的解释：

* * *

如果您想替换`{"txt":`为`""`（如您的问题中所述），请使用以下命令：

```
String abc = str.replace("{\"txt\":", "\"\""); 
```

使用此代码，文本`{"txt":foo}`变为`""foo}`.

* * *

如果要替换`{"txt":`为空字符串（如示例代码所示），请使用以下命令：

```
String abc = str.replace("{\"txt\":", ""); 
```

使用此代码，文本`{"txt":foo}`变为`foo}`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:25:50.437

`"{\\txt\\:"`表示 string `{\txt\`，如果你想匹配（并因此替换）`{"txt"`使用`"{\"txt\":"`

# macos - 在站点目录中创建指向另一个目录中文件的符号链接

> ID：10211439
> 
> 赞同：4
> 
> 时间：2012-04-18T14:22:55.727
> 
> 标签：macos, apache, symlink

这个[问题](https://stackoverflow.com/questions/3775102/creating-a-symbolic-link-in-sites-directory)解决了如何在站点目录中启用符号链接；但是，它仅适用于目录。

使用`FollowSymLinks`，OS X 上的 Apache 将遵循目录的符号链接，但不遵循文件的符号链接。

例如：

**这有效：** ~/Sites/Experiments -> /Users/myusername/Projects/Experiments/

**这失败了：** ~/Sites/test.html -> /Users/myusername/Projects/Test1/test.html

```
Forbidden 
You don't have permission to access 
```

如何配置 Apache 或权限，以便 Apache 遵循文件符号链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T01:03:45.643

1.  检查您的网络服务器用户（可能是 www-data）是否可以访问目标文件及其所有父目录的文件权限。世界可读的权限就足够了。如果您不太关心安全性（这意味着这不是生产系统），您可以执行以下操作： `chmod o+rx /Users/myusername/Projects /Users/myusername/Projects/Test1; chmod o+r /Users/myusername/Projects/Test1/test.html`
2.  确保您*没有*任何`<Location>`或`<Directory>`阻止该目标目录工作的块。
3.  确保您*确实*有一个`<Directory>`允许访问您的`/Users/myusername/Projects/Test1`路径的块。通常，Apache 只会授予对不包括您的主目录的默认位置的访问权限。您可以通过临时添加以下内容来做到这一点（在修复权限问题后将其删除，否则它会提供过多的访问权限）：

-

```
# This is a temporary debugging tool, don't leave it forever.
<Directory "/">
  Options Indexes FollowSymLinks
  AllowOverride All
  Order allow,deny
  allow from all
</Directory> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:48:31.600

目标文件需要被 Apache 用户（可能是 www-data）读取才能提供服务。目录是不同的，因为大多数用户都能够在目录上执行以查看包含的文件列表，而不管他们是否可以读取其中包含的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:08:51.283

尝试使用`chmod`or `chgrp`（在最坏的情况下，`chown`）设置适当的权限，以至少通过 Apache Web 服务器读取和执行文件。

# netty - Netty 3.3.x 打破了与 Java5 的兼容性

> ID：10211441
> 
> 赞同：0
> 
> 时间：2012-04-18T14:23:02.237
> 
> 标签：netty

我发现了 Netty 和 Java5 的兼容性问题。Java 5 中的“String”类不支持使用“Charset”类指定字符集，而只支持以字符串形式表示的字符集名称（例如，构造函数、getBytes）。

我至少见过两个不同的地方，

*   第 380 行的“QueryStringDecoder”
*   第 22 行的“WebSocketServerHandshaker13”

在 Java 5 环境中执行时代码中断的地方

对于那些无法在短时间内升级到 Java 6 但需要使用 netty 3.3.x 的人来说，是否有可能有一个 3.3.2 版本来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:22:48.727

请升级到 netty-3.4.1.Final 一旦它出来。它将解决您的所有问题，因为我们现在还支持禁用 Unsafe。只需在启动脚本中添加“-Dorg.jboss.netty.tryUnsafe=false”即可。

# ruby-on-rails-3 - Rails 验证动态创建的表单

> ID：10211442
> 
> 赞同：4
> 
> 时间：2012-04-18T14:23:02.437
> 
> 标签：ruby-on-rails-3, activerecord, validation

我正在使用 AJAX 调用来获取一些 JSON 数据并从中生成 HTML 表单，所以我事先不知道我会得到哪些输入字段。是否可以动态定义验证规则？我可能会使用[ActiveAttr](http://railscasts.com/episodes/326-activeattr)来定义伪模型，但我想在收到数据后进行验证。

所以......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-06T01:55:18.420

您可以使用`ClassName.class_eval %Q[validates :#{name}, length: {minimum: 5}]`动态添加验证。当然，您需要为`name`变量添加 setter 和 getter。`class_eval`使用字符串，所以你有无限的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T12:26:20.477

`ActiveModel`自定义验证方法或类的组合应该可以解决问题。您不能使用（AFAIK）标准验证声明，因为在声明类时您不知道字段。

# javascript - 即时将代码附加到选择元素

> ID：10211443
> 
> 赞同：1
> 
> 时间：2012-04-18T14:23:02.673
> 
> 标签：javascript, html, append

我的网页中的 Google 翻译工具包生成了以下代码：

```
<select class="goog-te-combo">
 <option value="en">English</option>
 <option value="af">Afrikaans</option>
 <option value="sq">Albanian</option> 
```

我一直在拼命创建的是一个允许我转换的脚本：

```
<option value="en">English</option>
                to
<option value="en" **style="background: red;"**>English</option> 
```

该脚本将读取*Option标记的**Value*属性，然后在动态中将自定义代码附加到 HTML 中，就像 - 如果*value=en*，添加*background:red*或类似的东西。这可能吗？

 ***谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:35:06.353

有些人会提供一个 jQuery 答案，这里是一个 vanilla js 答案：

考虑以下 HTML：

```
<form name="my">
    <select name="sl">
        <option name="en" value="en">
    </select>
</form> 
```

然后这个JS会做：

```
document.forms.my.options['en'].style.background = 'red' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:02:19.287

使用 jQuery 来做这样的事情：

```
$(function(){
    $('.goog-te-combo').change(function{
    var selectedValue = $(this).val();

    if(selectedValue == 'en')
     {
      $('.goog-te-combo option:selected').css('background','Red');
     }
    });
}); 
```

PS：未经测试，但我相信应该可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:04:37.410

这是弗洛里安提到的 JQuery 答案。

```
$(document).ready(function() {
var language = '';
var color = '';
$("#myselect option").each(function() {
    language = $(this).attr('value');
    switch (language) {
    case 'en':
        color = 'red';
        break;
    case 'fr':
        color = 'blue';
        break;
    default:
        color = "black";
        break;
    }
    $(this).attr('style', "color:" + color + ";");
});

$("#myselect").change(function() {
    $(this).css('color', $(this).find("option:selected").css('color'));
});

}); 
```

如果您愿意，可以在 case 语句中添加更多颜色。此外，只要您更改 JQuery，请确保为您的 select 语句提供 myselect 或任何您想要的 ID。

JS 小提琴：http: [//jsfiddle.net/LBFBd/](http://jsfiddle.net/LBFBd/)***

# php - 带有 CKEditor 的 KCFinder - 为上传文件设置动态文件夹

> ID：10211453
> 
> 赞同：2
> 
> 时间：2012-04-18T14:23:35.413
> 
> 标签：php, image, file-upload

我正在将 CKEditor 与 KCFinder 一起使用 - 我想根据动态值上传个人文件。

我想在用户登录后根据 SESSION 值动态更改用户可以上传的文件夹。

登录后，我想限制用户可以通过 KCFinder 插件访问的文件夹，例如..

```
User abc their path would be abc/images
User foo their path would be foo/images
User abc cannot see foo's images & vice-versa 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T17:01:07.100

我遇到了同样的问题，更糟糕的是，这取决于谁登录、管理员或标准成员。

当然，我将它集成到 TinyMCE 中，但我认为原则是相同的

这是我对问题的解决方案

我的文件夹结构是

```
/my_uploads/media

/my_uploads/media/member_folder 
```

1.  在 config.php 文件的顶部初始化 php 会话

    session_start()

2.  编辑 'types' => 数组并注释掉所有不同的 'types'

    ```
    // CKEditor & FCKEditor types
    // 'files'   =>  "",
    // 'flash'   =>  "swf",
    // 'images'  =>  "*img",

    // TinyMCE types
    // 'files'    =>  "",
    // 'media'   =>  "swf flv avi mpg mpeg qt mov wmv asf rm",
     // 'image'   =>  "*img", 
    ```

3.  将以下“类型”添加到数组中

    $_SESSION['fold_type'] => "*img swf flv avi mpg mpeg qt mov wmv asf rm",

4.  保存您的 config.php 文件

5.  打开您初始化编辑器并调用 KCFinder 的应用程序页面

6.  在初始化编辑器之前，添加以下行来声明各种 KCFinder 变量

    ```
    $_SESSION['KCFINDER'] = array();
    $_SESSION['KCFINDER']['disabled'] = false; // Activate the uploader,
    $_SESSION['KCFINDER']['uploadURL'] = "/uploads"; 
    $_SESSION['fold_type'] = "media"; 
    ```

或者

```
 $_SESSION['KCFINDER'] = array();
    $_SESSION['KCFINDER']['disabled'] = false; // Activate the uploader,
    $_SESSION['KCFINDER']['uploadURL'] = "/my_uploads/media/Members";
    $_SESSION['fold_type'] = "member_account_number_pulled_from_secure_session_variable"; 
```

7 像这样离开您调用上传者的行；

```
 file: '../tiny_mce/plugins/kcfinder/browse.php?opener=tinymce', 
```

[为 KCFinder 动态设置上传文件夹](http://www.xms-systems.co.uk/articles_read.php?a_id=77)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T15:07:18.660

它可以通过多种方式完成。我正在解释一个过程，我根据我的 php 应用程序的代码结构应用了该过程。我为不同的应用程序遵循相同的代码结构/框架，每个应用程序都作为我服务器中的一个子文件夹。因此，合乎逻辑的需要将单个 CKeditor 与 KCfinder 一起使用并以某种方式对其进行配置，以使其适用于所有应用程序。CKeditor的内容部分还可以。它可以很容易地被来自单个 CKeditor 组件的不同应用程序或项目重用。但是文件上传会出现问题，例如图像、视频或任何其他文档。为了使其适用于不同的项目，文件必须上传到不同项目的单独文件夹中。而对于 $_CONFIG['uploadURL'] 必须配置动态文件夹路径，意味着每个项目的不同文件夹路径，但在同一位置调用相同的 CKeditor KCfinder 组件。我正在逐步解释一些不同的过程。这些对我来说在 KCfinder 2.51 版上工作得很好，我希望他们也能在其他人身上工作。如果它不适用于其他开发人员，那么他们可能需要根据他们的项目代码结构和文件夹写入权限以及 CKeditor 和 KCfinder 版本在这些过程中进行一些调整。

1) 在 CKeditor\filemanagers\kcfinder_2_51\config.php 文件中

a) 在 $_CONFIG 数组定义中，搜索此行 'disabled' => false，如果发现任何替换为 'disabled' => true，则在该文件的末尾放置以下代码。代码是自我解释的，其中注释掉了逻辑和细节。代码是：

```
//Code to assign $_CONFIG['uploadURL'] dynamic value: different for different projects or sites: added by Mrinal Nandi on 5 oct, 2013: start
//session dependent dynamic $_CONFIG['uploadURL'] setting :start 

////session dependent secure method: only for single site setting: i.e. one CKeditor KCfinder for each one project domain or subdomain, not one CKeditor KCfinder for multiple project:start    
//  session_start();
//if(isset($_SESSION['KCFINDER']['uploadURL']) && $_SESSION['KCFINDER']['uploadURL']!="") { //$_SESSION['SESSION_SERVER_RELATIVEPATH']: relative folder path of the project corresponding to the webroot; should be like "/project/folder/path/"  //set this session variable in a common file in your project where the session started 
//  $file_upload_relative_path=$_SESSION['KCFINDER']['uploadURL'];  
//}
////session dependent secure method: only for single site setting: i.e. one CKeditor KCfinder for each one project domain or subdomain, not one CKeditor KCfinder for multiple project:start

//Using a single CKeditor KCfinder component for different projects or sites (multisite): start

//session dependent settings a single CKeditor KCfinder component for different projects or sites (multisite): start 
//Assuming different session_name for different projects, if represented as different sub-folders, but not work if represented as sub-domains or different domains 
//Secure and deny access for unauthorized users without any session, thus restrict access via direct link  
//but not work if projects represented as sub-domains or different domains, then have to use the session independent way provided bellow (though it is insecure), or have to implement some session related way as per the project flow and structure   

session_name(base64_decode($_REQUEST['param_project'])); 
session_start();    

if(isset($_SESSION['KCFINDER']['uploadURL']) && $_SESSION['KCFINDER']['uploadURL']!="") { //$_SESSION['SESSION_SERVER_RELATIVEPATH']: relative folder path of the project corresponding to the webroot; should be like "/project/folder/path/"  //set this session variable in a common file in your project where the session started 
    $file_upload_relative_path=$_SESSION['KCFINDER']['uploadURL'];  

}
//session dependent settings a single CKeditor KCfinder component for different projects or sites (multisite): end 

//session dependent dynamic $_CONFIG['uploadURL'] setting :end 

////session independent dynamic $_CONFIG['uploadURL'] setting: without using session :start
//if(isset($_REQUEST['param_project']) && $_REQUEST['param_project']!=""){ //base64 encoded relative folder path for file upload in the project,  corresponding to the webroot; should be like "/project/folder/file/upload/path/" before encoding 
//  $file_upload_relative_path=base64_decode($_REQUEST['param_project']);
//  
//}
////session independent dynamic $_CONFIG['uploadURL'] setting: without using session :end 

if(isset($file_upload_relative_path) && trim($file_upload_relative_path)!="" ){
    if(isset($_SESSION['KCFINDER']['uploadURL'])){
        $_CONFIG['disabled']=false;
    } else if(is_dir($file_upload_relative_path)) { //to make it relatively secure so that hackers can not create any upload folder automatcally in the server, using a direct link and can not upload files there 
        $_CONFIG['disabled']=false;
    }
}
// Path to user files relative to the document root.
$_CONFIG['uploadURL']= $file_upload_relative_path;
$_CONFIG['param_project'] = $_REQUEST['param_project'];
//Using a single CKeditor KCfinder component for different projects or sites (multisite): end 

//Code to assign $_CONFIG['uploadURL'] dynamic value: different for different projects or sites: added by Mrinal Nandi on 5 oct, 2013: end 
```

2) 在 ckeditor\filemanagers\kcfinder_2_51\js\browser\misc.js

搜索这一行： var data = 'browse.php?type=' + encodeURIComponent(this.type) + '&lng=' + this.lang;

用该行替换它：

```
var data = 'browse.php?type=' + encodeURIComponent(this.type) + '&lng=' + this.lang + '&param_project=' + this.param_project; 
```

3) 在 ckeditor\filemanagers\kcfinder_2_51\tpl\tpl_javascript.php

搜索这一行： browser.type = "type) ?>";

将这些命令放在该行之后：

```
browser.param_project = "<?php echo text::jsValue($this->config['param_project']) ?>"; 
```

4) 在 ckeditor\filemanagers\kcfinder_2_51\core\uploader.php 在 __construct() 函数中搜索此行：

```
if (isset($this->config['_check4htaccess']) &&
    $this->config['_check4htaccess']
) {
    $htaccess = "{$this->config['uploadDir']}/.htaccess";
    if (!file_exists($htaccess)) {
        if (!@file_put_contents($htaccess, $this->get_htaccess()))
            $this->backMsg("Cannot write to upload folder. {$this->config['uploadDir']}");
    } else {
        if (false === ($data = @file_get_contents($htaccess)))
            $this->backMsg("Cannot read .htaccess");
        if (($data != $this->get_htaccess()) && !@file_put_contents($htaccess, $data))
            $this->backMsg("Incorrect .htaccess file. Cannot rewrite it!");
    }
} 
```

并注释掉整个部分

4）现在你想在你的项目中显示CKeditor，你必须把这些行放在相应的php文件/页面中，显然与你的项目/应用程序相对应的变量值发生了变化。但请先阅读评论，以确定您应该保留哪些行以及根据您的流程应该注释掉哪些行：

```
include_once(Absolute/Folder/path/for/CKeditor/."ckeditor/ckeditor.php") ; 

//If you did not want a session oriented way, cooment out the session related lines
$_SESSION['KCFINDER'] = array();                                    
$_SESSION['KCFINDER']['uploadURL']=$SERVER_RELATIVEPATH."userfiles/"; 

$CKEditor = new CKEditor();
$CKEditor->basePath = HTTP_COMPONENTPATH."ckeditor_3.6.2/ckeditor/";

//$_SESSION['KCFINDER']['uploadURL']="/userfiles/fashion_qr/";

$CKEditor->config["filebrowserBrowseUrl"] = ($CKEditor->basePath)."filemanagers/kcfinder_2_51/browse.php?type=files&param_project=".base64_encode(session_name());
$CKEditor->config["filebrowserImageBrowseUrl"] = ($CKEditor->basePath)."filemanagers/kcfinder_2_51/browse.php?type=images&param_project=".base64_encode(session_name());
$CKEditor->config["filebrowserFlashBrowseUrl"] = ($CKEditor->basePath)."filemanagers/kcfinder_2_51/browse.php?type=flash&param_project=".base64_encode(session_name());

$CKEditor->editor("Content", getIfSet($data['Content']));
//if you did not want a session oriented way, then in the above code code segment, just replace all the texts: base64_encode(session_name()) with this one: base64_encode(session_name($SERVER_RELATIVEPATH."userfiles/")) 
```

你完成了。

# android - 模拟器可能内存不足吗？

> ID：10211455
> 
> 赞同：0
> 
> 时间：2012-04-18T14:23:38.237
> 
> 标签：android

当我运行一个应用程序时，该应用程序是在一段时间之前安装在模拟器中（尽管由于某些错误而显示强制关闭），现在在控制台中显示“安装错误：INSTALL_FAILED_INSUFFICIENT_STORAGE”。我知道这是一个模糊的问题，但我想知道，为什么或何时发生？提前致谢。

编辑：感谢您的回复。我猜它在我的身上显示了这一点，因为我在 raw 文件夹中包含了一个视频文件，这会占用大量空间。无论如何感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:26:53.700

最初创建仿真器设备时，您需要指定一些内存大小。据我了解，该应用程序首先安装在内部存储器中，然后转移到 sdcard。所以是的，如果您的内部存储器已满，它可能会耗尽存储空间。您可能需要卸载一些应用程序或创建一个新的模拟器。如果内存已满，Android手机也会发生同样的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:27:23.683

是的，它可以。这取决于您在模拟器配置期间通过 avd 管理器选择的设置。

# php - symfony2 - 获取执行时间

> ID：10211457
> 
> 赞同：6
> 
> 时间：2012-04-18T14:23:45.873
> 
> 标签：php, symfony, profiling

我想使用 symfony2 为我的应用程序创建一个状态页面，我想在其中打印特定请求的执行时间（以及其他数据）。我无论如何都找不到这样做。

我知道我可以通过以下方式跟踪代码部分的执行时间：

```
$starttime = microtime();
// do something
$duration = microtime() - $starttime; 
```

但由于显而易见的原因，我不能将它放在控制器中，因为不会跟踪整个引导程序。也不包括渲染模板。

有没有办法尽可能接近脚本的总执行时间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T09:46:18.650

我找到了一种我认为适合我们用例的方法。我在 web 文件夹中创建了一个新文件 performance.php，如下所示：

```
<?php
/**
 * This file is only used for doing realtime performance measurement
 * Right now only the microtime is calculated, but in the future the
 * xhproof module could be used: http://de2.php.net/manual/en/book.xhprof.php
 *
 * MAKE SURE TO NOT USE THIS FILE IN PRODUCTION FOR OTHER STUFF THAN REAL TIME
 * PERFORMANCE MEASUREMENT
 */

$GLOBALS['PerformanceTwigExtensionMicrotime'] = microtime(true);

require_once __DIR__.'/app.php'; 
```

我还注册了一个树枝扩展，它使用全局并计算经过的时间：

```
<?php

namespace Acme\DemoBundle\Extension;

class PerformanceTwigExtension extends \Twig_Extension {

    public function getFunctions() {
        return array(
            'performance_exectime' => new \Twig_Function_Method($this, 'getExecTime')
        );
    }

    public function getExecTime() {
        if (!isset($GLOBALS['PerformanceTwigExtensionMicrotime'])) {
            return 0;
        }

        $durationInMilliseconds = (microtime(true) - $GLOBALS['PerformanceTwigExtensionMicrotime']) * 1000;
        return number_format($durationInMilliseconds, 3, '.', '');
    }

    public function getName() {
        return "performance_extension";
    }

} 
```

当我们想要做一些性能测量时，我们可以简单地使用 performance.php。模板调用该函数，然后可以显示执行时间：

```
{{ performance_exectime() }} 
```

如果未设置开始时间（例如使用普通 app.php 时），则输出 0，因此在任何情况下都可以安全使用。另一方面，如果有人决定使用 performance.php 作为入口点，它不应该破坏任何东西，因为只有一个全局变量是不同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-10T22:42:00.407

从 PHP 5.4 开始我们可以做`microtime(true) - $_SERVER['REQUEST_TIME_FLOAT']`

**如何在 Symfony2 中使用：**

`src/AppBundle/Twig/AppExtension.php`

```
<?php

namespace AppBundle\Twig;

class AppExtension extends \Twig_Extension
{
    public function getFunctions()
    {
        return [
            new \Twig_SimpleFunction('request_time', [$this, 'requestTime'], ['is_safe' => ['html']]),
        ];
    }

    public function requestTime($decimals = 3)
    {
        return number_format(microtime(true) - $_SERVER['REQUEST_TIME_FLOAT'], $decimals);
    }

    public function getName()
    {
        return 'app_extension';
    }
} 
```

鉴于：

```
<footer class="footer">
    <div class="container">
        <p class="text-muted">{{ request_time() }}s</p>
    </div>
</footer> 
```

在`app/config/services.yml`：

```
services:
    app.twig_extension:
        class: AppBundle\Twig\AppExtension
        public: false
        tags:
            - { name: twig.extension } 
```

# audio - 画布或 webgl 中的声音

> ID：10211460
> 
> 赞同：0
> 
> 时间：2012-04-18T14:23:55.620
> 
> 标签：audio, canvas, webgl, cinema-4d

好吧，我有点坚持这个。我做了一些研究，并没有在画布/webgl 中找到任何类型的“声音均衡器”。所以我的意图是将声音加载到场景中并获取文件的信息并影响场景中的对象。

我正在寻找某种“音效器”，例如“cinema4d”。浏览器中是否有任何现有的尝试？（webgl/画布）？

这是一个应该做什么的例子：

[音效器](http://www.youtube.com/watch?v=8ydIldk1lZ0)

图形不是问题。是否可以让对象受到可以加载到场景中的声音或歌曲的影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:38:16.280

去年我在 Firefox 中使用了[Audo Data API](https://wiki.mozilla.org/Audio_Data_API)，所以它是可行的。那里有[博客](http://0xfe.blogspot.co.uk/2011/08/web-audio-spectrum-analyzer.html) [文章](http://arc.id.au/SpectrumAnalyser.html)，你也应该看看这个项目：[dynamicaudio.js](https://github.com/bfirsh/dynamicaudio.js)（它有一个 Flash 后备）

# c# - 如何订购列表 ?

> ID：10211470
> 
> 赞同：148
> 
> 时间：2012-04-18T14:24:36.537
> 
> 标签：c#, string, list

我有这个`List<string>`：

```
IList<string> ListaServizi = new List<string>(); 
```

如何按字母顺序和升序排列？

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2012-04-18T14:27:04.900

```
ListaServizi = ListaServizi.OrderBy(q => q).ToList(); 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-04-18T14:27:56.823

您可以使用[排序](http://msdn.microsoft.com/en-us/library/b0zbh7b6%28v=vs.90%29.aspx)

```
List<string> ListaServizi = new List<string>() { };
ListaServizi.Sort(); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-18T14:48:56.193

其他答案建议是正确的`Sort`，但他们似乎忽略了存储位置键入为`IList<string`. `Sort`不是界面的一部分。

如果您知道`ListaServizi`它将始终包含 a `List<string>`，则可以更改其声明的类型，或使用强制转换。如果不确定，可以测试类型：

```
if (typeof(List<string>).IsAssignableFrom(ListaServizi.GetType()))
    ((List<string>)ListaServizi).Sort();
else
{
    //... some other solution; there are a few to choose from.
} 
```

也许更惯用：

```
List<string> typeCheck = ListaServizi as List<string>;
if (typeCheck != null)
    typeCheck.Sort();
else
{
    //... some other solution; there are a few to choose from.
} 
```

如果您知道`ListaServizi`有时会有不同的实现`IList<string>`，请发表评论，我会添加一两个建议以对其进行排序。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-18T14:29:58.733

```
ListaServizi.Sort(); 
```

会为你做的。字符串列表很简单。如果对对象进行分类，您需要更聪明一点。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-22T16:00:54.857

```
List<string> myCollection = new List<string>()
{
    "Bob", "Bob","Alex", "Abdi", "Abdi", "Bob", "Alex", "Bob","Abdi"
};

myCollection.Sort();
foreach (var name in myCollection.Distinct())
{
    Console.WriteLine(name + " " + myCollection.Count(x=> x == name));
} 
```

输出：Abdi 3 Alex 2 Bob 4

# c# - nhibernate“XYZ 发生异常”

> ID：10211472
> 
> 赞同：0
> 
> 时间：2012-04-18T14:24:47.823
> 
> 标签：c#, oracle, nhibernate

我是一个试图进入 nHibernate 的新手，我玩得很开心。我收到以下异常（和内部异常）

Common32.ExtractionCompany.ID 的 getter 发生异常

对象与目标类型不匹配。

基本上，自从我开始工作以来，我有许多类应该将另一个类的实例存储在列表中。A 存储 B 存储 C 等。我使用 GUID 作为键，所以在 Oracle 11g（我的数据库）中，我使用 Raw(16) 作为数据类型。奇怪的是，这部分有效。如果我将多个 B 对象放在 A 中，一切都很好。一旦我尝试将 C 对象放入 B 中，一切都会中断。

这是我创建目标表的 SQL。每个表都有一个 ID 列作为主键，还有一个作为外键返回前一个表的列。

```
create table ExtractionCommand 
( ID Raw(16) );

create table ExtractionCompany
( ID Raw(16),
CommandID Raw(16) );

create table ExtractionTable
( ID Raw(16),
CompanyID Raw(16) );

create table ExtractionColumn
( ID Raw(16),
TableID Raw(16) );

create table ExtractionTarget
( ID Raw(16),
ColumnID Raw(16)); 
```

这是我的 C# 课程。

```
[Serializable]
public class ExtractionCommand
{
    public virtual Guid ID { get; set; }
    private IList<ExtractionCompany> m_company = new List<ExtractionCompany>();
    public virtual IList<ExtractionCompany> Company
    {
        get { return m_company; }
        set { m_company = value; }
    }
}

[Serializable]
public class ExtractionCompany
{
    public virtual Guid ID { get; set; }
    public virtual Guid CommandID { get; set; }
    private IList<ExtractionTable> m_tables = new List<ExtractionTable>();
    public virtual IList<ExtractionTable> Tables
    {
        get { return m_tables; }
        set { m_tables = value; }
    }
}

[Serializable]
public class ExtractionTable
{
    public virtual Guid ID { get; set; }
    public virtual Guid CompanyID { get; set; }
    private IList<ExtractionColumn> m_columns = new List<ExtractionColumn>();
    public virtual IList<ExtractionColumn> Columns
    {
        get { return m_columns; }
        set { m_columns = value; }
    }
}

[Serializable]
public class ExtractionColumn
{
    public virtual Guid ID { get; set; }
    public virtual Guid TableID { get; set; }
    public virtual ExtractionTarget Target { get; set; }
}

[Serializable]
public class ExtractionTarget
{
    public virtual Guid ID { get; set; }
    public virtual Guid ColumnID { get; set; }
    public virtual string TargetTable { get; set; }
    public virtual string TargetColumn { get; set; }
} 
```

这是调用保存到数据库 (Oracle 11g) 的 C# 代码。

```
ExtractionCommand cmd = new ExtractionCommand();
cmd.ID = Guid.NewGuid();

ExtractionCompany c1 = new ExtractionCompany();                    
cmd.Company.Add(c1);

ExtractionTable t1 = new ExtractionTable();
c1.Tables.Add(t1);

session.Save(cmd);
transaction.Commit(); 
```

还有我的映射

```
<class name="ExtractionCommand" table="ExtractionCommand" >
<id name="ID">
  <generator class="guid" />
</id>    
<bag name="Company" cascade="all">
  <key column="CommandID" />
  <one-to-many class="ExtractionCompany"/>
</bag>
</class>

<class name="ExtractionCompany" table="ExtractionCompany" >
<id name="ID">
  <generator class="guid" />
</id>
<property name="CommandID"/>    
<bag name="Tables" cascade="all">
  <key column="CompanyID" />
  <one-to-many class="ExtractionCompany"/>
</bag>
</class>

<class name="ExtractionTable" table="ExtractionTable" >
<id name="ID">
  <generator class="guid" />
</id>
<property name="CompanyID"/>
<bag name="Columns" cascade="all">
  <key column="TableID"/>
  <one-to-many class="ExtractionColumn"/>
</bag>
</class>

<class name="ExtractionColumn" table="ExtractionColumn" >
<id name="ID">
  <generator class="guid" />
</id>
<property name="TableID" />
<one-to-one name="Target" class="ExtractionTarget"/>
</class>

<class name="ExtractionTarget" table="ExtractionTarget" >
<id name="ID">
  <generator class="guid" />
</id>
<property name="TargetTable"/>
<property name="TargetColumn"/>
</class> 
```

任何帮助是极大的赞赏。谢谢你。米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:40:59.237

它中断是因为您在映射`one-to-many`部分使用了错误的类型。`ExtractionCompany`您需要`ExtractionTable`改用：

```
<class name="ExtractionCompany" table="ExtractionCompany" >
<id name="ID">
  <generator class="guid" />
</id>
<property name="CommandID"/>    
<bag name="Tables" cascade="all">
  <key column="CompanyID" />
  <one-to-many class="ExtractionTable"/>
</bag>
</class> 
```

* * *

此外：

您的类不应包含父级的 ID。如果他们确实需要对父级的引用，请添加一个具有父级类型的属性并将其映射为引用。

# ruby-on-rails - Ruby On Rails - :layout => false 在 Apache2 上不起作用

> ID：10211473
> 
> 赞同：2
> 
> 时间：2012-04-18T14:24:49.237
> 
> 标签：ruby-on-rails, layout, partial-views, render

我有一个由 AJAX 调用的方法：

```
def showplain
    .............
    respond_to do |format|
      format.html { render :layout => false, :partial => "content"}
    end
end 
```

这在 Webrick 中有效，但在 Apache2 + Phusion Passenger 上会导致错误。

错误是：

ActionView::MissingTemplate（缺少模板 myitems/showplain）

如果我创建 showplain.html.erb：

```
<%= render :layout => false, :partial => "content" %> 
```

它在 AJAX 框架中向我显示整页，带有布局。

似乎忽略了 :layout => false 参数。如何让它在没有布局的情况下显示部分？

```
match 'myitems/showplain' => 'myitems#showplain', :via => :get 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:22:04.213

在渲染之前发生了异常。

我写

```
begin
  .........
rescue => ex
  .........
end
render :layout => false, :partial => "content" 
```

删除了 showplain.html.erb，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:50:50.380

您谈论 AJAX。要响应 ajax 请求，您需要使用 js 格式来响应您的应用程序。

```
def showplain
    .............
    respond_to do |format|
      format.html { render :layout => false, :partial => "content"}
      format.js { render :layout => false, :partial => "content"}
    end
end 
```

你用 js 格式调用你的路由。

我希望它有帮助

# c# - 配置 MSMQ 以将消息从一个队列路由到另一个队列（目标）

> ID：10211477
> 
> 赞同：0
> 
> 时间：2012-04-18T14:24:56.420
> 
> 标签：c#, .net, windows, msmq

我的要求如下：

我需要将消息写入一台机器 1 上的队列，该队列应该由 MSMQ 自动路由到另一台机器 2（网络内）上的另一个队列。

1.  这可能吗？

2.  这可以在没有程序轮询消息的存在并以编程方式将消息移动到 machine-2 的情况下完成吗？

3.  为了让 MSMQ 自动处理这个问题，我们需要在 machine-1 上配置什么？

请告诉我！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T23:43:26.877

“1.这可能吗？” 不。

MSMQ 将消息传递到队列。而已。要将消息从一个队列路由到另一个队列，您实际上是在读取消息并将副本写入新目标。

# php - 如何使用此代码显示所有条目并进行比较？

> ID：10211480
> 
> 赞同：0
> 
> 时间：2012-04-18T14:25:11.987
> 
> 标签：php, validation

我在下面有这段代码，它为帖子选择所有 id，然后下面的代码片段查看是否有匹配项。如果匹配，则表示重复。我通过使用 print 命令打印 $test 和 print $unique 对其进行了测试，但它只显示一个 id 而不是所有 id。我该如何修复此代码，使其显示所有 id #，然后比较以查看是否存在重复，如果存在，它将显示“重复”。

```
 $sql="SELECT `Post_id` from `posts`";  
         $result=mysql_query($sql);

         $query = mysql_query($sql) or die ("Error: ".mysql_error());

         if ($result == "")
         {
         echo "";
         }
         echo "";

         $rows = mysql_num_rows($result);

         if($rows == 0)
         {
         print("");

         }
         elseif($rows > 0)
         {
         while($row = mysql_fetch_array($query))
         {

         $storedid = htmlspecialchars($row['Note_id']);

         print("");
         }

         }

       //This $test id exists and $storedid should contain 
       3VRDY but it still goes through

       $test = "3VRDY";

      if ( $storedid == $test ) {
  echo("duplicate");
      die();
      } else {
  echo("");

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:44:41.990

尝试这个：

```
$test = '3VRDY';
while($row = mysql_fetch_array($query))
{
   $storedid = htmlspecialchars($row['Note_id']);
   if($storedid == $test)
        echo 'The ' . $storedid .' is duplicated<br/>';
   else
        echo 'The ' . $storedid .' is unique<br/>';
} 
```

在循环结束时，您将获得结果。

# excel - 从固定单元格到列结束的 Excel 引用？

> ID：10211485
> 
> 赞同：8
> 
> 时间：2012-04-18T14:25:25.013
> 
> 标签：excel, reference, formula

我需要一个 excel 公式来计算从固定级别到列中最后一个单元格的所有列单元格的总和。喜欢：从 S5 到最后一个 S 单元格的 SUM。
我试过了：`SUM(S5:S)`但不起作用。

有一个带有行数的单元格。我可以在公式中使用变量，例如：`SUM(S5:S & A1)`A1 包含行数吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T14:30:30.660

你可以试试`=SUM(OFFSET(S5,0,0,ROWS(S:S)-ROW(S5)+1))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-25T04:20:53.827

要将 A2 到 A 列末尾的所有单元格相加，您可以使用

```
=SUM(A2,INDIRECT("A2:A" & ROWS(A:A))) 
```

即使您将其放在单元格 A1 中，这也将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-04T00:47:52.110

**TL;DR**：我建议使用`NamedRange`s 和`=INDEX(NamedRange, ROW()):INDEX(NamedRange, COUNTA(NamedRange))`. 这在输入数据更改（大小和值）**和**电子表格更改（更多/更少列/行）时都表现良好。您可以将此构造用作任何将数组作为参数的函数的输入，例如`XLOOKUP()`.

* * *

我今天只是在寻找一个解决方案，我想出了一些基于`INDEX()`和命名范围的东西，我认为它比`INDIRECT()`. 练习是这样的：

**第 1 部分**：创建输入数组

*   在新工作表中，首先创建一个简单的数字数组。转到单元格 A1 并输入`=SEQUENCE(10)`。这将创建一个数字从 1 到 10 的数组 A1:A10。

**第 2 部分**：基于解决方案`INDIRECT()`

*   转到单元格 B1 并输入`=INDIRECT("A"&ROW()):INDIRECT("A"&COUNTA(A:A))`。

*   这有两个部分：一个在冒号之前，另一个在冒号之后。您正在寻找的最终结果是 A1:A10，对吗？

*   冒号之前的部分使用对列字母 的固定引用`"A"`，以及`ROW()`获取当前行号的函数——如果您的数据不是从第一行开始，这个解决方案就可以工作（只是一个细节，真的）。`&`如果您不熟悉，该位用于连接字符串。最后，您从固定字母`"A"`和来自 的任何数字构建字符串“A1” `ROW()`。

*   冒号后面的部分类似，但现在我们试图获取我们正在处理的数组中最后一项的行号。我们通过使用`COUNTA()`将数组`A:A`作为输入传递的函数来做到这一点。

*   太好了，您应该在 B 列上看到输入数组的副本。为了测试，让我们将数组乘以 2。转到单元格 C1 并输入`=INDIRECT("A"&ROW()):INDIRECT("A"&COUNTA(A:A))*2`。现在您应该看到输入数组翻了一番。

**第 3 部分**：解决方案基于`INDEX()`

*   此解决方案需要一个命名数组。为此，请选择 A 列。名称框（右上角，靠近单元格，位于功能区下方）可能会显示 A1。单击此处并为范围命名。例如，`NUMBERS`。

*   现在转到单元格 D1 并输入`=INDEX(NUMBERS, 1):INDEX(NUMBERS, COUNTA(NUMBERS))`。您将获得输入数组的另一个副本。

*   最后，转到单元格 E1 并输入`=INDEX(NUMBERS, 1):INDEX(NUMBERS, COUNTA(NUMBERS))*2`。又是一个双倍数组。

**第 4 部分**：测试

*   好的，首先，当向输入数组添加或删除项目时，动态操作应该表现良好。转到单元格 A1 并将`SEQUENCE()`参数更改为 5。然后更改为 20。从 B 列到 E 列的所有其他数组应自动调整大小，这表明两种解决方案都有效。

*   最后的测试：在 A 之前添加一列。看看现在将是 C 和 D 列会发生什么。

是的，如果我们改变电子表格的结构，基于的解决方案`INDIRECT`表现不佳。可能有一些我还没有探索过的方法来解决这个问题，但现在我将坚持`INDEX`并命名范围——顺便说一下，这似乎也是一个更清洁、更容易维护的选项。如果有人建议一种基于我“修复”解决方案的方法，`INDIRECT()`我可以编辑它。

可以在[此处](https://support.microsoft.com/en-us/office/define-and-use-names-in-formulas-4d0f13ac-53b7-422e-afd2-abd7ff379c64)找到有关命名范围的更多信息。

# javascript - Google Visualization API 堆叠图表的工具提示？

> ID：10211490
> 
> 赞同：1
> 
> 时间：2012-04-18T14:25:47.457
> 
> 标签：javascript, google-visualization

我想在 Google Visualization API 的工具提示中添加一些自定义文本。我正在为百分比使用堆叠图表，并且我想为原始数字添加一些额外的值，这些值只会显示在工具提示中，而不影响图表本身。

这是我当前的代码：

```
 var dt = new google.visualization.DataTable(
     {
       cols: [{id: 'Year', label: 'year', type: 'string'},
              {id: 'Golf', label: '% time on golf', type: 'number'},
              {id: 'Soccer', label: '% time on soccer', type: 'number'},
             ],
       rows: [{c:[{v: '1996'}, {v: 11}, { v: 10} ]},
              {c:[{v: '1997'}, {v: 2}, { v: 10} ]},
              {c:[{v: '1998'}, {v: 2}, { v: 10} ]},
              {c:[{v: '1999'}, {v:2}, { v: 10} ]},
              {c:[{v: '2000'}, {v:7, f:'7.000'}, { v: 10} ]}
             ]
     },
   0.6
)
  var ac = new google.visualization.AreaChart(document.getElementById('visualization'));
  ac.draw(dt, {
    isStacked: true,
    width: 600,
    height: 400,
    vAxis: {title: "% of time"},
    hAxis: {title: "Year"}
  }); 
```

如何添加原始数据数字和额外的工具提示，以便当我将鼠标悬停在 1996 年的高尔夫球上时（例如），它也会显示另一个数字？

我希望我可以将行更改为如下所示：

```
rows: [{c:[{v: '1996'}, {v: 11, raw_value: 17}, { v: 10, raw_value: 16} ]}, 
```

然后指定要包含的工具提示的内容`raw_value`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:27:57.207

刚刚找到我自己问题的答案，我会在这里写下来，以防其他人遇到同样的问题（并为其他人省去麻烦）。

答案与我希望的很接近：使用`f`in`rows`为工具提示提供格式化的值。像这样：

```
rows: [{c:[{v: '1996'}, {v: 11, f: 17}, { v: 10, f: 16} ]}, 
```

# django - Django - 更新 ModelForm 的某些字段

> ID：10211493
> 
> 赞同：4
> 
> 时间：2012-04-18T14:25:54.900
> 
> 标签：django, django-forms

模型：

```
class Session(models.Model):
  tutor = models.ForeignKey(User)
  start_time = models.DateTimeField()
  end_time = models.DateTimeField()
  status = models.CharField(max_length=1) 
```

形式：

```
class SessionForm(forms.ModelForm):
  class Meta:
    model = Session
    exclude = ['tutor'] 
```

测试：

```
>>> ses = Session.objects.get(pk=1)
>>> ses
<Session: Robert - 2012-04-18 13:00:00>
>>> form = SessionForm(instance=ses) 
```

例如，现在我只想更新`status`这个实例并保存它。
我怎样才能做到这一点 ？

* * *

**编辑**

模板：

```
<form action="fhjsdhkl" method="POST">{{ csrf_token }}
  <input name="start_time" />
  <input name="end_time" />
</form> 
```

尝试仅发布以下 2 个字段：

```
if request.method == 'POST':
  form = SessionForm(request.POST)
  if request.POST['id']:
    try:
      s = Session.objects.get(pk=request.POST['id'])
      form.instance = s
    except Session.DoesNotExist:
      pass
  if form.is_valid():
    form.save() 
```

> 无法更改会话，因为数据未验证。

表单返回的错误是

> 状态 - 此字段是必需的

我需要更新的字段不固定，我想避免每次都发布所有字段。我必须为每种情况制作不同的表格吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:36:49.560

编辑2：旧答案无关紧要

```
if request.method == 'POST':
  form = SessionForm(request.POST)
  if request.POST['id']:
    try:
      s = Session.objects.get(pk=request.POST['id'])
      form.instance = s
    except Session.DoesNotExist:
      pass
  if form.is_valid():
    form.save() 
```

好的，你有很多事情发生在这里：

1.

这一行应该是这样的：

```
form = SessionForm(request.POST, instance = s) 
```

2.

您应该向上移动会话对象：

```
if request.method == 'POST':
    s = get_object_or_404(Session, pk=request.POST['id'])
    form = SessionForm(request.POST, instance = s) 
```

如果您执行下面的 try 和 except 方法，只要该对象不存在，您就会引发验证错误。改为抛出 404。文档位于上述快捷方式上：[https](https://docs.djangoproject.com/en/1.0/topics/http/shortcuts/#get-object-or-404) ://docs.djangoproject.com/en/1.0/topics/http/shortcuts/#get-object-or-404如果您还没有导入它，则需要导入它。

现在您可以对其进行评估并保存：

```
if request.method == 'POST':
    s = get_object_or_404(Session, pk=request.POST['id'])
    form = SessionForm(request.POST, instance = s)
    if form.is_valid():
        form.save() 
```

3.

此外，您不应该这样做：如果 request.POST['id'] as strings 永远不会是 False，甚至是空字符串。例如，在 IDLE 中试试这个：

```
>>> '' == True
>>> '' == False

>>> 'a' == True
>>> 'a' == False 
```

您会注意到这始终评估为 False。

因此，您所看到的从未真正创建参考模型。

# php - 在 php 函数中包含自定义 js 文件

> ID：10211494
> 
> 赞同：0
> 
> 时间：2012-04-18T14:25:55.667
> 
> 标签：php, javascript, jquery, html

我有一个自定义函数，可以根据查看的页面包含自定义 javascript 文件。这是功能：

```
function custom_jsinclude($php,$jsfile) { //
$filename = basename($_SERVER['PHP_SELF']);
if($filename === $php) {
echo "<script src=\"js/$jsfile\"></script>\n";
  } else {
    exit("Couldnt find file");
  }
} 
```

回到我的 php 文件中，我像这样（在 head 标签之间）包含它。

```
<?php
 require_once('inc/functions.php');
 custom_jsinclude("somepage.php","custom-scrollTo.js");
?> 
```

当我加载页面时，包含了 javascript 文件（检查源代码）。但它不起作用。

然后我尝试了旧的时尚方式： `<script src="js/custom-scrollTo.js"></script>` 而且效果很好......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Welcome to my homepage</title>
<script src="js/custom-scrollTo.js"></script>
<script src="js/jquery-1.7.2.min.js"></script>
<link href="css/somepage.css" rel="stylesheet" type="text/css" />
</head> 
```

我在这里想念什么？

滚动到代码：

```
$(document).ready(function() {

$("#prlmenu li").click(function(){
    var indexli = $(this).index();
    var indexh3 = indexli;
    var scrollto = $('h3:eq('+indexli+')').offset().top;
    $("html, body").animate({ scrollTop: scrollto +'px' },"fast");

});

$("div.backtotop").click(function() {
    $("html, body").animate({ scrollTop: "130px" },"fast"); 
});
$(window).scroll(function () {
        if($("html, body").scrollTop() > 1510) {
            $("div.backtotop").fadeIn("slow");

        } else {
            $("div.backtotop").hide();  
        }
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:11:10.983

你有没有试过这个：

```
echo '<script type="text/javascript" src="js/'.$jsfile.'"></script>\n'; 
```

# c# - Windows Server 2008 R2 DNS 服务器的 DNS api 比 WMI 更高级别？

> ID：10211495
> 
> 赞同：0
> 
> 时间：2012-04-18T14:25:57.340
> 
> 标签：c#, dns, windows-server-2008, wmi, windows-server-2008-r2

过去一天左右，我一直在编写代码，通过[DNS WMI 类](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682123.aspx)管理 Windows Server 2008 R2 DNS 服务器。由于它们在 C# 中对开发人员不太友好（在具有选项卡完成功能的 PowerShell 等动态 REPL 中更友好一些），我试图找出是否有人已经将 WMI 调用包装到一个强类型的小库中并至少允许大多数常见情况（创建和删除区域，在区域中创建和删除记录）。它不一定是第三方的，它可以是来自微软的东西（也许我缺少的盒子上有什么东西？）

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T05:19:53.413

我现在不为这些类提供包装器，但存在一些工具可以帮助您创建代码以与 WMI 交互。

*   [`WMI Delphi Code Creator`](http://code.google.com/p/wmi-delphi-code-creator/)允许您生成 C#、C++ 或 Object pascal 代码来访问 WMI 。
*   [MgmtClassGen.exe](http://msdn.microsoft.com/en-us/library/ms186156.aspx)，该工具为给定的 WMI 类生成强类型类。
*   [WMI 代码创建者](http://www.microsoft.com/Download/en/details.aspx?id=8572)

# django - django 没有使用他的本地化文件

> ID：10211504
> 
> 赞同：2
> 
> 时间：2012-04-18T14:26:22.480
> 
> 标签：django, localization, internationalization

在我的 settings.py 文件中有此代码：

```
LANGUAGES = (
  ('ru', 'Russian'),
)
DEFAULT_LANGUAGE = 0
LANGUAGE_CODE = 'ru-RU' 
```

但错误：

```
raise forms.ValidationError(_("Please enter a correct username and password. Note that both fields are case-sensitive.")) 
```

用英语返回消息，尽管 django 在 django /usr/local/lib/python-2.7/dist-packages/django/contrib/locale/ru/LC_MESSAGES/django.po 中有翻译

为什么 ？

这是中间件：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    # 'debug_toolbar.middleware.DebugToolbarMiddleware',
    # 'cms.middleware.multilingual.MultilingualURLMiddleware',
    # 'django.middleware.transaction.TransactionMiddleware',
    'django.middleware.cache.FetchFromCacheMiddleware',
    'django.middleware.doc.XViewMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'cms.middleware.page.CurrentPageMiddleware',
    'cms.middleware.user.CurrentUserMiddleware',
    'cms.middleware.toolbar.ToolbarMiddleware',
    'pagination.middleware.PaginationMiddleware',
    'banner_middleware.Banner',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.auth',
    'django.core.context_processors.i18n',
    "django.core.context_processors.debug",
    'django.core.context_processors.request',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'cms.context_processors.media',
    'sekizai.context_processors.sekizai',
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:44:56.333

1.  确保`USE_I18N = True`在设置
2.  使用相同的代码, `'ru'`, for`LANGUAGE_CODE`和第一项的键`LANGUAGES`
3.  确保`Accept-Language`您的请求标头`'ru'`中的优先级更高。
4.  As mega.venik's suggestion, ensure there is translation for the string in po and mo files in findable locale directory.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:18:36.257

首先-您确定该`LANGUAGE`设置还涵盖错误消息吗？

第二——检查值的正确性`LANGUAGE_CODE`。根据[文档](https://docs.djangoproject.com/en/dev/topics/i18n/#term-language-code)，它应该是小写的

顺便说一句，尝试添加`'django.middleware.locale.LocaleMiddleware'`到`settings.MIDDLEWARE_CLASSES`.

# java - Jsoup - 为 POST 传递原始正文

> ID：10211505
> 
> 赞同：3
> 
> 时间：2012-04-18T14:26:22.857
> 
> 标签：java, post, jsoup

我需要使用 Jsoup 将原始正文传递给 POST 请求：

```
final Connection connect = Jsoup.connect(url);

connect.method(Connection.Method.POST);

String rawBody = // a JSON string representing JSON-RPC call

// fails here "Must supply an even number of key value pairs"
connect.data(rawBody); 

final Connection.Response response = connect.execute(); 
```

据我了解，它需要对键，值。有没有办法通过一个原始的身体？

PS 我已经有代码通过 HTTP 发布`HttpURLConnection`并想升级到使用 Jsoup 而不是相对低级的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:44:04.280

似乎不可能。Connection#data 用于传递请求的参数，参数成对出现。

# java - 使用 HQL 从表中检索主键

> ID：10211507
> 
> 赞同：0
> 
> 时间：2012-04-18T14:26:24.150
> 
> 标签：java, database, spring, hibernate, hql

我有一张桌子 | **客户 ID** | 客户姓名 | 客户国家|。

如何编写 HQL 查询来检索与 CustomerName 和 CustomerCountry 的组合对应的 CustomerId？

这是我的 CustomerDaoImpl：

```
@Repository
public class CustomerDaoImpl implements CustomerDao {

@Autowired(required=true)
private SessionFactory sessionFactory;

public Customer getCTID(String customerName, String customerCountry) {
    return (Customer) 
this.sessionFactory.getCurrentSession().createQuery(/* Some query that gets CTID corresponding to customerName and customerCountry*/);

}
} 
```

我想使用这个 CustomerId 并将其插入到我的 DeliveryTable 中以进行新的交付。我将 DTO 用于输入交付信息的表单，并且我将使用 DeliveryService 创建新交付，该交付使用 CustomerService 通过 CusomerDAO 检索 CustomerId。

谢谢你的帮助，D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:45:37.190

据我了解，与 Customer:Delivery 存在 1:N 关系。如果您使用多对一映射而不是直接使用 ID，这将是有益的。

如果您仍然想要 HQL，您可以使用

```
this.sessionFactory.getCurrentSession().createQuery(
    "from Customer customer where customer.customerName = :name "
    + " and customer.customerCountry = :country").setParameter("name",customerName).setParameter("country",countryName).uniqueResult(); 
```

`uniqueResult`因为我假设 customerName + Country 在数据库中是唯一的。如果不是，您需要使用`.setMaxResult(1)`，否则从 a`List`到的映射`Customer`会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:56:15.727

这是 Nitin 使用命名参数的答案，正如 JB Nizet 指出的那样：

```
Long id = this.sessionFactory.getCurrentSession().createQuery(
   "select customerId from Customer where customerName = :name and customerCountry = :country")
   .setParameter("name", customerName).setParameter("country", customerCountry).uniqueResult(); 
```

# iphone - IOS 有什么新的 TTS 库吗？

> ID：10211508
> 
> 赞同：2
> 
> 时间：2012-04-18T14:26:28.253
> 
> 标签：iphone, ios, text-to-speech

我目前在我的应用程序中使用 Flite tts，男声效果很好。但我的客户希望女性声音也能正常工作。两种语音的处理时间之间存在着众所周知的差异（女性 stl 语音的延迟比默认语音多 2 秒）。另一个障碍是 TTS 必须离线工作，所以 DragonMobile 和 iSpeech 不是一个选项。在你看来，iOS 上最好的 TTS 库是什么？有人看过 flite 1.4 的更新/修改版本吗？我意识到我要么找到 Flite 的优化版本，要么更改我的库。我一直在查看不同的帖子，其中大部分来自很长时间，所以我希望有一些新的更好的东西。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T11:56:58.367

去politepix openears tts。它是 Flite 的更新版本，结合了其他一些 tts 引擎。离线 tts 合成器和 Flite 一样。使用 Flite 提供的相同声音。请看这里

[http://www.politepix.com/openears](http://www.politepix.com/openears)

# php - 如何多次回显图像？

> ID：10211510
> 
> 赞同：0
> 
> 时间：2012-04-18T14:26:34.540
> 
> 标签：php, image

我正在尝试制作一个网页，该网页根据访问者的数量来呼应图像。到目前为止，我的代码计算了对页面的访问并将数字存储在一个变量`$count`中。然后我在页面上回显一个随机图像`$image`。现在我想将页面上显示的随机图像乘以访问量`$count`。这样，如果有 20 次访问，则页面上会回显 20 个随机图像。任何想法如何做到这一点？

到目前为止，这是我的代码：

```
$fp = fopen("count.txt", "r");
$count = fread($fp, 1024);
fclose($fp);
$count = $count + 1; 

$random = rand(0, 30);

$image = "<img src='" . $random . ".jpg'/>";

echo $image;

$fp = fopen("count.txt", "w");

fwrite($fp, $count);
fclose($fp); 
```

任何帮助深表感谢。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:31:42.293

这应该给你你正在寻找的东西。

```
for($i = 0; $i < $count; $i++) {
    $random = rand(0, 30);
    $image = "<img src='" . $random . ".jpg'/>";
    echo $image;
} 
```

您需要每次通过循环重新生成随机数，否则您将获得多次重复的相同图像。现在，如果您想确保获得唯一的随机图像，那就有点复杂了！

**- 编辑**

为了获得唯一的随机图像，我通常使用的方法是将每个随机 ID 添加到循环内的数组中，并每次检查。像这样的东西（在该`$random = rand(0,30);`行之后插入）：

```
while(in_array($random, $random_used)) {
  $random = rand(0, 30);
}
$random_used[] = $random; 
```

要清楚这一点的局限性 - 如果您的计数高于使用的随机范围，您将在这里遇到无限循环。此外，您应该初始化数组（在您的 for 循环之外），例如：

```
$random_used = array(); 
```

...只是为了停止 PHP 通知。

可能有一种更简单的方法可以做到这一点，但这是我通常使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:29:10.967

很简单：

```
for($i=0;$i<$count;$i++) {
    $random = rand(0, 30);
    echo '<img src="'. $random . '.jpg"/>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:30:16.693

```
for ($i = 1; $i <= $count; $i++)
{
  $random = rand(0, 30);

  $image = "<img src='" . $random . ".jpg'/>";

  echo $image;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:30:56.300

```
for($i=1;$i<=$count;$i++) {
   $random = rand(0, 30);
   $image = "<img src='" . $random . ".jpg'/>";
   echo $image;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T14:31:25.933

`$count`是访问次数。做这样的事情：

```
$count = 20; // I suppose that there are 20 visitors
for($i = 0; $i < $count; $i++) {
    $random = rand(0, 30);
    $image = "<img src='" . $random . ".jpg'/>";
    echo $image;
} 
```

输出图像并在循环中定义一个随机数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T14:31:42.277

不要使用旧的文件处理东西。

```
$count = file_get_contents("count.txt") + 1;

$a = array();

for($i = 0; $i < $count; $i++) {

    $random = rand(0, 30);

    while (in_array($random, $a) && count($a) <= 30) {
        $random = rand(0, 30);
    }

    array_push($a, $random);

    $image = "<img src='" . $random . ".jpg'/>";

    echo $image;

}

file_put_contents("count.txt", $count); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T16:22:21.860

```
<?php
$images = range(0, 12);
for($i = 0; $i < $count; $i++) {
    // you shoulod check whether count is not above the number of available images
    $image = array_rand($images, 1);

    echo "<img src='" . $images[$image] . ".jpg'/>";

    unset($images);
} 
```

使用上述方法，您将仅获得独特的图像

# debugging - noICE 和 GNU ARM 汇编器

> ID：10211512
> 
> 赞同：1
> 
> 时间：2012-04-18T14:26:38.177
> 
> 标签：debugging, assembly, arm

我们在大学里做 ARM 汇编语言编程，我想设置一个环境，让我可以在我的计算机上运行/模拟简单的 ARM 程序。

我安装了 ARM 的 noICE 调试器和 GNU ARM 工具链。我将如何将最简单的 ARM 汇编程序加载到 noICE 中，以便我可以单步执行指令？

我尝试使用 arm-hitex-elf-as -o out.elf c:\test.s 将这个非常简单的序列组装成一个 ELF 文件

```
main:
    mov r0, #10
    mov r1, #20
    add r2, r1, r0
    cmp r2, r1
    beq main    
.end 
```

它会生成 out.elf 文件，但是当我尝试将其加载到 noICE 时，我不断收到错误消息“Elf 错误：ELF 文件不是可执行格式”。

请各位大侠帮忙看看，谢谢！！

编辑：汇编器只生成一个可重定位的目标文件。将该目标文件提供给 arm-hitex-elf-ld 会产生实际的可执行文件，该文件现在在 noICE 中运行良好。

# post - 在 Orbit（Kepler 项目/Lua）中使用 WSAPI 的方法 POST 错误（405）

> ID：10211518
> 
> 赞同：0
> 
> 时间：2012-04-18T14:26:56.913
> 
> 标签：post, lua, http-status-code-405, orbit

尝试使用名为 Orbit 的 Lua 的 MVC 框架编写 Web 应用程序。我有一个本地服务器 (WSAPI) 启动并运行我的应用程序，但每次提交发布请求时都会收到 405 错误。我认为这可能是一个配置问题，但话又说回来，我不太确定。如何更改 WSAPI 配置以允许 POST？如果这不是错误，那是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:14:48.287

您的配置中似乎有错误。Orbit 应该在某处写入日志文件。那些应该给你更多的信息。

# ruby-on-rails - Ruby on Rails - 尝试呈现设计登录表单时出错

> ID：10211519
> 
> 赞同：0
> 
> 时间：2012-04-18T14:26:56.977
> 
> 标签：ruby-on-rails, ruby, devise, haml

我有这个haml文件：

```
= content_for :page_title do
  = t :page_title_login
= content_for :primary_content do
  #login_box
    .span6
      #traditional-login
        %hgroup
          %h3= t :heading_account_login
        = render "devise/sessions/form"

    .span4

= content_for :before_closing_body_tag do
  configure_login_form(#{request.xhr?.to_s.downcase}); 
```

它位于我的`app/views/mobile/sessions/new.haml.html`路径中。

它给出了这个错误：

```
Showing /Users/alexgenadinik/projects/cmply/cmply-app/app/views/devise/sessions/_form.html.haml where line #1 raised:

undefined local variable or method `resource' for #<#<Class:0x148213358>:0x14820dac0> 
```

但是当我注释掉这一行时：

```
= render "devise/sessions/form" 
```

它呈现页面但没有实际的表单。所以我想我需要那条线，我只是不确定如何在不出错的情况下重新添加那条线。

这是我的控制器：

```
class Mobile::SessionsController < ApplicationController
  def create
    redirect_to home

  end

  def new
    redirect_to home
  end
end 
```

知道我可能做错了什么吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:40:20.527

该表单部分使用了`resource`它找不到的局部变量。

您必须将该变量传递给渲染调用。

```
= render "devise/sessions/form", :locals => {:resource => resource} 
```

您可能还缺少其他变量。我`new.html.haml`也提到了`resource_name`和`devise_mapping`。也许你也必须通过这些变量。

查看[渲染部分](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)文档。

顺便说一句，你的 HAML 应该`- content_for`没有`= content_for`，因为那是一个控制调用。

# php - 解析php手册文档xml文件

> ID：10211533
> 
> 赞同：1
> 
> 时间：2012-04-18T14:27:40.053
> 
> 标签：php, xml-parsing, docbook

我想解析 php 手动源文件（xml docbook 格式）并将它们转换为 MySQL 数据库。我目前正在尝试使用 simpleXML 扩展来执行此操作，但是当我执行所有实体时，例如 &reftitle.description; 和$假；引发警告（未定义）并且脚本以“致命错误：未捕获的异常'异常'并显示消息'字符串无法解析为 XML'”停止更长的完成。我不是 xml 专家，但我认为我需要包含对这些实体的一些引用，以便解析器识别它们？我找不到如何做到这一点？

# php - mod_rewrite url 的不同语言部分

> ID：10211535
> 
> 赞同：0
> 
> 时间：2012-04-18T14:27:45.240
> 
> 标签：php, apache, mod-rewrite, get

这是我当前的 .htaccess：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f [NC,OR]
RewriteCond %{REQUEST_FILENAME} !-d [NC]

RewriteRule ^$ /launcher/index.html [L]

RewriteRule ^en/admin$ /main/index.php?lang=en&action=acp [L]
RewriteRule ^sp/admin$ /main/index.php?lang=sp&action=acp [L]

RewriteRule ^en/(.*)$ /main/$1?lang=en [L]
RewriteRule ^sp/(.*)$ /main/$1?lang=sp [L] 
```

我有一个启动器屏幕（工作正常），我的网站 PHP 文件是 main/index.php。我使用 $_GET 将有关哪个页面的信息传递给我的 index.php，即：index.php?action=download&file=123。有两个根级别，我将使用 /en/ 表示英语，使用 /sp/ 表示西班牙语。这些以 ?lang=en 或 ?lang=sp 的形式传递给 index.php。

我有 2 个无法解决的问题；

*   我的规则有一个奇怪的失败不一致。可能有更好的方法来做我想做的事情。如果有人能告诉我如何做，我将不胜感激。我是 mod_rewrite 的菜鸟

*   当我使用 ?variable=value 在 URL 末尾添加更多内容时，它会出现在 ?lang=en 或 ?lang=sp 之后。这意味着第二个问号会导致 $_GET 出现故障，并且那些 $_GET 传递的变量会丢失。我需要一种将两个 $_GET 与 mod_rewrite 一起附加的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:15:42.473

为了解决您的第二个问题，您是否考虑过使用 QSA 标志？引用[文档](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriterule)：

> 'qsappend|QSA'（查询字符串追加）
> 
> 此标志强制重写引擎将替换字符串的查询字符串部分附加到现有字符串，而不是替换它。当您想通过重写规则向查询字符串添加更多数据时，请使用此选项。

关于第一个问题，您可以将`en`and组合`sp`成一个规则，如下所示。不过，这是否是一种改进还有待商榷。

```
RewriteRule ^(en|sp)/(.*)$ /main/$2?lang=$1 [L,Q] 
```

# asp.net - 如何在 Intranet 应用程序中将 IPv4 更改为域名

> ID：10211537
> 
> 赞同：1
> 
> 时间：2012-04-18T14:27:49.023
> 
> 标签：asp.net, iis-7.5

如何在 Intranet 应用程序（IIS 7.5）中将 IPv4（192.168.1.58）更改为域名（Abc.com）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:31:10.203

我认为您正在寻找的是主机标头。

[http://www.dotnetscraps.com/dotnetscraps/post/Did-you-know-Add-host-header-to-a-Web-Site-in-IIS-7-IIS-75.aspx](http://www.dotnetscraps.com/dotnetscraps/post/Did-you-know-Add-host-header-to-a-Web-Site-in-IIS-7-IIS-75.aspx)

# zend-framework - Zend 框架“无效的参数号：没有绑定参数”得到有问题的 sql

> ID：10211539
> 
> 赞同：0
> 
> 时间：2012-04-18T14:27:50.517
> 
> 标签：zend-framework, pdo

我有一个使用 Zend Framework 继承的大型网站。这是一个公司内部网站，许多员工一直在抱怨错误。最后一个人只给出了“这对我来说很好”的回应，这就是他被解雇的原因。

我经过并做了一些研究，发现我可以制作一个错误处理控制器。所以我创建了一个捕获所有错误的工具，并在它们出现时一直在修复它们（我现在明白为什么那个人说它对我来说很好，因为员工搞砸了一些事情而那个人只是没有有逻辑程序来处理那些搞砸了）。

现在我只处理了一些“无效的参数号：没有绑定参数”错误，我有堆栈跟踪，所以我知道是哪一行导致了错误。我也有 GET 和 POST 值。它导致抛出此错误的某些点有很多逻辑导致它。所以我想知道是否有办法从 Zend_Controller_Plugin_ErrorHandler 中检索正在运行的 SQL 语句。

我知道我可以包装电话并独立捕捉它们，但这无助于未来出现的问题。对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:37:06.743

如果您使用的是 PHP 5.3，请尝试从您拥有的异常中获取上一个异常。

如果没有，使用[Zend_Db_Profiler](http://framework.zend.com/manual/en/zend.db.profiler.html)并记录查询，然后在错误控制器中检索它们。不过，您可能必须手动匹配错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:52:34.760

根据 Rob 所说的，

我进去修改了 Zend_Db_Exception 类。并添加

```
public $_stmt = null; 
```

然后在 Zend_Db_Statement_Exception 类中，我将 __construct 更改为：

```
 /**
 * @param string $message
 * @param string|int $code
 * @param Exception $chainedException
     * @param Statment i.e. Query String
 */
public function __construct($message = null, $code = null, Exception $chainedException=null, $_stmt = null)
{
    $this->message = $message;
    $this->code = $code;
    $this->_chainedException = $chainedException;
        $this->_stmt = $_stmt;
} 
```

然后在 Zend_Db_Statement_Pdo 类中，我更改了所有

```
throw new Zend_Db_Statement_Exception($e->getMessage(), $e->getCode(), $e); 
```

到

```
throw new Zend_Db_Statement_Exception($e->getMessage(), $e->getCode(), $e, $this->_stmt); 
```

然后在我的 Zend_Controller_Plugin_ErrorHandler 操作中，我有这个引导它。

```
 $errors = $this->_getParam('error_handler');
    switch ($errors->type) {
        case "EXCEPTION_NO_ROUTE":
        case "EXCEPTION_NO_CONTROLLER":
        case "EXCEPTION_NO_ACTION":
            // 404 error -- controller or action not found
            $this->view->title = "Page Not Found";
            break;
        default:
            $this->view->title = "Unknown Error";
            break;
    }

    $sql = null;
    $offending_query = null;
    $exception = $errors->exception;
    try
    {
        $offending_query = $exception->_stmt->queryString;
    }
    catch (Zend_Exception $e)
    {   } 
```

通过对 Zend DB 核心的这一更改，我现在能够捕获所有有问题的 SQL 语句，而对性能的影响为零，这与分析器不同。

# python - 仅模拟对方法的所有调用的子集

> ID：10211546
> 
> 赞同：2
> 
> 时间：2012-04-18T14:28:09.300
> 
> 标签：python, mocking

我只想使用[Mock](http://www.voidspace.org.uk/python/mock/index.html)模块模拟对方法的子集调用。所以，

```
fubar = Fubar()
fubar.myMethod = Mock()
funar.myMethod.return_value = [fubar.myMethod(), 'MyMOck', fubar.MyMethod] 
```

会在第一次和第三次调用 read 方法`myMethod`，但会在第二次调用时调用 mocked 方法。我想这样做的原因是检查竞争条件：中间调用应该早于第一个调用返回，从而导致一些问题。至少，我希望我能做到这一点。

这可能吗？如果是这样，怎么做？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:48:14.690

这个怎么样：

```
fubar = Fubar()
myMethod = fubar.myMethod # note instance fubar, resulting in a bound method.
fubar.myMethod = lambda self, calls = [myMethod, (lambda: 'MyMock'), myMethod]: calls.pop()() 
```

这假设`myMethod`没有参数。您可以根据需要在 lambda 的主体中传递参数，或者 partial-apply `myMethod`。

如果您想以编程方式选择对模拟的调用，您可以使用生成器而不是列表，`next`而不是`pop`：

```
fubar.myMethod = lambda self, calls = iter([myMethod, (lambda: 'MyMock'), myMethod]): next(calls)() 
```

# android - 在 Eclipse 中持久设置 Android 项目的默认名称

> ID：10211547
> 
> 赞同：5
> 
> 时间：2012-04-18T14:28:10.720
> 
> 标签：android, eclipse, manifest

我有一个安卓项目。名称在 Android 清单中设置正确（android:label），包名称也设置正确（package="com.etc..."）。现在，当我将此项目添加到 Eclipse 时，包资源管理器获取的名称实际上是我的启动活动的名称。正如你可能想象的那样，这不是我想要的。

我可以通过在包资源管理器中选择项目，按 F2 并更改名称来重命名项目。但是，一旦我从 Eclipse 中删除了这个项目并重新添加它，那么选择的名称又是我第一个活动的名称。

有人知道如何告诉 Eclipse 选择清单的应用程序名称而不是启动活动名称吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:48:24.910

特定于 Android 的导入过程目前与非特定的 Eclipse 导入过程具有不同的行为。正如 Rajesh 指出的那样，您仍然可以通过*File* -> *Import* -> *General* -> *Existing Projects into Workspace*使用后者，这不会出现此问题。

这在[这个谷歌问题](http://code.google.com/p/android/issues/detail?id=40161&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)中得到了进一步的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:43:37.180

Eclipse 使用*.project*文件来存储项目的元数据。更改项目文件夹中的*.project*文件以反映您想要在`<name>`标记中使用的名称。

# windows-ce - 用于连接 conmanclient2/cmaccept 的 api

> ID：10211548
> 
> 赞同：2
> 
> 时间：2012-04-18T14:28:15.413
> 
> 标签：windows-ce, remote-debugging

我正在编写在自定义 Windows CE 5 和 6 设备上运行的 C# 和 C++ 程序。我已按照 Microsoft 网站 (http://msdn.microsoft.com/en-us/library/ms228708(v=vs.80).aspx) 上有关如何连接到 CE 设备的说明进行操作，一切正常DevStudio 和远程工具。

但是，我对远程工具不满意。所以我想写一些更好的。例如，一个用于将 *.dll 复制到设备上的目录的命令行工具，它不会说“您确定要覆盖该文件吗？” 每一个人。

有谁知道在这里使用 TCP/IP 连接到设备的协议/API 是什么？和/或可以指出我的代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:05:33.433

[CoreCon API](http://msdn.microsoft.com/en-us/library/bb384093%28v=VS.90%29.aspx)提供了一种机制来执行此操作。不久前，[VSD 团队在博客上](http://blogs.msdn.com/b/vsdteam/)发布了一个使用 API 创建您自己的文件查看器的 5 部分示例。

# mysql - 根据文档可接受的mysql选择速度？

> ID：10211550
> 
> 赞同：0
> 
> 时间：2012-04-18T14:28:27.447
> 
> 标签：mysql, performance, select, connector-net

MySQL 每秒有这么多条记录，是否有可接受的速度`SELECT`？我知道这取决于查询的复杂程度和我的机器规格。`SELECT`但是我可以对标准查询进行模糊/近似的速度估计吗？可能是这样的：

```
SELECT a, b, c, d, e, f FROM my_table; 
```

我使用 .NET 连接器访问 MySQL；从我的代码中，我做了这样的事情：

```
MySqlCommand cmd = new MySqlCommand(query, _conn);
MySqlDataReader r = cmd.ExecuteReader();

List<int> lst = new List<int>();
while (r.Read())
{
    lst.Add(.....
}

r.Close(); 
```

目前我可以`SELECT`在 150 毫秒内记录 25000 条记录。但是当我在它下面运行它`phpmyadmin`大约需要 75 毫秒。从 MySQL 控制台它需要少于 50 毫秒。文档是否`need not be worried about`建议通过连接器、控制台或其他方式进行限制？我在具有 2 Gb RAM 的 Intel Core2 Duo (2 GHz) 上运行。速度对我的需求至关重要。

我记得在某个地方读过这样一个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:33:16.920

首先，您是如何连接到数据库的？它是与本地主机的连接还是通过您的网络传输的数据？如果它不是第二个选项，我可以想象您的查询会返回它的结果有点慢。

另一方面，MySQL .NET 连接器是查询和数据库本身之间的额外层。因为在执行查询之前需要执行更多操作（例如连接到数据库并将结果添加到列表中），这可能需要比 PHPMyAdmin 需要的时间更长的时间。

编辑：我在发表评论后注意到了发布日期......

# maven - MAVEN 原型选择

> ID：10211552
> 
> 赞同：3
> 
> 时间：2012-04-18T14:28:32.247
> 
> 标签：maven, maven-archetype

嗨，我刚接触 Maven。我的要求是用 2 场战争建立一个耳朵并创建一个罐子。我尝试使用一些原型，但缺少一些文件夹结构。我的 maven 文件夹结构应该包含 src/main/java 资源 webapp test/java test/resource。哪种原型适合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T05:44:02.713

您不能在单个项目中拥有它，因为 EAR 由不同的模块组成。

所以为war、jar和build创建单独的项目。

创建war文件使用maven-archetype-webapp，jar使用maven-archetype-quickstart。

然后将这些项目模块包含在带有模块的主项目 pom 文件中

例如

```
<modules>
    <module>expLogdao</module>
    <module>expLogservice</module>
    <module>expLogweb</module>
    <module>expLogear</module>
</modules> 
```

然后使用单独的项目来构建耳朵

现在在 ear 项目依赖项标签中包含所有项目模块

```
 <dependency>
        <groupId>com.expLog.service</groupId>
        <artifactId>expLogservice</artifactId>
        <type>jar</type>
        <version>0.0.1-SNAPSHOT</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.expLog.dao</groupId>
        <artifactId>expLogdao</artifactId>
        <type>jar</type>
        <version>0.0.1-SNAPSHOT</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.expLog.web</groupId>
        <artifactId>expLogweb</artifactId>
        <type>war</type>
        <version>0.0.1-SNAPSHOT</version>
        <scope>provided</scope>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:44:58.213

由于问题的格式，很难看到你到底想要什么。

你看过**org.apache.maven.archetypes.maven-archetype-webapp**吗？

# multidimensional-array - Dijkstra的最短路径算法修改

> ID：10211555
> 
> 赞同：0
> 
> 时间：2012-04-18T14:28:41.730
> 
> 标签：multidimensional-array, path-finding, dijkstra, a-star

我正在为个人项目处理图像，但我坚持了一步（而且这是一个相对容易的步骤）顺便说一句，我的问题与图像无关。

我正在计算图像上每个像素的 int 值。我想找到像素（节点）之间成本最低的路径。实际上我有一个 A* 算法的工作实现。但我不想使用它，因为我不想将“地图”限制为只能通过或不能通过的节点。我希望每个节点都可以通过但要付出代价。有些节点的通过成本很高，有些则不会。但是不会有不能通过的节点。

我认为我不需要提供任何代码，因为它是项目中非常孤立的部分。所以我不想操纵任何人。但基本上我有一个包含节点列表的地图对象。并且节点有 id, x,y 位置。成本、邻居（顶部、底部、左右像素）和节点参考，以了解我从哪里来到这里等。

我希望我能表达出与 Dijkstra 最短路径算法的区别。我该如何相应地修改它？或者任何人都可以推荐另一种方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:57:56.720

我想我看到了问题......“有些节点的通过成本很高，有些则不会。” 这不是算法的真正工作方式，您应该将问题转化为节点（无成本）和边（有成本）。然后应该很容易使用 A*、Dijkstra 或任何其他寻路算法。

在您的情况下，每个像素都是一个节点/顶点。每个像素都有 4 个边缘（边界处除外）。边缘的成本将是目标像素的 int 值。

此外，您不应该在节点中保留节点引用，这是算法工作来跟踪它的来源。

希望这可以帮助。

# android - 安卓 GPRS C2DM

> ID：10211556
> 
> 赞同：0
> 
> 时间：2012-04-18T14:28:42.327
> 
> 标签：android, android-c2dm

在特定场景中，我们正在为 C2DM 通知注册设备。当通知从第三方服务器触发时，它成功获取通知。现在，如果移动设备的 GPRS 连接丢失，但仍与运营商保持连接，它将收到推送通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:06:47.140

如果您的意思是设备完全失去数据连接，那么不会。C2DM 需要数据才能工作。

# javascript - 信息窗口的中心地图，而不是谷歌地图中的路线

> ID：10211559
> 
> 赞同：0
> 
> 时间：2012-04-18T14:28:51.903
> 
> 标签：javascript, google-maps, google-maps-api-3

我的 google 地图以路线为中心，该路线由 Direction Service 提供并由 Direction Renderer 渲染（此处称为方向显示）。

根据我读过的文档和许多线程和论坛，infoWindow 应该自动平移以 3.0 版（我正在使用）为中心。

我一直在等到调用所有回调，我试图在触发 gmaps tileloaded-Event 以及空闲事件时打开窗口。

无论如何：地图始终以路线为中心（因此将信息窗口推出视口）。

我在这里做错了什么？

```
directionsService.route(request, function(result, status) {

        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(result);
            directionsDisplay.suppressMarkers = true;

            if(this.marker){
                this.marker.setPosition(result.routes[0].overview_path[result.routes[0].overview_path.length-1]);
            } else{
                this.marker = new google.maps.Marker({
                    position: result.routes[0].overview_path[result.routes[0].overview_path.length-1], 
                    map: Gmap.map
                });

            }

                var contentString = '<div id="infowindow_title">Hello World</div><div id="infowindow_cat">Lorem Ipsum</div>';
                if(!this.infoWindow){
                    this.infoWindow = new google.maps.InfoWindow({
                        content: contentString                      
                    });
                } else {
                    this.infowindow.setContent(contentString);
                }

                this.infoWindow.open(Gmap.map, this.marker);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:14:42.753

我发现了错误：gMaps 做对了；有一些 css（在我使用的 cms 的主题中），将堆栈中的某些层设置为溢出：隐藏。

因此，gMaps 认为它​​有更多的空间来显示 infoWindow，而不是实际可见。

# postgresql - postgresql 查找唯一的元组

> ID：10211560
> 
> 赞同：0
> 
> 时间：2012-04-18T14:28:55.650
> 
> 标签：postgresql

我有两张桌子

```
create table JobStaff (
    Job      integer references Job(id),
    staff       integer references Staff(id),
    role        integer references JobRole(id),
    primary key (course,staff,role)
);

create table Job (
    cid         integer, 
    branch     integer not null references Branches(id),
    term        integer not null references Terms(id),
    primary key (id)
); 
```

我试图找到所有没有员工的工作。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:40:42.683

首先，像这样修复您的创建表查询：

```
create table JobStaff (
    jobid         integer references Job(id),
    staffid       integer references Staff(id),
    roleid        integer references JobRole(id),
    primary key (jobid,staffid,roleid)
);

create table Job (
    id          integer, 
    branch      integer not null references Branches(id),
    term        integer not null references Terms(id),
    primary key (id)
); 
```

*   `JobStaff`的主键应该使用`jobid`而不是`courseid`;
*   `Job`的第一列应该`id`代替`cid`;
*   我建议使用有意义的列名，例如`jobid`在使用对 id 列的引用时。

然后对于您的查询，您将需要这样的东西：

```
SELECT * FROM Job
WHERE id NOT IN (SELECT DISTINCT jobid FROM JobStaff); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:34:25.770

一种可能的方式：

```
SELECT *
FROM   job j
LEFT   JOIN jobstaff js ON js.job = j.id
WHERE  js.job IS NULL; 
```

我昨天在 dba.SE 上为这类问题写了一个更全面的答案： [https ://dba.stackexchange.com/a/16651/3684](https://dba.stackexchange.com/a/16651/3684)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:08:26.120

使用 Francis P 的答案中的定义，但`REFERENCES`省略了未定义的表，我建议 PostgreSQL 版本 8.4 或更高版本（Erwin Brandstetter 的综合答案中的一个选项的变体，他在他的答案中链接到）：

```
SELECT *
  FROM Job j
  WHERE NOT EXISTS (SELECT * FROM jobstaff js WHERE js.jobid = j.id); 
```

在最新版本的 PostgreSQL 中，这将优化与 Erwin 答案相同，除了它只会显示来自 Job 的列，这似乎是你想要的。较窄的行（省略不需要的列）可能会在规模上表现得更好。在旧版本的 PostgreSQL（8.4 版之前）中，使用 Erwin 的答案中显示的选项可能会获得更好的性能；在 8.4 中添加了半连接和反连接优化，`LEFT JOIN`技巧是模拟它的最佳方法。

请注意，`DISTINCT`在这种情况下不需要。

对于 PostgreSQL 中的这种情况，我建议不`NOT IN`要这样做。虽然在这里它在逻辑上并不重要，因为`PRIMARY KEY`约束将隐式强制所涉及的列`NOT NULL`，但当涉及 NULL 列时具有令人惊讶的语义，并且处理这些语义的`NOT IN`逻辑不如. PostgreSQL 不会消耗处理时间来查看参数是否可证明，所以无论如何你都会得到糟糕的优化。`NOT EXISTS``LEFT JOIN``NOT NULL`

# c# - 泛型方法之间的模糊引用

> ID：10211561
> 
> 赞同：2
> 
> 时间：2012-04-18T14:28:58.473
> 
> 标签：c#, generics

我试图创建一个通用方法来使用 datarowextension 方法从数据行中读取列值：

```
public static Nullable<T> SafeRead<T>(DataRow row, string fieldName) where T : struct
    {
        if (row.HasColumn(fieldName))
        {
            return row.Field<Nullable<T>>(fieldName) ?? default(Nullable<T>);
        }
        else
            return default(Nullable<T>);
    }

    public static T SafeRead<T>(DataRow row, string fieldName) where T : class
    {
        if (row.HasColumn(fieldName))
        {
            return row.Field<T>(fieldName) ?? default(T);
        }
        else
            return default(T);
    } 
```

当我从我的代码中调用这个函数时，编译器会抱怨这两个调用之间有一个不明确的引用，这在我查看方法签名时很明显。但是，我不确定如何在不使用单独方法的情况下处理此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:32:13.353

返回值不是识别方法签名的一部分。所以你的方法在编译器看来是这样的：

```
SafeRead<T>(DataRow row, string fieldName) 
```

和

```
SafeRead<T>(DataRow row, string fieldName) 
```

-> 没有区别。

您应该重命名其中一种方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-04-07T09:52:23.980

这是因为两个命名空间都包含相同的对象。要解决此问题，请使用类型别名

*示例*：如果`System.Drawing.Image`并`System.Web.UI.WebControls`导致错误，则以下`using`语句将允许您为`System.Drawing`类创建别名：

```
using GdiImage = System.Drawing.Image;
using System.Web.UI.WebControls; 
```

# javascript - HTML5/jQuery 节拍器 - 性能问题

> ID：10211567
> 
> 赞同：6
> 
> 时间：2012-04-18T14:29:05.460
> 
> 标签：javascript, jquery, performance, setinterval

正如标题中提到的，我正在尝试创建一个基于 jQuery/JavaScript 的节拍器以及 HTML`<audio />`标签来播放声音。

它工作“没问题”，但在我看来，该`setInterval`方法工作得不够准确。我在这里搜索了一些线程，但是因为我对 jQuery 和 JavaScript 都是新手，而且我还没有找到可行的解决方案。“打开新选项卡并 setInterval 停止或滞后” - 问题相同。我试图阻止这种情况，`stop(true,true)`但它没有按我的预期工作。

我希望节拍器在打开新标签并在那里做某事时“在后台”运行而不改变速度。我当然也想要一个精确的节拍器；）

这是我的测试环境： http: [//nie-wieder.net/metronom/test.html](http://nie-wieder.net/metronom/test.html)

目前 JS-Code 和 HTML-markup 都在 test.html 源码中，你可以去那里看看。

另外，这是我使用的相关（我认为）js代码：

```
$(document).ready(function() {

    //vars
    var intervalReference   = 0;
    var currentCount        = 1;      
    var countIncrement      = .5;      
    var smin = 10;
    var smax =240;
    var svalue = 120;

    //soundchkbox
    $(".sndchck").attr("disabled", true);

    //preload sound
    $.ajax({
        url: "snd/tick.ogg",
        success: function() {
            $(".sndchck").removeAttr("disabled");
        }
    });

    // tick event
    var met = $("#bpm").slider({
            value: 120,
            min: smin,
            max: smax,
            step: 1,
            change: function( event, ui ) {
                var delay = (1000*60/ui.value)/2
                clearInterval(intervalReference);

                //seems to be the Problem for me
                intervalReference = setInterval(function(){
                    var $cur_sd = $('#sub_div_'+currentCount);
                    $cur_sd
                    .stop(true,true)
                    .animate({opacity: 1},15,
                                function() {
                                //Play HTML5 Sound
                                if($('#sound_check:checked').val()){
                                    $('#tick')
                                    .stop(true,true)
                                    .trigger("play");
                                }
                                    $(this).
                                    stop(true,true).
                                    animate({opacity:0});
                                }
                    );
                    currentCount += countIncrement;
                    if(currentCount > 4.5) currentCount = 1
                }, delay);
                createMusicTag(ui);
            }
        });
}); 
```

任何帮助都会很棒，我现在没有想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:36:26.750

setInterval 不准确。你可以尝试做的是：

```
var timestamp = (new Date()).getTime();
function run() {

     var now = (new Date()).getTime();

     if( now - timestamp >= 1000 ) {
         console.log( 'tick' );
         timestamp = now;
     }

     setTimeout(run, 10);
}
run(); 
```

这将（每百分之一秒）将“时间戳”与当前时间进行比较，以查看差异是否为一秒或更多（偏差为 0.01 秒）以及是否记录“滴答”并重置当前时间戳。

[http://jsfiddle.net/rlemon/UqbwT/](http://jsfiddle.net/rlemon/UqbwT/)

这是需要时间准确（imo）的最佳方法。

更新：如果你改变 setTimeout 时间设置......你会得到更少的偏差。[http://jsfiddle.net/rlemon/UqbwT/1/](http://jsfiddle.net/rlemon/UqbwT/1/)

第二次更新：在查看了这篇文章之后，我认为必须有一种更准确的方式在 javascript 中使用计时器。所以通过一些研究，我发现了[这篇](http://www.sitepoint.com/creating-accurate-timers-in-javascript/)文章。我建议你阅读它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-05T00:20:21.177

在尝试为鼓机应用程序哄骗`requestAnimationFrame`并`setTimeout`准确计时但失败后（一个 3 岁的孩子可以保持比我的代码更好的节奏），我放弃并切换到[Web Audio API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)，它立即为我的目的提供了准确的音频计时。

这是一个最小的例子：

```
const scheduleBeep = time => {
  const osc = audioContext.createOscillator();
  osc.connect(audioContext.destination);
  osc.frequency.value = 300;
  osc.start(time);
  osc.stop(time + 0.1);
};

window.AudioContext = window.AudioContext || window.webkitAudioContext;
const audioContext = new AudioContext();
let timeBetweenSteps = 60 / 120;
let nextStepTime;
let interval;
const lookahead = 0.1;
const timeoutDelay = 30;

const schedule = () => {
  while (nextStepTime < audioContext.currentTime + lookahead) {
    nextStepTime += timeBetweenSteps;
    scheduleBeep(nextStepTime);
  }
};
document.querySelector("button")
  .addEventListener("click", evt => {
    clearInterval(interval);

    if (evt.target.textContent === "Run") {
      evt.target.textContent = "Stop";
      nextStepTime = audioContext.currentTime;
      interval = setInterval(schedule, timeoutDelay);
    }
    else {
      evt.target.textContent = "Run";
    }
  })
;
```

```
<button>Run</button>
```

还有一个稍微复杂的例子，它添加了一个声音文件和一个 BPM 滑块：

```
<body>
<form class="metronome">
  <button class="run">Run</button>
  <input class="bpm" type="range" min="60" max="500" value="120">
  <span class="bpm-readout">120</span>
</form>

<script>

const url = "https://upload.wikimedia.org/wikipedia/commons/e/e5/Abadie.jo-Marteau-1.ogg";

const $ = document.querySelector.bind(document);
const metroEls = {
  run: $(".metronome .run"),
  bpm: $(".metronome .bpm"),
  bpmReadout: $(".metronome .bpm-readout"),
};

window.AudioContext = 
  window.AudioContext || window.webkitAudioContext
;
const audioContext = new AudioContext();

(async () => {
  const response = await fetch(url);
  const arrayBuffer = await response.arrayBuffer();
  const audioBuffer = await audioContext
    .decodeAudioData(arrayBuffer)
  ;

  const scheduleSample = time => {
    const source = audioContext.createBufferSource();
    source.buffer = audioBuffer;
    source.connect(audioContext.destination);
    source.start(time);
  };

  let timeBetweenSteps = 60 / 120;
  let nextStepTime;
  let interval;
  const lookahead = 0.1;
  const timeoutDelay = 30;

  const schedule = () => {
    while (nextStepTime < 
             audioContext.currentTime + lookahead) {
      nextStepTime += timeBetweenSteps;
      scheduleSample(nextStepTime);
    }
  };
  metroEls.run.addEventListener("click", () => {
    if (metroEls.run.textContent === "Run") {
      metroEls.run.textContent = "Stop";
      nextStepTime = audioContext.currentTime;
      clearInterval(interval);
      interval = setInterval(schedule, timeoutDelay);
    }
    else {
      metroEls.run.textContent = "Run";
      clearInterval(interval);
    }
  });
  metroEls.bpm.addEventListener("change", e => {
    timeBetweenSteps = 60 / e.target.value;
    metroEls.bpmReadout.innerText = e.target.value;
  });
})();

</script>
</body> 
```

有用的资源：

*   [Paul Adenot：使用 Web Audio API 的强大节拍器](https://blog.paul.cx/post/metronome/)
*   [Monica Dinculescu：JavaScript 中的节拍器](https://meowni.ca/posts/metronomes/)
*   [Chris Wilson：精确调度 Web 音频](https://www.html5rocks.com/en/tutorials/audio/scheduling/)
*   [MDN 网络音频 API 示例](https://github.com/mdn/webaudio-examples)
*   [MDN Web 音频 API 高级技术](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Advanced_techniques)
*   [Amila Welihinda 的 Vue 鼓机](https://github.com/amilajack/drum-machine)
*   [Aqilah Misuary：了解网络音频时钟](https://sonoport.github.io/web-audio-clock.html)
*   [SitePoint CodePen：使用 Web Audio API 播放 MP3 文件](https://codepen.io/SitePoint/pen/JRaLVR)
*   [Tone.js](https://github.com/Tonejs/Tone.js/#scheduling)是一个基于 Web Audio API 的库，其中包括方便的循环抽象。

# mysql - 如何创建 MySQL 数据库？

> ID：10211576
> 
> 赞同：-2
> 
> 时间：2012-04-18T14:29:49.733
> 
> 标签：mysql, sql, database

我有一个创建表和插入数据的 .SQL 文件。我应该有一个 db.inc 文件存储在我的包含文件夹中 - 那是实际的数据库。如何创建 db.inc 文件？

注意，这是一个家庭作业，我的文件确实有一个 CREATE DATABASE 语句，但是当我用 mysqli 连接到数据库时，我需要一个 db.inc 文件，那个文件到底是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:32:12.840

[http://dev.mysql.com/doc/refman/5.0/en/create-database.html](http://dev.mysql.com/doc/refman/5.0/en/create-database.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:37:02.990

只需打开 .SQL 文件并添加命令。

```
CREATE DATABASE database_name 
```

# java - 使用给定路径将文件保存到 GridFS

> ID：10211577
> 
> 赞同：4
> 
> 时间：2012-04-18T14:29:52.340
> 
> 标签：java, gridfs

给定一个输入流、一个文件名字符串和一个路径字符串，如何使用 Java 将文件存储在 GridFS 中？现在我在没有路径的情况下保存它：

```
public ObjectId saveFile(InputStream inputStream, String filename, String folder) { 
   GridFSInputFile gInputFile = gridfs.createFile(inputStream, filename);
   gInputFile.save();
   return ObjectId.massageToObjectId( gInputFile.getId() );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T04:42:51.027

GridFS 不会将文件存储为类似于文件系统层次结构的结构。所以没有任何与存储文件关联的路径。但是您可以手动添加路径字段。

```
public ObjectId saveFile(InputStream inputStream, String filename, String folder) { 
    GridFSInputFile gInputFile = gridfs.createFile(inputStream, filename);
    gInputFile.put("path", folder);
    gInputFile.save();
    return ObjectId.massageToObjectId( gInputFile.getId() );
} 
```

现在所有文件都将具有“路径”属性。

# iphone - 为imageview制作涟漪效果的代码

> ID：10211578
> 
> 赞同：0
> 
> 时间：2012-04-18T14:29:56.210
> 
> 标签：iphone, ios, ios4

我正在为水族馆开发一款 iphone 应用程序。在那我必须为鱼图像制作涟漪效果。

```
[UIView beginAnimations:@"suck" context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:110 forView:viw_mainfish cache:NO];
[UIView commitAnimations]; 
```

我尝试使用上述编码，但它不起作用。其他效果正在起作用，但我不知道为什么涟漪效应不起作用。我是新手。所以任何人都可以帮助我。

```
101     pageCurl    
102     pageUnCurl      
103     suckEffect  
104     spewEffect  
105     cameraIris  
106     cameraIrisHollowClose   
107     cameraIrisHollowOpen    
108     genieEffect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:35:35.127

```
[animation setType:@"rippleEffect" ]; 
```

或者

```
[UIView setAnimationTransition:(UIViewAnimationTransition)110 forView: viw_mainfish cache:NO]; 
```

# c# - 如何有效地确定圆内的 n 个位置？

> ID：10211579
> 
> 赞同：1
> 
> 时间：2012-04-18T14:29:56.473
> 
> 标签：c#, sql-server, performance, google-maps, geolocation

鉴于这种情况：

1.  我们在全球有 1,000,000 个点，由经度和纬度指定；
2.  我们有一个基于点 pc（由经度和纬度指定）和半径 rc 的圆 c
3.  我们想要有效地确定哪些点在圆中

我正在使用 C# 和存储在 SQL Server 2008 中的位置进行开发。

所以在我看来，我有以下 3 个选项：

1.  将位置存储为经度纬度浮点数并在 C# 中执行计算。

2.  将位置存储为地理数据类型并在 SQL Server 2008 中执行计算，如下所示：

    ```
    CREATE TABLE UserLocations
    [UserId] [bigint] NOT NULL,
    [CurrentLocation] [geography] NOT NULL

    ALTER PROCEDURE sp_GetCurrentUsersInRange
    @userPoint geography, 
    @RangeInMeters int
    AS
    BEGIN

    select  UserId from UserLocations
    where @userPoint.STDistance(CurrentLocation) <= @RangeInMeters
    and UserId <> @userId

    END 
    ```

    缺点：在 LinqToSQL 和 LinqToEntities 中使用地理数据存在问题。

    优点：对大数据使用 dbms 处理能力，以及使用 SQL Server 空间索引。

3.使用一些网络服务，如谷歌的地理定位和计算服务。到目前为止，我还没有找到这样的网络服务。

**你认为哪个效率最高？**请证明你的回答。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:53:23.037

我天真的方法是在点 pc 周围定义一个纬度/经度边界框，并使用`BETWEEN`这些框坐标从数据库中进行选择。据统计，大约 79% 的通过该测试的点将在圆圈内。对代码的简单检查将清除圆圈外的代码。

我说幼稚是因为我不熟悉 SQL Server 的几何功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:28:10.283

作为使用几何圆的替代方法，您可以选择距圆中心一定距离（使用 STDistance）内的所有记录。但我不知道它是否会比您列出的交叉路口解决方案更快或更慢。

如果 100,000 个点是静态的，您可能会在 C# 中编写代码，将列表加载到内存中并使用边界框来最小化距离计算的使用（即，Haversine）。它可能会更快，因为您正在最小化 I/O。

但是，如果这些点不是静态的（或者您将它们存储在 SQL Server 中），我会选择使用 SQL Server，这样会容易得多。您肯定想要创建正确的空间索引。SQL Server 的空间索引非常好，您可能会发现它甚至可以胜过我上面列出的内存解决方案。

我没有将 LINQ 用于此类工作，我通常使用 SqlConnection 和 Reader 进行老式操作。我读过 LINQ 与 Spatials 混合是一个问题。

我不知道谷歌，他们有这样的网络服务吗？

# c++ - 什么是分配器

> ID：10211586
> 
> 赞同：4
> 
> 时间：2012-04-18T14:30:24.227
> 
> 标签：c++

我正在尝试实现一个向量，并且我已经读到最好的实现使用分配器类（内存头文件）。我不知道它是什么，网站 cplusplus.com 根本没有帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T14:44:26.293

它是内存管理的抽象。

在 C 编程中，您基本上使用函数`malloc()`并`free()`分配内存块，而无需知道这些块是如何分配的。在 C++ 中，函数是[`operator new()`](http://www.cplusplus.com/reference/std/new/operator%20new/)和[`operator delete()`](http://www.cplusplus.com/reference/std/new/operator%20delete/)。

`std::allocator`是一个模板，带有一个类型参数，即要分配的对象的类型。`std::allocator`使用`operator new()`和内部的实例化，但具有关于什么是的信息`operator delete()`的事实意味着它知道如何构造和销毁对象。`std::allocator<T>``T``T`

的四个基本功能`std::allocator<T>`是：

1.  `allocate(size_type n)`

    用于`operator new()`为`n * sizeof (T)`字节分配空间。请注意，`n` `T`分配的对象都没有被构造；不像`new T()`，它既为一个`T`对象分配空间，*又*调用一个无参数的构造函数，`allocate(size_type n)`只为`n` `T`对象分配空间。您需要使用`construct()`明确地构造每一个。

2.  `deallocate(pointer p, size_type n)`

    用于`operator delete()`释放上一次调用返回的内存`allocate()`。注意`deallocate()`只释放空间。您必须显式调用`destroy()`每个`n` `T`对象，否则您可能会泄漏内存。

3.  `construct(pointer p, const T& val)`

    调用位于 的对象的`T`复制构造函数。`T``p`

4.  `destroy(pointer p)`

    在位于 的对象上调用`T`析构函数。`T``p`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:33:53.100

它是一个对标准库容器类进行内存管理的类。
但是，如果您想提供自己的内存管理，您可以这样做，`std::allocator`提供默认的内存管理。

# java - 使用 XSOM 获取 xs:choice maxOccurs 和 minOccurs 属性

> ID：10211595
> 
> 赞同：0
> 
> 时间：2012-04-18T14:30:53.057
> 
> 标签：java, xml, xsd, schema, xsom

我有以下一段架构代码：

```
<xsd:choice minOccurs="0" maxOccurs="unbounded">
  <xsd:element ref="ref1"/>
  <xsd:element ref="ref2"/>
  <xsd:element ref="ref3"/>
  <xsd:element ref="ref4"/>
  <xsd:element ref="ref5"/>
</xsd:choice> 
```

我正在使用用于 Java 的 XSOM 库，我想检索有关 xsd:choice 元素中描述的 minOccurs 和 maxOccurs 的信息。我在 Internet 上环顾四周，但只能找到从实际元素中检索此信息的解决方案，而不是 xs:choice 元素。

我还确定了可以“捕捉” xs:choice 元素的位置：

```
public void startElement(XSModelGroup arg0) {
  if (arg0.getCompositor() == XSModelGroup.CHOICE) {

  }
} 
```

我在这里想要实现的是区分多项选择“选择”和单选。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:57:04.513

如果您从 XSComplexType 开始，则可以从 XSContentType 获取，从 XSContentType 可以执行 asParticle() 以将内容作为粒子获取；并且从一个粒子中，您可以执行 getTerm() 以在组件结构层次结构中获取其子级；对于一个模式组的术语（可能包括一个 xs:choice），您可以执行 asModelGroup() 以获得下一个级别。XSParticle 是 minOccurs() 和 maxOccurs() 属性可用的地方。这是一个非常奇怪的模型。

# c# - 为我的日志查看器创建一个正在使用的临时文件版本？

> ID：10211597
> 
> 赞同：1
> 
> 时间：2012-04-18T14:31:00.000
> 
> 标签：c#, .net, c#-4.0

我编写了一个在后台运行的应用程序，每 5 秒将信息从不同来源记录到一个文件中。

我正在编写另一个应用程序来充当日志查看器，但显然我无法打开该文件，因为它经常被记录器本身使用。有什么方法可以创建日志文件的临时副本供查看器使用，它可以在退出时删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:38:14.127

[使用重载方法之一](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)在两个应用程序（记录器和查看器）中打开文件，该方法接受[FileShare](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)参数并将其设置为 ReadWrite。然后两个程序可以同时使用同一个文件。

# caching - 缓存精灵以节省内存

> ID：10211607
> 
> 赞同：0
> 
> 时间：2012-04-18T14:31:34.723
> 
> 标签：caching, cocos2d-iphone, sprite

在我的游戏场景中，我在 CCParallaxNode 中使用了 5 个背景图像（精灵），并且我必须使用每个精灵两次才能永久移动所有这些图层。如何缓存这些精灵以节省内存？

我只想逃离**CCSprite *for _level_1**和**CCSprite *for _level_2**因为它两次相同的图像。

```
_backgroundNode = [CCParallaxNode node];
_backgroundNode.anchorPoint = CGPointMake(0, 0);
_backgroundNode.position = CGPointMake(0, 0);
[self addChild:_backgroundNode z:-1]; 
```

......

循环中

```
 CCSprite *fon_level_1 = [CCSprite spriteWithFile:[NSString stringWithFormat:@"%@", name]];
            CCSprite *fon_level_2 = [CCSprite spriteWithFile:[NSString stringWithFormat:@"%@", name]];
            fon_level_1.anchorPoint = CGPointMake(0, 0);
            fon_level_1.position = CGPointMake(0, 0);
            fon_level_2.anchorPoint = CGPointMake(0, 0);
            fon_level_2.position = CGPointMake(0, 0);
            [_backgroundNode addChild:fon_level_1 z:zIndex parallaxRatio:ccp(ratio, ratio) positionOffset:ccp(offsetx, offsety*screenSize.height)];
            [_backgroundNode addChild:fon_level_2 z:zIndex parallaxRatio:ccp(ratio, ratio) positionOffset:ccp(fon_level_1.contentSize.width, offsety*screenSize.height)];
            [_backgrounds addObject:fon_level_1];
            [_backgrounds addObject:fon_level_2]; 
```

方法，移动 fons 并检查实现背景层的结束

```
-(void) updateBackgroud:(ccTime)delta
{
    CGPoint backgroundScrollVel = ccp(-1000, 0);

    _backgroundNode.position = ccpAdd(_backgroundNode.position, ccpMult(backgroundScrollVel, delta));

    for (CCSprite *background in _backgrounds) {
        if (([_backgroundNode convertToWorldSpace:background.position].x+background.contentSize.width/10) < -(background.contentSize.width)) {
            [_backgroundNode incrementOffset:ccp(background.contentSize.width*2,0) forChild:background];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:08:22.010

您应该只将纹理添加到纹理缓存一次，CCSprite 实例不会复制纹理。它只存储一个指向纹理和帧参数（原点和大小）的指针，以了解要使用纹理的哪一部分（例如，如果您有一个包含大量精灵的大图集）。

实际上，您可能不会直接将纹理添加到纹理缓存中。它将被添加到 CCSprite 实例 init 方法中的纹理缓存中。

# android - ACTION_POWER_CONNECTED 的问题

> ID：10211609
> 
> 赞同：8
> 
> 时间：2012-04-18T14:31:37.830
> 
> 标签：android

我在我的应用程序中使用以下示例页面中的代码来监控设备何时连接/断开电源适配器：

[http://developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

所以我的清单中有：

```
 <receiver android:name=".StatusChangeReceiver">
        <intent-filter>
            <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
            <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"/>
        </intent-filter>
    </receiver> 
```

我的课看起来像这样：

```
public class StatusChangeReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
    boolean isActive = prefs.getBoolean("isActive", false);
    if (isActive){
        int status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
        boolean isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING || status == BatteryManager.BATTERY_STATUS_FULL;
        // Do somthing with isCharging here
    }

} 
```

但是 isCharging 总是假的，不管电源是连接还是断开。我显然在调试时遇到了问题，因为我必须继续（断开）连接 USB 电缆才能触发事件。

我假设当电源连接时事件被触发并且在我的代码运行之前状态没有更新，但我不确定解决它的最佳方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-06-27T18:09:54.147

正如@gnichola 所建议的，参考[这篇文章](https://stackoverflow.com/questions/14217789/obtaining-usb-cable-plugged-in-out-event-using-extra-plugged-does-not-work/20392715#20392715)是正确的答案：

```
public class PowerReceiver extends BroadcastReceiver {

    @Override public void onReceive(Context context, Intent intent) {
        if(intent.getAction() == Intent.ACTION_POWER_CONNECTED) {
            //Handle power connected
        } else if(intent.getAction() == Intent.ACTION_POWER_DISCONNECTED){
            //Handle power disconnected
        }
    }
} 
```

以下是另一种（尽管不正确）方法：

我遇到了与其他人指出的相同的问题。我的解决方案是在和广播接收器中调用`ACTION_BATTERY_CHANGED`阻塞意图：`ACTION_POWER_CONNECTED``ACTION_POWER_DISCONNECTED`

在`onCreate()`或其他一些适当的初始化程序中：

```
// register our power status receivers
IntentFilter powerConnectedFilter = new IntentFilter(Intent.ACTION_POWER_CONNECTED);
registerReceiver(PowerStatusReceiver, powerConnectedFilter);

IntentFilter powerDisconnectedFilter = new IntentFilter(Intent.ACTION_POWER_DISCONNECTED);
registerReceiver(PowerStatusReceiver, powerDisconnectedFilter); 
```

定义我们的`BroadcastReceiver`并将`BATTERY_STATUS`请求嵌入其中：

```
BroadcastReceiver PowerStatusReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        Intent batteryStatus = context.registerReceiver(null, ifilter);

        // Are we charging / charged?
        int status = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
        isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING ||
                     status == BatteryManager.BATTERY_STATUS_FULL;
    }
}; 
```

此外，使用这种方法，您不必在清单中定义接收器......但这最终完全取决于您的用例需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-13T06:59:08.350

您也可以通过以下方式检查`BatteryManager.EXTRA_PLUGGED`

```
public boolean isChargingmy(Context context)
    {
        IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        Intent batteryStatus = context.getApplicationContext().registerReceiver(null, ifilter);
        boolean bCharging=false;
        if(batteryStatus != null){

            int plugged = batteryStatus.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);
            Log.e("plugged","plugged:"+plugged);
            bCharging= plugged == BatteryManager.BATTERY_PLUGGED_AC || plugged == BatteryManager.BATTERY_PLUGGED_USB;
            Log.e("bCharging","bCharging:"+bCharging);
        }
        else{
            Log.e("batteryStatus","batteryStatus:"+null);
        }

        return bCharging;
    } 
```

我已经在里面注册了接收器，`BroadcastReceiver`所以我用过 `context.getApplicationContext().registerReceiver()`。`context.registerReceiver()`仅当您未在其上注册时才必须使用`BroadcastReceiver`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-06T19:20:04.383

我有同样的问题，但是看看意图操作使用的是什么 intent.getAction()，广播接收到预期的信息：

> ```
> I/POWER: android.intent.action.ACTION_POWER_DISCONNECTED   
> I/POWER: android.intent.action.ACTION_POWER_CONNECTED 
> ```

因此，就我而言，这就是我在代码中所需要的，因为我知道何时连接/断开电缆。请记住，使用这意味着您只收到这些事件，而不是其他与电池相关的事件，就像使用`ACTION_BATTERY_CHANGED`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T16:01:52.780

此处也进行了解释：[ACTION_POWER_CONNECTED 上的电池状态](https://stackoverflow.com/questions/8024082/battery-status-on-action-power-connected)

我遇到了同样的问题，并且打电话或检查电池状态的速度太快了。ACTION_POWER_CONNECTED 在 ACTION_BATTERY_CHANGED 更新之前被调用，所以也许使用 AlarmManager 来安排自己在几秒钟内再次醒来，然后再次检查。两秒钟，在我的测试中还不够长...

# ssas - 用于存储在 ssas 多维数据集中的文件

> ID：10211612
> 
> 赞同：1
> 
> 时间：2012-04-18T14:31:43.540
> 
> 标签：ssas

谁能告诉我用于在 ssas 多维数据集中存储数据的文件的结构（例如数据库中用于存储数据的 8kb 文件）。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T23:03:16.670

您想知道 SSAS 是如何在内部存储数据的吗？

您应该首先了解 SSAS 是如何存储数据的……

3种存储方式你了解吗？ROLAP、HOLAP 和 MOLAP？如果你有 ROLAP，你的多维数据集上实际上没有事实数据，它是 100% 在你的关系数据库上，如果你有 HOLAP，你只有聚合。

您还应该了解分区的工作原理。基本上，您可以根据条件（通常是日期）将事实数据“切割”成几部分并存储不同的位置

# wpf - 使用 ChangePropertyAction 设置附加属性值

> ID：10211616
> 
> 赞同：3
> 
> 时间：2012-04-18T14:31:53.930
> 
> 标签：wpf, attached-properties

我想知道 WPF 中的 ChangePropertyAction 是否支持修改目标对象的附加属性值？当试图指定像 Canvas.Top 这样的附加属性时，会引发异常（不管它的名称是否用括号括起来）。在此先感谢您的有用回复；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:57:24.053

不幸的是，这似乎是不可能的。见这篇文章 [http://forums.silverlight.net/t/201358.aspx](http://forums.silverlight.net/t/201358.aspx)

如果您将相关属性放在视图模型上，例如

```
public class MainWindowViewModel : INotifyPropertyChanged
{
    public MainWindowViewModel()
    {
        Left = 50;
        Top = 50;
    }

    public void AddOneHundred()
    {
        Left += 100;
    }

    private double _left;
    public double Left
    {
        get { return _left; }
        set
        {
            _left = value;

            RaisePropertyChanged("Left");
        }
    }

    private void RaisePropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if(handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public double Top { get; set; }

    #region Implementation of INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
} 
```

并绑定到那些（左，上），然后您可以在视图模型上使用 CallMethodAction 或 ChangePropertyAction

```
 <Canvas>
        <Canvas x:Name="theCanvas">
            <TextBlock Text="TextBlock" Canvas.Top="{Binding Top}" Canvas.Left="{Binding Left}"/>

            <Button Content="Button" Canvas.Left="48" Canvas.Top="96" Width="75">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                        <!--<ei:CallMethodAction TargetObject="{Binding}" MethodName="AddOneHundred"/>-->
                        <ei:ChangePropertyAction TargetObject="{Binding}" PropertyName="Left" Value="200"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </Button>
        </Canvas>
    </Canvas> 
```

# json - json.stringify 输出是 1023 个字符...为什么？

> ID：10211620
> 
> 赞同：4
> 
> 时间：2012-04-18T14:32:05.333
> 
> 标签：json, limit, stringify

我有一个小问题，我的 javascript 对象太长，但没关系。目前我使用 .stringify() 函数将我的对象转换为 json 字符串，该字符串被“...”截断，长度为 1023。

为什么 ？以及如何改变这个限制？

对不起我的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:47:58.590

JSON 解析器的 RFC（参见[http://www.ietf.org/rfc/rfc4627.txt](http://www.ietf.org/rfc/rfc4627.txt)第 4 节）说，每个实现都可以选择限制字符串的长度和内容。因此，根据您目前使用的浏览器/版本，您可能会达到限制。

一种可移植的替代方法是查看 json2。JS 源代码可在[https://github.com/douglascrockford/JSON-js/blob/master/json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)找到——你可以按原样使用它，或者改变它来处理数据的长度/类型导致你的问题。

# php - jquery ajax发布重定向问题

> ID：10211628
> 
> 赞同：0
> 
> 时间：2012-04-18T14:32:25.647
> 
> 标签：php, jquery, redirect

包含表单的 div，包含在 post div 中

```
<div class="add-comment">
    <form action="post.php?post=<?php echo $post->id; ?>" class="commentform" method="post">
        <textarea name="content" class="comment_content"></textarea>
        <input type="submit" class="submit" name="submit_comment" value="Add Comment" />
    </form>
</div> 
```

这是处理帖子的代码

```
if(isset($_POST['submit_comment'])){
    if(isset($_GET['post'])){
        $content = strip_tags(trim($_POST['content']));
        $comment = Comment::make($_GET['post'],$content,$_SESSION['user_id'],1);
        if($comment && $comment->save()){
            echo "Post submitted succesfully.";         
        }else{
            $message = Comment::$comment_message;
        }       
    }
} 
```

没有 JS 的代码按预期工作。我想要做的是提交评论而不刷新页面。这是我尝试过的 JS 代码，但似乎失败了。

```
$(document).ready(function(){
    $('.commentform').submit(function(event){
        event.preventDefault(); 
        var form = $(this);
        var posturl = form.attr('action');
        var comment = form.find('textarea[name="content"]').val();
        //var comment = $(this).closest($('.comment_content'));
        $.post(posturl, comment, function(data){
            console.log(data);
        });
    });
}); 
```

出了什么问题？按下提交按钮后，页面仍然存在，但没有提交评论。（我可以通过重新加载页面来判断）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:36:18.747

问题是您没有发布键值对，而只是发布值：

```
var comment = form.find('textarea[name="content"]').val(); 
```

应该是这样的：

```
var comment = {'content': form.find('textarea[name="content"]').val()}; 
```

除此之外，您需要发布所有值，因为如果您不这样做，您的 php 将失败，因此您最好使用以下内容：

```
var comment = form.serialize(); 
```

**编辑：**由于您仍然有问题，您需要`console.log`在发布之前使用所有 javascript 变量；如果 js 在另一个文件夹中，则操作 / url 可能是错误的。

# android - 将 Android DialogFragment 显示为纵向模式下的对话框和横向模式下的活动的一部分

> ID：10211632
> 
> 赞同：6
> 
> 时间：2012-04-18T14:32:34.217
> 
> 标签：android, fragment

是否有可能实现某种“自我管理”的 DialogFragment，它在纵向模式下显示其自身，如 Dialog 和横向模式下的部分活动。如果你给我一些代码，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-26T21:21:37.827

像这样的东西：

```
Activity activity = getActivity();
int orientation = activity.getResources().getConfiguration().orientation;

if (orientation == Configuration.ORIENTATION_LANDSCAPE)
{
    // Start DialogFragment as dialog
    MyFragmentDialog frag = new MyFragmentDialog();
    frag.show(getFragmentManager(), "dialog");
}
else
{
    // Start activity that embeds DialogFragment
    Intent intent = new SimpleFragmentActivity.IntentBuilder(activity, MyFragmentDialog.class)
            .create();
    activity.startActivity(intent);
} 
```

`SimpleFragmentActivity`是我编写的一个包装器活动，为了方便起见，它只是将片段对话框嵌入到活动中，但基本上你只需要一个在其中嵌入 MyFragmentDialog 的活动。这是包装活动的来源：[https ://github.com/jt-gilkeson/fragment-utils](https://github.com/jt-gilkeson/fragment-utils)

# sql-server - SQL CASE 语句选择要更新的表

> ID：10211633
> 
> 赞同：1
> 
> 时间：2012-04-18T14:32:34.353
> 
> 标签：sql-server, tsql

我想使用 CASE 语句来决定要更新哪个表...

IE

```
IF (@existingStep = 1)
 BEGIN  
   UPDATE 
    CASE @tableToUpdate
      WHEN 'TemplateActionSettings' THEN TemplateActionSetting SET blah blah blah

    WHEN 'ETC' THEN --DO THIS ONE

 END 
```

CASE可以这样使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:45:03.463

您可以使用 IF 来获得类似的东西

```
IF @TableToUpdate = 'Table1'
BEGIN
UPDATE U SET Col = 'Val' FROM Table1 AS U WHERE something = something
END
ELSE IF @TableToUpdate = 'Table2'
BEGIN
UPDATE U SET Col1 = 'Val' FROM Table2 AS U WHERE something = something
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:34:39.250

不，很遗憾 CASE 不能这样使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T14:35:56.643

不，您不能在直接的 SQL 语句中使用这种情况。您将不得不使用程序语言来完成此操作。我假设您使用的是 RDMS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T14:35:45.363

除非您使用动态查询（例如：字符串 concat，然后以 SQL 服务器样式执行），否则您无法在 SQL 中执行此操作。每个 DML 语句必须标识它正在操作的对象（即表）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T14:35:48.957

您不能像这样对多个表执行更新语句；除非您可以创建一个跨越所有表的视图并且仍然可以使用更新。如果您可以创建该视图，您将对案例使用更新，如果数据未更改，则将数据设置回原始值。如果没有，您将需要使用 [动态 sql](https://stackoverflow.com/questions/3585647/what-is-dynamic-stored-procedure-what-is-their-relation-with-dynamic-functions)

# asp.net - 页面 Y.ascx 不能使用用户控件 X.ascx

> ID：10211635
> 
> 赞同：2
> 
> 时间：2012-04-18T14:32:38.237
> 
> 标签：asp.net, asp.net-webcontrol

我最近在我的 Web 应用程序中遇到了以下错误。

> 页面“ControlName.ascx”不能使用用户控件“OtherControl.ascx”，因为它在 web.config 中注册并与页面位于同一目录中。

虽然我能够通过移动控件并将其注册到页面中来修复错误，但我很好奇为什么会引发错误。

这显然是按照[此处](http://msdn.microsoft.com/en-us/library/system.web.configuration.tagprefixinfo.aspx)所述的设计设计的（黄色块向下 3/4），但我的问题是为什么？通过在 中注册控件`Web.Config`并将其放置在同一目录中，您可能会遇到什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:34:00.047

也许这是一个动态编译的问题。默认情况下，web.config 中“编译”元素的“批处理”属性为 true。像这样的东西：

```
<compilation defaultLanguage="c#" debug="false" batch="true" targetFramework="4.0" /> 
```

使用 batch="true"，每当必须在目录中编译控件时，服务器都会编译其目录中的所有控件（一切？）。

我会说 web.config 声明的控件的编译方式与其他控件的编译方式不同（在另一个 dll 中，另一个目录？）因此，将 web.config 声明的控件和其他控件混合在同一目录中，一些引用其他控件会导致重复编译和 dll 冲突。

# javascript - 仅从表单中提取一些属性

> ID：10211637
> 
> 赞同：0
> 
> 时间：2012-04-18T14:32:46.313
> 
> 标签：javascript, html

是否可以仅在提交时从表单中获取某些属性？

```
<html><body>
<FORM name="foo" id="foo" onSubmit="dosubmit();return false;">
    <INPUT type="text" name="s" id="s"><BR/>
    <INPUT type="text" name="s2" id="s2"><BR/>

    <select name="si" id="si">
    <option>SomeOption_1</option>
    <option>SomeOption_2</option>
    <option>SomeOption_3</option>
    </select><BR/>
<input type="submit" value="submit" id="postDataSubmit">
</FORM>

<script>
function dosubmit() 
{
    //Extract value of S2 and the chosen option (si) from the form here, and nothing else. Show them in an alert.
}
</script>

</body></html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:50:05.327

使用纯javascript（恕我直言，这个简单的任务不需要使用JQuery）你可以简单地写：

```
alert(document.forms.foo.s2.value);
alert(document.forms.foo.si.value); 
```

因为您为每个输入使用了名称，所以您可以通过 document.forms 访问表单上的所有元素；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:34:49.777

```
function dosubmit()
{
    alert(document.getElementById('s2').value);
    alert(document.getElementById('si').options[document.getElementById('si').selectedIndex].value);
} 
```

顺便说一句，如果这就是您想要做的全部，那么您不需要表格。您可以使用任何常规按钮执行此操作：

```
<button onclick="dosubmit()">Show values</button> 
```

# noir - 在 noir.response 的标题中传递“文件名”

> ID：10211639
> 
> 赞同：1
> 
> 时间：2012-04-18T14:32:48.053
> 
> 标签：noir

谁能指导我如何在“noir.response”的标题中传递“文件名”？

*   希瓦尼

# javascript - 在 asp.net 网站中动态添加 Facebook 喜欢按钮时单击它会消失？

> ID：10211648
> 
> 赞同：2
> 
> 时间：2012-04-18T14:33:06.283
> 
> 标签：javascript, asp.net, facebook, facebook-like, facebook-javascript-sdk

我正在使用 asp.net 创建一个网站，该网站在同一页面上包含许多链接。这些链接是使用 asp:panel 从代码隐藏动态添加的。我需要每个可以喜欢该特定链接的链接下方的 facebook like 按钮。在我的 aspx 文件中：

```
<body>
<div id="fb-root"></div>
 <script type="text/javascript">
  (function (d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "http://connect.facebook.net/en_US/all.js#xfbml=1&appId=182176538561221";
      fjs.parentNode.insertBefore(js, fjs);
  } (document, 'script', 'facebook-jssdk')); 
```

```
<form id="form1" runat="server">
<asp:Panel ID="Panel_news1" runat="server"></asp:Panel>
</form> 
```

在我的 aspx.cs 文件中，我有：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string linkURL = "http://news.google.com/news/url?sa=t&fd=R&usg=AFQjCNHZtva7n5Hd-1W7tGYSwoHLnvc7AA&url=http://zeenews.india.com/news/delhi/bjp-wins-north-delhi-mcd-elections_770339.html";
        Panel_news1.Controls.Add(new LiteralControl("<div><a href=\"http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNHZtva7n5Hd-1W7tGYSwoHLnvc7AA&amp;url=http://zeenews.india.com/news/delhi/bjp-wins-north-delhi-mcd-elections_770339.html\"><fb:like href=\""+linkURL+"\" send=\"false\" layout=\"button_count\" width=\"50\" show_faces=\"false\" colorscheme=\"dark\" font=\"trebuchet ms\"></fb:like>"));
    } 
```

问题是当我将like按钮静态地放在aspx文件中时，它可以正常工作，但是当我尝试动态获取它甚至动态链接url时，点击时like按钮会消失。它仍然在那里，但看不到。如果在同一位置再次单击，则会出现确认弹出窗口，如果确认，按钮会返回。这对我来说很奇怪，因为我无法解决问题。我尝试使用 IFRAME、HTML5 和 XFBML ，但是在动态添加按钮甚至链接时结果是一样的。请帮助...

# ios - 如何播放声音文件“OnTouch”

> ID：10211649
> 
> 赞同：0
> 
> 时间：2012-04-18T14:33:13.420
> 
> 标签：ios, audio

我需要在触摸屏幕时播放文件。

我尝试了以下方法，但没有奏效：

```
-(IBAction)play;
{
    CFBundleRef mainBundle = CFBundleGetMainBundle();

    CFURLRef soundFileURLRef;

    soundFileURLRef =CFBundleCopyResourceURL(mainBundle, 
    (CFStringRef) @"sound1", CFSTR ("wav"), NULL);

    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:02:37.817

您是否在窗口或主视图上添加了触摸处理程序？

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    [yourObject play];
} 
```

# extjs - 如何将对象从 Ext.Toolbar 拖到 Ext.Panel？

> ID：10211650
> 
> 赞同：1
> 
> 时间：2012-04-18T14:33:15.287
> 
> 标签：extjs, sencha-touch-2

我是 Sencha 产品和 Sencha Touch 2 的新手。

我在页面左侧停靠了一个工具栏，旁边有一个工作区。我想将一个元素从工具栏拖到工作区。如何使用 Sencha Touch 2 实现该行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:49:30.923

您的问题涉及 2 个问题：

*   拖放功能。目前 Sencha Touch 2.0.0 只支持`draggable`config，没有类似的 config`droppable`
*   跨组件拖放。这比第一个问题还要复杂。

`Ext.util.Draggable`就我尝试做的而言，解决方法仍然会造成混乱。

所以答案就是等待 Sencha Touch 2.0.1 正式发布，希望这些功能能够得到支持。

# slidetoggle - 一页上有多个jQuery切换功能？

> ID：10211652
> 
> 赞同：1
> 
> 时间：2012-04-18T14:33:16.410
> 
> 标签：slidetoggle, jquery

我想在一页上添加三个切换功能（都具有相同的类）。

我的 JavaScript 代码：

```
<script type="text/javascript">
    $(document).ready( function() {
        $('.toggle_container').hide();
        $('.trigger').click( function() {
            var trig = $(this);
            if ( trig.hasClass('trigger_active') ) {
                trig.next('.toggle_container').slideToggle('slow');
                trig.removeClass('trigger_active');
            } 
            else {
                $('.trigger_active').next('.toggle_container').slideToggle('slow');
                $('.trigger_active').removeClass('trigger_active');
                trig.next('.toggle_container').slideToggle('slow');
                trig.addClass('trigger_active');
            };
            return false;
        });
    });
</script> 
```

这是我的 HTML 代码：

```
<div id="tourteaser">
<div id="tourteaser_teaser" class="erster">
    <span class="zahlen">1</span>
    <h3>headline</h3>
    <p>Erstelle deine persönliche Visitenkarte und zeige deine Kunst!</p>
    <a class="trigger" href="" onfocus="this.blur();"></a>
    <div class="toggle_container">
        <div class="trenner"></div>
        <div class="tourinfos"></div>
    </div>
</div>

<div id="tourteaser_teaser" class="mitte">
    <span class="zahlen">2</span>
    <h3>headline</h3>
    <p>Erstelle deine persönliche Visitenkarte und zeige deine Kunst!</p>
    <a class="trigger" href="" onfocus="this.blur();"></a>
    <div class="toggle_container">
        <div class="trenner"></div>
        <div class="tourinfos"></div>
    </div>
</div>

<div id="tourteaser_teaser" class="letzter">    
    <span class="zahlen">3</span>
    <h3>headline</h3>
    <p>Erstelle deine persönliche Visitenkarte und zeige deine Kunst!</p>
    <a class="trigger" href="" onfocus="this.blur();"></a>
    <div class="toggle_container">
        <div class="trenner"></div>
        <div class="tourinfos"></div>
    </div>
</div>

</div> 
```

到目前为止：只有一个（第一个）切换对此功能做出反应。如何让这三个都独立工作？如果在单击另一个切换时关闭一个切换也很好。这容易吗？

编辑：我上传了我的网站示例，因为我无法使用 SpYk3HH 的示例。见：[http ://www.brayaz.de/example/example.html](http://www.brayaz.de/example/example.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:47:25.477

您的设计存在缺陷，但我使用以下方法解决了它；

***JS***

```
$(function(){
    $('.toggle_container').hide();
    $('.trigger').on("click", function(e) {
        $(this).toggleClass("trigger_active").next('.toggle_container').slideToggle('slow');
    });
});​ 
```

***HTML 的变化***

```
 <a class="trigger" href="" onfocus="this.blur();"></a> 
```

*到*

```
<a class="trigger" href="javascript:void(0);" onfocus="this.blur();"></a> 
```

看

## [在这里工作 JSFIDDLE！](http://jsfiddle.net/SpYk3/bZaqd/)

> **更新**

发现一个主要问题，首先，给多个元素提供相同的 ID 绝不是一个好主意，考虑更改为x 是该元素的索引号之`<div id="tourteaser_teaser"`类的东西。`<div id="tourteaser_teaser-x"`其次，我看到你这样做是出于 CSS 的目的，在这种情况下，你想给它们都赋予相同的 CLASS 名称，而不是相同的 ID。您可以拥有多个类名，但只有一个 ID。

我想我解决了你所有的问题，这就是我所做的：

*   如前所述，我将您的 HTML 更改`<a href=""`为`<a href="javascript:void(0);"`.
    *   这消除了`return false`点击命令的需要
*   将 ID 更改`tourteaser_teaser`为`tourteaser_teaser-1`, `tourteaser_teaser-2`, &`tourteaser_teaser`
*   将类添加`tourteaser_teaser`到之前具有该 ID 的每个 div
*   调整 CSS 以适应新的变化
*   还注意到 .trigger 设置为`position: absolute;`，因为父级是静态的，所以你的所有链接都是重叠的
    *   为了解决这个问题，我简单地将父级设置为`position: relative;`
*   将您的 JS 简化为您在我之前的示例中看到的内容

请查看[**新的更新 JSFIDDLE**](http://jsfiddle.net/SpYk3/bZaqd/)并告诉我这是否是您要查找的内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:40:37.967

像这样的东西会起作用吗？

```
$(document).ready( function() {
    $('.toggle_container').hide();
    $('.trigger').click( function() {
        $('.toggle_container').slideUp('slow');
        $(this).next().slideToggle('slow');
        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:44:22.667

看起来你的错误在这里：

```
} else {
$('.trigger_active').next('.toggle_container').slideToggle('slow');
$('.trigger_active').removeClass('trigger_active'); 
```

您正在对所有 .trigger_active 元素进行操作，而不仅仅是链接后面的元素。

# fluent-nhibernate - 多对多关系中表的流畅 NHibernate 映射

> ID：10211659
> 
> 赞同：1
> 
> 时间：2012-04-18T14:34:10.230
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试为如下所示的数据库设置 Fluent NHibernate 映射：

```
 Campaign Table
 Id
 Name

Category Table
Id  
Campaign_id
Name

Customer Table
Id
Name
Phone
...

SalesMan Table
Id
Name
Phone
...

CustomerSalesManCategory Table
Id
Customer_id
SalesMan_id
Category_id 
```

CustomerSalesManCategory 表的列分别具有 Customer、SalesMan、Category 的主键作为外键。

活动与类别具有一对多关系

客户与类别具有多对多关系

Customer 与 SalesMan 具有多对多关系，但也与 Category 相关

即：为客户分配了特定类别的销售人员，因此 CustomerSalesManCategory 表中的正确条目应完美反映（所有 3 个 id 已填充）

使用我目前拥有的映射，将条目插入到 CustomerSalesManCategory 中，SalesMan_id 或 Category_id 为 NULLS，这对于我提供的映射是正确的。

但是，我无法弄清楚让 FluentNhibernate 正确完成工作的映射。在客户的 SaveOrUpdate 上的 CustomerSalesManCategory 表中的单个条目。

非常感谢任何帮助。这是我当前的映射：

```
 public class CampaignMap : ClassMap<Campaign>
{
    public CampaignMap()
    {
        Id(x => x.Id);
        Map(x => x.Name);
        Map(x => x.CreationDate);
        HasMany(x => x.CampaignsCategories).Inverse().Cascade.AllDeleteOrphan();
    }
}

  public class CategoryMap : ClassMap<Category>
{
    public CategoryMap()
    {
       Id(x => x.Id);
       Map(x => x.Extension);
       References(x => x.Campaign);
       HasManyToMany(x =>         x.CustomersAssginedInCategory).Inverse().Table("CustomerSalesManCategory");           
    } 
}

public class CustomerMap : ClassMap<Customer>
{
    public CustomerMap()
    {
        Id(x => x.Id);
        Map(x => x.CallingName);
        Map(x => x.OfficialName);
        Map(x => x.Year);
        Map(x => x.Description);
        HasManyToMany(x => x.CustomerCategories).Table("CustomerSalesManCategory");
        HasManyToMany(x => x.CustomerSalesMen).Table("CustomerSalesManCategory");
    }
}

 public class SalesManMap : ClassMap<SalesMan>
{
    public SalesManMap()
    {
        Id(x => x.Id);
       Map(x => x.Name);
       Map(x => x.Email);
       Map(x => x.Phone);
       Map(x => x.Description);
       HasManyToMany(x => x.CustomersAssignedTo).Inverse().Table("CustomerSalesManCategory");           
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:14:19.920

三向关联通常是字典

```
// in Customer

public IDictionary<SalesMan, Category> asd { get; private set; }

// in CustomerMap
HasManyToMany(x => x.CustomerSalesMen)
    .Table("CustomerSalesManCategory")
    .AsEntityMap("SalesManId"); 
```

# php - MYSQL 添加匹配日期的行

> ID：10211660
> 
> 赞同：0
> 
> 时间：2012-04-18T14:34:14.910
> 
> 标签：php, mysql

我在 mysql 数据库中有 Open、High、Low、Close 的股票数据。我有多只股票，在某些情况下，我想创建自定义股票组，在其中添加组的开盘价，添加高点，添加低点并添加收盘价以获得集体 OHLC。

我读过用 SQL 做数学比 PHP 更快、更有效。这是一个简单地在 PHP 中执行的实例吗？

编辑：对不起，我原来的问题不清楚。所以我正在寻找关于你将如何做的查询。我已经搜索过，但找不到添加结果的方法。

我正在使用的查询是来自数据库的简单拉 1 行情：

```
SELECT dates, ticker, open, high, low, close
FROM stocks
WHERE dates <= 2012-04-15
ORDER BY dates ASC 
```

这是结果的一个例子

```
Date        Ticker    Open     High    Low     Close
04/15/12    BAC       9.25     9.38    9.04    9.10
04/15/12    F         11.98    11.99   11.45   11.30
04/16/12    BAC       9.10     9.25    9.03    8.78
04/16/12    F         11.30    11.75   11.03   11.60 
```

我需要一个查询，它将以下结果添加到单个结果中，如下所示：

```
Date        Ticker    Open     High    Low     Close
04/15/12    MYTICK    21.23    21.37   20.49   20.4
04/16/12    MYTICK    20.4     21      20.06   20.38 
```

我希望这更清楚我想要做什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:18:40.077

```
SELECT
    dates,
    SUM(open) AS open,
    SUM(high) AS high,
    SUM(low) AS low,
    SUM(close) AS close
FROM stocks
GROUP BY dates
ORDER BY dates ASC 
```

我不确定您对“Ticker”列的要求是什么。您可以添加一个`WHERE`子句以将其限制在特定日期或日期范围内。

# debugging - 是否可以在 Haskell 中将类型强制为类？

> ID：10211664
> 
> 赞同：14
> 
> 时间：2012-04-18T14:34:28.017
> 
> 标签：debugging, haskell

例如，假设我希望实现一个汇总`Num`s 列表的函数。在编写代码的中途，我希望使用以下命令对其进行调试`Debug.Trace`：

```
module T where
import Debug.Trace

dosum :: (Num a) => [a] -> a
dosum xs = dosum' 0 xs
    where
        dosum' n [] = n
        dosum' n (x:xs) = trace (show n) $ dosum' (n+x) xs 
```

问题是这不会编译：

```
Could not deduce (Show a) arising from a use of dosum'
from the context (Num a) 
```

`(Show a)`当我完成调试时，我可以添加`dosum`然后删除它（在现实生活中，我希望有一个不一定是 in 的类型`Show`，但我会使用整数进行调试）。如果涉及到一些函数并且我不断添加删除`Show a`语句，这可能会变得很麻烦。

我想要一个功能`unsafeShow`

```
unsafeShow :: a -> String 
```

如果是，则有效，如果`a`不是`Show a`，则可以自由崩溃。这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T14:40:43.270

不，这是不可能的。它会违反[参数化](https://stackoverflow.com/questions/8524801/determining-function-behavior-from-the-type-of-the-function)；不允许多态函数根据调用它的特定类型表现出不同的行为。它还会打破开放世界的假设，因为`Show`为类型添加实例会改变程序的行为。

它可能是一个有用的调试辅助工具，因为某些东西被明确标记为不安全，但 GHC 不支持这样的功能，而且我认为它当前的实现不允许轻松添加一个功能。

如果您有许多具有相同类型类上下文的函数，并且有一个概念语义分组，那么一个可能的替代方案是拥有一个类似的类

```
class (Num a) => Number a
instance (Num a) => Number a 
```

您可以使用它而不是在签名中，在调试时`Num`将声明更改为。`(Num a, Show a)`（不过，最好选择一个比 更有意义的名称`Number`！）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-18T15:28:05.933

真正可怕的答案是`unsafeCoerce`从`Unsafe.Coerce`模块中使用。听起来确实如此——它是绕过类型系统的通用工具，如果你弄错了，你不会得到类型错误或异常，你会得到分段错误。

在这种情况下，您可以`unsafeCoerce`使用一个您已经知道是`Integer`to的值，`Integer`以便类型系统也可以识别它是一个整数。然后你可以像往常一样显示它（确保给出明确的类型签名，这样就`show`知道它显示的是什么——它无法推断，因为`unsafeCoerce`可以返回任何类型！）

但是，如果你不小心调用了代码而`unsafeCoerce`不是`Integer`，崩溃，内存损坏，任何事情都可能发生——你只是完全丢掉了你的安全网。

一般来说，唯一“安全”的使用是在*您*`unsafeCoerce`已经知道的类型之间是相等的，但类型检查器却不是（或其他一些专门的用例，请参阅[文档](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Unsafe-Coerce.html)）。即便如此，任何阅读您的代码的人都会对此深表不满，除非您的评论解释了为什么它是唯一的选择。

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T14:44:16.137

这是不可能的。（注[1](http://hackage.haskell.org/packages/archive/vacuum/1.0.0.2/doc/html/GHC-Vacuum.html#v%3avacuum)）

* * *

[1](http://hackage.haskell.org/packages/archive/vacuum/1.0.0.2/doc/html/GHC-Vacuum.html#v%3avacuum) : 一个例外是您可以通过`a -> String`函数转储 GHC 堆的堆结构。[例如，您始终可以通过Vacuum](http://hackage.haskell.org/packages/archive/vacuum/1.0.0.2/doc/html/GHC-Vacuum.html#v%3avacuum)将值转换为十六进制指针值。这不太可能是您想要的。此功能与 GHCi 调试器用于显示任意堆值的功能相同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-18T14:45:40.660

`unsafeShow`在纯 Haskell中实现您的功能是不可能的。GHC 可以提供一个，但目前还没有。

不过，您可以查看 GHCi 调试器。这允许您打印出没有`Show`实例的东西。（此外，它使您可以避免评估本来不会被评估的东西，这可能很有用。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T16:16:33.073

通常我会注释掉类型签名，但是如果一个函数在树的深处就会变得烦人。您可以尝试使用重写规则将多态函数替换为修改后的变体。

```
-- original function, should add NOINLINE to make sure your rule gets a chance to fire.
{-# NOINLINE dosum #-}
dosum :: (Num a) => [a] -> a

-- a version with added debugging
dosumShow :: (Num a, Show a) => [a] -> a

{-# RULES "sub/dosum" forall x. dosum x = dosumShow x #-} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T14:49:56.333

它是 GHC 版本 7.4.1？从它[发布说明](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/release-7-4-1.html)：

> Num 类不再具有 Eq 或 Show 超类。因此，许多其他类和函数获得了明确的 Eq 或 Show 约束，而不是依靠 Num 约束来提供它们。
> 
> 您可以通过以下方式编写适用于 Haskell98/Haskell2010 和 GHC 的代码：
> 
> *   每当你创建一个类型的 Num 实例时，也要创建 Show 和 Eq 实例，并且
>     
>     
> *   每当你给一个函数、实例或类一个 Num t 约束时，也要给它 Show t 和 Eq t 约束。

您的代码在以前版本的 GHC 中运行良好（我在 7.0.4 中尝试）。*

# java - Apache Camel：需要有关路由的建议

> ID：10211665
> 
> 赞同：1
> 
> 时间：2012-04-18T14:34:35.650
> 
> 标签：java, rest, cxf, apache-camel

我在 CXF 框架上构建了一个宁静的 Web 服务。要求是，当有人访问此服务器时，我必须根据收到的参数从内容提供商（如 google、bing 等）获取一些数据，并且必须将这些数据返回给客户端。现在调用服务提供者并获得其结果将使用 Camel 框架完成。我已经确定使用简单的路由 from("direct:start").to("http://google.com).bean(ffoo|bar) 可以让我与服务提供商交谈并对结果做任何我想做的事情.但问题是应该用什么代替“direct：start”，以便这条路线从我的服务方法开始，该方法被客户端击中。我读了一些关于POJO生产的信息，但我不明白它是如何工作的以及它是否会解决我的问题。

另外我有一个查询..在这种语法中.. from().to() ... to 是消费者，而 from 是生产者，反之亦然？因为在我的日志中它说路线正在消耗直接：开始......更喜欢弹簧配置类型的答案

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:09:07.723

是的，Camel 可以公开 REST 服务并将这些请求路由到下游。

您可以使用几个选项。听起来第一个选项是最不痛苦的：

*   [CXFRS 组件](http://camel.apache.org/cxfrs.html)
*   [重置组件](http://camel.apache.org/restlet.html)
*   [码头组件](http://camel.apache.org/jetty.html)

**编辑**- 回复评论

上述所有组件都可以在服务器端使用，以将服务器公开为基于 REST 的 Web 服务。在骆驼语中，这意味着您将组件用作*消费者*，因为它使用来自外部的消息。

有关生产者与消费者的更多信息，我无法比[作者本人](https://stackoverflow.com/questions/2119128/apache-camel-producers-and-consumers)更好地解释它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:50:41.503

最初我为我的 web 服务实现了 cxfrs 组件（受到 Roy Truelove 的回答的启发），但这会导致其他[并发症](https://stackoverflow.com/questions/10282286/apache-camel-control-over-route-startup)。所以现在使用 direct:start 组件来启动路由.. 我的配置如下所示：

```
<camel:route>
<camel:from uri="direct:start" />
<camel:process ref="customInProcessor" />
<camel:to uri="http://localhost:8080/DummyGoogleProject/search" />
<camel:to uri="bean:googleResponseHandler" />
</camel:route>
</camel:camelContext> 
```

[customInProcessor](http://camel.apache.org/pojo-producing.html)做了一些处理，比如修改CamelHttpUri 、 Path 、 Query 等（没有这个[在路由执行中](https://stackoverflow.com/questions/10246736/typeconversion-exception-apache-camel-and-cxf/10281691#10281691)会出现一些问题）

# delphi - TDBLookupCombobox FireMonkey

> ID：10211668
> 
> 赞同：2
> 
> 时间：2012-04-18T14:34:51.697
> 
> 标签：delphi, delphi-xe2, firemonkey, livebindings

## TDBLookupCombobox

谁能帮我在 FireMonkey 中重现**TDBLookupCombobox**功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T09:16:54.390

我不知道是否有更好的解决方案，但这就是我所做的：

假设您有 Table1 和 Table2 的外键。

*   使用外键在表 1 中创建一个查找字段。
*   使用 TBindList 用`Text`Table2 中的查找字段填充 Combobox 的属性，并用 Table2`Tag`的主键填充属性。
*   使用 TBindPosition 将所选文本与查找字段和`Selected.Tag`Table1 中的外键进行匹配。

编辑：

检查 TBindList 和 TBindPosition 的 SourceComponent 属性。

TBindList 应该指向 Table2 的 BindScopeDB。

而是将 TBindPosition 指向 Table1 的 BindScopeDB。

ControlComponent 应该指向你的 TComboBox 。

当您使用 TBindList 时，`Format`集合表达式引用 ComboBox 内的单个项目，因为它循环为 Table2 中的每一行填充控件。所以 ControlExpressions 是每个项目的属性：

`Text`, `Tag`

注意：你不需要`Selected`

和这些 SourceExpressions：

`FieldByName(LookedUpField).AsString`, `FieldByName(PK).AsInteger`

将这些表达式放入`Format`集合中。

相反，TBindPosition 始终指代整个 ComboBox，因此您需要使用`Selected`. 控制表达式：

`Selected.Tag` `SelectedText(Self)`,

源表达式：

`FieldByName(FK).AsInteger`, `FieldByName(LookupField).AsString`

请记住，`PosSource`集合用于设置“ControlExpressions TO SourceExpressions”分配，同时`PosControl`包含“SourceExpressions TO ControlExpressions”分配。

基本上你需要两件事：当 Table1 光标改变时改变你选择的项目，并在用户改变它时使用所选项目的 Tag 属性设置你的 FK。

因此，只需将这些放在您的 PosControl 集合中：

`SelectedText(Self)`控制表达式

`FieldByName(LookupField).AsString`源表达式

这些在您的 PosSource 集合中：

`Selected.Tag`控制表达式

`FieldByName(FK).AsInteger`源表达式

如果要使 TDBLookupComboBox 具有类似的行为，则必须在更改选定的组合框项时将表置于编辑状态。

当我几个月前尝试 Firemonkey 时，我需要更多表达式来更新 StringGrid 中显示的相同字段，但我不知道是否有更好的解决方案。希望其他人可以回答并分享他的经验。

有关更多信息，请查找 XE2 中包含的示例。

希望这会有所帮助。

# sql - 检索当前 SQL Server 版本

> ID：10211669
> 
> 赞同：4
> 
> 时间：2012-04-18T14:34:57.880
> 
> 标签：sql

如何仅获取 SQL Server 发行版？

```
select @@version 
```

检索完整信息，在我的情况下：

> *Microsoft SQL Server 2008 R2 (RTM) - 10.50.1617.0 (X64) Apr 22 2011 19:23:43 版权所有 (c) Microsoft Corporation Developer Edition (64-bit) o​​n Windows NT 6.1 (Build 7601: Service Pack 1)*

我只需要`Microsoft SQL Server 2008 R2`.

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:43:56.343

怎么样：

```
SELECT 
    SERVERPROPERTY('Edition'),
    SERVERPROPERTY('ProductVersion') 
```

我得到这个输出：

```
Developer Edition (64-bit)  10.50.2500.0 
```

基于`ProductVersion`，您可以对人类可读的 SQL Server 版本名称进行“翻译”...

```
11.xx   --> SQL Server 2012
10.50\.  --> SQL Server 2008 R2
10.00\.  --> SQL Server 2008
09.xx   --> SQL Server 2005 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:44:03.960

尝试使用[SERVERPROPERTY](http://msdn.microsoft.com/en-us/library/ms174396.aspx)

例如

```
select SERVERPROPERTY('ProductVersion') 
```

为 SQL Server 2008 R2 返回 10.50.2500.0。

您可以使用 SERVERPROPERTY 检索许多其他值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:39:17.607

```
SELECT SUBSTRING(@@VERSION,0,CHARINDEX('-',@@VERSION,0)) 
```

给（对我来说）

```
`Microsoft SQL Server 2012` 
```

# c# - 如何将一个类的代码拆分为几个文件？

> ID：10211674
> 
> 赞同：0
> 
> 时间：2012-04-18T14:35:08.343
> 
> 标签：c#, file

我正在使用 Visual Studio 2010。

我想将一个类分成几个 .cs 文件。可能吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
             InitializeComponent();
        }

        int i = 5;
        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

我想将方法​​添加`public void laugh()`到`public partial class Form1`中，但在不同的文件中。怎么做？我不想在 Form1.cs 中使用该方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:42:15.637

为您的项目添加一个具有适当名称的新类（您不能使用`Form1.cs`，因为它已经存在），例如`Form1.Code.cs`. 然后这个工作：

```
using System.Windows.Forms;
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public void laugh()
        {
            MessageBox.Show("Haha");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:37:29.690

您*可以*将“Form1.Something.cs”文件添加到您的项目中，以使其接近“Form1.cs”。

使用相同的命名空间和类名并添加您喜欢的任何代码：

```
namespace WindowsFormsApplication1
{
    public partial class Form1 // no need to inherit
    {
        public void Laugh() { ... }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T14:38:18.047

在`Form1.part2.cs`（或您要为文件命名的任何名称）中：

```
namespace WindowsFormsApplication1
{
    public partial class Form1 
    {
        public void laugh()
        {
        }
    }
} 
```

确保命名空间和类名相同（以及可访问性和`partial`修饰符）并添加您的代码。还要确保新文件是项目的一部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T14:39:12.303

[部分类型定义](http://msdn.microsoft.com/en-us/library/wbx7zzdd%28v=vs.100%29.aspx)MSDN 参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T14:39:37.310

向您的项目添加一个*新* `CS`文件并在其中写入如下内容：

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
       public void laugh()
       {
       }
    }
} 
```

*使用partial*维护*命名空间*名称和类名称。

 ** * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T14:40:40.557

你已经有了这个：Form1.cs 和 Form1.designer.cs（设计师生成的东西）如果你有另一个文件 Form1.test.cs 并将它包含在你的项目中，然后将它包装在一个部分类中：

```
namespace WindowsFormsApplication1
{
    partial class Form1 
    {
        public void laugh() 
        {
            //your stuff
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-18T14:38:26.790

看看设计器生成的代码。它使用相同的方法。
另请查看[文档](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-18T14:38:36.983

尝试使用第一个文件

```
namespace WindowsFormsApplication1
{
 public partial class Form1 : Form
 {
    public void laugh()
 }
} 
```

第二个文件

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {

     public classForm1()
     {
         InitializeComponent();
     }

     int i = 5;
     private void Form1_Load(object sender, EventArgs e)
     {

     }
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-18T14:39:05.273

`partial`关键字正是这样做的。

[部分（类型）（C# 参考）](http://msdn.microsoft.com/en-us/library/wbx7zzdd%28v=vs.100%29.aspx)

另一个文件看起来像这样：

```
public partial class Form1 : Form
{
    public void laugh()
    {

    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-18T14:38:18.803

您已经完成了一半 :) 只需在现有的 Form1.cs 旁边添加另一个文件到您的项目中 - 也许是 FormMethods.cs？：

```
public partial class Form1 
{
  public void laugh() 
  {
    ...
  }
} 
```*

# css - HTML 注释影响大小

> ID：10211675
> 
> 赞同：-1
> 
> 时间：2012-04-18T14:35:18.827
> 
> 标签：css, comments, html

更新：问题已解决。我已经用我的解决方案在下面回答了，但在分配的时间过去之前不能接受。

我有如下的 html 评论

```
<!-- comment
    comment
   comment
--> 
```

随着我网页中的评论，所有内容的格式都已关闭。没有它，格式很好。以前有没有人遇到过导致 CSS 或 HTML 问题的评论，或者这很可能是我的代码的另一部分导致了真正的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:39:54.213

我以前曾经注意到过这种行为，但后来我意识到不是评论导致格式问题，而是我在添加评论时创建的空格。换句话说，如果您想要一种保证注释不会影响格式的方式，您必须将它放在同一行上的另一个对象旁边，中间没有空格。

好的：

```
 <!--  This is a comment
        with multiple lines --><span>HTML code</span> 
```

坏的：

```
 <!--  This is a comment
        with multiple lines -->
  <span>HTML code</span> 
```

然后，您可能会认为它毕竟不会打扰您，因为阅读捆绑的 html 代码是程序员的地狱。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T14:43:02.023

注释在 html 标记之外，这可能会导致格式异常（在 IE7 中测试）。在 HTML 标记中包含注释是一种很好的做法。我现在将评论放在 head 标签中，它解决了这个问题。

# php - mysql_fetch_assoc() 的参数计数错误

> ID：10211679
> 
> 赞同：-3
> 
> 时间：2012-04-18T14:35:43.787
> 
> 标签：php, mysql

我试图从我的 Pages 表中检索 7 列，但是它出现了这个错误： mysql_fetch_assoc() 的参数计数错误

我一定是使用了错误的功能，哪一个是正确的？

这是代码：

```
<?php
$query="SELECT * FROM Pages";
$result=mysql_query($query);

$num=mysql_numrows($result);

mysql_close();
?>

<?php
$array = array();
$i = 0;
while ($i < $num) {
$f1 =  mysql_fetch_assoc($result,$i,"Page","URL","Description","Bounce_Rate",
                         "Avg_Time_On_Page","Page_Views","Click_Rate");
$array[] = $f1;
$i++;
}
echo json_encode($array);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:37:55.877

您运行[`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php)查询的结果：

```
$result = mysql_query( "SELECT foo, bar FROM fooTable" );
while ( $row = mysql_fetch_assoc( $result ) ) {
  echo $row['foo']; // $row['bar'] also available
} 
```

请注意文档中此函数的签名：

> 数组 mysql_fetch_assoc ( 资源 $result )

这意味着该函数返回一个`array`作为其结果。它只接受一个参数，必须是一个`resource`. A`resource`是从 中返回的[`mysql_query`](http://www.php.net/manual/en/function.mysql-query.php)。我们也可以通过检查该方法的签名来知道这一点：

> 资源 mysql_query ( 字符串 $query [, 资源 $link_identifier = NULL ] )

此方法返回一个`resource`（可以与 一起使用[`mysql_fetch_assoc`](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)），并接受至少一个参数（查询），以及链接标识符的可选第二个参数（即您与数据库的连接）。

如有疑问，请查看文档。也`mysql_numrows`应该是[`mysql_num_rows`](http://www.php.net/manual/en/function.mysql-num-rows.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:40:14.080

mysql_fetch_assoc() 只需要一个作为 mysl_query() 的结果的参数；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:41:27.247

乔纳森所说的。此外，行计数函数是 mysql_num_rows()，而不是 mysql_numrows()。

# android - 将 XML 数据解析成 Android ListFragment

> ID：10211683
> 
> 赞同：0
> 
> 时间：2012-04-18T14:35:49.160
> 
> 标签：android, xml, parsing, android-listfragment

我已成功将 XML 解析为 ListActivity。我已经成功地从一个数组中填充了一个 ListFragment。但是，我无法将这两个活动结合起来，因为没有在线教程。

*有人可以告诉我如何为 Android 3.0+ 填充 ListFragment 并使用 Android SAX 解析器从在线 XML 文件中填充数据吗？*

我更感兴趣的不是解析类，而是如何结合 ListFragment 显示它。为了简单起见，假设我使用 SimpleAdapter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:17:57.530

[http://www.ibm.com/developerworks/opensource/library/x-android/](http://www.ibm.com/developerworks/opensource/library/x-android/)涵盖了这个问题。这还不够清楚，它给你带来了太多不同的工作方式，但它确实完整地描述了一切，而且它有效。

# kohana - Kohana 3.2 ORM 的列基于 DB::expr()

> ID：10211695
> 
> 赞同：0
> 
> 时间：2012-04-18T14:36:32.600
> 
> 标签：kohana, kohana-3, kohana-orm

在我当前的应用程序中，我有一个剧本列表，它几乎普遍按查询中的剧本名称排序。目前，它是简单地使用`DB::select()`语句构建的，但是当我们进行大量重构时，我们想开始使用 Kohana 的 ORM 库。问题出在我们通常不按实际剧名排序，而是按经过处理的版本，去掉文章等并按此排序（因此摩尔门经出现在 Bs 旁边，而不是TS）。我不知道如何将其转移到 ORM 模型定义中。

选择代码如下所示（删节）：

```
DB::select(column, column,
        DB::expr("CASE WHEN SUBSTRING_INDEX(show_name, ' ', 1) IN ('a', 'an', 'the')
              THEN SUBSTRING(show_name, INSTR(show_name, ' ') + 1)
              ELSE show_name
              END AS show_name_sort") 
```

有没有办法创建一个假的 show_name_sort 列，Kohana 在保存时会忽略它，但我仍然可以在`order_by`通话中使用它？还是我只需要创建一个实际的列，其中包含名称的排序版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:12:41.983

有可能的。您需要设置`$_table_columns`数组以反映除“假”列之外的所有列。假设表有 3 列：

1.  ID
2.  姓名
3.  描述

在您的模型中，您应该覆盖`$_table_columns`，因此 ORM 不会依赖 SHOW FULL COLUMNS 查询：

```
class Model_Yourmodel extends ORM
{
    protected $_table_columns = array(
            'id' => '',
            'name' => '',
        ); 
```

示例查询可能如下所示：
`ORM::factory('yourmodel')->order_by('description')->find_all()`

这种方式也保存方法将忽略该`description`列，因为它没有列在`$_table_columns`数组中。

# asp.net - String.Format - 我的字符串有什么问题？

> ID：10211699
> 
> 赞同：2
> 
> 时间：2012-04-18T14:36:44.007
> 
> 标签：asp.net, .net

我用`String.Format`这种方式：

```
String.Format("$(function() { $('{0}').menu(); });", "blaId"); 
```

我得到一个例外：

```
An exception of type 'System.FormatException' occurred and was caught. 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T14:38:11.713

您应该像这样转义`{`字符：`{{`，除非它们是占位符的一部分，例如`{0}`.

```
String.Format("$(function() {{ $('{0}').menu(); }});", "blaId"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T14:37:55.173

您的花括号内的索引值无效。`String.Format`将其识别为格式化的占位符。

```
{ $('{0}').menu(); } 
```

要解决此问题，请使用双花括号转义：

```
String.Format("$(function() {{ $('{0}').menu(); }});", "blaId"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:38:44.303

逃脱`{`和`}`

```
 String.Format("$(function() {{ $('{0}').menu(); }});", "blaId"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T14:41:44.677

其他花括号令人困惑`String.Format`。

一种解决方案是编写：

```
String.Format("$(function() {1} $('{0}').menu(); {2});", "blaId", "{", "}"); 
```

但最好避开文字，如下所示：

```
String.Format("$(function() {{ $('{0}').menu(); }});", "blaId"); 
```

# asp.net - 将值传递给Sql中的空值列

> ID：10211705
> 
> 赞同：3
> 
> 时间：2012-04-18T14:37:04.007
> 
> 标签：asp.net, sql, entity-framework

我有一个 Sections 表，在该表中我有列 SectionId,CourseId,Name,Capacity....这里 CourseId 是一个空值列，它的 Foreignkey 在这里关注 Cousrse 表....这个 CourseId 列是新添加的一个。

我正在尝试向该表添加记录，正在使用实体框架，在整个框架中它显示除此 CourseId 之外的所有列名，并且当我将数据发送到此 Sections 表时，除 Course Id 之外的所有数据都存储良好.. .courseId 的值存储为 Null...

我怎样才能将 CourseId 传递给这个专栏......有人可以在这里帮助我吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:38:47.867

如果 EF 未显示您的列，您可能需要刷新模型。从那里开始。

1.  打开您的 .edmx 文件
2.  右键单击设计图面
3.  选择“从数据库更新模型”
4.  按照说明进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T04:20:58.063

感谢大家的友好回复，我找到了灵魂，我解决了这个问题

```
Public int CourseId
{
  get;
  set;
}

DataObject.Entities dataEntities=new DataObject.Entities();

   DataObject.Section section=dataEntities.Sections.CreateSections(0
                                                                    ,Name
                                                                    ,Code
                                                                    ,Capacity);
   section.CourseId=CourseId;
   dataEntities.Sections.AddObject(section);
   dataEntities.SaveChanges(); 
```

# javafx - JavaFX 2.0 中的 postinit{} 块的等价物

> ID：10211712
> 
> 赞同：0
> 
> 时间：2012-04-18T14:37:23.070
> 
> 标签：javafx, javafx-2

在 JavaFX 2.0 中是否有来自 JavaFX 1.3 的 postinit{} 块的等价物？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:15:37.407

不带参数的[Java 构造](http://www.leepoint.net/notes-java/oop/constructors/constructor.html)函数大致相当于 postinit 块。

# entity-framework - 最近有没有关于使用 PLINQO 与实体框架的意见？

> ID：10211714
> 
> 赞同：2
> 
> 时间：2012-04-18T14:37:28.490
> 
> 标签：entity-framework, plinqo

我们正在考虑从实体框架迁移到 PLINQO L2S。事实证明，我们很难在 MVC3 应用程序中管理 EF。我同意我们的应用程序的某些领域可以改进，但总的来说，EF 可能不是我们的最佳选择。

我很想知道，最近是否有人从 EF 迁移到 PLINQO L2S？我在 2010 年读过很多帖子，但当时 EF 是一个完全不同的动物。我对 EF 的 PLINQO 不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:59:02.413

我们最终评估了 PLINQO，发现在尝试模拟我们由 Entity Framework 生成的模型时存在错误。这不是 EF 如何生成数据库的问题，而是[PLINQO 将数字附加](http://community.codesmithtools.com/Template_Frameworks/f/66/p/12612/48824.aspx#48824)到集合实体的问题。有太多清理工作让我们考虑使用 PLINQO。它有一些很棒的功能，但是一代给我们带来了问题

我们删除了 DTO 层并决定使用纯实体。性能提升是巨大的。我们尝试了几个映射库，甚至创建了自己的直接映射解决方案，但是性能成本太高了。

# scala - Scala 私有访问修饰符范围

> ID：10211720
> 
> 赞同：3
> 
> 时间：2012-04-18T14:37:50.200
> 
> 标签：scala

我有伴随对象的代码并将构造函数定义为私有：

```
class Person private[Person] (var age: Int, var name: String) {
  private[Person] def this(name: String) = this(0, name)
}

private class Employee(age: Int, name: String) extends Person(age, name)

private class Worker(age: Int, name: String) extends Person(age, name)

object Person {
  def prettyPrint(p: Person) = println("name:%s age:%s".format(p.name, p.age))
  def apply(age: Int, name: String) = new Person(age, name)
  def apply() = new Person(0, "undefined")
  def apply(age: Int, name: String, personType: String): Person = {
    if (personType == "worker") new Worker(age, name)
    else if (personType == "employee") new Employee(age, name)
    else new Person(age, name)
   }

} 
```

我的问题是为什么同一个包中的另一个对象也可以访问这个私有构造函数。我添加了 private[this]，因此其他人无法访问它，但同伴也没有。我可以只拥有类和伴随对象的私有属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:20:03.937

此代码无法编译。两者都`Employee`尝试`Worker`访问私有构造函数，并且被正确地拒绝访问。

您的问题谈到了私有变量，但没有声明为私有的变量。

因此，您的示例要么不完整，要么不正确。请更正示例，以便我们回答问题。

# perl - 当 BCP 失败时，Perl system() 命令不返回失败

> ID：10211721
> 
> 赞同：-1
> 
> 时间：2012-04-18T14:37:50.430
> 
> 标签：perl, ipc

我正在使用 Perl 程序中的 BCP 实用程序将文件导入 SQL Server。在我正在导入的文件中，日期格式错误，因此导入过程失败并出现以下错误：

```
SQLState = 22008, NativeError = 0
Error = [Microsoft][SQL Server Native Client 10.0]Invalid date format 
```

我在我的 perl 程序中执行 bcp 命令，如下所示。

```
my $myBcp = "bcp.exe" <table name> in <temp file path> -f<format file> -m 1 -h "FIRE_TRIGGERS" -o<log file path>
my $myResult = system($myBcp); 
```

当我打印`$myResult`它给我'0'。由于存在“无效的日期格式”错误，它应该返回一个错误代码。

谁能告诉我如何在我的 perl 程序中捕获 Invalid Date Format 错误？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:51:57.937

`system()`只是返回它调用的程序的退出状态。如果`system()`返回 0，那么这就是程序退出的原因。`exit()`对于以非零状态指示错误的程序，通常认为这是礼貌的，但这绝不是在任何地方强制执行的。可能只是程序设计不当。

您可以做的一件事是捕获程序`STDOUT`和/或`STDERR`流并寻找特定的模式，或者至少是任何东西。如果上面印有任何内容，`STDERR`则很可能猜测发生了错误。

有关捕获这些的信息，请参阅[IPC::Run](http://search.cpan.org/perldoc?IPC%3a%3aRun)、[IPC::Open2](http://search.cpan.org/perldoc?IPC%3a%3aOpen2)或[IPC::Open3](http://search.cpan.org/perldoc?IPC%3a%3aOpen3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:44:32.970

您应该通过以下方式将 STDERR 重定向到 STDOUT `2>&1`：

```
my $myBcp = '"bcp.exe" <table name> in <temp file path> -f<format file> -m 1 -h "FIRE_TRIGGERS" -o<log file path>';
my $myResult = `$myBcp 2>&1`;
print $myResult; 
```

# php - 使用链接将会话变量从一个表单传递到另一个表单

> ID：10211723
> 
> 赞同：-1
> 
> 时间：2012-04-18T14:37:52.640
> 
> 标签：php, session-variables

我会请是否有人可以帮助我。

我有以下测试表单（'form.html'），如果我使用“提交按钮”，我可以将“用户名”和“位置 ID”变量传递给下一个表单，在本例中为“gallery.php”

```
 <form method="post" action="gallery.php"><br/><br/>

 <input type="text" name="username" value="IRHM73" /><br/><br/>
 <input type="text" name="locationid" value="1" /><br/><br/>
 <input type="submit" name="submit"/><br/><br/>

 </form> 
```

这是'gallery.php'

```
<?php 

$_SESSION['username']=$_POST['username'];
$_SESSION['locationid']=$_POST['locationid'];

 ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<?php 

  $galleryPath = 'UploadedFiles/' . $_SESSION['username'] . '/' . $_SESSION['locationid'] . '/';

  $thumbnailsPath = $galleryPath . 'Thumbnails/'; 

  $absGalleryPath = realpath($galleryPath) . DIRECTORY_SEPARATOR; 

  $descriptions = new DOMDocument('1.0'); 
  $descriptions->load($absGalleryPath . 'files.xml'); 
?>
<head> 
  <title>Gallery</title> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
  <link href="Libraries/fancybox/jquery.fancybox-1.3.1.css" rel="stylesheet" type="text/css" /> 
  <link href="Styles/style.css" rel="stylesheet" type="text/css" /> 
  <!--[if IE]>   
  <link href="Styles/ie.css" rel="stylesheet" type="text/css" /> 
  <![endif]-->
  <script src="Libraries/jquery/jquery-1.4.3.min.js" type="text/javascript"></script> 
  <script src="Libraries/fancybox/jquery.fancybox-1.3.1.pack.js" type="text/javascript"></script> 
  <script type="text/javascript"> 

  $(function() { $('a.fancybox').fancybox(); }); 

  </script> 
  <style type="text/css">
<!--
.style1 {
    font-size: 14px;
    margin-right: 110px;
}
.style4 {font-size: 12px}
-->
  </style>
</head>
<body style="font-family: Calibri; color:  #505050; font-size: 9px; border-bottom-width: thin; margin-top: 5px; margin-left: -476px; margin-right: 1px; margin-bottom: -10px;">
<div align="right" class="style1"> <a href = "imagefolders.php" /> View Uploaded Images In Folder Structure <a/> &larr; View All Uploaded Images </div>
  <form id="gallery" class="page"> 
  <div id="container"> 
    <div id="center"> 
      <div class="aB"> 
        <div class="aB-B"> 
          <?php if ('Uploaded files' != $current['title']) :?>
          <?php endif;?>
          <div class="demo"> 
          <input name="username" type="text" id="username" value="IRHM73" />
          <input name="locationid" type="text" id="locationid" value="1" />
            <div class="inner"> 
              <div class="container"> 
                <div class="gallery"> 
                  <ul class="gallery-image-list"> 
                  <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) : 
                          $xmlFile = $descriptions->documentElement->childNodes->item($i); 
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8'); 
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8'); 
                          $folder = htmlentities($xmlFile->getAttribute('folder'), ENT_COMPAT, 'UTF-8'); 
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source')); 
                          $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail')); 
                  ?>
                    <li class="item"> 
                      <a class="fancybox" target="_blank" rel="original" href="<?php echo $source; ?>"><img class="preview" 
                        alt="<?php echo $name; ?>"  src="<?php echo $thumbnail; ?>" /></a></li>
                        <p><span class="style4"><b>Image Description:</b> <?php echo htmlentities($xmlFile->getAttribute('description'));?> <br />
                          <b>Contained in folder:</b> <?php echo htmlentities($xmlFile->getAttribute('folder'));?> </span><br />  
                          <?php endfor; ?>
                          </li>
                        </p>
                  </ul>
                </div> 
              </div> 
            </div> 
          </div> 
        </div> 
      </div> 
    </div> 
    </div> 
        <div class="aB-a">        </div> 
      </div> 
    </div> 
  </div> 
  </form> 
</body> 
</html> 
```

我现在正在尝试执行相同的操作，但这次是通过链接而不是按钮。

我没有更改我的 'gallery.php 脚本，但我修改后的形式如下：

```
<?php
session_start(); 
$_SESSION['username']="username";
$_SESSION['locationid']="locationid";
echo '<a href="gallery.php">Gallery</a>';

?>

 <input type="text" name="username" value="IRHM73" /><br/><br/>
 <input type="text" name="locationid" value="1" /><br/><br/>

 </form> 
```

但是，当我加载表单时，我收到以下错误：

> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 已在 /homepages/2/d333603417 中发送标头（输出开始于 /homepages/2/d333603417/htdocs/development/form.php:2） /htdocs/development/form.php 在第 3 行

我对“会话变量”不太熟悉，因为我只是在学习。但我只是想知道是否有人可以看看这个并让我知道我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:42:26.417

session_start() 应该在任何输出到浏览器之前被调用，所以把它放在发送任何东西之前。输出是从 form.php 文件发送的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:42:44.657

似乎在你的 php 页面的某个地方你有 session_start(); 在其他操作后调用（如打印 hmtl）。

始终将 session_start() 作为 php 页面中的第一条指令

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:43:15.950

放置以下内容：

```
session_start(); 
```

在gallery.php 的顶部，而不是form.html。此外，除非您使用 javascript 在单击链接时提交表单，否则您不能以这种方式提交表单，请参见此处：[http](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml) ://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml 。此外，您的表单上没有打开 <form> 标记。

# java - 如何确定 Scala 中调用的 JAR 的名称？

> ID：10211727
> 
> 赞同：1
> 
> 时间：2012-04-18T14:38:03.413
> 
> 标签：java, scala, command-line, command-line-arguments

UNIX shell 程序有一个方便的属性，即第一个参数是被调用程序的名称。所以我可以写这样的东西：

```
#!/bin/sh
echo "You ran $0." 
```

当我运行它时，我得到：

```
$ sh foo.sh 
You ran foo.sh. 
```

当您想要捕获错误的调用并提供使用字符串时，这特别有用，例如：

```
Usage: foo.sh -a [AAAAA] -b [BBBBB] -c [CCCCC] 
```

我怎样才能对像这样调用的 JAR 文件执行此操作`java -jar MyJAR.jar`？对于 Scala `main`，`args(0)`只是用户传递的第一个参数，而不是调用程序的名称。我希望能够打印出来：

```
Usage: MyJAR.jar -a [AAAAA] -b [BBBBB] -c [CCCCC] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:11:56.097

你可以试试这个：

```
val path = myClass.getClass.getProtectionDomain.getCodeSource.getLocation.getPath 
```

只要`myClass`是您正在运行的 jar 文件中定义的类的实例，这应该可以工作。

# java - Java GUI 的问题

> ID：10211729
> 
> 赞同：-2
> 
> 时间：2012-04-18T14:38:06.297
> 
> 标签：java, swing, user-interface, netbeans, jframe

我正在为我的项目创建一个 GUI。我完全被困在某一点上。我能够创建一个 GUI，它将进行一些简单的查询，例如版本号、命令名称和一些其他布尔问题。

现在我希望用户按下`CONTINUE`按钮移动到 GUI 表单的下一页。我已经创建了继续按钮，但现在我需要向它注册一个事件。这就是我卡住的地方。我不知道我可以向它注册什么事件，这会将 GUI 移动到下一页。（通过移动到下一页我的意思是，我们在为我们的计算机安装软件时看到的不同的 GUI 页面。）

例如，如果我正在安装 iTunes，我会首先选择“我接受条款和条件”的单选按钮，然后按`CONTINUE`或`NEXT`按钮继续前进。如果我需要回来，我会按下`BACK`按钮。

一个合乎逻辑的答案是创建另一个 GUI 表单，然后将其链接到我首先创建的那个。

编辑:: 这是我第一次使用 Java，所以我可能忽略了一些明显的事实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:41:38.773

查看使用 CardLayout，将几个 JPanel 添加到使用 CardLayout 的容器中，然后切换到下一个视图（下一个 JPanel），调用`next(...)`JButton 的 ActionListener 中的布局方法。您还可以使用 CardLayout 的方法随机访问由 CardLayout 持有的组件`show(...)`。

要了解包括示例代码在内的更多信息，请查看[CardLayout 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)和[API](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:43:24.483

好吧，用按钮注册一个`ActionListener`或一个。`Action`要实现这种向导风格，请查看`CardLayout`布局管理器以切换卡片或使用选项卡式窗格，隐藏选项卡并将它们切换到动作或动作侦听器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:44:25.343

如果我理解，我认为你应该使用 CardLayout

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T14:46:30.523

如果您使用的是 Swing，则可以在一个 JFrame 实例上使用多个 JPanel 实例。

你可以有这样的结构：

```
JFrame
  +------JPanel:root
           |
           +---JPanel:current // This panel change by other instance
           |
           +---JPanel:controlPanel // This panel contains you button 
```

在您的按钮中，需要使用 addActionListener 方法添加一个 ActionListener

面板控件可能需要更改您的元素，可能是按钮的文本或删除侦听器并由其他更改。

我希望能有所帮助

# emacs - 按名称插入 yasnippet

> ID：10211730
> 
> 赞同：6
> 
> 时间：2012-04-18T14:38:07.063
> 
> 标签：emacs, yasnippet

我想在 emacs-lisp 中插入一个特定的 yasnippet 作为函数的一部分。有没有办法做到这一点？

唯一似乎相关的命令是`yas/insert-snippet`，但它只是打开一个包含所有选项的弹出窗口，并且文档没有说明通过指定片段名称绕过弹出窗口的任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T15:58:06.703

`yas/insert-snippet`确实只是一个`yas/expand-snippet`用于交互使用的薄包装。然而，内部结构……很有趣。从源代码来看，当我想在 elisp-mode 中扩展“defun”片段时，以下内容对我有用：

```
(yas/expand-snippet
  (yas/template-content (cdar (mapcan #'(lambda (table)
                                          (yas/fetch table "defun"))
                                      (yas/get-snippet-tables))))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T19:14:09.810

作为 yasnippet 的作者，我认为您宁愿不要依赖 yasnippet 有趣的数据结构的内部细节，这些细节将来可能会发生变化。我会根据和的文档来做到这`yas/insert-snippet`一点`yas/prompt-functions`：

```
(defun yas/insert-by-name (name)
  (flet ((dummy-prompt
          (prompt choices &optional display-fn)
          (declare (ignore prompt))
          (or (find name choices :key display-fn :test #'string=)
              (throw 'notfound nil))))
    (let ((yas/prompt-functions '(dummy-prompt)))
      (catch 'notfound
        (yas/insert-snippet t)))))

(yas/insert-by-name "defun") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-26T03:48:34.403

我刚刚进入 yasnippet，我想在为某些模式打开一个新文件时自动插入我的一个片段。这导致我来到这里，但我产生了一个稍微不同的解决方案。提供另一种选择：（*“new-shell”是我个人片段的名称，用于提供新的 shell 脚本模板*）

```
(defun jsm/new-file-snippet (key)
  "Call particular yasnippet template for newly created
files. Use by adding a lambda function to the particular mode
hook passing the correct yasnippet key"
  (interactive)
  (if (= (buffer-size) 0)
      (progn
        (insert key)
        (call-interactively 'yas-expand))))

(add-hook 'sh-mode-hook '(lambda () (jsm/new-file-snippet "new-shell"))) 
```

IMO，如果 yasnippet 发生巨大变化，我的解决方案不太容易被破坏。

# php - Doctrine 中允许的内存大小已用尽

> ID：10211751
> 
> 赞同：2
> 
> 时间：2012-04-18T14:38:50.297
> 
> 标签：php, symfony-1.4, doctrine-1.2

我使用 symfony 1.4（来自一个任务）和 Doctrine 1.2 从很多文件中导入数据。

它运行良好，但几分钟后我从 PHP 中收到“允许的内存大小已用尽”致命错误，不是在我的代码中，而是在 Doctrine 中……</p>

```
Call Stack:
    0.0004     325216   1\. {main}() C:\wamp\www\XPower\symfony:0
    0.0125     587704   2\. include('C:\wamp\www\XPower\lib\vendor\symfony\lib\command\cli.php') C:\wamp\www\XPower\symfony:14
    1.9202    6981872   3\. sfSymfonyCommandApplication->run() C:\wamp\www\XPower\lib\vendor\symfony\lib\command\cli.php:20
    1.9233    6983528   4\. sfTask->runFromCLI() C:\wamp\www\XPower\lib\vendor\symfony\lib\command\sfSymfonyCommandApplication.class.php:76
    1.9234    6983688   5\. sfBaseTask->doRun() C:\wamp\www\XPower\lib\vendor\symfony\lib\task\sfTask.class.php:97
    3.0794    7047088   6\. dataImportTask->execute() C:\wamp\www\XPower\lib\vendor\symfony\lib\task\sfBaseTask.class.php:68
    3.2731    8663752   7\. dataImportTask->traiterDossier() C:\wamp\www\XPower\lib\task\dataImportTask.class.php:36
    7.7762   17906824   8\. dataImportTask->traiterDossier() C:\wamp\www\XPower\lib\task\dataImportTask.class.php:55
  264.4390  133557080   9\. xPower::importerXml() C:\wamp\www\XPower\lib\task\dataImportTask.class.php:64
  264.5919  133609328  10\. xPower::importerFichierXml() C:\wamp\www\XPower\lib\XPower.class.php:312
  265.4313  134048568  11\. InverterTable->findOneBySerialNumber() C:\wamp\www\XPower\lib\XPower.class.php:445
  265.4313  134048776  12\. Doctrine_Table->__call() C:\wamp\www\XPower\lib\XPower.class.php:445 
```

我尝试在 Doctrine 调用中添加一些“->free()”，但现在它似乎失败了`InverterTable->findOneBySerialNumber()`，这是一种“神奇”的 Doctrine 方法。

我该如何解决我的问题？我是否需要编写自己的“findOneBySerialNumber”方法，添加对“free()”的调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:46:26.293

这是教义的普遍问题。你必须使用[pcntl_fork](http://php.net/manual/en/function.pcntl-fork.php)。

我总是以[这个要点](https://gist.github.com/pborreli/396110)为例。

`pcntl_fork`不适用于 Windows，因为它需要遵循 POSIX 标准的操作系统。

仅仅帮助教义释放对象其对象也可能就足够了，[这是一个很好的答案](https://stackoverflow.com/a/4066680/569101)。

**如果你有一些`The MySQL server has gone away`：**

在使用 Doctrine 和 MySQL 时，可能需要添加以下子线程代码：

```
Doctrine_Manager::connection()->close(); 
```

这将关闭数据库连接，Doctrine 将在第一次查询时自动重新创建它。

# c++ - 矢量下标是标准 C/C++ 吗？

> ID：10211752
> 
> 赞同：2
> 
> 时间：2012-04-18T14:38:51.717
> 
> 标签：c++, gcc, g++

向 gcc 发布了一个[补丁](http://gcc.gnu.org/ml/gcc-patches/2012-04/msg01024.html)，该补丁为 g++ 提供了一种称为矢量下标的东西（gcc 已经有了它）。

如果`a`是一个数组并且`i`是一个 int 那么`i[a]`是合法的并且等于`a[i]`。

```
double a[]{0.0, 1.0, 2.0, 3.0}; // C++11 style but would work in C++98 style too.
assert(a[2] == 2.0);
assert(2[a] == 2.0); 
```

那么，这是合法且标准的 C/C++ 还是 gcc 扩展？

实际上，谷歌显示 MS Developer Studio 也有这个。我查看了 C++ 标准，但没有看到它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T14:44:17.387

`i[a]`补丁与等同于`a[i]`;无关。两种语言都是如此。除非涉及用户定义的类型，否则`a[i]`定义为等价于`*(a+i)`，并且加法是可交换的。

该补丁涉及[向量数据类型](http://gcc.gnu.org/onlinedocs/gcc/Vector-Extensions.html#Vector-Extensions)（不要与 C++`std::vector`类模板混淆），这是一种支持向量处理指令的 GCC 语言扩展。根据补丁说明，它们像 C 中的数组一样是可下标的，但 C++ 中不能，而且这个补丁将这个特性添加到了 C++ 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T14:42:19.337

`a[b]`在 C 中，这源于等价于的事实，`*(a + b)`因为它`+`是[可交换](http://en.wikipedia.org/wiki/Commutative_property)的，当然与 相同`*(b + a)`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T14:40:19.087

是的，这是合法的，因为矢量元素通过标准保证在内存中是连续的。

注意：

```
a[i] == i[a] == *(a+i) 
```

# android - 如何从停止活动的类中为 TextView 设置值？

> ID：10211754
> 
> 赞同：0
> 
> 时间：2012-04-18T14:38:53.333
> 
> 标签：android, android-activity, textview

如何从停止活动的类中为 TextView 设置值？我们在未确定的时间获得的值，因此设置该类的值很重要。

所有建议都会有所帮助。谢谢你。

PS：

例如，在 Actvity 中，我有一个方法，它将值设置为 TextView。

```
public void textViewSetText (String value){
    tv.setText(value);    
} //how correctly to transfer value from my class to get the desired effect? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:43:15.167

如果您没有 Activity，那么它是不可能的，因为 TextView 在 Activity 中可用。所以当你没有参考活动时，你也不能改变它的内容。如果您将活动引用传递给静态方法，则该方法可以进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:48:22.287

通常，TextView 的内容应该只在一个活动中设置。尽管您可以在活动之外设置该值，但它并不是很有用。

至于你的问题，你在不确定的时间得到了值，有一些选择。例如，你可以给那个类注册一个回调，当另一个类得到那个值时，你可以通过那个回调发送消息。但是要注意线程问题，给 TextView 设置值是一个 UI 操作，只能在 UI 线程中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T14:03:20.823

我不确定你的问题，但尝试这样可能会奏效

```
((MainActivity) activity).textViewSetText();

public void textViewSetText (String value){

    tv.setText(value);    
} 
```

但是您的活动必须扩展 MainActivity。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:46:51.193

您可以使用外部静态类来保存要修改的字符串的值（并在返回到您的 TextView_Class 后设置值），只有访问静态类才能获取值。

您还可以将“this”（活动）保存在静态类中，并从任何地方访问该活动，因此您可以修改 TextView。（我不认为这会被推荐）。

视情况而定（您没有解释得足够多），如果它们是父子类，通常要做的是捆绑字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T15:00:36.897

1.  不要从 UI 线程外部访问 Android UI 工具包
2.  `AsyncTask`允许您在用户界面上执行异步工作。它在工作线程中执行阻塞操作，然后在 UI 线程上发布结果，而无需您自己处理线程和/或处理程序。

这是一个例子：

```
 public void onClick(View v) {
        new SomeTask().execute(something);
    }
    private class SomeTask extends AsyncTask<Something, Void, String> {
        /** The system calls this to perform work in a worker thread and
          * delivers it the parameters given to AsyncTask.execute() */
        protected Bitmap doInBackground(Something something) {
            return string; // the TextView's text
        }

        /** The system calls this to perform work in the UI thread and delivers
          * the result from doInBackground() */
        protected void onPostExecute(String result) {
            textView.setText(result);
        }
    } 
```

但是，如果您不更详细地说明您的案例，那么没有确切的答案可能会让您满意。

# visual-studio-2010 - Ankhsvn 与 Visual Studio 2010 集成 - 添加解决方案 - 工作文件夹问题

> ID：10211768
> 
> 赞同：1
> 
> 时间：2012-04-18T14:39:31.553
> 
> 标签：visual-studio-2010, svn, ankhsvn

新手到 Ankhsvn 和 Ubersvn 集成。

我在 Visual Studio 2010 中构建了现有的 Web 项目，并试图将它们添加到新创建的存储库中。我遇到的问题是尝试配置工作本地目录。我的项目包含在我机器上的各种文件夹中，但似乎 Ankhsvn 不允许您更改机器上的“本地文件夹”（我假设它是工作文件夹），它只在下拉列表中提供选定的选项. 我知道 Visual Studio 在标准目录（我的 docs../vis stud../projects/...）中生成它自己的解决方案文件，但这不是我的工作目录，似乎 Ankhsvn 固定在其中。

我不想移动我的项目（而且我的 c: 驱动器上可能没有足够的空间）。有人对我如何配置 ankhsvn 和 Ubersvn 可以使用的本地文件夹有任何见解吗？

如果这也有任何影响，请使用 Windows 7 64 位。我们的 svn 存储库在外部托管。

**更新**

好吧，我还没有听到任何反馈，所以我基本上继续使用以下方法将我的文件放入存储库：

1）使用 TortoiseSVN 将文件添加到 svn 存储库（安装 TortoiseSVN，右键单击要添加的文件夹，TortoiseSVN -> 导入并基本上添加存储库 URL 广告，然后根据需要添加文件夹和文件。

2) 下一步是打开 Visual Studio 2010 并打开给定的 Web 项目文件夹，然后转到 File -> Subversion -> Open project from subversion。注意：确保在打开时选择要导入的正确文件夹。它应该比您选择的给定文件夹高一级。

3）导入后，我的所有文件都出现冲突。我基本上只是提交了文件，问题就消失了。

所以我现在将我的项目连接到 svn 并通过 Ankhsvn 工作，但必须使用 TortoiseSVN 来完成它......嗯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:31:04.513

要在 uberSVN 中管理存储库，您需要让它知道存储库。最简单的方法是在 uberSVN 管理页面中*创建*存储库，但是您已经完成了这一点，因此我们需要让 uberSVN 意识到它。

去做这个：

*   根据您手动创建的存储库创建转储文件
*   以系统管理员或存储库管理员身份登录 uberSVN
*   单击存储库
*   点击添加
*   输入存储库名称（将自动输入位置）
*   点击下一步
*   单击从上传的转储文件导入或从位于服务器上的转储文件导入
*   选择有问题的转储文件
*   点击完成

您的存储库现在将被带到 uberSVN 下，加载到位于 /uberSVN/repositories 存储位置的新创建的存储库中。

从那里你可以继续使用你喜欢的颠覆客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T17:57:13.640

知道这个 QA 很旧，但值得更新。从 Visual Studio 2010 中获得了一种可靠的、可重现的方法，可以将项目添加到远程 UberSVN 存储库中……试用和重复似乎对我来说始终如一。开始

*   转到远程 UberSVN 服务器，登录
*   创建存储库

> “您的存储库名称”

*   将用户添加到存储库
*   以类似的 ubersvn 结构创建 Visual Studio 项目（文件 -> 新项目）......在这种情况下，在 Windows 资源管理器中，创建文件夹 D:\\\trunk\
*   在 Visual Studio 中，创建新项目，取消选中“为解决方案创建目录”并将“名称”设置为

> “你的项目名称”

*   在第一个解决方案和 subversion 创建阶段，我勾选了“Add to Subversion”</li>
*   创建了项目，然后出现了颠覆存储库选择弹出窗口。
*   输入新的存储库 url

> http://"你的 UberSVN 存储库 URL"/"你的存储库名称"/

*   在存储库 URL 下方，我选择了存储库“数据库”图像，然后单击“创建文件夹”</li>

**注意**：当我再次这样做时，似乎已经在存储库数据库下生成了“trunk”、“branches”和“tags”文件夹 -> 我点击了 trunk 文件夹）。

*   如果上面注释中的文件夹不存在，我输入“trunk”作为新文件夹，然后正确的项目 url 出现在弹出窗口底部的“项目将在：”部分中（

> http://"你的 UberSVN 存储库 URL"/"你的存储库名称"/trunk/"你的项目名称"/

)

*   单击确定

*   开始将文件从现有网站/项目复制到新项目

*   一旦所有文件都进入并且不再存在错误，开始进行初始提交

**Visual Studio 2010 注释**：

*   可能必须从旧的 Visual Studio 2008 项目中重新生成设计器文件。右键单击要转换为“Web 应用程序”的 Web 表单页面，它将为给定的 Web 表单（网页）自动生成设计器文件

*   必须从 bin 文件夹中添加项目中所需的任何 dll 的引用

*   如果从另一个项目（即在 App_Code 文件夹中）引入类，需要右键单击每个（或选择多个）并转到属性 -> 构建操作并将“内容”更改为“编译”</p>

# .htaccess - 奇怪的 htaccess 重定向

> ID：10211769
> 
> 赞同：0
> 
> 时间：2012-04-18T14:39:33.377
> 
> 标签：.htaccess

我的 htaccess 出了什么问题..

```
RewriteEngine on
Options -Indexes
IndexIgnore *
RewriteRule ^page somepage.php [L] 
```

我尝试将[http://mysite.com/somepage.php](http://mysite.com/somepage.php)重定向到[http://mysite.com/page](http://mysite.com/page)并且这工作正常，但我也可以访问此 url`http://mysite.com/page2121`或`http://mysite.com/pageasd4a4sd`......并且所有内容都被重定向到同一页面 somepage。 php，这里有什么问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:42:58.727

假设您的意思是重定向`/page`到`/somepage.php`，您需要显式设置模式的结尾，现在写，您的匹配以 开头的所有内容`page`，而不是以 开头和结尾的内容`page`。试试这个：

```
RewriteEngine on
RewriteRule ^page$ somepage.php [L] 
```

（这`$`是关键）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:43:08.323

在页面末尾添加 $，如下所示：

> RewriteRule ^page$ somepage.php [L]

# google-chrome - 如何以编程方式安装 Chrome 扩展程序？

> ID：10211772
> 
> 赞同：17
> 
> 时间：2012-04-18T14:39:50.603
> 
> 标签：google-chrome, plugins, google-chrome-extension, installation

我已经为 Google Chrome 编写了一个扩展，它将与我们产品的下一个版本一起发布。我想了解我应该提供哪些属性、提取路径、注册表项等，以便最终用户不必手动安装扩展程序，而安装程序可以完成以下工作安装扩展，并通知用户该扩展已安装。到目前为止，我写的代码放在一个文件夹中，我使用“加载未打包的扩展”来加载扩展。我应该怎么做才能完成上述任务？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-27T08:41:08.320

Google 目前关于通过注册表安装扩展的政策（对于 Windows 机器）是这样的：只有来自 Google 扩展库（或 Chrome 网上应用店 - CWS）的扩展才能通过注册表安装。

请参阅此链接 - [https://developer.chrome.com/extensions/external_extensions](https://developer.chrome.com/extensions/external_extensions) - 有关如何完成此操作的信息。请记住以下几点：

- 这种技术仍然会向用户弹出一个 msgbox。它不是完全沉默的。

- 使用此技术时，如果用户随后从她的 Chrome 中删除了扩展程序，该扩展程序将在该 chrome 上被“列入黑名单”，并且在用户手动重新安装之前不会重新自动安装。请参阅[自动安装 google chrome 扩展程序不起作用！](https://stackoverflow.com/questions/5887944/auto-installing-a-google-chrome-extension-wont-work)详情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-21T22:29:29.377

Chrome 有几种以编程方式安装扩展的方法：http: [//www.chromium.org/administrators/pre-installed-extensions](http://www.chromium.org/administrators/pre-installed-extensions)

编辑：是的，正如 FuzzyAmi 指出的那样，这项政策现在已经改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-30T23:06:43.937

如果您使用的是 GNU/Linux，这是您从 chrome 网上商店为所有用户预安装扩展的方式：

```
/etc/chromium/policies/managed/yourextension_policy.json
‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾
{
    "ExtensionInstallForcelist": [
        "yourextensionuniqueidentifiersup;https://clients2.google.com/service/update2/crx",
        "yourextensionuniqueidentifiersup"
    ]
} 
```

**参考**

[`metamask-chrome`](https://aur.archlinux.org/cgit/aur.git/tree/metamask_policy.json?h=metamask)- AUR

# javascript - PrettyPhoto 画廊中的最后一张图片首先加载

> ID：10211775
> 
> 赞同：2
> 
> 时间：2012-04-18T14:40:03.847
> 
> 标签：javascript, jquery, plugins, prettyphoto, portfolio

[http://2012.delineamultimedia.com/#home_portfolio](http://2012.delineamultimedia.com/#home_portfolio)

如果您将鼠标悬停在 BRIAN GUEHRING 的画廊上时单击会跳转的图标。您将激活 prettyPhoto 弹出式画廊。出于某种原因，它从图库中的最后一张图片开始。有没有办法解决这个问题，所以它从画廊中的第一张图片开始？

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto();
});
</script> 
```

这是我用来启动 prettyPhoto 的脚本，我担心另一个脚本可能会以某种方式搞砸。

提前感谢您的宝贵时间！对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-26T00:52:24.077

是的，围绕所有图像，但第一个强制第一个图像为 1/x，并且画廊中带有 div 标签的后续图像按代码中列出的顺序显示......如果有更好的解决方案，我会很高兴听到它......这是我的示例代码：

```
 <div class="mask">  
    <a class="icon-image"
    href="../../images/Murals/Residential/GreekBath/GREEK_BATH_514X685.png"
    rel="GreekBath[gallery]"
    title="Flower Vase Detail">
    <i class="icon-search"></i>
    </a>
    <div style="display:none;">
    <a class="icon-image"
    href="../../images/Murals/Residential/GreekBath/FLOWER_VASE.png"
    rel="GreekBath[gallery]"
    title="Toilette">
    <i class="icon-search"></i>
    </a>
    </div>
    <div style="display:none;">
    <a class="icon-image"       
    href="../../images/Murals/Residential/GreekBath/TOILETTE.png"
    rel="GreekBath[gallery]"
    title="Greek Bathroom">
    <i class="icon-search"></i>
    </a>
    </div>
    </div> 
```

# r - r问题中的茎图

> ID：10211778
> 
> 赞同：2
> 
> 时间：2012-04-18T13:50:54.443
> 
> 标签：r, data-visualization

为什么当我在 R 中执行茎函数时，茎和叶值与数据点不对应？当我做 scale=2 时，它就起作用了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:20:20.757

这可能更像是[Stack Overflow](https://stackoverflow.com/)问题而不是 CV 问题，因为它关注的是 R 的工作原理和原因，而不是茎叶图的统计方面。尽管如此...

函数的编码方式旨在缩短输出的长度，使其更适合控制台。我相信很少有人会觉得这很有帮助，或者至少我没有。只要永远记住从 开始`scale=2`，您可能需要进一步使用它或调整`width`参数。另外，要知道 Rcmdr 中有一个更高级的版本stem.leaf [(](http://socserv.mcmaster.ca/jfox/Misc/Rcmdr/) [)](http://www.stat.ucl.ac.be/ISdidactique/Rhelp/library/Rcmdr/html/stem.leaf.html)。

# java - Java 字符串 I/O

> ID：10211781
> 
> 赞同：2
> 
> 时间：2012-04-18T14:40:12.910
> 
> 标签：java, io

我必须在 JAVA 中编写如下结构的代码：

```
Read String From File
// Perform some string processing
Write output string in file 
```

现在，为了从文件中读取/写入字符串，我正在使用，

```
BufferedReader br = new BufferedReader(new FileReader("Text.txt"), 32768);
BufferedWriter out = new BufferedWriter(new FileWriter("AnotherText.txt"), 32768);

  while((line = br.readLine()) != null) {
          //perform some string processing
          out.write(output string) ;
          out.newLine();
    } 
```

但是，阅读和写作似乎很慢。有没有其他最快的方法可以在 JAVA 文件中读取/写入字符串？

附加信息：

```
1) Read File is 144 MB.
2) I can allocate large memory (50 MB) for reading or writing.
3)I have to write it as a string, not as Byte. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:02:12.653

听起来比应该的要慢。

您可以尝试增加缓冲区大小。

也许也可以尝试 FileOutputStream 而不是 FileWriter。

你提到了 50MB。当您使用 -X 开关运行程序时，您是否正在修改程序的内存参数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:54:58.527

忽略您没有发布您的性能要求的事实：

尝试将文件作为字节读取/写入，并在内部将字节转换为字符/字符串。

这个问题可能会有所帮助：[Java 中文件中的行数](https://stackoverflow.com/questions/453018/number-of-lines-in-a-file-in-java)

# iphone - _NSZombie__GEOtileKeyWrapper 类在两者中都实现了？？和 ？？。将使用两者之一。哪个是未定义的

> ID：10211785
> 
> 赞同：9
> 
> 时间：2012-04-18T14:40:33.857
> 
> 标签：iphone, debugging, nszombie

我在调试我的应用程序时收到此消息：

> *NSZombie* _GEOtileKeyWrapper类在两者中都实现了？？和 ？？。将使用两者之一。哪一个是未定义的。

你知道这是什么吗？以及如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T16:03:59.767

当您有同一个类的两个实现并且 Obj-c 运行时无法决定使用哪一个时，就会发生这种情况……您可以参考 Justin 的这个好[答案](https://stackoverflow.com/a/6153555/919545).. 堆栈溢出上有一些真正了不起的人.. 不要如果对您有帮助，请不要忘记投票给他的答案..快乐编码：D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-21T01:27:11.220

您可以忽略此特定消息。

您可以忽略它的原因是因为它说：

> 类**NSZombie_** ....

这意味着消息所引用的对象是 Xcode 诊断创建的虚拟对象。在此处阅读有关[僵尸的](https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/EradicatingZombies.html)更多信息。`Zombie Objects`如果您在环境诊断选项中禁用，则不应出现该消息。

[![在此处输入图像描述](../Images/e521ee8c299c7d877402c48da64512b7.png)](https://i.stack.imgur.com/w2HGd.png)

# java - 线程“AWT-EventQueue-0”中的异常

> ID：10211794
> 
> 赞同：-1
> 
> 时间：2012-04-18T14:41:03.467
> 
> 标签：java

我目前正在使用离散小波变换进行隐写术项目。我已经编写了代码并编译了它。但是我面临一些异常。请帮助我解释异常。异常如下

```
 Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: null
        at java.lang.Integer.parseInt(Unknown Source)
        at java.lang.Integer.parseInt(Unknown Source)
        at DWT.dwtFunc(Steganography.java:292)
        at TextInput.actionPerformed(Steganography.java:252)
        at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
        at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
        at java.awt.Component.processMouseEvent(Unknown Source)
        at javax.swing.JComponent.processMouseEvent(Unknown Source)
        at java.awt.Component.processEvent(Unknown Source)
        at java.awt.Container.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$000(Unknown Source)
        at java.awt.EventQueue$1.run(Unknown Source)
        at java.awt.EventQueue$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
        at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
        at java.awt.EventQueue$2.run(Unknown Source)
        at java.awt.EventQueue$2.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source) 
```

我是 Stack Overflow 的新手。如果我在发布问题时犯了任何错误，请原谅我。谢谢你

回复：对不起先生，我仍然熟悉论坛的规则。

用于检测图像中皮肤区域的代码是

```
 import java.awt.event.*;
    import javax.swing.*;
    import java.awt.image.BufferedImage;
    import javax.swing.JFrame;
    import javax.swing.SwingUtilities;
    import java.io.*;
    import javax.swing.JFileChooser;
    import javax.swing.filechooser.FileFilter;
    import javax.swing.filechooser.FileNameExtensionFilter;
    import javax.imageio.ImageIO;
    import java.awt.*;
    import java.lang.*;

    public class demo2
    {

        public void skindet()
        {
            float[] hsvval;
            float hue,sat,val;
            int counter = 0;
            String[] skinpixel = new String[200000];
            int scount = 0;
            try
            {

                BufferedImage image = ImageIO.read(new File("lena.png"));
                int[][] rgb=new int[550][550];
                int w = image.getWidth();
                int h = image.getHeight();
                hsvval=new float[3];
                int red,green,blue;
                for (int i=0;i<w;i++) 
                {
                    for (int j=0;j<h;j++)
                    {
                        rgb[i][j] =image.getRGB(i,j);
                        red=(rgb[i][j] >> 16) & 0xff;
                        green=(rgb[i][j] >> 8) & 0xff;
                        blue=(rgb[i][j]) & 0xff;
                        float[] values = Color.RGBtoHSB(red,green,blue,null);
                        for(int s=0;s<3;s++)
                        {
                            hsvval[counter]=values[s];
                            counter++;
                        }
                        hue=hsvval[0];
                        sat=hsvval[1];
                        val=hsvval[2];
                        if(hue>0 && hue<0.11 && sat>0.2 && sat<0.7)
                        {
                            String xcor=Integer.toString(i);
                            String ycor=Integer.toString(j);
                            skinpixel[scount]=xcor;
                            scount++;
                            skinpixel[scount]=ycor;
                            scount++;
                        }
                    }
                }
                int length=skinpixel.length;
                for(int i=0;i<length;i++)
                    System.out.println(skinpixel[i]+"\n");

            }

            catch(Exception e)
            {
                e.printStackTrace();
            }

        }

        public static void main(String args[])
        {

            demo2 dem=new demo2();
            dem.skindet();
        }

    } 
```

例外是

java.lang.ArrayIndexOutOfBoundsException: 3 在 demo2.skindet(demo2.java:44) 在 demo2.main(demo2.java:79)

谢谢你的回复。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:42:53.813

这意味着您是`Integer.parseInt`从第 292 行调用的`Steganography.java`（它通常看起来包含一个名为`DWT`而不是的类`Steganography`），但您提供的是一个空值。

看起来这是对在文本字段上执行的某些操作的响应。

如果没有看到您的代码，我们真的无法说出更多信息——您需要弄清楚*为什么*该值为 null。

编辑：好的，现在它已更改为完全不同的错误，这就是问题所在：

```
int counter = 0;

hsvval=new float[3];
...
for (int i=0;i<w;i++) 
{
    for (int j=0;j<h;j++)
    {
        ...
        for(int s=0;s<3;s++)
        {
            hsvval[counter]=values[s];
            counter++;
        }
        ...          
    }
} 
```

所以*第*一次执行内部循环时，很好 - 但是在中间循环的第二次迭代（j = 1）中，你还没有 reset `counter`，所以它是 3 - 这超出了范围。你`scount`以后也有同样的问题。

如果您*在它们用于内部循环之前*`count`声明并初始化它们，那很好。`scount`

# javascript - 选择器 API 的浏览器支持

> ID：10211795
> 
> 赞同：4
> 
> 时间：2012-04-18T14:41:04.783
> 
> 标签：javascript, html, cross-browser, css-selectors, selectors-api

是否有页面显示当前浏览器对[Selectors API](http://www.w3.org/TR/selectors-api/)的支持？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T20:56:28.393

[我什么时候可以使用？](http://caniuse.com/queryselector)`querySelector()`有一个 Selectors API 的兼容性表，通过and`querySelectorAll()`函数引用它。

无论如何，浏览器支持水平令人惊讶：您会发现 IE8+ 和其他主要浏览器的最广泛使用的版本已经实现了 Selectors API 级别 1。

[第 2 级](http://www.w3.org/TR/selectors-api2)的工作已经开始，具有 , 等功能，`find()`目前正在实验中实现。`findAll()``matchesSelector()`

# database - 垂直数据库中的投影

> ID：10211799
> 
> 赞同：7
> 
> 时间：2012-04-18T14:41:13.020
> 
> 标签：database, projection, vertica

有人可以通过示例查询向我解释 vertica 数据库中 PROJECTION 的概念吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T21:44:58.063

Vertica 不使用索引来查找数据。

从概念上讲，您仍然使用 SQL 访问表。但在底层，表中的数据存储在投影中，您可以针对不同的查询进行优化。

我喜欢把它想象成一张代表一副纸牌的桌子。如果玩扑克，你可能还会说类似的话

```
Select * from CardDeck limit 5; 
```

假设您有一个用以下列定义的表：

```
FaceValue int (let's just assume face values are ints),
Suit varchar(10) 
```

然后我可以创建我的投影（我省略了关于分区、超级投影、伙伴投影等的细节）。

```
create projection CardDeck_p1
(
FaceValue ENCODING RLE,
Suit
)
as 
select FaceValue, Suit from CardDeck order by FaceValue;

create projection CardDeck_p2
(
FaceValue,
Suit
)
as
select FaceValue, Suit from CardDeck order by Suit; 
```

现在，每一列都可以获得投影中定义的不同类型的编码。自从我使用旧版本以来，我并没有使用太多的数据库设计器可以帮助您设计预测。

所以回到纸牌的类比，想象一下你想要访问一副纸牌，但你想要有不同的洗牌。Vertica 中的投影为您提供不同的随机播放。表实际上是一种结构，允许您访问存储在投影中的数据。但是，如果您正在编写 SQL，您将访问表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T05:54:54.813

我想强调杰夫的回答中提出的观点——投影是磁盘上的物理结构。为表定义多个投影可以提高查询性能，但代价是磁盘空间增加和加载时间变慢（因为必须将行放入每个投影中）。

存在将所有列存储在表中的超级投影以及部分投影。当您寻求支持/优化的查询只需要表中的列子集时，您将使用部分投影。每张桌子至少需要一个超投影。如果您没有定义一个，Vertica 将提供一个默认的，它的性能可能很差。

推荐的做法是让 Database Designer 工具帮助您使用测试数据和测试查询来分析您的表，然后它可以为您建议一个投影。我个人在这种情况下并没有取得很好的结果，但是知道如何使用 DBD 工具应该是任何在 Vertica 培训的人的课程的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-13T09:14:08.573

看来您对视图很熟悉。投影在概念上很像视图，它们都缓存一些东西，但在不同的层次上。简而言之，视图缓存查询语句，而投影缓存查询结果。

**视图缓存查询语句**。您为预定义的查询命名，然后调用它们。视图查询在创建时不会执行。当您使用视图执行查询时，它们不会获得任何性能改进，因为它们只是普通查询。

**Projections 缓存查询结果**。投影查询在您创建它们时执行，结果保存在存储中。当您执行任何可以利用查询结果的查询时，Vertica 将使用这些投影来响应查询，从而提高查询性能。创建投影后，您无需执行任何特殊操作，Vertica 会自动选择投影，如果它可以使查询受益。投影可用于查询，因为查询使用投影的子集列，具有相同的排序顺序等。

像视图一样的投影，您可以选择表列的子集，与其他表执行连接，按特定列排序。但是，不同的投影会占用自己的空间来保存查询结果，创建的投影越多，占用的空间就越多。更新相关源表时，投影将自动更新。更新过程在后台执行，可能需要很长时间，具体取决于查询的复杂性和数据大小。因此，投影更适合多次读取而不是多次写入。从用例的角度来看，与实时 Web 仪表板相比，预测更适合报告。

在实现细节中，Vertica 中的表都是合乎逻辑的。表中的所有数据都存储在每个关联的超级投影中。超级投影包含表中的所有列，默认情况下会自动创建。所有其他投影均来自超级投影。

Vertica 将决定查询将使用哪些投影，但您也可以直接指定投影的名称以强制 Vertica 使用它们：

```
-- List all projections
SELECT projection_name FROM projections;

-- Force to use super projection, _super is the suffix of the super projection
SELECT * FROM FACT_TABLE_super; 
```

您可以使用 explain 语句查看查询计划中使用了哪些投影。这将帮助您提高查询的性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T15:45:55.563

来自 Vertica 文档的*Concepts Guide.pdf*（大约第 23 页）。

> 投影以优化查询执行的格式存储数据。它们类似于物化视图，因为它们将结果集存储在磁盘上，而不是每次在查询中使用它们时都计算它们。

还

> 投影对 SQL 的最终用户是透明的。Vertica 查询优化器会自动选择最佳投影以用于任何查询。

投影以提高查询性能所需要做的就是创建投影。Vertica 将自动选择用于该查询的最佳投影。（注意：可以通过专门查询而不是表来强制特定投影）

我不知道你对预测的理解在哪里，但是关于预测的更具体的问题将允许对具体点进行更详细的阐述。如果您想了解概念的一般视图，我建议您获取并阅读*Concepts Guide.pdf*。[http://my.vertica.com](http://my.vertica.com)

# ios - 使用带有按钮的工具栏作为图像选择器相机覆盖？

> ID：10211800
> 
> 赞同：1
> 
> 时间：2012-04-18T14:41:13.270
> 
> 标签：ios, uiimagepickercontroller, uitoolbar, uistoryboard, camera-overlay

我正在尝试向相机应用程序添加一些基本功能。

该应用程序的工作原理如下：您在应用程序的某处按下相机按钮，相机将激活，然后为您提供一些额外的基本功能，除了闪光灯、切换摄像头、取消和拍照按钮。

点击了相当多的搜索结果后，似乎只有一个新的相机叠加层是可能的。

现在，按照musicalgeometry.com 上的扫描示例，我已经设法在相机屏幕上的某处显示一些文本或按钮。

但是我在这里要做的是添加一个在 IB 中构建的整个视图作为 cameraOverlay。（例如，只是一个带有一些按钮的工具栏，其余为空白）。

我可以为此使用情节提要，还是使用 Nib 文件更容易？或者工具栏是否可以通过编程方式添加到 UIView 以便它可以用作 cameraOverlay？

我认为后者（以编程方式）是最直接的，但我无法找到任何可能的解决方案的示例，所以欢迎任何事情。

这是示例中的基本覆盖代码：

```
- (void) viewDidAppear:(BOOL)animated {
    OverlayView *overlay = 
    [[OverlayView alloc] initWithFrame:CGRectMake(
    0, 0, SCREEN_WIDTH, SCREEN_HEIGTH)];

    // Create a new image picker instance:
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];

    // Set the image picker source:
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;

    // Hide the controls:
    picker.showsCameraControls = NO;
    picker.navigationBarHidden = YES;

    // Make camera view full screen:
    picker.wantsFullScreenLayout = YES;
    picker.cameraViewTransform = CGAffineTransformScale(picker.cameraViewTransform, 
        CAMERA_TRANSFORM_X, CAMERA_TRANSFORM_Y);

    // Insert the overlay:
    picker.cameraOverlayView = overlay;

    // Show the picker:
    [self presentModalViewController:picker animated:YES];
    [picker release];

    [super viewDidAppear:YES];
} 
```

# asp.net - ASP.net 服务器控制复选框的误区

> ID：10211802
> 
> 赞同：1
> 
> 时间：2012-04-18T14:41:18.607
> 
> 标签：asp.net

我正在尝试将服务器控件用于 asp 复选框：

```
<asp:CheckBox ID="generalInformation"
    ClientIDMode="Static"
    class="SetupChecklist"
    name="generalInformation"
    CssClass="SetupChecklist"
    runat="server" /> 
```

然而，它似乎并没有保留课程，我需要它来做。我错过了什么吗？

以下是它在网页上的呈现方式：

```
<input type="checkbox"
    name="ctl00$ContentPlaceHolder1$generalInformation"
    id="generalInformation"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:42:29.973

啊.......

这就是问题：

`runat="server"`复选框被渲染到`span + input`...

跨度获取类而不是输入....

```
 <span class="SetupChecklist" class="SetupChecklist" name="generalInformation">
<input id="generalInformation" type="checkbox" name="generalInformation" /></span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:45:58.227

您可能想改用该[`CssClass`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)属性：

```
<asp:CheckBox ID="generalInformation"
    ClientIDMode="Static"
    name="generalInformation"
    CssClass="SetupChecklist"
    runat="server" /> 
```

**编辑**：我刚刚看到你已经尝试过了。好的，`CssClass`实际上将类应用于包装复选框的跨度，所以试试这个：

```
generalInformation.InputAttributes("class", "SetupChecklist"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T15:07:36.820

它将呈现如下所示的 HTML。

```
<span class="SetupChecklist" class="SetupChecklist" name="generalInformation">
     <input id="generalInformation" type="checkbox" name="generalInformation" />
</span> 
```

* * *

假设您正在尝试设计输入标签。

现在你的样式表可以像下面的`<input>`标签

```
<style type="text/css">
    .SetupChecklist input
    {
        border:0px;
    }
</style> 
```

原来，是`span tag`在占据`class`信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:46:28.150

删除类属性，只使用 CssClass

# mysql - 哪个会更快....许多插入单值语句或具有许多值的插入语句？

> ID：10211803
> 
> 赞同：1
> 
> 时间：2012-04-18T14:41:21.810
> 
> 标签：mysql, jdbc

以下几种情况下哪个执行速度更快？（需要在我的项目中决定适当的方法）

```
insert into table values (v1, v2, v3); 
```

或者

```
insert into table1 value (v1)
insert into table1 value (v2)
insert into table1 value (v3) 
```

你有什么意见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:43:43.160

不是我的意见；但是从经验来看，在一个查询中做某事而不是在多个查询中完成同一件事总是更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:43:37.730

如果您正确使用批处理，它不应该有很大的不同。然而，第一个会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:46:49.273

由于以下原因，方法 1 会比方法 2 更快

1.Less 网络调用 2.Less Compilation/Parsing/Explain Plan/ in DB

问候阿比

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:47:05.090

我认为你的语法是错误的。如果您尝试通过一次插入来插入多行，则您的查询看起来更像这样：

```
INSERT INTO table1 VALUES (v1), (v2), (v3) 
```

并且使用一个查询执行总是比多个查询（做同样的事情）更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T02:53:36.460

(v1, v2, v3) 版本会更快，但请注意如何在您的驱动程序中最好地做到这一点。在 Java 中，您将使用一个简单的`INSERT INTO table VALUES (?)`PreparedStatement，并使用 addBatch() 将它们组合成一个更大的语句，该语句由 executeBatch() 执行。

请参阅第 3.4 节：http: [//java.sun.com/developer/Books/JDBCTutorial/](http://java.sun.com/developer/Books/JDBCTutorial/)

您还需要`rewriteBatchedStatements`在 Connector/J 驱动程序中启用该属性：http: [//dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html)

`LOAD DATA INFILE`如果这适用于您的应用程序，将会更快。

# java - Java 日历：为什么 UTC 偏移量被反转？

> ID：10211805
> 
> 赞同：6
> 
> 时间：2012-04-18T14:41:28.300
> 
> 标签：java, datetime, timezone

我正在尝试了解时间处理，我偶然发现了 Java 中的一些东西，这让我有些困惑。拿这个示例代码：

```
public static void main(String[] args)
{
    //Calendar set to 12:00 AM of the current day (Eastern Daylight Time)
    Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT-4"));
    cal.set(Calendar.HOUR_OF_DAY, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    /////

    //Calendar set to 12:00 AM of the current day (UTC time)
    Calendar utcCal = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
    utcCal.set(Calendar.HOUR_OF_DAY, 0);
    utcCal.set(Calendar.MINUTE, 0);
    utcCal.set(Calendar.SECOND, 0);
    utcCal.set(Calendar.MILLISECOND, 0);
    /////

    long oneHourMilliseconds = 3600000;
    System.out.println((cal.getTimeInMillis() - utcCal.getTimeInMillis()) / oneHourMilliseconds);
} 
```

我将计算时间的算法可视化为`cal`两种形式中的一种：

1.  计算从Epoch开始的毫秒数，加上offset（加-4）
2.  从 (Epoch + offset) 计算毫秒数。所以从 ( `Epoch - 4 * oneHourMilliseconds`) 开始的毫秒数。

这两种算法都应该产生比 4 小时后的结果`utcCal`，但是运行代码会返回`4`。

有人可以向我解释为什么`cal`尽管设置为比 utcCal 晚 4 小时的时区*，*但最终在*utcCal*`utcCal`后 4 小时获得毫秒值？代码不应该返回吗？*`-4`*

 ** * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T14:49:50.857

这是一段不幸的历史。ID 为“GMT-4”的时区是您所*期望*的“UTC+4”，即它*比*UTC 早 4 小时。

从 tzdb 的 etcetera 文件中：

```
# We use POSIX-style signs in the Zone names and the output abbreviations,
# even though this is the opposite of what many people expect.
# POSIX has positive signs west of Greenwich, but many people expect
# positive signs east of Greenwich.  For example, TZ='Etc/GMT+4' uses
# the abbreviation "GMT+4" and corresponds to 4 hours behind UTC
# (i.e. west of Greenwich) even though many people would expect it to
# mean 4 hours ahead of UTC (i.e. east of Greenwich). 
```

从[这个类似的解释](http://labs.hoffmanlabs.com/node/120)中：

> 如果您可以管理它，请*避免定义和使用 GMT 时区...*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:53:51.893

日历`cal`设置为`2012-04-18 00:00:00`timezone `GMT-4`。

那一刻对应于`2012-04-18 04:00:00`in `UTC`（换句话说，当它是 12 AM 在 timezone `GMT-4`，它是 4 AM in `UTC`）。

日历`utcCal`设置为`2012-04-18 00:00:00`timezone `UTC`。

`2012-04-18 04:00:00`和之间的差`2012-04-18 00:00:00`是 4 小时，所以您会看到 4 被打印出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-28T22:41:44.250*

# drupal - 重置密码 Drupal 7

> ID：10211809
> 
> 赞同：0
> 
> 时间：2012-04-18T14:41:50.367
> 
> 标签：drupal, passwords, reset

是否已经为用户设置了重置密码的页面？例如 /user/ 用于用户注册，/user/x/edit/ 用于编辑您的个人资料，是否有 /user/reset/ 或任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:09:30.247

有：

[http://mysite.com/user/password](http://mysite.com/user/password)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:10:09.673

有“用户/密码”，您可以进入一个页面输入您的电子邮件以接收一次性登录链接。

# c# - 在 C# Tcp 服务器中调试可能孤立的套接字

> ID：10211810
> 
> 赞同：1
> 
> 时间：2012-04-18T14:41:53.753
> 
> 标签：c#, .net, debugging, sockets, tcp

我没有提供我的特定代码，因为它太多了。无论如何，我怀疑我在使用 C# 构建的自定义 Tcp 异步服务器中遇到了孤立的套接字问题。它针对框架 4，并且是生产服务（问题仅出现在生产中）。关于套接字的一般调试，我有两个问题。

1.  如何确定我是否有孤立的套接字？一些性能计数器或类似的？

2.  TcpClient.Close() 立即关闭所有底层流不是真的吗？我看到了相互冲突的帐户，所以我担心由于服务没有明确关闭底层流，这可能是问题的根源（如果确实是孤立的套接字）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:48:54.117

1.  尝试[http://www.nirsoft.net/utils/socket_sniffer.html](http://www.nirsoft.net/utils/socket_sniffer.html)来监控您机器上打开的套接字。
2.  检查`LingerState`您的财产的价值`TcpClient`。此外，.NET`TcpClient.Close()`方法调用最终会导致调用**ws2_32.dll**`shutdown()`中的 WINAPI函数，因此，如果您正在调试，则可以链接到调试库并在调用时放置断点等。**`shutdown()`**

# bash - BASH - 从文本文件中读取多行

> ID：10211811
> 
> 赞同：3
> 
> 时间：2012-04-18T14:41:55.953
> 
> 标签：bash, text, concatenation

我正在尝试读取一个文本文件，比如 file.txt，它包含多行。

说输出`file.txt`是

```
$ cat file.txt
this is line 1

this is line 2

this is line 3 
```

我想将整个输出存储为一个变量，例如`$text`.
当变量`$text`被回显时，预期的输出是：

```
this is line 1 this is line 2 this is line 3 
```

我的代码如下

```
while read line
do
    test="${LINE}"
done < file.txt

echo $test 
```

我得到的输出总是只有最后一行。有没有办法将 file.txt 中的多行连接为一个长字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:48:55.247

您可以将`\n`（换行符）翻译为`（空格）：`

 ````
$ text=$(tr '\n' ' ' <file.txt)
$ echo $text
this is line 1 this is line 2 this is line 3 
```

如果行以 结尾`\r\n`，您可以这样做：

```
$ text=$(tr -d '\r' <file.txt | tr '\n' ' ') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:06:34.190

另一个：

```
line=$(< file.txt)
line=${line//$'\n'/ } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T18:53:03.430

```
test=$(cat file.txt | xargs)
echo $test 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T14:49:00.333

您必须将下一行的内容附加到您的变量中：

```
while read line
do
    test="${test} ${LINE}"
done < file.txt

echo $test 
```

响应。更简单的是，您可以一次将完整文件读入变量：

```
test=$(cat file.txt) 
```

分别

```
test=$(tr "\n" " " < file.txt) 
```

如果您想保留换行符，它会很简单：

```
test=<file.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T14:52:51.757

我相信这是最简单的方法：

```
text=$(echo $(cat FILE)) 
```

但它不会在单词之间保留多个空格/制表符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T14:55:26.587

使用数组

```
#!/bin/bash

while read line
do
    a=( "${a[@]}" "$line" )
done < file.txt

echo -n "${a[@]}" 
```

输出：

```
this is line 1  this is line 2  this is line 3 
```

参见例如[关于数组的 tldp 部分](http://tldp.org/LDP/abs/html/arrays.html)`

# jquery - jQuery removeClass 方法

> ID：10211812
> 
> 赞同：1
> 
> 时间：2012-04-18T14:42:00.997
> 
> 标签：jquery, jquery-selectors

我的主 div 的 ID 为`mvrContentFormDiv`. 在那里，有 4 个子 div 的 ID 为`reportFileURL`, `UploadReportDate`, `reportTitle`& `reportImageURL`。

这些中的每一个都有一个类`error`。现在我正在使用以下代码单独删除该类，但想`removeClass`从父 DIV 中使用。

```
$("#reportFileURL").removeClass("error");
$("#uploadReportDate").removeClass("error");
$("#reportTitle").removeClass("error");
$("#reportImageURL").removeClass("error"); 
```

谁能解释我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:43:28.027

您可以使用[`children()`](http://api.jquery.com/children)方法或[子选择器](http://api.jquery.com/child-selector)从以下选项中选择它们`mvrContentFormDiv`：

```
$('#mvrContentFormDiv > .error').removeClass('error'); 
```

或者

```
$('#mvrContentFormDiv').children('.error').removeClass('error'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:43:43.737

除非您在文档中的其他地方有该类的其他元素必须保持不变，否则您可以简单地做

```
$('.error').removeClass("error"); 
```

除此以外

```
$('<parentelement> .error').removeClass("error"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T14:43:24.017

尝试这样的事情：

```
$("#mvrContentFormDiv div").removeClass("error"); 
```

成为“mvrContentFormDiv”您的父 ID

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T14:44:21.440

```
$("#mvrContentFormDiv .error").removeClass("error"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T14:45:15.920

试试这个：

```
$("#mvrContentFormDiv").children().removeClass("error"); 
```

# regex - 来自 IF 语句正则表达式匹配的值 (Perl)

> ID：10211814
> 
> 赞同：2
> 
> 时间：2012-04-18T14:42:12.890
> 
> 标签：regex, perl, if-statement

我目前正在通过 REGEX 行匹配表行从文件中的表中提取值。

```
foreach my $line (split("\n", $file)) {
    if ($line =~ /^(\S+)\s*(\S+)\s*(\S+)$/) {
        my ($val1, $val2, $val3) = ($1, $2, $3);

        # $val's used here
    }
} 
```

为了代码的清晰起见，我特意分配了 val。我的一些表行包含 10+ vals（又名列） - 有没有更有效的方法来分配 vals 而不是... = ($1, $2, ..., $n)？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T14:48:56.053

列表上下文中的匹配产生捕获组的列表。如果失败，则返回一个空列表，这是错误的。因此，您可以

```
if( my ( $val1, $val2, $val3 ) = $line =~ m/^(\S+)\s*(\S+)\s*(\S+)$/ ) {
   ...
} 
```

但是，此代码中明显存在许多危险信号。该正则表达式捕获看起来非常类似于拆分：

```
if( my ( $val2, $val2, $val3 ) = split ' ', $line ) {
   ...
} 
```

其次，为什么用换行符分割 $file；如果您正在读取文件的内容，更好的是一次实际读取一行：

```
while( my $line = <$fh> ) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:16:57.077

我假设这不是您的实际代码，因为如果是这样，它将不起作用：

```
foreach my $line (split("\n", $file)) {
    if ($line =~ /^(\S+)\s*(\S+)\s*(\S+)$/) {
        my ($val1, $val2, $val3) = ($1, $2, $3);
    }
# all the $valX variables are now out of scope
} 
```

您还应该知道，它`\s*`也会匹配空字符串，并可能导致细微的错误。例如：

```
"a bug" =~ /^(\S+)\s*(\S+)\s*(\S+)$/;
# the captures are now: $1 = "a"; $2 = "bu"; $3 = "g" 
```

即使这`\S+`是贪婪的事实，锚点`^ ... $`也会强制正则表达式适合，因此允许空字符串拆分单词。

如果您的意图是捕获由空格分隔的所有单词，则使用`split`是您的最佳选择，正如其他人已经提到的那样。

```
open my $fh, "<", "file.txt" or die $!;
my @stored;
while (<$fh>) {
    my @vals = split;
    push(@stored, \@vals) if @vals; # ignore empty values
} 
```

这会将任何捕获的值存储到二维数组中。直接使用文件句柄并逐行读取是首选方法，除非出于某种原因您实际上需要将整个文件保存在内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:52:28.010

看起来您只是在使用带有空格分隔符的表。您可以使用[split](http://perldoc.perl.org/functions/split.html)功能：

`@valuearray = split(" ", $line)`

然后将元素处理为：

`@valuearray[0] ,@valuearray[1]`ETC..

# c# - 正则表达式 - 匹配后只允许空格或没有空格

> ID：10211815
> 
> 赞同：21
> 
> 时间：2012-04-18T14:42:13.063
> 
> 标签：c#, regex

嗨，我对正则表达式几乎是新手......所以，也许我的问题很简单，但我找不到解决方案！

我正在编写一个正则表达式模式，它查看用户的写作并用另一种颜色绘制所建立的匹配项。例如，如果用户写这样的东西，我想用另一种颜色绘画：

```
foo() 
```

问题是我不想画如果用户在那之后写别的东西，我的意思是如果用户只写

```
"foo()" (or "foo() ") 
```

那么没关系，我想画它，但是如果用户写

```
"foo()d" 
```

我不想画那个，因为现在为我写得很好。

我已经编写了与“foo()”匹配的正则表达式模式（或者中间也有一个点，比如“foo.foo()”），但我正面临这个问题。我需要在我的模式中添加一些东西，只允许一个空格，或者什么都没有（如果用户在“）”之后写了其他东西我不想匹配它。）这是我的模式：

```
[a-z]*\.?[a-z]*\(("[^"\r\n]*"|[-]?\b\d+[\.]?\d*\b)?\) 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-18T15:10:00.463

David Brabant 很接近，但我认为您实际上想尝试使用结束正则表达式`(?!\S)`- 这意味着您将匹配任何后面没有非空白字符的内容。如果您只想匹配空格而不是空格，请使用`(?![^ ])`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T15:03:49.927

使用负面展望：

```
(\w+)(\.*)(\(\))+(\s)*(?!.) 
```

在上面的正则表达式中对您来说重要的部分是： (\s)*(?!.)

(\s)* : 后跟 0 个或多个空格 (?!.) : 没有其他字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:57:37.727

```
[a-z]*\.?[a-z]*\(("[^"\r\n]*"|[-]?\b\d+[\.]?\d*\b)?\)[ ]? 
```

添加一个`[ ]?`应该做到这一点。`?`用于`1`or `0`，`[ ]`只会匹配空格。

此外，`[\s]?`适用于所有类型的空白（包括选项卡）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:00:56.270

根据我的正则表达式测试器，这似乎符合您的要求：

```
[a-z]*\.?[a-z]*\(("[^"\r\n]*"|[-]?\b\d+[\.]?\d*\b)?\)([ ]?)(?!.) 
```

如果要允许多个空间，请使用以下命令：

```
[a-z]*\.?[a-z]*\(("[^"\r\n]*"|[-]?\b\d+[\.]?\d*\b)?\)([ ]*)(?!.) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T15:07:14.740

你可以尝试添加：

\s*% ?

\s* : 零个或多个空格

% 表示：字符串结束

# php - Prestashop 类别产品关联表允许重复？

> ID：10211816
> 
> 赞同：2
> 
> 时间：2012-04-18T14:42:14.360
> 
> 标签：php, mysql, prestashop

PrestaShop 中的表`ps_category_product`具有以下结构

```
 # Obtained using SHOW CREATE TABLE `ps_category_product`
 CREATE TABLE `ps_category_product` (
   `id_category` int(10) unsigned NOT NULL,
   `id_product` int(10) unsigned NOT NULL,
   `position` int(10) unsigned NOT NULL DEFAULT '0',
   KEY `category_product_index` (`id_category`,`id_product`),
   KEY `id_product` (`id_product`)
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

对我来说不是很清楚，但似乎字段`id_category`和`id_product`表之间应该是唯一的，但由于某种原因 MySQL 允许我插入重复项：

```
mysql> select * from ps_category_product limit 10;
+-------------+------------+----------+
| id_category | id_product | position |
+-------------+------------+----------+
|          11 |          1 |        1 |
|          11 |          2 |        1 |
|          11 |          3 |        1 |
|          11 |          4 |        1 |
|          11 |          5 |        1 |
|          11 |          6 |        1 |
|          11 |          7 |        1 |
|          11 |          8 |        1 |
|          11 |          9 |        1 |
|          11 |         10 |        1 |
+-------------+------------+----------+
10 rows in set (0.00 sec)

mysql> INSERT INTO `ps_category_product` VALUES(11, 1, 1);
Query OK, 1 row affected (0.05 sec) 
```

我怎样才能防止这种情况发生？

## 稍后编辑

这是prestashop中的一个错误。看看[http://forge.prestashop.com/browse/PSCFI-4397](http://forge.prestashop.com/browse/PSCFI-4397)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:29:43.840

除非您指定或，否则指定`KEY`不会强制执行唯一约束。`UNIQUE KEY``PRIMARY KEY`

尝试使用以下 DDL 重新创建表：

```
CREATE TABLE `ps_category_product` (
   `id_category` int(10) unsigned NOT NULL,
   `id_product` int(10) unsigned NOT NULL,
   `position` int(10) unsigned NOT NULL DEFAULT '0',
   UNIQUE KEY `category_product_index` (`id_category`,`id_product`),
   KEY `id_product` (`id_product`)
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

这应该够了吧。

查看[MySQL CREATE TABLE 语法](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T22:34:28.523

约束应该通过管理界面和底层对象代码施加，所以你不应该有重复的情况，尽管编写一个 cron 作业来删除确实发生的任何事情很容易。

您可以强制执行此唯一操作，但这并不能解决为什么会发生这种情况的根本问题……老实说，我不明白您要解决的问题是什么？如果您自己导入产品，那么您应该使用对象接口而不是直接写入这些表，否则，是的 - 可能会发生奇怪的事情。

# java - 运行外部“java myprog < input.txt > output.txt”的 Java 程序

> ID：10211821
> 
> 赞同：5
> 
> 时间：2012-04-18T14:42:22.580
> 
> 标签：java, user-input, processbuilder, external-process

我想编写一个运行外部“java myprog < input.txt > output.txt”命令的Java 程序。最终目标是在两个不同的程序上运行此命令，并比较它们各自输出文件的输出相似性。

我想我已经阅读了几乎所有关于使用 ProcessBuilder 运行外部程序的相关文章，以及关于在该外部程序中处理用户输入的少数条目，但我仍然无法让事情正常工作。根据我的阅读，我认为最好的方法是不运行上面的确切命令，而是读取 input.txt 文件并将其逐字节输入 Process 对象，然后收集输出并将其写入输出.txt ...我对其他选项100％开放。

我根据我的阅读整理了下面的代码。似乎正确地将 input.txt 中的输入输入 myprog，但是当我尝试将外部程序的输出打印到控制台以进行验证时，程序挂起在 myprog 中预期（意外）用户输入的位置。

无论有无 redirectErrorStream(true) 行，我都会遇到同样的问题。

我真的希望这是在 Java 中，因为我计划与我将比较其程序输出的人共享源代码，他们主要只熟悉 Java。

```
import java.io.*;
import java.util.*;

public class test7 {

    public static void main(String args[]) {

        try {
            // WANT: "java myprog < input.txt > output.txt"
            String inputFile = "input.txt";
            String outputFile = "output.txt";

            ProcessBuilder pb = new ProcessBuilder("java","myprog");
            pb.redirectErrorStream(true); // merge stdout, stderr of process
            Process p = pb.start();

            // write input to the running program
            OutputStream pos = p.getOutputStream();
            InputStream fis = new FileInputStream(inputFile);
            int read = 0;
            while ( (read = fis.read()) != -1) {
                pos.write(read);
            }
            fis.close();

            // get output of running program
            InputStreamReader isr = new  InputStreamReader(p.getInputStream());
            BufferedReader br = new BufferedReader(isr);

            // HANGS HERE WHEN USER INPUT REQUIRED
            String lineRead;
            while ((lineRead = br.readLine()) != null) {
                System.out.println(lineRead);
            }

        }
        catch (IOException e) {
            e.printStackTrace(); 
        }
    } // end main

} 
```

这是 myprog.java 的内容：

```
import java.io.*;

public class myprog {

    public static void main(String args[]) throws IOException {

        System.out.println("Hello world!");
        System.out.println("Enter something:");

        BufferedReader cin = new BufferedReader(new InputStreamReader(System.in));

        // the readLine() command causes ProcessBuilder to hang
        cin.readLine();
    }   
} 
```

而input.txt文件只是

```
p 
```

output.txt 文件应该是

```
Hello world!
Enter something: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T16:39:40.450

我想知道您的问题是否部分与不使用单独的线程来读取输入和写入输出有关。例如：

```
 public static void main(String args[]) {

      try {
         // WANT: "java myprog < input.txt > output.txt"
         String inputFile = "input.txt";
         String outputFile = "output.txt";

         // my ProcessBuilder Strings will be different from yours
         ProcessBuilder pb = new ProcessBuilder("java", "-cp", ".;bin;",
               "yr12.m04.a.MyProg");
         pb.redirectErrorStream(true); 
         Process p = pb.start();

         final OutputStream pos = p.getOutputStream();
         final PrintWriter pw = new PrintWriter(pos);
         final InputStream fis = new FileInputStream(inputFile);
         final BufferedReader fileBr = new BufferedReader(new InputStreamReader(fis));

         InputStreamReader isr = new InputStreamReader(p.getInputStream());
         final BufferedReader br = new BufferedReader(isr);

         new Thread(new Runnable() {
            public void run() {
               String lineRead;
               try {
                  while ((lineRead = br.readLine()) != null) {
                     System.out.println(lineRead);
                  }
               } catch (IOException e) {
                  e.printStackTrace();
               } finally {
                  if (br != null) {
                     try {
                        br.close();
                     } catch (IOException e) {
                        e.printStackTrace();
                     }
                  }
               }
            }
         }).start();

         new Thread(new Runnable() {
            public void run() {
               try {
                  String lineRead;
                  while ((lineRead = fileBr.readLine()) != null) {
                     pw.println(lineRead);
                  }
               } catch (IOException e) {
                  e.printStackTrace();
               } finally {
                  if (pw != null) {
                     pw.close();
                  }
                  if (fileBr != null) {
                     try {
                        fileBr.close();
                     } catch (IOException e) {
                        e.printStackTrace();
                     }
                  }
               }
            }
         }).start();

      } catch (IOException e) {
         e.printStackTrace();
      }
   } // end main 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:50:19.210

您是否考虑过使用 Runtime.getRuntime().exec() 代替？

```
Process proc = Runtime.getRuntime().exec("java myprog "+inputFile+" "+outputFile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T16:07:07.287

您可以包含“myprog”的 jar 并自己调用 main() 方法。更重要的是，如果 myprog 在您的域中，您可以完全摆脱 main 方法。

# jakarta-ee - 如何找到 netbeans RSVP 教程文件

> ID：10211826
> 
> 赞同：6
> 
> 时间：2012-04-18T14:42:33.313
> 
> 标签：jakarta-ee, rest, netbeans, jax-rs

我只是在学习 JAX-RS，并想研究有关此主题的 JAVA-EE 示例。我指的是这个链接[http://docs.oracle.com/javaee/6/tutorial/doc/gipzz.html#gjvbc](http://docs.oracle.com/javaee/6/tutorial/doc/gipzz.html#gjvbc)。它说示例代码在

```
tut-install/examples/jaxrs/rsvp/ 
```

不幸的是，我不知道从哪里下载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:11:41.087

你可以在 [这里获取信息。](http://docs.oracle.com/javaee/6/tutorial/doc/gexaj.html#gexba)我猜你需要下载 Glassfish[服务器](http://www.oracle.com/technetwork/java/javaee/downloads/ogs-3-1-1-downloads-439803.html)。

# java - 不确定如何存储数据

> ID：10211829
> 
> 赞同：0
> 
> 时间：2012-04-18T14:42:46.327
> 
> 标签：java, collections

我必须存储来自 UDP 数据包的数据，例如名称、地址和端口号。我最初使用 3 个数组列表来执行此操作，但这似乎太麻烦了。相反，我想使用 Hashmap 作为键值列，但这意味着名称将包含在它们自己的哈希映射或数组列表中。

有没有一种很好、有效的方法将所有这些数据存储在一个集合/容器/数组中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:46:33.753

使用属性名称、地址和端口号创建一个 POJO。将它们全部添加到同一个集合中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T14:48:17.183

尝试使用这样的东西：

```
public class UdpData {
private String name;
private String address;
private int port;
public UdpData(String name, String address, int port) {
    super();
    this.name = name;
    this.address = address;
    this.port = port;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public int getPort() {
    return port;
}
public void setPort(int port) {
    this.port = port;
}
} 
```

然后使用：

```
List<UdpData> AllData; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:49:03.620

如果您有来自数据包的信息并且它是结构化的，请使用自定义对象：MyPacket。拥有您需要的所有属性。

如果您需要从唯一键中检索该对象，请使用 Map。以地图为例。然后，您可以使用其标识密钥（例如用户代码或其他）保存/检索每个 MyPacket。

如果您需要一个复杂的密钥，您应该使用自己的 Pojo 作为密钥：Map。然后为该 Key 类正确实现 hashCode 和 equals。

如果您需要一些顺序访问，您可以使用 TreeMap 作为保存顺序的实现。但是您的密钥应该由 Comparable 提供，或者您必须提供一个 Comparator。

如果您有一系列项目，请考虑使用列表。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:44:15.080

您可以使用 a `List`than contains a `Map`。像这样：

```
List<Map<String,String>> container = new ArrayList<Map<String,String>>();
...
Map<String,String> currentEntry = new HashMap<String,String>();
currentEntry.put("name", name);
...
container.add(currentEntry); 
```

# java - Android：具有重叠行的垂直 ListView

> ID：10211835
> 
> 赞同：14
> 
> 时间：2012-04-18T14:43:01.087
> 
> 标签：java, android, listview, carousel

如何在 android 1.6 或 2 中创建这样的列表视图（因为 renderscript，它仅适用于 3 或更高版本，但我需要 list 才能在几乎所有 android 上工作）：

![在此处输入图像描述](../Images/e9ee86d030a44a668769698c617e54e8.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T10:15:33.897

我`Camera.setTranslate(x, 0, z)`在 drawChild 中使用过，其中更改了旋转虚拟化的 x 位置和重叠的 z 位置。然后有重叠的问题，因为最后一个项目在顶部，第一个在底层。因此，在`onCreate()`调用`this.setChildrenDrawingOrderEnabled(true)`和覆盖的方法`protected int getChildDrawingOrder (int childCount, int i) {}`中，我可以更改中间行和后面行的顺序。这个想法是由 Renard 提出的，他在我的其他帖子中向我提出了关于[这里](https://stackoverflow.com/questions/10025270/android-vertical-3d-listview)几乎相同的事情的建议。

我的 getChildDrawingOrder(int, int) 实现需要重叠：

```
@Override
protected int getChildDrawingOrder (int childCount, int i) {
    int centerChild = 0;
    //find center row
    if ((childCount % 2) == 0) { //even childCount number
        centerChild = childCount / 2; // if childCount 8 (actualy 0 - 7), then 4 and 4-1 = 3 is in centre.      
        int otherCenterChild = centerChild - 1;
        //Which more in center?
        View child = this.getChildAt(centerChild);
        final int top = child.getTop();
        final int bottom = child.getBottom();
        //if this row goes through center then this
        final int absParentCenterY = getTop() + getHeight() / 2;
        //Log.i("even", i + " from " + (childCount - 1) + ", while centerChild = " + centerChild);
        if ((top < absParentCenterY) && (bottom > absParentCenterY)) {
            //this child is in center line, so it is last
            //centerChild is in center, no need to change
        } else {
            centerChild = otherCenterChild;
        }
    }
    else {//not even - done
        centerChild = childCount / 2;
        //Log.i("not even", i + " from " + (childCount - 1) + ", while centerChild = " + centerChild);
    }

    int rez = i;
    //find drawIndex by centerChild
    if (i > centerChild) {
        //below center
        rez = (childCount - 1) - i + centerChild;
    } else if (i == centerChild) {
        //center row
        //draw it last
        rez = childCount - 1;
    } else {
        //above center - draw as always
        // i < centerChild
        rez = i;
    }
    //Log.i("return", "" + rez);
    return rez;

} 
```

我希望这篇文章对将来的人有所帮助

屏幕截图实际上与我在问题中提到的几乎相同。我使用了 alpha，所以叠加的项目有点透明：

![在此处输入图像描述](../Images/eb2982ab52b8867f9320372af26d87fb.png)

# ios - 还有一个原因：'+entityForName: 找不到实体名称的 NSManagedObjectModel

> ID：10211839
> 
> 赞同：1
> 
> 时间：2012-04-18T14:43:14.330
> 
> 标签：ios, core-data, nsmanagedobjectcontext, detailsview, master-detail

我有以下错误：

```
2012-04-18 10:15:49.585 FoodXJournal[13931:fb03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel for entity name 'CommodityTypes'' 
```

我已经阅读了这个主题的大部分其他问题，并做了一些检查。

我有一个包含静态表视图的详细视图控制器。表格视图的一个单元格标记为“删除”，并链接到名为“deleteCT”的segue。当点击此单元格时，我希望应用程序删除`self.detailItem`并连接到主视图控制器。这是我的方法。所有 NSLog 行都用于调试。

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"deleteCT"]) {
        if (![self.detailItem.myCommodities count]) {
            NSLog(@"Testing");
            NSLog(@"myCommodities is empty:%@", [self.detailItem.myCommodities count]);
            NSLog(@"self.detailItem HAS a context:%@", [self.detailItem managedObjectContext]);
            NSLog(@"self.detailItem is of CommodityTypes:%@", [[self.detailItem entity] name]);
            NSLog(@"self.detailItem has a managed object model:%@", [[self.detailItem entity] managedObjectModel]);
            [[self.detailItem managedObjectContext] deleteObject:self.detailItem];
        }
    }
} 
```

这是日志。我确实喜欢这种方法，

```
2012-04-18 10:15:49.544 FoodXJournal[13931:fb03] Testing 
```

我符合删除条件，

```
2012-04-18 10:15:49.544 FoodXJournal[13931:fb03] myCommodities is empty:(null) 
```

错误消息说`'+entityForName: could not locate an NSManagedObjectModel for entity name 'CommodityTypes'`，但`self.detailItem`有一个上下文。

```
2012-04-18 10:15:49.545 FoodXJournal[13931:fb03] self.detailItem HAS a context:<NSManagedObjectContext: 0x6d7e740> 
```

是的，`self.detailItem`我正在考虑的实体类型是：

```
2012-04-18 10:15:49.546 FoodXJournal[13931:fb03] self.detailItem is of CommodityTypes:CommodityTypes 
```

而且，是的，该实体类型 ( `NSLog(@"self.detailItem is of CommodityTypes:%@", [[self.detailItem entity] name]);`) 具有托管对象模型：

托管对象模型描述很长，所以我在这里只展示它的第一部分：

```
2012-04-18 10:15:49.565 FoodXJournal[13931:fb03] self.detailItem has a managed object model:(<NSManagedObjectModel: 0x6d73250>) isEditable 0, entities {
Accounts = "(<NSEntityDescription: 0x6d71120>) name Accounts, managedObjectClassName Accounts, renamingIdentifier Accounts, isAbstract 0, superentity name Grandparent, properties {\n    \"account_1\" = \"(<NSAttributeDescription: 0x6d6e9d0>), name account_1, isOptional 1, isTransient 0, entity Accounts, 
```

向下滚动：

```
CommodityTypes = "(<NSEntityDescription: 0x6d71240>) name CommodityTypes, managedObjectClassName CommodityTypes, renamingIdentifier CommodityTypes, isAbstract 0, superentity name Grandparent, properties {\n    myCommodities = \"(<NSRelationshipDescription: 0x6d701f0>), name myCommodities, isOptional 1, isTransient 0, entity CommodityTypes, 
```

`CommodityTypes`在托管对象模型中定义。

那为什么会`[[self.detailItem managedObjectContext] deleteObject:self.detailItem];`崩溃？！？

是否有某些原因我无法`self.detailItem`在 prepareForSegue 中删除？我是否需要为单元格或标签分配一个操作，然后以编程方式调用 segue？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T22:47:19.290

尤里卡！谢谢jrturton！它不是来自创建新托管对象的方法，但你的想法确实让我回去并在那条线之前和之后使用一堆断点。我将其缩小到`NSEntityDescription *entity = [NSEntityDescription entityForName:@"CommodityTypes" inManagedObjectContext:self.managedObjectContext];`主表视图中。在启动时，应用程序委托设置一个托管对象上下文并将其传递给主视图。我忘记了，当我从详细视图切换到主视图的下一个实例时，我不一定要回到原始实例。我必须将托管对象上下文传递给下一个视图控制器。

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"deleteCT"]) {
        if (![self.detailItem.myCommodities count]) {

            CommodityTypes * thisItem = self.detailItem;
            NSManagedObjectContext * thisContext = [thisItem managedObjectContext];
            FoodXCommodityTypesMasterViewController * nextView = [segue destinationViewController];

            [thisContext deleteObject:thisItem];

            nextView.managedObjectContext = thisContext;

        }
    }
} 
```

这现在有效。

# mysql - MYSQL JOINS 与 3 个表

> ID：10211846
> 
> 赞同：0
> 
> 时间：2012-04-18T14:43:30.560
> 
> 标签：mysql

表 A、B、C

如何进行连接这三个表的查询。条件是`Table A`必须有记录。

我试过这样

```
select * from a
left join b on a.article_id = b.article_id
left join c on b.file_id = c.submission_id
where c.user_id = 6; 
```

`Table C`在缺少记录的情况下，我的查询不起作用。在这种情况下，连接不适用于三个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:46:21.137

外部表上的任何标准都必须是相关的 ON 子句，而不是 WHERE 子句。

例如：

```
select * from a
left join b on a.article_id = b.article_id
left join c on b.file_id = c.submission_id and c.user_id = 6; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:47:24.063

如果使用`LEFT JOIN`，则即使表中没有对应的记录，也会选择来自`a`和的记录。改用：`b``c``INNER JOIN`

```
SELECT * FROM a
INNER JOIN b ON a.article_id = b.article_id
INNER JOIN c ON b.file_id = c.submission_id
WHERE c.user_id = 6; 
```

# php - 从 PHP（使用 ZEND）执行 INSERTS 是否有可能被延迟？

> ID：10211850
> 
> 赞同：4
> 
> 时间：2012-04-18T14:43:40.707
> 
> 标签：php, mysql, zend-framework, caching, zend-db

当我有这样的循环时：

```
foreach(...) {
  $r1 = $zend_db->fetchRow("SELECT ... ");
  $zend_table->insert($data_array, $where);
} 
```

...运行几千次。是否有可能，`$r1`不包含在前一个循环中插入的记录？

在[http://dev.mysql.com/doc/refman/5.1/en/query-cache.html](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)他们写道“查询缓存不会返回陈旧的数据。当表被修改时，查询缓存中的任何相关条目都会被刷新。” 但也许 ZEND 会为 SELECT 或 INSERT 做一些意想不到的缓存？

我需要使用事务来解决这个问题吗？

我遇到了双重记录的问题，并且没有其他解释它们来自哪里。但我无法重现它，因为它发生在两个月前，导入了不再存在的 csv 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:28:39.307

正如 draw010 在评论 Zend_Db 中所说，除非您自己实现它，否则它不会缓存。为了下次确定问题，请尝试这样的事情

```
 try {
          foreach(...) {
      $r1 = $zend_db->fetchRow("SELECT ... ");
      $zend_table->insert($data_array, $where);
                       }
        } catch(Zend_Db_Exception $e)
            {

                $logger->log($e->getMessage(),Zend_Log::CRIT); //$logger is instance of Zend_Log
            } 
```

# asp.net - 无法加载默认 aspx 网页

> ID：10211854
> 
> 赞同：1
> 
> 时间：2012-04-18T14:43:45.333
> 
> 标签：asp.net, visual-studio-2010, c#-4.0, iis-7

我已经在一个名为的目录中发布了我的网站，`samp`我目前正在尝试将它托管在 IIS 上。

但是我有很多`aspx`页面。例如，`members.aspx`、`default.aspx`、`authenticate.aspx`等。

但我不确定`default.aspx`当用户连接到`localhost`端口 80 时如何加载。

我是新手，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:26:55.640

您可以通过`Web.config`ASP.net 网站中的文件启用它。

```
<configuration>
 <system.webServer>
  <defaultDocument enabled="true">
     <files>
        <add value="Default.aspx" />
     </files>
  </defaultDocument>
 </system.webServer>
</configuration> 
```

**注意：如果您使用****IISExpress** （即在 Visual Studio 2015 中）进行调试，这一点尤其重要，因为您没有直接配置默认文件的选项（如在 IIS 中 - 请参阅[freefaller 的答案](https://stackoverflow.com/a/10211972/1016343)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:49:01.987

在 IIS7 中单击相关网站（在左侧树的“站点”区域下），然后在 IIS 图标组中找到“默认文档”。双击图标进入该部分，然后单击“操作”面板中的“添加...”，然后在对话框中添加“default.aspx”。

然后，您可以通过单击新条目并使用“操作”面板中的“上移”选项将其移动到列表顶部来设置优先顺序。

这会将默认文档分配给相关网站 - 如果您希望将其添加到 IIS7 上的所有网站，则对顶级图标（“起始页”下的那个）执行相同的操作

# javascript - 谷歌地图航点不起作用

> ID：10211857
> 
> 赞同：0
> 
> 时间：2012-04-18T14:43:50.867
> 
> 标签：javascript, google-maps

所以，我不知道这段代码有什么问题，需要帮助。

我希望用户输入开始、航点和结束地址。

```
var start = document.getElementById('start').value;

var way = document.getElementById('way').value;

var end = document.getElementById('end').value;

var request = 
     {

       origin: start,

       destination: end,

       waypoints: way,

       travelMode: google.maps.DirectionsTravelMode.DRIVING

    }; 
```

..................................................... ......................

```
 <strong>Start:</strong>

  <input id="start" type="text" ></input>

  <strong>Waypoint:</strong>

  <input id="way" type="text" ></input>

  <strong>End:</strong>

  <input id="end" type="text" ></input> 
```

似乎不明白我在哪里弄错了，并提前感谢您的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:21:26.630

`waypoints`应该是每个[文档的数组](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRequest)

如果您只有一个，请使用

```
waypoints: [way], 
```

传递单个元素的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:58:47.650

Waypoints 是[DirectionsWaypoint](https://developers.google.com/maps/documentation/javascript/reference#DirectionsWaypoint)对象的数组。这些对象包含一个 LatLng 对象或地址字符串和一个布尔中途停留属性。

试试这个：

```
var waypoints = [];

waypoints.push({
     location:document.getElementById('way').value,
     stopover:true // true by default. Technically this property is optional.
}); 
```

这是一个使用航点的[Google 示例应用程序。](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-waypoints)

# c# - 在 XNA 中向表单添加资源

> ID：10211860
> 
> 赞同：0
> 
> 时间：2012-04-18T14:43:57.513
> 
> 标签：c#, winforms, xna

我是 XNA 的新手，但我设法开发了一个吃豆人游戏。现在我正在尝试向游戏中添加一些表单以用作登录屏幕，但由于是 XNA 项目，我无法将图片添加到表单中，请帮助？

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:52:46.853

XNA 不像 WinForms 那样工作，它不是一个 GUI 编辑器。就像您说的，您不能将 Windows 控件添加到 XNA 应用程序（除非您使用解决方法，但这对于登录屏幕不是必需的）

您需要使用游戏状态来根据您当前所在的菜单确定要绘制/更新的内容。APP Hub 有一个[示例](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)。

# php - 根据 json 响应选择单选按钮

> ID：10211864
> 
> 赞同：3
> 
> 时间：2012-04-18T14:44:06.333
> 
> 标签：php, javascript, jquery, ajax, json

我能否获得一些想法或示例，说明如何根据从数据库加载的数据填充单选按钮的选中状态？

例如，我从`SELECT`如下查询生成一个数组：

```
array(
[0] => array(    
    ['note_id'] => 1
    ['value'] => 'no'
  )
[1] => array(
    ['note_id'] => 4
    ['value'] => 'yes'
  )
[2] => array(   
    ['note_id'] => 5
    ['value'] => 'yes'
  )
) 
```

复选框组如下所示：

```
<input type="radio" name="1" value="yes">
<input type="radio" name="1" value="no"> 
<input type="radio" name="1" value="done">

<input type="radio" name="2" value="yes">
<input type="radio" name="2" value="no"> 
<input type="radio" name="2" value="done"> 
```

现在使用`json_encode`我将结果的数据数组放入：

```
[{"note_id":"1","value":"no"},{"note_id":"4","value":"yes"},{"note_id":"5","value":"yes"}] 
```

我正在通过 ajax 将这些结果传回......类似的东西？：

```
$j.ajax({
    url: readurl,
    type: "GET",
    data: 'sku=' + thisSku,
    dataType: "json",
    success: function (data){
        // ? now what
    }       
}); 
```

有人可以帮助我了解我现在如何利用 json 数据来选择合适的选择吗？我将如何创建运行检查是否`note_id`与输入`[name]`属性匹配的循环，如果是，则检查具有适当值的按钮？json 甚至是处理这个问题的最好方法吗？我应该使用`.getJSON()`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T14:56:11.297

在成功回调中，您可以简单地迭代`data`which should be `[{"note_id":"1","value":"no"},{"note_id":"4","value":"yes"},{"note_id":"5","value":"yes"}]`。

[**演示**](http://jsfiddle.net/skram/7hp64/1/)

```
$.each (data, function (i, obj) {
    $(':radio[name=' + obj.note_id + '][value=' + obj.value + ']').prop('checked', true);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:53:48.397

```
var data = {"nodes": [{"note_id":"1","value":"no"},{"note_id":"4","value":"yes"},{"note_id":"5","value":"yes"}] }

$('input:radio').attr('checked','')
$.each(data.nodes,function(a,b){
  $("input[name="+b.note_id+"][value="+b.value+"]:radio").attr('checked','checked')

} ) 
```

也许这样的东西对你有用......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T14:53:53.300

在 json 对象上创建一个 $.each() 循环，然后将 note_id 与 name 值进行比较并添加一个属性

```
var notas = [{"note_id":"1","value":"no"},{"note_id":"4","value":"yes"},{"note_id":"5","value":"yes"}];

$.each(notas,function(i, v){
    $('input[type=radio][name=' + this.note_id + ']').prop('checked','true');

});
​ 
```

[http://jsfiddle.net/chepe263/wLDHk/](http://jsfiddle.net/chepe263/wLDHk/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T14:58:17.140

尝试这样的事情：

```
$j.ajax({
    url: readurl,
    type: "GET",
    data: 'sku=' + thisSku,
    dataType: "json",
    success: function (data){
        $.each(data, function(i, item) {
            alert("note_id: " + item.note_id + ", value: " + item.value);
        });
    }       
}); 
```

您必须用您的代码替换 de alerts。

伟大的。

# c# - Asp.net Mvc - 添加到列表并立即保存

> ID：10211868
> 
> 赞同：0
> 
> 时间：2012-04-18T14:44:13.343
> 
> 标签：c#, jquery, asp.net-mvc-3

我有一个联系信息并希望用户添加一些联系人然后保存它们。这意味着对于每个联系人我不想将联系信息发送到服务器，我想将它们保存在客户端中，然后单击保存按钮然后全部他们中的一个被保存了。我该怎么做？如何添加到列表然后保存？我的模型类是：

```
 public System.Guid ContactId { get; set; }
    public string Tel { get; set; }
    public string Fax { get; set; }
    public string Mobile { get; set; } 
```

在视图中：

```
 <% using (Html.BeginForm()) { %>
                <%: Html.ValidationSummary(true) %>
                                                    <div class="editor-label">
        <%: Html.LabelFor(model => model.Tel) %>
    </div>
                    <div class="editor-field">
                        <%: Html.EditorFor(model => model.Tel) %>
                        <%: Html.ValidationMessageFor(model => model.Tel) %>
                    </div>

                    <div class="editor-label">
                        <%: Html.LabelFor(model => model.Fax) %>
                    </div>
                    <div class="editor-field">
                        <%: Html.EditorFor(model => model.Fax) %>
                        <%: Html.ValidationMessageFor(model => model.Fax) %>
                    </div>

                    <div class="editor-label">
                        <%: Html.LabelFor(model => model.Mobile) %>
                    </div>
                    <div class="editor-field">
                        <%: Html.EditorFor(model => model.Mobile) %>
                        <%: Html.ValidationMessageFor(model => model.Mobile) %>
                    </div>
            <% using (Html.BeginForm()) { %>
                <%: Html.ValidationSummary(true) %>
                                            <div class="editor-label">
            <%: Html.LabelFor(model => model.Tel) %>
        </div>
                    <div class="editor-field">
                        <%: Html.EditorFor(model => model.Tel) %>
                        <%: Html.ValidationMessageFor(model => model.Tel) %>
                    </div>

                    <div class="editor-label">
                        <%: Html.LabelFor(model => model.Fax) %>
                    </div>
                    <div class="editor-field">
                        <%: Html.EditorFor(model => model.Fax) %>
                        <%: Html.ValidationMessageFor(model => model.Fax) %>
                    </div>

                    <div class="editor-label">
                        <%: Html.LabelFor(model => model.Mobile) %>
                    </div>
                    <div class="editor-field">
                        <%: Html.EditorFor(model => model.Mobile) %>
                        <%: Html.ValidationMessageFor(model => model.Mobile) %>
                    </div>
            <div class="demo">
                <button >
                    <span class="ui-button-text">Add to list</span></button>
            </div>
            <% List<Contact> list = (List<Contact>)ViewBag.ListContacts; %>
            <fieldset>
                <legend>Contacts</legend>
                <table>
                    <tr>
                        <th>
                            Tel
                        </th>
                        <th>
                            Fax
                        </th>
                        <th>
                            Mobile
                        </th>
                        <th>
                        </th>
                    </tr>
                    <% foreach (var itm in list)
                       { %>
                    <tr>
                        <td>
                            <%: Html.DisplayFor(f => itm.Tel) %>
                        </td>
                        <td>
                            <%: Html.DisplayFor(m => itm.Fax)%>
                        </td>
                        <td>
                            <%: Html.DisplayFor(m => itm.Mobile)%>
                        </td>
                        <td>
                            <%: Html.ActionLink("Delete","Delete",new {id= itm.ContactId}) %>
                        </td>
                    </tr>
                    <% } %>
                </table>
            </fieldset>
            <% } %>
            <% List<Contact> list = (List<Contact>)ViewBag.ListContacts; %>
            <fieldset>
                <legend>Contacts</legend>
                <table>
                    <tr>
                        <th>
                            Tel
                        </th>
                        <th>
                            Fax
                        </th>
                        <th>
                            Mobile
                        </th>
                        <th>
                        </th>
                    </tr>
                    <% foreach (var itm in list)
                       { %>
                    <tr>
                        <td>
                            <%: Html.DisplayFor(f => itm.Tel) %>
                        </td>
                        <td>
                            <%: Html.DisplayFor(m => itm.Fax)%>
                        </td>
                        <td>
                            <%: Html.DisplayFor(m => itm.Mobile)%>
                        </td>
                        <td>
                            <%: Html.ActionLink("Delete","Delete",new {id= itm.ContactId}) %>
                        </td>
                    </tr>
                    <% } %>
                </table>
            </fieldset>

            <div class="demo">
                <button >
                    <span class="ui-button-text">Save</span></button>
            </div>

            <% } %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:57:18.443

一种选择是创建 javascript 对象 ( [http://docs.jquery.com/Types](http://docs.jquery.com/Types) )，然后当按下保存按钮时，您必须使用`jQuery.each`.

希望能帮助到你

# sqlite - Sqlite 更新和自增值

> ID：10211878
> 
> 赞同：0
> 
> 时间：2012-04-18T14:44:27.187
> 
> 标签：sqlite, database-schema, auto-increment

我想更新数据库的架构。我已经复制了自动生成的脚本，但是每个表脚本之后的最后一行是这样的：

```
UPDATE "main"."sqlite_sequence" SET seq = 8 WHERE name = 'table'; 
```

对于我安装的数据库，该`sec`值确实是正确的，但在其他安装中可能会有所不同。那么，将其设置为 0 是否安全，或者我应该从每个安装表中选择它？或者我可以跳过这一行并在没有它的情况下运行脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:48:46.283

如果“自动生成”脚本是指完整`.dump`的数据库，那么它将包括`create table`语句和`insert`语句，因此您可能希望`update`一起执行。

如果您修改该自动生成的脚本，那么您显然可以根据需要更改 seq 值。

这是[文档](http://www.sqlite.org/autoinc.html)必须说的：

> SQLite 使用特殊的 SQLITE_SEQUENCE 表来跟踪表曾经拥有的最大 ROWID。每当创建包含 AUTOINCREMENT 列的普通表时，就会自动创建和初始化 SQLITE_SEQUENCE 表。可以使用普通的 UPDATE、INSERT 和 DELETE 语句修改 SQLITE_SEQUENCE 表的内容。但是对这个表进行修改可能会扰乱 AUTOINCREMENT 密钥生成算法。在进行此类更改之前，请确保您知道自己在做什么。

最后，您需要确保 seq 值与最高值匹配。这表明：

```
sqlite> create table foo (a INTEGER PRIMARY KEY AUTOINCREMENT, b text);
sqlite> insert into foo values (NULL, 'blabla');
sqlite> select * from foo;
1|blabla
sqlite> .dump
PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE foo (a INTEGER PRIMARY KEY AUTOINCREMENT, b text);
INSERT INTO "foo" VALUES(1,'blabla');
DELETE FROM sqlite_sequence;
INSERT INTO "sqlite_sequence" VALUES('foo',1);
COMMIT; 
```

# mysql - SQL：4 个类必须引用一个提供数据库访问的中心类

> ID：10211891
> 
> 赞同：0
> 
> 时间：2012-04-18T14:45:20.033
> 
> 标签：mysql, sql, debugging, nullpointerexception

我想在 MySQL 数据库中输入几个条目。因为有些表通过外键引用其他表，所以我必须取回插入的 ID 以在我的下一个语句中注入它们。

我有 4 节课：

LodgerFormTest
RentForm
RentObject
House

以及将 MySQL 语句插入数据库的类：sql_statements

当我想发送一条 SQL 语句时，我得到一个 nullPointer 异常！

House 类的 Action 监听器（这是我必须发送的第一个 sql 语句）如下所示：

```
 saveButton.addActionListener(new ActionListener(){
              public void actionPerformed(ActionEvent e){
                System.out.println("saveButton");

//              sql_statements statements = new sql_statements();               
                sql_statements.performHouse(strasse.getText(), plz.getText(), ort.getText());

                mainmenu.create();
                rentnerFrame.dispose();

              }
            }); 
```

我在 sql_statements 中使用的所有方法和变量都是静态的！因此我没有实例化一个对象。

这是 sql_statements 中的方法“performHouse”

```
public static void performHouse(String strasse, String plz, String ort) {

    String sql = "insert into haus(strasse, plz, ort) values (?,?,?)";
    System.out.println(sql);

    try{
         ps = connect.prepareStatement(sql, ps.RETURN_GENERATED_KEYS);

         ps.setString(1, strasse);
         ps.setString(2, plz);
         ps.setString(3, ort);

         ps.execute();
         rs = ps.getGeneratedKeys();

         if(rs != null && rs.next()) {
                // Retrieve the auto generated key(s).
                key_idhaus = rs.getLong(1);
                System.out.println("idhaus: " + key_idhaus);
                }

         }catch(Exception ex){
             System.out.println(ex);
         }

} // close performHouse-methode 
```

我无法调试，因为我得到“找不到源”。调试视图中的错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:12:01.687

好吧，我只是想完成任务，所以我实现了一个解决方案，它肯定是但不是 OO：

我在所有 4 个类中实现了冗余代码，每个类都实现了自己的 sql 语句。又快又脏；）

# javascript - JavaScript - 正则表达式与自定义检查

> ID：10211893
> 
> 赞同：3
> 
> 时间：2012-04-18T14:45:22.940
> 
> 标签：javascript, regex

我正在寻找一种方法来创建一个完美（或接近完美）的方法来检查电子邮件是否有效......

虽然我一直在学习正则表达式的概念和技巧，但我想知道是否最好创建一个自定义方法来使用 for 循环和比较检查来检查电子邮件是否有效。我问这个，因为在查看了维基百科对有效和无效电子邮件的解释之后，[http](http://en.wikipedia.org/wiki/Email_address "电子邮件地址") ://en.wikipedia.org/wiki/Email_address ，正则表达式可能相当复杂。

例子：

```
for (var i = 0; i < email_str.length; i++) {
  if (email_str[i] === '@') {
    // do something
  } else if (other_check) {
    // do something else
  } else if ...
} 
```

如果有人知道哪个更快（在处理方面），更高效和/或有效，或者如果有人可以提供链接供我学习，将不胜感激。

谢谢和亲切的问候，

克雷格

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T14:50:26.317

试图创建一个完美的方法来检查电子邮件是否有效是没有意义的。[这是根据 RFC822](http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html)检查电子邮件地址是否有效的正则表达式。

```
(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:
\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(
?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ 
\t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\0
31]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\
](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+
(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:
(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)
?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\
r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[
 \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)
?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t]
)*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[
 \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*
)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)
*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+
|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r
\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:
\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t
]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031
]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](
?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?
:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?
:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?
:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?
[ \t]))*"(?:(?:\r\n)?[ \t])*)*:(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|
\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>
@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"
(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?
:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[
\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-
\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(
?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;
:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([
^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\"
.\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\
]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\
[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\
r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]
|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \0
00-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\
.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,
;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?
:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[
^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]
]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)(?:,\s*(
?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(
?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[
\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t
])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t
])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?
:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|
\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:
[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\
]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)
?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["
()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)
?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>
@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[
 \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,
;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:
\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\[
"()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])
*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])
+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\
.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:( 
```

这完全是矫枉过正。在“正常”代码中执行此操作也将一无所获。您无需验证完美的电子邮件地址。您也无需担心速度/效率。这称为过早优化，您不应该这样做。当你应该在你的应用程序/项目本身上工作时，你只是在这样的小事情上浪费你的时间。

这是一个很好的正则表达式，您可以使用

```
\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b 
```

这是一个更好的，可以匹配 99% 的电子邮件

```
[\w!#$%&'*+/=?^`{|}~-]+(?:\.[\w!#$%&'*+/=?^`{|}~-]+)*@(?:\w(?:[\w-]*\w)?\.)+\w(?:[\w-]*\w)? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T14:49:40.003

根据您需要支持的浏览器，并假设您正在请求带有常规`input`标签的电子邮件，您可以将其留给浏览器：

`<input type="email" value="" name="email" />`

如果*必须*提交，`required`也添加一个属性。

任何最近的浏览器都不允许表单在没有输入有效电子邮件的情况下提交，可以安全地假设浏览器供应商具有非常强大的电子邮件验证。

我假设您已经在服务器端验证电子邮件，对吧？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:49:49.943

正则表达式很复杂，但是 JavaScript 中的正则表达式解析器是健壮而强大的，验证电子邮件很复杂，而且只会在不规则的基础上进行。

因此，如果需要 1 毫秒或 100 毫秒，最终用户真的不会看到客户端验证的差异，尽管我的猜测是它更接近 1 毫秒。

布赖恩

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T14:51:07.323

我总是使用这个正则表达式进行电子邮件验证：

```
^[a-z0-9_\\+-]+(\\.[a-z0-9_\\+-]+)*@[a-z0-9_\\+-]+(\\.[a-z0-9_\\+-]+)*\\.([a-z]{2,4})$ 
```

我不知道它是否完美，但我发现它可以完成工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T14:49:31.410

有趣的想法，

您可以使用[jsperf](http://jsperf.com/)来测试什么是最快的。

# c# - C# 属性或属性

> ID：10211895
> 
> 赞同：1
> 
> 时间：2012-04-18T14:45:36.887
> 
> 标签：c#, asp.net-mvc-3, attributes, annotations, custom-attributes

我知道您可以像这样向 C# 中的方法添加属性，

例 1。

```
[HttpPost]
public void Method()
{
//code
} 
```

这意味着必须满足该属性才能运行`Method()`。

我知道你可以像这样堆叠属性，

例 2。

```
[HttpPost]
[RequireHttps]
public void Method2()
{
 //More code
} 
```

在您可以使用`Method2()`.

但是你能“或”属性吗？可能是这样的？

例 3。

```
[HttpPost || RequireHttps]
public void Method3()
{
  //Even more code
} 
```

因此，如果满足任一属性，您可以使用`Method3()`.

编辑：对不起，被称为注释的印象属性。解决了这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T14:46:54.003

> 这意味着必须满足注释才能运行 Method()

那是一种误解。

该`[HttpPost]`属性是一个指令，该方法只会匹配一个 Post 请求。这不是像安全检查那样的“需求”。只有某些属性以这种方式起作用。

但是当将它们视为“要求”时：它们独立工作，因此总是会导致**AND**行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:52:01.463

在 C# 中，它们不称为注解，而是属性。
默认情况下，除了装饰类、方法、属性等之外，属性不用于任何用途。但是通过反射，您可以将它们用于您喜欢的任何事情，就像 ASP.NET MVC 对`HttpPost`and所做的那样`RequireHttps`。

不幸的是，它们不能被 OR'ed。

# c++ - 头文件中的类定义，包括字符串

> ID：10211897
> 
> 赞同：0
> 
> 时间：2012-04-18T14:45:40.303
> 
> 标签：c++, class, header-files

这是我目前收集的标题：

```
 #include "Header1.h"
 #include "BedAndMatress.h"
 #include "Sofa.h"
 #include "Table.h"
 #include iostream
 #include fstream
 #include iomanip 
 #include string
 #include cmath
 #include vector

using namespace std;

int main() 
```

包含和命名空间 std 位在我的主文件和我的“函数定义.cpp”文件中。但是，编译器会抛出一些错误：

```
 e:\computing\coursework2\programme.cpp(2) : fatal error C1083: Cannot open include
 file: 'BedAndMatress.h': No such file or directory 
```

最初我在 Header1.h 文件中定义了我的所有类，但它抱怨文件和类定义的意外结束，所以我决定将它们分开。该文件包含在项目中，所有其他文件似乎都在工作，所以我不确定发生了什么。我还创建了一个名为 Bed 的新头文件，但它有相同的错误，所以我更改了它，认为可能已经有一个具有该名称的标准文件（显然是长镜头）是否有最大数量的头文件？

此外，在类定义中，一些成员对象是字符串......

```
#ifndef CLASS_Bed
#define CLASS_Bed
//////BED
class Bed:public Item
{
string frame;
string frameColour;
string mattress;

public:

int Bed(int count);
int Bed(int count, int number, string name, string frm, string fclr, string mtres);
void count();
void printDetails();
}
#endif 
```

但它不识别类型说明符。

```
error C2501: 'string' : missing storage-class or type specifiers 
```

我应该包括字符串吗？我在某处读到这可能会导致问题，所以如果那不是解决方案，我应该如何进行？

太极Hx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:48:32.830

> 我应该包括字符串吗？我在某处读到这可能会导致问题，所以如果那不是解决方案，我应该如何进行？

你应该包括`<string>`. 您可能会读到不能放入`using namespace std;`标题，这是真的。但是，如果需要，包含标题并没有错。您需要限定`string`虽然的用途：

```
#ifndef CLASS_Bed
#define CLASS_Bed
//////BED
#include <string>
class Bed:public Item
{
std::string frame;
std::string frameColour;
std::string mattress;

public:

int Bed(int count);
int Bed(int count, int number, std::string name, std::string frm, std::string fclr, std::string mtres);
void count();
void printDetails();
};     //<-- note semi-colon here
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:49:30.650

问题是您在类定义中的右大括号后缺少分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T14:53:39.950

> 最初我在 Header1.h 文件中定义了我的所有类，但它抱怨文件和类定义的意外结束，所以我决定将它们分开。

这是因为你忘了在类定义后加分号

```
class Bed:public Item
{
 ...
}; //notice the semicolon 

#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T15:08:58.623

> 最初我在 Header1.h 文件中定义了我的所有类，但它抱怨文件和类定义的意外结束，所以我决定将它们分开。

这可能意味着您在某处错过了右括号（ , 或`)`）`]`；如果它到达文件末尾而所有括号都没有关闭，编译器将给出该错误。但是，无论如何，将类放在单独的标头中是个好主意。`}``>`

> 致命错误 C1083：无法打开包含文件：“BedAndMatress.h”：没有这样的文件或目录

这表示它找不到名为`"BedAndMatress.h"`. 你有那个名字的文件吗？它是否与包含它的源文件位于同一目录中？如果不是，您是否在包含路径中指定目录？文件名的拼写是否完全一样，大写？

> 错误 C2501：“字符串”：缺少存储类或类型说明符

首先，您需要包含`<string>`以获取定义。然后你需要使用它的全名`std::string`。您可能很想放入`using namespace std;`头文件，但这是一个坏主意 - 在全局命名空间中转储名称可能会破坏包含头文件的其他文件。在源文件中这样做也不是一个好主意，但至少在那里损坏只会影响您自己的代码。

您还缺少 a`;`在类定义的末尾。

# android - 在其他类中检索 imageview 资源

> ID：10211904
> 
> 赞同：0
> 
> 时间：2012-04-18T14:46:08.540
> 
> 标签：android

我目前有 2 个名为 ProjectPreview 和 ImageAdapter 的类。

Projectpreview 具有视图和操作栏。

我想不出一种方法来获取图像视图中当前图像的 ID 以删除操作栏上的内容。

在项目预览中创建：

```
 Gallery gallery = (Gallery) findViewById(R.id.gallery);
    gallery.setAdapter(new ImageAdapter(this));

    gallery.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position, long id) {
            ImageAdapter ia1 = new ImageAdapter();
            ia1.showLarger(position); } 
```

删除项目预览中的代码：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_delete:
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

图像适配器类：

```
 public Integer[] mImageIds = {
            R.drawable.sample_1,
            R.drawable.sample_2,
            R.drawable.sample_3,
            R.drawable.sample_4,
            R.drawable.sample_5,
            R.drawable.sample_6,
            R.drawable.sample_7
    };

    public void showLarger(int position){
        ImageView image = (ImageView) findViewById(R.id.iv1);
        image.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
        image.setImageResource(mImageIds[position]);
    } 
```

我需要想办法获取 image.setImageResource(mImageIds[position]); 到另一个班级，以便我可以删除 mImageIds[position] aka 图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:52:24.190

为此，您可以在 ImageView 上使用[setTag](http://developer.android.com/reference/android/view/View.html#setTag%28java.lang.Object%29)函数。标签可以是您想要的任何类型的对象，例如用于图像资源的 id。当你想删除它时，你可以使用 imageView.getTag() 它将返回你用 setTag 设置的对象。我看到单击菜单项时您的删除代码正在运行。我在那里看不到对 ImageView 的引用，因此您需要运行 findViewById 来获取对视图的引用。

设置标识：

```
public void showLarger(int position){
    ImageView image = (ImageView) findViewById(R.id.iv1);
    image.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
    image.setImageResource(mImageIds[position]);
    image.setTag(mImageIds[position]);
} 
```

获取标识：

```
 ImageView image = (ImageView) findViewById(R.id.iv1);
    int id = (Integer)image.getTag(); 
```

# android - 在我的手机上使用部署时出错

> ID：10211909
> 
> 赞同：0
> 
> 时间：2012-04-18T14:46:18.883
> 
> 标签：android, spring, rest, jboss6.x

嗨，我正在使用带有应用程序服务器 jboss6 的 spring for android，在模拟器中一切正常，但是当我在手机上部署我的应用程序时出现此错误，我的应用程序是 2.3.3，我的手机是 android 4

```
[2012-04-18 15:20:30 - ddmlib] Une connexion établie a été abandonnée par un logiciel de votre ordinateur hôte
java.io.IOException: Une connexion établie a été abandonnée par un logiciel de votre ordinateur hôte
 at sun.nio.ch.SocketDispatcher.write0(Native Method)
 at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:33)
 at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:72)
 at sun.nio.ch.IOUtil.write(IOUtil.java:43)
 at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:334)
 at com.android.ddmlib.JdwpPacket.writeAndConsume(JdwpPacket.java:213)
 at com.android.ddmlib.Client.sendAndConsume(Client.java:575)
 at com.android.ddmlib.HandleHeap.sendREAQ(HandleHeap.java:348)
 at com.android.ddmlib.Client.requestAllocationStatus(Client.java:421)
 at com.android.ddmlib.DeviceMonitor.createClient(DeviceMonitor.java:854)
 at com.android.ddmlib.DeviceMonitor.openClient(DeviceMonitor.java:822)
 at com.android.ddmlib.DeviceMonitor.processIncomingJdwpData(DeviceMonitor.java:781)
 at com.android.ddmlib.DeviceMonitor.deviceClientMonitorLoop(DeviceMonitor.java:649)
 at com.android.ddmlib.DeviceMonitor.access$100(DeviceMonitor.java:42)
 at com.android.ddmlib.DeviceMonitor$3.run(DeviceMonitor.java:577) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:51:21.830

此处回答了相同的问题：已[建立的连接被主机中的软件中止](https://stackoverflow.com/questions/5618664/an-established-connection-was-aborted-by-the-software-in-your-host-machine)

简而言之：关闭 Eclipse -> 杀死 adb -> 启动 Eclipse

# objective-c - 如何并排排列多个 NSView？

> ID：10211922
> 
> 赞同：0
> 
> 时间：2012-04-18T14:46:58.267
> 
> 标签：objective-c, macos, cocoa

我正在构建一个应用程序，`NSViews`在全屏模式下我需要将两个单独的并排放置。正如我所看到的，可能有两种方法可以做到这一点，或者我可以制作一个超级`NSView`视图和两个子视图，或者将两个`NSViews`放在一个`NSWindow`. 问题是，虽然这个过程对我有用`NSView`，但我不能同时把它们放在一起。该方法`setContentView:`允许我只为一个窗口设置一个视图。并且该方法`setSubViews:`涵盖了整个`NSView`. 如何指定视图的精确协调来放置和调整它们的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:53:48.617

将一个 NSView 设置为 NSWindow 的 contentView 并添加另外两个 NSView 的 on using - NSView 的`addSubview`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T15:08:20.697

一个 NSWindow 只有一个根 NSView...，那就是 Window 的`contentView`. 将任何其他视图存储在该根视图中。

使用 Interface Builder 提供了一种以图形方式配置视图位置/大小的简单方法。但是您可以使用以下行手动配置它们的**框架**：

```
NSView *myView = [[MyCustomView alloc] init];
[[myWindow contentView] addSubview:myView];
[myView setFrame:NSMakeRect( /* ... */ )]; 
```

一些阅读：[NSView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsview_Class/Reference/NSView.html)

# c# - ASP.NET MVC3 是否提供类似于 WCF 帮助页面的自动生成帮助页面？

> ID：10211923
> 
> 赞同：1
> 
> 时间：2012-04-18T14:46:58.133
> 
> 标签：c#, asp.net-mvc-3

我刚刚开始涉足 ASP.NET MVC3 来模拟一个虚拟 Web 服务。我以前用 WCF 做过这个，发现自动帮助页面非常有用。MVC3 是否提供了类似的功能来自动记录我的服务接口？如果这样的功能没有作为框架的一部分内置，是否有任何工具可以填补这个空白？

我确实发现这个功能在 MVC4 的路线图上，但我找不到任何关于 MVC3 的信息。

[ASP.NET MVC4 路线图](http://aspnet.codeplex.com/wikipage?title=ASP.NET%20MVC%204%20RoadMap)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:00:30.957

不幸的是，它们在 ASP.NET MVC3 中不是这样的。
但我认为您正在寻找类似[ServiceStack](http://www.servicestack.net/)可以提供的页面的东西。
例如，请参阅[Hello World](http://www.servicestack.net/ServiceStack.Hello/)示例。

# jquery - jQuery 范围混淆

> ID：10211924
> 
> 赞同：0
> 
> 时间：2012-04-18T14:47:02.180
> 
> 标签：jquery

我正在使用以下 jQuery 代码在顶部菜单导航中查找活动链接的位置：

```
$(document).ready(){
    // Handles the triangle image sprite for the top navigation
$('#topnav a')
    .on({ 

        mouseenter: function() {

            var pos = $("#topnav a.active-top").offset();
            console.log("Top: " + pos.top + " Left: " + pos.left );

            // Get the position of the current hovered "a" element
            var upSprite = $("#upArrow").show(),
                pos = $(this).offset(),
                aWidth = $(this).width(),
                offsetTop = 27, // Adjust this to raise or lower the sprite
                offsetLeft = aWidth / 2; // Centers the element under the link

            upSprite
                .css({
                    "top": pos.top + offsetTop,
                    "left": pos.left + offsetLeft
                });

            //console.log("Top: " + pos.top + " Left: " + pos.left);

        },

        mouseleave: function() {
            // Hide the arrow once the mouse leaves
            $('#upArrow').hide();
        }

    });
} 
```

现在，当我将完全相同的代码粘贴到此事件处理程序之外时

```
 $(document).ready(function () {        
     var pos = $("#topnav a.active-top").offset();
     console.log("Top: " + pos.top + " Left: " + pos.left );
} 
```

我的 pos.left 得到了完全不同的值。

据我了解 .offset() 应该给我相对于文档的位置，而不像 .position() 给我相对于父容器的位置。

当代码在 .on() 事件处理程序的范围内时，它是否被提供了不同类型的上下文？我尝试使用 $.proxy() 无济于事。任何提示表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T14:49:26.977

`$(document).ready()`DOM 加载后触发；但在所有图像加载之前。由于这个原因，您会发现`offset()`通过重新绘制元素来检索偏移量后，偏移量正在发生变化。

要解决此问题，您可以`$(window).load()`改为处理事件，或继续检索单击处理程序中的位置（这是我的建议）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:56:02.747

很难对此进行分析，因为我不确切知道“#topnav a.active-top”引用的元素以及（可能）修改其位置的其他元素。

我认为，在 $(something).mouseenter() 之前的 $(document).ready() 之后有一些处理（图像加载、更改某些元素的宽度/高度等）。

# vb6 - 如何在 Visual Basic 6 的“引用”对话框中查看完整的位置路径？

> ID：10211925
> 
> 赞同：8
> 
> 时间：2012-04-18T14:47:04.860
> 
> 标签：vb6

我正在开发一个 Visual Basic 6 项目。当我转到项目的“引用”对话框时，其中一个引用的位置路径被切断，因此我看不到路径的结尾。有谁知道找出完整路径的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T15:01:51.653

有两种方法。不幸的是，无论您是否需要，两者都要求您在“参考”对话框中选择（在框中打勾）感兴趣的项目。

第一种方法是打开对象浏览器窗口，然后从左上角的选择器中选择一个感兴趣的库（通常默认为 ）。当您这样做时，对象浏览器窗口最底部的详细信息窗格应显示 DLL 的完整路径。（作为奖励，它也可以用于复制/粘贴！）

第二种方法是使用记事本（或其他文本编辑器）打开 *.vbp（Visual Basic 项目）文件，然后查找 Reference= 条目。对于 Forms 上使用的组件，您还可以打开 *.frm 文件，然后再次查找 Reference= 条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T15:02:13.260

这些天我没有安装 VB6 来检查如何在编辑器中进行操作，但您始终可以使用文本编辑器查看 VBP 文件。那里列出了将在对话窗口中显示的相同路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-04T14:32:13.350

有一个相当简单的（对于程序员来说）方法可以让 VB6 引用对话框变大：

> ## [重新设计 IDE 对话框](https://visualstudiomagazine.com/articles/2010/03/02/redesign-ide-dialogs.aspx)
> 
> 作者：卡尔·E·彼得森 03/02/2010
> 
> ...您可以使用一种工具来根据自己的喜好修改这些类型的设置。Resource Hacker 是一个免费软件实用程序，用于查看、修改、重命名、添加、删除和提取 32 位 Windows 可执行文件和资源文件中的资源。我早就发现它是探索可执行文件“胆量”（资源）的最佳工具之一。
> 
> ResHacker 提供了一个与 Classic VB 非常相似的对话框工具——您只需拖动对话框元素，调整它们的大小以适应。或者您可以编辑原始资源脚本，并在对话框设计器中观察更改。只需在树视图中打开“对话框”节点，找到要编辑的对话框，然后前往城镇。当您对新设计感到满意时，请按“编译脚本”按钮，然后执行 File | 保存以将更改写入磁盘。（请务必首先备份原始文件，当然，除非您喜欢重新安装。）
> 
> 要修改 Classic VB Project-References 对话框，请在 ResHacker 中打开 VB6IDE.DLL（或 VB5IDE.DLL）文件，找到 Dialog #4040 并开始工作。...

这是此方法的结果：

[![在此处输入图像描述](../Images/331ef40f1ebd73ece2b82c10ac11584a.png)](https://i.stack.imgur.com/VhNo5.png)

该文章包括原始和修改形式的资源定义链接：

*原来的：*

```
4040 DIALOG 0, 0, 295, 204
STYLE DS_MODALFRAME | WS_POPUP | WS_VISIBLE | WS_CAPTION | WS_SYSMENU
CAPTION "References"
LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US
FONT 8, "Tahoma"
{
   CONTROL "&Available References:", -1, STATIC, SS_LEFTNOWORDWRAP | WS_CHILD | WS_VISIBLE, 7, 7, 73, 8 
   CONTROL "", 5050, LISTBOX, LBS_NOTIFY | LBS_MULTIPLESEL | LBS_OWNERDRAWFIXED | LBS_HASSTRINGS | LBS_NOINTEGRALHEIGHT | WS_CHILD | WS_VISIBLE | WS_BORDER | WS_VSCROLL | WS_HSCROLL | WS_GROUP | WS_TABSTOP, 7, 24, 193, 123 
   CONTROL "OK", 1, BUTTON, BS_DEFPUSHBUTTON | WS_CHILD | WS_VISIBLE | WS_GROUP | WS_TABSTOP, 238, 6, 50, 14 
   CONTROL "Cancel", 2, BUTTON, BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE | WS_TABSTOP, 238, 23, 50, 14 
   CONTROL "&Browse...", 5051, BUTTON, BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE | WS_TABSTOP, 238, 45, 50, 14 
   CONTROL "&Help", 5052, BUTTON, BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE | WS_TABSTOP, 238, 84, 50, 14 
   CONTROL "Result", 5055, BUTTON, BS_GROUPBOX | WS_CHILD | WS_VISIBLE, 7, 154, 281, 43 
   CONTROL "Location:", -1, STATIC, SS_LEFT | WS_CHILD | WS_VISIBLE, 35, 168, 32, 8 
   CONTROL "", 5053, STATIC, SS_LEFTNOWORDWRAP | SS_NOPREFIX | WS_CHILD | WS_VISIBLE, 75, 168, 198, 8 
   CONTROL "Language:", -1, STATIC, SS_LEFT | WS_CHILD | WS_VISIBLE, 35, 180, 36, 8 
   CONTROL "", 5054, STATIC, SS_LEFTNOWORDWRAP | SS_NOPREFIX | WS_CHILD | WS_VISIBLE, 77, 180, 196, 8 
   CONTROL "&U", 4528, BUTTON, BS_OWNERDRAW | WS_CHILD | WS_VISIBLE | WS_GROUP | WS_TABSTOP, 211, 62, 14, 14 
   CONTROL "&D", 4529, BUTTON, BS_OWNERDRAW | WS_CHILD | WS_VISIBLE | WS_TABSTOP, 211, 96, 14, 14 
   CONTROL "Priority", -1, STATIC, SS_LEFTNOWORDWRAP | SS_NOPREFIX | WS_CHILD | WS_VISIBLE, 206, 82, 24, 8 
} 
```

*修改的：*

```
4040 DIALOG 0, 0, 455, 305
STYLE DS_MODALFRAME | WS_POPUP | WS_VISIBLE | WS_CAPTION | WS_SYSMENU
CAPTION "References"
LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US
FONT 8, "Tahoma"
{
   CONTROL "&Available References:", -1, STATIC, SS_LEFTNOWORDWRAP | WS_CHILD | WS_VISIBLE, 7, 7, 73, 8 
   CONTROL "", 5050, LISTBOX, LBS_NOTIFY | LBS_MULTIPLESEL | LBS_OWNERDRAWFIXED | LBS_HASSTRINGS | LBS_NOINTEGRALHEIGHT | WS_CHILD | WS_VISIBLE | WS_BORDER | WS_VSCROLL | WS_HSCROLL | WS_GROUP | WS_TABSTOP, 7, 19, 382, 235 
   CONTROL "OK", 1, BUTTON, BS_DEFPUSHBUTTON | WS_CHILD | WS_VISIBLE | WS_GROUP | WS_TABSTOP, 398, 18, 50, 14 
   CONTROL "Cancel", 2, BUTTON, BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE | WS_TABSTOP, 398, 40, 50, 14 
   CONTROL "&Browse...", 5051, BUTTON, BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE | WS_TABSTOP, 398, 61, 50, 14 
   CONTROL "&Help", 5052, BUTTON, BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE | WS_TABSTOP, 398, 240, 50, 14 
   CONTROL "Result", 5055, BUTTON, BS_GROUPBOX | WS_CHILD | WS_VISIBLE, 8, 260, 442, 37 
   CONTROL "Location:", -1, STATIC, SS_LEFT | WS_CHILD | WS_VISIBLE, 14, 271, 32, 8 
   CONTROL "", 5053, STATIC, SS_LEFTNOWORDWRAP | SS_NOPREFIX | WS_CHILD | WS_VISIBLE, 52, 271, 390, 8 
   CONTROL "Language:", -1, STATIC, SS_LEFT | WS_CHILD | WS_VISIBLE, 14, 282, 36, 8 
   CONTROL "", 5054, STATIC, SS_LEFTNOWORDWRAP | SS_NOPREFIX | WS_CHILD | WS_VISIBLE, 52, 282, 390, 8 
   CONTROL "&U", 4528, BUTTON, BS_OWNERDRAW | WS_CHILD | WS_VISIBLE | WS_GROUP | WS_TABSTOP, 416, 122, 14, 14 
   CONTROL "&D", 4529, BUTTON, BS_OWNERDRAW | WS_CHILD | WS_VISIBLE | WS_TABSTOP, 416, 149, 14, 14 
   CONTROL "Priority", -1, STATIC, SS_LEFTNOWORDWRAP | SS_NOPREFIX | WS_CHILD | WS_VISIBLE, 411, 139, 24, 8 
} 
```

# objective-c - 如何防止行动画向下滚动 TableHeaderView？

> ID：10211927
> 
> 赞同：0
> 
> 时间：2012-04-18T14:47:05.383
> 
> 标签：objective-c, ios, uitableview, uiscrollview, uiviewanimation

我的表的标题视图中有一个 UISearchBar。每当动画发生时，例如当删除或插入行时，标题视图会向下滚动。有没有办法告诉表格视图，它不应该（自动）向下滚动标题视图？（只有用户应该能够向下滑动它。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:28:01.480

在 Google 和 StackOverFlow 上进行广泛搜索后，我找到了正确的线索：`UIScrollView`. 我一直在寻找并最终实现的实际解决方案可以在另一个问题中找到：[Change Default Scrolling Behavior of UITableView Section Header](https://stackoverflow.com/questions/664781/change-default-scrolling-behavior-of-uitableview-section-header)

我稍微定制了解决方案，使其具有以下属性：

*   行动画可能会向下滚动表格视图，除非会显示标题视图
*   单击顶部（“滚动到顶部”）应将表格视图滚动到顶部，不包括标题视图
*   如果标题视图部分可见，它应该向下滑动，所以它完全可见

此解决方案的代码：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGFloat searchBarHeight = self.searchBar.frame.size.height;
    if (scrollView.contentOffset.y >= searchBarHeight) {
        scrollView.contentInset = UIEdgeInsetsMake(-searchBarHeight, 0, 0, 0);
    } else {
        scrollView.contentInset = UIEdgeInsetsZero;
    }
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if (scrollView.contentOffset.y < self.searchBar.frame.size.height && scrollView.contentOffset.y > 0) {
        [scrollView setContentOffset:CGPointZero animated:YES];
    }
} 
```

此代码在 a 中实现`UITableViewController`，它充当`UITableView`. `UITableView`另一方面，继承自，`UIScrollView`这使得这些方法可用并执行所有魔术。

几句话来解释`contentOffset`and `contentInset`，我花了一段时间才理解它们的意思。

*   偏移量是 a `CGPoint`，它简单地告诉可见内容（即表格视图的部分和单元格）从左上角向下滚动的距离。包含页眉视图和页脚视图，因此 (0, 0) 的偏移量表示表格视图滚动到顶部。(0, 100) 的偏移量表示表格视图向下滚动了 100 像素（通常不使用该点的 x 值）。
*   插图是一个非常有趣的属性，它将 的边界定义`UIScrollView`为 quadrupel `(top, left, bottom, right)`。因此，如果您越过这些边界，表格视图将会反弹。默认值为 (0, 0, 0, 0)，这意味着如果您在其第一个/最后一个单元格的上方/下方滚动，表格视图将反弹。因此 (-44, 0, 0, 0) 的值会将反弹边界降低到表格视图原点以下 44 像素。由于我的标题视图是 44px 高，每次你将标题视图滚动到屏幕的可见部分时，它都会反弹。这也可以防止行动画将表格滑动到偏移量 (44, 0) 以下，并且“滑动到顶部”命令会将表格视图滑动到偏移量 (44, 0)。

我希望这会有所帮助。:)

# visual-studio-2010 - 为什么 chirpy 不创建调试混搭的 javascript 文件？

> ID：10211930
> 
> 赞同：2
> 
> 时间：2012-04-18T14:47:10.130
> 
> 标签：visual-studio-2010, chirpy

我有以下 mash.chirp.config 文件

```
<root>
  <FileGroup Name="podPlayers.debug.js"> 
    <File Path="core.js" Minify="false" />
    <File Path="contentArea.js" Minify="false" />
    <File Path="searchbar.js" Minify="false" />
  </FileGroup>

  <FileGroup Name="podPlayers.min.js">
    <File Path="core.js" Minify="true" />
    <File Path="contentArea.js" Minify="true" />
    <File Path="searchbar.js" Minify="true" />
  </FileGroup>
</root> 
```

当我保存这个 Chirpy 时会生成 2 个文件，`podPlayers.js`并且`podPlayers.min.js`. 但是它不会创建“podPlayers.debug.js”。

知道为什么吗？这是 Chirpy 2.0.0.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:39:38.187

我承认有类似的问题。我删除了对 FileGroup 元素中一些文件的引用，但注意到我的混合文件即使在保存更改后仍然包含它们；就好像 Chirpy 没有意识到它已经被改变了。

我使用 Google Closure Compiler 作为 JS 的默认压缩器。虽然绝不是有保证的解决方法，但为我解决这个问题的是关闭离线压缩（我已启用），重新保存文件，然后再次打开它。

可以在 Visual Studio 2010 中找到执行此操作的选项：工具 -> 选项 -> Chirpy -> Google Closure Compiler。

为了澄清，我也在使用 Chirpy v2.0.0.4。

# ruby-on-rails - Rails 2.3.8 路由等效于 Rails 3 匹配

> ID：10211931
> 
> 赞同：0
> 
> 时间：2012-04-18T14:47:10.437
> 
> 标签：ruby-on-rails, routing, devise, ruby-on-rails-2

相当于`match 'aliased/route/here' => 'pointed/route/here'`什么？

我在这里把头撞到墙上，因为我无法让 Devise 为同一模型使用不同的登录 url。如果有人对此问题有提示，我将不胜感激！

我的路线的当前版本如下所示：

```
auth.devise_for :somerole,    :class_name => 'MainRole', :as => 'niceurl'
auth.devise_for :anotherrole, :class_name => 'MainRole', :as => 'otherurl' 
```

但该`:class_name`选项并非所有工作：我仍然需要为我定义的每个角色创建所有适当的助手。

我目前在 Rails 2.3.8 环境中使用 Devise 1.x，这就是为什么 Github 上提供的解决方案和其他问题中提到的解决方案不起作用的原因。

提前致谢！

**更新**

好的，所以我找到了让 Devise 工作的解决方法：我在其中创建了一个方法，`application_controller`它收集我所有不同的角色并将其分配给 mainrole，如下所示：

```
def current_mainrole
  current_somerole || current_anotherrole
end 
```

我担心它可能会引入一些安全漏洞，而且它看起来真的像一个黑客，所以我希望仍然有人可以帮助我解决路由问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:58:28.660

2.3.8 中的等价物是

```
map.contact '/contact', :controller => 'pages', :action => 'contact' 
```

因此，您可以根据需要定制生产线。

查看这些链接以进一步阅读：
[Ruby on Rails Tutorial 2.3](http://ruby.railstutorial.org/chapters/filling-in-the-layout?version=2.3#sec%3arails_routes)
[Ruby on Rails Guides 2.3.8](http://guides.rubyonrails.org/v2.3.8/getting_started.html#adding-a-route)

希望我有所帮助。

# jsf - 自定义组件必需属性

> ID：10211933
> 
> 赞同：0
> 
> 时间：2012-04-18T14:47:13.390
> 
> 标签：jsf, custom-component, required

我正在学习 JSF 并开始在 JSF 1.2 中编写自定义组件。有人可以解释一下 JSF 的“必需”属性是如何工作的吗？我查看了生成的 html，它没有显示任何需要的内容。

我正在编写一个带有多个输入文本的 JSF 组件，但只有其中一些是必需的（例如，编写 2 个输入文本 Zipcode 组件，其中最后一个输入文本始终是可选的，而第一个输入文本将由 xhtml 中定义的必需属性控制.

我该如何处理这种选择性的“必需”行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:52:10.557

组件的 required 属性仅存储在服务器端，客户端不知道默认情况下需要哪些字段。当您发布带有空必填字段的表单时，JSF 会将这些字段与其服务器端模型进行比较，并从那里进行验证，为空的必填字段呈现错误消息。您可以在 JSF 生命周期（仅在服务器端处理）中见证这一点。如果必填字段为空，生命周期将在第 3 步停止，并跳过模型更新。

1.  恢复视图
2.  应用请求值；处理事件
3.  过程验证；处理事件
4.  更新模型值；处理事件
5.  调用应用程序；处理事件
6.  渲染响应

关于第二个问题，如果输入文本的数量是静态的，您可以简单地将其中一些设置为`required="true"`，而将一些设置为`required="#{cc.attrs.required}"`。

# java - 没有打印对话框的浏览器本地打印

> ID：10211938
> 
> 赞同：1
> 
> 时间：2012-04-18T14:47:32.253
> 
> 标签：java, browser, printing, dialog, kiosk

我们有一个将从信息亭引用的 jsp。我们需要打印到与信息亭相连的收据打印机。客户按下按钮，我们将打印条形码。没有对话......没有麻烦（希望如此）。

怎么可能做到这一点？我猜我们将需要使用某种客户端脚本。我们可以从 javascript 访问本地 com 端口吗？

信息亭将运行某种形式的 Windows。我们确实可以控制那里安装的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:53:42.627

您只能在服务器端可用的系统上或通过操作客户端程序（浏览器插件）进行打印。

可能的解决方案包括：

1.  不要使用 JSP，而是使用程序。
2.  让服务器在同一个 LAN 中，并且打印机对服务器可用。
3.  Firefox 插件 JS 打印设置

（您当然可以更改浏览器的代码，但我怀疑您是否想要这样做。）

# c - 使用 Large_Int 访问共享内存的问题

> ID：10211939
> 
> 赞同：0
> 
> 时间：2012-04-18T14:47:32.970
> 
> 标签：c, windows, winapi, shared-memory

我正在编写两个应用程序，一个生产者和一个消费者。到目前为止，我的代码与 MSDN 示例几乎相同：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx)

我在 Producer 中设置了一个事件，该事件正确触发了消费者的响应。生产者在共享内存中创建一个值，消费者正确响应，然后打开该值并通过 MessageBox 打印出来。

但是我试图让生产者存储一个 LARGE_INT 而不是一个 tchar 数组。当我尝试将 CopyMemory 更改为使用 long 时，出现错误。

```
CopyMemory((PVOID)pBuf, timeStart, sizeof(long)); 
```

关于如何修改它（我的代码与 MSDN 示例几乎相同）以存储和检索 LARGE_INT 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:51:33.593

您正在传递 的值`timeStart`，但您需要传递其地址：

```
CopyMemory((PVOID)pBuf, (void *)&timeStart, sizeof(timeStart)); 
```

编辑：但是，我应该补充一点，我认为这通常是错误的方法。使用 CopyMemory，您基本上可以将所有内容都转换为原始位，然后您必须在数据从另一端出来时将其重组为真实数据。

而不是那样，我通常更喜欢做类似的事情：

```
void *shared_base = whatever; // base address of shared memory segment

struct shared_data { 
    // The types of the data you actually need to share go here...
    LARGE_INTEGER x;
    int y;
    char z[512];
};

shared_data *data = (shared_data *)shared_base; 
```

双方的数量基本相同。然后，在生产者方面，您将执行以下操作：

```
data->x = my_large_integer;
SetEvent(data_ready); 
```

...在消费者方面，例如：

```
LARGE_INTEGER foo = data->x;
ResetEvent(data_ready); 
```

这基本上让您可以在一个地方进行转换，然后直接使用结构的成员，而不是在需要访问共享数据的任何地方进行转换。当然，您也可以更详细地使用它——例如，如果您希望能够将（大部分）共享块用于多个目的，您可以使用 a`union`而不是 a `struct`（或者您可能有 a`struct`包含 a`union`等，就像任何其他代码一样）。

# iphone - 以编程方式更改 tableview 的大小

> ID：10211942
> 
> 赞同：1
> 
> 时间：2012-04-18T14:47:41.357
> 
> 标签：iphone, uitableview

我创建了一个像这样的表格视图

```
@interface RootViewController : UITableViewController{

} 
```

现在我想在显示之前更改表格视图的原点和大小。

我怎样才能改变它？

编辑 ：

```
- (id) initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithStyle:UITableViewStyleGrouped];
    self.tableView.frame=CGRectMake(50, 210, self.view.frame.size.width, self.view.frame.size.height);
    return self;
} 
```

现在我面临的问题是我设置了以下代码。现在表格视图仍然从我的视图控制器（0,0）的顶部位置显示，而不是根据我的 x,y 位置。但是如果我将样式更改为组或普通它只是正常发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T15:22:21.630

看起来您已经创建了一个新`tableView`的，而不是尝试移动 InterfaceBuilder 为您创建的现有的。但是由于您没有将新的添加`tableView`到视图层次结构中，因此您看不到新的，并且您还没有删除原始的...

相反，只需移动原始的 tableView。在您`rootViewController`的`viewWillAppear:`方法中，执行以下操作：

```
-(void)viewWillAppear:(BOOL)animated
{
    self.tableView.frame = CGRectMake(0, 310, self.view.frame.size.width,200);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:51:44.210

你可能会得到属性 * *tableView **来做到这一点

```
tableView.frame = xxxxxx; 
```

但我认为你只需要一个 UIViewController 包含一个 UITableView

```
UITableView tableView = [[UITableView alloc] initWithFrame:(**the size you want**)];
[self.view addSubView:tableView]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-24T18:00:02.030

如果您使用 StoryBoard 并且设置了约束。reloadData 将重置您将框架设置为的任何内容。相反，您应该修改约束。您可以通过创建一个出口然后更改常量来做到这一点。例如，下面我将约束变量链接到顶部约束，并通过将常量设置为 -60，将其向上移动。

```
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *tableConstraint;

_tableConstraint.constant = -60.; 
```

# javascript - Javascript - setTimeout、clearTimeout、setInterval、clearInterval 的替代品

> ID：10211945
> 
> 赞同：1
> 
> 时间：2012-04-18T14:47:46.660
> 
> 标签：javascript, concurrency

我正在寻找使用 javascript 解决并发问题的替代方法。我试图解决的一个这样的问题是移动应用程序的大型目录的消耗和处理。我目前正在尝试实现一个目录应用程序，其中包含许多类别的大量项目......我很难应对挑战。

我看过网络工作者，但这是一个必须在不支持此类浏览器功能的浏览器上运行的移动应用程序。

应对此类挑战最合适的方法是什么。任何以前的经验都会非常有益。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:50:05.840

看看 IcedCoffeeScript：[http ://maxtaco.github.com/coffee-script/](http://maxtaco.github.com/coffee-script/)

# macos - 通过 SSH 工作的 GIThub GUI

> ID：10211946
> 
> 赞同：0
> 
> 时间：2012-04-18T14:47:47.057
> 
> 标签：macos, git, user-interface, github

我正在尝试让非技术员工使用 git。他们使用 SFTP 连接到服务器，然后能够在 repo 中使用 git 命令。在 Mac 或 Windows 上是否有用于此的 GUI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T14:51:16.557

我不建议将访问服务器的权限授予非技术员工。
而且 Git 不支持 sftp。

所以我会推荐：

*   [Tower](http://www.git-tower.com/)（Mac 上 Git 的 GUI）
*   SSH 访问，由[Gitolite等授权层管理](http://sitaramc.github.com/gitolite/)

这样，您可以精确控制谁可以克隆/推送/拉取给定存储库，并且您不必授予任何人访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T00:06:38.960

我喜欢 Mac 上的 GitX 和 Windows 上的 Git Extensions，两者都是免费的。

# image - 模态对话框中的 ExtJs LoadMask

> ID：10211951
> 
> 赞同：0
> 
> 时间：2012-04-18T14:48:11.817
> 
> 标签：image, extjs4, loading, mask

我试图在 ExtJs 的模态对话框中加载图像时显示加载掩码。问题是原始掩码在一段时间内消失，而第二个掩码可见。

这是原始截图。模态对话框和背景被屏蔽： ![原来的](../Images/e80c0d23c62922e61d041264a418dbdb.png)

这是我为图像添加第二个加载掩码的时候。 ![加载图像](../Images/1c9e3ce81825a7cbde378a76e9fadeb7.png)

然后它回到第一个。所以整个应用程序的背景非常烦人。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:56:05.073

我已经测试过你做了什么。它不适合我。我认为这与面具的**Z-Index**或**唯一 ID有关。**尝试使用 Firebug 跟踪它们，看看到底发生了什么。例如，某些组件出现在掩码上。如果您向我们提供您的一些代码（简化），我们可以为您的问题做很多事情。

# .net - 寻找描述从智能卡自动导入公钥证书的文档（Windows 7）

> ID：10211957
> 
> 赞同：-2
> 
> 时间：2012-04-18T14:48:23.213
> 
> 标签：.net, cryptography, smartcard

我正在处理的.NET 4.0 中的一些当前软件解决方案正在利用从智能卡到个人证书存储的自动公钥证书导入功能（假设安装了供应商微型驱动程序并启动了适当的服务）。

出于个人原因，我需要有关该行为的参考文档（任何 MSDN 文章都可以）。为什么会发生导入、如何发生、支持什么平台操作系统、关键字、必须启动哪些 Windows 服务等。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:14:49.213

这是由硬件供应商提供的 CSP 完成的，而不是应用程序本身。因此，程序和限制因每个供应商而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:06:37.477

给你：[http ://technet.microsoft.com/en-us/library/ff404288(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/ff404288(v=ws.10).aspx)

# richfaces - Richfaces 推送 (4.2)

> ID：10211958
> 
> 赞同：1
> 
> 时间：2012-04-18T14:48:25.297
> 
> 标签：richfaces, push

我正在使用richfaces 4.2 并尝试创建一个推送系统。

```
<a4j:push address="subtopic@topic">
 <a4j:ajax event="dataavailable" render="list" execute="@none" />
</a4j:push>

public void push() throws MessageException {
    TopicKey topicKey = new TopicKey("topic");
    TopicsContext topicsContext = TopicsContext.lookup();
    topicsContext.publish(topicKey, "empty message");
    System.out.println("push event");
} 
```

但是客户端渲染的javascript似乎有问题：

它试图获取以下网址

```
/rfRes/org.richfaces.resource.PushResource.html?__richfacesPushAsync=1&pushSessionId=1df3c2e1-37a2-4e96-993a-c881597e8cb2&_=1334760087852 
```

但是缺少“pushTopic”-获取参数，结果为：

```
java.lang.IllegalArgumentException
    at org.richfaces.resource.PushResource.encode(PushResource.java:85)
    at org.richfaces.resource.UserResourceWrapperImpl.encode(UserResourceWrapperImpl.java:188)
    at org.richfaces.resource.ResourceHandlerImpl.handleResourceRequest(ResourceHandlerImpl.java:222)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:591)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.myfaces.orchestra.filter.OrchestraServletFilter.doFilter(OrchestraServletFilter.java:77)
    at org.apache.myfaces.orchestra.lib.CompoundFilter$1.doFilter(CompoundFilter.java:58)
    at org.apache.myfaces.orchestra.lib._NullFilter.doFilter(_NullFilter.java:45)
    at org.apache.myfaces.orchestra.lib.CompoundFilter.doFilter(CompoundFilter.java:63)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:83)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:125)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.hibernate4.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:119)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

有人知道我在做什么错吗？

编辑：我正在使用 tomcat7

我尝试将我的 bean 更改为：

```
@Autowired
@Push(topic = "topic", subtopic = "subtopic")
// now Topic getting initialized with this.
private Event<String> pushEvent;

public void push() throws MessageException {
    pushEvent.fire("hello");
} 
```

但后来我明白了

```
java.lang.ClassNotFoundException: javax.enterprise.event.Event
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Unknown Source)
    at java.lang.Class.getDeclaredFields(Unknown Source)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findPersistenceMetadata(PersistenceAnnotationBeanPostProcessor.java:373)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(PersistenceAnnotationBeanPostProcessor.java:321)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:830)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:493)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$2.getObject(AbstractBeanFactory.java:332)
    at org.springframework.web.context.request.AbstractRequestAttributesScope.get(AbstractRequestAttributesScope.java:43)
    at org.springframework.web.context.request.SessionScope.get(SessionScope.java:92)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1093)
    at org.springframework.beans.factory.access.el.SpringBeanELResolver.getValue(SpringBeanELResolver.java:56)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:71) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:43:12.060

当我用相同的设置看到这个时，我花了好几个小时才整理出来。我最终通过安装 0.8.4 版的大气运行时.jar 解决了这个问题——它是唯一与 Richfaces 4.2 兼容的版本。我必须采取的其他步骤是：

**在 web.xml 中指定 servlet 版本 3.0**

```
<web-app
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
     id="WebApp_ID"
     version="3.0"
 > 
```

**添加以下 jars 以解决 Atmosphere 中的各种其他依赖项**

*   大气兼容-tomcat-0.8.0-RC1.jar
*   大气兼容-0.4.1.jar
*   jetty-websocket-8.1.5.v20120716.jar
*   slf4j-api-1.6.6.jar
*   slf4j-simple-1.6.6.jar。

编辑：进一步的研究和测试表明，**没有**必要在 web.xml 中为 Tomcat 7.0.29 下的 servlet 版本 3.0 定义“Push Servlet”，但作为参考，对于早期版本，您确实需要这个：

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.richfaces.webapp.PushServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
    <async-supported>true</async-supported>
</servlet> 
```

此外，guava-r08.jar 和 sac-1.3.jar 是 Richfaces 的核心“强制依赖项”——即使您不使用 Push，您也需要它们才能工作。

# user-agent - Pinterest 对话框重定向出错

> ID：10211970
> 
> 赞同：1
> 
> 时间：2012-04-18T14:48:57.527
> 
> 标签：user-agent, pinterest

我需要以下帮助：

我已经在我的产品页面上设置了 sharethis。（facebook、twitter 和 pinterest）我使用 og-metatags 图像和文本女巫工作正常。

只有 Pinterest 不会从对话框中固定选定的图像和文本。我没有收到成功消息并看到我的图片和文字显示在我的 pinterest 页面上，而是重定向到[http://pinterest.com/pin/create/button/](http://pinterest.com/pin/create/button/)。

我现在不知道是什么导致了错误，但也许说我的网站是“仅限会员”很有用，并且我为 facebook 的用户代理/刮板制作了一个数组。对于不必要的 Twitter 和我不知道的 pinterest 的用户代理/刮板。

希望有人会并且可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:02:33.810

它是固定的！要使 Pinterest 正常工作，您需要没有 seo url 吗？等标志。例如，正确的格式是[http://www.mysite.com/categorie/product/](http://www.mysite.com/categorie/product/)。

我认为这对您的论坛很有用。

因此，如果有人在对话框中提取了他们的图像，但 pinterest 不执行，则说明您没有使用干净的 URL。

希望我也让你像我一样快乐！！！

星期五干杯，我的问题都消失了！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:31:10.237

pinterest pinning agent 应该是：Pinterest/0.1 +http://pinterest.com/

我正在寻找通过点击 pin 进行预览/url 切换的 pinterest 代理。不确定它是否与进行 pin-image 抓取的代理相同。有人知道吗？我现在正在尝试测试它是否相同。

# prolog - 从行生成数独“盒子” - 序言

> ID：10211976
> 
> 赞同：0
> 
> 时间：2012-04-18T14:49:05.867
> 
> 标签：prolog, sudoku, do-while, clpfd, sublist

我正在尝试编写一个简单的程序来检查输入数独板*当前*是否不正确；即它在一行、一列或“框”中有两个相同的数字。我在行和列部分没有遇到任何问题 - 一个相当简单的任务，我使用以下代码完成（应该注意，'0' 表示尚未填充的正方形）：

```
:- use_module(library(clpfd)).

%Takes a matrix, determines if any row has repeating numbers
check([H|T]):-
    all_diff(H),
    check(T).
check([]).

%takes a list, checks if it contains repetitions other than '0'.
all_diff([]).
all_diff([X|Xs]) :-
    ( X = 0 ->
    all_diff(Xs)
        ;
        \+memberchk(X, Xs),
      all_diff(Xs)

    ).

consistent(Rows):-
    check(Rows),                %verify rows are free of repeats
    transpose(Rows,Columns),    %L1 represents columns
    check(Columns),         %verify all columns are free of repeats
        [H|T] = Rows,
        length(H,M),
    K is integer(sqrt(M)).     %this will give me dimensions of each box (KxK) 
```

但是，我不太清楚如何生成将代表 KxK“框”的列表（其中 K 是行长的平方根）。我得到了 K 的值，我想我想按照将 row1 划分为 K 个子列表的方式做一些事情，然后将 row2 的 K 个子列表附加到 row1 的子列表的末尾，直到我到达 row(K*K)。

不幸的是，我真的不知道如何去做这件事？有没有我可以使用的 BIP 来做一些事情，比如获取一个列表并将其分解为 X 列表，每个列表长度为 Y？

否则，有什么想法吗？我知道一个*很小*但关于dowhile循环的东西，我想它们可以在这里实现，但我也不确定我会怎么做？非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:15:03.043

一种简单但效率不高的方法可以使用索引算术和循环：

```
...
    Sq = 3,
    findall(B, (between(1, Sq, R),
            between(1, Sq, C),
            block(M, Sq, R, C, B)), Bs).

cell(M, R,C, V) :-
    nth1(R,M,Row), nth1(C,Row,V).

block(M, Sq, R,C, B) :-
    findall(V, (between(1, Sq, X),
            between(1, Sq, Y),
            I is (R-1) * Sq + X,
            J is (C-1) * Sq + Y,
            cell(M, I, J, V)), B). 
```

在library(clpfd) 的[文档](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.7%27,swi%28%27/doc/Manual/clpfd.html%27%29%29)中，有一种更有效的方法，仅限于已知的标准尺寸。您可以尝试概括该代码。

**编辑**这里是我的测试用例：请注意它是假的矩阵，只是为了便于理解块在哪里。

```
q(Bs) :-
    M = [[1,2,3,4,5,6,7,8,9],
         [a,b,c,d,_,3,_,8,5],
         [x,y,z,_,2,_,_,_,_],
         [u,v,z,e,t,y,_,_,_],
         [b,b,b,e,t,y,1,_,_],
         [c,c,c,e,t,y,_,_,_],
         [5,_,_,_,_,_,_,7,3],
         [_,_,2,_,1,_,_,_,_],
         [_,_,_,_,4,_,_,_,9]],

    Sq = 3,
    findall(B, (between(1, Sq, R),
            between(1, Sq, C),
            block(M, Sq, R, C, B)), Bs).

cell(M, R,C, V) :-
    nth1(R,M,Row), nth1(C,Row,V).

block(M, Sq, R,C, B) :-
    findall(V, (between(1, Sq, X),
            between(1, Sq, Y),
            I is (R-1) * Sq + X,
            J is (C-1) * Sq + Y,
            cell(M, I, J, V)), B). 
```

并使用以下命令进行测试：

```
?- q(Bs),maplist(writeln,Bs).
[1,2,3,a,b,c,x,y,z]
[4,5,6,d,_G928,3,_G934,2,_G940]
[7,8,9,_G895,8,5,_G904,_G907,_G910]
[u,v,z,b,b,b,c,c,c]
[e,t,y,e,t,y,e,t,y]
[_G796,_G799,_G802,1,_G808,_G811,_G814,_G817,_G820]
[5,_G769,_G772,_G775,_G778,2,_G784,_G787,_G790]
[_G736,_G739,_G742,_G745,1,_G751,_G754,4,_G760]
[_G706,7,3,_G715,_G718,_G721,_G724,_G727,9]
Bs = [[1, 2, 3, a, b, c, x, y|...], [4, 5, 6, d, _G928, 3, _G934|...], [7, 8, 9, _G895, 8, 5|...], [u, v, z, b, b|...], [e, t, y, e|...], [_G796, _G799, _G802|...], [5, _G769|...], [_G736|...], [...|...]]. 
```

# java - 使用 NodeJS 转换 Java 到 JavaScript

> ID：10211978
> 
> 赞同：1
> 
> 时间：2012-04-18T14:49:15.293
> 
> 标签：java, javascript, node.js, coffeescript

我有很多用 Java 编写的代码，它们与文件系统主动交互。我已将此代码的一部分重写为 NodeJS（在 CoffeeScript 上），并且运行良好。但这一切都是我手动完成的。问题是：是否有任何工具可以执行这种转换？

我已经准备好使用 MPS 来编写我自己的生成器，但这不是最简单的方法。

那么，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:29:13.947

没有这样的通用工具，因为将所有现有的 Java API 复制到 Node.js 等价物中会非常昂贵，而且收益很少。

您总是可以从 Node.js 中使用 Java 进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:02:07.823

[GWT](https://developers.google.com/web-toolkit/)是将 Java 转换为 javascript 的最接近的方式。不幸的是，没有办法将其转换为 NodeJS

# gwt - drools maven 依赖与 GWT 冲突

> ID：10211979
> 
> 赞同：2
> 
> 时间：2012-04-18T14:49:16.607
> 
> 标签：gwt, maven, drools

我有一个 maven gwt 项目，它应该在服务器上集成 drools (5.4.0.CR1)。

这里的问题是，drools 似乎需要 drools-pipline 作为依赖项才能找到类：

```
org.drools.builder.impl.KnowledgeBuilderFactoryServiceImpl 
```

添加后会使流口水正确运行但会破坏 GWT ......

我读过一篇描述类似问题的文章，但旧版本说这是因为“org.eclipse.jdt”的不同版本，可以通过添加来修复：

```
<exclusions>
    <exclusion>
        <groupId>org.eclipse.jdt.core.compiler</groupId>
        <artifactId>ecj</artifactId>
    </exclusion>
</exclusions> 
```

但这不起作用...

有趣的是，当从 Eclipse 中检查时，我发现这个类实际上存在于 drools-compiler jar 中，看起来与已经引用的 pom "drools-multiproject" 相同。

非常感谢任何帮助..非常感谢。

* * *

**更新1：**

这是我在启用“drools-pipline”的依赖项时遇到的错误。并且内部码头服务器不运行（其他依赖项导致服务器运行但不是开发模式）但它不加载开发模式：

```
 [INFO] log4j: reset attribute= "false".
   [INFO] log4j: Threshold ="null".
   [INFO] log4j: Retreiving an instance of org.apache.log4j.Logger.
   [INFO] log4j: Setting [org.drools.grid] additivity to [true].
   [INFO] log4j: Level value for org.drools.grid is  [INFO].
   [INFO] log4j: org.drools.grid level set to INFO
   [INFO] log4j: Level value for root is  [ERROR].
   [INFO] log4j: root level set to ERROR
   [INFO] log4j: Class name: [org.apache.log4j.ConsoleAppender]
   [INFO] log4j: Setting property [target] to [System.out].
   [INFO] log4j: Parsing layout of class: "org.apache.log4j.PatternLayout"
   [INFO] log4j: Setting property [conversionPattern] to [%-4r %-5p %x- %m%n].
   [INFO] log4j: Adding appender named [console] to category [root]. 
```

* * *

**更新 2：**

在查看 drools-pipline pom 时，我发现它被描述为 drools-camel 的遗留问题，所以我用 drools-camel 替换了它......现在事情加载正确，但是如果我使用上面放在 drools-camel 依赖项上的排除GWT 工作但流口水不会抱怨它找不到它，如果我删除排除 GWT 中断：

```
java.lang.NoSuchFieldError: warningThreshold
at com.google.gwt.dev.javac.JdtCompiler.getCompilerOptions(JdtCompiler.java:400)
at com.google.gwt.dev.javac.JdtCompiler$CompilerImpl.<init>(JdtCompiler.java:228)
at com.google.gwt.dev.javac.JdtCompiler.doCompile(JdtCompiler.java:689)
at com.google.gwt.dev.javac.CompilationStateBuilder$CompileMoreLater.compile(CompilationStateBuilder.java:215)
at com.google.gwt.dev.javac.CompilationStateBuilder.doBuildFrom(CompilationStateBuilder.java:406)
at com.google.gwt.dev.javac.CompilationStateBuilder.buildFrom(CompilationStateBuilder.java:299)
at com.google.gwt.dev.cfg.ModuleDef.getCompilationState(ModuleDef.java:325)
at com.google.gwt.dev.DevModeBase$UiBrowserWidgetHostImpl.createModuleSpaceHost(DevModeBase.java:105)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:190)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:510)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:352)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T16:25:03.143

我们在[guvnor](https://github.com/droolsjbpm/guvnor/blob/master/guvnor-webapp-drools/pom.xml#L28)也遇到了这个问题。这是因为 GWT 编译器未能将其编译器和编译类路径分开。更糟糕的是，gwt-dev 遮蔽了几个 jar（是的，gwt-dev jar 是邪恶的：）。[这是谷歌代码中的一个问题（有几个相关问题）](http://code.google.com/p/google-web-toolkit/issues/detail?id=4479)。

无论如何，这是修复：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <version>2.3.0</version>
    <configuration>
      ...
      <gwtSdkFirstInClasspath>true</gwtSdkFirstInClasspath><!-- The GWT compiler must the correct JDT version -->
      ...
    </configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T13:31:41.023

我有同样的问题，`<gwtSdkFirstInClasspath>true</gwtSdkFirstInClasspath>`在配置中使用的解决方案对我不起作用。我所做的是在“Eclipse - 运行配置...”中重新排序类路径，将 GWT SDK 放在 Maven 依赖项之前

# solr - solr：精确搜索返回正确匹配但模糊不返回匹配

> ID：10211987
> 
> 赞同：0
> 
> 时间：2012-04-18T14:49:36.840
> 
> 标签：solr, fuzzy-search

我的本地机器上有一个 Solr 实例，我正在通过浏览器中的管理界面访问它。Solr 的实例在非模糊搜索中正常工作（我每天都广泛使用它）。

数据库中的一条记录是我自己的名字字段 Barnaby 和姓氏字段 Dawson。另一条记录是 Marcus Downing，带有适当的名字和姓氏字段。这里的大写和写的完全一样。数据库中还有十几个姓唐宁的人，姓道森的人也有类似的数字。在我感兴趣的所有记录上，还有另一个字段 IsHistorical 设置为 false。

以下是我使用粗略匹配数（精确和不精确）执行的搜索。

**IsHistorical:false AND Surname:downing**

*许多匹配，其中许多是精确的。*

**IsHistorical:false AND Surname:dawson**

*许多匹配，其中大多数是精确的。*

**IsHistorical:false AND Surname:downing~**

*许多匹配**都不**是精确的。*

**IsHistorical:false AND Surname:dawson~**

*许多匹配，其中许多是精确的*

**IsHistorical:false AND Forename:barnaby AND Surname:dawson~**

*一场比赛是正确的结果*

**IsHistorical:false AND Forename:marcus AND Surname:downing~**

*根本没有比赛*

我使用姓氏和名字的首字母大写的所有组合执行了最后两次搜索，结果没有发现差异。我已确保 page 返回的行数足够大，可以查看所有返回的结果。查询是手动输入的。

我的问题是：为什么模糊搜索修饰符在搜索“downing”时阻止我获得完全匹配，但在搜索“dawson”时却没有？

我的最终目标是以模糊的方式编写匹配多个字段的查询，包括名字和姓氏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T15:06:12.183

我的假设是您在**surname**字段的架构中具有词干过滤器，并且*downing*变为*down*。

Fuzzy on *down*给你这种结果。我认为最好删除该字段的词干过滤器。

# jsf - 使用 birt、jsf 和 jsf4birt 生成报告和图表

> ID：10211990
> 
> 赞同：0
> 
> 时间：2012-04-18T14:49:43.830
> 
> 标签：jsf, charts, report, birt

任何人都可以指导我使用平台 websphere/tomcat 上的 jsf4birt 在 jsf 中使用 BIRT 生成的图表的步骤吗？

[我已经完成了http://exadel.org/jsf4birt-docs](http://exadel.org/jsf4birt-docs)站点中提到的所有事情。

但我仍然收到以下异常：

```
SEVERE: JSF1054: (Phase ID: RENDER_RESPONSE 6, View ID: /workpages/pageb.jsp) Exception thrown during phase execution: javax.faces.event.PhaseEvent[source=com.sun.faces.lifecycle.LifecycleImpl@1f528ab]
Apr 18, 2012 8:04:16 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NullPointerException
    at org.eclipse.birt.report.engine.api.impl.ReportEngine$EngineExtensionManager.<init>(ReportEngine.java:819)
    at org.eclipse.birt.report.engine.api.impl.ReportEngine.<init>(ReportEngine.java:111)
    at org.eclipse.birt.report.engine.api.impl.ReportEngineFactory$1.run(ReportEngineFactory.java:18)
    at org.eclipse.birt.report.engine.api.impl.ReportEngineFactory$1.run(ReportEngineFactory.java:1)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.birt.report.engine.api.impl.ReportEngineFactory.createReportEngine(ReportEngineFactory.java:14)
    at com.exadel.jsfbirt.engine.BirtEngine.getBirtEngine(BirtEngine.java:80)
    at com.exadel.jsfbirt.engine.BirtRendererUtils.renderBirt(BirtRendererUtils.java:134)
    at com.exadel.jsfbirt.renderkit.html.BirtWrapperRenderer.doEncodeBegin(BirtWrapperRenderer.java:162)
    at com.exadel.jsfbirt.renderkit.html.BirtWrapperRenderer.encodeBegin(BirtWrapperRenderer.java:127)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:813)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:928)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:148) 
```

此外，还想知道以下上下文参数的含义，这些上下文参数根据网站链接添加到 web.xml：

```
<context-param>
  <param-name>actuate.serverUrl</param-name>
  <param-value>http://localhost:8900/iportal</param-value>
</context-param>

<context-param>
  <param-name>actuate.serverLogin</param-name>
  <param-value>administrator</param-value>
</context-param>

<context-param>
  <param-name>actuate.serverPassword</param-name>
  <param-value></param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:33:35.430

```
Finally the code worked for me. Steps to be followed are as follows :

1\. Make a dynamic web project (jsf project if you want to use jsf tags).
2\. Once your project is ready prepare your report. Prepare your data sets for report/chart generation, a sample query is mentioned below.

select count(customernumber) cuscount,State
from customers
where country=? -- this is the parameter you can give as input
group by state

3\. Once you are done with this part add following parameters to web.xml

<context-param>
<param-name>actuate.serverUrl</param-name>
<param-value>http: localhost:8900 iportal</param-value>(please add //,/ respectively in the blank spaces.)
</context-param>
<context-param>
<param-name>actuate.serverLogin</param-name>
<param-value>administrator</param-value>
</context-param>
<context-param>
<param-name>actuate.serverPassword</param-name>
<param-value></param-value>
</context-param>
<context-param>
<param-name>org.eclipse.birt.configPath</param-name>
<param-value>**/configuration/config.ini**</param-value> 
</context-param>

**Place the configuration folder inside WEB-CONTENT.**

If this is not done properly you can get null pointer exception.

4\. Copy the "platform" folder inside WEB-INF.

5\. The list of required jars are mentioned in the screen attached with this post.
(Downloading the dummy module of jsf4birt from exadel website will be helpful).

6\. A tricky part that I found after struggling for few days. If you get **version mismatch error or unsupported exception**, open your reportfile.rptdesign in text editor u will get something like 
<report xmlns="http //www.eclipse.org/birt/2005/design" **version="3.2.20"** id="1">

Change this version to the one that is supported by your server/IDE. I changed it from 3.2.23 to 3.2.20.

7\. Finally the birt:birtWrapper worked for me. Where country is my parameter.

<birt:birtWrapper id="t" reportDesign="customerdetails.rptdesign" rendered="true">
<f:param name="country" value="#{form.country}"></f:param></birt:birtWrapper>

And then finally it worked for me. 

I am trying to explore more features of BIRT like adding comments to a point on chart and generating reports in pdf format. Please do let me know if you are aware of these stuffs. 
```

# perl - 使用 Net::Stomp 的 Perl 到 Java Active MQ 消息传递

> ID：10211997
> 
> 赞同：0
> 
> 时间：2012-04-18T14:50:06.777
> 
> 标签：perl, spring, activemq, stomp

我正在尝试使用 Perl 的 Net::Stomp 向 Active MQ 主题发送消息。另一方面，Java 客户端监视主题并从中获取消息。Active MQ 基于 Spring 框架，我在 Spring config.xml 中定义了以下内容

```
<amq:transportConnectors>
        <amq:transportConnector name="openwire" uri="tcp://localhost:61616" />
        <amq:transportConnector name="stomp" uri="stomp://localhost:61613" />
</amq:transportConnectors>
<!--  ActiveMQ destinations to use for RTlog Messages -->
<amq:topic id="rTlogDest"  physicalName="RTlogTopic" name="RTlogTopic"/> 
```

从 Perl 发送的消息根本没有被另一端的 Java 客户端接收。perl 代码如下所示。有什么不对吗？

```
use Net::Stomp;
my $stomp = Net::Stomp->new({hostname => 'localhost', port => '61613'});
$stomp->connect({login => 'admin', passcode => 'password'});

#$stomp->send({destination => 'RTlogTopic', body => 'test message'});

$frame = Net::Stomp::Frame->new(
      { command => 'SEND', 
        headers => { 'destination' => 'RTlogTopic',
                     'timestamp' => time
                   }, 
        body => 'test message' } );

$stomp->send_frame($frame);

$stomp->disconnect; 
```

我也使用过该`$stomp->send`方法（上面已注释掉），但它也不起作用。然后我在某处读到 STOMP 需要对消息进行构图和发送，因此我对消息进行了构图。MQ Java 侦听器适用于通过 TCP（来自其他 java 客户端）进入端口 61616 的消息，但我无法通过 61613（多个消息生产者）使其适用于 Perl。我搜索了一下，发现很多人都让它在 PHP 到 Java 上工作，但没有一个 Perl 到 Java 的例子。是否有不同的方式需要在 Java 监视器端（消费者）处理 Stomp 消息或通常的 onMessage 实现（如 TCP）应该工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:50:58.333

我实现了向 Activemq 队列发送消息（仅供参考，5.3）。您可以在下面检查代码。

首先，在 stomp-perl 端检查你的目标名称是否正常，它应该类似于“/topic/abc”发送到 Amq 主题 abc。见[http://activemq.apache.org/stomp.html](http://activemq.apache.org/stomp.html)

您还可以通过将浏览器指向[http://localhost:8161/admin](http://localhost:8161/)或运行 Amq 的主机来检查您的消息是否在您的队列中或已发布到您的主题中。

希望这可以帮助。

这是示例代码：

```
#!/usr/bin/perl
use Net::Stomp;

my $msg = "hello world\n";
print $msg

# send a message to the queue 'xyz'

my $stomp = Net::Stomp->new( { hostname => 'localhost', port => '61613' } );
$stomp->connect( { login => 'hello', passcode => 'there' } );
$stomp->send(
   { destination => '/queue/xyz', body => $msg } );
$stomp->disconnect; 
```