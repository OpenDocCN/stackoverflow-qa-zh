# StackOverflow 问答 11344000-11344999

# android - 从 mysql 加载数据后立即停止在 android 中加载屏幕

> ID：11344001
> 
> 赞同：0
> 
> 时间：2012-07-05T12:06:45.470
> 
> 标签：android, mysql, eclipse, splash-screen

我正在研究 android 项目，在该项目中我必须应用加载屏幕，直到从数据库加载数据。我知道如何启动 proegressBar 但我需要知道如何在从数据库加载数据时停止加载屏幕。如果你可以给我一个简单的例子，我可以从中理解我该怎么做，因为我是新手安卓。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:15:16.130

由于您正在从数据库中获取数据，因此您应该异步进行。最好的方法是使用 AsyncTask。

```
class GetDataTask extends AsyncTask<Void, Void, Void>{
    ProgressDialog dialog;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        dialog = new ProgressDialog(YourActivity.this);
        dialog.setMessage("Loading...");
        dialog.setIndeterminate(true);
        dialog.show();

    }

    @Override
    protected Void doInBackground(Void... params) {
        //get data from DB here
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        dialog.dismiss();
    }       
} 
```

并使其执行：`new GetDataTask().execute();`

# c - 未定义的乘法引用

> ID：11344006
> 
> 赞同：1
> 
> 时间：2012-07-05T12:06:57.260
> 
> 标签：c, gcc, assembly, compilation, linker

我正在尝试在汇编程序中调用 C 函数。这是我的代码：C：

```
int multiply(int what)
{
    return what * 2;
} 
```

ASM：

```
extern multiply

start:
    mov eax, 10
    push eax
    call multiply

    jmp $

;empty 
times 510-($-$$) db 0
dw 0xAA55 
```

我正在通过 gcc (MinGW) 将 C 代码编译为 elf，并通过 NASM 将 ASM 代码编译为 elf。我正在编译它没有任何问题，但是当我尝试使用此代码（用于创建 .bin 文件）时：

```
gcc -o test.bin work.o test.o 
```

我收到此错误： ![我的错误](../Images/31d0ede6d306ac11f31efb2fa48c7cd5.png)

有人知道如何从 ASM 代码调用 C 函数，编译它并将其链接到工作的 .bin 文件吗？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:13:41.233

尝试添加 '_' 来相乘：

```
extern _multiply 
```

在这个简单的例子中为我工作：

```
global  _main

extern  _printf

section .data

text    db      "291 is the best!", 10, 0
strformat db    "%s", 0

section .code

_main
    push    dword text
    push    dword strformat
    call    _printf
    add     esp, 8
    ret 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:34:28.110

在您的 .asm 文件中尝试“全局乘法”而不是“外部乘法”。您不应该需要 ELF 的下划线（我不认为），但是您可以通过在 Nasm 的命令行中添加“--prefix _”来让 Nasm 自动为任何“extern”或“global”添加下划线。

编辑：我收回这一点，“外部”是正确的。您似乎没有“主要”。尝试在 gcc 的命令行中添加“--nostartfiles”（可能只有一个连字符）。

最好的，

坦率

# ios - 是否可以在 iCloud 文件夹中使用 fopen？

> ID：11344007
> 
> 赞同：2
> 
> 时间：2012-07-05T12:07:07.230
> 
> 标签：ios, fopen, icloud

我正在尝试直接在 iCloud 文件夹中创建一个文件，当我尝试对 iCloud 文件夹进行 fopen 时，我面临的问题总是返回 0x0

有没有办法做到这一点？我知道我应该使用 UIDocument 或各种协议，但我只想要一种简单明了的方式来访问该文件夹，就像访问普通文件夹一样。

```
FILE* file;
NSURL tmp = [ubiq URLByAppendingPathComponent:@"Documents"];
char* folder = (char*) [[tmp absoluteString] fileSystemRepresentation];
sprintf(folder, "%s/file1.txt", folder);
file = fopen(folder, "rw+");
fprinf(file, "%s", "this is just an example");
fclose(file); 
```

我还手动尝试了以下文件夹：

```
file://localhost/private/var/mobile/Library/Mobile%20Documents/XXXXXX~com~name~app/Documents/file1.txt
//localhost/private/var/mobile/Library/Mobile%20Documents/XXXXXX~com~name~app/Documents/file1.txt
/private/var/mobile/Library/Mobile%20Documents/XXXXXX~com~name~app/Documents/file1.txt
/var/mobile/Library/Mobile%20Documents/XXXXXX~com~name~app/Documents/file1.txt
/var/mobile/Library/Mobile%20Documents/XXXXXX.com.name.app/Documents/file1.txt
/var/mobile/Library/Mobile Documents/XXXXXX~com~name~app/Documents/file1.txt
/var/mobile/Library/Mobile Documents/XXXXXX.com.name.app/Documents/file1.txt 
```

作为 fopen() 函数调用的结果，它们都返回了 0x0；

先感谢您。

PD：我已经使用 NSFileManager 类成功创建了一个文件。

# javascript - 您可以捕获一个弹出窗口并将其加载到父/打开器屏幕中吗？

> ID：11344008
> 
> 赞同：1
> 
> 时间：2012-07-05T12:07:08.523
> 
> 标签：javascript, jquery, html

我正在开发一个应用程序，其中我有一个通过 iFrame 访问 URL 的 Flash 应用程序。iFrame 的内容是第 3 方内容。内容是您可以浏览的菜单，但是一旦到达某个点，菜单就会弹出一个弹出窗口，而弹出窗口是菜单的延续。

我想知道是否无论如何我可以捕获弹出窗口并将其加载到父/打开器页面中，使用 jQuery 来更改 iframe 的内容？

这个解决方案可能已经存在，但我只是希望能有一个很好的快速修复。

这是一个问题的原因是该应用程序适用于平板电脑，并且弹出窗口没有出现在平板电脑上的应用程序中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:12:21.827

If the iFrame content is served from a different domain than the parent/owner document, you're out of luck - that is, if you have no control over the iframe content. This is due to [JavaScript's same origin policy](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript).

If you *are* able to modify the web app running inside the iframe, you could try using [window.postMessage](https://developer.mozilla.org/en/DOM/window.postMessage) (HTML5) to notify the parent window.

# php - 保存会话数据失败

> ID：11344011
> 
> 赞同：1
> 
> 时间：2012-07-05T12:07:14.707
> 
> 标签：php, session, cookies, yii

我正在尝试在文件中为我的应用程序中的`cookie`会话设置生命周期，我添加了以下内容...`yii``main.confg`

```
'session' => array(
  'class' => 'CCacheHttpSession',
  'cacheID' => 'cache',
  'timeout' => 604800, // 7 days
  'sessionName' => 'zii_s',
  'cookieParams' => array(
    'domain' => '***',
    'path' => '/',
    'httponly' => true,
   'lifetime' => 100000,//this field 

  ),
), 
```

***一旦设置了生命时间值，会话就不会被保存，但是当我删除它或将其值设置为零时，会话就会被保存***

*更新：设置cookie标志存在于HTTP响应及其Set-Cookie:zii_s=j0scslhn7q3s0fib4gns3etl01；到期=格林威治标准时间 2012 年 7 月 5 日星期四 16:00:54；路径=/; 域= *** ; 仅Http*

谁能告诉我为什么？

# qt - 使用 QTreeWidget::itemAt 只能访问一项

> ID：11344016
> 
> 赞同：1
> 
> 时间：2012-07-05T12:07:43.437
> 
> 标签：qt, qtreewidget

我有一个 QTreeWidget 声明如下

```
QTreeWidget * datasiftIdpwTree;
datasiftIdpwTree->setColumnCount(2);
datasiftIdpwTree->headerItem()->setText(0, "Username");
datasiftIdpwTree->headerItem()->setText(1, "Api Key"); 
```

它使用以下插槽填充数据

```
void Window::addDatasiftIdpw(QString username, QString apikey)
{
    datasiftIdpwTree->addTopLevelItem(new QTreeWidgetItem(QStringList(username) << apikey));
} 
```

我可以实时查看插槽添加数据到我的树，问题是访问数据时。我尝试使用

```
datasiftIdpwTree->itemAt(x,y)->text(0); 
```

但是我使用的 x, y 的值总是指向第一项（第一次调用 addDatasiftIdpw 时产生的那个）我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:26:58.973

我在坐标和索引之间犯了一个错误。访问第 i 个元素通过以下方式实现：

```
datasiftIdpwThree->topLevelItem(i)->text(0); 
```

# linq - Linq 和 lambda 表达式

> ID：11344019
> 
> 赞同：4
> 
> 时间：2012-07-05T12:07:55.797
> 
> 标签：linq, lambda

LINQ 和 Lambda 表达式有什么区别？使用 lambda 而不是 linq 查询有什么好处吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-05T12:14:54.807

Linq 是语言集成查询。在使用 linq 时，经常会使用一个小的匿名函数作为参数。那个小的匿名函数是一个 lambda 表达式。

```
var q = someList.Where(a => a > 7); 
```

在上面的查询`a => a > 7`中是一个 lambda 表达式。这相当于编写一个小型实用程序方法并将其传递给`Where`：

```
bool smallMethod(int value)
{
  return value > 7;
}

// Inside another function:
var q = someList.Where(smallMethod); 
```

This means that your question is really not possible to answer. Linq and lambdas are not interchangeable, rather lambdas are one of the technologies used to implement linq.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:12:34.903

LINQ 是语言集成查询，其中 lamda 表达式类似于 .Net 2.0 的匿名方法。

您无法真正比​​较它们，您可能会感到困惑，因为 LINQ 大部分时间都与 lamda 表达式相关联。

你需要看这篇文章：[LINQ & Lamda 表达式基础](http://www.codeproject.com/Articles/33769/Basics-of-LINQ-Lamda-Expressions)

编辑：（我不太确定，但可能是您正在寻找[Query Syntax 和 Method Sytnax](http://msdn.microsoft.com/en-us/library/bb397947.aspx)之间的区别）

```
int[] numbers = { 5, 10, 8, 3, 6, 12};

//Query syntax:
IEnumerable<int> numQuery1 = 
    from num in numbers
    where num % 2 == 0
    orderby num
    select num;

 //Method syntax:
 IEnumerable<int> numQuery2 = numbers.Where(num => num % 2 == 0).OrderBy(n => n); 
```

在上面取自[MSDN](http://msdn.microsoft.com/en-us/library/bb397947.aspx)的示例中，Method Sytnax 包含一个 lamda 表达式`(num => num % 2 == 0)`，其工作方式类似于方法，将数字作为输入，如果它们是偶数则返回 true。

它们都很相似，用[Jon Skeet 的话来说，它们都编译成相似的代码](https://stackoverflow.com/questions/3776577/net-linq-query-syntax-vs-method-chain)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:13:10.250

简而言之：

LINQ 是一种查询技术（Language Integrated Query）。LINQ 广泛使用 lambda 作为标准查询运算符方法（例如 Where 子句）的参数。

lambda 表达式是包含表达式和语句的匿名函数。它与 LINQ 完全分离和不同。

# php - PHP 中的 CSV 或二进制文件

> ID：11344022
> 
> 赞同：1
> 
> 时间：2012-07-05T12:08:04.937
> 
> 标签：php, csv, binary

我的情况真的很奇怪。一切都按预期工作，但我有一个问题。

我正在使用 PUT HTTP 命令将 .csv 文件从我的服务器传输到另一台服务器。

在我使用的第二台服务器上

```
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
  //Putting into the database
} 
```

解析 csv 文件并在数据库中插入每一行。

我的问题是。

如果我将`.csv`文件作为二进制文件发送以减少网络开销。我将如何修改从二进制格式读取 csv 文件以解析它的方式？

最后，首先将二进制文件再次解析为的处理能力和时间开销如何`csv`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:15:40.967

除了一些多字节编码和人类可读性之外，二进制文件和文本文件之间没有真正的区别。大多数编码中的字母 A 存储为值为 65 的字节，并且没有办法将其“转换”为二进制，因为它已经是。

您正在寻找的是压缩。你可能想看看`gzip()`你的输出。

# android - 在片段中添加边距

> ID：11344024
> 
> 赞同：1
> 
> 时间：2012-07-05T12:08:20.710
> 
> 标签：android, android-fragments

在我的应用程序中，我正在使用片段。问题是我无法为列表中的每个项目设置边距`TitlesFragment extends ListFragment`。我还必须为里面显示的完整数据集添加边距`DetailsFragment extends Fragment`。如何才能做到这一点？请帮帮我。提前致谢。

请看我的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:background="@drawable/bg"
android:orientation="vertical" >

<ListView
    android:id="@+id/list_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:cacheColorHint="#00000000"
    android:divider="@android:color/transparent"
    android:dividerHeight="10dp"
    android:scrollbars="none"
    android:smoothScrollbar="true" >
</ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:11:21.287

您必须在文件中设置`divider`和`dividerHeight`属性`layout.xml`。例如

```
<ListView
  android:id="@android:id/list"
  android:divider="@android:color/transparent"
  android:dividerHeight="5dip" /> 
```

这样，您将获得`ListFragment`间隔的所有元素`5 dip`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T17:00:12.563

ListViews（连同 Fragments、ListFragments 等）似乎覆盖了提供的布局的根参数（高度、宽度），以便将预定义的 View/Item 尺寸适合父级。这似乎也发生在每个布局的孩子最大尺寸上，例如，来自 AOSP 的 simple_list_item_1.xml 的 TextView

由于您专门要求 ListView 项目间距，我仍然不会按照 blackbelt 的建议使用 dividerHeight ，因为这会改变原始内容的居中（第一个项目也不会从列表顶部获得所需的间距，如分隔线位于每个项目下方）。

对于 ListView 项目，您通常可以通过设置具有顶部和底部**边距**的自定义布局（由自定义适配器调用）来覆盖此行为。请参阅以下基于示例的 simple_list_item_1.xml 并注意最后的边距修饰符：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceListItemSmall"
    android:gravity="center_vertical"
    android:paddingStart="?android:attr/listPreferredItemPaddingStart"
    android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"
    android:minHeight="?android:attr/listPreferredItemHeightSmall"

    android:layout_marginTop="20dp"
    android:layout_marginBottom="20dp"
/> 
```

（您可能需要为对“?android:attr”的非公开引用提供内联值）

然后，您必须为您的列表调用一个自定义适配器（例如 ArrayAdapter）并将您的自定义列表项 XML 提供给它。

# java - JAXB unmarshaller 下 sun.misc.URLClassPath.getLoader 中的高锁争用

> ID：11344031
> 
> 赞同：4
> 
> 时间：2012-07-05T12:08:49.240
> 
> 标签：java, jaxb, jaxp

我们在 weblogic 上运行了这段特殊的代码，它的功能是从 XML 输入字符串返回一个特定于输入类的 java 对象。代码本身将被多个线程（50+）使用。

```
public static Object toXMLObject(String XMLString, Class xmlClass)
        throws Exception {

    StringReader strReader = null;

    try {

        JAXBContext context = JAXBContexts.getJAXBContext(xmlClass); //Cached JAXBContext
        Unmarshaller unmarshaller = context.createUnmarshaller();

        strReader = new StringReader(XMLString);

        return unmarshaller.unmarshal(strReader);

    } catch(Exception e){
        throw e;
    } finally {
        if(strReader != null){
            strReader.close();
        }
    }

} 
```

我们从线程转储中看到的是多个线程（51 个线程）试图锁定单个对象

```
 ExecuteThread: '52' for queue: 'automation'" daemon prio=3 tid=0x0000000103bcf800 nid=0x1a4 waiting for monitor entry [0xfffffffac2cfb000]**
     java.lang.Thread.State: BLOCKED (on object monitor)
at sun.misc.URLClassPath.getLoader(URLClassPath.java:279)
- locked <0xfffffffb89f00ed8> (a sun.misc.URLClassPath)
at sun.misc.URLClassPath.findResource(URLClassPath.java:145)
at java.net.URLClassLoader$2.run(URLClassLoader.java:385)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findResource(URLClassLoader.java:382)
at java.lang.ClassLoader.getResource(ClassLoader.java:1002)
at java.lang.ClassLoader.getResource(ClassLoader.java:997)
at java.lang.ClassLoader.getResource(ClassLoader.java:997)
at weblogic.utils.classloaders.GenericClassLoader.getResourceInternal(GenericClassLoader.java:168)
at weblogic.utils.classloaders.GenericClassLoader.getResource(GenericClassLoader.java:182)
at weblogic.utils.classloaders.FilteringClassLoader.getResourceInternal(FilteringClassLoader.java:129)
at weblogic.utils.classloaders.GenericClassLoader.getResourceInternal(GenericClassLoader.java:154)
at weblogic.utils.classloaders.GenericClassLoader.getResource(GenericClassLoader.java:182)
at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:1192)
at org.apache.xerces.parsers.SecuritySupport$6.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at org.apache.xerces.parsers.SecuritySupport.getResourceAsStream(Unknown Source)
at org.apache.xerces.parsers.ObjectFactory.findJarServiceProvider(Unknown Source)
at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)
at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)
at org.apache.xerces.parsers.SAXParser. (Unknown Source)
at org.apache.xerces.parsers.SAXParser. (Unknown Source)
at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser. (Unknown Source)
at org.apache.xerces.jaxp.SAXParserImpl. (Unknown Source)
at org.apache.xerces.jaxp.SAXParserFactoryImpl.newSAXParser(Unknown Source)
at weblogic.xml.jaxp.RegistrySAXParser. (RegistrySAXParser.java:65)
at weblogic.xml.jaxp.RegistrySAXParser. (RegistrySAXParser.java:46)
at weblogic.xml.jaxp.RegistrySAXParserFactory.newSAXParser(RegistrySAXParserFactory.java:91)
at javax.xml.bind.helpers.AbstractUnmarshallerImpl.getXMLReader(AbstractUnmarshallerImpl.java:86)
at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137)
at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:194)
at com.util.XMLParserUtil.toXMLObject(XMLParserUtil.java:699)

  ExecuteThread: '78' for queue: 'automation'" daemon prio=3 tid=0x000000010363b800 nid=0x1be waiting for monitor entry [0xfffffffabf8fb000]**
   java.lang.Thread.State: BLOCKED (on object monitor)
at sun.misc.URLClassPath.getLoader(URLClassPath.java:279)
- waiting to lock <0xfffffffb89f00ed8> (a sun.misc.URLClassPath)
at sun.misc.URLClassPath.findResource(URLClassPath.java:145)
at java.net.URLClassLoader$2.run(URLClassLoader.java:385)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findResource(URLClassLoader.java:382)
at java.lang.ClassLoader.getResource(ClassLoader.java:1002)
at java.lang.ClassLoader.getResource(ClassLoader.java:997)
at java.lang.ClassLoader.getResource(ClassLoader.java:997)
at weblogic.utils.classloaders.GenericClassLoader.getResourceInternal(GenericClassLoader.java:168)
at weblogic.utils.classloaders.GenericClassLoader.getResource(GenericClassLoader.java:182)
at weblogic.utils.classloaders.FilteringClassLoader.getResourceInternal(FilteringClassLoader.java:129)
at weblogic.utils.classloaders.GenericClassLoader.getResourceInternal(GenericClassLoader.java:154)
at weblogic.utils.classloaders.GenericClassLoader.getResource(GenericClassLoader.java:182)
at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:1192)
at org.apache.xerces.parsers.SecuritySupport$6.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at org.apache.xerces.parsers.SecuritySupport.getResourceAsStream(Unknown Source)
at org.apache.xerces.parsers.ObjectFactory.findJarServiceProvider(Unknown Source)
at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)
at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)
at org.apache.xerces.parsers.SAXParser. (Unknown Source)
at org.apache.xerces.parsers.SAXParser. (Unknown Source)
at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser. (Unknown Source)
at org.apache.xerces.jaxp.SAXParserImpl. (Unknown Source)
at org.apache.xerces.jaxp.SAXParserFactoryImpl.newSAXParser(Unknown Source)
at weblogic.xml.jaxp.RegistryXMLReader.getXMLReader(RegistryXMLReader.java:523)
at weblogic.xml.jaxp.RegistryXMLReader.getXMLReaderInternal(RegistryXMLReader.java:453)
at weblogic.xml.jaxp.RegistryXMLReader.parse(RegistryXMLReader.java:158)
at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:211)
at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:184)
at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137)
at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:194)
at com.util.XMLParserUtil.toXMLObject(XMLParserUtil.java:699) 
```

我们是否正确实现了 JAXB 代码？我们怎样才能克服这个问题。附言。我们在 JDK1.6.0_33 上用最新版本 (1.4.6) 覆盖了 JAXP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:24:12.080

您可以尝试执行以下操作：

```
package forum11344031;

import java.io.StringReader;
import javax.xml.bind.*;
import javax.xml.stream.*;

public class Demo {

    private static final XMLInputFactory XIF = XMLInputFactory.newFactory();

    public static Object toXMLObject(String XMLString, Class xmlClass)
            throws Exception {
        Object o;
        StringReader strReader = null;
        try {
            JAXBContext context = JAXBContexts.getJAXBContext(xmlClass); //Cached JAXBContext
            Unmarshaller unmarshaller = context.createUnmarshaller();

            strReader = new StringReader(XMLString);
            XMLStreamReader xmlStreamReader = XIF.createXMLStreamReader(strReader);
            o = unmarshaller.unmarshal(xmlStreamReader);
            xmlStreamReader.close();
        } catch(Exception e){
            throw e;
        } finally {
            if(strReader != null){
                strReader.close();
            }
        }
        return o;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:06:13.713

这个怎么样，这有帮助吗？

“-Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl”

根据幻灯片#49 [http://www.slideshare.net/sjlee0/robust-and-scalable-concurrent-programming-lesson-from-the-trenches](http://www.slideshare.net/sjlee0/robust-and-scalable-concurrent-programming-lesson-from-the-trenches)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T12:46:27.987

谢谢。我发现演示文稿“Robust and Scalable Concurrent Programming”非常有用。我已经成功测试了第 49-50 页的解决方案。现在我在 ObjectFactory.createObject 方法中看不到锁。

神奇的解决方案是为每个线程保留不同的 SAXParser。

```
static private final ThreadLocal<SAXParser> sps = new ThreadLocal<SAXParser>();

public static SAXParser getParser() throws ParserConfigurationException, SAXException {
    SAXParser parser = sps.get();
    if (parser == null) {
        parser = spf.newSAXParser();
        sps.set(parser);
    }
    return parser;
} 
```

# php - 为 CakePHP 创建一个 URL 组件

> ID：11344033
> 
> 赞同：0
> 
> 时间：2012-07-05T12:09:02.237
> 
> 标签：php, cakephp, components, cakephp-2.0

作为一个练习，我想为 CakePHP 框架创建一个组件。我一直在考虑创建一个 URL 组件来处理所有 URL 的东西。

我在考虑这种方法：

*   `getRealURL($shortedURL)`
*   `getDomain($url)`
*   `isSecure($url)`
*   `getProtocol($url)`
*   `getPort($url)`
*   `getExtension($url)`
*   `getShortURL($url)`
*   `isYoutubeVideo($url)`
*   `getParam($url, $var)`
*   `getNumberOfParams($url)`
*   `getParams($url, $vars)`
*   `isImage($url)`
*   `getURLFromText($text)`
*   `eraseURlsFromText($text)`
*   `shortURLsFromText($text)`

你怎么看待这件事？对于组件还有其他想法吗？你认为最后 3 个不应该在这个组件中吗？

欢迎任何其他建议:)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:13:50.810

这是已经可用的东西（端口，url，ssl，参数，协议，...参见响应/请求对象）和一些不应该进入框架核心的非常不常见的东西的狂野组合。

这也不应该是一个组件，实际上不是它，而是行为和助手。

因此，如果您想这样做，请在 github 上创建一个插件并在那里发布。

# java - SELECT * FROM 表在 JDBC 中引发错误

> ID：11344034
> 
> 赞同：2
> 
> 时间：2012-07-05T12:09:04.330
> 
> 标签：java, jdbc

我正在尝试从一个表中进行选择，该表适用于我的数据库中的所有其他表，但是当我尝试以下操作时，我收到一个错误：

```
db.makeQuery("SELECT * FROM References"); 
```

哪个电话：

```
public ResultSet makeQuery(String query) throws Exception
{
    preparedStatement = connect.prepareStatement(query);
    resultSet = preparedStatement.executeQuery(query);
    return resultSet;

} 
```

然后它会抛出以下错误：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException:
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 'References' at line 1 
```

我觉得我很奇怪，因为这个陈述有效：

```
db.makeQuery("select * from Products"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T12:10:23.293

`References`是 SQL 中的关键字，因此您最好避免在表名中使用它。（例如参见[本文档](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。）

正如 Nishant 所建议的，如果您使用反引号对保留字进行转义，则*可以在查询中使用保留字。*

相关问题：

*   [在查询中使用 MySQL 关键字？](https://stackoverflow.com/questions/6831674/using-mysql-keywords-in-a-query)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T12:11:22.123

采用

```
 db.makeQuery("SELECT * FROM `References`"); 
```

如果可以，最好避免使用 MySQL 关键字的名称。正如[aioobe所建议的那样](https://stackoverflow.com/a/11344054/298455)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:11:50.973

您可能拼错了表格的名称。当 MySQL 找不到您所指的那个表时，它会给出这个错误。

Use `SHOW TABLES;` to see the names of the tables in your database, and double-check the name.

# json - 如何使用 $.Ajax 方法将 json 从视图传递到控制器？

> ID：11344035
> 
> 赞同：1
> 
> 时间：2012-07-05T12:09:05.593
> 
> 标签：json

我想使用 $.ajax 方法从视图接收 json 对象到控制器，但我不知道为什么控制器中的接收对象显示空数据。

这是我的代码。

```
$("#Save").click(function (e) {

       $.ajax({ url: "Home/Save",
        type: "POST",
        datatype:'json',                
        data: ({movies:movies})
      });
}); 
```

其中 movies 是 javascript 数组，其中包含

```
 ({
    Name:"DDLJ",Stars:"SRK",Director:"Yashraj",Year:"2012"
    }, {Name:"K3G",Stars:"SRK",Director:"Karan",Year:"2010"}
) 
```

我的控制器代码是：

```
public string Save (List<MovieDB> movies)
        {
         return "";
        } 
```

其中 MovieDB 是我的模型类，它具有属性

```
public class MoviesDB   
    {
        //public int MoviesID { get; set; }
        public string Name { get; set; }
        public string Stars { get; set; }
        public string Director { get; set; }
        public DateTime Year { get; set; }
    } 
```

请建议我任何更好的方法来接收从视图到控制器的 json 数据。

实际上，我尝试将 javascript 数组对象从视图发送到控制器操作方法，其中我的数组代码是

```
<script type="text/javascript">
    var cnt = 1;
        var cnt2 = 1;
        var i;
        var movies = [];

    movies.push({ Name: $("#txtMovieName").val(), Stars: $("#txtStarCasts").val(), Director: $("#txtDirector").val(), Year: $("#txtYear").val(), Index: cnt++ });

                    $("#modelTable").empty();

                    $("#modelTemplate").tmpl(movies).appendTo($("#modelTable"));

                    $("#txtMovieName").val("");
                    $("#txtStarCasts").val("");
                    $("#txtDirector").val("");
                    $("#txtYear").val("");
                    $("#txtMovieName").focus();
                    e.preventDefault();
            });

  $("#Save").click(function (e) {

            //var jm = $.toJSON(movies);
            $.ajax({ url: "Home/Save",
                type: "POST",

                data: ({movies:movies})
                // contentType: 'application/json; charset=utf-8'
             });
        });

    </script> 
```

现在我想使用 json 或其他任何方式将电影 javascript 数组对象发送到控制器的 Save() Action 方法，请给我一些建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:47:47.633

这不是一个正确的 json。你可以在[JSONLint上查看](http://jsonlint.com)

这是正确的json：

```
[
    {
        "Name": "DDLJ",
        "Stars": "SRK",
        "Director": "Yashraj",
        "Year": "2012"
    },
    {
        "Name": "K3G",
        "Stars": "SRK",
        "Director": "Karan",
        "Year": "2010"
    }
] 
```

如果仍有错误，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:06:43.827

如果您想在发布后将数据输入控制器，也许这是一个更好的答案。

```
//For going to your view.
public ActionResult Create()
{
    MoviesDB model = new MoviesDB();
    return View("Create", model);
}

[HttpPost]
public ActionResult Create(MoviesDB model)
{
    if (ModelState.IsValid)
    {
        //Here you can use your model param 
        //with the filled in values of your view.

        return RedirectToAction("Index"); 
        //when everything works fine, go to this view.
    }
    else
    {
        return RedirectToAction("Index"); 
        //when there is a problem, go to this view.
    }

    return View("Index");
} 
```

您不需要 jQuery 从您的视图中使用您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:23:23.917

```
 List<xyztype> lstid = new JavaScriptSerializer().Deserialize<List<xyztype>>(IDlist); 
```

为我工作

这里 xyztype 是我的集合类类型，IDlist 是我从视图到控制器操作方法的 json 对象字符串

通过使用 javascriptserializer().deserializer<> 我们可以将 json 字符串转换为我们的自定义或系统数据类型对象

例如 ：

```
 List<string> lstid = new JavaScriptSerializer().Deserialize<List<string>>(IDlist); 
```

# php - 使用 SELECT 和 switch 的 PHP 和 mysql 问题

> ID：11344037
> 
> 赞同：0
> 
> 时间：2012-07-05T12:09:22.143
> 
> 标签：php, mysqli, switch-statement

您好我正在尝试根据目录结构选择表，但查询无法正常工作。Pets 是主文件夹，里面有文件夹 Dogs 、 Cats 、 fishes 、 Horses [http://animalswecare.com/Pets/Dogs/](http://animalswecare.com/Pets/Dogs/)

[http://animalswecare.com/Pets/Cats/](http://animalswecare.com/Pets/Cats/)

[http://animalswecare.com/Pets/Horses/](http://animalswecare.com/Pets/Horses/)

我正在根据目录结构选择表，例如如果页面在 Pets>Dogs 然后是表 dogs_DB ，如果相同的代码或页面放在 Pets>Cats 然后表cats_DB 我使用 echo 进行检查，输出在代码的末尾。

```
 <?php
include('../../connectuser.php');
echo $ab=$_SERVER['PHP_SELF'];
$show=explode ("/",$ab);
echo $show[0]."<br />";
echo $show[1]."<br />";
echo $show[2]."<br />";
echo $pagename= $show[1].$show[2];
echo "<br />";
switch ( $pagename ) {

 case 'PetsDogs':  
 $tbl_name = 'dogs_DB';
 break;

 case 'PetsCats':  
 $tbl_name = 'cats_DB';
 break;

 case 'PetsFishes':  
 $tbl_name = 'fishes_DB';
 break;

 case 'PetsHorses':  
 $tbl_name = 'horses_DB';
 break;
 }
 echo $tbl_name;
 echo "<br />";
 echo $sel = "SELECT * FROM $tbl_name" or die('error in query');
 $fetch = mysqli_query( $dbc, $sel );

 while ( $row = mysqli_fetch_array( $fetch ) ) {

 echo $title;
 $title = $row['title'];
 }
 echo "<br />";

  echo $title."hiii";
 ?> 
```

[http://animalswecare.com/Pets/Dogs/get_links.php](http://animalswecare.com/Pets/Dogs/get_links.php)

页面放在 Pets>Dogs 文件夹 /Pets/Dogs/get_links.php 下时的输出

宠物

小狗

宠物狗

狗_DB

1

hiii

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:20:11.387

似乎 $row['title'] 的查询行设置为空字符串。如果为 null，则最后一个 echo 不会输出任何内容。尝试 var_dump() 以获取有关变量的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:28:38.887

启动一个变量，如

```
$pagename = $show[1].$show[2]; 
```

不是

```
echo $pagename= $show[1].$show[2]; 
```

while 循环中的 $title 变量也是如此

```
echo $title;
$title = $row['title']; 
```

改为

```
$title = $row['title'];
echo $title; 
```

由于看起来您想在循环外部使用 $title 变量，因此您还需要在外部声明它。

```
$title = "";
while ( $row = mysqli_fetch_array( $fetch ) ) {
 $title = $row['title'];
 echo $title;     
}
echo "<br />";
echo $title."hiii"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:16:43.403

`$title`在循环结束时似乎为空 `while ( $row = mysqli_fetch_array( $fetch ) )`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T12:22:14.397

这两条线不应该反过来吗？

```
echo $title;
$title = $row['title']; 
```

所以：

```
while ( $row = mysqli_fetch_array( $fetch ) ) {

    $title = $row['title'];
    echo $title;
}
echo "<br />";

echo $title."hiii"; 
```

# wpf - 如何在列表视图的数据模板中订阅事件

> ID：11344038
> 
> 赞同：2
> 
> 时间：2012-07-05T12:09:23.093
> 
> 标签：wpf, events, xaml, mvvm, command

在 WPF 中，我有一个绑定到 ObservableCollection 的列表视图。

XAML：

```
<ListView Name="listView" DockPanel.Dock="Top" ItemsSource="{Binding Path=ListOfOldData}" SelectedItem="{Binding Path=SelectedOldData, Mode=TwoWay}" SelectionMode="Single">
        <ListView.ContextMenu>
            <ContextMenu>
              <Button Content="Load" Command="{Binding Path=LoadCommand}"  Name="loadButton" Height="23" Width="75" DockPanel.Dock="Left"/>             
              <!-- Is working just fine -->         
            </ContextMenu>
        </ListView.ContextMenu>
        <ListView.ItemTemplate>
            <DataTemplate>
                <TextBlock MouseLeftButtonDown="TextBlock_MouseLeftButtonDown"
                           Text="{Binding Path=Name}" FontWeight="Bold"><TextBlock Text=" - " FontWeight="Normal"/><TextBlock Text="{Binding Path=UpdateDatum}" FontWeight="Normal"/></TextBlock>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

我真正想要收到的是双击所选项目。由于我无法将命令绑定到 xaml 中的文本块（可以吗？），我尝试通过`MouseLeftButtonDown-Event`. 但该事件从未收到！

C#（在后面的代码中）：

```
private void TextBlock_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    Console.WriteLine("MouseLeftButtonDown received!");
} 
```

我究竟做错了什么？如何接收活动？顺便说一句：上下文菜单的命令工作得很好:)

**更新**我发现了我的错误——>我在错误的用户控件中添加了事件。该死的，我的注意力不集中。很抱歉打扰大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:37:24.687

您可以简单地使用 blend sdk (System.Windows.Interactivity.dll) 中的 InvokeCommandAction

```
 <ListView x:Name="lvw" ItemsSource="{Binding ListOfOldData}">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseDoubleClick">
                <i:InvokeCommandAction  Command="{Binding Path=OpenCommand}" 
                                            CommandParameter="{Binding ElementName=lvw, Path=SelectedItem}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>

    </ListView> 
```

编辑：viewmodel 应该是这样的：

```
 public List<object> ListOfOldData{ get; set; }

    private DelegateCommand<object> _openCommand;//or RelayCommand

    public DelegateCommand<object> OpenCommand
    {
        get { return _openCommand?? (this._openCommand= new DelegateCommand<object>(this.Execute)); }
    }

    private void Execute(object obj)
    {
        //obj is your selectedItem
    } 
```

ps：不知道你的类型这就是为什么反对

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:31:33.800

有`ListView`一个 DoubleClick MouseEvent。这应该这样做：

```
<ListView MouseDoubleClick="DoubleClickOnIt">
   <ListView.ItemTemplate>
      <DataTemplate>
         <TextBlock Text="{Binding Path=Name}" FontWeight="Bold">
            <TextBlock Text=" - " FontWeight="Normal"/>
            <TextBlock Text="{Binding Path=UpdateDatum}" FontWeight="Normal"/>
         </TextBlock>
      </DataTemplate>
   </ListView.ItemTemplate>

   <ListViewItem>
      dddd
   </ListViewItem>
   <ListViewItem>
      eeeee
   </ListViewItem>
</ListView> 
```

以及背后的代码：

```
private void DoubleClickOnIt(object sender, MouseButtonEventArgs e)
{
   var listView = sender as ListView;
   var selectedItem = listView.SelectedItem;
   Console.WriteLine("received!");
} 
```

# objective-c - 我可以使用以下方法作为 IBAction

> ID：11344040
> 
> 赞同：0
> 
> 时间：2012-07-05T12:09:26.017
> 
> 标签：objective-c, cocoa-touch, interface-builder, uipageviewcontroller

我可以将以下功能用作 IBAction - 单击按钮吗？如果是，请告诉我如何...

```
-(UIViewController *)pageViewController:(UIPageViewController *)pageViewController
      viewControllerAfterViewController:(UIViewController *)viewController

-(UIViewController *)pageViewController:(UIPageViewController *)pageViewController 
     viewControllerBeforeViewController:(UIViewController *)viewController 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:12:29.143

No, you can't.

`IBAction` is actually equal to `void` -> only void returning methods can be connected.

[http://cocoadev.com/wiki/IBAction](http://cocoadev.com/wiki/IBAction)
[IBOutlet and IBAction](https://stackoverflow.com/questions/1643007/iboutlet-and-ibaction)

Also the methods you are referring to are implementing the [UIPageViewControllerDataSource](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerDataSourceProtocolRef/UIPageViewControllerDataSource.html), therefore a UIPageViewController should call them, but never you, see [Delegates and Data Sources](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW18).

# android - com.android.contacts.ImportVCardActivity 在索尼爱立信 Experia mini 中不支持

> ID：11344047
> 
> 赞同：0
> 
> 时间：2012-07-05T12:09:53.297
> 
> 标签：android, android-contacts, vcf-vcard

我正在尝试使用以下代码启动导入联系人活动，但此代码不适用于具有 Android 2.1 的索尼爱立信 Experia 迷你手机我尝试了这两个选项但无法正常工作。

```
 Intent i = new Intent();
               i.setComponent(new ComponentName("com.android.contacts","com.android.contacts.ImportVCardActivity"));
               startActivity(i); 
```

或者

```
 Intent intent =new Intent();
               intent.setComponent(new ComponentName("com.android.contacts","com.android.contacts.vcard.ImportVCardActivity"));
               startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:12:00.503

用这个：

```
Intent i = new Intent();
i.setComponent(new ComponentName("com.sonyericsson.contacts",
  "com.sonyericsson.contacts.contactlist.ImportVCardActivity")); 
```

# java - 一个 Java 应用程序，但 2 个进程 java 和 javaw？

> ID：11344048
> 
> 赞同：0
> 
> 时间：2012-07-05T12:10:03.437
> 
> 标签：java

我对我的申请有点迷茫。

我只运行一个摆动应用程序（一个窗口），但在任务管理器中我有两个进程：java.exe 和 javaw.exe 都消耗资源。

我发现没有 java 控制台时会使用 javaw.exe，这就是我的应用程序的情况。

所以我想知道为什么我的应用程序正在运行和使用“java.exe”进程？

我的应用程序是由 exe 启动的（通过 launch4j），也许它来自那个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:13:10.907

Most likely launch4j runs a java.exe console, which in turns starts a javaw.exe for running your GUI application. java.exe is for console applications only.

# javascript - 鼠标悬停图像干扰

> ID：11344050
> 
> 赞同：0
> 
> 时间：2012-07-05T12:10:05.423
> 
> 标签：javascript, internet-explorer, mouseevent

使用 IE8，我在包含多个图像的 div 上有一个 mouseover 事件。

在 div 上移动时，事件触发正常，但问题是当用户输入并存在图像时，div mouseover 再次触发。

Apperenlty IE8 将悬停图像视为离开 div。有谁知道一个不错的方法，因此事件在进入 div 时仅触发一次，并且在用户处于 div 边界时不再触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:13:05.073

使用[`mouseenter`](https://developer.mozilla.org/en/DOM/DOM_event_reference/mouseenter)and[`mouseleave`](https://developer.mozilla.org/en/DOM/DOM_event_reference/mouseleave)代替`mouseover`and`mouseout`

# android - android rss feed中的黑色背景

> ID：11344058
> 
> 赞同：0
> 
> 时间：2012-07-05T12:10:34.907
> 
> 标签：android

我已将 rss 提要拉入我的 android 应用程序，在一行中显示每个项目，然后在列表视图中显示这些项目。我遇到的问题是提要项目后面有一个黑色背景，我似乎无法摆脱它，即使使用透明作为背景。我肯定将其缩小为提要项目本身，而不是列表视图，因为我有背景。请参阅下面的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical">

<LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="10dp">

    <LinearLayout
        android:layout_width="55dp"
        android:layout_height="60dp"
        android:orientation="vertical"
        android:paddingTop="3dp" >

        <ImageView
            android:id="@+id/twitter_icon"
            android:layout_width="55dp"
            android:layout_height="55dp"
            android:src="@drawable/twitter_icon">

        </ImageView>

    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingLeft="10dp"
        android:paddingTop="3dp" >

        <TextView
        android:id="@+id/listtitle"
        android:textSize="20px"
        android:textColor="#ffffff"
        android:layout_width="fill_parent"
        android:layout_height="38dp"
        android:paddingBottom="5dp"
        android:maxLines="2" 
        android:ellipsize="marquee"
        android:background="@android:color/transparent"/>
        <TextView
        android:id="@+id/listpubdate"
        android:textSize="14px"
        android:textColor="#ffffff"
        android:textStyle="bold"
        android:gravity="right"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
    </LinearLayout>
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:15:29.563

`android:cacheColorHint="#00000000"`在您的列表视图中设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:13:43.360

在列表项布局 XML 中设置`android:background="@android:color/white"`或任何您想要的最外层。`LinearLayout`

# bash - 如何减少 bash/batch 脚本中的浮点变量

> ID：11344062
> 
> 赞同：2
> 
> 时间：2012-07-05T12:10:50.570
> 
> 标签：bash, floating-point, bc

我用 C 语言编写了一个程序，需要将四个浮点变量作为参数传递给它。我想制作一个脚本来运行这个程序 x 次，在程序再次执行之前，这四个变量每次都会减少一定的量。

Batch 和 bash 不支持浮点数，但 bc 支持可以在 bash 脚本中使用的任意精度。我应该说我之前没有做过任何脚本，除了最近的批处理脚本让我意识到批处理不合适。

作为这个领域的相对菜鸟，我的谷歌搜索并没有发现任何对我特别有用的东西，所以我在这里。

这基本上是我想要的：

```
MINX=-2.0
MAXX=0.8
MINY=-1.4
MAXY=1.4

for X times
{
    myprogram minX maxX minY maxY

    MINX-=0.1
    MAXX-=0.1
    MINY-=0.1
    MAXY-=0.1
} 
```

所以我想在设置初始变量的情况下运行程序，然后减少这些变量并再次运行程序，依此类推..

到目前为止我发现的一切都与 bash + bc 中的浮点变量有关，我似乎无法掌握它，所以我希望如果我解释我想要完成的事情，你们中的一个好人会能够解释:)

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:05:35.140

在 AWK 中写下整个内容：

```
#!/usr/bin/awk -f
BEGIN {
    X = 100
    minX = -2.0
    maxX = 0.8
    minY = -1.4
    maxY = 1.4

    for (i = 1; i <= X; i++) {
        system("myprogram " minX " " maxX " " minY " " maxY)

        minX -= 0.1
        maxX -= 0.1
        minY -= 0.1
        maxY -= 0.1
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T23:42:43.123

巴什和公元前

```
#!/bin/bash
X=3     #cycle count

MINX=-2.0
MAXX=0.8
MINY=-1.4
MAXY=1.4

function fpcalc() {
    echo "scale=4; $@" | bc -l
}

X=$(($X + 1))
while let X-=1
do
    echo myprog  $MINX $MAXX $MINY $MAXY    #delete the echo
    MINX=$(fpcalc $MINX-0.1)
    MAXX=$(fpcalc $MAXX -0.1)
    MINY=$(fpcalc $MINY -0.1)
    MAXY=$(fpcalc $MAXY -0.1)
done 
```

perl 和 bash

```
#delete the "echo" after the "xargs"
echo -2.0 0.8 -1.4 1.4 | perl -lane 'for(1..3){print"@F";@F=map{$_-=0.1}@F}' | xargs -L 1 echo myprog 
```

在这两个示例中，计数 (X) = 3。两者都产生输出（当您删除“echo”时，将运行 myprog）

```
myprog -2.0 0.8 -1.4 1.4
myprog -2.1 0.7 -1.5 1.3
myprog -2.2 0.6 -1.6 1.2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T12:42:21.397

您可以通过编写等效脚本（实际上，您的伪代码和语法`bc`之间几乎没有区别）、调用它或其他任何方式来做到这一点：`bc``myscript.bc`

```
#!/usr/bin/bc -q

minx = -2.0
maxx = 0.8
miny = -1.4
maxy = 1.4

for (x = 0; x < 10; x = x+1)
  {
    print "myprogram ", minx, " ", maxx, " ", miny, " ", maxy, "\n"

    minx = minx - 0.1
    maxx = maxx - 0.1
    miny = miny - 0.1
    maxy = maxy - 0.1
  }

halt 
```

然后只需将其输出通过管道传输到`(ba)sh`：

```
bc -q myscript.bc | sh 
```

或者，如果脚本是“可执行的”（感谢 shebang），你甚至可以这样做：

```
./myscript.bc | sh 
```

# c++ - 使用 lambda 和 std::function 进行 C++11 类型推断

> ID：11344063
> 
> 赞同：8
> 
> 时间：2012-07-05T12:10:55.873
> 
> 标签：c++, lambda, c++11, type-inference

我有以下代码片段，虽然完全微不足道，但说明了我试图在更通用的代码中使用的模式。

```
template<typename InT, typename ResT>
ResT unary_apply( InT val, std::function<ResT(InT)> fn )
{
    return fn(val);
} 
```

我希望能够使用函数指针、仿函数、lambda 等调用 unary_apply：因此使用`std::function`来抽象所有这些。

当我尝试通过以下方式使用上述内容时，C++ (g++ 4.7) 无法执行相关类型推断：

```
double blah = unary_apply( 2, []( int v ) { return 3.0 * v; } ); 
```

失败了

```
src/fun.cpp:147:75: error: no matching function for call to ‘unary_apply(int, test()::<lambda(int)>)’
src/fun.cpp:147:75: note: candidate is:
src/fun.cpp:137:6: note: template<class InT, class ResT> ResT unary_apply(InT, std::function<ResT(InT)>)
src/fun.cpp:137:6: note:   template argument deduction/substitution failed:
src/fun.cpp:147:75: note:   ‘test()::<lambda(int)>’ is not derived from ‘std::function<ResT(double)>’ 
```

而且我发现我必须明确指定模板参数（实际上我相信它只是不可推断的返回类型）：

```
double blah = unary_apply<int, double>( 2, []( int v ) { return 3.0 * v; } ); 
```

我对 C++11 中的类型推断规则不太熟悉，但上述行为似乎是合理的（我可以看到通过 的内部机制进行推断`std::function`可能是一个很大的问题）。我的问题是：是否可以重写`unary_apply`上面的函数以保持相同的灵活性（就可以作为第二个参数传递的函数/函子等的类型而言）同时也为类型推断提供更多线索所以我不必在调用时显式提供模板参数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T12:17:55.550

多一点鸭式应该可以工作：

```
template <typename T, typename F>
auto unary_apply(T&& val, F&& func) -> decltype(func(val)) {
    return func(std::forward<T>(val));
} 
```

# java - 如何生成 Hibernate 字段注释？

> ID：11344064
> 
> 赞同：3
> 
> 时间：2012-07-05T12:11:01.140
> 
> 标签：java, eclipse, hibernate, jpa, hibernate-tools

在基于现有数据库生成模型时，如何在 Eclipse Indigo 中配置 Hibernate Tools 以在字段上而不是在 getter 上进行注释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:21:10.430

我认为 Hibernate Tools 不可能做到这一点。唯一*可能*接近您想要的是一些具有[元属性](http://docs.redhat.com/docs/en-US/JBoss_Developer_Studio/4.0/html-single/Hibernate_Tools_Reference_Guide/index.html#id4700841)的自定义代码，尽管我认为它不会完全归档您想要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T22:40:19.407

在 Eclipse Juno 中，我打开了 hibernate-tools-3.4.0.CR2.jar 并将 dao 和 pojo 目录复制到我项目中的一个文件夹中。编辑 freemarker 文件以将这些从 PojoPropertyAccessors.ftl 中注释掉，并将它们放在 PojoFields.ftl 中。确保您指定您正在使用自定义模板以及它们在 eclipse hibernate 代码生成配置中所在的目录。

# mysql - 如何用 SQL 计算日期和时间之间的事物数？

> ID：11344067
> 
> 赞同：0
> 
> 时间：2012-07-05T12:11:06.570
> 
> 标签：mysql, sql

> **可能重复：**
> [按时间段查询记录和分组](https://stackoverflow.com/questions/6035950/query-records-and-group-by-a-block-of-time)

我被困在一个项目的中间。问题是计算给定日期和时间的东西总数。以下是我拥有的表格： 表 1：保存日期和时间信息

```
Timeid | startDate  | endDate    | startTime | endTime  |

1  | 2012-07-05 | 2012-07-05 | 08:30:00  | 10:00:00 |

2  | 2012-07-05 | 2012-07-06 | 10:30:00  | 12:00:00 |

3  | 2012-07-04 | 2012-07-07 | 08:30:00  | 17:00:00 |

4  | 2012-07-05 | 2012-07-08 | 12:30:00  | 14:00:00 |

5  | 2012-07-04 | 2012-07-06 | 12:30:00  | 14:00:00 |

6  | 2012-07-05 | 2012-07-05 | 08:30:00  | 10:00:00 |

7  | 2012-07-05 | 2012-07-06 | 10:30:00  | 12:00:00 | 
```

表 2：与日期和时间相关的 id 信息相关的 stuff 信息。

```
Autoid | TimeId | stuffId | amountOfStuff |

1      |     1    |   2     |    1   |      

2      |     2    |   2     |    1   |  

3      |     3    |   2     |    1   |  

4      |     4    |   2     |    1   |  

5      |     5    |   2     |    1   |  

6      |     6    |   2     |    1   |  

7      |     7    |   2     |    1   | 
```

正如在表格中看到的那样，timeID 的表格之间存在关系。我想计算给定日期范围内使用了多少东西（amountofstuff）。

例如，我需要 table2 中存储的东西的总量，日期 startDate:05.07.2012 和 endDate:05.07.2012 和 startTime:07:00:00 endTime:21:00:00。但是，如果时间没有被交叉/削减，那么它不应该被计算在内。对于这个查询结果应该是“3”......解释的数字是：请注意下面的数字是TimeIds。

|--1--| |--2--| |--4--|

|-----------3-----------|

|--6--| |--7--| |--5--|

结果是“3”。从 startDate:05.07.2012 和 endDate:05.07.2012 到 startTime: 07:00:00 endTime: 21:00:00 使用的东西的数量。

我希望我现在已经清楚地解释了一切。让我知道以获取更多信息。谢谢你。

# c++ - 如何推导出执行时间增长率（Big O）？

> ID：11344068
> 
> 赞同：1
> 
> 时间：2012-07-05T12:11:08.473
> 
> 标签：c++, testing

所以我有以下代码，我需要得出执行时间增长率，但是我不知道从哪里开始。我的问题是，我该怎么做呢？任何帮助，将不胜感激。

谢谢你。

```
// function to merge two sorted arrays
int merge (int smax, char sArray[], int tmax, char tArray[], char target[])
{
    int m, s, t;
    for (m = s = t = 0; s < smax && t < tmax;  m++)     
    {
        if (sArray[s] <= tArray[t]) 
        {
            target[m] = sArray[s];
            s++;
        }
        else
        {
            target[m] = tArray[t];
            t++;
        }
    }
    int compCount = m;
    for (; s < smax; m++)
    {
        target[m] = sArray[s++];
    }
    for (; t < tmax; m++)
    {
        target[m] = tArray[t++];
    }
    return compCount;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:15:14.157

其实很简单。

看，第一个`for`循环在每次迭代`s`或`t`每次迭代时都会增加，所以它是`O(smax + tmax)`. 显然是第二个循环`O(smax)`，第三个是`O(tmax)`。总而言之，我们得到`O(smax + tmax)`.

（有一些更聪明的方法可以证明，但我故意将它们排除在外。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:15:43.513

所有循环的迭代次数都以 (smax + tmax) 为界。所以你可以说算法是`O( max(smax,tmax) )`or `O( smax +tmax)`。

# javascript - 如何在 JavaScript 中正确使用迭代值？

> ID：11344069
> 
> 赞同：0
> 
> 时间：2012-07-05T12:11:08.433
> 
> 标签：javascript, html, arrays, function, iteration

我正在创建一个“简单”的 javaScript 函数，当用户单击下一个或上一个时，它基本上会在页面上显示新信息。信息取自一个数组，我想使用 i++ 或 i-- 来调用数组的元素。

这是我的 JavaScript：

```
var titles = ["Dundalk", "Navan", "Drogheda", "Dublin"];
var i = 0;

function next()
    {
    i++;
    if (i == titles.length)
        {
        i = 0;
        }
    var object = document.getElementById('tname');
    object.innerHTML = titles[i];
    }

function prev()
    {
    if (i == 0)
        {
        i = titles.length;
        }
    i--;
    var object = document.getElementById('tname');
    object.innerHTML = titles[i];
    } 
```

问题是，当我在我的 HTML 页面中运行此代码时，我得到一个“未定义”的结果。JavaScript 没有识别出 i 一开始就被初始化为 0。例如，如果我将titles[i] 更改为titles[2]，正确的文本将显示在HTML 中。

我忘记了什么，或者我该如何克服？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:27:37.873

您看到的事实`undefined`表明您正在访问尚未设置的数组索引。您的代码一目了然，所以我猜还有一些您没有显示的代码*也*用作`i`循环变量，并`> titles.length`在上面的代码运行后将其设置为一个值。

# php - 如何计算数组内数组中某个值的出现次数？

> ID：11344072
> 
> 赞同：0
> 
> 时间：2012-07-05T12:11:20.910
> 
> 标签：php, arrays, multidimensional-array

如果我有以下数组：

```
 Array ( 
       [0] => Array ( [0] => 4555 [1] => 1 ) 
       [1] => Array ( [0] => 4555 [1] => 1 )
       [2] => Array ( [0] => 4350 [1] => 1 )
       [3] => Array ( [0] => 4033 [1] => 2 )
       [4] => Array ( [0] => 4159 [1] => 1 ) 
      ) 
```

我如何计算大数组内的所有数组中出现的 Nb '4555'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:34:56.090

希望这可以帮助您：

```
<?php
$a = Array (Array (4555,1), Array (4555,1),Array (4350,1 ),Array (4033,2 ),Array (4159,1   ));

function array_keys_multi($array,&$vals)
 {
foreach ($array as $key => $value) {

    if (is_array($value)) {

        array_keys_multi($value,$vals);

    }else{

        $vals[] = $value; 
    }
}

return $vals;
}

$z = array_keys_multi($a);

print_r(array_count_values($z));
?> 
```

# 输出：

```
Array
(
[4555] => 2
[1] => 4
[4350] => 1
[4033] => 1
[2] => 1
[4159] => 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:16:06.553

你需要两个循环一个接一个。像这样：

```
$counter = array();
for ($i = 0; $i < count($array); $i++) {
    $subArray = $array [$i];
    for ($j = 0; $j < count ($subArray); $j++) {
         $val = $subArray [$j];
         $count = isset ($counter [$val]) ? $counter [$val] : 0;
         $counter [$val] = $count + 1;
    }
} 
```

在这里您可以打印 $counter 值：

```
foreach ($counter as $k => $v) {
   echo 'Count for ' . $k . ' is ' . $v;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:24:04.383

您也可以使用[array_reduce](http://php.net/manual/en/function.array-reduce.php)：

```
$arr = array ( 
       0 => array ( 0 => 4555, 1 => 1 ), 
       1 => array ( 0 => 4555, 1 => 1 ),
       2 => array ( 0 => 4350, 1 => 1 ),
       3 => array ( 0 => 4033, 1 => 2 ),
       4 => array ( 0 => 4159, 1 => 1 ) 
      );

function f($x, $y){
      $x += in_array(4555, $y)?1:0;
      return $x;
}
print array_reduce($arr, "f",0); 
```

输出：

```
2 
```

# javascript - Changing the contents of a DIV based on drop-down selection

> ID：11344074
> 
> 赞同：0
> 
> 时间：2012-07-05T12:11:21.097
> 
> 标签：javascript, onchange, innerhtml

On a web page, the contents of a div must dynamically change when a particular selection is made from a drop down list. Below is my code, I don't know where I am going wrong? Any help would be appreciated.

```
<head>
<script type="text/javascript">
function fn()
{
    var x = document.getElementsById("select").selectedIndex;
    var y = document.getElementById("a").innerHTML;

    if (X == "0")
    {
        y = " So.. ur a conman" ;
    }
    else
    {
        y = "oops";
    }
}
window.onload = fn() ;
x.onchange = fn() ;
</script>

<body>
<select name="select" id="select">
<option value="consulting"> Consulting </option>
<option value="industry"> Industry </option>
</select>
<div id="a" style="background-color:blue; width:1200px; height:20px; color:black;">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:17:13.700

*   Javascript 区分大小写，因此`x`与`X`. 更改`X`为`x`。

*   `y`接收内部 html 的*值*，而不是对内部 html 的*引用*。这意味着您不能通过`y`.

*   分配给 window.onload 时，您当前正在分配函数的返回值。您想分配函数本身，所以它应该是`window.onload = fn;`.

改进但未经测试的代码：

```
<script type="text/javascript">

var x = document.getElementsById("select");
var y = document.getElementById("a");

function fn()
{

    if (x.selectedIndex == 0)
    {
        y.innerHTML = " So.. ur a conman" ;
    }
    else
    {
        y.innerHTML = "oops";
    }
}

window.onload = fn ;
x.onchange = fn ;

</script> 
```

另外，请注意您的浏览器有开发者工具，可以告诉您一些错误。根据您用于测试的浏览器，您可能可以按下`F12`打开这些工具。看看那里的控制台，你会看到类似于`'X' is not defined`.

# macos - 如何在面向 10.6 的 Cocoa 上获取 [NSScreen backingScaleFactor]

> ID：11344076
> 
> 赞同：0
> 
> 时间：2012-07-05T12:11:25.700
> 
> 标签：macos, cocoa, xcode4

我从谷歌搜索得到这段代码，但 XCode 显示错误：“在对象类型 'NSScreen *' 上找不到属性 'backingScaleFactor'”

```
CGFloat displayScale = 1.0f;
if ([[NSScreen mainScreen] respondsToSelector:@selector(backingScaleFactor)]) 
{

       displayScale = [NSScreen mainScreen].backingScaleFactor;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:22:40.437

使用`[[NSScreen mainScreen] backingScaleFactor]`并确保您正在为 OS X 10.7 SDK 构建，部署目标设置为 10.6。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-09T14:56:55.890

你**不能**因为`backingScaleFactor`属性在 OS X v10.7 和更高版本中可用。请参阅[Apple 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScreen_Class/#//apple_ref/occ/instp/NSScreen/backingScaleFactor)。更改为 SDK 10.7（或更高版本）也无济于事。因为如果您使用仅存在于 10.7 上的 API，则不会出现构建警告，但应用程序会在 10.6 启动时崩溃。见[这里](http://lapcatsoftware.com/articles/sdkvsdeploymenttarget.html)。

**编辑：**您可以使用`if ([[NSScreen mainScreen] respondsToSelector:@selector(backingScaleFactor)])`并且您的应用程序不会崩溃，但这是另一件事的另一种做法，并且绝对无法实现您的目标。

如果您描述了您正在尝试做什么以及为什么需要，`backingScaleFactor`我会尝试帮助您解决一些技巧和技巧。

# android - 如何将 Parsed Xml Inputsource 保存为 .xml 文件以在 Android 中进行离线解析

> ID：11344077
> 
> 赞同：0
> 
> 时间：2012-07-05T12:11:25.953
> 
> 标签：android, makefile, xml-parsing

我想将给定的 web 服务 url 保存为 xml 文件以进行离线 sax 解析。

在 Online 我使用 SAX Parser 来解析给定的 url。

```
URL sourceUrl = new URL("http://www.example.com/mobile/eventinfo.php?id=20);    
InputSource inputSource = new InputSource(sourceUrl.openStream());
inputSource.setEncoding("ISO-8859-1"); 
```

为此，我从上面的 url 获取输入源，现在我想将该输入源保存为 .xml 文件以进行离线解析。

在这里，用户必须第一次在线加载应用程序。在应用程序内部，我们提供离线设施。如果用户将应用程序设置为离线，则输入源必须将 xml 文件保存在本地内存中。

如果用户离线启动应用程序，应用程序必须从保存的 xml 文件中解析数据。

如果用户在线启动应用程序，则必须从 url 解析数据。

任何人都可以在这里帮助我或分享知识

我正在生成如下代码的 xml 文件

```
try {
    URL url = new URL(urlString);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setUseCaches(false);
    connection.connect();
    int responseCode = connection.getResponseCode();
    if(responseCode == 200){
        InputStream inputStream = connection.getInputStream();
        int size = connection.getContentLength();
        FileOutputStream fileOutputStream = new FileOutputStream(new File(getCacheDir(),filename));
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
        String ch = null;
        while((ch = bufferedReader.readLine()) != null){
            fileOutputStream.write(ch.getBytes());
        }
    }else {

    }
} 
```

但它在 NetworkonMainThreadException 引发异常

```
 connection.connect(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:23:38.310

我认为您第一次在 sdcard 中生成文件（包含您的 xml），并且每次检查该文件是否存在于 sdcard 中然后解析相同，否则从 url 加载数据并生成 xml 文件。

希望你明白我所说的

# lucene - What are the space Limits of Lucene Index?

> ID：11344086
> 
> 赞同：6
> 
> 时间：2012-07-05T12:11:52.030
> 
> 标签：lucene

I am adding Billions of rows to Lucene index, each row is almost 6000 Bytes. Is there any limit on the maximum number of rows that can be added to Lucene Index? How much space would Billion rows of 6000 bytes occupy on Lucene Index. Is there any limit for this size?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T12:38:09.193

[有关其限制](http://lucene.apache.org/core/4_0_0-ALPHA/core/org/apache/lucene/codecs/lucene40/package-summary.html#Limitations)，请参阅 Lucene 文档，它不能超过

*   ~ 2740 亿个不同的术语，
*   约 21 亿份文件。

对于如此大的数据集，通常最好只使用 Lucene 作为其倒排索引，并将文档的实际内容存储在其他地方。您可以预期索引大小约为原始文档语料库大小的 30%（假设这些是常规文档，具有许多唯一术语的计算生成的文档会生成更大的索引）。

# android - Android Flipbook Animation in Html5

> ID：11344087
> 
> 赞同：0
> 
> 时间：2012-07-05T12:12:02.113
> 
> 标签：android, jquery, html

i want to flip book animation effect in html5 or jquery with android supported.i want to animation effect in html page with supported android and i have tried lot of example's but doesn't work on android mobile phone page flip book animation effect like trun a page.any one can help me for working flip book animation html tutorial or code with supported android webview.

Thanks in Advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:17:58.093

看看这个教程。我不能保证它适用于所有 Android 设备，因为大多数 Android 设备都很简陋。

[http://tympanus.net/codrops/2012/05/07/experimental-page-layout-inspired-by-flipboard/](http://tympanus.net/codrops/2012/05/07/experimental-page-layout-inspired-by-flipboard/)

# python - python 3 mp3艺术品

> ID：11344088
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:12:02.627
> 
> 标签：python, mp3, hex, apic

我有一个简单的 Python 程序，可以从 MP3 文件中获取艺术作品。但是当我尝试在我的网页中打开生成的文件时，它没有加载。

这是我的代码：

```
#!"C:/Python32/python.exe"

import binascii
print('Content-type:image/jpeg\n\n\n')

mp3 = r'music.mp3'
mp3_File = open(mp3, "rb")
mp3_Data = mp3_File.read()
mp3_File.close()

hexs = str(binascii.hexlify(mp3_Data))

hexol = []

for ix in range(2, len(hexs)-1, 2):
    hex = hexs[ix]+hex_str[ix+1]
    hexol.append('|'+hex)

hex_str = "".join(hex_list)

img = hexs.split('|41|50|49|43')

p = img[1]
p = p.replace('|','')
p = p[:34*1500]
hexl = []
for ix in range(2, len(p)-1, 2):
    hex = p[ix]+p[ix+1]
    hexl.append(hex)

 art = open('C:\\hi.jpg','wb')
 art.write(binascii.unhexlify(''.join(hexl).encode('utf-8')))
 art.close()
 data = open('C:\\hi.jpg', 'rb').read()
 print(data) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:37:05.457

*   Windows shebang 线？Windows 不理解或不使用 shebang 行

*   通常最好用于`with`打开文件（它可以确保它们再次关闭）

*   您没有提供 .mp3 文件的路径；你确定它在正确的目录中吗？

*   [如果您将“获取艺术品”的东西作为一个函数分离出来，或者更好的是，使用像mutagen](http://code.google.com/p/mutagen/)这样的现有模块，那会更清楚

*   同样，尚不清楚您如何将其暴露给浏览器；[使用像Flask](http://flask.pocoo.org/docs/)这样的现有模块可能是一个很好的解决方案

你的代码变成了

```
import mutagen
from flask import make_response
import os

music_dir = 'c:/www/music'

@app.route('/cover')
def cover_art():
    fname = 'music.mp3'
    mp3 = mutagen.File(os.path.join(music_dir, fname))
    art = mp3.tags['APIC:'].data
    def wsgi_app(environ, start_response):
        start_response('200 OK', [('Content-type', 'image/jpeg')])
        return art
    return make_response(wsgi_app) 
```

# iphone - How do you vertically center a table view that has a variable number of rows?

> ID：11344092
> 
> 赞同：-2
> 
> 时间：2012-07-05T12:12:08.120
> 
> 标签：iphone, ios, uitableview

I have a UITableView with a variable number of rows, rather than being a static height.

How can I vertically center this variable-height table view within a UIView?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:28:18.677

在表格视图单元格中垂直居中文本的一种便宜且简单的方法是您可以将 NSTextFieldCell 子类化，并为每个表格列设置它以使用子类单元格。在子类中，截取绘制单元格内容的矩形是一件简单的事情：重写drawInteriorWithFrame方法，对框架进行一些调整，然后调用super方法。

```
- (void)drawInteriorWithFrame:(NSRect)cellFrame
                        inView:(NSView *)controlView {
    // Adjust the cell frame rect so it appears vertically centered.
    NSSize contentSize = [self cellSize];
    cellFrame.origin.y += (cellFrame.size.height - contentSize.height)
/ 2.0f;
    cellFrame.size.height = contentSize.height;
    // Do whatever it is it does...
    [super drawInteriorWithFrame:cellFrame inView:controlView];
} 
```

# jquery - How to use fadein concept in JQuery

> ID：11344098
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:12:27.037
> 
> 标签：jquery, html, css

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <title>Untitled Document</title>
        <script type="text/javascript">
            function ShowBoxes()
            {
                $("#divTestArea21").fadeIn("fast");
                $("#divTestArea22").fadeIn("slow");
                $("#divTestArea23").fadeIn(2000);   
            }
        </script>
    </head>
    <body>
        <div id="divTestArea21" style="width: 50px; height: 50px; display: none; background-color: #89BC38;"></div>
        <div id="divTestArea22" style="width: 50px; height: 50px; display: none; background-color: #C3D1DF;"></div>
        <div id="divTestArea23" style="width: 50px; height: 50px; display: none; background-color: #9966FF;"></div>
        <input type="button" onClick="ShowBoxes()" value="ShowBox" />
    </body>
</html> 
```

This is my html. But it is not working it is not showing any result. Please suggest me if there is any mistake

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:15:14.983

```
<!DOCTYPE html>
<html>
<head>
  <style>
.box,
button { float:left; margin:5px 10px 5px 0; }
.box { height:80px; width:80px; background:#090; }
#log { clear:left; }

</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<button id="btn1">fade out</button>
<button id="btn2">show</button>

<div id="log"></div>

<div id="box1" class="box">linear</div>
<div id="box2" class="box">swing</div>

<script>
$("#btn1").click(function() {
  function complete() {
    $("<div/>").text(this.id).appendTo("#log");
  }

  $("#box1").fadeOut(1600, "linear", complete);
  $("#box2").fadeOut(1600, complete);
});

$("#btn2").click(function() {
  $("div").show();
  $("#log").empty();
});

</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:22:35.057

在头部添加这个

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script> 
```

* * *

```
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

    <script type="text/javascript">
             function ShowBoxes() {
                 $("#divTestArea21").fadeIn("fast");
                 $("#divTestArea22").fadeIn("slow");
                 $("#divTestArea23").fadeIn(2000);
             }
            </script>

</head>

<body>
<div id="divTestArea21" style="width: 50px; height: 50px; display: none; background-color: #89BC38;"></div>
        <div id="divTestArea22" style="width: 50px; height: 50px; display: none; background-color: #C3D1DF;"></div>
        <div id="divTestArea23" style="width: 50px; height: 50px; display: none; background-color: #9966FF;"></div>
        <input type="button" onClick="ShowBoxes()" value="ShowBox" />

</body> 
```

# java - PUT method Spring MVC

> ID：11344102
> 
> 赞同：5
> 
> 时间：2012-07-05T12:12:42.543
> 
> 标签：java, spring

I'm trying to use the following format for making a put request through the RESTtemplate.

```
 @Autowired
 RestTemplate template;

 @RequestMapping(value = "/change", method = RequestMethod.PUT)
 public ModelAndView change(Data data){

     List<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
     acceptableMediaTypes.add(MediaType.APPLICATION_XML);

     HttpHeaders headers = new HttpHeaders();
     headers.setAccept(acceptableMediaTypes);

     HttpEntity<Data> entity = new HttpEntity<Data>(data, headers);
     String url="http://www...com";

     try {
        template.put(url, entity);

      } catch (Exception e) {
        System.out.println(e);
      }

  return new ModelAndView("redirect:/home");
 } 
```

I checked on the database and I realized that there is no change. Even the request is not written on the log file. When I'm debugging, I am not getting any error. Probably I'm not using correctly the put method. Can anyone suggest me how should I use the put method or what else should I try to perform a put request with the RestTemplate?

Also i try to use the exchange method instead of the put:

```
 try {
        ResponseEntity<Data> result = template.exchange(Url, HttpMethod.PUT, entity, Data.class);
    } catch (Exception e) {
        System.out.println(e);
    } 
```

But in this case i'm taking the following exception:

org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [website.Data] and content type [text/html;charset=utf-8].

As you can see from the headers i set the content type as application/xml and not text/html. I look at the headers and i can see that contained:

```
Accept: application/xml 
```

I really can't understand. What else should i change? Any comments on the exception?

Configuration:

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver" 
p:basename="config/views" p:order="1" />

<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

<bean class="org.springframework.web.servlet.view.XmlViewResolver">
    <property name="location">
        <value>/WEB-INF/classes/config/xml-views.xml</value>
    </property>
    <property name="order" value="0" />
</bean>
<!--It is used for redirect-->
<bean id="urlBasedViewResolver"
      class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value=""/>
    <property name="suffix" value=""/>
    <property name="order" value="2" />
</bean>    

<context:annotation-config />
<!--<context:annotation-config />-->
<context:component-scan base-package="data.controller" />
<context:component-scan base-package="data.service" />

 <bean id="restTemplate"  class="org.springframework.web.client.RestTemplate">
    <property name="messageConverters"> 
        <list>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"/>
        </list>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:26:21.237

我猜你的应用程序的客户端是一个网页（然后是 HTML）。[这篇文章](http://blog.springsource.com/2009/03/08/rest-in-spring-3-mvc/)解释了如何让你的 webapp 为未来的浏览器兼容性做好准备（如果他们稍后决定支持例如 PUT、DELETE 操作）。

总之，对于我们的项目，我们刚刚在 web.xml 中声明了这些行：

```
<filter>
    <filter-name>hiddenHttpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>hiddenHttpMethodFilter</filter-name>
    <url-pattern>/app/*</url-pattern>
</filter-mapping> 
```

文章讨论了要添加的 javascript（可能是 Spring 3.0 M1 之前的版本），但我们发现这个解决方案更好，因为它只是一个配置。

# xml - 从 XSD 生成休眠实体 bean

> ID：11344114
> 
> 赞同：8
> 
> 时间：2012-07-05T12:13:21.157
> 
> 标签：xml, hibernate, jaxb

我的要求是将大量 XML 值保存到数据库中。
在分析了几个选项后，我最终确定了从巨大的 xml 生成实体 bean 类，然后使用 hibernate 将其持久化。
我选择不创建 hbm 文件并使用休眠注释。这样，我将使用 JAXB 从 XSD 生成 Java 类，它们手动添加休眠注释。
是否有任何 Eclipse 插件或实用程序框架可以从 XSD 生成带有默认休眠注释的实体类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T22:22:25.913

这是一些文档：

[http://confluence.highsource.org/display/HJ3/Making+schema-derived+classes+ready+for+JPA](http://confluence.highsource.org/display/HJ3/Making+schema-derived+classes+ready+for+JPA)

[http://java.net/projects/hyperjaxb](http://java.net/projects/hyperjaxb)

这是我已完成的项目的工作示例：

```
 <plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb2-plugin</artifactId>
    <version>0.7.4</version>
    <dependencies>
                  <dependency>
                          <groupId>org.jvnet.hyperjaxb3</groupId>
                          <artifactId>hyperjaxb3-ejb-plugin</artifactId>
                          <version>0.5.5</version>
                  </dependency>
            </dependencies>
    <executions>
      <execution>
        <id>generate-domain1</id>
        <goals>
          <goal>generate</goal>
        </goals>
        <configuration>
          <strict>false</strict>
          <schemaIncludes>
            <value>account.xsd</value>
            <value>customer.xsd</value>
            <value>address.xsd</value>
          </schemaIncludes>
          <bindingIncludes>
            <include>domain-bindings.xjb</include>
          </bindingIncludes>
          <extension>true</extension>
          <generatePackage>your.package.here</generatePackage>
          <generateDirectory>${project.build.directory}/generated-sources/jaxbandjpa</generateDirectory>
          <args>
            <arg>-Xannotate</arg>
            <arg>-Xhyperjaxb3-ejb</arg>
           </args>                  
           <plugins>
            <plugin>
              <groupId>org.jvnet.jaxb2_commons</groupId>
              <artifactId>jaxb2-basics</artifactId>
              <version>0.6.0</version>
            </plugin>
            <plugin>
              <groupId>org.jvnet.jaxb2_commons</groupId>
              <artifactId>jaxb2-basics-annotate</artifactId>
              <version>0.6.0</version>
            </plugin>
          </plugins>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:31:56.563

您可以使用 HyperJAXB 生成带有 JPA 注释的 JAXB 模型。Hibernate 实现了 JPA 规范：

*   [http://java.net/projects/hyperjaxb/](http://java.net/projects/hyperjaxb/)

# javascript - Jquery 插件私有数据和 $(this)

> ID：11344119
> 
> 赞同：0
> 
> 时间：2012-07-05T12:13:49.860
> 
> 标签：javascript, jquery, jquery-plugins

我正在开发一个 JQuery 插件，它将私有数据存储在对象的数据字段中（正如我发现的一篇文章中所推荐的那样）：

```
$.fn.awesomify = function (schema, data) {
    $(this).data('schema', schema);
} 
```

然后我可以在私有方法中检索这个值：

```
function rebuild() {
    var schema = $(this).data('schema');
} 
```

现在我遇到的问题是，当从不同的对象调用该方法时，$(this) 的值是不同的。例如 href 的 onclick 事件：

```
var a = ...;
a.click(function () {
    rebuild(); // Now $(this) is the a-object
}); 
```

我应该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:16:24.170

这是因为 的值`this`是在调用时确定的，并且设置为方法所属的对象，或者`window`如果方法没有附加到对象*；`rebuild()`不附加到对象上，`this`所以`window`.

您可以将`this`in 的值作为参数传递，也可以使用[`Function.prototype.call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)/[`Function.prototype.apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)方法；

```
rebuild.call(this); 
```

或者：

```
rebuild(this);

function rebuild(that) {
    var schema = $(that).data('schema');
} 
```

* -> 例外是如果你处于[严格模式](https://developer.mozilla.org/en/JavaScript/Strict_mode)，它的位置`undefined`，但这在这里不相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:31:08.170

您可以将“this”对象存储到某个变量中，然后在该变量可见的任何地方使用它

```
 var currentObj = $(this);

    function rebuild() {
       var schema = currentObj.data('schema'); 
    } 
```

# rss - 开发新闻提要系统

> ID：11344120
> 
> 赞同：1
> 
> 时间：2012-07-05T12:13:53.607
> 
> 标签：rss, feed

我正在开发一个系统，该系统具有来自各种来源的新闻标题数据库。我以前没有使用过 RSS，所以我对很多事情感到困惑。任何人都可以为如何开发这样的东西指出一个很好的教程吗？谢谢

在我的脑海里，我有这样的问题：

1) 我将如何获得最新的新闻提要？我是否必须每隔几分钟检查一次 rss 提要链接，看看它是否与前一个不同？

2）自己解析提要xml还是使用提要阅读器之类的东西是一种好习惯吗？

3) 我可以控制发送给我的提要吗？例如，我只需要谷歌或英特尔的新闻提要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:29:21.503

RSS 是一种非常标准的格式，您可以在[w3c 学校](http://www.w3schools.com/rss/)开始学习。

关于你的问题。

1.  如果您可以与 RSS 提供商交谈，也许他们可以在每次有新消息时通知。例如，它们可以使用 [XML-RPC 通知](http://en.wikipedia.org/wiki/XML-RPC)。

    您还可以询问 RSS 提供商您应该多久检查一次提要（以防他们无法提供任何类型的通知）。

2.  我认为最好开发自己的机器人。有很多框架可以处理 rss 格式。如果您正在使用 C#，您可以尝试使用[SyndicationFeed 类](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)

3.  我不确定我是否理解您的问题，但如果提供商为您提供 RSS 链接，您必须主动浏览该提要。当您拥有该提要时，您可以使用元数据来查看您感兴趣的内容。例如检查“类别”或“频道”节点。

# android - Android chromium disk_cache 错误：损坏的索引文件

> ID：11344125
> 
> 赞同：1
> 
> 时间：2012-07-05T12:14:32.093
> 
> 标签：android

我只是想做一个-

```
webView.loadUrl("http://www.google.com"); 
```

但是我在日志中得到空白页并出现以下错误-

> 07-05 17:20:30.623: E/chromium(1243): external/chromium/net/disk_cache/backend_impl.cc:2022: [0705/172030:ERROR:backend_impl.cc(2022)] 索引文件损坏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T08:12:40.617

未启用数据包数据，这导致了我的错误。

# objective-c - 用新内容更新 UIScrollView 的 IBOutlet

> ID：11344126
> 
> 赞同：0
> 
> 时间：2012-07-05T12:14:33.263
> 
> 标签：objective-c, ios5

我使用 UIScollView 进行了分页。页面被创建 2 并且当用户滚动它时它的变化。

创建的页面加载了新内容。

同一页面有其他 UIScrollView 和 UItextView 的子视图。

但是当我滚动到其他页面时，我的 UItextViews 添加到页面 UIScrollView 不会更新。

当我滚动那个 UIScrollview 时它会更新。

试过这个：

```
for (UIView *childView in _scroller.subviews)
{
    [childView setNeedsDisplay];
} 
```

但这没有帮助

也许有人有其他建议？

谢谢。

# c# - SQL(sql) 的正则表达式；C＃

> ID：11344128
> 
> 赞同：1
> 
> 时间：2012-07-05T12:14:37.590
> 
> 标签：c#, regex

我在使用正则表达式时遇到了一些问题（*不知道我想做的是否可行。*）

**场景**：

我有一个输入区域，用户可以在其中写一些文本。当文本通过电子邮件发送给客户时，他们还希望能够执行一些 SQL 查询，然后将结果显示在文本中。

粗略的例子：

#

你好

我已附上发票`SQL(SELECT DocNumber FROM X WHERE DocEntry IN (SELECT DocEntry FROM X););`

请提供发票付款。

问候

#

我在处理用户可以编写`()`和`;`使用 SQL 时遇到了一些困难。

以前有没有人用正则表达式做过这样的事情，或者我是否必须在 C# 中做一些丑陋的拆分、子字符串和最后一个索引？

任何意见/建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:20:15.910

你真的不想这样做。为什么不直接使用模板，这样您的用户就可以键入`%%invoiceNo%%`并且您的代码使用适当的查询来查找发票编号？

# javascript - Kiosk 模式 Web 应用程序

> ID：11344130
> 
> 赞同：2
> 
> 时间：2012-07-05T12:14:40.173
> 
> 标签：javascript, web-applications, kiosk-mode

我正在寻找一种方法来锁定我的应用程序的用户屏幕。在用户完成特定页面上的步骤之前，用户基本上不能离开屏幕。焦点应该在页面上，并且任何其他应用程序或系统都不可用（除非按下 ctrl+alt+del）。早些时候，浏览器曾经提供通过 javascript 以全屏模式打开窗口的方法。但是现在它仅以扩展最大化模式打开。有什么办法可以锁屏吗？即使这意味着创建浏览器扩展。但是，它应该适用于不同的浏览器，例如 Internet Explorer、Firefox 和 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T03:45:02.700

[Webconverger](http://webconverger.com/)维护一个提供全屏视图的 Firefox 扩展。

![全屏显示信息亭](../Images/456fad2a67c287da1eca22c5b1f11ef4.png)

[资源](https://github.com/Webconverger/iceweasel-webconverger/tree/master/src)

我建议使用 Webconverger OS 并进行`chrome=webcfullscreen`配置以简化部署。

# java - 写入 XLSX 文件 (POI) 时 JVM 崩溃

> ID：11344131
> 
> 赞同：4
> 
> 时间：2012-07-05T12:14:43.717
> 
> 标签：java, crash, jvm, apache-poi, jvm-crash

JVM 在尝试写入 .xlsx 文件时崩溃。我也在使用 POI(XSSF)。代码中的错误位置点是写`method--> workBook.write(fileOutputStream);`

在控制台上我得到..

```
A fatal error has been detected by the Java Runtime Environment:
  SIGBUS (0x7) at pc=0xb68d77f3, pid=14653, tid=1849355120
  JRE version: 7.0_04-b20
 Java VM: Java HotSpot(TM) Server VM (23.0-b21 mixed mode linux-x86 )
 Problematic frame:
 C  [libzip.so+0x47f3]  newEntry+0x73
 Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again
 If you would like to submit a bug report, please visit:
   http://bugreport.sun.com/bugreport/crash.jsp
 The crash happened outside the Java Virtual Machine in native code.
 See problematic frame for where to report the bug. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-26T19:53:57.913

我为此找到的解决方案，并且我一直在寻找一段时间，是确保您不要`Workbook`使用`File`用于打开`FileOutputStream`保存`Workbook`. 相反，使用 a`FileInputStream`打开`Workbook`.

这样的事情将完美无缺

```
 File inputFile = new File("Your-Path");
        this.inputStream = new FileInputStream(inputFile);
        this.opc = OPCPackage.open(this.inputStream);
        this.workbook = WorkbookFactory.create(opc);

...

        this.outputStream = new FileOutputStream(inputFile);
        this.workbook.write(this.outputStream); 
```

不要忘记关闭每个打开的流和`OPCPackage`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-15T16:59:11.733

其他解决方案都不适合我。我只需要对我的 Excel 文件进行只读访问，并且设置只读标志对我有用：

```
Workbook wb = new XSSFWorkbook(OPCPackage.open(file, PackageAccess.READ));
Workbook wb = new HSSFWorkbook(new POIFSFileSystem(file, true)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T18:22:51.780

使用`OPCPackage`并没有为我修复 JVM 崩溃，但使用`WorkbookFactory`确实。如果您查看[POI Busy Developers Guide](https://poi.apache.org/spreadsheet/quick-guide.html#ReadWriteWorkbook)，它们提供了读取和写入相同 Excel 文件的示例。

```
File excelFile = new File("workbook.xlsx");

InputStream inp = new FileInputStream(excelFile);
Workbook wb = WorkbookFactory.create(inp);

FileOutputStream fileOut = new FileOutputStream(excelFile);
wb.write(fileOut);
fileOut.close(); 
```

使用 Apache POI 3.13 版、Java 1.8

# css - Symfony2：为生日小部件生成的选择设置一个类

> ID：11344140
> 
> 赞同：1
> 
> 时间：2012-07-05T12:15:14.343
> 
> 标签：css, forms, symfony

在我的表单中，我生成了生日字段：

```
{{form_widget(form.birthdate) }} 
```

生成以下html：

```
<div id="fos_user_registration_form_birthdate">
    <select id="fos_user_registration_form_birthdate_month"     name="fos_user_registration_form[birthdate][month]">
    <select id="fos_user_registration_form_birthdate_day" name="fos_user_registration_form[birthdate][day]">
    ,
    <select id="fos_user_registration_form_birthdate_year" name="fos_user_registration_form[birthdate][year]">
</div> 
```

我想为选择添加一个类以自定义它们的样式。我怎样才能做到这一点？

PS：如果我添加

```
'attr' => array('class' => 'select-style'), 
```

该类归​​因于`<div id="fos_user_registration_form_birthdate">`，而不是选择

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-15T15:19:07.977

```
{{ form_widget(account_form.birthday.day,{'attr':{'class':'some_class'}}) }}
{{ form_widget(account_form.birthday.month,{'attr':{'class':'some_class'}}) }}
{{ form_widget(account_form.birthday.year,{'attr':{'class':'some_class'}}) }} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T15:50:56.843

这是您可以在不自己覆盖日期小部件的树枝模板的情况下做的最好的事情。如果您在[此处](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig#L127)查看日期小部件的默认模板，您将看到没有专门传递给选择输入的属性。但是，您可以将一个类应用到包含的 div，然后使用这样的 CSS 选择器来设置它们的样式

```
.dateWrapper select { /* style here */ } 
```

# sugarcrm - 自定义模块的 SugarCRM 视图页面中的致命错误

> ID：11344144
> 
> 赞同：1
> 
> 时间：2012-07-05T12:15:18.300
> 
> 标签：sugarcrm

我是 SugarCRM 的新手，我使用模块构建器创建了一个自定义模块。直到昨天一切都很好，当我尝试打开我的模块时突然出现这个错误

```
Call to a member function setup() on a non-object in xxx\xxx\xxx\include\MVC\Controller\ControllerFactory.php on line 78 
```

我试图搜索解决方案，但找不到任何 .

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:37:20.423

你有为你的自定义模块定义的 controller.php 文件吗？如果是这样，我猜该文件的权限不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T13:48:37.807

我在带有自定义扩展控制器的自定义模块中收到了相同的错误消息。我将控制器类命名为 CustomMyModuleName。但应该命名为 CustomMyoduleName **Controller**

# javascript - AJAX 更新多个数据库表

> ID：11344155
> 
> 赞同：4
> 
> 时间：2012-07-05T12:15:45.210
> 
> 标签：javascript, php, jquery, ajax, editablegrid

我有一个从两个 mysql 表中读取数据的 ajax 表，这些表是

project_ownerships - id_own, project, code, own_current, own_future
projects - id, project, location, type, type2, area, transport, stage

使用连接表 sql 查询，数据可以很好地读入网页表。

```
$query_value = isset($_GET['value']) ? $_GET['value'] : ""; 
$sql = "SELECT project_ownerships.*, projects.* 
       FROM project_ownerships, projects 
       WHERE project_ownerships.project = projects.project 
       AND project_ownerships.code = $query_value'";
$result = $mysqli->query($sql); 
```

但是我无法让编辑更新正常工作。我只能`data - id`从一个数据库表中获取一个值。

所以属于`projects`表的任何更新都可以更新，但任何更新`project_ownerships`都没有正确的 id 值并更新错误的 db-record

这是更新功能。此函数返回错误“未找到索引或名称 id_own 的列”

```
 $.ajax({
    url: 'update_multi.php',
    type: 'POST',
    dataType: "html",
    data: {
        tablename: editableGrid.getColumnName(columnIndex) == "own_current" ? "project_ownerships" : "projects", 
        id: editableGrid.getColumnName(columnIndex) == "own_current" ? editableGrid.getValueAt(rowIndex, editableGrid.getColumn("id_own")) : editableGrid.getRowId(rowIndex), 
        newvalue: editableGrid.getColumnType(columnIndex) == "boolean" ? (newValue ? 1 : 0) : newValue,
        colname: editableGrid.getColumnName(columnIndex),
        coltype: editableGrid.getColumnType(columnIndex)
    },
    success: function (...,
    error: function(...,
    async: true
}); 
```

这是php更新

```
$tablename = $mysqli->real_escape_string(strip_tags($_POST['tablename']));
$id = $mysqli->real_escape_string(strip_tags($_POST['id']));
$value = $mysqli->real_escape_string($_POST['newvalue']);
$colname = $mysqli->real_escape_string(strip_tags($_POST['colname']));
$coltype = $mysqli->real_escape_string(strip_tags($_POST['coltype']));

$id_column = "";
if ($tablename == "projects") {$id_column = "id";} else {$id_column = "id_own";}

if ( $stmt = $mysqli->prepare("UPDATE ".$tablename." SET ".$colname." = ? WHERE ".$id_column." = ?")) {
$stmt->bind_param("si",$value, $id); 
$return = $stmt->execute();
$stmt->close();
} 
```

基本上我正在尝试做的事情......

如果`projects.id`从 sql 中删除，则更新将不起作用

如果`project_ownership.id_own`更改为`project_ownership.id`并`projects.id`删除，则更新将起作用，但仅适用于`project_ownership.*`字段

所以...我需要在 sql 查询中有一列称为`*.id`

单独地，当发送更新时，可以通过以下方式选择正确的表名

```
tablename: editableGrid.getColumnName(columnIndex) == "own_current" ? "project_ownerships" : "projects", 
```

所以使用相同的逻辑

```
id: editableGrid.getColumnName(columnIndex) == "own_current" ? editableGrid.getValueAt(rowIndex, editableGrid.getColumn("id_own")) : editableGrid.getRowId(rowIndex), 
```

首先，认识到`own_current`存在，并将参数传递给`editableGrid.getValueAt(rowIndex, editableGrid.getColumn("id_own"))`但返回的错误是“找不到具有`id_own`名称的列”......？

我真的很困惑。。

它不能不存在（从 sql 中删除）否则更新会冻结

但是当它在那里时找不到...

任何帮助都会很棒

如何定义`ajax - data - id`列或 rowIndex 列？

我正在研究这个理论

`editableGrid.getRowId(rowIndex)`

可能是这样的（显然不是这样，否则这会起作用）

`editableGrid.getValueAt(rowIndex, editableGrid.getColumn("id_own"))`

但我也尝试过，除其他外

`editableGrid.getValueAt(rowIndex, editableGrid.getColumnIndex("id_own"))`

返回“无效的列索引-1”

和

`editableGrid.getValueAt(rowIndex, editableGrid.getColumnName("id_own"))`

*更新*

有几个私有函数`editablegrid`可以定义行 id 是什么。所以我想这使它成为一个可编辑的网格问题，而不是真正适合这里的 javascript、ajax 或 php 问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:03:17.727

您应该使用 AS 运算符重命名 SQL 查询中每个表的“id”列，以免它们发生冲突。

例如 ：

```
SELECT B.*,A.name,A.id as author_id FROM BOOKS B
INNER JOIN AUTHORS A ON A.id=B.authorid 
```

# javascript - 用于邮政编码验证的 Javascript

> ID：11344157
> 
> 赞同：0
> 
> 时间：2012-07-05T12:15:52.423
> 
> 标签：javascript, validation

我正在尝试让 Javascript 验证用户输入的邮政编码。

如果它在有效邮政编码列表中，则应将其带到新页面以安排约会。如果邮政编码不在列表中，它应该显示一条消息，说明它不在服务区域内，然后将它们保留在页面上。

如果它有效，我让它工作到将他们带到约会页面的位置，但如果它无效，它也会将他们带到约会页面。

你们介意帮我解决这个问题吗？

这是运行 Javascript 的页面：http: [//platinumfactoryservice.com/service-area/](http://platinumfactoryservice.com/service-area/)

下面是代码：

```
<script type = "text/javascript">

function checkZip() {

var z = document.myform.zip;
var zv = z.value;
if (!/^\d{5}$/.test(zv)) {
alert ("Please enter a valid Zip Code");
document.myform.zip.value = "";
myfield = z;  // note myfield must be a global variable
setTimeout('myfield.focus(); myfield.select();' , 10);  // to fix bug in Firefox
return false;
}

var codes = [26003,26030,26031,26032,26035,26036,26037,26038,26039,26040,26041,26058,26059,26060,26062,26070,26074,26075,43713,43716,43718,43719,43747,43750,43757,43759,43768,43773,43778,43902,43905,43906,43909,43912,43913,43915,43916,43917,43927,43928,43933,43934,43935,43937,43938,43939,43940,43941,43942,43943,43947,43948,43950,43951,43952,43953,43963,43967,43971,43972,43977,43985,15004,15017,15018,15019,15021,15025,15028,15031,15034,15035,15045,15046,15047,15053,15054,15055,15056,15057,15060,15064,15071,15078,15081,15082,15088,15102,15104,15106,15108,15110,15112,15116,15120,15122,15123,15126,15127,15129,15131,15132,15133,15134,15135,15136,15137,15139,15140,15142,15143,15145,15146,15147,15148,15201,15202,15203,15204,15205,15206,15207,15208,15209,15210,15211,15212,15213,15214,15215,15216,15217,15218,15219,15220,15221,15222,15223,15224,15225,15226,15227,15228,15229,15230,15231,15232,15233,15234,15235,15236,15237,15239,15240,15241,15242,15243,15244,15250,15251,15252,15253,15254,15255,15257,15258,15259,15260,15261,15262,15264,15265,15267,15268,15270,15272,15274,15275,15276,15277,15278,15279,15281,15282,15283,15286,15289,15290,15295,15301,15312,15317,15321,15323,15339,15340,15342,15350,15361,15363,15365,15367,15376,15378,15379,15347,15330,23705,23703,23707,23708,23704,23709,23702,23701,23326,23328,23327,23322,23325,23320,23324,23323,23321,23520,23519,23541,23512,23551,23515,23529,23506,23501,23514,23521,23518,23502,23503,23505,23513,23509,23504,23508,23511,23517,23510,23507,23523,23459,23458,23450,23479,23471,23466,23467,23465,23463,23461,23451,23460,23456,23452,23455,23454,23453,23462,23464,23457,23261,23291,23260,23225,23221,23249,23222,23223,23241,23232,23224,23290,23173,23298,23273,23274,23289,23279,23282,23276,23278,23295,23219,23218,23220,23269,23286,23292,23293,23285,23284,23228,23227,23226,23229,23075,23231,23230,23294,23289,23060,23059,23075,23288,23242,23238,23250,23233,23255,23150,23058,23234,23831,23235,23237,23236,23836,23114,23112,23113,23297,23832,23120,23838,23801,23803,23804,23805,23806,23834,23111,15004,15017,15018,15019,15021,15025,15028,15031,15034,15035,15045,15046,15047,15053,15054,15055,15056,15057,15060,15064,15071,15078,15081,15082,15084,15088,15102,15104,15106,15108,15110,15112,15116,15120,15122,15123,15126,15127,15129,15131,15132,15133,15134,15135,15136,15137,15139,15140,15142,15143,15145,15146,15147,15148,15201,15202,15203,15204,15205,15206,15207,15208,15209,15210,15211,15212,15213,15214,15215,15216,15217,15218,15219,15220,15221,15222,15223,15224,15225,15226,15227,15228,15229,15230,15231,15232,15233,15234,15235,15236,15237,15239,15240,15241,15242,15243,15244,15250,15251,15252,15253,15254,15255,15257,15258,15259,15260,15261,15262,15264,15265,15267,15268,15270,15272,15274,15275,15276,15277,15278,15279,15281,15282,15283,15286,15289,15290,15295,15301,15312,15317,15321,15323,15339,15340,15342,15350,15361,15363,15365,15367,15376,15378,15379,15347,15330,43711,43717,43722,43723,43724,43725,43732,43736,43772,43778,43779,43780,43788,25504,25510,25526,25537,25541,25545,25559,25571,25701,25702,25703,25704,25705,25706,25707,25708,25709,25710,25711,25712,25713,25714,25715,25716,25717,25718,25719,25720,25721,25722,25723,25724,25725,25726,25727,25728,25729,25755,25770,25771,25772,25773,25774,25775,25776,25777,25778,25779,41101,41102,41105,41114,41129,41139,41169,41183,45619,45619,45623,45638,45645,45669,45675,45680,25011,25026,25033,25070,25082,25109,25112,25124,25143,25156,25159,25168,25177,25213,25334,25338,25357,25375,25389,25560,25569,25003,25015,25025,25035,25039,25045,25054,25061,25064,25067,25071,25075,25079,25083,25086,25102,25103,25107,25110,25126,25132,25134,25160,25162,25201,25202,25214,25301,25302,25303,25304,25305,25306,25309,25311,25312,25313,25314,25315,25317,25320,25321,25322,25323,25324,25325,25326,25327,25328,25329,25330,25331,25332,25333,25335,25336,25337,25339,25350,25356,25358,25360,25361,25362,25364,25365,25387,25392,25396,15001,15003,15005,15009,15010,15026,15027,15042,15043,15050,15052,15059,15061,15066,15074,15077,15081,16123,16136,16101,16102,16103,16105,16107,16108,16112,16115,16116,16117,16120,16121,16123,16132,16140,16141,16142,16143,16146,16148,16150,16155,16156,16157,16159,16160,16161,16172,44401,44403,44405,44406,44416,44418,44420,44422,44424,44425,44429,44430,44436,44437,44438,44440,44442,44443,44446,44451,44452,44454,44470,44471,44473,44481,44482,44483,44484,44485,44486,44488,44501,44502,44503,44504,44505,44506,44507,44509,44510,44511,44512,44513,44514,44515,44555,44619,44672,16001,16002,16003,16016,16017,16018,16020,16021,16022,16023,16024,16025,16027,16029,16030,16033,16034,16035,16037,16038,16039,16040,16041,16045,16046,16048,16050,16051,16052,16053,16055,16056,16057,16059,16061,16063,16066,15006,15007,15014,15015,15024,15030,15032,15037,15044,15049,15051,15065,15075,15076,15086,15090,15091,15101,15144,15238,44609,44701,44702,44703,44704,44705,44706,44707,44708,44709,44710,44711,44714,44718,44720,44720,44721,44730,44730,44735,44750,44767,44799,44601,44646,44647,44648,44608,44613,44614,44626,44630,44632,44640,44641,44643,44650,44652,44657,44662,44666,44669,44670,44685,44688,44689,44056,44067,44087,44203,44210,44216,44221,44222,44223,44224,44232,44232,44236,44237,44250,44260,44262,44264,44278,44286,44301,44302,44303,44304,44305,44306,44307,44308,44309,44310,44311,44313,44314,44315,44316,44317,44319,44320,44321,44325,44326,44328,44333,44334,44334,44372,44396,44398,44632,44685,44280,44256,44254,44281,44273,44258,44274,44233,44215,44235,44251,44253,44212,44282,44275,44240];  // add as many zip codes as you like, separated by commas (no comma at the end)
var found = false;
for (var i=0; i<codes.length; i++) {
if (zv == codes[i]) {
found = true;
break;
}
}

if (!found) {
alert("Sorry, the Zip Code " + zv + " is not covered by our business");
return false;
//do nothing 
```

} else { alert("邮政编码 " + zv + " 由我们的服务团队负责。请按 OK 继续预约"); 文档.myform.submit(); } }

```
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:20:17.000

更改`onsubmit="checkZip()"`为`onsubmit="return checkZip()"`，因为现在您的表单总是被提交。

# visual-studio-2010 - 如何在 Visual Studio 2010 的 dotnet Nuke 中创建模块？

> ID：11344158
> 
> 赞同：2
> 
> 时间：2012-07-05T12:15:55.740
> 
> 标签：visual-studio-2010, dotnetnuke

如何在 Visual Studio 2010 的 Dotnetnuke 中创建模块。

我已经在我的 IIS 7 中安装了 dotnetnuke 6.2 版本。

现在，我想用一些数据库逻辑创建模块。

如何在 dotnetnuke 中创建模块以及如何在 Visual Studio 中显示 Dotnetnuke 模板在 Visual Studio 2010 中安装的模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:51:27.817

DotNetNuke Wiki 提供了有关[DotNetNuke 模块开发](http://www.dotnetnuke.com/Resources/Wiki/Page/Module-Development.aspx)的良好信息。

# regex - 正则表达式在 RTF 中提取带有排除的文本部分

> ID：11344164
> 
> 赞同：1
> 
> 时间：2012-07-05T12:16:00.263
> 
> 标签：regex, rtf

使用正则表达式我需要找到以空格开头**`\pard`**和结尾的所有内容，但同时又没有 **`\intbl`**。

接下来，您可以看到`RTF`文本文件。太感谢了。

```
{\rtf1\ansi\ansicpg1252\deff0{\fonttbl{\f0\fnil Lucida Console;}{\f1\fnil\fcharset0 Lucida Console;}{\f2\fnil\fcharset0 Arial Black;}}
{\colortbl ;\red0\green0\blue0;}
{\*\generator Msftedit 5.41.21.2509;}\viewkind4\uc1\trowd\trgaph10\trleft-32\trrh240\trpaddl10\trpaddr10\trpaddfl3\trpaddfr3
\clbrdrl\brdrw15\brdrs\brdrcf1\clbrdrt\brdrw15\brdrs\brdrcf1\clbrdrr\brdrw15\brdrs\brdrcf1\clbrdrb\brdrw15\brdrs\brdrcf1 \cellx966\clbrdrl\brdrw15\brdrs\brdrcf1\clbrdrt\brdrw15\brdrs\brdrcf1\clbrdrr\brdrw15\brdrs\brdrcf1\clbrdrb\brdrw15\brdrs\brdrcf1 \cellx2000\pard\intbl\qr\cf1\lang11274\f1\fs16 val1\cell val2\cell\row\trowd\trgaph10\trleft-32\trrh240\trpaddl10\trpaddr10\trpaddfl3\trpaddfr3
\clbrdrl\brdrw15\brdrs\brdrcf1\clbrdrt\brdrw15\brdrs\brdrcf1\clbrdrr\brdrw15\brdrs\brdrcf1\clbrdrb\brdrw15\brdrs\brdrcf1 \cellx966\clbrdrl\brdrw15\brdrs\brdrcf1\clbrdrt\brdrw15\brdrs\brdrcf1\clbrdrr\brdrw15\brdrs\brdrcf1\clbrdrb\brdrw15\brdrs\brdrcf1 \cellx2000\pard\intbl\qr val3\cell val4\cell\row\pard\li-30\cf0\lang0\f0\fs24\par
\lang11274\b\f2\fs48 Texto linea1\b0\f1\fs24\par
\par
Texto linea2\lang0\f0\par
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:22:44.350

那将是

```
\\pard(?:(?!\\intbl)[^ ])*[ ] 
```

**解释：**

```
\\pard       # Match "\pard".
(?:          # Try to match...
 (?!\\intbl) #  (unless we're at the start of the string "\intbl")
 [^ ]        #  any character except space
)*           # ...any number of times.
[ ]          # Then match a space. 
```

在您的示例文件中，这仅匹配`\pard\li-30\cf0\lang0\f0\fs24\par`。

# google-apps-script - 在 Google Apps Script Web 应用程序中使用项目 Javascript 和 CSS 文件？

> ID：11344167
> 
> 赞同：21
> 
> 时间：2012-07-05T12:16:11.927
> 
> 标签：google-apps-script, web-applications

如果我在 Google Apps Script 中创建一个简单的 HTML 网络应用程序，如下所示：

```
function doGet() {
    return HtmlService.createHtmlOutputFromFile("index.html");
} 
```

index.html 看起来像这样：

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<div>Test</div> 
```

是否可以将 JS 和 CSS 文件添加为项目的一部分并使用脚本和链接标签包含它们，或者它们是否必须内联/托管在其他地方？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-16T19:06:00.940

这是我发现有用的解决方法：

1.  将此函数添加到您的服务器端 Javascript：

    ```
    function getContent(filename) {
        return HtmlService.createTemplateFromFile(filename).getRawContent();
    } 
    ```

2.  `<script>`将第二个“html”文件添加到您的项目中，该文件仅包含由或`<style>`标记包围的 JS 或 CSS（视情况而定）。

    ```
    <!-- myscript.js.html -->
    <script>
        alert("Script included!");
    </script> 
    ```

3.  现在您可以将脚本包含在您的主 HTML 模板中，如下所示：

    ```
    <?!= getContent("myscript.js") ?> 
    ```

这样，您可以将您的 JS 和 CSS 拆分为任意数量的文件，并让它们都可以从 Apps 脚本项目中访问。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-27T22:39:34.427

[谷歌在这里](https://developers.google.com/apps-script/guides/html/best-practices#separate_html_css_and_javascript)提供了类似的解决方案。

基本上，他们建议您将此功能添加到您的 .gs 文件中：

```
function include(filename) {
  return HtmlService.createHtmlOutputFromFile(filename)
      .setSandboxMode(HtmlService.SandboxMode.IFRAME)
      .getContent();
} 
```

并将其中一项或两项添加到您的 .html 文件中：

```
<?!= include('Stylesheet'); ?>
<?!= include('JavaScript'); ?> 
```

引号中的名称当然是指包含带有`<script>`或`<style>`标记的 JS 或 CSS 代码的单独 .html 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-08T00:01:10.993

目前，让您的 CSS 和 JS 脚本成为您的 Google Apps 脚本项目的一部分是不可行的。您必须将其托管在其他地方并将 URL 指向您的模板中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-25T10:24:55.137

您不能在项目中包含简单的 js 或 css 文件，因此您要做的是创建包含它的 html 文件，并且最好将 <script></script> 或 <style> 放在这些文件中。

因此，您可能有一个文件，该文件名为`myscript.js.html`具有以下内容的文件：

```
<script>
  alert ("Hello World!");
</script> 
```

现在您将这一行放在您希望包含资产的 html 中

将其放在要包含资产的 html 中：

```
<?= HtmlService.createHtmlOutputFromFile('myscript.js').getContent() ?> 
```

请注意，文件名中的“.html”被省略了。

如果您要包含许多资产，那么创建一个辅助函数可能是一个好主意。您可以将以下函数放入您的代码（gs 文件）

```
function include(filename) {
    return HtmlService.createTemplateFromFile(filename).getRawContent();
} 
```

那么上面的行可以改成：

```
<?!= include('myscript.js') ?> 
```

最后，您还需要调用 HTMLTemplate 的评估（）方法，否则`<?!= ?>`html 文件中的代码将不会被评估。因此，如果您正在提供这样的 html 文件，例如：

```
var html=HtmlService.createTemplateFromFile('repeatDialog');
SpreadsheetApp.getUi().showModalDialog(html, 'foo'); 
```

您只需将其更改为：

```
var html=HtmlService.createTemplateFromFile('repeatDialog').evaluate();
SpreadsheetApp.getUi().showModalDialog(html, 'foo'); 
```

如果您之前使用的是 createHtmlOutputFromFile 而不是 createTemplateFromFile，那么您应该知道 evaluate() 返回 htmlOutput，所以如果您想知道将 .setWidth() 之类的东西放在哪里，那么它在 evaluate() 调用之后。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-20T18:48:27.910

您可以直接在 scriptlet 标记内呈现文件。

```
<?!= HtmlService.createTemplateFromFile("example.js").getRawContent() ?> 
```

`example.js.html`在您的应用程序脚本项目中创建文件。在 scriptlet 标记中呈现时，不要提及扩展名“.html”

# asp.net - 如何在 ASP.NET 中使用经典 ASP 会话对象来读取会话变量

> ID：11344169
> 
> 赞同：2
> 
> 时间：2012-07-05T12:16:14.243
> 
> 标签：asp.net, vb.net, com, asp-classic, vbscript

背景：

1.  我正在为经典 ASP 网站开发 ASP.NET 应用程序
2.  用户认证由经典的 ASP 网站执行
3.  经典的 ASP 网站将数据存储在会话变量中以识别经过身份验证的用户
4.  我需要在我的 ASP.NET 应用程序中读取这些会话变量中的数据

许多文章说您需要将会话状态存储在数据库中才能做到这一点。

他们都没有提到在 VB.NET 代码中使用 VBScript 对象。

**是否有可能做到这一点？我不能简单地在我的应用程序中引用一个 COM 库并使用对象及其方法吗？如果没有，怎么会？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:30:20.820

会话变量值不仅仅是函数调用的结果。它们依靠 IIS 和其他工具来唯一标识用户。不可能跨这两个框架直接检索会话状态。

当然，根据数据的敏感程度，您可以破解它。在后台进行 Ajax 调用以从自定义页面检索会话数据并将其提供给 .NET 会话。这是一种黑客攻击和安全风险，但它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:32:01.953

几种解决方案...，这是最近的一个

[http://weblogs.asp.net/lichen/archive/2011/10/30/sharing-session-between-asp-classic-and-asp-net-using-asp-net-session-state-server.aspx](http://weblogs.asp.net/lichen/archive/2011/10/30/sharing-session-between-asp-classic-and-asp-net-using-asp-net-session-state-server.aspx)

还有其他解决方案，google for session share asp.net asp 你会发现很多解决方案，包括ms自己的解决方案。

# php - PHP 编写的 OpenGrok 替代方案

> ID：11344175
> 
> 赞同：3
> 
> 时间：2012-07-05T12:16:25.310
> 
> 标签：php, svn, indexing, cross-reference, opengrok

是否有相当于 opengrok 或任何带有 php 前端的代码索引器工具？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:42:18.520

如果您正在寻找源代码交叉引用器，您可以查看[PHPXref](http://phpxref.sourceforge.net/)。

如果你想浏览 SCM 历史，那么你可以转向[WebSVN](http://websvn.tigris.org/)或 [GitPHP](http://www.gitphp.org/projects/gitphp/wiki)。

否则，您将不得不查看 PERL 替代品，例如[ViewVC](http://www.viewvc.org/)或[LXR](http://lxr.sourceforge.net/)。

# spring - EJB、Hibernate 和 Spring 事务

> ID：11344178
> 
> 赞同：1
> 
> 时间：2012-07-05T12:16:29.640
> 
> 标签：spring, hibernate, transactions, ejb

我有一个关于在 EJB、Spring 和 Hibernate 的上下文中使用事务管理器的问题。在我们的项目中，我们有一个用注解@TransactionAttribute(TransactionAttributeType.REQUIRED) 标记的无状态EJB。到目前为止，还没有定义进一步的交易。

现在每个 EJB 都调用一个服务。后者只是将调用重定向到最终 DAO 的委托。在每个 DAO 中，我们都使用 HibernateTemplate：问题是会话在 DAO 内的每个 get/load 方法之后很快关闭。为什么？

如果我用经典的 Hibernate 会话（最佳方法）替换 HibernateTemplate 并调用 getSession().getTransaction().isActive() 我总是错误，但会话仍然处于活动状态，直到服务调用结束（代表上文提到的）。在此之后，会议结束。为什么我会有这种不同的行为？Spring/hibernate 不能看到 EJB 事务属性吗？

提前致谢。

法比奥

# xml - 如何通过 PowerShell 从 xml 中获取值？

> ID：11344179
> 
> 赞同：16
> 
> 时间：2012-07-05T12:16:41.233
> 
> 标签：xml, powershell

我有包含此数据的 XML 文件

```
<?xml version="1.0" encoding="windows-1251" ?>
<ValCurs Date="06/06/2012" name="Курби асъор">
 <Valute ID="036">
   <CharCode>AUD</CharCode> 
   <Nominal>1</Nominal> 
   <Name>Доллари Австралия</Name> 
   <Value>4,6430</Value> 
  </Valute>
 <Valute ID="944">
   <CharCode>AZN</CharCode> 
   <Nominal>1</Nominal> 
   <Name>Манати Озарбой&#1207;он</Name> 
   <Value>6,0677</Value> 
  </Valute>
 <Valute ID="826">
   <CharCode>GBP</CharCode> 
   <Nominal>1</Nominal> 
   <Name>Фунт-стерлинги Ингилистон</Name> 
   <Value>7,3156</Value> 
   </Valute>
... 
```

和别的

如何通过 when的属性equals从`Nominal`and`Value`节点获取数据？`Valute``ID``826`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-05T12:21:14.293

您可以通过将字符串转换为以下内容来读取 XML `[xml]`：

```
$xml = [xml](Get-Content foo.xml) 
```

然后你可以使用

```
$xml.ValCurs.Valute | Where-Object {$_.ID -eq 826} | Select-Object Nominal,Value 
```

或更短：

```
$xml.ValCurs.Valute | ? {$_.ID -eq 826} | select Nominal,Value 
```

# html - 如何获取 wpf webclient 执行的 GET/POST 请求列表

> ID：11344183
> 
> 赞同：0
> 
> 时间：2012-07-05T12:16:51.037
> 
> 标签：html, wpf, vb.net, .net

我正在 VB.net 中开发 WPF 应用程序，如问题标题中所述，我试图列出由 Net.webclient 执行的 GET 或 POST 请求，我想要的结果类似于Firefox Web 控制台，有什么建议吗？（对不起我的英语不好，但我是意大利人）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:40:04.673

黑狐，

我建议使用[Fiddler](http://fiddler2.com/fiddler2/)。它捕获进出您机器的流量。希望有帮助！

-sf

# facebook - 什么样的代码是http://ogp.me/ns/fb#

> ID：11344185
> 
> 赞同：1
> 
> 时间：2012-07-05T12:17:11.153
> 
> 标签：facebook, facebook-opengraph, xfbml

从某种意义上说，我不是在问它做了什么，“它让你的 Facebook Like 按钮起作用。”

我要问的是，这是 javascript，是 css，还是什么？它看起来像一个类。如果我想编写自己的类似文件，我会用什么扩展名来命名它？

我问的原因是我想为我自己的小部件创建自己的类，并通过放置类似 xmlns:zz="http://mydomain.com/mylibrary/zz#" 的内容来引用我自己的类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:24:23.693

它是[JSON](http://www.json.org/)，顾名思义是 JavaScript 的一个子集，但由于它是为编码数据而不是代码而设计的，它实际上可以被大多数编程语言解析。扩展名无关紧要，但可能`.js`与 MIME 类型一起提供 `text/javascript`。

正如您所希望的那样，无法将它与 XML 命名空间一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:21:54.790

该 URL 重定向到[http://graph.facebook.com/schema/og/#](http://graph.facebook.com/schema/og/#)，它返回[JSON](http://en.wikipedia.org/wiki/JSON/)。

# iphone - CLGeocoder 只返回一个地标

> ID：11344188
> 
> 赞同：9
> 
> 时间：2012-07-05T12:17:22.447
> 
> 标签：iphone, objective-c, nsarray, clgeocoder

我有一个 CLGeocoder 问题，当我打电话时，`geocodeAddressString:withCompletionHandler`我只得到一个结果，尽管知道输入的字符串应该返回一个以上的值。类参考甚至指出：

> 在前向地理编码请求的情况下，如果提供的信息产生多个可能的位置，则可能会返回多个地标对象。

但是，我的地标数组中只有一项：

```
 [geocoderDestination geocodeAddressString:destination completionHandler:^(NSArray *placemarks, NSError *error){
NSLog(@"array count:%i", [placemarks count];} 
```

感谢您的任何帮助。

* * *

我使用了诸如“Piccadilly, UK”、“Union Street, UK”之类的字符串，它们只返回了一个结果。现在我想起来了，把英国放在最后可能是促成因素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T04:40:55.680

我不了解 CLGeocoder，但如果您的要求是位置搜索，另一种方法是使用谷歌位置搜索 url [http://maps.google.com/maps/geo?q=london](http://maps.google.com/maps/geo?q=london)，它返回一个包含匹配位置信息的 json。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T05:50:27.393

而不是`UK`使用`United Kingdom`它会给你一些相关的结果。
尝试在您的地址中添加更多信息。
还有一件事`UK`不是有效的国家/地区代码，`GB`但似乎放置`GB`而`UK`不是解决问题。
而且`CLGeocoder`不像`Google Maps API`现在那么聪明，因为苹果使用自己的服务器来解码地址，这样你就可以使用谷歌服务。

# c - 弹性路径添加不起作用

> ID：11344190
> 
> 赞同：1
> 
> 时间：2012-07-05T12:17:41.427
> 
> 标签：c, path, windows-xp, lex, flex-lexer

我正在尝试使用 flex 并已安装在 c:\gnuwin32\bin 中，已将此类添加到 PATH 以及 c:\dev-cpp\bin 中。

对 gcc 的调用没有问题，但对 flex 的调用没有问题，除非我在 c:\gnuwin32\bin 目录中，这意味着要求 gcc 使用 lex.yy.c 编译失败，因为它找不到一些外部 lex 函数像 yywrap()。

这是我的路径目前是最后两个项目或有问题的项目。最后一个路径项是否需要以分号结尾？我不知道为什么它不能正常工作..

![回声路径](../Images/879a28697194c28b9b1a59ad74a73958.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:23:43.733

您的问题与 PATH 连接无关。

Gcc 在链接时找不到 flex 运行时库，您必须添加 -L 选项以指定其位置并添加 libfl.a

就像是

```
gcc -o target *.o -L <path> -lfl 
```

您还可以使用以下 flex 选项禁用 yywrap 功能

```
 %option noyywrap 
```

请参阅[Flex 手册中的常见问题解答条目](http://westes.github.io/flex/manual/I-get-an-error-about-undefined-yywrap_0028_0029_002e.html)

# c++ - 如何转发声明一个类的成员函数以在另一个类中使用？

> ID：11344195
> 
> 赞同：17
> 
> 时间：2012-07-05T12:18:22.243
> 
> 标签：c++, forward-declaration

我制作了两个相同的类 X 和 Y，并带有一个指向彼此的指针。Xh，Yh 与所有交换的 X 和 Y 相同，请参见下面的代码。但是，此代码在我的方法 Connect 中出现错误（错误 C2027：使用未定义的类型“Y”）。在 Xh 中，我已经前向声明了类 Y，但它不知道 Y 有一个名为 SetXPointer 的方法。因此我也需要转发声明这个方法，对吗？

如果我尝试这样做（在行类 Y; 下添加行 Y::SetXPointer(X* pX_in);），我会收到编译器错误 C2761: 'void Y::SetXPointer(X *)' : member function redeclaration不允许。有没有办法在 X 类中使用 Y 类的公共方法？

```
// X.h

#pragma once

#include "Y.h"

// Forward declaration
class Y;

class X
{
public:
    X(void) : data(24) {};
    ~X(void) {};
    int GetData() { return data; }
    void SetYPointer(Y* pY_in) { pY = pY_in; }
    Y* GetYPointer() { return pY; }
    void Connect(Y* Y_in) { pY = Y_in; Y_in->SetXPointer(this); }
private:
    int data;
    Y *pY;
}; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-05T12:25:36.673

不要在类主体中包含方法主体。编写两个类，两个类都完成后，编写方法实现：

```
class Y;
class X {
  …
  void Connect(Y* Y_in);
  …
};
class Y {
  …
  void Connect(X* X_in);
  …
};
inline void X::Connect(Y* Y_in) {
  pY = Y_in;
  Y_in->SetXPointer(this);
}
inline void Y::Connect(X* X_in) {
  pX = X_in;
  X_in->SetXPointer(this);
} 
```

这样，在实现方法时，就可以获得有关类对象如何在内存中布局的完整信息`Connect`。并且由于类主体中的方法和声明的方法`inline`都将以相同的方式内联，因此性能也将相同。

唯一的缺点是您将无法以合理的方式将这两个类拆分为两个标题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T12:19:18.493

如果您的两个类在其方法中都需要完整类型，那么唯一的方法是将实现分离到一个实现文件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-20T18:46:14.900

您可以将 B 类放入 A 类

```
using namespace std;

class A
{
        public:
        void run()
        {
                B b("hi");
                b.run(this);
        }

        void print(string &msg) { cout << msg << endl; }

        private:
        class B
        {
                public:
                B(string m) : msg(m) {}
                void run(A *a) { a->print(msg); }

                private:
                string msg;
        };
};

int main()
{
        A a;
        a.run();
        return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T12:31:59.510

如果您打算在 X 和 Y 之间共享大部分实现，您可能希望使用模板来实现。一个例子如下：

```
template<bool isX> class XY
{
public:
  typedef XY<!isX> YX; // This is the opposite type to the current one.
  XY(void) : data(24) {};
  ~XY(void) {};
  int GetData() { return data; }
  void SetPointer(YX* pYX_in) { pYX = pYX_in; }
  YX* GetPointer() { return pYX; }
  void Connect(YX* YX_in) { pYX = YX_in; YX_in->SetPointer(this); }
private:
  int data;
  YX *pYX;
};

typedef XY<true> X;
typedef XY<false> Y; 
```

由于模板方法仅在使用时才被实例化，因此可以避免上述问题，因为当它们被实例化时，这两种类型都是已知的。`X`如果您以后在和之间存在差异`Y`，您可能会使用继承而不是`typedef`.

# opengl - 在窗口调整大小期间使用纹理

> ID：11344197
> 
> 赞同：0
> 
> 时间：2012-07-05T12:18:39.200
> 
> 标签：opengl, resize, aspect-ratio

所以我想要做的是将当前的前端缓冲区复制到纹理，并在调整大小期间使用它来模仿正常窗口调整大小会做的事情。我这样做是因为在调整大小期间渲染场景过于昂贵，并且我想提供流畅的调整大小。

纹理处理很好，但我正在努力计算数学以使纹理适当地缩放和平移（我知道当放大到最大图像尺寸之外时会有可见的边界）。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:34:41.650

> 但我正在努力计算数学以使纹理缩放和适当翻译

好吧，这取决于您的视野基于哪个轴。如果是纵轴，那么增加宽高比必然会导致左右上下左右上下左右的上下左右上下左右上下左右的上下左右上下左右上下左右上下左右上下左右上下左右上下左右上下左右上下左右上下左右上下拼色。如果您的 FOV 基于水平轴，则类似的增加高度/宽度将信箱顶部和底部。如果方面变化相反，则您没有信箱，因为您不需要额外的图片信息。

不幸的是，没有一刀切的解决方案。要么您使用一些边框，要么在不保留外观的情况下拉伸图像，或者在调整窗口大小之前，您使用更大的 FOV 渲染为仅显示子集的二次纹理。

# java - Grails：是什么导致 NameRegistry.getIdFor 中的 ArrayIndexOutOfBoundsException？

> ID：11344201
> 
> 赞同：1
> 
> 时间：2012-07-05T12:18:58.913
> 
> 标签：java, spring, grails, groovy

我在 Grails 2.0.4 应用程序中得到以下堆栈跟踪：

```
java.lang.ArrayIndexOutOfBoundsException: 6170
        at com.springsource.loaded.NameRegistry.getIdFor(NameRegistry.java:44)
        at com.springsource.loaded.NameRegistry.getIdOrAllocateFor(NameRegistry.java:59)
        at com.springsource.loaded.TypeRegistry.getTypeIdFor(TypeRegistry.java:756)
        at com.springsource.loaded.MethodInvokerRewriter$RewriteClassAdaptor$RewritingMethodAdapter.rewritePUTSTATIC(MethodInvokerRewriter.java:789)
        at com.springsource.loaded.MethodInvokerRewriter$RewriteClassAdaptor$RewritingMethodAdapter.visitFieldInsn(MethodInvokerRewriter.java:708)
        at sl.org.objectweb.asm.ClassReader.accept(Unknown Source)
        at sl.org.objectweb.asm.ClassReader.accept(Unknown Source)
        at com.springsource.loaded.MethodInvokerRewriter.rewrite(MethodInvokerRewriter.java:280)
        at com.springsource.loaded.MethodInvokerRewriter.rewrite(MethodInvokerRewriter.java:83)
        at com.springsource.loaded.TypeRegistry.methodCallRewrite(TypeRegistry.java:767)
        at com.springsource.loaded.agent.ModifyDefineInClassLoaderForClassArtifactsType.modify(ModifyDefineInClassLoaderForClassArtifactsType.java:77)
        at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts.define(ClassLoaderForClassArtifacts.java)
        at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts$1.run(ClassLoaderForClassArtifacts.java:86)
        at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts$1.run(ClassLoaderForClassArtifacts.java:84)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.codehaus.groovy.reflection.ClassLoaderForClassArtifacts.defineClassAndGetConstructor(ClassLoaderForClassArtifacts.java:84)
        at org.codehaus.groovy.runtime.callsite.CallSiteGenerator.compilePogoMethod(CallSiteGenerator.java:217)
        at org.codehaus.groovy.reflection.CachedMethod.createPogoMetaMethodSite(CachedMethod.java:228)
        at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.createCachedMethodSite(PogoMetaMethodSite.java:207)
        at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.createPogoMetaMethodSite(PogoMetaMethodSite.java:183)
        at groovy.lang.MetaClassImpl.createPogoCallCurrentSite(MetaClassImpl.java:3022)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.createCallCurrentSite(CallSiteArray.java:95)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145)
        < actual call site in my code, some method call to the same service the original method is in> 
```

显然我的 google-Fu 已经失去了我，或者以前没有人遇到过这个问题。甚至搜索都不会`com.springsource.loaded.NameRegistry`产生任何结果。

在多次尝试相同的操作后，问题通常会消失，但这很难解决。关于我可以寻找什么的任何提示？

我的疯狂猜测是 Spring 正在代理我试图调用的方法，并且不知何故无法在自己的注册表中查找它。这怎么可能是我的错？

编辑：导致此问题的 Stacktrace 中的第一行是一个无害的方法调用，例如以下`foo`方法`bar`中的调用：

```
class FooService {
      def foo(bla, bloerk) {
          1
      }

      def bar() {
          foo(1,2)
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:04:01.400

实际上，在使用 GPars 进行批量更新时，我经常看到这一点。我通过将失败的条目添加到批处理完成后执行的重试池来解决该问题。但是，我对解决方案并不满意。但是由于该功能并不是很关键，并且每隔一小时左右运行一次，它只会为很少更新的对象提供一个小的更新故障。

我从来没有在生产模式下看到过这种情况，只是在开发模式下，所以我认为它在某种程度上与 classLoader 的动态重新加载能力有关。我也经常在批处理运行开始时看到这种类型的错误，当 JVM 预热时，事情顺利进行。我将更深入地研究这个问题。如果我发现更有用的东西，我会回帖。

只是想我会回复你的帖子，告诉你你并不孤单。

我在 Mac OSX 上运行：java 版本 "1.6.0_33" Java(TM) SE Runtime Environment (build 1.6.0_33-b03-424-11M3720) Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03- 424，混合模式）

而且我在 Grails 2 -> 2.1 中都看到过这个问题，不要以为我在 1.3.5->1.3.7 中看到过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:25:57.720

您正在尝试读取/存储一个负数，或者存储/读取一个大于 array.size() 的数字。

# java - Eclipse 不在远程调试模式下突出显示当前行

> ID：11344204
> 
> 赞同：6
> 
> 时间：2012-07-05T12:19:04.123
> 
> 标签：java, eclipse, highlight, remote-debugging

我在 Mac OS X Lion 上使用 Eclipse Indigo。当尝试远程调试一个项目时，它需要很长时间才能突出显示当前行。它在断点处正确停止，我可以单步执行代码，除了当前行本身之外的所有内容都没有突出显示。它仅在大约 4 到 5 分钟后才突出显示，之后一切正常。

我在 CentOS 中也注意到了同样的问题。这是eclipse中的错误还是我唯一面临这个问题。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-03T23:27:10.367

切换工作区后我遇到了同样的问题。

只需重新启动 Eclipse 即可解决。

（日食火星 v4.5.0）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:44:04.730

**只需在此处查看您的偏好：**

```
 Window > Preferences > General > Editors > All Text Editors >
 Annotations > 'Debug Call Stack'  and 'Debug Current Instruction Pointer' 
```

并检查颜色并相应地更改它。
可以帮到你..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-05T12:43:01.377

我有类似的问题。我看到它突出显示，在断点处停止。但我无法使用逐步（F6）调试。原因是eclipse由于断点而停止并在调试中突出显示/选择了顶部线程。

所以我选择了当前线程，通过一一验证，直到当前代码（由于断点而停止）突出显示。

要查看正在运行的线程，请添加调试视图（如果未显示）。窗口 > 显示视图 > 调试。

这也有助于我在运行程序上分别调试 2 个线程。

似乎没有短键可以从因断点停止的代码中定位当前线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-06T11:25:25.227

我有同样的问题。我刚刚再次开始日食，效果很好

# iphone - png内图形的UIImage路径

> ID：11344214
> 
> 赞同：0
> 
> 时间：2012-07-05T12:19:30.737
> 
> 标签：iphone, cocoa

我有png，它有清晰的背景，里面有困难的人物，比如动物。对我来说，有必要准确地获取该图形的路径，将其绘制在背景图像上。你能建议任何方式以编程方式做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:30:54.497

使用 png alpha 通道为背景图像创建蒙版。[这里](https://stackoverflow.com/questions/8126276/how-to-convert-uiimage-cgimagerefs-alpha-channel-to-mask)有更详细的讨论。

# c++ - 结合两个 GCC 命令/从两个中生成一个 Makefile（QT 和 GCC 插件）

> ID：11344223
> 
> 赞同：1
> 
> 时间：2012-07-05T12:20:14.460
> 
> 标签：c++, qt, gcc, makefile

我写了一个运行良好的 GCC 插件。我创建了一个 Makefile，它执行以下命令来创建插件：

```
$ g++ -I$(INCLUDE_PATHS) -fPIC -shared $(SOURCE_PATHS) -o Plugin.so 
```

我使用以下命令执行插件：

```
$ g++ -S -fplugin=./Plugin.so /TestProgramm.cpp 
```

这工作得很好。现在我想在调用插件时显示一个 QT GUI。我在 Eclipse 中编写了 GUI，所以我得到了一个自动生成的 MakeFile。执行 GUI 时，Eclipse 执行以下命令：

```
g++ -c -pipe -g -Wall -W -D_REENTRANT -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I$(QT_INCLUDE_PATHS) -o debug/GUI.o GUI.cpp

g++ -Wl,-rpath,/opt/QtSDK/Desktop/Qt/4.8.1/gcc/lib -o GraphGUI debug/GUI.o debug/main.o debug/GraphGUI.o debug/moc_GraphGUI.o -L/opt/QtSDK/Desktop/Qt/4.8.1/gcc/lib -lQtGui -L/opt/QtSDK/Desktop/Qt/4.8.1/gcc/lib -L/usr/X11R6/lib -lQtCore -lpthread 
```

GraphGUI 和 GUI 是我写的 GUI 的类。

现在我想将这些语句组合到我自己的 Makefile 中，以便编译器编译我的插件和我的 GUI。几天前我开始使用 Makefiles，所以我只了解了 Makefiles 的基础知识。希望有人能帮助我。

这是我的Makefile：

```
GCC := g++
FILENAME := Explorer.so

GCC_INCLUDE := -I/usr/lib/gcc/i686-linux-gnu/4.6/plugin/include
QT_INCLUDE := -I/opt/QtSDK/Desktop/Qt/4.8.1/gcc/mkspecs/default \
              -I/opt/QtSDK/Desktop/Qt/4.8.1/gcc/include/QtCore \
              -I/opt/QtSDK/Desktop/Qt/4.8.1/gcc/include/QtGui \
              -I/opt/QtSDK/Desktop/Qt/4.8.1/gcc/include 

SOURCE_FILES = ## Some .cpp files for the plugin ##

$(FILENAME): 

    @$(GCC) $(GCC_INCLUDE) -fPIC -shared $(SOURCE_FILES) -o $@ $^

clean:
    @rm $(FILENAME) 
```

我尝试创建 GUI 的目标文件，然后将它们包含在创建插件的命令中；像这样：

```
 $(GCC) -c -pipe -g -Wall -W -D_REENTRANT -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED $(QT_INCLUDE) -Idebug -I. -o debug/GUI.o src/Visualize/GUI.cpp

    $(GCC) -c -pipe -g -Wall -W -D_REENTRANT -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED $(QT_INCLUDE) -Idebug -I. -o debug/GraphGUI.o src/Visualize/GraphGUI.cpp

    # /opt/QtSDK/Desktop/Qt/4.8.1/gcc/bin/moc -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED $(QT_INCLUDE) -Idebug -I. src/Visualize/GraphGUI.h -o debug/moc_GraphGUI.cpp

    # $(GCC) -c -pipe -g -Wall -W -D_REENTRANT -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED $(QT_INCLUDE) -Idebug -I. -o debug/moc_GraphGUI.o debug/moc_GraphGUI.cpp

    $(GCC) $(PLUGIN_INCLUDE) -fPIC -shared $(SOURCE_FILES) debug/GraphGUI.o debug/GUI.o -o $@ $^ 
```

如果我像这样执行它，我会得到未定义的符号：_ZN11QMainWindowC2EP7QWidget6QFlagsIN2Qt10WindowTypeEE 错误。如果我也执行以“#”开头的两个命令，我会得到“未定义的 main 引用”。我只是从 eclipse 中复制了这些命令；我实际上不知道他们在做什么。

# android - android.graphics.Paint.native_measureText（本机方法）处的 IndexOutOfBoundsException

> ID：11344227
> 
> 赞同：1
> 
> 时间：2012-07-05T12:20:31.377
> 
> 标签：android

我在 Google Play 上有一个 android 应用程序，偶尔会通过开发者控制台/ACRA 报告以下错误。该应用程序在我的测试设备和我测试它的各种 AVD 上运行良好。

堆栈跟踪没有说明问题出在应用程序的哪个位置。我能做些什么来缩小查看范围吗？一般是什么原因导致错误？

```
 java.lang.IndexOutOfBoundsException
        at android.graphics.Paint.native_measureText(Native Method)
        at android.graphics.Paint.measureText(Paint.java:1020)
        at android.graphics.Paint.measureText(Paint.java:1057)
        at android.text.Styled.drawDirectionalRun(Styled.java:267)
        at android.text.Styled.measureText(Styled.java:430)
        at android.text.Layout.measureText(Layout.java:1518)
        at android.text.Layout.getHorizontal(Layout.java:564)
        at android.text.Layout.getHorizontal(Layout.java:548)
        at android.text.Layout.getPrimaryHorizontal(Layout.java:533)
        at android.widget.TextView$QuickAction.getBound(TextView.java:9550)
        at android.widget.TextView$QuickAction.show(TextView.java:9604)
        at android.widget.TextView$QuickActionController.show(TextView.java:8846)
        at android.widget.TextView.performLongClick(TextView.java:8033)
        at android.view.View$CheckForLongPress.run(View.java:9096)
        at android.os.Handler.handleCallback(Handler.java:587)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:130)
        at android.app.ActivityThread.main(ActivityThread.java:3701)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller
        .run(ZygoteInit.java:895) 
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:653)
        at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-02T11:18:26.373

从这个角度来看，您的应用程序初始化块中存在竞争。在发出平局之前，您的文本资源之一可能没有完全膨胀。（我知道，android 运行时的模型应该防止这种情况发生，但是如果在计算布局时发生这种情况，那将是合理的）。

希望这对缩小范围有所帮助。

# c++ - 如何将元素排序到 C++ 矩阵中？

> ID：11344228
> 
> 赞同：-3
> 
> 时间：2012-07-05T12:20:34.257
> 
> 标签：c++

我是 C++ 编程的新手。我需要对这个矩阵进行排序：

```
#include <iostream>
#include <iomanip>

#include <cstdlib>

using namespace std;

int main(int argc, char** argv) {

    Mat10 a;
    fillRand(a, 5, 5);
    prnMat(a, 5, 5);
    cout << endl;

    return 0;
}

void fillRand(Mat10 m, int n, int k) {
    for (int i = 0; i < n; i++)      
        for (int j = 0; j < k; j++)
            m[i][j] = rand() % 1000;    
}

void prnMat(Mat10 a, int m, int n) {
    for (int i = 0; i < m; i++) {        
        for (int j = 0; j < n; j++)
            cout << setw(8) << a[i][j];
        cout << endl;
    }
} 
```

我需要从头开始对矩阵进行排序。最小值必须在第一列的开头。下一个必须在它下面，依此类推。结果必须是排序矩阵 - 最小的数字必须在左列的开头 - 最大值必须在矩阵的末尾。你能帮忙解决问题吗？

编辑

也许我找到了可能的解决方案：

```
void sort(int pin[10][2], int n)
{
    int y,d;
    for(int i=0;i<n-1;i++)
    {
        for(int j=0; j<n-1-i; j++)
        {
            if(pin[j+1][1] < pin[j][1])  // swap the elements depending on the second row if the next value is smaller
            {
                y = pin[j][1];
                pin[j][1] = pin[j+1][1];
                pin[j+1][1] = y;
                d = pin[j][0];
                pin[j][0] = pin[j+1][0];
                pin[j+1][0] = d;
            }
            else if(pin[j+1][1] == pin[j][1]) // else if the two elements are equal, sort them depending on the first row
            {
                if(pin[j+1][0] < pin[j][0])
                {
                    y = pin[j][1];
                    pin[j][1] = pin[j+1][1];
                    pin[j+1][1] = y;
                    d = pin[j][0];
                    pin[j][0] = pin[j+1][0];
                    pin[j+1][0] = d;
                }
            }
        }
    }
} 
```

但由于我是编程新手，我不明白这是解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T12:40:35.577

这是一个简单的例子：

```
#include <vector>
#include <algorithm>

using namespace std;

//This is the comparation function needed for sort()
bool compareFunction (int i,int j) 
{ 
    return (i<j); 
}

int main()
{
    //let's say you have this matrix
    int matrix[10][10];
    //filling it with random numbers.
    for (int i = 0; i < 10; i++)
        for (int j = 0; j < 10; j++)
            matrix[i][j] = rand() % 1000;

    //Now we get all the data from the matrix into a vector.
    std::vector<int> vect;
    for (int i = 0; i < 10; i++)
        for (int j = 0; j < 10; j++)
            vect.push_back(matrix[i][j]);

    //and sort the vector using standart sort() function
    std::sort( vect.begin(), vect.end(), compareFunction );

    //Finally, we put the data back into the matrix
    for (int i = 0; i < 10; i++)
        for (int j = 0; j < 10; j++)
            matrix[i][j] = vect.at(i*10 + j);
} 
```

在此之后，矩阵将按*行*排序：

```
1 2
3 4 
```

如果您希望它按*cols*排序：

```
1 3
2 4 
```

您只需要`matrix[i][j]`在*最后一个循环*中替换为`matrix[j][i]`

如果您需要阅读有关 sort() 函数的信息，可以在[此处](http://www.cplusplus.com/reference/algorithm/sort/)进行， 希望对您有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T13:01:42.693

您可以简单地在数组上调用[std::sort ：](http://en.cppreference.com/w/cpp/algorithm/sort)

```
#include <algorithm> // for std::sort

int main() {

  int mat[10][10];
  // fill in the matrix
  ...

  // sort it
  std::sort(&mat[0][0], &mat[0][0]+10*10);

} 
```

# triggers - Salesforce.com：UNABLE_TO_LOCK_ROW，无法获得对该记录的独占访问权

> ID：11344231
> 
> 赞同：0
> 
> 时间：2012-07-05T12:20:55.880
> 
> 标签：triggers, salesforce, apex-code

在我们的生产组织中，我们有一个使用命令行数据加载器将销售数据上传到 Salesforce 的系统。此数据被加载到临时对象**Temp**中。我们创建了一个公式字段（它结合了三个字段）来形成一个唯一键。该对象的目的是减少用户手动创建密钥的工作量。

**Temp**上有一个插入后触发器， 它调用一个异步方法，该方法使用键将数据更新到另一个对象**SalesData**。**SalesData**上的插入/更新触发器检查各个字段并创建/更新另一个对象**SalesRecords**中的记录。插入/更新完成后，临时对象**Temp**中的所有记录都将 被删除。SalesRecords对象**上**没有任何触发器，并且是另一个对象**Sales**的子对象。**Sales**对象有一些汇总字段，这些字段汇总了SalesRecords**对象**的字段。

最近，我们收到了一些更新的记录的以下错误。UNABLE_TO_LOCK_ROW，无法获得对该记录的独占访问权

请提供一些解决问题的指示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:33:58.337

这可能是由各种触发器执行中的 DML 操作冲突或某些递归触发器执行引起的。我会假设异步执行会导致同一记录上的多个后续更新，可能是在 SalesRecords 对象上。我建议尝试简化流程以避免太多相关的触发器执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T19:41:27.390

我有点惊讶你能够让这个工作摆在首位。应谨慎使用后触发器，并且仅在不能使用前触发器时使用。这样做的一个原因是您不需要执行额外的 DML 来更改记录，因为在之前的触发器中您只需更改值并且插入/更新提交会自动发生。但是递归触发器触发是后触发器的主要问题。

避免触发器重新进入的一种快速方法是在一个类中使用公共静态布尔值，该类说明您是否已经在来自同一执行线程的此触发器中。

就像是：

```
public static Boolean isExecuting = false; 
```

一旦设置为`true`，任何重新触发的触发代码都可以通过以下方式避免：

```
if(Class.isExecuting == false)
{
   Class.isExecuting = true;

   // Perform trigger logic
   // ...
} 
```

此外，由于无法预先确定触发器执行的顺序，您可能会看到删除或其他数据更改的问题，这些问题取决于流程的其他部分首先完成。

此外，在不知道您的自定义唯一 3 部分密钥的详细信息的情况下，我想知道那里是否也存在问题，例如它是否真的是唯一的。不区分大小写是一个常见错误，这也是 Salesforce 中有 15 和 18 个字符 ID 的原因。例如，当人们导出到 Excel（不区分大小写的环境）并进行 VLOOKUP 时，他们偶尔会发现错误的记录。添加了 3 位计算后缀以消除不区分大小写环境的歧义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T15:31:52.320

谷歌搜索同样的错误导致我这篇文章：

[http://boards.developerforce.com/t5/General-Development/Unable-to-obtain-exclusive-access-to-this-record/td-p/345319](http://boards.developerforce.com/t5/General-Development/Unable-to-obtain-exclusive-access-to-this-record/td-p/345319)

这指出了发生这种情况的一些常见原因：

1.  正在计算共享规则。
2.  选项列表值已被替换并且正在进行替换。
3.  正在创建/删除自定义索引。
4.  最不可能的 - 其他人已经在编辑您试图同时访问的同一记录。

在这里张贴以防其他人需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T18:37:28.670

我今天多次收到此错误。结果我们的一个供应商在那段时间在同一个组织中更新了他们安装的包。各种各样的事情也出错了——在 DML 上抛出了一些对象验证异常，没有任何错误消息内容。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-12T13:51:18.830

解决方法 当尝试对已具有字段更新以导致汇总汇总字段进行计算的父对象进行字段更新（例如汇总汇总字段）时，将显示此错误。如果在主对象上运行触发器或另一个顶点作业并且它也尝试进行更新，则也可能发生这种情况。

如果出现此问题，您可以减少批量大小并重试，或者创建单独的较小文件以导入。

# ms-access - VBA MS Access 2010 如何调用对象的子程序？

> ID：11344232
> 
> 赞同：0
> 
> 时间：2012-07-05T12:21:10.393
> 
> 标签：ms-access, vba, ms-access-2010, subroutine

我一直在尝试在 VBA 中为我的 Access 应用程序创建一个子例程：

```
Public Sub addProduct(ByRef Product As Product, AsFoo As Integer, Optional Mutual As Boolean = True)
    Products.Add (Product)

    If (Mutual) Then
        Select Case AsFoo
            Case 0
                Product.setProjectmanager = Me
            Case 1
                Product.setVIP1 = Me
            Case 2
                Product.setVIP2 = Me
            Case 11
                Product.setVIP1A = Me
            Case 22
                Product.setVIP2A = Me
        End Select
    End If
End Sub 
```

如果 Mutual 为真，那应该只将给定的产品添加到产品集合中，并将引用设置为用户引用。

那应该可以工作...问题是我不知道如何称呼我目前的尝试是：

```
User.addProduct(Product, 0, True) 
```

但是 IDE 希望最后有一个 = 所以我认为这会起作用：

```
User.addProduct(Product, 0, True) = Product 
```

但这会导致编译错误： `Expected function or Variable`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:09:02.030

尝试使用以下命令调用该行：

`User.addProduct Product, 0, True`

或者

`Call User.addProduct(Product, 0, True)`

删除`()`或使用`Call`关键字应该适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:10:33.803

我不确定这是否是您想要做的，但如果它是将类实例添加到集合中，我建议如下：

```
Sub Main_sub()

dim colProduct as Collection 
dim cProduct as clsProduct
dim asFoo as integer    
dim Mutual as boolean

set colProduct = new collection
set cProduct = new clsproduct

asFoo = ? 'Define
Mutual = ? 'Define

'if the AddProduct function resides in the clsProduct class: 
set cProduct = cproduct.AddProduct(cProduct, asFoo, Mutual)
colProduct.add cProduct

set cProduct = nothing
set colProduct = nothing

end sub 
```

而对于私有产品类属性 Projectmanager, VIP1, VIP2, VIP1A,VIP2A

```
Public function addProduct(cProduct as clsProduct, AsFoo As Integer, Optional Mutual As Boolean) as cProduct

            If (Mutual) Then 
                Select Case AsFoo 
                Case 0 
                    cProduct.Projectmanager = Me 
                Case 1 
                    cProduct.VIP1 = Me 
                Case 2 
                    cProduct.VIP2 = Me 
                Case 11 
                    cProduct.VIP1A = Me 
                Case 22 
                    cProduct.VIP2A = Me 
                End Select 
            End If
set addProduct = cProduct
End Sub 
```

您可以通过以下方式在类模块中声明属性：

```
Private pVIP1 as <Type> 
```

和吸气剂/二传手：

```
Public Property Get VIP1() As <Type>
    VIP1 = pVIP1
End Property

Public Property Let VIP1(tVIP1 As <Type>)
    pVIP1 = tVIP1
End Property 
```

如果类型是对象，则需要使用 SET 而不是 LET。

```
Public Property SET VIP1(tVIP1 As <Type>)
    SET pVIP1 = tVIP1
End Property 
```

也许我误解了你的意图，因为我没有看到将我添加到每个案例的目的。但这是我能想到的最好的。

# c# - 启动 ASP.NET 状态服务时出错

> ID：11344235
> 
> 赞同：6
> 
> 时间：2012-07-05T12:21:18.053
> 
> 标签：c#, asp.net, service

尝试启动 ASP.NET 状态服务时出现以下错误：

> Windows 无法在本地计算机上启动 ASP.NET 状态服务服​​务。
> 
> 错误2：系统找不到指定的文件。

我在 google 上找到的所有内容都告诉我在命令提示符下转到该`%windir%\Microsoft.NET\Framework\v1.1.4322`文件夹​​，然后键入以下命令：`aspnet_regiis.exe -ir`

我做了但没有解决问题。在我的例子中，可执行文件的路径是 2.0: `C:\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_state.exe`。

所以我在 v2 文件夹上尝试了相同的命令，我得到了错误：

> “试图加载格式不正确的程序”。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T12:24:43.567

[如此处](http://thelittlewolfsadventuresindotnet.blogspot.nl/2010/03/aspnet-state-service-system-cannot-find.html)所述，它会在您需要 64 位时尝试加载 32 位版本。如果适用，请打开 RegEdit（风险自负等）并`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\aspnet_state\ImagePath` 从 更改`%SystemRoot%\Microsoft.NET\Framework\v2.0.50727\aspnet_state.exe`为`%SystemRoot%\Microsoft.NET\Framework64\v2.0.50727\aspnet_state.exe`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T14:44:45.250

您无需重新安装此服务。只需在服务“ASP.NET State Server”中找到并启动它。您也可以在首选项中设置自动启动此服务。

# jquery - 单击输入字段后显示/隐藏 div 元素的更好方法

> ID：11344237
> 
> 赞同：0
> 
> 时间：2012-07-05T12:21:21.480
> 
> 标签：jquery, html

我有两个这样的输入字段

```
<input type="text" class="span3" id name="name" >
<input type="text" class="span3" id name="phone" >

<div class="show-example1">
      show content 1
</div>
<div class="show-example2">
      show content 2
</div> 
```

单击输入字段“名称”后，我只想显示 div 元素“show-example1”

并在单击输入字段“电话”后仅显示 div 元素“show-example2”

为此，我制作了与每个输入字段关联的两个 div 元素。

以下是我执行上述操作的脚本

```
 $('.show-example1').hide();
  $('.show-example2').hide();

$("input[name='name']").bind("click", function(event){

            $('.show-example2').hide();
            $('.show-example1').show(400);
            return false;

        }); 

    $("input[name='phone']").bind("click", function(event){

            $('.show-example1').hide();
            $('.show-example2').show(400);
            return false;

        }); 
```

我的脚本运行良好，但我只想知道一种更好的方法来执行上述操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:37:29.180

这是我的解决方案。简而言之 - 我利用标签属性`focus`和`blur`事件来处理这项任务。与其他人相比，它的好处是您只需几行 jQuery 就可以覆盖所有表单元素，而无需手动打开/关闭每个其他 div，同时保持 JS 的不显眼的方法。

HTML

```
<form>
    Other information <textarea name="other_information" class="hintable" hint-class="show-example1"></textarea><br />
    Nationality <textarea name="nationality" class="hintable" hint-class="show-example2"></textarea><br />
    <div class="example show-example1">
        Example 1
    </div>
    <div class="example show-example2">
        Example 2
    </div>
</form> 
```

CSS

```
.example
{
    display: none;
}​ 
```

JS

```
$('.hintable').focus(function() {
   $('.example').hide();
   $("."+$(this).attr('hint-class')).show();
});

$('.hintable').blur(function() {
   $('.example').hide();
}); 
```

​</p>

[小提琴链接](http://jsfiddle.net/Trogvar/8vhmF/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:32:38.727

我认为您的示例非常简单。如果我是你，出于性能原因，我会缓存选择器：

```
var showExample1 = $('.show-example1');
var showExample2 = $('.show-example2'); 
```

然后在您的代码中相应地使用它们，使用快速 id 选择器而不是慢速输入/名称选择器：

```
$("#phone").bind("click", function(e){
   e.preventDefault();
   showExample1.hide();
   showExample2.show(400);
}); 
```

等等。您还可以将 click 事件绑定到单个事件中，以最小化代码并具有更好的可读性：

```
$("#name, #phone").bind('click.toggle', function(e) {
  e.preventDefault();
  if ($(this).prop('id') == 'name') {
     showExample1.hide();
     showExample2.show(400);
  } else {
     showExample2.hide();
     showExample1.show(400);
  }
}); 
```

如果您想在以后取消绑定，单击活页夹 ('.toggle') 上的命名空间会有所帮助。

**如果**你想拥有真正 DRY 的代码，你可以尝试这样的事情：

```
var togglers = {phone: 'show-example1', name: 'show-example2'};
$.each(togglers, function(toggler, toggled) {
   $('#' + toggler).on('focus', function(e) { // if you call focus, also selecting the input via keyboard will work
     e.preventDefault();
     $('.' + toggled).show(400).siblings().hide(); // hiding all the elements on the same DOM level instead of just one
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:32:52.163

我建议做 .on('click', function(event){ 而不是 bind。[这](http://www.britishdeveloper.co.uk/2012/04/jquery-dont-use-bind-and-dont-use-live.html)是一个解释一点的页面。

看起来您正在尝试制作 [jQuery 手风琴](http://jqueryui.com/demos/accordion/)。看看那个链接。

# r - 无法在 R 中绘制预测线

> ID：11344241
> 
> 赞同：0
> 
> 时间：2012-07-05T12:21:38.257
> 
> 标签：r, plot

我正在使用这些数据：

```
'data.frame':   1584 obs. of  3 variables:
$ Individual: Factor w/ 3 levels "AG201","AG202",..: 1 1 1 1 1 1 1 1 1 1 ...
$ Used      : Factor w/ 2 levels "no","yes": 2 2 2 2 2 2 2 2 2 2 ...
$ NDVI      : int  4724 4576 4894 4297 4670 4932 4346 3810 3481 4058 ... 
```

我正在使用“NDVI”作为连续解释变量进行 glm，然后通过数据的散点图绘制模型（我正在复制与 R 书中相同的脚本，Crawley，p.596）

```
model<-glm(Used~NDVI,binomial);
xv<-seq(0,10000,0.2);
yv<-predict(model,list(NDVI=xv),type="response");
plot(NDVI,Used);
lines(xv,yv); 
```

我的问题是我的图表上没有出现任何线条......

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:33:47.310

根据 Gavin 的见解，这里有一个建议：

```
plot(NDVI, as.numeric(Used)-1 )
lines(xv,yv) 
```

因子是整数向量`1L`，默认情况下以标签的 alpha 顺序从分配开始。因此，您应该可以接受“否”<“是”，导致“否”为 1，“是”为 2，然后向下移动到正确的比例 [0,1]。您可能还需要查看`str(yv)`

# html - 水平滚动条到某些列

> ID：11344244
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:21:45.550
> 
> 标签：html

在我的表格中有某些列..我想将水平滚动条作为一个整体提供最后 5 列..这意味着 5 列将只有一个滚动条..如果没有，我想要功能。的列增加滚动条应该出现。表中共有 9 列.. 怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:24:22.333

只需`overflow-x: scroll;`在您的 CSS 中使用。

演示：http: [//jsfiddle.net/dystroy/S8jLA/](http://jsfiddle.net/dystroy/S8jLA/)

如果您希望单元格即使内容太大也保持固定大小，并且如果该内容需要滚动条，则它会稍微复杂一些。这是在单元格中使用 div 的解决方案：

HTML：

```
<table border=2 >
<tr>
    <td>AAA</td>
    <td><div class=scr>AAA</div></td>
    <td><div class=scr>AAABAAAAACAAAA</div></td>
</tr> 
```

CSS：

```
td {
    width:80px;
}
div.scr {
    margin:0;
    padding:0;
    width:80px;
    overflow-x: auto;    
} 
```

演示：http: [//jsfiddle.net/dystroy/sQZD7/](http://jsfiddle.net/dystroy/sQZD7/)

# java - 在sql中查找最常用的单词

> ID：11344251
> 
> 赞同：0
> 
> 时间：2012-07-05T12:22:09.420
> 
> 标签：java, sql

我有一个新问题。我有一个数据库，其中有一列包含各种各样的文本，有什么方法可以让 SQL 告诉我这些字段中最常用的 10 个单词是什么？举个例子：

1 我今天回家有点晚了。
2 火车晚点。
3 今天的火车时刻表是怎样的？
4 雪现在真的很糟糕。

最佳输出是：

是：3 晚：2 火车：2 今天：2

如果无法使用 SQL 来完成，您还建议我查看哪些信息来获取此信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:26:07.500

这在 SQL 中可能在技术上是可行的，但是当您的数据库中有更多行时，它会很痛苦并且非常缓慢。

您描述的问题是索引引擎的完美用例，例如[Lucene](http://lucene.apache.org/)（我以这个为例，因为您的问题在被编辑之前首先包含标签“java”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:26:35.910

一种选择是使用表值拆分函数，将每个单词作为一行返回；数一数；按数量降序排列它们

# sandcastle - 我怎样才能得到 标签使用 C# 关键字而不是 VB 关键字？

> ID：11344260
> 
> 赞同：8
> 
> 时间：2012-07-05T12:23:04.217
> 
> 标签：sandcastle, code-documentation

我正在使用 XML 和*Sandcastle Help File Builder*记录 C# 代码以生成*HtmlHelp1*帮助文件。我已将`SyntaxFilters`Sandcastle 项目的属性设置为，`CSharp`因为我只想生成与 C# 相关的代码语法。

我正在使用`<see langword="[langword]" />`，例如以下内容：

```
<see langword="null" />
<see langword="true" />
<see langword="false" /> 
```

由于我已将`SyntaxFilters`属性设置为，因此`CSharp`我期望将上述标签转换为等效的 C# 关键字，如下所示：

```
null
true
false 
```

相反，它们被转换为 Visual Basic 的等效关键字，如下所示：

```
Nothing
True
False 
```

有没有办法将这些标签替换为适当的 C# 关键字而不是 Visual Basic 关键字，或者我根本不应该使用 see 标签？

# php - 在 Symfony 中禁用字段未在请求中发送

> ID：11344261
> 
> 赞同：1
> 
> 时间：2012-07-05T12:23:06.417
> 
> 标签：php, symfony1, symfony-forms

在 Symfony 1.4 中，如果我提交表单时表单包含禁用字段，则禁用字段不会在表单字段中发送

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:32:00.687

这可能不是 symfony 问题，而是正常的 HTML 行为：

> 如果提交表单，甚至不会发送禁用字段。 [http://www.htmlcodetutorial.com/forms/_INPUT_DISABLED.html](http://www.htmlcodetutorial.com/forms/_INPUT_DISABLED.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T03:09:13.217

不，它实际上并没有“提交”，建议使用对象（实例化表单的参数）来设置其默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T15:21:17.300

这是一种 HTML 行为。如果您不想显示某些字段，只需将它们隐藏即可

# python - 从字符串中提取多个子字符串的方法？

> ID：11344262
> 
> 赞同：0
> 
> 时间：2012-07-05T12:23:06.920
> 
> 标签：python, regex

我有一个变量说`q`

```
q="today(Thursday)^05^*07*[2012]" 
```

有没有办法分别提取`Thursday`, `05`, `07`, `2012`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:24:34.877

尝试

```
q = "today(Thursday)^05^*07*[2012]"
import re
print re.findall(r'\w+', q) # ['today', 'Thursday', '05', '07', '2012'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:49:00.503

另一种选择（虽然我更喜欢[@thg435 解决方案](https://stackoverflow.com/a/11344285/463065)）：

```
r=re.split('[\^*()[\]]', q) #['today', 'Thursday', '', '05', '', '07', '', '2012', ''] 
```

然后

```
r[1::2] 
```

产量

```
['Thursday', '05', '07', '2012'] 
```

*旁白*：有谁知道为什么我得到交错的空字符串？很容易解决，但最好一开始就没有它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:26:57.023

使用这个正则表达式：

```
(?<=\()(.+)(?=\))|(?<=\^)(.+)(?=\^)|(?<=\*)(.+)(?=\*)|(?<=\[)(.+)(?=\]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T12:28:07.377

使用字符串分隔符。

`string.split[^*]`等等

# delphi - Delphi - 检测 Int64 溢出错误

> ID：11344263
> 
> 赞同：3
> 
> 时间：2012-07-05T12:23:09.093
> 
> 标签：delphi, delphi-7

在 Delphi 中，如何检测溢出错误`Int64`？

对于整数，我们可以这样做：

```
type
MyInt = Integer; //Int64

function TryMaxTimes10(out Res: MyInt): boolean;
var
  a, b: MyInt;
begin
  {$Q+}
  try
    a := High(MyInt);
    b := 10;
    Res := a * b; //REF1
    Result := True; 
  except
    Result := False;
  end;
  {$Q-}
end; 
```

对于`MyInt = Integer`， REF1 行给出了一个异常，因此`TryMaxTimes10`返回`false`。

但是如果我们将 MyInt 更改为`MyInt = Int64`REF1 则不会给出异常并`TryMaxTimes10`返回`true`！

据我所知，帮助`{$Q+}`没有特别提到`Int64`：`{$Q+} state, certain integer arithmetic operations ... are checked for overflow`...。

问题：所以我的问题是，我们如何检测 Int64 的溢出错误？

（我使用的是 Delphi 7。在较新版本的 Delphi 中也会发生同样的事情吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:40:10.177

这是一个已知的问题。请参阅[http://qc.embarcadero.com/wc/qcmain.aspx?d=10185](http://qc.embarcadero.com/wc/qcmain.aspx?d=10185)以及 Andy 在底部写的评论。

我的建议是创建一个函数（我没有编译或测试这个 - 只是一个例子）：

```
function Foo(A, B : Int64) : Int64;
var bNeg : boolean;
begin
  // Do we expect a negative result?
  bNeg := ((a < 0) xor (b < 0));
  // Get the real result
  Result := a * b;
  // If the result is wrong, raise an error
  if ((Result < 0) xor bNeg) then begin
    // Raise EOverFlow
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-24T09:48:48.540

此错误已在 RAD Studio 10.2 Tokyo 中修复。该问题可以在[这里](https://quality.embarcadero.com/browse/RSP-16617)找到（但必须使用 embarcadero 帐户登录才能看到它）。

这是 John O'Harrow 的 __llmulo 的正确版本（在 MPL 1.1 下获得许可）随 Delphi 10.2 及更高版本一起提供：

```
//  Param 1(edx:eax), Param 2([esp+8]:[esp+4])
//  Result is stored in edx:eax
//  O-flag set on exit   => result is invalid
//  O-flag clear on exit => result is valid
procedure __llmulo();
asm
  test    edx, edx           {Param1-Hi = 0?}
  jne     @@Large            {No, More than one multiply may be needed}
  cmp     edx, [esp+8]       {Param2-Hi = 0?}
  jne     @@Large            {No, More than one multiply may be needed}
  mul     dword ptr [esp+4]  {Only one multiply needed, Set Result}
  and     eax, eax           {Clear Overflow Flag}
  ret     8
@@Large:
  sub     esp, 28            {allocate local storage}
  mov     [esp], ebx         {save used registers}
  mov     [esp+4], esi
  mov     [esp+8], edi
  mov     [esp+12], ebp
  mov     ebx, [esp+32]      {Param2-Lo}
  mov     ecx, [esp+36]      {Param2-Hi}
  mov     esi, edx
  mov     edi, ecx
  sar     esi, 31
  sar     edi, 31
  xor     eax, esi
  xor     edx, esi
  sub     eax, esi
  sbb     edx, esi           {edx:eax (a1:a0) = abs(Param1)}
  xor     ebx, edi
  xor     ecx, edi
  sub     ebx, edi
  sbb     ecx, edi           {ecx:ebx (b1:b0) = abs(Param2)}
  xor     esi, edi           {Sign Flag, 0 if Params have same sign else -1}
  mov     [esp+16], eax      {a0}
  mov     [esp+20], edx      {a1}
  mov     [esp+24], ecx      {b1}
  mul     ebx                {edx:eax (c1:c0) = a0*b0}
  xchg    ebx, edx           {ebx = c1, edx = b0}
  mov     edi, eax           {abs(Result-Lo) = c0}
  xor     ecx, ecx           {Upper 32 bits of 128 bit result}
  xor     ebp, ebp           {Second 32 bits of 128 bit result}
  mov     eax, [esp+20]      {a1}
  mul     edx                {edx:eax (d1:d0) = a1*b0}
  add     ebx, eax           {c1 + d0}
  adc     ebp, edx           {d1 + carry}
  adc     ecx, 0             {Possible carry into Upper 32 bits}
  mov     eax, [esp+16]      {a0}
  mov     edx, [esp+24]      {b1}
  mul     edx                {edx:eax (e1:e0) = a0*b1}
  add     ebx, eax           {abs(Result-Hi) = c1 + d0 + e0}
  adc     ebp, edx           {d1 + e1 + carry}
  adc     ecx, 0             {Possible carry into Upper 32 bits}
  mov     eax, [esp+20]      {a1}
  mov     edx, [esp+24]      {b1}
  mul     edx                {edx:eax (f1:f0) = a1*b1}
  add     ebp, eax           {d1 + e1 + f0 + carry}
  adc     ecx, edx           {f1 + carry}
  or      ecx, ebp           {Overflow if ecx <> 0 or ebp <> 0}
  jnz     @@Overflow
  mov     edx, ebx           {Set abs(Result-Hi)}
  mov     eax, edi           {Set abs(Result-Lo)}
  cmp     edx, $80000000
  jae     @@CheckRange       {Possible Overflow if edx>=$80000000}
@@SetSign:
  xor     eax, esi           {Correct Sign of Result}
  xor     edx, esi
  sub     eax, esi
  sbb     edx, esi
  mov     ebx, [esp]         {restore used registers}
  mov     esi, [esp+4]
  mov     edi, [esp+8]
  mov     ebp, [esp+12]
  add     esp, 28            {Clears Overflow flag}
  ret     8
@@CheckRange:
  jne     @@Overflow         {Overflow if edx>$80000000}
  test    esi, esi           {edx=$80000000, Is Sign Flag=0?}
  jnz     @@SetSign          {No, Result is Ok (-MaxInt64)}
@@Overflow:
  mov     ebx, [esp]         {restore used registers}
  mov     esi, [esp+4]
  mov     edi, [esp+8]
  mov     ebp, [esp+12]
  add     esp, 28
  mov     ecx, $80000000
  dec     ecx                {Set Overflow Flag}
  ret     8
end; 
```

# javascript - jQuery 内容幻灯片（有效，但正在寻找更简单的解决方案）

> ID：11344265
> 
> 赞同：0
> 
> 时间：2012-07-05T12:23:23.173
> 
> 标签：javascript, jquery, html, css

下面的代码可以正常工作，但我想知道是否有更简化的代码可以用于所有这些 if 语句，也许调用单个函数？我试过了，但显然我需要根据按下的按钮跳过一个 if 语句。欢迎任何想法或评论。

```
<html>
<head>
<title>Slide_IN</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"
    type="text/javascript"></script>
<style type="text/css">
body{
    overflow:hidden;
}

#content_home {
    position: absolute;
    top: 0;
    right: -100%;
    width:80%;
    color:#96C;
    top:200px;
}

#content_about {
    position: absolute;
    top: 0;
    right: -100%;
    width:80%;
    color:#FF6633;
    top:200px;
}

#content_folio {
    position: absolute;
    top: 0;
    right: -100%;
    width:80%;
    color:#CC0000;
    top:200px;
}

#content_contact {
    position: absolute;
    top: 0;
    right: -100%;
    width:80%;
    color:#9C0;
    top:200px;
}
</style>
<script>

$(function(){
    $(".home").click(function() {
        if($('#content_about').css("left") == '10%'){
            $("#content_about").animate({'left':'-100%'}, "slow", function(){$('#content_about').removeAttr('style')});
        }
        if($('#content_folio').css("left") == '10%'){
            $("#content_folio").animate({'left':'-100%'}, "slow", function(){$('#content_folio').removeAttr('style')});
        }
        if($('#content_contact').css("left") == '10%'){
            $("#content_contact").animate({'left':'-100%'}, "slow", function(){$('#content_contact').removeAttr('style')});
        }

        $("#content_home").animate({'left':'10%'}, "slow");
    });

    $(".about").click(function() {
        if($('#content_home').css("left") == '10%'){
            $("#content_home").animate({'left':'-100%'}, "slow", function(){$('#content_home').removeAttr('style')});
        }
        if($('#content_folio').css("left") == '10%'){
            $("#content_folio").animate({'left':'-100%'}, "slow", function(){$('#content_folio').removeAttr('style')});
        }
        if($('#content_contact').css("left") == '10%'){
            $("#content_contact").animate({'left':'-100%'}, "slow", function(){$('#content_contact').removeAttr('style')});
        }

        $("#content_about").animate({'left':'10%'}, "slow");
    });

    $(".folio").click(function() {
        if($('#content_home').css("left") == '10%'){
            $("#content_home").animate({'left':'-100%'}, "slow", function(){$('#content_home').removeAttr('style')});
        }
        if($('#content_about').css("left") == '10%'){
            $("#content_about").animate({'left':'-100%'}, "slow", function(){$('#content_about').removeAttr('style')});
        }
        if($('#content_contact').css("left") == '10%'){
            $("#content_contact").animate({'left':'-100%'}, "slow", function(){$('#content_contact').removeAttr('style')});
        }

        $("#content_folio").animate({'left':'10%'}, "slow");
    });

    $(".contact").click(function() {
        if($('#content_home').css("left") == '10%'){
            $("#content_home").animate({'left':'-100%'}, "slow", function(){$('#content_home').removeAttr('style')});
        }
        if($('#content_about').css("left") == '10%'){
            $("#content_about").animate({'left':'-100%'}, "slow", function(){$('#content_about').removeAttr('style')});
        }
        if($('#content_folio').css("left") == '10%'){
            $("#content_folio").animate({'left':'-100%'}, "slow", function(){$('#content_folio').removeAttr('style')});
        }
        if($('#content_contact').css("left") == '10%'){
            $("#content_contact").animate({'left':'-100%'}, "slow", function(){$('#content_contact').removeAttr('style')});
        }

        $("#content_contact").animate({'left':'10%'}, "slow");
    });
});

</script>
</head>

<body>
<a class="home" href="#index">Home</a><br>
<a class="about" href="#about">About</a><br>
<a class="folio" href="#folio">Portfolio</a><br>
<a class="contact" href="#contact">Contact</a>
<div style="" id="content_home"> HOME Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam lorem dui, consequat in malesuada et, varius rutrum nunc. Duis consequat, felis non convallis hendrerit, turpis enim mattis lacus, id bibendum arcu orci sit amet arcu. Sed lobortis, mi ac varius semper, lorem ante laoreet justo, vel mollis ante massa vitae lacus. Praesent quis ipsum libero. Donec in nulla ipsum. Nulla facilisi. Sed et nibh est, a suscipit urna. Nunc hendrerit dolor vel eros ultrices dapibus semper odio elementum. Vivamus et quam ut eros venenatis volutpat nec in velit. Proin sed nisl non nulla vulputate aliquam sit amet et ipsum.
</div>
<div style="" id="content_about"> ABOUT Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam lorem dui, consequat in malesuada et, varius rutrum nunc. Duis consequat, felis non convallis hendrerit, turpis enim mattis lacus, id bibendum arcu orci sit amet arcu. Sed lobortis, mi ac varius semper, lorem ante laoreet justo, vel mollis ante massa vitae lacus. Praesent quis ipsum libero. Donec in nulla ipsum. Nulla facilisi. Sed et nibh est, a suscipit urna. Nunc hendrerit dolor vel eros ultrices dapibus semper odio elementum. Vivamus et quam ut eros venenatis volutpat nec in velit. Proin sed nisl non nulla vulputate aliquam sit amet et ipsum.
</div>
<div style="" id="content_folio"> PORTFOLIO Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam lorem dui, consequat in malesuada et, varius rutrum nunc. Duis consequat, felis non convallis hendrerit, turpis enim mattis lacus, id bibendum arcu orci sit amet arcu. Sed lobortis, mi ac varius semper, lorem ante laoreet justo, vel mollis ante massa vitae lacus. Praesent quis ipsum libero. Donec in nulla ipsum. Nulla facilisi. Sed et nibh est, a suscipit urna. Nunc hendrerit dolor vel eros ultrices dapibus semper odio elementum. Vivamus et quam ut eros venenatis volutpat nec in velit. Proin sed nisl non nulla vulputate aliquam sit amet et ipsum.
</div>
<div style="" id="content_contact"> CONTACT Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam lorem dui, consequat in malesuada et, varius rutrum nunc. Duis consequat, felis non convallis hendrerit, turpis enim mattis lacus, id bibendum arcu orci sit amet arcu. Sed lobortis, mi ac varius semper, lorem ante laoreet justo, vel mollis ante massa vitae lacus. Praesent quis ipsum libero. Donec in nulla ipsum. Nulla facilisi. Sed et nibh est, a suscipit urna. Nunc hendrerit dolor vel eros ultrices dapibus semper odio elementum. Vivamus et quam ut eros venenatis volutpat nec in velit. Proin sed nisl non nulla vulputate aliquam sit amet et ipsum.
</div>
</body>
</html> 
```

工作 jsFiddle：http: [//jsfiddle.net/janey/LnDsE/](http://jsfiddle.net/janey/LnDsE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:27:35.797

而不是你的课程 .about,.contact,.folio

尝试作为单行功能开始

```
$(".about,.contact,.folio").click(){} 
```

如果您在 jsfiddle 演示工作中有相同的内容，请分享。

# javascript - 在一个 CSV 行 Javascript 中添加多个值

> ID：11344266
> 
> 赞同：0
> 
> 时间：2012-07-05T12:23:35.307
> 
> 标签：javascript, ajax, arrays

有没有办法做到这一点？我对javascript括号等不太擅长......

```
item: ($('input#title'+id).val(),$('input#qty'+id).val(),$('input#price'+id).val()), 
```

我尝试了上述方法，但它只给了我最后的值，

Firebug 给了我：

```
item_1  7
item_2  7
item_3  7
item_4  7
item_5  7 
```

我追求的是：

```
item_1  Burgers,3,12.50
item_2  Sandwiches,7,7.50
item_3  Fries,10,5.50
item_4  Drinks,10,2.50
item_5  Pancakes,12,7.50 
```

我想这样做是因为抓取该 csv 数组然后每行插入数据会更容易。

我基本上将数据插入到一个 mysql 表中，在那里我可以将其作为食品订单显示给客户。

在此先感谢强尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:42:53.730

假设您想要一个数组，请改用方括号。

```
item: [$('input#title'+id).val(),$('input#qty'+id).val(),$('input#price'+id).val()], 
```

这是一篇解释您最初问题的帖子： [Javascript“元组”表示法：它的意义何在？](https://stackoverflow.com/questions/9018295/javascript-tuple-notation-what-is-its-point)

# api - Magento REST API 在 PHP 中不起作用

> ID：11344273
> 
> 赞同：2
> 
> 时间：2012-07-05T12:23:44.450
> 
> 标签：api, rest, magento

每当我尝试通过 PHP 调用 Magento 的其余资源时，我都会得到一个`HTTP 500 Internal Server Error`. 根据 Magento 的 REST API，我的链接是[http://mymagento.com/api/rest/products](http://mymagento.com/api/rest/products)。

一切都已正确设置，每当我尝试通过浏览器访问它时，响应都是一个包含我想要的 XML 数据的页面。Firefox 的 RESTClient 插件也是如此。

每当我尝试以客户身份执行授权请求时，我也会收到内部服务器错误。

有谁知道为什么会这样？大约一个小时前，我的想法用完了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T04:07:51.653

如果您只是（仅）遇到了这个问题，

**HTTP 周期中的 500 个错误**

任何客户端（例如您的 Web 浏览器或我们的 CheckUpDown 机器人）在与 Web 服务器通信时都会经历以下循环：

*   从站点的 IP 名称（不带前导“http://”的站点 URL）获取 IP 地址。此查找（IP 名称到 IP 地址的转换）由域名服务器 (DNS) 提供。
*   打开到该 IP 地址的 IP 套接字连接。
*   通过该套接字写入 HTTP 数据流。
*   接收来自 Web 服务器的 HTTP 数据流作为响应。此数据流包含状态代码，其值由 HTTP 协议确定。解析此数据流以获取状态代码和其他有用信息。

当客户端收到它识别为“500”的 HTTP 状态代码时，会在上述最后一步中发生此错误。（最后更新：2012 年 3 月）。

**修复 500 错误 - 常规**

此错误只能通过修复 Web 服务器软件来解决。这不是客户端问题。由 Web 服务器站点的操作员来定位和分析日志，这些日志应提供有关错误的更多信息。

# android - 从语音输入拨打电话的android代码

> ID：11344288
> 
> 赞同：0
> 
> 时间：2012-07-05T12:24:59.240
> 
> 标签：android

谁能帮我设置一个语音拨号器，它将检测用户的声音，如果用户正在说一个号码，那么应该自动拨打该号码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:39:20.433

我会在评论中发布这个，但我没有足够高的声誉。我也不知道你有多少背景资料；我的帖子可能根本没有帮助。

您是否实现了识别器意图？

*   [http://developer.android.com/reference/android/speech/RecognizerIntent.html](http://developer.android.com/reference/android/speech/RecognizerIntent.html)

如果没有，以下看起来可以帮助您入门

*   [http://www.jameselsey.co.uk/blogs/techblog/android-how-to-implement-voice-recognition-a-nice-easy-tutorial](http://www.jameselsey.co.uk/blogs/techblog/android-how-to-implement-voice-recognition-a-nice-easy-tutorial)

从我的简单观点来看，您可以从中获取数据并从中解析数字。不过，我很想听听对此有更多经验的人的意见。

# c# - 在 XML 解析中获取值

> ID：11344289
> 
> 赞同：0
> 
> 时间：2012-07-05T12:25:01.603
> 
> 标签：c#, windows-phone-7.1

我正在解析一个 XML 文件，我想将解析后的值插入到数据库中，我解析了一组值并放在变量“数据”中。现在我想从变量中选择每个值。任何人都可以帮助我，我是新手吗？

编码

```
 XDocument xdoc = XDocument.Parse(e.Result);
  var data = from query in xdoc.Descendants("returnData")
                   select new fieldvalue
                   {
                       Authenticated = (String)query.Element("authenticated"),
                       Repphoto = (String)query.Element("rep_photo"),
                       Repuname = (String)query.Element("rep_uname"),
                       Repemail = (String)query.Element("rep_email"),
                       Repphone = (String)query.Element("rep_phone"),
                       Repwebsite = (String)query.Element("rep_website"),
                       Userimgsize = (String)query.Element("user_img_size"),
                       Usersigsize = (String)query.Element("user_sig_size")
                     }; 
```

类文件

```
public class fieldvalue
{
    String authenticated, rep_photo, rep_uname, rep_email, rep_phone, rep_website, user_img_size, user_sig_size;
  public String Authenticated
    {
        get { return authenticated; }
        set { authenticated = value; }
    }
    public String Repphoto
    {
        get { return rep_photo; }
        set { rep_photo = value; }
    }
    public String Repuname
    {
        get { return rep_uname; }
        set { rep_uname = value; }
    }
    public String Repemail
    {
        get { return rep_email; }
        set { rep_email = value; }
    }
    public String Repphone
    {
        get { return rep_phone; }
        set { rep_phone = value; }
    }
    public String Repwebsite
    {
        get { return rep_website; }
        set { rep_website = value; }
    }
    public String Userimgsize
    {
        get { return user_img_size; }
        set { user_img_size = value; }
    }
    public String Usersigsize
    {
        get { return user_sig_size; }
        set { user_sig_size = value; }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:35:05.723

> 现在我想从变量中选择每个值。

将`IEnumerable<fieldvalue>`结果转换为 `ToList<>`并使用*索引*来访问每个元素。

```
var data = (from query in xdoc.Descendants("returnData")
                   select new fieldvalue
                   {
                       Authenticated = (String)query.Element("authenticated"),
                       Repphoto = (String)query.Element("rep_photo"),
                       Repuname = (String)query.Element("rep_uname"),
                       Repemail = (String)query.Element("rep_email"),
                       Repphone = (String)query.Element("rep_phone"),
                       Repwebsite = (String)query.Element("rep_website"),
                       Userimgsize = (String)query.Element("user_img_size"),
                       Usersigsize = (String)query.Element("user_sig_size")
                     }).ToList(); 
```

就像是：

```
var name=data[0].Repuname; 
```

# iphone - 如何在 iOS 中的图表中显示小图像

> ID：11344291
> 
> 赞同：0
> 
> 时间：2012-07-05T12:25:06.577
> 
> 标签：iphone, ios, image, uiview

我创建了 myView，它是 myView 的子类`UIView`并在 myView 上画了一个圆圈。现在我想在圆圈内显示小图像，而不是在圆圈外。但我进入了圈内和圈外，这意味着图像显示在整个 myVIew 上。

我得到了如下图所示

![在此处输入图像描述](../Images/f2c386ad43f6d88cf4552eb173a7c8b6.png)

但我想得到如下

![在此处输入图像描述](../Images/d2a28d909c2d99633384968a140d6180.png)

有没有可能？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:29:56.740

假设椭圆是`UIBezierPath`，您可以使用：

```
UIImage *patternImage = [UIImage imageNamed:@"thePattern.png"];
UIColor *fillPattern = [UIColor colorWithPatternImage:patternImage];
[fillPattern setFill]; 
[thePath fill]; 
```

**编辑**

`CGContextAddEllipseInRect`使用图案图像创建的填充椭圆：

```
- (void)drawRect:(CGRect)rect {

    CGImageRef patternImage = [UIImage imageNamed:@"file"].CGImage;
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextAddEllipseInRect(context, CGRectMake(100, 100, 200, 200));
    CGContextClip(context);
    CGContextDrawTiledImage(context, CGRectMake(20, 20, 48, 36),patternImage);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:32:28.193

你可以试试这个：

`#import <QuartzCore/QuartzCore.h>`

并在您的代码中，制作圆圈后，添加图像并设置这些： `myImageView.layer.cornerRadius = x;`

`myImageView.layer.masksToBounds = TRUE;`

这使您可以在图像上使用圆角。如果你计算半径以匹配你的圆，你应该得到想要的外观。

希望这可以帮助。

干杯，

乔治

# r - R中具有对数轴的散点图矩阵

> ID：11344292
> 
> 赞同：8
> 
> 时间：2012-07-05T12:25:14.560
> 
> 标签：r, ggplot2

我正在尝试从我的数据集中创建一个散点图矩阵，以便在生成的矩阵中：

*   我有两个不同的组基于
    *   一年中的季度（以点的颜色区分）
    *   日类型（点的形状表示，是周末还是周一和周五之间的休闲日）
*   对数刻度的 x 和 y 轴。
*   坐标轴刻度标签上的值不是对数，即坐标轴上的值应显示为 0 到 350 之间的整数，而不是对应的 log10。
*   上面板具有每个季度的相关值。

到目前为止，我已经尝试过使用函数：

1.  对（）
2.  ggpairs() [来自 GGally 包]
3.  散点图矩阵（）
4.  斯洛文（）

但是我无法使用这些软件包获得不错的结果，而且每次似乎缺少我的一个或多个要求。

*   使用pairs()，我可以创建散点图矩阵，但是参数*log="xy"*以某种方式从结果矩阵的对角线上删除了变量名称。
*   [ggpairs() 不直接支持对数刻度，但我创建了一个函数，该函数根据这个](https://stackoverflow.com/questions/6598174/what-package-is-to-be-installed-in-r-for-scatter-plots-with-logarithmic-binning)答案穿过散点图矩阵的对角线和下平面。虽然对数缩放适用于较低的平面，但它会混淆变量标签和值刻度。

函数的创建和使用如下：

```
ggpairs_logarithmize <- function(a) { # parameter a is a ggpairs sp-matrix
        max_limit <- sqrt(length(a$plots))
        for(row in 1:max_limit) { # index 1 is used to go through the diagonal also
                for(col in j:max_limit) {
                        subsp <- getPlot(a,row,col)
                        subspnew <- subsp + scale_y_log10() + scale_x_log10()
                        subspnew$type <- 'logcontinous'
                        subspnew$subType <- 'logpoints'
                        a <- putPlot(a,subspnew,row,col)
                }
        }
        return(a)
}
scatplot <- ggpairs(...)
scatplot_log10 <- ggpairs_logarithmize(scatplot)
scatplot_log10 
```

*   scatterplotMatrix() 似乎不支持两个分组。不过，我可以针对季节和日期类型分别执行此操作，但我需要将两组都放在同一个情节中。
*   splom() 以某种方式也将轴刻度值标记为对数值，并且这些值应保持原样（在整数 0 和 350 之间）。

是否有任何简单的解决方案可以根据我的要求创建具有对数轴的散点图矩阵？

**编辑（13.7.2012）：**询问示例数据和输出。下面是一些用于生成演示数据集的代码片段：

*声明必要的功能*

```
logarithmize <- function(a)
{
        max_limit <- sqrt(length(a$plots))
        for(j in 1:max_limit) {
                for(i in j:max_limit) {
                        subsp <- getPlot(a,i,j)
                        subspnew <- subsp + scale_y_log10() + scale_x_log10()
                        subspnew$type <- 'logcontinous'
                        subspnew$subType <- 'logpoints'
                        a <- putPlot(a,subspnew,i,j)
                }
        }
        return(a)
}

add_quarters <- function(a,datecol,targetcol) {
    for(i in 1:nrow(a)) {
        month <- 1+as.POSIXlt(as.Date(a[i,datecol]))$mon
        if ( month <= 3 ) { a[i,targetcol] <- "Q1" }
        else if (month <= 6 && month > 3) { a[i,targetcol] <- "Q2" }
        else if ( month <= 9 && month > 6 ) { a[i,targetcol] <- "Q3" }
        else if ( month > 9 ) { a[i,targetcol] <- "Q4" }
    }
    return(a)
} 
```

*创建数据集：*

```
days <- seq.Date(as.Date("2010-01-01"),as.Date("2012-06-06"),"day")
bananas <- sample(1:350,length(days), replace=T)
apples <- sample(1:350,length(days), replace=T)
oranges <- sample(1:350,length(days), replace=T)
weekdays <- c("Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday")
fruitsales <- data.frame(Date=days,Dayofweek=rep(weekdays,length.out=length(days)),Bananas=bananas,Apples=apples,Oranges=oranges)
fruitsales[5:6,"Quarter"] <- NA
fruitsales[6:7,"Daytype"] <- NA
fruitsales$Daytype <- fruitsales$Dayofweek
levels(fruitsales$Daytype) # Confirm the day type levels before assigning new levels
levels(fruitsales$Daytype) <- c("Casual","Casual","Weekend","Weekend","Casual","Casual","Casual
")
fruitsales <- add_quarters(fruitsales,1,6) 
```

*执行（注意！Windows/Mac 用户，根据您拥有的操作系​​统更改 x11()）*

```
# install.packages("GGally")
require(GGally)
x11(); ggpairs(fruitsales,columns=3:5,colour="Quarter",shape="Daytype")
x11(); logarithmize(ggpairs(fruitsales,columns=3:5,colour="Quarter",shape="Daytype")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T16:02:41.173

问题`pairs`源于在日志坐标系中使用用户坐标。具体来说，当在对角线上添加标签时，`pairs`设置

```
par(usr = c(0, 1, 0, 1)) 
```

但是，如果您通过 指定对数坐标系`log = "xy"`，您需要的是

```
par(usr = c(0, 1, 0, 1), xlog = FALSE, ylog = FALSE) 
```

请参阅[R 帮助上的这篇文章](http://tolstoy.newcastle.edu.au/R/e4/help/08/03/6405.html)。

这提出了以下解决方案（使用有问题的数据）：

```
## adapted from panel.cor in ?pairs
panel.cor <- function(x, y, digits=2, cex.cor, quarter, ...)
{
  usr <- par("usr"); on.exit(par(usr))
  par(usr = c(0, 1, 0, 1), xlog = FALSE, ylog = FALSE)
  r <- rev(tapply(seq_along(quarter), quarter, function(id) cor(x[id], y[id])))
  txt <- format(c(0.123456789, r), digits=digits)[-1]
  txt <- paste(names(txt), txt)
  if(missing(cex.cor)) cex.cor <- 0.8/strwidth(txt)
  text(0.5, c(0.2, 0.4, 0.6, 0.8), txt)
}

pairs(fruitsales[,3:5], log = "xy", 
      diag.panel = function(x, ...) par(xlog = FALSE, ylog = FALSE),
      label.pos = 0.5,
      col = unclass(factor(fruitsales[,6])), 
      pch = unclass(fruitsales[,7]), upper.panel = panel.cor, 
      quarter = factor(fruitsales[,6])) 
```

这会产生以下情节

![对数坐标系上的绘图](../Images/a5cff01778588d752957814a371ae90e.png)

# html - 又一个定位之谜

> ID：11344293
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:25:19.740
> 
> 标签：html, css

我想要一个带有方形图像的两列项目列表和旁边的两行文本，很好地对齐

```
_________                                    ________
|       |                             |     |        |
|       |     Line one h3 tag         |     |        |     Line one h3 tag
|       |     Line two p tag          |     |        |     Line two p tag
|       |                             |     |        |
_________                             |     __________ 
```

这是我的代码：http: [//jsfiddle.net/PEMKs/3/](http://jsfiddle.net/PEMKs/3/)

**HTML：**

```
<div class="wrapper">    
    <div class="right clearfix">
        <img src="http://placehold.it/100x100" >
        <h4>My name is Markup.</h4><p>I live in Vienna</p>
    </div>
    <div class="left ">
        <img src="http://placehold.it/100x100" >
        <h4>My name is Markup.</h4> <p>I live in Vienna</p>
    </div>
</div>​ 
```

**CSS：**

```
.wrapper{
    width:650px
}

.right{
    width:300px; 
    height:100px; 
    position:relative;
    float:right;
}

.right h4, .right p{
    float:right;
    margin-right:25px;
    font-family:sans-serif;
}

.left{
    width:300px;
    height:100px;
    position:relative;
    margin-right:145px;
    border-right:1px dashed #cccccc;
}

.left h4, .left p{
float:right;
    margin-right:25px;
        font-family:sans-serif;
}

.clearfix:after {
   content: ".";
   visibility: hidden;
   display: block;
   height: 0;
   clear: both;
}

p{
 display:inline-block;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:29:25.717

这对你来说怎么样？

[http://jsfiddle.net/42XUW/](http://jsfiddle.net/42XUW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:49:05.710

```
<div class="wrapper">    
    <div class="right clearfix">
        <img src="http://placehold.it/100x100" style="float:left;" >
        <h4>My name is Markup.</h4><p>I live in Vienna</p>
    </div>
    <div class="left ">
        <img src="http://placehold.it/100x100" style="float:left;" >
        <h4>My name is Markup.</h4> <p>I live in Vienna</p>
    </div>
</div>​ 
```

图像的样式将设置为 float:left。它解决了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:33:46.383

您可以为图像添加 CSS 样式

```
.left img { float: right;} 
```

# iphone - 使用 iphone 中的单个音频播放器实例在不同视图中播放多个音频文件，

> ID：11344296
> 
> 赞同：1
> 
> 时间：2012-07-05T12:25:27.733
> 
> 标签：iphone

我是音频播放的新手，我遇到了一个关于音频播放的问题。问题是播放多个音频文件，并从其他视图控制当前正在播放的音频文件。

我的要求是。在我的应用程序中，我在不同的视图中有 4 个音频文件。在某些视图中单击音频播放按钮后，必须开始播放音频并暂停和停止，并且必须显示滑块按钮，即使我导航到下一个视图，音频也必须继续（我应该能够控制当前播放的音频），如果我按下导航视图的音频，则必须停止上一个音频，必须播放导航页面音频。完成导航页面音频后，必须播放上一页的恢复音频。

```
As of my knowledge, I have take single audio instance in AppDelegate. I am referring  that Audioplayer instance in all view's , Where ever i need. It is not working.(some times giving error , some times unable to stop the Previous Audio playing). 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:37:10.387

如果我没记错的话，你已经在 appdelegate 中定义了音频播放器，对吧？

你用的是哪个类，avplayer、avaudioplayer 或 mpplayer？

顺便说一句，如果我们来回答我的问题，

我已经将 avplayer 和 avaudioplayer 用于此类业务，并且没有问题，您是否检查过在每个视图中初始化您的 appdelegate 实例？如果不是，请检查这个和

同样在您的 plist 文件中，您应该声明该应用程序将在后台播放音频以获得对此的支持。

希望这个答案会有所帮助！:)

# java - 在不使用 FFMPEG 的情况下减小 android 中的视频大小

> ID：11344298
> 
> 赞同：2
> 
> 时间：2012-07-05T12:25:40.707
> 
> 标签：java, android, ffmpeg

在我的 Android 应用程序中，我需要减小视频大小，然后将其发送到服务器。有没有比使用 FFMPEG 更快的方法。

谢谢。

# mysql - 使用 GROUP BY 需要 Mysql 查询帮助？

> ID：11344302
> 
> 赞同：3
> 
> 时间：2012-07-05T12:25:59.270
> 
> 标签：mysql, sql, database, group-by

我有一个有 2 列的表，以下是我的表结构

**推荐人ID | 地位**

```
531 | 0
531 | 0
531 | 3
530 | 3
529 | 3
528 | 3
527 | 3
527 | 0
527 | 0
523 | 2
523 | 0
523 | 3
522 | 3
522 | 3
522 | 3
522 | 3
511 | 3 
```

我的预期输出是

**推荐人ID | 地位**

```
530 | 3
529 | 3
528 | 3
522 | 3
511 | 3 
```

第一列referral_id 可以有多个具有相同id 的元组（参见referral_id 的531 和527）。如果所有相应的“状态”都不是 3，我需要确保消除具有相同推荐 ID 的元组。如果所有相应的“状态”都是 3，那么我需要应用 GROUP BY 来获得该推荐 ID（S）结果. “状态”列的值可以从 1 到 4，但我只需要寻找 3。那么我怎样才能达到这个结果呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T12:32:05.517

关于什么 ...

```
select referral_id, max(status)
from tablename
group by referral_id
having max(status) = 3 and max(status) = min(status) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T12:30:05.153

您不需要`group by`，只需这样做：

```
select distinct t.referral_id
from tablename t
where t.referral_id not in (
                            select referral_id
                            from tablename
                            where status <> 3
                           )
order by t.referral_id desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:31:54.293

你应该使用一个`NOT EXISTS`

```
Select referral_id,  status
FROM yourtable a
WHERE NOT EXISTS (
  select 1 
  from yourtable b 
  where b.referral_id = a.referral_id 
  and b.status != 3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T12:34:42.770

从这个开始

```
select referral_id from table
group by referral_id 
having (min(status)=3 and max(status)=3 and count(status)=3) or (count(status)<3) 
```

# xml - 我们可以在 Blackberry 中使用 Simple 2.6.4（XML 序列化）吗

> ID：11344304
> 
> 赞同：1
> 
> 时间：2012-07-05T12:26:12.613
> 
> 标签：xml, blackberry

我正在尝试在黑莓中使用简单的 2.6.4。但它不识别简单的罐子。这该怎么做 ？有人在黑莓中尝试过吗？在普通的java项目中它工作正常。

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:24:50.397

查看随机选择的源文件 ( [VisitorStrategy](http://simple.sourceforge.net/download/stream/report/cobertura/org.simpleframework.xml.strategy.VisitorStrategy.html) )，看起来 Simple 是一个使用泛型的 Java-SE 项目。BlackBerry 设备运行 Java-ME，它实际上是 Java 1.3，因此无法使用您找到的任何现代 Java 库。

# ef-code-first - MVC3 中的数据迁移（使用 EF.4.3）

> ID：11344309
> 
> 赞同：2
> 
> 时间：2012-07-05T12:26:26.207
> 
> 标签：ef-code-first, entity-framework-4.3, entity-framework-migrations

我正在为我的项目进行数据迁移。但我有一个问题，例如：我有以下字段的 Book 表：

```
ID  Name   Color

1   Java    red

2   MVC     blue

3   .Net    blue 
```

我尝试使用 Code First 技术将字段名称从“Color”更改为“BookColor”。但迁移后，表格如下所示：

```
ID  Name   BookColor

1   Java    null

2   MVC     null

3   .Net    null 
```

我丢失了我的字段值。我怎样才能确保所有的价值都被转移了？

我正在使用带有 MVC3 的实体框架

**编辑**这是我的 DBMigration 类：

```
public partial class AddCreative : DbMigration
{

    public override void Up()
    {
        AddColumn("Authors", "Names", c => c.String(maxLength: 4000));
        DropColumn("Authors", "Name");
    }

    public override void Down()
    {
        AddColumn("Authors", "Name", c => c.String(maxLength: 4000));
        DropColumn("Authors", "Names");
    }
} 
```

更改后我已更改`Name`为`Names` （我在名称字段中丢失了数据）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T14:27:08.417

我使用以下内容没有问题：

首先，设置迁移：

```
PM> Enable-Migrations
PM> Add-Migration RenameBookColorColumn 
```

然后我们设置迁移类来执行重命名：

```
public class RenameBookColorColumn : DbMigration
{
    public override void Up()
    {
        this.RenameColumn("Books", "Color", "BookColor");
    }
    public override void Down()
    {
        this.RenameColumn("Books", "BookColor", "Color");
    }
} 
```

接下来，调用 ，`Update-Database`以便我们可以执行更改：

```
PM> Update-Database -Verbose
Using NuGet project 'Example'.
Using StartUp project 'ExampleTest'.
Target database is: 'ExampleContext' (DataSource: .\SQLEXPRESS, Provider: System.Data.SqlClient, Origin: Convention).
Applying explicit migrations: [201207051400010_RenameBookColorColumn].
Applying explicit migration: 201207051400010_RenameBookColorColumn.
EXECUTE sp_rename @objname = N'Books.Color', @newname = N'BookColor',
@objtype = N'COLUMN' [Inserting migration history record] 
```

瞧，它被重命名并保留了数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:42:07.827

You can work around the limitation by using the following code.

```
public partial class AddCreative : DbMigration
{
    public override void Up()
    {
        AddColumn("Authors", "Names", c => c.String(maxLength: 4000));
        Sql("UPDATE [Authors] SET [Names] = [Name]");
        DropColumn("Authors", "Name");
    }

    public override void Down()
    {
        AddColumn("Authors", "Name", c => c.String(maxLength: 4000));
        Sql("UPDATE [Authors] SET [Name] = [Names]");
        DropColumn("Authors", "Names");
    }
} 
```

# iphone - 拖动和匹配对象

> ID：11344312
> 
> 赞同：1
> 
> 时间：2012-07-05T12:26:44.393
> 
> 标签：iphone, drag-and-drop, elasticity

我想做一个游戏，它需要拖动一个对象（`UIView`类对象）并与另一个对象（`UIButton`）相交，同时生成一个事件，并检查对象的匹配是对还是错。

如果错误，物体会回到原来的位置。

我对物体所做的触摸和拖动，但物体位置的弹性不能正常工作？任何示例或帮助请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:21:22.193

如果您使用标准（非 GL）编程，则可以使用对象的框架来检查对象是否相交。有人呼吁。您可以获取一个对象的相关点并检查它们是否在另一个对象的多边形内。如果他们是，那么你有一个碰撞。Quartz 2D 绘图工具为这些类型的对象提供了许多相交方法。

# c# - Lambda 表达式/委托分配变量

> ID：11344313
> 
> 赞同：0
> 
> 时间：2012-07-05T12:26:45.510
> 
> 标签：c#, .net, lambda

实际上，我什至不能确切地说出那个东西是如何正确调用的，但我需要一些可以在一种方法中分配变量/属性/字段的东西。我将尝试解释...我有以下代码：

```
txtBox.Text = SectionKeyName1; //this is string property of control or of any other type
if (!string.IsNullOrEmpty(SectionKeyName1))
{
    string translation = Translator.Translate(SectionKeyName1);
    if (!string.IsNullOrEmpty(translation))
    {
        txtBox.Text = translation;
    }
}

stringField = SectionKeyName2; //this is class scope string field
if (!string.IsNullOrEmpty(SectionKeyName2))
{
    string translation = Translator.Translate(SectionKeyName2);
    if (!string.IsNullOrEmpty(translation))
    {
        stringField = translation;
    }
}

stringVariable = SectionKeyName3; //this is method scope string variable
if (!string.IsNullOrEmpty(SectionKeyName3))
{
    string translation = Translator.Translate(SectionKeyName3);
    if (!string.IsNullOrEmpty(translation))
    {
        stringVariable = translation;
    }
} 
```

如我所见，此代码可以重构为一种方法，该方法接收要设置的“对象”和 SectionKeyName。所以它可以是这样的：

```
public void Translate(ref target, string SectionKeyName)
{
    target = SectionKeyName;
    if (!string.IsNullOrEmpty(SectionKeyName))
    {
        string translation = Translator.Translate(SectionKeyName);
        if (!string.IsNullOrEmpty(translation))
        {
            target = translation;
        }
    }
} 
```

**但是：如果我想分配**[texBox.Text](https://stackoverflow.com/questions/1402803/passing-properties-by-reference-in-c-sharp)，我将无法使用该方法，因为属性不能通过引用传递.... 带有字段/变量....

请帮助我找到一种方法来编写一个可以处理我所有案例的方法......

```
//This method will work to by varFieldProp = Translate(SectionKeyName, SectionKeyName), but would like to see how to do it with Lambda Expressions.
public string Translate(string SectionKeyName, string DefaultValue)
{
    string res = DefaultValue; //this is string property of control or of any other type
    if (!string.IsNullOrEmpty(SectionKeyName))
    {
        string translation = Translator.Translate(SectionKeyName);
        if (!string.IsNullOrEmpty(translation))
        {
            res = translation;
        }
    }

    return res;
} 
```

谢谢 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:33:47.643

我想你想要这样的东西：

```
public void Translate(Action<string> assignToTarget, string SectionKeyName)
        {
            assignToTarget(SectionKeyName);
            if (!string.IsNullOrEmpty(SectionKeyName))
            {
                string translation = Translator.Translate(SectionKeyName);
                if (!string.IsNullOrEmpty(translation))
                {
                    assignToTarget(translation);
                }
            }
        } 
```

但如果您简单地删除 lambda 并让函数返回翻译后的字符串以在需要时使用会**更好。**为了完整起见，要调用此函数，您可以使用：

```
Translate(k=>textBox1.Text=k,sectionKeyName); 
```

# .htaccess - 将子域重定向到子文件夹

> ID：11344317
> 
> 赞同：0
> 
> 时间：2012-07-05T12:26:57.037
> 
> 标签：.htaccess, rewrite

我尝试将以下逻辑添加到 .htaccess 文件中：

subdomain.domain.xx 重定向到 subdomain.domain.xx/subdomain/ xy.domain.xy 重定向到 xy.domain.xy/xy/ （它应该适用于每个子域而无需添加新的重写）

我找到了很多重定向 subdomain.domain.xx -> domain.xx/subdomain 的解决方案，但没有什么像我需要的那样......在下面你可以找到我尝试的代码。

希望可以有人帮帮我。谢谢。

RewriteBase 上的 RewriteEngine /

重写规则 ^([^.?]+[^.?/])$ $1/ [R]

RewriteCond %{HTTP_HOST} ^(www)?.domain.ch/$ RewriteRule .* http\://%1$1.domain.ch/%1$1 [I,R=301]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:38:32.007

将其`.htaccess`放在子域根目录的文件中：

```
DirectoryIndex index.html
RewriteEngine on
Redirect permanent /index.html http://subdomain.domain.xx/subdomain/ 
```

# magento - Magento Checkout：商品缺货向客户收费，但没有订单/订单确认

> ID：11344318
> 
> 赞同：0
> 
> 时间：2012-07-05T12:26:58.697
> 
> 标签：magento, checkout, magento-1.6

我将 Magento 1.6 与开箱即用的一页结帐一起使用。在最终提交时，在客户查看了他们的订单后，似乎出现了一个故障：如果某件商品缺货，则会通知客户并且订单似乎没有通过（没有创建订单，也没有确认页）。但是，authorize.net 确实获得了完整的交易请求并向客户收费。似乎只有在商品缺货时才会发生。（客户可能会等待很长时间才点击提交按钮。）

我能做些什么？添加一个 java 脚本功能以在单击提交时检查库存？这是一个已知的错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:03:22.027

您的系统是否设置为允许延期交货？

系统 > 配置 > 目录 > 库存 > 延期交货“无延期交货”。

如果将其设置为不允许延期交货，我想知道为什么会显示“添加到购物车”按钮。

如果您使用的是自定义模板，我可能会从那里开始进行故障排除。切换回默认模板，看看这个问题是否仍然存在。

# silverlight - 为 Silverlight 网格行传递 QueryString 值

> ID：11344320
> 
> 赞同：1
> 
> 时间：2012-07-05T12:27:10.053
> 
> 标签：silverlight, binding, mvvm

如何在 Silverlight 中进行多值绑定？

我必须根据作为 Datacontext 的一部分存在的值和 QueryString 中的其他值来确定 Silverlight DataGrid 列的可见性。

我使用 silverlight 5 的 MVVM 模型，我目前的计划是在后面的代码中为查询字符串定义一个属性，该属性可以绑定到行可见性。但我的问题显然是为 IValueConverter 实现传递多个值。

谁能提供一个简单的例子来解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:33:08.017

Silverlight 中不支持开箱即用的多重绑定。

但是随着 Silverlight 5 中客户标记扩展的引入，这可以实现。代码项目有一个很好的例子：http: [//www.codeproject.com/Articles/286171/MultiBinding-in-Silverlight-5](http://www.codeproject.com/Articles/286171/MultiBinding-in-Silverlight-5)。

或者，在这个特定示例中，您可以在视图模型中使用公共布尔属性，该属性使用 QueryString 值以及您在 DataContext 中关注的其他值，并决定该列是否需要可见。然后，您可以将此属性数据绑定到列的**IsVisible**属性。（连同一个根据布尔属性值返回**Visbility.Visble** / **Visibility.Collapsed的值转换器）**

# c++ - c ++ 11 getline询问两次输入

> ID：11344322
> 
> 赞同：0
> 
> 时间：2012-07-05T12:27:18.443
> 
> 标签：c++, c++11, xcode4.3

在 xcode 4.3 中，我已将项目设置为使用 c++11：我将语音 c++ 语言方言更改为 c++11，并将 c++ 标准库更改为“libc++（支持 c++11 的 LLVM c++ 标准库）”。
然后我尝试编译并执行这个简单的代码：

```
#include <iostream>

using namespace std;

int main (int argc, char** argv) 
{
    char buffer[100];
    cin.getline(buffer,100);
    cout << buffer << endl;
    return 0;
} 
```

问题是它要求输入两次。例如，我输入“hello”，流仍然打开，等待另一个字符串。如果我输入另一个字符串，那么它会打印出“hello”。
如果我不使用 c++11，则不会出现此问题。
有谁知道如何解决这个问题？我想在不使用 std::string 的情况下输入最多 100 个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:57:53.320

这是 libc++ 中的一个错误。我很抱歉。它固定在山狮身上。您可以通过使用来解决它`getline(istream&, string&)`：

```
#include <iostream>
#include <string>

using namespace std;

int main (int argc, char** argv) 
{
    std::string buffer;
    getline(cin, buffer);
    cout << buffer << endl;
    return 0;
} 
```

# javascript - 验证日期是否早于当前日期的日期

> ID：11344324
> 
> 赞同：44
> 
> 时间：2012-07-05T12:27:28.487
> 
> 标签：javascript, date

使用这个功能，我得到了 7 天的差价；如何测试日期是否早于当前日期？

```
function validateDate() {
    pickedDate = Date.parse("05-Jul-2012".replace(/-/g, " "));
    todaysDate = new Date();
    todaysDate.setHours(0, 0, 0, 0);
    dateDifference = Math.abs(Number(todaysDate) - pickedDate);
    //7 Days=604800000ms
    if (dateDifference > 604800000) {
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-05T12:31:44.940

您可以直接将两个日期比较为

```
return pickedDate <= todaysDate 
```

对于考虑毫秒的确切日期比较，您可以使用 [getTime() 方法](https://www.w3schools.com/jsref/jsref_gettime.asp)

您可以像所做的那样解析日期：

```
pickedDatestr = "09-Apr-2010"
var pickedDate = new Date(Date.parse(pickedDatestr.replace(/-/g, " "))) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-11-30T14:08:16.400

对于日期比较（没有时间）：

```
function isDateBeforeToday(date) {
    return new Date(date.toDateString()) < new Date(new Date().toDateString());
}

isDateBeforeToday(new Date(2016, 11, 16)); 
```

测试用例：

```
// yesterday
isDateBeforeToday(new Date(2018, 12, 20)); // => true

// today
isDateBeforeToday(new Date(2018, 12, 21)); // => false

// tomorrow
isDateBeforeToday(new Date(2018, 12, 22)); // => false 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-02-13T20:19:47.563

我提出这个问题是因为我试图检查我从后端获得的 Java.util.Date 是否在今天之后。

最后我找到了一个非常简单的解决方案——通过比较毫秒，像这样：

```
 isAfterToday(date) {
    return new Date(date).valueOf() > new Date().valueOf();
  } 
```

该功能[在此处](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/valueOf)`valueOf()`记录。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T12:34:10.903

试试这个功能

```
function checkDate(day, month, year)
{
    var regd = new RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})\$");

    var date = month + "/" + day + "/" + year;
    var date = new Date(date);
    var today = new Date();

    var vdob = regd.test(date);

    var err_txt = "" ;

    if(date.getDate() != day || (date.getTime()>today.getTime()))
    {
            err_txt+=("Please select a valid Date.\n")
    }

    return (err_txt);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-18T00:39:44.697

```
new Date() > new Date('2022-01-24') 
```

就我而言，我不在乎时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-06T21:37:26.853

以下将检查日期是否在今天之前：

```
function isBeforeToday(){
  var today = new Date((new Date()).toString().substring(0,15));
  return date < today;
} 
```

这通过在从其相应的日期字符串中剥离所有时间信息后创建一个新的日期对象来工作：

`Tue Mar 06 2018 16:33:15 GMT-0500 (EST)`-> `Tue Mar 06 2018`->`Tue Mar 06 2018 00:00:00 GMT-0500 (EST)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-11T12:34:09.120

```
if(this.dateString1.getFullYear() <= this.dateString2.getFullYear() )//check the year
  { 
    // console.log("date1+date2"+this.dateString1.getFullYear()+this.dateString2.getFullYear())
    if(this.dateString1.getMonth() <= this.dateString2.getMonth())//check the month
      {
        // console.log("date1+date2"+this.dateString1.getMonth()+this.dateString2.getMonth())
        if(this.dateString1.getDate() < this.dateString2.getDate())//check the date
        this.toastr.error("Project Start Date cannot be Previous Date");
          return;
      }
  } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-06-23T17:16:19.050

您可以使用 '<, '>' 等直接比较 2 个日期。

```
function validateDate(date) {
    //get start of day using moment.js
    const now = Moment().startOf('day').toDate();
    if (date < now) {
        return false; //date is before today's date
    } else {
        return true; //date is today or some day forward
} 
```

# .net - 我应该选择 N 层架构而不是 MVC 吗？

> ID：11344326
> 
> 赞同：2
> 
> 时间：2012-07-05T12:27:32.427
> 
> 标签：.net, winforms, design-patterns, architecture

我必须开发一个应用程序（Winforms 应用程序），它连接到企业内联网中的数据库。

由于我想保持应用程序的可扩展性、可维护性和灵活性，我正在考虑应该使用哪种架构。在这方面，我偶然发现了 N-Tier 和 MVC 模式。

据我所知，这两种模式之间的主要区别在于 MVC 具有更三角形的结构（组件可以相互通信），而 3 层应用程序具有直接的结构，其中每个组件 (n) 只能将请求转发到分量 (n+1)。

所以我的想法是采用 3-Tier 方法。“ Presentation **Layer，Tier-1”**保存表单，**“Business Layer，Tier-2”**处理Tier-1和Tier-3之间的信息和逻辑，**“Data Layer，Tier-3”**连接到数据库并使用存储过程。

**我的问题是：**

这听起来像是一个合理的决定吗？因为我读到如果您计划在不同的机器上运行单个层，N-Tier 是有意义的，我不打算这样做。如果您认为我选择了错误的方法，还有什么更好的主意？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:23:40.267

MVC 和 n-tier 是两种不同层次的架构模式，涵盖不同的方面。它们可以同时使用。这不是一个或另一个。

MVC 更像是一种可以应用于表示层的软件架构，其中一个组件是 Windows 窗体。（Windows 窗体是否完全兼容 MVC 是一个单独的讨论。）

N 层架构是一种系统架构（比 MVC 架构更高级别）。决定基本上是您是否有两层（Windows Forms 客户端作为第一层，数据库作为存储过程作为第二层）或三层（Windows Forms 客户端作为第一层，应用程序服务器作为业务逻辑作为第二层，第三层的数据库作为第三层）。甚至更短：客户端会直接连接到数据库还是中间有应用服务器？

似乎给出了存储过程的使用。如果是这种情况，那么它们可能不仅提供数据查询和存储，还提供一些业务逻辑。在这种情况下，我倾向于使用两层。

其他可能相关的因素是：

*   身份验证：是否可以在数据库中设置所有用户？或者在应用程序服务器上执行此操作并使用单个用户访问数据库会更容易吗？是否需要某种单点登录？

*   授权：是否可以检查数据库中的所有权限？如果不是，那么创建安全应用程序需要三层吗？

*   网络架构是否有任何禁止直接访问数据库的限制？

*   您是否期望有数千个并发用户并希望通过设置多台服务器来扩大规模？

一般来说，我倾向于选择更少的层，因为它更容易实施并且成本更低（初始和维护期间）。额外层的成本需要通过依赖于额外层的要求来证明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T14:57:13.230

MVC 和任何其他与 MVC 相关的模式（例如 MVP、MVVM）都是与应用程序的 UI 层相关联的模式。（无论是 Winforms/Web/WPF 还是 UI 框架）。

基本上，这些 UI 模式从 UI 表示相关方面促进了 UI 逻辑的松散耦合。它们具有以下优势：

*   使用自动化单元测试工具使 UI 逻辑层单元可测试。（无需启动实际的 UI）
*   由于 UI 和 UI 逻辑组件之间的松散耦合，UI 逻辑类变得更加可重用。（即控制器和模型可以被多个视图使用）
*   还提供不常用的额外好处，例如能够通过序列化模型等来保存 UI 的状态。

**MVC 和 N-Tiered 架构不是两种相反的方法，您需要从中选择一种或另一种。**
根据您的要求，您可以混合和匹配它们以适应您的应用程序要求。

例如，您可以选择具有 UI、业务逻辑和数据访问层的整体 3 层解决方案。在此您可以选择以 MVC 样式实现您的 UI 层。

为了进一步澄清，您可以将业务逻辑层作为一组服务公开业务功能，同时与数据访问层进行通信以实现持久性。同时，您的 UI 层上的控制器可以访问这些业务层服务以获取业务功能并构建模型/视图模型以适应视图。
实现可能会有很大不同，这只是一个例子。

**基本上这两种模式可以相互补充，提供更好的解决方案。**

# android - 如何通过代码防止android上的自动屏幕锁定？

> ID：11344333
> 
> 赞同：26
> 
> 时间：2012-07-05T12:27:54.327
> 
> 标签：android, android-screen, android-screen-support

在我的应用程序中有一个很长的加载过程，如果设备锁定屏幕，我的过程会因某种原因停止。

如何防止设备自动锁屏？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-05T13:36:12.973

无需在清单中请求许可即可保持屏幕锁定的另一种方法是：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

您是否在 UI 线程中进行长时间的加载过程？有些事情似乎不对 - 如果进程太长以至于屏幕锁定超时并且您的进程结束，那么它可能需要进入后台服务。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-05T12:30:45.620

您必须在 AndroidManifest 上声明此使用权限：

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

在您的代码活动中：

```
PowerManager powerManager = (PowerManager)context.getSystemService(Context.POWER_SERVICE);
WakeLock wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, "My Lock");
wakeLock.acquire(); 
```

请记住，当您的应用程序暂停或销毁时，通过执行以下操作释放此锁：

```
wakeLock.release(); 
```

通常，建议在活动的**onResume()中调用****acquire**方法，在**onPause()中调用****release**方法。这样我们保证我们的应用程序在被暂停或恢复的情况下仍然表现良好。

 ******* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-11-27T09:05:56.387

**XML方式：**

只需`keepScreenOn`在父布局中使用属性：

```
<androidx.constraintlayout.widget.ConstraintLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:keepScreenOn="true"> 
```

**以编程方式：**

您可以通过添加标志以编程方式设置它：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-05T12:31:11.587

```
KeyguardManager keyguardManager = (KeyguardManager)getSystemService(Activity.KEYGUARD_SERVICE);
KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
lock.disableKeyguard(); 
```

在 androidmanifest 中：

```
<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/> 
```

**或者**

按照[这个链接](http://developer.android.com/reference/android/os/PowerManager.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-28T10:02:42.597

以下行允许您的手机在应用程序处于前台时打开

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

以下说明允许我们在按下锁定按钮时禁用锁定屏幕。API 级别 13 中不推荐使用 KeyguardLock 类

```
/*onCreate*/
KeyguardManager keyguardManager = (KeyguardManager)getSystemService(Activity.KEYGUARD_SERVICE);
KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE); // Deprecated :/
lock.disableKeyguard(); 
```

在你的清单中：

```
<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-29T17:39:53.400

尚未提及的一个有趣的选项是

```
View#setKeepScreenOn(boolean onOff) 
```

方法。这实际上可以在应用程序运行期间的任何时候动态使用，例如根据应用程序状态设置屏幕模式

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-16T12:17:27.767

**使用密钥保护代码，它可以完美运行，**

只需将代码粘贴到您的 mainactivity 文件中的 onCreate 方法中并在 android 清单文件中粘贴权限******

# iphone - 选择行后隐藏 UIPopover

> ID：11344336
> 
> 赞同：3
> 
> 时间：2012-07-05T12:28:09.487
> 
> 标签：iphone, ipad, uitableview, hide, uipopovercontroller

我是`iPad`开发人员的新手，

我`UIPopover`在我的应用程序中使用，当我选择弹出窗口中的任何行时，我的弹出窗口没有隐藏它仍然在视图中，当我触摸屏幕上的任何地方时它会隐藏。

我想在用户选择任何行后隐藏弹出框。

这是我的代码片段，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
    for(int index=0;index<=indexPath.row;index++)
    {
        UITableViewCell *cell =[tableView cellForRowAtIndexPath:indexPath];
        lbl.text=cell.textLabel.text;
    }
} 
```

**逻辑：**当我选择任何一行弹出框时，相应的文本将被提取并存储到标签中。

***任何帮助将不胜感激。***

**编辑**

```
UIViewController* popoverContent = [[UIViewController alloc]init];
UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(110, 0, 500, 4)];

popoverPolicyNameTable = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 250, 200) style:UITableViewStylePlain];// size of tableview inside popover

[popoverPolicyNameTable setDelegate:(id<UITableViewDelegate>)self]; 
[popoverPolicyNameTable setDataSource:(id<UITableViewDataSource>)self]; 
[self.view addSubview:popoverPolicyNameTable];
[popoverPolicyNameTable release];

[popoverView addSubview:popoverPolicyNameTable];
popoverContent.view = popoverView;
popoverContent.contentSizeForViewInPopover = CGSizeMake(250, 200); //size of popover border
self.popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];

[self.popoverController  presentPopoverFromRect:CGRectMake(350,100, 35, 35) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; //size of arrow

[popoverContent release];
[popoverView release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:41:25.487

在具有您的类中添加一个变量`UITableView`：

```
id parent; 
```

然后属性并合成它：

```
@property(nonatomic, retain) id parent;

@synthesize parent; 
```

然后你在哪里创建这个对象`ViewController`来添加`Popovercontroller`，像这样

```
myTableViewController.parent = myPopoverControllerObject; 
```

现在在`didSelectRowAtIndexPath`：

```
[parent dismissPopoverAnimated:YES]; 
```

你完成了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:07:37.993

你需要实现这样的东西

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController1{

    [self.popoverController dismissPopoverAnimated:YES];
    self.popoverController=nil;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:50:13.497

使用委托并通知您的委托用户在列表中选择了一个项目。委托将知道如何关闭视图控制器。

这种方法更好，因为它与容器无关，并且您可以在弹出框之外重用视图控制器：例如，在 iPhone 上使用导航控制器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:37:59.870

将 Popover 控制器设为类成员变量。

然后点击表格视图点击方法调用popovercontoller的dismiss方法。

# jpos - 在 JPOS 中解包字段时出现异常

> ID：11344339
> 
> 赞同：1
> 
> 时间：2012-07-05T12:28:23.157
> 
> 标签：jpos

当我向服务器发送请求时，在服务器日志中我得到了正确的结果。这是我对服务器的请求如下

```
ISOMsg isoMsg = new ISOMsg();
            isoMsg.setMTI(Constants.RequestType.MESSAGE_REQUEST.getValue());
            isoMsg.set(3,Constants.Services.DEPOSIT_FUNDS_REQUEST.getValue());
            isoMsg.set(4, depositFundRequest.getAmount().toString());
            isoMsg.set(7, ISODate.getDateTime(today, TimeZone.getTimeZone("GMT+03")));
            isoMsg.set(11, ServiceUtils.generate(6));
            //isoMsg.set(12, "100629072055");
            isoMsg.set(17, ISODate.getDate(today));
            //isoMsg.set(24, "200");
            isoMsg.set(32, "111111");
            //isoMsg.set(35, "6278519999011712");
            isoMsg.set(37, ServiceUtils.generate(12));
            //isoMsg.set(41, "TERMID01");
            //isoMsg.set(43, "11");
            isoMsg.set(46,"00KESD000000000000500000000000D0000000000000000KES");
            isoMsg.set(49,"KES");
            isoMsg.set(102,depositFundRequest.getAccount());
            isoMsg.set(123, userContextService.getCurrentUser());//UserId
            isoMsg.set(126,Constants.Field126.CASH_IN.getValue());
            channel.send (isoMsg);
            ISOMsg responseMsg = channel.receive (); 
```

但是，当在客户端传入时，我得到了以下异常。

```
 org.jpos.iso.ISOException: org.jpos.iso.IFA_LLCHAR: Problem unpacking field 43 (java.lang.NegativeArraySizeException) unpacking field=43, consumed=97 
```

我正在使用 ASCII 打包器和 BCD 通道，请帮我解决异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:26:29.233

您可以`org.jpos.iso.IFE_LLCHAR`在打包程序中使用字段 43。

# ruby-on-rails - find_by 返回 nil 类错误

> ID：11344340
> 
> 赞同：0
> 
> 时间：2012-07-05T12:28:33.830
> 
> 标签：ruby-on-rails, activerecord, devise

我的控制器中有以下 find_by 调用，问题是当调用没有 id 时，它返回 nil 类错误

```
if current_user.admin?
  @schedules = Schedule.all
else
  @schedules = Schedule.find_by_team_id(current_user[:team_id])
end 
```

如果 id 存在它一切正常，有什么想法为什么我会收到这个错误？

# javascript - 给定一个数组和谓词，找到第一个匹配的元素

> ID：11344345
> 
> 赞同：19
> 
> 时间：2012-07-05T12:28:42.453
> 
> 标签：javascript, jquery

是否有一个现有函数可以找到与某个通用谓词匹配的第一个数组元素？

```
$.fn.findFirstMatching = function(predicate) {
    var result;
    $.each(this, function(index, value) {
        if (predicate(index, value)) {
            result = {index: index, value: value};
        }
    });
    if (result) {
        return result;
    }
}; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-04-20T13:20:20.743

从 ES2015 开始，您可以使用[`Array.prototype.find`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)

使用它的示例如下所示：

```
// outputs the first odd number
console.log([2,4,10,5,7,20].find(x => x%2)) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-01-20T21:14:08.317

另一种解决方案是：

```
$.grep(yourArray, function (value, index) { return value == 42 } )[0] 
```

请注意，参数的顺序应该是`value, index`

[jQuery.grep 的文档。](http://api.jquery.com/jquery.grep/)

当然，使用**_underscore**更加优雅和高效（因为*$.grep*将谓词应用于数组的所有项目，它不会在第一次匹配后停止），但无论如何:)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-05T12:34:09.810

如果你使用[underscore.js](http://underscorejs.org)，那么你可以使用[find](http://underscorejs.org/#find)方法。它甚至适用于存储元素集合的 jQuery 对象而没有问题。

```
_.find(array, function(value,index) { /* predicate */ }); 
```

但是除了这个额外的（但很小的）库之外，您还需要自己编写它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-25T15:02:59.437

自定义实现实际上可能很短并且仍然可读：

```
function findFirst(array, predicate) {
  for (var i = 0; i < array.length; i++) if (predicate(array[i])) return array[i];
} 
```

这将返回匹配谓词（或未定义）的第一项，然后停止迭代——这对于大型数组或谓词函数很复杂可能很方便。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-05T12:36:53.007

[使用jquery的inArray方法](http://api.jquery.com/jQuery.inArray/)

您可以轻松找到搜索元素的索引。

# node.js - node.js - 使用玉有什么好处

> ID：11344346
> 
> 赞同：31
> 
> 时间：2012-07-05T12:28:43.607
> 
> 标签：node.js, pug

我了解到 JADE 是一种模板语言，它是 express 的首选引擎。

使用 JADE 代替 html 有什么好处？是否可以直接使用 html 而不是使用 jam ？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-05T12:35:16.640

Jade 具有更简洁、更易读的语法，并带有过滤器和帮助器：[https ://github.com/visionmedia/jade#a7](https://github.com/visionmedia/jade#a7)

*如果您要将 HTML 文件迁移到翡翠，这个转换器可能会派上用场： [http ://html2jade.aaron-powell.com/](http://html2jade.aaron-powell.com/)*

...但您也可以使用 HTML。

```
app.set('view engine', 'html'); 
```

[http://expressjs.com/guide.html#view-rendering](http://expressjs.com/guide.html#view-rendering)

我在我的 express 应用程序中使用 EJS ( [http://code.google.com/p/embeddedjavascript/](http://code.google.com/p/embeddedjavascript/) ) 作为渲染引擎，但在模板文件上保留一个 .html 后缀，如下所示：

```
app.set('view engine', 'html');
app.register('.html', require('ejs')); 
```

（需要安装 ejs，您可以通过 轻松完成`npm install ejs`）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-05T12:41:16.667

作为模板引擎，一切都与语法有关。你打字速度更快，它提高了可读性，这意味着可维护性和生产力。其中一些具有比其他更好的功能，但最终往往是品味问题。

Express 支持 nodejs 提供的许多模板引擎：http: [//expressjs.com/guide/using-template-engines.html](http://expressjs.com/guide/using-template-engines.html)

> Express 支持哪些模板引擎？任何可以符合 (path, locals, callback) 签名的东西。要规范化模板引擎接口和缓存，建议检查[consolidate.js](https://github.com/visionmedia/consolidate.js)项目以获得支持。未列出的模板引擎可能仍支持 Express 签名。

您应该检查[consolidate.js](https://github.com/visionmedia/consolidate.js)项目，有一些与 Express 的集成示例，并很好地概述了所有可用于节点的模板引擎。根据您的需求，选择取决于您。

# windows - 通过 RDP 连接检查 CapsLock

> ID：11344351
> 
> 赞同：0
> 
> 时间：2012-07-05T12:28:55.403
> 
> 标签：windows, keyboard, rdp

我尝试了两种方法来读取键盘的 CapsLock 键的状态。第一个：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.iskeylocked.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.iskeylocked.aspx) 第二个：*k_bb2fe024f8a71424996db6d9af08c1fc_settingNewSkin_19* ">http://www.rohitab.com/discuss /topic/38617-get-the-state-of-capslock / page_k *_bb2fe024f8a71424996db6d9af08c1fc_settingNewSkin* *_19*

现在这两种方法都适用于我的本地 Windows 机器。也就是说，它们准确地显示了键盘的 CapsLock 状态。

在使用 rdp 连接到 windows 远程桌面的计算机上运行相同的程序，该程序不起作用，并且只显示 CapsLock 键处于关闭状态。

通过 RDP 检查 CapsLock 键时，我必须调用特殊的 Windows 方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:18:46.687

进一步调查表明，导致 CapsLock 失败的是 rdesktop，而不是 RDP。

# c++ - 为什么 std::generate 将与 lambda 生成器一起使用而 std::fill 不会？

> ID：11344356
> 
> 赞同：1
> 
> 时间：2012-07-05T12:29:10.247
> 
> 标签：c++, std, lambda

我偶然发现了这个网站：[http](http://www2.research.att.com/~bs/C++0xFAQ.html#lambda) ://www2.research.att.com/~bs/C++0xFAQ.html#lambda在那里他们解释了***lambda 函数***。我尝试使用提供的示例，即：

```
 vector<int> indices( notImportantNumber );
    int count = 0;
    fill(indices.begin(), indices.end(), [&](){ return ++count; }); 
```

同样地

```
 generate(indices.begin(), indices.end(), [&](){ return ++count; }); 
```

虽然，当我尝试使用带有填充的示例时，我不断收到此错误：

> 错误 1 ​​错误 C2440：'='：无法从 'const `anonymous-namespace'::' 转换为 'long' c:\program files\microsoft visual studio 10.0\vc\include\xutility 2692

任何人都知道为什么会这样？在声明中`std::fill()`没有函子作为最后一个参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T12:33:00.467

这是那个网站上的错误。`std::fill`需要一个值来填充，而不是可调用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T12:33:30.820

因为`std::fill`不期望函子作为最后一个参数 - 请参阅[参考资料](http://en.cppreference.com/w/cpp/algorithm/fill)

> 将给定值分配给范围 [first, last) 中的元素。

它只期望将一个元素分配给指定范围内的每个项目。

# google-app-engine - 嵌套选项卡 gwtp

> ID：11344357
> 
> 赞同：0
> 
> 时间：2012-07-05T12:29:16.533
> 
> 标签：google-app-engine, gwt

前几天我发了一个问题，没有得到太多回应。我尝试了几件事，但仍然没有运气。我正在尝试在 GWTP 中嵌套一个选项卡演示器。我有一帧（北）是选项卡组 1 和一帧（西）是选项卡组 2。当我与组 1 交互时，我更新了控制组 2 的嵌套选项卡演示器。我查看了嵌套选项卡的示例演示者，但我无法从中确定我的错误。

两个 TabContainerPresenter 是 ManagementTabsPresenter 和 SettingsTabsPresenter。这些的孩子就像下面的 HomePresenter。这些子项的内容显示在位于 MainPreseter 的 DockLayoutPanel 的中心。我希望 ManagementTabsPresenter 和 SettingsTabsPresenter 显示在同一个 DockLayoutPanel 的 West 插槽中。

当我运行此代码时，所有内容都放置在屏幕上的正确位置。您甚至可以单击选项卡并执行操作。问题始于首先显示 SettingsPresenter，即使默认页面是 HomePresenter。就像它试图在启动时同时显示两者一样。然后，当您选择属于​​ ManagementTabsPresenter 或 SettingsTabsPresenter 的任何选项卡时，它将在 MainPresenter.Center_Slot 中打开正确的内容，但在 MainPresenter.West_Slot 中显示不正确的演示者。我无法弄清楚这里出了什么问题。任何帮助，将不胜感激。

这是代码：

```
public class HomePresenter extends Presenter<HomePresenter.MyView, HomePresenter.MyProxy> {
@Inject
AppPlaceManager appPlaceManager;

@NameToken(NameTokens.homePage)
@ProxyStandard
@NoGatekeeper
public interface MyProxy extends TabContentProxyPlace<HomePresenter> {
}

public interface MyView extends View {
}

@TabInfo(container = ManagementTabsPresenter.class)
static TabData getTabLabel(MainAppGinjector injector) {
    return new TabDataBasic("home", 0);
}

@Inject
public HomePresenter(final EventBus eventBus, final MyView view, final MyProxy proxy) {
    super(eventBus, view, proxy);
}

@Override
protected void revealInParent() {
    RevealContentEvent.fire(this, ManagementTabsPresenter.TYPE_MAIN_CONTENT_SLOT, this);
}
}

public class ManagementTabsPresenter extends TabContainerPresenter<ManagementTabsPresenter.MyView, ManagementTabsPresenter.MyProxy> {

/**
 * {@link ManagementTabsPresenter}'s proxy.
 */
@ProxyStandard
public interface MyProxy extends NonLeafTabContentProxy<ManagementTabsPresenter> {
}

/**
 * {@link ManagementTabsPresenter}'s view.
 */
public interface MyView extends TabView {
}

/**
 * Use this in leaf presenters, inside their {@link #revealInParent} method.
 */
@ContentSlot
public static final GwtEvent.Type<RevealContentHandler<?>> TYPE_MAIN_CONTENT_SLOT = MainPresenter.CENTER_SLOT;

/**
 * This will be the event sent to our "unknown" child presenters, in order for
 * them to register their tabs.
 */
@RequestTabs
public static final Type<RequestTabsHandler> TYPE_Management_RequestTabs = new Type<RequestTabsHandler>();

@TabInfo(container = HeaderTabsPresenter.class, nameToken = NameTokens.homePage)
static TabData getTabLabel(MainAppGinjector injector) {
    return new TabDataBasic("Management", 0);
}

@Inject
public ManagementTabsPresenter(final EventBus eventBus, final MyView view,
                               final MyProxy proxy,  AppPlaceManager appPlaceManager) {
    super(eventBus, view, proxy,TYPE_MAIN_CONTENT_SLOT, TYPE_Management_RequestTabs);
}

@Override
protected void revealInParent() {
    RevealContentEvent.fire(this,  HeaderTabsPresenter.TYPE_VERTICAL_TABS_SLOT, this);
}
}

public class SettingsTabsPresenter extends TabContainerPresenter<SettingsTabsPresenter.MyView, SettingsTabsPresenter.MyProxy> {

/**
 * {@link SettingsTabsPresenter}'s proxy.
 */
@ProxyStandard
public interface MyProxy extends NonLeafTabContentProxy<SettingsTabsPresenter> {
}

/**
 * {@link SettingsTabsPresenter}'s view.
 */
public interface MyView extends TabView {
}

@TabInfo(container = HeaderTabsPresenter.class, nameToken = NameTokens.appUserCollectionPage)
static TabData getTabLabel(MainAppGinjector injector) {
    return new TabDataBasic("Settings", 1);
}

/**
 * Use this in leaf presenters, inside their {@link #revealInParent} method.
 */
@ContentSlot
public static final GwtEvent.Type<RevealContentHandler<?>> TYPE_MAIN_CONTENT_SLOT = MainPresenter.CENTER_SLOT;

/**
 * This will be the event sent to our "unknown" child presenters, in order for
 * them to register their tabs.
 */
@RequestTabs
public static final Type<RequestTabsHandler> TYPE_Settings_RequestTabs = new Type<RequestTabsHandler>();

@Inject
public SettingsTabsPresenter(final EventBus eventBus, final MyView view,
                               final MyProxy proxy,  AppPlaceManager appPlaceManager) {
    super(eventBus, view, proxy,TYPE_MAIN_CONTENT_SLOT, TYPE_Settings_RequestTabs);
}

@Override
protected void revealInParent() {
    RevealContentEvent.fire(this,  HeaderTabsPresenter.TYPE_VERTICAL_TABS_SLOT, this);
}
}

public class HeaderTabsPresenter extends TabContainerPresenter<HeaderTabsPresenter.MyView, HeaderTabsPresenter.MyProxy> {
@Inject EventBus eventBus;

/**
 * {@link HeaderTabsPresenter}'s proxy.
 */
@ProxyStandard
public interface MyProxy extends Proxy<HeaderTabsPresenter> {
}

/**
 * {@link HeaderTabsPresenter}'s view.
 */
public interface MyView extends TabView {
    void changeTab(Tab tab, TabData tabData, String historyToken);
}

/**
 * This will be the event sent to our "unknown" child presenters, in order for
 * them to register their tabs.
 */
@RequestTabs
public static final Type<RequestTabsHandler> TYPE_HEADER_RequestTabs = new Type<RequestTabsHandler>();

/**
 * Fired by child proxie's when their tab content is changed.
 */
@ChangeTab
public static final Type<ChangeTabHandler> TYPE_HEADER_ChangeTab = new Type<ChangeTabHandler>();

@ContentSlot
public static final Type<RevealContentHandler<?>> TYPE_VERTICAL_TABS_SLOT = MainPresenter.WEST_SLOT;

@Inject
public HeaderTabsPresenter(final EventBus eventBus, final MyView view,
                           final MyProxy proxy) {
    super(eventBus, view, proxy, TYPE_VERTICAL_TABS_SLOT, TYPE_HEADER_RequestTabs, TYPE_HEADER_ChangeTab);
}

@Override
protected void revealInParent() {
     RevealContentEvent.fire(this, MainPresenter.NORTH_SLOT, this);
}

}

public class MainPresenter extends Presenter<MainPresenter.MyView, MainPresenter.MyProxy>{

@Inject VSMRequestFactory requestFactory;
@Inject VSMMessages vsmMessages;
@Inject VSMExceptionMessages vsmExceptionMessages;
@Inject EventBus eventBus;

@ProxyStandard
@NoGatekeeper
public interface MyProxy extends Proxy<MainPresenter> {
}

public interface MyView extends View {

}

@ContentSlot
public static final Type<RevealContentHandler<?>> SOUTH_SLOT = new Type<RevealContentHandler<?>>();
@ContentSlot
public static final Type<RevealContentHandler<?>> WEST_SLOT = new Type<RevealContentHandler<?>>();
@ContentSlot
public static final Type<RevealContentHandler<?>> CENTER_SLOT = new Type<RevealContentHandler<?>>();
@ContentSlot
public static final Type<RevealContentHandler<?>> NORTH_SLOT = new Type<RevealContentHandler<?>>();

@Inject
public MainPresenter(EventBus eventBus, MyView view, MyProxy proxy) {
    super(eventBus, view, proxy);
}

@Override
protected void revealInParent() {
    RevealRootLayoutContentEvent.fire(this, this);
}

@Override
protected void onReveal() {
    super.onReveal();
    initializeAppUser();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:05:34.600

我之前偶然发现了类似的东西......我认为这是因为它们都继承自 TabContainerPresenter 并且 gwtp 中有一个错误会在错误的继承子节点上调用 onReveal() 。

看看这个 gwtp 论坛帖子： [https ://groups.google.com/forum/?fromgroups#!searchin/gwt-platform/gilad$20egozi/gwt-platform/p0s3BlN-ceE/5EL3nynaiu4J](https://groups.google.com/forum/?fromgroups#!searchin/gwt-platform/gilad%2420egozi/gwt-platform/p0s3BlN-ceE/5EL3nynaiu4J)

是这样吗？如果是这样，我认为没有人在 gwtp 问题跟踪器上提交错误，所以请告诉我。

（当然，最好的检查是不要继承，看看它是否有效）

# php - 如何关联下面给定的foreach循环？

> ID：11344361
> 
> 赞同：0
> 
> 时间：2012-07-05T12:29:25.523
> 
> 标签：php, arrays, foreach

我有两个下面给出的循环

```
foreach($result_access as $acc){
   $usr_access_id[] = $acc->id;
   $usraccess[] = $acc->rules;
} 
```

**> 更新**

```
 foreach($somearray as $someid){//Updated
        foreach($usraccess as $accessusr){
          if(in_array($someid,$usraccess)){
            $myid = ??;///Here i want the $usraccess associated $acc->id, how can I get that? 
          }
        }
      } 
```

如您所见，我希望`$myid`分配的 get`$acc->id`应该与当前`$usraccess`数组相关联

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:33:24.043

这是一个理智的解决方案：

```
foreach ($result_access as $acc) {
    if (in_array($someid, $acc->rules)) {
        $myid = $acc->id;
    }
} 
```

*疯狂*的解决方案是：

```
...

foreach($usraccess as $i => $accessusr){
  if(in_array($someid,$usraccess)){
    $myid = $usr_access_id[$i];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:33:04.803

这是你想要的吗？

```
foreach($result_access as $acc){
   $usr_access_id[] = $acc->id;
   $usraccess[ $acc->id ] = $acc->rules;
}

foreach($usraccess as $accessusr){
  if(in_array($someid,$usraccess)){
    $myid = $usraccess[ $someid ] ;///Here i want the $usraccess associated $acc->id, how can I get that? 
  }
} 
```

# jpa - JPA 标准：从多选查询中计数

> ID：11344362
> 
> 赞同：0
> 
> 时间：2012-07-05T12:29:29.950
> 
> 标签：jpa, java-ee-6, criteria-api

我想实现一个带有分页的表格组件。表中的结果由这样的多选查询检索：

```
SELECT DISTINCT t0.userId,
            t0.userName,
            t1.rolleName
FROM userTable t0
LEFT OUTER JOIN roleTable t1 ON t0.userId = t1.fkUser
WHERE(t0.userType = 'normalUser' AND t1.roleType = 'loginRole') 
```

这个结果我可以通过多选查询得到。

现在对于分页，我必须首先检索总行数。有没有人可以为这个 sql 之一定义条件查询？我失败了，因为子查询不支持多选，而且我不知道如何将此不同的内容放入 count 语句中。

```
SELECT COUNT(*) FROM
(
   SELECT DISTINCT t0.userId,
                   t0.userName,
                   t1.rolleName
   FROM userTable t0
   LEFT OUTER JOIN roleTable t1 ON t0.userId = t1.fkUser
   WHERE(t0.userType = 'normalUser' AND t1.roleType = 'loginRole')
) 
```

或者

```
SELECT COUNT(DISTINCT t0.userId || t0.userName || t1.rolleName)
FROM userTable t0
LEFT OUTER JOIN roleTable t1 ON t0.userId = t1.fkUser
WHERE(t0.userType = 'normalUser' AND t1.roleType = 'loginRole') 
```

提前致谢！

顺便提一句。我在 WebSphere AppServer 上使用 OpenJpa

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:02:30.883

以下内容未经测试，但应该可以工作：

```
CriteriaBuilder builder = em.getCriteriaBuilder();
CriteriaQuery<Long> query = builder.createQuery(Long.class);
Root<User> t0 = query.from(User.class);
Join<User, Role> t1 = t0.join("roles", JoinType.LEFT); 
query.select(builder.concat(t0.get(User_.userId), builder.concat(t0.get(User_.userName), t1.get(Role_.rolleName))).distinct(true);
query.where(cb.equal(t0.get("userType"), "normalUser"), cb.equal(t1.get("roleType"), "loginRole"));
TypedQuery<Long> tq = em.createQuery(query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-18T03:47:24.953

由于已知问题[https://jira.spring.io/browse/DATAJPA-1532](https://jira.spring.io/browse/DATAJPA-1532)多选不适用于 repo.findall 方法。我通过将实体管理器自动装配到服务类来处理这个问题。

```
@Autowired
    EntityManager entityManager;
    public List<?> getResults() throws ParseException 
    {
        //ModelSpecification modelSpecification = new ModelSpecification();
        CriteriaQuery<DAO> query = modelSpecification.getSpecQuery();
        TypedQuery<DAO> typedQuery = entityManager.createQuery(query);
          List<?> resultList = typedQuery.getResultList();

        //List<DAO> allData  = entityManager.createQuery(query).getResultList();
        return resultList;
    } 
```

你可以在这里找到工作代码[https://github.com/bsridharpatnaik/CriteriaMultiselectGroupBy](https://github.com/bsridharpatnaik/CriteriaMultiselectGroupBy)

# ios - 句柄复制：粘贴：剪切：在 UIWebView

> ID：11344363
> 
> 赞同：1
> 
> 时间：2012-07-05T12:29:33.687
> 
> 标签：ios, uiwebview

如何处理复制：粘贴：剪切：UIWebView 中的事件？正如苹果所说，我们不能继承 UIWebView，那么我该如何处理 UIResponderStandardEditActions？也许有人面临这样的困难......

我需要实现自定义复制、剪切、粘贴以复制/粘贴 html（RTF 文本、一些自定义 html 元素）。此外，我有 2 个 webview，所以如果我将一些元素粘贴到一个中，另一个应该回复此交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:13:23.947

Unfortunately, I think you are going to have to make your own copy/paste menu.

Using the answer from [this question](https://stackoverflow.com/questions/8031175/perform-copy-cut-from-uiresponderstandardeditactions) you can set up custom copy/paste buttons, and you could handle everything you are trying to do through those:

```
[[UIApplication sharedApplication] sendAction:@selector(cut:) to:nil from:self forEvent:nil]; 
```

Also, [this question](https://stackoverflow.com/questions/1604716/customize-uimenucontroller) shows how to make a custom UIMenuController and use the UILongPressGestureRecognizer to get it to show up on the UIWebView.

I hope this helps. Someone else may know an easier way, but I think this way will work at least.

# r - 当输出的行大小不同时将输出存储在相同的data.frame中

> ID：11344365
> 
> 赞同：0
> 
> 时间：2012-07-05T12:29:38.457
> 
> 标签：r

有时我想对数据集执行一个函数（例如差异计算）并将结果直接存储在数据框中

```
df <- data.frame(a$C, diff(a$C)) 
```

但我不能这样做，因为行数不同。

是否有一些语法可以让我做到这一点，也许`NA`当函数 ( `diff()`) 没有结果时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:44:06.370

标准方法是创建一个向量，该向量在一端或另一端扩展为 NA

```
 dfrm$diffvec <- c(NA, diff(firstvec) ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T12:47:27.260

如果不对人们可能希望使用的全部功能做出大量假设，就没有通用的解决方案。

对于您展示的示例，我们可以很容易地计算出第一个值 from`diff()`将是 an`NA`如果它返回它：

```
set.seed(5)
d <- rpois(10, 5)

> d
 [1] 3 6 8 4 2 6 5 7 9 2
> diff(d)
[1]  3  2 -4 -2  4 -1  2  2 -7 
```

因此，如果您正在使用，`diff()`那么您总是可以这样做：

```
> dd <- data.frame(d, Diff = c(NA, diff(d)))
> dd
   d Diff
1  3   NA
2  6    3
3  8    2
4  4   -4
5  2   -2
6  6    4
7  5   -1
8  7    2
9  9    2
10 2   -7 
```

但是现在考虑一下您将如何处理您可能希望使用的任何其他函数，这些函数并不总是返回`NA`正确的位置。

对于这个例子，我们可以使用有一个参数的**zoo**包：`na.pad`

```
require(zoo)
d2 <- as.zoo(d)
ddd <- data.frame(d, Diff = diff(d2, na.pad = TRUE))

> ddd
   d Diff
1  3   NA
2  6    3
3  8    2
4  4   -4
5  2   -2
6  6    4
7  5   -1
8  7    2
9  9    2
10 2   -7 
```

如果您正在使用带有公式接口（例如`lm()`）的建模函数并且该函数有一个`na.action`参数，那么您可以`na.action = na.exclude`在函数调用中设置，并且提取器函数（例如`fitted()`，`resid()`等）将在正确的位置添加回它们的输出`NA`，以便输出与传递给建模函数的数据长度相同。

如果您有其他更具体的案例要探索，请编辑您的答案。在特定情况下，您的 Q 通常会有一个简单的答案。在一般情况下，答案是否定的，不可能按照您的要求去做。

# perl - 将字符串拆分为变量并将输出用作元素

> ID：11344366
> 
> 赞同：1
> 
> 时间：2012-07-05T12:29:47.920
> 
> 标签：perl

好吧..我又卡住了。我已经阅读了很多类似问题的主题，但没有找到适合我的解决方案。我有一个 ; 分隔的 csv 文件和第 8 列 ($elements[7]) 的字符串如下：“aaaa;bb;cccc;ddddd;eeee;fffff;gg;”。我正在尝试基于拆分字符串；并将输出捕获到变量。然后在他们自己的列中使用主 csv 文件中的这些变量。

所以现在文件是这样的：

3d;2f;7j;8k;4s;2b;5g;"aaaa;bb;cccc;ddddd;eeee;fffff;gg;";4g;1a;5g;2g;7h;3d;2f;7j 3c;9k; 5l;4g;1a;5g;3d;“aaaa;bb;cccc;dddd;eeee;fffff;gg;”;4g;1a;5g;2g;7h;3d;2f;7j 4g;1a;5g;2g; 7h;3d;8k;“aaaa;bb;cccc;dddd;eeee;fffff;gg;”;3d;2f;7j;8k;4s;2b;4g;1a

我希望它像：

3d;2f;7j;8k;4s;2b;5g;4g;1a;5g;2g;7h;3d;2f;7j;aaaa;bb;cccc;ddddd;eeee;fffff;gg 3c;9k;5l;4g ;1a;5g;3d;4g;1a;5g;2g;7h;3d;2f;7j;aaaa;bb;cccc;ddddd;eeee;fffff;gg; 4g;1a;5g;2g;7h;3d;8k;3d;2f;7j;8k;4s;2b;4g;1a;aaaa;bb;cccc;ddddd;eeee;fffff;gg;

这是我一直在尝试的代码。我知道..这太可怕了！但我希望有人可以帮助我？

```
use strict;
use warnings;

my $inputfile  = shift || die "Give files\n";
my $outputfile = shift || die "Give output\n";

open my $INFILE,  '<', $inputfile   or die "In use / Not found :$!\n";
open my $OUTFILE, '>', $outputfile  or die "In use :$!\n";

while (<$INFILE>) {
  s/"//g;
  my @elements = split /;/, $_;

    my ($varA, $varB, $varC, $varD, $varE, $varF, $varG, $varH) split (';', $elements[10]);
        $elements[16] = $varA;
        $elements[17] = $varB;
        $elements[18] = $varC;
        $elements[19] = $varD; 
        $elements[20] = $varE;
        $elements[21] = $varF;
        $elements[22] = $varG;
        $elements[23] = $varH;

my $output_line = join(";", @elements);
print $OUTFILE $output_line;
}

close $INFILE;
close $OUTFILE;

exit 0; 
```

我也对我的陈述感到困惑，这应该不可能吧？我的意思是 $vars 在一个封闭的部分，所以应该不可能将它们写入 $elements？

**编辑**

这就是我根据 TLP 的建议调整代码的方式：

```
use strict;
use warnings;
use Text::CSV;

my $inputfile  = shift || die "Give files\n";
my $outputfile = shift || die "Give output\n";

open my $INFILE,  '<', $inputfile   or die "In use / Not found :$!\n";
open my $OUTFILE, '>', $outputfile  or die "In use :$!\n";

my $csv = Text::CSV->new({  # create a csv object
    sep_char => ";",    # delimiter
    eol => "\n",        # adds newline to print
});

while (my $row = $csv->getline($INFILE)) {      # $row is an array ref
my $line = splice(@$row, 10, 1);            # remove 8th line
$csv->parse($line);                         # parse the line
push @$row, $csv->fields();                 # push newly parsed fields onto       main array
$csv->print($OUTFILE, $row);
}

close $INFILE;
close $OUTFILE;

exit 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:44:49.630

您应该使用 CSV 模块，例如[Text::CSV](http://search.cpan.org/perldoc?Text%3a%3aCSV)来解析您的数据。这是一个关于如何完成的简短示例。您可以用您自己的替换我在下面使用的文件句柄。

```
use strict;
use warnings;
use Text::CSV;

my $csv = Text::CSV->new({     # create a csv object
        sep_char => ";",   # delimiter
        eol => "\n",       # adds newline to print
    });

while (my $row = $csv->getline(*DATA)) {   # $row is an array ref
    my $line = splice(@$row, 7, 1);   # remove 8th line
    $csv->parse($line);               # parse the line
    push @$row, $csv->fields();       # push newly parsed fields onto main array
    $csv->print(*STDOUT, $row);
}

__DATA__
3d;2f;7j;8k;4s;2b;5g;"aaaa;bb;cccc;ddddd;eeee;fffff;gg;";4g;1a;5g;2g;7h;3d;2f;7j
3c;9k;5l;4g;1a;5g;3d;"aaaa;bb;cccc;ddddd;eeee;fffff;gg;";4g;1a;5g;2g;7h;3d;2f;7j
4g;1a;5g;2g;7h;3d;8k;"aaaa;bb;cccc;ddddd;eeee;fffff;gg;";3d;2f;7j;8k;4s;2b;4g;1a 
```

**输出：**

```
3d;2f;7j;8k;4s;2b;5g;4g;1a;5g;2g;7h;3d;2f;7j;aaaa;bb;cccc;ddddd;eeee;fffff;gg;
3c;9k;5l;4g;1a;5g;3d;4g;1a;5g;2g;7h;3d;2f;7j;aaaa;bb;cccc;ddddd;eeee;fffff;gg;
4g;1a;5g;2g;7h;3d;8k;3d;2f;7j;8k;4s;2b;4g;1a;aaaa;bb;cccc;ddddd;eeee;fffff;gg; 
```

# javascript - ajax 响应运行 javascript

> ID：11344368
> 
> 赞同：0
> 
> 时间：2012-07-05T12:29:53.683
> 
> 标签：javascript, jquery, ajax

我想在 ajax 响应后运行相同的 js 代码。

js代码是

```
<script>
var wid = 2670, gid = 8412;
var rpHost = (("https:" == document.location.protocol) ? "https://" : "http://");
var tt = "t_reklamporttakip_Kozmetik_1x1_Uye_Takip";
var ciid = 4541454;
document.write(unescape("%3Cscript src='" + rpHost + "ad.reklamport.com/scripts/rpn.js' type='text/javascript'%3E%3C/script%3E"));
document.write(unescape("%3Cscript src='" + rpHost + "ad.reklamport.com/rpgetad.ashx?tt=" + tt + "&ciid=" + ciid + "&rnd=" + Math.random() % 99999999 + "' %3E%3C/script%3E"));
</script> 
```

我如何运行这段代码

```
jQuery.get('url', function(response){
    // i want run here!
}); 
```

任何人的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:49:36.910

如果您从服务器获取 JavaScript，请使用[getScript()](http://api.jquery.com/jQuery.getScript/)

# java - android自动调整webview而不重新加载它

> ID：11344375
> 
> 赞同：0
> 
> 时间：2012-07-05T12:30:11.373
> 
> 标签：java, android, eclipse

我有一个带有 webview 和 admob 的布局。我还将方向|键盘设置为主要活动以处理 onConfigChanges，以便在设备旋转时不重新加载页面内容。当 appstarts 时，创建 webview 并加载内容，然后出现 admob 但 webview 不会自动调整大小！发生这种情况时，我将设备转为横向并返回纵向，调整布局大小并正确安装！我怎么能强制 webview 再次自动调整大小？我尝试了几个选项，但没有成功！谢谢你

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">

      <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adUnitId="xxx"
                         ads:adSize="SMART_BANNER"
                         ads:testDevices="TEST_EMULATOR, xxx"
                         ads:loadAdOnCreate="true"/>    

<RelativeLayout
                    android:id="@+id/bLayout"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_below="@+id/barraSocial">

                    <WebView
                        android:id="@+id/webviewB"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:autoLink="web"
                        android:textColor="@android:color/black" 
                        android:scrollbars="none"
                        />
                </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:36:45.900

尝试强制您的广告视图的高度。有人这样想

```
<com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="@dimen/adview_height" /> 
```

其中 adview_height 是 res/values/dimen.xml 中存储的值，例如：

```
<resources>
    <dimen name="adview_height">30dp</dimen>
</resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T14:28:00.910

尝试将视图设置为默认隐藏：

```
android:visibility="gone" 
```

并在加载内容时将其设置为可见：

```
 webView.loadUrl(url);
        webView.setWebViewClient(new WebViewClient() {
            public void onPageFinished(WebView view, String url) {
                webView.setVisibility(View.VISIBLE);
                super.onPageFinished(view, url);
            }
        }); 
```

# wpf - 为什么这个绑定不起作用

> ID：11344380
> 
> 赞同：1
> 
> 时间：2012-07-05T12:30:33.103
> 
> 标签：wpf, xaml, data-binding, attachedbehaviors

我有一个第 3 方 SplitButton 控件，它公开了一些 DropDownContent 和一个布尔值 IsOpen dp 来控制是否显示下拉内容。

在 DropDownContent 是具有多个按钮的 StackPanel 的情况下，每个按钮都绑定到视图模型中的命令。除了执行该命令之外，单击按钮还需要关闭打开的 DropDown 内容，我正在使用下面的 AttachedBehavior 执行此操作。

但是我的绑定（简单地需要获取对祖先 SplitButton 控件的引用）不起作用。在绑定中，您会注意到我正在尝试查找 SplitButton 类型的第一个 Ancestor 控件。但是，我确实看到调试信息显示祖先级别 1，因此我将级别更改为高达 4，但仍然出现错误。

有人可以看到修复是什么吗？

# 绑定错误

> System.Windows.Data 错误：4：找不到与引用“RelativeSource FindAncestor，AncestorType='Xceed.Wpf.Toolkit.SplitButton'，AncestorLevel='1''的绑定源。BindingExpression：（无路径）；数据项=空；目标元素是“CloseDropDownContentBehavior”（HashCode=8896066）；目标属性是“DropDownButtonElement”（类型“SplitButton”）

# xml

```
<DataTemplate x:Key="AddNewPartyTemplate">
    <StackPanel HorizontalAlignment="Right" Margin="10">

        <toolkit:SplitButton x:Name="theSplitButton" Content="{resx:Resx Subject_AddNewWithChoices}">
            <toolkit:SplitButton.DropDownContent>
                <StackPanel x:Name="theStackPanel">
                    <Button Content="{resx:Resx Person}" Command="{Binding AddNewPersonCommand}" 
                        >
                        <i:Interaction.Behaviors>
                            <local:CloseDropDownContentBehavior 
                  ***              DropDownButtonElement="{Binding 
                                    RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type toolkit:SplitButton}}}"/>
                        </i:Interaction.Behaviors>
                    </Button>
                    ...

                </StackPanel>
            </toolkit:SplitButton.DropDownContent>
        </toolkit:SplitButton>
    </StackPanel>
</DataTemplate> 
```

# 依附行为

```
public class CloseDropDownContentBehavior : Behavior<ButtonBase>
{
    private ButtonBase _button;

    protected override void OnAttached()
    {
        _button = AssociatedObject;
        _button.Click += OnPartyButtonClick;
    }

    protected override void OnDetaching()
    {
        _button.Click -= OnPartyButtonClick;
    }

    // **** the point of it all
    void OnPartyButtonClick(object sender, RoutedEventArgs e) { DropDownButtonElement.IsOpen = false; }

    public static readonly DependencyProperty DropDownButtonElementProperty =
        DependencyProperty.Register("DropDownButtonElement",
        typeof(SplitButton), typeof(CloseDropDownContentBehavior), new UIPropertyMetadata(null, OnDropDownElementChanged));

    public DropDownButton DropDownButtonElement
    {
        get { return (DropDownButton)GetValue(DropDownButtonElementProperty); }
        set { SetValue(DropDownButtonElementProperty, value); }
    }

    private static void OnDropDownElementChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:49:47.443

猜测是因为`Interaction.Behaviors`它不是可视树的一部分，所以绑定不会找到祖先。您是否简单地尝试过：

```
DropDownElement="{Binding ElementName=theSplitButton}" 
```

评论更新：在这种情况下，解决方案是简单地使用`x:Reference`：

```
DropDownElement="{x:Reference theSplitButton}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:32:18.017

我不知道 SplitButton.DropDownContent 但如果它的行为类似于上下文菜单，则以下答案可能会有所帮助：[WPF 上下文菜单，其项目被定义为数据模板](https://stackoverflow.com/questions/11083348/wpf-context-menu-whose-items-are-defined-as-data-templates)

这个技巧是与 RelativeSource Self 或 Type ContextMenu 绑定，然后将 Path 设置为 PlacementTarget.DataContext.YourProperty

# android - Android界面变为null

> ID：11344388
> 
> 赞同：1
> 
> 时间：2012-07-05T12:30:49.673
> 
> 标签：android, interface

我的界面有问题。我在一个活动中初始化界面：`map.setFloorInterface(this);`

* * *

这是方法本身：

```
public void floorChanged(View view, int floorId) {
    map = (MapView) view.inflate(getActivity(), R.layout.map, tView);
    map.setFloorInterface(this);
} 
```

我正在尝试重置界面，因为它第二次为空。该界面是从我制作的库中调用的，并在我按下按钮时被触发。

* * *

任何人都知道为什么界面第一次工作，但第二次为空？

错误日志：

```
07-05 16:34:55.273: E/AndroidRuntime(10288): FATAL EXCEPTION: main
07-05 16:34:55.273: E/AndroidRuntime(10288): java.lang.NullPointerException
07-05 16:34:55.273: E/AndroidRuntime(10288):    at com.labela.blicks.Map$4.onClick(TiledScrollView.java:108)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at android.view.View.performClick(View.java:2538)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at android.view.View$PerformClick.run(View.java:9152)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at android.os.Handler.handleCallback(Handler.java:587)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at android.os.Looper.loop(Looper.java:130)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at android.app.ActivityThread.main(ActivityThread.java:3687)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at java.lang.reflect.Method.invokeNative(Native Method)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at java.lang.reflect.Method.invoke(Method.java:507)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
07-05 16:34:55.273: E/AndroidRuntime(10288):    at dalvik.system.NativeStart.main(Native Method) 
```

提前谢谢！

# tcl - 如何通过替换值读取文件并写入tcl中的其他文件

> ID：11344392
> 
> 赞同：1
> 
> 时间：2012-07-05T12:31:05.313
> 
> 标签：tcl

我有三个文件：Conf.txt、Temp1.txt 和 Temp2.​​txt。我已经完成了正则表达式以从 config.txt 文件中获取一些值。我想放置值（在 Temp1.txt 和 Temp2.​​txt 中同名）并创建另外两个文件，例如 Temp1_new.txt 和 Temp2_new.txt。

例如：在 config.txt 我有一个值说 IP1，并且在 Temp1.txt 和 Temp2.​​txt 中出现了相同的名称。我想创建文件 Temp1_new.txt 和 Temp2_new.txt 替换 IP1 在 Temp1.txt 和 Temp2.​​txt 中说 192.XXX。

如果有人可以帮助我使用 tcl 代码来做同样的事情，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:23:09.267

从提供的信息来看，基本上有两种方法可以做你想做的事：

*   文件语义感知；
*   蛮力。

第一种方法是读取源文件，对其进行[*解析*](http://en.wikipedia.org/wiki/Parsing)以生成其内容的某种结构化内存表示，然后在替换生成的表示中的相关值后将此内容序列化到新文件。

蛮力方法意味着将源文件的内容视为纯文本（或一系列文本字符串）并在此文本上运行类似[`regsub`](http://www.tcl.tk/man/tcl8.5/TclCmd/regsub.htm)or[`string replace`](http://www.tcl.tk/man/tcl8.5/TclCmd/string.htm#M47)的内容以生成新文本，然后将其保存到新文件中。

第一种方法通常应该受到青睐，特别是对于复杂的情况，因为它消除了替换无关文本位的任何机会。我的蛮力编码方式更简单*（如果没有方便的库来执行此操作，请参见下文）*，因此适用于一次性脚本。

请注意，对于某些文件格式，有现成的库可用于自动化您需要的内容。例如，可以使用[tdom包的](http://wiki.tcl.tk/tdom)[XSLT](http://en.wikipedia.org/wiki/XSLT)工具来操作 XML 文件，可以使用[适当的库](http://tcllib.sourceforge.net/doc/ini.html)修改 INI 样式文件等。

# c++ - linux 内核 2.4.20 和 2.4.36 中的 pthread_create 差异

> ID：11344393
> 
> 赞同：6
> 
> 时间：2012-07-05T12:31:05.377
> 
> 标签：c++, linux, pthreads

我在两个正在运行的系统上有一些代码，`kernel 2.4.20`并且`kernel 2.4.38`. 他们都有`gcc 3.2.2`并且`glibc 2.3.2`

在 下`kernel 2.4.38`，pthread_t 句柄没有被重用。在重负载测试下，一旦句柄到达，应用程序就会崩溃`0xFFFFFFFF`。

（我首先怀疑这是因为应用程序在 IT 使用网络端口扫描仪的部署中崩溃 - 线程是为处理套接字连接而创建的）

**这个简单的例子重现了这个问题：**

```
void* ThreadProc(void* param)
{
    usleep(10000);
    printf(" Thread 0x%x\n", (unsigned int)pthread_self());
    usleep(10000);
    return NULL;
}

int main(int argc, char* argv[])
{
    pthread_t sThread;

    while(1)
    {
      pthread_create(&sThread, NULL, ThreadProc, NULL); 
      printf("Created 0x%x\n", (unsigned int)sThread);  
      pthread_join(sThread, NULL);
    };

    return 0;
} 
```

在 2.4.20 下：

```
 Created 0x40838cc0
     Thread 0x40838cc0
    Created 0x40838cc0
     Thread 0x40838cc0
    Created 0x40838cc0
     Thread 0x40838cc0
...and on and on... 
```

在 2.4.36 下：

```
 Created 0x4002
     Thread 0x4002
    Created 0x8002
     Thread 0x8002
    Created 0xc002
     Thread 0xc002
...keeps growing... 
```

我怎样才能`kernel 2.4.36`回收手柄？不幸的是我不能轻易改变内核。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:17:36.610

如果您的观察是正确的，那么只有两种可能的解决方案存在。

任何一个

1.  升级内核。这对您来说可能可行，也可能不可行。
2.  回收应用程序中的线程。

即使内核行为不端，您也可以执行选项 2。您可以持有一个在不使用时保持在睡眠状态的线程池。线程池是一种广为人知的软件工程模式（参见[http://en.wikipedia.org/wiki/Thread_pool_pattern](http://en.wikipedia.org/wiki/Thread_pool_pattern)）。这可能是您更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:47:58.393

原来我没有在负载测试中正确加入我的线程。

当我再次运行负载测试时，线程句柄达到 0xFFFFF002 然后滚动到 0x1002 并愉快地继续。

故事的寓意：确保您的线程已连接或分离！

# c# - Exchange Web 服务 - 从服务收到的响应不包含有效的 XML

> ID：11344400
> 
> 赞同：7
> 
> 时间：2012-07-05T12:31:35.540
> 
> 标签：c#, xml, exchangewebservices

我正在尝试连接到 Exchange 2010 服务器上的 Exchange Web 服务 (ews)。这是我正在使用的代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.Exchange.WebServices.Data;

namespace NDR_Processor
{
    class Program
{
    static void Main(string[] args)
    {
        ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP1);
        service.Credentials = new System.Net.NetworkCredential("redacted", "redacted", "redacted");

        service.Url = new Uri("https://exchange.redacted.net/EWS/Exchange.asmx");

        System.Net.ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };

        FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, new ItemView(1000));

        foreach (Item item in findResults.Items)
        {
            Console.WriteLine(item.Subject);
            Console.WriteLine(item.Body);

        }
    }
}
} 
```

但是，这样做时我收到一条错误消息，指出“从服务收到的响应不包含有效的 XML。”。内部异常表示：{“根级别的数据无效。第 1 行，位置 1。”}

我尝试在 Web 浏览器中点击[https://exchange.redacted.net/EWS/Exchange.asmx](https://exchange.redacted.net/EWS/Exchange.asmx)，它会提示我登录，然后我会看到一个有效的 XML 文档，据我所知。所以我不知道为什么我的应用程序会窒息。

有没有人知道为什么会发生这种情况或我该如何解决？

谢谢布拉德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T07:11:06.687

```
service.Url = new Uri("https://mail.tencent.com/EWS/Exchange.asmx"); 
```

详细信息在这里：[c# programmatically reading emails from the Exchange server](https://stackoverflow.com/questions/5249540/c-sharp-programmatically-reading-emails-from-the-exchange-server)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T14:04:11.783

我遇到了与以下论坛帖子中所述相同的问题：http: [//social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/e54c217f-28ff-4626-8ce8-a1242081f4d1/](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/e54c217f-28ff-4626-8ce8-a1242081f4d1/)

（基本上额外的字符被预先添加并附加到返回的 xml 中，导致上述错误）

如果它有任何帮助 - 删除和重新创建 EWS 虚拟目录并没有缓解问题。

我相信也许我们的 F5 负载平衡器或某些中间设备在 XML 的开头或结尾插入了额外的字符。

当我将代码更改为： service.Url = new Uri("https: **//192.168.xx** /EWS/Exchange.asmx");

（基本上使用我们交换服务器的内部 IP 地址）请求工作得很好。所以交换之外的东西正在破坏 XML。

# ios - iOS 源码 CanvasKit

> ID：11344401
> 
> 赞同：-2
> 
> 时间：2012-07-05T12:31:38.180
> 
> 标签：ios

我是 iOS 开发的新手，我找到了 Github，在那里我找到了一些对我很有帮助的资源。

> [https://github.com/jasonmorrissey/CanvasKit](https://github.com/jasonmorrissey/CanvasKit)

当我打开这个项目时，我在模拟器上运行它，我看到，在项目中有 2 个目标（一个像往常一样，另一个是“工具包”）。我想运行它以准确了解代码中的步骤并断点此代码。有人可以帮我打开/运行这个源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:27:18.313

该套件是一个静态库。除了您想在不同的项目中使用该库之外，无需运行它。

我认为没有人会帮助您研究整个代码。熟悉 obj-c，如果你有一些具体的问题，你可以自由提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T09:28:06.923

您可以选择 xcode 左上角的目标（在运行按钮旁边）为了运行演示，您需要静态库（请参阅构建阶段 -> 将二进制文件与库链接）。为了获得静态库，您首先需要通过选择 CanvasKit 目标来构建它。当你这样做时，你会得到 3 个错误，关于两个 setter 方法。进入相应的 .h 文件并创建这些属性`nonatomic`和`readwrite`. 然后您将能够构建库，然后您可以构建演示。

希望这可以帮助。

干杯!

# tridion - Tridion 2011 SP1 安装需要证书吗？

> ID：11344411
> 
> 赞同：3
> 
> 时间：2012-07-05T12:32:13.113
> 
> 标签：tridion

我尝试在默认的 Windows 2003 服务器上安装 Tridion。我在日志中收到此错误消息：

> 有效载荷验证码验证失败：C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp{fcc62529-e5a9-4df2-aaa3-e5d13af5643a}\CdWindowsServices

以前我从 Tridion 收到了解决问题的 Thawte 证书。但是，此服务器不是真正的证书颁发机构等的成员。

安装时立即失败。有任何想法吗？

谢谢，罗伯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:42:03.093

解决方案：

打开 MMC，添加管理单元，证书，本地计算机。

第三方根证书颁发机构、证书、导入

选择 thawte_Primary_Root_CA.pem（如果没有，请向 Tridion 客户支持请求）

安装 Tridion :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:57:30.263

此问题有一篇知识库文章： [http ://tridion.kb.sdl.com/kb/?ArticleId=3993&source=Article&c=12&cid=19#tab:homeTab:crumb:7:artId:3993](http://tridion.kb.sdl.com/kb/?ArticleId=3993&source=Article&c=12&cid=19#tab:homeTab:crumb:7:artId:3993)

# java - 静态编译的 Groovy 2.0 性能如何

> ID：11344412
> 
> 赞同：11
> 
> 时间：2012-07-05T12:32:14.290
> 
> 标签：java, scala, groovy, groovy++

我看到最近发布的 Groovy 2.0 包括可选的静态编译以及其他一些额外的好处，比如可选的静态类型检查。经过一番搜索，我找不到任何广泛的基准来比较 Groovy 的性能（使用静态编译）与 Java 和可能的 Scala。有谁知道任何这样的性能比较？我们可以假设它与 Groovy++ 在它死之前是一样的吗？如果它的性能相当，Groovy 是否会成为大型、性能关键型应用程序的可行替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T13:09:56.980

这里有一些[基准](https://code.google.com/p/jlabgroovy/wiki/Benchmarks)（虽然很难看出发生了什么）

`Fib`但是，从页面底部获取 Groovy 1.8.2源代码，并在 groovy 2.0 中运行它会给您：

```
Groovy(static ternary): 1623ms
Groovy(static if): 1583ms
Groovy(instance ternary): 1744ms
Groovy(instance if): 1694ms 
```

放在`@groovy.transform.CompileStatic`脚本的顶部会给你：

```
Groovy(static ternary): 819ms
Groovy(static if): 799ms
Groovy(instance ternary): 816ms
Groovy(instance if): 811ms 
```

显然，这不是一个完整的基准测试（它只是测试一件事），它不包括预热或任何东西，而且 Groovy 2.0 才发布一周，但它确实暗示了在这种情况下有很好的速度改进......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T10:58:56.390

> 我相信 java 在大约 550 毫秒内运行这些测试

我与 Java 做了一些性能比较。对于使用 @CompileStatic 的 Groovy 的“静态三元”和“静态 if”性能，与使用 Java 的性能有些相同。对于“instance ternary”和“instance if”，它几乎是 2 的因子。请参阅我的[博客文章](http://objectscape.blogspot.de/2012/08/groovy-20-performance-compared-to-java.html)。

# python - windows chrome通过命令行刷新选项卡0（或当前选项卡）

> ID：11344414
> 
> 赞同：5
> 
> 时间：2012-07-05T12:32:15.673
> 
> 标签：python, windows, google-chrome, batch-file, python-webbrowser

我正在尝试使用`python`,`webbrowser`模块来做到这一点。但它没有`Chromium`特定的功能。还有其他方法吗？可能有一个批处理脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:53:18.287

我自己用这个：（我写得很快，因为它仅供个人使用）。通过大量清理，您可能会得到您想要的东西。请参阅[https://developers.google.com/chrome-developer-tools/docs/remote-debugging](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)

```
import urllib2
import urllib
import os
import subprocess
import json

from websocket import create_connection

def refresh_page(url):
    data = json.load(urllib2.urlopen('http://localhost:9222/json'))

    found_page = False
    for page in data:
        if page['url'].lower() == url.lower():
            found_page = True
            websocketURL = page['webSocketDebuggerUrl']
            ws = create_connection(websocketURL)

            obj = {  "id": 0,
                     "method": "Page.reload",
                     "params":
                     {
                       "ignoreCache": True,
                       "scriptToEvaluateOnLoad": ""
                     }
                  }

            dev_request = json.dumps(obj)
            ws.send(dev_request)
            result =  ws.recv()
            ws.close()
    if not found_page:
        raise Exception("No pageFound")

def open_or_refresh(file_name):
    file_name = "".join ( [f if f in r'\/:*?"<>|' else  urllib.quote(f) for f in file_name] )
    file_name = 'file:///' + file_name.replace('\\', '/')
    file_name = file_name.encode('ascii', 'ignore')
    try:
        refresh_page(file_name)
    except:
        cmd = (r'"%(LOCALAPPDATA)s\Google\Chrome\Application\chrome.exe"'%os.environ
               + r' --remote-debugging-port=9222  "%s"' % file_name)
        subprocess.Popen(cmd)

open_or_refresh(r"C:\test.html")
open_or_refresh(r"C:\test.html") 
```

# android - 尽管在清单中进行了描述，但活动未正确启动

> ID：11344420
> 
> 赞同：0
> 
> 时间：2012-07-05T12:32:37.233
> 
> 标签：android, android-manifest

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.app.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.StyledCustom" >
        <activity
            android:name=".SplashActivity"
            android:label="@string/title_activity_main"
            >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main"
            android:theme="@style/Theme.StyledCustom" >
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我包括 SplashActivity.java（我正在使用 ActionBarSherlock）：

```
package com.app.android;

import com.app.android.R;

import android.content.Intent;
import android.os.Bundle;

import com.actionbarsherlock.app.SherlockActivity;

public class SplashActivity extends SherlockActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash);
        getSupportActionBar().hide();
        Thread timerSplash = new Thread(){
            @Override
            public void run() {
                try{
                    int i = 0;
                    while(i < 1000){
                        i+=100;
                        sleep(100);
                    }
                    startActivity(new Intent("com.app.android.MainActivity"));
                }catch(Exception ex){
                }finally{
                    finish();
                }
            }
        };
        timerSplash.start();
    }
} 
```

我面临的是我的 MainActivity 在 SplashActivity 之前启动。还会在 AndroidManifest.xml 的 MainActivity 活动节点处生成警告：**“导出的活动不需要权限”**

任何人都可以说发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:42:47.203

在 Manifast.xml 中定义 Activity：

```
<activity
    android:name=".MainActivity"
    android:label="@string/title_activity_main"
    android:theme="@style/Theme.StyledCustom" >
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

并开始：

```
Intent intent = new Intent();
intent.setComponent(new ComponentName("com.app.android", "com.app.android.MainActivity"));
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:50:13.933

在 Manifast.xml 中：

```
<activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main"
            android:theme="@style/Theme.StyledCustom" >
        </activity> 
```

和类如下

```
public class SplashActivity extends SherlockActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash);
        getSupportActionBar().hide();
        Thread timerSplash = new Thread(){
            @Override
            public void run() {
                try{
                    int i = 0;
                    while(i < 1000){
                        i+=100;
                        sleep(100);
                    }
                   Intent intent = new Intent(SplashActivity.this, MainActivity.class);
                   startActivity(intent);
                }catch(Exception ex){
                }finally{
                    finish();
                }
            }
        };
        timerSplash.start();
    }
} 
```

# python - Hadoop流中损坏的python管道

> ID：11344422
> 
> 赞同：1
> 
> 时间：2012-07-05T12:32:45.000
> 
> 标签：python, hadoop, streaming, subprocess, pipeline

我有一个必须在 hadoop 集群上运行的大规模日志处理问题。任务是将日志的每一行输入一个可执行的“cmd”并检查结果以决定是否保留这一行日志。

由于“cmd”程序打开了一个非常大的字典，我无法为日志的每一行调用该程序。我想保持它运行并向它提供所需的输入。我目前的解决方案使用 python 的 subprocess 模块，这里是代码：

```
import sys
from subprocess import Popen, PIPE

def main():
    pp = Popen('./bqc/bqc/bqc_tool ./bqc/bqc/bqc_dict/ ./bqc/bqc/word_dict/ flag', shell=True, stdin=PIPE, stdout=PIPE, stderr=PIPE)

    for line in sys.stdin:
        lstr = line.strip().split('\t')
        if len(lstr) != 7:
            continue
        pp.stdin.write('%s\n' % lstr[5])
        pp.stdin.flush()
        out = pp.stdout.readline()
        lout = out.strip().split('\t')
        if len(lout) == 3 and lout[1] == '401':
            print line.strip()

if __name__ == '__main__':
    main() 
```

上面的代码在我的本地机器上测试时可以找到。它在将作业提交到 hadoop 时用作映射器。我没有使用减速器，以下是配置。

```
hadoop streaming \
-input /path_to_input \
-output /path_to_output \
-mapper  "python/python2.7/bin/python27.sh ./mapper.py" \
-cacheArchive /path_to_python/python272.tar.gz#python \
-cacheArchive /path_to_cmd/bqc.tar.gz#bqc \
-file ./mapper.py \
-jobconf mapred.job.name="JobName" \
-jobconf mapred.job.priority=HIGH 
```

bqc.tar.gz 中的文件如下所示：

```
bqc/
bqc/bqc_tool
bqc/bqc_dict/
bqc/word_dict/ 
```

在我看来，“-cacheArchive /path_to_cmd/bqc.tar.gz#bqc \”行应该提取tar文件并将它们提取到一个名为bqc的文件夹中。

但是当提交到 hadoop 集群时它会失败，并显示以下错误消息：

```
 Traceback (most recent call last):
      File "./mapper.py", line 19, in
        main()
      File "./mapper.py", line 11, in main
        pp.stdin.write('%s\n' % lstr[5])
    IOError: [Errno 32] Broken pipe
    java.lang.RuntimeException: PipeMapRed.waitOutputThreads(): subprocess failed with code 1
        at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:335)
        at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:590)
        at org.apache.hadoop.streaming.PipeMapper.map(PipeMapper.java:152)
        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:54)
        at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:18)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:388)
        at org.apache.hadoop.mapred.Child.main(Child.java:194)
    java.lang.RuntimeException: PipeMapRed.waitOutputThreads(): subprocess failed with code 1
        at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:335)
        at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:590)
        at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:163)
        at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:61)
        at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:18)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:388)
        at org.apache.hadoop.mapred.Child.main(Child.java:194) 
```

有人知道吗？任何帮助，将不胜感激！

谢谢！

扎卡里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:42:23.663

谜团已揭开！应该是由于hadoop施加的内存限制导致命令无法加载成功。该命令需要大约 2G 内存，hadoop 配置为允许每个节点大约 800MB。

# oracle - 数据泵库

> ID：11344428
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:33:00.677
> 
> 标签：oracle, datapump

我正在开发一个 java 程序，我希望能够导入和导出 oracle 数据泵。

你知道我可以使用的任何图书馆可以让我这样做吗？

另一种选择是用控制台来做，但我不是很热衷于这样做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:04:15.320

有一个封装了数据泵功能的 PL/SQL 包。 [了解更多](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_datpmp.htm)。

# android - Android：从子类向活动发送消息

> ID：11344436
> 
> 赞同：0
> 
> 时间：2012-07-05T12:33:31.087
> 
> 标签：android, android-activity, broadcastreceiver

我有以下自定义 MapView，每次缩放地图时都会记录“ZOOMED”。

```
import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.util.Log;
import com.google.android.maps.MapView;

public class CustomMapView extends MapView{

    int oldZoomLevel=0;

    public CustomMapView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);
        if (getZoomLevel() != oldZoomLevel) {
            Log.i("EOH", "ZOOOMED");

            oldZoomLevel = getZoomLevel();
        }

    }
} 
```

这是我的 onCreate(...) 活动的一个片段：

```
...
mapView = (CustomMapView) findViewById(R.id.map);
mapView.setBuiltInZoomControls(true);
mapOverlays = mapView.getOverlays();
... 
```

现在如何将“ZOOMED”消息添加到我的活动中？！一旦用户缩放，我想刷新地图图标的位置......

我试过看广播接收器，但我不确定这是解决方法吗？

提前谢谢了，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:45:48.647

您可以在`CustomMapView`课堂上编写一个简单的侦听器：

```
public class CustomMapView extends MapView{

    public interface MapZoomListener {

        public void onZoom();
    }

    private MapZoomListener mListener;

    public void setZoomListener(MapZoomListener listener){
        mListener = listener;
    }

    // ... 

    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);
        if (getZoomLevel() != oldZoomLevel) {
            Log.i("EOH", "ZOOOMED");
            mListener.onZoom();
            oldZoomLevel = getZoomLevel();
        }
    }
} 
```

在您的活动中

```
...
mapView = (CustomMapView) findViewById(R.id.map);
mapView.setZoomListener(new CustomMapView.MapZoomListener {
    public void onZoom(){
        // Your logic here
    }
});
mapView.setBuiltInZoomControls(true);
mapOverlays = mapView.getOverlays();
... 
```

# javascript - 将对象传递给 for 循环

> ID：11344447
> 
> 赞同：0
> 
> 时间：2012-07-05T12:33:56.073
> 
> 标签：javascript, jquery

我有一个 for 循环，它通过数据属性通过一系列 li 运行。

我希望每组 Lis 有一个交错淡入。这工作正常，直到我把动画放在一个`setTimeout`. 它不是循环遍历每个 li，而是停留在数字 5 上。

JS：

```
for (i=0;i<6;i++) {
console.log(thisI);
var thisLi = $("li[data-order='"+i+"']");

setTimeout(function() {
TweenMax.to(thisLi,0.4, {css:{opacity:1}});
},200*i);

} 
```

html

```
 <li data-order="1">sometext</li>
 <li data-order="1">sometext</li>
 <li data-order="2">sometext</li>
 <li data-order="3">sometext</li>
 <li data-order="2">sometext</li>
 <li data-order="3">sometext</li> 
```

CSS

```
li {
    opacity:0;
} 
```

`console.log(thisLi);`这是我在里面时的 chromes 日志`setTimeout`：

`<li data-order=​"5" style=​"opacity:​ 0.11640000000000006;​ ">​…​&lt;/li>​ , <li data-order=​"5" style=​"opacity:​ 0.11640000000000006;​ ">​…​&lt;/li>​ ]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T12:37:30.387

到`setTimeout`回调执行时，循环已经完成，因此`i`已达到最大值。您可以使用闭包来捕获`i`每次迭代的值：

```
for (i = 0; i < 6; i++) {
    (function (i) {
        var thisLi = $("li[data-order='" + i + "']");
        setTimeout(function () {
            TweenMax.to(thisLi, 0.4, { css: { opacity:1 } });
        }, 200 * i);
    }(i));
} 
```

旁注：如果您没有在`i`其他地方声明，那么它就会泄漏到全局范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:40:12.237

我认为您对变量 thisLi 的范围有疑问。尝试像这样创建一个闭包：

```
var thisLi = $("li[data-order='"+i+"']");
var f = function() {TweenMax.to(thisLi,0.4, {css:{opacity:1}});};

setTimeout(f,i*200); 
```

# firefox - 运行 MTAF 时使用 selenium server 2.24.1 和 firefox 13 截屏

> ID：11344450
> 
> 赞同：1
> 
> 时间：2012-07-05T12:34:04.997
> 
> 标签：firefox, magento, testing, selenium, automation

我正在尝试设置我的测试自动化引擎。不幸的是，当我运行测试并失败时，没有截屏。我在日志中找不到任何错误，告诉我出了什么问题。

我正在使用：Magento Community 1.7.0.0、Selenium-server 2.24.1、Firefox 13.0.1、PHPUnit 3.6.11、Magento 测试自动化框架（最新版本）。Ubuntu 12.04

我的问题是：1.如何诱导问题出在哪里？2\. 有没有人在那个firefox和selenium版本的截图上成功了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:30:09.360

我写了没有magento taf的简单测试，它必须失败：

```
class WebTest extends PHPUnit_Extensions_SeleniumTestCase
{
    protected $captureScreenshotOnFailure = TRUE;
    protected $screenshotPath = '/home/lpp2/Pulpit/report/';
    protected $screenshotUrl = '/home/lpp2/Pulpit/report/';

  protected function setUp()
  {
    $this->setBrowser("*chrome");
    $this->setBrowserUrl("http://www.google.pl/");
  }

  public function testMyTestCase()
  {
    $this->open("http://www.google.pl/");
    $this->click("id=gbi4t");
    $this->waitForPageToLoad("30000");
    $this->type("id=Email", "user.name");
    $this->type("id=Passwd", "pass");
    $this->click("id=signIn");
    $this->waitForPageToLoad("30000");
    $this->assertEquals("Google", $this->getTitle());
  }
}
?> 
```

我的 phpunit.xml：

```
<phpunit>
  <testsuites>
    <testsuite name="Google">
      <file>google.php</file>
    </testsuite>
  </testsuites>
 <logging>
        <log type="coverage-html" target="./report/coverage/" charset="UTF-8"
         yui="true" highlight="false"
         lowUpperBound="35" highLowerBound="70"/>
        <log type="plain" target="./report/logfile.txt"/>
        <log type="junit" target="./report/logfile.xml" logIncompleteSkipped="false"/>
    </logging>
</phpunit> 
```

得到格栅截图。所以问题出在magento taf上。有些东西是禁用的。我在 .../magento_taf/lib/Mage/Selenium/TestCase.php 树行中找到了评论：

```
protected $captureScreenshotOnFailure = TRUE;
protected $screenshotPath = SELENIUM_TESTS_SCREENSHOTDIR;
protected $screenshotUrl = SELENIUM_TESTS_SCREENSHOTDIR; 
```

取消注释->仍然无法正常工作！

编辑：好的，我已经从 github 下载了最新版本，现在它可以工作了。

# iphone - UITextView 自动完成文本不是我订购的

> ID：11344461
> 
> 赞同：3
> 
> 时间：2012-07-05T12:34:32.877
> 
> 标签：iphone, ios, ipad

我有一个用于自动完成`UITextView`的连接。`UITableView`

问题是表格显示格式不正确，我有以下问题：

1.  详细信息不按顺序排列（例如：如果我按 a 它不显示以第一个开头的单词，它会随意显示）。

2.  我的 txt 文件中有三种单词（如 Apple、A pple、A.pple）；在我的表格中，如果我用字母“Ap”开始搜索，它只显示 A pple 和 A.pple，但不显示 Apple，即使它显示 A pple，直到我写“A P”然后它停止显示单词。

任何人都可以让我知道该怎么做吗？

请找到我的代码供您参考：

抱歉发布所有代码，我这样做是因为我找不到它出错了！！！

```
- (void) finishedSearching {
    [usernameField resignFirstResponder];
    autoCompleteTableView.hidden = YES;
}

- (void)viewDidLoad
{
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"employee.txt" ofType:nil];
    NSData* data = [NSData dataWithContentsOfFile:filePath];
    //Convert the bytes from the file into a string
    NSString* string = [[NSString alloc] initWithBytes:[data bytes] length:[data length] encoding:NSUTF8StringEncoding];

    //Split the string around newline characters to create an array
    NSString* delimiter = @"\n";
    NSArray *item = [string componentsSeparatedByString:delimiter];
    elementArray = [[NSMutableArray alloc] initWithArray:item];
    usernameField = [[UITextField alloc] initWithFrame:CGRectMake(204, 405, 264, 31)];
    usernameField.borderStyle = 3; // rounded, recessed rectangle
    usernameField.autocorrectionType = UITextAutocorrectionTypeNo;
    usernameField.autocapitalizationType = UITextAutocapitalizationTypeNone;
    usernameField.textAlignment = UITextAlignmentLeft;
    usernameField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    usernameField.returnKeyType = UIReturnKeyDone;
    usernameField.font = [UIFont fontWithName:@"Trebuchet MS" size:20];
    usernameField.textColor = [UIColor blackColor];
    usernameField.placeholder=@"Login id";
    [usernameField setDelegate:self];
    [self.view addSubview:usernameField];

    autoCompleteArray = [[NSMutableArray alloc] init];
    autoCompleteTableView = [[UITableView alloc] initWithFrame:CGRectMake(204, 450, 264, tableHeight) style:UITableViewStylePlain];
    autoCompleteTableView.delegate = self;
    autoCompleteTableView.dataSource = self;
    autoCompleteTableView.scrollEnabled = YES;
    autoCompleteTableView.hidden = YES; 
    autoCompleteTableView.rowHeight = tableHeight;
    [self.view addSubview:autoCompleteTableView];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}
- (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring {

    // Put anything that starts with this substring into the autoCompleteArray
    // The items in this array is what will show up in the table view

    [autoCompleteArray removeAllObjects];

    for(NSString *curString in elementArray) {
        NSRange substringRangeLowerCase = [curString rangeOfString:[substring lowercaseString]];
        NSRange substringRangeUpperCase = [curString rangeOfString:[substring uppercaseString]];
        if (substringRangeLowerCase.length != 0 || substringRangeUpperCase.length != 0) {
            [autoCompleteArray addObject:curString];
        }
    }
    autoCompleteTableView.hidden = NO;
    [autoCompleteTableView reloadData];
}
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [self.view endEditing:YES];
    [super touchesBegan:touches withEvent:event];
    [self finishedSearching];
}

#pragma mark UITextFieldDelegate methods

// Close keyboard when Enter or Done is pressed
- (BOOL)textFieldShouldReturn:(UITextField *)textField {    
    BOOL isDone = YES;

    if (isDone) {
        [self finishedSearching];
        return YES;
    } else {
        return NO;
    }   
} 

// String in Search textfield
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSString *substring = [NSString stringWithString:textField.text];
    substring = [substring stringByReplacingCharactersInRange:range withString:string];
    [self searchAutocompleteEntriesWithSubstring:substring];
    return YES;
}

#pragma mark UITableViewDelegate methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger) section {

    //Resize auto complete table based on how many elements will be displayed in the table
    if (autoCompleteArray.count >=3) {
        autoCompleteTableView.frame = CGRectMake(204, 450, 264, tableHeight*3);
        return autoCompleteArray.count;
    }

    else if (autoCompleteArray.count == 2) {
        autoCompleteTableView.frame = CGRectMake(204, 450, 264, tableHeight*2);
        return autoCompleteArray.count;
    }   

    else {
        autoCompleteTableView.frame = CGRectMake(204, 450, 264, tableHeight);
        return autoCompleteArray.count;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = nil;
    static NSString *AutoCompleteRowIdentifier = @"AutoCompleteRowIdentifier";
    cell = [tableView dequeueReusableCellWithIdentifier:AutoCompleteRowIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:AutoCompleteRowIdentifier] ;
    }

    cell.textLabel.text = [autoCompleteArray objectAtIndex:indexPath.row];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    usernameField.text = selectedCell.textLabel.text;
    usernameField.text=[usernameField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

    NSLog(@"%@",usernameField.text);
    [self finishedSearching];
}

- (void)viewDidUnload
{

    [super viewDidUnload];
    // Release any retained subviews of the main view.
} 
```

提前致谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:40:26.713

遵循此代码..您已正确完成所有操作，但搜索元素是问题所在。你已经写了代码。如果您单独检查长度。如果它不为空，它将显示数据。但是您必须将第一个字母与元素数组进行比较。使其正常工作。

```
- (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring {
    [autocompleteArray removeAllObjects];

    for(NSString *curString in elementArray) {
        NSRange substringRange = [curString rangeOfString:substring];
        if (substringRange.location == 0) {            
            [autocompleteArray addObject:curString];          
        }        

        [autocompleteTableView reloadData];
    }
} 
```

# php - HTML Purifier 过滤入站或出站或两者兼而有之？

> ID：11344462
> 
> 赞同：1
> 
> 时间：2012-07-05T12:34:34.627
> 
> 标签：php, mysql, htmlpurifier

我刚刚开始使用 HTML Purifier [http://htmlpurifier.org](http://htmlpurifier.org)过滤来自所见即所得编辑器的内容。内容将显示回用户或同一组中的其他用户。系统上还有其他组，数据完整性非常重要。

我正在使用 PHP，内容存储在 MySQL 数据库中。

HTML Purifier 使用了大量的处理器能力，所以我只想在入站内容上使用它，并直接从数据库中显示出站内容，而不需要任何过滤器。听起来很简单，它已被过滤，所以它应该是安全的，但我不是 100% 确定，它安全吗？

入站 'p[style],strong,em,u,h1,h2,h3,h4,h5,h6,li,ol,ul,span[style],div[style],br,ins,del' 的允许列表

编辑：我发现该网站建议在[http://htmlpurifier.org/docs/enduser-slow.html](http://htmlpurifier.org/docs/enduser-slow.html)上执行此操作，但由于重要性很高，我想在这里提出一些意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:53:31.140

当您将输入发送到数据库时对其进行清理，否则您将遇到每秒几页浏览量的大麻烦，因为这是一个 CPU 密集型步骤。

但是，您必须确保数据库中的每一行都经过清理，否则有一天您会将自己暴露给 XSS（检查每个编辑或添加条目的请求，并考虑数据库中现有的行）。

小提示：如果您负担得起空间，请存储已消毒和未消毒的输入。如果有一天，您必须更改参数中的某些内容，或者 HTMLPurifier 有一个主要的 0 天，您将能够更新整个表格。但是，如果你有一天这样做，要对效果非常谨慎；）

编辑：通过允许样式来确定你在做什么，或者只允许几个 CSS 样式......

# iphone - 图像已被捕获或相机尚未准备好

> ID：11344470
> 
> 赞同：1
> 
> 时间：2012-07-05T12:35:01.480
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller

我调用此`takePicture`函数 5 次，因为我需要在点击时拍摄 5 张照片（连拍模式）

```
for(count=0;count<5;count++)
{
     [picker takePicture];
     [NSThread sleepForTimeInterval:0.5];
     [[NSRunLoop currentRunLoop] runMode: NSDefaultRunLoopMode beforeDate: [NSDate date]];
} 
```

我收到此错误`UIImagePickerController: ignoring request to take picture; image is already being captured or camera not yet ready`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:41:05.480

不确定，但我认为相机还没有准备好......因为你正在尝试连续捕捉图像......我认为你必须延迟几秒钟才能再次调用拍照方法......不要这样做循环我想建议你请使用`NSTimer`而不是循环。

像这样的东西 -

宣布

```
-(void)startTimer; 
```

和

```
int count; 
```

在您的 .h 类中，然后查看以下代码 -

```
-(void)yourTakePictureButtonClick:(id)sender
{
    [self startTimer];
}

-(void)startTimer
{
    count = 0;
    yourTimer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(myFunctionForClickImage) userInfo:nil repeats:YES];
}

-(void)myFunctionForClickImage
{
    [picker takePicture];
    count ++;
    if (count < 5)
    {
       [yourTimer invalidate];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:41:14.700

嗨 H2SO4（好名字 han）

最可能的原因似乎是 info.plist 文件中缺少所需的密钥。您将需要配置`UIRequiredDeviceCapabilities`. 此外，您必须实现委托对象。有关详细信息，请查看

[http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Articles/TakingPicturesAndMovies.html#//apple_ref/doc/uid/TP40010406](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Articles/TakingPicturesAndMovies.html#//apple_ref/doc/uid/TP40010406)。

高温下，

另一件事你应该在循环内的每个调用中释放你的资源。

您可以延迟以下。

```
[picker performSelector:@selector(takePicture) withObject:nil afterDelay:2.0]; 
```

更多您可以访问...

[http://highoncoding.com/Articles/856_Building_Instagram_for_the_iPhone_Part_2.aspx](http://highoncoding.com/Articles/856_Building_Instagram_for_the_iPhone_Part_2.aspx)

# c# - 如何使用 Html.ActionLink

> ID：11344477
> 
> 赞同：0
> 
> 时间：2012-07-05T12:35:24.677
> 
> 标签：c#, asp.net-mvc

我有一个页面，其中包含以下代码：

```
Html.ActionLink("Hi", "Hi", new { controller = "Home", action = "TD", id = "123" }) 
```

我现在将此代码移动到 web 服务 (.asmx) 并且上面的代码不起作用。

我试过使用：

`System.Web.Mvc.Html.LinkExtensions.ActionLink`

但这需要一个参数`this HtmlHelper htmlHelper`。我试过传递 null 但这不起作用。

你能告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:52:19.690

```
 @Html.ActionLink("HeadingYouWantToProvide", "ViewYouWantToShow", "YourControllerYouwant", null, new {id="IdyouwanttoPass"} 
```

所以

```
@Html.ActionLink("Hi","TD","Home",null, new {id="123"}) 
```

# android - 选项卡加载互联网数据，因此显示速度很慢......如何预处理加载？

> ID：11344480
> 
> 赞同：0
> 
> 时间：2012-07-05T12:35:38.167
> 
> 标签：android

我的 android 应用程序有 4 个选项卡。在一个选项卡中，当我单击它时，它会从网络加载 Twitter 数据。这意味着加载显示最多需要 7 秒。我调用的函数是 getTwitterData(); 我如何在启动画面中预处理这一步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:38:14.127

您可以`Thread`在标签活动中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:59:22.550

*   为了获得更好的用户体验，您需要使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)从互联网下载动态数据
*   即使您在启动画面中下载数据，用户也不会一直获得实时数据

所以在选项卡上单击，使用下面的代码段从服务器下载数据

```
private class DownloadData extends AsyncTask<Void, Void, Void> {

    ProgressDialog pd = null;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pd = new ProgressDialog(BrokerListActivity.this);
        pd.setTitle("Downloading...");
        pd.setMessage("Please wait...");
        pd.setCancelable(false);
        pd.show();

    }

    @Override
    protected Void doInBackground(Void... params) {

        // download data here
    }

    @Override
    protected void onPostExecute(Void status) {
        super.onPostExecute(status);
        pd.dismiss();

        // update UI here
    }

} 
```

并在您的选项卡中调用使用此 AsyncTask 单击如下

```
new DownloadData().execute(); 
```

# c# - C# WPF 模糊像素

> ID：11344487
> 
> 赞同：0
> 
> 时间：2012-07-05T12:36:28.113
> 
> 标签：c#, wpf, drawing

我必须编写在 WPF 中设置像素的函数。我需要画一些图片。使用附加代码我有一些模糊的效果（比如在屏幕上）。

你能告诉我出了什么问题，或者我应该使用哪些方法吗？

```
namespace DisplayAppCS {

public partial class MainWindow : Window
{

    WriteableBitmap _bitmap = new WriteableBitmap(100, 200, 1, 1, PixelFormats.Bgr32, null);

    public MainWindow()
    {
        InitializeComponent();
        image1.SnapsToDevicePixels = true;
        image1.Source = _bitmap;

        int[] ColorData = { 0xFFFFFF }; // B G R

        Int32Rect rect = new Int32Rect(
                1,
                60,
                1,
                1);

        _bitmap.WritePixels(rect, ColorData, 4, 0);

    }
}} 
```

![像素模糊效果](../Images/5ae4ccd5f011d868687b5a17252f95cc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:44:17.523

您的位图是 100x200，但您的窗口要大得多。您的图像被拉伸到窗口大小，从而产生“模糊”效果。您需要更改窗口的大小或告诉图像不要拉伸：

```
<Image Stretch="None"/> 
```

也就是说，您可能会使用可写位图完全走错路。这真的取决于你的要求。例如，您能否只使用内置的 WPF 形状？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:40:52.393

您可以尝试使用[SnapToDevicePixels](http://msdn.microsoft.com/en-us/library/system.windows.uielement.snapstodevicepixels.aspx)属性。

# git - 远程与亚历史？

> ID：11344488
> 
> 赞同：0
> 
> 时间：2012-07-05T12:36:32.797
> 
> 标签：git

我有一个历史悠久的私人 git 仓库。现在我想添加一个公共远程（github），没有这么长的历史，但从一个特定的标签开始（当然是为了隐藏我所有初学者的错误）。

从这里开始，我想在私有存储库上进行开发，并且只是偶尔同步一下。

我明白：

```
git remote add gh git://....
git push gh master 
```

但这会将整个历史推向公共回购。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:25:28.133

这是你应该做的：

```
git checkout --orphan empty-branch starting_tag
git commit -a -m "My first commit, yet everything is here" 
```

它将创建一个名为 empty-branch 的新分支，没有父分支，文件来自`starting_tag`. `starting_tag`如果您想从`HEAD`.

您可以在**git-checkout** (1) 手册页中查看它。

# c++ - STM_SETIMAGE 不会使静态控件无效/重绘

> ID：11344489
> 
> 赞同：2
> 
> 时间：2012-07-05T12:36:38.430
> 
> 标签：c++, winapi

谁能告诉我在使用 STM_SETIMAGE 消息更改位图后静态控件不使其区域无效是否正常？

我用的是一个SS_BITMAP风格的静态控件，我用下面的代码设置了它的图片

```
 HBITMAP DestBmp;
    // Paint on DestBmp...

    HBITMAP hOldBmp = (HBITMAP) ::SendMessage(hStatic, STM_SETIMAGE, IMAGE_BITMAP, (LPARAM) DestBmp);
    if (hOldBmp)
        DeleteObject(hOldBmp);

    // *** Why do I need this? ***
    ::InvalidateRect(hStatic, NULL, FALSE); 
```

如果我不调用 InvalidateRect，则静态控件不会重新绘制自身。这是 STM_SETIMAGE 的正常行为，还是我做错了什么？[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760782%28v=vs.85%29.aspx)上的文档没有提到需要在 STM_SETIMAGE 之后调用 InvalidateRect 的任何内容，而且这很奇怪，例如，您不需要在 SetWindowText 之后调用 InvalidateRect。这让我觉得我的代码可能有问题。

* * *

**更新**

这就是在我的 .rc 文件中定义控件的方式

```
CONTROL         "",IDC_IMAGE_PREVIEW,"Static",SS_BITMAP | NOT WS_VISIBLE,29,293,15,13 
```

`NOT WS_VISIBLE`标志不是问题，稍后我使控件可见`ShowWindow(SW_SHOW);`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-13T10:41:36.257

由于还没有真正的解释，而且问题是获得意见，我将在此处添加我的解决方法。调用`InvalidateRect()`以强制控件重新绘制。

```
HBITMAP hOldBmp = (HBITMAP) ::SendMessage(hStatic, STM_SETIMAGE, IMAGE_BITMAP, (LPARAM) DestBmp);
.....
::InvalidateRect(hStatic, NULL, FALSE); 
```

# android - Android：微调器选择向左对齐

> ID：11344492
> 
> 赞同：4
> 
> 时间：2012-07-05T12:36:48.023
> 
> 标签：android, layout, spinner, arabic, gravity

我完成了我的应用程序的英文版，现在我正在处理阿拉伯语本地化。阿拉伯语是一种从右到左的语言，因此我需要调整布局中的很多内容，包括微调器显示。

当我从微调器选择菜单中选择一个项目时，我看到以下内容，

![微调器选择](../Images/666f55ac6e825bebd9ec0a82265dbc0a.png)

如您所见，“过敏”位于微调箭头的左侧和顶部。我需要它向右对齐。

**注意**阿拉伯语的网络服务还没有完成，这就是为什么图像中的数据仍然是英文的。

**编辑**

```
Spinner mSpecialtySpinner = (Spinner) findViewById(R.id.specialty_appointment_spinner);
        ArrayAdapter<Specialty> adapter = new ArrayAdapter<Specialty>(AppointmentReservationActivity.this,android.R.layout.simple_spinner_item, specialities);
        adapter.setDropDownViewResource(R.layout.spinner_item);
        mSpecialtySpinner.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T14:33:22.093

好吧，您可以为 Spinner 设置另一个布局并将其传递给`ArrayAdapter's`构造函数。

`spinner_layout.xml`在布局中创建一个 xml 文件命名，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1" 
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:layout_width="fill_parent"
    android:textSize="20sp"
    android:paddingLeft="6dip"
    android:paddingRight="6dip" 
    android:gravity="right"
     /> 
```

现在`ArrayAdapter's`像这样在构造函数中传递它：

```
new ArrayAdapter<String>(this,R.layout.spinner_layout,conversionsadd); 
```

请记住：

我们`R.layout.spinner_layout`在`ArrayAdapter`构造函数中提供的是 Spinner 的布局。我们将提供的`setDropdownView()`是 Spinner 项目（下拉项目）。

您可以在[这里查看我的另一个相对答案](https://stackoverflow.com/a/8921087/593709)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:05:59.907

您需要做的就是创建一个新的微调器下拉布局并`android:gravity="right"`在适当的小部件上进行设置。

调用它：

```
yourSpinner.setDropDownViewResource(R.layout.right_aligned_spinner_dropdown_item); 
```

# bundle - 最佳 Symfony 2 (2.1+) 论坛捆绑包

> ID：11344497
> 
> 赞同：10
> 
> 时间：2012-07-05T12:37:01.567
> 
> 标签：bundle, forum, symfony-2.1

我正在寻找 Symfony2 论坛捆绑包，它是：

1.  在职的
2.  没死
3.  支持科幻 2.1

有人知道这样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T16:02:11.977

看看这个：

[http://packagist.org/packages/herzult/forum-bundle](http://packagist.org/packages/herzult/forum-bundle)

它最近已更新，并且已准备好 symfony 2.1。您可以通过composer安装它。

还可以检查[http://packagist.org/packages/friendsofsymfony/comment-bundle](http://packagist.org/packages/friendsofsymfony/comment-bundle)，它允许您将线程功能连接到您的 symfony 应用程序。

您可以随时查看[http://packagist.org](http://packagist.org)以获得 symfony 2.1 就绪包；）

如果您在安装这些时有任何问题，请随时询问。

# sql-server - 查询在 SQL 中运行不到一毫秒，但在实体框架中超时

> ID：11344499
> 
> 赞同：16
> 
> 时间：2012-07-05T12:37:10.957
> 
> 标签：sql-server, entity-framework

以下 linq-to-entities 查询抛出

> 实体框架超时已过期。在操作完成之前超时时间已过或服务器没有响应。

在 ToList() 之后。

```
 var q = (from contact 
          in cDB.Contacts.Where(x => x.Templategroepen.Any(z => z.Autonummer == templategroep.Autonummer) 
                                && !x.Uitschrijvings.Any(t => t.Templategroep.Autonummer == templategroep.Autonummer)) 
          select contact.Taal).Distinct(); 
```

`((System.Data.Objects.ObjectQuery)q).ToTraceString()`给我：

```
SELECT 
[Distinct1].[Taal] AS [Taal]
FROM ( SELECT DISTINCT 
[Extent1].[Taal] AS [Taal]
FROM [dbo].[ContactSet] AS [Extent1]
WHERE ( EXISTS (SELECT 
1 AS [C1]
FROM [dbo].[TemplategroepContact] AS [Extent2]
WHERE ([Extent1].[Autonummer] = [Extent2].[Contacts_Autonummer]) AND ([Extent2].[Templategroepen_Autonummer] = @p__linq__0)
)) AND ( NOT EXISTS (SELECT 
1 AS [C1]
FROM [dbo].[UitschrijvingenSet] AS [Extent3]
WHERE ([Extent1].[Autonummer] = [Extent3].[Contact_Autonummer]) AND ([Extent3].[Templategroep_Autonummer] = @p__linq__1)
))
)  AS [Distinct1] 
```

来自跟踪字符串的查询在 sql management studio 中运行时间不到 1 秒，但在实际列出时超时？这怎么可能呢？

**更新：为查询添加了 SQL PROFILER 输出 ** 这与 EF ToList() 一样慢（>30 秒）

```
exec sp_executesql N'SELECT 
[Distinct1].[Taal] AS [Taal]
FROM ( SELECT DISTINCT 
    [Extent1].[Taal] AS [Taal]
    FROM [dbo].[ContactSet] AS [Extent1]
    WHERE ( EXISTS (SELECT 
        1 AS [C1]
        FROM [dbo].[TemplategroepContact] AS [Extent2]
        WHERE ([Extent1].[Autonummer] = [Extent2].[Contacts_Autonummer]) AND ([Extent2].[Templategroepen_Autonummer] = @p__linq__0)
    )) AND ( NOT EXISTS (SELECT 
        1 AS [C1]
        FROM [dbo].[UitschrijvingenSet] AS [Extent3]
        WHERE ([Extent1].[Autonummer] = [Extent3].[Contact_Autonummer]) AND ([Extent3].[Templategroep_Autonummer] = @p__linq__1)
    ))
)  AS [Distinct1]',N'@p__linq__0 int,@p__linq__1 int',@p__linq__0=1,@p__linq__1=1 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-12-22T20:42:01.467

我在 EF6 中观察到了这个问题。

`await _context.Database.SqlQuery<MyType>(sql)`即使我的超时值增加到 60 秒，它也会超时。但是，在 SSMS 中执行完全相同的 SQL（使用分析器确认我传入的 sql 未修改）在一秒钟内产生了预期的结果。

执行 sp_updatestats

为我解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:27:11.640

```
(DBCC FREEPROCCACHE)
DBCC DROPCLEANBUFFERS 
```

暂时解决了这个问题，但我认为这可能只是一个临时工。解决方案

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T23:33:47.500

我知道这有点晚了，但我在[这里](https://stackoverflow.com/a/693734/803349)找到了答案。

基本上，Entity Framework 喜欢默认跟踪所有内容。如果您不需要它（即不插入、更新或删除实体），请将其关闭以加快查询速度。

如果您首先使用实体​​框架代码，则可以这样实现：

```
var q = (from contact
      in cDB.Contacts.AsNoTracking()
          .Where(x => x.Templategroepen.Any(z => z.Autonummer == templategroep.Autonummer) 
                            && !x.Uitschrijvings.Any(t => t.Templategroep.Autonummer == templategroep.Autonummer)) 
      select contact.Taal).Distinct(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-21T11:48:10.397

我对 EF6 有类似的问题。在 EF 中使用 SqlQuery 函数时，尽管在 Management Studio 中以毫秒为单位执行了查询，但我得到了超时。我发现它是由于我在 EF 查询中使用的一个 sql 参数的值而发生的。为了清楚起见，下面是我遇到的类似 SQL 查询。

```
SELECT * FROM TBL WHERE field1 > @p1 AND field2>@p2 AND field3<@p3 
```

当@p1 为零时，我收到超时异常。当我将其设为 1 或其他内容时，它会在几毫秒内执行。顺便说一句，我查询的表有超过 20M 行。

我希望它有帮助，最好的

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-06-07T02:52:28.550

您需要添加一列作为唯一 ID 或键才能在 EF 中工作

# delphi - 用 GDI+ 替换 StretchDIBits（在将图像绘制到打印机的画布 时）

> ID：11344504
> 
> 赞同：2
> 
> 时间：2012-07-05T12:37:23.307
> 
> 标签：delphi, winapi, image-processing, gdi+, delphi-6

我的应用程序是在 Delphi 6 中开发的。由于后台处理和大量数据（它消耗大约 60MB - 120MB 的物理内存），这是一个资源密集型应用程序。此应用程序的功能之一是创建条形码图像并打印它们。如果用户继续生成条码，那么至少十分之一的条码中有缺失的行。

我能够使用 TExcellenImagePrinter 组件解决此问题。但是，它大大降低了性能。此解决方案被我的客户拒绝，因此，现在我尝试用 GDI+ 替换 WinAPI StretchDIBits 调用。

原始源代码如下：

```
procedure PrintBitmap(ARect:TRect; Bitmap:TBitmap);
var
   Info: PBitmapInfo;
   InfoSize: dword{Integer};
   Image: Pointer;
   ImageSize: dword{ integer};
   iWidth,iHeight :integer;
   iReturn : integer ;
begin
   GetDIBSizes(Bitmap.handle,InfoSize,ImageSize);
   if (LoadDIBFromTBitmap(Bitmap,Pointer(Info),Image,iWidth,iHeight)) then
   begin
        SetStretchBltMode(Printer.Canvas.handle,STRETCH_HALFTONE);
        SetBrushOrgEx(Printer.Canvas.handle, 0, 0, NIL);
        iReturn := StretchDIBits(Printer.Canvas.Handle, ARect.Left, ARect.Top,
            ARect.Right - ARect.Left, ARect.Bottom - ARect.Top,
            0, 0, Info^.bmiHeader.biWidth,
            Info^.bmiHeader.biHeight, Image, Info^,DIB_RGB_COLORS, SRCCOPY);
   end;
   FreeMemEx(Info);
   FreeMemEx(Image);
end; 
```

正如乔在 embarcadero 论坛 ( [https://forums.embarcadero.com/thread.jspa?messageID=471501#471501](https://forums.embarcadero.com/thread.jspa?messageID=471501#471501)中所建议的那样，我从 ( [http://www.progdigy.com/?page_id=7](http://www.progdigy.com/?page_id=7) ) 获得了 GDI+ 标头）。

我修改了我的源代码如下：

*   创建了一个 TGPGraphics 类的对象并将打印机的句柄分配给它。

    gp := TGPGraphics.Create(Printer.Canvas.Handle);

*   创建了一个 TGPBitmap 类的对象并将条形码图像分配给它。

    bmp := TGPBitmap.Create(Info^,Image);

    Info 是 TBitmapInfo 并且 Image 是一个指针。

*   将打印机的尺寸分配给TGPRect 记录的实例**矩形**
*   调用 DrawImage 函数：

    gp.DrawImage(bmp,rect);

但是，在进行这些更改后，打印机的输出中会显示空白图像。你能指出我是否遗漏了什么或者我的实施是错误的。你能提供任何关于这方面的指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:54:16.510

我发现以下代码演示了从 dib 创建兼容位图 (DBB)。那应该对你有用。也许它可以写得更好，但总而言之，它只是工作......至少对我来说......

```
procedure PRPrintBitmapOnCanvas(Canvas: TMetafileCanvas; Bitmap: TBitmap; posLeft, posTop: Integer);
var
  lpbmih: TBitmapInfoHeader;
  lpbmi: TBitmapInfo;
  aBitmap: HBITMAP;
  aDC: LongWord;
begin
  Fillchar(lpbmih, SizeOf(lpbmih), 0);
  lpbmih.biSize := SizeOf(lpbmih);
  lpbmih.biWidth := bitmap.width;
  lpbmih.biHeight := bitmap.height;
  lpbmih.biPlanes := 1;
  lpbmih.biBitCount := 32;
  lpbmih.biCompression := BI_RGB;

  Fillchar(lpbmi, SizeOf(lpbmi), 0);
  lpbmi.bmiHeader.biSize := SizeOf(lpbmi.bmiHeader);
  lpbmi.bmiHeader.biPlanes := 1;
  lpbmi.bmiHeader.biBitCount := 32;
  lpbmi.bmiHeader.biCompression := BI_RGB;

  aBitmap := CreateDIBitmap(Canvas.Handle, lpbmih, 0, nil, lpbmi, DIB_RGB_COLORS);
  if aBitmap = 0 then RaiseLastOSError;
  try
    aDC := CreateCompatibleDC(Canvas.Handle);
    SelectObject(aDC, aBitmap);

    BitBlt(aDC, 0, 0, bitmap.Width, bitmap.Height, bitmap.Canvas.Handle, 0, 0, SRCCOPY);
    BitBlt(canvas.handle, posLeft, posTop, bitmap.Width, bitmap.Height, aDC, 0, 0, SRCCOPY);

    DeleteDC(aDC);
  finally
    DeleteObject(aBitmap)
  end;
end; 
```

# objective-c - 如何以编程方式在 navigationController 堆栈中导航？

> ID：11344510
> 
> 赞同：1
> 
> 时间：2012-07-05T12:37:43.613
> 
> 标签：objective-c, ios, xcode

我只是想知道如何以编程方式在 navigationController 堆栈中导航？

我熟悉的方法：

```
 [self.navigationController popToRootViewControllerAnimated:YES]; 
```

也：

```
 [self.navigationController popViewControllerAnimated:YES]; 
```

但是可以以编程方式转到我的导航控制器中的任何视图控制器吗？

请看我的照片：

[http://s18.postimage.org/iq1l4f721/test_xcodeproj_Main_Storyboard_storyboard.jpg](http://s18.postimage.org/iq1l4f721/test_xcodeproj_Main_Storyboard_storyboard.jpg)？

我知道我可以使用情节提要转到任何视图，但我认为这会不断将新视图推入堆栈并最终（理论上）我会遇到问题，这是否正确？

谢谢

卡尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:48:02.110

是的，如果您知道堆栈中控制器的索引或者您有对它的引用。像这样： `[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:index] animated:TRUE];`

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:51:47.477

你有没有尝试过

```
for (UIViewController * viewController in self.navigationController.viewControllers) {
    if ([viewController isKindOfClass:[Number2Class class]]) {
        [self.navigationController popToViewController:viewController animated:YES];

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:50:19.967

使用此代码导航到所需的视图控制器

```
NSArray *vcs = self.navigationController.viewControllers;
    for (UIViewController *cont in vcs) {
        if([cont class] == [YOUR_VIEWCONTROLLER_NAME class])
        {
            NSLog(@"Class Found");
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T12:53:53.430

1.  你读过[`UINavigationController`类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)吗？

2.  `UINavigationController`有*属性* `NSArray *viewControllers`，它保存当前的视图控制器堆栈（历史）。

3.  `setViewControllers:animated:`- 用指定的项目替换当前由导航控制器管理的视图控制器。（覆盖历史）

4.  `popToViewController:animated:`- 弹出视图控制器，直到指定的视图控制器位于导航堆栈的顶部。（在这里您需要传递一个存在于历史记录中的实例 -*见上文*）

5.  回到#1...

# linux - 缓存的谷歌地图最初在浏览器中显示很小

> ID：11344516
> 
> 赞同：0
> 
> 时间：2012-07-05T12:38:15.050
> 
> 标签：linux, qt, google-maps

这是来自软件的缓存地图：`ogmaps`

请仔细查看此处主窗口地址栏下方的小阴影。 ![在此处输入图像描述](../Images/e798f804f67502e21a86e983576ea984.png)

一旦单击最小化/最大化按钮，它就会完全显示出来。在火狐和谷歌浏览器上测试。

**不能说这是浏览器的问题，因为当我在 Qt 小部件上加载这个缓存的地图时，我仍然必须单击最小化/最大化按钮，才能让它完全显示出来。**

![在此处输入图像描述](../Images/eb09634080aba2a475c652641ee6fcb7.png)

地图的 html 太长，无法在此处发布。如果您知道任何相关部分，请告诉我，我将在此处发布。

编辑 2

最后，我设法在此处上传了该 html 代码：[http ://code.google.com/p/earthhtml/source/browse/trunk/ogmap.html](http://code.google.com/p/earthhtml/source/browse/trunk/ogmap.html)

请查看`div`标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:57:44.860

虽然这可能看起来微不足道，但它对我来说很有效。我在使用 GMv3 时遇到了完全相同的问题（以及其他 GM 问题），但无法弄清楚。

*   我在包含地图的 div 中**添加**了一个（使用）`min-height``!important`
*   我从 CSS**中删除**了ALL`max-height & max-widths`

这解决了“小地图”问题以及我在使用 GM 引脚和信息窗口时遇到的另一个问题。

最重要的是，确保`z-index`您的页面上没有高的 div，因为 GM 将调整包含 div 的大小以不与顶部 div 中断。另一个更高的 div`z-index`也会弄乱地图并使高度和宽度变得疯狂。

```
div#map{
min-height:600px !important; /* or any value that suits you */
position:relative;
margin-left:0;
margin-right:0;
left:0;
border:1px solid #979797;
} 
```

我希望这对你和我一样有用。如果没有，祝你好运！

# perl - perl：为什么 Devel::Refcount::refcount 和 Devel::Peek::SvREFCNT 不一致？

> ID：11344518
> 
> 赞同：15
> 
> 时间：2012-07-05T12:38:20.377
> 
> 标签：perl

我在阅读[如何访问 Perl 哈希的引用计数？](https://stackoverflow.com/questions/2276885/how-can-i-access-the-ref-count-of-a-perl-hash), 并且两者都`Devel::Refcount::refcount`被`Devel::Peek::SvREFCNT`建议。

但它们不会返回相同的引用计数。这是为什么？

这是一个修改后的示例`perldoc Devel::Refcount`：

```
use Devel::Peek;
use Devel::Refcount;

my $anon = [];

printf "Anon ARRAY $anon has %d/%d reference\n",
    Devel::Refcount::refcount($anon),
    Devel::Peek::SvREFCNT($anon);

my $otherref = $anon;

printf "Anon ARRAY $anon now has %d/%d references\n",
    Devel::Refcount::refcount($anon),
    Devel::Peek::SvREFCNT($anon); 
```

打印出来：

```
Anon ARRAY ARRAY(0x8b10818) has 1/1 reference
Anon ARRAY ARRAY(0x8b10818) now has 2/1 references 
```

注意最后的 2/1 差异...

（如果事实证明我没有做愚蠢的事情，我将添加一个链接，从[How can I access the ref count of a Perl hash?](https://stackoverflow.com/questions/2276885/how-can-i-access-the-ref-count-of-a-perl-hash)到这里）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T16:09:05.260

我不能说我已经完全理解了，但是你的问题在[`Devel::Refcount`perldoc中得到了突出的回答](http://search.cpan.org/perldoc?Devel::Refcount#COMPARISON_WITH_SvREFCNT)

> **与 SvREFCNT 的比较**
> 
> 此函数与 Devel::Peek::SvREFCNT 的不同之处在于 SvREFCNT() 给出了它所传递的 SV 对象本身的引用计数，而 refcount() 给出了被指向对象的计数。这也允许它给出任何引用的计数（即 ARRAY、HASH、CODE、GLOB 和 Regexp 类型）。
> 
> 考虑以下示例程序：

```
 use Devel::Peek qw( SvREFCNT );
 use Devel::Refcount qw( refcount );

 sub printcount
 {
    my $name = shift;

    printf "%30s has SvREFCNT=%d, refcount=%d\n",
       $name, SvREFCNT($_[0]), refcount($_[0]);
 }

 my $var = [];

 printcount 'Initially, $var', $var;

 my $othervar = $var;

 printcount 'Before CODE ref, $var', $var;
 printcount '$othervar', $othervar;

 my $code = sub { undef $var };

 printcount 'After CODE ref, $var', $var;
 printcount '$othervar', $othervar; 
```

> 这会产生输出

```
 Initially, $var has SvREFCNT=1, refcount=1
      Before CODE ref, $var has SvREFCNT=1, refcount=2
                  $othervar has SvREFCNT=1, refcount=2
       After CODE ref, $var has SvREFCNT=2, refcount=2
                  $othervar has SvREFCNT=1, refcount=2 
```

> 在这里，我们看到 SvREFCNT() 计算作为标量值传入的 SV 对象的引用数 - 分别是 $var 或 $othervar，而 refcount() 计算指向引用对象的引用值的数量 -在这种情况下是匿名数组。
> 
> 在构造 CODE 引用之前，$var 和 $othervar 的 SvREFCNT() 都为 1，因为它们仅存在于当前词法填充中。匿名 ARRAY 的 refcount() 为 2，因为 $var 和 $othervar 都存储了对它的引用。
> 
> 构造 CODE 引用后，$var 变量现在的 SvREFCNT() 为 2，因为它也出现在新匿名 CODE 块的词法填充中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T16:04:29.267

`Devel::Refcount::refcount($anon)`返回由 引用的引用计数`$anon`。

该数组由`$anon`和引用`$otherref`：2

* * *

`Devel::Peek::SvREFCNT($anon)`返回自身的引用计数`$anon`。

标量由它所在的焊盘引用：1

Devel::Peek 似乎没有提供获取数组、散列等的引用计数的方法。

* * *

```
$ perl -MDevel::Peek -E'my $aref2 = my $aref1 = []; Dump($aref1);'
SV = IV(0x99eee34) at 0x99eee38
  REFCNT = 1                    <---- Devel::Peek::SvREFCNT
  FLAGS = (PADMY,ROK)
  RV = 0x99d57d0
  SV = PVAV(0x99d6778) at 0x99d57d0
    REFCNT = 2                  <---- Devel::Refcount::refcount
    FLAGS = ()
    ARRAY = 0x0
    FILL = -1
    MAX = -1
    ARYLEN = 0x0
    FLAGS = (REAL) 
```

* * *

Perl 提供了一个半支持的内置调用`Internals::SvREFCNT`，它适用于标量、数组和散列。

`Internals::SvREFCNT(@$anon)`返回自身的引用计数`@$anon`。

该数组由`$anon`和引用`$otherref`：2

以上仅适用于标量、数组和散列，您需要使用正确的印记。如果您只想传递任意引用，可以使用：

`&Internals::SvREFCNT($anon) + 1`返回由 引用的引用计数`$anon`。

该数组由`$anon`和引用`$otherref`：2

# c++ - 如何在标头中初始化类变量？

> ID：11344519
> 
> 赞同：0
> 
> 时间：2012-07-05T12:38:20.927
> 
> 标签：c++, class, variables, linker, initialization

我正在编写一个库，用户可以在其中定义任意结构并将它们传递给我的库，然后它将从静态成员中获取结构的内存布局，这种结构必须具有作为惯例。

例如：

```
struct CubeVertex {
  // This is, per convention, required in each structure to describe itself
  static const VertexElement Elements[];

  float x, y, z;
  float u, v;
};

const VertexElement CubeVertex::Elements[] = {
  VertexElement("Position", VertexElementType::Float3),
  VertexElement("TextureCoordinates", VertexElementType::Float2),
}; 
```

C++ 最佳实践建议我将静态变量及其初始化移动到我的源 (.cpp) 文件中。然而，我希望变量初始化尽可能接近结构，因为每当结构发生变化时，变量也必须更新。

是否有一种可移植的（*至少 = MSVC + GCC*）方法在头文件中声明这样的变量，而不会导致链接器出现模棱两可的符号/重新定义错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:58:44.740

您可以在这里做的是使用匿名命名空间。

将所有内容包装到“namespace { ... };”中 然后您可以像往常一样访问 CubeVertex::Elements。

但是，每次包含头文件时都会创建一个静态数据的新实例，这会增加可执行文件的文件大小。

它对如何使用类/结构也有一些限制，因为您不能从另一个文件调用该类的函数（在这种特殊情况下这不会成为问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T13:12:36.680

Consider a simple getter.

```
struct CubeVertex {
    static const std::array<VertexElement, N>& GetElements() {
         static const std::array<VertexElement, N> result = {
             //..
         };
         return result;
    }
    //..
} 
```

Immediate benefit: No array-to-pointer-decay.

# android - C 文件使用 NDK 时出错

> ID：11344520
> 
> 赞同：2
> 
> 时间：2012-07-05T12:38:22.010
> 
> 标签：android, service, bluetooth

我得到了一个用 C 编写的程序，并被要求在一个新的 Android 应用程序中使用该程序中的功能。我一直在关注 NDK 的教程，但是碰壁了。我认为剩下的就是编译或链接我的 C 文件，但我不确定。我已经安装了 SDK、NDK、Eclipse、Cygwin 和 Sequoyah（我还没有使用 Sequoyah，也不知道它在哪里发挥作用）。

我使用了 ndk-build 命令，但不确定我应该期待什么。这是我的 Cygwin 终端的屏幕截图。 ![在此处输入图像描述](../Images/6f57273d20c7666bb7c6d986a8c3bdcd.png)

这是我的 NWPTest.c 文件的屏幕截图。.h 文件中定义的所有字段都会出现错误。我觉得这是一个错误，一旦我编译代码就应该消失。 ![在此处输入图像描述](../Images/28890eeaee1c5e53f9a768b4ab3c1b7f.png)

BYTE 和 WORD 等声明在这里：

![在此处输入图像描述](../Images/b17fa6195cd96a6d7445ada056a0cb1d.png)

这是 NWPTest.h 文件的屏幕截图。BYTE 和 WORD 声明也作为错误出现，这是我不明白的。 ![在此处输入图像描述](../Images/782af7fb865d571ca7b92faf0ec0255a.png)

此屏幕截图基本上将最后一件事显示为最后一件事，但我很困惑某些 BYTE 是错误的，而有些则不是： ![在此处输入图像描述](../Images/806b982228192cd78783771bd278f3df.png)

编辑

这是我的 Android.mk 文件。为了澄清起见，我得到了整个 C 项目，并被告知要使其成为 Android 应用程序。我对C没有经验。 ![在此处输入图像描述](../Images/a08e26ca4f9394268d551ba1a08dff6a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:50:43.073

可能您的问题是 Eclipse 不知道 ndk C 头文件的包含路径；但是，这并不重要，因为 ndk-build 似乎已经构建了您的本机库。尽管如果您的 C 感知 eclipse 设置是顽固的并且拒绝在 C 文件中使用“错误”构建项目的其余部分，那么您将不得不修复包含路径或告诉 eclipse 忽略 C 文件。当不知道 C.

更令人担忧的是在 Operations.java 中导致错误的原因 - 这将阻止您构建 apk。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:52:51.453

我猜这是日食错误。它根本不理解您的 c 和 h 文件。尝试安装CDT插件，也许之后问题就会消除。

# php - Mysql 选择数组

> ID：11344521
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:38:23.443
> 
> 标签：php, mysql, select

（已编辑）

表“公司”：公司->“示例LTD”类别（Varchar）->“1,2,3,4”

当访问者选择查看类别编号为“1”的公司时，应显示“Example LTD”（也在 2,3 和 4 中）

我想 SELECT * FROM 公司 WHERE 类别（例如包含类别编号 1）有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:39:40.970

`SELECT * FROM companies WHERE categories IN (1,3,6,9)`

您可以在 php 中动态生成 IN-list：

```
$cats = join(',',$categories);  
$sql = "SELECT * FROM companies WHERE id IN ($cats)"; 
```

但是请确保您的 $categories 数组是未受污染的（仅包含安全数据，以防止 MySQL 注入）！

### 更新

您将类别存储在一个 CSV 字段中？哎哟!

好吧，如果用户只能选择一个类别，请使用 FIND_IN_SET：

```
SELECT * FROM companies WHERE FIND_IN_SET(categories,1) 
```

有多个类别，没有这样的事情。使用循环生成不同的 FIND_IN_SET，以 . 分隔`AND`。

### 请标准化您的数据：

上桌公司：

*   公司编号
*   公司名称

以及类别的链接表：

*   链接ID
*   公司编号
*   类别

# mysql - SQL：如何查找从查询返回的总数据大小（以字节为单位）？

> ID：11344525
> 
> 赞同：2
> 
> 时间：2012-07-05T12:38:34.330
> 
> 标签：mysql, sql

就像是：

```
SUM(*) FROM orders WHERE 'x' = 1; 
```

这必须从 SQL 本身完成，因为这将是更大查询的一部分。

这样做的目的是检查存储大小并通过删除过时的数据检查可能的节省。

SQL Server 为此提供了一些方便的存储过程。这是 MySQL DB，所以我正在寻找一个通用的 SQL 解决方案，除此之外，MySql 的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:45:38.083

为什么不使用计数？

```
SELECT count(*) FROM orders WHERE 'x' =1 
```

或者，您可以使用信息模式表：

```
SELECT TABLE_NAME ,
       (DATA_LENGTH/ 1024) AS "Data Length in MB",
       (INDEX_LENGTH / 1024) AS "Index Length in MB"
       FROM INFORMATION_SCHEMA.TABLES 
       WHERE TABLE_SCHEMA = 'YOUR DATABASE NAME' 
       AND
       TABLE_NAME = 'YOUR TABLE NAME'; 
```

`'YOUR DATABASE NAME'`您的数据库名称在哪里，并且`'YOUR TABLE NAME'`是您需要了解数据的表。

# visual-studio - 在手机中打开 Silverlight 网站

> ID：11344526
> 
> 赞同：0
> 
> 时间：2012-07-05T12:38:36.283
> 
> 标签：visual-studio, silverlight, mobile, silverlight-4.0, silverlight-5.0

我搜索了如何在使用 Silverlight 4.0 和 VS 2010 构建的移动设备上打开网站。是否可以在使用 Silverlight 4.0 或 5.0 构建的移动设备上打开网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:54:07.320

这些移动设备（或更具体地说，它们的浏览器+操作系统）没有 Silverlight 插件。当 iPhone 拒绝允许插件（Flash 或 Silverlight）时，Silverlight 对移动设备的支持被放弃。

唯一真正支持 Silverlight 的手机是 Windows Phone 7 设备（我必须承认它们非常好）。*缺点是它们只支持已安装的 Silverlight 应用程序，而不是通过提供的 Internet Explorer 版本。*

# email - 无法使用 apache commons 邮件发送电子邮件，javax.faces.event.AbortProcessingException

> ID：11344527
> 
> 赞同：0
> 
> 时间：2012-07-05T12:38:42.867
> 
> 标签：email, jsf, apache-commons-email

我正在使用*apache commons email 1.2、Primefaces 3.2、Tomcat 7.0 mojarra 2.0.2*

每当我尝试发送电子邮件时，我都会收到**AbortProcessingException** **原因：java.lang.RuntimeException：无法编译的源代码 - 错误的符号类型：()void* *

任何帮助将不胜感激

这是我的代码：

```
Email email = new SimpleEmail();
email.setHostName("smtp.googlemail.com");
email.setSmtpPort(465);
email.setAuthenticator(new DefaultAuthenticator("*****@gmail.com", "12345"));
email.setTLS(true);// i also tried setSSL()
email.setFrom("*****a@gmail.com");
email.setSubject("TestMail");
email.setMsg("This is a test mail ... :-)");
email.addTo("*****@yahoo.com");
email.send(); 
```

这是堆栈跟踪：

```
SEVERE: java.lang.RuntimeException: Uncompilable source code - Erroneous sym type: (<any>)void
javax.faces.event.AbortProcessingException: java.lang.RuntimeException: Uncompilable source code - Erroneous sym type: (<any>)void
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:182)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:772)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIData.broadcast(UIData.java:912)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:775)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1267)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:312)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.fidela.util.PageFilter.doFilter(PageFilter.java:39)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:185)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:269)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1773)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.RuntimeException: Uncompilable source code - Erroneous sym type: (<any>)void
    at com.fidela.beans.UserBean.forgotPassword(UserBean.java:267)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
    ... 29 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:47:39.507

这是 Netbeans 中的一个[错误](http://netbeans.org/bugzilla/show_bug.cgi?id=210053)。要解决这个问题，要么关闭 Netbeans 中的“保存时编译”选项，要么将其升级到最新的 7.2，或者将其丢弃并使用 Eclipse 或 IntelliJ。

### 也可以看看：

*   [netbeans 中的“无法编译的源代码”RuntimeException](https://stackoverflow.com/questions/4386076/uncompilable-source-code-runtimeexception-in-netbeans)

# c# - sqlcommand 执行查询不更新删除和插入

> ID：11344528
> 
> 赞同：0
> 
> 时间：2012-07-05T12:38:43.927
> 
> 标签：c#, sqlcommand, executenonquery

您好，我总是使用 SQlcommand 进行非查询，但现在出了点问题，我不知道我有 3 个带有操作更新插入和删除的按钮，但我为所有 3 个操作创建了唯一方法，问题是它没有插入删除或更新：

```
private void operacao(String operacao) {
        String comando = "";
        con = new SqlConnection();
        WorksDataSet  dataset = new WorksDataSet();
        con.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Works.mdf;Integrated Security=True;User Instance=True;Asynchronous Processing=true";
        try
        {
            con.Open();

        }
        catch (SqlException cox) {
            MessageBox.Show(cox.Message, this.Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        switch (operacao) { 
            case "inserir":

                try
                {
                    comando = "Insert Into Estudante (Codigo,Nome,Apelido) values(" + txtID.Text + ",'" + txtNome.Text + "','" + txtapelido.Text + "')";
                    SqlCommand command = new SqlCommand(comando, con);
                    SqlDataAdapter sda=new SqlDataAdapter(command);
                    command.CommandType = CommandType.Text;
                    sda.Fill(dataset);
                    command.ExecuteNonQuery();
                    command.Dispose();
                    MessageBox.Show("Adicionado com Sucesso", this.Text, MessageBoxButtons.OK, MessageBoxIcon.Information);
                }
                catch (SqlException sex) {
                    MessageBox.Show(sex.Message , this.Text,MessageBoxButtons.OK,MessageBoxIcon.Error );
                }

                break;

            case "apagar":
                comando = "delete from Estudante where Codigo=" + txtID;
                try
                {

                    SqlCommand command = new SqlCommand(comando, con);
                    command.BeginExecuteNonQuery();
                    MessageBox.Show("Removido com Sucesso", this.Text, MessageBoxButtons.OK, MessageBoxIcon.Information);
                }
                catch (SqlException sex)
                {
                    MessageBox.Show(sex.Message, this.Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
                }
                break;
            case "atualizar":
                comando = "update table Estudante set nome='" + txtNome + "'^ apelido='" + txtapelido + "'";
                try
                {

                    SqlCommand command = new SqlCommand(comando, con);
                    command.BeginExecuteNonQuery();
                    MessageBox.Show("Actualizado com Sucesso", this.Text, MessageBoxButtons.OK, MessageBoxIcon.Information);
                }
                catch (SqlException sex)
                {
                    MessageBox.Show(sex.Message, this.Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
                }
                break;
            default:
                break
                ;
        }
        con.Close();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:49:16.200

您应该使用参数化查询。总是.....

这用于插入操作。

```
comando = "Insert Into Estudante (Codigo,Nome,Apelido) values(@id, @nome, @apelido");
SqlCommand command = new SqlCommand(comando, con);                     
command.Parameters.AddWithValue("@id", txtID.Text);
command.Parameters.AddWithValue("@nome", txtNome.Text);
command.Parameters.AddWithValue("@apelido", txtapelido.Text);
command.CommandType = CommandType.Text;                     
command.ExecuteNonQuery(); 
```

此处无需使用数据集或数据适配器。只是 ExecuteNonQuery

这是删除操作。

```
comando = "delete from Estudante where Codigo=@id";
SqlCommand command = new SqlCommand(comando, con);
command.Parameters.AddWithValue("@id", txtID.Text);
command.CommandType = CommandType.Text;
command.ExecuteNonQuery(); 
```

请注意，您应该传递 Text 属性，而不是整个 TextBox

这用于更新操作

```
comando = "update table Estudante set nome=@nome, apelido=@apelido where codigo=@id";
SqlCommand command = new SqlCommand(comando, con);
command.Parameters.AddWithValue("@id", txtID.Text);
command.Parameters.AddWithValue("@nome", txtNome.Text);
command.Parameters.AddWithValue("@apelido", txtapelido.Text);
command.CommandType = CommandType.Text;
command.ExecuteNonQuery(); 
```

这里也使用 Text 属性而不是 TextBox 对象

通过这种方式，您无需担心字符串参数中的引号，并且您关闭了
[Sql 注入攻击的大门](http://xkcd.com/327/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:51:51.370

要执行`insert/delete/update`语句，您只需要创建`SqlCommand`和`SqlConnection`对象。`DataSet`并且`DataAdapter`是无用的。

要插入一行：

```
string cnstr=@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Works.mdf;Integrated Security=True;User Instance=True;Asynchronous Processing=true";

using(SqlConnection con = new SqlConnection(cnstr))
 {
  string sql = "Insert Into Estudante (Codigo,Nome,Apelido) values(@Codigo,@Nome,@Apelido)";
  using(SqlCommand command= new SqlCommand(sql,con))
   {
     command.Parameters.Add("@Codigo",SqlDbType.Int).Value=txtID.Text;
     command.Parameters.Add("@Nome",SqlDbType.VarChar,30).Value=txtNome.Text;
     command.Parameters.Add("@Apelido",SqlDbType.VarChar,30).Value=txtapelido.Text;
     con.Open();
     cmd.ExecuteNonQuery();
     con.Close();
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:33:06.210

您正在调用 sqlDataAapter 的 Fill 方法来填充不必要的数据库。删除该语句并查看。那应该行得通。

# asp.net - 客户端未在 IIS 7.5 中加载新鲜内容

> ID：11344529
> 
> 赞同：3
> 
> 时间：2012-07-05T12:38:46.923
> 
> 标签：asp.net, caching, iframe, iis-7.5

我们在 Windows Server 2008 R2 机器上的 IIS 7.5 上托管了 asp.net 4.0 网站。问题是客户端正在获取旧内容，但服务器已更新副本。客户端需要每次按 Ctrl+F5 才能获取最新内容。即使在网格上更新数据的情况下，客户端仍然会获得 IFRAME 中显示的旧数据。

可能是什么原因？？任何的想法？？这是缓存的问题吗？？

任何形式的帮助将不胜感激..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T14:30:00.690

页面输出缓存在浏览器请求后将动态页面（例如 ASP 页面或 ASP.NET 页面）的响应存储在内存中。当后续请求到达页面时，服务器发送缓存的响应而不是重新处理页面。

查看这篇文章，它可能对你有帮助。

[http://www.iis.net/ConfigReference/system.webServer/caching](http://www.iis.net/ConfigReference/system.webServer/caching)

这些链接也将帮助您

[http://learn.iis.net/page.aspx/710/configure-iis-7-output-caching/](http://learn.iis.net/page.aspx/710/configure-iis-7-output-caching/)

[https://serverfault.com/questions/126914/output-caching-with-iis7-how-to-for-an-dynamic-aspx-page](https://serverfault.com/questions/126914/output-caching-with-iis7-how-to-for-an-dynamic-aspx-page)

[IIS7：为所有 aspx 页面设置“无缓存”，但不是图像/css/js](https://stackoverflow.com/questions/2022960/iis7-set-no-cache-for-all-aspx-pages-but-not-images-css-js)

[https://superuser.com/questions/63014/how-do-i-turn-off-caching-in-iis7](https://superuser.com/questions/63014/how-do-i-turn-off-caching-in-iis7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-18T12:08:52.897

就我而言，我正在使用 Chrome 开发人员工具查看托管在 IIS 上的 Html 文件的源代码，当我修改 html 文件并刷新 IIS 站点时，刷新浏览器后未修改 chrome 中显示的源代码。

一开始我猜它是IIS缓存，但是在我尝试了其他答案中的链接后，它并没有真正起作用：[https ://superuser.com/questions/63014/how-do-i-turn-off-caching-在-iis7](https://superuser.com/questions/63014/how-do-i-turn-off-caching-in-iis7)

最后我去Chrome设置并清除Chrome文件缓存，html源代码成功更改。所以在我的情况下，它是由 Chrome 的缓存引起的，希望它对某人有所帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-04-24T20:23:55.037

这是我发现的，有一个 HTTPCompression 设置可能将 sendCacheHeading 设置为 true。我在 applicationHost.config 文件中找到了它并在那里进行了更改，但也可以使用配置编辑器在 IIS 中进行更改。

例子：

![例子](../Images/0aa3f7e6647898cbf413a3d7aa55efd2.png)

如果要通过 IIS 更改此设置，请选择配置编辑器，然后单击顶部的下拉箭头并展开 system.webserver，然后选择 httpCompression。

根据 Laurenz 的要求，我已经复制了我在配置文件中找到的文本版本以及我将其更改为：

原文：
<httpCompression sendCacheHeaders="true" directory="C:\Windows\IIS 临时压缩文件" maxDiskSpaceUsage="1000000" noCompressionForProxies="false" noCompressionForRange="true">

更改为：
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS 临时压缩文件">

# c++ - 如何设计我的班级？

> ID：11344530
> 
> 赞同：2
> 
> 时间：2012-07-05T12:38:47.063
> 
> 标签：c++, c++11

我有两个继承相同抽象基类的类：

```
class base
{ virtual void something() = 0; };

class a : public base
{
     void something();
};

class b : public base
{
     void something();

     // This is what I want: a list where I can store values of type a
     // and of type b
     // std::list<a & b> objs;
}; 
```

我可以使用原始/智能指针列表 ( `list<base*> obj_ptrs`)，但如何使用此列表？

```
b b_obj;
b_obj.obj_ptrs.push_back(new a());

// Who have to delete this pointer? Who use the class or who design
// the class in the object destructor?

// The following is valid for c++11
auto p = b_obj.obj_ptrs.back();
// But if i'm using c++03? 
```

我希望使用该课程的人有可能这样做：

```
a a_obj;
b b_obj;

b_obj.obj_ptrs.push_back(a);
b_obj.obj_ptrs.push_back(b); 
```

我该如何设计我的课程来完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:51:08.973

> 我可以使用原始/智能指针列表 ( `list<base*> obj_ptrs`)，但如何使用此列表？

您可以通过调用虚函数与​​它们进行多态交互，或者在特殊情况下，使用`dynamic_cast`将指针类型转换为`a*`or `b*`。

> 谁必须删除这个指针？

您将不得不决定所有权计划。一种方法是将智能指针（通常`unique_ptr`，或者`shared_ptr`在特殊情况下）存储在列表中，然后在从列表中删除时自动删除它们。另一种方法是将对象与列表分开管理，并将原始指针放入列表中。

```
// The following is valid for c++11
auto p = b_obj.obj_ptrs.back();
// But if i'm using c++03? 
```

这相当于`base * p = b_obj.obj_ptrs.back();`. `auto`不会神奇地给出动态指针类型，它只是静态指针类型的快捷方式。

> 我该如何设计我的课程来完成这项工作？（存储不同类型的对象）

存储不同类型的对象可以使用有*区别的联合*来完成- 基本上，一个带有一些额外元数据的联合来跟踪哪个联合成员处于活动状态。这些在 C++ 中实现起来非常棘手，但您可以使用[Boost.Variant](http://www.boost.org/libs/variant/)或[Boost.Any](http://www.boost.org/libs/any/)。这样做的好处是您不需要一个通用的基类，或者来自所存储类型的任何其他支持；可以使用任何一组（非抽象）类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:49:46.510

使用共享指针列表非常安全且非常简单：

```
std::list<std::shared_ptr<base>> the_list; 
```

如果您遵守规则，您添加的任何对象都将被分配，当对象不再被引用计数时，将为您处理删除`new`。`shared_ptr`（`shared_ptr`实现引用计数）

```
std::shared_ptr<a> my_a(new a);
std::shared_ptr<b> my_b(new b);

the_list.push_back(my_a);
the_list.push_back(my_b);

std::shared_ptr<base> my_object = the_list.back(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:46:04.027

`std::list<a & b>`对象；不正确。我想你的意思是`std::list<base*> objs`或者`std::list<base&> objs` 所以，对于添加元素做

```
a a_obj;
b b_obj;
b_obj.objs.push_back(&a_obj);
b_obj.objs.push_back(&b_obj);
base* p = b_obj.objs.back(); 
```

或使用引用而不是指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T06:50:12.410

如果你真的，真的只关心存储类型的值，`a`或者`b`和那些类型的值，那么考虑在内部拥有一个`std::list<a>`和一个`std::list<b>`，并在两者上重载一个适当的公共成员`a`并将`b`其转发到适当的列表（例如，这`b obj; obj.push_back(value);`将是首选用法）。

只要您不关心`a`和`b`对象之间插入的相对顺序，不需要您担心所有权，与使用 eg 相比，不支付动态分配的成本`std::unique_ptr<base>`并表达最接近的内容，这项工作就可以了.

# javascript - 纯 Javascript - 将对象存储在 cookie 中

> ID：11344531
> 
> 赞同：43
> 
> 时间：2012-07-05T12:38:49.107
> 
> 标签：javascript, object, cookies

没有 jQuery。

我想在 cookie 中存储一个对象或数组。

该对象应该在页面刷新后可用。

我如何使用纯 JavaScript 做到这一点？我阅读了很多帖子，但不知道如何正确序列化。

* * *

编辑：代码：

```
var instances = {};
...
instances[strInstanceId] = { container: oContainer };
...
instances[strInstanceId].plugin = oPlugin;
...
JSON.stringify(instances); 
// throws error 'TypeError: Converting circular structure to JSON' 
```

1.  如何序列化`instances`？

2.  如何维护功能，但更改实例结构以能够序列化`stringify`？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-05T12:47:37.240

试试那个写

```
function bake_cookie(name, value) {
  var cookie = [name, '=', JSON.stringify(value), '; domain=.', window.location.host.toString(), '; path=/;'].join('');
  document.cookie = cookie;
} 
```

阅读它需要：

```
function read_cookie(name) {
 var result = document.cookie.match(new RegExp(name + '=([^;]+)'));
 result && (result = JSON.parse(result[1]));
 return result;
} 
```

要删除它需要：

```
function delete_cookie(name) {
  document.cookie = [name, '=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.', window.location.host.toString()].join('');
} 
```

要序列化复杂的对象/实例，为什么不在您的实例中编写数据转储函数：

```
function userConstructor(name, street, city) {
   // ... your code
   this.dumpData = function() {
     return {
        'userConstructorUser': {
            name: this.name,
            street: this.street,
            city: this.city
         }
       }
    } 
```

然后转储数据，将其字符串化，将其写入 cookie，下次您想使用它时，只需执行以下操作：

```
 var mydata = JSON.parse(read_cookie('myinstances'));
  new userConstructor(mydata.name, mydata.street, mydata.city); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T12:46:33.543

`.toString()`如果它提供有意义的序列化，则使用对象自己的方法或`JSON.stringify()`. 但请注意，cookie 通常长度有限，无法保存大量数据。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-27T14:03:56.320

来自： [http ://www.sitepoint.com/cookieless-javascript-session-variables/ 的 cookie 适配类](http://www.sitepoint.com/cookieless-javascript-session-variables/)

您需要做的就是设置和获取需要存储在 cookie 中的变量。

使用：int、字符串、数组、列表、复杂对象

示例：

```
var toStore =  Session.get('toStore');

if (toStore == undefined)
    toStore = ['var','var','var','var'];
else
    console.log('Restored from cookies'+toStore);

Session.set('toStore', toStore); 
```

班级：

```
// Cross reload saving
if (JSON && JSON.stringify && JSON.parse) var Session = Session || (function() {
// session store

var store = load();

function load()
{
    var name = "store";
    var result = document.cookie.match(new RegExp(name + '=([^;]+)'));

    if (result)
        return JSON.parse(result[1]);

    return {};
}

function Save() {
    var date = new Date();
    date.setHours(23,59,59,999);
    var expires = "expires=" + date.toGMTString();
    document.cookie = "store="+JSON.stringify(store)+"; "+expires;
};

// page unload event
if (window.addEventListener) window.addEventListener("unload", Save, false);
else if (window.attachEvent) window.attachEvent("onunload", Save);
else window.onunload = Save;

// public methods
return {

    // set a session variable
    set: function(name, value) {
        store[name] = value;
    },

    // get a session value
    get: function(name) {
        return (store[name] ? store[name] : undefined);
    },

    // clear session
    clear: function() { store = {}; }
};
})(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-05T12:41:22.030

如果您可以将对象序列化为其规范的字符串表示形式，并且可以将其从所述字符串表示形式反序列化回其对象形式，那么是的，您可以将其放入 cookie 中。

# iphone - iPhone上的Facebook访问令牌错误

> ID：11344536
> 
> 赞同：2
> 
> 时间：2012-07-05T12:39:24.683
> 
> 标签：iphone, facebook, facebook-graph-api

我正在尝试在我的应用程序中获取 facebook 用户的名称，但我得到了

`{"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}}`

我的代码是：-

在`viewdidload`

```
facebook = [[Facebook alloc] initWithAppId:@"233350100117670" andDelegate:self];    
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"])
{
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}
NSArray *permissions =  [[NSArray arrayWithObjects:@"read_stream", @"publish_stream", @"offline_access",nil] retain];
[facebook authorize:permissions];

if (![facebook isSessionValid])
{
    [facebook authorize:nil];
} 
```

***在那之后：-***

```
- (void)request:(FBRequest *)request didFailWithError:(NSError *)error
{
    NSLog(@"%@", [error localizedDescription]);
    NSLog(@"Err details: %@", [error description]);
}

- (void)request:(FBRequest*)request didLoadRawResponse:(NSData*)data
{
    NSString *response = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];
    NSLog(@"%@", response);
    [response release];
}

- (void) request:(FBRequest*)request didLoad:(id)result
{
    if ([result isKindOfClass:[NSDictionary class]])
    {
        NSString *email = [result objectForKey: @"email"];
        fbUserName = [result objectForKey: @"name"];
        NSString *facebookId = [result objectForKey: @"id"];
        NSString* title=[NSString stringWithFormat:@"%@ has won a gold medal on Olympedia quiz",fbUserName];
        NSMutableDictionary *params = 
        [NSMutableDictionary dictionaryWithObjectsAndKeys:title, @"name",@"Feed Dialogs of Olympedia.", @"caption",@"Check out Olmpedia Dialogs.", @"description",@"http://www.facebook.com/olympedia", @"link",@"http://bit.ly/PdpRSD", @"picture",nil];  
        [facebook dialog:@"feed" andParams:params andDelegate:self];
   }
} 
```

***在共享按钮上单击：-***

```
- (IBAction)shareOnFacebook:(id)sender
{
    NSLog(@"Posting message");

    [facebook requestWithGraphPath:@"me" andDelegate:self];
} 
```

请帮忙，因为我试图解决这个问题几个小时。***强文本***

# user-controls - 用户控件绑定-RelativeSource

> ID：11344541
> 
> 赞同：1
> 
> 时间：2012-07-05T12:39:48.667
> 
> 标签：user-controls, windows-8

在 WPF 4 UserControl 中，我可以在 XAML 中定义子控件的绑定，如下所示......

```
...
    <ComboBox 
        ItemsSource="{Binding CBItems, 
                      RelativeSource={RelativeSource AncestorType=UserControl}}"
        ...              
    />
... 
```

其中 CBItems 是在 UserControl 后面的代码中定义的属性。

但是，此格式在 Windows 8 Metro 中不可用 - RelativeSource 没有成员 AncestorType。

如何在 Windows 8 中进行这种类型的绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:00:13.890

看起来 TemplatedControl 而不是 UserControl 是为 Windows 8 Metro 开发创建可重用复合组件的方法。

[Tim Heuer 的这篇博客文章](http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx)有一个详细的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:52:10.070

如果我理解正确，您想将您的 ItemsSource 绑定到`ComboBox`您拥有的控件的公共属性`UserControl`吗？

你不能这样做：

```
<ComboBox ItemsSource="{Binding CBItems, ElementName=MyControl}"/>
...
<controls:MyUserControl x:name="MyControl" /> 
```

# php - 使用函数内部的while循环将信息存储在数组中

> ID：11344542
> 
> 赞同：0
> 
> 时间：2012-07-05T12:39:49.400
> 
> 标签：php, arrays, function

如何将信息存储在数组中？

我正在尝试从数据库中获取信息，然后将 HTML 代码存储在数组中。

这可能吗？如果有怎么办？

```
function echothatshit() {
    $sqll=mysql_query("select id,data from produkter where weight='1'");
    $alla = array();    
    while($row=mysql_fetch_array($sqll))
    {
        $idd=$row['id'];
        $data=$row['data'];
        $alla[] = '<option value="'.$idd.'">'.$data.'</option>';
    }
}

$test2 = echothatshit();                       
echo $test2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:42:17.887

您只需要`return $alla;`最后一个函数，也不能直接回显数组，您需要循环它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:45:20.407

```
function echothatshit() {
    $sqll=mysql_query("select id,data from produkter where weight='1'");
    $alla = array();
    $i=0;    
    while($row=mysql_fetch_array($sqll))
    {
        $idd=$row['id'];
        $data=$row['data'];
        $alla[$i] = '<option value="'.$idd.'">'.$data.'</option>';
        $i++;
    }
    $yourVariable="";
    for ($j=0;$j<$i;$j++)
    {
        $yourVariable.=$alla[$j];
    }
    return $yourVariable;
}

$test2 = echothatshit();                       
echo $test2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T12:45:13.317

为什么不使用`$alla`字符串，即（带有一些格式化/重命名/简化）：

```
function getProductsHTML()
{
  $sql = mysql_query("select id,data from produkter where weight='1'");
  $html = '';

  while($row = mysql_fetch_array($sql))
    $html .= '<option value="'.$row['id'].'">'.$row['data'].'</option>'."\n";

  return $html;
}

echo getProductsHTML(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T12:46:16.230

```
function echothatshit() {
$sqll=mysql_query("select id,data from produkter where weight='1'");
$alla = array();    
while($row=mysql_fetch_array($sqll))
    {
$idd=$row['id'];
$data=$row['data'];
$alla[] = '<option value="'.$idd.'">'.$data.'</option>';
    }
return $alla;
}
$test2 = echothatshit();                       
echo $test2; 
```

如果您希望 $test2 获取数组 $alla，请将其返回。然后，为了正确打印数组，请使用

```
echo "<pre>";
print_r($test2);
echo "</pre>"; 
```

# ruby-on-rails - ruby on rails profiler 什么也不返回

> ID：11344544
> 
> 赞同：2
> 
> 时间：2012-07-05T12:39:54.183
> 
> 标签：ruby-on-rails, profiler

我已经安装了，并且`ruby-prof`我`test-unit`正计划在...`use``ruby profiler``profile``website``development`

问题是，当我`rails profiler`在控制台中输入时，我什么也得不到……

我不应该得到一些时间我的应用程序需要加载等等......比如`codeigniter`？

或者也许有类似`profiler`的`codeigniter`for `rails`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:35:03.970

实际上，是的，有真正的替代品[RailsMetric](https://github.com/engineyard/rails_metrics)或[Metrical](http://iain.nl/easier-metricfu-with-metrical)，我更喜欢哪一个。您可能想[了解更多关于这最后一个阅读/观看 Ryan Bates 的相应 RailsCasts 的信息](http://railscasts.com/episodes/252-metrics-metrics-metrics?language=en&view=asciicast)。

昨天，根据[SO 上的这个问题，](https://stackoverflow.com/questions/6823712/is-there-a-port-mvc-mini-profiler-for-rails) [Sam Saffron](http://samsaffron.com/)宣布了 MiniProfiler for Ruby 的第一个发布。我认为这可能会更好地满足您的需求。有关更多信息，请阅读[他博客上的文章](http://samsaffron.com/archive/2012/07/12/miniprofiler-ruby-edition)。

# c++ - 如何在 Windows 8 Metro (C++/XAML) 中制作循环/循环 ScrollViewer

> ID：11344545
> 
> 赞同：6
> 
> 时间：2012-07-05T12:39:55.963
> 
> 标签：c++, xaml, windows-8, windows-runtime, winrt-xaml

在 Windows 8 Metro 应用程序中，是否可以创建一个 ScrollViewer，在到达视图中的最后一项时，它会循环回视图中的第一项？如果是这样，我怎样才能达到这个效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T15:32:03.060

这绝对是可能的。我目前正在解决问题，完成后会发布工作。到目前为止，它类似于下面。

这个想法是你钩入滚动查看器的 viewchanged 事件，该事件在你移动栏时触发。到达那里后，计算您在偏移中的位置和项目的大小，然后您可以使用它来衡量列表框容器的实际大小或您拥有的东西。

一旦您知道您在偏移量中的位置并知道列表框的实际高度和项目的高度，您就知道哪些项目当前可见，哪些不可见。确保绑定到对象的列表是一个可观察的集合，该集合实现了具有双向绑定的 INotifyChanged 接口。然后，您可以定义一组对象，以根据您所在的滚动位置来回旋转。

另一种选择是尝试不同的起点，也许是一个带有选取框和滚动条的控件？

XAML

```
</UserControl.Resources>
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
<ScrollViewer x:Name="ScrollViewer1">
    <ListBox x:Name="SampleListBox" Background="White" ItemsSource="{Binding Path=sampleItems}" ItemTemplate="{StaticResource sampleTemplate}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Grid.Row="0" Grid.RowSpan="2">

    </ListBox>
</ScrollViewer>
</Grid> 
```

代码背后

```
 public sealed partial class MainPage : Page
{
    List<SampleItem> sampleItems;
    const int numItems = 15;
    public MainPage()
    {
        sampleItems = new List<SampleItem>();
        for (int i = 0; i < numItems; i++)
        {
            sampleItems.Add(new SampleItem(i));
        }
        this.InitializeComponent();
        SampleListBox.ItemsSource = sampleItems;
        ScrollViewer1.ViewChanged += ScrollViewer1_ViewChanged;
    }
    void ScrollViewer1_ViewChanged(object sender, ScrollViewerViewChangedEventArgs e)
    {
        ScrollViewer viewer = sender as ScrollViewer;
        ListBox box = viewer.Content as ListBox;
        ListBoxItem lbi = box.ItemContainerGenerator.ContainerFromIndex(0) as ListBoxItem;
        double elementSize;
        if (lbi == null)
            return;
        elementSize = lbi.ActualHeight;

    }        /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property is typically used to configure the page.</param>
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }
}

public class SampleItem
{
    public String ItemCount { get; set; }
    public SampleItem(int itemCount)
    {
        ItemCount = itemCount.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T15:02:33.697

我不相信在 WinRT/XAML 中有这样的控件，因此您需要实现自定义控件。您可以采用许多方法，但我可能会避免使用 ScrollViewer 并直接处理操作事件，因为将 ScrollViewer 的行为转变为您的要求可能并不容易。我会根据操作事件和滚动偏移来控制滚动偏移——在视图中定位元素——例如使用 Canvas 控件。您需要根据滚动偏移量重新定位项目面板中的元素，以便例如超出一端的视口的项目移动到另一端。这将涉及自定义依赖属性、项目容器等。如果您了解所有这些 API，可能至少需要几个小时的工作。

# c - 如何编译静态库

> ID：11344547
> 
> 赞同：6
> 
> 时间：2012-07-05T12:40:07.087
> 
> 标签：c, linux, gcc, x86-64

我正在尝试编译一个静态库。我按照[这个问题](https://stackoverflow.com/questions/598948/creating-a-project-from-makefile-to-static-dynamic-libraries-in-unix)的答案中给出的步骤进行操作，但它不起作用。以下是我的makefile。

```
PROJECT = lq.a
OBJECTS = dlmalloc.o queue.o.o
CFLAGS  = -o -Wall -pedantic

all: $(PROJECT)

.c.o:
    gcc -c $(CFLAGS) $<

$(PROJECT): $(OBJECTS)
    libtool -o  $(PROJECT) -static $(OBJECTS) 
```

我收到以下错误。

```
libtool: unrecognized option `-o' 
```

编写这个makefile的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T13:46:03.767

您可以使用该程序使用以下语法`ar` [创建静态库：](http://tldp.org/HOWTO/Program-Library-HOWTO/static-libraries.html)

```
 ar rcs my_library.a file1.o file2.o 
```

所以，在你的情况下：

```
$(PROJECT): $(OBJECTS)
     ar rcs $(PROJECT) $(OBJECTS) 
```

您可以[在手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?ar)上找到有关选项的说明，但基本上：

*   `r`表示将给定的目标文件插入到存档中（替换同一事物的任何旧版本）
*   `c`如果存档不存在，则表示创建存档（通常无论如何都会发生这种情况，但此选项会抑制警告）。
*   `s`表示将目标文件索引写入存档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T21:21:41.923

好吧，这很令人困惑；但我认为这`libtool -o $(PROJECT) -static $(OBJECTS)`条线（也在[objective c - Combine static libraries](https://stackoverflow.com/a/8170851/277826)中提到）来自Mac；显然与Linux`libtool`上的**不**一样：

[libtool 或 ar & ranlib - idevgames 论坛](http://www.idevgames.com/forums/thread-8330.html)：

> 我正在使用 libtool 在 OS X 上创建一个静态库，因为这就是 Xcode 正在做的事情，这似乎工作正常。然后我转到 Linux，它被我的 libtool 命令阻塞，说“libtool：无法识别的选项'-o'”。看着它们，似乎 OS X 上的 libtool 和 Linux 上的 libtool 是两个完全不同的程序。...
> 跟进：是的，Linux 上的 libtool 似乎确实是 OS X 上的 glibtool。在 OS X 上执行“ `glibtool --help`”时，我得到的输出`libtool --help`与 Linux 上的“”基本相同。

`-o`好的，这解释了差异 - 但是当我刚刚看到它从 Linux 上的 Makefile 运行时，仍然没有解释如何成为一个无法识别的选项！所以我发现了这个：

[bug-libtool 邮件列表 (2001): Re: libtool 中的错误？](http://lists.gnu.org/archive/html/bug-libtool/2001-09/msg00015.html)

> 您需要在模式选项之前设置模式：
> 
> $ libtool --mode=link --help
> 用法：libtool [选项]... --mode=link LINK-COMMAND...

哦，天哪……现在特别令人困惑的是，这个注释是`libtool --mode=link --help`：

```
$ libtool --mode=link --help
Usage: libtool [OPTION]... --mode=link LINK-COMMAND...
...

LINK-COMMAND is a command using the C compiler that you would use to create
a program from several object files.

The following components of LINK-COMMAND are treated specially: ...
  -all-static       do not do any dynamic linking at all ...
  -o OUTPUT-FILE    create OUTPUT-FILE from the specified objects ...
  -static           do not do any dynamic linking of uninstalled libtool libraries
...
All other options (arguments beginning with `-') are ignored.

Every other argument is treated as a filename.  Files ending in `.la' are
treated as uninstalled libtool libraries, other files are standard or library
object files.
...
If OUTPUT-FILE ends in `.a' or `.lib', then a standard library is created
using `ar' and `ranlib', or on Windows using `lib'. 
```

所以 - 如果我**必须**指定一个`LINK-COMMAND`-**同时**，我指定一个以;`OUTPUT-FILE`结尾的 `.a`然后应该运行哪个命令，`LINK-COMMAND`- 或扩展指定的`ar`+ ？好吧 - 这是一个终端片段，只是测试 - 没有任何编译的脚本逻辑（尽管确实创建了一个空存档）：`ranlib``.a``bash``libtool`

```
$ libtool -o test.a
libtool: unrecognized option `-o'
libtool: Try `libtool --help' for more information.

$ libtool --mode=link -o test.a
libtool: link: unrecognized option `-o'
libtool: link: Try `libtool --help' for more information.

$ libtool --mode=link gcc -o test.a
libtool: link: ar cru test.a
libtool: link: ranlib test.a

$ libtool --mode=link ar -o test.a
libtool: link: unable to infer tagged configuration
libtool: link: specify a tag with `--tag'

$ cat $(which libtool) | grep "^# ### BEGIN LIBTOOL TAG CONFIG:"
# ### BEGIN LIBTOOL TAG CONFIG: disable-shared
# ### BEGIN LIBTOOL TAG CONFIG: disable-static
# ### BEGIN LIBTOOL TAG CONFIG: CXX
# ### BEGIN LIBTOOL TAG CONFIG: F77
# ### BEGIN LIBTOOL TAG CONFIG: FC
# ### BEGIN LIBTOOL TAG CONFIG: GCJ
# ### BEGIN LIBTOOL TAG CONFIG: RC
# ### BEGIN LIBTOOL TAG CONFIG: BINCC
# ### BEGIN LIBTOOL TAG CONFIG: BINCXX

## CC tag is not listed, but it will (eventually) be accepted:

$ libtool --mode=link ar --tag CC -o test.a
libtool: link: unable to infer tagged configuration
libtool: link: specify a tag with `--tag'

$ libtool --mode=link --tag CC ar -o test.a
libtool: link: ar cru test.a
libtool: link: ranlib test.a

$ libtool --tag=CC --mode=link ar -o test.a
libtool: link: ar cru test.a
libtool: link: ranlib test.a

$ libtool --tag=XX --mode=link ar -o test.a
libtool: ignoring unknown tag XX
libtool: link: ar cru test.a
libtool: link: ranlib test.a

$ libtool --tag=XX --mode=link whatevar -o test.a
libtool: ignoring unknown tag XX
libtool: link: ar cru test.a 
libtool: link: ranlib test.a

$ ls -la test.a 
-rw-r--r-- 1 user user 8 2013-04-17 23:12 test.a 
```

所以 - 你不仅必须指定 a `--mode`，而且如果这个模式是`link`，你必须指定某种引用工具的参数（LINK-COMMAND）；但是那个 LINK-COMMAND 参数甚至不需要作为一个*真正的*程序存在——因为无论如何你都必须指定一个输出文件；如果该输出文件以 结束`.a`，它将强制使用`ar`/`ranlib` *无论如何*。

此外，如果您对标签有问题 - 只需将参数移到`--tag`LINK-COMMAND 参数之前 - 您可以强制`libtool`使用不存在的标签和不存在的 LINK-COMMAND 运行（其操作仅由输出文件的扩展名`.a`）——只要以正确的`libtool`语法顺序输入参数；我必须承认，脚本本身并没有真正记录这一点。

* * *

但是回到 Mac`libtool -o $(PROJECT) -static $(OBJECTS)`系列，它将结合静态库；如果您尝试对适当的静态库`.a`文件执行相同的操作，您会注意到在输出存档中`libtool`推送`.a`存档*，**而不是*它们的组成对象文件 - 因此此输出不再是有效的 ELF 对象；这是一个相应的 Linux`libtool`行的示例，其中包含我生成的两个适当的库文件：

```
$ readelf --syms libmy1.a
File: libmy1.a(my1.o)
Symbol table '.symtab' contains 11 entries:
...
$ readelf --syms libmy2.a
File: libmy2.a(my2.o)
Symbol table '.symtab' contains 12 entries:
...
$ libtool --mode=link --tag=CC ar -o libtest.a -static libmy1.a libmy2.a 
libtool: link: ar cru libtest.a libmy1.a libmy2.a 
libtool: link: ranlib libtest.a

$ readelf --syms libtest.a
readelf: Error: Not an ELF file - it has the wrong magic bytes at the start
readelf: Error: libtest.a(libmy1.a): Failed to read file header
readelf: Error: Not an ELF file - it has the wrong magic bytes at the start
readelf: Error: libtest.a(libmy2.a): Failed to read file header 
```

因此，正如[公认的答案](https://stackoverflow.com/a/11345669/277826)所说 - 在 Linux 上，`ar`手动使用解包并再次打包，以组合静态库。

希望这对某人有帮助，
干杯！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T13:56:14.923

要么使用，要么`libtool`不使用。如果您要使用它，那么您应该编译单个文件并`libtool --mode=compile`使用`libtool --mode=link`. 如果您不打算使用`libtool`，那么您的链接也应该完成`gcc`，正如另一个答案中所指出的那样。还有，你试过`man libtool`吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T13:40:57.930

以下命令将构建您的静态库：

```
$gcc -c file1.c -o libfile.o
$ar rcs libfile.a libfile.o 
```

# javascript - 使用 SlickGrid 从同一对象创建独立网格的问题

> ID：11344555
> 
> 赞同：0
> 
> 时间：2012-07-05T12:40:23.350
> 
> 标签：javascript, object, slickgrid

我在`SlickGrid`从同一个对象创建多个独立网格时遇到问题（即对一个网格的修改不应影响其他网格，反之亦然）。

这是代码

```
var data1 = [];
data1[0] = { myfield: "This is data1" };
// setting data2, see below
var grid1 = new Slick.Grid("#grid1", data1, columns, options);
var grid2 = new Slick.Grid("#grid2", data2, columns, options); 
```

**设置数据2**

我尝试了很多事情：
- `var data2 = data1`：这样做时，每当我修改一个网格时，另一个网格都会相应地更新，反之亦然，我理解这是[因为这个](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript)。

-`var data2 = jQuery.extend(true, {}, data1)`或`var data2 = jQuery.extend({}, data1);`：在这种情况下，`SlickGrid`只是无法创建网格`data2`（网格是空的，并且它的高度扩展为`4000000px`，没有引发警告/错误/异常）尽管对象本身似乎已正确创建（我可以提醒它及其值很好）。

**如何从同一个对象（最初）创建 2 个独立的网格`SlickGrid`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:01:42.300

jQuery.extend() 作用于一个对象。在这里，您必须创建第二个数组并分别从第一个数组中克隆每个单独的项目。

# asp-classic - 如何使用 ASP 从导航列表动态创建面包屑？

> ID：11344556
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:40:29.053
> 
> 标签：asp-classic

我无法弄清楚如何创建从导航中提取的动态面包屑。

我有一个 html 导航页面，并且应该从该页面中提取面包屑。如果 HTML 改变了，面包屑也应该改变。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T08:40:17.140

我不认为我真的明白你的意思，但是，如果你的意思是 cookie？，你可以这样设置 cookie：

**创建一个cookie：**

```
<%
    Response.Cookies("WEB_SITE_NAME")("Navigation")=myNavigation
    Response.Cookies("WEB_SITE_NAME").Expires = Now()+5
%> 
```

**从先前创建的 cookie 中读取：**

```
<%
    myNavigation = Request.Cookies("WEB_SITE_NAME")("Navigation")
%> 
```

# python-3.x - 在 Python 3 中替换 getstatusoutput

> ID：11344557
> 
> 赞同：15
> 
> 时间：2012-07-05T12:40:32.970
> 
> 标签：python-3.x, python

由于 commands 模块自 Python 2.6 以来已弃用，我正在寻找替换[commands.getstatusoutput](http://docs.python.org/library/commands.html?highlight=commands#commands.getstatusoutput)的最佳方法，它返回命令返回代码和输出的元组。subprocess模块相当明显，但是，它不能直接替代 getstatusoutput [。](http://docs.python.org/library/subprocess.html#module-subprocess)[在有关getstatusoutput](https://stackoverflow.com/questions/10202078/python-getstatusoutput-replacement-not-returning-full-output)的相关问题中讨论了一个潜在的解决方案- 但是，我不打算重写原始函数（无论如何，它的 LOC 少于 10 个），但想知道是否有更直接的方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-05T14:05:45.800

没有直接替换，因为`commands.getstatusoutput`是一个糟糕的 API；它结合了 stderr 和 stdout，但没有提供单独检索它们的选项。

您应该使用的便利 API 是`subprocess.check_output`，如果命令失败，它将引发异常。

否则，它确实出现了一些缺陷，即`subprocess`没有提供在单个调用中检索输出和状态的方法，但它很容易解决；以下是链接问题的答案应该是：

```
def get_status_output(*args, **kwargs):
    p = subprocess.Popen(*args, **kwargs)
    stdout, stderr = p.communicate()
    return p.returncode, stdout, stderr 
```

如果您想`stdout`一起`stderr`使用，请使用`stderr=subprocess.STDOUT`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-02T16:53:58.707

getstatusoutput 回来了（来自 python 3.1）:) 见：[http ://docs.python.org/3.3/library/subprocess.html#legacy-shell-invocation-functions](http://docs.python.org/3.3/library/subprocess.html#legacy-shell-invocation-functions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-03T14:00:05.963

要回答标题中的问题：这里是基于 asyncio 的`getstatusoutput()`实现——它是[文档中的代码示例，经过修改以更紧密地遵循`subprocess.getstatusoutput()`接口](https://docs.python.org/3.4/library/asyncio-subprocess.html#example)：

```
import asyncio
import locale
from asyncio.subprocess import PIPE, STDOUT

@asyncio.coroutine
def getstatusoutput(cmd):
    proc = yield from asyncio.create_subprocess_shell(cmd,
            stdout=PIPE, stderr=STDOUT)
    try:
        stdout, _ = yield from proc.communicate()
    except:
        try:
            proc.kill()
        except ProcessLookupError: # process is already dead
            pass
        raise
    finally:
        exitcode = yield from proc.wait()
    # return text
    output = stdout.decode(locale.getpreferredencoding(False))
    # universal newlines mode
    output = output.replace("\r\n", "\n").replace("\r", "\n")
    if output[-1:] == "\n": # remove a trailing newline
        output = output[:-1]
    return (exitcode, output) 
```

它适用于 Windows 和 Unix。要运行它（[来自同一示例](https://docs.python.org/3.4/library/asyncio-subprocess.html#example)）：

```
import os
from contextlib import closing

if os.name == 'nt': # Windows
    loop = asyncio.ProactorEventLoop()
    asyncio.set_event_loop(loop)
else:
    loop = asyncio.get_event_loop()
with closing(loop):
    coro = getstatusoutput('python -m platform')
    exitcode, stdout = loop.run_until_complete(coro)
    if exitcode == 0:
        print("Platform:", stdout)
    else:
        print("Python failed with exit code %s: %s" % (exitcode, stdout)) 
```

# r - 控制 ggplot 图例中的线条颜色和线条类型

> ID：11344561
> 
> 赞同：66
> 
> 时间：2012-07-05T12:40:42.347
> 
> 标签：r, ggplot2

**背景**

德国有16个联邦州，其中10个属于西德，6个属于东德。在某些方面，例如某些癌症的死亡率，前西部 10 个州与前东部 6 个州之间存在持续差异。各个组内的州之间也存在差异。

为了显示各州之间的差异，绘制数据可能具有一定的意义，例如每个州的年龄标准化乳腺癌死亡率。16 行的情节并不总是一个好的选择，我不想就此展开讨论。有时，权力就是这样说的。

**问题**

区分绘图上的 16 条线可能很困难。为此，我通常使用包装中的颜色组合`RColorBrewer`（前十种颜色`Set3`加上该调色板的前六种颜色，对应于前西部的十个州和前东的六个州）和线型（一种线型用于东，西一个）。使用该`lattice`软件包，1998-2010 年各州的年龄标准化乳腺癌死亡率图可能如下所示：

![有效的xyplot](../Images/ab17cdb6d4adbbb06da462878f9230f3.png)

**问题**

我想用 做一个类似的情节`ggplot`，但我还没有弄清楚如何在图例中组合颜色和线型。到目前为止，我已经做到了这一点：

![不满意的ggplot](../Images/57d7f5af0ba0a9b0a1136009c5f02058.png)

如果可以在图例中组合颜色和线型`ggplot`，那么如何去做呢？

这是创建数据框和绘图的代码：

```
mort3 <- structure(list(State = structure(c(8L, 9L, 11L, 12L, 4L, 2L, 
6L, 13L, 3L, 5L, 7L, 10L, 14L, 15L, 1L, 16L, 8L, 9L, 11L, 12L, 
4L, 2L, 6L, 13L, 3L, 5L, 7L, 10L, 14L, 15L, 1L, 16L, 8L, 9L, 
11L, 12L, 4L, 2L, 6L, 13L, 3L, 5L, 7L, 10L, 14L, 15L, 1L, 16L, 
8L, 9L, 11L, 12L, 4L, 2L, 6L, 13L, 3L, 5L, 7L, 10L, 14L, 15L, 
1L, 16L, 8L, 9L, 11L, 12L, 4L, 2L, 6L, 13L, 3L, 5L, 7L, 10L, 
14L, 15L, 1L, 16L, 8L, 9L, 11L, 12L, 4L, 2L, 6L, 13L, 3L, 5L, 
7L, 10L, 14L, 15L, 1L, 16L, 8L, 9L, 11L, 12L, 4L, 2L, 6L, 13L, 
3L, 5L, 7L, 10L, 14L, 15L, 1L, 16L, 8L, 9L, 11L, 12L, 4L, 2L, 
6L, 13L, 3L, 5L, 7L, 10L, 14L, 15L, 1L, 16L, 8L, 9L, 11L, 12L, 
4L, 2L, 6L, 13L, 3L, 5L, 7L, 10L, 14L, 15L, 1L, 16L, 8L, 9L, 
11L, 12L, 4L, 2L, 6L, 13L, 3L, 5L, 7L, 10L, 14L, 15L, 1L, 16L, 
8L, 9L, 11L, 12L, 4L, 2L, 6L, 13L, 3L, 5L, 7L, 10L, 14L, 15L, 
1L, 16L, 8L, 9L, 11L, 12L, 4L, 2L, 6L, 13L, 3L, 5L, 7L, 10L, 
14L, 15L, 1L, 16L, 8L, 9L, 11L, 12L, 4L, 2L, 6L, 13L, 3L, 5L, 
7L, 10L, 14L, 15L, 1L, 16L), class = "factor", .Label = c("SH", 
"HH", "NI", "HB", "NW", "HE", "RP", "BW", "BY", "SL", "BE", "BB", 
"MV", "SN", "ST", "TH")), BCmort = c(16.5, 16.6, 15, 14.4, 13.5, 
17.1, 15.8, 16.3, 18.3, 16.8, 17, 18.1, 13.1, 15.1, 18.8, 13.1, 
16.4, 16.1, 15.8, 12.8, 16.3, 19.2, 16.8, 13, 17.9, 17, 19.4, 
19.4, 13.1, 13.8, 18.1, 13.8, 15.9, 17.3, 17.5, 13.7, 17.4, 17.5, 
16.7, 15.5, 18.1, 18, 20.1, 19.1, 11.8, 14.6, 18.2, 13.4, 16.8, 
17.5, 15.6, 14.1, 13.9, 18.2, 17.1, 15.2, 18.1, 16.6, 19.3, 18.6, 
13.1, 14.6, 19.6, 12.4, 16.6, 17.8, 17.5, 14.3, 20.5, 19.2, 19, 
12.6, 19.5, 17.8, 19.2, 21, 14.4, 13.4, 19.8, 14, 17.5, 18.9, 
16.4, 14.7, 17.7, 20.1, 18.5, 14.5, 19.1, 19.2, 20.1, 19.7, 14.2, 
16.2, 17.9, 12.6, 18, 18.7, 17.7, 16.5, 16.6, 20.3, 18.1, 15.2, 
19, 20, 19.8, 21.3, 13.8, 14.8, 20.4, 14.8, 18.2, 18.7, 16.9, 
16.2, 20.2, 20.4, 18.5, 14, 20.2, 18.7, 20.3, 17.7, 14.4, 14.5, 
21.7, 13.7, 18.3, 19.7, 17.8, 16.5, 20.2, 21.7, 18.8, 16.7, 20.4, 
20, 19.6, 22.9, 15.2, 14.9, 21.7, 14.6, 18.3, 19.7, 17, 16.7, 
22.9, 16.2, 19.6, 15.9, 20.3, 19.9, 18.9, 21.8, 14.9, 18, 21.4, 
16.1, 19.6, 19.2, 19.1, 16.7, 20, 18.2, 20.5, 15.5, 20.5, 21.1, 
21.3, 23.8, 15.8, 15.3, 21.3, 15.7, 19.6, 20.3, 19.2, 17.4, 18.1, 
23.1, 20.6, 16.2, 21.5, 20.3, 21.4, 20.8, 16.1, 15.8, 22.1, 14.5, 
20, 20.2, 19, 18.7, 23.1, 21.8, 19.4, 17.4, 20.9, 20.5, 20.4, 
23.2, 16.3, 17.6, 23.1, 16.5), year = c(2010, 2010, 2010, 2010, 
2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 
2010, 2009, 2009, 2009, 2009, 2009, 2009, 2009, 2009, 2009, 2009, 
2009, 2009, 2009, 2009, 2009, 2009, 2008, 2008, 2008, 2008, 2008, 
2008, 2008, 2008, 2008, 2008, 2008, 2008, 2008, 2008, 2008, 2008, 
2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 
2007, 2007, 2007, 2007, 2007, 2006, 2006, 2006, 2006, 2006, 2006, 
2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2006, 2005, 
2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 
2005, 2005, 2005, 2005, 2004, 2004, 2004, 2004, 2004, 2004, 2004, 
2004, 2004, 2004, 2004, 2004, 2004, 2004, 2004, 2004, 2003, 2003, 
2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 2003, 
2003, 2003, 2003, 2002, 2002, 2002, 2002, 2002, 2002, 2002, 2002, 
2002, 2002, 2002, 2002, 2002, 2002, 2002, 2002, 2001, 2001, 2001, 
2001, 2001, 2001, 2001, 2001, 2001, 2001, 2001, 2001, 2001, 2001, 
2001, 2001, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 
2000, 2000, 2000, 2000, 2000, 2000, 2000, 1999, 1999, 1999, 1999, 
1999, 1999, 1999, 1999, 1999, 1999, 1999, 1999, 1999, 1999, 1999, 
1999, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 1998, 
1998, 1998, 1998, 1998, 1998, 1998), eastWest = structure(c(1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 2L, 1L, 1L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 1L, 2L), .Label = c("west", 
"east"), class = "factor")), .Names = c("State", "BCmort", "year", 
"eastWest"), class = "data.frame", row.names = c(NA, -208L))

colVec<-c(brewer.pal(10,"Set3"),brewer.pal(6,"Set3"))
ltyVec<-rep(c("solid","dashed"),c(10,6))

ggplot(mort3, aes(x = year, y = BCmort, col = State, lty = eastWest)) +
  geom_line(lwd = 1) +
  scale_linetype_manual(values = c(west = "solid", east = "dashed")) +
  scale_color_manual(values = c(brewer.pal(10, "Set3"), brewer.pal(6, "Set3"))) +
  opts(title = "BC mortality")

xyplot(BCmort ~ year, data = mort3, groups = State, lty = ltyVec,
  type = "l", col = colVec, lwd = 2,
  key = list(lines = list(lty = ltyVec, col = colVec, lwd = 2),
  text = list(levels(mort3$State)), columns = 1,
  space = "right", title = "State"), grid = TRUE, main = "BC mortality") 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-05T12:51:29.020

诀窍是将`colour`和映射`linetype`到`State`，然后定义`scale_linetype_manual`16 个级别：

```
ggplot(mort3, aes(x = year, y = BCmort, col = State, linetype = State)) +
  geom_line(lwd = 1) +
  scale_linetype_manual(values = c(rep("solid", 10), rep("dashed", 6))) +
  scale_color_manual(values = c(brewer.pal(10, "Set3"), brewer.pal(6, "Set3"))) +
  opts(title = "BC mortality") +
  theme_bw() 
```

![在此处输入图像描述](../Images/f3c51ff6a35ed96678ae5dc2945df6c0.png)

# extjs - 从 App.JS 调用 Store

> ID：11344562
> 
> 赞同：0
> 
> 时间：2012-07-05T12:40:42.470
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

我在 app.js 文件中。当用户成功登录到系统时，有一个函数会被执行；

```
loginSuccess: function() {

this.getViewport().getLayout().setActiveItem(1).store.load();   // Calls the Store of the i need to navigate 
        this.getViewport().getLayout().setActiveItem(1);  // The view i will be navigating

} 
```

我收到一条错误消息`this.getViewport().getLayout().setActiveItem(1).store is undefined`。我想我以错误的方式称呼商店。我怎么能纠正这个？我如何从 app.js 调用商店？

**更新**

```
var st = Ext.getStore('myStore');
        st.load();
        st.on('load', function() { 
            this.getViewport().getLayout().setActiveItem(1);  

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:13:22.557

启动商店加载的正确方法是：

```
var st = Ext.getStore('MyStore');
st.load(); 
```

请记住，加载是异步过程，因此如果您希望在加载存储后执行某些操作，您不能只在之后编写代码`load()`- 您需要订阅该`load`事件。

# javascript - 更新对象的一部分有效，但它甚至在我更新它之前更新

> ID：11344564
> 
> 赞同：1
> 
> 时间：2012-07-05T12:40:44.770
> 
> 标签：javascript

我正在更新对象的一部分并且更新工作正常。当我在调用更新功能之前对对象执行控制台.log 时，对象已经更新。我期待看到对象的旧副本，我知道我在做一些非常愚蠢的事情。我只是想了解为什么会这样。这是我的代码

```
function updateObject(o){
            o.a='oneHundred';
            o.b='twoHundred'
        }

        var obj={
            a : 'one',
            b : 'two',
            c : {
                    a : '',
                    b : ''
                }
        }

        console.log(obj);//outputs the updated object before I call updateObject()

        var upObject = obj.c ;

        updateObject(upObject);

        console.log(obj); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:43:21.407

Chrome（可能还有萤火虫）在您观察对象之前实际上不会记录对象的当前状态。如果你像这样在代码中设置断点：

```
 console.log(obj);//outputs the updated object before I call updateObject()
    debugger; // force breakpoint
    var upObject = obj.c ;

    updateObject(upObject);

    console.log(obj); 
```

然后展开对象你会看到它是未更新的版本。您最好尽可能记录您想要查看的特定属性，而不是整个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:48:22.950

Chrome 将在控制台中显示对象*本身*，而不是该时间点的对象表示。您可以调用`stringify`以获取快照并记录它，以便在您更改对象时它不会更改。

```
console.log(JSON.stringify(obj)); 
```

# css - 我的 dropkick 插件的下拉菜单看起来很奇怪

> ID：11344570
> 
> 赞同：0
> 
> 时间：2012-07-05T12:40:57.163
> 
> 标签：css, ruby-on-rails, jquery-plugins

我的 dropkick 看起来很奇怪 - [http://i.imgur.com/0itAA.png](http://i.imgur.com/0itAA.png)

容器大于下拉列表。

我的html：

```
 <div class="text_over_field">   
    <b>Your language preferences</b>
    <b>This is language you would like Print-it-Green service to be displayed in</b>
  </div>
<div class="field">
    <div class="dk_container dk_theme_default" id="dk_container_color" tabindex="7"  style="display: block; ">
        <a class="dk_toggle" style="width: 149px; ">
            <span class="dk_label">English</span></a>
        <div class="dk_options" style="top: 29px; ">
            <ul class="dk_options_inner">
                <li class="dk_option_current"><a data-dk-dropdown-value="">English</a></li>
                <li class=""><a data-dk-dropdown-value="#E15A01">Israeli</a></li>
                <li class=""><a data-dk-dropdown-value="#604A42">Ukrainian</a></li>
            </ul>
        </div>
    </div>
</div>
 <div class="submit" >
</div> 
```

[检查**CSS**标记](https://dl.dropbox.com/u/86122402/files/application.css)

[检查**HTML**标记](https://dl.dropbox.com/u/86122402/files/form.htm)

全部都包含在 form_for_new 类中。此外，它使我的表格崩溃。

你能说什么呢？

# android - 如何以编程方式将文件从 android 发送到 wifi 打印机并打印文件？

> ID：11344572
> 
> 赞同：4
> 
> 时间：2012-07-05T12:41:00.370
> 
> 标签：android, printing, wifi

我正在为 Android 2.1 中的餐厅开发购物车应用程序。我想在用户提交订单时打印订单详情（客户详情、购物车详情、订单总额）。我想使用一些 WIFI 打印机来打印数据。请帮我举出合适的例子......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:26:27.523

1) 您将使用的无线打印机通常随打印机提供 SDK 或驱动程序。因此，它基本上很容易集成到您的应用程序中。在我的情况下，我使用： http: [//www.starmicronics.com/printer/home.aspx](http://www.starmicronics.com/printer/home.aspx)

2) 要打印您的单据，您需要将单据转换为位图或字节再次取决于 SDK 的要求，例如他们需要信息的格式。所以在这个阶段你将在位图中转换你的视图/布局。

这是我做的方式，取决于特定的打印机要求。因此，首先要了解您的要求是什么。

也有支持蓝牙配置文件的打印机。如果您需要更多信息，请与我们联系。

# asp.net - 如何扩展 aspnet 成员身份验证表？

> ID：11344585
> 
> 赞同：6
> 
> 时间：2012-07-05T12:41:34.420
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, form-authentication

`realName`除了用户的用户名和电子邮件地址之外，我还想添加一个字段。

过去，我创建了一个新表，其中包含用户注册时的`username`和列。`realName`但是我想知道是否可以扩展默认的 asp.net 表单身份验证成员表或用户表（或任何必要的表，将其添加到），而不是为此信息创建一个新表。

**问题：**如何向身份验证表添加新列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T12:45:30.627

您应该使用 Membership [User Profile](http://msdn.microsoft.com/en-us/library/2y3fs9xs(v=vs.100).aspx) API 将自定义属性扩展到您的用户，而不是直接将列添加到`aspnet_Membership`和`aspnet_Users`表。

您还可以查看[SqlTableProfileProvider](http://www.asp.net/downloads/sandbox/table-profile-provider-samples)

并确保您[在此处](https://stackoverflow.com/questions/426609/how-to-assign-profile-values)阅读了 Joel 和 Colivier关于如何创建强类型配置文件类的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:33:44.207

如果这是一个 Web 应用程序项目，您将需要使用自定义配置文件类，因为配置文件仅与网站模型一起开箱即用：

[http://www.codersbarn.com/post/2008/07/10/ASPNET-PayPal-Subscriptions-IPN.aspx](http://www.codersbarn.com/post/2008/07/10/ASPNET-PayPal-Subscriptions-IPN.aspx)

[http://weblogs.asp.net/joewrobel/archive/2008/02/03/web-profile-builder-for-web-application-projects.aspx](http://weblogs.asp.net/joewrobel/archive/2008/02/03/web-profile-builder-for-web-application-projects.aspx)

# javascript - 如何填写有文字使用Javascript？

> ID：11344587
> 
> 赞同：0
> 
> 时间：2012-07-05T12:41:57.000
> 
> 标签：javascript, html, html-select

我想填写并提交如下表格：

```
<form action="http://www.test.com/school" method="post">
<select name="days">
   <option value="2">Monday</option>
   <option value="1">Tuesday</option>
   <option value="3">Wednesday</option>
   <option value="4">Thursday</option>
   <option value="5">Friday</option>
   <option value="6">Saturday</option>
   <option value="7">Sunday</option>
</select>
<input type="submit" value="submit" id="submitday"> 
```

我不想从选项中选择，所以我必须创建另一个表单。

```
<form action="http://www.test.com/school" method="post">
  <input type="text" name="days">
  <input type="submit" value="submit" id="submitday"> 
```

当我想选择星期三时，我需要在文本框中输入值 3，然后单击提交。有用。

但我想知道是否有任何方法可以让我只在文本框中输入周三而不是值并毫无问题地发布它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:03:47.850

你的问题定义不够明确，有一个明确的目标总是有帮助的。

1.) 即使我们几乎完全超出了使用具有相同值的 id="same_as" name="same_as" 很重要的点，但我仍然强烈推荐这种做法（旧的 Internet Explorer 错误）。您需要充分利用标签元素（clicky clicky），因为它为用户提供了更多的点击区域来获得焦点（元素、复选框、文本等）。

2.) 您需要使用**in 运算符**来发现可用的工具...

**XHTML**

```
<textarea id="dom_methods"></textarea> 
```

**JavaScript**

```
for (i in document.getElementById('select_element_id')
{
 document.getElementById('methods').value = document.getElementById('methods').value+'\n'+i;
} 
```

这将让您发现与例如 select 元素相关联的不同方法/函数/对象/等。请记住，每个对象都可能有自己的孩子。你可以做...

```
for (i in window) {}
for (i in window.document) {}
for (i in document.getElementById('select_element_id')) {} 
```

包括 Mozilla 开发者网络在内的良好资源在这里...

[https://developer.mozilla.org/en/](https://developer.mozilla.org/en/)

我绝对最大的一条建议是不要使用框架，因为你会很快偏离学习实际语言并立即继承一些你不会意识到的高级问题。在 JavaScript 帖子中张贴美元符号 ($) 的人通常是很好的赠品，除非您明确要求提供与框架相关的答案，否则他们没有回答您的问题。

如果您修改您的问题并回复我的答案，我很乐意将我的答案附加到您想要完成的工作中。

* * *

**第二部分**

如果你想创建一个元素，你应该使用 createElement 方法......

创建元素并给它你想要的值......

```
var d = document.getElementById('days');
var input_day = document.createElement('input');
input_day.setAttribute('id','days');
input_day.setAttribute('name','days');
input_day.setAttribute('type','text');
input_day.setAttribute('value',d.options[d.selectedIndex].text); 
```

重要的！JavaScript 有 QUIET 错误，你会在发布它们之前与它们斗争几天，然后有人随便指出它们。所以要格外小心使用变量的短名称（例如，不要使用 var in = ''; 因为“in”是一个运算符，会导致无提示的错误），因为您的代码根本不会执行或做奇怪的事情。

现在你有一些有效的选择来把这个新元素放到页面中......

1.) 使用`appendChild`会将元素放在父容器的*末尾...*

```
document.getElementById('form_id').appendChild(d); 
```

您应该使用字段集（通常一个很好）作为表单元素的直接子元素......

```
<form action="" method="post">
<fieldset>
<!--everything form related goes here -->
</fieldset>
</form> 
```

...在这种情况下，您可以执行以下操作（以帮助您熟悉示例并看到它们在您之前实际工作）...

```
document.getElementById('form_id').getElementsByTagName('fieldset')[0].appendChild(d); 
```

注意 [0]，它指的是*第一个*字段集元素，如果有两个，并且您想将新元素附加到第二个元素中，您将使用 [1]（第三个是 [2]，依此类推）。此外，如果页面只包含一个表单和一个字段集，您可以删除第一部分（这样您就可以看到事物是如何构造的）......

```
document.getElementsByTagName('fieldset')[0].appendChild(d); 
```

2.) 你通常会想使用`insertBefore`...

```
var f = document.getElementById('form_id');
var element_parent = f.getElementsByTagName('fieldset')[0];
var element_before = f.getElementsByTagName('select')[0];
parent_element.insertBefore(d,element_before); 
```

更多信息在这里...... [https://developer.mozilla.org/en/insertBefore](https://developer.mozilla.org/en/insertBefore)

**永远不要出于任何原因使用 INNERHTML ！！！**懒惰的程序员一直在使用它，却没有意识到它没有**正确**注册 DOM，因此当您尝试使用它们时，不会看到与该专有 Microsoft JScript 方法相关联的元素。仅出于这个原因，您应该避免使用诸如 jQuery 之类的框架，因为它们会跳到使用最简单的东西。Easy 无法完成工作，easy 使工作看起来完成了足够长的时间来支付单次薪水，然后如果你不有一天最终重写该给定区域中的所有代码（在你记得使用它很久之后以及你想要做什么）你会处于一个受伤的世界。

* * *

**第三部分**

JavaScript 是一种事件驱动的语言，事件是基于 DOM 的。DOM 和 JavaScript 是紧密联系在一起的不同事物。

您可以在此处阅读有关 DOM 事件的更多信息...

[https://developer.mozilla.org/en/DOM/event](https://developer.mozilla.org/en/DOM/event)

...这里有一个很好的 DOM 事件列表...

[http://en.wikipedia.org/wiki/DOM_events#HTML_events](http://en.wikipedia.org/wiki/DOM_events#HTML_events)

为了利用代码，您需要确定最符合您目标的事件。您是否在提交表单时尝试这样做？那将是提交。您是否在页面加载时尝试这样做？那将是onload。

通常，您可以无休止地重用事件，尽管您只能执行一次 onload 事件。

如果您访问我的网站并查看 JavaScript 代码，您会注意到三件事……

1.) 一个 index.js 文件，它只是函数。

2.) 具有有限数量的全局变量（在函数外部定义的变量）和匿名 onload 函数的 onload.js 文件。

因为如果你想做多件事（例如执行多个不相关的函数）你只能执行一次 onload 事件，你可以使用一个`anonymous function`没有名字的简单的函数......

```
window.onload = function()
{
 my_func1();
 my_func2();
 my_func3();
} 
```

请记住，您应该始终将脚本元素保留在`<head>`元素中，而*不是*元素中，`<body>`否则它将导致您走上糟糕的编码实践之路。

因此，如果您创建一个独立的测试文件，它可能看起来像这样......

**例子.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Test Page</title>
<script type="application/javascript">
//<![CDATA[
function form_days()
{
 var d = document.getElementById('days');
 var input_day = document.createElement('input');
 input_day.setAttribute('id','days');
 input_day.setAttribute('name','days');
 input_day.setAttribute('type','text');
 input_day.setAttribute('value',d.options[d.selectedIndex].text);
 d.parentNode.insertBefore(input_day,d.nextSibling);
}

function get_methods(o)
{
 var m = document.getElementById('dom_methods');
 var dom_list = new Array();

 for (i in o) 
 {
  dom_list.push(i);
 }

 dom_list.sort();

 for (var i=0; i<dom_list.length; i++)
 {
  m.value = m.value+dom_list[i]+'\n';
 }
}

window.onload = function()
{
 form_days();
 get_methods(document.getElementById('days').options[document.getElementById('days').selectedIndex]);
}
//]]>
</script>
<style type="text/css">
label {border: #000 dotted 1px; padding: 0px 2px 0px 2px;}
label:hover {border: #000 solid 1px;}
textarea {height: 500px; width: 400px;}
</style>
</head>

<body>

<form action="http://www.test.com/school" method="post">
<fieldset>
<label for="days">Day:</label>
<select id="days" name="days">
 <option value="2">Monday</option>
 <option value="1">Tuesday</option>
 <option value="3">Wednesday</option>
 <option value="4">Thursday</option>
 <option value="5">Friday</option>
 <option value="6">Saturday</option>
 <option value="7">Sunday</option>
</select>

<div><textarea id="dom_methods"></textarea></div>

<div><input type="submit" value="submit" id="submitday" /></div>

</fieldset>
</form>

</body>
</html> 
```

您应该能够将其复制并粘贴到文件中，将其命名为 example.xhtml。它功能齐全，经过测试并以最高标准工作。请记住，Internet Explorer 8 和更早版本无法使用 XHTML（应用程序/xhtml+xml）或理解 JavaScript 的*正确*媒体类型/mime，即应用程序/javascript，因此如果您需要在脚本元素上使用文本/javascript 向后兼容无效但会起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T12:46:47.443

好吧，您**可以**更改选项的值，例如像这样使用[jquery](http://jquery.com/)：

```
$('select[name=days] option').each(function(){
    $(this).val($(this).html());
});​ 
```

[http://jsfiddle.net/RCevC/](http://jsfiddle.net/RCevC/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T12:47:58.923

我*认为*当用户从下拉列表中选择选项时，您正在尝试更新文本输入？试试这个：

html:

```
<select name="days">
 <option value="2">Monday</option>
 <option value="1">Tuesday</option>
 <option value="3">Wednesday</option>
 <option value="4">Thursday</option>
 <option value="5">Friday</option>
 <option value="6">Saturday</option>
 <option value="7">Sunday</option>
</select>
<input type="text" id="your_input" /> <!-- I added this field to your code -->
<input type="submit" value="submit" id="submitday">    ​ 
```

javascript (jquery)

```
$('select[name=days]').change(function(){
    $('#your_input').val($(this).val());
});​ 
```

[http://jsfiddle.net/z3peu/2/](http://jsfiddle.net/z3peu/2/)

# android - 如何在后台启动地图活动并在需要时在 android 中查看？

> ID：11344590
> 
> 赞同：0
> 
> 时间：2012-07-05T12:42:07.667
> 
> 标签：android, android-intent, locationmanager, mapactivity

我正在制作一个安卓应用程序。我有一个主要活动，我想在主要活动中显示距离和速度。但是在主要活动上也有一个按钮查看地图。如果用户点击它，那么他/她应该在地图上看到他/她的行进轨迹。用户应该停止他/从主要活动中运行意味着用户应该能够回到主要活动然后停止。如何创建在后台运行的地图活动并在主要活动中显示距离和速度。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:51:24.277

您应该看看 Google MyTracks 应用程序，它完全符合您的要求，而且它是开源的。

[http://code.google.com/p/mytracks/](http://code.google.com/p/mytracks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:14:24.003

You should probably not think about having an `Activity` run in the background and instead have some other object that manages all the location information. Most of the time, you only have one Activity on screen and when its not on screen, it is paused and not working.

I would try to have an class that extends `LocationListener`, manage location information in that object, then whenever it is needed, plug the information into an appropriate View that is shown when the user presses "View Map" button you have.

# c# - Linq 在 C# 中比较两个集合

> ID：11344591
> 
> 赞同：4
> 
> 时间：2012-07-05T12:42:17.357
> 
> 标签：c#, linq

我想比较我目前正在使用嵌套“for”循环的 C# 中的两个集合。在 Linq 中是否有一种方法可以更快、更有效地做同样的事情？这是我当前的代码，它完美地工作只是寻找一种有效的方法：

```
OrgCollection myYears = Org.RetrieveDistinctYear();
if (myYears.Count > 0)
{
AcademicYearCollection allYears = AcademicYear.RetrieveAll();
for (int i = 0; i < myYears.Count; i++)
{
    for (int j = 0; j < allYears.Count; j++)
    {
        if (myYears[i].AcademicYearCode == allYears[j].Code)
        {
        ddlYear.Items.Insert(0, new ListItem(allYears[j].Name,allYears[j].Code));
        break;
        }
    }
}
} 
```

我想将 AcademicYearCollection 中的“代码”与 OrgCollection 中的“AcademicYearCode”属性进行比较，如果相同，则将其添加到下拉列表“ddlYear”中。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-05T12:46:34.230

您可以在 LINQ 中执行此操作，它提供了更短的代码。要知道它是否更有效，您必须对其进行分析。我认为 linq 的连接运算符在内部使用某种哈希桶，这应该可以提供更好的性能，尤其是在集合很大的情况下。您当前的解决方案是 O(N^2) 如果选项数量增加，它将迅速降级。

```
OrgCollection myYears = Org.RetrieveDistinctYear();
AcademicYearCollection allYears = AcademicYear.RetrieveAll();

var items = from y in myYears
            join ay in allYears
            on y.Code equals ay.AcademicYearCode
            select new { ay.Name, ay.Code } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:49:47.273

```
OrgCollection myYears = Org.RetrieveDistinctYear();
if (myYears.Count > 0)
{
    AcademicYearCollection allYears = AcademicYear.RetrieveAll();
    for (int i = 0; i < myYears.Count; i++)
    {
         if (allYears[j].Any(allY => allY ==  myYears[i].AcademicYearCode ))
            {
                ddlYear.Items.Insert(0, new ListItem(allYears[j].Name, allYears[j].Code));
                break;
            }

    }
} 
```

这可能是一个选项，但我认为扩展方法“任何”通过迭代以相同的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:16:53.883

此解决方案与您的原始解决方案具有相似的速度和效率，但可以通过更改`from y in myYears`为并行化`from y in myYears.AsParallel()`以可能加快速度。

```
OrgCollection myYears = Org.RetrieveDistinctYear();
AcademicYearCollection allYears = AcademicYear.RetrieveAll();

var items = from y in myYears
            let match = allYears.FirstOrDefault( ay => y.AcademicYearCode == ay.Code)
            where match != null
            select new ListItem(match.Name, match.Code); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:03:46.773

这个怎么样

```
var allYears = AcademicYear.RetrieveAll().ToDictionary(y => y.Code, y.Name);

ListItem match = null;
foreach(var year in Org.RetrieveDistinctYear())
{
    if (allYears.HasKey(year.AcademicYearCode)
    {
        match = new ListItem(
                       allYears[year.AcademicYearCode], 
                       year.AcademicYearCode);
        break;
    }
}

if (match != null)
{
    ddlYear.Items.Insert(0, match); 
} 
```

在此处使用 a`Dictionary`可提供卓越的性能，并且匹配的 Org.RetrieveDistinctYear 结果越低，收益就越多。如果 的结果`RetrieveDistinctYear`通常很短或匹配位于顶部，则创建字典的开销将使代码不必要地变慢。

* * *

**编辑**

或者这种方法

```
var allYears = AcademicYear.RetrieveAll().ToDictionary(y => y.Code, y.Name);

var matchingCode = Org.RetrieveDistinctYear()
    .Select(y = y.AcademicYearCode)
    .FirstOrDefault(code => allYears.HasKey(code));

if (!string.IsEmptyOrWhitespace(matchingCode))
{
    ddlYear.Items.Insert(0, new ListItem(
                                 allYears[matchingCode], 
                                 matchingCode)); 
} 
```

# database - 将 DBCLOB/CLOB 转换为 XML

> ID：11344595
> 
> 赞同：1
> 
> 时间：2012-07-05T12:42:23.003
> 
> 标签：database, db2, clob

我们在将 DBCLOB 转换/转换为 XML 时遇到了问题。

**背景**

我们将一些 xml 数据存储在 DBCLOB (1073741823) 类型的列中。对于我们的要求之一，我们必须将此数据转换为`XML`类型，以便我们可以利用`Xquery`过滤结果。为了进行这种转换，我们使用以下 SQL 查询将 DBCLOB 转换为 XML 数据类型。

```
SELECT XMLCAST (XMLPARSE (DOCUMENT (CAST (CAST (COLUMN1 AS DBCLOB(32672)) AS VARCHAR (32672)))) AS XML from TABLE1 
```

**问题**

对于某些情况，DBCLOB 列中的数据大小超过 32672，并且由于我们通过 VARCHAR 将 DBCLOB 转换为 XML，因此输出限制为 32672，并且 XML 转换失败。

实现这种转换的方法是什么（clob to xml）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:48:52.987

实际上，我将它转换为 varchar，因为 XMLPARSE 函数需要一个字符串表达式。

再次浏览文档后，我将其转换为 blob，然后再转换为 XML。它有效，下面给出了有效的示例查询以供参考。

```
SELECT 
  XMLCAST (
    XMLPARSE (
      DOCUMENT CAST (
        COLUMN1 AS BLOB
      ) 
      PRESERVE WHITESPACE
    ) as XML
  ) 
FROM 
  TABLE1 
```

感谢您的支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:20:22.203

您在数据库中执行的任何转换都将受到您正在使用的数据类型的限制（例如，在您的示例中为 varchar 32672 KB）。

尝试改用[XMLSERIALIZE](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.ref.doc%2Fdoc%2Fr0022191.html)。

# javascript - 下拉菜单中的引导下拉菜单

> ID：11344596
> 
> 赞同：17
> 
> 时间：2012-07-05T12:42:25.667
> 
> 标签：javascript, html, css, twitter-bootstrap

是否可以使用 Bootstrap 制作多级下拉菜单？

所以这将是结构：

下拉菜单：
  - 第一个选项
  - 第二个选项
  - 此
      选项中的另一个下拉菜单
      - 第二个下拉菜单的第一个选项 - 第二个下拉菜单的第二个选项
  - 第一个下拉菜单的第三个选项

这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T12:52:08.630

检查[这个](http://jsfiddle.net/2Smgv/224/)它可能会帮助你。有人还问了这个问题[Twitter Bootstrap Multilevel Dropdown Menu](https://stackoverflow.com/questions/9758587/twitter-bootstrap-multilevel-dropdown-menu)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-01-25T11:44:08.347

按照这个链接[http://bootsnipp.com/snippets/featured/multi-level-dropdown-menu-bs3](http://bootsnipp.com/snippets/featured/multi-level-dropdown-menu-bs3) 使用 bootstrap 3.0 实现很好

# java - 将预先编写好的 SpringMVC + Hibernate 部署到 AWS

> ID：11344603
> 
> 赞同：1
> 
> 时间：2012-07-05T12:42:51.867
> 
> 标签：java, spring, hibernate, amazon-ec2, amazon-web-services

基本上，我已经编写了一个 webapp，它使用 SpringMVC + Spring-security 进行了休眠。

我有一个 EC2 帐户，我的问题是，当将它部署到云而不是像现在这样在本地服务器上时（使用 RDS 而不是像现在这样在 localhost 上安装 MySQL），我是否应该将战争复制到Tomcat安装EC2，还是通过Eclipse做所有事情？

将新的 Hibernate.cfg.xml 设置为指向 RDS 而不是 localhost 是否相对简单？

目前我只是将战争复制到服务器上并使用iptables将80映射到8080，但我认为我的部署路线很长......我还没有远程设置数据库层......

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:57:58.303

我习惯于将 WAR 文件部署到 EC2 实例（尽管使用 WebLogic 而不是 Tomcat），而且我认为将文件通过 FTP 传输到 EC2 实例比尝试通过 Eclipse 部署它们要简单得多。
对于您的其他问题，将 Hibernate.cfg.xml 指向 RDS 非常简单。只要您记得在 RDS 上提供正确的权限，您这样做可能不会有任何问题。希望能帮助到你。

# regex - 使用正则表达式匹配不是 html 标记的文本

> ID：11344604
> 
> 赞同：0
> 
> 时间：2012-07-05T12:43:11.687
> 
> 标签：regex

所以我试图创建一个正则表达式来匹配不同类型的 html 标记中的文本。在这两种情况下，它都应该匹配粗体文本：

```
<div class="username_container">
        <div class="popupmenu memberaction">
        <a rel="nofollow" class="username offline " href="http://URL/surfergal.html" title="Surfergal is offline"><strong><!-- google_ad_section_start(weight=ignore) -->**Surfergal**<!-- google_ad_section_end --></strong></a>
</div>

<div class="username_container">
        <span class="username guest"><b><a>**Advertisement**</a></b></span>
</div> 
```

我尝试使用以下正则表达式没有任何结果：

```
/<div class="username_container">.*?((?<=^|>)[^><]+?(?=<|$)).*?<\/div>/is 
```

这是我第一次在 stackoverflow 上发帖，所以如果我做了一些非常愚蠢的事情，我只能道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:54:24.007

使用正则表达式来解析 html 是……很难。请参阅您问题的评论中的链接。

你打算用这些比赛做什么？这是一个在控制台中记录结果的快速 jquery 脚本：

```
var a = [];
$('strong, b').each(function(){
    a.push($(this).html());
});

console.log(a); 
```

结果：

```
["<!-- google_ad_section_start(weight=ignore) -->**Surfergal**<!-- google_ad_section_end -->", "<a>**Advertisement**</a>"] ​ 
```

[http://jsfiddle.net/Mk7xf/](http://jsfiddle.net/Mk7xf/)

# javascript - 包括js和css不起作用

> ID：11344610
> 
> 赞同：0
> 
> 时间：2012-07-05T12:43:21.520
> 
> 标签：javascript, html, css

我正在尝试这个简单的 css 和 js 密码强度检查器。当 css 和 js 包含在如下文件中时，它工作得非常好。但是，如果我将 js 放在一个单独的文件中并将其包含在此文件中，它将无法正常工作。此外，如果我将 css 放在外部 css 文件中，它不会为页面设置样式。

要包括它，我只是简单地说：

```
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<script type="text/javascript" src="/js/js.js"></script> 
```

我看不出我做错了什么，或者它与代码有关，并且出于某种原因它需要在同一个文件中？

该文件是一个 php 文件，因为我稍后会向其中添加 php，但这并没有改变任何东西吗？

```
<html>
<head>
    <title>strength check</title>
    <style type="text/css">
    #passwordStrength {
        height:10px;
        display:block;
        float:left; 
    }
    .strength0 {
        width:150px;
        background:#cccccc;
    }     
    .strength1 {
        width:20px;
        background:#ff0000;
    } 
    .strength2 {
        width:40px;    
        background:#ff5f5f;
    } 
    .strength3 { 
        width:60px;
        background:#56e500;
    }
    .strength4 {
        background:#4dcd00;
        width:80px;
    } 
    .strength5 { 
        background:#399800;
        width:150px;
    } 
    </style>
    <script language="javascript" type="text/javascript">
    function passwordStrength(password) {

        var desc = new Array();
        desc[0] = "Very Weak";
        desc[1] = "Weak";
        desc[2] = "Better";
        desc[3] = "Medium";
        desc[4] = "Strong";
        desc[5] = "Strongest";

        var score = 0;

        //if password bigger than 6 give 1 point
        if (password.length > 6) score++;

        //if password has both lower and uppercase characters give 1 point      
        if ((password.match(/[a-z]/)) && (password.match(/[A-Z]/))) score++;

        //if password has at least one number give 1 point
        if (password.match(/\d+/)) score++;

        //if password has at least one special caracther give 1 point
        if (password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) score++;
        //if password bigger than 12 give another 1 point
        if (password.length > 12) score++;

        document.getElementById("passwordDescription").innerHTML = desc[score];
        document.getElementById("passwordStrength").className = "strength" + score;
    }​
    </script>   
</head>
<body>
    <input type="password" caption="password" name="password" onkeyup="passwordStrength(this.value);" size="60">
    <div style="font-size: 10px"; id="passwordDescription">Password Strength</div>
    <div class="strength0" id="passwordStrength"></div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:48:13.313

删除`/`链接开头的：

```
<link rel="stylesheet" type="text/css" href="css/style.css" />
<script type="text/javascript" src="js/js.js"></script> 
```

这`/`意味着您的文件位于域的根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:46:47.387

1.  做任何你尝试过的事情。
2.  在 Firefox 中打开页面。
3.  查看源代码
4.  在源页面中，您可以将脚本和 css 文件视为链接。
5.  点击链接。它将显示页面无法显示。

在这种情况下，您的包含位置是错误的！

将css和js放在正确的位置，直到第5步显示页面以外的东西无法显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:48:03.840

我不知道您使用的是什么服务器，但是如果您使用的是 Tomcat，则需要丢失源路径的前导斜杠。

尝试：

```
css/style.css 
```

代替

```
/css/style.css 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T12:50:09.583

尝试设置不带斜杠的路径——如果您的服务器的子目录中包含所有内容，那么斜杠可能会破坏路径。

```
<link rel="stylesheet" href="css/style.css" />
<script src="js/js.js"></script> 
```

在 HTML5 中，您还可以摆脱类型属性（以防万一您使用 HTML5 文档类型）。

# iphone - 需要澄清retainCount

> ID：11344612
> 
> 赞同：2
> 
> 时间：2012-07-05T12:43:35.960
> 
> 标签：iphone, objective-c, memory-management, properties, retaincount

> **可能重复：**
> [NSString retainCount 是 2147483647](https://stackoverflow.com/questions/5483357/nsstring-retaincount-is-2147483647)

假设我有一个名为**MyTestClass.h**的类。

三个 NSString 变量以不同的方式初始化

类结构看起来像

```
@interface MyTestClass : NSObject {

  NSString *testString1;
  NSString *testString2;
  NSString *testString3;

}

@property (nonatomic, retain) NSString *testString1;
@property (nonatomic, retain) NSString *testString2;
@property (nonatomic, retain) NSString *testString3;

@end 
```

**我的TestClass.m**

```
@implementation MyTestClass

@synthesize testString1, testString2, testString3;

-(id) init{

    self.testString1 = @"";

    [self setTestString2:@""];

    testString3 = @"";

} 
```

现在我打算创建一个**MyTestClass的对象**

```
MyTestClass *obj = [[MyTestClass alloc] init]; 
```

我认为在执行此代码行后**testString1**，**testString2**和**testString3** *retainCounts*将是**1**。

我纠正了我的朋友吗？

我可以知道如果我发布 testString3 会发生什么吗？

对此的任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:53:49.287

由于您在此示例中使用文字字符串`retainCount`并不重要（甚至不作为增量），因为这些字符串对象实际上不会被释放。

但是，如果您为每个属性分配运行时分配的字符串，则前两个将被保留，第三个则不会。由于您的属性被声明为保留，并且您在一个中使用点语法，而在另一个中使用“setProperty”语法，因此执行相同的设置器并保留传递给该设置器的对象。第三个示例您只是将属性的支持 ivar 设置为右侧的值，而不影响它的所有权。

值得注意的是，`retainCount`它只作为一个增量有用，不应该被认为是一个明确的数字。你永远不应该明确检查 的值`retainCount`，因为它的绝对值是不可预测的并且没有用。您似乎在您的问题中理解了这一点，但在处理 retainCount 时值得重申，以确保所有相关人员都理解它。

# wcf - WCF 接口作为参数

> ID：11344623
> 
> 赞同：7
> 
> 时间：2012-07-05T12:44:27.427
> 
> 标签：wcf

我在 OperationContract 中使用接口作为输入参数。但是当我在客户端生成代理类时。我无法访问实现 ITransaction 接口的接口或类的成员。我只是对象

1.  服务接口

    ```
    [ServiceContract]
    public interface IServiceInterface
    {
    [OperationContract]
    string SyncDatabase(ITransaction TransactionObject);
    } 
    ```

2.  服务等级

    ```
    class SyncService:IServiceInterface
    {

        public string SyncDatabase(ITransaction TransactionObject)
        {
        return "Hello There!!";    
        }
    } 
    ```

3.  界面

    ```
    public interface ITransaction
    {
        ExpenseData ExpData { get; set; }
        void Add(ITransaction transactionObject);
    } 
    ```

4.  数据合约

    ```
    [DataContract]
    public class Transaction:ITransaction
    {
        [DataMember]
        public ExpenseData ExpData
        {
            get;
            set;
        }

        public void Add(ITransaction transactionObject)
        {

        }

     } 
    ```

在上述情况下，我还应该在客户端复制 iTransaction 类和接口吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-20T14:55:38.147

您实际上需要让您的 ServiceContract 了解您作为参数传递的接口的实现，因此 WCF 会将其包含在 WSDL 中。

这应该有效：

```
[ServiceContract]
[ServiceKnownType(typeof(Transaction))]
public interface IServiceInterface
{
     [OperationContract]
     string SyncDatabase(ITransaction TransactionObject);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:21:50.130

使用`[KnownType(typeof(testClass))]`.

参考这些链接：

*   [msdn.microsoft.com/en-us/library/ms730167.aspx](http://msdn.microsoft.com/en-us/library/ms730167.aspx)
*   [www.codeproject.com/Tips/108807/Implementing-KnownType-Attribute](http://www.codeproject.com/Tips/108807/Implementing-KnownType-Attribute)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T16:15:54.297

尝试使您的接口成为`[DataContract]`并使用该`[KnownType]`属性来告诉 WCF 该接口的已知实现是什么。

```
[DataContract]
[KnownType(typeof(Transaction))]
public interface ITransaction
{
    [DataMember]
    ExpenseData ExpData { get; set; }
    void Add(ITransaction transactionObject);
} 
```

# javascript - setinterval javascript的ajax问题

> ID：11344629
> 
> 赞同：0
> 
> 时间：2012-07-05T12:44:49.363
> 
> 标签：javascript, ajax, youtube, setinterval

作为个人项目的一部分，我使用 Youtube API。你可以在这里看到我的网站：[www.lamusiquedelamour.com](http://www.lamusiquedelamour.com)

当用户到达时，它会加载 10 个视频。当用户在视频结束前 30 秒到达最后一个时，它会检查是否有即将播放的视频。是不是没有，它调用一个名为的函数，该函数`loadmore()`启动一个 ajax 请求来检索接下来的 10 个视频。

Youtube API 中没有实现视频的“当前时间”监听器，所以我要做的是`YoutubePlayerInfo()`在第一个播放器准备好时启动一个带有 setInterval 的函数。（当 YT 播放器准备就绪时，它会自动调用 onYoutubePlayerReady 函数）。

```
onYouTubePlayerReady: function(id) {
    if(!this.intervalYoutube) {
        inst = this;
        this.intervalYoutube = setInterval(inst.updatePlayerInfo, 250);
    }
} 
```

这是我的函数中有趣的部分`updatePlayerInfo`，它每 250 毫秒调用一次。

```
if( (inst.currentTrack().getElement().getDuration() - inst.currentTrack().getElement().getCurrentTime()) < 30) {
    if(!inst.isNext() && (inst.state != 3)) { 
        inst.state = 3;
        inst.loadmore();
    }
} 
```

isNext 函数只检查我的视频数组中是否有视频。因此，当没有即将播放的视频并且我的状态不是 3 时，我将状态设置为 3 并启动我的 ajax。这就是问题所在。

由于 Ajax 部分很慢并且有 250 毫秒的 setInterval，因此“loadmore”会被触发 1 到 3 次。

我认为在真正将状态设置为 3 之前，它正在等待退出 if。因此，如果 ajax 速度很快，它会调用 loadmore 一次，但这不是 100% 确定的。

3 个 loadmore 调用是“并行的”，它在第一个结束之前进入第二次和第三次。

这是我认为它正在做的事情：http: [//i.stack.imgur.com/3l4nP.jpg](http://i.stack.imgur.com/3l4nP.jpg)

你知道怎么打给我`loadmore()`一次吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:48:52.967

尝试使用`setTimeout`而不是`setInterval`...这样，计时器在前一个周期完成之前不会启动。您只需调用`setTimeout`一次即可开始循环，并在循环完成后再次重复操作。

```
onYouTubePlayerReady: function(id) {
        if(!this.intervalYoutube) {
            inst = this;
            this.intervalYoutube = setTimeout(inst.updatePlayerInfo, 250);
        }
} 
```

* * *

```
if( (inst.currentTrack().getElement().getDuration() - inst.currentTrack().getElement().getCurrentTime()) < 30) {
    if(!inst.isNext() && (inst.state != 3)) { 
        inst.state = 3;
        inst.loadmore();
    }
    this.intervalYoutube = setTimeout(inst.updatePlayerInfo, 250);
} 
```

* * *

`setTimeout(expression, timeout);`超时后运行代码/函数一次

`setInterval(expression, timeout);`以间隔运行代码/函数，它们之间的超时长度

# php - 使用 recaptcha 以表格形式发布

> ID：11344631
> 
> 赞同：0
> 
> 时间：2012-07-05T12:44:56.867
> 
> 标签：php, jquery, recaptcha

我有一个简单的表格

```
<form id="myform" action="formprocess.php" method="POST">
username:<input type="text" name="username">
password:<input type="password" name="password">
<?php if($_COOKIE("login-attempt")>"4"){
require_once "recaptchalib.php";
echo recaptcha_get_html($publickey, $error);
}?>
<input type="submit" value="Sign in" id="signIn" name="signIn""/>
</form> 
```

问题是验证码（recaptcha_response_field）也发布到formprocess.php页面，我希望这个验证码（recaptcha_response_field）值应该在这里检查是否正确，而不是用户名和密码的值应该提交给formprocess.php重新加载此页面并显示错误。我怎样才能做到这一点。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:47:40.770

好吧，在我看来，最简单的做法是在开头验证 CAPTCHA `formprocess.php`，如果它不起作用`die('CAPTCHA failed)`，则运行脚本。IE：

```
function verifyCAPTCHA(){
  //function that verifies the captcha...
}
if (!verifyCaptcha()){
  die('CAPTCHA Failed')
}
//the rest of your formprocess.php 
```

但是，如果您坚持`formprocess.php`与 CAPTCHA 验证分开，那么您可以改为将 form`action`属性更改为`action='captchaValidate.php'`.

`captchaValidate.php`然后看起来像：

```
function verifyCAPTCHA(){
  //function that verifies the captcha...
}
if (!verifyCaptcha()){
  die('CAPTCHA Failed')
}else{
  require('formprocess.php')
} 
```

当您说您想在“此处”验证 CAPTCHA 时，也许您的意思是说您想发送一个 AJAX 请求，您应该在其中查看[https://developers.google.com/recaptcha/docs /display](https://developers.google.com/recaptcha/docs/display)和他们的 AJAX API。您可以通过这种方式动态调用我提出的任一解决方案。另请查看[如何对我的 reCaptcha ajax api 进行发布请求？](https://stackoverflow.com/questions/3764633/how-to-do-a-post-request-for-my-recaptcha-ajax-api)

# ruby - sinatra/padrino 中是否有可用的渲染上下文？

> ID：11344640
> 
> 赞同：1
> 
> 时间：2012-07-05T12:45:22.063
> 
> 标签：ruby, sinatra, padrino

我正在尝试在 padrino 应用程序中使用[Exhibit 模式](http://objectsonrails.com/#ID-2656c30c-080a-4a4e-a53e-4fbaad39c262)，但要正确执行此操作，我需要访问渲染上下文。也就是说，我需要一些对象`context`，这样调用某些东西`context.render('accounts/index')`会产生与`render 'accounts/index'`从控制器内部调用时相同的输出（假设所有变量都设置相同，并且`app/views/accounts/index.erb`是一个模板文件）。

我在 padrino 公共 API 中找不到任何这样做的东西，所以我试图更深入地挖掘。控制器中已有`render`的方法包装了sinatra的`render`方法，这是一个私有的实例方法。所以它显然不是在类`MyApp`（即`Padrino::Application`子类）上定义的。`MyApp.new`结果是一个实例`Rack::Session::Cookie`而不是它自己的实例，并且我能找到的所有 padrino 方法都没有返回应用程序的现有实例，`context`如果我调用它的私有`render`方法，这将是该对象的合适候选者。

给定的 sinatra 和 padrino 的设计，这本质上是不是很难打扰，还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:10:51.570

我意识到只要我继续阅读，答案就在 Objects on Rails 书中。我需要从模板内显式传递上下文：`exhibit(object, self)`在模板内部会导致模板的渲染上下文作为第二个参数传递。当然。

我想这毕竟不是特定于帕德里诺的，当答案非常简单时，我正在寻找一些复杂的东西。

# java - OSGi/BND：根据操作系统的不同要求

> ID：11344645
> 
> 赞同：0
> 
> 时间：2012-07-05T12:45:42.267
> 
> 标签：java, osgi, bnd

我为 OSGi 创建了一个命令组件并使用 Apache Felix Shell。一个命令打开一个启动 SWT UI 的新线程。

在 BND 配置中，构建和运行该组件需要 SWT Bundle。现在的问题是，每个开发人员都必须更改配置并为他们的操作系统包含 SWT Bundle。此外，对于每个操作系统，都需要一个其他打包的 Bundle，唯一的区别是 jar 清单中的一行，需要其他 Bundle 才能启动。

BND 或 OSGi 中是否有任何技巧，我可以在其中设置依赖于当前运行系统的构建或运行依赖项？

像“org.eclipse.swt.{OS}.{WS}.{ARCH}”而不是“org.eclipse.swt.win32.win32.x86_64”？或者至少我可以在配置中要求特定的操作系统吗？因此，如果用户使用了错误的包，它会显示一个很好的错误而不是 ClassNotFound 异常？

另一个问题（http://stackoverflow.com/questions/2706222/create-cross-platform-java-swt-application/5784073#5784073）中描述的解决方案对我不起作用或更好我不知道这是怎么回事可以用 BND/OSGi 完成。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:38:21.660

bnd 可以使用包含。因此，创建一个标准配置并将其包含在特定于平台的 bndrun 文件中。

```
 bnd.bnd:
 # standard set that uses macros for the places where specials need to be insered
 -runbundles: \
        ....
        ${platformdeps}

 windows.bndrun:
 -include bnd.bnd
 platformdeps = org.eclipse.swt.win.x86.jar 
```

无论如何，看看bndtools。Neil Bartlett 在没有 PDE 的 bndtools 中构建 bndtools。所以他有所有平台的 bndrun 文件。

还有一个 ${if ... } 宏或 ${replace } 宏。如果人们仍然愿意为书籍付费而不是下载盗版......在那个小问题解决之前，看看[http://www.aqute.biz/Bnd/Bnd](http://www.aqute.biz/Bnd/Bnd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:54:25.840

Neil Bartlett 的“OSGi in Practice”一书中有一个关于 Fragment Bundles 的部分，其中提到了依赖于操作系统的配置。（但是，由于我实际上不需要这样做，所以我不能说这是否真的是您正在寻找的。）

本书： http: [//njbartlett.name/osgibook.html](http://njbartlett.name/osgibook.html)

（这不是一个很好的答案，但也许足以开始了。）

# java - Ubuntu 10.4 错误 Catalina 上的 Penthao BI 服务器

> ID：11344651
> 
> 赞同：0
> 
> 时间：2012-07-05T12:46:08.333
> 
> 标签：java, ubuntu-10.04, pentaho

我已经在 Ubuntu 10.4 上为 Pentaho 安装了 BI 服务器。当我使用 sh 命令从控制台启动 pentaho 并转到本地主机时，我的浏览器给了我无法连接的错误。我查看了 catalina.out 文件和我们写的这一行

> ./catalina.sh: 454: ”/usr/lib/jvm/java-7-oracle”/bin/java: 未找到

我不知道是什么原因造成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:09:51.260

Pentaho BI Server 不支持 Java7，请参见此处：

[http://jira.pentaho.com/browse/BISERVER-6923](http://jira.pentaho.com/browse/BISERVER-6923)

（虽然它可能有效，但鉴于上述问题意味着需要完成工作，似乎不值得冒险）

所以安装 java6，并确保你的 JAVA_HOME 设置正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:55:51.840

我猜你不应该在 /usr/lib/jvm/java-7-oracle 周围加上双引号。它可能来自某处设置的 JAVA_HOME 变量...

# codeigniter - 从 URL 中删除 index.php

> ID：11344656
> 
> 赞同：-3
> 
> 时间：2012-07-05T12:46:37.227
> 
> 标签：codeigniter

我正在使用 Codeigniter 2.1.0 并从 url中删除**index.php我遵循**[Codeigniter 2.0.0](http://taggedzi.com/articles/display/codeigniter-2-htaccess-and-friendly-urls)

但这对我不起作用。实际上我的网络应用程序网址是

```
http://localhost/my_site/admin/index.php/users 
```

而且我要

```
http://localhost/my_site/admin/users 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:09:24.333

嗨 Sajid 我用下面的代码试试我可能会解决你的问题。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    #RewriteBase /your_folder/

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f 
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:47:48.120

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteRule ^(.*)$ index.php/$1 [L] 
RewriteCond %{THE_REQUEST} ^[^/]*/index\.php [NC]
RewriteRule ^index\.php(.+) $1 [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:14:00.030

并且不要忘记打开您的配置文件 (application/config/config.php) 并编辑以下两个选项：

```
$config['base_url']
$config['index_page'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T11:46:15.177

您只需要在项目文件夹中创建 .htaccess 文件并写入：

重写引擎开启

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

 # Rewrite all other URLs to index.php/URL 
 RewriteRule ^(.*)$ index.php?url=$1 [PT,L] 

  </IfModule>
  <IfModule !mod_rewrite.c>
  ErrorDocument 404 index.php
  </IfModule>

   #And You don't need to define in base_url in config file:

   $config['base_url'] = '';// blank it.

   I hope it will work perfectly ... 
```

# blackberry - 黑莓自定义手机锁屏

> ID：11344658
> 
> 赞同：0
> 
> 时间：2012-07-05T12:46:45.523
> 
> 标签：blackberry, locking, screen

我正在开发一个具有独特功能的应用程序。每当用户锁定手机时，都会在锁定屏幕上方按下一个屏幕，上面有一个紧急按钮。每当用户按下该按钮时，用户就会被带到我的应用程序的另一个屏幕，该屏幕几乎没有他可以拨打电话的紧急号码。除了拨打这些号码（与锁定的电话相同）外，用户无法访问电话或应用程序的任何功能。我的问题是如何实现此功能。这样做的可能方法是什么？

对此的任何帮助都会很棒！

谢谢，鲁佩什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:46:38.123

您将需要请求，并被授予[ApplicationPermissions.PERMISSION_DISPLAY_LOCKED](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/applicationcontrol/ApplicationPermissions.html#PERMISSION_DISPLAY_LOCKED)权限。请参阅[ApplicationPermissionsManager](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/applicationcontrol/ApplicationPermissionsManager.html)的 API 文档。

# ruby-on-rails - Rails 控制器名称

> ID：11344659
> 
> 赞同：1
> 
> 时间：2012-07-05T12:46:45.890
> 
> 标签：ruby-on-rails, controller, routes

我是 Ruby on Rails 世界的新手。我想使用单数控制器名称而不是复数。

这是我想要实现的网址。

[http://foobar.com/admin/login](http://foobar.com/admin/login)

这是我尝试的

```
rails g controller admin::login 
```

当我尝试访问

```
http://foobar.com/admin/login 
```

我明白了

```
uninitialized constant Admin::LoginsController 
```

如何创建单数控制器而不是复数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:54:40.480

每当您违反 Rails 约定时，您首先要问自己的是为什么要那样做？如果您正在创建登录功能，您应该有一个管理员/用户控制器和一个会话控制器。您仍然可以使用嵌套资源和自定义路由创建 url /admin/login/，但在会话控制器中有逻辑。

但是，如果您出于某种原因确实需要更改它，您可以使用这种技术来做到这一点：[覆盖 rails3 中模型名称的默认复数](https://stackoverflow.com/questions/6178900/overide-default-pluralize-for-model-name-in-rails3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:55:05.707

您应该首先查看[rails 命名空间](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)。例如：

```
namespace :admin do
  resources :posts, :comments
  match 'login' => 'controller#action'
end 
```

它将生成带有`admin`前缀的路由。所以如果你想要单一的控制器，你应该更深入地研究变形器。检查以下链接：

*   [Rails 3 中的复数化和单数化（变形）](http://blog.thefrontiergroup.com.au/2011/06/pluralizations-and-singularizations-inflections-in-rails-3/)
*   [ActiveSupport::变形器](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html)

例如，将以下行添加到您的`config/initializers/inflections.rb`:

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.uncountable "login"
end 
```

当然，通常您应该使用用户`user`或`session`控制器进行`login`操作。例如，查看[devise gem](https://github.com/plataformatec/devise/)以获取更多信息和用法。

# c# - 通过 XMLReader 从 XML 文件中收集属性

> ID：11344666
> 
> 赞同：0
> 
> 时间：2012-07-05T12:47:23.123
> 
> 标签：c#, xml, xml-parsing

我有一个如下的 XML 文件。

```
<BOOK bnumber="1" bname="Book">
    <CHAPTER cnumber="1">
       <Sentence vnumber="1">This is the sentence 1.</Sentence>
       <Sentence vnumber="2">This is the sentence 2.</Sentence>
       <Sentence vnumber="3">This is the sentence 3.</Sentence>
   </CHAPTER>
   <CHAPTER cnumber="2">
       <Sentence vnumber="1">Hello World 1.</Sentence>
       <Sentence vnumber="2">Hello World 2.</Sentence>
       <Sentence vnumber="3">Hello World 3.</Sentence>
       <Sentence vnumber="4">Hello World 4.</Sentence>
  </CHAPTER>
  <CHAPTER cnumber="3">
       <Sentence vnumber="1">Good morning 1.</Sentence>
       <Sentence vnumber="2">Good morning 2.</Sentence>
       <Sentence vnumber="3">Good morning 3.</Sentence>
  </CHAPTER>
</BOOK> 
```

我想要的是收集“CHAPTER”的属性。目标是得到

```
Chapter={"Chapter 1";"Chapter 2","Chapter 3"}; 
```

目前我使用传统方法，

```
XmlDocument xdoc = new XmlDocument();
xdoc.Load(@"C:\books.xml"); //load the xml file into our document
XmlNodeList nodes = xdoc.SelectNodes(@"//BOOK/CHAPTER[@cnumber='" + chap
string sentences = "";
foreach(XmlNode node in nodes) {
   sentences += node.InnerText + "; ";
} 
```

但我想使用 XMLReader 因为 XML 文件很大，我不想将它加载到内存中。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:03:36.527

那么基本上你可以这样做：

```
 var chapters = new List<string>();
        using (XmlReader reader = XmlReader.Create(new StringReader(xmlString)))
        {
            reader.ReadToFollowing("CHAPTER");
            reader.MoveToFirstAttribute();
            string chapterNumber = reader.Value;
            chapters.Add("Chapter " + chapterNumber);
        } 
```

其中 xmlString 是您的 xml。

这将找到第一章并从中获取属性并将其添加到章节列表中。

# encoding - 如何并行编码多个视频（Debian）

> ID：11344667
> 
> 赞同：0
> 
> 时间：2012-07-05T12:47:25.603
> 
> 标签：encoding, parallel-processing, debian, mp4, x264

我想在 Linux Debian 中将一些视频文件编码为**MP4**和**X264格式。**

并行编码多个文件非常重要。例如，我想在双码机上并行编码两个视频，并将其他视频放入队列中。视频完成后，我希望免费核心对队列中的下一个视频进行编码。此外，即使这适用于 x264，我也不知道 MP4。

这里最好的方法是什么？x264 支持并行编码，但我不知道这是多个文件的并行编码还是单个视频的不同版本的并行编码。有没有办法可以将一个编码过程分配给 core1，另一个分配给 core2？

真诚的，沃尔芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:09:00.093

你真的需要并行编码多个视频（他们在比赛吗？），或者只是不让额外的处理器内核闲置？

无论哪种情况，[FFmpeg](http://ffmpeg.org/)都可以满足您的需求。

默认情况下，FFmpeg 将使用所有可用的 CPU 进行任何处理，从而可以更快地处理单个视频。但是，您也可以通过`-threads`参数明确指定要使用的核心数量，例如，`ffmpeg -i input.mov -threads 1 output.mov`将只使用一个核心。

但是，它没有任何内置队列，您仍然必须自己编写该方面的代码。

# objective-c - glDrawArrays 无法正确绘制

> ID：11344673
> 
> 赞同：8
> 
> 时间：2012-07-05T12:47:47.083
> 
> 标签：objective-c, xcode, macos, cocoa, opengl

我做了一个绘画程序。一切都按我的预期工作。但是在画画的时候，有时会发生一些奇怪的事情。

我运行应用程序，然后在图像上按鼠标左键。它应该从代码中得出点：

```
glEnableClientState(GL_VERTEX_ARRAY);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, brushTextura);
glPointSize(100);
glVertexPointer(2, GL_FLOAT, 0,GLVertices);
glDrawArrays(GL_POINTS, 0, count);
glDisableClientState(GL_VERTEX_ARRAY); 
```

在我按下的地方。`mouseDown`注册 mouseDown 位置，将其转​​换为 NSValue，发送到数组，然后在绘制之前，我将 NSValue 提取到 CGPoint 并将其发送到 GLfloat，以便它可以由 glDrawArrays 绘制。但无论我在图像上的哪个位置单击鼠标，它都会在坐标 (0,0) 处绘制点。之后，一切正常。见图片：

![鼠标点击](../Images/6c0035750994060c2ac11898d614be1a.png)

这是第一个问题。第二个问题是，当我用它（拖动按下鼠标）绘画时，有时会出现未绘制的点。图片：

![鼠标拖动](../Images/6d9bfd30f38d5122307c8549ef9a70dd.png)

当我继续拖动它消失。经过一些拖动后，它再次出现并再次消失。等等。图片：

![在此处输入图像描述](../Images/1f881b7a799f98ad4da70805432010aa.png)

任何想法为什么会发生？我将在下面发布代码：

* * *

鼠标向下：

```
- (void) mouseDown:(NSEvent *)event
{
    location = [self convertPoint: [event locationInWindow] fromView:self];
    NSValue *locationValue = [NSValue valueWithPoint:location];
    [vertices addObject:locationValue];

        [self drawing];
} 
```

鼠标拖动：

```
- (void) mouseDragged:(NSEvent *)event
{
    location = [self convertPoint: [event locationInWindow] fromView:self];
    NSValue *locationValue = [NSValue valueWithPoint:location];
    [vertices addObject:locationValue];

        [self drawing];
} 
```

绘画：

```
- (void) drawing {
int count = [vertices count] * 2;
NSLog(@"count: %d", count);
int currIndex = 0;
GLfloat *GLVertices = (GLfloat *)malloc(count * sizeof(GLfloat));
for (NSValue *locationValue in vertices) {
    CGPoint loc = locationValue.pointValue;
    GLVertices[currIndex++] = loc.x;
    GLVertices[currIndex++] = loc.y;    
 }
glEnableClientState(GL_VERTEX_ARRAY);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, brushTextura);
glPointSize(100);
glVertexPointer(2, GL_FLOAT, 0, GLVertices);
glDrawArrays(GL_POINTS, 0, count);
glDisableClientState(GL_VERTEX_ARRAY);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T07:32:05.407

您正在将`count`变量（在 中使用的变量`glDrawArrays`）设置为`[vertices count] * 2`，这看起来很奇怪。

的最后一个参数`glDrawArrays`是要绘制的顶点数，而在您的代码中，您似乎将其设置为数字的两倍（也许您认为它是浮点数？），这意味着您只是在第一个`count`顶点之后绘制垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:52:44.840

顶点未在您单击的确切位置呈现的事实应该暗示问题是您没有正确确定视图中的命中点。

您的代码有：

```
location = [self convertPoint: [event locationInWindow] fromView: self]; 
```

它告诉视图将点从其坐标 (self) 转换为同一视图的坐标 (self)，即使该点实际上是相对于窗口的。

要将点从窗口坐标转换为视图，请将该行更改为以下内容：

```
location = [self convertPoint: [event locationInWindow] fromView: nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:59:52.820

glDrawArrays 的参数定义为（GLenum 模式，GLint first，GLsizei 计数）。

第二个参数定义绘制时使用的顶点属性的第一个索引。您将 1 作为第一个索引传递，这使您的顶点坐标不匹配。我假设你想要 0 那里。

[http://www.opengl.org/sdk/docs/man/xhtml/glDrawArrays.xml](http://www.opengl.org/sdk/docs/man/xhtml/glDrawArrays.xml)

# java - 在 Java GUI 应用程序中调试用户事件

> ID：11344677
> 
> 赞同：0
> 
> 时间：2012-07-05T12:47:52.970
> 
> 标签：java, swing, jakarta-ee

我正在使用一个 Java 项目，它提供了一个用户界面来执行一些用户事件。它不像大多数 Swing/Gui 应用程序那样在 main() 中作为 Runnable 线程执行。相反，它在源代码中有几个类和表单文件，并使用另一个 Java 程序从命令行运行。但是当我试图通过单击某个输入按钮来读取某个文件时，系统无法读取该文件。系统将自定义错误消息写入项目文件夹中保存的名为 log.txt 的文件中。我已经尝试过 1\. 设置断点（应用程序不会在断点处停止） 2\. 进行控制台打印，即 System.out.println（控制台上没有打印）

所以这两种调试方式都失败了。我正在使用 Eclipse 3.5.2 SDK (Galileo)。如何调试我的应用程序上的用户事件？

下面列出了项目 DDMT 中的源类 DataImportPanel 的概要。它在 DataImportPanel.openHeteroFile(File) 方法中给出异常。

```
DDMT.core.DataImportPanel 
... 
DDMT.core.DataImportPanel.heteroDistributionModel 
...  
DDMT.core.DataImportPanel.initComponents() 
DDMT.core.DataImportPanel.initComponents().new ActionListener() {...} 
...
DDMT.core.DataImportPanel.initComponents().new MouseAdapter() {...} 
DDMT.core.DataImportPanel.initComponents().new ActionListener() {...} 
DDMT.core.DataImportPanel.jButton2ActionPerformed(ActionEvent) 
... 
DDMT.core.DataImportPanel.jButton3ActionPerformed(ActionEvent) 
DDMT.core.DataImportPanel.openHeteroFile(File) 
DDMT.core.DataImportPanel.jButton8ActionPerformed(ActionEvent)  
DDMT.core.DataImportPanel.openFile(File) 
DDMT.core.DataImportPanel.jButton15ActionPerformed(ActionEvent) 
DDMT.core.DataImportPanel.jRadioButton1ActionPerformed(ActionEvent)  
DDMT.core.DataImportPanel.buttonGroup1  
...
DDMT.core.DataImportPanel.jButton8 
DDMT.core.DataImportPanel.jButton9 
DDMT.core.DataImportPanel.jLabel1 
... 
DDMT.core.DataImportPanel.jList1 
... 
DDMT.core.DataImportPanel.jPanel1 
... 
DDMT.core.DataImportPanel.jRadioButton1 
...
DDMT.core.DataImportPanel.jScrollPane1 
... 
DDMT.core.DataImportPanel.jTabbedPane1 
DDMT.core.DataImportPanel.DistributionTypes 
DDMT.core.DataImportPanel.DoubleCellRenderer 
```

这是抛出数据导入异常的 openHeteroFile

```
private void openHeteroFile(File f)
{
    File file = null;
    try{
        file = f;
        file.createNewFile();
        FileReader reader = new FileReader(file);
        BufferedReader bReader = new BufferedReader(reader);

        //The vector that holds the number of columns
        attributeNames = new ArrayList<String>();

        //Read in the number of pairs
        String line = bReader.readLine();

        //load the file
        heteroDistributionModel = new DefaultListModel();
        line = bReader.readLine();
        while( line != null )
        {
            //Set up the RegEx matches
            heteroDistM = heteroDistP.matcher(line);
            firstM = firstP.matcher(line);
            firstM.find();
            String output1 = firstM.group()+" (";
            for( int j = 0; j< nodeTypes[0].length; j++)
            {
                if( controlClass.nodes[Integer.parseInt(firstM.group())].getNodeType().equals( nodeTypes[1][j]) )
                {
                    output1 = output1+nodeTypes[0][j]+")";
                }
            }
            String output2 = new String();
            while( heteroDistM.find() )
            {
                attributeNames.add(heteroDistM.group(1));
                output2 = output2 + " "+heteroDistM.group(1);
            }
            heteroDistributionModel.addElement(new String[]{output1, output2});
            line = bReader.readLine();
        }

        for (String attr : attributeNames) 
            System.out.println(attr); //debug

        jList3.setModel(heteroDistributionModel);
        jList3.setCellRenderer(new DoubleCellRenderer());
        bReader.close();
        reader.close();
    }catch(IOException ex)
    {
        controlClass.showError("Data Import: Error: File "+file.getPath()+" is not a valid Heterogeneous data file!");
    }catch(Exception ex)
    {
        ex.printStackTrace(); //debug
        controlClass.showError("Data Import: Error: Unknown problem reading file "+file.getPath()+"!");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:52:45.867

在启动调试器的运行按钮旁边有一个绿色的小瓢虫。

我会确保进行正确的调用。还要检查你的括号、中断和返回，以确保代码实际上正在被读取。请发布 SSCCE（简短、独立、正确的示例），以便我们查看您的代码以更好地帮助您。

编辑（在 OP 添加了一些代码之后）

我很确定您的问题出在哪里 file.createNewFile();

# eclipse - 无法在 Eclipse 中使用 Tomcat 7 运行 Maven 项目

> ID：11344678
> 
> 赞同：1
> 
> 时间：2012-07-05T12:47:55.310
> 
> 标签：eclipse, tomcat, maven, eclipse-wtp, m2e

我正在尝试通过 rickt click -> Run as -> Run on Server 在 Eclipse 中使用 Tomcat 7 运行我的 Maven 项目。

但得到这个例外：

```
05.07.2012 14:38:19 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.6.0_22\bin;.;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files (x86)\ImageMagick-6.6.5-Q16;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\TortoiseSVN\bin;C:\Program Files\SlikSvn\bin\;C:\Program Files\ant\bin;C:\Program Files (x86)\Common Files\Acronis\SnapAPI\;C:\Program Files\Java\jdk1.6.0_22;C:\Program Files (x86)\QuickTime\QTSystem\;D:\apache-maven-3.0.4\bin;C:\Program Files (x86)\Android\android-sdk\platform-tools;C:\Program Files (x86)\Android\android-sdk\tools;C:\Users\dt\AppData\Roaming\npm;C:\Program Files (x86)\nodejs\;C:\Program Files\Java\jdk1.6.0_22\bin
05.07.2012 14:38:20 org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:template' did not find a matching property.
05.07.2012 14:38:20 org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
05.07.2012 14:38:20 org.apache.coyote.ajp.AjpProtocol init
INFO: Initializing Coyote AJP/1.3 on ajp-8009
05.07.2012 14:38:20 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1171 ms
05.07.2012 14:38:20 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
05.07.2012 14:38:20 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.4
05.07.2012 14:38:23 org.apache.catalina.startup.ContextConfig checkHandlesTypes
WARNING: Unable to load class [groovy.jmx.builder.package-info] to check against the @HandlesTypes annotation of one or more ServletContentInitializers. 
java.lang.ClassFormatError: Illegal class name "groovy/jmx/builder/package-info" in class file groovy/jmx/builder/package-info
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2804)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1144)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1639)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1517)
    at org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:1952)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1915)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1802)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1761)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1747)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1252)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:315)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4700)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1028)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:773)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1028)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:278)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:429)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:662)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:592)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Exception in thread "main" java.lang.OutOfMemoryError: PermGen space
    at java.lang.Throwable.getStackTraceElement(Native Method)
    at java.lang.Throwable.getOurStackTrace(Throwable.java:591)
    at java.lang.Throwable.printStackTraceAsCause(Throwable.java:481)
    at java.lang.Throwable.printStackTrace(Throwable.java:468)
    at java.lang.Throwable.printStackTrace(Throwable.java:451)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:421) 
```

该项目是用 maven 构建的，没有任何错误（war 文件存在）...

**编辑**

groovy-all:1.7.4 由 gmaven-runtime-1.7:1.3 使用，它由我在项目中使用的 wro4j-extensions:1.4.7 使用。[java.lang.ClassFormatError: Illegal class name "groovy/jmx/builder/package-info" in class file groovy/jmx/builder/package-info](https://stackoverflow.com/questions/11281430/java-lang-classformaterror-illegal-class-name-groovy-jmx-builder-package-info)但是我如何告诉 wro4j 使用更新版本的 gmaven-runtime/groovy-全部？

**编辑2**

在我的 pom.xml 中设置：

```
 <dependency>
        <groupId>org.codehaus.groovy</groupId>
        <artifactId>groovy-all</artifactId>
        <version>2.0.0</version>
    </dependency> 
```

似乎解决了这个异常，但仍然得到以下信息：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Exception in thread "main" java.lang.OutOfMemoryError: PermGen space
    at java.lang.Throwable.getStackTraceElement(Native Method)
    at java.lang.Throwable.getOurStackTrace(Throwable.java:591)
    at java.lang.Throwable.printStackTraceAsCause(Throwable.java:481)
    at java.lang.Throwable.printStackTrace(Throwable.java:468)
    at java.lang.Throwable.printStackTrace(Throwable.java:451)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:421) 
```

**已解决** 添加`-XX:MaxPermSize=512m`到运行配置中的 VM 参数。问题解决了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:55:39.077

可能是由于以下错误：http: [//jira.codehaus.org/browse/GROOVY-4673](http://jira.codehaus.org/browse/GROOVY-4673)

# ssis - 重新部署 SSIS 包 - 缓存？

> ID：11344683
> 
> 赞同：13
> 
> 时间：2012-07-05T12:48:09.267
> 
> 标签：ssis, sql-server-2008-r2

我们最近注意到一个问题，重新部署的 SSIS 包有时似乎不包含最新的更改...当我使用记事本搜索 dtsx 时，我在代码中看到了修改后的脚本，因此更改肯定存在。

我的假设是 SSIS 包的脚本组件最终会在过程中的某个位置编译成程序集——这很可能是因为我认为 C# 代码如果没有先编译它就无法运行。因此，理论上，如果这些程序集最终会被缓存并且不会立即被覆盖（出于某种原因），这将解释这个问题。

唯一让我认为我的理论是正确的“证据”是，如果我在某个时候继续运行包，它会突然转移到新代码。

但是，到目前为止，我还没有找到为什么以及如何发生这种情况，如果是......有人可以帮忙吗？

**更新：** MSDN 说：“与可以指示脚本是否已预编译的早期版本不同，所有脚本都在 SQL Server 2008 集成服务 (SSIS) 和更高版本中进行了预编译。” - 如果通过*预编译*它们意味着运行预编译版本而不是实际包（我认为这是因为包本身似乎没有被编译，因为代码在记事本中可见）必须有一种方法来强制引擎覆盖预编译的程序集......但是如何？

**更新：** SSIS 的四个核心组件之一是*SQL ServerIntegration Services 服务*，它是一个 Windows 服务。显然，该服务将缓存组件/任务元数据，以便 SSIS 运行时引擎可以轮询缓存以查看已安装的内容，这可能有助于加快包加载时间。但是，如果包存储在文件系统中（而不是 SQL 集成服务中）并由代理作业执行，则代理作业将使用 64 位版本的 DTEXEC 来执行包。我还没有找到任何证据表明那里会涉及任何缓存，但肯定有一些选项可以在执行的验证阶段检查许多参数，例如版本号 - 可能是有原因的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T21:14:02.467

这对我不久前遇到的事情听起来有些熟悉。不幸的是，我不记得我到底是什么**时候**遇到这个的（所以我不能确定），但我**相信**我找到的修复是确保我之前明确地`Build | Build st_5bd541c294054c25b9e7eb55b92bd0e2`从脚本编辑器（VSTA）菜单调用了命令关闭窗口。（显然，每个脚本的具体项目名称会有所不同，因为它基于 GUID；但是，在 . 下只有一个可能的子菜单`Build`。）

显式调用该`Build`命令可确保脚本的二进制代码进行 ASCII 编码并保存在生成​​的 .dtsx 文件的 XML 中。我已经习惯了每次关闭脚本编辑器时总是为我构建的 SSIS 2005。显然，存在一些奇怪的边缘情况，即当编辑器关闭时，SSIS 2008 并不总是构建脚本项目。

顺便说一句，预编译的二进制文件似乎存储在源 XML 的标记中，称为`BinaryItem`：

```
 <DTS:Executable DTS:ExecutableType="Microsoft.SqlServer.Dts.Tasks.ScriptTask.ScriptTask, Microsoft.SqlServer.ScriptTask, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" DTS:ThreadHint="0">
    <DTS:Property DTS:Name="ObjectName">SCR_StepOne</DTS:Property>
    <DTS:ObjectData>
      <ScriptProject Name="ST_5bd541c294054c25b9e7eb55b92bd0e2" VSTAMajorVersion="2" VSTAMinorVersion="1" Language="CSharp" EntryPoint="Main" ReadOnlyVariables="User::FileOneName,User::OutputFolder" ReadWriteVariables="">
        <BinaryItem Name="\bin\release\st_5bd541c294054c25b9e7eb55b92bd0e2.csproj.dll">
          TVqQAAMAAAAEAAAA//8AALgAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
          AAAAgAAAAA4fug4AtAnNIbgBTM0hVGhpcyBwcm9ncmFtIGNhbm5vdCBiZSBydW4gaW4gRE9TIG1v
          ZGUuDQ0KJAAAAAAAAABQRQAATAEDADuOb04AAAAAAAAAAOAAAiELAQgAABAAAAAIAAAAAAAAPi8A
          AAAgAAAAQAAAAABAAAAgAAAAAgAABAAAAAAAAAAEAAAAAAAAAACAAAAAAgAAAAAAAAMAQIUAABAA 
```

可能值得检查您的源代码控制系统历史记录，以查看是否已针对某些棘手的错误进行了更新。

警告：我还没有找到关于此的官方 Microsoft 文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-02T13:07:17.740

您是否查看过 sysssispackages 以将 msdb 中包的版本内部版本号与 Visual Studio / SSIS 中的内部版本号进行比较？

```
SELECT name, verbuild
FROM msdb.dbo.sysssispackages
WHERE name LIKE '%bla%' 
```

（根据需要调整 WHERE 子句以找到您的包。永远不要“SELECT * FROM msdb.dbo.sysssispackages”，因为它在其中一列中包含包 XML。）

在 Visual Studio 中，打开包，然后右键单击包的背景并从上下文菜单中选择*“属性” 。*查看字段 VersionBuild。它应该与上面 SELECT 中的数字匹配！

我知道这不是您问题的实际解决方案，但它可能有助于找出问题的原因所在。如果数字较旧，则意味着您的包部署不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-02T15:05:27.747

这并没有专门解决您所拥有的谜团，但是如果您正在运行基于文件系统的包并且想要验证正在运行的包是您部署的包，那么有一种方法可以做到这一点。

1.  构建你的包。
2.  打开包上的属性并记下“版本构建”属性（或者，在记事本中打开 .dtsx 并找到 DTS:VersionBuild 属性。）
3.  部署你的包。
4.  在您的 SQL 代理作业步骤中，转到验证选项卡。
5.  在“Verify package build”输入框中输入Version Build。
6.  执行作业步骤。

我不知道这是否会强制 SSIS 丢弃其缓存并获取新部署的包，但我知道如果您手动修改 .dtsx 包的内部版本号，然后尝试重新运行作业步骤，它会失败，因为包构建与它正在寻找的不匹配，因此它肯定会对该值进行运行时检查。

# playframework-2.0 - 玩2.0“管理”控制台命令

> ID：11344685
> 
> 赞同：4
> 
> 时间：2012-07-05T12:48:18.160
> 
> 标签：playframework-2.0, sbt

我想创建一些自定义命令来管理我的 play 2.0 应用程序（类似于 Django 的管理命令），所以我可以运行`play import-data <data>`.

这似乎是通过编写 SBT 命令（如 Play 自己的命令）来完成的事情，但特定于特定项目并可以访问项目的资源（模型等）

作为 Scala 的新手，Play 和 SBT 的新手，我无法理解如何做到这一点，尤其是所涉及的依赖管理。[SBT 插件文档](https://github.com/harrah/xsbt/wiki/Plugins)非常好，但似乎假设我想创建独立的、已发布的插件，而不是依赖于主项目的插件。

有没有人知道类似的演练，或者对如何实施“管理命令”有任何具体建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:27:54.683

首先，您可以查看现有 Play 的 sbt-plugins：[https ://github.com/playframework/Play20/tree/master/framework/src/sbt-plugin/src/main/scala](https://github.com/playframework/Play20/tree/master/framework/src/sbt-plugin/src/main/scala)

# javascript - 如何在javascript中的每次刷新时生成一系列数字

> ID：11344687
> 
> 赞同：0
> 
> 时间：2012-07-05T12:48:24.073
> 
> 标签：javascript, sequence

在 javascript 中，我们可以使用 Random() 函数生成一个随机数。但是如何在每次刷新时生成一系列自然数。取一个 1 到 10 的范围。首先我应该得到 1，然后在每次刷新时应该生成 2、3、4……。帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:51:09.127

HTTP 协议是无状态的，这意味着您的浏览器/服务器每次刷新都会忘记之前的视图。因此，您的页面本身不能有“记忆”并记住以前的数字是什么。

当然，还有多种更复杂的解决方案。例如，您可以使用[cookie](/questions/tagged/cookies "显示标记为“cookies”的问题")、[httpsession](/questions/tagged/httpsession "显示标记为“httpsession”的问题")甚至一些 URL 技巧（哈希标签、查询参数）。场景总是相同的：在渲染/进入页面时检查前一个值并渲染/显示下一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:52:30.283

最简单的方法是使用 cookie 存储用户上次看到的数字。在第一次加载时，您的脚本检查并发现没有 cookie，因此它将数字设置为 1，并将其保存在 cookie 中。在下一次加载时，它看到有一个 cookie 写着“1”，所以它增加它并显示“2”，将*它*保存在一个 cookie 中，依此类推。一旦达到 10（您说的范围是 1-10），脚本的作用取决于您。

# adobe-indesign - InDesign 在同一 InDesign 图稿的单页中输出包含多个副本的 PDF

> ID：11344688
> 
> 赞同：0
> 
> 时间：2012-07-05T12:48:30.583
> 
> 标签：adobe-indesign

例如，如果我在 InDesign 中完成了名片设计，现在我需要为包含多份名片副本的打印机提供可打印的 PDF。你会怎么做？有没有具体的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:26:09.497

InDesign 不进行拼版（以特定顺序将页面放置在一个输出页面上）。你必须购买/找到一个工具，一个插件。像croptima dot com。或者在这个页面上，有一些有趣的东西： [http ://www.adobe.com/cfusion/exchange/index.cfm?l=6&s=5&o=desc&exc=19&cat=223&event=producthome](http://www.adobe.com/cfusion/exchange/index.cfm?l=6&s=5&o=desc&exc=19&cat=223&event=producthome)

或者手动完成，或使用 pdf 拼版工具。成功！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T11:10:10.797

导出为 PDF（带有您需要的任何标记）。获取文件路径。打开一个文本文件并输入：

```
file
/myFile.pdf
/myFile.pdf
/myFile.pdf
/myFile.pdf
/myFile.pdf
/myFile.pdf
/myFile.pdf
… 
```

一旦完成。转到 Indesign，设置一个将托管 pdf 并运行数据合并的框。你会很自由地得到你的拼版;）

洛伊克

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T17:51:22.040

我的错，您需要指定要放置带有尾随 arobase 的图像文件：

```
@pdfs
"/myFile.pdf"
"/myFile.pdf"
"/myFile.pdf"
… 
```

并指定文件的绝对路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:37:47.537

您需要布置多少张卡片？如果很少，您可以将 indd 文件流入另一个文档并复制框。

我没有测试，但也许你可以画一个网格并指向 indesign 文件。最佳方案，如果选择网格，则文件在每一帧中流动。

洛伊克

# oracle - 在 INSERT 查询中使用主键的顺序值

> ID：11344690
> 
> 赞同：2
> 
> 时间：2012-07-05T12:48:43.247
> 
> 标签：oracle

如何为具有顺序主键的 Oracle 数据库编写插入查询，以便插入语句自动获取序列中的下一个数字？

```
INSERT INTO LD_USER_ROLE(USER_ROLE_ID,INS_USER,INS_DATE, USERNAME) 
VALUES (100, 'sp22',to_date('2003/05/03 21:02:44','yyyy/mm/dd hh24:mi:ss'),'JOHN BARRY', ) 
```

在上面的语句中，我已经硬编码了键 'USER_ROLE_ID' 的值 100，但我想按照第一段中的说明进行更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T12:56:12.187

你为什么不像这样为你的序列创建一个触发器：

序列：

```
CREATE SEQUENCE LD_USER_ROLE_SEQ
    INCREMENT BY 1 START WITH 1 NOMAXVALUE NOMINVALUE NOCYCLE NOCACHE NOORDER 
```

扳机：

```
CREATE TRIGGER LD_USER_ROLE_INSERT BEFORE INSERT ON LD_USER_ROLE
    REFERENCING NEW AS NEW OLD AS OLD FOR EACH ROW
BEGIN
    SELECT LD_USER_ROLE_SEQ.NEXTVAL INTO :NEW.USER_ROLE_ID FROM DUAL;
END; 
```

触发器将在每次插入时自动获取下一个值/id（如 mysql 中的 auto_increment）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T13:05:49.503

除了使用触发器之外，您还可以直接在插入语句中使用序列：

```
CREATE SEQUENCE LD_USER_ROLE_SEQ;

INSERT INTO LD_USER_ROLE
   (USER_ROLE_ID,INS_USER,INS_DATE, USERNAME) 
VALUES 
   (ld_user_role_seq.nextval, 'sp22',to_date('2003/05/03 21:02:44','yyyy/mm/dd hh24:mi:ss'),'JOHN BARRY', ) 
```

# php - 遵循 Magento for Developers 教程第 4 部分后，Web 浏览器显示一个空白页面

> ID：11344692
> 
> 赞同：1
> 
> 时间：2012-07-05T12:48:52.250
> 
> 标签：php, xml, magento

我正在关注[Magento 知识库上的 Magento 开发人员教程，](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-4-magento-layouts-blocks-and-templates)在我到达第 4 部分（请参阅链接）之后，我遇到了一个问题。我已经完成了本教程这一部分中指定的更改，之后，使用“/helloworld/index/index”控制器，浏览器会显示一个完全空的输出。之前填充的“goodbye”和“params”控制器看起来不错，“showConfig”XML 输出也是如此。

任何人都可以对此有所了解吗？以下是我在第 3 部分末尾的检查点的不同之处：

```
diff -r 98d31339093e -r fd26e7cbf555 magento/magento/app/code/local/Magentotutorial/Configviewer/Model/Observer.php
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/magento/magento/app/code/local/Magentotutorial/Configviewer/Model/Observer.php    Thu Jul 05 09:02:36 2012 +0000
@@ -0,0 +1,32 @@
+<?php
+    class Magentotutorial_Configviewer_Model_Observer {
+        const FLAG_SHOW_CONFIG = 'showConfig';
+        const FLAG_SHOW_CONFIG_FORMAT = 'showConfigFormat';
+
+        private $request;
+
+        public function checkForConfigRequest($observer) {
+            $this->request = $observer->getEvent()->getData('front')->getRequest();
+            if($this->request->{self::FLAG_SHOW_CONFIG} === 'true'){
+                $this->setHeader();
+                $this->outputConfig();
+            }
+        }
+
+        private function setHeader() {
+            $format = isset($this->request->{self::FLAG_SHOW_CONFIG_FORMAT}) ?
+            $this->request->{self::FLAG_SHOW_CONFIG_FORMAT} : 'xml';
+            switch($format){
+                case 'text':
+                    header("Content-Type: text/plain");
+                    break;
+                default:
+                    header("Content-Type: text/xml");
+            }
+        }
+
+        private function outputConfig() {
+            die(Mage::app()->getConfig()->getNode()->asXML());
+        }
+    }
+?>
diff -r 98d31339093e -r fd26e7cbf555 magento/magento/app/code/local/Magentotutorial/Configviewer/etc/config.xml
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/magento/magento/app/code/local/Magentotutorial/Configviewer/etc/config.xml    Thu Jul 05 09:02:36 2012 +0000
@@ -0,0 +1,20 @@
+<config>
+    <modules>
+        <Magentotutorial_Configviewer>
+            <version>0.1.0</version>
+        </Magentotutorial_Configviewer>
+    </modules>
+    <global>
+        <events>
+            <controller_front_init_routers>
+                <observers>
+                    <Magentotutorial_configviewer_model_observer>
+                        <type>singleton</type>
+                        <class>Magentotutorial_Configviewer_Model_Observer</class>
+                        <method>checkForConfigRequest</method>
+                    </Magentotutorial_configviewer_model_observer>
+                </observers>
+            </controller_front_init_routers>
+        </events>
+    </global>
+</config>
diff -r 98d31339093e -r fd26e7cbf555 magento/magento/app/code/local/Magentotutorial/Helloworld/controllers/IndexController.php
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/magento/magento/app/code/local/Magentotutorial/Helloworld/controllers/IndexController.php Thu Jul 05 09:02:36 2012 +0000
@@ -0,0 +1,23 @@
+<?php
+class Magentotutorial_Helloworld_IndexController extends Mage_Core_Controller_Front_Action {
+
+    public function indexAction() {
+
+        echo 'Hello Index!';
+
+    }
+
+    public function goodbyeAction() {
+            echo 'Goodbye World!';
+    }
+
+    public function paramsAction() {
+        echo '<dl>';
+        foreach($this->getRequest()->getParams() as $key=>$value) {
+            echo '<dt><strong>Param: </strong>'.htmlspecialchars($key).'</dt>';
+            echo '<dt><strong>Value: </strong>'.htmlspecialchars($value).'</dt>';
+        }
+        echo '</dl>';
+    }
+}
+?>
diff -r 98d31339093e -r fd26e7cbf555 magento/magento/app/code/local/Magentotutorial/Helloworld/etc/config.xml
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/magento/magento/app/code/local/Magentotutorial/Helloworld/etc/config.xml  Thu Jul 05 09:02:36 2012 +0000
@@ -0,0 +1,18 @@
+<config>
+    <modules>
+        <Magentotutorial_Helloworld>
+            <version>0.1.0</version>
+        </Magentotutorial_Helloworld>
+    </modules>
+    <frontend>
+        <routers>
+            <helloworld>
+                <use>standard</use>
+                <args>
+                    <module>Magentotutorial_Helloworld</module>
+                    <frontName>helloworld</frontName>
+                </args>
+            </helloworld>
+        </routers>
+    </frontend>
+</config>
diff -r 98d31339093e -r fd26e7cbf555 magento/magento/app/etc/modules/Magentotutorial_Configviewer.xml
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/magento/magento/app/etc/modules/Magentotutorial_Configviewer.xml  Thu Jul 05 09:02:36 2012 +0000
@@ -0,0 +1,8 @@
+<config>
+    <modules>
+        <Magentotutorial_Configviewer>
+            <active>true</active>
+            <codePool>local</codePool>
+        </Magentotutorial_Configviewer>
+    </modules>
+</config>
diff -r 98d31339093e -r fd26e7cbf555 magento/magento/app/etc/modules/Magentotutorial_Helloworld.xml
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/magento/magento/app/etc/modules/Magentotutorial_Helloworld.xml    Thu Jul 05 09:02:36 2012 +0000
@@ -0,0 +1,8 @@
+<config>
+    <modules>
+        <Magentotutorial_Helloworld>
+            <active>true</active>
+            <codePool>local</codePool>
+        </Magentotutorial_Helloworld>
+    </modules>
+</config> 
```

以下是导致问题的新差异：

```
diff -r fd26e7cbf555 magento/magento/app/code/local/Magentotutorial/Helloworld/controllers/IndexController.php
--- a/magento/magento/app/code/local/Magentotutorial/Helloworld/controllers/IndexController.php Thu Jul 05 09:02:36 2012 +0000
+++ b/magento/magento/app/code/local/Magentotutorial/Helloworld/controllers/IndexController.php Thu Jul 05 12:13:55 2012 +0000
@@ -3,7 +3,10 @@

     public function indexAction() {

-        echo 'Hello Index!';
+        // remove our previous echo
+        // echo 'Hello Index!';
+        $this->loadLayout();
+        $this->renderLayout();

     }

diff -r fd26e7cbf555 magento/magento/app/code/local/Magentotutorial/Helloworld/simple_page.phtml
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/magento/magento/app/code/local/Magentotutorial/Helloworld/simple_page.phtml   Thu Jul 05 12:13:55 2012 +0000
@@ -0,0 +1,16 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
+        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+    <title>Untitled</title>
+    <meta name="generator" content="BBEdit 9.2" />
+    <style type="text/css">
+        body {
+            background-color:#f00;
+        }
+    </style>
+</head>
+<body>
+
+</body>
+</html>
diff -r fd26e7cbf555 magento/magento/app/design/frontend/base/default/layout/local.xml
--- /dev/null   Thu Jan 01 00:00:00 1970 +0000
+++ b/magento/magento/app/design/frontend/base/default/layout/local.xml Thu Jul 05 12:13:55 2012 +0000
@@ -0,0 +1,7 @@
+<layout version="0.1.0">
+    <default>
+        <reference name="root">
+            <block type="page/html" name="root" output="toHtml" template="../../../../../code/local/Magentotutorial/Helloworld/simple_page.phtml" />
+        </reference>
+    </default>
+</layout> 
```

提前致谢，

— 什洛米鱼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:54:37.750

```
<layout version="0.1.0">
    <default>
        <reference name="root">
            <block type="page/html" name="root" output="toHtml" template="../../../../../code/local/Magentotutorial/Helloworld/simple_page.phtml" />
        </reference>
    </default>
</layout> 
```

改成：

```
 <layout version="0.1.0">
    <default>
        <reference name="root">
            <block type="page/html" name="root" output="toHtml" template="magentotutorial/helloworld/simple_page.phtml" />
        </reference>
    </default>
</layout> 
```

然后将您的 simple_page.phtml 移动到：app/design/frontend/default/default/template/magentotutorial/helloworld/simple_page.phtml

那应该可以解决所有问题，我不相信您引用模板位置的方式是正确的。遵守约定总是最好的。

希望有帮助。:)

# wpf - Wpf 复选框触发器

> ID：11344698
> 
> 赞同：0
> 
> 时间：2012-07-05T12:49:23.230
> 
> 标签：wpf, xaml

试图将 WPF 上的`click`or`checked`事件绑定到我的视图模型`chekbox`中的 a `command`，但我不确定技术和事件名称，谁能指出我正确的方向？

现在代码编译但`trigger`不调用`FooCommand`

```
<CheckBox IsChecked="{Binding PartData.ReportIncluded, Mode=TwoWay}"  
          VerticalAlignment="Center">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseLeftButtonDown" >
            <i:InvokeCommandAction Command="{Binding FooCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</CheckBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:18:57.823

看起来您缺少事件的“On”前缀，即 OnMouseLeftButtonDown 或 OnPreviewMouseLeftButtonDown

# javascript - 对象的javascript索引是字符串而不是int

> ID：11344700
> 
> 赞同：-2
> 
> 时间：2012-07-05T12:49:28.457
> 
> 标签：javascript, string, object, counter

我想知道为什么我`pageCounter`的页面对象（见下文）被视为字符串而不是 int？为什么javascript不解释变量，而是使用变量名作为文字字符串？

```
for (var i in stories){
        //reset the counter when it hits the number of stories per page
        if (counter >= divsByPage) {
            counter = 1;
            pageCounter++;
        }

        //turn all the stories off
        //stories[i].style.display = "none";

        //insert a new story under a page array
        pages.push({pageCounter:stories[i]});

        counter++;
    } 
```

`console.log(pages[1]);`输出`Object { pageCounter=[1]}`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:54:43.637

如果要`pageCounter`用作变量而不是名称，则需要这样做：

```
var object = {};
object[pageCounter] = stories[i];
pages.push(object); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:55:04.383

对象字段名称（即`pageCounter`in `{pageCounter:stories[i]}`is）始终是字符串（或类似字符串）。`pageCounter`in与你正在增加`{pageCounter:stories[i]}`无关。`pageCounter`

# android - 使用动态微调器处理方向变化

> ID：11344701
> 
> 赞同：1
> 
> 时间：2012-07-05T12:49:29.317
> 
> 标签：android, spinner, httprequest, android-configchanges

我已经在网上搜索并继续尝试了 5 个小时，但我找不到解决问题的方法。我想在方向改变后保持我的微调器的状态。

我有 2 个动态创建的微调器。他们通过 http 请求获取项目，第一个微调器通过 setOnItemSelectedListener() 方法更改第二个中的项目。我将字符串读入全局列表。

```
public class Global {
    public static String userName;
    public static String userType;
    public static String serverIp;
    public static int spinnerLeaguePos=0;
    public static int spinnerMatchPos=0;
    public static List<String> leagues;
    public static List<String> matches;
} 
```

我的第一个问题是阻止活动重新启动。

```
android:configChanges="orientation|keyboardHidden" 
```

我在清单文件中进行了此更改，以自己处理方向更改并避免重新启动活动。

我找到了一种在互联网上处理方向变化的方法，但它对我不起作用。更改方向时出现空指针异常。

```
07-05 12:41:08.119: E/AndroidRuntime(26388): FATAL EXCEPTION: main
07-05 12:41:08.119: E/AndroidRuntime(26388): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.MatchSelectionActivity}: java.lang.NullPointerException
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3351)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.app.ActivityThread.access$700(ActivityThread.java:123)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.os.Looper.loop(Looper.java:137)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at java.lang.reflect.Method.invokeNative(Native Method)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at java.lang.reflect.Method.invoke(Method.java:511)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at dalvik.system.NativeStart.main(Native Method)
07-05 12:41:08.119: E/AndroidRuntime(26388): Caused by: java.lang.NullPointerException
07-05 12:41:08.119: E/AndroidRuntime(26388):    at com.example.MatchSelectionActivity.setLeagues(MatchSelectionActivity.java:90)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at com.example.MatchSelectionActivity.onCreate(MatchSelectionActivity.java:47)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.app.Activity.performCreate(Activity.java:4465)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-05 12:41:08.119: E/AndroidRuntime(26388):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-05 12:41:08.119: E/AndroidRuntime(26388):    ... 12 more 
```

这是我到目前为止所做的。我什至不确定我正在尝试这样做。因此，将不胜感激任何更合适的方法。

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    spinnerLeague = (Spinner) findViewById(R.id.spinner_league);
    spinnerMatch = (Spinner) findViewById(R.id.spinner_match);

    if (savedInstanceState != null) {
        setLeagues();
        setMatches();
        spinnerLeague.setSelection(Global.spinnerLeaguePos);
        spinnerMatch.setSelection(Global.spinnerMatchPos);
    }
    else{
        Global.leagues = new ArrayList<String>();
        Global.matches = new ArrayList<String>();

        Global.leagues.add(getString(R.string.league_select));
        Global.matches.add(getString(R.string.match_select));

        GetLeagues task = new GetLeagues();
        String requestString = "http://" + Global.serverIp + ":8080/server/GetCurrentLeagues";
        task.execute(new String[] { requestString });
    }

    setContentView(R.layout.match_selection_layout);

}

public class GetLeagues extends AsyncTask<String, Void, String[]> {
    @Override
    protected String[] doInBackground(String... urls) {
        //this part works properly, and reads the leagues into Global.leagues List
    }

    @Override
    protected void onPostExecute(String[] result) {
        setLeagues();
    }
}
public class GetMatches extends AsyncTask<String, Void, String[]> {
    @Override
    protected String[] doInBackground(String... urls) {
        //this part works properly, and reads the matches into Global.matches List
    }

    @Override
    protected void onPostExecute(String[] result) {
        setMatches();
    }
}

 public void setLeagues() {

    spinnerLeague = (Spinner) findViewById(R.id.spinner_league);
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, Global.leagues);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerLeague.setAdapter(dataAdapter);

    spinnerLeague.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

            spinnerLeague = (Spinner) findViewById(R.id.spinner_league);

            if(position!=0){
                spinnerMatch.setEnabled(true);
                Global.spinnerLeaguePos=position;

                GetMatches task = new GetMatches();
                String requestString = "http://" + Global.serverIp +":8080/server/GetCurrentMatches/"+Global.spinnerLeaguePos;
                task.execute(new String[] { requestString });
            }
            else{
                setMatches();
                spinnerMatch.setEnabled(false);
                Global.spinnerLeaguePos=position;
            }

        }

        public void onNothingSelected(AdapterView<?> parent) {
            // TODO Auto-generated method stub

        }
    });
  }

    public void setMatches() {

    spinnerMatch = (Spinner) findViewById(R.id.spinner_match);
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, Global.matches);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerMatch.setAdapter(dataAdapter);

    spinnerMatch.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
            Global.spinnerMatchPos=position;
        }

        public void onNothingSelected(AdapterView<?> parent) {
            // TODO Auto-generated method stub

        }
    });
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:36:38.997

您需要在调用`setContentView(R.layout.match_selection_layout)`之前先调用`findViewById`。否则，`findViewById`将返回`null`（因为父`View`级尚未膨胀/附加到屏幕上）。

此外，您不应***将***其`configChanges`用作固定活动的创可贴。有很多方法`Activity`可以重新启动；例如，如果用户将设备的语言设置从英语更改为西班牙语（这将导致整个`Activity`被破坏和创建）。始终确保方向更改正常工作...不要只是放弃它们并简单地覆盖`onConfigurationChanged`.

# android - android中没有这样的表错误

> ID：11344702
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:49:34.530
> 
> 标签：android, android-sqlite

我在 SQLite 浏览器中创建了一个表，并将数据导入到 adnroid 的 assets 文件夹中，现在我得到一个错误 no such table，在我的 logcat 中，这是我的代码...

* * *

```
public class CardDatabase {

    private static final String TB_CARD_ID="CARD_ID";
    private static final String TB_CARD_QUESTION="CARD_QUESTION";
    private static final String TB_CARD_ANSWER="CARD_ANSWER";

    public static final String TABLE_CREATE =
            "CREATE TABLE TB_CARDS (" + " CARD_ID INTEGER PRIMARY KEY, "+
                    " CARD_QUESTION VARCHAR ," +
            " CARD_ANSWER VARCHAR);"

            ;

    private final Context context;
    public static MydataBasehelper DBHelper;
    public static SQLiteDatabase db;

    public CardDatabase(Context ctx)
    {Log.e("problem","here2");
            Log.e("info","database called");
            this.context = ctx;
            DBHelper = new MydataBasehelper(context);

            try 
            {
                DBHelper.createDataBase();
            } 
            catch (IOException ioe)
           {
                 throw new Error("Unable to create database");
     }

        try {

            DBHelper.openDataBase();

            }
        catch(SQLException sqle)
        {

            throw sqle;
        }

    }
    public CardDatabase open() throws SQLException {db =
    DBHelper.getWritableDatabase();return this;}

    public void close() {DBHelper.close();}

    public static  void insert(

                    String CARD_ID,
                    String CARD_QUESTION,
                    String CARD_ANSWER

    ){
                            ContentValues initialValues = new ContentValues();
            initialValues.put(TB_CARD_ID,CARD_ID);
            initialValues.put(TB_CARD_QUESTION,CARD_QUESTION);
            initialValues.put(TB_CARD_ANSWER,CARD_ANSWER);

            try{
            Log.e("HERE IT IS", CARD_ID);

            }catch (Exception e) {
               Log.e("here","null");
                }

            db.insert("TB_CARDS", null, initialValues);

    }
    public static void truncate(){
            db.execSQL("DELETE FROM TB_CARDS");
    }
    public static void deletetable(){db.execSQL("DROP TABLE IF EXISTS TB_CARDS");}
    public static void createtable(){db.execSQL(TABLE_CREATE);}

    public Cursor getrecord( String CARD_ID){
            Log.e("we are","here");
            Cursor mCursor= db.query("TB_CARDS", new String[] {
                            TB_CARD_ID,
                            TB_CARD_QUESTION,
                            TB_CARD_ANSWER,

            },TB_CARD_ID  + "=" +"'"+ CARD_ID+ "'"
            ,null,null,null,null,null);
            if (mCursor != null) {
                    mCursor.moveToFirst();
            }
            return mCursor;
    }
    Cursor cur;
    public Cursor selectAll(){

        try{
        String query="SELECT * FROM TB_CARDS";
        System.out.println(query);
        cur= db.rawQuery(query,null);
        cur.moveToFirst();
        }

        catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
            System.out.println("problem");
        }
        return cur;

    } 
```

* * *

这是 mydatabasehelper..

```
 public class MydataBasehelper extends SQLiteOpenHelper 
{
    private static final String TAG = "info";

      private static final String DB_NAME = "flipdata1";
      private static final String DB_PATH="data/data/cue.flip/databases/";
      private SQLiteDatabase myDataBase; 
    private static final int DATABASE_VERSION =1332;

      private  Context mycontext;

    public MydataBasehelper(Context context) 

    {

        super(context, DB_NAME, null, DATABASE_VERSION);
        Log.e("info","dataHelper");
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {

    //  Log.e("aashish","table create was called");

        //db.execSQL(CardDatabase.TABLE_CREATE);

        //db.execSQL(Question_database.TABLE_CREATE);
        //db.execSQL(Answers_Database.TABLE_CREATE);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, 
            int newVersion) 
    {
        Log.w(TAG, "Upgrading database from version " + oldVersion 
                + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + "TB_CARDS");

        //db.execSQL("DROP TABLE IF EXISTS " + Question_database.DATABASE_TABLE);
        //db.execSQL("DROP TABLE IF EXISTS " + Answers_Database.DATABASE_TABLE);
        onCreate(db);
    }
     public void createDataBase() throws IOException{

            boolean dbExist = checkDataBase();
        System.out.println("Create database");
            if(dbExist){

                System.out.println("database exists");

                //do nothing - database already exist.
            }else{

                System.out.println("database not exists");

                //By calling this method and empty database will be created into the default system path
                      //of your application so we are gonna be able to overwrite that database with our database.
                this.getReadableDatabase();

                try {

                    copyDataBase();

                } catch (IOException e) {

                    throw new Error("Error copying database");

                }
            }

           }
           @Override
        public synchronized void close() {

                if(myDataBase != null)
                    myDataBase.close();

                super.close();

        }
           private boolean checkDataBase(){

            SQLiteDatabase checkDB = null;

            try{
                String myPath = DB_PATH + DB_NAME;
                checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

            }catch(SQLiteException e){

                //database does't exist yet.

            }

            if(checkDB != null){

                checkDB.close();

            }

            return checkDB != null ? true : false;
           }

           /**
            * Copies your database from your local assets-folder to the just created empty database in the
            * system folder, from where it can be accessed and handled.
            * This is done by transfering bytestream.
            * */
           private void copyDataBase() throws IOException{

               System.out.println("Copy STARTSSS");
            //Open your local db as the input stream
            InputStream myInput = mycontext.getAssets().open(DB_NAME);

            // Path to the just created empty db
            String outFileName = DB_PATH + DB_NAME;

            //Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);

            //transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];
            int length;

            while ((length = myInput.read(buffer))>0){
                myOutput.write(buffer, 0, length);
            }

            //Close the streams
            myOutput.flush();
            myOutput.close();

            myInput.close();

            System.out.println("CopYY DONE");
           }
           public void openDataBase() throws SQLException{

            //Open the database
               System.out.println("OPEN DATABASE");
               String myPath = DB_PATH + DB_NAME;
            myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

           }

} 
```

* * *

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:09:17.877

删除 databasehelper 类中 ON CREATE 函数第二行的注释，将数据库版本更新为 1333 并运行。

即使是第一次或多次创建数据库，每次都应该调用 on-create 函数！

# java - java正则表达式建议

> ID：11344704
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:49:39.953
> 
> 标签：java, regex, arrays

谁能建议我如何在以下字符串上应用正则表达式，以便它返回数组或任何出现在尖括号（<>）中的项目集合？

```
77+<99>*0.5+<100>+<101>+<99>*0.5+<100>+<101> 
```

数组将包含

```
{99,100,101,100,101}; 
```

谢谢！

更新：（在不匹配之后）

```
// Compile regular expression
String patternStr = "(?<=<)(\\d+)(?=>)";
Pattern pattern = Pattern.compile(patternStr);

// Determine if there is an exact match
CharSequence inputStr = "77+<99>*0.5+<100>+<101>+<99>*0.5+<100>+<101>";
Matcher matcher = pattern.matcher(inputStr);
boolean matchFound = matcher.matches(); // false
System.out.println("...log..."+matchFound); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:52:23.570

使用正则表达式`(?<=<)(\d+)(?=>)`，然后删除重复项。

# c# - 如何清除内存流

> ID：11344705
> 
> 赞同：4
> 
> 时间：2012-07-05T12:49:44.477
> 
> 标签：c#, wcf, image, memorystream, data-conversion

我使用此代码将图像从二进制转换为图像。

```
public class ImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var memStream = new MemoryStream(((MeetPoint_B2C.ServiceReference1.Binary)value).Bytes);
        memStream.Seek(0, SeekOrigin.Begin);
        var empImage = new BitmapImage();
        empImage.CreateOptions = BitmapCreateOptions.None;
        empImage.SetSource(memStream);
        return empImage;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

从我的数据库加载超过 20 张图像时出现错误。这是未处理的异常。不支持该请求。我认为内存流已经满了。那么如何重置内存流呢？我知道可以使用`dispose()`或使用`memorystream.setLength`，`0`但我应该如何或在哪里放置编码？

异常详情

```
System.OutOfMemoryException 未处理
  消息=OutOfMemoryException
  堆栈跟踪：
       在 MS.Internal.FrameworkCallbacks.NotifyManagedDebuggerOnNativeOOM()
       在 MS.Internal.XcpImports.BitmapSource_SetSourceNative(IntPtr bitmapSource, CValue& byteStream)
       在 MS.Internal.XcpImports.BitmapSource_SetSource(BitmapSource bitmapSource, CValue& byteStream)
       在 System.Windows.Media.Imaging.BitmapSource.SetSourceInternal（流流源）
       在 System.Windows.Media.Imaging.BitmapImage.SetSourceInternal（流流源）
       在 System.Windows.Media.Imaging.BitmapSource.SetSource（流流源）
       在 MeetPoint_B2C.ImageConverter.Convert（对象值，类型 targetType，对象参数，CultureInfo 文化）
       在 System.Windows.Data.BindingExpression.ConvertToTarget（对象值）
       在 System.Windows.Data.BindingExpression.GetValue（DependencyObject d，DependencyProperty dp）
       在 System.Windows.DependencyObject.EvaluateExpression（DependencyProperty 属性，EffectiveValueEntry oldEntry，EffectiveValueEntry & newEntry）
       在 System.Windows.DependencyObject.EvaluateBaseValue（DependencyProperty 属性，EffectiveValueEntry oldEntry，EffectiveValueEntry&newEntry，ValueOperation 操作）
       在 System.Windows.DependencyObject.EvaluateEffectiveValue（DependencyProperty 属性，EffectiveValueEntry oldEntry，EffectiveValueEntry newEntry，ValueOperation 操作）
       在 System.Windows.DependencyObject.UpdateEffectiveValue（DependencyProperty 属性，EffectiveValueEntry oldEntry，EffectiveValueEntry&newEntry，ValueOperation 操作）
       在 System.Windows.DependencyObject.RefreshExpression（DependencyProperty dp）
       在 System.Windows.Data.BindingExpression.RefreshExpression()
       在 System.Windows.Data.BindingExpression.SendDataToTarget()
       在 System.Windows.Data.BindingExpression.SourceAcquired()
       在 System.Windows.Data.BindingExpression.System.Windows.IDataContextChangedListener.OnDataContextChanged（对象发送者，DataContextChangedEventArgs e）
       在 System.Windows.Data.BindingExpression.DataContextChanged（对象发送者，DataContextChangedEventArgs e）
       在 System.Windows.FrameworkElement.OnDataContextChanged（DataContextChangedEventArgs e）
       在 System.Windows.FrameworkElement.OnAncestorDataContextChanged（DataContextChangedEventArgs e）
       在 System.Windows.FrameworkElement.NotifyDataContextChanged（DataContextChangedEventArgs e）
       在 System.Windows.FrameworkElement.OnAncestorDataContextChanged（DataContextChangedEventArgs e）
       在 System.Windows.FrameworkElement.NotifyDataContextChanged（DataContextChangedEventArgs e）
       在 System.Windows.FrameworkElement.OnTreeParentUpdated（DependencyObject newParent，布尔 bIsNewParentAlive）
       在 System.Windows.DependencyObject.UpdateTreeParent（IManagedPeer oldParent，IManagedPeer newParent，布尔 bIsNewParentAlive，布尔 keepReferenceToParent）
       在 MS.Internal.FrameworkCallbacks.ManagedPeerTreeUpdate（IntPtr oldParentElement，IntPtr parentElement，IntPtr childElement，字节 bIsParentAlive，字节 bKeepReferenceToParent，字节 bCanCreateParent）
       在 MS.Internal.XcpImports.Measure_WithDesiredSizeNative（IntPtr 元素，Single inWidth，Single inHeight，Single& outWidth，Single& outHeight）
       在 MS.Internal.XcpImports.UIElement_Measure_WithDesiredSize（UIElement 元素，大小 availableSize）
       在 System.Windows.UIElement.Measure_WithDesiredSize（大小可用大小）
       在 System.Windows.Controls.VirtualizingStackPanel.MeasureChild（UIElement 孩子，大小 layoutSlotSize）
       在 System.Windows.Controls.VirtualizingStackPanel.MeasureOverride（大小约束）
       在 System.Windows.FrameworkElement.MeasureOverride（IntPtr nativeTarget，双 inWidth，双 inHeight，Double& outWidth，Double& outHeight）
       在 MS.Internal.XcpImports.MeasureOverrideNative（IntPtr 元素，Single inWidth，Single inHeight，Single& outWidth，Single& outHeight）
       在 MS.Internal.XcpImports.FrameworkElement_MeasureOverride（FrameworkElement 元素，Size availableSize）
       在 System.Windows.FrameworkElement.MeasureOverride（大小可用大小）
       在 System.Windows.FrameworkElement.MeasureOverride（IntPtr nativeTarget，双 inWidth，双 inHeight，Double& outWidth，Double& outHeight）
```

这由以下使用`.xaml`

```
<Grid.Resources>
   <src:ImageConverter x:Key="imgConverter"/>
</Grid.Resources>
<Image Grid.Column="1" Grid.Row="4" Height="136" HorizontalAlignment="Left"
    Margin="16,16,0,0" Name="imgEmp" Stretch="Fill"
    VerticalAlignment="Top" Width="200"
    Source="{Binding Image, Converter={StaticResource imgConverter}}"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:40:49.903

由于该`BitmapImage`对象拥有流的所有权，因此您将无法正确关闭（或处置）它，因此我推荐以下内容：

```
public BitmapImage Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) 
{ 
    var empImage = new BitmapImage(); 
    empImage.CreateOptions = BitmapCreateOptions.None; 
    empImage.SetSource(new MemoryStream(((MeetPoint_B2C.ServiceReference1.Binary)value).Bytes); ); 
    return empImage; 
} 
```

在调用方法中，实现自己的资源清理。BitmapImage 没有实现 IDisposable，所以不能使用 using 语句。当 IDisposable 明确包含对非托管资源的引用时，Microsoft 应考虑实施 IDisposable：

```
public void ConvertBitmap()
{
    BitmapImage img = null;
    try
    {
        img = Convert(// pass in your params);

        // do stuff with your img
    }
    finally
    {
        // dispose of the memorystream in case of exception
        if(img != null && img.StreamSource != null) img.StreamSource.Dispose();
    }
} 
```

这将确保`MemoryStream`即使在出现异常的情况下也能正确清理原件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:58:52.117

每次被要求转换时，您已经在创建一个新`MemoryStream`的 - 尽管在这种情况下您不需要寻找。你不需要重置任何东西。

您应该真正找出引发了*什么*异常 - 这可能与内存不足*无关。*您已编辑问题以显示堆栈跟踪，但未显示引发的异常类型。一种可能性是它与在 WCF 服务中使用 WPF 控件有关，如果您的问题标签是可以通过的。

编辑：请注意，即使您不想处置`MemoryStream`，也*应*确保`BitmapImage`在完成后处置结果。不幸的是，我们没有足够的背景来说明您正在做什么，因此无法在这方面提供任何建议。

# java - 需要 vt100 telnet 的 Java Api

> ID：11344706
> 
> 赞同：0
> 
> 时间：2012-07-05T12:49:46.323
> 
> 标签：java, networking, query-string, connection-string

我有问题要解决。有我必须控制的 vt100 telnet 连接设备。问题是设备远程登录服务器显示高级菜单，女巫是用向上和向下按钮控制的。有人可以建议一些 JAVA api 来解决这种情况。先感谢您。

真诚的 你的 Vaginn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:52:44.573

明显的候选人将是 JCurses： http: [//sourceforge.net/projects/javacurses/](http://sourceforge.net/projects/javacurses/) 但我不得不承认我没有使用这个

# codeigniter - Codeigniter 会话有时会在完成对第三方 API 的调用后将我踢出去

> ID：11344719
> 
> 赞同：1
> 
> 时间：2012-07-05T12:50:25.210
> 
> 标签：codeigniter, session, session-timeout

我长期以来一直遇到这个奇怪的问题，并且一直试图解决它但没有任何成功。我有一个基于 CI 1.7.2 的 CI 站点。它在大多数情况下都可以正常工作。但很多时候它没有。

问题是，我们填写了一个包含许多字段的表单并将其提交给控制器中的一个方法，该方法进行检查。然后它使用 curl 将数据发布到第三方 Web 服务。

我有一个错误/订单响应跟踪器设置，每次我从 API 收到响应时都会向我发送邮件。邮件内容的格式为：

订单 ID：5876 结果长度 - 8056 或
订单 ID：5877 结果长度 - 1121 ....等等每个订单。

现在，很多时候我收到这样的邮件：

订单 ID：结果长度 - 34441 *（请注意此处缺少订单 ID）*
订单 ID：结果长度 - 9700

现在，我的邮件代码恰好是

```
mail('myemail@xyz.com','Order ID: '.$this->session->userdata('SITE_ORDER_NO').' Result length - '. $lengthResponse , $orderResult, $headers); 
```

所以它看起来，

```
$this->session->userdata('SITE_ORDER_NO') 
```

代码段不再具有订单 ID。因此，API 响应没有保存在数据库中。此外，在响应返回后，我也很少收到关于用户在将他转移到下一页后退出网站的报告。

我的会话设置是：

```
$config['sess_cookie_name']             = 'cisessionJHGJHSOMECAPITALLETTERS';   
$config['sess_expiration']              = 7200;   
$config['sess_encrypt_cookie']          = TRUE;   
$config['sess_use_database']            = TRUE;   
$config['sess_table_name']              = 'user_sessions';   
$config['sess_match_ip']                = TRUE;   
$config['sess_match_useragent']         = TRUE;   
$config['sess_time_to_update']          = 300; 
```

辅助函数的代码是：

```
function call_order_curl($postVars){  
    $posturl = "API_URL";   
    $ch = curl_init();   
    curl_setopt($ch, CURLOPT_URL, $posturl);   
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,300);   
    curl_setopt($ch,CURLOPT_TIMEOUT,600);   
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);   
    curl_setopt($ch, CURLOPT_HEADER, 0);   
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postVars);   
    curl_setopt($ch, CURLOPT_POST, 1);  

    $response = curl_exec($ch);   
    return $response;   
} 
```

我真的很感激这方面的任何帮助。谢谢你。

# c++ - C++ - SDL：限制帧率问题

> ID：11344721
> 
> 赞同：3
> 
> 时间：2012-07-05T12:50:53.730
> 
> 标签：c++, sdl, limit, frame-rate

尽管以下代码可以节省一些电量，但 FPS 的上限并不正确。当它应该将帧速率锁定在 60 FPS 时，我得到 82。30 帧也是如此，我得到 49 FPS。

**计算 FPS：**

```
previousTime = currentTime;
currentTime = SDL_GetTicks();
fps_++;

if (currentTime - lastOutput >= 1000)
{
    lastOutput = currentTime;
    fps = fps_; // the variable 'fps' is displayed 
    fps_ = 0;
} 
```

**限制FPS：**

```
if (currentTime - previousTime < 1000 / maxFPS)
{
    SDL_Delay(1000 / maxFPS - currentTime + previousTime);
} 
```

我搞砸了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:15:17.617

我不是专家，但你可以试试这个！

```
SDL_Delay(1000 / maxFPS - SDL_GetTicks() + previousTime); 
```

使用新计算的当前时间可能会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-25T14:39:59.687

当您像这样创建渲染器时：

SDL_Renderer *renderPtr = SDL_CreateRenderer(windowPtr, -1, SDL_RENDERER_ACCELERATED | SDL_RENDERER_PRESENTVSYNC);

SDL_RENDERER_PRESENTVSYNC FLAG 将当前功能与您的显示器刷新率相匹配。

我希望这可以帮助！让我很头疼！！！

这是一个参考： [https ://wiki.libsdl.org/SDL_CreateRenderer](https://wiki.libsdl.org/SDL_CreateRenderer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T03:41:53.347

这可能是由于 SDL_Delay 告诉操作系统关闭您正在运行的进程这一事实引起的。根据您拥有的操作系​​统，这可能会在某种意义上导致不同的行为。SDL_Delay 通常并不意味着保证在指定的毫秒数之后继续执行。有人说它保证至少要等那么长时间才能切换回该过程，但我无法找到证据。我认为这更像是对操作系统的推荐，但最终操作系统将自行决定（取决于操作系统）。

对于 Windows，可以修改上下文切换的粒度，让您有更好的机会来控制它：[timeBeginPeriod 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624%28v=vs.85%29.aspx)

您可能不再对此感到疑惑，但也许答案可以帮助其他人..

# c++ - IImageList->Draw - 损坏的透明度

> ID：11344722
> 
> 赞同：0
> 
> 时间：2012-07-05T12:50:54.433
> 
> 标签：c++, shell, icons, transparency, gdi+

我需要从特定文件扩展名的 Windows Shell 中提取图标。提取后，我需要将其保存为具有透明度的 PNG 文件。

但我不知道发生了什么，看起来透明度已损坏。
请看附图（灰色是真正的透明度）。

Windows shell 可以正确显示此图标，但也可以看到一些伪影（如阴影或发光）。请看下面的截图：

![截屏](../Images/75e2a8d9f0565a7606d8d3491d132ce0.png)

```
HRESULT  hr = ::SHGetFileInfoA(pszPath, dwAttributes, &shfi, sizeof(shfi), SHGFI_SYSICONINDEX | SHGFI_LARGEICON  );
if (!SUCCEEDED(hr))
    return 0;

ATL::CComPtr<IImageList> pList;
HRESULT h2 = ::SHGetImageList(uState,   IID_IImageList,  (void**)&pList);
if (!SUCCEEDED(h2))
    return 0;

int count = 0;
pList->GetImageCount(&count);

if (count <= shfi.iIcon)
    return 0;

HICON ico = ImageList_GetIcon(IImageListToHIMAGELIST(pList), shfi.iIcon, ILD_TRANSPARENT);
Gdiplus::Bitmap bmp(ico);

Graphics *pGraphics  = Graphics::FromImage(&bmp);

IMAGELISTDRAWPARAMS pimldp = {0};

pimldp.hdcDst = pGraphics->GetHDC();

pimldp.cbSize = sizeof IMAGELISTDRAWPARAMS;
pimldp.himl = IImageListToHIMAGELIST(pList);
pimldp.i = shfi.iIcon;
pimldp.x = 0;
pimldp.y = 0;
pimldp.cx = cx;
pimldp.cy = cy;
pimldp.yBitmap = 0;
pimldp.xBitmap = 0;
pimldp.fStyle = ILD_IMAGE | ILD_SCALE /*| ILD_PRESERVEALPHA*/  ;

ImageList_DrawIndirect(&pimldp);

CLSID clsid;    
GetEncoderClsid(L"image/png", &clsid);

bmp.Save(L"d:\\test.png", &clsid);
::ShellExecuteA(NULL, "open", "d:\\test.png", "", "d:\\", SW_NORMAL);
pGraphics->ReleaseHDC(pimldp.hdcDst);
::DestroyIcon(ico); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:22:54.233

```
HICON ico = NULL;
pList->GetIcon(shfi.iIcon, ILD_TRANSPARENT, &ico);

ICONINFO ii = {0};
GetIconInfo(ico, &ii);

Gdiplus::Bitmap bmpIcon(ii.hbmColor, NULL);
Gdiplus::Rect rectBounds(0, 0, bmpIcon.GetWidth(), bmpIcon.GetHeight() );

BitmapData bmData;
bmpIcon.LockBits(&rectBounds, ImageLockModeRead, bmpIcon.GetPixelFormat(), &bmData);

Bitmap bmp(bmData.Width, bmData.Height, bmData.Stride, PixelFormat32bppARGB, (BYTE*)bmData.Scan0);

bmpIcon.UnlockBits(&bmData); 
```

`bmp`现在包含来自`HICON`.

# javascript - 一次调用一个函数的多个方法

> ID：11344726
> 
> 赞同：3
> 
> 时间：2012-07-05T12:51:08.320
> 
> 标签：javascript, function, methods, prototype

如果我有类似的伪代码：

```
 function user(a,b)
  {
    if(! (this instanceof user) ) return new user(a,b);
    this.a = a;
    this.b = b;
    this.showName = function() {
      alert(this.a + " " + this.b);
    };

    this.changeName = function(a,b) {
      this.a = a;
      this.b = b;
    };
  } 
```

我可以这样称呼它：

```
user("John", "Smith").showName() // output : John Smith 
```

我想要类似的东西：

```
user("John", "Smith").changeName("Adam", "Smith").showName(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T12:52:30.703

在每个方法中返回对象。这称为“链接”。

```
 function user(a,b)
  {
    if(! (this instanceof user) ) return new user(a,b);
    this.a = a;
    this.b = b;
    this.showName = function() {
      alert(this.a + " " + this.b);

      return this; // <--- returning this
    };

    this.changeName = function(a,b) {
      this.a = a;
      this.b = b;

      return this; // <--- returning this
    };
} 
```

演示：http: [//jsbin.com/oromed/](http://jsbin.com/oromed/)

# maven - Artifactory 3rd 方罐

> ID：11344729
> 
> 赞同：0
> 
> 时间：2012-07-05T12:51:11.620
> 
> 标签：maven, artifactory

我在我的工件（libs-release repos，以及它的 microsoft jdbc 4 连接器）中添加了一个 3rd 方 jar。

我遇到的问题是 maven/apache servicemix 无法下载 jar，因为它们具有以下设置，而且似乎他们总是首先尝试从远程存储库下载东西。

```
<mirrors>
<mirror>
  <mirrorOf>*</mirrorOf>
  <name>remote-repos</name>
  <url>http://...:8081/artifactory/remote-repos</url>
  <id>remote-repos</id>
</mirror>
</mirrors>
<profiles>
<profile>
  <repositories>
    <repository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>libs-release</name>
      <url>http://...:8081/artifactory/libs-release</url>
    </repository>
    <repository>
      <snapshots/>
      <id>snapshots</id>
      <name>libs-snapshot</name>
      <url>http://...:8081/artifactory/libs-snapshot</url>
    </repository>
  </repositories>
  <pluginRepositories>
    <pluginRepository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>plugins-release</name>
      <url>http://...:8081/artifactory/plugins-release</url>
    </pluginRepository>
    <pluginRepository>
      <snapshots/>
      <id>snapshots</id>
      <name>plugins-snapshot</name>
      <url>http://...:8081/artifactory/plugins-snapshot</url>
    </pluginRepository>
  </pluginRepositories>
  <id>artifactory</id>
</profile> 
```

有什么想法/我该如何解决这个问题？临时修复是将 jar 安装到我的本地存储库中，但我不想在其他工作电脑上这样做。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T22:09:39.580

Artifactory 中的“remote-repos”存储库是一个虚拟存储库，它聚合了远程存储库:) 由于您将 jar 添加到本地存储库，因此无法从“remote-repos”解析它。将您的镜像指向“repo”应该可以完成这项工作。

# c# - 为不同的显示器缩放鼠标位置

> ID：11344737
> 
> 赞同：2
> 
> 时间：2012-07-05T12:51:41.793
> 
> 标签：c#

我想在按钮上生成鼠标点击（鼠标挂钩）。我在 1280 X 800 显示器的 (420,50) 位置和 1440 X 900 尺寸显示器的 (480,50) 位置找到了这个按钮。是否有任何算法或 c# api 来缩放不同显示器上的鼠标位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:48:54.423

根据这是一个网站还是一个应用程序，您可能只需要为不同的显示器尺寸创建一个列表。这是因为在网站的情况下，按钮的位置可能不会直接随屏幕大小缩放。如果您知道事实确实如此，那么只需找到百分比坐标，ei 480 是 1280 的百分比，而 50 是 800 的百分比。您只需找到屏幕尺寸并将其乘以 x 或 y百分比。但是从您提供的坐标来看，y 分量似乎没有移动，因此您可能只需要找到 x 分量。

# java - 在while循环之后我的程序不会执行任何东西

> ID：11344738
> 
> 赞同：1
> 
> 时间：2012-07-05T12:51:42.433
> 
> 标签：java

我写了这个“计算器”，我希望它在计算后输出结果，但由于某种原因它不会！
**样本输入为**
2
1 + 1 * 2 =

**输出为** 4

提前致谢

```
import java.util.Scanner;

public class Main {

/**
 * @param args
 */
public static void main(String[] args) {
    Scanner input=new Scanner(System.in);
    int n=input.nextInt();
    for (int i=0;i<n;i++){
        int result=input.nextInt();
        String operand=input.next();
        int flag=0;
        while (flag==0){
            int temp=input.nextInt();
            if (operand.equals("*"))
                result*=temp;
            else if (operand.equals("/"))
                result/=temp;
            else if (operand.equals("+"))
                result+=temp;
            else if (operand.equals("-"))
                result-=temp;
            else if (operand.equals("=")){
                flag=1;
                System.out.println(result);
            }
            operand=input.next();
        }
    }

}

  }

public class Main 
{
    public static void main(String[] args) 
    {
         Scanner input=new Scanner(System.in);
         int n=input.nextInt();
         for (int i=0;i<n;i++)
         {
             int result=input.nextInt();
             String operand=input.next();
             int flag=0;
             while (flag==0)
             {
                 int temp=input.nextInt();
                 if (operand.equals("*"))
                     result*=temp;
                 else if (operand.equals("/"))
                     result/=temp;
                 else if (operand.equals("+"))
                     result+=temp;
                 else if (operand.equals("-"))
                     result-=temp;
                 else if (operand.equals("="))
                 {
                     flag=1;
                     System.out.println(result);
                 }
            operand=input.next();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:51:02.630

这是一个非常简单的测试示例：1 + 1 =

第一次迭代：

```
 int result=input.nextInt();  //===> (1) + 1 =
 String operand=input.next();  //===> 1 (+) 1 =
 int temp=input.nextInt(); //===> 1 + (1) =
 result+=temp;  //===> result == 2
 operand=input.next(); //===> 1 + 1 (=) 
```

第二次迭代：

```
 int temp=input.nextInt(); //===> ooops nothing to read : wait for a user input! 
```

这是您的算法的改编版本，应该可以工作：

```
import java.util.Scanner;

public class Main {
  public static void main(String[] args) {
    Scanner input=new Scanner(System.in);
    int n=input.nextInt();
    for (int i=0;i<n;i++){
      int result=input.nextInt();
      String operand=input.next();
      while (true){
        if (operand.equals("=")) {
          System.out.println(result);
          break;
        } else {
          int temp=input.nextInt();
          if (operand.equals("*"))
            result*=temp;
          else if (operand.equals("/"))
            result/=temp;
          else if (operand.equals("+"))
            result+=temp;
          else if (operand.equals("-"))
            result-=temp;
          operand=input.next();
        }
      }
    } 
```

}

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:54:12.060

进入 while 循环后，您永远不会输入任何内容。运行一个

```
operand=input.next(); 
```

再次在您的 while 循环上的右括号之前。

否则您的 1 + 1 * 2 = 将读取为 1+1+2 （从不更新您的运营商）

```
while (flag==0)
        {
        int temp=input.nextInt();
        if (operand.equals("*"))
            result*=temp;
        else if (operand.equals("/"))
            result/=temp;
        else if (operand.equals("+"))
            result+=temp;
        else if (operand.equals("-"))
            result-=temp;
        else if (operand.equals("="))
             {
             flag=1;
             System.out.println(result);
             }
        operand=input.next();// needs to be inside closing bracket

public class Main 
{
    public static void main(String[] args) 
    {
         Scanner input=new Scanner(System.in);
         int n=input.nextInt();
         for (int i=0;i<n;i++)
         {
             int result=input.nextInt();
             String operand=input.next();
             int flag=0;
             while (flag==0)
             {
                 int temp=input.nextInt();
                 if (operand.equals("*"))
                     result*=temp;
                 else if (operand.equals("/"))
                     result/=temp;
                 else if (operand.equals("+"))
                     result+=temp;
                 else if (operand.equals("-"))
                     result-=temp;
                 else if (operand.equals("="))
                 {
                     flag=1;
                     System.out.println(result);
                 }
            operand=input.next();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:25:29.797

控件正在等待下一行的输入

```
 while (flag==0){
        int temp=input.nextInt(); <- its waiting for input after you enter = 
```

# objective-c - 单击下一步按钮时如何图像一张一张地显示下一张图像？

> ID：11344755
> 
> 赞同：0
> 
> 时间：2012-07-05T12:52:36.863
> 
> 标签：objective-c, ios5

我是 iPhone 的初学者。我已经采用了数组，因为我已经传递了所有图像，但是当我单击下一步按钮时图像不显示..

我的代码是

```
images= [[NSArray arrayWithObjects:   
                        [UIImage imageNamed:@"1.png"],
                        [UIImage imageNamed:@"2.png"],
                        [UIImage imageNamed:@"3.png"],
                        [UIImage imageNamed:@"4.png"],
                        nil] retain];  
-(IBAction)Next
{

    currentImage++;
    if(currentImage +1>=[images count])
    {
        currentImage=0;
        NSLog(@"print:%@",currentImage);
       UIImage *img=[images objectAtIndex:currentImage];
        [animalphoto setImage:img];

    }
    else
    {
        currentImage++;
        NSLog(@"hello:%@",currentImage);

    }
} 
```

但是下一个按钮经常点击按钮图像不经常显示所以给任何建议和源代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:30:14.347

只需将 nslog 之后的两行 if 语句放到 else 部分，问题就解决了

# android - 如何在 Android 的 HTTP Post 请求中传递对象数组？

> ID：11344757
> 
> 赞同：2
> 
> 时间：2012-07-05T12:52:42.607
> 
> 标签：android

我想在 HTTP POST 请求中传递对象列表，比如驱动程序。而 NameValuePair 只接受字符串。如何通过 HTTP POST 请求传递它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:01:39.840

尝试

```
StringEntity ss= new StringEntity(yourObj.toString());
        // Set HTTP parameters
        httpPost.setEntity(se); 
```

我想它会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:04:06.307

我认为这篇文章会对你有所帮助

[使用 HTTP 客户端将序列化对象从 Android 发送到 servlet](https://stackoverflow.com/questions/2009707/sending-a-serialized-object-from-android-to-a-servlet-using-http-client)

他们建议使用 JSON 或 XML

# c# - 根据数据值闪烁 WPF DataGrid 单元格

> ID：11344759
> 
> 赞同：0
> 
> 时间：2012-07-05T12:52:44.600
> 
> 标签：c#, wpf, wcf-binding, datatrigger, eventtrigger

### 设置：

我有一个绑定到 POCO 集合的 DataGrid，这些 POCO 实现 INotifyPropertyChanged 接口并触发 PropertyChanged 事件。其中一个属性是双精度值，我们称之为价格。

### 目标：

当价格上涨时，显示它的 DataGrid 单元格应闪烁绿色，当价格下跌时应闪烁红色。眨眼是指在一定（小）时间内改变背景颜色。

### 问题：

我无法实现这一点，尝试在数据对象中使用具有特殊添加属性的数据触发器（例如 PriceUp 和 PriceDown），但问题是何时以及如何将这些标志重置为 false，以便后续更改将再次运行触发。在更新时使标志为假然后为真是行不通的。据我所知，EventTrigger（在 TargetUpdated 上）也无济于事，因为我无法将它与数据条件结合起来。

笔记：

我发现了类似（或相同）的[问题](https://english.stackexchange.com/questions/11481)，但虽然标记为已回答，但实际上并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:00:32.973

你应该在你的视图模型上有每个价格的旧单元格值。然后您可以使用一个变量，即旧状态和当前状态之间的差异来触发彩色动画。

# symfony - Symfony2 路由器 - 如何调用注解路由

> ID：11344764
> 
> 赞同：0
> 
> 时间：2012-07-05T12:53:12.953
> 
> 标签：symfony, routing

简单的案例。在我的所有应用程序中，我使用 Route 注释驱动程序，定义`routing.yml`如下：

```
MyBundle:
    resource: "@MyBundle/Controller/"
    type:     annotation
    prefix:   /someprefix 
```

MyBundle 的 Ctrl 控制器中的一些操作如下所示：

```
@Route("/{page}/{status}", name="default_action", defaults={"page" = 1, "status" = "ok"}, requirements={"page" = "\d+"})
public function defaultAction($page, $status) {...} 
```

现在我想做这个动作——访问我的网页时的默认动作。我不能仅仅`@Route("/")`因为我有前缀而使用。所以我要补充`routing.yml`：

```
_welcome:
    pattern:  /
    defaults: { _controller: MyBundle:Ctrl:default } 
```

这就是问题开始的地方——Symfony2 不是从注释调用默认控制器操作，而是从操作调用默认控制器操作，我得到错误：

`Controller "...:defaultAction()" requires that you provide a value for the "$page" argument (because there is no default value or because there is a non optional argument after this one).`

因此，Symfony2 并没有从 @Route 注释中获取默认值。

问题是：如何调用`_welcome`知道@Route 的路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:58:05.510

您错过了 yml 设置中的默认值，应该如下所示：

```
_welcome:
    pattern:  /
    defaults: { _controller: MyBundle:Ctrl:default, page: 1, status: ok } 
```

# mongodb - 将sql查询翻译成MongoDB

> ID：11344766
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:53:19.843
> 
> 标签：mongodb, mapreduce, nosql

嗨，我是 MongoDB 的新手，我需要首先使用 MapReduce 方法和其他聚合方法中的两种技术将此 sql 查询转换为 mongodb。有人可以帮忙吗？

```
select
    sum(l_extendedprice*l_discount) as revenue
from 
    lineitem
where 
    l_shipdate >= date '1994-01-01'
    and l_shipdate < date '1994-01-01' + interval '1' year
    and l_discount between 0.06 - 0.01 and 0.06 + 0.01
    and l_quantity < 24; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:37:24.610

[http://www.mongodb.org/display/DOCS/MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)

对于您的示例，使用 map/reduce

```
var m = function () { emit(1, {this.l_extendedprice * this.l_discount})};

var r = function (k, vals) {
    var sum = 0;
    for (var i = 0; i < vals.length; i++) {
       sum += vals[i];
    }
    return sum;
}

var res = db.stuff.mapReduce(m, r,  {
                            out:"stuff_aggr",
                            query: { 
                                "l_shipdate": {$gte:  ISODate("1994-01-01T00:00:00.000Z")}, 
                                "l_shipdate": {$lte:  ISODate("1995-01-01T00:00:00.000Z")},
                                "l_discount": {$gte: 0.05}, 
                                "l_discount": {$lte: 0.07}, 
                                "l_quantity": {$lt: 24}
                            }
}); 
```

[聚合](http://www.mongodb.org/display/DOCS/Aggregation)仍然是一个 beta 功能。MapReduce 仍然是更好的选择。我假设您想查看是否可以轻松处理复杂的 where 子句......只要您将自己限制在一个集合/表中，它与 SQL 并没有什么不同。

# c - 如何通过指针访问全局定义的 typedef 结构？

> ID：11344773
> 
> 赞同：2
> 
> 时间：2012-07-05T12:53:47.757
> 
> 标签：c, pointers, struct, typedef

我想知道如何在它所在的文件之外使用 typedef 结构。我的意思是，我有这个：

在一个名为“rtc_i2c.c”的文件中，我有------------------------------------

```
#include "rtc_i2c.h"

struct time_date_str
{
  char year;
  char month;
  char date;
  char day;

  char hour;
  char minute;
  char second;
};

int RTCGetTime(TimeDate *timdatstrptr)
{
  timdatstrptr -> second = 0x12;

  return 0;
} 
```

然后在一个名为“rtc_i2c.h”的文件中我有-----------------------------

```
#ifndef RTC_I2C_H 
#define RTC_I2C_H 

typedef struct time_date_str TimeDate;

#endif 
```

在“main.c”中，我有 ----------------------------- --------

```
#include "rtc_i2c.h"

TimeBase *TimeDateData;

void main(void)
{
  char DateTimeASCII[20]; 

  RTCGetTime(TimeDateData);

  DateTimeASCII[0] = ????????
} 
```

然后，当我进入我的代码时，我进入 RTCGetTime 并在监视窗口中看到“timdatstrptr -> second = 12”分配正确执行。但问题在外面。如果我将“TimeDateData --> second”放在带有 ???????? 的空格中，编译器会生成错误。所以我不知道我应该如何通过指针访问全局定义数组的内容。

如果我理解，声明为“TimeBase *TimeDateData”的指针指向我的数组，并使用“-->”访问，因为它是一个指针。我错了吗？这是如何运作的？

任何人都可以帮助我吗？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:56:25.567

编译器不知道`time_date_str`. 您有 2 个选择：

*   将`struct time_date_str`声明移动到头文件中
*   在`rtc_i2c.c`

这一切都归结为一个问题：外部实体是否应该知道这个结构的细节？

还有其他问题，包括您将未初始化的指针传递给`RTCGetTime`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:08:50.740

您不应该在它所在的文件之外使用该结构，这就是为什么它位于 file`rtc_i2c.c`中，而不是位于`rtc_i2c.h`. 尝试寻找其他方法来完成您的需要。

例如，我猜一个声明`RTCGetTime`也出现在某个地方`rtc_i2c.h`，这就是为什么你可以在另一个文件（`main.c`）中使用它。所以，在 中寻找其他有用的功能`rtc_i2c.h`，也许有什么可以用的？

如果你绝对不能这样做，只需将结构的定义移动到头文件中：

```
#ifndef RTC_I2C_H 
#define RTC_I2C_H 

struct time_date_str
{
  char year;
  char month;
  char date;
  char day;

  char hour;
  char minute;
  char second;
};

typedef struct time_date_str TimeDate;

#endif 
```

# android - 当我摇动我的手持设备时如何获得两种以上的颜色。我的应用程序在传感器上

> ID：11344778
> 
> 赞同：0
> 
> 时间：2012-07-05T12:54:02.807
> 
> 标签：android

嗨，我的应用程序在传感器上，如果我摇晃它，我找不到任何其他颜色。我在 if else 循环中只提供了两种颜色。但是，如果想添加更多颜色，那么我应该添加什么。解决方案是什么。请帮助我解决这个问题。

```
package com.sensortestactivity;

import android.app.Activity;
import android.graphics.Color;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Toast;

public class SensorTestActivity extends Activity implements SensorEventListener {

    private SensorManager sensorManager;
    private Boolean color = false;
    private View view;
    private long lastUpdate;

    // -- CALLED WHEN THE ACTIVITY IS FIRST CREATED --//

    @Override
    public void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        view = findViewById(R.id.textView);
        view.setBackgroundColor(Color.GREEN);

        sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                SensorManager.SENSOR_DELAY_NORMAL);

        lastUpdate = System.currentTimeMillis();

    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
            getAccelerometer(event);
        }

    }

    private void getAccelerometer(SensorEvent event) {
        float[] values = event.values;

        // -- MOVEMENT --

        float x = values[0];
        float y = values[1];
        float z = values[2];
        float accelerationSquareRoot = (x * x + y * y + z * z)
                / (SensorManager.GRAVITY_EARTH * SensorManager.GRAVITY_EARTH);
        long actualTime = System.currentTimeMillis();

        if (accelerationSquareRoot >= 2) {
            if (actualTime - lastUpdate < 200) {
                return;
            }
            lastUpdate = actualTime;
            Toast.makeText(this, "DEVICE WAS SHUFFELED", Toast.LENGTH_SHORT)
                    .show();
            if (color) {
                view.setBackgroundColor(Color.GREEN);
            } else {
                view.setBackgroundColor(Color.RED);
            }
            color = !color;
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        sensorManager.unregisterListener(this);
    }

    @Override
    protected void onResume() {
        super.onResume();
        // -- REGISTER THIS CLASS AS A LISTENER FOR THE ORIENTATION AND
        // ACCELEROMETER SENSORS --

        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                SensorManager.SENSOR_DELAY_NORMAL);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:09:41.953

你可以使用

```
view.setBackgroundColor(HEXVALUE); 
```

十六进制值是这样使用的：0xAARRGGBB

AA = Alpha 通道 RR = 红色通道 GG = 绿色通道 BB = 蓝色通道

一个有效的颜色是：0xFFFF0000 这将创建红色另一个有效的颜色：0xFFF0F0F0

对于十六进制数字，您应该查看维基百科。[http://en.wikipedia.org/wiki/十六进制](http://en.wikipedia.org/wiki/Hexadecimal)

您可以使用随机数生成器随机设置颜色。

```
Math.random() * 17 
```

这将为您提供从 0 开始并以 16 结束的整数值。您只需将它们计算为十六进制：0 = 0

1 = 1

2 = 2

...

9 = 9

10 = 一个

11 = 乙

...

16 = F

# jquery - 同位素组合过滤

> ID：11344781
> 
> 赞同：1
> 
> 时间：2012-07-05T12:54:12.220
> 
> 标签：jquery, jquery-isotope

我使用了[不错的 Isotope 教程](http://www.designlunatic.com/2011/08/isotope-tutorial/)来创建我的内容。还在 Isotope 的网站上查看了如何添加第二个过滤，但对于初学者来说，这似乎太难了。

我只想添加第二个导航以按月和年过滤。

```
$('#nav a').click(function(){
    var selector = $(this).attr('data-filter');
    $container.isotope({
        filter: selector,
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false,
        }
    });
    return false;
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:14:26.937

请参阅[插件作者的this fiddle以](http://jsfiddle.net/desandro/wdSHh/)获取*单个* **和** *组合*过滤器；完成这项工作只需要很少的代码。您可以在那里对其进行调整以了解其工作原理。

# django - Django auth_user - 排除非活动用户的最佳实践

> ID：11344784
> 
> 赞同：1
> 
> 时间：2012-07-05T12:54:29.547
> 
> 标签：django, django-authentication, django-managers

我们的应用程序将`is_active`用户模型中的字段设置`False`为代表已删除的用户。**从对用户表的每次访问中**
**排除已删除用户 ( ) 的最佳做法是什么？`where is_active=False`**
请考虑以下事项：
1\. 该应用程序已经编写完毕，因此我们希望尽可能减少代码更改。
2\. 应用程序使用：`request.user`，`get_object_or_404()`当然还有`User.objects`，因此解决方案必须将所有这些都考虑在内。

从我所做的研究中，我发现：
1\. 代理模型：会迫使我对代码进行大量更改；我不知道它如何与`request`and一起使用`get_object_or_404()`。
2\. `contribute_to_class`: 可以用来覆盖`objects`管理器还是只添加一个新的？安全吗？
3\. 中间件更改：我不想涉及这个。对我来说太冒险了。

有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:56:52.263

没有办法做到这一点，你也不应该尝试。将每个操作限制为选择模型实例的唯一方法是限制默认查询集，然后有效地孤立排除的实例，从而无法再次访问它们。[Django 文档](https://docs.djangoproject.com/en/dev/topics/db/managers/#do-not-filter-away-any-results-in-this-type-of-manager-subclass)明确警告这种行为。

> 如果您覆盖该`get_query_set()`方法并过滤掉任何行，Django 将返回不正确的结果。不要那样做。*过滤结果的管理器`get_query_set()`不适合用作自动管理器。（强调我的）*

“自动”管理器与默认管理器基本相同。它被用于相关领域、Django 管理员以及 Django 机器的无数其他领域。如果您限制默认经理，您将全面限制所有内容。

现在，还有其他选项可以快速访问有限的查询集；它们根本不是“自动的”，这意味着您仍然必须注意使用它们，而不是让一切都靠魔法发生。但是，“魔术”在这方面违反了 Python 的核心租户之一：*显式优于隐式*。`User`默认情况下限制查询集是一种隐式操作。手动过滤查询集、引用自定义管理器方法或使用的子类`User`都是显式操作，因此更可取。

# php - 将页面添加到从动态 html 生成的 tcpdf 文档

> ID：11344787
> 
> 赞同：1
> 
> 时间：2012-07-05T12:54:32.257
> 
> 标签：php, tcpdf

我使用 tcpdf 从动态 html 生成了一个 pdf。现在我想在一些行之后添加页面。

我尝试使用`page-break-after:always`，但它没有工作`<tr>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:16:22.347

是的，由于表格的性质，这行不通；没有地方可以“在” a 之后*放置*`<tr>`一些东西。`<td>`我建议在您要中断的行的最后一行的末尾嵌入其中一个：

```
<br pagebreak="true"/> 
```

# c# - 如何从 RadDataForm 中删除奇怪的线条？

> ID：11344795
> 
> 赞同：0
> 
> 时间：2012-07-05T12:55:01.840
> 
> 标签：c#, .net, wpf, telerik

我从 RadDataForm 中删除了页眉、页脚和边框：

```
<t:RadDataForm ItemsSource="{Binding Item}" MinHeight="300" MinWidth="300" 
               AutoEdit="True" BorderThickness="0" Background="Transparent"
               CommandButtonsVisibility="None" BorderBrush="Transparent" 
               ValidationSummaryVisibility="Collapsed" /> 
```

但是仍然存在两条线。如何去除水平线？ ![在此处输入图像描述](../Images/d78b576766fd368237e2e85b8e8e92ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:14:47.097

您是否尝试过使用 Blend 来设置控件的样式？请注意，我使用的是 Silverlight，但应该是一样的。

但是，将此属性放入您的 RadDataForm 控件中：

```
Style="{StaticResource RadDataFormStyle1}" 
```

现在它应该是这样的：

```
<t:RadDataForm ItemsSource="{Binding Item}" MinHeight="300" MinWidth="300" 
           AutoEdit="True" BorderThickness="0" Background="Transparent"
           CommandButtonsVisibility="None" BorderBrush="Transparent" 
           ValidationSummaryVisibility="Collapsed" 
           Style="{StaticResource RadDataFormStyleNoBorders}" /> 
```

现在您必须设置样式资源。您可以将样式资源放入 app.xaml 或控件的同一页面中。例如我有一个`sdk:Page`. 要将样式嵌入到控件的同一页面中，您必须执行以下操作：

```
<sdk:Page 
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
  xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"
  xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk" 
  xmlns:t="http://schemas.telerik.com/2008/xaml/presentation"
  [other page things...]
......>

<!-- COPY FROM HERE, REPLACE ALL "telerik:" with yours "t:" and "sdk:" with your page namespace -->    

    <sdk:Page.Resources>
    <SolidColorBrush x:Key="DataForm_HeaderOuterBorder" Color="#FF282828"/>
    <SolidColorBrush x:Key="DataForm_HeaderInnerBorder" Color="#FFB5B5B5"/>
    <LinearGradientBrush x:Key="DataForm_HeaderBackground" EndPoint="0.5,1" StartPoint="0.5,0">
        <GradientStop Color="#FF5B5B5B" Offset="1"/>
        <GradientStop Color="#FF868686"/>
        <GradientStop Color="#FF4F4F4F" Offset="0.42"/>
        <GradientStop Color="#FF0E0E0E" Offset="0.43"/>
    </LinearGradientBrush>
    <SolidColorBrush x:Key="DataForm_HeaderForeground" Color="White"/>
    <Telerik_Windows_Controls_Data_DataForm:DescriptionVisibilityConverter x:Key="DescriptionVisibilityConverter"/>
    <SolidColorBrush x:Key="DataFormPanel_Border" Color="#FF848484"/>
    <LinearGradientBrush x:Key="DataForm_FooterPanel_Background" EndPoint="0.5,1" StartPoint="0.5,0">
        <GradientStop Color="#FFB5B5B5"/>
        <GradientStop Color="#FFF0F0F0" Offset="0.5"/>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="Background_Disabled" EndPoint="0.5,1" StartPoint="0.5,0">
        <GradientStop Color="#7F000000"/>
        <GradientStop Color="#7F000000" Offset="1"/>
        <GradientStop Color="#33000000" Offset="0.5"/>
    </LinearGradientBrush>
    <telerik:InvertedBooleanToVisibilityConverter x:Key="InvertedBooleanToVisibilityConverter"/>
    <ControlTemplate x:Key="RadDataFormTemplate" TargetType="telerik:RadDataForm">
        <Border x:Name="PART_RootElement" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
            <Grid x:Name="PART_DataFormGrid" Background="{TemplateBinding Background}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Border x:Name="Header" BorderBrush="{StaticResource DataForm_HeaderOuterBorder}" BorderThickness="1" Margin="-1,-1,-1,0" Visibility="{Binding Header, Converter={StaticResource DescriptionVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}}">
                    <Border BorderBrush="{StaticResource DataForm_HeaderInnerBorder}" BorderThickness="1" Background="{StaticResource DataForm_HeaderBackground}">
                        <ContentControl x:Name="PART_ContentPresenter" Content="{TemplateBinding Header}" Foreground="{StaticResource DataForm_HeaderForeground}" FontWeight="Bold" HorizontalContentAlignment="Stretch" Margin="4,6,4,6" VerticalAlignment="Center" VerticalContentAlignment="Top"/>
                    </Border>
                </Border>
                <Telerik_Windows_Controls_Data_DataForm:CollectionNavigator x:Name="CollectionNavigator" Grid.Row="1" telerik:StyleManager.Theme="{StaticResource Theme}" BorderBrush="{x:Null}"/>
                <Border BorderThickness="0,0,0,1" Grid.Row="2">
                    <ScrollViewer x:Name="PART_ItemsScrollViewer" ScrollViewer.HorizontalScrollBarVisibility="Auto" IsTabStop="False" telerik:StyleManager.Theme="{StaticResource Theme}" ScrollViewer.VerticalScrollBarVisibility="Auto">
                        <StackPanel Orientation="Vertical">
                            <Telerik_Windows_Controls_Data_DataForm:AutoGeneratedFieldsPresenter x:Name="PART_AutoGeneratedFieldsPresenter" AutoGenerateFields="{Binding AutoGenerateFields, RelativeSource={RelativeSource TemplatedParent}}" CurrentItem="{Binding CurrentItem}" telerik:StyleManager.Theme="{StaticResource Theme}"/>
                            <ContentPresenter x:Name="PART_FieldsContentPresenter" Content="{Binding CurrentItem}"/>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
                <Telerik_Windows_Controls_Data_DataForm:DataFormValidationSummary x:Name="PART_ValidationSummary" Grid.Row="3" telerik:StyleManager.Theme="{StaticResource Theme}" Visibility="{TemplateBinding ValidationSummaryVisibility}"/>
                <Border x:Name="FooterPanel_Background" Background="{StaticResource DataForm_FooterPanel_Background}" Grid.Row="4">
                    <StackPanel x:Name="PART_FooterPanel" HorizontalAlignment="Right" Orientation="Horizontal">
                        <telerik:RadButton x:Name="PART_CommitButton" Content="{TemplateBinding CommitButtonContent}" Command="controls:RadDataFormCommands.CommitEdit" Margin="2,4,4,4" MinWidth="48" MinHeight="20" telerik:StyleManager.Theme="{StaticResource Theme}" Visibility="{Binding CommitButtonVisibility}"/>
                        <telerik:RadButton x:Name="PART_CancelButton" Content="{TemplateBinding CancelButtonContent}" Command="controls:RadDataFormCommands.CancelEdit" Margin="2,4,4,4" MinWidth="48" MinHeight="20" telerik:StyleManager.Theme="{StaticResource Theme}" Visibility="{Binding CancelButtonVisibility}"/>
                    </StackPanel>
                </Border>
                <Border x:Name="Background_Disabled" Background="{StaticResource Background_Disabled}" IsHitTestVisible="False" Grid.RowSpan="5" Visibility="{Binding IsEnabled, Converter={StaticResource InvertedBooleanToVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}}"/>
            </Grid>
        </Border>
    </ControlTemplate>
    <SolidColorBrush x:Key="DataField_Foreground" Color="Black"/>
    <Style x:Key="RadDataFormNoBorders" TargetType="telerik:RadDataForm">
        <Setter Property="Template" Value="{StaticResource RadDataFormTemplate}"/>
        <Setter Property="Foreground" Value="{StaticResource DataField_Foreground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ControlOuterBorder}"/>
        <Setter Property="Background" Value="{StaticResource ControlBackground}"/>
        <Setter Property="BorderThickness" Value="1"/>
    </Style>
</sdk:Page.Resources>

<!-- STOP COPING HERE, NOW YOU CAN PASTE, REMEMBER TO REPLACE --> ........ 
```

或者，您可以尝试使用 Telerik 提供的主题属性：

```
 telerik:Theming.Theme="Transparent" 
```

此属性允许您不对控件设置样式，但它会更改所有控件的外观，并且您可能不喜欢此主题。

# android - 在 Android 中显示图像会引发内存不足错误

> ID：11344799
> 
> 赞同：1
> 
> 时间：2012-07-05T12:55:10.017
> 
> 标签：android, out-of-memory

我正在显示图像`ViewPager.`显示的图像占用大量空间。显示几张图片后，它抛出`java.lang.outofMemoryError: Bitmap size exceeds VM bugdet.`

关于可能出现问题的任何建议？

```
public Object instantiateItem(View pager, int position) {

    LayoutInflater inflater = (LayoutInflater) pager.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View view = inflater.inflate(R.layout.fotopager_buttons, null);

    TextView text = ((TextView) view.findViewById(R.id.textView1));
    text.setText(Global.totalpaging_titlearray[position]);

    TextView textprice = ((TextView) view.findViewById(R.id.textprice));
    textprice.setText("SAR " + Global.totalpaging_pricearray[position]);

    TextView textdesc = ((TextView) view.findViewById(R.id.textdescription));
    textdesc.setText(Global.totalpaging_descarray[position]);

    ImageView imageView1 = ((ImageView) view.findViewById(R.id.image));
    bimage = getBitmapFromURL(Global.totalpaging_array[position]);
    imageView1.setImageBitmap(bimage);
    ((ViewPager) pager).addView(view);

    return view;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:10:56.137

据我了解，您正在查看寻呼机的页面上显示图像。您的视图寻呼机有多少页？

如果一页中的位图超出 VM 预算，请考虑调整位图大小或解码为低记忆颜色格式，例如 RGB565 或 ARGB444。

如果没有代码，就无法确定您是否正在正确地实例化视图寻呼机的页面。您可以发布 PagerAdapter 类`instantiateItem(View view, int position)`方法的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-21T12:01:25.857

在图像非常大之前，您会遇到此问题。它们是非常高分辨率的图像，因此具有非常大的尺寸。尝试使用任何软件（如 Photoshop）减小这些图像的大小或分辨率。

# ruby - Ruby 使用 Nokogiri 解析 HTTPresponse

> ID：11344802
> 
> 赞同：6
> 
> 时间：2012-07-05T12:55:28.390
> 
> 标签：ruby, nokogiri

使用 Nokogiri 解析 HTTPresponse

您好，我无法使用 Nokogiri 解析 HTTPresponse 对象。

我使用这个函数在这里获取一个网站：

# 获取链接

```
def fetch(uri_str, limit = 10)

  # You should choose better exception.
  raise ArgumentError, 'HTTP redirect too deep' if limit == 0

  url = URI.parse(URI.encode(uri_str.strip))
  puts url

  #get path
  req = Net::HTTP::Get.new(url.path,headers)
  #start TCP/IP
  response = Net::HTTP.start(url.host,url.port) { |http|
        http.request(req)
  }
  case response
  when Net::HTTPSuccess
    then #print final redirect to a file
    puts "this is location" + uri_str
    puts "this is the host #{url.host}"
    puts "this is the path #{url.path}"

    return response
    # if you get a 302 response
  when Net::HTTPRedirection 
    then 
    puts "this is redirect" + response['location']
    return fetch(response['location'],aFile, limit - 1)
  else
    response.error!
  end
end

            html = fetch("http://www.somewebsite.com/hahaha/")
            puts html
            noko = Nokogiri::HTML(html) 
```

当我这样做时，html 会打印出一大堆乱码，而 Nokogiri 抱怨说“node_set 必须是 Nokogiri::XML::NOdeset

如果有人可以提供帮助，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:02:25.547

第一件事。您的`fetch`方法返回一个`Net::HTTPResponse`对象，而不仅仅是主体。你应该把尸体提供给Nokogiri。

```
response = fetch("http://www.somewebsite.com/hahaha/")
puts response.body
noko = Nokogiri::HTML(response.body) 
```

我已经更新了您的脚本，使其可以运行（如下）。有几件事是未定义的。

```
require 'nokogiri'
require 'net/http'

def fetch(uri_str, limit = 10)
  # You should choose better exception.
  raise ArgumentError, 'HTTP redirect too deep' if limit == 0

  url = URI.parse(URI.encode(uri_str.strip))
  puts url

  #get path
  headers = {}
  req = Net::HTTP::Get.new(url.path,headers)
  #start TCP/IP
  response = Net::HTTP.start(url.host,url.port) { |http|
        http.request(req)
  }

  case response
  when Net::HTTPSuccess
    then #print final redirect to a file
    puts "this is location" + uri_str
    puts "this is the host #{url.host}"
    puts "this is the path #{url.path}"

    return response
    # if you get a 302 response
  when Net::HTTPRedirection
    then
    puts "this is redirect" + response['location']
    return fetch(response['location'], limit-1)
  else
    response.error!
  end
end

response = fetch("http://www.google.com/")
puts response
noko = Nokogiri::HTML(response.body)
puts noko 
```

该脚本没有给出错误并打印内容。由于您收到的内容，您可能会收到 Nokogiri 错误。我在使用 Nokogiri 时遇到的一个常见问题是字符编码。如果没有确切的错误，就不可能知道发生了什么。

我建议查看以下 StackOverflow 问题

[ruby 1.9：UTF-8 中的无效字节序列](https://stackoverflow.com/questions/2982677/ruby-1-9-invalid-byte-sequence-in-utf-8) （特别是[这个答案](https://stackoverflow.com/a/8873922/68554)）

[如何将 Net::HTTP 响应转换为 Ruby 1.9.1 中的某种编码？](https://stackoverflow.com/questions/1207335/how-to-convert-a-nethttp-response-to-a-certain-encoding-in-ruby-1-9-1)

# python - Django 活动流：“str”对象没有属性“verb”

> ID：11344804
> 
> 赞同：0
> 
> 时间：2012-07-05T12:55:32.030
> 
> 标签：python, django

我正在尝试使用 django 活动流构建与[此](https://stackoverflow.com/questions/2128886/django-way-for-building-a-news-feed-status-update-activity-stream)非常相似的东西，并且老实说在实现它时面临很多困难。此外，除此之外没有获得太多参考文档，[但](http://justquick.github.com/django-activity-stream/)发现很难理解。

假设用户 A 属于团队 1。用户 A 将值保存到模型后，我应该如何使用 django 活动流向团队 1（用户 A 除外）和团队 2 的所有成员广播此消息。诸如“来自团队 1 的用户 A 挑战了团队 2。主题是“*主题*”，日期为“date_of_test”，总问题为“total_questions”。

更新：

似乎在某处我错过了这条线。我创建了不同的示例模型来测试它，但它不起作用。

# 模型.py

```
from django.db import models
from django.db.models.signals import post_save
from actstream import action

class Name(models.Model):
    name = models.CharField(max_length=200)

def my_handler(sender, instance, created, **kwargs):
    action.send(instance, verb='was saved')

post_save.connect(my_handler, sender=Name) 
```

# 网址.py

```
from django.conf.urls.defaults import *
from django.views.generic.simple import direct_to_template

urlpatterns = patterns('',
    ('^activity/', include('actstream.urls')),
    (r'^$', direct_to_template, {'template':'base.html'}),
) 
```

现在我想在保存数据后立即在模板上显示操作。

# base.html

```
{% load activity_tags %}
<html>
<body>
Hi Sunil
{% display_action action %}
</body>
</html> 
```

但它给出的错误*'str' 对象没有属性 'verb'*。我认为问题出在base.html上。

非常感谢您的宝贵时间，

苏尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:44:49.387

对我来说似乎很简单。有关[创建操作](http://justquick.github.com/django-activity-stream/actions.html)的文档告诉您您需要知道的一切：

```
from actstream import action

action.send(request.user, verb='challenged', target=team_one) 
```

*哪里`team_one`是`Team`模型或类似模型的实例，具体取决于您命名它的名称。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:09:29.617

我的错误..是认为 django-activity 流具有 Comet 类型的行为来获取数据。[阅读完此](https://stackoverflow.com/questions/11368137/does-cometlong-polling-needed-for-django-activity-stream)问题后关闭此问题。

# php - 将数组中键的数据类型从数字更改为字符串

> ID：11344807
> 
> 赞同：2
> 
> 时间：2012-07-05T12:55:41.830
> 
> 标签：php, arrays, data-conversion

我有两个带有数字键的数组。这是一个小例子：

```
$test_a = array(1 => 'one', 2 => '二');
$test_b = array(2 => 'two', 4 => 'four'); 
```

我想将它们与 合并`array_merge()`以接收`$test_c`数组：

```
$test_c = array(
    1 => 'one',
    2 => 'two',
    4 => 'four'
); 
```

该手册[`array_merge`](http://php.net/array_merge/)提到：

> 带有数字键的输入数组中的值将使用从结果数组中的零开始的递增键重新编号。

似乎是真的，因为：

```
$test_c = array_merge($test_a, $test_b);
var_dump($test_c); 
```

返回：

```
array (size=4)
    0 => string 'one' (length=3)
    1 => string '二' (length=3)
    2 => string 'two' (length=3)
    3 => string 'four' (length=4) 
```

我尝试了什么：

1.  我尝试将键转换为字符串：

    ```
    foreach($test_a as $key => $value) $test_a[(string)($key)] = $value; 
    ```

    ...键仍然是数字。

2.  我试过[`strval()`](http://php.net/array_merge/)：

    ```
    foreach($test_a as $key => $value) $test_a[strval($key)] = $value; 
    ```

    不用找了。键仍然是数字。

3.  我试过这个技巧：

    ```
    foreach($test_a as $key => $value) $test_a['' . $key . ''] = $value; 
    ```

    也不行。键仍然是数字。

令我惊讶的是，当我发现数组键上有从字符串到数字的自动转换之类的东西时。这将键更改为字符串：

```
foreach($test_a as $key => $value) $test_a[' ' . $key . ' '] = $value; 
```

当我添加时`trim()`：

```
foreach($test_a as $key => $value) $test_a[trim(' ' . $key . ' ')] = $value; 
```

键被转换回数字。

基本上，我想合并这两个数组。我想唯一的解决方案是找到一种将键从数字转换为字符串数据类型的方法。
如果你能额外解释一下“自动转换”的事情，那我就完全满意了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:58:54.917

您可以`+`在两个数组上使用运算符，如下所示：

```
$test_a = array(1 => 'one', 2 => '二');
$test_b = array(2 => 'two', 4 => 'four');

var_dump( $test_b + $test_a); 
```

这[将输出](http://viper-7.com/F1jRi7)：

```
array(3) {
  [2]=>
  string(3) "two"
  [4]=>
  string(4) "four"
  [1]=>
  string(3) "one"
} 
```

它不是您要查找的确切顺序，但您可以使用[`ksort()`](http://php.net/ksort)按键排序以[获得准确的输出](http://viper-7.com/61AYsv)。您所说的“自动转换”实际上称为类型强制，在 PHP中称为[类型杂耍。](http://php.net/manual/en/language.types.type-juggling.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:48:09.610

简单地说，我这样做了：

```
foreach($new as $k => $v)
{
    $old[$k] = $v;
}
// This will overwrite all values in OLD with any existing
// matching value in NEW
// And keep all non matching values from OLD intact.
// No reindexing, and complete overwrite
// Working with all kind of data 
```

# asp.net-mvc - 从 MVC 控制器调用 Web API 以构建模型并将其传递给视图

> ID：11344808
> 
> 赞同：6
> 
> 时间：2012-07-05T12:55:48.577
> 
> 标签：asp.net-mvc, razor, asp.net-web-api

我正在尝试掌握许多对我来说是新概念的概念，我需要对使用 Web API 创建强类型模型并将其从 MVC 控制器传递到其 Razor 视图的最佳方式进行一些说明。

正如在许多示例中所见，您通常从某个存储库创建模型，然后将其传递给视图（强类型或非强类型），然后使用 Razor 语法，它使您可以访问模型来构建 html，而不必使用 JavaScript .

对我来说，事情变得复杂的地方是当我想使用 Web API 来创建我想要使用的模型时，就像我在上一段中描述的那样使用它。

我应该调用新的 HTTPClient 来从我的控制器中调用 Web API 服务吗？我需要反序列化和格式化响应吗？ETC...

我总是在视图中看到来自脚本的调用和操作......

有人能指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T13:25:01.387

如果您的 WebAPI 是一个单独的端点，即不是您现有站点的一部分，那么是的，您必须从控制器内部发送一个[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)，然后序列化响应中的数据并将其传递到您的视图中。

或者，您可以通过 AJAX 直接从视图内部调用 API，但是，我不确定您是否需要控制器在数据归结为视图之前对数据进行处理。

# java - 调用另一个泛型方法的泛型方法 - util 方法返回 Class 而不是客户

> ID：11344812
> 
> 赞同：2
> 
> 时间：2012-07-05T12:56:01.560
> 
> 标签：java, generics

我`simpleframework`用来解析 XML 字符串并将其转换为对象。

```
Serializer serializer = new Persister();
try {
    Customer model = serializer.read(Customer.class, xmlString);
} catch (Exception e) {
    e.printStackTrace();
} 
```

它工作得很好，但是我将有几个类要转换。我做了一个 util 方法，我用它来调用：

```
Utils.parseXml(Customer.class, xmlString); 
```

下面是一个实现：

```
public class Utils {
    public static <T> T parseXml(T cls, String data) {
        Serializer serializer = new Persister();
        T model = null;

        try {
            model = serializer.read(cls, data);
        } catch (Exception e) {
            e.printStackTrace();
        }

        return model;
    }
} 
```

问题是这个方法返回`Class<Customer>`而不是`Customer`我期望的。

我应该怎么做才能得到有效的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T13:02:38.160

`T cls`将方法定义更改为`Class<T>`.

# java - 为什么 java.lang.Object 不能被克隆？

> ID：11344814
> 
> 赞同：2
> 
> 时间：2012-07-05T12:56:03.917
> 
> 标签：java, clone

当我尝试克隆一个通用[对象](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html)时，我得到编译时错误。为什么？

```
 Object obj=new Object();
    obj.clone();  // Here compile time error "The method clone() from the type Object is not visible" 
```

每个类都扩展了[Object](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html)类，并且克隆方法在[Object](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html)类中受到保护。

`protected`方法可以在同一个包中访问，`subclasses`并且所有类都是`java.lang.Object`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T12:57:38.187

因为在类`clone`中*受到保护。*`Object`不是`public`。

访问对象方法的唯一`clone()`方法是知道它有一个具有公共`clone()`方法的编译时类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T12:59:41.467

根据[Java SE 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)：

> Object 类本身并没有实现接口 Cloneable，因此在类为 Object 的对象上调用 clone 方法将导致在运行时抛出异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T13:01:25.157

这将是让克隆工作的最低要求：

```
public class SubObj implements Cloneable {
  public Object clone() { return super.clone(); }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T13:01:42.767

`protected`字段只能从同一个包内访问，因此类`clone()`的方法`Object`只能从位于`java.lang`包中的任何类访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T12:58:26.447

您必须明确实现 Cloneable 接口。看到这个给出解释的[线程。](http://www.go4expert.com/forums/showthread.php?t=5424)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T13:08:22.297

如果你使用 Groovy 来绕过 java 编译错误，你会得到：

```
Exception in thread "main" java.lang.CloneNotSupportedException: java.lang.Object
    at java.lang.Object.clone(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:86)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:230)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:912)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:756)
    at org.codehaus.groovy.runtime.InvokerHelper.invokePojoMethod(InvokerHelper.java:766)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:754)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:170)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethod0(ScriptBytecodeAdapter.java:198)
    at regexTests.main(regexTests.groovy:19)
ERROR: JDWP Unable to get JNI 1.2 environment, jvm->GetEnv() return code = -2
JDWP exit error AGENT_ERROR_NO_JNI_ENV(183):  [../../../src/share/back/util.c:820] 
```

如果您阅读了克隆 API（我将链接它），它会说如果未实现接口，则调用 *.clone() 将抛出`CloneNotSupportedException`.

链接到`java.lang.Object` [http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29的克隆 API](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#clone%28%29)

[编辑] The Original Question™ 询问为什么这种方法以它的方式可见。这是因为它只能被 java.lang 包中的方法访问。它不是为了让程序员能够克隆`Object`. `CloneNotSupportedException`如果您不想克隆您的 OWN 对象，则 抛出 a正是您想要做的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-12T07:00:21.087

```
 void method() {

    Object obj=new Object(); //Object is a parent class, it's not inherit from any other class...     
    obj.clone();        //  compile time error   

} 
```

我们无法从不同的包访问“Has A”关系的受保护方法，因为您的Class包是（com.xxx.yyy），而Object类包是（java.lang），这两个类都在不同的包中。

受保护的方法可以在同一个包以及子类中访问（IS A 关系）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-17T14:00:43.367

我试过这段代码：

```
public final class User {

    private String name;
    private boolean isActive;
    private String userId;
    private Address address;

    // can be constructed using this constructor ONLY !
    public User(String name, boolean isActive, String userId, Address address) {
        this.name = name;
        this.isActive = isActive;
        this.userId = userId;
        this.address = address;
    }

    public String getName() {
        return name;
    }

    public boolean isActive() {
        return isActive;
    }

    public String getUserId() {
        return userId;
    }

    public Address getAddress() {
        return address;
    }

    protected Object cloneMe() throws CloneNotSupportedException {
        return super.clone(); // throws CloneNotSupportedException
    }
} 
```

公共类 CloneNotSupportedException 扩展异常

> 抛出表示调用了Object类中的clone方法克隆了一个对象，但是该对象的类没有实现Cloneable接口。覆盖 clone 方法的应用程序也可以抛出此异常，以指示无法或不应克隆对象。

对象没有实现任何接口，为了让我的用户类工作它必须实现`Cloneable`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-08T02:19:25.450

对象类 clone() 方法已被 API 级别的受保护访问修饰符修改。所以我们不能在没有继承的情况下在任何地方访问它。所以在我们调用对象类 clone() 方法之前，你需要实现 Cloneable 接口。然后代码将在运行时正确运行。否则它将在运行时生成 CloneNotSupportedException。

```
/*Subclass is my implementing class */

public class SubClass implements Cloneable {

    @Override
    public SubClass clone() throws CloneNotSupportedException {
        return (SubClass) super.clone();
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-29T15:19:52.280

```
import java.util.Scanner;
import java.util.jar.Attributes.Name;
import java.util.Arrays;
public class Main{
    public class man{
        protected void name() {
            System.out.println("hei");
        }
    }
    public class people extends man{
        public int age;

        public int getAge() {
            name();
            return age;
        }

        public void setAge(int age) {
            this.age = age;
        }

        @Override
        public String toString() {
            return "people [age=" + age + "]";
        }

        public Object myclone() throws CloneNotSupportedException {
            return this.clone();
        }
    }

    public void test() throws CloneNotSupportedException {

        people p1 = new people();
        p1.setAge(10);
        System.out.println(p1);
//      NG:
        people p2 = (people)p1.clone();
//      Ok
        people p3 = (people)p1.myclone();
        p1.setAge(10);
        System.out.println(p1);
        System.out.println(p2);
    }
    public static void main(String args[]) throws CloneNotSupportedException{
        new Main().test();

    }
} 
```

查看 NG 代码和 ok 代码。

```
//      NG for:The method clone() from the type Object is not visible
        people p2 = (people)p1.clone();
//      Ok
        people p3 = (people)p1.myclone(); 
```

为什么？原因`test()`不属于子类。所以即使`clone()`被人对象调用`p1`，它也不是`peopel`对象的位置。这`myclone()`正是人们反对的地方。

# sql - 限制选择中的发生

> ID：11344817
> 
> 赞同：-1
> 
> 时间：2012-07-05T12:56:13.030
> 
> 标签：sql, select, subquery

我想做一个选择，它返回一组具有相同数据的对象。我的问题是：我有选择

```
select * 
from avi
where codAvi in (select codAVi 
                 from csa 
                 where codEca in (select codEca 
                                  from csa 
                                  where codAvi =19)); 
```

我的问题是，如果我 codAvi 19 有 codeEca 1,2,3，该查询返回所有带有该 codEca 的 avi，而他返回其他人，例如带有 codeEca 1,2,3,4 的 avi。

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:12:43.937

I'm not sure what data you actually want. Some example data and what you expect the output to be would help.

Here is your query using joins, maybe this makes the logic clearer for you?

```
select * 
from avi
join csa as csa1 on avi.codAvi = csa1.codAvi
join csa as cas2 on csa1.codEca = csa2.codEca
where csa2.codAvi = 19 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:15:37.510

最里面的查询返回 codAvi = 19（大概是 2,3,4）的所有 CSA 行。

“中间”查询返回第一个结果集中 codeECA 所在的所有 CSA 行的 codAVI 值。如果是 2,3,4，那么您将获得与这些 codEca 值中的至少一个相关的所有 codAVI，这里大概是 1,2,3,4（也许 codAVI 2 和 codAVI 1 都引用了 2 的 codEca ?)

因此，最外层的查询可以从表 AVI 中返回 1、2、3、4 的数据，即使 1 没有引用 codAvi 19。

* * *

这是一些适合我看到的情况的示例数据：

```
CSA
codAvi  CodEca
  1       2
  7       7
 19       2
 19       3
 19       4

AVI
codAVI
  1
  7
 19 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:30:54.380

最后我使用它：

```
SELECT * FROM avi where codAvi in (SELECT e.codAVi FROM csa e WHERE e.codEca IN (SELECT c.codEca FROM csa C WHERE  c.codAvi = 19) GROUP BY e.codAvi HAVING COUNT(*) = (SELECT COUNT(*) FROM csa a WHERE a.codAvi  = 19)) 
```

# .htaccess - 一个简单的 mod 重写规则不适用于 htaccess

> ID：11344818
> 
> 赞同：0
> 
> 时间：2012-07-05T12:56:20.097
> 
> 标签：.htaccess

我希望用户在到达我的子域时被重定向

这是我的 htaccess 里面的内容：

```
RewriteEngine On

RewriteRule ^http://smale.deals.com/(.*) http://traual.deals.com/$1 [R=301,L]
RewriteRule ^http://deals.com/smale/(.*) http://deals.com/traual/$1 [R=301,L] 
```

但是没有重定向发生。为什么？

我的根 htaccess 中也有这个：

```
 RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_USER_AGENT} (Android|iPhone|iPod|Blackberry) [NC]
RewriteCond %{REQUEST_URI} !^/mobile [NC]
RewriteRule ^(.*)/?$ mobile/$1 [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:59:59.173

您不能在`RewriteRule`. 这些需要在`RewriteCond`：

```
RewriteEngine On
# Rewrite requests to smale.deals.com to traual.deals.com
RewriteCond %{HTTP_HOST} ^smale\.deals\.com$ [NC]
RewriteRule (.*) http://traual.deals.com/$1 [R=301,L]

# For deals.com...
RewriteCond %{HTTP_HOST} ^deals\.com$ [NC]
# Rewrite requests to smale/ to deals.com/traual/
RewriteRule ^smale/(.*) http://deals.com/traual/$1 [R=301,L] 
```

# tree - 更改 treeitem 的默认箭头图标

> ID：11344820
> 
> 赞同：0
> 
> 时间：2012-07-05T12:56:27.473
> 
> 标签：tree, firefox-addon, xul

我的 xul 应用程序中有这个树结构。

```
<tree>
    <treechildren>
        <treeitem>
            <treerow> 
                 /* some code */
            </treerow>
            <treechildren>
                <treeitem> /* some code */</treeitem>
                <treeitem> /* some code */</treeitem>
            </treechildren>
         </treeitem>
     </treechildren>
</tree> 
```

正如您 xul 大师已经知道的那样，包含 treechildren 的 treeitem 会从标签左侧获得一个箭头。像这样：

![在此处输入图像描述](../Images/cc0814a19ee8f6f174ea870c353cfdcd.png)

我想知道的是如何更改此箭头并将其放置在最右侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:49:02.567

这个箭头被称为“twisty”，它使用[`-moz-tree-twisty`伪类](https://developer.mozilla.org/en/XUL_Tutorial/Styling_a_Tree#CSS_Selectors_for_the_Tree)来设置样式。默认的 Windows 主题为扭曲树定义了以下样式：

```
treechildren::-moz-tree-twisty {
  -moz-padding-end: 4px;
  padding-top: 1px;
  width: 9px; /* The image's width is 9 pixels */
  list-style-image: url("chrome://global/skin/tree/twisty-clsd.png");
}

treechildren::-moz-tree-twisty(open) {
  width: 9px; /* The image's width is 9 pixels */
  list-style-image: url("chrome://global/skin/tree/twisty-open.png");
} 
```

通过覆盖这些样式，您可以更改其宽度和边距，您还可以使用其他图像。但是，我认为您不能将其移至其他位置。

# plink - Hop Box 问题远程登录失败

> ID：11344823
> 
> 赞同：0
> 
> 时间：2012-07-05T12:56:40.670
> 
> 标签：plink

我们有一个设置，我们**无法**使用 putty**直接**登录到 ServerB 。

我们必须首先通过提供用户名和密码登录到 ServerA，然后它会以某种方式将我们带到 serverB 并提示我输入 ServerB 的登录 ID 的密码。再次提供密码将我登录到 ServerB，在那里我有一个需要执行的脚本 test.sh。

我想从我的本地 Windows 机器上自动执行 ServerB 上的脚本 test.sh，因此我编写了以下命令。

```
C:\Program Files\PuTTY>plink -agent user1@ServerA "chmod +x /export/home
/user1/test.sh; sh /export/home/user1/test.sh" -v 
```

此命令将我登录到 ServerA **，但**不会将我带到 ServerB，因此找不到 test.sh 脚本。

由于存在这种跳跃概念，我无法登录到 serverB。

请帮我解决一些问题。

注意：ServerA 和 ServerB 都是 unix 服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T11:31:06.587

尝试使用类似 L 的 -nc 参数

```
plink -agent user1@ServerA -nc user@serverB "chmod +x /export/home /user1/test.sh; sh /export/home/user1/test.sh" -v 
```

# python - 对列表中的元素求和

> ID：11344827
> 
> 赞同：85
> 
> 时间：2012-07-05T12:57:04.543
> 
> 标签：python, list, sum

这是我的代码，我需要对列表中未定义数量的元素求和。这该怎么做？

```
l = raw_input()
l = l.split(' ')
l.pop(0) 
```

我的输入：`3 5 4 9` 输入后，我通过删除第一个元素`l.pop(0)`。在`.split(' ')`我的列表之后`['5', '4', '9']`，我需要总结这个列表中的所有元素。

在这种情况下，总和为 18。请注意，未定义元素的数量。

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-07-05T12:57:57.257

您可以简单地使用内置[sum()对列表中的数字求和：](http://docs.python.org/library/functions.html#sum)

```
sum(your_list) 
```

它将汇总尽可能多的数字项。例子：

```
my_list = range(10, 17)
my_list
[10, 11, 12, 13, 14, 15, 16]

sum(my_list)
91 
```

**对于您的具体情况**：

对于您的数据，首先将数字转换为`int`，然后将数字相加：

```
data = ['5', '4', '9']

sum(int(i) for i in data)
18 
```

这将适用于列表中**未定义**数量的元素（只要它们是“数字”）

感谢@senderle 的评论重新转换，以防数据为字符串格式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-05T13:00:47.317

```
>>> l = raw_input()
1 2 3 4 5 6 7 8 9 10
>>> l = l.split()
>>> l.pop(0)
'1'
>>> sum(map(int, l)) #or simply sum(int(x) for x in l) , you've to convert the elements to integer first, before applying sum()
54 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-05T12:59:30.593

Python iterable 可以这样总结 - [`[sum(range(10)[1:])]`](http://docs.python.org/library/functions.html#sum)。这将列表中除第一个元素之外的所有元素相加。

```
>>> atuple = (1,2,3,4,5)
>>> sum(atuple)
15
>>> alist = [1,2,3,4,5]
>>> sum(alist)
15 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-09-26T22:29:47.640

您还可以使用 reduce 方法：

```
>>> myList = [3, 5, 4, 9]
>>> myTotal = reduce(lambda x,y: x+y, myList)
>>> myTotal
21 
```

此外，您可以修改 lambda 函数以在列表中执行其他操作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-05T13:00:44.337

您可以使用`sum`对列表的元素求和，但是如果您的列表来自`raw_input`，您可能希望将项目转换为`int`或`float`首先：

```
l = raw_input().split(' ')
sum(map(int, l)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-01T18:25:30.053

您可以使用`map`函数和 pythons 内置`sum()`函数。它简化了解决方案。并降低了复杂性。
`a=map(int,raw_input().split())`
`sum(a)`
完毕！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-02T14:49:51.273

```
def sumoflist(l):    
    total = 0    
    for i in l:
        total +=i
    return total 
```

# mono - 从哪里获得 MonoTools for Visual Studio 2010/2012 插件。他们的网站不走运，因为它已关闭

> ID：11344828
> 
> 赞同：8
> 
> 时间：2012-07-05T12:57:14.450
> 
> 标签：mono

我一直在尝试从他们的网站（mono-tools.com）获取 Visual Studio 的 MonoTools。但没有运气。从哪里获得 MonoTools for Visual Studio 2010/2012 插件？

阿迪亚。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-13T20:59:21.637

您可以轻松修改 MonoTools 安装程序以使用 VS2012。`.vsix`文件是 ZIP 文件。在 zip 的根目录中，您将看到一个名为 的文件`extension.vsixmanifest`，其中列出了扩展支持的 Visual Studio 版本。

基本上，

1.  下载 MonoTools 包
2.  重命名它以具有`.zip`扩展名
3.  右键单击并选择“打开” - 您不想提取文件，只需使用内置 Windows 机制打开存档
4.  复制`extension.vsixmanifest`到任何地方 - 例如，复制到您的桌面。
5.  在文本编辑器中打开它（我喜欢 Notepad++，EMACS 在 OSX 下也非常棒。）
6.  将密钥更改`SupportedProducts`为以下内容：

> ```
> <SupportedProducts>
>   <VisualStudio Version="10.0">
>     <Edition>VSTS</Edition>
>     <Edition>VSTD</Edition>
>     <Edition>Pro</Edition>
>   </VisualStudio>
>   <VisualStudio Version="11.0">
>     <Edition>VSTS</Edition>
>     <Edition>VSTD</Edition>
>     <Edition>Pro</Edition>
>   </VisualStudio>
> </SupportedProducts> 
> ```

1.  将修改后的文件复制回存档。
2.  将其重命名`.zip`为`.vsix`
3.  运行。应该会出现 Visual Studio 版本选择器，让您选择 VS2012。

如果`Mono`重启VS后菜单项没有出现，可能需要运行

`devenv /setup`

从 VS 命令提示符（或从 c:\program files (x86)\microsoft visual studio 11\common7\ide）。

这几乎适用于任何 VS2010 扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T14:31:46.870

那是 Novell 以前的产品，不再提供或开发。

Xamarin 也不提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T12:11:43.143

可以从这里得到它：http: [//mono-tools.com/](http://mono-tools.com/)

如果您进行他们的调查，则免费

但我没有看到 vs2012 版本

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2012-07-27T04:28:44.197

它的价格至少为 999.00 美元 - [https://store.xamarin.com/](https://store.xamarin.com/)并包含在 Mono for Android 中。这是安装后的屏幕截图。

PluralSight 还提供了一个培训课程——http [: //www.pluralsight-training.net/microsoft/Courses/TableOfContents/android-intro](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents/android-intro)

![适用于 Android 的 Mono 的 Visual Studio 加载项](../Images/7ab28d5c79d7b6f33d08cde592db59f5.png)

# titanium - 点击时钛不运行功能

> ID：11344835
> 
> 赞同：0
> 
> 时间：2012-07-05T12:57:38.547
> 
> 标签：titanium

我正在阅读钛最佳实践，我想知道为什么这似乎不起作用，有人可以告诉我 api 发生了什么变化吗？

[https://wiki.appcelerator.org/display/guides/Mobile+Best+Practices](https://wiki.appcelerator.org/display/guides/Mobile+Best+Practices)

ui/ToggleBox.js - 自定义复选框

```
 function ToggleBox(onChange) {
      this.view = Ti.UI.createView({backgroundColor:'red',height:50,width:50});

      //private instance variable
      var active = false;

      //public instance functions to update internal state, execute events
      this.setActive = function(_active) {
        active = _active;
        this.view.backgroundColor = (active) ? 'green' : 'red';
        onChange.call(instance);
      };

      this.isActive = function() {
        return active;
      };

      //set up behavior for component
      this.view.addEventListener('click', function() {
        this.setActive(!active);
      });
    }
    exports.ToggleBox = ToggleBox; 
```

app.js 中的示例用法

```
var win = Ti.UI.createWindow({backgroundColor:'white'});
var ToggleBox = require('ui/ToggleBox').ToggleBox;

var tb = new ToggleBox(function() {
  alert('The check box is currently: '+this.isActive());
});
tb.view.top = 50;
tb.view.left = 100;

win.add(tb.view); 
```

从添加事件侦听器调用时，它似乎不想返回 setActive 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:48:13.517

点击侦听器中的“this”不是您所期望的。（可能是视图。）因为您的函数已经是 ToggleBox 上下文，所以最简单的解决方案是直接使用对 setActive 的引用。“这。” 只有您为其他代码公开的 API 才需要。

```
function ToggleBox(onChange) {
  var view = this.view = Ti.UI.createView({backgroundColor:'red',height:50,width:50});

  //private instance variable
  var active = false;

  //public instance functions to update internal state, execute events
  var setActive = this.setActive = function(_active) {
    active = _active;
    view.backgroundColor = (active) ? 'green' : 'red';
    onChange.call(instance);
  };

  var isActive = this.isActive = function() {
    return active;
  };

  //set up behavior for component
  view.addEventListener('click', function() {
    setActive(!active);
  });
}
exports.ToggleBox = ToggleBox; 
```

# datetime - Sharepoint DateTime 控件，如何在 datechanged 上调用客户端和服务器端

> ID：11344837
> 
> 赞同：1
> 
> 时间：2012-07-05T12:57:55.633
> 
> 标签：datetime, sharepoint-2010

我在 sharepoint 自定义 webpart 中有一个日期时间控件

```
<SharePoint:DateTimeControl runat="server" ID="txtUKdtofAdm" LocaleId="2057" DateOnly="True"
OnValueChangeClientScript="validateControlsUK();" AutoPostBack="true" 
OnDateChanged="txtUKdtofAdm_OnDateChanged"></SharePoint:DateTimeControl> 
```

我想在更改日期时调用 js 以及服务器端函数。我已经按照上面的方法完成了，但是客户端函数没有执行。任何人都可以帮助我完成这项工作，其中如果日期发生更改，那么客户端的 js 和 onchange 服务器端事件都应该起作用。

在我的情况下，只有服务器端被解雇。

请帮忙。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:06:58.867

好的，我得到了解决方案。

我删除`AutoPostBack="true"`并在我使用的javascript
`__doPostBack('<%= txtUKdtofAdm.Controls[0].ClientID %>', '');`
中强制回发，而回发又会触发`OnDateChanged="txtUKdtofAdm_OnDateChanged"`

# c# - 从 C# 中加载 ActiveX 控件的进程外

> ID：11344842
> 
> 赞同：4
> 
> 时间：2012-07-05T12:57:59.923
> 
> 标签：c#, dll, com, 32bit-64bit, out-of-process

我有一个 C# 应用程序，它从 32 位 COM (ActiveX) DLL 加载组件（以及相关的帮助函数）。

这一切都很好，但我的处理非常占用内存（特别是在多处理器机器上运行时），所以我希望能够在进程外加载 ActiveX DLL。我的理解（尽管我的 COM 相当生疏）这将允许我直接从 64 位应用程序通过 DCOM 访问所有功能。

但是，似乎没有任何方法可以鼓励 VS2010 允许我在进程外加载 DLL。它会自动生成必要的胶水代码，并且似乎是通过相当于带有 CLSCTX_INPROC_SERVER 的 CoCreateInstance 来加载它的。有没有办法告诉它把它作为 CLSCTX_LOCAL_SERVER 加载（我相信它会在它自己的过程中启动它）？

编写我自己的包装器 DLL/EXE 包装 32 位 DLL 然后允许我将包装器加载为进程外服务器的唯一方法是什么？这样做的痛苦可能是无法以如此简单的方式使用该功能。

当然有更简单的方法吗？

任何帮助将不胜感激！

# jquery - 完成所有验证后，调用成功 jQuery 验证插件的函数

> ID：11344844
> 
> 赞同：5
> 
> 时间：2012-07-05T12:58:04.163
> 
> 标签：jquery

```
<script id="demo1" type="text/javascript">

jQuery(document).ready(function () {
    var validator = jQuery("#login").validate({
        rules: {
            pwd: "required",
            log: {
                required: true,
                email: true,
            },
        },
        messages: {
            pwd: "Please enter password",
            log: {
                required: "Email is required",
                email: "Please enter a valid Email Address",
            }
        },
        errorPlacement: function (error, element) {
            if (element.is(":radio"))
                error.appendTo(element.parent().next().next());
            else if (element.is(":checkbox"))
                error.appendTo(element.parent().next("span#error"));
            else
                error.appendTo(element.parent().next("div#error"));
            //error.appendTo ('div#error').show().fadeOut(4500);
        },
        success: function (label) {
            // set &nbsp; as text for IE
            label.html("&nbsp;").addClass("checked");
        }
    });
});
</script> 
```

我有这个脚本来验证表单，这个脚本对我的表单运行良好，我想在验证所有字段时运行一个函数，这意味着输入是正确的，如果我在成功内调用函数，那么它每次在单个输入时运行已验证，但我想在所有输入正确后调用它，请帮助，我正在尝试与过去一小时不同的方法，但没有结果..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-08T14:45:42.317

下面的代码对我有用

```
jQuery(document).ready(function() {

var validator = jQuery("#login").validate({

    rules: {

            pwd: "required",

        log: {

            required: true,

            email:true,

        },

    },

    messages: {

        pwd: "Please enter password",

        log: {

            required: "Email is required",

            email:"Please enter a valid Email Address",

        }

    },

    submitHandler: function(form) {
        // call your function
        $("#login")[0].submit(); 
    }

});

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:36:33.043

我曾经遇到过类似的问题。也许我的方法也可以帮助你。

每个输入在验证时都添加了一个`valid`或`invalid`类。

然后我只是循环输入并检查它们是否都有效：

```
function allValid(inputs) {
  for(var x = 0; x < inputs.length; x++) {
    if(!$(inputs[x]).hasClass('valid')) {      
      return false;
    }
  }
  return true;
};

var myInputs = $('#MyForm input');

if(allValid(myInputs)) {
  // All inputs are valid!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:07:44.983

做一个计数器：

> var 成功验证 = 0;

在你的成功函数中添加它：

> 成功：函数（标签）{成功验证++；}

验证后，检查验证的所有元素的数量：

```
if(validatedElementsCount === successfulValidations) {
    doSomething();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:08:23.073

您可以使用 validator.form() 方法来验证表单

```
var validator=$("#find_your_form").validate({onsubmit: false});
......................................
if(validator.form()){
  //Validate passed
  ohYeh();
} else {
  //Validate 
  ohCrap();
} 
```

# objective-c - 在 NSViewController 的子类中管理 FirstResponder

> ID：11344846
> 
> 赞同：0
> 
> 时间：2012-07-05T12:58:06.190
> 
> 标签：objective-c, macos, first-responder

我有一个`TextViewController`它是一个子类，`NSViewController`它控制一个包含一个视图`NSTextView`

我使用以下代码将 的实例附加`TextViewController`到现有视图

```
TextViewController *textViewer; 
```

...

```
[[self view] addSubview:[textViewer view]]; // embed new TextView in our host view
[[textViewer view] setFrame:[[self view] bounds]];  // resize the controller's view to the host size
textViewer.delegate = self;
[split.window makeFirstResponder:textViewer]; 
```

这工作得很好，并且`TextViewController`诱捕`keyDown`事件以执行各种操作。

我想让用户选择`NSTextView`要复制到剪贴板的文本。不幸的是，单击`NSTextView`会使它`FirstResponder`停止`TextViewController`响应按键。

我可以强制 FirstResponder 回到我的 TextViewController，但这似乎是一个杂项。

```
- (void)textViewDidChangeSelection:(NSNotification *)aNotification {
    [self.view.window makeFirstResponder:self];
} 
```

我知道我可以子类`NSTextView`化来捕获 keyDown 事件，但这似乎并没有好多少。

我确信必须有一种更优雅的方式来做到这一点。

我添加了一个 NSTextView 的子类，它只是将 keyDown 传递给控制器

```
@protocol MyTextViewDelegate
- (BOOL)keyPressedInTextView:(NSEvent *)theEvent;
@end

@interface MyTextView : NSTextView
@property (assign) IBOutlet NSObject <MyTextViewDelegate> *delegate;
@end 
```

...

```
@implementation MyTextView
@synthesize delegate;
- (void)keyDown:(NSEvent *)theEvent {
    if([self.delegate respondsToSelector:@selector(keyPressedInTextView:)]) {
        if([self.delegate keyPressedInTextView:theEvent])
            return;
        }
    [super keyDown:theEvent];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:33:48.023

子类`NSTextView`化听起来像是您描述的问题的最佳解决方案。您希望文本视图的行为与正常的选择、复制、Cmd-A 等一样，除了它还响应您定义的特殊按键。这是子类的标准用法。试图让视图控制器通过与第一响应者一起玩游戏来处理事情会给你带来各种边缘情况的问题，就像你发现的那样。

# python - 如何对全文搜索查询的结果进行排序

> ID：11344848
> 
> 赞同：0
> 
> 时间：2012-07-05T12:58:23.473
> 
> 标签：python, google-app-engine, full-text-search

我正在测试 Google App Angine 的全文搜索 python api。api搜索引擎工作正常，但我无法按照以下描述的基本步骤获得有序结果：[https ://developers.google.com/appengine/docs/python/search/sortexpressionclass](https://developers.google.com/appengine/docs/python/search/sortexpressionclass)

搜索功能真的很简单，但是 sort_options 看起来并没有什么区别

```
 def FindDocuments(self, query_string, limit):
    try:
        sort_options=search.SortOptions(expressions=[search.SortExpression(expression='comment', default_value='',direction=search.SortExpression.ASCENDING)])           
        query_options = search.QueryOptions(limit=limit,sort_options=sort_options)
        query_obj = search.Query(query_string=query_string, options=query_options)
        return search.Index(name=_INDEX_NAME).search(query=query_obj)
    except search.Error:
        logging.exception('Search failed')
    return None 
```

搜索单词“item”，结果集总是未排序的：

```
item 4
item 3 
item 1 
item 2 
```

所有文档项目都正确返回，但从未排序。

仅当我对函数进行编码以对结果对象进行排序时，它才有效：

```
results = sorted(results, key=lambda k: k.order_id) 
```

但是一旦排序已经是查询对象的参数，它看起来就不是正确的方法。

我会感谢你们提供任何线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:56:28.443

您是否在本地开发服务器上尝试此操作？根据[这张票](http://code.google.com/p/googleappengine/issues/detail?id=7456&q=index%20direction&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log)，方向功能在本地不起作用，但在部署时应该按预期工作。

# javascript - 如何更改谷歌地图上 KML 图层的信息框样式？

> ID：11344851
> 
> 赞同：0
> 
> 时间：2012-07-05T12:58:28.547
> 
> 标签：javascript, google-maps-api-3, kml

我想使用谷歌地图中的 KML 图层引入一些数据，看起来谷歌不费吹灰之力地点击每个数据点并为我显示“标题、描述等”，因为尽管有没有选项可以像正常一样定义信息框的样式。

有谁知道如何定义作为引入 KML 层一部分的信息框的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:03:51.320

试试这个，这可能对你有帮助。

[https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-georss](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-georss)

[https://developers.google.com/maps/documentation/javascript/layers#KMLLayers](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)

[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)

[http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/docs/reference.html)

# algorithm - 多语言搜索匹配

> ID：11344854
> 
> 赞同：3
> 
> 时间：2012-07-05T12:58:47.607
> 
> 标签：algorithm, machine-learning, artificial-intelligence, search-engine, multilingual

假设我们的**名字**是用任何**非拉丁字母写**的——语言等`Arabic, Hebrew, Chinese, Japanese`。

同名的和怎么可能`search engine`匹配。反之亦然？`original name``English spelling`

类似于`拓海`日语中的名称和`English`拼写`Takumi`。

这样做有什么`algorithm/technique`用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:23:40.217

再会。

您必须执行以下操作：

用相同的符号对世界上的每个语言进行分类：

`all langs:`

*   英语 [26 个字母] **a** bcd **e** fg ...
*   俄语 [33 个字母] **a б в г д е** ....
*   中文 [x 字母] ....
*   乌克兰语 [x 字母] **a б в г д ..... i**
*   日语 [x 字母] ...
*   .....................

最后，您将在任何语言中的任何符号拼写之间都有规则。一些语言，例如印地语、中文等没有任何规则。您应该创建自己的规则（基于此语言的转录）。

`algo:`

[w][e][п] = wep

呃

e - eng r - rus 转录[п] = p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:14:11.123

搜索引擎（如谷歌）可能有大量的数据集（语料库），每个语料库都有不同的语言。

当你想把一个语言的词翻译成另一种语言时，可以通过在第一种语言的语料库中搜索该词，并在第二种语言的语料库中返回兼容的词来完成。（名称的相同技术）

这是基本的想法。

您最好在此处阅读有关 NLP 领域的一些背景知识： [http ://en.wikipedia.org/wiki/Natural_language_processing](http://en.wikipedia.org/wiki/Natural_language_processing)

# winforms - 单击外部时如何从 Infragistics 超网格单元中移除焦点？

> ID：11344857
> 
> 赞同：3
> 
> 时间：2012-07-05T12:58:53.570
> 
> 标签：winforms, infragistics, ultrawingrid

我有一个 Windows 形式的基础设施超网格控件。外面有一个“添加新”按钮，可以将新行插入到网格中。

我面临的问题是，当我单击网格外的按钮时，当我在网格内编辑一个单元格时，该单元格不会失去焦点。因此，已编辑的新值不会更新为其基础数据源。

我需要这个单元格失去焦点并更新它的基础数据源，因为“添加新”按钮会创建一个新行，该特定列的默认值是根据前一行的编辑值计算得出的。

那么关于如何使超网格单元失焦的任何想法？这种情况也可能适用于普通的 GridView。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T20:57:01.403

如果您的按钮位于工具栏上，那么您看到的行为是预期的，因为工具栏没有获得焦点。如果在执行逻辑之前是这种情况，您可以使用网格的[PerformAction](http://help.infragistics.com/NetAdvantage/WinForms/Current/CLR2.0/?page=Infragistics2.Win.UltraWinGrid.v12.1~Infragistics.Win.UltraWinGrid.UltraGrid~PerformAction%28UltraGridAction%29.html)方法并传入 UltraGridAction.CommitRow 以强制正在编辑的行提交其更新。

例如：

```
this.ultraGrid1.PerformAction(UltraGridAction.CommitRow); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:14:32.333

我用`myUltraGrid.ActiveRow.Cells[0].Activate();`了也可以。但我猜@alhalama 的解决方案更好。

# jquery - 在 IE 中清除 FILE 输入可防止后续更改事件

> ID：11344861
> 
> 赞同：2
> 
> 时间：2012-07-05T12:59:15.337
> 
> 标签：jquery, internet-explorer

我正在遵循[这个建议](https://stackoverflow.com/questions/1043957/clearing-input-type-file-using-jquery/1043969#1043969)来清除 IE 中的 FILE 输入（特别是使用克隆方法，也描述[了这里](http://forum.jquery.com/topic/how-to-clear-a-file-input-in-ie)，尽管我也尝试过用文字 HTML 替换）。我的目标是在自定义样式的上传控件中有一个“删除文件”按钮，该按钮将清除输入并以准备接收另一个文件的方式“重置”它。

问题是（仅在 IE 中，测试到 IE9），虽然我可以使用这种方法清除 FILE 输入，但我不能在替换的 FILE 输入上使用更改事件。我怀疑这是因为克隆具有与原始 ID 相同的 ID，并且两者都存在于 DOM 中，但这只是一个理论......这可以解决吗？

希望能说明/澄清问题：这个[FIDDLE](http://jsfiddle.net/9LWPA/3/)：

在所有非 IE 浏览器中，

1.  单击“添加文件”并选择一个文件
2.  值被填写到文件字段（通常从视图中隐藏）
3.  “未选择”更改为“已选择文件”
4.  单击同一行上的“删除文件” - 一切都已重置并准备好再次开始。
5.  单击“添加文件”，该过程正常重复

在 IE 中，

1.  1-4 同上
2.  再次点击“添加文件”，可以选择新文件，但后续动作（3-4）不再出现

是否有适用于“所有”浏览器的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:29:40.777

你现在可以使用它并让它变得更好，这只是一个概念证明

[http://jsfiddle.net/9LWPA/4/](http://jsfiddle.net/9LWPA/4/)

我基本上删除了整个部分，然后再次添加它，但是单击处理程序不起作用，因为它是在定义处理程序之后添加的，所以我所做的只是复制整个单击处理程序部分并将其放入干净的文件函数中。我相信你可以做得更好一点。

实际上使用这个[http://jsfiddle.net/9LWPA/5/](http://jsfiddle.net/9LWPA/5/)我让它更干净一点。它确实看起来效率不高，但至少它可以工作，在 IE 9 Mac VM 上测试

更新 - 仅将新的点击处理程序移至 IE [http://jsfiddle.net/9LWPA/6/](http://jsfiddle.net/9LWPA/6/)

# c# - 从 Jabber 服务器获取答案

> ID：11344866
> 
> 赞同：0
> 
> 时间：2012-07-05T12:59:53.897
> 
> 标签：c#, windows-phone-7, xmpp

我想连接我的 jabber 服务器并阅读服务器答案：

```
 DnsEndPoint host = new DnsEndPoint("talk.google.com", 5222);
        Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        SocketAsyncEventArgs args = new SocketAsyncEventArgs();

public void start()
{
 string message = "<?xml version=1.0?><stream:streamto='gmail.com'xmlns='jabber:client'xmlns:stream='http://etherx.jabber.org/streams'version='1.0'>";

            var buffer = Encoding.UTF8.GetBytes(message);

            args.RemoteEndPoint = host;
            args.Completed += SocketAsyncEventArgs_Completed;
            args.SetBuffer(buffer, 0, buffer.Length);

            bool completesAsynchronously = socket.ConnectAsync(args);

            if (!completesAsynchronously)
            {
                SocketAsyncEventArgs_Completed(args.ConnectSocket, args);
            }
}

 private void SocketAsyncEventArgs_Completed(object sender, SocketAsyncEventArgs e)
        {
            if (e.SocketError != SocketError.Success)
            {
                 Deployment.Current.Dispatcher.BeginInvoke(() => MessageBox.Show("Error during socket operation: " + e.SocketError));
                return;
            }
            byte[] buffer = e.Buffer;
            XDocument temp = ConvertByteArrayToXml(buffer);

        }

XDocument ConvertByteArrayToXml(byte[] data)
        {
            XmlReaderSettings settings = new XmlReaderSettings();

            using (MemoryStream stream = new MemoryStream(data))
            using (XmlReader reader = XmlReader.Create(stream, settings))
            {
                return XDocument.Load(reader);
            }
        } 
```

在 Return`XDocument.Load(reader)`我得到 exeption `'1.0' is an unexpected token. The expected token is '"' or '''`。怎么解决？

为什么我想要它？因为当我授权自己并更改状态时，它不会影响我的帐户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:07:06.537

**请**不要从头开始编写自己的 XMPP 库，而是选择[现有的一个](http://xmpp.org/xmpp-software/libraries/)。

您不会成功地将收到的 XML 视为文件，而这正是您的`Unexpected end of file has occurred`错误的来源。您**必须**逐步解析 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:01:32.507

这（在您的声明中`message`）：

```
<?xml version=1.0?> 
```

是无效的 XML 声明。根据例外情况，您需要：

```
<?xml version="1.0" ?> 
```

请注意，这与 Jabber 或套接字无关，而与 XML 有关。注意异常消息和堆栈跟踪很重要，因此您可以自己诊断这类事情：您需要能够隔离问题所在的*区域*，以便您可以单独解决这一点。

（顺便说一下，XML 的其余部分看起来也很糟糕。）

# .net - 灵活序列化的任何想法

> ID：11344867
> 
> 赞同：0
> 
> 时间：2012-07-05T12:59:55.813
> 
> 标签：.net, serialization, datacontract, serializable

我有一些序列化输出的对象。对象的某些属性计算起来很繁重，需要一些时间来计算。我正在考虑的是如何指定用户想要获取的属性集并仅序列化该集而不是全部序列化。

我已经做了一些研究，很清楚如何只序列化标有 [Serializable] 属性的对象的所需属性，但在我的情况下，标有 [DataContract] 的对象我仍然有一些问题。

现在的另一个问题是指定应该序列化的属性集。理想情况下，最好有类似 XQuery 的东西来指定究竟应该序列化什么。

所以，现在问题多于答案......任何想法/想法//建议都非常受欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:50:32.030

下面的示例创建一个简单的建筑物，它有 3 层，每层有 4 个房间。这不是一个过于复杂的对象图，但我认为它应该能够理解这个想法。这个想法是您可以实现[System.Runtime.Serialization.ISerializable](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx)来控制序列化过程。

在这个例子中，我只为 Floors 类型实现了[System.Runtime.Serialization.ISerializable](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx)。在楼层类型中，我控制房间列表的序列化和反序列化方式。

在不了解您的类型的具体细节的情况下，特别是计算繁重的属性，我无法具体与他们交谈；但是，我认为通过使用实现[System.Runtime.Serialization.ISerializable](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx)提供的技术并控制序列化过程，您将能够实现您正在寻找的结果。

请记住，您可以将任何内容添加到序列化流中，并且不需要在类中添加所有内容；但是，您至少希望在反序列化构造函数运行后使您的类“正确”。您放入序列化流中的内容取决于您。

但是请注意，这仅适用于**Binary Serialization**，不适用于**Xml Serialization**。

```
 Module Module1

    Sub Main()
        Dim floor1 As New Floor()
        floor1.Rooms.Add(New Rooms(101))
        floor1.Rooms.Add(New Rooms(102))
        floor1.Rooms.Add(New Rooms(103))
        floor1.Rooms.Add(New Rooms(104))

        Dim floor2 As New Floor()
        floor2.Rooms.Add(New Rooms(201))
        floor2.Rooms.Add(New Rooms(202))
        floor2.Rooms.Add(New Rooms(203))
        floor2.Rooms.Add(New Rooms(204))

        Dim floor3 As New Floor()
        floor3.Rooms.Add(New Rooms(301))
        floor3.Rooms.Add(New Rooms(302))
        floor3.Rooms.Add(New Rooms(303))
        floor3.Rooms.Add(New Rooms(304))

        Dim tower As New Building()
        tower.Floors.Add(floor1)
        tower.Floors.Add(floor2)
        tower.Floors.Add(floor3)

        Dim byteArray As Byte() = Serialized(tower)
        Dim backAgain As Building = DeSerialized(byteArray)
    End Sub

    Private Function Serialized(ByVal tower As Building) As Byte()
        Using ms As New System.IO.MemoryStream()
            Dim formatter As New Runtime.Serialization.Formatters.Binary.BinaryFormatter()
            formatter.Serialize(ms, tower)
            Return ms.GetBuffer()
        End Using
    End Function

    Private Function DeSerialized(ByVal byteArray As Byte()) As Building
        Using ms As New System.IO.MemoryStream(byteArray)
            Dim formatter As New Runtime.Serialization.Formatters.Binary.BinaryFormatter()
            ms.Position = 0
            Return DirectCast(formatter.Deserialize(ms), Building)
        End Using
    End Function
End Module

<Serializable()>
Public Class Building
    Public Sub New()
    End Sub

    Private _Floors As New List(Of Floor)
    Public ReadOnly Property Floors As List(Of Floor)
        Get
            Return _Floors
        End Get
    End Property
End Class

<Serializable()>
Public Class Floor
    Implements System.Runtime.Serialization.ISerializable

    Public Sub New()
    End Sub

    Public Sub New(ByVal info As Runtime.Serialization.SerializationInfo, ByVal context As Runtime.Serialization.StreamingContext)
        Dim counter As Integer = info.GetInt32("RoomCount")
        For index As Integer = 0 To counter - 1
            _Rooms.Add(DirectCast(info.GetValue(String.Format("Room{0}", index.ToString()), GetType(Rooms)), Rooms))
        Next
    End Sub

    Private _Rooms As New List(Of Rooms)
    Public ReadOnly Property Rooms As List(Of Rooms)
        Get
            Return _Rooms
        End Get
    End Property

    Public Sub GetObjectData(info As System.Runtime.Serialization.SerializationInfo, context As System.Runtime.Serialization.StreamingContext) Implements System.Runtime.Serialization.ISerializable.GetObjectData
        info.AddValue("RoomCount", _Rooms.Count)
        For index As Integer = 0 To _Rooms.Count - 1
            info.AddValue(String.Format("Room{0}", index.ToString()), _Rooms(index))
        Next
    End Sub
End Class

<Serializable()>
Public Class Rooms
    Public Sub New()
    End Sub

    Public Sub New(ByVal roomNum As Integer)
        Me.New()
        _RoomNumber = roomNum
    End Sub

    Private _RoomNumber As Integer = 0
    Public Readonly Property RoomNumber As Integer
        Get
            Return _RoomNumber
        End Get
    End Property
End Class 
```

# arrays - GPars 处理庞大的列表，对其部分进行修复大小并行化

> ID：11344869
> 
> 赞同：0
> 
> 时间：2012-07-05T13:00:05.503
> 
> 标签：arrays, parallel-processing, gpars

我正在寻找 GPars 功能，它允许在并行子任务集中的顺序执行部分中分离大任务。

即迭代**K**的数组大小，执行并行任务块的顺序分配，每个块的大小为 **threadCount**。

换句话说，不要在第一次迭代数组并一次提交所有任务，而是在前一个块准备好时使用即分页顺序进行分配（防止OOM）。

类似于下面的代码，但首先不是列出页面并提交任务，而是必须按顺序处理页面。

`myHugeList.getNextPage().each { withPool(threadCount) { Closure.callAsync().get() } }`

谢谢，叶菲姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:39:25.960

您可能正在寻找以下方面的内容：

withPool(numOfThreads) { for(entriesInPage in myHugeList.splitIntoPages) { resultPages << entriesInPage.collectParallel(myClosure) } } 缺点是每次迭代都等待前一个迭代完成，可能会使一些线程未得到充分利用。

一种选择可能是一组参与者从调度程序中提取任务，该调度程序管理 myHugeList。

# macos - 来自root的mac os java版本不同

> ID：11344871
> 
> 赞同：6
> 
> 时间：2012-07-05T13:00:11.413
> 
> 标签：macos, java, java-7

在为 mac os 安装 jdk7u5 后，我为“普通”用户和 root 获得了不同的 java 版本。

`java -version`给我7。

`sudo java -version`给我6。

我查了一下， `/System/Library/Frameworks/JavaVM.framework/Versions/`发现有一些链接。在我解决了指向真实目录的链接后，我用整个路径再次尝试了它。

`/System/Library/Frameworks/JavaVM.framework/Versions/A/Commands/java -version` -> 7

`sudo /System/Library/Frameworks/JavaVM.framework/Versions/A/Commands/java -version`-> 6

与javac相同！

希望你们能帮助我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:34:20.870

在 OSX /usr/bin/java 下，通过查看您选择的使用来定位要使用的 java 版本`/Applications/Utilities/Java Preferences.app`。使用的文件也由 Oracle 更新程序更新。

由于您必须手动拖动版本来设置 Java 1.7，因此您只需为运行它的用户（即不是 root）设置此项。要将其设置为 root，我运行应用程序`sudo /Applications/Utilities/Java\ Preferences.app/Contents/MacOS/Java\ Preferences`并将 1.7 移至顶部。

据我所知，应用程序更新的文件与`~/Library/Preferences/ByHost/com.apple.java.JavaPreferences.<hex number>.plist`机器`<hex number>`相关。Root 的主目录是 /var/root 所以我现在有了`/var/root/Library/Preferences/ByHost/com.apple.java.JavaPreferences.<hex number>.plist`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:02:05.870

在 Mac OS X 10.7.5 + JRE 1.6.0_43 + JDK 1.7.0_17 上遇到了同样的问题。

*   java-版本=> 1.7
*   sudo java -version => 1.6

使用 sudo 打开 java 控制面板，这样可以解决问题：

*   sudo /usr/bin/javaws -viewer

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T13:09:53.953

您指定的链接使用的 java 版本似乎取决于`JAVA_VERSION`环境变量。难道这个变量是为您的用户设置的，但会被清除`sudo`？在这种情况下，为用户显式取消设置或为 root 设置它应该有助于使它们保持同步。当然，您也可以将 替换为`/A/`您要执行的实际版本。

# java - 使用 GSON 序列化嵌入对（键/值）而不是对象

> ID：11344872
> 
> 赞同：1
> 
> 时间：2012-07-05T13:00:11.457
> 
> 标签：java, json, gson

我想在 GSON 中创建一个自定义序列化程序，在对象中插入键/值对，而不是新对象。例如，假设这样：

```
class Car {
    @Expose
    String model;
    @Expose
    Manufacturer manufacturer;
}

class Manufacturer {
    @Expose
    String name;
    @Expose
    String from;
} 
```

我想得到这样的JSON：

```
"car":{
    "model":"beatle",
    "manufacturer":"volkswagen",
    "country":"Germany"
} 
```

但无论我如何编写序列化程序，它都坚持在“汽车”内部创建一个制造商对象

```
"manufacturer":{
    "name":"volkswagen",
    "country":"Germany"
} 
```

我该如何解决这个问题，只获取键/值对？

PS：我无法对类进行重大更改，因为它们正在映射数据库。这只是模拟我的问题的一个例子。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:07:16.693

使用自定义序列化程序应该会有所帮助。

```
private class ManufacturerSerializer implements JsonSerializer<Manufacturer> {
  public JsonElement serialize(Manufacturer src, Type typeOfSrc, JsonSerializationContext context) {
    return new JsonPrimitive(src.getName()); // or src.name public.
  }
} 
```

请参阅：[https ://sites.google.com/site/gson/gson-user-guide/#TOC-Custom-Serialization-and-Deserialization](https://sites.google.com/site/gson/gson-user-guide/#TOC-Custom-Serialization-and-Deserialization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:07:27.863

您应该为该类定义自己的[序列化](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)器和[反](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)`Car`序列化器，这将避免以简单的方式序列化复合类，但会呈现您需要的内容。

这一点都不难，例如你会定义

```
class CarSerializer implements JsonSerializer<Car> {
  JsonElement serialize(Car src, Type typeOfSrc, JsonSerializationContext context) {
    JsonObject o = new JsonObject();
    o.addProperty("manufacturer", src.manufacturer.name);
    ...
  }
} 
```

请记住，您需要按照文档中的说明注册序列化程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:37:36.623

我无法使用 JsonSerializer 制作我想要的东西。从 2.1（TypeAdapter 类）开始，我只能使用 GSON 的新 API 使其正常工作。

```
public class ManufacturerSerializer extends TypeAdapter<Manufacturer> {
    @Override
    public void write(JsonWriter out, Manufacturer m) throws IOException {
        out.value(m.getName());
        out.name("country");
        out.value(m.getFrom());
    }

    /* I only need Serialization, dont use this */
    @Override
    public Manufacturer read(JsonReader in) throws IOException {
        return null;
    }
} 
```

# java - 如何渲染地图 模板并在那里使用

> ID：11344874
> 
> 赞同：2
> 
> 时间：2012-07-05T13:00:24.737
> 
> 标签：java, map, playframework-2.0

我正在尝试将键值映射呈现到模板，然后以这种方式显示：

```
@(twittsIfollow: Map[String, String])
 .....
 @if(twittsIfollow != null) {
  @for((key, value) <- twittsIfollow) {
    @key
    @value
   } 
 } 
```

它说，这是错误的。映射键值是否有 scala 标签？

这是我的方法：

```
public static Map<String, String> alltwitts(List<Long> otherIDs) {
    Map<String, String> results=new HashMap<String, String>();
    for (Long id: otherIDs) {
        Query selected_twitt = JPA.em().createQuery("select u.twitt from Twitt u where " + " u.whose = ?").setParameter(1, id);
        String twOwner = User.getOneUser(id);
        String twitt  = (String) selected_twitt.getSingleResult();
        results.put(twOwner, twitt);
    }

    return results;
} 
```

然后我在这个地方渲染到模板：

```
Map<String, String> twittsIfollow = Twitt.alltwitts(IDusersIamFollowing);
return ok(microblog.render(twittsIfollow)); 
```

现在它说：`[NonUniqueResultException: result returns more than one elements]`

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T15:09:35.563

简单地

```
@for((key, value) <- twittsIfollow) {
  @key
  @value
} 
```

顺便说一句，如果您使用的是 Scala，`twittsIfollow`则永远不应为空。更喜欢使用`Option`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T20:08:56.280

我是如何解决的：

```
 public static Map<String, List<String>> alltwitts(List<Long> otherIDs) { 
    Map<String, List<String>> results=new HashMap<String, List<String>>();
    for (Long id: otherIDs) {                       
        Query selected_twitt = JPA.em().createQuery("select twitt from Twitt where " + " whose = ? order by id").setParameter(1, id);
        String twOwner = User.getOneUser(id);
        List<String> twitt  = selected_twitt.getResultList();
        results.put(twOwner, twitt);

    }
    System.out.println(results);
    return results;
} 
```

然后在我的应用程序中：

```
Map<String, List<String>> twittsIfollow = Twitt.alltwitts(IDusersIamFollowing);
return ok(microblog.render(twittsIfollow)); 
```

然后在我的模板中：

```
@(twittsIfollow: Map[String, List[String]]) 
```

和

```
@if(twittsIfollow != null) {
  @for((key, value) <- twittsIfollow) {
  @for(innervalue <- value){
            Username: @key
            Twitt: @innervalue
        } 
      } 
 } 
```

只适合那些像我一样愚蠢的人：D并寻找这样的解决方案..

谢谢你的帮助，伙计们..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:17:34.063

@doniyor，我很惊讶，因为不久前我向您展示了[其他问题](https://stackoverflow.com/a/11273097/1066240)的方式。

顺便说一句，我认为构建、传递和迭代`twittsIfollow`a `List`of `Map`s会更好

那么你可以使用

```
@if(twittsIfollow != null) {
  @for(twitts <- twittsIfollow) {
   the value is:  @twitts.get("key")
  } 
} 
```

# javascript - 如何使用 html5 中的键盘箭头键在画布上移动图像

> ID：11344875
> 
> 赞同：3
> 
> 时间：2012-07-05T13:00:24.987
> 
> 标签：javascript, html, html5-canvas

我正在使用此代码在画布上绘制图像并且它成功在画布上绘制图像现在我想在画布上移动图像为此我编写代码我检查是否按下键盘的右键我将增加 x如果按下左键，图像的坐标我将减少 x 坐标，但图像不会在画布上移动

```
player = new Image();
player.src = "game_character.png";
context.drawImage(player,player.x * wallDim + wallDim ,player.y * wallDim + wallDim ,50,50); 
```

如何在画布上移动图像

```
 var handleInput = function(event, keyState) {
        switch(event.which) {
              case 37: { // Left Arrow
                    keyDown.arrowLeft = keyState;
                    break;
              }
              case 38: { // Up Arrow
                    keyDown.arrowUp = keyState;
                    break;
              }
              case 39: { // Right Arrow
                    keyDown.arrowRight = keyState;
                    break;
              }
              case 40: { // Down Arrow
                    keyDown.arrowDown = keyState;
                    break;
              }
        }
  }

  /**
  * physics
  *
  * This function contains the basic logic for the maze.
  */
  var physics = function() {
       console.log("physics ");
       console.log("first condition "+keyDown.arrowRight +player.x+1);
        if(keyDown.arrowLeft && player.x-1 >= 0 && map[player.y][player.x-1] != 1) {
              player.x--;
              redraw = true;
        }

        if(keyDown.arrowUp && player.y-1 >= 0 && map[player.y-1][player.x] != 1) {
              player.y--;
              redraw = true;
        }

        if(keyDown.arrowRight && player.x+1 < map[0].length && map[player.y][player.x+1] != 1) {
              console.log("arrow right");
              player.x++;
              redraw = true;
        }

        if(keyDown.arrowDown && player.y+1 < map.length && map[player.y+1][player.x] != 1) {
              player.y++;
              redraw = true;
        }
        if(keyDown.arrowRight && player.x+1 >= map[0].length)
        {
            player.x++;
            document.getElementById("canvas_div").style.display="none";
            document.getElementById("end_screen_div").style.display="block";
            //alert("completed");
        }
  }

  /**
  * draw
  *
  * This function simply draws the current state of the game.
  */
  var draw = function() {

        // Don't redraw if nothing has changed
        if(!redraw)
              return;

        context.clearRect(0, 0, cols, rows);
        context.beginPath();

        // Draw the maze
        for(var a = 0; a < rows; a++) {
              for(var b = 0; b < cols; b++) {
                    switch(map[a][b]) {
                          case C.EMPTY: context.fillStyle = colors.empty; break;
                          case C.WALL: context.fillStyle = colors.wall; break;
                    }

                        context.fillRect(b * wallDim, a * wallDim, wallDim, wallDim); // x, y, width, height
              }
        }

        // Draw the player
     /* context.fillStyle = colors.player;
        context.arc(
              player.x * wallDim + wallDim / 2, // x position
              player.y * wallDim + wallDim / 2, // y position
              wallDim / 2, // Radius
              0, // Starting angle
              Math.PI * 2, // Ending angle
              true // antiClockwise
        );*/

    player = new Image();
    player.src = "game_character.png";

    context.drawImage(player,player.x * wallDim + wallDim ,player.y * wallDim + wallDim ,50,50);

    var firstplayer=new Image();
    firstplayer.src="top_character01.png";

    context.drawImage(firstplayer,680,0,60,60);

    var secondplayer= new Image();
    secondplayer.src="top_character02.png";

    context.drawImage(secondplayer,750,0,60,60);

    context.fill();
    context.closePath();

        redraw = false;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:08:10.660

在您的 draw 方法中，您每次都重新初始化播放器：

```
player = new Image();
player.src = "game_character.png"; 
```

因此，您删除了由事件处理程序修改的 player.x。

您应该只在绘图函数之外初始化播放器一次。您可以像这样移动初始化：

```
var player = new Image();
player.src = "game_character.png";
var draw = function() { 
```

绝对不需要`player.src = "game_character.png";`在绘图函数内部调用。

作为一般规则，在处理动画时，尽量从绘图函数中删除所有可以删除的内容，这应该尽可能快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:16:40.360

每次都需要重新绘制画布。像这样的东西：

```
function init()
{
    canvas = document.getElementById("canvas");
    context = canvas.getContext("2d");

    x = canvas.width / 2; //align to centre of the screen
    y = canvas.height / 2; //same as above

    speed = 5; //speed for the player to move at

    width = 50; //width of the player
    height = 50; //height of the player

    playerimage = new Image();
    playerimage.src = "path/to/image/for/player"; //path to the image to use for the player

    canvas.addEventListener("keypress", update);
}

function update(event)
{
    if (event.keyCode == 38)
    {
        y -= speed; //going up
    }
    if (event.keyCode == 40)
    {
        y += speed; //going down
    }
    if (event.keyCode == 37)
    {
        x -= speed; //going left
    }
    if (event.keyCode == 39)
    {
        x += speed; //going right
    }
    render();
}

function render()
{
    context.clearRect(0, 0, canvas.width, canvas.height);
    context.drawImage(playerimage, x, y, width, height);
} 
```

我还没有测试过，所以我不知道它是否有效，并且可能会出现一些错误。它应该工作！如果不出意外，它将（希望）让您了解一种可以进行此操作的方法...

# python - Python - 动态导入后未定义的类名

> ID：11344876
> 
> 赞同：1
> 
> 时间：2012-07-05T13:00:32.367
> 
> 标签：python, class, dynamic, import

我现在使用 Python 已经一个星期了，我遇到了动态导入的问题。我有一个文件 Test.py ，其中定义了一个类。我想在从另一个文件动态导入 Test.py 之后使用这个类。

我的最终目标更复杂，但我简化了它，但我仍然遇到同样的问题。

文件：Test.py

```
class Test :
    def __init__ ( self ) :
        print ( "instance" ) 
```

文件：Main.py

```
def allImports ( ) :
    __import__ ( "Test" ) 
```

我得到什么：

```
>>> import Main
>>> Main.allImports()
>>> myInstance = Test ()
Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
NameError: name 'Test' is not defined 
```

我无法在 fromlist 中指定我必须导入 Test.py 中的哪个元素，因为我不应该知道它们。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:15:24.270

对于更接近您意图的解决方案：

```
import importlib
def allImports(globals):
    mod = importlib.import_module('Test', globals['__name__'])

    try:
        keys = mod.__all__
    except AttributeError:
        keys = dir(mod)

    for key in keys:
        if not key.startswith('_'):
            globals[key] = getattr(mod, key)

# …

allImports(globals())
Test # should work, you can also look into dir(Test) to find the class. 
```

如果您的模块没有[`__all__`](http://docs.python.org/tutorial/modules.html?highlight=__all__#importing-from-a-package)上面的代码 /will/ 会破坏您的命名空间，这会很激烈。要么确保你定义`__all__`，要么修改`allImports()`为只导入你想要的东西。（例如，仅类，或仅在模块中定义的类。这部分实际上取决于您的用例。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:52:15.600

`__import__`不会神奇地修改全局或本地命名空间。

模块和类是 Python 中的一等公民，即，您可以将它们用作 Python 中的任何其他对象（绑定到名称，作为参数传递给函数，作为函数的值返回）。

```
def allImports():
    return __import__("Test")

Test_module = allImports()
Test = Test_module.Test # class
test_instance = Test() 
```

如果上面的代码在函数内部，则`Test`放入全局命名空间：`globals()['Test'] = Test`. 请注意，您很可能不需要它，并且有更好的方法可以在不修改函数内部的全局命名空间的情况下做任何您想做的事情。

`__import__()`不鼓励使用of[`importlib.import_module()`](http://docs.python.org/library/importlib.html#importlib.import_module)代替。

如果模块的名称和类是已知的，您可以在模块级别编写：

```
from Test import Test 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:09:37.503

使用`__import__()`加载模块时，您必须在以下位置查找它`sys.modules`：

```
>>> import sys
>>> import Main
>>> Main.allImports()
>>> myInstance = sys.modules['Test'].Test()
instance
>>> 
```

更多信息请参见[文档](http://docs.python.org/library/functions.html#__import__)和[此处](https://stackoverflow.com/questions/547829/how-to-dynamically-load-a-python-class)、[此处](https://stackoverflow.com/questions/301134/dynamic-module-import-in-python)和[此处](https://stackoverflow.com/questions/4787291/dynamic-importing-of-modules-followed-by-instantiation-of-objects-with-a-certain)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T13:03:35.930

此代码创建`__import__ ( "Test" )`一个局部变量，因此您无法在函数外部访问它。

```
 def allImports ( ) :
        __import__ ( "Test" ) 
```

**尝试：**

```
def allImports ( ) :
   test= __import__ ( "Test" )
   return test   #return the module

>>> import Main
>>> x=Main.allImports()  #store the returned module in x
>>> myInstance = x.Test ()
instance
>>>myInstance
<Test.Test instance at 0x011D7F80> 
```

# excel - 是否可以使用条件格式根据公式格式化多列

> ID：11344881
> 
> 赞同：0
> 
> 时间：2012-07-05T13:00:51.990
> 
> 标签：excel, conditional-formatting

我目前正在制作一个带有一堆参数的电子表格。但是，某些数据集不必包含这些参数，因此我希望能够根据出现在不同列中的“否”将灰色填充颜色应用于多个列。到目前为止，我一次只能将此格式应用于另一列，并且我必须为我希望它应用于的每个其他列复制规则。到目前为止，我通过使用公式规则 =H1:H10000="N" 让它工作，但是当我选择将此应用于 $K:$Q 时，它只会使 K 列中的相关行变灰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:09:39.267

1.  选择您的范围

2.  检查活动单元格的行（本例中为 1）：

    ![在此处输入图像描述](../Images/ac7be7cbc8f0831404955cbfe1396ece.png)

3.  在条件格式中输入以下公式（将 1 替换为活动单元格的行）：

    ```
     =$H1="N" 
    ```

那应该做你需要的。

# javascript - 将 span 元素对齐到 div 的左侧

> ID：11344882
> 
> 赞同：0
> 
> 时间：2012-07-05T13:01:03.410
> 
> 标签：javascript, jquery, css

是否可以在此小提琴中对齐跨度“标题”：http: [//jsfiddle.net/25LjE/37/](http://jsfiddle.net/25LjE/37/)到文本右侧，如图所示：

![在此处输入图像描述](../Images/70b9034f78a5c3fe056be29d36b8649b.png)

我正在使用 jquery 创建标题。

这是小提琴代码：

```
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
<noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>

.pds-pd-link {
display: none !important;
}
.pds-box {
    width: 220px !important;
}
.pds-input-label{
    width: auto! important;
}
.PDS_Poll{
    margin-bottom:15px;
}
$(document).ready(function() {

    $('.pds-question-inner').prepend('<center><span style="color:red;font-weight:bold;font-size: 10pt"><u>Header</u></span></center>');
}); 
```

当我在 IE8 中尝试提出的解决方案时，文本略高于其余文本：

![在此处输入图像描述](../Images/30a80974690faad44fe549857ee78217.png)

这可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:09:51.053

您可以通过将两个元素都包装在一个向左浮动的 div 中来做到这一点，然后您可以追加而不是预先添加标题。

```
<div class="floatLeft">Your two elements</div>

<style>
.floatLeft {
    float: left;
    display: inline-block;
}
</style> 
```

您可能还想在元素上设置宽度和填充/边距，以便它们按需要出现。如果您希望标题向右移动，则可以将其浮动到右侧而不是左侧。如果您这样做，请坚持使用前置，因为如果正确的浮动元素不是系列中的第一个，某些版本的 IE 会搞砸浮动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:08:15.797

我不清楚您要达到什么目的，但是添加此 CSS 似乎可以完成此操作：

```
center span{
    position:relative;
    top:30px;
    left:-70px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:10:39.377

我想这就是你想要的？

```
$('.pds-question-inner').prepend('<center><span style="color:red;font-weight:bold;font-size: 10pt; text-align: right; display: block;"><u>Header</u></span></center>'); 
```

[http://jsfiddle.net/84fjB/](http://jsfiddle.net/84fjB/)

如果不是这样，看起来会更好：P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:11:15.277

您可以添加`float: left`到跨度（并清理您的 HTML）。

你可以检查这个：http: [//jsfiddle.net/ooflorent/zvbzT/](http://jsfiddle.net/ooflorent/zvbzT/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T13:08:32.650

你只需要`float:left`添加

`<span style="color:red;font-weight:bold;font-size: 10pt;float:left"><u>Header</u></span>`

检查这个：

[JSFiddle](http://jsfiddle.net/25LjE/44/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T13:08:35.513

在小提琴中查看此代码我已对其进行了编辑[http://jsfiddle.net/25LjE/46/](http://jsfiddle.net/25LjE/46/)

# mysql - mysql导入转储文件ubuntu 10.10

> ID：11344885
> 
> 赞同：2
> 
> 时间：2012-07-05T13:01:04.867
> 
> 标签：mysql

我正在使用 ubuntu 在我的机器上运行 mysql 服务器，正在尝试导入转储文件，如下所示，我也收到如下所示的错误：

```
create database mm;
create user rami;
set password for rami = password("112211");
grant all privileges on prediction.* to rami identified by '112211';
use prediction;
-u rami -p mm </home/user/Downloads/SNPdbe_2012_03_05_sql; 
```

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '-u rami -p mm 附近使用正确的语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:07:25.197

在`mysql>`提示符下，使用`source`命令导入文件。

```
mysql> create database mm;
mysql> create user rami;
mysql> set password for rami = password("112211");
mysql> grant all privileges on prediction.* to rami identified by '112211';
mysql> use prediction;
mysql> source /home/user/Downloads/SNPdbe_2012_03_05_sql; 
```

否则，在 Linux 的 shell 提示符下，从命令行运行它，就像您尝试在 MySQL 中执行的操作一样：

```
$ mysql -u rami -p mm </home/user/Downloads/SNPdbe_2012_03_05_sql; 
```

这应该会提示您输入密码并将文件导入数据库`mm`。从您的命令尝试中不清楚您是将其导入数据库`mm`还是导入`prediction`. 如果应该是`prediction`，请使用：

```
$ mysql -u rami -p prediction </home/user/Downloads/SNPdbe_2012_03_05_sql; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:11:03.890

```
$ mysql -u rami -p prediction < /home/user/Downloads/SNPdbe_2012_03_05_sql; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T20:45:37.333

安装光伏（PipeViewer）

```
sudo apt-get install pv

```

pv 显示您的数据导入进度（百分比）、已用时间并预测剩余时间

```
pv /home/user/Downloads/SNPdbe_2012_03_05_sql | mysql -u rami -p 预测

```

# objective-c - NSManagedObject 基类无法识别的选择器

> ID：11344891
> 
> 赞同：2
> 
> 时间：2012-07-05T13:01:26.693
> 
> 标签：objective-c, core-data, inheritance

在实例上调用基类方法时出现“无法识别的选择器”异常并且看不到问题所在。

我有一个名为 Form 的对象，如下所示：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>
#import "HPSDbBase.h"

@interface Form : HPSDbBase

@end 
```

Form 的基类如下所示：

```
#import <CoreData/CoreData.h>

@interface HPSDbBase : NSManagedObject

@property (nonatomic, retain) NSString * id;
@property (nonatomic, retain) NSString * json;

-(id)getJSONElement:(NSString*)key;

@end 
```

然后我尝试在视图控制器方法中使用 Form 对象，如下所示：

```
HPSAppDelegate* appDelegate = [[UIApplication sharedApplication] delegate];

NSError* error = nil;
NSFetchRequest * request = [[NSFetchRequest alloc] init];

[request setEntity:[NSEntityDescription entityForName:@"Form" inManagedObjectContext:appDelegate.managedObjectContext]];

NSArray* arrayOfForms = [appDelegate.managedObjectContext executeFetchRequest:request error:&error];

for (int i=0;i<arrayOfForms.count;i++)
{

    Form* dbForm = [arrayOfForms objectAtIndex:i];

    NSLog(@"Form.json=%@",dbForm.json); // this works

    NSString* wwwww = (Form*)[dbForm getJSONElement:@"test"]; // exception here

} 
```

例外是：

```
-[NSManagedObject getJSONElement:]: unrecognized selector sent to instance 0x8290940 
```

谁能看到我做错了什么？

太感谢了！

**编辑 1**

这是 HPSDbBase 的实现：

```
#import "HPSDbBase.h"

@implementation HPSDbBase

@dynamic id;
@dynamic json;

-(id)getJSONElement:(NSString*)key
{
    NSData *jsonData = [[self json] dataUsingEncoding:NSUTF8StringEncoding];

    NSError *e = nil;

    id jsonObject = [NSJSONSerialization JSONObjectWithData:jsonData options: NSJSONReadingMutableContainers error: &e];
    NSDictionary *jsonDictionary = (NSDictionary *)jsonObject;

    id rc = [jsonDictionary objectForKey:key];

    return rc;
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T14:54:24.120

我追查了问题。

我已经重命名了我的核心数据对象。我重命名了我能看到的关于核心数据对象名称的所有内容，但这显然还不够。我删除了核心数据实体，然后用正确的名称重新创建了一个全新的实体，一切都开始工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T20:54:28.297

重命名课程后，我也收到此错误。

如果您不想删除您的类，我发现我可以通过打开我的“xcdatamodeld”文件并单击配置-> 默认来解决该错误。在那里，实体的类描述仍然引用旧名称。在这里更正之后，问题就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-28T06:59:49.293

我也收到了这个错误。结果发现，只是实体的核心数据配置中的属性名称有错别字。它在类实现的@dynamic 语句中被正确命名，因此在编译时没有引发标志，但在访问时立即出现。因为我正在设置 NSManagedObject 子实体，所以我分心于寻找显而易见的东西。只是在此处列出，以防其他人在同一条船上。

# objective-c - 制作报亭兼容应用程序的非内容部分

> ID：11344893
> 
> 赞同：1
> 
> 时间：2012-07-05T13:01:32.720
> 
> 标签：objective-c, ios, xcode, ipad, newsstand-kit

我正在为一家报亭杂志工作，并且我已经完成了内容（在 Laker Compendium 的大力帮助下），但无法完成有关应用程序商店视图和服务器下载的部分。
在报摊上确实有少量的教程和这样的帮助，我发现唯一一个在其他方面有帮助的，并没有很好地解释这部分。

简单地说，我要问的是如果我创建了内容（作为单个应用程序），我如何让它与商店和未来的问题一起使用？
是否有可下载的项目可以适应我自己的服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:54:40.460

湖人队还没有报摊能力。您可以尝试自己添加。这是我找到的最好的教程：http: [//www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/](http://www.viggiosoft.com/blog/blog/2011/10/17/ios-newsstand-tutorial/)

另外，我推荐你可以在 iTunes 上免费下载的关于报亭的 wwdc 视频谈话。您将需要构建自己的服务器来托管文件。我正在使用 Google App Engine 做同样的事情。这是一个不平凡的项目。

# java - Eclipse RCP - 如何在 Eclipse ScrolledForm 的标题栏上添加鼠标监听器

> ID：11344894
> 
> 赞同：2
> 
> 时间：2012-07-05T13:01:36.163
> 
> 标签：java, eclipse, swt, eclipse-rcp

我尝试使用表单的 addmouselistener 方法并检查点击是否在标题栏区域，但鼠标侦听器不起作用。我试图在 form 和 form.getform() 和 form.getBody() 上添加鼠标侦听器，两者都不起作用。

这是我创建表单并尝试在其上添加鼠标侦听器的代码：

```
 toolKit = new FormToolkit(parent.getDisplay());
    form = toolKit.createScrolledForm(parent);

    FillLayout layout = new FillLayout();
    layout.type = SWT.VERTICAL;
    layout.marginHeight = 10;
    layout.marginWidth = 4;

    canvas = new FigureCanvas(form.getBody(), SWT.DOUBLE_BUFFERED );
    canvas.setViewport(new FreeformViewport());
    canvas.setBackground(ColorConstants.white);
    canvas.setContents(root);
    form.getBody().setLayout(layout);
    form.setText("Data Transactions View");

    createHeaderRegion(form);

    toolKit.decorateFormHeading(form.getForm());
    form.getToolBarManager().add(new Action("This") { });

    form.getForm().addMouseListener(new MouseListener(){

        @Override
        public void mouseDoubleClick(MouseEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void mouseDown(MouseEvent e) {

            if(e.x<10 && e.y<10){
                form.getToolBarManager().add(new Action("This is the toolbar") { });    // NEW LINE
                form.getToolBarManager().update(true);  // NEW LINE
            }
        }

        @Override
        public void mouseUp(MouseEvent e) {
            // TODO Auto-generated method stub

            }
        }}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:27:16.027

您必须将侦听器添加到表单的头部。

```
public void createPartControl(Composite parent) {

    ScrolledForm scrolledForm = formToolkit
            .createScrolledForm(parent);
    formToolkit.paintBordersFor(scrolledForm);
    scrolledForm.setText("New ScrolledForm");
    formToolkit.decorateFormHeading(scrolledForm.getForm());

    scrolledForm.getForm().getHead().addMouseListener(new MouseListener() {

        @Override
        public void mouseDoubleClick(MouseEvent e) {
            System.out.println("mouseDoubleClick");
        }

        @Override
        public void mouseDown(MouseEvent e) {
            System.out.println("mouseDown");
        }

        @Override
        public void mouseUp(MouseEvent e) {
            System.out.println("mouseUp");
        }

    });

} 
```

# tsql - 如何在 TSQL 中使用 USE 关键字指定本地数据库实例？

> ID：11344899
> 
> 赞同：1
> 
> 时间：2012-07-05T13:01:51.133
> 
> 标签：tsql

我有几个数据库名称存在于本地、开发和实时服务器上。我想确保潜在危险的 T-SQL 脚本将始终使用本地数据库，而不是意外使用任何其他数据库。

我似乎无法将 [USE] 关键字与本地实例名称后跟数据库名称一起使用。这似乎很微不足道，但我似乎无法让它发挥作用。

我试过这个但没有运气：

```
USE [MYMACHINE/SQLEXPRESS].[DBNAME] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:05:43.720

该实例将通过您的连接/连接字符串确定。你连接到一个特定的实例，然后所有后续的 T-SQL 都将针对该实例和该实例单独执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T17:18:25.143

当前答案对于所提出的问题不正确。您可以通过 T-SQL 中的 USE 命令指定特定的 LocalDB 文件。您只需指定完全限定的路径名​​，这也是您将在数据库列表的下拉列表中看到的内容。

```
USE [C:\MyPath\MyData.mdf]
GO 
```

# wordpress - WordPress 中的 Wp-e-Commerce 多币种魔法

> ID：11344907
> 
> 赞同：0
> 
> 时间：2012-07-05T13:02:38.947
> 
> 标签：wordpress

我正在做一个电子商务网站。我添加了一个名为“Wp-e-Commerce Multi Currency Magic”的插件。

它运作良好。单击按钮时，它会根据所选货币更改所有产品费率。这就是问题所在：当我在选择框中选择一种货币时，我希望它在没有任何按钮点击的情况下改变，就在改变事件中。

那么可以这样修改这个插件吗？如果您对我的问题有任何想法，请帮助我，非常感谢您的回答。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:07:04.130

就在几天前，我编写了一个插件来转换 wp 电子商务中所有价格字段的货币。

这是一个演示[http://haet.at/wp-e-commerce-currency-helper/](http://haet.at/wp-e-commerce-currency-helper/)

您可以在 wordpress 插件存储库中安装该插件，它是免费的。我希望你能给我一些反馈。

# windows - Windows：如何拦截用户/组的操作？

> ID：11344910
> 
> 赞同：1
> 
> 时间：2012-07-05T13:02:44.790
> 
> 标签：windows, winapi

Windows 是否有拦截用户/组操作的机制，例如创建/删除、成员资格更改？

谷歌和 stackoverflow 还没有给出答案。反转为 netapi32!NetUserAdd 等也没有提供任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:39:13.187

只是一些用于拦截用户创建的 VBScript 代码。你可以在 C++/C#/whatever 上重写它。

```
sub set_intercept()
    set wmi = GetObject("winmgmts:\\.\root\cimv2")
    set sink = WScript.CreateObject("WbemScripting.SWbemSink", "SINK_")
    wmi.ExecNotificationQueryAsync sink, "SELECT * FROM __InstanceCreationEvent WITHIN 1 WHERE TargetInstance ISA 'Win32_Account'"
end sub 

sub SINK_OnObjectReady(obj, context)
    WScript.Echo "User was created"
end sub

set_intercept() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:35:02.417

Windows 不提供提供该功能的拦截机制，但您可以使用[Detours](http://research.microsoft.com/en-us/projects/detours/)或任何其他框架（或您自己的实现）挂钩[适当的 Win32 API 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370649%28v=vs.85%29.aspx)一旦拦截，您可以根据需要过滤和/或转发功能。

# objective-c - UITableView 未填充，因为 tableView:cellForRowAtIndexPath 从未被调用

> ID：11344911
> 
> 赞同：0
> 
> 时间：2012-07-05T13:03:00.847
> 
> 标签：objective-c, ios

我的 UITableView 未填充，因为：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

永远不会被调用。

这就是我初始化表的方式：

```
self.recentScannedItems = [[[UITableView alloc] initWithFrame:kLastScannedPortrait style:UITableViewStylePlain] autorelease];
    [self.recentScannedItems setDelegate:self];
    [self.recentScannedItems setDataSource:self];
    [self.view addSubview:recentScannedItems]; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:05:33.307

你的班级是否遵守`UITableViewDataSource`？喜欢：

```
@interface mySuperClass : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:07:12.190

您是否正确实现了数据源方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)aTableView {
    // Return the number of sections.
    return NumberOfSections;
}

- (NSInteger)tableView:(UITableView *)aTableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.

    return NumberOfRows;
} 
```

如果您没有实现此方法，或者如果您在其中返回 0，则不会调用 cellForRowAtIndexPath

# visual-studio-2008 - Visual Studio 2008 调试模式挂起

> ID：11344912
> 
> 赞同：0
> 
> 时间：2012-07-05T13:03:02.640
> 
> 标签：visual-studio-2008, visual-studio-debugging

由于某些原因，我无法在 Visual Studio 中调试我的 C# 程序！

-> 在调试模式下运行并且 VS 挂起（没有步骤可能，调用堆栈中没有任何内容）

输出消息：

```
'TestKeyManagerApp.exe': Loaded 'C:\projects\KeyManagerServer\TestKeyManagerApp\bin\Debug\TestKeyManagerApp.exe', No native symbols in symbol file.
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\ntdll.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\verifier.dll'
Page heap: pid 0x1388: page heap enabled with flags 0x3.
AVRF: TestKeyManagerApp.exe: pid 0x1388: flags 0x80643027: application verifier enabled
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\vrfcore.dll', Symbols loaded.
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\vfbasics.dll', Symbols loaded.
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\mscoree.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\kernel32.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\KernelBase.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\advapi32.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\msvcrt.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\sechost.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\rpcrt4.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscoreei.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\shlwapi.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\gdi32.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\user32.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\lpk.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\usp10.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\imm32.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\msctf.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_d09154e044272b9a\msvcr80.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\shell32.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\ole32.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\profapi.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\Culture.dll'
'TestKeyManagerApp.exe': Unloaded 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\Culture.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\mscorlib\acfc1391e45fedd2a359778ea57d914c\mscorlib.ni.dll'
'TestKeyManagerApp.exe' (Managed): Loaded 'C:\Windows\assembly\GAC_32\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\cryptbase.dll'
'TestKeyManagerApp.exe': Loaded 'C:\Windows\System32\uxtheme.dll' 
```

当我停止非功能调试器时，我必须等待大约。6/7 秒！

有人能帮助我吗！（仅在本项目中出现）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:13:28.683

我删除了项目并创建了一个新项目并将现有文件复制到新项目中！之后我就可以调试了！奇怪的！

# java - 简单的多线程代码待澄清

> ID：11344913
> 
> 赞同：0
> 
> 时间：2012-07-05T13:03:02.990
> 
> 标签：java, c, multithreading

我在线程上遇到了这个小问题。

```
 int x = 0;
    add() {

      x=x+1;
    } 
```

如果我们在多个线程中运行它，比如 4 个线程，那么每次 x=4 的最终值或者它可能是 1、2、3 或 4。

谢谢

PS可以说添加的原子操作是这样的，

```
LOAD A x
ADD A 1 
LOAD x A 
```

那么最终结果将是 4。我是对的还是我错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:03:55.980

这是数据竞争的经典例子。

现在，让我们仔细看看 add() 的作用：

```
add()
{
   x = x + 1;
} 
```

这转化为：

1.  给我 X 的最新值并将其存储在我的私人工作区中
2.  将 1 添加到存储在我的私人工作区中的那个值
3.  将我在工作区中的内容复制到我从中复制的内存（可全局访问）。

现在，在我们进一步解释这一点之前，您有一个称为[上下文切换](http://en.wikipedia.org/wiki/Context_switch)的东西，它是您的操作系统在不同线程和进程之间分配处理器时间的过程。此过程通常为您的线程提供有限的处理器时间（在 Windows 上约为 40 毫秒），然后中断该工作，复制处理器在其寄存器中的所有内容（并因此保留其状态）并切换到下一个任务。这称为[循环任务调度](http://en.wikipedia.org/wiki/Task_scheduling)。

您无法控制您的处理何时会被中断并转移到另一个线程。

现在想象你有两个线程在做同样的事情：

```
1\. Give me the most recent value of X and store it in my private workspace
2\. Add 1 to that value that is stored in my private workspace
3\. Copy what I have in my workspace to the memory that I copied from (that is globally accessible). 
```

并且 X 在它们中的任何一个运行之前等于 1。

第一个线程可能会执行第一条指令，并将其工作时最近的 X 值存储在其私有工作区中 - 1。然后发生上下文切换，操作系统中断您的线程并将控制权交给队列中的下一个任务，恰好是第二个线程。第二个线程还读取等于 1 的 X 的值。

第二个线程设法运行完成 - 它将“下载”的值加 1 并“上传”计算的值。

操作系统再次强制进行上下文切换。

现在第一个线程在它被中断的地方继续执行。它仍然会认为最近的值是 1，它会将该值加一并将其计算结果保存到该内存区域。这就是数据竞争的发生方式。您期望最终结果是 3，但它是 2。

有很多方法可以避免这个问题，例如[锁/互斥锁](http://en.wikipedia.org/wiki/Lock_%28computer_science%29)、[比较和交换](http://en.wikipedia.org/wiki/Compare_and_swap)或[原子操作](http://en.wikipedia.org/wiki/Atomic_operations)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:22:51.357

您的代码在两个级别上被破坏：

1.  线程的动作之间没有`happens-before`强加关系；
2.  未强制执行获取和增量的原子性。

解决1.可以加`volatile`修饰符。这仍然会使操作成为非原子操作。为了确保原子性，您将（最好）使用`AtomicInteger`或`synchronized`（涉及锁定，不是首选）。

就目前而言，如果从不参与递增的线程读取结果，则结果可以是**0 到 4 之间的任何数字。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T13:23:33.470

多线程应用程序是并发的（这是重点）。

```
t1: LOAD A1 x
t2: LOAD A2 x
t3: LOAD A3 x
t4: LOAD A4 x
t1: ADD A1 1 
t2: ADD A2 1 
t3: ADD A3 1 
t4: ADD A4 1 
t1: STORE x A1
t2: STORE x A2
t3: STORE x A3
t4: STORE x A4 
```

A1、A2、A3、A4 是本地寄存器。

结果是`1`，但也可能是`2`，`3`或`4`。如果您有另一个线程，由于可见性问题，它可能会看到旧值并查看`0`

# android - Android - openOrCreateDatabase - 空指针异常

> ID：11344914
> 
> 赞同：4
> 
> 时间：2012-07-05T13:03:06.693
> 
> 标签：android

我有我的 DAO 类，当我调用我的类 conexao 时，该方法返回 null，但为什么呢？

```
public void criarBanco() {
        Conexao conexao = new Conexao();
        try {
            BANCO_DE_DADOS = conexao.abrirBanco(); // <<<<<<<<<<<<<
            String SQL = "CREATE TABLE IF NOT EXISTS tablecadastropessoa ( _id INTEGER PRIMARY KEY, nome TEXT, telefone TEXT)";
            BANCO_DE_DADOS.execSQL(SQL);
        } catch (Exception e) {
            Log.i(TAG, "Erro ao criar o banco" + e);
        } finally {
            //conexao.fecharBanco(BANCO_DE_DADOS);
        }
    }

    // ABRIR BANCO
    public SQLiteDatabase abrirBanco(){
        try {
            BANCO_DE_DADOS = openOrCreateDatabase(NOME_BANCO, MODE_PRIVATE, null); // RETURN NULL
        } catch (Exception e) {
            Util.exibirMensagem("Erro ao criar o banco: " + e, AulaCadastroActivity.context);
            Log.i(TAG, "Erro ao abrir o banco: " + e);
        }
        return BANCO_DE_DADOS;
    } 
```

错误是

```
07-05 13:12:54.800: E/AndroidRuntime(223): Uncaught handler: thread main exiting due to uncaught exception
07-05 13:12:54.811: E/AndroidRuntime(223): java.lang.RuntimeException: Unable to start activity ComponentInfo{br.cadastro/br.cadastro.AulaCadastroActivity}: java.lang.NullPointerException
07-05 13:12:54.811: E/AndroidRuntime(223):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
07-05 13:12:54.811: E/AndroidRuntime(223):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
07-05 13:12:54.811: E/AndroidRuntime(223):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
07-05 13:12:54.811: E/AndroidRuntime(223):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
07-05 13:12:54.811: E/AndroidRuntime(223):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 13:12:54.811: E/AndroidRuntime(223):  at android.os.Looper.loop(Looper.java:123)
07-05 13:12:54.811: E/AndroidRuntime(223):  at android.app.ActivityThread.main(ActivityThread.java:4363)
07-05 13:12:54.811: E/AndroidRuntime(223):  at java.lang.reflect.Method.invokeNative(Native Method)
07-05 13:12:54.811: E/AndroidRuntime(223):  at java.lang.reflect.Method.invoke(Method.java:521)
07-05 13:12:54.811: E/AndroidRuntime(223):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-05 13:12:54.811: E/AndroidRuntime(223):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-05 13:12:54.811: E/AndroidRuntime(223):  at dalvik.system.NativeStart.main(Native Method)
07-05 13:12:54.811: E/AndroidRuntime(223): Caused by: java.lang.NullPointerException
07-05 13:12:54.811: E/AndroidRuntime(223):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:193)
07-05 13:12:54.811: E/AndroidRuntime(223):  at br.cadastro.Conexao.abrirBanco(Conexao.java:20)
07-05 13:12:54.811: E/AndroidRuntime(223):  at br.cadastro.ContadosDAO.criarBanco(ContadosDAO.java:27)
07-05 13:12:54.811: E/AndroidRuntime(223):  at br.cadastro.AulaCadastroActivity.inicializar(AulaCadastroActivity.java:81)
07-05 13:12:54.811: E/AndroidRuntime(223):  at br.cadastro.AulaCadastroActivity.onCreate(AulaCadastroActivity.java:27)
07-05 13:12:54.811: E/AndroidRuntime(223):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-05 13:12:54.811: E/AndroidRuntime(223):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
07-05 13:12:54.811: E/AndroidRuntime(223):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:19:35.777

很可能`NOME_BANCO`在这一行中没有初始化

```
BANCO_DE_DADOS = openOrCreateDatabase(NOME_BANCO, MODE_PRIVATE, null); 
```

这意味着您实际上正在传递：

```
BANCO_DE_DADOS = openOrCreateDatabase(null, MODE_PRIVATE, null); 
```

因此出现空指针异常。请检查它是否设置为某个值，并且它是一个有效的路径。

**编辑：**

更改文件名以具有正确的扩展名。`.db`

```
private static String NOME_BANCO = "Cadastro"; 
```

变成：

```
private static String NOME_BANCO = "Cadastro.db"; 
```

# c# - 塑造 ObservableCollection

> ID：11344915
> 
> 赞同：1
> 
> 时间：2012-07-05T13:03:10.510
> 
> 标签：c#, wpf, viewmodel, observablecollection

我有一个非常简单的问题。

我得到了一些经常更新的 ViewModel（带有 INotifyPropertyChanged）的 ObservableCollection。

现在我需要像这样将数据塑造成 NewViewModel 的新 ObservableCollection；

```
 var query = from o in _orders
                select new ComplexRowViewModel()
                           {Isin = o.Isin,
                            Name = o.Isin,
                            GermanSymbol = o.Exchange,
                            PrimarySymbol = o.State.ToString()};
        GridData = query; 
```

但它当然行不通。就像我使用 Obtics 或 CLINQ 一样，如果新项目进入第一个集合，则新集合会更新，但如果现有项目的属性发生更改，则不会在新集合中更新。

那么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:35:42.533

我不知道 Obtics 或 CLINQ，但这听起来像是 ObservableCollection 的正常行为。它**根本不会**对其包含的单个项目的属性更改做出反应。因此，您必须编写自己的 ObservableCollection 实现。此处显示了一个示例：[ObservableCollection，它还监视集合中元素的更改](https://stackoverflow.com/questions/269073/observablecollection-that-also-monitors-changes-on-the-elements-in-collection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:32:33.973

您也应该实施`INotifyPropertyChange`from `NewViewModel`。在每个订阅源订单上的 INotifyPropertychange 并正确引发新事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-21T12:24:33.010

你也可以试试我的[ObservableComputations](https://github.com/IgorBuchelnikov/ObservableComputations)库。使用该库：

```
 var query = _orders.Selecting(o => 
                new ComplexRowViewModel()
                           {Isin = o.Isin,
                            Name = o.Isin,
                            GermanSymbol = o.Exchange,
                            PrimarySymbol = o.State.ToString()};
        GridData = query; 
```

要使上面的代码工作 _orders 应该是类型`ObservableCollection`和`Order`类（我建议它是 _orders 中元素的类型`ObservableCollection`）应该实现`INotifyPropertyChanged`。

# jsf - Websphere 在 EL 中使用保留字失败

> ID：11344917
> 
> 赞同：1
> 
> 时间：2012-07-05T13:03:13.487
> 
> 标签：jsf, websphere, el, jsf-1.2, websphere-8

我有一个 JSF1.2 应用程序，它可以很好地部署在 Tomcat6 和 Tomcat7 上。到目前为止，一切都很好。

其中一页在 ah:inputText 上包含以下属性：

```
 disabled="#{quoteFinance.quoteSaved or quoteRequest.quoteDisabled or setting.protected}" 
```

这在上述 Tomcat 服务器上验证并正常工作。但是，websphere8 认为这是一个问题并抛出以下错误：

```
 disabled="#{quoteFinance.quoteSaved or quoteRequest.quoteDisabled or setting.protected}" [protected] is not a valid Java identifier
at com.sun.facelets.tag.TagAttribute.getValueExpression(TagAttribute.java:259)
at com.sun.facelets.tag.jsf.ComponentRule$ValueExpressionMetadata.applyMetadata(ComponentRule.java:69)
at com.sun.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:36)
at com.sun.facelets.tag.MetaTagHandler.setAttributes(MetaTagHandler.java:76)

Cause:
javax.el.ELException: [protected] is not a valid Java identifier
at org.apache.el.parser.AstDotSuffix.setImage(AstDotSuffix.java:45)
at org.apache.el.parser.ELParser.DotSuffix(ELParser.java:1067)
at org.apache.el.parser.ELParser.ValueSuffix(ELParser.java:1033)
at org.apache.el.parser.ELParser.Value(ELParser.java:978)
at org.apache.el.parser.ELParser.Unary(ELParser.java:948)
at org.apache.el.parser.ELParser.Multiplication(ELParser.java:712)
at org.apache.el.parser.ELParser.Math(ELParser.java:632)
at org.apache.el.parser.ELParser.Compare(ELParser.java:444)
at org.apache.el.parser.ELParser.Equality(ELParser.java:338)
at org.apache.el.parser.ELParser.And(ELParser.java:282) 
```

我有一个类似的问题，`#{msg.continue}`这很好，但是因为 continue 是一个保留字，WAS8 给我一个错误。

*   为什么 websphere 在代码运行良好时不接受这一点？
*   我该如何解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:52:01.657

此行为符合[EL 规范](http://jcp.org/aboutJava/communityprocess/mrel/jsr245/index.html)。您需要将属性名称重命名为不是 Java 文字的名称，或者您需要使用大括号表示法，以便可以将其引用为`String`.

```
#{setting['protected']} 
```

和

```
#{msg['continue']} 
```

这在 Tomcat 7 中也应该失败，也许您使用的是相当旧的 Tomcat 7 版本。这已在 7.0.0 和 7.0.10 之间的某个地方“修复”。目前已经是 7.0.28。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T15:58:02.587

来自[表达式语言 2.2](http://jcp.org/en/jsr/detail?id=245)规范：

> 标识符被限制为 Java 标识符 - 例如 no `-`、 no`/`等。

`protected`不能用作 Java 中的标识符，因为它是保留的。

这个限制也适用于 EL 2.1，所以它很可能是旧平台的 EL 解析器中的一个错误，它曾经有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T15:44:15.777

“protected”也是一个java保留字！就像“继续”

# c# - 画布堆叠问题

> ID：11344918
> 
> 赞同：0
> 
> 时间：2012-07-05T13:03:19.930
> 
> 标签：c#, wpf, canvas

我有一个包含一些内容的边框和一个`Line`在画布上的边框。边框 + 内容是可拖动的，并且`Line`会更新以随边框移动。我的问题是这条线在边界的顶部，所以在某些情况下它会阻止我的内容。我尝试设置 ZIndex 并更改了它们在 XAML 中的顺序，但它没有任何影响。我会冒险猜测这是因为`Line`它在改变形状时不断被渲染，并且由于某种原因输出到顶部的屏幕。有什么办法吗？

**我的一些代码**

**XAML**

```
<Canvas x:Name="canvas"
            MouseDown="Canvas_MouseDown"
            MouseUp="Canvas_MouseUp"
            MouseMove="Canvas_MouseMove">
            <Border BorderBrush="Aqua" BorderThickness="3" Padding="3" Name="bdr"
Background="{StaticResource GradientBackground}" Canvas.ZIndex="99"
                MouseLeftButtonDown="MouseLeftBtnDown">
                <Border.RenderTransform>
                    <TranslateTransform />
                </Border.RenderTransform>
    <button/>
            </Border>
        </Canvas>
        <Polygon
            Canvas.ZIndex="98"
            Name="SpeechPoly"
            Stroke="Aqua" 
            StrokeThickness="2"
            Fill="{StaticResource GradientBackground}">
        </Polygon> 
```

**C＃**

```
private void Dragging()
{
...
point = bdr.TransformToAncestor(this).Transform(new Point(0, 0));
myPoints.RemoveAt(1);
myPoints.RemoveAt(1);

myPoints.Add(new Point(p.X, p.Y + 50));
myPoints.Add(new Point(p.X, p.Y + 25));
SpeechPoly.Points = myPoints;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:37:09.837

废话解决方法是确定线条来自边界的位置（即右侧/左侧，顶部/底部）并将其移动到边界周围。

**更新**

```
if (p.X > myPoints[0].X)//right
{
    if (p.Y + bdr.ActualHeight> myPoints[0].Y)//lower
    {
        myPoints.Add(new Point(p.X, p.Y + 50));
        myPoints.Add(new Point(p.X, p.Y + 25));
    }
    else//higher
    {
        myPoints.Add(new Point(p.X, p.Y + bdr.ActualHeight- 50));
        myPoints.Add(new Point(p.X, p.Y + bdr.ActualHeight - 25));
    }
}
else if (p.X + bdr.ActualWidth > myPoints[0].X)//Middle
{
    if (p.Y + bdr.ActualHeight > myPoints[0].Y)//lower
    {
        myPoints.Add(new Point(p.X + (bdr.ActualWidth / 2) + 25, p.Y));
        myPoints.Add(new Point(p.X + (bdr.ActualWidth / 2), p.Y));
    }
    else if (p.Y + bdr.ActualHeight < myPoints[0].Y)//higher
    {
        myPoints.Add(new Point(p.X + (bdr.ActualWidth / 2) + 25, p.Y + bdr.ActualHeight));
        myPoints.Add(new Point(p.X + (bdr.ActualWidth / 2), p.Y + bdr.ActualHeight));
    }
}
else//left
{
    if (p.Y > myPoints[0].Y)//lower
    {
        myPoints.Add(new Point(p.X + bdr.ActualWidth, p.Y + 50));
        myPoints.Add(new Point(p.X + bdr.ActualWidth, p.Y + 25));
    }
    else//higher
    {
        myPoints.Add(new Point(p.X + bdr.ActualWidth, p.Y + 50));
        myPoints.Add(new Point(p.X + bdr.ActualWidth, p.Y + 25));
    }
} 
```

**解决方案**

必须让我`Line`在与边界相同的画布内。现在似乎很明显......谢谢文森特！

# stax - 我可以在 XMLStreamWriter 的输出流中“跳来跳去”吗

> ID：11344919
> 
> 赞同：2
> 
> 时间：2012-07-05T13:03:31.660
> 
> 标签：stax

我只是对 Stax XMLStreamWriter 有这个问题。最好用例子来解释：

假设我需要以某种方式生成这样的文档：

```
<buddies>
 <buddies name="tim"/>
 <buddies name="toady"/>
</buddies> 
```

，其中 tim 和 toady 家伙是由一些回调创建的，该回调接收 XMLStreamWriter 作为参数。

```
writer.writeElement("buddies");
 callback1.writeBuddies(writer);
 callback2.writeBuddies(writer);
write.writeEndElement(); 
```

现在的问题是，整个文档必须符合以下模式：如果有一个`<buddies>`元素，那么里面必须至少有一个`<buddy>`，所以如果我的回调没有在流上写任何东西，我就会有一个无效的空元素. 问题是：我可以`writeElement("buddies")`像这样延迟吗：

```
// Pseudocode
Mark mark = writer.getPos()
boolean written = callback1.writeBuddies(writer)
written |= callback2.writeBuddies(writer)
if (written){
  writer.writeStartElement(mark, "buddies") // write at mark
  writer.writeStopElement() // write at the end of stream
} 
```

还是我完全偏离了轨道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T12:45:11.130

StAX 是一个只转发的流 API。为了实现您的要求，DOM 解析器的潜在要求是您单独构建节点“伙伴”并将其附加到主文档（如果它不为空）。

# android - 在不编译的情况下测试我的 android 库

> ID：11344921
> 
> 赞同：1
> 
> 时间：2012-07-05T13:03:35.183
> 
> 标签：android, project

我想在 android 应用程序中测试我的库，但我想避免编译和移动 .jar 文件。

在用于 iOs 开发的 Xcode 中，可以将库项目添加到其他项目（测试应用程序）内的工作区中，并且当您运行测试应用程序时，它会构建库并正确链接所有内容。

我可以为 Eclipse 中的 Android 开发执行此操作吗？我怎样才能做到这一点？

我尝试添加一个库，但它似乎非常手动，按时并不理想。

这里重要的是我确实有 Android 引用和依赖项，所以我不能只对库本身进行单元测试。我还在创建一个 SQLite 数据库，我想在开发过程中对其进行检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:17:44.020

[您可以使用RoboElectric](http://pivotal.github.com/robolectric/)测试您的库代码，无需部署 android 模拟器即可进行测试。

或者您可以将您的库项目设置为 Android 库项目并将测试放在第一个项目中。[关联](https://stackoverflow.com/questions/10794158/managing-project-dependencies-in-eclipse/10796607#10796607)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:29:28.843

我猜您是在询问有关**Android 库**项目的问题，否则您可以使用 JUnit 测试您的库。在这种情况下，post [android: testing library projects为您提供了有关如何以独立方式继续测试](http://dtmilano.blogspot.ca/2012/04/android-testing-library-projects.html)**Android Library**项目的分步指南。认为它也可以通过属于使用该库的 Android 项目的测试来进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:14:16.027

在最新的 android SDK 工具中，您不需要在构建路径中添加 jar，它们会自动添加。

您可以将 jar 文件放在`libs`项目的文件夹中，但它会在运行之前进行编译。

# python - 未定义符号 TLSv1 与 python+perforce

> ID：11344925
> 
> 赞同：3
> 
> 时间：2012-07-05T13:03:45.540
> 
> 标签：python, perforce

我在本地 archlinux 机器上安装了 p4 库，一切运行顺利。我现在试图在几个虚拟机上做同样的事情（同样的操作系统也是 64 位），但无法让它运行......

安装顺利并且没有抱怨，但是当我尝试导入它时，我得到：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "P4.py", line 312, in <module>
    import P4API
ImportError: /usr/lib/python2.7/site-packages/P4API.so: undefined symbol: TLSv1_method 
```

如果我用 nm -A /usr/lib/python2.7/site-packages/P4API.so 查看符号

我可以看到实际上所有与 SSL 相关的符号都是未定义的（虽然在工作符号上定义），但究竟为什么呢？我已经安装了 openssl 并且以完全相同的方式安装了 Python，我找不到任何其他应该有用的库。

任何想法？

编辑：显然唯一的区别是P4 P4API.so的错误安装在“ldd”输出中缺少librt（并且librt实​​际上在那里）。不确定它与 TLS 问题有何关系，并尝试重新安装 glibc 然后 p4python 但仍然没有运气..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T09:15:37.843

针对“rt”和“ssl”库重建 P4Python 可以解决此问题。

1.  从 perforce 站点上取下 P4 API（例如，对于 Linux，取这个： http: [//filehost.perforce.com/perforce/r13.2/bin.linux26x86_64/p4api.tgz](http://filehost.perforce.com/perforce/r13.2/bin.linux26x86_64/p4api.tgz)）
2.  把 P4Python 的源代码从[http://public.perforce.com/guest/robert_cowham/perforce/API/python/main/p4python.zip](http://public.perforce.com/guest/robert_cowham/perforce/API/python/main/p4python.zip)
3.  `tar xf`P4 API 档案
4.  解压 p4pthon 存档
5.  编辑`setup.cfg`以指向 P4API 目录
6.  编辑`setup.py`并转到第 120 行并添加“ssl”和“rt”，使其看起来像这样

    ```
    else: # Assume Linux
        libraries = ["client", "rpc", "supp", "ssl", "rt"]    # P4API libs
        extra_compile_args = ["-DOS_LINUX", "-D%s" % p4_api_ver] 
    ```

7.  做`sudo python setup.py install`

# groovy - 如何制作 prestep 系统 groovy 脚本来中断 jenkins 构建并将其设置为 SUCCESS？

> ID：11344928
> 
> 赞同：0
> 
> 时间：2012-07-05T13:03:48.673
> 
> 标签：groovy, continuous-integration, hudson, jenkins

假设我在 jenkins/hudson 中有一个 maven2/3 项目，并且在我在相应的 config.xml 文件中配置的 maven 项目上运行一些目标**之前**，我想在 prestep 和如果满足某些条件，则中断整个作业并将其设置为 SUCCESS（例如，假设我在上一个作业的日志文件中找到了某些内容）。**我不想让 MAVEN 开始执行目标**。

我努力了

```
import hudson.model.*
def thr = Thread.currentThread()
def build = thr?.executable
build.executor.interrupt(hudson.model.Result.SUCCESS)
out.print "HELLO" 
```

但是什么都没有发生，甚至“HELLO”也打印在日志中。但随后构建被中止。

```
Parsing POMs
Discovered a new module ...
Modules changed, recalculating dependency graph
...
...jdk1.6.0_22/bin/java -Xmx512m -cp ...
<===[JENKINS REMOTING CAPACITY]===>Build was aborted 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:35:11.513

我不完全理解你想要什么，因为你在这里描述了一些解决方案，而不是你的确切问题。我知道三个插件，它们也可能对您的问题有用：

*   [使构建](https://wiki.jenkins-ci.org/display/JENKINS/Fail+The+Build+Plugin)插件失败可让您设置作业的结果，并停止进一步处理。可以设置任何状态，包括成功。
*   [条件构建步骤](https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin)插件允许您为其子构建步骤定义条件。如果满足条件，孩子（人）将运行。
*   [m2 额外的构建步骤](http://wiki.hudson-ci.org/display/HUDSON/M2+Extra+Steps+Plugin)- 让您在 jenkins 的 maven 作业中在 maven 构建之前或之后运行构建步骤。请注意，最近，这个插件是核心 jenkins 的一部分。![在此处输入图像描述](../Images/303d80c384abb372383ae4229f54e4db.png)

因此，基本思想是**您可以在工作中添加条件构建步骤作为预构建步骤，而子步骤可能是一个失败的构建实例**。见下图：

# c++ - opencv中的复杂特征值

> ID：11344931
> 
> 赞同：2
> 
> 时间：2012-07-05T13:03:58.997
> 
> 标签：c++, opencv, eigenvector, eigenvalue

在opencv中计算不对称矩阵的特征值和特征向量的任何方法？

# linux - 在 Linux 上部署 Qt 应用程序二进制文件，与 LSB 兼容

> ID：11344934
> 
> 赞同：5
> 
> 时间：2012-07-05T13:04:16.967
> 
> 标签：linux, qt

我在 Ubuntu 12.04 上的 Qt Creator 中开发了一个小应用程序，我希望它应该在任何其他 linux 发行版（主要是不同版本的 CentOS 和 ubuntu）上运行，就像 Windows 上的任何便携式应用程序一样。

我希望能够简单地共享应用程序的二进制文件，并运行应用程序。我能够在 Windows 中成功地做到这一点，只需在 QT Creator 中构建项目，然后将所需的库放在 Application 目录中，然后将它们转移到其他 Windows 系统。

我到处搜索，发现我应该尝试使用 LSB（Linux 标准库）兼容性来构建项目，以便它可以在其他 linux 发行版上运行。这是正确的方法吗？

我对 Qt 和 Linux 都很陌生（不太了解 Shell 脚本）。因此，我不知道我应该如何继续使应用程序 LSB 兼容。

我参考了以下链接： [在 Linux 上分发基于 Qt 的二进制文件和在 Linux 上](http://labs.qt.nokia.com/2006/02/10/distributing-qt-based-binaries-on-linux/)部署 [Qt 应用程序，](http://labs.qt.nokia.com/2006/05/09/deploying-qt-applications-on-linux/)但我无法理解我应该做什么。

我也在[这里发现了这个问题，](https://stackoverflow.com/a/934981/1503916)它与我的情况非常相似，但是因为我是新手，所以我不知道该怎么做。

而且，考虑到前两篇文章是 6 年前写的，现在不应该有更简单的方法在 linux 平台上部署 Qt 应用吗？我还看到了一些关于静态链接的东西，这是要走的路吗？难道没有一种方法可以通过 Qt Creator 本身完成所有这些工作吗？

如果没有希望为 Linux 创建一个可移植的 Qt 应用程序，那么有没有办法，比如一个 shell 脚本或其他东西，可以结合在另一台计算机上编译 Qt 项目并运行它所需的所有步骤。比如说，如果没有 Qt-SDK，则下载 Qt-SDK，运行 qmake 和 make，然后如果还没有新编译的应用程序，那么用户只需运行一个脚本即可运行该程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:37:23.983

使二进制应用程序与*任何其他*Linux 发行版兼容实际上是不可能的，因为您永远不会事先知道发行版 X 中哪些库可用，或者该库的可用版本。即使在单个发行版（例如 Ubuntu）中，二进制应用程序也几乎永远不会向后兼容，因为在 Ubuntu 12.04 上构建的任何东西都将依赖于安装在该版本 Ubuntu 上的版本库，并且尝试在 Ubuntu 10.04 上运行该二进制文件将很可能只是因为它没有足够新的 glibc 版本或其他一些必要的库而失败。

但是，如果您将自己限制在有限的发行版列表和这些发行版的版本中，这个想法可能会更容易实现。然后，您可以知道哪些库可用于这些发行版，并以最低公分母为目标。我曾经维护一个二进制应用程序，它必须支持多个发行版（Ubuntu、Fedora、OpenSUSE、SLED、Mandriva），而我这样做的方式是在我的构建机器上安装最古老的发行版。这样，二进制应用程序将链接到这些发行版上可用的最旧版本的库。除非有这样一个库的新主要版本（这种情况很少发生，即使那样，发行版通常出于兼容性目的分发以前的主要版本一段时间），您编译的二进制文件将与您所有的目标发行版兼容。

因此，我会针对您的情况给出的快速建议是，使用仍受支持的最旧 LTS 版本的 Ubuntu（目前为 10.04）进行开发，并且对于最近流行的发行版，您应该是*相当安全的。*对于您已经在 Ubuntu 12.04 上开发的应用程序，您只需在 10.04 上重新编译相同的源代码应该没有问题。了解您永远无法实现与已编译的 C++ Qt 应用程序的 100% 兼容性。

如果 Qt 对您来说不是那么重要，您可以使用更高级别的或解释性语言，例如 Python、Java、Perl 或 Ruby。使用这些语言，您通常可以依靠目标发行版上已经安装的语言实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T05:13:39.123

您的问题不是 Linux 标准基础，而是您需要的特定 Qt 版本（或更高版本）的存在与否。

就像在 Windows 机器上一样，用户可能安装了任何 Qt，或者他们可能根本没有安装。在 Windows 上，检查某个版本的 Qt 是否存在比在 Linux 上更容易，因此更容易编写自动化体验的安装工具。

要解决您的问题，有几种方法：

1.  通知用户您的程序需要某个版本的Qt或更高版本，并让用户处理问题
2.  了解如何为您想要定位的每个发行版创建包并创建特定包
3.  使用 0Install 或 Elf Statifier 之类的程序来创建包含所有必要库的包/可执行文件。

后者类似于许多 Windows 和 Mac 程序所做的（它们在安装程序中包含他们需要的每个库），但它不是 Linux 上的首选方式，它严重依赖于共享库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:24:11.840

在 Linux 中部署应用程序是一场噩梦，幸运的是有一些解决方案。检查此项目以构建一个可移植的二进制文件，并捆绑了所有依赖项：

[http://statifier.sourceforge.net/statifier/main.html](http://statifier.sourceforge.net/statifier/main.html)

[http://www.magicermine.com/index.html](http://www.magicermine.com/index.html)

[http://www.pgbovine.net/cde.html](http://www.pgbovine.net/cde.html)

另一个解决方案是制作一个可移植的 0install 包：

[http://0install.net/](http://0install.net/)

我推荐这个解决方案。就我个人而言，我一直对 3 个第一个包装器有问题。

# email - Cucumber (with watir-webdriver): 未定义的方法`confirmation_token'

> ID：11344935
> 
> 赞同：0
> 
> 时间：2012-07-05T13:04:20.350
> 
> 标签：email, cucumber, watir-webdriver, confirmation, specifications

如何在黄瓜中使用确认令牌？我需要这个来测试注册而不检查电子邮件。

我的代码：

```
 @b.text_field(:name => 'profile[prename]').set 'Kurt'

  @b.text_field(:name => 'profile[surname]').set 'Russell'

  @b.text_field(:id => 'profile_email').set 'user@trash-mail.com'

  @b.text_field(:id => 'profile_password').set 'password'

  @b.text_field(:name => 'profile[password_confirmation]').set 'password'

  @b.button(:id => 'profile_submit').click

  @ctoken = Profile.last.confirmation_token

  @b.goto("http://localhost:3000/profiles/confirmation?confirmation_token=#{@ctoken}") 
```

或者：

```
 @b.goto("http://localhost:3000/profiles/confirmation?confirmation_token=#{Profile.last.confirmation_token}") 
```

我变成：nil:NilClass (NoMethodError) 的未定义方法`confirmation_token'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:28:15.380

在我看来，您的情况会`Profile.last`返回`nil`，因此会出现错误消息`undefined method confirmation_token for nil:NilClass (NoMethodError)`。请在您定义的地方分享代码`Profile`。

# c# - 如何检测应用程序启动时是否按下手指？

> ID：11344936
> 
> 赞同：0
> 
> 时间：2012-07-05T13:04:21.263
> 
> 标签：c#, windows-phone-7

我想在我的应用程序启动时检测用户是否将手指放在屏幕上，以便我可以执行一些不同的功能。

我看到的大部分内容都是关于手势的，但我认为这不会起作用，因为当应用程序启动时用户已经按住手指。如果我能检测到有多少个手指，这样我就可以用两个手指直接转到不同的页面，那就太酷了。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:11:16.513

[http://invokeit.wordpress.com/2012/04/27/high-performance-touch-interface-wpdev-wp7dev/](http://invokeit.wordpress.com/2012/04/27/high-performance-touch-interface-wpdev-wp7dev/)

发生的 TouchFrameEventArgs 提供了一种查询多个接触点的机制

[http://msdn.microsoft.com/en-us/library/system.windows.input.touchframeeventargs.gettouchpoints(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.touchframeeventargs.gettouchpoints(v=vs.95).aspx)

在我的帖子中，我只处理主要触摸点，但 GetTouchPoints 方法会将所有触摸点作为一个集合提供给您

# wpf - 在 WrapPanel 上垂直列出项目并利用多列

> ID：11344938
> 
> 赞同：18
> 
> 时间：2012-07-05T13:04:25.300
> 
> 标签：wpf, silverlight, xaml, scrollviewer, wrappanel

我需要垂直（使用 ScrollViewer）列出项目（所有大小相同）。如果容器足够大以显示*x*列，我希望项目通过*x列传播*

 *我首先尝试过：

```
<ScrollViewer>
    <toolkit:WrapPanel Orientation="Horizontal" ItemHeight="30" ItemWidth="100">
        <Button Content="1" />
        <Button Content="2" />
        <Button Content="3" />
        <Button Content="4" />
        <Button Content="5" />
    </toolkit:WrapPanel>
</ScrollViewer> 
```

![](../Images/56387df4e58441494172e9b9e7380d43.png)

**结果**- WrapPanel 像我想要的那样工作，但我的物品是从“从左到右”排序的（不是垂直的

然后我尝试将 WrapPanel 的方向设置为“**垂直**”：

![](../Images/3443da54b74c83e863587173b0a5c387.png)

**结果**- 我的项目是垂直排序的，但没有分布在多个列上。

这是我希望渲染项目的方式：

![](../Images/175e4cda17c9e834557b1c89138172bc.png)

我真的很想避免编写代码来监视控件大小以根据其大小创建/删除列。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T13:18:25.633

如果您设置`Orientation`为`Vertical`您还应该设置渲染高度。例如对`WrapPanel`, `Height="150"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T12:49:00.033

终于得到了一些有用的东西，但它需要代码。当您说我们需要调整 WrapPanel 的高度以使其正常工作时，我同意你们所有人的看法。这是我的解决方案：

```
<ScrollViewer x:Name="scroll1" SizeChanged="ScrollViewer_SizeChanged" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
    <toolkit:WrapPanel x:Name="wp1" Orientation="Vertical" VerticalAlignment="Top" HorizontalAlignment="Left" ItemHeight="30" ItemWidth="250" >
        <Button Content="1" />
        <Button Content="2" />
        <Button Content="3" />
        <Button Content="4" />
        <Button Content="5" />
        <Button Content="6" />
        <Button Content="7" />
        <Button Content="8" />
    </toolkit:WrapPanel>
</ScrollViewer> 
```

这是代码隐藏：

```
private void ScrollViewer_SizeChanged(object sender, SizeChangedEventArgs e)
{
    // Stupid magical number because ViewPortHeight is sometimes not accurate
    Double MAGICALNUMBER = 2;

    // Ensure ViewPortSize is not 0
    if (scroll1.ViewportWidth <= MAGICALNUMBER || scroll1.ViewportHeight <= MAGICALNUMBER)
        return;

    Size contentSize = new Size(scroll1.ViewportWidth - MAGICALNUMBER, scroll1.ViewportHeight - MAGICALNUMBER);
    Size itemSize = new Size(wp1.ItemWidth, wp1.ItemHeight);

    Size newSize = CalculateSizeBasedOnContent(contentSize, wp1.Children.Count, itemSize);

    wp1.Width = newSize.Width;
    wp1.Height = newSize.Height;
}

private Size CalculateSizeBasedOnContent(Size containerSize, int itemsCount, Size itemSize)
{

    int iPossibleColumns = (int)Math.Floor(containerSize.Width / itemSize.Width);
    int iPossibleRows = (int)Math.Floor(containerSize.Height / itemSize.Height);

    // If all items can fit in first column without scrolling (or if container is narrow than the itemWidth)
    if (itemsCount <= iPossibleRows || containerSize.Width < itemSize.Width)
    return new Size(itemSize.Width, (itemsCount * itemSize.Height));

    // If all items can fit in columns without scrollbar
    if (iPossibleColumns * iPossibleRows > itemsCount)
    {
    int columnsNeededForDisplay = (int)Math.Ceiling((itemsCount/(Double) iPossibleRows));
    return new Size(columnsNeededForDisplay * itemSize.Width, containerSize.Height);
    }

    // Here scrolling is needed even after spreading in columns
    int itemsPerColumn = (int)Math.Ceiling(wp1.Children.Count / (Double)iPossibleColumns);
    return new Size(containerSize.Width, itemsPerColumn * itemSize.Height);

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T18:03:06.870

`WrapPanel`如果没有定义它，这种行为是不可能的`Height`

您可以使用的一种替代方法是 a `Grid`, where in`OnLoaded`和`OnSizeChanged`，它计算可以容纳多少列，然后设置 Grid 的 Row/Column 定义和代码隐藏中每个对象的`Grid.Row`/ 。`Grid.Column`它并不漂亮，但它应该相当简单，并且可以工作。

另一种选择是创建您自己的自定义面板，按照您的需要排列项目。您甚至可以在网上找到已经做到这一点的东西

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T17:54:26.743

使用 a 执行此操作的唯一方法`WrapPanel`是显式设置`Height`.

看起来您希望项目均匀地分布在列上，左列最多比右列多一个项目。如果那是您正在寻找的，那么您需要创建自己的自定义面板。看看[这个](http://www.switchonthecode.com/tutorials/wpf-tutorial-creating-a-custom-panel-control)，看看如何开始。您将需要 ItemWidth 和 ItemHeight 依赖属性，并使用 ItemWidth 和可用宽度计算可以拥有的列数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-03T03:51:38.353

禁用垂直滚动条。这告诉 WPF 使用水平空间。
<WrapPanel Orientation="Vertical" ScrollViewer.VerticalScrollBarVisibility="Disabled" />

Frode，试试这个（VS2017 .NET 4.7.2）：

```
<Window 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="WpfApp1.MainWindow" Title="Wrap Panel Test" Height="100" Width="250">
    <ScrollViewer ScrollViewer.VerticalScrollBarVisibility="Disabled">
        <WrapPanel Orientation="Vertical">
            <Button Width="100" Content="1" />
            <Button Width="100" Content="2" />
            <Button Width="100" Content="3" />
            <Button Width="100" Content="4" />
            <Button Width="100" Content="5" />
        </WrapPanel>
    </ScrollViewer>
</Window> 
```

[![包装面板演示](../Images/4810d983ab2ee315d8311a4e5badb8ce.png)](https://i.stack.imgur.com/Ev28Y.jpg)*

# android - 内置加密 API 的不同操作系统

> ID：11344939
> 
> 赞同：0
> 
> 时间：2012-07-05T13:04:26.550
> 
> 标签：android, ios, linux, macos, cryptography

我需要研究内置 crypt API 的操作系统的功能。创建自签名证书、集中式受保护密钥库和制作 PKCS7 签名对我很感兴趣。为此，我将仅使用 RSA 或 DSA 算法。我的目标操作系统是 Windows、Linux、OSX、iOS、Android 和 Windows RT。这次经过大量谷歌搜索后，我发现了一些我汇总在下表中的答案：

* * *

Windows：存储（+）证书（+）签名（+）

Linux：存储（-）证书（-）签名（-）

OSX：存储（+）证书（na）签名（na）

Windows RT：存储(na) 证书(na) 签名(na)

Android：存储（+）证书（-）签名（-）

iOS：存储（+）证书（-）签名（-）

* * *

我需要有关 na 项目的帮助，如果有人检查我的结果，我将不胜感激。

*   Windows - CAPICom 所有功能
*   Linux - 仅内核模式和对称密码
*   Android - Java API，存储和原始签名的主要功能，我也知道存在内置的具有证书和签名功能的 OpenSSL，但是这个库在 Android 术语中是“不稳定的”，所以使用它不是真正的方式。
*   iOS - 安全子系统，存储和原始签名的全部功能
*   OSX - 安全子系统，存储的全部功能，我知道存在用于创建证书的内置工具，但我需要此功能的程序版本，我希望 PCKS7 也支持
*   Windows RT - 我想它应该是 CAPICom 或 CNG，但我没有找到任何关于 RT 版本的证明信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:48:24.910

我只能对 Linux 发表评论。

如果您正在查看内核中的密码学，那么它确实是相当有限的。但是，没有应用程序使用内核中的加密，但所有应用程序都使用来自包的加密，例如`libgcrypt`,`gnutls`或`nettle`.

对于密钥管理，请查看`keyutils`和`gnome-keyring`。

# joomla - Joomla 2.5 - “我的个人资料”按钮在升级后消失了

> ID：11344944
> 
> 赞同：0
> 
> 时间：2012-07-05T13:05:06.660
> 
> 标签：joomla

我升级了我的 Joomla！从 1.7 到 2.5 的问题是，当用户成功登录时，“我的个人资料”按钮不显示。它在用户登录后出现在 1.7 中。有人可以给我一个提示吗？

谢谢，

安内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:34:16.587

升级后，登录模块中的一些代码发生了变化，我只是用 v1.7 中的代码覆盖了这些代码。

# c++ - 当库更改时，Exe 执行完整链接，尽管增量链接

> ID：11344945
> 
> 赞同：5
> 
> 时间：2012-07-05T13:05:16.467
> 
> 标签：c++, visual-studio, visual-c++, linker, incremental-linking

我有一个 MSVC++ 项目，包括一个可执行文件、几个自己的静态库和一些预编译的静态第三方库。exe 使用增量链接来加快构建时间。

当我在可执行项目中更改 .cpp 文件时，编译 + 链接非常快（<10 秒）。
但是，当我在自己的一个库中更改 .cpp 文件时，可执行项目似乎正在针对它使用的每个库进行*完整*链接。
如果它实际上是一个完整链接，我不再那么确定了，但是从“vc90.pdb not found”链接器警告中，我可以看出它链接到了一些根本没有改变的外部库。

以下是项目结构的示例：

*   预编译的第三方库`ExtLib1`，`ExtLib2`以及`ExtLib3`
*   自有库`MyLib`，使用第三方库`ExtLib1`
*   拥有 Exe `MyExe`, 使用`MyLib`和`ExtLib1-3`

更改 .cpp 文件`MyLib`会导致`MyExe`链接到`MyLib`、和`ExtLib1`，即使打开了*增量链接也是如此。*`ExtLib2``ExtLib3`

 *在我的项目中，完整链接大约需要 5 分钟，所以我问：**有没有办法只重新链接已更改的库？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:29:46.817

这是对[增量链接](http://msdn.microsoft.com/en-us/library/4khtbfyf.aspx)的介绍。它列出了将导致完整链接的情况。其中之一是“使用 /Yu /Z7 选项编译的对象已更改。”，请检查您的 MyLib 是否捕获它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-04T07:51:21.040

当一个静态库发生变化时，总会有一个可执行文件的完整链接，至少在 Visual Studio 2013 中，您可能会在输出窗口中看到类似这样的内容：

```
2>Link:
2>  LINK : library changed; performing full link 
```

不过好消息是：我在 Visual Studio 2015 中进行了快速测试，增量链接似乎按预期工作。

资料来源：大量的实验和环顾四周，遇到了同样的问题。另外，这个：[http](http://www.pcreview.co.uk/threads/incremental-linking-and-multiple-projects.1431266/) ://www.pcreview.co.uk/threads/incremental-linking-and-multiple-projects.1431266/ ，具体来说：

> 这是设计使然。当静态库更改时，我们无法增量链接。以前也从未支持过。
> 
> Ronald Laeremans，Visual C++ 团队

编辑 - 已确认 VS 2015 在使用静态库时具有增量链接：http: [//blogs.msdn.com/b/vcblog/archive/2014/11/12/speeding-up-the-incremental-developer-scenario-with -visual-studio-2015.aspx](http://blogs.msdn.com/b/vcblog/archive/2014/11/12/speeding-up-the-incremental-developer-scenario-with-visual-studio-2015.aspx)。*

# php - 在一个查询 PDO 中选择两个表

> ID：11344947
> 
> 赞同：2
> 
> 时间：2012-07-05T13:05:24.753
> 
> 标签：php, sql, pdo

我已经花了几个小时来弄清楚这个查询但没有结果，

我实际上是 PDO 的新手，我曾经做过 MYSQL，但我在 stackoverflow 上看到我必须更改为 PDO，因为 MYSQL 很快就会被禁用，

所以现在我的问题是，我想在这样的一个查询中选择两个彼此没有关系的不同表，

```
$query = $dbh->query("SELECT * FROM table1; SELECT * FROM table2");
//rest of query, 
```

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:06:39.017

就像你用普通 SQL 做的一样：

```
$query = $dbh->query("SELECT * FROM table1, table2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:09:24.713

或者使用 JOIN

SELECT t1.id, t2.name FROM users AS t1 JOIN people AS t2 ON t1.id = t2.id;

# asp.net - ASP.NET 解析器错误仅在本地计算机上

> ID：11344954
> 
> 赞同：1
> 
> 时间：2012-07-05T13:05:58.050
> 
> 标签：asp.net, visual-studio-2010, parse-error

我收到了常见的 ASP.NET YSOD 错误。这是所要求的完整错误页面：

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

Parser Error 
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: Could not load type 'WebApplication1.WebForm1'.

Source Error: 

Line 1:  <%@ Page Language="vb" AutoEventWireup="false" CodeBehind="WebForm1.aspx.vb" Inherits="WebApplication1.WebForm1" %>
Line 2:  
Line 3:  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

Source File: /WebForm1.aspx    Line: 1 

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

但只在我的本地机器上。我尝试了使用本地 IIS Web 服务器的选项，这给出了同样的错误。

我读过的所有内容都说“只需重新编译”我已经这样做了，但这没有任何区别。

我正在使用VS2010。

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:08:58.553

尝试删除现有的 DLL 和 PDB，然后重新编译项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:20:25.110

检查此 SO 线程上的[DamoDBear 的答案-](https://stackoverflow.com/a/8129852/770710)[解析器错误消息：无法加载类型 'TestMvcApplication.MvcApplication'](https://stackoverflow.com/questions/1598829/parser-error-message-could-not-load-type-testmvcapplication-mvcapplication)。

可能有两个原因，可能会帮助将来谁将面临问题。

```
a)The file in which we have changed it was not updated properly, so that's why It
  was causing an error,so project .dll has updated but that page was not updated 
  properly.

b)That page Excluded from the project. 
```

所以请记住这些事情。大多数案例文件没有更新。

相关 MSDN 链接：[Bin 文件夹位置导致“解析器错误消息：无法加载类型”](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/7ad2acb0-42ca-4ee8-9161-681689b60dda/)问题

希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:12:11.187

**您的**`class`代码隐藏文件必须在`WebForm1` **`namespace` `WebApplication1`**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T13:18:38.277

检查**项目的属性**，并在“**构建**”选项卡中查看“**输出路径**”的位置。如果不是项目**自己的“bin”目录**，就是这个原因。Web App 也在引用自己，如果在它自己的 bin 文件夹中找不到 dll，它要么在第一次编译时根本不工作，要么不反映您对代码的更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-01T05:17:52.437

在您必须开始调试或浏览应用程序之前，您必须具有重建解决方案。**

# ios - 无法在 iOS 中将数据插入 sqlite3

> ID：11344959
> 
> 赞同：0
> 
> 时间：2012-07-05T13:06:25.513
> 
> 标签：ios, sqlite

我正在尝试将文本数据插入到 iOS 中的 sqlite3 数据库中。

我编写了以下代码将数据保存到 sqlite3 数据库中。

```
NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSString *dbPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"MgDB.sqlite"];

        BOOL success = [fileMgr fileExistsAtPath:dbPath];

        if(!success)
        {
            NSLog(@"File Not Found");
        }

        if((!sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK))
        {
            NSLog(@"Error in MyInfo");
        }

        const char *sql = "Insert into MyDB (name,address,email) values('%@','%@','%@')";

        sqlite3_bind_text(sqlStmt, 0, [Name UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(sqlStmt, 1, [Address UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(sqlStmt, 2, [Email UTF8String], -1, SQLITE_TRANSIENT);

        if(sqlite3_prepare(database, sql, -1, &sqlStmt, NULL))
        {
            NSLog(@"Error in Loading database");
        }

        if (sqlite3_exec(database, sql, NULL, NULL, NULL) == SQLITE_OK) 
        {
            return sqlite3_last_insert_rowid(database);
        }

        if(sqlite3_step(sqlStmt) == SQLITE_ROW)
        {
            NSLog(@"ERROR");
        }
    }

    @catch (NSException *exception) 
    {
        NSLog(@"%@",exception);
    }

    @finally 
    {
        sqlite3_finalize(sqlStmt);
        sqlite3_close(database);
    } 
```

根据我上面的代码，我返回最后一个插入 ROWID 来检查是否插入。

在 View 中保存文本数据后，ROWID 增加了。

但是，当我使用 FireFox sqlite3 工具检查我的数据库时，我没有插入任何数据。

所以我停止运行并重新运行我的应用程序并再次添加数据。

最后插入的ROWID与旧计数相同。即使增加一个也不增加。

我想知道为什么它没有将任何数据保存到 sqlite 数据库中。

我的代码有问题吗？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:21:06.513

```
NSString *dbPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"MgDB.sqlite"]; 
```

您不能写入应用程序包中包含的文件。而是在 Documents 目录中创建（或复制）数据库。

请参阅[QA1662](https://developer.apple.com/library/ios/#qa/qa1662/_index.html)。

# maven - 是否可以在 jUnit 测试运行期间禁用 log4j 异常输出？

> ID：11344960
> 
> 赞同：5
> 
> 时间：2012-07-05T13:06:33.017
> 
> 标签：maven, junit, log4j

需要在 jUnit 测试运行期间禁用 log4j 输出到控制台，但应启用所有其他 log4j 输出。在测试过程中检查方法对错误参数的反应时有很多异常，所以异常是可以的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T14:52:53.483

创建一个名为 eg 的新 log4j 属性文件`log4j-test.properties`，禁用日志记录。在 POM 中的万无一失的配置中，`argLine`添加`-Dlog4j.configuration=log4j-test.properties`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-23T13:06:28.497

*我知道这个问题已经很老了，但在我看来仍然相关，所以我会添加一个替代答案。*

如果您只想禁用（或减少）某些测试的日志记录，或者出于某种原因想要从代码中执行此操作而不是创建配置文件，您可以执行以下操作：

```
RootLogger.getRootLogger().setLevel(Level.OFF); 
```

# c# - 将我的标签控件数据绑定到具有不同数据源的数据列表中

> ID：11344961
> 
> 赞同：0
> 
> 时间：2012-07-05T13:06:35.660
> 
> 标签：c#, data-binding, datalist

我有一个数据列表，它在项目模板中有两个按钮、两个标签和一个图像。我想对我的标签控件之一进行数据绑定，该控件位于具有不同数据源的数据列表中。我已经对 datalist 中的一些控件进行了数据绑定。这里是。

```
DataSet ds = objFriend.ViewFriendRequest();
if (ds.Tables["FriendRequests"].Rows.Count > 0)
{

    dlFriendRequest.DataSource = ds;
    dlFriendRequest.DataBind();
    dlFriendRequest.Visible = true;
    lblMsg.Text = ds.Tables["FriendRequests"].Rows.Count + " records are found.";
} 
```

如果我想采用标签控制并单独进行数据绑定，是否有可能？我想要做的是设置一个自定义字符串，该字符串将来自数据列表 dlFriendRequest 中名为 lblFri 的标签的方法。

# java - 为什么受保护成为不同子类包中其他类的私有

> ID：11344962
> 
> 赞同：1
> 
> 时间：2012-07-05T13:06:36.853
> 
> 标签：java

为什么 protected 对不同子类包中的其他类变得私有。但它仍然在同一个超类包中受到保护。

```
package a;
class A
{
  protected a;
}

package b;
class B extends A
{
  B()
{
  System.out.println(a);
}
}

class C
{
  C()
  {
    System.out.println(new B().a);//error
   }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:09:04.897

`protected`因为包是非相关类的访问修饰符的“可见性限制” 。请参阅此处的文档： http: [//docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)：

> protected 修饰符指定该成员只能在其自己的包中访问（与 package-private 一样），此外，它的类在另一个包中的子类也可以访问。

从上面可以看出，你既不是子类的情况，也不是同一个包的情况。

# c - 如何在makefile中包含静态库

> ID：11344965
> 
> 赞同：38
> 
> 时间：2012-07-05T13:06:42.143
> 
> 标签：c, linux, gcc, x86-64

我有以下生成文件

```
CXXFILES = pthreads.cpp 

CXXFLAGS = -O3 -o prog -rdynamic -D_GNU_SOURCE -L./libmine
LIBS = -lpthread -ldl

all:
    $(CXX) $(CXXFILES) $(LIBS) $(CXXFLAGS)

clean:
    rm -f prog *.o 
```

我正在尝试将`./libmine`库包含在 中`CXXFLAGS`，但似乎它不是包含静态库的正确方法，因为当我编译程序时，出现许多未定义的引用错误。那么在 makefile 中包含静态库的正确方法是什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-05T13:31:11.320

采用

```
LDFLAGS= -L<Directory where the library resides> -l<library name> 
```

像 ：

```
LDFLAGS = -L. -lmine 
```

为了确保静态编译，您还可以添加

```
LDFLAGS = -static 
```

或者您可以摆脱整个图书馆搜索，并直接与它链接。

说你有 main.c fun.c

和一个静态库 libmine.a

然后你可以在 Makefile 的最后一个链接行中做

```
$(CC) $(CFLAGS) main.o fun.o libmine.a 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-05T13:32:17.690

```
CXXFLAGS = -O3 -o prog -rdynamic -D_GNU_SOURCE -L./libmine
LIBS = libmine.a -lpthread 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-05T13:56:59.333

确保`-L`选项出现在`-l`选项之前；链接器命令行中的选项顺序*确实*很重要，*尤其是*对于静态库。该`-L`选项指定要搜索库（静态或共享）的目录。该`-lname`选项指定与`libmine.a`(static) 或`libmine.so`(在大多数 Unix 变体上共享，但 Mac OS X 使用`.dylib`和 HP-UX 使用`.sl`) 的库。按照惯例，静态库将位于文件中`libmine.a`。这是约定，不是强制性的，但是如果名称不在`libmine.a`格式中，则无法使用`-lmine`表示法找到它；您必须在编译器（链接器）命令行上明确列出它。

该`-L./libmine`选项说“有一个名为的子目录`libmine`，可以搜索它以查找库”。我可以看到三种可能性：

1.  您有这样一个包含 的子目录`libmine.a`，在这种情况下，您还需要添加`-lmine`到链接器行（在引用库的目标文件之后）。
2.  您有`libmine`一个静态存档文件，在这种情况下，您只需将其列为前面 `./libmine`没有 no的文件。`-L`
3.  您`libmine.a`在当前目录中有一个要提取的文件。您可以编写`./libmine.a`或`-L . -lmine`两者都应该找到该库。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-05T13:10:52.720

`-L`仅给出找到`.a`或`.so`文件的路径。您正在寻找的是添加`-lmine`到`LIBS`变量中。

使它`-static -lmine`强制它选择静态库（如果静态库和动态库都存在）。

`-L`补充：假设文件的路径已经`libfoo.a`通过`-l:libfoo.a`. 请注意，在这种情况下，名称包括常规的 -`lib`​​ 前缀。您也可以通过这种方式给出完整路径。有时这是将链接器“引导”到正确位置的更好方法。

# javascript - 通过网络浏览器从 URL javascript 读取文件

> ID：11344968
> 
> 赞同：0
> 
> 时间：2012-07-05T13:06:48.987
> 
> 标签：javascript, html

是否可以使用 javascript 读取/下载可以通过互联网在网络上访问的文件？

一个简单的例子是 - 假设我想从这个 URL 下载 JSON 对象结果到一个文件中 - [http://maps.googleapis.com/maps/api/geocode/json?latlng=30.223980,-97.77485000000001&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=30.223980,-97.77485000000001&sensor=false)

我想使用文件打开和读取缓冲区的方法。这个问题的主要原因是我必须访问一个 URL 并使用 javascript 下载一个 wav 文件。我将通过 webview 在 android 中实现这个，所以想把它保存在 javascript 中。我不确定是否可以使用 ajax 或 jquery。

任何帮助都会很有用。

谢谢，斧头

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:22:51.980

`json`如果我没记错的话，你提到的 url 返回一个有效的。在这种情况下，您可以使用[jsonp](http://en.wikipedia.org/wiki/JSONP)通过 ajax 获取跨域数据。jQuery 为您提供了一个 api [jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)或者您可以将[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)与 dataType 一起使用`jsonp`

PS：确保api支持`jsonp`

经过一分钟的搜索，可以确定 google maps json api 不支持`jsonp`但在这种情况下请查看他们的[javascript API](https://developers.google.com/maps/documentation/javascript/services)。也检查[这个](https://stackoverflow.com/questions/5973303/google-maps-api-cant-use-ajax-even-with-json)SO 帖子

# jquery - jQuery.Deferred().done/fail/always/then 的开销？

> ID：11344970
> 
> 赞同：1
> 
> 时间：2012-07-05T13:07:00.023
> 
> 标签：jquery, callback, deferred

我有很多地方想确保`promise`已解决给定的问题，例如：

```
promise = getData();
promise.done(function(data) {
    ...do something to data ...
}); 
```

我可能会收到数千个`done`类似上述的调用，即使在调用时也已经解决了承诺`getData()`。如果我使用这样的延迟回调，开销是多少？

据我所见，`Deferred()`它是基于`jQuery.Callbacks()`内存的，似乎在已解决或被拒绝的承诺上添加处理程序不会将回调添加到任何地方的任何队列，而只是立即调用（或转储）它（取决于结束状态）。但是这样做是最好的做法吗？

# image-processing - 如何使用openCV识别已知区域是否存在签名？

> ID：11344971
> 
> 赞同：-1
> 
> 时间：2012-07-05T13:07:02.237
> 
> 标签：image-processing, pattern-recognition

我有一个可以放置签名的区域。在纸的空白处。

您将如何想出一个想法来识别是否存在签名？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:22:24.807

如果它只是检测是否在该字段中写入了某些内容，您可以使用简单的直方图方法来查看是否有足够的非白色像素来使墨水的存在成为可能。

# iphone - 如何使用 xib 文件更改 UITextView 中的行

> ID：11344973
> 
> 赞同：0
> 
> 时间：2012-07-05T13:07:15.553
> 
> 标签：iphone, objective-c, ipad

我使用 UITextView 来保存一些信息，并且我已经编辑了 .xib 文件中的文本。当前行没有空格时将更改行。问题是我不知道如何在我想换线的时候换线。看下面的图片：

![在此处输入图像描述](../Images/c7f8648ac934dc27563a6aefd328394a.png)

我尝试使用“\n”或“\\n”，但它显示为文本。我想知道如何更改 .xib 文件中的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:12:28.790

这应该工作......

```
textView.text=@"Ankit \r Srivastava"; 
```

这应该给你两个不同行中的单词......

# perl - 在程序逻辑方面需要一些帮助

> ID：11344984
> 
> 赞同：0
> 
> 时间：2012-07-05T13:07:45.470
> 
> 标签：perl, file-find

我正在尝试读取配置文件并丢弃其中列出的具有文件中提到的大小的目录。到目前为止，我有这个-

```
 open FILE, 'C:\reports\config.txt' or die $!;
my $size_req;
my $path;
my $sub_dir;
my $count;

my @lines = <FILE>;   
foreach $_ (@lines) 
{   

    my @line = split /\|/, $_; 

    if ($line[0] eq "size")
    {
        $size_req= $line[1];
        $size_req= ">".$size_req*1024;;

    }

    if ($line[0] eq "path")
    {
        $path= $line[1];

    }

    if ($line[0] eq "directories")
    {   my $aa;
        my $siz_two_digit;
        my $sub_dir;
        my $i;
        my $array_size=@line;
        **for($i=1; $i < $array_size; )**
        { 
        $sub_dir=$line[$i]; 
        print $sub_dir;
        print "\n";
        print $path;
                     print "\n";
        my $r1  =  File::Find::Rule->directory
                           ->name($sub_dir)
                           ->prune          # don't go into it
                           ->discard;       # don't report it

                my $fn  =  File::Find::Rule->file
                                       ->size( $size_req );

                           my @files  =  File::Find::Rule->or( $r1, $fn )
                                             ->in( $path);

                     print @files;
                    undef @files;
                      print @files;
                     $i++;
                     print "\n";
                     print "\n";
        }
    }

} 
```

for 循环的问题在于 - 它很好地存储了要从数组中丢弃的所有子目录。但是，当它读取要丢弃的第一个目录的名称时，它不知道剩余的子目录并列出它们。当它到达第二个值时，它会忽略前一个值并列出它。

有谁知道 File|::Find::Rule 是否一次采用一个数组，以便代码一次考虑配置文件中的整行？或任何其他逻辑？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:58:33.127

这段代码不符合你的想法：

```
my $r1  =  File::Find::Rule->directory
                   ->name($sub_dir)
                   ->prune          # don't go into it
                   ->discard;       # don't report it 
```

您正在尝试将规则存储在标量中，但实际上您正在调用 Find::File::Rule 并将结果列表转换为整数（列表中的元素数）并将其存储在 $r1 中。

只需将整个调用放在 @files 调用中即可。它可能看起来很乱，但它会工作得更好。

# php - 在没有提示的情况下将新行或返回添加到文本文件

> ID：11344985
> 
> 赞同：0
> 
> 时间：2012-07-05T13:07:48.320
> 
> 标签：php

首先，我是 PHP 的菜鸟，但这是我的问题。我正在尝试从文本文件中读取一行，操作该行，然后将原始行和新行写入一个新的文本文件。由于某种原因，它在输出文件中添加了额外的返回或新行。

**原始文件文本**

```
/Volumes/EC/EC_0101/B-W Art/001_0101.EPS
...
/Volumes/EC/EC_0101/B-W Art/010_0101.EPS 
```

**用于测试的 HTML 输出**

```
EC:EC_0101:B-W Art:001_0101.EPS EC EC_0101 B-W Art 001_0101.EPS
...
EC:EC_0101:B-W Art:010_0101.EPS EC EC_0101 B-W Art 010_0101.EPS 
```

**新文本文件输出**

```
EC:EC_0101:B-W Art:001_0101.EPS
    EC  EC_0101 B-W Art 001_0101.EPS
...
EC:EC_0101:B-W Art:010_0101.EPS
    EC  EC_0101 B-W Art 010_0101.EPS 
```

**应该是制表符分隔的**

```
EC:EC_0101:B-W Art:001_0101.EPS EC  EC_0101 B-W Art 001_0101.EPS
...
EC:EC_0101:B-W Art:010_0101.EPS EC  EC_0101 B-W Art 010_0101.EPS 
```

**我的代码**

```
$file = fopen("files_list.txt", "r") or exit("Unable to open file!");
$filename = "files_list_tab.txt";
//Output a line of the file until the end is reached
while(!feof($file))
  {
  $strLink = fgets($file);
  //$strComment = $strLink;

  $strLink= str_replace("/",":",$strLink);
  $strLink= str_replace(":Volumes:","",$strLink);
  $strComment= str_replace(":","\t",$strLink);

  $strCombined = $strLink."\t".$strComment;
  $array[] = $strCombined;

  echo $strCombined. "<br>";

  }
fclose($file);

echo "Done <br>";

$strCombined = $array;
file_put_contents($filename, $strCombined);
echo "Done <br>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:13:17.713

嗯，是的，它在原始文件中。

假设：

```
// fgets() returns this
strLink = "/Volumes/EC/EC_0101/B-W Art/001_0101.EPS\n"

// then it becomes this
strLink = "EC:EC_0101:B-W Art:001_0101.EPS\n"
strComment = "EC\tEC_0101\tB-W Art\t001_0101.EPS\n"

// later you do this
strCombined = strLink + "\t" + strComment 
```

由于 strLink 和 strComment 都以原始结尾`\n`，所以它也在那里`strCombined`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:13:29.100

[`fgets`](http://php.net/manual/en/function.fgets.php)文件内容如下：

> 读取在长度 - 1 个字节已被读取、换行符（包含在返回值中）或 EOF（以先到者为准）时结束。如果没有指定长度，它将继续从流中读取，直到到达行尾。

您可以`$strLink = trim(fgets($file));`在处理之前使用删除换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:15:17.133

尝试：

```
...     
$strCombined = trim($strLink)."\t".$strComment;
... 
```

# c# - C# 中的 VC++ __stdcall 回调

> ID：11344987
> 
> 赞同：4
> 
> 时间：2012-07-05T13:07:52.237
> 
> 标签：c#, c++, callback, dllimport

我正在开发一个需要调用 C++ dll 的 C# gui 应用程序。似乎所有的电话都在工作，除了一个特别的电话。从 C++ 头文件中，函数和回调签名如下：

```
typedef void (__stdcall *LPFNDLL_RECEIVE_CALLBACK)(CANMsg*);

USBCANPLUS_API
CAN_STATUS __stdcall canplus_setReceiveCallBack(
    CANHANDLE handle,
    LPFNDLL_RECEIVE_CALLBACK cbfn
); 
```

根据读数，我已经设置和内部类包装调用，如下所示：

```
[DllImport("USBCanPlusDllF.dll")]
public static extern int canplus_setReceiveCallBack(int handle, CallbackDelegate callback);

[UnmanagedFunctionPointerAttribute(CallingConvention.StdCall)]
public delegate void CallbackDelegate(ref CANMsg msg); 
```

并用作：

```
 private static void callback(ref EASYSYNC.CANMsg msg)
    {
        Debug.Print(msg.id + ":" + msg.timestamp + ":" + msg.flags + ":" + msg.len + ":" + msg.data);
    }

    static EASYSYNC.CallbackDelegate del = new EASYSYNC.CallbackDelegate(callback);

    private void button1_Click(object sender, EventArgs e)
    {
        int handle = EASYSYNC.canplus_Open(IntPtr.Zero, "1000", IntPtr.Zero, IntPtr.Zero, 0);

        if(handle > 0)
        {
            int result = EASYSYNC.canplus_setReceiveCallBack(handle, del);
        }
    } 
```

我知道在 C# 中处理 C++ 回调很棘手，并且已经阅读了一些关于该主题的内容，因此我有上面的代码。我的问题是我的代码遇到了 int result = .... 行整个程序出去吃午饭，这表明我在处理回调时可能仍然做错了什么。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:19:58.200

我对此有点不确定，但是您已将委托的调用约定指定为 StdCall（这一定是因为 C/C++ 代码是这样说的）但是您没有为 canplus_setReceiveCallBack() dllimport 函数声明执行此操作，确实当您执行以下操作时，它会起作用：

```
[DllImport("USBCanPlusDllF.dll", CallingConvention=CallingConvention.StdCall)]
public static extern int canplus_setReceiveCallBack(int handle, CallbackDelegate callback); 
```

正如我所说，我不确定，但这可能是问题所在。

# xcode - xcode git pull/push 崩溃

> ID：11344988
> 
> 赞同：5
> 
> 时间：2012-07-05T13:07:52.697
> 
> 标签：xcode, git, github

在选择文件 -> 源代码管理 -> 拉取或推送 xCode 时使用 xCode IDE 时会崩溃。到目前为止找到的唯一解决方法是加载管理器并选择每个存储库并单击拉取，然后当存储库名称显示时取消对话框。在为每个存储库重复此操作后，正常的推/拉选项工作正常，直到重新启动 Xcode，然后必须重复该过程。

这在我们办公室的所有机器 (4) 上都发生了相同的情况。存储库位于 github 上，每个项目都加载了多个存储库。

我们已经使用了一段时间的工作，但是随着我们获得更多的存储库，这变得更加烦人。欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:02:42.883

我在使用 Xcode 4.3 时遇到了同样的问题，所以我一直在使用 Xcode 4.4 和 4.5 进行开发（我还没有关闭交付，所以我不能使用这些版本提交我的应用程序并不重要）。

另一种方法是使用外部源代码控制工具；我会推荐[SourceTree](http://blog.sourcetreeapp.com/)，因为它是免费的并且运行良好。除此之外，总是有命令行。

# nhibernate - 如何使用 NHibernate CreateCriteria 选择一张表

> ID：11344990
> 
> 赞同：0
> 
> 时间：2012-07-05T13:07:53.120
> 
> 标签：nhibernate, left-join, createquery

如何使用 CreateCriteria 在 Nhibernate 中创建以下 SQL 语句：

`SELECT distinct top 20 a.* from ActivityLog a left join WallPost w on a.ActivityLogId = w.ActivityLogId left join ItemStatus i on i.StatusId = w.ItemStatus`

我总是倾向于从 sql 语句中返回的所有表中获取所有列，即使我将其映射到 ActivityLog 表，也会产生重复项。我也在进行分页，如下面的代码所示：

`ICriteria crit = nhelper.NHibernateSession.CreateCriteria(typeof(Model.ActivityLog), "a").CreateAlias("a.WallPosts", "w",CriteriaSpecification.LeftJoin) .CreateAlias("w.ItemStatus", "i", CriteriaSpecification.LeftJoin) .SetMaxResults(pageSize).SetFirstResult(startRow).AddOrder(Order.Desc("a.Date"));`

谢谢

H

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:21:23.707

听起来您在映射文件中将延迟加载设置为 false，这意味着所有关联和子集合也正在加载。你能证实吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:23:56.913

您问“如何使用 NHibernate **CreateQuery**选择一个表”（HQL）。在这种情况下，您可以使用 select 选择要获取的内容。

在您的文本中，您使用的是标准。AFAIK，您无法直接控制要阅读的列。但是，如果您为联接创建 DetachedCriteria，则不会获取该值。

# php - 如何查找由 MySQL groupby 查询分组的值的数量

> ID：11344995
> 
> 赞同：0
> 
> 时间：2012-07-05T13:08:16.203
> 
> 标签：php, mysql

是否有任何解决方案来查找由 MySQL groupby 查询分组的值的数量。以下是我的查询。 `$groupBy = 'PropertyViewer.ip_address';` `$this->paginate = array("group"=>array($groupBy),"order"=>array("PropertyViewer.id desc"));`

我需要找到在每种情况下分组的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:10:47.267

我认为您需要的只是`COUNT()`SELECT 查询中的聚合函数：

```
SELECT COUNT( ip_address) as num_values
     FROM PropertyViewer
GROUP BY PropertyViewer.ip_address
ORDER BY PropertyViewer.id desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:10:48.760

SELECT count(PropertyViewer.ip_address) 将显示 IP 地址出现的次数（如果这是您要查找的内容）。