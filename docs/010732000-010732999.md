# StackOverflow 问答 10732000-10732999

# objective-c - DEBUG 宏在哪里定义？

> ID：10732003
> 
> 赞同：10
> 
> 时间：2012-05-24T06:06:25.540
> 
> 标签：objective-c, macros, c-preprocessor

当我运行如下代码时：

```
- (void)viewDidLoad
{

#ifdef DEBUG
    NSLog(@"debug");
#else
    NSLog(@"here");
#endif
    [super viewDidLoad];
} 
```

我在日志中看到“调试”，但我没有`DEBUG`明确定义。它在哪里定义？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-24T06:21:36.777

它很可能在预处理器宏下的构建设置中定义。

这是我的一个项目的一个例子 ![这是我的一个项目的一个例子](../Images/b40ef8fa16f7b87b060f69bd6aa4f647.png)

# r - 错误 inmatrix ：非数字矩阵范围

> ID：10732007
> 
> 赞同：3
> 
> 时间：2012-05-24T06:06:37.880
> 
> 标签：r, matrix, bioconductor

我试图使用 Biobase 包在 R 中运行 GSA（基因集富集分析）函数：Expression Set。我使用 resp.type 是“未配对的两个类”。但是当我运行该函数时：

```
gsa <- GSA(x=exprs(Eset), genesets=genesets, genenames=genenames, y = as.integer(factor), resp.type= "Two class unpaired", minsize=2,maxsize=500,nperms=500) 
```

它给了我一个错误说：

```
Error in matrix(1, nrow = n, ncol = 1) : non-numeric matrix extent 
```

我不知道这个错误是什么意思。我做到了`mode(exprs(eset))`，它给了我“数字”

谁能告诉我如何摆脱这个问题？

# c - 格式“%s”需要“char *”类型的参数

> ID：10732010
> 
> 赞同：14
> 
> 时间：2012-05-24T06:06:59.733
> 
> 标签：c

```
#include <stdio.h>
int main(void)
{
    int i,j,k;
    char st;
    printf("enter string\n");
    scanf("%s", st);
    printf("the entered string is %s\n", st);
} 
```

编译上面的程序给了我一个警告：

```
warning: format '%s' expects argument of type 'char *', but argument 2 has type 'int' [-Wformat]
palindrom.c:8:1: warning: format '%s' expects argument of type 'char *', but argument 2 has type 'int' [-Wformat] 
```

我在这里做错了什么？

这是我运行它时发生的情况：

```
$ ./a.out
enter string
kiaaa
the entered string is (null) 
```

**编辑：**

这是代码的另一个版本（制成`char st;`）`char *st`：

```
#include <stdio.h>
int main(void)
{
    int i,j,k;
    char *st;
    printf("enter string\n");
    scanf("%s", st);
    printf("the entered string is %s\n", st);
} 
```

但是，它在运行时的行为相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T06:08:28.093

`char st`是单个字符。从您的其余代码来看，您可能打算声明一个字符数组：

```
char st[80]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:08:27.363

你有一个类型不匹配。
`scanf`不是类型安全的，您需要提供正确的类型。`scanf`使您能够从输入中获取数据，并且您需要告诉它您希望它读取的数据类型是什么。`%s`你要求它通过提供一个字符变量 来指定它来读取一个字符串。

你需要一个数组：

```
#define MAX_LENGTH 256
char st[MAX_LENGTH]; 
```

正如@Jerry 正确指出的那样，您可以通过使用简单地避免所有麻烦：
**getline()**而不是使用`scanf`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T06:13:05.427

`scanf`需要一个指针来`char*`指示您正在扫描字符串。

您正在提供在堆栈上分配的字符。

您要么想使用 a`getchar()`要么制作`st`一个 char 数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T06:09:04.233

使用`char *st;`或类似的数组`char st[50];`。

当你完成一个 char 指针的使用后，你应该释放指针使用的内存。这可以使用`free(st);`函数来完成。

编辑：当您打印字符串并且使用指针时，您可以执行以下操作：

```
printf("the entered string is %s\n",st);
printf("the entered string is %s\n",*st); // This will work in both cases, if you use char *st or char st[50] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T06:11:37.627

st 是 char 的类型 &st 是 char 的类型 * 注意区别。顺便说一句，只有一个字符不能用于存储字符串。使用 char[] 数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T06:21:32.583

正如其他人提到的那样，您想要创建一个数组：

更改`char st;`为`char st[10];`您想要的任何大小的数组。

进行上述更改`st`的是一个数组，它有 10 个单独的元素，可以保存一个 char 值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-24T07:57:30.147

char st 是一个字符，即它只会存储一个字符 像这样尝试它 `main() char st [100]; scanf("%s",st);` 只需更改这三行，它将起作用，除了这里只有单个单词字符串您已将函数声明为 int，即 int main() 保持它为main() 它将工作

# javascript - AJAX 检索 xml 响应

> ID：10732013
> 
> 赞同：1
> 
> 时间：2012-05-24T06:07:12.837
> 
> 标签：javascript, xml, ajax

我有 2 个 .jsp 页面。

```
The 1\. one contains just a xml structure for applicants:

<% response.setContentType("text/xml") ; %>

    <applicant>
     <citizenship>GERMANY</citizenship>
     <residence>Inc.</residence>
     <street>9500 Gilman Drive</street>
     <city>La Jolla</city>
     <state>USA</state>
     <countryTelCode>Vandelay Industries</countryTelCode>
     <zipCode>Inc.</zipCode>
     <areaCode>9500 Gilman Drive</areaCode>
     <telNumber>La Jolla</telNumber>
     <major>USA</major>
     <awarded>Vandelay Industries</awardeds>
     <gpa>Inc.</gpa>
     <specialization>9500 Gilman Drive</specialization>
    </applicant> 
```

第二个尝试从标签中检索 GERMANY 并将其打印在“...”字段中：

`<span id="Citizenship">...</span>`

在调用 showCustomer() 后使用此代码：

```
<script type="text/javascript">
    function showCustomer() {
        var xmlHttp;

        xmlHttp = new XMLHttpRequest();
        if (xmlHttp == null) {
            alert("Your browser does not support AJAX!");
            return;
        }
        var url = "getApplicant_xml.jsp";

        xmlHttp.onreadystatechange = function() {
            if (xmlHttp.readyState == 4) {
                var xmlDoc = xmlHttp.responseXML.documentElement;
                document.getElementById("Citizenship").innerHTML = xmlDoc.getElementsByTagName("citizenship")[0].childNodes[0].nodeValue;

            }

        }
        xmlHttp.open("GET", url, true);

        xmlHttp.send(null);
    }
    }
</script> 
```

不幸的是它没有打印任何东西......如果有人发现我的错误，我将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:45:38.643

您的问题是 xmlHttp.responseXML 为空。您需要从 xmlHttp.responseText 解析一个新的 DOM 对象。我修复了代码。

```
<script type="text/javascript">
function showCustomer() {
    var xmlHttp;
    xmlHttp = new XMLHttpRequest();
    if (xmlHttp == null) {
        alert("Your browser does not support AJAX!");
        return;
    }
    var url = "getApplicant_xml.jsp";
    xmlHttp.onreadystatechange = function() {
        if (xmlHttp.readyState == 4) {
            var xmlDoc = xmlHttp.responseText;
            xmldom = (new DOMParser()).parseFromString(xmlDoc, 'text/xml');
            text = xmldom.getElementsByTagName("citizenship")[0];
            document.getElementById("Citizenship").innerHTML = text.childNodes[0].nodeValue;
        }
    };
    xmlHttp.open("GET", url, true);

    xmlHttp.send(null);
};
</script> 
```

# ruby - 在缓存中找不到元素 - 也许页面在 Selenium Ruby Web 驱动程序中查找后已更改？

> ID：10732015
> 
> 赞同：2
> 
> 时间：2012-05-24T06:07:26.760
> 
> 标签：ruby, selenium, webdriver, web-crawler, traffic

我正在尝试编写一个爬虫，它从加载的页面中爬取所有链接，并将所有请求和响应标头以及响应正文记录在某个文件中，例如 XML 或 txt。我正在新浏览器窗口中打开第一个加载页面的所有链接，所以我不会收到此错误：

```
Element not found in the cache - perhaps the page has changed since it was looked up 
```

我想知道从所有链接发出请求和接收响应然后定位输入元素并从所有打开的窗口提交按钮的替代方法是什么。我可以在一定程度上做到这一点，除非打开的窗口在右上角有一个常见的站点搜索框，比如这个[http://www.testfire.net上的一个。](http://www.testfire.net)我想要做的是我想省略这样的常见框，以便我可以使用`i.send_keys "value"`webdriver 的方法用值填充其他输入并且不会收到此错误错误：在缓存中找不到元素 - 可能页面在查找后已更改.

从每个打开的窗口中检测和区分输入标签的方法是什么，以便在网站大多数页面上出现的常见输入标签中不会重复填充值。我的代码如下：

```
require 'rubygems'
require 'selenium-webdriver'
require 'timeout'

class Clicker
def open_new_window(url)
  @driver = Selenium::WebDriver.for :firefox
  @url = @driver.get " http://test.acunetix.com "
  @link = Array.new(@driver.find_elements(:tag_name, "a"))
  @windows = Array.new(@driver.window_handles())
  @link.each do |a|
      a = @driver.execute_script("var d=document,a=d.createElement('a');a.target='_blank';a.href=arguments[0];a.innerHTML='.';d.body.appendChild(a);return a", a)
      a.click
    end
    i = @driver.window_handles
    i[0..i.length].each do |handle|
        @driver.switch_to().window(handle)
        puts @driver.current_url()
        inputs = Array.new(@driver.find_elements(:tag_name, 'input'))
        forms = Array.new(@driver.find_elements(:tag_name, 'form'))
        inputs.each do |i|
            begin
                i.send_keys "value"
                puts i.class
                i.submit
                rescue Timeout::Error => exc
                    puts "ERROR: #{exc.message}"
                rescue Errno::ETIMEDOUT => exc
                    puts "ERROR: #{exc.message}"
                rescue Exception => exc
                    puts "ERROR: #{exc.message}"
            end
        end 
        forms.each do |j|
            begin
                j.send_keys "value"
                j.submit
                rescue Timeout::Error => exc
                    puts "ERROR: #{exc.message}"
                rescue Errno::ETIMEDOUT => exc
                    puts "ERROR: #{exc.message}"
                rescue Exception => exc
                    puts "ERROR: #{exc.message}"
            end
        end

    end
#Switch back to the original window
    @driver.switch_to().window(i[0])
end
end
ol = Clicker.new
url = ""
ol.open_new_window(url) 
```

指导我如何使用 Selenium Webdriver 或使用`http.set_debug_output`ruby​​ 获取所有带有响应正文的requeat 和响应标头`net/http`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:11:32.610

Selenium 不是尝试构建“网络爬虫”的最佳选择之一。有时它可能太不稳定了，尤其是在遇到意想不到的情况时。Selenium WebDriver 是一个很好的工具，用于自动化和测试期望值和用户交互。相反，好的老式 curl 可能是网络爬行的更好选择。另外，我很确定有一些红宝石可以帮助您进行网络爬网，只需谷歌搜索即可！

但是，如果您要使用 Selenium WebDriver，要回答实际问题：

我会制定一个过滤算法，您可以将与之交互的元素的 HTML 添加到变量数组中。然后，当您继续下一个窗口/选项卡/链接时，它会检查变量数组并在找到匹配的 HTML 值时跳过该元素。

不幸的是，SWD 不支持通过其 API 获取请求标头和响应。常见的解决方法是使用第三方代理来拦截请求。

=============

现在我想解决您的代码的一些问题。

我建议在迭代链接之前，添加一个`@default_current_window = @driver.window_handle`. 这将允许您在调用`@driver.switch_to.window(@default_current_window)`.

在您的 @links 迭代器中，不要迭代所有可能显示的窗口，而是使用`@driver.switch_to.window(@driver.window_handles.last)`. 这将切换到最近显示的新窗口（每次链接点击只需发生一次！）。

您可以通过执行以下操作来干燥您的输入并形成代码：

```
inputs = []
inputs << @driver.find_elements(:tag_name => "input")
inputs << @driver.find_elements(:tag_name => "form")
inputs.flatten
inputs.each do |i|
  begin
    i.send_keys "value"
    i.submit
  rescue e
    puts "ERROR: #{e.message}"
  end
end 
```

请注意我刚刚如何将您希望 SWD 查找的所有元素添加到您迭代的单个数组变量中。然后，当发生不好的事情时，需要一次救援（我假设您不想从那里自动退出，这就是为什么您只想将消息打印到屏幕上）。

学习干掉你的代码并使用外部 gem 将帮助你以更快的速度完成很多你想做的事情。

# cakephp - 贝宝中的 notify_url 失败

> ID：10732017
> 
> 赞同：0
> 
> 时间：2012-05-24T06:07:44.537
> 
> 标签：cakephp, paypal, paypal-ipn

我在我的沙盒贝宝中检查了 IPN 历史记录，我发现它没有成功通知我的 notify_url。可能是什么原因？也许我没有正确指定操作“进程”所在的 IPN 控制器的位置。请帮忙。

```
'notify_url' => 'http://203.215.93.156/wifidrivescanportal/PaypalIpn/process' 
//'http://www.yoursite.com/paypal_ipn/process' 
//Notify_url... set this to the process path of your paypal_ipn::instant_payment_notification::process action 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:34:09.053

您的网络服务器或 IP 是否可以从外部访问？

检查您的防火墙和 NAT（如果使用）是否配置正确。

记录您的 process() 控制器操作中是否收到任何内容并检查日志文件。

# algorithm - 快速 sigmoid 算法

> ID：10732027
> 
> 赞同：37
> 
> 时间：2012-05-24T06:08:29.000
> 
> 标签：algorithm, neural-network

sigmoid 函数定义为

[![在此处输入图像描述](../Images/2765ba41db2341349a45c486dc0412e4.png)](https://i.stack.imgur.com/UxaaD.png)

我发现使用 C 内置函数`exp()`计算 的值`f(x)`很慢。有没有更快的算法来计算 的值`f(x)`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-24T08:33:53.560

您不必在神经网络算法中使用实际的、精确的 sigmoid 函数，但可以将其替换为具有相似属性但计算速度更快的近似版本。

例如，您可以使用“快速 sigmoid”功能

```
 f(x) = x / (1 + abs(x)) 
```

如果 f(x) 的参数不接近于零，则对 exp(x) 使用级数展开的第一项不会有太大帮助，如果参数是 "大的”。

另一种方法是使用表查找。也就是说，您为给定数量的数据点预先计算 sigmoid 函数的值，然后根据需要在它们之间进行快速（线性）插值。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-29T13:13:31.480

最好先在硬件上进行测量。只是一个快速的基准[脚本](https://gist.github.com/astanin/5270668)显示，在我的机器`1/(1+|x|)`上是最快的，并且`tanh(x)`是紧随其后的。错误功能`erf`也很快。

```
% gcc -Wall -O2 -lm -o sigmoid-bench{,.c} -std=c99 && ./sigmoid-bench
atan(pi*x/2)*2/pi   24.1 ns
atan(x)             23.0 ns
1/(1+exp(-x))       20.4 ns
1/sqrt(1+x^2)       13.4 ns
erf(sqrt(pi)*x/2)    6.7 ns
tanh(x)              5.5 ns
x/(1+|x|)            5.5 ns 
```

我预计结果可能会因体系结构和使用的编译器而异，但是`erf(x)`（自 C99 起），`tanh(x)`并且`x/(1.0+fabs(x))`可能是执行速度最快的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-08-14T04:51:08.550

这里的人们最关心的是一个函数相对于另一个函数有多快，并创建微基准来查看是否`f1(x)`比`f2(x)`. 最大的问题是，这几乎是无关紧要的，因为重要的是你的网络用你的激活函数学习的速度有多快，试图最小化你的成本函数。

按照目前的理论，[整流功能和softplus](https://en.wikipedia.org/wiki/Rectifier_(neural_networks)) [![在此处输入图像描述](../Images/ed527cbaf1ef9be8fa3b1052a4b73706.png)](https://i.stack.imgur.com/e43lG.png)

> 与 sigmoid 函数或类似的激活函数相比，它允许在大型复杂数据集上更快、更有效地训练深度神经架构。

所以我建议扔掉微优化，看看哪个函数可以更快地学习（也看看其他各种成本函数）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-27T11:24:37.187

为了使 NN 更灵活，通常使用一些 alpha 率来将图形的角度更改为 0 左右。

sigmoid 函数如下所示：

```
f(x) = 1 / ( 1+exp(-x*alpha)) 
```

几乎等效的（但更快的功能）是：

```
f(x) = 0.5 * (x * alpha / (1 + abs(x*alpha))) + 0.5 
```

[您可以在此处](http://www.meta-calculator.com/online/)查看图表

当我使用 abs 功能时，网络变得更快 100 倍以上。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-07-03T01:47:22.257

这个答案可能与大多数情况无关，但只是想把我发现对于 CUDA 计算`x/sqrt(1+x^2)`是迄今为止最快的功能扔在那里。

例如，使用单精度浮点内在函数完成：

```
__device__ void fooCudaKernel(/* some arguments */) {
    float foo, sigmoid;
    // some code defining foo
    sigmoid = __fmul_rz(rsqrtf(__fmaf_rz(foo,foo,1)),foo);
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-12-24T06:52:10.013

您也可以使用粗略版本的 sigmoid（与原始版本的差异不大于 0.2%）：

```
 inline float RoughSigmoid(float value)
    {
        float x = ::abs(value);
        float x2 = x*x;
        float e = 1.0f + x + x2*0.555f + x2*x2*0.143f;
        return 1.0f / (1.0f + (value > 0 ? 1.0f / e : e));
    }

    void RoughSigmoid(const float * src, size_t size, const float * slope, float * dst)
    {
        float s = slope[0];
        for (size_t i = 0; i < size; ++i)
            dst[i] = RoughSigmoid(src[i] * s);
    } 
```

使用 SSE 优化 RoughSigmoid 函数：

```
 #include <xmmintrin.h>

    void RoughSigmoid(const float * src, size_t size, const float * slope, float * dst)
    {
        size_t alignedSize =  size/4*4;
        __m128 _slope = _mm_set1_ps(*slope);
        __m128 _0 = _mm_set1_ps(-0.0f);
        __m128 _1 = _mm_set1_ps(1.0f);
        __m128 _0555 = _mm_set1_ps(0.555f);
        __m128 _0143 = _mm_set1_ps(0.143f);
        size_t i = 0;
        for (; i < alignedSize; i += 4)
        {
            __m128 _src = _mm_loadu_ps(src + i);
            __m128 x = _mm_andnot_ps(_0, _mm_mul_ps(_src, _slope));
            __m128 x2 = _mm_mul_ps(x, x);
            __m128 x4 = _mm_mul_ps(x2, x2);
            __m128 series = _mm_add_ps(_mm_add_ps(_1, x), _mm_add_ps(_mm_mul_ps(x2, _0555), _mm_mul_ps(x4, _0143)));
            __m128 mask = _mm_cmpgt_ps(_src, _0);
            __m128 exp = _mm_or_ps(_mm_and_ps(_mm_rcp_ps(series), mask), _mm_andnot_ps(mask, series));
            __m128 sigmoid = _mm_rcp_ps(_mm_add_ps(_1, exp));
            _mm_storeu_ps(dst + i, sigmoid);
        }
        for (; i < size; ++i)
            dst[i] = RoughSigmoid(src[i] * slope[0]);
    } 
```

使用 AVX 优化 RoughSigmoid 函数：

```
 #include <immintrin.h>

    void RoughSigmoid(const float * src, size_t size, const float * slope, float * dst)
    {
        size_t alignedSize = size/8*8;
        __m256 _slope = _mm256_set1_ps(*slope);
        __m256 _0 = _mm256_set1_ps(-0.0f);
        __m256 _1 = _mm256_set1_ps(1.0f);
        __m256 _0555 = _mm256_set1_ps(0.555f);
        __m256 _0143 = _mm256_set1_ps(0.143f);
        size_t i = 0;
        for (; i < alignedSize; i += 8)
        {
            __m256 _src = _mm256_loadu_ps(src + i);
            __m256 x = _mm256_andnot_ps(_0, _mm256_mul_ps(_src, _slope));
            __m256 x2 = _mm256_mul_ps(x, x);
            __m256 x4 = _mm256_mul_ps(x2, x2);
            __m256 series = _mm256_add_ps(_mm256_add_ps(_1, x), _mm256_add_ps(_mm256_mul_ps(x2, _0555), _mm256_mul_ps(x4, _0143)));
            __m256 mask = _mm256_cmp_ps(_src, _0, _CMP_GT_OS);
            __m256 exp = _mm256_or_ps(_mm256_and_ps(_mm256_rcp_ps(series), mask), _mm256_andnot_ps(mask, series));
            __m256 sigmoid = _mm256_rcp_ps(_mm256_add_ps(_1, exp));
            _mm256_storeu_ps(dst + i, sigmoid);
        }
        for (; i < size; ++i)
            dst[i] = RoughSigmoid(src[i] * slope[0]);
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-25T16:53:15.023

您可以使用两个公式来使用简单但有效的方法：

```
if x < 0 then f(x) = 1 / (0.5/(1+(x^2)))
if x > 0 then f(x) = 1 / (-0.5/(1+(x^2)))+1 
```

这将如下所示：

[sigmoid 的两个图 {蓝色：(0.5/(1+(x^2)))，黄色：(-0.5/(1+(x^2)))+1}](https://i.stack.imgur.com/iul9n.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-22T08:02:11.173

使用 Eureqa 搜索 sigmoid 的近似值，我发现`1/(1 + 0.3678749025^x)`它是近似的。它非常接近，只需用 x 的否定来摆脱一个操作。

这里展示的其他一些功能很有趣，但是电源操作真的那么慢吗？我测试了它，它实际上比加法更快，但这可能只是侥幸。如果是这样，它应该和其他所有的一样快或更快。

编辑：`0.5 + 0.5*tanh(0.5*x)`不太准确，`0.5 + 0.5*tanh(n)`也有效。如果您不关心在范围 [0,1] 之间（如 sigmoid），您可以摆脱常量。但它假设 tanh 更快。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-07T07:16:23.207

tanh 函数可以在某些语言中进行优化，使其比自定义定义的 x/(1+abs(x)) 更快，例如 Julia。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-26T08:05:46.507

你也可以使用这个：

```
 y=x / (2 * ((x<0.0)*-x+(x>=0.0)*x) + 2) + 0.5;
    y'=y(1-y); 
```

现在像 sigmoid 一样，因为 y(1-y)=y' 比 1/(2 (1 + abs(x))^2) 更像是快速 sigmoid；

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-08T22:59:53.967

试试这个 .NET Core 5+ 实现

```
 [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static unsafe float FastSigmoid(float v)
    {
        const float c1 = 0.03138777F;
        const float c2 = 0.276281267F;
        const float c_log2f = 1.442695022F;
        v *= c_log2f;
        int intPart = (int)v;
        float x = (v - intPart);
        float xx = x * x;
        float v1 = c_log2f + c2 * xx;
        float v2 = x + xx * c1 * x;
        float v3 = (v2 + v1);
        *((int*)&v3) += intPart << 24;
        float v4 = v2 - v1;
        float res = v3 / (v3 - v4); //for tanh change to (v3 + v4)/ (v3 - v4)
        return res;
    } 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-05-24T06:31:01.360

我认为你不能比内置的 exp() 做得更好，但如果你想要另一种方法，你可以使用系列扩展。[WolframAlpha](http://www.wolframalpha.com/input/?i=%20series%201%20/%20%281%20%2b%20e%20%5E%20%28-x%29%29%20at%20x=1)可以为您计算它。

# asp-classic - 经典asp中的导入/导出

> ID：10732029
> 
> 赞同：0
> 
> 时间：2012-05-24T06:08:38.827
> 
> 标签：asp-classic

我想在经典 asp 中从 MS EXCEL 导入/导出数据。我已经完成了那部分。但我的问题是当我们从 MS EXCEL 导入和导出数据时，我们需要在服务器上安装 MS-OFFICE。但是我的客户不想在服务器上安装 MS-OFFICE。那么有没有在服务器上安装 MS-OFFICE 的情况下从 Excel 导入/导出。

提前致谢

感谢和问候果冻

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:04:13.233

在过去，我已经多次这样做了；-) 不幸的是，无法这么快找到代码。我发现这个例子要导入：

```
<%
Set ExcelConn = Server.CreateObject("ADODB.Connection")
Set ExcelRS = Server.CreateObject("ADODB.Recordset")
ExcelConn.Provider = "Microsoft.Jet.OLEDB.4.0"
ExcelConn.Properties("Extended Properties").Value = "Excel 8.0"
ExcelConn.Open "C:\Sample\Sample.xls"

'get data from sheet
sSQL = "SELECT * FROM Sample$"
set ExcelRS = ExcelConn.Execute(sSQL)

'loop through each record in Excel and write it to access
'might be slow, but will work

Do until ExcelRS.EOF 
myConn.Execute("INSERT INTO Sample_tbl(lname,fname,mi) VALUES ('" & ExcelRS("0") & "', '" & ExcelRS("1") & "','" & ExcelRS("2") & "')")

ExcelRS.MoveNext
Loop

ExcelRS.Close
set ExcelRS = NOTHING
objExcelConn.Close
set ExcelConn = NOTHING
objConnAccess.close
set objConnAccess = NOTHING
%> 
```

还有这个用于导出的小片段，几乎可以归结为添加正确的内容类型标题：

```
<%@ Language=VBScript %>
<%  Option Explicit

Response.ContentType = "application/vnd.ms-excel"
Response.AddHeader "Content-Disposition", "attachment; filename=sample.xls"
%>
<table>
    <tr>
        <td>Sample</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:35:00.903

我自己没有做过，但我不明白为什么不这样做。

您可以使用 MS Jet 数据库引擎，它可能已经在您的服务器上 [https://stackoverflow.com/a/16051/882436](https://stackoverflow.com/a/16051/882436)

或者，您可以使用此组件： [http ://exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)

并通过 COM 互操作使其工作（因此您可以在经典 ASP 中使用它），如下所示：http: [//msdn.microsoft.com/en-us/library/zsfww439 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/zsfww439(v=vs.71).aspx)

高温高压

# mysql - 连接到 mySQL 的随机错误

> ID：10732032
> 
> 赞同：1
> 
> 时间：2012-05-24T06:08:58.123
> 
> 标签：mysql, database, connection

我在 asp.net 中有一个带有 mySQL 数据库的应用程序。
当许多客户端同时使用该应用程序时，开始出现 mysql 错误：

```
ERROR [HY000] [MySQL][ODBC 5.1 Driver]Can't connect to MySQL server on (myip) 
```

错误总是出现在如下行中：

```
conn.open()` OR `cmd.fill(ds,"mytable") 
```

我已经使用 Jet Profiler 工具检查了连接数，并且打开的连接数没有超过允许的数量。
发生错误时，在 Jet Profiler 工具中似乎一切正常。

我正在使用连接池

什么可能导致这个随机错误？

# algorithm - 对数是如何编程的？

> ID：10732034
> 
> 赞同：12
> 
> 时间：2012-05-24T06:09:02.063
> 
> 标签：algorithm, math, parallel-processing, logarithm, cpu-speed

他们只是使用与线性搜索相同的机制找出来，还是以某种方式缩小范围，类似于二进制搜索。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-24T12:03:25.010

在任何体面的数学库中实现诸如自然对数之类的函数将使误差保持在 ulp（最低精度单位）以下。数学库函数的实现者的目标是找到一些最佳近似值，以尽可能少的计算达到所需的精度。泰勒级数通常是一个糟糕的选择，因为需要太多项才能达到所需的精度。

选择的典型武器是将所有可表示实数的范围缩小到某个非常小的区域，然后使用一些最佳近似值，在这个狭窄范围内产生所需函数的精确近似值。这种最佳近似选择的典型武器是多项式或有理多项式（两个多项式的比率）。该实现仅包含多项式系数。这些系数是通过一些优化技术构建的，例如 Remes Exchange 算法。

在自然对数的情况下，有一种简单的方法可以减小范围。实数几乎普遍用尾数和指数表示：*x* = *m* *2 ^p，其中*p*是整数，*m*介于 1 和 2 之间。因此 log( *x* ) = log( *m* )+ *p* *log( 2）。后一项，*p**log(2) 只是乘以已知常数。因此，问题归结为找到 1 和 2 之间（或 1/2 和 1 之间）数字的对数。通过使用 √2 在 [1,2) 的中间对数，可以进一步缩小范围。因此，所需要的只是一种计算 1 到 √2 之间数字的对数的方法。这通常使用有理多项式来完成。二阶多项式多项式与三阶多项式的比率对此非常有效。

# java - OnValueChange 多次调用 GWT

> ID：10732036
> 
> 赞同：0
> 
> 时间：2012-05-24T06:09:05.943
> 
> 标签：java, gwt, valuechangelistener

我正在使用带有 Java 和 Mozilla FF 7 的 GWT 2.4。我有一个**TextBox**并且我已经向它添加了一个**ValueChangeHandler**。我注意到，每当我更改**TextBox**的值时，**OnValueChange**方法都会在失去焦点时多次调用**TexBox**。**我的问题是OnValueChange**方法被调用了多少次？我可以将其转换为单次通话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:32:25.113

你确定你实际上没有添加`ValueChangeHandler`多次吗？

# mysql - 无法启动 MySQL 错误 1067

> ID：10732041
> 
> 赞同：0
> 
> 时间：2012-05-24T06:09:23.787
> 
> 标签：mysql, mysql-error-1067

我正面临 MySQL 的一个 stange 错误

Mysqld.exe --console 说：

`mysqld.exe --console`

`mysqld.exe: Character set 'utb8_general_ci' is not a compiled character set and` `is not specified in the 'C:\Program Files\MySQL\MySQL Server 5.5\share\charsets\` `Index.xml' file`

`120524 8:49:51 [ERROR] Aborting`

`120524 8:49:51 [Note] mysqld.exe: Shutdown complete`

我该如何解决这个字符集问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T03:57:09.863

我认为你拼错了一些东西`my.ini`：应该是`utf8_general_ci`。
更正此问题并重新启动 MySql。

# php - 使用 jquery 获取单选按钮的值

> ID：10732044
> 
> 赞同：0
> 
> 时间：2012-05-24T06:09:38.437
> 
> 标签：php, jquery, ajax

我已将单选按钮定义如下

```
<tr>
   <th height="35" scope="row">
       <div align="left">Response for Instruction</div>
   </th>
   <th scope="row"><input name="a"  type="radio" value="Excellent" /></th>
   <th scope="row"><input name="a"  type="radio" value="Good" /></th>
   <th scope="row"><input name="a"  type="radio" value="Poor" /></th>
   <th scope="row"><input name="a"  type="radio" value="Needs Improvement " /></th>
</tr>

$(document).ready(function() {
    var a = $('#a').attr('value');
    alert(a);
} 
```

但它显示未定义。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T06:13:18.467

```
$("input:radio[name=a]:checked").val() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T06:23:05.810

**试试这个**

```
 $("input:radio[name=a]").click(function() {
    var value = $(this).val();
    console.log(value);
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T06:13:38.123

**工作演示** [http://jsfiddle.net/qh6Et/3/](http://jsfiddle.net/qh6Et/3/)

**代码**

```
$("input[type='radio']").click(function(){
    var a     = $(this).attr('value');
    alert(a);
});
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T06:13:25.330

它应该是

```
var a = $('input[name="a"]').attr('value'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T06:14:52.337

可能这会有所帮助...

```
$("input[@name=a]:checked").val(); 
```

# dynamics-crm-2011 - 居中网页资源文本

> ID：10732045
> 
> 赞同：2
> 
> 时间：2012-05-24T06:09:47.390
> 
> 标签：dynamics-crm-2011

长话短说，我需要在表单上显示一些带有彩色背景的彩色文本。

文本长度不超过 1 行，因此我将 Web 资源的格式设置为 2 行大小，但不幸的是，文本在 Web 资源上显示得非常低，这意味着文本需要滚动才能查看...

有谁知道让文本**准确**显示在 Web 资源显示位置的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:31:26.023

您的问题可能与 IFRAME 的边距有关。看看下面的函数是否改变了什么。

```
function FormatIFRAME(IFRAMEID) {
    var iFrame, frameDoc;

    iFrame = document.getElementById(IFRAMEID);
    frameDoc = iFrame.contentWindow.document;
    frameDoc.body.topMargin = '0';
    frameDoc.body.leftMargin = '0';
    frameDoc.body.rightMargin = '0';
    frameDoc.body.bottomMargin = '0';
    frameDoc.body.style.backgroundColor = "rgb(246,248,250)";
    iFrame.style.border = "0";
} 
```

# php - 如何只替换一次查找字符串？

> ID：10732046
> 
> 赞同：0
> 
> 时间：2012-05-24T06:09:56.563
> 
> 标签：php

例如有一个字符串：

```
$valeur = "a-b-c-b-d-e"; 
```

字母“b”在此出现了两次。我只想替换第一个“b”。

怎么做 ？我使用过`str_replace`，但它取代了所有出现的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:16:24.127

您可以`preg_replace`像这样使用和设置限制：

```
$valeur = "a-b-c-b-d-e";
$replacement = '#';

echo preg_replace('/b/', $replacement, $valeur, 1); // a-#-c-b-d-e 
```

您没有提到要替换它的内容，因此我将其添加`#`为占位符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:17:08.107

您可以在这里尝试 preg_replace。

```
 $valeur = "a-b-c-b-d-e";
    echo preg_replace('/b/', 'x', $valeur, 1); // outputs 'a-x-c-b-d-e' 
```

这里第四个参数是限制，这是可选的。

谢谢

# php - 通过 .htaccess 文件重定向

> ID：10732047
> 
> 赞同：0
> 
> 时间：2012-05-24T06:10:01.323
> 
> 标签：php, .htaccess

我已经制作了一个文件说a.php。现在我想要一些东西，比如如果一个人试图打开 a.php 那么他应该重定向到站点同一目录的另一个页面。

我希望它通过 .htaccess 文件。我已经在我的 .htaccess 文件中编写了这段代码

```
RewriteEngine On
# This allows you to redirect index.html to a specific subfolder
Redirect /b.php /a.php 
```

两个页面都存储在同一个目录中..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:19:02.023

你可以试试

```
RewriteEngine On
RewriteRule /a\.php /otherfile.php [R=301,L] 
```

更改文件名是必要的。如果您可以更具体地说明您希望实现的目标，也许我可以为您提供更好的解决方案。

可能有帮助的问题：

*   是只针对 a.php 文件，还是有其他请求会以与此模式相同的方式处理？

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:20:55.140

请参考以下链接。我想它会帮助你。

[如何使用 .htaccess 文件重定向我的网站？](http://kb.mediatemple.net/questions/242/How+do+I+redirect+my+site+using+a+.htaccess+file?)

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:26:52.470

或者，如果您的脚本有一个请求字符串，您可以使用它。
就像您想留在同一页面上，但不显示请求字符串。

（如果您想通过脚本发布或获取一些数据）

```
RewriteEngine on
RewriteRule ^/path/to/a/([0-9]+) /path/to/a.php?foot=$1 [PT] 
```

此外，您应该咨询 Codemaster Gabriel 和 Arvind Sridharan 给您的链接。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-24T06:20:18.650

您可以使用标头功能来重定向..试试这个

在 a.php 类型中：-

```
 <?php
    header ('location: b.php'); //lets say b.php is the file you want to redirect
    ?> 
```

它会工作..由于apache的安全原因，建议使用它而不是.htaccess

# c# - MonoTouch AOT 编译器不在泛型类中构造字典类型

> ID：10732048
> 
> 赞同：1
> 
> 时间：2012-05-24T06:10:02.010
> 
> 标签：c#, generics, xamarin.ios, aot

在 MonoTouch 中，当创建具有使用类型的泛型类型参数作为其值的类型的 Dictionary 的泛型类型时，AOT 编译器不会构造所需的 Dictionary 类型，从而导致 iOS 设备在尝试调用 JIT 编译器。

```
public class Foo<T>
{
    private Dictionary<int, T> d = new Dictionary<int, T>();
    ...
}

var foo = new Foo<string>(); // Runtime error. 
```

有一个变通方法（[发布在 Catalysts 博客上](http://www.catalysts.cc/blog/monotouch-and-our-first-experiences/?lang=en)），其中涉及显式声明程序其他地方所需的任何构造类型：

```
var x = new Dictionary<int, string>(); 
```

但这有点乱。**有更好的解决方法吗？**

此外，在我看来，所有信息在编译时都已存在，因此 AOT 编译器应该能够构造所需的类型。因此，这是一个可行的编译器功能吗（我们可能会在未来的版本中获得）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T00:31:27.427

现在已修复此问题，因此不需要解决方法：

[https://bugzilla.xamarin.com/show_bug.cgi?id=5316](https://bugzilla.xamarin.com/show_bug.cgi?id=5316)

# jquery - 如何在 Kendo Grid 中添加/插入行？

> ID：10732049
> 
> 赞同：4
> 
> 时间：2012-05-24T06:10:07.530
> 
> 标签：jquery

当有界数据源更改时（插入/删除/添加），这是无论如何都要在 Kendo Grid 中添加/插入行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T06:38:55.023

[**工作演示在这里点击这里**](http://jsfiddle.net/VMrqS/) [http://jsfiddle.net/VMrqS/](http://jsfiddle.net/VMrqS/)

**或者**这个[http://jsfiddle.net/D3rSk/7/](http://jsfiddle.net/D3rSk/7/)

我阅读了此演示的链接以帮助您：希望这对您有用：[http ://www.kendoui.c​​om/documentation/ui-widgets/grid/walkthrough.aspx](http://www.kendoui.com/documentation/ui-widgets/grid/walkthrough.aspx)

这将显示添加新行或删除示例。

**代码**

```
 $(document).ready(function() {
                    $("#grid").kendoGrid({
                        dataSource: {
                            type: "odata",
                            transport: {
                                read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
                            },
                            schema: {
                                model: {
                                    fields: {
                                        OrderID: { type: "number" },
                                        Freight: { type: "number" },
                                        ShipName: { type: "string" },
                                        OrderDate: { type: "date" },
                                        ShipCity: { type: "string" }
                                    }
                                }
                            },
                            pageSize: 10,
                            serverPaging: true,
                            serverFiltering: true,
                            serverSorting: true
                        },
                        height: 250,
                        filterable: true,
                        sortable: true,
                        pageable: true,
                        columns: [{
                                field:"OrderID",
                                filterable: false
                            },
                            "Freight", {
                                field: "OrderDate",
                                format: "{0:MM/dd/yyyy}"
                            },
                            "ShipName",
                            "ShipCity",
                            { command: "destroy", title: " ", width: "110px"}
                           ]

                    });
                });
​ 
```

# iphone - 如何在iphone的组tableview中更改选定的单元格背景图像

> ID：10732050
> 
> 赞同：0
> 
> 时间：2012-05-24T06:10:17.290
> 
> 标签：iphone, objective-c

我现在想知道当我单击特定单元格时如何在单元格背景上添加图像并且我的表格被分组我有三个部分和 5 行我尝试使用此代码但它不适用于我我在两种方法中都编写了此代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
 static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

UIImage *rowBackground;   
    UIImage *selectionBackground;   
    rowBackground = [UIImage imageNamed:@"topAndBottomRow.png"]; 
    selectionBackground = [UIImage imageNamed:@"topRowSelected.png"];        
    cell.backgroundView =   [[[UIImageView alloc] init] autorelease];  
    cell.selectedBackgroundView =   [[[UIImageView alloc] init] autorelease];     
    ((UIImageView *)cell.backgroundView).image = rowBackground;  
    ((UIImageView *)cell.selectedBackgroundView).image = selectionBackground;

    return cell;

}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    UIImage *rowBackground;   
    UIImage *selectionBackground;   
    rowBackground = [UIImage imageNamed:@"topAndBottomRow.png"]; 
    selectionBackground = [UIImage imageNamed:@"topRowSelected.png"];        
    cell.backgroundView =   [[[UIImageView alloc] init] autorelease];  
    cell.selectedBackgroundView =   [[[UIImageView alloc] init] autorelease];     
    ((UIImageView *)cell.backgroundView).image = rowBackground;  
    ((UIImageView *)cell.selectedBackgroundView).image = selectionBackground;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:18:28.510

试试看：-

```
- (void)tableView: (UITableView*)tableView willDisplayCell: (UITableViewCell*)cell1 forRowAtIndexPath: (NSIndexPath*)indexPath
{
 cell1.backgroundColor = indexPath.row % 2 ? [UIColor colorWithPatternImage:[UIImage imageNamed:(@"back2.png")]]: [UIColor colorWithPatternImage:[UIImage imageNamed:(@"back1.png")]];
UIView *myBackView = [[UIView alloc] initWithFrame:cell1.frame];
myBackView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:(@"back3.png")]];
cell1.selectedBackgroundView = myBackView;
} 
```

它可能会帮助你谢谢:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:31:56.070

这样做

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
 static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    UIImage *rowBackground;   
    UIImage *selectionBackground;   
    rowBackground = [UIImage imageNamed:@"topAndBottomRow.png"]; 
    selectionBackground = [UIImage imageNamed:@"topRowSelected.png"];        
    backgroundImageView =   [[[UIImageView alloc] init] autorelease]; 
     backgroundImageView.image = rowBackground ; 
    selectedBackgroundImageView =   [[[UIImageView alloc] init] autorelease]; 
    selectedBackgroundImageView.image =selectionBackground ;    
    cell.backgroundView =   backgroundImageView;
    cell.selectedBackgroundView =  selectedBackgroundImageView;
    return cell;

} 
```

不需要在 didSelect 我猜..

iphone客观-c

# ruby-on-rails - Meteor，如何从外部来源“发布”数据？

> ID：10732055
> 
> 赞同：4
> 
> 时间：2012-05-24T06:10:41.103
> 
> 标签：ruby-on-rails, meteor

在最近关于 Meteor 的 Railscast 之后，我的兴趣被激起了，特别是当我希望为我的 Rails 应用程序实现实时事件源时。

在我看来，Meteor 是满足我要求的完美解决方案，但我有点卡在第一个障碍上。

我的要求是能够从我的主站点（Rails 应用程序）将数据发布到 Meteor 服务器，并将生成的流星客户端网页嵌入到我的主应用程序中。

那么我将如何将数据发送到 Meteor 服务器并让 Meteor 客户端自动获取数据？

任何关于此最佳方法的想法表示赞赏。我想我正在寻找一个可以接受来自外部数据源的数据的 Meteor api

**更新** 也许我需要编写一个 DDP 客户端来使用 Rails？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T15:00:52.830

Meteor 应用程序的底层数据集合是 Mongodb 集合。所以，从这个角度来看，你可以。

1.  为 Rails 编写 DDP 客户端。

2.  从 Rails 直接插入 MongoDB。如果您的 Meteor 应用程序在客户端订阅，则数据将在浏览器视图中自动发布。这可以通过在客户端订阅数据并从浏览器控制台、操作系统控制台插入（直接通过 mongo 或在 cmd 提示符下使用流星 mongo 并使用 db.collection.insert）来显示。您可以连接到自己的 Mongo 服务器，而不必在 Meteor 应用程序中使用 Mongo。

3.  Meteor 集合的 CRUD 将允许您公开 RESTy 类型的接口。尽管 Meteor 将您从这种旧范式中解放出来。
    [https://github.com/crazytoad/meteor-collectionapi](https://github.com/crazytoad/meteor-collectionapi)

4.  开始将您的应用程序逐节移植到 Meteor，包括数据收集、处理和插入。您可以使用 iFrames 等……Google 流星上有一个线程讨论这个问题。

我希望这给了你一些选择。我可能会做 #2 并开始向 #4 移动。

小号

# asp.net - 如何在框架 1.1 asp.net 中使用 go daddy 发送邮件？

> ID：10732056
> 
> 赞同：-2
> 
> 时间：2012-05-24T06:11:03.120
> 
> 标签：asp.net, sendmail

我必须在一个项目中从 go daddy 发送邮件，并且该项目是在 .net 框架 1.1 中构建的。我已经尝试了 go daddy 支持的以下链接，但我的收件箱中没有邮件。[从 Go 爸爸发送邮件[http://support.godaddy.com/help/article/1073/using-cdosys-to-send-email-from-your-windows-hosting-account](http://support.godaddy.com/help/article/1073/using-cdosys-to-send-email-from-your-windows-hosting-account)请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:23:35.453

您的标题是否显示电子邮件来自 aol、gmail、yahoo、hotmail、live、aim 或 msn 电子邮件帐户？所以电子邮件不会发送，因为我们的服务器不会中继带有来自 aol、gmail、yahoo、hotmail、live、aim 或 msn 地址的标题的电子邮件。

# javascript - 将数据发送到单独的窗口javascript

> ID：10732065
> 
> 赞同：2
> 
> 时间：2012-05-24T06:11:51.743
> 
> 标签：javascript

我使用以下方法从现有页面创建了一个新的弹出窗口：

```
window.open("myUrl","myName","width=200,height=200"); 
```

现在在那个弹出窗口上我有一个文本输入和一个按钮，我想为按钮创建一个 onclick 方法，该方法将文本输入值发送到创建弹出窗口的页面而不使用表单或 php，这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T06:18:59.040

您可以使用**window.opener**关键字

假设您的父类中有一个javascript方法 doSomething(value){....} ，然后从您的 POPUP 中您可以使用调用父函数

```
window.opener.doSomething("here is my data from child sent to parent"); 
```

**更新**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T06:20:36.263

假设父窗口和新窗口都在同一个域上，你应该能够直接操作它们的 JS 环境：

```
var w = window.open("myUrl", "myName", "width=200,height=200");
var e = w.document.getElementById('someId');
// do something with element e 
```

如果它们位于不同的域中，如果目标浏览器不支持 window.postMessage，您可能需要使用[window.postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)或其他跨域消息传递技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:21:24.500

任何打开的窗口调用都会形成对新窗口的获取请求。这是一种非常简单的方法，您可以使用 URL 本身传递要发送的参数，例如，

```
var myUrl = "http://example.com/test?myName=" + myName;
window.open(myUrl,"windowName","width=200,height=200"); 
```

现在在页面上，您可以获得 myName 作为请求参数。请试试这个。

# .net - Visual Studio 2010 中的 Silverlight 编译错误

> ID：10732068
> 
> 赞同：0
> 
> 时间：2012-05-24T06:12:01.023
> 
> 标签：.net, visual-studio-2010, silverlight

我已经更改了我的cs文件中的代码并编译了没有错误的编译代码，但我仍然看到旧的输出，而不是在我的silverlight应用程序中更改代码后所需的新输出。知道为什么会发生这种情况。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:17:23.630

尝试多次构建、重建和清理解决方案。有时候是这样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T06:22:03.390

尝试清除浏览器缓存。浏览器缓存 xap 包。

# jquery - 如何摆脱jsonp跨域调用中的同步调用

> ID：10732072
> 
> 赞同：1
> 
> 时间：2012-05-24T06:12:18.433
> 
> 标签：jquery, cross-domain, jsonp, synchronous

我在 Jquery JSONP 下面有两个调用，它用于跨域调用，现在当页面加载时它会触发这两个调用，问题是现在调用非常快，在快速完成之前它会触发第二个调用，这是为第二次调用提供解析器错误（airxml：不是函数）。

现在，如果我们在调用中有 async: false，下面的代码可以正常工作，但根据跨域策略，它不支持同步调用。

```
var oXMLHTTP, i, length, oData, sValue, sDisplay, sName, sMatch, oRegExp;
     var qr = "&jsonpcall=true";
   if (!oDropdown)
        return;

    oXMLHTTP = this.createXMLHttpRequest();
    this.FilterUrl = sFilterUrl;
    if (sFilterUrl != previousFilterUrl)
    {

        var regUrl = sFilterUrl;               
        var regquest = $.ajax({
            url: regUrl+qr,  
            type: "GET",
            async: false,   
            cache: true,                            
            contentType: "application/json; charset=utf-8",
            dataType: "jsonp",
            jsonpCallback: "airport",                 
            success: function(data, textStatus, jqXHR) 
            {                
                if (data.result[0] != '')
                {
                        sFilterData = data.result[0];                   
                }          
            }
            }); 
        previousFilterUrl = sFilterUrl;
    }

    if(!fireRequestOnce ||(fireRequestOnce && retrievedData == null))
    {       
         var regUrl = sXML;  
         var airquest = $.ajax({
            url: regUrl+qr, 
            async: false,                 
            dataType: 'jsonp',
            jsonpCallback: 'airxml',            
            cache: true,
            success: function(data, textStatus, jqXHR) 
            {
                    var xmlDoc = $.parseXML(data.myresult);
                oData = xmlDoc.documentElement.childNodes;
            }
        });
    } 
```

请建议什么是最好的方法，我尝试在成功事件触发后放置变量，然后尝试调用第二次调用，但它没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:26:26.977

当您需要顺序 AJAX 调用时，尽量避免使用`async:false`或`jQuery.ajaxSetup({async:false});`这些选项的作用是，它会锁定浏览器，直到 AJAX 调用完成。在这种情况下，我更喜欢[gnarf的](https://gist.github.com/1039247)[ajaxQueue](https://stackoverflow.com/users/91914/gnarf)插件。

这个插件要做的是，它将所有传入的 AJAX 请求排队，并一个接一个地处理。使用起来非常简单，如下[所示](https://stackoverflow.com/a/3035268/778687)。

# c++ - STL allows duplicate pairs?

> ID：10732074
> 
> 赞同：23
> 
> 时间：2012-05-24T06:12:25.580
> 
> 标签：c++, dictionary, stl

我编写了以下代码，并对输出感到惊讶。我听说`<map>`可以避免键冲突，但在这里似乎允许插入重复对。

```
#include<iostream>
#include<map>

using namespace std;

int main()
{
    map<string,char> namemap;
    namemap["yogi"]='c';

    namemap.insert(pair<string,char>("yogendra",'a'));
    namemap.insert(pair<string,char>("yogendra",'b'));

    cout<<namemap["yogendra"]<<endl;

    return 0;
} 
```

此代码输出`a`. 您可以在[C++ Shell](http://cpp.sh/5u5k)上运行它。

避免冲突是否意味着我们不能使用相同的密钥输入多对？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-24T06:14:20.540

具有相同密钥的第二个`insert`是无操作。它只是返回一个指向现有元素的迭代器。

`std::map::insert()`有一个返回值，你应该检查它。

它是类型`std::pair<iterator,bool>`。该对的第二个元素告诉您该元素是否已被插入，或者是否已经存在具有相同键的条目。

```
cout << namemap.insert(pair<string,char>("yogendra",'a')).second << endl;
cout << namemap.insert(pair<string,char>("yogendra",'b')).second << endl; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-24T06:15:29.310

STL 映射不允许使用相同的键。您可能想为此使用多地图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-01T16:13:10.053

使用重复键插入值时，地图不会引发任何编译/运行时错误。但是在插入时，使用重复键它不会插入新值，它只会返回相同的退出值。它不会覆盖。但在以下情况下，它将被覆盖。

```
map<char,int> m1;
m1.insert(pair <char, int> ('a', 40));
m1['a']=50;
cout << "a => " << m1.find('a')->second << '\n'; 
```

结果将是 50。

下面的例子，它不会被覆盖。

```
map<char,int> m1;
m1.insert(pair <char, int> ('a', 40));
m1.insert(pair <char, int> ('a', 50));
cout << "a => " << m1.find('a')->second << '\n'; 
```

结果将是 40。

对于这两种情况，请记住此处的地图大小 1。

```
cout< "size =  " << m1.size() << '\n'; 
```

在这两种情况下都是 1。

# android - 列表为空时添加按钮

> ID：10732076
> 
> 赞同：1
> 
> 时间：2012-05-24T06:12:36.003
> 
> 标签：android, android-layout

我试图在列表为空时动态添加按钮，即没有数据填充列表。我尝试了下面的代码，但它不起作用

```
public class TableDemoActivity extends Activity {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            LinearLayout linearLayout = (LinearLayout) findViewById(R.id.linear);

            Button test = new Button(this);
            test.setText("Hello Android");
            test.setId(5);
            test.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));

            linearLayout.addView(test);

        }

    } 
```

这是布局文件内容

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<TableLayout 
    android:id="@+id/TblLyt"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     >

    <TableRow
        android:id="@+id/AcctHeader"
    >
    </TableRow>

    <ExpandableListView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/BankExpandableListView"
        android:layout_width="fill_parent"
        android:layout_height="443dp"
        android:layout_weight="1.32"
    >
    </ExpandableListView>

</TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T06:17:36.827

您可以将按钮放在 xml 布局文件中，并根据您的条件执行`visible`&`invisible`

```
if(your condition)
{
button.setVisibility(View.VISIBLE);
}
else
{
button.setVisibility(View.GONE);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T06:34:45.880

我解决了你的问题。跟着这些步骤。您的代码是正确的，但您犯了一个小错误。您正在线性布局中添加视图或按钮，但您的表格布局通过使用宽度和高度作为填充父级来保持屏幕的整个区域，因此只需在表格布局中添加您的按钮，如下所示：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.TableLayout;

public class TableDemoActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LinearLayout linearLayout = (LinearLayout) findViewById(R.id.linear);
        TableLayout table=(TableLayout) findViewById(R.id.TblLyt);

        Button test = new Button(this);
        test.setText("Hello Android");
        test.setId(5);
        test.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

        table.addView(test);        
        //linearLayout.addView(test);
    }
} 
```

现在您可以动态添加按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T06:23:01.473

它就在那里，你只是因为这个看不到它：

```
<TableLayout  
    android:id="@+id/TblLyt" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" > 
```

您正在告诉表格填充整个布局。您可以将 TableLayout 设置为 GONE 然后添加按钮，或者您可以将其更改`layout_height`为`wrap_content`.

# c# - 考虑复数、连续形式和其他变体的关键字匹配集

> ID：10732079
> 
> 赞同：0
> 
> 时间：2012-05-24T06:12:43.633
> 
> 标签：c#, java, full-text-search

匹配关键字/短语集的方法是什么，其中匹配可以考虑复数作为匹配项，将单词的变体作为匹配项以及搜索引擎识别的其他变体。

关键字集 S1={k1, k2.. kn}; S2={a1,a2.. 一个}

目标是将 kis 与 ais 匹配，同时考虑复数、-ings 等作为匹配项。即，run 可以与 running、runs、ran 等匹配。

我似乎认为可以使用某些可重用组件但无法弄清楚是什么的部分是使关键字的变体成为可能，或者将两个关键字集都限制为可能的较低顺序。

首选 C#、Java 中的实现细节。

# shell - shell脚本：执行中的单引号

> ID：10732082
> 
> 赞同：2
> 
> 时间：2012-05-24T06:13:00.790
> 
> 标签：shell, escaping, shellexecute

我在从 shell 脚本中执行的命令中使用单引号时遇到问题。在我的脚本中，我执行了一个 rdesktop 命令，该命令应该有 -u '' （<- 2 个单引号）作为参数。但是，无论我如何尝试转义引号，它都没有正确传递。

如果我只是 echo $command 输出很好，如果我执行它会创建奇怪的输出

这是脚本中不起作用的部分：

```
command="rdesktop -u "\'\'" $server"
`$command` 
```

我也尝试直接执行它：

```
`rdesktop -u "\'\'" $server` 
```

我会很感激任何帮助，因为我阅读了很多关于在 shell 脚本中转义字符的教程，但没有找到解决方案。

编辑：

有趣的是，如果我只是使用

```
command=rdesktop -u '' $server 
```

并回显它，输出很好但是，如果我执行它

```
$command 
```

它失败...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T10:01:19.117

如果您的 shell 是 bash 或 ksh 或 zsh，则使用数组而不是字符串构建命令会更安全、更容易：

```
command=( rdesktop -u '' $server ) 
```

并像这样执行它

```
"${command[@]}" 
```

我无法想象远程服务器需要看到一个按字面命名的用户名`''`（即 2 个单引号）——它可能只需要一个空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:30:10.627

首先，如果你输入

```
`rdesktop something` 
```

那么这意味着调用`rdesktop`，获取输出，并将该输出作为命令运行。要“直接执行”，只需键入

```
rdesktop something 
```

现在报价。如果你执行

```
rdesktop -u '' $server 
```

然后`rdesktop`将看不到引号。它们作为 shell 解析命令的一部分被删除。要`rdesktop`查看参数`''`，请使用

```
rdesktop -u "''" $server 
```

实际上没有必要添加任何进一步的转义，因为单引号在双引号字符串中并不特殊。

**编辑：**当你想要对变量中的命令做的就是执行它时，请注意，这种引号的剥离只发生一次：

```
cmd="rdesktop -u '' $server"
$cmd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:38:26.060

当您调用时`rdesktop -u '' $server`，您正在使用 3 个参数调用 rdesktop，其中第二个是空字符串。我不清楚你为什么要在反引号中调用它，但是你可以使用你的第一个命令定义得到你想要的，并且：

```
eval $command 
```

请注意，如果您不完全控制 的内容`$server`，那么这是一个很大的安全风险。（例如，如果 server 是字符串`; cmd`，则调用 eval 将执行`cmd`）

# ravendb - 查询索引时抛出异常

> ID：10732088
> 
> 赞同：3
> 
> 时间：2012-05-24T06:13:20.943
> 
> 标签：ravendb

我有一个看起来像这样的索引

```
public class FeedAnnouncementByOneLabel : Raven.Client.Indexes.AbstractIndexCreationTask<FeedPost, FeedAnnouncementByOneLabel.Result>
{
    public class Result
    {
        public long SequentialId { get; set; }
        public string AnnouncementId { get; set; }
        public string Label1 { get; set; }
        public string FeedOwner { get; set; }
        public DateTimeOffset CreationDate { get; set; }
    }
    public FeedAnnouncementByOneLabel()
    {
        Map = announcements => from doc in announcements
                               from docLabelsItem1 in ((IEnumerable<Label>)doc.Labels).DefaultIfEmpty()
                               select new Result
                               {
                                   SequentialId = doc.SequentialId,
                                   AnnouncementId = doc.AnnouncementId,
                                   CreationDate = doc.CreationDate,
                                   FeedOwner = doc.FeedOwner,
                                   Label1 = docLabelsItem1.Text
                               };
    }
} 
```

我像这样查询它（简化版本，仍然失败）：

```
from c in _session.Query<FeedAnnouncementByOneLabel.Result, FeedAnnouncementByOneLabel>()
                                   select c; 
```

每次我查询它时都会遇到异常。真正奇怪的是，这曾经奏效。自从我将 Raven 更新到最新版本后，我不确定它是否坏了 - 或者是因为我改变了其他东西。我很确定唯一改变的是我将“FeedPost”移动到它自己的 DLL 中（上面有各种 DataContract 属性）。

有接盘侠吗？？

谢谢

```
<Exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<ExceptionType>System.InvalidCastException</ExceptionType>
<Message>
Unable to cast object of type 'FeedPost' to type 'Result'.
</Message>
<StackTrace>
at Raven.Client.Document.InMemoryDocumentSessionOperations.ConvertToEntity[T](String id, RavenJObject documentFound, RavenJObject metadata) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\InMemoryDocumentSessionOperations.cs:line 416
 at Raven.Client.Document.InMemoryDocumentSessionOperations.TrackEntity[T](String key, RavenJObject document, RavenJObject metadata) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\InMemoryDocumentSessionOperations.cs:line 340
 at Raven.Client.Document.SessionOperations.QueryOperation.Deserialize[T](RavenJObject result) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\SessionOperations\QueryOperation.cs:line 130
 at System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
 at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
 at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
 at Raven.Client.Document.SessionOperations.QueryOperation.Complete[T]() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\SessionOperations\QueryOperation.cs:line 114
 at Raven.Client.Document.AbstractDocumentQuery`2.GetEnumerator() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\AbstractDocumentQuery.cs:line 603
 at Raven.Client.Linq.RavenQueryInspector`1.GetEnumerator() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryInspector.cs:line 98
 at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
 at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
 at FeedPostsController.Get(String labels, Int32 sincePostId) in FeedPostsController.cs:line 211
 at lambda_method(Closure , Object , Object[] )
 at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
 at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.Execute(HttpControllerContext controllerContext, IDictionary`2 arguments)
 at System.Web.Http.Controllers.ApiControllerActionInvoker.<>c__DisplayClass2.<InvokeActionAsync>b__0()
 at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
</StackTrace>
</Exception> 
```

[更新]

好的 - 我将 FeedPost 定义移回具有索引的同一个 DLL 中......仍然失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:58:15.360

刚试过这个（https://gist.github.com/2780374），我没有得到那个错误（即查询运行没有错误）但没有结果

似乎您正在尝试通过标签获取所有提要公告，那么这可能可行吗？我删除了 annoucementId 和另一个 id，因为它会妨碍聚合（按标签），但也许我弄错了你的域。

```
 public class FeedAnnouncementByOneLabel : AbstractIndexCreationTask<FeedPost, FeedAnnouncementByOneLabel.Result>
{
    public class Result
    {
        public string Label1 { get; set; }
        public string FeedOwner { get; set; }
        public DateTimeOffset CreationDate { get; set; }
    }
    public FeedAnnouncementByOneLabel()
    {
        Map = announcements => from doc in announcements
                               from label in doc.Labels.DefaultIfEmpty()
                               select new 
                               {
                                   CreationDate = (DateTimeOffset)doc.CreationDate,
                                   FeedOwner = doc.FeedOwner,
                                   Label1 = label.Text
                               };

        Reduce = results => from result in results
                            group result by result.Label1
                                into r
                                select new
                                {
                                    CreationDate = (DateTimeOffset)r.Max(x => x.CreationDate),
                                    FeedOwner = r.Select(x=> x.FeedOwner).First(),
                                    Label1 = r.Key,
                                };
    }
} 
```

# r - 如何在R中找到直线和椭圆之间的交点

> ID：10732093
> 
> 赞同：2
> 
> 时间：2012-05-24T06:13:39.013
> 
> 标签：r, line, intersection, ellipse

我想找到椭圆和直线之间的交点

如果使用 car 包中的 dataEllipse 函数中的示例（忽略一些不需要的参数），即

```
x <- dataEllipse(Prestige$income, Prestige$education, levels=0.95, lty=2) 
```

并说你有水平线

```
abline(14,0) 
```

你如何找到直线和椭圆之间的两个交点

我知道您可以通过仅查看 x 来获得构成椭圆的数据，但是我想获得确切的交点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:24:24.263

椭圆方程由下式给出：

x^2/a+y^2/b=1，直线方程由cx+d=y（其中a,b,c,d系数）。

您可以在椭圆方程中替换 y。然后目标是找到 f(x)=0 的解。您可以使用诸如二分法之类的方法来解决此类问题。

看一下这个：

[http://www.math.wichita.edu/~cma/stat774/ch2.pdf](http://www.math.wichita.edu/~cma/stat774/ch2.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:53:39.880

我敢打赌，有一种曲线拟合方法可以从 xy 坐标集中获得椭圆的焦点和轴长度，但它看起来很难：[http://www.site.uottawa.ca/~mstoj075/Publications_files/EllipseFit。 .pdf](http://www.site.uottawa.ca/~mstoj075/Publications_files/EllipseFit.pdf) _ `splinefun`通过使用您的 xy 坐标数据集并遵循[样条与直线之间的交点](https://stackoverflow.com/questions/234261/the-intersection-point-between-a-spline-and-a-line)中的答案，您可能会得到“足够好”的答案

# asp.net-mvc-3 - 是否可以不在 mvc 3 的客户端呈现隐藏字段

> ID：10732094
> 
> 赞同：0
> 
> 时间：2012-05-24T06:13:39.980
> 
> 标签：asp.net-mvc-3, razor

在 asp.net 中，隐藏字段无法通过`visible="false"`. 在 mvc 3 中是否也可以不在客户端呈现隐藏字段？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:18:44.953

你可以提出一个条件：

```
@if (IsVisible)
{
    @Html.HiddenFor(x => x.Foo)
} 
```

或者编写一个自定义 HTML 帮助器，它允许您将条件直接传递给帮助器：

```
@Html.MyHiddenFor(x => x.Foo, IsVisible) 
```

可以这样实现：

```
public static class HtmlExtensions
{
    public static IHtmlString MyHiddenFor<TModel, TProperty>(
        this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, TProperty>> expression,
        bool isVisible
    )
    {
        if (!isVisible)
        {
            return MvcHtmlString.Empty;
        }

        return htmlHelper.HiddenFor(expression);
    }
} 
```

# visual-studio-2010 - 代码更改的颜色指示器 - 跟踪 Visual Studio 2010 中的更改

> ID：10732096
> 
> 赞同：0
> 
> 时间：2012-05-24T06:14:00.963
> 
> 标签：visual-studio-2010, vs-extensibility

Visual Studio 2010 SDK 中是否有办法更改跟踪更改的行为？

我想覆盖它以添加一些其他功能，但目前没有找到方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:18:30.597

您可以创建一个占位相同或与轨道更改边距相邻的边距提供程序。

通常，要在编辑器中创建边距，您需要导出一个`IWpfTextViewMarginProvider`类。接下来，您需要使用[PredefinedMarginNames](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.editor.predefinedmarginnames.aspx)定位边距。

这是一个可以帮助您入门的示例：

*   [http://www.codeproject.com/Articles/61915/Numbered-Bookmarks-Visual-Studio-Extension-VSX-201](http://www.codeproject.com/Articles/61915/Numbered-Bookmarks-Visual-Studio-Extension-VSX-201)

# android - 在android中的两个位置之间的地图上查找路线

> ID：10732101
> 
> 赞同：1
> 
> 时间：2012-05-24T06:14:24.470
> 
> 标签：android, google-maps

我正在构建一个应用程序，我需要在 2 个位置之间的地图上找到路线。用户可以输入 2 个位置，即源和目的地，他可以在地图上获取路线。有人可以建议我如何进行dis。有没有可以帮助我的教程？提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:18:36.267

```
 public class MappzzActivity extends MapActivity {
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mapp);
    double src_lat = latPoint;
    double src_long = lngPoint;

    double dest_lat = 8.88056;
    double dest_long = 76.5917;
    GeoPoint srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),
            (int) (src_long * 1E6));
    GeoPoint destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),
            (int) (dest_long * 1E6));

    DrawPath(srcGeoPoint, destGeoPoint, Color.GREEN, mapView);

    mapView.getController().animateTo(srcGeoPoint);
    mapView.getController().setZoom(15);

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

private void DrawPath(GeoPoint src, GeoPoint dest, int color,
        MapView mMapView01) {

    // connect to map web service
    StringBuilder urlString = new StringBuilder();
    urlString.append("http://maps.google.com/maps?f=d&hl=en");
    urlString.append("&saddr=");// from
    urlString.append(Double.toString((double) src.getLatitudeE6() / 1.0E6));
    urlString.append(",");
    urlString
            .append(Double.toString((double) src.getLongitudeE6() / 1.0E6));
    urlString.append("&daddr=");// to
    urlString
            .append(Double.toString((double) dest.getLatitudeE6() / 1.0E6));
    urlString.append(",");
    urlString
            .append(Double.toString((double) dest.getLongitudeE6() / 1.0E6));
    urlString.append("&ie=UTF8&0&om=0&output=kml");

    Log.d("xxx", "URL=" + urlString.toString());

    // get the kml (XML) doc. And parse it to get the coordinates(direction
    // route).
    Document doc = null;
    HttpURLConnection urlConnection = null;
    URL url = null;
    try {
        url = new URL(urlString.toString());
        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);
        urlConnection.setDoInput(true);
        urlConnection.connect();

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        doc = db.parse(urlConnection.getInputStream());

        if (doc.getElementsByTagName("GeometryCollection").getLength() > 0) {

            String path = doc.getElementsByTagName("GeometryCollection")
                    .item(0).getFirstChild().getFirstChild()
                    .getFirstChild().getNodeValue();

            Log.d("xxx", "path=" + path);

            String[] pairs = path.split(" ");
            String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude

            // src
            GeoPoint startGP = new GeoPoint(
                    (int) (Double.parseDouble(lngLat[1]) * 1E6),
                    (int) (Double.parseDouble(lngLat[0]) * 1E6));
            mMapView01.getOverlays()
                    .add(new MyOverLay(startGP, startGP, 1));

            GeoPoint gp1;
            GeoPoint gp2 = startGP;
            for (int i = 1; i < pairs.length; i++) {
                lngLat = pairs[i].split(",");
                gp1 = gp2;
                // watch out! For GeoPoint, first:latitude, second:longitude
                gp2 = new GeoPoint(
                        (int) (Double.parseDouble(lngLat[1]) * 1E6),
                        (int) (Double.parseDouble(lngLat[0]) * 1E6));
                mMapView01.getOverlays().add(
                        new MyOverLay(gp1, gp2, 2, color));

                Log.d("xxx", "pair:" + pairs[i]);

            }
            mMapView01.getOverlays().add(new MyOverLay(dest, dest, 3));

        }
    } catch (MalformedURLException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    } catch (ParserConfigurationException e) {

        e.printStackTrace();

    } catch (SAXException e) {

        e.printStackTrace();
    }

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:22:37.027

有很多方法可以显示两个位置之间的路线。

**1）打开默认地图应用程序并显示路线**

```
String uri = "http://maps.google.com/maps?saddr=" + currentLatitude+","+currentLongitude+"&daddr="+fixedLatitude+","+fixedLongitude;
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

**2）使用谷歌API并从谷歌API解析数据**

对于这种方式，您必须点击此[链接](http://www.anddev.org/google_driving_directions_-_mapview_overlayed-t826.html)

# c# - 获取枚举值的自定义属性

> ID：10732105
> 
> 赞同：21
> 
> 时间：2012-05-24T06:14:55.423
> 
> 标签：c#, .net, attributes, windows-runtime

在 WinRT .NET 应用程序 (C#) 中，我想获取在枚举值上定义的自定义属性。以下面的枚举为例：

```
public enum MyEnum
{
    [Display(Name="Foo")]
    EnumValue1,

    [Display(Name="Bar")]
    EnumValue2
} 
```

现在在“正常”.NET 中，我知道我可以使用 .NET 获取枚举值的自定义属性`enumValue.GetType().GetMember(enumValue.ToString())`。

不幸的是，在 WinRT .NET 中，该`GetMember()`方法在 Type 类上不可用。
有什么建议吗？

==================================================== ===

感谢下面的 Marc，我找到了**答案**！以下代码用于从 .NET 4.5 WinRT 中的枚举值获取特定的自定义属性：

```
public static class EnumHelper
{
    public static T GetAttribute<T>(this Enum enumValue)
        where T : Attribute
    {
        return enumValue
            .GetType()
            .GetTypeInfo()
            .GetDeclaredField(enumValue.ToString())
            .GetCustomAttribute<T>();
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T06:27:19.260

与其寻找*成员*，不如专门寻找字段。`Type`如果在 WinRT中不可用，请添加`using System.Reflection;`并使用`type.GetTypeInfo()`并查看那里，因为各种反射方面已移至类型信息。

# java - 渲染时 JTable 撕裂

> ID：10732108
> 
> 赞同：2
> 
> 时间：2012-05-24T06:15:31.583
> 
> 标签：java, swing, jtable

我已经设置了一个`JTable`并使它包含 18 列。最初，当它是 13 根柱子时，它很好地融入了其中`JTable`并且没有撕裂。但是，一旦我让它包含 18 个表，并将 autoresize 设置为关闭，当我使用水平滚动条尝试滚动其他列时，`JTable`开始发生撕裂，如下图所示：

[![表格图像](../Images/e86f0fc3846269ca3d6507da4e6cce00.png)](https://i.stack.imgur.com/37seH.jpg)

Netbeans 也开始给我很多这样的错误消息：

```
线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：14
    在 javax.swing.JTable$1.getValueAt(JTable.java:689)
    在 javax.swing.JTable.getValueAt(JTable.java:2720)
    在 javax.swing.JTable.prepareRenderer(JTable.java:5718)
    在 javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    在 javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    在 javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    在 javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    在 javax.swing.JComponent.paintComponent(JComponent.java:778)
    在 javax.swing.JComponent.paint(JComponent.java:1054)
    在 javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    在 javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    在 javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    在 javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    在 javax.swing.JComponent.paintForceDoubleBuffered(JComponent.java:1090)
    在 javax.swing.JViewport.blitDoubleBuffered(JViewport.java:1598)
    在 javax.swing.JViewport.windowBlitPaint(JViewport.java:1559)
    在 javax.swing.JViewport.setViewPosition(JViewport.java:1102)
    在 javax.swing.plaf.basic.BasicScrollPaneUI$Handler.hsbStateChanged(BasicScrollPaneUI.java:1087)
    在 javax.swing.plaf.basic.BasicScrollPaneUI$Handler.stateChanged(BasicScrollPaneUI.java:1038)
    在 javax.swing.DefaultBoundedRangeModel.fireStateChanged（DefaultBoundedRangeModel.java:364）
    在 javax.swing.DefaultBoundedRangeModel.setRangeProperties(DefaultBoundedRangeModel.java:302)
    在 javax.swing.DefaultBoundedRangeModel.setValue(DefaultBoundedRangeModel.java:168)
    在 javax.swing.JScrollBar.setValue(JScrollBar.java:463)
    在 javax.swing.plaf.basic.BasicScrollBarUI$TrackListener.setValueFrom(BasicScrollBarUI.java:1253)
    在 javax.swing.plaf.basic.BasicScrollBarUI$TrackListener.mouseDragged(BasicScrollBarUI.java:1195)
    在 java.awt.Component.processMouseMotionEvent(Component.java:6553)
    在 javax.swing.JComponent.processMouseMotionEvent(JComponent.java:3339)
    在 java.awt.Component.processEvent(Component.java:6274)
    在 java.awt.Container.processEvent(Container.java:2229)
    在 java.awt.Component.dispatchEventImpl(Component.java:4861)
    在 java.awt.Container.dispatchEventImpl(Container.java:2287)
    在 java.awt.Component.dispatchEvent(Component.java:4687)
    在 java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    在 java.awt.LightweightDispatcher.processMouseEvent(Container.java:4509)
    在 java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    在 java.awt.Container.dispatchEventImpl(Container.java:2273)
    在 java.awt.Window.dispatchEventImpl(Window.java:2719)
    在 java.awt.Component.dispatchEvent(Component.java:4687)
    在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703)
    在 java.awt.EventQueue.access$000(EventQueue.java:102)
    在 java.awt.EventQueue$3.run(EventQueue.java:662)
    在 java.awt.EventQueue$3.run(EventQueue.java:660)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    在 java.awt.EventQueue$4.run(EventQueue.java:676)
    在 java.awt.EventQueue$4.run(EventQueue.java:674)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 java.awt.EventQueue.dispatchEvent(EventQueue.java:673)
    在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    在 java.awt.EventDispatchThread.pumpEventsForHierarchy（EventDispatchThread.java:151）
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：14
    在 javax.swing.JTable$1.getValueAt(JTable.java:689)
    在 javax.swing.JTable.getValueAt(JTable.java:2720)
    在 javax.swing.JTable.prepareRenderer(JTable.java:5718)
    在 javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    在 javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    在 javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    在 javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    在 javax.swing.JComponent.paintComponent(JComponent.java:778)
    在 javax.swing.JComponent.paint(JComponent.java:1054)
    在 javax.swing.JComponent.paintChildren(JComponent.java:887)
    在 javax.swing.JComponent.paint(JComponent.java:1063)
    在 javax.swing.JViewport.paint(JViewport.java:731)
    在 javax.swing.JComponent.paintChildren(JComponent.java:887)
    在 javax.swing.JComponent.paint(JComponent.java:1063)
    在 javax.swing.JComponent.paintChildren(JComponent.java:887)
    在 javax.swing.JComponent.paint(JComponent.java:1063)
    在 javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    在 javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    在 javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    在 javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    在 javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    在 javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    在 javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    在 javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    在 javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    在 java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701)
    在 java.awt.EventQueue.access$000(EventQueue.java:102)
    在 java.awt.EventQueue$3.run(EventQueue.java:662)
    在 java.awt.EventQueue$3.run(EventQueue.java:660)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 java.awt.EventQueue.dispatchEvent(EventQueue.java:671)
    在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    在 java.awt.EventDispatchThread.pumpEventsForHierarchy（EventDispatchThread.java:151）
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：14
    在 javax.swing.JTable$1.getValueAt(JTable.java:689)
    在 javax.swing.JTable.getValueAt(JTable.java:2720)
    在 javax.swing.JTable.prepareRenderer(JTable.java:5718)
    在 javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    在 javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    在 javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    在 javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    在 javax.swing.JComponent.paintComponent(JComponent.java:778)
    在 javax.swing.JComponent.paint(JComponent.java:1054)
    在 javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    在 javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    在 javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    在 javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    在 javax.swing.JComponent.paintForceDoubleBuffered(JComponent.java:1090)
    在 javax.swing.JViewport.blitDoubleBuffered(JViewport.java:1598)
    在 javax.swing.JViewport.windowBlitPaint(JViewport.java:1559)
    在 javax.swing.JViewport.setViewPosition(JViewport.java:1102)
    在 javax.swing.plaf.basic.BasicScrollPaneUI$Handler.hsbStateChanged(BasicScrollPaneUI.java:1087)
    在 javax.swing.plaf.basic.BasicScrollPaneUI$Handler.stateChanged(BasicScrollPaneUI.java:1038)
    在 javax.swing.DefaultBoundedRangeModel.fireStateChanged（DefaultBoundedRangeModel.java:364）
    在 javax.swing.DefaultBoundedRangeModel.setRangeProperties(DefaultBoundedRangeModel.java:302)
    在 javax.swing.DefaultBoundedRangeModel.setValue(DefaultBoundedRangeModel.java:168)
    在 javax.swing.JScrollBar.setValue(JScrollBar.java:463)
    在 javax.swing.plaf.basic.BasicScrollBarUI$TrackListener.setValueFrom(BasicScrollBarUI.java:1253)
    在 javax.swing.plaf.basic.BasicScrollBarUI$TrackListener.mouseDragged(BasicScrollBarUI.java:1195)
    在 java.awt.Component.processMouseMotionEvent(Component.java:6553)
    在 javax.swing.JComponent.processMouseMotionEvent(JComponent.java:3339)
    在 java.awt.Component.processEvent(Component.java:6274)
    在 java.awt.Container.processEvent(Container.java:2229)
    在 java.awt.Component.dispatchEventImpl(Component.java:4861)
    在 java.awt.Container.dispatchEventImpl(Container.java:2287)
    在 java.awt.Component.dispatchEvent(Component.java:4687)
    在 java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    在 java.awt.LightweightDispatcher.processMouseEvent(Container.java:4509)
    在 java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    在 java.awt.Container.dispatchEventImpl(Container.java:2273)
    在 java.awt.Window.dispatchEventImpl(Window.java:2719)
    在 java.awt.Component.dispatchEvent(Component.java:4687)
    在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703)
    在 java.awt.EventQueue.access$000(EventQueue.java:102)
    在 java.awt.EventQueue$3.run(EventQueue.java:662)
    在 java.awt.EventQueue$3.run(EventQueue.java:660)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    在 java.awt.EventQueue$4.run(EventQueue.java:676)
    在 java.awt.EventQueue$4.run(EventQueue.java:674)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 java.awt.EventQueue.dispatchEvent(EventQueue.java:673)
    在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    在 java.awt.EventDispatchThread.pumpEventsForHierarchy（EventDispatchThread.java:151）
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：14
    在 javax.swing.JTable$1.getValueAt(JTable.java:689)
    在 javax.swing.JTable.getValueAt(JTable.java:2720)
    在 javax.swing.JTable.prepareRenderer(JTable.java:5718)
    在 javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    在 javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    在 javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    在 javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    在 javax.swing.JComponent.paintComponent(JComponent.java:778)
    在 javax.swing.JComponent.paint(JComponent.java:1054)
    在 javax.swing.JComponent.paintChildren(JComponent.java:887)
    在 javax.swing.JComponent.paint(JComponent.java:1063)
    在 javax.swing.JViewport.paint(JViewport.java:731)
    在 javax.swing.JComponent.paintChildren(JComponent.java:887)
    在 javax.swing.JComponent.paint(JComponent.java:1063)
    在 javax.swing.JComponent.paintChildren(JComponent.java:887)
    在 javax.swing.JComponent.paint(JComponent.java:1063)
    在 javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    在 javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    在 javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    在 javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    在 javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    在 javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    在 javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    在 javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    在 javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    在 java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701)
    在 java.awt.EventQueue.access$000(EventQueue.java:102)
    在 java.awt.EventQueue$3.run(EventQueue.java:662)
    在 java.awt.EventQueue$3.run(EventQueue.java:660)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 java.awt.EventQueue.dispatchEvent(EventQueue.java:671)
    在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    在 java.awt.EventDispatchThread.pumpEventsForHierarchy（EventDispatchThread.java:151）
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：14
    在 javax.swing.JTable$1.getValueAt(JTable.java:689)
    在 javax.swing.JTable.getValueAt(JTable.java:2720)
    在 javax.swing.JTable.prepareRenderer(JTable.java:5718)
    在 javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684)
    在 javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581)
    在 javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365)
    在 javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276)
    在 javax.swing.JComponent.paintComponent(JComponent.java:778)
    在 javax.swing.JComponent.paint(JComponent.java:1054)
    在 javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    在 javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    在 javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    在 javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    在 javax.swing.JComponent.paintForceDoubleBuffered(JComponent.java:1090)
    在 javax.swing.JViewport.blitDoubleBuffered(JViewport.java:1598)
    在 javax.swing.JViewport.windowBlitPaint(JViewport.java:1559)
    在 javax.swing.JViewport.setViewPosition(JViewport.java:1102)
    在 javax.swing.plaf.basic.BasicScrollPaneUI$Handler.hsbStateChanged(BasicScrollPaneUI.java:1087)
    在 javax.swing.plaf.basic.BasicScrollPaneUI$Handler.stateChanged(BasicScrollPaneUI.java:1038)
    在 javax.swing.DefaultBoundedRangeModel.fireStateChanged（DefaultBoundedRangeModel.java:364）
    在 javax.swing.DefaultBoundedRangeModel.setRangeProperties(DefaultBoundedRangeModel.java:302)
    在 javax.swing.DefaultBoundedRangeModel.setValue(DefaultBoundedRangeModel.java:168)
    在 javax.swing.JScrollBar.setValue(JScrollBar.java:463)
    在 javax.swing.plaf.basic.BasicScrollBarUI$TrackListener.setValueFrom(BasicScrollBarUI.java:1253)
    在 javax.swing.plaf.basic.BasicScrollBarUI$TrackListener.mouseDragged(BasicScrollBarUI.java:1195)
    在 java.awt.Component.processMouseMotionEvent(Component.java:6553)
    在 javax.swing.JComponent.processMouseMotionEvent(JComponent.java:3339)
    在 java.awt.Component.processEvent(Component.java:6274)
    在 java.awt.Container.processEvent(Container.java:2229)
    在 java.awt.Component.dispatchEventImpl(Component.java:4861)
    在 java.awt.Container.dispatchEventImpl(Container.java:2287)
    在 java.awt.Component.dispatchEvent(Component.java:4687)
    在 java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    在 java.awt.LightweightDispatcher.processMouseEvent(Container.java:4509)
    在 java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    在 java.awt.Container.dispatchEventImpl(Container.java:2273)
    在 java.awt.Window.dispatchEventImpl(Window.java:2719)
    在 java.awt.Component.dispatchEvent(Component.java:4687)
    在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703)
    在 java.awt.EventQueue.access$000(EventQueue.java:102)
    在 java.awt.EventQueue$3.run(EventQueue.java:662)
    在 java.awt.EventQueue$3.run(EventQueue.java:660)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    在 java.awt.EventQueue$4.run(EventQueue.java:676)
    在 java.awt.EventQueue$4.run(EventQueue.java:674)
    在 java.security.AccessController.doPrivileged（本机方法）
    在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    在 java.awt.EventQueue.dispatchEvent(EventQueue.java:673)
    在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    在 java.awt.EventDispatchThread.pumpEventsForHierarchy（EventDispatchThread.java:151）
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    在 java.awt.EventDispatchThread.run(EventDispatchThread.java:97)

```

为什么会这样？这个问题有什么解决办法吗？谢谢！

非常抱歉！这是用于初始化表格的代码。希望它有用！

```
jp.setLayout(new BorderLayout());
    JTable jt = new JTable(data, column);// data and columns are just 2D and 1D String arrays each
    JTableHeader th = jt.getTableHeader();
    th.setBackground(java.awt.Color.pink);
    th.setEnabled(true);
    jt.setTableHeader(th);
    jt.setEnabled(false);
    jp.add(jt, BorderLayout.CENTER);
    JScrollPane scrollPane = new JScrollPane(jt, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    jt.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
    scrollPane.setEnabled(false);
    jp.add(scrollPane, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T07:52:00.853

我认为您声明的列数比数据数组中的多。

此代码示例完全重现了您的问题：

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;

public class TestTable {

    public JFrame f;
    private JTable table;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }

    protected void initUI() {
        String[][] data = new String[1][1];
        data[0] = new String[] { "hello" };
        String[] columns = new String[] { "Column-1", "Column-2" };
        table = new JTable(data, columns);
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(300, 300);
        f.setLocationRelativeTo(null);
        f.add(new JScrollPane(table));
        f.setVisible(true);
    }

} 
```

解决方案当然是使数据中的列数与您声明的列数相匹配。并且您应该确保数据数组的每一“行”都使用正确数量的“列”进行初始化。

例如你可以有这个：

```
String[][] data = new String[1][18];
data[0] = new String[15]; // <-- This will cause some problems 
```

现在，我建议使用数组以外的其他数据结构，因为它不是很灵活，而且它们往往难以维护。一个简单的解决方案是拥有一些“模型”类并创建自己的 TableModel，如下所示：

```
import java.util.List;
import java.util.Random;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.AbstractTableModel;

public class TestTable {

    public JFrame f;
    private JTable table;

    public class ModelObject {
        private String column0; // Consider using something more explicit than column0,1,...
        private String column1;

        public String getColumn0() {
            return column0;
        }

        public void setColumn0(String column0) {
            this.column0 = column0;
        }

        public String getColumn1() {
            return column1;
        }

        public void setColumn1(String column1) {
            this.column1 = column1;
        }
    }

    private class TableModel extends AbstractTableModel {

        private List<ModelObject> data;

        protected TableModel(List<ModelObject> data) {
            super();
            this.data = data;
        }

        @Override
        public int getRowCount() {
            return data.size();
        }

        @Override
        public String getColumnName(int column) {
            switch (column) {
            case 0:
                return "Header 0";
            case 1:
                return "Header 1";
            }
            System.err.println("Only two columns are known in this table model");
            return "???";
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            ModelObject o = data.get(rowIndex);
            switch (columnIndex) {
            case 0:
                return o.getColumn0();
            case 1:
                return o.getColumn1();
            }
            System.err.println("Only two columns are known in this table model");
            return null;
        }

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }

    protected void initUI() {
        Random r = new Random();
        Vector<ModelObject> data = new Vector<TestTable.ModelObject>();
        for (int i = 0; i < 10; i++) {
            ModelObject o = new ModelObject();
            o.setColumn0("Some stuff in column 0 " + i);
            o.setColumn1("Some other stuff in column 1 " + r.nextInt());
            data.add(o);
        }
        table = new JTable(new TableModel(data));
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(300, 300);
        f.setLocationRelativeTo(null);
        f.add(new JScrollPane(table));
        f.setVisible(true);
    }

} 
```

这里所有的东西都写在一个类中，但当然你应该将它们分开以正确遵循 MVC 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:22:33.143

答案在这一行：

线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException: 14 at

这意味着它知道它应该有更多的列，并且它想绘制下一列，但不能因为底层表模型没有那么多列。

为表提供 18 列意味着您还需要更新关联的表模型。两者都需要同步才能使表格正常工作。

# php - 搜索表单控制器

> ID：10732112
> 
> 赞同：0
> 
> 时间：2012-05-24T06:16:14.723
> 
> 标签：php

我正在尝试创建一个通用搜索表单（控制器）对象。在我的网站中，我有 4 种不同的搜索表单，例如

在起始页我有一个搜索表单，在列表页面我再次有一个带有更多过滤器的搜索表单，在产品页面上有一个带有产品特定属性过滤器的搜索表单。

我想要的是，当用户从产品页面返回到列表页面时，所有过滤器都应该自动再次选择，如果用户在第 3 页（分页），他应该再次登陆第 3 页。同样从列表开始，应再次填充所有选定的选项。

有没有可用的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:23:38.657

您可以将此信息存储在会话变量中。

例如，每次加载列表页面时，可以将其编号添加到`$_SESSION["page_number"];`变量中。然后，每当列表页面再次加载（例如从产品页面导航）时，会话值用于检索最后查看的页面。表单过滤器和其他选项可以以相同的方式存储。

# matlab - 单元格之间的matlab百分比变化

> ID：10732115
> 
> 赞同：1
> 
> 时间：2012-05-24T06:16:25.830
> 
> 标签：matlab

我是 Matlab 的新手，只是不知道如何做一个可以在 excel 中轻松执行的简单任务。我只是想获得矩阵中单元格之间的百分比变化。我想为此任务创建一个 for 循环。数据设置为以下格式：

```
 DAY1 DAY2 DAY3...DAY 100 
```

主题结果

我只能执行获取两个数据点之间的百分比变化。如果跨越多天和多个主题，我将如何进行？并请提供解释

谢谢一堆

例如，对于第 1 天的主题 1（结果 = 1）、主题 2（结果 = 4）、主题 3（结果 = 5）、第 2 天的主题 1（结果 = 2）、主题 2（结果 = 8）、主题 3（结果 = 10），第 3 天 主题 1（结果 = 1）、主题 2（结果 = 4）、主题 3（结果 = 5）。我想要百分比变化，所以输出将是第 2 天的 SUBJECT1（RESULT=100%）、SUBJECT2（RESULT=100%）、SUBJECT3（RESULT=100%）。DAY3 主题1（结果=50%），主题2（结果=50%），主题3（结果=50%）

更新：

## 嗨，感谢您的回复。对困惑感到抱歉。zebediah49 非常接近我正在寻找的东西。例如，我的数据是 10 x 10 双倍。我只是想获得从列到列的百分比变化。例如，如果我想要所有列（从第 2:10 列）从第 1 行到第 10 行的百分比变化。我希望代码适用于任何矩阵维度（例如，1000 x 1000 双）zebediah49 你能解释一下你发布的代码吗？谢谢

更新2：zebediah49，

(数据(1:end,100)-数据(1:end,99))./data(1:end,99)

输出=[数据(:,2:end)-数据(:,1:end-1)]./data(:,1:end-1)*100;

观察上面的代码，我将如何修改它，以便将第 100 列用作所有其他列（1-99）的索引？如果我将代码更改为以下内容：

(数据(1:end,100)-数据(1:end,:))./data(1:end,:)

matlab 由于超出矩阵尺寸而无法使用。我将如何实施呢？

更新 3

zebediah49,

完美运行！！！最初我为索引创建了一个新变量，并重新计算索引以匹配矩阵，这不是一个好主意。在处理大量数据时，复制需要很长时间。再次感谢您的贡献。

也感谢克里斯的贡献！！！我正在寻找更多关于如何处理和操作矩阵中的数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T06:31:59.747

这是matlab；你实际上并不想要一个循环。

```
output=input(2:end,:)./input(1:end-1,:)*100; 
```

大概会做你想要的。由于您没有提供有关您的 matlab 结构的任何信息，因此您可能必须更改索引顺序等才能使其正常工作。

如果不是很明显，该行将输出定义为由输入矩阵组成的矩阵，除以输入矩阵右移一个元素。`./`运算符很重要，因为它意味着您将每个元素除以其对应的元素，而不是进行矩阵除法。

编辑：要求进一步解释：我假设您希望 % change of the form`1->1->2->3->1`为`100%, 200%, 150%, 33%`. 另一种形式可以通过减法得到`100%`。

`input(2:end,:)`将抓取一个子矩阵，其中第一行被切断。（我把时间放在第一个维度上......如果你想要它的另一种方式`input(:,2:end)`。Matlab 是 1-indexed，并允许你使用特殊值`end`来引用 las 元素。因此，`end-1`是倒数第二个.这里的重点是这个矩阵的元素（i）是原始的元素（i+1）。

`input(1:end-1,:)`，和上面一样，也会抓取一个子矩阵，只是它缺少最后一列。

然后我将元素 (i) 除以元素 (i+1)。由于我选择子矩阵的方式，它们现在排成一行。

作为半图形演示，使用我上面的数字：

```
input:          [1 1 2 3 1]
input(2,end):     [1 2 3 1]
input(1,end-1): [1 1 2 3] 
```

当我进行除法时，它是第一/第一，第二/第二等。

```
input(2:end,:)./input(1:end-1,:):
   [1   2   3   1  ]
./ [1   1   2   3  ]
---------------------
== [1.0 2.0 1.5 0.3] 
```

设置为 (:) 的额外索引意味着它将在所有其他维度上执行该过程。

EDIT2：修订后的问题：如何排除一行，并将其保留为索引。你说你尝试了一些效果`(data(1:end,100)- data(1:end,:))./data(1:end,:)`。Matlab 不会喜欢这样，因为逐个元素的运算符需要它们的大小相同。如果您希望它仅适用于第 100 列，则将第二个索引设置为 is`100`而不是`:`会这样做。相反，我建议将第一个设置为索引，其余设置为数据。因此，通过切断第一个数据来处理数据：

```
output=[data(2:end,2:end)-data(2:end,1:end-1)]./data(2:end,1:end-1)*100; 
```

或者，（如果您忽略开头，matlab 假定`1`为 ；忽略结尾，它`end`假定`(:)`为`(1:end)`.

```
output=[data(2:,2:end)-data(2:,1:end-1)]./data(2:,1:end-1)*100; 
```

但是，您可能仍希望返回索引，在这种情况下，您需要将该子数组附加回来：

```
output=[data(1,1:end-1) data(2:,2:end)-data(2:,1:end-1)]./data(2:,1:end-1)*100]; 
```

不过，这可能不是您应该这样做的方式——将数据保存在一个矩阵中，将时间或其他任何内容保存在一个单独的数组中。这使得对数据执行此类操作变得更加容易，而不必担心排除时间。绘图时特别好。

还有件事儿：

```
(data(:,2:end)-data(:,1:end-1))./data(:,1:end-1)*100; 
```

等同于

```
data(:,2:end)./data(:,1:end-1)*100-100; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:19:27.263

假设 zebediah49 在上面的评论中猜对了并且你想要

```
1  4  5
2  8 10
1  4  5 
```

变成

```
 1    1    1
 -.5  -.5  -.5 
```

然后试试这个：

```
data = [1,4,5; 2,8,10; 1,4,5];
changes_absolute = diff(data);
changes_absolute./data(1:end-1,:)

ans =

    1.0000    1.0000    1.0000
   -0.5000   -0.5000   -0.5000 
```

不需要中间变量，直接写`diff(data)./data(1:end,:)`. 我只是认为上面的内容可能更容易阅读。从该结果到百分比数字留给读者作为练习。:-)

哦，如果你真的想要 50%，而不是 -50%，就`abs`在最后一行使用。

# vbscript - 在 vbscript 中使用 64 位系统上的 32 位驱动程序进行连接

> ID：10732126
> 
> 赞同：0
> 
> 时间：2012-05-24T06:17:36.967
> 
> 标签：vbscript

我有一个 vbscript，它使用 32 位驱动程序连接到一个 .mdb 文件，它在 32 位系统上运行良好，但是当我尝试在 64 位系统（使用 32 位办公室）上运行它时，连接不起作用. 我无法安装 64 位驱动程序，因为系统有 32 位办公室。是否可以在 64 位系统上使用 32 位驱动程序连接到 .mdb 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:54:43.393

对于您的方案，只需确保执行脚本的进程在 32 位上运行。

您可以尝试从 x86 PowerShell 提示符调用您的脚本，以在您的 x64 系统上对其进行测试。

# asp.net-mvc-3 - ASP.NET MVC 请求转发器

> ID：10732129
> 
> 赞同：0
> 
> 时间：2012-05-24T06:17:54.500
> 
> 标签：asp.net-mvc-3, routes, requesthandler

我想实现这种功能：

当客户端向

获取[http://www.myserviceurl.com/rest/facebook/profile/me](http://www.myserviceurl.com/rest/facebook/profile/me)

得到回应

获取[http://graph.facebook.com/profile/me](http://graph.facebook.com/profile/me)

应用程序逻辑将附加所有必要的参数，因此最终 url 将如下所示：

graph.facebook.com/profile/me?access_token=XXX

相似的，

POST myserviceurl.com/rest/twitter/statuses/update.json，发布数据状态=Maybe%20he%27ll%20finally%20find%20his%20keys.%20%23peterfalk&trim_user=true&include_entities=true

->

POST api.twitter.com/1/statuses/update.json 与 POST 数据状态=Maybe%20he%27ll%20finally%20find%20his%20keys.%20%23peterfalk&trim_user=true&include_entities=true

通过这种方式，我想创建一个抽象层，并允许我的客户使用与提供者休息 url 相同的结构来调用我的休息服务。

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:53:45.580

也许您可以使用[Facebook C# SDK](http://csharpsdk.org/)（基本上是 Facebook Graph API 的包装器）从 Facebook 获取 json 数据并将其返回给您的用户。

# java - 读取属性文件

> ID：10732132
> 
> 赞同：0
> 
> 时间：2012-05-24T06:18:15.890
> 
> 标签：java, intellij-idea, maven-3

```
propsdatabase = new Properties();    
try 
{
    // load a properties file
    InputStream dbin = getClass().getResourceAsStream("/database.properties");

    //props.load(in);
    propsdatabase.load(dbin);    
} 
catch (IOException ex) 
{
    ex.printStackTrace();
} 
```

我想访问一个不在 jar 文件中的文件。就在jar文件的位置。

我在 main/resources 文件夹中使用名为 database.properties 的属性文件。要求是更改 jar 外的 database.properties 的位置。

所以我需要一些路径可以指向 jar 所在位置的东西。

我正在使用 Maven 来构建我的 jar

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:23:37.740

```
FileInputStream dbin = new FileInputStream("/my/folder/database.properties"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:27:51.023

您可以通过为专业人士定义绝对路径以两种方式完成

```
Class.getResourceAsStream ("/some/pkg/resource.properties"); 
```

和

```
 ResourceBundle.getBundle ("some.pkg.resource"); 
```

# unit-testing - TFS Build Server 检测进行签入的用户

> ID：10732140
> 
> 赞同：0
> 
> 时间：2012-05-24T06:18:37.433
> 
> 标签：unit-testing, tfs, build

我们在构建服务器上进行了持续集成。每次签到后自动测试的程序会发送一些电子邮件。我们希望将这些电子邮件发送给进行签到的用户。有什么方法可以获取在开始单元测试时进行签入的用户的名称。

最好的办法是，如果我们能以某种方式访问​​在 AssemblyInitialize 方法中进行签入的用户的名称。

注意：此请求不是关于发送测试报告，而是关于在运行所有单元测试之前更改应用程序配置文件中的电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:31:00.203

您可以更改构建过程工作流以从当前 Shelveset（类型定义在 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies\Microsoft.TeamFoundation.VersionControl.Client.dll）中获取OwnerDisplayName（目前它只是带有域的登录名，因此您应该进行一些 AD 查找以从 AD 获取纯名称和电子邮件）。获得此信息后，您可以检查测试结果是否为 gree。如果没有在默认模板中引发异常。抓住它并将邮件发送给用户并重新抛出异常。

在测试级别，由于 TFS 具有测试代理，因此无法看到它

1.  可以在构建代理之外的另一台机器上运行（无源代码，无源控制，...）
2.  可以在多台机器上并行运行（从您的测试人员发送失败邮件 6 次？）

您正在尝试解决错误级别的问题（内部测试）。您可以毫无问题地轻松更改构建过程模板。

# hibernate - Hibernate Jar 与 grails 2.0.3 冲突

> ID：10732145
> 
> 赞同：2
> 
> 时间：2012-05-24T06:18:54.610
> 
> 标签：hibernate, grails

我有一个 grails(2.0.3) 应用程序，它依赖于另一个使用休眠 jar 的项目，即：

**`org.hibernate:hibernate-core:4.1.0.Final`**

和

**`org.hibernate:hibernate-entitymanager:4.1.0.Final`**

当我运行使用这些 jar 的那部分代码时，它会遇到异常：-

```
java.lang.ClassNotFoundException: org.hibernate.ejb.HibernatePersistence
    at org.codehaus.groovy.tools.RootLoader.findClass(RootLoader.java:156)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at org.codehaus.groovy.tools.RootLoader.loadClass(RootLoader.java:128)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

它就像 grails 正在使用的休眠版本的 jar 冲突问题一样发生（我不确定）。我该如何解决这个问题。

（切换依赖项目的休眠版本会很困难。所以我可以在不选择该选项的情况下解决这个问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:25:41.750

最终通过将 3.6 版的休眠 jar 用于依赖应用程序来解决此问题。Grails 似乎正在使用这个版本。这消除了冲突问题。:-)

# installation - 在 .deb 包升级期间更改 gconf 架构的正确方法是什么？

> ID：10732150
> 
> 赞同：1
> 
> 时间：2012-05-24T06:19:33.613
> 
> 标签：installation, packaging, deb, gconf

我对一个开源包（Guake）做了一些修改，我不得不改变 gconf 模式中一些键的类型。

问题是，当我安装我构建的新 .deb 时，在 gconf 中设置的键仍然是旧类型，直到它们被取消设置，即使新模式已被复制到位。

我认为正确的解决方法是让安装过程取消设置密钥，但这是我第一次制作 .deb 文件，但我无法弄清楚如何做到这一点。将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:02:53.033

如果我们谈论的是默认值，那么如果用户已经设置了这些键，它们就不会改变。用户的偏好优先。

# jquery - $.datetimepicker 未定义

> ID：10732154
> 
> 赞同：0
> 
> 时间：2012-05-24T06:20:01.663
> 
> 标签：jquery, jquery-ui, undefined, datetimepicker

我从这个站点遇到了 datetimepicker 的问题：

[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

这是js代码：

```
var dates = $("#ArrivalStartDatepicker").datetimepicker({

defaultDate: "+lw",

dateFormat: 'dd-mm-yy',

changeMonth: true,

numberOfMonths: 2,

ampm: true,

stepMinute: 10,

minuteGrid: 10,

onSelect: function (selectedDate) {

// var option = this.id == "ArrivalStartDatepicker" ? "minDate" : "maxDate",

// instance = $(this).data("datetimepicker"),

document.getElementById("TotalLabel").value = $.datetimepicker.parseDate('yy-mm-dd', '2012-05-23');

// instance.settings.dateFormat ||

// $.datetimepicker._defaults.dateFormat,

// selectedDate, instance.settings);

// dates.not(this).datetimepicker("option", option, date);

// document.getElementById("TotalLabel").value = date;

}

}); 
```

这是我的日期时间选择器的 html 代码

```
<div class="txtTravel" id="DatetimePickerContainer1">
<input id="ArrivalStartDatetimepicker" type="text" name="datetimepicker" placeholder="dd-mm-yyyy hh:mm am"/>
</div> 
```

这是这个 .aspx 网站的负责人

```
<%@ Page Title="GH" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="GH.aspx.cs" Inherits="GBCalc.GH" MaintainScrollPositionOnPostback="True"%>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
    <link rel="stylesheet" type="text/css" href="Styles/timepicker.css" />
    <link href="Styles/base/jquery.ui.base.css" rel="stylesheet" type="text/css" />
    <link href="Styles/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
    <link href="Styles/base/jquery.ui.theme.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        div.txtGeneral{position: relative; left: 110px; top: 55px; margin-top: 1.5px;}
        div.lblGeneral{position:relative; left: -6px; top: 75px; margin: 1.5px; font-size: small;}
        div.txtJob{position: absolute; top: 92px; left: 520px; }
        div.lblJob{position: absolute; top: 92px; left: 370px; font-size: small;}
        div.txtTravel{position: relative; left: 200px; top: 70px;}
        div.lblTravel{position: relative; left: 0px; top: 90px; margin: 1.5px; font-size: small;}
        div.txtWork{position: relative; left: 250px; top: 0px;}
        div.lblWork{position: relative; left: 20px; top: 20px; margin: 1.5px; font-size: small;}
        div.lblMisc{position: relative; left: -5px; top: -1px; margin: 1.5px; font-size: small;}
        div.txtMisc{position: relative; left: 170px; top: -20px;}
    </style>
    <script src="Scripts/ui/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="Scripts/ui/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script>
    <script src="Scripts/ui/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
    <script src="Scripts/ui/molschaua.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

        <asp:DropDownList ID="SubsidiaryCalcDropDownList" runat="server" 
        ToolTip="Subsidiary maker of the Calculation">
        </asp:DropDownList>
        <br />
        <br /> 
    <div id="MyAccordion"> 
```

问题是如果我打开网站会显示日期时间选择器，但是一旦我选择日期或时间，萤火虫就会抛出一个名为“$.datetimepicker 未定义”的错误

`document.getElementById("TotalLabel").value = $.datetimepicker.parseDate('yy-mm-dd', '2012-05-23');`此错误在此行“ ”中引发

我想将我在 datetimepicker 中选择的值传递给我的代码隐藏 c# 方法。我的问题在哪里？

我导入了所有需要的 js 文件，在我看来，我得到了正确的导入顺序。

问候

托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:36:55.567

parseDate[方法](http://docs.jquery.com/UI/Datepicker/parseDate)不是来自插件，而是来自 jquery ui。
替换`$.datetimepicker.parseDate(...)`为`$.datepicker.parseDate(...)`：

```
document.getElementById("TotalLabel").value = $.datepicker.parseDate('yy-mm-dd', '2012-05-23'); 
```

# google-app-engine - RequestDispatcher 自定义加载器

> ID：10732158
> 
> 赞同：0
> 
> 时间：2012-05-24T06:20:16.920
> 
> 标签：google-app-engine, jakarta-ee, servlets, jetty

我正在尝试使用 Google App Engine 做一些疯狂的事情 - 一个目标是通过创建捆绑包（jar/zip/tar 文件）来减少要上传的文件数量。

想知道是否有办法告诉 Servlet 引擎使用自定义文件系统实现来加载 JSP 文件，特别是在方法`ServletContext::getRequestDispatcher`和`HttpServletRequest::getRequestDispatcher`？

# excel - Excel 可用资源

> ID：10732159
> 
> 赞同：0
> 
> 时间：2012-05-24T06:20:17.310
> 
> 标签：excel

因此，在上周，当我使用工作表左上角的箭头选择整个文件时，Excel (2010) 开始出现此错误消息：“Excel 无法使用可用资源完成此任务。选择更少的数据或关闭其他应用程序。”

但如果我只选择它会排序的列。仅当使用左上角的全选按钮时。

在我的机器上，我的内存使用似乎都没有异常。我已经关闭了所有其他程序，只使用了 excel，但没有骰子。

有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:29:53.623

一切的格式是统一的还是至少有点统一？有时，如果我有不同的粗体元素或纯色背景等，不时给我带来问题......

# c# - 在本地计算机上验证用户凭据

> ID：10732161
> 
> 赞同：1
> 
> 时间：2012-05-24T06:20:20.287
> 
> 标签：c#, .net, authentication

我有一个 Windows 服务（以本地系统用户身份运行），除了检查用户是否属于 WSMA 组外，还需要根据用户名和密码验证用户。我当前的代码是这样的：

```
var pc = new PrincipalContext(ContextType.Machine);
using (pc)
{
  try
  {
    if (pc.ValidateCredentials(username, password))
    {
      using (var groupEntry = new DirectoryEntry("WinNT://./WSMA,group"))
      {
        foreach (object member in (IEnumerable)groupEntry.Invoke("Members"))
        {
          using (var memberEntry = new DirectoryEntry(member))
          {
            if (memberEntry.Path.ToLower().EndsWith(username.ToLower()))
            {
              return new LoginResult{ success = true };
            }
          }
        }
      }
    }
    return new LoginResult{ success = false };
  }
  catch (PrincipalOperationException poe)
  {
    if (poe.ErrorCode == -2147023688)
    {
      return new LoginResult { Success = false, ErrorMessage = "Password expired" };
    }
    throw poe;
  }
} 
```

只要我连接到网络，这一切都可以正常工作，但是如果我拔掉网线，那么 ValidateCredentials 调用会给我以下错误消息：

***用户代码未处理的 FileNotFoundException。找不到网络路径。***

我想这与 AD 有关，但我只需要检查本地用户，而不是域用户，因此不需要网络访问。

有什么方法可以使用 PrincipalContext 或其他在断开连接的情况下工作的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:36:16.420

这是一种登录用户的方法（从而检查它是否是有效的用户/通行证）：[MSDN Link](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsimpersonationcontext.aspx)

如果您使用本地帐户，我想这也应该断开连接

# c# - 如何在 Oracle 数据库中实现自定义成员资格和角色

> ID：10732162
> 
> 赞同：0
> 
> 时间：2012-05-24T06:20:24.737
> 
> 标签：c#, oracle, custom-membershipprovider

如何在 Oracle DB 中实现自定义成员资格和角色。我们需要为成员函数编写重载吗？如果是，那么如何？

oracle 的成员资格和角色的数据库模式在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:25:20.020

您应该使用自定义成员资格提供程序。当您创建一个从membershipprovider 继承的类时，它应该自动实现所有正确的类。如果您想添加一些自定义功能，您还可以覆盖membershipuser。

```
public class CustomMembershipProvider : System.Web.Security.MembershipProvider 
```

我会将自定义成员资格提供程序用作容器，因此我将使用另一个类来处理所有数据库调用等。

```
 public override string GetPassword(string username, string answer)
    {
        return ProfileManager.GetPassword(username);
    } 
```

例如在 ProfileManager 中：

```
 public static string GetPassword(string username)
    {
        if (!username.Contains("custom\\")) return String.Empty;

        MijnGazelleEntities container = new CustomEntities();
        Users gebruiker = container.Users.FirstOrDefault(g => g.Email == username.Replace("mijngazelle\\", String.Empty));
        string password = gebruiker != null ? gebruiker.Password : String.Empty;

        container.Connection.Close();
        return password;
    } 
```

# email - 编码 HTML 电子邮件时是否需要使用间隔图像？

> ID：10732164
> 
> 赞同：12
> 
> 时间：2012-05-24T06:20:34.143
> 
> 标签：email, html-email

我知道 HTML 电子邮件需要使用非常老派的布局 - 根据 SO 上的许多其他答案（例如[HTML 电子邮件：表格或 div？，](https://stackoverflow.com/questions/2935472/html-email-tables-or-divs)[使用 CSS](https://stackoverflow.com/questions/1189976/html-email-using-css)的HTML 电子邮件）。

然而，对于在电子邮件中使用间隔 gif 是否仍然是一个好主意，似乎存在一些争论。

例如，比较这三种布局：

方面：

```
<table cellpadding="0" cellspacing="0" border="0" width="100">
  <tr>
    <td width="100" height="10"></td>
  </tr>
</table> 
```

带间隔 GIF：

```
<table cellpadding="0" cellspacing="0" border="0">
  <tr>
    <td><img src="spacer.gif" width="100" height="10"></td>
  </tr>
</table> 
```

带间隔 GIF 和尺寸：

```
<table cellpadding="0" cellspacing="0" border="0" width="100">
  <tr>
    <td width="100" height="10"><img src="spacer.gif" width="100" height="10"></td>
  </tr>
</table> 
```

如何将它们与尺寸一起使用？是否有仍然需要间隔 gif 的电子邮件客户端？这两种方式有什么危害吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T06:20:34.563

就个人而言，我从不使用间隔 gif，因为它们会在图像阻塞关闭时破坏布局，原因有以下三个：

1.  如果它们根本不渲染，则任何需要间隔图像的布局都会丢失。
2.  如果它们渲染不正确（例如恢复到原始大小，或与其原始大小成比例），它们会破坏布局。
3.  即使它们正确渲染并且布局有效，打开图像阻止时显示的所有图像占位符也会分散电子邮件消息的注意力。

要解决问题 #2，您可以保存每个图像的实际尺寸。然而，这显然增加了：

*   建造时间
*   客户端要下载的图像数量

它不能解决问题#1 和#3。

使用间隔 gif 的原因是因为某些客户端（Outlook 2007、Outlook 2010、Lotus Notes、Hotmail / Live Mail）不会呈现空单元格。在文本节点的尺寸上获得绝对精度是非常困难的，因此间隔图像就足够了。**但是，即使是提到的那些客户端也会呈现一个具有定义宽度**的空单元格。

因此，只要您在任何空单元格上定义像素宽度就可以了。回到问题中的示例：

*   仅尺寸 - 在所有主要电子邮件客户端中使用和不使用图像阻止功能
*   仅间隔图像 - 仅在图像阻止关闭时有效
*   尺寸和间隔图像 - 仅在图像阻止关闭时有效

因此，**您应该使用尺寸而不是间隔 gifs**。

各种文章也讨论了这个问题（在页面上搜索“间隔图像”）

*   [http://www.banane.com/workblog/?p=61](http://www.banane.com/workblog/?p=61)
*   [http://www.campaignmonitor.com/design-guidelines/](http://www.campaignmonitor.com/design-guidelines/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T01:51:12.280

您绝对可以避免使用间隔 gif。

我发现以下代码适用于所有客户端。我通常指定这些空单元格的宽度或高度。这个具体的例子是我用来创建垂直空间的：

```
<tr>
 <td style="line-height: 0; font-size: 0;" height="10">&nbsp;</td>
</tr> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-19T14:27:54.427

如果你让你的单元格高于 19px（Outlook 的最小默认高度），你永远不需要使用 line-height，一个简单的`<td height="20">&nbsp;</td>`效果很好。例子：

```
<table width="600" border="0" cellpadding="0" cellspacing="0" bgcolor="#CCCCCC">
  <tr>
    <td align="center">
      top
    </td>
  <tr>
  </tr>
    <td height="20">
      &nbsp;
    </td>
  <tr>
  </tr>
    <td align="center">
      bottom
    </td>
  </tr>
</table> 
```

但是，对于垂直间距，在大多数情况下，您可能可以避免这样做并在上方或下方的行中添加填充：

```
<table width="600" border="0" cellpadding="0" cellspacing="0" bgcolor="#CCCCCC">
  <tr>
    <td align="center">
      top
    </td>
  <tr>
  </tr>
    <td align="center" style="padding-top:20px;">
      bottom
    </td>
  </tr>
</table> 
```

或者像这样，没有填充：

```
<table width="600" border="0" cellpadding="0" cellspacing="0" bgcolor="#CCCCCC">
  <tr>
    <td align="center">
      top
    </td>
  <tr>
  </tr>
    <td align="center">
      &nbsp;<br>
      bottom
    </td>
  </tr>
</table> 
```

请注意我使用的最后一个示例，`&nbsp;<br>`而不仅仅是`<br>`. 这是因为 Outlook 将折叠其中没有内容的任何行或单元格。`&nbsp;`这与原始示例在间隔单元中也有 a 的原因相同。如果您要在下面添加多行或填充，它将如下所示：

```
<td align="center">
  &nbsp;<br>
  &nbsp;<br>
  &nbsp;<br>
  bottom
  <br>&nbsp;
  <br>&nbsp;
  <br>&nbsp;
</td> 
```

没有间隔单元的这两个选项有几个好处。首先是它更快并且包含更少的代码。第二个是当有人将您的电子邮件转发出 Outlook 时，它的呈现更加一致。Outlook 出色的 MS Word 引擎将所有内容都包装在`<p>`标签中，这在行之间添加了不可避免的间隙。少一行将使您的电子邮件更接近您的原始设计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T14:55:51.100

注意：Outlook 2007/2010 将空单元格视为空格。AND 对它们应用默认文本和背景颜色属性。（因此，如果您的用户喜欢紫色背景，则没有颜色的单元格会出现紫色背景）。

要以这种方式偏移这种格式，您的空白间隔单元格：

```
<td width=(a percentage or a pixel width) height=(optional unless needed) bgcolor="#FFFFFF(always use 6 digit hex!)" style="font-size:1px; line-height:1px;")>&nbsp;</td> 
```

# wxpython - 在 customtreectrl 中保留复选框的状态

> ID：10732171
> 
> 赞同：0
> 
> 时间：2012-05-24T06:20:48.413
> 
> 标签：wxpython

我在 wxpython 中使用带有复选框的 customtreectrl。提交后，我想将复选框的状态保存在 customtreectrl 中。如何使用复选框保存 customtreectrl 的选中状态。请帮助我。苏什玛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:48:11.283

尝试使用 AGW 包中的“persist”库。这将允许您跨会话保存（几乎）任何 wxPython 小部件的状态。请参阅 AGW 库中的 PersistentControls 演示。

# objective-c - 运行时的 PNG 字节交换

> ID：10732175
> 
> 赞同：0
> 
> 时间：2012-05-24T06:21:02.253
> 
> 标签：objective-c, ios, pngcrush

我有一个在运行时生成图像缩略图的应用程序。但它们并不是 Xcode 在将图像添加到项目时创建的优化格式。是否有可以用来转换这些图像的库或函数调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:57:14.670

**指示：**

1.  从以下网址下载 DHowett（感谢 DHowett！）代码：[https ://github.com/DHowett/pincrush](https://github.com/DHowett/pincrush)
2.  解压缩并重命名为 DHowett 并放在我放置的 XCode 示例项目旁边（[https://www.box.com/s/7dfb3e6f430d98d933c2](https://www.box.com/s/7dfb3e6f430d98d933c2)），然后运行...

**如果/当您从头开始构建自己的项目时，请在解压缩后立即执行以下操作，然后再将文件夹添加到您的项目中：**

1.  从文件夹中删除所有 makefile 文件
2.  将文件夹拖到您的项目中
3.  为了克服编译器警告“函数'pincrush'的隐式声明在C99中无效”，将项目设置“C语言方言”更改为“GNU89”
4.  构建时，您将收到错误“'png.h”文件未找到“ - 要修复它，请将 DHowett/libpng 添加到项目的标题搜索路径
5.  打开pincrush.c并注释掉“usage”和“main”函数（你不需要它们，第一个导致编译错误，第二个导致链接错误）
6.  添加对 crush 的外部引用... 见下文： extern void crush(const char *infilename, const char *outfilename);
7.  可以忽略“NEXT”宏引起的“Unused Entity Issue”的8个编译警告
8.  您可能需要从项目中删除 .git* 文件（一些 annyoing 警告...）

    欣赏，祝你好运！

# android - android http获取请求无限循环

> ID：10732176
> 
> 赞同：0
> 
> 时间：2012-05-24T06:21:03.673
> 
> 标签：android

出于某种原因，当我发出 GET 请求时，它似乎进入了无限循环。我认为这是我的网络应用程序有问题，但在尝试 google.com 后，出现了相同的结果。

```
 try {
        URL url = new URL("http://google.com");

        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        con.setReadTimeout(10000 /* milliseconds */);
        con.setConnectTimeout(15000 /* milliseconds */);
        con.setRequestMethod("GET");
        con.setDoInput(true);
        con.connect();

        InputStream is = con.getInputStream();
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));

        for (String line = reader.readLine(); line != null;) {
            System.out.println(line);
        }
        reader.close();

    } catch (ClientProtocolException e) {
        System.out.println("Client Exception " + e.getMessage());
    } catch(IOException e) {
        e.printStackTrace();
        System.out.println("IOException " + e.getMessage());
    } 
```

这段代码永远不会通过 for 循环。它只是继续打印。任何人都看到有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:25:06.030

问题就在这里

```
for (String line = reader.readLine(); line != null;) {
    System.out.println(line);
} 
```

“line”始终是输入的第一行。您需要阅读新行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:25:14.343

line = reader.readLine() 每次循环运行时都应该调用，但在你的代码中只运行一次，因为它是初始化部分的一部分..

![在此处输入图像描述](../Images/7e2b649c4f0e6919eeee7e614f2f2433.png)

试试看

```
for (; (line =reader.readLine()) != null;) {

    }

or 

  while ((line = br.readLine()) != null) {} 
```

# iphone - 如何获取放置在资源文件夹目录中的元数据的标题

> ID：10732186
> 
> 赞同：0
> 
> 时间：2012-05-24T06:21:52.173
> 
> 标签：iphone

我是 iphone 编程新手。我想获取位于资源文件夹目录中的 mp3 文件的标题

资源文件夹结构如下

资源

raj(目录)---->1.mp3 ---->2.mp3

在这里，如果我得到它显示的路径，我知道要获取文件的路径

/Users/Chary/Library/Application Support/iPhone Simulator/5.0/Applications/B02404E5-52DC-49B6-8DBB-C9946E4331AF/BiblePlayer.app/raj/1.mp3

我有一个选择器视图，因为对于 1.mp3 和 2.mp3，我只需要显示像“1”、“2”这样的标题，但是如何才能像这样显示整个路径

所以，如果有人知道这一点，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:40:04.023

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSFileManager *fileManager = [NSFileManager defaultManager];
//Provide another path if you have folder in your directory
NSArray *arrDirVideos = [fileManager  contentsOfDirectoryAtPath:documentsDirectory error:nil]; 
```

它将为您在数组中提供的路径提供所有文件，例如 { 1.mp3,2.mp3,..} 所以现在您可以从数组的每个项目中删除 .mp3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:32:48.390

用这个：

```
NSString * mp3FilePath = [[NSBundle mainBundle]
                                    pathForResource:@"1"
                                             ofType:@"mp3"]; 
```

# clojure - clojure 中通常的命名规则是什么？

> ID：10732187
> 
> 赞同：14
> 
> 时间：2012-05-24T06:21:53.297
> 
> 标签：clojure, naming, naming-conventions

如我所见，clojure 的变量名字符比 c/c++/java 多。例如：

函数以“？”结尾 通常返回一个布尔值，它们是谓词。

还有以“-”开头或以“！”结尾的变量。

我认为这些都是clojure风格的命名。那么，clojure 中通常的命名规则是什么？clojure 程序员有什么共同点吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-24T07:38:56.380

值得一看 Clojure 的[库编码标准](http://dev.clojure.org/display/community/Library+Coding+Standards)，我认为它可能仍然是 Clojure 编码风格的最佳参考。

主要函数命名约定似乎是：

*   使用小写的函数名：`frobnicate`
*   多个单词名称使用连字符作为分隔符：`frobnicate-with-extra-fizz`
*   如果需要，使用命名空间允许您重用好名称：`my.special.collection/concat`
*   用于`?`指示返回 true 或 false 的谓词：`sequential?`
*   用于`!`指示具有不安全交易的副作用的函数，例如：`set!`

对于局部变量，以下是常见的：

*   `f`, `g`, `h`- 函数
*   `n`- 表示大小或计数的整数
*   `index`, `i`- 整数索引
*   `x`, `y`- 数字
*   `s`- 字符串输入
*   `coll`- 一个集合
*   `pred`- 谓词闭包
*   `& more`- 可变输入

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T06:30:02.917

Clojure 是 Lisp 的一种方言，因此可能适用 Lisp 约定：http: [//www.cliki.net/naming%20conventions](http://www.cliki.net/naming%20conventions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T16:33:42.640

除了@mikera 提到的库编码标准外，现在还有一个（社区驱动的）Clojure 样式指南：[https ://github.com/bbatsov/clojure-style-guide](https://github.com/bbatsov/clojure-style-guide)

# session - 快速修复会话配置问题

> ID：10732191
> 
> 赞同：2
> 
> 时间：2012-05-24T06:22:19.057
> 
> 标签：session, config, quickfix

我已经编译并浏览了 quickfix ( [http://www.quickfixengine.org](http://www.quickfixengine.org) ) 源代码和示例。我认为一个好的起点是编译（C++）并运行“executor”示例，然后使用“tradeclient”示例连接到“executor”，并向其发送订单请求。我创建了两个单独的会话文件，一个用于“执行者”作为接受者，一个用于“贸易客户”作为发起者。它们都在同一台 Win7 电脑上运行。

'executor' 运行，但 tradeclient 无法连接到它，我不知道为什么。我下载了 Mini-fix 并能够向 executor 发送消息，所以我知道 executor 正在工作。我认为问题出在 tradeclient 会话设置上。我已将它们都包括在下面，我希望有人能指出导致它们无法交流的原因。它们都使用端口 56156 在同一台计算机上运行。

--acceptor session.txt----

```
[DEFAULT]
ConnectionType=acceptor
ReconnectInterval=5
SenderCompID=EXEC
DefaultApplVerID=FIX.5.0

[SESSION]
BeginString=FIXT.1.1
TargetCompID=SENDER
HeartBtInt=5
#SocketConnectPort=
SocketAcceptPort=56156
SocketConnectHost=127.0.0.1
TransportDataDictionary=pathToXml/spec/FIX50.xml
StartTime=07:00:00
EndTime=23:00:00
FileStorePath=store 
```

---- 发起者 session.txt ---

```
[DEFAULT]
ConnectionType=initiator
ReconnectInterval=5
SenderCompID=SENDER
DefaultApplVerID=FIX.5.0

[SESSION]
BeginString=FIXT.1.1
TargetCompID=EXEC
HeartBtInt=5
SocketConnectPort=56156
#SocketAcceptPort=56156
SocketConnectHost=127.0.0.1
TransportDataDictionary=pathToXml/spec/FIX50.xml
StartTime=07:00:00
EndTime=23:00:00
FileLogPath=log
FileStorePath=store 
```

- - - - 结尾 - - -

更新：感谢您的共鸣...原来我的日志文件目录不存在。一旦我创建了它们，它们就开始交流。一定是一些没有引发异常但禁用正确行为的日志记录错误。

是否有我应该检查的错误情况？我依赖异常，但这显然还不够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:09:30.547

它似乎不是配置，请检查您的消息序列号是否同步，特别是因为您一直使用相同的设置连接到不同的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:26:22.727

尝试将接受器上的`TargetCompID`and设置为`SenderCompID``*`

# android - 错误：警报（无法启动接收器）

> ID：10732196
> 
> 赞同：0
> 
> 时间：2012-05-24T06:22:41.537
> 
> 标签：android, broadcastreceiver, alarmmanager

请告知我的代码有什么问题...我不断收到此异常任何建议将不胜感激。

```
STACK_TRACE=java.lang.RuntimeException: Unable to start receiver com.platinumapps.platinumtasks.AlarmReceiver: java.lang.NullPointerException
at android.app.ActivityThread.handleReceiver(ActivityThread.java:1975)
at android.app.ActivityThread.access$1400(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1074)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4123)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.platinumapps.platinumtasks.AlarmReceiver.onReceive(AlarmReceiver.java:109)
at android.app.ActivityThread.handleReceiver(ActivityThread.java:1968)
... 10 more
java.lang.NullPointerException
at com.platinumapps.platinumtasks.AlarmReceiver.onReceive(AlarmReceiver.java:109)
at android.app.ActivityThread.handleReceiver(ActivityThread.java:1968)
at android.app.ActivityThread.access$1400(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1074)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4123)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:06:03.997

它是一个空指针异常。意味着您正在调用的内容未正确启动，或者您无权访问该部分（例如，没有在 AndroidManifest 中标记活动。或者没有包含权限 jar 等）如果您需要更好的帮助，请发布您正在使用的代码。

# facebook-graph-api - 如何使用相同的动作类型/对象在我的应用程序中获取来自我朋友的活动？

> ID：10732202
> 
> 赞同：1
> 
> 时间：2012-05-24T06:23:06.353
> 
> 标签：facebook-graph-api, facebook-opengraph

我创建了一个新的动作类型**ler**（用我的语言翻译为“阅读”）和一个名为**reportagem**的对象（类似于内置对象“新闻”）。

我在graph api explorer上试过这个：

```
me/friends/reportagem.lerem 
```

根据我的动作类型和对象的配置，这应该是在我的应用程序中找到我的朋友活动的正确方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:35:19.877

如果您想查看给定操作的好友活动，则必须使用操作 ID 而不是`namespace.action`方法查询 Graph API。

例如，我的操作 ID 是：`1234567890`

如果我想读取我朋友的相同动作的动作，调用 Graph API 如下：

`GET https://graph.facebook.com/friend.name/1234567890`

如果您有权限，上述调用将列出朋友在 App 中的操作。

`Open Graph`您可以从页面中的部分获取操作 ID `App Settings`。检查 URL（类似于）：

`https://developers.facebook.com/apps/{app_id}/opengraph/action_type/{action_id}`

# asp.net - MySQL 数据访问层：您如何存储查询？

> ID：10732211
> 
> 赞同：2
> 
> 时间：2012-05-24T06:24:05.703
> 
> 标签：asp.net, mysql, visual-studio-2010, data-access-layer

我作为独立开发者构建这个项目已经有一段时间了，虽然我在前端和中间层很舒服，但我并不认为我正在按照我应该的方式来做数据库，以及原因为什么是因为我根本不知道任何其他方式。我目前获取数据的方式是在我的 MySQL 工作台中测试查询，并将 SQL 作为字符串文字复制并粘贴到调用数据库、提取数据和水合我的对象的方法中。

直到最近，当我不得不创建一个查询怪物时，这才真正成为问题，这让我想到也许有更好的方法来做到这一点。我没有分离出正式的 DAL，所以我知道那里还有改进的空间，但我很好奇存储 SQL 字符串的正确方法是什么。我假设在 VS10 中内置了一个工具，我可以在其中将 SQL 作为 SQL 而不是作为字符串来操作和使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:29:22.737

您应该在存储过程中执行此操作。这将基本上格式化和存储您的查询。您设置从代码传入的参数，然后读出结果。

例子：

C#方法：

```
private void SetNote()
{
    const string sql = "sp_SelectControllerNoteByID";
    using (var conn = MocSystem.GetMocDbConnection())
    {
        using (var comm = new SqlCommand(sql, conn))
        {
            comm.CommandType = CommandType.StoredProcedure;
            comm.Parameters.Add(new SqlParameter("@ControllerNoteID", ControllerNoteId));
            try
            {
                conn.Open();
                using (var rdr = comm.ExecuteReader())
                {
                    while (rdr.Read())
                    {
                        CommentText = rdr["NoteText"].ToString();
                        _commentor = new User(new Guid(rdr["NoteAuthor"].ToString()));
                        CommentDate = (DateTime)rdr["NoteDate"];
                        MocRequestId = (int)rdr["MocRequestID"];
                    }
                }
            }
            catch (Exception ex)
            {
                HasError = true;
                ErrorMessage += "\nThere was a problem building the note: " + ex.Message;
            }
        }
    }
} 
```

DBMS（本例中为sql server）上的存储过程：

```
ALTER proc [dbo].[sp_SelectControllerNoteByID]
    @ControllerNoteID   int
AS
    SELECT
        ControllerNoteID,
        NoteText,
        NoteDate,
        NoteAuthor,
        MocRequestID
    FROM
        ControllerNotes
    WHERE
        ControllerNoteID = @ControllerNoteID 
```

所以这里我们调用存储过程，在这种情况下它只是一个简单的选择语句，然后我们通过 ADO 将它读入一个对象。现在，通过这种方式，您可以修改查询而无需重新编译。除非您添加参数，否则您还必须在代码中更新这些参数。

# github - Jenkins GitHub 克隆权限被拒绝

> ID：10732215
> 
> 赞同：0
> 
> 时间：2012-05-24T06:24:28.337
> 
> 标签：github, jenkins, git-clone, jenkins-plugins

在 Jenkins 中运行作业以克隆我的 repo 的 devel 分支时，出现以下错误：

```
stderr: Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

我在 CentOS 6 上运行 Jenkins 并正确设置了 GitHub Hooks。我该如何纠正？即使我安装了 GitHub 插件并使用有权访问私有组织存储库的有效用户，我是否需要部署密钥？

我的 jenkins 服务器有一个 github 帐户，dsa 密钥位于已添加到 github 帐户的 /var/lib/jenkins/.ssh 中，并且仍然出现此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:26:38.560

不确定您所说的“我已经安装了 GitHub 插件，并且有一个可以访问私有组织存储库的有效用户”并且我对 Jenkins 不熟悉，但您肯定需要在该存储库中添加一个部署密钥来验证您的请求。我认为您刚刚指定了 git 全局作者姓名等。

# java - 具有不同编程语言的 TCP

> ID：10732216
> 
> 赞同：-1
> 
> 时间：2012-05-24T06:24:35.543
> 
> 标签：java, networking

我对java套接字编程有疑问。tcp 服务器是创建 Java Socket 编程并在不同的机器上运行。现在我想为服务器创建一个客户端以从服务器请求一些数据。我是否需要使用相同的 Java 套接字编程，或者我可以使用不同的 API 与服务器通信并获得响应？

谢谢，普拉莫德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:31:01.500

您还必须使用套接字，但在 Java 中不是必须的。几乎任何编程语言都可以基于 TCP/IP 或 UDP 套接字与不同的机器通信。您甚至可以使用诸如[`nc`](http://linux.die.net/man/1/nc)测试服务器之类的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T06:25:51.113

如果服务器使用套接字，那么是的，客户端也应该使用套接字 API 编写。这可以用任何编程语言完成，不一定是 Java。

为了让您有更广阔的视野，还有其他允许两个进程通信的技术（[RMI](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html)、[zeromq](http://www.zeromq.org/)等）。然而，通信双方几乎总是必须使用相同的技术才能相互交谈。

# windows-phone-7 - WP7 XNA：是否绘制方法

> ID：10732226
> 
> 赞同：1
> 
> 时间：2012-05-24T06:25:19.540
> 
> 标签：windows-phone-7, xna, draw

对不起一个愚蠢的问题。我们将每个绘图对象都放在 Draw 方法中，是否每次都绘制所有对象，甚至其中一些对象没有更改？它是否需要某种后台缓冲区并立即绘制以减少闪烁？或者至少添加 if-else reduce 绘制未更改的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:29:28.037

每帧都会调用 Draw，是的，即使没有移动对象或类似的对象，它也会重新绘制整个屏幕。

# ios - UIButton 没有响应 UITableViewCell 中的单击事件

> ID：10732229
> 
> 赞同：5
> 
> 时间：2012-05-24T06:25:41.717
> 
> 标签：ios, uitableview, uibutton, touch

ios 中有这个黑暗巫术阻止我的按钮被点击。如果我不向 uitableviewcell 添加按钮，然后单击该按钮，则会触发该事件。但是如果按钮在uitableviewcell中，它不会被触发，似乎表格我已经准备好了示例代码，如果你们可以帮助我，请在xcode中创建一个简单的单视图应用程序，然后粘贴以下代码

//GRDViewController.h

```
#import <UIKit/UIKit.h>

@interface GRDViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (nonatomic, strong) UIView* container;
@property (nonatomic, strong) UIButton* button;
@property (nonatomic, strong) UITableView* tableView;
@property (nonatomic, strong) NSArray* arr;

@end 
```

//GRDViewController.m

```
#import "GRDViewController.h"

@implementation GRDViewController
@synthesize button, container, arr, tableView;

- (void)_btnTapped {
NSLog(@"TAPPED");
}

- (void)viewDidLoad 
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
    self.button = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 100, 100)];
    [self.button addTarget:self action:@selector(_btnTapped)    forControlEvents:UIControlEventTouchUpInside];
   [self.button setTitle:@"CLICK ME" forState:UIControlStateNormal];
  self.arr = [[NSArray alloc] initWithObjects:@"123", @"456", @"678", nil];

   self.container = [[UIView alloc]initWithFrame:self.button.frame];
  [self.container addSubview:self.button];
  [self.view addSubview:self.container];
  //[self.view  addSubview:self.button];

  self.tableView = [[UITableView alloc]initWithFrame:CGRectMake(0, 100, 400, 400)];

 self.tableView.autoresizingMask = UIViewAutoresizingFlexibleHeight |   UIViewAutoresizingFlexibleWidth;
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
  self.tableView.delegate = self;
  self.tableView.dataSource = self;

  [self.view addSubview:self.tableView];

self.tableView.backgroundColor  = [UIColor redColor];

}

   - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:  (NSIndexPath *)indexPath {
static NSString *cellIdentifier = @"coolcell";
UITableViewCell *cell = [tableView    dequeueReusableCellWithIdentifier:cellIdentifier];

  if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault   reuseIdentifier:cellIdentifier];
      //cell.accessoryType = UITableViewCellAccessoryNone;

      UIButton * btn =  [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 50, 50)];
         [btn addTarget:self action:@selector(_btnTapped)   forControlEvents:UIControlStateNormal];
      [btn setTitle:[self.arr objectAtIndex:[indexPath row]]     forState:UIControlStateNormal];
     [cell.contentView addSubview:btn];
         }

    return cell; 
}
- (NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section {
   return [self.arr count];      
}
 @end 
```

请帮助我觉得这种情况在 ios 中应该很常见，但没有人对此有解决方案？？？

编辑：当单击按钮时，它会在 xcode 控制台中打印 NSLOG msg...所以请确保...您正在查看那里的结果...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T06:33:41.027

您没有给按钮任何控制事件。将其更改为`UIControlEventTouchUpInside`from`UIControlStateNormal`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-24T06:38:06.803

而不是像这样使用`UIControlStateNormal`ControlEvents`UIControlEventTouchUpInside`

```
[btn addTarget:self action:@selector(_btnTapped) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T07:35:03.217

尝试这样做：

`[btn.titleLabel setUserInteractionEnabled: NO];`

# android - 使用用户详细信息将图像上传到服务器

> ID：10732239
> 
> 赞同：1
> 
> 时间：2012-05-24T06:26:33.207
> 
> 标签：android

我正在尝试将用户信息上传到服务器。我可以上传图片。但当时我无法附上用户详细信息。我正在使用以下代码上传图片。那么如何将用户详细信息添加到服务器？

```
try
    {
    FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile) );

    URL url = new URL(urlServer);
    connection = (HttpURLConnection) url.openConnection();

    // Allow Inputs & Outputs
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setUseCaches(false);

    // Enable POST method
    connection.setRequestMethod("POST");

    connection.setRequestProperty("Connection", "Keep-Alive");
    connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

    outputStream = new DataOutputStream( connection.getOutputStream() );
    outputStream.writeBytes(twoHyphens + boundary + lineEnd);
    outputStream.writeBytes("Content-Disposition: form-data; name=\"userfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
    outputStream.writeBytes(lineEnd);

    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    buffer = new byte[bufferSize];

    // Read file
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);

    while (bytesRead > 0)
    {
    outputStream.write(buffer, 0, bufferSize);
    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
    }

    outputStream.writeBytes(lineEnd);
    outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

    // Responses from the server (code and message)
    int serverResponseCode = connection.getResponseCode();
    String serverResponseMessage = connection.getResponseMessage();

    System.out.println(serverResponseCode);
    System.out.println(serverResponseMessage);
    fileInputStream.close();
    outputStream.flush();
    outputStream.close();
    }
    catch (Exception ex)
    {
    //Exception handling
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:46:23.227

将您的信息打包并将这些信息附加到 url：

```
public String makeUrl(String url, Bundle params, Context context) {
url = yourBaseURL + url + "?" + encodeUrl(params);
Log.d("my url is", " URL: " + url);
return url;
} 
```

和编码网址方法是

```
public String encodeUrl(Bundle parameters) {

try {
if (parameters == null) {
return "";
}
StringBuilder sb = new StringBuilder();
boolean first = true;
for (String key : parameters.keySet()) {
if (first)
first = false;
else
sb.append("&");
Log.d(key + " = ", "" + parameters.getString(key));
sb.append(URLEncoder.encode(key) + "="
                        + URLEncoder.encode(parameters.getString(key)));
}

return sb.toString();
} catch (Exception e) {
e.printStackTrace();
}
return "";
} 
```

# javascript - 如何使用要在 Ruby on Rails 中提交的数据预加载表单（新操作）？

> ID：10732251
> 
> 赞同：0
> 
> 时间：2012-05-24T06:27:20.677
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

我想将用户当前正在查看的页面中的文本（如果可能的话）“发布”到 rails 中的“新”操作，以便它可以在用户提交之前预加载给定字段供用户查看表格。我不确定ajax帖子是否有帮助。由于 IE 的字符数限制，使用查询字符串对“new”进行 GET 调用将不起作用。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:34:50.103

使用`:value`属性：

```
<%= f.text_field :name, :value => @default_name %> 
```

然后（例如）发布您需要的变量`link_to`：

```
<%= link_to "Form", form_path, :method => :POST, :default_name => "Bob" %> 
```

或者（另一个示例）使用 javascript (jQuery)：

** *AJAX 帖子将不起作用，因为页面不会被重定向。您将需要模拟一个表单帖子。*

```
<a href="" id="form_link">Form Page</a> // link to form page

<form id="form" action="http://example.com/form" method="POST">  // hidden form
    <input type="hidden" name="default_name" value="Bob" />  
</form> 
```

* * *

```
$("#form_link").click(function() {  // jQuery to submit the form when the link is clicked
  $("#form").submit();
}); 
```

名称字段将预先填充“Bob”。您当然需要在控制器操作中执行以下操作：

```
@default_name = params[:default_name] 
```

# android - 自动连接到 Android 上已配对的蓝牙设备

> ID：10732252
> 
> 赞同：6
> 
> 时间：2012-05-24T06:27:21.243
> 
> 标签：android, bluetooth

我想将我的 Android 手机（2.3.6 Samsung Note）连接到嵌入式蓝牙设备（Arduino 上的 RN-42 BT UART 模块）。从 BluetoothChat 示例开始，并将嵌入式设备与手机配对。到目前为止，一切似乎都运行良好，设备已连接，数据从 Android 传递到嵌入式设备。我仍然缺少的是使设备在两者在范围内时自动连接。

使用调试器，我看到嵌入式设备是“主机”或术语“从属”，Android 是客户端，因为 Android 发出连接请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:31:36.303

我有类似的配置（Android Galaxy S3 手机 4.0 和 RN-42 BT 连接到 Arduino Uno）我能够将 Android 和蓝牙配对并从 Android 连接到 RN-42 BT（我使用的是 BlueTerm 应用程序测试）但是，我无法从 RN-42 BT 连接到 Android 手机。我遵循了以下说明和代码示例： http: [//www.instructables.com/id/Missed-calls-and-SMS-Notifier-Accessory/](http://www.instructables.com/id/Missed-calls-and-SMS-Notifier-Accessory/)

我将 42 BT 编程为客户端并将其设置为自动连接模式 (SR,3)。在我的 Android 代码中，BluetoothSerialService（相当于 PhoneInfoServer 示例代码）卡在 AcceptThread on：socket = mmServerSocket.accept(); 我附上了以下与连接问题相关的代码：

1.  将连接模式设置为自动并启动与 Android 手机的连接的 Arduino 代码
2.  监听传入连接的 Android BluetoothSerialService AcceptThread 代码
3.  logcat 消息显示代码被卡在等待传入连接

在 Google 的 BluetoothChat 演示应用程序中，有一个选项可以让手机可被发现，以便另一部手机可以连接到它。我正在为蓝牙串行连接寻找类似的东西。我在 Google Play 上寻找了一个应用程序，它可以测试监听来自蓝牙串行设备的传入连接请求，但没有找到这样的应用程序。有人知道这样的应用程序吗？

问候， 阿夫纳

1.  将连接模式设置为自动并启动与 Android 手机的连接的 Arduino 代码

    ```
    void setup() {        
      Serial.begin(115200);

      Serial.println("BEG setup");

      static const char *initString0 = "$$$SR,04FE3144A0A4\r";

      // R,1 Forces a complete reboot of the device (similar to a power cycle).
      static const char initString1a[] = "$$$";
      static const char initString1b[] = "R,1\r";

      // auto
      static const char initString2a[] = "$$$";
      static const char initString2b[] = "SM,3\rSO,Z\r---\r";
      static const char *initVector[] = { initString0, initString1a, initString1b, initString2a, initString2b, NULL };

      int i;

      for (i=0; initVector[i] != NULL; i++) {
          Serial.print(initVector[i]);
          delay(500);
      }

      Serial.println("Setup completed");        
    } 
    ```

2.  监听传入连接的Android`BluetoothSerialService AcceptThread`代码

    ```
    // ...
        private class AcceptThread extends Thread
        {
            // The local server socket
        static private final String TAG = "BluetoothSerialServiceAcceptThread";
            private final BluetoothServerSocket mmServerSocket;
            private String mSocketType;

            /** Creates an thread for accepting incoming Bluetooth connections
             * @param secure    Currently ignored, but suppose to represent the mode of socket.
             * All communication is currently done over insecure socket 
             */
            public AcceptThread(boolean secure) {
                Log.i(TAG, "BEG AcceptThread::AcceptThread");

                BluetoothServerSocket tmp = null;
                mSocketType = secure ? "Secure":"Insecure";

                // Create a new listening server socket
                try {
                Log.i(TAG, "AcceptThread constructor trying to create listening socket");

                    if (!secure) {
                        // This is for Android 2.2
                        // tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME_INSECURE, BT_SPP_UUID);

                        // This is for Android 2.3 but testing the above on 2.3 device showed it to be working.
                        tmp = mAdapter.listenUsingInsecureRfcommWithServiceRecord(NAME_INSECURE, BT_SPP_UUID);
                    }

                    Log.d(TAG, "AcceptThread: Listening BT Socket " + mSocketType + " created");
                }
                catch (IOException e)
                {
                    Log.e(TAG, "AcceptThread: Listening BT Socket Type: " + mSocketType + " listen() failed " + e.getMessage());
                    acceptProblem();
                }
                mmServerSocket = tmp;

                Log.d(TAG, "mmServerSocket: " + mmServerSocket);

            } // public AcceptThread

            public void run() {             
                Log.i(TAG, "BEG BluetoothSerialService::run");

                if (mmServerSocket == null)
                {
                Log.e(TAG, "AcceptThread.run: No server socket");
                return;
                }

                Log.d(TAG, "AcceptThread.run: socket type:" + mSocketType);
                setName("AcceptThread" + mSocketType);

                BluetoothSocket socket = null;

                Log.i(TAG, "mState: " + mState);

                // Listen to the server socket if we're not connected
                while (mState != STATE_CONNECTED)
                {
                    Log.i(TAG, "socket before mmServerSocket.accept(): " + socket);

                    try
                    {
                        // This is a blocking call and will only return on a
                        // successful connection or an exception
                        socket = mmServerSocket.accept();
                        Log.d(TAG, "AcceptThread.run: returned from accept");
                    }
                    catch (IOException e)
                    {
                        Log.e(TAG, "AcceptThread.run: Socket Type: " + mSocketType + "accept() failed " + e.getMessage());
                        break;
                    }

                    Log.i(TAG, "socket after mmServerSocket.accept(): " + socket);
    //... 
    ```

3.  logcat 消息显示代码被卡在等待传入连接

    ```
     // ...
    12-09 01:04:38.765: I/BluetoothSerialServiceAcceptThread(16175): BEG AcceptThread::AcceptThread
    12-09 01:04:38.765: I/BluetoothSerialServiceAcceptThread(16175): AcceptThread constructor trying to create listening socket
    12-09 01:04:38.765: V/BluetoothSocket.cpp(16175): initSocketNative
    12-09 01:04:38.765: V/BluetoothSocket.cpp(16175): ...fd 49 created (RFCOMM, lm = 0)
    12-09 01:04:38.765: V/BluetoothSocket.cpp(16175): initSocketFromFdNative
    12-09 01:04:38.775: D/BluetoothUtils(16175): isSocketAllowedBySecurityPolicy start : device null
    12-09 01:04:38.775: V/BluetoothSocket.cpp(16175): bindListenNative
    12-09 01:04:38.775: V/BluetoothSocket.cpp(16175): ...bindListenNative(49) success
    12-09 01:04:38.785: D/BluetoothSerialServiceAcceptThread(16175): AcceptThread: Listening BT Socket Insecure created
    12-09 01:04:38.785: D/BluetoothSerialServiceAcceptThread(16175): mmServerSocket: android.bluetooth.BluetoothServerSocket@41af72c8
    12-09 01:04:38.785: D/BluetoothReadService(16175): END start
    12-09 01:04:38.795: I/BluetoothSerialServiceAcceptThread(16175): BEG BluetoothSerialService::run
    12-09 01:04:38.795: D/BluetoothSerialServiceAcceptThread(16175): AcceptThread.run: socket type:Insecure
    12-09 01:04:38.795: I/BluetoothSerialServiceAcceptThread(16175): mState: 1
    12-09 01:04:38.795: I/BluetoothSerialServiceAcceptThread(16175): socket before mmServerSocket.accept(): null
    12-09 01:04:38.795: V/BluetoothSocket.cpp(16175): acceptNative
    12-09 01:04:38.855: I/MainActivity(16175): mBtStatus: android.widget.ImageView@41adc698
    12-09 01:04:38.855: I/MainActivity(16175): In case: BluetoothSerialService.STATE_LISTEN
    12-09 01:04:38.855: D/MainActivity(16175): Beg onCreateOptionsMenu
    12-09 01:04:38.885: D/memalloc(16175): ion: Mapped buffer base:0x5d760000 size:3768320 offset:0 fd:57
    12-09 01:04:38.925: D/CLIPBOARD(16175): Hide Clipboard dialog at Starting input: finished by someone else... !
    // ... 
    ```

我进一步发现 RN-42 BT 正在进入自动连接模式，但试图连接到家里的另一部非安卓 LG 手机。

我通过将 RN-42 BT 重置为出厂默认设置发现了这一点。使用 BlueTerm 应用程序，我成功地从 Android 手机连接到 RN-42 BT。当我执行查询扫描 ($$$I\r) 时，我得到了 LG 手机的 mac 地址和名称。这款手机的蓝牙具有不同的 MAC 地址 (0026e25d8a91) - 我不知道是什么原因导致 RN-42 BT 尝试连接此设备。

这意味着自动连接模式确实有效，但连接被定向到错误的电话。我很困惑，因为我正在使用以下命令指定 Android 手机的 mac 地址（它们之间有延迟）

```
// The mac address of the android phone
$$$SR,04FE3144A0A4\r

// Force a complete reboot of the device (similar to a power cycle).
$$$R,1\r

// SM,3 - mode=auto
// SO,Z - Extended Status String, Setting this string enables status messages to be sent to the local serial port.
// --- - exit command mode (three minus signs).
$$$SM,3\rSO,Z\r---\r 
```

我现在认为来自 RN-42 BT 的连接启动是好的，但是 android 代码上的 BluetoothServerSocket 设置不正确。
我尝试将 BluetoothServerSocket 设置为使用 listenUsingInsecureRfcommWithServiceRecord 和 listenUsingRfcommWithServiceRecord 进行监听。我注意到有一个命令 createInsecureRfcommSocketToServiceRecord。我应该改用它吗？

任何建议将不胜感激。

谢谢， 阿夫纳

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:24:51.300

所以我想出了“诀窍”。首先将手机设置为只接受连接和有线路电源的嵌入式设备自动连接。更改是将嵌入式设备从“主机”模式设置为具有自动连接的“客户端”模式。

下一个障碍是 Android 必须在服务中包含 Accept 代码，否则只有当应用程序处于活动状态时，该连接才会起作用。通过将 Accept 代码段放入服务中，应用程序可以处于非活动状态，并且嵌入式附件将自动连接。代码将在 Instructable 中共享：[在此处输入链接描述](http://www.instructables.com/id/Missed-calls-and-SMS-Notifier-Accessory/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T07:52:58.793

完整的代码和说明在： http: [//www.instructables.com/id/Missed-calls-and-SMS-Notifier-Accessory/](http://www.instructables.com/id/Missed-calls-and-SMS-Notifier-Accessory/)

它不仅包括代码，还包括关于其工作原理和程序集描述的说明。

# c - 将错误写入文件

> ID：10732255
> 
> 赞同：0
> 
> 时间：2012-05-24T06:27:45.170
> 
> 标签：c, linux, error-handling, fork

在尝试模拟`bash`命令时，如果来自用户的给定命令失败，我还需要写入一个称为`errors.log` 任何问题输出的文件。

我尝试输入一些**错误**的输入，但所需的文件没有按预期更新。

这是`main` ，它有很多代码，但如果对每个变量有任何疑问，我会把整个 main 放在上面。main 的实际操作发生**在代码底部的**`handleSonProcess`分叉和对方法的调用中：

 **```
#define BUFFER 4096
#define BUFFER2 1024
#define RUN_FOREVER 1
#define ERROR_SIGN -1
#define TRUE 1
#define FALSE 0 
```

当我使用 intput 运行代码时`ls ddddx` ，输​​出应该是：

```
ls: cannot access ddddx: No such file or directory 
```

我想将该输出写入`errors.log`文件，但没有写入。

怎么了 ？

谢谢

**编辑**

```
errorFile = open("errors.log",O_WRONLY | O_TRUNC | O_CREAT,0600);

// open errors file
// if(errorFile <= 0)
{
    sprintf(errorStr,"open: %s\n",strerror(errno));
    write(errorFile,errorStr,strlen(errorStr));
    fflush(stdout);
    perror("open");
    close(errorFile);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:37:05.583

在将消息写入 error.log（或者更准确地说，它的文件指针）后，立即使用 fflush() 刷新它。此外，在您的程序退出之前，请确保您关闭它。

由于您在 main() 中，因此您可能还考虑返回错误值而不是执行退出 (EXIT_FAILURE)。

我不确定，但如果你在文件指针上写了一些东西而它没有出现，那可能是因为它正在被缓冲。并且立即退出可能不会让您的程序干净地退出。尝试执行所有 3 个操作：fflush、fclose 并执行返回而不是退出。看看有没有效果...**

# c - mprotect 为 solib 中的地址空间返回 ENOMEM，有什么解决方法吗？

> ID：10732259
> 
> 赞同：3
> 
> 时间：2012-05-24T06:28:05.917
> 
> 标签：c, linux, shared-libraries

我正在尝试使用 dlopen 调用对动态加载的共享库中的特定地址空间进行写访问。这样做有什么限制吗？我知道可以这样做，因为可以使用 gdb 调试 solibs。Gdb 使用 mprotect 获得对 solib 的写访问权，以插入和清除断点。

作为回报，我得到 -1 作为回报，29 作为错误号，perror 给出`ENOMEM Cannot allocate memory`

```
ENOMEM  
The application has requested Single UNIX Specification, Version 2 compliant behavior, but addresses in the range are not valid for the address space of the process, or the addresses specify one or more pages that are not attached to the user's address space by a previous mmap or shmat subroutine call. 
```

# jquery - jQuery：绑定（）的正确方法；和解绑（）；鼠标悬停，鼠标悬停，然后单击

> ID：10732260
> 
> 赞同：3
> 
> 时间：2012-05-24T06:28:18.813
> 
> 标签：jquery, bind, mouseover, mouseout, unbind

我正在使用 jQuery 制作交互式地图，但遇到了一些我无法解决的问题。

1.  基本上，当我单击黑色方块时，我希望它立即变为红色，而现在它正好相反（第二次单击后变为红色）。有没有办法逆转**fadeToggle();** 功能？但是，我仍然想在**mouseover**和**mouseout**事件上保持淡化动画。

2.  第二个问题是，在“单独”单击黑色方块或单击左侧的“选项链接”后，它会变成红色，但当我将鼠标悬停在它上面时不会保持红色。（我想在单击正方形后以某种方式取消绑定**mouseover**和**mouseout**事件）。当我再次点击它时，它只会**淡出**到 0。

## 演示：http: [//jsfiddle.net/antondesign/8JHCe/](http://jsfiddle.net/antondesign/8JHCe/)

**jQuery 脚本**

```
$('ul.list li a').click(function(e) {
    e.preventDefault();
    var productTitle = $(this).attr("title");
        $('.p-'+ productTitle).siblings().hide();
        $('.p-'+ productTitle).stop(true, true).animate({ opacity: "show" }, "slow");
        $('.p-'+ productTitle).unbind('mouseover mouseout');     
    });

// Check if map exists
if($('#map')) {

    // Loop through each AREA in the imagemap
    $('#map area').each(function() {
        var productIcon = $(this).attr('id').replace('area-', '');   

        // Assigning an action to the click event
        $(this).click(function(e){  
            e.preventDefault();              
            $('#'+productIcon).stop(true, true).fadeToggle('slow', function(e){
            $(this).unbind('mouseover').unbind('mouseout');
            });
        });            

    // Assigning an action to the mouseover event
        $(this).bind("mouseover", function(e) {
            $('#'+productIcon).stop(true, true).fadeTo(500, 1);
            e.preventDefault();
         });

    // Assigning an action to the mouseout event
        $(this).bind("mouseout", function(e) {
            $('#'+productIcon).stop(true, true).fadeOut(500, 0);
            e.preventDefault();
        });

   });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:41:00.503

您可以将某些类应用于单击的元素，然后在 mouseover 和 mouseout 事件中，在淡出或执行任何操作之前检查是否应用了该类。我已经更新了你的 jsfiddle 代码，你可以在这里查看：

[http://jsfiddle.net/8JHCe/8/](http://jsfiddle.net/8JHCe/8/)

希望这可以帮助。

# iphone - 类似帧/块的动画

> ID：10732262
> 
> 赞同：-1
> 
> 时间：2012-05-24T06:28:21.627
> 
> 标签：iphone, ipad, animation

有谁知道如何在 Objective-C 中为图像制作动画，就像在 [Famous Brands](http://www.famousbrands.co.za/)中所做的那样（需要 Flash Player 才能看到）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:00:42.300

使用您最喜欢的照片应用程序拍摄您的图像并将其分成几部分。为每个图像创建一个`imageView`并将其添加到一个`UIView`扮演图像容器角色的新图像中。现在将其添加`UIView`到您的主视图中。

如果您想对其进行动画处理，只需遍历`imageViews`容器视图中的所有内容并启动以下动画：

```
[UIView animateWithDuration:0.3
                        delay: i * 0.3
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         currentImageView.alpha = 0.0;
                         currentImageView.transform = CGAffineTransformMakeScale(0.0, 1.0);
                     }
                     completion:nil
]; 
```

currentImageView 是`imageView`循环中的电流，而 i 是迭代器变量。

用 切片原始图像会更好`CoreGraphics`，因此您不必如上所述手动进行，但这需要更多的工作。

# twitter - 将 twitter 搜索链接到自定义 tableview 单元格

> ID：10732265
> 
> 赞同：0
> 
> 时间：2012-05-24T06:28:50.140
> 
> 标签：twitter, uitableview, xcode4.2

好吧，这就是我最近几天一直在摸索的东西。我为我的表格视图创建了一个自定义单元格。我为这个单元创建了一个单独的类（customCell.h），并在 Xcode 中将它们链接在一起。自定义单元格有四个 UIlabels，我在自定义单元格的 .h 文件中声明并通过情节提要链接到自定义单元格。

我已将 customCell.h 头文件导入到我的表格视图控制器的 .h 文件中

我正在尝试在 Twitter 上进行搜索，然后使用各种推文的详细信息填充表格视图和自定义单元格。问题是我不知道如何将推文的结果链接到我的自定义单元格中的 4 个 UIlabel 插座。

当我在我的表格视图实现文件中声明自定义单元格的一些出口时（即使我已经导入了自定义单元格的 .h 文件）xcode 说它无法识别名称

我已经尽可能地复制了下面的详细代码。任何帮助将非常感激。提前致谢

```
- (void)fetchTweets
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: @"THIS IS WHERE MY TWITTER SEARCH STRING WILL GO.json"]];

        NSError* error;

        tweets = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });
    });
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return tweets.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TweetCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *tweet = [tweets objectAtIndex:indexPath.row];
    NSString *text = [tweet objectForKey:@"text"];
    NSString *name = [[tweet objectForKey:@"user"] objectForKey:@"name"];
    NSArray *arrayForCustomcell = [tweet componentsSeparatedByString:@":"];

    cell.textLabel.text = text;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", name];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:41:49.017

您正在创建 UITableViewCell 的一个实例，它是 tableview 单元格的默认类。在您的情况下，您必须创建 customCell 类的实例（它扩展了 UITableViewCell 类）。您必须在 cellForRowAtIndexPath 方法中执行此操作：

```
static NSString *CellIdentifier = @"TweetCell";

customCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if ( cell == nil )
{
    cell = [[customCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

// Get the tweet
NSDictionary *tweet = [tweets objectAtIndex:indexPath.row]; 
```

我希望这对你有所帮助！

史蒂芬。

# java - Spring 3.0 MVC 控制器请求映射

> ID：10732271
> 
> 赞同：1
> 
> 时间：2012-05-24T06:29:34.043
> 
> 标签：java, spring, spring-mvc

我的应用程序中有 2 个控制器，如下所示

```
@Controller("/test1")
public class Test1Controller {
    @RequestMapping("/new")
    public String newtest1() {
     //....
    }  
}

@Controller("/test2")
public class Test2Controller {
    @RequestMapping("/new")
    public String newtest2() {
     //....
    }  
} 
```

现在，如果我向另一个控制器发出请求， `/test2/new` 请求就会发送到另一个控制器 `/test1/new`。这里有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T06:55:59.537

解析控制器名称只是一个后备，它不会在该名称和实际请求映射之间混合和匹配。只需在控制器上放置一个真实的请求映射即可。

```
@Controller
@RequestMapping("/test1")
public class Test1Controller {
    @RequestMapping("/new")
    public String newtest1() {
     //....
    }  
}

@Controller
@RequestMapping("/test2")
public class Test2Controller {
    @RequestMapping("/new")
    public String newtest2() {
     //....
    }  
} 
```

# css - 平铺的背景图像不会平铺在整个页面上

> ID：10732272
> 
> 赞同：1
> 
> 时间：2012-05-24T06:29:46.197
> 
> 标签：css, background, background-image

出于某种原因，我的平铺图像没有平铺在整个背景上。虽然当我稍微调整窗口大小时它会填满整个背景。

背景是用css设置的。

```
body {
  background: url(img/tile.gif) #e6e6e6;
  width: 100%;
  height: 100%;
} 
```

这是在 Chrome 和 Safari 中，所以是 webkit。在 Firefox 中运行良好。

![瓷砖图片](../Images/4c4a46f9a7496f8c28d3f8b12cf03b91.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:35:18.097

尝试：

```
body{
 background-image: url(img/tile.gif);
 background-color: #e6e6e6;
 background-repeat: repeat-x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:37:52.183

```
background: url(img/tile.gif) repeat #e6e6e6; 
```

# c - 如何在 C 语言中判断“1.0”是浮点数还是整数？

> ID：10732274
> 
> 赞同：0
> 
> 时间：2012-05-24T06:29:49.297
> 
> 标签：c, floating-point

我有一个程序通过从文件中读取命令来接受订单。在这个文件中有些命令是“float string”，比如“1.0”，“2.0”，但是它们是无效的，程序需要的是整数，比如“1”，“2”。那么，我怎样才能让程序理解像“1.0”这样的命令是无效的呢？有什么巧妙的方法可以做到这一点吗？

```
 char buf[CMDSIZE];
    if(fgets(buf, CMDSIZE, stdin))      //buf likes this: "1.0 \n"
    {
        *prio = 1; *command = -1; *ratio =1.0;
        // I need to make sure that command is not "1.0" or something like this              
        sscanf(buf, "%d", command);
        switch(*command){....blahblah......}
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:54:13.703

读取输入**1.0**时，两者都`scanf("%d"....)`将成功并返回 1 。（sscanf 的工作方式相同。）只是与，它将在小数点之前停止读取。`scanf("%f"....)`**`"%d"`**

 **您可以将格式说明符`%n`与 sscanf 一起使用以查看读取了多少字符，然后查看缓冲区是否包含更多内容。

或者，这可能更容易，只需使用您自己的代码而不是 sscanf 查看缓冲区中的内容，看看那里是否只有数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T07:04:52.887

它更容易使用`strtol`。

这将解析一个以 10 为底的整数。指针`e`将指向整数之后的第一个字符。您可以检查以确保它是 NUL 字节，否则会发出错误信号。（您还必须检查输入是否为空。）

如果您想在数字后允许空格/换行符，您也可以这样做。请注意，`strtol`吃前导空格 - 但不吃尾随空格。

```
long v;
char *e;
v = strtol(buf, &e, 10);
if (!buf[0] || *e) {
    error();
}
// v has number 
```

**脚注：**检查上溢和下溢`strtol`有点奇怪。您必须先设置`errno`为 0，然后调用`strtol`，然后检查结果是否为`LONG_MIN`or`LONG_MAX`以及是否`errno`设置为`ERANGE`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:19:21.577

在您的特殊情况下，只需检查 1 和 1.0 之间的差异，请使用以下代码：

```
int ret = scanf("%d.%d",&i,&j); 
```

如果inputs为1，scanf只赋值一个，ret为1 如果inputs为1.0，scanf赋值两个，ret为2.如果inputs为abcd，scanf不能赋值，ret为0

以及关于scanf、fscanf等的返回值。

在 C99 标准 7.19.6.4 中的 scanf 函数

如果在任何转换之前发生输入失败，scanf 函数将返回宏 EOF 的值。否则，scanf 函数返回分配的输入项的数量，如果发生早期匹配失败，该数量可能少于提供的数量，甚至为零

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T07:33:30.360

您可以使用带有 %f 的 scanf 将其存储为浮点值示例，或者使用 %d 进行扫描以将其存储为整数，但它不会计算小数

```
#include<stdio.h>
main()
{
float i;
int a;
printf("Enter a number which is a floating point value");
scanf("%f,%d",&i,&a);
} 
```

这里使用 scanf 和 %f 我们将其存储在浮点变量 i 中，因此 1.5,1.0 或任何带小数的数字将被存储，或者如果我们只使用 %d 它只会存储 1,2,3,4 任何数字小数点，即如果我们给 2.5 它只需要 2**

# java - 从命令提示符运行使用 Eclipse 编写的 java 应用程序

> ID：10732277
> 
> 赞同：0
> 
> 时间：2012-05-24T06:29:50.987
> 
> 标签：java, eclipse, command-line-arguments, command-prompt

我有一个使用 Eclipse 3.7 创建的 java 应用程序，也可以从这个 IDE 运行。现在我想从命令提示符运行它。我该怎么做？

我是否必须创建 jar 文件才能执行此操作？

而且我还在运行配置中设置了一些系统属性，所以还要指定在运行它时如何传递它们 frm 命令提示符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:39:38.720

有很多教程。这是一般过程。

1.  编译所有类，您可以使用 Eclipse 或`javac`
2.  你不需要把它罐起来。转到您的包根目录。并运行它

    ```
     java -cp .:path/to/requires/jars:/some/more/jar FullyQualifiedMainClassNameWithoutExtension param1 param2 
    ```

3.  如果您有要输入的属性，则可以在包根目录中使用该属性并使用`ClassLoader#getResourceAsStream("/filename.properties")`
4.  如果你看看`args`你的，`main(String[] args)`你会发现`param1`，`param2`那里。

参考

1.  [http://www.cs.usfca.edu/~parrt/course/601/lectures/java.tools.html](http://www.cs.usfca.edu/~parrt/course/601/lectures/java.tools.html)
2.  [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html)

笔记：

*   如果您有多个罐子，请使用 wldcard 来包含您的罐子。[http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)
*   类路径分隔符`:`适用于 Unix 和`;`Windows

* * *

本教程是勺子喂养的最佳示例。但是，无论你如何[从命令行编译和运行包中的 Java 程序](http://shivasoft.in/blog/java/compile-and-run-java-program-in-package-from-command-line/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:57:53.937

切换到“调试”透视图并在 Eclipse 中运行您的程序。
在“调试”窗口中单击该进程（即使在它终止后），然后选择“属性”。在属性对话框中，您可以看到 eclipse 使用的整个命令行。您可以将其复制并粘贴到 shell 中以执行它。
您可能希望将命令从“javaw”更改为“java”。由你决定。

# jquery - 使用 jQuery 进行验证检查

> ID：10732285
> 
> 赞同：0
> 
> 时间：2012-05-24T06:30:38.257
> 
> 标签：jquery, asp.net

在我的 aspx 页面中，我正在使用一些验证控件，例如必填字段验证器，如果我单击保存按钮，如果特定字段为空，则会触发验证错误。

如果我填写该特定字段并给出标签，则该验证错误会自动消失。我的查询是，是否可以使用 jQuery 或任何其他方法显示任何消息，直到验证错误消失。

每当该页面中出现验证错误时，该消息就会出现，如果我们清除该消息应该自动消失的验证错误。我不知道该怎么做，因为我对 jQuery 了解不多。

任何人都可以在这里帮助我，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:36:54.167

听起来您正在寻找 jQuery showErrors()。这篇文章中有一些很好的信息可能会回答您的问题：[如何在 jQuery 验证中显示错误？](https://stackoverflow.com/questions/3811044/how-can-i-show-errors-in-jquery-validation)

# c++ - Phonon 不渲染视频

> ID：10732286
> 
> 赞同：0
> 
> 时间：2012-05-24T06:30:38.717
> 
> 标签：c++, qt, video, phonon

当我试图运行`Qt::Phonon::VideoPlayer`演示代码时，我遇到了奇怪的错误。声音播放良好时视频未渲染。怎么了？

这是我的代码：

```
if (ui->widget)
{
    Phonon::VideoPlayer *player = new Phonon::VideoPlayer(ui->widget);

    player->load(MediaSource("D:/Films/19.wmv"));

    connect(player, SIGNAL(finished()), player, SLOT(deleteLater()));

    player->play();
} 
```

`ui->widget``QWidget`是我窗户上的一个元素。代码在按钮单击时运行（按钮也在窗口中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:42:10.880

发现这个错误肯定出乎意料：帧大小是`1x1 px`. 不知道该怎么做，最令人惊讶的是我在互联网上某处看到的解决方案：

```
player->setMinimumSize(ui->playerWidget->width(), ui->playerWidget->height()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T06:45:58.950

听起来您的操作系统上缺少编解码器。您是否尝试过使用许多不同的视频文件，它们的行为方式是否相同？

# jquery - 在 after() 上创建一个元素；

> ID：10732290
> 
> 赞同：0
> 
> 时间：2012-05-24T06:31:11.703
> 
> 标签：jquery

我正在使用 jquery。有没有其他方法可以限制创建元素？

这是我的代码..

```
if($(this).val() == "") {
   $(this).addClass('error').after('<span class="jquery_form_error_message">' + 'This field is required' + "</span>");
   validated = false;
   return false; 
```

这实际上是一个验证.. 除非您填写每个字段数据，否则您不能跳过。我的问题是。当我点击提交时。按钮.. 它在 div 的顶部创建了一个多跨度类.. 这真是一团糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:36:33.103

您可以检查元素是否存在：

```
if ($(this).next('.jquery_form_error_message').length > 0) {
  // Exists
} else {
  // Doesn't exist
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T06:55:50.240

```
 function test() {
            if ($(this).val() == "") {
                $(this).addClass('error').after($(this).next('span.jquery_form_error_message').length === 1 ? ('<span class="jquery_form_error_message">' + 'This field is required' + "</span>") : '');
                validated = false;
                return false;
            }
            else {
                $(this).removeClass('error').next('span.jquery_form_error_message').hide();
                validated = true;
                return true;
            }
        } 
```

# java - 如何让 DateFormat 猜测预期的世纪？

> ID：10732297
> 
> 赞同：10
> 
> 时间：2012-05-24T06:31:59.513
> 
> 标签：java, datetime

我正在尝试将`String`“dd-MM-yy”格式的对象解析为`Date`对象。问题是它试图猜测日期的世纪。

当指定从 01 到 31 时，年份被解释为 2000 年代（21 世纪），而 32 t0 99 被认为是 1900 年代（20 世纪）。

```
SimpleDateFormat fm =new SimpleDateFormat("dd-MM-yy");
String datestr="21-11-31";
try {
  Date date= fm.parse(datestr);
  System.out.println(date);
} catch (ParseException e) {
} 
```

谁能帮我？我如何才能明确地指出我只在 21 世纪工作。我并不是在尝试寻找诸如操作字符串或根据条件移动日期之类的技巧。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-24T06:44:22.290

您可以使用该[`set2DigitYearStart()`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#set2DigitYearStart%28java.util.Date%29)方法更改用于解释 2 位数据输入的世纪。

```
SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yy");
String aDate = "03/17/40";
Calendar cal = Calendar.getInstance();
cal.clear();
cal.set(Calendar.YEAR, 2000);
dateFormat.set2DigitYearStart(cal.getTime());
System.out.println(dateFormat.get2DigitYearStart());
System.out.println(dateFormat.parse(aDate)); 
```

将于 2040 年 3 月 17 日印刷。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-24T06:33:10.547

从[文档](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)中：

> 对于使用缩写年份模式（“y”或“yy”）进行解析，SimpleDateFormat 必须解释相对于某个世纪的缩写年份。它通过将日期调整为创建 SimpleDateFormat 实例之前的 80 年和之后的 20 年来实现这一点。例如，使用“MM/dd/yy”模式和 1997 年 1 月 1 日创建的 SimpleDateFormat 实例，字符串“01/11/12”将被解释为 2012 年 1 月 11 日，而字符串“05/04/ 64" 将被解释为 1964 年 5 月 4 日。在解析期间，只有由 Character.isDigit(char) 定义的正好包含两位数字的字符串才会被解析为默认世纪。任何其他数字字符串，例如一位数字字符串、三位或更多数字字符串或不是全数字的两位数字字符串（例如，“-1”），是按字面意思解释的。因此，“01/02/3”或“01/02/003”使用与公元 3 年 1 月 2 日相同的模式进行解析。同样，“01/02/-3”被解析为 Jan 2, 4 BC。

它似乎没有提到任何调整`[-80; +20]`范围的方法。我怀疑您最好的选择是将两位数的年份扩展为四位数的形式：

```
datestr = datestr.replaceFirst("-(\\d{2})$", "-20$1"); 
```

# json - Facebook C# SDKv6 如何解析多查询 FQL 的结果

> ID：10732299
> 
> 赞同：1
> 
> 时间：2012-05-24T06:32:10.563
> 
> 标签：json, facebook-c#-sdk, facebook-fql

感谢[Prabir 的](http://blog.prabir.me/category/Facebook-C-SDK.aspx)博客，我可以使用 facebook c# sdk v 6.14 成功执行多查询 fql，但在解析结果时需要帮助。我已经搜索并尝试了很多方法都无济于事。我知道这是一个简单的语法问题，但我对 c# 和 JSON 还很陌生。

任何帮助深表感谢！谢谢，乍得

我的代码：

```
var fb = new FacebookClient(this.FacebookAccessToken);
            dynamic resultsMQFQL = fb.Get("fql",
                            new
                            {
                                q = new
                                {
                                    friendsMovies = "SELECT page_id, uid FROM page_fan WHERE type='MOVIE' AND uid IN (SELECT uid2 FROM friend WHERE uid1=me()) ORDER BY page_id",
                                    movieDetails = "SELECT page_id, name, pic, fan_count, categories, genre, starring, release_date FROM page WHERE page_id IN (SELECT page_id FROM #friendsMovies) ORDER BY fan_count DESC",
                                }
                            }); 
```

结果：

```
{"data":[
    {"name":"friendsMovies",
        "fql_result_set":
            [{"page_id":105638652803531,"uid":796419451},
            {"page_id":113271808686307,"uid":796419451}]},

    {"name":"movieDetails",
        "fql_result_set":[
            {"page_id":105638652803531,"name":"Fear and Loathing in Las Vegas"},
            {"page_id":113271808686307,"name":"Fletch"}
        ]
    }
]} 
```

尝试解析：

```
foreach (dynamic row in resultsMQFQL.data.fql_result_set) 
```

错误：

```
'Facebook.JsonArray' does not contain a definition for 'fql_result_set' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:01:48.177

好的，想通了...忘了我可以在即时窗口中调试时快速尝试各种组合...我是说我在编码方面还很新吗？:)

```
public void FBMQFQL()
        {
            var fb = new FacebookClient(this.FacebookAccessToken);
            dynamic resultsMQFQL = fb.Get("fql",
                            new
                            {
                                q = new
                                {
                                    friendsMovies = "SELECT page_id, uid FROM page_fan WHERE type='MOVIE' AND uid IN (SELECT uid2 FROM friend WHERE uid1=me()) ORDER BY page_id",
                                    movieDetails = "SELECT page_id, name, pic, fan_count, categories, genre, starring, release_date FROM page WHERE page_id IN (SELECT page_id FROM #friendsMovies) ORDER BY fan_count DESC",
                                }
                            });

            //To access a direct value: resultsMQFQL.data[0].fql_result_set[0].page_id

            var friendsMovies = resultsMQFQL.data[0].fql_result_set;
            var movieDetails = resultsMQFQL.data[1].fql_result_set;

            if (resultsMQFQL == null)
            {
                //return null;
            }
            else
            {
                //Construct the new, formated, merged datatable to store the results the way we want them   
                DataTable dtMyFriendsMovies = new DataTable();
                dtMyFriendsMovies.Columns.Add("MovieID");
                dtMyFriendsMovies.Columns.Add("FriendUserID");

                foreach (dynamic row in friendsMovies)
                {
                    //Add New DataRow to new DataTable
                    DataRow drRow = dtMyFriendsMovies.NewRow();

                    //Get various values from original JSON Friend List returned
                    drRow["MovieID"] = row.page_id;
                    drRow["FriendUserID"] = row.uid;

                    //Add New Row to New Resulting Data Table
                    dtMyFriendsMovies.Rows.Add(drRow);
                }

                //MovieDetails   
                DataTable dtMovies = new DataTable();

                dtMovies.Columns.Add("movieID");
                dtMovies.Columns.Add("name");
                dtMovies.Columns.Add("pic");
                dtMovies.Columns.Add("fan_count");
                dtMovies.Columns.Add("genre");
                dtMovies.Columns.Add("starring");
                dtMovies.Columns.Add("release_date");

                foreach (dynamic row in movieDetails)
                {
                    //Add New DataRow to new DataTable
                    DataRow drRow = dtMovies.NewRow();

                    //Get various values from original JSON Friend List returned
                    drRow["movieID"] = row.page_id;
                    drRow["name"] = row.name;
                    drRow["pic"] = row.pic;
                    drRow["fan_count"] = row.fan_count;
                    drRow["genre"] = row.genre;
                    drRow["starring"] = row.starring;
                    drRow["release_date"] = row.release_date;

                    //Add New Row to New Resulting Data Table
                    dtMovies.Rows.Add(drRow);
                }
                //return dtMyFriendsMovies;
            }
        } //FB FQL 
```

# safari - 在上下文菜单中制作 Safari 扩展。当鼠标右键单击图像时，我如何知道图像 url？

> ID：10732306
> 
> 赞同：4
> 
> 时间：2012-05-24T06:33:04.980
> 
> 标签：safari, safari-extension

通过 google 制作 safari 扩展 imageSearch。

这是我的来源。

注入的.js

```
document.addEventListener("contextmenu", handleContextMenu, false);

function handleContextMenu(event) {
    safari.self.tab.setContextMenuEventUserInfo(event, event.target.nodeName);
} 
```

全局.html

```
<!DOCTYPE HTML>
<script type="text/javascript" src="jquery.js"></script>
<script>
safari.application.addEventListener("contextmenu", handleContextMenu, false);
function handleContextMenu(event) {
    var query = event.userInfo;
    if (query === "IMG") {
        event.contextMenu.appendContextMenuItem("imageSearch", "Search Google with this image");
    }
}

safari.application.addEventListener("command", performCommand, false);
function performCommand(event) {
    if (event.command === "imageSearch") {  

       /*How I get image Url??? */
       var imageUrl="";

    /*
        var url = "http://images.google.com/searchbyimage?image_url="+imageUrl;
        var tab = safari.application.activeBrowserWindow.openTab("foreground");
        tab.url = url;

    */

    }
} 
```

我的目标是..

1.  如果鼠标右键单击在上下文菜单中添加“使用此图像通过 Google 搜索”。（清除）

2.  并单击“使用此图片通过 Google 搜索”google it。（？？？）

所以我想知道图片网址。

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T21:19:14.630

你可以试试这个：

1.  将整个节点存储到事件的 userInfo 中：

    ```
    function handleContextMenu(event) {
        safari.self.tab.setContextMenuEventUserInfo(event, event.target);
    } 
    ```

2.  将一些全局 javascript 变量添加到您的 global.html（例如 var lastClickedImg），

3.  更改您的 handleContextMenu 函数以将函数 handleContextMenu 中的 event.userInfo 存储到此变量：

    ```
    function handleContextMenu(event) {
        var query = event.userInfo;
        if (query.nodeName === "IMG") {
            lastClickedImg = query;
            event.contextMenu.appendContextMenuItem("imageSearch", "Search Google with this image");
        }
    } 
    ```

4.  在您的函数 performCommand 中，您将轻松地从 lastClickedImg 获取图像的 url：

    ```
    lastClickedImg.src 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:38:49.740

您可以通过在注入脚本中放置 contextmenu 的事件侦听器来查找图像 URL。

```
function contextMenuHandler(event)
{
    var url = event.target.src;
    safari.self.tab.setContextMenuEventUserInfo(event, url);
}

document.body.addEventListener("contextmenu", contextMenuHandler, false); 
```

然后在命令事件中恢复图像 src

```
var imageUrl = event.userInfo; 
```

您还应该进行一些验证以确保它是图像。

# android - URL中的空格在Android中创建问题

> ID：10732310
> 
> 赞同：0
> 
> 时间：2012-05-24T06:33:20.190
> 
> 标签：android

我正在从 URL 下载图像，但 URL 中有空格，因此它会跳过那些 URL。我已经阅读了几篇文章，其中提到用 %20 或 + 替换空格，这两种方法都不起作用。那么现在有什么替代方案。

```
 Log.i("CountryFlagThumb", VArray.get(2).replaceAll(" ", "%20")); 

    http://id8lab.net/WorldNewsApp/flags/United Arab Emirates.png 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T06:43:55.567

您不对整个 URL 进行编码，仅对来自“不可靠来源”的部分进行编码。

```
String data = URLEncoder.encode("United Arab Emirates.png", "utf-8");
String url = "http://id8lab.net/WorldNewsApp/flags/" + data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:46:17.687

您只需像这样对您的网址进行编码

字符串 url =Uri.encode("http://id8lab.net/WorldNewsApp/flags/United Arab Emirates.png")

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:49:00.573

要从 url 下载图像，请使用以下命令，

```
HttpGet httpRequest = new HttpGet(URI.create(path) );
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
HttpEntity entity = response.getEntity();
BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
Bitmap bmp = BitmapFactory.decodeStream(bufHttpEntity.getContent());
httpRequest.abort(); 
```

# android - SQLite s3db 文件与 android 应用程序连接

> ID：10732315
> 
> 赞同：0
> 
> 时间：2012-05-24T06:34:00.907
> 
> 标签：android, sqlite

附加或连接 SQLite s3db 文件以连接 android 应用程序需要编写什么代码？代码必须放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:10:45.907

在您的主要活动中设置您的数据库。

```
 private void setupDatabase() 
         {
                Dbhelper myDbHelper = new Dbhelper(getApplicationContext());
                myDbHelper = new Dbhelper(this);

                try {

                    myDbHelper.createDataBase();

                } catch (IOException ioe) {

                    throw new Error("Unable to create database");

                }

            } 
```

# lua - Corona 中的触摸事件何时有“取消”阶段？

> ID：10732319
> 
> 赞同：2
> 
> 时间：2012-05-24T06:34:34.523
> 
> 标签：lua, coronasdk

Corona 中的触摸事件有 4 个阶段：“开始”、“移动”、“结束”和“取消”。事件何时收到“取消”阶段？（我没有找到可以用它取消事件的函数，你可以删除监听器）。以及如何在应用程序中使用“已取消”事件阶段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:57:14.417

Corona SDK 是 iOS 和 Android 之上的抽象层；大多数设计决策将反映在底层平台上。

触摸事件似乎实现了 UITouch 对象（以及 Android 上的任何等效对象）。在谷歌搜索“ [iphone uitouch cancelled](http://www.google.com/search?q=iphone%20uitouch%20cancelled) ”导致了[这个问题](https://stackoverflow.com/questions/533574/how-to-cancel-a-sequence-of-uitouch-events)，应该回答你的问题。

如果您需要手动“取消”一个事件，只需将一个标志存储在关联对象中（或在触摸事件中，如果它是一个简单的表）并在调用“移动”或“结束”时检查它。

（免责声明：我从未使用过 Corona，也没有为移动平台开发过。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T19:53:03.913

基本上，如果您拿着一个对象、按钮等，并且您滑动手指而不是松开手指，这将被注册为“已取消”，您可以按照自己的意愿进行操作，通常与“结束”相同

例子：

```
if event.phase == "began" then --Pressing the button
   move = true
elseif event.phase == "canceled" then --sliding your finger off
   move = false
elseif event.phase == "ended" then --Releasing the button
   move = false
end 
```

# php - jquery .load 重命名表单

> ID：10732326
> 
> 赞同：2
> 
> 时间：2012-05-24T06:35:15.040
> 
> 标签：php, javascript, jquery, html

这是一个页面 A.html

```
<form name=form>
<input type=text id = txtA>
</form> 
```

当我使用 jquery 加载到 B.html 时，我加载了多次。

```
<form name=form>
<input type=text id = txtA>
</form>

<form name=form>
<input type=text id = txtA>
</form>

<form name=form>
<input type=text id = txtA>
</form>

<form name=form>
<input type=text id = txtA>
</form> 
```

我怎样才能将表单名称重命名为 form1,form2,form3...formN 这样我才能得到这个

```
<form name=form1>
<input type=text id = txtA>
</form>

<form name=form2>
<input type=text id = txtA>
</form>

<form name=form3>
<input type=text id = txtA>
</form> 
```

当我提交时，我想使用 php 来检索数据。

```
for each form
    formi.txtA 
```

这样我可以唯一地获取每个表单数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T06:38:05.747

这将重命名所有被调用`form`的表单并添加后缀：

```
$('form[name="form"]').each(function(i) {
    this.name = 'form' + (i + 1);
}); 
```

当您一个一个地加载表单时，您需要一种不同的方法：

```
var renamer = (function() {
    var i = 1; // private counter

    // return public interface
    return function(base) {
        $(base).find('form[name="form"]').each(function() {
            this.name = 'form' + i;
            ++i;
        });
    }
}()); 
```

每次添加新表单时，都调用它：

```
renamer('#divid'); 
```

表单所在`'#divid'`的父节点的 jQuery 选择器在哪里。

**更新**

您似乎有多个动态加载的输入字段。而不是加载一个全新的表单，只需加载`<input />`片段。

```
$(`#form`).load('http://www.example.com/inputfield?type=dob'); 
```

然后服务器将返回一个片段：

```
<input name="dob" type="text" value="" /> 
```

然后将其插入到一个表单中，因此您可以将其提交给 PHP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T06:41:07.127

once all the loads are complete, you could run through a loop.

```
for(var i=0; i < $("form").size(); i++){
    $("form").eq(i).attr("name", "formName"+i);
} 
```

# sql - INSERT INTO 语句中的 ADOQuery SQL 语法错误

> ID：10732328
> 
> 赞同：2
> 
> 时间：2012-05-24T06:35:21.477
> 
> 标签：sql, delphi

调用此查询时，我在运行时不断收到语法错误。

```
adoquery1.Active := false;
adoquery1.SQL.Clear;
SQLQuery := 'INSERT INTO Comics ';
SQLQuery := SQLQuery + '(Name,Issue,Series,Volume,Poster,';
SQLQuery := SQLQuery + 'Desc,Writer,Artist,Read,Link,Extra) ';
SQLQuery := SQLQuery + 'VALUE('+ quotedstr(SeriesName+' '+IssueNumber);
SQLQuery := SQLQuery + ','+ quotedstr(IssueNumber);
SQLQuery := SQLQuery + ','+ quotedstr(SeriesName);
SQLQuery := SQLQuery + ','+ quotedstr(VolumeNumber);
SQLQuery := SQLQuery + ','+ quotedstr(Poster);
SQLQuery := SQLQuery + ','+ quotedstr(Desc);
SQLQuery := SQLQuery + ','+ quotedstr(Writer);
SQLQuery := SQLQuery + ','+ quotedstr(Artist);
SQLQuery := SQLQuery + ','+ quotedstr(haveRead);
SQLQuery := SQLQuery + ','+ quotedstr(filelink);
SQLQuery := SQLQuery + ','+ quotedstr(Extra);
SQLQuery := SQLQuery + ')';
memo1.Text := SQLQuery;
adoquery1.SQL.Add(SQLQuery);
adoquery1.Active := true; 
```

当我执行 memo1.text = sqlquery 时，它看起来没问题，有什么建议吗？这就是我在 memo1.text 中得到的 ..

```
INSERT INTO Comics (Name,Issue,Series,Volume,Poster,Desc,Writer,Artist,Read,Link,Extra VALUE('xmen 8','8','xmen','1','na','Some Description','BOBwriter','BOBArtist','Yes','C:\Comics\xmen8.cbr','Some Extra info') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T06:37:41.247

`Desc`是一个保留字，所以你应该使用`[Desc]`或用反引号括起来（我不知道你使用的是哪个数据库）。
更多：我认为应该是`VALUES(`而不是`VALUE(`。

```
INSERT INTO Comics 
    (Name, Issue, Series, Volume, Poster, [Desc],
     Writer, Artist, [Read], Link, Extra) 
VALUES
    ('xmen 8', '8', 'xmen', '1', 'na', 'Some Description',
     'BOBwriter', 'BOBArtist', 'Yes', 'C:\Comics\xmen8.cbr','Some Extra info') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T06:41:29.093

Enclose the **[Reserved Word](http://msdn.microsoft.com/en-us/library/ms189822.aspx)** `DESC` with `brackets`

```
adoquery1.Active := false;
adoquery1.SQL.Clear;
SQLQuery := 'INSERT INTO Comics ';
SQLQuery := SQLQuery + '(Name,Issue,Series,Volume,Poster,';
SQLQuery := SQLQuery + '[Desc],Writer,Artist,[Read],Link,Extra) ';
SQLQuery := SQLQuery + 'VALUES ('+ quotedstr(SeriesName+' '+IssueNumber);
SQLQuery := SQLQuery + ','+ quotedstr(IssueNumber);
SQLQuery := SQLQuery + ','+ quotedstr(SeriesName);
SQLQuery := SQLQuery + ','+ quotedstr(VolumeNumber);
SQLQuery := SQLQuery + ','+ quotedstr(Poster);
SQLQuery := SQLQuery + ','+ quotedstr(Desc);
SQLQuery := SQLQuery + ','+ quotedstr(Writer);
SQLQuery := SQLQuery + ','+ quotedstr(Artist);
SQLQuery := SQLQuery + ','+ quotedstr(haveRead);
SQLQuery := SQLQuery + ','+ quotedstr(filelink);
SQLQuery := SQLQuery + ','+ quotedstr(Extra);
SQLQuery := SQLQuery + ')';
memo1.Text := SQLQuery;
adoquery1.SQL.Add(SQLQuery);
adoquery1.Active := true; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T06:42:20.713

use `Values` instead of `value`.
Desc and Read are reserved keywords, so enclose then in square brackets.
You forgot to keep closing parenthesis before `Values` keyword.

```
INSERT INTO Comics 
            (Name, 
             Issue, 
             Series, 
             Volume, 
             Poster, 
             [Desc], 
             Writer, 
             Artist, 
             [Read], 
             Link, 
             Extra) 
VALUES     ('xmen 8', 
            '8', 
            'xmen', 
            '1', 
            'na', 
            'Some Description', 
            'BOBwriter', 
            'BOBArtist', 
            'Yes', 
            'C:\Comics\xmen8.cbr', 
            'Some Extra info') 
```

# java - 重新部署项目上传图片文件夹被删除

> ID：10732331
> 
> 赞同：1
> 
> 时间：2012-05-24T06:35:47.037
> 
> 标签：java, jsf-2

我能够成功上传文件，但文件被存储到服务器上的部署目录中。

一旦我删除项目并将项目重新部署到我的 Tomcat 服务器 7.0，我上传的所有文件都会从中删除。

我使用 JSF 作为 Tomcat 服务器 7.0 的服务器端技术。在日食IDE中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:20:13.907

您不应该**将**上传的文件存储在部署文件夹中，也绝对不应该按照`WEB-INF`其他人的建议存储在文件夹中。当您重新部署 web 应用程序时，它们会丢失，这仅仅是因为它们未包含在原始 WAR 文件中。

您需要将上传的文件存储在部署文件夹之外的固定路径上。例如`/var/webapp/uploads`. 您始终可以通过`<Context>`向 Tomcat 添加一个新文件夹来使该文件夹对 Web 可用。

### 也可以看看：

*   [刷新页面后上传的图片才可用](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page/8889096#8889096)
*   [如何在 java webapp 中的服务器上保存和检索图像](https://stackoverflow.com/questions/8516387/how-i-save-and-retrieve-an-image-on-my-server/8521981#8521981)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:54:37.683

将文件保存到 /WEB-INF 文件夹或硬盘驱动器的任何位置（当然部署目录除外）

我使用了这段代码（它将每个用户的文件存储到它自己的文件夹中）

```
String path = Util.getPathToFiles() + "WEB-INF" + File.separator + "upload";
    try {
        path += File.separator + session.getCurrentUser().getLogin();
        if (!isFolderExists(path)) {
            new File(path).mkdir();
        }
        path += File.separator + file.getName();
        FileUtils.copyFile(file, new File(path));
    } catch (IOException ex) {
        Logger.getLogger(ThesisBean.class.getName()).log(Level.SEVERE, null, ex);
    } finally {
        file.delete();
    } 
```

`getPathToFiles`只需从 ServletContext 返回 realPath，FileUtils 是来自 Apache IO 的类（但您可以自己编写文件复制代码，它只是帮助类）

# extjs4 - extjs 树组件未正确呈现

> ID：10732334
> 
> 赞同：-1
> 
> 时间：2012-05-24T06:35:51.747
> 
> 标签：extjs4, javascript-framework

我很难学习 ExtJS。尽管几乎在所有地方都提到它与 DOJO 等其他产品相比是最简单的。
我试图创建的是一棵简单的树（没有 MVC .. 只是一棵简单的树）。这是我的javascript代码..

```
 Ext.create('Ext.tree.Panel', {
            renderTo: Ext.getBody(),
            title: 'Simple Tree',
            width: 150,
            height: 150,
            root: {
                text: 'Root',
                expanded: true,
                children: [
                    {
                        text: 'Child 1',
                        leaf: true
                    },
                    {
                        text: 'Child 2',
                        leaf: true
                    },
                    {
                        text: 'Child 3',
                        expanded: true,
                        children: [
                            {
                                text: 'Grandchild',
                                leaf: true
                            }
                        ]
                    }
                ]
            }
        }); 
```

并且只有像面板这样的东西被渲染在身体上。html是这个

```
<body>
    <div>

    </div>
</body> 
```

我究竟做错了什么？
**更新：-**
1.此处的整个 javascript 都放置在页面中 body 标记之后。
2\. 我包括与 ExtJS 下载捆绑的 bootstrap.js jsvascript 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:14:09.090

`Ext.create()`函数应该在内部调用，`Ext.onReady()`否则会渲染一些元素而其他元素不会

# android - 布局对齐查询{水平居中+垂直居中}

> ID：10732339
> 
> 赞同：0
> 
> 时间：2012-05-24T06:36:23.713
> 
> 标签：android, android-layout, android-linearlayout

必须非常简单地解决，但我无法解决这个问题。

我想对齐“顶部图像和log_in_box”，所以整个东西出现在屏幕的正中心（水平+垂直中心）。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent"
    android:layout_height="match_parent" android:orientation="vertical">

    <LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical"
        android:layout_gravity="center_vertical|center_horizontal">

        <ImageView android:layout_width="match_parent" android:layout_height="wrap_content" android:src="@drawable/ic_launcher"
            android:contentDescription="" />

        <LinearLayout android:id="@+id/log_in_box" android:layout_width="match_parent" android:layout_height="wrap_content"
            android:orientation="vertical">
            <EditText android:layout_width="match_parent" android:layout_height="wrap_content" android:hint="User ID"
                android:inputType="text" />

            <EditText android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="10dp"
                android:hint="Password" android:inputType="textPassword" />

            <CheckBox android:layout_width="match_parent" android:layout_height="wrap_content" android:checked="true"
                android:text="Remember Me" android:layout_marginTop="10dp" />

            <Button android:id="@+id/log_in" android:layout_width="match_parent" android:layout_height="wrap_content"
                android:layout_marginTop="10dp" android:text="Log In" />
        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

**当前外观** ![在此处输入图像描述](../Images/dbb1d82a150d6a621da2a7ea6e684e6d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:40:34.477

Try this.

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent"
    android:layout_height="match_parent" android:orientation="vertical">

<LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" android:layout_gravity="center_horizontal"
    android:layout_centerHorizontal="true"
android:layout_centerVertical="true">

    <ImageView android:layout_width="match_parent" android:layout_height="wrap_content" android:src="@drawable/ic_launcher"
        android:contentDescription="" />

    <LinearLayout android:id="@+id/log_in_box" android:layout_width="match_parent" android:layout_height="wrap_content"
        android:orientation="vertical">
        <EditText android:layout_width="match_parent" android:layout_height="wrap_content" android:hint="User ID"
            android:inputType="text" />

        <EditText android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="10dp"
            android:hint="Password" android:inputType="textPassword" />

        <CheckBox android:layout_width="match_parent" android:layout_height="wrap_content" android:checked="true"
            android:text="Remember Me" android:layout_marginTop="10dp" />

        <Button android:id="@+id/log_in" android:layout_width="match_parent" android:layout_height="wrap_content"
            android:layout_marginTop="10dp" android:text="Log In" />
    </LinearLayout>

</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:42:37.440

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:orientation="vertical" 
        android:layout_centerInParent="true" >

        <ImageView android:layout_width="match_parent" android:layout_height="wrap_content" android:src="@drawable/ic_launcher"
            android:contentDescription="" />

        <LinearLayout android:id="@+id/log_in_box" android:layout_width="match_parent" android:layout_height="wrap_content"
            android:orientation="vertical">
            <EditText android:layout_width="match_parent" android:layout_height="wrap_content" android:hint="User ID"
                android:inputType="text" />

            <EditText android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="10dp"
                android:hint="Password" android:inputType="textPassword" />

            <CheckBox android:layout_width="match_parent" android:layout_height="wrap_content" android:checked="true"
                android:text="Remember Me" android:layout_marginTop="10dp" />

            <Button android:id="@+id/log_in" android:layout_width="match_parent" android:layout_height="wrap_content"
                android:layout_marginTop="10dp" android:text="Log In" />
        </LinearLayout>

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:43:25.003

```
 <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:contentDescription=""
        android:src="@drawable/ic_launcher" />

        <EditText
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="User ID"
            android:inputType="text" />

        <EditText
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:hint="Password"
            android:inputType="textPassword" />

        <CheckBox
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:checked="true"
            android:text="Remember Me" />

        <Button
            android:id="@+id/log_in"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="Log In" /> 
```

# ruby - 关于 ruby 参数传递的一些混淆

> ID：10732343
> 
> 赞同：1
> 
> 时间：2012-05-24T06:36:43.400
> 
> 标签：ruby, variables, parameters, parameter-passing, scope

我写了两个 ruby​​ 文件进行测试

测试.rb：

```
#!/usr/bin/ruby

def foo(bar)
    bar['key'] = 'value'
end

def my_print(a)
    a.each{|k,v|
        puts "#{k} => #{v}"
    }
end 
```

test_drive.rb：

```
#!/usr/bin/ruby

require 'test.rb'

hash_test = Hash.new

foo(hash_test)

my_print(hash_test) 
```

它按我的预期工作，输出是

> 键 => 值

但是当我将 test.rb 更改为

```
#!/usr/bin/ruby

def foo(bar)
    pre_defined = {'key' => 'value'}
    bar = pre_defined
end

def my_print(a)
    a.each{|k,v|
        puts "#{k} => #{v}"
    }
end 
```

在这里，我使用了预定义的哈希，但现在它什么也不输出。“hash_test”现在是一个空散列。请说明为什么确实会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:30:27.813

这是简单的答案：

在 ruby​​ 中，您通过引用传递带有 Objects 的变量。当您将对象分配给变量时，该变量实际上并不包含对象本身。相反，它只包含对该对象的引用。

它可能有助于您开始了解引用和对象之间的差异，以了解将变量作为参数发送的工作原理：对象本身并不驻留在变量中，变量指向内存中对象的引用，因为这个，如果一个变量指向另一个对象并修改它，这并不意味着它修改了它之前引用的对象。

你要明白的重要一点是 foo 方法中的 bar 参数实际上只是对内存中 Object 的 REFERENCE，而不是 Object 本身。因此，如果 bar 曾经指向该对象，但它现在正在引用另一个对象，它将修改它所引用的内容，而不是它指向的先前对象。这是最后一个 test.rb 的代码，稍微注释一下，以便您更好地理解它：

```
def foo(bar) # here "bar" points to the same object as "hash_test"
    pre_defined = {'key' => 'value'}  # here a new object is created and referenced
    bar = pre_defined # now "bar" points to a new object and forgets about "hash_test"
end

def my_print(a) # here "a" holds a reference to "hash_test" which is empty
    a.each{|k,v|  # "a" is empty, so it has nothing to put
        puts "#{k} => #{v}" 
    }
end 
```

我希望这有帮助。如果您需要更详细的信息：

上一个版本的 test.rb 在 test_drive.rb 中打印空哈希的原因是因为引用“hash_test”指向的哈希对象根本没有被修改。相反， foo 方法虽然最初接收“hash_test”指向的哈希对象的引用作为名为“bar”的参数，但很快将“bar”中的引用替换为对全新哈希对象的全新引用，“ pre_defined" 变量指向。现在“bar”与“hash_test”指向的对象不同，因此“hash_test”指向的对象永远不会被修改。因此，“hash_test”包含的哈希对象从未真正填充任何内容，并且当 my_print 尝试打印它时为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:45:08.250

也就是说，因为 Ruby 是按值传递的，所以传递对象的引用。这与 Java 的行为类似。这意味着您在 foo 方法中只有一个引用的副本，并且重新分配它不会更改此方法之外的引用。

更详细：在您的第一个示例中，您将哈希传递给您的 foo 方法。引用将被复制，因此在 foo 方法中，您有一个引用的副本，它指向与“hash_test”相同的对象，但不是同一个对象。因此，调用 Hash 方法会在方法之外更改对象的值。但是在您的第二个示例中，您没有更改给定 Hash 的值，而是将一个新的 Hash 对象分配给方法引用的副本，这对“hash_test”引用没有影响。

# ruby-on-rails - 我如何完美地保存和显示图像而无需从顶部或底部回形针剪切

> ID：10732350
> 
> 赞同：0
> 
> 时间：2012-05-24T06:37:31.637
> 
> 标签：ruby-on-rails, paperclip, crop

嗨，我正在使用回形针保存图像，我的模型如下

```
 class Image < ActiveRecord::Base
 has_attached_file :snap, :styles => {:banner => "950x505", :large => "1200x1200", :medium => "363x569"}
     belongs_to :product
   end 
```

如果我上传 200x200 的图像并使用大尺寸的图像标签显示图像，则图像很奇怪并且被拉伸。

如果我遵循这个模型代码

```
 class Image < ActiveRecord::Base
 has_attached_file :snap, :styles => {:banner => "950x505#", :large => "1200x1200#", :medium => "363x569#"}
     belongs_to :product
   end 
```

意思是用“#”符号表示图像的大小并显示大图像。然后图像没有被拉伸，而是从上部或底部切出一些部分。

我怎样才能上传完美契合的图像，而不会从任何一侧拉伸或裁剪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:04:45.287

请你试试这个

[http://www.webresourcesdepot.com/jquery-image-crop-plugin-jcrop/](http://www.webresourcesdepot.com/jquery-image-crop-plugin-jcrop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:00:37.680

如果您上传低分辨率图像并尝试放大它，很明显图像会失真或像素化。更好的选择是上传最高分辨率的图片（在您的情况下可能是 1280 像素，然后应用您已有的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:06:14.183

好吧，如果你尝试：

```
class Image < ActiveRecord::Base
  has_attached_file :snap, :styles => {:banner => "950x505>", :large => "1200x1200>", :medium => "363x569>"}
  belongs_to :product
end 
```

IIRC，它将按比例缩小任何图像以适合指定的范围，而不进行裁剪，并保留较小的图像，因为它们已经适合指定的范围。

我用：

```
class Image < GenericModel
  has_attached_file :asset, :styles => {:fit => "800x600>", :thumb => "100x100>"}
  blah blah blah
end 
```

指定“适合”和“拇指”版本。

如果上传的图像是 400 x 300 的纵向，则“拇指”将为 100 高和 75 宽以保持比例。如果图像为 300 x 400，则“拇指”为 75 x 100。

“适合”也不会拉伸较小的图像，图像保持在 400 x 300（反之亦然）。

# clojure - Clojure：defprotocol，默认实现，未内联

> ID：10732355
> 
> 赞同：2
> 
> 时间：2012-05-24T06:37:50.450
> 
> 标签：clojure

## 编辑

这个问题没有任何意义，因为我是个白痴并且误读了 Clojure 文档。

## 是）我有的：

我有这样的事情：

```
(defprotocol Foo "doc" [foo bar]
  (Foo-bark [foo])
  (Foo-meow [foo])
  (Foo-other [foo]
     ... long
     multi
     line
     inline
     implementation)) 
```

## 我更喜欢什么：

```
(defprotocol Foo "doc" [foo bar]
  (Foo-bark [foo])
  (Foo-mewo [foo])
  (Foo-other [foo]))

(define Foo-other [foo]
   .. long
   multi
    line
   implementation) 
```

## 问题

以上可能吗？如果不是，我能到达的最接近的地方是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T07:19:57.093

defprotocol 不能用于为其功能/方法提供实现。您需要使用 deftype 或 reify 或 extend / extend-type （或下拉到类来做到这一点。对于您的用例，您可以使用`extend`参考早期定义的函数来实现协议。

# c++ - Qt Webview 谷歌地图缓存

> ID：10732361
> 
> 赞同：2
> 
> 时间：2012-05-24T06:38:07.987
> 
> 标签：c++, qt, google-maps, caching, qwebview

我创建了一个子类 QWebView 的 Google 地图小部件。基本上，所有谷歌地图的东西都是用Javascript（使用谷歌的Javascript API）编写的，并保存在本地存储的html文件中。然后，小部件只显示 html....并做一些其他的事情，但这无关紧要。

我遇到的问题是，与我在 Chrome 或 Safari 中打开相同的 html 文件相比，加载地图图块的时间要长得多。Chrome 和 Safari 不是基于 Qt 使用的同一个 WebKit 吗？

有没有人遇到过类似的情况？有没有办法缓存地图图块，这样每次显示更新时就不必重新获取它们？理想情况下，我希望能够永久缓存它们，以便我的程序可以离线运行，但我知道这违反了 Google 的 TOS。我将满足于能够缓存切片以加快平移/缩放。

在搜索各种论坛时，使用 QNetworkDiskCache 已成为一种潜在的解决方案，但似乎没有人能够使其工作。我似乎无法弄清楚为什么相同的 html/javascript 在 Chrome 和 Safari 中的运行速度比在 QWebView 中快得多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T12:47:44.427

QNetworkDiskCache 在谷歌地图上运行良好，与未启用时相比，速度显着提高。这应该可以解决问题：

```
QNetworkAccessManager *manager = new QNetworkAccessManager(this);
QNetworkDiskCache *diskCache = new QNetworkDiskCache(this);

diskCache->setCacheDirectory(QCoreApplication::applicationDirPath() + "/cache");
manager->setCache(diskCache); 
```

然后将管理器添加到您的 webView：

```
frame->page()->setNetworkAccessManager(manager);
frame->page()->settings()->setMaximumPagesInCache(10); 
```

然后继续加载你的html

```
frame->setHtml(...); 
```

# javascript - 如何在javascript中解析xml并从中提取xslt元素

> ID：10732362
> 
> 赞同：3
> 
> 时间：2012-05-24T06:38:10.170
> 
> 标签：javascript, xml, xslt, browser

我正在从我的 servlet 向我的 html 页面发送一个 xml 响应。我通过 xmlhttprequest 对象的 xmlresponse 对象接收它。我的 xml 文档包含一个 xsl:stylesheet 作为元素，我想提取此元素并在我的 java 脚本中执行该 xslt 代码。
可能吗？这是我的 xml 代码：

```
<samlp:AuthnRequest xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
Version="2.0" IssueInstant="2012-05-22T13:40:52:390" ProtocolBinding="urn:oasis:na
mes:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="localhos
t:8080/consumer.jsp">
<UserID>
   xyz
</UserID>
<testing>
   text
</testing>
<saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">
   http://localhost:8080/saml/SProvider.jsp
</saml:Issuer>
<xslt>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
<xsl:output method="text" />
<xsl:template match="/">
UserID : <xsl:copy-of select="//UserID"/>
testing : <xsl:copy-of select="//testing"/>
</xsl:template>
</xsl:stylesheet>
</xslt>
</samlp:AuthnRequest> 
```

从 ajax 响应中获取此 xml 字符串后，我想将其转换为 xml，提取 xslt 部分并执行它并在文本区域中显示输出。
**EDIT2**
这段代码有什么问题：

```
 var xmlDoc=xmlhttp.responseXML;
     //var xmltext=new XMLSerializer().serializeToString(xmlDoc);
     var xsltProcessor = new XSLTProcessor();
var element=xmlDoc.getElementsByTagNameNS("http://www.w3.org/1999/XSL/Transform","stylesheet");//
 //document.forms['my']['signature'].value=xmltext;
var stylesheet=xsltProcessor.importStylesheet(element[0]);
var result=xsltProcessor.transformToDocument(xmlDoc);
 var xmltext1=new XMLSerializer().serializeToString(result);
document.forms['my']['signature2'].value = xmltext1; 
```

xslt 转换的输出（xmltext1）是 -

```
<transformiix:result xmlns:transformiix="http://www.mozilla.org/TransforMiix">
UserID : 1212

Testing : 1212
</transformiix:result> 
```

但是如果您在 xslt 代码中看到，输出方法设置为“文本”。那么为什么输出中包含 xml 标签？

**答案**
[这](https://developer.mozilla.org/en/Using_the_Mozilla_JavaScript_interface_to_XSL_Transformations)给出了**edit2**的解释。感谢您的回答：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:09:31.050

这对我有用，虽然我只在最新的 chrome 中测试过：

```
var getNsResolver = function (element) {
  var ns = {
    samlp: 'urn:oasis:names:tc:SAML:2.0:protocol',
    xsl: 'http://www.w3.org/1999/XSL/Transform'
  };

  return function (prefix) {
    return ns[prefix] || null;
  };
};

var handleResponse = function (xhr) {
  var
    doc = xhr.responseXML,
    xsl = doc.evaluate('/samlp:AuthnRequest/xslt/xsl:stylesheet', doc, getNsResolver(doc.documentElement), XPathResult.ANY_TYPE, null).iterateNext(),
    processor = new XSLTProcessor(),
    result;

  processor.importStylesheet(xsl);
  result = processor.transformToFragment(doc, document);

  document.getElementById('foo').value = result.textContent;
};

window.addEventListener('load', function () {
  var request = new XMLHttpRequest();
  request.addEventListener('load', function (evt) {
    handleResponse(request);
  }, false);

  request.open('GET', 'sample.xml', true); // sample.xml contains the xml from the question
  request.send();
}, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:27:14.387

这是我用来从 xmlHttpRequest 获取命名空间 xml 的方法（在您的情况下为 ns=xsl，未测试）：

```
var xml=xhr.responseXML;
var elts = (xml.getElementsByTagNameNS)?xml.getElementsByTagNameNS("ns","tag"):xml.getElementsByTagName("ns\:tag"); 
```

请注意，如果服务器返回格式正确的 xml，则只能使用 responseXML。如果没有，您需要解析 xhr.responseText。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:25:29.600

我正在使用这台 ATM，效果很好！它是一个用 jQuery 编写的解析器

[http://www.jongma.org/webtools/jquery/xslt/](http://www.jongma.org/webtools/jquery/xslt/)

# android - android屏幕支持相同密度的不同分辨率

> ID：10732366
> 
> 赞同：0
> 
> 时间：2012-05-24T06:38:20.880
> 
> 标签：android

我正在开发一个支持 xhdpi 设备的应用程序。所以我创建了 layout-xhdpi 和 drawable-xhdpi 文件夹来放置我的可绘制对象和布局。但是在支持相同密度的不同分辨率时我遇到了问题。例如，三星galaxy nexus和sharp IS003检测到相同的layout-xhdpi文件夹，因为它具有相同的密度，但是当我在两个设备上运行应用程序时，它会在不同的位置显示按钮和图像，因为两个设备的分辨率不同。

难道我做错了什么？我应该为特定分辨率创建不同的文件夹吗？我已经阅读了[支持多屏幕](http://developer.android.com/guide/practices/screens_support.html)的文档并尝试声明像 res/layout-sw600dp/ 这样的布局，但它不会检测到 IS03。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:06:04.763

你为什么保留 `drawable-xhdpi`？没有带有 xhdpi 的 android 平板电脑。 [在这里查看：](http://developer.android.com/resources/dashboard/screens.html) 所有 10 英寸平板电脑都只有 mdpi。

如果您检查您的设备密度，它将仅显示 160dpi 的平板电脑。

有用于普通手机 nexus S ICS 的 xhdpi 设备。

所以将你所有的**drawable-xhdpi**移动到**drawable-mdpi**并检查它是否可以工作。

# fonts - 限制网络字体的字符集？

> ID：10732372
> 
> 赞同：1
> 
> 时间：2012-05-24T06:39:14.587
> 
> 标签：fonts, font-face, embedded-fonts, webfonts, typekit

我想知道是否可以限制嵌入式网络字体的字符集？

例如，“Typekit”在其“工具包编辑器”中有一个选项，您可以在其中选择`All Characters`或`Default`。

但是在我的情况下，我不使用 Typekit，而是使用普通的嵌入式网络字体。由于大量字符，字体文件相当大。

@font-face 调用是否有一些“元标记”或“属性”来限制字符集让我们说“Latin-1”？

提前谢谢你，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:56:55.380

Font Squirrel Font-Face Generator 具有子集功能。如果您使用专家设置，则完全可自定义。[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:57:43.720

`@font-face`只需告诉浏览器使用您提供的字体定义文件，它就会下载整个文件。如果字体文件太大，因为它们包含您实际不使用的字形，您需要通过删除（或更确切地说，不包括）字形来减小定义文件的大小。我使用的网络字体创建软件允许您指定要包含的字符。

即使有办法告诉浏览器“仅使用 Latin-1”，它仍然必须下载整个文件才能丢弃其中的一部分。

[请注意，如果您随后调用已省略的字形，您的用户将看到一个正方形或菱形问号。去过也做过！]

# sql-server-2008-r2 - 删除 SQL Server Management Studio 的加载项

> ID：10732375
> 
> 赞同：12
> 
> 时间：2012-05-24T06:39:31.707
> 
> 标签：sql-server-2008-r2, add-in, ssms

我安装了 SQL Server 2008 R2。

过去我安装了 Redgate Sql Promprt 5 插件。它不再起作用了，但我仍然在 SQL Management Studio 中有菜单。

我在 Windows 7 的**程序和功能**列表中看不到加载项，因此无法卸载它。当我单击菜单中的命令时，我收到以下消息：

> 无法加载支持此命令的加载项。您要删除该命令吗？

当我选择“是”时，它只会从菜单中删除选定的命令。

我想从我的 Management Studio 中完全删除加载项。

在哪里可以找到加载项以及在 Management Studio 2008 R2 中的哪里可以配置它们？

如果我需要删除一些文件以摆脱它，我在哪里可以找到这些文件？我查看了安装文件夹，没有找到任何关于加载项的信息...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-03-25T14:32:37.330

## 现在是正确的答案

从 SQL Server Management Studio 中删除所有插件。从以下位置删除所有键：

*   HKEY_LOCAL_MACHINE
    *   软件
        *   Wow6432节点
            *   微软
                *   微软 SQL 服务器
                    *   100
                        *   工具
                            *   贝壳
                                *   插件

![在此处输入图像描述](../Images/2b638bdd6c86b3605cdbd4358dcaa620.png)

我没有*要求*RedGate 在无法禁用它的情况下减慢我的 SSMS。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-22T16:24:28.777

我在 120 下遇到了同样的问题。似乎插件现在存储在程序数据中。我重命名了文件，但没有帮助。我必须在管理员模式下打开/运行 SSMS，这修复了它。后来我从文件夹“C:\ProgramData\Microsoft\SQL Server Management Studio\12.0\Addins”中删除了插件。也许你可以尝试用“_”重命名插件。这是我重命名文件和 SSMS 在管理员模式下重命名文件的唯一区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-11T18:19:20.557

我在加载 SQL Server 时遇到了同样的错误，来自另一个相关应用程序的加载项给出了该错误。我不需要那个加载项，但无法删除它。即使从注册表中删除（感谢顺便发布）对我也不起作用。我必须卸载并重新安装相关应用程序（Toad for SQL Server），“加载项”不再是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-02T10:05:30.260

我正在使用 SSMS 工具，但它会自动保存我无法轻易禁用的查询。因此我不得不删除添加。

# python - 按子字典的值对字典中的子字典进行排序

> ID：10732383
> 
> 赞同：3
> 
> 时间：2012-05-24T06:40:04.727
> 
> 标签：python, sorting, dictionary

这是我的json：

```
{"data": [{"L": "Leinster"}, {"RN": "Roscommon"}, {"G": "Galway"}, {"LS": "Laois"}, {"LD": "Longford"}, {"OY": "Offaly"}, {"KK": "Kilkenny"}, {"SO": "Sligo"}, {"C": "Connaught"}, {"CO": "Cork"}, {"M": "Munster"}, {"WD": "Waterford"}, {"CE": "Clare"}]} 
```

我想排序，以便字典将按值的“abc”排序，例如：

```
 {"data": [ {"CE": "Clare"},{"C": "Connaught"}, {"CO": "Cork"}, {"G": "Galway"},{"KK": "Kilkenny"}, {"LS": "Laois"},{"L": "Leinster"}, {"LD": "Longford"}, {"M": "Munster"},{"OY": "Offaly"}, {"RN": "Roscommon"}, {"SO": "Sligo"}, {"WD": "Waterford"} ]} 
```

一些想法？试过这个[Python：排序这个字典（字典中的字典）](https://stackoverflow.com/questions/4331892/python-sort-this-dictionary-dict-in-dict) ，但这是对值进行排序。不是字典中的值。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T06:46:04.940

对于 Python 2

```
>>> d = {'data': [{'L': 'Leinster'}, {'RN': 'Roscommon'}, {'G': 'Galway'}, {'LS': 'Laois'}, {'LD': 'Longford'}, {'OY': 'Offaly'}, {'KK': 'Kilkenny'}, {'SO': 'Sligo'}, {'C': 'Connaught'}, {'CO': 'Cork'}, {'M': 'Munster'}, {'WD': 'Waterford'}, {'CE': 'Clare'}]}
>>> dict((k,sorted(v,key=dict.values)) for k,v in d.iteritems())
{'data': [{'CE': 'Clare'}, {'C': 'Connaught'}, {'CO': 'Cork'}, {'G': 'Galway'}, {'KK': 'Kilkenny'}, {'LS': 'Laois'}, {'L': 'Leinster'}, {'LD': 'Longford'}, {'M': 'Munster'}, {'OY': 'Offaly'}, {'RN': 'Roscommon'}, {'SO': 'Sligo'}, {'WD': 'Waterford'}]} 
```

这是一个 python 3 解决方案，很高兴知道是否有比这更好的东西，因为我不太喜欢它。

```
>>> {k:sorted(v,key=lambda x: tuple(x.values())) for k,v in d.items()}
{'data': [{'CE': 'Clare'}, {'C': 'Connaught'}, {'CO': 'Cork'}, {'G': 'Galway'}, {'KK': 'Kilkenny'}, {'LS': 'Laois'}, {'L': 'Leinster'}, {'LD': 'Longford'}, {'M': 'Munster'}, {'OY': 'Offaly'}, {'RN': 'Roscommon'}, {'SO': 'Sligo'}, {'WD': 'Waterford'}]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:02:55.523

还有另一种解决方案，因为越多越好！

```
>>> r={"data": [{"L": "Leinster"}, {"RN": "Roscommon"}, {"G": "Galway"}, {"LS": "Laois"}, {"LD": "Longford"}, {"OY": "Offaly"}, {"KK": "Kilkenny"}, {"SO": "Sligo"}, {"C": "Connaught"}, {"CO": "Cork"}, {"M": "Munster"}, {"WD": "Waterford"}, {"CE": "Clare"}]}
>>>
>>> map(functools.partial(list.sort, key=dict.values), r.itervalues())
[None]
>>>
>>> r
{'data': [{'CE': 'Clare'}, {'C': 'Connaught'}, {'CO': 'Cork'}, {'G': 'Galway'}, {'KK': 'Kilkenny'}, {'LS': 'Laois'}, {'L': 'Leinster'}, {'LD': 'Longford'}, {'M': 'Munster'}, {'OY': 'Offaly'}, {'RN': 'Roscommon'}, {'SO': 'Sligo'}, {'WD': 'Waterford'}]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T06:52:59.883

或者你可以简单地做

**更新**为按值排序

```
In [41]: r={"data": [{"L": "Leinster"}, {"RN": "Roscommon"}, {"G": "Galway"}, {"LS": "Laois"}, {"LD": "Longford"}, {"OY": "Offaly"}, {"KK": "Kilkenny"}, {"SO": "Sligo"}, {"C": "Connaught"}, {"CO": "Cork"}, {"M": "Munster"}, {"WD": "Waterford"}, {"CE": "Clare"}]}

In [42]: for v in r.itervalues():
....:     v.sort(key=dict.values)
....: 

In [43]: r
Out[43]:  
{'data': [{'CE': 'Clare'},
      {'C': 'Connaught'},
      {'CO': 'Cork'},
      {'G': 'Galway'},
      {'KK': 'Kilkenny'},
      {'LS': 'Laois'},
      {'L': 'Leinster'},
      {'LD': 'Longford'},
      {'M': 'Munster'},
      {'OY': 'Offaly'},
      {'RN': 'Roscommon'},
      {'SO': 'Sligo'},
      {'WD': 'Waterford'}]} 
```

# javascript - CSS/JS/HTML: JS Function to rotate full page?

> ID：10732391
> 
> 赞同：4
> 
> 时间：2012-05-24T06:40:55.730
> 
> 标签：javascript, html, css, rotation

Okay, so for my final in a web class, we are just supposed to make a website do whatever we went. I'm done now and decided to add some fun stuff.

I want to use [`-webkit-transform: rotate(-4deg)`](http://www.the-art-of-web.com/css/css-animation/); on the body.

How can I do that in a javascript function? I have done it with the body background before, but I cannot get this to work.

Here is what I tried:

```
function rotatepage() {
    document.body.style.-webkit-transform =  rotate(-90deg); 
} 
```

and

```
function rotatepage() {
    document.body.style =  -webkit-transform:rotate(-90deg); 
} 
```

Any ideas? Is this possible?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T07:11:31.990

[今天我学到了](https://stackoverflow.com/questions/10729620/accessing-vendor-specific-css-properties-w-javascript)：

```
document.body.style.setProperty("-webkit-transform", "rotate(-90deg)", null); 
```

[摆弄](http://jsfiddle.net/ovfiddle/vvWUt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:57:00.080

您必须在使用的任何浏览器中进行试验，但我发现样式被命名为我需要更改`document.body.style.MozTransform="rotate(4deg)"`，这意味着您很有可能需要更改`document.body.style.WebkitTransform = rotate(-90deg);`

请记住，javascript 非常不喜欢`'-'`变量名之类的东西......

# javascript - HTML5 Video does not play in mobile device

> ID：10732393
> 
> 赞同：3
> 
> 时间：2012-05-24T06:40:56.083
> 
> 标签：javascript, jquery, html, video

I am using HTML5 Video with this code:

```
<div id="lightBox1" class="lightBox">
    <video id="video" controls preload="metadata">
        <source width="100%" height="470" src="/ImageworkzAsia/video/iworkzvid.mp4" type="video/mp4">
        <source width="100%" height="470" src="/ImageworkzAsia/video/iworkzvid.ogv" type="video/ogg">
        <source width="100%" height="470" src="/ImageworkzAsia/video/iworkzvid.m4v" type="video/m4v">
        <p style="text-align:center;">Your browser does not support HTML5 Video.</p><br />
    </video>
</div> 
```

The problem is that it does not play in Mobile Safari but it does play in desktop Safari. It also plays in chrome, firefox as expected. I have not yet tested this in an android device. Any ideas ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:45:07.033

几件事要尝试：

1.  在“Video src”属性中使用绝对 URL

2.  某些设备可能需要很少的额外时间来加载视频

3.  更换设备并尝试（如您所说）

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-24T07:52:22.500

您的手机浏览器可能不支持 HTML5 ..

# c# - What's the code-behind equivalent of {Binding}?

> ID：10732399
> 
> 赞同：2
> 
> 时间：2012-05-24T06:41:31.857
> 
> 标签：c#, silverlight, silverlight-3.0

What's the code-behind equivalent of this code?

```
<SomeControl SomeProperty="{Binding}"/> 
```

(If I wanted to do that in the code-behind of SomeControl instead of in the consumer's XAML.)

That is, how do I construct a Binding object such that I bind directly to the DataContext of my current object, instead of to some property?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T06:58:52.440

由于`{Binding}`只是 的快捷方式`{Binding Path=.}`，因此它应该像

```
SomeControl.SetBinding(SomeControl.SomeProperty, new Binding(".")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:02:09.237

看看[BindingOperations.SetBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingoperations.setbinding%28v=vs.95%29.aspx)：

```
BindingOperations.SetBinding(myControl, MyControlClass.Property, new Binding(...)); 
```

# objective-c - UITableView 第一行被截断

> ID：10732403
> 
> 赞同：0
> 
> 时间：2012-05-24T06:41:48.297
> 
> 标签：objective-c, uitableview

什么会导致导航控制器中表格的第一行被定位，使其一部分位于导航控制器下方？

我似乎无法让它从上到下显示整行；它可能看起来很小，但它显然不正确，我觉得它没有吸引力。

TableViewController 完全在代码中添加到导航控制器：

```
 SettingsRootController*settings=[[SettingsRootController alloc] initWithStyle:UITableViewStylePlain];
    self.settingsView=[[[UINavigationController alloc] initWithRootViewController:settings]autorelease];
    [settings release]; 
```

`SettingsRootController`是 UITableViewController 的子类。

![什么会导致导航控制器中表格的第一行被定位，使其一部分位于导航控制器下方？](../Images/4ce861f71b22d544d56aab99347a03fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:57:50.163

似乎这是以编程方式添加的常见问题`UINavigationController`- 请参阅[添加 UINavigationController 作为 UIView 的子视图](https://stackoverflow.com/questions/2526990/)。

基本上，您可能应该做的是在将其作为子视图添加到任何地方**之前**`frame`设置属性。在上述问题的公认答案中，还建议将' 框架更改为：`UINavigationController` **`UINavigationController`**

 **```
nav.view.frame = CGRectMake(nav.view.frame.origin.x, nav.view.frame.origin.y - 20,
                      nav.view.frame.size.width, nav.view.frame.size.height); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:46:50.747

唯一可行的方法是将导航控制器内的表格视图手动向下移动 10 像素，但仅在 iPhone 上，而不是在 iPad 上，因为 iPad 上没有对齐问题，而在 iPad 上移动 10 像素会产生间隙。这显然是某种导航控制器错误，因为其他线程中还有其他奇怪的问题。

```
 CGPoint tableorigin=CGPointMake(0,ISIPAD?0:10); 
```**

# android - I want to select a number from the contact book in Android

> ID：10732406
> 
> 赞同：0
> 
> 时间：2012-05-24T06:42:15.787
> 
> 标签：android, android-intent, android-widget, android-contacts

This Code shows the List of Contact Numbers, but i want to select cell number from selected contact display name--->

```
 Cursor cursor= managedQuery(intent.getData(), null, null, null, null);
               while(cursor.moveToNext()) {
                String contactId=cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
                System.out.println("---------ContactId---------"+contactId);
               String name=cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
               System.out.println("---------NAME---------"+name);
               String hasPhone=cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));
            System.out.println("---------HAS Phone---------"+hasPhone);
         ArrayList one= new ArrayList();
         ArrayList two= new ArrayList();
   //   if(Boolean.parseBoolean(hasPhone)) {
          Cursor phones=getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,          ContactsContract.CommonDataKinds.Phone.CONTACT_ID+" = "+ contactId, null, null);
         while(phones.moveToNext()) {
        phoneNumber= phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
           System.out.println("---------Number---------"+phoneNumber);
        one.add(phoneNumber);
           System.out.println("---------email Address---------"+one);
         } phones.close(); 
```

// }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:33:13.107

尝试这个，

```
public void getPhoneNumber(String conatctname)
    {
        try
        {
            ContentResolver cr =getContentResolver();
            Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
            while (cursor.moveToNext()) 
            {

                FirstName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                if(FirstName!=null)
                {
                    try
                    {
                    String[] splitval=FirstName.split(" ");
                    if(splitval.length>=1)
                    {
                        FirstName=splitval[0];
                        if(FirstName.equals(conatctname))
                        {
                            if(Integer.parseInt(cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
                            {
                            Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id}, null);
                            while (pCur.moveToNext()) 
                            {
                            PhoneNumber = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                            PhoneNumberArray.add(PhoneNumber);
                            }
                            pCur.close();
                        }

                    }
                    }
                    catch(Exception error)
                    {
                        Log.d("SplitError", error.getMessage());
                    }                   

            }
            cursor.close();
        }
        catch (NumberFormatException e)
        {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:46:58.793

显示名称

```
public class ContentProviderActivity extends Activity {

ListView lv;
Map<String, List<String>> mymap;

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    lv = (ListView)findViewById(R.id.listContact);
    mymap = new HashMap<String, List<String>>();

    Uri allContacts = Uri.parse("content://contacts/people/");
    Cursor mCursor = managedQuery(allContacts, null, null, null, ContactsContract.Contacts._ID + " ASC");

    final String[] contacts = new String[]{ContactsContract.Contacts.DISPLAY_NAME,
            ContactsContract.Contacts._ID};

    int [] view = new int[]{R.id.txtName,R.id.txtID};

    final SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.main, mCursor, contacts, view);
    lv.setAdapter(adapter);

    lv.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View view, int position,
            long id) {
        // TODO Auto-generated method stub

        //displayContacts(position+1);
        int id1 = (int) adapter.getItemId(position);
        Intent i = new Intent(getApplicationContext(),ShowContactNo.class);
        i.putExtra("ID", id1);
        startActivity(i);
     }
});
}

} 
```

ShowContactNo：显示关联的联系人号码

```
public class ShowContactNo extends ListActivity{

Map<String, List<String>> mymap;
String name;
List<String> Phone_No;
String select_Number;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    mymap = new HashMap<String, List<String>>();

    ListView listView = getListView();
    listView.setChoiceMode(ListView.CHOICE_MODE_NONE);

    Intent i = getIntent();
    int position = i.getIntExtra("ID", 0);
    displayContacts(position);

    Phone_No = new ArrayList<String>();
    Phone_No = mymap.get(name);
    System.out.println(Phone_No);

    if(Phone_No!=null)
    {
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_checked, Phone_No));
    }

     final String [] items          = new String [] {"Make Call", "Send Text SMS"};             

       ArrayAdapter<String> adapter = new ArrayAdapter<String> (this, android.R.layout.select_dialog_item,items);

       AlertDialog.Builder builder      = new AlertDialog.Builder(this);

        builder.setTitle("Select Option");

        builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
            public void onClick( DialogInterface dialog, int item ) {
                if (item == 0) {
                    Intent i = new
                    Intent(android.content.Intent.ACTION_CALL, 
                            Uri.parse("tel:"+select_Number));
                startActivity(i);

                    dialog.cancel();
                } else {

                    Intent i = new 
                    Intent(android.content.Intent.ACTION_SENDTO, 
                            Uri.parse("smsto:"+select_Number));
                    i.putExtra("sms_body", "Krishnakant Dalal");
                    startActivity(i);
                }
            }
        } );

        final AlertDialog dialog = builder.create();

    listView.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub

                    select_Number = String.valueOf(Phone_No.get(arg2));
                    dialog.show();
                }
    });
}

private void displayContacts(int position) {
    if(position!=0)
    {
    ContentResolver cr = getContentResolver();
      Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
              null, ContactsContract.Contacts._ID +" = ?",
              new String[]{String.valueOf(position)}, null);

      if (cur.getCount() > 0) {
          while (cur.moveToNext()) {
                String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                if (Integer.parseInt(cur.getString(
                      cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                   Cursor pCur = cr.query(
                             ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                             null,
                             ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                             new String[]{id}, null);

                   List<String> numberlist = new ArrayList<String>();

                   while (pCur.moveToNext()) {
                       String phoneNo = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                      // Toast.makeText(this, "Name: " + name + ", Phone No: " + phoneNo, Toast.LENGTH_SHORT).show();
                       numberlist.add(phoneNo);
                   }
                  pCur.close();

                  mymap.put(name, numberlist);  
              }
          }
      }
    }
  }

} 
```

不要忘记添加权限：

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
<uses-permission android:name="android.permission.WRITE_CONTACTS" /> 
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

# java - Java发送/接收UDP数据包内部缺少数据

> ID：10732408
> 
> 赞同：-1
> 
> 时间：2012-05-24T06:42:30.620
> 
> 标签：java, sockets, udp

我正在实现一个 p2p 应用程序，其中节点通过 UDP 数据包进行通信。从 InputStream 读取的数据包有时不完整。

这是我的代码：

...

```
protected String key;
    protected Identifier messId; //Identifier hold a BigInteger
    protected String range;
    protected String concat; 
```

……

```
public ReplicationMessage(DataInput in) throws IOException {
       fromStream(in);
}

public void fromStream(DataInput in)
    try {
    super.fromStream(in);      

    int length=in.readInt();
    byte[] data=new byte[length];
    in.readFully(data);
    concat = new String(data);
    System.out.println("concat: "+concat); 

            messId = new Identifier(in);

    } catch (IOException e) {
        e.printStackTrace();
    }        
  }

public void toStream(DataOutput out) {
    try {

    super.toStream(out);

    byte[] data = concat.getBytes();
    out.writeInt(data.length);
    out.write(data);        

    messId.toStream(out);

    } catch (IOException e) {

e.printStackTrace();
    }   
} 
```

读取数据包有时是完整的，例如

连接：179136678282544：140737488355328

但有时不完整，例如

连接：179136678282544 连接：179136678282544 连接：179136678282544

谁能告诉我问题是什么？

非常感谢

以下是发送/接收 UDP 数据包发送的代码：

private void sendMessage(int comm, Message message, InetAddress ip, int port) 抛出 IOException {

```
 ByteArrayOutputStream bout = new ByteArrayOutputStream();

    DataOutputStream dout = new DataOutputStream(bout);

    dout.writeInt(comm);

    dout.writeByte(message.code());

    message.toStream(dout);

    dout.close();

    byte[] data = bout.toByteArray();
    if (data.length > DATAGRAM_BUFFER_SIZE) {
        throw new IOException("Message too big, size="+data.length+
                              " bytes, max="+DATAGRAM_BUFFER_SIZE+" bytes");
    }

    DatagramPacket packet = new DatagramPacket(data, data.length, ip, port);

    socket.send(packet);
} 
```

用于接收 UDP 数据包

```
 byte[] buffer = new byte[DATAGRAM_BUFFER_SIZE];

     DatagramPacket packet = new DatagramPacket(buffer, buffer.length);

     socket.receive(packet); 
```

发送节点和接收节点属于一台机器。Buffer接收包设置为10*1024字节，远大于包长度

这是将传入数据包转换为流的代码

```
 ByteArrayInputStream bin = new ByteArrayInputStream(packet.getData(),
                                             packet.getOffset(), packet.getLength());

                DataInputStream din = new DataInputStream(bin);

                int comm = din.readInt();

                byte messCode = din.readByte();

                Message message = factory.createMessage(messCode, din); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:32:27.920

UDP 不传送损坏或部分数据包。要么您没有发送所有数据，要么您没有正确解包。您还没有发布所有相关的代码，因此无法准确说明在哪里。

# antlr - 语法不起作用（NoViableAltException）

> ID：10732409
> 
> 赞同：1
> 
> 时间：2012-05-24T06:42:30.657
> 
> 标签：antlr, antlr3

我是 ANTLR 的新手，我正在尝试使用它。这是我能想到的最简单的语法，但当我解析变量“id123”时它仍然不起作用（NoViableAltException），但它适用于“abc1”、“ab”、“c1d2f3”。

我正在使用 ANTLR 3.1.3 和 ANTLRWorks 1.4。

```
options 
{
    language = 'CSharp2';
    output = AST;
}

assign  :   variable '=' value;
value   :   (variable|constant);
variable:   LETTER (LETTER|DIGIT)*;
constant:   (STRING|INTEGER);

DIGIT   :   '0'..'9';
NATURAL :   (DIGIT)+;   
INTEGER :   ('-')? NATURAL; 
REAL    :   (INTEGER '.' NATURAL);

LETTER  :   ('a'..'z'|'A'..'Z');

CR      :   '\r'        { $channel = HIDDEN; }; 
LF      :   '\n'        { $channel = HIDDEN; }; 
CRLF    :   CR LF       { $channel = HIDDEN; }; 
SPACE   :   (' '|'\t')  { $channel = HIDDEN; };

STRING  :   '"' (~'"')* '"'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:05:16.337

ANTLR 的词法分析器尝试尽可能多地匹配。每当两个（或更多）规则匹配相同数量的字符时，首先定义的规则将“获胜”。因此，每当词法分析器偶然发现一个数字时，`DIGIT`就会创建一个标记，因为它是在之前定义的`NATURAL`：

```
DIGIT   :   '0'..'9';
NATURAL :   (DIGIT)+; 
```

但是对于输入`"id123"`，词法分析器产生了以下 3 个标记：

```
LETTER          'i'
LETTER          'd'
NATURAL         '123' 
```

因为词法分析器贪婪地匹配，因此`NATURAL`创建了一个，而*不是*三个`DIGIT`标记。

您应该做的是制定一个词法分析器规则`variable`：

```
assign   :   VARIABLE '=' value;
value    :   (VARIABLE | constant);
constant :   (STRING | INTEGER | REAL);

VARIABLE :   LETTER (LETTER|DIGIT)*;
INTEGER  :   ('-')? NATURAL; 
REAL     :   (INTEGER '.' NATURAL);
SPACE    :   (' ' | '\t' | '\r' | '\n')  { $channel = HIDDEN; };
STRING   :   '"' (~'"')* '"';

fragment NATURAL :   (DIGIT)+;   
fragment DIGIT   :   '0'..'9';
fragment LETTER  :   ('a'..'z' | 'A'..'Z'); 
```

另请注意，我制作了几个词法分析器规则`fragment`。这意味着词法分析器永远不会产生`NATURAL`,`DIGIT`或`LETTER`标记。这些`fragment`规则只能由其他词法分析器规则使用。换句话说，您的词法分析器只会产生`VARIABLE`、`INTEGER`、`REAL`和`STRING`标记*（所以这些是您唯一可以在解析器规则中使用的！）。

* 和`'='`令牌，当然...

# git - git undo 只更改提交中的某些文件

> ID：10732413
> 
> 赞同：4
> 
> 时间：2012-05-24T06:42:37.860
> 
> 标签：git

完成此任务的最佳实践是什么：

我有提交：

```
A -- B -- C 
```

提交 B 包括：

```
file1.java
file2.java
icon.png 
```

我想撤消对 的更改`file1`，`file2`但不想撤消对`icon.png`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:56:55.310

您可以暂存提交 B 的还原，然后在提交之前重置映像文件。

```
# Prepare a revert of B
git revert -n B

# Recover the current version of the image
git checkout HEAD -- icon.png

# Commit the "almost" reversion of B
git commit 
```

# asp-classic - 如何使用经典 asp 从本地应用程序发送邮件

> ID：10732415
> 
> 赞同：1
> 
> 时间：2012-05-24T06:42:41.480
> 
> 标签：asp-classic, vbscript, sendmail

我在我的服务器上使用它来发送邮件。效果很好。我想在我制作的本地主机应用程序上尝试一下。

```
 Set myMail=CreateObject("CDO.Message")

            myMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
            myMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/bodyformat") = 0 ' 0 - html, 1 - text
            myMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/mailformat") = 0 ' 0 - mime, 1 - text
            myMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "206.183.108.132"
            myMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
            myMail.Configuration.Fields.Update

            myMail.Subject = "Your New Password for Leave App"
            myMail.From = rs("email")
            myMail.To = "somename@domain.com"

            msgg = msgg & "Dear" & " " & session("Username") & vbcrlf & vbcrlf
            msgg = msgg & "This is your new password" & vbcrlf & vbcrlf
            msgg = msgg & "YOUR CHANGED PASSWORD" & vbcrlf
            msgg = msgg & "- - - - - - - - - - - - - - - - - - - - - - - - - - -" & vbcrlf  

            msgg = msgg & "User/Login Name :" & session("Username") & vbcrlf 
            msgg = msgg & "Password :" & request.Form("new_pass2") & vbcrlf 
            msgg = msgg & "- - - - - - - - - - - - - - - - - - - - - - - - - - -" & vbcrlf & vbcrlf 
            msgg = msgg & "Please sign in to your account using the user name and password above." & vbcrlf & vbcrlf
            msgg = msgg & "Thanks" & vbcrlf 

            myMail.TextBody = msgg 
            myMail.Send

            set myMail = nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:42:42.837

检查您的本地计算机是否可以访问 SMTP 服务器。它可能在某些防火墙或路由器中被阻止。这个网站可以为你做一个简单的检查：http: [//www.canyouseeme.org/](http://www.canyouseeme.org/)

当然，您可能还想在代码中检查它，或者通过 Telnet：[http ://www.simplescripts.de/smtp-check-port-25-telnet-command.htm](http://www.simplescripts.de/smtp-check-port-25-telnet-command.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:44:53.527

这是我为发送电子邮件而创建的包含文件的内容：[注意在顶部它包含另一个包含 fn_dirty() 用于添加引号之类的内容。] 问我是否需要该功能。

```
<!-- #INCLUDE FILE = "i_fn_dirty.asp" -->
<%
function email(s_name_from,s_address_from,s_reply_to,s_subject,s_recipients_list,s_msg,s_type_email,s_msg_error_add,s_RemoteHost)

    if (s_msg_error_add<>"") then s_msg_error_add = "<hr>" & vbCrLf & s_msg_error_add
    if (s_RemoteHost="default") then s_RemoteHost = application("s_mail_server")

    'recipients_list = "Scott,scott@changed.net;Andy,andy@changed.net" etc
    array_recipients = split(s_recipients_list,";",-1,1)

    'so recipients array now looks like this:
    'array_recipients(0) = "Scott,scott@changed.net"
    'array_recipients(1) = "Andy,andy@changed.net"  

    '-- Create the Mailer Object
    Set Mailer = Server.CreateObject("SoftArtisans.SMTPMail")

    '-- Set the Mail Properties
    Mailer.RemoteHost = s_RemoteHost
    Mailer.FromName = s_name_from
    Mailer.FromAddress = s_address_from
    if (s_reply_to<>"") then Mailer.ReplyTo = s_reply_to
    Mailer.Subject = s_subject
    a = ""
    For Each Item in array_recipients
        array_data = split(Item,",",-1,1)
        s_name = array_data(0)
        s_email_addr = array_data(1)
        if (s_name<>"" and s_email_addr<>"") then
            Mailer.AddRecipient s_name, s_email_addr
            a = a & "name: " & s_name & ", email: " & s_email_addr & " | "
        end if
    Next
    if (s_type_email = "text") then
        Mailer.BodyText = s_msg
    else
        s_msg_html = replace(s_msg,vbCrLf,"<br>",1,-1,1)
        Mailer.HTMLText = s_msg_html
    end if

    '-- Fire off the email message
    if (Mailer.SendMail) then
        'yay it worked
        Set Mailer = Nothing
    else
        'try one more time
        if (Mailer.SendMail) then
            'yay it worked
            Set Mailer = Nothing
        else
            msg = "<br>Error in i_fn_email.asp: " & Mailer.Response & "<br>"
            msg = msg & "s_name_from = " & s_name_from & "<br>"
            msg = msg & "s_address_from = " & s_address_from & "<br>"
            msg = msg & "s_subject = " & s_subject & "<br>"
            msg = msg & "recips list = " & a & "<br>"
            msg = msg & s_msg_error_add
            session("msg") = msg
            Set Mailer = Nothing
            response.redirect ("error_report.asp")
        end if
    end if
end function
%> 
```

# c++ - 异常处理不起作用

> ID：10732418
> 
> 赞同：0
> 
> 时间：2012-05-24T06:43:05.273
> 
> 标签：c++, exception-handling, marmalade

我正在尝试使用`try-catch`块来处理`divide-by-zero`果酱中的异常，但我猜果酱会覆盖 c++ 异常处理，所以它不起作用。我在论坛上搜索过，解决方案似乎是我必须在 mkb 中添加一个选项，如本文[所述](http://www.madewithmarmalade.com/node/291)。

```
options
{
    enable-exceptions=1
} 
```

我已经尝试添加它，但它也不起作用。有什么办法可以处理这个异常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:09:28.043

如果您正在为橘子酱编写扩展，则异常将不起作用。什么

```
options
{
    enable-exceptions=1
} 
```

确实是为 msvc 添加了编译器选项 /GX，为 RVCT 添加了 --exceptions。因此，如果您使用其他编译器，例如 g++，它将无法正常工作。

# php - Finding file type in PHP

> ID：10732419
> 
> 赞同：1
> 
> 时间：2012-05-24T06:43:06.567
> 
> 标签：php

Is there any way to find the exact file type in php **without looking for the letters after the dot(.)** ?. Because in that case even if you rename a exe file as png, it will be considered as a png only which is malicious. And some PHP functions like `pathinfo()` also returns the value after dot only which is not reliable. Any suggestion or idea on this would be greatly appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T06:47:17.160

您要查找的不是“扩展名”，而是*文件的类型*。这已被标准化为[MIME 类型](http://en.wikipedia.org/wiki/Internet_media_type)。有很多方法可以检测文件的 MIME 类型，[前面都讨论过](https://stackoverflow.com/search?q=detect%20mime%20type%20%5Bphp%5D)。迄今为止首选的方法是[finfo](http://www.php.net/manual/en/ref.fileinfo.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:48:51.840

您想要的不是文件扩展名，而是 mime 类型。文件扩展名只不过是一种命名约定，正如您所指出的，它很容易被欺骗。您可以使用该[`finfo_file`](http://www.php.net/manual/en/function.finfo-file.php)功能来获取此信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:50:45.877

上次我检查时，您可以使用 php 函数获取图像的确切文件类型。不确定任意文件。

不可能以 100% 的准确率检测任何文件的文件类型**。**曾经。您可以制作任意文件，该文件将无法作为检测到的类型打开。

通过检查文件签名（前几个字节），可以高度准确地检测二进制文件的文件类型。如上所述，结果不是 100% 保证的。但是，您必须有一个文件类型签名库才能查找。

检测文本文件的文件类型是可能的，但很难。你能区分不同的语言吗？如果代码可以用一种以上的语言编译怎么办？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-24T06:47:42.117

它是可靠的。扩展名正是最后一个点之后的字母。如果您将 file.exe 重命名为 file.png，它的新扩展名将是 .png 并且将不再是可执行的（在 Windows 中，即在 POSIX 系统中，可执行性不是通过文件扩展名控制的）。

# esb - MULE ENRICH with incoming pojo

> ID：10732425
> 
> 赞同：1
> 
> 时间：2012-05-24T06:43:23.603
> 
> 标签：esb, mule

i want add some extra information on incomming Pojo, i have used message enricher in mule and do that, here is my full flow. I am using subflow to get the payload and select some values in DB and set that value in same pojo and returning, while in target i am setting as payload but i am getting error like this "An Expression Enricher for "payload" is not registered with Mule."

here is mu flow

```
<enricher doc:name="Message Enricher">
        <core:flow-ref name="flows1Flow1" doc:name="Flow Reference"/>
        <enrich source="#[groovy:payload]" target="#[payload]"/> 
```

```
<logger message="AFTER Enrich: #[payload]" level="INFO" doc:name="Logger"/>
    <component class="com.enrich.AfterEnricher" doc:name="Java"/>

 <sub-flow name="flows1Flow1" doc:name="flows1Flow1">
    <component class="com.enrich.MessageEnrichPattern" doc:name="Java"/>
    <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="selectData" connector-ref="jdbcConnector" doc:name="Database (JDBC)">
        <jdbc:query key="selectData" value="SELECT Username, Password, ModuleId from Credentials where ModuleId=#[map-payload:moduleId]"/>
    </jdbc:outbound-endpoint>
    <logger message="#[payload]" level="INFO" doc:name="Logger"/>
    <component class="com.enrich.ReceiveMessageEnrichPattern" doc:name="Java"/>
</sub-flow> 
```

here ReceiveMessageEnrichPattern returing

```
Credential credential = new Credential();
    credential.setUname(hashMap.get("USERNAME").toString());
    credential.setPwd(hashMap.get("PPPP").toString());
    credential.setMid(hashMap.get("MODULEID").toString());
    return credential; 
```

but in after enrich component i am getting exception. Please help me how can enrich my incoming pojo with extra info can add.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T22:57:06.930

根据[docs](http://www.mulesoft.org/documentation/display/MULE3USER/Expressions+Configuration+Reference#ExpressionsConfigurationReference-Enrichers)，Mule 目前只支持两个富集目标：

*   流量变量，
*   消息头。

为了实现您的目标，您需要：

*   将浓缩器结果（凭据对象）存储在流变量中，
*   使用自定义转换器将流变量中的 Credential 对象中的值复制到主流中的 POJO 有效负载。

# iphone - Can web apps in iPhone call inapp for virtual things purchase?

> ID：10732427
> 
> 赞同：0
> 
> 时间：2012-05-24T06:43:25.550
> 
> 标签：iphone

If I would like to write a web apps that users can purchase some virtual things, can I call the iphone inapp? or I can use other payment methods?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:59:03.983

不，你不能，你需要在你的应用程序中实现特殊的非标准标签，当用户点击这些链接时，他们会有这样的事情：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if (navigationType == UIWebViewNavigationTypeLinkClicked) {

        NSString *urlAbsolute = [request.URL absoluteString];
        if ([urlAbsolute hasPrefix:@"YourSpecialTag://"])
        {
            //YourSpecialTag://BuyID=100
            //Parse the url
            //Get the id = 100
            //Continue with in-app purchase
            return NO;
        }
    }
    return YES;
} 
```

# integer - typeerror: character buffer expected

> ID：10732428
> 
> 赞同：-1
> 
> 时间：2012-05-24T06:43:28.533
> 
> 标签：integer, buffer, typeerror

below is a section of my code where i am trying to output a string and an integer to a file. It would not let me output more than on thing at a time so I had to put them on seperate lines. I also now have an error saying:

```
TypeError: Expected a character buffer object 
```

referring to the line outputting the variable count. Can someone tell me how to fix this error? Also if I could somehow combine all this into one line that would be cool too. Thanks!

```
print outfile.write ("(" + currentuser + ")")
print outfile.write (" ")
print outfile.write (count) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:48:02.310

文件对象的`.write()`方法接受一个字符串参数。要写入整数，您需要先将其转换为字符串。

```
outfile.write("(%s) %s" % (currentuser, count)) 
```

可能是您正在寻找的。我不确定你为什么要`print`返回值，因为`.write()`不返回任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:47:54.070

如果这是 Python（我不确定），请尝试

```
print outfile.write ("(" + currentuser + ") " + str(count)) 
```

或者

```
print outfile.write("(%s) %d" % (currentuser, count)) 
```

或者

```
print outfile.write("({0}) {1}".format(currentuser, count)) 
```

# blackberry - how to send a tweet in the blackberry

> ID：10732429
> 
> 赞同：1
> 
> 时间：2012-05-24T06:43:30.947
> 
> 标签：blackberry, twitter, twitter-oauth

I want to tweet in blackberry. I am able to login after I am getting illegal exception.

I have used the below code for tweeting. Please suggest me.

```
protected class MyBrowserFieldListener extends BrowserFieldListener {
   public void documentLoaded(final BrowserField browserField, Document document  
        throws Exception {
        //Dialog.alert("Loaded");
        if(i==1){
            //Dialog.alert("111");
            String c=OAuth.accessToken();
            //Dialog.alert(c);
            if(c.equals("200")){
                            Token token = new Token(Const.token, Const.tokenSecret);
                Credential cj = new Credential(Const.name, 
                                   Const.consumerKey,Const.consumerSecret, token);

                                           m = UserAccountManager.getInstance(cj);

                if (m.verifyCredential()) {
                                      Const.persistentHashtable.put("Token", l);
                    Const.persistentHashtable.put("Token_Secret",   Const.tokenSecret);
                    Const.persistentHashtable.put("uam", m);
                    try{

                    Tweet t = new Tweet("jomymaratt", "Hi!!! Now I can send DM.");
                        TweetER ter = TweetER.getInstance(m);
                        t = ter.send(t);
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:48:04.183

```
Token token = new Token(token, tokenSecret);
Credential cj = new Credential(name, consumerKey,consumerSecret, token);
m = UserAccountManager.getInstance(cj);
  if (m.verifyCredential()
       {
          Tweet t = new Tweet("Hi!!! ");
      TweetER ter = TweetER.getInstance(m);
      t = ter.post(t); 
        } 
    else {
          Dialog.alert("Error");      
          } 
```

# .net - 在 vb.net 中打印

> ID：10732431
> 
> 赞同：1
> 
> 时间：2012-05-24T06:43:32.850
> 
> 标签：.net, vb.net, printing, pagination

这是 pankaj vishwakarma 一个 vb.net 开发人员，我目前正在从事打印项目。这里我通过代码在打印机上创建自定义纸张，然后尝试在指定位置打印文本。它不打印。经过多次尝试后，我发现可打印区域没有改变，但它正在改变高度和宽度，因为自定义纸张仍然它的可打印区域与以前的纸张相同

# android - 带有 API10 的最新 AndEngine

> ID：10732433
> 
> 赞同：0
> 
> 时间：2012-05-24T06:43:42.757
> 
> 标签：android, andengine

我开始用 AndEngine 设置 Eclipse，我的问题是。最新版本的 AndEngine 是否与 API10 一起使用（我选择是因为它最受欢迎）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:24:46.407

带有 GLES 2 的 Andengine 从 API 8 开始工作。

如果需要，您可以针对较新的版本进行编译。你只需要包括

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"/> 
```

（如果您根据 API 15 编译）在您的清单中，以便在 Android 2.2 (API 8) 或更高版本中运行您的应用程序。

# apache - 可以 ping ec2 服务器（ubuntu/apache）但没有从 http 请求得到响应

> ID：10732435
> 
> 赞同：2
> 
> 时间：2012-05-24T06:43:47.000
> 
> 标签：apache, http, amazon-ec2

背景：

*   操作系统：ubuntu
*   网络服务器：apache2

什么有效：

*   我可以 ping 服务器的弹性 IP（并收到响应）
*   我可以 ssh 进入服务器

什么不起作用：

*   我无法从服务器获得任何类型的 http 响应

预期行为：

*   当我访问[http://ec2-XXX-XX-XXX-XXX.compute-1.amazonaws.com/](http://ec2-XXX-XX-XXX-XXX.compute-1.amazonaws.com/)时，它将为我的页面提供服务，或者至少给我一个可以调试的 404

实际行为：

*   当我访问[http://ec2-XXX-XX-XXX-XXX.compute-1.amazonaws.com/](http://ec2-XXX-XX-XXX-XXX.compute-1.amazonaws.com/)时，它显示“糟糕！Google Chrome 无法连接到 ec2-XXX-XX-XXX-XXX.compute- 1.amazonaws.com”。它甚至没有给我一个404。

咆哮：

很明显，服务器在那里，因为我可以 ssh 到那个确切的地址，我可以 ping 那个确切的 IP 并得到响应。但是当我在我的网络浏览器中访问那个确切的地址时，就好像它永远不会到达服务器一样。或者好像亚马逊不允许 http 请求通过，但在我的安全组中，我明确指定允许来自所有来源的 http 请求。Apache 肯定在运行，我的文档根目录肯定设置正确，而且我的错误和访问日志没有给我任何信息。

亚马逊和服务器之间是否有任何类型的登录，或者在将其发送到服务器并被 Apache 接收的请求之间是否有任何类型的登录，这将指定它返回“未找到”而不是 404 的原因。我可以让我的 Apache 日志更详细?

提前致谢！我在这上面花了几个小时......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:03:05.857

原来 apache 被设置为监听端口 8080 而不是端口 80，所以如果你遇到这个问题，试着看看 apache 正在监听什么。

# html - svg文本上不需要的阴影

> ID：10732437
> 
> 赞同：0
> 
> 时间：2012-05-24T06:43:59.563
> 
> 标签：html, text, svg

我的 SVG 文本上有一个奇怪的阴影。我在亚马逊上购买的参考指南没有任何答案。我似乎无法弄清楚它是如何到达那里的，以及如何将其删除。没有应用任何过滤器，并且标记匹配纯文本示例。

继承人的文本元素： `<text class="noToggle" data-nodetitle="Node 1" lengthAdjust="spacingAndGlyphs" x="510" y="420" textLength="230" fill="#d90000">Node Title Goes Here</text>`

[![](../Images/f92b7c2e066822acb58e28b9efceaa20.png "由 imgur.com 主办")](https://imgur.com/TmGcu)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:10:58.087

如果您想摆脱白色阴影，您可以覆盖 jquerymobile css 并将其设置为无，例如：

```
<p style="text-shadow: none">This text used to have a white shadow</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:14:04.093

我将问题追溯到 jQuery mobile 1.1。它从 body div 继承了样式规则，其中 jQm 应用了 1px 白色文本阴影。我不知道 SVG 文本会受到这个特定 css 样式规则的影响。显然在 chrome 和 safari webkit 浏览器中，它可以。

# ios - 如何从 plist 文件中删除 iPhone 删除数据

> ID：10732441
> 
> 赞同：0
> 
> 时间：2012-05-24T06:44:28.513
> 
> 标签：ios, plist

我的文档目录中有一个 plist 文件。

我需要以编程方式删除一些具有其值的键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:01:44.177

首先，我会在 plist 中阅读

获取 plist 的 URL 并读入

```
 NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath]; 
```

然后将其分解为对象。plist 只是不同 NSObjects 的层次结构，通常根是一个数组或字典。

```
NSDictionary *plistData = (NSDictionary *)[NSPropertyListSerialization propertyListFromData:plistXML mutabilityOption:NSPropertyListMutableContainersAndLeaves format:&format errorDescription:&error]; 
```

修改字典，然后将其重新写入文档文件夹。

# objective-c - 如何在 iOS 中以编程方式编写带有音频文件的彩信？

> ID：10732445
> 
> 赞同：2
> 
> 时间：2012-05-24T06:44:42.463
> 
> 标签：objective-c, ios

我有兴趣查看如何使用最新的 iOS 以编程方式编写 SMS/MMS 以包含声音文件的工作代码，考虑到如果文件太大（此时不确定最大大小，任何信息表示赞赏）应该向用户显示错误。

我知道这是可以做到的，因为苹果 iphone 的内置录音机允许通过短信发送音频文件，如果它们不是太大的话。我想了解它如何以编程方式实现这一点，我可以使用哪些声音格式以及有哪些限制（如果有）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:48:06.143

不允许通过 MessageUI 框架发送彩信，这是 iOS 允许开发人员与 Messaging 接口交互的框架。Apple 在其应用程序中使用私有 API，任何使用私有 API 的行为 = App Store 中的自动拒绝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:09:29.527

Raphael 是对的，当前的 iOS 版本（iOS 5）目前还没有办法使用 MessageUI 框架发送彩信。

我们发现的一种潜在解决方法是创建一个“发送彩信”屏幕，用户可以在其中附加他们选择的音频/pxt，然后当用户点击发送按钮时，调用第 3 方彩信网关以发送音频/图像。

# html - 是否可以禁用 textarea 的多行选项？

> ID：10732446
> 
> 赞同：28
> 
> 时间：2012-05-24T06:44:46.817
> 
> 标签：html, textarea

当然，我可以使用标准的 html 文本框，但出于某种原因我需要文本区域。

那么，是否可以禁用 textarea 的多行选项？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-24T07:02:44.183

您可以使用`cols`and`rows`属性设置文本区域的大小，并使其在 CSS 中不可调整大小，但您不能阻止用户添加多于一行。即使区域太小，也会出现一个滚动条，让他们想写多少行就写多少行。

如果你真的只需要一行，我建议将`rows`属性设置为 1 并检查输入是否有一行带有 Javascript 的内容。

在 html 中：

```
<textarea name="a"  cols="5" rows="1" ></textarea> 
```

在 CSS 中：

```
textarea{
    resize: none; 
    #You can use resize: horizontal if you just want to disable vertical resize
} 
```

不过，我建议使用`<input type="text" ... />`Why do you want to Avoid it？

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-05-17T19:18:42.603

`rows="1"`您可以通过上的设置将所有文本保留在一行中`<textarea>`，就像其他答案所建议的那样，然后将以下 CSS 应用于文本区域：

```
resize: none;
white-space: nowrap;
overflow-x: scroll; 
```

此 CSS 将防止单行换行，同时通过提供滚动条来导航任何溢出可见区域的文本，从而使整行保持可见。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-07-06T03:10:46.113

您可以使用`wrap="off"`textarea 中的属性以单行显示。

```
<textarea wrap="off"></textarea>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-10-04T18:24:30.580

是的，每次用户输入内容时，都可以使用`input`event 删除所有换行符。

```
<textarea oninput="this.value = this.value.replace(/\n/g,'')"></textarea> 
```

或者以更文明的方式：

**html**

```
<textarea id="ta"></textarea> 
```

**js**

```
document.getElementById('ta').addEventListener('input', function(e){
    this.value = this.value.replace(/\n/g,'')
}); 
```

[JSFiddle 上的演示](https://jsfiddle.net/4qrnv6sz/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-03T15:10:23.790

使用这个纯 JS 代码，它不允许用户在 textarea 中输入多行

```
var textArea = document.getElementsByTagName("textarea")[0];//your desired TextArea
textArea.onkeydown = function (e) {
    if (e.keyCode == 13) { e.preventDefault(); }
}; 
```

**注意：**如果用户复制多行文本并将其粘贴到 TextArea 中，此方法将不起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-24T06:49:47.187

使用 rows=1 仅显示 1 行。[您可以从此链接](http://www.w3schools.com/tags/tag_textarea.asp)获得更多信息

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-24T06:51:14.613

您可以将`rows`属性设置为 1。

无法禁用多行

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-07-21T13:48:52.030

下面的 jQuery 代码片段强制 textarea 在一行中显示。

```
 $(document).ready(function(){
    $('textarea').each(function(){$(this).attr('rows', 1);});
  }); 
```

# iphone - 从下到上计算表格中的单元格

> ID：10732449
> 
> 赞同：0
> 
> 时间：2012-05-24T06:45:02.460
> 
> 标签：iphone, uitableview

我需要从下到上计算单元格的高度，因为我需要第一个单元格中其他单元格的高度总和。我如何首先计算最后一个单元格高度，然后是倒数第二个单元格......依此类推，最后是第一个单元格高度。请帮忙。我在这里的结构非常糟糕。我的代码是这样的......它给出了从上到下的高度。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

    if (indexPath.section==0 && currentQuestion.graphic){       
        UIImage *img= [[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:currentQuestion.graphic ofType:nil]];
        self.currentQuestionImage=img;
        [img release];

        return (self.currentQuestionImage.size.height* [self zoomFactor])+10;
    }else if ((indexPath.section==0 && !currentQuestion.graphic) || (indexPath.section==1 && currentQuestion.graphic)){

        CGSize constSize = { self.view.frame.size.width, 20000.0f };
        CGSize textSize = [currentQuestion.text sizeWithFont:[ThemeSettings fontUsedInQuestionCell] constrainedToSize:constSize lineBreakMode:UILineBreakModeWordWrap];
        CGFloat height =  (textSize.height)+60.0;

        return height<45.0?45.0:height;  

        }else if([self answerGraphic: indexPath]){
        UIImage *img = [[UIImage alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[self answerGraphic: indexPath] ofType:nil]];
        [self.answerImages replaceObjectAtIndex:indexPath.section withObject:img];
        int size = (img.size.height*0.50)+10;
        [img release];

        return size;

    }else {
        int answerIndex = currentQuestion.graphic?indexPath.section-2:indexPath.section-1;
        Answer *a=[currentQuestion.answers objectAtIndex:answerIndex];
        CGSize constSize = { 300.0f, 20000.0f };
        CGSize textSize = [a.text sizeWithFont:[UIFont systemFontOfSize:16] constrainedToSize:constSize lineBreakMode:UILineBreakModeWordWrap];
        CGFloat height =  (textSize.height+textSize.height/3.0 )+10.0;
        return height<55.0?55.0:height;

    }

} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:51:42.473

您不能强制计算顺序。但是`heightForRowAtIndexPath`可以随时计算任何高度。所以，类似这样的东西会起作用：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row == 0)
    {
        CGFloat h = 0;
        for (int i = 1; i < [self tableView:tableView numberOfRowsInSection:indexPath.section]; i++)
            h += [self tableView:tableView heightForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:indexPath.section]];
        return h;
    }
    else
    {
        return 44.; //or any other value for your other cells
    }
} 
```

# apache-pig - 如何优化 PIG latin 中的 group by 语句？

> ID：10732456
> 
> 赞同：4
> 
> 时间：2012-05-24T06:45:48.720
> 
> 标签：apache-pig

我有一个倾斜的数据集，我需要按操作进行分组，然后对其进行嵌套 foreach。由于数据倾斜，很少有 reducer 需要很长时间，而其他的则没有时间。我知道存在倾斜连接，但是 group by 和 foreach 有什么用？这是我的猪代码（重命名变量）：

```
foo_grouped = GROUP foo_grouped by FOO;
FOO_stats = FOREACH foo_grouped 
{ 
a_FOO_total = foo_grouped.ATTR; 
a_FOO_total = DISTINCT a_FOO_total; 

bar_count = foo_grouped.BAR; 
bar_count = DISTINCT bar_count; 

a_FOO_type1 = FILTER foo_grouped by COND1=='Y';
a_FOO_type1 = a_FOO_type1.ATTR; 
a_FOO_type1 = DISTINCT a_FOO_type1;

a_FOO_type2 = FILTER foo_grouped by COND2=='Y' OR COND3=='HIGH'; 
a_FOO_type2 = a_FOO_type2.ATTR; 
a_FOO_type2 = DISTINCT a_FOO_type2; 

generate group as FOO, 
COUNT(a_FOO_total) as a_FOO_total, COUNT(a_FOO_type1) as a_FOO_type1, COUNT(a_FOO_type2)     as a_FOO_type2, COUNT(bar_count) as bar_count; } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T16:50:38.090

在您的示例中，FOREACH 中有许多嵌套的 DISTINCT 运算符，它们在 reducer 中执行，它依赖 RAM 来计算唯一值，并且此查询仅生成一个作业。如果组中的唯一元素太多，您也可以获得与内存相关的异常。

幸运的是 PIG Latin 是一种数据流语言，您可以编写执行计划。为了利用更多的 CPU，您可以更改代码以强制执行更多可以并行执行的 MapReduce 作业。为此，我们应该在不使用嵌套 DISTINCT 的情况下重写查询，诀窍是执行不同的操作，而不是像只有一列一样分组，然后合并结果。它非常类似于 SQL，但它可以工作。这里是：

```
records = LOAD '....' USING PigStorage(',') AS (g, a, b, c, d, fd, s, w);
selected = FOREACH records GENERATE g, a, b, c, d;
grouped_a = FOREACH selected GENERATE g, a;
grouped_a = DISTINCT grouped_a;
grouped_a_count = GROUP grouped_a BY g;
grouped_a_count = FOREACH grouped_a_count GENERATE FLATTEN(group) as g, COUNT(grouped_a) as a_count;

grouped_b = FOREACH selected GENERATE g, b;
grouped_b = DISTINCT grouped_b;
grouped_b_count = GROUP grouped_b BY g;
grouped_b_count = FOREACH grouped_b_count GENERATE FLATTEN(group) as g, COUNT(grouped_b) as b_count;

grouped_c = FOREACH selected GENERATE g, c;
grouped_c = DISTINCT grouped_c;
grouped_c_count = GROUP grouped_c BY g;
grouped_c_count = FOREACH grouped_c_count GENERATE FLATTEN(group) as g, COUNT(grouped_c) as c_count;

grouped_d = FOREACH selected GENERATE g, d;
grouped_d = DISTINCT grouped_d;
grouped_d_count = GROUP grouped_d BY g;
grouped_d_count = FOREACH grouped_d_count GENERATE FLATTEN(group) as g, COUNT(grouped_d) as d_count;

mrg = JOIN grouped_a_count BY g, grouped_b_count BY g, grouped_c_count BY g, grouped_d_count BY g;
out = FOREACH mrg GENERATE grouped_a_count::g, grouped_a_count::a_count, grouped_b_count::b_count, grouped_c_count::c_count, grouped_d_count::d_count;
STORE out into '....' USING PigStorage(','); 
```

执行后我得到以下总结，表明不同的操作没有受到第一个作业处理的数据倾斜的影响：

```
Job Stats (time in seconds):
      JobId            Maps    Reduces MaxMapTime      MinMapTIme      AvgMapTime      MaxReduceTime   MinReduceTime   AvgReduceTime   Alias   Feature Outputs
job_201206061712_0244   669     45      75      8       13      376     18      202     grouped_a,grouped_b,grouped_c,grouped_d,records,selected        DISTINCT,MULTI_QUERY
job_201206061712_0245   1       1       3       3       3       12      12      12      grouped_c_count GROUP_BY,COMBINER
job_201206061712_0246   1       1       3       3       3       12      12      12      grouped_b_count GROUP_BY,COMBINER
job_201206061712_0247   5       1       48      27      33      30      30      30      grouped_a_count GROUP_BY,COMBINER
job_201206061712_0248   1       1       3       3       3       12      12      12      grouped_d_count GROUP_BY,COMBINER
job_201206061712_0249   4       1       3       3       3       12      12      12      mrg,out HASH_JOIN       ...,
Input(s):
Successfully read 52215768 records (44863559501 bytes) from: "...."

Output(s):
Successfully stored 9 records (181 bytes) in: "..." 
```

从 Job DAG 中我们可以看到 groupby 操作是并行执行的：

```
Job DAG:
job_201206061712_0244   ->      job_201206061712_0248,job_201206061712_0246,job_201206061712_0247,job_201206061712_0245,
job_201206061712_0248   ->      job_201206061712_0249,
job_201206061712_0246   ->      job_201206061712_0249,
job_201206061712_0247   ->      job_201206061712_0249,
job_201206061712_0245   ->      job_201206061712_0249,
job_201206061712_0249 
```

它适用于我的数据集，其中一个组键值（在 g 列中）占数据的 95%。它还消除了与内存相关的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:10:30.460

我最近遇到了这个加入的错误。如果组中有任何空值，那么整个关系将被删除。

# visual-c++ - 指针转换/初始化适用于某些编译器，但不适用于可视编译器

> ID：10732458
> 
> 赞同：0
> 
> 时间：2012-05-24T06:45:54.477
> 
> 标签：visual-c++, casting, void-pointers

我有一些过去用 DSP 编译器编译的代码。现在我需要用 VISUAL STUDIO 编译代码，我遇到了一些麻烦。在这两种情况下，此代码都编译为 c++！

你知道这个怎么投吗？

有这样的事情：

```
int  temp[56];
// ...
int (*myarray)[14][2] = (void *)  temp; //myarray is supposed to use only parts of temp 
```

我得到的错误是：错误 C2440：“正在初始化”：无法从“void *”转换为“int8_t (*)[14][2]”

谢谢。布布

# matlab - 如何调整 x 和 y 轴的大小

> ID：10732463
> 
> 赞同：2
> 
> 时间：2012-05-24T06:45:59.170
> 
> 标签：matlab, plot, octave

如何调整 x 和 y 轴的大小？

我想要什么，更具体；

```
3900  |
  .   |
  .   |
  .   |
  60  |
      |
  30  |
      |_____________________________
      0  60  120  180  ...        3600 
```

我做了什么 ;

```
 a = [0:0.1:10000];
  plot(a); 
```

我应该写什么才能按预期完成调整 x 和 y 轴的大小？

编辑：

我不想;

```
 |
      |
      |
      |
      |
      |
      |
      |
      |
      |
3900  |
  .   |
  .   |
  .   |
  60  |
      |
  30  |
      |___________________________________________________________________
      0  60  120  180  ...        3600 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T06:49:47.920

检查文档： http: [//www.mathworks.com/help/techdoc/ref/axis.html](http://www.mathworks.com/help/techdoc/ref/axis.html)

```
axis([xmin xmax ymin ymax]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T06:50:49.963

另一种方式：

```
xlim([0 3600])
ylim([0 3900]) 
```

[http://www.mathworks.com/help/techdoc/ref/xlim.html](http://www.mathworks.com/help/techdoc/ref/xlim.html)

[http://www.mathworks.com/help/techdoc/ref/ylim.html](http://www.mathworks.com/help/techdoc/ref/ylim.html)

我认为对于步长

```
set(gca, 'XTick', [0:60:3600])
set(gca, 'YTick', [0:30:3900]) 
```

# android - 德语中的 SAX 解析器编码问题

> ID：10732469
> 
> 赞同：0
> 
> 时间：2012-05-24T06:46:24.347
> 
> 标签：android, encoding, android-parser

我正在开发一个德语应用程序。我正在以 XML 格式获取数据。我使用 SAX 解析器来解析这些 XML 并在 TextView 中显示数据。除了解析后遇到的特殊字符问题外，一切正常。

这是我通过 URL 链接获得的 XML。此 XML 具有 utf-8 编码。此 XML 文件中的所有字符都很好。

```
<?xml version="1.0" encoding="utf-8"?>
<posts>
    <page id="001">
        <title><![CDATA[Sie kaufen bei uns ausschließlich Holzkunst- und Volkskunst-Produkte ]]></title>
        <detial><![CDATA[Durch enge Beziehungen mit unseren Lieferanten können wir attraktive rückläufig 
        Preise und schnelle Lieferungen gewährleisten. Caroline Féry and Laura Herbst Universität Potsdam Mein 
        Flugzeug hatte zwölf Stunden VERSPÄTUNG </p>]]></detial>
    </page>     
</posts> 
```

`TextView`我使用 SAX 解析器来解析这个 XML:- (并在.)中显示解析的数据

```
public class GermanParseActivity extends Activity {
    /** Called when the activity is first created. */

    static final String URL = "http://www.xyz.com/id=1";

    ItemList itemList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        XMLParser parser = new XMLParser();
        String XML = parser.getXmlFromUrl(URL);

        System.out.println("This XML is ========>"+XML);

       try
       {
           SAXParserFactory spf = SAXParserFactory.newInstance();
       SAXParser sp = spf.newSAXParser();
           XMLReader xr = sp.getXMLReader();

           /** Create handler to handle XML Tags ( extends DefaultHandler ) */
           MyXMLHandler myXMLHandler = new MyXMLHandler();
           xr.setContentHandler(myXMLHandler);

       ByteArrayInputStream is = new ByteArrayInputStream(XML.getBytes());
       xr.parse(new InputSource(is));
      }
      catch(Exception e)
      {

      }

      itemList = MyXMLHandler.itemList;

      ArrayList<String> listItem= itemList.getTitle();

     ListView lview = (ListView) findViewById(R.id.listview1);
     myAdapter adapter = new myAdapter(this, listItem);
     lview.setAdapter(adapter);
    }

} 
```

但是在解析之后，我得到了不在 XML 文件中但在解析 XML 文件后生成的奇怪字符。

像这些字符：

> 解析前解析后
> 
> können ---> können
> 
> rückläufig ---> rückläufig
> 
> gewährleisten ---> gewährleisten

谁能建议解决此问题的正确方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T06:55:38.507

您需要重新编码您的输入。问题是文本是 UTF-8，但被解释为 ISO-8859-1。这似乎是 SAX 的错误。

```
String output=new String(input.getBytes("8859_1"), "utf-8"); 
```

该行采用 ISO-8859-1 并将其转换为 Java 使用的 utf-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:56:27.917

got my anwser from [here](https://groups.google.com/forum/?fromgroups#!topic/comp.lang.python/Ghp9-jKXtn8) 他们建议标题应该是：

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
```

代替

```
<?xml version="1.0" encoding="utf-8"?> 
```

希望这是答案 - 编辑刚刚看到您无法控制 xml，所以这无济于事，rekire 的答案是一个选项

# iphone - iPhone：-裁剪所需形状和大小的图像的最简单方法

> ID：10732470
> 
> 赞同：7
> 
> 时间：2012-05-24T06:46:26.267
> 
> 标签：iphone, xcode

我正在尝试根据我的需要裁剪图像......对于我的电影类型应用程序......并在我的应用程序中使用它

我尝试了很多选项，但没有一个对我有用……我在堆栈溢出时阅读了答案，但没有用

请帮帮我

```
image = [UIImage imageNamed:@"images2.jpg"];
imageView = [[UIImageView alloc] initWithImage:image];

CGSize size = [image size];

[imageView setFrame:CGRectMake(0, 0, size.width, size.height)];
[[self view] addSubview:imageView];
[imageView release]; 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T09:45:46.083

这是将图像调整为所需大小的确切代码

```
 CGSize itemSize = CGSizeMake(320,480); // give any size you want to give

    UIGraphicsBeginImageContext(itemSize);

    CGRect imageRect = CGRectMake(0.0, 0.0, itemSize.width, itemSize.height);

    [myimage drawInRect:imageRect];

    myimage = UIGraphicsGetImageFromCurrentImageContext();  

    UIGraphicsEndImageContext(); 
```

现在我的图像是你想要的大小

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T06:56:55.810

请找到下面的代码来裁剪图像。

```
// Create the image from a png file
UIImage *image = [UIImage imageNamed:@"prgBinary.jpg"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

// Get size of current image
CGSize size = [image size];

// Frame location in view to show original image
[imageView setFrame:CGRectMake(0, 0, size.width, size.height)];
[[self view] addSubview:imageView];
[imageView release];    

// Create rectangle that represents a cropped image  
// from the middle of the existing image
CGRect rect = CGRectMake(size.width / 4, size.height / 4 , 
    (size.width / 2), (size.height / 2));

// Create bitmap image from original image data,
// using rectangle to specify desired crop area
CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], rect);
UIImage *img = [UIImage imageWithCGImage:imageRef]; 
CGImageRelease(imageRef);

// Create and show the new image from bitmap data
imageView = [[UIImageView alloc] initWithImage:img];
[imageView setFrame:CGRectMake(0, 200, (size.width / 2), (size.height / 2))];
[[self view] addSubview:imageView];
[imageView release]; 
```

参考[如何裁剪图像](http://mobiledevelopertips.com/graphics/how-to-crop-an-image.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-02T10:42:59.410

我认为这是最简单的方法：

```
CGRect rect = CGRectMake(0.0, 0.0, 320.0, 430.0);
CGImageRef tempImage = CGImageCreateWithImageInRect([originalImage CGImage], rect);
UIImage *newImage = [UIImage imageWithCGImage:tempImage];
CGImageRelease(tempImage); 
```

但不要忘记在裁剪前清除 imageOrientation，否则裁剪后会得到旋转的图像：

```
-(UIImage *)normalizeImage:(UIImage *)raw {
    if (raw.imageOrientation == UIImageOrientationUp) return raw;
    UIGraphicsBeginImageContextWithOptions(raw.size, NO, raw.scale);
    [raw drawInRect:(CGRect){0, 0, raw.size}];
    UIImage *normalizedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return normalizedImage;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T10:17:59.647

这是一个使用 Dinesh 的答案来获取图像的方形缩略图的类

```
class func returnSquareCroppedImage(theImage:UIImage)->UIImage{

    var mySize:CGFloat = 100.0
    var imageRect:CGRect

    if theImage.size.width > theImage.size.height {

        mySize = theImage.size.height
        let xAdjust = 0-((theImage.size.width - theImage.size.height)/2)
        imageRect = CGRectMake(xAdjust, 0, theImage.size.width, theImage.size.height)
    }else{

        mySize = theImage.size.width
        let yAdjust = 0-((theImage.size.height - theImage.size.width)/2)
        imageRect = CGRectMake(0, yAdjust, theImage.size.width, theImage.size.height)
    }

    UIGraphicsBeginImageContext(CGSizeMake(mySize, mySize))

    theImage.drawInRect(imageRect)

    let returnImage = UIGraphicsGetImageFromCurrentImageContext()

    return returnImage
} 
```

# javascript - RequireJS 加载叶子模块

> ID：10732473
> 
> 赞同：0
> 
> 时间：2012-05-24T06:46:45.360
> 
> 标签：javascript, requirejs, js-amd

我是 RequireJS 的新手，但似乎碰壁了。

麻烦从我的“app”模块开始。我不确定如何告诉 RequireJS 加载我的叶子模块——依赖于“app”的包。

我想我明白为什么 - 因为系统中没有任何东西依赖于它们并且它们没有在任何地方注册，但我需要处理这种情况。

我怎样才能让 RequireJS 知道这些模块并适当地加载它们？

干杯

```
//index.html
....
<script data-main="app/config" src="/assets/js/libs/require.js"></script>
....

//config.js
require.config({
    deps: [ "app" ],
    paths: {
        libs: "../assets/js/libs",
        plugins: "../assets/js/plugins",
        jquery: "../assets/js/libs/jquery",
        underscore: "../assets/js/libs/underscore",
        backbone: "../assets/js/libs/backbone",
        marionette: "../assets/js/libs/backbone.marionette"
    }
});

//app.js
require(
    [ "jquery", "underscore", "backbone", "marionette" ],
    function ( $, _, Backbone, Marionette ) {
        //....
    }
);

//app.view.js
require(
    [ "jquery", "underscore", "backbone", "marionette", "app" ], 
    function ( $, _, Backbone, Marionette, App ) {
        //....
    }
);

//app.route.js 
require(
    [ "backbone", "app" ], 
    function ( Backbone, App ) {
        //....
    }
); 
```

因此：

*   app.js 依赖于“jquery”、“underscore”、“backbone”、“marionette”
*   app.view.js 依赖于 "jquery", "underscore", "backbone",
*   "marionette", "app" app.route.js 依赖于 "backbone", "app"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:28:32.637

如文档中所述 - > [http://requirejs.org/docs/api.html#config](http://requirejs.org/docs/api.html#config) 依赖项在 deps 数组中定义。它们是运行 require.js 时首先加载的东西，它实际上主要用于在加载 require.js 之前必须定义依赖项时。

这就是你的结构应该是什么样子

```
//config.js
require.config({
    paths: {
        libs: "../assets/js/libs",
        plugins: "../assets/js/plugins",
        jquery: "../assets/js/libs/jquery",
        underscore: "../assets/js/libs/underscore",
        backbone: "../assets/js/libs/backbone",
        marionette: "../assets/js/libs/backbone.marionette"
    }
});

require(['app']);

//app.js
define(
    [ "jquery", "underscore", "backbone", "marionette" ],
    function ( $, _, Backbone, Marionette ) {
        //....
    }
);

//app.view.js
define(
    [ "jquery", "underscore", "backbone", "marionette", "app" ], 
    function ( $, _, Backbone, Marionette, App ) {
        //....
    }
);

//app.route.js 
define(
    [ "backbone", "app" ], 
    function ( Backbone, App ) {
        //....
    }
); 
```

请记住，您的所有库和模块都需要与 AMD 兼容，如果您想将 app 用作 app.view.js 中的路径，那么您需要将其定义为一个。与 egis 相同，因为如果在 require.config 中未将它们定义为路径，则无法加载像这样的模块 ["Backbone", "App"]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:28:12.067

这就是我的启动方式：

```
// main.js
define(["jquery", "app", "router"], function ($, App) {
  "use strict";
  // domReady plugin maybe best used here?
  $(function() {
    App.start();
  });
});

// app.js
define(["backbone", "marionette"], function (Backbone) {
  "use strict";
  var app = new Backbone.Marionette.Application();
  app.on("initialize:after", function(options){
    if (Backbone.history){
      Backbone.history.start();
    }
  });

  return app;
});

// router.js
define(["backbone", "controller", "marionette"], function(Backbone, controller) {
  "use strict";
  var Router = Backbone.Marionette.AppRouter.extend({
    appRoutes: {
        "": "index"
    }
  });
  return new Router({
    controller: controller
  });
});

// controller.js
define(["view"], function(View) {
  return {
    "index": {
      new View(); // Do what you like here…
    }
  }
});

// view.js
define(["backbone"], function(Backbone) {
  // view here
}); 
```

我假设对 router.js 的依赖可以放在 app.js 上，但基本上对 Backbone.history.start() 的调用需要加载路由器。路由器依赖于控制器。它是控制器，它具有对它所使用的视图等的所有依赖项。可能有模型和集合等。

希望有帮助。

# django - django pisa - 仅用于两个或更多页面的页码 - 显示总页数的页码

> ID：10732478
> 
> 赞同：3
> 
> 时间：2012-05-24T06:47:06.827
> 
> 标签：django, pisa, page-numbering

是否有可能仅用 django pisa 显示两页或更多页的页码？显示页码的模板如下所示：

```
<div id="footerContent">
   <p>Page <pdf:pagenumber></p>
</div> 
```

我认为有必要在比萨处理之前获取页数。使用类似这种伪的 if/else 语句的任何选项：

```
if pages > 1:
 ...
else:
 ... 
```

如果要显示例如**第 1/5**页（五页之一），还需要获取页数？！比萨没有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T09:25:22.980

我在添加一个计数器时遇到了问题，该计数器会告诉我在文档的总页数中我正在查看哪个页码。当我从以下位置切换比萨导入时，它开始工作：

```
import ho.pisa as pisa 
```

至

```
import xhtml2pdf.pisa as pisa 
```

用 pip 安装 xhtml2pdf

```
pip install xhtml2pdf 
```

这就是我的页脚现在的样子

```
<div id="footerContent">
    {%block page_foot%}
        Page <pdf:pagenumber> / <pdf:pagecount>
    {%endblock%}
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T11:25:08.800

我认为您可以在不使用[https://github.com/chrisglass/xhtml2pdf](https://github.com/chrisglass/xhtml2pdf)的情况下做到这一点。我所做的是，我使用如下分页符：

```
<h1 style="display:none">PAGECOUNT</h1> 
```

h1 的 CSS 是

```
h1 {
    page-break-before:always;
} 
```

现在，您可以使用

```
<your-html-string>.count('PAGECOUNT') + 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:14:18.620

这在当前版本的 python-pisa 中是不可能的。然而，它有一些补丁。如果您使用此 github 中的 pisa 或 xhtml2pdf 版本，您将能够获得总页数。

[https://github.com/chrisglass/xhtml2pdf](https://github.com/chrisglass/xhtml2pdf)

我的模板页脚如下所示：

```
<div id="footerContent">
  "Page: <pdf:pagenumber> / <pdf:pagecount>
</div> 
```

# iphone - 如何调用dealloc方法

> ID：10732481
> 
> 赞同：0
> 
> 时间：2012-05-24T06:47:09.673
> 
> 标签：iphone

我是 iPhone 开发的新手。我在按钮单击事件上调用了一个 viewController。但是当我回来时，我的`-dealloc`方法没有被调用。这是我的按钮单击事件代码：

```
-(IBAction)btnAddPressed:(id)sender
{
    FriendsTableListViewController *viewController = [[FriendsTableListViewController alloc] initWithNibName:@"FriendsTableListViewController" bundle:nil];
    [self.navigationController pushViewController:viewController animated:YES];
    [viewController release];
} 
```

这是我单击按钮后的 viewController 的 dealloc 方法：

```
-(void)dealloc{
    [super dealloc];
} 
```

我不知道为什么 dealloc 方法不能正常工作。请帮我。感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:57:17.107

navigationController 持有您的控制器（当您推送视图控制器时它将获得所有权），因此它不会被释放。

如果要删除视图控制器，请将其从导航控制器中弹出。

# linux - 获得更多确定性（短）睡眠

> ID：10732483
> 
> 赞同：1
> 
> 时间：2012-05-24T06:47:18.607
> 
> 标签：linux, real-time, sleep

作为一个学生项目，我们正在构建一个机器人，它应该通过一个定义的路线并捡起一个木制立方体。它的核心是一台运行 250MHz ARM9 的 debian 的单板计算机。因此，控制器的处理能力绰绰有余。此外，它还进行一些图像处理（不是在驾驶时，只有在停止时），这就是为什么我们不使用没有操作系统的简单微控制器的原因。

目前整个事情运行良好，但有一个问题：主控制循环执行没有任何延迟，并达到超过 1kHz 的循环频率。这绰绰有余，100Hz也足够了。但是每时每刻都有一个周期需要100ms甚至更多，这可能会对控制器造成很大的干扰。

我怀疑还有其他一些任务会导致这种延迟，因为调度程序可能会检测到它们在很长一段时间内没有任何 CPU 时间。

所以我最想要的是以下内容：在控制器的主循环中可能有 5 毫秒的短暂睡眠，这确实只需要 5 毫秒，但为系统的其余部分提供了一些处理器时间。我可以使用 nanosleep 包括例如 500us 的延迟，但这总是需要超过 10 毫秒才能执行，因此它不是真正的替代方案。我更喜欢自愿睡眠之类的东西，让等待的任务有机会做某事，但会尽快返回。

否则系统会被卸载，因此没有什么可以真正需要长时间进行大量处理。

有没有办法在用户空间做到这一点，即不必坚持像 RTAI 之类的东西？

谢谢，菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:08:26.040

I suggest that you stick to real time interfaces when doing motor control; I've seen a 1000 kg truck slam into a wall during a demo due to that the OS decided to think about something else for once... :-)

If you want to stay away from RTAI (but you shouldn't); a (perhaps) quick fix is to slap an Arduino board for the actual driving, and keep the linux board for high level processing.

To fix the "wall problem" implement a watchdog in the driver board, that stops the thing if no command have arrived for a while...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:19:46.017

实时问题需要实时操作系统。

因为实时操作系统是可预测的。您可以设置任务优先级，以便需要在指定时间产生结果的任务不会被需要处理能力但不受时间限制的任务抢占。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T17:32:09.267

我们在工作中的 ARM7 板上运行 100 Hz 循环，使用带有[RT 补丁](https://rt.wiki.kernel.org/index.php/Main_Page)的标准 Linux ，它允许（几乎）内核中的所有锁被抢占。将此与高优先级线程相结合，可为我们在内核和用户空间提供必要的性能。

由于您唯一需要做的就是应用补丁并将内核配置为使用完全抢占，它也很容易使用 - 无需更改软件架构中的任何内容，尽管我对 Debian 还不够熟悉补丁是否会干净地应用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T17:09:26.360

好的，我找到了一个更好的解决方案，虽然并不完美。还有另一个[线程](https://stackoverflow.com/questions/9374653/real-time-scheduling-in-linux)解释了 sched_setscheduler() 函数。我的初始化代码现在看起来像这样：

```
// Lock memory to reduce probability of high latency due to swapping
int rtres = mlockall(MCL_CURRENT | MCL_FUTURE);
if (rtres) {
  cerr << "WARNING: mlockall() failed: " << rtres << endl;
}

// Set real-time scheduler policy to get more time deterministic behaviour
struct sched_param rtparams;
rtparams.sched_priority = sched_get_priority_max(SCHED_FIFO);
rtres = sched_setscheduler(0, SCHED_FIFO, &rtparams);
if (rtres) {
  cerr << "WARNING: sched_setscheduler() failed: " << rtres << endl;
} 
```

此外，我已经从主循环中删除了短暂的睡眠。该进程现在消耗了所有可用的处理能力，并且（显然）对来自外部世界的任何操作（例如控制台击键等）没有响应，但这对于手头的任务来说是可以的。主循环统计数据显示，大多数迭代需要不到一毫秒的时间才能完成，但仍有一些（每 1000 次左右）需要大约 1 毫秒。100 毫秒。这仍然不好，但至少不再有更长的延迟。

由于它“只是”一个学生项目，我们可以接受它并将其作为进一步改进的候选者。

无论如何，感谢您的建议。下一次，我会更好地了解如何应对实时要求并从一开始就采用 RT OS。

问候，菲利普

# asp.net - 在网站使用 ASP.NET MVC 3 (IIS7) 闲置后，第一个请求非常慢

> ID：10732484
> 
> 赞同：4
> 
> 时间：2012-05-24T06:47:24.693
> 
> 标签：asp.net, asp.net-mvc, iis-7

我在 ASP.Net MVC 3 中开发了一个项目，我的主机使用的是 iis7（Win Web Serv 2008 R2），网站闲置后的第一个请求（大约 1-2 小时）非常慢。

我使用带有 512Mb RAM 的 VPS。这可能与RAM太少有关吗？

任何人都可以帮助我解决这种行为的可能原因吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T06:55:09.727

在一定数量的不活动后，IIS 会卸载 AppDomain。然后第一个请求再次加载应用程序，速度较慢。您可以尝试在 IIS 的属性中配置此时间段，但也可能存在应用程序卸载的其他原因，例如达到特定的 CPU 或内存使用阈值。这些阈值也可以在 IIS 中进行配置。

这不是特定于 ASP.NET MVC 的东西。一般而言，所有 ASP.NET 应用程序都是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:38:17.957

我们也遇到了 ruby​​ 和乘客的这个问题，它会在一段时间后将应用程序从内存中取出，但我找到了一个很好的应用程序，它为我们解决了这个问题，而无需更改服务器配置中的任何内容，该应用程序称为 wekkars，你可以找到它在这里：[http ://www.wekkars.com](http://www.wekkars.com)

# winforms - 从 Web UI 测试切换到 Windows 窗体应用程序测试

> ID：10732486
> 
> 赞同：1
> 
> 时间：2012-05-24T06:47:30.730
> 
> 标签：winforms, visual-studio-2010, selenium, automated-tests

我使用 Selenium (WebDriver) 已经有一段时间了，利用 Microsoft Team Foundation Server（VS2010、Microsoft 测试管理器、实验室管理）来触发我对指定构建的自动化测试。这一直很好，我什至编写了一个包装器框架，以允许大量可重用性并在需要时切换到 WatiN。

我的问题是，现在我要测试的应用程序是 Windows 窗体（带有基础设施和 Teecharts），而不是 Web 应用程序，而且我的研究给我的印象是 Selenium 和 WatiN 现在都不合适了。我一直在阅读有关 NUnitForms 和 White 的信息，因为它们似乎是在询问类似问题的 SO 帖子中常见的免费选择。但是，我想知道是否有人有为 Windows 窗体应用程序设置带有自动化 UI 测试的 TFS 的经验？

或者，如果失败了，是否有人将 Visual Studio 2010 与免费的 Windows 窗体 UI 测试包一起使用并取得了一些成功？我的计划是下周尝试 White/NUnitForms，但尽管我会寻找一些个人叙述以防万一这不值得追求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:34:23.460

在对 SO 进行了更多阅读和检查之后，我发现了一些更有用的链接。我仍然对做事的可靠方法感到茫然，但我相信它可以做到。

我发现以下链接很有帮助；[winforms 在 SO 上发布](https://stackoverflow.com/questions/71746/integration-testing-with-white)，[白色文档中的持续集成](http://white.codeplex.com/wikipage?title=Using%20with%20Continuous%20Integration&referringTitle=Home)（我最初不知何故错过了这个……），进一步看，我发现将 NUnit 与 White TFS 结合使用完全可以满足我的需求。可以在[这里](http://nunit4teambuild.codeplex.com/)找到带有 TFS 的 NUnit 。

希望这对处于相同位置的任何人有所帮助，并且我欢迎任何进一步的答案，因为我还没有开始任何实际测试。

编辑：已决定将 White 与 NUnit 一起使用，因为 NUnit 有很多文档，结果与 TFS 集成，而 White 在某种程度上是 Visual Studio 自动化工具的包装器。

# c - 结合 openmp 和 sse 指令

> ID：10732487
> 
> 赞同：1
> 
> 时间：2012-05-24T06:47:39.953
> 
> 标签：c, openmp, sse

原始代码看起来像

```
for(i=0;i<20;i++){
    if(){
        do(); 
    }
    else{

        num2 = _mm_set_pd(Phasor.imaginary, Phasor.real);

        for(int k=0; k<SamplesIneachPeriodCeil[iterationIndex]; k++) 
        {
            /*SamplesIneachPeriodCeil[iterationIndex] is in range of 175000*/

            num1 = _mm_loaddup_pd(&OutSymbol[k].real);
            num3 = _mm_mul_pd(num2, num1);
            num1 = _mm_loaddup_pd(&OutSymbol[k].imaginary);
            num2 = _mm_shuffle_pd(num2, num2, 1);
            num4 = _mm_mul_pd(num2, num1);
            num3 = _mm_addsub_pd(num3, num4);
            num2 = _mm_shuffle_pd(num2, num2, 1);
            num5 = _mm_set_pd(InSymbolInt8[k],InSymbolInt8[k] );
            num6 = _mm_mul_pd(num3, num5);
            num7 = _mm_set_pd(Out[k].imaginary,Out[k].real);
            num8 = _mm_add_pd(num7,num6);
            _mm_storeu_pd((double *)&Out[k], num8);

        }
        Out = Out + SamplesIneachPeriodCeil[iterationIndex];
    }
} 
```

这段代码给了我 ard 15milsec 的速度

当我修改代码以包含 openmp 作为

注意::这里我只包括其他部分

```
else{
    int size = SamplesIneachPeriodCeil[iterationIndex];

#pragma omp parallel num_threads(2) shared(size)
    {
        int start,end,tindex,tno,no_of_iteration;
        tindex = omp_get_thread_num();
        tno = omp_get_num_threads();
        start = tindex * size / tno;
        end = (1+ tindex)* size / tno ;
        num2 = _mm_set_pd(Phasor.imaginary, Phasor.real);
        int k;
        for(k = start ; k < end; k++){

            num1 = _mm_loaddup_pd(&OutSymbol[k].real);
            num3 = _mm_mul_pd(num2, num1);
            num1 = _mm_loaddup_pd(&OutSymbol[k].imaginary);
            num2 = _mm_shuffle_pd(num2, num2, 1);
            num4 = _mm_mul_pd(num2, num1);
            num3 = _mm_addsub_pd(num3, num4);
            //_mm_storeu_pd((double *)&newSymbol, num3);
            num2 = _mm_shuffle_pd(num2, num2, 1);
            num5 = _mm_set_pd(InSymbolInt8[k],InSymbolInt8[k] );
            num6 = _mm_mul_pd(num3, num5);
            num7 = _mm_set_pd(Out[k].imaginary,Out[k].real);
            num8 = _mm_add_pd(num7,num6);
            _mm_storeu_pd((double *)&Out[k], num8);

        }
    }
    Out = Out + size;
} 
```

此代码显示的速度是 30 milsec

所以我想知道我是否在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:53:16.727

~~You are doing nothing to distribute the execution of the loop between the two threads. You are just creating a parallel region with two threads and those threads execute exactly the same code. What you might want to do is to move the parallel region to only encompass the `for` loop and use the work-sharing construct:~~

 ~~```
int k;
#pragma omp parallel for num_threads(2) ...
for(k = start ; k < end; k++){
   ...
} 
```~~  ~~Thanks to Tudor for the correction. Your code is correctly parallelised but you have a parallel region inside a loop. Entering and exiting a parallel region is associated with some overhead. Usually this is described as "fork/join model" in which a team of threads is created on entering the region and then all threads are joined to the master on exiting. Most OpenMP runtimes use various thread pooling techniques to decrease the overhead but it is still there.

Your loop runs for 15 milliseconds. This is already fast enough compared to the OpenMP overhead and thus the overhead becomes visible. Think of moving the parallel region over the outer loop and the overhead should be reduced by a factor of up to 20 (depends on how often the `else` branch is taken) but you might still not see an improvement in the computation time.

Parallelisation is only aplicable to programs where the problem is large enough so that the communication or the synchronisation overhead would be negligible or at least small in comparison to the computation time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:53:32.127

您应该在外部循环（over）之外启动并行区域，并使用`i`for 并行化 for 循环。循环内使用的所有变量 ( , ...) 最好只在其中声明，以便它们是自动的（实际上，它们中的大多数都可以重用，但编译器应该会发现我们无论如何）。`k``omp for``num1``num2``private`~~

# android - 为什么 adapter.notifyDataSetChanged(); 不管用？

> ID：10732491
> 
> 赞同：0
> 
> 时间：2012-05-24T06:47:49.047
> 
> 标签：android, sqlite, listview, android-arrayadapter

我正在尝试从列表视图和适配器以及数据库中删除一行。这是我的 WebMessageAdapter.java 类，我在其中调用 adapter.notifyDataSetChanged(); 但它不会刷新列表。当我从其他活动回来时，列表再次填充了刚刚删除的数据。我不明白我错过了什么或在哪里..？

谢谢。

```
package com.utility;

import java.util.ArrayList;

import android.content.Context;
import android.content.Intent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

import com.activity.ContactInfoActivity;
import com.activity.MYApplication;
import com..activity.R;
import com.database.WebMessageCore;

public class WebMessageAdapter extends ArrayAdapter<WebMessageCore> implements
        OnClickListener {

    Context _Context;
    ArrayList<WebMessageCore> _WebMsgList;
    WebMessageCore _WebMsgCore;
    TextView _MsgContent;
    private LayoutInflater mInflater;
    ImageView Arrow;
    ImageView imgDel;

    MYApplication application;
    WebMessageCore selectedWebMsgCore;

    public WebMessageAdapter(Context context, int resource,
            ArrayList<WebMessageCore> contactList) {

        super(context, resource, contactList);
        _Context = context;
        _WebMsgList = contactList;
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return _WebMsgList.size();
    }

    public WebMessageCore getItem(int position) {
        return _WebMsgList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.custom_row_view, null);
            holder = new ViewHolder();
            holder.txtName = (TextView) convertView.findViewById(R.id.name);
            holder.txtmessage = (TextView) convertView
                    .findViewById(R.id.meassage);
            holder.txtPhone = (TextView) convertView.findViewById(R.id.phone);
            holder.txtdate = (TextView) convertView.findViewById(R.id.datetime);
            holder.Arrow = (ImageView) convertView
                    .findViewById(R.id.settingArrow);
            holder.imgDelete = (ImageView) convertView.findViewById(R.id.dlet);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        _WebMsgCore = _WebMsgList.get(position);
        holder.txtName.setText(_WebMsgCore.getName());
        holder.txtmessage.setText(_WebMsgCore.getMessage());
        holder.txtPhone.setText(_WebMsgCore.getMobileNo());
        holder.txtdate.setText(_WebMsgCore.getRecDate());

        holder.imgDelete.setTag(_WebMsgCore);
        holder.imgDelete.setOnClickListener(this);
        holder.Arrow.setTag(_WebMsgCore);
        holder.Arrow.setOnClickListener(this);
        return convertView;
    }

    static class ViewHolder {
        ImageView Arrow;
        TextView txtName;
        TextView txtmessage;
        TextView txtPhone;
        TextView txtdate;
        ImageView imgDelete;

    }

    public WebMessageCore getSelectedWebMsgCore() {
        return selectedWebMsgCore;
    }

    public void setSelectedWebMsgCore(WebMessageCore selectedWebMsgCore) {
        this.selectedWebMsgCore = selectedWebMsgCore;
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.dlet:
            WebMessageCore tempWebMsgCore = (WebMessageCore) v.getTag();
            _WebMsgList.remove(tempWebMsgCore);   
            adapter.notifyDataSetChanged();
            break;
        case R.id.settingArrow:
            callContactInfoActivity(v);
            break;
        default:
            break;
        }

    }

    private void callContactInfoActivity(View v) {
        WebMessageCore tempWebMsgCore = (WebMessageCore) v.getTag();
        WebMessageAdapter.this.setSelectedWebMsgCore(tempWebMsgCore);
        Intent newActivity = new Intent(_Context, ContactInfoActivity.class);
        newActivity.putExtra("id", tempWebMsgCore.getId());
        newActivity.putExtra("name", tempWebMsgCore.getName());
        newActivity.putExtra("message", tempWebMsgCore.getMessage());
        newActivity.putExtra("mobilenumber", tempWebMsgCore.getMobileNo());
        _Context.startActivity(newActivity);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:08:47.083

Dont add the model object of `_WebMsgCore` in the `holder.imgDelete.setTag(_WebMsgCore);` in `getView()` Method. In place of that add `position` in the `holder.imgDelete.setTag(position)` and in `onClick()` callback method get the position from the Tag and remove the `item` from the `position` which you received and do call `notifyDataSetChanged()` of an adapter.

Hope this will resolve your problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:58:58.010

您应该为 convertView 实现 seton onclick 侦听器，

```
convertView.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
    _WebMsgList.remove(position);   
    WebMessageAdapter.this.notifyDataSetChanged();
} 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:53:19.010

改成：

```
WebMessageAdapter.this.notifyDataSetChanged(); 
```

**编辑：**

删除您的`public void onClick(View v) {}`, 并更改为：

```
holder.imgDelete.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        _WebMsgList.remove(position);   
        WebMessageAdapter.this.notifyDataSetChanged();
    }

}); 
```

# performance - Scala 的 .min 如何避免装箱和拆箱的惩罚？

> ID：10732496
> 
> 赞同：10
> 
> 时间：2012-05-24T06:48:04.270
> 
> 标签：performance, scala, boxing

`Vector.min`被[实现](https://github.com/scala/scala/blob/cdd9845a5eabacb972abdcb1fb5975a45ea4fab9/src/library/scala/collection/TraversableOnce.scala#L191)为

```
def min[B >: A](implicit cmp: Ordering[B]): A = {
  if (isEmpty)
    throw new UnsupportedOperationException("empty.min")
  reduceLeft((x, y) => if (cmp.lteq(x, y)) x else y)
} 
```

当你分析

```
Vector.fill(1000000)(scala.util.Random.nextLong).min 
```

它很快，没有装箱或拆箱。然而，如果你写了明显等价的

```
val cmp = implicitly[Ordering[Long]]
Vector.fill(1000000)(scala.util.Random.nextLong).reduceLeft((x, y) => if (cmp.lteq(x, y)) x else y) 
```

它的运行速度大约慢了 10 倍（忽略 Random 中的时间，否则它会占主导地位，是的，我预热了我的基准测试......）。

> 第一个版本如何避免拳击的性能损失？

**编辑：**这是我的分析代码：

```
val cmp = implicitly[Ordering[Long]]

def randomLongs = Vector.fill(1000000)(scala.util.Random.nextLong)

def timing[R](f: => R): (Long, R) = {
  val startTime = System.nanoTime
  val result = f
  ((System.nanoTime - startTime) / 1000000, result)
}

def minTiming = { val r = randomLongs; timing(r.min)._1 }
def reduceLeftTiming = { val r = randomLongs; timing(r.reduceLeft((x, y) => if (cmp.lteq(x, y)) x else y))._1 }

while(true) {
  println((minTiming, reduceLeftTiming))
} 
```

而且我看到使用`min`时间约为 20 毫秒，使用时间约为 200 毫秒`reduceLeft`。我已经使用`YourKit`;分析了这段代码。这是调用树的[屏幕截图](http://static.inky.ws/image/2037/image.jpg)，显示`min`不会导致任何装箱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T08:34:31.807

我认为第一个版本推断`java.lang.Long`为`B`. 所以仍然有装箱，但只是在填充向量时，然后所有的比较都是在装箱的对象之间进行的。

在第二个版本中，由于 type of`cmp`给出为`Ordering[Long]`，`java.lang.Long`向量中的 s 在传递给 之前必须拆箱`cmp.lteq(x, y)`。

# pdf - 将 pdf 保存在 ipad 内存中，而不是在我的文档目录中

> ID：10732497
> 
> 赞同：0
> 
> 时间：2012-05-24T06:48:05.127
> 
> 标签：pdf, xcode4.3, save, ios5.1

我使用objective-C在ios中创建了一个pdf文件，并且能够将它保存在我的应用程序文档目录中。我想知道是否可以将生成的 pdf 保存在 ipad 内存中，这样我就不需要我的应用程序来显示生成的 pdf。换句话说，我不想将它存储在文档目录中，而是存储在 ipad 的某个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:58:16.980

我可能不完全理解您的要求，但是；您可以通过常规电缆同步/itunes 将 PDF 直接传输到 iPad，以便可以在 ipad 上的 iBooks 中查看。只需将 PDF 拖入 iTunes，它会转到书籍部分，您可以同步它。

# testing - 应用程序测试中的 MalformedURLException

> ID：10732500
> 
> 赞同：1
> 
> 时间：2012-05-24T06:48:13.100
> 
> 标签：testing, playframework, integration-testing, playframework-1.x

我正在进行应用程序测试并发现了一个问题。我的应用程序。在安全控制器内部有一个 authenticate(email, password) 操作，当从登录页面调用时，它会使用有效的电子邮件和无效的密码将我发送回登录页面，并显示一条错误消息，位于 flash 范围内。

该应用程序。测试代码如下：

```
Response response = 
    GET("/security/authenticate?email=validUser&password=invalid", true);
String pattern = "invalid password";
assertContentMatch(pattern, response); 
```

运行此代码时会引发下一个异常：

```
A java.lang.RuntimeException has been caught,
java.net.MalformedURLException: no protocol: /login 
```

做了一些研究，发现：

*   当尝试创建新的 URL 对象时抛出异常，以便能够使用无效的 URL 进行重定向。在这种情况下，不存在协议
*   看着应用程序。在示例应用程序中进行测试。GET 不使用重定向，这意味着在 GET 之后仅验证 http 代码，但不尝试遵循重定向

有没有人也有同样的问题？任何打开的错误来查找信息或添加我的 2 美分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:48:22.847

在这里您可以找到问题的描述以及解决该问题的代码片段：

[https://play.lighthouseapp.com/projects/57987/tickets/1553-functionaltestget-with-redirect-crashes](https://play.lighthouseapp.com/projects/57987/tickets/1553-functionaltestget-with-redirect-crashes)

# jquery - JQuery：点击时没有获得按钮ID

> ID：10732505
> 
> 赞同：0
> 
> 时间：2012-05-24T06:48:37.560
> 
> 标签：jquery

我在 jquery click 事件中遇到问题。实际上我在表中附加了一些**tr**。我的代码如下。

***HTML 代码：***

```
 <table id="tblList">
            <thead>
                <tr><th>Country Name</th>
                    <th>CityName</th></tr>
            </thead>
            <tbody></tbody>
        </table> 
```

***查询代码：***

`var rowsCount = $("#tblList tbody").find("tr").length; var table = "<tr><td>" + countryName + "</td><td>" + cityName + "</td></tr><tr><td colspan='2'><div id='divGridRow'><input type='button' value='add Zip Code' id='btn" + rowsCount + "' class='gridButton'/></div></td></tr>"; $('#tblList').append(table);`

上面的代码工作正常。现在我想在单击我的**addZipCode**按钮时显示对话框。

我在下面写了获取按钮ID的代码。

```
 $("#tblList tbody").bind('click', function() {
    $(this).find("tr").bind('click', function() {
        $(this).find("input").bind('click', function() {
            console.log($(this).attr("id"));
        });
    });
}); 
```

但仍然无法成功获得 100% 的按钮 ID。在上面的代码中，我还面临一个问题。如果我第一次单击按钮，**console.log**中没有显示值，当第三次单击时，只有一次 BUTTON ID 显示**btn0**，当我单击第四次时，按钮 ID 显示三次 **btn0 btn0 btn0** ，当我单击时第五次，然后按钮 id 显示 6 次这样 **的赎罪 btn0 btn0 btn0 btn0 btn0 btn0**

我在表中附加了多行，并且行中的每个按钮都有一个唯一的 id，如 btn0、btn1、btn2 ......简单我想尝试在点击时获取按钮 id。

请帮我找到解决方案。提前致谢。

请在 jsfilddle [http://jsfiddle.net/umairnoor84/y25LW/中检查你自己](http://jsfiddle.net/umairnoor84/y25LW/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:54:35.263

仅在按钮（具有 class 的元素）上绑定单击处理程序`gridButton`。
尝试这个：

```
$('#tblList .gridButton').click(function() {
    console.log($(this).attr("id"));
}); 
```

=== 更新 ===

您应该将该行不附加到`table`，将其附加到`tbody`该表的：
替换

```
$('#tblList').append(table); 
```

和

```
$('#tblList tbody').append(table); 
```

=== 更新 ===

因为行将被动态添加，您必须将代码更改为：

jQuery 1.7（[这里是一个 jsfiddle](http://jsfiddle.net/y25LW/5/)）：

```
$('body').on('click', '#tblList .gridButton', function() {
    console.log($(this).attr("id"));
}); 
```

在 jQuery 1.7 之前（[这里是一个 jsfiddle](http://jsfiddle.net/y25LW/1/)）：

```
$('#tblList .gridButton').live('click', function() {
    console.log($(this).attr("id"));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:57:06.930

第一次单击 tbody 时，它会将处理程序附加到 tr 的单击事件。然后，如果您单击 tr，它会附加一个处理程序来单击事件以进行输入。你点击它们的次数越多，hander 被附加的次数就越多。因此，如果您只想打印输入 id：

```
$("#tblList input").bind('click', function() {
    console.log($(this).attr("id"));
}); 
```

编辑：

```
$("#tblList input").live('click', function() {
    console.log($(this).attr("id"));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:06:07.583

下次，请做一个jsfiddle。它使人们更容易提供帮助。

您的问题是您将单击事件绑定在单击**事件**中，这将导致每次单击时都发生级联的单击绑定。只需在按钮上绑定“click”事件即可。

这是一个例子：http: [//jsfiddle.net/cpMGQ/](http://jsfiddle.net/cpMGQ/)

**编辑：**这是你想要做的：http: [//jsfiddle.net/cpMGQ/1/](http://jsfiddle.net/cpMGQ/1/)

```
function addRow(country, city, rowCount) {
    var table = "<tr><td>" + country+ "</td><td>"
        + city + "</td></tr>" 
        + "<tr><td colspan='2'><div id='divGridRow'><input type='button' value='add Zip Code' id='btn" 
        + rowCount + "' class='gridButton'/></div></td></tr>";

    $('#tblList').append(table);

    $('#btn' + rowCount).click(function () {
        console.log($(this).attr("id"));    
    });
}

addRow("country 1", "city 1", 1);
addRow("country 2", "city 2", 2); 
```

# mysql - 获取所有 userid 朋友给出意想不到的结果

> ID：10732507
> 
> 赞同：1
> 
> 时间：2012-05-24T06:48:55.220
> 
> 标签：mysql, sql

让我们说：

```
table users(id, name, ..)
table friends(uid, fid) 
```

我怎样才能得到一些 33456 用户 id 的朋友？

```
 SELECT fid idd, name
    FROM users, 
         friends 
WHERE uid = 33456
    AND fid = id 
```

但会给我意想不到的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:56:42.830

```
SELECT  id, fid, name
FROM users,friends where users.id=friends.fid
WHERE users.id = 33456 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:02:47.540

```
SELECT u.name,u.id 
FROM users u 
WHERE u.id IN 
(
SELECT f.fid 
FROM users u INNER JOIN friends f ON u.id = f.fid 
WHERE f.uid = 33456 
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:56:19.597

这将返回所有带有您朋友姓名的 ID。

```
SELECT b.fid, c.name
FROM users a INNER JOIN friends b ON a.id = b.uid
     INNER JOIN users c on b.fid = c.id
WHERE a.id = 33456 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T06:54:10.320

```
SELECT  id, fid, name
FROM users
INNER JOIN friends ON users.id=friends.fid
WHERE users.id = 33456 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T06:54:48.400

```
select id,name from users where id in (select fid from friends where uid=33465) 
```

# c# - 如何删除整个文件夹/目录？

> ID：10732510
> 
> 赞同：0
> 
> 时间：2012-05-24T06:49:03.817
> 
> 标签：c#, file, directory, delete-file

我想删除整个文件夹或目录以及其中包含的文件和文件夹。如何在 C# 中实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T06:52:25.243

尝试使用

```
Directory.Delete(dir_path, true); 
```

检查[手册](http://msdn.microsoft.com/en-us/library/fxeahc5f.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:53:10.490

由于它是 c# 标签，因此我假设该目录位于服务器端。请参阅此链接

[如何删除目录中的所有文件和文件夹？](https://stackoverflow.com/questions/1288718/how-to-delete-all-files-and-folders-in-a-directory)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T06:54:31.910

```
var dInfo = new DirectoryInfo("your_path_to_dir");
dInfo.Delete(true); 
```

Delete 方法中的 true 参数是 Recursive = true。这告诉方法删除当前文件夹及其中的所有内容。文件和文件夹。

# php - “简单”使用 array_multisort 或原生 PHP 函数而不是我自己的 foreach 循环对嵌套数组进行排序

> ID：10732513
> 
> 赞同：0
> 
> 时间：2012-05-24T06:49:21.883
> 
> 标签：php, function, sorting, multidimensional-array

我有以下一周中的几天数组，每一天都有一天中的几个小时（整个数组代表兼职员工的日程安排）：

```
Array
    (
        [7] => Array
            (
                [0] => 15
                [1] => 14
                [2] => 13
                [3] => 11
                [4] => 12
                [5] => 10
            )

        [1] => Array
            (
                [0] => 10
                [1] => 13
                [2] => 12
            )

        [6] => Array
            (
                [0] => 14
            )

        [3] => Array
            (
                [0] => 4
                [1] => 5
                [2] => 6
            )

    ) 
```

我只需要：

1.  按每个子数组排序（第二维） - 无需维护数字键，值是整数
2.  按第一维排序并维护数字、整数键

IE：

```
Array
    (
        [1] => Array
            (
                [0] => 10
                [1] => 12
                [2] => 13
            )

        [3] => Array
            (
                [0] => 4
                [1] => 5
                [2] => 6
            )

        [6] => Array
            (
                [0] => 14
            )

        [7] => Array
            (
                [0] => 10
                [1] => 11
                [2] => 12
                [3] => 13
                [4] => 14
                [5] => 15
            )

    ) 
```

附加信息：

1.  只有第一维的键和第二维的值（当然还有它们的关联）对我的用例有意义
2.  第一个维度最多可以有 7 个值，范围从 1-7（一周中的几天），并且至少有 1 个值（1 天）
3.  第 2 个维度最多可以有 24 个值，范围从 0-23（每天的小时数），并且至少有 1 个值（每天 1 小时）

我知道我可以`foreach`对整个`ksort`ed 数组和`sort`每个二维数组执行此操作：

```
ksort($sched);
foreach ($sched as &$array) sort($array);
unset($array); 
```

但我希望我可以用原生 php 数组函数来实现这一点。

我的搜索让我尝试`array_multisort(array_values($array), array_keys($array), $array)`，但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T09:31:36.270

归根结底，您确实有两个分类任务要完成。第一个是按键对外部数组进行排序。第二种是按值对内部数组进行排序。两种排序都是相互独立的。

最好的解决方案是您已经找到的解决方案。array_multisort() 对您没有帮助，因为这是为实际上相互依赖的排序而设计*的*，例如“按姓氏排序 - 如果相等，则按名字排序”。但它确实应该避免，因为定义排序函数并使用`usort()`和朋友更好地传达你实际排序的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T07:25:33.893

尝试以下行

```
array_multisort(array_values($array), array_keys($array), ksort($array)) 
```

这可能会引发警告，但如果它确实解决了问题，您可以通过**error_reporting(0)避免它。**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T07:02:42.220

这是我们能做的最好的：

```
ksort($arr);
foreach ($arr as $k => $v)
  array_multisort($arr[$k]); 
```

# ruby - 像素化图像的一部分以隐藏信息

> ID：10732515
> 
> 赞同：0
> 
> 时间：2012-05-24T06:49:37.473
> 
> 标签：ruby, imagemagick

我的应用程序用户能够上传照片。有时，我希望他们隐藏图片的一些信息，例如车辆的牌照或发票的个人地址。

为了满足这一需求，我计划对图像的一部分进行像素化。给定要隐藏的区域的坐标和区域的大小，如何以这种方式对图像进行像素化。

我发现了如何像素化（通过缩小和放大图像），但我怎样才能只定位图像的一个区域？

该区域由两对坐标 (x1, y1, x2, y2) 或一对坐标和尺寸 (x, y, width, height) 指定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:09:53.027

I am at work at the moment so can not test any code. I would see if you could work with -region or else use a mask. Copy the image and pixelate the whole image create a mask of the area required, cut a hole in the original image with the mask and overlay it over the pixelated image.

![Example of masking an image](../Images/1b0bf39cade8b1e375995dff9358c8aa.png)

You could modify this code ( quite old and could probably be improved on ):

```
// Get the image size to creat the mask 
// This can be done within Imagemagick but as we are using php this is simple. 
$size = getimagesize("$input14"); 

// Create a mask with a round hole  
$cmd = " -size {$size[0]}x{$size[1]} xc:none -fill black ". 
" -draw \"circle 120,220 120,140\" ";  
exec("convert $cmd mask.png");  

// Cut out the hole in the top image  
$cmd = " -compose Dst_Out mask.png -gravity south $input14 -matte ";  
exec("composite $cmd result_dst_out1.png");  

// Composite the top image over the bottom image  
$cmd = " $input20 result_dst_out1.png -geometry +60-20 -composite ";  
exec("convert $cmd output_temp.jpg");  

// Crop excess from the image where the bottom image is larger than the top 
$cmd = " output_temp.jpg -crop 400x280+60+0 "; 
exec("convert $cmd composite_sunflower_hard.jpg ");  

// Delete tempory images 
unlink("mask.png");  
unlink("result_dst_out1.png");  
unlink("output_temp.jpg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:06:47.917

谢谢你的回答，邦佐。

`convert`我找到了一种使用 ImageMagick命令实现我想要的方法。这是一个 3 个步骤的过程：

1.  我创建了整个源图像的像素化版本。
2.  然后我使用填充黑色（带有`gamma 0`）的原始图像（以保持相同的大小）构建一个蒙版，然后在我想要不可读区域的地方绘制空白矩形。
3.  然后我在合成操作中合并三个图像（原始图像、像素化图像和蒙版）。

这是一个具有 2 个区域（a 和 b）像素化的示例。

```
转换 original.png -scale 10% -scale 1000% pixelated.png
转换 original.png -gamma 0 -fill white -draw "rectangle X1a, Y1a, X2a, Y2a" -draw "rectangle X1b, Y1b, X2b, Y2b" mask.png
转换 original.png pixelated.png mask.png -composite result.png

```

它就像一个魅力。现在我将使用 RMagick 来完成。

# c++ - 将 std::string 转换为 boost::posix_time::ptime

> ID：10732518
> 
> 赞同：3
> 
> 时间：2012-05-24T06:50:00.897
> 
> 标签：c++, boost

以下代码将 a 转换`std::string`为 a `boost::posix_time::ptime`。

在分析之后，我发现花在该函数上的大部分时间（大约 90%）都浪费在为`time_input_facet`. 我不得不承认我不完全理解下面的代码，特别是为什么`time_input_facet`必须在空闲内存上分配。

```
using boost::posix_time;

const ptime StringToPtime(const string &zeitstempel, const string &formatstring)
{
    stringstream ss;
    time_input_facet* input_facet = new time_input_facet();
    ss.imbue(locale(ss.getloc(), input_facet));
    input_facet->format(formatstring.c_str());

    ss.str(zeitstempel);
    ptime timestamp;

    ss >> timestamp;
    return timestamp;
} 
```

**你有什么办法摆脱分配吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:09:43.197

Make the input_facet static inside the function:

```
static time_input_facet *input_facet = new time_input_facet(); 
```

This will construct the facet only on the first function call and will reuse the facet. I believe that the facet allows multiple consequent calls on the same object.

Updated: you also don't need to construct both the stringstream and locale. Just do it once either in a separate function or here in the static initialization, and use the stream consequently.

Updated2:

```
const ptime StringToPtime(const string &zeitstempel, const string &formatstring)
{
  static stringstream ss;
  static time_input_facet *input_facet = NULL;
  if (!input_facet)
  {
    input_facet = new time_input_facet(1);
    ss.imbue(locale(locale(), input_facet));
  }

  input_facet->format(formatstring.c_str());

  ss.str(zeitstempel);
  ptime timestamp;

  ss >> timestamp;
  ss.clear();
  return timestamp;
} 
```

# java - 3Sum的两种相似算法之间的区别？

> ID：10732522
> 
> 赞同：4
> 
> 时间：2012-05-24T06:50:22.773
> 
> 标签：java, algorithm

[我在http://www.leetcode.com/onlinejudge](http://www.leetcode.com/onlinejudge)上发现了 3Sum 问题，如下所示：

给定一个包含 n 个整数的数组 S，S 中是否存在满足 a + b + c = 0 的元素 a、b、c？在数组中找到所有唯一的三元组，其总和为零。

注意：三元组 (a,b,c) 中的元素必须按非降序排列。（即 a ≤ b ≤ c） 解集不得包含重复的三元组。

```
For example, given array S = {-1 0 1 2 -1 -4},

A solution set is:
(-1, 0, 1)
(-1, -1, 2) 
```

我浏览了该站点并找到了建议的解决方案：

```
public ArrayList<ArrayList<Integer>> threeSum(int[] num) {
    Arrays.sort(num);
    HashSet<ArrayList<Integer>> lstSoln = new HashSet<ArrayList<Integer>>();

    ArrayList<Integer> tempArr = null;
    for (int i = 0; i < num.length; i++) {
        int j = i + 1;
        int k = num.length - 1;
        while (j < k) {
            int sum3 = num[i] + num[j] + num[k];
            if (sum3 < 0) {
                j++;
            } else if (sum3 > 0) {
                k--;
            } else {
                tempArr = new ArrayList<Integer>();
                Collections.addAll(tempArr, num[i], num[j], num[k]);
                lstSoln.add(tempArr);
                j++;
                k--;
            }
        }
    }

    return new ArrayList<ArrayList<Integer>>(lstSoln);
} 
```

正如你所看到的，这需要每个数字，然后在当前索引后面跟着两个数字。所以，很明显，一旦达到第一个正数，我们只是在做无用的循环，我们不会找到任何加到 0 的三元组。所以我修改了解决方案并在之后添加了一个条件`for`

```
if (num[i] > 0)
    break; 
```

实际上，这应该会减少 for 循环运行的次数，从而减少找到解决方案所需的时间。我什至通过添加一个计数器并在每个`if()`. 每次`COUNTER`我的解决方案都小于建议解决方案的计数器。

但是，当我在检查页面输入修改后的解决方案时，它要么导致超时错误，要么显示所用时间超过未修改版本！我想知道我的修改有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:37:37.663

我没有发现您的解决方案有任何问题，我尝试了本地解决方案和添加了条件运行更快的解决方案。我使用 System.nanotime() 检查了时差。由于网络问题，您可能会在解决方案检查页面上遇到超时错误。

# iphone - 按 id 对获取请求中的实体进行排序

> ID：10732525
> 
> 赞同：0
> 
> 时间：2012-05-24T06:50:30.793
> 
> 标签：iphone, ios, core-data

我有一个名为`Store`. 在这我有诸如之类的属性`name, location, phone`。我想像您在 SQL 中那样对 ID 上的商店进行排序，但这可能吗？通常，框架会为您添加一个自动 ID。如果 Core Data 这样做，我如何获得该值，并且是否可以对该值进行排序？我是否需要在模型中添加一个字段并自己处理，这是我不想要的。

我看到了一些关于使用日期字段并让它有一个默认值“现在”的东西，你是这样做的吗？在那种情况下，您是否添加默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:04:25.260

按 id（或主键）排序是不受支持的方案。请参阅[CoreData：如何按主键对 NSManagedObject 进行排序？](https://stackoverflow.com/questions/3120136/coredata-how-to-sort-nsmanagedobject-by-its-primary-key)对于类似的重复线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:11:14.003

您似乎希望将 id 作为创建日期的代理。我建议您在创建新的托管对象实例时添加`timestamp`类型属性`NSDate`并将其初始化。`[NSDate date]`然后，您只需按此排序。

```
newStore.timestamp = [NSDate date]; 
```

和

```
[NSSortDescriptor sortDescriptorWithKey:@"timestamp" ascending:YES]; 
```

顺便说一句，这是旧 Apple 项目模板的默认实现。

# java - java - 如何在没有密码的情况下从java程序运行sudo命令？

> ID：10732526
> 
> 赞同：0
> 
> 时间：2012-05-24T06:50:30.900
> 
> 标签：java, linux, ubuntu

> **可能重复：**
> [使用 java 执行带有“sudo”的 linux shell 命令，而无需输入所需的密码](https://stackoverflow.com/questions/5168755/execute-a-linux-shell-command-with-sudo-using-java-without-entering-the-requi)

我想通过java程序在linux上执行sudo命令，但它要求输入密码。但我想在没有密码的情况下运行 prog，请告诉我。我的编是

```
public class JavaCommandProg {
    public static void main(String args[]) throws IOException, InterruptedException {
        String command="sudo cat /etc/sudoers";
        Process myProcess =null;
        try {
            Runtime runtime=Runtime.getRuntime();
            File file=new File("/home/users/admin/temp");
            myProcess = runtime.exec(command,null,file);
            myProcess.waitFor();
            InputStreamReader myIStreamReader = new InputStreamReader(myProcess.getInputStream());
            BufferedReader br=new BufferedReader(myIStreamReader);
            String line;
            while((line=br.readLine())!=null){
                System.out.println(line);
            }
        } catch (IOException anIOException) {
            System.out.println(anIOException);
        }
    }
}

Compling like: javac JavaCommandProg.java
and          : java JavaCommandProg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:16:04.737

使用 sudo 授予用户权限。看看这里：[http ://www.ducea.com/2006/06/18/linux-tips-password-usage-in-sudo-passwd-nopasswd/](http://www.ducea.com/2006/06/18/linux-tips-password-usage-in-sudo-passwd-nopasswd/)

例如：

```
/etc/sudoers
admin    ALL = NOPASSWD: ALL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:20:39.167

If you can get it to run that would mean a security flaw.

Said so...

1.  Grant your user permissions (become sudoer)
2.  Invoke your java program with sudo

    $ sudo java JavaCommandProg

This will prompt you for introducing sudo password when running jvm and then you can invoke sudo from inside your Java program.

# php - 在聊天窗口中检测用户响应

> ID：10732529
> 
> 赞同：-3
> 
> 时间：2012-05-24T06:50:57.730
> 
> 标签：php, javascript, jquery

我正在使用 programO（我是 php 新手）制作一个采访聊天机器人，如果很长时间没有聊天窗口上的活动，我想在其中显示一条消息。我已经搜索了 jquery 插件，但它们用于检测鼠标或键盘敲击，但我只是关心检测聊天窗口是否更新了用户输入。我还搜索了 javascript settimeout 和 settimeinterval 函数来显示消息，但我无法理解如何将它们与聊天窗口表单一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:18:52.407

setTimeout 需要与 clearTimeout 结合使用。每当发生时间重置事件时使用 clearTimeout。

例子：

```
<script>
    var interval = -1;
    var TIMEOUT = 5; // seconds
    function doTimeout(){
        alert('show timeout message');
        startClock(); // if you want to restart the timer
    }
    function startClock(event){
        console.log("foo",interval, event);
        if(interval !== -1){
            console.log("clearing timeout");
            clearTimeout(interval);
        }
        interval = setTimeout(doTimeout,TIMEOUT*1000);
    }
    startClock(); // if you want to start the timer on arrival
</script>

<!-- add remove events as you see fit -->
<textarea id="chatinput" onblur="startClock(event)" onfocus="startClock(event)" onchange="startClock(event)" onkeyup="startClock(event)"></textarea> 
```

有关超时的更多信息：
标签：[settimeout](/questions/tagged/settimeout "显示标记为“settimeout”的问题") [setinterval](/questions/tagged/setinterval "显示标记为“setinterval”的问题")
问题：[javascript setTimeout clearTimeout](https://stackoverflow.com/questions/3015319/jquery-javascript-settimeout-cleartimeout)

# c# - 在文本框中正确输入后启用按钮

> ID：10732532
> 
> 赞同：0
> 
> 时间：2012-05-24T06:51:28.730
> 
> 标签：c#, wpf, mvvm

在我看来，根据在文本框中输入的正确值，我在**它旁边**`Textbox`有一个和一个附加到可以或不能执行（使按钮启用或禁用）的一个。`Button` **`Command`**

 **一切正常，除了用户输入正确的值并按下 TAB 后，焦点不会移动到指定的按钮，而是移动到它之后的控件，尽管该按钮已正确启用。

换句话说，在按下 TAB 以启用按钮并获得焦点后，UI 不够快。相反，该按钮已启用，但在焦点已移动到另一个控件之后。

绑定是并且我希望拥有这样的绑定，因为对于用户输入的每个字符，很多事情都碰巧`UpdateSourceTrigger`拥有它。`TextBox``LostFocus``PropertyChanged`

有什么建议么？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:55:31.320

Seems to me you have a couple of options:

1.  Use `UpdateSourceTrigger=Explicit` instead of `LostFocus` and attach your own `LostFocus` handler that both updates the binding and also sets focus on your button if relevant.
2.  Attach your own `LostFocus` handler that checks whether the text is valid and, if so, sets focus back on the button.

In both cases, you may need to perform the set focus in a separate dispatcher message:

```
private void OnLostFocus(...)
{
    if (textIsValid)
    {
        this.Dispatcher.BeginInvoke((Action)() => button.Focus());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:44:21.120

最后，我找到了一个解决方案，而不会过多地破坏我使用的 MVVM 模式（指的是具有特定名称的特定控件）。

我所做的是设置`UpdateSourceTrigger`为`PropertyChanged`而不是`LostFocus`. 问题`PropertyChanged`是我`ValueConverter`的不再运行了。因此，尽管按钮现在可以正确启用或禁用，并且准时准备好接收焦点，但我的文本框中显示的值并不正确。

我通过收听文本框的`LostFocus`事件解决了这个问题，并且现在正确地使用`BindingExpression.UpdateTarget()`了我的显示。`TextBox.Text`

这里是：

```
<TextBox
    Text="{Binding Path=SpecialText, Converter={StaticResource myConverter}, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"
    LostFocus="TextBox_LostFocus">
</TextBox>

private void TextBox_LostFocus(object sender, RoutedEventArgs e)
{
    (sender as TextBox).GetBindingExpression(TextBox.TextProperty).UpdateTarget();
} 
```**

# javascript - 关闭打开的切换 div

> ID：10732533
> 
> 赞同：0
> 
> 时间：2012-05-24T06:51:35.017
> 
> 标签：javascript, jquery, html, toggle

当您从菜单中单击另一个元素时，如何添加将关闭活动 div 的功能。

这是代码：

[http://jsfiddle.net/t4JAT/](http://jsfiddle.net/t4JAT/)

**jQuery代码**

```
$(document).ready(function(){

        $(".slidingDiv1").hide();
        $(".show_hide1").show();

    $('.show_hide1').click(function(){
    $(".slidingDiv1").slideToggle();
    });

});
 $(document).ready(function(){

        $(".slidingDiv2").hide();
        $(".show_hide2").show();

    $('.show_hide2').click(function(){
    $(".slidingDiv2").slideToggle();
    });

});
 $(document).ready(function(){

        $(".slidingDiv3").hide();
        $(".show_hide3").show();

    $('.show_hide3').click(function(){
    $(".slidingDiv3").slideToggle();
    });

});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:59:56.963

根据您提供的内容您可以添加

```
 $('div[class^=slidingDiv]').hide(); 
```

上面这行所做的就是选择所有`divs`以`class name`开头的`slidingDiv`并隐藏它们，在这种情况下它们是 Content div。

在每个`click`事件处理程序中首先关闭所有 div，这必然会隐藏当前打开的任何内容 div。

一件事，你可以把你所有的代码塞进一个`document ready`像

```
 $(function(){
    //all your code goes here
 }) 
```

检查它是否工作检查`Lorem1`in `div1`，`Lorem2`in`div2`和`Lorem3`in `div23`。更改为验证。

[工作小提琴](http://jsfiddle.net/joycse06/t4JAT/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:58:14.263

**工作演示** [http://jsfiddle.net/t4JAT/4/](http://jsfiddle.net/t4JAT/4/)

请避免太多的文档准备调用，您只需要在您的页面中调用一个。

下面的休息应该会有所帮助。

**代码**

```
$(document).ready(function(){

        $(".slidingDiv1,.slidingDiv2, .slidingDiv3").hide();
        $(".show_hide1,.show_hide2, .show_hide3").show();

    $('.show_hide1').click(function(){
        $(".slidingDiv2,.slidingDiv3").hide();
         $(".slidingDiv1").slideToggle();
    });

    $('.show_hide2').click(function(){
        $(".slidingDiv1,.slidingDiv3").hide();
        $(".slidingDiv2").slideToggle();
    });

    $('.show_hide3').click(function(){
        $(".slidingDiv1,.slidingDiv2").hide();
         $(".slidingDiv3").slideToggle();
    });

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T06:55:19.413

您可以像这样在 jquery 中使用选项卡：

**对于 jqueryui 的这个导入 css 和 js 文件，然后使用这个：**

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
</ul>
<div id="tabs-1">
    <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
</div>
<div id="tabs-2">
    <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
</div>
<div id="tabs-3">
    <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
    <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
</div>
</div>

<script>
$(function() {
    $( "#tabs" ).tabs();
});
</script> 
```

# xcode - 如何找到 Session 311 的示例 - 使用仪器进行高级内存分析

> ID：10732536
> 
> 赞同：0
> 
> 时间：2012-05-24T06:51:48.403
> 
> 标签：xcode

我下载了 wwdc10samplecode.dmg，但我找不到关于 Session 311 示例的“面包屑”。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:17:34.857

它就在这里 [https://developer.apple.com/videos/wwdc/2010/](https://developer.apple.com/videos/wwdc/2010/)

# c# - 独立的 .NET 应用程序

> ID：10732538
> 
> 赞同：0
> 
> 时间：2012-05-24T06:51:58.903
> 
> 标签：c#, .net

我想使用触发器和过程使用数据库制作一个 Windows 独立应用程序。我想在多台机器上安装它，所以我是否可以只制作一个安装程序并在另一台机器上运行它，所有数据库配置都是使用安装程序完成的。是否可以在另一台电脑上运行应用程序而无需在其上预先安装 .net 框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:58:30.770

要运行 .Net 应用程序，您需要安装 .Net Framework（和正确版本）。

标准做法是编写一个安装程序来安装 .Net Framework、数据库（无人值守安装）和您的应用程序。确保安装程序可以在普通机器上运行，并且在其他 PC 上安装应用程序应该没有任何问题。

**编辑：**

当你去部署你的应用程序时，你需要创建一个安装程序。Visual Studio 有几个选项（开箱即用），它们可能是最容易创建 MSI 的。我会通过一个简单的 MSI 推荐您的第一个安装程序。

在 Visual Studio 中打开您的解决方案，单击文件 > 添加 > 新项目 > 其他项目类型 > 安装和部署 > Visual Studio 安装程序 > 安装项目并阅读 [如何使用 Visual Studio .NET 创建安装包](http://support.microsoft.com/kb/307353)。

毫无疑问，您会有更多关于此的问题，大多数问题都可以通过谷歌搜索来回答，这里有一篇很棒的文章，其中包含许多为新玩家制作安装程序的提示：http: [//social.msdn.microsoft.com/Forums/ zh/winformssetup/thread/717cfce0-3061-400f-9ea3-069f73f3a473](http://social.msdn.microsoft.com/Forums/zh/winformssetup/thread/717cfce0-3061-400f-9ea3-069f73f3a473)

这个基本的 Microsoft 安装程序将涵盖 99% 的您想要做的事情，我鼓励您阅读[ClickOnce](http://msdn.microsoft.com/en-us/library/wh45kb66(v=vs.90).aspx)。对于复杂的安装（例如无人值守的 dB 安装），我使用 NSIS 并使用 HW Edit 中的向导来启动脚本。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:22:46.297

[WIX](http://wix.sourceforge.net/)是一个优秀的基于 XML 的安装程序。它有一些用于执行 SQL 脚本和安装 .net 依赖项的出色工具。教程可以在[这里](http://wix.tramontana.co.hu/)找到。[这里](http://wix.tramontana.co.hu/tutorial/sql/creating-a-database)有 SQL 脚本。

你甚至可以直接从 WIX 中调用 SQL。这允许您将用户驱动的 UI 属性写入数据库：

```
<util:User Id='SQLUser' Name='[SQLUSER]' Password='[SQLPASSWORD]' />

<Component Id='SqlComponent' Guid='YOUR_GUID_HERE' KeyPath='yes'>
        <sql:SqlDatabase Id='SqlDatabase' Database='DatabaseName' User='SQLUser' Server='[SQLSERVER]' CreateOnInstall='yes' DropOnUninstall='no' ContinueOnError='no'>
           <sql:SqlScript Id='CreateDatabaseTables' BinaryKey='CreateDatabaseTables' ExecuteOnInstall='yes' />
           <sql:SqlString Id="AddEntryToTableA" ExecuteOnInstall ="yes" ContinueOnError="no" Sequence="1" SQL="INSERT TableA VALUES (N'[PROPERTY1]', N'[PROPERTY2]', N'[PROPERTY3]')" />
        </sql:SqlDatabase>
</Component> 
```

# jquery - Jquery carousel where prevoius and next button inside the each carousel slide

> ID：10732539
> 
> 赞同：0
> 
> 时间：2012-05-24T06:51:59.057
> 
> 标签：jquery, carousel

一个 jquery 轮播，其中 prev 按钮和 next 按钮在轮播中。

通常轮播左侧有上一个按钮，右侧有下一个按钮

是否有任何 jquery carousel，其中 prev 和 next 按钮在 carousel 内容内？

我一次需要一张幻灯片，每张幻灯片都需要该幻灯片内容中的上一个和下一个按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:09:28.373

Nivo slider. Check out the demo.. [http://nivo.dev7studios.com/demos/](http://nivo.dev7studios.com/demos/)

You want to set "directionNav : true" per [http://nivo.dev7studios.com/support/jquery-plugin-usage/](http://nivo.dev7studios.com/support/jquery-plugin-usage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:01:03.683

您不能只使用 CSS 将`prev`和`next`按钮定位在幻灯片内吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:17:03.203

使用 jquery 循环，您也可以轻松地做到这一点，并且有两种方法。

插件下载：http: [//jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

**演示 1：**

为每张幻灯片添加上一个和下一个按钮。下一个和上一个按钮将与幻灯片一起制作动画，因为它们位于幻灯片内部。您想要这样做的唯一原因是如果您想使用幻灯片为这些按钮设置动画。通常情况并非如此（参见示例 2）

[http://jsfiddle.net/lucuma/anwvL/1/](http://jsfiddle.net/lucuma/anwvL/1/)

html 将是这样的：

```
<div id="slideshow">

<div>
    <a href="#" class="prev">prev</a><a href="#" class="next">next</a>
    <img src="http://weblogs.marylandweather.com/4526619322_1912218db8.jpg" />
</div>
<div>
    <a href="#" class="prev">prev</a><a href="#" class="next">next</a>
    <img src="http://www.silverstar-academy.com/Blog/wp-content/uploads/2012/03/03-14-12N00184967.jpg" /></div>
<div>
      <a href="#" class="prev">prev</a><a href="#" class="next">next</a>
        <img src="http://cdn.the2012scenario.com/wp-content/uploads/2011/11/sunspot-500x500.jpg" /></div>

</div> 
```

JS：

```
$('#slideshow').cycle({
    fx: 'scrollHorz',
    prev: $('.prev'),
    next: $('.next')
});​ 
```

**演示 2**

我们将下一个/上一个按钮放置在幻灯片的顶部，但不在幻灯片内部。您会注意到上一个/下一个按钮不会与幻灯片一起动画，而是在幻灯片之上。这通常是您在大多数幻灯片中看到的（作为文本或箭头）

[http://jsfiddle.net/lucuma/hXxtJ/1/](http://jsfiddle.net/lucuma/hXxtJ/1/)

```
<div id="sliders">
    <div class="controller">
       <a href="#" class="prev">prev</a><a href="#" class="next">next</a>
    </div>
    <div id="slideshow">

        <div>
            <img src="http://weblogs.marylandweather.com/4526619322_1912218db8.jpg" />
        </div>
        <div>
            <img src="http://www.silverstar-academy.com/Blog/wp-content/uploads/2012/03/03-14-12N00184967.jpg" />
        </div>
         <div>
            <img src="http://cdn.the2012scenario.com/wp-content/uploads/2011/11/sunspot-500x500.jpg" />
        </div>
    </div>
</div>
​ 
```

JS：

```
$('#slideshow').cycle({
    fx: 'scrollHorz',
    prev: $('.prev'),
    next: $('.next')
});​ 
```

# jquery-mobile - Jquery mobile- 使用 jquery validate.js 进行多页模板验证

> ID：10732544
> 
> 赞同：4
> 
> 时间：2012-05-24T06:52:17.663
> 
> 标签：jquery-mobile, jquery-validate

单击下一个按钮时，对当前页面进行验证，单击提交时，对所有使用的页面进行验证

`var validator = $("#frmAddstore").data('validator');`

`validator.settings.ignore = "";`

现在我发现将焦点设置到隐藏页面的问题。如何浏览错误所在的页面？

我可以得到错误元素，如果它在当前页面中，那么我可以通过设置焦点`$(this).find(":input.error:first").focus()`。如果它的隐藏页面无法设置焦点以及我不知道要更改页面的 pageid 或划分。

但是我可以使用获取元素的 id`$(this).find(":input.error:first").attr("id")`有没有办法从元素 id 中获取 div id？

我创建了一个 jsfiddle 来显示这个问题。[jsfiddle.net/U4RPf/14](http://jsfiddle.net/U4RPf/14/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:01:07.730

获取错误页面

```
var idErrorPage = $(this).find(":input.error:first").parents("div:jqmData(role='page')").attr("id") 
```

切换到那个页面

```
$.mobile.changePage( "#" + idErrorPage ); 
```

我创建了一个 jsbin，它不使用 validate.js，但它应该向您展示您需要了解的内容[http://jsbin.com/awaluw/edit#html](http://jsbin.com/awaluw/edit#html)

完整的工作示例：http: [//jsfiddle.net/U4RPf/15](http://jsfiddle.net/U4RPf/15)

# google-chrome - 带热键的镀铬快速拨号

> ID：10732545
> 
> 赞同：2
> 
> 时间：2012-05-24T06:52:20.397
> 
> 标签：google-chrome, google-chrome-extension, hotkeys

我找不到任何带有热键的 Chrome 快速拨号插件，例如歌剧中的热键或 Firefox 的快速拨号。

在 Opera 中，我按 STRG + 1 并在当前选项卡中打开我的第一个快速拨号页面。在 Firefox 中，还有更多热键，例如 strg + shift + 1，用于在新选项卡中打开快速拨号的第一页。（STRG+2 用于第二页等）

有没有可能创建这样的快捷方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T00:25:10.677

是的，您可以使用[chrome.commands](https://developer.chrome.com/extensions/commands) API 在扩展程序中定义键盘快捷键。

# mysql - 使用 UNION ALL 时如何简化这个 MySQL 查询？

> ID：10732546
> 
> 赞同：1
> 
> 时间：2012-05-24T06:52:20.370
> 
> 标签：mysql, union

此查询有效.. 一次查询 50 个 mysql 数据库并返回最近的 10 个结果，但是.. 有没有办法不查询每个状态的整个数据库（我的示例中仅列出 4 个状态），只需获取顶部10（按timeStamp desc）并使此查询更有效率？

```
$query = "    
SELECT imgURLThumb, timeStamp, title2, state, postId, title
FROM (
  SELECT imgURLThumb,timeStamp, title2, state, postId, title FROM db_washington.md_postings UNION ALL 
  SELECT imgURLThumb,timeStamp, title2, state, postId, title FROM db_westvirginia.md_postings UNION ALL 
  SELECT imgURLThumb,timeStamp, title2, state, postId, title FROM db_wisconsin.md_postings UNION ALL 
  SELECT imgURLThumb,timeStamp, title2, state, postId, title FROM db_wyoming.md_postings 

) allposts where imgURLThumb <> 'images/nopicture.png' order by timeStamp DESC LIMIT 0 , 10"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:56:37.557

您应该重新设计您的数据库，以便所有的帖子都在一个数据库中，以使这个查询更容易编写。每个州都有一个数据库看起来是个糟糕的设计。相反，您应该有一个`md_postings`用于*所有*过帐的表，其中一个字段是`State`。

如果这是不可能的，那么我认为你有一个权衡：

*   简洁易读的 SQL 或
*   很棒的表演。

如果你想要更好的性能试试这个：

```
SELECT imgURLThumb, timeStamp, title2, state, postId, title
FROM (
    (SELECT imgURLThumb,timeStamp, title2, state, postId, title
    FROM db_washington.md_postings
    WHERE imgURLThumb <> 'images/nopicture.png'
    ORDER BY timeStamp DESC
    LIMIT 10)

    UNION ALL

    (SELECT imgURLThumb,timeStamp, title2, state, postId, title
    FROM db_westvirginia.md_postings
    WHERE imgURLThumb <> 'images/nopicture.png'
    ORDER BY timeStamp DESC
    LIMIT 10)

    UNION ALL

    (SELECT imgURLThumb,timeStamp, title2, state, postId, title
    FROM db_wisconsin.md_postings
    WHERE imgURLThumb <> 'images/nopicture.png'
    ORDER BY timeStamp DESC
    LIMIT 10)

    UNION ALL

    (SELECT imgURLThumb,timeStamp, title2, state, postId, title
    FROM db_wyoming.md_postings
    WHERE imgURLThumb <> 'images/nopicture.png'
    ORDER BY timeStamp DESC
    LIMIT 10)
) AS allposts
WHERE imgURLThumb <> 'images/nopicture.png'
ORDER BY timeStamp DESC LIMIT 10 
```

# perl - perl 将文件分成块或块

> ID：10732552
> 
> 赞同：-1
> 
> 时间：2012-05-24T06:52:43.810
> 
> 标签：perl

我有一个由几行组成的大文件。我需要根据大小将文件分成块（比如将 1 个文件分成 4 个部分），但我不需要将行分成 2 个部分（每行应该完全存在于一个块中），然后将这些块给每个要处理的线程和处理后我将再次重新组装所有块。主要是我想减少文件内容的处理时间（我在文件文本中做了一些替换）。

解决这个问题的最佳方法是什么？我想到的是根据大小到达块的结束字节，如果结束字符不是行尾，请继续阅读，直到我得到行尾并存储该部分。

任何建议或更好的算法都相同。感谢你的帮助。

编辑：

此外，整个内容都在一个变量中，我怎样才能到达变量中的某个字节？

编辑：根据用户的建议，使用适当的英语和问题陈述再进行一次编辑：

问题陈述：

我在 perl 中的变量（标量）中有一些数据（整个 html 页面内容）假设 $str，数据由几行组成（大约 1762899 行）我需要将标量中的数据分成更小的块（有一些来自原始的行）基于某种长度，如 $str1、$str2、$str3、$str4，如果我加入这些 var，我会得到完整的内容。

要求：

我需要上面的 strs，所以我可以把它们交给线程，在所有线程完成后，我将加入所有这些以取回全部内容。

我的理解：

我将使用 substr 将数据从 char 获取到 char 但我需要确保我在 substr 中获得的最后一个 char 是换行符。在这种情况下如何处理？

请需要解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:16:45.187

您可能希望使用此算法将源 HTML 拆分为多个相当相等的部分，并在行边界上拆分。

我仍然担心您可能无法使用这种任意拆分的数据进行处理，但如果您有问题，您必须再次询问。

```
use strict;
use warnings;

my $html;
$html .= $_ x 10 . "\n" for 'A' .. 'Z';

use constant PARTITIONS => 4;

my @start;
push @start, $-[0] while $html =~ /^/gm;
push @start, length $html;
my $n = @start;
my @parts = map $start[$_ * ($n-1) / PARTITIONS], 0 .. PARTITIONS;

for my $i (0 .. $#parts-1) {
  my ($start, $size) = ($parts[$i], $parts[$i+1] - $parts[$i]);
  print substr $html, $start, $size;
  print '-' x 10 . "\n";
} 
```

**输出**

```
AAAAAAAAAA
BBBBBBBBBB
CCCCCCCCCC
DDDDDDDDDD
EEEEEEEEEE
FFFFFFFFFF
----------
GGGGGGGGGG
HHHHHHHHHH
IIIIIIIIII
JJJJJJJJJJ
KKKKKKKKKK
LLLLLLLLLL
MMMMMMMMMM
----------
NNNNNNNNNN
OOOOOOOOOO
PPPPPPPPPP
QQQQQQQQQQ
RRRRRRRRRR
SSSSSSSSSS
----------
TTTTTTTTTT
UUUUUUUUUU
VVVVVVVVVV
WWWWWWWWWW
XXXXXXXXXX
YYYYYYYYYY
ZZZZZZZZZZ
---------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:50:33.117

一个天真的（但可能足够有效）的解决方案：

fork 4 个子进程，逐行读取输入文件并将每一行发送给一个子进程。告诉子进程将哪个文件名用于输出。

工作完成后，父进程可以再次聚合结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:09:45.447

你的问题对我来说不够清楚。还是一些建议。

您可以使用标准的 unix 工具，例如`split --lines=10000`.

如果你需要使用 perl，你可以拆分`while`，基于：

```
open(my $fh, "<", "input.txt")
                       or die "cannot open < input.txt: $!";
while ( <$fh> ) {
    # controll count of lines you need and open/close new FH if needed...
    print $nfh $_;
}
close($fh); 
```

关于您的编辑：您需要访问字节还是字符？你的问题是关于文本和字符串的，所以我假设你需要字符。然后你可以使用`substr`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T04:52:47.003

我试图想出一个代码来解决它。请在下面找到代码。

```
 #!/usr/bin/perl

    use strict;

    ### File contents to be broken in pieces ###
    open(FH, "<index.html");

    ### slurp whole file in scalar ###
    my $text = do { local $/; <FH> };

    ### Length of file ###
    my $length = length $text;
    print "length=$length\n";

    #### We will create 6 threads so divide it into 6 parts ###
    my $chunk_sz = int($length/6);
    print "chunk size=$chunk_sz\n";

    ### Lets have the chunks into some var and check the chunk end with proper new line char ###
    my $start = 0;
    my @res;

    for(my $i = 0; $i <= 5; $i++)
    {
        #print "start is : $start\n";
        my $chunk;
        my $var = 0;

        ### If it's last chunk, take all contents ###
        if($i == 5)
        {
            $chunk_sz = $length - $start;
            $chunk = substr($text, $start, $chunk_sz);
        }
        else
        {
            $chunk = substr($text, $start, $chunk_sz);
        }
        START:
        my $last_ch = chop($chunk);    ### If last char is not new line(\n) char find it and save the chunk ###

    while($last_ch !~ /\n/ && $i != 5)
    {
        $var += 1;
        $chunk = substr($text, $start, $chunk_sz+$var);
        goto START;
    }
    ### Start from the last chunk char + 1 ###
    $start += $chunk_sz+$var+1;
    $res[$i] = $chunk."\n";
}

## Further code to process the chunk in threads goes here ### 
```

有什么改进或更正的建议吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-16T14:04:06.917

这个答案可能对这个用户没有用，但我一直在寻找 perl 代码，它将一百万行文件分成多个文件，每个文件有 100K 行。在阅读了多篇文章和反复试验后，我得到了这个代码来分享。喜欢的请点赞！

```
#!/bin/perl -s
#
# $Header$
# $Log$
use File::Basename;
use File::stat;
use English;
use Time::Local;
use Data::Dumper;
use IO::Handle;
use Fcntl;                             # For O_RDWR, O_CREAT, etc.
use POSIX qw(strftime);
use bigint;
use strict;

$\ = "\n";    # set output record separator

print "Starting program ...";

#
#  Get the interface directory path
#
my $ScriptName = $0;
my $ScriptDirPath = `dirname $ScriptName`;
chop($ScriptDirPath);

my $LOAD_INP_FILE = $ScriptDirPath . "03g_loadInp.txt";
my $LOAD_CHUNK_FILE = $ScriptDirPath . "04g_loadInp_00000000.txt";

my $source = $LOAD_INP_FILE;
my $lines_per_file = 100000;

open (my $FH, "<$source") or die "Could not open source file. $!";
open (my $OUT, ">$LOAD_CHUNK_FILE") or die "Could not open destination fil
+e. $!";

#this is line counter
my $i = 0;

print "Creating new $LOAD_CHUNK_FILE ...";

my $line;
while ($line = <$FH> ) {
    chop $line;
    print $OUT $line;
    $i++;

    if ($i % $lines_per_file == 0) {
        close($OUT);
        my $FHNEW = sprintf("%08d", $i);
        my $LOAD_CHUNK_FILE_NEW = $ScriptDirPath . "04g_loadInp_${FHNEW}.txt";
        open ($OUT, ">$LOAD_CHUNK_FILE_NEW") or die "Could not open destinatio
+n file. $!";
        print "Creating new $LOAD_CHUNK_FILE_NEW ...";
    }
}

print "Ending program ...";
exit 0;

#
#  End of Main Program
# 
```

# ruby-on-rails - Heroku Cedar Stack - 机架缓存头文件

> ID：10732556
> 
> 赞同：8
> 
> 时间：2012-05-24T06:53:23.643
> 
> 标签：ruby-on-rails, caching, heroku, rack-cache

我这辈子都想不通。尝试使用 Rack::Cache 缓存我在 Heroku 上的一些静态公共页面，此外还进行动作缓存以防它通过反向代理。

例如，这是我的“home”操作中的代码：

```
class StaticPagesController < ApplicationController
  layout 'public'

  caches_action :about, :contact, ......, :home, .....

  ......

  def home
    last_modified = File.mtime("#{Rails.root}/app/views/static_pages/home.html.haml")
    fresh_when last_modified: last_modified , public: true, etag: last_modified
    expires_in 10.seconds, :public => true       
  end 
```

出于所有意图和目的，这应该有一个最大年龄为 10 的公共缓存控制标签，不是吗？

```
$ curl -I http://myapp-staging.herokuapp.com/

HTTP/1.1 200 OK
Cache-Control: max-age=0, private, must-revalidate
Content-Type: text/html; charset=utf-8
Date: Thu, 24 May 2012 06:50:45 GMT
Etag: "997dacac05aa4c73f5a6861c9f5a9db0"
Status: 200 OK
Vary: Accept-Encoding
X-Rack-Cache: stale, invalid
X-Request-Id: 078d86423f234da1ac41b418825618c2
X-Runtime: 0.005902
X-Ua-Compatible: IE=Edge,chrome=1
Connection: keep-alive 
```

我做错了什么可怕的事情吗？我觉得那个陈旧、无效的缓存响应有些问题……那是我第四次点击该页面。

配置信息：

```
# Use a different cache store in production
config.cache_store = :dalli_store

config.action_dispatch.rack_cache = {
  :verbose      => true,
  :metastore => "memcached://#{ENV['MEMCACHE_SERVERS']}",
  :entitystore => "memcached://#{ENV['MEMCACHE_SERVERS']}"#,
}

# OLD : Disable Rails's static asset server (Apache or nginx will already do this)
config.serve_static_assets = true
config.static_cache_control = "public, max-age=2592000" 
```

（也许有一种方法可以手动设置缓存控制标头？似乎应该有一种更简单的方法）。

**更新**

我什至尝试将控制器操作降至最低：

```
def home
  expires_in 10.seconds, :public => true
  #last_modified = File.mtime("#{Rails.root}/app/views/static_pages/home.html.haml")
  #fresh_when last_modified: last_modified , public: true, etag: last_modified
end 
```

而且它不起作用...

```
HTTP/1.1 200 OK
Server: nginx
Date: Thu, 24 May 2012 19:15:18 GMT
Content-Type: text/html; charset=utf-8
Connection: keep-alive
Status: 200 OK
X-Ua-Compatible: IE=Edge,chrome=1
Etag: "733798214c652f39ae79b4037e9111dc"
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: b33087fe0c2ae986c4cac88f14420b7c
X-Runtime: 0.006000
X-Rack-Cache: stale, invalid
Vary: Accept-Encoding
X-Varnish: 349105873
Age: 0
Via: 1.1 varnish 
```

！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:36:32.223

也许重新考虑整个事情，只使用rails缓存。新的 cache_digests gem 应该可以轻松地在 rails 级别做你想做的事： [https ://github.com/rails/cache_digests](https://github.com/rails/cache_digests)

我敢打赌，这将击败您的方法，包括执行文件系统调用以每 10 秒检查一次文件时间戳。

# java - jsp中文国际化问题

> ID：10732557
> 
> 赞同：0
> 
> 时间：2012-05-24T06:53:24.423
> 
> 标签：java, jsp, internationalization, struts2

我正在使用国际化的 struts2.0 应用程序工作，除了中文之外，它在其他语言中也可以正常工作。

当我将汉字放入 jsp 时，我在 Action 中没有得到相同的值。请帮助我。

我还使用了 UTF-8 pageEncoding

```
<%@page contentType="text/html" pageEncoding="UTF-8"%> 
```

我在jsp中有一个文本框，我在其中填充了一些汉字。

但是在服务器端的 Action 类中，当我尝试检索文本框的值时，我得到了垃圾字符。

我无法添加屏幕截图，因为我没有 10 个声望。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:04:16.270

`pageEncoding`在您的操作类中，在获取参数之前，将请求正文编码设置为与 JSP相同的编码。

```
request.setCharacterEncoding("UTF-8"); 
```

希望这可以帮助！

PS 上述解决方案仅适用于`POST`请求。

**编辑**：

获取`HttpServletRequest`您的操作类的调用方法：

```
HttpServletRequest request = ServletActionContext.getRequest(); 
```

然后`request`如上所述设置属性。

**编辑2**：

将此行添加到您的`JSP`：

```
<%@ page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%> 
```

并将其添加`filter`到您的`web.xml`：

```
<filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
      <filter-name>encodingFilter</filter-name>
      <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:02:23.517

`jsp`在您的页面中尝试以下操作

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T07:08:52.370

最近，当我在名称文本框中复制粘贴一个汉字时，我遇到了一个来自 jsp 的问题，当我试图在 Java DAO 层中获取它时，我得到了一些名称的垃圾值。使用下面的代码我已经解决了这个问题，我可以得到与 jsp 相同的中文值。

```
String name = new String(entityObj.getName().getBytes("iso-8859-1"), "UTF-8"); 
```

# sql - 内部连接中的 SQL 选择

> ID：10732563
> 
> 赞同：1
> 
> 时间：2012-05-24T06:54:13.310
> 
> 标签：sql, select, inner-join

我的问题是：如何在一个 sql 查询中获取不同的值？我正在尝试这个：

```
SELECT 
          q.id,
          q.question_title,
          SUM(op.option_value) AS total_votes,
          COUNT(op.option_value) AS number_votes,
          tab.comments 
FROM
          questions_options AS op 
          INNER JOIN questions AS q 
                    ON (q.id = op.q_id) 
          INNER JOIN 
                    (SELECT 
                              SUM(p.unseen) AS comments 
                    FROM
                              questions_options AS p) tab 
                    ON (q.id = tab.q_id) 
WHERE op.option_value > 0 
GROUP BY q.question_title 
```

如果我删除中间的“INNER JOIN”（即显示 ID、问题标题、总票数和票数......

但我也想显示看不见的评论，这是该表中的另一个字段，对看不见的（未读）评论取“1”...

那么我怎样才能通过放置看不见的评论编号来做到这一点......任何想法或建议......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:05:26.913

我认为心理法官是对的。

您应该在子查询中选择“q_id”字段，以便能够对“tab.q_id”进行内部连接。

**-解释-**

你的第一个`INNER JOIN`看起来像这样：

`SELECT * FROM questions_options AS op INNER JOIN questions AS q ON (q.id = op.q_id)`

..所以基本上你的两个表之间的关系（和连接）是基于 `questions.id`and `questions_options.q_id`。

好吧，对于您的子查询来说，情况也是如此。

在您的子查询中，您定义了一个 SELECT 语句 FROM "questions_options"，它只会返回您在 SELECT 之后放置的列/字段。

`(SELECT SUM(p.unseen) AS comments FROM questions_options AS p) tab`

为了能够使用子查询中的任何数据，您必须`SELECT`对该 `questions_options.q_id`字段并与`questions.id`主查询中已有的字段进行连接。

`(SELECT p.q_id, SUM(p.unseen) AS comments FROM questions_options AS p) tab INNER JOIN (...subquery...) ON (q.id = tab.q_id)`

所以`tab.q_id`指的是`p.q_id`您在子查询中选择的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:18:49.993

我不知道我是否正确，但我在这里找到了一些东西。
如果你一次又一次地阅读 OP 的查询，你会知道不需要第二次内连接。
你也可以把它自己`sum(p.unseen) as comments`放在第一位`select`，因为它也是`questions_options`根据 q.id = tab.q_id `, which by itself comes in the first inner join between`questions `and`questions_options` 从表格中询问的。
希望它可以帮助你。

# conditional - view.ctp 中的 CakePHP 2.1 条件语句

> ID：10732570
> 
> 赞同：0
> 
> 时间：2012-05-24T06:54:47.370
> 
> 标签：conditional, cakephp-2.1

谁能帮忙解决这个问题。出于某种或其他原因，`!empty()`in view.ctp 似乎不起作用。

我有 4 条记录，其中“职业”有文本，另外 2 条记录什么都没有。如果我`!empty()`如下使用它们都会消失，如果我使用`empty()`它们都会回来。我究竟做错了什么？

对你的帮助表示感谢。

```
<?php if (!empty($shoulderExamination['occupation'])):?>
    <dt><?php echo __('Occupation'); ?></dt>
    <dd>
        <?php echo h($shoulderExamination['ShoulderExamination']['occupation']); ?>
        &nbsp;
    </dd>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:47:11.387

尝试

`if (!empty($shoulderExamination['ShoulderExamination']['occupation']))`

代替

`if (!empty($shoulderExamination['occupation']))`

# java - 速度宏与指令

> ID：10732572
> 
> 赞同：1
> 
> 时间：2012-05-24T06:54:48.963
> 
> 标签：java, velocity

扩展 Velocity 语法时被认为是最佳实践。可用的两种机制是指令和宏。两者看起来同样强大。指令需要实际开发 Java 代码，而宏只是 Velocity 语法的片段。

指令的优点是因为它们是用 Java 编写的，所以您不必解析宏中包含的额外 Velocity 语法。它使 Velocity 的扩展更加正式，并阻止了许多不受控制的添加。

宏的优点是，我认为它非常灵活，并且允许大量重用，因为在应用程序开发过程中发现了常见模式。

因此，您在这方面的想法将是最受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:59:46.733

其实还有第三种方式。但首先...

指令用于对模板的一部分或对模板的一部分执行操作，或者用于需要了解周围模板的操作。例如，您可以创建一个指令，以某种方式转换它所包含的部分的输出。它们以全局、始终在线的方式提供这种功能性、以模板为中心的行为。

宏并非设计为函数。它们最适合用于重复内容或标记。它们的目的是防止您将任何您在 Java 代码中输出的任何标记语言（或诸如此类的东西），或一遍又一遍地重复 VTL 部分。

第三种方式称为“工具”。VelocityTools 项目中有许多您可以使用或用作示例的工具，更不用说用于真正轻松工具管理的支持代码。无论如何，工具主要用于访问或操作您的数据。不要创建进行数字格式化的指令或宏。使用工具。工具为在模板中难以使用的库和 API 提供了 VTL 友好的接口。它们可以以指令和宏永远无法实现的方式进行访问控制和限定。

这三个都非常有用，用于不同的事情。简而言之：

*   指令最适合操作 AST 或模板部分的输出
*   宏最适合不要重复自己或让标记潜入 Java 代码
*   工具最适合访问和操作模板中的数据

# asp.net - asp.net中的气泡图不起作用

> ID：10732574
> 
> 赞同：1
> 
> 时间：2012-05-24T06:55:00.757
> 
> 标签：asp.net, bubble-chart

我通过正式定义 x 和 y 轴列，使用简单的 sqldatsource 在 Asp.net 中开发了一个气泡图。现在问题是所有 vlaues 的气泡大小都相同。例如，100 的气泡大小与2000 年的气泡大小。请任何人告诉我是否存在任何属性或属性来根据值检查气泡的大小。我已经尝试了很多来找到这样的任何属性，但都是徒劳的。请帮助我

**更新**

```
 <asp:Chart ID="Chart1" runat="server" DataSourceID="SqlDataSource1" 
            Width="1115px" Height="556px" Compression="5">
            <Series>
                <asp:Series Name="Series1" XValueMember="Date" YValueMembers="Amount" 
                    ChartType="Bubble" YValuesPerPoint="2" IsValueShownAsLabel="True" 
                    IsXValueIndexed="True" MarkerSize="0" MarkerStyle="Circle" Palette="EarthTones">
                </asp:Series>
            </Series>
            <ChartAreas>
                <asp:ChartArea Name="ChartArea1" >
                </asp:ChartArea>
            </ChartAreas>
        </asp:Chart>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ConnectionStringSMLAPP %>" 
            ProviderName="<%$ ConnectionStrings:ConnectionStringSMLAPP.ProviderName %>" 
            SelectCommand="SELECT DISTINCT to_char(DS_DATE,'DD MON YYYY') &quot;Date&quot;, DS_AMT &quot;Amount&quot;FROM DIESEL where ds_amt &lt; 5000 and DS_DATE in('1-APR-2011','1-DEC-2011') order by 1">
        </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:14:15.460

由于您没有提供任何详细信息，您如何初始化系列很难给出具体答案，但通常图表系列具有`YValuesPerPoint`应设置为 2 和方法的属性，`series.Points.DataBindXY()`或者`series.Points.AddXY()`您可以提供多个 Y 值。提供的第一个 Y 值将负责气泡在 Y 轴上的位置，第二个 Y 值将负责气泡大小。

因此，要在每个系列中有一个气泡，您可以使用以下代码：

```
Chart chart = new Chart();
DataTable dt = GetData(); //your method to initialize data table with columns "Series", "X_value", "Y_value" and "BubbleSize_value"

foreach (DataRow row in dt.Rows)
{
    string seriesName = row["Series"].ToString();
    var series = new Series(seriesName);
    series.YValuesPerPoint = 2;
    series.ChartType = SeriesChartType.Bubble;
    series.MarkerStyle = MarkerStyle.Circle;

    series.Points.AddXY(row["X_value"], row["Y_value"], row["BubbleSize_value"]);
    chart.Series.Add(series);
} 
```

# objective-c - 创建包含太多数据的 csv 文件时，iOS 应用程序崩溃

> ID：10732579
> 
> 赞同：2
> 
> 时间：2012-05-24T06:55:18.213
> 
> 标签：objective-c, ios, csv

1）我正在尝试**使用 NSMutableArray（数组数组）创建 CSV 文件**，我想使用 MFMailComposeViewController 将其作为邮件附件发送。以下是我为它编写的代码 -

```
//Export Data to excel
-(NSString*)ExportToExcelClicked
{
    dataToSend = @"";

@try {

    for(int cntHeader = 0;cntHeader< [NamesArray count];cntHeader++)
    {

        dataToSend = [NSString stringWithFormat:@"%@%@\n",dataToSend,[NamesArray objectAtIndex:cntHeader]];
        dataToSend = [NSString stringWithFormat:@"\nAccount Number,Engine Number,Chasssis Number,Registration,Vehicle Type,Vehicle Model,Vehicle Make\n"];

        for(int cntData = 0;cntData< [appDelegate.arrEmailRepossessionDetail count];cntData++)
        {

            NSMutableArray *thearr = [appDelegate.arrEmailRepossessionDetail objectAtIndex:cntData];

            NSString *strVehicleDetail = @"";

            strVehicleDetail = [NSString stringWithFormat:@"%@%@,",strVehicleDetail,[thearr objectAtIndex:0]];
            strVehicleDetail = [NSString stringWithFormat:@"%@%@,",strVehicleDetail,[thearr objectAtIndex:1]];
            strVehicleDetail = [NSString stringWithFormat:@"%@%@,",strVehicleDetail,[thearr objectAtIndex:2]];
            strVehicleDetail = [NSString stringWithFormat:@"%@%@,",strVehicleDetail,[thearr objectAtIndex:3]];
            strVehicleDetail = [NSString stringWithFormat:@"%@%@,",strVehicleDetail,[thearr objectAtIndex:4]];
            strVehicleDetail = [NSString stringWithFormat:@"%@%@,",strVehicleDetail,[thearr objectAtIndex:5]];
            strVehicleDetail = [NSString stringWithFormat:@"%@%@,",strVehicleDetail,[thearr objectAtIndex:6]];

            dataToSend = [NSString stringWithFormat:@"%@%@\n",dataToSend,strVehicleDetail];
        }

    dataToSend = [NSString stringWithFormat:@"%@\n\n",dataToSend];
    return dataToSend;

}

}            

@catch (NSException *exception) {
    NSLog(@"NSException: %@", exception.reason);
} 
```

}

***邮件附件代码***

```
NSString *strCSVData = [self ExportToExcelClicked];

        if ([strCSVData isEqualToString:@""] || strCSVData.length > 0) 
        {
            NSData *dataObj = [strCSVData dataUsingEncoding:NSUTF8StringEncoding];
        } 
```

问题是 csv 文件正在为大约 800 到 900 条记录正确创建，但除此之外，应用程序正在崩溃。是否有任何有效的方法是创建 csv 记录。

2）csv文件也在excel中正确显示数据，***但在开放式办公室***中却没有， 例如：-

***Open Office 输出*** 帐号
19824:38:00

***Excel 输出（预期输出）*** 帐号 019465:021578

不明白为什么***OpenOffice***没有显示正确的输出。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T07:40:59.033

您的应用很可能内存不足。

您创建了许多自动释放的对象。但是因为你的代码是一个巨大的内存分配循环，它在到达当前运行循环的末尾之前就崩溃了，自动创建的自动释放池被耗尽了。

您应该使用自己的[自动释放池](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html#//apple_ref/doc/uid/20000047-CJBFBEDI)。而且，正如graver 所指出的，使用NSMutableString 和appendString。这将创建较少占用内存的自动释放对象。并尝试使用 only `appendString:`， not `appendFormat:`，解析格式需要时间和内存。

大概是这样的：

```
NSMutableString *dataToSend = [NSMutableString stringWithCapacity:10000]; // put your own estimate, based on the usual length of a data row and the number of rows

[dataToSend appendString:[namesArray objectAtIndex:cntHeader]];
[dataToSend appendString:@"\n\nAccount Number,Engine Number,Chasssis Number,Registration,Vehicle Type,Vehicle Model,Vehicle Make\n"];
for(int cntData = 0;cntData< [appDelegate.arrEmailRepossessionDetail count];cntData++)
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSMutableArray *thearr = [appDelegate.arrEmailRepossessionDetail objectAtIndex:cntData];
    for (NSInteger i = 0; i < [thearr count]; i++) {
        // loop for the columns
        if (i > 0) {
            // put , before each column that is not the first column
            [dataToSend appendString:@","];
        }
        [dataToSend appendString:[thearr objectAtIndex:i]];
    }
    [dataToSend appendString:@"\n"];

    [pool drain];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:17:32.057

您肯定需要将您的`dataToSend`实例变量更改为类型`NSMuableString`，并且只将数据附加到它。你现在这样做的方式，每次都会创建一个新字符串，但`NSMutableString`它只会追加它。

# android - 如何在android的相机视图中添加透明地图视图？

> ID：10732589
> 
> 赞同：1
> 
> 时间：2012-05-24T06:56:06.793
> 
> 标签：android, android-mapview, android-camera, augmented-reality

您好我正在开发一个基于位置服务的 android 应用程序。在这里，我想在地图中显示设备附近的位置。我的想法是在相机视图上方显示地图。我们可以为相机添加表面视图，我们可以为该表面视图添加视图。像这种方式，我想在相机视图上方的表面视图中添加地图视图。我需要根据方向旋转地图。请让我知道是否有任何示例应用程序用于按方向旋转地图并在相机视图上添加地图视图。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:41:40.437

使用 Framelayout 将您的 2 个视图（CameraView 和 MapView）放在它们自己之上。

并使用 xml 属性 alpha 使 MapView 透明。

# html - 是否可以在 HTML Textarea 中保留链接？

> ID：10732595
> 
> 赞同：2
> 
> 时间：2012-05-24T06:56:33.547
> 
> 标签：html

当我放置一个链接时，它会显示一个原始 html。像下面..有没有办法在textarea中显示链接？

```
 <a href="">kill</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:59:22.457

`Textarea`用于**原始文本**。如果您希望 HTML 呈现，则必须使用富格式文本编辑器（tinymce 非常流行，如评论中所述）。

**编辑：**

实际上，如果您`contenteditable`在 div 上使用标签也是可能的：

```
<div contenteditable="true">
    <a href="http://google.com">Link</a>
</div>​ 
```

这样，您可以将自己的 HTML 放入其中，但让它保持可编辑状态。

演示：http: [//jsfiddle.net/rMgR3/](http://jsfiddle.net/rMgR3/)

# cakephp - mysql-real-escape-string：CakePHP 中的访问被拒绝

> ID：10732600
> 
> 赞同：2
> 
> 时间：2012-05-24T06:56:45.963
> 
> 标签：cakephp, cakephp-2.1

在我使用 CakePHP 将数据保存到我的数据库之前，我正在尝试使用 mysql-real-escape-string 对输入进行清理。我收到以下错误

> mysql_real_escape_string() [function.mysql-real-escape-string]：用户'nobody'@'localhost'的访问被拒绝（使用密码：否）

我的代码：

```
public function admin_videos($id = null) {
        if(!($this->isLogged() && $this->isAuthorized())) {
            $this->redirect(array('controller' => 'users', 'action' => 'login', 'admin' => true));
        }
        if ($this->request->is('post')) {
            $this->request->data['MovieVideo']['video'] = mysql_real_escape_string($this->request->data['MovieVideo']['video']);
            $this->request->data['MovieTrailer']['video'] = mysql_real_escape_string($this->request->data['MovieTrailer']['video']);
            if ($this->Movie->saveAll($this->request->data)) {
                $this->Session->setFlash('The movie has been saved', 'admin/flash_success');
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash('The movie could not be saved. Please, try again.', 'admin/flash_error');
            }
        } else {
          $this->request->data = $this->Movie->find('first', array('conditions' => array('Movie.id' => $id), 'contain' => array('MovieTrailer', 'MovieVideo')));
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T07:01:04.307

从[文档](http://book.cakephp.org/1.2/view/153/Data-Sanitization)：

> 如果您使用 CakePHP 的 ORM 方法（例如 find() 和 save()）和正确的数组表示法（即 array('field' => $value)）而不是原始 SQL，CakePHP 已经保护您免受 SQL 注入。

所以忘记手动调用`mysql_real_escape_string()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:01:16.400

我猜你还没有连接到 mysql 数据库。使用正确的凭据尝试 mysql_connect() 和 mysql_select_db()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T07:42:11.357

mysql_real_escape_string() 需要连接到数据库作为第二个参数，除非您已经打开了连接： http: [//php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

您可以尝试以下方法之一：

*   尝试使用 mysql_escape_string （现在已弃用）
*   切换到 PDO 并使用报价功能（[http://uk3.php.net/manual/en/pdo.quote.php](http://uk3.php.net/manual/en/pdo.quote.php)）
*   首先初始化与数据库的连接，然后将该连接传递给 mysql_real_escape_string

一般来说，我会推荐使用 PDO，因为它是更好的 OO，并且比 mysql_* 函数更受支持

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-25T16:34:42.950

`Sanitize::escape()`对于为 CakePHP 2.x 或 CakePHP 3.x手动构建的复杂查询

```
 $connection = ConnectionManager::get('default');
    $clean_string = $connection->quote('dirty"string--%/\'); 
```

# php - 网址编码。非常困难

> ID：10732607
> 
> 赞同：0
> 
> 时间：2012-05-24T06:57:08.880
> 
> 标签：php, html, line-breaks

我有一个这样的日语字符串（从数据库中获取）

$myString = "いっぱい< br />んどん"

因为 API 要求输入字符串必须是 URL 编码的，所以我使用它进行编码

urlencode($myString);

**问题是 API 平台页面在文本区域中显示该字符串。**

如您所知，HTML texarea 不允许使用 HTML < br /> 换行。它只允许“ ” 显示换行符。

所以现在**我不知道如何在 API 平台的 textarea 中显示 $myString**。

我的工作流程：我的网站 -> 将 $myString 传递给 API -> $myString 在 API 平台页面中显示（不是我的）

**更新：**

API是这样的

```
< a href="diary:self?guid=ON&url=http%3A%2F%2Fredirect_uri.com&subject=%83e%83X%83g&body=....">Something< /a> 
```

我必须将 myString 传递给 body=...

**更新：**

这是我尝试过的：

```
function convertBrTagtoASCII($string) {
    $string = str_replace(array("</br>", "</br >", "<br>", "<br >"), "&#10;", $string);
    return $string;
}

$converted = convertBrTagtoASCII($myString); 
```

将所有 br 标记替换为 & #10;，然后是 urlencode($converted)，然后传递给 API 链接的“body”参数。textarea 中的输出是

```
いっぱい&#10;んどん 
```

该平台似乎不仅 urldecode 还转义了字符串。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:00:26.820

使用[htmlentities](http://php.net/manual/en/function.htmlentities.php)转义特殊的 HTML 字符，例如`<`.

```
echo '<textarea>'.htmlentities($myString).'</textarea>' 
```

在 textarea 元素中，您可以使用换行符，因此无需对它们进行特殊转义。

编辑：也许我误解了这个问题，你的数据库中已经有`<br>`标签。在这种情况下，您可以用换行符替换这些标签。另一种方法是使用富文本编辑框，例如[TinyMCE](http://www.tinymce.com/)，它支持 HTML 编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:06:54.167

您没有**编码**问题，您有**无效数据**问题。您要发送到 API 的字符串在 API 上下文中无效。你会有同样的问题`"Hello<br />World"`。

有三种可能：

*   字符串应该是`"Hello&lt;br /&gt;World"`or `"いっぱい&lt; br /&gt;んどん"`，在这种情况下，您可以简单地修复它（及其表兄弟）
*   字符串应该是`"Hello\nWorld"`or `"いっぱい\nんどん"`，在这种情况下，您需要一个正则表达式或类似的工具来修复它，然后再进行 urlencoding。
*   该字符串确实格式不正确：在这种情况下，您应该同时拒绝：`"Hello<br />World"`和`"いっぱい< br />;んどん"`

要点是，这不是编码或您的代码的属性：是的，您可以尝试修复明显的缺陷，但不，没有黄金法则

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:40:01.303

将您的休息时间转换为 ascii。然后对 URL 进行编码。然后运行正则表达式替换以转换编码的换行符

```
%26%2310%3B 
```

回到

```
&#10; 
```

# drupal - 不同主机上的 Drupal 会话和联合 mysql 数据库管理

> ID：10732612
> 
> 赞同：0
> 
> 时间：2012-05-24T06:57:21.393
> 
> 标签：drupal, login, federated

我有两个 Drupal 网站实例 www.drupalwebsite1.com 和 www.drupalwebsite2.com 我正在使用联合表 (MySQL)。我需要知道如何管理这两个实例的会话，因此当用户登录实例 1 www.drupalwebsite1.com 时，它将显示自动登录到 www.drupalwebsite2.com，无需单独登录。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:22:39.040

Drupal 使用 cookie 进行会话管理，因此除非在浏览器中启用第三方 cookie，否则我认为 www.drupalwebsite2.com 无法访问 www.drupalwebsite1.com 设置的 cookie。但是，对于子域，它应该可以工作 - 所以 site1.drupalwebsite.com 和 site2.drupalwebsite.com 应该可以工作。

# python - 使用 SleekXMPP 连接到 Facebook 聊天

> ID：10732616
> 
> 赞同：2
> 
> 时间：2012-05-24T06:58:04.593
> 
> 标签：python, xmpp, facebook-chat

我正在使用此示例代码通过 XMPP 连接到 Facebook Chat：

```
#!/usr/bin/python
import sleekxmpp
import logging
logging.basicConfig(level=logging.DEBUG)

def session_start(event):
    chatbot.send_presence()
    print('Session started')
    chatbot.get_roster()

def message(msg):
    if msg['type'] in ('chat','normal'):
        print('msg received')
        print(msg['body'])

        msg.reply('Thanks').send()

jid = 'myusername@chat.facebook.com'
password = 'mypassword'
server = ('chat.facebook.com', 5222)

chatbot = sleekxmpp.ClientXMPP(jid,password)
chatbot.add_event_handler('session_start', session_start)
chatbot.add_event_handler('message', message)
chatbot.auto_reconnect = True
chatbot.connect(server)
chatbot.process(block=True) 
```

一切似乎都很好，但是当我运行该代码时，我无法连接到 Facebook 服务器：

```
DEBUG:sleekxmpp.basexmpp:setting jid to myusername@chat.facebook.com
DEBUG:sleekxmpp.basexmpp:Loaded Plugin (RFC-6120)  STARTTLS Stream Feature
DEBUG:sleekxmpp.basexmpp:Loaded Plugin (RFC-6120)  Resource Binding Stream Feature
DEBUG:sleekxmpp.basexmpp:Loaded Plugin (RFC-3920)  Start Session Stream Feature
DEBUG:sleekxmpp.basexmpp:Loaded Plugin (RFC-6120)  SASL Stream Feature
DEBUG:sleekxmpp.xmlstream.xmlstream:Trying to connect to chat.facebook.com:5222
DEBUG:sleekxmpp.xmlstream.xmlstream:Connecting to chat.facebook.com:5222
ERROR:sleekxmpp.xmlstream.xmlstream:Could not connect to chat.facebook.com:5222\. Socket Error #111: Connection refused
DEBUG:sleekxmpp.xmlstream.xmlstream:Trying to connect to chat.facebook.com:5222
DEBUG:sleekxmpp.xmlstream.xmlstream:Waiting 1.97953654103 seconds before connecting.
... 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:45:50.287

您在脚本中正确执行了所有操作。这似乎是 Facebook 端的一个临时问题（如 暗示的那样`Socket Error #111: Connection refused`）。针对 Sleek 的 master 和 development 分支进行测试，您的脚本连接并登录对我来说很好。

看脸书的XMPP开发者关系群，最近没有任何中断的报告，所以不清楚目前服务情况如何。

作为额外说明，由于您正在处理 Facebook，如果您想使用`X-FACEBOOK-PLATFORM`身份验证方法，那么您可以设置：

```
chatbot.credentials['api_key'] = '...API_KEY...'
chatbot.credentials['access_token'] = '...TOKEN...' 
```

如果您需要 Sleek 相关的帮助，别忘了还有 slim@conference.jabber.org 会议室。

——兰斯

# python - waf 自动化 qt 配置

> ID：10732617
> 
> 赞同：1
> 
> 时间：2012-05-24T06:58:07.993
> 
> 标签：python, qt, wsh, waf

我正在使用 waf wscript 制作项目。我面临的问题是包括 qt 特定的头文件：lib 和 libpath。我对 pkg-config 工具有相当的了解。/usr/lib/pkg-config 目录中有 .pc 文件，有助于自动扩展所需的目录。但是 qt 没有 .pc 文件。QT 库是使用突触安装的。
有没有办法避免在 wscript 配置中写入所有包含路径和 lib 目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:04:21.960

waf 带有支持 QT4 的工具。你看过演示如何在 QT4 中使用 waf 吗？

[http://code.google.com/p/waf/source/browse/demos/qt4/wscript](http://code.google.com/p/waf/source/browse/demos/qt4/wscript)

# javascript - mailto 正文中的某些字符正在阻止邮件窗口打开....javascript

> ID：10732623
> 
> 赞同：1
> 
> 时间：2012-05-24T06:58:43.577
> 
> 标签：javascript

我正在尝试在 javascript 中使用以下内容打开邮件回复窗口：

```
window.location='mailto:'+to+'?subject='+subject+'&cc='+cc+'&body='+body; 
```

问题是正文变量中有一些字符（如引号、特殊字符等）会给出错误消息。如果我给它一个静态的简单正文字符串，则相同的代码可以工作。

Firefox 错误类似于

> 错误：未捕获的异常：[异常...“失败”nsresult：“0x80004005（NS_ERROR_FAILURE）”位置：“JS frame :: (url) :: send_mail :: line 49”数据：no]”

正文内容：“XXXXX”

找出原因伙计们......它不允许我发送超过 1209 个字符。将此作为新问题发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:06:13.873

如果您将字符串传递给查询字符串中的参数，并且该字符串可能包含在 url 中具有其他含义的字符，则需要使用以下命令对它们进行转义：

```
escape(stringOfTextToEscape); 
```

因此，您的 window.location 将如下所示：

```
window.location='mailto:'+to+'?subject='+subject+'&cc='+cc+'&body='+escape(body) 
```

这可确保任何特殊字符都转换为 unicode 转义序列，从而可以安全地传递到 URL。

有关更多信息，请参阅此[关于转义、encodeURI 和 encodeURIComponent 的常见问题解答](http://www.javascripter.net/faq/escape.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:06:35.730

尝试这个：

```
window.location='mailto:'+to+'?subject='+subject+'&cc='+cc+'&body='+escape(body); 
```

`escape()`函数对特殊字符进行编码，但以下情况除外： * @ - _ + 。/

所以`escape("How are you? Come on!");`会给你这样的结果：`How%20are%20you%3F%20Come%20On%21`

# android - android中的apk文件可以超过50mb吗？

> ID：10732624
> 
> 赞同：-5
> 
> 时间：2012-05-24T06:58:49.333
> 
> 标签：android

我正在开发安卓应用程序。**目前我的apk大小是12mb。**我需要在我的项目中保留 40mb 大小的图像。因此，如果我将这些图像保存在我的可绘制文件夹中，那么我的 apk 大小将超过 50 mb。**那么如果超过 50 mb，apk 会安装在移动设备中吗？**请帮我解决这个问题...

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:08:04.010

If you want to install your apk directly on sdcard then you can go for `installLocation`(without publishing apk)

or else use *Expansion file* concept of Android, while publishing your apk you can attach(main|patch) file.

*main*: Primary resource(application cant run without it)

*patch*: secondary resource(application can tun without it)

All you need is to collect your content and make a zip, should follow naming format as below

```
<main|patch>.expansioncode.packagename ".obb" implicitly append why Google. 
```

You have to do Licencing even your app is free. you must have **public key** of merchant account.

how to download Expansion Content you can find here [http://developer.android.com/guide/market/expansion-files.html](http://developer.android.com/guide/market/expansion-files.html)

While downloading you have to pass parameter content size(in byte) to map the file

```
XAPKFile(boolean isMain, int fileVersion, long fileSize) 
```

[http://developer.android.com/guide/market/expansion-files.html#Download](http://developer.android.com/guide/market/expansion-files.html#Download)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-25T17:22:26.053

**截至最近**（2015 年 9 月）**，如果您的目标是 Android 2.3 及更高版本，则可以上传最大 100 MB 的 APK** - 您可以[在此帮助页面上](https://support.google.com/googleplay/android-developer/answer/2481797?hl=en-GB)阅读更多相关信息。此限制以前为 50 MB。还有一篇 Android 开发者博客文章解释了[这里](http://android-developers.blogspot.co.uk/2015/09/support-for-100mb-apks-on-google-play.html)的变化。

或者，如果您的应用超过 100 MB APK 限制，您可以使用**扩展文件**。这些是在您的应用安装后下载的附加文件，最大为 4 GB（具体来说，您可以拥有两个最大为 2 GB 的扩展文件）。[您可以在 Android 开发者网站上的此页面上](http://developer.android.com/google/play/expansion-files.html)了解有关扩展文件的更多信息。

# ruby - 如何将变量传递给 ruby 中的 system() 调用？

> ID：10732626
> 
> 赞同：5
> 
> 时间：2012-05-24T06:58:56.433
> 
> 标签：ruby, unix, command-line, command-line-interface

假设我在一个变量中有一堆文本`some_var`，这几乎可以是任何东西。

```
some_var = "Hello, I'm a \"fancy\" variable | with a pipe, double- and single-quotes (terminated and unterminated), and more." 
```

还可以说，在 CLI Ruby 应用程序中，我希望允许用户将该文本通过管道传输到任何 Unix 命令中。我允许他们输入类似`some_var | espeak -a 200 -v en-us`的内容，其中管道右侧的命令是安装在他们系统上的任何 unix CLI 工具。

假设我已经将变量选择和管道从它们的输入中分离出来，所以我可以 100% 确定管道后面的命令是什么。（在这种情况下，我想将变量的内容通过管道传输到`espeak -a 200 -v en-us`.）

我该怎么做？我认为我不能使用反引号方法或`%x[]`文字。我试过做以下...

```
system("echo '#{some_var}' | espeak -a 200 -v en-us") 
```

...但是任何特殊字符都会搞砸，我无法删除特殊字符。我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T07:21:19.883

此外`popen`，您还可以查看`Shellwords.escape`：

```
puts Shellwords.escape("I'm quoting many different \"''' quotes")
=> I\'m\ quoting\ many\ different\ \"\'\'\'\ quotes 
```

这将为您引用特殊字符（bash 兼容）：

```
system("echo '#{Shellwords.escape(some_var)}' | ....") 
```

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/shellwords/rdoc/Shellwords.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/shellwords/rdoc/Shellwords.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T07:10:47.647

哦，快乐的注射。你正在寻找 [`IO.popen`](http://rubydoc.info/stdlib/core/IO.popen).

```
IO.popen('grep ba', 'r+') {|f| # don't forget 'r+'
  f.puts("foo\nbar\nbaz\n") # you can also use #write
  f.close_write
  f.read # get the data from the pipe
}
# => "bar\nbaz\n" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-07T10:30:23.547

`popen`并且`Shellwords.escape`是很好的解决方案，但系统已经内置了使用数组语法的转义

`system('argument', 'argument2', 'argument3')`

例如

```
2.1.2 :002 > abc = "freeky\nbreak"
# "freeky\nbreak" 

2.1.2 :003 > system("echo #{abc}")  #this is bad
freeky
# => true 

2.1.2 :004 > system("echo",abc)     # this is proper way
freeky
break
# => true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T07:45:41.230

啊哈！我找到了。根据[这个页面](http://devver.wordpress.com/2009/07/13/a-dozen-or-so-ways-to-start-sub-processes-in-ruby-part-2/)，`Kernel#open`实际上可以打开一个进程并将数据传递给它，而不仅仅是文件！

```
some_var = "Hello, I'm a \"fancy\" variable | with a pipe, double- and single-quotes (terminated and unterminated), and more."
# some_command = "espeak -a 200 -v en-us" # also works
some_command = "cat"

cmd = "|" + some_command
open(cmd, 'w+') do | subprocess |
  subprocess.write(some_var)
  subprocess.close_write
  subprocess.read.split("\n").each do |output|
    puts "[RUBY] Output: #{output}"
  end
end 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-24T07:21:15.297

将变量传递给系统调用的示例：

```
irb(main):019:0> b = "test string string string"
=> "test string string string"
irb(main):020:0> system("echo " + "#{b}" + "|" + "awk '{print $2}'")
string
=> true 
```

> @Kerrick 如果您有未终止的引号、括号等，您仍然会遇到很多语法错误

也许：

```
some_var = "'Hello, Im a \"fancy\" variable | with a pipe, double- and single-quotes (terminated and unterminated), and more.'"
    => "'Hello, Im a \"fancy\" variable | with a pipe, double- and single-quotes (terminated and unterminated), and more.'"

irb(main):020:0> system("echo " + "#{some_var}" + "|" + "awk '{print $2}'")Im
        => true 
```

# ios - 在应用程序内购买

> ID：10732630
> 
> 赞同：0
> 
> 时间：2012-05-24T06:59:15.120
> 
> 标签：ios, in-app-purchase

我正在开发使用网页支付旋律的新应用程序。由于某些原因，我不想使用应用内购买。所以我的问题是：我可以使用其他网页来支付旋律，以便用户可以收听这个旋律。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T07:08:45.473

[App Store Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html#purchasing-currencies)对此非常清楚：

> 11.2 应用程序使用除应用内购买 API (IAP) 之外的系统来购买应用程序中的内容、功能或服务将被拒绝
> 
> 11.13 链接到外部购买或订阅机制的应用程序将被拒绝，例如“购买”按钮进入网站购买电子书
> 
> 11.14 应用程序可以阅读或播放在应用程序之外订阅或购买的获批准的内容（特别是杂志、报纸、书籍、音频、音乐和视频），只要应用程序中没有购买按钮或外部链接即可批准的内容。对于在应用程序之外订阅或购买的已批准内容，Apple 将不会获得任何部分收入

所以答案是：是的，您可以创建一个网站，用户可以在其中购买下载到您的应用程序的旋律。但是您不得在应用程序中提及该网站。亚马逊的 Kindle 应用程序正是这样做的。

不过，你不是亚马逊。因此，当您选择该方法时，您不会卖出很多旋律。
如果您的应用程序没有提及获取额外旋律的方法，人们就不会打开 safari 去您的网站看看是否还有更多。只需使用 IAP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:05:26.863

不，您不能使用网站供用户购买。您也无法将用户重定向到您的网站以购买商品。

如果你不想使用苹果的 IAP 平台，我会推荐[Urban Airship](http://urbanairship.com/products/in-app-purchase/)。他们有一个不错的应用内购买库。您可以使用他们的网站上传您可购买的产品。

# c# - 如何在 SQL Server 2008 中检索表的列描述

> ID：10732632
> 
> 赞同：0
> 
> 时间：2012-05-24T06:59:19.473
> 
> 标签：c#, asp.net, sql-server-2008

我在我的项目中使用 C# Asp.Net，我为 SQL Server 中特定表的所有列添加了描述。

列名 --> 描述

cAppNo --> 申请号

cFName --> 名字

cMName --> 中间名

所以我的要求是我需要用列的列描述填充下拉列表，那么我怎样才能检索描述。这可能吗？我可以使用 Linq。另外，如果我知道特定列的描述，是否可以根据描述检索该列的实际值。我的意思是假设列 cFName 中的值是 John，那么我如何获得该值如果我知道描述。请让我知道是否可以实现。欢迎提出任何建议。谢谢

# django - 在 django 中使用手动登录

> ID：10732634
> 
> 赞同：1
> 
> 时间：2012-05-24T06:59:31.127
> 
> 标签：django, authentication, redirect, login, django-authentication

我正在关注django 文档上的[示例代码](https://docs.djangoproject.com/en/1.4/topics/auth/#django.contrib.auth.login)`auth`，`login()`以了解可以实现登录的各种方式。我知道[内置表单](https://docs.djangoproject.com/en/1.4/topics/auth/#module-django.contrib.auth.forms)和[内置视图](https://docs.djangoproject.com/en/1.4/topics/auth/#module-django.contrib.auth.views)，最终会使用它们，但我试图*理解*，而不仅仅是知道。

我遇到的问题是用户在 check_user 中成功登录，但在调用重定向时似乎并没有在会话中持续存在。为什么 is_authenticated() 函数给我的结果不一致？我感觉它与 RequestContext 有关，但我不确定是什么。

```
def check_user(request):
    username = request.POST['username']
    password = request.POST['password']
    user = authenticate(username=username, password=password)
    if user is not None:
        if user.is_active:
            login(request, user)
            test1 = user.is_authenticated() ### True
            test2 = request.user.is_authenticated() ### False
            return HttpResponseRedirect(NEXT_PAGE) ### NEXT_PAGE gives request.user.is_authenticated() is False
        else:
            return HttpResponse("disabled account")
    else:
        return HttpResponse("invalid login") 
```

# ipad - iPad从纵向旋转到横向

> ID：10732635
> 
> 赞同：1
> 
> 时间：2012-05-24T06:59:35.010
> 
> 标签：ipad, rotation, landscape, portrait

我的视图最初是横向模式。当一个按钮被点击时，一个视图以纵向模式打开，到目前为止一切都找到了。问题是当我从该视图返回到根视图时，视图将无法正确旋转。这是我用来将视图从纵向旋转到横向的代码，

```
-(void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];

//rotate the page to lansscape
CGAffineTransform landscapeTransform = CGAffineTransformMakeRotation(-90*0.0174532925);
landscapeTransform = CGAffineTransformTranslate (landscapeTransform, 0.0, 0.0);

[self.navigationController.view setTransform:landscapeTransform];

self.navigationController.view.autoresizingMask = UIViewAutoresizingFlexibleWidth |UIViewAutoresizingFlexibleHeight;    
self.navigationController.view.frame  = CGRectMake(0.0, 0.0, self.view.frame.size.width, self.view.frame.size.height);
self.navigationController.view.center  = CGPointMake (384.0, 544.0);

[UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeLeft;
} 
```

这是从纵向页面返回后横向模式下的根页面的屏幕截图，

![在此处输入图像描述](../Images/8e2f00f9f0918be0828f280523de4913.png)

这就是它的样子

![在此处输入图像描述](../Images/b9802fb71e2090adda48fc6ae8e88c6b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:18:29.423

```
-(void)viewWillDisappear:(BOOL)animated
{

[super viewWillDisappear:animated];

//rotate the page to lansscape
CGAffineTransform landscapeTransform = CGAffineTransformMakeRotation(-90*0.0174532925);
landscapeTransform = CGAffineTransformTranslate (landscapeTransform, 0.0, 0.0);

[self.navigationController.view setTransform:landscapeTransform];

self.navigationController.view.autoresizingMask = UIViewAutoresizingFlexibleWidth |UIViewAutoresizingFlexibleHeight;    
self.navigationController.view.frame  = CGRectMake(0.0, 0.0, self.view.frame.size.width, self.view.frame.size.height+64);
self.navigationController.view.center  = CGPointMake (384.0, 512.0);

[UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeLeft;

} 
```

在纵向模式的视图消失后，我不得不调整横向视图，这是，

```
self.navigationController.view.frame  = CGRectMake(0.0, 0.0, self.view.frame.size.width, self.view.frame.size.height+64);
self.navigationController.view.center  = CGPointMake (384.0, 512.0); 
```

我玩弄了中心点和框架高度来调整它。

# iphone - 更改 UINavigationBar 中的背景图像

> ID：10732636
> 
> 赞同：0
> 
> 时间：2012-05-24T06:59:34.950
> 
> 标签：iphone, uinavigationcontroller, uiimage, uinavigationbar, frame

我想在下面的代码中更改导航栏中的背景图片

```
UINavigationBar *navBar = self.navigationController.navigationBar;

UIImageView *image1=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 50)];

image1.image = [UIImage imageNamed:@"image2_ram.jpg"];
[navBar setBackgroundImage:image1.image forBarMetrics:UIBarMetricsDefault]; 
```

图像改变了，但图像的高度没有改变，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:38:31.093

你不应该这样设置，如果你也在考虑 iOS 4.0

用这个

```
@implementation UINavigationBar (CustomImage)
- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed:@"bgTopBar.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

或 iOS 5

使用这个，不需要给它框架，你不能改变高度超过44，导航栏的默认高度是**44**

```
 UINavigationBar *navBar = self.navigationController.navigationBar;
    UIImage *image = [UIImage imageNamed:@"bgTopBar.png"];
    [navBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

# c# - 是否有正则表达式的语法验证器？

> ID：10732638
> 
> 赞同：0
> 
> 时间：2012-05-24T06:59:40.863
> 
> 标签：c#

我有一个文本框，用户可以在其中输入正则表达式字符串，然后将其用作正则表达式匹配模式。

我想知道是否有办法验证输入的语法？我怎么知道它是否是有效的正则表达式模式？

我不希望用户能够输入任何内容，而只是输入有效的正则表达式模式。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:03:15.430

只需[`Regex`](http://msdn.microsoft.com/en-us/library/43122zyz.aspx)使用用户的输入创建一个新实例。

如果输入无效，`ArgumentException`则会发生。

编辑：由于我认为其他答案的代码过于复杂，所以这是我的看法。

```
bool IsValidRegex(string input) {
    try {
        new Regex(input);
        return true;
    }
    catch (ArgumentException) {
        return false;
    }
} 
```

但是，**我*不会*使用这段代码**，因为它会将正则表达式构造两次：一次是为了测试有效性，然后是实际使用它。*不*要这样做。相反，请使用以下内容：

```
Regex TryParseRegex(string input) {
    try {
        return new Regex(input);
    }
    catch (ArgumentException) {
        return null;
    }
} 
```

现在您获得了`null`无效正则表达式的返回值。作为第三种选择，这里是相同的方法，使用`TryXxx`带有`out`参数的 .NET 模式。不过，作为记录，我发现这些方法设计得很糟糕。如果第一个 .NET 版本有`Nullable`s，它们可能看起来像上面的方法。因此，请自行决定使用。

```
bool TryParseRegex(string input, out Regex regex) {
    try {
        regex = new Regex(input);
        return true;
    }
    catch (ArgumentException) {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:03:26.273

您可以使用 try 和 catch 语句来测试他们的输入是否损坏。

```
public bool isValidRegex(string input){
     bool ret;

     ret = true;

     try{
         new Regex(input);
     }
     catch (ArgumentException){
          ret = false;
     }

     return ret;
} 
```

# android - Android开放电话应用

> ID：10732641
> 
> 赞同：3
> 
> 时间：2012-05-24T06:59:52.127
> 
> 标签：android, launch, launcher, phone-call

我只想打开android设备的电话应用程序。我不想为该应用程序提供电话号码。只是想打开它。
我正在使用电话应用程序的包名称来打开它。因为我可以使用下面的代码通过该包名称打开我想要的任何应用程序。

`Intent launchIntent = getPackageManager().getLaunchIntentForPackage("com.android.contacts"); startActivity(launchIntent);`

我无法使用上述代码打开**电话**和**联系人应用程序。**可能是什么问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-24T07:03:16.133

`Intents`旨在为您提供一种更通用的方式来访问诸如打开文件之类的操作。如果你必须指定你想做的任何事情的包，这将是非常有限的。但是，这里有一些可能是您所追求的意图。

```
//For the contacts (picking one)
 Intent i = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
//For the contacts (viewing them) 
 Intent i = new Intent(Intent.ACTION_VIEW, ContactsContract.Contacts.CONTENT_URI);
//For the dial pad
 Intent i = new Intent(Intent.ACTION_DIAL, null);
//For viewing the call log
 Intent i = new Intent(Intent.ACTION_VIEW, CallLog.Calls.CONTENT_URI); 
```

在某个地方为自己创建一个`useful intents`文件以节省您将来的时间，有一天您会感谢我的。

当然，要开始这些意图，你会`startActivity(i);`为除第一个之外的所有意图，因为你希望联系回来并且你需要`startActivityForResult(i);`，但那是另一回事了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:10:33.963

> 公共静态最终字符串 ACTION_DIAL
> 
> 自：API 级别 1 活动操作：拨打数据指定的号码。这显示了一个带有正在拨打的号码的 UI，允许用户明确发起呼叫。**输入：如果没有，则启动一个空拨号器；**

来源：http: [//developer.android.com/reference/android/content/Intent.html#ACTION_DIAL](http://developer.android.com/reference/android/content/Intent.html#ACTION_DIAL)

[http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL](http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL)也可能是您正在寻找的。

如果您想从 Activity 开始通话，只需使用Activity 上下文中的[http://developer.android.com/reference/android/content/Context.html#startActivity(android.content.Intent](http://developer.android.com/reference/android/content/Context.html#startActivity(android.content.Intent) )。

# c# - 在 ASP.NET Web API 中返回错误的最佳实践

> ID：10732644
> 
> 赞同：430
> 
> 时间：2012-05-24T07:00:13.920
> 
> 标签：c#, rest, asp.net-web-api

我担心我们将错误返回给客户的方式。

当我们得到错误时，我们是否通过抛出[HttpResponseException立即返回错误：](https://msdn.microsoft.com/en-us/library/system.web.http.httpresponseexception(v=vs.118).aspx)

```
public void Post(Customer customer)
{
    if (string.IsNullOrEmpty(customer.Name))
    {
        throw new HttpResponseException("Customer Name cannot be empty", HttpStatusCode.BadRequest) 
    }
    if (customer.Accounts.Count == 0)
    {
         throw new HttpResponseException("Customer does not have any account", HttpStatusCode.BadRequest) 
    }
} 
```

或者我们累积所有错误然后发送回客户端：

```
public void Post(Customer customer)
{
    List<string> errors = new List<string>();
    if (string.IsNullOrEmpty(customer.Name))
    {
        errors.Add("Customer Name cannot be empty"); 
    }
    if (customer.Accounts.Count == 0)
    {
         errors.Add("Customer does not have any account"); 
    }
    var responseMessage = new HttpResponseMessage<List<string>>(errors, HttpStatusCode.BadRequest);
    throw new HttpResponseException(responseMessage);
} 
```

这只是一个示例代码，无论是验证错误还是服务器错误都无关紧要，我只想知道最佳实践，每种方法的优缺点。

* * *

## 回答 #1

> 赞同：324
> 
> 时间：2012-05-24T09:27:40.627

对我来说，我通常发回一个`HttpResponseException`并根据抛出的异常相应地设置状态代码，如果异常是致命的，将决定我是否`HttpResponseException`立即发回。

归根结底，它是一个 API 发回响应而不是视图，所以我认为向消费者发回一条带有异常和状态代码的消息是可以的。我目前不需要累积错误并将它们发回，因为大多数异常通常是由于不正确的参数或调用等造成的。

我的应用程序中的一个示例是，有时客户端会要求提供数据，但没有任何可用数据，所以我抛出一个自定义`NoDataAvailableException`并让它冒泡到 Web API 应用程序，然后在我的自定义过滤器中捕获它发送回一个相关消息以及正确的状态代码。

我不确定 100% 的最佳做法是什么，但这目前对我有用，所以这就是我正在做的事情。

**更新**：

自从我回答了这个问题以来，已经写了一些关于该主题的博客文章：

[https://weblogs.asp.net/fredriknormen/asp-net-web-api-exception-handling](https://weblogs.asp.net/fredriknormen/asp-net-web-api-exception-handling)

（这个在夜间构建中有一些新功能） [https://docs.microsoft.com/archive/blogs/youssefm/error-handling-in-asp-net-webapi](https://docs.microsoft.com/archive/blogs/youssefm/error-handling-in-asp-net-webapi)

**更新 2**

更新我们的错误处理过程，我们有两种情况：

1.  对于一般错误，如未找到，或传递给操作的参数无效，我们返回 a`HttpResponseException`以立即停止处理。此外，对于我们操作中的模型错误，我们会将模型状态字典交给`Request.CreateErrorResponse`扩展并将其包装在`HttpResponseException`. 添加模型状态字典会生成响应正文中发送的模型错误列表。

2.  对于发生在更高层的错误，服务器错误，我们让异常冒泡到 Web API 应用程序，这里我们有一个全局异常过滤器，它查看异常，用 ELMAH 记录它并尝试设置正确的 HTTP 来理解它状态代码和相关的友好错误消息作为正文再次在`HttpResponseException`. 对于我们不期望客户端会收到默认的 500 内部服务器错误的异常，但出于安全原因，会收到一条通用消息。

**更新 3**

最近，在拿起 Web API 2 之后，为了发回一般错误，我们现在使用[IHttpActionResult](http://msdn.microsoft.com/en-us/library/system.web.http.ihttpactionresult%28v=vs.118%29.aspx)接口，特别是命名空间中的内置类，`System.Web.Http.Results`例如 NotFound，BadRequest 当它们适合时，如果它们不适合我们扩展它们，例如带有响应消息的 NotFound 结果：

```
public class NotFoundWithMessageResult : IHttpActionResult
{
    private string message;

    public NotFoundWithMessageResult(string message)
    {
        this.message = message;
    }

    public Task<HttpResponseMessage> ExecuteAsync(CancellationToken cancellationToken)
    {
        var response = new HttpResponseMessage(HttpStatusCode.NotFound);
        response.Content = new StringContent(message);
        return Task.FromResult(response);
    }
} 
```

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2014-03-01T00:10:47.963

ASP.NET Web API 2 确实简化了它。例如，下面的代码：

```
public HttpResponseMessage GetProduct(int id)
{
    Product item = repository.Get(id);
    if (item == null)
    {
        var message = string.Format("Product with id = {0} not found", id);
        HttpError err = new HttpError(message);
        return Request.CreateResponse(HttpStatusCode.NotFound, err);
    }
    else
    {
        return Request.CreateResponse(HttpStatusCode.OK, item);
    }
} 
```

当未找到该项目时，向浏览器返回以下内容：

```
HTTP/1.1 404 Not Found
Content-Type: application/json; charset=utf-8
Date: Thu, 09 Aug 2012 23:27:18 GMT
Content-Length: 51

{
  "Message": "Product with id = 12 not found"
} 
```

建议：除非出现灾难性错误（例如，WCF 故障异常），否则不要抛出 HTTP 错误 500。选择代表数据状态的适当 HTTP 状态代码。（请参阅下面的 apigee 链接。）

链接：

*   ASP.NET Web API (asp.net)[中的异常处理和](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)
*   [RESTful API 设计：错误怎么办？](https://blog.apigee.com/detail/restful_api_design_what_about_errors)(apigee.com)

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2014-03-04T05:30:36.543

看起来您在验证方面遇到的问题比错误/异常更多，所以我会说一下两者。

**验证**

控制器操作通常应采用直接在模型上声明验证的输入模型。

```
public class Customer
{ 
    [Require]
    public string Name { get; set; }
} 
```

然后，您可以使用`ActionFilter`自动将验证消息发送回客户端。

```
public class ValidationActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        var modelState = actionContext.ModelState;

        if (!modelState.IsValid) {
            actionContext.Response = actionContext.Request
                 .CreateErrorResponse(HttpStatusCode.BadRequest, modelState);
        }
    }
} 
```

有关此检查的更多信息[http://ben.onfabrik.com/posts/automatic-modelstate-validation-in-aspnet-mvc](http://ben.onfabrik.com/posts/automatic-modelstate-validation-in-aspnet-mvc)

**错误处理**

最好向客户端返回一条消息，表示发生的异常（带有相关的状态代码）。

`Request.CreateErrorResponse(HttpStatusCode, message)`如果要指定消息，则必须使用开箱即用。但是，这会将代码与`Request`对象联系起来，您不需要这样做。

我通常会创建自己的“安全”异常类型，我希望客户端知道如何处理和包装所有其他带有通用 500 错误的异常。

使用动作过滤器处理异常如下所示：

```
public class ApiExceptionFilterAttribute : ExceptionFilterAttribute
{
    public override void OnException(HttpActionExecutedContext context)
    {
        var exception = context.Exception as ApiException;
        if (exception != null) {
            context.Response = context.Request.CreateErrorResponse(exception.StatusCode, exception.Message);
        }
    }
} 
```

然后就可以全局注册了。

```
GlobalConfiguration.Configuration.Filters.Add(new ApiExceptionFilterAttribute()); 
```

这是我的自定义异常类型。

```
using System;
using System.Net;

namespace WebApi
{
    public class ApiException : Exception
    {
        private readonly HttpStatusCode statusCode;

        public ApiException (HttpStatusCode statusCode, string message, Exception ex)
            : base(message, ex)
        {
            this.statusCode = statusCode;
        }

        public ApiException (HttpStatusCode statusCode, string message)
            : base(message)
        {
            this.statusCode = statusCode;
        }

        public ApiException (HttpStatusCode statusCode)
        {
            this.statusCode = statusCode;
        }

        public HttpStatusCode StatusCode
        {
            get { return this.statusCode; }
        }
    }
} 
```

我的 API 可以抛出的示例异常。

```
public class NotAuthenticatedException : ApiException
{
    public NotAuthenticatedException()
        : base(HttpStatusCode.Forbidden)
    {
    }
} 
```

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2014-03-04T05:15:18.760

你可以抛出一个 HttpResponseException

```
HttpResponseMessage response = 
    this.Request.CreateErrorResponse(HttpStatusCode.BadRequest, "your message");
throw new HttpResponseException(response); 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2018-03-22T12:22:48.860

如果您使用的是 ASP.NET Web API 2，最简单的方法是使用 ApiController Short-Method。这将导致 BadRequestResult。

```
return BadRequest("message"); 
```

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2016-01-20T01:53:51.093

对于 Web API 2，我的方法始终返回 IHttpActionResult 所以我使用...

```
public IHttpActionResult Save(MyEntity entity)
{
    ....
    if (...errors....)
        return ResponseMessage(
            Request.CreateResponse(
                HttpStatusCode.BadRequest, 
                validationErrors));

    // otherwise success
    return Ok(returnData);
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-03-18T09:40:11.123

您可以在 Web Api 中使用自定义 ActionFilter 来验证模型：

```
public class DRFValidationFilters : ActionFilterAttribute
{

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (!actionContext.ModelState.IsValid)
        {
            actionContext.Response = actionContext.Request
                .CreateErrorResponse(HttpStatusCode.BadRequest, actionContext.ModelState);

            //BadRequest(actionContext.ModelState);
        }
    }

    public override Task OnActionExecutingAsync(HttpActionContext actionContext,
        CancellationToken cancellationToken)
    {

        return Task.Factory.StartNew(() =>
        {
            if (!actionContext.ModelState.IsValid)
            {
                actionContext.Response = actionContext.Request
                    .CreateErrorResponse(HttpStatusCode.BadRequest, actionContext.ModelState);
            }
        });
    }

    public class AspirantModel
    {
        public int AspirantId { get; set; }
        public string FirstName { get; set; }
        public string MiddleName { get; set; }
        public string LastName { get; set; }
        public string AspirantType { get; set; }
        [RegularExpression(@"^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$",
            ErrorMessage = "Not a valid Phone number")]
        public string MobileNumber { get; set; }
        public int StateId { get; set; }
        public int CityId { get; set; }
        public int CenterId { get; set; }

        [HttpPost]
        [Route("AspirantCreate")]
        [DRFValidationFilters]
        public IHttpActionResult Create(AspirantModel aspirant)
        {
            if (aspirant != null)
            {

            }
            else
            {
                return Conflict();
            }

            return Ok();
        }
    }
} 
```

在 webApiConfig.cs 中注册 CustomAttribute 类 config.Filters.Add(new DRFValidationFilters());

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-12-19T14:32:01.527

建立在`Manish Jain`'s answer（这意味着 Web API 2 可以简化事情）：

1) 使用**验证结构**来响应尽可能多的验证错误。这些结构也可用于响应来自表单的请求。

```
public class FieldError
{
    public String FieldName { get; set; }
    public String FieldMessage { get; set; }
}

// a result will be able to inform API client about some general error/information and details information (related to invalid parameter values etc.)
public class ValidationResult<T>
{
    public bool IsError { get; set; }

    /// <summary>
    /// validation message. It is used as a success message if IsError is false, otherwise it is an error message
    /// </summary>
    public string Message { get; set; } = string.Empty;

    public List<FieldError> FieldErrors { get; set; } = new List<FieldError>();

    public T Payload { get; set; }

    public void AddFieldError(string fieldName, string fieldMessage)
    {
        if (string.IsNullOrWhiteSpace(fieldName))
            throw new ArgumentException("Empty field name");

        if (string.IsNullOrWhiteSpace(fieldMessage))
            throw new ArgumentException("Empty field message");

        // appending error to existing one, if field already contains a message
        var existingFieldError = FieldErrors.FirstOrDefault(e => e.FieldName.Equals(fieldName));
        if (existingFieldError == null)
            FieldErrors.Add(new FieldError {FieldName = fieldName, FieldMessage = fieldMessage});
        else
            existingFieldError.FieldMessage = $"{existingFieldError.FieldMessage}. {fieldMessage}";

        IsError = true;
    }

    public void AddEmptyFieldError(string fieldName, string contextInfo = null)
    {
        AddFieldError(fieldName, $"No value provided for field. Context info: {contextInfo}");
    }
}

public class ValidationResult : ValidationResult<object>
{

} 
```

2)无论操作成功与否，**服务层**都会返回s。`ValidationResult`例如：

```
 public ValidationResult DoSomeAction(RequestFilters filters)
    {
        var ret = new ValidationResult();

        if (filters.SomeProp1 == null) ret.AddEmptyFieldError(nameof(filters.SomeProp1));
        if (filters.SomeOtherProp2 == null) ret.AddFieldError(nameof(filters.SomeOtherProp2 ), $"Failed to parse {filters.SomeOtherProp2} into integer list");

        if (filters.MinProp == null) ret.AddEmptyFieldError(nameof(filters.MinProp));
        if (filters.MaxProp == null) ret.AddEmptyFieldError(nameof(filters.MaxProp));

        // validation affecting multiple input parameters
        if (filters.MinProp > filters.MaxProp)
        {
            ret.AddFieldError(nameof(filters.MinProp, "Min prop cannot be greater than max prop"));
            ret.AddFieldError(nameof(filters.MaxProp, "Check"));
        }

        // also specify a global error message, if we have at least one error
        if (ret.IsError)
        {
            ret.Message = "Failed to perform DoSomeAction";
            return ret;
        }

        ret.Message = "Successfully performed DoSomeAction";
        return ret;
    } 
```

3) **API Controller**将根据服务函数结果构造响应

一种选择是将几乎所有参数作为可选参数并执行自定义验证，从而返回更有意义的响应。另外，我注意不要让任何异常超出服务边界。

```
 [Route("DoSomeAction")]
    [HttpPost]
    public HttpResponseMessage DoSomeAction(int? someProp1 = null, string someOtherProp2 = null, int? minProp = null, int? maxProp = null)
    {
        try
        {
            var filters = new RequestFilters 
            {
                SomeProp1 = someProp1 ,
                SomeOtherProp2 = someOtherProp2.TrySplitIntegerList() ,
                MinProp = minProp, 
                MaxProp = maxProp
            };

            var result = theService.DoSomeAction(filters);
            return !result.IsError ? Request.CreateResponse(HttpStatusCode.OK, result) : Request.CreateResponse(HttpStatusCode.BadRequest, result);
        }
        catch (Exception exc)
        {
            Logger.Log(LogLevel.Error, exc, "Failed to DoSomeAction");
            return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, new HttpError("Failed to DoSomeAction - internal error"));
        }
    } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-08-04T15:03:14.740

使用内置的“InternalServerError”方法（在 ApiController 中可用）：

```
return InternalServerError();
//or...
return InternalServerError(new YourException("your message")); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-10T07:51:29.200

只是为了更新 ASP.NET WebAPI 的当前状态。现在调用接口`IActionResult`并且实现没有太大变化：

```
[JsonObject(IsReference = true)]
public class DuplicateEntityException : IActionResult
{        
    public DuplicateEntityException(object duplicateEntity, object entityId)
    {
        this.EntityType = duplicateEntity.GetType().Name;
        this.EntityId = entityId;
    }

    /// <summary>
    ///     Id of the duplicate (new) entity
    /// </summary>
    public object EntityId { get; set; }

    /// <summary>
    ///     Type of the duplicate (new) entity
    /// </summary>
    public string EntityType { get; set; }

    public Task ExecuteResultAsync(ActionContext context)
    {
        var message = new StringContent($"{this.EntityType ?? "Entity"} with id {this.EntityId ?? "(no id)"} already exist in the database");

        var response = new HttpResponseMessage(HttpStatusCode.Ambiguous) { Content = message };

        return Task.FromResult(response);
    }

    #endregion
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-12-17T18:29:23.807

试试这个

```
[HttpPost]
public async Task<ActionResult<User>> PostUser(int UserTypeId, User user)
{
  if (somethingFails)
  {
    // Return the error message like this.
    return new BadRequestObjectResult(new
    {
      message = "Something is not working here"
    });
  }

  return ok();
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2016-01-19T10:41:54.863

对于那些 modelstate.isvalid 为 false 的错误，我通常会在代码抛出错误时发送错误。对于使用我的服务的开发人员来说，这很容易理解。我通常使用以下代码发送结果。

```
 if(!ModelState.IsValid) {
                List<string> errorlist=new List<string>();
                foreach (var value in ModelState.Values)
                {
                    foreach(var error in value.Errors)
                    errorlist.Add( error.Exception.ToString());
                    //errorlist.Add(value.Errors);
                }
                HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.BadRequest,errorlist);} 
```

这会以以下格式将错误发送给客户端，该格式基本上是错误列表：

```
 [  
    "Newtonsoft.Json.JsonReaderException: **Could not convert string to integer: abc. Path 'Country',** line 6, position 16.\r\n   
at Newtonsoft.Json.JsonReader.ReadAsInt32Internal()\r\n   
at Newtonsoft.Json.JsonTextReader.ReadAsInt32()\r\n   
at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadForType(JsonReader reader, JsonContract contract, Boolean hasConverter, Boolean inArray)\r\n   
at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)",

       "Newtonsoft.Json.JsonReaderException: **Could not convert string to integer: ab. Path 'State'**, line 7, position 13.\r\n   
at Newtonsoft.Json.JsonReader.ReadAsInt32Internal()\r\n   
at Newtonsoft.Json.JsonTextReader.ReadAsInt32()\r\n   
at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadForType(JsonReader reader, JsonContract contract, Boolean hasConverter, Boolean inArray)\r\n   
at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)"
    ] 
```

# django - Django：连接到数据库抛出自定义驱动程序

> ID：10732647
> 
> 赞同：0
> 
> 时间：2012-05-24T07:00:23.327
> 
> 标签：django, apache, mongodb

我有使用 PostgreSQL 作为主要后端的 Django 项目：

```
settings.py

DATABASES = {
    'default': {
        # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3, 'oracle'.
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        ...
    },
} 
```

但我在我的应用程序中也有与 MongoDB 的自定义连接：

```
mongo_connection.py

from pymongo import Connection
from pymongo.errors import ConnectionFailure
from django.db import connections

try:  
    connection = Connection(host="127.0.0.1", port=27017)
    db = connection[db_name]
    print "Connected successfully(Mongo, %s)" % (db_name,)
except ConnectionFailure, e:
    sys.stderr.write("Could not connect to MongoDB: %s" % e)
    sys.exit(1) 
```

在生产服务器上，我在 Apache 的 error.log 中注意到一件事：

```
[Wed May 23 05:05:39 2012] [error] Connected successfully(Mongo, galio)
[Wed May 23 05:07:16 2012] [error] Connected successfully(Mongo, galio)
[Wed May 23 06:41:51 2012] [error] Connected successfully(Mongo, galio)
[Wed May 23 06:42:21 2012] [error] Connected successfully(Mongo, galio)
...
[Wed May 23 19:26:45 2012] [error] Connected successfully(Mongo, galio)
[Wed May 23 19:26:48 2012] [error] Connected successfully(Mongo, galio)
[Wed May 23 22:20:44 2012] [error] Connected successfully(Mongo, galio)
[Wed May 23 22:20:48 2012] [error] Connected successfully(Mongo, galio)
[Thu May 24 00:12:45 2012] [error] Connected successfully(Mongo, galio) 
```

这意味着 Apache 偶尔会重新导入模块（对吗？）。我有两个问题：

1）这种行为对于生产服务器是否正常？2) 放置自定义连接的最佳位置在哪里？可能我应该将此代码移动到 settings.py 吗？

PS Apache 配置

```
/etc/apache2/sites-available/default

<VirtualHost *:80> 
    ServerAdmin it@asdf.as 
    ServerName ... 
    ServerAlias ... 
    DocumentRoot /var/www/ 
    LogLevel warn 
    WSGIDaemonProcess www-data processes=2 maximum-requests=500 threads=1
    WSGIProcessGroup www-data 
    WSGIScriptAlias / /home/disk/galio/galio/apache/django.wsgi 
    Alias /media /var/www/media/ 
</VirtualHost> 
```

# c# - 在不回发的情况下更新更新面板

> ID：10732648
> 
> 赞同：1
> 
> 时间：2012-05-24T07:00:26.167
> 
> 标签：c#, asp.net, updatepanel, dopostback

我在一个表中有两列，下拉“ddlModelNumber”取决于“ddlServicerOrg”的选定值。'ddlServicerOrg' 中的数据非常大，所以我不希望每次更改所选项目时都会渲染它。我想根据 'ddlServicerOrg' 中的选定值将数据加载到 'ddlModelNumber' 中，**而不使用 jquery:ajax**。所以，是 **OnChange="_doPostBack('pnlModel','');"** 正确的方法？我不希望为“ddlServicerOrg”一次又一次地渲染大量数据。下面是代码。

```
 <td>
                    <asp:DropDownList ID="ddlServicerOrg" runat="server" DataTextField="ListText" DataValueField="ID"
                        OnInit="ddlServicerOrg_Init" OnDataBound="ddlServicerOrg_DataBound" OnSelectedIndexChanged="ddlServicerOrg_IndexChanged"
                        AutoPostBack="false" AppendDataBoundItems="True" DataSourceID="ServiceLocationOrgODS" OnChange="_doPostBack('pnlModel','');">
                        <asp:ListItem></asp:ListItem>
                    </asp:DropDownList>
                </td>
                <td>
                <asp:UpdatePanel ID="pnlModel" runat="server">
                <ContentTemplate>
                    <asp:DropDownList ID="ddlModelNumber" runat="server" AutoPostBack="false" DataSource='<%# GetServicedModelforServicePartner() %>'
                        DataTextField="Text" DataValueField="Value" AppendDataBoundItems="True" OnInit="ddlModelNumber_Init" OnDataBound="ddlModelNumber_DataBound" Enabled="false">
                        <asp:ListItem></asp:ListItem>
                    </asp:DropDownList>
                    </ContentTemplate>
                    </asp:UpdatePanel>
                </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:39:38.537

你可以用一些 JavaScript 来做到这一点。您可以让组合框的 selectedIndexChanged 将值写入其中的隐藏字段并更新第二个组合框所在的面板。然后强制该面板上的 ajax 回发以更新第二个组合框的内容。一种简单的方法是让您的组合框 selectedindexchanged 事件单击包含第二个组合框的面板中的隐藏按钮。

[http://keylimetie.com/blog/2007/12/3/how-to-make-an-ajax-postback-with-javascript/](http://keylimetie.com/blog/2007/12/3/how-to-make-an-ajax-postback-with-javascript/)

该链接可以作为做你想做的事的指南。

# wordpress - wordpress 简码格式问题

> ID：10732655
> 
> 赞同：0
> 
> 时间：2012-05-24T07:01:08.893
> 
> 标签：wordpress, shortcode

我为我的 wordpress 插件创建了一个简码，并将简码放在 wordpress 页面内容中的两个句子之间。但是pugin部分底部显示的两句话。可能是问题吗？

我将简码放置为，

我的插件

[插入]

新的wordpress插件...

但是插件中的Html内容显示在顶部。然后底部的“我的插件”和“新的wordpress插件...”部分。我在“我的插件”和短代码之间尝试了一个“br”标签。但是“我的插件”始终显示在短代码部分下。在 HTML 代码和 css 中未发现错误。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:24:22.753

我假设您在短代码中使用了 echo 。

永远不要在你的

前任：

坏路

```
function headbox() {
if (is_home()) {
    echo '<div id="headbox">';
    echo '<h1>Test</h1>';
    echo '</div>';
    }
}
add_action('thesis_hook_header', 'headbox'); 
```

使用返回的正确方式

```
function headbox() {
if (is_home()) {
    $foo = '<div id="headbox">';
    $foo .= '<h1>Test</h1>';
    $foo .= '</div>';
        return $foo;
    }
}
add_action('thesis_hook_header', 'headbox'); 
```

# iphone - 当应用 NSLog 时，UILabel 没有在日志上给出文本。？

> ID：10732656
> 
> 赞同：0
> 
> 时间：2012-05-24T07:01:09.957
> 
> 标签：iphone, objective-c, ios, uilabel

我的代码如下，它不工作。如果您发现其中有任何错误，请告诉我。

```
 name=@"Hello";
 label.backgroundColor=[UIColor clearColor];
 label.frame=CGRectMake(80, 23, 170, 20);
 label.textAlignment=UITextAlignmentCenter;
 label.textColor=[UIColor whiteColor];
 label.font=[UIFont boldSystemFontOfSize:12];

 [label setText:[NSString stringWithFormat:@"Welcome, %@",name]];

  NSLog(@"label text in view did load method %@",label.text); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T07:08:38.667

尝试先分配 UILabel 然后它可能会工作..

在代码上方添加以下行

```
lable=[[UILabel alloc]init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:09:01.370

确保您正在创建**label**的实例：

```
UILabel * label = [[UILabel alloc] initWithFrame:CGRectZero]; 
```

即使您在标题中定义了**标签**并不意味着您正在初始化它。在设置标签的属性之前使用上述语句，然后您将看到您期望的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:12:55.030

```
 UILabel *label=[[UILabel alloc]init];
    NSString  *name=@"Hello";
    label.backgroundColor=[UIColor clearColor];
    label.frame=CGRectMake(80, 23, 170, 20);
    label.textAlignment=UITextAlignmentCenter;
    label.textColor=[UIColor whiteColor];
    label.font=[UIFont boldSystemFontOfSize:12];
    [label setText:[NSString stringWithFormat:@"Welcome, %@",name]];
    [self.view addSubview:label];

    NSLog(@"label text in view did load method %@",label.text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:34:18.540

试试这个

```
UILabel * label = [[UILabel alloc] init]; 
```

# c++ - 注释或引用时如何忽略分隔符

> ID：10732664
> 
> 赞同：4
> 
> 时间：2012-05-24T07:02:21.470
> 
> 标签：c++, boost, boost-spirit

我编写了一个解析器来查找字符串连接表达式。我有一系列用括号括起来的字符串，主要来自函数调用。

例如，`("one"+"two"+"three") -> ("one"|"two"|"three")`是一个简单的案例，我可以处理它。

一个更困难的情况是`(null, "one"+"two"+"three", null) -> (null, "one"|"two"|"three", null)`，但我可以用`boost::tokenizer`.

`(null, "one"+"two"+"three,four", 1 /* third parameter can be: 1, 2, 3 */)`，在这样一个困难的例子中，我建议解析，`boost::spirit`但我需要帮助来编写一些规则。

**之后：**

似乎`escaped_list_separator`是`boost::tokenizer`我需要的。但我有一个问题：

```
 using namespace std;
   using namespace boost;
   string s = "Field 1,\"putting quotes around fields, allows commas\",Field 3";
   tokenizer<escaped_list_separator<char> > tok(s,escaped_list_separator<char>("", ",", "\""));
   for(tokenizer<escaped_list_separator<char> >::iterator beg=tok.begin(); beg!=tok.end();++beg){
       cout <<"~~~"<< *beg << "\n";
   } 
```

为我删除`"`。可以像这样在输出中保留引号

```
Field 1
"putting quotes around fields, allows commas"
Field 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:55:28.357

基本上，您可以使用`operator-`字符集匹配：

```
 rule = '"' >> (char_ - '"') >> '"'; 
```

另请查看`operator ~`反转字符集。

如果您也有兴趣在引号内转义引号，并且可能同时评论样式，我建议您在此处查看我的答案：

*   [如何使我的拆分仅在一条真实行上工作并能够跳过字符串的引用部分？](https://stackoverflow.com/questions/7436481/how-to-make-my-split-work-only-on-one-real-line-and-be-capable-to-skeep-quoted-p/7462539#7462539)

在 CSV 文件中显示（部分）引用的单元格，包括字符串中的转义引号。

其他感兴趣的项目：

*   [获取找到给定选项的INI文件行号的跨平台方法](https://stackoverflow.com/questions/8358975/cross-platform-way-to-get-line-number-of-an-ini-file-where-given-option-was-foun/8365427#8365427)

    忽略评论中的内容并转义评论分隔符

*   [使用 boost::spirit 解析引用的字符串](https://stackoverflow.com/questions/10289985/parse-quoted-strings-with-boostspirit/10294577#10294577)

    显示各种样式的引号字符串解析，包括嵌入的转义引号。

# mysql - 需要帮助优化 SQL 查询

> ID：10732668
> 
> 赞同：0
> 
> 时间：2012-05-24T07:02:42.453
> 
> 标签：mysql, sql

我想查看所有关注我或其他用户的用户。

我已经使用了 3 张桌子

**用户**

*   ID
*   用户名

**用户关注**

*   ID
*   用户身份
*   follow_id
*   日期

**图片**

*   ID
*   用户身份
*   图片

我试图获取上传最后一张图片的用户名，并且我需要**我**和关注者的状态来查看我是否已经关注他们。

我的查询写在 Mysql 上：

```
SELECT 
          u.id AS user_id,
          u.username,
          i.image,
          t.id AS STATUS 
FROM
          users AS u 
          INNER JOIN (user_follow AS f) 
                    ON (u.id = f.user_id) 
          LEFT OUTER JOIN images i 
                    ON i.id = 
                    (SELECT 
                              b.id 
                    FROM
                              images AS b 
                    WHERE f.user_id = b.user_id 
                    ORDER BY b.id DESC 
                    LIMIT 1) 
          LEFT OUTER JOIN user_follow t 
                    ON t.id = 
                    (SELECT 
                              m.id 
                    FROM
                              user_follow m 
                    WHERE user_id = 3 
                              AND follow_id = u.id) 
WHERE f.follow_id = 7 
          AND f.user_id NOT IN (7, 3) 
GROUP BY f.user_id 
```

我的用户 ID - 3；我观察使用 id - 7 关注用户的用户

输出是：

```
Array
(
    [0] => Array
        (
            [user_id] => 6
            [username] => 6666
            [image] => flw3utn9igiqh7dtt2o61ydf8_174.jpeg
            [status] => 226
        )

) 
```

我认为我的查询太高了，我不知道如何简单地检查状态并输出 1 或 0 。现在，如果“关注”，我会得到一个关注行 ID，如果没有，则为空。如果您向我展示如何优化我的查询，我也会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:06:52.967

UVP - 正在查看页面的用户。FBV - 正在查看其个人资料\关注者列表的用户。如果 UVP 未遵循 FBV ，则以下查询的最后一列将给出*0 ，否则为**1*。优化查询将很困难 1）您想要 col 中的行数据（转置）{ first LOJ} 2）您有 2 个表，其中数据可能存在也可能不存在 {next 2 LOJ}

```
 select *,(case when (uf3.id is not null) then 'follow' else null end) aa 
  from users u  
    left outer join 
                (Select * from 
                 user_follow 
                 where user_id = <FVP>
                 and follow_id =<UVP>) uf3 on uf3.user_id = u.id  
    left outer join 
            (select * from images where user_id = <FBV> ORDER BY id DESC 
                LIMIT 1) i
     on i.user_id = u.id 
    left outer join 
                (Select * 
                 from user_follow 
                 where user_id =<FVP>  
                 and follow_id !=<UVP>)  uf  on uf.user_id = u.id  
    where u.id =<FBV>; 
```

# c# - 为什么我的变量仍然“未初始化”？

> ID：10732670
> 
> 赞同：6
> 
> 时间：2012-05-24T07:02:47.007
> 
> 标签：c#

```
string foo;
try
{
    foo = "test"; // yeah, i know ...
}
catch // yeah, i know this one too :)
{
    foo = null;
}
finally
{
    Console.WriteLine(foo); // argh ... @#!
}
Console.WriteLine(foo); // but nothing to complain about here 
```

此外，它不是 BP（捕捉路由）——但这是我能得到的最好的隔离。
但是我收到很好的波浪告诉我“危险，危险 - 可能未初始化”。怎么会？

**编辑：**
请不要建议“简单地`string foo = string.Empty;`在'声明'处放一个”。我想申报，但请按时完成任务！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:13:56.863

C# 规范（5.3.3.14）的一些背景：

> 对于以下形式的 try 语句 stmt：
> 
> 尝试 try-block finally finally-block
> 
> (...)
> 
> finally-block开头的v的确定赋值状态与stmt开头的v的确定赋值状态相同。

编辑 Try-Catch-Finally（5.3.3.15）：

> 对 try-catch-finally 语句 (...) 进行明确的赋值分析，就像该语句是包含 try-catch 语句的 try-finally 语句一样
> 
> 以下示例演示了 try 语句（第 8.10 节）的不同块如何影响明确赋值。

```
class A
{
  static void F() 
  {
    int i, j;
    try {
      goto LABEL;
      // neither i nor j definitely assigned
      i = 1;
      // i definitely assigned
    }
    catch {
      // neither i nor j definitely assigned
      i = 3;
      // i definitely assigned
    }
    finally {
      // neither i nor j definitely assigned
      j = 5;
      // j definitely assigned
    }
    // i and j definitely assigned
    LABEL:;
    // j definitely assigned
  }
} 
```

我只是想到了一个更好地说明问题的例子：

```
int i;
try
{
    i = int.Parse("a");
}
catch
{
    i = int.Parse("b");
}
finally
{
   Console.Write(i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:05:03.700

您必须 `string foo = null`根据需要将第一行更改为或初始化。就编译器而言，在 foo 在 try 块中初始化之前可能会出现异常，并且 catch 也可能不会发生。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T07:37:45.007

我认为问题可能在于存在*和*抛出异常`try`的情况。`catch`在这种情况下，`finally`仍应达到 ，但使用未初始化的`foo`. 由于在这种情况下，将无法访问其余代码（在`catch`块中引发的异常将我们带出 . 之后的方法`finally`），这不会对`finally`. 只有在`try`或`catch`块运行时才能访问该代码。

由于总是存在每次分配都会`foo`引发异常的情况，并且在这种情况下，`finally`块将始终运行，因此始终`foo`存在未初始化的可能性。

据我所知，解决此问题的唯一方法是为`foo`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T07:20:52.053

在课堂上声明你`string foo`会解决问题

**编辑：**或

```
string foo = "default";
try
{
    foo = "test"; 
}
catch (Exception) 
{
    foo = null;
}
finally
{
    Console.WriteLine(foo); 
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-24T07:04:28.757

尝试

```
string foo = string.Empty; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-24T07:05:22.220

试试这个：

```
string foo = null;
try
{
    foo = "test"; // yeah, i know ...
}
catch // yeah, i know this one too :)
{
}
finally
{
    Console.WriteLine(foo); // argh ... @#!
}
Console.WriteLine(foo); // but nothing to complain about here 
```

# oracle - oracle中的select语句

> ID：10732673
> 
> 赞同：1
> 
> 时间：2012-05-24T07:02:52.280
> 
> 标签：oracle, select

我需要从表中选择 50 个字段。但是第20个字段必须除以100。如果不是这样，我可以简单地写select * from table。在这种情况下，我如何选择而不必编写所有列。

明确提及所有列是一个好习惯，但是当我想快速查看数据以进行简短分析时，我更喜欢 select *(1-19 fields) , 20th field/100 , *(21- 50 个字段）来自表。

这在oracle中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:01:32.270

开发 SQL 的最佳工具之一是具有列编辑模式的体面的文本编辑器。SQL Developer 有一个增强请求来提供此功能，但同时 Notepad++ 是一个不错的选择。

对于这样的任务，您可以通过表或视图的 DESC 获取列名，使用基于列的编辑器添加对齐的逗号，并修改您需要的一列。

如果您需要例如对大多数列应用计数并添加列名称，它也很方便。

下面的示例花费了大约 45 秒：

```
select
          OWNER                                                        ,
          count(TABLE_NAME               ) c_TABLE_NAME                ,
          count(TABLESPACE_NAME          ) c_TABLESPACE_NAME           ,
          count(CLUSTER_NAME             ) c_CLUSTER_NAME              ,
          count(IOT_NAME                 ) c_IOT_NAME                  ,
          count(STATUS                   ) c_STATUS                    ,
          count(PCT_FREE                 ) c_PCT_FREE                  ,
          count(PCT_USED                 ) c_PCT_USED                  ,
          count(INI_TRANS                ) c_INI_TRANS                 ,
          count(MAX_TRANS                ) c_MAX_TRANS                 ,
          count(INITIAL_EXTENT           ) c_INITIAL_EXTENT            ,
          count(NEXT_EXTENT              ) c_NEXT_EXTENT               ,
          count(MIN_EXTENTS              ) c_MIN_EXTENTS               ,
          count(MAX_EXTENTS              ) c_MAX_EXTENTS               ,
          count(PCT_INCREASE             ) c_PCT_INCREASE              ,
          count(FREELISTS                ) c_FREELISTS                 ,
          count(FREELIST_GROUPS          ) c_FREELIST_GROUPS           ,
          count(LOGGING                  ) c_LOGGING                   ,
          count(BACKED_UP                ) c_BACKED_UP                 ,
          count(NUM_ROWS                 ) c_NUM_ROWS                  ,
          count(BLOCKS                   ) c_BLOCKS                    ,
          count(EMPTY_BLOCKS             ) c_EMPTY_BLOCKS              ,
          count(AVG_SPACE                ) c_AVG_SPACE                 ,
          count(CHAIN_CNT                ) c_CHAIN_CNT                 ,
          count(AVG_ROW_LEN              ) c_AVG_ROW_LEN               ,
          count(AVG_SPACE_FREELIST_BLOCKS) c_AVG_SPACE_FREELIST_BLOCKS ,
          count(NUM_FREELIST_BLOCKS      ) c_NUM_FREELIST_BLOCKS       ,
          count(DEGREE                   ) c_DEGREE                    ,
          count(INSTANCES                ) c_INSTANCES                 ,
          count(CACHE                    ) c_CACHE                     ,
          count(TABLE_LOCK               ) c_TABLE_LOCK                ,
          count(SAMPLE_SIZE              ) c_SAMPLE_SIZE               ,
          count(LAST_ANALYZED            ) c_LAST_ANALYZED             ,
          count(PARTITIONED              ) c_PARTITIONED               ,
          count(IOT_TYPE                 ) c_IOT_TYPE                  ,
          count(TEMPORARY                ) c_TEMPORARY                 ,
          count(SECONDARY                ) c_SECONDARY                 ,
          count(NESTED                   ) c_NESTED                    ,
          count(BUFFER_POOL              ) c_BUFFER_POOL               ,
          count(ROW_MOVEMENT             ) c_ROW_MOVEMENT              ,
          count(GLOBAL_STATS             ) c_GLOBAL_STATS              ,
          count(USER_STATS               ) c_USER_STATS                ,
          count(DURATION                 ) c_DURATION                  ,
          count(SKIP_CORRUPT             ) c_SKIP_CORRUPT              ,
          count(MONITORING               ) c_MONITORING                ,
          count(CLUSTER_OWNER            ) c_CLUSTER_OWNER             ,
          count(DEPENDENCIES             ) c_DEPENDENCIES              ,
          count(COMPRESSION              ) c_COMPRESSION               ,
          count(DROPPED                  ) c_DROPPED
from     dba_tables
group by owner 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:11:59.813

不，如果输入所有列的工作量太大，请使用 SQLDEVELOPER 之类的工具，它允许您将表拖到编辑区域并为您提供完整的选择语句。

此外，最好明确说明列名。如果由于某种原因表更改并且删除了列，您的查询将停止工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:42:01.473

数据字典是你的朋友：

```
select column_name || ','
from all_tab_columns
where table_name = 'SOME_TABLE'
and owner = 'SOME_OWNER'
order by column_id; 
```

在您的 IDE 中运行它并将结果复制/粘贴到您的代码中。当然根据需要进行修改以满足您的输出需求。

不要偷懒，我知道说选择 * 很诱人，但是明确指定列要好得多。与手动写出每一列相比，上面的代码将减少痛苦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T07:04:12.720

您当然不希望在您希望显式列出列名的生产代码中执行此操作。您可能希望将计算放在一个函数中，或者将整个查询放在一个视图中。但是如果你只是做一些快速的分析，你可以很容易地将计算列放在列列表的开头（或结尾），如下所示

```
SELECT column20/100 computed_col20, a.*
  FROM table_name a 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T07:10:08.753

您可以只写每列的名称，并在第 20 列写“column/20”。可能看起来工作量很大，但我没有看到任何其他方式。

# nginx - Gunicorn 和 Nginx 的区别

> ID：10732675
> 
> 赞同：20
> 
> 时间：2012-05-24T07:03:01.363
> 
> 标签：nginx, gunicorn

这是一个初学者问题，但我无法理解 Gunicorn 和 Nginx 之间的抽象。我不是在寻找详细的答案，只是在高层次上，每个角色扮演什么角色？他们如何互动？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T05:59:08.403

根据[Gunicorn 的部署文档](http://gunicorn.org/deploy.html)，我的理解是您使用 Nginx 作为 Gunicorn 的代理服务器。

由于 Gunicorn 是从[Ruby 的 Unicorn](http://unicorn.bogomips.org/)移植的，我假设 Unicorn 的限制和规范也适用于 Gunicorn：

> Unicorn 是用于 Rack 应用程序的 HTTP 服务器，旨在仅在低延迟、高带宽连接上为快速客户端提供服务，并利用 Unix/类 Unix 内核中的功能。只能通过在 Unicorn 和慢速客户端之间放置能够完全缓冲请求和响应的反向代理来为慢速客户端提供服务。

[Gunicorn 的部署文档](http://gunicorn.org/deploy.html)说了很多同样的话：

> 尽管有许多 HTTP 代理可用，但我们强烈建议您使用 Nginx。如果您选择另一个代理服务器，则需要确保在使用默认 Gunicorn 工作程序时它缓冲慢速客户端。如果没有这种缓冲，Gunicorn 将很容易受到拒绝服务攻击。

因此，Gunicorn 服务于快速、低延迟的高带宽客户端，而 Nginx 服务于其余的客户端。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-10-20T11:12:12.270

> Nginx 是一个 Web 服务器和反向代理，负责提供静态内容、gzip 压缩、ssl、proxy_buffers 和其他 HTTP 内容，而 gunicorn 是一个 Python HTTP 服务器，它与 nginx 和您的实际 Python Web 应用程序代码交互以提供动态内容。
> 
> 这是 HTTP 请求生命周期的高级概述，突出了它们的角色。我假设您有一台服务器运行一个包含三个主要进程的简单应用程序。
> 
> **Nginx**：在端口 80 上侦听来自 Internet 的传入 HTTP 请求。
> 
> **Gunicorn**：在另一个端口（8000 是流行的端口）上侦听来自 Nginx 的 HTTP 请求。Gunicorn 配置了您的 python web 应用程序。

# android - 如何在 android listview 中设置页脚以动态拉伸到底部？

> ID：10732676
> 
> 赞同：4
> 
> 时间：2012-05-24T07:03:03.857
> 
> 标签：android, listview, footer

我已经搜索过，但不幸的是没有找到真正的解决方案。我在列表视图中添加了一个页脚：

```
View footer = getLayoutInflater().inflate(R.layout.listfooter, null);
listview.addFooterView(footer); 
```

页脚的 xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/footer"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:textColor="#FFFFFFFF"
android:orientation="vertical"
android:layout_alignParentBottom="true"
android:background="#ee222222"
>

    <TextView
    android:id="@+id/info"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:text="Test Test Test"
    android:layout_alignParentBottom="true"
    android:layout_gravity="center_vertical"
    />

</LinearLayout> 
```

它确实仅将页脚显示为单行

我动态更改列表中的行数，但如果其中没有足够的项目，我希望页脚始终填充列表视图的其余部分。

我怎样才能做到这一点？

编辑：我添加了一张图片，左边是现在的样子，右边的 2 是我想要的。

[![](../Images/50818c15d2cfe9658df06f459e749a14.png)](https://i.stack.imgur.com/todvF.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:36:24.587

我可以说最好的解决方案可以是这个问题。

1) 创建一个 XML 布局，它必须具有这样的层次结构。

```
 <Liniear Layout>
  <ScrollView>
     <LinearLayout>
     <ListView>// add your list data here.

     <\ListView>
     <TextView><TextView>// for footer text

     <\LinearLayout>  
   <ScrollView>
 <LinearLayout> 
```

如果有什么问题，请告诉我，我希望这种方法能像我自己尝试过的那样奏效。

# c# - 如何缩进datagridview中的特定行

> ID：10732677
> 
> 赞同：0
> 
> 时间：2012-05-24T07:03:09.580
> 
> 标签：c#, asp.net

我有一个gridview，并且我正在动态创建它，我获取父表和子表记录并将数据绑定到单个数据网格视图。我需要将来自子表的行向右缩进一点，以便我可以将记录与父记录区分开来。

```
private void CreateDynamicGridView(DataTable tables, GridView gv)
    {
        try
        {
            DataTable _dtSearchList = tables;
            strColumnCount = _dtSearchList.Columns.Count.ToString();                
                foreach (DataColumn col in _dtSearchList.Columns)
                {
                    BoundField bfield = new BoundField();
                    bfield.DataField = col.ColumnName;
                    bfield.HeaderText = col.ColumnName;
                    gv.Columns.Add(bfield);
                }
                gv.DataSource = _dtSearchList;
                gv.DataBind();                

        }
        catch (Exception ex)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T04:48:09.347

我做了如下，

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{   
if (e.Row.RowType == DataControlRowType.DataRow)
{
     if (e.Row.Cells[0].Text.IndexOf('Child') > 0){
           e.Row.Cells[0].Style.Add("padding-left", "16px");
     }
}
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T07:27:56.513

你能把它插入下一列吗？

```
gv.Colums.Insert(2, col.ColumnName); 
```

# rest - 你如何处理一个动作（动词），它会通过 REST 导致多个可能的状态变化

> ID：10732682
> 
> 赞同：0
> 
> 时间：2012-05-24T07:03:23.907
> 
> 标签：rest

该场景是基于回合的 rpg REST 服务。大多数游戏都可以建模为超媒体资源，但是我在一个特定的用例上遇到了麻烦。化身想要攻击怪物。您不能让客户端生成最终状态，为了防止作弊，服务器需要确定是未命中还是命中，如果命中，要减去多少生命值。我们还需要可靠性和重复数据删除。

发布的基本网址：

```
Req:
GET /game
Res:
HTTP/1.1 200
<world>
 <link rel="avatars" href="/avatars"/>
 <link rel="monsters" href="/monsters"/>
</world>
<link rel="actions" href="/actionqueue"/> 
```

跳过明显的头像和怪物收藏列表。

```
Req:
GET /avatars/1
Res:
HTTP/1.1 200
<avatar>
 <name>Puck</name>
 <health>high</health>
 <link rel="weapon" href="/weapon/3">dagger</link>
</avatar>

Req:
GET /monsters/2
Res:
HTTP/1.1 200
<monster>
 <type>snake</type>
 <health>high</health>
 <state>angry</state>
</monster> 
```

获取服务器生成的唯一资源，我们不关心在丢失消息的情况下进行复制。

```
Req:
POST /actionqueue
<action/>
Res:
HTTP/1.1 201
Location:/actionqueue/1234 
```

我们的幂等动作方法。

```
Req:
PUT /actionqueue/1234
<action>
 <type>attack</type>
 <source>
  <avatar>1</avatar>
 </source>
 <target>
  <monster>2</monster>
 </target>
</action>
Res:
HTTP/1.1 200
<outcome>
 <status>success</status>
 <updated>
  <link rel="monster" href="/monsters/2"/>
 </updated>
</outcome> 
```

所以这里的问题是关于攻击动作。这对我来说有点像 RPC，但你如何处理这样的事情？客户端无法提前知道状态更改，因此客户端必须向服务器发送“一些东西”以启动服务器决定的状态更改。有没有更好的技术？你还会认为这是一个 RESTful 设计吗？

# javascript - 带有 REST API 的可编辑 jQuery Grid 推荐

> ID：10732684
> 
> 赞同：7
> 
> 时间：2012-05-24T07:03:50.333
> 
> 标签：javascript, jquery, rest, jqgrid, grid

首先，我已经阅读了“ [jQuery Grid Recommendations](https://stackoverflow.com/questions/159025/jquery-grid-recommendations) ”这个问题，但它没有回答我的问题。

我有一个[带有 MongoDB 后端的小型 REST API](https://gist.github.com/2779820)：

获取所有设备：

```
GET /equipements HTTP/1.1
{{_id:key1, name:Test Document 1, plateforme:prod}, {_id:key2, name:Test Document 2, plateforme:prod}, ...} 
```

用钥匙获取设备：key1

```
GET /equipements/key1 HTTP/1.1
{"_id": "key1", "name": "Test Document 1", "plateforme": "prod"} 
```

添加新设备

```
PUT /equipements HTTP/1.1  {"_id": "key8", "name": "Test Document 3", "plateforme": "prod"}
HTTP/1.0 200 OK 
```

现在，我需要找到一种简单的方法来允许 lambda 用户*添加/查看/删除*设备。所以我认为带有类似 UI 的 jQuery 的 Web 界面是最好的。我[尝试](https://gist.github.com/2779912) 使用[Sencha Rest Proxy](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/restful/restful.html)，但我不知道 javascript，我无法调整示例。

**如何为我的 REST 后端修复我的 javascript？**

和/或

**你能推荐一个更简单的 Sencha Rest Proxy 替代品吗？**（适用于我的 REST 后端）

**答案：** jqGrid

和/或

**你会推荐我什么 jQuery Grid？**（适用于我的 REST 后端）

**答案：** jqGrid

**最后一个问题**：为什么我的单元格不能通过双击进行编辑？

*附录*

服务器端（编辑：添加方法 POST）

```
#!/usr/bin/python
import json
import bottle
from bottle import static_file, route, run, request, abort, response
import simplejson
import pymongo
from pymongo import Connection
import datetime

class MongoEncoder(simplejson.JSONEncoder):
    def default(self, obj):
                # convert all iterables to lists
        if hasattr(obj, '__iter__'):
            return list(obj)
        # convert cursors to lists
        elif isinstance(obj, pymongo.cursor.Cursor):
            return list(obj)
        # convert ObjectId to string
        elif isinstance(obj, pymongo.objectid.ObjectId):
            return unicode(obj)
        # dereference DBRef
        elif isinstance(obj, pymongo.dbref.DBRef):
            return db.dereference(obj)
        # convert dates to strings
        elif isinstance(obj, datetime.datetime) or isinstance(obj, datetime.date) or isinstance(obj, datetime.time):
            return unicode(obj)
        return simplejson.JSONEncoder.default(self, obj)

connection = Connection('localhost', 27017)
db = connection.mydatabase

@route('/static/<filename:path>')
def send_static(filename):
    return static_file(filename, root='/home/igs/restlite/static')

@route('/')
def send_static():
    return static_file('index.html',root='/home/igs/restlite/static/')

@route('/equipements', method='PUT')
def put_equipement():
    data = request.body.readline()
    if not data:
        abort(400, 'No data received')
    entity = json.loads(data)
    if not entity.has_key('_id'):
        abort(400,'No _id specified')
    try:
        db['equipements'].save(entity)
    except ValidationError as ve:
        abort(400, str(ve))

@route('/equipements', method='POST')
def post_equipement():
    data = request.forms

    if not data:
        abort(400, 'No data received')
    entity = {}
    for k,v  in data.items():
        entity[k]=v

    if not entity.has_key('_id'):
        abort(400,'No _id specified')
    try:
        db['equipements'].save(entity)
    except ValidationError as ve:
        abort(400, str(ve))

@route('/equipements/:id', methodd='GET')
def get_equipement(id):
    entity = db['equipements'].find_one({'_id':id})
    if not entity:
        abort(404, 'No equipement with id %s' % id)
    return entity

@route('/equipements', methodd='GET')
def get_equipements():
    entity = db['equipements'].find({})
    if not entity:
        abort(404, 'No equipement')
    response.content_type = 'application/json'
    entries = [entry for entry in entity]
    return MongoEncoder().encode(entries)

run(host='0.0.0.0', port=80) 
```

编辑：JQGrid：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Rest Proxy Example</title>
    <link rel="stylesheet" type="text/css" href="/static/css/ui.jqgrid.css" />
    <link rel="stylesheet" type="text/css" href="/static/css/jquery-ui-1.8.20.custom.css" />

    <script type="text/javascript" src="/static/js/jquery.js"></script>
    <script type="text/javascript" src="/static/js/jquery.jqGrid.min.js"></script>
    <script type="text/javascript" src="/static/js/grid.locale-fr.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function(){
            var lastsel;

jQuery("#list2").jqGrid({
    url:'equipements',
    datatype: "json",
    colNames:['Id','Name', 'Plateforme'],
    colModel:[
        {name:'_id',index:'_id', width:50, editable:true},
        {name:'name',index:'_id', width:300, editable:true},
        {name:'plateforme',index:'total', width:200,align:"right", editable:true},
    ],
    rowNum:30,
    rowList:[10,20,30],
    pager:'pager2',
    sortname: '_id',
    viewrecords: true,
    width: 600,
    height: "100%",
    sortorder: "desc",
    onSelectRow: function(_id){
        if(_id && _id!==lastsel){
            jQuery('#liste2').jqGrid('restoreRow',lastsel);
            jQuery('#liste2').jqGrid('editRow',_id,true);
            lastsel=_id;
        }
    },
    jsonReader: {
        repeatitems: false,
        id: "_id",
        root: function (obj) { return obj; },
        records: function (obj) { return obj.length; },
        page: function (obj) { return 1; },
        total: function (obj) { return 1; }
    },
    editurl:'equipements',
    caption:"Equipements"
});
jQuery("#list2").jqGrid('navGrid','#pager2',{edit:true,add:true,del:true});
});
    </script>
</head>
<body>
    <table id="list2"></table>
    <div id="pager2"></div>
    <br />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T12:48:08.587

您可以使用 jqGrid 与您的 RESTfull 服务进行通信。jqGrid 支持树形编辑模式：单元格编辑、内联编辑和表单编辑。此外，内联编辑可以以不同的方式初始化。例如，可以调用内部的[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)方法`onSelectRow`或`ondblClickRow`回调或使用[navGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator#definition)在[导航](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator)器工具栏中添加“删除”按钮，并[使用inlineNav](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#inlinenav)添加“添加”和“编辑”按钮。另一种方法是使用[formatter: "actions"](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:predefined_formatter#predefined_format_types)在网格的一列中包含 "editing" 按钮。[您可以在官方 jqGrid 演示](http://trirand.com/blog/jqgrid/jqgrid.html)中找到所有方法。您可以在[答案](https://stackoverflow.com/a/7365228/315935)中找到更多技术实现细节。

我个人认为了解 Web 前端中使用 RESTfull 服务的另一个重要方面非常重要。问题是标准的 RESTfull API 没有任何用于数据排序、分页和过滤的标准接口。我试着解释下面的问题。在那之后，我希望*我的建议是明确的，即使用具有附加参数并提供排序、分页和过滤功能的附加方法来扩展当前的标准 RESTfull API*。

如果你有大数据集，这个问题很容易理解。例如，一次在网格中显示 10000 行数据是没有意义的。用户无法在不*缩放*或*分页*数据的情况下看到屏幕上的数据。此外，由于同样的原因，实现数据的*排序*甚至*过滤*是有意义的。因此，在开始时只显示一页数据并为用户提供一些数据分页界面更为实用。在jqGrid的标准[寻呼机中，看起来像](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:pager)

![在此处输入图像描述](../Images/ec58a56a47211afc26ebe7f699e05fb2.png)

用户可以转到“下一个”、“最后一个”、“上一个”或“第一个”页面或选择页面大小：

![在此处输入图像描述](../Images/1ac7e40bc22b463fe1979e1a27543afd.png)

此外，用户可以通过直接输入新页面并按下来指定所需的页面`Enter`：

![在此处输入图像描述](../Images/9046aefc4a3075f626e9ff35a761d316.png)

同样，用户可以单击任何列的标题以按列对网格数据进行排序：

![在此处输入图像描述](../Images/b608172ee589ee33d9918c55f3863cfa.png)

另一个非常重要的用户界面元素（从用户的角度来看很重要）可能是像这里这样的过滤界面[或像这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#calling_conventions)[这样](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching)的搜索界面。

我给你一个来自 jqGrid 的例子，但我发现这个问题很常见。**我想强调的是，RESTfull 服务没有为您提供对数据进行排序、分页和过滤的标准接口**。

在使用 jqGrid 的情况下，RESTfull url 将默认获取*附加*参数。它是: `page`，`rows`它指定将从服务中询问的页码和页面大小，`sidx`以及`sord`指定排序列和排序方向的参数，以及允许支持过滤的`_search`和`filters`（最后一个是[格式）。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)如果需要，可以使用[jqGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)的 prmNames 选项重命名参数。

我建议您阅读有关 URL 编码的问题[的答案。](https://stackoverflow.com/a/776699/315935)我认为该部分`_search=false&rows=20&page=1&sidx=&sord=asc`不属于资源，因此最好将信息作为*参数*而不是作为 URL 的一部分发送。

我在回答中主要想表达的是，纯经典 RESTfull API 的使用不足以实现良好的用户界面。您必须使用用于分页、排序和过滤的附加参数来扩展界面，否则您将无法创建高性能和用户友好的 Web GUI。

# java - 找不到android类

> ID：10732685
> 
> 赞同：0
> 
> 时间：2012-05-24T07:03:50.547
> 
> 标签：java, android

我目前在我的应用程序中面临这个问题。请帮帮我。活动在清单文件中注册，前面带有点，没有完整的包。SetContentView 已在我的活动中设置。还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:06:20.263

检查你的清单文件有::

```
<activity android:name ="com.bayview.tapfish.TapFishSplash" /> 
```

并检查您放置 TapFishSplash.java 的 PackageName。

# security - Web 服务器上的文件夹权限是否足够安全？

> ID：10732686
> 
> 赞同：1
> 
> 时间：2012-05-24T07:03:57.567
> 
> 标签：security, permissions

我正在开发一个项目，该项目使用一个充满平面文件数据库的文件夹。我想确保这些数据库只能被从服务器运行的脚本访问，所以我将文件夹权限设置为 700。

这会导致所有脚本正常运行，但每当我尝试访问浏览器中的数据库文件夹时都会出现 403 Forbidden。这很好。

但是，我想知道：我错过了什么吗？是否有任何方法（除了获得对我的 FTP 帐户的访问权限）让外部用户访问此文件夹？或者我可以安心休息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:09:08.020

正确的解决方案是将它们存储在文档根目录之外。如果您不能这样做，但知道将使用 Apache，`.htaccess`请在文件夹中创建一个包含以下内容的文件夹：

```
order deny, allow
deny from all 
```

根据环境，使用文件系统权限可能会或可能不会起作用 - 在完美的设置中，网络服务器将使用与拥有文件的系统用户相同的 uid。那么你的方法就行不通了。

# vb.net - 一个事务下的两个连接

> ID：10732687
> 
> 赞同：0
> 
> 时间：2012-05-24T07:03:58.243
> 
> 标签：vb.net, transactions, transactionscope

我搜索了一下，在用 SQL Server 2000 和 sybase 实现一个场景时遇到了一些困难。

1.  我在不同位置有两台 SQL 服务器，分别命名为 ServerA（MSSQL Server）和 ServerB（Sybase 服务器）。

2.  我有一张叫 SALARY 的桌子。

3.  每当我在 ServerA 中向客户 SALARY 插入一条记录时，我也会将它插入到 ServerB 中。

4.  如果它们中的任何一个失败，它们都应该被回滚。

5.  我正在使用带有 VB 的 Asp .Net 进行编程。

我无权更改/添加服务器 B 中的表。服务器 B 中唯一允许的是插入/删除/更新记录。

我环顾四周，找到了一种使用 TransactionScope 的方法，但我不太确定这是正确的方法。

参考：http: [//msdn.microsoft.com/zh-tw/library/system.transactions.transactionscope%28v=vs.80%29.aspx](http://msdn.microsoft.com/zh-tw/library/system.transactions.transactionscope%28v=vs.80%29.aspx)

请帮忙。谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:40:45.200

恕我直言，TransactionScope 是正确的方法。但是，我不确定 Sybase 是否支持加入环境事务的能力。

# javascript - 偏移 html 锚以调整固定标题

> ID：10732690
> 
> 赞同：1354
> 
> 时间：2012-05-24T07:04:12.543
> 
> 标签：javascript, html, css, anchor, offset

我正在尝试清理我的锚的工作方式。我有一个固定在页面顶部的标题，所以当您链接到页面其他位置的锚点时，页面会跳转，因此锚点位于页面顶部，将内容留在固定标题后面（我希望那讲得通）。我需要一种方法将锚点从标题的高度偏移 25px。我更喜欢 HTML 或 CSS，但也可以接受 Javascript。

* * *

## 回答 #1

> 赞同：1383
> 
> 时间：2012-11-01T20:09:36.140

你可以只使用没有任何 javascript 的 CSS。

给你的主播上课：

```
<a class="anchor" id="top"></a> 
```

然后，您可以通过将锚定为块元素并进行相对定位，将锚定位在高于或低于实际出现在页面上的位置的位置。-250px 将锚点向上定位 250px

```
a.anchor {
    display: block;
    position: relative;
    top: -250px;
    visibility: hidden;
} 
```

* * *

## 回答 #2

> 赞同：416
> 
> 时间：2012-08-07T09:22:27.267

我找到了这个解决方案：

```
<a name="myanchor">
    <h1 style="padding-top: 40px; margin-top: -40px;">My anchor</h1>
</a> 
```

这不会在内容中产生任何间隙，并且锚链接的效果非常好。

* * *

## 回答 #3

> 赞同：223
> 
> 时间：2012-10-30T11:56:11.830

我也在寻找解决方案。就我而言，这很容易。

我有一个包含所有链接的列表菜单：

```
<ul>
<li><a href="#one">one</a></li>
<li><a href="#two">two</a></li>
<li><a href="#three">three</a></li>
<li><a href="#four">four</a></li>
</ul> 
```

在它应该去的标题之下。

```
<h3>one</h3>
<p>text here</p>

<h3>two</h3>
<p>text here</p>

<h3>three</h3>
<p>text here</p>

<h3>four</h3>
<p>text here</p> 
```

现在因为我的页面顶部有一个固定菜单，所以我不能让它转到我的标签，因为那会在菜单后面。

相反，我在我的标签中放置了一个带有正确 id 的跨度标签。

```
<h3><span id="one"></span>one</h3> 
```

现在使用 2 行 CSS 来正确定位它们。

```
h3{ position:relative; }
h3 span{ position:absolute; top:-200px;} 
```

更改顶部值以匹配固定标题的高度（或更多）。现在我假设这也适用于其他元素。

* * *

## 回答 #4

> 赞同：189
> 
> 时间：2014-06-19T03:44:29.250

FWIW 这对我有用：

```
[id]::before {
  content: '';
  display: block;
  height:      75px;
  margin-top: -75px;
  visibility: hidden;
} 
```

* * *

## 回答 #5

> 赞同：184
> 
> 时间：2012-10-25T10:53:06.583

由于这是一个演示问题，因此纯 CSS 解决方案将是理想的。然而，这个问题是在 2012 年提出的，虽然已经提出了相对定位/负边距解决方案，但这些方法看起来相当老套，会产生潜在的流量问题，并且无法动态响应 DOM/视口的变化。

考虑到这一点，我相信使用 JavaScript*仍然*是（2017 年 2 月）最好的方法。下面是一个 vanilla-JS 解决方案，它将响应锚点点击并在加载时解析页面哈希**[（参见 JSFiddle）](http://jsfiddle.net/ianclark001/eqtosjtv/)**。`.getFixedOffset()`如果需要动态计算，请修改方法。如果您使用 jQuery，[这里有一个改进的解决方案，具有更好的事件委托和平滑滚动](http://jsfiddle.net/ianclark001/rkocah23/)。

```
(function(document, history, location) {
  var HISTORY_SUPPORT = !!(history && history.pushState);

  var anchorScrolls = {
    ANCHOR_REGEX: /^#[^ ]+$/,
    OFFSET_HEIGHT_PX: 50,

    /**
     * Establish events, and fix initial scroll position if a hash is provided.
     */
    init: function() {
      this.scrollToCurrent();
      window.addEventListener('hashchange', this.scrollToCurrent.bind(this));
      document.body.addEventListener('click', this.delegateAnchors.bind(this));
    },

    /**
     * Return the offset amount to deduct from the normal scroll position.
     * Modify as appropriate to allow for dynamic calculations
     */
    getFixedOffset: function() {
      return this.OFFSET_HEIGHT_PX;
    },

    /**
     * If the provided href is an anchor which resolves to an element on the
     * page, scroll to it.
     * @param  {String} href
     * @return {Boolean} - Was the href an anchor.
     */
    scrollIfAnchor: function(href, pushToHistory) {
      var match, rect, anchorOffset;

      if(!this.ANCHOR_REGEX.test(href)) {
        return false;
      }

      match = document.getElementById(href.slice(1));

      if(match) {
        rect = match.getBoundingClientRect();
        anchorOffset = window.pageYOffset + rect.top - this.getFixedOffset();
        window.scrollTo(window.pageXOffset, anchorOffset);

        // Add the state to history as-per normal anchor links
        if(HISTORY_SUPPORT && pushToHistory) {
          history.pushState({}, document.title, location.pathname + href);
        }
      }

      return !!match;
    },

    /**
     * Attempt to scroll to the current location's hash.
     */
    scrollToCurrent: function() {
      this.scrollIfAnchor(window.location.hash);
    },

    /**
     * If the click event's target was an anchor, fix the scroll position.
     */
    delegateAnchors: function(e) {
      var elem = e.target;

      if(
        elem.nodeName === 'A' &&
        this.scrollIfAnchor(elem.getAttribute('href'), true)
      ) {
        e.preventDefault();
      }
    }
  };

  window.addEventListener(
    'DOMContentLoaded', anchorScrolls.init.bind(anchorScrolls)
  );
})(window.document, window.history, window.location); 
```

* * *

## 回答 #6

> 赞同：91
> 
> 时间：2012-12-14T15:45:24.433

受 Alexander Savin 启发的纯 CSS 解决方案：

```
a[name] {
  padding-top: 40px;
  margin-top: -40px;
  display: inline-block; /* required for webkit browsers */
} 
```

如果目标仍然不在屏幕上，您可能需要添加以下内容：

```
 vertical-align: top; 
```

* * *

## 回答 #7

> 赞同：73
> 
> 时间：2014-03-26T08:50:43.480

我的解决方案结合了我们 CMS 的 target 和 before 选择器。其他技术不考虑锚点中的文本。将高度和负边距调整为您需要的偏移量...

```
:target::before {
    content: '';
    display: block;
    height:      180px;
    margin-top: -180px;
} 
```

* * *

## 回答 #8

> 赞同：49
> 
> 时间：2015-04-24T17:02:56.793

这从以前的答案中提取了许多元素，并组合成一个很小的（194 字节缩小）匿名 jQuery 函数。为您的菜单或阻塞元素的高度调整*fixedElementHeight*。

```
 (function($, window) {
        var adjustAnchor = function() {

            var $anchor = $(':target'),
                    fixedElementHeight = 100;

            if ($anchor.length > 0) {

                $('html, body')
                    .stop()
                    .animate({
                        scrollTop: $anchor.offset().top - fixedElementHeight
                    }, 200);

            }

        };

        $(window).on('hashchange load', function() {
            adjustAnchor();
        });

    })(jQuery, window); 
```

如果您不喜欢动画，请替换

```
$('html, body')
     .stop()
     .animate({
         scrollTop: $anchor.offset().top - fixedElementHeight
     }, 200); 
```

和：

```
window.scrollTo(0, $anchor.offset().top - fixedElementHeight); 
```

丑化版：

```
 !function(o,n){var t=function(){var n=o(":target"),t=100;n.length>0&&o("html, body").stop().animate({scrollTop:n.offset().top-t},200)};o(n).on("hashchange load",function(){t()})}(jQuery,window); 
```

* * *

## 回答 #9

> 赞同：39
> 
> 时间：2014-02-11T16:13:25.603

对于现代浏览器，只需将 CSS3 :target 选择器添加到页面。这将自动应用于所有锚点。

```
:target {
    display: block;    
    position: relative;     
    top: -100px;
    visibility: hidden;
} 
```

* * *

## 回答 #10

> 赞同：39
> 
> 时间：2013-06-25T17:04:11.427

## 您可以在不使用 js 且不更改 html 的情况下执行此操作。它是纯 CSS 的。

```
a[id]::before {
    content: '';
    display: block;
    height: 50px;
    margin: -30px 0 0;
} 
```

这将在每个带有 id 的 a-tag 之前附加一个伪元素。调整值以匹配标题的高度。

* * *

## 回答 #11

> 赞同：34
> 
> 时间：2013-12-02T04:33:53.773

我一直面临着类似的问题，不幸的是，在实施了上述所有解决方案之后，我得出了以下结论。

1.  我的内部元素有一个脆弱的 CSS 结构，并实现位置相对/绝对播放，完全破坏了页面设计。
2.  CSS 不是我的强项。

我写了这个简单的滚动 js，它解释了由于标题引起的偏移，并将 div 重新定位到下面大约 125 像素。请按您认为合适的方式使用它。

的HTML

```
<div id="#anchor"></div> <!-- #anchor here is the anchor tag which is on your URL --> 
```

JavaScript

```
 $(function() {
  $('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
&& location.hostname == this.hostname) {

      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        $('html,body').animate({
          scrollTop: target.offset().top - 125 //offsets for fixed header
        }, 1000);
        return false;
      }
    }
  });
  //Executed on page load with URL containing an anchor tag.
  if($(location.href.split("#")[1])) {
      var target = $('#'+location.href.split("#")[1]);
      if (target.length) {
        $('html,body').animate({
          scrollTop: target.offset().top - 125 //offset height of header here too.
        }, 1000);
        return false;
      }
    }
}); 
```

在此处查看[实时实现](http://scholowiz.herokuapp.com/about#change)。

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2013-06-11T15:28:06.210

改变位置属性的解决方案并不总是可行的（它会破坏布局），因此我建议这样做：

HTML：

```
<a id="top">Anchor</a> 
```

CSS：

```
#top {
    margin-top: -250px;
    padding-top: 250px;
} 
```

用这个：

```
<a id="top">&nbsp;</a> 
```

尽量减少重叠，并将字体大小设置为 1px。空锚在某些浏览器中不起作用。

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2012-10-17T13:34:59.557

正如@moeffju 建议的那样，这可以[通过 CSS](http://nicolasgallagher.com/jump-links-and-viewport-positioning/demo/)来实现。我遇到的问题（我很惊讶我还没有看到讨论过）是用填充或透明边框重叠先前元素的技巧防止在这些部分的底部悬停和单击操作，因为以下一个在z 顺序。

我发现的最佳解决方法是将部分内容放在以下`div`位置`z-index: 1`：

```
// Apply to elements that serve as anchors
.offset-anchor {
  border-top: 75px solid transparent;
  margin: -75px 0 0;
  -webkit-background-clip: padding-box;
  -moz-background-clip: padding;
  background-clip: padding-box;
}

// Because offset-anchor causes sections to overlap the bottom of previous ones,
// we need to put content higher so links aren't blocked by the transparent border.
.container {
  position: relative;
  z-index: 1;
} 
```

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2012-02-28T13:02:52.260

对于同样的问题，我使用了一个简单的解决方案：在每个锚点上放置一个 40px 的 padding-top。

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2014-03-14T05:09:31.047

借用[此链接](https://stackoverflow.com/questions/14804941/how-to-add-smooth-scrolling-to-bootstraps-scroll-spy-function)给出的答案中的一些代码（未指定作者），您可以在锚点上添加一个很好的平滑滚动效果，同时使其停在锚点上方 -60px 处，很好地适合固定引导导航下方栏（需要 jQuery）：

```
$(".dropdown-menu a[href^='#']").on('click', function(e) {
   // prevent default anchor click behavior
   e.preventDefault();

   // animate
   $('html, body').animate({
       scrollTop: $(this.hash).offset().top - 60
     }, 300, function(){
     });
}); 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2014-01-12T18:21:11.477

如果您的锚点是表格元素或表格（行或单元格）内，则上述方法效果不佳。

我不得不使用 javascript 并绑定到窗口`hashchange`事件来解决这个问题（[演示](http://jsfiddle.net/Mottie/3afdN/)）：

```
function moveUnderNav() {
    var $el, h = window.location.hash;
    if (h) {
        $el = $(h);
        if ($el.length && $el.closest('table').length) {
            $('body').scrollTop( $el.closest('table, tr').position().top - 26 );
        }
    }
}

$(window)
    .load(function () {
        moveUnderNav();
    })
    .on('hashchange', function () {
        moveUnderNav();
    }); 
```

* 注意：[hashchange](http://caniuse.com/#feat=hashchange)事件并非在所有浏览器中都可用。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2015-03-07T22:10:13.403

与其拥有一个与页面的其余内容重叠的固定位置导航栏（整个页面正文可滚动），不如考虑使用一个带有静态导航栏的不可滚动正文，然后将页面内容放在下面是绝对定位的可滚动 div。

也就是说，有这样的HTML......

```
<div class="static-navbar">NAVBAR</div>
<div class="scrollable-content">
  <p>Bla bla bla</p>
  <p>Yadda yadda yadda</p>
  <p>Mary had a little lamb</p>
  <h2 id="stuff-i-want-to-link-to">Stuff</h2>
  <p>More nonsense</p>
</div> 
```

...和这样的CSS：

```
.static-navbar {
  height: 100px;
}
.scrollable-content {
  position: absolute;
  top: 100px;
  bottom: 0;
  overflow-y: scroll;
  width: 100%;
} 
```

然而，这种方法有一个明显的缺点，即当页面标题中的元素被聚焦时，用户将无法使用键盘滚动页面（例如，通过向上和向下箭头或 Page Up 和Page Down 键）。

[这是一个 JSFiddle 演示了这一点。](http://jsfiddle.net/69dx1dec/)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2014-11-21T02:32:39.443

这是受到 Shouvik 回答的启发——与他的概念相同，只是固定标头的大小不是硬编码的。只要您的固定标头位于第一个标头节点中，这应该“正常工作”

```
/*jslint browser: true, plusplus: true, regexp: true */

function anchorScroll(fragment) {
    "use strict";
    var amount, ttarget;
    amount = $('header').height();
    ttarget = $('#' + fragment);
    $('html,body').animate({ scrollTop: ttarget.offset().top - amount }, 250);
    return false;
}

function outsideToHash() {
    "use strict";
    var fragment;
    if (window.location.hash) {
        fragment = window.location.hash.substring(1);
        anchorScroll(fragment);
    }
}

function insideToHash(nnode) {
    "use strict";
    var fragment;
    fragment = $(nnode).attr('href').substring(1);
    anchorScroll(fragment);
}

$(document).ready(function () {
    "use strict";
    $("a[href^='#']").bind('click',  function () {insideToHash(this); });
    outsideToHash();
}); 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2014-01-14T18:10:32.530

`a[name]:not([href])`您可以使用css 选择器在没有 ID 的情况下实现此目的。这只是查找具有名称且没有 href 的链接，例如`<a name="anc1"></a>`

一个示例规则可能是：

```
a[name]:not([href]){
    display: block;    
    position: relative;     
    top: -100px;
    visibility: hidden;
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2013-04-24T15:23:37.287

我在 TYPO3 网站中遇到了这个问题，其中所有“内容元素”都用以下内容包装：

```
<div id="c1234" class="contentElement">...</div> 
```

我改变了渲染，所以它呈现如下：

```
<div id="c1234" class="anchor"></div>
<div class="contentElement">...</div> 
```

这个CSS：

```
.anchor{
    position: relative;
    top: -50px;
} 
```

固定的顶栏高度为 40 像素，现在锚点再次工作并在顶栏下方 10 像素处开始。

这种技术的唯一缺点是您不能再使用`:target`.

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-05-13T01:49:22.007

我在每个元素之前添加了 40px 高度`.vspace`的元素来固定锚点`h1`。

```
<div class="vspace" id="gherkin"></div>
<div class="page-header">
  <h1>Gherkin</h1>
</div> 
```

在 CSS 中：

```
.vspace { height: 40px;} 
```

它工作得很好，空间也不拥挤。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-08-16T13:40:50.237

带有可链接 ID 的隐藏跨度标签如何提供导航栏的高度：

```
#head1 {
  padding-top: 60px;
  height: 0px;
  visibility: hidden;
}

<span class="head1">somecontent</span>
<h5 id="headline1">This Headline is not obscured</h5> 
```

继承人的小提琴：http: [//jsfiddle.net/N6f2f/7](http://jsfiddle.net/N6f2f/7)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-11-07T17:00:04.083

@Jan 的出色答案的另一个转折是将其合并到使用 jQuery（或 MooTools）的#uberbar 固定标题中。（[http://davidwalsh.name/persistent-header-opacity](http://davidwalsh.name/persistent-header-opacity)）

我已经调整了代码，因此内容的顶部始终位于固定标题下方，并且还再次添加了来自@Jan 的锚点，以确保锚点始终位于固定标题下方。

CSS：

```
#uberbar { 
    border-bottom:1px solid #0000cc; 
    position:fixed; 
    top:0; 
    left:0; 
    z-index:2000; 
    width:100%;
}

a.anchor {
    display: block;
    position: relative;
    visibility: hidden;
} 
```

jQuery（包括对 #uberbar 和锚方法的调整：

```
<script type="text/javascript">
$(document).ready(function() {
    (function() {
        //settings
        var fadeSpeed = 200, fadeTo = 0.85, topDistance = 30;
        var topbarME = function() { $('#uberbar').fadeTo(fadeSpeed,1); }, topbarML = function() { $('#uberbar').fadeTo(fadeSpeed,fadeTo); };
        var inside = false;
        //do
        $(window).scroll(function() {
            position = $(window).scrollTop();
            if(position > topDistance && !inside) {
                //add events
                topbarML();
                $('#uberbar').bind('mouseenter',topbarME);
                $('#uberbar').bind('mouseleave',topbarML);
                inside = true;
            }
            else if (position < topDistance){
                topbarME();
                $('#uberbar').unbind('mouseenter',topbarME);
                $('#uberbar').unbind('mouseleave',topbarML);
                inside = false;
            }
        });
        $('#content').css({'margin-top': $('#uberbar').outerHeight(true)});
        $('a.anchor').css({'top': - $('#uberbar').outerHeight(true)});
    })();
});
</script> 
```

最后是 HTML：

```
<div id="uberbar">
    <!--CONTENT OF FIXED HEADER-->
</div>
....
<div id="content">
    <!--MAIN CONTENT-->
    ....
    <a class="anchor" id="anchor1"></a>
    ....
    <a class="anchor" id="anchor2"></a>
    ....
</div> 
```

也许这对喜欢#uberbar 褪色固定标题的人有用！

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2013-12-07T07:40:43.983

您还可以使用以下属性添加锚点：

```
(text-indent:-99999px;)
visibility: hidden;
position:absolute;
top:-80px; 
```

并给父容器一个相对位置。

非常适合我。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2013-04-24T09:44:43.877

添加到 Ziav 的答案（感谢 Alexander Savin），我需要使用老派`<a name="...">...</a>`，因为我们`<div id="...">...</div>`在代码中用于另一个目的。我在使用时遇到了一些显示问题`display: inline-block`——每个元素的第一行都`<p>`略微右缩进（在 Webkit 和 Firefox 浏览器上）。我最终尝试了其他`display`价值观，并且`display: table-caption`非常适合我。

```
.anchor {
  padding-top: 60px;
  margin-top: -60px;
  display: table-caption;
} 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2014-12-17T20:54:49.903

这是我们在网站上使用的解决方案。将变量调整为`headerHeight`您的标题高度。将`js-scroll`类添加到应在单击时滚动的锚点。

```
// SCROLL ON CLICK
// --------------------------------------------------------------------------
$('.js-scroll').click(function(){
    var headerHeight = 60;

    $('html, body').animate({
        scrollTop: $( $.attr(this, 'href') ).offset().top - headerHeight
    }, 500);
    return false;
}); 
```

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2013-02-12T14:35:25.270

@AlexanderSavin 的解决方案`WebKit`对我来说在浏览器中效果很好。

我还必须使用[:target](https://developer.mozilla.org/en-US/docs/CSS/%3atarget)伪类，它将样式应用于选定的锚点以调整`FF`, `Opera`&中的填充`IE9`：

```
a:target {
  padding-top: 40px
} 
```

*请注意，此样式不适用于`Chrome`/ `Safari`，因此您可能必须使用 css-hacks、条件注释等。*

此外，我想注意到 Alexander 的解决方案之所以有效，是因为目标元素是`inline`. 如果您不想要链接，您可以简单地更改`display`属性：

```
<div id="myanchor" style="display: inline">
   <h1 style="padding-top: 40px; margin-top: -40px;">My anchor</h1>
</div> 
```

* * *

## 回答 #28

> 赞同：-2
> 
> 时间：2012-10-17T20:40:25.277

我遇到了同样的问题并最终手动处理了点击事件，例如：

```
$('#mynav a').click(() ->
  $('html, body').animate({
      scrollTop: $($(this).attr('href')).offset().top - 40
  }, 200
  return false
) 
```

当然，滚动动画是可选的。

# java - 如何从 Dropbox 获取 request_token

> ID：10732693
> 
> 赞同：0
> 
> 时间：2012-05-24T07:04:20.717
> 
> 标签：java, dropbox-api

请求令牌和令牌秘密必须交换为访问令牌和令牌秘密。

为了请求访问令牌，消费者向服务提供者的访问令牌 URL 发出 HTTP 请求。服务提供者文档指定了该请求的 HTTP 方法，建议使用 HTTP POST。请求必须根据签名请求进行签名，并包含以下参数：

oauth_consumer_key：消费者密钥。oauth_token：之前获取的Request Token。oauth_signature_method：Consumer 用于签署请求的签名方法。oauth_signature：签名请求中定义的签名。oauth_timestamp：在 Nonce 和 Timestamp 中定义。oauth_nonce：在 Nonce 和 Timestamp 中定义。

如何在java中获取这些参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:18:54.190

```
 AppKeyPair appKeys = new AppKeyPair("INSERT_APP_KEY_HERE", "INSERT_SECRET_HERE"); //Both from Dropbox developer website
        WebAuthSession session = new WebAuthSession(appKeys, Session.AccessType.DROPBOX);

        DropboxAPI<WebAuthSession> mDBApi = new DropboxAPI<WebAuthSession>(session);
        System.out.println(mDBApi.getSession().getAuthInfo().url); 
```

该 URL 包含我认为需要的所有信息。

Dropbox API 在此处下载表格：
[https ://www.dropbox.com/developers/reference/sdk](https://www.dropbox.com/developers/reference/sdk)

前往此处获取 App 密钥信息：
[https](https://www.dropbox.com/developers/apps) ://www.dropbox.com/developers/apps （必须登录 dropbox 并创建新应用）

如果您通过 https 连接，则不需要除 oauth_token 之外的所有额外内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:01:41.280

如果您直接使用 HTTP API，则可以通过[/oauth/request_token](https://www.dropbox.com/developers/reference/api#request-token)调用获取请求令牌。

[与直接使用 HTTP API 不同，您可能会发现使用Dropbox 的官方 Java SDK](https://www.dropbox.com/developers/reference/sdk)更容易。关于 OAuth 流程的文档：[WebAuthSession.java](https://www.dropbox.com/static/developers/dropbox-java-sdk-1.3.1-docs/com/dropbox/client2/session/WebAuthSession.html)。

# ruby-on-rails - 使用 Ruby on Rails 登录 Facebook

> ID：10732701
> 
> 赞同：1
> 
> 时间：2012-05-24T07:04:49.333
> 
> 标签：ruby-on-rails, ruby, facebook, login, connect

有人可以推荐我教程或好的解释网站来在我的 Ruby on Rails 应用程序上实现 Facebook 登录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:06:52.480

您想看看 Devise gem 并结合使用omniauth-facebook。[在https://github.com/stefanobernardi/Rails3.2-Devise-Facebook](https://github.com/stefanobernardi/Rails3.2-Devise-Facebook)上有一个示例站点，它显示了它是如何完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:15:14.620

OmniAuth 是一种向您的应用程序添加许多不同身份验证服务（如 Facebook、LinkedIn、google 和 twitter）的简单方法。

*   [http://railscasts.com/episodes/235-omniauth-part-1?view=asciicast](http://railscasts.com/episodes/235-omniauth-part-1?view=asciicast)
*   [http://net.tutsplus.com/tutorials/ruby/how-to-use-omniauth-to-authenticate-your-users/](http://net.tutsplus.com/tutorials/ruby/how-to-use-omniauth-to-authenticate-your-users/)
*   [http://blog.railsrumble.com/blog/2010/10/08/intridea-omniauth](http://blog.railsrumble.com/blog/2010/10/08/intridea-omniauth)

# java - 读取xml文件时获取对象形式的数据

> ID：10732712
> 
> 赞同：0
> 
> 时间：2012-05-24T07:05:24.650
> 
> 标签：java

`xml`编写以下代码以从文件中获取数据。我认为它确实获取但以对象形式。这是为什么 ？

```
package newpackage;

import java.io.File;
import java.util.Iterator;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import java.util.LinkedList;

public class xmlParser {

private DocumentBuilder db;
private DocumentBuilderFactory dbf;
private Document dom;
private LinkedList list = new LinkedList();

public static void main(String args[]) {
    xmlParser o = new xmlParser();
    o.parseXML();
    o.parseDocument();
    o.print();
}

public void parseXML() { // getting a document builder
    try {
        dbf = DocumentBuilderFactory.newInstance();
        db = dbf.newDocumentBuilder();
        dom = db.parse(new File("Details.xml"));
    } catch(Exception exc) {
        exc.printStackTrace();
    }
}

public void parseDocument() { // get a list of student elements
    Element docEle = dom.getDocumentElement();
    NodeList nl = docEle.getElementsByTagName("Details");
    if(nl != null && nl.getLength() > 0) {
        for(int i=0;i<nl.getLength();i++) {
            Element el = (Element)nl.item(i);
           Details details = new Details();
           details = details.getDetail(el);
           list.add(details);
        }
    }
}

public void print() {
 //        list.iterator();
 //        while(!list.isEmpty()) {
 //            System.out.println(list.pop().toString());
 //        }

      Iterator it = list.iterator();
      while(it.hasNext()) {
          System.out.println(it.next().toString());
      }

  }    
} 
```

*输出 ：*

```
newpackage.Details@1ac3c08
newpackage.Details@9971ad
newpackage.Details@1f630dc
newpackage.Details@1c5c1 
```

为什么即使在应用后我也能以对象形式获得输出`toString`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:09:11.670

When you want readable output, you have to override the toString() method in your newpackage.Details class ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:08:25.727

> Why do i get the output in the object form even after applying toString ?

Because you didn't override `toString()` method for that `Details` class

# mysql - 如何使用多个子字符串和子查询优化此查询

> ID：10732713
> 
> 赞同：0
> 
> 时间：2012-05-24T07:05:25.353
> 
> 标签：mysql, optimization

好的，我现在正在一个网站上工作，该网站显示有关电子设备部件的信息。这些部分有时会得到修订。零件编号保持不变，但它们在零件编号后附加了 A、B、C 等，因此字母“越高”，越新。还添加了日期。所以表格看起来像这样：

```
------------------------------------------------------------
| Partcode       |   Description        | Partdate         |
------------------------------------------------------------
| 12345A         | Some description 1   | 2009-11-10       |
| 12345B         | Some description 2   | 2010-12-30       |
| 17896A         | Some description 3   | 2009-01-12       |
| 12345C         | Some description 4   | 2011-08-06       |
| 17896B         | Some description 5   | 2009-07-10       |
| 12345D         | Some description 6   | 2012-05-04       |
------------------------------------------------------------ 
```

我现在需要的是来自零件最新版本的数据。所以对于这个例子，我需要：

12345D 和 17896B

有些人在我面前建立的查询是这样的：

```
SELECT substring(Partcode, 1, 5) AS Part,
       (
            SELECT pt.Partcode
            FROM Parttable pt
            WHERE substring(pt.PartCode, 1, 5) = Part
            ORDER BY pt.Partdate DESC
            LIMIT 0,1
       ),
       (
            SELECT pt.Description
            FROM Parttable pt
            WHERE substring(pt.PartCode, 1, 5) = Part
            ORDER BY pt.Partdate DESC
            LIMIT 0,1
       ),
       (
            SELECT pt.Partdate
            FROM Parttable pt
            WHERE substring(pt.PartCode, 1, 5) = Part
            ORDER BY pt.Partdate DESC
            LIMIT 0,1
       )
FROM Parttable
GROUP BY Part 
```

正如您将理解的，这个查询非常慢并且感觉非常低效。但我就是不知道如何优化这个查询。

所以我真的希望有人能提供帮助。

提前致谢！

PS。我正在研究 MySQL 数据库，在有人问之前，我无法更改数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:17:24.440

第一：为什么不将您的*版本*变量存储在单独的列中？这样你就不需要调用 substring 来首先提取它。如果您确实需要连接代码和版本，我认为最后这样做是一个好习惯。

然后在您的位置，我将首先拆分代码和版本，并在聚合查询中简单地使用*最大值，例如：*

```
SELECT code,max(version) FROM
  (SELECT substring(Partcode, 5, 1) as code,
         substring(Partcode, 1, 5) as version
  FROM Parttable
  )
AS part
GROUP BY code; 
```

注意：我没有测试过这个查询，所以你可能需要修复一些参数，比如子字符串索引。

# ravendb - 老实说，Raven.server.exe 去哪儿了？

> ID：10732716
> 
> 赞同：3
> 
> 时间：2012-05-24T07:05:28.977
> 
> 标签：ravendb

主题说明了一切——我在 Nuget 中更新了我的 RavenDB，并且 Raven.server.exe 已经完成了一个跑步者......它在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T13:05:34.447

这里是：

[http://nuget.org/packages/RavenDB.Server](http://nuget.org/packages/RavenDB.Server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:03:13.613

亚当，试试看[这个 YouTube 视频](http://www.youtube.com/watch?v=fEszs1Y-Jeo)，它解释了使用什么版本以及在哪里。

VS 项目应该使用[RavenDb.Client](http://nuget.org/packages/RavenDB.Client/)或[RavenDb.Embedded](http://nuget.org/packages/RavenDB.Embedded/) .. 并单独下载 RavenDb 服务器。（再次，请参阅该视频了解为什么/如何/等）

# c# - C# Aspose.Cells.dll 安装错误

> ID：10732717
> 
> 赞同：1
> 
> 时间：2012-05-24T07:05:32.260
> 
> 标签：c#, .net, aspose-cells

我最近用 C# 编写了一个程序，并利用 Aspose.Cells.dll 以 Excel 格式导出我的报告。我在我的电脑上安装了我的程序，我的一些朋友的它工作正常，但是今天当我面对一台干净的电脑（没有 .net 框架或任何编程框架）时，安装程​​序安装了先决条件（.Net Framework 3.5），并且程序正在启动，但是在使用 Aspose.Cells.dll 时会引发此异常：

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.IO.FileLoadException: Could not load file or assembly 'Aspose.Cells, Version=5.2.0.0, Culture=neutral, PublicKeyToken=716fcc553a201e56' or one of its dependencies. Strong name validation failed. (Exception from HRESULT: 0x8013141A)
File name: 'Aspose.Cells, Version=5.2.0.0, Culture=neutral, PublicKeyToken=716fcc553a201e56' ---> System.Security.SecurityException: Strong name validation failed. (Exception from HRESULT: 0x8013141A)
The Zone of the assembly that failed was:
MyComputer
   at PersonalTimeComputer.Code.MultiExporter.SelectedtoTpcXLS(List`1 selected, String xls_save_path, Dictionary`2 personList)
   at PersonalTimeComputer.UI.PersonalTimeComputerForm.exportToolStripMenuItem_Click(Object sender, EventArgs e)
   at System.Windows.Forms.ToolStripItem.RaiseEvent(Object key, EventArgs e)
   at System.Windows.Forms.ToolStripMenuItem.OnClick(EventArgs e)
   at System.Windows.Forms.ToolStripItem.HandleClick(EventArgs e)
   at System.Windows.Forms.ToolStripItem.HandleMouseUp(MouseEventArgs e)
   at System.Windows.Forms.ToolStripItem.FireEventInteractive(EventArgs e, ToolStripItemEventType met)
   at System.Windows.Forms.ToolStripItem.FireEvent(EventArgs e, ToolStripItemEventType met)
   at System.Windows.Forms.ToolStrip.OnMouseUp(MouseEventArgs mea)
   at System.Windows.Forms.ToolStripDropDown.OnMouseUp(MouseEventArgs mea)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.ToolStrip.WndProc(Message& m)
   at System.Windows.Forms.ToolStripDropDown.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
PersonalTimeComputer
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Documents%20and%20Settings/Mehrazar/Desktop/Time%20Attendance/PersonalTimeComputer.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
SourceGrid
    Assembly Version: 4.30.3817.19618
    Win32 Version: 4.30.3817.19618
    CodeBase: file:///C:/Documents%20and%20Settings/Mehrazar/Desktop/Time%20Attendance/SourceGrid.DLL
----------------------------------------
FarsiLibrary.Win
    Assembly Version: 1.9.0.0
    Win32 Version: 1.9.0.0
    CodeBase: file:///C:/Documents%20and%20Settings/Mehrazar/Desktop/Time%20Attendance/FarsiLibrary.Win.DLL
----------------------------------------
FarsiLibrary.Resources
    Assembly Version: 1.9.0.0
    Win32 Version: 1.9.0.0
    CodeBase: file:///C:/Documents%20and%20Settings/Mehrazar/Desktop/Time%20Attendance/FarsiLibrary.Resources.DLL
----------------------------------------
FarsiLibrary.Utils
    Assembly Version: 1.9.0.0
    Win32 Version: 1.9.0.0
    CodeBase: file:///C:/Documents%20and%20Settings/Mehrazar/Desktop/Time%20Attendance/FarsiLibrary.Utils.DLL
----------------------------------------
Telerik.WinControls.GridView
    Assembly Version: 2010.1.10.504
    Win32 Version: 2010.1.10.0504
    CodeBase: file:///C:/Documents%20and%20Settings/Mehrazar/Desktop/Time%20Attendance/Telerik.WinControls.GridView.DLL
----------------------------------------
Telerik.WinControls.UI
    Assembly Version: 2010.1.10.504
    Win32 Version: 2010.1.10.0504
    CodeBase: file:///C:/Documents%20and%20Settings/Mehrazar/Desktop/Time%20Attendance/Telerik.WinControls.UI.DLL
----------------------------------------
Telerik.WinControls
    Assembly Version: 2010.1.10.504
    Win32 Version: 2010.1.10.0504
    CodeBase: file:///C:/Documents%20and%20Settings/Mehrazar/Desktop/Time%20Attendance/Telerik.WinControls.DLL
----------------------------------------
TelerikCommon
    Assembly Version: 2010.1.10.504
    Win32 Version: 2010.1.10.0504
    CodeBase: file:///C:/Documents%20and%20Settings/Mehrazar/Desktop/Time%20Attendance/TelerikCommon.DLL
----------------------------------------
System.Data
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_32/System.Data/2.0.0.0__b77a5c561934e089/System.Data.dll
----------------------------------------
Accessibility
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/Accessibility/2.0.0.0__b03f5f7f11d50a3a/Accessibility.dll
----------------------------------------
System.Xml.Linq
    Assembly Version: 3.5.0.0
    Win32 Version: 3.5.21022.8 built by: RTM
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Xml.Linq/3.5.0.0__b77a5c561934e089/System.Xml.Linq.dll
----------------------------------------
System.Core
    Assembly Version: 3.5.0.0
    Win32 Version: 3.5.21022.8 built by: RTM
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Core/3.5.0.0__b77a5c561934e089/System.Core.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

如您所见，它已加载所有其他 dll，但未加载此 dll。此 dll 是否需要 .Net Framework 3.5 之外的其他先决条件？

或者这个dll有什么想法或向后兼容性吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:19:11.730

看起来这是一个签名问题。Aspose.Cells 是一个强名称程序集，您在这里遇到的错误意味着测试机器中的 CLR 无法找到相应的公钥来验证 .dll 的签名。看来您需要[辞去大会](http://msdn.microsoft.com/en-us/library/xc31ft41%28VS.71%29.aspx)的职务。

[以前的帖子有类似的问题。](https://stackoverflow.com/questions/2989037/mstest-code-coverage)

# javascript - dijit.tree 如何仅使用商店实现折叠所有功能？

> ID：10732719
> 
> 赞同：2
> 
> 时间：2012-05-24T07:05:40.470
> 
> 标签：javascript, treeview, dojo, dijit.tree

我有一个延迟加载 dijit.tree，我想在加载数据后在许多地方重用它。但是，如果我只是将其他树中的存储对象替换为包含最多数据的存储对象，那么节点就会全部展开。我想修改商店，以便在将其设置为新树中的商店之前折叠所有项目。你能告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:34:42.253

您不能为此使用存储，因为它不包含树节点状态的任何信息。这种“魔法”是通过 执行的`TreeNode`，请参见此处的一些[示例](http://dojotoolkit.org/reference-guide/1.7/dijit/Tree-examples.html#expanding-and-focusing-tree-nodes-programmatically)

“完美解决方案”是找出需要扩展的路径，然后设置树的路径以遍历所需的树节点。

但是，由于您的延迟加载，您需要`state`在初始化树时检查 - 它应该是`UNCHECKED`. 但是有一个内置的 cookie 功能可能正在启动，请确保创建新树`{ persist:false }`

您还可以扩展您的树，以便它接受`collapseChildren(TreeNode)`如下 - 然后调用`tree.set("path", [pathsArray]);`

```
collapseChildren : function(top) {
        var self = this;
        if(!top || !self.model.mayHaveChildren(top.item)) return;
        top.getChildren().forEach(function(n) {
                if(n.item.children) {
                        //dojo.style(n.getParent().containerNode, { overflowY: 'hidden', overflowX: 'hidden'});
                        self._collapseNode(n);
                        self.collapseChildren(n);
                }
        });
}, 
```

编辑：

> 如果将 autoExpand 标志传递给构造函数，则树最初会显示为所有节点都展开。
> 
> 然后，您可以分别调用 collapseAll() 和 expandAll() 来折叠和展开树。 [http://livedocs.dojotoolkit.org/dijit/Tree-examples#id3](http://livedocs.dojotoolkit.org/dijit/Tree-examples#id3)

# php - 使用 PHP SDK 的 Facebook 移动登录

> ID：10732721
> 
> 赞同：0
> 
> 时间：2012-05-24T07:05:54.763
> 
> 标签：php, android, facebook

我可以从 Android 设备获取 Facebook 令牌并将值发布到 Web 服务器。

当我使用 Facebook PHP SDK 时，很容易获取 facebook 用户信息。

```
// Get User ID
$fb_id = $this->facebook->getUser();

// Get User Info
$user_profile = $this->facebook->api('/me'); 
```

就这一行给了我所有的信息。

我不知道如何仅使用从手机获得的 facebook 令牌来获取用户信息。

```
// get mobile token
$fb_token = $this->input->post('fb_token');

$user_info = 'https://graph.facebook.com/me?access_token='.$fb_token; 
```

好的。所以看起来如果我使用上面的 url 地址，我会得到 joson 数据。

如何将阵列数据带入服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:31:25.590

用户通过身份验证 ( [SSO](http://developers.facebook.com/docs/mobile/android/build/#sso) ) 后，您可以简单地使用[Facebook 对象](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/android/Facebook.java)发出请求：

```
facebook.request("me", new RequestListener() {
    @Override
    public void onComplete(String response, Object state) {}

    @Override
    public void onIOException(IOException e, Object state) {}

    @Override
    public void onFileNotFoundException(FileNotFoundException e, Object state) {}

    @Override
    public void onMalformedURLException(MalformedURLException e, Object state) {}

    @Override
    public void onFacebookError(FacebookError e, Object state) {}
}); 
```

您可以发出同步请求：[API 请求](http://developers.facebook.com/docs/reference/androidsdk/request/)或异步：[异步 API 请求](http://developers.facebook.com/docs/reference/androidsdk/ayncrequest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T15:02:13.233

你只需要添加一行就完成了。

```
$userData = file_get_contents($user_info); 
```

# java - POJO 的事务

> ID：10732726
> 
> 赞同：1
> 
> 时间：2012-05-24T07:06:17.880
> 
> 标签：java, pojo

我正在实现一个类似的方法：

```
...
try {
   myPojo.setProperty("foo");
   myService.execute(myPojo);
} catch (Exception e) {
   logger.error(e.getMessage(), e);
}
... 
```

如果我的服务从 pojo 属性上的这个 try 块中引发了一些异常，则将具有新值。是否有某种方法可以为 pojo 更改启动一种事务并在出现问题时将其回滚？

就像是：

```
PojoTransaction pt = startPojoTransaction();
transactionedPojo = pt.handleByTransaction(myPojo);
try {
   transactionedPojo.setProperty("foo");
   myService.execute(transactionedPojo);
   pt.commit;
} catch (Exception e) {
   logger.error(e.getMessage(), e);
} 
```

或者类似的东西...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:13:46.053

看看 Memento Pattern，它包含一个 Java 示例。
[http://en.wikipedia.org/wiki/Memento_pattern](http://en.wikipedia.org/wiki/Memento_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:49:09.107

我玩弄了这个想法，这远非完美，只是一个简单的概念证明。这个实现存在一些陷阱：

*   它只尝试调用给定源对象的无参数构造函数来创建目标副本，需要一些逻辑来选择正确的构造函数（或仅支持 Cloneables？）
*   只复制类中声明的字段，而不是从超类中复制（这个问题可以通过遍历继承树并复制任何超类字段来解决）
*   如果字段是复杂类型，则仅将引用复制到目标对象，因此对它们的任何更改都不会是事务性的，因为源和目标共享相同的实例（可通过递归创建嵌套对象的副本并复制它们的值来解决，需要遍历整个对象图，从源代码开始，然后在提交时反之亦然）

但是，从这里改进，我相信它会变得非常有用。这是 POC：

```
import java.lang.reflect.Field;

import org.junit.Assert;
import org.junit.Test;

public class PojoTransactionTest
{
    public static class PojoTransaction<T>
    {
        /**
         * This is the original (unmodified) object
         */
        private T source;

        /**
         * This is the object modified by within the transaction
         */
        private T target;

        /**
         * Creates a new transaction for the given source object
         * @param source    Source object to modify transactionally
         */
        public PojoTransaction(T source)
        {
            try
            {
                this.source = source;
                this.target = (T)source.getClass().newInstance(); //Note: this only supports parameterless constructors

                copyState(source, target);
            }
            catch(Exception e)
            {
                throw new RuntimeException("Failed to create PojoTransaction", e);
            }
        }

        /**
         * Copies state (member fields) from object to another
         * @param from      Object to copy from
         * @param to        Object to copy to
         * @throws IllegalAccessException
         */
        private void copyState(T from, T to) throws IllegalAccessException
        {
            //Copy internal state to target, note that this will NOT copy fields from superclasses
            for(Field f : from.getClass().getDeclaredFields())
            {
                f.setAccessible(true);
                f.set(to, f.get(from));
            }
        }

        /**
         * Returns the transaction target object, this is the one you should modify during transaction
         * @return Target object
         */
        public T getTransactionTarget()
        {
            return target;
        }

        /**
         * Copies the changes from target object back to original object
         */
        public void commit()
        {
            try
            {
                copyState(target, source);
            }
            catch(Exception e)
            {
                throw new RuntimeException("Failed to change state of original object", e);
            }
        }
    }

    public static class TestData
    {
        private String strValue = "TEST";
        private int intValue = 1;
        private float floatValue = 3.1415f;

        public String getStrValue()
        {
            return strValue;
        }

        public void setStrValue(String strValue)
        {
            this.strValue = strValue;
        }

        public int getIntValue()
        {
            return intValue;
        }

        public void setIntValue(int intValue)
        {
            this.intValue = intValue;
        }

        public float getFloatValue()
        {
            return floatValue;
        }

        public void setFloatValue(float floatValue)
        {
            this.floatValue = floatValue;
        }

    }

    @Test
    public void testTransaction()
    {
        //Create some test data
        TestData orig = new TestData();

        //Create transaction for the test data, get the "transaction target"-object from transaction
        PojoTransaction<TestData> tx = new PojoTransaction<TestData>(orig);
        TestData target = tx.getTransactionTarget();
        target.setFloatValue(1.0f);
        target.setIntValue(5);
        target.setStrValue("Another string");

        //Original object is still at the original values
        Assert.assertEquals(1, orig.getIntValue());
        Assert.assertEquals(3.1415f, orig.getFloatValue(), 0.001f);
        Assert.assertEquals("TEST", orig.getStrValue());

        //Commit transaction
        tx.commit();

        //The "orig"-object should now have the changes made to "transaction target"-object
        Assert.assertEquals(5, orig.getIntValue());
        Assert.assertEquals(1.0f, orig.getFloatValue(), 0.001f);
        Assert.assertEquals("Another string", orig.getStrValue());
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:14:26.597

这个问题有点含糊，但听起来您正在与事务管理的基本设计模式搏斗。您将从这里使用的模式的生产经验中受益匪浅：

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)

也许 Spring Transaction 管理无论如何都适合您的项目。

# sharepoint-2010 - 我的 Azure 应用程序和 SharePoint Online 之间的单点登录

> ID：10732730
> 
> 赞同：1
> 
> 时间：2012-05-24T07:06:29.133
> 
> 标签：sharepoint-2010, office365

我正在尝试评估一种可以将基于 Azure 的应用程序集成到 SharePoint Online 的策略。我们的想法是提供无缝的 UI，以便他们能够使用这两个应用程序的最佳功能，而无需离开我们的应用程序。

我们希望将应用程序与 Sharepoint online 捆绑在一起，这样如果用户访问我们的应用程序，他们将看到另一个用于协作的选项卡，该选项卡将在单独的 iFrame 或类似的东西中打开 SharePoint online。

但是，这里的问题是我们不希望用户为 SharePoint 在线保留另一组用户凭据。有没有一种方法可以在这里提供某种单点登录。

我们的应用程序使用基于表单的身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:22:50.547

我可以验证您确定可以将 ClaimBased SSO 与 Azure 和 SPOnline 一起使用。查找以下内容：

[使用基于声明的身份验证在 SharePoint Online 中进行基于声明](http://msdn.microsoft.com/en-us/library/hh147177.aspx)[的 Web 和 Windows Azure 远程身份验证单点登录](http://msdn.microsoft.com/en-us/library/ff359102.aspx)

因此，使用基于声明的身份验证（使用 Windows Azure [ACS](http://acs.codeplex.com/documentation)），您可以将 SP online 和 Azure Web Role 合并在一起。

# php - 通过 PHP 从 mysql 获取数据，然后将具有相似列值的行分组并计数

> ID：10732731
> 
> 赞同：0
> 
> 时间：2012-05-24T07:06:29.217
> 
> 标签：php, mysql, row, fetch

我基本上有这个从数据库中获取订单的程序。我的问题是我需要以这样一种方式制作报告，即脚本将获取具有相同列值的行，然后对它们进行计数并显示它们。

说表“订单”

```
销售订单系列产品
1111111 pi_gx af000
1111111 pi_gx af000
1111112 sfng af111
1111113 pi_gx af000

```

将显示在我的 php 页面中

```
销售订单系列数量产品
1111111 pi_gx 2 af000
1111112 sfng 1 af111
1111113 pi_gx 1 af000

```

它计算所述销售订单的行数并显示数量，同时在我的页面中仅显示该销售订单的单个副本。

这是代码：

```
<body class="printable"><h1 align="center">New Orders Dropped for Product Integration 1X</h1>
<table align="center" width="100%">
<tr>
    <td class="labels">Prepared: </td>
<td class="boxed"><?php date_default_timezone_set("Asia/Singapore");$today = date("d/m/y H:i");echo $today; ?></td>
    <td class="divider">&nbsp;</td>
    <td class="labels">Time Coverage:  </td>
    <td class="boxed">12:00 to 2:00</td>
    <td class="divider">&nbsp;</td>
    <td class="labels">BirthStamp: </td>
    <td class="boxed">5/21/2012</td>
    <td class="divider">&nbsp;</td>
    <td class="labels">Saved: </td>
    <td class="boxed"><?php echo $today; ?></td>
</tr>
<tr>
    <td class="labels">Prepared by (Production): </td>
    <td><input type="text" name="preparer" id="preparer" class="boxedPrepared" /></td>
    <td class="divider"></td>
    <td class="labels">Recorded by (Store): </td>
    <td><input type="text" name="recorder" id="recorded" class="boxedPrepared" /></td>
    <td class="divider"></td>
    <td class="labels">Recorded: </td>
    <td class="boxed" colspan="3"><?php echo $today; ?></td>
</tr>
</table>
<br />
<?php
    $conn = mysql_connect("localhost", "root", "123456") or die(mysql_error()); 
    mysql_select_db("store") or die(mysql_error());
    $sql = mysql_query("SELECT * FROM report ORDER BY salesorder AND masterproduct ASC") or die(mysql_error());

    if(mysql_num_rows($sql) == 0) {
    echo "<center><b>No ORDER/S in Queue</b></center>";
} else {
    echo "
    <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" class=\"data\">
              <tr>
                <td class=\"dataHeader\">Sales Order</td>
                <td class=\"dataHeader\">Sales Order Code</td>
                <td class=\"dataHeader\">Family</td>
                <td class=\"dataHeader\">Product Code</td>
                <td class=\"dataHeader\">Quantity</td>
                <td class=\"dataHeader\">Birth Stamp</td>
                <td class=\"dataHeader\">Due Date</td>
              </tr>
    ";
    while($result = mysql_fetch_array($sql)) {
        echo "
              <tr>
                <td class=\"data\">".$result['salesorder']."</td>
                <td class=\"data\"><span class=\"title\">*".$result['salesorder']."*</span><br />".$result['salesorder']."</td>
                <td class=\"data\">".$result['family']."</td>
                <td class=\"data\"><span class=\"title\">*".$result['masterproduct']."*</span><br />".$result['masterproduct']."</td>
                <td class=\"data\">";
                //need to echo the value here                   
                echo "</td>
                <td class=\"data\">".$result['birthstamp']."</td>
                <td class=\"data\"><span class=\"title\">*".$result['duedate']."*</span><br />".$result['duedate']."</td>
              </tr>

        ";  
    }
    echo "</table>";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:08:53.907

```
SELECT salesorder, family, product, COUNT() AS qty FROM orders 
       GROUP BY salesorder; 
```

EDIT: OK, try this on for size:

```
SELECT r.*, t.qty FROM report r LEFT JOIN
      (SELECT salesorder, COUNT() AS qty FROM orders 
         GROUP BY salesorder) t
      ON t.salesorder=r.salesorder
    ORDER BY r.salesorder AND r.masterproduct ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:09:33.043

Try this query:

```
SELECT 
 COUNT() AS qty, sales_order, family, products 
FROM orders 
GROUP BY sales_order 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:29:12.817

Finally figured it out. Thank you guys for helping. I changed my sql query to this:

```
$sql = mysql_query("SELECT salesorder, masterproduct, family, birthstamp, duedate, COUNT( * ) AS total FROM report WHERE family = '$family' AND birthstamp BETWEEN '$startDT' AND '$endDT' GROUP BY salesorder, masterproduct, family, duedate  "); 
```

and it worked fine!

# ms-access - Access 2010: Which form control fires a macro?

> ID：10732748
> 
> 赞同：0
> 
> 时间：2012-05-24T07:07:54.213
> 
> 标签：ms-access, vba

I'm working on a legacy database. Specifically, changing a report. I have identified the queries/tables the report is based on. One of the tables has all the hallmarks of being a temprary table generated by a macro of which there are many dozens.

I've been able to identify the Append Query which generates the table and the macro that runs the query. Now I would like to find which form event fires that macro. Does it run everytime the report is generated or once a week or once a quarter or... There is nothing in the macro behind the "button" that prints the report and no events are fired in the report.

I can iterate over every control in every form, but what property am I looking for? Any pointers/key word guidance would be appreciated, thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:50:19.897

一些注意事项，当你有宏的名称时，会更容易找到相关的按钮：

```
Sub FindMacros()
For Each f In CurrentProject.AllForms
    DoCmd.OpenForm f.Name, acDesign

    Set frm = Forms(f.Name)
    For Each ctl In frm.Controls
        If ctl.ControlType = acCommandButton Then
            Debug.Print ctl.OnClick
        End If
    Next

    DoCmd.Close acForm, f.Name, acSaveNo
Next
End Sub 
```

# silverlight - Ad Control in Windows Phone 7?

> ID：10732750
> 
> 赞同：0
> 
> 时间：2012-05-24T07:08:03.757
> 
> 标签：silverlight, windows-phone-7, windows-phone, ads, advertisement-server

I am developing a Windows Phone7 App. In my app I need to show an advertisement. I am planning to use Microsoft's Ad Control for this.

Is it possible to show my own advertisements in the Ad Control. ?..

Is it possible to use OpenX ads in Ad Control ?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:19:48.747

Microsoft 广告控件将仅显示 Microsoft 广告，如果您想显示自己的广告，我会推荐诸如 WP7 统一广告控件之类的东西，可从 Codeplex (http://wpunifiedad.codeplex.com/) 获得

该控件允许您指定显示哪些广告提供者，以及它们被选中的百分比。我不相信它目前支持 OpenX 广告，但您可以随时在 CodePlex 的讨论中提出这一点。

我正在使用我编写的 WP7 应用程序（PayPhone Lite、LatinIslands Free 和 Bridges Free）上的控件并且效果很好。

HTH - 鲁珀特。

# installation - SQL Server 2008 R2 安装过程中缺少“实例配置”步骤

> ID：10732754
> 
> 赞同：2
> 
> 时间：2012-05-24T07:08:13.330
> 
> 标签：installation, sql-server-2008-r2

我在安装 SQL Server 2008 R2 时遇到了奇怪的问题。我正在尝试在 Windows 7 x64 操作系统上安装，应该有一个名为“实例配置”的步骤。在我的设置中遗漏了它，安装后系统中存在 SQL 服务但没有服务器实例。我从 MSDN 下载的 SQL Server 2008 R2 的图像。我尝试使用 Enterprise 和 Developer 版本，结果相同。有没有人有类似的问题？是什么原因造成的？我在网络上寻找了一些解决方案，我试图从“添加/删除程序”中卸载所有 SQL 项目并清除注册表 - 没有帮助。我将非常感谢任何提示。最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:26:32.783

我在使用 SQL Server 2008 时遇到了许多奇怪的问题，包括这些问题。

在我的情况下，我在 Windows Server 2008 x64 上遇到了问题，但我想这将是类似的事情。

就我而言，这取决于我的用户权限，如果我使用我的凭据登录，即使我是管理员组的一员，我也会遇到许多不同的问题。

当以内置管理员身份登录时，它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-10T16:22:30.453

以“管理员”身份启动安装程序对我有用。

# java - How to use Jooq to query for a column case-insensitive?

> ID：10732755
> 
> 赞同：1
> 
> 时间：2012-05-24T07:08:14.863
> 
> 标签：java, sql, postgresql, jooq

I am using jOOQ with PostgreSQL, and I just realize that my column is case sensitive. Using jOOQ, I didn't found a correct method to query a column, ignoring its case sensitivity. Looking at here : [jOOQ TableField Method](http://www.jooq.org/javadoc/latest/org/jooq/Field.html#equalIgnoreCase%28org.jooq.Field%29), I can see that there's `equalIgnoreCase`. But in the jooq class itself, that method is not there.

Does anybody know what did I do wrong here?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:47:14.293

我不太确定“区分大小写”是指列内容还是列名。

*   如果您的意思是列内容，那么您找到了正确的方法：[`Field.equalIgnoreCase()`](http://www.jooq.org/javadoc/latest/org/jooq/Field.html#equalIgnoreCase%28org.jooq.Field%29). 一个使用示例：

    ```
    create.select()
          .from(MY_TABLE)
          .where(MY_TABLE.MY_FIELD.equalIgnoreCase("abc"))
          .fetch(); 
    ```

*   但是，如果您指的是列名，那么您可以使用`Factory` `Settings`来控制 jOOQ 如何呈现字段和列名。相关设置是[`RenderNameStyle`](http://www.jooq.org/javadoc/latest/org/jooq/conf/RenderNameStyle.html)

# ruby-on-rails - 脚本头过早结束——Rails

> ID：10732765
> 
> 赞同：2
> 
> 时间：2012-05-24T07:08:57.597
> 
> 标签：ruby-on-rails, apache, passenger

安装所有 gem 后，我收到 500 个内部服务器错误。有人说这与内存使用有关，但我是 29%

这是我的虚拟主机

```
VirtualHost *:80>
      ServerAdmin examplea@example.com
      ServerName 0.0.0.0
      # ServerAlias
      DocumentRoot /var/www/sample_app/current/public
      ErrorLog /var/www/sample_app/error.log

          RailsEnv production
        <Directory "/var/www/sample_app/current/public">
          Options Indexes FollowSymLinks MultiViews
          Order allow,deny
          Allow from all
        </Directory>
</VirtualHost> 
```

上面的代码是否需要位于虚拟主机中的特定位置？我还有什么需要补充的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T00:02:57.543

您确定乘客已正确安装/启用吗？

发布您的堆栈跟踪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:48:00.147

事实证明我必须删除 /etc/apache2/sites-available/default 并创建自己的

# java - Java 小程序：再次出现 AccessControlException

> ID：10732779
> 
> 赞同：1
> 
> 时间：2012-05-24T07:09:44.740
> 
> 标签：java, applet

再次出现签名小程序的权限问题。

我希望我的*自签名小程序*从本地驱动器中删除一个文件，但我得到了例外：

```
java.security.AccessControlException: access denied
  (java.io.FilePermission /Users/me/tmp.txt delete) 
```

在这里我调用删除：

```
 public void deleteFile( String path )
    {
        AccessController.doPrivileged( new Deleter( path ));
    } 
```

这个类删除文件：

```
class Deleter implements PrivilegedAction {
    public Deleter( String path ) {
        m_path = path;
    }

    public Object run()
    {
        File file = new File( m_path );
        file.delete();
        return null;
    }

    private String m_path;
}; 
```

HTML代码是：

```
<APPLET CODE="HelloWorld.class" ARCHIVE="SignedHelloWorld.jar" WIDTH=600 HEIGHT=25>
<PARAM NAME="MAYSCRIPT" VALUE="true">
</APPLET> 
```

**解决了：**

我需要添加策略（在 OS X 下）：

```
cat >> ~/.java.policy

grant {
  permission java.io.FilePermission "<<ALL FILES>>", "delete";   
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:21:18.640

要授予权限，applet 需要一个策略文件。这定义了他们可以对用户系统做什么。[您可以在此处](http://docs.oracle.com/javase/tutorial/security/tour1/step2.html)找到更多信息。

# photo - 如何在不扭曲拉伸的情况下裁剪图像

> ID：10732780
> 
> 赞同：0
> 
> 时间：2012-05-24T07:09:47.547
> 
> 标签：photo, crop

想知道是否有一个很好的网站可以像这样裁剪图像：

当前尺寸为 336 x 352：

想通过结合适当的拉伸和缩放使其成为 695 x 395（所以它看起来不像是扭曲的拉伸）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:17:20.180

[Imagemagick](http://www.imagemagick.org/Usage/resize/)有很多选项可以做几乎所有事情。

# php - Boost Apache2 up to 4 cores usage, running PHP

> ID：10732783
> 
> 赞同：1
> 
> 时间：2012-05-24T07:09:55.563
> 
> 标签：php, apache2, multiprocessing, command-line-interface

* * *

READ FURTHER BELOW at CLI, FOR THE CLI QUESTION, WHICH JUST ADDED TO THE CONVERSATION! THX!

* * *

I have written a script which processes an xml file of around 160'000 entries with 48.1MB and a text file of 150'000 entries with 31.1MB, including some directory searches for external files, heavy interlinking and recursive checks and the result formatted and all saved into html files.

Surely, I did review the program couple times and ended up with the most efficient code I could think of. This is a local program and the generator doesn't need to run regularly. One could argue that I should use an other language than PHP, but PHP with simplexml, etc. just works the best for me and for this purpose. Also a set_time_limit('70000') doesn't bother me.

Although, here my question, is it possible to make the apache2 on my linux system, use my 4 CPU cores running my PHP script? Even if I split the process and make several request's simultaneously, the CPU usage can't go above 1 CPU at a time.

I googled this topic but couldn't find a solution, so I may have to just run it over night, even though, I would appreciate some help to boost that thing!!!

ADDED INFO - And here a picture of my processes: ![enter image description here](../Images/2bd573d692952650e444a877534d31ae.png)

CLI: I need to call my index.php in the linux terminal to execute. But I also wanna send four post variables ($_POST['example']) to the script. On top of that, I am looking for having my echos presented in some output file. Could anyone help quickly with the terminal command and the php command to track those 4 post variables inside:

```
if (PHP_SAPI === 'cli')
{
   // ...
} 
```

? ...sorry but this is my first php-cli interaction. Thx!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:11:55.973

不，单个 PHP 脚本永远不会使用多个线程，因此始终在单核上运行。

根据您所做的事情有多少相互依赖，无论如何您都无法轻松地将它们拆分到多个线程上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:16:53.643

编辑：作者的回应

这不是一个解决方案，而是一个很好的解决方法。我使用 linux/apache2 安装克隆我的虚拟机以启动相同的进程，但文件/进程的不同部分在不同的 vm 上，这让主机系统为每个虚拟系统应用一个核心，这样我就可以分解进程时间大约是 4 倍。感谢您的帖子！

================

如果它是本地的，并且您想不时运行它，您可能应该从`cron`作业中调用它。这样，您可以为您正在执行的每项任务生成一个进程。如果您确实想使用 PHP，您甚至可以从 cron 行调用 PHP 来执行此操作。

尽管如此，听起来你无论如何都在做一个固有的单线程进程，如果你想要它更快，可能应该使用不是 PHP 的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T08:21:21.013

也许你可以使用 Spork！这是一个 php 库，允许您将 php 进程分叉为多个进程。

```
<?php

use Spork\Deferred\DeferredFactory;
use Spork\ProcessManager;

$manager = new ProcessManager(new DeferredFactory());
$manager->fork(function() {
    // do something in another process!
})->then(function($output, $status) {
    // do something in the parent process when it's done!
}); 
```

[https://github.com/kriswallsmith/spork](https://github.com/kriswallsmith/spork)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T01:25:15.767

解决方案，感谢 ThiefMaster 和 Zebediah49 推荐 cli 和通过链接支持我的朋友：http: [//ch.php.net/manual/en/reserved.variables.argv.php](http://ch.php.net/manual/en/reserved.variables.argv.php) / [http://ch.php.net /manual/en/function.getopt.php](http://ch.php.net/manual/en/function.getopt.php)

在这里我如何通过cli调用php：

```
//whenRunFromCLI
//callCLI
//php index.php './data/xyfullFile1.xml' './data/xxfullFile2.utf' 0 60000
//php index.php './data/xyfullFile1.xml' './data/xxfullFile2.utf' 60000 120000
//php index.php './data/xyfullFile1.xml' './data/xxfullFile2.utf' 120000 all
if (PHP_SAPI === 'cli'){
    $_POST['xml'] = $argv[1];
    $_POST['example'] = $argv[2];
    @$_POST['rangeFrom'] = $argv[3];
    @$_POST['rangeTo'] = $argv[4];
} 
```

以及在三个终端调用php文件的结果： ![在此处输入图像描述](../Images/a6d21dbd2bd20159c91d3da52b88ac3d.png)

我知道，我必须为我的虚拟机提供更多内存，幸运的是我还有 8GB 的​​空闲空间；-)

欢呼与和平！

# java - MySQL mysqldump from Java code on Win7 issues

> ID：10732784
> 
> 赞同：1
> 
> 时间：2012-05-24T07:09:57.550
> 
> 标签：java, mysql, windows, mysqldump, runtime.exec

Ok, my Java application is not able to perform a mysqldump backup using the windows runtime enviroment. I have printout code for caught exceptions and I see no exceptions being thrown, looks fine on the surface when the backup code is executed.

I have also tested the mysqldump command in the command-line console; and it works with no issue there.

Code:

```
Runtime rt = Runtime.getRuntime();
try {
    Process pr = rt.exec("mysqldump -u test --password=pass lager > newBackup.sql");

} catch (IOException ex) {
     System.out.println("IO error Runtime.  "+ex.getMessage());
} 
```

Does anyone know why it will not dump/backup the database? Is there some permission I need to add or something (running windows 7).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-18T12:24:05.230

也许你可以看看这篇关于beetwen exec和命令行的区别的文章（[http://www.javaworld.com/article/2071275/core-java/when-runtime-exec---won-t.html](http://www.javaworld.com/article/2071275/core-java/when-runtime-exec---won-t.html)） .

在我这边，我尝试使用该代码捕获 mysqldump --help 命令的输出，并在 javaworld 的文章中找到 Class StreamGoggle：

```
 public Main() {
    try {
        FileOutputStream fos = new FileOutputStream("c:/tmp/test.txt");
        Runtime rt = Runtime.getRuntime();
        Process proc = rt.exec("mysqldump --help");
        // any error message?
        StreamGobbler errorGobbler = new StreamGobbler(
                proc.getErrorStream(), "ERROR");

        StreamGobbler outputGobbler = new StreamGobbler(
                proc.getInputStream(), "OUTPUT", fos);

        errorGobbler.start();
        outputGobbler.start();

        int exitVal = proc.waitFor();
        System.out.println("ExitValue: " + exitVal);
        fos.flush();
        fos.close();
    } catch (Throwable t) {
        t.printStackTrace();
    }
} 
```

# iphone - Inserting a new managed object in Core Data

> ID：10732785
> 
> 赞同：2
> 
> 时间：2012-05-24T07:10:00.447
> 
> 标签：iphone, objective-c, ios, core-data

I am new to Core Data and I feel that I don't get a hang of it. When you are going to create a new managed object you have to use the method that I pasted in at the bottom from the NSEntityDescription class.

Now is this object registered in the context, it is right? Why do you have the `insertObject:` in NSManagedContext then? It works without invoking that method after using the one in `NSEntityDescription`. Could somebody explain?

**NSManagedContext**

```
insertObject: 
```

**NSEntityDescription**

```
+ (id)insertNewObjectForEntityForName:(NSString *)entityName inManagedObjectContext:(NSManagedObjectContext *)context 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:13:23.167

您可以使用上下文创建 NSManagedObject，`nil`然后决定是否要将其添加到上下文中。你可能也喜欢这样：[有没有办法在不插入的情况下实例化一个 NSManagedObject？](https://stackoverflow.com/q/3868514/730701)

# java - 使用 Jersey 客户端 POST 方法调用 RESTful Web 服务时出错

> ID：10732788
> 
> 赞同：1
> 
> 时间：2012-05-24T07:10:17.363
> 
> 标签：java, web-services, jersey, http-post, restful-url

> 尝试使用 POST 方法（使用表单参数）使用 Restful Web 服务时出错。

我想使用 POST 方法使用 REST 应用程序。请在下面找到我要访问的资源类。

```
@Path("/user") 
```

公共类用户{

```
@POST
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
public Response get(@FormParam("username") String userName,
        @FormParam("userid") String userId  ){ 
```

}

我尝试使用 Jesry Client 进行访问。请在下面找到我尝试过的代码。我尝试向 FormParam 添加值，如下所示。

## 步道 1

```
WebResource webResource = client.resource("baseURL/user");

String input = "userid:1001,username:demo1";
ClientResponse response = webResource.type("application/x-www-form-urlencoded").post(ClientResponse.class, input); 
```

我收到一个错误响应“服务器遇到内部错误 () 阻止它完成此请求”。我想我没有正确地将值添加到 FormParam。

## 试验 2

我还尝试使用以下代码添加表单参数

```
MultivaluedMap formData = new MultivaluedMapImpl();
    formData.add("userid", "1001");
    formData.add("username", "demo1");
    ClientResponse response = webResource.type("application/x-www-form-urlencoded").post(ClientResponse.class, formData); 
```

这也导致了同样的错误。

## 试验 3

```
Form f = new Form();
    f.add("userid", "1001D");
    f.add("username", "1001D");

    ClientResponse response = webResource.type(MediaType.APPLICATION_FORM_URLENCODED_TYPE).post(ClientResponse.class, f); 
```

这也导致了同样的错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:26:51.680

由于您的错误表明“服务器遇到内部错误”，您需要查看服务器（日志）以查看出现了什么问题。当然，您的第三个客户端看起来可以很好地访问您定义的服务（假设您使用的是真实的东西而不是字符串“baseURL”）。

您可以通过创建一个 HTML 页面来访问该服务，从而轻松地测试您的服务器是否与您的客户端分开工作。使用 enctype="application/x-www-form-urlencoded" 创建一个 HTML 表单，并使用表单参数 userid 和 username 发布到您的服务端点（您称之为“baseURL/user”）。当您在浏览器中查看 HTML 表单并点击提交按钮时，它将调用您的服务器 - 如果您遇到相同的错误，您可以确定它与您的客户端代码无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:35:04.510

希望[http://yogeshmprajapati.blogspot.in/2011/12/login-to-fb-from-java.html](http://yogeshmprajapati.blogspot.in/2011/12/login-to-fb-from-java.html)对您有所帮助。

# .net - 如何确定 .NET 4 中当前的 Gabarge 收集器模式是什么？

> ID：10732794
> 
> 赞同：4
> 
> 时间：2012-05-24T07:10:35.773
> 
> 标签：.net, .net-4.0, garbage-collection

.NET 垃圾收集器有几种模式。我想知道 Windows Server SKU 的默认模式是什么。如何确定 .NET 4 中当前的 Gabarge 收集器模式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:55:45.163

Niranjan 的回答包括更多相关细节，但我相信您的实际问题的答案是[`System.Runtime.GCSettings`](http://msdn.microsoft.com/en-us/library/system.runtime.gcsettings.aspx).

它包括以下属性：

*   `IsServerGC`- 指示是否启用服务器垃圾收集。
*   `LatencyMode`- 指示垃圾收集的当前延迟模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:06:34.003

我建议您阅读 Chris Lyon 的 WebLog 文章 [How To Tell which GC Mode Your Application Is Using](http://blogs.msdn.com/b/clyon/archive/2005/02/04/367419.aspx)和 Steven Hollidge 的[Garbage Collector .NET 4](http://stevenhollidge.blogspot.in/2012/04/garbage-collector-net-4.html)。

> 在 .NET 4 中引入：背景 [和前景]（仅限工作站）
> 
> 从 .NET Framework 版本 4 开始，后台垃圾回收取代了并发垃圾回收。

此外，有关更多信息，您可以查看 Scott Hanselman 的[Using the Server (instead of Workstation) Garbage Collector with the .NET Framework (CLR)](http://www.hanselman.com/blog/CommentView.aspx?guid=d45f6073-ea61-416c-ba7e-3c56651ed7a6) 和这个 - [Garbage Collection Modes - GCCollectionMode](http://weblogs.asp.net/wallym/archive/2007/04/15/garbage-collection-modes-gccollectionmode.aspx)， Chris Lyon's - [Server, Workstation and Concurrent GC](http://blogs.msdn.com/b/clyon/archive/2004/09/08/226981.aspx)

***编辑：***

> **Que：如何确定 .NET 4 中当前的 Gabarge Collector 模式是什么？**

[System.Environment.IsServerGC](http://lab.msdn.microsoft.com/library/default.asp?url=/library/en-us/cpref/html/P_System_Environment_IsServerGC.asp) 应该用于检查服务器 GC，`System.Runtime.GCSettings.IsServerGC`如果我们处于服务器 GC 模式，则返回 true，如果处于工作站模式，则返回 false。

> **问：Windows Server SKU 的默认模式是什么。**

这**`Microsoft .NET Framework common language runtime (CLR) uses the Server garbage collector (GC) on multiprocessor computers.`**是默认行为[。](http://support.microsoft.com/kb/911716)服务器垃圾收集器针对多处理器计算机上的可扩展吞吐量进行了优化。为了减少争用并提高多处理器计算机上的垃圾收集器性能，服务器垃圾收集器为每个处理器创建一个堆用于并行收集。

已`Workstation garbage collector`针对 进行了优化`low latency`。客户端应用程序通常需要低延迟。但是，低延迟可能会在您配置**`.NET Framework common language runtime to use the Workstation garbage collector.`**

# android - 在服务器上执行签名验证任务 inappbilling android

> ID：10732800
> 
> 赞同：2
> 
> 时间：2012-05-24T07:11:07.920
> 
> 标签：android

我想在android中实现inappbilling，因为我们想在我们的服务器上执行签名验证。任何人都可以让我知道我们需要遵循的过程来验证Java中的签名。我也想进行测试和生产我们的服务器将访问以验证签名的 url。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T09:06:56.860

该过程与Android中完全相同。您必须将签名数据和签名发送到您的服务器，并在那里进行验证。例如，如果您使用 servlet，您可以从 Android 执行 POST，并在您的 servlet 中获取`signature`和`signedData`请求参数。然后使用`Signature`类和你的公钥来验证。IAB 响应还包括一个随机数（随机生成的数字），为了也能够验证这一点，您还需要在服务器上生成随机数。简而言之：

1.  Android 客户端向服务器请求一个随机数
2.  服务器生成随机数并将其保存到数据库，然后将其返回给客户端
3.  Android 客户端使用 nonce 发送 IAB 请求
4.  Android 客户端向服务器发送 IAB 响应（签名和签名数据）
5.  服务器验证签名。如果无效，则返回错误。
6.  如果有效，则提取 nonce 并检查它是否是一台服务器生成的。
7.  服务器返回 OK 和任何相关内容（如果您购买了电影等）
8.  客户接受交易并启用功能/获取内容等。

没有测试或生产 URL，您必须从 Android 应用程序发送数据。

# android - 如何通过代码检查android videoview是否支持文件？

> ID：10732804
> 
> 赞同：5
> 
> 时间：2012-05-24T07:11:53.510
> 
> 标签：android, video, android-videoview, playback

我正在尝试通过 Android videoview 播放视频。这是我的代码：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.video);
VideoView videoView = (VideoView) findViewById(R.id.videoView);
videoView.setVideoURI(uri);
videoView.requestFocus();
videoView.start(); 
```

这很好用，但是有些手机仍然显示标题为“无法播放视频”的对话框。

我的问题是如何禁用此通知窗口？我的意思是，我可以在调用 videoView.start() 之前检查视频文件是否受支持吗？或者我可以禁用或阻止调用系统弹出通知窗口吗？

如果手机不支持，我想直接跳过视频，没有通知窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:23:30.043

在您启动 VideoView 之前，我使用了 setOnErrorListener 来检查视频是否会播放。

```
 // Restart if PROBLEM
    myVideoView.setOnErrorListener(new MediaPlayer.OnErrorListener() {

        public boolean onError(MediaPlayer mp, int what, int extra) {
            // TODO Auto-generated method stub
            Intent intent = getIntent();
            overridePendingTransition(0, 0);
            intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);

            finish();

            overridePendingTransition(0, 0);
            startActivity(intent);

            return true;
        }

    });
    myVideoView.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T13:24:22.783

我找到了另一种简单的方法`MediaPlayer`来解决这个问题的一部分。

```
try {
    MediaPlayer mp = MediaPlayer.create(this, uri);
    mp.release();
} catch (Exception e) {
    Log.e("MediaPlayer", "can NOT play: " + uri);
} 
```

上面的代码可以过滤掉大部分不支持的视频`VideoView`，但并不完美，因为我发现一些不支持的`mkv/mpg`视频也通过了上面的测试。

无论如何，这是另一种思路。我把它贴在这里，希望有人可以改进它。

# sharepoint-2010 - 如何刷新无效的 SPWebConfigModifications

> ID：10732808
> 
> 赞同：3
> 
> 时间：2012-05-24T07:12:30.903
> 
> 标签：sharepoint-2010, wsp

如何清除无效的 SPWebConfigModifications？

作为解决方案的一部分，我尝试执行一些无效修改，现在我无法摆脱它们，每次运行 ApplyWebConfigModifications 它都会尝试执行无效修改。

如何将它们从系统中清除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:19:21.167

供将来参考（在我的头撞到墙上 3 天后）：

您可以使用此工具：

[http://ianankers.wordpress.com/2011/07/14/web-config-modification-manager-for-sharepoint-2010/](http://ianankers.wordpress.com/2011/07/14/web-config-modification-manager-for-sharepoint-2010/)

它将列出您农场中安装的每个 WebApp 的所有 mod，您可以添加新的和删除旧的。

该工具只会列出 webapp 级别的修改，如果您在农场级别安装了 mod，则需要运行如下脚本：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.SharePoint;
using Microsoft.SharePoint.Navigation;
using Microsoft.SharePoint.Administration;

namespace ModTool
{
    class Program
    {
        static void Main(string[] args)
        {

            SPSite site = new SPSite(args[0]);
            SPWebService service = site.WebApplication.Farm.Services.GetValue<SPWebService>();

            if (args.Length == 1 || string.IsNullOrEmpty(args[1]))
            {
                Console.Out.WriteLine("Listing all Mods and Owners");
                foreach (SPWebConfigModification mod in service.WebConfigModifications)
                {
                    Console.Out.WriteLine("Mod:" + mod.Name + ", Owner:" + mod.Owner);
                }
            }
            else
            {
                Console.Out.WriteLine("Removing all mods owner:" + args[1] + ", reference site:" + args[0]);

                List<SPWebConfigModification> toDelete = new List<SPWebConfigModification>();

                foreach (SPWebConfigModification mod in service.WebConfigModifications)
                {
                    if (mod.Owner == args[1])
                    {
                        toDelete.Add(mod);
                    }
                }

                Console.Out.WriteLine("Found " + toDelete.Count + "Mods");

                foreach (SPWebConfigModification mod in toDelete)
                {
                    service.WebConfigModifications.Remove(mod);
                }
                service.Update();
                SPWebService.ContentService.ApplyWebConfigModifications();
                Console.Out.WriteLine("Done!!");
            }
        }
    }
} 
```

用法：

```
ModTool http://site - List all the mods for the farm, site is just an entry point
ModTool http://site owner -Deletes all the mods for the far wich owner is "owner" 
```

# c#-4.0 - 为信用卡支付处理创建一个 WEBSERVICE

> ID：10732811
> 
> 赞同：-1
> 
> 时间：2012-05-24T07:12:55.427
> 
> 标签：c#-4.0

如何在 C#.NET 中为信用卡支付处理创建 WEBSERVICE？

我想处理电子支付。我目前正在使用 PayPal，但它的成本太高了。许多公司能够在不使用网关的情况下提供电子支付。我想他们直接使用银行网络服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:22:41.523

I think you have to implement interface for each gateway: Authorize.net, SkipJack, Moneris, Mrw etc. Some of them give you a DLL to use their gateway or provide documentation how to make requests to API. Otherwise I think you need to implement interface for each bank you want to receive payment..

# python - 嵌套列表并转换为浮点数

> ID：10732812
> 
> 赞同：0
> 
> 时间：2012-05-24T07:13:13.033
> 
> 标签：python, list, floating-point, nested-lists

我正在尝试从文本文件中读取一些数字并将它们转换为浮点数列表，但我尝试的任何方法似乎都无法正常工作。

这是我现在的代码：

```
python_data = open('C:\Documents and Settings\redacted\Desktop\python_lengths.txt','r')
python_lengths = []
for line in python_data:
    python_lengths.append(line.split())
python_lengths.sort()

print python_lengths 
```

它返回：

```
[['12.2'], ['26'], ['34.2'], ['5.0'], ['62'], ['62'], ['62.6']] 
```

（包括所有括号）

但我无法使用任何常规命令将其转换为浮点列表，例如：

```
python_lengths = float(python_lengths) 
```

或者：

```
float_lengths = [map(float, x) for x in python_lengths] 
```

因为它似乎是嵌套的还是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T07:16:47.773

发生这种情况是因为`.split()`即使只有 1 个元素也总是返回一个项目列表。如果你改变你的`python_lengths.append(line.split())`，`python_lengths.extend(line.split())`你会得到你期望的平面列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:19:01.650

@eumiro 的回答是正确的，但这里还有一些可以提供帮助的东西：

```
numbers = []
with open('C:\Documents and Settings\redacted\Desktop\python_lengths.txt','r') as f:
   for line in f.readlines():
      numbers.extend(line.split())

numbers.sort()
print numbers 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:37:08.160

```
def floats_from_file(f):
    for line in f:
        for word in line.split():
            yield float(word)

with open('C:/Documents and Settings/redacted/Desktop/python_lengths.txt') as f:
    python_lengths = list(floats_from_file(f))

python_lengths.sort()

print python_lengths 
```

请注意，即使在 Windows 上，您也可以使用正斜杠。如果你想使用反斜杠，你应该使用“原始”字符串，以避免出现问题。什么样的问题？好吧，有些字符是特殊的反斜杠；例如，`\n`表示换行符。如果您只是将路径放在普通引号中，并且其中一个目录名称以 开头`n`，您将在那里获得一个换行符。解决方案是将反斜杠加倍、使用原始字符串或仅使用正斜杠。

# android - 如何在渲染脚本中制作圆柱体

> ID：10732813
> 
> 赞同：1
> 
> 时间：2012-05-24T07:13:15.420
> 
> 标签：android, renderscript

我一直在尝试在渲染脚本中制作一个圆柱体。这是我尝试过的代码：

```
public Mesh cylinder(){
    float radius=1.25f, halfLength=5;
    int slices=16;

    Mesh.TriangleMeshBuilder mbo= new TriangleMeshBuilder(mRSGL,3, Mesh.TriangleMeshBuilder.TEXTURE_0);
    for(int i=0; i<slices; i++) {
    float theta = (float) (((float)i)*2.0*Math.PI);
    float nextTheta = (float) (((float)i+1)*2.0*Math.PI);

        /*vertex at middle of end*/
    mbo.addVertex(0.0f, halfLength, 0.0f);

        /*vertices at edges of circle*/
    mbo.addVertex((float)(radius*Math.cos(theta)), halfLength, (float)(radius*Math.sin(theta)));
        mbo.addVertex((float)(radius*Math.cos(nextTheta)), halfLength, (float)(radius*Math.sin(nextTheta)));

        /* the same vertices at the bottom of the cylinder*/

    mbo.addVertex((float)(radius*Math.cos(nextTheta)), -halfLength, (float)(radius*Math.sin(nextTheta)));
    mbo.addVertex((float)(radius*Math.cos(theta)), halfLength, (float)(radius*Math.sin(theta)));
    mbo.addVertex(0.0f, -halfLength, 0.0f);

    mbo.addTriangle(0, 1, 2);
    mbo.addTriangle(3, 4, 5);

}
    return mbo.create(true);

} 
```

但是这段代码给了我一个长度为 5 的矩形。我哪里出错了有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:50:01.047

您实际上在这里遇到了一些问题。首先，你的角度总是等于 2pi 的倍数。计算角度时，您需要除以扇区数。此外，在这一步中，您有一个不必要的显式类型转换，java 将为您处理整数到双精度的转换。

其次，您不断地向网格中添加相同的两个三角形，而不是为圆柱体的侧面添加任何三角形，只添加两个端面。在调用 addTriangle() 时，您应该在循环中使用索引，例如 addTriangle(n, n+1, n+2)。

最后，当您创建第 4 个顶点时，您错过了一个负号，因此它实际上是 halfLength，而不是 -halfLength。

试试这个：

```
public Mesh cylinder(){
    float radius=1.25f, halfLength=5;
    int slices=16;

    Mesh.TriangleMeshBuilder mbo= new TriangleMeshBuilder(mRSGL,3, Mesh.TriangleMeshBuilder.TEXTURE_0);

    /*vertex at middle of end*/
    mbo.addVertex(0.0f, halfLength, 0.0f);
    mbo.addVertex(0.0f, -halfLength, 0.0f);

    for(int i=0; i<slices; i++) {
         float theta = (float) (i*2.0*Math.PI / slices);
         float nextTheta = (float) ((i+1)*2.0*Math.PI / slices);

         /*vertices at edges of circle*/
         mbo.addVertex((float)(radius*Math.cos(theta)), halfLength, (float)(radius*Math.sin(theta)));
         mbo.addVertex((float)(radius*Math.cos(nextTheta)), halfLength, (float)(radius*Math.sin(nextTheta)));

         /* the same vertices at the bottom of the cylinder*/
         mbo.addVertex((float)(radius*Math.cos(nextTheta)), -halfLength, (float)(radius*Math.sin(nextTheta)));
         mbo.addVertex((float)(radius*Math.cos(theta)), -halfLength, (float)(radius*Math.sin(theta)));

         /*Add the faces for the ends, ordered for back face culling*/
         mbo.addTriangle(4*i+3, 4*i+2, 0); 
         //The offsets here are to adjust for the first two indices being the center points. The sector number (i) is multiplied by 4 because the way you are building this mesh, there are 4 vertices added with each sector
         mbo.addTriangle(4*i+5, 4*i+4, 1);
         /*Add the faces for the side*/
         mbo.addTriangle(4*i+2, 4*i+4, 4*i+5); 
         mbo.addTriangle(4*i+4, 4*i+2, 4*i+3);
    }
return mbo.create(true);

} 
```

我还添加了一个轻微的优化，其中圆心的顶点只创建一次，从而节省了内存。这里的索引顺序用于背面剔除。如果您想要正面，请将其反转。如果您最终需要更有效的方法，分配构建器允许使用 trifans 和 tristrips，但对于这种复杂的网格，三角形网格的易用性是值得的。我已经在我自己的系统上运行了这段代码来验证它是否有效。

# c# - 集合基类中的 IList 列表？

> ID：10732817
> 
> 赞同：0
> 
> 时间：2012-05-24T07:13:33.820
> 
> 标签：c#, c#-4.0, collections, interface, collectionbase

问题是关于实现奇怪属性的集合基类：

```
protected IList List { get; } 
```

1) 集合基类中的 Ilist List 是什么？...

2）它甚至没有初始化......那么它怎么能被访问......

3) 什么时候使用这个列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:32:18.350

实际上，在`CollectionBase`类中，代码如下：

```
protected IList List
{
    get
    {
        return this;
    }
} 
```

因此，它可以毫无错误地编译。

当派生类或`CollectionBase`自身调用`List`属性时，它会返回list( `this`)的实例。如果您正在设计 的子类`CollectionBase`，则可以在任何想要获取类型实例的地方使用此属性`IList`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:18:09.530

1) IList 是一个接口，任何作为 IList 实现的类都可以由类的 List 属性返回。也就是说，你只知道它可以做IList的接口规范。

2）你不能，你必须先初始化你的类，然后才能从类中获取属性列表。IList 被初始化为实现 IList 接口的类。

3）这取决于类的规范。我猜它会将当前列表中的项目作为 IList 返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:17:09.747

这段代码甚至不会编译。自动实现的属性必须同时具有 get 和 set 访问器。

如果它在抽象基类中并用 abstract 关键字标记，它将编译：

```
protected abstract IList List { get; } 
```

然后由派生类来实现这个属性的getter。

# iphone - iOS 中的网络服务

> ID：10732818
> 
> 赞同：-3
> 
> 时间：2012-05-24T07:13:43.087
> 
> 标签：iphone, objective-c, web-services, ipad

我在 iOS 设备上使用 SOAP 协议制作了一个使用 Web 服务的应用程序。现在我想创建这样一个应用程序，其中我的 iOS 设备应该作为其他设备的 Web 服务器。这可能吗？如果可能，请提供一些指导或链接来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:23:34.877

[在http://culturedcode.com/cocoa/](http://culturedcode.com/cocoa/)中解释了将 Web 服务器实现为 iPhone 应用程序，请参考它也请参考这个问题的答案 [iPhone 应用程序作为 Web 服务器，有什么建议吗？](https://stackoverflow.com/questions/3221027/iphone-app-as-a-web-server-any-advice)

# javascript - 如何防止页面在ajax中刷新时进入主页

> ID：10732826
> 
> 赞同：1
> 
> 时间：2012-05-24T07:14:28.420
> 
> 标签：javascript, jquery, html, ajax, jsp

我在我们的 Web 应用程序中使用 ajax，并在服务器使用 innerhtml() 响应后在标签中加载表单

但是当我使用 f5 刷新页面时，我的应用程序页面会转到应用程序的第一页

我怎样才能防止这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:40:40.483

有几种方法可以做到这一点，使用 cookie（我不推荐），使用 url 哈希标记/锚标记并使用 javascript 解析 # 之后的数据，或者使用[历史 API](http://html5demos.com/history)

不要使用 jQuery，除非你很懒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:26:24.173

您还可以查看 jQuery BBQ，它允许您保存 ajax 状态。 [http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

示例（警告不要去那里如果你饿了）：
[http ://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/#kebabs.html](http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/#kebabs.html)

# c++ - C++成员函数声明中volatile关键字的位置

> ID：10732828
> 
> 赞同：1
> 
> 时间：2012-05-24T07:14:43.523
> 
> 标签：c++, multithreading, volatile

方法声明中 'volatile' 关键字的位置会影响其功能吗？

即，以下两段代码之间有什么区别吗？

一种。

```
class Test
{
public:
    volatile void testMe() 
    {
    }
}; 
```

B.

```
class Test
{
public:
    void testMe() volatile 
    {
    }
}; 
```

当成员函数有返回值时也是如此。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T07:18:55.813

这与`const`预选赛相同。

在第一个示例中，`volatile`应用于函数的返回值。在这种情况下它是无效的，所以它没有多大意义。实际上，通过 volatile value ^*返回并没有多大意义。volatile 返回类型仅对引用有意义：

```
volatile int& foo() { ... }
volatile int& i = foo(); // OK
int j = foo(); // OK, use the volatile reference to construct a non volatile int
int& j = foo(); // Error! 
```

在第二种情况下，这意味着该方法是`volatile`，因此可以在类的（非常量）非易失性**和易**失性实例上调用它`Test`。`volatile`无法在`volatile`实例上调用没有限定符的类似方法。

```
Test test0;
test0.testMe(); // OK
volatile Test test1;
test1.testMe(); // OK
test1.someNonVolatileMethod(); // Error. 
```

^*除非该值是一个指针

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T07:17:08.250

适用于的相同规则`const`适用于`volatile`.

返回时`void`（而不是返回），`volatile`在第一个片段中是没用的。

第二个片段将整个方法标记为`volatile`.

例如，如果您有：

```
volatile Test m;
m.testMe(); 
```

只有 compiles 被`testMe`标记为`volatile`（就像你的第二个代码一样）。

# html - 在 Outlook 回复中返回 .png 文件的 HTML 电子邮件签名

> ID：10732829
> 
> 赞同：0
> 
> 时间：2012-05-24T07:14:43.913
> 
> 标签：html, email, outlook, png, signature

我正在为我的公司创建一些电子邮件签名，但遇到了一个小问题。

我可以很好地使用 Outlook（当我使用 Outlook 发送给用户时，签名看起来很完美），但是当他们回复时，**签名文本**会变成 .png 文件，而背景图像仍然显示。

我不确定为什么 Outlook 将其变成 .png？

有没有人经历过这个？

**图片。**

1.  这就是签名应该看起来的样子，并且在 Outlook 和 Mac 邮件中看起来确实如此。

2.  这就是 Outlook 用户回复我的电子邮件时发生的情况。它通过将其转换为 .png 来保留 sig 并混淆文本，如下图所示。

3.  这是 Outlook 用户响应时转换为 .png 的签名。

![在此处输入图像描述](../Images/6e201404667b6c81d1835c1093bf3fa9.png)

![http://bit.ly/Kcxx39](../Images/c3e581642ee4649f0e72fbbd5a6c4592.png)

![在此处输入图像描述](../Images/d45a4bc6f98ae57f9d5b77429916acfb.png)

```
<br />
<br />
<table width="524" border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse;">
<tr>
    <td style="width: 524px; height: 244px; background-image: url('http://photography.kastnerandpartners.com.au/email/rb_guy.jpg');">
        <!--[if gte mso 9]>
        <v:image xmlns:v="urn:schemas-microsoft-com:vml" id="theImage" style='behavior: url(#default#VML); display: inline-block; position: absolute; width: 524px; height: 244px; top: 0; left: 0; border: 0; z-index: 1;' src="http://photography.kastnerandpartners.com.au/email/rb_guy.jpg" />
        <v:shape xmlns:v="urn:schemas-microsoft-com:vml" id="theText" style='behavior: url(#default#VML); display: inline-block; position: absolute; width: 524px; height: 244px; top: 14; left: 40; border: 0; z-index: 2;'>
        <div>
        <![endif]-->
        <table width="524"; height: "244"; border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse;">
          <tr>
            <td height="244" align="left top" valign="top">

                <p style="z-index:2; padding: 14px 0 0 40px; line-height: 18px; font-family: 'Courier New', Courier, monospace; font-weight:800; font-size: 12px; color: #999999;">
            <br />
            <img src="http://photography.kastnerandpartners.com.au/email/KP-logo.png"><br />
            <span style="-webkit-text-size-adjust:none; font-size:12px;"><strong style="color: #333333">Michael Birchall</strong> | Art Director | <a href="http://kastnerandpartners.com.au" title="kastnerandpartners.com.au" style="color: #666666; text-decoration: none; border-bottom: 1px #cccccc dotted;">kastnerandpartners.com.au</a></span><br />            
            Level 2,  137 Pyrmont St, Pyrmont NSW 2009, Australia<br />
            t +61 2 8585 5555  | m +61 413 354 019<br />
            e <a href="mailto:michael.birchall@kastnerandpartners.com.au" style="color: #999999;">michael.birchall@kastnerandpartners.com.au</a><br />

                </p>         
            </td>
          </tr>
        </table>
        <!--[if gte mso 9]>
        </div>
        </v:shape>
        <![endif]-->
    </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:41:34.620

VML 方法仅用于从部署服务（如 Campaign Monitor、MailChimp 等）发送 HTML 电子邮件时的背景图像。从 Outlook 中发送电子邮件时，程序本身会将自己的代码添加到您的签名中，这将删除/剥离您创建的编码（包括 VML 代码）。

最重要的是，Outlook 因在回复时弄乱任何电子邮件的 HTML 而臭名昭著，因此无法保证您发送的内容将保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:03:14.910

以防将来有人想知道。我通过简单地将图像放在表格和表格单元格中来解决了这个问题。

Outlook 现在可以很好地呈现签名（以及 Outlook 2007？） - 另一方面，Lotus notes 会出现恐慌症，并且会用红色 x 呈现所有内容。

我在使用 Outlook 2010 时遇到问题 - 它在第一个和第二个之间存在差距......有人能看到这段代码出了什么问题吗？

```
<table id="Table_01" width="524" border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse;">
  <tr>
    <td colspan="3" style="padding:0;" cellpadding="0" cellspacing="0"><img src="http://photography.kastnerandpartners.com.au/email/bell/bell_01.png" width="524" height="19" alt="" style="background-color:#ffbb39;"></td>
  </tr>
  <tr>
    <td rowspan="2" style="padding:0;" cellpadding="0" cellspacing="0"><img src="http://photography.kastnerandpartners.com.au/email/bell/bell_02.png" width="18" height="151" alt="" style="background-color:#ffbb39;"></td>
    <td width="488" align="left top" valign="top" alt="" style="background-color:#fff; padding: 10px 0 0 25px;" cellpadding="0" cellspacing="0">
    <p style="padding: 0; line-height: 18px; font-family: 'Courier New', Courier, monospace; font-weight:800; font-size: 12px; color: #999999;">
    <img src="http://photography.kastnerandpartners.com.au/email/KP-logo.png"><br />
        <span style="-webkit-text-size-adjust:none; font-size:12px;"><strong style="-webkit-text-size-adjust:none; font-size:12px; color: #333333;">Michael Birchall</strong> | Art Director | <a href="http://kastnerandpartners.com.au" title="kastnerandpartners.com.au" style="color: #666666; text-decoration: none; border-bottom: 1px #cccccc dotted;">kastnerandpartners.com.au</a></span><br />
        <span style="-webkit-text-size-adjust:none; font-size:12px;"><strong style="color: #999999">Level 2,  137 Pyrmont St, Pyrmont NSW 2009, Australia<br />
        t +61 2 8585 5555 | m +61 413 354 019<br />
        e <a href="mailto:michael.birchall@kastnerandpartners.com.au" style="color: #999999;">michael.birchall@kastnerandpartners.com.au</a><br />
        </strong></span> </p></td>
    <td rowspan="2" style="padding: 0;" cellpadding="0" cellspacing="0"><img src="http://photography.kastnerandpartners.com.au/email/bell/bell_04.png" width="18" height="151" alt="" style="background-color:#ffbb39;"></td>
  </tr>
  <tr>
    <td valign="bottom" style="padding: 0;" cellpadding="0" cellspacing="0"><img src="http://photography.kastnerandpartners.com.au/email/bell/bell_05.png" width="488" height="18" alt="" style="background-color:#ffbb39;"></td>
  </tr>
  <tr>
    <td colspan="3" style="padding: 0;" cellpadding="0" cellspacing="0">
    <img src="http://photography.kastnerandpartners.com.au/email/bell/bell_06.png" width="524" height="74" alt="" style="background-color:#ffbb39;">

      </td>
  </tr>
</table> 
```

# c++ - 识别 C/C++ 中未使用的函数

> ID：10732832
> 
> 赞同：2
> 
> 时间：2012-05-24T07:14:56.137
> 
> 标签：c++, c, function, dead-code

> **可能重复：**
> [在大型 C++ 遗留应用程序中查找“死代码”](https://stackoverflow.com/questions/2380153/finding-dead-code-in-a-large-c-legacy-application)

我的项目有很多 C 源文件，每个文件都有很多全局函数。其中许多根本不再被任何调用者引用。有没有一种简单的方法来识别这些函数中的哪些函数根本没有被任何人引用？

VC生成的地图文件似乎很有用。但我不确定函数名称是如何/何时在地图文件中列出的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T07:23:48.923

您可以使用[CCCC](http://cccc.sourceforge.net/)（免费、开源），它可以为您提供有关您的程序的大量指标。另一种选择是[Coverity](http://www.coverity.com/)（不是免费的）。

这个问题可能与这个问题重复：[Dead code detection in legacy C/C++ project](https://stackoverflow.com/q/229069/1158895)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:48:36.780

I don't think that the map file will be of any use. If it's like other map files I've seen, it won't indicate where (if anywhere) a symbol is used—only where it is defined. What you can do is run `dumpbin` over your object files: `dumpbin /relocations`, for example, will in fact display every use of a symbol with an address which may need relocation (practically speaking, functions and variables with static lifetime). You then use your usual tools on the output to determine whether the function you are interested in is there or not. (As someone who has worked mostly on Unix, I've installed CygWin and would use `grep`. I'm not familiar with the native equivalents to the different Unix tools under Windows.)

It would be fairly simple (using Python, or some similar scripting language) to write a small script which would parse the output of `dumpbin /symbols` for each of your object files, to get the names of all of the functions you've defined, then parses the output of `dumpbin /relocations` to give you a list of the functions you use, and finally does the diff of the two. (Microsoft seems to have gone out of their way to make the output of `dumpbin` difficult to use, but it's still not that difficult; you just have to know which lines to ignore.)

# java - 为什么我们在 Hadoop 堆栈中需要 ZooKeeper？

> ID：10732834
> 
> 赞同：39
> 
> 时间：2012-05-24T07:15:21.027
> 
> 标签：java, hadoop, apache-zookeeper

我是 Hadoop/ZooKeeper 的新手。我无法理解将 ZooKeeper 与 Hadoop 一起使用的目的，ZooKeeper 是否在 Hadoop 中写入数据？如果不是，那我们为什么要在 Hadoop 中使用 ZooKeeper？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-24T20:48:10.703

Hadoop 1.x 不使用 Zookeeper。即使在 Hadoop 1.x 安装中，HBase 也使用 zookeeper。

Hadoop 从 2.0 版开始也采用了 Zookeeper。

Zookeeper 的目的是集群管理。这符合 *nix 使用较小的专用组件的一般理念——因此需要集群功能的 Hadoop 组件依赖于 Zookeeper 而不是自己开发。

Zookeeper 是一个分布式存储，它提供以下保证（从[Zookeeper 概述页面](http://zookeeper.apache.org/doc/trunk/zookeeperOver.html)复制）：

*   顺序一致性 - 来自客户端的更新将按照它们发送的顺序应用。
*   原子性 - 更新成功或失败。没有部分结果。
*   单一系统映像 - 客户端将看到相同的服务视图，而不管它连接到的服务器如何。
*   可靠性 - 应用更新后，它将从那时起持续存在，直到客户端覆盖更新。
*   及时性——系统的客户视图保证在一定的时间范围内是最新的。

您可以使用它们来实现集群管理所需的不同“[配方](http://zookeeper.apache.org/doc/trunk/recipes.html)”，例如锁、领导者选举等。

如果你打算自己使用 ZooKeeper，我建议你看看 [Netflix 的 Curator，](https://github.com/Netflix/curator/wiki)它更容易使用（例如，他们实现了一些开箱即用的食谱）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-24T07:43:47.770

Zookeeper 解决了可靠的分布式协调问题，而 hadoop 是一个分布式系统，对吧？

你可以阅读一篇关于这个主题的优秀论文[Paxos Algorithm 。](http://research.microsoft.com/en-us/um/people/lamport/pubs/paxos-simple.pdf)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-07-12T09:44:23.550

从[动物园管理员](http://zookeeper.apache.org/)文档页面：

> ZooKeeper 是一个集中式服务，用于维护配置信息、命名、提供分布式同步和提供组服务。所有这些类型的服务都以某种形式被分布式应用程序使用。
> 
> 每次实施它们时，都会进行大量工作来修复不可避免的错误和竞争条件。由于实现这些服务的难度，应用程序最初通常会忽略它们，这使得它们在发生变化时变得脆弱并且难以管理。即使正确完成，这些服务的不同实现也会在部署应用程序时导致管理复杂性。

从[hadoop](http://hadoop.apache.org/)文档页面：

> Apache™ Hadoop® 项目为可靠、可扩展的分布式计算开发开源软件。
> 
> Apache Hadoop 软件库是一个框架，允许使用简单的编程模型跨计算机集群分布式处理大型数据集

关于您的查询：

> 为什么我们在 Hadoop Stack 中需要 ZooKeeper？

绑定因素是分布式处理和高可用性。

例如 Hadoop Namenode 故障转移过程。

Hadoop 高可用性是围绕 Active Namenode 和 Standby Namenode 设计的，用于故障转移过程。在任何时候，您都不应该同时拥有两个主节点（活动的 Namenode）。

[来自HDFSHighAvailabilityWithQJM](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html)上的 Apache 文档链接：

> 一次只有一个 NameNode 处于活动状态对于 HA 集群的正确操作至关重要。否则，命名空间状态将很快在两者之间产生分歧，从而冒着数据丢失或其他不正确结果的风险。为了确保这个属性并防止所谓的“脑裂场景”，JournalNodes 将永远只允许一个 NameNode 一次成为写入者。
> 
> 在故障转移期间，将变为活动的 NameNode 将简单地接管写入 JournalNode 的角色，这将有效地防止另一个 NameNode 继续处于活动状态，从而允许新的 Active 安全地进行故障转移。

Zookeeper 已被用于避免脑裂的情况。您可以在以下问题中找到 Zookeeper 的角色：

[Hadoop Namenode 故障转移过程如何工作？](https://stackoverflow.com/questions/33311585/how-does-hadoop-namenode-failover-process-works/33313804#33313804)

# android - 以编程方式跟踪 sd 卡文件的路径

> ID：10732835
> 
> 赞同：0
> 
> 时间：2012-05-24T07:15:32.800
> 
> 标签：android, webview

我已将 html 文件放入 android 设备的 sd 卡中。我正在通过 webview 运行它。但是我在模拟器中给出的路径运行良好。但不在设备上。它在运行时给出错误** Web Page on Found**。

我有这个代码来查找 sd 卡可用性和 sd 卡根目录路径，它工作正常。并且输出正常。

```
Boolean isSDPresent = android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);

        if(isSDPresent)
        {
          Toast.makeText(this, "yes SD-card is present", Toast.LENGTH_SHORT).show(); }
        else
        {
            Toast.makeText(this, "Sorry", Toast.LENGTH_SHORT).show();
        }

        File externalStorage = Environment.getExternalStorageDirectory();
        externalStorage.getAbsolutePath();
        Toast.makeText(this, externalStorage.getAbsolutePath(), Toast.LENGTH_SHORT).show(); 
```

但我能得到正确的整个文件路径吗？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:31:30.187

这段代码绝对能解决你的问题

```
String storage_path = Environment.getExternalStorageDirectory().toString() 
                       + File.separator
                       + vfile; 
```

另外，如果您想在 sd 卡中添加一些文件，请在清单文件中使用此权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:38:58.707

也许这可以帮助你，试试吧。

```
String path = Environment.getExternalStorageDirectory().toString() + "/Filename_with_extension" ; 
```

# android - 如何在线性布局中制作半框架布局和半网格布局？

> ID：10732837
> 
> 赞同：0
> 
> 时间：2012-05-24T07:15:51.923
> 
> 标签：android

我正在尝试在 xml 中完成以显示半框架布局和半网格布局，而无需自己指定`dp` 这是我想要的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/top"
        android:layout_width="match_parent"
        android:layout_height="250dp"
        android:background="#FFFF00"
        android:layout_weight="0"
        android:orientation="vertical" >

    </FrameLayout>

    <GridView
        android:id="@+id/buttom"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:numColumns="3" >
    </GridView>

</LinearLayout> 
```

我不想指定这个的大小：

```
android:layout_height="250dp" 
```

因为我需要为所有尺寸重新创建这个 xml。也许我可以改变一些东西，android会计算所有尺寸？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T07:18:36.570

您可以按如下方式指定重量属性

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/top"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:background="#FFFF00"
        android:layout_weight="1" >

    </FrameLayout>

    <GridView
        android:id="@+id/buttom"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:numColumns="3" 
        android:layout_weight="1">
    </GridView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:21:23.100

通过添加`layout_weight="1"`框架布局和网格视图

# algorithm - 2D 中的滑动窗口最小值/最大值

> ID：10732841
> 
> 赞同：7
> 
> 时间：2012-05-24T07:16:27.547
> 
> 标签：algorithm, minimum, sliding-window

假设给定一个大小为 NxN 的像素的整数矩阵和一个整数 k - 窗口大小。我们需要使用滑动窗口找到矩阵中的所有局部最大值（或最小值）。这意味着如果一个像素与其周围窗口中的所有像素相比具有最小（最大值）值，则应将其标记为最小值（最大值）。有一个著名的滑动窗口最小算法，它在向量中找到局部最小值，但在矩阵中没有找到 [http://home.tiac.net/~cri/2001/slidingmin.html](http://home.tiac.net/~cri/2001/slidingmin.html)

你知道可以解决这个问题的算法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T00:28:13.367

由于最小滤波器是可分离滤波器，因此可以通过计算每个维度的 1D 滑动窗口最小值来计算 2D 滑动窗口最小值。对于 4x4 矩阵和 2x2 窗口，算法的工作原理如下：

假设这是一开始的矩阵

```
3 4 2 1
1 5 4 6
3 6 7 2
3 2 5 4 
```

首先，您分别计算矩阵每一行的一维滑动窗口最小值

```
3 2 1
1 4 4
3 6 2
2 2 4 
```

然后，计算上一个结果的每一列的一维滑动窗口最小值。

```
1 2 1
1 4 2
2 2 2 
```

结果与直接计算 2D 窗口的滑动窗口最小值相同。这样，您可以使用 1D 滑动窗口最小值算法来解决任何 nD 滑动窗口最小值问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-29T11:36:41.350

这是上述方法的 c++ 实现。

```
class MaxQ {
public:
    queue<int>q;
    deque<int>dq;
    void push(int x)
    {
        q.push(x);
        while (!dq.empty() && x > dq.back())
        {
            dq.pop_back();
        }
        dq.push_back(x);

    }
    void pop()
    {
        if (q.front() == dq.front())
        {
            q.pop();
            dq.pop_front();
        }
        else q.pop();
    }
    int max()
    {
        return dq.front();
    }

};

vector<int> maxSliding_1d_Window(vector<int>& v, int k) {
    MaxQ q;
    int n = v.size();
    vector<int>ans;
    for (int i = 0; i < k; i++)
    {
        q.push(v[i]);
    }
    for (int i = k; i < n; i++)
    {
        ans.push_back(q.max());
        q.pop();
        q.push(v[i]);
    }
    ans.push_back(q.max());
    return ans;
}

vector < vector<int> > maxSliding_2d_Window( vector<vector<int>>v, int k)
{

    int n = v.size();
    int m = v[0].size();

    //caclulting sliding window horizontally
    vector<vector<int> > horizontal;
    for (int i = 0; i < v.size(); i++)
    {
        vector<int>part = maxSliding_1d_Window(v[i], k);
        horizontal.push_back(part);
    }

    vector< vector<int > >final(n - k + 1, vector<int>(m - k + 1, -3));
    int c = 0;

    //calculationg sliding window vertically
    for (int j = 0; j < horizontal[0].size() ; j++)
    {
        vector<int>v;
        for (int i = 0; i < horizontal.size(); i++)
        {
            v.push_back(horizontal[i][j]);
        }
        vector<int> tmp = maxSliding_1d_Window(v, k);

        // pushing the result in our resultant matrix
        for (int index = 0; index < n - k + 1; index++)
        {
            final[index][c] = tmp[index];
        }
        c++;

    }

    //return final matrix
    return final;

}
```

# azure - 我们的 Azure Web 应用程序的 Google Ical 导入失败

> ID：10732842
> 
> 赞同：0
> 
> 时间：2012-05-24T07:16:32.833
> 
> 标签：azure, google-calendar-api, icalendar

我们在 Windows Azure 上开发了一个 SaaS 解决方案。我们为每个用户的应用程序中的约会生成 Ical 提要。

Ical 似乎适用于 Outlook、iphone 等。谷歌日历是唯一一个不起作用的日历。

我们使用由 GoDaddy 签名的 SSL 证书。当使用正常的 http 连接时，Ical 似乎正常工作。

我会假设谷歌接受来自 GoDaddy 的证书，但似乎仍然存在问题？

我有不同的情况：

*   我们的事件弹出但又消失了，我们得到错误：'Could not fetch the URL'
*   或者我们的活动弹出，但我们不断收到消息“正在为 URL 导入日历”。那条信息永远留在那里。刷新时，我们的事件将保留但不会更新。

*   [使用http://severinghaus.org/projects/icv/](http://severinghaus.org/projects/icv/)验证 Ical 是可行的。

*   下载 .ics 并手动插入也可以。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:15:01.797

凯文，

Google 目前对所有 iCal 供稿都存在问题，这很可能是您的问题的原因。症状就像您描述的那样，它们出现然后消失。

谷歌还没有出来承认任何事情，但显然它已经结束了。希望我们能尽快修复，我和你在同一条船上。

您可以在此处关注问题：

[http://productforums.google.com/forum/#!topic/calendar/tB7ICbqeLpo](http://productforums.google.com/forum/#!topic/calendar/tB7ICbqeLpo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T15:07:04.577

问题似乎与您的 SSL 证书有关。在这里回答了类似的问题[Google calendar can't import my ical file](https://stackoverflow.com/questions/19764216/google-calendar-cant-import-my-ical-file/21459955#21459955)

# wpf - 将 Membership Provider Database 与 Entity Framework 4.1 一起使用

> ID：10732844
> 
> 赞同：0
> 
> 时间：2012-05-24T07:16:38.220
> 
> 标签：wpf, wcf, entity-framework-4.1, asp.net-membership, aspnetdb

我已经使用 ASP.Net Configuration(aspnet_regsql.exe tool) 创建了数据库。我想使用 EF 4.1 来编写数据访问层。（然后我将在 WCF 服务中使用它并使用 WPF 应用程序中的服务）

我怎样才能使用 EF 4.1 来做到这一点.....

所以为了一个简单的演示..我想为用户管理编写函数

我知道我必须首先使用数据库（IN EF 4.1）方法..但是有很多表，通常数据库条目是使用存储过程（或 Sql Membership Provider 提供的类）完成的......当我添加一个用户或角色...许多表同时更新（Sp 这样做）... EF 4.1 将通过检查数据库的结构来做同样的事情..

我不会写任何代码，因为我不知道如何开始（除非我已经制作了数据库）

如何使用 EF 4.1 模仿相同的行为

这方面的任何指示都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:05:48.917

> 我想为用户管理编写函数

不，你没有，或者至少你不应该！会员 API 是自包含的。它包含用于用户管理的整个逻辑，并且该逻辑在 .NET 和存储过程之间进行了划分。如果你想通过 WCF 访问 API，要么直接使用身份验证服务，要么将标准 API 调用包装到新的 WCF 服务中，而不直接使用数据库。

直接访问会员数据库意味着打破会员 API 合同，并且在大多数情况下还意味着创建不太安全且封装较少的解决方案。标准成员资格和角色类不能使用 EF 映射回成员资格数据库 - 您必须创建自己的实体，这将破坏原始封装。

如果您只想创建自定义身份验证并且不想使用 Membership API 中的任何内容，除了数据库，您应该根据您的确切要求创建自己的数据库。

# c - 为什么第一次输入后字符数错误？

> ID：10732849
> 
> 赞同：1
> 
> 时间：2012-05-24T07:17:17.983
> 
> 标签：c, loops, character, counting

我用 C 编写了一个程序来计算从标准输入输入的字符。我想使用一个循环来允许多个条目。（注意：我是编程新手。）

```
main()
{
    long nc;
    int c;
    int kc=1;
    for (kc=1;kc<=5;kc=kc+1)
    {
        nc=0;
        c= getchar();
        while(c != '0')
        {

        ++nc;
        c=getchar();
        }

        printf("%1d\n",nc);

    }
    return 0;
} 
```

所以基本上正如你所猜测的那样，循环接受 5 个条目。

问题：当我输入`Sky0`第一个结果时，3。但从那时起，计数中增加了一个。即输入`dame0`导致计数`5`，`sit0`导致计数`4`等。

在尝试在各个阶段使用 prinf 调试问题时，我意识到在第一个结果之后，代码找到了输入的结尾，但进入 for 循环 NEVERTHELESS 并使用as`0`等待下一个条目。这会导致相应输出中的错误。`nc``1`

请告诉我哪里出错了？为什么它在感应后仍进入循环`0`？

非常感谢您的帮助和时间:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:47:24.647

问题是当你按下回车键时，它也变成了一个字符（值 0x1a），它是由`getchar`while 循环外的调用返回的。

您可以执行以下操作：

```
while (getchar() != '\n') nc++; 
```

这样，您甚至不需要使用 0 来标记字符串的结尾。

# winapi - 尝试用 winelib 编译 win32 应用程序；winelib 的头文件中的类型错误？

> ID：10732852
> 
> 赞同：1
> 
> 时间：2012-05-24T07:17:21.040
> 
> 标签：winapi, ubuntu-10.04, porting, wine, winelib

我会认为自己是一个初学者程序员，所以如果我遗漏了有用的信息，请多多包涵，因为我可能没有意识到这一点。

我正在尝试将 Win32 应用程序移植到 Ubuntu 10.04 LTS (Lucid Lynx)。

所有的源文件都是用 Visual C++ 编写的，一切都是用 Windows API 构建的。我一直在尝试使用 winelib 从源代码编译程序，但是我收到了如下错误消息：

```
 shobjidl.h:13: error: 'interface' does not name a type 
```

我相信这些错误主要来自 winelib 的头文件。我认为这些错误还对其他 winelib 标头生成的一些范围错误负责，但我现在只想尝试一次解决这个错误。

进入这个项目我觉得 winelib 是一个很好的解决方案，因为感兴趣的应用程序是使用 windows API 构建的，但我很困惑为什么我会遇到 winelib 的标题类型错误......

可能是我在生成的 Makefile 中缺少重要路径（来自 winemaker），或者 Wine 没有正确安装在我的机器上？

任何帮助将不胜感激。

# ruby - 用于非 Rails、非 mongo 应用程序的 OAuth2 Provider gem？

> ID：10732854
> 
> 赞同：1
> 
> 时间：2012-05-24T07:17:24.617
> 
> 标签：ruby, oauth-2.0, omniauth

我需要将 OAuth2 身份验证添加到基于 Sinatra 的 API。没有 ActiveRecord，没有 MongoDB……但是 DataMapper。

有人知道我可以用什么宝石来实现这一目标吗？我添加了 rack-oauth2-server，但这取决于 Mongo。我试图了解[rack-oauth2](https://github.com/nov/rack-oauth2)，但实际上没有文档，我看不出它应该如何集成到*提供*oauth 身份验证的真实应用程序中。那里有任何有据可查的宝石吗？（不是 Rails 宝石）。

omn​​iauth-oauth2 看起来可以工作，但同样，基本上没有关于如何集成它的文档。链接到概述与这些 gem 集成的文章也会很有用。

我整天都在寻找，只是继续兜圈子。我确定这是一个已解决的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:06:12.907

为什么你不看[http://rubydoc.info/gems/oauth2/0.7.1/frames](http://rubydoc.info/gems/oauth2/0.7.1/frames)？

# php - Wordpress 烫发链接

> ID：10732855
> 
> 赞同：0
> 
> 时间：2012-05-24T07:17:28.000
> 
> 标签：php, javascript, html, wordpress

每当我将 wordpress 上的永久链接设置为默认值以外的其他内容时

```
p=123 
```

链接转到 404 页

例如：

```
http://thewebsite.com/i/blog/2012/05/sample-post/ 
```

将作为博客文章链接，但它会将您带到 404 结果。

什么会导致这种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:19:07.133

您需要进行重写。在您网站的根目录中，创建一个`.htaccess`文件。这将是一个隐藏文件，但如果您使用 Filezilla 作为 FTP 程序，您将能够查看它。

把它放进去：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

将它保存在您网站的根目录中，即 wp-config 所在的位置，它应该可以工作。如果您的网站位于子目录中，则需要更改 Rewrite 基础以反映这一点，而不是 / 表示 root。

希望这可以帮助！

# console - Pydev - 启动

> ID：10732856
> 
> 赞同：1
> 
> 时间：2012-05-24T07:17:30.917
> 
> 标签：console, pydev, startup

也许我有一些简单的问题，所以我用谷歌搜索了它，但我找不到答案。

我正在使用 Pydev/Eclipse，我想在控制台中运行脚本。首先，我想修改会话的启动 - 这意味着在启动期间加载了一些模块（math、numpy、scipy 等......）。我在哪里/如何修改 Pydev 控制台启动？

其次，我使用右键单击脚本文件和“运行为-> Python 运行”来执行脚本，然后它在控制台中执行并终止。所以我想留在控制台中并保持互动而不是被终止。我怎样才能获得这样的功能？

谢谢！

最好的问候，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T23:12:17.583

我认为您想要的是交互式控制台。见： http: [//pydev.org/manual_adv_interactive_console.html](http://pydev.org/manual_adv_interactive_console.html)

您可以在首选项页面中配置初始命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:04:19.130

启动配置可以在 PyDev 首选项菜单中找到。首选项可以在“窗口”下的上部菜单栏中找到。Window -> Preferences -> PyDev -> Interactive Console 在那里你会发现一个带有“Initial interpreter commands”标签的大文本输入字段。通常它已经在使用中并且只导入 sys 来打印启动控制台的名称和版本号。

我知道与您的脚本保持联系的唯一解决方案是在最后设置一个断点并以调试模式启动您的脚本。但也许还有另一种方式。为此，只需在打开脚本的情况下双击编辑器窗口的左角。将出现一个绿点，标记一个断点。现在右键单击选择“调试为”。您的脚本将一直运行，直到到达您设置断点的行。

希望我能帮上忙。

# c++ - 来自 QT 的 Sqlite 最大列数配置

> ID：10732860
> 
> 赞同：1
> 
> 时间：2012-05-24T07:17:53.630
> 
> 标签：c++, sqlite, qt, configuration

我想在 Sqlite 数据库中存储具有 65536 列的行，并且我正在使用 C++ 和 QT 来执行此操作。

我的问题是：由于默认的最大列数似乎不再是 2000，如何从 C++ 和 Qt 配置此参数？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:09:57.653

[SQLLite 主页](http://www.sqlite.org/limits.html)对此有一些解释：

> 2.最大列数
> 
> SQLITE_MAX_COLUMN 编译时参数用于设置上限 (...)

和

> SQLITE_MAX_COLUMN 的默认设置是 2000。您可以在编译时将其更改为 32767 一样大的值。另一方面，许多有经验的数据库设计人员会争辩说，一个规范化的数据库永远不会需要超过 100 个表中的列。

就这样，即使你增加它，你也只能达到你想要的一半。除此之外，我只能参考 Styne666 对您帖子的评论。

# ubuntu - 控制台上的 Cron 作业输出

> ID：10732864
> 
> 赞同：1
> 
> 时间：2012-05-24T07:18:03.770
> 
> 标签：ubuntu, cron

我写了一个shell脚本（`myscript.sh`）：

```
#!/bin/sh
ls
pwd 
```

我想每分钟安排一次这项工作，它应该显示在控制台上。为了做到这一点，我做了`crontab -e`：

```
*/1 * * * * /root/myscript.sh 
```

在这里，它在文件中显示输出，`/var/mail/root`而不是在控制台上打印。

为了在控制台上打印输出，我必须进行哪些更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T08:00:05.060

我能想到的最简单的方法是将输出记录到磁盘并有一个控制台窗口不断检查日志文件是否已更改并打印更改。

crontab：

```
*/1 * * * * /root/myscript.sh | tee -a /path/to/logfile.log 
```

在控制台中：

```
tail -F /path/to/logfile.log 
```

这样做的问题是您将获得一个不断增长的日志文件，需要定期删除该文件。

为避免这种情况，您必须做一些更复杂的事情，通过识别您希望写入的控制台 pid 并将其存储在预定义的位置。

控制台脚本：

```
#!/usr/bin/env bash

# register.sh script    
# prints parent pid to special file

echo $PPID > /path/to/predfined_location.txt 
```

crontab 的包装脚本

```
#!/usr/bin/env bash

cmd=$1
remote_pid_location=$2

# Read the contents of the file into $remote_pid.
# Hopefully the contents will be the pid of the process that wants the output 
# of the command to be run.
read remote_pid < $remote_pid_location

# if the process still exists and has an open stdin file descriptor
if stat /proc/$remote_pid/fd/0 &>/dev/null
then
    # then run the command echoing it's output to stdout and to the
    # stdin of the remote process
    $cmd | tee /proc/$remote_pid/fd/0 
else
    # otherwise just run the command as normal
    $cmd
fi 
```

crontab 用法：

```
*/1 * * * * /root/wrapper_script.sh /root/myscript.sh /path/to/predefined_location.txt 
```

现在您所要做的就是`register.sh`在您希望程序打印到的控制台中运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-25T23:19:09.980

我试图将 cron 作业输出到 gnome 终端，并通过它来管理它

```
*/1 * * * * /root/myscript.sh > /dev/pts/0 
```

我想如果你没有 GUI 而你只有 CLI 你可能会使用

```
*/1 * * * * /root/myscript.sh > /dev/tty1 
```

实现将 crontab 作业的输出重定向到您的控制台。但首先一定要找到你的终端的名称。如果它是 /dev/tty1 或其他东西。我不确定如何在所有情况下都做到这一点，可能类似于

```
env | grep -i tty 
```

# ajax - JQuery 选项卡动态添加 ajax

> ID：10732865
> 
> 赞同：1
> 
> 时间：2012-05-24T07:18:07.737
> 
> 标签：ajax, jquery-ui

我是 JQuery 的新手，并且一直在尝试实现一个选项卡式界面，在该界面中动态添加选项卡并通过 Ajax 加载它们的内容。我正在使用 JQuery-ui 选项卡。几天来我一直在尝试解决这个问题，并且一直在谷歌搜索并阅读 SO 中的所有相关线程。现在，如果我只添加一个选项卡，界面就可以工作——创建选项卡，选择它，并通过 Ajax 加载它的内容。但是，当我添加第二个选项卡时，它的内容似乎已正确加载，但是当我选择第一个选项卡时，我看到第二个选项卡的内容附加到第一个选项卡的内容中，然后我不再能够在标签。

我正在研究 Rails 3。代码在 Coffeescript 中，但我认为任何 Javascript'er 都应该易于阅读。以下是一些注意事项：

*   `$('a.edit')`是我添加选项卡的选择器。为了避免多次触发，我首先检查选择器是否已经绑定，然后再通过鼠标单击添加选项卡
*   标签关闭效果很好
*   url 和选项卡名称作为属性传递。url 指向 html 表单（通过 Rails 中的部分）
*   在生成的 html 中，当我添加一个选项卡时，会创建两个 ui-tab-panel，其 ID 为“ui-tabs-1”和“ui-tabs-2”。该选项卡有一个指向第二个的 href。只有第一个有“.ui-tabs-hide”。
    *   当我添加第二个选项卡时，我将有四个 ui-tab-panel，这些选项卡指向“ui-tabs-2”和“ui-tabs-4”，但它们都没有“.ui-tabs-隐藏”。

这是代码

```
$(->
        if !($('a.edit').is('.bound'))
            $('a.edit').on('click', ->
                addTab($(this).attr('url'), $(this).attr('tag'))  
            )
            $('a.edit').addClass('bound')
        $tabs = $('#tabs').tabs
        #$tabs.tabs
            closable: true
            cache: true
            tabTemplate: '<li><a href="#{href}">#{label}</a> <span class="ui-icon ui-icon-close">Remove Tab</span></li>'
            add: (event, ui) ->
                $tabs.tabs('select', '#' + ui.panel.id)

        addTab = (url, tab_name)->
            $tabs.tabs('add',url,tab_name)

        $( "#tabs span.ui-icon-close" ).live(
            "click", ->
                index = $( "li", $tabs ).index( $( this ).parent() )
                $tabs.tabs( "remove", index )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:21:12.733

为了解决这个问题，我做了一些小的改动。主要的一个是添加该行`$tabs = $('#tabs')`，以便所有对 tab 的引用和方法调用都应该引用选择器本身。我不知道为什么，但在我之前`$tabs = $('#tabs').tabs( ... )`。`$('a.edit')`在动态添加选择器的情况下，需要进行另一项更改。因为页面初始加载时选择器可能不存在，所以我将绑定从 更改`.on('click,-> )`为`.live('click', ->)`，并更改了标志，因此将一个新的 '.bounded' 类添加到 #tabs 以防止多次触发。

```
$(-> 
    $tabs = $('#tabs')

    if !($tabs.is('.bound')) 
        $('a.edit').live('click', -> 
            addTab($(this).attr('url'), $(this).attr('tag'))   
        ) 
        $tabs.addClass('bound') 

    $tabs.tabs 
        closable: true 
        cache: true 
        tabTemplate: '<li><a href="#{href}">#{label}</a> <span class="ui-icon ui-icon-close">Remove Tab</span></li>' 
        add: (event, ui) -> 
            $tabs.tabs('select', '#' + ui.panel.id) 

    addTab = (url, tab_name)-> 
        $tabs.tabs('add',url,tab_name) 

    $( "#tabs span.ui-icon-close" ).live( 
        "click", -> 
            index = $( "li", $tabs ).index( $( this ).parent() ) 
            $tabs.tabs( "remove", index ) 
) 
```

# php - 我可以在后台运行一个 .php 文件吗？

> ID：10732868
> 
> 赞同：0
> 
> 时间：2012-05-24T07:18:14.143
> 
> 标签：php, apache, process

在这里，

在用户注册时，我从 3rd 方服务导入大量信息，

但问题是该页面需要大量加载，有没有办法在后台运行这个“导入”过程？（因此用户不必等待太多时间来查看页面，并且可能在下次刷新时完成导入）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:20:51.993

您需要将注册过程分解为两个步骤：一个无需等待导入完成即可加载的轻量级页面，以及另一个执行繁重工作的脚本。第一个将使用 AJAX 触发第二个。最终结果将是“正在处理您的注册”页面，该页面会在工作脚本完成时适当更新。

您应该小心[`ignore_user_abort`](http://www.php.net/manual/en/function.ignore-user-abort.php)在工作脚本的开头调用，以便如果用户在等待页面上关闭浏览器窗口，注册过程不会中止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:35:38.003

您必须设置一个 cron 作业（如果您正在运行 Linux），该作业执行 curl 命令以访问 PHP 脚本（外部，如 'curl [http://domain.com/php/something.php](http://domain.com/php/something.php) '）或仅执行 php指向内部文件的命令。

您可以创建一个每分钟执行一次的调度程序（这是 cron 作业支持的最短执行时间）并执行您工作的“块”。当然，您必须将 PHP 设置为跳过默认使用的 30 秒执行限制。

# c# - 如何传入 lambda 并访问一组特定的方法

> ID：10732870
> 
> 赞同：0
> 
> 时间：2012-05-24T07:18:32.913
> 
> 标签：c#, lambda, action, anonymous-function, func

我想要类似的东西：

```
 AStaticClass.MakeCall(commonCmds => commonCmds.MethodOfAParticularClass) 
```

所以我想要一个 lambda 表达式作为参数，并让委托列出特定类的可用方法集，我可以使用 lambda 函数通过智能感知访问这些方法。然后调用传入的方法。

IE`commonCmds => commonCmds. {Lists all the methods of a particular class}`

然后我想要一个方法来调用。

我无法弄清楚正确的方法签名。

到目前为止，我有 public void`MakeCall(Action cmd) {cmd.invoke;}`这显然是行不通的。我尝试了 func、Expression 并且无法弄清楚。

非常感谢你的帮助！

编辑：

CmdsTwo 和 CmdsOne 可以是静态的。但是，我想以这种方式上课，因为这将使我的其他工作变得更加容易。

```
public void Main(string []args) {
    MyStaticClass.MakeCall(x => x.DoThis);

    MyStaticClass.MakeCallTwo(x => x.DoThisTwo);

    MyStaticClass.MakeCall(x => x.DoThisThree);
}

public static class MyStaticClass{
    public static void MakeCall<???>( ??????)

    public static void MakeCallTwo<???>( ??????)
}

public class Cmds{
    public void DoThis();

    public void DoThisThree();
}

public class CmdsTwo{
    public void DoThisTwo();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:20:21.697

The closest i can think of right now is this:

```
commonCmds => commonCmds.GetType().GetMethods() 
```

This returns you an array of [`MethodInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx), which describe all methods of the type of `commonCmds`. You'd have to invoke one of those like this:

```
object result = someMethodInfo.Invoke(someObjectInstance, new object[] { someParameter }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:23:24.773

你可以检查一下

```
AStaticClass.MakeCall( () => commonCmds.MethodOfAParticularClass) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T15:33:07.000

所以我明白了。我使用了扩展方法。谢谢你。

```
 public static class MyStaticClass{
     public static void MakeCall(Action<Cmds> paramater){
           Helper(new Cmds(), parameter);
      }

      private static void Helper(this Cmds, Action<Cmds> invokeThis) {...}

     public static void MakeCallTwo<???>( ??????)
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T07:29:49.303

您需要使用 Action With A Type 的通用版本。

```
public void MakeCall(Action<TYPE_HERE> cmd) 
{
   cmd.Invoke(...);
} 
```

类型被推断出来，智能感知应该开始了。

# php - 传递变量

> ID：10732873
> 
> 赞同：0
> 
> 时间：2012-05-24T07:18:39.713
> 
> 标签：php, html

我是PHP的新手。我有一个网站，之前有人对其进行了编码。他使用 htacess 将所有从 dot php 到 dot html 网站的链接交换。现在我继续写一个新函数。

在这个新功能中必须创建一个标签显示一个联系人号码，用户点击后将链接到联系人详细信息页面并将联系人号码传递到详细信息页面也可以查询合适的联系人详细信息

现在是问题：如果我写

```
<a href=/B2C/vi/Contact_detail.html?id_contact=$contact_number>$contact_number</a> 
```

我不能 $_GET id_contact 因为 href 中的链接是 Dot HTML 而不是 PHP（此链接已在 htacess 中定义，我必须遵循此结构）

如果我将href链接更改为

```
<a href=/blocks/vi/Contact_detail.php?id_contact=$contact_number>$contact_number</a> 
```

由于 htaccess 文件，无法找到该页面。如果我删除 htacess 文件，我必须修复网站内的所有链接。不可能

我的问题是如何使用 html 链接，但也可以在之后从地址栏传递和获取变量？有没有人可以给我一个建议。谢谢你的帮助

这是我的代码

```
 <?php
    while ($row = db2_fetch_both($stmt))
    {
        $po_holder_name = $row['POL_HOLDER_NM'];
        $insured_name = $row['INSURED_NM'];
        $main_po_num = $row['POL_NUM'];
        $pro_name = $row['PRO_NAME'];
        $po_valid = $row['POL_VALID_NAME'];
        $staff_num = $row['EMP_NO'];
        $service_cen = $row['DIV_NAME'];
        $staff_cel = $row['MOBILE_PHONE'];

        echo "<tr>";
        echo "<td>$po_holder_name</td>";
        echo "<td>$insured_name</td>";
        echo "<td><a href=/B2C/$lang/Contact_detail.html>$main_po_num</a></td>";
        echo "<td>$pro_name</td>";
        echo "<td>$po_valid</td>";
        echo "<td>$staff_num</td>";
        echo "<td>$service_cen</td>";
        echo "<td>$staff_cel</td>";
        echo "</tr>";   

    }
    echo "</table>";
} 
```

您可以看到联系电话是一个数组，很难保存在 SESSION 变量中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:32:44.327

所以你可以使用 .phtml 扩展

[http://fileext.com/file-extension/PHTML](http://filext.com/file-extension/PHTML)

我在 Zend Framework 上的所有视图中都使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:07:24.807

如果脚本运行，但 $_GET 值为空，则可能是 .htaccess 中的重写规则正在丢弃查询字符串。

这需要在 .htaccess 文件中修复。找到类似于以下内容的行：

```
RewriteRule (.*)\.html $1.php? 
```

并简单地删除 php 后的问号：

```
RewriteRule (.*)\.html $1.php 
```

如果那里没有问号，那么您可能会遇到不同的问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-24T07:24:14.380

将此行添加到您的 .htaccess 文件中，以使您的 html 文件执行 php 代码：

```
AddType application/x-httpd-php .html 
```

参考： http: [//php.about.com/od/advancedphp/p/html_php.htm](http://php.about.com/od/advancedphp/p/html_php.htm)

# ios - 核心图像与核心图形

> ID：10732877
> 
> 赞同：7
> 
> 时间：2012-05-24T07:18:53.443
> 
> 标签：ios

我正在制作一个使用基本核心图形功能的应用程序。该应用程序在 Ipad2 上运行得相当好，但由于视网膜显示，Ipad3 上的性能受到影响，这导致绘制的像素数是之前的 4 倍。我尝试了一些技巧来提高性能，但由于在我的代码中绘制是在手势上进行的，我想我将不得不切换到其他替代方案。我想问一下 Core Image 是否提供了可以使用 Core Graphics 执行的所有功能，以便我可以使用 GPU 处理功能。如果不是，那么最好的选择是什么，以便我可以使用具有更好处理能力的相同功能。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T20:48:22.357

核心图像和核心图形非常不同。Core Image 是一种**图像处理技术**。您可以应用预制过滤器，如棕褐色、黑白和颜色反转，也可以创建自定义过滤器。Core Graphics 是一个使用 Quartz 2D 技术的渲染 API，允许进行复杂的绘图。

Brad Larson 的 GPUImage 是 Core Image 的绝佳替代品/补充品。你可以在[这里](https://github.com/BradLarson/GPUImage#readme)找到它。

如果你想提高性能，你可以尝试像 OpenGL 这样的低级 API。这很难学习，但这里有一些链接可以帮助您入门：

*   [iPhone OpenGL ES – 8 个很好的学习资源](http://maniacdev.com/2009/04/8-great-resources-for-learning-iphone-opengl-es/)– 来自 ManiacDev，不言自明
*   [OpenGL ES Programming Guide for iOS](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/Introduction/Introduction.html) - 苹果自己的文档，透彻，一个好的开始
*   [基于 iOS 的 OpenGL ES 编程](https://stackoverflow.com/questions/6074688/ios-based-opengl-es-programming)- 更多入门资源
*   [OpenGL ES 2.0 for iPhone 教程](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial) -Good Ray Wenderlich 介绍
*   [Pro OpenGL ES for iOS](http://www.apress.com/9781430238409) - 很棒的 Apress 书籍，但不适合初学者

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T21:46:13.583

我知道晚了一年，但是看看 WWDC 2010 Sessions on Core Animation：424 和 425。两者都很重要，但是在大约 11:00 标记的 425 中有一些关于性能调整的很好的细节。

简短的概要是，存在三个潜在的瓶颈，您需要识别、优化并不断迭代，直到获得平稳的 60 FPS。潜在的瓶颈是：

*   读取带宽
*   写带宽
*   处理/渲染通道。

425 会话（实践中的核心动画，第 2 部分）涵盖了处理上述问题的技术。

[https://developer.apple.com/videos/wwdc/2010/](https://developer.apple.com/videos/wwdc/2010/)

# asp.net - 列表视图中的多个查询

> ID：10732881
> 
> 赞同：0
> 
> 时间：2012-05-24T07:18:59.060
> 
> 标签：asp.net

我想在一个列表视图中使用多个查询。在我的列表视图中，每一列的值都必须来自两个以上的表。那么我如何在列表视图中使用多个查询。

我的 asp.net 代码；

```
 <LayoutTemplate>
                        <table id="Table1" border="2" cellspacing="3" cellpadding="3" style="color: Black; border-bottom:1px solid black; border-right:1px solid black; border: thin solid #000000;" runat="server" >
                            <tr id="Tr1" runat="server">
                                <td id="Td1" runat="server">Owned By &nbsp;&nbsp;&nbsp;</td>
                                <td id="Td2" runat="server">Shared class &nbsp;&nbsp;&nbsp;</td>
                                <td id="Td3" runat="server">Effective Interest &nbsp;&nbsp;</td>
                                <td id="Td4" runat="server">Deemed Interest &nbsp;&nbsp;&nbsp;</td>
                                <td id="Td5" runat="server">Shares Owned &nbsp;&nbsp;&nbsp;</td>
                                <td id="Td12" runat="server">Shares Issued &nbsp;&nbsp;&nbsp;</td>
                            </tr>

                             <tr style="border-style: 1; border-color: #FFFFFF!important; border-width: 1px; color: #FF0000;">
                            <td><%#Eval("owner_CompanyId")%>&nbsp;</td>
                            <td><%#Eval("owner_sharetype")%>&nbsp;</td>
                            <td><%#Eval("owner_effectinterest")%>&nbsp;</td>   
                            <td><%#Eval("owner_effectinterest")%>&nbsp;</td>                 
                            <td><%#Eval("owner_shares")%>&nbsp;</td> 
                            </tr>

                            <tr id="ItemPlaceholder" runat="server">
                            </tr>
                        </table>
    <table>
    <tr style="border-style: 1; border-color: #FFFFFF!important; border-width: 1px; color: #FF0000;">
here i want to use the data from another tables with different queries
                            <td><%#Eval("comp_CompanyId")%>&nbsp;</td>
                            <td><%#Eval("ownercompanylog_sharetype")%>&nbsp;</td>
                            <td><%#Eval("owner_effectinterest")%>&nbsp;</td>   
                            <td><%#Eval("owner_effectinterest")%>&nbsp;</td>                 
                            <td><%#Eval("owner_shares")%>&nbsp;</td> 
                            </tr>
    </table>
                 </LayoutTemplate>

        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                 ConnectionString="<%$ ConnectionStrings:DreamsConnectionString4 %>" 

                 SelectCommand="SELECT [owner_CompanyId], [owner_childcompid], [owner_effectinterest], [owner_sharetype], [owner_shares] FROM [Owner] WHERE ([owner_CompanyId] = @owner_CompanyId)" 
                 OnSelecting="SqlDataSource1_Selecting" >

                <SelectParameters>
                    <asp:ControlParameter ControlID="HiddenField1" DefaultValue="18" 
                        Name="owner_CompanyId" PropertyName="Value" Type="Int32" />
                </SelectParameters>
             </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:57:32.407

您可以使用 UNION 语句并将两个结果连接在一起，每列的数据类型需要相同，因此您可能需要用额外的列填充一个查询以匹配另一个。

# javascript - 儿童负荷警报

> ID：10732883
> 
> 赞同：0
> 
> 时间：2012-05-24T07:19:03.630
> 
> 标签：javascript, window.open

我想打开一个窗口`window.open`并为其附加一个功能`onload`。例如，当子页面加载完成（仅 DOM）时，浏览器会在子页面中显示警报。此代码不起作用::

```
var google;
function google(){
    google = window.open('http://www.google.com/');

    // Dean Edwards/Matthias Miller/John Resig

    /* for Mozilla/Opera9 */
    if (google.document.addEventListener){
        google.document.addEventListener("DOMContentLoaded", pageLoaded, false);
    }

    /* for Internet Explorer */
    /*@cc_on @*/
    /*@if (@_win32)
        google.document.write("<script id=__ie_onload defer src=javascript:void(0)><\/script>");
        var script = google.document.getElementById("__ie_onload");
        script.onreadystatechange = function(){
        if (this.readyState == "complete") {
            pageLoaded(); // call the onload handler
        }
        };
    /*@end @*/

    /* for Safari */
    if (/WebKit/i.test(navigator.userAgent)){ // sniff
        var _timer = setInterval(function(){
            if (/loaded|complete/.test(google.document.readyState)) {
                pageLoaded(); // call the onload handler
            }
        }, 10);
    }

    google.onload = pageLoaded;
}
function pageLoaded(){
    alert('Loading Completed');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:32:22.923

尝试这个：

```
var google;
function googleload()
{
    google = window.open('http://www.google.com/');

    // Dean Edwards/Matthias Miller/John Resig

    /* for Mozilla/Opera9 */
    if (google.document.addEventListener)
    {
            google.window.addEventListener("DOMContentLoaded", function(){
                alert('Loading Completed');
            }, false);
    }
    else
    {
        google.window.onload = function(){ //Add window.onload
            alert('Loading Completed');
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:38:49.580

如前所述，同源政策对您不利

如果我真的必须这样做，这是我会尝试的

```
function popAndAlert(url) {
  var w = window.open('','mywindow');
  if (w) {
    w.document.write('<body onload="opener.done()">'+
      '<iframe style="width:100%;height:100%" src="'+url+'"></iframe></body>')
    w.document.close();
  }
}
function done() {
  alert('loading completed');
} 
```

要在子页面中发出警报，请更改

```
onload="opener.done()" 
```

至

```
onload="alert('loading complete')" 
```

# java - 在我的 Java GAE 应用程序中的所有文件上突然出现 404 未找到错误，而对文件或配置没有任何更改

> ID：10732884
> 
> 赞同：1
> 
> 时间：2012-05-24T07:19:08.350
> 
> 标签：java, google-app-engine, http-status-code-404

我正在运行一个用 Java 编写的付费 GAE 应用程序，它的 id 是 clip-share，所以 url 是[http://clip-share.appspot.com/](http://clip-share.appspot.com/)。

我已经运行了 10 多个月，从 2 天前开始，它开始无法在所有静态和动态 URL 上出现 404 not found 错误。

当我连接到我的应用程序的 URL 时，它只会抛出这条消息，即没有真正存在的 index.html 文件。

```
Error: Not Found
The requested URL /index.html was not found on this server. 
```

我尝试了几次重新部署此应用程序，但它在部署后仅几分钟就可以正常工作，但之后就无法正常工作。

并且还搜索了 404 not found 问题，我找到了这个线程，但没有关于原因的具体信息和一些解决方法。

[https://groups.google.com/d/topic/google-appengine/8liP4T-wbSo/discussion](https://groups.google.com/d/topic/google-appengine/8liP4T-wbSo/discussion)

那么，发生了什么事？我该如何处理？

**编辑：**

我找到了解决此问题的方法，即制作另一个版本，例如版本 2，并将其设置为默认值。但是您仍然可以在此 URL 中看到版本 1 的问题，只是放在`1.`URL 之前。（我想向您展示版本 1 的完整 URL，但我对 stackoverflow.com 比较陌生，并且不允许在一个问题中发布超过 2 个 URL。）

因此，两个不同版本中的相同代码和配置，但只有版本 2，较新的版本有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:08:50.673

在 web.xml 中应该是欢迎文件标签。也许你有/index.html。在 web.xml 中找到“/index.html”并将其更改为“index.html”。

index.html 文件应该在 war 文件夹中：/war/index.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T06:10:48.727

原来是Eclipse的Google App Engine插件存在配置问题。我在一个 Eclipse 工作区中有几个 GAE 项目，而其他 GAE 项目意外部署到剪辑共享。所以看起来突然发生了 404 not found 问题。不管怎样，谢谢各位。

# javascript - 如何使用 JavaScript 调用 Linux 命令

> ID：10732893
> 
> 赞同：2
> 
> 时间：2012-05-24T07:19:53.490
> 
> 标签：javascript, linux

我是 JavaScript 新手，现在我想在 JavaScript 中运行 Linux 应用程序并在网页中显示结果。这一切都发生在没有服务器的客户端中。但是出于安全问题或其他原因，JavaScript 没有这样的接口。我知道在 Windows 中，可以使用 activeX 来实现，但我如何在 Linux 中实现呢？

我只是想让 js+browser 相当于一个没有复杂 GUI 设计的客户端应用程序。所以没有服务器。有什么简单的方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T20:05:01.470

也许[Node-webkit](https://github.com/rogerwang/node-webkit)就是你想要的。

它使您可以轻松地在 javascript 中创建桌面应用程序并访问“低级”内容，以便您可以运行命令，而无需 http 服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T07:48:00.737

仅使用 javascript 是无法完成的。但是您至少有两个选项可以使用 javascript 和其他技术来执行此操作。

第一个是 Jivings 发送的，使用 Jquery 向服务器端的脚本语言发送 post 请求。

第二种方法是安装 Node.js。该平台在 javascript 引擎上运行，并具有您需要的语言的所有功能。安装后，只需查看[这篇](https://stackoverflow.com/questions/4443597/node-js-execute-system-command-synchronously)解释如何执行命令的帖子。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T07:28:29.650

做不到。

JavaScript 不能以任何方式与用户系统交互。

您唯一能做的就是向服务器发送请求，服务器执行命令并将响应发回。

# c# - Exclusive App on Android with monodroid

> ID：10732898
> 
> 赞同：0
> 
> 时间：2012-05-24T07:20:15.363
> 
> 标签：c#, android, xamarin.android

I'm new in Android programation and Monodroid. I would like to know if is possible and how to make one application that exlusively run in full screen and enable to use the device only across itself. Best regards Piercarlo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:24:16.827

对于全屏模式，请参阅[此](https://stackoverflow.com/questions/991764/hiding-title-in-a-fullscreen-mode) 仅针对设备，我真的不知道您的意思。

编辑：你真的应该在发布问题之前尝试搜索一下，这真的很容易找到。

# java - n叉树中多个节点的最低公共祖先

> ID：10732902
> 
> 赞同：0
> 
> 时间：2012-05-24T07:20:23.100
> 
> 标签：java, tree, nlp, text-processing, graph-algorithm

我正在尝试在java中实现n叉树中多个节点的LCA。我正在使用句子的解析树，因此假设节点的子节点数 <= 6 是合理的。这里的多个节点是一个句子中的两个短语（连续单词序列）。设 k 为涉及的节点数。

一种方法是找到 k/2 对的两个节点的 LCA，我们将得到 k/2 个节点。现在在这些 k/2 节点上递归。顺序为 O(nlog k)，其中 O(n) 是线性 LCA 查找算法的复杂度。我可以更有效地做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:59:32.790

我使用短语的节点是连续的这一事实解决了这个问题，即在解析树的叶节点列表中具有连续索引。

让`segment1`索引从`start1`到`end1`。也是如此`segment2 = (start2,end2)`。

和 的必需共同祖先是具有索引`(start1, end1)`和的`(start2, end2)`节点的共同祖先。`min(start1,start2)``max(end1,end2)`

# iphone - Orientation iOS storyboard don't rotate?

> ID：10732903
> 
> 赞同：1
> 
> 时间：2012-05-24T07:20:24.393
> 
> 标签：iphone, objective-c, ios, ipad

OKay, this is probably pretty noob, but I couldn't find how to solve it. I dragged an iPad UIViewController to the storyboard and enabled the orientation to YES. But for some reason that view is not rotating. The status bar at the top is rotating but the view, tableview and labels inside are not rotating when you rotate the iPad. Anyone know why and how to fix it?

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOr‌​ientation { return YES; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T12:44:18.687

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        //return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
        if ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight)) {
           //implement your code 
        return (interfaceOrientation != UIInterfaceOrientationLandscapeRight);
    } else {

        return YES;
    }
} 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T12:22:18.620

状态栏旋转可能意味着某些模态转场没有正确解除，只需检查即可。此外，如果它在导航控制器中，请确保堆栈中的所有视图都已设置为返回 YES。

# ruby-on-rails - How to combine two scopes with OR

> ID：10732911
> 
> 赞同：26
> 
> 时间：2012-05-24T07:20:53.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, rails-activerecord

I have a tag feed and a friend feed. I want to combine these two and build the ultimate "all" feed.

For friend feed:

```
class Post < ActiveRecord::Base
  scope :friendfeed, lambda{|x| followed_by}

  def self.followed_by(user)
    where("user_id IN (?) OR user_id = ?", user.watched_ids, user.id)
  end
end 
```

For tag feed:

```
class Post < ActiveRecord::Base
  scope :tagfeed, lambda{|x| infatuated_with}

  def self.infatuated_with(user)
    joins(:attachments).where("attachments.tag_id IN (?)", user.tags).select("DISTINCT pages.*")
  end
end 
```

And I would call something like this from the controller (I'm using Kaminari gem for pagination):

```
@tag_feed = Post.tagfeed(current_user).page(params[:page]).per(21)
@friend_feed = Post.friendfeed(current_user).page(params[:page]).per(21) 
```

Now I want to have a universal feed, but I'm lost. Scopes are meant for narrowing down, but in this case I'm trying to do an OR operation. Doing stuff like

```
@mother_of_all_feed = @tag_feed + @friend_feed 
```

would be redundant, and I wouldn't be able to control the number of posts appearing on a single page. How can I go about doing this? Thanks!

By the way, for tags I have association set up like this:

```
class Post < ActiveRecord::Base
  has_many :attachments
  has_many :tags, :through => :attachments
end

class Tag < ActiveRecord::Base
  has_many :attachments
  has_many :posts, :through => :attachments
end

class Attachment < ActiveRecord::Base
  belongs_to :tag
  belongs_to :post
end 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-15T18:40:22.503

此功能有一个 Rails 拉取请求（[https://github.com/rails/rails/pull/9052](https://github.com/rails/rails/pull/9052)），但与此同时，有人创建了一个猴子补丁，您可以将其包含在您的初始化程序中，这将允许您or 范围和 where 一个查询中的子句，仍然给你一个`ActiveRecord::Relation`：

[https://gist.github.com/j-mcnally/250eaaceef234dd8971b](https://gist.github.com/j-mcnally/250eaaceef234dd8971b)

有了它，您就可以像这样对您的范围进行 OR

```
Post.tagfeed(current_user).or.friendfeed(current_user) 
```

或写一个新的范围

```
scope :mother_of_all_feed, lambda{|user| tagfeed(user).or.friendfeed(user)} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T10:14:01.623

回答我自己的问题。我想我想出了一个办法。

```
where("pages.id IN (?) OR pages.id IN (?)",
  Page.where(
      "user_id IN (?) OR user_id = ?",
      user.watched_ids, user.id
  ),
  Page
    .joins(:attachments)
    .where("attachments.tag_id IN (?)", user.tags)
    .select("DISTINCT pages.*")
) 
```

到目前为止它似乎正在工作，希望就是这样！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-15T00:12:50.290

这是我如何组合两个范围的示例。

```
scope :reconcilable, -> do
  scopes = [
    with_matching_insurance_payment_total,
    with_zero_insurance_payments_and_zero_amount
  ]

  where('id in (?)', scopes.flatten.map(&:id))
end 
```

# c# - Zoom-in and zoom-out mschart scalling

> ID：10732912
> 
> 赞同：0
> 
> 时间：2012-05-24T07:21:00.993
> 
> 标签：c#, winforms, zooming, scale, mschart

Default when I zoom some chart it appears in the upper-left and bottom-left corner zoom-out buttons.

When I click them they worked like step back. For example if I make zoom-in 5 times, then I must click zoom-out also 5 times, etc.

How to adjust zoom-out to recede scale 2times on each click independent of zoom-in history.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:30:37.543

您需要为 AxisScrollBarClicked 实现一个处理程序：

```
chart1.AxisScrollBarClicked += new ScrollBarEventHandler(this.chart1_AxisScrollBarClicked);
...

private void chart1_AxisScrollBarClicked(object sender, ScrollBarEventArgs e)
{
  // Handle zoom reset button
  if(e.ButtonType == ScrollBarButtonType.ZoomReset)        
  {
    e.IsHandled = true;

    double x_view_start, x_view_end, y_view_start, y_view_end;
    // calculate the zooming params here according to desired behaviour

    e.ChartArea.AxisX.ScaleView.Zoom(x_view_start, x_view_end);
    e.ChartArea.AxisY.ScaleView.Zoom(y_view_start, y_view_end);
  }
} 
```

# eclipse - 日食折叠

> ID：10732913
> 
> 赞同：0
> 
> 时间：2012-05-24T07:21:02.117
> 
> 标签：eclipse

我正在做一个项目，而不是强加于 Eclipse。我想知道是否可以使用方法和注释创建 eclipse 使用的折叠（文本可伸缩部分），但在我的情况下，方法中的文本片段？提前对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:19:05.960

是的，有可能，请参阅此链接：[在 Eclipse 文本编辑器中折叠](http://www.eclipse.org/articles/Article-Folding-in-Eclipse-Text-Editors/folding.html)。（我用谷歌找到了这个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-12T03:15:20.773

是的，有可能。只需使用第三方插件，例如[Coffee-Bytes Plugin](http://kosiara87.blogspot.com/2011/12/how-to-install-coffee-bytes-plugin-in.html "Coffee-Bytes 插件")。如果您使用的是 eclipse Juno 或 Kepler，您需要四处搜索以获取存档中提供的 jar 的 1.0.7 版本。

# configuration - PIC 18f and PORT-B

> ID：10732915
> 
> 赞同：2
> 
> 时间：2012-05-24T07:21:11.443
> 
> 标签：configuration, pic

Trying to get a 4x4 keypad working with a PIC 18f4685.

I've turned on weak-pulls ups. Set the appropriate pins to either input/output but when I send a signal out I'm not getting it back on bits 6 & 7\. It just gets zeros...

I've tried to debug using the PicKit3 but seems that it uses RB7 and crashes things when a button for that row is pushed. Of course that tells me that the signals must be getting through, to a point.

Is there anything else in particular that I need to set up in configuration for PORT B?

As always...your help is greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:08:50.927

不确定您的原理图（草图可能会有所帮助），但 PIC GPIO 中的一个常见错误是未将 ADC 寄存器设置为数字输入。它们作为模拟输入退出复位。

查看[PIC18F4685 数据表](http://ww1.microchip.com/downloads/en/DeviceDoc/39761c.pdf)中的寄存器描述 19-2 。

`ADCON1`复位为 0x00。要将所有模拟引脚设置为数字 I/O，`PCFG3:0`需要设置为 1。

```
ADCON1bits.PCFG = 0x0F; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T18:42:12.240

由于 EE 网站在您得到答案之前就如此粗鲁地关闭了您，我想我会来这里回答您的问题。

查看第 135 页的表 10-3，它列出了端口 B 引脚的所有功能。请注意，RB6 和 RB7 也是调试引脚，所以我不会使用它们。

另外，您是否正在写入 LATx 并从 PORTx 读取？在读取和写入同一个端口时，这样做很重要。如果您对 PORTx 进行读写，您可能会意外地从尚未有足够时间更改的输出中读取陈旧值，并且您的下一次写入将抹去您的预期值。这对没有 LATx 寄存器的 PIC 尤其有害。任何操作，即使是像 BSF/BCF 这样的按位操作，都会对整个端口寄存器进行读-修改-写操作，影响的不仅仅是您打算修改的位。请参阅此 EE 问题的答案：[https ://electronics.stackexchange.com/questions/28744/interfacing-a-keypad-with-a-microcontroller](https://electronics.stackexchange.com/questions/28744/interfacing-a-keypad-with-a-microcontroller)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T01:26:49.583

您能否展示使用您的代码设置三态寄存器（TRISB）以及您的阅读方式。在按下按钮之前和按下按钮期间，您是否使用数字万用表 (DMM) 检查了输入引脚的电压？它们是 10 美元，物有所值。

最后，您是否禁用了模拟引脚？在 PIC24 芯片上，您必须执行以下操作：

`AD1PCFG = 0xFFFF`

在数字输入读取将起作用之前。你的芯片上可能是一样的。

你能给我们你芯片的确切型号吗？

# css - CSS nth-child formula to select every 7th element and the 5th element

> ID：10732923
> 
> 赞同：6
> 
> 时间：2012-05-24T07:21:37.110
> 
> 标签：css, css-selectors

So I'm creating a hexagon pattern with CSS3, and I'd like it to look like this;

[http://www.upperfirst.com](http://www.upperfirst.com)

I'm having my hexagons float:left in a body of a certain width. I can effectively accomplish the results in the link above if I can select the first element in every other row. What would be the nth-child formula for that?

It would be the 5th element, then every 7th element after that?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-24T07:26:00.647

公式是`:nth-child(7n+5)`。代表“`7n`每 7 个元素”，`+5`代表“从第 5 个元素开始”。

更多关于[`:nth-child()`选择器规范](http://www.w3.org/TR/selectors/#nth-child-pseudo)。

# c++ - Crypto++ "Tee"-style filter

> ID：10732926
> 
> 赞同：2
> 
> 时间：2012-05-24T07:21:47.263
> 
> 标签：c++, crypto++

I'm working on processing a data-stream based on some conditions.

Data is read from an input pipe, processed, and pushed down a Crypto++ `CBC_Mode<AES>` filter ending in a `FileSink`.

Now, I'd like to "snoop" on the data flowing between the encryption and file-store, calculating a checksum. For performance reasons, I want to do this while streaming, re-opening the output file and calculating a hash-sum after is not reasonable for my need.

From what I can see, what's missing for this to work, is some form of "tee" filter. Something splitting the data chain into two new chains, one for storing to file, and one chain for the hash-calculation.

Are there such functionality in Crypto++? Can I implement such filter myself, and if so, are there some guidelines or examples on what's needed for a custom Crypto++ filter? Are there some other way to calculate checksum on the fly?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-04T05:01:31.647

> 据我所知，这个工作缺少的是某种形式的“三通”过滤器。... Crypto++ 中有这样的功能吗？

是的，它称为`ChannelSwitch`. 以下来自[ChannelSwitch 上的 Crypto++ wiki 页面](http://www.cryptopp.com/wiki/ChannelSwitch)，它遵循 Wei Dai 在他的测试文件中对该类的使用。

```
MD5 hashMD5;
HashFilter filterMD5(hashMD5);

SHA1 hashSHA1;
HashFilter filterSHA1(hashSHA1);

std::auto_ptr<ChannelSwitch> channel( new ChannelSwitch );

channel->AddDefaultRoute(filterMD5);
channel->AddDefaultRoute(filterSHA1);

StringSource ss( "abcdefghijklmnopqrstuvwxyz", true, channel.release());

string digest;
HexEncoder encoder( new StringSink( digest ), true /* uppercase */ ); 

filterMD5.TransferTo( encoder );
cout << filterMD5.AlgorithmName() << ": " << digest << endl;
digest.erase();

filterSHA1.TransferTo( encoder );
cout << filterSHA1.AlgorithmName() << ": " << digest << endl;
digest.erase(); 
```

这是上面示例的输出：

```
$ ./cryptopp-test.exe
MD5: C3FCD3D76192E4007DFB496CCA67E13B
SHA-1: 32D10C7B8CF96570CA04CE37F2A19D84240D3A89 
```

* * *

这是另一个使用不同接收器的示例，可能更容易理解：

```
byte data[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
string e1, e2, e3;

HexEncoder r1(new StringSink(e1));
Base32Encoder r2(new StringSink(e2));
Base64Encoder r3(new StringSink(e3));

ChannelSwitch chsw;
chsw.AddDefaultRoute(r1);
chsw.AddDefaultRoute(r2);
chsw.AddDefaultRoute(r3);

chsw.Put(data, sizeof(data));
chsw.MessageEnd();

cout << e1 << endl;
cout << e2 << endl;
cout << e3 << endl; 
```

这是示例的输出：

```
$ ./cryptopp-test.exe
0102030405060708090A
AEBAGBAFA2DSSCIK
AQIDBAUGBwgJCg== 
```

# c++ - How to convert OpenMP sections to fork()

> ID：10732927
> 
> 赞同：2
> 
> 时间：2012-05-24T07:21:48.963
> 
> 标签：c++, pthreads, fork, openmp

I am new to pthreads and would like to ask how to express something like:

```
while(imhappy())
{
 #pragma omp sections
 {
  #pragma omp section
  {
   dothis();
  }
  #pragma omp section
  {
   dothat();
  }
 }
} 
```

in an equivalent construct using fork() or vfork() ? Thanks ahead!

PS: I included the **while** around the sections in case it is somehow more clever to **fork** before the entering the loop due to some resource cloning.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:24:15.800

OpenMP 在幕后做了很多其他的事情，而不仅仅是产生线程。它还分发代码段并同步不同的线程。您已经标记了您的问题，就`pthreads`好像您在询问`fork()`令人困惑的实施。在 Linux`fork()`中是非常重量级的，因为它创建新进程，而是`clone()`用于创建线程。

尽管如此，具有两个线程的 OpenMP 部分构造的粗略等价物是分叉，然后`if`必须遵循构造，并且主进程将执行`dothis()`路径，而子进程将执行`dothat()`路径。from 的返回值`fork()`在父进程和子进程中是不同的，可用于为分支做出决策。然后父进程将等待子进程完成，`waitpid()`这类似于区域末尾的隐式屏障同步`omp sections`。

不过需要注意的是 -`fork()`是使用 COW（写时复制）页面实现的。这意味着虽然一开始孩子的记忆内容与父母的记忆内容相同，但所做的任何更改都是私有的——孩子不会看到父母在自己的记忆中修改了什么，反之亦然。必须使用 SysV 共享内存原语或共享文件映射在两者之间显式共享内存。

您可能真的想考虑改用 POSIX 线程 API。

`vfork()`是为完全不同的目的而设计的系统调用，根本不适合进程克隆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:28:33.347

我不认为使用叉子可以直接模拟部分。但是，理论上您可以使用消息传递机制来模拟它，其中共享变量与根计算机一起保存。所有的 openMP 刷新都将使用 root 进行。（请记住，openMP 使用弱于弱一致性模型）。

# android - Upload one or more images to a JSON WCF Web Service

> ID：10732928
> 
> 赞同：1
> 
> 时间：2012-05-24T07:21:52.067
> 
> 标签：android, wcf, spring, rest

I'm developing an **Android 3.1** application using **Spring Framework for Android 1.0.0 RC1**.

I have developed a **JSON WCF web service** with **C#** and **.Net Framework 4.0**. I know how to send objects, strings, integers, etc. but I don't know how to POST an image from Android to web service.

How can I post an image?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:05:38.390

您可以使用原始编程模型将任意数据发送到 WCF 服务 - 将 a`Stream`作为参数。[http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx)上的帖子有更多关于此的信息。

# android - Increase Android ViewPager performance

> ID：10732929
> 
> 赞同：1
> 
> 时间：2012-05-24T07:22:08.107
> 
> 标签：android, performance, android-viewpager

I'm creating a android application with target on 2.2\. I still want to use the ViewPager provided in the android.support-v4.jar.

I'm using a FragmentPagerAdapter in combination with Fragment to display content. Each fragment contains a WebView, displaying some html data.

Scrolling a WebView up and down works great but the swiping between pages in the ViewPager behaves very jerky and not at all as smooth as scrolling the WebView.

Is there any way you can increase the scroll performance of the ViewPager, maybe something like ConvertView from BaseAdapter?

I'm guessing I could load the url in a background thread but from what I've heard that's not best practice.

Any suggestions would be great, thanks.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T14:29:19.577

我意识到你可以使用

```
viewPager.setOffscreenPageLimit(items.size()); 
```

将所有项目预加载在内存中并避免滚动时的“冻结/滞后”性能，。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-12T15:34:18.427

您应该考虑`Fragments`通过提供一些方法来重用 ViewPager 中的现有片段并使用新数据填充或刷新它的 UI 来重用。

# c# - 传递一个 bool Foo(params[]) 作为方法参数

> ID：10732931
> 
> 赞同：6
> 
> 时间：2012-05-24T07:22:12.227
> 
> 标签：c#, .net-3.5, invoke

有时一个方法需要运行多次直到它被验证。在我的情况下，有一些表达式`bar.Name.Equals("John Doe")`，我想运行并运行，直到该表达式验证。

就像是：

```
bool succeeded = TryUntillOk(bar.Name.Equals("John Doe"), 15, 100); 
```

where`TryUntillOk`将是一个运行此表达式 15 次的方法，每次调用之间的睡眠时间为 100 毫秒。

我阅读了这个关于类似问题的[优秀](https://stackoverflow.com/questions/380198/how-to-pass-a-function-as-a-parameter-in-c)答案列表，但在我的情况下，没有标准代表`TryUntillOk`可以接受这种方法。

问题的标题没有建设性。随意编辑它:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T07:32:37.353

您可能正在寻找这样的东西：

```
bool TryRepeatedly(Func<bool> condition, int maxRepeats, TimeSpan repeatInterval)
{
    for (var i = 0; i < maxRepeats; ++i)
    {
        if (condition()) return true;
        Thread.Sleep(repeatInterval); // or your choice of waiting mechanism
    }
    return false;
} 
```

将按如下方式调用：

```
bool succeeded = TryRepeatedly(() => bar.Name.Equals("John Doe"),
                               15,
                               TimeSpan.FromMilliseconds(100)); 
```

这里唯一有趣的部分是您将条件指定为 a `Func<bool>`，它是一个不带参数并返回布尔值的方法的委托。Lambda 表达式语法允许您在调用站点轻松构造这样的委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:42:59.703

您必须调整调用。@Jon 的答案有 lambda invoaction，这个版本将比较与委托分开

```
using System;
using System.Threading;

namespace test
{
    class something
    {
        public String Name;
    }

    class Program
    {
        private delegate bool TryableFunction(String s);

        private static bool TryUntillOk(TryableFunction f, String s, int howoften, int sleepms)
        {
            while (howoften-->0)
            {
                if (f(s)) return true;
                Thread.Sleep(sleepms);
            }
            return false;
        }

        static void Main(string[] args)
        {
            something bar=new something();

            bar.Name="Jane Doe";
            bool succeeded = TryUntillOk(bar.Name.Equals,"John Doe", 15, 100);
            Console.WriteLine("Succeeded with '{0}': {1}",bar.Name,succeeded);

            bar.Name="John Doe";
            succeeded = TryUntillOk(bar.Name.Equals,"John Doe", 15, 100);
            Console.WriteLine("Succeeded with '{0}': {1}",bar.Name,succeeded);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:36:02.593

你可以检查一下

```
delegate void d_name(string s);

d_name obj =new d_name(bar.Name.Equals);

bool succeeded = TryUntillOk(obj("John Doe"), 15, 100);

TryUntillOk(obj d,type parameter2,type parameter3 )
{
  //do your work
} 
```

# c++ - Bison/Flex tutorial with C++, AST and re-entrant both lexer and parser

> ID：10732932
> 
> 赞同：4
> 
> 时间：2012-05-24T07:22:26.770
> 
> 标签：c++, parsing, bison, flex-lexer, abstract-syntax-tree

I am learning parsing, bison & lex. I am looking for a clear & complete tutorial/example that demonstrates all of:

1.  C++ (not C) Abstract Syntax Tree.
2.  Re-entrant lexer.
3.  Re-entrant parser.
4.  Reading from a string (vs. from file) would be nice as well.

I have found multiple examples and tutorials, but each typically meets only few of the above requirements. So far my best tutorial is from Chapter 3-2 in the Oreilly book by John Levine - it has AST; all C though, meets only Re_1 above. I welcome recommendations for nice examples / tutorials, real life open source projects. For example I saw MySql .yy file - looks well written, but too big/complex for beginner like me.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T00:30:27.110

最后我结合了几个例子来得到我想要的。前两个例子来自 John Levine 的关于 bison&flex 的书（第 2 版），ISBN-10: 0596155972。另一个来自 phpcompiler 网站，不幸的是，截至 2017 年 2 月 28 日，该网站已不存在。我将链接留在这里，以防网站存档在某处：www.phpcompiler.org/articles/reentrantparser.html

谢谢 Adrien，这是一个存档版本（截至 2017 年 3 月 2 日的作品）：

[http://web.archive.org/web/20120520150851/http://www.phpcompiler.org/articles/reentrantparser.html](http://web.archive.org/web/20120520150851/http://www.phpcompiler.org/articles/reentrantparser.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:03:05.740

首先我想说的是，C++ 语法对于 Lex/Bison 来说太复杂了。这里的问题主要在于语法冲突。不可能编写没有它们的 C++ 语法。C++ 标准明确说明了这一点，并包含一些关于如何解决它们的指南。

没有解决语法冲突的通用解决方案。特别是 C++ 的语法冲突解决需要有关已定义标识符的详细知识。这意味着您需要拥有更大的 C++ 前端部分。仅有语法是不够的。

尽管如此，构建 AST 是可能的。看一个小示例程序。

```
class HashEntry
{
private:

      int key;
      int value;

public:

      HashEntry(int key, int value)
      {
            this->key = key;
            this->value = value;
      }

      int getKey() { return key; }

      int getValue() { return value; }
};

const int TABLE_SIZE = 128;

class HashMap
{
private:

      HashEntry **table;

public:

      HashMap()
      {
            table = new HashEntry*[TABLE_SIZE];

            for (int i = 0; i < TABLE_SIZE; i++)
                  table[i] = NULL;
      }

      int get(int key)
      {
            int hash = (key % TABLE_SIZE);

            while (table[hash] != NULL && table[hash]->getKey() != key)
                  hash = (hash + 1) % TABLE_SIZE;

            if (table[hash] == NULL)
                  return -1;
            else
                  return table[hash]->getValue();
      }

      void put(int key, int value)
      {
            int hash = (key % TABLE_SIZE);

            while (table[hash] != NULL && table[hash]->getKey() != key)
                  hash = (hash + 1) % TABLE_SIZE;

            if (table[hash] != NULL)
                  delete table[hash];

            table[hash] = new HashEntry(key, value);
      }     

      ~HashMap()
      {
            for (int i = 0; i < TABLE_SIZE; i++)
                  if (table[i] != NULL)
                        delete table[i];

            delete[] table;
      }
}; 
```

这是该程序的 AST： ![在此处输入图像描述](../Images/60c74741e7d45a355646dbd7acbec464.png)

这棵树被严重缩小了。叶子上的黄色圆圈（非常小）是终端符号，中间的绿色圆圈是非终端。中心的粉红色圆圈是 TranslationUnit。这棵树有 2009 个节点。

# c# - Can I use Activator.CreateInstance with an Interface?

> ID：10732933
> 
> 赞同：18
> 
> 时间：2012-05-24T07:22:27.530
> 
> 标签：c#, .net, reflection, .net-assembly, activator

I have an example:

```
 Assembly asm = Assembly.Load("ClassLibrary1");
        Type ob = asm.GetType("ClassLibrary1.UserControl1");
        UserControl uc = (UserControl)Activator.CreateInstance(ob);
        grd.Children.Add(uc); 
```

There I'm creating an instance of a class, but how can I create an instance of a class which implements some interface? i.e. **UserControl1** implements **ILoad** interface.

**U:** I can cast object to interface later, but I don't know which type in the assemblies implements the interface.

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-24T07:32:57.563

这是我用过几次的一些代码。它查找程序集中实现某个接口的所有类型：

```
Type[] iLoadTypes = (from t in Assembly.Load("ClassLibrary1").GetExportedTypes()
                     where !t.IsInterface && !t.IsAbstract
                     where typeof(ILoad).IsAssignableFrom(t)
                     select t).ToArray(); 
```

然后，您在 ClassLibrary1 中拥有所有实现`ILoad`.

然后，您可以实例化所有这些：

```
ILoad[] instantiatedTypes = 
    iLoadTypes.Select(t => (ILoad)Activator.CreateInstance(t)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-17T03:06:34.560

接受的答案的唯一问题是您的程序集中必须有一个实现接口的具体类。

为了避免这种情况，我创建了能够在运行时创建动态对象并使其实现所需接口的 CustomActivator。

我把它放在github上： [https ://github.com/fabriciorissetto/CustomActivator](https://github.com/fabriciorissetto/CustomActivator)

调用很简单：

```
CustomActivator.CreateInstance<MyInterface>(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-24T07:25:17.433

您不能创建接口的实例，但如果

> UserControl1 实现 ILoad 接口

您可以将结果对象用作`ILoad`

```
ILoad uc = (ILoad)Activator.CreateInstance(ob);
grd.Children.Add(uc); 
```

此外，你不需要通过接口来处理它，如果你写

```
UserControl1 uc = (UserControl1)Activator.CreateInstance(ob);
grd.Children.Add(uc); 
```

的成员`ILoad`可以调用为`uc.SomeILoadMethod();`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-24T07:28:41.660

您可以使用像“NInject”这样的 IoC 容器来实现您想要的。您可以将容器配置为在请求接口时返回具体类型。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-24T07:26:45.063

接口是一个接口。这是一个模板。为什么要实例化一个接口？实现接口并实例化该类。你不能实例化一个接口，它真的没有意义。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-12T04:42:28.303

如果项目中引用了该库，您可以使用：

```
 static public IEnumerable<Type> GetTypesFromLibrary<T>(String library)
    {
        var MyAsemblies = AppDomain.CurrentDomain.GetAssemblies()
                         .Where(a=>a.GetName().Name.Equals(library))
                         .Select(a=>a);
        var Exported = MyAsemblies
                         .FirstOrDefault()
                         .GetExportedTypes();
        var Asignable = Exported
                         .Where (t=> !t.IsInterface && !t.IsAbstract
                         && typeof(T).IsAssignableFrom(t))
                         .Select(t=>t)
                         .AsEnumerable();
        return Asignable;
    }

    static public T GetInstanceOf<T>(String library, String FullClassName)
    {
        Type Type = GetTypesFromLibrary<T>(library)
                        .Where(t => t.FullName.Equals(FullClassName))
                        .FirstOrDefault();
        if (Type != null)
        {
            T Instance = (T)Activator.CreateInstance(Type);
            return Instance;
        }
        return default(T);
    } 
```

# javascript - Alternative to (deprecated) value attribute for li elements

> ID：10732935
> 
> 赞同：5
> 
> 时间：2012-05-24T07:22:34.237
> 
> 标签：javascript, jquery, css, html

I'm currently working on a web application using HTML 5, CSS and JQuery. I have an unordered list (ul) for displaying page links, with each li element containing the page link. This list is created dynamically using jQuery.

What I would like to do is to have the list elements display only the page name in the link, but at the same time retain the full link path. For example, "http://www.foo.com/xyz/contactus" would be displayed as "contactus", but the li element would still "know" the full link path. For this purpose the value attribute of li would have been perfect, since i could set them like this:

```
var ul = $('<ul/>').attr('id', 'linkList');
for (var i = 0; i < linksOnPage.length; i++)  // linksOnPage is an array with all the links
    {
        var pgName = linksOnPage[i].toString().slice(steps[i].toString().lastIndexOf('/') + 1);

        // Create list element and append content
        var li = $('<li/>').text(pgName);    // Set the text to the page name
        li.attr('value', linksOnPage[i].toString());    // Set the value to the full link

        ul.append(li);
    } 
```

This would create a list like:

```
<ul>
    <li value="http://www.foo.com/xyz/contactus">contactus</li>
    ...
</ul> 
```

Unfortunately the value attribute of li has been deprecated since HTML 4.01 (anyone know the rationale behind this? Seems pretty useful to me...).

So, I would like some advice on how to proceed. One option is to ignore the deprecation and use the value attribute anyway, since all the major browsers still support it, but I'm not very keen on using a deprecated feature and it just feels wrong.

Any ideas?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T07:24:29.667

更改自：

```
<li value="http://www.foo.com/xyz/contactus">contactus</li> 
```

至：

```
<li data-value="http://www.foo.com/xyz/contactus">contactus</li> 
```

`data-*`模式是在 DOM 元素中保存值的新 HTML5 方式。

您可以通过以下两种方式之一获取值：

```
$('#li-Id').data('value');
$('#li-Id').attr('data-value'); 
```

您可以阅读有关这些属性[的 John Resig 的这篇博文。](http://ejohn.org/blog/html-5-data-attributes/)

jQuery[`data`函数](http://api.jquery.com/data/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T07:24:24.033

只需使用一个`data`属性（[介绍](http://ejohn.org/blog/html-5-data-attributes/)；[更长的教程](http://html5doctor.com/html5-custom-data-attributes/)；[规范](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)）：

```
<li data-path="http://www.foo.com/xyz/contactus">contactus</li> 
```

另外，jQuery 通过该[`.data`](http://api.jquery.com/data/)方法可以方便地检测和公开这些属性的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T07:31:45.640

即使`value`已弃用，它仍然可以通过 JavaScript 使用和访问。你只是放弃验证状态！

或者，您可以使用`data-*`属性（正如我看到其他人所建议的那样）或将值直接映射到 DOM 元素 - 因为您在运行时生成此标记，所以您可以像这样添加一个属性（JS 允许您这样做既是一种祝福和诅咒）：

```
li.someLinkPath = 'some url here';
//and in the click handler you could access this as
this.someLinkPath; 
```

仍然......如果您打算将其用于导航，为什么不使用带有 href 的锚点？

# c++ - How to write an image with EXIF data (Matlab/C++)

> ID：10732938
> 
> 赞同：1
> 
> 时间：2012-05-24T07:22:44.067
> 
> 标签：c++, image, matlab, exif

How can I write an image including EXIF data?

I am using Matlab and C++, any solution will be greatly appreciated.. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:45:50.913

只是为了帮助别人：

我找到了 Phil Harvey 的一个名为**ExifTool**的程序。它用于在文件之间更改、写入甚至复制 exif 数据。它可以从命令行运行，所以我可以从 matlab 运行它。

这里有一个链接供大家欣赏：

[http://www.sno.phy.queensu.ca/~phil/exiftool/](http://www.sno.phy.queensu.ca/~phil/exiftool/)

# windows - Git 操作偶尔会在 Windows 上的 Jenkins 中挂起

> ID：10732940
> 
> 赞同：15
> 
> 时间：2012-05-24T07:22:49.170
> 
> 标签：windows, git, jenkins, assembla, gitblit

我们正在运行托管在 Assembla 的 Git 项目的持续 Jenkins 构建。Jenkins 在自己的用户下在 Tomcat 6 上运行，并且通常运行良好。

但是每隔一段时间（比如每 10 次构建中一次），构建作业开始时的签出操作就会挂起。在其他时候，构建结束时的 Git 标记操作也会挂起。我相信这在命令行操作中从未发生过（在具有相同用户的同一主机上）。

挂起时，Windows 进程树显示 taskhost.exe ？tomcat6.exe ? git.exe ？ssh.exe

在外部杀死挂起标记命令的 Git 和 ssh 进程时，在作业控制台输出中会看到以下堆栈跟踪 - 错误很奇怪，因为提到的目录已经存在并且已安装私钥。

```
hudson.plugins.git.GitException: Command "C:/Program Files (x86)/Git/bin/git.exe push <repository> <tag-name>" returned status code 1:
stdout:
stderr: Could not create directory 'c/Users/<user-name>/.ssh'.
    at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:779)
    at hudson.plugins.git.GitAPI.launchCommand(GitAPI.java:741) 
```

这是进程和句柄的完整列表（除了长长的 Tomcat 线程列表）。构建任务当前挂起。这里的另一个奇怪现象是每 5 分钟有一个预定的 SCM 轮询，但它已经有几天没有运行了——它可能也以某种方式卡住了。

```
Process                PID      CPU      Private   Working     Description                                      Company Name
                                         Bytes     Set
-----------------------------------------------------------------------------------------------------------------------------------------
System Idle          Process 0  84.09        0 K       24 K
 Interrupts            n/a       0.28        0 K        0 K    Hardware Interrupts
 DPCs                  n/a       0.85        0 K        0 K    Deferred Procedure Calls
 System                   4                112 K      300 K
  smss.exe              240                620 K    1,196 K    Windows Session Manager                                 Microsoft Corporation
sppsvc.exe             2664              3,312 K    9,100 K    Microsoft Software Protection Platform Service          Microsoft Corporation
csrss.exe               344              3,516 K    5,120 K    Client Server Runtime Process                           Microsoft Corporation
 conhost.exe           1316              1,184 K    2,804 K    Console Window Host                                     Microsoft Corporation
 conhost.exe           3148              1,140 K    2,696 K    Console Window Host                                     Microsoft Corporation
wininit.exe             396              1,944 K    4,624 K    Windows Start-Up Application                            Microsoft Corporation
 services.exe           496              5,096 K   10,444 K    Services and Controller app                             Microsoft Corporation
  svchost.exe           616              4,776 K    9,940 K    Host Process for Windows Services                       Microsoft Corporation
   WmiPrvSE.exe        2468              2,692 K    6,052 K    WMI Provider Host                                       Microsoft Corporation
   dllhost.exe         2180      2.27    2,160 K    5,392 K    COM Surrogate                                           Microsoft Corporation
  svchost.exe           692      0.28    4,512 K    8,568 K    Host Process for Windows Services                       Microsoft Corporation
  svchost.exe           776              9,804 K   12,528 K    Host Process for Windows Services                       Microsoft Corporation
  svchost.exe           832             22,052 K   34,980 K    Host Process for Windows Services                       Microsoft Corporation
  svchost.exe           888              7,988 K   14,528 K    Host Process for Windows Services                       Microsoft Corporation
  svchost.exe           944              8,844 K   15,740 K    Host Process for Windows Services                       Microsoft Corporation
   dwm.exe              800              1,692 K    4,636 K    Desktop Window Manager                                  Microsoft Corporation
   dwm.exe             3908              1,800 K    4,748 K    Desktop Window Manager                                  Microsoft Corporation
  svchost.exe           984             13,036 K   17,004 K    Host Process for Windows Services                       Microsoft Corporation
  svchost.exe           284              8,536 K   11,152 K    Host Process for Windows Services                       Microsoft Corporation
  spoolsv.exe          1064              9,808 K   16,696 K    Spooler SubSystem App                                   Microsoft Corporation
  svchost.exe          1168              1,116 K    2,740 K    Host Process for Windows Services                       Microsoft Corporation
  Tomcat6.exe          1308      0.28  331,512 K  302,568 K    Commons Daemon Service Runner                           Apache Software Foundation
   git.exe             1812              3,308 K    4,880 K
    ssh.exe            2996              2,940 K    5,792 K
  vmtoolsd.exe         1352              8,260 K   12,892 K    VMware Tools Core Service                               VMware, Inc.
  VMUpgradeHelper.exe  1416              2,452 K    6,588 K    VMware virtual hardware upgrade helper application      VMware, Inc.
  svchost.exe          1880              3,796 K    9,224 K    Host Process for Windows Services                       Microsoft Corporation
   rdpclip.exe         3020              2,584 K    7,076 K    RDP Clip Monitor                                        Microsoft Corporation
   rdpclip.exe         4072              1,948 K    6,236 K    RDP Clip Monitor                                        Microsoft Corporation
  svchost.exe          1932              1,964 K    5,532 K    Host Process for Windows Services                       Microsoft Corporation
  dllhost.exe          1996              4,500 K   11,340 K    COM Surrogate                                           Microsoft Corporation
  msdtc.exe            1284              3,604 K    7,880 K    Microsoft Distributed Transaction Coordinator Service   Microsoft Corporation
  taskhost.exe         2492              3,076 K    6,252 K    Host Process for Windows Tasks                          Microsoft Corporation
  taskhost.exe         3548              2,896 K    6,088 K    Host Process for Windows Tasks                          Microsoft Corporation
 lsass.exe              504              8,516 K   16,548 K    Local Security Authority Process                        Microsoft Corporation
 lsm.exe                512              3,468 K    6,480 K    Local Session Manager Service                           Microsoft Corporation
csrss.exe               408              1,836 K    3,796 K    Client Server Runtime Process                           Microsoft Corporation
winlogon.exe            436              1,780 K    4,392 K    Windows Logon Application                               Microsoft Corporation
 LogonUI.exe            784              7,344 K   14,460 K    Windows Logon User Interface Host                       Microsoft Corporation
csrss.exe              2184              2,756 K    7,532 K    Client Server Runtime Process                           Microsoft Corporation
winlogon.exe           2952              1,960 K    5,192 K    Windows Logon Application                               Microsoft Corporation
explorer.exe           1836             23,536 K   45,060 K    Windows Explorer                                        Microsoft Corporation
 VMwareTray.exe        2168              2,824 K    6,400 K    VMware Tools tray application                           VMware, Inc.
 regedit.exe           2772              6,212 K    9,584 K    Registry Editor                                         Microsoft Corporation
 procexp64.exe         3648      11.93  21,904 K   37,056 K    Sysinternals Process Explorer                           Sysinternals - www.sysinternals.com
csrss.exe              3140              2,732 K    5,612 K    Client Server Runtime Process                           Microsoft Corporation
 conhost.exe           2500              1,312 K    3,452 K    Console Window Host                                     Microsoft Corporation
winlogon.exe           3172              1,900 K    4,980 K    Windows Logon Application                               Microsoft Corporation
explorer.exe            868             28,840 K   45,200 K    Windows Explorer                                        Microsoft Corporation
 VMwareTray.exe        3300              2,672 K    6,252 K    VMware Tools tray application                           VMware, Inc.
 rundll32.exe          3328              1,828 K    5,584 K    Windows host process (Rundll32)                         Microsoft Corporation
 cmd.exe               2832              2,240 K    2,588 K    Windows Command Processor                               Microsoft Corporation

Process: Tomcat6.exe Pid: 1308

Type        Name
Desktop      \Default
Directory    \KnownDlls
Directory    \BaseNamedObjects
Event        \BaseNamedObjects\TOMCAT6SIGNAL
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\commons-daemon.2012-05-24.log
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\tomcat6-stdout.2012-05-24.log
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\tomcat6-stdout.2012-05-24.log
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\tomcat6-stderr.2012-05-24.log
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\tomcat6-stderr.2012-05-24.log
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0
File    C:\Users\<username>\AppData\Local\Temp\hsperfdata_<username>\1308
File    C:\Program Files\Java\jre7\lib\rt.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\bin\bootstrap.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\bin\tomcat-juli.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\catalina.2012-05-30.log
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\localhost.2012-05-24.log
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\manager.2012-05-24.log
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\host-manager.2012-05-24.log
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\tomcat6-stderr.2012-05-24.log
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\logs\tomcat6-stdout.2012-05-24.log
File    C:\Program Files\Java\jre7\lib\ext\dnsns.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\annotations-api.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\catalina-ant.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\catalina-ha.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\catalina-tribes.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\catalina.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\ecj-3.7.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\el-api.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\jasper-el.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\jasper.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\jsp-api.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\servlet-api.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\tomcat-coyote.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\tomcat-dbcp.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\tomcat-i18n-es.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\tomcat-i18n-fr.jar
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\lib\tomcat-i18n-ja.jar
File    C:\Program Files\Java\jre7\lib\resources.jar
File    C:\Program Files\Java\jre7\lib\ext\localedata.jar
File    C:\Program Files\Java\jre7\lib\jsse.jar
File    C:\Program Files\Java\jre7\lib\jce.jar
File    C:\Program Files\Java\jre7\lib\ext\sunec.jar
File    C:\Program Files\Java\jre7\lib\ext\sunmscapi.jar
File    C:\Program Files\Java\jre7\lib\ext\sunjce_provider.jar
File    \Device\Afd
File    \Device\KsecDD
File    \Device\Nsi
File    C:\Windows\System32\en-US\KernelBase.dll.mui
File    E:\jenkins\workspace\<job1>\.git\objects\pack\pack-f36e1122944b1a18c4f6a8dd9d38915125dffa9e.pack
File    C:\Windows\Fonts\symbol.ttf
File    \Device\Afd
File    \Device\Afd
File    C:\Program Files\Java\jre7\lib\charsets.jar
File    C:\Program Files\Java\jre7\lib\charsets.jar
File    \Device\Afd
File    \Device\Afd
File    E:\jenkins\jobs\<job2>\builds\2012-05-30_17-45-06\log
File    \Device\Afd
File    \Device\Afd
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\aether-api-1.13.1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\aether-connector-wagon-1.13.1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\aether-impl-1.13.1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\aether-spi-1.13.1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\aether-util-1.13.1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\ant-1.8.3.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\ant-launcher-1.8.3.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\aopalliance-1.0.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\commons-cli-1.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\commons-httpclient-3.1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\commons-io-1.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\commons-net-3.0.1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\doxia-sink-api-1.0.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\guava-11.0.1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\jackrabbit-jcr-commons-2.2.5.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\jackrabbit-webdav-2.2.5.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\javax.inject-1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\jsch-0.1.44-1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\jsr305-1.3.9.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\lib-jenkins-maven-artifact-manager-1.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\lib-jenkins-maven-embedder-3.9.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-aether-provider-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-agent-1.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-artifact-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-compat-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-core-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-embedder-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-interceptor-1.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-model-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-model-<username>-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-plugin-api-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-reporting-api-3.0.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-repository-metadata-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-settings-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven-settings-<username>-3.0.4.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven2.1-interceptor-1.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven3-agent-1.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\maven3-interceptor-1.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\nekohtml-1.9.13.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\plexus-cipher-1.7.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\plexus-classworlds-2.3.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\plexus-component-annotations-1.5.5.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\plexus-interactivity-api-1.0-alpha-6.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\plexus-interpolation-1.14.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\plexus-sec-dispatcher-1.3.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\plexus-utils-2.0.6.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\sisu-guava-0.9.9.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\sisu-guice-3.1.0.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\sisu-inject-bean-2.3.0.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\sisu-inject-plexus-2.3.0.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\slf4j-api-1.6.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\wagon-file-2.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\wagon-ftp-2.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\wagon-http-2.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\wagon-http-shared-2.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\wagon-provider-api-2.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\wagon-ssh-2.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\wagon-ssh-common-2.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\wagon-ssh-external-2.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\wagon-webdav-jackrabbit-2.2.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\xercesImpl-2.9.1.jar
File    E:\jenkins\plugins\maven-plugin\WEB-INF\lib\xml-apis-1.3.04.jar
File    E:\jenkins\plugins\active-directory\WEB-INF\lib\active-directory-1.0.jar
File    E:\jenkins\plugins\active-directory\WEB-INF\lib\ado20-1.0.jar
File    E:\jenkins\plugins\active-directory\WEB-INF\lib\com4j-20080107.jar
File    E:\jenkins\plugins\artifactdeployer\WEB-INF\lib\ant-filesystem-tasks-0.0.2.jar
File    E:\jenkins\plugins\artifactdeployer\WEB-INF\lib\avalon-framework-4.1.3.jar
File    E:\jenkins\plugins\artifactdeployer\WEB-INF\lib\commons-codec-1.4.jar
File    E:\jenkins\plugins\artifactdeployer\WEB-INF\lib\commons-logging-1.1.jar
File    E:\jenkins\plugins\artifactdeployer\WEB-INF\lib\log4j-1.2.9.jar
File    E:\jenkins\plugins\artifactdeployer\WEB-INF\lib\logkit-1.0.1.jar
File    E:\jenkins\plugins\git\WEB-INF\lib\annotation-indexer-1.2.jar
File    E:\jenkins\plugins\git\WEB-INF\lib\bridge-method-annotation-1.4.jar
File    E:\jenkins\plugins\git\WEB-INF\lib\joda-time-1.5.1.jar
File    E:\jenkins\plugins\git\WEB-INF\lib\jsch-0.1.44-1.jar
File    E:\jenkins\plugins\git\WEB-INF\lib\org.eclipse.jgit-0.12.1.jar
File    E:\jenkins\plugins\jira\WEB-INF\lib\activation-1.1.1.jar
File    E:\jenkins\plugins\jira\WEB-INF\lib\axis-1.4.jar
File    E:\jenkins\plugins\jira\WEB-INF\lib\commons-codec-1.4.jar
File    E:\jenkins\plugins\jira\WEB-INF\lib\commons-discovery-0.4.jar
File    E:\jenkins\plugins\jira\WEB-INF\lib\commons-logging-1.0.4.jar
File    E:\jenkins\plugins\jira\WEB-INF\lib\jaxrpc-api-1.1.jar
File    E:\jenkins\plugins\jira\WEB-INF\lib\log4j-1.2.9.jar
File    E:\jenkins\plugins\jira\WEB-INF\lib\saaj-api-1.3.jar
File    E:\jenkins\plugins\jira\WEB-INF\lib\wsdl4j-1.6.2.jar
File    E:\jenkins\plugins\periodicbackup\WEB-INF\lib\guava-r05.jar
File    E:\jenkins\plugins\periodicbackup\WEB-INF\lib\junit-4.7.jar
File    E:\jenkins\plugins\periodicbackup\WEB-INF\lib\plexus-archiver-1.0-alpha-11.jar
File    E:\jenkins\plugins\periodicbackup\WEB-INF\lib\plexus-classworlds-1.2-alpha-6.jar
File    E:\jenkins\plugins\periodicbackup\WEB-INF\lib\plexus-component-api-1.0-alpha-15.jar
File    E:\jenkins\plugins\periodicbackup\WEB-INF\lib\plexus-container-default-1.0-alpha-15.jar
File    E:\jenkins\plugins\periodicbackup\WEB-INF\lib\plexus-io-1.0-alpha-3.jar
File    E:\jenkins\plugins\periodicbackup\WEB-INF\lib\plexus-utils-1.5.1.jar
File    E:\jenkins\plugins\subversion\WEB-INF\lib\svnkit-1.3.4-jenkins-4.jar
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    \Device\Afd
File    E:\jenkins\workspace\<job2>\.git\objects\pack\pack-a25789d9a15085fdc370bf63603670b6ef0aa516.pack
File    E:\jenkins\workspace\<job3>\.git\objects\pack\pack-3debf683446a7b50138fa83d20b8a176adc40d74.pack
File    E:\jenkins\workspace\<job4>\.git\objects\pack\pack-08e86702e225df334aa0281cdc34f6fe04a1a896.pack
File    E:\jenkins\workspace\<job5>\.git\objects\pack\pack-691d5f70f196faae3152545cc4e8a0668ee43182.pack
File    E:\jenkins\workspace\<job6>\.git\objects\pack\pack-a1f605f6d4ea56878d88c9d85c40884f7c9dc2e9.pack
File    E:\jenkins\workspace\<job7>\.git\objects\pack\pack-77c1adab9d7dcd56337a59bf7aa6ab1fc5423f0c.pack
File    \Device\NamedPipe\
File    C:\Windows\Fonts\arial.ttf
File    C:\Windows\Fonts\wingding.ttf
File    \Device\Afd
File    E:\jenkins\workspace\<job4>\.git\objects\pack\pack-29e3fac2d55ff8f5851726098c1310848ba61982.pack
File    E:\jenkins\jobs\<job2>\scm-polling.log
File    C:\Windows\winsxs\amd64_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7600.16385_none_a44af8ec57f961cf
File    \Device\Afd
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\work\Catalina\localhost\gitblit-0.9.3\wicketFilter-filestore\9946\429\2051F8E78B66AEB8107264447FDEE93E\pm-null
File    \Device\Afd
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\jenkins\WEB-INF\lib\jenkins-core-1.461.jar
File    E:\jenkins\workspace\<job3>\.git\objects\pack\pack-df631556f14db215a3790cdb2dbdc2d8ec6a4dce.pack
File    E:\jenkins\workspace\<job3>\.git\objects\pack\pack-41dc6597dd98bff4284be2be0437bc96b14a660f.pack
File    C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\jenkins\WEB-INF\lib\jenkins-core-1.461.jar
Key    HKLM\SYSTEM\ControlSet001\Control\Nls\Sorting\Versions
Key    HKLM
Key    HKLM\SYSTEM\ControlSet001\Control\SESSION MANAGER
Key    HKU\S-1-5-21-1089811676-525746212-2675575413-1203\Control Panel\International
Key    HKU\S-1-5-21-1089811676-525746212-2675575413-1203
Key    HKLM\SYSTEM\ControlSet001\services\WinSock2\Parameters\Protocol_Catalog9
Key    HKLM\SYSTEM\ControlSet001\services\WinSock2\Parameters\NameSpace_Catalog5
Key    HKU
Key    HKU\S-1-5-21-1089811676-525746212-2675575413-1203\Software\Microsoft\Windows\CurrentVersion\Explorer
Key    HKU\S-1-5-21-1089811676-525746212-2675575413-1203\Software\Microsoft\Windows NT\CurrentVersion
Key    HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags
Key    HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options
Process    git.exe(1812)
Section    \BaseNamedObjects\hsperfdata_<username>_1308
Section    \BaseNamedObjects\windows_shell_global_counters
WindowStation    \Windows\WindowStations\Service-0x0-12330$
WindowStation    \Windows\WindowStations\Service-0x0-12330$ 
```

这是 SSH 搜索（来自与上述进程列表不同的时间点）。我不知道该怎么做。

![在此处输入图像描述](../Images/eaabbfa2f91848c7350b2613d64e5499.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T08:22:44.627

我通过以下方式解决了它：

*   ***将Git 可执行文件***的路径设置为**`C:\Program Files (x86)\Git\cmd\git.exe`**（即**cmd**而不是 bin！）和
*   通过将环境变量设置**`%HOME%`**为 （否则默认为，在我的情况下，但通常设置为）。**`$USERPROFILE`**
    `HOME``$HOMEDRIVE$HOMEPATH``H:\``$HOME``$USERPROFILE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:28:02.883

这在以下位置进行了讨论：

[https://issues.jenkins-ci.org/browse/JENKINS-5413](https://issues.jenkins-ci.org/browse/JENKINS-5413)

您可以在脚本控制台中运行以下脚本：

```
Jenkins.instance.getTrigger("SCMTrigger").getRunners().each()
{
  item ->
    println(item.getTarget().name)
    println(item.getDuration())
    println(item.getStartTime())
    long millis = Calendar.instance.time.time - item.getStartTime()

    if(millis > (1000 * 60 * 3)) // 1000 millis in a second * 60 seconds in a minute * 3 minutes
    {
      Thread.getAllStackTraces().keySet().each()
      { 
        tItem ->
          if (tItem.getName().contains("SCM polling") && tItem.getName().contains(item.getTarget().name))
          { 
            println "Interrupting thread " + tItem.getName(); 
            tItem.interrupt()
          }
       }
    }
} 
```

至少解决问题...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T16:04:44.820

[在我的情况下，从PuTTY 站点](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)下载 plink并设置 GIT_SSH 环境变量以使用它解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T20:11:00.690

我可能已经解决了这个问题。我最初通过在 Linux 机器上使用 ssh-keygen 生成 SSH 密钥来设置它们。这通常有效，但 Git 偶尔会从 Jenkins 挂起。

现在，我尝试使用 PuTTY 工具为我的 Git 服务器设置基于密钥的身份验证，使用[这些说明](http://www.ualberta.ca/AICT/RESEARCH/LinuxClusters/pka-putty.html)。然后我将 GIT_SSH 环境变量设置为 plink.exe 的路径。它现在似乎正在工作，但它总是一个间歇性的问题。希望它不会回来...

# jquery - 不显眼的谷歌分析事件跟踪不起作用

> ID：10732941
> 
> 赞同：0
> 
> 时间：2012-05-24T07:22:52.260
> 
> 标签：jquery, google-analytics

我知道这不是唯一的问题，但我仍然找不到关于哪里出了问题的提示。

的JavaScript：

```
$(function()
{
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-[FILTERED]-1']);
  _gaq.push(['_trackPageview']);

  var ga = document.createElement('script'); ga.type = 'text/javascript'; 
  ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; 
  s.parentNode.insertBefore(ga, s);

    $('a[href$=pdf]').each( function() { $(this).attr('target', '_blank'); });
    $('a[href$=pdf]').on('click', function()    { _gaq.push(['_trackEvent', 'Link', 'Click', $(this).attr('href'), 1]); });

}); 
```

因此，在检查*生成的源代码*时（通过 FF 中的 web 开发工具栏），javascript 库按以下顺序插入：

1.  嘎
2.  jQuery
3.  上面看到的内容的页面js (1:1)

我在萤火虫中没有任何错误，页面跟踪工作正常，并且在`.push`也工作之后插入调试输出，所以没有“幽灵停止”。

我尝试连续3天每天点击一些pdf文件，GA中没有任何注册。

有任何想法吗？

* * *

**编辑**
我试图用`ga_debug.js`. Firebug 显示请求的图像 `_trackPageview`，但不显示 `_trackEvent`. 所以我尝试了以下方法：

```
$('a[href$=pdf]').each( function() 
{ 
    $(this).attr('target', '_blank'); 
    $(this).attr('onClick', "javascript:_gaq.push(['_trackEvent', 'Link', 'Click', $(this).attr('href'), 1]);");
}); 
```

现在请求图像，但根据萤火虫，永远加载并且不会完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:40:06.537

最常见的问题之一是分析跟踪 GIF 请求在离开当前页面之前未完成——您正在添加一个`target='_blank'`属性，所以这应该不是问题。

您是否尝试过使用[ga_debug.js](https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting#gaDebug)或[Fiddler](http://www.fiddler2.com/fiddler2/)来确保正在发送请求？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:59:55.553

问题解决了，显然您不能将`_gaq`零件放入文件中并将其包含在内。将其直接添加到 html 模板中即可。

# jquery - 如何使用 jQuery UI 插件使 html 文本框可拖动和调整大小？

> ID：10732943
> 
> 赞同：5
> 
> 时间：2012-05-24T07:23:02.740
> 
> 标签：jquery, jquery-ui, textbox, draggable, resizable

使用`jquery ui draggable`插件，我以这种方式使 html 文本框可拖动：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function() {
        $("#Text1").draggable({
            containment: "parent",
            cancel: null
        });
    });
</script>

<form id="form1" runat="server">
<div>

    <div id="dialog" title="Dialog Box" style="border: solid 1px black;">
        <input id="Text1" type="text" style="width: 200px; height: 20px;" value="Text1" />
    </div>

</div>
</form> 
```

但是，如何使用 jQuery 来调整大小呢？

先感谢您。

戈兰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-11T07:32:26.343

这是制作 HTML 文本框并使用的**[演示](http://jsfiddle.net/phpdeveloperrahul/6SF2v/)**`resizable``draggable``jquery-ui`

**HTML：**

```
<div id="container" class="ui-widget-content">
<h3 class="ui-widget-header">Containment</h3>
<span id="draggable">*  
<input type="text "id="resizable" class="ui-state-active" value="This is input box">
</span>
</div> 
```

**JS：**

```
$(function() {
     $( "#resizable" ).resizable({
containment: "#container"
});
     $( "#draggable" ).draggable({containment: "#container"});
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:36:25.930

通过使用`jQuery UI`.
**HTML 文件**
`<input type="text" id="resizable" />`
**JavaScript** 文件在脚本标签中引用所有需要的 jQuery 文件，即

`<script src="*all needed .js files*"></script>`

```
<script>
    $(function() {      
    $( "#resizable" ).resizable();
});
</script> 
```

*顺便说一句，为什么你需要使文本框可调整大小*

# python - 如何将 .values() 上的字符串转换为外键？

> ID：10732944
> 
> 赞同：0
> 
> 时间：2012-05-24T07:23:08.340
> 
> 标签：python, django, django-models

我想获得与特定职位相关的所有职位。`JobPost`是一个 FK `Position`，当我做 normal 时`.values()`，我得到外键 id 而不是字符串的位置。例如：

```
>>> JobPost.objects.filter(production=p).values('position')
[{'position': 4L}] 
```

我真正需要得到的是类似的伪代码：

```
>>> JobPost.objects.filter(production=p).values('position.position') 
```

和模型：

```
class JobPost(models.Model):
    name = models.CharField(max_length=100)
    position = models.ForeignKey(Position)

class Position(models.Model):
    position = models.CharField(max_length=100) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:25:42.347

`JobPost.objects.filter(production=p).values('position__position')`

查看[跨越关系的字段查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)。

# java - 在java中获取文件的根路径

> ID：10732945
> 
> 赞同：1
> 
> 时间：2012-05-24T07:23:14.110
> 
> 标签：java, jsp, jar

我正在使用 eclipse Indigo IDE ..我正在使用 eclipse 开发一个 jsp 应用程序 ( **myProject** )，其中我有一个用于配置数据库凭据的属性文件 ( **myProject\webcontent\db.properties )。**

我正在尝试从一个类（**myProject\src\samplePackage\sampleDBConnect.java**）访问这个文件。我已将**samplePackage.jar**导出到 * *myProject\webContent\WEB-INF\lib**。

我有一个调用 sampleDBConnect.java 中的方法的 Test.jsp 页面。

当我尝试运行此 Test.jsp 页面时，当前目录路径显示**C:\Documents and Settings\username**。我在其他一些驱动器中有我的项目（E:)。

谁能告诉我如何访问属性文件....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:26:35.373

```
getClass().getResourceAsStream("db.properties"); 
```

这假设您的 db.properties 位于同一目录“samplePackage”中。

如果要将其保留在 src 目录或说资源目录中，请使用

```
getClass().getClassLoader().getResourceAsStream("db.properties"); 
```

由于您的 java 代码属于同一个 web 项目，您不必创建同一个项目的 jar 并将其放在 WEB-INF/lib 文件夹中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:34:44.920

将 db.properties 移动到 myProject\src 目录，java 代码：InputStream input = sampleDBConnect.class.getClassLoader().getResourceAsStream("db.properties");

# cakephp - cake2.0评论插件

> ID：10732948
> 
> 赞同：0
> 
> 时间：2012-05-24T07:23:29.150
> 
> 标签：cakephp, comments, cakephp-2.0

我正在使用 cakephp2.0 并想集成评论插件，但我什么也没得到适当地。

请让我知道是否有任何简单的评论插件，我可以根据需要进行集成和修改。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:40:38.687

以下是我设置评论的方式：

评论表字段：

*   ID
*   parent_type，匹配父模型名称
*   parent_id
*   内容
*   user_id，发件人

在您想要评论的任何模型中，在此您的关联：

```
public $hasMany = array(
        'Comment' => array(
            'className' => 'Comment', 
            'foreignKey' => 'parent_id', 
            'conditions' => array('Comment.parent_type' => 'question')
        )
    ); 
```

这是一个视图元素：

```
<?php
/*
set variables:
$data : data of the parent
$type : the type of the parent
*/
if(!isset($name)) {
$name = 0;
}
foreach($data['Comment'] as $comment){
    echo '<div class="comment">'.$comment['content'].
        ' - '.$this->Html->link($comment['User']['username'],array('controller'=>'users','action'=>'view',$comment['User']['id']))
        .'</div>';
}
echo $this->Form->create(null, array('url' => '/comments/add','id'=>'qCommentForm'));
echo $this->Form->input('Comment.parent_id', array('type'=>'hidden','value'=>$data[$type]['id']));
echo $this->Form->input('Comment.parent_type', array('type'=>'hidden','value'=>$type));
echo $this->Form->textarea('Comment.content',array('div'=>'false','class'=>'small','label'=>false));
echo $this->Form->submit(__('Leave comment'),array('div'=>'false','class'=>'small'));
echo $this->Form->end();
?> 
```

然后，在您的模型的视图视图中，添加它（假设您将元素命名为 comment.ctp：

```
<?php echo $this->element('comment',array('data'=>$modelData,'type'=>'MyModel')) ?> 
```

# position - 无法在 JQuery $.each 循环中获取位置（）

> ID：10732951
> 
> 赞同：5
> 
> 时间：2012-05-24T07:23:50.403
> 
> 标签：position, jquery

我正在尝试使用html5（contenteditable =“true”）和jquery制作一个可编辑的框（一种richTextBox）。我需要找出可编辑 div 中每个元素的位置，以便可以像 microsoft word 那样插入分页符。这是页面

```
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>jQuery Context Menu Plugin Demo</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

    <script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript"></script>

    <script type="text/javascript"> 
        $(document).ready( function() {
            $("#divEdit").keyup(function(){
                $.each($("#divEdit").find("*"), function(i,item){
                    alert(item.position());
                });
            });             
        });
    </script>
</head>

<body>

    <h1>jQuery Context Menu Plugin and KendoUI Demo</h1>
    <div style="width:740px;height:440px" contenteditable="true" id = "divEdit">
        <p>
            <img src="http://www.kendoui.com/Image/kendo-logo.png" alt="Editor for ASP.NET MVC logo" style="display:block;margin-left:auto;margin-right:auto;" />
        </p>
        <p>
            Kendo UI Editor allows your users to edit HTML in a familiar, user-friendly way.<br />
            In this version, the Editor provides the core HTML editing engine, which includes basic text formatting, hyperlinks, lists,
            and image handling. The widget <strong>outputs identical HTML</strong> across all major browsers, follows
            accessibility standards and provides API for content manipulation.
        </p>

        <p id="para">Features include:</p>
        <ul>
            <li>Text formatting & alignment</li>
            <li>Bulleted and numbered lists</li>
            <li>Hyperlink and image dialogs</li>
            <li>Cross-browser support</li>
            <li>Identical HTML output across browsers</li>
            <li>Gracefully degrades to a <code>textarea</code> when JavaScript is turned off</li>
        </ul>
        <p>
            Read <a href="http://www.kendoui.com/documentation/introduction.aspx">more details</a> or send us your
            <a href="http://www.kendoui.com/forums.aspx">feedback</a>!
        </p>
    </div>
</body> 
```

问题是 alert(item.position()) 没有获取任何东西。Firefox 开发人员工具栏中出现的错误是“item.position 不是函数”。我的猜测是它必须与 $("#divEdit").find("*") 中每个元素的类型有关，因为所有元素都是不同的。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T07:27:32.227

您需要将`jQuery`对象从 中取出`item`，就像`position()`方法一样`jQuery`，因此抱怨`position()`不是函数

```
$(item).position() // instead of item.position() 
```

或者更简洁：

```
$.each($("#divEdit").find("*"), function(i,item){
   alert(item.position());
} 
```

改成

```
$('#divEdit').find('*').each(function() { 
   alert($(this).position());
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:30:28.750

更改此行

警报（项目。位置（））；

至

警报（$（项目）。位置（））；

# .net - 在 .NET 中访问网络适配器设置

> ID：10732953
> 
> 赞同：1
> 
> 时间：2012-05-24T07:24:04.703
> 
> 标签：.net, wmi

这就是我想要做的：

*   在 C# 中配置我的网络适配器设置

它工作得很好，设置和阅读和IP，激活dhcp。我为此使用 System.Management 类。

现在我接下来要做的是激活和停用诸如“QoS Packet Planner”、“Client for Microsoft Networks”和“E/A Driver for ...”之类的东西，因为我的 Windows 是德语的，我不能说那些条目是用英文准确调用的，我不知道那个列表叫什么，这使得很难找到有关它的信息。

我现在需要的是：

*   **该复选框列表的确切英文技术名称**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:03:41.240

这个 checkboxlist 是**网络适配器的绑定协议列表**。据我所知，没有一个 WMI 类来操作这些条目。

# node.js - 以快递方式加载的路由器

> ID：10732959
> 
> 赞同：1
> 
> 时间：2012-05-24T07:24:23.707
> 
> 标签：node.js, express

我有兴趣在 nodejs express 应用程序中加载我的路由器。我看到了两种方法：

1.  首先是在应用程序的引导位置加载所有路由器，如下所示：

    ```
    module.exports = function(app, db) {
          var controllers_path = __dirname + '/app/controllers';
          var controller_files = fs.readdirSync(controllers_path);

          controller_files.forEach(function(file){
             require(controllers_path+'/'+file)(app)
          })
       });
    }; 
    ```

2.  第二个是在需要时将每个路由器加载到特定文件中，如下所示：

    ```
    require('../controllers/main.js');
    require('../controllers/payload.js'); 
    ```

哪种方法对性能更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:35:04.920

第一种方法似乎更好，因为很明显你只会在启动应用程序时阻塞。

第二种方法可能会发生同样的事情，但从片段中并不完全清楚。

# iphone - 如何检索字符串中的子字符串

> ID：10732968
> 
> 赞同：1
> 
> 时间：2012-05-24T07:24:59.560
> 
> 标签：iphone

我是 iphone 新手。我怀疑我的音频文件的路径位于资源文件夹的目录中，该路径是

```
/Users/Chary/Library/Application Support/iPhone Simulator/5.0/Applications/B02404E5-52DC-49B6-8DBB-C9946E4331AF/BiblePlayer.app/raj/1.mp3 
```

我的问题是如何从整个路径中检索字符串“1.mp3”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T07:27:43.407

```
NSString *fullPath = @"…";
NSString *fileName = [fullPath lastPathComponent]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:28:23.657

```
NSString *allString = @"/Users/Chary/Library/Application Support/iPhone Simulator/5.0/Applications/B02404E5-52DC-49B6-8DBB-C9946E4331AF/BiblePlayer.app/raj/1.mp3"

int slashPosition = [allString rangeOfString:@"/" options:NSBackwardsSearch].location;
    NSString *function = [allString substringFromIndexslashPosition + 1]; 
```

这将为您提供最后一个斜杠后的文件路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T08:22:53.207

试试看：-

```
NSString *yourPath = @"/Users/Chary/Library/Application Support/iPhone Simulator/5.0/Applications/B02404E5-52DC-49B6-8DBB-C9946E4331AF/BiblePlayer.app/raj/1.mp3";
NSString *fileName = [yourPath lastPathComponent]; 
```

它可能会帮助你谢谢:)

# java - JPA Criteria API IN 表达式 参数列表

> ID：10732970
> 
> 赞同：26
> 
> 时间：2012-05-24T07:25:07.393
> 
> 标签：java, jpa, expression, criteria-api

是否可以在 Criteria API .in 表达式中使用参数列表？

我有这样的事情：

```
 List<Long> list = new ArrayList<Long>();
    list.add((long)1);
    list.add((long)2);
    list.add((long)3);

CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Bewerbung> criteriaQuery = cb.createQuery(Bewerbung.class);
Root<Bewerbung> bewerbung = criteriaQuery.from(Bewerbung.class);

criteriaQuery.select(bewerbung).where(
cb.in(bewerbung.get(Bewerbung_.bewerberNummer)).value(list);

return em.createQuery(criteriaQuery).getResultList(); 
```

该表达式`.value(list)`不能正常工作，因为`value()`它需要一个 long 类型的参数而不是一个列表。就我而言，不可能使用子查询。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-30T18:23:54.850

无需使用`CriteriaBuilder#isTrue`. 这应该足够了：

```
criteriaQuery.select(bewerbung)
             .where(bewerbung.get(Bewerbung_.bewerberNummer)
             .in(list)); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-24T07:56:41.300

```
cb.isTrue(bewerbung.get(Bewerbung_.bewerberNummer).in(list)); 
```

应该做的伎俩，AFAIK。

# android - Android 数据库应用程序没有响应

> ID：10732976
> 
> 赞同：0
> 
> 时间：2012-05-24T07:25:44.097
> 
> 标签：android, database, sqlite

我正在制作一个将文本字段值存储到数据库的应用程序。输入值后，当我按下按钮提交它时，它只是挂起并且没有响应。

我的 onCreate 代码如下：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final DBAdapter db = new DBAdapter(this);

      //---add 2 titles---
        db.open();
        final long d_id ;  
        final EditText input1 = (EditText) findViewById(R.id.isbn);
        final String   isbn   = input1.getText().toString();

        final EditText input2 = (EditText) findViewById(R.id.titleText);
        final String   tText   = input2.getText().toString();

        final EditText input3 = (EditText) findViewById(R.id.publisherText);
        final String   pText   = input3.getText().toString();

        this.btn = (Button)this.findViewById(R.id.button1);
        this.btn.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v) {
                db.insertTitle(isbn, tText, pText);

            }
        });

         db.close();
    } 
```

}

isbn、titleText 和 publisherText 是我的 Textfield id。insertTitle 是插入值的函数。

我的代码有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:29:07.773

您在创建应用程序时读取文本字段的值，而不是在按下按钮时。您将始终使用当前代码输入 EditTexts 的初始值。试试这个：

```
db.insertTitle(input1.getText().toString(), input2.getText().toString(), input3.getText().toString()); 
```

您将不得不移动您关闭数据库的位置，否则您将在尝试访问已关闭的数据库时收到错误消息。尝试将其放入 onPause() 或 onDestroy()。

如果这不是解决方案，请**发布您的 logcat 错误**，这样我们就不必猜测发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:30:36.370

试试这个

```
 this.btn = (Button)this.findViewById(R.id.button1);
    this.btn.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
final EditText input1 = (EditText) findViewById(R.id.isbn);
    final String   isbn   = input1.getText().toString();

    final EditText input2 = (EditText) findViewById(R.id.titleText);
    final String   tText   = input2.getText().toString();

    final EditText input3 = (EditText) findViewById(R.id.publisherText);
    final String   pText   = input3.getText().toString();

            db.insertTitle(isbn, tText, pText);

        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:32:02.197

我认为你的问题是`open()` ，`close()`他们在`onclick method`或关于你的`insertTitle()`方法。检查您的值和类型。

```
 ContentValues cv = new ContentValues();
    cv.put(KEY_WORK_OUT, workout);
    cv.put(KEY_NAME, name);
    cv.put(KEY_REP,rep);
    cv.put(KEY_WEIGHT, weight);

    ourDataBase.insert(DATABASE_TABLE, null, cv); 
```

# java - Java中光标周围的黄色圆圈

> ID：10732978
> 
> 赞同：2
> 
> 时间：2012-05-24T07:25:52.463
> 
> 标签：java, cursor, geometry, marker

我试图弄清楚如何在Java中的光标周围制作一个黄色圆圈。问题是我们有一个屏幕录像机（显然）记录屏幕。在 Google 上使用关键字“Java 中光标周围的黄色圆圈”只会让我了解如何在 MAC、WM 和其他应用程序上的光标周围添加黄色圆圈，而不是如何在用户计算机上的 Java 中添加应用程序启动。

如何在不使用现有图像的情况下做到这一点？绘制一个带有一些不透明度的简单黄色圆圈将是最简单的事情，使其跟随屏幕上的鼠标。而且，如果可以在用户单击鼠标按钮时使其消失并重新出现，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T18:45:16.703

可以通过将 MouseMotionListener 附加到您的组件来做到这一点，但需要一些工作才能使其完全按照您的要求工作。

我会从这样的事情开始：

```
private static final double RADIUS    = 15.0;
private static final double DIAMETER  = 2.0 * RADIUS;
private static final Color  XOR_COLOR = Color.yellow;

private static Shape m_circle = null;

@Override
public void mouseMoved(MouseEvent e)
{
    Graphics2D g2     = (Graphics2D) getGraphics();
    Point      p      = e.getPoint();
    Shape      circle = new Ellipse2D.Double(p.getX() - RADIUS, p.getY() - RADIUS, DIAMETER, DIAMETER);

    clearCircle(g2);

    g2.setXORMode(XOR_COLOR);
    g2.draw(circle);
    g2.setPaintMode();

    m_circle = circle;
}

private void clearCircle(Graphics2D g2)
{
    if (m_circle != null)
    {
        g2.setXORMode(XOR_COLOR);
        g2.draw(m_circle);
        g2.setPaintMode();

        m_circle = null;
    }
} 
```

还需要确保在 mouseExited 事件上清除旧圆圈，您可以通过添加 MouseListener 来监听该事件。这也有 mousePressed/mouseReleased/mouseClicked 事件，您需要在用户单击鼠标时使其消失/重新出现。

Using XOR is convenient because it is very easy to restore the screen by repainting the same shape with the same color and style but it isn't quite what you asked for. It is possible to repair the screen by capturing an image of the area that you are about to draw the circle into. The circle can be removed from the screen by repainting the damaged area before painting a circle in a new position.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T08:04:16.510

无法在现有鼠标指针周围添加一个圆圈。您只能将鼠标指针设置为完整的图像。

# java - Android 我错了吗？未捕获的异常（组=0x4001d800）

> ID：10732980
> 
> 赞同：0
> 
> 时间：2012-05-24T07:25:56.903
> 
> 标签：java, android, radio-button, nullpointerexception

这项工作基于 Patel Deval 示例。

该应用程序打算根据选定的单选按钮加载 ImageSwicher 内容。在运行时打印未捕获的异常 (group=0x4001d800)。我哪里错了？这是代码

```
private Gallery gallery;

private RadioGroup rdgSelection;

private ImageSwitcher isSwitcher;

private Boolean flag = true;

private int radioCheckedId = -1; //no radio button

//arrays of image for alerts

private Integer[] pics ={ R.drawable.a, R.drawable.b, R.drawable.c, R.drawable.d,R.drawable.e,R.drawable.exit, R.drawable.plan, R.drawable.icon, R.drawable.plan };

private Integer[] others = {R.drawable.exit, R.drawable.plan, R.drawable.icon, R.drawable.plan,R.drawable.c };

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sendalert);

    gallery = (Gallery)findViewById(R.id.imgGallery);

    isSwitcher = (ImageSwitcher)findViewById(R.id.ImgSwith);

    rdgSelection = (RadioGroup)findViewById(R.id.radEvent);

    isSwitcher = setFactory(this);

    //get radio button id

    rdgSelection.check(rdgSelection.getChildAt(rdgSelection.getChildCount() - 1).getId());

    if (rdgSelection.getCheckedRadioButtonId()==R.id.radBtnAccident){

        flag = true;

                    gallery.setAdapter(new ImageAdapter(MsgToWeb.this));

    }else{

        flag=false;

        gallery.setAdapter(new ImageAdapter(MsgToWeb.this));

    }

     rdgSelection.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(RadioGroup group, int checkedId) {

                gallery.setAdapter(new ImageAdapter(MsgToWeb.this));

                if (rdgSelection.getCheckedRadioButtonId() == R.id.radBtnAccident)

                    flag = true;

                else

                    flag = false;
            }
        });

        gallery.setOnItemSelectedListener(this);

}

private ImageSwitcher setFactory(MsgToWeb msgToWeb) {
    // TODO Auto-generated method stub
    return null;
}

public class ImageAdapter extends BaseAdapter {

    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c; 

    }

    public Object getItemId() {
        // TODO Auto-generated method stub
        return null;
    }

    public int getCount() {
        //return num of arrays
        if (flag)
            return pics.length;
        else
            return others.length;
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        ImageView i = new ImageView(mContext);

        if(flag)
            i.setImageResource(pics[position]);
        else
            i.setImageResource(others[position]);

        return i;   
    }

}

public View makeView() {
    // TODO Auto-generated method stub

    ImageView iView = new ImageView(this);

    iView.setBackgroundColor(0xFF000000);

    iView.setScaleType(ImageView.ScaleType.FIT_CENTER);

    iView.setLayoutParams(new ImageSwitcher.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));

    return iView;

}

public void onItemSelected(AdapterView<?> arg0, View v, int position,long id) {
    // TODO Auto-generated method stub

    if(flag)
        isSwitcher.setImageResource(pics[position]);
    else
        isSwitcher.setImageResource(others[position]);

}

public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}

} 
```

这里的日志

```
05-24 10:07:03.394: W/dalvikvm(321): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-24 10:07:03.404: E/AndroidRuntime(321): FATAL EXCEPTION: main
05-24 10:07:03.404: E/AndroidRuntime(321): java.lang.NullPointerException
05-24 10:07:03.404: E/AndroidRuntime(321):  at com.moLaroute.mu.MsgToWeb.onItemSelected(MsgToWeb.java:147)
05-24 10:07:03.404: E/AndroidRuntime(321):  at android.widget.AdapterView.fireOnSelected(AdapterView.java:864)
05-24 10:07:03.404: E/AndroidRuntime(321):  at android.widget.AdapterView.access$200(AdapterView.java:42)
05-24 10:07:03.404: E/AndroidRuntime(321):  at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:830)
05-24 10:07:03.404: E/AndroidRuntime(321):  at android.os.Handler.handleCallback(Handler.java:587)
05-24 10:07:03.404: E/AndroidRuntime(321):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-24 10:07:03.404: E/AndroidRuntime(321):  at android.os.Looper.loop(Looper.java:123)
05-24 10:07:03.404: E/AndroidRuntime(321):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-24 10:07:03.404: E/AndroidRuntime(321):  at java.lang.reflect.Method.invokeNative(Native Method)
05-24 10:07:03.404: E/AndroidRuntime(321):  at java.lang.reflect.Method.invoke(Method.java:521)
05-24 10:07:03.404: E/AndroidRuntime(321):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-24 10:07:03.404: E/AndroidRuntime(321):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-24 10:07:03.404: E/AndroidRuntime(321):  at dalvik.system.NativeStart.main(Native Method)
05-24 10:07:07.014: I/Process(321): Sending signal. PID: 321 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:31:53.093

isSwitcher = setFactory(this);

->

setFactory 返回 null

->

if(flag) isSwitcher.setImageResource(pics[position]); 否则 isSwitcher.setImageResource(others[position]);

在这里抛出 NPE，因为 isSwitcher 为空

# c++ - 第一个交换功能有什么问题？

> ID：10732987
> 
> 赞同：1
> 
> 时间：2012-05-24T07:26:25.550
> 
> 标签：c++

我正在编写代码来生成数组元素的排列。我编写了两种不同类型的交换函数，一种使用临时存储可以正常工作，而另一种不使用任何临时存储则不会生成输出。为什么会这样？？

以下代码工作正常

```
#include<iostream>
#include<cstdio>
using namespace std;
int tt=0;
void swap1 (int v[], int i, int j) {
    int t;

    t = v[i];
    v[i] = v[j];
    v[j] = t;
}   
void permute(int arr[],int n,int index)
{
     if(index==n)
                {
                for(int i=0;i<n;i++) printf ("%c", arr[i]) ;
                printf("\n");
                tt++;
                }
     else
         for(int j=index; j < n ;j++)
         {
           swap1(arr,index,j);
           permute(arr,n,index+1); 
           swap1(arr,j,index);           
         }        
}
int main()
{
    int arr[]={'a','b','c','d'};
    permute(arr,4,0);
    cout<<endl;
    printf("%d\n",tt);
    getchar();
}

output:
acbd
acdb
adcb
adbc
bacd
badc
bcad
bcda
bdca
bdac
cbad
cbda
cabd
cadb
cdab
cdba
dbca
dbac
dcba
dcab
dacb
dabc

24 
```

虽然以下代码不输出排列：

```
#include<iostream>
#include<cstdio>
using namespace std;
int tt=0;
void swap(int v[],int i,int j)
{
     v[i]= v[i] + v[j];
     v[j]= v[i] - v[j];
     v[i]= v[i] - v[j];
}
void permute(int arr[],int n,int index)
{
     if(index==n)
                {
                for(int i=0;i<n;i++) printf ("%c", arr[i]) ;
                printf("\n");
                tt++;
                }
     else
         for(int j=index; j < n ;j++)
         {
           swap(arr,index,j);
           permute(arr,n,index+1); 
           swap(arr,j,index);           
         }        
}
int main()
{
    int arr[]={'a','b','c','d'};
    permute(arr,4,0);
    cout<<endl;
    printf("%d\n",tt);
    getchar();
}

output:

24 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T07:35:16.430

请，为了你所信仰的任何神灵的爱（或其他），不要使用像你的第二个交换功能（或可怕的异或交换技巧）这样的丑陋黑客。

它们完全没有必要，而且通常比典型的临时变量解决方案*要慢。*它们还将导致您的代码出现在[The Daily WTF](http://thedailywtf.com/)之类的网站上，而一代又一代的程序员（他们必须维护这样的垃圾）将在未来的几个世纪中诅咒您的名字 :-)

而且，无论如何，如果您“交换”的两个元素是相同的，它们将不起作用，因为在您这样做的那一刻：

```
v[i]= v[i] + v[j]; 
```

如果`i`和`j`是相同的值，则您丢失了其他步骤工作所需的信息。

您可以在下面看到这一点。假设您有两个*不同的*变量，`a = 20`并且`b = 30`. 完成您的步骤：

```
a = a + b;  // a <- (20 + 30) = 50, b still = 30.
b = a - b;  // b <- (50 - 30) = 20, a still = 50.
a = a - b;  // a <- (50 - 20) = 30, b still = 20. 
```

并且它们被交换了，尽管您可能希望使用不是二进制补码的溢出和编码方案来研究边缘情况（无论如何，在 C 中，不确定 C++ 是否允许二进制补码或符号幅度）。

但是让我们看看当`a`和`b`都是*同一个*变量时会发生什么（不是同一个*值*，而是实际的同一个*变量，*就像一个引用）。所以它们“都”的值是 20，你会期望它们在交换后仍然是 20，但让我们看一下：

```
a = a + b;  // a <- (20 + 20) = 40, AND b = 40 as well.
b = a - b;  // b <- (40 - 40) =  0, AND a =  0 as well.
a = a - b;  // a <- ( 0 -  0) =  0, AND b =  0 as well. 
```

这*并不是*你所期望的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:31:52.220

```
void swap(int v[],int i,int j)
{
     v[i]= v[i] + v[j];
     v[j]= v[i] - v[j];
     v[i]= v[i] - v[j];
} 
```

当（然后将 v[i] 设置为 0）时不起作用`i == j`，您的循环会发生这种情况

```
for (int j = index; j < n; ++j) {
    swap(arr, index, j); 
```

# c# - 将图像并行上传到 Azure blob 有什么更好的选择？

> ID：10732992
> 
> 赞同：0
> 
> 时间：2012-05-24T07:26:36.590
> 
> 标签：c#, parallel-processing, message-queue, azure-blob-storage

我有一个列表，每条消息都有一个图像和列表现在我需要更新每条消息的图像和附件的 blob Url

> > 解决方案 1：为图像调用 UploadBlob，为每个附件调用 UploadBlob，然后使用 Blob url 更新 DB 中的消息对象
> > 
> > 解决方案 2 一次性上传图片和所有附件并使用并行上传并更新 Blob URl 并将消息保存在 DB 中，每条消息都有一个唯一 id，因此在上传到 blob 时我可以设置此 id 以创建一个唯一的 blob url ，所以要更新消息，我需要将消息 Id 与包含消息 Id 的 Blob Url 映射

如果您有任何其他解决方案来提高代码可读性和性能，请咨询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:20:24.147

不确定我是否完全理解这个问题，但是......似乎每条消息都会有一个图像和零个或多个附件，并且消息对象需要引用图像和相关附件。

如果这是一个正确的解释：每个上传都会放在自己的 blob 中。即使使用上面的解决方案#2，在所有上传之后您仍然会得到多个 blob URI。

我不知道这适合您的应用程序的位置，无论是执行上传的桌面应用程序，还是从最终用户获取图像和附件，然后将它们上传到 blob 的网络应用程序（以及正在写入的数据库记录） ）。如果是后者：我建议如下：

1.  写消息记录（这可能会给你某种类型的唯一 ID）
2.  收到每个图像或附件时，上传到 blob 存储，然后使用生成的 URI 更新消息

您可以启动并行任务来上传每个图像或附件，然后更新消息记录。只要您有带宽，并行上传就会在一定程度上充分利用它。每个存储帐户都有一个吞吐量上限（每秒 5,000 个事务和 3Gbps）。

当然还有其他方法，例如引入消息更新队列，使用 CQRS 模式等。部分决定将基于应用程序的架构（正如我所说，我无法判断这是否是桌面应用程序在做上传到 blob 存储或执行上传的 Web 服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:20:04.317

根据我的理解，看起来解决方案 2 更好。

我们可以在任务并行库的帮助下并行上传多个文件：http: [//msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。我们也可以使用异步模式（调用 Begin/End 方法）。但是最好不要同时上传太多文件。如果出现太多待处理的 Web 请求，其中一些可能会失败。比如我们可以选择创建10个任务，等待1个完成，再创建第11个。

此致，

明旭。

# android - 在动画下旋转位图

> ID：10732994
> 
> 赞同：1
> 
> 时间：2012-05-24T07:26:41.243
> 
> 标签：android, animation

我从以下代码沿路径创建了一个动画。

```
 public void doAnimation(){
        Matrix mxTransform=new Matrix();
        PathMeasure pm=new PathMeasure(path,false);
        float fSegmentLen = (float)((pm.getLength())/50);
        if(iCurStep<=50){
            pm.getMatrix(fSegmentLen * iCurStep, mxTransform,
                    PathMeasure.POSITION_MATRIX_FLAG + PathMeasure.TANGENT_MATRIX_FLAG );
             canvas.drawBitmap(bt, mxTransform, null);
             iCurStep++;
             invalidate();
        }
        else{               
            iCurStep=0;
            animate=0;
            canvas.drawPoint((float)range-10,0f,forPoint);
        }
    } 
```

现在我希望在使用 drawBitmap() 方法绘制代码时旋转代码中的位图。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:27:02.617

要旋转图像，您可以使用以下代码

```
public static Bitmap rotate(Bitmap src, float degree) {
    // create new matrix
    Matrix matrix = new Matrix();
    // setup rotation degree
    matrix.postRotate(degree);

    // return new bitmap rotated using matrix
    return Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);
} 
```

如果您需要更多解释，请参阅此链接[http://xjaphx.wordpress.com/2011/06/22/image-processing-rotate-image-on-the-fly/](http://xjaphx.wordpress.com/2011/06/22/image-processing-rotate-image-on-the-fly/)