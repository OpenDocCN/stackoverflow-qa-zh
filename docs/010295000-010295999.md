# StackOverflow 问答 10295000-10295999

# c# - 将一个窗口置于另一个窗口之上

> ID：10295002
> 
> 赞同：3
> 
> 时间：2012-04-24T09:13:25.500
> 
> 标签：c#, winforms, user32

在问我的问题之前，让我说我已经在这里和其他论坛上阅读了大约 30 个主题，并且没有一个解决方案对我有用:(

所以，事情就是这样。我正在为在线扑克室制作 Hud。所以，我的程序需要在扑克室创建的每个窗口顶部显示一个表格。

问题是，如果我想堆叠多个“桌面窗口”（扑克应用程序创建的窗口），如果我的 hud 设置为最顶层，那么所有表的顶部都有 ALL hud，但我想要的是z 顺序中有 Hud-Table-Hud-Table-Hu... 等等。

我已经尝试了几种使用 windows 窗体函数和 windows api 的方法：

```
this.SetDesktopLocation(rct.Left + p.X, rct.Top + p.Y);

//Or     

Win32Utils.SetParent(this.Handle, this.Table.Handle);

//Or

Win32Utils.SetWindowPos(this.Handle, (int)this.Table.Handle, rct.Left + p.X, rct.Top + p.Y, this.Width, this.Height, (int)1);

//Or

Win32Utils.SetZOrder(this.Handle, this.Table.Handle); 
```

在 SetZOrder 的情况下，代码如下：

```
 public static void SetZOrder(IntPtr targetHwnd, IntPtr insertAfter)
    {
        IntPtr nextHwnd = IntPtr.Zero;

        SetWindowPos(targetHwnd, insertAfter, 0, 0, 0, 0, SetWindowPosFlags.SWP_NOMOVE | SetWindowPosFlags.SWP_NOSIZE | SetWindowPosFlags.SWP_NOACTIVATE);
    } 
```

所以我不知道还能尝试什么。

注意：如果我使用 SetParent，扑克应用程序会冻结。

照片。我的应用是底部的窗口，在扑克应用窗口的左上角创建小窗体：

![样本](../Images/a4e22a1a0b157e25be62b6a6dfb4c444.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T12:19:45.967

我认为你可以通过将 hud 表单的父级设置为 table 表单来获得你想要的。就像是

```
[STAThread]
static void Main()
{
    const int numWindows = 3;
    for (int i = 0; i < numWindows; i++)
    {
        var tableForm = new Form { Text = @"Table " + i, Size = new Size(400, 400) };
        tableForm.Show();

        var hudForm = new Form { Text = @"Hud " + i, Size = new Size(100,100) };
        hudForm.Show(tableForm);
    }

    var rootForm = new Form();
    Application.Run(rootForm);
} 
```

# python - 从python中的链接下载excel文件

> ID：10295004
> 
> 赞同：0
> 
> 时间：2012-04-24T09:13:31.610
> 
> 标签：python

我在一个页面上有一个名为“单击此处下载”的链接，它的 HTML 表单是

```
<span id="spnDwnRec">
<a class="spnRecordText" onclick="CallExcelFunction()" href="#"> Click here to download all records.</a>
</span> 
```

当我点击“点击这里下载”时，下载了一个 excel 文件，实际上我需要找到下载 excel 文件的链接的 url。

我有javascript函数和下面的代码

```
function CallExcelFunction() {
    var hidInd = document.getElementById('hidInd');
    var hidFromDate = document.getElementById('hidFromDate');
    var hidToDate = document.getElementById('hidToDate');
    var hidDMY = document.getElementById('hidDMY');
    window.open('indices_main_excel.aspx?ind=' + hidInd.value + '&fromDate=' + hidFromDate.value + '&toDate=' + hidToDate.value + '&DMY=' + hidDMY.value, '_blank',
'toolbar=yes,location=no, directories=no, status=no, menubar=yes,scrollbars=yes, resizable=yes ,copyhistory=no, width=800, height=600');
} 
```

任何人都可以请清除此数据，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:31:05.303

当您单击该按钮时，将调用一个 javascript 函数，该函数可能会重定向到该文件。

为了能够用python下载文件，你要么需要自己找到链接（如果你总是下载同一个文件），然后使用urllib。为此，您可以阅读 javascript 代码。

或者您需要使用一些浏览器自动化工具（例如通过 python），例如 selenium：[http ://seleniumhq.org/](http://seleniumhq.org/)

# c++ - C++ 逗号运算符重载和引用向量

> ID：10295010
> 
> 赞同：0
> 
> 时间：2012-04-24T09:14:17.260
> 
> 标签：c++, reference, operator-overloading, comma

有很多关于 C++ 中逗号运算符重载的帖子（问题）。大多数答案建议不要使用逗号运算符重载。我想编写一个语法与 Matlab 语言非常相似的 c++ 库。基本对象是 Matrix MX。我希望能够让库的最终用户编写如下表达式：

```
MX a = b(i);// get b elements at indices i 
b(i,j)= a; // set elements of b at indices i,j. 
```

我有一个想法，关于如何使用保存指向 MX 对象的指针并保存索引 i,j 对象的代理类来使 setter 和 getter 像上面所写的那样工作。例如 b(i,j) 将创建一个代理对象 ProxMX(b,i,j)。然后我们定义一个方法将 ProxMX 分配给 MX 和 visversa（使用运算符 =），它们完成了获取和设置 b 的元素的艰巨工作。

我需要帮助来进行函数调用，例如：

```
(x,y,z)= ff(a,b,c) 
```

其中 a、b、c 是输入参数（MX 对象），x、y、z 是输出参数。如果上述语法是不可能的，我可以考虑这样的语法：

```
ff((a,b,c), (x,y,z) ) 
```

我开始编写这个测试代码：

```
#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <vector>
using namespace std;

class MX {// Matrix 

public:
    MX(double va) {
        elem=va;// only one double for the moment to test the syntaxe
    }
    MX &operator ()(MX idx){ // get & set MX(i)
        return *this;//
    };
    MX &operator ()(MX idx1,MX idx2) { // get set MX(i,j)
        return *this;
    } ;
    friend ostream &operator<<(ostream &stream, MX a);

    double elem;

};

ostream &operator<<(ostream &stream, MX a)
{
  stream << a.elem ;

  return stream;
}

typedef vector<const MX > MXR;
class ArgList { // Proxy
public:
    //ArgList(const MX& a){
    //  data.push_back(a);
    //}
    ArgList() {};

    ArgList& operator , (const MX &a){
        data.push_back(a);
        return *this;
   }
   ArgList& operator =(ArgList& ins){
        for (int i=0 ;i <ins.data.size();i++)
            (this->data[i]).elem=ins.data[i].elem;
        return *this;
   };
    MXR data; 
};

ArgList operator , (const MX& a, const MX& b){
    ArgList out;    
    out.data.push_back(a);
    out.data.push_back(b);
    return out;
   }

ArgList ff(ArgList argins)
{

    int n = argins.data.size();
    MX a= argins.data[0];
    MX b= argins.data[1];
    MX x(a.elem+1.0);
    MX y(b.elem+10.0);
    MX z(a.elem+b.elem);
    return ( x, y , z);

}
void gg(ArgList argins, ArgList &argout)
{

    int n = argins.data.size();
    MX a= argins.data[0];
    MX b= argins.data[1];
    MX x(a.elem+1.0);
    MX y(b.elem+10.0);
    MX z(a.elem+b.elem);
    argout = ( x, y , z);

}
int _tmain(int argc, _TCHAR* argv[])
{
    MX a(1.0);MX b(2.0);MX c(3.0);
    MX aa = a(MX(3.0));
    aa(MX(2.0),MX(3.0))=MX(5.0);
    cout << "a=" << a << ",b=" << b << ",c=" << c << endl;
    MX x(0.0);MX y(0.0);MX z(0.0);
    cout << "x=" << x << ",y=" << y << ",z=" << z << endl;
    (x,y,z)= ff((a , b, c ));
    cout << "x=" << x << ",y=" << y << ",z=" << z << endl;
    gg((a,b,c) , (x,y,z));
    cout << "x=" << x << ",y=" << y << ",z=" << z << endl;
    return 0;
} 
```

此代码使用 VS2010 Express 编译和运行没有错误:)。但正如预期的那样，它没有给出预期的结果，因为我需要在 ArgList 中保存对变量的引用，而不是将对象复制到向量中。我知道我们不能使用 std::vector 作为对象引用的容器。

为了使这些表达式可写并在 C++ 代码中工作的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:53:57.620

我正在使用 C++11 为您概述一个解决方案（代码也经过测试），但这在 C++03 中是可行的（使用例如 Boost.Tuple）：

```
// Base case
template<typename Lhs, typename Rhs>
std::tuple<Lhs&, Rhs&>
operator,(Lhs& lhs, Rhs& rhs)
{
    return std::tie(lhs, rhs);
}

// General case when we already have a tuple
template<typename... Lhs, typename Rhs>
std::tuple<Lhs..., Rhs&>
operator,(std::tuple<Lhs...>&& lhs, Rhs& rhs)
{
    return std::tuple_cat(lhs, std::tie(rhs));
} 
```

用法如下所示（假设此运算符位于 中`namespace ns`）：

```
// Declaration: note how ff must return a tuple
std::tuple<X, Y, Z> ff(A, B, C);

A a = /* ... */;
B b = /* ... */;
C c = /* ... */;
X x; Y y; Z z;

using ns::operator,;
// brackets on the left-hand side are required
(x, y, z) = ff(a, b, c); 
```

以下是附带的注意事项：

*   如您所见，您需要一个 using 声明来引入`operator,`范围。即使 types `X`, `Y`,`Z`位于`operator,`（启用 ADL）的相同范围内，`std::tuple`也不会。您*可以*执行类似的操作`template<typename... T> struct tuple: std::tuple<T...> { using std::tuple<T...>::tuple; };`（但是在 C++03 中不那么方便）在适当的命名空间中拥有自己的元组，以便以快速而简单的方式拥有 ADL。然而：

*   重载运算符必须始终对至少一种用户定义类型进行操作。因此，如果 types`X`和`Y`两者恰好是`int`or之类的类型`double`，那么您将获得默认值`operator,`。此类事情的通常解决方案是要求客户端执行类似`(ref(x), ref(y), z) = ff(a, b, c);`where`ref`将在适当的命名空间中返回类型的操作（再次出于 ADL 目的）。也许这种类型可以在`std::reference_wrapper`（或 C++03 的 Boost 版本）中实现，使用与元组相同的快速和肮脏的 hack。（你需要额外的重载`operator,`。）

总而言之，当类似

```
/* declaration of ff and variable definitions the same as before */
std::tie(x, y, z) = ff(a, b, c); 
```

也许

```
/* this skips unnecessary default constructions of x, y, z */
auto tuple = ff(a, b, c);
using std::get;
auto& x = get<0>(tuple);
auto& y = get<1>(tuple);
auto& z = get<2>(tuple); 
```

开箱即用（即使在带有 Boost.Tuple 的 C++03 中）。我在这件事上的建议是（无意）：**保持简单，愚蠢！**并使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:55:49.100

在 C++11 中，您可以使用元组执行此操作：

```
std::tuple<some_type, another_type, yet_another_type> ff(...);

some_type x;
another_type y;
yet_another_type z;

std::tie(x,y,z) = ff(a,b,c); 
```

如果您的编译器不支持，[Boost.Tuple](http://www.boost.org/doc/libs/1_49_0/libs/tuple/doc/tuple_users_guide.html)库非常相似，但如果没有可变参数模板的支持，可能会受到更多限制。

如果你真的想支持类似 的语法`(x,y,z) = ff(a,b,c);`，即使它在 Matlab 中看起来很合理，这可能会让 C++ 程序员感到困惑，那么你就快到了。您需要一个类似于您的单独类型`ArgList`（可能称为类似`RefList`），它包含指针而不是值，将这些指针从`const`对结果的非引用中初始化，并具有一个赋值运算符，该运算符接受一个`ArgList`（或其他一些值的集合）和通过指针分配每个元素。

您可能还想查看[Boost.Assignment](http://www.boost.org/doc/libs/1_49_0/libs/assign/doc/index.html)以了解如何使这种运算符重载工作。这有点麻烦；特别是，您不能重载仅作用于内置类型的运算符，这反而会限制该方法的实用性。就个人而言，如果 C++11 是一个选项，我会使用可变参数模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:51:03.953

谢谢大家的建议和反馈。这是一个使用 2 个代理的工作示例。ArgList 包含指向 MX 对象的指针，而 ArgCopyList 包含 MX 对象的副本。

从 matlab 用户的角度来看，c++ 语法`(x,y,...)=myfunc((a,b,...))`与 matlab 表达式非常相似`[x,y,...]=myfunc(a,b,...)`。但我的第一印象是，这种函数调用根本没有效率，因为返回的值被复制了，这可以通过引用传递输出来避免。

```
#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <vector>
using namespace std;

class MX {// Matrix 

public:
    MX(double va) {
        elem=va;// only one double for the moment to test the syntaxe
    }
    MX & operator = (const MX &src)
    {   elem = src.elem;
        return *this;
    }
    friend ostream &operator<<(ostream &stream, MX &a);

    double elem;

};

ostream &operator<<(ostream &stream, MX &a)
{
  stream << a.elem ;

  return stream;
}

typedef vector<MX *> MXR; // save pointers only 

class ArgCopyList { // copy the objects to a list
public :
    vector<const MX> data; 
    ArgCopyList(MX &a)
    {
        data.push_back(a);
    };
    ArgCopyList(MX &a, MX &b)
    {
        data.push_back(a);
        data.push_back(b);
    };
    ArgCopyList(MX &a, MX &b, MX &c)
    {
        data.push_back(a);
        data.push_back(b);
        data.push_back(c);
    };
    // do the same for bigger lists

};

class ArgList { // Proxy
public:

    ArgList() {};

    ArgList(const ArgList& src) 
    {
        data.clear();
        for (int i=0 ;i <src.data.size();i++)
            data.push_back(src.data[i]);
    }
    ArgList& operator , ( MX &a){
        data.push_back(&a);
        return *this;
   }

    ArgList  &operator= ( ArgList &src)
    {
        if (this == &src)
            return *this;
        data.clear();
        int n= src.data.size();
        for (int i=0 ;i <n;i++)
            data.push_back(src.data[i]);
        return *this;
    };

   ArgList& operator =( ArgCopyList& src){
        for (int i=0 ;i <data.size();i++)// TBD : must control the size of src & this->data here
            data.at(i)->elem = (src.data[i].elem);
        return *this;
   };
    MXR data; 
};

ArgList operator , (MX& a,  MX& b){
    ArgList out;    
    out.data.push_back(&a);
    out.data.push_back(&b);
    return out;
   }

// test function
ArgCopyList ff(ArgList argins)
{

    int n = argins.data.size();
    MX a= *(argins.data[0]);
    MX b= *(argins.data[1]);
    MX x(a.elem+1.0);
    MX y(b.elem+10.0);
    MX z(a.elem+b.elem);
    return ArgCopyList( x, y , z);

}

int _tmain(int argc, _TCHAR* argv[])
{

    MX a(1.0);MX b(2.0);MX c(3.0);
    cout << "a=" << a << ",b=" << b << ",c=" << c << endl;

    MX x(0.0);MX y(0.0);MX z(0.0);
    cout << "Argouts before calling (x,y,z)= ff((a,b,c)).\nx=" << x << ",y=" << y << ",z=" << z << endl;

    (x,y,z)= ff((a , b, c) );

    cout << "Argouts after calling ff.\nx=" << x << ",y=" << y << ",z=" << z << endl;
    return 0;
}

/* output
a=1,b=2,c=3
Argouts before calling (x,y,z)= ff((a,b,c)).
x=0,y=0,z=0
Argouts after calling ff.
x=2,y=12,z=3
*/ 
```

# python - Python / Django - 每 X 小时做 X 次

> ID：10295011
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:14:23.843
> 
> 标签：python, django, random

我想每小时做 10 次任务。或者每天 10 次，或者每天 3 次等等。我希望这是动态的，所以我可以只给出 2 个参数，比如：

```
generate_random_task(times, frequency)
generate_random_task(10, daily):
    randomly do the task be 10 times during a day. 
```

我必须跟踪任务已经完成了多少次，所以它在达到“次数”后就停止了

只是说清楚，10次任务必须完成，必须在10次随机

什么是这样做的好方法？

**编辑：** 我会时不时地点击一些功能（完全随机），然后我必须立即知道任务是否会运行。所以我不能用一天10次的芹菜。我需要立即知道它是“是”还是“否”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:32:12.257

每分钟运行一次 cron 作业是否足以决定是否执行您的任务，如果是，请执行？您可以保留一个包含执行次数的文件，并在不再需要时使用它来停止。

# api - 通过 Foursquare API 删除/编辑提示？

> ID：10295012
> 
> 赞同：1
> 
> 时间：2012-04-24T09:14:31.660
> 
> 标签：api, foursquare

我目前正在为当地政府建立一个食品安全网站，其中列出了餐馆、咖啡馆等的卫生等级。我认为让人们关注 Foursquare 上的一个页面会很酷，它可以让人们在他们访问某个地方时获得一个地方的卫生等级。通过提示签入。

我有这一切都在测试中，并且已经准备好将其推出，直到我意识到当一个地方被重新检查时，没有办法（我可以看到）用旧评级删除旧提示并替换它与新的。

快速搜索告诉我确实没有办法通过 API 删除提示，我完全理解背后的原因，但是有什么方法可以以编程方式编辑提示吗？如果没有，我还有其他方法可以告诉用户他们检查的地方的食品卫生分数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:35:37.743

可以通过 API 实现，但公共 API 中没有记录（可能是有意的）。Foursquare 的网页使用以下 API 端点删除提示：（`/v2/tips/#TIPID#/delete`仅接受 POST）

所以你可以像这样使用你的系统：

1.  获取提示的 ID，例如通过 [https://api.foursquare.com/v2/users/self/tips](https://api.foursquare.com/v2/users/self/tips)或通过[https://api.foursquare.com/v2/venues/#VENUE_ID#/tips](https://api.foursquare.com/v2/venues/#VENUE_ID#/tips)

2.  执行以下帖子删除提示： [https ://api.foursquare.com/v2/tips/#TIP_ID#/delete?oauth_token=#YOUR_OAUTH_TOKEN#&v=20120321](https://api.foursquare.com/v2/tips/#TIP_ID#/delete?oauth_token=#YOUR_OAUTH_TOKEN#&v=20120321)

我已经多次使用端点。它按预期工作，但我们不能保证它会保持这种状态。

# php - 在搜索表单上发送多项选择查询的最佳做法是什么？

> ID：10295017
> 
> 赞同：2
> 
> 时间：2012-04-24T09:14:53.200
> 
> 标签：php, forms

我在我的搜索表单上使用[Chosen 。](http://harvesthq.github.com/chosen/) `Multiple Select`

例子 ：

![在此处输入图像描述](../Images/721befe32d4bf300035a4d5ef7918dc7.png)

`query string`在我的搜索表单上使用多项选择发送和获取的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:18:31.440

我想有 html 作为`<input type="hidden" name="chosen[]" value="<!-- id or whatever you want to work with-->" />`

如果您可以通过选择的东西获得它，那就是。

然后你可以简单地在服务器端获取一个数组：

```
$arr = $_POST['chosen'];

print_r($arr); 
```

* * *

```
array(0 => 2,
      1 => 10,
      2 => 37) 
```

如果您选择了 ID 2、10 和 37，则会给出结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T09:19:50.657

您可能应该查看序列化：[http](http://php.net/serialize) ://php.net/serialize 然后将您的输入命名为 name="selects[]" 以将其作为数组提取

# google-analytics - 谷歌分析的“调度员很忙”

> ID：10295019
> 
> 赞同：1
> 
> 时间：2012-04-24T09:15:00.867
> 
> 标签：google-analytics

我正在通过谷歌分析对我的应用程序进行一些静态分析。我昨天下载了easyTracker demo，效果很好。但是今天它不再工作了。下面显示了 Xcode 中的日志：

```
2012-04-24 16:52:03.757 EasyTrackerExample[1514:f803] dispatch called
2012-04-24 16:52:03.759 EasyTrackerExample[1514:f803] ...dispatcher was busy
2012-04-24 16:52:13.758 EasyTrackerExample[1514:f803] dispatch called
2012-04-24 16:52:13.759 EasyTrackerExample[1514:f803] ...dispatcher was busy 
```

我所做的是用我的个人 ID“UA-xxxxxxxx-1”替换了 accountId，没有其他更改。我怀疑谷歌分析服务器是否有问题

任何可以帮助我的人都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:11:19.680

我今天有同样的问题。这是因为在我上次更新我的开发环境（Eclipse 和 ADT）之后，我不得不将 Google Analytics SDK 的 jar 文件添加到“libs”文件夹中（在此更新之前，jar 一切正常刚刚在构建路径中提到的文件，但更新后 Google Analytics 跟踪器无法再实例化）。将 jar 文件添加到 libs 文件夹后，Google Analytics 跟踪器可以实例化，但我收到了您的错误消息。我只是从我的构建路径中删除了 jar 文件（只是将它留在了 libs 文件夹中）......并且它有效！

# objective-c - 如何在 iPhone 应用程序的 Mapview 中添加多个注释

> ID：10295025
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:15:49.477
> 
> 标签：objective-c, map

嗨朋友们。我想知道如何找到离我当前位置最近的酒店或多路复用器，我正在使用网络服务，但问题是我是 iphone 开发的新手，所以请给我一些链接。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T09:54:26.380

您需要熟悉 CoreLocation 和 MapKit。

MapKit 教程：[http ://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial](http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial)

苹果位置文档：http: [//developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)

# extjs4 - 如何在菜单的单击事件上显示面板？

> ID：10295026
> 
> 赞同：0
> 
> 时间：2012-04-24T09:15:50.600
> 
> 标签：extjs4, panel

我想知道如何在菜单的点击事件上显示某些面板？我在视口中添加了菜单项，并在控制器中侦听菜单项的“单击”事件。到目前为止，它工作正常，但是当我使用 Ext.widget() 方法获取面板并调用该面板的 show() 方法时，什么都没有发生。

我处理菜单项单击事件的代码如下：

```
viewPortMenu_ClickHandler : function(menu, item, event, options) {
        var panelToShow = null;
        if (item.text == '4D view') {
                panelToShow = Ext.widget('employeeDistribution');
        }
        if (panelToShow != null) {
                panelToShow.show();
        }
} 
```

请让我知道为什么这不起作用/在运行时显示面板的首选方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:33:30.950

我找到了答案。我只需要使用视口的 add() 方法在视口内添加新创建的面板。

# c# - c# 空字符串 --> null?

> ID：10295028
> 
> 赞同：28
> 
> 时间：2012-04-24T09:15:58.997
> 
> 标签：c#, .net-4.0

有很多次我有一个输入文本，

如果它是空的（用户没有输入任何文本） - 我想发送到数据库查询“null”

而**不是** `String.Empty.`（或“”）

所以我发现自己经常这样做：

```
var mySqlValue =  string.IsNullOrEmpty( tbCustomerId.Text)?null:tbCustomerId.Text; 
```

*这对我来说似乎很难看。*

.net 为相反的场景提供了许多其他解决方案：

```
 string.IsNullOrEmpty
        string.IsNullOrWhiteSpace
        myProblemVal ?? myDefultVal 
```

*我知道这可以通过扩展方法解决 - 我知道该怎么做..*

但有什么更好的吗？

是否有任何智能代码：“ `if its empty -> null`”。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-24T09:19:09.263

您可以使用扩展方法：

```
public static class Extensions {
    public static string NullIfWhiteSpace(this string value) {
        if (String.IsNullOrWhiteSpace(value)) { return null; }
        return value;
    }
} 
```

你可以这样使用：

```
var mySqlValue = tbCustomerId.Text.NullIfWhiteSpace(); 
```

我真的不知道你想象的比扩展方法更好的东西。你如何定义“更好”？更短？使用特殊关键字？使用很少使用的运算符看起来很聪明？这已经只是附加到您的值的单个方法调用，它甚至适用于空值，并且您需要的逻辑不能以比这更短的方式表达。另外，我不知道它有什么特殊语法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T09:20:17.417

声明你自己的静态方法：

```
public static string NullIfEmpty(string value)
{
  return string.IsNullOrEmpty(value) ? null : value;
} 
```

正在做

MyHelper.NullIfEmpty(value) 并不比调用字符串类型的静态方法更丑……而且它似乎比每次都写“string.IsNullOrEmpty(tbCustomerId.Text)?null:tbCustomerId.Text”更干净。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-24T09:21:13.137

> 但有什么更好的吗？

不，尽管我认为您在问题中描述的内容（扩展方法）绝对没问题。正如您在问题中描述的那样，在另一个方向上，您有零合并。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-20T22:47:53.793

从你的字符串开始

```
string myString = ""; 
```

编写一个将空白转换为null的方法

```
public static string NullIf(string value)
{
    if (String.IsNullOrWhiteSpace(value)) { return null; }
    return value;
} 
```

然后包装该方法并使用您在 SQL 中所期望的相同语法调用它

```
NullIf(myString); 
```

# c - 如何在 sprintf() 中获取附加模式

> ID：10295031
> 
> 赞同：7
> 
> 时间：2012-04-24T09:16:04.317
> 
> 标签：c, string, printf

请参阅此代码：

```
int main() {
    char a[50];
    FILE *fp;

    fp = fopen("test1.txt", "w");

    sprintf(a,"jigar %d \n", 3);
    fprintf(fp,"jigar %d \n", 3);

    sprintf(a,"patel %d \n", 2);
    fprintf(fp,"patel %d \n", 2);
    printf("%s", a);
} 
```

在这里，使用`fprintf`，我可以写入文件

```
jigar 3 
patel 2 
```

我想要的相同功能在哪里我打印的任何东西都放在一个字符缓冲区中。

但是使用`sprintf`给了我缓冲

```
patel 2 
```

我有这么多这样的打印，我想在一个字符缓冲区中添加，然后我需要将它返回给应用程序，那么如何以**最简单和最快**的方式获得它呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-24T09:19:09.357

`sprintf()`返回打印的字符数。

只需使用该数字进行下一次写入...

```
int i;
char a[50];
char *ap = a;

for (i = 5; i < 15; i++) {
    ap += sprintf(ap, "%d ", i);
}

printf("%s\n", a); /* "5 6 7 8 9 10 11 12 13 14 " */ 
```

确保您不会导致任何缓冲区溢出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-13T20:56:28.700

这个想法是给***sprintf****指向缓冲区基地址*的指针+*偏移量*。追加时偏移会变大。

通过使用*strlen*可以获得当前“字符串”的长度。为了避免缓冲区溢出，我们可以添加额外的逻辑来检查当前“字符串”+“新字符串”是否小于缓冲区。

```
size_t offset = strlen(text);
sprintf(&(text[offset]), "This is how You append using sprintf"); 
```

循环内的示例：

```
char text[255];
text[0] = '\0';
for(int i = 0 ; i < 10 ; i++) {
    size_t offset = strlen(text);
    sprintf(&(text[offset]), "%d,", i);
} 
```

正如其他 stackoverflow 用户所建议的那样，您也可以使用***snprintf***，它还可以为您提供缓冲区溢出保护。

附加函数可能如下所示：

```
void append(char *text, int maxSize, char *toAppend) {
  size_t offset = strlen(text);
  snprintf(&(text[offset]), maxSize, "%s", toAppend);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-18T12:12:57.530

如果您使用的是 POSIX 兼容系统，请查看[`fmemopen(3)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fmemopen.html)or [`open_memstream(3)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/open_memstream.html)：

```
#include <assert.h>
#include <stdio.h>

int main(void)
{
    char buf[128] = { 0 };
    FILE *fp = fmemopen(buf, sizeof(buf), "w");

    assert(fp);

    fprintf(fp, "Hello World!\n");
    fprintf(fp, "%s also work, of course.\n", "Format specifiers");
    fclose(fp);

    puts(buf);
} 
```

# android - 如何解析 JSONP（带填充的 JSON）响应？

> ID：10295032
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:16:04.623
> 
> 标签：android, jsonp

我在这样做时感到很困惑。我要做的是，解析来自服务器的 JSONP 响应并显示它。是否可以在 Android 中解析 JSONP 响应？

这是我的回复：

```
{
    "Reference1":"String content",
    "Reference2":"String content",
    "Reference3":"String content",
    "Reference4":"String content"

} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:35:23.243

我在许多项目中一直在做的是首先使用以下代码将从 http 流读取的字符串转换为 JSONObject：

```
JSONObject jsonOBJ=new JSONObject(jsonString); 
```

然后使用`jsonobject.getString("tag")`读取每个标签。对于您的代码，它将类似于：

```
String reference1=jsonobject.getString("Reference1"); 
```

现在referece1的值=`String content`

这是我的 http 获取代码：

```
String url="Your URL Goes Here";
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet(url);
HttpResponse response;
try {
    try 
    {
      InetAddress i = InetAddress.getByName(url);
    } catch (UnknownHostException e1) {
      e1.printStackTrace();
    }
    response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    if (entity != null) {
        InputStream instream = entity.getContent();
        String result= convertStreamToString(instream);
        stringContent=new StringContent(result);
        instream.close();
    }
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

下面是`convertStreamToString`块

```
private static String convertStreamToString(InputStream is) 
{
    /*
     * To convert the InputStream to String we use the BufferedReader.readLine()
     * method. We iterate until the BufferedReader return null which means
     * there's no more data to read. Each line will appended to a StringBuilder
     * and returned as String.
     */
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:22:42.437

填充本身从来都不是问题。每个像样的 JSON 解析库都会透明地处理它。我个人建议您使用[GSON](http://code.google.com/p/google-gson/)库。我在很多项目中都使用过它，从来没有发现什么可抱怨的。

PS：也许我误解了你，但是当你说解析时，我假设你需要获取属性的值并且不需要保留任何填充，对吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:27:23.367

我认为本[教程](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)非常详细地介绍了在 android 中解析 json。希望对您有所帮助。

# linux - 想通过编程把doc转成ps格式

> ID：10295037
> 
> 赞同：1
> 
> 时间：2012-04-24T09:16:09.770
> 
> 标签：linux, postscript, libreoffice

我想以编程方式将 doc 转换为 ps(post script) 格式。我知道 LibreOffice 中有一个实用程序可以进行这种转换，但我不想在客户端机器上安装 Libreoffice，而是想重用 LibreOffice 的源代码开发这个实用程序。我知道这是一项非常繁琐的任务，但至少如果有人可以给我任何关于如何做到这一点的基本方法或以编程方式进行的任何其他方式。

我想要它用于 Linux 操作系统。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:42:00.207

您无法仅仅为此而从 libreoffice 中剥离 DOC 导入器和后记生成器 - 您需要大量的人力/小时。

在您已经提到的 Libreoffice 之上运行的现成 Python 脚本 - 如果您希望它完全工作 - 我希望您知道它不需要图形显示来运行，它可以作为“命令行”完成（通常你会希望 LibreOffice 在后台运行）。

如果你真的想为此推出自己的应用程序，你应该检查 koffice/calligra 的代码——它将围绕 Qt 架构构建——我最近没有看过它，但它比 libreoffice 更模块化和可重用——重用 calligra 中的 doc-importer 和 ps exporter 是一项我相信可以由一个人在一段合理的时间内完成的工作（这将根据对它内置的 Qt/C++ 环境的熟悉程度而有所不同） URL：

[http://www.calligra.org](http://www.calligra.org) http://community.kde.org/Calligra/Building

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:45:36.737

您可能会遇到相当大的麻烦，因为它们不是真正兼容的“格式”（在抽象意义上）。

DOC 当然是一个文件。所以它包含文本、样式表……与工件的逻辑结构有关的分层信息。

PS 不是（必然）文件。它是一个页面描述。它包含与工件的视觉图像有关的信息。

所以你真的需要从 DOC*渲染*一个 PS，而不仅仅是*convert*。您需要做出换行决定、绘制表格、计算对齐间距以及嵌入图像的位置。这是一项大工作。

# python - Python 2.5 for 循环

> ID：10295041
> 
> 赞同：1
> 
> 时间：2012-04-24T07:53:58.567
> 
> 标签：python, loops, for-loop

我在理解这个简单的 for 循环代码时遇到了一些麻烦。我只需要帮助解释为什么它会以这种方式输出。

```
y=0
for x in range(5):
    y=y+x
    print y

>>>
0
1
3
6
10
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:01:55.157

`range(5)`给你

```
[0,1,2,3,4] 
```

在 for 循环中你加起来

```
y(0) = y(0) + x(0) >>> 0
y(1) = y(0) + x(1) >>> 1
y(3) = y(1) + x(2) >>> 3
y(6) = y(3) + x(3) >>> 6
y(10) = y(6) + x(4) >>> 10 
```

# c# - 拆分列表 进入子列表

> ID：10295043
> 
> 赞同：2
> 
> 时间：2012-04-24T09:16:23.470
> 
> 标签：c#, linq, c#-4.0, linq-to-objects

我有一个包含类别和产品作为属性的列表，我希望将与类别相关的所有产品分开在不同的列表中。

目前我有这个

```
Products products = new Products();

        products.productList.Add(new Products("Fruit", "Apples"));
        products.productList.Add(new Products("Fruit", "Oranges"));
        products.productList.Add(new Products("Fruit", "Bananas"));
        products.productList.Add(new Products("Fruit", "Grapes"));
        products.productList.Add(new Products("Vegetables", "Tomatoes"));
        products.productList.Add(new Products("Vegetables", "Lettuce"));
        products.productList.Add(new Products("Vegetables", "Onions"));
        products.productList.Add(new Products("Dairy", "Milk"));
        products.productList.Add(new Products("Dairy", "Yogurth"));
        products.productList.Add(new Products("Dairy", "Eggs"));

        List<IEnumerable<string>> distinctCats = products.productList.GroupBy(s => s.Category).Select(s => s.Select(v => v.Product)).ToList(); 
```

但我似乎无法从 distinctCats 中获取值。而且我想获得类似具有实际值的普通 List productList 的东西。

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T09:19:49.340

如果要将列表按类别划分为子列表：

```
var categoryLists = products.GroupBy(p => p.Category)
                            .Select(g => g.ToList()); 
```

现在，`categoryLists`是一个`IEnumerable<List<Product>>`.

要对此进行迭代，您可以说：

```
foreach(var categoryList in categoryLists) {
    foreach(var product in categoryList) {
        // do something with product
    }        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:30:56.380

不知道我理解你想要什么，但似乎你需要这样的东西：

```
var products=new List<Product>{};
var productsInCategories=products.ToLookup(p=>p.Category); 
```

现在每个 productsInCategories[i] 都包含一个“subList”（实际上是 IEnumerable）。

# sql - 如何在 SQL 的 SELECT 语句中替换多个列中的相同内容？

> ID：10295047
> 
> 赞同：4
> 
> 时间：2012-04-24T09:16:49.210
> 
> 标签：sql, replace

我想做一个**SELECT**语句，在其中将每个 (") 替换为**多个列**中的 (\") 。现在我该怎么做？

是否可以在 SELECT 语句中使用 REPLACE 函数定位多个列？

我知道这是**无效**代码，但只是为了形象化我的意思：

```
SELECT REPLACE(firstColumn, anotherColumn, '"', '\"') 
FROM testTable 
```

这当然**行不通**，因为 REPLACE 函数*只需要三个参数*。

我真的需要帮助，因为我找不到任何对我有用的东西。

提前致谢！

**[编辑 - 24.04.2012 - 16:20 UTC+01:00]**

对于那些可能有类似问题的人，这是我的**解决方案**：我使用*正则表达式*来构建我的**SELECT REPLACE**语句，如下所示：

```
Regex: {(^[^, ]+,)}|( {[^, ]+,})|( {[^, ]+$}) 
```

为了使用它，您需要使用逗号和空格分隔的所有列，如下所示：

`ID, Gender, Firstname, Lastname, Street, Zip, City, EMail, Age,`

然后你需要一个工具（在我的情况下是 Visual Studio），它能够用标记表达式（在正则表达式中的 {} 括号之间）替换，并将其替换为如下内容：

`REPLACE(\1\2\3 'replaceMe', 'withMe') AS \1\2\3`

希望这可以帮助任何可能有类似问题的人。这可能不是最好的解决方案，但它对我有用。感谢您的快速帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T09:19:55.207

我认为您唯一明智的选择是在每一列上单独使用替换。

```
SELECT
    REPLACE(firstColumn, '"', '\"'),
    REPLACE(secondColumn, '"', '\"')
FROM testTable 
```

您可以对数据进行一些巧妙的旋转，以便仅应用 REPLACE 一次，但我没有看到好处。

如果您正在执行的实际替换非常复杂，那么您可以编写一个函数来执行它以节省代码混乱和重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T21:40:59.957

看起来它可能比您想要做的更多，但类似以下的东西应该可以工作：

```
declare 
  qrystart varchar2(15) := 'select replace(';
  qryend varchar2(31) := ', ''"'', ''\"'') from <your_table_name>';
  columnname varchar2(20);
begin 
  for columnItem in (
    select column_name from all_tab_columns
    where lower(table_name) = '<your_table_name>')
  loop
  columnname := columnitem.column_name;
    execute immediate qrystart || columnname || qryend;
  end loop;
end;
/ 
```

# actionscript-3 - Flex ResourceBundle 获取键 -> `content` 不再提供键值对

> ID：10295050
> 
> 赞同：1
> 
> 时间：2012-04-24T09:16:59.207
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5, resourcebundle

我需要从属性文件中访问键值对，以及键的子字符串和确切的值，但这不应该改变任何东西。

当您查看 Adob​​e 文档和帮助页面时，例如[http://help.adobe.com/en_US/Flex/4.0/UsingSDK/WS2db454920e96a9e51e63e3d11c0bf69084-7f2c.html](http://help.adobe.com/en_US/Flex/4.0/UsingSDK/WS2db454920e96a9e51e63e3d11c0bf69084-7f2c.html)（最后一段），您可以看到 Adob​​e 提到 ResourceBundle 的内容属性包含来自给定包的键值对。

ResourceBundle 的 ASDoc 还说：“子类覆盖此方法以返回一个包含捆绑资源的键值对的对象。” 然而，ASDoc 也说这个属性适用于 Flex 3。

无论如何，内容属性（对象类型）似乎没有存储键值对，因为我只得到值，而不是键。

我有点迷路了，如果有人有这方面的信息，请拍摄！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:24:32.867

ASDoc for`ResourceBundle`说这个类和它的 API 从 Flex 3 开始可用。所以该文档对 Flex 4 及更高版本仍然有效。

确保您使用的是“for in”循环而不是“for each”循环。“for in”循环遍历对象的属性名称，而“for each”循环遍历值。

此代码创建一个`ResourceBundle`并迭代属性：

```
var rb:ResourceBundle = new ResourceBundle("en_US", "bundleName");
rb.content["foo"] = "Bar";
rb.content["hello"] = "Howdy!";

for (var key:String in rb.content)
{
    trace("the key is: ", key);
    trace("the value is: ", rb.content[key]);
} 
```

在迭代时，每个键都存储在 var 中`key`，并且可以使用`content[key]`.

在带有真实资源包文件的真实应用程序中，您从资源管理器（从您链接到的文档中）检索资源包：

```
var rb:ResourceBundle =  ResourceBundle(resourceManager.getResourceBundle("en_US", "RegistrationForm")) 
```

然后你应该能够像上面那样迭代它的内容。

# c# - ASP.NET 剃须刀：表单未提交

> ID：10295052
> 
> 赞同：1
> 
> 时间：2012-04-24T09:17:01.677
> 
> 标签：c#, asp.net, asp.net-mvc, forms, razor

由于我在 DateTime 属性/输入字段中添加了 DisplayFormat 和 datepicker，因此我的表单停止提交。我没有收到任何错误（在 chrome F12 或 Visual Studio 中）。

编辑：我已将 Displayformat 设置为 dd/MM/yyyy 并将日期选择器设置为“dd/mm/yyyy”。但这也没有解决它。

```
@using (Html.BeginForm("CreateCampaign", "Home")) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Campaign</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.CampaignName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Campaign.CampaignName)
            @Html.ValidationMessageFor(model => model.Campaign.CampaignName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.WebsiteUrl)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Campaign.WebsiteUrl)
            @Html.ValidationMessageFor(model => model.Campaign.WebsiteUrl)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.PrivacyPolicyUrl)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Campaign.PrivacyPolicyUrl)
            @Html.ValidationMessageFor(model => model.Campaign.PrivacyPolicyUrl)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.TermsUrl)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Campaign.TermsUrl)
            @Html.ValidationMessageFor(model => model.Campaign.TermsUrl)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.PricepageUrl)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Campaign.PricepageUrl)
            @Html.ValidationMessageFor(model => model.Campaign.PricepageUrl)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.Startdate)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Campaign.Startdate)
            @Html.ValidationMessageFor(model => model.Campaign.Startdate)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.Enddate)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Campaign.Enddate)
            @Html.ValidationMessageFor(model => model.Campaign.Enddate)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.Starthour)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Campaign.Starthour, new SelectList(Model.Hours))
            @Html.ValidationMessageFor(model => model.Campaign.Starthour)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.Endhour)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Campaign.Endhour, new SelectList(Model.Hours))
            @Html.ValidationMessageFor(model => model.Campaign.Endhour)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.PMAM)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Campaign.PMAM, new SelectList(Model.AMPM, "key", "value"))
            @Html.ValidationMessageFor(model => model.Campaign.PMAM)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.Language)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Campaign.Language, new SelectList(Model.Languages, "key", "value"))
            @Html.ValidationMessageFor(model => model.Campaign.Language)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.FK_ID_MerchantApp)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Campaign.FK_ID_MerchantApp)
            @Html.ValidationMessageFor(model => model.Campaign.FK_ID_MerchantApp)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Campaign.CampaignType)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Campaign.CampaignType, new SelectList(Model.Types, "key", "value"))
            @Html.ValidationMessageFor(model => model.Campaign.CampaignType)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}
<script type="text/javascript">
    $('#Campaign_Startdate').datepicker({
        dateFormat: "DD, d MM, yy",
        minDate: new Date()
    });
    $('#Campaign_Enddate').datepicker({
        dateFormat: "DD, d MM, yy",
        minDate: new Date()
    });

</script>
<div>
    @Html.ActionLink("Back to List", "Index")
</div>

       public class Campaign
        {
            #region CTor
            public Campaign()
            {
            }
            #endregion

            #region Properties

            [XmlElement(ElementName = "Id_campaign")]
            public string ID_Campaign { get; set; }
            [XmlElement(ElementName = "Campaignname")]
            public string CampaignName { get; set; }
            [XmlElement(ElementName = "Websiteurl")]
            public string WebsiteUrl { get; set; }
            [XmlElement(ElementName = "Privacypolicyurl")]
            public string PrivacyPolicyUrl { get; set; }
            [XmlElement(ElementName = "Termsurl")]
            public string TermsUrl { get; set; }
            [XmlElement(ElementName = "Pricepageurl")]
            public string PricepageUrl { get; set; }
            [XmlElement(ElementName = "Maxcredit")]
            public Int32 MaxCredit { get; set; }
            [XmlElement(ElementName = "Fk_id_currency")]
            public string FK_ID_Currency { get; set; }
            [XmlElement(ElementName = "Maxscans")]
            public short MaxScans { get; set; }
            [XmlElement(ElementName = "Startdate")]
            [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:ddd, MMM d, yyyy}")]
            public DateTime Startdate { get; set; }
            [XmlElement(ElementName = "Enddate")]
            [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:ddd, MMM d, yyyy}")]
            public DateTime Enddate { get; set; }
            [XmlElement(ElementName = "Starthour")]
            public short Starthour { get; set; }
            [XmlElement(ElementName = "Endhour")]
            public short Endhour { get; set; }
            [XmlElement(ElementName = "Pmam")]
            public string PMAM { get; set; }
            [XmlElement(ElementName = "Language")]
            public string Language { get; set; }
            [XmlElement(ElementName = "Fk_id_merchantapp")]
            public string FK_ID_MerchantApp { get; set; }
            [XmlElement(ElementName = "Campaigntype")]
            public string CampaignType { get; set; }
            [XmlElement(ElementName = "Createtimestamp")]
            [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:ddd, MMM d, yyyy}")]
            public DateTime CreateTimestamp { get; set; }
            [XmlElement(ElementName = "Lastupdate")]
            [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:ddd, MMM d, yyyy}")]
            public DateTime LastUpdate { get; set; }
            [XmlElement(ElementName = "Lastupdateby")]
            public string LastUpdateBy { get; set; }
            [XmlElement(ElementName = "Status")]
            public short Status { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:14:52.007

我看到您已将验证摘要设置为 true。可能是不显眼的验证阻止了您的表单提交并且您看不到它，因为错误未附加到特定字段？也许，尝试将其设置为 false，看看是否有任何弹出？您是否在客户端验证的同时[打开了不显眼](http://msdn.microsoft.com/en-us/gg618489)的验证？

您是否使用 chrome 的网络工具检查提交时是否发送了任何 http 帖子？您是否也尝试在模型中使用“dd/mm/yyyy”？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:37:21.593

你没有表格。将其包装在 Html.BeginForm 中：

```
 @{ using (Html.BeginForm()) { 

              ....

    }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:46:21.110

听起来可能太明显了，但是由于在您添加“日期选择器”后它停止工作，并且您正在使用 jQuery，您应该尝试添加

```
$(document).ready(function() {

}); 
```

包装您的“日期选择器”代码。

# java - @ECHO OFF 不能关闭从 java 调用的 ANT 目标的回显消息，而后者又是从批处理中调用的

> ID：10295053
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:17:05.777
> 
> 标签：java, ant, batch-file, echo

我正在从批处理中调用 java (.jar)。这些 java 反过来调用 ANT 目标，其中有一些回显消息。我在批处理文件的第一行中使用了@echo off。但是仍然会打印回声（来自蚂蚁目标）的消息。

请帮助我完全禁用回声。

谢谢，钱德拉

我的批处理文件内容：

```
@echo off

SET HOME="%CD%"
SET CLASSPATH=%HOME%
SET CLASSPATH=%CLASSPATH%;%HOME%\lib\ant\activation.jar;%HOME%\lib\ant\ant.jar;%HOME%\lib\ant\ant-launcher.jar
SET CLASSPATH=%CLASSPATH%;%HOME%\lib\ant-ext\ant-contrib-1.0b3.jar;%HOME%\lib\ant-ext\antcount.jar
SET CLASSPATH=%CLASSPATH%;%HOME%\lib\utilities.jar
SET CLASSPATH=%CLASSPATH%;%HOME%\lib\AbsoluteLayout.jar;
SET CLASSPATH=%CLASSPATH%;%HOME%\dist\TestGUI.jar;

java -cp %CLASSPATH% TestGUI %HOME% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:18:50.707

`@echo off`不必与 Ant 的`<echo/>`.

也许您可以尝试使用`ant -f yourbuildfile.xml -quiet`或仅`ant -quiet`在您的构建文件被称为`build.xml`.

# c# - 单元。将参数传递给拆卸方法

> ID：10295054
> 
> 赞同：10
> 
> 时间：2012-04-24T09:17:09.993
> 
> 标签：c#, unit-testing, nunit, nunit-2.5, teardown

我正在使用 NUnit。我的测试方法定义如下：

```
[Test]
[TestCase("Fred", "Bloggs")]
[TestCase("Joe", "Smith")]
public void MyUnitTest(string firstName, string lastName)
{
    ...
} 
```

TestCase 完成后，它进入 TearDown 方法。想要做的是将那些 TestCase 参数传递给测试方法，但也传递给 TearDown 方法。

像这样的东西：

```
[TearDown]
public void TearDown(string firstName, string lastName)
{
  ...
} 
```

我希望 NUnit 支持这种开箱即用的功能。否则，我需要在测试方法中编写定制代码以将测试数据存储在集合中。然后在 TearDown 方法中使用该集合。

如果有人有任何想法..会很棒！谢谢。基督教

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-12-21T20:10:59.380

可以直接从函数`TestContext`中的 Test 引用参数`TearDown`。

像这样的东西。

```
[Test]
[TestCase("Fred", "Bloggs")]
[TestCase("Joe", "Smith")]
public void MyUnitTest(string firstName, string lastName)
{
}

[TearDown]
public void TearDown()
{
    string firstName = TestContext.CurrentContext.Test.Arguments[0] as string;
    string lastName = TestContext.CurrentContext.Test.Arguments[1] as string;
} 
```

应该注意的`TestContext.CurrentContext.Test.Arguments`是，这只是一个对象数组，`TestFixture`无论单个签名如何，每次测试都会调用它，因此我们应该小心确保处理所有可能的值，`Arguments[]`但当然*可以*在`TearDown`功能

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-24T11:54:12.897

为测试夹具中的每个测试执行 TearDown 和 SetUp。考虑您有以下测试：

```
[TestCase("Joe", "Smith")]
public void Test1(string firstName, string lastName) { ... }

[Test]
public void Test2() { ... }

[TestCase(10)]
public void Test3(int value) { ... } 
```

TearDown 方法的预期签名是什么？

所以，答案是否定的。NUnit 不提供将测试参数传递给 TearDown 方法的默认方式。而且我认为不会。您需要手动添加此功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-18T23:18:00.547

实际上，这是可能的。

如果您`TestContext.CurrentContext.Test.Name`在 TearDown 中引用，您可以获得包含传递给它的参数的完整方法签名。你将不得不解析它，但它就在那里。

# memory - 为什么会发生这个 tcmalloc 错误 SbrkSysAllocator failed ？

> ID：10295061
> 
> 赞同：0
> 
> 时间：2012-04-24T09:17:33.750
> 
> 标签：memory, memory-management, memory-leaks, tcmalloc, google-perftools

我在我的 c++ 程序中使用 google-perftools 的 tcmalloc_minimal 作为默认内存分配器。它打印出以下信息：

```
src/system-alloc.cc:427] SbrkSysAllocator failed 
```

程序继续运行。有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:49:15.460

默认情况下，tcmalloc 使用 sbrk 从内核中获取内存。如果内存映射发生冲突，sbrk 调用可能会失败，然后 tcmalloc 回退到纯 mmap。这是生成消息的时刻。

没有什么可担心的（只要您没有用完地址空间）。

# javascript - 在 javascript 中创建的 HTML 代码上使用 HTML 类和 id 等

> ID：10295062
> 
> 赞同：0
> 
> 时间：2012-04-24T09:17:36.713
> 
> 标签：javascript, html, sql

我已经创建了一个搜索系统，可以在其中搜索名称、日期等不同的工件。首先，我使用 HTML 中的所有数据创建它，然后使用我找到的脚本 ( [listjs.com](http://listjs.com) ) 进行所有排序和过滤等。

但是现在我想将它连接到数据库，并从该数据库中获取所有数据。我设法在列表中发布并显示数据，如下所示：

```
for(var i=0; i < artifacts.rows.length; i++) {
    var pic = artifacts.rows.item(i).APicture;
    var name = artifacts.rows.item(i).AName
    var city = artifacts.rows.item(i).ACity
    var date = artifacts.rows.item(i).ADate
    var type = artifacts.rows.item(i).AType

    list += '<li><table class="arti"> \
            <tr> \
                <td><img src="' + pic + '" width="60" height="60"></td> \
                <td><a id="crownID" class="name" href="#"><b>' + name + '</b></a></td> \
                <td><a class="city">' + city + '</a></td><a class="time" style="display:none;">-2000</a></td> \
                <td><a>' + date + '</a></td> \
                <td><a class="type">' + type + '</a></td> \
            </tr> \
            </table> \
        </li>';
}//end for

list += '</ul>';

document.getElementById("liste").innerHTML=list; 
```

但是现在我的 list.js 脚本不适用于我的数据。可能是因为 HTML 标记实际上不是 HTML 而是 JavaScript。我知道可以使用`SORT BY`etc 创建 SQL 查询，但是由于我已经有了一个工作程序，所以最好不要花更多时间在上面。

任何人都知道这样做的方法，或者甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:33:38.343

听起来您在将结果返回到文档之前尝试修改/访问列表。

在将任何内容实际写入（通过脚本或静态，无关紧要）到文档之前，您无法访问任何内容。

检查您的命令顺序：

1.  构建列表
2.  打印到文档
3.  调整

# objective-c - Restkit 映射嵌套数组

> ID：10295065
> 
> 赞同：6
> 
> 时间：2012-04-24T09:17:54.203
> 
> 标签：objective-c, ios5, restkit

我有一个关于映射嵌套数组的问题。在[https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md](https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md)上有一个用于映射嵌套对象的示例。

但是，如果嵌套对象是对象数组，我该怎么办，例如 JSON 看起来像：

```
{ "articles": [
    { "title": "RestKit Object Mapping Intro",
      "body": "This article details how to use RestKit object mapping...",
      "author": [{
          "name": "Blake Watters",
          "email": "blake@restkit.org"
      },
      {
          "name": "abc",
          "email": "emailaddress"
      }]
      "publication_date": "7/4/2011"
    }]
} 
```

为了获得一组作者，我的课程应该是什么样子？这就是示例中的代码：

```
@interface Author : NSObject
    @property (nonatomic, retain) NSString* name;
    @property (nonatomic, retain) NSString* email;
@end

@interface Article : NSObject
    @property (nonatomic, retain) NSString* title;
    @property (nonatomic, retain) NSString* body;
    @property (nonatomic, retain) Author* author; // should be an array of Author-Objects
    @property (nonatomic, retain) NSDate*   publicationDate;
@end 
```

我如何告诉 Restkit，有一个作者数组，如果我将文章中的作者属性的类更改为 NSArray，Restkit 怎么知道，在这个 NSArray 中应该是 Author-Objects ......？

我正在使用 RKObjectMapping 将对象从 JSON 映射到 Objective-c，反之亦然。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T16:49:21.350

您需要确保相应地设置 var 类型：

```
@interface Article : NSObject
    @property (nonatomic, retain) NSString* title;
    @property (nonatomic, retain) NSString* body;
    @property (nonatomic, retain) NSSet* authors;
    @property (nonatomic, retain) NSDate*   publicationDate;
@end 
```

它可以与将其声明为 NSArray 一起使用，但我个人将 RestKit 与 CoreData 模型一起使用，并且这些场景中的关系是 NSSet 的。

此外，您需要设置映射：

```
[articleMapping mapKeyPath:@"author" toRelationship:@"authors" withMapping:authorMapping]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-30T19:00:37.527

把它分开会有帮助。

```
@interface Author : NSObject
    @property (nonatomic, retain) NSString* name;
    @property (nonatomic, retain) NSString* email;
@end

@interface Article : NSObject
    @property (nonatomic, retain) NSString* title;
    @property (nonatomic, retain) NSString* body;
    @property (nonatomic, retain) NSArray* author; 
    @property (nonatomic, retain) NSDate*   publicationDate;
@end

//create the article mapping
RKObjectMapping *articleMapping = [RKObjectMapping mappingForClass:[Article class]];
//add rest of mappings here
[articleMapping addAttributeMappingsFromDictionary:@{
                                                  @"title":@"title"
} 

//create the author mapping
RKObjectMapping *authorMapping = [RKObjectMapping mappingForClass:[Author class]];
//add rest of mappings here
[authorMapping addAttributeMappingsFromDictionary:@{
                                                  @"name":@"name"
} 

//link mapping with a relationship
RKRelationshipMapping *rel = [RKRelationshipMapping relationshipMappingFromKeyPath:@"authors" toKeyPath:@"author" withMapping:authorMapping];

//add relationship mapping to article
[articleMapping addPropertyMapping:rel]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:47:06.017

The Whole respnse string take it as nsmutable dictionary then you assign author values to namutable array..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-10T15:59:47.750

您需要做的是使用 NSSet 属性来保存嵌套数组。这是一个完整的指南，可以帮助您做到这一点[https://medium.com/ios-os-x-development/restkit-tutorial-how-to-fetch-data-from-an-api-into-core-data -9326af750e10](https://medium.com/ios-os-x-development/restkit-tutorial-how-to-fetch-data-from-an-api-into-core-data-9326af750e10)。

# jquery-ui - jQuery Sortable with box-sizing:border-box

> ID：10295071
> 
> 赞同：2
> 
> 时间：2012-04-24T09:18:21.160
> 
> 标签：jquery-ui

我发现，如果一个元素在使用 jquery 的可排序实现时具有“box-sizing:border-box”，它会在拖动时丢失/更改其大小。

例子 -

[http://jsfiddle.net/veBJh/2/](http://jsfiddle.net/veBJh/2/)

如果您删除 box-sizing:border-box 属性，它将按预期工作，保持原始元素尺寸。有没有办法解决这个问题（减去改变 box-sizing 属性，它是项目的全局设置，我宁愿不删除它，因为它使其他一切变得如此简单！）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T23:15:14.323

我遇到了同样的问题，并通过在可排序调用中添加自定义“助手”来解决它：

```
$('#container').sortable({
    helper: function(event, element) {
      var clone = $(element).clone();
      var w = $(element).outerWidth();
      var h = $(element).outerHeight();
      clone.css({
          'width': w+'px',
          'height': h+'px'
        });
      return clone;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-28T17:27:15.800

我解决了将 a 添加`box-sizing: content-box;`到可拖动项目的问题

# biztalk - 使用 BizTalk WCF-WSHttp 发送适配器通过 HTTP 使用 WS-Security 的 Web 服务

> ID：10295075
> 
> 赞同：1
> 
> 时间：2012-04-24T09:18:44.727
> 
> 标签：biztalk, ws-security, biztalk-2009

第三方供应商公开了我们需要使用的 Web 服务。

它是一个 SOAP Web 服务，它还需要在标头中包含[WS-Addressing](http://www.w3.org/Submission/ws-addressing/)和[WS-Security](http://www.oasis-open.org/committees/tc_home.php?wg_abbrev=wss)元素。

我相信应该可以使用 BizTalk 2009 中的[WCF-WSHttp](http://msdn.microsoft.com/en-us/library/bb226477%28v=bts.10%29.aspx)适配器来使用这个 Web 服务。但是我对 WCF 和 WS-Security 都是新手，所以有点挣扎。

我尝试使用以下设置设置发送适配器：

*   安全模式：**运输**
*   传输客户端凭证类型：**证书**
*   客户端证书指纹：[已选择]

我遇到的第一个问题是，当使用这种安全配置时，BizTalk 强制我指定一个 HTTPS 端点，而第三方 Web 服务是通过 HTTP 的。

如果我尝试指定 HTTP 端点，这是 BizTalk 给我的错误：

![在此处输入图像描述](../Images/c8f540b99a8c80c00a7e3f70b5b182e4.png)

这是 BizTalk 的限制，还是供应商公开其 Web 服务方式的根本问题？

此外，如果有人可以向我指出任何关于将 WCF 适配器与 WS-Security 一起使用的有用指导，那将非常有用，因为我一直在努力寻找任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:03:02.273

要让 BizTalk 接受绑定，请使用 https://... 地址对其进行配置，然后更改绑定文件中的地址并重新导入绑定。

如果 BizTalk 允许这样做（即这只是 WCF 对话的一个约束），那么您将能够实际使用该服务并对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T09:01:53.090

安全模式：需要传输 https。这是 WCf 的概念，不能与任何其他调整一起使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T13:13:15.763

如果遇到此问题，请确保“安全”选项卡中的“安全模式”下拉菜单设置正确。

[![在此处输入图像描述](../Images/13ee2b3aacb13dc1689de635da52cdfb.png)](https://i.stack.imgur.com/j28Zs.png)

# php - cURL：句柄响应：基于行的文本数据

> ID：10295084
> 
> 赞同：0
> 
> 时间：2012-04-24T09:19:14.807
> 
> 标签：php, curl, response

我正在使用 cURL 向另一个网络服务器发送请求。

这是我用来设置和发送请求的代码：

```
function currentStatePlaying($ip){
$url = "http://".$ip."/?track=ginfo";
$agent= 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.0.3705; .NET CLR 1.1.4322)';
$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, $agent);
curl_setopt($ch, CURLOPT_URL,$url);
$result = curl_exec($ch);   
curl_close($ch);
echo $result;
} 
```

我注意到结果是空的，当查看使用wireshark 制作的网络捕获时，我可以看到我需要的响应。它作为基于行的文本数据嵌入到 httppacket 中：text/html

所以我的问题是：我怎样才能访问这些数据？

编辑：这是我的数据包的屏幕截图：

![](../Images/905ce3fe1b2988089a938db802901daa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:50:06.187

您的服务器的响应格式不正确。它应该是这样的：

```
HTTP/1.0 200 OK\r\n
Content-Type: text/html\r\n
\r\n
The content goes here 
```

通过让`curl_setopt(CURLOPT_VERBOSE, 1)`您已经在 cURL 中启用调试模式，但也许您还应该拥有`curl_setopt(CURLOPT_STDERR, "php://output")`

如果无法更改响应（这非常糟糕），请告诉我。

# html - 未显示的内容填满空间

> ID：10295089
> 
> 赞同：0
> 
> 时间：2012-04-24T09:19:39.747
> 
> 标签：html

如果有这样一张桌子：

```
<tr>
    <td>
        <label style="display: none;">
            [...]
        </label>
        <label [...] />
    </td>
</tr> 
```

第一个标签未按预期显示，但它填充了表中的（不可见）空间。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:51:19.163

试试这样：

```
<tr>
<td><label style="display: none;">[...]</label><label [...] /></td>
</tr> 
```

因此，开始和结束 td 标记之间根本没有任何空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:45:51.650

问题是在 . 谢谢！

# css - 如何使用 css3 做到这一点

> ID：10295097
> 
> 赞同：0
> 
> 时间：2012-04-24T09:19:56.790
> 
> 标签：css

如何使用 CSS复制[此图像？](http://www.mediafire.com/i/?zyygykbnpela1ya)注意：图像应该在 img 标签中，而不是作为背景

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:16:47.813

我创建了 2 个版本。

试试这个：http: [//jsfiddle.net/B82AX/5/](http://jsfiddle.net/B82AX/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:38:25.320

非常快速的回答，主要是静态高度等

[http://jsfiddle.net/9xvUF/3/](http://jsfiddle.net/9xvUF/3/)

你把你想要的图片作为背景图片

我敢肯定有一种更优雅的方式来解决这个问题

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:25:06.003

尝试这个 ：

```
<img style='border-radius:200px;' width='200' height='200' src="http://www.tuswallpapersgratis.com/images/wallpapers/leon1-600553.jpeg" alt=''/> 
```

见[http://jsfiddle.net/B82AX/](http://jsfiddle.net/B82AX/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:00:33.930

如果您正在寻找它如何制作圆形图像，这里有一个例子：

[http://webdesignerwall.com/tutorials/css3-image-styles](http://webdesignerwall.com/tutorials/css3-image-styles)

# java - 使用 Java 创建具有相似名称的文件而不覆盖现有文件

> ID：10295100
> 
> 赞同：5
> 
> 时间：2012-04-24T09:20:12.077
> 
> 标签：java

我想知道是否可以创建多个具有相似名称的文件，而不会覆盖当前文件。

例如：如果我有一个文件：xyz.txt 下次我创建它应该是：xyz(1).txt

```
try {
  File makefile = new File("output.txt");
  FileWriter fwrite = new FileWriter(makefile);
  fwrite.write("example file");
  fwrite.flush();
  fwrite.close();
} catch (IOException e) {
  e.printStackTrace();
} 
```

所以如果我重新运行这个程序，我当前的文件不应该被覆盖。我已经尝试过使用标志变量将数字作为前缀添加到文件名的 if 条件。

我想知道是否有任何 Java 命令可以避免覆盖现有文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:30:44.400

不在 java 中，如`@Greg Kopff`. 但是你可以解决这样的问题：

```
 int count = 0;

  public void createFile(String name) throws IOException
  {
    File f;
    f = new File(name);
    if (!f.exists())
    {
      f.createNewFile();
    }
    else
    {
      count++;
      createFile(name + (count));
    }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:21:39.220

> 我想知道是否有任何本机 java 命令可以停止覆盖 [并将数字附加到文件名]

不在核心 Java 库中，不。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T09:26:56.710

看一下方法[File.createTempFile()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String,%20java.io.File%29)

> 为了创建新文件，可以首先调整前缀和后缀以适应底层平台的限制。如果前缀太长，那么它将被截断，但它的前三个字符将始终被保留。如果后缀太长，它也会被截断，但如果它以句点字符 ('.') 开头，则句点和后面的前三个字符将始终保留。一旦进行了这些调整，新文件的名称将通过连接前缀、***五个或更多内部生成的字符***和后缀来生成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-30T05:19:59.813

虽然类似于 Bitmap 的响应，但我想出了这个 java 代码（这似乎工作）。我不知道这是否是最有效的，但是...

对于我的示例，我假设该文件将是一个 .txt 文件

```
String fileName = "output.txt"; 
File aFile = new File(fileName);

int fileNo = 0;
while(aFile.exists() && !aFile.isDirectory()) { 
    fileNo++; 
    String newName = fileName.replaceAll(".txt", "(" + fileNo + ").txt");   
    aFile = new File(newName);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-13T08:26:42.020

**对于科特林**

以下是使用 Kotlin 创建具有相似名称的文件而不覆盖现有文件的代码：

```
var fileNo = 0

@Throws(IOException::class)
fun createFile(name: String, addedEx: String): File {
    val originalName = name.replace(addedEx,"")
    val f = File(name)
    return if (!f.exists()) {
        f
    } else {
        fileNo++
        val file = createFile("${name.substring( 0, originalName.indexOf("."))}_($fileNo).${getExtension(originalName)}","_($fileNo)")
        fileNo = 0
        file
    }
} 
```

`addedEx`请记住，当您第一次调用它时，只需在param中传递空字符串。像这样 ：`createFile(nameTest.txt, addedEx: "")`

如果保存此文件 5 次， **输出将是：**

> 名称测试.txt
> 
> 名称Test_(1).txt
> 
> 名称Test_(2).txt
> 
> 名称Test_(3).txt
> 
> 名称Test_(4).txt

如果你想要扩展获取功能：

```
fun getExtension(name: String?): String? {
    val fileNameFromURL = Uri.parse(name).lastPathSegment
    if(fileNameFromURL != null && fileNameFromURL.lastIndexOf('.') >= 0)
    {
        return fileNameFromURL.substring(fileNameFromURL.lastIndexOf('.')+1)
    }
    return ""
} 
```

# mysql - mysql 按天分区

> ID：10295101
> 
> 赞同：0
> 
> 时间：2012-04-24T09:20:14.557
> 
> 标签：mysql, ruby-on-rails, migration, partitioning

您好，我想在我的表中添加分区。表多媒体包含最近 7 天的记录，所以我想创建 7 个分区，一个分区 - 有一天尝试执行此迁移：

```
def up
execute "ALTER TABLE multimedia 
  partition by range (to_days(created_at))
  ( 
    PARTITION p0 VALUES LESS THAN (to_days(#{Time.now - (7 * 24 * 60 * 60)})),
    PARTITION p1 VALUES LESS THAN (to_days(#{Time.now - (6 * 24 * 60 * 60)})),
    PARTITION p2 VALUES LESS THAN (to_days(#{Time.now - (5 * 24 * 60 * 60)})),
    PARTITION p3 VALUES LESS THAN (to_days(#{Time.now - (4 * 24 * 60 * 60)})),
    PARTITION p4 VALUES LESS THAN (to_days(#{Time.now - (3 * 24 * 60 * 60)})),
    PARTITION p5 VALUES LESS THAN (to_days(#{Time.now - (2 * 24 * 60 * 60)})),
    PARTITION p6 VALUES LESS THAN (to_days(#{Time.now - (1 * 24 * 60 * 60)})),
    PARTITION p7 VALUES LESS THAN (to_days(#{Time.now - (0 * 24 * 60 * 60)})),
    PARTITION p8 VALUES LESS THAN MAXVALUE 
  );"
end 
```

迁移的结果是以下错误：

```
An error has occurred, all later migrations canceled:

Mysql2::Error: You have an error in your SQL syntax; check the manual that  corresponds     to your MySQL server version for the right syntax to use near 
'11:09:43 +0200)),
     PARTITION p1 VALUES LESS THAN (to_days(2012-04-18 11:0' at line 4: ALTER TABLE  multimedia                        
    partition by range (to_days(created_at))
    ( 

  ==  AddPartitionToMultimedia: migrating =======================================
 -- 
  execute("ALTER TABLE multimedia \n      
partition by range (to_days(created_at))\n      
( \n        
PARTITION p0 VALUES LESS THAN (to_days(2012-04-17 11:09:43 +0200)),\n        
PARTITION p1 VALUES LESS THAN (to_days(2012-04-18 11:09:43 +0200)),\n        
PARTITION p2 VALUES LESS THAN (to_days(2012-04-19 11:09:43 +0200)),\n        
PARTITION p3 VALUES LESS THAN (to_days(2012-04-20 11:09:43 +0200)),\n        
PARTITION p4 VALUES LESS THAN (to_days(2012-04-21 11:09:43 +0200)),\n        
PARTITION p5 VALUES LESS THAN (to_days(2012-04-22 11:09:43 +0200)),\n        
PARTITION p6 VALUES LESS THAN (to_days(2012-04-23 11:09:43 +0200)),\n        
PARTITION p7 VALUES LESS THAN (to_days(2012-04-24 11:09:43 +0200)),\n        
PARTITION p8 VALUES LESS THAN MAXVALUE \n      
);") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:52:31.000

`to_days`你的功能有错误。您需要确保传递给您的值`to_days`是字符串类型。类似于下面的代码：

```
to_days('2012-04-17 11:09:43 +0200')
        ^                         ^
        |                         | 
```

# vba - 运行时错误 1004，有时溢出错误

> ID：10295106
> 
> 赞同：0
> 
> 时间：2012-04-24T09:20:36.353
> 
> 标签：vba, excel

我需要以下帮助，

我有以下代码在 A 列中查找一个数字。然后查看它是否从 1 到 6，如果有 1 到 6 中的任何一个可用，我将不得不将其转换为 test1...test6。

我的代码出于某种原因显示运行时错误和有时溢出错误。想知道是否有人可以帮助我解决这个错误。先感谢您！

```
Sub macro()

    Dim rownum As Long, colnum As Long, currcell As Range

    rownum = ActiveCell.Row
    colnum = ActiveCell.Column

    Sheets("Sheet1").Select

    'Converting 1-6 into Test1-Test6
    Do
        Set currcell = ActiveSheet.Cells(rownum, 1)
        If IsNumeric(currcell.Value) Then
            If currcell.Value = 1 Then
                currcell = "test1"
            ElseIf currcell.Value = 2 Then
                currcell = "test2"
            ElseIf currcell.Value = 3 Then
                currcell = "test3"
            ElseIf currcell.Value = 4 Then
                currcell = "test4"
            ElseIf currcell.Value = 5 Then
                currcell = "test5"
            ElseIf currcell.Value = 6 Then
                currcell = "test6"
                Exit Do
            End If
        End If
        rownum = rownum + 1
    Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:38:06.833

> > > > @SiddharthRout，我意识到 DIM，这是一个错字...我不认为我可以使用 .find 因为我需要将更改修复为仅 A 列。 – user1204868 1 分钟前

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim i As Long

    With Sheets("Sheet1").Columns(1) '<~~ Col A
        For i = 1 To 6
            .Replace What:=i, Replacement:="test" & i, LookAt:=xlWhole, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False

            DoEvents
        Next
    End With
End Sub 
```

# .net - MongoDB：从子集合中删除项目

> ID：10295108
> 
> 赞同：0
> 
> 时间：2012-04-24T09:20:55.683
> 
> 标签：.net, linq, mongodb

我正在尝试从我的 MongoDB 文档中的子集合中删除一个项目。

这是一个简单的例子：

```
{
    _id : ObjectId("4f966b41682dbc1be0c7b640"),
    Firstname: "John",
    Lastname: "Doe",
    Skills: [
        { 
          _id : ObjectId("4f966b3f682dbc1bec7b63c"),
          name: "C#"
        },
        { 
          _id : ObjectId("4f966b3f682dbc1bec7b63c"),
          name: "ASP.NET"
        },
    ]
} 
```

我已经尝试过`$pull`，它在 shell 上运行良好，但我怎样才能使用 Linq 完成这个。

任何建议都非常受欢迎，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:19:09.323

拉取是一种更新机制，不能用 Linq 完成。但是，您可以使用本机语法从 .NET 驱动程序中完成此操作。

```
var update = Update.Pull("Skills");
var query = Query.Eq("_id", myObjectId);
collection.Update(query, update); 
```

希望我们将来可以将其类型化得更强。您可以在此处查看文档：[http](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-Updatemethod) ://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-Updatemethod 。

# php - 使用表中的数据字段作为列标题？

> ID：10295110
> 
> 赞同：0
> 
> 时间：2012-04-24T09:20:59.583
> 
> 标签：php, mysql

我创建了一个`php`带有`mysql`后端的页面，以显示包含员工姓名、月份、订单的小表的结果，如下所示：

```
<table border="1" cellpadding="1" cellspacing="1">
   <thead>
        <tr>
    <th scope="col">Name</th>
    <th scope="col">Month</th>
    <th scope="col">Cases</th>    
  </tr>
   </thead>
  <?php do { ?>
  <tbody>
    <tr>
      <td><?php echo $row_rsChart2['ContactFullName']; ?></td>
      <td><?php echo $row_rsChart2['Month']; ?></td>
      <td><?php echo $row_rsChart2['Cases']; ?></td>
    </tr>
    </tbody>
    <?php } while ($row_rsChart2 = mysql_fetch_assoc($rsChart2)); ?>
</table> 
```

是否可以将月份列用作标题，在列标题中从左到右显示 Jan、Feb、March 等，并将每个月的案例作为数据？

```
1 月 - 2 月 - 3 月
用户 1 100 47 89
用户 2 86 67 134

```

使用默认布局，它显示为：

```
姓名 - 月份 - 案例
User1 100 年 1 月
用户 1 2 月 47 日
用户 2 1 月 67 日

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:49:11.363

MySQL 对像这样的数据透视没有任何本机支持。你有几个选择：

1.  构造一个相当可怕的 MySQL 查询来手动执行旋转操作：

    ```
    SELECT *
      FROM (
        SELECT StaffName, SUM(NumOrders) AS January
        FROM Orders
        WHERE Month = 'January'
        GROUP BY StaffName
      ) AS tJan
      NATURAL JOIN (
        SELECT StaffName, SUM(NumOrders) AS February
        FROM Orders
        WHERE Month = 'February'
        GROUP BY StaffName
      ) AS tFeb
      NATURAL JOIN (
        -- etc. 
    ```

    如果您选择走这条路，您可以通过使用 PHP 中的循环结构或 MySQL 中的预准备语句自动生成此查询，让您的生活稍微轻松一些。

2.  将上述操作作为一次性操作进行，以便更改 MySQL 数据库的结构以更准确地反映这种所需的布局（转换表后很容易，但可能会影响数据库的其他用途）：

    ```
    CREATE TABLE NewOrders (PRIMARY KEY('StaffName'))
    SELECT * FROM (
      -- etc. as above 
    ```

    或者，您可以创建一个[`VIEW`](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)基于基础表以这种方式构造的“虚拟表”。

3.  在 PHP 中手动旋转数据（繁琐）。

# r - plyr R 空内连接

> ID：10295111
> 
> 赞同：1
> 
> 时间：2012-04-24T09:21:04.170
> 
> 标签：r, join, gnu, plyr

我得到了一个大数据表`X`（504x9）和一个较小的数据框`bzShare`（323X4），它们的列`top.sector`和`sizeClass`. 现在我想将一个值从`bzShare`into加入`X`，以便尺寸为`X`（504x10）。如果我是对的，内连接只选择 x 和 y 中具有匹配键的行，但我总是得到零行:-(

```
> dim(X)
[1] 504   9
> names(X)
[1] "sizeClass" "top.sector"    "year" "period" "somevar"
[6] "sumTest"   "sumTestTotal"  "AN"   "share"                    
> names(bzShare)
[1] "top.sector" "sizeClass"  "bzShare"   
> join(X,bzShare,type="inner",by=c("top.sector","sizeClass"))
NULL data table 
```

为什么没有得到这个 (504x10) 数据框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:57:33.610

仅仅因为两个`data.frames`或矩阵共享相同的列名并不意味着它们会很好地连接/合并，因为它们之间可能没有任何公共键，这将是内部 JOIN 情况下的典型结果，例如你正在描述的一个。

还要检查您的`bzShare`对象是否不为空，尽管它具有有效的列名（即我错过了 的结果`dim(bzShare)`）

从...开始：

```
count(X$top.sector %in% bzShare$top.sector)
count(X$sizeClass %in% bzShare$sizeClass) 
```

看看你是否在每个集合的交叉点得到了一些东西。

# ios - iTunes Connect - 公司/个人银行账户

> ID：10295113
> 
> 赞同：0
> 
> 时间：2012-04-24T09:21:15.427
> 
> 标签：ios, ios4, in-app-purchase, app-store-connect

我们计划获得开发人员许可，以便在 APP STORE 中部署我们的应用程序，其中也涉及 iTunes Connect 集成。

由于我们的公司名称不符合 APPLE 条款，因此我们计划以个人名义而不是公司名称获得开发者许可证。

因此，我们想知道，在与 iTunes 集成时，我们是否可以提供我们公司的银行账户详细信息，还是只需要提供开发者许可证持有者的账户详细信息。

请分享说明此类信息的 URL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:34:15.330

请记住，以个人身份注册时，您将无法以公司的名义发布应用程序：

> > **我可以以个人身份注册并让我的公司在 App Store 上显示为“卖家名称”吗？**
> > 
> > 不可以。要让您的公司名称在 App Store 上显示为“卖家名称”，您的公司必须被认定为法人实体，并且您必须注册为公司/组织。如果您是独资经营者，您必须以个人身份加入，您的法定名称将显示为“卖方名称”。
> > 
> > 如果您已以个人身份注册并需要将您的个人帐户转换为公司帐户，请与我们联系。

来源：[https ://developer.apple.com/support/ios/enrollment.html](https://developer.apple.com/support/ios/enrollment.html)

# javascript - MVC3 Razor - Jquery 的 Foreach 问题

> ID：10295116
> 
> 赞同：0
> 
> 时间：2012-04-24T09:21:34.503
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, razor

在我看来，我有一个 foreach 循环无法正常工作。我的 Model.AllSelectedQuestions 是一种列表。因此，如果 Model.AllSelectedQuestions 里面有 5 个对象，它将显示 5 行 . 我想要做的是有一个计数器，这里显示的是一个例子，框是链接。

![在此处输入图像描述](../Images/bacf168edebce9d0f5779f0a0212fea2.png)

```
@{
    int nr = 1;
    foreach (SelectedQuestionViewModel items in Model.AllSelectedQuestions)
    {
        <a href="#" class="box" id="Question_(@items.QuestionID)"></a>
        <p>@nr++</p>
    }              
  } 
```

问题是我得到了这个结果：nr++ nr++ nr++ nr++ nr++ 当我的列表中有 5 个对象时。但我想得到 1 2 3 4 5。就像显示的例子一样。

任何形式的帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:45:47.133

也许我错了，但是您检查过该代码吗？

```
<p>@(nr++)</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:49:05.420

这更容易，我认为只使用[有序列表](http://www.w3schools.com/tags/tag_ol.asp)来处理序列。

```
<ol>
foreach (SelectedQuestionViewModel items in Model.AllSelectedQuestions)
{
    <li><a href="#" class="box" id="Question_(@items.QuestionID)"></a></li>
}
</ol> 
```

# c# - 如何在运行时从 .NET 应用程序更改 DTS 包中的连接字符串？

> ID：10295123
> 
> 赞同：3
> 
> 时间：2012-04-24T09:21:49.630
> 
> 标签：c#, sql-server, dts

我正在尝试从 C# 应用程序运行 dts 包。不过，我需要动态更改其连接字符串。我在网上看了一下，发现我应该使用Package对象的Variables属性。问题是，我的 Visual Studio 2010 没有显示包的这个变量属性。我使用的命名空间是

```
using Microsoft.SqlServer.Dts.Runtime;
using Microsoft.SqlServer.Dts.Runtime.Wrapper; 
```

我应该做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T02:57:01.017

您真的是指 DTS (SQL2000) 或其较新的同级 SSIS 吗？无论如何，我遇到了一个类似的问题，我必须为一个包指定多个动态连接。我解决它的方法是这样的：

来自调用者： - 向 SQL 表写入两列： - “Key”列是与目标的特定连接 - “Value”列是新的连接值

包内部： - 使用 SQL 任务将键/值对读入 @User:: 变量 - 使用脚本任务获取自身运行实例的句柄 --> 通过此句柄分配连接字符串

DTS 示例：

```
' Get a reference to self (the DTS package currently running)
Set oPkg = DTSGlobalVariables.Parent

' Get connection to Input File - Set Path
Set oCn = oPkg.Connections.Item ( "MasterFileIn" )
oCn.DataSource = workAreaPath & "MasterFile.txt" 
```

SSIS 不允许访问活动包对象，但您可以直接设置连接。在您的**ScriptMain.cs**文件中：

```
ConnectionManager cm = Dts.Connections["MasterFileIn"];
cm.ConnectionString = Dts.Variables["DataSource"].Value; 
```

# intellij-idea - Intellij IDEA。将某个文件夹中的文件添加到项目中

> ID：10295127
> 
> 赞同：3
> 
> 时间：2012-04-24T09:22:21.190
> 
> 标签：intellij-idea

是否可以将一些文件从目录添加到 IDEA 项目？
我不想添加所有目录，因为它很大并且会减慢应用程序的速度。
第二个 - 是否可以告诉 IDEA 不要添加某个文件夹中的所有子目录，而只添加它包含的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:41:59.003

我发现一个不错的选择是右键单击 IDE 中的文件夹并选择选项“将目录标记为”-> 排除。它从树上消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:30:12.613

如果您不希望有文件或文件夹成为您项目的一部分，我的建议是首先不要将它们包含在您的 IntelliJ 项目中。

如果您在谈论源文件，您可以单独标记哪些目录是源和测试；只需右键单击并“标记为源”。

如果您有数百个不需要的源文件，我想知道为什么它们首先存在。完全没有依赖？你可以放心地忽略它们吗？然后将它们从项目中删除。

如果您确实有依赖项，但不需要修改文件，那么它们可能应该位于您添加到项目中的单独 JAR 中。

或者干脆把它全部留下。IntelliJ 足够快。不要为不存在的问题制定解决方案。在具有足够内存的机器上运行 IntelliJ，你会没事的。

# java - 如何在 oracle weblogic 中修复 WebService 和 package-info.java

> ID：10295128
> 
> 赞同：1
> 
> 时间：2012-04-24T09:22:26.040
> 
> 标签：java, web-services, xsd, weblogic, weblogic12c

当我在 oracle web-logic 版本 12c 上部署时，我正在使用 Java EE6 制作 web 服务，它工作正常，但是在 web 服务响应上，我想做一些与命名空间相关的自定义，所以我制作了 package-info.java 文件，如下所示

* * *

```
@javax.xml.bind.annotation.XmlSchema(namespace = "http://www.simple.org/",
attributeFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED,
        elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)

package example; 
```

* * *

基本上我需要这个包，每个标签都应该是合格的，但是在添加这个文件和结果之后没有什么不同，所以有人可以帮助我如何在 oracle weblogic 上解决这个问题？

顺便说一句，当我在 glassfish 3 上部署时，它的工作正常意味着有一些与 oracle weblogic 有关的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:39:11.153

两天前我们遇到了完全相同的问题。在我们的案例中，解决方案是从服务实现类中删除所有方法级别的注释，并在 endpointInterface 属性的 @WebService 注释中指定接口的完全限定名称。

例子：

```
@Stateless
@WebService(name = "...", portName = "...", serviceName = "...", targetNamespace = "http://..", endpointInterface = "...")
public class ServiceImpl implements Service {
...
} 
```

（我们需要@Stateless 注释，并且 web 服务被打包在后端的 ear 文件中）。

对我们有用的另一种方法是使 web 服务实现类不实现服务接口（实际上破坏了两者之间的连接）并将所有注释复制到实现类。

# windows - 无法链接 stl 库

> ID：10295129
> 
> 赞同：0
> 
> 时间：2012-04-24T09:22:33.620
> 
> 标签：windows, stl, linker, custom-component, c++builder-xe

我正在开发使用一些 STL 方法的自定义控件。这是我在尝试使用此组件编译项目时遇到的错误：

```
[ILINK32 Error] Error: Unresolved external 'std::numeric_limits<double>::min()' referenced from C:\DOCUMENTS AND SETTINGS\ALL USERS\DOCUMENTS\RAD STUDIO\8.0\DCP\INSTALLCMP.LIB|VctDiag2.cpp 
```

奇怪，因为我在设计模式下使用这个组件没有丝毫问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:48:25.557

我设法通过执行以下步骤来解决它。我打开了*项目选项*对话框（在自定义组件项目中）并导航到*C++ 链接器*页面。然后未选中选项*Link with Dynamic RTL*。这具有将链接库（静态或动态）中的所有方法插入可执行文件（或在我的情况下插入自定义组件库 MyComponent.lib）中的效果。所以链接主项目时不需要额外的文件。不过，我不完全理解我应该怎么做才能避免 STL 代码的重复。我也在主项目中使用了同样的功能。在我看来，现在这个函数在 MyProject.exe 中出现了两次。首先来自链接的 MyComponent.lib，然后像往常一样将使用的方法链接到可执行文件。

# java - 使用 REGEX 进行字符串验证

> ID：10295135
> 
> 赞同：0
> 
> 时间：2012-04-24T09:22:55.697
> 
> 标签：java, regex

在谷歌上搜索了我的解决方案，最后决定在这里发布一个问题。

我的要求是只发送 AC 和 R 字符作为输入，并且传递的字符串的最大长度不应超过 6 个字符。

以下是有效状态：

A,C,R,

弧，

R，A，C，

R，C，A，

C,R,A,

车，

R,C,

C,R,

一个，R，

R,C,

一种，

……

等等。A、C、R 的所有可能组合都是可能的，但最大长度不应增加 6 个字符。

到目前为止，我能够执行像 ([ACR],)+ 这样的模式验证，但也想在同一个正则表达式中执行大小验证。

所以现在，我使用的条件是

```
if(!status.matches("([ACR],)+") || status.length()>6){
SOP
} 
```

我必须跨多种方法使用这种大小的实现。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:25:07.133

这应该有效：

```
([ACR],){1,3} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:26:01.313

此正则表达式将允许模式重复 1 到 3 次（在这种情况下，模式是一个点，即任何字符）：

```
.{1,3} 
```

用任何正则表达式替换点。在你的情况下`([ACR],)`

换句话说：`+`用`{1,3}`

# c# - WPF/C# - 窗口打开时关闭

> ID：10295136
> 
> 赞同：2
> 
> 时间：2012-04-24T09:23:00.793
> 
> 标签：c#, wpf, window

我尝试在我的 c# 测试应用程序中打开一个 wpf 窗口。但是当我打开窗户时，它又立即关闭了。

我的代码有什么问题？

Main.cs（也可[在此处](http://paste.ubuntu.com/943798/)获得）：

```
namespace Project1
{
    class TestClass
    {
        public static MainWindow _mainWindow = null;

        static void Main(string[] args)
        {
            Thread t = new Thread(new ThreadStart(ThreadProc));
            t.SetApartmentState(ApartmentState.STA);
            t.Start();

            while (true)
            {
                System.Threading.Thread.Sleep(1000);
                _mainWindow.ToString();
            }
        }

        public static void ThreadProc()
        {
            TestClass2 testClass = new TestClass2();
            testClass.Open();
        }
    }

    class TestClass2
    {
        public void Open()
        {
            TestClass._mainWindow = new MainWindow();
            TestClass._mainWindow.Show();
            Console.WriteLine("=)");
        }
    }
} 
```

MainWindow.xaml：

[http://paste.ubuntu.com/943800/](http://paste.ubuntu.com/943800/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T09:28:07.257

您的代码正在做一些没有明显原因的奇怪事情：

*   为什么要创建一个新线程，然后将已有的线程放入无限循环中？
*   为什么要调用`.ToString()`your `Window`，它还属于另一个线程？（我不确定这是否会像大多数其他操作一样导致您的程序由于所有权问题而崩溃，但这是可能的）。

此外，您不会在任何地方创建消息循环，因此即使程序正常运行，它也会完全不响应用户输入。创建您的 后`Window`，在您执行的任何线程中，您都应该调用

```
System.Windows.Threading.Dispatcher.Run(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:36:26.847

我相信您缺少 [STAThread] 属性`Main()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:26:14.883

您是否尝试使用`ShowDialog()`而不是`Show()`？

# iphone - 从图像中绘制纹理作为游戏背景

> ID：10295141
> 
> 赞同：0
> 
> 时间：2012-04-24T09:23:57.580
> 
> 标签：iphone, cocos2d-iphone, box2d

我正在开发一款 Cocos2D + Box2D iphone 游戏，在这个平台上的经验很少。

详细说明我的问题：我有一个构成我的游戏场地的线条列表。我想在这条线下面画一些纹理。我如何从给定的图像中绘制它并确保纹理无缝且性能最佳（即游戏可能会很长）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:36:07.833

对于任何有兴趣的人，我发现这个线程非常有帮助： http: [//www.cocos2d-iphone.org/forum/topic/8142](http://www.cocos2d-iphone.org/forum/topic/8142)

源代码：[https ://github.com/asinesio/cocos2d-PRKit](https://github.com/asinesio/cocos2d-PRKit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:40:18.370

您需要先添加背景。这里的 mainScene 是你的 CCDirector 将使用的 CCScene。Cocos2D 使用图像的中间作为位置。

```
[CCTexture2D setDefaultAlphaPixelFormat:kTexture2DPixelFormat_RGBA4444];
CCSprite *background = [CCSprite spriteWithFile:@"background.png"];
background.position = ccp(1024/2, 768/2);
[mainScene addChild:background]; 
```

RGBA4444 使您的图像更小，但当它们有渐变时它们看起来不太好。默认值为 RGBA8888。

# java - 将字符串从字符串数组添加到 ArrayList

> ID：10295142
> 
> 赞同：1
> 
> 时间：2012-04-24T09:24:01.917
> 
> 标签：java, android, arrays, eclipse, arraylist

```
String [] words = { "apple", "orange", };
String Word = words[wordGenerator];            //wordsGenerator is just a rand(); which return a integer.

String [] letters;
List<String> wordList;

letters = new String[12];
wordList = new ArrayList<String>(Arrays.asList(letters));

letters = Word.split("(?!^)"); 
```

通过执行上面的代码，我知道如果它生成苹果，我将得到一个名为“字母”的数组，前 5 个内存为 a、p、p、l、e，对吗？

如果是这样，我如何将这 5 个字符串从“字母”数组传递到 wordList？解决方案似乎很简单，但我就是想不出来。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:27:49.230

```
 for(int i=0;i<letters.length();i++{
 wordlist.add(letters[i]);
 } 
```

我想..这就是你要问的......？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:53:01.863

这是一个片段代码：

```
/**
 * @param args
 */
public static void main(String[] args) {
    //init the wordList
    List<String> wordList=new ArrayList<String>();
    //init the word buffer
    String [] letters = new String[12];
    //init the data
    String [] words = { "apple", "orange", };
    //pick a random number
    int wordsGenerator = new Random().nextInt(words.length);
    //pick a random word
    String Word = words[wordsGenerator];            
    //process the word...
    letters = Word.split("(?!^)");
    //add the word to the wordList
    String mergedWord = join(letters);
    wordList.add(mergedWord);

}

/*
 * Merges a set of strings to one string
 */
static String join(String[] strs){
    StringBuffer sb=new StringBuffer();
    for (String item : strs) {
        sb.append(item);
    }
    return sb.toString();
} 
```

}

# php - 计算值未保存在数据库中

> ID：10295143
> 
> 赞同：1
> 
> 时间：2012-04-24T09:24:24.040
> 
> 标签：php, yii

我有这段代码，似乎该值未存储在数据库中。这是我的代码：

```
echo $form->labelEx($model,'Quantity_In_Pieces',array('label'=>'Total Quantity')); 
echo $model->Quantity_In_Pieces = $model->Quantity * $model->Hold;      
echo $form->textField($model->'Quantity_In_Pieces'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:27:15.463

您正在计算*渲染*代码中的值。这个计算也应该在从表单接收输入的代码中完成，然后再将该输入保存到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:18:08.300

上面的 DCoders 回答是正确的。但它不在数据库中的原因是你没有保存它。但是，它应该在该呈现的文本框中显示新值。

要保存模型，您需要在`save()`对其值进行更改后对其调用函数。这最好在控制器代码中完成，因此它与视图表示代码分开。

如果您在这个概念上苦苦挣扎，那么我建议您阅读我见过的框架的最佳指南之一：

[Yii 文档](http://www.yiiframework.com/doc/guide/1.1/en/basics.mvc)

只需阅读一些“基础”部分，即可了解 MVC 结构的工作原理。[然后，如果您在此处或Yii 论坛](http://www.yiiframework.com/forum/)上需要特定帮助

# iphone - 防止触摸传播到下面的注释

> ID：10295147
> 
> 赞同：3
> 
> 时间：2012-04-24T09:25:03.997
> 
> 标签：iphone, ios, touch, mkmapview, mkannotationview

我有一个习惯`MKAnnotationView`。在它的`setselected:animated`方法中，我添加了一个从笔尖加载的自定义气泡，调整注释视图的框架以包含此视图并用其他颜色重新绘制注释圆圈，如下所示（第一个 - 未选中，第二个 - 选中，蓝色框架，绿色 - alpha = 0.8 的自定义气泡视图，红色 - 注释视图）：

## ![在此处输入图像描述](../Images/0eca04456990e4335c99627fe039c39c.png)

它工作正常，出现气泡，并且只能通过在其外部点击来“关闭”（这就是我增加框架的原因）。我在这个气泡上有一些按钮，如果注释下只有地图没有任何内容，它们是可点击的。

但是，当标注气泡下方有另一个注释时，我可以单击“通过”整个气泡。当我点击其中一个按钮时，点击突出显示出现，但另一个注释被选中，因为`didSelectAnnotationView`触发......

我试图使气泡不透明/半透明，没有运气；在按钮上设置 ExclusiveTouch，在视图本身上，没有运气；尽量不要乱帧，还是可以点进去的。我错过了什么吗？

谢谢

**编辑**：**更短：如果此 UIView 下有其他 MKAnnotationView，为什么我可以单击 MKAnnotationView 中的`UIView`添加项？`addSubview`**

细节 ：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
  if(selected)
  {
    initialFrame = self.frame;       // save frame and offset to restore when deselected
    initialOffset = self.centerOffset;  // frame is correct for a circle, like {{2.35, 1.47}, {12, 12}}

    if (!self.customCallout) 
    {
      self.customCallout = [[[NSBundle mainBundle] loadNibNamed:@"CustomCallout" owner:self options:nil] objectAtIndex:0];
    }
    // adjust annotationview's frame and center
    // callout is 200x120, here frame is {{2.35, 1.47}, {200, 132}} 
    self.customCallout.layer.cornerRadius=5;
    self.customCallout.exclusiveTouch = YES;
    [self addSubview:self.customCallout];
  }
...
} 
```

`initWithAnnotation`有这些：

```
 self.canShowCallout = NO;  // to appear the subview
   self.exclusiveTouch = YES; // ...
   self.enabled = YES;
   self.opaque = YES; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T20:05:14.840

触摸处理方法（touchesBegan：touchesEnded：等）的默认行为在[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/UIResponder/touchesBegan%3awithEvent%3a)中有此注释：

> 此方法的默认实现什么也不做。然而，UIResponder 的直接 UIKit 子类，尤其是 UIView，将消息转发到响应者链。

MKAnnotationView 是 UIVIew 的子类。结果，当您的注释被触摸时，它会将其传递给它的超类并在响应者链上，因此最终您的地图视图会得到触摸并激活被覆盖的注释。

要解决此问题，请在 annotationView 类中实现触摸处理方法，并且不要将触摸事件向上传递到响应者链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:20:02.123

你能检查一下哪个事件先触发吗

```
1, the button on bubble
2, didSelectAnnotationView 
```

如果气泡上的按钮首先触发，您可以通过子类化气泡中的触摸相交

```
touchesBegan:touches
touchesMove:touches
touchesEnd:touches 
```

在气泡视图中以防止传播

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T16:16:33.333

我想您会发现以下链接非常有用：

[http://blog.asynchrony.com/2010/09/building-custom-map-annotation-callouts-part-2/](http://blog.asynchrony.com/2010/09/building-custom-map-annotation-callouts-part-2/)

[如何使 MKAnnotationView 触摸敏感？](https://stackoverflow.com/questions/8648263/how-do-i-make-a-mkannotationview-touch-sensitive)

第一个链接讨论（除其他外）如何防止传播，第二个链接如何检测触摸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-01T12:29:28.367

我最近遇到了这个问题，花了很多我没有的时间。解决它，实际上很简单，当然是花了很多年才意识到的。

您只需要将 MapView 子类化，并在该子类中包含以下内容：

```
override func gestureRecognizerShouldBegin(_ gestureRecognizer: UIGestureRecognizer) -> Bool {
    debugPrint(gestureRecognizer)
    if gestureRecognizer is UITapGestureRecognizer {
        return true
    } else {
    return false
    }
} 
```

原因是，地图交互的所有处理，例如缩放平移等，似乎都是在内部处理的，我们无法访问。然而，引起我们问题的手势是可以访问的，但就我而言，我只想要处理选择和取消选择注释的点击手势。

# php - 为什么我在 Symfony 1.4 上使用 Doctrine 保存时会收到“验证失败”？

> ID：10295150
> 
> 赞同：1
> 
> 时间：2012-04-24T09:25:09.317
> 
> 标签：php, symfony-1.4, doctrine-1.2

通过 Doctrine 导入一些数据时出现以下错误：

```
value1:19.022542
value2:497.795
value3:9466.541667
Caught exception: Validation failed in class DataPerDay

  27 fields had validation errors:

    * 1 validator failed on value1 (type)
    * 1 validator failed on value2 (type)
    * 1 validator failed on value3 (type) 
```

我不明白这个验证错误！这些字段**的**类型是浮点数，这里会发生什么？

架构.yml：

```
DataPerDay:
  connection: doctrine
  tableName: xp_data_per_day
  columns:
    id:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    inverter_id:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    (...)
    value1:
      type: float
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    (...) 
```

更奇怪的是，我在生产环境中有错误，而不是在 localhost :(

编辑：在 BaseDataPerDayFormFilter.class.php 中，验证器是：

```
'value1'      => new sfValidatorSchemaFilter('text', new sfValidatorNumber(array('required' => false))), 
```

这个可以吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:29:52.973

错误不在 schema.yml 中，而是在**databases.yml**中：

```
prod:
  doctrine:
    class: sfDoctrineDatabase
    param:
      profiler: false
      dsn: 'mysql:host=xxx.net;dbname=xxx'
      port: 3306
      username: xxx
      password: xxx
      encoding: UTF8
      attributes:
        quote_identifier: false
        use_native_enum: false
        idxname_format: %s_idx
        seqname_format: %s_seq
        tblname_format: %s
        validate: all 
```

我不知道这个“ `validate: all`”是从哪里来的，但正是它造成了这些错误。

# java - 仅特定组件的 ajaxStatus

> ID：10295153
> 
> 赞同：10
> 
> 时间：2012-04-24T09:25:34.260
> 
> 标签：java, jsf, primefaces

我将 Primefaces 3.2 与 JSF 2.0 一起使用。

我正在使用一个

```
<p:commandButton action="#{myBackingBean.action}" value="press me" /> 
```

这对于ajaxStatus：

```
<p:ajaxStatus onstart="statusDialog.show();"
      onsuccess="statusDialog.hide();"
      rendered="#{myBackingBean.ajaxStatusRendered}"
      id="ajaxStatusField" />

    <p:dialog modal="true" widgetVar="statusDialog"
      header="#{myBackingBean.ajaxStatusHeader}"
      rendered="#{myBackingBean.ajaxStatusRendered}" id="ajaxPanel"
      draggable="false" closable="false">
      <p:graphicImage value="./images/ajaxloader.gif" />
    </p:dialog> 
```

我在同一页面上还有许多其他 primefaces 组件，但我只希望 p:ajaxStatus 在按下此特定按钮时呈现。有什么好的解决办法吗？ajaxStatus 在每个 ajax 事件上呈现..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T09:51:49.133

如果您有几个按钮，您可以设置它们`global="false"`并在没有此设置的情况下保留所需的按钮。

这样，所有其他按钮都不会触发`p:ajaxStatus`所需的按钮。

# facebook - Facebook 刮板错误读取内容

> ID：10295154
> 
> 赞同：0
> 
> 时间：2012-04-24T09:25:35.633
> 
> 标签：facebook, scraper

Facebook 刮板在阅读我的页面内容时会抛出一些奇怪的东西......

页面网址： http: [//www.protagora.hr/Stranica/O-nama/9/](http://www.protagora.hr/Stranica/O-nama/9/)

抓取调试输出： [https ://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.protagora.hr%2FStranica%2FO-nama%2F9%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.protagora.hr%2FStranica%2FO-nama%2F9%2F)

为什么当我使用浏览器访问页面时一切正常，但爬虫无法访问相同的数据？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:40:25.423

当我第一次尝试访问您的页面时，我得到了一个 php 错误而不是页面，然后我刷新了浏览器，错误消失了，页面被加载了。

然后我试着看看调试器说了什么，你是对的，它抱怨（警告而不是错误）没有以下标签：标题、网址和描述，即使在查看你的源代码时很明显所有标签都存在.

在调试器结果页面的底部有一个链接*“Scraped URL: See exactly what our scraper sees for your URL”*，当点击 facebook **scraper**获取的内容是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<br><b>Fatal error</b>
</head>
<body><p>:  Call to a member function LoadContentData() on a non-object in <b>/home/protagor/public_html/WebSuite/Modules/WebCMS/Classes/Content.php</b> on line <b>65</b><br></p></body>
</html> 
```

这是我最初看到的错误。

我不确定他们是否只是缓存了此错误，或者此错误是否仅在 facebook 机器人**抓取**您的页面时发生。通常使用调试器“强制”清除 facebook 缓存，新结果正在替换缓存中的旧结果。

您应该检查为什么会发生此错误。

# lucene - 在 Lucene 中使用带有 SpanQuery 和 PhraseQuery 的分析器？

> ID：10295155
> 
> 赞同：0
> 
> 时间：2012-04-24T09:25:39.707
> 
> 标签：lucene, information-retrieval

我应该对数据应用邻近搜索。为此，我使用`PhraseQuery`and `SpanNearQuery`，但我找不到一种方法让他们使用我的自定义分析器（或任何其他相关分析器`Analyzer`，就像在 的情况下可能的那样`QueryParser`）。

有人可以指导我吗？是的，我有这样的疑问：

> 这 。骑士

点 (.) 表示“the”和“knight”之间最多可以有 1 个单词，并且可以产生“the knight”、“the dark knight”等结果。

PS：如果不可能，请告诉我，所以我不会在这个问题上花费数小时。提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:12:23.553

QueryParser 具有不同的语法，但如果不必对单词进行排序（即在您的情况下，如果您还允许“knight”出现在“the”之前） ，它可以处理[邻近搜索。](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/queryparsersyntax.html#Proximity%20Searches)

# android - 对齐 2 个图像，使第一个图像用作第二个图像的边框

> ID：10295158
> 
> 赞同：0
> 
> 时间：2012-04-24T09:25:50.050
> 
> 标签：android, layout

我正在尝试找到一种对齐 2 张图像的方法。第一个图像是边框图像（如宝丽来），第二个图像是图片。图片应该从边框的角落开始（距真实边框图像的左侧和顶部大约 20dp），但该距离因您拥有的屏幕而异......

```
 <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <ImageView
                    android:id="@+id/image"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <ImageView
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:adjustViewBounds="true"
                    android:src="@drawable/border" />
            </RelativeLayout> 
```

这就是我现在得到的：

![在此处输入图像描述](../Images/0916903168f964fad34f9e5ee37ee3e0.png)

最难的是图像不应该弹出边框图像并且整个视图（边框+图像）后面的背景是可变的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:52:23.343

我认为您应该将边框图像设为 9 补丁：http: [//developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:31:39.703

最好的办法是使用“边框”图像作为布局的背景可绘制对象，然后将图像放置在该布局上：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/polaroid_background"
    android:padding="20dp">

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

我刚刚还没有测试过，但这大约是你会做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:43:31.330

我不得不处理一个类似的问题，back_img, img, text。我可以通过样式以非常糟糕的方式处理它（对于每种不同的屏幕尺寸），但这是我发现唯一有效的方法......

我设置了一个 LinearLayout 并将 3 个 imgs 放在另一个 LinearLayout 中

```
LinearLayoutLine  //wrap content\\
   LinearLayoutImg1 //wrap content + marginRight\\
      Img11
      Img12
      Text13
   /LinearLayoutImg1

   LinearLayoutImg2
      Img21
      Img22
      Text23
   /LinearLayoutImg2
/LinearLayoutLine 
```

在样式中，是这样的：

```
 <style name="img1">
        <item name="android:layout_width">85dp</item>
        <item name="android:layout_height">85dp</item>
        <item name="android:layout_marginLeft">1dp</item>
        <item name="android:layout_marginRight">2dp</item>
        <item name="android:layout_marginTop">1dp</item>
        <item name="android:layout_marginBottom">1dp</item>
        <item name="android:gravity">center</item>
        <item name="android:scaleType">fitXY</item>
    </style>

    <!--  imatge del tema -->
    <style name="img2">
        <item name="android:layout_width">82.6dp</item>
        <item name="android:layout_height">82.6dp</item>
        <item name="android:layout_marginLeft">-87dp</item>
        <item name="android:layout_marginRight">0dp</item>
        <item name="android:layout_marginTop">0dp</item>
        <item name="android:layout_marginBottom">0dp</item>
        <item name="android:gravity">center</item>
    </style>

    <style name="text" parent="@android:style/TextAppearance.Small">
        <item name="android:layout_width">66dp</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:lines">1</item>
        <item name="android:gravity">center</item>
        <item name="android:layout_marginBottom">-25.3dp</item>
        <item name="android:layout_marginLeft">-75dp</item>
        <item name="android:textStyle">normal</item>
        <item name="android:textSize">10.5sp</item>
        <item name="android:textColor">@color/blanc</item>
    </style> 
```

因此，您将 Img1 的大小设置为一点边距（我发现有时您需要在 Imgs 中使用该边距），第二个设置为负 IMG1 宽度+rightMargin 以及在需要时设置文本。

# javascript - Jquery 使用 $.klass 保留“This”的最佳实践

> ID：10295161
> 
> 赞同：1
> 
> 时间：2012-04-24T09:26:06.457
> 
> 标签：javascript, jquery, oop, class, this

我使用 Jquery 插件 klass，但在使用它时遇到了一些问题......：/

我有一个带有方法的类，但是当我想从我的对象中捕获事件（如点击）和调用方法时，我发现只有两种方法可以做到这一点：

问题：

```
test = $.klass({
    init: function () {
        console.log('CM');
    },

    action: function () {
        $('.test').on('click', function () {
            // Call test method
        });
    },
    test: function () {
        console.log('test');
    }
}) 
```

解决方案 1：像数据一样放置“This”

```
test = $.klass({
    init: function () {
        console.log('CM');
    },

    action: function () {
        $('.test').on('click', { context: this }, function (event) {
            event.data.context.test();
        });
    },
    test: function () {
        console.log('test');
    }
}) 
```

解决方案 2：获取“全局”这个

```
test = $.klass({
    init: function () {
        console.log('CM');
    },

    action: function () {
        var that = this;
        $('.test').on('click', function (event) {
           that.test();
        });
    },
    test: function () {
        console.log('test');
    }
}) 
```

我不喜欢第二种解决方案，因为我不喜欢全局变量，但我不知道第一种是否更好......

你能帮我选择最好的吗，或者你可以为我提供其他解决方案:)

谢谢

# file - 目录/文件的最佳非字母数字字符

> ID：10295162
> 
> 赞同：1
> 
> 时间：2012-04-24T09:26:10.747
> 
> 标签：file, filesystems

我有一个包含很多文件的系统。为了避免配置文件/目录丢失，我尝试使用特殊字符启动配置目录。但是，在此过程中，我不断陷入各种陷阱。我只需要这个字符，以便有问题的文件在底部弹出或在 IDE 等中结束，这样人们就可以真正找到它们并轻松区分它们。

什么是好的跨平台、低干扰、文件/目录友好的特殊字符？不需要转义并且易于键入。

注意：拆分配置会更好，但不幸的是，由于某些系统如何处理所述文件，这不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:09:17.457

减号和下划线：

```
-file-with-minus
_underscore_needs_two_fingers_for_shift 
```

国际可用，Linux/Unix/OS-X/Dos/Win 友好。

# json - 从 Google Visualization Datatable 到 Highcharts 数据格式

> ID：10295168
> 
> 赞同：1
> 
> 时间：2012-04-24T09:26:54.147
> 
> 标签：json, graph, highcharts

我有一个程序可以从 Como 数据库中获取传感器数据，并在 html 页面中放入图表。现在该图是用 Google Graph API 实现的，但我必须切换到 Highcharts。

我有一个以谷歌格式转换 json 数据的函数

```
 function json2gdt(data) {
    // Build a google.DataTable
    var gdt = new google.visualization.DataTable();
    gdt.addColumn('datetime', 'Time');
    gdt.addColumn('number', 'value');
    gdt.addRows(data.length*2);
    var prev = data[0][1];
    for (var i=0; i<data.length; i++) {
    ts = data[i][0] * 1000
        gdt.setValue(i*2, 0, new Date(ts));
    gdt.setValue(i*2, 1, prev); 
        gdt.setValue(i*2+1, 0, new Date(ts));
        gdt.setValue(i*2+1, 1, data[i][1]);
    prev = data[i][1];
    }
    return gdt;
} 
```

然后我有一个函数可以在 html 页面中可视化图表：

```
function visualize(json_response) {
var err = json_response['error'];
if (err) {
  $("#chart_div").html("<div class='alert'>" + err + "</div>");
  return;
}
var data = json_response['data'];
if (data.length == 0) {
  $("#chart_div").html("<div class='info'>No data received from this sensor!</div>");
  return;
}
// Convert Data to a step function
//var step_data = json2step(data);
var gdt = json2gdt(data);
var start;
if (data && data.length != 0) 
// TODO: fix this to actually compute the half of the time period
start = new Date(data[Math.floor(data.length / 2)][0] * 1000);
// draw our data in the widget
if (chart == null) {
    chart = new google.visualization.AnnotatedTimeLine(document.getElementById('chart_div'));
}
// TODO: compute tickness as a function of the time interval
chart.draw(gdt, {displayAnnotations: false, 
        displayZoomButtons: true, 
        thickness: 2,
        fill: 10,
                {% if net.ntype == "ztc" and sens.type == 2 %}
                  colors: ['#F00000'],
          scaleType: 'fixed', 
          min: 0,
          max: 1,
        {% else %}
                  scaleType: 'maximized', 
                {% end %}
        allowRedraw: true,
        displayExactValues: true,
        zoomStartTime: start}); 
```

}

最后这是一个 json 数据文件..

```
#master: sender-64bit-addr receiver-timestamp *;OPCODE;sender-timestamp;sender-seq-num;payload-length;payload#
#master: input file (re)opened at 4f708e9d
#master: child [pid=6884]  started  at 4f708eb1
0000000000000000 4f708eb2 *ZTCR;00000004;00000002;16;9755080000010000000000#
0000000000000000 4f708eb2 *ZTCR;00000004;00000003;10;9634050010000003#
0000000000000000 4f708eb2 *ZTCR;00000005;00000004;0A;97410200EA#
0000000000000000 4f708eb3 *ZTCR;00000005;00000005;10;9634050010000003# 
```

谁能帮我？我必须更改 highcharts 的数据格式，还是与 google graph 相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:30:51.927

`json`对象是这样的：

```
"{ 
'data' : [
              [1, 10], 
              [2, 11], 
              [3, 12]
 ]
 }" 
```

# emacs - 对于非投影仪文档，是否有等效于 Org-mode 的 b_ignoreheading ？

> ID：10295177
> 
> 赞同：9
> 
> 时间：2012-04-24T09:27:29.217
> 
> 标签：emacs, org-mode

使用 Org 模式创建[投影仪演示](http://orgmode.org/manual/Beamer-class-export.html#Beamer-class-export)时，可以设置标题的[属性](http://orgmode.org/manual/Properties-and-Columns.html#Properties-and-Columns)，以便不显示导出的标题，而只显示其内容。例如，以下

```
#+title: Test

#+options: toc:nil
#+latex_class: beamer
#+startup: beamer

#+BEAMER_FRAME_LEVEL: 2

* Ignored heading                                           :B_ignoreheading:
:PROPERTIES:
:BEAMER_env: ignoreheading
:END:
Text 
```

结果是一个只有“文本”而没有标题的框架。这种功能是否可用于非投影仪文档？也就是说，是否可以告诉 Org-mode 不导出标题而只导出其内容？例如，是否可以使 Org-mode 导出以下内容

```
#+title: Test

* Ignored heading
Text 
```

不导出标题“忽略的标题”而只导出“文本”？

如果我出口

```
#+title: Test

* 
Text 
```

（注意后面的空格`*`）到 LaTeX 我得到以下内容（我只包括了相关部分）：

```
\section{}

Text 
```

但这不是我想要的。我希望在导出中完全忽略标题，以便获得以下信息（同样我只包括相关部分）：

```
Text 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T20:07:59.077

您所要求的内容没有默认支持。但是，您可以使用预处理挂钩来获得类似的输出。这是 LaTeX 导出的示例：

```
;; backend aware export preprocess hook
(defun sa-org-export-preprocess-hook ()
  "My backend aware export preprocess hook."
  (save-excursion
    (when (eq org-export-current-backend 'latex)
      ;; ignoreheading tag for bibliographies and appendices
      (let* ((tag "ignoreheading"))
        (org-map-entries (lambda ()
                           (delete-region (point-at-bol) (point-at-eol)))
                         (concat ":" tag ":"))))))

(add-hook 'org-export-preprocess-hook 'sa-org-export-preprocess-hook) 
```

这是我的 org-mode 设置中的一个片段。[你可以在github](https://github.com/suvayu/.emacs.d/blob/master/org-mode-config.el#L234)上看到原文 。上面的代码将忽略带有 标记的标题`ignoreheading`，例如

```
* Heading 1
* Heading 2                           :ignoreheading:
+ Some text
+ an item 
```

导出为：

```
\section{Heading 1}
\label{sec-1}

\begin{itemize}
\item Some text
\item an item
\end{itemize} 
```

**警告：**此解决方案存在一个已知问题。当您在第一个标题上尝试此操作时，它不起作用。我不明白为什么会这样，希望有一天我有时间调查一下。

**需要注意的解决方法：**可以通过在 org 文件头之后使用这样的行来规避 LaTeX 导出的上述限制：

```
\include{preamble.tex} 
```

该`preamble.tex`文件可以包括摘要或致谢等部分。但是您应该注意，这会使您的 org 文件与导出后端非常紧密地联系在一起。例如，将相同的 org 文件导出到 HTML 将变得非常重要。

**注意：**对于新导出框架（Org 8.0 或更高版本）的类似设置，请使用以下内容：

```
(defun sa-ignore-headline (contents backend info)
  "Ignore headlines with tag `ignoreheading'."
  (when (and (org-export-derived-backend-p backend 'latex 'html 'ascii)
          (string-match "\\`.*ignoreheading.*\n"
                (downcase contents)))
    (replace-match "" nil nil contents)))

(add-to-list 'org-export-filter-headline-functions 'sa-ignore-headline) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-09T02:41:48.620

现在您可以使用`ox-extra`. 将以下内容添加到您的`init`文件中：

```
(require 'ox-extra)
(ox-extras-activate '(ignore-headlines)) 
```

然后任何带有标签的标题`ignore`都将被忽略，而它们的内容仍将被导出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-12T10:35:59.363

我在 Debian Jessie 上为 Emacs 24.4.1 和 Org-mode 8.2.10 找到了一个简单的解决方案，它在处理之前删除了标记的标题，因此它也删除了它们的结构节点，而不仅仅是文本。

```
;; ignore_heading tag in Org mode, based on the manual and func docs
(defun ignored-headlines-removal (backend)
  "Remove all headlines with tag ignore_heading in the current buffer.
     BACKEND is the export back-end being used, as a symbol."
  (org-map-entries
   (lambda () (delete-region (point) (progn (forward-line) (point))))
   "ignore_heading"))

(add-hook 'org-export-before-parsing-hook 'ignored-headlines-removal) 
```

我没有让它特定于导出后端，因为它不需要。我还使用`ignore_heading`标签来确保`ignoreheading`投影仪导出中的标签保留其功能。

这是我发现它的方法：

1.  我查看了组织手册[中高级配置部分的钩子文档。](http://orgmode.org/manual/Advanced-configuration.html)它包含一个忽略所有标题的钩子示例，这几乎是我需要的，但我必须找到一种方法来仅删除带有`ignore_heading`标签的标题。
2.  我查看了`org-map-entries`函数的文档（通过输入`C-h f org-map-entries RET`Emacs），发现它的可选第二个参数`MATCH`是一个议程样式的匹配字符串，它也可以匹配标签。

这次经历再次向我展示了 Emacs 确实是一个可扩展的自文档编辑器。RTFM FTW！

# android - 尝试替换空白空间时应用程序崩溃

> ID：10295179
> 
> 赞同：0
> 
> 时间：2012-04-24T09:27:48.187
> 
> 标签：android, android-edittext, whitespace, textchanged

要从文本中删除空格，我编写了以下代码。我的要求是删除文本之间的空格，同时从相同的 EditText 复制粘贴文本（键入“文本”复制并将其粘贴到相同的 EditText 中。文本应该是“文本文本”，但实际上它就像“文本文本”一样）。**但问题是当我将 textChangedListener 添加到我的Edittext**时它崩溃了。

```
 textForm.addTextChangedListener(new TextWatcher() {

     @Override
     public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
        // TODO Auto-generated method stub

         String str = textForm.getText().toString().replace(" ", ""); 
         textForm.setText(str);
     }

     @Override
     public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
        int arg3) {
        // TODO Auto-generated method stub

     }

     @Override
     public void afterTextChanged(Editable arg0) {
        // TODO Auto-generated method stub

    }
 }); 
```

logcat错误如下

```
04-24 14:55:12.660: E/AndroidRuntime(20780): java.lang.StackOverflowError
04-24 14:55:12.660: E/AndroidRuntime(20780):    at android.text.TextUtils.getChars(TextUtils.java:60) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:33:22.027

这是因为您在 onTextChanged 内执行 setText() 。因此，当您更改文本时，将调用 onTextChanged 并再次在 onTextChanged 内调用 setText()。所以 thr 文本再次更改，onTextChanged() 将再次被调用，此过程将继续直到堆栈溢出并导致 stackOverFlow 错误。希望你能明白...

setText() 之前的用户 removeTextChangedListener()。

检查这篇文章以获得完整的解决方案： [https ://stackoverflow.com/a/8600921/912851](https://stackoverflow.com/a/8600921/912851)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:36:51.057

您已经设法创建了一个无限循环:)

您更改文本，这会导致调用 onTextChanged 侦听器，更改文本的位置会导致在更改文本的位置调用 onTextChanged 侦听器.....

尝试这个

```
@Override
public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {

     if (textForm.getText().toString().contains(" ")){
         String str = textForm.getText().toString().replace(" ", ""); 
         textForm.setText(str);
     }
} 
```

或这个

```
@Override
public void afterTextChanged(Editable s) {
    String replacedText = s.toString().replaceAll(" ", "");
    if (!replacedText.equals(s.toString())) {
         textForm.setText(replacedText);   
    }
} 
```

可能有更优雅的方法可以做到这一点，两次获取 textview 文本效率低下，但你明白了..

# c# - 发送 XML 数据，T4 模板会是一个好方法吗？

> ID：10295183
> 
> 赞同：0
> 
> 时间：2012-04-24T09:27:59.313
> 
> 标签：c#, .net, xml, .net-4.0, t4

我想使用 HTTP POST 发送 XML 数据，如下所示
（实际上还有更多节点和参数）

```
<?xml version="1.0" encoding="UTF-8"?>
<Header><Header>
...........cutdown..................
<ID>[set a variable value here]</ID>
<Pass>[set a variable value here]</Pass>
<Footer></Footer> 
```

我想知道 T4 模板是否是实现它的一种好方法。
会吗？或者我应该只制作 xml 文件来读取它并在其中设置参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:49:58.823

T4 运行时模板将为此工作，但 Razor 模板引擎也是可重新托管的，并且是一个值得考虑的选择，用于从基于尖括号的模板生成输出。

# actionscript-3 - 通过 actionscript 编译 actionscript

> ID：10295184
> 
> 赞同：0
> 
> 时间：2012-04-24T09:28:03.850
> 
> 标签：actionscript-3, air, mxmlc

我正在创建一个需要能够编译 swf 文件的工具。接口最好必须是闪光/空气。

我对如何完成有一个粗略的想法，但有一些漏洞......

我的想法是这样的：

1.  用 actionscript 类写一个文件（我相信相当直截了当）
2.  通过 mxml 编译器编译文件（[http://www.senocular.com/flash/tutorials/as3withmxmlc/](http://www.senocular.com/flash/tutorials/as3withmxmlc/)）

自动化编译的最佳方法是什么，所以它是通过 actionscript 调用的？请指点我一个好的方向，你会得到我永恒的感激。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:02:19.147

你可以看看这个使用 AIR 构建的 actionscript 编辑器。
[http://code.google.com/p/minibuilder/](http://code.google.com/p/minibuilder/)

同一个人使用带有 java 的编译器构建了一个在线版本：http:
[//www.victordramba.com/? p=34](http://www.victordramba.com/?p=34)

我想这不是你想要的，只是注意到它；即时创建/更改 SWF 文件：
[https ://github.com/claus/as3swf](https://github.com/claus/as3swf)

# vb.net - 如何一次对 3 个不同的 Oracle 表执行 3 个命令（SQL 语句）？

> ID：10295190
> 
> 赞同：1
> 
> 时间：2012-04-24T09:28:19.797
> 
> 标签：vb.net, oracle

我正在使用 vb.net 2005 和 Oracle 10g 实现一个应用程序，我遇到了一个应该从 Oracle 中的三个不同表中选择/插入/更新/删除数据的功能。

所以想知道有没有办法分别准备好所有3条命令（SQL语句），然后一次性执行到oracle，这样我就可以保证全部执行成功或者全部失败执行，而且我可以获得更多的性能，这对我来说至关重要。

因此，我在 vb.net 中寻找一种语法，它可以帮助我一次执行多个 OracleCommand 到 oracle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:52:27.307

这可以用伪代码来回答

```
Dim cnn as OracleConnection
Dim tr as OracleTransaction 
Try
    cnn = new OracleConnection("your_connection_string")
    cnn.Open()
    tr = cnn.BeginTransaction(IsolationLevel.ReadCommitted)

    Dim cmd1 as OracleCommand = con.CreateCommand();
    Dim cmd2 as OracleCommand = con.CreateCommand();
    Dim cmd3 as OracleCommand = con.CreateCommand();

    cmd1.CommandText = "Your_Query_Text1"
    cmd2.CommandText = "Your_Query_Text2"
    cmd3.CommandText = "Your_Query_Text3"    

    cmd1.ExecuteNonQuery()
    cmd2.ExecuteNonQuery()
    cmd3.ExecuteNonQuery()

    tr.Commit()
    cnn.Close()
    cnn = Nothing
    tr = Nothing
Catch
   if tr <> Nothing then
       tr.Rollback()
   End if 
   If cnn <> Nothing Then 
       cnn.Close()
   End If
   cnn = Nothing
   tr = Nothing
End Try 
```

一个事务使数据库作为一个单元执行一系列动作。您标记调用连接的 BeginTransaction 方法的事务的开始。保证事务块内的操作要么全部发生，要么全部不发生。

如果一切顺利，您确认交易并且所有内容都保存在您的表中。如果发生某些事情中断了您的代码流（异常），您应该调用“回滚”来取消您在事务内部对数据库所做的一切。

# android - 如何在opengl android中绘制网格线

> ID：10295194
> 
> 赞同：1
> 
> 时间：2012-04-24T09:28:51.747
> 
> 标签：android, opengl-es

我使用以下函数绘制了多个 3d 立方体对象：

```
gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertexCount); 
```

现在，我也必须在上面画网格线。所以你能告诉我如何使用 opengl 在上面画这些网格线（框）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:42:29.373

如果我理解正确，你想画线吗？如果是这样，您所要做的就是像往常一样创建顶点并使用`GL10.GL_LINES`而不是`GL10.GL_TRIANGLES`（或 triangle_strip）来绘制它们。
您可以通过调用更改线条的宽度`glLineWidth()`

# c# - 需要软件架构的参考资料

> ID：10295195
> 
> 赞同：0
> 
> 时间：2012-04-24T09:28:52.340
> 
> 标签：c#, .net, sql, architecture

我必须开发一个满足以下要求的应用程序：

1.  它必须在 .NET（C#/Visual Studio/独立 windows 应用程序）中开发。

2.  第一个重要要求是图形数据的可视化和操作。在这里，我将暂时使用[“ZedGraph”](http://zedgraph.sourceforge.net/samples.html)。

3.  第二个要求是数据库连接。(SQL)

4.  该数据库必须可通过公司内部网访问。

5.  此外，必须实现一些算法功能，以便在将给定的图形数据保存到数据库之前对其进行预处理。

当然，这些并不是详细的所有要求，但它们简要描述了应用程序的主要目标。

基本上我可以单独开发所有功能，在 Visual Studio 的设计器中拖放 GUI，将功能分配给相应的 GUI 元素等。但这在某种程度上感觉不对。特别是出于以下原因：

*   我想让应用程序尽可能地**可扩展**。

*   它也应该是可**维护的**

*   我可以有**更多的原因**，但这是我首先想到的两个......

所以我的问题是，是否有人可以为我提供适合此类项目**的软件架构参考。**尤其是**书籍**很重要，因为申请是我论文的一部分，所以每一个方法和决定都必须有参考资料。

提前致谢，BC++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:31:27.183

Martin Fowler[的企业应用架构模式。](https://rads.stackoverflow.com/amzn/click/com/0321127420)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T10:04:48.433

Microsoft 应用程序架构指南

[http://www.microsoft.com/download/en/details.aspx?id=16236](http://www.microsoft.com/download/en/details.aspx?id=16236)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T07:43:08.470

我肯定会选择[Code Complete](https://rads.stackoverflow.com/amzn/click/com/0735619670)，它与任何编程语言都没有特别的关系，而是讨论好的和实践的，完全推荐

# javascript - 将 JavaScript 库添加到 Sonar

> ID：10295198
> 
> 赞同：2
> 
> 时间：2012-04-24T09:29:06.893
> 
> 标签：javascript, html, sonarqube

有没有办法将 JavaScript 库添加到 Sonar？我发现我们可以在“常规设置”选项中定义未定义的变量，但找不到方法告诉 Sonar 我使用了特定的库，如 Backbone.js、jQuery 等。

我使用了 Sonar JavaScript 插件，其他一切都很完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:11:16.423

看起来[最新版本的 JavaScript 插件将支持 JQuery 和 NodeJS：](http://sonar.15.n6.nabble.com/Sonar-JavaScript-Plugin-for-jQuery-and-Node-JS-code-validation-tp4998914p4998963.html)

> 新版 JavaScript 插件将能够检查 jQuery 和 NodeJS 项目

**编辑：**我正在运行 JavaScript 插件的 0.4 版。[1.0 版](http://docs.codehaus.org/display/SONAR/JavaScript+Plugin)是当前版本，它似乎至少支持 JQuery。

# css - Silverlight Css 样式 CollapseMargins

> ID：10295205
> 
> 赞同：0
> 
> 时间：2012-04-24T09:29:47.877
> 
> 标签：css, silverlight, styles, styling, attached-properties

我希望能够在 Silverlight 中折叠边距（在每个控件上手动设置边距不是很好）。我需要能够控制何时将样式应用于可视化树，并检查 2 个控件的边距是否接触并删除其中一个。这可能吗？我是否必须对所有控件进行子类化并覆盖 OnApplyTemplate？

或者，我至少能够对项目控件（列表框、网格等）中的第一个或最后一个项目应用不同的样式。我可以有一个附加属性来指定第一个/最后一个项目的样式，但我不知道何时处理这些样式。

帮助表示赞赏！

# java - 通过 HTTP 来自某些图像的 FileNotFoundException - Java

> ID：10295208
> 
> 赞同：0
> 
> 时间：2012-04-24T09:30:03.260
> 
> 标签：java, http, filenotfoundexception, java-io

在通过 HTTP 处理图像列表的类中，一个图像会引发 FNFE。第一个假设是该文件在目的地不存在 - 但它确实存在。该图像可以在浏览器中访问，也可以通过在同一台机器上运行的另一个 Java 应用程序（我编写的命令行测试用例）访问？

这是堆栈跟踪：

```
23-Apr-2012 17:23:57 uk.co.example.ExampleClass setImageUrl
WARNING: Exception setting image Url to http://images.example.co.uk/FPA-Midlands/MLO100316_01.jpg
java.io.FileNotFoundException: http://images.example.co.uk/FPA-Midlands/MLO100316_01.jpg
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1311)
    at uk.co.example.ExampleClass.importFileFromUrl(ExampleClass.java:460) 
```

这是原始代码：

```
private String importFileFromUrl(String imageUrl) throws IOException, CMException {
    InputStream is = null;
    String name = null;
    if (imageUrl != null && imageUrl.startsWith("http")) {
        URL url = new URL(imageUrl);
        URLConnection urlc = url.openConnection();
        is = urlc.getInputStream();
        name = url.getFile();
        name = name.substring(name.lastIndexOf('/') + 1);
    } else if (StringUtils.isNotBlank(imageUrl)){
        File f = new File (imageUrl);
        name = f.getName();
        is = new FileInputStream(f);
    }
    if (name != null && is != null) {
        importFile(name, is);
    }
    return name;
} 
```

因为`sun.net.www.protocol.http.HttpURLConnection`该类出现在堆栈中，我想知道这是否是类加载器问题？我没有明确导入那个包 - 它不应该使用`java.net`等效的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:35:45.083

您使用的是 Sun/Oracle JDK 还是 Open JDK？您能否到控制台并在此处插入“java -version”的输出？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:36:56.560

我在调用周围添加了一个 try/catch 块`getInputStream()`：

```
try {
    is = urlc.getInputStream();
} catch(FileNotFoundException fnfe){
    is = ((HttpURLConnection) urlc).getErrorStream();
    LOG.log(Level.WARNING, "Exception streaming image: \n" + IOUtils.toString(is));
    throw fnfe;
} 
```

从日志输出中，现在很明显服务器正在响应 404 响应代码：

```
25-Apr-2012 10:46:43 uk.co.example.ExampleClass importFileFromUrl
WARNING: Exception streaming image: 
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
~~~ snip ~~~
<h2>HTTP Error 404 - File or directory not found.<br>Internet Information Services (IIS)</h2>
~~~ snip ~~~ 
```

我以前不知道该`getErrorStream()`方法 - 我假设任何页面响应都会被`getInputStream()`. 我发现令人困惑/不直观的另一个方面是**HttpURLConnection 类为 HTTP 404 响应抛出 FNFE**。

对于其他错误，响应代码更加明显：

```
13-Apr-2012 15:40:43 uk.co.example.ExampleClass setImageUrl
WARNING: Exception setting property image Url to http://images.example.co.uk/FPA-Midlands/MLO100316_01.jpg
java.io.IOException: Server returned HTTP response code: 403 for URL: http://images.example.co.uk/FPA-Midlands/MLO100316_01.jpg
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436) 
```

进行上述更改后，该问题未再次出现。我能解释的唯一方法是浏览器一定是在缓存图像，或者这是一个间歇性问题。无论如何，现在可以使用额外的日志记录，将来任何问题都应该很容易解决。

# android - 如果您被邀请共享 Google Play Android 开发者控制台，您是否也需要付费？

> ID：10295210
> 
> 赞同：7
> 
> 时间：2012-04-24T09:30:15.300
> 
> 标签：android, google-account

谷歌刚刚开放在 android 上共享一个开发者控制台。

但是如果账户所有者邀请某人加入开发者控制台，这个人是否必须支付 25 美元并注册为开发者才能访问共享开发者控制台？

到目前为止，我无法在文档中找到答案

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T09:42:32.207

不，您为开发者帐户支付 25 美元，而不是为个人支付。您可以免费邀请其他人加入您的开发者控制台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:35:42.993

我不确定但是

> 帐户所有者可以通过电子邮件向任何人发送邀请；当他们接受时，他们需要使用 Google 帐户登录。

听起来其他人只需要一个谷歌帐户，而不是一个付费市场帐户。

# python - python中的字符串

> ID：10295212
> 
> 赞同：-3
> 
> 时间：2012-04-24T09:30:21.887
> 
> 标签：python, string, variables, input

我有问题。我必须编写一个程序来询问名字并保存它，然后它必须询问姓氏并做同样的事情，然后它必须在两行中写下名字和姓氏，如下所示：

```
 enter first name:
     x
    enter last name:
     y
     x
     y 
```

对于第一部分，我使用 raw_input 并将数据存储在 firstName 和 lastName 中，但我现在真的不知道如何到达最后一部分。也许写这两个变量会有所帮助，但我不认为它要求来自意大利的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:33:49.453

只需简单地打印字符串。

```
firstStr = 'hello'
secondStr = 'world'
print my_str
print secondStr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:32:52.603

请参阅`print`Python 内置。并真正开始阅读有关该语言的*任何*参考文本。

# ios - 在 iOS 和 iPhone 上，如何绘制位图并在 drawRect 中显示？

> ID：10295220
> 
> 赞同：0
> 
> 时间：2012-04-24T09:30:59.283
> 
> 标签：ios, cocoa-touch, uikit, core-graphics

据说对于单视图应用程序，将当前主视图的内容保留在位图中是一种编程选择，我们在此位图上绘制额外的东西，以及何时做`drawRect`（当被 iOS 调用时），然后我们只显示位图。（而不是每次都重新绘制 50,000 个东西`drawRect`。只需将它们绘制到位图上一次）。

有人知道该怎么做吗？确切的代码将不胜感激（可能需要 2 个不同文件的代码，一个 for`ViewController.m`和一个 for `MainView.m`），或者可以指向示例代码片段（请不要花哨，只是可以做到这一点的最简单易懂的代码）。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:15:57.163

如上[一个问题](https://stackoverflow.com/q/4334233/30461)中所述，您需要：

1.  创建图像上下文。
2.  画进去。
3.  从中获取图像。
4.  弹出它。

# jquery - 在 jQuery 上设置可见性的可编程功能是什么？

> ID：10295221
> 
> 赞同：1
> 
> 时间：2012-04-24T09:31:00.667
> 
> 标签：jquery

我尝试了这段代码，可见是函数的参数：

```
$('#something').show(isVisible); 
```

但这不起作用，必须评估：

```
if (isVisible) 
    $('#something').show();
else
    $('#something').hide(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:31:50.780

```
$('#something').toggle(isVisible); 
```

[文档](http://api.jquery.com/toggle/)：

`.toggle( showOrHide )`

> showOrHide 一个布尔值，指示是否显示或隐藏元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:36:37.237

```
var arr = ['show', 'hide'];
$('#something')[arr[isVisible & 1]](); 
```

# android - 如何在Itemclicklistener上创建listview

> ID：10295226
> 
> 赞同：18
> 
> 时间：2012-04-24T09:31:25.100
> 
> 标签：android, listview, onitemclicklistener

我想创建列表视图。我从 JSON 中得到了值。在这里，我将 json 中的值放入 listview，但我无法获得 onItemclickListener 方法。为什么会这样，我不知道，请帮我编码，如下所示。

Logcat 没有显示任何内容。

谢谢。

```
<ListView
    android:id="@+id/contests_listView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_below="@+id/header"
    android:focusable="true">
</ListView> 
```

活动.java

```
public class Activites_Activity extends CheerfoolznativeActivity {

private ListView contests_listView;
private ProgressBar pgb;
ActivitiesBean bean;
ArrayList<Object> listActivities;
ListAdapter adapter;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_listview);
    setHeader("Activites");

    contests_listView = (ListView) findViewById(R.id.contests_listView);
    pgb = (ProgressBar) findViewById(R.id.contests_progressBar);
    listActivities = new ArrayList<Object>();

    new FetchActivitesTask().execute();

}

public class FetchActivitesTask extends AsyncTask<Void, Void, Void> {

    int i =0;
    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
         pgb.setVisibility(View.VISIBLE);
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        String url = "my json URL";
        String strResponse = util.makeWebCall(url);

        try {

            //my json logic here        
        }
        catch (JSONException e) {

            e.printStackTrace();

        }

        return null;
    }

    @Override
    public void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        pgb.setVisibility(View.GONE);
        displayAdapter();
    }
}

public void displayAdapter()
{
    adapter = new ListAdapter(this, listActivities);
    contests_listView.setAdapter(adapter);
    contests_listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long id) {

            // Toast.makeText(getApplicationContext(),"Title => "+items.get(position), Toast.LENGTH_SHORT).show();

            System.out.println("=========== Click");
            bean = (ActivitiesBean) adapter.getItem(position);

            Intent in1 = new Intent(Activites_Activity.this, Activity_display.class);
            in1.putExtra("ActivityObject", bean);
            startActivity(in1);
        }
    });

}
} 
```

我也用这个

```
contests_listView.setItemsCanFocus(true); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-24T09:58:22.613

试试这个 ：

```
contests_listView.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
        String item = (String) contests_listView.getItemAtPosition(position);
        Toast.makeText(this,"You selected : " + item,Toast.LENGTH_SHORT).show();                
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:40:38.793

试试这个代码：

```
protected void onListItemClick(ListView l, View v, int position, long id) {

super.onListItemClick(l, v, position, id);

Toast.makeText(this, "message", Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T11:31:09.687

用这个：

```
 contests_listView.setOnItemClickListener(new AdapaterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long id) {

            Intent in1 = new Intent(Activites_Activity.this, Activity_display.class);

            startActivity(in1);
        }
    }); 
```

# mysql - 将Mysql查询的结果导出到excel？

> ID：10295228
> 
> 赞同：69
> 
> 时间：2012-04-24T09:31:30.203
> 
> 标签：mysql, excel, export

我的要求是存储查询的全部结果

```
SELECT * FROM document 
WHERE documentid IN (SELECT * FROM TaskResult WHERE taskResult = 2429) 
```

到 Excel 文件。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-04-24T11:58:05.590

实现此目的的典型方法是导出为 CSV，然后将 CSV 加载到 Excel 中。
您可以使用任何 MySQL 命令行工具通过`INTO OUTFILE`在语句中包含子句来执行此操作`SELECT`：

```
SELECT ... FROM ... WHERE ... 
INTO OUTFILE 'file.csv'
FIELDS TERMINATED BY ',' 
```

有关详细选项，请参阅[此链接](http://dev.mysql.com/doc/refman/5.5/en/select-into.html)。

或者，您可以使用 mysqldump 使用 --tab 选项将转储存储为分隔值格式，请参阅[此链接。](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html#option_mysqldump_tab)

```
mysqldump -u<user> -p<password> -h<host> --where=jtaskResult=2429 --tab=<file.csv> <database> TaskResult 
```

提示：如果您没有指定绝对路径而是使用类似`INTO OUTFILE 'output.csv'`or的东西`INTO OUTFILE './output.csv'`，它会将输出文件存储到由`show variables like 'datadir';`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-17T13:04:27.240

如果您有连接或关闭位置，则可以在查询结束后编写它的好例子：

```
 select 'idPago','fecha','lead','idAlumno','idTipoPago','idGpo'
 union all
(select id_control_pagos, fecha, lead, id_alumno, id_concepto_pago, id_Gpo,id_Taller,
id_docente, Pagoimporte, NoFactura, FacturaImporte, Mensualidad_No, FormaPago,
Observaciones from control_pagos
into outfile 'c:\\data.csv' 
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-28T07:22:33.333

使用以下查询：

```
 SELECT * FROM document INTO OUTFILE 'c:/order-1.csv' FIELDS TERMINATED BY ','  
 ENCLOSED BY '"' LINES TERMINATED BY '\n'; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-25T01:39:02.813

就我而言，我需要将 sql 结果转储到客户端的文件中。这是从数据库中卸载数据的最典型用例。在许多情况下，您无权访问服务器或不想将结果写入服务器。

```
mysql -h hostname -u username -ppwd -e "mysql simple sql statement that last for less than a line" DATABASE_NAME > outputfile_on_the.client 
```

当您有一个持续多行的复杂查询时，就会出现问题。您不能使用命令行轻松地将结果转储到文件中。在这种情况下，您可以将复杂的查询放入一个文件中，例如 longquery_file.sql，然后执行该命令。

```
mysql -h hn -u un -ppwd < longquery_file.sql DBNAME > output.txt 
```

这对我有用。我唯一的困难是制表符；有时我用于 group_cancat(foo SEPARATOR 0x09) 将在输出文件中写为 '\t'。0x09 字符是 ASCII 制表符。但是这个问题并不是我们将 sql 结果转储到文件的方式所特有的。它可能与我的寻呼机有关。当您找到此问题的答案时，请告诉我。我会更新这篇文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-22T15:30:06.187

我用来将mysql输出导出到文件的快速而肮脏的方法是

> $ mysql <数据库名称> --tee=<文件路径>

然后`<file_path>`在我想要的任何地方使用导出的输出（您可以在 中找到）。

请注意，这是避免使用该`secure-file-priv`选项运行数据库的唯一方法，这会阻止使用`INTO OUTFILE`先前答案中的建议：

```
ERROR 1290 (HY000): The MySQL server is running with the --secure-file-priv option so it cannot execute this statement 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-22T14:25:04.497

就我而言，`INTO OUTFILE`由于 MySQL 用户与登录用户不同，因此无法正常工作。另外，我不能使用内联变体，因为我的查询很大。

我最终使用了它，它变得容易多了。这可能不支持 CSV 或任一输出，但如果您需要按原样输出，这将起作用。

```
mysql> tee /tmp/my.out; 
```

来源：[https ://alvinalexander.com/mysql/how-save-output-mysql-query-file/](https://alvinalexander.com/mysql/how-save-output-mysql-query-file/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-06T14:20:03.460

### 对于`SHOW DATABASES`和`SHOW TABLES`

这**`INTO OUTFILE`**件事不会为*`SHOW TABLES`*和*`SHOW DATABASES`*查询工作。

**在这种情况下，您可以这样做：**

1.  **`SHOW DATABASES`**

```
mysql -u <user> -p <password> -e 'SHOW DATABASES' > <path_to_file> 
```

2.  **`SHOW TABLES`**

```
mysql -u <user> -p <password> -e 'SHOW TABLES FROM <db_name>' > <path_to_file> 
```

> **提示：**国旗`-e`代表`execute`

*参考：*

*   [显示数据库/表 INTO OUTFILE](https://stackoverflow.com/a/33620983/10204932)
*   [MYSQL --执行=语句](https://dev.mysql.com/doc/refman/5.7/en/mysql-command-options.html#option_mysql_execute)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-02-25T18:43:28.407

这是一个老问题，但它仍然是 Google 上的首批结果之一。最快的方法是使用 ODBC 查询或 MySQL For Excel 将 MySQL 直接链接到 Excel。后者在对 OP 的评论中被提及，但我觉得它确实应该得到自己的答案，因为导出到 CSV 并不是实现这一目标的最有效方法。

[ODBC 查询](https://dev.mysql.com/doc/connector-odbc/en/connector-odbc-examples-tools-with-wordexcel.html)- 设置起来有点复杂，但更灵活。例如，MySQL For Excel 加载项不允许您`WHERE`在查询表达式中使用子句。此方法的灵活性还允许您以更复杂的方式使用数据。

[MySQL For Excel](https://www.mysql.com/why-mysql/windows/excel/) - 如果您不需要对查询执行任何复杂的操作，或者如果您需要快速轻松地完成某些事情，请使用此加载项。您可以在数据库中创建视图以解决某些查询限制。

# android - 相机开启时在 SurfaceView 上绘图

> ID：10295229
> 
> 赞同：2
> 
> 时间：2012-04-24T09:31:32.527
> 
> 标签：android, draw

我有以下用于访问相机预览的代码我想在预览图片的上角显示一些文本我该怎么做？

```
package com.gps.ro.capturetest;

import java.io.IOException;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.content.pm.PackageManager;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PixelFormat;
import android.hardware.Camera;
import android.hardware.Camera.CameraInfo;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.ShutterCallback;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;

public class CaptureTestActivity extends Activity implements SurfaceHolder.Callback {
         SurfaceHolder mSurfaceHolder;
        SurfaceView mSurfaceView;
        public Camera mCamera;
        boolean mPreviewRunning;
        Canvas test;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().setFormat(PixelFormat.TRANSLUCENT);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                 WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        setContentView(R.layout.main);
        mSurfaceView = (SurfaceView) findViewById(R.id.camera_surface);
        mSurfaceHolder = mSurfaceView.getHolder();
        mSurfaceHolder.addCallback(this);
        mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    }

    public void surfaceChanged(SurfaceHolder arg0, int arg1, int h, int w) {
        // TODO Auto-generated method stub
        if (mPreviewRunning) {
                            mCamera.stopPreview();
                        }
                        Camera.Parameters p = mCamera.getParameters();
                        mCamera.setDisplayOrientation(90);
                        p.setPreviewSize(h, w);
                        p.set("orientation", "portrait");

                        //p.setPreviewSize(w, h);
                        mCamera.setParameters(p);
                        try {
                            mCamera.setPreviewDisplay(arg0);

                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                        mCamera.startPreview();
                        mPreviewRunning = true;

    }

    public void surfaceCreated(SurfaceHolder arg0) {
        // TODO Auto-generated method stub
        mCamera = Camera.open();
    }

    public void surfaceDestroyed(SurfaceHolder arg0) {
        // TODO Auto-generated method stub
                mCamera.stopPreview();
                mPreviewRunning = false;
                mCamera.release();
    }

    public void Trigger(View V)
    {
        ShutterCallback shutterCallback = new ShutterCallback() {
            public void onShutter() {
                Log.d("DHA", "onShutter'd");
            }
        };

        PictureCallback rawCallback = new PictureCallback() {
            public void onPictureTaken(byte[] data, Camera camera) {
                Log.d("DHA", "onPictureTaken - raw");
            }

        };
        Log.w("DHA", "Intra aici!");
        mCamera.takePicture(shutterCallback, rawCallback, null);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:23:46.173

在表面视图之上创建另一个视图，并在该视图中绘制您的装饰。例如，您可以使用 FrameLayout 并在其中使用 SurfaceView，然后在预览顶部显示您想要的视图。

# c++ - CreateThread() c++中ThreadId的重要性

> ID：10295232
> 
> 赞同：0
> 
> 时间：2012-04-24T09:31:37.830
> 
> 标签：c++, winapi, createthread

我对 C++ 中的 CreateThread() 函数有疑问。

这个函数中threadId参数的重要性是什么？

我们是否能够使用相同的 threadId 创建相同的线程（相同的名称）。像

```
 DWORD threadId = 0;
     CreateThread(NULL, 0, Thread1, NULL,0, &threadId);
     CreateThread(NULL, 0, Thread1, NULL,0, &threadId); 
```

这种方式可行吗？threadId 中包含的值是什么？通过上述编码，第二个线程创建是否会覆盖第一个线程的 threadId 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:56:22.643

如果您握住手柄，则不需要`threadId`操纵线程；但是，您可以选择保留 ID，然后使用[`OpenThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684335%28v=vs.85%29.aspx). （这也适用于进程之间，这是您可以通过在那里设置 ID 将线程句柄“转移”到不同进程的唯一方法`OpenThread`）。

您还可以使用该 ID 将作业分配给您的线程（尽管您可以只制作自己的标识符）。

最后但并非最不重要的一点是，有些时候您*确实*需要线程 ID，例如在调用[`PostThreadMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644946%28v=vs.85%29.aspx)函数时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:37:09.073

> 这个函数中threadId参数的重要性是什么？

如果你产生多个线程，你如何区分不同的线程？此 id 是允许您检查和处理来自各个线程的信息的句柄。

> 这种方式可行吗？

这是可能的，但在这个特定示例中，您失去了对您首先创建的线程的一个访问点。

# ruby-on-rails - 用于选择多个记录并在不存在时创建新关联记录的复选框

> ID：10295235
> 
> 赞同：0
> 
> 时间：2012-04-24T09:31:51.770
> 
> 标签：ruby-on-rails

我有以下模型（用户、评论和期间）。我想要做的是在**用户索引视图**中有复选框，我可以在其中选择多个用户（或全部）并单击“创建评论”按钮，单击时它将：

1.  检查选定的用户是否有**评论**记录，如果没有，则为所有选定的用户创建一条。
2.  此外，这还将使用 period_id 为“1”更新评论记录

我不确定如何解决这个问题，非常感谢任何帮助。

先感谢您。

用户.rb

```
class User < ActiveRecord::Base
  belongs_to :admin
  has_many :reviews
  has_many :periods, :through => :reviews

  devise :database_authenticatable, :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me,
                  :username, :first_name, :last_name, :role
end 
```

评论.rb

```
class Review < ActiveRecord::Base
  belongs_to :user
  belongs_to :period

  attr_accessible :employee_comments, :employee_final_comments, :manager_comments, :period_id, :rating, :review_status, :user_id
end 
```

周期.rb

```
class Period < ActiveRecord::Base
  belongs_to :admin
  has_many :reviews
  has_many :users, :through => :reviews

  attr_accessible :admin_id, :end_date, :period_name, :start_date, :active
end 
```

**更新 1**

我已将以下几行添加到我的 index.html.erb 中（基于 railscast [http://railscasts.com/episodes/165-edit-multiple](http://railscasts.com/episodes/165-edit-multiple)），但得到一个空白列表。如果我删除 form_tag 行，我可以看到带有复选框的用户列表。

应用程序/视图/用户/index.html.erb

```
<% form_tag create_multiple_users_path do %>
  .
  .
  .
  <th><%= check_box_tag "users_ids[]", user.id %></th>
<% end %>
  .
  .
  .
<%= submit_tag "Create Reviews for selected users" %> 
```

路线.rb

```
resources :users do
  collection do
    post 'create_multiple'
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:43:41.750

要使用您应该更改的表单获取用户列表

```
<% form_tag create_multiple_users_path do %> 
```

为了

```
 <%= form_tag create_multiple_users_path do %> 
```

# php - 变量在应该可见时未定义（已定义）

> ID：10295236
> 
> 赞同：1
> 
> 时间：2012-04-24T09:31:52.480
> 
> 标签：php, database, variables, undefined, connect

当我尝试在我的代码中连接到我的数据库时，我遇到了一些问题，我创建了一个变量，该变量将用于通过函数将我连接到我的数据库中。

问题是我理解的函数无法识别代码中的变量，并说它是未定义的，我不明白为什么它会在我的逻辑中抱怨它不应该......

代码：

```
 <?php
class database{
    private $connected = FALSE;
    public function connect(){
        if(!$connected){
            mysql_connect('url', 'user', 'pw');
            @mysql_select_db('db_11765278') or die('Database not found');
            $connected = TRUE;
        }
    }
    public function close(){
        if($connected){
            mysql_close();
            $connected = FALSE;
        }
    }
    public function query($sqlQuery){
        if(!$connected){
            database::connect();
        }
        $result = mysql_query("$sqlQuery");
        if($connected){
            database::close();
        }
        return $result;     
    }
    public function megaQuery($sqlQuery){
        $result = mysql_query("$sqlQuery");
        return $result;
    }
}

?> 
```

问候阿列克谢因！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:33:39.517

`$this->connected`你没有像你应该做的那样引用类属性。`$connect`指的是局部变量，而不是属性。

为什么不[更新一下你的知识](http://www.php.net/manual/en/language.oop5.properties.php)呢？

# c# - c# 复制文件到指定路径

> ID：10295237
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:32:01.387
> 
> 标签：c#, listbox, clipboard

我将我的文件发送到剪贴板，我想复制所有文件指定路径，例如一键单击桌面，文件，例如但我有问题我不从列表框中获取所有文件，我不复制指定路径我如何复制所有文件……

```
public partial class Form1 : Form
{
    [DllImport("User32.dll", CharSet = CharSet.Auto)]
    public static extern IntPtr SetClipboardViewer(IntPtr hWnd);
    [DllImport("User32.dll", CharSet = CharSet.Auto)]
    public static extern bool ChangeClipboardChain(IntPtr hWndRemove, IntPtr hWndNewNext);
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern int SendMessage(IntPtr hwnd, int wMsg, IntPtr wParam, IntPtr lParam);

    IntPtr SonrakiClipboardOgesi;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        SonrakiClipboardOgesi = SetClipboardViewer(this.Handle);
    }

    protected override void WndProc(ref Message m)
    {
        int WM_DRAWCLIPBOARD = 0x0308;
        int WM_CHANGECBCHAIN = 0x030D;

        if (m.Msg == WM_DRAWCLIPBOARD)
        {
            ClipboardRead();
            SendMessage(SonrakiClipboardOgesi, m.Msg, m.WParam, m.LParam);
        }
        else if (m.Msg == WM_CHANGECBCHAIN) 
        {
            if (m.WParam == SonrakiClipboardOgesi)
            {
                SonrakiClipboardOgesi = m.LParam;
            }
            else
            {
                SendMessage(SonrakiClipboardOgesi, m.Msg, m.WParam, m.LParam);
            }
        }

        base.WndProc(ref m);
    }

    private void ClipboardRead()
    {
        StringCollection col = new StringCollection();
        col = Clipboard.GetFileDropList();
        for (int i = 0; i < col.Count; i++)
        {
            listBox1.Items.Add(col[i]);
        }
        listBox1.SelectionMode = SelectionMode.MultiSimple;
        for (int i = 0; i < listBox1.Items.Count; i++)
        {
            listBox1.SetSelected(i, true);
        }
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        ChangeClipboardChain(this.Handle, SonrakiClipboardOgesi);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        // ı make a with click copy within listbox files specified path 
        //What code I should write here 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:00:13.057

您尝试做的事情有点多余，因为如果您有按钮单击事件，则不需要收听剪贴板...

```
if (Clipboard.ContainsFileDropList())
{
     // Get a list of files
     System.Collections.Specialized.StringCollection returnList = Clipboard.GetFileDropList();
     // For each file in the list
     foreach(string s in returnlist)
     {
         // split the file path and get the last node of the path which should be file.ext
         String[] sa = s.Split('\');
         string sourceFile = s;
         // set the file target
         string targetFile = Environment.GetFolderPath(Environment.SpecialFolder.Desktop))+sa[sa.length-1];
         // Get a list of files
         System.IO.File.Copy(sourceFile, destFile, true); // finally copy the file
     }
 } 
```

您可能需要进行一些调试，因为我手边没有 Visual Studio，而且我还没有检查它是否编译...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:01:06.850

你已经问过这个问题，但我找不到任何地方。无论如何，这里是如何将文件从列表框复制到桌面的代码：

```
foreach (string item in listBox1.Items)
{
    FileInfo fileInfo = new FileInfo(item);
    File.Copy(item,Path.Combine(
          Environment.GetFolderPath(Environment.SpecialFolder.Desktop),
          fileInfo.Name), true);
 } 
```

# java - 将字符串转换为数组或浮点数列表

> ID：10295243
> 
> 赞同：3
> 
> 时间：2012-04-24T09:32:46.777
> 
> 标签：java, arrays, string, list

我有一串由 # 分隔的十四个值

0.1#5.338747#0.0#....等等

我想将每个值从字符串转换为浮点数或将双精度值转换为小数点后 3 位。我可以在很长的时间内完成大部分工作......

```
str = "0.1#0.2#0.3#0.4";
String[] results;
results = str.split("#");
float res1 = new Float(results[0]); 
```

但我不确定将每个浮点数精确到小数点后 3 位的最佳方法。我也更喜欢在 for 循环之类的简洁的东西中执行此操作，但无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:40:53.870

四舍五入到小数点后三位...

```
 String[] parts = input.split("#");
    float[] numbers = new float[parts.length];
    for (int i = 0; i < parts.length; ++i) {
        float number = Float.parseFloat(parts[i]);
        float rounded = (int) Math.round(number * 1000) / 1000f;
        numbers[i] = rounded;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:37:20.060

```
String str = "0.1#0.2#0.3#0.4";
String[] results = str.split("#");
float fResult[] = new float[results.length()];
for(int i = 0; i < results.length(); i++) {
    fResult[i] = Float.parseFloat(String.format("%.3f",results[i]));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T09:38:37.720

你可以用[番石榴](http://code.google.com/p/guava-libraries/)做到这一点：

```
final String str = "0.1#0.2#0.3#0.4";
final Iterable<Float> floats = Iterables.transform(Splitter.on("#").split(str), new Function<String, Float>() {
  public Float apply(final String src) {
    return Float.valueOf(src);
  }
}); 
```

或使用 Java API：

```
final String str = "0.1#0.2#0.3#0.4";
final StringTokenizer strTokenizer = new StringTokenizer(str, "#");

final List<Float> floats = new ArrayList<Float>();
while (strTokenizer.hasMoreTokens()) {
    floats.add(Float.valueOf(strTokenizer.nextToken()));
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T09:43:49.933

希望这可以帮助...

```
String input = "0.1#5.338747#0.0";
String[] splittedValues = input.split("#");
List<Float> convertedValues = new ArrayList<Float>();
for (String value : splittedValues) {
    convertedValues.add(new BigDecimal(value).setScale(3, BigDecimal.ROUND_CEILING).floatValue());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T09:43:01.193

考虑到小数点后 3 位，试试这个：

```
public class Test {
    public static void main(String[] args) {
        String str = "0.12345#0.2#0.3#0.4";
        String[] results;
        results = str.split("#");
        float res1 = new Float(results[0]);
        System.out.println("res = " + res1);
        // cut to right accuracy
        res1 = ((int) (res1 * 1000)) / 1000f;
        System.out.println("res = " + res1);
    }
} 
```

# c# - 动态数据网格的标题和绑定

> ID：10295244
> 
> 赞同：0
> 
> 时间：2012-04-24T09:32:51.933
> 
> 标签：c#, wpf, gridview, datagrid

问题：

我有一个具有日期、名称和值属性的对象列表。Name 和 Date 属性可以不同或相同。

```
orange  2012-01-01  1
orange  2013-01-01  0 
```

我想创建一个带有标题（不同的日期）和行的 GridView

```
 Name   2012-01-01   2013-01-01
orange       1            0 
```

如您所见，对象没有像“2012-01-01”这样的属性，所以简单的绑定无济于事。

**问题**

如何使用列名创建绑定？

这我想用 XAML 或转换器来做，而不使用 UserControl 的事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:01:29.263

本质上，您需要做的（如您所见）是创建具有动态属性（即在运行时填充的属性）的对象列表。转换本身是 Date 的轴心，具有跨值的总和 (?)，您可以在转换器中使用 GroupBy Linq 查询执行该转换。

现在是棘手的部分。看看这个答案：

[数据绑定动态数据](https://stackoverflow.com/questions/882214/data-binding-dynamic-data)

您需要实现 ICustomTypeDescriptor 来实现动态属性。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:40:30.927

获取您的对象列表 -**根据您的条件创建一个新的对象列表**。然后只需将新列表作为 itemssource 放入 datagrid/itemscontrol。

# android - Android 和 Google Play：几个同名的应用程序？

> ID：10295249
> 
> 赞同：1
> 
> 时间：2012-04-24T09:33:15.787
> 
> 标签：android, branding, google-play

我在 Google Play 上发布我的应用时遇到了以前从未发生过的问题。基本上，我有 3 个基于相同代码的应用程序。它们每个都有不同的默认语言（英语、西班牙语和法语），但支持所有语言（超过 10 种）。

当我尝试发布我的英文应用程序的更新版本时，Google Play 显示一个错误，指出此应用程序的英文名称已被西班牙文和法文应用程序使用。我应该在我的应用程序中删除一些支持的语言吗？

我必须保留这 3 个应用程序，因为我创建了 3 个不同的品牌，因此每个品牌一个应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:43:24.050

我怀疑你使用类似的包名？

两个不同的应用程序在 Market 上**不能具有相同的包名称**，也不应允许在您的设备上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:30:14.603

您是否在上传更新之前更改了应用程序的**版本号？**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T12:32:22.963

当有一个我之前发布的同名应用程序时，我遇到了这个问题。我取消发布了免费的原始应用程序，然后上传了新应用程序，问题得到解决。

但是现在我要创建一个新应用程序，还有其他一些开发人员的同名应用程序。当我尝试创建具有相同名称的应用程序时，我没有收到任何错误，但我想知道是否应该这样做。

# velocity - 速度引擎（过时？）

> ID：10295251
> 
> 赞同：0
> 
> 时间：2012-04-24T09:33:18.313
> 
> 标签：velocity

[我看到Velocity](http://velocity.apache.org/)框架近 2 年没有更新？

那里发生了什么事？是否有一些新的东西可供人们使用？

（我一直主要用它来渲染Html）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:27:53.593

There is not so much open issues left open, so it may be released soon. But to paraphrase Adriano comment, 1.7 is working quite well, and contains several important backports from the trunk version.

This said, if you want to benefit from the bleeding edge features, you can give a try to the subversion trunk version (2.0-dev). Here is the [list of main changes](http://velocity.apache.org/engine/devel/changes-report.html#a2.0), among which macro parameters default values and (not yet in the list), a migration towards the Maven build system.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:16:46.853

记住开源是如何运作的。发展不是为了发展而发生的。没有人从最新版本的销售中赚钱。人们会在他们认为需要改进并有时间做出这些改变时改进事物。当有一些值得努力推出新版本的东西时，就会发布。如果它没有改善，并不意味着它已经被放弃以寻求更好的东西。它通常只是意味着它目前“足够好”。

这不是 Velocity 经历的第一个安静时期。不管它是否出现，你仍然在问错误的问题。真正重要的是它是否能完成您需要的工作？如果它有缺点，请寻找替代方案或做出改进。这就是它的工作原理。

# php - 简单的 MySQL 查询和比较

> ID：10295257
> 
> 赞同：0
> 
> 时间：2012-04-24T09:33:33.930
> 
> 标签：php, mysql

我在堆栈溢出上看到过很多这样的问题，但我想知道为什么我的代码不起作用。它具有完美的（逻辑）意义。谁能向我解释我必须编写什么代码才能真正完成我想到的 if 语句？

```
$result = mysql_query("SELECT confirmed FROM usernames WHERE username = '$username' AND password = '$password'")
if ($result==NULL)
echo 'Failure'; 
```

我在 php 中尝试这个。

**笔记：**

在 DB 中确认设置为 NULL，因此应显示最终的回显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:36:58.733

该变量`$result`包含查询结果的内部表示（由[`mysql_query()`](http://www.php.net/manual/en/function.mysql-query.php)函数返回）。要获得实际值，您需要使用另一个函数，例如[`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php)or [`mysql_result()`](http://www.php.net/manual/en/function.mysql-result.php)。有点像这样：

```
$result = mysql_query("SELECT confirmed FROM usernames WHERE username = '$username' AND password = '$password'");
$conf = mysql_result($result, 0, 0);
if ($conf == NULL){
    echo 'Failure';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:37:11.930

你需要取一行！

```
$row = mysql_fetch_row($result);
if($row[0] == NULL) 
{
    echo 'failure';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:20:03.367

你可以试试这个......

```
/*Add die for check if query has error */
/*Put Limit 0,1 for fetch only single row*/
$result = mysql_query("SELECT confirmed FROM usernames WHERE username = '$username' AND password = '$password' Limit 0,1") or die(mysql_error());

if($result){
  /*check if query return result or not according sql cond*/
  if(mysql_num_rows($result) == 0){
    echo "No Record Found";
    exit();
    }
  /*Assign confirmed index value to a varriable $condirmed*/  
 while($row = mysql_fetch_assoc($result)){
      $confirmed = $row['confirmed'];
   }
    if($confirmed == 'NULL'){
       echo "Failure";
    }
} 
```

# javascript - 在不刷新的情况下更改浏览器的 URL

> ID：10295260
> 
> 赞同：0
> 
> 时间：2012-04-24T09:33:41.963
> 
> 标签：javascript, jquery

> **可能重复：**
> [更改浏览器的地址栏而不刷新](https://stackoverflow.com/questions/352343/changing-browsers-address-bar-without-refreshing)

我正在开发一个购物车，其中我有多个集合，通过单击一个集合，应该显示与该集合对应的所有产品，并且地址栏中的 url 应该是这样的：

```
http://example.com/collection1 
```

我努力了

```
window.history.pushState('Object', 'Title', '/new-url'); 
```

这适用于除 IE 之外的所有浏览器。不过我也试过

```
window.location.hash = 'collection_name'; 
```

但它显示 url like `http://example.com/index.html#collection1`，这在我的情况下是不正确的。

谁能帮我解决这个问题？？

# c99 - Renderscript 中的变量参数列表

> ID：10295262
> 
> 赞同：1
> 
> 时间：2012-04-24T09:33:43.990
> 
> 标签：c99, renderscript

我正在将一些较大的视频编解码器移植到 Renderscript。我刚刚设法移植 libx264 并将其编码为原始 H.264 流。我通过使用 CIL 合并库并使全局变量静态化，以及移植 Android 自己的 libc 字符串和一些 stdio 函数（合并）和使用预分配缓冲区的堆分配函数来做到这一点。

现在我想移植 libvpx。这个库对比 libx264 更多的中心函数使用可变参数（基本上我需要在 libx264 中注释掉的唯一部分是日志记录，其余的只是配置正确和一些宏定义来替换东西）。

所以我的问题是，有人知道如何在 Renderscript 中为静态函数使用变量参数列表吗？Google 声明 Renderscript 符合 C99，因此它必须以某种方式成为可能。如果有人对此有建议，请告诉我当前是否不支持。

/哈拉尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:43:59.063

在您的 SDK 目录中，您可以发现头文件 stdarg.h 实际上包含在 ./android-sdks/platform-tools/renderscript/clang-include/stdarg.h 中。如果你添加

```
#include "stdarg.h" 
```

使用正常的包含语句，编译器似乎可以理解您在说什么。不过，除了编译之外，我没有实际的测试方法。

[编辑] 我刚刚在 Windows 中收到“llvm-rs-cc.exe 已停止工作”消息。来自控制台的堆栈转储显示在解析我添加的示例函数以查看 varargs 是否会编译时失败。这是堆栈转储。编译器每次都会崩溃。我的猜测是理论上支持它，但编译器没有正确处理它。

```
Stack dump:
0\.  engine.rs:882:32: current parser token ';'
1\.  engine.rs:876:1: parsing function body 'average'
2\.  engine.rs:876:1: in compound statement ('{}') 
```

删除函数但保留标头包含后，以下内容进入控制台（没有崩溃）：

```
C:\android-sdks\platform-tools\renderscript\clang-include\stdarg.h:30:9: error: unknown type name '__builtin_va_list'
C:\android-sdks\platform-tools\renderscript\clang-include\stdarg.h:48:9: error: unknown type name '__builtin_va_list' 
```

# android - onSearchRequested() 导致相同的活动

> ID：10295264
> 
> 赞同：0
> 
> 时间：2012-04-24T09:33:56.987
> 
> 标签：android

我已经在我的应用程序中通过列表实现了搜索方法 onSearchRequested()，它运行良好，我创建了 2 个活动，一个用于列表数据，另一个用于该表单的搜索结果

公共类 acitvity1 扩展 InterfaceBase {

```
 @Override
    ListAdapter makeMeAnAdapter(Intent intent) {

          return(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,items));

    }       
} 
```

以及包含搜索结果的活动 2

```
public abstract class Acitvity2 extends InterfaceBase {

   @Override
    ListAdapter makeMeAnAdapter(Intent intent) {

            ListAdapter adapter=null;

            if (intent.getAction().equals(Intent.ACTION_SEARCH)) {
                    String query=intent.getStringExtra(SearchManager.QUERY);
                    List<String> results=searchItems(query);

                    adapter=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,results);
                    setTitle("Search : "+query);
            }
            return(adapter);
    }  
    private List<String> searchItems(String query) {
            SearchSuggestionProvider
                    .getBridge(this)
                    .saveRecentQuery(query, null);

            List<String> results=new ArrayList<String>();

            for (String item : items) {
                    if (item.indexOf(query)>-1) {
                            results.add(item);
                    }
            }
            return(results);
    } 
```

所以它有可能使搜索结果出现在活动1中的回调活动中，并且清单文件中是否应该进行任何更改以寻求帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:41:02.773

You need to override onNewIntent like this:

```
@Override
protected void onNewIntent(Intent intent) {
    makeMeAnAdapter(intent);
} 
```

Then include the search metadata in activity2, something like:

```
<meta-data android:name="android.app.searchable" android:resource="@xml/search" /> 
```

# javascript - 是否有用于发送对话框的发送按钮的本地化版本？

> ID：10295266
> 
> 赞同：0
> 
> 时间：2012-04-24T09:34:03.353
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在添加一个发送按钮，用于在页面选项卡上的画布应用程序中向朋友发送链接：

```
 $(anchorTag).bind('click',function(e){
                //console.log($(this));
                e.preventDefault();
                      FB.ui({
                    method: 'send',
                    name:$(this).attr('title'),
                    display: 'iframe',
                    link: $(this).attr('href')
                    });

            }); 
```

我想要一个图标，就像![发送按钮](../Images/f3bf35664a075448d511dc8d0d34d377.png)我的按钮的图像一样，但我需要将文本本地化为不同的语言。我是否需要使用 CSS 制作我自己的按钮，或者这个按钮是否可以通过 API 获得？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:54:20.817

在[Like Button](http://developers.facebook.com/docs/reference/plugins/like/)和[Send Button](http://developers.facebook.com/docs/reference/plugins/send/)的文档中，它有一个关于不同语言的部分，但 Like 中的那个更详细一点：

> 如何以不同的语言显示“赞”按钮？
> 
> 如果您使用的是 XFBML 版本，请在实例化库时包含语言代码。将此行中的“en_US”替换为正确的语言环境代码：
> 
> '//connect.facebook.net/en_US/all.js';
> 
> 如果您使用的是 Iframe 版本，请在 src URL 中包含带有正确国家/地区代码的区域设置参数。例子：
> 
> src="http://www.facebook.com/plugins/like.php?locale=fr_FR&..."
> 
> 您可能需要调整 Like 按钮的宽度以适应不同的语言。

# node.js - 在非 ajax html 表单上单击提交后，是否可以在页面上显示上传进度？

> ID：10295268
> 
> 赞同：0
> 
> 时间：2012-04-24T09:34:04.100
> 
> 标签：node.js, socket.io

在非 ajax html 表单上单击提交后，是否可以在页面上显示上传进度？Socket.io 会允许我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:30:09.047

如果您使用标准的 http 表单提交来上传文件，则不会。您将不得不使用某种 Flash 或 ajax 上传脚本，它不需要提交浏览器上的当前页面来进行上传。

# python - beautifulsoup vs re 并使用正则表达式搜索

> ID：10295276
> 
> 赞同：1
> 
> 时间：2012-04-24T09:34:42.237
> 
> 标签：python, regex, search, beautifulsoup

我使用 urllib2.urlopen 来获取[此类](http://descartes.cnice.mec.es/grupodescartes/Galo/eXe/Escenas_macros/Escenas_macros.html)网站的源代码。我读取了字节，并使用beautifulsoup 将代码标记为applet。此代码包括以下行：

```
<param name="G_00" value="espacio='E1' tipo='macro' expresi&oacute;n='dinamica/resorte'"> 
```

我需要捕获代码中包含在带有*tipo="macro"*的值中的所有 "expresión=" 值（特别是*dinamica/resorte*和*dinamica/masa*）。

使用beautifulsoup，我将这些行识别为标签，只有带有tipo='macro'的标签，我想简短一些，现在我寻找*expresión=*的右侧 ：

```
key_macro = ['expresión=', 'expresion=', 'expresi&oacute;n='....] # yes, a problem, it could be this way
for y in key_macro:
    if string.find(tag, y) != -1:
        # sometimes -sorry- macros are in txt format: 
        mexpression = r"%s'([\w\./]+)'" % y
        mpatron = re.compile(mexpression)
        mresult = mpatron.search(tag['value'])
        if mresult: # 1
            macroslist.append(mresult.group(1))
        # sometimes without extension
        wexpression = r"%s'([\w/]+)'" % y
        wpatron = re.compile(wexpression)
        wresult = wpatron.search(tag['value'])
        if wresult: # 2
            macroslist.append(wresult.group()) 
```

**问题**：使用#1我得到.txt文件（如果存在）-我可以保证-但是使用#2（我寻找单词/单词）我没有找到像dinamica/resorte这样的东西，wresult总是失败，我需要捕获这些值。

我的正则表达式不好吗？所有的问题是如何用正则表达式表示单词/单词？

我尝试使用 beautifulsoup 进行搜索，但 'macro' 是 INSIDE 值，我不知道如何捕获这个标签，无论如何 re + search 似乎做得很好（......而右侧是：dinamica/resorte. txt 例如，然后 # 1 它可以工作）但没有扩展名。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:33:32.553

对暴力和愚蠢的解决方案感到抱歉，但您应该更好地指定您的需求，以了解您可能想要搜索的所有键。我个人认为解决方案不好。无论如何，尝试：

```
import re

def brute_force_and_stupid(s, rex=re.compile(r"expresion='([a-zA-Z./]+)'")):
    s = s.replace('&oacute;', 'o')
    s = s.replace('ó', 'o')
    print s
    m = rex.search(s)
    if m:
        return m.group(1)
    return None

tag = "<param name=\"G_00\" value=\"espacio='E1' tipo='macro' expresi&oacute;n='dinamica/resorte'\">"
print tag
print brute_force_and_stupid(tag) 
```

它打印在我的控制台上：

```
c:\tmp\___python\Antonio\so10295276>python a.py
<param name="G_00" value="espacio='E1' tipo='macro' expresi&oacute;n='dinamica/resorte'">
<param name="G_00" value="espacio='E1' tipo='macro' expresion='dinamica/resorte'">
dinamica/resorte 
```

使用更复杂的正则表达式的更好的解决方案。（注意这里的 unicode 字符串。）

```
import re

rex = re.compile(ur"expresi(o|ó|&oacute;)n='(?P<text>[a-zA-Z./]+)'")

tag = u"<param name=\"G_00\" value=\"espacio='E1' tipo='macro' expresi&oacute;n='dinamica/resorte'\">"
print tag

m = rex.search(tag)
if m:
    print m.group('text')
else:
    print None 
```

它打印：

```
c:\tmp\___python\Antonio\so10295276>python b.py
<param name="G_00" value="espacio='E1' tipo='macro' expresi&oacute;n='dinamica/resorte'">
dinamica/resorte 
```

# regex - 正则表达式用同一行上的另一个单词替换一个单词unix

> ID：10295278
> 
> 赞同：1
> 
> 时间：2012-04-24T09:34:50.213
> 
> 标签：regex, perl, unix, sed, awk

让 A,B,C,D 是单词

输入文件 ：

```
..
A/B/C/D 
W/B/C/Z 
L/B/C/O   
.. 
```

输出文件：

```
..
A/B/C/A
W/B/C/W 
L/B/C/L 
.. 
```

仅当行中存在定界符且其他行同样明智时，将其替换为`word D`同一`word A`行 `/B/C/`

任何`sed/awk/perl`oneliner来实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:11:21.833

这是一个`awk`解决方案：

```
awk -F/ -v OFS=/ '$2=="B" && $3=="C" {$4=$1}1' input.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:39:39.563

```
pearl.306> echo "A/B/C/D"|awk '{split($0,a,"/");print a[1]"/"a[2]"/"a[3]"/"a[1]}'
A/B/C/A
pearl.307> 
```

另一种方法是：

```
pearl.309> echo "A/B/C/D" | awk -F"/" '{OFS="/"}{$NF=$1;print}'
A/B/C/A
pearl.310> 

pearl.318> cat file1
A/B/C/D
W/B/C/Z
L/B/C/O
pearl.319> awk -F"/" '{OFS="/"}{$NF=$1;print}' file1
A/B/C/A
W/B/C/W
L/B/C/L
pearl.320> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T09:40:06.547

你可以做：

```
sed -re 's/^([^/]*)(\/B\/C\/)([^/]*)$/\1\2\1/' file 
```

演示：

```
$ cat file
A/B/C/D
W/B/C/Z
L/B/C/O

$ sed -re 's/^([^/]*)(\/B\/C\/)([^/]*)$/\1\2\1/' file
A/B/C/A
W/B/C/W
L/B/C/L 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T10:11:41.907

这可能对您有用：

```
sed 's|^\(\(.\)/B/C/\).|\1\2|' file 
```

如果`A/B/C/D`是真实的单词，例如`wordA/wordB/wordC/wordD`，那么：

```
sed 's/|^\(\([^/]*\)/wordB/wordC/\).*|\1\2|' file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T09:39:38.370

这应该可以解决问题。**perl -p -e 's/D/A/g'**

在 sed **sed -e 's/D/A/'**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T10:41:34.593

```
 perl -pe 's#(/B/C/)(.*)#$1$`#' file 
```

这应该工作+

# sql - How does a full text search server like Sphinx work?

> ID：10295280
> 
> 赞同：19
> 
> 时间：2012-04-24T09:34:57.487
> 
> 标签：sql, full-text-search, search-engine, sphinx, thinking-sphinx

Can anyone explain in simple words how a full text server like [Sphinx](http://sphinxsearch.com/) works? In plain SQL, one would use SQL queries like this to search for certain keywords in texts:

```
select * from items where name like '%keyword%'; 
```

But in the configuration files generated by various Sphinx plugins I can not see any queries like this at all. They contain instead SQL statements like the following, which seem to divide the search into distinct ID groups:

```
SELECT (items.id * 5 + 1) AS id, ... 
       WHERE items.id >= $start AND items.id <= $end 
       GROUP BY items.id
..
SELECT * FROM items WHERE items.id = (($id - 1) / 5) 
```

It it possible to explain in simple words how these queries work and how they are generated?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-24T10:06:13.367

Inverted Index is the answer to your question: [http://en.wikipedia.org/wiki/Inverted_index](http://en.wikipedia.org/wiki/Inverted_index)

Now when you run a sql query through sphinx, it fetches the data from the database and constructs the inverted index which in Sphinx is like a hashtable where the key is a 32 bit integer which is calculated using crc32(word) and the value is the list of documentID's having that word.

This makes it super fast.

Now you can argue that even a database can create a similar structure for making the searches superfast. However the biggest difference is that a Sphinx/Lucene/Solr index is like a single-table database without any support for relational queries (JOINs) [From MySQL Performance Blog]. Remember that an index is usually only there to support search and not to be the primary source of the data. So your database may be in "third normal form" but the index will be completely be de-normalized and contain mostly just the data needed to be searched.

Another possible reason is generally databases suffer from internal fragmentation, they need to perform too much semi-random I/O tasks on huge requests.

What that means is, for example, considering the index architecture of a databases, the query leads to the indexes which in turn lead to the data. If the data to recover is widely spread, the result will take long and that seems to be what happens in databases.

EDIT: Also please see the source code in cpp files like [searchd.cpp](https://github.com/pat/sphinx/blob/master/src/searchd.cpp) etc for the real internal implementation, I think you are just seeing the PHP wrappers.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T12:31:33.660

Those queries you are looking at, are the query sphinx uses, to extract a copy of the data from the database, to put in its own index.

Sphinx needs a copy of the data to build it index (other answers have mentioned how that index works). You then ask for results (matching a specific query) from the searchd daemon - it consults the index and returns you matching documents.

The particular example you have choosen looks quite complicated, because it only extracting a part of the data, probbably for sharding - to split the index into parts for performance reasons. And is using range queries - so can access big datasets piecemeal.

An index could be built with a much simpler query, like

```
sql_query = select id,name,description from items 
```

which would create a sphinx index, with two fields - `name` and `description` that could be searched/queried.

When searching, you would get back the unique `id`. [http://sphinxsearch.com/info/faq/#row-storage](http://sphinxsearch.com/info/faq/#row-storage)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:54:31.070

Full text search usually use one implementation of inverted index. In simple words, it brakes the content of a indexed field in tokens (words) and save a reference to that row, indexed by each token. For example, a field with `The yellow dog` for row #1 and `The brown fox` for row #2, will populate an index like:

```
brown  -> row#2
dog    -> row#1
fox    -> row#2
The    -> row#1
The    -> row#2
yellow -> row#1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T05:49:27.270

A short answer to the question is that databases such as MySQL are specifically designed for storing and indexing records and supporting SQL clauses (SELECT, PROJECT, JOIN, etc). Even though they can be used to do keyword search queries, they cannot give the best performance and features. Search engines such as Sphinx are designed specifically for keyword search queries, thus can provide much better support.

# delphi - TObjectList 的通用后代 在Delphi XE中违反了祖先的记忆

> ID：10295283
> 
> 赞同：2
> 
> 时间：2012-04-24T09:35:05.933
> 
> 标签：delphi, generics

我在 Delphi XE 中发现了一个关于泛型类型 def 的奇怪问题。我创建了*TObjectList*的派生类，其中包括许多类（例如 fIndex）。然后我创建一个包含指向所有者的链接的后代类*TMyButtonlist 。*对象*fIndex*未创建，因此在销毁时必须**为零。**但是当我设置*fOwer*变量时，*fIndex*变量得到相同的指针，并在销毁时崩溃。

```
type
  TMyObjectList<T:class> = class(TObjectList<T>)
  private
    fIndex:TStringList;
  public
    destructor Destroy; override;
  end;

  TMyButtonList = class(TMyObjectList<TButton>)
  private
    Owner:TObject;
  end;

destructor TMyObjectList<T>.Destroy;
begin
  fIndex.Free;
  inherited;
end;

procedure TMainForm.btnClick(Sender: TObject);
var
  Buttonlist:TMyButtonList;
begin
  Buttonlist:=TMyButtonList.Create;
  Buttonlist.Owner := Self;
  ButtonList.Free;
end; 
```

# asp.net - 一个 aspxgridview 中的回调导致所有网格视图数据绑定

> ID：10295286
> 
> 赞同：1
> 
> 时间：2012-04-24T09:35:20.750
> 
> 标签：asp.net, c#-4.0, devexpress

我有一个带有详细信息行的 aspxgridview。在这个gridview 的detils 行中，大约有10 个aspxgridviews。每当其中一个网格通过单击编辑/新建/删除引起回调时，其他网格视图也会数据绑定，即命中数据库。这会导致性能问题。有没有办法在其他 aspxgridview 上禁用数据绑定？

坦克。

![带有细节网格的网格屏幕截图](../Images/45b5a71f3121423db77a8d5d090b7c29.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:26:57.713

您可以使用标签内容延迟加载。[例如](http://www.devexpress.com/Support/Center/e/E10.aspx)看这里，看这里以[获得进一步的解释](https://stackoverflow.com/questions/10235228/what-am-i-doing-wrong-in-this-aspxpagecontrol-dev-express)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:02:35.030

我在这里找到了解决方案： [ASPxPageControl - 所有 TabPages 的页面加载](http://www.devexpress.com/Support/Center/p/Q253866.aspx)

# service - Java App 在 64 位环境中作为服务启动，但不起作用

> ID：10295288
> 
> 赞同：1
> 
> 时间：2012-04-24T09:35:26.483
> 
> 标签：service, 64-bit, java

我已经在我的电脑上安装了 64 位 jre（以混合模式启动），然后我以 64 位模式编译了我的 Java 应用程序。它可以完美启动，并且可以作为独立应用程序正常工作。

然后我使用 JSL.EXE（带有 jsl.ini）将它安装为服务，它再次启动正常，**但不起作用**：不回答（这是一个小型服务器）并且没有将任何内容写入日志文件。

如果我使用 jre 32bit 编译它并在 32bit 环境中作为服务安装，则相同的应用程序可以作为服务正常工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T08:47:14.703

解决了。我刚刚运行 jsl.exe -debug 并看到了一切，发生了什么。错误的 JRE 被 jsl 占用了……我还应该在 jsl.ini 中定义一个 jvmtype 参数……我不知道 jsl64.exe 应该用于 64 位 Java 应用程序（具有 64 位 SWT 的应用程序）

[java] jvmtype=服务器、客户端、热点、经典

谢谢

# makefile - make 文件中的条件错误

> ID：10295289
> 
> 赞同：0
> 
> 时间：2012-04-24T09:35:30.943
> 
> 标签：makefile

我有一个抛出错误的生成文件。我相信问题归结为一个条件语句，我的语法错误但无法弄清楚实际上是什么错误。

需要明确的是，我正在使用命令 make {target_name} 运行代码

代码是

```
ifeq ($(isDynamic), d)
    libExt=.so
else
    libExt=.a
endif 
```

错误是 /bin/sh: 0403-057 第 1 行的语法错误： `(' 不是预期的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:37:19.717

您正在将 Makefile 作为 shell 脚本运行。你可能想`make`在它上面运行。可能你想把它变成一个`make`脚本，尽管这通常不是人们想要的；做第一行

```
#! /usr/bin/make -f 
```

（或任何 GNU`make`所在的地方）和`chmod +x`它。

# php - 为每个结果输出特定的数组键

> ID：10295292
> 
> 赞同：1
> 
> 时间：2012-04-24T09:35:37.123
> 
> 标签：php, mysql, arrays, for-loop, foreach

我的页面有一个搜索引擎。因此，我想为每个结果输出数组键。

所以我有这个代码：

```
$results = search($keywords);
$results_num = count($results); //what shows the message how many items were found

if (!empty($errors){
foreach ($results as $result){
    echo "this is result: "
.$result['key'];       //thought would be the solution, its not.
    }
} else {
    foreach ($errors as $error){
        $error;
    }
} 
```

我也尝试使用像这样的计数器：

```
$results = search($keywords);
$results_num = count($results); //what shows the message how many items were found
$counter = 0;

if (!empty($errors){
foreach ($results as $result){
    $counter++;
    echo "this is result: "
.$counter;
    }
} else {
    foreach ($errors as $error){
        $error;
    }
} 
```

什么不像我想的那样工作，仍然不是那么专业。所以如果有人能告诉我如何解决这个问题，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:40:03.567

```
foreach ($results as $key => $result) {
  echo 'this is result: ' . $key;
} 
```

current`key`将被分配给该属性，`$key`并且`value`该属性将被分配给`$result`

[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

**编辑**

针对您的评论，我认为这就是您想要实现的目标：-

```
$i=0;
foreach($results as $result) {
  echo 'this is result: ' . ++$i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:40:14.037

```
foreach($arr as $key=>$val){
//do something with key and value
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:44:21.647

**Here in code you can check first if `$results array is not empty because sometime due to empty $results array foreach generates error`**

```
/*Check if $results array is empty or not*/
if(!empty($results)){  
 foreach ($results as $key=>$result){
  /*result you want to show here according conditions*/
 }
} 
```

# awk - 获取ASCII码？

> ID：10295301
> 
> 赞同：1
> 
> 时间：2012-04-24T09:36:25.893
> 
> 标签：awk

为了检索文件第 13 列的所有租船人的 ascii 代码，我编写了这个脚本

```
awk -v ch="'" '{
for (i=1;i<=length(substr($13,6,length($13)));i++)
{cmd = printf \"%d\\n\" \"" ch substr(substr($13,6,length($13)),i,1) "\"" cmd | getline output close(cmd) ;
Number= Number " " output 
}
 print Number ; Number="" 
}' ~/a.test 
```

但它不能以正确的方式工作！我的意思是它可以正常工作一段时间然后产生奇怪的结果！？例如，对于这个输入（假设它是第 13 列）

> CQ:Z:%8%%%%0%%%%9%%%%:%%%%%%%%%%%%%%%%%

我必须得到这个

> 37 56 37 37 37 37 48 37 37 37 37 57 37 37 37 37 58 37 37 37 37 ......

但我有这个

> 37 56 37 37 37 37 48 48 48 48 48 57 57 57 57 57 58 58 58 58 58 ......

如您所见，第一个错误计算出现在字符“0”之后（结果为 48）。

你知道我的代码的哪一部分是造成这个错误的原因吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:27:41.203

尝试这个：

```
awk '{
    str = substr($13, 6)
    for (i=1; i<=length(str); i++) {
      cmd = "printf %d \42\47" substr(str, i, 1) "\42"    
      cmd | getline output
      close(cmd)
      Number= Number " " output 
    }
   print Number 
   Number="" 
  }' ~/a.test 
```

`\42`is`"`和`\47`is `'`，因此它`printf %d "'${char}"`在 shell 中为 each运行`${char}`，这会触发作为 C 常量的评估，其 POSIX 扩展名指示数值，如[POSIX printf 定义的 §Extended Description](http://pubs.opengroup.org/onlinepubs/009695399/utilities/printf.html#tag_04_102_13)的最后一个项目符号中所述。

注意格式很重要！除非您确切知道自己在做什么，否则不要试图*压缩代码！*

还有一个纯*awk*解决方案（我直接从手册中获取了*ord/chr函数）：*

```
printf '%s\n' 'CQ:Z:%8%%%%0%%%%9%%%%:%%%%%%%%%%%%%%%%%%'|
  awk 'BEGIN { _ord_init() }
    {
      str = substr($0, 6)
      for (i = 0; ++i <= length(str);)
        printf "%s", (ord(substr(str, i, 1)) (i < length(str) ? OFS : ORS))
      }
    func _ord_init(    low, high, i, t) {
      low = sprintf("%c", 7) # BEL is ascii 7
      if (low == "\a") {     # regular ascii
        low = 0
        high = 127
       } 
      else if (sprintf("%c", 128 + 7) == "\a") {
        # ascii, mark parity
        low = 128
        high = 255
        } 
      else {                  # ebcdic(!)
        low = 0
        high = 255
       }

    for (i = low; i <= high; i++) { 
      t = sprintf("%c", i)
      _ord_[t] = i
       }
    }

  func ord(str,    c) {
    # only first character is of interest
    c = substr(str, 1, 1)
    return _ord_[c]
    }

  func chr(c) {
    # force c to be numeric by adding 0
    return sprintf("%c", c + 0)
    }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:56:10.023

这可能对您有用：

```
awk -vSQ="'" -vDQ='"' '{args=space="";n=split($13,a,"");for(i=1;i<=n;i++){args=args space DQ SQ a[i] DQ;format=format space "%d";space=" "};format=DQ format "\\n" DQ;system("printf " format " " args)}' 
```

# google-maps-api-3 - 将我的谷歌地图导出到谷歌地球的 KMZ 文件

> ID：10295304
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:36:38.997
> 
> 标签：google-maps-api-3, kmz

我已经在 javascript 和 vb.net 中使用 v3 开发和谷歌地图，用于一些服务器端代码以将地图附加到数据库。这里是我的地图的链接

[http://202.125.144.34:80/Map/Cotton.aspx](http://202.125.144.34:80/Map/Cotton.aspx)

这是我制作这张运行良好的地图的完整代码

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Cotton</title>

  <script runat=server>

      Dim mgps As New Text.StringBuilder

      Public ReadOnly Property GPS() As String
          Get
              Return mgps.ToString

          End Get
      End Property

  </script>  

  <%  Dim con As New OleDbConnection
      con = New OleDbConnection("Data Source=sml; User ID=sml; Password=sml; provider=OraOLEDB.Oracle")
      con.Open()
      Dim cmd As OleDbCommand = New OleDbCommand("select * from GPS_MAP", con)

      Dim ds As New DataSet
      Dim I As Long

      Dim da As New OleDbDataAdapter(cmd)
      da.Fill(ds, "GPS_MAP")
      mgps.AppendLine("[")

      For I = 0 To ds.Tables("GPS_MAP").Rows.Count - 1
          'AppendLine("new google.maps.LatLng(" & ds.Tables("GPS").Rows(I).Item("GPS_ONE") & "),")
          'station.AppendLine(ds.Tables("GPS").Rows(I).Item("GPS_ONE"))
          Dim station As String = ds.Tables("GPS_MAP").Rows(I).Item("STA_NAME")
          Dim party As String = ds.Tables("GPS_MAP").Rows(I).Item("PARTY_NAME")
          Dim address As String = ds.Tables("GPS_MAP").Rows(I).Item("ADDRESS")
          Dim namerep As String = ds.Tables("GPS_MAP").Rows(I).Item("NAME_REP")
          Dim avg0809 As String = ds.Tables("GPS_MAP").Rows(I).Item("AVG_08_09")
          Dim avg0910 As String = ds.Tables("GPS_MAP").Rows(I).Item("AVG_09_10")
          Dim avg1011 As String = ds.Tables("GPS_MAP").Rows(I).Item("AVG_10_11")
          Dim avg1112 As String = ds.Tables("GPS_MAP").Rows(I).Item("AVG_11_12")
          Dim brk0809 As String = ds.Tables("GPS_MAP").Rows(I).Item("BRK_08_09")
          Dim brk0910 As String = ds.Tables("GPS_MAP").Rows(I).Item("BRK_09_10")
          Dim brk1011 As String = ds.Tables("GPS_MAP").Rows(I).Item("BRK_10_11")
          Dim brk1112 As String = ds.Tables("GPS_MAP").Rows(I).Item("BRK_11_12")
          Dim bales0809 As String = ds.Tables("GPS_MAP").Rows(I).Item("BALES_08_09")
          Dim NETWT0809 As String = ds.Tables("GPS_MAP").Rows(I).Item("NETWT_08_09")
          Dim bales0910 As String = ds.Tables("GPS_MAP").Rows(I).Item("BALES_09_10")
          Dim NETWT0910 As String = ds.Tables("GPS_MAP").Rows(I).Item("NETWT_09_10")
          Dim bales1011 As String = ds.Tables("GPS_MAP").Rows(I).Item("BALES_10_11")
          Dim NETWT1011 As String = ds.Tables("GPS_MAP").Rows(I).Item("NETWT_10_11")
          Dim bales1112 As String = ds.Tables("GPS_MAP").Rows(I).Item("BALES_11_12")
          Dim NETWT1112 As String = ds.Tables("GPS_MAP").Rows(I).Item("NETWT_11_12")
          mgps.AppendLine("{GPS:new google.maps.LatLng(" & ds.Tables("GPS_MAP").Rows(I).Item("GPS_ONE") & "), TITLE:'" & station & "',BALES0809:'" & bales0809 & "',NETWT0809:'" & NETWT0809 & "',BALES0910:'" & bales0910 & "',NETWT0910:'" & NETWT0910 & "',BALES1011:'" & bales1011 & "',NETWT1011:'" & NETWT1011 & "',BALES1112:'" & bales1112 & "',NETWT1112:'" & NETWT1112 & "',PARTYNAME:'" & party & "',ADDRESS:'" & address & "',NAMEREP:'" & namerep & "',AVG0809:'" & avg0809 & "',AVG0910:'" & avg0910 & "',AVG1011:'" & avg1011 & "',AVG1112:'" & avg1112 & "',BRK0809:'" & brk0809 & "',BRK0910:'" & brk0910 & "',BRK1011:'" & brk1011 & "',BRK1112:'" & brk1112 & "'},")
      Next I
      mgps.AppendLine("];")

      con.Close()
      %>  

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
 <script src="http://acme.com/javascript/Clusterer.js" type="text/javascript"></script>
<script  type="text/javascript">
 var map;

 var markers = new Array();

 function initialize() {
    var map_center = new google.maps.LatLng(31.2330555556,72.3330555556);

var GPS = <%=GPS %>
     var myOptions = {
      zoom: 9,
      scaleControl:true,
      pancontrol: true,
      streetViewControl: true,
      center: map_center,
      mapTypeControl: true,
      mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
      mapTypeId: google.maps.MapTypeId.HYBRID
    }    
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    var infowindow = new google.maps.InfoWindow();

    //var clusterer = new Clusterer( map );

    for(i=0; i<GPS.length; i++)
    {

        //  var image = 'ico/no.png';

          markers[i] = new google.maps.Marker(
          { 
           position: GPS[i].GPS,
           map: map,
           draggable:true,

          Info:'<table style="border:1px solid #000000;font-family: Arial; font-size:10px;" cellpadding="0" cellspacing="0"><tr>'+
                '<td colspan="6" style="border:1px solid #000000;border-bottom:0;">'+
                    '<span style="font-family: Arial"><b>'+ GPS[i].PARTYNAME + '</b></span></td></tr><tr>'+
                '<td colspan="6" style="border:1px solid #000000;border-bottom:0;">'+
                    '<span style="font-family: Arial">'+ GPS[i].ADDRESS +'</span></td></tr><tr>'+
                '<td colspan="6" style="border:1px solid #000000;border-bottom:0;">'+
                    '<span style="font-family: Arial">'+ GPS[i].NAMEREP + '</span></td></tr><tr><td colspan="2" style="border:1px solid #000000;border-bottom:0;"></td>'+
                '<td style="border:1px solid #000000;border-bottom:0;"><span style="font-family: Arial">Bales</span></td><td style="border:1px solid #000000;border-bottom:0;">'+
                    '<span style="font-family: Arial">Net Weight</span></td><td style="border:1px solid #000000;border-bottom:0;">'+
                    '<span style="font-family: Arial">Average rate per Maund</span></td><td style="border:1px solid #000000;border-bottom:0;">'+
                    '<span style="font-family: Arial">Broker</span></td></tr><tr><td style="border:1px solid #000000;border-bottom:0;">'+
                    '<span style="font-family: Arial">2011-2012</span></td><td rowspan="4" style="border:1px solid #000000;border-bottom:0;"></td>'+
                '<td style="border:1px solid #000000;border-bottom:0; text-align:right;"><span style="font-family: Arial">' + GPS[i].BALES1112 + '</span></td>'+
                '<td style="border:1px solid #000000;border-bottom:0; text-align:right;">'  + GPS[i].NETWT1112 + '</td><td style="border:1px solid #000000;border-bottom:0; text-align:right;">'+ GPS[i].AVG1112 + '</td>'+
                '<td style="border:1px solid #000000;border-bottom:0; ">'+ GPS[i].BRK1112 + '</td></tr><tr><td style="border:1px solid #000000;border-bottom:0;">'+
                                  '<span style="font-family: Arial">2010-2011</span></td><td style="border:1px solid #000000;border-bottom:0; text-align:right;">'+
                    '<span style="font-family: Arial">'+ GPS[i].BALES1011 + '</span></td> <td style="border:1px solid #000000;border-bottom:0; text-align:right;">'+ GPS[i].NETWT1011 + '</td>'+
                '<td style="border:1px solid #000000;border-bottom:0; text-align:right;">'+ GPS[i].AVG1011 + '</td><td style="border:1px solid #000000;border-bottom:0;">' + GPS[i].BRK1011 + '</td></tr><tr>'+
                '<td style="border:1px solid #000000;border-bottom:0;"><span style="font-family: Arial">2009-2010</span></td><td style="border:1px solid #000000;border-bottom:0; text-align:right;">'+
                    '<span style="font-family: Arial">'+ GPS[i].BALES0910 + '</span></td>'+
                '<td style="border:1px solid #000000;border-bottom:0; text-align:right;">' + GPS[i].NETWT0910 + '</td><td style="border:1px solid #000000;border-bottom:0; text-align:right;">'+ GPS[i].AVG0910 + '</td>'+
                '<td style="border:1px solid #000000;border-bottom:0; ">'+ GPS[i].BRK0910 + '</td></tr><tr><td style="border:1px solid #000000;border-bottom:0;">'+
                    '<span style="font-family: Arial">2008-2009</span></td><td style="border:1px solid #000000;border-bottom:0; text-align:right;">'+
                    '<span style="font-family: Arial">'+ GPS[i].BALES0809 + '</span></td><td style="border:1px solid #000000;border-bottom:0; text-align:right;">'+ GPS[i].NETWT0809 + '</td>'+
                '<td style="border:1px solid #000000;border-bottom:0; text-align:right;">'+ GPS[i].AVG0809 +'</td><td style="border:1px solid #000000;border-bottom:0;">'+ GPS[i].BRK0809 + '</td></tr></table>',
           title:GPS[i].TITLE

           });                      

            google.maps.event.addListener(markers[i], 'click', function() {
            infowindow.setContent(this.Info);
            infowindow.open(map,this);
            });             

         }    
      }
</script>
</head>
<body onload="initialize()" style="text-align: center">
  <div id="map_canvas" style="width:100%; height:100%; text-align: center;">
      </div>

</body>
</html> 
```

是否有可能导出此地图以制作要在 Google 地球中打开的 kmz 文件。如果不知道，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:13:51.433

我查看了您的地图链接，看起来不错；我喜欢与标记点击相关联的 InfoWindow 表。

但我认为您必须详细说明您希望通过 KMZ 实现的目标：

*   您是否只是想将现有地图*重新创建*为 kmz 以在 Google 地球中显示？
*   或者您是否想创建一个使用最新数据从数据库中读取的动态导出实现？

# asp.net - IIS7 - 使用 System.IO.StreamWriter() ASP.net 页面写入共享被拒绝访问

> ID：10295306
> 
> 赞同：1
> 
> 时间：2012-04-24T09:36:56.393
> 
> 标签：asp.net, iis, iis-7, permissions

我正在处理一些驻留的 asp.net 页面是一个巨大的 Intranet 应用程序，Intranet 应用程序池作为身份运行`NetworkService`（不要问）并使用匿名身份验证作为 IUSR – IIS7。

假设 Intranet Home Dir 是`D:\Intranet\`- 有问题的 asp.net 页面位于`D:\Intranet\TimeSheets\V2\`

我有问题的测试脚本是`D:\Intranet\TimeSheets\V2\Post.aspx`并且在这些行上做了一些事情（将发布的 HTML [作为基本 64 字符串]） - 转换为 HTML 然后尝试写入网络共享：

```
Dim TimeSheetInBase64 As String = Request.Form("HtmlToSave")
Dim HtmlToSave As String = ""
Dim SavePath As String = "\\DifferentFileServer\Public\Random Department\Posted Invoices\"

'#### Convert the HTML from base64 back into HTML
Try
    Dim decodedBytes As Byte()
    decodedBytes = Convert.FromBase64String(TimeSheetInBase64)
    HtmlToSave = Encoding.Default.GetString(decodedBytes)

Catch e As Exception
    echo("Error decoding HTML: " & e.Message)
    Exit Select
End Try

Try
    Dim objWriter As New System.IO.StreamWriter(SavePath & "text.htm", False)
    objWriter.WriteLine(HtmlToSave)
    objWriter.Close()
    echo("OK")

Catch ex As Exception
    Dim wi As WindowsIdentity = System.Security.Principal.WindowsIdentity.GetCurrent()
    Dim user As String = wi.Name
    echo("Error Saving Invoice To Disk (" & wi.Name & "): " & ex.Message)
End Try 
```

尝试将文件写入远程共享时，objWriter 会引发错误：

```
Error Saving Invoice To Disk (NT AUTHORITY\NETWORK SERVICE): Access to the path '\\DifferentFileServer\Public\Random Department\Posted Invoices\text.htm' is denied. 
```

显然这是因为有问题的页面是在应用程序池的范围内运行的。

因此，我尝试更改 V2 文件夹上的匿名特定用户以使用对相关共享具有写访问权限的 AD 帐户 - 但是，即使在保存配置更改后，重新启动 IIS 页面仍然会在尝试访问时收到拒绝访问错误写入文件（并且 WindowsIdentity.GetCurrent() 仍然返回 NT AUTHORITY\NETWORK SERVICE （这是应用程序池的身份，而不是我为匿名访问设置的帐户）。

只是为了确认这是覆盖匿名帐户的问题，我将应用程序池设置为作为我试图在匿名特定用户上使用的 AD 帐户运行 - 这工作正常并且文件已成功写入远程共享 - 所以凭据很好，只是 IIS 没有正确使用它们。

我的问题是，是否可以为匿名用户使用不同的 Windows 凭据运行一些子文件夹？如果是这样，除了更改匿名帐户之外我还需要做什么，因为这似乎没有效果？

我的第二个问题是：不是依赖 IIS 来提升权限，有没有办法从 asp.net 页面中执行此操作，即使用与页面运行的不同凭据编写文件？我曾考虑将这个子文件夹移动到它自己的应用程序池中——但这似乎有点混乱，如果可能的话，我想避免这样做。

（对不起文字墙）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:47:26.520

好吧，在用 IIS 将我的头撞到墙上之后，我放弃了，走上了代码路线，具体来说，`advapi32.dll`它是`LogonUserA()`, `DuplicateToken()`& `RevertToSelf()`，更重要的是 WindowsImpersonationContext 对象：

[http://msdn.microsoft.com/en-us/library/system.security.principal.windowsimpersonationcontext.aspx](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsimpersonationcontext.aspx)

首先，声明打开和关闭模拟的函数：

```
Private Function impersonateValidUser(ByVal userName As String, _
ByVal domain As String, ByVal password As String) As Boolean

    Dim tempWindowsIdentity As WindowsIdentity
    Dim token As IntPtr = IntPtr.Zero
    Dim tokenDuplicate As IntPtr = IntPtr.Zero
    impersonateValidUser = False

    If RevertToSelf() Then
        If LogonUserA(userName, domain, password, LOGON32_LOGON_INTERACTIVE, 
                     LOGON32_PROVIDER_DEFAULT, token) <> 0 Then
            If DuplicateToken(token, 2, tokenDuplicate) <> 0 Then
                tempWindowsIdentity = New WindowsIdentity(tokenDuplicate)
                impersonationContext = tempWindowsIdentity.Impersonate()
                If Not impersonationContext Is Nothing Then
                    impersonateValidUser = True
                End If
            End If
        End If
    End If
    If Not tokenDuplicate.Equals(IntPtr.Zero) Then
        CloseHandle(tokenDuplicate)
    End If
    If Not token.Equals(IntPtr.Zero) Then
        CloseHandle(token)
    End If
End Function

Private Sub undoImpersonation()
    impersonationContext.Undo()
End Sub 
```

然后使用非常简单：

```
If impersonateValidUser("username", "domain", "password") Then
    '#### Write the file then 'close' the Impersonation
    undoImpersonation()
End If 
```

需要的以下命名空间：

```
System.Web
System.Web.Security
System.Security.Principal
System.Runtime.InteropServices 
```

灵感（可惜我花了这么长时间才找到这个）：

[http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)

# java - java.util.Calendar 和 timeZones 的问题

> ID：10295311
> 
> 赞同：2
> 
> 时间：2012-04-24T09:37:14.787
> 
> 标签：java, calendar, timezone

我有以下方法将我的自定义 DMY（日期、月份、年份）对象转换为日期。

```
public static Date serverCreateDateFromDMY(DMY pDMY, TimeZone pTimeZone)
    {
        Calendar vCalendar = Calendar.getInstance(pTimeZone);
        vCalendar.set(Calendar.YEAR, pDMY.getYear());
            // Below line is because DMY month counts are 1-indexed
            // and Date month counts are 0-indexed
        vCalendar.set(Calendar.MONTH, pDMY.getMonthOfYear() - 1);
        vCalendar.set(Calendar.DAY_OF_MONTH, pDMY.getDayOfMonth());
        System.out.println(vCalendar.getTime());
        TimeUtilsServer.zeroCalendarHoursAndBelow(vCalendar);
        System.out.println(vCalendar.getTime());
        return vCalendar.getTime();
    }

public static void zeroCalendarHoursAndBelow(Calendar pToZero)
    {
        pToZero.set(Calendar.HOUR_OF_DAY, 0);
        pToZero.set(Calendar.MINUTE, 0);
        pToZero.set(Calendar.SECOND, 0);
        pToZero.set(Calendar.MILLISECOND, 0);
    } 
```

到 serverCreateDateFromDMY() 方法，我传递了这些参数：DMY=20120424，TimeZone 是：America/New_York。应用程序在我的时区本地运行，即 IST。

基于上述输入，打印以下输出。

```
Tue Apr 24 14:43:07 IST 2012

Tue Apr 24 09:30:00 IST 2012 
```

如您所见，在最后的输出时间没有归零。请问有什么建议吗？

@Marko，是的，我了解了 DateFormat 并尝试了以下示例。但是日期仍然打印有时间而不是归零。

```
TimeZone tz = TimeZone.getTimeZone("America/New_York");
        Calendar vCalendar = Calendar.getInstance(tz);
        vCalendar.set(Calendar.YEAR, 2012);

        vCalendar.set(Calendar.MONTH, 4 - 1);
        vCalendar.set(Calendar.DAY_OF_MONTH, 24);
        DateFormat df = DateFormat.getDateTimeInstance();
        df.setTimeZone(tz); 
        System.out.println(df.format(vCalendar.getTime()));

         vCalendar.set(Calendar.HOUR_OF_DAY,     vCalendar.getActualMinimum(Calendar.HOUR_OF_DAY));
        vCalendar.set(Calendar.MINUTE, vCalendar.getActualMinimum(Calendar.MINUTE));
        vCalendar.set(Calendar.SECOND, vCalendar.getActualMinimum(Calendar.SECOND));
        vCalendar.set(Calendar.MILLISECOND,   vCalendar.getActualMinimum(Calendar.MILLISECOND));
        System.out.println(df.format(vCalendar.getTime())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:44:29.680

java Date/Time API 从创建之时起就有一个糟糕的设计。也许你应该看看一些库 - 例如隐藏 JDK API 缺陷的库 - [http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T09:58:15.040

在内部，日期和日历对象以 UTC 格式存储。当您将字段设置为 0 时，日历会以 UTC 进行更新。

当您向日历询问时间时，它会将日期转换为您想要的时区，从而产生差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:55:27.663

...您比纽约时间早 9:30。您将时间设置为纽约时间午夜并将其读出为您所在区域的时间。请注意，`getTime`返回 a `Date`，它不是时区可配置的。如果要`DateFormat`指定打印结果的时区，则需要。

# html - XSLT 用于 XML 到 HTML

> ID：10295317
> 
> 赞同：1
> 
> 时间：2012-04-24T09:37:21.780
> 
> 标签：html, xml, xslt

您好我正在寻找一个用于生成 HTML 的 XSLT，如下所示。以下是转换的详细信息。请提供您的意见。

对于每个 PageGroup 我需要创建一个

```
In HTML an Li element should be populated.

    <li>
        <a>Test</a>
    </li>

And under each Pagegroup for every Page Ul should be populated.
<ul>
        <li>
            <a>Test Role 1</a>
        </li>
        <li>
            <a>Test Role 2</a>
        </li>
</ul> 
```

XML:

```
<menuitems>
    <pagegroup title="Test">
        <pages id="1" url="Test1.aspx" description="Tes 1" type="1" role="Test Role 1"/>
        <pages id="2" url="Test2.aspx" description="Tes 2" type="1" role="Test Role 2"/>
        <pagegroup title="Projects">
            <pages id="4" url="Test 2 3.aspx" description="Test 2 3" type="1" role="Rol 3"/>
            <pages id="4" url="Test 2 5.aspx" description="Test 2 5" type="1" role="Rol 4"/>
        </pagegroup>
    </pagegroup>
</menuitems> 
```

**输出 HTML 期望**

```
<ul>
    <li>
        <a>Test</a>
    </li>
    <ul>
        <li>
            <a>Test Role 1</a>
        </li>
        <li>
            <a>Test Role 2</a>
        </li>
        <ul>
            <li>
                <a>Projects</a>
            </li>
            <ul>
                <li>
                    <a>Test 2 3</a>
                </li>
                <li>
                    <a>Test 2 5</a>
                </li>
            </ul>
        </ul>
    </ul>
</ul> 
```

**XSLT 试过了**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
            <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
            <xsl:template match="pagegroup">
                        <ul>
                                    <xsl:apply-templates select="pages"/>
                                    <li>
                                    <xsl:value-of select="@title"/>
                                    </li>
                        </ul>
            </xsl:template>
            <xsl:template match="pages">
                        <li>
                                    <xsl:value-of select="@role"/>
                                    <xsl:if test="pagegroup">
                                                <ul>
                                                            <xsl:apply-templates select="pages"/>
                                                            <li>
                                                            <xsl:value-of select="@title" />
                                                            </li>
                                                </ul>
                                    </xsl:if>
                        </li>
            </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:37:49.263

你离得太远了。主要问题是在您的模板中匹配**页面组**您正在这样做......

```
<xsl:apply-templates select="pages"/> 
```

当你真的想要这样做时，匹配**页面**和**页面组**

```
<xsl:apply-templates/> 
```

尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
   <xsl:template match="pagegroup">
      <ul>
         <li>
            <xsl:value-of select="@title"/>
         </li>
         <ul>
            <xsl:apply-templates/>
         </ul>
      </ul>
   </xsl:template>
   <xsl:template match="pages">
      <li>
         <xsl:value-of select="@role"/>
      </li>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<ul>
   <li>Test</li>
   <ul>
      <li>Test Role 1</li>
      <li>Test Role 2</li>
      <ul>
         <li>Projects</li>
         <ul>
            <li>Rol 3</li>
            <li>Rol 4</li>
         </ul>
      </ul>
   </ul>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:46:35.950

你对你想要的东西有点出乎我的意料。

这越来越接近，但你仍然不会得到你想要的，因为在一组页面中你似乎想要角色，而在另一个描述中。这是可能的，但我不确定这是否是你想要的

```
 <?xml version="1.0" encoding="ISO-8859-1"?>

    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

        <xsl:template match="pagegroup">
            <ul>
                <li>
                    <a><xsl:value-of select="@title"/></a>
                </li>
                <xsl:if test="pages | pagegroup">
                    <ul>
                        <xsl:apply-templates select="pages | pagegroup"/>
                    </ul>
                </xsl:if>

            </ul>
        </xsl:template>

        <xsl:template match="pages">
            <li>
                <a><xsl:value-of select="@role"/></a>
                <xsl:if test="pagegroup">
                    <ul>

                        <li>
                            <xsl:value-of select="@title" />
                        </li>
                    </ul>
                </xsl:if>
            </li>
        </xsl:template>
    </xsl:stylesheet> 
```

# python - 通过另一个停用词列表（子字符串）过滤python中的列表

> ID：10295321
> 
> 赞同：0
> 
> 时间：2012-04-24T09:37:31.560
> 
> 标签：python

我正在寻找通过另一个停止列表过滤一个列表的不错的 Pythonic 方式，但我想首先匹配第二个列表中的子字符串。

具体来说：我有 URL 列表 1 和列表 2，例如：

```
['microsoft.com', 'ibm.com', 'cnn', '.ru'] etc 
```

第一个 URL 列表很大（数千个项目），第二个列表较小，例如 500-1000。但是使用“in”或集合的简单匹配是不够的，因为第二个列表项应该用作子字符串搜索。我能想到的只是两个“for”循环，但它们似乎不是pythonic :)

PS 目的是从第一个列表中删除匹配的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:53:42.767

您可以从要匹配的字符串中构建一个单独的、分离的正则表达式，然后使用`search`RE 对象的方法进行匹配。`re.escape`在将字符串粘贴到 RE 中之前，请确保字符串。

```
>>> import re
>>> substrings = ['microsoft.com', 'ibm.com', 'cnn', '.ru']
>>> pattern = "(?:%s)" % "|".join(map(re.escape, substrings))
>>> print(pattern)
(?:microsoft\.com|ibm\.com|cnn|\.ru)
>>> pattern = re.compile(pattern)
>>> [x for x in ["www.microsoft.com", "example.com", "foo.ru"]
...    if not pattern.search(x)]
['example.com'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:56:21.467

这是你所期望的吗？

```
one=['microsoft.com', 'ibm.com', 'cnn', '.ru']
two=['.com']
filtered=[o for o in one for t in two if o.find(t)!=-1] 
```

# rest - 消息传递 - 所有属性或只是一个 id 指针

> ID：10295323
> 
> 赞同：2
> 
> 时间：2012-04-24T09:37:50.497
> 
> 标签：rest, msmq, messaging, nservicebus, amqp

我们正在考虑在我们的系统、多个组件、几个不同的堆栈等中集成消息传递（发布事件）。我们将从少量发布者和订阅者开始，然后逐步介绍有意义的地方。

如果我们发布一个事件，说类型：'NewProductAddedToCatalogue'，它应该包括新产品的所有属性还是只是新产品 ID 或某种形式的休息 url，例如 http://db.intranet/products/[uuid] . 每种方法的优点是什么？我觉得有些订阅者只会对最少数量的属性感兴趣，而其他订阅者（例如网站发布者）可能希望全部（或大部分）访问它们。这两种方法有什么明显的缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:32:17.627

快速回答 - 为什么不发布两种类型的事件消息？

一个可能是仅包含产品 ID 的轻量级事件，订阅者将使用该事件，然后自己丰富事件数据。

对于不想丰富数据的消费者，另一条消息将包含理解事件所需的所有数据。

更长的答案 - 我真的不喜欢“轻量级”活动的想法。这样做的问题是，您基本上是将您的事件消息变成了“发生了变化”的通知。

这会将事件从它的基础数据更改中删除 - 例如，通知没有说明发生了什么变化，而只是说明了某些事情发生了变化。事件消息完全有可能被延迟到底层数据不再处于与引发事件时相同的状态（这是否对您来说是个问题取决于您的个人要求）。

**然而更重要**的是，“丰富”数据的查找引入了组件之间的耦合——事件消息背后的想法是事件订阅者可以处理它——订阅者不需要知道任何关于消息发布者的信息——或者，更具体地说，关于消息来自的数据源。

但是，有一些好处 - 通知类型的消息处理本质上是[幂等](http://www.soapatterns.org/idempotent_capability.php)的，因此涉及的工作量更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:25:34.980

这是我们详细讨论过的一个有趣的话题，因为我们的产品目录是我们的核心。我们发现每个订阅者都会对一组公共数据感兴趣，然后它会用自己的数据增强这些数据。一个例子是营销订阅者，它将添加消费者友好的图像和描述。这与会添加身高、体重和立方体等内容的供应链订阅者完全不同。当每个组件负责自己的数据时，这种方法就有效。

如果您处于集中管理您的某些目录的情况，我们发现向每个订阅者发送公共元素以及它感兴趣的数据是最容易的。我们发现真的没有很多数据中的重叠，您可以保持系统解耦。

# android - 如何更改我的 Android 设备上的 MAC 地址？

> ID：10295324
> 
> 赞同：3
> 
> 时间：2012-04-24T09:37:51.443
> 
> 标签：android

是否有一种简单的方法可以手动更改 Android 设备的 MAC 地址，例如从某些设置面板中的文本字段或我可以编辑的文本文件中？

这可以通过编程方式完成吗？例如，我可以从我的代码中调用一个 Android 库来更改 MAC 地址吗？

我们能否像对 WiFi 适配器一样对蓝牙适配器应用相同的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:43:08.740

你应该检查这个链接。

1.  [更改 WiFi MAC 地址](https://stackoverflow.com/questions/5287790/change-wifi-mac-address)

2.  [获取没有Wifi的android设备的MAC地址](https://stackoverflow.com/questions/6191832/get-mac-address-of-android-device-without-wifi)

3.  [如何在我的安卓手机上更改（永久）MAC 地址？](https://android.stackexchange.com/questions/17657/how-to-change-permanent-mac-address-on-my-android-phone)

# objective-c - 在 Xcode 4.3 中将文件附加到电子邮件

> ID：10295325
> 
> 赞同：0
> 
> 时间：2012-04-24T09:37:51.943
> 
> 标签：objective-c, xcode4.3, email-attachments

我是 iOS 编程和 Xcode 的新手，所以我会提前道歉。

我编写了一个小型应用程序，用户可以在其中完成多个文本框。完成文本框后，我创建了一个提交按钮。此时，所有数据都将写入沙箱中的 .csv 文件。

从这一点开始，我想要做的是，在第二个屏幕上创建一个按钮，该按钮获取 csv 文件并将其附加到电子邮件中，使用户能够发送它。

有没有人知道能够将沙盒中的文本文件或 csv 文件附加到电子邮件的方法？我唯一能找到的建议是，我必须将 .csv 文件中的数据重写到另一个文件中才能通过电子邮件发送数据。

先谢谢了。李。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:26:18.040

```
 MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
 [picker addAttachmentData:imageData mimeType:@"text/csv"  fileName:csvName]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:48:50.283

如果您在应用程序电子邮件中使用，请尝试MFMailComposer 的**addAttachmentData**属性。

你也可以检查一下 -[在 iPhone SDK 中使用 MFMailComposer 附加纯文本文件](https://stackoverflow.com/questions/3295886/attaching-plain-text-file-using-mfmailcomposer-in-iphone-sdk)

# c# - 您应该进行多次插入调用还是传递 XML？

> ID：10295326
> 
> 赞同：4
> 
> 时间：2012-04-24T09:37:55.687
> 
> 标签：c#, .net, sql-server, sql-server-2008

我有一个帐户创建过程，基本上当用户注册时，我必须在多个表中进行条目，即用户、个人资料、地址。用户表中有 1 个条目，配置文件中有 1 个条目，地址表中有 2-3 个条目。因此，最多将有 5 个条目。我的问题是我应该将它的 XML 传递给我的存储过程并在那里解析它，还是应该在我的 C# 代码中创建一个事务对象，保持连接打开并在循环中一一插入地址？

您如何处理这种情况？即使连接打开，进行多次调用也会降低性能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T09:45:48.600

没有冒犯，但你想多了。

收集您的信息，当您拥有所有信息时，创建一个事务并一次插入一个新行。这里没有性能影响，因为事务将是短暂的。

一个问题是，如果您在连接上创建事务，插入用户行，然后等待用户输入更多配置文件信息，插入，然后等待他们添加地址信息，然后插入，**不要这样做**，这是一个不必要的长时间运行的事务，并且会产生问题。

但是，您的方案（您拥有所有数据）是对事务的正确使用，它确保您的数据完整性并且不会对您的数据库造成任何压力，并且不会 - 它自己 - 造成死锁。

希望这可以帮助。

PS Xml 方法的缺点是增加了复杂性，您的代码需要知道 xml 的架构，您的存储过程也需要知道 Xml 架构。存储过程增加了解析 xml，然后插入行的复杂性。对于简单的短期运行事务，我真的没有看到额外复杂性的优势。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T10:07:16.690

如果要在多个表中插入记录，那么使用 XML 参数是一种复杂的方法。在 .net 中创建 Xml 并从 xml 中提取三个不同表的记录在 sql server 中很复杂。

在事务中执行查询是一种简单的方法，但是在 .net 代码和 sql server 之间切换时会降低一些性能。

最好的方法是在存储过程中使用表参数。在.net 代码中创建三个数据表并将它们传递到存储过程中。

--为每种类型的表创建类型TargetUDT1，TargetUDT2和TargetUDT3，其中包含需要插入的所有字段

```
CREATE TYPE [TargetUDT1] AS TABLE
             (
             [FirstName] [varchar](100)NOT NULL,
             [LastName] [varchar](100)NOT NULL,
             [Email] [varchar](200) NOT NULL
             ) 
```

--现在用以下方式写下sp。

```
 CREATE PROCEDURE AddToTarget(
     @TargetUDT1 TargetUDT1 READONLY,
     @TargetUDT2 TargetUDT2 READONLY,
     @TargetUDT3 TargetUDT3 READONLY)
     AS
 BEGIN
       INSERT INTO [Target1]
       SELECT * FROM @TargetUDT1

       INSERT INTO [Target2]
       SELECT * FROM @TargetUDT2

       INSERT INTO [Target3]
       SELECT * FROM @TargetUDT3
 END 
```

在.Net中，创建三个数据表并填写值，并正常调用sp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:01:22.890

您是否注意到任何性能问题，您正在尝试做的事情非常简单，许多应用程序每天都在这样做。注意不要卷入任何过早的优化。

数据库插入应该非常便宜，正如您建议的那样，创建一个新的事务范围，打开您的连接，运行您的插入，提交事务并最终处理所有内容。

```
using (var tran = new TransactionScope())
using (var conn = new SqlConnection(YourConnectionString))
using (var insetCommand1 = conn.CreateCommand())
using (var insetCommand2 = conn.CreateCommand())
{
    insetCommand1.CommandText = \\SQL to insert

    insetCommand2.CommandText = \\SQL to insert

    insetCommand1.ExecuteNonQuery();

    insetCommand2.ExecuteNonQuery();

    tran.Complete();
} 
```

将所有逻辑捆绑到存储过程中并使用 XML 会给您带来更多复杂性，您需要在数据库中添加额外的逻辑，您现在必须将实体转换为 XML blob，并且您的代码变得更难进行单元测试。

您可以做很多事情来使代码更易于使用。第一步是将您的数据库逻辑推入可重用的数据库层，并使用存储库的概念从数据库中读取和写入您的对象。

您当然可以让您的生活更轻松，并查看任何可用的[ORM（对象关系映射）](http://en.wikipedia.org/wiki/Object-relational_mapping)库。他们消除了与数据库交谈的痛苦并为您处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T09:49:35.077

例如假设您的 xml 如下

```
<StoredProcedure>
<User>
 <UserName></UserName>
</User>
<Profile>
 <FirstName></FirstName>
</Profile>
<Address>
 <Data></Data>
 <Data></Data>
 <Data></Data>
</Address>
</StoredProcedure> 
```

这将是您的存储过程

```
INSERT INTO Users (UserName) SELECT(UserName) FROM OPENXML(@idoc,'StoredProcedure/User',2)
WITH ( UserName NVARCHAR(256)) 
```

这将提供 idoc 变量值，@doc 是存储过程的输入

```
DECLARE @idoc INT

--Create an internal representation of the XML document.        
EXEC sp_xml_preparedocument @idoc OUTPUT, @doc 
```

使用类似的技术，您将在单个存储过程中运行 3 次插入。请注意，它是对数据库的单次调用，并且多个地址元素将被插入到对该存储过程的单次调用中。

### 更新

只是为了不误导你，这里有一个完整的存储过程，让你明白你要做什么

```
USE [DBNAME]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER OFF
GO  
CREATE PROCEDURE [dbo].[procedure_name]
    @doc [ntext]
WITH EXECUTE AS CALLER
AS
DECLARE @idoc INT  
DECLARE @RowCount INT
SET @ErrorProfile = 0

--Create an internal representation of the XML document.
EXEC sp_xml_preparedocument @idoc OUTPUT, @doc

BEGIN TRANSACTION

INSERT INTO Users (UserName)
SELECT UserName FROM OPENXML(@idoc,'StoredProcedure/User',2)
WITH ( UserName NVARCHAR(256) )

-- Insert Address

-- Insert Profile

SELECT @ErrorProfile = @@Error                              

IF @ErrorProfile = 0
    BEGIN
            COMMIT TRAN
    END
ELSE
    BEGIN
            ROLLBACK TRAN
    END

EXEC sp_xml_removedocument @idoc 
```

# python - python中与语言环境无关的字符串到浮点转换

> ID：10295327
> 
> 赞同：0
> 
> 时间：2012-04-24T09:37:56.530
> 
> 标签：python, locale, string-conversion

我需要将字符串转换为浮点数，但可以有不同的输入字符串格式，例如`'1234,5'`或`'1234.5'`或`'1 234,5'`或`'1,234.5'`或其他。而且我无法更改语言环境十进制指针或千位分隔符，因为我可能不知道我会提前得到什么数据。

有没有一种方法或方法或库来解析和转换以浮动这种特定于语言环境的值而不知道使用哪个语言环境？

PS 对于日期的相同问题是否存在任何解决方案？

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:49:01.127

您可以假设哪个字符是千位分隔符，哪个是小数点。但是，在某些情况下，您无法确定要做什么：

*   查找最后一个字符`.`or `,`。如果它出现多次，则数字没有小数点，并且该字符是千位分隔符
*   如果字符串只包含一个，最后一个是小数点
*   如果字符串只包含一个点/逗号，那么你很不走运：`123.456`或者`123,456`可能是数字`123456`或`123.456`. 但是，对于类似的数字`123.45`- 即潜在千位分隔符后的位数不是三的倍数 - 您可以假设它是小数点。

# php - PHP URL 缩短器

> ID：10295328
> 
> 赞同：2
> 
> 时间：2012-04-24T09:38:01.620
> 
> 标签：php

我已经阅读了大约 5-10 篇关于这个主题的不同帖子，但没有一个给出明确的例子。他们解释了背景故事。

1.  我有一个 MySQL 数据库，记录从“1”到“500000”
2.  我希望 URLS 基于这些记录 ID 号
3.  我希望 URL 保持在 3-5 个数字之间

例子：

[http://wwwurl.com/1](http://wwwurl.com/1)将 再次 是[http://wwwurl.com/ASd234s](http://wwwurl.com/ASd234s) [http://wwwurl.com/5000000](http://wwwurl.com/5000000)将是[http://wwwurl.com/Y2v0R4r](http://wwwurl.com/Y2v0R4r)

我可以得到一个清晰的功能代码示例来完成这项工作，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:08:12.463

要将 id 号减少到较短的字符串，请转换为 base 35....

```
 $short_id=base_convert($id, 10, 35); 
```

如果您想让预测序列变得更加困难，请将其填充并使用已知字符串进行异或：

```
 function shortcode($id)
 {
   $short_id=str_pad($short_id, 4, '0', STR_PAD_LEFT);
   $final='';
   $key='a59t'; // 500000 = 'bn5p'
   for ($x=0; $x<strlen($short_id); $x++) {
     $final=chr('0') | (ord(substr($short_id, $x, 1)) ^ ord(substr($key, $x, 1));
   }
   return $final;
 } 
```

要取回原始 ID，只需反转该过程即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:03:27.937

一个非常愚蠢的例子 - 使用 eg `substr(md5($id), 10, 15)`，其中 $id 是您的 1-500000 记录 ID 号。在 32 个字符的哈希码中，在位置 10 和 15（但您也可以使用位置 24-28 等）之间生成相同哈希的概率限制为零......

最好将映射 ID <-> HASH 保存到数据库表中，以便根据 URL 轻松找到相关记录。

完整的源代码——哈希创建、URL 重写、映射保存和基于 URL 的记录检索是一个非常复杂的问题，可以在数千种变体中实现，主要取决于程序员的技能、经验以及他正在实现的系统。 ..

# iphone - 等待调度队列完成 - 时间 - iPhone

> ID：10295337
> 
> 赞同：0
> 
> 时间：2012-04-24T09:38:37.567
> 
> 标签：iphone, objective-c, xcode, multithreading, grand-central-dispatch

假设我有一个具有以下方法 strucutre 的应用程序：

```
[self method1];
[self method2]; 
```

并且该方法 1 包含一个调度队列，例如：

```
[exportSession exportAsynchronouslyWithCompletionHandler:^{
    switch (exportSession.status) {
        case AVAssetExportSessionStatusFailed:{
            NSLog (@"FAIL");
            break;
        }
        case AVAssetExportSessionStatusCompleted: {
            NSLog (@"SUCCESS");
}
};
 }]; 
```

我只想在方法 1 中的调度队列完成后继续执行 [方法 2]。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:50:04.017

将调用`-method2`放在完成处理程序块内。

# actionscript-3 - 是否可以在 flex 中动态添加 (.as) actionscript 文件？

> ID：10295339
> 
> 赞同：0
> 
> 时间：2012-04-24T09:38:42.200
> 
> 标签：actionscript-3, apache-flex

我正在开发加载动作脚本文件的 flex 应用程序。

```
<DrawingArea id="drawingArea"   xmlns="*" width="100%" height="100%" add="drawingArea_addHandler(event)"/> 
```

我需要动态添加它，怎么做？指导我

**更新** 这是我的绘图区如何创建`var da:DrawingArea=new DrawingArea` 如何访问监听功能？公共功能绘图区（）{超（）；

```
 addEventListener(FlexEvent.CREATION_COMPLETE, function(event:FlexEvent):void {
            erase();
        });

        addEventListener(MouseEvent.MOUSE_DOWN, function(event:MouseEvent):void {
            x1 = mouseX;
            y1 = mouseY;
            isDrawing = true;
        });

        addEventListener(MouseEvent.MOUSE_MOVE, function(event:MouseEvent):void {
            if (!event.buttonDown)
            {
                isDrawing = false;
            }

            x2 = mouseX;
            y2 = mouseY;
            if (isDrawing)
            {
                graphics.lineStyle(2, drawColor);
                graphics.moveTo(x1, y1);
                graphics.lineTo(x2, y2);
                x1 = x2;
                y1 = y2;
            }
        });

        addEventListener(MouseEvent.MOUSE_UP, function(event:MouseEvent):void {
            isDrawing = false;
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:46:12.297

如果这是您想要的，您将无法在内存中加载文件然后在 Acionscript 中执行它。但是，您可以做的是`DrawingArea`在运行时基于某些事件（例如用户单击或特定超时时间）创建一个（或任何其他元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:08:44.603

在这种情况下，您的函数是内联定义的。除非你不给他们名字，否则无论如何都是不可能的。我会建议

```
addEventListener(MouseEvent.MOUSE_DOWN, mouseDownFunction);
public function mouseDownFunction(event:MouseEvent = null ):void {
        x1 = mouseX;
        y1 = mouseY;
        isDrawing = true;
    } 
```

然后它们应该可以通过对象访问。DrawingArea.mouseDownFunction()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:25:38.863

我已对您的代码进行了更改。

```
package
    {
        import flash.events.MouseEvent;

        import mx.core.UIComponent;

        public class DrawingArea
        {
            private var _target:UIComponent;

            private var _x1:Number;
            private var _y1:Number;

            private var _x2:Number;
            private var _y2:Number;

            [Bindable]
            private var _isDrawing:Boolean = false;

            private var _drawColor:uint = 0xFFFF00

            public function DrawingArea(target:UIComponent)
            {
                //TODO: implement function
                _target = target
                _target.addEventListener(MouseEvent.MOUSE_DOWN, downEvent, false, 0, true);
                _target.addEventListener(MouseEvent.MOUSE_UP, upEvent, false, 0, true);
                _target.addEventListener(MouseEvent.MOUSE_OUT, upEvent, false, 0, true);
            }

            private function downEvent(event:MouseEvent):void
            {
                _x1 = event.localX;
                _y1 = event.localY;
                _isDrawing = true;

                _target.addEventListener(MouseEvent.MOUSE_MOVE, moveEvent, false, 0, true);
            }

            private function moveEvent(event:MouseEvent):void
            {
                if (!event.buttonDown)
                {
                    _isDrawing = false;
                }

                _x2 = event.localX;
                _y2 = event.localY;
                if (_isDrawing)
                {
                    _target.graphics.lineStyle(2, _drawColor);
                    _target.graphics.moveTo(_x1, _y1);
                    _target.graphics.lineTo(_x2, _y2);
                    _x1 = _x2;
                    _y1 = _y2;
                }

            }

            private function upEvent(event:MouseEvent):void
            {
                _isDrawing = false;

                _target.removeEventListener(MouseEvent.MOUSE_MOVE, moveEvent);
            }

            public function set drawColor(value:uint): void{
                _drawColor = value;
            }

        }
    } 
```

在其中创建了一个 DrawingAreaView.mxml 类，为 DrawingArea 创建了对象并将类本身作为容器传递。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns="components.*" xmlns:mx="http://www.adobe.com/2006/mxml"
           creationComplete="onInit();">

    <mx:Script>
        <![CDATA[
            import components.DrawingArea;

            private var drawingArea:DrawingArea;

            private function onInit():void {
                drawingArea = new DrawingArea(this);
            }
        ]]>
    </mx:Script>
</mx:Canvas> 
```

在应用程序中使用上述类。

```
<DrawingAreaView id="drawingArea" width="100%" height="100%"/>

or

private var _drawingAreaView:DrawingAreaView = new DrawingAreaView();

parentObject.addChild(_drawingAreaView); 
```

# c# - 并非所有代码路径都返回值

> ID：10295341
> 
> 赞同：0
> 
> 时间：2012-04-24T09:38:53.653
> 
> 标签：c#

我得到一个错误不是所有的代码路径都返回一个值？

```
 public string Authentication(string studentID, string password) // this line?
    {
        var result = students.FirstOrDefault(n => n.StudentID == studentID);
        //find the StudentID that matches the string studentID 
        if (result != null)
        //if result matches then do this
        {
            //---------------------------------------------------------------------------- 
            byte[] passwordHash = Hash(password, result.Salt);
            string HashedPassword = Convert.ToBase64String(passwordHash);
            //----------------------------------------------------------------------------
            // take the specific students salt and generate hash/salt for string password (same way student.Passowrd was created)

            if (HashedPassword == result.Password)
            //check if the HashedPassword (string password) matches the stored student.Password
            {
                return result.StudentID;
                // if it does return the Students ID                     
            } 

        }
        else
        //else return a message saying login failed 
        {
            return "Login Failed";
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T09:40:04.463

如果结果不是 null 而是 result.Password != HashedPassword 你没有返回任何东西。

您应该更改为：

```
...
if (HashedPassword == result.Password)
{
     return result.StudentID;
     // if it does return the Students ID                     
} 
return "Invalid Password";
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T09:40:01.147

问题在于，由于嵌套的 if 语句，您的第一个 if 语句不能确保返回值。假设您将结果设置为一个值（非空）并且您的散列密码和提供的密码不匹配，如果您遵循该逻辑，您将无法命中返回语句。

您应该像这样在嵌套的 if 语句中添加 else 子句：

```
if (HashedPassword == result.Password)
//check if the HashedPassword (string password) matches the stored student.Password
{
    return result.StudentID;
    // if it does return the Students ID                     
} 
else
{
    return "Login Failed";
} 
```

或者更可取的是，删除您已经拥有的 else 语句，以便函数以返回登录失败结束：

```
if (result != null)
{
   //....
}

return "Login Failed"; 
```

...使用第二种方法，您无需担心使用 else ，因为如果满足所有其他条件，则嵌套的 return 语句无论如何都会结束该函数。如果任何身份验证步骤失败，请尝试将此最终返回视为默认操作

* * *

在您的代码中要注意的另一点是，以这种方式返回混合数据并不是理想的做法。即结果可能是学生证，也可能是错误消息。考虑创建一个具有多个属性的专用结果类，调用代码可以检查这些属性以查看逻辑验证的状态。类似以下的类将是一个好的开始：

```
public class LoginResult
{
   //determines if the login was successful
   public bool Success {get;set;}

   //the ID of the student, perhaps an int datatype would be better?
   public string StudentID {get;set;}

   //the error message (provided the login failed)
   public string ErrorMessage {get;set;}
} 
```

（尽管如此，您的调用代码似乎已经知道学生ID）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:40:25.213

删除其他。做就是了

```
if(result != null) {
    ...
}
return "Login Failed"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T09:40:47.053

如果出现以下情况，您还应该返回一些东西：

```
if (HashedPassword != result.Password) 
```

在内部 if 中放一个 else

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-24T09:44:07.397

我对您的代码进行了一些更改。尝试一下。

```
public string Authentication(string studentID, string password) 
{
    var result = students.FirstOrDefault(n => n.StudentID == studentID);
    var yourVar;       
    if (result != null)       
    {

        byte[] passwordHash = Hash(password, result.Salt);
        string HashedPassword = Convert.ToBase64String(passwordHash);

        if (HashedPassword == result.Password)            
        {
            //return result.StudentID;
            yourVar = result.StudenID;
            // if it does return the Students ID                     
        } 

    }
    else
    //else return a message saying login failed 
    {
        yourVar = "Login Failed";
    }
    return yourVar;
} 
```

# iphone - 通过基于 UITabBarController 的应用程序中的“更多”选项卡访问的 UIViewController 被推送到哪个 UINavigationController

> ID：10295346
> 
> 赞同：2
> 
> 时间：2012-04-24T09:39:05.023
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller

我有一个基于 UITabBarController 的应用程序，它显示了许多基于 UINavigationController 的选项卡，我正在将各个 UIViewControllers 加载到这些选项卡上。

为了支持界面旋转，我试图将 willRotateToInterfaceOrientation 和 didRotateFromInterfaceOrientation 事件转发到我可见的个人 UIViewController（它是 UINavigationControllers 堆栈之一的一部分），如下所示：

```
// this is in my sub-classed UITabBarController
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {

UIViewController *controller = self.selectedViewController;

// do not pass this to the More controller
if (controller == [self moreNavigationController]) return;

if ([controller isKindOfClass:[UINavigationController class]]) {        
    // although this is not the more controller, the count of view controllers is 0
    // => this view has been pushed onto the moreNavigationController
    if ( [(UINavigationController *)controller viewControllers]==nil || [[(UINavigationController *)controller viewControllers] count]==0 ) {
        controller=[[self moreNavigationController] visibleViewController];
    } else {
        controller = [(UINavigationController *)controller visibleViewController];            
    }
}

[controller didRotateFromInterfaceOrientation:fromInterfaceOrientation]; 
```

}

我正在寻求对代码中间部分的确认。我注意到通过“更多”选项卡访问的各个 UIViewController*不会*推送到我设置的 UINavigationController 的堆栈上，而是直接推送到 MoreNavigationController 上，尽管 self.selectedViewController 返回我的 UINavigationController（而不是 MoreNavigationController），它的 viewControllers 数组的计数为 0。因此，为了获取当前显示的 UIViewController，我需要从 MoreNavigationController 中获取它。

我是在做正确的事，还是我遗漏了一些明显的东西？

# jpa - JPA：TypedQuery 有时返回 null 而不是 NoResultException

> ID：10295347
> 
> 赞同：8
> 
> 时间：2012-04-24T09:39:26.123
> 
> 标签：jpa, hql, jpa-2.0

通常我使用 NoResultException 返回一个“空”对象，例如一个空的错误列表或 new BigInteger("0")，如果我没有从 TypedQuery 得到任何结果。现在事实证明，这有时是行不通的。突然 getSingleResult() 返回 null 而不是导致 NoResultException，我不明白为什么。看这个例子：

```
public BigInteger pointsSumByAccountId(long accountId)
{
    try
    {
        TypedQuery<BigInteger> pointsQuery = entityManager.createNamedQuery(Points.SumByAccountId, BigInteger.class);
        pointsQuery.setParameter(Points.AccountIdParameter, accountId);

        return pointsQuery.getSingleResult();
    }
    catch (NoResultException e)
    {
        return new BigInteger("0");
    }
} 
```

实体的重要组成部分...

```
@NamedQueries({@NamedQuery(name = "Points.sumByAccountId", query = "select sum(p.value) from Points p where p.validFrom <= current_timestamp() and p.validThru >= current_timestamp() and p.account.id = :accountId")})
public class Points
{
    private static final long serialVersionUID = -15545239875670390L;

    public static final String SumByAccountId = Points.class.getSimpleName() + ".sumByAccountId";
    public static final String AccountIdParameter = "accountId";
.
.
. 
```

如果我使用没有结果的 accountId，我会得到 null 而不是 NoResultException。任何想法为什么会这样？甚至 TypedQuery 的 Javadoc 也说它必须返回 NoResultException：

```
/**
 * Execute a SELECT query that returns a single result.
 *
 * @return the result
 *
 * @throws NoResultException if there is no result
 * @throws NonUniqueResultException if more than one result
 * @throws IllegalStateException if called for a Java
 * Persistence query language UPDATE or DELETE statement
 * @throws QueryTimeoutException if the query execution exceeds
 * the query timeout value set and only the statement is
 * rolled back
 * @throws TransactionRequiredException if a lock mode has
 * been set and there is no transaction
 * @throws PessimisticLockException if pessimistic locking
 * fails and the transaction is rolled back
 * @throws LockTimeoutException if pessimistic locking
 * fails and only the statement is rolled back
 * @throws PersistenceException if the query execution exceeds
 * the query timeout value set and the transaction
 * is rolled back
 */
X getSingleResult(); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-24T11:26:53.747

这对我来说似乎是正确的行为。

`NoResultException`当没有返回行时抛出，但在您的情况下只`sum`返回一行具有`null`值。来自 JPA 2.0 规范：

> 如果使用 SUM、AVG、MAX 或 MIN，并且没有可以应用聚合函数的值，则聚合函数的结果为 NULL。

如果你想得到`0`而不是`null`，使用`coalesce`：

```
select coalesce(sum(p.value), 0) ... 
```

# ios4 - iPhone - ECGraph 将我的图表绘制为 Y 轴上的一条线

> ID：10295350
> 
> 赞同：2
> 
> 时间：2012-04-24T09:39:36.053
> 
> 标签：ios4, graph

我正在使用带有 iOS 4 SDK 的 Xcode 3.2.3。

我正在准备一个用于在图表上绘制值的小应用程序。为此，我使用了 ECGraph 库。我下载了示例应用程序并对其进行了一些调整以适合我的目的。我希望图表在 X 轴上以小时为单位绘制时间，在 Y 轴上绘制一个简单的 int 值。

我的问题：当我选择在 ECGraph 中创建一个点作为（日期，值）的选项时，如果 X 轴上的比例即时间单位是日期，我可以看到该图表。如果我将时间单位更改为 HOUR，则图形是 Y 轴上的一条线，其中 Y 轴图是正确的，但 X 轴点始终是原点。

![显示的图表与预期不符，pt 2 为 (9, 13)](../Images/9a2a582d7d2d8bbaf7b602328816f143.png)

我在这里添加了我的 UIView 文件中的代码。它只是从演示应用程序中获取的一个，附带 ECGraph 库下载，然后针对我的东西进行了调整。

显示视图.m：

```
 //
    //  DisplayView.m
    //  ECGraphic
    //
    //  Created by ris on 10-4-17.
    //  Copyright 2010 __MyCompanyName__. All rights reserved.
    //

    #import "DisplayView.h"
    #import "ECCommon.h"
    #import "ECGraphPoint.h"
    #import "ECGraphLine.h"
    #import "ECGraphItem.h"

    @implementation DisplayView

    - (id)initWithFrame:(CGRect)frame {
        if ((self = [super initWithFrame:frame])) {
            // Initialization code
        }
        return self;
    }

    // Only override drawRect: if you perform custom drawing.
    // An empty implementation adversely affects performance during animation.
    - (void)drawRect:(CGRect)rect {

        // Drawing code
        CGContextRef _context = UIGraphicsGetCurrentContext();
        ECGraph *graph = [[ECGraph alloc] initWithFrame:CGRectMake(10, 50, 300, 350) withContext:_context isPortrait:YES];

        ECGraphPoint *point7 = [[ECGraphPoint alloc] init];
        point7.yValue = 7;
        point7.xDateValue = [ECCommon dOfS:@"08" withFormat:kDEFAULT_HOUR_FORMAT];

        ECGraphPoint *point8 = [[ECGraphPoint alloc] init];
        point8.yValue = 13;
        point8.xDateValue = [ECCommon dOfS:@"09" withFormat:kDEFAULT_HOUR_FORMAT];

        ECGraphPoint *point9 = [[ECGraphPoint alloc] init];
        point9.yValue = 1;
        point9.xDateValue = [ECCommon dOfS:@"10" withFormat:kDEFAULT_HOUR_FORMAT];

        ECGraphPoint *point10 = [[ECGraphPoint alloc] init];
        point10.yValue = 3;
        point10.xDateValue = [ECCommon dOfS:@"11" withFormat:kDEFAULT_HOUR_FORMAT];

        //NSArray *pts3 = [[NSArray alloc] initWithObjects:point7,point8,point9, point10, nil];
        NSArray *pts3 = [[NSArray alloc] initWithObjects:point7,point8, nil];
        ECGraphLine *line3 = [[ECGraphLine alloc] init];
        line3.isXDate = YES;
        line3.points = pts3;

        NSArray *lines = [[NSArray alloc] initWithObjects:line3,nil];
        [graph setXaxisTitle:@"Hours"];
        [graph setYaxisTitle:@"Energy consumed in Watts"];
        [graph setGraphicTitle:@"Weekly consumption of your device"];
        [graph setXaxisDateFormat:kDEFAULT_HOUR_FORMAT];
        [graph setDelegate:self];
        [graph setBackgroundColor:[UIColor colorWithRed:220/255.0 green:220/255.0 blue:220/255.0 alpha:1]];
        [graph setPointType:ECGraphPointTypeCircle];
        [graph drawCurveWithLines:lines lineWidth:2 color:[UIColor blackColor]];

    }

    - (void)dealloc {
        [super dealloc];
    }

    @end 
```

# javascript - 在重定向之前将有关单击的链接的信息发送到服务器

> ID：10295354
> 
> 赞同：6
> 
> 时间：2012-04-24T09:39:45.440
> 
> 标签：javascript, jquery

我们正在创建一个点击跟踪应用程序，用于构建热图。我正在编写一个脚本，用户应该将其插入到他们的页面中以进行跟踪。

它适用于不需要重定向或表单提交的元素。例如，如果我点击`h1`或`p`或其他任何东西，它的工作原理是完全正确的。但是，如果我点击一个`a`，对我们服务器的请求永远不会在正常重定向之前发生。

在过去的几天里，我尝试了很多方法来做到这一点。首先，我尝试了一个普通的 AJAX 调用，因为它是一个跨域请求，我必须使用 JSONP，但同样，该 AJAX 调用在重定向之前没有时间执行。添加`async: false`会解决问题，但它不适用于 JSONP 请求。所以我决定添加一个标志变量，表明可以安全地继续使用重定向，并使用一个空的while循环等待它在ajax回调中变为try。但是 while 循环阻塞了执行流程，所以回调永远没有机会将该变量设置为`true`. 这是一些简化的代码：

```
$(document).on('click', function (e) {
    //part of the code is omitted 
    $.ajax({
        url: baseUrl,
        data: data,
        type: "get",
        dataType: "jsonp",
        crossDomain: true,
        complete: function (xhr, status,) {
            itsSafeToMoveOn = true;
        }
    });

    while(!itsSafeToMoveOn){}

    return true;
}); 
```

我尝试的下一件事是使用`unload`页面事件等到正在进行的总 ajax 调用变为零（我实现了一个计数器），然后继续进行重定向。它在 Firefox 和 IE 中工作，但在 WebKit 中有这个错误：

```
Error: Too much time spent in unload handler 
```

之后我意识到我不关心服务器响应并且使用`img.src`请求将非常适合这种情况。所以此时代码如下所示：

```
$(document).click(function (e) {
    //part of the code is ommited
    (new Image).src = baseUrl + '?' + data;

    if (tag === "a" || clickedElement.parents().has("a")) {
        sleep(100); 
    }

    return true;
}); 
```

这样我稍微提高了整体脚本性能，但链接问题保持不变。该`sleep`函数似乎也阻塞了执行流程，并且请求永远不会发生。

剩下的唯一想法是`false`从事件处理程序返回，而不是手动重定向到单击的元素`href`或调用`submit()`表单，但这会使事情复杂化，相信我，在不同的环境中调试这个脚本已经很痛苦了浏览器。

有没有人有任何其他想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T13:19:18.647

```
var globalStopper = true;

$(document).on('click', function (e) {
    if (globalStopper === false)
        return true; //proceed with click if stopper is NOT set
    else {
        globalStopper = false; //release the breaks

        $.ajax({
            //blahblah
            complete: function (xhr, status,) {
                $(elem).click(); //when ajax request done - "rerun" the click
            }
        });
        return false; //DO NOT let browser process the click
    }
}); 
```

另外，不要添加图像，而是尝试添加脚本。然后将脚本添加到 HEAD 部分。这样浏览器将“等待”直到它被加载。

```
 $(document).on('click', function (e) {
     var scriptTag = document.createElement("script");
     scriptTag.setAttribute("type", "text/javascript");
     scriptTag.setAttribute("src", url);
     document.getElementsByTagName("head")[0].appendChild(scriptTag);
     return true;
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-08-29T16:38:51.980

我会看一下[这个堆栈溢出答案](https://stackoverflow.com/a/56682830/3281032)中提到的导航器 sendBeacon API或直接链接到[这里](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon)。

从网站上的描述

> navigator.sendBeacon(url, data) - 此方法满足分析和诊断代码的需求，这些代码通常会在卸载文档之前尝试将数据发送到 Web 服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:18:37.820

您可以将信息保存到 ajax 请求中的 cookie 或 localStorage 中，并使任何将发送信息的工作人员。保存到 cookie 或 localStorage 比 ajax-request 更快。您可以执行以下操作：

```
$(document).click(function (e) {
    var queue = localStorage.getItem('requestQueue');
    queue.push(data);
    localStorage.setItem('requestQueue',queue);
});

$(function(){
  setInterval(function(){
    var queue = localStorage.getItem('requestQueue');
    while (queue.length > 0) {
      var data = queue.pop();
      $.ajax({
        ...
        success: function(){
          localStorage.setItem('requestQueue', queue);
        }
      });
    }
  },intervalToSendData);
}); 
```

因此，当用户单击链接或发送表单时，数据将被保存到存储中，并且在用户转到下一页后，该工作人员启动并将数据发送到您的服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T12:21:03.663

JavaScript 基本上是在单线程中执行的。不可能让你的回调函数执行，同时有一个无限循环等待它的标志变量。无限循环将占用单个执行线程，并且永远不会调用回调。

最好的方法是取消事件的默认处理程序并为它冒泡（如果您真的使用 jQuery 构建跟踪代码，则基本上返回 false），并执行必要的操作（如果单击或触发链接，则将页面重定向到必要的地址其他默认操作），但这需要大量仔细的工作来重新创建所有可能的操作和回调组合。

另一种方法是： 1）在事件数据中查找特定于您的代码的内容 2）如果它不存在 - 进行 AJAX 调用并在其回调中重新触发相同的元素，即使在同一个元素上，但这次是您的添加到偶数数据的特定位；在 AJAX 调用之后返回 false 3) 如果您的特定位存在于数据中 - 只需什么都不做，允许进行默认事件处理。

然而，这两种方法都可能会咬人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T09:47:36.857

因此，如果我理解正确，您希望您的 ajax 日志在页面卸载并遵循链接 href 之前完成。这听起来像是一个完美的案例，您可以考虑在 jQuery 中使用[Deferreds 。](http://api.jquery.com/category/deferred-object/)

当您的用户点击任何应该让他离开页面的东西时，只需检查您的`promise`状态。如果没有解决，您可以在页面上抛出一个模式窗口，并要求用户等待直到进度完成。然后，在你的 中添加一个新`pipe`的，告诉它在一切完成后`deferred`更改。`location href`

让我知道这是否是这种情况。如果是，我会更详细地解释。如果我没有正确理解您的要求，则继续无用

# java - 在 STS 中使用 Maven3.0.3 将 .jar 安装到本地存储库后无法使用依赖项

> ID：10295361
> 
> 赞同：0
> 
> 时间：2012-04-24T09:40:09.107
> 
> 标签：java, eclipse, maven, m2e

我有一个在 Maven 存储库中找不到的 JAR。

所以我使用以下命令安装到我的本地存储库中

```
install:install-file -Dfile=C:/FIXApplication/lib/quickfixj-all-1.5.2 -DgroupId=org.quickfixj -DartifactId=quickfixj -Dversion=1.5.2 -Dpackaging=jar -DgeneratePom=true 
```

结果成功了，我可以找到.m2\repository\org\quickfixj\quickfixj下的文件夹

但是当我修改 pom.xml 以添加依赖项时。它说：缺少工件 org.quickfixj:quickfixj:jar:1.5.2

为什么会这样？为什么无法读取本地存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:32:50.157

尽管该命令没有出错，但本地存储库很可能没有工件。

你的命令有这部分

```
-Dfile=C:/FIXApplication/lib/quickfixj-all-1.5.2 
```

应该是

```
-Dfile=C:/FIXApplication/lib/quickfixj-all-1.5.2.jar 
```

也许您可以进行此更改，再试一次，看看它是否有效。

# php - 注意：未初始化的字符串偏移量：/.../libraries/functions.php 第 316 行中的 62

> ID：10295369
> 
> 赞同：1
> 
> 时间：2012-04-24T09:40:47.000
> 
> 标签：php

伙计，伙计，我无法弄清楚...请帮忙。这里缺少什么？

以下是错误：

```
Notice: Uninitialized string offset: 62 in /..../libraries/functions.php on line 316
Notice: Undefined variable: stilldo in /..../libraries/functions.php on line 322 
```

这是代码：

```
function generate_password($length = 12, $letters = true, $mixed_case = true, $numbers = true, $punctuation = false){

    ## Generate the alfa
    $alfa = '';
    if($letters == true)    $alfa .= 'abcdefghijklmnopqrstuvwxyz';
    if($mixed_case == true) $alfa .= strtoupper('abcdefghijklmnopqrstuvwxyz');
    if($numbers == true)    $alfa .= '0123456789';
    if($punctuation == true)$alfa .= '~!@#$%^&*(),.=+<>';

    ## Set Random Seed
    if(!function_exists('_generate_password_seed')):
    function _generate_password_seed(){
        list($usec, $sec) = explode(' ', microtime());
        return (float) $sec + ((float) $usec * 100000);
    }
    endif;
    srand(_generate_password_seed());

    ## Generate the password
    $token = "";
    for($i = 0; $i < $length; $i ++) {
        $token .= $alfa[@rand(0, @strlen($alfa))];
    }

    ## Check the length
    if(strlen($token) < $length){
        // echo $stilldo = $length - strlen($token);
        $token .= generate_password($stilldo);
    }

    ## Return the password
    return $token;
} 
```

我运行此功能的 10 次中有 5 次出现此错误，但我似乎无法破解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:55:00.970

`Notice: Undefined variable: stilldo`意味着，一个变量`$stilldo`没有定义，也没有初始化......这意味着，当您`generate_password`将一个未定义的变量传递给函数时，您在递归中调用函数，该变量实际上具有一个空值。因此，您的功能无法正常工作。

您的代码部分应如下所示：

```
## Check the length
if(strlen($token) < $length){
    $stilldo = $length - strlen($token);
    $token .= generate_password($stilldo);
} 
```

是的，一个愚蠢的错误 - 你注释掉了正确的行（只`echo`应该注释掉或删除）。

享受！

# javascript - Finding all the markers inside a given radius

> ID：10295371
> 
> 赞同：23
> 
> 时间：2012-04-24T09:40:48.950
> 
> 标签：javascript, algorithm, google-maps

Input: Given a specific co-ordinate (latitude and longitude) and radius Output: Displaying all the markers which reside under that circle from given list of markers.

How can I do this in google maps?

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-24T09:48:40.507

Just iterate all the markers you have and use the following function to get the distance from the specific co-ordinate to the marker: `computeDistanceBetween()`:

> To compute this distance, call computeDistanceBetween(), passing it two LatLng objects.

I found it over [here](https://developers.google.com/maps/documentation/javascript/geometry?hl=en#Distance). Then just filter out all the markers that turn out to be close enough.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T10:00:13.273

```
var targetLat=marker.getPosition().lat();
var targetLng=marker.getPosition().lng();

var targetLoc = new GLatLng(targetLat,targetLng);

var center= new GLatLng(centerLat, centerLng); 

var distanceInkm=center.distanceFrom(targetLoc) / 1000;

if(distanceInkm < radius){
// To add the marker to the map, call setMap();
marker.setMap(map);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-07T12:16:30.883

Here is a working example. Click map to draw a radius with selected radius and it would display all the markers from `all_locations` example array which fall inside the radius. Click on a marker to see the distance in meters from the radius center. (Click somewhere around New York's Second Street to see the example markers - map is already centered to that location)

```
var map = null;
  var radius_circle = null;
  var markers_on_map = [];

  //all_locations is just a sample, you will probably load those from database
  var all_locations = [
	  {type: "Restaurant", name: "Restaurant 1", lat: 40.723080, lng: -73.984340},
	  {type: "School", name: "School 1", lat: 40.724705, lng: -73.986611},
	  {type: "School", name: "School 2", lat: 40.724165, lng: -73.983883},
	  {type: "Restaurant", name: "Restaurant 2", lat: 40.721819, lng: -73.991358},
	  {type: "School", name: "School 3", lat: 40.732056, lng: -73.998683}
  ];

  //initialize map on document ready
  $(document).ready(function(){
      var latlng = new google.maps.LatLng(40.723080, -73.984340); //you can use any location as center on map startup
      var myOptions = {
        zoom: 14,
        center: latlng,
        mapTypeControl: true,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

	  google.maps.event.addListener(map, 'click', showCloseLocations);
  });

  function showCloseLocations(e) {
  	var i;
  	var radius_km = $('#radius_km').val();
  	var address = $('#address').val();

  	//remove all radii and markers from map before displaying new ones
  	if (radius_circle) {
  		radius_circle.setMap(null);
  		radius_circle = null;
  	}
  	for (i = 0; i < markers_on_map.length; i++) {
  		if (markers_on_map[i]) {
  			markers_on_map[i].setMap(null);
  			markers_on_map[i] = null;
  		}
  	}

  	var address_lat_lng = e.latLng;
  	radius_circle = new google.maps.Circle({
  		center: address_lat_lng,
  		radius: radius_km * 1000,
  		clickable: false,
  		map: map
  	});
	if(radius_circle) map.fitBounds(radius_circle.getBounds());
  	for (var j = 0; j < all_locations.length; j++) {
  		(function (location) {
  			var marker_lat_lng = new google.maps.LatLng(location.lat, location.lng);
  			var distance_from_location = google.maps.geometry.spherical.computeDistanceBetween(address_lat_lng, marker_lat_lng); //distance in meters between your location and the marker
  			if (distance_from_location <= radius_km * 1000) {
  				var new_marker = new google.maps.Marker({
  					position: marker_lat_lng,
  					map: map,
  					title: location.name
  				});
  				google.maps.event.addListener(new_marker, 'click', function () {
  					alert(location.name + " is " + distance_from_location + " meters from my location");
  				});
  				markers_on_map.push(new_marker);
  			}
  		})(all_locations[j]);
  	}
  }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
      <script type="text/javascript">
        google.load("maps", "3",{other_params:"sensor=false&libraries=geometry"});
      </script>

<body style="margin:0px; padding:0px;" >

 <select id="radius_km">
	 <option value=1>1km</option>
	 <option value=2>2km</option>
	 <option value=5>5km</option>
	 <option value=30>30km</option>
 </select>
 <div id="map_canvas"  style="width:500px; height:300px;">
</body>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T09:49:32.530

Load the [geometry library](https://developers.google.com/maps/documentation/javascript/geometry) and use [`computeDistanceBetween()`](https://developers.google.com/maps/documentation/javascript/reference#spherical) to find the distance of each marker from your centre point.

If the distance is within the radius, display the marker.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T09:48:47.420

See the answer given to this question: [Google Maps Api v3 - find nearest markers](https://stackoverflow.com/questions/4057665/google-maps-api-v3-find-nearest-markers)

You basically need to loop through your array of markers, and use a formula to calculate their distance from a given point (the center of the circle representing your search radius).

You can then exclude any markers which are further away than the radius, ad you will be left with a list of markers which are inside the circle.

# python - 如果使用了错误的 IP，如何获取异常，对于 python memcache 客户端

> ID：10295372
> 
> 赞同：1
> 
> 时间：2012-04-24T09:40:52.943
> 
> 标签：python, memcached

```
mc = memcache.Client(['111.222.3.2:11211'], debug=1) 
```

如果使用了错误的 ip，客户端只显示调试日志。

> MemCached：MemCache：inet：72.18.195.210:11211：连接：连接被拒绝。标记死亡。

但我想得到错误的状态或异常。如何？

# php - 如何从 PHP 中的字符串中删除多个空格和换行符？

> ID：10295374
> 
> 赞同：4
> 
> 时间：2012-04-24T09:40:54.987
> 
> 标签：php, regex

我有一个带有文本区域的表单，我需要从此处输入的字符串中删除多个空格和多个新行。
我写了这个函数来删除多个空格

```
function fix_multi_spaces($string)
{
    $reg_exp = '/\s+/';
    return preg_replace($reg_exp," ",$string);
} 
```

此功能适用于空格，但它也替换了将它们更改为单个空格的新行。
我需要将多个空格更改为 1 个空格，将多个新行更改为 1 个新行。
我能怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T09:43:18.247

利用

```
preg_replace('/(( )+|(\\n)+)/', '$2$3', $string); 
```

这将专门用于空格和换行符；`\t`如果您还想定位它们，则必须将其他空白字符（例如制表符）添加到正则表达式。

此正则表达式通过匹配一个*或*多个空格*或*一个或多个换行符并将匹配替换为空格（但仅在匹配空格时）*和*换行符（但仅在匹配换行符时）来工作。

**更新：**原来有一些为我不知道的情况量身定制的正则表达式功能（非常感谢 craniumonempty 的评论！）。您可以将正则表达式编写为

```
preg_replace('/(?|( )+|(\\n)+)/', '$1', $string); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T10:35:32.730

您可以使用以下功能用单个空格替换多个空格和行...

```
function test($content_area){

//Newline and tab space to single space

$content_area = str_replace(array("\r\n", "\r", "\n", "\t"), ' ', $content_area);

// Multiple spaces to single space ( using regular expression)

$content_area = ereg_replace(" {2,}", ' ',$content_area);

return $content_area;

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T09:45:07.733

您知道正则表达式中的 \s 适用于所有空白，这意味着空格、换行符、制表符等。

如果您想用一个替换多个空格并用一个替换多个换行符，则必须重新编写函数以调用 preg_replace 两次-一次替换空格，一次替换换行符...

# ocean - Plugin.ImageResourceName 似乎没有任何效果

> ID：10295376
> 
> 赞同：0
> 
> 时间：2012-04-24T09:40:58.450
> 
> 标签：ocean

如果 Petrel 插件管理器可以为我们的每个插件显示我们的自定义位图，那就太好了 - 但是，该`Plugin.ImageResourceName`属性似乎没有任何效果。

```
 public override string ImageResourceName { get { return "Blueback.Toolbox.Plugin.Toolbox.png"; } } 
```

图像已正确嵌入（根据文档和 ILDisAsm） - 但插件管理器坚持使用通用图像。对尺寸或格式是否有未记录的要求？文档中的代码片段同时提到了 bmp 和 png，但没有证明该属性确实有效。

我无法在 SDK（仅模块示例）和代码示例下载（这里有几个插件，但它们为资源名称返回 null）中找到实际运行的示例。

任何人都可以提供工作样本或丢失的密钥吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:55:07.333

通过 Plugin.ImageResourceName 提供的图像显示在 Petrel 许可证对话框中，您是对的，它不会显示在插件管理器中，因为它总是使用通用图像来表示插件。我们将考虑在 Petrel 2013.1 中对其进行更改。

# ios - 在 iCarousel 中，图像是重叠的。

> ID：10295377
> 
> 赞同：2
> 
> 时间：2012-04-24T09:40:59.980
> 
> 标签：ios, xcode4.3, icarousel

我的代码如下

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    UIImageView *imgView = nil;

    if (view == nil)
    {
        NSLog(@"no is %i",index);

        view = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 255, 255)] autorelease];

        imgView = [[[UIImageView alloc] initWithImage:[ImagesCFArray objectAtIndex:index]] autorelease];

        [view addSubview:imgView];

    }

    else 
    {

    }

    return view;
} 
```

ImagesCfArray 包含要显示的图像。当轮播移动或滚动时，第 0 个索引图像与其他图像重叠。请给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:47:39.740

您可能想告诉子视图剪辑到其边界：

`imgView.clipToBounds = YES;`

而且，也许对图像使用填充：

`imgView.contentMode = UIViewContentModeScaleAspectFit;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:48:13.030

你能展示你的 itemWidth 实现吗？它返回的值是否超过 255？

# c# - 将 OrderBy Predicate 中的 Lambda 表达式从 C# 转换为 VB.net

> ID：10295379
> 
> 赞同：1
> 
> 时间：2012-04-24T09:41:05.200
> 
> 标签：c#, vb.net, predicate

我有以下按工作职位对实体进行排序。所需的顺序是在另一个数组中定义的。在 C# 中，此代码有效：

```
IEnumerable<CreditObject> query = credits.OrderBy(x =>
{
    for (int i = 0; i < list.Length; i++)
    {
        if (x.Job == list[i])
            return i;
    }
    throw new NotImplementedException("Job not within List");
}); 
```

但是我必须将其转换为 VB.net。我读到的等效内容如下：

```
Dim query As IEnumerable(Of CreditObject) = credits.OrderBy(Function(x) 

    For j As Integer = 0 To templ.Length - 1
        If x.Job = templ(j) Then
            Return j
        End If
    Next

End Function) 
```

这不会编译，在`Function(x)`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:55:57.083

首先，你把它变成一个真正的方法：

```
public int GetCreditObjectPosition(CreditObject x, List<int> list) {
    for (int i = 0; i < list.Length; i++) {
        if (x.Job == list[i]) {
            return i;
        }
    }
    throw new NotImplementedException("Job not within List");
} 
```

然后，您只需说：

```
IEnumerable<CreditObject> query =
    credits.OrderBy(x => GetCreditObjectPosition(x, list)); 
```

这很容易转换为VB。

接下来，您重写`GetCreditObjectPosition`以大幅提高性能：

```
public int GetCreditObjectPosition(CreditObject x, List<int> list) {
    var jobDictionary = 
        list.Select((job, index) => new { Job = job, Index = Index } )
            .ToDictionary(item => item.Job, item => item.Index);
    int position;
    if(!jobDictionary.TryGetValue(x.Job, out position)) {
        throw new Exception("Job not within List");
    }
    return position;
} 
```

# excel - excel vba：使字符串的一部分加粗

> ID：10295380
> 
> 赞同：9
> 
> 时间：2012-04-24T09:41:09.140
> 
> 标签：excel, vba

我有包含以下条目的 excel 单元格：

```
name/A/date
name/B/date
name/C/date 
```

单元格内容显示在同一单元格的多行中。我只想将所有条目的“名称”加粗。我录制了一个宏，我认为解决方案必须是这样的：

```
ActiveCell.FormulaR1C1 = "name/A/date" & Chr(10) & "name/B/date" & Chr(10) & "name/C/date"
With ActiveCell.Characters(Start:=25, Length:=4).Font
    .FontStyle = "Bold"
End With 
```

我不知道的是如何获取每个条目的起始值和长度。有人有想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T10:01:48.657

现在拥有它：

```
lngPos = InStr(ActiveCell.Value, "/")
With ActiveCell.Characters(Start:=1, Length:=lngPos - 1).Font
    .FontStyle = "Bold"
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-16T19:37:50.283

上面的答案非常好。因为它是相关的，所以我想包含一个类似的例程，我为解决我妻子宏中的格式化问题而编写。

在她的情况下，我们正在合并字符串并将串联写入一个由 vbCrLf (Chr(10)) 分隔的单元格，在她的最终输出中它看起来像这样

> 第 1
> 类： 第 2
> 类： 第 3 类：

每个类别的长度不同，类别的数量可能从一个单元格到下一个单元格不同。粘贴的子程序效果很好

```
Sub BoldCategory() 
RowCount = ActiveSheet.UsedRange.Rows.Count
Set MyRange = ActiveSheet.Range(Cells(2, 1), Cells(RowCount, 1))
For Each Cell In MyRange
    i = 1
    LineBreak = 1
    Do While LineBreak <> 0
        EndBoldPoint = InStr(i, Cell.Value, ":") + 1
        BoldLength = EndBoldPoint - i
        Cell.Characters(Start:=i, Length:=BoldLength).Font.FontStyle = "Bold"
        LineBreak = InStr(i, Cell.Value, Chr(10))
        i = LineBreak + 1
    Loop
Next Cell
End Sub 
```

所以“：”是我输入的字符以获得终点。Chr(10) 告诉我第一行何时结束，下一行何时开始。当到达最后一行时，instr 返回 0，因此 while 循环退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-15T13:12:25.663

受过去几天各种研究的启发：

```
Dim totalVals, startPos(), endPos(), i, j, strLen As Long
Dim currLine As String

' Split the cell value (a string) in lines of text
splitVals = Split(ActiveCell.Value, Chr(10))

' This is how many lines you have
totalVals = UBound(splitVals)

' For each line, you'll have a character where you want the string to start being BOLD
ReDim startPos(0 To totalVals)

' And one character where you'll want it to stop
ReDim endPos(0 To totalVals)

' The value of the current line (before we loop on ActiveCell.Value) is empty
currLine = ""

For i = 0 To totalVals ' For each line...

    ' Length of the string currently treated by our code : 0 if no treatment yet...
    strLen = Len(currLine)

    ' Here we parse and rewrite the current ActiveCell.Value, line by line, in a string
    currLine = currLine & IIf(currLine = "", "", Chr(10)) & splitVals(i)

    ' At each step (= each line), we define the start position of the bold part
    ' Here, it is the 1st character of the new line, i.e. strLen + 1
    startPos(i) = strLen + 1

    ' At each step (= each line), we define the end position of the bold part
    ' Here, it is just before the 1st "/" in the current line (hence we start from strLen)
    endPos(i) = InStr(IIf(strLen = 0, 1, strLen), currLine, "/")

Next i

' Then we use the calculated positions to get the characters in bold
For j = 0 To UBound(startPos)
    ActiveCell.Characters(startPos(j), endPos(j) - startPos(j)).Font.FontStyle = "Bold"
Next j 
```

这可能有点过头了，但我已经测试过了，它就像一个魅力。希望这可以帮助！

# python - Tkinter 警告消息中的“不再显示消息”复选框

> ID：10295384
> 
> 赞同：2
> 
> 时间：2012-04-24T09:41:20.740
> 
> 标签：python, checkbox, tkinter, message

我正在使用 Tkinter 创建消息框`tkMessageBox.showwarning`。

Tkinter 是否允许您在消息中插入一种复选框，例如“不再显示”，以便下次选择该消息时不会出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:05:07.193

不，标准对话框不支持。

`Toplevel`如果您想要这样的功能，您将不得不在窗口和其他小部件之外构建自己的对话框。

# mysql - MySQL select 语句的 QSlQuery 失败

> ID：10295386
> 
> 赞同：1
> 
> 时间：2012-04-24T09:41:31.780
> 
> 标签：mysql, qt

我的 Qt 应用程序中使用了以下 MySQL 查询：

```
query.prepare(QString("SELECT productName, value, COUNT(value), SUM(value)"
                  "FROM tblmystock"
                  "WHERE time>=\'%1\' AND time<=\'%2\'"
                  "GROUP BY productName, value").arg(startDateTime, endDateTime)); 
```

我收到以下错误：`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near'>='2012-04-24 00:00:00' AND time<='2012-04-24 23:59:59:59' GROUP BY productName' at line 1 QMYSQL: Unable to execute query`

即使我尝试绑定值，它也会失败并出现相同的错误。

但是当我在下面的 MySQL 提示符上执行相同的查询时，它工作正常：

```
mysql> SELECT productName, value, COUNT(value), SUM(value) FROM tblmystock WHERE time>='2012-04-24 00:00:00' AND time<='2012-04-25 23:59:59' GROUP BY productName, value; 
```

有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:45:48.333

`time`是保留关键字。使用反引号来逃避它。
您也可以使用`between`代替`<=`和`>=`

```
WHERE `time` between '2012-04-24 00:00:00' AND '2012-04-25 23:59:59' 
```

# node.js - 除了 Web 开发之外的任何东西的节点？

> ID：10295387
> 
> 赞同：2
> 
> 时间：2012-04-24T09:41:37.030
> 
> 标签：node.js

在每个博客、每个站点、每个论坛上，您所听到的关于 Node 的一切都是人们如何使用它进行 Web 开发，类似于 Ruby on Rails。同时，您总是会听到“轻松构建快速、可扩展的*网络*应用程序”的口号。我的简单问题是，它也可以用于其他服务器应用程序吗？或者更确切地说，应该吗？当然有 TCP 服务器的例子，但是 Node 是否足够好/足够快，而不是 web 服务器？就像……一个在线游戏的服务器？这只是出于好奇而提出的问题，因为它*看起来*应该不是太大的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:47:42.890

Node.JS 的核心是一个高性能的 i/o 库/框架。因此，您基本上可以构建任何依赖于快速 i/o 操作的应用程序（当然包括 Web 服务器）。

由于它不是像 PHP 这样的脚本语言，因此您不必依赖单独的服务器应用程序来托管您的代码；它是自托管的。

所以回答你的问题：是的，你可以使用 node.js 构建任何服务器应用程序（无论是用于在线游戏的服务器、电子邮件服务器，甚至是用于机器生成数据的高速提要解析器）。

# javascript - 单击后如何在javascript的上下文菜单中隐藏或禁用选项？

> ID：10295392
> 
> 赞同：0
> 
> 时间：2012-04-24T09:42:05.890
> 
> 标签：javascript, jquery, html

我有一个带有 4 个选项的上下文菜单，我想在单击它后隐藏或禁用 1 个选项。这些是我的脚本片段。单击保存选项后，每当我再次右键单击 div 时，我只希望上下文菜单中的移动选项可用。拖动是 div 类。可能吗？

```
var menu = [
            {'Move':function(menuItem,menuObject){
                    $(this).css({'backgroundColor':'red'});
                    return true; 
                } 
            },
            {'Save':function(menuItem,menuObject){
                    $(this).css({'backgroundColor':'blue'});
                    return true;
                }
            }
        ];

$(function() {
            $('.drag').contextMenu(menu,{
                showSpeed:500,
                hideSpeed:500,
                showTransition:'fadeIn',
                hideTransition:'fadeOut'
            });
        }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:38:03.933

首先类拖动是父元素的类。所以你必须找到“保存”元素的类。让我们假设该类是 .save，然后单击删除它。这是通过以下代码完成的：

```
$(".save").click(function{
 $(this).remove();
}) 
```

如果再次右键单击，将再次创建元素，上述功能将失去作用。所以我可以看到，这是你的问题。

但是，为什么在“保存”某些内容后需要隐藏保存按钮？也许用户想再次保存。

如果我们能看到一个演示以了解您尝试实现的应用程序，那将很有帮助。

如果您尝试仅对已更改（拖动）的元素应用规则，则必须在类或保存元素位置的数据库中标记已更改的元素。然后，您可以通过 jquery 选择器仅操作标记（更改）。

```
if ((.drag).hasClass('.changed')){
  $(".save").css({"visibility: visible"});
} 
```

不要忘记默认隐藏css中的元素

```
.save{visibility: none} 
```

# javascript - 选择单选按钮时如何清除文本字段内的文本

> ID：10295393
> 
> 赞同：2
> 
> 时间：2012-04-24T09:42:09.883
> 
> 标签：javascript, jquery, forms, input, radio-button

目前我有这个单选按钮

1.  电子学
2.  电脑
3.  其他

我想做的是，如果`Others`选择了单选按钮，我想显示一个输入文本字段并让用户输入。

我想做的是，当我`Others`在输入字段中选择并输入内容时，当我选择返回`Eletronics`或时`Computers`，我想清除我在输入字段中写的文本。

请为我提供 JavaScript 或 jQuery 的解决方案。

这是我的代码示例。请检查：http: [//jsfiddle.net/dnGKM/](http://jsfiddle.net/dnGKM/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:26:07.540

**更新**

```
$('input:radio').on('click', function() {
    if($(this).attr('id') == 'others') {
        $('#showhide').css('opacity', 1.0);
   } else {
       $('#showhide').css('opacity', 0).find('input:text#others_text').val('');
    }  
});​ 
```

[演示](http://jsfiddle.net/dnGKM/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:45:42.050

你可以使用这个：

```
document.getElementById("others_text").value=''; 
```

清除输入字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:47:16.120

请在您的代码中添加以下行代码：

```
document.getElementById("others_text").value = ''; 
```

现在它看起来像：

```
document.getElementById("others").addEventListener("click", function()
{
    document.getElementById("others_text").value = '';
    document.getElementById("showhide").style.opacity = 1;
}, false);
document.getElementById("computers").addEventListener("click", function()
{
    document.getElementById("showhide").style.opacity = 0;
}, false);
document.getElementById("electronics").addEventListener("click", function()
{
    document.getElementById("showhide").style.opacity = 0;
}, false);​ 
```

这对你会有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T09:52:36.510

您将`jQuery`标签添加到您的问题中，因此应该使用 jQuery 来解决问题:)

CSS：

```
.hidden {
    display: none;
} 
```

HTML：

```
<label for="electronics">Electronics</label>
<input type="radio" id="electronics" name="rdbutton" />
<label for="computers">Computers</label>
<input type="radio" id="computers" name="rdbutton" />
<label for="others">Others</label>
<input type="radio" id="others" name="rdbutton" />
<input type="text" id="others-text" name="others-text" class="hidden" /> 
```

JS：

```
$(function() {
    $('input[type="radio"]').click(function() {
        if($(this).attr('id') == 'others') {
            $('#others-text').removeClass('hidden');
        } else {
            $('#others-text').addClass('hidden');
            $('#others-text').val('');
        }
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T10:29:47.097

试试这个解决方案：

```
$(function() {
      $('input[type="radio"]').click(function() {
       if($(this).attr('id') == 'others') {
           $('#others-text').show();
       } else {
           $('#others-text').hide();
           $('#others-text').val('');
       }
   });
}) 
```

这里有一个 JSFiddle 链接：

[http://jsfiddle.net/dnGKM/4/](http://jsfiddle.net/dnGKM/4/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T06:17:10.213

===============HTML

```
<input type="radio" name="rdo" value="1" checked="checked" />Electronics
<input type="radio" name="rdo" value="2" />Computers
<input type="radio" name="rdo" value="3" />Others 
```

===============jQuery

```
 $('input[name=rdo]').change(function() {
         var a = $(this).val();
         if (a != 3) {
             $('#textboxid').hide();
         }else{
             $('#textboxid').val('');
             $('#textboxid').show();
         }
   }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T09:54:11.237

```
$("#<%=text1.ClientID%>").val(''); 
```

# java - 如何在我的 JMenuBar 上添加 JButton？

> ID：10295398
> 
> 赞同：2
> 
> 时间：2012-04-24T09:42:20.993
> 
> 标签：java, applet, jmenubar

对于一项任务，我要修改现有的 Java 小程序。我试图在我的 JMenuBar 上获得一个 JButton（或可点击的 JMenu）。有几个菜单，其中一个应该可以用作按钮。

我多次发现相同的问题，但获胜的答案表明这将是“坏的”并且仍然应该是 JMenu 中的一个项目。虽然这是一种可能性，但我真的更喜欢其他方式。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:46:31.237

我发现这篇文章（我认为）与您的问题有关：

[如何使 JMenu 在 JMenuBar 中具有 Button 行为](https://stackoverflow.com/questions/2456501/how-to-make-a-jmenu-have-button-behaviour-in-a-jmenubar)

这是您要完成的任务吗？

祝你好运！

# jquery - jQuery on() 方法不会像 live() 那样绑定事件

> ID：10295399
> 
> 赞同：30
> 
> 时间：2012-04-24T09:42:24.020
> 
> 标签：jquery

如上所述[`http://api.jquery.com/live/`](http://api.jquery.com/live/)：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。

正确的。**所以而不是**

```
$('.dynamicallyCreatedElement').live('click', function(){
  console.log('click');
}); 
```

**我应该使用：**

```
$('.dynamicallyCreatedElement').on('click', function(){
  console.log('click');
}); 
```

但是，它不会将事件绑定到`on()`调用后创建的元素。那么它真的是更好的`live()`方法吗？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-24T09:44:21.663

要以与以前[`on`](http://api.jquery.com/on/)相同的方式[`live`](http://api.jquery.com/live/) 使用，您需要像这样使用它：

```
$(document).on("click", ".dynamicallyCreatedElement", function() {   
    console.log('click'); 
}); 
```

因此，您将`on`处理程序绑定到`document`自身（或者，实际上，新元素将“出现”的容器元素——感谢@devnull69 的澄清），然后将事件类型和选择器传递给它。

[`live`](http://api.jquery.com/live/)您会在文档页面的中途找到几个示例。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-24T09:44:28.147

```
$('#closestStaticParent').on('click', '.dynamicallyCreatedElement' function(){
    console.log('click');
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T09:44:42.127

用作委托（）

```
$('body').on('click', '.dynamicallyCreatedElement', function () {
}); 
```

**编辑：**每个人都明白，当使用 delegate() 时，选择器是第一个参数，而 on() 是第二个参数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T09:45:53.077

我发现需要使用这种方法：

```
$('#container').on('click','.dynamicallyCreatedElement',function(){
    console.log('click');
}); 
```

# asp.net - 500 - .NET 上传站点中的内部服务器错误

> ID：10295400
> 
> 赞同：0
> 
> 时间：2012-04-24T09:42:24.900
> 
> 标签：asp.net, .net, web-config, internal-server-error

我在服务器上上传了一个 .net 站点。我检查了带有 Ping 站点的站点是否正常工作，但未在浏览器中显示。？？该网站的 webconfig 在下面给出

```
<?xml version="1.0"?>
<!-- 
    Note: As an alternative to hand editing this file you can use the 
    web admin tool to configure settings for your application. Use
    the Website->Asp.Net Configuration option in Visual Studio.
    A full list of settings and comments can be found in 
    machine.config.comments usually located in 
    \Windows\Microsoft.Net\Framework\v2.x\Config 
-->
<configuration>
    <configSections>
        <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                    <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
                    <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                </sectionGroup>
            </sectionGroup>
        </sectionGroup>
    </configSections>

  <appSettings>
    <add key="ConnectionString" value="Data Source=174.143.28.35,4120;Initial Catalog=ddd;User ID=dd;Password=ddddd" />
    <add key="SmtpServer" value="mail.dd.com"></add>
    <add key="msPassword" value="dd"></add>
    <add key="msUserName" value=""></add>
    <add key="SmtpPort" value="30"></add>
    <add key="SendingMail" value="info@dd.com"></add>

  </appSettings>
    <connectionStrings/>
    <system.web>
        <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
        <compilation debug="true">
            <assemblies>
                <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
                <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
                <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
                <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            </assemblies>
        </compilation>
        <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
        <authentication mode="Windows"/>
        <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
   <customErrors mode="On" defaultRedirect="error.aspx">
            <error statusCode="403" redirect="error.aspx" />
            <error statusCode="404" redirect="error.aspx" />
        </customErrors>
        <pages>
            <controls>
                <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
                <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            </controls>
        </pages>
        <httpHandlers>
            <remove verb="*" path="*.asmx"/>
            <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
        </httpHandlers>
        <httpModules>
            <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </httpModules>
    </system.web>
    <system.codedom>
        <compilers>
            <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
                <providerOption name="CompilerVersion" value="v3.5"/>
                <providerOption name="WarnAsError" value="false"/>
            </compiler>
            <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
                <providerOption name="CompilerVersion" value="v3.5"/>
                <providerOption name="OptionInfer" value="true"/>
                <providerOption name="WarnAsError" value="false"/>
            </compiler>
        </compilers>
    </system.codedom>
    <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false"/>
        <modules>
            <remove name="ScriptModule"/>
            <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </modules>
        <handlers>
            <remove name="WebServiceHandlerFactory-Integrated"/>
            <remove name="ScriptHandlerFactory"/>
            <remove name="ScriptHandlerFactoryAppServices"/>
            <remove name="ScriptResource"/>
            <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </handlers>
    </system.webServer>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
                <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
            </dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
                <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
            </dependentAssembly>
        </assemblyBinding>
    </runtime>
</configuration> 
```

但是当我在浏览器 **500 中打开站点时 - 内部服务器错误**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-31T10:18:32.717

查看您提供的代码后，我可以简单地说。检查您上传网站的服务器支持的最低 .net 框架。在您的代码中，您使用的是 3.5 框架版本。您上传文件的在线服务器可能不支持 3.5 框架版本。

简单的解决方案可以在您的服务器配置中将最低框架设置为 3.5

# c# - 如何在行数据绑定事件中获取单元格的值？以及如何检查单元格是否为空？

> ID：10295401
> 
> 赞同：11
> 
> 时间：2012-04-24T09:42:25.947
> 
> 标签：c#, asp.net, sql, webforms, rowdatabound

我正在使用 sqldatasource 和**GridView**。我想从`RowDataBound`事件中的 GridView 中获取单元格的值？，因为我不能使用`e.RowIndex`.

如果单元格为空，如何检查更新事件？我用过`if != null`，但它没有用，所以我需要检查它是否为空。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T14:30:32.870

在 RowdataBound 事件中，您可以使用以下代码从 gridview 获取单元格的值：

[ **1** ]//获取用户名 rfom 特定行

```
string servicename = Convert.ToString(DataBinder.Eval(e.Row.DataItem, "Name")); 
```

在 RowUpdating 事件中，您可以使用以下代码检查单元格是否为空：

```
string servicename = grdvw_showdetails.DataKeys[row.RowIndex][1].ToString(); 
```

上面的代码在行更新事件中使用了 Datakey。如果您不想使用数据键，则检查特定单元格是否为空的代码是

```
 TextBox txtaname = (TextBox)row.FindControl("txt_updname");

 if(txtaname.text != null) 
```

* * *

**编辑：**

这个答案非常好。不过，我想补充一点评论。检查`RowDatabound`事件中的行单元格数据时，`DataItem`不能直接访问该行的 ItemArray 属性。所以当我们做这样的事情时，它是没有意义的 :`string val = e.Row.Cells[2].Text.ToString();`并抛出一个错误。

这就是这个答案的第一行出现的地方。[ **1** ]

当您在调试模式下进行监视时，以下屏幕显示了行的基础属性的树/层次结构。

![在此处输入图像描述](../Images/a4f0299ffe4a713d3fb862b1e40df4d6.png)

# objective-c - 如何使用 NSPredicate 加快数组搜索速度？

> ID：10295402
> 
> 赞同：0
> 
> 时间：2012-04-24T09:42:27.950
> 
> 标签：objective-c, nspredicate

我有一个类别数组和另一个类别 ID 数组。我想提取具有匹配 ID 的类别。目前，我的代码看起来有点像这样：

```
- (NSArray *)categoriesFromArray:(NSArray *)categories withIDs:(NSArray *)categoryIDs {
    NSMutableArray *categoriesWithIDs = [NSMutableArray array];

    for (SGBCategory *category in categories) {
        for (NSNumber *categoryID in categoryIDs) {
            if ([category.categoryID isEqual:categoryID]) {
                [categoriesWithIDs addObject:category];
                break;
            }
        }
    }

    return categoriesWithIDs;
} 
```

嗯，我知道。所以我想做的是类似于`SELECT * FROM categories WHERE categories.categoryID in (categoryIDs)`SQL 中的操作。我认为 NSPredicate 是表达这类事情的客观 c 方式，但我不知道如何让它做我想做的事。如何使用 NSPredicate 加快数组搜索速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:03:30.093

```
return [categories filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"categoryID IN %@", categoryIDs]]; 
```

不过，我不知道它会更快。它基本上必须和你的代码做同样的事情，外加一个谓词。

您可以通过创建`NSSet`from the`categoryIDs`和 using来改进您的代码，而不是手动`-containsObject:`循环`categoryIDs`和调用。`-isEqual:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:24:56.153

我不确定谓词，但立即优化是将您的类别 ID 放在一个集合中

```
- (NSArray *)categoriesFromArray:(NSArray *)categories withIDsFromSet:(NSSet *)categoryIDs {
    NSMutableArray *categoriesWithIDs = [NSMutableArray array];

    for (SGBCategory *category in categories) {
        if ([categoryIDS containsObject: [category categoryID]])
        {
            [categoriesWithIDs addObject:category];
        }
    }
    return categoriesWithIDs;
} 
```

**编辑**

如果您想继续使用旧方法，请修改它：

```
- (NSArray *)categoriesFromArray:(NSArray *)categories withIDs:(NSArray *)categoryIDs {

    return [self categoriesFromArray: categories withIDsFromSet: [NSSet setWithArray: categoryIDs]];
} 
```

这仍然比您提供的原始方法更有效，`categories`或者更大`categoryIDs`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T09:51:42.740

```
NSPredicate* searchPredicate = [NSPredicate predicateWithFormat:@"categoryID == %f", categoryID];
    NSArray *categoriesWithIDs =[categories filteredArrayUsingPredicate:searchPredicate];
    return categoriesWithIDs; 
```

这就是你将如何做你想做的事。假设类别 id 是浮点数。根据需要更改 %f，就像使用 NSLog 一样。

# javascript - javascript函数冲突

> ID：10295406
> 
> 赞同：0
> 
> 时间：2012-04-24T09:42:41.423
> 
> 标签：javascript, colorbox, news-ticker

我的网站有这些脚本，但一次只能使用一个功能，无论哪个代码接近 head 标签都可以正常工作。什么是同时工作而没有任何冲突的解决方案。

代码如下：

```
<script type="text/javascript" src="demo_files/jquery.js"></script>
    <script type="text/javascript" src="demo_files/jquery.vticker-min.js"></script>
    <script type="text/javascript"> 
    $(function(){
        $('#news-container').vTicker({ 
            speed: 500,
            pause: 3000,
            animation: 'fade',
            mousePause: false,
            showItems: 3
        });
            $('#news-container1').vTicker({
            speed: 700,
            pause: 4000,
            animation: 'fade',
            mousePause: false,
            showItems: 1
        });
    });
    </script> 
    <style type="text/css">
    body{ font-family:Verdana, Arial, serif; font-size:14px;}
    </style>
    <link media="screen" rel="stylesheet" href="colorbox.css" />
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="jquery.colorbox-min.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(function()
    {
        $(window).bind('load', 
            function(e) 
            {
                $.colorbox({opacity:0.3, href:"offer.html"}); 
            });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:52:36.683

**长答案：**这是因为您包含 jQuery 两次，一次在顶部，另一次在一半左右（缩小版本）。

第二次包含库时，$ 对象将被重新定义，覆盖现有实例。发生这种情况时附加到 $ 对象的任何代码（例如事件和插件）都将丢失。

**简短回答：**删除 jQuery 的第二个副本，它应该可以工作。

# tomcat - 具有多个独立服务的项目的 Maven Tomcat 集成

> ID：10295407
> 
> 赞同：0
> 
> 时间：2012-04-24T09:42:43.007
> 
> 标签：tomcat, maven, jetty, maven-plugin, maven-jetty-plugin

我们有以下项目设置：

```
Root (pom)
 |
 +-- s1: Service 1 (war)
 +-- s2: Service 2 (war)
 +-- lib: Shared Library for Service 1 + 2 (jar)
 +-- intf: Service 1 Interface POJOs 
```

每个都是一个带有自己的 pom 的 maven 项目：

```
Root.pom:
...
<modules>
  <module>s1</module>
  ...
</modules> 
```

每个子项目都引用它的父项目：

```
<parent>
   ....
</parent> 
```

Maven 编译/测试目标工作正常。但是，每当我尝试使用以下命令实例化 locatl tomcat 测试环境时，我都会弄乱 tomcat 插件：

```
mvn tomcat:run 
```

它只会启动**其中一个服务**（实际上始终是该部分中的第一个服务`<modules>`。

我想同时启动这两种服务，您在项目中是否有类似的经验，或者知道如何以一种好的方式来实现这一点？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:50:09.567

我建议制作一个单独的 maven 模块，其中包含 tomcat 插件的定义并将这两个服务用作依赖项......或者您可以使用 cargo-maven-plugin 定义一个配置，您可以在其中启动两个服务tomcat 实例......就像在这个例子中：[https ://github.com/khmarbaise/scms/blob/master/scms-it/pom.xml](https://github.com/khmarbaise/scms/blob/master/scms-it/pom.xml)

# iphone - 验证电子邮件地址在 iPhone 应用程序上是否存在

> ID：10295408
> 
> 赞同：0
> 
> 时间：2012-04-24T09:42:45.703
> 
> 标签：iphone, ios4

我的问题不是验证电子邮件地址。我想验证电子邮件地址是否存在。我整天都在寻找解决方案。但是没有结果对我有用。谁能帮我这个？谢谢！葛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:04:53.317

正如 badcat 已经说过的那样，这不是微不足道的。如果您绝对必须这样做，我会由其他一些实体来完成发送和接收电子邮件的实际工作（例如您的网络服务器）。流程将类似于

1）您的应用程序指示您的网络服务器发送一封测试电子邮件（确保您保护它 - 否则它将非常适合发送垃圾邮件）

2）您的应用程序指示用户已发送测试电子邮件并且他应该回复它，确认他是一个人（或者可能点击电子邮件中包含的网址）

3) 用户的回复（点击 url 或电子邮件回复）将被记录在一个小型数据库中，您可以使用您的应用程序查询该数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:52:50.910

这不是那么微不足道，但有许多选择：

1) 使用 DNS 查找找出哪些邮件服务器负责该电子邮件地址的域并连接到其中之一。使用 SMTP 尝试将消息传递到目标地址。某些服务器会在那时告诉您目标地址不存在。

2) 向目标地址发送测试邮件并检查是否收到退回/错误邮件。

# objective-c - 编辑pdf的CGPDFObject

> ID：10295413
> 
> 赞同：1
> 
> 时间：2012-04-24T09:43:05.390
> 
> 标签：objective-c, cgpdfdocument, cgpdf, cgpdfcontext, cgpdfdictionaryref

我尝试了很长时间使用石英 cgpdf api 解析 pdf 文件，但我的问题是 CGPDF API 无法编辑保存在 pdf 中的对象？

这意味着仅用于读取文件的api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:33:58.733

是的，它只是读取文件。例如，字典只是看起来像这样的东西的表示：

```
3 0 obj 
<< /Font
    << /F0
        << /Type /Font
            /BaseFont /Times-Italic
            /Subtype /Type1 >> 
    >>
>>
endobj 
```

可以引用它，使阅读比编辑容易得多，如果您删除某个对象，整个页面可能需要以不同的方式布局。我想为 CGPDF API 编写器不会太难，但它肯定不是微不足道的。要编写新的 pdf，您可以使用普通的图形上下文。

（很抱歉迟到了一年，但可能还有其他人）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-06T12:57:55.477

我希望能够编辑 PDFContentStreams，但这对于 PDFKit 或 Core Graphics 中的框架是不可能的。所有 PDF 类都不是可变的，也不允许您指定从备用数据源初始化它们。所有 PDFObject 类都只是引用原始 PDFDocument 并且不允许您替换对象或更改其数据。

您可以做的最接近的事情是创建一个 CGPDFContext 并从另一个 PDF 文档中绘制一个页面，然后在其上绘制额外的 Quartz 图形。沿着;

```
void drawPageToNewPDF (CFURLRef newpdfname, CGRect mediabox, CFDictionaryRef auxdata, PDFPage* pp)
{
    CGContextRef cgpdf = CGPDFContextCreateWithURL(newpdfname, &mediabox, auxdata);

    CGPDFContextBeginPage(cgpdf, NULL);
    CGContextDrawPDFPage(cgpdf, [pp pageRef]);
// draw extra graphics here
    CGPDFContextEndPage(cgpdf);
    CGPDFContextClose(cgpdf);
} 
```

但这不允许您更改文档中的现有数据。您可以做的最好的事情是在要更改的对象上放置一个白色（或背景色）实心矩形，然后使用 Core Graphic 基元重新绘制它。

正确执行此操作的唯一方法是使用支持编辑 PDF 对象的第 3 方库。我一直无法找到用于 Objective-c 的非商业开源 PDF 库。有一些 C++ 库编写包装器并不难。

我正要走这条路，所以我还没有任何示例代码。PoDoFo 看起来最有希望用于详细的 pdf 编辑[http://podofo.sourceforge.net/](http://podofo.sourceforge.net/) QPDF 仅用于编辑 PDF 结构[http://qpdf.sourceforge.net/](http://qpdf.sourceforge.net/)

# php - 仅通过 jQuery 在一页中的 Div 类

> ID：10295415
> 
> 赞同：0
> 
> 时间：2012-04-24T09:43:14.370
> 
> 标签：php, jquery

我有一堂课：

```
.sample {
    background:url("../sample.png") repeat-x scroll 0 0 transparent;
    height:200px;
    position:absolute;
    top:0;
    width:100%!important;
    z-index:101
} 
```

这是一个掩码，我想在一个页面而不是所有页面中使用这个类。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:02:58.187

添加一个`title attribute`到您想要添加类的 div，例如`title = "class_apply"`. 并在其他页面 div 添加标题，如`title = "no_class"`

现在您有两个使用 jquery 的选项。

1.在所有页面div中添加id和title的类。如果 title 为 no_class，则检查 title 属性，然后从这些 div 中删除 class。

```
var title = $('#divid').attr("title");
if(title == "no_class"){
  $('#divid').removeClass("divClass");
} 
```

或者

2.在所有带有id和title的页面中制作div。如果 title 是 class_apply，则检查 title 属性，然后将 class 添加到该 div。

```
var title = $('#divid').attr("title");
if(title == "class_apply"){
  $('#divid').addClass("divClass");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:04:23.473

使用以下命令添加 css 文件：

```
drupal_add_css ('myfile.css'); 
```

我的文件.css：

```
.sample {
    background:url("../sample.png") repeat-x scroll 0 0 transparent;
    height:200px;
    position:absolute;
    top:0;
    width:100%!important;
    z-index:101
} 
```

或者

使用内联 css stlye 来满足您的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:14:50.447

```
<? if (eregi("yourpagename", $_SERVER[REQUEST_URI])){?>
<script>
$('#divid').addClass("sample");
</script>
<?}?> 
```

# html - 在 HTML 页面中单击后按钮消失

> ID：10295418
> 
> 赞同：0
> 
> 时间：2012-04-24T09:43:26.067
> 
> 标签：html

当我单击开始按钮时，我的`index.html`页面带有开始按钮按钮消失，其他背景保持不变，直到新页面打开如何使按钮在单击后可见，直到移动到下一页。

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Untitled Document</title>
        <link type="text/css" href="splashcss.css" rel="stylesheet" />
    </head>
     <body>
         <div id="container">
         <div id="image"><a href="overview.html">
             <img src="image/startbutton.png" onmouseover="this.src='image/Startbuttonmouse.png'" onmouseout="this.src='image/startbutton.png'"> 
         </div> 
     </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:47:06.170

您没有正确关闭元素...在标签`</a></div>`之后添加。`<img />`

# .net - 共享 IIS 服务器上的 HTTPS - 浏览器警告

> ID：10295425
> 
> 赞同：0
> 
> 时间：2012-04-24T09:43:34.693
> 
> 标签：.net, iis, ssl, https, http-status-code-404

我们有一个带有多个客户端网站的 Windows 服务器。
一个网站，我们称之为 Bubbles，使用 HTTPS。
另一个网站，我们称之为 Tango，不使用 HTTPS。

我们在服务器上为 Bubbles 安装了 SSL 证书。
现在，来自 Tango 的某个人尝试访问[https://tango](https://tango)并收到一个浏览器警告，提示 SSL 证书不属于 tango 域（这是正确的，因为证书是针对 Bubbles 域的）。

如何删除浏览器警告？
理想情况下，我会将 Tango 上的 HTTPS 请求重定向到 HTTP 网站。
如果我不能重定向，我想至少显示一个 404。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:49:07.607

在 SSL 层，您所拥有的只是 IP 地址和端口，因此您需要将 Tango 和 Bubbles 以一种或另一种方式绑定到不同的 IP 和端口集。我猜目前你有一个 IP，使用主机头作为 http 流量，使用 :443 作为 SSL - 这当然意味着就 SSL 而言只有气泡存在（如果你试图在 :443 上配置 SSL Tango，你会发现它不会让你 - 这个盒子只能为每个 IP/端口组合服务一个站点）。

最终，您最好的选择是将 Bubbles 和 Tango 映射到不同的 IP 地址，并让服务器了解每个地址，将不同的站点绑定到正确的 IP。您几乎可以摆脱（仅）用于 http 的主机头，但不能使用 SSL。

如果您有 HAProxy 或其他 NLB 之类的东西，您还可以动态重新映射端口，因此您的 Web 服务器只有一个 IP 并在不同端口上处理不同的站点（包括 SSL）——但随后只是转移了“需要多个NLB 上游的 IP 地址”问题。当然，外部客户端浏览器应该只需要使用:80 和:443，但*在*您的网络内部，您可以根据需要重新映射它们。

# android - Android 在自定义项目上应用主题

> ID：10295430
> 
> 赞同：3
> 
> 时间：2012-04-24T09:43:53.637
> 
> 标签：android, styles, themes

我能够声明一个主题和一个特定的按钮设计：

```
<style name="MyTheme" parent="android:style/Theme.Black">
  <item name="android:buttonStyle">@style/Button.b1</item>
</style>

<style name="Button.b1" parent="android:style/Widget.Button">
    <item name="android:textColor">#000000</item>
</style> 
```

问题是这种风格适用于所有按钮。我想用他自己的风格声明一个特定的按钮，改变每个主题独立于其他按钮（类似于“保存”按钮）。任何想法？

* * *

我尝试了以下方法：

```
<style name="Button.MyButton" parent="android:style/Widget.Button">
  <item name="android:background">@drawable/shape</item>
</style>

 <style name ="Button.MyButton.Theme1">
     <item name="android:textColor">#000000</item>
  </style>

 <style name ="Button.MyButton.Theme2">
     <item name="android:textColor">#FFFFFF</item>
  </style>

 <Button
     android:id="@+id/save_button" 
     android:layout_width="0px" 
     style="@style/Button.MyButton"
     android:layout_weight="1"
     android:layout_height="wrap_content"
     android:text="@string/save"/> 
```

现在按钮独立于主题，但它也应该应用我上面声明的样式属性。目前它只应用在 MyButton 范围中声明的属性，而不是在 MyButton.Theme1 或 MyButton.Theme2 中声明的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:05:24.360

如果您的主题`MyTheme`仅用于定义按钮样式，请将其删除；`parent`还从按钮中删除属性：

```
<style name="Button.b1">
    <item name="android:textColor">#000000</item>
</style> 
```

然后在布局中，仅将样式用于您需要的那些按钮，如下所示：

```
 <Button
         android:id="@+id/btn_custom"
         style="@style/Button.b1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content" >
 </Button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:52:27.413

您可以从您选择的按钮的属性中删除`MyTheme`声明`styles.xml`并轻松设置:)`@style/Button.b1``android:style`

编辑：我想我终于得到了你要的东西。我自己没有尝试过，但它应该可以工作：

```
<!-- Declare your themes here -->
<style name="Theme1" parent="android:style/Theme.Black"></style>
<style name="Theme2" parent="android:style/Theme.Black"></style>

<!-- Declare your "abstract" Button style -->
<style name="MyButton" parent="android:style/Widget.Button">
  <item name="android:background">@drawable/shape</item>
</style>

<!-- Override MyButton style for Theme1 -->
<style name ="Theme1.MyButton" parent="@style/MyButton">
  <item name="android:textColor">#000000</item>
</style>

<!-- Override MyButton style for Theme2 -->
<style name ="Theme2.MyButton" parent="@style/MyButton">
  <item name="android:textColor">#FFFFFF</item>
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:55:54.820

您应该`Button.b1`仅将您的样式直接用于您希望以这种方式设置样式的那些按钮。使用这些按钮的`android:style`属性：

```
android:style="Button.b1" 
```

# c++ - 用于在多个图形视图中显示和选择的自定义小部件

> ID：10295433
> 
> 赞同：0
> 
> 时间：2012-04-24T09:44:06.437
> 
> 标签：c++, qt, selection, qgraphicsview

我有一组图像，通过 QGraphicsView 小部件动态生成，我希望我的用户在它们之间进行选择。为此，我将在某种网格中的自定义小部件中显示可用图像，并让用户单击他们感兴趣的图像。

出现多个问题：

*   是否存在已经适合此目的的现有小部件？
*   我应该找到一种方法来禁用 QGraphicsView 项目的所有鼠标事件处理，还是我可以在图形视图前面添加一个透明小部件来拦截它们？
*   显示许多 QGraphicsView 小部件（最多数百个）是否存在性能问题？我应该先将它们导出为普通图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:25:52.890

首先，不，没有专门为此目的设计的小部件。

我认为您没有掌握 QGraphicsView 的用途。它用于显示一个 QGraphicsScene，它是用来容纳许多 QGraphicsItems 的。根据您的帖子，我不明白您为什么需要多个 QGraphicsViews。您可以简单地拥有一个 QGraphicsView 并在其场景中显示许多图像。例如，请参阅[QGraphicsPixmapItem](http://qt-project.org/doc/qt-4.8/qgraphicspixmapitem.html)。

你绝对不应该有数百个 QGraphicsViews。您可能只想要一个（尽管在某些情况下可能有一些是合理的），其中您在 QGraphicsScene 中显示许多 QGraphicsItem。您绝对可以同时看到数百个 QGraphicsItem。在您的情况下，您可能需要 QGraphicsPixmapItems，它是 QGraphicsItem 的子类。您甚至可以拥有多个 QGraphicsScene，并使用`QGraphicsView::setScene`. 如果您希望用户能够从网格中选择图像，然后使用该图像，我会查看[State Pattern](http://en.wikipedia.org/wiki/State_pattern)。

我想不出任何理由在 QGraphicsViews、QGraphicsScenes 或 QGraphicsItems 中禁用鼠标处理。为什么这些不应该处理自己的鼠标事件？您可以（并且应该在必要时）对它们进行子类化并重新实现`mousePressEvent`, `mouseMoveEvent`, `mouseRelease`event 等以获得所需的功能。

祝你好运！

# web-services - Web.config - PayPal IPN 侦听器 - HTTP 错误代码 500：内部服务器错误

> ID：10295435
> 
> 赞同：0
> 
> 时间：2012-04-24T09:44:09.513
> 
> 标签：web-services, web-config, paypal-ipn

我正在尝试让我的 PayPal IPN 侦听器在我的 Live 环境中工作，它可以完美地在 Staging 上工作，问题与 web.config 文件有关：

(http://pastebin.com/B8YhJEZK)

我正在使用“https://developer.paypal.com/us/cgi-bin/devscr”和即时付款通知 (IPN) 模拟器来测试 Web 服务，但是我得到以下信息：

“IPN 传递失败。HTTP 错误代码 500：内部服务器错误”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:46:57.163

您可能想阅读 PayPal 关于他们对其即时通知服务 (ipn) 所做的一些更改的公告。

[在此处输入链接描述](https://www.x.com/content/bulletin-ip-address-expansion-paypal-services)

另外，检查你的代码，看看你是否有类似的东西：

```
$fp = fsockopen($host,"80",$err_num,$err_str,30); 
```

并尝试将其更改为以下内容：

```
$fp = fsockopen('ssl://'.$host,"443",$err_num,$err_str,30); 
```

# sharepoint - 沙盒 SharePoint 解决方案的错误处理策略

> ID：10295438
> 
> 赞同：0
> 
> 时间：2012-04-24T09:44:22.670
> 
> 标签：sharepoint, sharepoint-2010, error-handling, web-parts, sandbox-solution

我希望为使用沙盒 Web 部件的 SharePoint 解决方案开发错误处理策略。我最初是在查看基于[本文](http://andreascode.blogspot.co.uk/2007/12/general-exception-handling-in-web-parts.html)的一般异常处理方法，但这不适用于沙盒 Web 部件。一旦在沙箱中引发了未处理的异常，用户代码服务就会获得控制权，因此不会达到基础 Web 部件中的异常处理。沙盒解决方案是否有任何既定的错误处理方法？

是否有人知道确定沙盒 Web 部件中何时引发未处理异常的方法，如果只是为了将显示的错误消息更改为更用户友好的消息？我想替换标准的“ *Web 部件错误：部分信任应用程序域中的沙盒代码包装器的 Execute 方法引发了未处理的异常：发生了意外错误。* ”消息至少。

谢谢，魔术师安迪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:09:06.753

实际上，您可以按照您提到的文章建议的方法进行操作。您只需为后代 Web 部件将要覆盖的所有虚拟属性和方法提供安全的可覆盖项。模式可以描述为：

1.  用可能引发异常的代码覆盖并密封每个应该被覆盖的虚拟属性和方法。
2.  使用相同的原型创建可覆盖的虚拟副本，并在必要时从中调用基类。这应该被您的后代覆盖。
3.  在 try&catch 中从密封成员中调用新的可覆盖对象，如果在那里捕获异常，请记住该异常。
4.  渲染方法要么渲染通常的内容，要么渲染记住的错误消息。

这是我使用的基类的躯干：

```
public class ErrorSafeWebPart : WebPart {

    #region Error remembering and rendering

    public Exception Error { get; private set; }

    // Can be used to skip some code later that needs not
    // be performed if the web part renders just the error.
    public bool HasFailed { get { return Error != null; } }

    // Remembers just the first error; following errors are
    // usually a consequence of the first one.
    public void RememberError(Exception error) {
        if (Error != null)
            Error = error;
    }

    // You can do much better error rendering than this code...
    protected virtual void RenderError(HtmlTextWriter writer) {
        writer.WriteEncodedText(Error.ToString());
    }

    #endregion

    #region Overriddables guarded against unhandled exceptions

    // Descendant classes are supposed to override the new DoXxx
    // methods instead of the original overridables They should
    // not catch exceptions and leave it on this class.

    protected override sealed void CreateChildControls() {
        if (!HasFailed)
            try {
                DoCreateChildControls();
            } catch (Exception exception) {
                RememberError(exception);
            }
    }

    protected virtual void DoCreateChildControls()
    {}

    protected override sealed void OnInit(EventArgs e) {
        if (!HasFailed)
            try {
                DoOnInit(e);
            } catch (Exception exception) {
                RememberError(exception);
            }
    }

    protected virtual void DoOnInit(EventArgs e) {
        base.OnInit(e);
    }

    // Continue similarly with OnInit, OnLoad, OnPreRender, OnUnload 
    // and/or others that are usually overridden and should be guarded.

    protected override sealed void RenderContents(HtmlTextWriter writer) {
        // Try to render the normal contents if there was no error.
        if (!HasFailed)
            try {
                DoRenderContents(writer);
            } catch (Exception exception) {
                RememberError(exception);
            }
        // If an error occurred in any phase render it now.
        if (HasFailed)
            RenderError(writer);
    }

    protected virtual void DoRenderContents(HtmlTextWriter writer) {
        base.RenderContents(writer);
    }

    #endregion
} 
```

--- 费尔达

# android - 如何使用 color.xml 文件中的颜色资源动态应用按钮背景颜色

> ID：10295442
> 
> 赞同：2
> 
> 时间：2012-04-24T09:44:32.507
> 
> 标签：android, button, background-color

我正在尝试使用颜色资源文件（color.xml）中的颜色 ID 将背景颜色动态应用于按钮。

> `btn.setBackgroundColor(R.color.green);`

我也试过这个

```
btn.setBackgroundColor(Resources.getSystem().getColor(R.color.green)); 
```

但它不工作。

如果我申请

```
btn.setBackgroundColor(Color.Green); 
```

它的工作。

但我需要从 color.xml 文件中应用颜色资源。请让我知道我该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T09:47:23.187

你应该使用这个：

```
btn.setBackgroundColor(getResources().getColor(R.color.Green)); 
```

第二种方式：

```
Resources resources = YourActivity.this.getResources();  
Drawable drawable = resources.getDrawable(R.color.Green);
btn.setBackgroundDrawable(drawable); 
```

你的 color.xml 看起来像：

```
 <?xml version="1.0" encoding="utf-8"?>  
    <resources>  
        <drawable name="red">#f00</drawable>  
        <drawable name="green">#0f0</drawable>  
        <drawable name="gray">#ccc</drawable>  
    </resources> 
```

**编辑现在不推荐使用 getColor() ：

```
ContextCompat.getColor(context, R.color.color_name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:51:55.480

在值创建名为颜色的 xml 下，将您的自定义颜色添加到该颜色。现在你可以写 R.color."name" （也就是将颜色重命名为颜色）

# ruby-on-rails - Spork 不会重新加载代码

> ID：10295445
> 
> 赞同：11
> 
> 时间：2012-04-24T09:44:50.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, spork, guard

我正在使用以下宝石和`ruby-1.9.3-p194`：

*   导轨 3.2.3

*   rspec-rails 2.9.0

*   叉叉 1.0.0rc2

*   卫矛 0.6.1

[此Gemfile.lock](https://gist.github.com/2478254)或[Gemfile](https://gist.github.com/2478447)中提供了已用 gem 的完整列表。

我正在使用这个配置文件：

*   [保护文件](https://gist.github.com/2478328)

*   [.rspec](https://gist.github.com/2478337)

*   [spec_helper.rb](https://gist.github.com/2478342)

*   [工厂.rb](https://gist.github.com/2478364)

如果我修改任何模型（或自定义验证器`app/validators`等），重新加载代码将不起作用。

我的意思是当我运行规范时（在守卫控制台上按 Enter 键）Spork 包含“旧代码”并且我收到过时的错误消息。但是当我手动重新启动 Guard and Spork (CTRC-C CTRL-d guard) 时，一切正常。但是几次之后就累了。

**问题：**

有人可以查看我的配置文件并修复阻止更新代码的错误。

或者这可能是最新 Rails 版本的问题？

* * *

PS 这个问题在一些项目上反复出现（在一些项目上不重复）。但我还没有弄清楚为什么会发生这种情况。

PS2 也许这个问题与此有关`ActiveAdmin`？`app/admin`当我在代码中更改文件时会重新加载。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T14:46:16.673

解决方法：

```
# config/environments/test.rb
config.cache_classes = false 
```

但它是“双刃剑”。

规格现在运行时间长约 2.0 倍。但它仍然比一次又一次地重新启动 Spork 快。

* * *

## ***更新 28.06.2013***

使用[宙斯](https://github.com/burke/zeus)。它完美地工作。基准在底部..

如果您正在使用`1.9.3`考虑安装真正加快加载应用程序的特殊补丁。

[RVM 补丁集](https://github.com/skaes/rvm-patchsets)

[rbenv 指令](https://gist.github.com/burke/1688857)

***背景与基准：***

我有一个相当大的`1.9.3`应用程序，我想加快应用程序加载速度，Spork 不起作用，所以我开始寻找其他解决方案：

我写了一个空规范来查看加载我的应用程序需要多长时间

-/spec/empty_spec.rb

```
require 'spec_helper'

describe 'Empty' do

end 
```

**普通 1.9.3**

`time rspec spec/empty_spec.rb 64,65s user 2,16s system 98% cpu 1:07,55 total`

**1.9.3 + rvm 补丁集**

`time rspec spec/empty_spec.rb 17,34s user 2,58s system 99% cpu 20,047 total`

**1.9.3 + rvm 补丁集 + 宙斯**

`time zeus test spec/empty_spec.rb 0,57s user 0,02s system 58% cpu 1,010 total` [w00t w00t！]

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T14:54:43.630

或者，您可以为模型、控制器和其他代码添加保护。当这些文件中的任何一个发生更改时，它都会使警卫重新加载 spork。

```
guard 'spork',
      :rspec_env => {'RAILS_ENV' => 'test'} do
  watch(%r{^app/models/(.+)\.rb$})
  watch(%r{^lib/(.+)\.rb$})
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-02T16:23:43.073

我有同样的问题。测试已重新加载并成功运行以更改 model_spec.rb。当我对 model.rb 文件进行更改时，测试会重新运行，但是代码似乎已被缓存-因此未应用更改。

它需要结合几个答案才能使事情正常进行：

```
# /config/environments/test.rb
config.cache_classes = !(ENV['DRB'] == 'true')

# spec_helper.rb
Spork.each_run do
  .....
  ActiveSupport::Dependencies.clear
end 
```

我还将 spork 更新到 (1.0.0rc3) 并用 spork-rails 替换了 spork gem，正如上面@23inhouse 所提到的。但是，尽管升级 spork 可能有效果，但我没有看到 gemfile 中的任何一个 gem 之间有任何区别。

Hopefully this helps someone else not spend any more hours banging their head against the wall.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-26T09:13:46.890

尽管 Spork 很棒，但它似乎在每次 Rails 升级时都会中断:(

在 Rails 3.2.3 上，我在 spec/spec_helper.rb 中添加了这个片段，以强制重新加载 app 目录中的所有 ruby​​ 文件。

```
Spork.each_run do
  # This code will be run each time you run your specs.
  Dir[Rails.root + "app/**/*.rb"].each do |file|
    load file
  end
end 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-31T17:21:47.500

就我而言，问题出在布料上。它不允许 spork 重新加载模型。

```
Spork.prefork do
  ENV['RAILS_ENV'] ||= 'test'

  # Routes and app/ classes reload
  require 'rails/application'
  Spork.trap_method(Rails::Application::RoutesReloader, :reload!)
  Spork.trap_method(Rails::Application, :eager_load!)

  # Draper preload of models
  require 'draper'
  Spork.trap_class_method(Draper::System, :load_app_local_decorators)

  # Load railties
  require File.expand_path('../../config/environment', __FILE__)
  Rails.application.railties.all { |r| r.eager_load! }
  ... 
```

只需记住在加载环境之前为 Draper 插入陷阱方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-25T02:03:06.977

Spork 得到了清理，并提取了一些功能。

`https://github.com/sporkrb/spork-rails`

将此添加到您的 Gemfile

`gem 'spork-rails'`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-12T20:06:19.440

通过向 spork.each_run 方法添加更多内容来修复相同的问题。

导轨 3.2.2

另外，我建议一次运行一个测试。它速度更快，噪音更小，而且我们通常一次只进行一项测试。

```
rspec spec -e 'shows answer text' 
```

我发现它比使用 Guard 更快、更容易，因为我只是坐在那里等待 Guard 完成。此外，当我进行更改时，Guard 并不总是重新加载正确的文件并运行正确的测试。

spec_helper.rb 文件：

```
require 'spork'

Spork.prefork do
  ENV['RAILS_ENV'] ||= 'test'

  require File.expand_path('../../config/environment', __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'
  require 'capybara/rspec'
  require 'capybara/rails'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
end

Spork.each_run do
  Dir[Rails.root.join('spec/support/**/*.rb')].each {|f| require f}

  RSpec.configure do |config|
    # config.mock_with :mocha
    # config.mock_with :flexmock
    # config.mock_with :rr
    config.mock_with :rspec

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false

    config.include RequestHelpers, :type => :request

    config.before :suite do
      DatabaseCleaner.strategy = :truncation
      DatabaseCleaner.clean_with :truncation
    end

    config.before :each do
      DatabaseCleaner.start
    end

    config.after :each do
      DatabaseCleaner.clean
    end

    config.include(MailerHelpers)
    config.before(:each) { reset_email }
  end
  # This code will be run each time you run your specs.
end 
```

# java - java如何挑选最强的密码在jsse中使用？

> ID：10295446
> 
> 赞同：5
> 
> 时间：2012-04-24T09:44:51.837
> 
> 标签：java, security, tomcat, ssl, jsse

我不明白 Java 如何选择最喜欢的密​​码来使用`Server Hello`.

我有一个 Tomcat 5 配置，我在 SSL 连接器中设置了`ciphers=TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, etc`

服务器 ie Java 选择作为客户端支持`TLS_RSA_WITH_AES_128_CBC_SHA`的`Server Hello`首选。但这不是最安全的，也不是[http://docs.huihoo.com/java/javase/7/technotes/guides/security/SunProviders.html#SunJSSEProvider](http://docs.huihoo.com/java/javase/7/technotes/guides/security/SunProviders.html#SunJSSEProvider)列出的首选编码`TLS_RSA_WITH_AES_256_CBC_SHA`。
然后我认为是 server.xml 属性中的顺序产生了影响，我将另一个密码放在首位 ( `TLS_DHE_RSA_WITH_AES_256_CBC_SHA`)，我在其中看到`Client Hello`它是受支持的。但是这个也没有被选中，又`TLS_RSA_WITH_AES_128_CBC_SHA`被选中了。

那么 JSSE 是如何选择偏好密码的呢？这是在某处记录的吗？我无法弄清楚这里发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:16:03.800

它不必。[RFC 2246](http://www.ietf.org/rfc/rfc2246.txt)所说的只是“服务器将选择一个密码套件”。它没有任何地方说它会选择最安全的，或者实际上任何关于它将如何做出选择的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:57:36.423

需要意识到的一点：客户在选择中也有发言权。如果客户说它只能支持 128 位密码，那么这就是将被选中的密码。通过删除除那个以外的所有受支持的密码，查看您的客户甚至支持 AES 256。

您没有按优先顺序提供密码列表。您正在提供必须与客户端匹配的可接受密码列表。如果其中任何一个不可接受，请将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T19:54:36.187

虽然您关于 2246（或 5256）的声明并没有说服务器按照客户端提供的优先顺序从相互支持的密码套件中选择密码套件是正确的，但 NIST 800-57 第 3 部分的第 4.3 节采购指南指出：

1.  实现应该按照客户端提交的优先顺序选择密码套件。

# sql - SQL QUERY 获取两个日期范围之间特定列的计数

> ID：10295462
> 
> 赞同：0
> 
> 时间：2012-04-24T09:45:52.593
> 
> 标签：sql

这里我对sql查询有疑问。

在这种情况下，我有一个名为 tblcrime 的表：我们将在这里获得 sum(crime) 我跟踪 MainID 和 sum(crime) 查询将是这样的：

```
 SELECT sum(o.crimeID) as crimeNumber,u.UserID
    from tblcrime o
    inner join tblSubContractor ts on
    o.MainID=ts.SubContractorID 
```

从这里我会检查`tblUSER`这些`subcontractorID`：

```
 inner join tblUser u on
    u.SubContractorID=ts.SubContractorID 
```

我怀疑到这里我会得到犯罪总额和适当的用户ID。例如

```
UserID : 520 Totalcrime:6000 
```

但是还有另一个表`tblAudit`，我们将在其中获取登录日期和用户 ID，在此处进行跟踪。所以我想根据用户登录（用户 ID）显示犯罪...自上次登录以来。因此，当用户登录时，它会在 jquery 通知中显示“自上次登录以来已完成 60 次犯罪”。

我需要查询格式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:48:12.537

我不确定，如果我理解你的问题是正确的，但这可能是你在找什么？

```
SELECT sum(o.crimeID) as crimeNumber,u.UserID
from tblcrime o
inner join tblSubContractor ts on o.MainID=ts.SubContractorID
inner join tblUser u on u.SubContractorID=ts.SubContractorID
where 
u.UserID = theOneYouAreLookingFor
AND crimedate >= lastLogOn
GROUP BY u.UserID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:26:00.993

您可以找到该用户的最大审计日期：

```
SELECT sum(o.crimeID) as crimeNumber,u.UserID
    from tblcrime o
    inner join tblSubContractor ts on
    o.MainID=ts.SubContractorID
inner join tblUser u on
    u.SubContractorID=ts.SubContractorID
where o.crimeDate >= (select max(auditdate) from tblAudit where UserID = @UserID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:53:44.717

首先，我怀疑对`SUM`函数的调用应该是对`COUNT`. 前者将指定列的值相加，而后者为您提供行数。

其次，您的`tblcrime`表是否存储添加犯罪的日期？我会假设它确实如此，让我们称之为 column `DateAdded`。以下查询应该有效：

```
SELECT      COUNT(o.crimeID) AS crimeNumber,
            u.UserID
FROM        tblcrime o
INNER JOIN  tblSubContractor ts on o.MainID = ts.SubContractorID 
INNER JOIN  tblUser u on u.SubContractorID = ts.SubContractorID
INNER JOIN  tblAudit a on a.userid = u.UserID
WHERE       a.logondate < o.DateAdded
GROUP BY    u.UserID 
```

# hadoop - 如何将自定义 hadoop 本机编解码器编译为 libhadoop.so？

> ID：10295465
> 
> 赞同：1
> 
> 时间：2012-04-24T09:45:56.963
> 
> 标签：hadoop, compression, native, hadoop-streaming, hadoop-plugins

我写了一个原生 hadoop 压缩编解码器。为了让它与 hadoop 一起工作，我需要将本机（C 代码）编译为 libhadoop.so。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:45:54.160

您不需要将其编译到 libhadoop.so 中：

*   编译您自己的 .so 并分发到您的集群节点（到与当前 libhadoop.so 相同的目录中
*   我假设您还编写了自己的 CompressionCodec（类似于 GzipCodec） - 向此代码添加一个静态块，尝试使用`System.loadLibrary("mylibrary");`（对于名为 libmylibrary.so 的库）加载库。
*   修改您的集群配置以将您的新压缩编解码器类包含在已注册的编解码器列表中（修改`io.compression.codecs`配置属性）：
*   重新启动您的任务跟踪器

作为参考，您可以遵循 Google Snappy 编解码器的实现和配置说明：

*   [http://code.google.com/p/hadoop-snappy/](http://code.google.com/p/hadoop-snappy/)

# php - PHP：找不到类“xmlrpc_client”

> ID：10295466
> 
> 赞同：1
> 
> 时间：2012-04-24T09:45:56.937
> 
> 标签：php, apache, xml-rpc

我正在尝试使用 XML RPC 连接到另一个网站，但 PHP 说它找不到 xmlrpc_client 类。

我有..

*   检查了我的 php.ini（xmlrpc 已激活）
*   检查了我的 phpinfo()（显示了 xmlrpc，xmlrpc-epi v. 0.51）
*   重新启动 Apache
*   重新启动我的电脑（在本地主机上工作）

..但仍然没有 xmlrpc_client 类。

我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:10:16.697

`ext/xmlrpc`不提供类`xmlrpc_client`，只提供一些较低级别的函数来处理 XML/RPC。

如果你不喜欢`ext/xmlrpc`直接打交道，有很多客户会抽象出细节。例如 Zend Framework`Zend\XmlRpc`或我自己的宠物项目[`fxmlrpc`](https://github.com/lstrojny/fxmlrpc)。

查看[http://en.php.net/xmlrpc](http://en.php.net/xmlrpc)以获取有关文档`ext/xmlrpc`

# web-services - javax.net.ssl.SSLHandshakeException：收到致命警报：handshake_failure

> ID：10295467
> 
> 赞同：2
> 
> 时间：2012-04-24T09:46:09.457
> 
> 标签：web-services, axis, handshake

我将使用服务器人员开发和托管的某个 Web 服务。涉及 SSL，客户端是 Axis 1x，并且证书不是来自受信任的 CA。

我想，我已经满足了所有需要，比如创建自定义密钥库、拥有自定义 SocketFactory 和自定义 TrustManager；但我仍然不断收到handshake_failure。

这是我到目前为止所做的：

```
C:\Program Files\Java\jdk1.6.0_17\bin>keytool -importkeystore -srckeystore D:\mywork\test_client_cert.p12 -srcstoretype PKCS12 -destkeystore test_client_cert.jks -deststoretype JKS

C:\Program Files\Java\jdk1.6.0_17\bin>copy test_client_cert.jks ..\jre\lib\security\ 
```

我的代码摘录：

```
public class MyCustomSecureSocketFactory extends JSSESocketFactory
{
    // ...
    protected SSLContext getContext() throws Exception
    {
        char[] keyStorePass = "mypass";
        java.io.File keyStoreFile = new java.io.File(System.getProperty("java.home") + "/lib/security/test_client_cert.jks";
        if(!keyStoreFile.exists())
            throw new Exception("Could not read the KeyStore file");
        InputStream keyStoreIS = new java.io.FileInputStream(keyStoreFile);
        try
        {
            KeyStore keyStore = KeyStore.getInstance("jks");//2012.04.24: KeyStore.getDefaultType());
            keyStore.load(keyStoreIS, keyStorePass);

            KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
            kmf.init(keyStore, keyStorePass);
            TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
            tmf.init(keyStore);
            SSLContext sslContext = SSLContext.getInstance("TLS");
            sslContext.init(new KeyManager[0], new TrustManager[] {new com.myapp.MyTrustManager()}, new SecureRandom());

            return sslContext;
        }
        catch (Exception e)
        {
            throw e;
        }
        finally
        {
            keyStoreIS.close();
        }
    }
    public javax.net.ssl.SSLSocket create(java.lang.String host, int port, StringBuffer otherHeaders, BooleanHolder useFullURL) throws Exception
    {
        javax.net.ssl.SSLSocket mySSLSocket = (SSLSocket) super.create(host, port, otherHeaders, useFullURL);
        mySSLSocket.setEnabledProtocols("TLSv1,SSLv3".split(","));
        //mySSLSocket.setEnabledCipherSuites(new String[] {"SSL_RSA_WITH_RC4_128_MD5", "SSL_RSA_WITH_RC4_128_SHA", ... many more in this list, removed for brevity
        return mySSLSocket;
    }
} 
```

一个测试 JSP，它具有：

```
AxisProperties.setProperty("https.proxyHost", myProxy);
AxisProperties.setProperty("https.proxyPort", myProxyPort);
AxisProperties.setProperty("https.proxyUser", myProxyUser);
AxisProperties.setProperty("https.proxyPassword", myProxyPass);

System.setProperty("https.protocols", "TLSv1");

AxisProperties.setProperty("axis.socketSecureFactory", "com.myApp.MyCustomSecureSocketFactory");
AxisProperties.setProperty("sun.security.ssl.allowUnsafeRenegotiation", "true");

Service w_Service = new Service();
Call w_Call = (Call) w_Service.createCall();
w_Call.setTargetEndpointAddress(new java.net.URL("https://<<testsiteIPAddr>>/<<whatever>>/int/?wsdl"));
w_Call.setOperationName("GetInfo"); // takes 2 parameters
w_Call.addParameter("param1", org.apache.axis.Constants.XSD_STRING, ParameterMode.IN);
w_Call.addParameter("param2", org.apache.axis.Constants.XSD_STRING, ParameterMode.IN);
w_Call.setReturnType(org.apache.axis.Constants.XSD_STRING);
System.out.println("Invoking method ...");
String w_RetVal = (String) w_Call.invoke(new String[]{"test", "me"});
System.out.println("Method returned: " + w_RetVal); 
```

服务员只为我提供以下信息：

```
SSLProtocol all -SSLv2
SSLCipherSuite TLSv1:SSLv3:!SSLv2:!EXP:!NULL:!LOW:!aNULL:!eNULL 
```

并报告：

访问日志：

```
"POST /<<whatever>>/int/?wsdl HTTP/1.0" 403 –
"POST /<<whatever>>/int/?wsdl HTTP/1.0" 403 – 
```

错误日志：

```
Re-negotiation handshake failed: Not accepted by client!?
Re-negotiation handshake failed: Not accepted by client!? 
```

请求日志：

```
SSLv3 RC4-MD5 "POST /<<whatever>>/int/?wsdl HTTP/1.0" –
SSLv3 RC4-MD5 "POST /<<whatever>>/int/?wsdl HTTP/1.0" – 
```

最后，SSL 调试的某些部分（我从开头删除了一些打印证书信息的行。顺便说一句，所述证书“确实”显示在 SSL 调试中）：

```
13:57:14,200 INFO  [STDOUT] ***
13:57:14,203 INFO  [STDOUT] http-0.0.0.0-8080-3, READ: TLSv1 Handshake, length = 4
13:57:14,224 INFO  [STDOUT] *** ServerHelloDone
13:57:14,241 INFO  [STDOUT] *** ClientKeyExchange, RSA PreMasterSecret, TLSv1
13:57:14,241 INFO  [STDOUT] http-0.0.0.0-8080-3, WRITE: TLSv1 Handshake, length = 134
13:57:14,242 INFO  [STDOUT] SESSION KEYGEN:
13:57:14,248 INFO  [STDOUT] PreMaster Secret:
000013:57:14,250 INFO  [STDOUT] :
0313:57:14,251 INFO  [STDOUT]
0113:57:14,251 INFO  [STDOUT]
3813:57:14,251 INFO  [STDOUT]
ED13:57:14,251 INFO  [STDOUT]
7B13:57:14,251 INFO  [STDOUT]
BF13:57:14,252 INFO  [STDOUT]
A113:57:14,252 INFO  [STDOUT]
3213:57:14,252 INFO  [STDOUT]
13:57:14,252 INFO  [STDOUT]
8313:57:14,252 INFO  [STDOUT]
2313:57:14,252 INFO  [STDOUT]
BE13:57:14,253 INFO  [STDOUT]
9713:57:14,264 INFO  [STDOUT]
9013:57:14,265 INFO  [STDOUT]
4A13:57:14,267 INFO  [STDOUT]
F013:57:14,275 INFO  [STDOUT]
F813:57:14,277 INFO  [STDOUT]
13:57:14,277 INFO  [STDOUT]
13:57:14,277 INFO  [STDOUT] .
13:57:14,278 INFO  [STDOUT] .
813:57:14,278 INFO  [STDOUT] .
13:57:14,278 INFO  [STDOUT] .
13:57:14,278 INFO  [STDOUT] .
13:57:14,278 INFO  [STDOUT] .
213:57:14,279 INFO  [STDOUT] .
#13:57:14,279 INFO  [STDOUT] .
13:57:14,279 INFO  [STDOUT] .
13:57:14,280 INFO  [STDOUT] .
J13:57:14,290 INFO  [STDOUT] .
13:57:14,290 INFO  [STDOUT] .
001013:57:14,290 INFO  [STDOUT] :
D913:57:14,290 INFO  [STDOUT]
F613:57:14,290 INFO  [STDOUT]
6F13:57:14,291 INFO  [STDOUT]
2B13:57:14,291 INFO  [STDOUT]
3913:57:14,291 INFO  [STDOUT]
B913:57:14,291 INFO  [STDOUT]
0813:57:14,291 INFO  [STDOUT]
1013:57:14,292 INFO  [STDOUT]
13:57:14,292 INFO  [STDOUT]
6013:57:14,292 INFO  [STDOUT]
D013:57:14,292 INFO  [STDOUT]
5813:57:14,292 INFO  [STDOUT]
8C13:57:14,293 INFO  [STDOUT]
BF13:57:14,304 INFO  [STDOUT]
6D13:57:14,308 INFO  [STDOUT]
4513:57:14,314 INFO  [STDOUT]
5813:57:14,317 INFO  [STDOUT]
13:57:14,320 INFO  [STDOUT]
13:57:14,320 INFO  [STDOUT] .
13:57:14,321 INFO  [STDOUT] .
o+913:57:14,321 INFO  [STDOUT] .
13:57:14,322 INFO  [STDOUT] .
13:57:14,322 INFO  [STDOUT] .
`13:57:14,322 INFO  [STDOUT] .
X13:57:14,322 INFO  [STDOUT] .
13:57:14,323 INFO  [STDOUT] .
mEX002013:57:14,323 INFO  [STDOUT] :
AB13:57:14,323 INFO  [STDOUT]
BB13:57:14,323 INFO  [STDOUT]
0913:57:14,324 INFO  [STDOUT]
7713:57:14,329 INFO  [STDOUT]
8213:57:14,329 INFO  [STDOUT]
5513:57:14,329 INFO  [STDOUT]
B613:57:14,329 INFO  [STDOUT]
3913:57:14,329 INFO  [STDOUT]
13:57:14,330 INFO  [STDOUT]
FA13:57:14,330 INFO  [STDOUT]
3E13:57:14,330 INFO  [STDOUT]
6C13:57:14,330 INFO  [STDOUT]
0F13:57:14,330 INFO  [STDOUT]
7A13:57:14,331 INFO  [STDOUT]
3C13:57:14,331 INFO  [STDOUT]
3F13:57:14,331 INFO  [STDOUT]
7313:57:14,331 INFO  [STDOUT]
13:57:14,331 INFO  [STDOUT]
13:57:14,331 INFO  [STDOUT] .
13:57:14,332 INFO  [STDOUT] .
13:57:14,332 INFO  [STDOUT] .
w13:57:14,332 INFO  [STDOUT] .
U13:57:14,332 INFO  [STDOUT] .
913:57:14,333 INFO  [STDOUT] .
>l13:57:14,333 INFO  [STDOUT] .
z<?s13:57:14,353 INFO  [STDOUT] CONNECTION KEYGEN:
13:57:14,354 INFO  [STDOUT] Client Nonce:
000013:57:14,357 INFO  [STDOUT] :
4F13:57:14,359 INFO  [STDOUT]
9613:57:14,360 INFO  [STDOUT]
6313:57:14,368 INFO  [STDOUT]
E113:57:14,371 INFO  [STDOUT]
4813:57:14,372 INFO  [STDOUT]
2F13:57:14,381 INFO  [STDOUT]
FB13:57:14,383 INFO  [STDOUT]
F613:57:14,383 INFO  [STDOUT]
13:57:14,383 INFO  [STDOUT]
9E13:57:14,383 INFO  [STDOUT]
C813:57:14,383 INFO  [STDOUT]
3D13:57:14,383 INFO  [STDOUT]
F513:57:14,384 INFO  [STDOUT]
1613:57:14,384 INFO  [STDOUT]
DE13:57:14,384 INFO  [STDOUT]
4F13:57:14,384 INFO  [STDOUT]
5913:57:14,384 INFO  [STDOUT]
13:57:14,384 INFO  [STDOUT]
O13:57:14,385 INFO  [STDOUT] .
c13:57:14,385 INFO  [STDOUT] .
H/13:57:14,385 INFO  [STDOUT] .
13:57:14,385 INFO  [STDOUT] .
13:57:14,386 INFO  [STDOUT] .
13:57:14,399 INFO  [STDOUT] .
=13:57:14,400 INFO  [STDOUT] .
13:57:14,400 INFO  [STDOUT] .
13:57:14,400 INFO  [STDOUT] .
OY001013:57:14,400 INFO  [STDOUT] :
2F13:57:14,401 INFO  [STDOUT]
0513:57:14,401 INFO  [STDOUT]
9413:57:14,402 INFO  [STDOUT]
1C13:57:14,407 INFO  [STDOUT]
4213:57:14,411 INFO  [STDOUT]
E413:57:14,412 INFO  [STDOUT]
F413:57:14,414 INFO  [STDOUT]
C613:57:14,422 INFO  [STDOUT]
13:57:14,422 INFO  [STDOUT]
7213:57:14,422 INFO  [STDOUT]
5613:57:14,422 INFO  [STDOUT]
4A13:57:14,423 INFO  [STDOUT]
9C13:57:14,423 INFO  [STDOUT]
9813:57:14,423 INFO  [STDOUT]
AD13:57:14,423 INFO  [STDOUT]
B813:57:14,423 INFO  [STDOUT]
0713:57:14,423 INFO  [STDOUT]
13:57:14,424 INFO  [STDOUT]
/13:57:14,424 INFO  [STDOUT] .
13:57:14,424 INFO  [STDOUT] .
13:57:14,424 INFO  [STDOUT] .
B13:57:14,424 INFO  [STDOUT] .
13:57:14,425 INFO  [STDOUT] .
13:57:14,425 INFO  [STDOUT] .
rVJ13:57:14,425 INFO  [STDOUT] .
13:57:14,425 INFO  [STDOUT] .
13:57:14,425 INFO  [STDOUT] .
13:57:14,425 INFO  [STDOUT] .
13:57:14,426 INFO  [STDOUT] .
13:57:14,427 INFO  [STDOUT] Server Nonce:
000013:57:14,439 INFO  [STDOUT] :
4F13:57:14,447 INFO  [STDOUT]
9613:57:14,450 INFO  [STDOUT]
6313:57:14,452 INFO  [STDOUT]
E613:57:14,453 INFO  [STDOUT]
DA13:57:14,461 INFO  [STDOUT]
D413:57:14,466 INFO  [STDOUT]
D113:57:14,466 INFO  [STDOUT]
6913:57:14,473 INFO  [STDOUT]
13:57:14,476 INFO  [STDOUT]
F413:57:14,478 INFO  [STDOUT]
1513:57:14,479 INFO  [STDOUT]
4213:57:14,488 INFO  [STDOUT]
0513:57:14,490 INFO  [STDOUT]
1413:57:14,490 INFO  [STDOUT]
5613:57:14,492 INFO  [STDOUT]
1913:57:14,500 INFO  [STDOUT]
D013:57:14,503 INFO  [STDOUT]
13:57:14,505 INFO  [STDOUT]
O13:57:14,506 INFO  [STDOUT] .
c13:57:14,515 INFO  [STDOUT] .
13:57:14,517 INFO  [STDOUT] .
13:57:14,519 INFO  [STDOUT] .
13:57:14,521 INFO  [STDOUT] .
i13:57:14,531 INFO  [STDOUT] .
13:57:14,532 INFO  [STDOUT] .
B13:57:14,532 INFO  [STDOUT] .
13:57:14,540 INFO  [STDOUT] .
V13:57:14,542 INFO  [STDOUT] .
13:57:14,542 INFO  [STDOUT] .
001013:57:14,542 INFO  [STDOUT] :
D813:57:14,542 INFO  [STDOUT]
9F13:57:14,543 INFO  [STDOUT]
DD13:57:14,543 INFO  [STDOUT]
1813:57:14,543 INFO  [STDOUT]
9E13:57:14,543 INFO  [STDOUT]
3413:57:14,543 INFO  [STDOUT]
CF13:57:14,544 INFO  [STDOUT]
DC13:57:14,544 INFO  [STDOUT]
13:57:14,544 INFO  [STDOUT]
1213:57:14,544 INFO  [STDOUT]
6D13:57:14,544 INFO  [STDOUT]
5D13:57:14,544 INFO  [STDOUT]
7D13:57:14,545 INFO  [STDOUT]
7F13:57:14,546 INFO  [STDOUT]
2413:57:14,557 INFO  [STDOUT]
6813:57:14,559 INFO  [STDOUT]
2613:57:14,567 INFO  [STDOUT]
13:57:14,569 INFO  [STDOUT]
13:57:14,569 INFO  [STDOUT] .
13:57:14,569 INFO  [STDOUT] .
13:57:14,569 INFO  [STDOUT] .
13:57:14,569 INFO  [STDOUT] .
13:57:14,569 INFO  [STDOUT] .
413:57:14,570 INFO  [STDOUT] .
13:57:14,570 INFO  [STDOUT] .
13:57:14,570 INFO  [STDOUT] .
m]13:57:14,570 INFO  [STDOUT] .
13:57:14,570 INFO  [STDOUT] .
$h&13:57:14,571 INFO  [STDOUT] Master Secret:
000013:57:14,571 INFO  [STDOUT] :
A813:57:14,571 INFO  [STDOUT]
5313:57:14,571 INFO  [STDOUT]
1013:57:14,571 INFO  [STDOUT]
5613:57:14,572 INFO  [STDOUT]
3213:57:14,585 INFO  [STDOUT]
AD13:57:14,585 INFO  [STDOUT]
A613:57:14,586 INFO  [STDOUT]
A213:57:14,586 INFO  [STDOUT]
13:57:14,586 INFO  [STDOUT]
BB13:57:14,586 INFO  [STDOUT]
A213:57:14,587 INFO  [STDOUT]
1F13:57:14,588 INFO  [STDOUT]
8D13:57:14,588 INFO  [STDOUT]
4613:57:14,594 INFO  [STDOUT]
5F13:57:14,594 INFO  [STDOUT]
E813:57:14,594 INFO  [STDOUT]
DD13:57:14,597 INFO  [STDOUT]
13:57:14,598 INFO  [STDOUT]
13:57:14,600 INFO  [STDOUT] .
S13:57:14,609 INFO  [STDOUT] .
V213:57:14,609 INFO  [STDOUT] .
13:57:14,609 INFO  [STDOUT] .
13:57:14,610 INFO  [STDOUT] .
13:57:14,610 INFO  [STDOUT] .
13:57:14,610 INFO  [STDOUT] .
13:57:14,610 INFO  [STDOUT] .
13:57:14,610 INFO  [STDOUT] .
F_13:57:14,610 INFO  [STDOUT] .
13:57:14,611 INFO  [STDOUT] .
001013:57:14,611 INFO  [STDOUT] :
4813:57:14,611 INFO  [STDOUT]
6813:57:14,611 INFO  [STDOUT]
3013:57:14,611 INFO  [STDOUT]
ED13:57:14,612 INFO  [STDOUT]
BF13:57:14,612 INFO  [STDOUT]
1513:57:14,612 INFO  [STDOUT]
F513:57:14,612 INFO  [STDOUT]
A713:57:14,612 INFO  [STDOUT]
13:57:14,612 INFO  [STDOUT]
7B13:57:14,613 INFO  [STDOUT]
0513:57:14,624 INFO  [STDOUT]
AF13:57:14,626 INFO  [STDOUT]
EC13:57:14,634 INFO  [STDOUT]
DE13:57:14,636 INFO  [STDOUT]
EE13:57:14,636 INFO  [STDOUT]
4D13:57:14,636 INFO  [STDOUT]
5513:57:14,636 INFO  [STDOUT]
13:57:14,637 INFO  [STDOUT]
Hh013:57:14,637 INFO  [STDOUT] .
13:57:14,637 INFO  [STDOUT] .
13:57:14,637 INFO  [STDOUT] .
13:57:14,637 INFO  [STDOUT] .
13:57:14,637 INFO  [STDOUT] .
13:57:14,638 INFO  [STDOUT] .
13:57:14,638 INFO  [STDOUT] .
13:57:14,638 INFO  [STDOUT] .
13:57:14,638 INFO  [STDOUT] .
13:57:14,639 INFO  [STDOUT] .
13:57:14,652 INFO  [STDOUT] .
MU002013:57:14,652 INFO  [STDOUT] :
8313:57:14,652 INFO  [STDOUT]
D513:57:14,653 INFO  [STDOUT]
4813:57:14,653 INFO  [STDOUT]
ED13:57:14,654 INFO  [STDOUT]
DC13:57:14,660 INFO  [STDOUT]
FD13:57:14,662 INFO  [STDOUT]
EF13:57:14,665 INFO  [STDOUT]
2E13:57:14,666 INFO  [STDOUT]
13:57:14,674 INFO  [STDOUT]
3213:57:14,678 INFO  [STDOUT]
B513:57:14,678 INFO  [STDOUT]
2813:57:14,678 INFO  [STDOUT]
D713:57:14,678 INFO  [STDOUT]
AB13:57:14,679 INFO  [STDOUT]
9113:57:14,687 INFO  [STDOUT]
B513:57:14,689 INFO  [STDOUT]
6B13:57:14,689 INFO  [STDOUT]
13:57:14,689 INFO  [STDOUT]
13:57:14,689 INFO  [STDOUT] .
13:57:14,689 INFO  [STDOUT] .
H13:57:14,689 INFO  [STDOUT] .
13:57:14,690 INFO  [STDOUT] .
13:57:14,690 INFO  [STDOUT] .
13:57:14,690 INFO  [STDOUT] .
.213:57:14,690 INFO  [STDOUT] .
(13:57:14,690 INFO  [STDOUT] .
13:57:14,690 INFO  [STDOUT] .
13:57:14,691 INFO  [STDOUT] .
13:57:14,691 INFO  [STDOUT] .
k13:57:14,691 INFO  [STDOUT] Client MAC write Secret:
000013:57:14,691 INFO  [STDOUT] :
BC13:57:14,692 INFO  [STDOUT]
E713:57:14,692 INFO  [STDOUT]
8313:57:14,692 INFO  [STDOUT]
C613:57:14,692 INFO  [STDOUT]
AB13:57:14,692 INFO  [STDOUT]
2313:57:14,692 INFO  [STDOUT]
6E13:57:14,693 INFO  [STDOUT]
5413:57:14,706 INFO  [STDOUT]
13:57:14,714 INFO  [STDOUT]
8E13:57:14,714 INFO  [STDOUT]
1A13:57:14,714 INFO  [STDOUT]
DD13:57:14,714 INFO  [STDOUT]
4613:57:14,715 INFO  [STDOUT]
EC13:57:14,715 INFO  [STDOUT]
2213:57:14,715 INFO  [STDOUT]
5813:57:14,715 INFO  [STDOUT]
2513:57:14,715 INFO  [STDOUT]
13:57:14,716 INFO  [STDOUT]
13:57:14,716 INFO  [STDOUT] .
13:57:14,716 INFO  [STDOUT] .
13:57:14,717 INFO  [STDOUT] .
13:57:14,717 INFO  [STDOUT] .
13:57:14,717 INFO  [STDOUT] .
#nT13:57:14,717 INFO  [STDOUT] .
13:57:14,717 INFO  [STDOUT] .
13:57:14,718 INFO  [STDOUT] .
F13:57:14,718 INFO  [STDOUT] .
"X%13:57:14,718 INFO  [STDOUT] Server MAC write Secret:
000013:57:14,718 INFO  [STDOUT] :
0713:57:14,719 INFO  [STDOUT]
1D13:57:14,719 INFO  [STDOUT]
3213:57:14,719 INFO  [STDOUT]
9613:57:14,720 INFO  [STDOUT]
8013:57:14,720 INFO  [STDOUT]
6413:57:14,721 INFO  [STDOUT]
DD13:57:14,731 INFO  [STDOUT]
AF13:57:14,733 INFO  [STDOUT]
13:57:14,733 INFO  [STDOUT]
E913:57:14,733 INFO  [STDOUT]
A713:57:14,733 INFO  [STDOUT]
2513:57:14,741 INFO  [STDOUT]
6413:57:14,744 INFO  [STDOUT]
6C13:57:14,745 INFO  [STDOUT]
BE13:57:14,753 INFO  [STDOUT]
6413:57:14,755 INFO  [STDOUT]
2213:57:14,755 INFO  [STDOUT]
13:57:14,755 INFO  [STDOUT]
13:57:14,756 INFO  [STDOUT] .
13:57:14,756 INFO  [STDOUT] .
213:57:14,756 INFO  [STDOUT] .
13:57:14,756 INFO  [STDOUT] .
d13:57:14,756 INFO  [STDOUT] .
13:57:14,757 INFO  [STDOUT] .
13:57:14,757 INFO  [STDOUT] .
13:57:14,757 INFO  [STDOUT] .
%dl13:57:14,757 INFO  [STDOUT] .
d"13:57:14,757 INFO  [STDOUT] Client write key:
000013:57:14,758 INFO  [STDOUT] :
B313:57:14,758 INFO  [STDOUT]
DD13:57:14,759 INFO  [STDOUT]
BB13:57:14,771 INFO  [STDOUT]
3013:57:14,771 INFO  [STDOUT]
E713:57:14,772 INFO  [STDOUT]
9C13:57:14,780 INFO  [STDOUT]
B213:57:14,780 INFO  [STDOUT]
8013:57:14,780 INFO  [STDOUT]
13:57:14,780 INFO  [STDOUT]
AD13:57:14,781 INFO  [STDOUT]
7013:57:14,781 INFO  [STDOUT]
2513:57:14,781 INFO  [STDOUT]
FF13:57:14,781 INFO  [STDOUT]
9413:57:14,782 INFO  [STDOUT]
1013:57:14,782 INFO  [STDOUT]
D913:57:14,782 INFO  [STDOUT]
E813:57:14,782 INFO  [STDOUT]
13:57:14,782 INFO  [STDOUT]
13:57:14,783 INFO  [STDOUT] .
13:57:14,783 INFO  [STDOUT] .
13:57:14,783 INFO  [STDOUT] .
013:57:14,783 INFO  [STDOUT] .
13:57:14,783 INFO  [STDOUT] .
13:57:14,783 INFO  [STDOUT] .
13:57:14,783 INFO  [STDOUT] .
13:57:14,784 INFO  [STDOUT] .
p%13:57:14,785 INFO  [STDOUT] .
13:57:14,785 INFO  [STDOUT] .
13:57:14,785 INFO  [STDOUT] .
13:57:14,785 INFO  [STDOUT] .
13:57:14,785 INFO  [STDOUT] .
13:57:14,788 INFO  [STDOUT] Server write key:
000013:57:14,798 INFO  [STDOUT] :
C913:57:14,799 INFO  [STDOUT]
8513:57:14,807 INFO  [STDOUT]
6F13:57:14,810 INFO  [STDOUT]
7C13:57:14,812 INFO  [STDOUT]
2F13:57:14,813 INFO  [STDOUT]
3413:57:14,822 INFO  [STDOUT]
E013:57:14,822 INFO  [STDOUT]
A413:57:14,822 INFO  [STDOUT]
13:57:14,822 INFO  [STDOUT]
4F13:57:14,822 INFO  [STDOUT]
2713:57:14,822 INFO  [STDOUT]
6D13:57:14,823 INFO  [STDOUT]
3813:57:14,823 INFO  [STDOUT]
A213:57:14,823 INFO  [STDOUT]
0D13:57:14,823 INFO  [STDOUT]
BB13:57:14,823 INFO  [STDOUT]
0913:57:14,824 INFO  [STDOUT]
13:57:14,824 INFO  [STDOUT]
13:57:14,824 INFO  [STDOUT] .
13:57:14,824 INFO  [STDOUT] .
o13:57:14,824 INFO  [STDOUT] .
/413:57:14,825 INFO  [STDOUT] .
13:57:14,839 INFO  [STDOUT] .
O'm813:57:14,839 INFO  [STDOUT] .
13:57:14,839 INFO  [STDOUT] .
13:57:14,840 INFO  [STDOUT] .
13:57:14,841 INFO  [STDOUT] .
13:57:14,841 INFO  [STDOUT] ... no IV used for this cipher
13:57:14,843 INFO  [STDOUT] http-0.0.0.0-8080-3, WRITE: TLSv1 Change Cipher Spec, length = 1
13:57:14,852 INFO  [STDOUT] *** Finished
13:57:14,853 INFO  [STDOUT] verify_data:  {
13:57:14,854 INFO  [STDOUT] 65
13:57:14,860 INFO  [STDOUT] ,
13:57:14,862 INFO  [STDOUT] 193
13:57:14,862 INFO  [STDOUT] ,
13:57:14,862 INFO  [STDOUT] 213
13:57:14,862 INFO  [STDOUT] ,
13:57:14,862 INFO  [STDOUT] 102
13:57:14,862 INFO  [STDOUT] ,
13:57:14,863 INFO  [STDOUT] 29
13:57:14,863 INFO  [STDOUT] ,
13:57:14,864 INFO  [STDOUT] 45
13:57:14,864 INFO  [STDOUT] ,
13:57:14,864 INFO  [STDOUT] 222
13:57:14,864 INFO  [STDOUT] ,
13:57:14,865 INFO  [STDOUT] 35
13:57:14,866 INFO  [STDOUT] ,
13:57:14,875 INFO  [STDOUT] 48
13:57:14,877 INFO  [STDOUT] ,
13:57:14,879 INFO  [STDOUT] 140
13:57:14,887 INFO  [STDOUT] ,
13:57:14,889 INFO  [STDOUT] 65
13:57:14,892 INFO  [STDOUT] ,
13:57:14,893 INFO  [STDOUT] 185
13:57:14,912 INFO  [STDOUT]  }
13:57:14,919 INFO  [STDOUT] ***
13:57:14,919 INFO  [STDOUT] http-0.0.0.0-8080-3, WRITE: TLSv1 Handshake, length = 32
13:57:15,243 INFO  [STDOUT] http-0.0.0.0-8080-3, READ: TLSv1 Change Cipher Spec, length = 1
13:57:15,245 INFO  [STDOUT] http-0.0.0.0-8080-3, READ: TLSv1 Handshake, length = 32
13:57:15,246 INFO  [STDOUT] *** Finished
13:57:15,248 INFO  [STDOUT] verify_data:  {
13:57:15,254 INFO  [STDOUT] 120
13:57:15,254 INFO  [STDOUT] ,
13:57:15,257 INFO  [STDOUT] 145
13:57:15,259 INFO  [STDOUT] ,
13:57:15,261 INFO  [STDOUT] 73
13:57:15,261 INFO  [STDOUT] ,
13:57:15,261 INFO  [STDOUT] 165
13:57:15,261 INFO  [STDOUT] ,
13:57:15,262 INFO  [STDOUT] 66
13:57:15,262 INFO  [STDOUT] ,
13:57:15,262 INFO  [STDOUT] 34
13:57:15,262 INFO  [STDOUT] ,
13:57:15,262 INFO  [STDOUT] 229
13:57:15,263 INFO  [STDOUT] ,
13:57:15,263 INFO  [STDOUT] 142
13:57:15,263 INFO  [STDOUT] ,
13:57:15,263 INFO  [STDOUT] 175
13:57:15,263 INFO  [STDOUT] ,
13:57:15,263 INFO  [STDOUT] 87
13:57:15,264 INFO  [STDOUT] ,
13:57:15,276 INFO  [STDOUT] 1
13:57:15,278 INFO  [STDOUT] ,
13:57:15,286 INFO  [STDOUT] 103
13:57:15,289 INFO  [STDOUT]  }
13:57:15,290 INFO  [STDOUT] ***
13:57:15,291 INFO  [STDOUT] %% Cached client session: [Session-1, SSL_RSA_WITH_RC4_128_MD5]
13:57:15,314 INFO  [STDOUT] http-0.0.0.0-8080-3, setSoTimeout(600000) called
13:57:15,315 INFO  [STDOUT] http-0.0.0.0-8080-3, WRITE: TLSv1 Application Data, length = 703
13:57:15,534 INFO  [STDOUT] http-0.0.0.0-8080-3, READ: TLSv1 Alert, length = 18
13:57:15,536 INFO  [STDOUT] http-0.0.0.0-8080-3
13:57:15,538 INFO  [STDOUT] , RECV TLSv1 ALERT:
13:57:15,541 INFO  [STDOUT] fatal,
13:57:15,548 INFO  [STDOUT] handshake_failure
13:57:15,568 INFO  [STDOUT] %% Invalidated:  [Session-1, SSL_RSA_WITH_RC4_128_MD5]
13:57:15,569 INFO  [STDOUT] http-0.0.0.0-8080-3, called closeSocket()
13:57:15,570 INFO  [STDOUT] http-0.0.0.0-8080-3, handling exception: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
13:57:15,570 INFO  [STDOUT] http-0.0.0.0-8080-3, called close()
13:57:15,570 INFO  [STDOUT] http-0.0.0.0-8080-3, called closeInternal(true)
13:57:15,594 ERROR [STDERR] AxisFault
 faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
 faultSubcode:
 faultString: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
 faultActor:
 faultNode:
 faultDetail:
        {http://xml.apache.org/axis/}stackTrace:javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
        at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
        at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:136)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1682)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:932)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:746)
        at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
        at org.apache.axis.transport.http.HTTPSender.readHeadersFromSocket(HTTPSender.java:583)
        at org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:143)
        at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
        at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
        at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
        at org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)
        at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
        at org.apache.axis.client.Call.invoke(Call.java:2767)
        at org.apache.axis.client.Call.invoke(Call.java:2443)
        at org.apache.axis.client.Call.invoke(Call.java:2366)
        at org.apache.axis.client.Call.invoke(Call.java:1812) 
```

*   我尝试评论 allowUnsafeRenegotiation 或将其设置为 true/false
*   启用或注释掉 setEnabledCiphers
*   将提供的客户端证书导入默认密钥库而不是自定义密钥库
*   SSLContext.getInstance("TLS") 以及 "SSL"
*   SSLSocket::setEnabledProtocols 与 SSLv3、TLSv1 和此类组合。
*   重新进行整个 keytool 操作

仍然没有运气。我陷入了同样的错误 - 从现在开始 3 天！

将不胜感激在这方面的任何帮助。

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:19:02.733

尝试升级您正在使用的 java 版本。我在使用 1.6.0_21 时遇到了同样的问题，通过升级到 1.6.0_32 解决了问题。

# ios - 自定义 UITableview 单元格中的链接识别

> ID：10295471
> 
> 赞同：0
> 
> 时间：2012-04-24T09:46:26.497
> 
> 标签：ios, uitableview, scroll, uitextview, drawrect

我有一个应用程序，我在其中使用自定义表格单元格。问题是我想对它们进行 url、电子邮件、电话号码和 fabebook 链接识别。我通过将 uitextviews 作为子视图添加到单元格来尝试它，这自然会导致一些性能问题。什么可以替代实现这样的功能而不会导致滚动性能问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:07:13.343

几天前，我发现了 TTTAttributedLabel，效果很好。我只需要实现 URL 提取器功能来检测 fabebook 链接并将它们标记为链接。现在没有更多的滚动问题。

[https://github.com/TTTAttributedLabel/TTTAttributedLabel](https://github.com/TTTAttributedLabel/TTTAttributedLabel)

# jquery - jQueryMobile listview 没有样式；语法似乎正确

> ID：10295474
> 
> 赞同：0
> 
> 时间：2012-04-24T09:46:32.660
> 
> 标签：jquery, jquery-mobile

我有一个从 JSON 文件动态生成的列表视图，如下所示：

```
$.getJSON('test2.json', function(data) {
                var items = [];
                $.each(data, function(key, val) {
                    items.push('<li data-theme="c" data-icon="myapp-arrow" class="test1"><a href="#dataviewer" data-transition="slide"><p>' + key + '</p>' + val + '</a></li>');
                });
                $('<ul/>', {'data-role' : 'listview','id': 'my-new-list', 'data-divider-theme':'a', 'data-inset': 'false',html: items.join('')}).appendTo('.container');
                alert('Here is where the refresh should fire!');
                $("#my-new-list").listview("refresh");
            }); 
```

它将列表项添加到页面，但根本不设置样式。使用 Chromes 检查器，如果我将列表代码复制并粘贴到我的 html 文档中，它的样式就很好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:11:29.107

试试`$('.ui-page').trigger("create");`。如果尚未创建列表视图，则无法刷新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:55:12.447

将函数绑定到页面初始化并从 .listview() 方法中删除“刷新”解决了我的问题。据我所知，在此初始函数之后的任何其他列表构建都应包括 ('#page-id').listview(refresh); 它应该更新得很好。

```
$( '#searchpage' ).live( 'pageinit',function(){
                $.getJSON('test2.json', function(data) {
                    var items = [];
                    $.each(data, function(key, val) {
                        items.push('<li data-theme="c" data-icon="myapp-arrow" class="test1"><a href="#dataviewer" data-transition="slide"><p>' + key + '</p>' + val + '</a></li>');
                    });
                    $('<ul/>', {'data-role' : 'listview','id': 'my-new-list', 'data-divider-theme':'a', 'data-inset': 'false',html: items.join('')}).appendTo('.container');
                $("#my-new-list").listview();               
                });
            }); 
```

感谢 codaniel 将我推向正确的方向

# c# - 将一个单元格中的值分配给另一个单元格

> ID：10295476
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:46:50.350
> 
> 标签：c#

```
int rowsCount = 0;
//This checks to see that both textbox for items and subitems do not gain focus at the same time
if (textBoxSubItems.Text != string.Empty)
    txtItems.Enabled = false;
else 
    txtItems.Enabled = true;
if (comboBoxItems.SelectedItem != null)
{

    int idx = dataGridViewTimesheet.Rows.Add();
    DataGridViewRow row = dataGridViewTimesheet.Rows[idx];
    row.Cells["items"].Value = comboBoxItems.SelectedItem.ToString() + "-" + textBoxSubItems.Text;
    row.Cells["fromTime"].Value = DateTime.Now.ToLongTimeString();
    row.Cells["toTime"].Value = null;
    row.Cells["duration"].Value = null;
    row.Cells["subTotal"].Value = null;
    // row.Cells["comments"].Value = "1";
}
else 
    MessageBox.Show("Please select an item");

string strGetColumnValue;
if (dataGridViewTimesheet.Rows.Count != 0)
    rowsCount = dataGridViewTimesheet.Rows.Count;
else
    MessageBox.Show("No row in the datagridview");
while (dataGridViewTimesheet.Rows.Count > 0)
{
    try
    {
        if (dataGridViewTimesheet.CurrentRow != null)
            for (int counter = 0; counter < dataGridViewTimesheet.Columns.Count; counter++)
            {
                if (dataGridViewTimesheet.Columns[counter].Index == 3)
                {
                    strGetColumnValue = dataGridViewTimesheet.Rows[rowsCount].Cells[counter].Value.ToString();
                    dataGridViewTimesheet.Rows[rowsCount - 1].Cells[3].Value = strGetColumnValue;
                }
            }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
} 
```

请我在 datagridview 中有 6 列，这些行是动态添加的。我想要的是当datagridview中的行不止一个时，它应该将当前（创建的最后一行）行上第二列的值分配给前一行的第三列。我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:56:32.753

试试这种东西

```
 int count =1;
  foreach (DataGridRow row in dataGridViewTimesheet.Rows)
  { 
     if (count % 2 == 0)
     {
       string secondColumn = dataGridViewTimesheet.Rows[count -1].Cells[1].ToString();
       dataGridViewTimesheet.Rows[count].Cells[2].Value = secondColumn;
     }
    count++;
  } 
```

# bash - 我应该查看什么 snmp OID 以查看我的打印机和交换机是否正在运行

> ID：10295480
> 
> 赞同：3
> 
> 时间：2012-04-24T09:47:05.510
> 
> 标签：bash, networking, snmp

我是[snmp](http://en.wikipedia.org/wiki/Simple_Network_Management_Protocol)新手，我想弄清楚我应该获取/捕获什么 OID 以查看我的打印机、交换机（和服务器）是否正在运行？我不需要知道细节——只是一个简单的测试。[我已经成功地从 bash 和iReasoning MIB browser](http://ireasoning.com/mibbrowser.shtml)的设备获取、getbulk（和walk）请求。

*编辑：*

也许

```
.1.3.6.1.2.1.1.3.0
Name/OID: sysUpTime.0; Value (TimeTicks): 194 hours 43 seconds (69844352) 
```

只是为了那个！？当出现问题时会发生什么？- 这会立即重置吗？- 或者它会停止计数吗？还是只是上次开机以来的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:21:13.380

## 打印机

您应该使用[打印机 MIBv2](https://www.rfc-editor.org/rfc/rfc3805)来监控打印机卡纸错误状态...

*   `hrPrinterDetectedErrorState`报告打印机错误，例如碳粉不足、卡纸等... RFC 包含有关特定代码含义的详细信息
*   `hrDeviceStatus`将揭示打印机处理任务的全局能力。有关详细信息，请参阅[打印机 MIBv2，第 2.2.13.2 节](https://www.rfc-editor.org/rfc/rfc3805#section-2.2.13.2)

`sysUpTime.0`是一个 OID，它报告系统的 SNMP 堆栈已启动的时间（参考[RFC 1213：MIB-II](https://www.rfc-editor.org/rfc/rfc1213)）。如果此值返回并递增，则 99% 的安全赌注是打印机已启动。大多数人`sysUpTime`用来检测设备是否因某种原因重启；如果发生这种情况，您会看到 突然减少`sysUpTime.0`，除非您的最后一个值是 248 天左右（32 位计数器会滚动）。

## 以太网交换机

检查以太网交换机的基本运行状况通常通过检查`sysDescr.0`或来完成`sysUpTime.0`；如果您关心特定链接的上/下状态，则此启发式的问题就来了...此时，您需要检查来自 的值`ifOperStatus`，该值由 索引`ifIndex`并使用来自 的接口名称`ifName`。请参阅以下示例...

```
[mpenning@Hotcoffee ~]$ ## Walk ifName correlated to ifIndex
[mpenning@Hotcoffee ~]$ snmpwalk -v 2c -c Public 172.25.116.6 .1.3.6.1.2.1.31.1.1.1.1
iso.3.6.1.2.1.31.1.1.1.1.1 = STRING: "Fa0/0"
iso.3.6.1.2.1.31.1.1.1.1.2 = STRING: "Nu0"
[mpenning@Hotcoffee ~]$ ## Walk ifOperStatus (up==1)
[mpenning@Hotcoffee ~]$ snmpwalk -v 2c -c Public 172.25.116.6 .1.3.6.1.2.1.2.2.1.8
iso.3.6.1.2.1.2.2.1.8.1 = INTEGER: 1
iso.3.6.1.2.1.2.2.1.8.2 = INTEGER: 1
[mpenning@Hotcoffee ~]$ 
```

因此，我们从示例中知道，接口“Fa0/0”（索引：1）和“Nu0”（索引：2）的 ifOperStatus 均为“up”；索引值是结果的 OID 中返回的最后一个整数。

## 脚本

我假设您将使用`bash`您的监控脚本；如果是这样，请检查您的 SNMP 管理器的[Net-SNMP](http://www.net-snmp.org/)

# matlab - 在图像图上显示多个轴

> ID：10295484
> 
> 赞同：1
> 
> 时间：2012-04-24T09:47:24.343
> 
> 标签：matlab

我有一个显示图像的大图。现在，我想在该图像上显示几个小条形图，每个都有自己的轴并位于图像上的指定位置。

我已经尝试将更多轴（具有透明背景颜色）附加到同一个图中。这基本上是可行的，但是如果我现在放大或平移背景图像，小轴相对于图形保持在相同的位置，因此它们失去了与背景图像上的位置的关系。

Matlab 是否提供了更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:00:09.430

`patch`我建议使用命令绘制条形图。

例如：

```
 plot(rand(10));
 hold on;
 patch([1;1;2;2],[1;2;2;1],'r') 
```

# text-mining - 主题模型的正确槌类

> ID：10295485
> 
> 赞同：1
> 
> 时间：2012-04-24T09:47:25.557
> 
> 标签：text-mining, hidden-markov-models, mallet, lda, topic-modeling

我正在为 Java 项目使用*Mallet*库。

我有 15,000 个文档，每个文档有 400 个令牌。我尝试使用`ParallelTopicModel`. 但我想要一组既包含单个标记又包含标记序列的主题（例如“Java”和“Java Developer”）。

我正在考虑使用 LDA-HMM。我可以使用什么级别的槌？

然后我会将每个主题变成贝叶斯网络的节点，以接收一个令牌或令牌序列作为证据，并进行推理。我可以为此使用哪个 Java 库？

提前致谢。弗朗切斯科

# uml - EMF 中的聚合 VS 组合

> ID：10295490
> 
> 赞同：2
> 
> 时间：2012-04-24T09:47:40.693
> 
> 标签：uml, aggregation, eclipse-emf

EMF中只有组合关系是真的吗？或者有一种方法可以在我的模型之间创建聚合关系？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:52:46.623

> EMF中只有组合关系是真的吗？

有点儿。在 EMF 中定义关联的唯一方法是使用一个`EReference`（实际上，准确地说是一对——每种方式一个）。EReference 有一个“遏制”标志。它由 EMF 在生成期间使用：例如，在生成的 EMF 编辑器中，`containment=true`允许您创建引用类型的子节点。如果没有，您只能参考它们。

但是：更相关的问题是：聚合与组合是什么意思？UML 中对聚合的定义非常松散，以至于每个人都有自己的解释。

也许你可以多说一些关于你想用聚合与组合表达的规则？

hth。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:55:21.627

我记得，有可能......我没有插件了......

看看[这里](http://www.vogella.com/articles/EclipseEMF/article.html)，第**3.2 节。创建 Ecore 图**

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-24T22:31:54.260

一旦您与协会合作，最好避免使用 EMF。

# javascript - 使用 jQuery 解析 Reddit XML 的问题

> ID：10295493
> 
> 赞同：1
> 
> 时间：2012-04-24T09:47:55.543
> 
> 标签：javascript, jquery

我正在尝试使用 subreddit 的 reddit XML 提要，但在使用 JavaScript 解析它时遇到问题。

我有这个代码

```
function parseXml(xml) {
    var xmlResult = "";
    $(xml).find("item").each(function() {
        xmlResult = xmlResult + ($(this).find("title").text()) + "<br />";
    });
    document.write(xmlResult);
} 
```

但问题是它重复了标题。

在 Reddit XML 提要中，有标题和 media:title 标记。我如何解决这个重复。

示例：标题是“非常棒的帖子标题”，在我的输出中我得到“非常棒的帖子标题真的很棒的帖子标题”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-20T05:13:27.697

问题是该`<item>`元素包含两个以`<title>`相同值命名的元素：

```
<item>
  <title>Really awesome title of post</title>
  ...
  <media:title>Really awesome title of post</media:title>
  ...
</item> 
```

当您使用`title`选择器时，jQuery 会返回它们并将它们的文本连接在一起。

一种解决方法是选择第一个元素：

```
$(this).find("title").first().text() 
```

由于这些元素无论如何都包含相同的值，所以你得到哪一个并不重要。

# .net - 用于记录和执行每个方法的操作的 WCF 扩展。IErrorHandler 没有方法的概念？

> ID：10295494
> 
> 赞同：0
> 
> 时间：2012-04-24T09:48:07.997
> 
> 标签：.net, wcf, wcf-extensions

我有正常的 WCF 服务，但方法很少。

我想在方法开始和结束时记录一些信息并执行一些操作。

通过实施`IParameterInspector`，我可以轻松地进行大量日志记录。方法`BeforeCall`并`AfterCall`给我几乎我需要的一切。

但它不适用于*异常*。有，如果发生*异常*`IErrorHandler`，它允许我执行一些处理。缺点是我不知道它是从哪个方法抛出的。都是因为依附于*服务行为*，而不是*操作*本身。*`IErrorHandler`*

 ***但是，我可以使用以下代码获取方法名称：

```
((System.Reflection.RuntimeMethodInfo)(exception.TargetSite)).Name == "MyMethod" 
```

这对我来说似乎不是个好主意。

**问题：伙计们，我可以使用任何其他 WCF 扩展来实现我的目标吗？**你会推荐使用老伙伴 try-catch，也许将它包装成一些很好的语法，这样我就可以在开始和结束时执行操作？语法是什么？您将什么用于类似目的？

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:44:18.097

[IOperationInvoker](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ioperationinvoker.aspx)怎么样？

```
public class NHibernateOperationInvoker : IOperationInvoker {
    private readonly IOperationInvoker _invoker;
    private readonly String _operationName;

    public NHibernateOperationInvoker(IOperationInvoker invoker, String operationName) {
        _invoker = invoker;
        _operationName = operationName;
    }

    public Object[] AllocateInputs() {
        return _invoker.AllocateInputs();
    }

    public Object Invoke(Object instance, Object[] inputs, out Object[] outputs) {
        using (var context = NHibernateContext.CreateNew()) {
            try {
                var result = _invoker.Invoke(instance, inputs, out outputs);
                context.Commit();
                return result;
            } catch(Exception ex) {
                Debug.Fail("Operation " + _operationName + " failed with " + ex.Message);
            }
        }
    }

    public IAsyncResult InvokeBegin(Object instance, Object[] inputs, AsyncCallback callback, Object state) {
        throw new NotImplementedException("NHibernateOperationInvoker.InvokeBegin");
    }

    public Object InvokeEnd(Object instance, out Object[] outputs, IAsyncResult result) {
        throw new NotImplementedException("NHibernateOperationInvoker.InvokeEnd");
    }

    public Boolean IsSynchronous {
        get { return true; }
    }
} 
```

这是使用[IOperationBehavior](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.ioperationbehavior.aspx)附加的`dispatchOperation.Invoker = new NHibernateOperationInvoker(dispatchOperation.Invoker, dispatchOperation.Name);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:27:06.020

我不知道有任何扩展可以实现您想要的，[这里是广泛的列表](http://blogs.msdn.com/b/carlosfigueira/archive/2011/03/14/wcf-extensibility.aspx)。IErrorHandler 是处理所需内容的好方法。

不要用 try/catch 乱扔代码。Try/Catch 意味着您将执行一些补偿逻辑并且日志记录不属于该类别。

我不确定你为什么需要演员或你为什么要测试平等。使用方法信息很好。另一种选择是使用 StackTrace 类来获取有关每个调用的信息，例如

```
 public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
        {
            var s = new StackTrace(error);
            var faultyTowers = s.GetFrame(0);

        } 
```

要考虑的一件事是[PostSharp](http://www.sharpcrafters.com/)，但它不是免费的（$ 和性能）。您可以在每个调用中注入 AOP 方面，您可以将其用于您想要的任何内容。

您应该尝试让您的错误处理程序不要做太多事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T05:21:13.257

你想要的是[IDispatchMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.aspx)

如果有任何东西被发送回客户端 BeforeSendReply 将被调用。如果您将它作为 MessageInspector 添加到 dispatchRuntime 中，则此方法有效：

```
public class MessageLogger : IDispatchMessageInspector
{
    public object AfterReceiveRequest( ref System.ServiceModel.Channels.Message request, IClientChannel channel, InstanceContext instanceContext )
    {
        Log("Begin: " + request.Headers.Action );
        return request;
    }

    public void BeforeSendReply( ref System.ServiceModel.Channels.Message reply, object correlationState )
    {
        System.ServiceModel.Channels.Message request = (System.ServiceModel.Channels.Message)correlationState;
        Log("End: " + request.Headers.Action );
    }
} 
```

缺点是您正在查看原始消息。它们映射到您的服务实现的操作。***

# extjs3 - 两个 Extjs 网格之间的映射

> ID：10295498
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:48:25.450
> 
> 标签：extjs3

我试图在一个页面中映射两个 Extjs 网格，这样更新第一个 extjs 网格将更新第二个网格的行。直到现在我通过在第一个网格中有一个附加列来维护映射，该列包含对应行的所有数据的字符串（由 4 个哈希分隔），**但是每次在第一个网格中更新的行都会在第二个网格**中添加一个新行，我需要改变。这样更新也将删除第二个网格中的相应行

请在紧急情况下提供帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:18:21.847

得到解决方案...

在网格 2 中再创建一列，用于存储我们正在使用 var item = grid.getSelectionModel().getSelected(); 更新的网格 1 行的索引。

# ios - 在 iOS 5.0 OpenGL ES 2.0 纹理缓存上使用 mipmap 过滤

> ID：10295499
> 
> 赞同：0
> 
> 时间：2012-04-24T09:48:31.880
> 
> 标签：ios, opengl-es, opengl-es-2.0

我正在使用纹理缓存将视频帧绘制到屏幕上，就像 Apple 的 RosyWriter 示例应用程序一样。

我想将图像从 1080p 下采样到 320x480 左右（由于各种原因，我不想以较低的分辨率捕获）并使用 mipmap 过滤来消除锯齿。但是，当我尝试添加时：

```
glGenerateMipmap(CVOpenGLESTextureGetTarget(inputTexture));
glTexParameteri(CVOpenGLESTextureGetTarget(inputTexture), GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR); 
```

我只是得到一个黑屏，好像没有生成 mipmap。我正在从一种纹理渲染到另一种纹理。源和目标都使用纹理缓存映射到像素缓冲区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:22:20.230

只能为 2 次幂大小的纹理生成 Mipmap。我能想到的 iOS 相机返回的视频帧大小都没有二维的幂。为了在生成 mipmap 的同时使用纹理缓存，我认为您必须执行一些操作，例如将纹理在屏幕外重新渲染到纹理支持的二次方 FBO，然后为此生成 mipmap。

也就是说，这可能不是实现您想要的最佳方式。Mipmaps 仅在使屏幕上的纹理变小而不是变大时才有帮助。此外，它们在运行时生成的速度非常慢，因此这会拖累您的整个视频处理。

放大时看到什么样的锯齿？当放大视频帧时，正常的硬件纹理过滤应该会产生相当平滑的图像。[例如，从我的GPUImage](https://github.com/BradLarson/GPUImage)框架中抓取并运行 FilterShowcase 示例，然后查看 Crop 过滤器。仅使用硬件过滤，以这种方式放大视频的一部分似乎可以很好地平滑事情。

我确实使用 mipmap 对框架中的大图像进行平滑下采样（当 smoothScaleOutput 设置为 YES 时，请参阅 GPUImagePicture），但同样是用于缩小图像，而不是放大图像。

# ios - 如何验证应用内购买的 iTunes Store 收据

> ID：10295502
> 
> 赞同：16
> 
> 时间：2012-04-24T09:48:46.137
> 
> 标签：ios, in-app-purchase, itunes-store

首先，我不是在谈论调用[https://buy.itunes.apple.com/verifyReceipt/](https://buy.itunes.apple.com/verifyReceipt/)，相反，我要问的是如何验证我们的一位用户的 iTuneStore 收据。

我们在我们的应用中有应用内购买，并且在我们授予产品之前，我们会在我们的服务器上验证游戏内收据。但是，该特定用户声称他被 iTunes 商店收费但没有收到购买的产品，并将其收据发送给我们作为证明。

所以我想知道我们是否可以验证这样的收据。iTunes Store 收据中有“receipt no”和“order number”，但是通过游戏内收据验证我们得到transaction_id，这些数字是完全不同的。任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:56:15.463

您应该联系 Apple 的开发人员支持。如果您在自己的系统中找不到相应的交易，我怀疑是否有办法自行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T20:15:09.953

没有手动方法可以做到这一点，除非您能以某种方式从他的设备中获取收据数据，在这种情况下，您可以使用您提到的 Apple 的 API 来验证他的声明。如果他说的是真的，那么建议他要求退款，然后重新购买。[他在这里](https://reportaproblem.apple.com)应该可以做到。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-05T20:21:30.347

[https://github.com/roddi/ValidateStoreReceipt/blob/master/validatereceipt.m](https://github.com/roddi/ValidateStoreReceipt/blob/master/validatereceipt.m)有源代码，它将验证收据，并让您解析它并转储所有交易。如果有 IAP 交易，您会看到它。

您必须编写一个特殊用途的 iOS 应用程序，该应用程序使用该代码并将收据提供给它。这似乎是很多工作。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2016-06-16T06:33:28.293

> 我不是在谈论打电话给[https://buy.itunes.apple.com/verifyReceipt/](https://buy.itunes.apple.com/verifyReceipt/)

实际上你有在线收据验证工具，可以通过上面的链接访问。没有更好的方法来验证您的收据。可以进行离线验证，但即使成功，也没有人可以 100% 保证您的收据有效（可能只是相同的签名，但仍然是假的）。

Apple 在其服务器上处理每笔购买，如果成功，收据将保存到数据库中。如果您想查看收据，您必须访问该数据库并索取您的收据。所以你有一个工具，但不想使用它？那就没有靠谱的办法了。

# mysql - DBI::mysql 和 File::Temp

> ID：10295503
> 
> 赞同：2
> 
> 时间：2012-04-24T09:48:46.560
> 
> 标签：mysql, perl, dbi, temporary-files

我正在尝试使用该`LOAD DATA LOCAL INFILE`语句将数据加载到 MySQL 数据库中。在普通文件上，这工作正常。

如果我创建一个临时文件`File::Temp`，将 CSV 数据存储在其中，关闭文件，然后`LOAD`使用

```
$dbh->do("LOAD DATA LOCAL INFILE '$tempfile' INTO TABLE $temptable" FIELDS TERMINATED BY ','); 
```

最后两条记录可重复地省略。但是，如果我在创建和`LOAD`ing 之间对临时文件执行任何操作，例如使用

```
`touch $tempfile`; 
```

一切都按预期工作。

这是 MySQL 驱动程序在新创建的临时文件时遇到问题的问题吗？它是文件系统（ext4）问题，也许缓存刷新没有及时发生？我在这里错过了什么吗？

**编辑**：实际上，如果临时 CSV 文件不是由格式转换器子例程创建的，而是手动创建的，则*所有记录都将被省略，如下所示。*我还包括了数据库交互的代码。请注意 commented `touch $tmpfh`，当未注释时，它将使示例工作。

添加`UNLINK => 0`到`File::Temp->new()`并没有什么不同。

```
my $tmpfh = File::Temp->new();
print $tmpfh <<EOT;
record1,textfield1
record2,textfield2
record3,textfield3
record4,textfield4
record5,textfield5
EOT

# `touch $tmpfh`; # uncomment this line to make it work

# get db handle
my $dbh = DBI->connect("DBI:mysql:$dbname:$dbserver", $username, $pwd);

# drop and recreate temp table
$dbh->do("DROP TABLE IF EXISTS $temptable") or die;
$dbh->do("CREATE TABLE $temptable (
`id`       INT(11)      NOT NULL PRIMARY KEY AUTO_INCREMENT,
`header`   VARCHAR(255) NOT NULL,
`sequence` MEDIUMBLOB)")
    or die;

# load data into temp table
my $nrecords = $dbh->do("LOAD DATA LOCAL INFILE '$tmpfh' 
INTO TABLE $temptable 
FIELDS TERMINATED BY ',' 
(header, sequence)")
    or die;

$dbh->disconnect();

printf "Loaded %d records from %s into %s on %s.\n", $nrecords, $tmpfh, $dbname, $dbserver; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T16:51:01.313

关闭文件句柄以刷新缓冲区。如果您希望在对象超出范围时保留文件，请保留“UNLINK => 0”。

# iphone - iOS：登录后如何对用户进行身份验证（用于自动登录）？

> ID：10295504
> 
> 赞同：10
> 
> 时间：2012-04-24T09:48:47.240
> 
> 标签：iphone, ios, xcode, autologin

我想使用自动登录功能。因此，当用户打开应用程序时，他会被委派到“登录屏幕”。当他成功登录时，他应该被引导到他的帐户。我称之为“帐户屏幕”。现在，当用户重新启动应用程序时，他应该直接转到他的帐户，而不会看到“登录屏幕”。

登录功能在我的项目中已经可以正常工作（用户名和密码保存在 UserDefault 中），但是每次关闭应用程序时，我都必须重新登录。所以我的问题是：如何自动登录用户？或者更好的说法是：如何检查数据（保存在 UserDefault 中）是否与数据库（MYSQL）中的相同？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-24T12:06:55.463

1.  当用户第一次登录时，您将用户凭据保存在 iPhone 的钥匙串中。
2.  再次打开应用程序时，您检查钥匙串中是否存在用户凭据，如果是，您的代码应调用登录逻辑并执行自动登录并在登录屏幕后转到屏幕。如果没有，那么您应该显示登录屏幕。您可以在 AppDelegates applicationDidFinishLaunching 中执行此逻辑。
3.  每当用户单击注销按钮时，首先从钥匙串中删除用户凭据，然后返回登录控制器。

只需在用户登录时将登录凭据添加到钥匙串，并且仅在用户单击注销按钮后将其删除。如果用户在未注销的情况下退出应用程序，则凭据仍将位于钥匙串中，您可以在用户返回应用程序时检索它们。

**编辑：** 我想我必须再添加一件事。如果您的登录逻辑需要时间（例如您使用 Web 请求或其他方式登录），请将登录逻辑代码放在您的 Login ViewController 而不是 ApplicationDelegate 中，并在自动登录期间使用任何活动指示器过程。

**编辑**：我编辑了整个答案，用钥匙串替换了 NSUserDefault。[这个](http://software-security.sans.org/blog/2011/01/05/using-keychain-to-store-passwords-ios-iphone-ipad/)线程解释了原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T18:03:44.217

在保存用户名和密码时，强烈建议保存在 Keychain 而不是 NSUserDefaults 中。参考这篇[文章](https://stackoverflow.com/a/6972305/942966)以获得更好的理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T09:32:25.720

要回答这个问题：如果您想使用钥匙串数据自动登录，请使用免费框架“SFHFKeychainUtils”。它将用户名、密码和服务名保存在钥匙串中。如果您想找回它，只需将用户名保存在 NSUserDefaults 中，您就可以轻松获取密码。

开始了：

**SiFi HiFi 框架：** [https ://github.com/ldandersen/scifihifi-iphone/tree/master/security](https://github.com/ldandersen/scifihifi-iphone/tree/master/security)

**SiFi Hifi 框架（ARC 兼容）：** [https ://stackoverflow.com/a/10348964/1011125](https://stackoverflow.com/a/10348964/1011125)

**如何使用 SFHFKeychainUtils：** [http ://gorgando.com/blog/technology/iphone_development/simple-iphone-tutorial-password-management-using-the-keychain-by-using-sfhfkeychainutils](http://gorgando.com/blog/technology/iphone_development/simple-iphone-tutorial-password-management-using-the-keychain-by-using-sfhfkeychainutils)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-15T17:27:19.090

我使用了 NSUserDefaults 和 SSKeychain 的组合。我使用 NSUserDefaults 来存储用户名和 SSKeychain 来存储密码。

这是我用来保存凭据的代码

```
NSString *user = self.username.text;
NSString *password = self.pass.text;
[SSKeychain setPassword:password forService:@"achat" account:user];
NSUserDefaults *dUser = [NSUserDefaults standardUserDefaults];
[dUser setObject:user forKey:@"user"];
[dUser synchronize]; 
```

这是我用来检索凭据的代码

```
NSUserDefaults *eUser = [NSUserDefaults standardUserDefaults];
NSString *savedUser = [eUser objectForKey:@"user"];

    if (!savedUser) {
        UIAlertView *uhoh = [[UIAlertView alloc] initWithTitle:@"Oops!" message:@"Please enter your username and password." delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
        [uhoh show];
    }

    else {
            NSString *savedPass = [SSKeychain passwordForService:@"achat" account:savedUser];
            self.username.text = savedUser;
            self.pass.text = savedPass;
         } 
```

# perl - 在 perl 中使用嵌套标签进行 XML 解析

> ID：10295506
> 
> 赞同：1
> 
> 时间：2012-04-24T09:48:47.790
> 
> 标签：perl, xml-parsing

我正在尝试解析包含嵌套标签集合的 xml 文件。我正在尝试使用 perl XML::Simple API 进行解析，并且单个标签值被准确解析，但能够解析嵌套标签值。

```
<archetype>
    <original_language></original_language>
    <description></description>
    <archetype_id>
    <definition></definition>
    <ontology></ontology>
</archetype> 
```

在定义部分包含项目详细信息

例子

```
<definition>
.
.
<node_id>at0004</node_id>
<attributes xsi:type="C_SINGLE_ATTRIBUTE">
<rm_attribute_name>value</rm_attribute_name>
+<existence> </existence>
<children xsi:type="C_DV_QUANTITY">
    <rm_type_name>DV_QUANTITY</rm_type_name>
    +<occurrences></occurrences>
    <node_id/>
    +<property></property>
    <list>
    <magnitude>
        <lower_included>true</lower_included>
        <upper_included>false</upper_included>
        <lower_unbounded>false</lower_unbounded>
        <upper_unbounded>false</upper_unbounded>
        <lower>0.0</lower>
        <upper>1000.0</upper>
</magnitude>
<units>mm[Hg]</units>
</list>
</children>
</attributes>
.
.
</definition> 
```

从上面的示例文件格式中，我想过滤如下内容

```
node_id - > at0004
    magnitude -> lower -> 0.0
    magnitude -> higher -> 1000.0 
```

请指导我过滤内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:46:24.437

You need to learn about references: [perlreftut](http://p3rl.org/reftut), [perlref](http://p3rl.org/perlref), [perldsc](http://p3rl.org/dsc).

```
use strictures;
use XML::Simple qw(:strict);

my $root = XMLin(<<'XML', ForceArray => 0, KeyAttr => undef);
<definition>
.
.
<node_id>at0004</node_id>
<attributes xsi:type="C_SINGLE_ATTRIBUTE">
<rm_attribute_name>value</rm_attribute_name>
+<existence> </existence>
<children xsi:type="C_DV_QUANTITY">
    <rm_type_name>DV_QUANTITY</rm_type_name>
    +<occurrences></occurrences>
    <node_id/>
    +<property></property>
    <list>
    <magnitude>
        <lower_included>true</lower_included>
        <upper_included>false</upper_included>
        <lower_unbounded>false</lower_unbounded>
        <upper_unbounded>false</upper_unbounded>
        <lower>0.0</lower>
        <upper>1000.0</upper>
</magnitude>
<units>mm[Hg]</units>
</list>
</children>
</attributes>
.
.
</definition>
XML

my $m = $root->{attributes}{children}{list}{magnitude};
printf <<'TEMPLATE', $root->{node_id}, $m->{lower}, $m->{upper};
node_id -> %s
    magnitude -> lower -> %.1f
    magnitude -> higher -> %.1f
TEMPLATE

use Data::Dump::Streamer qw(Dump); Dump $root; 
```

* * *

Output:

```
node_id -> at0004
    magnitude -> lower -> 0.0
    magnitude -> higher -> 1000.0

$HASH1 = {
    attributes => {
        children => {
            content => [("\n    +") x 2],
            list    => {
                magnitude => {
                    lower           => '0.0',
                    lower_included  => 'true',
                    lower_unbounded => 'false',
                    upper           => '1000.0',
                    upper_included  => 'false',
                    upper_unbounded => 'false'
                },
                units => 'mm[Hg]'
            },
            node_id      => {},
            occurrences  => {},
            property     => {},
            rm_type_name => 'DV_QUANTITY',
            "xsi:type"   => 'C_DV_QUANTITY'
        },
        content           => "\n+",
        existence         => {},
        rm_attribute_name => 'value',
        "xsi:type"        => 'C_SINGLE_ATTRIBUTE'
    },
    content => [("\n.\n.\n") x 2],
    node_id => 'at0004'
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:01:17.150

这是一个[XML::Twig](http://search.cpan.org/~mirod/XML-Twig-3.39/Twig.pm)程序可以做到这一点，尽管我做了一些假设，您可能需要进行调整。我不知道是否`<defintions>`可以有多个节点属性对，所以我写了这个来处理多对：

```
#!/Users/brian/bin/perls/perl5.14.2

use XML::Twig;
use Data::Dumper;

my $twig = XML::Twig->new(
    twig_handlers => {
        magnitude => sub {
            my $m = $_;
            my $hash = $m->simplify;
            my $node_id = $m->parent( 'attributes' )->prev_sibling( 'node_id' )->text;
            print "node -> $node_id\n",
                "\tmagnitude -> lower -> $hash->{lower} $units\n",
                "\tmagnitude -> higher -> $hash->{upper} $units\n";
            },
        },
    );

$twig->parse(*DATA);

__END__
<definition>

<node_id>at0004</node_id>
<attributes xsi:type="C_SINGLE_ATTRIBUTE">
    <rm_attribute_name>value</rm_attribute_name>
    <existence> </existence>
    <children xsi:type="C_DV_QUANTITY">
        <rm_type_name>DV_QUANTITY</rm_type_name>
        <occurrences></occurrences>
        <node_id/>
        <property></property>
        <list>
            <magnitude>
                <lower_included>true</lower_included>
                <upper_included>false</upper_included>
                <lower_unbounded>false</lower_unbounded>
                <upper_unbounded>false</upper_unbounded>
                <lower>0.0</lower>
                <upper>1000.0</upper>
            </magnitude>
            <units>mm[Hg]</units>
        </list>
    </children>
</attributes>

<node_id>at0005</node_id>
<attributes xsi:type="C_SINGLE_ATTRIBUTE">
    <rm_attribute_name>value</rm_attribute_name>
    <existence> </existence>
    <children xsi:type="C_DV_QUANTITY">
        <rm_type_name>DV_QUANTITY</rm_type_name>
        <occurrences></occurrences>
        <node_id/>
        <property></property>
        <list>
            <magnitude>
                <lower_included>true</lower_included>
                <upper_included>false</upper_included>
                <lower_unbounded>false</lower_unbounded>
                <upper_unbounded>false</upper_unbounded>
                <lower>100.9</lower>
                <upper>998.7</upper>
            </magnitude>
            <units>mm[Hg]</units>
        </list>
    </children>
</attributes>

</definition> 
```

# php - 如何在浏览器“返回”上刷新图像？

> ID：10295507
> 
> 赞同：0
> 
> 时间：2012-04-24T09:48:49.970
> 
> 标签：php, html

当用户点击浏览器的后退按钮时，我将需要我的页面来刷新图像。这是一个验证码，出于某种原因，“返回”页面正在加载旧的验证码，该代码将不再有效。

我尝试添加`<img src="captcha.jpg?"<?php echo time(); ?> />`，但可以肯定的是，图像是在缓存中找到的。（我们几秒钟前加载了它:)）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:57:20.707

您可以使用：**[使用 http-equiv 元标记的缓存控制](http://www.w3schools.com/tags/att_meta_http_equiv.asp)**，

```
<meta http-equiv="cache-control" content="no-cache" /> 
```

在您的***页面头标签***中。

这将强制浏览器不查看缓存的内容。并生成一个请求源并将结果带到新的请求中。

您可以在这里进一步查看：[http](http://www.metatags.org/meta_http_equiv_cache_control) ://www.metatags.org/meta_http_equiv_cache_control 希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:57:59.317

好的，只是一个建议：

使用 javascript，您可以检测单击的后退按钮，请参阅此主题：[http ://www.bajb.net/2010/02/browser-back-button-detection/](http://www.bajb.net/2010/02/browser-back-button-detection/)

然后在管理事件的代码中执行 ajax 调用或更新图像所需的任何操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:09:45.660

也使用 php 标头，它会帮助你很多

```
 header("Expires: Thu, 19 Nov 1981 08:52:00 GMT"); 
   header("Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0");       
   header("Pragma: no-cache"); 
```

和html标签

```
 <META HTTP-EQUIV="Expires" CONTENT="0">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-store"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T10:13:38.887

在客户端使用`window.onpageshow`事件并使用 AJAX 刷新 CAPTCHA。

# html5-video - 在 HTML5 CANVAS 上渲染视频占用大量 CPU

> ID：10295510
> 
> 赞同：0
> 
> 时间：2012-04-24T09:48:56.077
> 
> 标签：html5-video, html5-canvas

我正在使用 HTML5 Canvas 渲染视频，但渲染占用了大量 CPU？我正在使用 GtkLauncher（带有 webkit 1.8.0）在画布上渲染视频。有人可以对此有所了解吗？Canvas 上的视频渲染对嵌入式系统来说效率不高吗？另外我想知道，在我真正开始在画布上渲染数据之前，HTML5 视频标签中是否有办法知道视频帧速率。我需要知道这一点，因为我必须以相同的帧速率设置计时器（用于绘制视频帧）。

谢谢和问候， 苏维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:35:17.323

很可能视频渲染没有加速，需要

*   软件解码

*   在软件上调整大小

您没有提供系统详细信息，所以这只是一个猜测。通过戳浏览器内部，您可以挖掘出真相。

视频帧率不能事先知道，理论上可以在一个来源内变化。但是，如果您自己托管文件，您可以使用 ffmpeg 等工具预先提取此信息并在边带中传输数字（例如使用 AJAX / JSON）。

# ios - 在 iOS 上编译时定义 Facebook URL Scheme

> ID：10295511
> 
> 赞同：1
> 
> 时间：2012-04-24T09:48:57.417
> 
> 标签：ios, cocoa-touch, info.plist, facebook-ios-sdk

这个问题也可能是一般的“如何在编译时更改 info.plist 内容”，但我知道这是一个复杂的问题，在 iOS 和 MacOSX 上的处理方式不同。问题是，特别是在使用 Facebook SDK 时，两次提供我的 FB 应用程序 ID 感觉有点不对 - 一次在应用程序 info.plist 的“URL 方案”下的“URL 类型”字典中，一次在我的代码中。我希望能够在我的代码中动态更改 app-id 而无需触及 info.plist 文件。我查看了 Apple 的启动服务，发现了一个可能有用的“ [LSSetDefaultHandlerForURLScheme](https://developer.apple.com/library/mac/documentation/Carbon/Reference/LaunchServicesReference/Reference/reference.html#//apple_ref/c/func/LSSetDefaultHandlerForURLScheme)" 方法，才发现我正在查看 MAC 开发人员库。我看到了一些关于这个问题的其他 SO 问题，但普遍认为这是不可行的。任何不涉及从中提取信息的想法编译时的 plist？（我希望能够支持在我的代码的特定头文件中定义的多个 app-id）。

谢谢！

# asp.net - 在 ASP.NET 应用程序中导入 Linkedin 配置文件图像

> ID：10295513
> 
> 赞同：1
> 
> 时间：2012-04-24T09:49:04.907
> 
> 标签：asp.net, photo, linkedin, user-profile

我需要在我的 ASP.NET 应用程序中显示用户的 Linkedin 个人资料图像。用户需要在弹出窗口中登录 Linkedin，然后我的 ASP.NET 应用程序将从 Linkedin 配置文件中提取图像，并在我的 asp.net 网站上显示用户名。

# objective-c - 更改窗口大小时的 NSWindow 事件

> ID：10295515
> 
> 赞同：4
> 
> 时间：2012-04-24T09:49:06.840
> 
> 标签：objective-c

在Window中更改大小时的方法调用是什么？我发现一些事情`windowDidResize:`，所以我尝试做

```
- (void)windowDidResize:(NSNotification *)notification {
    NSLog(@"test");
} 
```

我找到了需要使用的东西`NSWindowDidResizeNotification`，但我第一次使用 NSNotification 并且对此理解不佳。有人可以为我的活动写一个完整的例子吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T10:19:26.950

该`-windowDidResize:`方法在窗口委托上调用。对象是否具有您发布窗口委托的方法？

对于委托以外的其他内容，您可以执行以下操作：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(windowDidResize:) name:NSWindowDidResizeNotification object:theWindow]; 
```

并且，当观察者不再感兴趣或被释放时：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:NSWindowDidResizeNotification object:theWindow]; 
```

另一种方法是使用新的基于块的 API 来`NSNotificationCenter`：

```
id observation = [[NSNotificationCenter defaultCenter] addObserverForName:NSWindowDidResizeNotification object:theWindow queue:nil usingBlock:^(NSNotification *){
    NSLog(@"test");
}];
// store/retain the observation for as long as you're interested in it. When it's deallocated, you stop observing. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-04T09:27:54.667

你可以实现 NSWindowDelegate：

```
class YourVC: NSWindowDelegate {

    // This method trigger when you press the resize button in the window toolbar
    func windowDidResize(_ notification: Notification) {

          // Write your code here   

    }
} 
```

并且，在 viewDidLoad() 或 viewDidAppear() 方法中

```
 self.view.window?.delegate = self 
```

您还可以使用其他委托方法：

*   windowDidEnterFullScreen
*   windowDidExitFullScreen ...

# sql - 解析查询时出错。[ 令牌行号 = 1

> ID：10295521
> 
> 赞同：1
> 
> 时间：2012-04-24T09:49:19.020
> 
> 标签：sql

首先，我是俱乐部的新手，必须说我觉得它是一个非常有趣的网站，它确实对我的 C# 编码经验帮助很大。感谢那。

完全不同的是，我在我们的一位客户（我们转售文档管理软件）处遇到了跟随错误。我正在尝试确定如下所述的此错误消息是否会导致性能问题。

谷歌这个错误消息已经告诉我，它可能是在使用保留字作为列名时引起的。

> 24-4-2012 11:16:49 [ERROR]：解析查询时出错。[令牌行号 = 1，令牌行偏移量 = 77，错误令牌 = 66667] 更新 WS_LOCATION SET 频率 = @FreqParams，LUTime = @LUTimeParams，客户端 = ''，Matter = '' WHERE WSLoc_ID = '22' 发生在 InsertIntoLocationTables .

我对 SQL 中的所有保留字都不是很熟悉，也许你们中的任何人都可以帮助我确定导致此错误的原因是什么？

顺便说一下，它是一个本地 SQL Compact 数据库 (.sdf)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:46:34.147

用括号括起您的姓名将防止使用 T-SQL 保留字的错误。

```
UPDATE [WS_LOCATION] SET
[Frequency] = @FreqParams,
[LUTime] = @LUTimeParams,
[Client] = '',
[Matter] = ''
WHERE [WSLoc_ID] = '22'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:53:33.340

如果您对保留字有疑问，请在列名前加上表名：

```
UPDATE WS_LOCATION 
SET WS_LOCATION.Frequency = @FreqParams, WS_LOCATION.LUTime = @LUTimeParams, WS_LOCATION.Client = '', WS_LOCATION.Matter = '' 
WHERE WS_LOCATION.WSLoc_ID = '22' 
```

# ubuntu - Ubuntu 12.04 LTS 上安装的 Hadoop 单节点集群在哪里？

> ID：10295527
> 
> 赞同：2
> 
> 时间：2012-04-24T09:49:57.107
> 
> 标签：ubuntu, hadoop, ubuntu-12.04

我正在 Ubuntu 上设置单节点集群，并使用常用指南 [Running Hadoop on Ubuntu Linux (Single-Node Cluster)](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)。

一切顺利，直到我开始格式化 HDFS Namenode

```
hduser@ubuntu:~$ /usr/local/hadoop/bin/hadoop namenode -format 
```

或者

```
hadoop@ubuntu:~$ <HADOOP_INSTALL>/hadoop/bin/hadoop namenode -format 
```

我无法找到运行此命令的正确位置。这很可能是由于我对 Linux 不熟悉。

我使用 2011 年 10 月 17 日的 deb 安装了 Hadoop：版本 0.20.205.0

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T10:55:14.953

您列出的文章指示您将 hadoop 显式安装到 /usr/local，但如果您没有将它安装在此位置，那么您可以使用一个技巧来查找实际安装 hadoop 的位置：

```
#> sudo updatedb
#> locate start-dfs.sh
/opt/hadoop-0.20.2/bin/start-dfs.sh
#> ls -l /opt/hadoop-0.20.2/bin/
hadoop             rcc                start-dfs.sh      stop-dfs.sh
hadoop-config.sh   slaves.sh          start-mapred.sh   stop-mapred.sh
hadoop-daemon.sh   start-all.sh       stop-all.sh
hadoop-daemons.sh  start-balancer.sh  stop-balancer.sh 
```

这应该列出 hadoop start-dfs.sh 命令的位置，并且在这个位置也将是您正在寻找的 hadoop 脚本。

如果您从 deb 包中安装了 Hadoop（正如您在最后提到的那样），那么您可以按照本文中的说明列出 deb 的内容，并希望找到该包的安装位置：

*   [https://superuser.com/questions/82923/how-to-list-files-of-a-debian-package-without-install](https://superuser.com/questions/82923/how-to-list-files-of-a-debian-package-without-install)

# python - 如何在 Python 2.7 中使用 smtplib 在电子邮件中设置字符集？

> ID：10295530
> 
> 赞同：19
> 
> 时间：2012-04-24T09:50:17.463
> 
> 标签：python, email, character-encoding, smtplib

我正在编写一个带有身份验证的简单 smtp 发件人。这是我的代码

```
 SMTPserver, sender, destination = 'smtp.googlemail.com', 'user@gmail.com', ['reciever@gmail.com']
    USERNAME, PASSWORD = "user", "password"

    # typical values for text_subtype are plain, html, xml
    text_subtype = 'plain'

    content="""
    Hello, world!
    """

    subject="Message Subject"

    from smtplib import SMTP_SSL as SMTP       # this invokes the secure SMTP protocol (port 465, uses SSL)
    # from smtplib import SMTP                  # use this for standard SMTP protocol   (port 25, no encryption)
    from email.MIMEText import MIMEText

    try:
        msg = MIMEText(content, text_subtype)
        msg['Subject']=       subject
        msg['From']   = sender # some SMTP servers will do this automatically, not all

        conn = SMTP(SMTPserver)
        conn.set_debuglevel(False)
        conn.login(USERNAME, PASSWORD)
        try:
            conn.sendmail(sender, destination, msg.as_string())
        finally:
            conn.close()

    except Exception, exc:
        sys.exit( "mail failed; %s" % str(exc) ) # give a error message 
```

它工作完美，直到我尝试发送非 ascii 符号（俄语西里尔文）。我应该如何在消息中定义字符集以使其以正确的方式显示？提前致谢！

UPD。我改变了我的代码：

```
text_subtype = 'text'
content="<p>Текст письма</p>"
msg = MIMEText(content, text_subtype)
msg['From']=sender # some SMTP servers will do this automatically, not all
msg['MIME-Version']="1.0"
msg['Subject']="=?UTF-8?Q?Тема письма?="
msg['Content-Type'] = "text/html; charset=utf-8"
msg['Content-Transfer-Encoding'] = "quoted-printable"
…
conn.sendmail(sender, destination, str(msg)) 
```

所以，我第一次指定 text_subtype = 'text'，然后在标题中放置一个 msg['Content-Type'] = "text/html; charset=utf-8" 字符串。这是正确的吗？

**更新**最后，我解决了我的消息问题你应该像 msg = MIMEText(content.encode('utf-8'), 'plain', 'UTF-8') 这样写

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-24T17:06:03.890

```
from email.header import Header
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

def contains_non_ascii_characters(str):
    return not all(ord(c) < 128 for c in str)   

def add_header(message, header_name, header_value):
    if contains_non_ascii_characters(header_value):
        h = Header(header_value, 'utf-8')
        message[header_name] = h
    else:
        message[header_name] = header_value    
    return message

............
msg = MIMEMultipart('alternative')
msg = add_header(msg, 'Subject', subject)

if contains_non_ascii_characters(html):
    html_text = MIMEText(html.encode('utf-8'), 'html','utf-8')
else:
    html_text = MIMEText(html, 'html')    

if(contains_non_ascii_characters(plain)):
    plain_text = MIMEText(plain.encode('utf-8'),'plain','utf-8') 
else:
    plain_text = MIMEText(plain,'plain')

msg.attach(plain_text)
msg.attach(html_text) 
```

无论您的文本是否包含非 ASCII 字符，这都应该为您提供正确的文本和标题编码。这也意味着您不会不必要地自动使用 base64 编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T11:42:49.433

您应该使用 UTF-8 编码您的消息文本

```
msg = MIMEText(content.encode('utf-8'), text_subtype). 
```

更多信息： [http ://radix.twistedmatrix.com/2010/07/how-to-send-good-unicode-email-with.html](http://radix.twistedmatrix.com/2010/07/how-to-send-good-unicode-email-with.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T10:15:17.840

您可能必须使用 SMTP 标头来实现发送不同的字符集，尝试添加这个 -

`msg['Content-Type'] = "text/html; charset=us-ascii"`

（根据需要更改字符集）

# windows-xp - windowsXP后台右键菜单：新文件类型

> ID：10295531
> 
> 赞同：0
> 
> 时间：2012-04-24T09:50:18.400
> 
> 标签：windows-xp, registry

我想从右键单击菜单中删除所有文件类型，但会导致右键单击 Windows XP 中的背景（然后转到“新建”）。我在注册表中尝试了 HKCR ->Directory ->Background->sheelex 并且有“新”项，但它只有一个值。
问题是我在那里有 20 种文件类型，但我只需要一种来节省每次查找该 .txt 的时间（以确保没有随机内容添加到新文件中，无论如何我每次都在自己编辑扩展名）。我在哪里可以找到这个菜单的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:15:29.817

此处解释了此主题：*扩展新子菜单*
[http://msdn.microsoft.com/en-us/library/windows/desktop/cc144101(v=vs.85).aspx#new](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144101(v=vs.85).aspx#new)

相反，您需要在注册表中搜索以下键：

```
HKEY_CLASSES_ROOT\.XXX\ShellNew 
```

`XXX`文件扩展名在哪里。例如：`bmp`、`rtf`、`txt`等。
您可以使用下面的批处理文件来执行此操作。

```
@ECHO OFF
REG EXPORT HKEY_CLASSES_ROOT "%TEMP%\REGLIST.TMP"
FIND /I "\SHELLNEW]" "%TEMP%\REGLIST.TMP"
DEL "%TEMP%\REGLIST.TMP"
PAUSE 
```

它会显示这样的东西。

```
[HKEY_CLASSES_ROOT\.doc\ShellNew]
[HKEY_CLASSES_ROOT\.dpp\ShellNew]
[HKEY_CLASSES_ROOT\.Hxs\Hxs\ShellNew]
[HKEY_CLASSES_ROOT\.lnk\ShellNew]
[HKEY_CLASSES_ROOT\.rtf\ShellNew]
[HKEY_CLASSES_ROOT\.txt\ShellNew]
[HKEY_CLASSES_ROOT\.zip\ShellNew] 
```

请注意，并非所有`ShellNew`子项都会显示在`New`子菜单上，因为它必须遵循上述链接中描述的要求。

若要删除“*新建文件”*菜单项，请删除`ShellNew`注册表子项。

例如，如果文件扩展名为`dpp`，则注册表项将为：

```
HKEY_CLASSES_ROOT\.dpp\ShellNew 
```

而要删除`ShellNew`子项，您可以使用*注册表编辑器*或命令行*REG*工具。
对于*REG*示例：

```
REG DELETE HKEY_CLASSES_ROOT\.dpp\ShellNew 
```

# java - 有谁知道如何在 java swing 中替代 Google 最近的起始页？

> ID：10295535
> 
> 赞同：0
> 
> 时间：2012-04-24T09:50:33.050
> 
> 标签：java, javascript, swing

有谁知道如何在 java swing 中制作最近的 Google 搜索页面？请看一下`http://www.google.com`。

![在此处输入图像描述](../Images/0efa72ae7c7f91888abfed6cb2941c16.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:02:34.493

效果不错:-)

如果您想在 Swing 中执行此操作，我将采用以下方法：

*   将原始屏幕渲染到屏幕外的 BufferedImage
*   将新屏幕渲染到屏幕外的 BufferedImage
*   通过绘制新屏幕然后用旧屏幕的正确部分在其上绘制，扭曲并旋转到正确的位置，在两者之间进行动画转换（您可以使用 Java2D AffineTransformation 进行旋转/扭曲）

棘手的一点是让位置随着时间的推移以一种看起来很吸引人并且不会导致任何令人讨厌的视觉伪影的方式发生变化。这将需要一些数学和相当多的反复试验！

# vb.net - 如何将 Visual Studio 2008 上的 sql 数据库精简版与 vb.net（智能设备）连接起来

> ID：10295541
> 
> 赞同：2
> 
> 时间：2012-04-24T09:50:55.717
> 
> 标签：vb.net, windows-mobile, sql-server-ce, visual-studio-2008-sp1, pocketpc

我正在 Visual Studio 2008 上使用 vb.net（智能设备）做一个项目，我需要连接到设备本身的数据库（我没有要测试的物理设备，只有仿真）。我该怎么做呢？我希望数据库在启动时位于设备中*。*

我在互联网上读到您必须参考***System.Data.SqlServerCe***，但在我看来，这些文件含糊不清。所以，我在这里很迷茫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:18:59.053

所以这里有两个问题：

1.  如何部署我的数据库，以便在我的应用程序启动时它就在那里？
2.  如何从我的应用程序访问该数据库？

两者都很简单。

**A1。**你有几个选择。首先，了解 SQLCE 数据库是单个文件，通常带有`SDF`扩展名。您可以将它与您的应用程序一起打包以进行部署，这样您就知道它在第一次运行时就会存在，或者您的应用程序可以在启动时检查它是否存在，如果文件不存在则创建文件。如果您需要使用数据（查找等）填充初始数据库，那么选项 1 可能更好。只要您将数据库部署/创建在持久存储位置（并且在几乎任何地方的 WinMo/Pocket PC 下），它就会在您的应用程序启动时始终存在。

**A2**您是正确的，您需要添加对 的引用`System.Data.SqlServerCe`，这又很简单。只需在您的智能设备项目中添加一个引用：

![在此处输入图像描述](../Images/a1f0547f7d38ae34c329e0c2378b3157.png)

完成后，您可以使用 SqlServerCe 命名空间对象来创建数据库、表、索引等，插入和查询数据，以及所有这些好东西。 [MSDN 上的教程 2 和 3](http://msdn.microsoft.com/en-us/sqlserver/bb895908)是一个非常好的开始，它们有 VB.NET 示例。好消息是大多数 VB.NET 访问 SQLCE 数据库的桌面示例都可以在设备上按原样工作，而不能正常工作的地方通常是数据的呈现，而不是实际的数据库访问代码本身。

# reverse-engineering - 为什么要使用缓冲区溢出漏洞？

> ID：10295542
> 
> 赞同：1
> 
> 时间：2012-04-24T09:51:08.133
> 
> 标签：reverse-engineering, buffer-overflow, exploit

我了解缓冲区溢出的概念，并承认它可以让我有机会在外部可执行文件中执行我自己的代码。

我的问题是，这不能简单地用更简单的方法来完成吗？

说注入一个 DLL，然后在 DLLMain 中编写你的恶意代码？

或者玩反汇编并将汇编代码注入可执行文件？

即使你的恶意代码工作了，你能从这个行为中得到什么损害\利润，而你自己编辑反汇编是无法得到的？

据我了解，当你拿到一个可执行文件的那一刻，你就是它的主人，并且可以通过反汇编来添加\更改\删除代码，为什么要努力寻找漏洞呢？

谢谢，迈克尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:53:28.243

问题是，您通常不会让受害者运行您的可执行文件。因此，您可以使其成为恶意的事实几乎没有价值。

相反，您可以让潜在的受害者使用您的输入：这就是它如此有趣的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T22:24:13.390

大多数情况下，这是由于当今用户对可执行文件持怀疑态度，以及他们认为 PDF 文档不会包含病毒。在其他情况下，交付代码的唯一方法是通过漏洞利用，例如缓冲区/堆/堆栈溢出。

例如，在 Apple iOS 设备上，下载可执行代码的唯一方法是通过 AppStore。所有以这种方式出现的可执行文件都必须得到 Apple 的明确批准。另一方面，如果用户只是在 MobileSafari 中访问恶意制作的 PDF 文档的链接，它可能允许攻击者在设备上任意执行代码。

Comex 的 JailbreakMe.com 网站（v2.0（Star）和 v3.0（Saffron））就是这种情况。该网站让设备加载一个极其复杂的 PDF 文件，最终导致设备越狱。世界上没有机会苹果会批准一款可以做同样事情的应用程序。

# java - Java 程序的程序计数器寄存器值

> ID：10295543
> 
> 赞同：2
> 
> 时间：2012-04-24T09:51:09.003
> 
> 标签：java, profiling

是否可以获得正在运行的 Java 应用程序的程序计数器 (PC) 寄存器值，尤其是在 Android 模拟器中运行的应用程序？例如，gprof 会随机采样 PC 寄存器值，以找出哪个函数占用了程序的运行时间。这样的概念甚至对 JVM 有意义吗？为了澄清，我想要程序计数器的实际值。

另外，有什么方法可以测量代码在内存中的“传播”程度吗？这可以通过查看 objdump 返回的地址范围在常规程序中进行测量。但是，这种方法不处理共享库的地址，这也是我在 JVM 上下文中不理解的概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:07:31.600

[许多像VisualVM](http://visualvm.java.net/)这样的Java 分析器可以进行基于采样的分析，这可能像你描述的那样工作。

至于代码内存使用，这就是垃圾回收器的“永久代”（PermGen）主要包含的内容；VisualVM 也可以显示它。

# android - OpenGL ES 2.0 glVertexAttribPointer - 缓存冗余调用

> ID：10295544
> 
> 赞同：1
> 
> 时间：2012-04-24T09:51:11.050
> 
> 标签：android, c++, ios, opengl-es

我正在分析我的 iOS 和 Android 应用程序，并意识到每帧有很多冗余的 glVertexAttribPointer 调用。我想出了一个缓存这些状态的策略，并且只在需要时调用该方法。

我认为只有在发生以下情况时才需要调用 glVertexAttribPointer：

*   该属性尚未设置
*   绑定了新的着色器（可能使属性位置无效）
*   顶点声明更改（可能使偏移量或类型无效）

不出所料，在测试后没有多余的 glVertexAttribPointer 调用。但是，我的逻辑一定存在缺陷，因为渲染不再正常工作。我认为我的缓存策略太热心了，我没有像我应该的那样频繁地重新调用 glVertexAttribPointer。然后我尝试在我们的材质更改时（即渲染状态更改时）使缓存无效。这修复了渲染，但返回了冗余调用（尽管比以前少）。

我的初始缓存策略是否在正确的轨道上，任何人都可以帮助我确定缓存应该失效的其他情况吗？

# regex - 如果它不包含特定模式，我如何匹配所有内容？

> ID：10295547
> 
> 赞同：2
> 
> 时间：2012-04-24T09:51:20.940
> 
> 标签：regex

我有这样格式的字符串。`abcd`我想匹配开头没有的字符串。

```
abcd.efgh.ijkl
pqrs.efgh.ijkl
xyz.efgh.ijkl 
```

我想出了这个表达`(?<!abcd).efgh.ijkl` [http://rubular.com/r/jyZMIJxoNz](http://rubular.com/r/jyZMIJxoNz)

它有点做我需要的。它匹配 and 的`.efgh.ijkl`部分`pqrs.efgh.ijkl`并且`xyz.efgh.ijkl`忽略`abcd.efgh.ijkl`。但我也希望它与`pqrs`和`xyz`部分相匹配。

我尝试制作这样的条件，`(?(?<!abcd)|.*\.efgh.ijkl)`但它甚至没有被识别为正则表达式。语法有什么问题？它不是说“如果它以 abcd 开头，那么`blank`其他所有内容都匹配到`.efgh.ijkl`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:33:13.827

```
[^\s]*(?<!abcd).efgh.ijkl 
```

[http://rubular.com/r/h11pUhuYSD](http://rubular.com/r/h11pUhuYSD)

应该为您的目的工作。如果目标位于更长的字符串中，它甚至匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:12:17.187

您想为此使用前瞻，而不是后瞻。

```
^(?!abcd\.)[a-z]+(?:\.[a-z]+)+$ 
```

主要的正则表达式是`^[a-z]+(?:\.[a-z]+)+$`，它匹配由两个或多个由点分隔的字母组成的字符串。在开始锚点之后的前瞻确保第一个丛不是`abcd`。

请注意，如果它真的是 Ruby，那么您正在这样做，`^`并且`$`是*线*锚。这意味着正则表达式将从字符串中取出第二行：

```
foo
pqrs.efgh.ijkl
bar 
```

...这可能不是你想要的。为了确保你只匹配 Ruby 中的整个字符串，你应该使用字符串锚点，`\A`并且`\z`：

```
\A(?!abcd\.)[a-z]+(?:\.[a-z]+)+\z 
```

至于您尝试使用条件，Ruby 似乎不支持它们。不过没关系，反正那是行不通的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:21:20.460

**试试这个：**

`(?m)^(?!abcd).+$`

**解释：**

```
<!--
(?m)^(?!abcd).+$

Options: ^ and $ match at line breaks

Match the remainder of the regex with the options: ^ and $ match at line breaks (m) «(?m)»
Assert position at the beginning of a line (at beginning of the string or after a line break character) «^»
Assert that it is impossible to match the regex below starting at this position (negative lookahead) «(?!abcd)»
   Match the characters “abcd” literally «abcd»
Match any single character that is not a line break character «.+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Assert position at the end of a line (at the end of the string or before a line break character) «$»
--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:39:33.747

试试这个：

```
[^"(a.+b)|(b.+c)|(c.+d)|"].* 
```

[http://rubular.com/r/51OShSXwUz](http://rubular.com/r/51OShSXwUz)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T11:03:49.040

负面的lookbehinds很有趣，它们是一个很好的工具。

但是，如果您只想匹配不以 开头的*整行*`abcd`，一个简单的方法是匹配以开头的行*，*然后获取每行**不**匹配的行。`abcd`

 *示例（蟒蛇）：

```
In [1]: lines = [
   ...: "abcd 1",
   ...: "abcd 2",
   ...: "pqrs 3",
   ...: "pqrs 4" ]

In [2]: import re

In [4]: for line in lines:
   ...:     if re.match(r"^abcd.+$", line):
   ...:         pass # do nothing
   ...:     else:
   ...:         print (line)
   ...: 

pqrs 3
pqrs 4 
```

此外，如果`abcd`您要查找的是文字字符串（即字面意思`abcd`，而不是其他正则表达式），那么字符串操作将更快更容易理解：

```
In [5]: for line in lines:
   ...:     if not(line.startswith('abcd')):
   ...:         print(line)
   ...: 

pqrs 3
pqrs 4 
```*

# java - 在java中创建一个数组，其中值随机排序

> ID：10295554
> 
> 赞同：0
> 
> 时间：2012-04-24T09:51:56.447
> 
> 标签：java, arrays, sorting

> **可能重复：**
> [如何在 Java 中随机填充数组？](https://stackoverflow.com/questions/2496774/how-do-i-randomly-fill-an-array-in-java)

下面的最后一行代码按顺序打印数字。如何创建一个值随机排序的数组？

```
 List<Users> u = new ArrayList<Users>();
          u.add(new Users(1, 5));
          u.add(new Users(2, 4));
          u.add(new Users(3, 8));

          for (Users us1 : u)
          {
            int si1 = us1.getCf();
            int di = us1.getId();
            for (int j = 0; j < si1; j++)
            {
              System.out.println("cf:" + di);
            }
          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:55:25.230

只需使用，

```
Collections.shuffle(yourList) 
```

根据您的要求，我对您的代码进行了一些更改，

```
List<Users> u = new ArrayList<Users>();  
u.add(new Users(1, 5));  
u.add(new Users(2, 4));  
u.add(new Users(3, 8));  
Collections.shuffle(u);  

List<Integer> output = new ArrayList<Integer>();  
for (Users us1 : u) {  
    int si1 = us1.i;  
    int di = us1.i;  
    for (int j = 0; j < si1; j++) {  
        System.out.println("cf:" + di);  
        output.add(di);  
    }  
}  

Integer[] result = output.toArray(new Integer[output.size()]); 
```

希望能帮助到你 ：）

# jquery - JQuery-为每个具有类的 img 元素添加 css

> ID：10295555
> 
> 赞同：0
> 
> 时间：2012-04-24T09:51:56.600
> 
> 标签：jquery

```
$(document).ready(function() {
    $("img.resizeImage").each(function(){
        var img = $(this); 
        var width = $(this).width();    // Current image width
        var height = $(this).height();  // Current image height
       // alert("give image size ....."+width+", "+height);
        var pic_real_width, pic_real_height;
        $("<img/>").attr("src", $(img).attr("src"))
            .load(function() {
                pic_real_width = this.width;  
                pic_real_height = this.height; 

            });

        if(pic_real_width < width  ){
            //alert("display original width.sssss 103..");
            $(this).removeAttr("width");
            $(this).css("width",pic_real_width);
        }

        if( pic_real_height < height ){
            //alert("display original height ss.102..");
            $(this).removeAttr("height");
            $(this).css("height",pic_real_height);
        }
    });
}); 
```

在上面的 jquery 执行流程中，如果条件没有达到最后。我没有获得想要的结果。如果我在两个 if() 之上保持一些警报，那么执行流程将进入两个 if 条件。请帮帮我。如何逐行执行jquery语句..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:53:54.373

您的图像加载是异步的，这意味着`.load`不会立即调用回调。

因此`pic_real_width`，`pic_real_height`在您尝试使用它们时是未知的。

也许您应该将这两个条件*移到*回调函数中？

# android - ViewPager 中的 ListView - ListView 中的项目保持空白

> ID：10295556
> 
> 赞同：0
> 
> 时间：2012-04-24T09:52:00.147
> 
> 标签：android, listview, android-viewpager

我正面临一个非常奇怪的现象。我正在使用兼容性包中的 ViewPager 来显示配置文件。

每个配置文件都只是一个包含自定义元素的 ListView。每个元素都有两种状态：

1.  有数据 - 显示它
2.  没有数据 - 显示占位符

每次在配置文件之间滑动时，我都会重置项目对象中的数据。当我删除 REST-Calls 并让配置文件项目为空时 - 这应该显示占位符 - 所有项目都保持空白。

可能是什么问题呢？

编辑：/

这就是我在列表视图中设置当前项目的方式。PageViewAdapter 似乎没问题，如果我使用静态内容，一切都很完美。

```
 final TextView lblTitle = (TextView)convertView.findViewById(R.id.lblTitle);
    final LinearLayout llContent = (LinearLayout)convertView.findViewById(R.id.llContent);
    final ProfileItem item = getItem(userPosition);

    String title = item.getTitle();
    if(title == null || title.equals("")) {
        lblTitle.setVisibility(View.GONE);
    } else {
        lblTitle.setText(item.getTitle());
    }

    if(item.getContent().getParent() != null) {
        ((ViewGroup)item.getContent().getParent()).removeAllViews();
    }

    llContent.removeAllViews();
    llContent.addView(item.getContent()); 
```

这些项目看起来都非常相似：

```
@Override
public View getContent() {
    if(isTextEmpty()) {
        return noTextTherePlaceholder;
    } else {
        return view;
    }
} 
```

即使我只返回视图或 noTextTherePlaceholder，效果也保持不变。

如果我在 getView 方法中设置像 TextView 这样的新视图，一切都会按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:59:00.013

使用视图寻呼机，您必须获取所有数据`Activity.onCreate`，然后在 ViewPagers 适配器中使用该数据`onInstantiateItem`。

# file-io - Erlang：从文件中读取整数

> ID：10295557
> 
> 赞同：3
> 
> 时间：2012-04-24T09:52:07.243
> 
> 标签：file-io, erlang

我正在尝试从一个简单的文本文件中读取一个整数值。我的输入文件中的行如下所示：

```
1 4 15 43
2 4 12 33
... (many rows of 4 integers) 
```

我通过以下方式打开了文件：

```
{ok, IoDev} = file:open("blah.txt",[read]) 
```

但我唯一能读到的是具有所有可用功能的字节。

我最终想从文件中得到的是整数元组。

```
{1 4 15 43}
{2 4 12 33}
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:21:02.327

您必须首先使用`file:read_line/1`读取一行文本，并使用`re:split/2`获取包含数字的字符串列表。然后使用`list_to_integer`BIF 获取整数。

这是一个例子（当然有更好的解决方案）：

```
#!/usr/bin/env escript
%% -*- erlang -*-

main([Filename]) ->
    {ok, Device} = file:open(Filename, [read]),
    read_integers(Device).

read_integers(Device) ->
    case file:read_line(Device) of
    eof ->
        ok;
    {ok, Line} ->
        % Strip the trailing \n (ASCII 10)
        StrNumbers = re:split(string:strip(Line, right, 10), "\s+", [notempty]),
        [N1, N2, N3, N4] = lists:map(fun erlang:list_to_integer/1, 
                     lists:map(fun erlang:binary_to_list/1, 
                           StrNumbers)), 
        io:format("~w~n", [{N1, N2, N3, N4}]),
        read_integers(Device)
    end. 
```

（编辑）

我找到了一个更简单的解决方案，用于`io:fread`读取格式化输入。它在您的情况下运行良好，但在文件构造错误时会失败。

```
#!/usr/bin/env escript
%% -*- erlang -*-

main([Filename]) ->
    {ok, Device} = file:open(Filename, [read]),
    io:format("~w~n", [read_integers(Device)]).

read_integers(Device) ->
    read_integers(Device, []).

read_integers(Device, Acc) ->
    case io:fread(Device, [], "~d~d~d~d") of
    eof ->
        lists:reverse(Acc);
    {ok, [D1, D2, D3, D4]} ->
        read_integers(Device, [{D1, D2, D3, D4} | Acc]);
    {error, What} ->
        io:format("io:fread error: ~w~n", [What]),
        read_integers(Device, Acc)
    end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T10:54:54.437

没看过编辑的部分

/*

你可以试试[fread/3](http://www.erlang.org/doc/man/io.html#fread-3)

```
read() ->
{ok, IoDev} = file:open("x", [read]),
read([], IoDev).

read(List, IoDev) ->
case io:fread(IoDev, "", "~d~d~d~d") of
{ok, [A,B,C,D]} ->
    read([{A,B,C,D} | List], IoDev);
eof ->
    lists:reverse(List);
{error, What} ->
    failed
end. 
```

*/

# c# - 删除早于某个日期的文件

> ID：10295561
> 
> 赞同：6
> 
> 时间：2012-04-24T09:52:26.510
> 
> 标签：c#, datetime, logging

我目前正在开发 ac# 程序，我在其中检查文件的创建时间，如果文件超过 2 天，则将其删除。我有以下代码片段应该可以实现这一点。

```
DateTime creationTime = file.CreationTime.Date;
if (creationTime < DateTime.Now.AddDays(-logAge) && file.Name != currentLog)
{
    File.Delete(string.Format("{0}/{1}", directory, file));
} 
```

当我的程序运行时，它会不断创建新文件，并且一个单独的线程会检查文件是否不超过 2 天。如果我将 PC 的日期设置为 4 月 24 日，则会按预期创建和保存文件，如果我随后将 PC 的日期更改为 4 月 25 日，我希望这些文件会保留，因为它们不超过 2 天，但是，这情况并非如此，因为它们正在被删除。

日志年龄设置为，因此在我将日期更改为 4 月 26 日之前，我不会期望文件被删除。

我做错了什么，我查看了许多示例，包括有关 Stackoverflow[删除使用 .NET 的目录中超过 3 个月大的文件的](https://stackoverflow.com/questions/2222348/how-to-delete-files-older-than-3-months-old-in-a-directory-using-net)另一个问题，但它没有按照我的预期做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T09:58:25.593

您被迫只考虑创建时间戳的日期部分，然后满足条件并且文件将被删除（较早）无论如何我建议对该代码进行一些修改：

```
static class Helpers {
    public static void DeleteOldFiles(string folderPath, uint maximumAgeInDays,
                                      params string[] filesToExclude) {
        DateTime minimumDate = DateTime.Now.AddDays(-maximumAgeInDays);

        var filesToDelete = Directory.EnumerateFiles(folderPath)
            .Where(x => !IsExcluded(x, filesToExclude));

        foreach (var eligibleFileToDelete in filesToDelete)
            DeleteFileIfOlderThan(eligibleFileToDelete, minimumDate);
    }

    private const int RetriesOnError = 3;
    private const int DelayOnRetry = 1000;

    private static bool IsExcluded(string item, string[] exclusions) {
        return exclusions.Contains(item, StringComparer.CurrentCultureIgnoreCase);
    }

    private static void DeleteFileIfOlderThan(string path, DateTime date)
    {
        for (int i = 0; i < RetriesOnError; ++i) {
            try {
                var file = new FileInfo(path);
                if (file.CreationTime < date)
                    file.Delete();
            }
            catch (IOException) {
                System.Threading.Thread.Sleep(DelayOnRetry);
            }
            catch (UnauthorizedAccessException) {
                System.Threading.Thread.Sleep(DelayOnRetry);
            }
        }
    }
} 
```

**笔记**

*   我仍在使用`DateTime.Now`，我猜对于这种操作，您不需要任何精确测量（而且您说的是几天，所以您的线程可能有几个小时的预定时间**）**。
*   如果您的应用程序使用多个日志文件，您可以将它们全部指定为参数，它们将被忽略。
*   如果您`DeleteOldFiles`使用 0调用，`maximumAgeInDays`那么您将延迟所有未使用的日志文件（如排除列表中指定的那样）。
*   有时文件可能正在使用中（即使在您的情况下这种情况很少发生）。该`DeleteFileIfOlderThan`函数将在短暂延迟后重试删除它们（它模仿`Explorer.exe`行为）。

你可以这样调用这个函数：

```
Helpers.DeleteOldFiles(@"c:\mypath\", logAge, currentLog); 
```

还有一些注意事项：

*   这段代码没有结合路径和文件名，但如果你必须这样做，你应该使用`Path.Combine()`，我想你不想每次都重新发明轮子来检查路径是否以尾部反斜杠结尾。
*   I/O 操作可能会失败！始终检查异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T10:16:17.223

file.Delete 确实比 File.Delete(path) 更有意义，而 Path.Combine() 比使用 string.Format 更有意义。

我偶然发现了这个答案，不知道为什么在谷歌上花了很长时间之后我没有找到它，但这似乎已经解决了这个问题。[DateTime.Compare 如何检查日期是否小于 30 天？](https://stackoverflow.com/questions/528368/datetime-compare-how-to-check-if-a-date-is-less-than-30-days-old). 另一个问题是我使用的是文件创建时间，但对于我的场景，使用 lastWriteTime.date 更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:16:15.703

我想一个额外的问题必须在

```
File.Delete(string.Format("{0}/{1}", directory, file)); 
```

您的**文件**类型为***FileSystemInfo***。也许您想使用**file.Name**。示例：假设*目录*为“c:\”，*文件*指向“c:\myfile.log”，您的代码将尝试删除“ ***c:/c:\myfile.log*** ”。我很难猜出你在这些变量中到底有什么。

@HenkHolterman 建议正确替换：

```
file.Delete(); 
```

# zend-framework - 如何在站点的某些部分创建 Zend_Navigation - ZF 1.11.11

> ID：10295564
> 
> 赞同：0
> 
> 时间：2012-04-24T09:52:28.037
> 
> 标签：zend-framework, zend-navigation

我对 zend 很陌生，我想在我网站的某些部分构建一个导航菜单 - 假设我有 20 个页面，但我只想创建一个包含 5 个项目且仅对 4 个页面可见的菜单。这可能是一个愚蠢的问题，但有没有办法让它在我的控制器上而不是在引导程序中？我真的找不到这个的例子:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:16:36.440

也许是一个视图助手？这样，可以从您希望显示的 4 个页面上的视图脚本中调用它：

```
<?php
class Default_View_Helper_ShortNav extends Zend_View_Helper_Abstract
{
  /**
   * Generate a Zend_Navigation object
   * @return Zend_Navigation
   */
  public function shortNav()
  {
    //psudo code
    $pages = array();
    $model = new Default_Model_Pages();
    $rows = $model->fetchAll();
    foreach($rows as $page)
    {
       $pages[] = array(
           'label' => $page->title,
           'module' => 'default',
           'controller' => 'index',
           'action' => 'page',
           'params' => array('page' => $page->slug),
           'containerClass' => 'page',
       );
    }
    $nav =new Zend_Navigation();
    $nav->addPage(
        array(
            'label' => 'Pages',
            'route' => 'index', //route name
            'params' => array(), //route parameters
            'pages' => $pages
        )
    );
    return $nav;
  }
} 
```

在视图脚本中：

```
<?php
$nav   = $this->shortNav();
echo $this->navigation($nav); 
```

在视图助手中，您需要更改 fetch all 以仅选择您想要的页面，并且在视图脚本中，您需要将 echo 包装在 if 语句中以仅在您希望它显示的页面上显示。

希望这是有用的。

# svn - 如何在 Eclipse 下的 Subversive 中运行 svn resolve？

> ID：10295572
> 
> 赞同：2
> 
> 时间：2012-04-24T09:52:52.143
> 
> 标签：svn, conflict, subversive, resolve

首先：我在 Eclipse 中使用 Subversive 插件来检查对包含 Android 项目的长期存储库的更改。

我一直在尝试将源树的已编辑主干合并到其中一个分支中，这很有趣。我终于设法将大部分新源签入到合并的分支中，主要是通过争吵和作弊的结合。我现在正在尝试完成并收到此错误：

```
Some of selected resources were not committed.
svn: Commit failed (details follow):
svn: Aborting commit: 'C:\Users\PCW\workspace\NewsRack Dev Branch\res\drawable' remains in conflict 
```

但是，如果我在项目上运行 Team>Synchronize，它会说没有要解决的冲突。我在其他地方发现运行`svn resolve`可能是处理这种情况的方法，但是 Subversive 没有任何明显对应于此的选项，并且文档也没有明确告诉我该怎么做。

所以，概括地说，我需要一种方法来告诉 svn，这些冲突已经从 Eclipse 下的 Subversive 解决了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T19:27:14.957

您是否尝试过以下操作？

在包资源管理器中右键单击项目 -> 团队 -> 与存储库同步。

这将打开同步视图。到达那里后，您将在左窗格中看到具有更改的文件；选择它们并右键单击它们，然后单击“覆盖并提交”。这会将更改上传到 SVN 服务器。

# android - OnDraw 安卓 (monodroid)

> ID：10295575
> 
> 赞同：0
> 
> 时间：2012-04-24T09:53:02.563
> 
> 标签：android, xamarin.android, ondraw

有人可以向我解释如何实现 onDraw 函数。我也想知道这个函数是什么时候调用的。（我使用的是 Monodroid，所以如果可以使用 c# 示例进行解释）

我正在尝试制作一个带有图形的自定义视图（在画布上），但这一切都表明我需要实现 onDraw 函数。

所以，如果有人能对我说清楚:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:34:54.913

`onDraw()`在调用 invalidate() 时调用。

我建议您搜索有关画布如何工作的教程。这是一个让您入门的地方：http: [//developer.android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:26:12.497

I had exactly the same problem. For me, I was missing the `override` keyword in front of the function. This is equivalent to Java's `@override` annotation :)

```
protected override void OnDraw(Canvas canvas) {
...
} 
```

# c++ - 类模板和函子

> ID：10295579
> 
> 赞同：0
> 
> 时间：2012-04-24T09:53:30.257
> 
> 标签：c++, templates

我有以下课程

```
class hash_key {
public:
    int get_hash_value(std::string &inStr, int inSize) const {
        int hash = 0;
        for(int i = 0; i < (int)inStr.size(); i++)  {
            int val = (int)inStr[i];
            hash = (hash * 256 + val) % inSize;
        }
        return hash;
    }
}; 
```

我想将它传递给我的另一个模板类，以便我可以调用`get_hash_value` 如何做到这一点有什么方法可以使用`operator()()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:57:44.713

像这样的东西：

```
class hash_key {
public:
    hash_key(std::string& inStr, int inSize) : size(inSize), str(inStr) {}
    int operator()() const
    {
        int hash = 0;
        for(int i = 0; i < (int)str.size(); i++)  {
            int val = (int)str[i];
            hash = (hash * 256 + val) % size;
        }
        return hash;
    }

private:
   std::string str;
   int size;
};

Now you can do:

std::string str = "test";
hash_key key(str, str.size());

//pass below to template, calls `operator()()`
key(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:56:09.987

```
struct hash_key {
public:
    int operator()(std::string &inStr, int inSize) const {
        int hash = 0;
        for(int i = 0; i < (int)inStr.size(); i++)  {
            int val = (int)inStr[i];
            hash = (hash * 256 + val) % inSize;
        }
        return hash;
    }
}; 
```

# c++ - 从远程 MySQL 服务器本地导出 .csv 数据

> ID：10295580
> 
> 赞同：1
> 
> 时间：2012-04-24T09:53:31.473
> 
> 标签：c++, mysql

我有一台在一台 PC (WinXP) 上运行的 MySQL 服务器。

在另一台 PC (WinXP) 上，我想将表备份到[csv](http://fr.wikipedia.org/wiki/Comma-separated_values)文件，所以我有一个 c++ 程序连接到 MySQL 数据库，然后我发出如下命令：

```
SELECT data FROM table WHERE something=ABC
INTO OUTFILE c\tmp.txt
FIELDS TERMINATED BY ';' 
OPTIONALLY ENCLOSED BY '"' LINES TERMINATED BY ";"; 
```

数据似乎已导出，但在服务器“c:\”上而不是在我的 PC:s“c:\”上。当我的程序作为 Windows 服务运行时，我也不能只通过 LAN 获取数据。

我看过[这篇文章](https://stackoverflow.com/questions/2804332/mysql-select-into-outfile-to-a-different-server)，但似乎我不能在该解决方案中使用“FIELDS TERMINATED BY”等。

我可以从远程服务器本地导出 csv 数据还是必须先在本地迁移数据？

问题“已解决”：您似乎无法以“简单”的方式进行操作，因此我使用 MySQL 在 PC 上运行该服务，并让 DCom 服务器定期将数据移动到另一台 PC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:05:16.243

***打算发表评论（但我没有足够的代表点发表评论）。*** 不确定您是否能够安装东西，但您可以尝试使用**cygwin + sqsh** ( [http://www.sqsh.org/sqsh_home.html](http://www.sqsh.org/sqsh_home.html) )。我是 linux 用户，sqsh 是从数据库中获取数据的好工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:55:46.717

SELECT ... INTO OUTFILE 显然将文件写入 mysql-demon 的本地文件系统。一种选择可能是共享您的客户端 PC 的目录，在您的服务器上打开它并将其路径用于 outfile 选项。如果这不是一个选项，您可能必须在 c++ 程序中选择数据并将其（手动）写入本地 csv 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:48:35.330

如果您不想安装额外的，请使用以下命令。

```
mysql -h remotedb.db -u ident -p -B -e "your query ;" | sed 's/\t/","/g;s/^/"/;s/$/"/;s/\n//g' > localfile.csv 
```

-B 表示将输出作为制表符分隔。

# android - cordova 1.6.1 android Uncaught TypeError：无法调用未定义的方法'showWebPage'

> ID：10295581
> 
> 赞同：3
> 
> 时间：2012-04-24T09:53:33.233
> 
> 标签：android, cordova, phonegap-plugins

我刚刚将 phonegap 1.4.1 升级到 1.6.1，还从[https://github.com/libbybaldwin/phonegap-plugins/tree/master/Android/ChildBrowser升级了子浏览器](https://github.com/libbybaldwin/phonegap-plugins/tree/master/Android/ChildBrowser)

我在 plugins.xml 文件中添加了这一行

```
<plugin name="ChildBrowser" value="com.phonegap.plugins.ChildBrowser.ChildBrowser"/> 
```

但是当我打电话给这个时

```
window.plugins.childBrowser.showWebPage( "http://google.com", {
        showLocationBar: true
    }); 
```

我收到此错误 Uncaught TypeError: Cannot call method 'showWebPage' of undefined

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:10:11.853

我能够通过使用以下代码解决此错误：

```
try {
var cb = new ChildBrowser();
console.log(cb);
cb.showWebPage('http://www.google.com');
}catch (err){
console.log(err);
} 
```

虽然这导致了另一个错误：

[PhoneGap Build + Cordova + ChildBrowser 错误](https://stackoverflow.com/questions/10308818/phonegap-build-cordova-childbrowser-error)

如果您没有收到任何错误并且此解决方案有效 - 请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:52:27.490

关于 1.4.1 与 1.6.1：

请注意，我的 phonegap-plugins github 存储库是我在互联网时间“冻结”的，以允许继续使用带有那个时代插件的 phonegap 1.4.1。

前进到cordova 1.6.1+，您需要继续使用官方非官方插件

[https://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)

注意：这些插件可能会更新，也可能不会与 cordova 1.6.1 一起使用。请阅读他们个人的 README 和 phonegap 工程师的以下博客：

[http://simonmacdonald.blogspot.com/2012/04/migrating-your-phonegap-plugins-to.html](http://simonmacdonald.blogspot.com/2012/04/migrating-your-phonegap-plugins-to.html)

总结：从 1.4.1 迁移到 1.6.1+ 并使用 phonegap 插件需要一些警惕，因为这两个版本之间有很多内部变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T06:58:17.153

几天来一直在与同样的错误作斗争，发现您无法立即从 index.html 调用 childBrowser，可能是因为 childBrowser 插件的初始化需要一些时间才能完成。

此解决方案有效：

```
setTimeout(function() {
    window.console.log('Opening Childbrowser...');
    window.plugins.childBrowser.showWebPage("http://www.google.com", { showLocationBar: true });
}, 3500); 
```

换句话说：您必须等待 childBrowser 对象可用，当然还有更优雅的解决方案。

免责声明：使用当前的 1.7.0rc1 Cordaova 版本进行了测试，不确定这是否也适用于 1.6.1。

# sql - MSSQL 选择计数在一个日期范围内满足条件的地方

> ID：10295583
> 
> 赞同：1
> 
> 时间：2012-04-24T09:53:35.760
> 
> 标签：sql, sql-server

我有一张包含`date`, `employeeID`(int) 和`ShiftWorked`(可以是晚上/白天/周末或晚上) 的表格。每个员工和日期组合都有一行

我想构建一个查询，让我计算在花名册期间的每个日期之前和之后的一周内有多少人上夜班。

```
--------------------------------------------------------------------------
Date (yyyy-MM-dd)     | CountOfNightshifts(for 1 week either side of date)
--------------------------------------------------------------------------

2012-1-1              |  8
2012-1-2              |  12
2012-1-3              |  11
2012-1-4              |  6 
etc                   |  etc 
```

我希望这很清楚。我花了几天的时间试图让这个工作，但我没有得到任何地方。

例如：

```
SELECT COUNT(id), [date]
FROM ROSTER
WHERE Shift = night AND [date] BETWEEN DATEADD(D,-7,[date]) AND DATEADD(d,7,[date])
GROUP by [date]
group by [date] 
```

这将为我提供特定日期的日期列表和夜数 - 不是该日期前后 7 天的所有夜班。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:57:59.627

这个怎么样？

```
SELECT
    [date]
    ,count(*)
FROM
    Shifts as s
WHERE 
    s.Date > DATEADD(day,-7,GETDATE())
    AND ShiftWorked = 'Night'
GROUP BY 
    date 
```

[http://sqlfiddle.com/#!3/e88cc/1](http://sqlfiddle.com/#!3/e88cc/1)

更多数据：

[http://sqlfiddle.com/#!3/b7793/2](http://sqlfiddle.com/#!3/b7793/2)

如果您只对特定日期感兴趣，那么您可以使用：

```
DECLARE @target datetime
SET @target = GETDATE()

SELECT
    count(*) as NightShifts
FROM
    Shifts as s
WHERE 
    ShiftWorked = 'Night'
    AND s.Date > DATEADD(day,-7,@target)
AND s.Date < DATEADD(day,7,@target) 
```

[http://sqlfiddle.com/#!3/b7793/20](http://sqlfiddle.com/#!3/b7793/20)

但如果您有另一个表实际上包含期间（例如计费或工资单日期）：

```
DECLARE @target datetime
SET @target = GETDATE()

SELECT
p.periodDate
    ,count(*)
FROM
    Shifts as s
INNER JOIN periods as p
    ON s.date > dateadd(day,-7,p.periodDate)
        AND s.date < dateadd(day,7,p.periodDate)
WHERE 
    ShiftWorked = 'Night'
GROUP BY p.periodDate 
```

[http://sqlfiddle.com/#!3/fc54d/2](http://sqlfiddle.com/#!3/fc54d/2)

或得到 ) 当没有夜班工作时：

```
SELECT
    p.periodDate
    ,ISNULL(t.num,0) as nightShifts
FROM
    periods as p    
    LEFT OUTER JOIN (
        SELECT
            p.periodDate
            ,count(*) as num
        FROM
            Shifts as s
            INNER JOIN periods as P
                ON s.date > dateadd(day,-7,p.periodDate)
                AND s.date < dateadd(day,7,p.periodDate)
        WHERE 
            ShiftWorked = 'Night'
        GROUP BY p.periodDate
      ) as t
           ON p.periodDate = t.periodDate 
```

[http://sqlfiddle.com/#!3/fc54d/11](http://sqlfiddle.com/#!3/fc54d/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:42:01.497

以下查询将返回两列：参考（名册）日期和参考日期前 7 天到后 7 天在夜班工作的（不同）人数。

```
SELECT tmain.date,
(
    SELECT COUNT(DISTINCT taux.employeeId)
    FROM roster taux
    WHERE taux.shiftWorked = 'night'
      AND taux.date >= DATEADD(DAY, -7, tmain.date)
      AND taux.date <= DATEADD(DAY, 7, tmain.date)
) AS [number_of_distinct_people_with_night_shift]
FROM roster tmain
ORDER BY tmain.date; 
```

注 1：通常我更喜欢连接而不是子查询，但我想这个解决方案更容易阅读。

注2：我假设日期值的时间部分是不相关的，并且所有日期都具有相同的时间（即'00:00:00.00'）；如果不是这种情况，则需要对日期比较进行更多调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:26:38.833

您可以通过将 ROSTER 表连接到自身来完成它，从而为每个员工和每天创建多个结果行。否则，您的 GROUP BY 子句会将您之后的时间段中的结果行分组到原始表的日期中。

```
SELECT
    r.[date],
    COUNT(period.id)
FROM ROSTER r
JOIN ROSTER period
    ON period.employeeID=r.employeeID
    AND period.shift = night
    AND r.[date] BETWEEN DATEADD(d,-7,period.[date]) and DATEADD(d,7,period.[date])
WHERE
    r.shift = night
GROUP BY r.[date] 
```

# namespaces - Enterprise Architect 代码生成模板：以字符串形式导入分层包结构

> ID：10295584
> 
> 赞同：1
> 
> 时间：2012-04-24T09:53:37.100
> 
> 标签：namespaces, code-generation, enterprise-architect

# 问题

在 Enterprise Architect 7.1.834 中的代码生成模板中，是否可以在文件模板的范围内打印一个类所属的所有父包？

需要这样做的原因是生成符合我公司编码标准的多包含警卫

* * *

# 什么不起作用

我都试过了：

```
 %list="Namespace__Notes" @separator="-"% 
```

和

```
 %packageName% 
```

两者的输出都只打印顶级父包（Package1），但我想看看：

```
 Package1-Package2-Package3 
```

有没有人找到办法做到这一点？

## 命名空间__Notes

Namepace__Notes 是一个 Namepace 类型的自定义模板，内容如下

```
 %PI=""%
  %packageName% 
```

* * *

# [编辑] 肮脏的解决方案

我当前的（肮脏的）解决方案是破坏文件路径。 **我错过了什么吗？**

编码：

```
$l_backslash = %REPLACE("\z","z","")%
$filepath = %filePath%
$upper_filepath = %TO_UPPER($filepath)%
$upper_package_as_path = $l_backslash + %TO_UPPER(packageName)% + $l_backslash
$upper_package_base_len = %LENGTH(packageName)%

$package_path_pos = %FIND($upper_filepath,$upper_package_as_path)%
%if $package_path_pos != "-1" and $package_path_pos != "0"%
$upper_filepath = %MID($upper_filepath,$package_path_pos)%
%endIf%

$file_define =  "_" + $upper_filepath + "__"
$file_define = %REPLACE($file_define,".","_")%
$file_define = %REPLACE($file_define,$l_backslash,"_")%
$file_define = %REPLACE($file_define,"/","_")% 

$body += "/**************************************************************************//**"
$body += "\n * \file         " + %fileName%
$body += "\n *"
$body += "\n * \brief        " + %elemType% + " " + %className% + " header file"
$body += "\n *"
$body += "\n * \author       " + %classAuthor ? value : "<unknown>"%
$body += "\n *"
$body += "\n *****************************************************************************/"
$body += "\n"
$body += "\n#ifndef " + $file_define
$body += "\n#define " + $file_define
$body += "\n" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:49:42.260

%packagePath% 为您提供点分隔的包层次结构，而 %classQualName% 产生 :: 分隔的类层次结构（用于内部类）。

这是针对当前版本的，我不知道这些宏是否早在 7.1 就存在。您应该认真考虑升级，因为当前版本是 9.3，并且 EA 向后兼容 wrt 项目内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-11T08:17:39.437

在 EA 10 %packagePath% 中也只提供文件模板中的顶级包

**[编辑]另一个肮脏和部分的解决方案。**

我制作了一个新的自定义模板，命名空间__fullName：

```
$prevName = %list="Namespace__fullName"%
%if $prevName != ""%
%packageName%::$prevName
%else%
%packageName%
%endIf% 
```

; 和类__fullQualName：

```
%list="Namespace__fullName"%::%classQualName% 
```

当源文件仅包含 1 个类（可能带有嵌套项）并因此仅包含 1 个命名空间层次结构时，这将适用于简单的情况。

# jsf - JSF 自定义标签包装器动态参数

> ID：10295587
> 
> 赞同：2
> 
> 时间：2012-04-24T09:53:44.063
> 
> 标签：jsf, richfaces, custom-tag

我正在尝试创建一个自定义标签，该标签将充当标准组件的包装器，并将定义一些常见属性的值

例如，自定义标签将如下所示

```
<ui:component xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:a4j="http://richfaces.org/a4j"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:c="http://java.sun.com/jstl/core">

   <rich:datascroller fastControls="false" fastStep="false" maxPages="20" id="#{value}"/>

</ui:component> 
```

然后，每次我需要一个 datascroller 组件时，我都可以使用这个标签

```
<my:dataTable id="componentId"/> 
```

我的问题是我是否可以为我的自定义标签提供属性，这些属性将被“转移”到 jsf 组件，而无需明确指定每一个。例如考虑以下使用我的自定义组件

```
<my:dataTable id="componentId" pagesVar="books" stepControls="true"/> 
```

和这个

```
<my:dataTable id="componentId" pagesVar="items" renderIfSinglePage="false"/> 
```

属性 pagesVar、stepControls、renderIfSinglePage 应该被传递给 rich:datascroller 组件。我知道我可以做这样的事情

```
<rich:datascroller pagesVar=#{pagesVar ? pagesVar : ''} stepControls=#{stepControls ? true: false}/> 
```

但我想知道是否有一种方法可以传递所有属性而不指定每个属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:35:08.460

> *但我想知道是否有一种方法可以传递所有属性而不指定每个属性*

不，标签属性不支持任何形式的继承。

但是，您可以进一步简化您的特定示例。

```
<rich:datascroller pagesVar="#{pagesVar}" stepControls="#{stepControls}" /> 
```

# symfony - Symfony 2 从多对多关系中获取数据与学说

> ID：10295588
> 
> 赞同：1
> 
> 时间：2012-04-24T09:53:49.317
> 
> 标签：symfony, doctrine, many-to-many, dql

我一直坚持让它与 Symfony2 和 Doctrine 一起工作，情况是：一个带有刺耳信息的页面（一般信息和看护信息）。

一个护理可以有多个穿孔，它适用于一个穿孔可以有多个护理

数据库布局：

```
Piercings:
    id
    name
    ...

Caretaking:
    id
    title
    description

piercing_to_caretaking
    id
    piercing_id
    caretaking_id 
```

现在，我将如何创建实体和相应的 Query/Dql ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:44:04.513

如果您使用 yml 定义实体：

在 Piercing.orm.yml 添加：

```
manyToMany:
    caretakings:
        targetEntity: Caretaking
        inversedBy: piercings
        joinTable:
            name: piercing_caretaking
            joinColumns:
                caretaking:
                    referencedColumnName: id
            inverseJoinColumns:
                piercing:
                    referencedColumnName: id 
```

在 Caretaking.orm.yml 添加：

```
manyToMany:
    piercings:
      targetEntity: Piercing
      mappedBy: caretakings 
```

以通常的方式生成/更新实体，即：

```
app/console doctrine:schema:update --dump-sql (to check results)
app/console doctrine:schema:update --force (to apply changes) 
```

然后，当您拥有 Piercing 或 Caretaking 实体时，您可以像这样访问相关实体：

```
$piercing->addCaretaking($caretaking); 
$caretakings = $piercing->getCaretakings();
...
$piercings = $caretaking->getPiercings(); 
```

有关更多信息，包括如何使用注释执行此操作，请参阅Doctrine 文档的[第 5 节关联映射](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html)中的5.1.4 多对多、双向小节。

# jquery - 基于浏览器版本的不同内容？

> ID：10295596
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:54:20.843
> 
> 标签：jquery, internet-explorer, content-management-system, browser, dotnetnuke

是否可以根据用户使用的浏览器在 CMS (DNN) 中显示不同的内容？例如，如果 IE 7 则显示内容 1

IE7 不喜欢那么好和 id 的图像映射，而只是向用户显示我制作的流程图的静态图像。

```
<!--[if IE 7]>
Special instructions for IE 7 here
<![endif]--> 
```

我想编写一些 jquery 来删除内容窗格中 div 类的内容（对于该页面，因此检查文件扩展名 process.aspx），然后在隐藏的 div 中启用图像。<<这是我的理论？

1.  检测哪个浏览器（如果 ie7 则：
2.  从内容窗格中删除内容（检查 process.aspx 的 url）
3.  启用隐藏的 div 使用`display:block`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:01:34.147

你可以使用`jQuery.browser`方法：

```
if (jQuery.browser.msie && jQuery.browser.version == '7.0') {
      $('#content').show();
} 
```

[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:02:54.260

这是获取 IE 版本的 JS 方法（`-1`如果不是 IE，则返回）：

```
function isUndefined(e) {
    return typeof e === "undefined";
}

function getIEVersion() {
    var style = document.body.style;
    var version = -1;
    if(!isUndefined(style.scrollbar3dLightColor)) {
        if (!isUndefined(style.opacity)) version = 9;
        else if (!isUndefined(style.msBlockProgression)) version = 8;
        else if (!isUndefined(style.msInterpolationMode)) version = 7;
        else if (!isUndefined(style.textOverflow)) version = 6;
        else version = 5;
    }
    return version;
} 
```

然后，使用 jQuery：

```
$(function() {
    if(getIEVersion() == 7) {
        $('#content-pane').hide();
        $('#hidden-div').show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:06:33.887

老实说，你可以用 CSS 做到这一点。

你有两条内容吗

```
<div class="ForEveryone">
<!-- Your stuff here -->
</div>

<div class="ForIE7">
<!-- Code for less helpful browser here -->
</div> 
```

然后默认有css做

```
.ForIE7 { display: none; } 
```

然后使用 IE 7 特定样式表将其更改为

```
.ForEveryone { display: none; }
.ForIE7 { display: block; } 
```

无需为此使用javascript。

# java - 确定 arrayList 中整数值的范围（间隔）

> ID：10295598
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:54:32.173
> 
> 标签：java, range, intervals

我想开发一个函数，它通过arrayList中的一组整数作为过滤器。基本上我将不得不检索 arrayList 中的最大值和最小值。

示例： min= 1970 AND max=2012 （谈论年份，但它们被视为简单整数）

我必须确定五年的范围，以便输出为

“从 1970 年到 1975 年”点击我将有列表“1970”、“1971”、“1972”、“1973”、“1974”、“1975”“从 1970 到 1975”........ ....“从 2010 年到 2012 年”onclick 我将有列表“2010”、“2011”、“2012”

我以前使用模式/匹配器来按字母顺序创建间隔，我会在正确的字母范围内（例如从 A 到 B）对字符串进行分类，但这是不同的，因为我必须定义一个 5 的范围，并创建子数组。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T10:13:00.307

如果列表已排序，那么您只需一个简单的函数即可获取较低值的索引、较高值的索引 - 然后使用这些索引返回一个子列表。

这是一个示例程序：

```
public class Main {

    public static void main(String[] args) {

        List<Integer> myList = new ArrayList<Integer>();

        for (int i = 1970; i < 2013; i++) {
            myList.add(i);
        }

        List<Integer> subList = getRange(myList, 1988, 1994);

        for (Integer i : subList) {
            System.out.println(i);
        }

    }

    public static List<Integer> getRange(List<Integer> fromList, int lowVal, int highVal)
    {
        int lowValIndex = fromList.indexOf(lowVal);
        int highValIndex = fromList.indexOf(highVal);

        return fromList.subList(lowValIndex, highValIndex + 1); 
    }

} 
```

这将从列表中返回 1988 -> 1994。

# url - php获取url参数失败

> ID：10295599
> 
> 赞同：0
> 
> 时间：2012-04-24T09:54:41.610
> 
> 标签：url, hash, parameters

我正在向 Live Oauth 发送请求并让他们回电以成功返回 URL。

但是，当我想在这个返回 url 读取参数时，我被卡住了......

网址带有#

$_GET 根本无法得到任何东西#

[http://www.abc.com/oauthlive/testing.php#access_token=theaccesstokenstring&token_type=bearer&expires_in=3600&scope=wl.basic](http://www.abc.com/oauthlive/testing.php#access_token=theaccesstokenstring&token_type=bearer&expires_in=3600&scope=wl.basic)

我该怎么办。

# java - 是否可以在 Java 中覆盖 Objects 数组的“toString”？

> ID：10295600
> 
> 赞同：18
> 
> 时间：2012-04-24T09:54:47.383
> 
> 标签：java, arrays, string, tostring

在 Java 中是否可以覆盖 Objects 数组的 toString ？

例如，假设我创建了一个简单的类，`User`（它是哪个类并不重要，因为这是一个普遍的问题）。是否有可能，一旦客户端创建了一个`User[]`数组并且客户端使用了`System.out.print(array)`，它就不会打印数组的地址而是自定义的`toString()`？

PS：当然我不能只`toString()`在我的类中覆盖，因为它与单个实例有关。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-24T10:00:42.607

不。当然你可以创建一个静态方法 User.toString(User[])，但它不会被隐式调用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-24T10:15:51.383

您可以使用`Arrays.toString(Object[] a);`which 将调用`toString()`数组中每个对象的方法。

**编辑**（来自评论）：

我了解您要实现的目标，但 Java 目前不支持。

在 Java 中，数组是动态创建的对象，可以分配给 Object 类型的变量。Object 类的所有方法都可以在数组上调用。见[JLS Ch10](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)

当您调用`toString()`一个对象时，它会返回一个“以文本方式表示”该对象的字符串。因为数组是 Object 的一个实例，所以你只能得到类的名称、@ 和一个十六进制值。见[对象#toString](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString%28%29)

Arrays.toString [()](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object[]%29)方法将数组的等价物作为列表返回，该列表被迭代并`toString()`在列表中的每个对象上调用。

因此，虽然您将无法做到，但`System.out.println(userList);`您可以做`System.out.println(Arrays.toString(userList);`这将基本上实现相同的目标。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T09:58:20.730

您可以创建一个包含数组的单独类，并覆盖`toString()`.

我认为最简单的解决方案是扩展`ArrayList`类，然后覆盖`toString()`（例如，`UserArrayList`）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-24T10:19:02.317

您可以这样做的唯一方法是重新编译`Object.toString()`和添加`instanceof`子句。

我曾要求对 Project Coin 进行更改，以便以更面向对象的方式处理数组。我觉得初学者在 Array、Arrays 和其他 7 个常用的辅助类中学习所需的所有功能太多了。

我认为最终得出的结论是，使数组正确面向对象是一项不平凡的任务，它将被推回 Java 9 或更高版本。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-27T19:53:41.783

Try this

```
User[] array = new User[2];
System.out.println(Arrays.asList(array)); 
```

of course if you have customized `user.toString()` method

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T10:29:46.867

You cannot do that. When you declare an array, then Java in fact creates a hidden object of type Array. It is a special kind of class (for example, it supports the index access [] operator) which normal code cannot directly access.

If you wanted to override toString(), you would have to extend this class. But you cannot do it, since it is hidden.

I think it is good to be it this way. If one could extend the Array class, then one could add all kinds of methods there. And when someone else manages this code, they see custom methods on arrays and they are "WTF... Is this C++ or what?".

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T15:11:53.453

Well, you can try to wrap all calls to `Object.toString` with an [AspectJ](http://en.wikipedia.org/wiki/AspectJ) around [advice](http://en.wikipedia.org/wiki/Advice_%28programming%29) and return the desired output for arrays. However, I don't think it's a good solution :)

# ios - iPhone 模拟器 Xcode 中的 AppStore

> ID：10295601
> 
> 赞同：6
> 
> 时间：2012-04-24T09:54:50.863
> 
> 标签：ios, simulator

是否可以在 Xcode iPhone 模拟器中从 iPhone AppStore 下载和运行应用程序？我会为我的 Mac 下载 Xcode，然后将其用作 iPhone；）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T09:55:53.857

不，模拟器运行 i386 二进制文件，而 iPhone 应用商店应用程序是 ARM 二进制文件应用程序。

iOS 应用程序被编译为机器代码，Android 应用程序使用字节码在虚拟机中运行，并在运行时转换为机器代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-05T13:00:10.263

这是不可能的

模拟器不运行 ARM 代码，仅运行 x86 代码。除非您拥有来自 Apple 的原始源代码，否则您不会在模拟器上看到 App Store。

即使您没有开发人员帐户，您编写的应用程序也可以通过直接从 Xcode 运行在模拟器中进行测试。要在实际设备上测试您的应用程序，您需要加入 Apple 开发者计划。

# sql - 这个sql怎么解决？

> ID：10295603
> 
> 赞同：-1
> 
> 时间：2012-04-24T09:54:59.990
> 
> 标签：sql, tsql

我需要用这个条件过滤一个 sql 查询：

*   MyField <> '%不能%"

*   AND MyField = '%Able%"

显然我不能应用这个过滤器......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T09:57:25.990

你需要在这里使用 sql 的 like oprator

```
select * from (
SELECT * FROM tableanme
        WHERE MyField LIKE '%Able%' 
          )d where MyField NOT LIKE '%Not Able%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:57:42.277

你需要的位是

```
WHERE     MyField LIKE '%Able%'
          AND MyField NOT LIKE '%Not Able%' 
```

# ios - Interface Builder 文件中的未知类 MHRotaryKnob

> ID：10295605
> 
> 赞同：0
> 
> 时间：2012-04-24T09:55:08.023
> 
> 标签：ios, uicontrol

我有一个自定义类，它是 UIControl 的子类。

不幸的是，由于以下错误，我无法编译代码：

`Unknown class MHRotaryKnob in Interface Builder file.`

*   我试图添加我只是得到`MHRotaryKnob.m`了`Build Phases -> Compile Sources`一堆错误：

> 架构 i386 的未定义符号：
> “_OBJC_CLASS_$_CAKeyframeAnimation”，引用自：MHRotaryKnob.o 中的 objc-class-ref “_OBJC_CLASS_$_CAMediaTimingFunction”，引用自：MHRotaryKnob.o 中的 objc-class-ref “_kCAMediaTimingFunctionEaseIn”，引用自：- [MHRotaryKnob valueDidChangeFrom:to:animated:] in MHRotaryKnob.o "_kCAMediaTimingFunctionEaseOut"，引用自：-[MHRotaryKnob valueDidChangeFrom:to:animated:] in MHRotaryKnob.o ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

![在此处输入图像描述](../Images/6009b43645c3c0c4444468a1dfdada46.png)

![在此处输入图像描述](../Images/01d1364afc1e262b9dff24773255f2bd.png)

*   我试图清理和重建
*   我已经从我的模拟器中清除了内容

我假设通过搜索这个特定错误是由于我的构建阶段缺少源文件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:12:16.010

添加了一个缺失的框架（QuartzCore），问题就解决了。

# java - Java 自动属性比较

> ID：10295606
> 
> 赞同：0
> 
> 时间：2012-04-24T09:55:18.677
> 
> 标签：java, hibernate, attributes, compare

我最近与一位同事就如何比较同一个 java 类的 2 个实例进行了辩论。

您有一个复杂对象的两个实例，并且想知道这两个对象之间的哪些属性不同。

这是一个用例：您有一个包含很多字段的用户配置文件，并且用户提交了一个新配置文件，您想知道哪些字段已更改以便能够显示诸如“成功更改您的生日、姓名、街道名称.. 。”

所以目前，我最好的解决方案是在类中编写一个比较方法，该方法接受另一个对象并逐个比较每个字段，然后返回不同的字段列表。

我想知道是否有任何自动方法（例如来自外部库）可以做到这一点，而不必手动指定每个属性。

顺便说一句，如果 hibernate 有一种方法可以这样做来比较本地和数据库对象，它就可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:11:09.013

正如 Guillaume Polet 所指出的，使用反射。我还会在需要像这样公开的字段上添加注释。如果您不喜欢公共字段的想法，请使用带有注释的 getX() 方法。我不知道任何库代码可以进行比较；但写起来不会花很长时间。

# android - 为 android 游戏制作图像时要考虑什么分辨率参考？

> ID：10295610
> 
> 赞同：0
> 
> 时间：2012-04-24T09:55:26.573
> 
> 标签：android, resolution

我想制作一款可以在所有屏幕分辨率和尺寸上运行的游戏。为了开始制作游戏，我应该考虑什么屏幕分辨率来制作图形？我已经看到愤怒的小鸟游戏对于所有屏幕分辨率只有一个图像，那么他们在制作图形时考虑的基本分辨率是多少？接下来，我必须做哪些计算才能将这些图像缩放为其他分辨率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:06:30.340

如果您在 android 中针对多个设备，那么您需要为您的游戏使用不同的图像需要在 android 项目中使用。您可以为所有设备制作如下所示的 Android 项目结构

这是您在android项目中的资源文件夹结构

```
 1.res/drawable for Default Images 
 2.res/drawable-hdpi for high-density   // bitmap for high density
 3.res/drawable-hdpi-v5
 4.res/drawable-v9
 5.res/drawable-ldpi
 6.res/drawable-ldpi-v5
 7.res/drawable-ldpi-v9
 8.res/drawable-mdpi    // bitmap for medium density
 9.res/drawable-mdpi-v5
 10.res/drawable-mdpi-v9
 11.res/drawable-xhdpi    // bitmap for extra high density 
```

现在对于布局结构如下：

```
 12.layout This Use For Default Layout Files  // layout for normal screen size ("default")
   13.layout-land For Use in Landscape Mode
   14 layout-large     // layout for large screen size
   15.layout-large-long
   16.layout-large-long-land
   17.layout-large-notlong
   18.layout-large-notlong-land
   19.layout-ldpi
   20.layout-normal-long
   21.layout-normal-long-land
   22.layout-normal-notlong
   23.layout-normal-notlong-land
   24.layout-small   // layout for small screen size
   25.layout-small-land
   26.layout-xlarge      // layout for extra large screen size
   27.layout-xlarge-land   // layout for extra large in landscape orientation 
```

根据您的要求，您可以在用于 ldpi、mdpi、hdpi、xhdpi 的 res/drawable 中添加与布局文件相同的图像。您也可以参考此 SO 链接。[链接](https://stackoverflow.com/questions/8118125/how-to-set-single-image-and-use-to-all-the-android-devices/8118270#8118270)

# php - 如何在javascript中从CKEDITOR中获取选定的html？

> ID：10295613
> 
> 赞同：2
> 
> 时间：2012-04-24T09:55:39.800
> 
> 标签：php, javascript, ckeditor

在我的drupal项目中，我无法在javascript中用ckeditor编写选定的html。谁能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T10:47:45.607

CKEditor 的 API 并没有完全提供这一点，但是查看[文档](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.dom.range.html#cloneContents)看起来好像您可以执行以下操作（未经测试）：

```
function getSelectionHtml(editor) {
    var sel = editor.getSelection();
    var ranges = sel.getRanges();
    var el = new CKEDITOR.dom.element("div");
    for (var i = 0, len = ranges.length; i < len; ++i) {
        el.append(ranges[i].cloneContents());
    }
    return el.getHtml();
}

alert( getSelectionHtml(editor) ); 
```

CKEditor 还有我不太了解的 HTML 解析和序列化 API，因此您可以使用它们来根据您的要求定制 HTML，而不是使用浏览器`innerHTML`实现的原始输出。

# c# - 装配体和产品版本不匹配

> ID：10295614
> 
> 赞同：1
> 
> 时间：2012-04-24T09:55:43.027
> 
> 标签：c#, asp.net, .net, vb.net, ajaxcontroltoolkit

我正在尝试在 asp.net 网站中使用 Ajax 控制工具包。我从我之前的一个示例项目中复制了 dll。它有以下细节

```
Assembly Version – 3.5.40412.0
File Version - 3.5.40412.2
Internal Name: Ajax Control Toolkit
Language : Neutral
Product Version - 3.5.40412.2 
```

当我添加对此程序集的引用时，它在引用列表中显示为“AjaxControlToolkit-3.5.40412.2”。当我运行解决方案时，我得到一个 FileLoadException：

> 无法加载文件或程序集“AjaxControlToolkit-3.5.40412.2”或其依赖项之一。
> 
> 找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我认为问题在于程序集版本和文件版本的差异。是这样吗？我们怎样才能克服它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:56:31.990

编辑 web.config 文件以删除正常操作不需要的引用：

1 - 打开站点根目录中的 web.config 文件

2 - 找到以下行并将其注释掉（）：xxxxx-是您的程序集名称。

```
<add assembly="xxxxx", Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/> 
```

3 - 保存并关闭 web.config 文件，然后重试

参考链接： http: [//manual.aspdotnetstorefront.com/p-1118-could-not-load-file-or-assembly-microsoftwebservices3-version3000-cultureneutral-publickeytoken31bf3856ad364e35.aspx](http://manual.aspdotnetstorefront.com/p-1118-could-not-load-file-or-assembly-microsoftwebservices3-version3000-cultureneutral-publickeytoken31bf3856ad364e35.aspx)

# database - MonoDroid 中 ORM 的 ICursor 实现

> ID：10295622
> 
> 赞同：1
> 
> 时间：2012-04-24T09:56:03.843
> 
> 标签：database, orm, cursor, xamarin.android

我试图弄清楚如何实现 android 数据库游标来包装“ORMed”数据库层。

要在 MonoDroid 中使用 ORM，我们可以使用[sqlite-net](https://github.com/praeclarum/sqlite-net)项目（非常轻量级的 ORM）或[ServiceStack.OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite)

我的想法是实现[ICursor](http://docs.mono-android.net/?link=T%3aAndroid.Database.ICursor)接口和“包装”ORM 现在我只是无法在脑海中设定它应该如何工作，以及它是否应该工作。它应该加载“框架”的结果集，还是一个一个地获取它？哪个对性能更好，如何获取列值 - 反射或..？

所以，实际上的问题是：有可能吗？任何想法将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:05:41.160

我不确定您要使用 ICursor 实现解决什么“问题”，也许您应该更具体地了解您要执行的特定任务。ORM 的全部意义（您错过了[在 Android 上也支持 SQLite 的这个](http://orm.codeplex.com)）是从代码中抽象出整个 RDBMS 范式，并为您提供一个面向对象的范式。

ICursor 从 SQL 查询中返回可更新的结果集——这意味着您必须了解行、结果集、查询和所有这些。ORM 会返回一个对象或对象集合。如果你想更新一个，你更新对象并将其发送回 ORM。

现在我完全承认，有时 ORM 可能无法提供最简洁的机制来执行 SQL 查询可能做得很好的事情。例如，如果您在逻辑上想要“删除昨天在第二个班次期间构建的所有部件”。轻量级 ORM 可能会为您提供所有部分，然后您必须使用 LINQ 或类似方法将其过滤到正确的日期并转移，然后迭代该结果集合以删除每个部分，而使用 SQL 查询您只需传入 a `DELETE FROM Parts WHERE BornONDate BETWEEN @start AND @end`，但这是一个您面临的权衡取舍。

在某些情况下，ORM 可能会提供一种工具来做你想做的事。例如，在上面链接的 OpenNETCF ORM 中，您可以将 DataStore（如果还没有的话）转换为 SQLDataStore，然后您可以访问 ExecuteNonQuery 方法，从而允许您传入直接的 SQL 语句。如果仍然没有办法将记录集传回给您，因为正如我所说，返回数据库行实际上是对立的或 ORM。

使用 ExecuteNonQuery 之类的东西也存在一些固有风险。如果你想改变你的后备存储，比如从像 SQLite 这样的 RDBMS 到完全不同的东西，比如对象数据库、XML 文件或其他东西，那么你构建和使用 SQL 查询的代码就会中断。诚然，这可能并不常见，但如果代码可移植性和可扩展性在您的关注范围内，那么至少需要牢记这一点。

# c# - WebClient 下载文件出错：对象引用未设置为对象的实例

> ID：10295625
> 
> 赞同：1
> 
> 时间：2012-04-24T09:56:15.527
> 
> 标签：c#, asp.net, webclient

```
WebClient ws = new WebClient();
ws.Credentials = new System.Net.NetworkCredential(username, password, domain);
 ws.DownloadFile("https://xxxx.xxxx.com/xxxx.xml", @"C:\Windows\TEMP\Downloaded.xml"); 
```

我收到错误“对象引用未设置为对象的实例”。有谁知道为什么？

如果我将“https://xxxx.xxxx.com/xxxx.xml”复制到浏览器，它可以下载并保存到“C:\Windows\TEMP\Downloaded.xml”，但我的程序不能，只能抛出错误。

以前我使用相同的代码成功下载了文件，但那是另一个带有“http”的站点。不确定是否是问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:37:46.177

I hade the same issue when using the WebClient class. What I did was build an URI instead of the string path like this (I've not done it here, but you can also add username and password to the UriBuilder):

```
var uriBuild = new UriBuilder { Host host, Path = downloadPath };
client.DownloadFileAsync(uriBuild.Uri, localPath); 
```

The host and download path is seperated, for example:

```
string host = "ftp.sunet.se"
string downloadPath = "/pub/unix/databases/relational/mysql/Downloads/MySQL-5.5/mysql-5.5.22-win32.msi" 
```

Let me know if this also works for you! Cheers :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-14T22:46:31.587

使用 uri 而不是使用原始 url

```
Uri URL = urlAddress.StartsWith("https://", StringComparison.OrdinalIgnoreCase) ? new Uri(urlAddress) : new Uri("https://" + urlAddress);
await myWebClient.DownloadFileTaskAsync(URL, location); 
```

# silverlight - 跨多个程序集共享 generic.xaml

> ID：10295631
> 
> 赞同：0
> 
> 时间：2012-04-24T09:56:33.050
> 
> 标签：silverlight, windows-phone-7

我正在创建一组我希望在 Silverlight 和 Windows Phone 部署中使用的控件。核心控件包含在 WP7 类库中，两种部署都可以使用该类库。然后，我在其他 WP7 和 Silverlight 库中包含特定于平台的控件。

对于共享控件，我需要为每个平台定义不同的默认样式。从我一直在阅读的内容来看，generic.xaml 需要与其样式的控件位于同一程序集中。

当控件本身位于另一个共享程序集中时，我将如何处理此问题以便能够为我的 WP7 程序集中的控件定义一个资源，并为我的 Silverlight 程序集中的同一控件定义另一个资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:17:02.057

将我的程序集中的 generic.xaml 添加到 App.Resources 中可以正常工作。在 App.xaml 中工作并以编程方式添加合并的资源字典。

# jakarta-ee - 救孩子，父亲看不到

> ID：10295632
> 
> 赞同：0
> 
> 时间：2012-04-24T09:56:43.967
> 
> 标签：jakarta-ee, servlets, jpa, ejb, jpa-2.0

我有一个类别有很多这样的讨论：

```
@OneToMany(mappedBy="category", fetch= FetchType.EAGER)
List<Discussion> discussions =  new ArrayList<Discussion>(); 
```

并通过保存一个新的讨论

```
Discussion discussion = new Discussion();
discussion.setCategory(category);
discussion.setTitle(text);
discussionFacade.create(discussion); 
```

通过调用 category.getDiscussions(); 我没有看到新的（直到我重新部署）。最好的方法是什么？我不想创建一个在类别上添加讨论的方法（例如 category.addDiscussion(discussion).

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:40:41.557

使用双向关联时，您应该编写一些方便的方法来实际设置两端的关联。

在持久化被视为拥有方的实体后，底层 JPA 提供者将确定它是否必须持久化关联的实体（取决于 CASCADING 配置），但默认情况下，实体（在您的情况下为 Discussion 实例）由持久性管理上下文但未从数据库刷新。所以，这是正常的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:43:51.453

`refresh()`在您从数据库中获取实体之前，该列表不会更新。但是你不需要一个单独的方法，使用`add`你的方法`ArrayList`：

```
discussions.add(discussion); 
```

# c - 常量的C字符串连接

> ID：10295634
> 
> 赞同：21
> 
> 时间：2012-04-24T09:57:00.857
> 
> 标签：c, string-concatenation

[为什么不将 C 用于 Web 应用程序](https://stackoverflow.com/questions/3079153/why-do-you-not-use-c-for-your-web-apps)的[答案之一？](https://stackoverflow.com/questions/3079153/why-do-you-not-use-c-for-your-web-apps#4171930)包含以下内容：

> 对于下面的 C 废话示例：
> 
> ```
> const char* foo = "foo";
> const char* bar = "bar";
> char* foobar = (char*)malloc(strlen(foo)+strlen(bar)+1);
> strcpy(foobar, foo);
> strcat(foobar, foo); 
> ```
> 
> 实际上，常量可以并且应该在 C 中自然连接：
> 
> ```
> const char foo[] = "foo";
> const char bar[] = "bar";
> char foobar[] = foo bar; // look Ma, I did it without any operator! 
> ```
> 
> 使用 [] 而不是 * 甚至可以让你修改字符串，或者找到它们的长度：
> 
> ```
> int foo_str_len = sizeof(foobar)-1; 
> ```
> 
> 所以，请在你（错误地）声称 C 很难与字符串一起使用之前，学习如何使用 C。

* * *

我自己尝试过，但出现错误：

> 预期 ',' 或 ';' 字符串常量之前

所以我的问题是：我是否需要告诉编译器一些事情才能完成这项工作，还是上面的帖子完全错误？请注意，我知道在 C 中连接字符数组的其他方法。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-24T12:47:03.490

> (char*)malloc

永远不要在 C 中对 malloc 的结果进行类型转换。阅读[this](http://c-faq.com/malloc/mallocnocast.html)和[this](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)。

> 实际上，常量可以并且应该在 C 中自然连接

不，*字符串文字*可以并且应该在 C 中连接。`"foo"`是字符串文字并且`const char foo[]`是常量字符串（字符数组）。代码`"foo" "bar"`将自动连接，代码`foo bar`不会。

如果需要，可以将字符串文字隐藏在宏后面：

```
#define foo "foo"
#define bar "bar"
char foobar[] = foo bar; // actually works 
```

> 所以，请在你（错误地）声称 C 很难与字符串一起使用之前，学习如何使用 C。

从这个例子中我们可以看出，C*很难与字符串一起使用。*尽管他们自大自信，但编写它的人混淆了各种概念，仍然必须学习如何使用 C。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-24T10:02:14.230

该答案看起来像是有人设法将可以以这种方式连接的字符串文字与`const`字符串变量混为一谈。我的猜测是原来有预处理器宏而不是变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-27T09:55:33.497

```
#include <stdio.h>
#include <string.h>

int
main(int argc, char *argv[])
{
    char *str1 = "foo";
    char *str2 = "bar";
    char ccat[strlen(str1)+strlen(str2)+1];

    strncpy(&ccat[0], str1, strlen(str1));
    strncpy(&ccat[strlen(str1)], str2, strlen(str2));
    ccat[strlen(str1)+strlen(str2)+1] = '\0';

    puts(str1);
    puts(str2);
    puts(ccat);
} 
```

此代码连接`str1`并且`str2`不需要`malloc`，输出应为：

```
foo
bar
foobar 
```

# regex - RegEx 从字符串中删除括号

> ID：10295637
> 
> 赞同：9
> 
> 时间：2012-04-24T09:57:21.900
> 
> 标签：regex

如果我有：

```
string = (1000.00) 
```

如何使用正则表达式删除括号并获得输出`1000.00`？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T10:05:49.437

试试这个正则表达式：

```
s/([()])//g 
```

**简要说明：** 用于为任何正则表达式`[]`创建*字符集。*我在这种特殊情况下的*字符集*`(`由和组成`)`。所以总的来说，用空字符串替换`(`和。`)`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T10:02:37.547

替换模式：

```
\((.+?)\) 
```

使用替换模式：

```
\1 
```

请注意括号的转义，`()`因为它们的字面意思是括号字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:59:22.653

Perl 语法：（`/\(([0-9\.]+)\)/`未经测试）

**更新**：（更严格）

Perl 语法：`/\((-?[0-9]+\.[0-9]*)\)/`

# c# - 在 MonoTouch 中注册自定义 NSUrlProtocol

> ID：10295642
> 
> 赞同：3
> 
> 时间：2012-04-24T09:57:34.433
> 
> 标签：c#, xamarin.ios

我正在使用 MonoTouch 构建 iOS 应用程序并尝试实现自定义 NSUrlProtocol。

当我注册自己的协议实现时，出现以下错误：

> WebKit 丢弃了 webView:decidePolicyForNavigationAction:request:frame:decisionListener:delegate: *** -canInitWithRequest: 仅为抽象类定义的未捕获异常。定义-[Foo.Network.NetworkServices+TestProtocol canInitWithRequest:]！

关于可能导致这种情况的任何想法？

这是代码：

```
//Registering the protocol    
NSUrlProtocol.RegisterClass(new Class(typeof(TestProtocol)));

public class TestProtocol : NSUrlProtocol
{
    public TestProtocol ()
    {
        this.Client = new TestProtocolClient(); 
    }       

    public override bool CanInitWithRequest (NSUrlRequest request)
    {
        return true;
    }
}

public class TestProtocolClient : NSUrlProtocolClient
{
    public override void DataLoaded (NSUrlProtocol protocol, NSData data)
    {
    }

    public override void FailedWithError (NSUrlProtocol protocol, NSError error)
    {
    }

    public override void ReceivedResponse (NSUrlProtocol protocol, NSUrlResponse response, NSUrlCacheStoragePolicy policy)
    {
    }

    public override void Redirected (NSUrlProtocol protocol, NSUrlRequest redirectedToEequest, NSUrlResponse redirectResponse)
    {
    }

    public override void CachedResponseIsValid (NSUrlProtocol protocol, NSCachedUrlResponse cachedResponse)
    {
    }

    public override void FinishedLoading (NSUrlProtocol protocol)
    {
    }

    public override void ReceivedAuthenticationChallenge (NSUrlProtocol protocol, NSUrlAuthenticationChallenge challenge)
    {
    }

    public override void CancelledAuthenticationChallenge (NSUrlProtocol protocol, NSUrlAuthenticationChallenge challenge)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:39:14.617

MonoTouch 中的 NSUrlProtocol 支持目前已损坏。

它将在下一个 beta 版本 (MonoTouch 5.3.3) 中修复。还有一个[示例](https://github.com/xamarin/monotouch-samples/tree/monotouch-5.4/ImageProtocol)可以展示它是如何工作的（但它显然在 MonoTouch 5.3.3 发布之前无法工作）。

如果这是紧急事项，Xamarin 的[支持通常可以为您提供预览版本。](http://support.xamarin.com/)

# asp.net-mvc - DI：何时将依赖项列为 ctor 中的参数以及何时调用 Container.Resolve<>()？

> ID：10295644
> 
> 赞同：1
> 
> 时间：2012-04-24T09:57:44.227
> 
> 标签：asp.net-mvc, dependency-injection

我在我的项目中经常使用 DI，我对这个概念相当满意，但是有一个方面我不太确定。

所以对我来说一个常见的用例是有一个 ASP.NET MVC 控制器，我在构造函数的参数列表中列出控制器的依赖项，显然这些是在控制器由 DI 容器构造时传入的，然后我将它们分配给只读私有变量稍后由控制器中的操作使用。

现在，我担心的是，如果我只在一个动作中使用注入的依赖项（比如说 an `IMemberRepository`）（假设还有 5 个其他动作），**我应该将其列为 ctor 中的依赖项，还是应该`Container.Resolve<IMemberRepository>()`在一个动作中调用动作用在哪里？**

我不得不说，我确实喜欢在 ctor 中列出我的所有依赖项，而且我并不特别喜欢`Container.Resolve<>()`散布在我的代码中，但是，继续上面的示例，让 DI 容器实例化`IMemberRepository`它是没有意义的要使用的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:20:37.340

你永远不应该在你的应用程序代码中调用 Container.Resolve。这是服务定位器模式，被[认为是一种反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。不通过构造函数注入所有依赖项意味着您隐藏了使用的依赖项，这使得类具有哪些依赖项变得不太清楚，并且使测试该类变得更加困难。

当依赖项被注入但未使用时，您担心性能，但这通常不是问题，因为对象的构造通常非常快（因为所有这些对象在构造期间应该做的是将所有传入的依赖项存储在私有字段中）。当某个类型的构造被证明太慢时，还有其他解决方案，例如将该依赖包装到延迟初始化该依赖的代理中。

如果你发现你的类获得了太多的构造函数参数，这表明它有[太多的责任](https://en.wikipedia.org/wiki/Single_responsibility_principle)；它做得太多了。尝试修复课程设计中的这个缺陷，而不是退回到`Container.Resolve`. 例如，将一组具有类逻辑的依赖项提取到一个新类型中，并将其作为依赖项注入。

设计可能还有其他问题。当您的控制器直接依赖于存储库依赖项并且您在控制器中有业务逻辑时，您就缺少抽象。您缺少服务层。一个好的解决方案是引入[命令处理程序](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)和[查询处理程序](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:33:23.547

我赞同史蒂文所说的话。

如果有太多的构造函数参数对您不利，那么您也可以选择属性注入。我赞成这种方法。有一些对象，出于某种或其他原因，如果它们尚未完全填充，则不会被注入到属性中，而它们将被注入到构造函数中。

如果依赖项为空，我对属性的依赖项应用保护以引发异常，以便我知道它是哪个依赖项。

希望这是有道理的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T10:41:10.783

我会说这取决于你想用 DI 做什么。

在构造函数中使用注入的依赖项作为参数的方法可以以很长的参数列表结束。
这对于真正的测试驱动开发可能是必要的，您可能希望模拟注入依赖项的方法。

我个人认为它会产生很多开销，因为 DI 容器总是必须构建所有依赖项，无论是否需要在 Action 中。
还需要考虑的是使用`Actions`和`PartialViews`产生更多的结构。

例如

```
public class HomeController : Controller
{
    private IMemberRepository _memberRepo = null;

    public HomeController(IMemberRepository repo)
    {
        _memberRepo = repo;
    }

    public ActionResult Index()
    {
        MyViewModel viewModel = _memberRepo.DoSomething();
        return View(viewModel);
    }

    [ChildActionOnly]
    public PartialViewResult SomePartialAction()
    {
        return PartialView();
    }
} 
```

视图`Index.cshtml`调用局部视图`SomePartialAction()`的位置`@Html.Action("SomePartialAction")`。
在这种情况下，控制器的构造函数被调用了两次。每次为每个动作。因此 DI 容器也被调用了两次。

所以这真的取决于。对于“硬核” TDD，您必须使用构造函数。否则我会在需要的地方和时间解决依赖关系。

# c# - c# asp.net：从 SQL 存储过程中捕获 raiserror() 消息

> ID：10295645
> 
> 赞同：2
> 
> 时间：2012-04-24T09:57:44.750
> 
> 标签：c#, .net, tsql, stored-procedures, raiserror

我正在尝试使用 C# 作为我选择的编程语言来了解 ASP.NET 4.0。我是一名优秀的 SQL 开发人员，因此计划在 SQL 中完成我的大部分业务逻辑。应用程序只会通过存储过程与数据库交互。

在 aspx 页面中，我有一个数据源，用于填充调用 sp 'season_get_byID' 的数据视图和带有多个参数的更新 'season_update'，

aspx 源码显示

```
 <asp:SqlDataSource ID="dsDetail" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ADR %>" 
        SelectCommand="season_get_by_ID" SelectCommandType="StoredProcedure" 
        UpdateCommand="season_Update" UpdateCommandType="StoredProcedure">
        <SelectParameters>
            <asp:ControlParameter ControlID="GridView1" Name="ID" 
        PropertyName="SelectedValue" Type="Int32" />
        </SelectParameters>
        <UpdateParameters>
            <asp:Parameter Name="ID" Type="Int32" />
            <asp:Parameter Name="Code" Type="String" />
            <asp:Parameter Name="Description" Type="String" />
            <asp:Parameter DbType="Datetime" Name="StartDate" />
            <asp:Parameter DbType="Datetime" Name="EndDate" />
            <asp:Parameter Name="isActive" Type="Byte" />
            <asp:Parameter Name="isCurrent" Type="Byte" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

其中每个 asp:Parameter 映射到存储过程中的 @Param 参数 - 到目前为止一切都很好

存储过程在尝试进行更新之前会进行一些验证。如果验证失败，则会引发 RAISERROR(@errmsg,10,1)。

我无法解决的是文件后面的 aspx.cs 代码中的哪个位置，我会尝试捕获错误以及语法应该是什么：它是否应该在 after_update 事件处理程序中，如果是的话，它似乎不是其中的一部分e.异常。我知道这个例程中的一些验证可以使用验证类来完成，但这是操作环境而不是最终生产代码的学习练习，即我试图理解什么是可能的，而不是什么是“正确的”

存储过程的文本如下。

```
ALTER Procedure [dbo].[season_Update] 
    (
        @ID int,
        @Code nvarchar(10), 
    @Description nvarchar(50), 
    @StartDate date, 
    @EndDate date, 
    @isActive tinyint, 
    @isCurrent tinyint
)
as
DECLARE @ERR nvarchar(max) = ''

IF (SELECT count(*) FROM season WHERE ID = @ID) = 0 
BEGIN
SET @ERR = @ERR + '|Season Doesn''''t exist'
END

/*validate that season code and description are not blank*/
IF (@Code is null 
or
ltrim(rtrim(@Code)) = ''
)
BEGIN
set @ERR =+ '|Season Code cannot be blank'
END

IF @ERR = ''
BEGIN
IF (@Description is null 
    or
    ltrim(rtrim(@Description)) = ''
    )
BEGIN
    set @ERR =+ '|Season Description cannot be blank'
END

/*validate that the season code does not already exist on a different ID*/
IF (SELECT count(*) FROM season WHERE Code = ltrim(rtrim(upper(@CODE))) and 
       ID <> @ID) > 0 
BEGIN
    SET @ERR =+ '|Season Code ' + @Code + 'already exists'
END

/*validate that the start date is before the end date*/
IF @Startdate > @Enddate
BEGIN
    SET @ERR =+ '|Start Date cannot be Before End Date'
END
END

IF @ERR = ''
BEGIN
BEGIN TRY
UPDATE Season
    SET Code = ltrim(rtrim(upper(@Code))), 
        Description = Ltrim(rtrim(@Description)), 
        StartDate = @StartDate, 
        EndDate = @EndDate, 
        isActive = @isActive, 
        isCurrent = @isCurrent
WHERE
        ID = @ID    
END TRY
BEGIN CATCH
RAISERROR(N'There was a problem',10,1)
END CATCH
END

IF @ERR <> ''
BEGIN
RAISERROR(@ERR,10,1)
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:01:46.093

Microsoft 对此有一篇文章，[How to Retrieve Values in SQL Server Stored Procedures](http://support.microsoft.com/kb/194792)，尽管是在 Visual Basic 中。这应该让您了解如何解决您的问题。

# sql - 可以访问连接表列的简单表连接

> ID：10295649
> 
> 赞同：1
> 
> 时间：2012-04-24T09:57:52.313
> 
> 标签：sql, sql-server, sql-server-2000

我有一个简单的项目表。称它们为“零件”。

每个部分在单独的表中可以有零个或多个相关条目，称为“子部分”。正如您可能期望的那样，表格的简单视图是：

```
Parts
-----
PartID int (PK)
PartName varchar

SubParts
--------
SubPartID int (PK)
PartID int (FK_Parts)
SubPartName varchar
SubPartAdded datetime 
```

我想从主表中返回所有部分，但也可以访问最新的（按 SubPartAdded DESC 排序）相关的 SubPart（如果存在）。

我的困惑是 subparts 表中有 1M+ 条目（对于许多不同的部分），我只需要当前部分的最新条目（如果存在）。

早些时候，我写了一条语句，在 Parts 表和相关 Subparts 的派生表之间执行左连接（有效），但派生表*似乎*返回 subparts 表中的所有行，从而导致性能下降。我基本上需要在派生的 select 语句中执行 TOP 1 并按 DESC 排序，以按 PartID（和其他一些列）预过滤子部分。但是，由于我似乎无法在派生的 select 语句中引用 Parts 表（外部）列，因此我无法向派生表添加 WHERE 子句。

我还尝试了以下确实执行但不返回任何相关记录的代码段：

```
 SELECT  p.PartName, sp.SubPartName, sp.SubPartAdded
    FROM    Parts p 
    LEFT JOIN  (SELECT TOP 1 SubPartID, SubpartAdded, PartID FROM SubParts ORDER BY SubPartAdded) AS sp
               ON sp.PartID = p.PartID 
```

我想“TOP 1”语句正在对整个 SubParts 表执行，然后被“ON”语句过滤（？）

最终，我需要在主存储过程中的多个位置使用 Subparts 表中的一些列，所以我不只是想要一个相关的子查询，因为这需要多次调用。

（此过程将在每次执行时返回多个部分。即，该过程不会被单个 PartID 过滤）

我希望这很清楚？听起来它应该有一个非常简单的解决方案，但我现在很难过！（需要兼容 SQL Server 2K 及以上版本）

问候尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:14:26.750

以下应该可以返回到 SQL Server 2000。

```
SELECT  PartName, SubPartName, SubPartAdded
FROM    Parts
        LEFT JOIN
        (   SELECT  SubParts.PartID, SubParts.SubPartName SubParts.SubPartAdded
            FROM    SubParts
                    INNER JOIN
                    (   SELECT  PartID, MAX(SubPartAdded) [SubPartAdded]
                        FROM    SubParts
                        GROUP BY PartID
                    ) MaxSubPart
                        ON MaxSubPart.PartID = SubParts.PartID
                        AND MaxSubPart.SubPartAdded = SubParts.SubPartAdded
        ) Subpart
            ON SubPart.PartID = Parts.PartID 
```

在以后的版本中有更有效和更优雅的方法（外部应用或窗口函数），但我不确定有多少方法向后兼容 SQL Server 2000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:13:59.480

您需要一个派生表来提取最后的子部分。然后，您可以通过 id 和 SubPartAdded 列过滤将其连接到派生表的子部分：

```
SELECT  p.PartName, sp.SubPartName, sp.SubPartAdded
FROM    Parts p 
LEFT JOIN SubParts sp
  ON p.PartID = sp.PartID
LEFT JOIN 
(
  SELECT PartID, max (SubPartAdded) MaxSubPartAdded
    FROM SubParts 
   GROUP BY PartID
) AS MaxSP
  ON sp.PartID = MaxSP.PartID
 AND sp.SubPartAdded = MaxSP.MaxSubPartAdded 
```

如果 Sql Server 2005 或更新版本：

```
SELECT  p.PartName, sp.SubPartName, sp.SubPartAdded
FROM    Parts p 
OUTER APPLY
(
   select top 1 
          SubPartName, SubPartAdded
     from SubParts 
    where SubParts.PartID = p.PartID
   order by SubPartAdded desc
) sp 
```

# android - 想要中断一个线程但线程为空

> ID：10295661
> 
> 赞同：0
> 
> 时间：2012-04-24T09:58:27.757
> 
> 标签：android, multithreading, null, android-context

我想从另一个线程 2 中断一个线程 1，但是当我尝试进行`thread1.interrupt();`调用时，我得到一个空指针错误。

我正在制作一个 android 应用程序，我在一个 android 登录页面上，当我登录时，我创建并启动一个名为的线程`sessionTimer`（会话倒计时说 2 分钟）。我想要的是，当我在另一个活动中按注销时，我会转到登录页面，并且我的`sessionTimer`线程应该被中断，以便我可以用最长时间开始一个新的登录会话。

```
package com.AndroidApp.Login;

import java.security.GeneralSecurityException;
import java.security.MessageDigest;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import com.AndroidApp.R;
import com.AndroidApp.domain.Utente;
import com.AndroidApp.pagine.MenuPagina;

public class LoginActivity extends Activity {

    final String TAG = "LogIN";
    ArrayList<HashMap<String, String>> mylist;

    private Button bLogin, bExit;
    private EditText utente, passwd;
    private MediaPlayer mpButtonClick = null;
    private SharedPreferences mPreferences; 
    public volatile Thread sessionTimer;
    public long tId = -1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        mPreferences = getSharedPreferences("CurrentUser", MODE_PRIVATE);

        SharedPreferences.Editor editor = mPreferences.edit();
        editor.clear();
        editor.commit();

        String nome = mPreferences.getString("nome", "Nessuno");
        setTitle("Sessione di : " + nome);
        Log.w("TotThreads", Integer.toString(Thread.activeCount()));
        /*
        final SessionTimer st = new SessionTimer();
        */
        if(MenuPagina.reset){

            Log.w("sessionTimer ID", Long.toString(sessionTimer.getId()));
            if (sessionTimer == null)
                Log.w("sessionTimer", "sessionTimer is NULL");
            sessionTimer.interrupt();
            System.out.println("end current session");

            //st.stopRequest();
        }

        if (!checkLoginInfo()) {

            mpButtonClick = MediaPlayer.create(this, R.raw.button);

            bLogin = (Button)findViewById(R.id.bLogin);
            bLogin.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {

                    mpButtonClick.start();

                    Log.v(TAG, "Trying to Login");
                    utente = (EditText)findViewById(R.id.etUtente);
                    passwd = (EditText)findViewById(R.id.etPassword);

                    String username = utente.getText().toString();
                    username = ("ccce@eex.it");
                    String password = md5(passwd.getText().toString());
                    password = md5("12345");

                    XMLFunctionsLogin.getInstance().setNewURL("u=" + username + "&p=" + password);
                    String xml = XMLFunctionsLogin.getXML();
                    Document doc = XMLFunctionsLogin.xmlFromString(xml); 
                    int status = XMLFunctionsLogin.errStatus(doc); 

                    Log.v("status", Integer.toString(status));
                    if ((status == 0)) {
                        NodeList nodes = doc.getElementsByTagName("login"); 
                        Element e = (Element) nodes.item(0);
                        Utente utente = new Utente();
                        utente.setIdUtente(XMLFunctionsLogin.getValue(e, "idUtente"));
                        utente.setNome(XMLFunctionsLogin.getValue(e, "nome"));
                        utente.setCognome(XMLFunctionsLogin.getValue(e, "cognome"));
                        Log.v("utente", utente.getCognome().toString());

                        List<NameValuePair> nvps = new ArrayList<NameValuePair>(2);
                        nvps.add(new BasicNameValuePair("utente", username));
                        nvps.add(new BasicNameValuePair("password", password));
                        Log.v(TAG, nvps.get(0).toString());
                        Log.v(TAG, nvps.get(1).toString());

                        // Store the username and password in SharedPreferences after the successful login
                        SharedPreferences.Editor editor = mPreferences.edit();
                        editor.putString("userName", username);
                        editor.putString("password", password);
                        editor.putString("idUtente", utente.getIdUtente());
                        editor.putString("nome", utente.getNome());
                        editor.putString("cognome", utente.getCognome());
                        editor.commit();

                        Log.v(TAG, "timer");
                        Log.v("RESET", Boolean.toString(MenuPagina.reset));

                        /*
                        Thread t = new Thread(st);
                        t.start();
                        */

                        sessionTimer = new Thread() {
                            @Override
                            public void run() {
                                long tId = Thread.currentThread().getId();
                                Log.w("TTthread Id", Long.toString(tId));
                                for (int i = 30; i >= 0; i -= 1) {
                                    if ((i == 0) || (MenuPagina.reset)) {
                                        System.out.print("timer finito");
                                        Log.i("Timer", "timer finito");
                                        LoginActivity.this.runOnUiThread(new Runnable() { 
                                            public void run() { 
                                                Toast.makeText(LoginActivity.this, "ti si è scaduta la sessione", Toast.LENGTH_LONG).show(); 
                                            }
                                        });
                                        Intent intent = new Intent(getApplicationContext(), LoginActivity.class);
                                        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                        startActivity(intent);
                                        //System.exit(0);
                                    } try {
                                        Thread.sleep(1000);
                                        Log.i("Timer", Integer.toString(i));
                                    } catch (InterruptedException e) {
                                        Log.i("Catch", "Catchhhhhhhhhhhh");
                                        e.printStackTrace();
                                        Thread.currentThread().interrupt();
                                        return;

                                    }
                                }
                            }

                        };
                        sessionTimer.start();

                        Log.v(TAG, "Successo2");

                        Toast.makeText(LoginActivity.this, "LogIn con successo", Toast.LENGTH_SHORT).show();
                        Intent intent = new Intent(getApplicationContext()/*LoginActivity.this*/, MenuPagina.class);
                        startActivity(intent);

                    } else {
                        final String errorMessage = XMLFunctionsLogin.errStatusDesc(doc);
                        Log.v("fallimento", errorMessage);
                        LoginActivity.this.runOnUiThread(new Runnable() { 
                            public void run() { 
                                Toast.makeText(LoginActivity.this, errorMessage, Toast.LENGTH_LONG).show(); 
                            }
                        });

                        Intent intent = getIntent();
                        finish();
                        startActivity(intent);
                    }
                }

            });

            bExit = (Button)findViewById(R.id.bExit);
            bExit.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {
                    mpButtonClick.start();
                    finish();
                }
            });
        }
    }

    //Checking whether the username and password has stored already or not
    private final boolean checkLoginInfo() {
          boolean username_set = mPreferences.contains("UserName");
          boolean password_set = mPreferences.contains("PassWord"); 
          if ( username_set || password_set ) {
                return true;
          } 
          return false;
    }

    //md5 for crypting and hash
    private static String md5(String data) {
        byte[] bdata = new byte[data.length()];
        int i;
        byte[] hash;

        for (i = 0; i < data.length(); i++)
            bdata[i] = (byte) (data.charAt(i) & 0xff);

        try {
            MessageDigest md5er = MessageDigest.getInstance("MD5");
            hash = md5er.digest(bdata);
        } catch (GeneralSecurityException e) {
            throw new RuntimeException(e);
        }

        StringBuffer r = new StringBuffer(32);
        for (i = 0; i < hash.length; i++) {
            String x = Integer.toHexString(hash[i] & 0xff);
            if (x.length() < 2)
                r.append("0");
            r.append(x);
        }
        return r.toString();
    }
} 
```

所以当我注销并返回登录页面时会发生什么情况，`MenuPagina.reset = true`我收到一条错误消息，说它`sessionTimer`为空。为什么？

我也尝试过为线程使用单独的类，但我得到了相同的空指针错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:05:32.193

`onCreate`在创建或重新创建 Activity 时运行，无论哪种方式，它都是一个新对象，因此必须再次初始化任何局部变量，在您的情况下，在调用`sessionTimer`之前为 null 。`new Thread() {}`

如果您需要保留对线程的引用，请使用比 Activity 更多的全局对象 - 应用程序，这是维护全局应用程序状态的基类。您始终可以通过调用来访问它`Context.getApplicationContext()`。无论如何，请阅读[文档](http://developer.android.com/reference/android/app/Application.html)。

# sitecore - 使用 Sitecore Azure 时如何使 [Web Forms for Marketingers] 模块工作？

> ID：10295664
> 
> 赞同：1
> 
> 时间：2012-04-24T09:58:32.760
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers, sitecore-azure

最近，我正在使用`Sitecore Azure`. 创建 Web 表单时，我们`Web Forms for Marketers`使用`Sitecore`. 它在本地环境中运行良好。但是当我们将它发布到 Azure 时。它不起作用。因为 Azure 中没有`database`Web 表单。有没有人经历过这种情况，也许你们可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:18:30.100

最后，我把它弄下来。

首先，您需要为 WFFM 创建与本地数据库相同的`Sitecore_WebForms`数据库`SQL Azure`。这是一个[链接](http://msdn.microsoft.com/en-us/library/ee621790.aspx)，告诉您如何操作。

其次，将连接字符串更改`forms.config`为指向sql azure中的数据库。这是一个例子。

```
<formsDataProvider type="Sitecore.Forms.Data.DataProviders.WFMDataProvider,Sitecore.Forms.Core">
  <param desc="connection string">Database=Sitecore_WebForms;Data Source=tcp:YOURSERVERNAME.database.windows.net,1433;user id=YOURID;password=YOURPASSWORD;Connect Timeout=60</param>
</formsDataProvider> 
```

这就是我修复它的方法。如果有人遇到同样的问题，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T19:43:13.933

只有面向营销人员的 Web 表单 (WFFM) 2.4 或更高版本与 Sitecore Azure 模块兼容。此外，您必须使用 SQL Server 版本的 WFFM 数据库，该数据库必须在所有 WebRole 实例之间共享。请在此处查看详细信息：[https ://kb.sitecore.net/articles/880886](https://kb.sitecore.net/articles/880886)

如何在 Sitecore Azure 中添加 WFFM 数据库并使用整个 Sitecore 解决方案自动部署它，请阅读以下文章：[https ://kb.sitecore.net/articles/179306](https://kb.sitecore.net/articles/179306)

最好的祝愿，奥列格

# oop - 面向对象的框架如何调用子类？

> ID：10295666
> 
> 赞同：0
> 
> 时间：2012-04-24T09:58:42.790
> 
> 标签：oop, design-patterns, object-oriented-analysis

我经常使用允许您从某个类继承并覆盖那里的方法的框架，它将被调用。

从框架的角度来看，它是如何完成的？这是什么图案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:01:56.003

不确定您在什么上下文中使用框架一词，但您所描述的听起来像`polymorphism`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:23:54.137

听起来您正在使用一种为代码提供元数据的编程语言/平台。框架使用元数据来查找实现特定类的任何类。

它不是一种特定的设计模式（不是我所知道的一种），而是一种可以应用于大多数现代语言的技术。例如，ASP.NET 使用它作为它的`global.asax`文件（我在我的 .NET 框架中使用它）。

它通常用于应用程序入口点来控制对象的生命周期。

# entity-framework-4 - 跨 EF 连接实例加入多个事务

> ID：10295667
> 
> 赞同：1
> 
> 时间：2012-04-24T09:58:51.530
> 
> 标签：entity-framework-4, transactions

我的数据层中有以下设置

```
namespace DAL
{
    public abstract class BaseDalObj:IDisposable
    {
        protected Auto.Entities entities;
        public BaseDalObj()
        {
            entities= new Auto.Entities();
        }
        public void Dispose()
        {
        }
    }
    public class Class1: BaseDalObj
    {
        public void Save(object a)
        {
            entities.SaveItem(a);
        }
    }

    public class Class2: BaseDalObj
    {
        public void Save(object b)
        {
            entities.SaveItem(b);
        }
    }
}
namespace Business
{
    public class BusinessLL
    {
        public Object a,b;
        public BusinessDAL()
        {
            a = new Object();
            b = new Object();
        }

        public void Save()
        {
                using(var dbObj1 = new DAL.Class1())
                {
                    dbObj1.Save(a);
                    using(var dbObj2 = new DAL.Class2())
                    {
                        dbObj2.Save(b);
                    }
                }
        }
    }
} 
```

我想要的是在同一个 TransactionScope 内调用两个 Save 函数的方法。

我不知道如何使用 EF 做到这一点。我已经研究过使用 TransactionScope 类，但我无法理解它是如何工作的。

我一直在研究使用`entities.Connection.BeginTransaction()`但返回 a`DbTransaction`并且`TransactionScope`只接受类型`Transaction`Class

任何可以以正确方式指出我的帮助或指示都会真正有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:07:51.950

如果在打开连接时存在环境事务，则连接将自动加入此事务。这也适用于 ObjectContext - 当您调用 ObjectContext.SaveChanges 时，它会自动将连接登记到环境事务中。因此，我认为这应该有效：

```
using(var transaction = new TransactionScope)
{
   using(var class1 = new Class1())
   {
       class1.Save(x);
   }

   using(var class2 = new Class2())
   {
       class2.Save(y);
   }

   transaction.Complete();
} 
```

# php - 从网站上多个页面上出现的 DIV 中提取文本，然后输出到 .txt？

> ID：10295669
> 
> 赞同：0
> 
> 时间：2012-04-24T09:58:57.163
> 
> 标签：php, html, web, web-crawler

只是从一开始就注意，内容是无版权的，我想自动化获取文本以用于项目目的的过程。

我想从一个特定且重复出现的 DIV 中提取文本（*这归因于它自己的“类”，以防万一它更容易*）坐在一个简单设计的网站的每个页面中。

网站上有一个存档页面，其中列出了包含我想要的内容的所有页面。

该网站是 www.zenhabits.net

我想这可以通过某种脚本来实现，但不知道从哪里开始。

我很感激任何帮助。

-内森。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:19:52.250

这很简单。

首先，从该站点获取所有链接，并将它们全部放入一个数组中：

```
set_time_limit(0);//this could take a while...

ignore_user_abort(true);//in case browser times out

$html_output=file_get_contents("http://zenhabits.net/archives/");

# -- Do a preg_match on the html, and grab all links:
if(preg_match_all('/<a href=\"http:\/\/zenhabits.net\/(.*)\">/',$html_output,$matches)) {
# -- Append Data To Array
foreach($matches[1] as $secLink) {  
    $links[] = "http://zenhabits.net/".$secLink;
}
    } 
```

我为你测试了这个，并且：

```
//first 3 are returning something weird, but you don't need them - so I shall remove them xD
unset($links[0]);
unset($links[1]);
unset($links[2]); 
```

不，这一切都完成了，是时候浏览所有这些链接（在数组 $links 中），并获取其内容：

```
foreach($links as $contLink){

$html_output_c=file_get_contents("$contLink");

    if(preg_match('|<div class=\"post\">(.*)</div>|s',$html_output_c,$c_matches)) {
    # -- Append Data To Array   
echo"data found <br>";
    $contentFromPage[] = $c_matches[1];
    }
else{echo "no content found in: $contLink -- <br><br><br>";}
}//end of foreach 
```

我基本上只是为你写了一个完整的爬虫脚本..

现在，循环内容数组，并用它做任何你想做的事情（这里我们将把它放到一个文本文件中）：

```
//$contentFromPage now contains all of div class="post" content (in an array) - so do what you want with it

    foreach($contentFromPage as $content){

    # -- We need a name for each text file --
$textName=rand()."_content_".rand().".txt";//we'll just use some numbers and text

//define file path (where you want the txt file to be saved)
$path="../";//we'll just put it in a folder above the script
$full_path=$path.$textName; 

// now save the file..

file_put_contents($full_path,$content);

//and that's it

    }//end of foreach 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:34:27.367

您也可以使用 SimpleHTML DOM Parser 脚本来提取内容。这是一个非常有用的脚本，我已经使用了 1.6 年。[您可以从http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)下载脚本。它有很好的例子记录。希望这将帮助您解决您的问题。

# java - 更新的 eclipse、adt、Libgdx 无法在 android 上编译

> ID：10295672
> 
> 赞同：1
> 
> 时间：2012-04-24T09:59:03.713
> 
> 标签：java, android, eclipse, libgdx

我目前正在使用 libgdx 来编写我正在编写的游戏，我从大约 2 个月前开始继续编写这个游戏，所以我启动了 eclipse，更新了所有内容（花了一段时间），然后继续在 pc 上编程，修复了一些错误和添加东西。后来我尝试在我的 android (Galaxy Nexus) 上运行它，但出现错误：

```
04-24 09:51:57.620: E/dalvikvm(19561): Could not find class 'com.thundergodpc.ThunderGod', referenced from method com.thundergodandroid.ThunderGodActivity.onCreate
04-24 09:51:57.620: W/dalvikvm(19561): VFY: unable to resolve new-instance 616 (Lcom/thundergodpc/ThunderGod;) in Lcom/thundergodandroid/ThunderGodActivity;
04-24 09:51:57.620: D/dalvikvm(19561): VFY: replacing opcode 0x22 at 0x0003
04-24 09:51:57.620: D/dalvikvm(19561): DexOpt: unable to opt direct call 0x19b2 at 0x05 in Lcom/thundergodandroid/ThunderGodActivity;.onCreate
04-24 09:51:57.620: D/dalvikvm(19561): Trying to load lib /data/data/com.thundergod/lib/libgdx.so 0x41817918
04-24 09:51:57.628: D/dalvikvm(19561): Added shared lib /data/data/com.thundergod/lib/libgdx.so 0x41817918
04-24 09:51:57.628: D/dalvikvm(19561): No JNI_OnLoad found in /data/data/com.thundergod/lib/libgdx.so 0x41817918, skipping init
04-24 09:51:57.628: D/AndroidRuntime(19561): Shutting down VM
04-24 09:51:57.628: W/dalvikvm(19561): threadid=1: thread exiting with uncaught exception (group=0x40a5a1f8)
04-24 09:51:57.698: E/AndroidRuntime(19561): FATAL EXCEPTION: main
04-24 09:51:57.698: E/AndroidRuntime(19561): java.lang.NoClassDefFoundError: com.thundergodpc.ThunderGod 
```

我想也许我在桌面上使用的是 1.7，但我使用的是 1.6 JDK 合规性，所以这应该不是问题。我有点沮丧，所以我再次尝试按照基本安装教程进行操作，但我遇到了同样的错误。所以最后我想到在这里发帖，有人可以说明如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:15:55.063

我想我知道你的答案。你不能运行你的android项目，但你的java项目运行良好。（如果我理解得很好）。看[这里](https://stackoverflow.com/questions/10165471/android-application-using-libgdx-crashes-since-update-to-adt-17/10166416#10166416)。

无论如何，我也有这个问题。我对你说因为我自己解决了这个问题。如果您的 DDMS 不起作用，您可以将旧的 adb.exe 复制到新的更新中。（如果你有这个问题）

也许在完成这项工作之后，您仍然无法运行您的项目。所以你必须[下载](http://www.badlogicgames.com/wordpress/?p=2381)最新的 libgx 库并将它们替换为旧库。java 库和 android 库。然后你可以运行它们。

# php - Magento 供应商名单。

> ID：10295675
> 
> 赞同：0
> 
> 时间：2012-04-24T09:59:28.287
> 
> 标签：php, magento-1.4

一直试图让它工作，如果是我，代码或安装都无法解决。基本上，我正在尝试获取系统中所有供应商的列表。Magento 1.4.0.1 正在使用中。我曾尝试使用[Magento Wiki](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/catalog/get_manufacturers_and_any_attribute_list)上的代码，但它只返回一个空数组。按原样或修改为使用“供应商”属性。我似乎无法让它返回任何东西。谁能指出我如何获取列表的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:52:57.933

试试这个代码，它可能对你有帮助

```
$attribute = Mage::getModel('eav/config')->getAttribute('catalog_product','supplier');
foreach ( $attribute->getSource()->getAllOptions(true, true) as $option )
{
  echo $option['value'];
  echo $option['label'];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T11:05:08.950

看起来只有一种方法可以做到这一点。转储 magento 位，然后访问数据库。

```
$magentoDb = Mage::getSingleton( 'core/resource' )->getConnection( 'core_write' );

$results = $magentoDb->fetchAll('SELECT DISTINCT(`value`) AS supplierName FROM `catalog_product_entity_varchar` WHERE `attribute_id` = 525 ORDER BY supplierName'); 
```

将列表作为一个直数组获取。然后可以根据需要输出。525 的属性 id 来自 eav_attribute 表，不知道它是否对所有系统都相同。

# java - 我如何停止重复调用 java paint() 替换最后一个？

> ID：10295676
> 
> 赞同：1
> 
> 时间：2012-04-24T09:59:29.707
> 
> 标签：java, swing, user-interface

我创建了一个带有自定义面板类的面板的窗口，并根据数组数据在其上绘制圆圈。如何让两组圆圈都留在屏幕上？

```
import java.awt.Color;
import java.awt.*;
import javax.swing.*;

class DataPaint extends JPanel {
    static int offsetY = 0;
    int leftX = 20;
    int[] guessColours;
    Color purple = new Color(155, 10, 255);
    Color pink = new Color(255, 125, 255);
    Color[] Colours = { Color.blue, Color.cyan, Color.green, Color.orange,
            pink, purple, Color.red, Color.yellow };

    public DataPaint() {
        setBackground(Color.WHITE);
    }

    public void paintClues(int[] guessColours) {
        this.guessColours = guessColours;
        offsetY += 30;
    }

    // naive attempt to make it work !!!!
    // what is diff between paintComponent and paint?
    public void update(Graphics g) {
        paintComponent(g);
    }

    // paint circles based on array data
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2 = (Graphics2D) g;

        for (int i = 0; i < guessColours.length; i++) {
            g2.setPaint(Colours[guessColours[i]]);
            g2.fillOval(leftX + (i * 30), offsetY, 20, 20);
        }
    }

    // create window with panel and paint circles on it based on array data
    public static void main(String args[]) {
        JFrame frame = new JFrame("data paint");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300, 300);

        DataPaint panel = new DataPaint();
        frame.add(panel);
        frame.setVisible(true);

        int[] cols = { 2, 4, 5, 3, 6 };
        int[] cols2 = { 1, 3, 7, 3, 4 };
        // the second call replaces the first call on the panel?
        panel.paintClues(cols);
        panel.paintClues(cols2);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:22:01.410

你不阻止它。Swing 和大多数 GUI 框架的工作方式是该`paintComponent`方法或其类似物总是应该*从头开始绘制所有内容*。

有几个原因。一个是如果调整了窗口大小，或者发生了任何其他类型的布局更改，或者如果正在绘制的数据集以复杂的方式更改，则无论如何您都需要能够重绘。此外，一些窗口系统甚至不会永久存储在窗口中绘制的内容，因此如果您的窗口被覆盖然后未被覆盖，您需要能够重绘。可以有一个具有永久图像的组件，您可以在其中绘制，但这不是通常的处理方式，并且效率较低，除非您正在编写，例如，绘画程序。

更改您的数据结构，以便保留所有信息，并编写您的数据结构，以便`paintComponent`每次**调用时都会在屏幕上绘制您想要的所有内容**。

（有一些改进可以使复杂图形的部分更新变得高效，但您不必担心这些，因为这是一个非常简单的情况。如果您*确实*需要这样做，您会要求 Swing 重新绘制一个组件的小区域（例如 with `JComponent.repaint(Rectangle r)`; 然后它会在调用您的`paintComponent`方法时自动禁止绘制到该区域之外的区域。这可以很好地防止闪烁并节省一些填充工作；然后如果它对效率真的很重要，请在 paintComponent 内部将该**剪辑**区域（`Graphics.getClip()`_ **_*****然后*在重要时进行优化。）**

 **在您的特定示例中，我认为它旨在成为 Mastermind 游戏（您应该提前提及以帮助我们阅读您的代码），将`cols`其`cols2`放入`int[][]`DataPaint 的字段中，然后使用其中的循环`paintComponent`来读取每个子-array 在该数组中并绘制所有这些。**

# php - 相关选择输入

> ID：10295677
> 
> 赞同：0
> 
> 时间：2012-04-24T09:59:29.940
> 
> 标签：php, javascript, html, ajax

任何人都可以帮我解决这个问题。为了显示来自 MySql 数据库的结果，我必须选择学校、班级、科目和考试。但是列出所有课程或所有考试并不是很实用，所以我想做另一个功能，当我在第一个选择框中选择一些学校时，它会在第二个选择框中只显示所选学校的课程。

我的代码是：

```
 <div id="allselects">
<form action="viewing.php" method="post" name="filt">
<div class="multsarrange">
<h1 class="choosetext" >Chose Schools</h1>
<select class="multipleselect"  name="schools[]" size="8" multiple="multiple" id="shkll">
  <?php

                        $sql = "SELECT * FROM schools ";
                        $scc=mysql_query($sql);
                        while ($db_f = mysql_fetch_assoc($scc)) {
                        $schcd=$db_f['schoolcode'];
                        $schc=$db_f['schoolname'];
                        echo "<option  value=$schcd >$schc</option>";
                            } 
                        ?>
  </select>
</div>
<div class="multsarrange" id="clasaajax">
<h1 class="choosetext" >Chose an Classes</h1>
<select class="multipleselect" name="classes[]" size="8" multiple="multiple" ">
<?php

                        $c = "SELECT * FROM classes ";
                        $cl=mysql_query($c);
                        while ($db_f = mysql_fetch_assoc($cl)) {
                        $clsc=$db_f['schoolID'];
                        $claid=$db_f['classID'];
                        $clay=$db_f['year'];
                        $clanm=$db_f['className'];
                        $name=schoolidton($clsc)."  ".$clay." ".$clanm;
                        echo "<option  value=$claid >$name</option>";
    } 
?>
</select>
</div>
<div class="multsarrange">
<h1 class="choosetext" >Chose Subjects</h1>
<select class="multipleselect" name="subjects[]" size="8" multiple="multiple">
<?php

                        $sb = "SELECT * FROM subjects ";
                        $sbi=mysql_query($sb);
                        while ($db_f = mysql_fetch_assoc($sbi)) {
                        $sbnm=$db_f['subjectName'];
                        $sbid=$db_f['subjectID'];
                        echo "<option  value=$sbid >$sbnm</option>";
                            } 
                        ?>
</select>
</div>
<div class="multsarrange">
<h1 class="choosetext" >Chose Exams</h1>
<select class="multipleselect" name="exams[]" size="8" multiple="multiple">
<?php

                        $e = "SELECT * FROM exams ";
                        $ex=mysql_query($e);
                        while ($db_f = mysql_fetch_assoc($ex)) {
                        $id=$db_f['examID'];
                        $sub=$db_f['subjectID'];
                        $desc=$db_f['description'];
                        $year=$db_f['year'];
                        $data=$db_f['data'];

                        $exnam=subidton($sub)." - ".$year." - ".$desc." - ".$data;
                        echo "<option  value=$id >$exnam</option>";
                            } 
                        ?>
</select>
</div>
<div id="longsubmit">
</br></br>
<input name="submit" type="submit" value="View" />
</div>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:07:03.493

您需要做的是以下内容：

1.  在 上设置事件侦听`select`器以侦听`change`事件 -[请参见此处](https://developer.mozilla.org/en/DOM/element.addEventListener)
2.  通过将选定的值发送到 PHP 脚本来处理更改事件 -[请参见此处](https://developer.mozilla.org/En/XMLHttpRequest/Using_XMLHttpRequest)
3.  使用 PHP 获取选定的值并根据需要查询数据库（您已经这样做了）
4.  如果您只是创建一个新的选择列表，则发送相关的 HTML 输出或 JS​​ON 或 XML - 这是一个简单的回显
5.  使用 JavaScript 将输出写入屏幕 - 这是基于 PHP 函数的回复创建新元素或插入 HTML 响应

在这个过程中有很多事情——每一个都有多个选项——我建议你尝试解决每一个问题，如果你遇到困难再回来提出具体问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:06:02.463

在 abc.php 上使用 ajax 获取学校的值或 id 并制作您需要的标签并将结果返回到 html 函数的相关 id get_options(table,id_field,name_field,where_field,field_value,select_id,edit_id){

```
$('#'+select_id).html('<option>Loading...</option>');
$.ajax({
        type: "POST", url: "abc.php", data: "&table="+table+"&id_field="+id_field+"&name_field="+name_field+"&where_field="+where_field+"&field_value="+field_value+ "&edit_id=" + edit_id +"&get_option=1",
        complete: function(data){
             //alert(data.responseText);
                 $('#'+select_id).html(data.responseText);
        }
    }); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:06:15.907

您必须使用 AJAX 来实现这一点。

检查这个

[http://www.plus2net.com/php_tutorial/ajax_drop_down_list.php](http://www.plus2net.com/php_tutorial/ajax_drop_down_list.php)

# haskell - Haskell：在 WinGHCi 中卸载模块

> ID：10295678
> 
> 赞同：6
> 
> 时间：2012-04-24T09:59:31.980
> 
> 标签：haskell, ghc, ghci, winghci

我加载了两个模块（NecessaryModule1.hs 和 NecessaryModule2.hs 在[Haskell 中外联：在当前目录路径中加载所有文件](https://stackoverflow.com/questions/10268692/haskell-loading-all-files-in-current-directory-path)）。现在我想卸载 NecessaryModule2.hs。[我在System.Plugins.Load](http://hackage.haskell.org/packages/archive/plugins/1.5.1.4/doc/html/System-Plugins-Load.html)中找到了一个“卸载”功能，但它在 WinGHCi 中不起作用。我得到的错误信息是：

```
>unload NecessaryModule2

<interactive>:1:1: Not in scope: `unload'

<interactive>:1:8:
    Not in scope: data constructor `NecessaryModule2' 
```

我试过

```
import System.Plugins.Load 
```

但这没有用。有没有办法以上述方式卸载模块？

## -------------------------------------------------- -------------------------------------

[对里卡多的回应]

嗨，Riccardo，我尝试了你的建议，但我无法让它在 WinGHCi 中工作。我有一个文件 NecessaryModule1.hs 如下：

```
module NecessaryModule1 where

addNumber1 :: Int -> Int -> Int
addNumber1 a b = a + b 
```

我通过 ':cd' 命令找到了文件所在的位置，然后：

```
> :module +NecessaryModule1

<no location info>:
    Could not find module `NecessaryModule1':
      it is not a module in the current program, or in any known package. 
```

它是否正确？谢谢[编辑：见下文更正]

## -------------------------------------------------- -------------------------------------

[以上更正]

只是为了解释为什么上面是不正确的（正如 Riccardo 所解释的那样），需要做的是以下几点：

如果我们有一个文件 NecessaryModule1.hs 如下：

```
--NecessaryModule1.hs
module NecessaryModule1 where

addNumber1 :: Int -> Int -> Int
addNumber1 a b = a + b 
```

然后我们做：

```
> :load NecessaryModule1
[1 of 1] Compiling NecessaryModule1 ( NecessaryModule1.hs, interpreted )
Ok, modules loaded: NecessaryModule1.
> addNumber1 4 5
9
> :module -NecessaryModule1
> addNumber1 4 5

<interactive>:1:1: Not in scope: `addNumber1' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T10:02:41.103

**已安装的模块**

您必须使用 ghci 的命令来加载（`:module +My.Module`）和卸载（`:module -My.Module`）已安装的模块。你也可以使用`:m`而不是`:module`为了写得更少，像这样：

```
Prelude> :m +Data.List
Prelude Data.List> sort [3,1,2]
[1,2,3]
Prelude Data.List> :m -Data.List
Prelude> sort [3,1,2]

<interactive>:1:1: Not in scope: `sort' 
```

请记住，ghci 提示符总是会提醒您当前导入的模块：您可以查看它以了解要卸载的内容 `:m -Module.To.Unload`。

**特定文件**

如果您尝试加载的模块未安装在系统中（例如，您编写了源代码并简单地将文件保存在某处），您需要使用不同的命令，`:load filename.hs`. 一种更快的方法是将文件的路径直接作为命令行参数传递给`ghci`，例如`ghci filename.hs`. 如果您运行`winghci`并将其关联到`.hs`扩展名，只需双击该文件。

在这两种情况下，您都会得到一个 ghci 提示，其中指定的模块正确加载并在范围内导入（前提是您没有得到编译错误）。和以前一样，您现在可以使用`:m [+/-] My.Module`加载和卸载模块，但请注意，这与`:load`假设`:module`您已经`:load`编辑了要进入/超出范围的内容不同。

例如，如果你有`test.hs`

```
module MyModule where
import Data.List

f x = sort x 
```

您可以通过双击它（在带有winghci 的窗口上）、`ghci test.hs`在控制台中键入或通过加载`ghci`和键入`:load test.hs`（注意相对/绝对路径）来加载它。

另一个有用的 ghci 命令是`:reload`，它将重新编译您之前加载的模块。当您更改源文件并希望快速更新 ghci 中加载的模块时使用它。

```
Prelude> :load test.hs
[1 of 1] Compiling MyModule         ( test.hs, interpreted )
Ok, modules loaded: MyModule.
*MyModule> let xs = [1,2,3] in sort xs == f xs
True
*MyModule> :reload
Ok, modules loaded: MyModule. 
```

`:help`将为您提供所有可用命令的完整列表。

# asp.net - 使用文本框的值作为 chklistbox 的数据源的参数

> ID：10295679
> 
> 赞同：0
> 
> 时间：2012-04-24T09:59:32.753
> 
> 标签：asp.net, vb.net, sql-server-2005, datasource, checklistbox

我有一个带有 userloginID 文本框的登录面板。单击登录按钮时，数据源应该获取文本框中的值，并根据 userloginID 文本框中的值向 chklistbox 提供过滤后的数据。

我只在单击登录按钮时将数据源连接到 chklistbox，但应用程序仍然失败；通过以下消息：

> 设置 DbType 属性时，无法设置参数“UserLogin”的 Type 属性。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：设置 DbType 属性时，无法设置参数“UserLogin”的 Type 属性。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [InvalidOperationException：设置 DbType 属性时，无法设置参数“UserLogin”的 Type 属性。]
> System.Web.UI.WebControls.Parameter.GetValue(Object value, Boolean ignoreNullableTypeChanges) +1751307
> System.Web.UI.WebControls。 ParameterCollection.GetValues(HttpContext context, Control control) +301
> System.Web.UI.WebControls.SqlDataSourceView.InitializeParameters(DbCommand command, ParameterCollection parameters, IDictionary excludeList) +264 System.Web.UI.WebControls.SqlDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) +472
> System.Web.UI.WebControls.ListControl.OnDataBinding(EventArgs e) +95
> System.Web.UI.WebControls.ListControl.PerformSelect() +34
> System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +73
> System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +82
> System.Web.UI.WebControls.BaseDataBoundControl.OnPreRender(EventArgs e) +22 System.Web .UI.WebControls.ListControl.OnPreRender(EventArgs e) +18 System.Web.UI.WebControls.CheckBoxList.OnPreRender(EventArgs e) +20 System.Web.UI.Control.PreRenderRecursiveInternal() +80
> System.Web.UI。 Control.PreRenderRecursiveInternal() +171
> System.Web.UI.Control.PreRenderRecursiveInternal() +171
> System.Web.UI.Control.PreRenderRecursiveInternal() +171
> System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) + 842

这是登录按钮代码（onclick）：

```
Protected Sub btnLogin_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnLogin.Click
    If btnLogin.Text = "Login" Then
        btnLogin.Text = "Logout"
        PanelLogin.BackColor = Drawing.Color.LightGreen
        Me.CurrentUserLogin = Me.txtUserId.Text
        Me.chkLstClientcodes.DataBind()
        txtStatus.Text = "Logqed in as Andrew McLintock"
        'LoginSuccessInit()
        Me.chkLstClientcodes.DataSourceID = "clientcodes"
    Else
        btnLogin.Text = "Login"
        PanelLogin.BackColor = Drawing.Color.LightSalmon
        txtStatus.Text = "Not Logged In!!!"
    End If
    'Me.Page.Controls.Clear()
End 

    Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:47:24.813

如果该行在报告的上下文中有效，我将逻辑添加到引发标志的基础 SQL 中。条件格式对此进行了测试并更改了颜色。

# iphone - 除了appstore之外，有没有办法更新iphone应用程序？

> ID：10295683
> 
> 赞同：0
> 
> 时间：2012-04-24T09:59:45.680
> 
> 标签：iphone

我需要从不是来自 appstore 的 url 更新我的应用程序。

有没有办法做到这一点？给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:05:56.577

这只有在您注册了 Apple 企业开发者帐户时才有可能。然后，您可以从您控制的 URL 下载并安装您的应用程序。请注意，您只能对公司人员使用的设备执行此操作。

[https://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

绝对不可能以这种方式更新从应用商店下载的应用。

# c# - EF4：两次使用同一张表

> ID：10295688
> 
> 赞同：0
> 
> 时间：2012-04-24T09:59:53.620
> 
> 标签：c#, entity-framework, entity-framework-4

我正在使用 Oracle 数据源，只读取数据，不写入，我*无法*更改数据库上的任何内容。

想象一下有 2 个表的场景，一个课程表和一个备忘录表。

Courses 表有 2 个指向备忘录 (MemoId) 表的链接。

所以...

**课程表** CourseId Title SummaryNarrationMemoId PreCourseInformationMemo

**MemoToString 表** MemoId MemoData（二进制）

因此，出于不同的原因，课程表两次加入到备忘录表中。

我查看了两次使用同一个表的 EF 继承路由，使用备忘录表作为基础，并创建 PreCourseMemo 和 SummaryNarrationMemo，但这会在构建时引发这些错误：

我更新了模型以将两个表添加到模型中。 ![EF 中的双表](../Images/8002ad80647c8ea5533cf1fad21094e4.png)

错误 3005：从第 613 行开始映射片段时出现问题：必须为 Set MemoToStringTables 中的所有类型指定映射。在以下情况下，具有密钥 (PK) 的实体将不会往返：实体类型为 [MyModel.MemoToStringTable]

错误 3005：从第 613 行开始映射片段时出现问题：必须为 Set MemoToStringTables 中的所有类型指定映射。在以下情况下，具有密钥 (PK) 的实体将不会往返：实体类型为 [MyModel.PreCourseMemo]

错误 3005：从第 613 行开始映射片段时出现问题：必须为 Set MemoToStringTables 中的所有类型指定映射。在以下情况下，具有密钥 (PK) 的实体将不会往返：实体类型为 [MyModel.SummaryNarrationMemo]

我知道我可以为数据库上的每个视图创建一个视图，但感觉不对。：（ 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:30:00.407

如果我正确理解您的问题，它将无法正常工作。您正在尝试将继承映射到备忘录表，但要做到这一点，备忘录表必须包含特殊的鉴别器列，它将告诉 EF 它是`PreCourseMemo`或`SummaryNarrationMemo`。你不能仅仅通过与课程的关系来区分这些类型。

# sql - 单行子查询返回多行 - 如何查找重复项？

> ID：10295689
> 
> 赞同：4
> 
> 时间：2012-04-24T09:59:54.743
> 
> 标签：sql, database, oracle

我不是一个大的 ORACLE - SQL 专家，所以我希望有人知道找到导致“重复”记录的好方法：**单行子查询返回多行**错误。

这是我的声明：

```
 SELECT
    CAST(af.SAP_SID AS VARCHAR2(4000)) APP_ID,
    (SELECT DR_OPTION
       FROM
          DR_OPTIONS 
       WHERE DR_OPTIONS.ID = (
            select dr_option from applications where applications.sap_sid = af.sap_sid)) DR_OPTION
FROM
    APPLICATIONS_FILER_VIEW af 
```

它适用于我的测试系统，所以我“确定”可用数据记录中一定有错误，但我不知道如何找到那些..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T10:23:10.417

试试这个查询：

```
select applications.sap_sid, count(dr_option) 
from applications 
group by applications.sap_sid 
having count(dr_option) > 1 
```

这应该为您提供重复行的 sap_sid

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:05:59.890

我建议简化您的查询：

```
SELECT      CAST(af.SAP_SID AS VARCHAR2(4000)) APP_ID,
            dr.DR_OPTION
FROM        APPLICATIONS_FILER_VIEW af
INNER JOIN  applications a ON af.sap_sid = a.sap_sid
INNER JOIN  DR_OPTIONS dr ON a.dr_option = dr.ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:13:14.840

我会调查你跑步时得到的结果：

```
select dr_option from applications where applications.sap_sid = af.sap_sid 
```

但是您可以强制只返回一行（我认为这是一种软糖，并且不建议使用它至少添加一个 order by 以对返回的行进行一些控制），例如：

```
SELECT
CAST(af.SAP_SID AS VARCHAR2(4000)) APP_ID,
(SELECT DR_OPTION
   FROM
      DR_OPTIONS 
   WHERE DR_OPTIONS.ID = (
        select dr_option 
        from applications 
        where applications.sap_sid = af.sap_sid
            and rownumber = 1)
   ) DR_OPTION
FROM
   APPLICATIONS_FILER_VIEW af 
```

（未测试只是用谷歌搜索了如何限制 oracle 中的结果）

如果您解决了数据问题（根据 ABCades 评论），那么我建议您根据 weenoid 的回答将其转换为使用连接。这也将突出未来可能出现的其他数据问题。

简而言之：我从来没有以这种方式修复过任何东西。真正的答案是调查返回的多行并决定你想要做什么：

1.  添加更多 where 子句
2.  排序结果，只选择第一行
3.  实际上保留重复项，因为它们代表了您以前没有想到的场景

# iphone - iOS UIWebview 忽略 CSS 行高

> ID：10295690
> 
> 赞同：0
> 
> 时间：2012-04-24T10:00:04.260
> 
> 标签：iphone, objective-c, css, ios, uiwebview

我使用 HTML 编辑器创建了一些 Web 内容，并将其加载到`UIWebView`. 除了一点点之外，一切似乎都运行良好。CSS 正在加载，但`UIWebView`忽略 line-height CSS 属性。字体大小被正确拾取

我的正文 CSS 如下：

```
body {
    color: #333;
    text-align: centre;
    padding: 0;
    font: 0.75em/0.8em "Lucida Grande", Lucida, Verdana, sans-serif;
    margin: 0 0 0;
} 
```

我也尝试过添加特定的`line-height: 80%;`行，但这没有什么区别。`UIWebView`如果我将留置权高度设置为 0.8em 或 1.5em，则以完全相同的方式呈现文本！

当我在 Mac 上的 Safari 中加载 HTML 时，它会正确显示，所以我认为 HTNML 没问题，其他文本没有从其他 CSS 语句继承。我不知道可能出了什么问题。

有任何想法吗？

谢谢克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:18:05.343

我已经在真实设备上尝试过，它可以正确呈现。这是一个模拟器问题:(

我使用的是 Xcode 4.3.2 和运行 iOS5.1 的模拟器。

我将把它作为苹果的一个错误提出来，但希望这个答案能在未来对其他人有所帮助！

# magento - 产品图片在前端和后端都没有显示

> ID：10295697
> 
> 赞同：0
> 
> 时间：2012-04-24T10:00:16.440
> 
> 标签：magento

我已经安装了 magento 版本 1.3.2.4。一切正常，除了图片上传。图像已成功上传并保存在临时文件夹中，但未显示在后端和前端。我在小图像文件夹中看不到任何内容。尝试在媒体文件夹中重命名 htaccess 并尝试了所有可能的更改。我使用的 Flash 版本是 11.1。如果我能得到任何帮助，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:32:52.340

有几件事值得一试。

1.  你的缓存启用了吗？如果您的管理员 -> 系统 -> 缓存管理
2.  你清除缓存了吗？在同一个地方你可以清除它
3.  您是否使用 Firebug 或查看源代码检查了图像 url？如果您的 url 错误，那么您可能需要在数据库中更新它，然后清除缓存

# mysql - MySql：对某些用户隐藏某些表

> ID：10295707
> 
> 赞同：1
> 
> 时间：2012-04-24T10:00:44.173
> 
> 标签：mysql, mysql-management

我想对某些用户隐藏数据库中的某些表（某些定义表）。有这个**mysql.tables_priv**表是空的。我应该在该表中插入一些东西以使其发生吗？'table_priv'列的值应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:20:05.693

如果 tables_priv 为空，我相信这意味着没有为该数据库表授予权限。您可以进行快速测试并将 database.table_name 上的选择授予用户，并查看该表中是否出现一行。但通常您对表格的授权出现在该表格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:25:13.797

您应该查看 SQL GRANT 命令。使用 GRANT，您可以像这样为用户分配权限：

```
GRANT SELECT ON table TO user; 
```

# javascript - ASP.NET。服务器端验证和客户端验证很好地协同工作的最佳方式是什么

> ID：10295708
> 
> 赞同：0
> 
> 时间：2012-04-24T10:00:48.313
> 
> 标签：javascript, asp.net, validation

我有一个网络表单应用程序。

在客户端，我使用自定义 JavaScript 验证来突出显示文本框，并在更改文本或单击提交按钮时显示验证消息。

服务器端验证在提交时进行。它带回消息列表（字符串）以防止系统保存表单。

客户端验证是通用的，例如检查“必填字段”，“字数限制”，而服务器验证需要处理数据记录，例如“现有名称”，“当表中有相关​​记录时，用户必须指定选项'A'乙。”</p>

服务器端验证的缺点是它只带回一个消息摘要，而不能在文本框旁边显示消息。（服务器端如何知道每个控件 id 或在哪里显示每个 msg？）

服务器端和客户端验证如何协同工作以在每个文本框上显示消息？.net 有什么好的设计或架构吗？确保所有客户端验证都将以任何方式在服务器端重复。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:07:09.557

IMO ASP.NET 验证器非常好，您可以使用`Page.IsValid`.

如果您不检查每个控件的服务器值并显示消息框或其他任何内容，那么您可以使用`CustomValidator`并使用 ajax 调用一些服务器端方法并将其用于验证。

这是`CustomValidator`调用服务器端 ashx 处理程序以检查邮件地址是否有效的 JavaScript 函数示例，这只是一个示例，您可以使用 ASP.NET 提供的其他方法来调用服务器端（服务、页面方法等）

**请注意：这不是服务器端验证**的替代品，您仍然需要它，因为这很容易避免。

```
function IsEmailValid(val, args) {

  var strUrl = "/SiteHandler.ashx?CheckEmail=" + args.Value;
  var strReturn = "";

  $.ajax({
           url: strUrl, 
           success: function (html) { strReturn = html; }, 
           async: false
         });

  args.IsValid = strReturn == "true";
} 
```

将该函数设置为自定义验证器：

```
customValidator.ClientValidationFunction = "IsEmailValid"; 
```

在 ashx 处理程序的服务器端：

```
public void ProcessRequest(HttpContext context)
{
  if (context.Request.Params["CheckEmail"] != null)
  {
    if (CallSomeCustomLogicAndReturnIsMailOK(context.Request.Params[CheckEmail]))
      context.Response.Write("true");
    else
      context.Response.Write("false");
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:08:26.327

一个好的解决方案是使用 AJAX 提交表单。您可以使用许多可用的库之一，或者扩展您的自定义 javascript 解决方案来实现它。如果服务器验证失败，您可以连接以显示与客户端验证相同的消息。你说得对，在这两种情况下，消息应该是相同的。用户不在乎验证是否在服务器端或客户端失败。

# core-animation - 在ios上拉动动画

> ID：10295712
> 
> 赞同：0
> 
> 时间：2012-04-24T10:01:03.013
> 
> 标签：core-animation, cakeyframeanimation

请我需要知道如何使用多个图像进行拉动效果。

这些图像必须遵循特定的路径，每个图像都像火车一样紧挨着另一个图像。

除了循环还有什么解决方案。

我想要的是那些图像同时移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:40:02.577

您想使用 CAKeyFrameAnimation，使用 CGPath 来描述您希望对象遵循的路径。

您将创建一系列动画，每个动画都使用相同的路径，但开始时间不同。棘手的一点是如何使用 beginTime。您想使用如下代码将每个动画设置为将来的某个时间：

anAnimation.beginTime = CACurrentMediaTime()+延迟；

当动画是组的一部分时，beginTime 表示为从组动画开始的秒数。但是，您不能在不同的图层上对动画进行分组，因此您需要独立启动每个动画。为此，您将 beginTime 设置为从 CACurrentMediaTime() 开始的时间。

# android - 未调用隐式意图

> ID：10295714
> 
> 赞同：5
> 
> 时间：2012-04-24T10:01:06.833
> 
> 标签：android, android-activity, android-intent, implicit

我正在尝试使用隐式意图在同一个应用程序中启动一个活动以及另一个应用程序的活动（我的另一个应用程序，而不是本机应用程序），但在任何情况下都无法成功。

这是我第一部分的示例代码（即在同一应用程序中启动活动）：

**内部活动 TESTActivity**

```
Intent intent = new Intent();
intent.setAction("com.myapp.game.myimplicit_action");
startActivity(intent); 
```

这是我对某些活动的清单文件声明，说“ImplicitActivity”具有相同的操作：

```
<activity
   android:name=".TESTActivity"
   android:label="@string/app_name" >
   <intent-filter>
   <action android:name="android.intent.action.MAIN" />
   <category android:name="android.intent.category.LAUNCHER" />
   </intent-filter>
</activity>

<activity  android:name=".ImplicitActivity">
   <intent-filter>
   <action android:name="com.myapp.test.myimplicit_action" />
   </intent-filter>
</activity> 
```

这两个活动`TESTActivity`都`ImplicitActivity`在同一个包下的同一个应用程序中。我的`ImplicitActivity`活动仍然没有被调用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T06:43:53.623

我已经弄清楚了问题所在。为面临同样问题的其他人发布答案。

我们需要添加**默认类别**以使隐式意图起作用。因此，这是同一活动的正确清单条目：

```
<activity
   android:name=".TESTActivity"
   android:label="@string/app_name" >
   <intent-filter>
   <action android:name="android.intent.action.MAIN" />
   <category android:name="android.intent.category.LAUNCHER" />
   </intent-filter>
</activity>

<activity  android:name=".ImplicitActivity">
   <intent-filter>
   <action android:name="com.myapp.test.myimplicit_action" />
   <category android:name="android.intent.category.DEFAULT" />
   </intent-filter>
</activity> 
```

# xml - 排序属性/命名空间

> ID：10295716
> 
> 赞同：1
> 
> 时间：2012-04-24T10:01:10.263
> 
> 标签：xml, xsd

我想知道是否定义了一个顺序，其中属性和命名空间定义可以出现在 xml 标记元素中。让我们假设以下元素：

```
<tag attr1="a1" attr2="a2" xmlns="ThisIsTheNameSpace">value</tag> 
```

所以问题是：必须是属性之后或之前的 xmlns，或者没关系。

```
<tag xmlns="ThisIsTheNameSpace" attr1="a1" attr2="a2">value</tag> 
```

或者它可以是这样的任何地方：

```
<tag attr1="a1" xmlns="ThisIsTheNameSpace" attr2="a2">value</tag> 
```

有什么定义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:03:54.493

根据可扩展标记语言（XML）1.0（第五版）的第 3.1 节，不，顺序无关紧要。

```
Note that the order of attribute specifications in a start-tag or empty-element
tag is not significant. 
```

[http://www.w3.org/TR/REC-xml/#sec-starttags](http://www.w3.org/TR/REC-xml/#sec-starttags)

# python - 在 django-templates / django-forms 上显示图像/背景图像

> ID：10295717
> 
> 赞同：0
> 
> 时间：2012-04-24T10:01:13.370
> 
> 标签：python, django, templates, django-forms

我是 Django 的新手，在我的 django HTML 模板/表单上显示图像时遇到问题。实际上，我无法显示它们。我已经按照这个 stackoverflow 问题/链接中所述的解决方案 -[如何在 Django 模板中包含图像文件？](https://stackoverflow.com/questions/901551/how-do-i-include-image-files-in-django-templates)

但是，当我每次测试时仍然在浏览器上看到损坏的图像。以下是与我的应用程序相关的文件的部分内容（对于查明问题有很大帮助）：

--- 设置.py ---

```
# Media and images used by the templates
MEDIA_ROOT = '/home/acresearch/djangoProjects/fringe/fringe/images'
MEDIA_URL = 'http://localhost:8000/images/' 
```

--- urls.py ---

```
urlpatterns = patterns('',
               (r'^submit/$', submit),
                       (r'^receipt/$', receipt),
                       (r'^images/(?P<path>.*)$', 'django.views.static.serve', {'document_root' : settings.MEDIA_ROOT}), 
```

---views.html ---

```
def submit(request):
    if request.method == 'POST':
        form = SubmitForm(request.POST, request.FILES)
        if form.is_valid():
            <omitted code related to handling file upload>
    else:
        form = SubmitForm()

    return render_to_response('submission_form.html', {'form' : form}) 
```

--- forms.py ---

```
class SubmitForm(forms.Form):
    email = forms.EmailField(required=True, label='Email address:')
    uploadedfile = forms.FileField(required=True, label='File to upload:') 
```

--- submit_form.html ---

```
<body bgcolor="gray" >
    <h1>GRID PE-Classifier Submission Portal</h1>
    {% if form.errors %}
        <p style="color: red;">Please correct the error{{ form.errors|pluralize }} below. </p>
    {% endif %}

    <img src="{{ MEDIA_URL }}GRID_LOGO_rev4.jpg" />
    <form enctype="multipart/form-data" action="" method="post" >
        <div class="field">
                <table>
                    {{ form.email.label }}
                    {{ form.email }}
                </table>
                <em>{{ form.email.errors }}</em>
        </div>
        <div class="field">
                <table>
                    {{ form.uploadedfile.label }}
                    {{ form.uploadedfile }}
                </table>
                <em>{{ form.uploadedfile.errors }}</em>
        </div>
        <input type="submit" value="Submit">
    </form>
</body> 
```

最后一件事，我检查了开发服务器的响应，发现应该在我的 HTML 模板/表单上显示为图像的 JPG 已作为 GET 参数传递给 views.py 的提交函数。见下文：

```
Development server is running at http://0.0.0.0:8000/
Quit the server with CONTROL-C.
[24/Apr/2012 04:55:57] "GET /submit/ HTTP/1.1" 200 621
[24/Apr/2012 04:55:57] "GET /submit/GRID_LOGO_rev4.jpg HTTP/1.1" 404 2208 
```

希望你能在这方面帮助我（因为这是我项目的最后一站，我很困惑）。另外，如果你能指出一些全面但直接的关于在 Django 上使用 CSS 和 JS 来美化你的网页的参考，那也很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:04:43.333

您还没有使用 a`RequestContext`来呈现您的模板，因此`MEDIA_URL`没有通过。

# xml - 从 XML 字符串中检索挑战元素

> ID：10295721
> 
> 赞同：0
> 
> 时间：2012-04-24T10:01:31.013
> 
> 标签：xml, c#-3.0

m 试图从 Xml 下面检索挑战元素，

我，我使用下面的代码

```
string Xmlstring = "<?xml version=\"1.0\"?><stream:stream id=\"3DAC47EA\" from=\"chat.facebook.com\" xmlns=\"jabber:client\" xmlns:stream=\"http://etherx.jabber.org/streams\" version=\"1.0\" xml:lang=\"en\"><stream:features><mechanisms xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"><mechanism>X-FACEBOOK-PLATFORM</mechanism><mechanism>DIGEST-MD5</mechanism></mechanisms></stream:features><challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">dmVyc2lvbj0xJm1ldGhvZD1hdXRoLnhtcHBfbG9naW4mbm9uY2U9QjNBOUU4NzJFQUJGNkQ5RDM0RTZDNjgzMjkyMTBGOEQ=</challenge>";

XmlDocument Doc = new XmlDocument();
Doc.LoadXml(Xmlstring); 
```

我收到错误消息“出现意外的文件结尾。以下元素未关闭：流：流。第 1 行，位置 510。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:09:05.267

错误说明了一切，您尝试加载的 xml 无效并且 Stream 元素未关闭您的 xml

```
<stream:stream id=\"3DAC47EA\" from=\"chat.facebook.com\" xmlns=\"jabber:client\" xmlns:stream=\"http://etherx.jabber.org/streams\" version=\"1.0\" xml:lang=\"en\">

<stream:features>

<mechanisms xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">

<mechanism>
X-FACEBOOK-PLATFORM
</mechanism>

<mechanism>
DIGEST-MD5
</mechanism>

</mechanisms>

</stream:features>

<challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">
dmVyc2lvbj0xJm1ldGhvZD1hdXRoLnhtcHBfbG9naW4mbm9uY2U9QjNBOUU4NzJFQUJGNkQ5RDM0RTZDNjgzMjkyMTBGOEQ=
</challenge> 
```

您的文档缺少根节点，并且“流”元素未关闭。更正 xml 文档将修复错误。

流元素必须固定为

```
<stream:stream id=\"3DAC47EA\" from=\"chat.facebook.com\" xmlns=\"jabber:client\" xmlns:stream=\"http://etherx.jabber.org/streams\" version=\"1.0\" xml:lang=\"en\">
 ...
</stream:stream> 
```

**如果**它是您的文档的根，那么您的其他元素会出现在流元素中。

当您在代码示例中将其作为字符串（在您的问题中）时，您可以像往常一样附加缺少的流，然后将其传递给 xmlreader，

**（*注意：这只是基于您的示例的解决方法，但我不明白您如何从服务器获取无效 XML 作为响应。）**

```
Xmlstring = Xmlstring + "</stream:stream>"; 
```

这使 xml 有效，您可以像往常一样将其加载到文档中。

# android - 无法将广播从活动发送到其他：android

> ID：10295724
> 
> 赞同：0
> 
> 时间：2012-04-24T10:01:41.380
> 
> 标签：android

我在将广播接收从一个活动发送到另一个活动时遇到问题..它不起作用我的代码在下面..请参考它..

发送类是：

```
 public class SendBroadcast extends Activity {
public static String BROADCAST_ACTION = "com.unitedcoders.android.broadcasttest.SHOWTOAST";

/** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button button1 = (Button) findViewById(R.id.button1);
    button1.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        sendBroadcast();
        }

    });
}

  public void sendBroadcast(){

    Intent broadcast = new Intent();
    broadcast.setAction("com.unitedcoders.android.broadcasttest.SHOWTOAST");
    sendBroadcast(broadcast);
} 
```

}

和接收类是：

```
 public class ToastDisplay extends Activity {

private BroadcastReceiver receiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.i("asdasd","sdasdasd");
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), "%%%%%%%%%%%%received", Toast.LENGTH_SHORT).show();

    }
};

@Override
protected void onResume() {
    IntentFilter filter = new IntentFilter();
    filter.addAction(SendBroadcast.BROADCAST_ACTION);
    registerReceiver(receiver, filter);

    super.onResume();
}

@Override
protected void onPause() {
    unregisterReceiver(receiver);
    super.onPause();
} 
```

}

清单文件是 ::::

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.unitedcoders.android.broadcasttest"
  android:versionCode="1"
  android:versionName="1.0">
 <uses-sdk android:minSdkVersion="4" />

  <application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".SendBroadcast"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
  <activity android:name=".ToastDisplay">

    <intent-filter>
        <action android:name="com.unitedcoders.android.broadcasttest.SHOWTOAST">  </action>
    </intent-filter>
  </activity>

  </application>
  </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:51:34.907

您尚未在 Manifest 中注册您的接收方：注册为

```
<receiver android:name="receiver">
<intent-filter>
<action
android:name="com.unitedcoders.android.broadcasttest.SHOWTOAST"/>
</intent-filter>
</receiver> 
```

# tapestry - 使用 ValueEncoders 时未设置 Tapestry Bean 属性

> ID：10295727
> 
> 赞同：0
> 
> 时间：2012-04-24T10:01:46.827
> 
> 标签：tapestry, encoder

我是挂毯的新手，刚刚创建了我的第一个应用程序。

我有一个表单，我正在创建一个由其他 2 个对象（客户和国家/地区）组成的“对象”。

```
 <t:beaneditform t:id="createMyObject" t:object="anewobject" rt:submitlabel="Create Object">
        <p:customer>
            <t:label for="Customer"/>
            <t:select t:id="customer" value="aCustomer" model="aCustomerSelectModel" encoder="customerEncoder"/>
        </p:customer>
        <p:country>
            <t:label for="Country"/>
            <t:select t:id="country" value="aCountry" model="aCountrySelectModel" encoder="countryEncoder"/>
        </p:country> 
```

在我的 javaclass 我有

```
 @Property
   private Customer aCustomer;
   @Property
   private Country aCountry;

   @Property
   private ObjectBean aNewObject;

   public New()
   {
      // create a SelectModel from the list of customers
      aCustomerSelectModel = aSelectModelFactory.create(aCustomers, "name");
      aCountrySelectModel = aSelectModelFactory.create(aCountries, "name");
   } 
```

在我的 ObjectBean 中，我有 2 个属性，国家和客户定义为具有相应 getter 和 setter 的字符串。

私人字符串 aCustomer；私人字符串一个国家；

我的 CustomerEncoder 如下所示

```
 public class CustomerEncoder implements ValueEncoder<Customer>,  ValueEncoderFactory<Customer>
{
   @Override
   public String toClient(Customer pCustomer)
   {
      // return the given object's ID
      return String.valueOf(pCustomer.getId());
   }

   @Override
   public Customer toValue(String id)
   {
      // find the color object of the given ID in the database

      return new Customer("John", "Smith");
   }

   // let this ValueEncoder also serve as a ValueEncoderFactory
   @Override
   public ValueEncoder<Customer> create(Class<Customer> type)
   {
      return this;
   }

    void onSubmitFromCreateCustomization()
   {
      String vCustomer = aNewObject.getCustomer();
      String vCountry = aNewObject.getCountry();
   } 
```

当我创建一个新对象时，我的客户和国家/地区变为空。我做错了什么，我的 ObjectBean 应该有对象而不是像 Customer 和 Country 这样的字符串吗？是我的编码器错误还是有其他问题。如果我尝试使用原始字符串而不是需要编码器的对象，则提交值。

欢迎所有帮助和评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:35:06.280

我无法对您的问题“发表评论”以向您询问一些事情（我想可能是我没有足够的声誉！），但是您的情况尚不清楚，因此我认为这可能会有所帮助。你应该注意两件事：

1.  在包含 beaneditor 的表单的准备事件中初始化您的新对象及其关联对象（客户和国家/地区）。

    @OnEvent(component="your-form-id",value=EventConstants.PREPARE)

2.  5.4 之前的 Tapestry5 版本 (http://tapestry.apache.org/release-notes-54.html) 实现了 post 后重定向机制，因此您丢失了请求数据，因此您需要**@Persist**一些页面变量以保留它们即使是一个表单提交和它的响应之间的值！

# c# - C# DataContractJsonSerializer 中空字符的 SerializationException

> ID：10295729
> 
> 赞同：0
> 
> 时间：2012-04-24T10:01:53.757
> 
> 标签：c#, .net, json

我想反序列化 C# 中 byte[] 数组中的字节流。byte[] 数组长 8196 字节，从 TCP/IP 连接中获取信息。

当我将该数组提供给 System.Runtime.Serialization.Json.DataContractJsonSerializer 的 ReadObject 方法时，它会抛出一个带有消息“遇到意外字符 '\0'”的 SerializationException。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:10:05.860

你是怎么读字符串的？通常，“\0”错误指向编码问题。字节流可以使用特定类型的编码，您要么强制使用自己的编码，要么反序列化以假定特定编码与流的实际编码不一致。

[http://social.msdn.microsoft.com/Forums/en/wcf/thread/b80c9aa7-a3d1-4aa0-b61a-35363cbc177e](http://social.msdn.microsoft.com/Forums/en/wcf/thread/b80c9aa7-a3d1-4aa0-b61a-35363cbc177e)描述了替换以下代码行的情况：

```
s = ASCIIEncoding.Default.GetString(ms.GetBuffer()); 
```

和：

```
 ms.Seek(0, SeekOrigin.Begin);
        StreamReader sr = new StreamReader(ms);
        s = sr.ReadToEnd(); 
```

解决了这个问题。也许类似的事情也适用于您的情况？

# objective-c - 在 UIWebView 和 UIViewController 之间共享数据

> ID：10295732
> 
> 赞同：1
> 
> 时间：2012-04-24T10:02:02.013
> 
> 标签：objective-c, ios

我正在开发一个 iOS 应用程序，其中包含许多 UIWebview，在一个 webView 中用户应该输入数据，我想将这些数据存储在例如 SQlite 或 Plist 中。我可以拥有数据用户输入（在 Webview 中）并在应用程序的其他部分（UIViewController）中使用它。请问这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:12:55.597

这可以通过多种方式完成，但我现在能想到的最好的方法是运行一个 JavaScript 来返回你想要的输入值。我相信方法是

```
[instanceOfWebview stringByEvakuatingJavscriptFromString:"javascript_code_here"]; 
```

这会将 JavaScript 代码的结果作为字符串返回，您可以将其接收到变量中。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:24:02.423

如果要将 webview(HTML) 中的用户输入传输到 UIview (Objective-C)，则需要以迂回的方式进行。使用以下功能：

```
- (BOOL)webView:(UIWebView *)webView2 
  shouldStartLoadWithRequest:(NSURLRequest *)request 
  navigationType:(UIWebViewNavigationType)navigationType 
```

在以下帖子中查看更多详细信息：

[如何从 JavaScript 调用 Objective-C 方法？](https://stackoverflow.com/questions/10206793/how-can-i-call-objective-c-methods-from-javascript/10273889#10273889)

# java - 如何使用 Proguard 保留扩展和实现接口的类

> ID：10295734
> 
> 赞同：2
> 
> 时间：2012-04-24T10:02:04.753
> 
> 标签：java, proguard

我需要保留所有扩展 com.opensymphony.xwork2.ActionSupport 并实现自定义接口的类。

当我尝试这个

```
-keepnames public class * extends com.opensymphony.xwork2.ActionSupport implements com.company.project.utils.Constantes {
 *; 
 } 
```

我收到以下错误：

> 期望在“实现”处打开“{”时出错

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:34:00.640

如果有记忆，您可以指定扩展另一个类的类或实现接口的类，但不能同时指定两者。该[文档](http://proguard.sourceforge.net/index.html#manual/usage.html)并没有特别清楚地说明这一点，但它暗示在那里。

有几种方法可以解决这个问题，假设您仅指定一个或另一个是不够的：

*   创建一个空的“标记”接口，并让您想要保留的类扩展它。
*   `private static final`为您要保留的每个类添加一个静态（如果您愿意，可以是）标记字段，并在 -keep 选项中指定。
*   咬紧牙关，只列出你想要保留的所有类的名称。

**编辑**

另一种选择是创建一个这样的类：

```
public abstract class Foo extends com.opensymphony.xwork2.ActionSupport implements com.company.project.utils.Constantes {
    // ...
} 
```

然后，让所有要保留的类扩展该类。然后你只需要`* extends Foo`在 -keep 选项中指定。

# algorithm - 演示良好使用相互递归的示例

> ID：10295735
> 
> 赞同：5
> 
> 时间：2012-04-24T10:02:09.327
> 
> 标签：algorithm, recursion, mutual-recursion

我想知道是否有一个非人为的例子，其中相互递归是解决问题的最优雅的解决方案，它**不能轻易地减少/内联为单个递归函数。**

我已经知道这个例子（来自[维基百科](http://en.wikipedia.org/wiki/Mutual_recursion)）

```
function even?(number : Integer)
    if number == 0 then
        return true
    else
        return odd?(abs(number)-1)

function odd?(number : Integer)
    if number == 0 then
        return false
   else
        return even?(abs(number)-1) 
```

但说真的，没有一个头脑正常的人会这样检查数字的奇偶性。

我在 SO 上查看了关于此主题的先前答案 -[是否有任何相互递归的示例？](https://stackoverflow.com/questions/2725038/are-there-any-example-of-mutual-recursion)但没有一个答案是我正在寻找的。

我知道它在递归解析中很有用——可能是实现它的唯一合乎逻辑的方式，但我需要一个更清晰、更具体的示例（最好是数学示例）。

谢谢你的帮助？

**编辑：**

由于显然每个相互递归函数的元组都可以简化为单个函数，所以我想知道是否存在使用**相互递归函数**是最好/最易读的方式的情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T11:50:53.847

用于绘制[谢尔宾斯基曲线](http://en.wikipedia.org/wiki/Sierpi%C5%84ski_curve)（和其他一些曲线）的相互递归代码看起来相当优雅。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T10:14:54.470

我相信**任何**相互递归都可以很容易地简化为一个函数：

考虑两个函数 f1 和 f2：

```
f1(p1, ..., pn) returns r1
f2(q1, ..., qm) returns r2 
```

可以统一为：

```
f12(which, p1, ..., pn, q1, ..., qn) returns (r1, r2)
    if which == 1
        <code of f1>
    else
        <code of f2> 
```

这只是最坏的情况。通常一些参数或返回值应该是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-14T09:41:07.117

一个人认为什么是“优雅”取决于个人的敏感性。但这是我的镜头。

Adam 正在尝试安排为期 6 天的考试复习。每天他都会：

1.  休息 (R)
2.  学习数学（M）
3.  学习计算（C）

亚当从不连续两天学习两个不同的科目。亚当可以通过多少种方式安排他的修订？

解决方案：

让我们使用符号`s1 = "RMCRMM"`来表示时间表。`s1`不是一个有效的时间表，因为在时间表中的某一时刻，一个主题 (M) 紧跟在另一个主题 (C) 之后。一些有效时间表的例子是：`s2 = "MMRCCR"`或`s3 = "MMRRRC"`什至`s4 = "RRRRRR"`（祝你好运`s4`！）。在每个时间表中，两个不同的科目之间必须至少有一个休息日。

我们可以使用相互递归来解决这个任务。让我们列举从 开始的日子`1, 2, ..., 6`。让我们定义三个相互递归的函数，`R(k)`，`M(k)`，`C(k)`。每个函数将计算部分计划的数量，每个长度为`k`，其中最后几天分别是“R”、“M”和“C”。我们开始吧（python）：

```
def R(k):
    if k == 1:
        return 1
    else:
        return R(k-1) + M(k-1) + C(k-1)

def M(k):
    if k == 1:
        return 1
    else:
        return R(k-1) + M(k-1)

def C(k):
    if k == 1:
        return 1
    else:
        return R(k-1) + C(k-1) 
```

然后我们可以通过评估来解决问题`R(6) + M(6) + C(6)`

这样做的原因是因为我们正在计算可能的方式来达到`k`几天的（部分）日程安排，这可能以给定的方式结束，唯一可能影响我们选择如何到达那里的事情是发生了什么在前一天。以这种方式，我们计算所有可能的时间表，并且我们只计算每个时间表一次。

例如，对于我们完成的第 3 天，比如在“C”、“XXC”，我们可以到达这样的时间表的方式数量正好是`R(2) + C(2)`，因为我们可能来自“XCC”或“XRC”时间表，但不是“XMC”。

显然，如果您想提高效率，您可能最终会使用记忆化/动态编程，但即便如此，相互递归也可能是编码问题的最易读/易理解的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:14:48.967

如果您有适当的尾调用优化，则可以进行协作多任务处理：

```
f():
    do_something()
    g()

g():
    do_something_else()
    f() 
```

如果您碰巧在 Scheme 中编写代码，则有时需要考虑这一点。

# java - JRuby：使用两个具有相同名称的方法扩展 Java 类

> ID：10295739
> 
> 赞同：2
> 
> 时间：2012-04-24T10:02:22.083
> 
> 标签：java, ruby, jruby

大家早上好，我正在尝试使用两个具有相同名称的方法来扩展一个抽象 Java 类。但只需要verride其中一个。

这是我的Java代码：

```
public abstract class ClientHandler extends Handler implements SOAPHandler<SOAPMessageContext> {
    protected boolean disable = true;
    protected X509Certificate signatureCertificate;
    protected PrivateKey privateKey;
    protected Certificate[] signatureCertificationChain;

    //Constructeur 
    protected ClientHandler(boolean disable) {
        this.disable = disable;
    }

    private boolean handleMessage(VIHF vihf) {
        //This is the beginning of the method i am trying to redefine
        X509Certificate certificate = this.signatureCertificate
        String issuer = certificate.getSubjectDN().toString();
        //some code 
        ...
    }

    public boolean handleMessage(SOAPMessageContext smc) {
        //some code
    }
  } 
```

这是我的 JRuby 代码

```
#To make parent attributes accessible from subclasses
class  ClientHandler
   field_accessor :disable, :signatureCertificate, :privateKey, :signatureCertificationChain
end

#first version referring to that post: <http://stackoverflow.com/questions/6238734/jruby-calls-  the-wrong-method>

module RubyClientHandler
  class RClientHandler < ClientHandler
    handleMessage =  ClientHandler.java_method :handleMessage,    java.lang.Class.for_name(Java::ComSubFolder::VIHF)]

    def handleMessage(vihf)
        super(self.disableSignature)  #is this line ok or note?

        certificate = self.signatureCertificate    #do i need to use the "self" or the "@" ?
        issuer = certificate.getSubjectDN().toString()
        ...
    end
   end
end 
```

当我尝试使用“java_method”时，我的第一个版本出现以下错误：“Java::JavaLang::Class 上的参数（org.jruby.RubyModule）没有方法'forName'”

然后我尝试了 RClientHandler 类的第二个版本

第二版：参考那个帖子：[http ://www.ruby-forum.com/topic/216636](http://www.ruby-forum.com/topic/216636)

```
 module RubyClientHandler
    class RClientHandler < ClientHandler
     def handleMessage(vihf)
         super          #line causing the error 
         klass = vihf.class

         if(klass.eql?(Java::ComSubFolder::VIHF) )
            self.java_send :handleMessage,[VIHF], vihf

            certificate = self.signatureCertificate
            issuer = certificate.getSubjectDN().toString()
            ...
         end
     end
   end
 end 
```

使用第二个版本，我得到以下异常，它指向“handleMessage”的第一行

```
HANDLER_RAISED_RUNTIME_EXCEPTION
org.jruby.exceptions.RaiseException: Native Exception: 'class java.lang.StackOverflowError';     Message: null; StackTrace: java.lang.StackOverflowError
at org.jruby.proxy.com.sub.folder.ClientHandler$Proxy0.__super$handleMessage(Unknown Source) 
```

这一行是“super”调用父类构造函数还是父“handleMessage”方法？根据父类构造函数在这里调用“super”时是否需要一些参数？

任何帮助将不胜感激，告诉我如何通过在 JRuby 中仅覆盖一个（或两个）“handleMessage”方法来扩展这个“ClientHandler”类。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:16:29.853

在第一个版本中，尝试将 Java 类的名称作为字符串传递：

```
java.lang.Class.for_name('Java::ComSubFolder::VIHF') 
```

更新：实际上，这是行不通的，因为那是 JRuby 命名空间，对吧？您需要该类的 Java 路径。

例子：

```
> java.lang.Class.for_name('java.lang.StringBuffer')
=> #<Java::JavaLang::Class:0x628d2280> 
> java.lang.Class.for_name('java.util.ArrayList')
=> #<Java::JavaLang::Class:0x5057f57f> 
```

# android - 如何在 android 中使用 saxparser 在 40 秒内从 url 解析大型 xml 文件（3.8 mb）？

> ID：10295745
> 
> 赞同：0
> 
> 时间：2012-04-24T10:02:41.373
> 
> 标签：android, saxparser

我正在使用 sax 解析器来解析 3.8 mb 的 xml 文件。解析时的加载时间几乎是 3.5 分钟。

```
public class sentmsghandler extends DefaultHandler {
public folder folderobj;
public Contact contact;
public Parent parent;
public Student student;
private StringBuilder builder;
Boolean repeat;

public folder getfolder() {
    return folderobj;
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    // TODO Auto-generated method stub
    super.endElement(uri, localName, qName);
    // Log.i("testing parent contact",localName);
    if (this.folderobj != null) {

        String st = builder.toString();
        if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.SchoolName.toUpperCase())) {
            folderobj.setSchoolName(st);
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.ParentCode.toUpperCase())) {
            parent.setParentCode(st);
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.FamilyCode.toUpperCase())) {
            if (!repeat) {
                parent.setFamilyCode(st);
            } else {
                student.setFamilyCode(st);
            }
        }

        else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.FamilyName.toUpperCase())) {

            if (!repeat) {
                parent.setFamilyName(st);
            } else {
                student.setFamilyName(st);
            }
        }

        else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.GivenNames.toUpperCase())) {

            if (!repeat) {
                parent.setGivenNames(st);
            } else {
                student.setGivenNames(st);
            }
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.ParentType.toUpperCase())) {
            parent.setParentType(st);
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.EmailAddress.toUpperCase())) {
            parent.setEmailAddress(st);
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.MobilePhone.toUpperCase())) {
            parent.setMobilePhone(st);
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.LandLineNumber.toUpperCase())) {
            parent.setLandLineNumber(st);
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.Primary.toUpperCase())) {
            parent.setPrimary(st);
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.StudentCode.toUpperCase())) {
            student.setStudentCode(st);
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.SchoolYearLevel.toUpperCase())) {
            student.setSchoolYearLevel(st);
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.RollClass.toUpperCase())) {
            student.setRollClass(st);
        } else if (localName.toUpperCase().equalsIgnoreCase(
                BaseFeedParser.House.toUpperCase())) {
            student.setHouse(st);
        }

    }
    builder.setLength(0);
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // TODO Auto-generated method stub
    super.startElement(uri, localName, qName, attributes);

    if (localName.toUpperCase().equalsIgnoreCase(
            BaseFeedParser.Folder.toUpperCase())) {
        folderobj = new folder();
    }

    else if (localName.toUpperCase().equalsIgnoreCase(
            BaseFeedParser.Contact.toUpperCase())) {
        contact = new Contact();
        folderobj.getContact_list().add(contact);
    } else if (localName.toUpperCase().equalsIgnoreCase(
            BaseFeedParser.Parent.toUpperCase())) {
        parent = new Parent();
        repeat = false;
        contact.getParent_list().add(parent);
    } else if (localName.toUpperCase().equalsIgnoreCase(
            BaseFeedParser.Student.toUpperCase())) {
        student = new Student();
        repeat = true;
        parent.getStudent_list().add(student);
    }

}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    // TODO Auto-generated method stub
    super.characters(ch, start, length);
    builder.append(ch, start, length);
}

@Override
public void startDocument() throws SAXException {
    // TODO Auto-generated method stub
    super.startDocument();
    folderobj = new folder();
    builder = new StringBuilder();
    repeat = false;
} 
```

}

Saxfeedparser.java

```
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

public class SaxFeedParser extends BaseFeedParser {

    public SaxFeedParser(String feedUrl) {
        super(feedUrl);
        // TODO Auto-generated constructor stub
    }

    public folder parse() throws RuntimeException {
        SAXParserFactory factory = SAXParserFactory.newInstance();
        sentmsghandler handler = null;
        try {
            SAXParser parser = factory.newSAXParser();
            handler = new sentmsghandler();
            parser.parse(this.getInputStream(), handler);

        } catch (Exception e) {
            return null;
        }
        return handler.getfolder();
    }

} 
```

Basefeedparser.java

```
public abstract class BaseFeedParser implements SentParser {

    // names of the XML tags
    static final String Folder = "Folder";
    static final String SchoolName = "SchoolName";
    static final String Contact = "Contact";
    static final String Parent = "Parent";
    static final String ParentCode = "ParentCode";
    static final String FamilyCode = "FamilyCode";
    static final String FamilyName = "FamilyName";
    static final String GivenNames = "GivenNames";
    static final String ParentType = "ParentType";
    static final String EmailAddress = "EmailAddress";
    static final String MobilePhone = "MobilePhone";
    static final String LandLineNumber = "LandLineNumber";
    static final String Primary = "Primary";
    static final String Student = "Student";
    static final String StudentCode = "StudentCode";
    static final String SchoolYearLevel = "SchoolYearLevel";
    static final String RollClass = "RollClass";
    static final String House = "House";

    //

    final URL feedUrl;

    protected BaseFeedParser(String feedUrl) {
        try {
            this.feedUrl = new URL(feedUrl);
        } catch (MalformedURLException e) {
            throw new RuntimeException(e);
        }
    }

    protected InputStream getInputStream() {
        try {
            return feedUrl.openConnection().getInputStream();
        } catch (IOException e) {
            return null;
        }
    }
} 
```

在活动中调用代码

```
SaxFeedParser sax = new SaxFeedParser("link");// /check parents.xml
folder result = sax.parse(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:23:24.840

您可以改进的一件事：

而不是做

```
localName.toUpperCase().equalsIgnoreCase(
            BaseFeedParser.Contact.toUpperCase() 
```

一直保存`BaseFeedParser.Contact`为大写，`localName`只转换一次为大写

```
localName = localName.toUpperCase();
if (localName.equals(BaseFeedParser.Folder)) {
    // something
} else if (localName.equals(BaseFeedParser.Contact)) {
   // something else
} else if (localName.equals(BaseFeedParser.Parent)) {
  // something here
} 
```

这应该会给你一点速度提升。

如果您知道大小写不会改变，您甚至可以完全省略大写字母。

另一种可能加快字符串比较的技术是使用 HashMap

```
private static final int CASE_FOLDER = 1;
private static final int CASE_SCHOOLNAME = 2;
private static final HashMap<String, Integer> MAP = new HashMap<String, Integer>();
static {
    MAP.put("FOLDER", CASE_FOLDER);
    MAP.put("SCHOOLNAME", CASE_SCHOOLNAME);
} 
```

然后做

```
localName = localName.toUpperCase();
int match = MAP.get(localName);
switch (match) {
    case CASE_FOLDER:
        // do something
        break;
 // etc
} 
```

# jquery - Fancybox 2 高度不起作用

> ID：10295746
> 
> 赞同：12
> 
> 时间：2012-04-24T10:02:41.493
> 
> 标签：jquery, fancybox

我试图从我的fancybox 中获得两个不同的高度，具体取决于客户端点击的链接，但由于某种原因，高度只会保持 100%。达不到我想要的高度

这是我的代码

```
$('.fancyboxhd').fancybox({
  width: 1287,
  height: 720
});
$('.fancyboxsd').fancybox({
  width: 640,
  height: 360,
}); 
```

这是一个 iFrame 内容

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-24T17:38:14.670

**（*请参阅下面的编辑以获取改进的答案*）**

对于 iframe 内容，您的 html 应如下所示

```
<a class="fancyboxhd fancybox.iframe" href="hdfile.html">hd</a>
<a class="fancyboxsd fancybox.iframe" href="sdfile.html">sd</a> 
```

然后将这两个选项添加到您的脚本中

```
fitToView   : false,
autoSize    : false 
```

所以你的脚本应该看起来像

```
$(document).ready(function(){
 $('.fancyboxhd').fancybox({
   width : 1287,
   height : 720,
   fitToView : false,
   autoSize : false
 });
 $('.fancyboxsd').fancybox({
   width: 640,
   height: 360,
   fitToView : false,
   autoSize : false
 });
}); 
```

**### 编辑###**：（2013 年 9 月 5 日）

可以使用锚中的 (HTML5)`data-*`属性来改进和简化代码，并且`class`对于两个选项都一样，例如：

HTML

```
<a class="fancybox fancybox.iframe" data-width="1287" data-height="720" href="hdfile.html">HD</a>
<a class="fancybox fancybox.iframe" data-width="640"  data-height="360" href="sdfile.html">SD</a> 
```

JS

```
$('.fancybox').fancybox({
    fitToView: false,
    autoSize: false,
    afterLoad: function () {
        this.width = $(this.element).data("width");
        this.height = $(this.element).data("height");
    }
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/hvGRv/)**

**注意**：在此编辑时，演示使用了 fancybox v2.1.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T16:04:18.140

对于 v2.1.5，您可以使用 html 元素的 id 来使用它。

```
<a id="item1" class="fancybox" href="http://fiddle.jshell.net/YtwCt/show/">Open 500x200</a>

<br />

<a id="item2" class="fancybox" href="http://fiddle.jshell.net/YtwCt/show/">Open 200x500</a>

<div id="test" style="display:none">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce pulvinar, nulla eu interdum posuere, nisi mauris cursus nisi, nec faucibus nibh urna nec turpis.

$(".fancybox-wrap").draggable();
$(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        type: 'iframe',
        autoSize : false,
        beforeLoad : function() {         
            if ($(this.element).attr('id') == 'item1') {
                this.width  = 500;
                this.height = 200;
            }
        else {
                this.width  = 200;
                this.height = 500;
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-05T07:31:50.677

设置**自动缩放：假，**

```
$('.fancyboxhd').fancybox({
  width: 1287,
  height: 720,
  autoScale : false,
}); 
```

# perl - Perl：从命令行读取路径

> ID：10295748
> 
> 赞同：0
> 
> 时间：2012-04-24T10:02:56.083
> 
> 标签：perl

我是 perl 的新手，我在一件事上遇到了一些问题。

我有代码：

```
$original_file = "y:\\Users\\XXX\\perlScript\\test1.xml";
$new_file = "y:\\Users\\XXX\\perlScript\\summary_test1.xml";
copy($original_file, $new_file) or die "File cannot be copied"; 
```

我需要从 cmd 命令行读取路径（我使用批处理文件）。例如：

```
>summary.bat c>\path\file_name.xml 
```

复制后我想创建`summary_file_name.xml`到同一个文件夹

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:46:59.607

您是在问 Perl 程序如何获取其命令行参数吗？您会在`@ARGV`数组中找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:37:35.990

你想用`File::Basename`. 这是 Perl 中的标准库，至少早在 5.14 时，所以您不需要安装任何新的东西。

```
use File::Basename;
my($filename, $directories, $suffix) = fileparse($original_file);
my $new_file = $directories . "/summary.xml"; 
```

有关详细信息，请参阅[Perl 文档](http://perldoc.perl.org/File/Basename.html)。

# java - 创建进度条 - 刷新 JDialog

> ID：10295749
> 
> 赞同：1
> 
> 时间：2012-04-24T10:02:57.067
> 
> 标签：java, swing, refresh, repaint, jdialog

我正在尝试在 Java 中实现一个进度 JDialog。我正在解析文件，我希望 JDialog 在开始解析新文件后刷新。我的问题是 JDialog 不刷新。我试图重新粉刷它，或调整它的大小，所以它会重新粉刷。我也尝试删除标签，并添加一个新标签。

ProgressDialog 类：

```
public class ProgressDialog extends javax.swing.JDialog {
    private JLabel jLabel1;

    public ProgressDialog(Window frame) {
        super(frame);
        this.setResizable(false);
        this.setLocationRelativeTo(frame);
        initGUI();
        //this.setVisible(true);

    }

    private void initGUI() {
        try {
            {
                setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
                getContentPane().setLayout(null);
                {
                    jLabel1 = new JLabel();
                    getContentPane().add(jLabel1);
                    jLabel1.setText("In Progress..");
                    jLabel1.setBounds(12, 12, 215, 52);
                    jLabel1.setHorizontalAlignment(SwingConstants.CENTER);
                }
            }
            this.setSize(255, 114);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void setText(String s){
        this.setVisible(true);
        jLabel1.setText(s);
        this.resize(this.getSize());
        this.repaint();
    }
} 
```

我如何使用它：

```
ProgressDialog pd = new ProgressDialog(frame);
for(File file:files){
    pd.setText("Parsing " + file + ".");

    ...

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:11:30.910

您应该在工作线程上执行文件解析，并在 Event Dispath 线程上更新您的进度对话框。一些值得阅读的链接：

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)
*   [如何使用进度条教程](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)：虽然它使用进度条显示进度，但您需要使用的机制是相同的。它包含一个`SwingWorker`类的例子
*   [SwingWorker javadoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)
*   [我为一个相关问题编写的一小段示例代码](https://stackoverflow.com/questions/8916721/java-swing-update-label/8917565#8917565)说明了 SwingWorker 类的使用并向用户显示进度

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T10:10:04.443

我猜您正在 EDT（事件调度线程）中执行文件解析。但是调用 repaint() 实际上会在 EventQueue 上推送一个事件，当您对 EDT 的当前调用完成时将调度该事件。由于您正在阻止 EDT，因此仅在您完成所有工作时才会发生重绘，因此您永远不会看到进度条的刷新/重绘。

您应该做的是使用 SwingWorker 将您的解析作业放在一个单独的线程中，并使 EDT 保持畅通。有很多关于如何在 SO 或 Web 上使用 SwingWorker 的示例。

# java - org.infinispan.jmx.JmxDomainConflictException：域已注册 org.infinispan 异常？

> ID：10295751
> 
> 赞同：1
> 
> 时间：2012-04-24T10:02:58.823
> 
> 标签：java, tomcat6

我将我的应用程序部署为 myApp1 在 tomcat 6 服务上。由于某些要求，我复制了 myApp1 并粘贴在 webapp 下作为 myApp2。现在我重新启动了 tomcat 并点击了 myApp1 的 URL。工作得很好。但是在点击 app2 的 url 时，我得到 org.infinispan.jmx.JmxDomainConflictException: Domain already registered org.infinispan 。下面是异常堆栈跟踪中的根本原因部分

```
 root cause 

    org.infinispan.jmx.JmxDomainConflictException: Domain already registered org.infinispan
org.infinispan.jmx.JmxUtil.buildJmxDomain(JmxUtil.java:73)
org.infinispan.jmx.CacheManagerJmxRegistration.updateDomain(CacheManagerJmxRegistration.java:92)
org.infinispan.jmx.CacheManagerJmxRegistration.buildRegistrar(CacheManagerJmxRegistration.java:86)
org.infinispan.jmx.AbstractJmxRegistration.registerMBeans(AbstractJmxRegistration.java:46)
org.infinispan.jmx.CacheManagerJmxRegistration.start(CacheManagerJmxRegistration.java:62)
org.infinispan.manager.DefaultCacheManager.start(DefaultCacheManager.java:637)
org.infinispan.manager.DefaultCacheManager.<init>(DefaultCacheManager.java:319)
org.infinispan.manager.DefaultCacheManager.<init>(DefaultCacheManager.java:283)
org.xwiki.cache.infinispan.internal.InfinispanCacheFactory.initialize(InfinispanCacheFactory.java:134)
org.xwiki.component.embed.InitializableLifecycleHandler.handle(InitializableLifecycleHandler.java:39)
org.xwiki.component.embed.EmbeddableComponentManager.createInstance(EmbeddableComponentManager.java:295)
org.xwiki.component.embed.EmbeddableComponentManager.getComponentInstance(EmbeddableComponentManager.java:358)
org.xwiki.component.embed.EmbeddableComponentManager.getComponentInstance(EmbeddableComponentManager.java:324)
org.xwiki.component.embed.EmbeddableComponentManager.lookup(EmbeddableComponentManager.java:147)
org.xwiki.component.internal.DefaultComponentManager.lookup(DefaultComponentManager.java:72)
org.xwiki.cache.internal.DefaultCacheManager.getCacheFactory(DefaultCacheManager.java:79)
org.xwiki.cache.internal.DefaultCacheManager.getCacheFactory(DefaultCacheManager.java:61)
com.xpn.xwiki.XWiki.getCacheFactory(XWiki.java:5887) 
```

有关信息，我将 Tomcat 作为服务运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:33:34.993

这很可能是由于您的两个应用程序同时运行，并试图使用相同的资源。从错误消息的外观来看，“infinispan”在启动时注册了一个 JMX 域，并且不允许这样的多个实例。

来自[谷歌](https://community.jboss.org/message/600218)：如果您想允许在配置元素中配置多个具有相同 JMX 域启用`allowDuplicateDomains`属性的实例`globalJmxStatistics`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-29T15:00:35.087

对于那些使用 Spring Boot + [Infinispan starter](https://infinispan.org/docs/dev/titles/spring_boot/starter.html)的人来说，这里是关闭 JMX 的方法：

```
@org.springframework.context.annotation.Configuration
public class InfinispanConfiguration {

    @Bean
    public InfinispanGlobalConfigurationCustomizer globalCustomizer() {
        return builder -> builder.jmx().disable();
    }
} 
```

# java - 使用 POI 为 Excel 列分配公式

> ID：10295755
> 
> 赞同：0
> 
> 时间：2012-04-24T10:03:27.703
> 
> 标签：java, excel, apache-poi, excel-formula

我想将公式 frmo B5 设置为 B10004，公式取决于上一列的值。但是公式应该适当地动态更新单元格引用

```
dvCarConstraint = 
    DVConstraint.createFormulaListConstraint(
        "INDIRECT(SUBSTITUTE($B$5, \" \", \"_\"))"
    );

addressList = new CellRangeAddressList(4, 10004, 2, 2);
dataValidation = new HSSFDataValidation(addressCarList, dvCarConstraint);
dataValidation.setSuppressDropDownArrow(false);
sheet.addValidationData(dataCarValidation); 
```

当我打开excel时，列中的所有单元格都显示`INDIRECT(SUBSTITUTE($B$5, " ", "_"))`，而我期望的是`INDIRECT(SUBSTITUTE($B$6, " ", "_")), $B$7`等等....

如何在 POI 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:14:48.357

我不知道 POI，但是在 excel 中，如果您希望根据单元格位置更新公式，您可以省略 $ 符号。你试过`INDIRECT(SUBSTITUTE($B5, " ", ""))`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-13T08:01:48.600

我知道这是一个非常古老的问题，但对于面临同样问题的其他人来说，也许可以使用这个解决方案：-

我遇到了同样的问题，在尝试了一些组合之后，这对我来说效果很好。

```
INDIRECT(UPPER($A1:$A500)) 
```

# c# - 实现 IEndpointBehavior 以扩展绑定

> ID：10295757
> 
> 赞同：1
> 
> 时间：2012-04-24T10:03:28.857
> 
> 标签：c#, wcf

是否可以通过 IEndpointBehavior 实现更改 ConnectionOrientedTransportBindingElement 的属性值（例如 ConnectionBufferSize [）](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.connectionorientedtransportbindingelement.connectionbuffersize.aspx)？

```
var host = new ServiceHost(typoef(ISomeService), new Uri(service));
var endpoint = host.AddServiceEndpoint(typeof (ISomeService), new NetTcpBinding(), string.Empty);
endpoint.Behaviors.Add(new MyCustomEndpointBehavior());
// ...

class MyCustomEndpointBehavior : IEndpointBehavior {
    // ....
    public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters) {
         // what to do here?
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:46:46.867

您不能使用行为来修改绑定内部。您需要通过配置或代码构建自定义绑定

```
 <customBinding>
  <binding name="MyCustomBinding">
   <binaryMessageEncoding />
   <tcpTransport connectionBufferSize="256192" maxOutputDelay="00:00:30" transferMode="Streamed">
   </tcpTransport>
  </binding>
 </customBinding> 
```

或代码

```
var host = new ServiceHost(typeof(Service1), new Uri("net.tcp://someservice"));

            //binding stack - order matters!
            var myCustomNetTcpBindingStack = new List<BindingElement>();

            //session - if reliable
            var session = new ReliableSessionBindingElement();
            myCustomNetTcpBindingStack.Add(session);

            //transaction flow
            myCustomNetTcpBindingStack.Add(new TransactionFlowBindingElement(TransactionProtocol.OleTransactions));

            //encoding
            myCustomNetTcpBindingStack.Add(new BinaryMessageEncodingBindingElement());

            //security
            //var security = SecurityBindingElement.CreateUserNameOverTransportBindingElement();
            //myCustomNetTcpBindingStack.Add(security);

            //transport
            var transport = new TcpTransportBindingElement();
            transport.ConnectionBufferSize = 64 * 1024;
            myCustomNetTcpBindingStack.Add(transport);

            var myCustomNetTcpBinding = new CustomBinding(myCustomNetTcpBindingStack);

            host.AddServiceEndpoint(typeof(IService1), myCustomNetTcpBinding, string.Empty);

            host.Open(); 
```

关于 ConnectionBufferSize 的好帖子在[这里](http://blogs.msdn.com/b/drnick/archive/2009/07/17/tuning-connectionbuffersize.aspx)

# windows - 詹金斯无法访问已安装的驱动程序

> ID：10295759
> 
> 赞同：5
> 
> 时间：2012-04-24T10:03:30.370
> 
> 标签：windows, jenkins, nfs

我的 Jenkins 服务器在 Windows 2008 服务器上的 Tomcat 中运行。我在CentOS上搭建了NFS服务器，Win2008服务器可以通过mount命令访问NFS共享文件夹。我在 Windows 上以管理员用户身份运行时对其进行了测试。我将该文件夹作为 Z 驱动程序安装在 Windows 2008 服务器上。但是我在 Jenkins 的工作说它找不到 Z 驱动程序，我猜 Jenkins 网络应用程序可能没有足够的权限来访问 Z 驱动程序。请参阅 Jenkins 的错误消息

控制台输出：

```
Started by user anonymous
Building in workspace C:\.jenkins\workspace\upland-install
[upland-install] $ cmd /c call "C:\Program Files\Apache Software Foundation\Tomcat    6.0\temp\hudson4487584210513580576.bat"

C:\.jenkins\workspace\upland-install>rd d:\tmp\upland_dist /s /q 

C:\.jenkins\workspace\upland-install>xcopy Z:\upland_release\364 d:\tmp /S

 **Invalid drive specification**
 0 File(s) copied 
```

如何解决这个问题？将 Jenkins 安装为 Windows 服务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T14:25:06.607

几个解决方案：

1.  您需要在安装驱动器的同一用户上下文中运行 Jenkins 进程。这可行，但并不总是理想的解决方案。
2.  在已安装驱动器的用户上下文中启动的 Jenkins 从站上运行作业。如果从属机器不可用，则并非总是可行。
3.  使用[Publish Over CIFS 插件](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+CIFS+Plugin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-29T18:21:23.727

我还不能发表评论，否则我会告诉 Anders Lindahl 将他的建议作为答案。我遇到了这个确切的问题，作为构建步骤安装共享驱动器的建议允许我使用 ArtifactDeployer 插件成功复制到网络驱动器。

我插入了“执行批处理命令”的构建步骤并输入：

```
net use J: \\example.com\path\to\share 
```

请注意，我的设置是 Jenkins 作为本地系统帐户运行。并且使用有权挂载网络驱动器的域帐户将 jnlp 从节点安装为 Windows 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T12:45:26.587

直接从 Jenkins 访问远程共享上的文件可能会很棘手，因为它可能会返回拒绝访问。要解决此问题，请将 Jenkins 服务配置为以用户身份运行。

在我的情况下，我想将`type "\\slave1\log\ui.log"`Jenkins 从属上的 UI 测试中的一个日志文件输出（）到 Jenkins 主控，以将其保留在构建日志中。如果没有这个，如果测试失败，并且另一个构建覆盖了故障日志，则无法确定根本原因。通过将日志输出复制到 Jenkins，以后每次都可以重现构建失败。

要切换 Jenkins 服务的用户，打开`mmc`，添加“服务”管理单元，找到 Jenkins 服务，双击它并在身份验证选项卡上设置用户和密码。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-20T10:00:24.087

Windows Server 2008 R2 上的相同问题。

我们的诀窍是通过 Java Web Start 在从机上启动代理，但**不将其安装为 Windows 服务**。虽然这个技巧不会在机器重启后自动恢复连接。

奇怪的是，即使在服务重新启动和成功重新连接之后，将代理安装为 Windows 服务并使用正确的用户凭据对其进行配置对我们也不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-21T10:04:57.603

去工作->打开执行窗口cammand脚本并编写

subst X：\文件夹\文件夹2

之后运行你的任务。以上将映射您的驱动器

# ios - 如何让我的 UITableView 更流畅？

> ID：10295762
> 
> 赞同：-2
> 
> 时间：2012-04-24T10:03:49.307
> 
> 标签：ios, uitableview

当我运行我的 UITableView 时，它会在必须加载新单元格时跳转。我重新编码了每个单元格，而不是最多 13 个子视图，它只包含一对，并且内容是在 drawrect 中绘制的。它比以前流畅了很多，但与许多应用程序所拥有的黄油表视图（包括消息和路径）相比，它们都为每个单元格执行大量自定义绘图。即使有很多代码被屏蔽，它仍然滞后。

我怎样才能让它不那么紧张，这通常是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:18:35.833

使用 Instruments 查找 CPU 时间花在哪里。然后尝试根据获得的知识优化您的代码。

# php - 如果所有返回的行都等于“Sold Out”，则显示“Sold Out”

> ID：10295765
> 
> 赞同：0
> 
> 时间：2012-04-24T10:03:56.610
> 
> 标签：php, mysql

我有一个查询，它从名为 fares 的表中查找每个客舱类别的票价。

每行都有一个名为 status 的字段，可以是“Available”、“Last Few”或“Sold Out”

我的查询是这样的...

```
$query_fares = sprintf("SELECT *, fares.fare-fares.offered AS yousave FROM cruises, fares WHERE fares.cruise_id = %s AND cruises.id = fares.cruise_id ORDER BY fares.sortorder ASC", GetSQLValueString($colname_fares, "text")); 
```

如果所有的小屋都卖光了，我想展示它们。如果返回的行状态中的第一条记录是“已售罄”，那么我的代码会显示“已售罄”字样，这是不好的。如果所有行状态都已售罄，我只想显示已售罄。

我当前的代码是

```
<?php if($row_fares['status'] !== 'Sold Out') { echo "Prices from £" . $row_lowfare['MIN(offered)'] . ""; } ?> 
```

我需要做什么来检查所有返回的行状态是否为 = 'Sold Out'

非常感谢

富有的 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:12:05.533

[mysql_fetch_array](http://www.tizag.com/mysqlTutorial/mysqlfetcharray.php)会有所帮助，然后在循环中执行

`if($row_fares['status'] != 'Sold Out') { break; return false; }`

return false 可以在函数中使用。

# php - 选择正确的技术/库以在先前定义的区域中的路径上添加用户指定的文本

> ID：10295766
> 
> 赞同：0
> 
> 时间：2012-04-24T10:03:58.033
> 
> 标签：php, javascript, html, svg, raphael

我正在使用 CodeIgniter 2 构建一个管理区域，当涉及到文本覆盖时，管理员可以在其中添加“空白”的特定图像。当他们上传图片时，他们应该有一种方法来定义某些路径，普通用户可以在这些路径上添加所需的文本。基本上，这可用于衬衫、杯子……任何类型的定制可打印表面。

路径需要支持直线、贝塞尔曲线和圆。并且一个基础镜像需要支持多条路径。

我使用了 Raphael JS 库和 SVG。

这是我目前的方法：

*   我在 InkScape 中打开基础图像并绘制路径
*   将路径导出为 SVG
*   使用该路径创建 Raphael JS 路径
*   将文本放在该路径上

这种方法的问题是，当放置在弯曲/圆形路径上时，一些字母显示相当奇怪，我无法将它准确地放置在需要的位置，所以有些偏移字母是我无法拥有的。

这是使用 .net 实现此类内容的[示例站点。](http://www.visualbadge.com/BuildBadge_Preview.aspx?b=S623)基本上，您在第 1 行、第 2 行等中输入文本，它会显示在右侧的徽章上。它还将文本保留在定义的区域中，因此如果您输入的文本超出该区域的容量，它会压缩文本以使其适合。

有人对我应该寻找什么有任何指示吗？要点是：路径/区域需要由管理员定义（使用 JS 或第三方应用程序），并且文本必须放在这些路径上。

这不必使用 HTML5 来完成，也可以使用任何类型的 PHP 库来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:55:01.310

Right, if your paths can be defined by an admin, rather than by the user, then draw them in Inkscape and get Inkscape to do your rendering on the server. This is easy to achieve on the command line, though of course you'll need admin access to your server to install Inkscape. Then, where a path needs to support text, give it a special `id` that you can recognise in your application, then rewrite the SVG file using one of PHP's XML writers, and convert using Inkscape to PNG output.

If you get text input from users then you'll need to do a certain amount of cleaning (swapping angle-brackets to their htmlentities etc) but otherwise it's quite easy. Files take around 0.7 sec to process on my dev machine, and if you expect much in the way of load, you can do it on a queue.

Edit: it's not as quick as Raphael, but it's much more reliable in terms of browser support. I've not looked into Raphael much, but I'm pretty sure the text flow stuff I'm doing just doesn't have good support client-side (yet, anyway).

Edit 2: this is what my current work looks like. The item on the left is an SVG template, rendered in-browser as a low-res PNG image, and the input boxes on the right are editing boxes (the last one containing symbols is using a home-made markup syntax, in case you're wondering). Now, the red outlines are *bounding boxes* that are retrieved using the Inkscape CLI. So, since we can detect an outline, in your case, you could determine by what percentage some text has overrun, and reduce the `font-size` inside a `tspan` element accordingly. (When you say "transform", I presume you mean "reduce in size").

That would be in effect a poor man's *auto-fit* feature. It would be nice if there was direct support in SVG for that, but I am not aware that there is. But, it does sound like the above suggestion would work for your case.

![Snapshot of my Inkscape rendering](../Images/5b1a537afd26d72c48d0400be2db82b5.png)

# iphone - NavigationBar 中间的 Iphone ActivityIndi cator

> ID：10295767
> 
> 赞同：1
> 
> 时间：2012-04-24T10:04:04.720
> 
> 标签：iphone, uinavigationbar, uiactivityindicatorview

是否可以将 Activityindicator 放在 NavigationBar 的中间？

我正在使用 IOS 5.0，我可以把它作为 rightbarbutton 但我不知道如何把它放在中间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:07:30.803

您可以设置用于文本的视图：

```
 self.navigationItem.titleView = myActivityIndicatorViewInstance; 
```

正确设置大小等可能会很痛苦。请注意，此代码应该在 UIViewController 子类中，例如在 viewDidLoad 方法中。

# php - 使用php查找文件的扩展名

> ID：10295769
> 
> 赞同：-2
> 
> 时间：2012-04-24T10:04:06.193
> 
> 标签：php, file-extension

如果文件名是filename.jpg.txt，在php中查找文件扩展名的简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:06:15.127

您可以使用 pathinfo 函数，该函数将提供有关文件路径的有用信息，包括扩展名

[http://php.net/pathinfo](http://php.net/pathinfo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:07:22.707

您可以尝试拆分字符串，`explode(".", $string);`然后检查返回的数组的最后一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:07:24.643

```
function file_extension($filename)
{
    $path_info = pathinfo($filename);
    return $path_info['extension'];
} 
```

使用此函数获取文件的实际类型

# android - Facebook 请求不等待用户输入

> ID：10295770
> 
> 赞同：1
> 
> 时间：2012-04-24T10:04:09.110
> 
> 标签：android, facebook

我正在编写一个可以按照用户行为在 Facebook 上发布的应用程序。发布的过程是点击 FB 按钮，接下来发生的事情是 Facebook 尝试登录，如果用户已经登录，使用 SSO，它会创建一个 Facebook 对话框并将其发布到用户提要.

但是，没有与用户交互，并且帖子按原样发布在 Facebook 上。

如何提示在 Facebook 上发布的常规移动应用用户交互？

**登录 Facebook 的代码：**

```
public static final String appid = "1234567890";
public static final String[] permissions = { "publish_stream" };
Facebook facebook;

facebook.authorize(MyClass.this, permissions,
                new DialogListener() {

        @Override
        public void onComplete(Bundle values) {
            // control comes here if the login was successful
            // Facebook.TOKEN is the key by which the value of
            // access token is stored in the Bundle called
            // 'values'
            Log.d("COMPLETE", "AUTH COMPLETE. VALUES: "
                                + values.size());
            Log.d("AUTH TOKEN",
                    "== " + values.getString(Facebook.TOKEN));
            updateStatus(values.getString(Facebook.TOKEN));
        }

        @Override
        public void onFacebookError(FacebookError e) {
            Log.d("FACEBOOK ERROR", "FB ERROR. MSG: " + e.getMessage()
                    + ", CAUSE: " + e.getCause());
        }

        @Override
        public void onError(DialogError e) {
            Log.e("ERROR", "AUTH ERROR. MSG: " + e.getMessage()
                    + ", CAUSE: " + e.getCause());
        }

        @Override
        public void onCancel() {
            Log.d("CANCELLED", "AUTH CANCELLED");
        }
});

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Log.d("onActivityResult", "onActivityResult");
    facebook.authorizeCallback(requestCode, resultCode, data);
} 
```

**代码`publishStream()`：**

```
protected void updateStatus(String accessToken) {
    try {
        Bundle msg = new Bundle();
        msg.putString("description", this.title);
        msg.putString("link", this.link);
        msg.putString("message", description);
        msg.putString(Facebook.TOKEN, accessToken);
        String response = facebook.request("me/feed", msg, "POST");
        Log.d("UPDATE RESPONSE", "" + response);
        Toast.makeText(SinglePost.this, "Posted on Facebook", Toast.LENGTH_SHORT).show();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:59:33.657

您正在使用`facebook.request()`方法，它会在后台静默发布您的消息。要显示对话框，您将使用`facebook.dialog()`方法。您的代码将如下所示：

```
facebook.dialog(context, "stream.publish", parameters, new SomeDialogListener()); 
```

哪里`SomeDialogListener`是子类，`DialogListener`并且将是您的回调实例来处理来自的响应`facebook`（与登录对话框的情况相同）。

# sql-server - 为什么 IS NOT NULL 在 SQL Server 中为 Varchar(max) 返回 NULL 值？

> ID：10295771
> 
> 赞同：27
> 
> 时间：2012-04-24T10:04:09.963
> 
> 标签：sql-server, sql-server-2005

![这是查询：](../Images/2aaed23844e129af3de2379ef5e911a1.png)

1.  列表中似乎出现了一些 NULL 值。
2.  *查询正在*过滤掉一些 NULL 值。我检查过。
3.  如果我添加`AND AdditionalFields = ''`，这两个结果仍然返回
4.  AdditionalFields 是一个 varchar(max)
5.  数据库是 SQL Server 10，兼容级别 = Sql Server 2005 (90)
6.  我正在使用 Management Studio 2008

我似乎有长度为 NULL 的空字符串，或等于空字符串的 NULL 值。这是一种新的数据类型吗？！

**编辑：** 新数据类型 - 特此称为“Numpty”

**编辑 2** 将数据插入临时表会将 Numpties 变为 NULLS。（这条sql的结果是10）

```
CREATE TABLE #temp(ID uniqueidentifier , Value varchar(max))

INSERT INTO #temp 
SELECT top 10 g.ID, g.AdditionalFields
FROM grants g 
WHERE g.AdditionalFields IS NOT NULL AND LEN(g.AdditionalFields) IS NULL

SELECT COUNT(*) FROM #temp WHERE Value is null

DROP TABLE #temp 
```

**编辑 3** 我可以通过运行更新来修复数据：

```
UPDATE Grants SET AdditionalFields = NULL
WHERE AdditionalFields IS NOT NULL AND LEN(AdditionalFields) IS NULL 
```

所以这让我认为这些字段必须包含一些东西，而不是模式定义的一些问题。但它是什么？我如何阻止它再次出现？

**编辑 4** 我的数据库中还有 2 个其他字段，当字段不为空且 LEN(字段) 为空时，两个 varchar(max) 都返回行。所有这些字段都曾经是 TEXT 并更改为 VARCHAR(MAX)。数据库也从 Sql Server 2005 移动到 2008。看起来我们默认关闭了 ANSI_PADDING 等。

另一个例子： ![在此处输入图像描述](../Images/c2ff6a5ce1ba9c7793e10db1bc691928.png)

转换为 varbinary ![在此处输入图像描述](../Images/5a42690496d5ccfefefb02b96aa0e8da.png)

执行计划： ![执行计划](../Images/ecedc8b97b0a592d632ebc7739445bd1.png) **编辑 5：**删除表定义 - 最终证明是不相关的

**编辑 6 个** 脚本以生成将 TEXT 更改为 VARCHAR(MAX) 的脚本，然后更新值以防止错误并提高性能

```
--Generate scripts to alter TEXT to VARCHAR(MAX)
SELECT 'ALTER TABLE [' + tab.table_schema + '].[' + tab.table_name  + '] ALTER COLUMN [' + col.column_name + '] VARCHAR(MAX)' + CASE WHEN col.IS_NULLABLE = 'YES' THEN ' NULL' ELSE ' NOT NULL' END + ' GO'
FROM INFORMATION_SCHEMA.tables tab
INNER JOIN INFORMATION_SCHEMA.COLUMNS col ON col.table_name = tab.table_name
          AND tab.table_schema = col.table_schema
          AND tab.table_catalog = col.table_catalog
WHERE tab.table_type <> 'VIEW' and col.DATA_TYPE = 'text'

--Generate scripts to set value to value in VARCHAR(MAX) fields
SELECT 'UPDATE [' + tab.table_schema + '].[' + tab.table_name  + '] SET [' + col.column_name + '] = [' + col.column_name + ']'
FROM INFORMATION_SCHEMA.tables tab
INNER JOIN INFORMATION_SCHEMA.COLUMNS col ON col.table_name = tab.table_name
          AND tab.table_schema = col.table_schema
          AND tab.table_catalog = col.table_catalog
WHERE tab.table_type <> 'VIEW' AND col.DATA_TYPE = 'varchar' and col.CHARACTER_MAXIMUM_LENGTH = -1 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T09:26:17.193

我得到了一个示例代码来重现上述行为。当您有一个`TEXT`字段存储的值大于它可以容纳在一行中，并且如果您之后将其设置为`NULL`并将列转换为`VARCHAR(MAX)`.

较大的值存储在单独的页面中。然后将此字段的值设置为`NULL`。如果您现在将此列转换为`VARCHAR(MAX)`，则 SQL Server 似乎无法正确处理。通常在`TEXT`转换`VARCHAR(MAX)`时，外部页面会保持原样，但可能是因为它被设置为`NULL`，所以更改列会使事情变得混乱。

**更新：**它似乎与`TEXT`列中的大值没有任何关系。短值显示相同的行为（扩展示例）。因此，重要的是`NULL`通过`UPDATE`和转换的显式设置。

```
CREATE TABLE [dbo].[Test](
    [Id] [int] NOT NULL,
    [Value] [text] NULL,
 CONSTRAINT [PK_Test] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO

INSERT INTO Test VALUES (1, 'test')
INSERT INTO Test VALUES (2, '')
INSERT INTO Test VALUES (3, NULL)
INSERT INTO Test VALUES (4, '012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789')
INSERT INTO Test VALUES (5, 'short string')
GO

update test SET value = null where ID = 4
update test SET value = null where ID = 5
GO

ALTER TABLE test ALTER COLUMN value varchar(max)
GO

select id, value, len(value) as length
from test
where value is not null
GO 
```

结果是：

```
1   test    4
2           0
4   NULL    NULL
5   NULL    NULL 
```

解决此问题的一个简单方法是重新分配`VARCHAR(MAX)`列中的值。

```
UPDATE Test SET value = value 
```

这似乎将值放在先前存储在外部页面中的行中。（参见参考：[SQL 2005 中的 NTEXT 与 NVARCHAR(MAX)](http://geekswithblogs.net/johnsPerfBlog/archive/2008/04/16/ntext-vs-nvarcharmax-in-sql-2005.aspx)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-28T11:42:39.840

这只是[McSim](https://stackoverflow.com/a/10348130/73226)使用 SQL Server Internals Viewer 查看各个阶段的答案的补充。

```
CREATE TABLE [dbo].[Test](
    [Id] [int] NOT NULL PRIMARY KEY ,
    [Value] [text] NULL)

INSERT INTO Test VALUES (1, '') 
```

### 初始插入后的行

![插入主行后](../Images/13fe76fd81daff853b9ad27f0acbb3ae.png)

### 初始插入后的文本值

![插入文本值后](../Images/3034d72da147815fec7e511a427f2210.png)

```
update [Test] SET [Value] = null 
```

### 更新后的行`NULL`

这与前面显示的行相同，因此我没有重复屏幕截图。具体来说，**不会**`NULL_BITMAP`更新以反映新值。**`NULL`**

 **### 更新后的文本值`NULL`

![更新后的文本值](../Images/ec5ea84aa51712c13b879fccb2cbb017.png)

这些`Type`位已更改，Internals Viewer 将其显示为不再包含该`Data`列的值。

此时运行以下正确返回没有行

```
SET STATISTICS IO ON
select [Id]
from [Test]
where [Value] is not null 
```

因此 SQL Server 必须跟随文本指针并查看那里的值以确定 NULL 能力。

```
ALTER TABLE [Test] ALTER COLUMN [Value] varchar(max) 
```

这只是元数据更改。行内数据和行外数据都保持不变。

但是，此时运行以下错误会返回该行。

```
SET STATISTICS IO ON
select [Id]
from [Test]
where [Value] is not null 
```

的输出`STATISTICS IO`

> 扫描计数 1，逻辑读取 2，... **lob 逻辑读取 1**

表明它实际上仍然遵循文本指针，但可能是在这种`varchar(max)`情况下，必须有一个不同的代码路径错误地最终从`NULL_BITMAP`不管（其值自初始插入以来从未更新）中获取值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T16:51:43.693

科林：

我很确定这一切都是由于数据库转换而发生的。既然你需要尽快解决这件事，我的建议是先保证你的 AdditionalFields 数据没问题，然后试着理解为什么会发生这种情况：

1.  做备份；
2.  运行这个 T-SQL：

    ```
    update grants
    set AdditionalFields = ltrim(rtrim(isnull(AdditionalFields,''))) 
    ```

isnull 函数会将您的 null 值转换为空字符串，并且左/右修剪应保证即使具有多个空格的字段在之后也将具有相同的值。

您能否运行此程序并稍后将结果反馈给我们？

此致

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T13:32:16.300

正如其他人指出的那样，这个结果是完全不可能的。

1.  请张贴实际执行计划的截图。
2.  请运行 dbcc checkdb 并发布错误消息（如果有）。

(2) 实际上是我现在最喜欢的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-26T01:47:56.567

我怀疑 NULL 这个词需要存储在数据库中，使用 select * from blah where mycolumn = 'NULL'**

# cuda - OpenMPI CUDA 和 CUDPP

> ID：10295774
> 
> 赞同：2
> 
> 时间：2012-04-24T10:04:32.683
> 
> 标签：cuda, openmpi, cudpp

我有 mpi 程序在集群上的几个进程之间分配大数组。

每个进程计算自己的数组元素总和并将结果返回给主机。

我想对每个进程的数组元素运行并行前缀扫描。

任何想法是否可以使用 CUDPP。?

有没有人一起使用过openmpi和cudpp？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:41:37.207

没有理由不能在同一个应用程序中结合 CUDPP 和 MPI。它们是正交的。

您还可以考虑使用[Thrust 的](https://github.com/thrust/thrust/wiki/Quick-Start-Guide)扫描实现，如果您使用 Fortran，请参阅[此博客文章](http://cudamusing.blogspot.co.uk/2011/06/calling-thrust-from-cuda-fortran.html)以获得一些指导。

# linux - 如何在 linux(OPENSUSE) 中运行 dmalloc？

> ID：10295775
> 
> 赞同：2
> 
> 时间：2012-04-24T10:04:33.133
> 
> 标签：linux

文件：main.c

运行 dmalloc 我已经完成了以下步骤。

1) gcc -ldmalloc -o 测试 main.c

2) 函数 dmalloc { eval `command dmalloc -b $*`; }

```
dmalloc -l logfile -i 100 low 
```

3) ./测试

我将在哪里得到结果？

即使我无法获取日志文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:05:18.793

在运行程序之前，请确保您的环境实际上包含 DMALLOC_OPTIONS 变量。不同的shell可能与eval不同。确保您确实在测试程序中执行了 malloc，否则它可能没有正确初始化。

# c# - 序列化类型对象时检测到循环引用

> ID：10295776
> 
> 赞同：13
> 
> 时间：2012-04-24T10:04:34.493
> 
> 标签：c#, asp.net-mvc, json

我在我的控制器中尝试了这段代码：

```
List<ProductListingModels> prom = new List<ProductListingModels>();

prom.Add(new ProductListingModels()
{
    ID = item.ID,
    Name = item.Name,
    DepartmentID = item.DepartmentID.Value,
    BrandID = item.BrandID.Value
});

jr.Data = prom;
jr.JsonRequestBehavior = JsonRequestBehavior.AllowGet;
return Json(new
{
    ja = jr.Data,
}, JsonRequestBehavior.AllowGet); 
```

这是我的 ProductListingModel ：

```
 public class ProductListingModels:ItemEntityDataContext
 {
   public int ID { get; set; }
   public string Name { get; set; }
   public int DepartmentID { get; set; }
   public int BrandID { get; set; }
 } 
```

这是一个错误：

> 序列化类型对象时检测到循环引用。

但是，如果我从添加对象“prom”更改为添加字符串或整数之类的东西，效果会很好。我不知道如何添加我的对象会发生什么问题。

任何人都可以告诉我解决方案。欢迎您的所有问题和答案，非常感谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-18T19:55:22.310

我怀疑问题出在 ItemEntityDataContext 超类可能持有其他对象的引用上。将数据复制到视图模型类以传递给视图始终是一个好主意。但是，在您的情况下，只需使用 LINQ 将字段选择为新的匿名类型并使用 json 进行序列化。像这样的东西：

```
jr.Data = prom.Select(p => new 
{ 
    ID = p.ID, 
    Name = p.Name, 
    DepartmentID = p.DepartmentID,
    BrandID = p.BrandID
}).ToArray(); 
```

# android - 如何在 Android 中设计此菜单？

> ID：10295779
> 
> 赞同：1
> 
> 时间：2012-04-24T10:04:49.810
> 
> 标签：android, menu

我在很多安卓应用程序中都看到过这种菜单，包括我喜欢的 Evernote 应用程序，但我不知道从哪里开始？任何想法我可以如何布局。

![在此处输入图像描述](../Images/1bd217993252aae9bc69747e0f5436fb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:08:05.893

您可能正在谈论[DashboardLayout](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/ui/widget/DashboardLayout.java "仪表板布局")。将其用作布局并用您喜欢的按钮或其他元素填充它。

# entity-framework - 实体框架中的 POCO 继承

> ID：10295783
> 
> 赞同：1
> 
> 时间：2012-04-24T10:05:15.627
> 
> 标签：entity-framework, poco

我有 2 个项目，一个处理数据访问，它使用实体框架和 POCO 对象来完成。第二个项目引用 DAL 项目来访问数据库。

在我的第二个项目中，我需要从 POCO 类继承并为某些属性和其他内容提供一些默认值，最后我想将此类或“其基类”添加到实体框架的对象上下文中。

但每次我这样做时，我都会收到一个异常，上面写着“找不到 EntityType 'MyInheritedClass' 的映射和元数​​据信息”

有没有办法在不使用部分类或编辑具有数据访问层的项目的情况下解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:34:32.390

很不幸的是，不行。如果未映射派生类，当前版本的 EF 将无法使用它们。如果您映射一个类，则必须使用该类类型进行数据检索和持久性 - EF 永远不会为您提供非映射派生类型的实例，并且它也不会接受派生类型，因为 EF 不知道该类型。

如果要使用派生类，则必须直接在数据访问库中定义它，并且该类必须是映射继承的一部分（在这种情况下，继承将反映在您的数据库中）。否则，不要使用继承的类并将所有其他属性和逻辑直接移动到原始 POCO（顺便说一句。假定的用法）。

# ajax - 从 JSF2/Facelets 子视图中通过 selectOneMenu 更新文本组件

> ID：10295790
> 
> 赞同：1
> 
> 时间：2012-04-24T10:05:38.173
> 
> 标签：ajax, jsf-2, facelets, selectonemenu

我有一个名为的 Facelets**子视图**`basedata-cpanel.xhtml`，它通过`<ui:param>`s 获取其参数：

```
<ui:define name="content-top">
  <h:form>
    <ui:include src="/subviews/basedata-cpanel.xhtml">
      <ui:param name="customerId"   value="#{pqHome.pq.customer.id}" />
      <ui:param name="customerName" value="#{pqHome.pq.customer.name}" />
      <ui:param name="customers"    value="#{organizationManager.allCustomers}" />        
    <ui:include />
  </h:form>
</ui:define> 
```

在子视图中，我只需要下面的面板来显示当前选择的客户名称（该面板用于 NEW 和 UPDATE 面板/页面）。我需要一个 AJAX 请求。

中的代码`/subviews/basedata-cpanel.xhtml`：

```
 <h:selectOneMenu value="#{customerId}" id="customer-select">
        <f:selectItems value="#{customers}"
                       var="customer"
                       itemValue="#{customer.id}"
                       itemLabel="#{customer.name}" />
        <f:ajax render="customer-name" />
      </h:selectOneMenu>
      <h:outputText value="#{customerName}" id="customer-name" /> 
```

我将其`<f:ajax render="customer-name" />`放入选择中，但 outputText 没有更新。我真的没想到，但是...

**我需要做什么才能让它工作？**

由于 Facelets 子视图仍然具有与传递相同的参数，我如何获得“新的”？这方面的最佳做法是什么？

PS：pqHome是一个`@ViewScoped`bean

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:34:22.967

您的下拉列表只会更改客户的 ID，而不是客户名称。更重要的是，它根本不会改变整个客户实体。它只会更改现有客户的 ID。情况不妙。

您需要更改代码以使其设置整个客户，而不仅仅是其 ID。例如

```
<ui:include src="/subviews/basedata-cpanel.xhtml">
    <ui:param name="customer" value="#{pqHome.pq.customer}" />
    <ui:param name="customers" value="#{organizationManager.allCustomers}" />        
</ui:include> 
```

和

```
<h:selectOneMenu value="#{customer}" id="customer-select" converter="customerConverter">
    <f:selectItems value="#{customers}" var="c" itemValue="#{c}" itemLabel="#{c.name}" />
    <f:ajax render="customer-name" />
</h:selectOneMenu>
<h:outputText value="#{customer.name}" id="customer-name" /> 
```

不要忘记创建一个在客户 ID 和对象`Converter`之间转换并在.`Customer``<h:selectOneMenu>`

# python - 如何为 DICOM 文件生成 SOPInstance UID？

> ID：10295792
> 
> 赞同：5
> 
> 时间：2012-04-24T10:05:47.270
> 
> 标签：python, uuid, uniqueidentifier, dicom

我正在开发一个能够为 PACS 创建结构化报告的系统。

显然，为了创建一个 DICOM 实例（包含报告数据的文件），我需要三个 UID 用于 Study、Series 和 Instance。StudyUID 和 SeriesUID 必须与为其创建报​​告的研究和系列的相同。但是对于 SOPInstanceUID，我需要生成新的 UID。

我`getNewSOPInstanceUID`在 Pixelmed 文档中看到了方法，但我不熟悉 Pixelmed 源。我需要一个算法或 Python 源代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T22:20:18.257

DICOM 中有两种创建 UID 的方法。一种基于已注册的 UID 根，另一种基于 UUID。后一种方法于 2012 年通过 CP-1156 添加到 DICOM 标准中。可以通过将 UUID 转换为 DICOM UID 来创建学习 UID、系列 UID、SOP 实例 UID 等内容的 UID。

大多数编程语言都支持创建 UUID。下面的示例代码代码基于 GUID 值在 C# 中创建有效的 DICOM UID。

```
public static string GuidToUidStringUsingStringAndParse(Guid value)
{
    var guidBytes = string.Format("0{0:N}", value);
    var bigInteger = BigInteger.Parse(guidBytes, NumberStyles.HexNumber);
    return string.Format(CultureInfo.InvariantCulture, "2.25.{0}", bigInteger);
} 
```

下面的方法做同样的事情，但快了大约 5 倍：

```
public static string ConvertGuidToUuidInteger(ref Guid value)
{
    // ISO/IEC 9834-8, paragraph 6.3 (referenced by DICOM PS 3.5, B.2) defines how
    // to convert a UUID to a single integer value that can be converted back into a UUID.

    // The Guid.ToByteArray Method returns the array in a strange order (see .NET docs),
    // BigInteger expects the input array in little endian order.
    // The last byte controls the sign, add an additional zero to ensure
    // the array is parsed as a positive number.
    var octets = value.ToByteArray();
    var littleEndianOrder = new byte[]
    { octets[15], octets[14], octets[13], octets[12], octets[11], octets[10], octets[9], octets[8],
        octets[6], octets[7], octets[4], octets[5], octets[0], octets[1], octets[2], octets[3], 0 };

    return "2.25." + new BigInteger(littleEndianOrder).ToString(CultureInfo.InvariantCulture);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-09-20T08:12:22.830

> **有关 DICOM UID 的更多详细信息，请参阅[此](https://stackoverflow.com/a/46316162/5779732)答案。**

**A] 增加计数器 [不推荐]**

**一个简单的逻辑是获取您的 SeriesInstanceUID 并将其递增1。**假设您的 SeriesInstanceUID 是“1.1.1.1.1”，那么您的 SOPInstanceUID 可能是“ **1.1.1.1.2** ”或“1.1.1.1.1.1 ”。

 **问题：

*   当实例被删除并创建下一个实例时，不应使用较早的计数器。
*   在多线程环境中，应该足够小心。
*   不保证跨不同系统/应用程序的唯一性。

**B] 日期时间 [不推荐]**

通常使用的其他技术是将时间戳（带有刻度）附加到组织根。

问题：

*   多线程环境是个问题。
*   系统时钟可能会关闭。
*   无法保证跨不同系统/应用程序的唯一性。

**C] 更复杂 [推荐]**

```
1.2.840.xxxxx.30.152.99999.235.20.100.yyyyMMddHHmmss.zzzzzz 
```

在哪里：

**1.2.840.xxxxx：**组织根
**30：**应用程序 ID
**152：**应用程序版本
**99999：**安装/位置 ID
**235：**研究 ID
**20：**序列号
**100：**图像编号
**yyyyMMddHHmmss：**日期时间
**zzzzzz：**线程安全计数器/随机数

问题：

*   如果系统时钟关闭，算法可能会失败；这进一步受到线程安全计数器/随机数的保护。遥远的可能性；需要小心。

**D] UUID 派生的 UID [推荐]**

UID 可以从根“2.25”生成。后跟通用唯一标识符 (UUID) 的十进制表示。

问题：

*   这可能适用于动态创建的 UID，例如 SOP 实例 UID，但不适用于在设计期间确定的 UID，例如私有 SOP 类或传输语法 UID，或实现类 UID。
*   UID 仅限于 128 位。DICOM UID 支持范围更广。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T12:45:38.080

根据[DICOM 标准](http://medical.nema.org/standard.html)（PS 3.5-2011 第 61 页），您需要一个 orgroot 和一个后缀。可以在此处找到示例（PS 3.5-2011 第 83 页）。

也不要忘记 UI 字段必须用 '\0' 字节而不是空格填充（如果它们没有偶数长度）。

我建议像这样创建 UID：

YOUR_ORGROOT.Year.Month.Day.Hour.Minute.Second.Milliseconds.StaticCounter

请注意，限制为 64 个字符！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T12:10:54.660

我真的建议您*不要*自己实施它。如今，大多数语言都提供了 UUID 库，不要重新发明轮子。特别是。如果你要编写代码来提取 MAC 地址，用可**移植**的C语言编写它可能非常复杂。

[UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier#Definition)并不完全符合 DICOM 定义，因此您需要注册自己的 Organization Root UID，然后只需使用生成的 UUID 填充即可，该 UUID 会带来空间和时间唯一性条件。

```
YOUR_ORG_ROOT.CONVERTED_UUID 
```

请注意，您有 64 个字节（已经足够了，请参见[此处](https://stackoverflow.com/questions/39388514/computing-the-size-of-uid-possibilities)）用于存储在值表示 UI 中：

*   将 UUID 的十六进制表示法转换为 VR：UI 定义`([0-9.]+)`
*   小心修剪（您可能会在此操作期间引入冗余）
*   选择一个短`Org Root`
*   如果需要，用`\0`（0 二进制）填充。

最后，由于您使用的是 python，请使用 uuid lib [python-uuid](http://docs.python.org/2/library/uuid.html)。

* * *

以上应被视为标准中正式定义的替代实现：

*   [B.2 UUID 派生的 UID](http://dicom.nema.org/medical/dicom/current/output/chtml/part05/sect_B.2.html)

当直接将 UUID 转换为 UID 时，必须使用“2.25”。根。**

# c# - C# Linq to sql-classes - 更新的存储过程不起作用

> ID：10295795
> 
> 赞同：0
> 
> 时间：2012-04-24T10:05:58.607
> 
> 标签：c#, linq-to-sql, stored-procedures

我有一个 Silverlight 项目，它使用 linq to sql 类和带有表和存储过程的 sql server 2008 r2。我不得不更新一个存储过程，因为我想选择一个带有日期时间值的附加字段。

由于没有实体框架中的“将我的 linq 更新为 sql 类”按钮，我不得不删除并移动存储过程来更新它。

The stored procedure works fine executed on the sql server, but used in my silverlight application the new elected field gets only null values.

我用一个新的 linq to sql classes dbml 创建了一个新项目，在这个项目中它工作正常。

也许有人有想法？

问候，浮动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:11:59.197

linq-to-sql-classes 不像实体框架那样支持这个。我添加了一个实体数据模型以供将来使用....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:17:43.017

您是否使用 SqlMetal 重新生成了 DBML？

我没有使用过这个，但我看到有自定义加载项允许从 Visual Studio 中重新生成 DBML：

[http://www.codeproject.com/Articles/37198/SqlMetalPlus-A-VS-Add-in-to-Manage-Custom-Changes](http://www.codeproject.com/Articles/37198/SqlMetalPlus-A-VS-Add-in-to-Manage-Custom-Changes)

# php - 模型类中的 CodeIgniter 数据库调用

> ID：10295796
> 
> 赞同：0
> 
> 时间：2012-04-24T10:05:59.713
> 
> 标签：php, database, codeigniter, model, fatal-error

我一直在寻找这个问题！但没有什么能真正帮助解决这个问题。

我总是收到以下错误：“致命错误：在非对象上调用成员函数 query()”

我有以下控制器：

```
<?php
class Station extends CI_Controller {

    function __construct($params=array()) {
        parent::__construct();

        session_start();

        $this->load->library('parser');
        $this->load->helper(array('form', 'url'));
    }

    public function index() {
        $this->tpl_data['location'] = $this->stationmodel->getLocations()->all;
        $_SESSION['location'] = $this->tpl_data['location'];

        $this->load->view('station', $this->tpl_data);
    }
} 
```

?>

以及以下型号：

```
<?php
class StationModel extends CI_Model {

    function __construct() {
        parent::__construct();
    }

    public function getLocations() {
        $query = $this->db->query("SELECT * FROM location WHERE City_IATA = 'MUC'");
        var_dump($query);

        // Just for test purposes!
        foreach($query->result() as $row) {
            echo $row->Location_Name_DE . '<br />';
        }
    }
} 
```

?>

在我的 autoload.php 中，我加载了数据库模块：

```
$autoload['libraries'] = array('database'); 
```

此外，当我尝试直接在控制器中加载数据库模块时，我会得到同样的错误。

我的数据库.php：

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '****';
$db['default']['database'] = 'comvel';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

任何人都可以帮助我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:52:07.917

在您的控制器中尝试`$params=array()`从`function __construct($params=array())`

我也会`__construct() {}`从你的模型中删除它，因为它没有做任何事情并且可能会给你带来麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:13:06.400

这是一个奇怪的问题。好像你做的一切都是对的。

您是否尝试过完全删除构造函数？我的猜测是你的构造函数以某种方式阻止你的模型被`db`对象初始化。[如果需要运行一些初始化代码，使用钩子](http://codeigniter.com/user_guide/general/hooks.html)可能更合适，比如`pre_controller`钩子。

# ikvm - 如何为 System.Web 创建一个工作的 ikvmstub

> ID：10295807
> 
> 赞同：1
> 
> 时间：2012-04-24T10:06:57.517
> 
> 标签：ikvm

我想为 System.Web 创建一个存根，并在我的 java 代码中使用 HttpContext，然后就可以使用它了。我尝试了以下方法：

**文件夹结构**

*   程序 [文件夹]
    *   ikvm-7.0.4335.0 [文件夹]
    *   编译.bat
    *   测试.java
    *   IKVM.OpenJDK.Core.dll
    *   IKVM.Runtime.dll

**java类test.java**

```
import cli.System.Web.HttpContext;

public class test
{  
    public static void main(String args[])
    {
       HttpContext.get_Current().get_Items().get_Item("MyKey");
       System.out.println("Hello World!");
    }
} 
```

**编译compile.bat**

```
ikvm-7.0.4335.0\bin\ikvmstub mscorlib
ikvm-7.0.4335.0\bin\ikvmstub System.Web
javac test.java -classpath mscorlib.jar;System.Web.jar
ikvm-7.0.4335.0\bin\ikvmc -target:exe -reference:System.Web.dll test.class
test.exe
pause 
```

如果我运行 compile.bat 它将输出：

> 警告 IKVMC0100：找不到类“cli.System.Collections.IDictionary”链接错误：方法“cli.System.Web.HttpContext.get_Items()Lcli.System.Collection s.IDictionary;” 有一个返回类型“cli.System.Collections.IDictionary, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”而不是类型“cli.System.Collections.IDictionary（未知程序集）”，正如“test”所期望的那样"

我还尝试直接为“C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Web.dll”创建一个存根，但随后出现此错误：

> 错误：无法加载程序集“C:\Program Files (x86)\Reference Assemblies\Micr osoft\Framework.NETFramework\v4.0\System.Web.dll”，因为它依赖于比当前加载的更高版本的 mscorlib

然后我尝试为“C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\mscorlib.dll”创建一个存根并得到：

> ikvmstub "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\mscorlib.dll" 警告：程序集 "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework \v4.0\mscorlib.dll" 被忽略，因为先前加载的程序集 "C:\Windows\Microsoft.NET\Framework64\v2.0.50727\mscorlib.dll" 具有相同的身份 "mscorlib, Version=2.0.0.0, Culture =中性，PublicKeyToken=b77a5c561934e089"

有没有人试过这个并成功了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:15:05.523

我自己找到了答案。我没有引用 mscorlib.dll，因为我认为它是自动引用的。因此，如果我更改以下行，它将起作用：

> ~~ikvm-7.0.4335.0\bin\ikvmc -target:exe -reference:System.Web.dll test.class~~

至

```
ikvm-7.0.4335.0\bin\ikvmc -target:exe -reference:mscorlib.dll -reference:System.Web.dll test.class 
```

# visual-studio-2010 - 如何在 tfs 2010 中构建多个依赖项目

> ID：10295815
> 
> 赞同：0
> 
> 时间：2012-04-24T10:07:30.057
> 
> 标签：visual-studio-2010

我对 TFS 非常陌生。我有一个项目 smarthub 安装程序。要构建它，我必须构建另外两个项目 CPMhub.services 和 CPMhub.website。有什么方法可以让我右键单击智能集线器安装程序并说构建，以便它将构建其他两个项目并放入相应的放置位置。

谢谢

巴斯克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:37:01.293

这与 TFS 无关，但这里是如何做到的。

最简单的方法是使用您的安装项目和其他两个项目（CPMhub.services 和 CPMhub.website）创建一个解决方案。

然后右键单击解决方案资源管理器中的设置项目，然后“添加”，然后“项目输出...”，然后您只需选择项目和构建配置。

如果您希望将项目输出直接放在给定文件夹中，请执行完全相同的步骤，但从安装项目的文件系统视图中右键单击将接收您的依赖项目输出的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:48:10.557

只是检查。您的安装程序项目是[WiX 项目](http://robmensching.com/blog/posts/2011/1/31/WiX-v3.5-released)吗？还是 Visual Studio 安装项目？Team Build 2010 不支持后者，并将在下一版本 (11) 中从 Visual Studio 中完全删除。

正如 Nockawa 所提到的，最简单的解决方案是创建一个包含所有项目、设置、服务和站点的解决方案，只需将项目引用添加到 (Wix) 设置项目

创建一个解决方案文件的另一种方法是使用[AIT Dependency Manager Extension](http://visualstudiogallery.msdn.microsoft.com/92a6416d-fc18-4b5b-9b66-fba7af728984)，它可用于触发其他构建并直接引用它们的输出。您仍然需要迁移到 Wix 才能从 Team Build 构建安装程序。

请注意，您可能会找到一些使用 Team Build 构建 Visual Studio 安装项目的解决方案。我的经验是，由于它们使用 devenv.exe /build 和 devenv.exe 会不时地使用模式对话框提出问题和弹出警告，因此这些通常会导致挂起构建、错误和其他问题。

# php - 多查询数据库

> ID：10295819
> 
> 赞同：0
> 
> 时间：2012-04-24T10:07:35.033
> 
> 标签：php, mysql, database

我是 PHP 新手，但正在创建一个相当复杂的工作经验数据库。目前有两个表（雇主，学生）现在，我用过：

```
"SELECT * FROM employers ORDER BY Category, SubCategory, Name" 
```

生成雇主列表及其详细信息。但是，在此列表中，我需要显示在三周内哪些学生与哪些雇主一起工作。如果'WeekOne'（也是'students'中的一列）='Name'（来自'employers'），我需要从'students'返回一个'FirstName'值

请帮忙！如果这太乱码，请告诉我-很难解释。

本质上，我想生成一个看起来有点像这样的列表：

> 公司一，地址，第一周 - 学生，第二周 - 学生，第三周 - 学生
> 
> 公司二，地址，第一周 - 学生，第二周 - 学生，第三周 - 学生等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:12:44.887

尽管您很高兴向我们展示您的 sql 表，但这是我对您将如何做的想法。

```
SELECT e.*, s.FirstName FROM employers AS e, students AS s
WHERE s.WeekOne = e.Name
OR s.WeekTwo = e.Name
OR s.WeekThree = e.Name
// etc
ORDER BY Category, SubCategory, Name 
```

如果我理解正确，这将帮助您获取所需的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:13:16.323

据我了解，您希望获得雇主的详细信息。您可以使用联接操作来使用此类查询；

```
SELECT e.*, s.FirstName FROM students AS s
RIGHT JOIN employers AS e
ON s.WeekOne=e.Name
ORDER BY Category, SubCategory, Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:13:19.917

如果学生表 weekone 列等于雇主表中的“姓名”，则下面的 SQL 将返回学生的名字和雇主的姓名。

```
SELECT students.FirstName, Employers.Name
FROM students
JOIN employers ON students.WeekOne = Employers.Name 
```

我明白了，您想要：*Employer, Address, Week One - Student, Week Two - Student, Week Three - Student*。

尝试这样的事情：

```
SELECT e.name, e.address, student1.firstname AS 'Week One', student2.firstname AS 'Week Two', student3.firstname AS 'Week Three'
FROM employers AS e
JOIN students AS student1 ON e.name = student1.weekone
JOIN students AS student2 ON e.name = student2.weektwo
JOIN students AS student3 ON e.name = student3.weekthree
ORDER BY category, subcategory, e.name 
```

# android - 如何为android中的每个活动添加页眉和页脚

> ID：10295821
> 
> 赞同：3
> 
> 时间：2012-04-24T10:07:39.747
> 
> 标签：android, xml, header, footer

我想在顶部和底部的每个活动中添加一个`ImageButton`、一个`button`和一个。我想使用. 所以我想在我的每个 Android Activity 中添加页眉和页脚。我不知道该怎么做。我不需要如何编写页眉或页脚的源代码。我想知道的是我必须在哪里定义页眉和页脚意味着我需要在每个 xml 文件中添加页眉和页脚，还是需要定义两个或在每个其他 xml 文件中使用这些 xml 文件。或者是否有任何其他方式意味着使用该活动的 java 文件中的引用。任何帮助表示赞赏。`textview``header and footer``header.xml``footer.xml`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T10:25:08.633

定义两个单独的文件`header.xml`and `footer.xml`and and than 使用

`

```
<include layout="@layout/footer"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T10:12:02.413

请参阅此链接：

*   [如何在android中设置页眉和页脚？](https://stackoverflow.com/questions/9372700/how-to-set-header-and-footer-in-android)

这和你的问题完全一样。如果你想拥有这些页眉和页脚，你应该构建一个自定义视图并在你的应用程序中使用它。您可以使用操作栏之类的内容作为标题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T10:10:33.023

“我是否需要定义两个 header.xml 或 footer.xml 并在每个其他 xml 文件中使用这些 xml 文件”

是的，据我所知，这是最好的方法。您可以使用 include xml 标记将其他 .xml 布局文件包含在其他布局文件中。像：

```
...
<include layout="@layout/header"/>
...
<include layout="@layout/footer"/>
... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T10:14:33.033

Android 本身没有页眉和页脚的概念。但是，您可以在布局中定义概念页眉和页脚一次，然后在其他布局中多次使用它们，只需使用（例如）调用它们：

```
<include layout="@layout/header"/> 
```

您可以看一下这个示例，以更好地了解如何在整个应用程序中重用布局。

[http://developer.android.com/training/improving-layouts/reusing-layouts.html](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-25T07:20:20.280

```
This is best example for Common Header Footer in All Activities

BaseActiivty.java
=================

 public class BaseActivity extends FragmentActivity {

    RelativeLayout mRelativeLayout;
    FrameLayout frame_container;
    TextView header_txt,footer_txt;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

    }

    @Override
    public void setContentView(int layoutResID)

    {
        mRelativeLayout = (RelativeLayout) getLayoutInflater().inflate(R.layout.activity_base, null);
        frame_container = (FrameLayout) mRelativeLayout.findViewById(R.id.frame_container);
        // set the drawer dialog_view as main content view of Activity.
        setContentView(mRelativeLayout);
        // add dialog_view of BaseActivities inside framelayout.i.e. frame_container
        getLayoutInflater().inflate(layoutResID, frame_container, true);

        header_txt = (TextView) findViewById(R.id.header_txt);
        footer_txt = (TextView) findViewById(R.id.footer_txt);

    }
}

   MainActivity.java
   =================

public class MainActivity extends BaseActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

activity_base.xml
=================

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/content_base"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <RelativeLayout
        android:id="@+id/header_RL"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:background="@color/colorAccent">

        <TextView
            android:id="@+id/header_txt"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:textSize="30dp"
            android:gravity="center"
            android:text="Header"/>

    </RelativeLayout>

    <FrameLayout
        android:id="@+id/frame_container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/footer_RL"
        android:layout_below="@+id/header_RL">

    </FrameLayout>

    <RelativeLayout
        android:id="@+id/footer_RL"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:background="@color/colorAccent">

        <TextView
            android:id="@+id/footer_txt"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:textSize="30dp"
            android:gravity="center"
            android:text="Footer"/>

    </RelativeLayout>

</RelativeLayout>

activity_main.xml
==================

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center"
            android:text="Hello World!"
            android:textSize="30dp" />

    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-24T10:11:19.883

你有两个选择。包括和合并。

请在此处阅读有关这些选项的更多信息[以包含](http://developer.android.com/training/improving-layouts/reusing-layouts.html)和[此处以进行合并](http://android-developers.blogspot.com.br/2009/02/android-layout-tricks-2-reusing-layouts.html)

# database - mod_rewrite 不适合我

> ID：10295822
> 
> 赞同：1
> 
> 时间：2012-04-24T10:07:45.347
> 
> 标签：database, apache, mod-rewrite, apache2

我正在尝试为使用 apache 的网站设置 mod_rewrite

这是我的句子：

```
RewriteEngine on
RewriteRule ^news/Actualites/([^/]+)/?$ news/Actualites_d.tpl?SKU=$1 [L] 
```

但它不工作

我还有其他重写工作，我测试了一些简单的东西，例如：

```
RewriteEngine on
RewriteRule ^ancienne-url\.html$ /nouvelle-url.html [R=301,L] 
```

这是有效的。

我试图把它放在 Htaccess 和 Vhost 中，都不起作用。

我也想得到以下

`news/Actualites/MYPRODUCT`当我有这样的网址时`news/Actualites_d.tpl?SKU=MYNUMERIC_ID`

我不知道是否有可能在一侧有“单词”，当它是正常的一侧的数字 ID 时......提前感谢劳伦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:16:57.343

尝试：

```
RewriteEngine on
RewriteBase /
RewriteRule ^news/Actualites/([^/]+)/?$ news/Actualites_d.tpl?SKU=$1 [NC,QSA,L] 
```

对于问题的第一部分。

对于第二部分，您可以使用 RewriteRule 来实现它，但这意味着对所有 URL 进行硬编码，这不是一个好主意。

```
RewriteRule ^news/Actualites/MYPRODUCT$ news/Actualites_d.tpl?SKU=MYNUMERIC_ID [NC,QSA,L] 
```

然后您需要复制上面的行，为每个不同的 URL 替换 MYPRODUCT 和 MYPRODUCT_ID。

在这种情况下，您通常会执行以下规则：

```
RewriteRule ^news/Actualites/([^/]+)$ news/Actualites_d.tpl?SKU=$1 [NC,QSA,L] 
```

而actualites_d.tpl 脚本将查询数据库或其他任何东西以获取传入的URL值所需的信息：

```
SELECT * FROM tbdProduct WHERE fldProductURLSlug = SKU 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:31:32.897

因此，您的重写规则存在一些问题，作为一般做法，通常最好添加完整的 URL 以防止循环本地重写。第二个问题是您的重写规则期望 URL 以新闻开头......但实际上它是 /news 所以为了修复兼容性，它应该或多或少类似于：

```
RewriteRule ^/?news/Actualites/(.*)/.*$ http://{$HTTP_HOST}/news/Actualites_d.tpl?SKU=$1 [R=301,L] 
```

所以在这个例子中你会看到我添加了 / 和 ? 在重写规则的开头，这是为了在未设置 / 的情况下保持兼容性。其次，您会看到 (.*) 圆括号表示变量赋值，您可以设置多个变量，然后将它们与 $1 $2 一起使用，依此类推。最后，我将重定向位置设置为 301 重定向。除非您在别名目录下提供服务，否则使用 RewriteBase 是无关紧要的，例如 /blog/

前面的示例将 RewriteBase 设置为 /，然后为 ^news 执行重写规则。但这并没有考虑到您可能收到的一些不包括起始斜线的请求。

为了完整起见，另一个例子是：

```
RewriteRule ^/?news/Actualites/(.*)/(.*)/(.*)/.*$ http://{$HTTP_HOST}/news/Actualites_d.tpl?SKU=$1&orderid=$2&somvar=$3 [R=301,L] 
```

# php - Apache 2.22 + php 5.40 + Symfony2 Frameowrk = Apache 分段错误 (11)

> ID：10295828
> 
> 赞同：0
> 
> 时间：2012-04-24T10:08:17.500
> 
> 标签：php, apache, ubuntu, symfony

我在本地服务器上安装了新的 Symfony 2.1 框架

当我跑步时`http://www.myhost.com/app_dev.php`

我打开我的浏览器

```
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

当我检查我的 /var/log/apache2/error.log 文件时，我看到了

```
[Tue Apr 24 12:03:43 2012] [notice] seg fault or similar nasty error detected in the parent process
[Tue Apr 24 12:03:44 2012] [notice] Apache/2.2.22 (Ubuntu) PHP/5.4.0-3~precise+4 configured -- resuming normal operations
[Tue Apr 24 12:03:58 2012] [notice] child pid 3016 exit signal Segmentation fault (11)
[Tue Apr 24 12:03:59 2012] [notice] child pid 3014 exit signal Segmentation fault (11)
[Tue Apr 24 12:04:00 2012] [notice] child pid 3025 exit signal Segmentation fault (11)
[Tue Apr 24 12:04:01 2012] [notice] child pid 3013 exit signal Segmentation fault (11)
[Tue Apr 24 12:04:24 2012] [notice] child pid 3012 exit signal Segmentation fault (11) 
```

我该如何调试或更好地解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:39:50.217

通常 PHP 产生 httpd 段错误（我想没有留下核心转储）的原因是 PHP 中的一个错误扩展，或者是两个不兼容的扩展的组合。

例子是：

*   APC + XCache（或者，通常是两个加速器）
*   suhosin + xdebug

# sql - 查询结果集随机重复

> ID：10295831
> 
> 赞同：0
> 
> 时间：2012-04-24T10:08:34.083
> 
> 标签：sql, oracle, oracle11g

我有一个非常简单的查询，它随机返回重复的行。有时我没有重复，有时我有重复的结果集，重复的记录每次都不同。我正在对冻结的数据库运行查询（数据不会改变）。我的Oracle版本是11g。

我在一个日期只有一个过滤器（在 WHERE 子句中）
`to_char(date,'yyyy/mm') > = '2012/03'`：。

任何帮助，将不胜感激。感谢您的关注。此致。

**完整查询**：

```
select distinct 
   B.ORD_V_COD_ROWID as c1,
   B.ORD_D_DAT_INSERITO_RIFIUTATO as c2,
   B.ORD_D_DAT_RIFIUTO_SIS as c3
  from   
       NRFTF_ORD_ORDINE A,
       NRFTF_COR_ORDINI_RDS B
  where  (A.ORD_N_DWH_NUM_ORDINE = B.ORD_N_DWH_NUM_ORDINE 
  and B.ORD_V_COD_CAUSALE = 'CLIENTE NON AFFIDABILE' 
  and B.ORD_V_COD_STATO = 'RIFIUTATO' 
  and B.RDS_C_DWH_FLG_CANCELLAZIONE = '0' 
  and B.ORD_C_DWH_FLG_CANCELLAZIONE = '0' 
  and B.ORD_V_COD_CAUSALE = 'CLIENTE NON AFFIDABILE' 
  and B.PER_NAME_MONTH >= '2012/03' 
  and (B.ORD_D_DAT_RIFIUTO_SIS >= TO_DATE('2012-03-22 00:00:00' , 'YYYY-MM-DD HH24:MI:SS') 
  or B.ORD_D_DAT_INSERITO_RIFIUTATO >= TO_DATE('2012-03-22 00:00:00' , 'YYYY-MM-DD HH24:MI:SS')) 
  and  TO_CHAR (A.ord_d_dat_creazione,'YYYY/MM') >= '2012/03' ) 
  order by c1, c2, c3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:54:47.197

有趣的。我已经看到索引损坏的类似行为。重建索引解决了一段时间的问题，但随后非确定性行为又回来了。我们最终致电 Oracle 支持。他们在一个非常令人印象深刻的 24 小时全球更新数据字典会话中修复了它。

我会尝试从头开始重建所有涉及的表和索引。

如果这没有帮助，并且您三次检查您没有任何动态发生在您身边，请联系 Oracle 支持。

# javascript - ajax网页与数据库同步

> ID：10295833
> 
> 赞同：0
> 
> 时间：2012-04-24T10:08:53.267
> 
> 标签：javascript, ajax

使用ajax调用更改数据时，实现数据库和网页同步的最佳方法是什么？举个例子，假设我有一个用于添加评论的表单，我希望它能够异步工作。因此，我创建了一个 JS 代码，将该表单提交到数据库。在无需刷新页面的情况下向用户显示这些新数据的最佳做法是什么？目前我可以想到3个解决这个问题的方法：

1.  在我们收到来自服务器的 ok 消息后，将 JS 代码放入将处理并将此数据插入页面上的适当元素的回调中。

2.  作为服务器的响应，发送所有应该在元素中显示的数据，然后简单地使用 JS 插入所有内容。

3.  1 和 2 之间的混合，作为来自服务器的响应，仅发送处理后的新数据并将其插入适当的位置。

我不喜欢 1 中的代码重复，即我们必须执行两次处理逻辑。我也不喜欢 2\. 因为从服务器发送的数据开销。至于3。我最喜欢这种方式，但是来回发送数据还是有一些开销。我知道这些开销在大多数情况下可能不会影响系统的运行，但我想知道是否有任何其他解决方案可以解决这个问题，以及确保数据同步的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:20:58.303

您可能需要考虑使用模型和集合，例如[backboneJS](http://documentcloud.github.com/backbone/)是如何做到的。它有点像“数据库的本地副本”。首先，您的模型只获取几条记录以供显示，例如待办事项列表中的前 10 件事情。该模型具有 CRUD 方法，您可以在其中操作其中的数据。

然后对于您的界面，您有单独的视图代码。这些视图连接到模型，执行 CRUD 以及侦听模型数据更改，这些更改可以来自当前模块接口或接口的其他部分。如果页面的某个部分更改了数据，则连接到同一模型的其余部分会收到通知。模型可以是任何东西，它可以代表数据库中的一个或一组表

同样，该模型将具有 AJAX 同步功能。其中修改的每个数据都会通过 AJAX 调用反映到服务器。当该调用完成时，您会通知所有挂钩接口进行相应更新。由于数据包含在模型中，您只需将更改发送到服务器并监听成功。至于来自服务器的实时数据，您可以在模型中创建一些轮询功能来更新它的数据。如果有变化，通知所有挂钩的接口。

# actionscript-3 - 如何动态更改 flex 应用程序的字体大小？

> ID：10295835
> 
> 赞同：0
> 
> 时间：2012-04-24T10:09:03.363
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flex4.5

我想在单击按钮时动态更改应用程序的字体大小。

任何的想法 ？请指导我们

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:39:51.393

这是在按钮单击时增加字体大小的代码...检查

```
<mx:Label id="lb" text="INDIA"/>
<mx:Button label="change" click="button1_clickHandler(event)"/>

protected function button1_clickHandler(event:MouseEvent):void
{
    lb.setStyle('fontSize',Number(lb.getStyle('fontSize'))+5);
}

lb.setStyle('fontSize',Number(lb.getStyle('fontSize'))+5); 
```

从标签中获取先前的字体值并将其增加 5 并再次设置...

或者

您可以直接设置取先前字体大小的值

```
lb.setStyle('fontSize',Math.random()*200); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T05:43:58.140

这可以帮助你...

```
[Bindable]private var _size:Number = 10;

protected function button1_clickHandler(event:MouseEvent):void
{
        _size = _size+10;
}

<mx:Label id="lb" text="INDIA" fontSize="{_size}"/>
<mx:Label id="lb1" text="I love India" fontSize="{_size}"/>

<mx:Button label="change" click="button1_clickHandler(event)" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:32:46.627

这是[Maxim Kachurovskiy使用 CSS 编写的一些代码](http://kachurovskiy.com/)

（它不是我的，部分已弃用，但效果很好）：

![在此处输入图像描述](../Images/33b5dd232c40a6fd800797a2d8c4b48e.png)

**字体大小.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<!-- (c) Maxim Kachurovskiy -->
<mx:Application 
    xmlns:mx="http://www.adobe.com/2006/mxml"
    addedToStage="addedToStageHandler();"
    initialize="fontSize = 11;">

    <mx:Style>
        .header {
            font-weight: bold;
            fontSizeDelta: 5;
        }
    </mx:Style>

    <mx:Script>
        <![CDATA[
            private var _fontSize:Number;

            [Bindable("fontSizeChange")]
            public function get fontSize():Number {
                return _fontSize;
            }

            public function set fontSize(value:Number):void {
                if (_fontSize == value)
                    return;

                _fontSize = value;
                applyFontSize(_fontSize);
                dispatchEvent(new Event('fontSizeChange'));
            }

            private function applyFontSize(fontSize:Number):void {
                var selectors:Array = StyleManager.selectors;
                for each (var selector:String in selectors) {
                    var declaration:CSSStyleDeclaration = StyleManager.getStyleDeclaration(selector);
                    var delta:Number = declaration.getStyle('fontSizeDelta');
                    if (delta) {
                        declaration.setStyle('fontSize', fontSize + delta);
                        StyleManager.setStyleDeclaration(selector, declaration, true);
                    }
                }

                var global:CSSStyleDeclaration = StyleManager.getStyleDeclaration('global');
                if (!global)
                    global = new CSSStyleDeclaration('global');
                global.setStyle('fontSize', fontSize);
                StyleManager.setStyleDeclaration('global', global, true);
            }

            private function addedToStageHandler():void {
                stage.addEventListener(KeyboardEvent.KEY_UP, my_keyUpHandler);
            }

            private function my_keyUpHandler(event:KeyboardEvent):void {
                if (event.ctrlKey) {
                    var keyCode:uint = event.keyCode;
                    if (keyCode == 107 || keyCode == 187 || keyCode == 38)
                        fontSize++;
                    else if (keyCode == 109 || keyCode == 189 || keyCode == 40)
                        fontSize--;
                }
            }
        ]]>
    </mx:Script>

    <mx:Panel title="Font size change" layout="vertical"
              horizontalCenter="0" verticalCenter="0" paddingBottom="10"
              paddingLeft="10" paddingRight="10" paddingTop="10">
        <mx:HBox horizontalGap="10">
            <mx:Label text="Font size:" styleName="header"/>
            <mx:NumericStepper id="numericStepper" value="{fontSize}" 
               change="{fontSize = numericStepper.value;}" maximum="100" minimum="1"/>
        </mx:HBox>
        <mx:Label text="Ctrl+/- adjust font size too."/>
    </mx:Panel>
</mx:Application> 
```

# css - 角带文本未正确居中（纯 CSS，无图像）

> ID：10295836
> 
> 赞同：0
> 
> 时间：2012-04-24T10:09:03.400
> 
> 标签：css

我使用纯 CSS（无图像）创建了一个功能区，但其中的文本没有居中。文本：NEW 现在仅部分可见。你只能阅读：NE

请看我的小提琴：http: [//jsfiddle.net/mauricederegt/8kv6v/](http://jsfiddle.net/mauricederegt/8kv6v/)

如何解决此问题，使文本 NEW 位于功能区的中心？

亲切的问候，莫里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:07:05.183

原因是它`div.ribbon-green`非常宽，并且其中心位于右侧。NEW 中的 E 是`div.ribbon-green`. 因此，为了使 NEW 居中显示的包装部分，我们必须移动`div.ribbon-green`. 我试着移动了一下，发现以下位置有效：

```
.ribbon-green {
  left: -10px;
  top: 5px;
} 
```

# jquery - GMap：仅初始化 Streetview（无路线图）

> ID：10295838
> 
> 赞同：3
> 
> 时间：2012-04-24T10:09:05.920
> 
> 标签：jquery, google-maps, jquery-plugins, google-maps-api-3, jquery-gmap3

我正在使用“Gmap3”Jquery 插件并尝试仅初始化街景，没有街景和路线图的组合，也无法在街景和地图之间切换。Gmap3 在其文档 (http://gmap3.net/api/set-street-view.html) 中只有以下 2 个示例：

显示路线图和街景：

```
var fenway = [42.345573,-71.098326];
$('#test1').gmap3(
{ action:'init',
   zoom: 14,
   mapTypeId: google.maps.MapTypeId.ROADMAP,
   streetViewControl: true,
   center: fenway
}, 
{ action:'setStreetView',
   id: 'test1-streetview',
options:{
   position: fenway,
   pov: {
     heading: 34,
     pitch: 10,
     zoom: 1
     }
   }
}); 
```

或在路线图和街景之间切换：

```
$('#test2').gmap3({
   action:'init',
   zoom: 18,
   mapTypeId: google.maps.MapTypeId.ROADMAP,
   streetViewControl: false,
   center: [40.729884, -73.990988]
});

$('#test2-toggle').click(function(){
$('#test2').gmap3({
   action:'getStreetView',
   callback:function(panorama){
     var visible = panorama.getVisible();
     if (visible) {
       panorama.setVisible(false);
     } else {
       var map = $(this).gmap3('get');
       panorama.setPosition(map.getCenter());
       panorama.setPov({
       heading: 265,
       zoom:1,
       pitch:0}
   );
panorama.setVisible(true);
}
}
});
}); 
```

但我很抱歉，我尝试了但找不到有效的解决方案，如何在 div #streetview 中初始化街景。

非常感谢您的帮助，在此先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T22:35:29.733

老实说，我不知道这个 jquery 插件，但你刚刚使用 Maps API 尝试过吗？

[https://developers.google.com/maps/documentation/javascript/streetview](https://developers.google.com/maps/documentation/javascript/streetview)

[https://google-developers.appspot.com/maps/documentation/javascript/examples/streetview-embed](https://google-developers.appspot.com/maps/documentation/javascript/examples/streetview-embed)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-13T15:51:27.083

我经常使用这个网站，它可以帮助你解决你的问题。[http://gmap3.net/api/set-street-view.html](http://gmap3.net/api/set-street-view.html)街景全景的代码已经过测试和工作：

**CSS**

```
.gmap3,.googlemap {
  margin: 20px auto;
  border: 1px dashed #C0C0C0;
  width: 1000px;
  height: 500px;
} 
```

**HTML**

```
<div id="test1" class="gmap3"></div><div class="googlemap"></div> 
```

# javascript - 来自phonegap应用程序中本地xml文件的InputStream？

> ID：10295840
> 
> 赞同：0
> 
> 时间：2012-04-24T10:09:13.677
> 
> 标签：javascript, html, cordova

我想在我的 phonegap 应用程序中从本地 xml 文件中获取输入流。我是javascript的新手。所以任何人都可以告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:42:12.650

It is supported only in HTML5, link below may help you -

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

# python - raise 条件表达式上的语句

> ID：10295841
> 
> 赞同：32
> 
> 时间：2012-04-24T10:09:13.830
> 
> 标签：python, exception, conditional, raise, zen-of-python

遵循“武士原则”，我试图在我的功能上做到这一点，但似乎是错误的......

```
return <value> if <bool> else raise <exception> 
```

有没有其他“美丽”的方式来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-24T10:26:28.260

如果你绝对想`raise`表达，你可以这样做

```
def raiser(ex): raise ex

return <value> if <bool> else raiser(<exception>) 
```

如果函数中没有无条件，则`raiser()`此“尝试”返回 的返回值。`None``raise`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-24T10:14:08.007

内联/三元`if`是一个表达式，而不是一个语句。您的尝试意味着“如果 bool，返回值，否则返回”的结果`raise expression`- 这当然是无稽之谈，因为`raise exception`它本身就是一个语句而不是表达式。

没有办法做到这一点内联，你不应该想要。明确地这样做：

```
if not bool:
    raise MyException
return value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T10:20:55.893

我喜欢用断言来做，所以你强调那个成员必须像合同一样。

```
>>> def foo(self):
...     assert self.value, "Not Found"
...     return self.value 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T10:12:46.277

好吧，您可以单独测试布尔值：

```
if expr: raise exception('foo')
return val 
```

这样，您可以`expr`更早地进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-02T20:06:47.323

有一种方法可以在三元组内部加注，诀窍是使用`exec`：

```
def raising_ternary(x):
    return x if x else exec("raise Exception('its just not true')") 
```

如您所见，调用它`True`会执行三元组的第一部分，调用它`False`会引发异常：

```
>>> def raising_ternary(x):
...     return x if x else exec("raise Exception('its just not true')")
... 
>>> raising_ternary(True)
True
>>> raising_ternary(False)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in raising_ternary
  File "<string>", line 1, in <module>
Exception: its just not true
>>> 
```

# php - 如何避免我的推特账户被暂停？

> ID：10295843
> 
> 赞同：-2
> 
> 时间：2012-04-24T10:09:16.003
> 
> 标签：php, api, twitter, product, affiliates

我将通过 twitter 推广我的产品附属网站，我的活动会根据一些关键字（例如：红鞋）获得所有推文。然后我会回复类似“请检查我的链接[http://www.affliateexample.com/redshoe](http://www.affliateexample.com/redshoe) ”的推文。我有大量的推文数据，因此计划执行一个 cron 文件以通过我的推文应用程序（php）回复所有这些推文。这是完成这项工作的正确方法吗，否则这将暂停我的 Twitter 帐户。请就此提出建议...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T10:12:35.597

不，您正在做的事情被 ToS ( [1](https://twitter.com/tos) , [2](https://dev.twitter.com/terms/api-terms) ) 和用户都视为垃圾邮件。别这样了。

作为记录，我总是报告根据关键字自动提及我的帐户。和我一起还有一千个人。我认为可以安全地假设，即使您的帐户不会被自动标记，也有足够多的用户会点击您的帐户的举报按钮而被暂停。

*全面披露：我在荷兰的 Twitter 工作，担任国际化版主*

# java - 在另一个类中使用变量

> ID：10295844
> 
> 赞同：-1
> 
> 时间：2012-04-24T10:09:30.603
> 
> 标签：java, android, variables, latitude-longitude

参考下面的代码.. 我有一个类 LocationService 并有一个变量纬度。我想在另一个类 Post 中使用该变量。我怎么做。基本上我想得到我在其他班级也从那里得到的纬度和经度。因为我想将它发布在服务器上。那我该怎么做。

定位服务.java

```
public class LocationService extends Service{

Context context;
WakeLock wl;

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

public int onStartCommand(Intent intent, int flags, int startId) {
    PowerManager pm = (PowerManager)getSystemService(Context.POWER_SERVICE);
    wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "lock");
    wl.acquire();
    context = this;
    final String who = intent.getStringExtra("who");
    final LocationManager locMan = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    final LocationListener listener = new LocationListener(){

        // start location changed

        public void onLocationChanged(Location loc) {
            double latitude = loc.getLatitude();
            double longitude = loc.getLongitude();
                                    ......
                                    ......
                                    }
Post.java

public class Post extends LocationService { 
```

}

**编辑**Post.java****

 **```
public class Post extends LocationService {{

super.latitude = loc.getLatitude();

 }
 } 
```

这会让我从 LocationService 类到 Post 类的纬度..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:16:23.023

在 LocationService 中定义一些受保护的变量，然后 Post 可以看到它们。或者在 LocationService 中编写 getter 方法并使用 super.getLat 从 Post 调用它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:17:32.253

您的 OOPS 概念不清楚。去[这里](http://docs.oracle.com/javase/tutorial/java/index.html)

您必须将这些变量设为公共，因为您希望它们在其他类中使用并在声明的地方声明它`Context`。然后你可以创建一个类的对象并使用它。清除基本面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:26:38.363

我遇到了同样的问题，请在此处查看问题和答案：[Android：将参数从活动传递给服务](https://stackoverflow.com/questions/9954878/android-pass-parameter-to-service-from-activity)

简而言之，您需要创建一个接口来声明要从 a 调用的所有方法签名，`Activity`在您的中实现其方法，`LocalBinder`然后从您的`Activity`.**

# asp.net - 开始页面功能不起作用

> ID：10295846
> 
> 赞同：0
> 
> 时间：2012-04-24T10:09:45.503
> 
> 标签：asp.net, vb.net

我有一个 asp.net 网站，我已将 1 页“search.aspx”设置为起始页，

当我像这样输入网址时：“ [http://localhost/websitename/subfolder/Search.aspx](http://localhost/websitename/subfolder/Search.aspx) ”

它可以正常打开。

但我希望它在我输入时打开：“ [http://localhost/websitename/](http://localhost/websitename/) ”，就像这样，

我已将“search.aspx”设置为起始页。

任何人都可以请帮助，

我也尝试更改属性页。

但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:13:35.467

Visual Studio 中的起始页仅指运行解决方案时将打开的页面。

运行 localhost 时，ASP.NET 的“默认页面”[始终是](https://stackoverflow.com/questions/3398565/change-default-default-aspx-to-index-aspx-on-visual-studio-2010)Default.aspx（除非您做了很多变通方法）。

但是，在 IIS中[，您可以](http://technet.microsoft.com/en-us/library/cc753615%28v=ws.10%29.aspx)通过设置“默认文档”来控制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:14:38.727

您必须在 IIS 中为页面指定默认文档，或者将默认页面重定向到搜索页面，或者[使用 routing](http://msdn.microsoft.com/en-us/library/cc668201.aspx)。

[这是](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/dc6eb1b4-9028-4308-9935-52b64edfad36.mspx?mfr=true)在 IIS6 中设置默认文档的方法。

由于您希望子文件夹中的页面成为默认值，因此最简单的路径是重定向或路由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:07:51.403

你可以尝试这样做。

1.  取一个空白 index.htm 页面并添加元标记以重定向到您的起始页面：

    ```
    <head>
          <title></title>
      <meta HTTP-EQUIV="REFRESH" content="0; url=http://localhost/websitename/subfolder/Search.aspx">
    </head> 
    ```

2.  在 IIS 中为网站设置默认页面（index.htm）。

    *   [IIS7](http://www.netomatix.com/development/IIS7Configuration3.aspx)
    *   [IIS 6.0](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/dc6eb1b4-9028-4308-9935-52b64edfad36.mspx?mfr=true)
3.  在 web.config 中使用以下设置：

    ```
    <system.webServer>
       <defaultDocument enabled="true">
             <files>
                <add value="index.htm" />
             </files>
        </defaultDocument>
     </system.webServer> 
    ```

参考：[默认文档](http://www.iis.net/ConfigReference/system.webServer/defaultDocument)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:13:42.507

您需要在 IIS 中设置起始页。这是一个教程

[http://www.ehow.com/how_4532283_set-start-page-microsoft-iis.html](http://www.ehow.com/how_4532283_set-start-page-microsoft-iis.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T10:14:08.200

这里有两点需要考虑。

首先，您需要查看 IIS 并查看您为该 Web 应用程序设置的“默认文档”。如果未列出“search.aspx”，则该页面将不会作为该文件夹的默认页面。如果您将“search.aspx”添加为默认文档，那么您的页面将在您导航到网站名称/子文件夹/时显示

其次，您是否提供了一种遍历子文件夹的方法？IIS 将在 ..websitename/ 文件夹中查找默认文档。如果默认文档是“default.aspx”，则需要向子文件夹添加某种重定向。

或者，将子文件夹设置为您网站的根文件夹（除非您需要上一级）。

# c++ - 错误：在“v”中请求成员“stor_begin”，它是非类类型“igraph_vector_t*”

> ID：10295849
> 
> 赞同：-8
> 
> 时间：2012-04-24T10:09:54.703
> 
> 标签：c++, c, igraph

嗯，我想做这个，

“...由于 vt 是在 Stl_To_Igraph_vector_ptr_t 内的堆栈上分配的向量（即您刚刚将其声明为局部变量并且没有使用 malloc 分配它），因此一旦函数返回，它将不复存在。您存储一个指针到 igraph_vector_ptr_t 中的 vt，但是当您退出函数时，该指针变得无效，这就是为什么您稍后会收到错误。您必须使 vt 成为 igraph_vector_ptr_t，并使用 malloc 分配它，如果您希望它超过转换函数。” 由 Tamas 发布，它发布在[Using std::vector with Igraph](https://stackoverflow.com/questions/10250438/using-stdvector-with-igraph/10295364#10295364)中，我不知道如何在下一个代码中填充向量，

```
#include <igraph.h> 
#include <stdlib.h>

int print_vector(igraph_vector_t *v) {
  long int i, l=igraph_vector_size(v);
  for (i=0; i<l; i++) {
    printf(" %li", (long int) VECTOR(*v)[i]);
  }
  printf("\n");
}

int main() {

  igraph_vector_ptr_t vecs;
  long int i;

  igraph_vector_ptr_init(&vecs, 3);
  for (i=0; i<igraph_vector_ptr_size(&vecs); i++) {
    VECTOR(vecs)[i] = calloc(1, sizeof(igraph_vector_t));
    igraph_vector_init( (igraph_vector_t*)VECTOR(vecs)[i], 10);
  }

  igraph_vector_t *v;
  v=(igraph_vector_t*)malloc(sizeof(igraph_vector_t));
  igraph_vector_init(v, 10);

   VECTOR(v)[0]=1;//-------??????????

  igraph_vector_ptr_set(&vecs,0,v);

  for (i=0; i<igraph_vector_ptr_size(&vecs); i++) {
    print_vector( (igraph_vector_t*)VECTOR(vecs)[i]);
    igraph_vector_destroy( (igraph_vector_t*)VECTOR(vecs)[i]);
    free(VECTOR(vecs)[i]);
  }

  igraph_vector_ptr_destroy(&vecs);
  igraph_vector_destroy(v);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:25:29.367

`v` is a pointer, and it looks like `VECTOR` expects its argument to be a value. So change `VECTOR(v)` to `VECTOR(*v)`.

# codeigniter - Zend 和 CodeIgniter 有什么区别

> ID：10295850
> 
> 赞同：-2
> 
> 时间：2012-04-24T10:09:55.950
> 
> 标签：codeigniter, zend-framework

我想知道 CodeIgniter 和 Zend MVC 框架在编码风格方面有什么不同？

例如在数据库中检索/插入值等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:19:29.827

概念相似，但编码风格不同：

Zend Framework 使用表网关模式和行网关模式，但 CodeIgniter 只使用后者。

如果您询问命名变量和方法中使用的约定，那么 Zend 与 CodeIgniter 不同。因此编码风格不一样！

希望能帮助到你！

# c# - 如何在silverlight中将字节数组列表转换为单个多页tiff图像

> ID：10295854
> 
> 赞同：1
> 
> 时间：2012-04-24T10:10:27.920
> 
> 标签：c#, silverlight, tiff, multipage

正如我在互联网上搜索的那样，很容易将字节数组列表转换为 Windows 应用程序中的单个多页 .tiff 图像（通过 c# 语言）。该应用程序使用 Silverlight 不支持的 System.Drawing 命名空间。

显而易见的问题是，如何在 silverlight 应用程序中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:57:48.640

[LibTiff.Net 库](https://bitmiracle.com/libtiff/)支持 Silverlight。

您可以使用该库在 Silverlight 应用程序中创建 TIFF 图像。有[各种 TIFF 相关任务的示例](https://github.com/BitMiracle/libtiff.net/tree/master/Samples)可用。

该库的源代码包包含 Silverlight 测试应用程序，它展示了如何在 Silverlight 应用程序中显示 TIFF。

免责声明：我是图书馆的维护者之一。

# php - 再一次... php-mysql 导出 UTF-8 问题

> ID：10295872
> 
> 赞同：2
> 
> 时间：2012-04-24T10:11:40.793
> 
> 标签：php, mysql, utf-8, export, special-characters

我开发了一个 PHP/MySQL 应用程序，其中存储了一个表名。这些名称有时包含特殊字符（如 é、à、ë、...）。

创建表时，我忘记将搭配项设置为 UTF-8，现在设置为 LATIN1_SWEDISH_CI。所以有些数据在 phpMyAdmin 中显示不正确。但是当我在 PHP 页面上显示名称时，这些特殊字符会正确显示。这是我使用 UTF-8 的 PHP 文件的摘录

```
<?php ... ?>
<html>
  <head>
    <meta http-equiv="Content-Type" content-"text/html; charset="UTF-8">
.... 
```

就像我说的那样，特殊字符会按应有的方式显示。到目前为止……没问题。

但现在我想将该数据导出到 CSV 文件中，你猜怎么着？CSV 文件中不包含特殊字符。我的 PHP 导出文件包含以下代码行：

```
<?php
mysql_query("SET NAMES utf8");
header('Content-Type: text/html; charset=UTF-8');
... 
```

但是没有显示特殊字符？

有没有人有这个问题的解决方案？因为我觉得在 Excel 中打开 CSV 并使用“查找和替换”有点荒谬。使用 HTML 转义码是不可能的。这就是为什么有 UTF-8 的原因，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:53:57.650

您存储了 UTF-8 编码的数据，MySQL 将其视为 Latin-1 数据。MySQL 不会抱怨这一点，因为任何任意字节序列都是有效的 Latin-1。因为用于检索数据的连接的连接字符集与用于插入数据的连接字符集相同，所以正确的数据会显示在您的网页上。但是，如果您在一个煞费苦心地显示实际存储的字符的实用程序中查看数据，您会看到编码错误的文本，因为那是您实际存储的内容。

您需要做两件事：首先，您需要更改数据库连接代码，以确保您与数据库建立的所有连接都使用 UTF-8 字符集。这可以使用设置文件或仅通过在每次连接时发出 SET NAMES 语句来完成。

其次，您需要更正已经存储在数据库中的错误编码数据。**不要**alter table直接将字符集改为UTF-8；如果这样做，您将得到双 UTF-8 编码的数据。相反，使用 alter table 查询将列更改为二进制字符集，然后再将 table 更改为 UTF-8。

# android - Web 服务会话管理

> ID：10295876
> 
> 赞同：2
> 
> 时间：2012-04-24T10:11:48.000
> 
> 标签：android, wcf, session

我正在使用 android 应用程序将使用的 wcf Restful Web 服务。这些是安全服务，例如只有登录用户才能拨打电话，因此为了获取此服务，我在用户登录时创建一个会话并将其返回给用户。现在的问题是如何将此令牌传递给服务，以便 Web 服务可以验证用户会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T10:57:10.523

我找到了答案，当用户获得它存储在客户端的会话令牌时，在下一个请求中，用户将在请求标头中发送它，该标头将在服务器上提取和验证

```
 HttpRequestMessageProperty messageProperty =
                    (HttpRequestMessageProperty)
                    OperationContext.Current.IncomingMessageProperties[HttpRequestMessageProperty.Name];
token = messageProperty.Headers[TokenName]; 
```

在完成所需的请求之前，如果会话验证请求将完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T02:36:41.753

`cookies`只要您的服务设置为[ASP.NET 兼容性](http://msdn.microsoft.com/en-us/library/aa702682.aspx)，您就可以使用它来传递信息。

```
<system.serviceModel>        
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
</system.serviceModel> 
```

# android-ndk - 加载具有 root 权限的模块

> ID：10295878
> 
> 赞同：0
> 
> 时间：2012-04-24T10:12:04.753
> 
> 标签：android-ndk

我有一个在 NDK 中开发的模块。模块内的代码执行需要 root 权限的操作（即尝试使用*open系统调用打开设备驱动程序）。*该模块作为 APK 的一部分打包和加载。

尝试使用 NDK 功能的 android 应用程序失败并出现“权限被拒绝”错误。这是因为模块/应用程序没有root权限。

是否可以使用 root 权限加载模块？如果是，如何？

提前感谢所有贡献者。奈都

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:32:00.623

最好的方法是编写您自己的可执行文件并使用 su 从您的 android 应用程序中调用它。如何编写自己的可执行文件可在我的[个人博客](http://www.btrnaidu.com/index.php/building-own-executable-in-android/)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:46:36.067

如果您的设备版本 < 3.0，请在将设备与您的电脑连接后运行该命令 -

```
cmd:>adb remount
cmd:>adb push <your apk file name> /system/app
cmd:>adb shell
#reboot 
```

您的应用程序将在重新启动后安装。

# c# - 对象引用未设置为对象 xdocument 的实例

> ID：10295882
> 
> 赞同：0
> 
> 时间：2012-04-24T10:12:27.267
> 
> 标签：c#, xml

嗨，我在下面的代码中注释的行出现错误，`object reference not set to an instance of an object`有没有办法解决它？

```
 private void button20_Click(object sender, EventArgs e)
    {
        string blabla1 = string.Format("http://localhost:8000/Service/AuthenticateUser/{0}/{1}", textBox30.Text, textBox31.Text);
        XDocument xDoc = XDocument.Load(blabla1);
        xDoc.Element("StudentID").Value.ToList(); // object reference not set to an instance of an object?

        dataGridView12.DataSource = xDoc;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:15:25.580

当`xDoc.Element("StudentID")` 未找到时，调用`.Value`将给出该异常。

你可能想要

```
 //xDoc.Element("StudentID").Value.ToList();
 //List<string> ids = xDoc.Descendants("StudentID").Value.ToList();
 List<string> ids = xDoc.Descendants("StudentID").Select(e => e.Value).ToList(); 
```

但这假设 XML 不使用名称空间。

编辑：

> 我想回来`result.StudentID;`

```
string id = xDoc.Descendants("StudentID").Single().Value; 
```

# php - 使用 php 更新 mysql 数据库时的额外空格

> ID：10295883
> 
> 赞同：1
> 
> 时间：2012-04-24T10:12:30.540
> 
> 标签：php, mysql

我正在通过 url 从 android 向 php 发送两个数组列表，例如 [P,Q,R,S,T,U,V] 和 [A,B,C,D,E,F,G]。更新时 [P,Q,R,S,T,U,V] 被 [A,B,C,D,E,F,G] 替换并且更新正确进行。但是在mysql数据库中更新第一行即A正在正确更新，并且从第二行即B到G每次更新它最初在每行的开头获得额外的空间

```
 Before update  After update1    After2nd update       
        P            A               A
        Q             B                B
        R             C                C
        S             D                D
        T             E                E
        U             F                F
        V             G                G 
```

我试试这段代码

```
 <?php
             $old_menu_names=explode(',',preg_replace('/^.*\[(.*)\].*$/','$1',trim($_POST['menuname'], '[]')));
             $new_menu_names=explode(',',preg_replace('/^.*\[(.*)\].*$/','$1',trim($_POST['editmainmenu'], '[]')));
             mysql_connect("localhost", "root", "root");
             mysql_select_db("test");
             foreach ($old_menu_names as $key => $old_name)
             {
             $new_name = mysql_real_escape_string($new_menu_names[$key]);
             $old_name  = mysql_real_escape_string($old_menu_names[$key]);

             mysql_query("UPDATE `test` SET `menuname` = '$new_name' WHERE menucode = '$old_name'")
    or die('Error' . mysql_error());
            echo "Updated";
              }
             ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:55:36.137

```
mysql_query("UPDATE `test` SET `menuname` = ltrim('$new_name') WHERE menucode = '$old_name'")
    or die('Error' . mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:00:54.777

无论您在哪里传递变量，只需修剪变量然后传递给查询。像

$name_new=trim($name);

修剪功能将删除左侧空格以及右侧空格。所以最好只选择 trim 而不是 ltrim。谢谢

# ruby-on-rails - 移动或复制关联

> ID：10295886
> 
> 赞同：0
> 
> 时间：2012-04-24T10:12:40.917
> 
> 标签：ruby-on-rails, associations, cloning

我有一个名为 ListedProduct 的多态关联。这是与产品、价格和规格等一些关联的记录。

它是多态的，因为它可以关联到购物车或订单。

现在的问题是我需要将其从购物车移动或复制到订单中。

**例如：**

购物车有一些listed_products，用户想要订购这些。

现在他们需要关联到新订单而不是购物车。

**可能性：**

手动复制所有属性。这感觉不对。

将多态列更改为新的类型和 ID。问题：订单尚未保存且没有 ID。

我敢打赌还有其他方法，我只是不知道要寻找什么..

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:21:32.280

如果您需要所有时间，您可以使用以下关键字来引用另一个对象

```
delegate
alias_method 
```

# ruby-on-rails - Rails 应用程序部署另一个 Rails 应用程序

> ID：10295908
> 
> 赞同：0
> 
> 时间：2012-04-24T10:14:09.123
> 
> 标签：ruby-on-rails, deployment, nginx, unicorn

我在谷歌上快速浏览了一下无济于事。

我正在寻找一种编写 Rails 应用程序的方法，该应用程序可以使用 nginx unicorn 部署另一个 Rails 应用程序，以及完成这项工作所需的一切。

理想情况下，用户会看到一个屏幕，他们将在其中输入用户名密码、电子邮件和站点名称。

然后应用程序将创建站点并为其提供 URL sitename.appname.com

谢谢

灰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:49:41.273

他们被称为engineyard和heroku。

Rails 可能不会做太多事情，但会给你控制面板，所有的魔法都在幕后。如果您只是对现有应用程序进行子域化，Rails 也可以这样做，并且您也不需要在每个子域上都使用新的 nginx/unicorn。

“这取决于您的应用程序并且没有足够的信息可以继续”的典型答案也适用。

# apache2 - 无法使用 Apache 2.2 在 VPS 上添加第二个网站（多个域）

> ID：10295910
> 
> 赞同：2
> 
> 时间：2012-04-24T10:14:15.360
> 
> 标签：apache2

我有一个带有网站（www.domain1.com）的 VPS（Ubuntu 10.04、Apache 2.2、RoR、Passenger、mysql）。我现在需要运行第二个网站 (www.domain2.com)。但是在我完成所有设置后，网站没有显示。

我添加在 apache2/sites-enabled/domain2.com

```
<VirtualHost *:80>

  ServerAdmin email@test.com
  ServerName  www.domain2.com
  ServerAlias domain2.com

  DirectoryIndex index.html
  DocumentRoot /home/user/public_html/domain2.com/current/public

  LogLevel debug
  ErrorLog  /home/user/public_html/domain2.com/current/log/error.log
  CustomLog /home/user/public_html/domain2.com/current/log/access.log combined

</VirtualHost> 
```

这与domain1基本相同，只是域名不同。domain2的代码在/home/user/public_html/domain2.com/current/

httpd.conf 是空的（我认为这对于 Apache 2.2 来说是可以的）， apache2.conf 的相关部分是：

```
ServerRoot "/etc/apache2"

# Include generic snippets of statements
Include /etc/apache2/conf.d/

# Include the virtual host configurations:
Include /etc/apache2/sites-enabled/

ServerName 23.42.74.241

LoadModule passenger_module /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.9/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.9
PassengerRuby /usr/local/bin/ruby

PassengerDefaultUser user 
```

/etc/apache2/conf.d/servername.conf 是：

```
ServerName general 
```

我不确定这个名字（“一般”）是否相关......

在 sudo /etc/init.d/apache2 restart domain1.com 之后仍然可以正常工作，但 domain2 不行。域 1 和域 2 的 DNS 设置相同，测试为我提供了域 2 的正确 DNS 服务器。使用 www.dns-info.cz 的唯一错误是：

区域中 NS 记录的出席 (信息) 错误 尽管至少有一个名称服务器返回此域名的权威数据，但该区域不包含任何 NS 记录。该区域必须包含与父服务器相同的 NS 记录。

我不确定此错误是否与问题直接相关，这仅供您参考。有谁知道如何解决这个问题？

# stored-procedures - 在数据库中使用序列时如何确保线程安全？

> ID：10295912
> 
> 赞同：1
> 
> 时间：2012-04-24T10:14:18.060
> 
> 标签：stored-procedures, informix

我有一个在存储过程中使用的序列，它更新多个表，如下所示：

```
create procedure()
   -- retrieve new sequence number
   sequence.nextval();

   -- update table_A using newly created sequence number
   insert into table_A(theID) values(sequence.currval());

   -- update table_B using newly created sequence number
   insert into table_B(theID) values(sequence.currval());
end procedure; 
```

请问上面的代码是否是线程安全的实现？对于每一个过程的执行，我能否保证table_A和table_B中的ID在一次有多个执行时总是检索到相同的序列号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:15:52.067

Informix 的主要目标之一是确保该过程完全按照您的需要运行，无论有多少用户同时运行相同的过程。实际上，您可以拥有多个自己的并发会话，每个会话都在运行该过程，并且每个会话都与所有其他会话隔离。

因此，显示的代码是“线程安全的”。

# java - 在周期性分子动力学模拟中实施速度 Verlet 算法时的失控速度

> ID：10295913
> 
> 赞同：2
> 
> 时间：2012-04-24T10:14:19.007
> 
> 标签：java, simulation, verlet-integration

我正在尝试为具有周期性或反射边界条件的二维盒子中的伦纳德-琼斯流体编写分子动力学模拟。模拟似乎在反射边界上运行良好，但由于某种原因，周期盒中的粒子在几百个积分步骤后开始获得额外的速度，最终没有粒子留在盒子中。

我知道速度失控可能是由于时间步设置太小而引起的。然而，当我使用相同的速度-verlet 算法运行模拟时，我看不出这可能是速度失控的原因，尤其是反射边界工作得很好。我认为在这两种情况下用于评估粒子上的力或粒子分离的方法可能存在错误，但我自己无法找到它。

我用来评估力的代码如下所示：

```
public static Vector3d LJForce(Particle3d a, Particle3d b,
        Vector3d particleSep) {

    //Define R (for simplicity)
    Vector3d R = particleSep; //(b-a)

    return new Vector3d(Vector3d.multVector3d(
            -24*EPSILON*(2*power12(SIGMA/R.getMag())/R.getMag()
                    -power6(SIGMA/R.getMag())/R.getMag()), R));
} 
```

这应该赋予作用在每个粒子上的伦纳德-琼斯力。粒子分离取决于边界条件。对于反射，它是：

```
@Override
public Vector3d getParticleSeparation(Particle3d a, Particle3d b) {
    return Particle3d.sepParticle3d(a, b);
} 
```

与

```
@Override
public void checkBoundaries(Particle3d a)   {
    Vector3d position = a.getPosition();
    Vector3d velocity = a.getVelocity();

    /*
     * We want to check the x,y and z coordinates. If
     * they break the boundaries we need to reflect 
     * the position in that coordinate and invert the
     * velocity in that axis.
     */
    //X coordinate
    if(position.getX()<0.0) {
        position.setX(Math.abs(position.getX()));
        velocity.setX(-velocity.getX());    
    }
    else if(position.getX()>getWidth()) {
        double howFar = position.getX()-getWidth();
        position.setX(getWidth()-howFar);
        velocity.setX(-velocity.getX());
    }   
    else    {}
    //Y coordinate
    if(position.getY()<0.0) {
        position.setY(Math.abs(position.getY()));
        velocity.setY(-velocity.getY());    
    }
    else if(position.getY()>getWidth()) {
        double howFar = position.getY()-getWidth();
        position.setY(getWidth()-howFar);
        velocity.setY(-velocity.getY());
    }   
    else    {}
    //Z coordinate
    if(position.getZ()<0.0) {
        position.setZ(Math.abs(position.getZ()));
        velocity.setZ(-velocity.getZ());    
    }
    else if(position.getZ()>getWidth()) {
        double howFar = position.getZ()-getWidth();
        position.setZ(getWidth()-howFar);
        velocity.setZ(-velocity.getZ());
    }   
    else    {}

    a.setPosition(position);
    a.setVelocity(velocity);
}//End checkBoundaries(i) 
```

将粒子保留在盒子中。另一方面，对于定期...

```
@Override
public Vector3d getParticleSeparation(Particle3d a,Particle3d b) {
    Vector3d sep = Particle3d.sepParticle3d(a, b);
    if(sep.getX()>=(double)getWidth()/2)    {
        sep.setX(sep.getX()-getWidth());
    }   else{}
    if(sep.getY()>=(double)getWidth()/2)    {
        sep.setY(sep.getY()-getWidth());
    }   else{}
    if(sep.getZ()>=(double)getWidth()/2)    {
        sep.setZ(sep.getZ()-getWidth());
    }   else{}

    return sep;
} 
```

给出粒子分离和

```
@Override
public void checkBoundaries(Particle3d a) {
    Vector3d position = new Vector3d();

    position.setX((getWidth()+a.getPosition().getX())%getWidth());
    position.setY((getWidth()+a.getPosition().getY())%getWidth());
    position.setZ((getWidth()+a.getPosition().getZ())%getWidth());

    a.setPosition(position);
} 
```

检查边界。两种分离方法都调用

```
//Relative seperation
public static Vector3d sepParticle3d( Particle3d a, Particle3d b) {
    return new Vector3d(Vector3d.subVector3d(b.getPosition(),a.getPosition()));
} 
```

这只是笛卡尔空间中两个粒子的矢量分离。我的编码是否有错误，或者我的模拟因周期性边界条件而崩溃的其他原因？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:47:09.857

也许你已经想通了，但我认为错误在于周期性边界的 checkBoundaries 代码。我可能错了，但我认为您不能在浮点数/双精度数上使用 % 运算符。我认为代码应该是（另见[https://en.wikipedia.org/wiki/Periodic_boundary_conditions](https://en.wikipedia.org/wiki/Periodic_boundary_conditions)）

```
Vector3d op = a.getPosition(); //old position
double w = getWidth();
position.setX( op.getX() - w*((int)(2*op.getX()-1)) );
position.setX( op.getY() - w*((int)(2*op.getY()-1)) );
position.setX( op.getZ() - w*((int)(2*op.getZ()-1)) ); 
```

# android - android：使用 sharedperfrences 保存 textview

> ID：10295916
> 
> 赞同：0
> 
> 时间：2012-04-24T10:14:29.973
> 
> 标签：android, save

我编写了通过按 + 按钮计算某些内容的应用程序，并将其显示在文本视图中。知道我想在 onstop() 方法中保存文本视图的值并在 onstart 中使用它并再次在文本视图上显示该值。实际上我做到了，**但是当我单击 + 按钮时，文本视图重置为 1 而不是从最后一个值增加**。我实际上将文本视图值保存在 onSaveInstanceState 中并在 onRestoreInstanceState 上使用它。main.java 代码：

```
public class main extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    int salavatcount ;
    public String fonts="NAZANIN.TTF";
    TextView salavatcounter;
    Button addsalavat,sefrkon;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (savedInstanceState == null) {
           salavatcount = 0;
        }
        setContentView(R.layout.main);
        salavatcounter = (TextView) findViewById(R.id.salavatcounter);
        addsalavat = (Button) findViewById(R.id.addsalavat);
        addsalavat.setOnClickListener(this);
        sefrkon = (Button) findViewById(R.id.sefrkon);
        sefrkon.setOnClickListener(this);
        SharedPreferences setting =getSharedPreferences("setting",0);
        salavatcounter.setText(setting.getString("salavatcount", ""+0));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater menu_option_infalter = getMenuInflater();
        menu_option_infalter.inflate(R.menu.optionmenu, menu);        
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId()== R.id.about) {
            Intent intent = new Intent(main.this,about.class);
            startActivity(intent);
        }
        return super.onOptionsItemSelected(item);
    }

        @Override
    protected void onSaveInstanceState(Bundle savedInstanceState) {
            savedInstanceState.putString("YourTextViewTextIdentifier",
                salavatcounter.getText().toString()
            );
            savedInstanceState.putInt("int", salavatcount);
            super.onSaveInstanceState(savedInstanceState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        salavatcounter.setText(savedInstanceState.getString("YourTextViewTextIdentifier"));
        salavatcount = savedInstanceState.getInt("int");
    }

    @Override
    protected void onStop() {    
        super.onStop();
        SharedPreferences setting=getSharedPreferences("setting", 0);
        SharedPreferences.Editor editor=setting.edit();
        editor.putString("salavatcount", salavatcounter.getText().toString());
        editor.commit();
    }

    public void onClick(View v) {
        if (v.getId()== R.id.addsalavat){
            salavatcount++;
            salavatcounter.setText(""+salavatcount);
        }
        else if (v.getId() == R.id.sefrkon) {
            salavatcount=0;
            salavatcounter.setText(""+salavatcount);
        }
    }
} 
```

编辑：日志

```
04-24 01:59:50.823: W/dalvikvm(6645): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-24 01:59:50.833: E/AndroidRuntime(6645): Uncaught handler: thread main exiting due to uncaught exception
04-24 01:59:50.843: E/AndroidRuntime(6645): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pishgamanit.salavatcounter/com.pishgamanit.salavatcounter.main}: java.lang.NullPointerException
04-24 01:59:50.843: E/AndroidRuntime(6645):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at android.os.Looper.loop(Looper.java:123)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at android.app.ActivityThread.main(ActivityThread.java:4363)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at java.lang.reflect.Method.invoke(Method.java:521)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at dalvik.system.NativeStart.main(Native Method)
04-24 01:59:50.843: E/AndroidRuntime(6645): Caused by: java.lang.NullPointerException
04-24 01:59:50.843: E/AndroidRuntime(6645):     at com.pishgamanit.salavatcounter.main.onCreate(main.java:29)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-24 01:59:50.843: E/AndroidRuntime(6645):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-24 01:59:50.843: E/AndroidRuntime(6645):     ... 11 more
04-24 01:59:50.863: I/dalvikvm(6645): threadid=7: reacting to signal 3
04-24 01:59:50.863: E/dalvikvm(6645): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:19:02.657

您在此处将 salvatcount 初始化为 0：

```
if (savedInstanceState == null) {
    salavatcount = 0;
} 
```

相反，使用共享首选项中的值对其进行初始化：

```
SharedPreferences setting =getSharedPreferences("setting",0);
salvatcount = Integer.valueOf(setting.getString("salavatcount", "0"));
// ....
salavatcounter.setText("" + salvatcount); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:26:08.257

您没有将 salavatcount 的值设置为您共享偏好的值。当您单击按钮时，它被重置为 0，因为这是 salavatcount 的默认值。

您还将 int 值保存为字符串。

```
 @Override
protected void onStop() {
    super.onStop();

    SharedPreferences setting= getSharedPreferences("setting", 0);
    SharedPreferences.Editor editor=setting.edit();
    editor.putInt("salavatcount", salavatcount);
    editor.commit();

    } 
```

然后在您的 on create 方法中，从 SharePreferences 中设置 salavatcount 值。

```
int salavatcount;
public String fonts="NAZANIN.TTF";
TextView salavatcounter;
Button addsalavat,sefrkon;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

   setContentView(R.layout.main);

   salavatcounter = (TextView) findViewById(R.id.salavatcounter);
   addsalavat = (Button) findViewById(R.id.addsalavat);
   addsalavat.setOnClickListener(this);
   sefrkon = (Button) findViewById(R.id.sefrkon);
   sefrkon.setOnClickListener(this);

   SharedPreferences setting = getSharedPreferences("setting", 0);

   salavatcount = setting.getInt("salavatcount", 0);

   salavatcounter.setText("" + salavatcount);

  } 
```

**编辑：**

我会像这样重写代码：

```
public class main extends Activity implements OnClickListener {
/** Called when the activity is first created. */
int salavatcount ;
public String fonts="NAZANIN.TTF";
TextView salavatcounter;
Button addsalavat,sefrkon;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

   setContentView(R.layout.main);

   if (savedInstanceState == null) {

       salavatcount = savedInstanceState.getInt("count");

   } else {

       SharedPreferences setting = getSharedPreferences("setting", 0);

       salavatcount = setting.getInt("salavatcount", 0);

   }

   salavatcounter = (TextView) findViewById(R.id.salavatcounter);
   addsalavat = (Button) findViewById(R.id.addsalavat);
   addsalavat.setOnClickListener(this);
   sefrkon = (Button) findViewById(R.id.sefrkon);
   sefrkon.setOnClickListener(this);

   salavatcounter.setText("" + salvatcount);

  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menu_option_infalter = getMenuInflater();
    menu_option_infalter.inflate(R.menu.optionmenu, menu);      
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    if (item.getItemId()== R.id.about) {
        Intent intent = new Intent(main.this,about.class);
        startActivity(intent);
        }
    return super.onOptionsItemSelected(item);
}

    @Override
protected void onSaveInstanceState(Bundle savedInstanceState) {
        savedInstanceState.putInt("count", salavatcount);
        super.onSaveInstanceState(savedInstanceState);
  }

  @Override
protected void onStop() {
    super.onStop();

    SharedPreferences setting= getSharedPreferences("setting", 0);
    SharedPreferences.Editor editor=setting.edit();
    editor.putInt("salavatcount", salavatcount);
    editor.commit();

    }

public void onClick(View v) {
    // TODO Auto-generated method stub

    if (v.getId()== R.id.addsalavat){

        salavatcount++;

        salavatcounter.setText(""+salavatcount);

    }else if (v.getId() == R.id.sefrkon) {
        salavatcount=0;

        salavatcounter.setText(""+salavatcount);
    }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T00:23:52.670

我将代码更改为此并解决了我的问题。感谢所有帮助我的人

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState == null) {
        salavatcount = 0;
    }
    setContentView(R.layout.main);
    salavatcounter = (TextView) findViewById(R.id.salavatcounter);
    addsalavat = (Button) findViewById(R.id.addsalavat);
    addsalavat.setOnClickListener(this);
    sefrkon = (Button) findViewById(R.id.sefrkon);
    sefrkon.setOnClickListener(this);

    // Start save value of salavatcount when exit App
    SharedPreferences setting = getSharedPreferences("countersetting", 0);
    salavatcount = setting.getInt("countervalue", 0);
    salavatcounter.setText(""+salavatcount);
    // End save value of salavatcount when exit App
} 
```

和 onstop 方法

```
@Override
protected void onStop() {
    super.onStop();
    // Start save value of salavatcount when exit App
    SharedPreferences setting = getSharedPreferences("countersetting", 0);
    SharedPreferences.Editor editor=setting.edit();
    editor.putInt("countervalue", salavatcount);
    editor.commit();
    // End save value of salavatcount when exit App
} 
```

# signals - 在 RPython 中捕获信号

> ID：10295921
> 
> 赞同：2
> 
> 时间：2012-04-24T10:14:41.167
> 
> 标签：signals, pypy, rpython

如何`SIGINT`在翻译的 RPython 程序中捕获信号（特别是/特别是）？

我已经浏览了 PyPy 源代码树，找到了 CPython`signal`模块，并尝试在翻译的程序中使用它会在翻译过程中出现预期的错误：

```
[translation:ERROR]  Exception: unexpected prebuilt constant: <built-in function signal> 
```

还有，[`pypy.module.signal`](https://bitbucket.org/pypy/pypy/src/7fc6072593dd/pypy/module/signal)但我不知道这是否是我应该使用的，或者如何使用它。该模块确实提供了一个`signal`功能，但它需要一个额外的`space`参数；这些`space`参数出现在源代码树的几个地方，我无法弄清楚它们指的是什么，或者我应该在那里传递什么。

**背景：**我希望有一个可以运行任意时间长度的计算，但要捕获`^C`，以便我可以在程序退出之前打印出迄今为止的结果。（主循环周围的明显`try: ... except KeyboardInterrupt: ...`也不起作用。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:32:46.617

您必须使用 RPython 信号处理函数，它是平台函数的一个小包装。您需要的功能在`pypy.module.signal.interp_signal`. 例如，`pypysig_ignore(signum)`等价于`signal(signum, SIG_IGN)`。调用`pypysig_poll`以返回未决信号（如果有）。这是要求处理信号并等待它到达的摘录

```
pypysig_setflag(signum)
while True:
    n = pypysig_poll()
    if n < 0:
        # No signals pending
        break
    if n == signum:
        handle_signal() 
```

# jpa - JPA 1.0 @OrderBy 使用字段名，而 JPA 2.0 @OrderColumn 使用列名

> ID：10295923
> 
> 赞同：5
> 
> 时间：2012-04-24T10:14:48.747
> 
> 标签：jpa, sql-order-by, jpa-2.0

根据 Java EE 6 文档，JPA 1.0`@OrderBy`使用字段名，而 JPA 2.0`@OrderColumn`在声明注释时使用列名。看这里：

[http://docs.oracle.com/javaee/6/api/javax/persistence/OrderBy.html](http://docs.oracle.com/javaee/6/api/javax/persistence/OrderBy.html)

[http://docs.oracle.com/javaee/6/api/javax/persistence/OrderColumn.html](http://docs.oracle.com/javaee/6/api/javax/persistence/OrderColumn.html)

前者从 JPA 1.0 开始可用，后者是在 JPA 2.0 中添加的。如果您阅读文档片刻，就会清楚`@OrderBy`使用字段/属性来指定顺序，而`@OrderColumn`使用 SQL/DDL 列名。

为什么会这样？对我来说，这看起来很矛盾。

有没有更深层次的原因是为什么事情会这样？它是 JPA 1.0 的遗物吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:45:51.353

尝试了解有序列表（JPA1、JPA2）和索引列表（JPA2）之间的区别。一个按条件对元素进行排序，另一个保留它们插入的位置。它们满足不同的用例。OrderColumn 允许为模式生成目的指定列名。OrderBy 提供了一种用于检索目的的查询机制。因此，注释和 XML 允许输入的内容是不同的。

# java - Android - 使用简单 XML 仅从 XML 文件中获取一些元素

> ID：10295927
> 
> 赞同：4
> 
> 时间：2012-04-24T10:14:53.937
> 
> 标签：java, android, xml, mapping, simple-framework

我的 Android 应用程序使用[Simple XML](http://simple.sourceforge.net)读取一个巨大的 XML 文件。显然这需要一段时间。事实是，目前，我只需要检索一个元素列表。有没有办法强制简单 XML 不读取所有其他元素？

我不想使用另一个库。我只是想知道这种高级的东西是否可以使用简单的 XML。

谢谢您的帮助。

* * *

**编辑**

使用[MH](https://stackoverflow.com/questions/10295927/android-get-only-some-elements-from-xml-file-with-simple-xml/10296288#10296288)建议，解析仍然需要 50 秒...

所以我想尝试使用[Ilya Blokh的其他解决方案](https://stackoverflow.com/questions/10295927/android-get-only-some-elements-from-xml-file-with-simple-xml/10296241#10296241)[XmlPullParser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)。

这是 XML 文件所需的部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<ROOT>
    ....
    <ANIMALS>
        <animal>
            <name>Dog</name>
            <color>white</color>
            <color>black</color>
            <color>brown</color>
        </animal>
        <animal>
            <name>Cat</name>
            <color>white</color>
            <color>black</color>
            <color>gray</color>
            <color>red</color>
        </animal>
        ...
    </ANIMALS>
    ...
</ROOT> 
```

我想填充这个类：

```
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class Animals {

    /**
     * Key: animal name, Value: animal colors
     */
    private Map<String, List<String>> entries;

    public Animals() {
        entries = new HashMap<String, List<String>>();
    }

    public void addAnimal(String name, List<String> colors) {
        entries.put(name, colors);
    }

    public List<String> getColors(String animalName) {
        return entries.get(animalName);
    }
} 
```

我该如何处理列表和 XmlPullParser？我不习惯使用解析器...

再次感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:39:36.170

您可以使用[松散映射标志](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#loosemap)来绕过指定整个文档结构的严格要求。如果您直接在 上使用此功能，在您的情况下可能会特别方便`Persister`，因为您提到只对单个元素列表感兴趣。查看并阅读链接的示例。

不幸的是，我对 Simple XML 的内部结构不够熟悉，无法说出*“不要阅读所有其他元素”的*任何内容。我想如上所述的松散映射选项只会产生您感兴趣的映射，但我怀疑您是否可以避免解析整个 XML 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:42:31.657

为此使用 simplexml。当xml变得复杂时，我发现与android一起使用的最好的就是简单的xml。因此，在您的情况下，代码将是这样的，我无法很好地格式化它，但它会有所帮助。缺点：你必须创建一堆类（取决于 xml 结构）但是一旦你创建了它们，之后就真的很顺利了。此外，在类中添加 getter 以评估值。希望这可以帮助

```
import java.util.ArrayList;
import org.simpleframework.xml.Attribute;
import org.simpleframework.xml.Element;
import org.simpleframework.xml.ElementList;
import org.simpleframework.xml.Namespace;
import org.simpleframework.xml.Root;

@Root(name = "ANIMALS", strict = false)
@Namespace(reference = "whatever", prefix = "sumthing")
public class Animal {
@ElementList(required = false, inline = true)// this will work even if some other
// element gets added to your ANIMALS element.
private ArrayList<Animal> somename; // does not matter
}

@Root(name = "animal", strict = false)
@Namespace(reference = "whatever", prefix = "sumthing")
public class Animal {
@Element(required = false)// to make it work even when this element is not part of 
    the string
private String name;
@ElementList(required = false, inline = true)
private ArrayList<Color> colors;
}

@Element(name = "color")
@Namespace(reference = "whatever", prefix = "sumthing")
public class Color {
@Element(required = false)   
private String clr;
public String getColor(){
return clr; 
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:31:58.753

首先，您需要通过考虑您的应用程序需求来证明为什么首先需要使用 SimpleXML。为什么不使用基于 Java 的 XML 解析。以下是您可以使用的选项列表：[Java 的最佳 XML 解析器](https://stackoverflow.com/questions/373833/best-xml-parser-for-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:35:14.643

也许当你看到它是多么容易时，你会改变主意`XmlPullParser`。

你可以在这里阅读：http: [//developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)

使用示例`XmlPullParser`：

```
XmlPullParser parser = getResources().getXml(R.xml.yourxml);
try {
            while (parser.getEventType() != XmlPullParser.END_DOCUMENT){
                if(parser.getEventType() == XmlPullParser.START_TAG && 
                        parser.getName().equalsIgnoreCase("object")){

                            name = parser.getAttributeValue(null, "name");
                            site = parser.getAttributeValue(null, "site");
                            phone = parser.getAttributeValue(null, "phone");
                            adds = parser.getAttributeValue(null, "address");
                }
                parser.next();
            }
        }  catch (IOException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } 
```

# redmine - 将项目从 Mantis 迁移到 Redmine？

> ID：10295933
> 
> 赞同：0
> 
> 时间：2012-04-24T10:15:25.607
> 
> 标签：redmine, data-migration, mantis

[Redmine 官方文档](http://www.redmine.org/projects/redmine/wiki/RedmineMigrate)教授如何迁移完整的 Mantis 数据库，包括所有用户、项目和问题。有没有办法在每个项目的基础上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-07T07:10:31.963

这是一个将任务从 mantis 迁移到 redmine 的免费程序。您可以按项目过滤 mantis 问题并将其导出为 XML。[从这里](https://drive.google.com/file/d/0B2Qycu9v6OK5Z2RDWVpOSVNBRmM/view?usp=sharing)下载 zip 存档。在任意文件夹中解压并运行 mantis_redmine.exe。接下来按照用户指南[http://ramilnotes.blogspot.ru/2016/09/importissuesfrommantistoredmine.html](http://ramilnotes.blogspot.ru/2016/09/importissuesfrommantistoredmine.html)。该程序使用从 mantis 导出的 XML 将问题导入 redmine。我已经在 redmine 3.3.0 上批准了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:19:09.193

我在开源社区中找不到任何关于这个主题的东西。

但是，有一个商业工具。它被称为任务适配器。我们已经成功地使用它从 Mantis 将某个项目导入到 Redmine 中。

# php - 在另一个类的另一个文件中调用 php 类

> ID：10295936
> 
> 赞同：0
> 
> 时间：2012-04-24T10:15:36.280
> 
> 标签：php, syntax, syntax-error

我的代码有小问题。我应该在我的 php 脚本中调用另一个函数中的一个函数。然而，这两个函数在不同的脚本中。我正在尝试运行脚本，但它们只是在抛出错误。这是我如何编写脚本的示例。第一个脚本是confirmLib.php

```
<?php
class confirmClass{
function confirm()
{
return true;
}

}?> 
```

第二个是usersLib.php

```
 <?php
require("confirmLib.php");
class user
{

var $confirmed= null;
}

public addUser(){
$comfirmUser = new confirmClass();
$confirmed = $comfirmUser->confirm()
}

addUser();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:21:56.690

这里的问题是你写的`public addUser()`PHP 总是强迫你使用关键字`function`。

```
public function addUser(){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:23:30.577

你有很多基本错误，为什么不只是修正错误？

```
 <?php
require("confirmLib.php");
class user
{

var $confirmed= null;
} 
```

这`}`不应该在那里。它关闭了课程。

```
public addUser(){ 
```

您缺少关键字“功能”

```
$comfirmUser = new confirmClass();
$confirmed = $comfirmUser->confirm() 
```

你错过了一个`;`

```
}

addUser(); 
```

这是在这里做什么？您应该在这里关闭您的课程，然后添加一个`new user`呼叫和一个`user->addUser()`呼叫。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:21:21.260

在你的`addUser`方法中这样做：

```
public addUser() 
{
    $confirmUsers = new confirmClass();
    $user = new user();
    $user->confirmed = $confirmUsers->confirm();
} 
```

# jsf - JSF 2：p:dataList 中的重复 ID

> ID：10295940
> 
> 赞同：0
> 
> 时间：2012-04-24T10:15:45.203
> 
> 标签：jsf, jsf-2, primefaces, facelets, mojarra

我有每个客户的计费服务列表，我正在尝试构建一个表格，用户可以在其中选择哪些服务应该实际计费：

```
<p:dataList value="#{billController.billings}" var="billings">
    <p:dataTable value='#{billings.billablesDataModel}' var='item' selection="#{billings.toBill}">
        <f:facet name="header"> 
            <h:outputText value="#{billings.client.id}" />
        </f:facet>

        [...]

    </p:dataTable>
</p:dataList> 
```

问题是，所有数据表都使用`j_idt9:j_idt13:0:j_idt14`由 JSF 自动分配的相同 ID 属性 () 呈现。我怀疑这导致选择不起作用。（支持 bean`billings.toBill`未更新/保持为空。）

我试图`dataTable`像这样手动设置 ID 属性：

```
<p:dataTable id="#{billings.client.id}" ...> 
```

但是，我收到以下错误：

```
java.lang.IllegalArgumentException: Empty id attribute is not allowed 
```

（`#{billings.client.id}`绝对设置为唯一客户端的 ID，因为我从一个`h:outputText`用于调试的目的获得了正确的输出。）

你能帮我解决这个问题吗？

我在 Tomcat 6 上使用 JSF Mojarra 2.1.1 和 PrimeFaces 3.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:51:40.273

您需要将 p:column 用于 datalist 的内容，如用户指南中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:47:10.647

如果你`billController.billings`通过`ui:repeat`而不是通过循环怎么办`p:dataList`：

```
<ui:repeat var="billings" value="#{billController.billings}">
    <p:dataTable value="#{billings.billablesDataModel}" var="item" selection="#{billings.toBill}">
        [...]
    </p:dataTable>
</ui:repeat> 
```

# mysql - 加入可能包含 NULL 的列

> ID：10295941
> 
> 赞同：2
> 
> 时间：2012-04-24T10:15:47.040
> 
> 标签：mysql, sql

我想做这样的事情：

```
SELECT
    Users.id,
    Countries.name 
FROM
    Users, Countries
WHERE 
    Users.country_id = Countries.id 
```

问题是`Users.country_id`有时可以`NULL`，如果是，则不会返回整行。我希望它返回该行，但该列中有“null”或“”。我试过这个：

```
SELECT
    Users.id,
    Countries.name 
FROM
    Users, Countries
WHERE 
    (Users.country_id = Countries.id OR Users.country_id IS NULL) 
```

但是，对于***存在******的每个**** *`Countries.id`**返回该行一次。我该如何解决这个问题？

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T10:18:03.673

```
SELECT  users.id, countries.name
FROM    users
LEFT JOIN
        countries
ON      countries.id = users.country_id 
```

这是为什么首选`ANSI`连接语法（使用`JOIN`关键字）的一个很好的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T10:18:33.003

```
SELECT          Users.id,
                Countries.name
FROM            Users
LEFT OUTER JOIN Countries ON Users.country_id = Countries.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:42:02.933

```
SELECT
    Users.id,
    Countries.name 
FROM
    Users, Countries
WHERE 
    Users.country_id = Countries.id
UNION
SELECT
    id,
    '{{no country}}' AS name 
FROM
    Users
WHERE 
   NOT EXISTS ( SELECT * 
                  FROM Countries
                 WHERE Users.country_id = Countries.id ); 
```*

# css - css中的@是什么意思？

> ID：10295942
> 
> 赞同：0
> 
> 时间：2012-04-24T10:15:49.283
> 
> 标签：css, at-command, sign

我正在尝试操纵 zimbra 的 css，我不是故意的，在一些样式文件中我发现了这个：

```
body    {   @ChromeBg@  } 
```

谁能解释@，之后和之前的用法`ChromeBg`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:21:16.357

显然，这是 Zimbra 特有的。我希望这能解释更多：

[http://wiki.zimbra.com/wiki/Creating_Themes_Long_Version#Editing_Theme_Substitution_Files](http://wiki.zimbra.com/wiki/Creating_Themes_Long_Version#Editing_Theme_Substitution_Files)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T11:16:12.803

@ 的使用根据它所在的位置而有所不同......

当 @ 仅出现在前面时，它被称为 At-rule.... 例如：@import - 表示它允许您将一个样式表导入另一个样式表...

当 @ 用于单词的两边时，它是一个替换文件......例如：@somedata@ - 表示替换文件中具有该名称的条目应放置在 CSS 文件中的该位置。

希望它对你有用...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:42:20.560

看到这两个链接我也在学习在 css 中使用@。

我希望这也会对您有所帮助：-

[http://lesscss.org/](http://lesscss.org/)

[http://sass-lang.com/](http://sass-lang.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T10:21:43.070

看起来这是他们在 CSS 中指定变量的方式。我可以看到

```
ChromeBg = background-color:@_BaseColor_@; 
```

在[http://wiki.zimbra.com/wiki/Creating_Themes_Long_Version](http://wiki.zimbra.com/wiki/Creating_Themes_Long_Version)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T10:31:04.900

对不起，我不知道这是什么，但我有参考链接，我正在分享这个

[http://files.zimbra.com/docs/skins/Themes.html#skinvariables](http://files.zimbra.com/docs/skins/Themes.html#skinvariables)

但我们像 css 一样使用它

它正在这里导入另一个 css 文件

```
eg - @import url("reset.css"); 
```

它正在调用字体方法

```
eg- @font-face {} 
```

# c# - log4net 日志正在创建但仍为空

> ID：10295945
> 
> 赞同：7
> 
> 时间：2012-04-24T10:15:55.500
> 
> 标签：c#, .net, winforms, log4net

我正在尝试使用[log4net](http://logging.apache.org/log4net/)。当我启动应用程序时，它会创建日志文件，但无论我调用多少次`Log.Info("Application Started");`它都是空的。我研究了谷歌返回的前两页，我的代码似乎与所有示例匹配。

代码：

```
[assembly: XmlConfigurator(Watch = true)]

namespace Generator
{
     public class Run
     {

       private static readonly log4net.ILog Log =
       log4net.LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);

        public List<BILL_RUN> PerformBillRun()
        {
             XmlConfigurator.Configure();

             Log.Info("Application Started");
             var enabled = Log.IsInfoEnabled; //This is true
        }

     }

} 
```

应用程序配置

```
 <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
  </configSections>

  <log4net>
    <appender name="FileAppender" type="log4net.Appender.FileAppender">
      <file value="log-files.txt" />
      <appendToFile value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>
    </appender>

    <root>
      <level value="All" />
      <appender-ref ref="FileAppender" />
    </root>
  </log4net> 
```

关于可能出现什么问题的任何指示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T10:28:02.030

这总是发生在我身上……我一发布问题。

事实证明，我的`<configSections></configSections>`标签并不是直接的孩子，`<configuration>`这意味着配置不会被拾取（我假设），并且因为 log4net 吞下了所有异常，这只会进一步体现在我的应用程序中。

日志记录现在工作正常。

# java - android twitter 4j 2.2.1 获取媒体实体

> ID：10295947
> 
> 赞同：0
> 
> 时间：2012-04-24T10:16:15.647
> 
> 标签：java, android, twitter, twitter4j

我正在使用 twitter 4j 开发一个 twitter 应用程序。一切正常，除了媒体文件 url 没有与状态一起获取。我进行了很多搜索，twitter 4j 2.2.3 具有 Media Entities.Url 实体的功能，我如何使用 twitter 4j 2.2.1 获取媒体实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:21:54.507

twitter4j 是开源的，如果您不想升级到新版本，您可以自己修改源代码以满足您的要求。

# qt - 如何使用多个列自定义 QCombobox

> ID：10295950
> 
> 赞同：0
> 
> 时间：2012-04-24T10:16:17.047
> 
> 标签：qt, qcombobox

我正在使用 QCombobox，我希望 QCombobox 中的每个项目都显示三个图标。但是目前，QCombobox 中的每一项都只显示一个图标！

每个图标都应该动态更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:48:18.450

您应该创建新的自定义 QAbstractItemDelegate 并使用 void `QComboBox::setItemDelegate ( QAbstractItemDelegate * delegate )`api 将其设置为 QComboBox。

在委托中，您需要实现

```
virtual void    paint ( QPainter * painter, const QStyleOptionViewItem & option, const QModelIndex & index ) const = 0 
```

根据您的要求。

您还需要使用以下 API 为 userData 中的组合框提供不同的图标，您可以在 deletegate 的绘制方法中使用它来检索图标并绘制它。

```
void QComboBox::addItem ( const QString & text, const QVariant & userData = QVariant() ) 
```

概括：

当我按上述方式实现时，图标仅显示为单击下拉列表。正常情况下，只显示文字。因此，对于正常情况下的三个图标和文本显示，我们必须重新实现 QCombobox 的paintEvent 以防子类 QCombobox 或使用 eventFilter 来捕获没有子类 QComboBox 的 QCombobox 的paintEvent！感谢大家的回复！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T10:29:06.557

重新实现paintEvent，或者使用带有所有3个图标的大图标图像。

# ipad - iPad（仅限 3G 机型）Safari 崩溃

> ID：10295951
> 
> 赞同：2
> 
> 时间：2012-04-24T10:16:21.940
> 
> 标签：ipad, safari, crash

我正在使用deck.js (http://imakewebthings.com/deck.js/) 重新创建公司的PowerPoint 演示文稿，使用了相当多的CSS3 动画和Javascript。

在我的 wifi-only iPad2 上通过开发进行测试很好，但是在 wifi+3G iPad1、2 和 3 上检查页面在页面加载时会导致 Safari 崩溃（iPhone 4S 可以正常工作）。

一些基本的调试（一张一张地删除幻灯片）表明它是 DOM 的大小导致崩溃，因为当我将演示文稿从 31 张幻灯片减少到 21 张时它工作正常。

页面的总大小约为 4.3MB，我尝试使用 appcache 清单无济于事。

我在各种论坛上看到很多人遇到 iOS 5.1 Safari 崩溃的问题 - 有没有人遇到过 iPad 3G 模型在复杂 DOM 的压力下崩溃的经历？

任何想法和建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T14:21:56.457

事实上，这似乎是这样的设备上的 deck.js 的限制。Martin Fowler 报告了同样的问题并最终以增量方式加载幻灯片作为一种解决方法 ( [http://martinfowler.com/bliki/Infodeck.html](http://martinfowler.com/bliki/Infodeck.html) )。

查看问题是来自加载 DOM 还是来自显示它会很有帮助（默认的 deck.js 主题未针对显示效率进行优化）。不幸的是，我无法测试，因为我没有 ipad，但我建议尝试隐藏所有幻灯片，看看是否仍然存在崩溃。一些 CSS 代码可以做到这一点：

```
.deck-container > .slide:not(.deck-current), .deck-container > .slide:not(.deck-child-current) { display: none; } 
```

# python - 更新应用引擎项目代码

> ID：10295954
> 
> 赞同：0
> 
> 时间：2012-04-24T10:16:33.927
> 
> 标签：python, google-app-engine

我是谷歌应用引擎和 python 的新手。我在谷歌应用引擎的帮助下在 python 中创建了一个应用程序。

我在命令提示符下使用 cmmand 'appcfg.py update myapp/' 来更新实时代码。该命令运行良好，但突然停止工作。现在每次我运行这个命令时，它都会打开 appcfg.py 文件。请帮助我命令发生了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:19:59.013

试着打电话`python appcfg.py update myapp/`

# php - PHP Facebook API - 扩展权限数据未显示（离线）access_token

> ID：10295957
> 
> 赞同：1
> 
> 时间：2012-04-24T10:16:41.763
> 
> 标签：php, facebook

我正在尝试检索有关允许我的应用收集有关他们的数据（生日、位置等）的用户的个人资料信息。当且仅当用户实际访问我的应用程序并通过令牌交换向 Facebook 进行身份验证时，这才有效。

但是，我希望能够定期检查用户位置是否没有改变，如果用户在 FB 上添加有关自己的信息，我想将其与我的应用程序“同步”，以便信息保持不变。

所以我保存了用户访问令牌，然后，通过一个 cron 作业，我使用该令牌来获取他的个人资料：

```
$user = mysql_query ... <- get data from mysql 
```

接着：

```
$user_profile = $facebook->api('/'.$user['uid']); 
```

当然，它可以工作，但是我想要使用扩展权限的所有数据 - 只是没有显示出来！

offline_access 的诅咒是否禁用？或者我是否需要使用不同的方式来获取此类数据。我尝试在查询末尾添加 ?fields=birthday 等，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:31:46.013

不确定这是否是您所说的“禁用offline_access”的意思，但是正如您在路线图中看到的那样，Facebook 正在弃用offline_access：

[http://developers.facebook.com/roadmap/](http://developers.facebook.com/roadmap/)

您可以在此处阅读有关弃用的更多信息：

[http://developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

另外，您是否正确设置了从数据库接收到的访问令牌？

```
$facebook->setAccessToken($user['access_token']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:04:30.850

了解如何实现这一点 - 访问令牌必须作为**附加参数**传递给 api 查询，如下所示：

```
$user_profile = $facebook->api('/'.$user['uid'].'', array('access_token' => $session['access_token'])); 
```

万一有人想知道这个页面，这里有一种使用保存的访问令牌的方法，可以访问有关您想要的用户的完整信息，而无需进行身份验证：

```
<?

require "facebook.php";

$facebook = new Facebook(array(
    'appId'  => your_app_id,
    'secret' => your_app_secret
));

// get the saved user details 
$user = mysql_fetch_assoc(mysql_query('SELECT * FROM `facebook_tokens` WHERE `id` = "1"'));

$session = array(
    'access_token' => $user['access_token'],
    'secret' => $user['secret'],
    'session_key' => $user['session_key'],
    'uid' => $user['uid']
);

$sig = '';
foreach($session as $key => $value) {
    $sig .= implode('=', array($key, $value));
} 
$session['sig'] = md5($sessionStr.'Your App Secret');

$facebook->setSession($session, false);

$user_profile = $facebook->api('/'.$session['uid'], array('access_token' => $session['access_token']));

echo '<pre>';
print_r($user_profile);
echo '</pre>';  

?> 
```

# javascript - TinyMCE 将 < 替换为 <

> ID：10295961
> 
> 赞同：-1
> 
> 时间：2012-04-24T10:17:03.830
> 
> 标签：javascript, python, django, textbox, tinymce

我正在使用占位符标签运行 Django：

我正在尝试将 Flash 视频添加到我的 TinyMCE 编辑器中，但它不断将代码中的 '<' 替换为 < ，导致它无法工作负载并且只显示代码。

我还尝试使用 Django CMS 创建一个 Textarea 作为额外的 HTML 框，以查看它是否是编辑器，但它在 textarea 中做同样的事情。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:40:23.817

占位符的想法是您可以将它们堆叠起来，所以为什么不在您的 Text 插件下方放置一个单独的[Flash 插件](http://readthedocs.org/docs/django-cms/en/2.1.3/getting_started/plugin_reference.html#flash)或[Snippet 插件](http://docs.django-cms.org/en/latest/getting_started/plugin_reference.html#snippet)，然后在下面继续使用第二个 Text 插件。

要安装其中任何一个插件（包含在 django-cms 中），只需将它们添加到您的`INSTALLED_APPS`in 中`settings.py`：

```
INSTALLED_APPS = (
...
'cms.plugins.snippet',
'cms.plugins.flash',
...
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-25T08:44:56.147

settings.py 文件有问题，缺少一行代码。

# c# - 您需要使用 Invoke on Action 吗？

> ID：10295962
> 
> 赞同：2
> 
> 时间：2012-04-24T10:17:09.770
> 
> 标签：c#, action

我四处寻找这个问题的答案，但找不到任何相关的东西。`Action.Invoke()`使用时我学会了使用`Action`，但你真的需要使用`.Invoke`吗？

说我有这个动作：

```
Action<int> action = x =>
{
    Console.WriteLine(x + 1);
}; 
```

我是否使用：

```
action.Invoke(2); 
```

或者

```
action(2); 
```

有什么不同？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T10:18:51.333

一样的东西，`action(2);`基本上都是调用`action.Invoke(2);`
编译器转换`action(2)`成`action.Invoke(2);`

**[来自 Jon Skeet](https://stackoverflow.com/questions/9259470/is-using-action-invoke-considered-best-practice)的帖子：**

> 就我个人而言，我通常使用快捷方式，但只是偶尔显式调用 Invoke 会更易读。例如，您可能有：

```
if (callAsync)
{
    var result = foo.BeginInvoke(...);
    // ...
}
else
{
    foo.Invoke(...);
    // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T10:18:09.337

后者纯粹是前者的语法糖——没有区别（两者也是同步的）。

能够像方法而不是中间`Invoke`调用一样运行操作是很好的。

`Invoke`有一个`BeginInvoke`异步调用的对应物。

# php - Mysql 查询：已注册的候选人数和可用席位

> ID：10295964
> 
> 赞同：0
> 
> 时间：2012-04-24T10:17:22.397
> 
> 标签：php, mysql, codeigniter

我被一个mysql查询困住了。我有三张桌子：

表名：老师

```
teacherid  teachername 
 1001           ABC
 1002           XYZ 
```

表名：批次

```
batchid   batchname  batch_type     class   batchinstructor     seat
   1        Solar        1            Five     1001               40
   2        Earth        2            Six      1002               40 
```

表名：学生

```
 studentid studentname batchid
     1          Bon Jovi     1
     2          Shane Warne  2
     3          John Denver  1
     4          Steve Wuagh  2
     5          Perterson    2 
```

## 我想要达到的目标

```
 batchname class  teachername seat  students_enrolled  seat_available
   Solar   Five    ABC          40           2              38
   Earth   six     XYZ          40           3              37 
```

我正在使用 codeigniter 并设法实现了我上面提到的所有内容都接受了该专栏`students_enrolled`，`seat_available`

这是我尝试过的代码。

```
 function batch_list($perPage,$uri) { 
    $this->db->select('*');
    $this->db->from('batch');
    $this->db->join('teacher', 'batch.batchinstructor = teacher.teacherid');
    $this->db->order_by('batchid','DESC');
    $getData = $this->db->get('', $perPage, $uri);
    if($getData->num_rows() > 0)
    return $getData->result_array();
        else
        return null;
    } 
```

请您帮我处理mysql查询。请注意，我正在使用 Codeigniter。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:00:03.013

在纯 SQL 中，您想要的查询是：

```
SELECT
  b.batchname, b.class, t.teachername, b.seat,
  COUNT(s.studentid) AS students_enrolled,
  b.seat - COUNT(s.studentid) AS seat_available
FROM batch b
LEFT JOIN Teacher t ON t.teacherid = b.batchinstructor
LEFT JOIN students s ON s.batchid = b.batchid
GROUP BY s.batchid
ORDER BY b.batchid DESC 
```

您需要做的就是翻译这个 CodeIgniter - 正如@Broncha 所建议的，您可以这样做：

```
$result = $this->db->query($sql); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:45:15.410

This is the query:

```
$sql = "select 
b.batchname,
b.class,
t.teachername,
b.seat,
count(s.id) as students_enrolled,
(seat - count(s.id)) as seat_available,
from batch b
join teacher t on t.teacherid = b.batchinstructor
join student s on s.batchid = b.batchid
group by s.batchid
order by b.batchid desc"; 
```

You can directly use it like this:

```
$this->db->query($sql); 
```

# jquery - 将 div 和 inside 标签

> ID：10295966
> 
> 赞同：-3
> 
> 时间：2012-04-24T10:17:29.787
> 
> 标签：jquery

这是动态代码，我有设计问题

```
<td id="test" class="test1"></td>
<div id="WidgetButton" class="right">test</div> // that part of code making dyamic

  there is any way put that <div> has id WidgetButton and inside <td></td> 
```

像那样

```
<td id="test" class="test1">
<div id="WidgetButton" class="right">test</div>
</td> 
```

请建议我如何使用 jquery

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:18:21.897

由于它们都有`id`s，因此这是[`jQuery`函数](http://api.jquery.com/jQuery/#jQuery1)（通常别名为`$`）和的微不足道的应用[`appendTo`](http://api.jquery.com/appendTo/)。

```
$("#WidgetButton").appendTo("#test"); 
```

他们也都有`id`s 也很好，因为否则会很棘手，因为标记是无效的，所以浏览器会将 重新定位`div`到他们*猜测*应该去的地方，所以使用结构选择器和相对遍历会很困难。值得庆幸的`id`是，价值观胜过这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:21:03.227

**更新：**

因为您只想为 id 的 div 执行此操作`WidgetButton`。就是这样

```
 $("#WidgetButton").appendTo("#test"); 
```

* * *

如果您将所有内容都删除`divs`并放入 a`td`中，则可能会很危险。但你可以这样做

```
$("div").each(function() {
    $(this).appendTo("#test");
}); 
```

* * *

但是，我强烈建议您将选择范围缩小到特定的 div 组，例如使用类名或 id。

班级名称

```
$(".divswithclassname").each(function() {
    $(this).appendTo("#test");
}); 
```

特定身份

```
$("#idofdiv")..appendTo("#test"); 
```

# jsf - java.lang.ClassNotFoundException: com.sun.facelets.tag.jsf.ComponentHandler 添加 tomahawk-1.1.11 时

> ID：10295972
> 
> 赞同：3
> 
> 时间：2012-04-24T10:17:59.220
> 
> 标签：jsf, tomahawk

将 tomahawk-1.1.11.jar 文件添加到我的 Web 应用程序的 WEB-INF/lib 并收到错误消息：

```
Exception sending context initialized event to listener instance of class    
com.sun.faces.config.ConfigureListener:   
java.lang.RuntimeException:java.lang.LinkageError: Failed to link 
org/apache/myfaces/custom/aliasbean/AliasBeanTagHandler

Caused by: java.lang.ClassNotFoundException: com.sun.facelets.tag.jsf.ComponentHandler 
from [Module "deployment.appFramework.war:main" from Service Module Loader] 
```

有什么想法可能是错的吗？

堆栈跟踪：

```
10:44:14,813 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].
[/appFramework]] (MSC service thread 1-7) Exception sending context initialized event 
to listener instance of class 
com.sun.faces.config.ConfigureListener:java.lang.RuntimeException: 
java.lang.LinkageError: Failed to link org/apache/myfaces/custom/aliasbean
/AliasBeanTagHandler (Module "deployment.appFramework.war:main" from Service Module 
Loader)
at 
com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292) 
[jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-SNAPSHOT]
at 
org.apache.catalina.core.StandardContext.contextListenerStart
(StandardContext.java:3368)
[jbossweb-7.0.1.Final.jar:7.0.2.Final]
at org.apache.catalina.core.StandardContext.start(StandardContext.java:3821) 
[jbossweb-7.0.1
.Final.jar:7.0.2.Final]
at   
org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:70) 
[jboss-as-web-7.0.2.Final.jar:7.0.2.Final]
at 
org.jboss.msc.service.ServiceControllerImpl$StartTask.startService
(ServiceControllerImpl.java:1824)
at 
org.jboss.msc.service.ServiceControllerImpl$StartTask.run
(ServiceControllerImpl.java:1759)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
[:1.6.0_30]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)   
[:1.6.0_30]
at java.lang.Thread.run(Thread.java:662) [:1.6.0_30]
Caused by: java.lang.LinkageError: Failed to link org/apache/myfaces/custom/aliasbean
/AliasBeanTagHandler (Module "deployment.NAISFramework.war:main" from Service Module 
Loader)
at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:401)
at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:261)
at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:76)
at org.jboss.modules.Module.loadModuleClass(Module.java:590)
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:183)
at  
org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked
(ConcurrentClassLoader.java:361)
at  
org.jboss.modules.ConcurrentClassLoader.performLoadClass
(ConcurrentClassLoader.java:310)
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103)
at com.sun.faces.util.Util.loadClass(Util.java:332) 
[jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-SNAPSHOT]
at 
com.sun.faces.config.processor.AbstractConfigProcessor.loadClass
(AbstractConfigProcessor.java:311) [jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-SNAPSHOT]
at 
com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processComponent
(FaceletTaglibConfigProcessor.java:568) [jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-
SNAPSHOT]
at  
com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processTags
(FaceletTaglibConfigProcessor.java:361) [jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-
SNAPSHOT]
at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processTagLibrary
(FaceletTaglibConfigProcessor.java:314) [jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-
SNAPSHOT]
at   
com.sun.faces.config.processor.FaceletTaglibConfigProcessor.process
(FaceletTaglibConfigProcessor.java:263) [jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-
SNAPSHOT]
at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:363)
[jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-SNAPSHOT]
at    
com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225) 
[jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-SNAPSHOT]
... 8 more
Caused by: java.lang.NoClassDefFoundError: com/sun/facelets/tag/jsf/ComponentHandler
    at java.lang.ClassLoader.defineClass1(Native Method) [:1.6.0_30]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) [:1.6.0_30]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) [:1.6.0_30]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)   
[:1.6.0_30]
    at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:397)
    ... 23 more
Caused by: java.lang.ClassNotFoundException: 
com.sun.facelets.tag.jsf.ComponentHandler from [Module
"deployment.appFramework.war:main" from Service Module Loader]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:191)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked
(ConcurrentClassLoader.java:361)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked
(ConcurrentClassLoader.java:333)
    at   
org.jboss.modules.ConcurrentClassLoader.performLoadClass
(ConcurrentClassLoader.java:310)
    at    
org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103)
    ... 28 more

10:44:14,907 ERROR [org.apache.catalina.core.StandardContext] 
(MSC service thread 1-7)   Error listenerStart
10:44:14,907 ERROR [org.apache.catalina.core.StandardContext] 
(MSC service thread 1-7)   Context [/appFramework] startup failed due to previous 
errors
10:44:14,907 INFO  [javax.enterprise.resource.webcontainer.jsf.lifecycle] (MSC   
service   
thread 1-7) JSF1027: [null] The ELResolvers for JSF were not registered with the JSP 
container.

10:44:14,922 INFO  [org.jboss.web] (MSC service thread 1-7) registering web context: 
/appFramework
10:44:14,922 INFO  [org.jboss.as] (MSC service thread 1-5) JBoss AS 7.0.2.Final "Arc" 
started in 287
50ms - Started 454 of 511 services (57 services are passive or on-demand)
10:44:14,969 INFO  [org.jboss.as.server.controller] (DeploymentScanner-threads - 2)   
Deployed "appFramework.war" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T12:46:46.390

[Tomahawk 1.1.11](http://myfaces.apache.org/tomahawk/download.html)有两种版本：

*   [用于 JSF 1.2 的战斧 1.1.11](http://www.apache.org/dyn/closer.cgi/myfaces/binaries/tomahawk12-1.1.11-bin.zip)
*   [适用于 JSF 2.0 的战斧 1.1.11](http://www.apache.org/dyn/closer.cgi/myfaces/binaries/tomahawk20-1.1.11-bin.zip)

此异常表明您正在尝试在仅支持 JSF 2.0 的环境中安装“Tomahawk 1.1.11 for JSF 1.2”。删除那些错误的 Tomahawk JAR，下载正确的 Tomahawk 版本，然后将其 JAR 放入其中`/WEB-INF/lib`。

# devise - Devise_invitable 删除与邀请者关联的记录（用户 has_one 个人资料）

> ID：10295977
> 
> 赞同：0
> 
> 时间：2012-04-24T10:18:07.417
> 
> 标签：devise, ruby-on-rails-3.2

我刚刚将 devise_invitable 添加到一个应用程序中，该应用程序已经有了设计的工作实现。

邀请过程本身一切正常（发送电子邮件，新用户可以单击链接并设置密码等）。

问题是*邀请者*a`User`有一个关联的 ，当邀请者点击**“发送邀请”**按钮`Profile`时，它会被删除。

 **任何人都知道为什么邀请过程会在邀请者上对关联对象进行核对吗？我将尝试通过 devise_invitable 代码跟踪这一点，但最好知道是否有人以前遇到过这个问题，或者知道问题可能出在 devise 的代码中的哪个位置。

`User`: _

```
has_one :profile, :inverse_of => :user, :dependent => :destroy 
```

这`Profile`

```
belongs_to :user, :inverse_of => :profile 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:33:22.040

这里的错误是因为 - 默认情况下 - devise_invitable`after_invite_path_for`只是调用`after_sign_in_path_for`.

但是，它不会*将*当前用户作为 传递`resource`，这将是常规登录的情况。

如果你重写`after_sign_in_path_for`假设它只会在真正登录后被调用，就像我所做的那样，这可能会令人困惑。

（在我的特殊情况下：我的重写方法所做的是查找`resource`' 的关联配置文件，如果它没有，假设用户第一次登录，它将创建一个新配置文件。当 devise_invitable 传递一个意外资源，这个新的配置文件对象将覆盖现有的关联，并且`:dependent => :destroy`将在旧的配置文件对象上触发回调。D'oh！）**

# c - 测试 NULL 与字符串指针 x86 与 x64 的长度？

> ID：10295978
> 
> 赞同：-2
> 
> 时间：2012-04-24T10:18:07.683
> 
> 标签：c, windows, 64-bit

这是测试返回字符串是否为空的唯一方法。每个都在对方的架构中失败。问题是为什么？为什么`!=NULL`在 x86`_tcslen(*sDateOut)>0`上失败而在 x64 上失败？：

```
BOOL FormatDate(TCHAR *sIn, TCHAR **sOut) {
free(*sOut);*sOut=NULL; // Clear

...
if (condition1)
    *sOut = calloc(length,sizeof(TCHAR);
...

#ifdef WIN64
    return (*sOut != NULL);
#else
    return (_tcslen(*sOut)>0);
#endif
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:22:53.080

如果要检查空字符串，则应将第一个字符与 进行比较`'\0'`，**而不是** `NULL`。

这样做的原因是因为`NULL`它应该代表一个空指针——它的实际值可能实际上并不为零。

* * *

现在回到这个例子，如果你想测试是否`TCHAR **sOut`是一个指向空字符串的有效指针，这个测试应该可以工作：

```
if (sOut && *sOut && (*sOut)[0] != _T('\0')) {
    // non-empty
} else {
    // empty or invalid pointer
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:31:26.973

实际上，两者都做了完全不同的事情：

```
(*sOut != NULL) 
```

只要`sOut`指向有效的指向`char`. 这并不意味着它指向的字符串长度为零，而是没有任何字符串。

```
(_tcslen(*sOut)>0) 
```

另一方面，实际上检查字符串`*sOut`指向的长度，并假设有一个。

因此，您应该结合检查以确保`*sOut`是一个非零长度的以空字符结尾的字符串：

```
(*sOut != NULL) && (_tcslen(*sOut)>0) 
```

请注意，您的函数的签名看起来应该*将*某些内容放入`sOut`中，因此在那里测试零长度字符串对我来说没有意义。我想你知道你在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:31:37.990

sOut 是 type `TCHAR **`，所以 *sOut 是一个指针，而不是一个字符。

这两个测试正在检查不同的东西：

```
*sOut != NULL; // is the pointer NULL?

_tcslen(*sOut)>0; // does the pointer point to a zero-length string? (presumes pointer is non-NULL!) 
```

为什么您要在 WIN64 和其他中检查两种不同的东西，从这个示例中并不清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:30:42.577

什么是你的“空字符串”？Null-Pointer 和零大小的字符串是另一回事。指向零大小字符串的指针不为 NULL。正确的代码必须检查两种情况：

> ((*sOut !=NULL) && (_tcslen(*sOut)>0))

# javascript - Gideon Sundback 拉链涂鸦 [Google，4 月 24 日] 完全是 javascript 吗？

> ID：10295980
> 
> 赞同：18
> 
> 时间：2012-04-24T10:18:12.187
> 
> 标签：javascript, css, google-doodle

Gideon Sundback google doodle 是用 javascript 实现的吗？

我试图通过萤火虫追踪，但不能真正“得到”它的实现细节？

关于如何实施的任何想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-24T10:42:00.433

是的，它是 JavaScript。

它使用[`<canvas>`](http://en.wikipedia.org/wiki/Canvas_element)元素。

这是代码：

```
(function () {
    var c = !0,
        d = !1;
    try {
        window.google || (window.google = {});
        google.doodle || (google.doodle = {});
        var f = google.doodle,
            h, j, k, l, m, n, o = 0,
            p = 23,
            q, r, s, u, v, w, x, y = 142,
            z = 356,
            A = 311,
            B = 0,
            C = 0,
            D = 30,
            E = 15,
            F = d,
            G, H = d,
            I = d,
            J = {
                back: {
                    src: "/logos/2012/sundback12-hp-s.png",
                    height: 31,
                    width: 24,
                    x: 0,
                    y: 0
                },
                s: {
                    src: "/logos/2012/sundback12-hp-l.jpg",
                    height: 120,
                    width: 186,
                    x: 0,
                    y: 0
                },
                F: {
                    src: "/logos/2012/sundback12-hp-l.jpg",
                    height: 120,
                    width: 186,
                    x: 186,
                    y: 0
                },
                i: {
                    src: "/logos/2012/sundback12-hp-s.png",
                    height: 60,
                    width: 28,
                    x: 24,
                    y: 0
                },
                top: {
                    src: "/logos/2012/sundback12-hp-s.png",
                    height: 23,
                    width: 8,
                    x: 52,
                    y: 0
                },
                G: {
                    src: "/logos/2012/sundback12-hp-s.png",
                    height: 7,
                    width: 15,
                    x: 60,
                    y: 0
                },
                B: {
                    src: "/logos/2012/sundback12-hp-s.png",
                    height: 7,
                    width: 15,
                    x: 75,
                    y: 0
                }
            },
            K = function () {
                google.psy && google.nav && google.nav.go ? google.nav.go("/search?q=Gideon+Sundback&ct=sundback12-hp&oi=ddle") : window.location.href = "/search?q=Gideon+Sundback&ct=sundback12-hp&oi=ddle"
            },
            L = function (a, b, g, i, e) {
                a.beginPath();
                a.moveTo(b, g);
                a.lineTo(i, e);
                a.stroke()
            },
            M = function (a, b, g) {
                var i = document.createElement("canvas"),
                    e = i.getContext("2d"),
                    t = j.createLinearGradient(0, 0, 0, g);
                t.addColorStop(0, "#f5f5f5");
                t.addColorStop(1, "#f1f1f1");
                e.fillStyle = t;
                e.fillRect(1, 1, b - 2, g - 2);
                e.lineWidth = 1;
                e.strokeStyle = "#d0d0d0";
                L(e, 1, 0, b - 1, 0);
                L(e, b, 1, b, g - 1);
                L(e, b - 1, g, 1, g);
                L(e, 0, g - 1, 0, 1);
                e.fillStyle = "#444";
                e.textAlign = "center";
                e.font = "bold 11px Arial,sans-serif";
                e.fillText(a, b / 2, g * 2 / 3);
                return i
            },
            N = function (a, b) {
                var g = document.createElement("canvas"),
                    i = g.getContext("2d");
                i.fillStyle = "#fff";
                i.fillRect(0, 0, b, 29);
                i.lineWidth = 1;
                i.strokeStyle = "#c0c0c0";
                L(i, 0, 0, b, 0);
                i.strokeStyle = "#d9d9d9";
                L(i, 0, 29, b, 29);
                var e = a ? 0 : b;
                L(i, e, 0, e, 29);
                return g
            },
            O = "move,-ie-grabbing,-moz-grabbing,-o-grabbing,-webkit-grabbing,grabbing".split(","),
            aa = "move,-ie-grab,-moz-grab,-o-grab,-webkit-grab,grab".split(","),
            P = function (a, b) {
                if (a) for (var g in b) a.style.cursor = b[g]
            },
            ba = function (a) {
                if (!H && !Q()) {
                    F = H = c;
                    google.listen(window, "mouseup", R);
                    google.listen(window, "mousemove", S);
                    h.style.zIndex = "2000";
                    P(h, O);
                    k && P(k, O);
                    l.q.blur();
                    google.psy && K();
                    T();
                    S(a)
                }
            },
            R = function () {
                if (!I && H) {
                    I = c;
                    F = d;
                    h.style.cursor = "auto";
                    if (k) k.style.cursor = "auto";
                    ca()
                }
            },
            S = function (a) {
                if (F) {
                    a ? a.stopPropagation && a.stopPropagation() : window.event.cancelBubble = c;
                    a.preventDefault ? a.preventDefault() : a.returnValue = d;
                    a = a || window.event;
                    G = !a ? [0, 0] : [(a.clientX || a.targetTouches && a.targetTouches[0] && a.targetTouches[0].clientX || 0) + (document.body.scrollLeft || document.documentElement.scrollLeft || 0), (a.clientY || a.targetTouches && a.targetTouches[0] && a.targetTouches[0].clientY || 0) + (document.body.scrollTop || document.documentElement.scrollTop || 0)];
                    a = B;
                    B = Math.max(0, G[1] - o - 30 - J.i.height);
                    if (f.z > 0) {
                        f.z--;
                        var b = B - a;
                        Math.abs(b) > 50 && (B = a + b * 0.25)
                    }
                    U()
                }
            },
            T = function () {
                var a = document.getElementById("mgmhppd");
                o = a ? a.offsetHeight : 0;
                a = o + 30;
                h.style.top = a + "px";
                var b = document.getElementById("ftby");
                if (b && b.parentNode) p = b.parentNode.offsetHeight;
                h.height = x = document.body.clientHeight - (o + (H ? 0 : 30 + p));
                var b = 833,
                    g = document.getElementById("gbqf");
                g && (b = Math.max(b, g.offsetWidth));
                h.width = v = Math.max(b, document.body.clientWidth);
                w = v / 2;
                G || (G = [0, 0]);
                G[0] = w;
                if (k) {
                    b = k.style;
                    b.top = h.style.top;
                    b.left = w - 236 + "px";
                    if (l) b.height = google.style.getPageOffsetTop(l) - a + "px"
                }
                da();
                U()
            },
            V = function (a) {
                a.addColorStop(0, "rgba(255,255,255,0)");
                a.addColorStop(0.01, "#eee");
                a.addColorStop(0.55, "#fff");
                a.addColorStop(0.58, "#b1b1b1");
                a.addColorStop(0.68, "#dedede");
                a.addColorStop(0.98, "#dedede");
                a.addColorStop(0.99, "rgba(255,255,255,0)")
            },
            da = function () {
                q = w - C + 1;
                r = w + C;
                s = q - 42;
                u = r + 42
            },
            U = function () {
                if (j) {
                    j.clearRect(0, 0, v, x);
                    var a = s - B,
                        b = u + B;
                    j.fillStyle = "#fff";
                    f.g || j.fillRect(0, 0, v, x);
                    j.beginPath();
                    j.moveTo(0, 0);
                    j.lineTo(a, 0);
                    j.arc(a, B, B + 21, -Math.PI / 2, 0, d);
                    j.lineTo(s, x);
                    j.lineTo(0, x);
                    j.lineTo(0, 0);
                    j.fill();
                    j.beginPath();
                    j.moveTo(v, 0);
                    j.lineTo(b, 0);
                    j.arc(b, B, B + 21, -Math.PI / 2, Math.PI, c);
                    j.lineTo(u, x);
                    j.lineTo(v, x);
                    j.lineTo(v, 0);
                    j.fill();
                    W(J.s, -42, y, c);
                    W(J.F, -42, y, d);
                    if (H) {
                        W(J.v, 0, A, c);
                        W(J.w, 0, A, d)
                    }
                    if (H) {
                        var g = !l || l.q.dir != "rtl";
                        W(J.search, -57, z, g);
                        W(J.C, -57, z, !g)
                    }
                    g = j.createRadialGradient(a, B, B, a, B, B + 42);
                    V(g);
                    j.fillStyle = g;
                    j.fillRect(a, 0, B + 42, B);
                    a = j.createRadialGradient(b, B, B, b, B, B + 42);
                    V(a);
                    j.fillStyle = a;
                    j.fillRect(r, 0, B + 42, B);
                    a = j.createLinearGradient(s, 0, q, 0);
                    V(a);
                    j.fillStyle = a;
                    j.fillRect(s, B, 42, x - B);
                    a = j.createLinearGradient(u, 0, r, 0);
                    V(a);
                    j.fillStyle = a;
                    j.fillRect(r, B, 42, x - B);
                    a = J.B.height + 5;
                    for (b = 0; b < x; b = b + a) {
                        W(J.G, 3, b + a / 2, c);
                        W(J.B, 3, b, d)
                    }
                    a = A - 50;
                    a = Math.min(1, (a - (B - 50)) / a);
                    if (H && a > 0) {
                        j.save();
                        j.globalAlpha = a;
                        W(J.v, 0, A, c);
                        W(J.w, 0, A, d);
                        j.restore()
                    }
                    X(J.back, r - J.back.width / 2, B);
                    j.save();
                    a = 0;
                    G && (a = Math.atan((w - G[0]) / J.i.height));
                    j.translate(r + a * 6, B + 12 + Math.abs(a) * 6);
                    j.rotate(a);
                    X(J.i, 0 - J.i.width / 2, 0);
                    j.restore();
                    X(J.top, r - J.top.width / 2, B + 5)
                }
            },
            X = function (a, b, g) {
                b > h.width || g > h.height || j.drawImage(a.a, a.x, a.y, a.width, a.height, b, g, a.width, a.height)
            },
            W = function (a, b, g, i) {
                var e = i ? q : r;
                if (g > B) {
                    e = i ? e + b - a.width : e - b;
                    X(a, e, g)
                } else {
                    var t = 0;
                    B != 0 && (t = (B - g) / B);
                    b = B + 42 + b;
                    if (i) {
                        b = b - a.width;
                        e = e - 42 - B + Math.cos(t) * b
                    } else e = e + 42 + B - Math.cos(t) * b;
                    j.save();
                    j.translate(e, B - Math.sin(t) * b);
                    j.rotate(Math.PI * 2 + (i ? -t : t));
                    X(a, 0, 0);
                    j.restore()
                }
            },
            ea = function () {
                google.psy || Y()
            },
            Z = function (a) {
                var b = document.getElementById("hplogo-i");
                if (b) b.style.display = a ? "" : "none"
            },
            Y = function (a) {
                window.clearTimeout(f.A);
                if (n && m) n.style.position = m.style.position = "";
                if (h && (!a || !google.psy && google.browser.product.FIREFOX)) h.style.display = "none";
                if (k) k.style.display = "none";
                Z(c);
                google.unlisten(window, "resize", T);
                google.unlisten(window, "mouseup", R);
                google.unlisten(window, "mousemove", S)
            },
            fa = function () {
                if (google.msg) {
                    f.o && google.msg.unlisten(40, f.o);
                    f.o = function () {
                        H || Y();
                        f.g = c;
                        google.msg.unlisten(40, f.o);
                        f.p ? Y() : U();
                        return c
                    };
                    google.msg.listen(40, f.o);
                    f.k && google.msg.unlisten(64, f.k);
                    f.k = function () {
                        T();
                        google.msg.unlisten(64, f.k);
                        return c
                    };
                    google.msg.listen(64, f.k);
                    f.n && google.msg.unlisten(67, f.n);
                    f.n = function () {
                        H || Y();
                        google.msg.unlisten(67, f.n);
                        return c
                    };
                    google.msg.listen(67, f.n)
                }
            },
            Q = function () {
                var a = window.location.href;
                return a.indexOf("#") > -1 && /[^a-z]q=/.test(a) ? c : d
            },
            $ = function () {
                if (!f.D && google.dstr && google.rein) {
                    f.D = c;
                    google.dstr.push(ea);
                    google.rein.push($)
                }
                f.cpDestroy = Y;
                f.cpInit = $;
                a: {
                    for (var a = document.forms, b = ["f", "gs", "tsf", "gbqf"], g = 0, i; i = b[g++];) if (i = a[i]) {
                        l = i;
                        break a
                    }
                    l = null
                }
                m = l.btnK;
                n = l.btnI;
                if (!(a = !l)) if (!(a = !l.q)) if (!(a = l.q.value.length > 0)) if (!(a = Q())) {
                    h = document.getElementById("hplogo-z");
                    if (!h) {
                        h = document.createElement("canvas");
                        document.body.appendChild(h)
                    }
                    if (h.getContext) {
                        j = h.getContext("2d");
                        Z(d);
                        h.id = "hplogo-z";
                        a = h.style;
                        a.left = "0";
                        a.position = "absolute";
                        a.display = "";
                        a.visibility = "";
                        a.zIndex = "-1";
                        if (k = document.getElementById("hplogo-c")) {
                            k.onmouseover = U;
                            k.onmousedown = ba;
                            k.ontouchstart = ba;
                            k.style.display = "";
                            P(k, aa)
                        }
                        a = c
                    } else a = d;
                    a = !a
                }
                if (a) Z(c);
                else {
                    window.clearTimeout(f.A);
                    C = B = 0;
                    E = 15;
                    D = 30;
                    I = H = d;
                    f.g = d;
                    f.p = d;
                    f.z = 5;
                    f.g = d;
                    fa();
                    for (var e in J) {
                        a = J[e];
                        if (a.src) {
                            a.a = new Image;
                            a.a.onload = U;
                            a.a.src = a.src
                        }
                    }
                    if (l && n && m) {
                        J.search = {
                            a: M(m.innerText || m.textContent || m.value, m.offsetWidth, m.offsetHeight),
                            height: m.offsetHeight,
                            width: m.offsetWidth,
                            x: 0,
                            y: 0
                        };
                        J.C = {
                            a: M(n.innerText || n.textContent || n.value, n.offsetWidth, n.offsetHeight),
                            height: n.offsetHeight,
                            width: n.offsetWidth,
                            x: 0,
                            y: 0
                        };
                        e = Math.floor(google.style.getWidth(l.q) / 2);
                        J.v = {
                            a: N(c, e),
                            height: 29,
                            width: e,
                            x: 0,
                            y: 0
                        };
                        J.w = {
                            a: N(d, e),
                            height: 29,
                            width: e,
                            x: 0,
                            y: 0
                        }
                    }
                    google.listen(window, "resize", T);
                    T();
                    y = Math.max(0, google.style.getPageOffsetTop(l) - o - 15 - J.s.height - 30);
                    z = google.style.getPageOffsetTop(m) - o - 30;
                    A = google.style.getPageOffsetTop(l) - o - 30;
                    if (l && n && m) {
                        b = google.style.getWidth(n) - google.style.getWidth(m);
                        a = e = 42;
                        b > 0 ? e = e + b : a = a - b;
                        b = l.q.dir != "rtl";
                        n.style.position = m.style.position = "relative";
                        n.style[b ? "left" : "right"] = e + "px";
                        m.style[b ? "right" : "left"] = a + "px"
                    }
                    U()
                }
            },
            ca = function () {
                B = B + D;
                D = D + 2;
                G[0] = G[0] + (w - G[0]) * 0.3;
                if (B > x) {
                    C = C + E;
                    E = E + 5;
                    da()
                }
                U();
                if (C < w) f.A = window.setTimeout(ca, 30);
                else {
                    G[0] = w;
                    f.p = c;
                    if (google.psy && f.g) Y();
                    else {
                        Y(c);
                        K()
                    }
                }
            };
        google.x ? google.x({
            id: "DOODLE"
        }, $) : $()
    } catch (ga) {
        google.ml(ga, d, {
            cause: "DOODLE"
        })
    };
})(); 
```

# mysql - 将 mysql utf8-bin 字段转换为小写/大写

> ID：10295982
> 
> 赞同：2
> 
> 时间：2012-04-24T10:18:16.903
> 
> 标签：mysql, character-encoding

早晨，

在这里寻求一点建议。

在 utf8-bin 表中有一个用户名列。

希望对登录的用户名保持大小写敏感，但希望对用户名的可用性执行不区分大小写的检查。

使用有什么问题

```
CONVERT(`usrnm` USING latin1) #or other charset. 
```

在处理中文或阿拉伯文时？

欢迎任何提示/想法/评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:23:29.600

```
CREATE TABLE users (id INT NOT NULL PRIMARY KEY, usrnm VARCHAR(20) COLLATE UTF8_BIN);

INSERT
INTO    users
VALUES  (1, 'Пользователь'); -- First letter in upper case

SELECT  *
FROM    users
WHERE   usrnm = 'пользователь'; -- First letter in lower case, not returned

SELECT  *
FROM    users
WHERE   usrnm COLLATE UTF8_GENERAL_CI = 'пользователь';  -- First letter in lower case, returned 
```

请注意，如果要确保不区分大小写的唯一性，最好制作列`UTF8_GENERAL_CI`并声明它`UNIQUE`：

```
CREATE TABLE users (id INT NOT NULL PRIMARY KEY, usrnm VARCHAR(20) COLLATE UTF8_GENERAL_CI UNIQUE);

INSERT
INTO    users
VALUES  (1, 'Пользователь');

INSERT
INTO    users
VALUES  (2, 'пользователь'); -- unique violation

SELECT  *
FROM    users
WHERE   usrnm = 'пользователь' COLLATE UTF8_BIN; 
```

# javascript - Javascript：正则表达式用十六进制代码替换一些字符

> ID：10295998
> 
> 赞同：1
> 
> 时间：2012-04-24T10:19:11.260
> 
> 标签：javascript, regex, url-encoding

我一直无法找到一个与我想要的类似的示例，即替换：

% 与 %25

& 与 %26

/ 带 %2F

# 使用 %23

" 有空格

\ 有空格

作为参考，我将 GWT 与 String.replaceAll 一起使用，但我询问的是 Javascript，因为无论如何它都是翻译成的。我知道（组件）URI 编码，但这不是我想要的，我只需要这些字符。

稍后编辑：我正在寻找一种方法来使用一个或两个正则表达式，现在它是这样完成的：

`splits[i].replaceAll("%", "%25").replaceAll("&", "%26").replaceAll("/","%2F").replaceAll("#", "%23").replaceAll("\"", "").replaceAll("\\\\", " ");`

但这对我来说似乎很难看。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T10:23:42.877

（这是针对 JavaScript 的，这是您询问的语言。请注意，它在 Java 中会完全不同。）

在 JavaScript 中，使用[`replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)正则表达式并[传入一个函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)是很简单的：

```
var str = "testing % & / # \" \\";
var result = str.replace(/[%&\/#"\\]/g, function(m) {
    return (m === '"' || m === '\\') ? " " : "%" + m.charCodeAt(0).toString(16);
}); 
```

[实例](http://jsbin.com/eruheg)| [来源](http://jsbin.com/eruheg/edit)

如果您不介意扫描字符串两次而不是一次，它可能看起来*更*简单（尽管我认为这还不够值得）：

```
var str = "testing % & / # \" \\";
var result = str.replace(/["\\]/g, " ").replace(/[%&\/#]/g, function(m) {
    return "%" + m.charCodeAt(0).toString(16);
}); 
```

...因为我们可以单独进行`"`和`\`替换，并摆脱检查我们匹配的内容。[实例](http://jsbin.com/eruheg/2)| [来源](http://jsbin.com/eruheg/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:23:18.727

```
String.replace(/%/, '%25').replace(/&/, '%26').replace(/\//, '%2F').replace(/#/, '%23').replace(/"/, ' ').replace(/\\/, ' '); 
```