# StackOverflow 问答 11150000-11150999

# c - Visual Studio中的结构程序

> ID：11150005
> 
> 赞同：0
> 
> 时间：2012-06-22T04:02:01.340
> 
> 标签：c, visual-studio-2010

在下面的程序中，我没有从`printf`.

```
#include<stdio.h>

int main()
{
    struct book
    {
        char name;
    float price;
    int pages;
    };
    struct book b1,b2,b3;

    printf("enter names prices & no. of pages of 3 books\n");
    scanf("%c %f %d",&b1.name,&b1.price,&b1.pages);
    fflush(stdin);
    scanf("%c %f %d",&b2.name,&b2.price,&b2.pages);
    fflush(stdin);
    scanf("%c %f %d",&b3.name,&b3.price,&b3.pages);
    fflush(stdin);
    printf("and this is what you entered\n");
    printf("%c %f %d",&b1.name,&b1.price,&b1.pages);
    printf("%c %f %d",&b2.name,&b2.price,&b2.pages);
    printf("%c %f %d",&b3.name,&b3.price,&b3.pages);
    return 0;
} 
```

我得到的这个输出

```
enter names prices & no. of pages of 3 books
a 34.6 23
b 23.4 34
c 63.5 23

and this is what you entered

0.000000 0∞ 0.000000 0╪ 0.000000 0Press any key to continue . . . 
```

为什么输出与输入不匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T04:06:20.123

```
printf("%c %f %d",&b1.name,&b1.price,&b1.pages);
printf("%c %f %d",&b2.name,&b2.price,&b2.pages);
printf("%c %f %d",&b3.name,&b3.price,&b3.pages); 
```

太多的复制和粘贴我的想法。您在`printf`期望`char`s 时传递指针，浮点数和整数也是如此。

您将这些变量的地址传递给，`scanf`以便函数可以更改它们的值。当您使用`%d`,`%f`时，`%c` `printf`需要一个 int（不是指向 int 的指针）、一个 float（不是指向 float 的指针）和一个 char（不是指向 char 的指针）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T04:06:29.913

您的程序存在多个问题：

*   `char`适合单个字符。存储书名不够大。
*   您将地址传递给`scanf`，但将值传递给`printf`（即没有`&`on`printf`的参数，除了可能`%p`的参数）
*   您不需要`fflush`输入流 - 它没有效果。

我认为您应该更改`char name`为`char name[101]`（或您喜欢的任何其他最大尺寸），并且`scanf("%c...", &b1.name,...)`为`scanf("%100s...", b1.name,...)`. 请注意与符号`&`是如何从 中丢失的`b1.name`：这是因为数组在传递给 C 中的函数时会衰减为指针。

# python - Python 从 SOAP 中抓取 big-5 字符串

> ID：11150010
> 
> 赞同：0
> 
> 时间：2012-06-22T04:03:06.033
> 
> 标签：python, soap, character-encoding, pysimplesoap

我正在尝试使用 WSDL 访问肥皂服务：

[http://taqm.epa.gov.tw/taqm/DataService.asmx?WSDL](http://taqm.epa.gov.tw/taqm/DataService.asmx?WSDL)

使用 pysimplesoap

```
#!/usr/bin/python

from codecs import Codec

from pysimplesoap.client import SoapClient
url = 'http://taqm.epa.gov.tw/taqm/DataService.asmx?WSDL'
client = SoapClient(wsdl=url,trace=False)

response = client.SiteList2('xml')
result = response['SiteList2Result'] 
```

当我尝试打印结果时，它显示“UnicodeEncodeError: 'ascii' codec can't encoding characters in position 49-50: ordinal not in range(128)”。

我猜响应中有繁体中文 big5 编码（或者可能是 utf-8）。

响应是一个字典，直接打印时显示：

```
{'SiteList2Result': u'<NewDataSet><Table><SITE_CODE>1</SITE_CODE><SITE>\u57fa\u9686</SITE><HSCITY>\u57fa\u9686\u5e02</HSCITY><DISTRICT>\u4fe1 \u7fa9 \u5340</DISTRICT>... 
```

为什么它使用 ascii 编解码器，它在做什么？我该如何解决？

# c++ - boost::property_tree 编译错误（错误 C2061：语法错误：标识符“p”）

> ID：11150014
> 
> 赞同：0
> 
> 时间：2012-06-22T04:04:09.260
> 
> 标签：c++, boost, boost-propertytree

我正在努力编译一些利用 boost 属性树的代码。我正在使用 Visual Studio 2010。

如果我尽可能简化代码以重现错误，代码如下所示...

```
#include "AppleiTunesLibraryImporter.h"
#include <boost/property_tree/xml_parser.hpp>
#include <boost/property_tree/ptree.hpp>
using namespace boost::property_tree;

AppleiTunesLibraryImporter::AppleiTunesLibraryImporter(){}
AppleiTunesLibraryImporter::~AppleiTunesLibraryImporter(){}

bool AppleiTunesLibraryImporter::ImportData( std::string itunes_library_xml_path )
{
    ptree pt;
    xml_parser::read_xml( itunes_library_xml_path.c_str(), pt, xml_parser::no_comments | xml_parser::trim_whitespace);
    return true;
} 
```

...并且完整的错误如下所示...

```
1>  AppleiTunesLibraryImporter.cpp
1>c:\<path to my file>\thirdparty\boost\boost-1.47.0\boost/detail/allocator_utilities.hpp(178): error C2061: syntax error : identifier 'p'
1>          c:\<path to my file>\thirdparty\boost\boost-1.47.0\boost/multi_index/detail/index_base.hpp(88) : see reference to function template instantiation 'void boost::detail::allocator::construct<T>(void *,const Type &)' being compiled
1>          with
1>          [
1>              T=std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,
1>              Type=std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>
1>          ]
1>          c:\<path to my file>\thirdparty\boost\boost-1.47.0\boost/multi_index/detail/index_base.hpp(87) : while compiling class template member function 'boost::multi_index::detail::index_node_base<Value,Allocator> *boost::multi_index::detail::index_base<Value,IndexSpecifierList,Allocator>::insert_(const std::pair<_Ty1,_Ty2> &,boost::multi_index::detail::index_node_base<Value,Allocator> *)'
1>          with
1>          [
1>              Value=std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,
1>              Allocator=std::allocator<std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>>,
1>              IndexSpecifierList=boost::multi_index::indexed_by<boost::multi_index::sequenced<>,boost::multi_index::ordered_non_unique<boost::multi_index::tag<boost::property_tree::basic_ptree<std::string,std::string>::subs::by_name>,boost::multi_index::member_offset<std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,const std::basic_string<char,std::char_traits<char>,std::allocator<char>>,0>,std::less<std::string>>>,
1>              _Ty1=const std::string,
1>              _Ty2=boost::property_tree::basic_ptree<std::string,std::string>
1>          ]
1>          c:\<path to my file>\thirdparty\boost\boost-1.47.0\boost/multi_index/ordered_index.hpp(119) : see reference to class template instantiation 'boost::multi_index::detail::index_base<Value,IndexSpecifierList,Allocator>' being compiled
1>          with
1>          [
1>              Value=std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,
1>              IndexSpecifierList=boost::multi_index::indexed_by<boost::multi_index::sequenced<>,boost::multi_index::ordered_non_unique<boost::multi_index::tag<boost::property_tree::basic_ptree<std::string,std::string>::subs::by_name>,boost::multi_index::member_offset<std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,const std::basic_string<char,std::char_traits<char>,std::allocator<char>>,0>,std::less<std::string>>>,
1>              Allocator=std::allocator<std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>>
1>          ]
1>          c:\<path to my file>\thirdparty\boost\boost-1.47.0\boost/multi_index/sequenced_index.hpp(77) : see reference to class template instantiation 'boost::multi_index::detail::ordered_index<KeyFromValue,Compare,SuperMeta,TagList,Category>' being compiled
1>          with
1>          [
1>              KeyFromValue=boost::multi_index::member_offset<std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,const std::basic_string<char,std::char_traits<char>,std::allocator<char>>,0>,
1>              Compare=std::less<std::string>,
1>              SuperMeta=boost::multi_index::detail::nth_layer<2,std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,boost::multi_index::indexed_by<boost::multi_index::sequenced<>,boost::multi_index::ordered_non_unique<boost::multi_index::tag<boost::property_tree::basic_ptree<std::string,std::string>::subs::by_name>,boost::multi_index::member_offset<std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,const std::basic_string<char,std::char_traits<char>,std::allocator<char>>,0>,std::less<std::string>>>,std::allocator<std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>>>,
1>              TagList=boost::mpl::vector1<boost::property_tree::basic_ptree<std::string,std::string>::subs::by_name>,
1>              Category=boost::multi_index::detail::ordered_non_unique_tag
1>          ]
1>          c:\<path to my file>\thirdparty\boost\boost-1.47.0\boost/multi_index_container.hpp(89) : see reference to class template instantiation 'boost::multi_index::detail::sequenced_index<SuperMeta,TagList>' being compiled
1>          with
1>          [
1>              SuperMeta=boost::multi_index::detail::nth_layer<1,std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,boost::multi_index::indexed_by<boost::multi_index::sequenced<>,boost::multi_index::ordered_non_unique<boost::multi_index::tag<boost::property_tree::basic_ptree<std::string,std::string>::subs::by_name>,boost::multi_index::member_offset<std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,const std::basic_string<char,std::char_traits<char>,std::allocator<char>>,0>,std::less<std::string>>>,std::allocator<std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>>>,
1>              TagList=boost::mpl::vector0<boost::mpl::na>
1>          ]
1>          c:\<path to my file>\thirdparty\boost\boost-1.47.0\boost/property_tree/detail/ptree_implementation.hpp(59) : see reference to class template instantiation 'boost::multi_index::multi_index_container<Value,IndexSpecifierList>' being compiled
1>          with
1>          [
1>              Value=std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,
1>              IndexSpecifierList=boost::multi_index::indexed_by<boost::multi_index::sequenced<>,boost::multi_index::ordered_non_unique<boost::multi_index::tag<boost::property_tree::basic_ptree<std::string,std::string>::subs::by_name>,boost::multi_index::member_offset<std::pair<const std::string,boost::property_tree::basic_ptree<std::string,std::string>>,const std::basic_string<char,std::char_traits<char>,std::allocator<char>>,0>,std::less<std::string>>>
1>          ]
1>          c:\<path to my file>\thirdparty\boost\boost-1.47.0\boost/property_tree/detail/ptree_implementation.hpp(182) : see reference to class template instantiation 'boost::property_tree::basic_ptree<Key,Data>::subs' being compiled
1>          with
1>          [
1>              Key=std::string,
1>              Data=std::string
1>          ]
1>          c:\<path to my file>\thirdparty\boost\boost-1.47.0\boost/property_tree/detail/ptree_implementation.hpp(182) : while compiling class template member function 'boost::property_tree::basic_ptree<Key,Data>::basic_ptree(void)'
1>          with
1>          [
1>              Key=std::string,
1>              Data=std::string
1>          ]
1>          ..\..\..\common\Source\AppleiTunesImporter\AppleiTunesLibraryImporter.cpp(24) : see reference to class template instantiation 'boost::property_tree::basic_ptree<Key,Data>' being compiled
1>          with
1>          [
1>              Key=std::string,
1>              Data=std::string
1>          ] 
```

对我来说，我的 ApplieiTunesLibraryImporter.cpp 文件的第 24 行只是

```
ptree pt; 
```

所以，编译器不喜欢我使用它。当我使用类似的东西时，我会遇到类似的错误

```
ptree::const_assoc_iterator assoc_iter; 
```

但上面的代码是我可以使错误发生的最简单的代码。

导致编译错误的 boost 文件 (allocator_utilities.hpp) 中的代码如下所示，但对我来说很神秘。

```
/* allocator-independent versions of construct and destroy */

template<typename Type>
void construct(void* p,const Type& t)
{
  new (p) Type(t);
} 
```

如果有人想尝试重现，这里是 .h 代码。

```
class AppleiTunesLibraryImporter
{
public:

    AppleiTunesLibraryImporter();
    virtual ~AppleiTunesLibraryImporter();

    bool ImportData( std::string itunes_library_xml_path );

}; 
```

这一切都变成了一些大脑融化，所以如果有人能对此有所了解，将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:14:39.603

我发现了问题。我正在处理的项目使用预编译的头文件，对于使用 boost 库的 .cpp 文件，我必须防止这种情况发生。换句话说，我必须右键单击 .cpp 文件...

> 属性 > 配置属性 > C/C++ > 预编译头文件

并将“预编译头文件”设置为“不使用预编译头文件”另外，转到...

> 属性 > 配置属性 > C/C++ > 高级

并将“强制包含文件”设置为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-14T22:11:15.350

我有类似的问题，因为上述解决方案不适用于我。我必须找到根本原因。当我发现它让我烦恼时，我意识到这不是我第一次进行这项调查:)。所以这次没有错误并在这里记录根本原因:)。我怀疑这与作者的根本原因相同。所以在我的情况下，问题是在作为预编译的一部分包含的标题中的某个地方有

```
#define new .... // Debugging memory leaks in debug 
```

这个通过预编译头文件的定义搞砸了新的布局。

因为抛弃这个定义是有问题的（“政治”原因）。在我的情况下我能找到的最好方法

```
#pragma push_macro("new")
#undef new
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/info_parser.hpp>
#pragma pop_macro("new") 
```

# java - Struts 1.x Action 类 ThreadSafe？

> ID：11150015
> 
> 赞同：2
> 
> 时间：2012-06-22T04:04:22.463
> 
> 标签：java, struts-1

谁能解释一下，如果 Struts Action 类在 Struts 1.x 中是线程安全的。

*   RequestProcessor 是否为每个新请求创建新的 ActionClass 实例。
*   它是否缓存 Action 类并将其重用于后续请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:17:54.500

事实上，Struts 1.x 是无状态的。但是，如果您在 Action 中不再包含实例变量（不推荐），因为使用了相同的实例。如果您将日志级别启用为 TRACE，您可以看到 Struts 1.x 的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:21:04.583

它缓存 Action 类的实例并将其重用于后续请求。

你可以在这里查看代码：[org.apache.struts.action.RequestProcessor.process(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.struts/struts-core/1.3.5/org/apache/struts/action/RequestProcessor.java#RequestProcessor.process%28javax.servlet.http.HttpServletRequest%2Cjavax.servlet.http.HttpServletResponse%29)

因此，它们不是线程安全的。

# android - Libgdx 桌面项目：线程“主”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有 gdx

> ID：11150020
> 
> 赞同：0
> 
> 时间：2012-06-22T04:04:54.163
> 
> 标签：android, intellij-idea, libgdx

我在 IntelliJ IDEA 中创建了 Lwjgl libgdx 桌面项目，我添加并绑定了以下库到 /libs：gdx-backend-lwjgl-natives.jar、gdx-backend-lwjgl.jar、gdx-natives.jar、gdx.jar。

我收到运行时错误：线程“main”中的异常 java.lang.UnsatisfiedLinkError：java.library.path 中没有 gdx 用于以下行：

```
 new LwjglApplication(new MyGame(),  "MyGame",MyGame.SCREEN_WIDTH,    MyGame.SCREEN_HEIGHT, false); 
```

这里有这样的线索。他们建议将 *.so 文件添加到项目库中。但这似乎是过时的答案。我可以在 Eclipse 上创建这样的项目...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T07:57:28.493

你的代码是对的，也许有些东西丢失了。我建议你使用一个名为 Gdx Setup UI 的工具。

你可以在office网站上找到。

# java - 将非重复元素添加到可扩展数组

> ID：11150025
> 
> 赞同：0
> 
> 时间：2012-06-22T04:05:32.223
> 
> 标签：java, arrays

我正在尝试在此数组中添加 ENTRY 类型的元素。但在添加之前，我想确保它不是重复的，因为我不想要重复的条目。尝试了很多，但它仍然没有添加条目：/我从 IF 子句中尝试了 BREAK 似乎也没有工作。我真的很傻吗？如果有人可以帮助我，我将不胜感激。干杯

```
import java.util.Arrays;

public class PhoneDirectory {
    private Entry[] ar;
    static int index = 0;

    public PhoneDirectory() {
        ar = new Entry[0];
    }

    public PhoneDirectory(Entry[] ent) {
        ar = ent;
    }

    public boolean addEntry(Entry ent) throws NullPointerException {

        boolean newEntry = true;
        for (int i = 0; i < ar.length; i++) {

            if (ar[i] == ent) {
                newEntry = false;

            else 
                newEntry = true;
        }

        int length = ar.length;
        Entry[] temp = new Entry[length];

        for (int x = 0; x <= length - 1; x++) {

            temp[x] = ar[x];
        }

        length++;
        ar = new Entry[length];

        // add the new entry in the last index
        for (int i = length - 1; i >= 0; i--) {

            if (newEntry == true) {

                ar[i] = ent;
                newEntry = false;
                // return true;
            } else {

                // ar[i] = temp[i];
                return false;
            }
        }

        return true;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:17:06.233

在 addEntry 函数中，您使用电话簿中的所有先前条目创建了临时数组。然后您将 ar 重新分配为新数组。但是，您从未使用存储在 temp 中的先前条目重新填充新 ar。

```
length++;
ar = new Entry[length];

//copy the temp entries back into the new ar
for (int i=0; i<= temp.length-1; i++){
  ar[i] = temp[i];
} 
```

您还需要在 newEntry 循环中添加一个中断：

```
boolean newEntry = true;
for (int i = 0; i < ar.length; i++) {

    //comparing object should use equals
    if (ar[i].equals(ent)) {
        newEntry = false;
        //add break;
        break;
    }
    else 
        newEntry = true;
} 
```

我认为您不需要 for 循环来添加最新条目

代替 ：

```
 for (int i = length - 1; i >= 0; i--) {

        if (newEntry == true) {

            ar[i] = ent;
            newEntry = false;
            // return true;
        } else {

            // ar[i] = temp[i];
            return false;
        }
    } 
```

尝试这个

```
int i = length-1;

if (newEntry == true) {
  ar[i] = ent;
  newEntry = false;
  return true;
} else {
   return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:21:16.300

这是你的问题：

```
 if (ar[i] == ent) {
        newEntry = false;

    else 
        newEntry = true; 
```

你真的想要：

```
if (ar[i].equals(ent)) { 
```

您的条目不太可能是 == 每个条目，这意味着相同的实例，而不仅仅是等效的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T04:21:52.043

确保您已经覆盖了 Class ENTRY 上的 equals 方法

```
for (int i = 0; i < ar.length; i++) {

    if (ar[i].equals(ent)) {
        newEntry = false;
        break;
    }
    else 
        newEntry = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T04:06:34.717

您可以使用`Set`、动态添加数据并保持唯一性

```
Set<Entry> entries = new HashSet<Entry>();
//note you will have to implment `equals()` & `hashcode()` in `Entry` class
//and then simply
entries.add(entry1);
entries.add(entry2);
entries.add(entry3); 
```

它自己生长，你不需要处理它+它保持独特性，

如果要保留集合中的顺序，则需要使用`LinkedHashSet`

在您的代码中

```
for (int i = 0; i < ar.length; i++) {

        if (ar[i] == ent) {
            newEntry = false;

        else 
            newEntry = true;
    } 
```

你正在比较两个对象，所以你需要`equals()`在你的`Entry`类中覆盖，然后你需要使用`ar[i].equals(ent)`来检查（而不是`==`）

另外，例如 ent 与索引 2 处的值匹配，数组大小为 4，然后最后索引`newEntry`将设置为 true，因此它将允许此条目，`break;`当您找到已经存在的条目时使用

# java - xml解析器配置文件

> ID：11150029
> 
> 赞同：0
> 
> 时间：2012-06-22T04:06:11.453
> 
> 标签：java, xml, file, properties, xml-parsing

我正在用java编写一个简单的XML解析器，

请解释我如何从属性文件中读取 XML 标记名称？示例：如果有类似的 XML 文件

```
<parent>
    <child>1</child>
    <child2>2</child2>
</parent> 
```

我想从配置文件中读取标签名称。这是我目前正在处理的代码，我正在使用 test.xml 文件从中读取数据。

```
public class xml2 
{
    public void xmlR(File f)
    {
        try
        {
            FileInputStream IF=new FileInputStream(f);
            DataInputStream data=new DataInputStream(IF);
            BufferedReader buf=new BufferedReader(new InputStreamReader(data));
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(f);
            doc.getDocumentElement().normalize();
            NodeList nList = doc.getElementsByTagName("test");

            File file=new File("xml.txt");
            BufferedWriter writer = new BufferedWriter(new FileWriter(file));

            for (int temp = 0; temp < nList.getLength(); temp++) 
                {

                Node nNode = nList.item(temp);
                if (nNode.getNodeType() == Node.ELEMENT_NODE) 
                {

                    Element eElement = (Element) nNode;
                    writer.write("ID : " + getTag("id", eElement));
                    writer.newLine();
                    writer.write("Name : " + getTag("Name", eElement));
                    writer.newLine();
                    writer.write("AGE: " + getTag("age", eElement));
                    writer.newLine();
                    writer.flush();
                    writer.write("-----------------------");writer.newLine();
                }
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    private static String getTag(String sTag, Element eElement) 
    {
        NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

        Node nValue = (Node) nlList.item(0);

        return nValue.getNodeValue();
    }

    public static void main(String args[])
    {
        xml2 x=new xml2();
        x.xmlR(new File("test.xml"));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:08:42.970

您还没有显示您的配置文件，因此无法为您提供工作代码，但通常对于这种 XML，最简单的方法是使用表单的 XPath 表达式从配置文件中获取每个值`/config/param[@name=$xxx]/@value`。

您正在使用 DOM，这似乎是新接触 XML 的 Java 程序员的默认选择。但是 DOM 陈旧、臃肿且不友好：人们使用它的唯一原因是它内置在 JDK 中。还有更好的选择，例如 JDOM 和 XOM。

# vb.net - 从二进制文件中读取并将字节数组转换为字符串

> ID：11150036
> 
> 赞同：0
> 
> 时间：2012-06-22T04:06:49.720
> 
> 标签：vb.net, binary-data

我正在尝试使用下面的代码从二进制文件中读取二进制数据，但它返回字节数组中的值。如何从二进制文件中读取二进制数据，然后将数据转换为字符串？

这就是我创建二进制文件的方式。

```
Dim fs As New FileStream(Application.StartupPath & "\Agency.dat", FileMode.OpenOrCreate)
    Dim bf As New BinaryFormatter()
    Call bf.Serialize(fs, GAgency)
    fs.Close() 
```

读取二进制文件的代码。

```
Public Shared Function ReadBinaryFile(ByVal path As String)
    ' Open the binary file.
    Dim streamBinary As New FileStream(path, FileMode.Open)

    ' Create a binary stream reader object.
    Dim readerInput As BinaryReader = New BinaryReader(streamBinary)

    ' Determine the number of bytes to read.
    Dim lengthFile As Integer = FileSize(path)

    ' Read the data in a byte array buffer.
    Dim inputData As Byte() = readerInput.ReadBytes(lengthFile)

    ' Close the file.
    streamBinary.Close()
    readerInput.Close()

    Return inputData
End Function 'ReadBinaryData’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:13:20.333

尝试作为

```
Dim objGAgency As GAgency
Dim fs As Stream = New FileStream( Application.StartupPath & "\Agency.dat", FileMode.Open)
Dim bf As BinaryFormatter = New BinaryFormatter()

objGAgency = CType(bf.Deserialize(fs), GAgency)
fs.Close() 
```

# android - 如何查看从 httppost 发送的字符串？

> ID：11150044
> 
> 赞同：2
> 
> 时间：2012-06-22T04:08:44.350
> 
> 标签：android, string, url, http-post, httpclient

下面是一段试图发布到本地服务器上的 PHP 脚本的代码片段。我正在将数据传输回服务器的 MySQL 表，并且由于数据量非常小，我想我会使用 HttpClient 将数据嵌入到 URL 参数中。

然而，即使我从服务器得到的响应是正常的（HTTP 代码 = 200），很明显服务器端 PHP 脚本没有得到正确格式的数据（对 MySQL 表没有影响）。但是，当我在浏览器中手动输入 URL+args 时，如下所示：

```
http://10.0.0.13/jobs_returndata_test.php?jobnum=189193&pnum=3&entime=13:00&extime=14:00 
```

例如，一切正常（PHP 脚本正确写入 MySQL 表）。

我的问题：有没有一种方法可以实际查看 HttpClient 发送的内容？（即，HttpPost 对象的整个 .toString 内容？）。这是Android端的片段：

```
// Create a new HttpClient and Post Header, send data as args to PHP file
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://10.0.0.13/jobs_returndata.php");
try {
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("jobnum",convertSimple(jobNum)));
    nameValuePairs.add(new BasicNameValuePair("pnum",convertSimple(rowNum)));
    nameValuePairs.add(new BasicNameValuePair("entime",enteredInTime));
    nameValuePairs.add(new BasicNameValuePair("extime",enteredOutTime));

    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    Log.i("HTTP Post", "Execute Post sending jobnum="+ convertSimple(jobNum) +      
    "&pnum="+ convertSimple(rowNum) + "&entime=" + enteredInTime
                    + "&extime=" + enteredOutTime);
    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);
    Log.i("HTTP Post", "Response from server = " + response.getStatusLine().getReasonPhrase() + "  Code = " + convertSimple(response.getStatusLine().getStatusCode()));

        } catch (ClientProtocolException e) {
            Log.e("HTTP Post", "Protocol error = " + e.toString());
        } catch (IOException e) {
            Log.e("HTTP Post", "IO error = " + e.toString());
        } 
```

我的服务器端 PHP 文件是：

```
?php
$jobnum=$_GET['jobnum'];
//echo "jobnum = $jobnum <br />";
$pnum=$_GET['pnum'];
//echo "pnum = $pnum <br />";

$entime=$_GET['entime'];
//echo "entime = $entime <br />";

$extime=$_GET['extime'];
//echo "extime = $extime <br />";

$dbh=mysql_connect ("localhost", "Steve", "pluggin");
mysql_select_db ("DriverJobs");

$result = mysql_query("UPDATE jobs SET EntryTime = '$entime' WHERE JobNumber = '$jobnum' AND PointNum = '$pnum' ");  
$result = mysql_query("UPDATE jobs SET ExitTime = '$extime' WHERE JobNumber = '$jobnum' AND PointNum = '$pnum' ") ;  

//echo "done <br />";
?> 
```

相关部分的 logcat：

> 06-22 13:33:11.341: I/HTTP Post(27788): 执行 Post 发送 jobnum=189193&pnum=3&entime=9:00&extime=9:05 06-22 13:33:11.581: I/HTTP Post(27788):来自服务器的响应 = OK 代码 = 200

权限很好（在 INTERNET 的清单文件中，对于 PHP 文件，Apache2 已打开并正在运行，API=8，使用带有 Android 模拟器的 Eclipse）。*convertSimple()*是一个 2 衬里，它返回一个 int 原语的等效字符串。

提前感谢您查看此内容！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T04:41:51.657

使用此方法

```
private String convertStreamToString(InputStream is) throws Exception {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line);
    }
    is.close();
    return sb.toString();
} 
```

并像这样调用以查看您的 post 方法中包含哪些实体

```
try {
    HttpPost postMethod = new HttpPost("your url");
    Log.i(TAG,"HTTP Entiry : " + convertStreamToString(postMethod.getEntity().getContent()));
}catch (Exception e){
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T04:14:58.000

在浏览器中输入变量时看到变量的原因是 GET 和 POST 之间的区别。当您使用浏览器时，您是以 GET 格式发送变量。

在您的 php 代码中使用：

```
$_POST['varname']; 
```

或者您可以使用 request 来获取 POST 和 GET 变量：

```
$_REQUEST['varname']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T04:20:08.097

我会使用[提琴手](http://www.fiddler2.com/fiddler2/)来查看请求

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-22T04:21:12.603

在**HttpResponse**之后添加代码如下图

```
 InputStream is;

           try{
             if( response == null ){

               }else{
                  HttpEntity entity = response.getEntity();
                  is = entity.getContent();   
                     }

              } catch (Exception e) {
               Log.e("log_tag", "Error in http connection " + e.toString());
                 }

        // convert response to string
    try {
          BufferedReader reader = new BufferedReader(new InputStreamReader(
              is, "iso-8859-1"));
          StringBuilder sb = new StringBuilder();
          String line = null;
          while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
          }
          is.close();
          result = sb.toString();
          Log.e("res",result); 
      } catch (Exception e) {
          Log.e("log_tag", "Error converting result " + e.toString());
       } 
```

**结果**将在字符串中 为您提供响应，我已在日志中打印以进行测试

# file - facebook 如何管理图片上传？

> ID：11150045
> 
> 赞同：0
> 
> 时间：2012-06-22T04:09:05.290
> 
> 标签：file, web-applications, social-networking

facebook 如何管理其会员上传的图片的存储？我想这些文件被划分在多个存储设备上，但是如果有一个表包含了各个存储设备的所有路径，应该如何决定将文件添加到哪个文件系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:16:02.890

Facebook 的照片存储系统称为 Haystack。

这里有一个技术介绍：[http ://www.facebook.com/note.php?note_id=76191543919](http://www.facebook.com/note.php?note_id=76191543919)

请注意，该链接来自 2009 年，因此其中一些数字现在可能已经过时了。

# objective-c - 如何在我们的模拟器中启用网页警报？

> ID：11150047
> 
> 赞同：1
> 
> 时间：2012-06-22T04:09:22.663
> 
> 标签：objective-c, ios5, uiwebview, xcode4.3

它们是否有任何属性可以在我们的 web 视图中启用 java 脚本警报？

在android代码中是-

```
mWebView = (WebView) findViewById(R.id.webview);

mWebView.getSettings().setJavaScriptEnabled(true); 
```

我在谷歌搜索，但我没有找到在我们的 Objective-c 中使用这种类型的属性的任何帮助。

iPhone中是否有类似的属性？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:14:46.590

Java 脚本默认启用且无法禁用。因此您无需为此烦恼。

# cmd - 测试文本文件中的某个字符

> ID：11150048
> 
> 赞同：0
> 
> 时间：2012-06-22T04:09:33.757
> 
> 标签：cmd

我有一个系统生成的文本文件（20 个字符）。如果内容以 # 字符开头，我想创建另一个文本文件，其中“无可用文本”作为唯一内容。如果第一个字符不是 #，则新文本文件应包含与源文件完全相同的文本。

我需要在 windows xp 机器上实现这一点，而无需安装任何额外的软件。

我可以在 Python 中轻松完成，但我想这必须是一个 windows cmd 作业。

感激地收到任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:23:37.127

如果您知道该文件始终只包含一行 txt：

```
>outputFile.txt (findstr /v "^#" inputFile.txt || echo No text available) 
```

如果文件可以包含多行

```
>outputFile.txt (findstr /n "^#" inputFile.txt | >nul findstr /b "1:" && (echo No text available) || type inputFile.txt) 
```

# jquery - 表单提交输入 > 页面在新窗口中打开

> ID：11150050
> 
> 赞同：0
> 
> 时间：2012-06-22T04:09:35.247
> 
> 标签：jquery, html

我有一个网站，我创建了一个“自定义搜索”功能。我对其进行了设置，因此这个“搜索字段屏幕”（用户在搜索中输入的位置）在点击时打开了一个花哨的 iframe。

它看起来很棒，*除了*- 当用户“提交”表单时 - 或输入他们的自定义搜索并继续到下一个屏幕。结果屏幕仍然在 iframe 框中拉入（啊！）。它需要在浏览器中正常拉起来代替搜索窗口。

我试过添加`target="_parent"`

**例如：**

```
<INPUT type="submit" target="_parent" name="search" value="Search" border="0" style="cursor:pointer;" class="searchbtn"></form> 
```

**我猜你最终如何在 iframe-fancybox 中提交下一页或结果，清除 fancybox 并在同一个窗口中加载？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:57:03.513

试试这个：target="_self"。愿它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:57:30.483

**我认为您应该在表单标签**中使用目标属性，而不是在输入标签中。

但是 target 属性已被弃用，因此您可以将 formtarget="_parent" 属性用于**提交按钮**。

# classpath - 当我在 cmd 提示符下键入“java”时，错误消息指向旧文件结构；CLASSPATH 已更新

> ID：11150051
> 
> 赞同：0
> 
> 时间：2012-06-22T04:09:51.663
> 
> 标签：classpath

在我重命名了我的 JDK 文件夹并删除了一个 JRE 文件夹（实际上我必须杀死一个进程才能删除该文件夹）之后，我相应地编辑了系统变量，但是当我输入“javac”或'java' 即使 %classpath% 显示更新的值。

是否存在仍保持旧值的隐藏系统变量？文件夹我如何获得指向 jre 文件夹的旧指针？这是因为我早先结束了一个 java 进程以便能够删除 JRE 文件夹吗？如果是这样，我现在该如何解决？

非常感谢您提前帮助我。

**这是从命令窗口复制的：**

C:\jdk1.7>java

错误：无法打开“C:\Program Files\Java\jre7\lib\i386\jvm.cfg”

C:\jdk1.7>javac

'javac' 不是内部或外部命令、可运行程序或批处理文件。

C:\jdk1.7>echo %classpath% .;C:\jdk1.7\bin;C:\jdk1.7\lib;C:\jdk1.7\jre\bin;C:\ANT\lib;C :\ANT\bin;c:\documen ts and settings\homayoon\我的文档\selenium 教程\;

C:\jdk1.7>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:17:46.957

如果您手动重命名文件夹，将会有很多注册表项指向旧名称。
使用 RegEdit 更改它们；或者，更快地重新安装 Java。

# python - Scrapy - 每个项目抓取多个页面

> ID：11150053
> 
> 赞同：2
> 
> 时间：2012-06-22T04:10:02.990
> 
> 标签：python, scrapy

我正在尝试为每个项目抓取一些额外的页面以获取一些位置信息。

在返回之前的项目末尾我检查我们是否需要爬取额外的页面来获取信息，本质上这些页面包含一些位置详细信息并且是一个简单的获取请求。

即[http://site.com.au/MVC/Offer/GetLocationDetails/?locationId=3761&companyId=206](http://site.com.au/MVC/Offer/GetLocationDetails/?locationId=3761&companyId=206)

上面的链接要么返回一个包含更多要抓取的页面的选择，要么返回一个带有地址详细信息的 dd/dt。无论哪种方式，我都需要提取此地址信息并将其附加到我的项目 ['locations']

到目前为止我有（在解析块的末尾）

```
return self.fetchLocations(locations_selector, company_id, item) 
```

location_selector 包含 locationIds 的列表

然后我有

```
def fetchLocations(self, locations, company_id, item): #response):
    for location in locations:
        if len(location)>1:
            yield Request("http://site.com.au/MVC/Offer/GetLocationDetails/?locationId="+location+"&companyId="+company_id,
            callback=self.parseLocation,
                meta={'company_id': company_id, 'item': item}) 
```

最后

```
def parseLocation(self,response):
    hxs = HtmlXPathSelector(response)
    item = response.meta['item']

    dl = hxs.select("//dl")
    if len(dl)>0:
        address = hxs.select("//dl[1]/dd").extract()
        loc = {'address':remove_entities(replace_escape_chars(replace_tags(address[0], token=' '), replace_by=''))}
        yield loc

    locations_select = hxs.select("//select/option/@value").extract()
    if len(locations_select)>0:
        yield self.fetchLocations(locations_select, response.meta['company_id'], item) 
```

似乎无法让这个工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:41:58.717

这是你的代码：

```
def parseLocation(self,response):
    hxs = HtmlXPathSelector(response)
    item = response.meta['item']

    dl = hxs.select("//dl")
    if len(dl)>0:
        address = hxs.select("//dl[1]/dd").extract()
        loc = {'address':remove_entities(replace_escape_chars(replace_tags(address[0], token=' '), replace_by=''))}
        yield loc

    locations_select = hxs.select("//select/option/@value").extract()
    if len(locations_select)>0:
        yield self.fetchLocations(locations_select, response.meta['company_id'], item) 
```

回调必须将请求返回到其他页面或项目。在上面的代码中是看到请求，但不是项目。你有，`yield loc`但`loc`不是子类。`dict``Item`

# php - PHP，Openwall Portable PHP 密码散列框架为同一个词返回不同的散列

> ID：11150057
> 
> 赞同：0
> 
> 时间：2012-06-22T04:10:58.170
> 
> 标签：php, passwords, hash

使用时

```
 $t_hash = new PasswordHash(12, FALSE); 
```

每个实例

```
 $passHASH = $t_hash->HashPassword($password); 
```

即使出现相同的单词，也会返回不同的结果。例如：

```
$t_hash->HashPassword('test') => $2a$12$7OKS2iaFMWfTYL7sHdl9EunA90.ZdiEIXgPcpXFsqrhD3z7tk06eO
$t_hash->HashPassword('test') => $2a$12$MWtkeSMQgUU22nCjRZmV8uG8dgHByM1nvyrk7XE9bw6znK8ZDFfwy
$t_hash->HashPassword('test') => $2a$12$Dx1sYTWIZmiREyn0KYh4G.daUNsmksYiSpnUKdaHZMrELIwmlhPyW 
```

谁能帮我解决这个问题？执行以下代码时

```
$t_hash = new PasswordHash(12, FALSE);
$passwordHASH = $t_hash->HashPassword($array['pass']);
$passwordHASH = $t_hash->HashPassword($passwordHASH,$array['pass']);
print($passwordHASH."<br/>");
$passwordHASH = $t_hash->HashPassword($passwordHASH,$array['pass']);
print($passwordHASH."<br/>");
$passwordHASH = $t_hash->HashPassword($passwordHASH,$array['pass']);
print($passwordHASH."<br/>");
$passwordHASH = $t_hash->HashPassword($passwordHASH,$array['pass']);
print($passwordHASH); 
```

退货

```
$2a$12$h3BLa3ytEmASpHgqVnmj4.3K5TwPPqwQG/cGHx/64KN1lqMtFZ8dC
$2a$12$x4uK46uBjv5xVstc4sR7iOrOJGPbSbWJRZIFlz9ir7ktydpYqStxO
$2a$12$r.CAy.amcVTFG.CtkTNg0eBN4HXP8tp4Yj/tsIVH7SxmK1bGjQJLS
$2a$12$8NzPVId7ReZVJJA7oWtkvuR2WKwPIUkpY/NQ2lszSH6EwdubzyIrm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:37:38.933

这是正确的行为，`HashPassword`每次调用时都会使用随机盐，因此结果不会相同。

# authentication - Yii 具有相同身份验证角色的多个系统？

> ID：11150060
> 
> 赞同：1
> 
> 时间：2012-06-22T04:12:04.073
> 
> 标签：authentication, yii

嗨，我有 3 个基于 Yii 的系统，例如：

```
sys1.domain.com
sys2.domain.com
sys3.domain.com 
```

现在，这 3 个系统共享相同的数据库、相同的用户和其他实体……当然还有 3 个 yii auth 表。

现在我的问题是，在配置身份验证时，如何为每个系统分离身份验证规则？

我正在使用 Yii 扩展“权限”来管理角色，如果这有帮助的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:27:46.293

由于您有三个系统 sys1、sys2 和 sys3 的单个数据库，并且您只想要不同的身份验证表，因此您可以添加三个身份验证表 auth_sys3、auth_sys2、auth_sys1 并在每个系统写入配置的配置文件中或在全局位置写入 php 逻辑将 auth_sys1、auth_sys2、auth_sys3 的别名设为 auth，这样您就不需要对内部代码进行任何更改来调用 auth。

# ruby - 根据 Ruby 中的自定义属性定义语言验证 XML

> ID：11150070
> 
> 赞同：0
> 
> 时间：2012-06-22T04:13:28.513
> 
> 标签：ruby, xml

我需要编写一个 Ruby 脚本来根据主 XML 模式模板验证 XML 响应。

例如，来自控制器后端的示例 XML 响应是：

```
<a>
  <ID>TestID</ID>
  <Name>NameTest</Name>
  <Description/>
  <DisplayName>DisplayNameTest</DisplayName>
</a> 
```

我有一个 XML 模式模板，其中一个部分如下所示：

```
<Object name = "a">
  <property name = "ID" optional="true"/>
  <property name = "Name" optional="true"/>
  <property name="visibility" />
  <property name="Description" optional="true" />
  <property name="DisplayName" optional="true" />  
</Object> 
```

我要针对架构模板验证的事情是：

1.  如果可选属性标记设置为 true，则此标记是必需的，并且必须存在于响应中。

2.  标签顺序需要遵循架构模板中的标签顺序。

如果任一条件不符合，则返回 false。

我现在拥有的一些代码是（可能有很多方法可以更好地做到这一点）：

```
response_xml = REXML::Document.new(response_xml)
response_xml_root = response_xml.root.name.to_s.chomp
xml_api_meta = REXML::Document.new(File.read('Schema.xml'))
response_xml_array = response_xml.root.elements.to_a.collect { |e| e.name }

@api_meta_array = []
xml_api_meta.elements.each('ApiMeta/Object') do |element|
  if element.attributes["name"] == response_xml_root
    element.elements.each do |children|
      @api_meta_array.push children.attributes["name"]
    end
  end
end 
```

我的想法是从响应 XML 中收集所有标记名称并将它们推送到一个数组`@response_xml_array`中，并对模式执行相同的操作并推送在数组中找到的所有标记`@api_meta_array`。

如何验证序列以及它是否是可选的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T05:43:32.970

If you have xml, why don't use use an [Xml Schema](http://www.w3.org/XML/Schema) xsd file to validate the xml? Then you can use Nokogiri for instance to validate the xml. [http://nokogiri.rubyforge.org/nokogiri/Nokogiri/XML/Schema.html](http://nokogiri.rubyforge.org/nokogiri/Nokogiri/XML/Schema.html) . This is much easier than writing your own validator.

Relax NG is another schema definition language.

Is your "XML schema template" in a defined language? (Forgive my ignorance if it is obvious.) If so, libraries supporting the language should be able to validate xml using the schema. If not, you might be able to translate it to xml schema

# c# - WPF 实体框架绑定到导航属性未更新

> ID：11150071
> 
> 赞同：0
> 
> 时间：2012-06-22T04:13:46.560
> 
> 标签：c#, wpf, entity-framework-4

我有一个带有绑定到实体框架对象的客户属性的视图模型。客户对象具有到其他表的多个导航属性。如果其中一个依赖表中已经存在现有记录，我的视图会正确显示，并且我可以编辑和保存，但是当我尝试将新对象添加到 Customer 属性时，例如：

Customer.BillingDetail = new CustomerBillingDetail();

即使 viewmodel Customer 属性填充了空白对象，视图也不会绑定到新对象。所以当我去保存时，输入的值都没有保存到视图模型中，它仍然有空白对象。

那么，如何让视图和视图模型在向导航属性添加新对象时进行通信？

视图模型中是否缺少用于跟踪客户导航属性的属性更改的内容？

谢谢，-希德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:45:06.717

我猜你的 EF 对象没有实现 INotifyChanged 并且不使用 ObservableCollections

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:30:32.930

当您将视图与客户对象中的值绑定并在任何绑定控件中进行一些更改时，请明确我一件事。该更改是否保留在数据库中。如果没有，那么您必须尝试使用**​​ TwoWay**模式绑定该属性。

它有助于从绑定控件更新您的客户对象。

# web-scraping - 使用 POST 方法抓取网站

> ID：11150075
> 
> 赞同：0
> 
> 时间：2012-06-22T04:14:47.783
> 
> 标签：web-scraping

嗨，我正在抓取一个网站[cleartrip.com](http://cleartrip.com)

我通过这种方法获取页面信息：

```
$url = "http://www.cleartrip.com/m/flights/results?from=CCU&to=DEL&depart_date=22/06/2012&adults=1&childs=0&infants=0&dep_time=0&class=Economy&airline=&carrier=&x=57&y=16&flexi_search=no&tb=n";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, "android Mozilla/5.0 (Linux; U; Android 0.5; en-us)");
$curl_scraped_page = curl_exec($ch);
curl_close($ch); 
```

问题是我想要那些有停止的航班........信息是通过post方法传递的，但我不知道我怎么能得到它？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:43:55.950

您可能需要在 DOM 中搜索包含所需信息的元素。可能通过正则表达式。

# javascript - 链接到页面然后执行 Javascript 请求

> ID：11150079
> 
> 赞同：1
> 
> 时间：2012-06-22T04:15:05.570
> 
> 标签：javascript

有谁知道是否可以使用 href 链接到页面然后调用 javascript 函数？

例如：href="http://www.mywebsite.com/Details.aspx?javascript:__doPostBack('INFO','')

我该怎么办？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:28:17.870

一种方法是将变量传递给带有值的页面，例如`somelink.com?navigation=method`

然后，在该页面上，获取变量`navigation`并编写一个简单的 if 语句，例如：

```
if ( navigation === "someMethod" ){
    theMethodToCall();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:18:45.983

不，您不能在这样的另一个页面中运行 javascript。但是您可以阻止点击的默认行为，在 iframe 中加载页面，然后在那里运行 js（可能适用[同源策略）。](http://code.google.com/p/browsersec/wiki/Part2#Same-origin_policy)

# events - 如何更新 GUI 中的 textctrl 内容？

> ID：11150080
> 
> 赞同：2
> 
> 时间：2012-06-22T04:15:10.320
> 
> 标签：events, wxpython

我正在尝试编写我的第一个 wxpython GUI 程序，在我的程序中，我想获得另一个软件窗口的标题，如果标题改变，清除旧标题并在 GUI 中显示新标题，我在 cmd 中测试，它可以得到循环中的标题，但我不知道如何在 GUI 中设置事件来更新标题。

我的代码：

```
def getinfos():
    tempWindowName=win32gui.GetWindowText (find_window())
    while True:
        titles=[]
        if (tempWindowName==win32gui.GetWindowText (find_window())):
            pass
        else:
            tempWindowName=win32gui.GetWindowText (find_window())               
            titles.append(tempWindowName)

            return title[0]

    time.sleep(1000) 
```

和图形用户界面代码：

```
import controller2
import time

########################################################################
class InfoPanel(wx.Panel):

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        try:
            self.titleResults = controller2.getinfos()                            
        except:               
            self.titleResults = 'no data'

        mainSizer = wx.BoxSizer(wx.VERTICAL)

        self.titlecontent = wx.TextCtrl(self, -1, "", style=wx.TE_MULTILINE|wx.TE_RICH|wx.TE_LEFT|wx.TE_WORDWRAP|wx.NO_BORDER)                                                                                                                    
        self.titlecontent.SetBackgroundColour('white')
        self.settitle()

        mainSizer.Add(self.yejicontent, 2.5, wx.ALL|wx.EXPAND, 5)

        self.SetSizer(mainSizer)

    #----------------------------------------------------------------------
    def settitle(self):

        self.titlecontent.SetValue("%s"%self.titleResults)

########################################################################
class InfoFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="title",size=(500, 880))
        panel = InfoPanel(self)
        style= self.GetWindowStyle()
        self.SetWindowStyle(style|wx.STAY_ON_TOP)

class MyApp(wx.App):
    def OnInit(self):
        self.infoFrame=InfoFrame()        
        self.SetTopWindow(self.infoFrame)
        self.infoFrame.Show(True)        
        return True

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = MyApp(False)
    app.MainLoop() 
```

感谢您的宝贵时间，并感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:44:02.387

将 getinfos 函数/方法放入线程中。当标题更改时，让线程使用 wx.CallAfter 或 wx.PostEvent（两者都是线程安全的）来告诉 GUI 更新。如果你不把它放到一个线程中，你的 GUI 将非常迟钝。

*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)
*   [http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

Pubsub 很不错，但在这种情况下，如果您在 wxPython 主循环中运行 getinfos 函数，它将无法正常工作，因为它会阻塞它。您可以在线程中结合我提到的那些线程安全方法使用 pubsub。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:02:43.857

您可以发送[自定义 wx 事件](http://wiki.wxpython.org/CustomEventClasses)或设置[pubsub](http://wiki.wxpython.org/WxLibPubSub)。

# oracle - 缓存命中 (ehCache)

> ID：11150086
> 
> 赞同：0
> 
> 时间：2012-06-22T04:16:12.387
> 
> 标签：oracle, ehcache

是否有任何方法或任何参数可用于查找要缓存的命中数。我们将 Ehcache 用于我们的应用程序。感谢在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:22:25.600

你看过 Cache.getStatistics() 吗？

[http://ehcache.org/apidocs/net/sf/ehcache/Cache.html#getStatistics](http://ehcache.org/apidocs/net/sf/ehcache/Cache.html#getStatistics) () [http://ehcache.org/apidocs/net/sf/ehcache/Statistics.html](http://ehcache.org/apidocs/net/sf/ehcache/Statistics.html)

```
Cache cache = cacheManager.getCache("someCache");
Statistics stats = cache.getStatistics();

long hits  = stats.getInMemoryHits();
long misses = stats.getInMemoryMisses(); 
```

# c - 在 ANSI C 中使用指针标记字符串

> ID：11150092
> 
> 赞同：0
> 
> 时间：2012-06-22T04:17:37.073
> 
> 标签：c, string, tokenize, ansi

这是在 Ansi C 中。我得到了一个字符串。我应该创建一个方法，该方法返回一个字符指针数组，这些指针指向所述字符串的每个单词的开头。我不允许使用 Malloc，而是告诉我输入的最大长度为 80。

另外，在有人因为我不搜索论坛而抨击我之前，我不能使用 strtok :(

```
char input[80] = "hello world, please tokenize this string" 
```

并且方法的输出应该有6个元素；

```
output[0] points to the "h",
output[1] points to the "w", 
```

等等。

我应该如何编写方法？

此外，我需要一种类似的方法来处理来自最多 110 行文件的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:26:06.797

伪代码：

```
boolean isInWord = false
while (*ptr != NUL character) {
   if (!isInWord and isWordCharacter(*ptr)) {
       isInWord = true
       save ptr
   } else if (isInWord and !isWordCharacter(*ptr)) {
       isInWord = false
   }
   increment ptr
} 
```

`isWordCharacter`检查字符是否是单词的一部分。根据您的定义，它可以只是字母字符（识别`part-time`为 2 个单词），也可能包含`-`（识别`part-time`为一个单词）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:34:28.967

因为这是家庭作业，所以这是您可能需要的一部分：

```
char* readPtr = input;
char* wordPtr = input;
int wordCount = 0;
while (*readPtr++ != ' ');
/* Here we have a word from wordPtr to readPtr-1 */
output[wordCount++] = /* something... :)  */ 
```

您需要循环使用它，并且必须考虑如何移动到下一个单词，并检查输入是否结束。

# javascript - Facebook：获取我的墙提要的图形 api 响应的问题

> ID：11150097
> 
> 赞同：0
> 
> 时间：2012-06-22T04:18:19.280
> 
> 标签：javascript, facebook, facebook-graph-api

我一直在搞乱 Graph API explorer。当我获得访问代码并进行如下查询时：

```
/me/feed?access_token=[some access token]&until=[day after my birthday] 
```

我得到一个空的响应数组...没有错误，只是空的

同样的语法用于显示不仅仅是我的生日墙提要的一天，它可以工作。似乎 facebook 对我在生日期间试图访问我墙上的帖子提出异议。

有没有人有办法解决吗？

非常感谢

# android - SQLite 数据库未显示在文件资源管理器中

> ID：11150103
> 
> 赞同：4
> 
> 时间：2012-06-22T04:19:12.007
> 
> 标签：android, android-sqlite

我的应用程序中有一个 SQLite 数据库。当我在文件资源管理器中检查数据库是否已创建时，文件夹中没有任何数据库文件`data`。它甚至没有显示使用该`adb shell`命令。这是否意味着尚未创建数据库？关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T04:26:06.690

如果您使用的是实际设备，除非您对手机进行 root，否则您将无法从外部查看或访问它。

如果您使用的是模拟器，DDMS 视图将让您导航到它并从那里拉取它。

或者，您可能在创建数据库时遇到问题。没有看到您的代码，我们无法判断。

**编辑**

如果您想从真实设备上获取文件，您需要实现一种方法将其从数据目录复制到您可以访问的某个地方（例如您的 SD 卡）。这可以解决问题：

```
public void backup() {
    try {
        File sdcard = Environment.getExternalStorageDirectory();
        File outputFile = new File(sdcard,
                "YourDB.bak");

        if (!outputFile.exists()) 
             outputFile.createNewFile(); 

        File data = Environment.getDataDirectory();
        File inputFile = new File(data, "data/your.package.name/databases/yourDB");
        InputStream input = new FileInputStream(inputFile);
        OutputStream output = new FileOutputStream(outputFile);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }
        output.flush();
        output.close();
        input.close();
    } catch (IOException e) {
        e.printStackTrace();
        throw new Error("Copying Failed");
    }
} 
```

# c# - 如何将抛出的异常从 C# 类传递到 C# 窗体

> ID：11150105
> 
> 赞同：0
> 
> 时间：2012-06-22T04:19:29.013
> 
> 标签：c#, error-handling, try-catch, rethrow

我有一个 c# 项目，分为 UI 层和业务层。基本上我有一个表格，您可以在其中选择一个帐户并输入一个存款号码。单击确定按钮后，您的 DepositTransaction.cs 将处理交易。

以下是 DepositForm 的示例代码：

```
private void buttonOK_Click(object sender, EventArgs e) {
        try {
            bool inputTest;
            decimal amount;
            inputTest = decimal.TryParse(textBoxAmount.Text, out amount);
            if (inputTest == false) {
                throw new InvalidTransactionAmtException();
            } else {
                BankAccount account = comboBoxAccount.SelectedItem as BankAccount;
                deposit = new DepositTransaction(account, amount);
                this.DialogResult = DialogResult.OK;
            }
        } catch (InvalidTransactionAmtException ex) {
            errorProviderDeposit.SetError(textBoxAmount, ex.Message);
            textBoxAmount.Select();
            textBoxAmount.SelectAll();
        } catch (InvalidTransactionAmtNegativeException ex) {
            errorProviderDeposit.SetError(textBoxAmount, ex.Message);
            textBoxAmount.Select();
            textBoxAmount.SelectAll();
        } catch (AccountInactiveException ex) {
            errorProviderDeposit.SetError(textBoxAmount, ex.Message);
            textBoxAmount.Select();
            textBoxAmount.SelectAll();
        }
    } 
```

现在是 DepositTransaction 的示例代码

```
public override void DoTransaction() {
        try {
            if (Amount <= 0) {   //Amount is the amount passed by the form
                throw new InvalidTransactionAmtNegativeException();
            }
            if (acc.Active == false) {    //acc is the account passed by the form
                throw new AccountInactiveException();
            }
            acc.Credit(Amount);
            Summary = string.Format("{0} {1}", Date.ToString("yyyy-MM-dd"), this.TransactionType);
            this.setStatus(TransactionStatus.Complete);
        } catch (InvalidTransactionAmtNegativeException ex) {
            throw;
        } catch (AccountInactiveException ex) {
            throw;
        }
    } 
```

但是，尝试上述方法不会将错误传递给表单。它只是使程序崩溃，说没有处理异常。

我在stackoverflow上看到另一个问题，提到传递错误的方法只是使用`throw:`，并且该错误将传递给调用此类的类（在我的情况下为表单），并将在表单中处理。

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T04:25:02.693

它只是意味着抛出了一个既不是**InvalidTransactionAmtNegativeException**也不是**AccountInactiveException**类型的异常。添加新的捕获块

```
catch (Exception ex) {
    throw;
} 
```

编辑：你应该把它放在最后。它将捕获您的 DoTransaction 方法中可能引发的任何其他异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:27:24.503

您在 UI 中的所有 catch 块中重复代码，只需使用通用的 catch 块：

```
private void buttonOK_Click(object sender, EventArgs e) {
        try {
            bool inputTest;
            decimal amount;
            inputTest = decimal.TryParse(textBoxAmount.Text, out amount);
            if (inputTest == false) {
                throw new InvalidTransactionAmtException();
            } else {
                BankAccount account = comboBoxAccount.SelectedItem as BankAccount;
                deposit = new DepositTransaction(account, amount);
                deposit.DoTransaction();
                this.DialogResult = DialogResult.OK;
            }
        //catch any type of exception here
        } catch (Exception ex) {
            errorProviderDeposit.SetError(textBoxAmount, ex.Message);
            textBoxAmount.Select();
            textBoxAmount.SelectAll();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T04:29:00.587

似乎您的异常不属于您在 catch 块中给出的特定异常。所以最后捕获通用异常。这是一个很好的做法。

# angularjs - 在angularjs中，如何根据用户的权限显示或隐藏一些按钮？

> ID：11150106
> 
> 赞同：6
> 
> 时间：2012-06-22T04:19:34.027
> 
> 标签：angularjs

使用 angularjs，我们通常使用纯 HTML 来编写视图。现在我有一个问题：如何根据用户的权限显示或隐藏一些按钮？

例如，当前页面正在显示一篇文章。如果当前用户是作者或文章，或管理员，则显示“删除”按钮。

但是由于视图是纯 HTML，我该如何控制它呢？

我可以发布一个请求，将一些数据（例如当前用户ID，文章ID）传递给服务器进行检查，但是如果按钮很多，我需要多次请求，这是无效的。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T08:31:00.487

您可以使用[ngShow 指令](http://docs.angularjs.org/api/ng.directive%3angShow)。我整理了[一个小演示](http://jsfiddle.net/sveinatle/Takey/1/)，但重要的一点很简单：

```
<button ng-show="user.id==post.postedby">Delete</button> 
```

# jquery - jquery hover fade on menu淡入淡出背景问题

> ID：11150107
> 
> 赞同：0
> 
> 时间：2012-06-22T04:19:37.300
> 
> 标签：jquery, css, jquery-hover

首先我使用的是wordpress，但这只是我使用的平台。归结为命中状态的问题..

带有子导航的主菜单，当翻转一个菜单项时，有一个单独的 div 会在背景中淡出，而 rollout 会淡出

但是，如果您快速移动到命中状态和褪色，则存在一些错误，然后褪色不完整，如果通过子导航链接，它会使背景 div 褪色...

这是 js 用来

```
$("#main-navigation li, #menu-footer-nav li").hover(
  function () {
    $(".nav-overlay-bottom").stop(true).fadeIn('slow');
  }, 
  function () {
    $(".nav-overlay-bottom").stop(true).fadeOut('slow');
  }
); 
```

我还应该提到，在一个菜单上，它会淡入与其他菜单不同的 bg div...

```
$("#menu-item-1260").hover( function () {
    $(".nav-overlay").stop(true).fadeIn('slow');
        //$("#header").addClass("border-hover-top");
  }, 
  function () {
    $(".nav-overlay").stop(true).fadeOut('slow');
        //$("#header").removeClass("border-hover-top");

  }
); 
```

我的 js 不是很好，所以我确定有更好的方法来写这个吗？

# android - getRealPathFromURI() 不适用于基于 ICS 和 Picasa 的图像

> ID：11150108
> 
> 赞同：5
> 
> 时间：2012-06-22T04:19:41.620
> 
> 标签：android, android-gallery, picasa

我正在尝试获取图像的本地路径以便将其上传到服务器。使用 pre ICS 时，它将通过以下方式在 android 设备中获得标准路径`getRealPathFromURI(theURI)`

但是，ICS URI 将包含`uriString`类似 :的内容`content://com.google.android.gallery3d.provider/picasa/item/12312312312312`。

并运行`getRealPathFromURI(theURI)`返回`null`

我现在是否需要提取上述`uriString`内容并通过 API 手动下载图像（如果我检测到它是 Picasa 画廊图像）而不是本地存储的图像？还是我完全错过了什么？

感谢您的建议

**编辑：**

似乎我在寻找错误的问题......

在下面的链接中发现了问题......这几乎是我期望我需要做的。相当烦人的 google/android 并没有更优雅地处理这个问题。

要正确处理从图库中获取图像，您需要处理三种情况：

1.  用户选择了本地图像文件

2.  用户选择了 Picasa 图像，并且设备运行的是 3.0 之前的 Android 版本

3.  用户选择了 Picasa 图像并且设备运行的是 Android 3.0 及更高版本

[http://dimitar.me/how-to-get-picasa-images-using-the-image-picker-on-android-devices-running-any-os-version/](http://dimitar.me/how-to-get-picasa-images-using-the-image-picker-on-android-devices-running-any-os-version/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-19T10:13:20.047

这就是我在运行 Android 4.0+ 的设备上发现的。

您作为示例提供的 ICS URI 是带有 content:// 方案的 URI，因此应该有一个 ContentProvider 负责。因此，getRealPathFromURI() 使用的技巧有什么用？只需让 ContentResolver 为您完成这项工作：

```
InputStream inStream = getContentResolver().openInputStream(theUri);
Bitmap bitmap = BitmapFactory.decodeStream(is); 
```

# c++ - 使用 C++ 构造函数的不同方式

> ID：11150112
> 
> 赞同：5
> 
> 时间：2012-06-22T04:20:01.103
> 
> 标签：c++, constructor

A a1(5); 之间有什么区别？和 A a2 = A(5) ？这两个作品，但我真的很想知道它们之间的区别，因为我在我的一个项目中使用了方法 2，并且在我更改为方法 1 后我遇到了一个错误。提前致谢！

```
class A {
public:
    int val;
    A() : val(0) {}
    A(int newVal) : val(newVal) {}
};

int main()
{
    A a1(5);  // method 1
    A a2 = A(5); // method 2
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T04:24:32.143

```
A a1(5);  // method 1
A a2 = A(5); // method 2 
```

第一个称为直接初始化，第二个称为复制初始化。

如果您使复制构造函数不可访问或/并且未将其定义为，则第二个将不会编译：

```
class A {
public:
    int val;
    A() : val(0) {}
    A(int newVal) : val(newVal) {}
private:
    A(A const&);  //the second one will not compile
}; 
```

现在第二个将无法编译。请注意，它不会在这两种情况下编译：

*   如果复制构造函数已定义，但不可访问（它是`private`或`protected`）。
*   如果声明了复制构造函数，但未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:26:22.443

严格来说，阅读您的问题，我希望您提供这两个示例

```
A a1(5);  // method 1
A a2 = 5; // method 2 
```

第一个是直接初始化。第二个是复制初始化。

*您*在问题中提供的示例实际上*已经*说明了两者之间的区别:)

直接初始化直接初始化目标对象，作为一个单步过程，通过查找和使用适当的构造函数。复制初始化在概念上是一个两步过程：首先它`A`通过一些转换构造函数构造一个临时类型的对象，然后使用复制构造函数将其复制到目标对象。IE

```
A a2 = 5; 
```

实际上会起作用

```
A a2 = A(5); 
```

这实际上详尽地解释了差异。

第二个变体的两步结构同样是概念性的。编译器被允许（并将）优化第二个变体，使其与第一个变体完全相同。它们将消除中间临时对象并直接执行初始化。

# android - NullPointerException 与 HttpsURLConnection 和 SSL

> ID：11150113
> 
> 赞同：2
> 
> 时间：2012-06-22T04:20:06.513
> 
> 标签：android, ssl, httpsurlconnection

尝试通过 HTTPS 向服务器发送 POST 请求时收到 NullPointerException。这不是自签名证书（由 CheapSSLs 颁发）。

这是我收到的错误：

```
06-21 18:52:37.757: E/AndroidRuntime(17985): FATAL EXCEPTION: AsyncTask #1
06-21 18:52:37.757: E/AndroidRuntime(17985): java.lang.RuntimeException: An error occured while executing doInBackground()
06-21 18:52:37.757: E/AndroidRuntime(17985):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at java.lang.Thread.run(Thread.java:1019)
06-21 18:52:37.757: E/AndroidRuntime(17985): Caused by: java.lang.NullPointerException
06-21 18:52:37.757: E/AndroidRuntime(17985):    at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:433)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl$HttpsEngine.makeConnection(HttpsURLConnectionImpl.java:378)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:205)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:614)
06-21 18:52:37.757: E/AndroidRuntime(17985):    at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:268) 
```

我的代码如下：

```
URL url = new URL(mUrl);
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("192.168.1.134", 8888));
HttpsURLConnection urlConnection = (HttpsURLConnection) url.openConnection(proxy);

urlConnection.setRequestMethod("POST");
urlConnection.setDoInput(true);
urlConnection.setDoOutput(true);

MultipartBodyBuilder builder = new MultipartBodyBuilder();
builder.build(params);

urlConnection.setRequestProperty("Content-Type",  "multipart/form-data; boundary=" + builder.mBoundary);
urlConnection.setFixedLengthStreamingMode(builder.getContentLength());

DataOutputStream out = new DataOutputStream(new BufferedOutputStream(urlConnection.getOutputStream())); 
```

代码在 getOutputStream 上崩溃。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:06:50.973

在不包括`proxy`对象的情况下尝试它......`HttpsConnection`应该足以完成工作。

# php - php - 不知道如何描述

> ID：11150116
> 
> 赞同：0
> 
> 时间：2012-06-22T04:20:29.997
> 
> 标签：php

我在 php 包含文件中获得了图像。

```
<img class="imgmove" src='data:image/png;base64,<?php echo base64_encode(file_get_contents("images/form/firstname.png")); ?>'> 
```

代码完美无瑕。我正在测试设计并将图像拖到输入栏中，它会吐出以下内容：

数据：图像/png；base64，iVBORw0KGgoAAAANSUhEUgAAAEkAAAAaCAYAAAGMbkETAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77uUh6cmVTek5UY3prYzlkIj8+//z8DMYAJXYCRkRGGz4NonApBoKio6D8QfwCxi4uLwVay4LDJsa+v7wBQsQGIDRIACCBGYtzIguY2kA5GJCEQv5EBZBIyBlqzH+q+BpAbQWIY1oF8B5QUADJBWAEkBhBAGCYhY6h16CAA2TlQdQ0gmomA3w5gEduA5C9DKPsBUaEFiyyQf5GEG4FYH+bK3t5esCKAAGIkNnkQBPjCC8mS/0hhtx8tHIkKK3RQAE1FjGgRQLSL9kMxjB2A5KoEsDpCBiEHNIwNzRAGyA4hymtohiVAvXceb17FkcsYgQYogGho2rkAZYOyqAMIAwQQQa8RyAH/0WL0P1osw7AAVPw8klgDNrVEhTcBR8EiNAGLoxqg+D+S/F1Wn9VSYhdkYSa1TC5H4nX1SB5z9cMmep0xMtcpLoZLt4N4cbPWnkkI2nxTIY7dFjifgyPSqmUVan+IgMF/d9AmwL4dHJrGVb3gy5pS3KKHxkp+QLA3Fr2y8qJNz2p+JlsxgWQ6kaXnAULYRTabuDLGuBWqNocLfwIeaPHXpw7WoToTmdKTftK8/XAvqSXeNMkj5aVSUZpLHVjsljVt8ShBs9WCsQE0otD+yQCR7XW6ZPzQwo2aXfxykiO9nHXMUZVoqlSJSbEl4AqLSmWXNk+3KZM+LFEVSIQNVaYa0uc0TFv5Dy4WkeqRzRdOTLQjIBu7KMRH5A1gQsWa+2upwDVWIFtg0AMRFUHSDYgG8AEDRs0E5ANWiYITEA6QbIB2QA2yAhJN8gG1H7dV671fAsihFpCgfzreR/JMqxsUgqN+zBf7+H6n3vejImks2yBq1hCoC6RjgRRsAWQOYCoQeNbrwHl06TiAk0a1v/g/C5DQLKjxlWMpoiBPG/ovka0WFH6Gf2jsKMZyIdZWaq0LiN6sJ97rNNsBfp5Z+nC6XGjzGTmx97WHoI04tQ40v+lQpyVSMoCkDjvWKwiQ/J7qdkwr4HxFTqXkeOzoItdwdknjN0TDmX45am5iqpH26K01ACzr0Gg7Utg7LQ8IuGSOIHHJwMXWEo63CqASJM3ORvRswbAyIlalyRFik0G6cnRijX8dSRYojogVHHoHQFvc73Uq0tgG0ceAfKoa7RXAxp5XuiLJNMa4yp1dY3SO9gXCSHqDPCaZOAAAAABJRU5ErkJggg==

所有这些代码是什么？有人可以告诉我吗？谢谢 - 我应该保护我的 php 文件，使其不显示此代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T04:22:36.177

这是您拖入的图像的 base64 数据 uri。据我了解，您的 php 文件没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:24:36.917

您在图像上运行了 base64_encode。这就是 base64_encode 所做的，它将图像数据编码为 base64。您粘贴的是 base64 的样子。

# java - Executors.newScheduledThreadPool 中的拒绝处理程序

> ID：11150118
> 
> 赞同：0
> 
> 时间：2012-06-22T04:20:43.260
> 
> 标签：java, multithreading, scheduler

我有一个 ArrayBlocking 队列，单线程固定速率 Scheduled 在该队列上工作。我可能有失败的任务。我想以高优先级或最高级别重新运行或重新插入队列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:20:18.147

这里有一些想法 -
你为什么使用 ArrayBlockingQueue 而不是[PriorityBlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/PriorityBlockingQueue.html)？听起来像你需要我。首先将所有元素设置为同等优先级。
如果您收到异常 - 重新插入具有更高优先级的队列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:00:08.007

最简单的事情可能是优先级队列。将重试编号附加到任务。它从零开始。运行不成功后，丢弃所有的 1 并增加 0 并将它们以高优先级放回队列中。使用此方法，您可以轻松地决定将所有内容运行 3 次，或者更多，如果您想稍后再运行。不利的一面是您必须修改任务类。

另一个想法是建立另一个非阻塞、线程安全的高优先级队列。在寻找新任务时，您首先检查非阻塞队列并运行那里的内容。否则，进入阻塞队列。这可能对你有用，到目前为止它是最简单的解决方案。问题是当调度程序在阻塞队列上被阻塞时，高优先级队列可能会被填满。

要解决此问题，您必须自己进行阻止。两个队列都应该是非阻塞的。（建议： [java.util.concurrent.ConcurrentLinkedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)。）在没有结果的情况下轮询两个队列后，`wait()`在监视器上。当任何东西放入队列时，它应该调用`notifyAll()`并且调度程序可以再次启动。需要非常小心，以免在调度程序检查两个队列之后但在它调用之前发生通知`wait()`。

**添加：**

带有手动阻塞的第三个解决方案的原型代码。建议使用一些线程，但读者将最了解他/她自己的情况。哪些代码容易阻塞等待锁定，哪些代码容易在做大量工作时占用他们的线程（和核心）几分钟，哪些不能坐等其他代码完成所有需要经过考虑的。例如，如果一个失败的运行可以立即在同一个线程上重新运行而无需耗时的清理，那么大部分代码都可以被丢弃。

```
private final ConcurrentLinkedQueue  mainQueue = new ConcurrentLinkedQueue();
private final ConcurrentLinkedQueue  prioQueue = new ConcurrentLinkedQueue();
private final Object  entryWatch = new Object();

/** Adds a new job to the queue. */
public void addjob( Runnable runjob )  {
    synchronized (entryWatch)  { entryWatch.notifyAll(); }
}
/** The endless loop that does the work. */
public void schedule()  {
    for (;;)  {
        Runnable  run = getOne();  // Avoids lock if successful.
        if (run == null)  {
            // Both queues are empty.
            synchronized (entryWatch)  {
                // Need to check again.  Someone might have added and notifiedAll
                // since last check. From this point until, wait, we can be sure
                // entryWatch is not notified.
                run = getOne();
                if (run == null)  {
                    // Both queues are REALLY empty.
                    try  { entryWatch.wait(); }
                    catch (InterruptedException ie)  {}
                }
            }
        }
        runit( run );
    }
}
/** Helper method for the endless loop. */
private Runnable getOne()  {
    Runnable  run = (Runnable) prioQueue.poll();
    if (run != null)  return run;
    return (Runnable) mainQueue.poll();
}
/** Runs a new job. */
public void runit( final Runnable runjob )  {
    // Do everthing in another thread.  (Optional)
    new Thread()  {
        @Override public void run()  {
            // Run run.  (Possibly in own thread?)
            // (Perhaps best in thread from a thread pool.)
            runjob.run();
            // Handle failure (runit only, NOT in runitLast).
            //  Defining "failure" left as exercise for reader.
            if (failure)  {
                // Put code here to handle failure.
                // Put back in queue.
                prioQueue.add( runjob );
                synchronized (entryWatch)  { entryWatch.notifyAll(); }
            }
        }
    }.start();
}
/** Reruns a job. */
public void runitLast( final Runnable runjob )  {
     // Same code as "runit", but don't put "runjob" in "prioQueue" on failure.
} 
```

# java - Java - Object.hashCode() 不支持 HashMap 和 HashSet？

> ID：11150126
> 
> 赞同：1
> 
> 时间：2012-06-22T04:21:32.803
> 
> 标签：java, hashmap, hashset, lookup-tables

我正在尝试编写一个服务器，它使用一个唯一生成的 ID 来跟踪它的客户端`HashMap<ClientID,Client>`。这个想法是，如果我是管理员并且我想将某人从服务器上启动，我会查找适当的 ClientID（这实际上只是一个字符串；唯一的区别是 ClientID 类的工作是确保没有两个客户端是曾经为该客户端分配了相同的 ID），然后输入诸如“kick 12”之类的命令（如果我想踢的人的 ClientID 恰好是 12）。我认为这会起作用，因为我认为`HashMap`可能是由从 Object 继承的 hashCode() 方法的内部使用支持的，并且我以支持必要查找操作的方式设计了 ClientID 类，假设这是真的。但显然，这不是真的 - 具有相同哈希码的两个键显然不被认为是 a `HashMap`(or `HashSet`) 中的相同键。我创建了一个简单的示例`HashSet`来说明我想要做什么：

```
导入java.lang.*；
导入java.io.*；
导入 java.util.*；

类客户 ID {
    私有字符串 id；

    公共客户端 ID（字符串 myId）
    {
        身份证=我的身份证；
    }

    公共静态 ClientID generateNew(Set<ClientID> 存在)
    {
        ClientID res = new ClientID("");
        随机 rand = new Random();
        做 {
            int p = rand.nextInt(10);
            res.id += p;
        } 而 (existing.contains(res));
        返回资源；
    }

    公共 int hashCode()
    {
        返回（id.hashCode（））；
    }

    公共布尔等于（字符串 otherID）
    {
        返回（id == otherID）；
    }

    公共布尔等于（ClientID 其他）
    {
        返回（id == other.id）；
    }

    公共字符串 toString()
    {
        返回标识；
    }

    公共静态 void main(String[] args) 抛出 IOException {
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        HashSet<ClientID> mySet = new HashSet<ClientID>();
        ClientID myId = ClientID.generateNew(mySet);
        mySet.add(myId);
        字符串输入；
        做 {
            System.out.println("集合中的ID/哈希码列表：");
            for (ClientID x: mySet)
                System.out.println("\t" + x.toString() + "\t" + x.hashCode());
            System.out.print("\n输入一个ID来测试它是否在集合中：");
            输入 = in.readLine();
            如果（输入==空）
                休息;
            否则 if (input.length() == 0)
                继续;
            ClientID matchID = new ClientID(input);
            if (mySet.contains(matchID))
                System.out.println("成功！Set 已经包含该 ID :)");
            别的 {
                System.out.println("添加ID " + matchID.toString() + " (hashcode " + matchID.hashCode() + ") 到集合");
                mySet.add(matchID);
            }
            System.out.println("\n");
        } while (!input.toUpperCase().equals("QUIT"));
    }
}

```

使用此代码，（据我所知）不可能产生输出

```
成功！Set 已经包含该 ID :)
```

...相反，它只会继续向该集合添加值，即使这些值是重复的（也就是说，它们与 equals 方法相等并且它们具有相同的哈希码）。如果我没有很好地沟通，请自己运行代码，我想你会很快明白我的意思......这使得查找变得不可能（这也意味着 Client.generateNew 方法根本不像我想要的那样工作它到）；我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T04:27:01.430

在 Java 中，要使特定类充当散列中的键，它必须实现两种方法。

```
public int hashCode();
public boolean equals(Object o); 
```

这些方法必须连贯地操作：如果一个对象等于另一个对象，则这些对象必须产生相同的散列。

注意 的签名`equals(Object o)`。您的`equals`方法正在*重载* `equals`，但您必须*重写* `equals(Object o)`。

正如其他人所指出的那样，您的覆盖`equals`方法也被破坏了，因为您正在比较`String`身份，而不是价值。而不是通过比较`str1 == str2`，使用`str1.equals(str2)`。

对您的代码进行以下修改，事情应该开始正常工作。

```
public boolean equals(Object o){
    return o instanceof ClientID ? this.equals((ClientID) o);
}

public boolean equals(String otherID) {
    return id.equals(otherID);
}

public boolean equals(ClientID other) {
    return id.equals(other.id);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T04:31:56.483

`HashSet`（和`HashMap`）使用`Object.hashCode`方法来确定对象应该进入哪个哈希桶，而*不是*该对象是否等于该桶中的另一个对象。为此，他们使用`Object.equals`. 在您的情况下，您尝试使用字符串 ID 的引用相等来实现该方法——不是“实际”相等，而是字符串相等。您还创建了一个新的重载`equals`，而不是覆盖`Object.equals`。

您可以在 SO 上搜索很多关于为什么不能使用 String 进行比较的问题`==`，但是 tl;dr 版本是您需要覆盖`boolean equals(Object)`（*不是*同名的重载方法，而是该方法正是 - 它必须采取`Object`) 并检查传入的对象是一个 ClientID 其 String id `equals`(ont`==` s) 这个 ClientID 的 String id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-28T21:51:12.173

顺便说一句，所有阅读这篇文章的人：

你应该小心任何通过哈希码获取其子级的 Java 集合，因为它的子类型的哈希码取决于它的可变状态。一个例子：

```
HashSet<HashSet<?>> or HashSet<AbstaractSet<?>> or HashMap varient: 
```

HashSet通过它的hashCode检索它的item，但是它的item类型是一个HashSet，hashSet.hashCode取决于它的items state。

与此相关的代码：

```
HashSet<HashSet<String>> coll = new HashSet<HashSet<String>>();
HashSet<String> set1 = new HashSet<String>();
set1.add("1");
coll.add(set1);
print(set1.hashCode); //---> will output X
set1.add("2");
print(set1.hashCode); //---> will output Y
coll.remove(set1) // WILL FAIL TO REMOVE (SILENTLY) 
```

结束代码

-原因是 HashSet remove 方法使用 HashMap 并且它通过 hashCode 识别键，而 AbstarctSet 的 hashCode 是动态的并且取决于其自身的可变属性。

希望有帮助

# c++ - 创建一个类的多个实例会导致程序崩溃（C++）

> ID：11150128
> 
> 赞同：0
> 
> 时间：2012-06-22T04:21:43.960
> 
> 标签：c++, class, object, crash, sfml

这里是新手程序员，我正在使用带有 SFML 库、Code::Blocks 和 GNU GCC 编译器的 c++。视窗XP。

我正在制作一个简单的平台游戏，作为未来更大游戏的练习。我决定对其进行设置，以便它从文本文件中读取所有关卡数据。我刚刚在程序中添加了敌人（虽然现在它只是在屏幕上打印一个精灵）并且它第一次运行良好，但之后它在运行时崩溃。这是相关的代码位：

敌人.h：

```
class Enemy
{
    ...
}

typedef Enemy* EnemyPointer; 
```

主要.h：

```
class App
{
    private:
        sf::Image EnemyImage;

        EnemyPointer TheEnemies;

        int LevelData[256][4];

    public:
        App();

        int Execute();

        bool Init();

        void Cleanup();
} 
```

主要.cpp：

```
App::App()
{
    TheEnemies = new Enemy[16]
}

int main()
{
    App TheApp;
    return TheApp.Execute();
}

int App::Execute()
{
    if(!Init()) return -1;

    LoadLevel();

    while(Running)
    {
        OnEvent(TheEvent);

        Loop();

        Render();

        Frame++;
    }

    Cleanup();

    return 0;
} 
```

初始化.cpp：

```
bool App::Init()
{
    if(!EnemyImage.LoadFromFile("Enemy.bmp"))
    {
        std::cout<<"Failed to load \"Enemy.bmp\"";
        return false;
    }

    //Program crashes in this for loop.

    for(int c=0;c<=LevelData[0][1];c++)
    {
        TheEnemies[c].SetX(LevelData[LevelData[0][0]+1+c][0]);
        TheEnemies[c].SetY(LevelData[LevelData[0][0]+1+c][1]);
        TheEnemies[c].SetType(LevelData[LevelData[0][0]+1+c][2]);

        TheEnemies[c].Sprite.SetImage(EnemyImage);
    }
} 
```

清理.cpp：

```
void App::Cleanup()
{
    delete[] TheEnemies;
} 
```

LevelData[][] 是一个二维数组，包含从 .txt 文件中读取的信息。它包含敌人的数量、它们的坐标和它们的类型。

我已经确定程序在 Init() 尝试使用在构造函数中创建的 Enemies 数组时崩溃了。我用评论标记了它。我查看了有关如何创建对象数组的论坛帖子，其中大多数人说这是如何做到的。我无法弄清楚它为什么会崩溃。如果有人知道如何解决这个问题，将不胜感激。谢谢。

# database-design - 允许用户申请帐户

> ID：11150129
> 
> 赞同：1
> 
> 时间：2012-06-22T04:21:50.930
> 
> 标签：database-design

这比编码更像是一个一般性的战略问题 - 如果在这里不合适，请告诉我。我敢肯定，一旦我有了工作策略，我就会遇到编码问题。

我正在创建一个允许供应商和商家创建帐户的 php/mysql 站点。因为供应商和商家帐户将相互关联，所以我需要允许供应商为商家创建临时帐户，反之亦然，以便可以将库存分配给商家。

如果供应商为商家创建帐户，允许商家在以后申领商家帐户的最佳策略是什么？

约束：

我不一定希望在供应商创建帐户时通知商家（这可能会让供应商有机会向商家发送垃圾邮件）

我希望索赔过程尽可能自动化

我考虑过使用电子邮件地址做一些事情，但这会假设给出的初始电子邮件地址是准确的。

我将如何防止劫持无人认领的页面？

我曾考虑简单地为供应商生成的商家使用单独的表，然后将其链接到商家生成的帐户，但这对我来说似乎效率低下 - 特别是当您考虑到许多供应商将为同一个商家创建记录时。

任何来自您的经验的意见将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:47:25.060

我假设一个供应商可以有零个或多个商家，一个商家可以属于零个或多个供应商。

在这种情况下，您可以将其处理为：

a) 供应商和商家的目录，账户相互独立

b) 供应商不是为商家创建帐户，而是邀请商家创建帐户

c) 允许供应商与商家连接，反之亦然，但连接必须经过批准（以防止垃圾邮件）

d) 只有在供应商和商家之间建立联系时，才能进行库存的分配和跟踪 - 库存跟踪始终与供应商和商家之间的关系绑定

希望这可以帮助

# html - 设置画布的“内部”尺寸？

> ID：11150133
> 
> 赞同：3
> 
> 时间：2012-06-22T04:22:11.493
> 
> 标签：html, canvas

我可以通过设置`width`和`height`属性来设置画布的宽度和高度，如下所示：

```
<canvas id="canvas" width="510" height="510"></canvas> 
```

但我不想硬编码我所有的绘图代码来依赖这些值。我想将“内部”宽度/高度设置为 100x100，然后在这些坐标中绘制所有内容，并让画布将其缩放（就像我在 OpenGL 中所做的那样）。这样，如果我调整我的画布大小，它仍然可以很好地渲染。

我发现如果我在画布上设置 CSS 宽度和高度，我可以使它更大，但保持相同的单位，但我发现它实际上拉伸了结果并且它模糊并且看起来很糟糕（我认为它仍然像矢量，漂亮而清晰）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T04:47:15.963

您可以在“本地”坐标中绘制所有内容，然后作为绘制时做的第一件事，按实际画布的相对大小缩放上下文。

例如

HTML

```
<canvas id="c" width="510" height="510"></canvas> 
```

JS

```
var canvas = document.getElementById('c');
var ctx = canvas.getContext('2d');

ctx.scale(5.1,5.1);
// Everything drawn here is in a 100x100 world, 
// but gets scaled to be in the 510x510 canvas
ctx.fillStyle = '#000';
ctx.fillRect(0,0,100,100);
ctx.strokeStyle= '#F00';
ctx.lineWidth = 1;
ctx.strokeRect(5,5,90,90);​​​​​ 
```

[运行示例](http://jsfiddle.net/VQmdM/1/)

# vb.net - 如何通过 vb.net 编码以编程方式按 Tab 并输入键

> ID：11150140
> 
> 赞同：0
> 
> 时间：2012-06-22T04:22:55.800
> 
> 标签：vb.net

我正在使用一个 Web 浏览器控件来打开一个网站。在网站的第三页，有一个按钮。因此，在加载第 3 页后，我想首先以编程方式按 TAB 键以将控制焦点放在按钮上，然后在加载后立即以编程方式在网站的第三页上按 ENTER 键。我正在使用 vb.net 2008 平台来执行此操作。请任何人告诉我解决方案???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:57:24.943

首先，您需要找到要将密钥发送到的窗口句柄，然后发送您想要的实际密钥。以下是执行此操作所需的方法：

```
 'API calls
  Public Declare Function FindWindowExA Lib "user32.dll" (ByVal hWnd1 As IntPtr, ByVal hWnd2 As Int32, ByVal lpsz1 As String, ByVal lpsz2 As String) As IntPtr
  Public Declare Function SendMessageA Lib "user32.dll" (ByVal hwnd As IntPtr, ByVal wMsg As Integer, ByVal wParam As Integer, ByVal lParam As Integer) As Integer

  'Function to find window by either ClassName or WindowText
  Public Shared Function FindWindowEx(ByVal hWndParent As IntPtr, ByVal hWndChildAfter As Int32, ByVal ClassName As String, ByVal WindowName As String) As IntPtr
     Return FindWindowExA(hWndParent, hWndChildAfter, ClassName, WindowName)
  End Function

  'Function to send pressed keys to specified window by handle
  Public Shared Function SendKeyToWindow(ByVal hwnd As IntPtr, ByVal data As String) As Boolean

     Try
        Dim rc As Int32
        Dim asciiChar As Byte

        If data.Length < 1 Then          'if no data
           Return True
        End If

        'If data.Length > 1 Then
        '    data = data.ToUpper
        'End If

        'sendMessageA is used to issue messages to windows simulating keypresses
        Select Case data.ToUpper
           Case Chr(13)
              rc = SendMessageA(hwnd, WM_KEYDOWN, &HD, &H1C0001)                  'send Enter Key
              rc = SendMessageA(hwnd, WM_CHAR, &HD, &H1C0001)                 'send Enter Key
              rc = SendMessageA(hwnd, WM_KEYUP, &HBE, &HC0340001)                   'send Ener Key
           Case Chr(&H9)               'tab key
              rc = SendMessageA(hwnd, WM_KEYDOWN, &H9, &HF0001)                  'send tab Key
              rc = SendMessageA(hwnd, WM_KEYUP, &H9, &HC00F0001)                 'send tab Key
           Case Else
              asciiChar = CByte(Asc(data.Substring(0, 1)))
              rc = SendMessageA(hwnd, WM_CHAR, asciiChar, 0)                  'send 0 Key
        End Select

        Return True
     Catch ex As Exception
        Return False
     End Try

     Return False

  End Function 
```

在您的实例中，您可能只需要使用 webbrowser 控件的句柄调用 sendKeyToWindow 函数：

SendKeyToWindow(WebBrowser1.Handle, Chr(&H9)) SendKeyToWindow(WebBrowser1.Handle, Chr(13))

希望有帮助。

# django - 过滤django中的反向外键集

> ID：11150144
> 
> 赞同：0
> 
> 时间：2012-06-22T04:23:11.543
> 
> 标签：django

```
class item(models.Model):
    name = models.CharField()

class itemTxns(models.Model):
    item = models.ForeignKey(item)
    txnDate = models.DateField()
    txn = models.CharField() 
```

给定一个“项目”对象，我如何找到与该项目关联的最新 itemTxn？

我知道我可以访问 item.itemTxns_set，但是是否可以在不显式调用 itemTxns 类的另一个 get 的情况下进行查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:38:08.203

```
item.itemtxns_set.latest('txnDate') 
```

我不确定你会怎么称呼它。

您可以将其设为项目类的属性。

```
class item(models.Model):
    #....
    @property
    def latest_itemtxns(self):
        return self.itemtxns_set.latest('txndate') 
```

顺便说一句，我建议您将类大写以区分实例、变量和类。

# java - 使用正则表达式验证输入字符串“RX-EZ12345678912345B”

> ID：11150146
> 
> 赞同：1
> 
> 时间：2012-06-22T04:23:22.727
> 
> 标签：java, regex, regex-greedy

我需要验证应该采用以下格式的输入字符串：

```
<2_upper_case_letters><"-"><2_upper_case_letters><14-digit number><1_uppercase_letter> 
```

> 例如：RX-EZ12345678912345B

我尝试了这样的事情，`^[IN]-?[A-Z]{0,2}?\\d{0,14}[A-Z]{0,1}`但它没有给出预期的结果。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:38:21.273

不确定您在当前正则表达式的开头要做什么。

```
"^[A-Z]{2}-[A-Z]{2}\\d{14}[A-Z]$" 
```

上面的正则表达式将严格匹配您指定的输入字符串。如果使用`matches`函数，`^`则`$`可以省略。

由于您需要准确的重复次数，因此应将其指定为`{<number>}`only。`{<number>,<number>}`用于可变重复次数。并`?`指定之前的标记可能出现也可能**不**出现 - 如果它必须在那里，那么指定`?`是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:38:57.717

只需将您的要求转换为 java 正则表达式：

```
"^[A-Z]{2}-[A-Z]{2}\\d{14}[A-Z]$" 
```

这将允许您使用：

```
if (!input.matches("^[A-Z]{2}-[A-Z]{2}\\d{14}[A-Z]$")) {
    // do something because input is invalid
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T05:45:33.907

`^[A-Z]{2}-[A-Z]{2}\\d{14}[A-Z]$`

这应该可以解决您的目的。您可以从[这里确认](http://regexpal.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T07:14:44.153

你最大的问题是`[IN]`开头的，它只匹配一个字母，而且只有它是`I`or `N`。如果要匹配*任意*字母中的两个，请使用`[A-Z]{2}`.

一旦你解决了这个问题，你的正则表达式仍然只会匹配`RX-E`. 那是因为`[A-Z]{0,2}?`开始尝试不消耗任何东西，这要归功于不情愿的量词，`{0,2}?`. 然后`\d{0,14}`匹配零位，并`[A-Z]{0,1}`贪婪地消耗`E`.

如果要精确匹配 2 个字母和 14 个数字，请使用`[A-Z]{2}`and `\d{14}`。并且由于您正在验证字符串，因此您应该以结束锚点结束正则表达式，`$`. 结果：

```
^[A-Z]{2}-[A-Z]{2}\d{14}[A-Z]$ 
```

...或者，作为 Java 字符串文字：

```
"^[A-Z]{2}-[A-Z]{2}\\d{14}[A-Z]$" 
```

正如@nhahtdh 所观察到的，如果您使用Java 的方法来应用正则表达式，则实际上不必使用锚点`matches()`，但我还是建议您这样做。它可以更好地传达您的意图，并使正则表达式可移植，以防您必须在不同的风格/上下文中使用它。

**编辑：**如果前两个字符应该是完全`IN`的，那就是

```
^IN-[A-Z]{2}\d{14}[A-Z]$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T04:38:49.693

这应该可以解决您的问题。[在这里](http://www.gskinner.com/RegExr/)查看有效性

```
^[A-Z]{2}-[A-Z]{2}[0-9]{14}[A-Z]$ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T05:01:46.997

```
^([A-Z]{2,2}[-]{1,1}[A-Z]{2,2}[0-9]{14,14}[A-Z]{1,1}){1,1}$ 
```

# ruby - 如何检查 EventMachine::Connection 是否打开？

> ID：11150147
> 
> 赞同：0
> 
> 时间：2012-06-22T04:23:32.760
> 
> 标签：ruby, eventmachine

我在事件机器中有一个 Connection 对象的句柄：http: [//eventmachine.rubyforge.org/EventMachine/Connection.html](http://eventmachine.rubyforge.org/EventMachine/Connection.html)

如何在任何时候检查连接是打开还是关闭？我没有看到 API 中指定的任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:04:31.020

你必须自己实现它，这很容易。

```
class SampleConnection < EM::Connection
  attr_accessor :connected
  def connection_completed
    connected = true
  end

  def connected?
    !!connected
  end

  def unbind
    connected = false
  end
end 
```

# python - 为什么我不能为 csv.Reader 重复“for”循环？

> ID：11150155
> 
> 赞同：16
> 
> 时间：2012-06-22T04:24:23.133
> 
> 标签：python, csv

我是 Python 的初学者。我现在正在尝试弄清楚为什么第二个“for”循环在以下脚本中不起作用。我的意思是我只能得到第一个“for”循环的结果，而第二个循环却什么也得不到。我在下面复制并粘贴了我的脚本和数据 csv。

如果您告诉我为什么会这样以及如何使第二个“for”循环也能正常工作，那将会很有帮助。

我的脚本：

```
import csv

file = "data.csv"

fh = open(file, 'rb')
read = csv.DictReader(fh)

for e in read:
    print(e['a'])

for e in read:
    print(e['b']) 
```

“数据.csv”：

```
a,b,c
tree,bough,trunk
animal,leg,trunk
fish,fin,body 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-22T04:27:51.253

csv 阅读器是文件的迭代器。一旦你读过一次，你就读到了文件的末尾，所以没有更多的东西要读了。如果您需要再次浏览它，您可以寻找到文件的开头：

```
fh.seek(0) 
```

这会将文件重置为开头，以便您再次阅读。根据代码，可能还需要跳过字段名称标题：

```
next(fh) 
```

这对您的代码来说是必要的，因为`DictReader`第一次使用该行来确定字段名称，并且不会再这样做了。可能不需要`csv`.

如果文件不是太大并且您需要对数据做几件事，您也可以将整个内容读入列表：

```
data = list(read) 
```

然后你可以做你想做的事`data`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T05:04:03.943

我创建了一小块函数，它确实读取 csv 文件的路径并立即返回 dict 列表，然后你很容易循环遍历列表，

```
def read_csv_data(path):
    """
        Reads CSV from given path and Return list of dict with Mapping
    """
    data = csv.reader(open(path))
    # Read the column names from the first line of the file
    fields = data.next()
    data_lines = []
    for row in data:
        items = dict(zip(fields, row))
        data_lines.append(items)
    return data_lines 
```

问候

# bloomberg - 如何使用bloomberg API 获取html 站点中的FX 数据？

> ID：11150158
> 
> 赞同：6
> 
> 时间：2012-06-22T04:24:45.127
> 
> 标签：bloomberg

我是Bloomberg API 的新手，所以如果这很愚蠢，请原谅我，但我正在Mac 上创建一个html 网站，我想简单地用来自Bloomberg 的一些数据填充一个div，例如EURUSD 的当前值。

如何才能做到这一点？这是Bloomberg API的用途吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T23:36:41.793

This is something that would typically be forbidden by the license - data obtained from the Bloomberg API can generally not be redistributed.

Plus (you might know that) the Bloomberg API is publicly available but to be able to receive actual data through the API, you need to subscribe to Bloomberg, which is a payable service.

There are probably better (and less expensive) ways to get EUR.USD rates.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:44:44.993

如果您没有 Bloomberg 帐户，您可以使用[Bloomberg API Emulator](http://bemu.codeplex.com/)了解这是如何完成的。它的工作原理和外观就像 Bloomberg API，但它不需要帐户即可使用。它不会返回真实数据，但您可以使用它来学习如何从 Bloomberg API 请求数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:32:55.430

API 是为此而设计的，但许可通常不是。您可以使用服务器模式并尝试与 Bloomber 服务器（付费组件）通信并请求许可以重新分发数据。您的问题不是技术问题而是法律问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:48:51.497

阅读http://www.openbloomberg.com/上的[开发人员指南](http://www.openbloomberg.com/files/2012/03/blpapi-developers-guide.pdf)10 分钟后，您似乎可以使用它来获取当前的外汇汇率[。](http://www.openbloomberg.com/)开发人员指南提供了 Java、.NET、C++ 和 C 语言的编码示例。

# objective-c - 在 Ipad 中带有完成按钮的 UIPickerView

> ID：11150161
> 
> 赞同：3
> 
> 时间：2012-06-22T04:25:30.700
> 
> 标签：objective-c, iphone, ipad, uipickerview, actionsheetpicker

我遇到了一个问题， 即在 Ipad 中**使用“完成”按钮显示 UIPickerView 。**我通过许多链接和博客进行了详细的研究，并得到了“从**UIActionSheet**显示 UIPickerView ”的建议

我看到很多与此相关的帖子，但是没有好的答案。所以请不要将其作为重复项关闭。

我还能够获得一些好的代码来做到这一点，并且它在我的 Iphone 设备上运行良好。但是，我发现 Ipad 设备有困难。操作表未显示为完整视图。请看下面的截图。这就是结果！！！

![在 Ipad 中带有 Don 按钮的 UIPickerView](../Images/ae97db5f8489f5a64ee9c997b45b455d.png)

用于执行此操作的代码粘贴在下面。

```
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                    delegate:nil
                                                    cancelButtonTitle:nil
                                                    destructiveButtonTitle:nil
                                                    otherButtonTitles:nil];

[actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];
pickerView.showsSelectionIndicator = YES;
pickerView.dataSource = self;
pickerView.delegate = self;

[actionSheet addSubview:pickerView];
[pickerView release];

UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Close"]];
closeButton.momentary = YES;
closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
closeButton.tintColor = [UIColor blackColor];
[closeButton addTarget:self action:@selector(dismissActionSheet:) forControlEvents:UIControlEventValueChanged];
[actionSheet addSubview:closeButton];
[closeButton release];

[actionSheet showInView:[[UIApplication sharedApplication] keyWindow]];

[actionSheet setBounds:CGRectMake(0, 0, 320, 485)]; 
```

然后我通过[示例选择器从 github 下载了一个出色的示例应用程序](https://github.com/TimCinel/ActionSheetPicker)

下载后，我已将仅对我来说必须的课程复制到我的应用程序中。

他们用来通过 Action-Sheet 显示 UIPickerView+Done 按钮的方法如下所述

```
ActionStringDoneBlock done = ^(ActionSheetStringPicker *picker, NSInteger selectedIndex, id selectedValue) {

        if ([myLabel respondsToSelector:@selector(setText:)]) {
            [myLabel performSelector:@selector(setText:) withObject:selectedValue];
        }
    };

    ActionStringCancelBlock cancel = ^(ActionSheetStringPicker *picker) {

        NSLog(@"Block Picker Canceled");
    };

    NSArray *colors = [NSArray arrayWithObjects:@"Red", @"Green", @"Blue", @"Orange", nil];//picker items to select

    [ActionSheetStringPicker showPickerWithTitle:@"Select a Block" rows:colors initialSelection:0 doneBlock:done cancelBlock:cancel origin:myButton]; 
```

在最后一行代码中，他们使用参数作为**原点：**我们可以将任何对象（按钮、标签等）传递给它。

Action-sheet 将 origin 作为传递的对象。

我的问题又来了:)。我已经根据我的条件使用***分段控制来选择时间。***

如果我将 mySegment 作为原点参数，则操作表原点箭头将从我的段控件中间显示。而不是从选定的选项卡中显示，这太糟糕了，会给我有价值的用户带来困惑。

所以我在段部分下添加了单独的标签，并为上述方法的原始参数提供了它，我解决了我的问题。

但是我知道这不是一个好的解决方法:)

我可以知道有什么简单的方法吗？

**Apple 是否支持 Ipad 中的 ActionSheet+UIPickerView+DoneButton**？

对此问题的任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:10:01.743

![在此处输入图像描述](../Images/e5e0493abc6ca939cb21ed205691eda9.png)

```
-(void)viewDidload
{
    UIButton *button1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button1.frame = CGRectMake(165,165, 135,35);
    [button1 setTitle:@"Type    @" forState:UIControlStateNormal];
    [button1 addTarget:self action:@selector(button1) forControlEvents:UIControlEventTouchUpInside];
    [s addSubview:button1];
}

-(void)button1
{
    items1 =[[NSMutableArray alloc]initWithObjects:@"H",@"E",@"T",@"K",nil];
    myPickerView1 =[[UIPickerView alloc] initWithFrame:CGRectMake(60,80,200,300)];
    myPickerView1.transform = CGAffineTransformMakeScale(0.75f, 0.75f);
    myPickerView1.delegate = self;
    myPickerView1.dataSource = self;
    myPickerView1.showsSelectionIndicator = YES;
    myPickerView1.backgroundColor = [UIColor clearColor];
    myPickerView1.tag=1;
    [myPickerView1 selectRow:1 inComponent:0 animated:YES];
    [self.view addSubview:myPickerView1];
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
{
    switch (pickerView.tag)
    {
    case 1:
        return [items1 count];
            break;
    case 2:
        return [items2 count];
        break;
    }
    return 0;
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    switch (pickerView.tag)
    {
    case 1:
        return[items1 objectAtIndex:row];
        break;
    case 2:
        return[items2 objectAtIndex:row];
        break;
    }
        return 0;
}

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    switch (pickerView.tag)
    {
    case 1:
        {
            [button1 setTitle:[items1 objectAtIndex:row] forState:UIControlStateNormal];
        }
        break;
    case 2:
        {
            [button2 setTitle:[items2 objectAtIndex:row] forState:UIControlStateNormal];
        }break;
    }
    pickerView.hidden = YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T04:37:00.727

![在此处输入图像描述](../Images/d6c65902c648ed9e9b0ec066c7524234.png)

使用 UIPopoverController 作为选择器中的完成按钮，创建一个视图控制器类，在其中获取选择器并添加导航取消和完成按钮。

```
 UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:nextViewController];
    _datePickerPopover = [[UIPopoverController alloc] initWithContentViewController:navigationController];
    nextViewController.datePickerPopover = _datePickerPopover;
    _datePickerPopover.delegate=self;
    [_datePickerPopover setPopoverContentSize:CGSizeMake(320, 453) animated:NO];
    if (isSearchOpen) {
        [_datePickerPopover presentPopoverFromRect:CGRectMake(btn.frame.origin.x+10+245, btn.frame.origin.y+100-scrollPointY, 44, 44) inView:self.splitViewController.view permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES];  
    }
    else
    {
        [_datePickerPopover presentPopoverFromRect:CGRectMake(btn.frame.origin.x+10+245, btn.frame.origin.y+55, 44, 44) inView:self.splitViewController.view permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES];//
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T07:44:50.673

你必须使用`UIPopOverController`.

**首先，为iPhone**创建一个 UIPickerViewController 。笔尖需要它，它将被推入 popOver。初始化选择器`ViewWithPicker`

。H

```
#import <UIKit/UIKit.h>

@class ViewWithPickerController;

@protocol PopoverPickerDelegate

@required

- (void) viewWithPickerController:(ViewWithPickerController*) viewWithPickerController didSelectValue:(NSString*) value;

@end

@interface ViewWithPickerController : UIViewController <UIPickerViewDelegate, UIPickerViewDataSource> {
    IBOutlet UIPickerView *pickerView;
    id<PopoverPickerDelegate> delegate;
    NSMutableArray *array;  
}
@property(nonatomic, retain) IBOutlet UIPickerView *pickerView;
@property(nonatomic, assign) id<PopoverPickerDelegate> delegate;
@end 
```

.m，在你初始化`array`in后`viewDidLoad`，选择器方法：

```
// returns the number of 'columns' to display.
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)picker {
    return 1;
}

// returns the number of rows in each component.

- (NSInteger)pickerView:(UIPickerView *)picker numberOfRowsInComponent:(NSInteger)component {
    return [array count];
}

//returns the string value for the current row
- (NSString *)pickerView:(UIPickerView *)picker titleForRow:(NSInteger)row forComponent:(NSInteger)component {
   return [array objectAtIndex:row];
}

//handle selection of a row
- (void)pickerView:(UIPickerView *)picker didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    NSString *value = [pickerView.delegate pickerView:picker titleForRow:row forComponent:component];

    //notify the delegate about selecting a value
    if(delegate != nil)
        [delegate viewWithPickerController:self didSelectValue:value];
} 
```

然后，将 viewWithPicker 导入您的主类，创建一个按钮并执行以下操作：

```
- (IBAction) showPickerPopupAction:(id) sender {
    self.viewWithPickerController = [[[ViewWithPickerController alloc] initWithNibName:@"ViewWithPicker" bundle:[NSBundle mainBundle]] autorelease];

    viewWithPickerController.contentSizeForViewInPopover = 
    CGSizeMake(viewWithPickerController.view.frame.size.width, viewWithPickerController.view.frame.size.height);

    viewWithPickerController.delegate = self;

    self.popoverController = [[[UIPopoverController alloc]
                               initWithContentViewController:viewWithPickerController] autorelease];

    [self.popoverController presentPopoverFromRect:popoverButtonForPicker.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    popoverController.delegate = self;

} 
```

并选择一个特定的值

```
- (void) viewWithPickerController:(ViewWithPickerController*) viewWithPickerController didSelectValue:(NSString*) value
{   
    yourLabel.text = [NSString stringWithFormat:@"%@ ",value];

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T04:41:31.967

在 iPad 中尝试下面的 UIPicker View 代码

```
-(IBAction)tDriveBtnPressed:(id)sender
{
NSDateFormatter *df = [[NSDateFormatter alloc] init];
df.dateStyle = NSDateFormatterMediumStyle;
txtDate.text = [NSString stringWithFormat:@"%@",
                [df stringFromDate:[NSDate date]]];
[df release];

UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 300, 44)];
pickerToolbar.barStyle = UIBarStyleBlackOpaque;
[pickerToolbar sizeToFit];
NSMutableArray *barItems = [[NSMutableArray alloc] init];
UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDone:)];
[barItems addObject:doneBtn];
[doneBtn release];
[pickerToolbar setItems:barItems animated:YES];
[barItems release];

datePicker = [[UIDatePicker alloc] init];
datePicker.datePickerMode = UIDatePickerModeDate;

CGRect pickerRect = datePicker.bounds;
datePicker.bounds = pickerRect;

UIViewController* popoverContent = [[UIViewController alloc] init];
UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 344)];
popoverView.backgroundColor = [UIColor whiteColor];

datePicker.frame = CGRectMake(0, 44, 320, 300);
[datePicker addTarget:self action:@selector(dateChange:) forControlEvents:UIControlEventValueChanged];
[popoverView addSubview:pickerToolbar];
[popoverView addSubview:datePicker];
popoverContent.view = popoverView;

//resize the popover view shown
//in the current view to the view's size
popoverContent.contentSizeForViewInPopover = CGSizeMake(320, 244);

//create a popover controller
popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
CGRect popoverRect = [self.view convertRect:[tDriveBtn frame] 
                                   fromView:[tDriveBtn superview]];

popoverRect.size.width = MIN(popoverRect.size.width, 100) ; 
popoverRect.origin.x  = popoverRect.origin.x; 
// popoverRect.size.height  = ; 

[popoverController 
 presentPopoverFromRect:popoverRect
 inView:self.view 
 permittedArrowDirections:UIPopoverArrowDirectionAny
 animated:YES];

//release the popover content
[popoverView release];
[popoverContent release];

}
-(void)dateChange:(id)sender
{
NSDateFormatter *df = [[NSDateFormatter alloc] init];
df.dateStyle = NSDateFormatterMediumStyle;
txtDate.text= [NSString stringWithFormat:@"%@",
               [df stringFromDate:datePicker.date]];
[df release];
}
- (void)pickerDone:(id)sender
{
NSDateFormatter *df = [[NSDateFormatter alloc] init];
df.dateStyle = NSDateFormatterMediumStyle;
txtDate.text= [NSString stringWithFormat:@"%@",
               [df stringFromDate:datePicker.date]];
[df release];

if (popoverController != nil) {
    [popoverController dismissPopoverAnimated:YES];
    self.popoverController=nil;
}  
} 
```

# javascript - javascript变量范围：从嵌套函数返回变量？

> ID：11150166
> 
> 赞同：2
> 
> 时间：2012-06-22T04:25:49.827
> 
> 标签：javascript, nested, scope, settimeout, anonymous-function

我看了这个：[从Javascript中的嵌套函数返回值](https://stackoverflow.com/questions/3373934/returning-values-from-nested-functions-in-javascript)

但这并没有真正帮助我（或者我太笨了，无法理解）。

我的变量范围以某种方式关闭，我不明白为什么。我的 alert() 没有按预期运行。试图在所有行上添加评论以解释我的想法。

非常感谢您的任何评论/指针/答案！

```
var g = {}; / is a large object with all kinds of other stuff and functions in it

g.ding = function(){ // my problem function
 var baby = 'young'; // i thought I set a local var here
    if(someVar==true) { // standard issue if statement
        someAPI.class( // using an API that uses a function as its attribute
            function(stuff){ // my anonymous function
                baby = 'old'; // setting the var to something
            }
        );
    }
    return baby; // returning the var
}

alert( g.ding() ); // i expect it to say "old" but it keeps saying "young". why? 
```

**新编辑：** Juan 接受的答案很棒，但是否还有一种方法可以使用*setTimeout()*来处理异步函数调用并基本上使它们同步？如果任何读过这篇文章的人都知道我很想知道的答案。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T04:33:36.407

调用`someAPI.class(function(){})`可能是异步的，这意味着您传递给它的函数在返回时可能没有被调用`someAPI.class()`并且变量没有被更改。

解决方案是在回调中将变量传回

```
g.ding = function(callback){ 
    var baby = 'young';
    if(someVar) {
        someAPI.class(
            // There's no guarantee of when this function is called
            function(stuff){
                baby = 'old';
                // Call the callback, it's like a return, for async functions
                callback(baby);
            }
        );
    }
    // the inner function probably wasn't called yet, 
    // doesn't make sense to return this here
    // return baby;
}

// Then you'd call it like this, as soon as you use an async function
// all the functions that call it have to use callbacks for return values
g.ding(function(value){
    alert(value);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:10:17.327

在这里我可以认为你的

```
 someAPI.class(); 
```

必须是与事件相关的函数（如单击、鼠标悬停等）。所以它里面的函数只有在相关事件发生时才会执行，从而改变变量的值。但我认为事件不会发生，因此变量不会改变。

# ruby-on-rails - 尝试使用 Google Calendar API 时出现“缺少授权代码”错误

> ID：11150167
> 
> 赞同：3
> 
> 时间：2012-06-22T04:26:05.697
> 
> 标签：ruby-on-rails, google-api, oauth-2.0, google-api-client

以下是我用来允许用户允许用户授权我的应用通过 OAuth 访问他们的 Google 日历的代码。我基于[此示例代码](http://code.google.com/p/google-api-ruby-client/source/browse/buzz/buzz.rb?repo=samples)。

它在大多数情况下都可以工作，但有时，控制器中的操作会出现`ArgumentError: Missing authorization code`错误。如果我注释掉该行，则所有属性都是.`client.authorization.fetch_access_token!``create_google_calendar``services``client.authorization``null`

我正在使用 Rails 3.2.0 和 Ruby 1.9.2。

这是什么原因造成的？

宝石文件

```
gem 'google-api-client', :require => 'google/api_client' 
```

服务.rb

```
def self.google_calendar_client google_calendar_service=nil
    client = Google::APIClient.new
    client.authorization.client_id = xxx
    client.authorization.client_secret = xxx
    client.authorization.scope = 'https://www.googleapis.com/auth/calendar'
    url_prefix = Rails.env.production? ? xxx : 'http://localhost:3000'
    client.authorization.redirect_uri = "#{url_prefix}/create_google_calendar"
    if google_calendar_service.present?
        client.authorization.update_token! :access_token => google_calendar_service.token, :refresh_token => google_calendar_service.google_calendar_refresh_token, :expires_in => google_calendar_service.google_calendar_expires_in, :issued_at => Time.at(google_calendar_service.google_calendar_issued_at)
        client.authorization.fetch_access_token! if client.authorization.expired?
    end

    client
end 
```

services_controller.rb

```
def connect_google_calendar
    @google_calendar_url = Service.google_calendar_client.authorization.authorization_uri.to_s
end

def create_google_calendar
    client = Service.google_calendar_client
    client.authorization.code = params[:code]
    client.authorization.fetch_access_token!
    current_user.services.create :provider => 'google_calendar', :token => client.authorization.access_token, :google_calendar_refresh_token => client.authorization.refresh_token, :google_calendar_expires_in => client.authorization.expires_in, :google_calendar_issued_at => client.authorization.issued_at
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:06:50.333

事实是，我不知道。你的代码对我来说很合适。但我至少可以告诉你错误的含义。缺少授权码意味着它认为您在获取访问令牌时正在尝试执行“授权码”授权类型。如果您实际上是在尝试从刷新令牌中获取访问令牌，而不是在从用户获得授权后的第一次通过时进行，那么您可能没有正确设置授权对象。

您可以通过检查`client.authorization.grant_type`值来检查这一点。在客户端的最新版本中，您可以手动设置该`grant_type`值以强制使用特定模式，这可能会为您提供更多信息性错误消息，具体取决于实际问题。

# jquery - 在使用 jQueryFileTree.js 创建文件树时需要帮助

> ID：11150171
> 
> 赞同：0
> 
> 时间：2012-06-22T04:26:12.450
> 
> 标签：jquery

我正在尝试使用 jquery 构建文件树结构。我遇到了这个链接

[http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/)

所以我尝试使用它。下面是我的文件的 html 源代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

<script src="js/jquery-1.7.2.js" type="text/javascript"></script>
<script src="js/jquery.easing.js" type="text/javascript"></script>
<script src="js/jqueryFileTree.js" type="text/javascript"></script>
<link href="css/jqueryFileTree.css" rel="stylesheet" type="text/css"
    media="screen" />

<script type="text/javascript">
$(document).ready( function() {
    $('#container_id').fileTree({ root: '/some/folder/' }, function(file) {
        alert(file);
    });
});
</script>
</head>
<body>
    <div id="container_id"></div>
</body>
</html> 
```

但是当我在浏览器中打开这个页面时，它显示一个空白页面。什么都没有出现。我错过了什么吗？请提前帮助。Thnx。

注意：所有script标签的src都是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:12:45.713

最后我解决了。感谢 Mozilla 的 FireBug。所以我想我也应该编写解决方案：- 在上面的脚本标签中，指定根文件夹后，我们应该使用一个连接器，它将获取路径并从中获取文件树这条路连同它的所有孩子。

在我的场景中，我使用了 jsp 连接器。所有这些连接器都可以下载 [http://labs.abeautifulsite.net/archived/jquery-fileTree/jquery.fileTree-1.01.zip](http://labs.abeautifulsite.net/archived/jquery-fileTree/jquery.fileTree-1.01.zip)

对上述嵌入式脚本代码进行以下更改

```
$(document).ready(function() {
$('#container_id').fileTree({
root : '/home/abhinav',
script : 'jqueryFileTree.jsp'
}, function(file) {
alert(file);
});
}); 
```

然后我们的文件树就准备好了……:)

# php - php mysql 日期数组发布为日期时间

> ID：11150173
> 
> 赞同：1
> 
> 时间：2012-06-22T04:26:27.683
> 
> 标签：php, mysql, arrays, datetime, strtotime

我没有找到我的问题的答案，也没有看到有人问这个特定的问题。我有一个 php 采购订单表单，我在其中通过 javascript 动态添加行项目，并且能够捕获数组中每个行项目的所有数据并将数据发布到 mysql 数据库。我唯一遇到问题的字段是按日期要求。

我通常使用 date(strtotime()) 将诸如 01/01/01 之类的日期转换为 2001-01-01 以便存储在 mysql 中，但是我无法正确捕获此日期，重新格式化为适当的日期时间字符串，然后通过遍历我的数组与我的其他数据一起发布。

在我的匆忙中，我尝试了许多不同的方法，例如将 date("Ymd",strtotime($Item_Date[$a])) 放在我的 INSERT 查询中，同时声明一个变量并分配 date("Ymd",strtotime ($Item_Date[$a])) 考虑到每次通过我的 foreach 循环时都会重新分配该值。下文概述了每个提及的尝试的示例。

例 1

```
foreach($Cust_PN as $a => $b) {

$query1 = "INSERT INTO SO_Items (Timestamp,SO_Num,SO_Rev,SO_Line_Item,Cust_PN,Cust_PN_Rev,E3_PN,E3_PN_Rev,Description,
Qty,Sale_Price,UOM,Program,Required_Date) 
SELECT NOW(),'$SO_Num','$SO_Rev','$i','$Cust_PN[$a]','$Cust_PN_Rev[$a]','$PN[$a]','$PN_Rev[$a]','$Description[$a]','$Qty[$a]','$Sale_Price[$a]','$UOM[$a]','$Program[$a]','date("Y-m-d", strtotime($Item_Date[$a]))'" or die ('Error posting data');

mysql_query($query1);
$i++;
} 
```

例 2

```
foreach($Cust_PN as $a => $b) {

$query1 = "INSERT INTO SO_Items (Timestamp,SO_Num,SO_Rev,SO_Line_Item,Cust_PN,Cust_PN_Rev,E3_PN,E3_PN_Rev,Description,
Qty,Sale_Price,UOM,Program,Required_Date) 
SELECT NOW(),'$SO_Num','$SO_Rev','$i','$Cust_PN[$a]','$Cust_PN_Rev[$a]','$PN[$a]','$PN_Rev[$a]','$Description[$a]','$Qty[$a]','$Sale_Price[$a]','$UOM[$a]','$Program[$a]','$Item_Date[$a]'" or die ('Error posting data');

$Item_Date = date("Y-m-d", strtotime($Item_Date[$a]));
mysql_query($query1);
$i++;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:48:59.093

好的，谢谢大家的帮助。我怀疑数组中的数据要么没有得到正确处理，要么在 foreach 循环中被删除了。以下调整使世界变得与众不同：

代替 ：

```
foreach($Cust_PN as $a => $b) {

$query1 = "INSERT INTO SO_Items (Timestamp,SO_Num,SO_Rev,SO_Line_Item,Cust_PN,Cust_PN_Rev,E3_PN,E3_PN_Rev,Description,
Qty,Sale_Price,UOM,Program,Required_Date) 
SELECT NOW(),'$SO_Num','$SO_Rev','$i','$Cust_PN[$a]','$Cust_PN_Rev[$a]','$PN[$a]','$PN_Rev[$a]','$Description[$a]','$Qty[$a]','$Sale_Price[$a]','$UOM[$a]','$Program[$a]','$Item_Date[$a]'" or die ('Error posting data');

$Item_Date = date("Y-m-d", strtotime($Item_Date[$a]));
mysql_query($query1);
$i++;
} 
```

我用了：

```
foreach($Cust_PN as $a => $b) {

$Item_Date[$a] = date("Y-m-d", strtotime($Item_Date[$a]));

$query1 = "INSERT INTO SO_Items (Timestamp,SO_Num,SO_Rev,SO_Line_Item,Cust_PN,Cust_PN_Rev,PN,PN_Rev,Description,
Qty,Sale_Price,UOM,Program,Required_Date) 
SELECT NOW(),'$SO_Num','$SO_Rev','$i','$Cust_PN[$a]','$Cust_PN_Rev[$a]','$PN[$a]','$PN_Rev[$a]','$Description[$a]','$Qty[$a]','$Sale_Price[$a]','$UOM[$a]','$Program[$a]','$Item_Date[$a]'" or die ('Error posting data');

mysql_query($query1);
$i++;
} 
```

# c# - 如何用 C# 从用 PHP 加密的数据中解密数据

> ID：11150181
> 
> 赞同：-3
> 
> 时间：2012-06-22T04:27:19.717
> 
> 标签：c#, php, encryption, aes

我尝试从本地汇款服务中解密使用 PHP 加密的数据。

有PHP示例如下：

```
<?php

require_once('phpseclib/Crypt/AES.php');

define('API_PASSKEY', 'abcdefghijklmnop');

if($_SERVER['REMOTE_ADDR'] == '203.146.127.115' && isset($_GET['request']))
{
    $aes = new Crypt_AES();
    $aes->setKey(API_PASSKEY);
    $_GET['request'] = base64_decode(strtr($_GET['request'], '-_,', '+/='));
    $_GET['request'] = $aes->decrypt($_GET['request']);
    if($_GET['request'] != false)
    {
        parse_str($_GET['request'],$request);
        $request['Ref1'] = base64_decode($request['Ref1']);

        echo 'SUCCEED';
    }
    else
    {
        echo 'ERROR|INVALID_PASSKEY';
    }
}
else
{
    echo 'ERROR|ACCESS_DENIED';
}
?> 
```

但是，我想用 C# 进行解密。

我还设置了简单的 PHP 加密文本进行测试，但也无法使用 C# 解密。

```
<?php 
include('phpseclib/Crypt/AES.php');

$aes = new Crypt_AES();

$aes->setKey('abcdefghijklmnop');

$plaintext = 'Hello';

$cryptoText = $aes->encrypt($plaintext) ;

$cryptoText =  base64_encode( $cryptoText);

echo $cryptoText . "<br/>";

echo $aes->decrypt(base64_decode($cryptoText));

?> 
```

我期待着得到你的好建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T15:48:14.350

phpseclib 默认使用 CBC，启用 PKCS#7 填充和 128 位密钥（如果有帮助的话）。

# c++ - Embarcadero C++ Builder XE，表单顺序和表单组

> ID：11150184
> 
> 赞同：0
> 
> 时间：2012-06-22T04:27:27.013
> 
> 标签：c++, forms, c++builder, c++builder-xe2

我正在 Builder XE2 中构建多个表单应用程序，但表单排序有问题。

假设我使用 IDE GUI 创建表单，例如 Form1 和 Form2（Form1 是自动创建的），当我运行我的应用程序时，Form2 始终位于 Form1 之上（即使我可以访问 Form1、使用它的控件等）如果我创建另一个表单以编程方式，它与 Form2 具有相同的优先级（我可以在它们之间切换，并将它们带到前面/发送到后面），但 Form1 仍然留在后面。

如何在不使用 fsStayOnTop 的情况下解决此问题，以便项目中的每个表单都具有相同的优先级？表格顺序在哪里定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:02:30.563

阅读有关 的[`PopupMode`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TForm.PopupMode)和的[`PopupParent`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TForm.PopupParent)属性`TForm`。听起来您的 MainForm 被设置为`PopupParent`您的辅助表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:13:41.283

检查 Application.MainFormOnTaskbar 的 dproj 文件源代码：= True;

这会影响主窗体的 ZOrder（在 Options... 中定义为主窗体的窗体），并且还会导致它落后于在该应用程序中创建的其他窗体。

Embarcadero 会说这是“按预期工作”，尽管它与流行的主窗体/非模态子窗体应用程序（如 Outlook）的工作方式不同。

# excel - 从 Excel 工作表制作 .RData 文件

> ID：11150191
> 
> 赞同：1
> 
> 时间：2012-06-22T04:28:12.117
> 
> 标签：excel, r, load-data-infile

如何将 Excel 工作表中的数据保存到 R 中的 .RData 文件？我想使用 R 中的一个包并将我的数据集加载为数据（数据集）我想我必须将数据保存为 .RData 文件，然后将其加载到包中。我的数据目前在 Excel 电子表格中。

我的 excel 表有列名，如 x、y、time.lag。我已将其保存为 .csv 然后我使用： x=read.csv('filepath', header=T,) 然后我说 data(x) 并显示未找到数据集'x'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T05:20:49.557

还有几个包允许直接从 XLS 和 XLSX 文件中读取。例如，我们甚至在[这里](https://stackoverflow.com/questions/7049272/importing-xlsx-file-into-r)和[这里](https://stackoverflow.com/questions/6099243/read-an-excel-file-directly-from-a-r-script/6099497#6099497)就该主题提出过问题。但是，您决定读取数据，保存到 RData 可以使用 , 处理，`save`可能还有其他一些我没有考虑的。`save.image``saveRDS`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T04:36:39.840

将 Excel 数据保存为 .csv 文件并使用 read.csv() 或 read.table() 将其导入。每个帮助将解释选项。

例如，您有一个名为 myFile.xls 的文件，将其保存为 myFile.csv。

```
library(BBMM)

# load an example dataset from BBMM
data(locations)

# from the BBMM help file
BBMM <- brownian.bridge(x=locations$x, y=locations$y, time.lag=locations$time.lag[-1], location.error=20,  cell.size=50)
bbmm.summary(BBMM)

# output of summary(BBMM)
Brownian motion variance :  3003.392
Size of grid :  138552 cells
Grid cell size :  50

# subsitute locations for myData for your dataset that you have read form a myFile.csv file
myData <- read.csv(file='myFile.csv', header=TRUE)

head(myData) # will show the first 5 entries in you imported data

# use whatever you need from the BBMM package now .... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T04:36:11.290

检查 RODBC 包。[您可以在R Data Import/Export](http://cran.r-project.org/doc/manuals/R-data.html#index-Excel-89)中找到一个示例。您可以像从数据库表中一样从 excel 表中查询数据。

使用 RODBC 读取 Excel 工作表的好处是您可以获得正确格式的日期（如果您使用任何日期）。对于中间 CSV，您需要指定列类型，除非您希望它是一个因子或字符串。如果需要，您也可以只查询部分数据，从而使子集（）变得不必要。

# ruby - 将 ruby 实例变量从 Rspec 传递给 mix ins

> ID：11150204
> 
> 赞同：0
> 
> 时间：2012-06-22T04:29:31.650
> 
> 标签：ruby, module, rspec, mixins

我正在尝试访问我在混入 RSpec 的模块中在 RSpec 中定义的实例变量，但我似乎无法让它工作。

简化的规范文件显示了我遇到的问题：

**my_spec.rb**

```
require 'rspec'

describe 'passing instance variables from specs into ruby mixins' do
  it 'should pass the instance variable to the module' do
    @a = 'a'
    A.a.should == 'a'
  end

  it 'should pass the instance variable to the module in the module' do
    @b = 'b'
    A.b.should == 'b'
  end

  it 'should pass instance varisables from one module to the other' do
    A.c.should == 'c'
  end

end

module B
  def b
    return @b
  end

  def c
    return @c
  end
end

module A
  extend B
  @c = 'c'
  def self.a
    return @a
  end
end 
```

结果：

```
1) passing instance variables from specs into ruby mixins should pass the instance variable to the module
     Failure/Error: A.a.should == 'a'
       expected: "a"
            got: nil (using ==)
     # ./spec/my_spec.rb:6:in `block (2 levels) in <top (required)>'

  2) passing instance variables from specs into ruby mixins should pass the instance variable to the module in the module
     Failure/Error: A.b.should == 'b'
       expected: "b"
            got: nil (using ==)
     # ./spec/my_spec.rb:11:in `block (2 levels) in <top (required)>' 
```

基本上，我希望能够访问模块 A 和 B 中的实例变量 @a、@b。我尝试过使用类变量 @@a 和 @@b，但这不起作用。

我可以使用全局变量（$a 和 $b），这很有效，但我觉得这并不优雅，因为它们是全局变量，[它们是 evil](http://c2.com/cgi/wiki?GlobalVariablesAreBad)。

**工作代码：**

```
require 'rspec'

describe 'passing instance variables from specs into ruby mixins' do
  it 'should pass the instance variable to the module' do
    $a = 'a'
    A.a.should == 'a'
  end

  it 'should pass the instance variable to the module in the module' do
    $b = 'b'
    A.b.should == 'b'
  end

  it 'should pass instance varisables from one module to the other' do
    A.c.should == 'c'
  end

end

module B
  def b
    return $b
  end

  def c
    return @c
  end
end

module A
  extend B
  @c = 'c'
  def self.a
    return $a
  end
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:48:40.697

尽管它们共享相同的名称，但它们的作用域是分开的，因为它们的作用域仅限于定义它们的*实例。*

也就是说，你在specs中设置的实例变量只存在于那些specs的范围内。类似地，模块内的实例变量也同样适用于该上下文。

鉴于示例是抽象的，我不确定它是否与您要完成的任务相匹配，但试试这个：

```
require 'rspec'

module B
  def b= b
    @b = b
  end

  def b
    return @b
  end

  def c= c
    @c = c
  end

  def c
    return @c
  end
end

module A
  extend B

  @c = 'c'

  def self.a= a
    @a = a
  end

  def self.a
    return @a
  end
end

describe 'passing instance variables from specs into ruby mixins' do
  it 'should pass the instance variable to the module' do
    A.a = 'a'
    A.a.should == 'a'
  end

  it 'should pass the instance variable to the module in the module' do
    A.b = 'b'
    A.b.should == 'b'
  end

  it 'should pass instance varisables from one module to the other' do
    A.c.should == 'c'
  end
end 
```

然后可以简化使用`attr_accessor`，而不是手动定义 getter/setter 方法。

问题是您只是在测试 Ruby 的核心。

我误解了您要解决的问题吗？

# c - 调用函数后如何更改socketid的值

> ID：11150205
> 
> 赞同：0
> 
> 时间：2012-06-22T04:29:50.787
> 
> 标签：c

我正在使用以下 api 在客户端初始化 sockfd:(sockfd=3)

```
 if ((sockfd = socket(p->ai_family, p->ai_socktype,p->ai_protocol))  == -1) {
                    perror("client: socket");
                    continue;
            } 
```

& 使用函数将我的 TPKT_Buff 初始化为 {3,0,0,0} 值：

```
 if(Fill_TPKT(PStack,TPKT_Buff) != 0)
  {
   printf("Error while filling TPKT Buffer");
   return 1;
  }printf("tpkt/2_Buff%x %x\n",TPKT_Buff[0],TPKT_Buff[1]);printf("sockfd=%d\n",sockfd); 
```

但是，调用函数后：

```
 if(Fill_COTP(PStack,&cotp) != 0)
    {
     printf("Error while filling COTP Structure!");
     return 1;
    } 
```

我的 socfd & TPKT_Buff 值更改为零 TPKT_Buff={0,0,0,0} & sockfd=0 ：

```
printf("sockfd=%d\n",sockfd);
 printf("TPKT/2_Buff=%x %x\n",TPKT_Buff[0],TPKT_Buff[1]); 
```

Fill_COTP & Fill_TPKT 函数定义如下：

```
 int Fill_TPKT(FILE *fptr,unsigned char *buf)
  {
   fseek(fptr,14,SEEK_SET);
   fscanf(fptr,"%d",buf+0);

   fseek(fptr,15,SEEK_CUR); 
   fscanf(fptr,"%d",buf+1);

   return 0;
  }

 int Fill_COTP(FILE *fptr, COTP *cotp)
 {
  unsigned short temp;

  fseek(fptr,13,SEEK_CUR);
  fscanf(fptr,"%d",&temp);
  cotp->Destination_Ref[1] = temp;
  cotp->Destination_Ref[0] = temp>>8;
  printf("%x %x\n",cotp->Destination_Ref[0],cotp->Destination_Ref[1]);
  fseek(fptr,13,SEEK_CUR);
  fscanf(fptr,"%d",&temp);
  cotp->Source_Ref[1] = temp;
  cotp->Source_Ref[0] = temp>>8;
  printf("%x %x\n",cotp->Source_Ref[0],cotp->Source_Ref[1]);
  fseek(fptr,14,SEEK_CUR);
  fscanf(fptr,"%d",&temp);
  cotp->Source_Tsap[1] = temp;
  cotp->Source_Tsap[0] = temp>>8;
  printf("%x %x\n",cotp->Source_Tsap[0],cotp->Source_Tsap[1]);
  fseek(fptr,14,SEEK_CUR);
  fscanf(fptr,"%d",&temp);
  cotp->Destination_Tsap[1] = temp;
  cotp->Destination_Tsap[0] = temp>>8;
  printf("%x %x\n",cotp->Destination_Tsap[0],cotp->Destination_Tsap[1]);
  fseek(fptr,17,SEEK_CUR);
  fscanf(fptr,"%d",&(cotp->TPDU_size));
  printf("%x\n",cotp->TPDU_size);
  return 0;
 } 
```

这里 PStack 是一个文件指针。我不明白为什么我的 sockfd 和 TPKT_Buff 值变为零，即使我没有在我的函数 Fill_COTP(); 中使用这些值；请给点建议。COTP的定义是：

```
 typedef struct
         {
          unsigned char PDU_type;
          unsigned char Destination_Ref[2];
          unsigned char Source_Ref[2];
          unsigned char Source_Tsap[2];
          unsigned char Destination_Tsap[2];
          unsigned char TPDU_size;
         } COTP; 
```

sockfd 和 TPKT_Buff 之间没有关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:52:08.937

问题似乎出在这条线上：

```
fscanf(fptr,"%d",&(cotp->TPDU_size)); 
```

您的 TPCU_size 大小`unsigned char TPDU_size;`仅为 1 个字节（假设这是“char”的大小），但您尝试在 fscanf 期间将 4 个字节（假设为“int”的大小）放入其中，从而可能覆盖周围的记忆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:00:49.930

虽然缺少一些信息，但您所显示的某些信息显然是错误的，并且很可能与问题有关。例如：

```
int Fill_TPKT(FILE *fptr,unsigned char *buf)
  {
   fseek(fptr,14,SEEK_SET);
   fscanf(fptr,"%d",buf+0);

   fseek(fptr,15,SEEK_CUR); 
   fscanf(fptr,"%d",buf+1); 
```

如果每次调用都`fscanf`有效，则每个都将填写一个`int`，但`buf`指向一个`unsigned char`s 序列。除非你有非常大`char`的 s ，`sizeof(int) == 1`这显然是错误的。

同样的错误在许多其他点上重复出现，例如 in `Fill_COTP`，`fscanf`使用`%d`指令填充`temp`，它的类型`unsigned short`而不是`int`。

您可以更改指令（`%hhd`将填写一个`char`并将`%hd`填写一个`short`；`%hhu`并将`%hu`填写`unsigned char`和`unsigned short`）。然而，`fscanf`像这样简单地调用，没有任何错误检查，不是很健壮。如果输入流的内容不能转换为目标类型，则调用将失败（`fscanf`将返回 EOF 或短计数，具体取决于失败的类型、“输入”与“匹配”以及失败）。您可能需要一个小的中间函数来进行适当的错误检查，`int`例如扫描到一个，然后对值进行范围检查。

# java - 用于多个输入文件的 HTML 解析器

> ID：11150207
> 
> 赞同：-1
> 
> 时间：2012-06-22T04:30:08.637
> 
> 标签：java, javascript, html, oracle, parsing

我想一次选择多个 html 文件并使用 html 解析器仅提取文本，每个 html 文件将创建一个单独的文本文件。任何人都可以为此建议java代码。

```
`FileReader f0 = new FileReader("j.html");
StringBuilder sb = new StringBuilder();
 BufferedReader br = new BufferedReader(f0);
while((temp1=br.readLine())!=null)
  { sb.append(temp1); }
String para = sb.toString().replaceAll("<br>","\n");
String textonly = Jsoup.parse(para).text();
System.out.println(textonly);
FileWriter f1=new FileWriter("j.txt");
char buf1[] = new char[textonly.length()];
textonly.getChars(0,textonly.length(),buf1,0);
for(i=0;i<buf1.length;i++) {
 if(buf1[i]=='\n')
f1.write("\r\n");
f1.write(buf1[i]);
}` 
```

我有这段代码，但一次只占用一个文件。我想选择多个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:11:07.303

你不能把你的代码放在一个循环中吗？类似的东西（未测试）：

```
// loop over files you want to change
for (int i = 1; i < 1000; i++) {
   FileReader f0 = new FileReader(i + ".html");
   StringBuilder sb = new StringBuilder();
   BufferedReader br = new BufferedReader(f0);
   while((temp1=br.readLine())!=null) { 
      sb.append(temp1); 
   }
   String para = sb.toString().replaceAll("<br>","\n");
   String textonly = Jsoup.parse(para).text();
   System.out.println(textonly);
   // stick .txt on the end of the filename to write out
   FileWriter f1=new FileWriter(i + ".txt"); 
   char buf1[] = new char[textonly.length()];
   textonly.getChars(0,textonly.length(),buf1,0);
   for(i=0;i<buf1.length;i++) {
      if(buf1[i]=='\n') {
         f1.write("\r\n");
      }
      f1.write(buf1[i]);
   } 
```

# drupal - 无法为 CCK 字段插入选择列表值，同时从 from 以编程方式创建节点

> ID：11150210
> 
> 赞同：0
> 
> 时间：2012-06-22T04:30:27.607
> 
> 标签：drupal, drupal-6, cck, drupal-forms

在提交我的定制表单的一些选定值后，我正在创建节点。我的内容类型中有一个名为“开始时间（field_starttime）”的 CCK 字段，我从表单中的选择框中选择值并尝试提交。但它没有完成。选择列表表单中的代码 -

```
$select = taskform_timeelements();
  $form['fromtime'] = array(
    '#type' => 'select', 
    '#title' => t('From'),     
    '#options' => $select,
    '#prefix' => '<table><tr><td>',
    '#suffix' => '</td>',

  ); 
```

选择列表值的函数如下所示 -

```
function taskform_timeelements(){   
    $hour = range(9,19);
    $select = array();
    foreach($hour as $record){  
        $select[$record.":00"] = $record.":00";
    }
    return $select;
} 
```

我用于为指定的 CCK 字段分配值的行 -

```
$node->field_starttime[]['value'] = $form_state['values']['fromtime'; 
```

即使我尝试过这条线 -

```
 $node->field_starttime[]['value'] = '09:00'; 
```

但是什么也没发生。节点刚刚保存，此 CCK 字段没有任何值。

# cocos2d-iphone - 需要帮助了解 Sprite 和纹理

> ID：11150222
> 
> 赞同：3
> 
> 时间：2012-06-22T04:33:09.787
> 
> 标签：cocos2d-iphone, sprite, textures

我最近开始关注 cocos2d 游戏开发。

精灵和纹理有什么区别？
也许我可以通过那里的“位图”。什么是位图？

它们似乎都与 2d 图像相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T10:34:25.247

纹理是设备可以在屏幕上绘制的内存图像。

精灵实际上在屏幕上绘制纹理，或者只是纹理的特定矩形。精灵可以缩放、旋转、定位、倾斜、着色（着色）等等。

多个精灵可以共享相同的纹理。无论有多少精灵使用相同的纹理，纹理只会加载到内存一次。此外，使用 CCSpriteBatchNode，您可以“批量”绘制所有使用相同纹理的精灵，以获得更好的性能。

位图是计算机图像的通用术语，其中每个像素由一个或多个位表示。还有在 Windows 上流行的图像格式 BMP。现在大多数人只会说“图像”，因为还有其他形式的“位图”不是图像。例如，在 AI 代码中，您通常具有表示 AI 状态信息的位图（位数组）或游戏世界所有区域的寻路算法。即，世界上的每个区域都可能有一个“阻塞”位，或者一个“资源”位来帮助 AI 做出决策。

另见维基百科：

*   [纹理映射](http://en.wikipedia.org/wiki/Texture_mapping)
*   [位图](http://en.wikipedia.org/wiki/Bitmap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:06:31.027

您可以将纹理加载到内存中，例如带有图像的文件是纹理。sprite 是带有一组参数的对象，其中有几个是指向纹理、大小和纹理坐标的指针。

您可以将纹理 2048x2048 加载到内存中，然后使用此纹理的一部分创建精灵。

# entity-framework-4 - 使用 Unity 时 Azure 辅助角色中的 DbContext 错误

> ID：11150223
> 
> 赞同：0
> 
> 时间：2012-06-22T04:33:26.450
> 
> 标签：entity-framework-4, azure, ef-code-first, unity-container, azure-worker-roles

我有一个带有 UnitOfWork 类的 Azure 工作者角色，看起来像这样：

```
public class UnitOfWork : IUnitOfWork
{
    public MyData Db { get; private set; }

    public ILoginRepository LoginRepository { get; private set; }
    public ISubscriptionRepository SubscriptionRepository { get; private set; }

    public UnitOfWork(MyData db,
        ILoginRepository loginRepository,
        ISubscriptionRepository subscriptionRepository)
    {
    }
} 
```

存储库也接受对 DbContext 的引用：

```
public class LoginRepository : Repository<Login>, ILoginRepository
{
    public LoginRepository(MyData db) : base(db) { }
} 
```

我认为这很简单。

现在，我想在 Unity 中配置我的代码优先 DbContext，以便每次解析 UnitOfWork 时都会创建一个新的 DbContext 并且**所有**随后解析的存储库也会得到它。

我认为 PerResolveLifetimeManager 可以解决问题：

```
container.RegisterType<IUnitOfWork, UnitOfWork>();
container.RegisterType<MyData, MyData>(new PerResolveLifetimeManager()); 
```

但事实并非如此。我得到了所有这些奇怪的与 SQL 相关的错误，例如：

“不允许新事务，因为会话中还有其他线程在运行。”

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:33:04.537

好的，我重构了解决方案以执行更明确的 Resolve 调用而不是 .ctor 注入，然后我意识到主要问题是在迭代包含它的 IQueryable 时尝试更新对象。

在我看来，无事生非。

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:06:37.680

您正在谈论`PerResolveLifetimeManager`但您`PerThreadLifetimeManager`在代码中使用（据说无论如何都是错误的）。这可能是你问题的原因吗？

# c++ - 泛化共享指针和 QSharedPointer::data() vs shared_ptr::get()？

> ID：11150225
> 
> 赞同：1
> 
> 时间：2012-06-22T04:33:40.557
> 
> 标签：c++, qt, c++11, shared-ptr, qsharedpointer

我制作了一个基于长期抽象[的 Qt 库](http://hostilefork.com/thinker-qt/)`QSharedDataPointer`，例如和`QSharedData`. 因此，当我需要一个普通的共享指针时，`QSharedPointer`为了保持一致性，使用它是有意义的。

我现在在 C++11 项目中使用它。为了使代码更标准，我将切换到`shared_ptr`它的所有本地子系统。

库本身中的 C++11 依赖项不一定是可取的，因此感觉您应该能够选择要使用的共享指针类型。作为向前迈进的第一步，我尝试[了 C++0x 中模板别名的灵活性中](https://stackoverflow.com/questions/4152976/flexibility-of-template-alias-in-c0x)建议的这种方法（诚然是 C++11 依赖项本身，但我可以通过非 C++11 中的编译器标志使用预处理器构建）

```
#if THINKERQT_USE_STD_SHARED_PTR

#include <memory>
template<class T>
using shared_ptr_type = std::shared_ptr<T>;

#else

#include <QSharedPointer>
template<class T>
using shared_ptr_type = QSharedPtr<T>;

#endif 
```

不幸的是，指针类为方法选择了不同的名称。值得注意的是，访问包含的指针是由`.get()`shared_ptr 和`.data()`QSharedPointer 完成的。

我打算做一个提取器，某种`shared_ptr_type_get<>`但后来注意到一个可以有效地实现同样的事情（在包含的指针不为空的情况下，我可以通过布尔强制测试空）：

```
&(*ptr) 
```

如果您正在阅读代码，这是一个有点减速带的东西，并且有人可能会尝试优化（然后很快就会发现这是行不通的）。但除了WTF因素之外，它似乎无害……是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:38:03.403

我也在我的一个项目中使用它，除了你已经注意到的可读性之外，使用它没有任何问题。正如 Mike Seymour 指出的那样，您应该始终首先检查 ptr 不是空指针。

在大多数情况下，我使用以下成语：

```
if( shared_ptr_type ptr = funcReturnsSharedPtr() )
{
    funcAcceptsRawPtr(&*ptr);
} 
```

它几乎可以保证无论您使用哪种共享指针类型，它都能正确编译和运行，`shared_ptr_type`因为任何合理的共享指针类都会重载`operator*`。

# c# - C# 文本框不显示

> ID：11150232
> 
> 赞同：0
> 
> 时间：2012-06-22T04:34:52.367
> 
> 标签：c#, .net, winforms, textbox

```
private TextBox txtBoxDragPoint = new TextBox();

private void rtbLogicCode_MouseDown(object sender, MouseEventArgs e)
{
    if (dragInfo.Item2 == true)
    {
        //MessageBox.Show("Works");
        Point p = new Point(e.X, e.Y);

        txtBoxDragPoint.Name = dragInfo.Item1;
        txtBoxDragPoint.Text = dragInfo.Item1;
        txtBoxDragPoint.Location = p;
        txtBoxDragPoint.Size = new Size(100, 21);
        txtBoxDragPoint.Show();
    }
} 
```

我有一个文本框，应该在用户单击 RichTextBox 时显示。事件和布尔条件很好，因为它显示了消息框，但是它没有显示文本框本身。我还有其他事情要做吗？

编辑：正如回复中提到的，我做了以下附录，但文本框仍然没有显示：

```
 txtBoxDragPoint.Name = dragInfo.Item1;
        txtBoxDragPoint.Text = dragInfo.Item1;
        txtBoxDragPoint.Location = p;
        txtBoxDragPoint.Size = new Size(100, 21);
        this.Controls.Add(txtBoxDragPoint);
        txtBoxDragPoint.Show(); 
```

我不知道此信息是否相关，但 RTB 被添加为 tabcontrol 的控件，而 tabcontrol 被添加为表单的控件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T04:36:38.720

而不是`txtBoxDragPoint.Show()`您必须将该文本框添加到`form`

```
this.Controls.Add(txtBoxDragPoint); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T04:38:00.510

您必须将文本框添加到表单

```
this.Controls.Add(txtBoxDragPoint );
txtBoxDragPoint .BringToFront(); 
```

# nsis - 在 64 位系统中写入注册表值

> ID：11150238
> 
> 赞同：9
> 
> 时间：2012-06-22T04:35:51.847
> 
> 标签：nsis

我在 NSIS 中构建了一个应用程序设置。该集合需要在以下位置创建一个密钥才能启动我的应用程序：- HKEY_LOCAL_MACHINE\Software\\\" "VersionNo" 0 HKEY_LOCAL_MACHINE\Software\Wow6432Node\\" "VersionNo" "11"

在脚本中，我使用过：-

```
 WriteRegDWORD HKLM "SOFTWARE\<Key1>\<Key2>\<Key3>" "VersionNo" 0
      WriteRegStr HKLM "SOFTWARE\<Key1>\<Key2>" "VersionNo" "11" 
```

此密钥在 32 位 Windows 7 系统上成功创建。但是，当我在 64 位 Windows 7 系统上安装设置时，不会在上述位置创建密钥。相反，它在以下位置创建密钥：-

```
 HKEY_LOCAL_MACHINE\Software\Wow6432Node\<Key1>\<Key2>\<Key3>" "VersionNo" 0
      HKEY_LOCAL_MACHINE\Software\Wow6432Node\<Key1>\<Key2>" "VersionNo" "11" 
```

这导致我的应用程序在安装后无法启动。

--有人可以建议 NSIS 的命令/脚本强制在 HKEY_LOCAL_MACHINE\Software\ 下为 64 位系统创建密钥，而不是在 HKEY_LOCAL_MACHINE\Software\Wow6432Node 下创建密钥吗？

急切地等待解决方案......

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-22T04:45:22.633

使用[SetRegView](http://nsis.sourceforge.net/Docs/Chapter4.html#setregview)在 32 位和 64 位注册表之间切换。您的代码应如下所示：

```
SetRegView 64
WriteRegDWORD HKLM "SOFTWARE\<Key1>\<Key2>" "VersionNo" 0
SetRegView 32
WriteRegStr HKLM "SOFTWARE\<Key1>\<Key2>" "VersionNo" "11" 
```

# python - 自然排序

> ID：11150239
> 
> 赞同：5
> 
> 时间：2012-06-22T04:36:01.800
> 
> 标签：python, regex, sorting, natural-sort

我有一些文件需要按名称排序，可惜我不能使用常规排序，因为我也想对字符串中的数字进行排序，所以我做了一些研究，发现我要找的东西叫做[自然排序](https://en.wikipedia.org/wiki/Natural_sort_order)。

我尝试了[这里](http://code.activestate.com/recipes/285264-natural-string-sorting/#c3)给出的解决方案，效果很好。

`PresserInc-1_10.jpg`但是，对于像and这样的字符串`PresserInc-1_11.jpg`会导致特定的自然键算法失败，因为它只匹配第一个整数，在这种情况下是`1`and `1`，所以它会抛出排序。所以我认为可能有帮助的是匹配字符串中的所有数字并将它们组合在一起，所以如果我有`PresserInc-1_11.jpg`算法应该给我`111`回来，所以我的问题是，这可能吗？

以下是文件名列表：

`files = ['PresserInc-1.jpg', 'PresserInc-1_10.jpg', 'PresserInc-1_11.jpg', 'PresserInc-10.jpg', 'PresserInc-2.jpg', 'PresserInc-3.jpg', 'PresserInc-4.jpg', 'PresserInc-5.jpg', 'PresserInc-6.jpg', 'PresserInc-11.jpg']`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T04:57:53.940

[谷歌：Python 自然排序](http://www.google.com/search?q=Python+natural+sorting)。

[结果 1](http://code.activestate.com/recipes/285264-natural-string-sorting/)：您链接到的页面。

**但不要停在那里！**

[结果 2](http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html)：Jeff Atwood 的博客解释了如何正确执行。

[结果 3](https://stackoverflow.com/questions/4836710/does-python-have-a-built-in-function-for-string-natural-sort)：我根据 Jeff Atwood 的博客发布的答案。

这是该答案的代码：

```
import re

def natural_sort(l): 
    convert = lambda text: int(text) if text.isdigit() else text.lower() 
    alphanum_key = lambda key: [convert(c) for c in re.split('([0-9]+)', key)] 
    return sorted(l, key=alphanum_key) 
```

您的数据的结果：

```
PresserInc-1.jpg
PresserInc-1_10.jpg
PresserInc-1_11.jpg
PresserInc-2.jpg
PresserInc-3.jpg
ETC...

```

在线查看它：[ideone](http://ideone.com/xKWL4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-06T05:26:29.120

如果您不介意第三方库，可以使用[natsort](https://pypi.org/project/natsort/)来实现。

```
>>> import natsort
>>> files = ['PresserInc-1.jpg', 'PresserInc-1_10.jpg', 'PresserInc-1_11.jpg', 'PresserInc-10.jpg', 'PresserInc-2.jpg', 'PresserInc-3.jpg', 'PresserInc-4.jpg', 'PresserInc-5.jpg', 'PresserInc-6.jpg', 'PresserInc-11.jpg']
>>> natsort.natsorted(files)
['PresserInc-1.jpg',
 'PresserInc-1_10.jpg',
 'PresserInc-1_11.jpg',
 'PresserInc-2.jpg',
 'PresserInc-3.jpg',
 'PresserInc-4.jpg',
 'PresserInc-5.jpg',
 'PresserInc-6.jpg',
 'PresserInc-10.jpg',
 'PresserInc-11.jpg'] 
```

# php - PHP日期到Javascript日期变成时差？

> ID：11150240
> 
> 赞同：1
> 
> 时间：2012-06-22T04:36:06.127
> 
> 标签：php, javascript, datetime, datatable, timezone

我正在使用 JS`DataTable`并且`Date Column`必须是可排序的。但它无法排序，因为**JS 假定将 Dates 导入为 Strings**。（它不按实际时间顺序排序。只是按字符串顺序）

然后当我用谷歌搜索时，我开始意识到 JS 只能对 JS 日期进行排序。意味着，我需要将 PHP 日期转换为 JS 日期。

但我还不能正确地得到它。我所做的是：

```
<script>
    var jsDate = new Date(
                        <?php echo $phpDate_y; ?>,
                        <?php echo $phpDate_m; ?>,
                        <?php echo $phpDate_d; ?>
                    ); // $phpDate will be "2012-04-30";
</script> 
```

但是在渲染时， jsDate 被转换为：

```
Thu Oct 03 1935 00:00:00 GMT+0730 (MALST) 
```

**完全不同！
而且，我的时区位置是`Singapore`.
有没有其他合适的方法请:(**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T04:50:36.463

您可以将完整的日期字符串传递给 JS Date 对象以构造它，因此请尝试将其中一种 ISO 日期格式的 $phpDate 传递给 Date 构造函数，而不是按照您的方式拆分它。

```
// $phpDate = '2012-08-17 12:29:06'
var jsDate = new Date("<?php echo $phpDate; ?>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:50:43.063

尝试使用**date_default_timezone_set('America/Los_Angeles');**

PHP 脚本的第一行。

[php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

# sql - 使用存储过程显示每个单元格基于不同条件的结果集

> ID：11150243
> 
> 赞同：0
> 
> 时间：2012-06-22T04:36:25.033
> 
> 标签：sql, sql-server, sql-server-2005

我有一个表，我从中查询数据以使用存储过程显示结果集。我还有一个值要在 where 条件中给出，该条件对于每个单元格都在不断变化，并且该参数在我必须查询的表中不可用。到目前为止，我已经为那个特定的参数硬编码了。我的结果集应该包含 7 行和 16 列。有什么乐观的方法而不是硬编码吗？任何帮助表示赞赏。

这是我硬编码的临时表：

```
 create table #temp_financials(iden_val int identity(1,1) ,
     categ varchar(100),Retail_RDR varchar(100),Avg_Price_RDR varchar(100), 
             GPVR_RDR   varchar(100),
            L_RDR varchar(100),
       L_Avg_Price varchar(100),L_GPVL varchar(100),
    C_RDR varchar(100),C_Avg_Price varchar(100),C_GPVR varchar(100),
     C_Rgn_GPVR varchar(100),C_Nat_GPVR varchar(100),
       C_Lease_Penet varchar(100),C_Rgn_Penet varchar(100))

    insert into #temp_financials(categ,Retail_RDR ,Avg_Price_RDR , GPVR_RDR ,
      L_RDR ,L_Avg_Price ,L_GPVL ,
        C_RDR ,C_Avg_Price ,C_GPVR ,C_Rgn_GPVR ,C_Nat_GPVR ,
        C_Lease_Penet ,C_Rgn_Penet ) 
                 values('Ttl  Sum',             
         'B9720','B9996','B9776','B9722','B9997','B9791','B9733','B10003','B9806','B9806                 ','B9806','B9885','B9885'  )
         insert into #temp_financials(categ,Retail_RDR ,Avg_Price_RDR , GPVR_RDR ,
     L_RDR ,L_Avg_Price ,L_GPVL ,
          C_RDR ,C_Avg_Price ,C_GPVR ,C_Rgn_GPVR ,C_Nat_GPVR ,
         C_Lease_Penet ,C_Rgn_Penet ) 
                  values        ('B9870','B9773','4042A','B9998','B9788',
            'B9872','B2090','B9803','B9803','B9803','B10004','B10004') 
```

这是我要加入的表格：

```
 while(@loop_var<=@count_var)
        begin

       select                  t.categ,Retail_RDR=w1.CMValue,Avg_Price_RDR=w2.CMValue,
        GPVR_RDR=w3.CMValue,L_RDR=w4.CMValue,
    from westernunion  w1 join #temp_financials t on     
    w1.acct_no=t.retail_RDR left  outer join 
        westernunion  w2 on   w2.acct_no=t.avg_price_rdr 
        left outer join westernunion  w3 on  w3.acct_no=t.GPVR_RDR   
        left outer join westernunion w4 on w4.acct_no=t.L_RDR 
        where        t.iden_val=@loop_var
             set @loop_var=@loop_var+1
          end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:56:36.250

使用动态 SQL 查询：

```
Declare @vQuery nvarchar(max),
        @vWhereClasue varchar(500)

SET @vQuery = 'Select top 7 col1,col2 ....col16 from ... where ' + @vWhereClasue
exec sp_executesql @vQuery 
```

# javascript - 相同类名但ID不同的不同样式

> ID：11150244
> 
> 赞同：0
> 
> 时间：2012-06-22T04:36:25.900
> 
> 标签：javascript, html, css, jquery-ui

我有这个标记：

```
<div id="slider1">
    <div class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
        <a style="left: 0%;" class="ui-slider-handle ui-state-default ui-corner-all" href="#"></a>
    </div>
</div>
<div id="slider2">
    <div class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
        <a style="left: 0%;" class="ui-slider-handle ui-state-default ui-corner-all" href="#"></a>
    </div>
</div> 
```

我想要的是两个元素的不同样式元素。它们包含在具有不同 id 的外部 div 中。这可能吗？而且这个标记是由 jqueryui 插件自动生成的，所以我不能修改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:39:49.353

要将 css 应用于这两个元素，只需使用这样的规则

```
#slider1 .ui-slider {
    //style 1
}
#slider2 .ui-slider {
    //style 2
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:39:53.643

是的，有可能

对于第一个外部 div

```
#slider1 .ui-slider 
```

对于第二个外部 div

```
#slider2 .ui-slider 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T04:40:39.500

你可以写

```
#slider1 .ui-slider{
    //styles;
    !important;
}

#slider2 .ui-slider{
    //styles;
    !important;
} 
```

通过编写 !important 它将覆盖自动生成的样式..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T04:39:41.240

是的，现在您可以像这样定义相同的 CSS 属性

```
 #slider1  .ui-slider{
    xxxx:xxxx; // css properties 
    }

 #slider2  .ui-slider{
xxxx:xxxx; // css properties 
} 
```

* * *

现在第二个选项是

```
 #slider1 > .ui-slider{
    xxxx:xxxx; // css properties 
    }

 #slider2 > .ui-slider{
xxxx:xxxx; // css properties 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T04:40:42.987

风格与父子关系喜欢

```
parent_id/class child_id/class
{//do stuff here
} 
```

这里喜欢

```
#slider1 div{
style for 1st one div}
#slider2 div{
style for 2nd one div}
#slider1 a{
style for 1st one a}
#slider2 a{
style for 2nd one a} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T04:46:17.983

使用您的 css 文件或代码块并尝试在标记中最小化 style=""。遵循这些特异性指南：

特异性是通过计算 css 的各种组件并以 (a,b,c,d) 的形式表达它们来计算的。举个例子会更清楚，但首先是组件。

元素，伪元素：d = 1 – (0,0,0,1) 类，伪类，属性：c = 1 – (0,0,1,0) Id：b = 1 – (0,1,0 ,0) 内联样式：a = 1 – (1,0,0,0) id 比类更具体，比元素更具体。

来自：[http ://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)

```
 <style>
    .class1 {}
    .class2 {}
    #id1 {}
    #id2 {}
 </style> 
```

# c# - PCAP 库功能（编写新的 PCAP 文件）

> ID：11150245
> 
> 赞同：3
> 
> 时间：2012-06-22T04:36:36.633
> 
> 标签：c#, pcap, pcap.net

我被困住了。

我使用 PCAP.NET 读取 .PCAP 文件并将数据包写入数据库。现在我可以查询数据库并取回与约束匹配的数据包。我需要一种将结果写入新的 .PCAP 文件的方法。

问题是，据我所知，生成新 PCAP 文件的唯一方法是通过 DumpFile，它只能通过本身绑定到 PacketDevice 的 PacketCommunicator 进行初始化。

一个例子可以在这里看到： http://pcapdotnet.codeplex.com/wikipage?title=Pcap.Net%20Tutorial%20-%20Handling%20offline%20dump%20files&referringTitle= [Pcap.Net%20User%20Guide](http://pcapdotnet.codeplex.com/wikipage?title=Pcap.Net%20Tutorial%20-%20Handling%20offline%20dump%20files&referringTitle=Pcap.Net%20User%20Guide)

很好，但在这种情况下，我没有设备。

我应该为此目的推出自己的 PCAP 编写器吗？

我错过了什么明显的东西吗？

如何将这些数据包放入新的 PCAP 文件中？

我确信我忽略了一些简单的事情……PCAP 对我来说是一个新领域，我感觉很不舒服。工作中的 Unix 人员表示，winpcap 和 pcap.net 所基于的 libpcap 提供了直接写入 pcap 文件的能力。库中没有公开功能吗？

非常感谢您的建议。

谢谢，

克里斯

PS 这是对我在这里提出的原始问题的修订：[.NET writing PCAP files](https://stackoverflow.com/questions/11135215/net-writing-pcap-files)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:49:17.177

> 库中没有公开功能吗？

哪个图书馆？

它在 libpcap/WinPcap 中公开，但打开文件以进行输出有点尴尬 - 您需要一个`pcap_t`用于捕获设备、一个`pcap_t`用于捕获文件，*或者*`pcap_t`一个用于链接层标头类型和文件快照长度的虚拟对象'如果您正在编写的数据包不是来自实时捕获或现有捕获文件，则重新编写。

我找不到 Pcap.NET 的任何参考文档，只有教程文档，但似乎没有任何东西可以让您打开虚拟句柄 - 您可以打开捕获设备或离线捕获文件，但我没有看不到任何有关创建*虚拟*句柄的任何信息可以告诉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-15T20:35:44.170

您可以创建 pcap 标头和格式，规范很简单，并且您不需要 pcap.h 之外的外部库。

```
struct pcap_file_header {
    bpf_u_int32 magic;
    u_short version_major;
    u_short version_minor;
    bpf_int32 thiszone;     /* gmt to local correction */
    bpf_u_int32 sigfigs;    /* accuracy of timestamps */
    bpf_u_int32 snaplen;    /* max length saved portion of each pkt */
    bpf_u_int32 linktype;   /* data link type (LINKTYPE_*) */
}; 
```

因此，您的文件首先为 pcap 文件创建一个标头，例如：

```
 struct pcap_file_header pheader;

    pheader.magic = 0xA1B2C3D4; // MAGIC NUMBER FOR TCPDUMP
    pheader.version_major = PCAP_VERSION_MAJOR;
    pheader.version_minor = PCAP_VERSION_MINOR;
    pheader.thiszone = 0;
    pheader.sigfigs = 0;
    pheader.snaplen = 1500;
    pheader.linktype = 1; 
```

对于编写每个数据包，您需要一个结构，例如：

```
typedef struct {
    int32_t t0;
    int32_t t1;
    int32_t len;
    int32_t caplen;
} pcap_header_writeable; 
```

所以你会在文件上写：

```
 pcap_header_writeable header;

    header.t0 = 0;
    header.t1 = 0;
    header.len = length;
    header.caplen = length;

    // write the header on the file 
    // write the packet on the file after the header 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-16T09:02:46.023

在[Pcap.Net 用户指南](https://github.com/PcapDotNet/Pcap.Net/wiki/User-Guide)中，[“处理脱机转储文件”页面](https://github.com/PcapDotNet/Pcap.Net/wiki/Pcap.Net-Tutorial-Handling-offline-dump-files)有一个使用`PacketDumpFile`该类写出转储文件的示例。我没有看到任何 Pcap.Net 参考手册；为了回答[这个问题](https://stackoverflow.com/questions/47878500/how-do-i-export-pcap-net-packet-class-object-to-pcap-file)，用户阅读了 Pcap.Net 源代码。

# gridview - 视图模型网格视图（Metro 应用程序）中的多选项目

> ID：11150249
> 
> 赞同：0
> 
> 时间：2012-06-22T04:36:56.213
> 
> 标签：gridview, windows-8, microsoft-metro, winrt-xaml

我有一个`GridView`并且我已将其数据模板设置为另一个视图。

我想要的是`SelectedItems`在视图模型中有一个属性，它将保存`gridview`.

gridView 中的 SelectedItems 字段是只读的（也不是依赖属性），因此无法绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:32:10.320

I had created a behavior to maintain sync between different item controls.

Behaviors are not supported natively, [WinRTBehaviors](http://winrtbehaviors.codeplex.com/) library is used. it is an Open Source for providing behavior support. This library is excellent, and provides a behavior extension, exactly similar to the WPF framework.

Details are listed in the article [Managing Multiple selection in View Model (.NET Metro Style Apps)](http://www.codeproject.com/Articles/412417/Managing-Multiple-selection-in-View-Model-NET-Metr)

# delphi - 设置为使用 poDesktopCenter 定位自身的 Delphi 6 表单最终位于“扩展”监视器上

> ID：11150252
> 
> 赞同：5
> 
> 时间：2012-06-22T04:37:31.160
> 
> 标签：delphi, multiple-monitors

我有一个 Delphi 6 应用程序，它在主窗体出现后启动一个向导。向导是一种模态形式。我的一位用户将他们的 Windows 桌面扩展到了不止一台显示器。在他们的情况下，主窗体出现在主监视器上，向导出现在扩展监视器上。这会造成混乱，因为当他们尝试单击主窗体时，他们认为应用程序已冻结。由于向导是开放的和模态的，除了他们听到警告“叮”声告诉您表单无法接收输入之外，什么也没有发生。

我可以做些什么来确保向导窗体出现在与主窗体相同的监视器上，在这种情况下是主监视器？我将向导表单设置为 poDesktopCenter。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T11:24:08.850

***手动理论：***

[`poMainFormCenter`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TPosition)当您希望表单以 . 为中心时使用[`Application.MainForm`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TApplication.MainForm)。简而言之，应用程序主窗体是您在运行应用程序时可以看到的第一个窗体，并且您应该考虑到此主窗体可以位于与您从中创建和居中新窗体的活动窗口不同的监视器上。

或者，如果您想通过它来居中您的表单[`Owner`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TComponent.Owner)，请使用[`poOwnerFormCenter`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TPosition)恕我直言更好的用户体验，因为当您彼此打开两个以上的窗口时，您可以将窗口移动到另一个监视器并在监视器上创建新窗口用户当前工作。

***实际用例：***

用户在第一台监视器上运行您的应用程序。应用程序`Form2`从它的`MainForm`. 用户`Form2`在第二台显示器上移动了它，并从那里按下了创建另一个表单的按钮，`Form3`.

如果您设计`Form3`了使用该[`poMainFormCenter`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TPosition)位置，则此时将在不同的显示器上`Form3`居中，恕我直言，这是令人困惑的。`MainForm`

![在此处输入图像描述](../Images/810a7f977c362e2741891eaeec13267d.png)

如果您将使用这样的代码来创建和显示`Form3`：

```
procedure TForm2.Button1Click(Sender: TObject);
begin
  // the Owner parameter Self (or Form2 here) in the Form3 constructor along 
  // with the Position set to poOwnerFormCenter will ensure you that the form 
  // will be centered by the current form position, so on the current monitor 
  // where the user works on as well
  Form3 := TForm3.Create(Self);
  try
    Form3.Position := poOwnerFormCenter;
    Form3.ShowModal;
  finally
    Form3.Free;
  end;
end; 
```

当您当前工作时，您将`Form3`集中`Form2`在当前所在的同一监视器上，但主要是在同一监视器上：`Form2`

![在此处输入图像描述](../Images/c024e0f30b3e106d86e5d52efe3afc64.png)

# sql-server-2008 - 根据向下钻取维度层次结构的深度更改 SSAS 计算度量

> ID：11150256
> 
> 赞同：0
> 
> 时间：2012-06-22T04:38:07.690
> 
> 标签：sql-server-2008, ssas

事实表列的缩减版本是：

```
id [substitute Pk guid], TestNo, DrugGroupId, Positive 
```

其中 DrugGroupId 引用测量表 id、DrugGroup、Drug、Result

正列定义为

```
when Result != 'negative' then 1 else 0 
```

DrugGroup 的例子是

*   [guid]，安非他明，安非他明，阴性
*   [指导]，安非他明，安非他明，安非他明
*   [指导]，苯丙胺，甲基苯丙胺，甲基苯丙胺
*   [guid], 大麻素, 大麻素, 阴性
*   [guid]，大麻素，大麻素，阳性

我有一个计算过的度量值，即 Sum(Postive) 和事实表 Count 之间的简单比率

```
[Measures].[Positive] / [Measures].[Count] 
```

然而，我的数据的怪癖是事实表中任何给定的 TestNo 都不是只有一行。

因此，如果结果是否定的，则有 1 行，但是有些药物将有多个正行，每个“药物”在“药物组”下都有一个所以如果数据被非规范化到一个表中，它看起来像

*   [guid]，Test1，安非他明，安非他明，阴性
*   [guid]，Test2，苯丙胺，甲基苯丙胺，甲基苯丙胺
*   [guid]，Test2，安非他明，安非他明，安非他明
*   [guid]，Test1，大麻素，大麻素，阳性
*   [guid]，Test2，大麻素，大麻素，阴性

请注意，只有在没有对该“药物组”（即大麻）的详细分类时才允许使用“阳性”“药物”

鉴于上面的示例数据，我的比率度量（使用层次结构）将计算（显示在 SharePoint 性能点分析网格报告中）

*   [药物组、药物、结果]、阳性、计数、比率
*   [全部], 3, 5, 60%
*   [安非他明], 2, 3, 33%
*   [安非他明], 1, 1, 100%
*   [甲基苯丙胺], 1, 1, 100%
*   [大麻素], 1, 2, 50%
*   [大麻素], 1, 2, 50%

如您所见，在“DrugGroup”级别计算的比率不正确，因为多个阳性被过度计算，并且在“Drug”级别我只能得到 100% 的药物，除非它们的结果仅为“pos/neg”。

如何构建数据以便在汇总时正确计算结果或创建可以解决问题的比率度量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:37:38.327

*   因为我对不同 TestNo 的计数感兴趣，所以我需要添加一个新度量，它是 TestNo 'Distinct Test Count' 的不同计数。
*   接下来我需要对阳性测试的不同计数进行测量，
*   所以我创建了一个计算列，当该行为正时等于 TestNo，否则为 NULL，称为“未调整的正数”
*   此度量计算 NULL，我无法调整度量的 NULL 处理来解决此问题。
*   所以我在表'Negative Result'上添加了一个新的计算字段，即正列的逻辑逆
*   接下来我需要测量负列的最大值，称为“包含 NULL”
*   接下来我需要一个计算量度 = `[Measures].[Count Positive Unadjusted] - [Measures].[Contains NULL]`，称为“阳性测试计数”
*   我的比率计算可以变成`[Measures].[Positive Test Count]/[Measures].[Distinct Test Count]`

# c# - NHibernate 发出无关的更新语句，而不管关系上的正确 Inverse (fluent nhibernate) 设置如何

> ID：11150260
> 
> 赞同：8
> 
> 时间：2012-06-22T04:38:38.163
> 
> 标签：c#, nhibernate, fluent-nhibernate

以下类以最低限度的方式代表了我使用遗留数据库的真实场景。我可以向它添加新列，但这就是我所能做的，因为 300+ 百个表数据库被许多其他不会移植到 NHibernate 的遗留应用程序使用（所以从复合键迁移不是一个选项） ：

```
public class Parent
{
    public virtual long Id { get; protected set; }
    ICollection<Child> children = new HashSet<Child>();
    public virtual IEnumerable<Child> Children { get { return children; } }
    public virtual void AddChildren(params Child[] children)
    {
        foreach (var child in children) AddChild(child);
    }
    public virtual Child AddChild(Child child)
    {
        child.Parent = this;
        children.Add(child);
        return child;
    }
}
public class Child
{
    public virtual Parent Parent { get; set; }
    public virtual int ChildId { get; set; }
    ICollection<Item> items = new HashSet<Item>();
    public virtual ICollection<Item> Items { get { return items; } }
    long version;
    public override int GetHashCode() 
    {
        return ChildId.GetHashCode() ^ (Parent != null ? Parent.Id.GetHashCode() : 0.GetHashCode());
    }
    public override bool Equals(object obj)
     {
        var c = obj as Child;
        if (ReferenceEquals(c, null))
            return false;
        return ChildId == c.ChildId && Parent.Id == c.Parent.Id;
    }
}
public class Item
{
    public virtual long ItemId { get; set; }
    long version;
} 
```

这就是我将这些映射到“现有”数据库的方式：

```
public class MapeamentoParent : ClassMap<Parent>
{
    public MapeamentoParent()
    {
        Id(_ => _.Id, "PARENT_ID").GeneratedBy.Identity();
        HasMany(_ => _.Children)
            .Inverse()
            .AsSet()
            .Cascade.All()
            .KeyColumn("PARENT_ID");
    }
}
public class MapeamentoChild : ClassMap<Child>
{
    public MapeamentoChild()
    {
        CompositeId()
            .KeyReference(_ => _.Parent, "PARENT_ID")
            .KeyProperty(_ => _.ChildId, "CHILD_ID");
        HasMany(_ => _.Items)
            .AsSet()
            .Cascade.All()
            .KeyColumns.Add("PARENT_ID")
            .KeyColumns.Add("CHILD_ID"); 
        Version(Reveal.Member<Child>("version"));
    }
}
public class MapeamentoItem : ClassMap<Item>
{
    public MapeamentoItem()
    {
        Id(_ => _.ItemId).GeneratedBy.Assigned();
        Version(Reveal.Member<Item>("version"));
    }
} 
```

这是我用来插入具有三个孩子和一个孩子的父项的代码：

```
 using (var tx = session.BeginTransaction())
        {
            var parent = new Parent();
            var child = new Child() { ChildId = 1, };
            parent.AddChildren(
                child,
                new Child() { ChildId = 2, },
                new Child() { ChildId = 3 });
            child.Items.Add(new Item() { ItemId = 1 });
            session.Save(parent);
            tx.Commit();
        } 
```

这些是为前面的代码生成的 SQL 语句：

```
-- statement #1
INSERT INTO [Parent]
DEFAULT VALUES;

select SCOPE_IDENTITY()

-- statement #2
INSERT INTO [Child]
            (version,
             PARENT_ID,
             CHILD_ID)
VALUES      (1 /* @p0_0 */,
             1 /* @p1_0 */,
             1 /* @p2_0 */)

INSERT INTO [Child]
            (version,
             PARENT_ID,
             CHILD_ID)
VALUES      (1 /* @p0_1 */,
             1 /* @p1_1 */,
             2 /* @p2_1 */)

INSERT INTO [Child]
            (version,
             PARENT_ID,
             CHILD_ID)
VALUES      (1 /* @p0_2 */,
             1 /* @p1_2 */,
             3 /* @p2_2 */)

-- statement #3
INSERT INTO [Item]
            (version,
             ItemId)
VALUES      (1 /* @p0_0 */,
             1 /* @p1_0 */)

-- statement #4
UPDATE [Child]
SET    version = 2 /* @p0 */
WHERE  PARENT_ID = 1 /* @p1 */
       AND CHILD_ID = 1 /* @p2 */
       AND version = 1 /* @p3 */

-- statement #5
UPDATE [Child]
SET    version = 2 /* @p0 */
WHERE  PARENT_ID = 1 /* @p1 */
       AND CHILD_ID = 2 /* @p2 */
       AND version = 1 /* @p3 */

-- statement #6
UPDATE [Child]
SET    version = 2 /* @p0 */
WHERE  PARENT_ID = 1 /* @p1 */
       AND CHILD_ID = 3 /* @p2 */
       AND version = 1 /* @p3 */

-- statement #7
UPDATE [Item]
SET    PARENT_ID = 1 /* @p0_0 */,
       CHILD_ID = 1 /* @p1_0 */
WHERE  ItemId = 1 /* @p2_0 */ 
```

语句 4、5 和 6 是多余的/多余的，因为所有这些信息已经在语句 2 中以批量插入的形式发送到数据库。

如果 Parent 映射没有在 HasMany（一对多）关系上设置 Inverse 属性，这将是预期的行为。

事实上，当我们像这样摆脱从 Child 到 Item 的一对多关系时，它变得更奇怪了：

从 Child 中删除集合并将 Child 属性添加到 Item：

```
 public class Child
    {
        public virtual Parent Parent { get; set; }
        public virtual int ChildId { get; set; }
        long version;
        public override int GetHashCode() 
        {
            return ChildId.GetHashCode() ^ (Parent != null ? Parent.Id.GetHashCode() : 0.GetHashCode());
        }
        public override bool Equals(object obj)
         {
            var c = obj as Child;
            if (ReferenceEquals(c, null))
                return false;
            return ChildId == c.ChildId && Parent.Id == c.Parent.Id;
        }
    }

    public class Item
    {
        public virtual Child Child { get; set; }
        public virtual long ItemId { get; set; }
        long version;
    } 
```

更改 Child 和 Item 的映射以从 Item 中删除 HasMany 并将 Item 上的复合键上的 References 添加回 Child：

```
public class MapeamentoChild : ClassMap<Child>
{
    public MapeamentoChild()
    {
        CompositeId()
            .KeyReference(_ => _.Parent, "PARENT_ID")
            .KeyProperty(_ => _.ChildId, "CHILD_ID");
        Version(Reveal.Member<Child>("version"));
    }
}
public class MapeamentoItem : ClassMap<Item>
{
    public MapeamentoItem()
    {
        Id(_ => _.ItemId).GeneratedBy.Assigned();
        References(_ => _.Child).Columns("PARENT_ID", "CHILD_ID");
        Version(Reveal.Member<Item>("version"));
    }
} 
```

将代码更改为以下内容（注意现在我们需要显式调用 save Item）：

```
 using (var tx = session.BeginTransaction())
        {
            var parent = new Parent();
            var child = new Child() { ChildId = 1, };
            parent.AddChildren(
                child,
                new Child() { ChildId = 2, },
                new Child() { ChildId = 3 });
            var item = new Item() { ItemId = 1, Child = child };
            session.Save(parent);
            session.Save(item);
            tx.Commit();
        } 
```

生成的 sql 语句为：

```
-- statement #1
INSERT INTO [Parent]
DEFAULT VALUES;

select SCOPE_IDENTITY()

-- statement #2
INSERT INTO [Child]
            (version,
             PARENT_ID,
             CHILD_ID)
VALUES      (1 /* @p0_0 */,
             1 /* @p1_0 */,
             1 /* @p2_0 */)

INSERT INTO [Child]
            (version,
             PARENT_ID,
             CHILD_ID)
VALUES      (1 /* @p0_1 */,
             1 /* @p1_1 */,
             2 /* @p2_1 */)

INSERT INTO [Child]
            (version,
             PARENT_ID,
             CHILD_ID)
VALUES      (1 /* @p0_2 */,
             1 /* @p1_2 */,
             3 /* @p2_2 */)

-- statement #3
INSERT INTO [Item]
            (version,
             PARENT_ID,
             CHILD_ID,
             ItemId)
VALUES      (1 /* @p0_0 */,
             1 /* @p1_0 */,
             1 /* @p2_0 */,
             1 /* @p3_0 */) 
```

如您所见，没有多余/多余的 UPDATE 语句，但对象模型不是自然建模的，因为我不希望 Item 具有返回 Child 的链接，并且我需要 Child 中的 Items 集合。

除了从 Child 中删除任何 HasMany 关系外，我找不到任何方法来阻止那些不需要/不需要的 UPDATE 语句。似乎由于 Child 已经是“倒置”一对多关系中的“多”（它负责保存自己），因此当它是另一个“一个”部分时，它不尊重 Inverse 设置对多倒置关系...

这让我发疯了。如果没有任何深思熟虑的解释，我不能接受那些额外的 UPDATE 语句 :-) 有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T15:34:41.873

经过一夜的努力，即使在堆栈溢出中也没有希望得到答案 :-) 我想出了解决方案......我开始认为这可能是 Child 对象的变化被认为是父集合的更改，然后导致实体版本的更改。读完这篇文章后，我的猜测开始巩固：

> (13) 乐观锁（可选 - 默认为 true）：改变集合状态的物种导致拥有实体的版本增加。（对于一对多关联，禁用此设置通常是合理的。）（在此处找到：http: [//nhibernate.info/doc/nh/en/index.html#collections](http://nhibernate.info/doc/nh/en/index.html#collections)）

然后我天真地更改了 Parent 上的映射以不使用乐观锁，如下所示：

```
 public MapeamentoParent()
    {
        Id(_ => _.Id, "PARENT_ID").GeneratedBy.Identity();
        HasMany<Child>(_ => _.Children)
            .Inverse()
            .AsSet()
            .Cascade.All()
            .Not.OptimisticLock()
            .KeyColumn("PARENT_ID");
    } 
```

这没有用。但后来我注意到无关更新中的一些有趣的东西：

```
-- statement #1
UPDATE [Child]
SET    version = 2 /* @p0 */
WHERE  PARENT_ID = 1 /* @p1 */
       AND CHILD_ID = 1 /* @p2 */
       AND version = 1 /* @p3 */

-- statement #2
UPDATE [Child]
SET    version = 2 /* @p0 */
WHERE  PARENT_ID = 1 /* @p1 */
       AND CHILD_ID = 2 /* @p2 */
       AND version = 1 /* @p3 */

-- statement #3
UPDATE [Child]
SET    version = 2 /* @p0 */
WHERE  PARENT_ID = 1 /* @p1 */
       AND CHILD_ID = 3 /* @p2 */
       AND version = 1 /* @p3 */ 
```

我很幸运地注意到版本正在更新到 2！（题外话：我使用的是 DateTime 版本字段，但由于它没有无限精度，所以当我开始认为这是版本控制问题时，我故意将其更改为整数版本，以便我可以看到版本中的每一个增量, 并且不要错过发生在毫秒以内的增量，由于 DateTime 版本的精度或缺少这些增量，这些增量是无法追踪的）。因此，在再次绝望之前，我已将 Parent 的 HasMany 改回原来的样子（以尝试隔离任何可能的解决方案）并将 Not.OptimisticLock() 添加到 Child 的地图中（毕竟所有实体似乎有他们的版本更新是孩子们！）：

```
 public class MapeamentoChild : ClassMap<Child>
    {
        public MapeamentoChild()
        {
            CompositeId()
                .KeyReference(_ => _.Parent, "PARENT_ID")
                .KeyProperty(_ => _.ChildId, "CHILD_ID");
            HasMany(_ => _.Items)
                .AsSet()
                .Cascade.All()
                .Not.OptimisticLock()
                .KeyColumns.Add("PARENT_ID")
                .KeyColumns.Add("CHILD_ID");
            Version(Reveal.Member<Child>("version"));
        }
    } 
```

它完美地发出了以下 SQL 语句：

```
-- statement #1
INSERT INTO [Parent]
DEFAULT VALUES;

select SCOPE_IDENTITY()

-- statement #2
INSERT INTO [Child]
            (version,
             PARENT_ID,
             CHILD_ID)
VALUES      (1 /* @p0_0 */,
             1 /* @p1_0 */,
             1 /* @p2_0 */)

INSERT INTO [Child]
            (version,
             PARENT_ID,
             CHILD_ID)
VALUES      (1 /* @p0_1 */,
             1 /* @p1_1 */,
             2 /* @p2_1 */)

INSERT INTO [Child]
            (version,
             PARENT_ID,
             CHILD_ID)
VALUES      (1 /* @p0_2 */,
             1 /* @p1_2 */,
             3 /* @p2_2 */)

-- statement #3
INSERT INTO [Item]
            (version,
             ItemId)
VALUES      (1 /* @p0_0 */,
             1 /* @p1_0 */)

-- statement #4
UPDATE [Item]
SET    PARENT_ID = 1 /* @p0_0 */,
       CHILD_ID = 1 /* @p1_0 */
WHERE  ItemId = 1 /* @p2_0 */ 
```

**根本没有多余的更新声明！！！:-)**

问题是我仍然无法解释为什么它以前不起作用。由于某种原因，当 Child 与另一个实体具有一对多关系时，会执行无关的 SQL 语句。您必须在 Child 对象上的这些一对多集合上将乐观锁设置为 false。我也不知道为什么所有 Child 对象的版本都同时更改，只是因为 Child 类与添加的 Item 具有一对多的关系。当只更改一个子对象时，增加所有子对象的版本号是没有意义的！

我最大的问题是为什么父集合中的所有子对象都被更新，即使我没有向任何子对象添加任何项目。仅因为 Child 与 Item... 有 HasMany 关系这一事实就发生了（无需向任何 Child 添加任何项目以“获取”那些额外的更新）。在我看来，NHibernate 在这里错误地解决了问题，但由于我对 NHibernate 完全缺乏更深入的了解，我不能肯定地说，也不能准确指出问题出在哪里，甚至不能断然肯定它确实是一个问题这很可能是我完全缺乏 NHibernate 探索能力的真正罪魁祸首！:-)

我希望有更开明的人来解释发生了什么/正在发生什么，但是按照文档的建议在一对多关系上将乐观锁设置为 false 解决了这个问题。

# ios - 用重音字符绘制文本（即法语文本）

> ID：11150265
> 
> 赞同：0
> 
> 时间：2012-06-22T04:39:09.980
> 
> 标签：ios, nsstring, drawing, core-graphics

我想在图像上绘制文本。我试过使用`CGContextShowTextAtPoint`and `NSString` `drawAtPoint`，但它们都无法显示带有重音字符的文本（即，如果文本是法语）。基本上我希望能够显示 unicode 字符。任何提示/解决方案？

我的核心图形解决方案（`UIImage`类别方法）：

```
- (UIImage *)overlayText:(NSString *)overlayText withFontName:(NSString *)fontName andFontSize:(CGFloat)fontSize {
    // Refererence:
    // http://iphonesdksnippets.com/post/2009/05/05/Add-text-to-image-%28UIImage%29.aspx

    int w = self.size.width;
    int h = self.size.height; 

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 4 * w, colorSpace, kCGImageAlphaPremultipliedFirst);

    CGContextDrawImage(context, CGRectMake(0, 0, w, h), self.CGImage);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1);

    char *charText = (char *)[overlayText cStringUsingEncoding:NSASCIIStringEncoding];
    char *charFontName = (char *)[fontName cStringUsingEncoding:NSASCIIStringEncoding];

    CGContextSelectFont(context, charFontName, fontSize, kCGEncodingMacRoman);
    CGContextSetTextDrawingMode(context, kCGTextFill);
    CGContextSetRGBFillColor(context, 255, 255, 255, 1);

    // rotate text
    // CGContextSetTextMatrix(context, CGAffineTransformMakeRotation(-M_PI / 4));
    CGFloat textWidth = [overlayText calculateCGTextWidthWithFont:charFontName size:fontSize];
    CGFloat xTextPosition = MAX(10.0, w - textWidth - 10.0); // 10.0 inset

    CGFloat yTextPosition = 10.0;
    CGContextShowTextAtPoint(context, xTextPosition, yTextPosition, charText, strlen(charText));

    CGImageRef imageMasked = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);

    return [UIImage imageWithCGImage:imageMasked];    
} 
```

我的解决方案`NSString`（`UIImage`类别方法）：

```
- (UIImage *)overlayText:(NSString *)overlayText withFontName:(NSString *)fontName andFontSize:(CGFloat)fontSize {
    UIFont *font = [UIFont fontWithName:fontName size:fontSize];

    char *charFontName = (char *)[fontName cStringUsingEncoding:NSASCIIStringEncoding];
    CGFloat textWidth = [overlayText calculateCGTextWidthWithFont:charFontName size:fontSize];
    CGFloat xTextPosition = MAX(10.0, self.size.width - textWidth - 10.0); // 10.0 margin/inset
    CGFloat yTextPosition = self.size.height - fontSize - 10.0;   // 10.0 margin/inset

    UIGraphicsBeginImageContext(self.size);
    [self drawInRect:CGRectMake(0, 0, self.size.width, self.size.height)];

    [[UIColor whiteColor] set];    
    [overlayText drawAtPoint:CGPointMake(xTextPosition, yTextPosition) withFont:font];

    UIImage *overlayTextImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return overlayTextImage;
} 
```

我使用 Core-Text（`UIImage`类别方法）的解决方案：

```
- (UIImage *)overlayText:(NSString *)overlayText withFontName:(NSString *)fontName andFontSize:(CGFloat)fontSize {
    char *charFontName = (char *)[fontName cStringUsingEncoding:NSASCIIStringEncoding];
    CGFloat textWidth = [overlayText calculateCGTextWidthWithFont:charFontName size:fontSize];
    CGFloat xTextPosition = 10.0; // MAX(10.0, self.size.width - textWidth - 10.0); // 10.0 margin/inset
    CGFloat yTextPosition = self.size.height - fontSize - 10.0;   // 10.0 margin/inset

    UIGraphicsBeginImageContext(self.size);
    [self drawInRect:CGRectMake(0, 0, self.size.width, self.size.height)];

    // flip the coordinate system
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, self.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // create an attributed string
    CFMutableAttributedStringRef attributedOverlayText = CFAttributedStringCreateMutable(kCFAllocatorDefault, 0);

    if (overlayText != nil)
        CFAttributedStringReplaceString(attributedOverlayText, CFRangeMake(0, 0), (CFStringRef)overlayText);

    CFAttributedStringSetAttribute(attributedOverlayText, CFRangeMake(0, CFAttributedStringGetLength(attributedOverlayText)), kCTForegroundColorAttributeName, [[UIColor whiteColor] CGColor]);

    CTFontRef ctFont = CTFontCreateWithName((CFStringRef)fontName, fontSize, NULL);
    CFAttributedStringSetAttribute(attributedOverlayText, CFRangeMake(0, CFAttributedStringGetLength(attributedOverlayText)), kCTFontAttributeName, ctFont);
    CFRelease(ctFont);

    // draw attributed string using CTLineDraw
    CTLineRef line = CTLineCreateWithAttributedString((CFAttributedStringRef)attributedOverlayText);
    CGContextSetTextPosition(context, xTextPosition, yTextPosition);
    CTLineDraw(line, context);

    UIImage *overlayTextImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return overlayTextImage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:08:23.240

我对上述解决方案的问题是我基本上没有得到正确的文本“宽度”。

这是对我有用的解决方案（使用核心文本）：

```
- (UIImage *)overlayText:(NSString *)overlayText withFontName:(NSString *)fontName andFontSize:(CGFloat)fontSize {
    // Develope's Note:
    // Problem with implementing a solution using CG is that it doesn't support unicode character drawing i.e French    

    // Begin new image context
    UIGraphicsBeginImageContext(self.size);

    // Draw image
    [self drawInRect:CGRectMake(0, 0, self.size.width, self.size.height)];

    // Flip the coordinate system
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, self.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // Create an attributed string
    CFMutableAttributedStringRef attributedOverlayText = CFAttributedStringCreateMutable(kCFAllocatorDefault, 0);

    if (overlayText != nil)
        CFAttributedStringReplaceString(attributedOverlayText, CFRangeMake(0, 0), (__bridge CFStringRef)overlayText);

    // Set text color
    CFAttributedStringSetAttribute(attributedOverlayText, 
                                   CFRangeMake(0, CFAttributedStringGetLength(attributedOverlayText)), 
                                   kCTForegroundColorAttributeName, 
                                   [[UIColor whiteColor] CGColor]);

    // Set text font
    CTFontRef ctFont = CTFontCreateWithName((__bridge CFStringRef)fontName, fontSize, NULL);
    CFAttributedStringSetAttribute(attributedOverlayText, 
                                   CFRangeMake(0, CFAttributedStringGetLength(attributedOverlayText)), 
                                   kCTFontAttributeName, 
                                   ctFont);
    CFRelease(ctFont);

    // Set text alignment (paragraph style)
    CTTextAlignment alignment = kCTRightTextAlignment;
    CTParagraphStyleSetting settings[] = {kCTParagraphStyleSpecifierAlignment, sizeof(alignment), &alignment};
    CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(settings, sizeof(settings) / sizeof(settings[0]));
    CFAttributedStringSetAttribute(attributedOverlayText, 
                                   CFRangeMake(0, CFAttributedStringGetLength(attributedOverlayText)), 
                                   kCTParagraphStyleAttributeName, 
                                   paragraphStyle);    
    CFRelease(paragraphStyle);

    // Create framesetter with the attributed text
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(attributedOverlayText);
    CFRange stringRange = CFRangeMake(0, CFAttributedStringGetLength(attributedOverlayText));
    CGSize fitRange = CTFramesetterSuggestFrameSizeWithConstraints(framesetter, 
                                                                   CFRangeMake(0, 0), 
                                                                   NULL, 
                                                                   CGSizeMake(self.size.width - (2 * 10.0), CGFLOAT_MAX), 
                                                                   NULL);

    // Developer's Note:
    // We can't use fontSize for the framesetter's height.
    // We can't use fitRange.height in the bounding rectangle, because then we won't get the correct text alignment
    // Calculate the width (and correspondingly the xTextPosition)
    CGRect boundingRect = CGRectMake(10.0, 
                                     10.0, 
                                     self.size.width - (2 * 10.0), 
                                     fitRange.height);

    CGMutablePathRef boundingPath = CGPathCreateMutable();
    CGPathAddRect(boundingPath, NULL, boundingRect);  

    // Draw attributed text using CTFrameDraw
    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, stringRange, boundingPath, NULL);
    CTFrameDraw(frame, context);
    CFRelease(framesetter);

    // Draw boundary (debugging purposes only)
    if (NO) {
        // Inner boundary
        CGContextSetStrokeColorWithColor(context, [UIColor yellowColor].CGColor);
        CGContextSetLineWidth(context, 2.0);
        CGContextStrokeRect(context, CGPathGetBoundingBox(boundingPath));

        // Outer boundary
        CGMutablePathRef controlBoundaryPath = CGPathCreateMutable();
        CGPathAddRect(controlBoundaryPath, NULL, CGRectMake(0, 0, self.size.width, self.size.height));

        CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);
        CGContextSetLineWidth(context, 2.0);
        CGContextStrokeRect(context, CGPathGetBoundingBox(controlBoundaryPath));

        CFRelease(controlBoundaryPath);
    }

    // Draw attributed string using CTLineDraw 
    // (Doesn't work if we want to right align the text)
    //    CTLineRef line = CTLineCreateWithAttributedString((CFAttributedStringRef)attributedOverlayText);
    //    CGContextSetTextPosition(context, xTextPosition, yTextPosition);
    //    CTLineDraw(line, context);

    UIImage *overlayTextImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return overlayTextImage;
} 
```

希望这可以帮助某人。

# android - 我需要将光标存储在类级别的列表视图中吗？

> ID：11150266
> 
> 赞同：0
> 
> 时间：2012-06-22T04:39:17.683
> 
> 标签：android, android-listview

我的列表视图通过适配器使用光标。我是否需要出于任何原因将此游标变量保持在类级别，因为 Listview 适配器仍然存储它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:39:58.080

实际上，如果您想再次访问记录，那么我不明白为什么要这样做，然后只需在通过光标获取后存储它们，然后您就可以在项目中的任何位置访问它们。

如果您保留此游标变量，那么您再次要遍历数据库以进行检索或其他操作。但我认为为您的功能级访问记录制作光标（您可以将它们存储在 Vector 或 ArrayList 中）然后使用该存储的记录而不是使用光标。

如果你想将 cursor 设为类级别并在其他类中访问它（但请记住函数 reinitialize cursor 必须在调用其他类中的 cursor 之前先调用）。

希望这个解释对你有用......

# iphone - 应用商店是否拒绝不支持多方向的IPAD应用

> ID：11150267
> 
> 赞同：6
> 
> 时间：2012-06-22T04:39:17.857
> 
> 标签：iphone, ios, ipad

我创建了一个支持纵向方向的 IPAD 应用程序。在上传到 App Store 之前，我想确定我的应用是被接受还是被拒绝。如果只支持纵向，我的申请会被拒绝吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T04:54:24.610

您**不需要**同时支持 iPad 应用程序的横向和纵向，尽管 Apple 建议这样做。

根据Apple关于 iPad 应用程序支持方向[的技术问答 QA1689 ：](https://developer.apple.com/library/ios/#qa/qa2010/qa1689.html)

> **问：我的 iPad 应用程序应该支持哪些方向？**
> 
> **强烈建议您的应用程序支持所有方向。**这包括纵向、纵向倒置、横向左侧和横向右侧。
> 
> 如果您的应用程序必须仅在一个方向上运行（例如，仅纵向），那么您应该：
> 
> *   无论当前的设备方向如何，以您支持的方向启动。
> *   避免显示任何告诉人们旋转设备的 UI 元素。
> *   支持方向的两种变体。

本质上，如果您只支持一种方向，请确保您的应用程序指定它也支持该方向的颠倒版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T04:43:32.627

我接受了多个仅支持一种方向的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:24:52.657

将批准仅支持纵向方向的应用程序。我开发了许多只支持纵向的应用程序。

# javascript - 在我网站上的 Facebook 点赞按钮上，如何禁用“发布到 Facebook”按钮？

> ID：11150268
> 
> 赞同：0
> 
> 时间：2012-06-22T04:39:21.417
> 
> 标签：javascript, html, css, facebook, iframe

如何禁用`Post to Facebook`按钮？这很烦人。

我不想使用`like`代码的 iframe 版本。因为以下内容不起作用：

```
FB.Event.subscribe('edge.create',
    function(response) { }) 
```

可以用 CSS 或任何其他方式完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:42:55.077

您可以通过将以下 CSS 代码添加到您的主题来手动隐藏评论框：

在 Facebook Like（XFBML 版本不是 iframe 版本）之后隐藏评论框的最简单修复方法如下：

```
.fb_edge_widget_with_comment span.fb_edge_comment_widget iframe.fb_ltr {
display: none !important;} 
```

[工作演示](http://jsfiddle.net/epinapala/XKcCB/)

[学分](http://blog.nicolasgrenie.com/index.php?post/Disable-comment-box-on-Facebook-like-button)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T04:46:07.560

[Facebook 开发者页面](http://developers.facebook.com/docs/guides/web/)对您需要的一切都有很好的描述。

如果您不想使用 iframe，也许可以制作一个您自己的“Like”按钮，将用户链接到您的 Facebook 页面？

```
<a href="http://www.facebook.com/pages/yourLink/Here"><img src="likeBtn.png" alt="Like Us On Facebook!" /></a> 
```

# python - 通过任何方式从浏览器启动客户端编译器

> ID：11150279
> 
> 赞同：0
> 
> 时间：2012-06-22T04:41:06.410
> 
> 标签：python, html, compiler-construction, cross-browser

我目前正在开发一个基于网络的教育工具，学生可以在其中查看浏览器中的代码示例并在浏览器中编辑代码。我一直在尝试实现一个系统，他们可以通过该系统与客户端编译器交互并在浏览器中运行/调试代码。我做的研究越多，我就越发现浏览器的设计是为了防止这种情况发生，因为这会产生安全问题。我想知道有没有办法在本地运行编译器，即通过扩展或ajax 或其他方法。

尽管我们是从 python 开始的，但我们的目标是尽可能多地适应语言。

我知道我可以运行脚本服务器端并显示输出但是这在应用程序中是有限的（据我所知），特别是关于 GUI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:46:25.217

[我需要为我的一个项目](https://github.com/nibrahim/tomobi)做这样的事情（虽然不是编译器）。它必须下载并处理给定 URL 的资源，并将其处理成可以在 kindle 上阅读的格式。它与您的不完全相似，因为我有一个触发操作的浏览器插件（而不是网页），甚至不允许“离开”浏览器。

最后，我被迫编写了一个在客户端运行的小应用程序，插件将 URL 提交到该应用程序，然后对其进行处理。

设置是这样的

```
browser plugin (via ajax) <------> web app on client ----> compiler/etc. 
```

浏览器将代码片段（在您的情况下，是我的 URL）发送到在本地计算机上运行的 Web 应用程序，该应用程序侦听某个端口（例如`9999`）。它可以访问本地资源，因此可以实际运行代码，然后向浏览器返回一些内容，然后浏览器可以渲染它。

在我的例子中，浏览器将一个 JSON 字符串发送到只包含一个 URL 的 Web 应用程序。Web 应用程序获取资源，对其进行处理并将其转换为`.mobi`kindle 可以读取的文件，然后将其放入目录中。转换的结果（成功/失败）和转换文件的位置被发送回浏览器，通知您它已完成。

我认为您不能编写直接访问编译器的插件。它必须与本地应用程序通信。对于非技术用户而言，设置很复杂（请查看我项目中的 README），但它可以工作。

# c++ - c++ 在线调用asm

> ID：11150282
> 
> 赞同：-1
> 
> 时间：2012-06-22T04:41:28.710
> 
> 标签：c++, assembly

我不确定从 asm 调用 c++ 方法的方法是否正确。

c++ hkDrawIndexdPrimitive 方法：

```
HRESULT WINAPI hkDrawIndexedPrimitive (LPDIRECT3DDEVICE8 pDevice,
D3DPRIMITIVETYPE PrimType, UINT minIndex, UNIT NumVertices, UNIT startIndex, UINT primCount) 
```

调用 hkDrawIndexdPrimitive 方法的 asm 代码：

```
__declspec(naked) void DIP_Mid( ) {
 __asm {
     pushad
     pushfd

     PUSH DWORD PTR SS:[EBP+0x1C]            // primCount               [4 Bytes]
     PUSH DWORD PTR SS:[EBP+0x18]            // startIndex              [4 Bytes]
     PUSH DWORD PTR SS:[EBP+0x14]            // NumVertices             [4 Bytes]
     PUSH DWORD PTR SS:[EBP+0x10]            // minIndex                [4 Bytes]
     PUSH DWORD PTR SS:[EBP+0x0C]            // PrimType                [4 Bytes]
     PUSH DWORD PTR SS:[EBP+0x08]            // pDevice                 [4 Bytes]

     CALL hkDrawIndexedPrimitive

     popad
     popfd

     XOR ESI,ESI                              // Replace Code 0x6D9D73D1 [2 Bytes]
     CMP DWORD PTR DS:[ESI+18],EBX            // Replace Code 0x6D9D73D3 [3 Bytes]

     JMP dwDIPRet;                            // Return to 0x6D9D73D6
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:48:57.980

你为什么要这么辛苦？D3D 使用 COM，它具有用于所有对象方法的虚拟函数表，这意味着您无需深入研究汇编深度并依赖于系统/编译器相关的内联 ASM。它还有一个额外的好处是对象本地，而不是应用程序或系统本地。

还有一些库可以使这种事情变得更容易，例如[MS Detours](http://research.microsoft.com/en-us/projects/detours/)，[这里](http://s1.zetaboards.com/hLibrary/topic/748957/1/)有一个很好的教程，关于使用 detours 挂钩 D3D9 对象，完全相同的内容适用于 D3D8（唯一可能会改变的是 VFT 偏移量。

就您的程序集是否正确而言，您似乎假设已经设置了一个堆栈框架，但是 AFAIK，COM 不使用堆栈框架，因此 EBP 可能不指向堆栈的顶部。此外，您需要配对推送和弹出指令，因为堆栈是 FILO，先进后出，例如：在您的情况下，您应该有

```
PUSHFD
PUSHAD
//code...
POPAD
POPFD 
```

否则，您会将随机垃圾弹出回 EFLAGS 和其他寄存器

# javascript - js onclick 事件不适用于我的投资组合

> ID：11150287
> 
> 赞同：0
> 
> 时间：2012-06-22T04:41:51.087
> 
> 标签：javascript, onclick, thumbnails, portfolio

我的 js onclick 事件不适用于我的投资组合。该页面可以在这里看到：http: [//www.savantgenius.com/portfolio/branding](http://www.savantgenius.com/portfolio/branding)这是脚本：

```
 <script type="text/javascript">
$(function() {
    var portDefault = 'bonya';
    $('#portItem').hide();
    $('#portLoader').fadeIn();
    $('#portItem').load('http://www.savantgenius.com/portfolio/portfolio-item/' + portDefault + ' #portLoadedContent', function() {
        $('#portLoader').fadeOut();         
        $('#portItem').fadeIn();
    });
    $('a.focusElement').focus();
});
function get_portfolio(portLocation) {
    $('#portItem').fadeOut();
    $('#portLoader').fadeIn();
    $('#portItem').load('http://www.savantgenius.com/portfolio/portfolio-item/' + portLocation + ' #portLoadedContent', function() {
        $('#portLoader').fadeOut();         
        $('#portItem').fadeIn();
    });
} 
```

加载动画出现，但没有图像。任何想法都非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:53:21.117

离开@Christian Varga 的评论，您需要返回 HTML 并将源设置为您创建的链接。尝试类似：

```
$("#portItem").html($("<img>")
                        .attr("src", 'http://www.savantgenius.com/portfolio/portfolio-item/' + portLocation + '#portLoadedContent')); 
```

而不是您的 .load() 行。

所以我猜你的最终功能应该是这样的：

```
function get_portfolio(portLocation) {
    $('#portItem').fadeOut();
    $('#portLoader').fadeIn();
    $("#portItem").html($("<img>")
                             .attr("src", 'http://www.savantgenius.com/portfolio/portfolio-item/' + portLocation + '#portLoadedContent'));
    // UPDATE:
    setTimeout(function () {
        $('#portLoader').fadeOut();         
        $('#portItem').fadeIn();
    }, 1000);
}); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:17:12.030

检查此解决方案：

HTML：

```
<div id="portItem"><img /></div> 
```

JS：

```
$(function() {
    var portDefault = 'bonya';
    $('#portItem').hide();
    $('#portLoader').fadeIn();
        $('#portItem img').attr("src",'http://www.savantgenius.com/portfolio/portfolio-item/' + portDefault + '#portLoadedContent');
    $('#portItem img').load(function() {
        $('#portLoader').fadeOut();         
        $('#portItem').fadeIn();
    });
});
function get_portfolio(portLocation) {
    $('#portItem').hide();
    $('#portLoader').fadeIn();
    $('#portItem img').attr("src",'http://www.savantgenius.com/portfolio/portfolio-item/' + portLocation + '#portLoadedContent');

    //check if image is loaded, then hide loader + show image:

    $('#portItem img').load(function() {
        $('#portLoader').fadeOut();         
        $('#portItem').fadeIn();
    });
} 
```

见演示：http: [//jsfiddle.net/esqmr/1/](http://jsfiddle.net/esqmr/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T04:52:29.757

尝试删除#portLoadedContent 之前的空格

```
 <script type="text/javascript">
$(function() {
    var portDefault = 'bonya';
    $('#portItem').hide();
    $('#portLoader').fadeIn();
    $('#portItem').load('http://www.savantgenius.com/portfolio/portfolio-item/' + portDefault + '#portLoadedContent', function() {
        $('#portLoader').fadeOut();         
        $('#portItem').fadeIn();
    });
    $('a.focusElement').focus();
});
function get_portfolio(portLocation) {
    $('#portItem').fadeOut();
    $('#portLoader').fadeIn();
    $('#portItem').load('http://www.savantgenius.com/portfolio/portfolio-item/' + portLocation + '#portLoadedContent', function() {
        $('#portLoader').fadeOut();         
        $('#portItem').fadeIn();
    });
} 
```

# database - 如何从 WSO2 Stratoes Live Data Services Server 获取数据库备份

> ID：11150300
> 
> 赞同：0
> 
> 时间：2012-06-22T04:43:38.357
> 
> 标签：database, wso2, backup, wso2dss, wso2stratos

我在 Stratoes 实时服务器上创建了数据库，我的数据库 URL 就是这个。jdbc:mysql://rss1.stratoslive.wso2.com/karshamarkuptool_karsha_opensource_lk

我试过`Database Console> Tools> Back Up`了，它问我这些凭据

> 目标文件名：~/backup.zip 源目录：jdbc:mysql://rss1.stratoslive.wso2.com/karshamarkuptool_karsha_opensource_lk
> 源数据库名：karshamarkuptool_karsha_opensource_lk

我的证件对吗？它说在源目录中没有找到数据库。

如果不是，从 Stratoes 数据库获取备份的方法是什么？如何将其配置为每周自动备份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:08:01.287

如果您在本地设置中安装了 mysql，则可以像备份驻留在本地数据库服务器中的数据库一样获取备份。例如，以下命令将为您获取在 StratosLive 数据服务服务器的 RSS 管理器下创建的数据库的备份。

> mysqldump -u your_username -pyour_password -h rss1.stratoslive.wso2.com extract_host_name_from_the_JDBC_url_given_to_you database_name > local_file_system_path/backup.sql

干杯，普拉巴斯

# git - Git 拉取同步

> ID：11150310
> 
> 赞同：1
> 
> 时间：2012-06-22T04:44:28.343
> 
> 标签：git

在我的 git 上，我有一个名为 b.txt 的文件

在我的本地机器上，我没有这个文件。

我尝试“git pull”从 git 中检索文件并将其放入本地计算机的目录中，但它说：已经是最新的。

如何在不实际下载文件并将其放入我的文件夹的情况下检索文件？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:08:53.043

检查您是否处于分离头模式：请参阅“[为什么 git 分离了我的头？](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714) ”

那会：

*   使任何`git pull`空值（“已经是最新的”）
*   如果您已在本地删除，则不恢复您的文件

请注意，您可以搜索包含该文件的分支（“[如何在 Git 分支中搜索文件或目录？](https://stackoverflow.com/questions/372506/how-can-i-search-git-branches-for-a-file-or-directory) ”），并查找已删除的文件（“ [Git：如何在项目历史记录中搜索已删除的文件？](https://stackoverflow.com/questions/7203515/git-how-to-search-for-a-deleted-file-on-the-project-history) ")

# java - C++ 基本字符串操作

> ID：11150315
> 
> 赞同：3
> 
> 时间：2012-06-22T04:45:19.903
> 
> 标签：java, c++, string

有一个简单的字符串操作问题，您需要反转每行的单词：[http ://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=121&page=show_problem&problem=424](http://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=121&page=show_problem&problem=424)

所以：

```
I love you.
You love me.
We're a happy family. 
```

会成为：

```
I evol .uoy
uoY evol .em
er'eW a yppah .ylimaf 
```

现在，我编写了一个简单的 java 解决方案，它看起来像：

```
BufferedReader file = new BufferedReader(new InputStreamReader(System.in));
String s;
while((s=file.readLine())!=null){
    String[] sr = s.split(" ");
    for(int i = 0; i<sr.length; i++)
        System.out.print(new StringBuffer(sr[i]).reverse() + (i==sr.length-1?"\n":" "));
} 
```

因为我正在尝试学习 c++，所以我还尝试编写一个 c++ 解决方案，如下所示：

```
string s;
while(getline(cin, s)){
    string tmp = "";
    for(int i = 0; i<=s.length(); i++)
        if( i==s.length() || s[i] == ' '){
            for(int j = tmp.length(); j>=0; j--)
                cout << tmp[j];
            if( i == s.length()) cout << endl;
            else cout << " ";
            tmp = "";
        }else
            tmp += s[i];
} 
```

我的问题是：

1.  c++ 解决方案返回“错误答案”，而 java 解决方案被接受，为什么？
2.  可以对 c++ 解决方案进行哪些改进（如果有）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T04:57:07.483

```
std::string line_string;
while ( getline( std::cin, line_string ) ) {

    // Instead of `split`, read out of a std::istringstream:
    std::istringstream line_stream( line_string );
    std::string word;
    while ( line_stream >> word ) {

        // Use std::reverse instead of a loop:
        std::reverse( word.begin(), word.end() );

        // Always qualify with std:: instead of using namespace std;
        std::cout << word << ' ';
    }
    std::cout << '\n'; // prefer '\n' to std::endl unless you need a flush
} 
```

[http://ideone.com/hd3bg](http://ideone.com/hd3bg)

如果这没有通过，可能是因为每行末尾的尾随空格。使用布尔变量来避免在换行符之前打印空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T05:16:20.593

如果允许提升，我会使用[`boost::split`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost/algorithm/split_id820181.html),[`boost::join`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost/algorithm/join.html)和的组合[`std::reverse`](http://en.cppreference.com/w/cpp/algorithm/reverse)。

```
std::string line;
std::vector<std::string> vs;
while (getline(std::cin, line)) {       
    boost::split(vs, line, ::isspace);
    for (auto & word : vs)
        std::reverse(word.begin(), word.end());
    std::cout << boost::join(vs, " ") << '\n';
} 
```

如果 boost 不可用，我会在我的个人库中拥有这些功能（或类似功能），我只需将它们复制到我的提交中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T05:42:05.377

错误的原因是：

```
string s;
while(getline(cin, s)){
    string tmp = "";
    for(int i = 0; i<=s.length(); i++)
        if( i==s.length() || s[i] == ' '){
            for(int j = tmp.length(); j>=0; j--)
                        ^^^^^^^^^^^^ => the first tmp[j] is \0!
                                     => should be tmp.length()-1
                cout << tmp[j];
            if( i == s.length()) cout << endl;
            else cout << " ";
            tmp = "";
        }else
            tmp += s[i];
} 
```

请记住，在 c/c++ 中，索引从 0 开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T10:31:23.843

如果您绝对想创建一个新变量来处理反向操作，而不是简单地以相反的顺序打印。然后您必须考虑以下问题：在 C++ 中，索引不是字符串的长度。因为索引从0开始，所以你从索引0开始到索引：length - 1

如果你想开始 C++，在你熟悉了基础知识之后，在去其他任何地方之前深入研究 STL 总是好的（这只是我的观点）。

这是一些代码：

```
string s;  
while(getline(cin, s))
{      
   string tmp = "";      
   for(int i = s.length() - 1; i >= 0; i++)
       std::cout<<s[i];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T05:54:59.550

我想如果我要这样做，我会通过构造一个新字符串来反转每个单词，并将`word.rbegin(), word.rend()`其作为参数传递给构造函数。

使用我之前的一个答案和另一个答案中的[`Line`类](https://stackoverflow.com/a/1567703/179910)[`infix_ostream_iterator`](https://stackoverflow.com/a/3497021/179910)，它可能看起来像这样：

```
#include "infix_iterator.h"
#include "line"

int main() {
    auto rev_words = [](std::string const &in) -> std::string {
        std::istringstream b(in);
        std::ostringstream r;

        std::transform(std::istream_iterator<std::string>(b),
            std::istream_iterator<std::string>(),
            infix_ostream_iterator<std::string>(r, " "),
            [](std::string const &in){return std::string(in.rbegin(), 
                                                         in.rend());});
        return r.str();
    };

    std::transform(std::istream_iterator<line>(std::cin), 
        std::istream_iterator<line>(), 
        std::ostream_iterator<std::string>(std::cout, "\n"),
        rev_words);
    return 0;
} 
```

是的，这在全功能风格上可能有点过火了。毫无疑问，这样做会更容易：

```
std::string line;
while (std::getline(std::cin, line)) {
    std::istringstream buffer(line);
    std::transform(std::istream_iterator<std::string>(buffer),
                   std::istream_iterator<std::string>(),
                   infix_ostream_iterator<std::string>(std::cout , " "), 
                   [](std::string const &in){return std::string(in.rbegin(), 
                                                                in.rend()););
    std::cout << "\n";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T08:24:42.583

这是我试过的那个。

```
#include <iostream>
#include <string>

 using namespace std;

 int main(){

    string s = "Hello How are you Mr vins what are you doing now";
    string temp, reverse;

   int i,j;
     // Traverse through First string
    for (i=0;i <=s.length(); i++)
   {
if(s[i] == ' ' || s[i] == '\0') {
    //After getting space reverse the previous word and add to reverse string
    for (j = temp.length(); j >=0; j--)
        reverse = reverse + temp[j];

    reverse = reverse + " ";
    temp="";
    continue;
}
temp = temp + s[i];

}

 cout << "\nlets see reversed sentence \n";

   cout << reverse << "\n";
      return 0;
   } 
```

# java - 仅在页面完全加载后填充文档

> ID：11150319
> 
> 赞同：0
> 
> 时间：2012-06-22T04:45:45.217
> 
> 标签：java, html, jsoup

我正在从某个网站检索数据。内部只有在页面完全加载后才可用iejavascript将`<a>`标签添加到页面。`<sup>``<a>`

```
<table>
<tr>
<td class="left ">
<a href="reference" >Refer</a>see this
<sup class="super"><a href=​"#src1" onclick=​"dosomething;​" title=​"1" >​1​&lt;/a>​&lt;/sup>
</td>
<td class="td_right2" style="padding-top: .25em"></td>
</tr>
..

</table> 
```

所以，当我这样做时

```
Document doc=JSoup.connect(...).userAgent(...).get(); 
```

该文档不包含`<a>`标签。如何确保文档也填充了“a”标签。Jsoup 中是否有任何类似于`.ready`JQuery 的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T03:46:57.583

Jsoup 是一个 HTML 解析器，而不是一个网络浏览器。与大多数 HTML 解析器一样，Jsoup 不执行任何 JavaScript 代码。

您需要一个可以执行 JavaScript 的 HTML 解析器。[HtmlUnit](http://htmlunit.sourceforge.net/)就是这样一个，它是一个无 GUI 的网页浏览器，专为单元测试目的而设计，并且能够执行网页中包含的可能修改 HTML DOM 树的 JavaScript。您可以尝试改用它。

# scala - 如何测试使用 specs2 调用 error() 的方法？

> ID：11150320
> 
> 赞同：1
> 
> 时间：2012-06-22T04:45:54.993
> 
> 标签：scala, specs2

我想对调用`error()`它的方法进行测试。

`IntEmptyStack.top`是我想用 specs2 测试的：

```
abstract class IntStack {
  def push(x: Int): IntStack = new IntNonEmptyStack(x, this)
  def isEmpty: Boolean
  def top: Int
  def pop: IntStack
}
class IntEmptyStack extends IntStack {
  def isEmpty = true
  def top = error("EmptyStack.top")
  def pop = error("EmptyStack.pop")
} 
```

这是我到目前为止写的规格：

```
import org.junit.runner.RunWith
import org.specs2.runner.JUnitRunner
import org.specs2.mutable.Specification

@RunWith(classOf[JUnitRunner])
class IntStackSpec extends Specification {

  "IntEmptyStack" should {
    val s = new IntEmptyStack
    "be empty" in {
      s.isEmpty must equalTo(true)
    }
    "raise error when top called" in {
      s.top must throwA[RuntimeException]
    }
  }
} 
```

错误发生在第 13 行，`"raise error when top called" in {`. 错误消息是`value must is not a member of Nothing`。我认为 Scala 推断`s.top`为 Nothing，而不是抽象类中定义的 Int。在这种情况下，我怎样才能编写一个没有任何错误的测试？

感谢您对此问题的任何评论/更正。

示例参考：[Scala By Example](http://www.scala-lang.org/docu/files/ScalaByExample.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:33:12.777

这里的问题是scala（和Java）允许子类在重写方法中返回比超类更具体的类型。在这种情况下，您的方法`IntEmptyStack.top`的返回类型是`Nothing`(它是的子类型，`Int`因为`Nothing`它位于类型层次结构的底部。

显然，当类型为时，您编写代码所需的规范隐式转换`a must throwA[X]`不`a`适用`Nothing`

更改您的声明`IntEmptyStack`如下：

```
def top: Int = error("EmptyStack.top")
def pop: Int = error("EmptyStack.pop") 
```

或者，当然，您可以允许类型系统正在**证明您的逻辑的***正确性*这一事实。也就是说，不可能获取位于空堆栈顶部的元素：返回类型为! 无需进行任何测试。**`Nothing`**

# java - 如何将库文件夹添加到 Eclipse？

> ID：11150327
> 
> 赞同：3
> 
> 时间：2012-06-22T04:46:35.087
> 
> 标签：java, android, eclipse

好的，我知道这是一个菜鸟问题，但我无法弄清楚！我正在尝试将 Android-ViewPageIndicer 库导入 Eclipse，但它没有要添加的 LIB 文件，而且我无法弄清楚如何导入库文件夹，因为 Eclipse 说其中没有项目！有谁知道如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T05:03:36.893

我面临着同样的问题。解决方案是

1>使用现有源创建一个新的android项目（选择该库文件夹）

2> 将该项目标记为库

稍后您可以将此库用于其他项目

# java - Spring项目出现异常

> ID：11150329
> 
> 赞同：0
> 
> 时间：2012-06-22T04:46:37.990
> 
> 标签：java, spring

我第一次尝试了一个 spring(3.1.0) 项目，但它给了我运行时错误。我添加了 log4j，但仍然出现错误。并且它`org.springframework.beans.factory.xml.XmlBeanFactory`也已被弃用。请帮我

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.<init>(DefaultSingletonBeanRegistry.java:83)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.<init>(FactoryBeanRegistrySupport.java:43)
    at org.springframework.beans.factory.support.AbstractBeanFactory.<init>(AbstractBeanFactory.java:175)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.<init>(AbstractAutowireCapableBeanFactory.java:157)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.<init>(AbstractAutowireCapableBeanFactory.java:168)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.<init>(DefaultListableBeanFactory.java:158)
    at org.springframework.beans.factory.xml.XmlBeanFactory.<init>(XmlBeanFactory.java:77)
    at org.springframework.beans.factory.xml.XmlBeanFactory.<init>(XmlBeanFactory.java:66)
    at com.vehicle.SpringDemoApp.main(SpringDemoApp.java:21)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    ... 9 more<br/> 
```

这就是我得到的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:00:24.513

您需要在类路径中使用 apache commons-logging。Log4j 不是公共日志记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:34:15.660

[您可以在此处](http://www.jarvana.com/)查看哪个类在哪个 Opensource (OSS) 库中。

如果您使用的是 Maven，您可以尝试添加以下依赖项：

```
<dependency>
   <groupId>commons-logging</groupId>
   <artifactId>commons-logging</artifactId>
   <version>1.1.1</version>
   <classifier>api</classifier>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T07:04:28.667

[从http://commons.apache.org/logging/download_logging.cgi](http://commons.apache.org/logging/download_logging.cgi)下载公共日志记录 jar

# c# - 如何在 C# 控制台中更改字符串中每个字母的前景色？

> ID：11150332
> 
> 赞同：4
> 
> 时间：2012-06-22T04:46:48.160
> 
> 标签：c#, console

我想问我是否可以用我想要的特定颜色更改字符串中特定字母的颜色。

例如：

```
string letters = "Hello World";  //The string inputted. 
```

我想将“Hello”中的“o”更改为红色。我怎么做？我知道

```
Console.Foreground = ConsoleColor.Red; 
```

会将整个字符串更改为红色。用特定颜色更改特定字母的最佳代码是什么？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T04:50:56.433

最直接的解决方案是

```
var o = letters.IndexOf('o');
Console.Write(letters.Substring(0, o));
Console.ForegroundColor = ConsoleColor.Red;
Console.Write(letters[o]);
Console.ResetColor();
Console.WriteLine(letters.Substring(o + 1)); 
```

您还可以将其概括为适用于您想要着色的任意字符串或字母的函数：

```
void WriteLineWithColoredLetter(string letters, char c) {
  var o = letters.IndexOf(c);
  Console.Write(letters.Substring(0, o));
  Console.ForegroundColor = ConsoleColor.Red;
  Console.Write(letters[o]);
  Console.ResetColor();
  Console.WriteLine(letters.Substring(o + 1));
} 
```

另一种选择可能是使用类似的字符串`"Hell&o World"`并解析 where`&`意味着以红色打印以下字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:53:59.103

```
string letters = "Hello World";
Char[] array = letters.ToCharArray();

foreach (Char c in array)
{
    if (c == 'o')
    {
        Console.ForegroundColor = System.ConsoleColor.Red;
        Console.Write(c);
    }
    else
    {
        Console.ForegroundColor = System.ConsoleColor.White;
        Console.Write(c);
    }
}
Console.WriteLine();
Console.Read(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-06T00:50:38.003

我知道我迟到了，但我找到了一个非常适合原始海报的解决方案。

I'll give an example using a rainbow display which can be individually adapted to unique letters and colors desired in a text:

```
Console.ForegroundColor = ConsoleColor.Red; Console.Write("H");
Console.ForegroundColor = ConsoleColor.DarkYellow; Console.Write("e")
Console.ForegroundColor = ConsoleColor.Yellow; Console.Write("l");
Console.ForegroundColor = ConsoleColor.Green; Console.Write("l");
Console.ForegroundColor = ConsoleColor.Blue; Console.Write("o ");
Console.ForegroundColor = ConsoleColor.DarkMagenta; Console.Write("W");
Console.ForegroundColor = ConsoleColor.Magenta; Console.Write("o");
Console.ForegroundColor = ConsoleColor.Cyan; Console.Write("r");
Console.ForegroundColor = ConsoleColor.White; Console.Write("l");
Console.ForegroundColor = ConsoleColor.DarkYellow; Console.Write("d.\n\n");
Console.ResetColor(); 
```

Hope this helps anyone else coming to find ways to individually color characters in a C# line.

# php - 用php获取引用页面的内容

> ID：11150333
> 
> 赞同：1
> 
> 时间：2012-06-22T04:46:57.730
> 
> 标签：php, curl, wkhtmltopdf

我正在尝试启用登录用户当前所在页面的屏幕截图。我放置了一个按钮，需要：

*   读入引荐页面的内容
*   将其保存到文件中
*   将该文件呈现为 PDF
*   重定向回引用页面

我遇到的问题是用户登录并在非常特定于他们的页面上。我无法使用通用凭据通过 CURL 抓取页面，因为屏幕截图不适用，而且我没有用户的凭据。

如何在不访问用户凭据的情况下使用 PHP 读取当前/引用页面的内容？我试过`file_get_contents`哪个也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:53:13.043

我不相信这可以在没有获得用户凭据的情况下以合乎道德的方式完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T04:54:58.413

听起来您的机制无论如何都会出现故障：您不会保存页面，因为它看起来像他们，而是保存页面，因为它看起来在将来的某个时候 CURL。

如果您想要一个准确的解决方案，那么您需要在发送时将呈现的 HTML 的副本*保存*在服务器端某处（您可以使用[PHP 的输出缓冲](http://php.net/manual/en/function.ob-start.php)来捕获它）并使用某种密钥标记您保存的文件去用户那里。如果用户单击该按钮，它将将该密钥发送到您用来查找保存的 HTML 文件的服务器，并根据需要对其进行处理。

当然，效率要低得多，但你去吧。或者，您可以只保存页面中处理的*参数*，以便在需要时使用 PHP 重新呈现它。仍然不涉及卷曲，但节省的费用更少。显然，您不需要将这些缓存信息保留很长时间；只需几分钟，因此将其存储在 ram（例如 memcache）中就足够了。

# jquery - Ruby on Rails - 单击时无法让 jQuery 更新按钮

> ID：11150334
> 
> 赞同：0
> 
> 时间：2012-06-22T04:47:02.563
> 
> 标签：jquery, ruby-on-rails, coffeescript

我有一个投票机制，您可以在其中对给定比赛中的条目进行投票。投票数量有限，每个条目旁边都有一个向上和向下按钮。如果没有剩余投票，我希望向上按钮更改样式，并且在用户尚未投票时更改样式。

在我的 _entry.html 中，我有：

```
 <div class="vote-box">
        <% if !current_user.voted?(entry) %>
          <%= link_to '-', entry_vote_down_path(entry), method: :post, remote: true, :class => "btn btn-success vote down disabled" %>
        <% else %>
          <%= link_to '-', entry_vote_down_path(entry), method: :post, remote: true, :class => "btn btn-success vote down" %>
        <% end %>

        <% if current_user.votes_remaining(entry.contest) == 0 %>
          <%= link_to '+', entry_vote_up_path(entry), method: :post, remote: true, :class => "btn btn-success vote up disabled" %>
        <% else %>
          <%= link_to '+', entry_vote_up_path(entry), method: :post, remote: true, :class => "btn btn-success vote up" %>
        <% end %>

          <p><%= pluralize entry.votes.count, 'total vote' %> </p> 
```

例如，entry_vote_up_path 最终会触发 EntriesController 中的 vote_up：

```
def vote_up
  entry = Entry.find(params[:entry_id])
  current_user.vote_up!(entry)
  flash[:notice] = "Vote successfully counted."

  respond_to do |f|
   f.js { @entry = entry }
  end
end 
```

然后我有一个 vote_up.coffee：

```
 <% if current_user.votes_remaining(@entry.contest) == 0 %>

  $('#entry_<%= @entry.id %> .vote-box a.vote_up').replaceWith('<%=   vote_up_button_for_entry_disabled(@entry) %>')

  <% else %>

  $('#entry_<%= @entry.id %> .vote-box a.vote_up').replaceWith('<%= vote_up_button_for_entry(@entry) %>') 
```

vote_up_button_for_entry 与原始 html 文件中的 link_to 相同，我知道这是可行的。我觉得问题出在“a.vote_up”上，但我就是想不通。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:11:08.960

您的咖啡脚本文件正在寻找一个`vote_up`类，但您实际上并没有在任何地方使用该类。相反，您使用两个单独的类，`vote`并且`up`.

要么将`link_to`条目更改为实际使用`vote_up`and `vote_down`，要么执行以下操作：

```
$('#entry_<%= @entry.id %> .vote-box a.vote.up').replaceWith('<%=   vote_up_button_for_entry_disabled(@entry) %>') 
```

# php - 如何使用 PHP 将 IE 用户重定向到某个页面？

> ID：11150335
> 
> 赞同：1
> 
> 时间：2012-06-22T04:47:14.223
> 
> 标签：php, internet-explorer, redirect

> **可能重复：**
> [当用户使用 Internet Explorer 时重定向到新页面](https://stackoverflow.com/questions/4911107/redirecting-to-a-new-page-when-a-user-is-using-internet-explorer)

我正在开发一个可以在 Internet Explorer 中正确呈现的网站版本；一个 PHP 脚本会是什么样子，它会使用 IE 用户代理自动将用户重定向到（例如）/index-ie.php？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T04:51:35.260

尝试

PHP 有函数**$_SERVER['HTTP_USER_AGENT']**用于识别浏览器

```
 if(using_ie())
 {
   //redirect
 }
function using_ie() 
    { 
        $u_agent = $_SERVER['HTTP_USER_AGENT']; 
        $ub = False; 
        if(preg_match('/MSIE/i',$u_agent)) 
        { 
            $ub = True; 
        } 

        return $ub; 
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T04:50:54.043

您可以使用[`strpos`](http://php.net/manual/en/function.strpos.php)函数在字符串中搜索`MSIE`. 前任，

```
if (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false) {
  header('Location: /index-ie.php');
  exit;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T04:51:49.957

获取有关用户浏览器的所有信息——

```
<?php
echo $_SERVER['HTTP_USER_AGENT'] . "\n\n";

$browser = get_browser(null, true);
print_r($browser);
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T04:52:21.787

试试这个 ：

```
函数使用_ie()
{
    $u_agent = $_SERVER['HTTP_USER_AGENT'];
    $ub = 假；
    if(preg_match('/MSIE/i',$u_agent))
    {
        $ub = 真；
    }

    返回 $ub;
}

```

如果它是 Internet Explorer，您将获得价值 1。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-22T04:52:06.310

希望这有效：

```
 $user_agent = $_SERVER['HTTP_USER_AGENT'];

     if(preg_match('MSIE',$user_agent))
     {
       header('Location: https://'. $_SERVER['HTTP_HOST'] .'/index.php']);
     } 
```

# css - 在 Flash 视频嵌入后面显示的 css 水平下拉菜单 wordpress

> ID：11150337
> 
> 赞同：0
> 
> 时间：2012-06-22T04:47:37.357
> 
> 标签：css, wordpress, drop-down-menu, flash-video

这是网站：

[http://ivideez.com/](http://ivideez.com/)

如您所见，我的下拉菜单隐藏在视频后面；我如何才能在视频上下拉。

我要向 css 添加什么？我试过溢出，位置，z-index，我卡住了，有什么建议吗？我更喜欢跨浏览器的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:01:10.680

使用嵌入的 wmode 属性透明，如下所示：-

```
wmode=transparent 
```

我希望它会有所帮助.. !!

附言

有关更多详细信息：-[请参阅此处](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T04:57:31.583

我曾经遇到过同样的问题，我通过将 z-index 应用于主容器来解决它。尝试将 z-index 值提供给包含下拉菜单的父容器，而不是直接将其提供给 .. 还将 z-index 提供给值应该更小的 flash 视频..

# objective-c - 如何使用 ScriptingBridge 保存当前的 Safari 选项卡

> ID：11150339
> 
> 赞同：1
> 
> 时间：2012-06-22T04:47:45.070
> 
> 标签：objective-c, safari, scripting-bridge

我正在尝试使用脚本桥来告诉 Safari 将当前页面保存为 PDF

在“Safari.h”头文件中存在一个SafariItem类的保存方法：

```
- (void) saveAs:(NSString *)as in:(NSURL *)in_; 
```

所以我使用了这个，但它不起作用：

```
[safariCurrentTab saveAs:@".PDF" in:filePath]; 
```

后来我注意到safari.app的打印选项里有另存为PDF，所以我尝试使用这个功能

```
- (void) print:(NSURL *)x printDialog:(BOOL)printDialog withProperties:(SafariPrintSettings *)withProperties; 
```

但是，当我尝试初始化一个 SafariPrintSettings 对象时，它导致了编译错误：

```
Undefined symbols for architecture x86_64:
"_OBJC_CLASS_$_SafariPrintSettings", referenced from:
  objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

似乎编译器没有找到那个类，但我确实包含了头文件并添加了 ScriptingBridge 框架

任何人都可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T01:28:28.247

所以既不`saveAs:`也不`SafariPrintSettings`行。

Safari 应用程序中的“另存为...”功能仅提供 HTML，而 Scripting Bridge 只会为您提供这些选项。这是要记住的事情：Scripting Bridge 是一种自动化您将在界面中执行的操作的方法。

“打印到 PDF”除外。没有用于生成 PDF 的打印机对象。OS X 调用一个（或多个，很难说）实用程序将 HTML 转换为 PDF。

# 可能的解决方案使用`NSTask`

`/System/Libary/Printers/Libraries/`你会发现（不要与`convert`系统范围的 ImageMagick 转换混淆......它们不一样！）。如果你想走这条路，*你必须先将页面保存为 HTML 文件*，然后你可以使用它`NSTask`来运行`convert`命令，如下所示：

```
NSTask *convert = [[NSTask alloc] init];
[convert setLaunchPath:@"/System/Libary/Printers/Libraries/convert"];
[convert setArguments:[NSArray arrayWithObjects:@"-f",@"fileYouSaved.html",@"-o","foo.pdf",nil]];
//set output and so on...
[convert launch];
//this runs the command as if it were "convert -f fileYouSaved.html -o foo.pdf" 
```

But it seems flaky; some elements were left hanging off the "printable" page on some of the wider websites I tried.

# Easiest possible solution

There is a third-party command line app/Ruby gem that might remove a lot of work called `wkpdf`. You would simply execute:

`wkpdf --source http://www.apple.com --output apple.pdf`

and it would grab the page online and do what you need. Alternatively, once you've installed it on your system, you can also call it in your app using `NSTask`, if you have more steps you need to take with the PDF file.

You can find `wkpdf` here: [http://plessl.github.com/wkpdf/](http://plessl.github.com/wkpdf/)

# java - Servlet IP 过滤器

> ID：11150340
> 
> 赞同：3
> 
> 时间：2012-06-22T04:48:00.093
> 
> 标签：java, servlets, maven, servlet-filters, jboss7.x

我在 jboss 中将我的 Web 应用程序部署为 7.1.1

我想在我的 web.xml 中添加一个基于 ip 的过滤器，就像这样

```
<filter>
<filter-name>Ip Filter</filter-name>
<filter-class>Class name</filter-class>
<allow-list></allow-list>
</filter-name> 
```

我发现了一些像[这样](https://community.jboss.org/wiki/LimitAccessToCertainClients)的过滤器，但是因为我使用 maven，所以我希望有一个在 maven 存储库中可用的过滤器，我可以在我的 pom 中添加依赖项并开始在我的 web.xml 中使用
你能指出一些现有的吗我可以使用的经过良好测试的 servlet ip 过滤器实现（希望它在 maven 存储库中可用）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:51:03.087

您链接的页面包含 RemoteHostFilter.java 文件。只需将它放在您的 src/main/java 文件夹中（当然在正确的包中），您就可以使用它了。因为它似乎是一个单一的类，这将是使用它的最简单方法。

你需要一个像nexus、artifactory或archiva这样的maven代理。在那里，您可以上传公共存储库中不可用的第三方 jar。

# python - 本地 Flask 服务器上的慢请求

> ID：11150343
> 
> 赞同：93
> 
> 时间：2012-06-22T04:48:28.290
> 
> 标签：python, flask

刚开始在本地服务器上使用 Flask，我注意到请求/响应时间比我认为的要慢得多。

像下面这样一个简单的服务器需要将近 5 秒的时间来响应。

```
from flask import Flask

app = Flask(__name__)

@app.route("/")
def index():
    return "index"

if __name__ == "__main__":
    app.run() 
```

有任何想法吗？或者这就是本地服务器的样子？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-06-22T05:56:06.353

好的，我想通了。这似乎是支持 ipv6 的 Werkzeug 和操作系统的问题。

从 Werkzeug 网站[http://werkzeug.pocoo.org/docs/serving/](http://werkzeug.pocoo.org/docs/serving/)：

> 在支持 ipv6 并对其进行配置的操作系统上，例如现代 Linux 系统、OS X 10.4 或更高版本以及 Windows Vista，如果访问本地服务器，某些浏览器可能会非常缓慢。原因是有时“localhost”被配置为在 ipv4 和 ipv6 socktes 上都可用，一些浏览器会尝试先访问 ipv6，然后再访问 ivp4。

所以解决方法是通过从我的主机文件中注释掉以下行来从 localhost 禁用 ipv6：

```
::1             localhost 
```

一旦我这样做，延迟问题就会消失。

我真的在挖掘 Flask，我很高兴这不是框架的问题。我知道不可能。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2015-02-28T00:30:14.347

将“threaded=True”作为参数添加到 app.run()，如下所示：http: [//arusahni.net/blog/2013/10/flask-multithreading.html](http://arusahni.net/blog/2013/10/flask-multithreading.html)

例如：`app.run(host="0.0.0.0", port=8080, threaded=True)`

禁用 ipv6 的解决方案对我不起作用，但确实如此。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-04-27T04:39:22.017

**@sajid-siddiqi 的解决方案在技术上是正确的，但请记住Werkzeug**中的内置*WSGI*服务器（打包到**Flask**中并用于它的用途）只是单线程的。****`app.run()`****

 ****安装*WSGI*服务器以能够处理多线程行为。我对各种*WSGI*服务器性能进行了大量研究。您的需求可能会有所不同，但如果您使用的只是**Flask**，那么我会推荐以下网络服务器之一。

更新（2020-07-25）：**gevent**似乎在5 年前开始支持*python3 ，在我评论它不支持之后不久，所以你现在可以使用***gevent**。

**事件**

您可以通过**pip**使用 command或**pip3**使用 command安装**gevent**。有关如何相应修改代码的说明如下：[https ://flask.palletsprojects.com/en/1.1.x/deploying/wsgi-standalone/#gevent](https://flask.palletsprojects.com/en/1.1.x/deploying/wsgi-standalone/#gevent)**`pip install gevent`**`pip3 install gevent`****

 ******梅海尔德**

**gevent**更好，但从我看过的所有涉及真实世界测试的基准测试来看，**meinheld**似乎是最直接、最简单的*WSGI*服务器。（如果您不介意更多配置，也可以查看**uWSGI 。）**

您也可以使用命令通过**pip3安装****meinheld**。从那里，查看**meinheld**源中提供的示例以集成**Flask**：[https ://github.com/mopemope/meinheld/blob/master/example/flask_sample.py](https://github.com/mopemope/meinheld/blob/master/example/flask_sample.py)**`pip3 install meinheld`**

 *******注意：根据我对*PyCharm*的使用，该行`from meinheld import server`突出显示为错误，但服务器将运行，因此您可以忽略该错误。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2020-02-01T14:09:08.960

而不是调用`http://localhost:port/endpoint`call `http://127.0.0.1:port/endpoint`。这为我消除了最初的 500 毫秒延迟。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-07-01T18:01:52.463

我的问题已通过“线程 = True”解决，但我想提供一些背景信息以将我的问题与其他可能无法解决的问题区分开来。

1.  我的问题仅在使用 python3 运行 Flask 时出现。切换到python2，我不再遇到这个问题。
2.  我的问题仅在使用 Chrome 访问 api*时才*出现，此时 Chrome 显示了预期的屏幕，但其他所有内容都挂起（curl、ffx 等），直到我重新加载或关闭 Chrome 选项卡，此时其他所有内容都在等待周围返回了一个结果。

我最好的猜测是 Chrome 试图保持会话打开，而 Flask 阻止了后续请求。一旦来自 Chrome 的连接停止或重置，其他所有内容都会被处理。

就我而言，线程修复了它。当然，我现在正在浏览其他人提供的一些链接，以确保它不会导致任何其他问题。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-06-18T18:46:08.060

`threaded=True`对我有用，但最后我发现问题是由于 Firefox 上的 foxyproxy 造成的。因为当烧瓶应用程序在本地主机上运行时，如果

*   在 firefox 上启用了 foxyproxy

反应慢不会发生，如果

*   foxyproxy 在 firefox 上被禁用

*   使用其他浏览器访问网站

我找到的唯一解决方案是禁用 foxyproxy，尝试将 localhost 添加到代理黑名单并调整设置，但它们都不起作用。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-10T08:44:51.240

我使用 Miheko 的回复来解决我的问题。

`::1 localhost`已经在我的主机文件中注释掉了，并且设置`Threaded=true`对我不起作用。每个 REST 请求都需要 1 秒的时间来处理，而不是即时处理。

我正在使用 python 3.6，并且通过使烧瓶使用 gevent 作为其 WSGI，我使烧瓶能够快速响应 REST 请求。

要使用 gevent，请安装它`pip install gevent`

之后，我使用[https://gist.github.com/viksit/b6733fe1afdf5bb84a40#file-async_flask-py-L41](https://gist.github.com/viksit/b6733fe1afdf5bb84a40#file-async_flask-py-L41)将烧瓶设置为使用 gevent。

万一链接断开，这是脚本的重要部分：

```
from flask import Flask, Response
from gevent.pywsgi import WSGIServer
from gevent import monkey

# need to patch sockets to make requests async
# you may also need to call this before importing other packages that setup ssl
monkey.patch_all()

app = Flask(__name__) 

# define some REST endpoints... 

def main():

    # use gevent WSGI server instead of the Flask
    # instead of 5000, you can define whatever port you want.
    http = WSGIServer(('', 5000), app.wsgi_app) 

    # Serve your application
    http.serve_forever()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-28T01:54:03.313

我在其他主机上运行时也遇到了这个错误`localhost`，所以对于某些不同的潜在问题可能会表现出相同的症状。

我把我一直在使用的大部分东西都换成了 Tornado，有趣的是它帮助了很多。我有一些缓慢的页面加载，但事情似乎通常更具响应性。此外，非常轶事，但我似乎注意到单独的 Flask 会随着时间的推移而减慢，但 Flask + Tornado 则不那么慢。我想象使用 Apache`mod_wsgi`会让事情变得更好，但 Tornado 的设置非常简单（参见[http://flask.pocoo.org/docs/deploying/others/](http://flask.pocoo.org/docs/deploying/others/)）。

（另外，一个相关的问题：[Flask 应用程序偶尔挂起](https://stackoverflow.com/questions/13333684/flask-app-occasionally-hanging)）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-07T05:18:48.173

我在这里有一个不同的解决方案。我刚刚`.pyc`从服务器的目录中删除了所有内容并重新启动它。顺便说一句， localhost 已经在我的主机文件（Windows 8）中被注释掉了。

服务器一直在冻结，现在它又可以正常工作了。**************

# c# - 将 NMock2 中的 UT 转换为 Moq。另外，NMock2 中的 .Will() 代表什么？

> ID：11150347
> 
> 赞同：1
> 
> 时间：2012-06-22T04:49:11.040
> 
> 标签：c#, unit-testing, mocking, moq, nmock2

我是 NMock2 和 Moq 框架的新手。我需要一些帮助将我当前项目中的 NMock2 代码转换为 Moq 代码：

```
var myMock= myMockery.NewMock<IMyInterface>();
var myRoleMock = myMockery.NewMock<IRoleInterface>();
var acceptAction = new MyAcceptAction(myRoleMock);
Stub.On(myMock).Method("Accept").Will(acceptAction); 
```

我也不清楚`Will()`上面的代码代表什么。我确实有一个想法，`Will(Return.Value(something))`在 NMock2 中相当于`Returns(something)`在 Moq 中。

那么`Will(something)`和`Will(Return.Value(something))`一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:02:02.627

要知道区别，我们必须进行一些调查。让我们看一下幕后，`Will`方法的签名如下：

```
public void Will(params IAction[] actions) 
```

现在，该`IAction`接口派生自一个特别重要的接口，即`IInvokable`. 顾名思义，这允许调用实现者（通过`Invoke`方法）。它有什么关系`Return.Value`？

```
public class Return
{
    public static IAction Value(object result)
    { 
        return new ReturnAction(result);
    }
} 
```

再深入一点，我们可以发现`ReturnAction`在它的`Invoke`方法中简单地设置返回值以供模拟使用/预期。然而，这不是重点。`Return.Value`是创建`IAction`所需的简单包装器`Will`。

您`MyAcceptAction`还必须实现此接口；知道到底发生了什么

```
Stub.On(myMock).Method("Accept").Will(acceptAction); 
```

行，您将不得不检查如何`MyAcceptAction`实施。特别是`Invoke`方法。

# android - android listview null pointer

> ID：11150356
> 
> 赞同：0
> 
> 时间：2012-06-22T04:51:02.053
> 
> 标签：android, listview, nullpointerexception

**Solution: Make sure nothing is null!**

I have a ListView throwing a NullPointerException, and I can't find out what I'm doing wrong.

The error occurs when I scroll to the bottom of the ListView

My code is at: [BluetoothChat.java](https://github.com/awinograd/Mp3Remote/blob/master/src/com/winograd/mp3remote/BluetoothChat.java)

The relevant portion (where I mess w/the adapter):

```
songs = cmd.songs;
mAdapter = new ArrayAdapter(
    this,
    android.R.layout.simple_list_item_1,
    songs);
mAdapter.notifyDataSetChanged();
library.setAdapter(mAdapter); 
```

Logcat:

```
E/BluetoothChat(11304): +++ ON CREATE +++
E/BluetoothChat(11304): ++ ON START ++
E/BluetoothChat(11304): + ON RESUME +
E/BluetoothChat(11304): - ON PAUSE -
E/BluetoothService.cpp(  229): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
E/BluetoothChat(11304): + ON RESUME +
E/BluetoothService.cpp(  229): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
E/BluetoothEventLoop.cpp(  229): onCreateDeviceResult: D-Bus error: org.bluez.Error.AlreadyExists (Already Exists)
E/BluetoothService.cpp(  229): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
E/BluetoothChatService(11304): accept() failed
E/BluetoothChatService(11304): java.io.IOException: Operation Canceled
E/BluetoothChatService(11304): at android.bluetooth.BluetoothSocket.acceptNative(Native Method)
E/BluetoothChatService(11304): at android.bluetooth.BluetoothSocket.accept(BluetoothSocket.java:311)
E/BluetoothChatService(11304): at android.bluetooth.BluetoothServerSocket.accept(BluetoothServerSocket.java:113)
E/BluetoothChatService(11304): at android.bluetooth.BluetoothServerSocket.accept(BluetoothServerSocket.java:99)
E/BluetoothChatService(11304): at com.winograd.mp3remote.BluetoothChatService$AcceptThread.run(BluetoothChatService.java:257)
W/dalvikvm(11304): threadid=1: thread exiting with uncaught exception (group=0x40a391f8)
E/AndroidRuntime(11304): FATAL EXCEPTION: main
E/AndroidRuntime(11304): java.lang.NullPointerException
E/AndroidRuntime(11304): at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
E/AndroidRuntime(11304): at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
E/AndroidRuntime(11304): at android.widget.AbsListView.obtainView(AbsListView.java:2037)
E/AndroidRuntime(11304): at android.widget.ListView.makeAndAddView(ListView.java:1772)
E/AndroidRuntime(11304): at android.widget.ListView.fillDown(ListView.java:672)
E/AndroidRuntime(11304): at android.widget.ListView.fillGap(ListView.java:636)
E/AndroidRuntime(11304): at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4581)
E/AndroidRuntime(11304): at android.widget.AbsListView.scrollIfNeeded(AbsListView.java:2877)
E/AndroidRuntime(11304): at android.widget.AbsListView.onTouchEvent(AbsListView.java:3131)
E/AndroidRuntime(11304): at android.view.View.dispatchTouchEvent(View.java:5541)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1951)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1712)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
E/AndroidRuntime(11304): at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
E/AndroidRuntime(11304): at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
E/AndroidRuntime(11304): at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
E/AndroidRuntime(11304): at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
E/AndroidRuntime(11304): at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
E/AndroidRuntime(11304): at android.view.View.dispatchPointerEvent(View.java:5721)
E/AndroidRuntime(11304): at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
E/AndroidRuntime(11304): at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
E/AndroidRuntime(11304): at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
E/AndroidRuntime(11304): at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
E/AndroidRuntime(11304): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(11304): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(11304): at android.app.ActivityThread.main(ActivityThread.java:4575)
E/AndroidRuntime(11304): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(11304): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(11304): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(11304): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(11304): at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  229):   Force finishing activity com.winograd.mp3remote/.BluetoothChat
W/ActivityManager(  229): Activity pause timeout for ActivityRecord{4188fd40 com.winograd.mp3remote/.BluetoothChat}
E/LockScreen(  229): NameNotFoundException: [**null**]
W/InputManagerService(  229): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@474adcd0
E/LockScreen(  229): NameNotFoundException: [**null**]
W/IInputConnectionWrapper( 9205): getExtractedText on inactive InputConnection
W/IInputConnectionWrapper( 9205): getExtractedText on inactive InputConnection
W/IInputConnectionWrapper( 9205): getTextBeforeCursor on inactive InputConnection
W/IInputConnectionWrapper( 9205): getTextAfterCursor on inactive InputConnection
W/IInputConnectionWrapper( 9205): getExtractedText on inactive InputConnection
W/IInputConnectionWrapper( 9205): getTextBeforeCursor on inactive InputConnection
W/IInputConnectionWrapper( 9205): getTextAfterCursor on inactive InputConnection
W/IInputConnectionWrapper( 9205): beginBatchEdit on inactive InputConnection
W/IInputConnectionWrapper( 9205): endBatchEdit on inactive InputConnection
W/IInputConnectionWrapper( 9205): getExtractedText on inactive InputConnection
W/IInputConnectionWrapper( 9205): getTextBeforeCursor on inactive InputConnection
W/IInputConnectionWrapper( 9205): getTextAfterCursor on inactive InputConnection
W/IInputConnectionWrapper( 9205): beginBatchEdit on inactive InputConnection
W/IInputConnectionWrapper( 9205): endBatchEdit on inactive InputConnection
W/IInputConnectionWrapper( 9205): getExtractedText on inactive InputConnection
W/ActivityManager(  229): Activity destroy timeout for ActivityRecord{4188fd40 com.winograd.mp3remote/.BluetoothChat}
E/LockScreen(  229): NameNotFoundException: [**null**]
E/LockScreen(  229): NameNotFoundException: [**null**]
W/InputManagerService(  229): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@461df6d0
E/BluetoothChat(11327): +++ ON CREATE +++
E/BluetoothChat(11327): ++ ON START ++
E/BluetoothChat(11327): + ON RESUME +
E/BluetoothChat(11327): - ON PAUSE -
E/BluetoothService.cpp(  229): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
E/BluetoothChat(11327): + ON RESUME +
E/BluetoothService.cpp(  229): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
E/BluetoothEventLoop.cpp(  229): onCreateDeviceResult: D-Bus error: org.bluez.Error.AlreadyExists (Already Exists)
E/BluetoothService.cpp(  229): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)
E/BluetoothChatService(11327): accept() failed
E/BluetoothChatService(11327): java.io.IOException: Operation Canceled
E/BluetoothChatService(11327): at android.bluetooth.BluetoothSocket.acceptNative(Native Method)
E/BluetoothChatService(11327): at android.bluetooth.BluetoothSocket.accept(BluetoothSocket.java:311)
E/BluetoothChatService(11327): at android.bluetooth.BluetoothServerSocket.accept(BluetoothServerSocket.java:113)
E/BluetoothChatService(11327): at android.bluetooth.BluetoothServerSocket.accept(BluetoothServerSocket.java:99)
E/BluetoothChatService(11327): at com.winograd.mp3remote.BluetoothChatService$AcceptThread.run(BluetoothChatService.java:257)
W/dalvikvm(11327): threadid=1: thread exiting with uncaught exception (group=0x40a391f8)
E/AndroidRuntime(11327): FATAL EXCEPTION: main
E/AndroidRuntime(11327): java.lang.NullPointerException
E/AndroidRuntime(11327): at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
E/AndroidRuntime(11327): at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
E/AndroidRuntime(11327): at android.widget.AbsListView.obtainView(AbsListView.java:2037)
E/AndroidRuntime(11327): at android.widget.ListView.makeAndAddView(ListView.java:1772)
E/AndroidRuntime(11327): at android.widget.ListView.fillDown(ListView.java:672)
E/AndroidRuntime(11327): at android.widget.ListView.fillGap(ListView.java:636)
E/AndroidRuntime(11327): at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4581)
E/AndroidRuntime(11327): at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:3848)
E/AndroidRuntime(11327): at android.os.Handler.handleCallback(Handler.java:605)
E/AndroidRuntime(11327): at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(11327): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(11327): at android.app.ActivityThread.main(ActivityThread.java:4575)
E/AndroidRuntime(11327): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(11327): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(11327): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(11327): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(11327): at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  229):   Force finishing activity com.winograd.mp3remote/.BluetoothChat
W/ActivityManager(  229): Activity pause timeout for ActivityRecord{473f2238 com.winograd.mp3remote/.BluetoothChat}
W/ResourceType(  229): Invalid package identifier when getting bag for resource number 0x7f0c0009
W/InputManagerService(  229): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@43c28e60
W/ActivityManager(  229): Activity destroy timeout for ActivityRecord{473f2238 com.winograd.mp3remote/.BluetoothChat} 
```

Any help/tip is greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:54:08.380

as the error is in ArrayAdapter.`getView`(ArrayAdapter.java:362) so looks any of the element of songs is null, as ArrayAdapter uses element.toString() in the getView function..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:47:58.557

before calling notifyDataSetChanged() check whether the adapter is null or not..

# c - DirSync 页面大小选项

> ID：11150357
> 
> 赞同：0
> 
> 时间：2012-06-22T04:51:16.343
> 
> 标签：c, active-directory, adsi

在我的应用程序中，我需要使用活动目录执行 DirSync。但是，在我的搜索首选项中，当我尝试为页面大小提供搜索首选项参数时，它向我发送了一个错误（0x80005008，ADS_BAD_PARAMETER）。如果我不给它，它工作正常。我在下面给出代码片段：

```
HRESULT DoDirSyncSearch(
            LPWSTR pszSearchFilter,  //  Search filter.
            LPWSTR *pAttributeNames, //  Attributes to retrieve.
            DWORD dwAttributes,      //  Number of attributes.
            PUCHAR *ppCookie,        //  Pointer to previous cookie.
            PULONG pulCookieLength,  //  Length of previous cookie.
            LPWSTR szDC)             //  Name of DC to bind to.
{
    IADs *pRootDSE = NULL;
    IDirectorySearch *pSearch = NULL;
    ADS_SEARCH_HANDLE hSearch = NULL;
    ADS_SEARCHPREF_INFO arSearchPrefs[4];
    ADS_PROV_SPECIFIC dirsync;
    ADS_SEARCH_COLUMN col;
    HRESULT hr = S_OK;
    VARIANT var;
    BOOL bUpdate = FALSE;
    DWORD dwCount = 0;
    BOOL noMoreData = false;
    DWORD dwError = ERROR_SUCCESS;
    WCHAR szError[512];
    WCHAR szProvider[512];

    //  Validate input parameters.
    if (!pulCookieLength || !ppCookie || !szDC) 
    {
        wprintf(L"Invalid parameter.\n");
        return E_FAIL;
    }

    LPOLESTR szDSPath = new OLECHAR[MAX_PATH];
    LPOLESTR szServerPath = new OLECHAR[MAX_PATH];
    VariantInit(&var);

    //  If cookie is non-NULL, this is an update. Otherwise, it is a full-read.
    if (*ppCookie)
        bUpdate = TRUE;
    CoInitialize(NULL);

    //  If there is a DC name from the previous USN sync, 
    //  include it in the binding string.
    if (szDC[0]) 
    {
        wcsncpy_s(szServerPath,MAX_PATH,L"LDAP://",MAX_PATH);
        wcsncat_s(szServerPath, MAX_PATH,szDC,MAX_PATH-wcslen(szServerPath));
        wcsncat_s(szServerPath, MAX_PATH,L"/",MAX_PATH-wcslen(szServerPath));
    }
    else
        wcsncpy_s(szServerPath, MAX_PATH,L"LDAP://",MAX_PATH);

    // Bind to root DSE.
    wcsncpy_s(szDSPath,MAX_PATH,szServerPath,MAX_PATH);
    wcsncat_s(szDSPath, MAX_PATH,L"rootDSE",MAX_PATH-wcslen(szDSPath));
    wprintf(L"RootDSE binding string: %s\n", szDSPath);
    hr = ADsGetObject(szDSPath, 
                  IID_IADs,
                  (void**)&pRootDSE);
    if (FAILED(hr)) 
    {
        wprintf(L"failed to bind to rootDSE: 0x%x\n", hr);
        goto cleanup;
    }

    //  Save the name of the DC connected to in order to connect to 
    //  the same DC on the next dirsync operation.
    if (! szDC[0])
    {
        hr = pRootDSE->Get(CComBSTR("DnsHostName"), &var);
        wcsncpy_s(szServerPath,MAX_PATH,L"LDAP://",MAX_PATH);
        wcsncat_s(szServerPath, MAX_PATH,var.bstrVal, MAX_PATH-wcslen(szServerPath));
        wcsncat_s(szServerPath, MAX_PATH,L"/", MAX_PATH-wcslen(szServerPath));
    }

    //  Get an IDirectorySearch pointer to the root of the domain partition.
    hr = pRootDSE->Get(CComBSTR("defaultNamingContext"), &var);
    wcsncpy_s(szDSPath,MAX_PATH,szServerPath,MAX_PATH);
    wcsncat_s(szDSPath, MAX_PATH,var.bstrVal, MAX_PATH - wcslen(szDSPath));
    hr = ADsGetObject(szDSPath, IID_IDirectorySearch, (void**) &pSearch);
    if (FAILED(hr)) 
    {
        wprintf(L"failed to get IDirectorySearch: 0x%x\n", hr);
        goto cleanup;
    }

    while(noMoreData == false) {

        //  Initialize the structure to pass in the cookie.
        //  On the first call, the cookie is NULL and the length is zero.
        //  On later calls, the cookie and length are the values returned by 
        //  the previous call.
        dirsync.dwLength = *pulCookieLength;
        dirsync.lpValue = *ppCookie;
        arSearchPrefs[0].dwSearchPref = ADS_SEARCHPREF_SEARCH_SCOPE; 
        arSearchPrefs[0].vValue.dwType = ADSTYPE_INTEGER; 
        arSearchPrefs[0].vValue.Integer = ADS_SCOPE_SUBTREE; 
        arSearchPrefs[1].dwSearchPref = ADS_SEARCHPREF_DIRSYNC; 
        arSearchPrefs[1].vValue.dwType = ADSTYPE_PROV_SPECIFIC;
        arSearchPrefs[1].vValue.ProviderSpecific = dirsync;
        arSearchPrefs[2].dwSearchPref = ADS_SEARCHPREF_PAGESIZE; 
        arSearchPrefs[2].vValue.dwType = ADSTYPE_INTEGER;
        arSearchPrefs[2].vValue.Integer = 100;
        hr = pSearch->SetSearchPreference(arSearchPrefs, 3); // this is where error is happening

        if (FAILED(hr)) 
        {
            wprintf(L"failed to set search prefs: 0x%x\n", hr);
            goto cleanup;
        }

        // Search for the objects indicated by the search filter.
        hr = pSearch->ExecuteSearch(pszSearchFilter,
                        pAttributeNames, dwAttributes, &hSearch );
        if (FAILED(hr)) 
        {
            wprintf(L"failed to set execute search: 0x%x\n", hr);
            goto cleanup;
        }

        //  Loop through the rows of the search result
        //  Each row is an object that has changed since the previous call.

        hr = pSearch->GetNextRow(hSearch);

        while ( SUCCEEDED(hr) && hr != S_ADS_NOMORE_ROWS )
        {
            hr = pSearch->GetColumn( hSearch, L"distinguishedName", &col );
            if ( SUCCEEDED(hr) ) 
            {
                wprintf(L"Distinguished Name: %s\n",col.pADsValues->CaseIgnoreString);
                pSearch->FreeColumn( &col );
            }

            dwCount++;
            hr = pSearch->GetNextRow( hSearch);
        }

        ADsGetLastError(&dwError, szError, 512, szProvider, 512);
        if(ERROR_MORE_DATA == dwError) 
        {
            noMoreData = false;
            wprintf(L"Trying to get cookie...\n");
            wprintf(L"Page ends here...\n");
            hr = pSearch->GetColumn( hSearch, ADS_DIRSYNC_COOKIE, &col );
            if ( SUCCEEDED(hr) ) {
                if (col.dwADsType == ADSTYPE_PROV_SPECIFIC && col.pADsValues) 
                {
                    wprintf(L"Got cookie\n");
                    *pulCookieLength = col.pADsValues->ProviderSpecific.dwLength;
                    *ppCookie = (PUCHAR) AllocADsMem (*pulCookieLength);
                    memcpy(*ppCookie, col.pADsValues->ProviderSpecific.lpValue, 
                        *pulCookieLength);
                }
                pSearch->FreeColumn( &col );
            } else {
                wprintf(L"no cookie: 0x%x\n", hr);
                wprintf(L"Error!! More data available but could not continue because of error in cookie retrieval...\n");
                noMoreData = true;
            }
        }
        else
            noMoreData = true;
    }
    wprintf(L"dwCount: %d\n", dwCount);

    //  After looping through the results, get the cookie.
    if (hr == S_ADS_NOMORE_ROWS ) 
    {
        if (ppCookie != NULL)
        {
            // Free the existing heap allocation
            GlobalFree (*ppCookie);
        }

        wprintf(L"Trying to get cookie...\n");
        hr = pSearch->GetColumn( hSearch, ADS_DIRSYNC_COOKIE, &col );
        if ( SUCCEEDED(hr) ) {
            if (col.dwADsType == ADSTYPE_PROV_SPECIFIC && col.pADsValues) 
            {
                wprintf(L"Got cookie\n");
                *pulCookieLength = col.pADsValues->ProviderSpecific.dwLength;
                *ppCookie = (PUCHAR) AllocADsMem (*pulCookieLength);
                memcpy(*ppCookie, col.pADsValues->ProviderSpecific.lpValue, 
                    *pulCookieLength);
            }
            pSearch->FreeColumn( &col );
        } else
            wprintf(L"no cookie: 0x%x\n", hr);
    }

cleanup:
    if (pRootDSE)
        pRootDSE->Release();
    if (hSearch)
        pSearch->CloseSearchHandle(hSearch);
    if (pSearch)
        pSearch->Release();

    VariantClear(&var);
    CoUninitialize();
    delete [] szServerPath;
    delete [] szDSPath;

    return hr;
} 
```

如果我只给出 2 个首选项，即 Scope 和 DIRSYNC，那么该行

**hr = pSearch->SetSearchPreference(arSearchPrefs, 2);**

没有给出任何错误。

谁能帮助我为什么会这样。我已经检查了从 msdn 指定分页选项的方式：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa746414 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746414(v=vs.85).aspx)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-01T15:07:19.623

从[MSDN 链接](https://msdn.microsoft.com/en-us/library/windows/desktop/aa772290(v=vs.85).aspx)：

> `ADS_SEARCHPREF_DIRSYNC`
> 
> 指定目录同步 (DirSync) 搜索，该搜索返回自指定状态以来的所有更改。在 ADSVALUE 结构中，将 dwType 成员设置为 ADS_PROV_SPECIFIC。ProviderSpecific 成员是一个 ADS_PROV_SPECIFIC 结构，其 lpValue 成员指定一个 cookie，该 cookie 指示从中检索更改的状态。第一次使用 DirSync 控件时，将 ADS_PROV_SPECIFIC 结构的 dwLength 和 lpValue 成员分别设置为零和 NULL。在读取搜索返回的结果集直到 IDirectorySearch::GetNextRow 返回 S_ADS_NOMORE_ROWS 后，调用 IDirectorySearch::GetColumn 来检索 ADS_DIRSYNC_COOKIE 属性，该属性包含在下一次 DirSync 搜索中使用的 cookie。了解更多信息，请参阅使用 DirSync 控件和 LDAP_SERVER_DIRSYNC_OID 轮询更改。此标志不能与 ADS_SEARCHPREF_PAGESIZE 结合使用。调用者必须具有 SE_SYNC_AGENT_NAME 权限。

# jquery-mobile - 带有参数的 Jquerymobile 对话框

> ID：11150367
> 
> 赞同：0
> 
> 时间：2012-06-22T04:52:20.380
> 
> 标签：jquery-mobile

打开对话框时如何获取url参数？

示例文本

当对话框显示时，“ `window.location.hash`”是“ `#&ui-state=dialog`”它没有我的参数`name=abc`

如何将我的参数发送到对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:15:35.167

我最好的建议是使用服务器端而不是客户端脚本来获取 URL 参数。

# libssh2 - char buffer[0x4000] 在做什么？

> ID：11150370
> 
> 赞同：-2
> 
> 时间：2012-06-22T04:52:32.393
> 
> 标签：libssh2

libssh2.org 示例： [http ://www.libssh2.org/examples/ssh2_exec.html](http://www.libssh2.org/examples/ssh2_exec.html)

有一行：char buffer[0x4000];

这条线在做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:54:11.350

该代码分配了一个 16KiB 的缓冲区。`0x4000`十六进制表示 4000，十进制表示 16384。

# asp-classic - 从sql server导出到经典asp中的excel时dd/mmm/yyyy中的日期格式

> ID：11150373
> 
> 赞同：0
> 
> 时间：2012-06-22T04:52:46.383
> 
> 标签：asp-classic

在经典 asp 中将数据从 sql server 2000 导出到 Excel 时，我必须将日期格式设置为 dd-mmm-yyyy 即 01-JAN-2012，我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:02:31.837

看看这个查询的结果

```
SELECT REPLACE(CONVERT(varchar(50), GETDATE(), 106), ' ', '-') 
```

106 样式将数据转换为“dd mmm yyyy”格式，然后您可以用您喜欢的任何分隔符替换空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:39:02.330

试试这个功能（评论是德语，但功能并不难理解）

```
formatDate("%d-%M-%Y", now)

'******************************************************************************************************************
'' @SDESCRIPTION:   formatiert übergebenes Datum anhand eines FormatierungsStrings ähnlich wie in PHP...
'' @PARAM:          format [string]: Formatierungsstring mit fühhrendem %-Zeichen:
''                  %m - Monat mit f&uuml;hrender 0 (01 - 12)
''                  %n - Monat ohne f&uuml;hrende 0 (1 - 12)
''                  %F - Monatsname (Januar - Dezember)
''                  %M - Abk&uuml;rzung Monatsname (3 Zeichen) (Jan - Dez)
''                  %d - Tag mit f&uuml;hrender 0 (01 - 31)
''                  %j - Tag ohne f&uuml;hrende 0 (1 - 31)
''                  %h - Stunde mit f&uuml;hrender 0 (01 - 24)
''                  %H - Stunde ohne f&uuml;hrende 0 (1 - 24)
''                  %i - Minute mit f&uuml;hrender 0 (01 - 60)
''                  %I - Minute ohne f&uuml;hrende 0 (1 - 60)
''                  %s - Sekunde mit f&uuml;hrender 0 (01 - 60)
''                  %S - Sekunde ohne f&uuml;hrende 0 (1 - 60)
''                  %L - Nummers des Wochentages (1 - 7)
''                  %l - Wochentag (Sonntag - Samstag)
''                  %D - Abk&uuml;rzung des Wochentags (2 Zeichen) (So - Sa)
''                  %U - UNIX Timestamp
''                  %Y - Jahreszahl vierstellig (2006)
''                  %y - Jahreszahl zweistellig (06)
'' @PARAM:          intTimeStamp [long]: entweder ein UNIX timestamp oder ein VB Datum (Now()) oder 0
'' @RETURN:         [string] formatiertes Datum
'******************************************************************************************************************
public function formatDate(format, intTimeStamp)
    Dim unUDate
    Dim monthname(12)
    Dim currentLocale

    ' Monats Array
    monthname(1) = "Januar"
    monthname(2) = "Februar"
    monthname(3) = "M&auml;rz"
    monthname(4) = "April"
    monthname(5) = "Mai"
    monthname(6) = "Juni"
    monthname(7) = "Juli"
    monthname(8) = "August"
    monthname(9) = "September"
    monthname(10) = "Oktober"
    monthname(11) = "November"
    monthname(12) = "Dezember"

    ' GetLocale() liefert aktuelle CID zur&uuml;ck. Diese wird in currentLocal abgelegt.
    currentLocale = GetLocale()

    ' CID wird auf "deutsch" gesetzt
    Call SetLocale("de")

    If isDate(intTimeStamp) Then intTimeStamp = cdate(intTimeStamp)

    ' pr&uuml;fen, ob intTimeStamp g&uuml;ltig ist.
    ' wenn nicht, wird es als Datum interpretiert und in einen Unix timestamp umgewandelt
    If Not isNumeric(intTimeStamp) Then
        If isDate(intTimeStamp) Then
            'intTimeStamp = timestamp(intTimeStamp)
            intTimeStamp = cdate(intTimeStamp)
            intTimeStamp = DateDiff( "s", "01/01/1970 00:00:00", intTimeStamp )
        Else
            Response.Write "Ung&uuml;ltiges Datum"
            Exit Function
        End If
    End If

    ' wenn intTimeStamp 0 ist, wird aktuelles Datum und Zeit genommen, ansonsten wird aus intTimeStamp ein Datum gemacht
    If intTimeStamp = 0 Then
        unUDate = now()
    Else
        'unUDate = getDate(intTimeStamp)
        unUDate = DateAdd( "s", intTimeStamp, "01/01/1970 00:00:01" )
        unUDate = formatDate( unUDate, vbGeneralDate)
    End If
    unUDate = Trim(unUDate)

    'response.write unUDate
    'response.end

    Dim startM : startM = 1
    Dim startD : startD = InStr(startM, unUDate, ".")+1
    Dim startY : startY = InStr(startD, unUDate, ".")+1
    Dim startHour : startHour = InStr(startY, unUDate, " ")+1
    Dim startMin : startMin = InStr(startHour, unUDate, ":")+1
    Dim startSec : startSec = InStr(startMin+1, unUDate, ":")+1

    Dim dateMonth : dateMonth = Mid(unUDate, startD, ((startY - 1) - startD))
    Dim dateDay : dateDay = Mid(unUDate, 1, ((startD - 1) - 1))
    Dim dateYear : dateYear = Mid(unUDate, startY, 4)

    'response.write unUDate & "<br>" & startHour & "<br>" & startMin & "<br>"
    'response.end

    Dim dateHour : dateHour = Mid(unUDate, startHour, ((startMin - startHour) - 1))
    Dim dateMinute : dateMinute = Mid(unUDate, startMin, 2)
    Dim dateSecond : dateSecond = Mid(unUDate, InStr(startMin, unUDate, ":") + 1, 2)

    format = Replace(format, "%Y", Right(dateYear, 4))
    format = Replace(format, "%y", Right(dateYear, 2))
    format = Replace(format, "%m", dateMonth)
    format = Replace(format, "%n", CInt(dateMonth))
    format = Replace(format, "%F", monthname(CInt(dateMonth)))
    format = Replace(format, "%M", Left(monthname(CInt(dateMonth)), 3))
    format = Replace(format, "%d", dateDay)
    format = Replace(format, "%j", CInt(dateDay))
    format = Replace(format, "%h", Mid(unUDate, startHour, 2))
    format = Replace(format, "%H", CInt(dateHour))
    format = Replace(format, "%i", dateMinute)
    format = Replace(format, "%I", CInt(dateMinute))
    format = Replace(format, "%s", dateSecond)
    format = Replace(format, "%S", CInt(dateSecond))
    format = Replace(format, "%L", WeekDay(unUDate))
    format = Replace(format, "%D", Left(WeekDayName(WeekDay(unUDate)), 2))
    format = Replace(format, "%l", WeekDayName(WeekDay(unUDate)))
    format = Replace(format, "%U", intTimeStamp)

    ' CID wird wieder auf Ursprungswert gesetzt.
    Call SetLocale( currentLocale )
    formatDate = format
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:12:12.540

看看[如何在经典 asp 中转换日期字符串](https://stackoverflow.com/questions/91734/how-to-transform-a-date-string-in-classic-asp) 这可能会解决您的问题。

这里还有一个供参考： [How to convert string to datetime format classic asp](https://stackoverflow.com/questions/8710309/how-to-convert-string-to-datetime-format-classic-asp)

# c# - 检查模型在控制器之外是否有效

> ID：11150375
> 
> 赞同：21
> 
> 时间：2012-06-22T04:53:02.120
> 
> 标签：c#, asp.net-mvc-3, model, helper

我有一个辅助类，它传递了一个值数组，然后从我的模型传递给一个新类。我如何验证给这个类的所有值都是有效的？换句话说，我如何在非控制器类中使用 ModelState 的功能。

从控制器：

```
public ActionResult PassData()
{
    Customer customer = new Customer();
    string[] data = Monkey.RetrieveData();
    bool isvalid = ModelHelper.CreateCustomer(data, out customer);
} 
```

来自助手：

```
public bool CreateCustomer(string[] data)
{
    Customter outCustomer = new Customer();
    //put the data in the outCustomer var
    //??? Check that it's valid

} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-22T06:14:57.717

您可以在 ASP.NET 上下文之外使用数据注释验证：

```
public bool CreateCustomer(string[] data, out Customer customer)
{
    customer = new Customer();
    // put the data in the customer var

    var context = new ValidationContext(customer, serviceProvider: null, items: null);
    var results = new List<ValidationResult>();

    return Validator.TryValidateObject(customer, context, results, true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:21:18.423

不要在控制器之外使用 ModelState。我看不到 Monkey.RetrieveData() 做了什么，但一般来说，我不会将 a) 来自 HTTPRequest 的纯数据和 b) 无类型数据（如字符串数组）传递到后端。让 web 框架检查传入的数据并实例化类型的类以在后端使用。请注意，如果您手动应用数据，则必须手动检查 HTML 注入（XSS 脚本等）。

而是使用模型绑定器等并将类型数据（例如客户类实例）传递到您的后端。Scott Gu 有一篇较早的帖子显示了 MVC1：[http ://weblogs.asp.net/scottgu/archive/2008/09/02/asp-net-mvc-preview-5-and-form-posting-场景.aspx](http://weblogs.asp.net/scottgu/archive/2008/09/02/asp-net-mvc-preview-5-and-form-posting-scenarios.aspx)

在您的示例中，让 MVC 的模型绑定创建您的客户并应用所需的字段值（请参阅上面的链接该模式如何工作）。然后，您将 Customer 实例提供给后端，在该后端可以根据您键入的 Customer 实例（例如手动或使用数据注释）进行额外的验证检查。

# php - PHP：从 AAC 文件中读取 MusicBrainz 标签

> ID：11150386
> 
> 赞同：1
> 
> 时间：2012-06-22T04:54:16.900
> 
> 标签：php, aac, musicbrainz

有谁知道从 AAC 文件中读取 MusicBrainz 标签（曲目、发行和艺术家的 MBID）的简单方法？

如果有外部二进制文件，它必须是命令行。这只会在我的 Mac 上运行。

我已经尝试了显而易见的事情：

*   搜索直接问题。
*   谷歌搜索更通用的解决方案，如“命令行 musicbrainz”

有许多程序是 GUI 的，但我找不到纯命令行实现的程序。我不需要写能力，只需要阅读标签。

谢谢

# css - 如何在 djangos 的平面页面中提供 css 文件？

> ID：11150387
> 
> 赞同：4
> 
> 时间：2012-06-22T04:54:23.207
> 
> 标签：css, django, django-templates, hyperlink, django-flatpages

我正在构建一个基本站点，并考虑将 flatpages 应用程序用于几个页面。问题是，我不确定如何在我的平面页面中提供静态文件。我的平面模板中的链接是这样的：

```
 <link type="text/css" rel="stylesheet" href="static/base.css" /> 
```

但是，萤火虫显示正在查看该文件：

```
 localhost:8000/example_flatpage/static/base.css 
```

代替

```
 localhost:8000/static/base.css 
```

事实上，模板中的每个链接都是这样工作的。而不是 localhost:8000/home/

```
 localhost:8000/example_flatpage/home/ 
```

这是我的默认平面模板：

```
 <html><head>
  <title>title</title>
  <link type="image/x-icon" rel="icon" href="static/favicon.ico" />
  <link type="text/css" rel="stylesheet" href="static/base.css" />
  </head>
  <body>
  mainly plain text
  </body>
  </html> 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T06:14:55.253

使用`"/static/base.css"`而不是`"static/base.css"`. 第一种是相对于 root 的路径`'/'`，而第二种形式是相对于当前页面的路径。

# javascript - 使用 jquery Ajax 处理动态 HTTP Content-Type

> ID：11150391
> 
> 赞同：0
> 
> 时间：2012-06-22T04:54:50.770
> 
> 标签：javascript, jquery, perl, http

我有一个 perl 脚本 URL，它给了我一个 ZIP 文件，它处理数据并在 http-header 中动态设置`Content-Type`为。`'application/zip'`

Perl 代码如下所示：

```
WPHTTPResponse::setHeader( 'Content-disposition', 'attachment;filename="test.zip"');
WPHTTPResponse::setHeader( 'Content-type', 'application/zip');  
print $result; 
```

在前端，我直接在 HREF 中使用这个脚本：

```
 <a href="/script">Download</a> 
```

`$result`但是如果在 perl 脚本中为 NULL，我需要显示警报消息。

我在想的是：`Content-Type=>application/zip`如果 $result 不为空，我将发送文件，否则我将发送 JSON 响应，其中包含没有文件可下载的错误消息。

为此，我需要使用 JS 动态检查内容类型：

```
$.ajax({
  url: '/script',
  data: {....},
  success: function(response) {
     if(response.contentType == 'application/zip'){
        //download using javascript
     }
     else{
        $.parseJSON(response);
        alert(response.msg);
     }
  }
}); 
```

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:42:01.617

尽管您的方法应该有效，但在这种情况下，使用 HTTP 错误代码可能是一个不错的选择。

根据 $result 为 null 的原因，其中之一应该是合适的。

```
400 Bad Request
406 Not Acceptable
410 Gone 
```

这将使您的代码更加“明显”，因为您将使用 HTTP 状态来准确地表达它的含义，而不是在代码中以专有方式重新实现完全相同的东西。恕我直言，它还会使您的代码更易于维护，因为它将成功与错误分开。

您仍然可以将 JSON 作为错误响应的一部分包含在内，以便能够显示有关请求未导致任何数据返回到客户端的确切原因的信息。

顺便说一句，我会避免使用 404 作为错误代码，即使它在技术上是最“合适”的代码，只是因为如果发生真正的 404 错误会引起混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:51:43.650

下载前使用`HEAD`-request 检查内容大小。

客户端：

*   将`click`-event 处理程序附加到 -element `<a>`。
*   On `click`-event 发送`HEAD`-request throw `XHR`。
*   响应`XHR`检查内容大小。
*   如果大小为零，则显示警报并阻止默认事件处理程序。
*   如果大小不为零，则无事可做。

服务器端：

*   根据请求计算内容大小`HEAD`。

# perl - dbix::class 在更新或插入之前修改列数据

> ID：11150393
> 
> 赞同：0
> 
> 时间：2012-06-22T04:54:58.633
> 
> 标签：perl, encryption, catalyst, dbix-class

我正在使用 dbix::class 和催化剂与我的数据库进行交互。但是，我存储的一些数据是敏感的，所以我想在它进入数据库之前加密（插入或更新）并在它出来时解密（选择）。我知道如何使用这个模块：`DBIx::Class::PassphraseColumn`你可以在将密码放入数据库时​​自动加密密码，方法是将它放在你的模式文件中：

```
__PACKAGE__->add_columns(
    '+password' => {
        passphrase       => 'rfc2307',
        passphrase_class => 'BlowfishCrypt',
        passphrase_args  => {
            cost        => 14,
            salt_random => 20,
        },
        passphrase_check_method => 'check_password',
    }
); 
```

因此，无论何时您更新密码，您都不必担心对其进行加密，DBIx 会为您完成。是否有一种类似的方式，每当我在列中插入或更新一个值时，它会为我加密它，而每当我选择它时，它会为我解密？或者，也许有一种方法可以添加在插入或更新之前或在选择之后调用的方法，让您有机会操作数据？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:53:50.880

看看[列访问器重载](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aManual%3a%3aCookbook#Wrapping-overloading-a-column-accessor)。如果 @_ 不为空，您可以加密数据，并在返回值时解密。我已经修改了该页面上的示例以更好地满足您的需求：

```
__PACKAGE__->add_columns(description => { accessor => '_description' });

sub description {
    my $self = shift;

    # If there is an update to the column, encrypt it before calling the original accessor
    return $self->_description(encrypt($_[0])) if @_;

    # Fetch and decrypt the column value.
    return decrypt($self->_description);
} 
```

您仍然需要指定 encrypt() 和 decrypt()，但这可以帮助您完成大部分工作。

# c# - 使用 C++ 和 C# / VB.NET 中的环境变量搜索 ProgramFiles 和 ProgramFiles(x86)

> ID：11150400
> 
> 赞同：3
> 
> 时间：2012-06-22T04:56:22.517
> 
> 标签：c#, c++, vb.net, environment-variables, wow64

> **可能重复：**
> [C# - 如何在 Windows Vista 64 位上获取程序文件 (x86)](https://stackoverflow.com/questions/194157/c-sharp-how-to-get-program-files-x86-on-windows-vista-64-bit)

我正在尝试从我自己的第三方程序中启动。我在`Program Files`and中进行了快速搜索`Program Files (x86)`，我刚刚意识到返回的路径`getenv("ProgramFiles")`实际上取决于我是在 x64 还是 Win32 中运行。

如何使用环境变量而不是硬编码名称搜索（**在 C++ 和 C# 或 VB.NET 中**）两个 Program Files 文件夹 - 因为无论我在用户计算机上运行的程序版本如何，用户都可能拥有另一个一个安装在不同的版本？

我现在的代码：在 C++ 中：

```
fs::path root_directory = fs::path(getenv("ProgramFiles"));
// and then I change to 
root_directory = fs::path(getenv("ProgramFiles(x86)")); 
```

在 VB.NET 中：

```
System.Environment.GetEnvironmentVariable("ProgramFiles") 
```

我看了这个来源：http: [//msdn.microsoft.com/en-us/library/aa365743](http://msdn.microsoft.com/en-us/library/aa365743)

但是如果我实现他们所说的，我会一直得到 x86 ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:03:59.287

看看这些 Stack Overflow 问题：

*   *[C# - 如何在 Windows Vista 64 位上获取程序文件 (x86)](https://stackoverflow.com/questions/194157/c-sharp-how-to-get-program-files-x86-on-vista-x64)*
*   *[如何以编程方式检索“Program Files”文件夹的实际路径？](https://stackoverflow.com/questions/1085584/how-do-i-programatically-retrieve-the-actual-path-to-program-files-folder)*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:06:01.427

您可以使用以下方法获取它，

```
Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles) 
```

# performance - Solr 中从具有复杂连接的 MSSQL 规范化表中的增量数据导入

> ID：11150405
> 
> 赞同：1
> 
> 时间：2012-06-22T04:57:23.883
> 
> 标签：performance, solr, lucene, solrnet

处理从现有规范化 mssql 数据库导入 Solr 增量数据。我无法决定我需要实施的策略，或者不知道是否有现有的工具可以做同样的事情，所以我不需要重新发明轮子。

我需要将一个文档导入 Solr 3.6 以构建一个 Solr 数据，该数据以高度规范化的方式保存在 MSSQL 中。要检索单个文档的数据，需要许多连接，这会降低性能。我有appx。db 中有 100 万个此类文档。所以完全导入 Solr 对我来说不是一个选择。

在决定方法时，我有两个问题需要考虑：

*   增量数据导入，使 SQL Server 在从 db 获取数据时不会有很重的负载。
*   每天一次将 SQL Server 中已更改的数据更新为 Solr 数据

我正在寻求您在决定将增量数据导入 Solr 的策略和工具方面的帮助。我想，我有以下选择：

1.  自定义开发应用程序以从 MSSQL 获取数据并将其传递给 Solr。我需要跟踪数据，因为所有记录都插入到 Solr 中以及待处理的记录。同样，MSSQL 中 2% 的数据记录每天都在更新，因此需要跟踪自那时以来哪些数据发生了变化，然后在某个时间点再次将它们更新到 Solr。

2.  使用 Solr 中的任何现有工具或实用程序来执行相同的操作，例如 DIH。我不确定这将如何解决增量数据检索的问题以及它将如何跟踪 SQL Server 中哪些数据发生了变化？同样，不确定 DIH 将如何处理需要从 db 获取数据的复杂连接。

3.  或者在 DIH 中使用 Lusql 之类的东西，但仍然不确定它将如何解决这两个问题。虽然 Lusql 将提供在 db 中进行复杂连接的能力，但我希望这可能符合我的目的。

我赞成在 Solr 中使用 LuSQL 和 DIH，如果它可以满足目的，但仍然不确定它如何跟踪哪些数据发生了变化？或者对于这一部分，我必须通过维护进行更改的文档 ID 来手动管理，然后将其提供给 LuSQL 以从 SQL 获取数据并导入到 Solr。

我也期待您提出除此之外的建议来处理这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:57:51.417

我将与您分享我这样做的方式。

主要是我有相同的要求，直到本周我使用 solr dataimport 和增量导入。我有一个程序，它会定期将新项目的状态从 0 更新到 1，然后调用 solr data import 来获取所有状态为 1 的文档。 Solrdataimport 使用存储过程来加入并从 db 获取状态为 1 的文档。如果导入成功完成，我会将状态更新为 2，并且我知道该文档在 solr 中。如果文档发生更改，我只需从状态 2 更改为状态 0，然后导入过程会更新 solr 中的文档。

使用此过程对我来说一切正常。我总是在 solr 中获取新文档，而无需从数据库中获取所有数据。

现在我的要求发生了变化，因为我们决定将日期存档在数据库中，因为我们只需要在 solr 中。所以我需要一个反序列化数据的程序，然后将其发送到 solr。

我现在的方法是通过更新处理程序添加所有新的/更新的文档，在我添加所有文档以提交它们之后，如果提交成功，那么我更新数据库中的状态。使用这种方法我还没有经验，所以我不知道它是否会起作用，但我会尝试看看会发生什么。

我过去研究了一种更好的方法来做到这一点，但我找不到任何东西，所以如果你找到更好的解决方案，请与我分享。

祝你好运 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T23:29:01.437

我们必须从具有 25 多个表的高度规范化模式中建立索引，其中一半包含超过 5M 的记录。最大~20M。

我们使用 informatica 将这些记录从 oracle 加载到 solr。像 informatica 这样的 ETL 工具提供了在关系数据库之外连接表/查询结果的方法。它有一个排序器转换来排序侧数据库。按 db 之外的记录分组的聚合转换。还有一个查找转换..

本质上，我们的数据是分阶段去规范化的，加载/索引过程是分布式的。

当然也有开源 ETL 工具。有一个 Microsoft ETL 工具..

对 solr 的索引是通过更新处理程序进行的。增量索引与完整索引非常相似，具有用于更改数据捕获的附加逻辑。ETL 活动已安排。

# mysql - 检查多个表中的值的 SQL 性能查询

> ID：11150410
> 
> 赞同：0
> 
> 时间：2012-06-22T04:57:41.210
> 
> 标签：mysql, sql, database-performance

我正在使用 MySQL

我有三张桌子：

```
accounts {
    account_id,
    username
}

account_ips {
    idaccount_ips,
    account_id,
    ip
}

account_bans {
    ban_id
    account_id,
    expires
} 
```

需要获取不在禁令表中的每个 ip 的帐户分组计数。（见下方查询）

我尝试了以下方法，但速度太慢（44s）：

```
SELECT DISTINCT a.account_id, count(DISTINCT a.account_id)
  FROM account_ips AS a
 WHERE NOT EXISTS(
    SELECT 1
      FROM account_bans AS b
     WHERE b.expires > 1340341272 AND b.account_id = a.account_id)
 GROUP BY a.ip
HAVING count(DISTINCT a.account_id) > 3
 ORDER BY count(DISTINCT a.account_id) DESC; 
```

解释输出以下内容：

```
1, 'PRIMARY', 'a', 'ALL', '', '', '', '', 304745, 'Using where; Using temporary; Using filesort'
2, 'DEPENDENT SUBQUERY', 'b', 'ALL', '', '', '', '', 1851, 'Using where' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:05:56.907

你需要这样做 -

```
SELECT AIP.IP, COUNT(AIP.ACCOUNT_ID)
FROM ACCOUNT_IPS AIP
LEFT JOIN ACCOUNTS A ON AIP.ACCOUNT_ID=A.ACCOUNT_ID
LEFT JOIN ACCOUNT_BANS AB ON A.ACCOUNT_ID=AB.ACCOUNT_ID
WHERE
AB.BAN_ID IS NULL
GROUP BY AIP.IP 
```

如果您还需要考虑 b.expires > 1340341272 那么查询将是 -

```
SELECT AIP.IP, COUNT(AIP.ACCOUNT_ID)
FROM ACCOUNT_IPS AIP
LEFT JOIN ACCOUNTS A ON AIP.ACCOUNT_ID=A.ACCOUNT_ID
LEFT JOIN ACCOUNT_BANS AB ON A.ACCOUNT_ID=AB.ACCOUNT_ID
WHERE
AB.BAN_ID IS NULL
OR AB.EXPIRES <= 1340341272
GROUP BY AIP.IP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:06:46.480

尝试 a`left join`并在右表中获取 ips 的空值，而不是`WHERE NOT EXISTS`.

```
FROM account_ips a
LEFT JOIN account_bans b ON b.account_id = a.account_id
WHERE b.account_id IS NULL 
```

# c# - How I can use windows's SendTo option in my C# Application using datagridview

> ID：11150412
> 
> 赞同：1
> 
> 时间：2012-06-22T04:57:49.983
> 
> 标签：c#, sendto

i am listing files from directories on click on that specific folder name, when files show in datagridview. Now using context menu i want to add this sendto option in that context menu and want to send that file to any removable media.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:08:25.150

您在 Windows 的“发送到”菜单中看到的程序快捷方式存储在`%APPDATA%\Microsoft\Windows\SendTo`文件夹中。

阅读此文件夹的内容并在网格的上下文菜单中显示选项。

快捷方式是`.LNK`文件。从 LNK 文件中解析 EXE 的名称并使用`System.Diagnostics.Process.Run`

这是从 LNK 文件中解析 EXE 位置的方法

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/8d0f33a3-af4d-498f-a37b-e6fc84136c4a/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/8d0f33a3-af4d-498f-a37b-e6fc84136c4a/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:03:57.543

尝试修改此示例，它在不同的列上启用不同的选项：

```
//Define different context menus for different columns
private ContextMenu contextMenuForColumn1 = new ContextMenu();
private ContextMenu contextMenuForColumn2 = new ContextMenu();

Add the following line of code in the form load event:

private void Form_Load(object sender, EventArgs e)
{
    // Load all default values of controls 
    populateDataGridView();

    // Add context mneu items
    contextMenuForColumn1.MenuItems.Add("Make Active", new     EventHandler(MakeActive));
    contextMenuForColumn2.MenuItems.Add("Delete", new     EventHandler(Delete));
    contextMenuForColumn2.MenuItems.Add("Register", new     EventHandler(Register));
}

Add the following code to mouseup event of the gridview:

private void dataGridView_MouseUp(object sender, MouseEventArgs e)
{
    // Load context menu on right mouse click
    DataGridView.HitTestInfo hitTestInfo;
    if (e.Button == MouseButtons.Right)
    {
        hitTestInfo = dataGridView.HitTest(e.X, e.Y);
        // If column is first column
        if (hitTestInfo.Type == DataGridViewHitTestType.Cell && hitTestInfo.ColumnIndex == 0)
            contextMenuForColumn1.Show(dataGridView, new Point(e.X, e.Y));
        // If column is second column
        if (hitTestInfo.Type == DataGridViewHitTestType.Cell && hitTestInfo.ColumnIndex == 1)
            contextMenuForColumn2.Show(dataGridView, new Point(e.X, e.Y));
    }
} 
```

关于 SO 的类似问题：

*   [在 Winform 应用程序的数据网格视图中添加上下文菜单](https://stackoverflow.com/questions/4201816/add-context-menu-in-a-datagrid-view-in-a-winform-application)
*   [右键单击 datagridview 的上下文菜单](https://stackoverflow.com/questions/1718389/right-click-context-menu-for-datagrid)

# lightbox - Multiple lightbox galleries on single page

> ID：11150415
> 
> 赞同：1
> 
> 时间：2012-06-22T04:58:01.860
> 
> 标签：lightbox

I'm trying to have 6 different thumbnails and each one to have its own lightbox gallery. I'm having trouble linking the other images in the gallery to each thumbnail. WHere do I begin? I am using a site that has already been set up. I'm just trying to add in the six separate galleries because right now all thumbnails are in one gallery. Here is the base code I'm starting with:

```
<a href="images2/Topo_collection/sunrise/SunriseSet-1.jpg"
   rel="lightbox[sunrise]" title="Sunrise Set ">
     <img src="images2/Topo_collection/sunrise/SunriseSet-thumb2.jpg"
      alt="Modern artisan handmade ceramic decorative relief tile Topo Collection Sunrise Set lead-free glaze"border="0"/></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:13:50.723

参考[这里](http://lokeshdhakar.com/projects/lightbox2/)

您可以使用 rel 属性来区分画廊。如下所示：-

在第一张图片中，您可以使用

```
<a href="images/image-1.jpg" rel="lightbox[gallery1]" title="my caption">image #1</a> 
```

在第二张图片中

```
<a href="images/image-1.jpg" rel="lightbox[gallery2]" title="my caption">image #2</a> 
```

# android - Showing a text on the picture taken from Camera and saving it in Gallery

> ID：11150416
> 
> 赞同：2
> 
> 时间：2012-06-22T04:58:15.127
> 
> 标签：android

I want to add a text on the picture taken from device camera. So I am launching my activity once Camera intent action is fired. My question is how to show a text on the picture and once user clicks on save button the picture will be saved in device's gallery with the text.Please give some idea.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:30:52.403

关注Snippet会给你一些指点

你的逻辑来了。

在这里，我正在从可绘制资源加载 png 文件。您需要从目录中获取它。

如果您想让它更具吸引力，请通过将自定义字体保存在 Assets/fonts 中来使用

不要直接对要放置的文本进行硬编码，而是从某个地方加载它。

使用一些不同的颜色。

我已经手动设置了文本大小。你应该放一些逻辑（不要硬编码）

在drawText中，我将文本高度设置为30。您应该应用一些逻辑来获取文本高度。

最后你有背景位图保存它。

```
ImageView imageView = (ImageView) findViewById(R.id.image);
Bitmap background = BitmapFactory.decodeResource(getResources(), R.drawable.sample).copy(Bitmap.Config.ARGB_8888, true);
Canvas canvas = new Canvas(background);
Paint paint = new Paint();
paint.setAntiAlias(true);
paint.setColor(Color.WHITE);
paint.setStyle(Style.FILL);
paint.setTextSize(50);
paint.setShadowLayer(2.0f, 1.0f, 1.0f, Color.BLACK);

canvas.drawText("Hello Image", (background.getWidth() - paint.measureText("Hello Image")) / 2, background.getHeight() - 30, paint);

imageView.setImageBitmap(background); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:15:32.000

我认为这篇文章真的对你有帮助[Link is here](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity) ...

你应该使用 FrameLayout 然后在这篇文章中添加你的 imageView 给定示例如何设置图像只需在它之后添加背景透明的 textview ，FrameLayout 将它显示在图像上，你也可以定位它（只需在 RelativeLayout 中写你的 textview ）

希望这个解释对你有用......

# jquery - Jquery中的fadeIn和faceOut效果无法正常工作

> ID：11150422
> 
> 赞同：1
> 
> 时间：2012-06-22T04:59:33.613
> 
> 标签：jquery

该脚本可以正常工作，`single click`但`double click`它同时显示了 div`#btnn`和`#num`

CSS

```
#num
{
    padding: 15px;
    display: none;
} 
```

江青

```
<script type="text/javascript">
$(document).ready(function() {
    $(".deatil_view_b").toggle(function() {
        $("#btnn").fadeOut('slow',function() {
            $("#num").fadeIn('slow');
        });
    }, function(){
        $("#num").fadeOut('slow', function() {
            $("#btnn").fadeIn('slow');
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:12:25.413

试试这个：

```
$(document).ready(function(){
    $(".detail_view_b").toggle(function() {
        $("#btnn").fadeOut('slow', function() {
            $("#num").fadeIn('slow');
        });
    }, function() {
        $("#num").fadeOut('slow', function() {
             $("#btnn").fadeIn('slow');
        });
    });
    $(".detail_view_b").dblclick(function() {
        $("#btnn").clearQueue();
        $("#num").clearQueue();
    });
}); 
```

另请注意，我将“detail_view_b”更正为“detail_view_b”。我假设那是一个错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:05:01.800

尝试使用该`.stop()`功能立即完成动画并继续：

```
$("#btnn").stop(true, true).fadeOut('slow',function() {
    $("#num").fadeIn('slow');
});

$("#num").stop(true, true).fadeOut('slow', function() {
     $("#btnn").fadeIn('slow');
}); 
```

请记住，双击不是网络应用程序中的标准事件。

# iphone - Passing multiple strings from one class to another class

> ID：11150423
> 
> 赞同：0
> 
> 时间：2012-06-22T04:59:58.127
> 
> 标签：iphone, objective-c, ios

I am new to iPhone. I have small doubt. I have three strings in class BiblePlayerViewController and I want to pass those 3 strings to appdelegate from this class. How to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:06:18.640

在 BiblePlayerViewController 中创建一个属性 NSDictionary 并将你的三个字符串添加到字典中，这样你就可以在任何你想要的地方阅读该字典

```
NSDictionary *FileDict = [[NSDictionary  alloc] initWithObjectsAndKeys:str1,@"key1",str2,@"key2",str3,@"key3",nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:07:35.743

创建类型为`NSString`in的变量`appdelegate.h`

```
NSString *test; 
```

导入`appdelegate.h`现在`BiblePlayerViewController.m` 使用获取对 appdelegate 类的引用

```
Appdelegate *ad; //init with some object
 //now access the NSString var u just created
 ad.test=@"your string"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:10:53.150

创建 Appdelegate 的静态引用，并在 Appdelegate 中将 NSStrings 声明为类变量

把这是appdelegate

```
+(Appdelegate*)getAppdelegate{
     return self
} 
```

然后在您的视图控制器中执行 appdelegate.string1 = string1 等等..您还可以将这些对象封装在一个数组中并将它们传递给 appdelegate 。

这个想法是获取 Appdelegate 的静态引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:35:14.253

我认为您可以将 appdelegate 类的共享对象用于类似情况。

在 appdelegate 类中声明全局对象为

```
#define UIAppDelegate ((MyAppDelegateClass *)[UIApplication sharedApplication].delegate) 
```

通过声明这一点，从任何导入 AppDelegate 类的类都可以使用 AppDelegate 类的这个共享对象。

那么您是否在 AppDelegate 中声明了三个属性

```
@interface MyAppDelegateClass : NSObject <UIApplicationDelegate> 
{
   NSString   *string1;
   NSString   *string2;
   NSString   *string3;
}
@property (nonatomic,retain) NSString  string1;
@property (nonatomic,retain) NSString  string2;
@property (nonatomic,retain) NSString  string3;

@end 
```

然后在 AppDelegate 实现

```
@implementation MyAppDelegateClass

@synthesize string1;
@synthesize string2;
@synthesize string3;

@end 
```

在您需要将字符串发送到 AppDelegate 的类中，如下所示您需要先导入 AppDelegate 类

```
#import "MyAppDelegateClass.h"

@interface MyCustomSenderClass : UIViewController

@end 
```

并且在实施中

```
@implementation MyCustomSenderClass

- (void) sendStringsToAppDelegate
{
   UIAppDelegate.string1 = myString1;
   UIAppDelegate.string2 = myString2;
   UIAppDelegate.string3 = myString3;
}

@end 
```

因此，您可以从任何导入您的 AppDelegate 类的类中直接为 AppDelegate 设置一个值。

我认为这对你有帮助。

# linux-device-driver - major and minor device numbers

> ID：11150424
> 
> 赞同：1
> 
> 时间：2012-06-22T05:00:01.983
> 
> 标签：linux-device-driver

I am reading linux device driver book of rubini,corbet and hartmen.I have doubt regarding dynamic allocation of major and minor device numbers.They say

**The disadvantage of dynamic assignment is that you can’t create the device nodes in advance, because the major number assigned to your module will vary.For normal use of the driver, this is hardly a problem, because once the number has been assigned, you can read it from /proc/devices.**

1)What does it mean by advance here?

2)Why major and minor numbers must be read from /proc/devices when function **alloc_chrdev_region** provides major and minor numbers in the argument sent to it.can that argument sent, not be used directly?

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:12:57.273

1) Dynamic assignment would mean that you cannot create device nodes before the driver is loaded, for example having them as a static part of the filesystem when the system boots. Instead you could only create them once you discover what their major/minor numbers are *this time*.

2) The driver may know what it's major and minor numbers are, but the device nodes should be created by something in userspace. They are suggesting that if this information cannot be given in advance in parallel to both the kernel driver and userspace, then userspace will have to discover it at runtime from something such as /proc/devices.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T05:35:31.220

1.  When we assign a major number dynamically to a device driver, we are not aware with the Major Number till the `alloc_chrdev_region` function finishes execution or let's say that you don't get to know the Major Number before you insert the module into the kernel (and for this we use `insmod`). And so you cannot create a node for your driver (for which we use `mknod`) unless you load a device driver, this is referred to as advanced by the author.

2.  We read `/proc/devices` for Major and Minor Numbers of one device driver when a different device/program needs them.

# javascript - 用Javascript从数据库中检索值

> ID：11150425
> 
> 赞同：2
> 
> 时间：2012-06-22T05:00:11.110
> 
> 标签：javascript, sqlite, cordova

我是使用 PhoneGap 进行移动应用程序开发的新手。我创建了一个表单来在 SQLite 数据库中添加和显示学生的姓名、地址和电话号码。但问题是我不知道在文本框中检索和显示值。

```
<!DOCTYPE HTML>
<html>
 <head>
    <title>Contact Example</title>

    <script type="text/javascript" charset="utf-8" src="phonegap-1.4.1.js"></script>
    <script type="text/javascript" charset="utf-8">

    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
        var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
        db.transaction(populateDB, errorCB, successCB);
    }

    function populateDB(tx) {
         tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (sname ,saddress ,sphone)');
    }

    function errorCB(tx, err) {
        alert("Error processing SQL: "+err);
    }

    // Transaction success callback
    //
    function successCB() {
        alert("success!");
    }

    function add(tx){
        var name=document.getElementById('n');
        var address=document.getElementById('a');
        var phone=document.getElementById('p');
        tx.executeSql('INSERT INTO DEMO (sname ,saddress ,sphone) VALUES ('"+name+"','"+address+"','"+phone+"')');
        //tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');    

    }

    function show(tx){
        var name=document.getElementById('n');
        tx.executeSql('SELECT * FROM DEMO WHERE (sname='"+name+"')');   
         document.f.n.value=name;
         document.f.a.value=//??;
         document.f.p.value=//??;
    }

    </script>
  </head>
  <body>
    <form name="f" method="get" action="">
      Name  :<input type="text" id="n" size="10"></input><br>
      Add &nbsp;&nbsp;&nbsp; :<input type="text" id="a" size="10"></input><br>
      Phone :<input type="text" id="p" size="10"></input><br>
      <input type="button" value="Add" onClick="add()">
      <input type="button" value="Show" onClick="show()">
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:45:22.767

```
document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() 
    {
      alert("onDeviceReady called");
    }

    function populateDB(tx)
    {
         tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (sname ,saddress ,sphone)');
            var name=document.getElementById('n');
        var address=document.getElementById('a');
        var phone=document.getElementById('p');
        tx.executeSql('INSERT INTO DEMO (sname ,saddress ,sphone) VALUES ('"+name.value+"','"+address.value+"','"+phone.value+"')');
    }

    function errorCB(tx, err) 
    {
        alert("Error processing SQL: "+err);
    }

    // Transaction success callback
    //
    function successCB() 
    {
        alert("success!");
    }

    function add()
    {
      var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
        db.transaction(populateDB, errorCB, successCB);
     } 
```

有关更多信息，请参见[此处的链接](http://docs.phonegap.com/en/1.3.0/phonegap_storage_storage.md.html#Storage)

```
//show data from db

// Transaction success callback
    function show()
     {
        var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
        db.transaction(queryDB, errorCB);
    }
// Query the database

    function queryDB(tx) 
    {
        tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
    }

    // Query the success callback

    function querySuccess(tx, results)
     {
      var len = results.rows.length;
        console.log("DEMO table: " + len + " rows found.");
        for (var i=0; i<len; i++){
            console.log("Row = " + i + " sname = " + results.rows.item(i).sname + " saddress =  " + results.rows.item(i).saddress);
        }

    }

    // Transaction error callback

    function errorCB(err)
     {
        console.log("Error processing SQL: "+err.code);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T14:43:40.840

在您的代码中保存调用 db.transaction(populateDB, errorCB, successCB)

该函数将返回

```
function populateDB(tx) {
var rr=escape(JSON.stringify(onedata));//here onedata is data you want to save I use json data here.
tx.executeSql('CREATE TABLE IF NOT EXISTS LeadInfo (data)');
tx.executeSql('INSERT INTO LeadInfo (data) VALUES ("'+ rr +'")');
alert("Insert")
}

function errorCB(tx, err) {
       //alert("Error processing SQL Insert: "+err);
}

function successCB() {
     //  alert("success!");
} 
```

对于检索，您可以使用以下内容：

```
function queryDB(tx) {
tx.executeSql('SELECT * FROM LeadInfo', [], querySuccess, errorCB);
}

function querySuccess(tx, results) {
var tablereport="";
if (results != null && results.rows != null) {
for (var i = 0; i < results.rows.length; i++) {
var row =unescape(results.rows.item(i).data);
var obj = JSON.parse(row);
tablereport+='<a href="#"><span  style="font-size:18px; font-weight:400;  padding:10px 0px 10px 0px;">'+JSON.stringify(obj.lead_name)+'</span><span style="padding: 10px 16px;width: 100px;float: right;margin-top: -33px;margin-right: -80px;font-size:14px"></span><br>';
tablereport+='</li>';
tablereport+='</li>';
}
}
}

function errorCB(err) {
alert("Error processing SQL Retrive: "+err.code);
} 
```

# mysql - Mysql找到非常短的字符串的匹配项？

> ID：11150427
> 
> 赞同：0
> 
> 时间：2012-06-22T05:00:26.337
> 
> 标签：mysql

我需要在表中找到所有出现的“Of”（区分大小写）`Cities`。

我正在尝试比赛，我也尝试过类似但没有奏效。

```
SELECT * FROM `Cities` WHERE MATCH(`Name`) AGAINST ('Of') 
```

如何做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:03:24.247

在这种情况下，您需要将`ft_min_word_len`指令更改为 2。默认值为 4，因此不索引 1、2 和 3 个字母的单词。

[http://dev.mysql.com/doc/refman//5.5/en/fulltext-fine-tuning.html](http://dev.mysql.com/doc/refman//5.5/en/fulltext-fine-tuning.html)

它应该可以使用`LIKE`。确保你尝试过这样的事情：

```
WHERE `name` LIKE BINARY '%Of%' 
```

PS：错过了关于区分大小写的要求-为此添加`BINARY`了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:05:38.733

你可以使用`LIKE`：

```
SELECT * FROM `Cities` WHERE `Name` COLLATE UTF8_GENERAL_CI LIKE '%Of%' 
```

`COLLATE UTF8_GENERAL_CI`是区分大小写的。

# json - 使用嵌套 JSON 或点键更新文档

> ID：11150428
> 
> 赞同：0
> 
> 时间：2012-06-22T05:00:44.363
> 
> 标签：json, mongodb

假设我有一个这样的文档结构：

```
thing: {
  name: {
    first: "John",
    last: "Doe"
  }
} 
```

说我只想更新姓氏。我发送哪个命令来更新？

```
$set: {
  name: {
    first: "Connor"
  }
} 
```

或者

```
$set: {
  "name.first": "Connor"
} 
```

有区别吗？还是偏好？我更喜欢第一种，因为它类似于实际文档，但 mongodb 文档使用第二种方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T05:43:01.460

`$set`command 将获取密钥并用您传递的值覆盖其中存储的任何内容。所以在这种情况下

```
$set: {
  name: {
    first: "Connor"
  }
} 
```

具有潜在丰富结构的整个子文档`name`将被简单的 `{first: 'Connor'}`.

第二种情况也发生了类似的事情，只是更深了一层。在这种情况下，它是一个字符串，但它也可以是一个散列。

```
$set: {
  "name.first": "Connor"
} 
```

您可以通过构建适当的点名称来更新任意深度级别的字段。这是一个稍微做作的例子

```
db.collection.update(query, {$set: {'stats.daily.20120622.mainpage.visited': 1}}); 
```

# mysql - mysql ORDER BY MIN() 与 id 不匹配

> ID：11150435
> 
> 赞同：2
> 
> 时间：2012-06-22T05:02:12.093
> 
> 标签：mysql, sql-order-by, min

我有一个包含以下列的数据库：

```
-------------------
id|domain|hit_count
------------------- 
```

我想对其执行此查询：

```
SELECT id,MIN(hit_count)
  FROM table WHERE domain='$domain'
 GROUP BY domain ORDER BY MIN(hit_count) 
```

我希望这个查询给我 $domain 的 hit_count 最小的行的 id。唯一的问题是，如果我有两行具有相同的域，比如 www.bestbuy.com，查询将按先出现的那一个进行分组，然后虽然我会得到正确的最低 hit_count，但 id 可能会或可能会不是具有最低 hit_count 的行的 id。

有谁知道我执行此查询并获得与 MIN(hit_count) 匹配的 id 的方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:13:32.440

试试这个：

```
SELECT id,MIN(hit_count),domain FROM table GROUP BY domain HAVING domain='$domain' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:29:30.323

看，当您使用聚合时，无论是通过聚合函数（并且`min()`是这样的函数）还是通过`GROUP BY`or`HAVING`运算符，您的数据都会被分组。在您的情况下，它按域分组。您的选择列表中有 2 个字段，`id`并且`min(hit_count)`.

现在，对于每个组，数据库都知道`hit_count`要选择哪个，因为您已经通过聚合函数明确指定了这一点。但是`id`，应该包括哪一个呢？MySQL 在内部将这些字段包装到`max()`聚合函数中，我发现这是一种容易出错的方法。在所有其他 RDBMS 中，您*将*收到此类查询的错误。

规则是：如果您使用聚合，那么*所有*列都应该是聚合函数的参数或`GROUP BY`运算符的参数。

为了达到预期的结果，您需要一个子查询：

```
SELECT id, domain, hit_count
  FROM `table`
 WHERE domain = '$domain'
   AND hit_count = (SELECT min(hit_count) FROM `table` WHERE domain = '$domain'); 
```

我使用了反引号，就像`table`SQL 中的保留字一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:11:53.267

试试这个：

```
SELECT id,hit_count
  FROM table WHERE domain='$domain'
 GROUP BY domain ORDER BY hit_count ASC; 
```

这也应该有效：

```
select id, MIN(hit_count) from table where domain="$domain"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T05:13:38.250

```
SELECT 
    id, 
    hit_count
FROM 
    table
WHERE 
    domain='$domain'
    AND hit_count = (SELECT MIN(hit_count) FROM table WHERE domain='$domain') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T05:33:16.323

我有同样的问题。请参阅下面的问题。

***[min(column) 没有返回其他列的正确数据](https://stackoverflow.com/questions/11010599/mincolumn-is-not-returning-me-correct-data-of-other-columns)***

您正在使用 GROPU BY。这意味着结果中的每一行代表一**组**值。其中一个值是组名（分组依据的字段的值）。其余的是该组中的任意值。
例如下表：

```
F1   |   F2
1         aa
1         bb
1         cc
2         gg
2         hh 
```

如果您按 F1 分组：`SELECT F1,F2 from T GROUP BY F1` 您将得到两行：

```
1    and one value from (aa,bb,cc)
2    and one value from (gg,hh) 
```

如果你想要一个确定性的结果集，你需要告诉软件将什么算法应用于该组。比如几个：

1.  最小
2.  最大限度
3.  数数
4.  和

等等等等

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T07:13:42.743

有一种最简单的方法可以让您的查询正常，只需在 GROUP BY 域之后使用 DESC 关键字修改它

```
SELECT
  id,
  MIN(hit_count)
FROM table
WHERE domain = '$domain'
GROUP BY domain DESC
ORDER BY MIN(hit_count) 
```

说明：
当您将 group by 与聚合函数一起使用时，它总是选择第一条记录，但如果您使用 desc 关键字限制它，它将选择该组的最低或最后一条记录。为了测试 puspose 使用这个只添加了 group_concat 的查询。

```
SELECT
  group_concat(id),
  MIN(hit_count)
FROM table
WHERE domain = '$domain'
GROUP BY domain DESC
ORDER BY MIN(hit_count) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T22:50:24.420

如果您可以按 id 分组重复域：

```
SELECT id,MIN(hit_count)
FROM domain WHERE domain='$domain'
GROUP BY id ORDER BY MIN(hit_count) 
```

# java - 使用 Web 客户端发布数据

> ID：11150437
> 
> 赞同：4
> 
> 时间：2012-06-22T05:02:16.610
> 
> 标签：java, httpclient, webclient, httpurlconnection

我正在使用 Web 客户端创建提交按钮，但它不起作用。

这是我正在使用的代码：

```
 HtmlElement button = firstPage.createElement("button");
 button.setAttribute("type", "submit");
 button.setAttribute("name", "submit");
 form.appendChild(button);
 System.out.println(form.asXml());
 HtmlPage pageAfterLogin = button.click(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:36:21.383

简单的问题，页面中是否包含 HTML FORM 标签？另请参阅下面的链接，不确定它是否对您有帮助

[HtmlUnit，如何在不点击提交按钮的情况下发布表单？](https://stackoverflow.com/questions/7573558/htmlunit-how-to-post-form-without-clicking-submit-button)

# azure - Azure 云域控制器使用 Azure Connect 为移动桌面提供服务？

> ID：11150444
> 
> 赞同：6
> 
> 时间：2012-06-22T05:03:21.797
> 
> 标签：azure, dns, cloud, connect

鉴于最近对 Windows Azure 的更新，我想知道是否可以在 Azure 上创建域控制器和文件服务器，然后使用 Azure Connect 将 10 到 20 个远程工作人员连接到这个“虚拟办公室”。

我的主要兴趣是域控制器在漫游时是否可以存在于带有 Active Directory 的云和服务桌面中。这将消除小型企业对本地服务器的需求。Active Directory 将用于桌面登录和组策略，并可能用于验证托管文件服务器、共享点实例等。

我看到很多关于域控制器通过 VPN 为办公室提供服务的帖子，并将 azure 域控制器复制到本地域控制器，但没有关于域控制器是否可以在云中运行和服务漫游桌面（可能是 azure connect）。

我很兴奋，并准备好有人告诉我这是不可能的。哈哈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T05:33:43.153

是的，这是可能的，有 2 个教程可以帮助您：

*   第一个将帮助您设置虚拟网络：[Create a Virtual Network for Cross-Premises Connectivity](https://www.windowsazure.com/en-us/manage/services/networking/cross-premises-connectivity/)
*   第二个将帮助您在 Windows Azure 中安装**新**的AD 林：在 Windows Azure 中[安装新的 Active Directory 林](https://www.windowsazure.com/en-us/manage/services/networking/active-directory-forest/)

# java - Android：从jar中获取Java源代码

> ID：11150448
> 
> 赞同：0
> 
> 时间：2012-06-22T05:03:38.540
> 
> 标签：java, android

我有一个用于我的应用程序的 jar 库，我想对源代码进行更改。在使用 JD-GUI 从类文件中获取源代码后，我将这些文件放在了我在 Eclipse 中的项目中。但是源代码包含很多错误。比如说构造函数不存在，但是源码明明有这个构造函数。

请提供帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:12:27.733

首先，它从不建议更改为开发人员提供帮助的任何内置 jar。

其次，如果你确实想对其进行更改，请使用JD-GUI，将完整的源代码取出到项目中，了解代码，进行更改，编译程序以确保更改前后的所有依赖项，没问题，所以不会弹出错误。从项目中获取类文件并形成新的 jar 并使用它。

# jquery - jQuery :not() 为

> ID：11150452
> 
> 赞同：0
> 
> 时间：2012-06-22T05:04:22.640
> 
> 标签：jquery, jquery-selectors

我在 Jquery 的第 12 天偶然发现了 :not() 选择器。

我想选择除一个之外的所有 H1，其中包括文本和包含更多文本的类的跨度。为了帮助您理解结构，以下是一些查询和结果：

**查询1：**

```
$('.block > section') 
```

结果是：

```
[
<section class=​"businessapproaches">​…​&lt;/section>​
, 
<section class=​"abstract">​…​&lt;/section>​
, 
<section class=​"workexperience">​…​&lt;/section>​
, 
<section class=​"academic">​…​&lt;/section>​
, 
<section class=​"skillstable">​…​&lt;/section>​
] 
```

**查询 2**

```
$('.block > section > h1') 
```

结果是：

```
[
<h1>​Business Approach​&lt;/h1>​
, 
<h1>​Abstract​&lt;/h1>​
, 
<h1>​Work Experience​&lt;/h1>​
, 
<h1>​Academic Experience​&lt;/h1>​
, 
<h1>​…​&lt;/h1>​
] 
```

如您所见，最后一个没有简单的文本可以排除。所以你知道它是什么，这里是：

```
[
<h1>​
"Skills Table : "
<span class=​"skillstablevisibility">​Technologies / Compliance / Certifications​&lt;/span>​
</h1>​
] 
```

对于那些打算建议`:last`使用. 好消息是，在我添加新版块后，我可以保证我仍然需要选择除“技能表”之外的所有版块，所以您的帮助不会白费！`:not()``:last`

这些是我迄今为止尝试过的：

通过其索引尝试：

```
 $('.block > section > h1:not(:'$('.block > section > h1:nth-child(5)')')') 
```

按其名称尝试：

```
$('.block > section > h1:not(:"Skills Table : "
    <span class=​"skillstablevisibility">​Technologies / Compliance / Certifications​&lt;/span>')') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T05:10:39.033

你可以做

```
$('.block > section > h1:not(:has("span.skillstablevisibility"))') 
```

那不会选择任何`h1`内部`span.skillstablevisibility`有的。

**演示：http:** [//jsfiddle.net/joycse06/uZjJh/](http://jsfiddle.net/joycse06/uZjJh/)

**更新**

正如[@Christian Varga](https://stackoverflow.com/users/551093/christian-varga)上面评论的那样，上面的选择器表达式很昂贵，所以如果您可以控制标记创建您可以将类添加到`h1`自身，这将允许选择器像

```
$('.block > section > h1:not(.skillstable)'); 
```

哪个在性能上会更好。

如果您不能更改标记，您始终可以使用第一个标记。

# iphone - 将值转换为 NSDate

> ID：11150458
> 
> 赞同：0
> 
> 时间：2012-06-22T05:05:25.010
> 
> 标签：iphone, objective-c

我有`"634758517020305000"`对应于 2012 年 6 月 21 日的刻度值。我尝试将刻度值转换为 NSDate 对象，如下所示：

```
NSString *str = @"634758517020305000";
NSInteger offset = [[NSTimeZone defaultTimeZone] secondsFromGMT];
NSDate *date = [[NSDate dateWithTimeIntervalSince1970:
                 [[str substringWithRange:NSMakeRange(0, [str length])] intValue]]
                dateByAddingTimeInterval:offset];
static NSDateFormatter *dateFormatter = nil;
if (dateFormatter == nil) {
    dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateStyle:NSDateFormatterShortStyle];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];
    NSString *fourDigitYearFormat = [[dateFormatter dateFormat] stringByReplacingOccurrencesOfString:@"yy" withString:@"yyyy"];
    [dateFormatter setDateFormat:fourDigitYearFormat];
}

// There you have it:
NSString *outputString = [dateFormatter stringFromDate:date]; 
```

但我得到了输出：`1/19/2038`. 如果有人知道我在哪里做错了，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:02:13.650

你`Unix timestamps`错了。它应该是**1340236800**
检查你的 Unix 时间戳[在这里](http://www.onlineconversion.com/unix_time.htm)

# java - 当相应列具有空值时，我可以从 jtable 中删除复选框吗？

> ID：11150474
> 
> 赞同：2
> 
> 时间：2012-06-22T05:07:59.057
> 
> 标签：java, swing, jtable, jcheckbox

我在 jTable 中有 2 列。第一列 itemname 和第二列是复选框添加的列。我试图将复选框添加到 jTable 列中，但复选框被添加到所有列单元格中。但我只想为 itemname 列的相应单元格添加复选框，其中包含值。如果 itemname 值为 null，则相应的复选框列也我想要设置为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:54:19.310

使用您自己的 TableCellEditor 和 TableCellRenderer，您可以决定显示您想要显示的任何内容。这是一个示例，我每隔三行“玩”一次复选框的可见性：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.EventObject;
import java.util.List;

import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.CellEditorListener;
import javax.swing.event.ChangeEvent;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellEditor;
import javax.swing.table.TableCellRenderer;

public class TestTable {

    private JFrame f;
    private JTable table;

    private class MyCheckBoxRendererEditor extends JPanel implements TableCellRenderer, TableCellEditor, ActionListener {
        private JCheckBox checkbox;

        DefaultTableCellRenderer defaultRenderer;

        public MyCheckBoxRendererEditor() {
            defaultRenderer = new DefaultTableCellRenderer();
            checkbox = new JCheckBox();
            checkbox.setOpaque(false);
            checkbox.addActionListener(this);
            checkbox.setRequestFocusEnabled(false);
            setOpaque(true);
            add(checkbox);
            validate();
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            stopCellEditing();
        }

        @Override
        public Object getCellEditorValue() {
            return checkbox.isSelected();
        }

        @Override
        public boolean isCellEditable(EventObject anEvent) {
            return true;
        }

        @Override
        public boolean shouldSelectCell(EventObject anEvent) {
            return true;
        }

        @Override
        public boolean stopCellEditing() {
            for (CellEditorListener listener : getListeners(CellEditorListener.class)) {
                listener.editingStopped(new ChangeEvent(this));
            }
            return true;
        }

        @Override
        public void cancelCellEditing() {
            for (CellEditorListener listener : getListeners(CellEditorListener.class)) {
                listener.editingCanceled(new ChangeEvent(this));
            }
        }

        @Override
        public void addCellEditorListener(CellEditorListener l) {
            this.listenerList.add(CellEditorListener.class, l);
        }

        @Override
        public void removeCellEditorListener(CellEditorListener l) {
            this.listenerList.remove(CellEditorListener.class, l);
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            configure(table, value, true, true, row, column);
            return this;
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            configure(table, value, isSelected, hasFocus, row, column);
            return this;
        }

        private void configure(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            defaultRenderer.setBackground(null);
            defaultRenderer.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            MyObject myObject = ((MyTableModel) table.getModel()).getValueAt(row);
            checkbox.setVisible(myObject.getValue() != null);
            checkbox.setSelected((Boolean) value);
            setBackground(defaultRenderer.getBackground());
            setBorder(defaultRenderer.getBorder());
        }

    }

    private class MyObject {
        private final String value;
        private boolean checked;

        public MyObject(String value) {
            this.value = value;
        }

        public String getValue() {
            return value;
        }

        public boolean isChecked() {
            return checked;
        }

        public void setChecked(boolean checked) {
            this.checked = checked;
            System.err.println(value + " is " + checked);
        }
    }

    protected void initUI() {
        List<MyObject> data = new ArrayList<TestTable.MyObject>();
        for (int i = 0; i < 20; i++) {
            MyObject object = new MyObject(i % 3 == 1 ? null : "Row " + (i + 1));
            data.add(object);
        }
        table = new JTable(new MyTableModel(data));
        table.getColumnModel().getColumn(1).setCellEditor(new MyCheckBoxRendererEditor());
        table.getColumnModel().getColumn(1).setCellRenderer(new MyCheckBoxRendererEditor());
        table.setRowHeight(30);
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JScrollPane(table), BorderLayout.CENTER);
        f.pack();
        f.setVisible(true);

    }

    public class MyTableModel extends AbstractTableModel {

        private List<MyObject> data;

        public MyTableModel(List<MyObject> data) {
            super();
            this.data = data;
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public int getRowCount() {
            return data.size();
        }

        public MyObject getValueAt(int row) {
            return data.get(row);
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            switch (columnIndex) {
            case 0:
                return getValueAt(rowIndex).getValue();
            case 1:
                return getValueAt(rowIndex).isChecked();
            }
            return null;
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            if (columnIndex == 1) {
                getValueAt(rowIndex).setChecked((Boolean) aValue);
            }
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return columnIndex == 1 && getValueAt(rowIndex).getValue() != null;
        }

        @Override
        public Class<?> getColumnClass(int column) {
            switch (column) {
            case 0:
                return String.class;
            case 1:
                return Boolean.class;
            }
            return Object.class;
        }

        @Override
        public String getColumnName(int column) {
            switch (column) {
            case 0:
                return "Value";
            case 1:
                return "Checked";
            }
            return null;
        }

    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }

} 
```

# android - Android中的反向地理编码：错误“IOException：服务不可用”

> ID：11150475
> 
> 赞同：0
> 
> 时间：2012-06-22T05:08:01.303
> 
> 标签：android, android-maps, reverse-geocoding

1.  我的应用程序完全基于地图。要求是用户需要用文字输入源和目的地，然后我需要在地图上用这些带有标记的值绘制路线。稍后在绘制路线的显示地图上，用户可以通过拖动显示的标记来更改/修改源或目的地。同时绘制的路线也应该随着用户的动作而动态变化。

2.  我可以使用`onTouchEvent`. 但在同一张地图中无法同时设置来源和目的地。

3.  我尝试反向地理编码以从给定的位置名称中获取纬度和经度。但我明白了`IOException:Service not Available`。我正在寻找解决方案，然后我找到了这个从 2010 年 6 月开始的[链接](http://code.google.com/p/android/issues/detail?id=8816)，直到现在仍然没有修复这个错误。

请帮助。还提供示例代码。

谢谢。

# json - Grails getProperties 方法并不总是以正确的顺序返回属性

> ID：11150476
> 
> 赞同：0
> 
> 时间：2012-06-22T05:08:03.863
> 
> 标签：json, grails, groovy, flexigrid

我有一个看起来像这样的类：

```
class Foo {
    name
    description

    static constraints = {
        name()
        description()
    }
} 
```

我想在[Flexigrid](http://flexigrid.info/)中添加我的类的显示实例。将数据发送到 flexigrid 时，它需要采用 JSON 或 XML 之类的格式……我选择了 JSON。Flexigrid 期望它接收到的 JSON 数组具有以下格式：

```
{
    "page": "1",
    "total": "1",
    "rows": [
        {
            "id": "1",
            "cell": [
                "1",
                "The name of Foo 1",
                "The description of Foo 1"
            ]
        },
        {
            "id": "2",
            "cell": [
                "2",
                "The name of Foo 2",
                "The description of Foo 2"
            ]
        }
    ]
} 
```

为了让我的`Foo`对象变成这种格式，我做了类似的事情：

```
def foos = Foo.getAll( 1, 2 )

def results = [:]
results[ "page" ] = params.page
results[ "total" ] = foos.size()
results[ "rows" ] = []

for( foo in foos ) {
    def cell = []
    cell.add( foo.id )

    foo.getProperties().each() { key, value -> // Sometimes get foo.getProperties().each() returns foo.description then foo.name instead of foo.name then foo.description as desired.
        cell.add( value.toString() )
    }

    results[ "rows" ].add( [ "id": foo.id, "cell": cell ] )
}

render results as JSON 
```

问题是每隔一段时间就会`foo.getProperties().each()`返回，`foo.description`然后`foo.name`导致`foo.description`被放入我的 flexigrid 的名称列中，`foo.name`并被放入我的 flexigrid 的描述列中的特定行。

`Foo`我尝试在域类中指定约束，以便`getProperties`以正确的顺序返回，但它不起作用。 **如何确保`getProperties`以可预测的顺序返回属性？**

**这就是我解决此问题的方法：**

```
def items = Foo.getAll()

for( item in items ) {
    def cell = []
    cell.add( item.id )
    Foo.constraints.each() { key, value ->
        def itemValue = item.getProperty( key )
        if( !( itemValue instanceof Collection ) ) {
            cell.add( itemValue.toString() )
        }
    }
} 
```

所以`Foo.constraints`得到一个约束映射，其中每个约束都是`Collections$UnmodifiableMap$UnmodifiableEntrySet$UnmodifiableEntry`. 经过测试，我发现这张地图总是`Foo`按照我输入它们的顺序返回我的静态约束（也由 Ian 确认）。现在只有`item`in的属性`Foo.constraints`会被添加到`cell`for flexigrid 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:35:33.243

我认为不能`foo.getProperties()`保证订购的任何内容。但是`Foo.constraints`在运行时被覆盖以返回不是原始闭包，而是一个对象和此映射中的键`Map`保证*与*约束闭包的顺序相同（这就是脚手架能够使用约束排序来定义顺序的方式其中字段显示在脚手架视图中）。所以你可以做类似的事情`ConstrainedProperty`

 *```
def props = [:] // [:] declares a LinkedHashMap, so order-preserving
Foo.constraints.each { k, v ->
  props[k] = foo."${k}"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:23:56.680

`foo.getProperties().sort()`或者，如果没有按您需要的顺序对属性进行排序的好方法，您始终可以自己在列表中定义属性的顺序以进行迭代。

```
def properties = ['name', 'description']
properties.each {
     cell.add(foo."$it")
} 
```*

# kill-process - 使用 Microsoft.Office.Interop.Excel 时终止 EXEL.EXE 进程

> ID：11150478
> 
> 赞同：0
> 
> 时间：2012-06-22T05:08:10.820
> 
> 标签：kill-process

> **可能重复：**
> [终止互操作应用程序进程](https://stackoverflow.com/questions/321881/killing-an-interop-application-process)

我正在使用 Microsoft.Office.Interop.Excel 以从 excel 中获取数据。即使我清除了 COM 对象，它仍然会在后台留下一些 EXEL.EXE 实例。检查下面的代码。

```
finally
        {
            if (cells != null) Marshal.FinalReleaseComObject(cells);
            if (range != null) Marshal.FinalReleaseComObject(range);
            if (sheets != null) Marshal.FinalReleaseComObject(sheets);
            if (workSheet != null) Marshal.FinalReleaseComObject(workSheet);
            if (excelWorkBook != null)
            {
                excelWorkBook.Close(Type.Missing, Type.Missing, Type.Missing);
                Marshal.FinalReleaseComObject(excelWorkBook);
            }
            if (excelWorkbooks != null) Marshal.FinalReleaseComObject(excelWorkbooks);

            if (excel != null)
            {
                excel.Quit();
                Marshal.FinalReleaseComObject(excel);
            }
            cells = null;
            range = null;
            sheets = null;
            workSheet = null;
            excelWorkBook = null;
            excelWorkbooks = null;
            excel = null;

            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();
            GC.WaitForPendingFinalizers();

        } 
```

请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:12:57.040

唯一未释放的变量是`sheets`，定义为：

```
 sheets = excelWorkBook.Worksheets; 
```

再说一次，从不使用工作表，因此可以完全省略它，因为工作表被分配为：

```
 workSheet = (Worksheet)excelWorkBook.Worksheets["Sheet1"]; //doesn't use sheets, so sheets can be omitted 
```

或者如果需要工作表，如果它也已发布，我的测试显示 excel 进程正在关闭（在应用程序结束之前，在应用程序结束之后它总是成功关闭）

```
 Marshal.FinalReleaseComObject(sheets); 
```

# extjs4.1 - Combo 在 ExtJS 4.1 中没有采用适当的宽度

> ID：11150481
> 
> 赞同：0
> 
> 时间：2012-06-22T05:08:28.057
> 
> 标签：extjs4.1

我最近将我的 Ext 版本从 4.0.7 升级到 4.1

我使用“tbar”配置在顶部附加了带有组合的网格。现在我面临的问题是，即使有数据或没有数据，我的组合也没有采用适当的宽度。我给了宽度，然后它也不能正常工作。

我附上了图片以供参考，请在其中掠夺。

这是我的网格代码

```
Ext.create('Ext.grid.Panel', {
id: 'SourceGridPanelId',
forceFit: true,
autoScroll:true,
store: sourceGridStore,
sortableColumns:false,
enableColumnHide:false,
tbar: createSourceSiteCombo(sourceSiteStore) 
```

这是我的组合代码

```
var sourceCombo= Ext.create('Ext.form.ComboBox', {
id: "sourceSiteID",
fieldLabel:'Select Site',
inputId: "sourceSiteID_input",
store: sourceSiteStore,
queryMode: 'local',
displayField: 'sourceSiteName',
valueField: 'sourceSiteId',
width:200
 }); 
```

![在此处输入图像描述](../Images/bae8116bde07ff99a1a6e21c7ae4e127.png) 请提出这里缺少的内容。

```
var combo=Ext.create('Ext.form.ComboBox', 
            {
                multiSelect : false,
                id:'SelectComponentId',
                name:'SelectComponentId',
                allowBlank: true,
                inputId:'SelectComponentId_input',
                hideTrigger: false,
                editable: false,
                selectOnFocus: false,
                typeAhead: false,
                disabled: false,
                readOnly: false,
                width: 312,
                store: [['-1','Select User'],['59','Yagna Tel Clear']],
                value:'-1',
                renderTo:'UserBO_SelectComponentId_Div',
                triggerAction: 'all'
            }); 
```

在上面的代码中，如果我删除宽度它工作正常，但采用默认宽度，但我想分配宽度。请提出这里缺少的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:30:29.030

宽度包括`labelWidth`. 因此，如果您的字段标签的宽度为 200，并且您希望字段的宽度也为 200，则需要将宽度设置为 400（+边距）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:02:20.750

我有同样的问题。您需要从组合框配置中取出字段标签，而是以这种方式设置它，在字段名称的工具栏中使用文本对象：

```
dockedItems: [
            {
                xtype: "toolbar",
                dock: "top",
                items: [
                    {
                        xtype: "tbtext",
                        style: "font-weight:bold;",
                        text:  "Select Site:"
                    },
                    createSourceSiteCombo(sourceSiteStore)
                ]
            }
        ] 
```

我相信从 fieldLabel 创建的 fieldLabel dom 对象由于某种原因搞砸了工具栏渲染。

（停靠的项目取代了 tbar，现在是创建工具栏的标准方式）。

# java-me - 如何在 LWUIT-J2ME 中创建具有高级 ui 组件的自定义组件？

> ID：11150482
> 
> 赞同：1
> 
> 时间：2012-06-22T05:08:47.653
> 
> 标签：java-me, lwuit, mobile-application, midp-2.0, cldc

我在 J2ME 中使用配置**CLDC1.1,MIDP2.0**并使用**LWUIT**开发移动应用程序。

现在我想创建一个自定义组件（用户定义的组件），它被添加到`Form`等（在 LWUIT 中）

在自定义组件内部有 2`ComboBoxes`和 1 `TextField (com.sun.lwuit.TextField and com.sun.lwuit.ComboBox)`。

我不知道该怎么做。因为在 LWUIT 中自定义组件是从类派生的。`Component`但是我们需要绘制它们。我们无法添加高级 UI 组件，例如**`Label`, `TextField`,`ComboBox`**。

所以请帮助我。创建一个具有一个或多个高级 UI 组件的自定义组件（LWUT 的 UI 组件，如 com.sun.lwuit.TextField、com.sun.lwuit.ComboBox 等）。

欢迎大家提出宝贵意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:30:16.033

您不能在 LWUIT 中派生 MIDP 高级 UI 类。LWUIT 和类似框架的整个想法是放弃损坏的 MIDP API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:29:47.437

我在 LWUIT 中创建“CustomComponent”的想法如下。

您可以尝试创建一个从 `Container` 扩展的类，并在其中添加 2 个 `ComboBox` 和 `TextField`。因此，您可以将此“CustomComponent”用作高级 UI 组件。

# jquery - IE中的onbeforeunload事件消息错误？

> ID：11150483
> 
> 赞同：0
> 
> 时间：2012-06-22T05:09:09.120
> 
> 标签：jquery, internet-explorer, onbeforeunload

当应用程序在 Internet Explorer 中关闭时，我使用以下事件进行调用。它工作正常，这意味着当我关闭 IE 浏览器选项卡时它会调用。我的问题是，如果我关闭窗口，我会收到来自网页的消息，我会收到带有该消息的“False”语句。如果我删除了此函数中的 return false 语句，我没有访问该函数。如何从 Msg Box 中隐藏 False 语句？ ![在此处输入图像描述](../Images/2fa6735a14dddcde6a7b4eb30376f680.png)

```
window.onbeforeunload = function(event) 
{

           if($.browser.msie)
           {
               alert('Test');
               return false;
            }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:15:58.217

在所有主要网络浏览器的更高版本中，您无法取消“导航离开”。您唯一能做的就是向用户显示一条消息。这是通过返回一个字符串来完成的：

```
window.onbeforeunload = function() {return "your message goes here";} 
```

由于互联网早期滥用此功能，“确定”和“取消”按钮以及周围的文本由浏览器控制。甚至不要依赖显示的自定义消息。例如 Firefox 只是说该页面试图阻止您导航但不会显示您的自定义消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:26:13.947

尝试这个：

返回 Cusom 消息而不是 False

```
window.onbeforeunload = function(event) 
{   
return "Are you sure ";       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T06:25:04.310

尝试这个：

```
window.onbeforeunload = function(event) 
{

           if($.browser.msie)
           {
               alert('Test');
               return "";
            }

 } 
```

# python - OpenID 登录不太好用

> ID：11150484
> 
> 赞同：2
> 
> 时间：2012-06-22T05:09:28.077
> 
> 标签：python, html, google-app-engine, authentication, openid

所以我试图为我的 GAE 应用程序创建自己的 openID 登录名，但我遇到了一个小问题。当我在本地主机上运行它时它运行良好，但是当我尝试部署它时它不会运行。我认为这是因为它实际上并没有尝试访问我的本地主机上的 openID 服务器。

这是我的错误：

```
File "/base/data/home/apps/s~exployretrial/1.359795154076948420/blog.py", line 97, in get
    providerlist.append(users.create_login_url(federated_identity=uri))
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/users.py", line 246, in create_login_url
    req.set_federated_identity(federated_identity)
  File "cpp_message.pyx", line 124, in cpp_message.SetScalarAccessors.Setter (third_party/apphosting/python/protobuf/proto1/cpp_message.cc:2229)
TypeError: <type 'tuple'> has type <type 'tuple'>, but expected one of: str, unicode 
```

这是我的python代码：

```
providers = {
    'Google'   : 'www.google.com/accounts/o8/id', # shorter alternative: "Gmail.com"
    'Yahoo'    : 'yahoo.com',
    'MySpace'  : 'myspace.com',
    'AOL'      : 'aol.com',
    'MyOpenID' : 'myopenid.com'
    # add more here
}

class Login(BlogHandler):
    def get(self):
        user = users.get_current_user()
        providerlist = []
        if user:  # signed in already
            self.redirect('/home')
        else:     # let user choose authenticator
            for uri in providers.items():
                providerlist.append(users.create_login_url(federated_identity=uri))
            self.render('login.html', user = user, providerlist = providerlist) 
```

HTML 代码：

```
<ul>
{% for provider in providerlist %}
  {% if loop.index == 1 %}
    <li><a href="{{ provider }}"><img src="http://openid.net/wordpress-content/uploads/2007/10/aol.png"></a></li>
{% elif loop.index == 2 %}
    <li><a href="{{ provider }}"><img src="http://openid.net/images/get-logos/google.png"></a></li>
{% elif loop.index == 3 %}
    <li><a href="{{ provider }}"><img src="http://openid.net/wordpress-content/uploads/2009/11/yahoo.png"></a></li>
{% elif loop.index == 4 %}
    <li><a href="{{ provider }}"><img src="http://openid.net/images/get-logos/myopenid.png"></a></li>
{% elif loop.index == 5 %}
    <li><a href="{{ provider }}"><img src="http://openid.net/wordpress-content/uploads/2007/10/logo_myspace_s.gif"></a></li>
{% endif %}
{% endfor %}
</ul> 
```

因此，任何见解将不胜感激，如果您需要更多信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:33:16.027

从 GAE 上的应用程序设置中将 更改`Authentication Options`为`(Experimental) Federated Login`而不是`Google Accounts API`.

# ios - iOS UIView在旋转后获取帧

> ID：11150495
> 
> 赞同：4
> 
> 时间：2012-06-22T05:10:55.430
> 
> 标签：ios, uiview, size, orientation, frame

我试图`UIView`在方向改变后得到我的大小。在我的视图控制器中，我实现`didRotateFromInterfaceOrientation:`并调用`setNeedsLayout:`我的视图。在我的观点中`layoutSubviews`，它尝试根据其新的帧大小在旋转后执行一些逻辑，但帧大小尚未更新以反映新的方向（例如，在移动到横向后它仍然是 768x1024 而不是 1024x768）。

如何获得更新的帧大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T05:18:55.323

只是要回答路易斯奥斯卡所说的话，以便问题显示为已回答。解决方案是访问“边界”属性而不是“框架”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T05:26:04.277

请尝试此方法。此方法会在轮换时自动调用。希望对您有所帮助。谢谢。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) {
        NSLog(@"%f,%f",self.view.frame.size.width,self.view.frame.size.height);
    } else if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
        NSLog(@"%f,%f",self.view.frame.size.width,self.view.frame.size.height);
    }
} 
```

# c++ - Visual C++ Form项目中的Boost.asio

> ID：11150497
> 
> 赞同：0
> 
> 时间：2012-06-22T05:11:48.067
> 
> 标签：c++, boost, clr, boost-asio, boost-thread

我已经使用 boost.asio 在视觉 CLR 项目中成功实现了一个网络应用程序。但是当我尝试在 Windows 窗体项目中使用 boost.asio 推荐的通用“语言运行时支持 (/clr)”时，它不起作用`Error 15 error LNK2022: metadata operation failed (8013119F) : A TypeRef exists which should, but does not, have a corresponding TypeDef: (dummy): (0x01000019)`。

我的问题是如何在 Windows 窗体项目中使用 boost.asio 集成我的网络代码。我现在要尝试的是在不同的项目中将所有 boost.asio 实现编译为“无公共语言运行时支持”作为动态库，并将其与 windows 窗体项目链接。

同时，如果你们中的任何人已经尝试过，请帮助我节省一些时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:47:49.677

看来您正在使用 boost::thread。根据[这个](https://svn.boost.org/trac/boost/ticket/2226#comment:2)错误报告、[这个](https://stackoverflow.com/questions/4649960/using-boost-threads-when-compiling-with-clr)问题以及我的个人经验，当静态链接时，boost::thread 将无法与 C++/CLR 项目一起使用。您应该将它们放在非托管库中，然后使用该库，就像您自己说的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:36:59.727

@Mohammad 我想我想通了。我需要在一个空项目中手动添加表单，然后在其中包含 boost/asio。在 Windows 窗体项目中加载 boost/asio 它本身不起作用可能是因为预编译的头文件。现在我必须弄清楚提升线程问题。就像你说的，我会尝试你提出的方法并让你知道。

# python - “角色”对象没有属性“__name__”

> ID：11150501
> 
> 赞同：4
> 
> 时间：2012-06-22T05:12:07.213
> 
> 标签：python, django, django-views, django-generic-views

我正在尝试在我的应用程序中实现基于角色的权限。我有一个装饰器 role_required，我可以将一组用户角色传递给其中，并且只有具有该角色的用户才能访问该视图。我已经为用户正确分配了角色，但是现在我收到 AttributeError 说明`'Role' object has no attribute '__name__'`

`views.py`文件：

```
m_role_required = method_decorator(role_required)
class AddProposal(FormView):

    @m_role_required(roles.space_admin)
    def dispatch(self, *args, **kwargs):
        return super(AddProposal, self).dispatch(*args, **kwargs) 
```

装饰师`role_required`：

```
from django.contrib.auth.decorators import user_passes_test
def role_required(*roles):

    def check_role(user):
        return getattr(user, 'role', None) in roles
    return user_passes_test(check_role) 
```

`Role`班级：

```
class Roles(object):
    _roles_dict = None

    @property
    def roles_dict(self):

        if self._roles_dict is None:
            self._roles_dict = {}
            for item in self._config:
                if isinstance(item, basestring):
                    # An item like 'manager'
                    self._roles_dict[item] = None
                else:
                    # Anything else
                    raise ImproperlyConfigured(_INCORRECT_ARGS)
        return self._roles_dict

    @property
    def choices(self):

        return [(role, role) for role in self.roles_dict.keys()]

    def __init__(self, config=None):

        self._config = config or getattr(settings, 'USER_ROLES', ())

    def __getattr__(self, name):

        if name in self.roles_dict.keys():
            return Role(name=name)
        else:
            raise AttributeError("No such role exists '%s'" % name)

roles = Roles() 
```

我无法找出引发此错误的原因。任何人都可以帮忙。让我用这个添加回溯，

环境：

```
Request Method: GET
Request URL: http://127.0.0.1:8000/en-gb/spaces/bithin/proposal/add/

Traceback:

  48\. class AddProposal(FormView):
File "/home/bithin/gsoc/week3/e-cidadania/src/apps/ecidadania/proposals/views.py" in AddProposal
  78\.     @m_role_required(roles.space_admin)
File "/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py" in _dec
  34\.         update_wrapper(_wrapper, func)
File "/usr/lib/python2.7/functools.py" in update_wrapper
  33\.         setattr(wrapper, attr, getattr(wrapped, attr))

Exception Type: AttributeError at /en-gb/spaces/bithin/proposal/add/
Exception Value: 'Role' object has no attribute '__name__' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:00:07.880

看看代码[`django.utils.decorators.method_decorator`](https://github.com/django/django/blob/master/django/utils/decorators.py)。它返回的方法装饰器不能接受更多参数，除了要装饰的实际函数。这个函数的属性，包括它的，都是通过以通常的 Python 方式`__name__`复制过来的。`functools.update_wrapper`您收到此错误是因为您传递的是`Role`对象而不是函数。

换句话说，您需要像这样重写您的视图：

```
space_admin_required = method_decorator(role_required(roles.space_admin))
class AddProposal(FormView):

    @space_admin_required
    def dispatch(self, *args, **kwargs):
        return super(AddProposal, self).dispatch(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-25T22:44:52.437

这是[为什么 python 实例没有 __name__ 属性的潜在重复？](https://stackoverflow.com/questions/14514838/why-instance-has-no-name-attribution-in-python)

简短的回答：类的名称存储在类中，不能直接用于实例。您可以通过 访问实例的类名`myinstance.__class__.__name__`。

# jquery - 如何手动激活 Twitter Bootstrap 选项卡

> ID：11150505
> 
> 赞同：1
> 
> 时间：2012-06-22T05:12:42.017
> 
> 标签：jquery, twitter-bootstrap

使用 Twitter Bootstrap 的 [Tabbable Tabs][1]，它说：

“通过 javascript 启用可选项卡（每个选项卡需要单独激活）”：

```
 $('#myTab a').click(function (e) {
    e.preventDefault();
  $(this).tab('show');
   }) 
```

然后您可以“*以多种方式激活单个选项卡”*：

```
$('#myTab a[href="#profile"]').tab('show'); // Select tab by name
$('#myTab a:first').tab('show'); // Select first tab
$('#myTab a:last').tab('show'); // Select last tab
$('#myTab li:eq(2) a').tab('show'); // Select third tab (0-indexed) 
```

当我单击每个选项卡并将其#id 显示在 URL 中时，如何单独激活每个选项卡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:08:39.620

这是在 url 中添加哈希，您可以添加以下内容：

```
$('a').click(function(e){

e.preventDefault();
if(window.location.hash) window.location.hash = '';
window.location.hash = $(e.target).attr('class'); //or id, or other attribute

}); 
```

当用户单击“a”标签（或您的标签 ID 等）时，然后删除以前的哈希并附加新的哈希。基本上使用window.location.hash。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T05:12:04.073

在位置 url 中正确显示哈希的方法是**删除**该`e.preventDefault();`行。我假设您的 A 标签指向 #hash_tags ，如下所示：`<a href="#mytasks">My Tasks</a>`。这是我如何使用 jQuery 激活引导选项卡的示例：

```
$('#tabs li a').each(function () {
  $(this).click(function (e) {
    $(this).tab("show");
  });
}); 
```

# ios - 我可以将 CFUUID 转换为 30 个字符或更少吗？

> ID：11150516
> 
> 赞同：3
> 
> 时间：2012-06-22T05:13:53.720
> 
> 标签：ios, objective-c, guid

我需要为我的 iOS 用户创建一个唯一的标识符。不幸的是，它将被保存到的数据库的设置长度为 30 个字符，而 CFUUID 为 36（如果删除破折号，则为 32）。

有没有办法把它变成一个更小的字符串？我认为 CFUUID 是十六进制的，所以可以将其转换为完整的 ASCII 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:35:54.470

Jeff Atwood 在[装备我们的 ASCII Armor](http://www.codinghorror.com/blog/2005/10/equipping-our-ascii-armor.html)中对此进行了介绍。[Base64](https://stackoverflow.com/questions/392464/any-base64-library-on-iphone-sdk)编码的GUID 产生 22 个（包括 24`==`个）字节。您还可以根据帖子使用其他 ascii 格式，但 Base64 可能对数据库服务器最友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:20:16.333

[首先，使用https://stackoverflow.com/a/7318062/382374](https://stackoverflow.com/a/7318062/382374)之类的东西将您的十六进制字符串转换为 NSData （一定要去掉“-”）。[然后使用http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php](http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php)之类的东西将 NSData 转换为 base64。

# machine-learning - 余弦相似度聚类

> ID：11150523
> 
> 赞同：10
> 
> 时间：2012-06-22T05:14:38.030
> 
> 标签：machine-learning, cluster-analysis, distance, cosine-similarity

我有一个想要聚类的大型数据集。我的试运行集大小是 2,500 个对象；当我在“真正的交易”上运行它时，我将需要处理至少 20k 个对象。

这些对象之间具有余弦相似性。这种余弦相似度不满足作为数学距离度量的要求；它不满足三角不等式。

我想以某种“自然”的方式对它们进行聚类，将相似的对象放在一起，而无需事先指定我期望的聚类数量。

有谁知道可以做到这一点的算法？真的，我只是在寻找不需要 a) 距离度量和 b) 预先指定数量的集群的任何算法。

非常感谢！

这个问题之前在这里被问过： [Clustering from the cosinesimilarity values](https://stackoverflow.com/questions/5841282/clustering-from-the-cosine-similarity-values) （但这个解决方案只提供 K-means 聚类），在这里： [Effective clustering of asimilarity matrix](https://stackoverflow.com/questions/10086551/effective-clustering-of-a-similarity-matrix) （但这个解决方案相当模糊）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T05:31:28.607

Apache mahout 有许多聚类算法，包括一些不需要您指定 N 并且允许您指定距离度量的算法。

均值偏移聚类类似于 k-means，但没有预先指定数量的聚类[https://cwiki.apache.org/confluence/display/MAHOUT/Mean+Shift+Clustering](https://cwiki.apache.org/confluence/display/MAHOUT/Mean+Shift+Clustering)。

然后更一般地说，如果您想尝试各种算法，有绝对丰富的可用于 R 的复杂包（包括一些 EM 的变分贝叶斯实现，它们将选择最佳数量的集群）已被证明非常有用我过去的一些研究：http: [//cran.r-project.org/web/views/Cluster.html](http://cran.r-project.org/web/views/Cluster.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T19:53:07.233

您也可以尝试 Affinity Propagation (http://www.psi.toronto.edu/index.php?q=affinity%20propagation)。该算法以相似度矩阵作为输入，并且我相信它还可以自动调整聚类质心的数量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T22:53:08.600

实际上，大多数需要“距离函数”的算法并不要求它是度量的。

DBSCAN 可以被概括（参见维基百科）到一个甚至从远处抽象出来的版本，它只需要有某种“密集”的概念。（DBSCAN 也不需要事先知道簇的数量）

但即使对于 k-means——它对距离有相当严格的要求，甚至超出了度量——也有一种称为球形 k-means 的变体。

无论如何，在数据库上下文中，“度量”的全部要求都是空想的。在任何现实世界的数据中，可能有两条坐标相同的记录，所以最多你会有一个伪度量。三角不等式主要用于优化（例如，通过使用具有严格三角不等式要求的 M-tree 索引）或利用此属性的加速 k 均值。

# .net - 具有可选参数的索引操作的控制器

> ID：11150525
> 
> 赞同：0
> 
> 时间：2012-06-22T05:14:57.007
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我想要一个带有可选参数的“用户”控制器的索引操作。

```
/Users/{id} 
```

或者

```
/Users 
```

我想避免：

```
/Users/Index/{id} 
```

或者

```
/Users/Index/ 
```

我添加了一个 Route 以将 /Users/{id} 映射到 Index 操作。

```
routes.MapRoute( "Users",
                 "Users/{id}",
                 new { controller = "Users", action = "Index", id =
                 UrlParameter.Optional}); 
```

这很好用。当我向用户控制器添加另一个操作“添加”时，我遇到了一个问题，该操作也带有可选参数。我之前添加的路线误解了 Add 作为 Index 操作的参数。为 /Users/Add 触发“索引”操作。

我怎样才能得到最好的两者？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:20:38.663

将*约束*属性设置为仅允许数字。那应该可以解决您的路由问题。

```
routes.MapRoute( "Users",
    "Users/{id}",
    new { controller = "Users", action = "Index", id = UrlParameter.Optional },
    new { id = "[0-9]+" }
); 
```

*编辑*.

您可以在不使用正则表达式约束的情况下以不同的方式进行操作。显式添加路由*用户/添加*，将其添加到*索引*路由**之前：**

 *```
routes.MapRoute( "Users",
    "Users/Add/{id}",
    new { controller = "Users", action = "Add", id = UrlParameter.Optional }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:20:21.590

您无需为控制器上的每个操作创建路由。在项目创建开始时 global.asax 中的默认路由足以满足您的需求：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Account", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```*

# iphone - 将 ADBannerView 移出屏幕？

> ID：11150526
> 
> 赞同：0
> 
> 时间：2012-06-22T05:14:58.890
> 
> 标签：iphone, xcode, uiview, adbannerview

是的，我已经看到了另一个问题，但它们没有帮助。所以我想把 iAD 横幅从我的视野中移开。它在 iPhone 上，在纵向视图的屏幕顶部。这是我的代码。我在哪里错了？

```
//Move the banner off the screen.
- (void)moveBannerViewOffScreen
{
   if (self.bannerView.isHidden == NO)
   {
       [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
       bannerView.frame = CGRectOffset(bannerView.frame, 0, bannerView.frame.size.height);
       [UIView commitAnimations];
       self.bannerView.hidden = YES;
   }    
}

//Move the banner on the screen.
- (void)moveBannerOnScreen
{
   if (self.bannerView.isHidden ==YES)
   {
       [UIView beginAnimations:@"animateAdBannerOn" context:NULL];
       bannerView.frame = CGRectOffset(bannerView.frame, 0, -bannerView.frame.size.height);
       [UIView commitAnimations];
       self.bannerView.hidden = NO;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:41:12.693

更好的是，您可以像这样为 iphone 更改“moveBannerViewOffScreen”中的代码

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionNone forView:bannerView cache:YES];
bannerView.frame = cgRectMake(0,-50,50,320);
[UIView commitAnimations]; 
```

在“moveBannerViewOnScreen”中

```
 [UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionNone forView:bannerView cache:YES];
bannerView.frame = cgRectMake(0,0,50,320);
[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:48:29.140

您不需要隐藏相关代码。此外，您的代码每次都会将横幅视图向上或向下移动，因为您逐渐应用偏移量。最好每次手动设置框架：

```
//Offscreen frame
bannerView.frame = CGRectMake(0, -bannerView.frame.size.height, bannerView.frame.size.width, bannerView.frame.size.height);

//Onscreen frame
bannerView.frame = CGRectMake(0, 0, bannerView.frame.size.width, bannerView.frame.size.height); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T21:22:58.070

另一个简单的答案：[myBannerView1 setAlpha:0];

# android - 带 LoaderManager 的 CursorLoader 如何知道将光标发送到 CursorAdapter？

> ID：11150527
> 
> 赞同：22
> 
> 时间：2012-06-22T05:15:01.360
> 
> 标签：android, android-contentprovider, android-loadermanager, android-cursorloader

我正在浏览我的一些代码，我意识到我实际上并不知道 a`CursorLoader`和`LoaderManager`组合如何与`CursorAdapter`连接一起使用。这是我感到困惑的部分。

```
agendaAdapter = new MyAgendaAdapter(this, null);

makeProviderBundle(new String[] {"_id", "event_name", "start_date", "start_time",
    "end_date", "end_time", "location"}, "date(?) >= start_date and date(?) <= end_date", 
new String[]{getChosenDate(), getChosenDate()}, null);

getLoaderManager().initLoader(0, myBundle, MainDisplayActivity.this);
list.setAdapter(agendaAdapter); 
```

`query()`那么我自定义的方法如何`ContentProvider`知道将其发送到特定的`CursorAdapter`？我只是没有看到联系。我了解其中的所有其他内容，但这个问题是关于什么的。哦，我应该提一下，代码工作正常。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-22T15:04:38.917

### 首先，查看[这篇文章](http://www.androiddesignpatterns.com/2012/06/content-resolvers-and-content-providers.html)和[这篇文章](http://www.androiddesignpatterns.com/2012/07/loaders-and-loadermanager-background.html)中的代码示例，以更深入地了解该过程的工作原理。

现在，回答你的问题...

> 我自定义的 query() 方法如何`ContentProvider`...？

好吧，首先要记住，`getContentResolver().query()`它不会`query`直接调用内容提供者的方法。您正在调用内容解析器的查询方法，该方法解析`Uri`，确定您希望调用的提供者，*然后*调用您的提供者的`query`方法[。](https://play.google.com/store/apps/details?id=com.alexjlockwood.twentyfortyeight)

> 查询如何发送到特定的`CursorAdapter`？

我将使用[**API 演示**](http://developer.android.com/reference/android/app/LoaderManager.html)作为示例，引导您完成整个过程。请注意，API 演示使用 a`ListFragment`而不是 a `ListActivity`（在此问题的上下文中差异并不重要）。

* * *

1.  **首先，创建（并设置）`CursorAdapter`** .

    ```
    mAdapter = new SimpleCursorAdapter(
            getActivity(),
            android.R.layout.simple_list_item_2, 
            null,
            new String[] { Contacts.DISPLAY_NAME, Contacts.CONTACT_STATUS },
            new int[] { android.R.id.text1, android.R.id.text2 }, 
            0); 
    ```

    执行此语句后，`SimpleCursorAdapter`知道它应该如何将游标数据与您的视图相关联。光标`Contacts.DISPLAY_NAME`列中的任何数据都将与具有 id`android.R.id.text1`等的视图相关联。

    请注意，您已将`null`游标作为第三个参数传递给构造函数。这*非常重要*，因为我们还没有查询任何数据（这是`LoaderManager`and`CursorLoader`的工作）。

2.  **接下来，初始化加载器。**

    ```
    getLoaderManager().initLoader(0, null, this); 
    ```

    这告诉`LoaderManager`创建和启动`Loader`对应的 id `0`。

3.  **`LoaderManager`来电`onCreateLoader(int id, Bundle args)`。_**

    `onCreateloader`返回`Loader<Cursor>`接口的子类（即 a `CursorLoader`，在这种情况下）。这`CursorLoader`将执行初始查询，并在数据更改时自行更新。

    如果您的活动/片段有多个加载器，那么您将使用`switch(id)`来确定已指示开始加载过程的特定加载器。

4.  **查询的游标被传递给`onLoadFinished()`.**

    `CursorLoader`在步骤 3 中实例化并返回后，立即在`CursorLoader`单独的线程上执行初始查询并返回游标。当`CursorLoader`完成查询时，它将新查询的游标返回给`LoaderManager`，然后将游标传递给`onLoadFinished`方法。从文档中，“`onLoadFinished`当先前创建的加载器完成加载时调用该方法。”

5.  **查询的数据与`CursorAdapter`**.

    ```
    mAdapter.swapCursor(data); 
    ```

    请注意，这`onLoadFinished`通常也是您使用查询数据更新活动/片段的 UI 的地方。在这种情况下，这不是必需的，正如我们之前所说的那样`setListAdapter(mAdapter)`。`ListFragment`知道如何使用（见第`CursorAdapter`1 步）... 我们需要做的就是将光标传递给适配器`swapCursor`，然后我们`ListFragment`将负责在屏幕上显示数据。

如果您有任何问题（或者是否有任何错别字等），请告诉我。

* * *

## TL;博士

包含查询数据的游标与`CursorAdapter`in相关联`onLoadFinished`。这通常通过调用来完成`mAdapter.swapCursor(data)`。

# .net - 有没有像 Rammap 这样的开源软件？

> ID：11150528
> 
> 赞同：2
> 
> 时间：2012-06-22T05:15:14.573
> 
> 标签：.net, windows-server-2008, system, ram, metafile

我有一个一直在运行的服务器，系统制作元文件然后保存在内存中，这增加了我的 RAM 的使用率，所以我需要使用软件[Rammap](http://technet.microsoft.com/en-us/sysinternals/ff700229.aspx)清空系统工作集，这是一个非常忙碌的例程。我必须每天做两次。我希望会有一个应用程序在给定时间段后自动清空系统工作集。经过漫长而深入的研究，我没有发现任何类似 Rammap 的东西，甚至没有一个库。

因此，任何人都知道通过使用我们将能够使应用程序自动清空系统工作集的任何方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T21:10:38.800

如本文所述，有一个实用程序可以执行此[操作](https://stackoverflow.com/a/20585554/1671251)。您可以使用 Windows 任务计划程序让它定期运行。

或者，如果您想从 Windows 的备用缓存中删除一组特定的文件，您可以使用 NtCreateFile（WDM 的一部分）打开它们并调用 FlushFileBuffers 从备用缓存中清除它们。这是我用一个小的命令行应用程序测试它所做的。您需要包含 winternl.h 并拉入 ntdll.lib。这显然可以变得更加健壮 - 它是这种状态下的快速测试应用程序。（我尝试使用 NtCreateFile 的 CreateFile instegad，这样我就不需要 WDK，但还没有走这条路。）

```
int _tmain(int argc, _TCHAR* argv[])
{
   if (argc < 2)
   {
      _tprintf(TEXT("No filepath entered.  Full path required.\r\n"));
      return 0;
   }

   // Convert the "DOS" name to a Windows object model name so NtCreateFile can handle it below
   // MAX_FILE_PATH_LEN is just #define'd elsewhere to 1024
   TCHAR filePath[MAX_FILE_PATH_LEN] = { 0 };
   TCHAR deviceName[8] = { 0 };
   _tcsncpy_s(deviceName, 8, argv[1], 2);
   QueryDosDevice(deviceName, filePath, MAX_FILE_PATH_LEN - 1);
   _tcscat_s(filePath, MAX_FILE_PATH_LEN, &argv[1][2]);

   _tprintf(TEXT("Converted: \"%s\"\r\n       ==> \"%s\"\r\n"), argv[1], filePath);

   UNICODE_STRING usFilePath = { 0 };
#ifndef _UNICODE
   WCHAR filePath_W[MAX_FILE_PATH_LEN];
   size_t convCount = 0;
   mbstowcs_s(&convCount, filePath_W, MAX_FILE_PATH_LEN, filePath, MAX_FILE_PATH_LEN);
   usFilePath.Buffer = filePath_W;
#else
   usFilePath.Buffer = filePath;
#endif
   // Lengths specifically noted as bytes, not characters
   usFilePath.Length = wcslen(filePath) * sizeof(WCHAR);
   // Leaving one character for null term
   usFilePath.MaximumLength = (MAX_FILE_PATH_LEN - 1) * sizeof(WCHAR);

   OBJECT_ATTRIBUTES objAttrs;
   InitializeObjectAttributes(&objAttrs, &usFilePath, OBJ_CASE_INSENSITIVE | OBJ_KERNEL_HANDLE, NULL, NULL)

   IO_STATUS_BLOCK ioStatus_OpenFile = {0};
   HANDLE hFile = INVALID_HANDLE_VALUE;
   NTSTATUS statusCreateFile = NtCreateFile(&hFile, FILE_GENERIC_READ | FILE_GENERIC_WRITE, &objAttrs, &ioStatus_OpenFile, 0, FILE_ATTRIBUTE_NORMAL, FILE_SHARE_READ | FILE_SHARE_DELETE, FILE_OPEN, FILE_SYNCHRONOUS_IO_NONALERT | FILE_NON_DIRECTORY_FILE, NULL, 0);
   if (NT_SUCCESS(statusCreateFile))
   {
      _tprintf(TEXT("Opened file successfully.\r\n"));

      IO_STATUS_BLOCK fileFlushStatus = { 0 };
      BOOL bFlushResult = FlushFileBuffers(hFile);
      _tprintf(TEXT("FlushFileBuffers returned %d; last error: %d\r\n"), bFlushResult, GetLastError());

      // Close the file
      statusCreateFile = NtClose(hFile);
      if (NT_SUCCESS(statusCreateFile))
         _tprintf(TEXT("File closed successfully.\r\n"));
      else
         _tprintf(TEXT("File close error: %08x\r\n"), statusCreateFile);
   }
   else
   {
      //WriteIoStatusResultLine is just a function to dump an IO_STATUS_BLOCK to output
      //WriteIoStatusResultLine(&ioStatus_OpenFile);
      _tprintf(TEXT("NtCreateFile error, Status=%08x\r\n"), statusCreateFile);
   }

   return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-06T11:38:00.110

随着时间的推移，很多人报告了这个问题。Windows 缓存算法存在一些缺陷，如果您碰巧遇到它们，缓存会失去控制，直到达到 99%。为了恢复服务器性能，必须清除系统工作集，而 Windows 似乎永远不会自行执行此操作，尤其是在处理大型文件服务器时。该工具是免费软件，位于我们的 BackupChain 网站的免费工具部分。您设置了 RAM 限制，仅此而已。清空是自动完成的希望这有帮助！

# firefox - 在 Firefox/Chrome 中调用 MS Office 应用程序，例如 Word、Excel、PowerPoint

> ID：11150532
> 
> 赞同：1
> 
> 时间：2012-06-22T05:15:44.053
> 
> 标签：firefox, web-applications, plugins, ms-office

我需要使用 WebDav 在本地 Word/Excel/PowerPoint 应用程序中编辑远程 MS Office 文档。这些文档驻留在支持 WebDav 的非 SharePoint 服务器上。

我发现用于 Firefox 的 Microsoft Office Web Apps Browser Plugin 允许在 skydrive.live.com 上编辑 Office 文档。我的问题是，此插件是否必须与支持 Office Web Apps 的服务器（例如 SharePoint 2010）一起使用？它可以与启用 WebDav 的非 SharePoint 服务器一起使用吗？

使用此插件的任何 API 文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:02:53.070

问题的答案在这里：http: [//msdn.microsoft.com/en-us/library/ff407576](http://msdn.microsoft.com/en-us/library/ff407576)

基本上，我们可以使用 FFWinPlugin 插件，其实现在 NPSPWRAP.dll 中定义，**这**是一个由 Microsoft 的 Office Web Apps Browser Plugin 提供的动态链接库。您需要做的就是在服务器的响应中定义一个对象，如下所示：

```
<object id="winFirefoxPlugin" type="application/x-sharepoint" width="0" height="0" style="visibility: hidden;"> 
```

创建一个简单的 javascript 代码，获取上述对象，该对象由 Office Web Apps 浏览器插件隐式处理，为您提供一个 FFWinPlugin 对象。您需要做的就是调用此对象的相应**EditDocument**方法进行编辑。

# ios4 - 在 SecondViewController 中的 UITableView 上显示 FirstViewController 的数据

> ID：11150537
> 
> 赞同：0
> 
> 时间：2012-06-22T05:16:24.777
> 
> 标签：ios4

我是 iPhone 应用程序开发的新手。我的要求是：

在我的`FirstViewController.xib`，我有 2`UITextField`秒。我想在 in 中显示这两个文本字段的`UITableView`数据`SecondViewController`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:51:05.090

我希望你有一个按钮可以在 SecondViewController 中导航。点击按钮时，您应该导航到 SecondViewController。

在这里，您可以在点击按钮时将这两个文本字段数据传递到数组中，并将该数组分配给 SecondViewController 的对象。

FirstViewcontroller 按钮点击事件可能如下所示。

```
-(void) buttonTapped
{  
    SecondViewController *svc = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
    NSArray *arr = [NSArray arrayWithObjects:textField1.text,textField2.text,nil];
    svc.tableData = arr;
    [self presentModalViewController:svc animated:YES];       
} 
```

在 SecondViewController 中有一个属性 tableData。

```
@interface SecondViewController : UITableViewController {

    NSArray *tableData; // contains array of data to be displayed in tableview 
}
@property (nonatomic,retain) NSArray *tableData;
@end 
```

您的 tableview 委托方法可能如下所示。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)aTableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)aTableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CellIdentifier";

    // Dequeue or create a cell of the appropriate type.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];            
    }

    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
    return cell;
} 
```

祝你好运。

# c# - C# Tabcontrol 捕获 mousedown 事件

> ID：11150538
> 
> 赞同：2
> 
> 时间：2012-06-22T05:16:28.180
> 
> 标签：c#, .net, winforms, events, tabcontrol

tabcontrol 的 mousedown 事件仅捕获在 Tabcontrol 顶部的选项卡上所做的鼠标单击，而不是在控件内添加的内容（空白）。

有没有办法捕获在 tabcontrol 内部发生的 mousedown 事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T05:29:14.217

选项卡控件中的选项卡页本身就是控件，您可以在其上捕获鼠标事件。如果从设计器添加，您可以直接将它们添加到特定的标签页

```
 private void tabPage1_Click(object sender, EventArgs e)
    {

    } 
```

或更通用的方法，通过向所有现有标签页添加事件（如果页面是动态的，您可能也希望捕获标签添加/删除事件）

```
 foreach(TabPage tp in tabControl1.TabPages)
            tp.Click += new EventHandler(YourClickEventHandler); 
```

# lotus-notes - 混合应用程序 - 如何从 LotusScript 在 XPiNC 中打开文档（然后关闭它）

> ID：11150539
> 
> 赞同：1
> 
> 时间：2012-06-22T05:16:44.137
> 
> 标签：lotus-notes, xpages

我正在通过在 XPinc 中实现新功能请求来将现有的大型应用程序迁移到 XPages。可以说，XPages 是通过隐形迁移。

我的第一个任务是一个全新的文档类型，它将是对具有自己的注释形式的主文档的响应。我对我现在正在开发的两个系统有这个要求。我计划使用 lotusscript 按钮来获取响应文档的句柄（如果不存在，则创建一个新的），然后使用 XPage 而不是表单打开该文档。然后用户与 XPage 交互，保存并关闭。

我使用的每种方法都有一些缺点，所以我想我会看看是否有最佳实践——谷歌并没有给我太多。到目前为止，这是我尝试过的以及它得到了我的地方：

**1) 使用 uiworkspace.EditDocument(False, doc)** 如果您已将表单设置为打开 XPage，则此选项非常有效。但是，他们必须进行编辑，我更愿意在编辑模式下打开。它在我的一个应用程序上运行良好，但另一个在打开文档之前抛出错误“Notes error: No error”。

**2) uiworkspace.EditDocument(True, doc)** 我希望这会起作用，但我的 XPage 仍然以读取模式打开。第二个应用程序仍然会抛出“无错误”错误。数据源的默认操作是“编辑文档”，所以我不确定为什么这不会在编辑模式下出现。

**3) notes:// 文档的 URL** 这在基于服务器的应用程序上非常有效，但如果我在本地副本上尝试这个，我会收到错误“XPages 无法处理应用程序启动页面”。我并不绝对需要本地副本，但我知道一旦我破坏它们，我就会得到一个坚持让它离线的用户。

**4) http:// 文件的url 这个** 其实还没有完全测试过，但是登录提示就意味着这是不得已而为之。

因此，打开文档没有完美的解决方案。我做错了吗？有没有更好的办法？

另外，在 XPiNC 中打开文档后，关闭文档的最佳方法是什么？有什么建议么？

干杯，

布伦丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:43:21.327

本地 http:// 很可能不起作用，因为您不知道端口。

您是如何在本地构建 Notes URL 的？

您需要： notes:///path_to_nsf_repid_wont_work.nsf/0/unid?OpenDocument （或 ?EditDocument）

。或者。

notes:///path_to_nsf_repid_wont_work.nsf/xsp/yourPage.xsp?documentId=[UNID]

（是的，这是 3 个斜线）

我将它用于[附件](http://www.wissel.net/blog/d6plinks/SHWL-86QKNM)，因此您可以使用其中的一些来捕获所需的 URL。还要检查[Mindoo Tool](http://www.mindoo.com/web/blog.nsf/dx/02.02.2012162412KLEL3Q.htm)及其[XPage to Eclipse](http://www.mindoo.com/web/web.nsf/id/pa_products_xpages2eclipse_en.html)工具

# android - 如何在android中实现多点触控手势

> ID：11150548
> 
> 赞同：5
> 
> 时间：2012-06-22T05:18:09.943
> 
> 标签：android, opengl-es-2.0, multi-touch

我开发了一个应用程序，其中显示了一个立方体`OpenGL ES`，当用户触摸屏幕并滑动它时，立方体会从一个位置转换到另一个位置（一种平移实现）——用`glTranslatef()`

我已经使用 `MotionEvent.ACTION_MOVE`过这种滑动动作。现在我的问题是我想使用多点触控来实现这一点，所以用户必须使用至少两个手指进行翻译。

已经尝试使用`GestureDetector.SimpleOnGestureListener`&`ScaleGestureDetector`但仍不清楚。

任何人都可以帮助我解决这个问题。提前致谢 ！！

# jquery - 是否可以编辑人脸检测jquery？

> ID：11150549
> 
> 赞同：1
> 
> 时间：2012-06-22T05:18:17.533
> 
> 标签：jquery, face-detection

我想问你..

我找到了一个链接，该链接提供了使用 jquery 对图像进行人脸检测的代码，

链接在这里...

[http://jquerybyexample.blogspot.com/2010/11/face-detection-using-jquery.html](http://jquerybyexample.blogspot.com/2010/11/face-detection-using-jquery.html)

我的问题是，是否可以编辑脚本以检测汽车图像上的车轮..

详细我会给你一张图片..

[http://www.kiosban.com/wp-content/uploads/2012/06/bha.png](http://www.kiosban.com/wp-content/uploads/2012/06/bha.png)

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:28:38.410

您正在查看的项目使用名为[OpenCV的软件](http://opencv.willowgarage.com/wiki/)

您正在使用的特定插件是通过已识别的真实数据（人脸）*训练生成的数据。*该软件使用示例来*学习*如何找到感兴趣的主题。

在您的情况下，车轮可能很容易训练。这取决于您希望以多少个不同的角度识别它们。车轮笔直（从侧面）看起来像 O，OpenCV 应该相对容易识别。您甚至不必像人脸检测那样使用像**haar 训练那样复杂的东西。**您可能会使用其他一些边缘检测来识别相似平面上的圆形（深色）。

# java - 使用 list get 方法获取字符串

> ID：11150550
> 
> 赞同：-1
> 
> 时间：2012-06-22T05:18:18.180
> 
> 标签：java, list

我有一个像这样的抽象类

```
public abstract class Command {
    public abstract void execute(String keyWord[]);
    String keyWord;
    public Command(String keyWord) {
        this.keyWord = keyWord;
    }
} 
```

和一个像这样管理它的类：

```
public class CommandManager {

    private static List<Command> commands = new ArrayList<>();

    public static void append(Command command) {
        commands.add(command);
    }

    static {

    }

    public static void load() {
        append(new Command("lol") {

            @Override
            public void execute(Player player, String[] keyWord) {
                System.out.println("hi");
            }
        });
    }

    public boolean handle() {
        String cmd[] = input.split(" ");
        Command command = commands.get(cmd[0].toLowerCase()); //this
        if (command != null) {
            command.execute(player, cmd);
            return true;
        }
        return false;
    }

} 
```

我得到的错误是我的评论所在。如何使用 get 方法从 Command 类中获取字符串？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:23:29.997

问题是 get() 方法需要一个`int`表示列表索引的值。

*   [Java SE 6 -- List.get(i)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#get%28int%29)
*   [Java SE 7 -- List.get(i)](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#get%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:22:21.080

> 如何使用 get 方法从 Command 类中获取字符串？

~~最简单的~~ *一个简单*的方法是`keyWord`在`Command`类中创建getter方法，然后

```
commands.get(index).getKeyWord(); //this will return the string 
```

这`index`是一个整数变量，指示列表中的命令类索引。并且不要忘记检查空值。获取方法将类似于

```
public String getKeyWord() {
    return this.keyWord;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:22:58.413

命令是一个`ArrayList`，`get()`函数接受一个`int`参数。

要么使用数字，要么使用 a`Map<String,Command>`作为您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T05:26:27.007

我猜你想要具有匹配关键字的命令，所以试试这个：

```
Command command = null;
for (Command c : commands) {
    if (c.keyWord.equalsIgnoreCase(cmd[0])) {
        command = c;
        break;
    }
}

// command will not either be null or be the Command whose keyword matches 
```

ps 我建议使用 goolging 来获取有关 java 和 OOP 的教程。

# android - 在 Android 2.3.3 上使用 OpenCv 的本机代码时引发 UnsatisfiedLinkError

> ID：11150555
> 
> 赞同：0
> 
> 时间：2012-06-22T05:18:39.023
> 
> 标签：android, opencv, java-native-interface, android-ndk

我想在 Android 2.3.3 中使用 OpenCV 2.4.0 本机代码。为此，我使用 NDK release-8在 Windows 7 上`lib.so`使用脚本构建共享库`ndk-build.cmd`。我使用 Eclipse 创建项目并构建 .apk 文件。

这是问题所在，`UnsatisfiedLinkError`当我尝试`System.loadLibrary(`在 Java 代码中使用 ) 加载共享库时抛出异常。我已经尝试对 NDK 中的*hello-jni*示例做同样的事情，它工作得非常好。

我按照[此页面上](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html)的说明创建项目并编写`Android.mk`和`Application.mk`文件。

这是我的java代码：

```
package my.package.ocvtest1
// import android.foo.bar statements

public class OCVTest1 extends Activity
{

    public void onCreate(Bundle savedInstance)
    {
        super.onCreate(Bundle savedInstance)
        // code to display strings returned by native functions
    }

    public native String funtionName1();
    public native String functionName2();

    static
    {
        System.loadLibrary("ocvtest1");
    }

} 
```

这是`(Project dir)/jni/ocvtest1.c`实现本机功能的文件：

```
#include <jni.h>

// Other header files and some global variables

jstring Java_my_package_ocvtest1_OCVTest1 (JNIEnv *ptr, jobject obj)
{
    // code here
}

jstring Java_my_package_ocvtest1_OCVTest1_functionName2 (JNIEnv *ptr, jobject obj)
{
    // code here   
}

// End of file 
```

我已经用谷歌搜索了这个问题并尝试了解决方案，即使在实施了这些解决方案之后，我也得到了这个异常。这是我到目前为止尝试过的所有事情：

`libopencv_java.so`通过将和静态`*.a`库文件复制到`(Project dir)/libs`和文件夹中来使用动态链接，`(Project dir)/obj/local`并将java源代码的静态块更改为

```
static
{
    System.loadLibrary("opencv_java");
    System.loadLibrary("ocvtest");
} 
```

`OPENCV_LIB_TYPE:=STATIC`通过添加如下使用静态链接

```
include $(CLEAR_VARS)
OPENCV_LIB_TYPE:=STATIC
include (<Path to Opencv.mk>) 
```

`javah.exe my.package.OCVTest1`使用动态链接时在命令提示符下执行生成的包含头文件。

更改`armeabi-v7a`为文件`armeabi`中的 abi 版本变量`Application.mk`。

对于上述所有更改，为了确保库文件已加载到应用程序的 lib 文件夹中，我执行了

```
adb push <path to library on disk> <path to /lib in app> 
```

它将库文件复制到手机上的正确目录中。

在尝试了所有这些修复后，我仍然无法解决此异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:47:59.897

> 通过将 libopencv_java.so 和静态 *.a 库文件复制到 (Project dir)/libs 和 (Project dir)/obj/local 文件夹中来使用动态链接，并将 java 源代码的静态块更改为

您只需复制`libopencv_java.so`（`*.a`不需要文件）到`(Project dir)/libs/armeabi-v7a`.

你还有：

```
public native String funtionName1(); 
```

但是在本机 c 代码中只有这些功能：

```
jstring Java_my_package_ocvtest1_OCVTest1 (JNIEnv *ptr, jobject obj) // mistake?
jstring Java_my_package_ocvtest1_OCVTest1_functionName2 (JNIEnv *ptr, jobject obj) 
```

似乎第一个函数的名称是错误的。

那应该可以解决您的问题。

# .net - 一个类变量的调用方法到另一个类变量

> ID：11150557
> 
> 赞同：0
> 
> 时间：2012-06-22T05:19:05.113
> 
> 标签：.net, wpf

我在访问课程时遇到了一些问题。问题如下。

```
public class A1ViewModel
{
  int A1no;

  public int A1NO 
 {
    get { return A1no;}
    set { A1no=value;
          propertychanged("A1NO");
          M1()
        }
  }
  public M1()
  {
     // do some thing
  }
}

public class A2ViewModel
{
  int A2no;

    public int A2NO 
 {
    get { return A2no;}
    set { A2no=value;
          propertychanged("A2NO");
          M2()
        }
  }
  public M2()
  {
     //do some thing
  }
}

public class mainAViewModel()
{
  var a1ViewModel = new A1ViewModel();
  var a2ViewModel = new A2ViewModel();
} 
```

这里 A1ViewModel 是一个用户控件的视图模型，A2ViewModel 是另一个用户控件的视图模型。mainAViewModel 是主要的 ViewModel。在 mainAViewModel 中。我有这两个（A1，A2）视图模型。问题是，如果 A1 viewmodel 中发生任何更改，那么我必须更新 A2 viewmodel 属性。请指导我。我怎么能做到这一点。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:26:45.843

我认为您尝试做的将涉及使用派生类：

```
public class A1 : A2
{
  int A1no;

  public M1()
  {
     this.M2();
  }
}

public class A2
{
  int A2no;

  protected M2()
  { 
     // Do something
  }
}

public class mainA()
{
  var a1 = new A1();
  var a2 = new A2();

  a1.M1();
} 
```

这样，A1 继承自它的基类 A2。然而，A1 类型的对象可以访问 A2.M2 方法的唯一方法是使用 public 或 protected 访问修饰符。如果您在方法声明之前没有放置任何访问修饰符，则默认为私有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:37:07.327

一些 MVVM 框架通过使用调解器来实现这一点。看看 CinchV2 框架是如何使用它的。例如：

使用以下内容来监听 A2 视图模型的变化

```
Mediator.Instance.RegisterHandler<int>(MessageKeys.AgreementVersionChanged, OnAgreementVersionChanged); 
```

并使用以下内容在您的 A1 视图模型中发送更改

```
Mediator.Instance.NotifyColleagues(MessageKeys.AgreementVersionChanged, AgreementModel.AgreementId); 
```

CinchV2 框架中的中介器最棒的地方在于，您可以直接抓取其中的一部分，而不必实现完整的 CinchV2 框架。

# blackberry-webworks - 如何将android应用程序移植到blackberry 7.1 os

> ID：11150561
> 
> 赞同：2
> 
> 时间：2012-06-22T05:19:48.103
> 
> 标签：blackberry-webworks

我有一个安卓应用，我想把它移植到黑莓上。研究表明 dat 程序将 android 应用程序移植到 BB 10os，这在以前的 BB 平台上无法运行，有什么方法可以将 android 应用程序移植到 BB 7.1os？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:51:05.093

BlackBerry 的 Android 运行时仅存在于 PlayBook 和 BlackBerry 10 上，它们可以轻松地重新打包您的 APK 文件9）。对于 BlackBerry 7.1 OS（使用 J2ME），开发人员需要重新编写大量代码才能将应用程序从 J2SE 移植到 J2ME

# google-chrome-extension - Chrome 扩展按钮在没有被点击的情况下亮起？

> ID：11150562
> 
> 赞同：0
> 
> 时间：2012-06-22T05:19:59.257
> 
> 标签：google-chrome-extension

Chrome 扩展按钮（位于浏览器地址栏右侧）是否可以根据基于 URL 的逻辑更改状态？（即，没有被点击，但检测到 URL X，并“点亮”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:53:27.830

使用浏览器操作，您可以使用[`c.b.setIcon`](http://code.google.com/chrome/extensions/browserAction.html#method-setIcon)or[`c.b.setBadgeText`](http://code.google.com/chrome/extensions/browserAction.html#method-setBadgeText)和[`c.b.setBadgeBackgroundColor`](http://code.google.com/chrome/extensions/browserAction.html#method-setBadgeBackgroundColor). 或者，改用[页面操作](http://code.google.com/chrome/extensions/pageAction.html)。

使用此方法，您可以更改 UI 操作的视觉方面。但是，您不能以编程方式打开任何弹出窗口。

# ruby-on-rails - 将 Rails 应用程序 (SQLite3) 部署到 Heroku (PostgreSQL) 的问题

> ID：11150563
> 
> 赞同：0
> 
> 时间：2012-06-22T05:20:02.337
> 
> 标签：ruby-on-rails, sqlite, postgresql, heroku

我看到很多关于部署到 Heroku 问题的帖子，但我无法找到适合我的案例的解决方案。任何输入将不胜感激。

我有一个在本地运行良好的博客应用程序。但是，当我部署到 Heroku 时，我正在返回“对不起，但出了点问题”。

我拥有的宝石是：

```
group :development do
  gem 'sqlite3', '1.3.5'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

我采取的步骤是：

```
git add.
git commit -am "latest update"
git push
git push heroku
rake db:migrate
heroku run rake db:migrate 
```

我的 SQLite3 数据库迁移得很好，因为我可以通过 rails 控制台找到我最新的博客条目 (Blog.find(21))。但是，数据似乎没有迁移到 Heroku 数据库，因为 Heroku 控制台返回

```
"ActiveRecord::RecordNotFound: Couldn't find Blog with id=21." 
```

此外，“heroku 日志”发现：

```
Completed 500 Internal Server Error in 50ms
NoMethod Error (undefined method 'blogs' for nil:NilClass):
  app/controllers/static_pages_controller.rb:8:in 'home' 
```

这是否意味着我的 static_pages_controller 中可能存在问题，或者它只是因为数据库未正确迁移而返回错误？

下面是我的 static_pages 控制器，它在我的本地服务器上运行良好。

```
class StaticPagesController < ApplicationController
  def home
    if signed_in?
      @blog = current_editor.blogs.build
    end

    @editor = Editor.first
    @blogs = @editor.blogs.paginate(page: params[:page])
  end
end 
```

注意：我在上面使用 Editor.first，因为我（即 editor_id：1）将是我博客的唯一编辑。我刚刚创建了一个编辑器模型来存储密码摘要。

那么，为什么我的应用程序没有部署在 Heroku 上？

对于任何反馈，我们都表示感谢。另外，如果您需要查看其他文件，请告诉我，我会附上。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T05:36:30.047

运行`db:migrate`只运行数据库迁移，它不会将任何数据从您的开发环境复制到 Heroku。您应该使用[`heroku db:push`](https://devcenter.heroku.com/articles/taps#import_push_to_heroku)将数据从本地环境推送到 Heroku：

> **导入：推送到 Heroku**
> 
> `heroku db:push`当您希望将现有数据库传输到 Heroku 时使用。例如，您可能想要导入您在本地开发中一直使用的 SQLite 数据库或您已在另一台主机上部署的 MySQL 数据库。

这听起来像你想要做的，所以尝试运行`heroku db:push`。

# javascript - html5 3D GUI 使用没有任何插件

> ID：11150568
> 
> 赞同：1
> 
> 时间：2012-06-22T05:20:58.503
> 
> 标签：javascript, html, user-interface, 3d

有没有办法创建简单的 3D GUI 元素并使用 HTML5 画布注册鼠标事件。有什么好的教程可以让初学者开始在 html5 中编写 3D gui 元素的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:28:00.610

这是一个相当高的要求。[Three.js](https://github.com/mrdoob/three.js/)可能是你最好的起点。

# wpf - 如何在wpf中实现主题

> ID：11150570
> 
> 赞同：4
> 
> 时间：2012-06-22T05:21:12.013
> 
> 标签：wpf, themes, resourcedictionary, staticresource

我想在 WPF 中实现 ASP.Net 类型的主题。用户可以选择各种预定义的主题，并可以切换到另一个主题。

为了实现这一点，我尝试为每个主题创建不同的资源字典并使用键存储所需的样式。所有主题的键集合都是相同的，但每个主题的定义不同。

我正在使用以下代码在点击时切换主题：

```
var theme = Application.LoadComponent(uri) as ResourceDictionary;
Application.Current.Resources.MergedDictionaries.Clear();
Application.Current.Resources.MergedDictionaries.Add(theme); 
```

在所有页面/用户控件/窗口中，我设置了 StaticResource 并应用了适当的键。当我切换到另一个主题时，它**仅在 UI 上的下一个事件之后应用**。

如果我将更改 StaticResource 设置为 DynamicResource 然后它会立即应用。

请分享您使用 StaticResource 实现这一目标的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:18:14.863

看看这个问题

[WPF 和 MVVM - 动态更改主题](https://stackoverflow.com/questions/11139103/wpf-and-mvvm-changing-themes-dynamically/11139598#11139598)

您可以从以下链接下载预定义的主题

[http://wpf.codeplex.com/wikipage?title=WPF%20Themes](http://wpf.codeplex.com/wikipage?title=WPF%20Themes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-30T08:24:17.927

不幸的是，您无法使用 StaticResource 实现此目的。[切换到另一个主题后，需要重新加载](http://michaelscodingspot.com/2017/06/30/wpf-complete-guide-themes-skins/#compiled-and-dynamic-skinning)具有 StaticResource 的控件才能应用新资源。

您可能希望创建功能以在更改主题后重新加载当前页面。

# css - 如何在列表视图中并排对齐文本框

> ID：11150571
> 
> 赞同：-1
> 
> 时间：2012-06-22T05:21:15.737
> 
> 标签：css

我想并排显示列表数据中的字段。我正在使用 dl、dt 和 dd 进行对齐，并且能够一个接一个地显示它们；但是，我需要使用这些 dl、dt 和 dd 在一行中显示某些字段。

有人可以建议如何进行这种对齐吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:24:01.483

我认为这对你有用

```
 dd,dt{ display: inline; } 
```

# selenium - 如何读取窗口的内容？

> ID：11150572
> 
> 赞同：0
> 
> 时间：2012-06-22T05:21:22.010
> 
> 标签：selenium

![在此处输入图像描述](../Images/a2a7d36b3d1fb334d0ee9acfdf7fce3f.png)

我正在使用 selemium IDE 来记录和重放测试用例。我必须阅读下面显示的窗口的内容并将相同的数据写入/移动到另一个文件中。

我该怎么做 ？

# queue - 如何从 OCaml 中的队列中删除顶部元素

> ID：11150573
> 
> 赞同：-2
> 
> 时间：2012-06-22T05:21:36.180
> 
> 标签：queue, ocaml

有什么方法可以删除 Ocaml 中队列的最顶部元素吗？Queue 模块只有从前面删除的 take 和 pop 操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T05:42:53.270

好吧，队列的定义是您只能访问或删除最近*最少*添加的元素。听起来您还想删除最近添加的元素，对吗？对此的一般结构称为双端队列，它允许您在两端添加和删除。您可以在[Batteries Included Deque 模块](http://ocaml-batteries-team.github.com/batteries-included/hdoc/BatDeque.html)中找到一个。

OCaml 标准库中没有这样的东西，但自己编写代码也不会*那么*难。您将元素划分为两个列表，一个是最近的，另一个是最近的。您的目标是使这两个列表的大小大致平衡，并且如果双端队列至少有两个元素，则要求它们都是非空的。（引自冈崎。）

# java - 在 Windows 上使用 java 进行远程文件访问

> ID：11150575
> 
> 赞同：0
> 
> 时间：2012-06-22T05:21:58.590
> 
> 标签：java, jsp, sharing, remote-access

我正在使用可以从远程系统读取 .txt 文件的 struts 开发应用程序。我不知道该怎么做。有人可以建议一些例子来解释如何输入 URL 吗？它在http上。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:05:11.030

试试这个

```
import java.net.*;
import java.io.*;

public class URLReader {
    public static void main(String[] args) throws Exception {
        // Here you need add copy file program which will copy file from c:/abc/abc.txt to your web project folder
        URL oracle = new URL("http://www.demo.com/abc.txt");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(oracle.openStream()));

        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();
    }
} 
```

# iphone - 在应用程序中打开 html 链接

> ID：11150582
> 
> 赞同：1
> 
> 时间：2012-06-22T05:23:32.303
> 
> 标签：iphone, objective-c, ios, url

是否可以在同一个应用程序中处理 URL Scheme 的调用？

这是一个示例：我的应用程序中有一个 html 链接，打开会触发 safari。我想要做的是点击该链接，无论我在应用程序中的哪个位置，都会推送一个带有 web 视图的视图控制器。

如果这是可能的，我必须在哪里做？如果我处理 URL Scheme 的调用，我需要在应用程序的委托上进行。在这种情况下我应该在哪里做？如果视图控制器需要被推送，谁负责推送呢？当前在屏幕上的 appdelegate 或视图控制器？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:28:07.737

1.  `UITapGestureRecognizer`，如果您的链接在标签中：

    ```
    UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(openLink:)];
    [yourLinkLabel addGestureRecognizer:gestureRecognizer];
    gestureRecognizer.numberOfTapsRequired = 1;
    gestureRecognizer.cancelsTouchesInView = NO; 
    ```

2.  如果它是在加载的网页内的链接`UIWebView`，那么您可以使用：`webView:shouldStartLoadWithRequest:navigationType`. 每次用户点击`UIWebView`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T05:36:38.810

请检查我的[问题](https://stackoverflow.com/questions/10945439/detect-click-on-nsurl-on-uitextview)

我遇到了同样的问题。希望它会帮助你。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:40:28.277

好吧，涉及视图控制器有点烦人。我发现使用 javascript 在页面中加载新链接/内容更容易。这样就涉及到一个 webview 并且数据/html 文件被打乱了。如果您需要更多信息，请与我们联系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T05:44:15.023

尝试这个。在当前控制器中使用此代码

```
WebViewController *objWebViewController     =   [[WebViewController alloc] initWithNibName:@"WebViewController" bundle:nil];
                objWebViewController.m_strHtml=[NSString stringWithString:@"www.google.com"];//m_strHtml is a NSString variable in WebViewController class
                [self.navigationController pushViewController:objWebViewController animated:YES];
                [objContentWebViewController release]; 
```

在 WebViewController 中使用它

```
NSURL *url = [[NSURL alloc] initWithString:m_strHtml];
        NSURLRequest * req = [[NSURLRequest alloc] initWithURL:url];
        [url release];
        [Webview loadRequest:req];
        [req release]; 
```

否则，您可以在 web 视图中加载 html，并且 web 视图
默认打开其中的链接。使用以下代码。

```
m_strHtml=[[NSString alloc]initWithFormat:@"<html><body>%@</body></html>",m_strHtmlContent];//m_strHtmlContent is string variable to store the html content

        [Webview loadHTMLString:m_strHtml baseURL:Nil]; 
        Webview.backgroundColor=[UIColor clearColor]; 
```

# android - 如果一个Activity需要很长时间才能加载，它要求强制关闭，如何解决这个问题？

> ID：11150583
> 
> 赞同：1
> 
> 时间：2012-06-22T05:23:38.743
> 
> 标签：android

我的应用程序中的几乎所有活动都需要与 Web 服务器交互以获取数据，然后加载活动屏幕。所以在任何时候，如果互联网很慢，它会花费很多时间，大约 12-15 秒后它会显示“无法加载，强制关闭/等待”。应用程序如何避免这种情况？他们遵循的解决方案是什么，当第一个 3-4 活动正常工作时（当网络良好时），那么一些活动需要很长时间（因为互联网不好/如果互联网消失了）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T05:26:45.137

通过优化您的代码，其次让您的网络/Internet 在单独的线程（如 AsynTask）上工作。

链接：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

这不会阻止您的用户界面。

希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:55:28.293

这是互联网连接速度慢的问题。我之前在制作用于从 Web 服务器获取数据的应用程序时也遇到过这种情况。因此，有 4 件事可以帮助您解决此问题： (1) 检查是否有任何互联网连接：

```
 ConnectivityManager cm = (ConnectivityManager)   getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo ni = cm.getActiveNetworkInfo();
    if (ni!=null && ni.isAvailable() && ni.isConnected()) {
        return true;
    } else {
        return false; 
    } 
```

如果没有互联网连接，那么您可以通过对话框通知用户。

(2) 如果有互联网连接但速度很慢，那么您可以放置​​一些代码等待响应一段时间，然后向用户显示一个对话框以等待或中止请求。

(3) 另一件非常有用的事情 - 使用 slide_in_left 和 slide_out_right 动画样式代替 fade_in 和 fade_out 来实现意图之间的转换。它有很大帮助，屏幕很少变黑。

```
 try    {           
        Intent yourIntent = new Intent(view.getContext(), YourActivity.class);      
        startActivityForResult(yourIntent, 0);      
        overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right);        
    } catch(Exception ex) {
    } 
```

(4) 使用 AsyncTask 将请求发送到 web。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:28:10.813

您可以在拨打电话之前检查是否有现有的互联网或数据连接。您还应该能够指定一定的时间长度来尝试加载文件，然后显示错误或根据需要重试。

# python - 微控制器和pyserial之间的双向通信

> ID：11150586
> 
> 赞同：2
> 
> 时间：2012-06-22T05:24:00.987
> 
> 标签：python, microcontroller, pyserial, bidirectional

我正在使用 Python 2.5.4 和 Windows 7。

我正在尝试创建一个使用 pygame 从微控制器传输和接收信息的程序。当微控制器仅将数据写入 pygame 时，此代码工作正常，但是当该行包含在接收信息的微控制器代码（readline）中时，pygame 窗口冻结（不只是关闭窗口，所以我可以看到问题出在哪里）。我想知道是否有人在微控制器和 pygame/pyserial 相互交谈和倾听方面有任何经验？

我读过一篇可能类似的帖子，但我不理解代码，也不确定是否是同一个问题。我在这些论坛上阅读了“流量控制”一词，我想知道这是否是我的问题？

我的代码是：

```
import os, pygame, math, serial   
from pygame.locals import *
from pygame.compat import geterror
from time import clock, time
pygame.init()
w = 1100   #sets pygame screen width
h = 642   #sets pygame screen height
screen = pygame.display.set_mode((w, h),0,32)  #make and display screen

pygame.display.flip()   #Update screen
running = 1
font = pygame.font.Font(None, 36)
clock = pygame.time.Clock()
port = serial.Serial("COM2", 115200)

while running:          #Loop this
   for event in pygame.event.get():    #get user input
      if event.type == pygame.QUIT:    #if user clicks the close X
           running = 0                 #make running 0 to break out of loop

   temp = float(port.readline())
   clock.tick(100)
   value = font.render(str(temp), 1, (100, 100, 100))
   screen.blit(value, (280,165))
   pygame.display.flip()   #Update screen
   port.write('3') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:00:59.320

readline 在等待行终止字符时可能会阻塞；回车和/或换行的某种组合。您的微控制器需要在 readline 返回之前发送一个或两个字符。您应该检查 pyserial 文档以查看 chars readline 期望的行术语，并通过查看终端甚至在串行流上执行 hexdump 来验证您的 uC 正在发送它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T02:35:39.030

**似乎最有可能出现的问题：死锁**

稍微扩展一下 Jeff Laughlin 的帖子：

很多很多人都遇到过这个死锁问题：

*   PC 不能发送任何字符，因为它处于阻塞 readline() 命令的中间，等待微控制器发送换行符。
*   微控制器无法发送任何字符，因为它处于阻塞 readline() 命令的中间，等待 PC 发送换行符。

双方最终都永远等待对方做某事。

双向通信系统有很多方法会陷入这种僵局。也许通过串行电缆的换行符被损坏了一点点，以至于它看起来不再像换行符了。也许一个长字符串的传输速度比接收器处理它的速度快，溢出了一些缓冲区，丢失的字节之一是换行符。这条换行符是朝微型到 PC 还是 PC 到微型方向发展都没有关系；无论哪种方式，我们都会陷入同样的​​僵局。

**解决方法 1：超时**

[由“import serial”加载的 pyserial 包](http://pyserial.sourceforge.net/shortintro.html#readline)的文档对此问题有一个部分解决方法：设置超时。该文档特别建议：

> 打开串行端口时请指定超时。否则，如果没有收到换行符，它可能会永远阻塞。

您能否在 PC 和微型计算机两端都实施该变通方案？

**解决方法 2：非阻塞读取行**

许多人实现了一个非阻塞的 readline() 子例程，它的工作原理如下：

```
def try_readline(): 
```

*   串行端口中是否有新字节，或者串行缓冲区是否为空？（也许检查类似[inWaiting()](http://pyserial.sourceforge.net/pyserial_api.html#serial.Serial.inWaiting)）。
*   如果它仍然是空的，try_readline() 立即返回空字符串。
*   （可选）距离我们上一次得到一个字节已经很久了吗？如果是这样，请将缓冲区重置为空字符串。
*   从串行端口读取一个字节，并将其附加到内部缓冲区的末尾。
*   缓冲区（比任何有效消息长几个字节）是否即将溢出？如果是这样，则将缓冲区重置为空字符串。
*   我们刚刚读取的字节是换行符吗？
*   如果不是换行符，try_readline() 会立即返回空字符串。
*   嘿，这是换行符。最后！
*   将消息从内部缓冲区复制到返回字符串。
*   将缓冲区重置为空字符串。
*   try_readline() 在返回字符串中返回消息。

**进一步讨论**

使用任一解决方法，设置您的程序，使其定期且无条件地——无论 try_readline 函数是否返回空字符串以外的任何内容；以及 readline() 函数是否超时或接收到有效消息——无条件地发送信息行。

您可能还会考虑，如果您在消息中途插入串行电缆，并且您的软件收到半条消息，然后是换行符，那么究竟会发生什么。另外，如果发送器连续发送一堆换行符会发生什么？

双向交流是人类几乎无意识地做的事情之一，因此我们对它的复杂程度感到惊讶。

ps：你见过这个[用 Pyserial 做 PC-to-Arduino 的](http://www.akeric.com/blog/?p=1015)小程序吗？

[ps：也许你可以浏览一下最新的Serial Programming Wikibook](http://en.wikibooks.org/wiki/Serial_Programming)的草稿并填上一两个空洞，或者至少帮助我们指出需要填补的空洞在哪里？

# java - 通过java插件访问麦克风进行语音聊天

> ID：11150587
> 
> 赞同：5
> 
> 时间：2012-06-22T05:24:11.663
> 
> 标签：java, audio, voip, microphone

如何在java中创建一个可以直接访问特定**Web应用程序**的麦克风的java插件？.. .. **我不想使用applet和flash ........**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:10:28.753

如果您想使用 java 并且这是 Web 应用程序（浏览器中的 UI），那么您必须使用 applet。我不知道其他方式。这个小程序应该用证书签名。用户还应接受此证书以让 java sound api 访问客户端设备。

或者，您可以创建将下载并在客户端 PC 上运行的 Java Web 启动应用程序 (JNLP)。但这不会是 web ui。

# java - 使用日历或 java 中的任何类查找上个月名称

> ID：11150594
> 
> 赞同：2
> 
> 时间：2012-06-22T05:24:56.987
> 
> 标签：java, datetime, date

我需要使用日历或 java 中的任何类查找上个月的名称

如果是一月，那么它必须将十二月作为上个月（如果可能的话，加上年份）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T05:25:54.133

```
Calendar cal =  Calendar.getInstance();
cal.add(Calendar.MONTH, -1);
//format it to MMM-yyyy // January-2012
String previousMonthYear  = new SimpleDateFormat("MMM-yyyy").format(cal.getTime()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:34:03.350

乔达摇滚。

从[http://joda-time.sourceforge.net/获取](http://joda-time.sourceforge.net/)

```
DateTime dt = new DateTime();
DateTime year2000 = dt.withYear(2000);
DateTime oneMonthBefore = dt.minusMonths(1);
DateTimeFormatter fmt = ...;
String d = dt.toString(fmt); 
```

它比 java 库中的任何东西都更容易使用和操作日期/时间。

# oracle - 如何为 pl/sql 表返回游标

> ID：11150595
> 
> 赞同：2
> 
> 时间：2012-06-22T05:25:20.530
> 
> 标签：oracle, plsql

我从几个表中选择数据。然后我需要在返回之前编辑从光标返回的数据。然后将光标传递给 perl 脚本以显示行。

为此，我构建了一个 pl/sql 表，如下面的代码所示。我需要知道的是如何返回到那张桌子？

目前我收到错误“表或视图不存在”。我用于简单表格的测试代码附在此处。

```
CREATE OR REPLACE FUNCTION test_rep
RETURN SYS_REFCURSOR
AS

CURSOR rec_Cur IS 
    SELECT  table1.NAME, 
        table1.ID 
    FROM TESTREPORT table1;
TYPE rec_Table IS TABLE OF rec_Cur%ROWTYPE INDEX BY PLS_INTEGER;
working_Rec_Table rec_Table;    

TYPE n_trade_rec IS RECORD
(
    NAME    VARCHAR2(15), 
    ID      NUMBER
);
TYPE ga_novated_trades IS TABLE OF n_trade_rec index by VARCHAR2(15);
va_novated_trades    ga_novated_trades;
v_unique_key VARCHAR2(15);

TYPE db_cursor IS REF CURSOR;
db_cursor2 db_cursor; 

BEGIN

    OPEN rec_Cur;
    FETCH rec_Cur BULK COLLECT INTO working_Rec_Table;

    FOR I IN 1..working_Rec_Table.COUNT LOOP
        v_unique_key := working_Rec_Table(I).NAME;
        va_novated_trades(v_unique_key).NAME    := working_Rec_Table(I).NAME;
        va_novated_trades(v_unique_key).ID      := working_Rec_Table(I).ID;
     END LOOP; --FOR LOOP

     OPEN db_cursor2 FOR SELECT * FROM va_novated_trades; --ERROR LINE

     CLOSE rec_Cur;
     RETURN db_cursor2;

END test_rep;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:35:30.010

基本上有一种方法可以使用该函数从`table type`in oracle 中进行选择`TABLE()`

```
SELECT * FROM table(va_novated_trades); 
```

但这仅适用于**模式**表类型和`plsql tables`（表类型在 SCHEMA 而不是在 plsql 包中定义）：

```
CREATE TYPE n_trade_rec AS OBJECT
(
    NAME    VARCHAR2(15), 
    ID      NUMBER
);
CREATE TYPE ga_novated_trades AS TABLE OF n_trade_rec; 
```

但我仍然认为您应该尝试在查询（和/或 perl 脚本）中完成所有操作，

> 例如，有一个字段我必须分析第 4 个字符，然后相应地编辑其他字段

这可以在查询中实现，可能类似于：

```
select case when substr(one_field, 4, 1) = 'A' then 'A.' || sec_field
            when substr(one_field, 4, 1) = 'B' then 'B.' || sec_field
            else sec_field 
       end as new_sec_field,
       case when substr(one_field, 4, 1) = 'A' then 100 * trd_field
            when substr(one_field, 4, 1) = 'B' then 1000 * trd_field
            else trd_field 
       end as new_trd_field,
       -- and so on
from TESTREPORT 
```

# c++ - 如何在不使用列表迭代器的情况下避免“不在所有代码路径上返回值”警告？

> ID：11150599
> 
> 赞同：0
> 
> 时间：2012-06-22T05:25:59.827
> 
> 标签：c++, warnings, compiler-warnings

假设我有一个包含值的对象。我希望从对象列表中获取具有特定值的对象的索引。我使用下面的代码来做到这一点，

```
int MyClass::getIndex(list& somelist, int requiredValue)
{

    for( i=0; i != somelist.count(); ++i)
    {

        if(somelist.at(i)->value() == requiredValue)
            return i;
        else
            continue;
    }

return -1;
} 
```

如何在不使用迭代器的情况下避免“不在所有代码路径上返回值”警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T05:27:00.430

在任何情况下，您都必须从函数中返回 T。如果列表中可能不存在该值，您可以选择：

1.  返回默认值（例如指针为 nullptr，整数可能为 -1）
2.  利用`boost::optional<T>`
3.  返回结束迭代器：

    ```
    std::list<int>::iterator find_something(std::list<int> &my_list)
    {
         for (auto it = my_list.begin(); it != my_list.end(); ++it)
         { 
             if (cond)
             {
                 return it;
             }
         }

         return my_list.end();
    } 
    ```

**还**

如果您只想找到某个值的迭代器，请使用`std::find`：

```
auto it = std::find(my_list.begin(), my_list.end(), my_value); 
```

**最后**

如果您需要按索引访问，请不要使用列表。在这种情况下使用向量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T05:28:36.510

这个问题的答案与“找不到元素时你想发生什么？”的答案相同。

# android - 我们如何以编程方式检测能够移动到 SD 卡（外部存储）中的应用程序名称？

> ID：11150601
> 
> 赞同：1
> 
> 时间：2012-06-22T05:26:11.997
> 
> 标签：android

我想检测能够移动到 SD 卡或外部存储中的应用程序名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:33:07.273

看到这个[答案](https://stackoverflow.com/a/10966158/844882)。此外，有关如何访问类中的变量的信息，请参阅此[注释](https://stackoverflow.com/questions/10942749/is-installed-package-can-be-move-to-sdcard/10966158#comment14421506_10966158)。`installLocation``PackageInfo`

# java - 如何在链表中将所有偶数排列在奇数前面

> ID：11150609
> 
> 赞同：1
> 
> 时间：2012-06-22T05:26:50.850
> 
> 标签：java

给定一个链表，比如 {1,2,3,5,6,11,10}，我需要输出为 {2,6,10,1,3,5,11}。偶数需要排在奇数之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:31:44.183

一种方法是创建一个新列表，然后循环遍历第一个列表，将偶数添加到新列表的开头，奇数添加到末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T05:32:13.260

一个简单的解决方案是枚举列表的所有元素并将它们分配给两个不同的列表，例如 even_list 和odd_list，具体取决于数字的奇数。然后使用基本排序对每个列表进行单独排序，最后将两个列表连接成一个新列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T05:36:01.747

我只浏览了两次列表：

*   第一次通过输出偶数
*   第二次通过输出赔率

这将是 O(n)，使用比较器等可能不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-05T11:01:22.370

*   在 temp 中获取头指针并使用 temp 遍历列表
*   一旦遇到正数，就在头部创建一个新节点，复制数据并删除 temp 指向的节点。Head 将指向新节点，Temp 将指向下一个节点。
*   遍历列表直到 temp->next != NULL
*   时间复杂度将是 O(n)，因为创建和删除操作是 O(1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T05:56:26.837

```
 LinkedList<Integer> list = new LinkedList<Integer>();
    LinkedList<Integer> newlist = new LinkedList<Integer>();
    int[] a = {1,2,3,5,6,11,10};
    for(int i=0;i<a.length;i++) {
        list.add(a[i]);
    }

    for(int i=0,j=0; i<list.size(); i++) {
        if(a[i]%2 == 0) {
            newlist.add(j++, a[i]);
        } else {
            newlist.addLast(a[i]);
        }
    }

    System.out.println(newlist); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T06:49:53.930

我认为为了更好地使用操作`ArrayList`，您可以参考以下返回排序列表的方法。

```
public static List<Integer> sortList(List<Integer> list){
    LinkedList<Integer> sortedList = new LinkedList<Integer>();

    List<Integer> evenList=new ArrayList<Integer>();
    List<Integer> oddList=new ArrayList<Integer>();
    for(Integer i:list){

        if(i%2==0)
            evenList.add(i);
        else
            oddList.add(i);
    }

    Collections.sort(evenList);
    Collections.sort(oddList);
    sortedList.addAll(evenList);
    sortedList.addAll(oddList);

    return sortedList;
} 
```

输入：

`[1, 2, 3, 5, 6, 11, 10]`

输出：

`[2, 6, 10, 1, 3, 5, 11]`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-02T18:20:04.197

在这里，我发布了一个基于位置而不是值来排列节点的逻辑。您可以通过适当地放置指针节点来为您的问题使用类似的逻辑。

```
public ListNode oddEvenList(ListNode head) {
//if null 
 if(head == null) return null;

//only one/two node/s present
 if(head.next == null || head.next.next == null) return head;

ListNode even = head, odd = even.next, res = odd;
while(odd!=null && even.next != null && odd.next != null){
    even.next = odd.next;
    even = even.next;
    odd.next = even.next;
    odd = odd.next;
    even.next = res;
}
return head;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-08T17:13:44.680

这是算法/实现

```
public static LinearNode<Integer> seperateEvenAndOddNodes(LinearNode<Integer> head) {
    LinearNode<Integer> tail = head, prevNode=null, currNode = head, nextNode;
    int length = length(head), count = 0;
    boolean allEven = true, allOdd = true;
    //point to the last node, start dumping all nodes after this
    while (tail.next() != null) {
        if (tail.getElement() % 2 == 0) {
            allOdd = false;
        } else {
            allEven = false;
        }
        tail = tail.next();
    }
    // Dont do anything if either all odd or all even
    if (allOdd || allEven) {
        return head;
    }
    // Make sure you don't go in infinite loop, and hence condition to make sure, you traverse limited nodes.
    while (currNode != null && count < length) {
        nextNode = currNode.next();
        //move currNode to the end of list, if it is odd.
        if (currNode.getElement() % 2 == 1) {
            LinearNode<Integer> temp = currNode;
            if (prevNode != null) {
                prevNode.next(nextNode);
                currNode = prevNode;
            } else {
                head = nextNode;
                currNode = null;
            }
            tail.next(temp);
            tail = temp;
            temp.next(null);
        }
        prevNode = currNode;
        currNode = nextNode;
        count++;
    }
    //return the new head, in case the list begins with odd
    return head;
} 
```

这是单元测试

```
@Test
public void seperateEvenAndOddNodesTest() {
    LinearNode<Integer> head = buildLinkedList(2,3,4,1,7,8,9);
    head = LinkedListUtil.seperateEvenAndOddNodes(head);
    assertLinkedList(head, 2,4,8,3,1,7,9);

    head = buildLinkedList(9,3,4,1,7,8,2);
    head = LinkedListUtil.seperateEvenAndOddNodes(head);
    assertLinkedList(head, 4,8,2,9,3,1,7);

    head = buildLinkedList(1,3,5,7);
    head = LinkedListUtil.seperateEvenAndOddNodes(head);
    assertLinkedList(head, 1,3,5,7);

    head = buildLinkedList(2,4,6,8);
    head = LinkedListUtil.seperateEvenAndOddNodes(head);
    assertLinkedList(head, 2,4,6,8);
} 
```

# drupal - 如何在 Drupal 7 的终极 cron 中添加新工作？

> ID：11150610
> 
> 赞同：0
> 
> 时间：2012-06-22T05:26:58.600
> 
> 标签：drupal, cron, drupal-modules

我是drupal的新手。我已经安装`ultimate cron`在 Drupal 7 中。现在我创建了一个 php 脚本`mycron.php`，我的问题是我不知道在哪里可以在我的 Drupal 中插入我的 cron 作业`ultimate cron`。

我正在寻找可以插入`mycron.php`的位置，`ultimate cron module page`但我失败了。

我还查看了我下载它的站点，但它不存在。[http://drupal.org/project/ultimate_cron](http://drupal.org/project/ultimate_cron)

有谁知道如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:05:02.093

通常您不会添加自定义 cron 脚本（完整的 .php 文件），而是定义需要使用[hook_cron()完成的工作](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_cron/7)

如果您创建一个以“myname”为名称的模块，您现在可以定义一个函数，例如

```
function myname_cron(){
//do stuff here
} 
```

您可以在这里使用完整的 Drupal 功能，作为一个完全自举的 Drupal 实例可供您使用。Ultimate Cron（或其他与 cron 相关的模块）现在可以处理负载平衡。

# css - 如何更改此 CSS 代码以获得所需的布局

> ID：11150627
> 
> 赞同：0
> 
> 时间：2012-06-22T05:29:00.767
> 
> 标签：css

以下是我的 CSS 代码。使用此代码，我将获得 100 像素宽度的左右菜单和 700 像素宽度的中间内容。（总宽度为 900px。）但是，我的要求是左右侧边栏宽度为 100px，中间内容宽度为 800px。（总宽度 1000px。）应该如何更改以下 CSS 代码来做到这一点？我尽力了，但是在更改值时它搞砸了。

```
html,
body {
    margin: 0;
    padding: 0;
    margin: 0 100px;
    background: url("assets/bg_paper.jpg") repeat-x;
}
body {
    font: 76% arial,sans-serif;
    text-align: center;
}
p { margin: 0 10px 10px }
a {
    display: block;
    color: #981793;
    padding: 10px;
}
div#header h1 {
    height: 80px;
    line-height: 80px;
    margin: 0;
    padding-left: 10px;
    background: #ffffff;
    color: #79B30B;
}
div#container { text-align: left }
div#content p { line-height: 1.4 }
div#navigation { background: #ffffff }
div#extra { background: #FFffff }
div#footer {
    background: #ffffff;
    color: #FFF;
}
div#footer p {
    margin: 0;
    padding: 5px 10px;
}
div#container {
    width: 900px;
    margin: 0 auto;
}
div#wrapper {
    float: left;
    width: 100%;
}
div#content { margin: 0 100px }
div#navigation {
    float: left;
    width: 100px;
    margin-left: -900px;
}
div#extra {
    float: left;
    width: 100px;
    margin-left: -100px;
}
div#footer {
    clear: left;
    width: 100%;
} 
```

* * *

```
<!---- language:HTML-------->
<body>
<div id="container">
<div id="header"><h1>Header</h1></div>
<div id="wrapper">
<div id="content">
<p><strong>1) Content here.</strong> column long long column very long fill fill fill long text text column text silly very make long very fill silly make make long make text fill very long text column silly silly very column long very column filler fill long make filler long silly very long silly silly silly long filler make column filler make silly long long fill very.</p>
<p>very make make fill silly long long filler column long make silly silly column filler fill fill very filler text fill filler column make fill make text very make make very fill fill long make very filler column very long very filler silly very make filler silly make make column column </p>
<p>fill long make long text very make long fill column make text very silly column filler silly text fill text filler filler filler make make make make text filler fill column filler make silly make text text fill make very filler column very </p>
<p>column text long column make silly long text filler silly very very very long filler fill very fill silly very make make filler text filler text make silly text text long fill fill make text fill long text very silly long long filler filler fill silly long make column make silly long column long make very </p>
</div>
</div>
<div id="navigation">
<p><strong>2) Navigation here.</strong> long long fill filler very fill column column silly filler very filler fill fill filler text fill very silly fill text filler silly silly filler fill very make fill column text column very very column fill fill very silly column silly silly fill fill long filler </p>
</div>
<div id="extra">
<p><strong>3) More stuff here.</strong> column long make silly silly filler silly very very very long column filler fill make column make silly column fill silly column long make silly filler column filler silly long long column fill silly column very </p>
</div>
<div id="footer"><p>Here it goes the footer</p></div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:09:13.353

您也应该为此问题提供 HTML 代码。可能是您没有正确放置页面上的内容。因此，很容易判断您是否也在此处发布 HTML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:28:09.763

试试这个

```
div#container {
width: 1000px;
margin: 0 auto;} 
```

希望这会有所帮助！或者回复我..

# javascript - jQuery 层选择器类型插件或可定制的列表视图插件

> ID：11150632
> 
> 赞同：0
> 
> 时间：2012-06-22T05:29:29.507
> 
> 标签：javascript, jquery, layer, multi-select

我正在寻找与 jQuery 1.3 兼容的列表视图类型的插件。该功能类似于 GIMP 中可用的图层选择器。

主要用途是桌面浏览器，而不是移动设备。

jQuery 移动列表视图似乎可以完成这项工作，但它适用于移动设备，并且似乎假设它会占用整个屏幕。将此视为 html 多选，但每个列表项都很复杂。它还应该能够滚动而不影响页面上的其余内容（这将是列表视图控制的地图）。

基本上每个列表项都有一个颜色选择器、一个文本框和一个复选框。每个列表项控制相邻 Google 地图上的一个图层。您可能想要选择一个图层、取消选择一个图层、更改其颜色、添加一个新图层等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:37:22.677

看看这个：http: [//jsfiddle.net/yRxKK/1/](http://jsfiddle.net/yRxKK/1/)

这里很标准的东西：

*   带有溢出-y的div：滚动
*   ul 与块 li 的
*   带有每个图层的复选框和文本字段的表单
*   来自[www.eyecon.ro/colorpicker/的颜色选择器](http://www.eyecon.ro/colorpicker/)
*   用于添加新图层的 jquery 函数
*   选择改变颜色效果

希望它能让你走上正轨！请注意，JS、CSS 和图像是从 eyecon.ro 热链接的。如果您使用它，请更改它！

# iphone - 如何获取我们设备拥有的音乐文件数量

> ID：11150634
> 
> 赞同：-1
> 
> 时间：2012-06-22T05:29:58.697
> 
> 标签：iphone

我正在开发一个应用程序。我需要获取我的设备中有多少音乐文件。我使用 MPMediaPickerController 来选择音乐文件。但我想获取设备打开的文件数量并选择文件来自选择器。所以请告诉我如何获得该号码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:56:24.647

要获取所有歌曲，请使用以下命令

```
MPMediaQuery *allSongsQuery= [MPMediaQuery songsQuery];
NSArray *songs = [allSongsQuery collections]; 
```

如果你想打开和选择，你将不得不做更多的工作

# javascript - 如何判断正在使用哪个 JSON 对象（Crockford 或其他）？

> ID：11150637
> 
> 赞同：6
> 
> 时间：2012-06-22T05:30:37.500
> 
> 标签：javascript, json, version

我正在使用[Crockford](http://en.wikipedia.org/wiki/Douglas_Crockford)的[json2.js](https://github.com/douglascrockford/JSON-js)。当我想进行字符串化时，我确实`JSON.stringify()`......效果很好。

但是，看过代码的人都知道它遵循现有的 JSON 对象和属性。我怀疑我遇到的某个问题可能是由于这种尊重。

是否有 JSON 对象的属性我可以检查以查看浏览器是否正在使用 Crockford 的对象或其他对象？能够做类似的事情会很好`alert(JSON.version());`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T06:00:04.667

您可以决定像这样使用一个：

```
<script>window.JSON || document.write('<script src="js/json2.js"><\/script>')</script> 
```

这首先检查`window.JSON`（浏览器支持）是否存在，否则使用导入 Crockford 的 json2.js。

# 更新

```
var whichJSON = null;

if (! window.JSON) {
  document.write('<script src="js/json2.js"><\/script>');
  whichJSON = 'Crockford Version';
}
else {
  whichJSON = 'Browser Native Version';
}

alert(whichJSON); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T05:57:40.663

在加载 Crockford 的脚本之前，您可以像他一样检查全局 JSON 对象：

```
<script>
    var JSON,
        nativeJSON = true;

    if (!JSON) {
        var nativeJSON = false;
        document.write('<script src="js/json2.js"><\/script>');
    }

    if (!nativeJSON) {
        // All JSON objects are using Crockford's implementation
    } else {
        // All JSON objects from here on out are NOT using Crockford's implementation
    }
</script> 
```

# c++ - 数据比较的 C++ 警告

> ID：11150642
> 
> 赞同：0
> 
> 时间：2012-06-22T05:31:11.913
> 
> 标签：c++, dev-c++, data-comparison

我的程序中有一个 WORD 变量。

```
WORD hour; 
```

但是当我比较它时

```
if(hour>=0 && hour<=18)
{
    hour+=6;
} 
```

**由于数据类型范围有限，**它会生成警告 [Warning] 比较始终为真

 **我正在使用 Dev-C++ 作为 IDE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T05:36:35.120

```
if(hour>=0 && hour<=18) 
```

我认为警告是针对比较`hour >=0`总是正确 `hour`的类型`WORD`，它是`unsigned short`（通常）的 typedef，这意味着`hour`总是大于或等于`0`：

```
 typedef unsigned short WORD; 
```

在 MSVC++ 上，这是 WORD 的定义方式，请检查您的编译器是否`unsigned`存在。如果是`unsigned`¹，那么`hour >=0`显然`true`对于 的**所有可能**值`hour`。在这种情况下，您只需要这样写：

```
if(hour<=18) //(hour >= 0) is implied by its type
{
    hour+=6;
} 
```

^(`unsigned int`1\. 注意 is或无关紧要`unsigned short`。只要是`unsigned`，`hour >=0`对于 的所有可能值都是正确的`hour`。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:36:10.193

似乎-ed`WORD`在`typedef`某处作为`unsigned`整数类型，所以它总是正数（`>=0`）。所以第一个比较总是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:36:05.277

根据 WORD 的数据类型（由于您没有提供它，我假设它是 unsigned short），第一次比较总是正确的，因为没有负整数适合 unsigned short。所以编译器告诉你，第一次比较或多或少，毫无意义。**

# php - 为什么Web应用程序不允许更改用户名

> ID：11150644
> 
> 赞同：1
> 
> 时间：2012-06-22T05:31:18.950
> 
> 标签：php, security, authentication, login

我正在开发一个包含用户登录的 Web 应用程序。在网络上，我看到许多网络应用程序不允许用户在注册帐户后更改用户名。有什么理由吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T05:39:29.450

我认为更个人的偏好是能够跟踪谁发布了什么而不是任何真正的安全问题。我认为允许用户更改其用户名没有安全问题，但您将有用户尝试模仿其他用户名和管理员用户名来混淆和可能的社会工程信息。

# memory - Directx Backbuffer 捕获

> ID：11150649
> 
> 赞同：2
> 
> 时间：2012-06-22T05:31:59.007
> 
> 标签：memory, graphics, directx, capture, directx-9

我想通过使用“memcpy”函数将我的 Directx 屏幕从后台缓冲区捕获到内存地址。所以我写了这段代码：

```
int ScreenWidth =1024;
int ScreenHeight =768;
int BITSPERPIXEL =32; // XRGB

BYTE* pBits ;
IDirect3DSurface9* pSurface;

pBits=new BYTE[ScreenWidth*ScreenHeight * 4 ]; //1024 x 768 x 4 for XRGB

pd3dDevice->CreateOffscreenPlainSurface(ScreenWidth , ScreenHeight ,
                                          D3DFMT_X8R8G8B8, D3DPOOL_SYSTEMMEM, 
                                          &pSurface, NULL);

pd3dDevice->GetBackBuffer(0,0,D3DBACKBUFFER_TYPE::D3DBACKBUFFER_TYPE_MONO, &pSurface);      

D3DLOCKED_RECT lockedRect;
pSurface->LockRect(&lockedRect,NULL,
                   D3DLOCK_NO_DIRTY_UPDATE|
                   D3DLOCK_NOSYSLOCK|D3DLOCK_READONLY);
for( int i=0 ; i < ScreenHeight ; i++)
{
    memcpy( (BYTE*) pBits + i * ScreenWidth * BITSPERPIXEL / 8 , 
        (BYTE*) lockedRect.pBits + i* lockedRect.Pitch , 
        ScreenWidth * BITSPERPIXEL / 8);
}
pSurface->UnlockRect(); 
```

但是当程序运行时我得到了这个错误：

```
Unhandled exception at 0x58b6be20 (msvcr100d.dll) in SimpleSample.exe: 0xC0000005: Access violation reading location 0x00000000. 
```

和这一行的程序中断：

```
 memcpy( (BYTE*) pBits + i * ScreenWidth * BITSPERPIXEL / 8 , 
        (BYTE*) lockedRect.pBits + i* lockedRect.Pitch , 
        ScreenWidth * BITSPERPIXEL / 8); 
```

它与lockedRect.pBits 或lockedRect.Pitch 地址mem 没有创建相同......你怎么看？请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:53:05.313

试图找到相同的答案。从某些来源，我能够弄清楚后台缓冲区是特定于应用程序的。即他们在绑定到他们的后台缓冲区上写入数据。

我想弄清楚 GetBackBuffer() 中的第一个参数在哪里起作用？它是 iSwapChain。MSDN 帮助很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:43:53.980

你用过 D3DMEM_POOL 吗？你确定后缓冲格式是 X8A8R8B8 吗？

# visual-studio-2010 - 如何使用列表框为按钮动态命名

> ID：11150650
> 
> 赞同：0
> 
> 时间：2012-06-22T05:32:07.000
> 
> 标签：visual-studio-2010

```
Dim cont = 0
    If ListBox1.Items.Count > 0 Then

        For i =1 To ListBox1.Items.Count
            Dim botao3 As New Button

            botao3.Text = CStr(ListBox2.Items(cont)) 'table.Item(i).text & 
            botao3.BringToFront()
            botao3.Top = top
            botao3.Left = 40
            botao3.Width = 300

            Me.Controls.Add(botao3)

            top = top + 30

            cont = cont + 1
        Next

    End If 
```

附言。我的列表框的排序属性设置为 true

这是我的代码，但它只会给它列表框中最后插入的值的名称。

我怎样才能做到这一点，以便当我单击按钮时，它会删除旧的一组按钮并添加一组我刚刚插入的新按钮。

请帮帮我：$

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:36:07.477

你把`0`而不是当前循环值

```
botao3.Text = CStr(ListBox2.Items(0)) 
```

应该

```
botao3.Text = CStr(ListBox2.Items(i)) 
```

另一方面，我不确定您想要实现什么，但您可以`Me.Controls.Clear()`在循环之前获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:43:18.300

use this:

```
 Dim btn As Button() = New Button(ListBox1.Items.Count - 1) {}
        For i As Integer = 0 To ListBox1.Items.Count - 1
            btn(i) = New Button()
            btn(i).Text = ListBox1.Items(i).ToString()
            If i > 0 Then
                btn(i).Left = btn(i - 1).Right
            End If

            Me.Controls.Add(btn(i))
        Next 
```

result: ![enter image description here](../Images/4a19ab3b51d044bfcfdf92acea1b5113.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:46:20.047

试试看：

```
If ListBox1.Items.Count > 0 Then

    For i =0 To ListBox1.Items.Count
        Dim botao3 As New Button

        botao3.Text = CStr(ListBox1.Items(i)) 'table.Item(i).text & 
        botao3.BringToFront()
        botao3.Top = top
        botao3.Left = 40
        botao3.Width = 300

        Me.Controls.Add(botao3)

        top = top + 30
    Next

End If 
```

# bash - bash -v 输出可以重定向吗？

> ID：11150653
> 
> 赞同：8
> 
> 时间：2012-06-22T05:32:44.967
> 
> 标签：bash

使用 -v 选项启动 bash 会向控制台生成长输出

```
$ bash -v

source ~/Dropbox/bin/tim_functions.sh

\#!/bin/bash
...several hundred more lines 
```

我想将输出捕获到文件中以便于浏览，但我已经尝试过`bash -v 2>&1 > out_bash.txt`并且`bash -v | tee out_bash.txt`无法在文件中捕获终端屏幕上的信息。就好像详细输出既不是标准错误也不是标准输出。怎么会这样？

谁能建议一种捕获 bash -v 输出的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T08:48:38.613

```
 bash -v 2>&1 > out_bash.txt 
```

不是你想要的，应该是

```
 bash -v  >out_bash.txt 2>&1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T05:50:26.610

我四处寻找，发现了这个[http://www.commandlinefu.com/commands/view/3310/run-a-bash-script-in-debug-mode-show-output-and-save-it-on-a-文件](http://www.commandlinefu.com/commands/view/3310/run-a-bash-script-in-debug-mode-show-output-and-save-it-on-a-file)

在他们使用的网站上 `bash -x test.sh 2>&1 | tee out.test`，但我对其进行了测试 `bash -v test.sh 2>&1 | tee out.test`并且效果很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T17:41:29.287

您还可以在脚本中使用 exec 命令重定向所有输出：

```
#!/bin/bash
exec >> out.txt 2>> out.txt
set -x
set -v
echo "testing debug of shell scripts"
ls 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T06:09:43.513

在阅读了其他有用的答案后，我相信这个问题与 bash 如何将详细信息发送到 tty 相关——这与 stderr 或 stdout 有所不同。可以通过以下解决方法捕获它：

```
$ screen -L 
$ bash -v 
$ exit #from the bash session
$ exit #from the screen session 
```

这将生成一个包含输出的 screenlog.0 文件。

感兴趣的 bash -v 输出在运行 10.7.3 (Lion) 的 mac 上

```
$ bash --version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11)
Copyright (C) 2007 Free Software Foundation, Inc.) 
```

尽管有类似的 .bashrc 文件，但我尝试的另一台 10.6.8 mac 的输出较少（有趣/冗长）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T15:39:24.143

您可以使用 bash -v 2>&1 | tee file.txt 或 bash -v 2>&1 | grep 搜索字符串

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T05:44:31.467

您是否尝试过将您的子 bash 包装在子外壳中？

```
( bash -v ) 2>&1 > out_bash.txt 
```

# php - 查询AS时mysql查询错误

> ID：11150654
> 
> 赞同：1
> 
> 时间：2012-06-22T05:32:54.287
> 
> 标签：php, mysql, sql

这个查询对我来说很好：

```
$query = "
         SELECT 
           p.topnode_id,
           p.param_key,
           p.param_value 
         FROM
           tbl_params p
         INNER JOIN
           tbl_clients c
         ON
           c.client_id = p.client_id
         WHERE
           p.client_id = ?
         "; 
```

但是，如果我`AS`输入查询，它会抛出一个错误：

```
$query = "
         SELECT 
           p.topnode_id AS topnode_id,
           p.param_key AS key,
           p.param_value AS value
         FROM
           tbl_params p
         INNER JOIN
           tbl_clients c
         ON
           c.client_id = p.client_id
         WHERE
           p.client_id = ?
         "; 
```

似乎是什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T05:34:31.933

您需要`key`使用反引号进行转义，因为它是 Mysql 中的保留字

```
as `key` 
```

# android - 更改时间时强制关闭：时间选择器 (NPE)

> ID：11150655
> 
> 赞同：4
> 
> 时间：2012-06-22T05:32:54.667
> 
> 标签：android, nullpointerexception, forceclose

当我单击时间选择器更改时间时，我会强制关闭。

谁能告诉我代码中的问题在哪里。安卓。这是我的代码......

```
timePickerDateTimePickerPopup = (TimePicker) layoutDateTimePickerPopup.findViewById(R.id.timePicker_datetimepicker);
            timePickerDateTimePickerPopup.setDescendantFocusability(TimePicker.FOCUS_BLOCK_DESCENDANTS);
            timePickerDateTimePickerPopup.setIs24HourView(true);
            timePickerDateTimePickerPopup.setCurrentHour(mCalendar.get(Calendar.HOUR_OF_DAY));
            timePickerDateTimePickerPopup.setCurrentMinute(mCalendar.get(Calendar.MINUTE));

            timePickerDateTimePickerPopup.setOnTimeChangedListener(this);

            dateTimePickerPopup.setTouchable(true);
            dateTimePickerPopup.setFocusable(true);
            dateTimePickerPopup.setOutsideTouchable(true);
            Drawable image_saved = context.getResources().getDrawable(R.drawable.dummy_bg);
            dateTimePickerPopup.setBackgroundDrawable(image_saved); 
```

我的 Logcat 显示**NullPointerException**：

```
STACK_TRACE=java.lang.NullPointerException
at android.widget.TimePicker.updateInputState(TimePicker.java:553)
at android.widget.TimePicker.access$000(TimePicker.java:55)
at android.widget.TimePicker$2.onValueChange(TimePicker.java:149)
at android.widget.NumberPicker.notifyChange(NumberPicker.java:1777)
at android.widget.NumberPicker.changeCurrent(NumberPicker.java:1455)
at android.widget.NumberPicker.changeCurrentByOne(NumberPicker.java:1481)
at android.widget.NumberPicker.access$100(NumberPicker.java:70)
at android.widget.NumberPicker$2.onClick(NumberPicker.java:592)
at android.view.View.performClick(View.java:3519)
at android.view.View$PerformClick.run(View.java:14140)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T13:49:37.760

这是一个已知的原生 android 错误。请参阅[Android Bug Tracker 中的错误 #24387](https://code.google.com/p/android/issues/detail?id=24387)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-02T20:55:45.647

将我的应用程序主题更改为`android:Theme.Black`我的`AndroidManifest.xml`. 为我解决了这个问题。

将此样式添加到`styles.xml`

我的片段的风格看起来不同，但现在它可以工作了。

![在此处输入图像描述](../Images/65f4c3209a75bdba5990bff12c22249c.png)

**更新**：我在不改变样式的情况下解决了这个问题，将属性添加 `android:descendantFocusability="blocksDescendants"` 到我的 TimePicker

```
<TimePicker
    android:id="@+id/toTimePicker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:descendantFocusability="blocksDescendants" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T12:05:57.280

如前所述，这似乎是一个已知的错误。一种可能的解决方法是遍历子项，直到找到 EditText 并将其“可聚焦”属性设置为 false。

递归地，

```
// level is just a counter for reading better Logs
private void hideFocusable(ViewGroup vg, int level)
{
    for(int i=0; i < vg.getChildCount(); i++) 
    {
        try
        {
               ViewGroup vt = (ViewGroup) vg.getChildAt(i);
               Log.i("NODE",level+") "+ vg.getChildAt(i).getClass().getName()); 

               hideFocusable(vt, level+1);

        }catch (ClassCastException e) {
                View vf = (View) vg.getChildAt(i);

                Log.i("LEAF",level+") "+ vf.getClass().getName());

                // here you can pick EditText and setFocusable to false 
                if(vf.getClass().equals(EditText.class))
                   vf.setFocusable(false);

        }

    }
} 
```

# c# - 如何获取另一个表中的值，将其存储在变量或数据读取器中，然后使用它来更新另一个表

> ID：11150656
> 
> 赞同：0
> 
> 时间：2012-06-22T05:32:58.850
> 
> 标签：c#, asp.net, datareader

有谁知道我如何从 Student 表中获取 StudentID，将其存储在 datareader 或数据集中，然后使用它来更新另一个表，即 Users 表，因为我希望用户的用户名和密码作为默认的 StudentID . 顺便说一句，这是 C# ASP.NET。这是我的代码。

```
 SqlConnection conUpdate = new SqlConnection(GetConnectionString());
    conUpdate.Open();

    SqlCommand com2 = new SqlCommand();
    com2.Connection = conUpdate;
    com2.CommandText = "SELECT Students.StudentID, Users.UserID FROM Students, Users " +
        "WHERE Students.UserID = Users.UserID";

    int UserId = ((int)com2.ExecuteScalar());

    com2.CommandText = "SELECT MAX(StudentID) FROM Students";

    int StudentId = ((int)com2.ExecuteScalar());

    com2.CommandType = CommandType.Text;
    com2.CommandText = "UPDATE Users SET UserName=@UserName, Password=@Password WHERE UserID=@UserID";

    com2.Parameters.Add("@UserName", SqlDbType.NVarChar);
    com2.Parameters.Add("@Password", SqlDbType.NVarChar);

    com2.Parameters[0].Value = reader;
    com2.Parameters[1].Value = reader;

    com2.ExecuteNonQuery();
    conUpdate.Close();
    conUpdate.Dispose(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:59:42.330

您的命令`com2.CommandText = "SELECT MAX(StudentID) FROM Students";`将返回 Max student ID，这可能不是必需的。您之前的命令`com2.CommandText = "SELECT Students.StudentID, Users.UserID ....`是获取学生用户 ID 所需要的。

您可以使用[数据阅读器](http://msdn.microsoft.com/en-us/library/dw70f090.aspx)（面向连接），如下所示：

```
SqlDataReader reader = com2.ExecuteReader();
while (reader.Read())
{
     int UserId = Convert.ToInt(reader[0]);// or reader["UserID"]
}
reader.Close(); 
```

或者您可以使用[DataAdapter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx)（断开连接模式），例如：

```
SqlDataAdapter a = new SqlDataAdapter(com2, connection);
DataTable dt = new DataTable();
a.Fill(dt); 
```

现在您`dt.Rows["UserID"]`将拥有所需的用户 ID。

你可能想看看这个： http: [//www.dotnetperls.com/sqldataadapter](http://www.dotnetperls.com/sqldataadapter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:59:57.487

如果我理解正确，我认为以下代码可能有效。或者至少给你一个关于如何去做的想法。我假设您希望每个学生的用户名和密码默认为他们的学生 ID

```
 SqlConnection conUpdate = new SqlConnection(GetConnectionString());
    conUpdate.Open();

    SqlCommand com2 = new SqlCommand();
    com2.Connection = conUpdate;
    com2.CommandType = CommandType.Text;
    com2.CommandText = "SELECT Students.StudentID, Users.UserID FROM Students, Users " +
        "WHERE Students.UserID = Users.UserID";

    SqlDataReader reader = com2.ExecuteReader();

    if(reader != null)
    {
        while(reader.Read())
        {
            SqlCommand com3 = new SqlCommand();
            com3.Connection = conUpdate;
            com3.CommandType = CommandType.Text;
            com3.CommandText = "UPDATE Users SET UserName=@UserName, Password=@Password WHERE UserID=@UserID";
            // Assuming that you need both the UserName and Password to default to StudentID
            com3.Parameters.AddWithValue("@UserName", reader.GetString(0)); // Assuming StudentID is NVARCHAR
            com3.Parameters.AddWithValue("@Password", reader.GetString(0)); // Assuming StudentID is NVARCHAR
            com3.Parameters.AddWithValue("@UserID", reader.GetString(1)); // Assuming UserID is NVARCHAR
            com3.ExecuteNonQuery();                
        }
        reader.Close();
    }

    conUpdate.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:54:41.407

由于您已经在选择查询中获取了 UserId，因此您应该使用 DataReader 获取值。像这样：

```
// Execute the query
SqlDataReader rdr = cmd.ExecuteReader();
int UserId;
while(rdr.Read())
{
  UserId = Convert.ToInt32(rdr["UserID"].ToString());
} 
```

# c++ - 将 Lua 代码转换为 C++

> ID：11150658
> 
> 赞同：-3
> 
> 时间：2012-06-22T05:33:10.983
> 
> 标签：c++, lua

我目前有这个代码：

```
PACKETS = {};

function AddPacket(data)
    local id = data.ID;
    PACKETS[id] = {
    data.IP,
    data.PORT,
    data.PACKET,
    data.SOURCEIP,
    data.SOURCEPORT,
    data.PPMS};
end

function RemovePacket(id)
    PACKETS[id] = nil;
end

function LoopedThread()
    for k,v in pairs(PACKETS) do
        for i=1, v.PPMS do
            SendPacket(v.IP, v.PORT, v.PACKET, v.SOURCEIP, v.SOURCEPORT);
        end
    end
    Sleep(1);
end 
```

这是在 lua 中作为示例完成的，但是我需要在 C++ 中完成。我有点困惑，因为我在尝试制作它时无法让它工作，如果有人可以帮助我甚至让我开始，谢谢。

我已经对套接字进行了编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:42:59.493

你不能把 Lua 和 C/C++ 集成起来吗？这种语言是为了轻松与 C/C++ 集成而构建的，它在游戏开发中非常普遍。我建议您使用`luabind`. 这是一个 Lua 版本的`boost::python`库。链接：vhttp://www.rasterbar.com/products/luabind.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:00:42.030

您是否熟悉C++ 中的[标准模板库？](http://www.cplusplus.com/reference/stl/)它可能有一堆容器类型可以帮助你完成你正在尝试的事情。

对我来说，看起来你正在做的事情可以通过实现一个包含成员变量“IP”、“PORT”等的“数据包”结构或类来完成。

然后，如果您想存储它们并通过它们的 ID 访问它们，您可以创建一个[stl::map](http://www.cplusplus.com/reference/stl/map/)将 ID 号映射到数据包。

或者，与数据包一样，您最终可能希望以先进先出的方式存储它们，这可以通过[stl::queue](http://www.cplusplus.com/reference/stl/queue)来完成。使用队列时，它们的输出顺序与您放入它们的顺序相同，因此，如果您将数据包 1、2 和 3 排队，然后访问其中的两个，您将按该顺序获得数据包 1 和 2，而数据包 3 将还是留待以后吧。

我的 C++ 很生锈，但我正在考虑这样的事情：

```
struct Packet {
    char* ip;
    short port;
    // ... etc ...
}

stl::queue<Packet> packet_buffer;

void AddPacket(const Packet& packet_in) {
    packet_buffer.push(packet_in);
}

void RemoveLastPacket() {
    packet_buffer.pop();
}

void LoopedThread() {
    while (!packet_buffer.empty()) {
        SendPacket(packet_buffer.front());
        RemoveLastPacket();
    }
} 
```

你可以用地图做类似的事情，但它会更慢而且效率更低。除非你*真的*需要根据它的 ID 来查找一个特定的数据包，否则我会坚持使用一个队列，它可以非常快。

# jquery - 创建具有多个透明条目的面积图 (MIT/GNU)

> ID：11150666
> 
> 赞同：0
> 
> 时间：2012-06-22T05:34:14.763
> 
> 标签：jquery, html, css, canvas, charts

您是否知道在 MIT/GNU 许可下有任何好的插件/脚本（可能是 jquery 或 html5 的画布），可以让我构建和修改透明的面积图？

类似的东西：

![在此处输入图像描述](../Images/f6322e82c34982f8b1efc218d16fbcb9.png)

虽然我不需要曲线，但它可以只步进 90 度，像这样但重叠：

![在此处输入图像描述](../Images/40de184e2d7dfed018aa9fefe33abd3c.png)

谷歌图表 api 有一些有趣的应用程序，但我宁愿使用具有开源许可证的东西。有一些不错的 jQuery 和画布图表生成器，但它们要么不覆盖面积图，要么允许在同一个图表中包含多个条目。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:38:18.340

这些有很多，

*   **[飞行器2](http://www.humblesoftware.com/flotr2/)**
*   *[显示不同类型的](http://people.iola.dk/olau/flot/examples/graph-types.html)***[Flot示例](http://code.google.com/p/flot/)**

和你几乎可以做任何事情的大爸爸

*   **[d3](http://d3js.org/)**

# android - 如何使用 repo 恢复更改的文件？

> ID：11150667
> 
> 赞同：1
> 
> 时间：2012-06-22T05:34:19.223
> 
> 标签：android, git, version-control, repository

我使用[repo](http://source.android.com/source/using-repo.html)命令。

1.  我用命令初始化一些文件夹`repo init -u URL`
2.  我用命令下载文件`repo sync`
3.  然后我更改了文件中的某些内容（我应用了更改文件的补丁。）

在使用补丁更改之前，我如何恢复原始文件。

我可以指定不需要恢复的文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:49:43.173

恢复文件的最佳方法是两步命令：
`repo diff >> difference.patch`和下一步
`patch -p0 -R < difference.patch`

您还可以删除不需要从中恢复的文件`difference.patch`

# asp.net - 更新查询未更新我项目中表中的数据

> ID：11150672
> 
> 赞同：-1
> 
> 时间：2012-06-22T05:35:04.713
> 
> 标签：asp.net

这是我的代码。它不会更新表中的数据。我看不到任何错误。代码正在执行并向我显示“已成功更新”。

```
 protected void btnUpdate_Click(object sender, EventArgs e)
    {
        string val = ddlCountry.SelectedValue;
        Response.Write(val); // just to check that the value is changed or not.

        string val2 = txtName.Text;
        Response.Write(val2);

        if (ddlCity.SelectedValue == "--Select--")
        {

            Response.Redirect("updateProfile.aspx");
            lblCountry.Text = "Select your country";
        }
        else if(ddlYear.SelectedValue=="--Select--")
        {

            Response.Redirect("updateProfile.aspx");
            lblCountry.Text = "Select Appropriate Experience";
        }
        else if (ddlMonth.SelectedValue == "--Select--")
        {

            Response.Redirect("updateProfile.aspx");
            lblCountry.Text = "Select Appropriate Experience";
        }
        else if(ddlIndustry.SelectedValue=="--Select--")
        {

            Response.Redirect("updateProfile.aspx");
            lblCountry.Text = "Select Your Current Industry";
        }
        else if(ddlFunction.SelectedValue=="--Select--")
        {

            Response.Redirect("updateProfile.aspx");
            lblCountry.Text = "Select your functional Area";
        }
        else
        {
            string fName = Convert.ToString(Session["fname"]);
            string updateQuery = "Update RegisterMaster set Name='" + txtName.Text + "',Nationality='" + ddlCountry.SelectedValue + "',CurrentLocation='" + ddlCity.SelectedValue + "',MobNumber='"+txtNumber.Text+"',Experience='"+ddlYear.SelectedValue+" "+ddlMonth.SelectedValue+"',CurrentIndustry='"+ddlIndustry.SelectedValue+"',FunctionalArea='"+ddlFunction.SelectedValue+"',KeySkills='"+txtSkills.Text+"',ResumeTitle='"+txtResTitle.Text+"',Resume='"+resFileUpload.ToString()+"' where Name='"+fName+"'";

           int i = c1.ExecuteMyQuery(updateQuery);
           if (i == 1)
           {
               lblUpdation.Text = "Successfully Updated.";
           }
           else
           {
               lblUpdation.Text = "Try Again";
           }

        }
    } 
```

它显示更新成功，但是当我检查数据库时，它没有更新。 `updateProfile.aspx`是完成此编码的同一页面。如果这也很重要，它在一个框架集中。

实施

```
c1.ExecuteMyQuery(updateQuery);

 public int ExecuteMyQuery(String sql)
        {
            con.Open();
            cmd.Connection = con;
            cmd.CommandText = sql;
            int i = cmd.ExecuteNonQuery();
            con.Close();
            return i;
        } 
```

![这是查看个人资料页面](../Images/55b14522549344b2a719c4f9f90971e7.png) ![这是我点击更新个人资料的时候](../Images/80ef9d6cf0c8efdc16c8887a124ea570.png) ![这是在我点击更新按钮之后](../Images/4f1111ee34dcf5a64ea87e0ad33a6955.png)

这是什么？？？？

> 哎呀！您的问题无法提交，因为：
> 
> 您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:11:15.143

很难像这样知道出了什么问题。但是，我对您在这一行的代码有疑问：

```
string fName = Convert.ToString(Session["fname"]);
        string updateQuery = "Update RegisterMaster set Name='" + txtName.Text + "',Nationality='" + ddlCountry.SelectedValue + "',CurrentLocation='" + ddlCity.SelectedValue + "',MobNumber='"+txtNumber.Text+"',Experience='"+ddlYear.SelectedValue+" "+ddlMonth.SelectedValue+"',CurrentIndustry='"+ddlIndustry.SelectedValue+"',FunctionalArea='"+ddlFunction.SelectedValue+"',KeySkills='"+txtSkills.Text+"',ResumeTitle='"+txtResTitle.Text+"',Resume='"+resFileUpload.ToString()+"' where Name='"+fName+"'"; 
```

您是否获得了成功更新查询的正确价值？下断点，调试后检查。

**或者**

制作一个非常简单的更新语句，例如：Update RegisterMaster set Name="+txtName.Text+"，并确保您的表格得到更新。

**当然，正如 Leland Richardson 所提到的，您的查询容易受到 Sql-Injection 的影响。** 您可以在此处了解更多信息：http: [//www.codeproject.com/Articles/9378/SQL-Injection-Attacks-and-Some-Tips-on-How-to-Prev](http://www.codeproject.com/Articles/9378/SQL-Injection-Attacks-and-Some-Tips-on-How-to-Prev)

# iphone - 从我的 iPhone 应用程序打开设置页面后如何回调我的应用程序

> ID：11150674
> 
> 赞同：0
> 
> 时间：2012-06-22T05:35:37.673
> 
> 标签：iphone, ios5, appsettings

嗨，我已成功从我的 iphone 应用程序打开设置页面，但在那之后如何来我的应用程序？是否有任何解决方案是再次手动打开我的应用程序，

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:38:44.400

设置是捆绑包吗？（它是否出现在 Facebook 等设置应用程序中）

还是您的应用程序中已经有此设置？

最简单的方法是在您的应用程序中创建一个 URL 并调用该 URL 以带来您的应用程序。

这是一个很好的教程

[http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

# vb.net - 使用 .net 以双精度数据类型维护变量值

> ID：11150676
> 
> 赞同：1
> 
> 时间：2012-06-22T05:35:53.383
> 
> 标签：vb.net, datatable

数据表包含一些值，例如 0.0,10000.00,54678.94 。我正在使用 for 循环获取该值并将其存储在双数据类型的变量中。我想添加这些编号并将其存储在一个变量中。每次变量值改变。

```
 for loop

   Dim ds5 As dataset1.pro_dtsumDataTable = TA5.GetData(TextBox1.Text, users)

   If (ds5.Rows.Count > 0) Then 
   Dim y As Double
   y = Double.Parse(ds5(0)("sum(fld_primary)").ToString())
   Dim y1 As Double
   y1 = 0 + y
   End If
  Next 
```

第一次 y1=0.0
下一次 y1 的值不加到前一个值上。
我想要结果 y1=64679.34
是 vb.net 的新手。请帮忙做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:46:28.647

```
for loop
   Dim ds5 As dataset1.pro_dtsumDataTable = TA5.GetData(TextBox1.Text, users)
   If (ds5.Rows.Count > 0) Then 
   Dim y As Double
   y = Double.Parse(ds5(0)("sum(fld_primary)").ToString())
   Dim y1 As Double
   y1 += 0 + y
   End If
  Next 
```

您继续将 y 分配给 y1。我认为你想要做的是`increment`价值。例如

```
y1 += 0 + y 
```

+= 等同于：

```
y1 = y1 + 0 + y 
```

# extjs - Extjs 3.3.3 Grid - 禁用网格行

> ID：11150678
> 
> 赞同：2
> 
> 时间：2012-06-22T05:36:04.130
> 
> 标签：extjs, grid, gridpanel

我的情况是，即使禁用了网格，我也需要禁用 extjs 网格面板并启用滚动条。我可以使用 GridPanel 的 'disabled:true' 禁用网格，但此属性也会禁用网格的垂直滚动条。在这里我需要启用垂直滚动条，以便我可以看到网格中的所有元素。

有任何想法吗？

谢谢，杰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:08:20.853

您的意思是禁用网格以便无法选择或编辑行吗？如果是这样，则 SelectionModel 具有锁定/解锁功能，这可能是您正在寻找的。

# asp.net - 压缩不起作用

> ID：11150680
> 
> 赞同：4
> 
> 时间：2012-06-22T05:36:05.990
> 
> 标签：asp.net, http, iis, compression

我需要压缩我的数据导出站点的所有动态内容。
我尝试了很多方法，没有任何效果。Chrome 显示内容未压缩，并且“Content-Encoding”标头不存在。

尝试这样做作为最后的手段（在写任何响应之前）：

```
 context.Response.Filter = new DeflateStream(context.Response.Filter, CompressionMode.Compress);
        context.Response.AppendHeader("Content-Encoding", "deflate"); 
```

日志记录显示此代码已正确执行。但是，Chrome 再次显示内容未压缩。

使用 IIS 内置压缩时的 UPD，它似乎工作并且请求跟踪显示“DYNAMIC_COMPRESSION_SUCCESS”。但是，IE 仍然显示响应没有被压缩。当我使用本地主机名称从服务器本身请求页面时也是如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T16:58:22.043

如果您想手动执行此操作，请先检查是否支持压缩，

```
public static bool IsGZipSupported()
{
    string AcceptEncoding = HttpContext.Current.Request.Headers["Accept-Encoding"];
    if (!string.IsNullOrEmpty(AcceptEncoding) &&
            (AcceptEncoding.Contains("gzip") || AcceptEncoding.Contains("deflate")))
        return true;
    return false;
} 
```

并压缩你的回应，

```
public static void GZipEncodePage()
{
            if (IsGZipSupported()) {
                HttpResponse Response = HttpContext.Current.Response;

                string AcceptEncoding = HttpContext.Current.Request.Headers("Accept-Encoding");
                if (AcceptEncoding.Contains("gzip")) {
                    Response.Filter = new System.IO.Compression.GZipStream(Response.Filter, System.IO.Compression.CompressionMode.Compress);
                    Response.AppendHeader("Content-Encoding", "gzip");
                } else {
                    Response.Filter = new System.IO.Compression.DeflateStream(Response.Filter, System.IO.Compression.CompressionMode.Compress);

            Response.AppendHeader("Content-Encoding", "deflate");
} 
```

您可以在将标头发送到客户端之前检查是否附加了过滤器

```
protected void Application_PreSendRequestHeaders()
{
    HttpResponse response = HttpContext.Current.Response;
    if (response.Filter is GZipStream && response.Headers["Content-encoding"] != "gzip")
        response.AppendHeader("Content-encoding", "gzip");
    else if (response.Filter is DeflateStream && response.Headers["Content-encoding"] != "deflate")
        response.AppendHeader("Content-encoding", "deflate");
} 
```

有关更多信息，请查看此帖子；

*   [ASP.NET GZip 编码注意事项](http://www.west-wind.com/weblog/posts/2011/May/02/ASPNET-GZip-Encoding-Caveats)

*   [IIS 7.x 上的内置 GZip/Deflate 压缩](http://www.west-wind.com/weblog/posts/2011/May/05/Builtin-GZipDeflate-Compression-on-IIS-7x)

*   [IIS 7 压缩的优点和缺点](http://weblogs.asp.net/owscott/archive/2009/02/22/iis-7-compression-good-bad-how-much.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T06:28:00.190

我不会尝试手动执行此操作，而是依靠 IIS 中内置的预先编写（和测试）的 Microsoft 代码来为您执行此操作：

在机器上安装[动态内容压缩](http://technet.microsoft.com/en-us/library/bb738113%28v=exchg.80%29.aspx)（链接中的项目符号 5）并[在 IIS 中启用它](http://technet.microsoft.com/en-us/library/cc753681%28v=ws.10%29.aspx)。IIS 现在将处理静态和动态内容的压缩。更少的代码维护（并且总是有错误）总是一件好事！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T06:21:07.820

如果您使用的是 IIS7+，则有一个压缩选项。导航到您的站点，在右侧主窗口中，单击“压缩”，然后选中所有 2 个复选框：

1.  启用动态内容压缩
2.  启用静态内容压缩

# asp.net - 贝宝沙箱测试付款不起作用

> ID：11150683
> 
> 赞同：0
> 
> 时间：2012-06-22T05:36:16.183
> 
> 标签：asp.net, paypal

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:00:36.373

尝试查看 php 配置。我遇到了类似的问题，发现原因是 arg_separator.output 值是“&”而不是“&”，这是您对贝宝所需要的。假设您使用的是 php，您可以在代码中设置此值；ini_set('arg_separator.output','&'); 这将更改脚本持续时间的值，然后更改回来，因此您必须将其包含在所有脚本中。或者更改 php.ini 文件。

# html - 我可以覆盖内联！重要吗？

> ID：11150684
> 
> 赞同：69
> 
> 时间：2012-06-22T05:36:25.920
> 
> 标签：html, css, css-specificity

如果你有

```
<div style="display: none !important;"></div> 
```

有没有办法在样式表中覆盖它以使其显示？

最好使用类似的东西：

```
div { display: block !important; } 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-22T07:24:45.337

让我首先说通常***可以****覆盖**内联样式***：**

 **```
.override {color:red !important;}
```

```
<p style="color:blue;">I will be blue</p>
<p style="color:blue;" class="override">But I will be red</p>
```

此行为[在 W3 规范](https://www.w3.org/TR/CSS21/cascade.html#important-rules)中进行了描述，其中`!important`声明声明不会改变特异性，而是*优先*于“正常”声明。

话虽如此，当冲突规则都具有`!important`标志时，特异性决定应用内联规则 - 这意味着对于 OP 的场景，没有办法覆盖*内联* `!important`规则。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-22T05:39:02.887

如果内联 CSS 具有`!important`. 它的优先级高于外部 CSS 文件中的样式。

但是，如果您希望它稍后更改某些操作，您可以使用一点 JavaScript。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-22T05:59:56.243

你不能覆盖内联 CSS `!important`，因为它具有更高的优先级，但是，使用 JavaScript，你可以实现你想要的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-22T05:52:54.010

您不能覆盖具有`!important`. 首选是内联样式。

例如：我们有一堂课

```
.styleT{float:left;padding-left:4px;width:90px;} 
```

并在jsp中

```
<div class="styleT" id="inputT" style="padding-left:0px;"> 
```

这里不采用。除了 padding-left:4px; 之外`padding-left:4px;`，它需要类。`styleT`会有`padding-left:0px;`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-10T07:40:47.567

这是一个简单的 jQuery 解决方案。

```
$(document).ready(function() { 
$('div').css('display','block');
}) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-17T09:41:35.977

你可以看看这个例子！CSS 选择器有几个规则。最强的选择器是内联的（如果相同级别有/没有！important）。下一个：id、class 等。所以如果一个标签已经被内联 css 与 !important 风格化，你只有一个方法：使用 Javascript 来改变。

```
var pid = document.getElementById('pid');
var button = document.getElementById('button');
button.addEventListener('click', function(){
  pid.style.color = '';
});
```

```
p{color:violet !important;}

*{color:blue !important;}

html *{color:brown !important;}

html p{color:lighblue !important;}

.pclass{color:yellow !important;}

#pid{color:green !important;}
```

```
<p class="pclass" id="pid" style="color:red !important;">
Hello, stylize for me !
</p>

<button id='button'>Change color by JS</button>
```

如您所见，内联 css 的样式已被删除，id 是现在最强的选择器！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-24T00:02:27.793

两个 CSS 属性应用于同一节点时的优先规则：

*   `!important`击败不- `!important`。如果同样！重要，...

*   `style`属性胜过文件中的 css。如果两者都在css文件中......

*   CSS 选择器中的 ID 胜过没有 ID。并且更多的 ID 击败更少。（并且您认为选择器中没有两个 ID 的原因。）如果相同的 ID 计数...

*   选择器中的类或属性`[name]`，对它们进行计数；更多的节拍更少。如果所有这些都一样...

*   标签名称如`span`or `input`，多节拍少。

所以你看到内联`!important`是最高优先级。**

# silverlight - 使用 Infragistics xamgrid 控件时错误对象引用未设置为对象的实例

> ID：11150687
> 
> 赞同：1
> 
> 时间：2012-06-22T05:36:35.727
> 
> 标签：silverlight, grid, infragistics, silverlight-5.0

我在 silverlight 5 应用程序中使用 ig:xamGrid。当我单击网格标题时，有时会显示错误

> silverlight 应用程序对象引用中未处理的错误未设置为对象的实例 (infragestics.controls.grid.primitives.Headercellcontrol.GetcellcontrolFromPoint,Type)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:49:06.740

试试这个，卸载版本 4 和 5 并从[http://go.microsoft.com/fwlink/?LinkID=188039](http://go.microsoft.com/fwlink/?LinkID=188039)安装 Silverlight_Developer ，希望它能解决您的问题

# jquery - 如何按顺序将数组中的 1 个类应用于每个 li？

> ID：11150694
> 
> 赞同：5
> 
> 时间：2012-06-22T05:37:05.803
> 
> 标签：jquery, html, css

**html**

```
<ul class="logoUl">
    <li class="orange"></li>
    <li class="blue"></li>
    <li class="green"></li>
    <li class="pink"></li>
</ul> 
```

**脚本**

```
if (selectedCategory == 'currentAll') {

    var strString = "orange,blue,green,pink";
    var strArray = strString.split(',');

    $.each(strArray, function (index, value) {
        $("ul.logoUl > li").addClass(value)
    });
} 
```

ul.logoUL 中有 4 个 li 制作图像![在此处输入图像描述](../Images/8fea1b144cb440e013fec3418141acc3.png) 有时徽标会获得背景颜色，这会将颜色重置为灰色![像这样](../Images/e0ac806f374811f8a129d182dfdc2912.png)

目前我的代码不会重置颜色![在此处输入图像描述](../Images/c8ba544e19d927abef52ed91f8364413.png)

**问题：**

如何`li`在一次添加一个类的同时迭代一个，希望通过类获得原始的配色方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T05:40:35.500

```
var strString = "orange,blue,green,pink",
    strArray = strString.split(',');

$("ul.logoUl > li").each(function (index, value) {
    $(this).addClass(strArray[index]);
}); 
```

**[演示](http://jsfiddle.net/j4qqS/5/)**

### 没有循环：

```
var strString = "orange,blue,green,pink",
    strArray = strString.split(',');

$("ul.logoUl > li").addClass(function (index) {
    return strArray[index];
}); 
```

**[演示](http://jsfiddle.net/j4qqS/2/)**

### 笔记

由于您有时会更改`class`每个`li`以使它们相似`background`，因此当您想再次为它们提供原始配色方案时，最好先删除先前分配的颜色`class`，然后再分配原始颜色，`class`如下所示：

```
var strString = "orange,blue,green,pink",
    strArray = strString.split(',');

$("ul.logoUl > li")
    .removeClass() // first remove previous class
    .addClass(function (index) { // then add new class
        return strArray[index];
    }); 
```

**[演示](http://jsfiddle.net/j4qqS/7/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T05:39:07.287

您可以使用

```
if (selectedCategory == 'currentAll') {

    var strString = "orange,blue,green,pink";
    var strArray = strString.split(',');

    $.each(strArray, function (index, value) {
        $("ul.logoUl > li").eq(index).addClass(value)
    });
} 
```

**演示：http:** [//jsfiddle.net/joycse06/j4qqS/](http://jsfiddle.net/joycse06/j4qqS/)

# debugging - Metro 应用程序的调试器如何工作？

> ID：11150695
> 
> 赞同：1
> 
> 时间：2012-06-22T05:37:17.553
> 
> 标签：debugging, winapi, windows-8, windows-runtime

所以基本上我对调试器的微不足道的研究导致我通过在原始进程周围创建一个包装器来工作，并且该进程在包装器内运行。（不是在调试器附加到已经运行的进程的情况下）。那么它是如何用于 Metro 应用程序的呢？Metro 应用程序只能在安装时分配给它们的应用程序容器内运行（实际上并未安装真正意义上的 Metro 应用程序），并且应用程序容器和 Metro 应用程序之间的映射记录在注册表项中。（全部来自我的研究，不知道如何正确，如果我错了请纠正我）。那么调试器是否也在同一个应用容器中运行？

编辑：关于为什么我想学习这个的驱动力的简短说明。我坚持[这一点](https://stackoverflow.com/questions/11135994/waiting-from-a-desktop-app-for-events-originating-from-a-metro-app-and-vice-vers)。所以我在想我是否可以通过将桌面应用程序作为调试器来实现这个 IPC（或者自动化调试器，这变得更加令人毛骨悚然）并使用 DebugBreak 模拟 Metro 应用程序和桌面应用程序之间的通信（从 Metro 应用程序内部) 和 Continue 语句（来自伪调试器应用程序）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T06:24:06.553

“包装”的心理形象是错误的。调试器只是一个单独的进程，它使用内置的 Windows 支持进行调试。它具有 SE_DEBUG 权限，由具有普通桌面应用程序权限的应用程序启动。像 Visual Studio。所以它不会在 AppContainer 本身内部运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:38:56.137

韩的回答是对的。对于 Metro 风格的应用程序，我们引入了一项新功能，允许您启动暂停的应用程序，我们将使用命令行选项启动已注册的调试器以指示要附加到的进程。有关此功能的信息，请参阅[IPackageDebugSettings API](http://msdn.microsoft.com/en-us/library/hh438393%28v=VS.85%29.aspx)，或查看[http://winrt.codeplex.com](http://winrt.codeplex.com)项目以获取示例用法。我不确定，但这个 API 可能存在开发者许可限制。

至于您在 Metro 风格应用程序和桌面应用程序之间支持 IPC 的初衷 - 正如链接线程所述，这是不受支持的。

# javascript - 如何在 javaScript 中使用 SWFUpload 读写文件？

> ID：11150696
> 
> 赞同：1
> 
> 时间：2012-06-22T05:37:18.860
> 
> 标签：javascript, swfupload

我正在使用 SWFUpload 将文件从客户端上传到服务器。当我选择要上传的文件时，在它上传之前我想读取该文件，向它写入一些额外的数据，然后它应该出现在服务器上进行上传。

可能吗？如果是那么请给我解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:41:41.707

这个问题类似于关于[更改文件名](https://stackoverflow.com/questions/10291754/change-file-names-before-uploading-with-swfupload)的问题。使用[FileReference](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cf8.html)、[事件处理程序](https://stackoverflow.com/questions/3301839/flexs-filereference-save-can-only-be-called-in-a-user-event-handler-how-ca)、[反序列](http://livedocs.adobe.com/livecycle/8.2/programLC/programmer/lcds/serialize_data_3.html)化和[转换](http://www.adobe.com/devnet/flash/quickstart/filereference_class_as3.html)的组合。

# magento - magento 数据流 config.xml 未加载？没有在覆盖中选择解析方法

> ID：11150700
> 
> 赞同：0
> 
> 时间：2012-06-22T05:38:14.920
> 
> 标签：magento

我的问题是当数据分析运行时，它好像根本没有拾取covert_adapter_category ......我似乎看不到遗漏了什么......有什么想法吗？

**数据流导入的输出：**

```
Starting profile execution, please wait...
Warning: Please do not close the window during importing/exporting data

Starting Mage_Dataflow_Model_Convert_Adapter_Io :: load
Loaded successfully: "/opt/bitnami/apps/magento/htdocs/var/import/Categories.csv".
Starting Mage_Dataflow_Model_Convert_Parser_Csv :: parse
Method "parse" not defined in adapter catalog/convert_adapter_category.
Finished profile execution. 
```

配置.xml：

```
<?xml version="1.0"?>
<config>
  <modules>
    <Import_Catalog>
      <version>0.1.0</version>
    </Import_Catalog>
  </modules>
  <global>

    <models>
    <catalog>
        <rewrite>
            <convert_adapter_category>Import_Catalog_Model_Convert_Adapter_Category</convert_adapter_category>
        </rewrite>
   </catalog>

   </models>

  </global>
</config> 
```

```
protected $_stores;

/**
 * Category display modes
 */
protected $_displayModes = array( 'PRODUCTS', 'PAGE', 'PRODUCTS_AND_PAGE');

public function parse()
{
    $batchModel = Mage::getSingleton('dataflow/batch');
    /* @var $batchModel Mage_Dataflow_Model_Batch */

    $batchImportModel = $batchModel->getBatchImportModel();
    $importIds = $batchImportModel->getIdCollection();

    foreach ($importIds as $importId) {
        //print '<pre>'.memory_get_usage().'</pre>';
        $batchImportModel->load($importId);
        $importData = $batchImportModel->getBatchData();

        $this->saveRow($importData);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:32:18.377

您的 current`config.xml`设置为`Mage_Catalog_Model_Convert_Adapter_Category`使用您的实现重写 Magento 的定义，`Import_Catalog_Model_Convert_Adapter_Category`. 不幸的`Mage_Catalog_Model_Convert_Adapter_Category`是，据我所知，Magento 中实际上并不存在。

我建议您更改您`config.xml`的模型，为您的模型定义自己的类前缀，如下所示：

```
<config>
    ...
    <global>
        <models>
            <customimport>
                <class>Import_Catalog_Model</class>
            </customimport>
        </models>
    </global>
    ...
</config> 
```

`customimport/convert_adapter_category`然后，在您实现逻辑后，编辑您的 Dataflow 配置文件以使用名为 的适配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T14:52:34.317

不要惊慌，只需刷新缓存并再次运行配置文件。这应该可以解决问题。

# android - 在android中定义常量的最佳方法是静态类、接口还是xml资源？

> ID：11150701
> 
> 赞同：103
> 
> 时间：2012-06-22T05:38:23.647
> 
> 标签：android, xml, configuration, constants, static-members

我正在开发一个使用 Web 服务从服务器获取数据的 android 应用程序，因为我有三组不同的 URL 来指向开发系统、测试服务器和实时服务器。每当我想提供测试/直播应用程序时，都很难更改 URL。所以我计划将其设置为可配置的，以便应用程序可以根据我的构建类型配置常量获取适当的 URL。所以，

*   保留此常量、java 静态类或 java 公共接口或 xml 资源文件的最佳方法是什么？**什么时候？为什么？**
*   哪个提供更好的性能？，**什么时候？为什么？**

例如：xml 资源

```
<integer name="config_build_type">0</integer>
<string-array name="url_authentication">
    <item >http://development.com/xxxx</item>
    <item >http://test.com/xxx</item>
    <item >http://example.com/xxx</item>
</string-array> 
```

Java 静态常量

```
public class Config {
    public static final int BUILD_TYPE = 0; // 0 - development, 1 - test, 2 - live
    public static final String[] URL_AUTHENTICATION = {"http://development.com/", "http://test.com/", "http://example.com"};
} 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-22T06:04:19.757

两者之间有很大的区别，您可以在 XML 布局中引用项目资源。它们在应用程序上下文中可用，因此可以跨全局应用程序访问。使用项目资源的最大优势是易于访问，并且它们允许您显着组织您的项目。

`static final`常量被编译成java字节码；项目资源在 apk 中被编译成二进制格式。访问任何一个都非常有效......如果两者之间存在差异，那最多是微不足道的。

关于如何在项目中使用资源/常量没有固定规则。也就是说，我个人将资源用于我可能需要在我的 XML*或*java 代码中使用的值。另一方面，我通常将`static final`常量用于*仅*由我的 java 代码使用并且特定于我的实现的值。

另请注意，根据设备的当前配置（即屏幕大小、区域设置等），可以在运行时加载 XML 资源。`.java`因此，在决定是在 XML 中还是直接在文件中声明常量时，您应该考虑到这一点。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-05-25T05:32:48.097

对于那些想了解我们如何使用类来定义我们的常量并在我们需要的地方调用的人。

> 常量.java

```
 package org.nrum.nrum;

/**
 * Created by rajdhami on 5/23/2017.
 */
public class Constant {
    public static final String SERVER = "http://192.168.0.100/bs.dev/nrum";
//    public static final String SERVER = "http://192.168.100.2/bs.dev/nrum";
    public static final String API_END = SERVER + "/dataProvider";
    public static final String NEWS_API = API_END + "/newsApi";
    public static final String BANNER_API = API_END + "/bannerApi/lists";
    public static final String NOTICE_API = API_END + "/noticeApi/lists";
    public static final String UPLOAD_PATH = SERVER + "/uploads";
    public static final String UPLOAD_PATH_BANNER = UPLOAD_PATH + "/company_1/banner";
    public static final String UPLOAD_PATH_NEWS = UPLOAD_PATH + "/company_1/news";
    public static final int BANNER_TRANSITION_DURATION = 5000;
    public static final int NOTICE_BUTTON_BLINK_DURATION = 5000;
    public static final int BANNER_FETCH_LIMIT = 3;
} 
```

现在我们可以通过以下方式使用上述常量。

```
Constant.NOTICE_BUTTON_BLINK_DURATION 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-22T05:45:05.593

一般情况下：

*   XML 值在布局文件和清单文件中的可访问性优于 Java 文件中的常量
*   XML 值比 Java 文件中的常量具有多语言支持的优势

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T06:27:07.700

从您的应用程序代码中提取 UI 字符串并将它们保存在外部文件中始终是一种很好的做法。Android 通过在每个 Android 项目中的资源目录使这变得容易。

> [http://developer.android.com/training/basics/supporting-devices/languages.html](http://developer.android.com/training/basics/supporting-devices/languages.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T06:36:17.763

我认为这两种方式似乎都很好，但问题是这取决于您的要求。

如果您的 XML 中有您的值（Web 服务链接）并且假设您的值（Web 服务链接）有任何更改，那么您可以轻松地仅在 XML 文件中进行更改。

但是，如果您将内部类用作静态变量，则必须在所有类文件中进行更改。

**所以我的建议是从源文件中分离常量并放入资源并访问它..**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-26T05:55:23.997

如果常量相关或依赖于语言环境或语言或在清单中使用，您可以考虑使用 xml 值

如果常量与翻译或语言环境无关或在清单中使用，我会避免将其放在 xml 资源中

我会在视图模型中添加枚举或任何需要使用常量作为键的东西。

```
enum class Key{
        key,rule,practice
    } 
```

或者

```
const val MY_CONST = "my constant" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-18T23:41:32.477

在科特林：

```
class Foo() { 
    // any other code for the class Foo 

    companion object {
        const val MY_CONSTANT = "my constant"
    }
} 
```

这种方法特别推荐用于数据对象。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-28T16:44:29.253

我很高兴有人问这个……加一个！

项目资源需要访问 Context，这在静态方法中不可用（除非您将其传递给 etc），但在 Activity 中始终可用——资源和布局之间似乎存在优先连接。对于可以在静态方法中处理的应用程序变量和常量，我创建了一个抽象类并在所有其他项目类文件中执行（此常量类的）静态导入。

PVS

# iphone - Xcode 的奇怪行为

> ID：11150704
> 
> 赞同：-1
> 
> 时间：2012-06-22T05:38:33.673
> 
> 标签：iphone, xcode

我正在 Xcode 中做 iOS 项目。它工作正常，但现在它给了我奇怪的字符来代替空间。它也反映在所有 Xcode 项目中。

![在此处输入图像描述](../Images/2d462a65ecc9551b4913737382a6cbef.png)

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T05:43:57.777

in xCode go to Menu->Editor->Hide invisible Characters

Why is this happening? because sometimes you need to know if your indentation or spacing is correct, or even you want to know if you are using spaces or tabs, then you will Show Invisibles, it maybe useful sometimes

![enter image description here](../Images/3d11ad547e7707f90aa38ef39d12f70d.png)

# sql - 单个 SQL 查询一次更新表中所有列的数据类型

> ID：11150705
> 
> 赞同：2
> 
> 时间：2012-06-22T05:38:43.263
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有一个 SQL Server 表，它有 625 个列，使用不同的数据类型（如`int`、`varchar(25)`、`decimal(18, 2)`等）创建...

现在有兴趣将所有列的数据类型更改为`varchar(255)`. 不是对所有列一一执行下面的查询，是否有一个 SQL Server 查询可以一次性更改表中所有列的数据类型？

```
ALTER TABLE dbo.Employee 
ALTER COLUMN FirstName VARCHAR(255) NOT NULL 
```

期待您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T06:10:37.250

没有一个单一的“神奇”子弹可以做到这一点 - 这是一种相当不寻常的操作，因此它本身不受支持。

您可以做的是从系统目录视图中迭代表的列，即时创建这样的 ALTER 语句，然后执行它 - 如下所示：

```
DECLARE AlterTableCursor CURSOR FAST_FORWARD 
FOR
    SELECT 
        AlterCmd = 'ALTER TABLE dbo.YourTableNameHere ALTER COLUMN ' + name + ' VARCHAR(255) NULL'
    FROM 
        sys.columns
    WHERE 
        object_id = OBJECT_ID('dbo.YourTableNameHere')

DECLARE @AlterTableCmd NVARCHAR(200)

OPEN AlterTableCursor

FETCH NEXT FROM AlterTableCursor INTO @AlterTableCmd

WHILE @@FETCH_STATUS = 0
BEGIN
    EXEC (@AlterTableCmd)

    FETCH NEXT FROM AlterTableCursor INTO @AlterTableCmd
END

CLOSE AlterTableCursor
DEALLOCATE AlterTableCursor 
```

用你的实际表名替换`YourTableNameHere`- 你应该很高兴！**首先在您的实时数据副本**上进行**测试**！

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T05:45:56.930

不可能。您将需要一一进行。你可以做以下事情 -

1.  您可以使用所需的列和类型创建临时表。
2.  将原始表中的数据复制到临时表中。
3.  删除原表
4.  将您的临时表重命名为您的原始名称

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T06:22:21.130

我会说在一个表中包含 625 列并不是一个好的设计，但是您可以按照要求执行的操作。

您可以生成一个`SQL`包含多个`ALTER`语句的字符串并使用`EXEC`. 但是，您必须小心数据转换。这就是为什么最好在游标中执行此操作的原因，因为您可以捕获无法更改的列的可能异常。这是一个简单的代码，它分两步完成：

*   生成`SQL`字符串；
*   使用执行它`EXEC`

代码示例：

```
SELECT * FROM sys.columns WHERE OBJECT_NAME(object_id) = 'Employee'

DECLARE @SQL VARCHAR(MAX)
SET @SQL = (
SELECT '
ALTER TABLE dbo.Employee ALTER COLUMN ' + c.name + ' VARCHAR(255) NULL;
'
FROM sys.columns c WHERE OBJECT_NAME(object_id) = 'Employee'
FOR XML PATH(''), TYPE
).value('text()[1]', 'VARCHAR(MAX)')

PRINT @SQL

EXEC(@SQL)

SELECT * FROM sys.columns WHERE OBJECT_NAME(object_id) = 'Employee' 
```**

# c# - 我的 Windows 窗体窗体中的焦点在哪里？

> ID：11150707
> 
> 赞同：0
> 
> 时间：2012-06-22T05:38:48.370
> 
> 标签：c#, winforms, tab-ordering

[我使用Visual Studio 2010](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010)`Tab order`的工具为我的表单组件设置焦点。我试了几次。现在，当焦点在最后时，如果我按多次，它会转到我不知道的地方。它永远不会成为第一个。我该如何解决这个问题？`Tab Index``TAB``Tab Index`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:09:47.720

我会在这里尝试两件事：

1.  尝试删除一些控件，看看是否解决了焦点问题，如果没有，则删除越来越多，直到它得到修复，然后您将更好地了解哪个控件破坏了顺序。

2.  每个控件都有一个`Focused`属性。您可以在所有控件上运行一个不同的线程，并检查哪个控件的此属性值为“true”。

    *   这有点长，但如果你不能以不同的方式找到问题，你可以试试
    *   更多关于[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.focused.aspx)`Focused`的财产

# iphone - iphone App在FbRequest方法后崩溃

> ID：11150708
> 
> 赞同：2
> 
> 时间：2012-06-22T05:38:52.263
> 
> 标签：iphone, objective-c, ios, xcode, facebook

我制作了一个带有“loginwithFacebook”按钮的 iPhone 应用程序，登录程序运行良好。但是 App 在通过 FBRequest 方法 " **`- (void)request:(FBRequest *)request didLoad:(id)result`"**和**" `- (void)connectionDidFinishLoading:(NSURLConnection *)connection`"**后崩溃。

我试图在这些方法中设置一些断点。然后，我很惊讶地看到应用程序正在工作经过一些延迟后，我设置了断点。

是否与从 Fbrequest 方法加载连接或延迟内容加载有关？

请帮我 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:18:20.200

可能与 Facebook 的访问令牌有关。因为当您使用 Facebook 登录时，您将获得一个访问令牌，并且该令牌在任何地方都使用，因此请尝试检查访问令牌是否不为零。这只是我的假设，但会要求您将代码保留在发生崩溃的地方。否则从控制台发布崩溃原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:21:54.817

**[NSNull lowercaseString]**这意味着您的一个字符串为空，并且您正在尝试将 lowercaseString 方法应用于该字符串。在此方法调用之前保留一个空检查条件，或者您可以检查为什么此字符串为空。

# c - C：解释 sizeof 行为

> ID：11150713
> 
> 赞同：1
> 
> 时间：2012-06-22T05:39:24.880
> 
> 标签：c, sizeof

> **可能重复：**
> [C/C++ 中字符（'a'）的大小](https://stackoverflow.com/questions/2172943/size-of-character-a-in-c-c)

有人可以解释为什么在 C `sizeof(char)`= 1 和`sizeof(name[0])`= 1 但`sizeof('a')`= 4 中？

`name[0]`在这种情况下将是`char name[1] = {'a'};`

我试图通读 C 的文档来得到这个，但我就是不明白！如果`sizeof('a')`两者`sizeof(name[0])`都是 4，我会得到它，如果它们都是 1，那将是有道理的......但我不明白差异！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T05:40:39.420

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T05:45:29.943

在 c 中，sizeof 运算符将“a”视为整数，因此您得到**4**作为大小

# eclipse - 如何使用输出 如何使用一个测试的输出 url 作为另一个测试的输入 url

> ID：11150715
> 
> 赞同：0
> 
> 时间：2012-06-22T05:39:43.147
> 
> 标签：eclipse, selenium, junit4

我现在用 eclipse 研究 Selenium 并使用 junit 测试。如何使用一个测试用例的输出 url 作为另一个测试用例的输入 url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:21:17.137

如果测试是在单个类中编写的，请使用全局变量。如果它们在单个 JVM 实例下执行，但不同的类使用环境变量

# css - CSS3 字符编码声明

> ID：11150721
> 
> 赞同：0
> 
> 时间：2012-06-22T05:40:24.820
> 
> 标签：css

在 CSS3 中是否需要使用字符编码声明。当我使用@charset "utf-8"; 声明它在 Visual Studio CSS3 验证中给出警告。谁能给个建议请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:36:18.260

我认为没有必要，但如果您的 CSS 文件中有任何非 ASCII 文本，建议您这样做。

来自[http://www.w3.org/International/questions/qa-css-charset.en.php#atcharset](http://www.w3.org/International/questions/qa-css-charset.en.php#atcharset)：

```
@charset "<IANA-defined-charset-name>"; 
```

> 只有一个@charset 规则可以出现在外部样式表中，并且它必须出现在文档的最开始。它前面不能有任何字符，甚至不能是注释。（但是，对于采用 Unicode 编码之一的文档，字节顺序标记是可以的。）

此外，您可以尝试将“utf-8”更改为大写，因为它是由 IANA 定义的大写：[http ://www.iana.org/assignments/character-sets/character-sets.xml](http://www.iana.org/assignments/character-sets/character-sets.xml)

# python - Controlling IO Pins

> ID：11150730
> 
> 赞同：0
> 
> 时间：2012-06-22T05:41:19.703
> 
> 标签：python, windows, io

Just wondering if:

Is it possible to control IO pins on the motherboard (I.e. PCI pins) from python. Secondly, If it is possible, how would I achieve this? Which library would I use, or how would I accomplish this. (On the windows OS).

Thanks.

# java - 如何在与 Maven 的战争中更新 MANIFEST

> ID：11150732
> 
> 赞同：2
> 
> 时间：2012-06-22T05:41:23.947
> 
> 标签：java, maven, overlay, war, maven-assembly-plugin

我需要更新战争的 META-INF.MF 文件

问题是

我的战争文件取决于其他战争文件，即取决于另一个战争文件

结构看起来像： -

```
 web.war
        on top of web.war created Client.war ( Customization  )
            on top of Client.war created lite.war 
```

在 web.war 中包含具有默认属性的 META-INF

```
While generating Client.war i got META_INF from web.war
...... 
```

lite.war 包含它自己的 META-INF，但它被基础战争覆盖

Maven 控制台输出：-

```
 [INFO] Processing war project
    [INFO] Copying webapp resources [**********/trunk/src/lite/src/main/webapp]
    [DEBUG]  + META-INF/MANIFEST.MF has been copied.
    [DEBUG]  + WEB-INF/web.xml has been copied.
    [DEBUG]  + WEB-INF/jboss-app.xml has been copied.
    [DEBUG]  + WEB-INF/web-2.5.xml has been copied.
    [DEBUG]  + WEB-INF/jboss_classloading.txt has been copied.
     .
     .
    [DEBUG]  + index.jasp has been copied.
    [DEBUG]  + WEB-INF/classes/org/wtc/web/board/Myboard.class has been copied.

    ..........

    [INFO] Processing overlay [ id wtc.eagle:Client]
    [DEBUG] Expanding:******/.m2/repository2/wtc/eagle/Client/2.0/Client-2.0.war into********/trunk/src/lite/target/war/work/wtc.eagle/Client
    [DEBUG] ********/trunk/src/lite/target/war/work/wtc.eagle/Client/META-INF/maven/wtc.eagle/Client/pom.properties: mode 100664, chmod 664
    [DEBUG] ********/trunk/src/lite/target/war/work/wtc.eagle/Client/META-INF/maven/wtc.eagle/Client/pom.xml: mode 100664, chmod 664
    .
    .....
    [INFO] Webapp assembled in [7854 msecs]
    [DEBUG] Excluding [] from the generated webapp archive.
    [DEBUG] Including [**] in the generated webapp archive.
    [INFO] Building war: ******/trunk/src/lite/target/Lite-1.0.war
    [DEBUG] adding directory META-INF/
    [DEBUG] adding entry META-INF/MANIFEST.MF 
```

你能帮我如何覆盖 lite.war 中的 META-INF 文件吗

提前致谢...

POM.XML：-

```
 <?xml version="1.0" encoding="UTF-8"?>
       <project xmlns="http://maven.apache.org/POM/4.0.0" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>eaglerplite</artifactId>
        <groupId>com.wtc.eaglerp</groupId>
        <version>1.0</version>
    </parent>
<groupId>com.wtc.eaglerp</groupId>
<artifactId>lite</artifactId>
<packaging>war</packaging>
<version>1.0</version>

 <name>LIte </name>
    <url>http://javate.sourceforge.net</url>
<dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
                <scope>provided</scope>
         </dependency>
         <dependency>
                <groupId>commons-io</groupId>
                <artifactId>commons-io</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.zkoss.zk</groupId>
                <artifactId>zk</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.zkoss.zk</groupId>
                <artifactId>zkplus</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.zkoss.zk</groupId>
                <artifactId>zul</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.zkoss.zk</groupId>
                <artifactId>zhtml</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.zkoss.zk</groupId>
                <artifactId>zkex</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.zkoss.zk</groupId>
                <artifactId>zkmax</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.zkoss.common</groupId>
                <artifactId>zcommon</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.zkoss.common</groupId>
                <artifactId>zweb</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.zkoss.zkforge.el</groupId>
                <artifactId>zcommons-el</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>commons-lang</groupId>
                <artifactId>commons-lang</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.beanshell</groupId>
                <artifactId>bsh</artifactId>
        </dependency>
        <dependency>
                <groupId>org.codehaus.groovy</groupId>
                <artifactId>groovy-all</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.jruby</groupId>
                <artifactId>jruby</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>org.python</groupId>
                <artifactId>jython</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>rhino</groupId>
                <artifactId>js</artifactId>
                <scope>provided</scope>
        </dependency>
        <dependency>
                <groupId>net.sf.jasperreports</groupId>
                <artifactId>jasperreports</artifactId>
                <scope>provided</scope>
        </dependency>
<dependency>
    <groupId>wtc.eagle</groupId>
    <artifactId>Client</artifactId>
    <version>2.0</version>
    <type>war</type>
    <scope>compile</scope>
</dependency>
<dependency>
    <groupId>eagle</groupId>
    <artifactId>webui</artifactId>
    <version>360</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>com.wtc.eaglerp</groupId>
    <artifactId>baselite</artifactId>
    <version>1.0</version>
    <type>jar</type>
    <scope>compile</scope>
</dependency>
<dependency>
<groupId>eagle</groupId>
<artifactId>timelinez</artifactId>
<version>1.0</version>
</dependency>
<dependency>
    <groupId>eagle.theme</groupId>
    <artifactId>Pistacho</artifactId>
    <version>2.0</version>
</dependency>
  </dependencies>
 <build>
       <finalName>Lite-1.0</finalName>
        <sourceDirectory>${basedir}/src/main/webapp/WEB-INF/src/</sourceDirectory>
        <outputDirectory>${basedir}/src/main/webapp/WEB-INF/classes/</outputDirectory>
    <plugins>   
    <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <webResources>
                        <webResource>
                            <directory>src/main/webapp</directory>
                            <filtering>true</filtering>
                            <includes>
             <!--                   <include>META-INF/**</include>    -->
                                <include>META-INF/MANIFEST.MF</include>
             <!--                   <include>WEB-INF/web.xml</include> -->
                            </includes>
                        </webResource>
                        <webResource>
                              <directory>${basedir}/src/main/webapp</directory>
                          </webResource>
                    </webResources>
                 </configuration>
            </plugin>
  </plugins>
</build>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:56:27.443

试试下面的配置，在 pom.xml 中添加这个配置

```
<plugin>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <webResources>
                        <webResource>
                            <directory>src/main/webapp</directory>
                            <filtering>true</filtering>
                            <includes>
                                <include>META-INF/MANIFEST.MF</include>
                                <include>META-INF/context.xml</include>
                                <include>WEB-INF/web.xml</include>
                            </includes>
                        </webResource>
                        <webResource>
                            <directory>../projectname-webapp</directory>
                        </webResource>
                    </webResources>
                </configuration>
            </plugin> 
```

# java - resize all images in gridview to fit the 3x5

> ID：11150733
> 
> 赞同：0
> 
> 时间：2012-06-22T05:41:27.957
> 
> 标签：java, android, android-layout, android-gridview

I have a GridView with 3 columns and 5 rows of images.

currently configureg like...

```
<GridView
    android:id="@+id/faces_gridview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:numColumns="3" >
</GridView> 
```

I want the images inside to resize themselves to fit 3x5 grid which is different in each phone. how can I tell the GridView to resize the images based on the grid size that I want ?

numColumns sets the columns but it does not reassure me that there will be 5 rows visible in the screen. I don't want to use a scroller.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:50:27.463

根据[GridView 自动调整图像](https://stackoverflow.com/questions/5872530/gridview-auto-fit-images)和[GridView 不拉伸到所有屏幕](https://stackoverflow.com/questions/7053016/gridview-not-stretching-to-all-screens)

尝试

```
android:scaleType="fitXY" in image view 

and

 android:stretchMode="columnWidth" in grid view 
```

# php - Adding a sub-menu to a custom post type

> ID：11150735
> 
> 赞同：1
> 
> 时间：2012-06-22T05:41:42.583
> 
> 标签：php, wordpress

I want to know how to add a new submenu for a custom post type in creating a wordpress plugin. What I have done for now, I've created a custom post type called 'funds'.

```
add_action( 'init', 'wnm_add_funds' );
function  wnm_add_funds() {
register_post_type('wnm_funds',
    array(
        'labels'        => array(
                                'name'              => __( 'Funds' ),
                                'add_new'           => __( 'Add New Fund' ),
                                'add_new_item'      => __( 'Add New Fund' ),
                                'edit_item'         => __( 'Edit Fund' )),
        'public'        => true,
        'has_archive'   => true,
        'menu_position' => 100
    )
); 
```

}

This code adds a custom post type called 'Funds' and under it is two submenus ('funds','add new fund'). What I would like to do is to add new submenu under funds. Example I would like to add 'Fund Settings', so under funds there will be (funds,add new fund,fund settings).

how would i do that?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T06:08:44.403

您可以这样做： http:
[//codex.wordpress.org/Function_Reference/add_submenu_page](http://codex.wordpress.org/Function_Reference/add_submenu_page)
[http://codex.wordpress.org/Roles_and_Capabilities](http://codex.wordpress.org/Roles_and_Capabilities)
我不知道该功能是否适合您的原因，但这会起作用

```
<?php
add_submenu_page(
    'edit.php?post_type=wnm_funds',
    'Fund Settings', /*page title*/
    'Settings', /*menu title*/
    'manage_options', /*roles and capabiliyt needed*/
    'wnm_fund_set',
    'CALLBACK_FUNCTION_NAME' /*replace with your own function*/
); 
```

要将设置/选项添加到页面，我推荐[设置 API](http://codex.wordpress.org/Settings_API)
一个很好的（而且有点长）教程如何使用它：[http ://wp.tutsplus.com/tutorials/the-complete-guide-to-the-wordpress-设置-api-part-1/](http://wp.tutsplus.com/tutorials/the-complete-guide-to-the-wordpress-settings-api-part-1/)

# iphone - How to capture black and white video using in iPhone

> ID：11150736
> 
> 赞同：0
> 
> 时间：2012-06-22T05:41:42.987
> 
> 标签：iphone, video, capture

> **Possible Duplicate:**
> [Recording video in Black and White](https://stackoverflow.com/questions/7113639/recording-video-in-black-and-white)
> [How to capture the black and white video](https://stackoverflow.com/questions/10975758/how-to-capture-the-black-and-white-video)

I am developing iPhone application. In this application i need to capture the video that video format is black and white video. I trying to solve this last one week. I don't know how solve this. If anybudy know how to capture the black and white video, here post your commands. give some example link and code also, It's needful for development.

Thanks in Advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:45:25.667

coreimage（ios 5 或更高版本）有许多视频/图像过滤器，可以配置为获得戏剧效果，包括您正在寻找的效果（黑白）。

查看相同的文档： [https ://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/CoreImaging/index.html](https://developer.apple.com/library/mac/documentation/graphicsimaging/Conceptual/CoreImaging/index.html)

# mongodb - MongoDB shell: Run command asynchronously?

> ID：11150738
> 
> 赞同：2
> 
> 时间：2012-06-22T05:41:57.687
> 
> 标签：mongodb

Lately I have found I have to do a lot of long running operations like:

```
db.whois.find({"basic.last_updated":"1970-01-01 00:00:00"}).forEach(function (doc) {
  var parts = doc._id.split('@');
  doc.basic.last_updated = parts[1];
  db.whois.save(doc);
}) 
```

That's fine but since the shell prompt doesn't return until it's complete I am finding I have to keep lots of shells open. Is there any way I can issue a command and send it async so that I can continue using the same shell? Maybe even get a little message when the process is done?

# javascript - javascript add operation returns bad result

> ID：11150741
> 
> 赞同：2
> 
> 时间：2012-06-22T05:42:07.530
> 
> 标签：javascript, add

I've a funny idiotic problem: Why is `javascript` showing that `10.2 - 17 = -6.800000000000001` ?

Found something similar here: [Calculate a minus operation in javascript returns a incorrect value](https://stackoverflow.com/questions/10966867/calculate-a-minus-operation-in-javascript-returns-a-incorrect-value) but I can't round the numbers.

Can I somehow fix this without specifying how many decimals to use? (I actually have some results that can have 6-7 decimals)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T05:43:58.573

Floating point arithmetic is not always precise.

In particular there is no exact representation of 10.2 as a floating point value, so the nearest representable value is stored instead. This value will be very slightly different from 10.2.

The simplest way to handle it is to round the numbers to a certain number of decimal places when you display them.

Some languages have a `decimal` type that can represent 10.2 exactly. However:

*   Javascript has no built in type like this, so you'd have to use a third-party library.
*   Decimal floating point numbers don't solve all problems. For example the result of `0.1 / 0.3` cannot be represented exactly as a decimal. You may still need to round results to a certain number of decimal places when you display them.

# android - Work with Array of Intent and copy one Intent to another Intent

> ID：11150744
> 
> 赞同：0
> 
> 时间：2012-06-22T05:42:59.657
> 
> 标签：android, arrays, android-intent, android-activity

I am having a Listview and two buttons in my Activity,

when ADD button clicked it will call some other activity for result, that activity return a intent with data, each time diff data in the intent received, and the title only added to the listview,

when SAVE button clicked, all the intent data would be saved in database,

So I need to create intent array ie

> Inten[] intArray = new Intent[100];

and I need to copy the returned Intent each time **onActivityResult(Intent data)** to the Intent array as

> intArray[i] = data;

How can I achieve this, If I can do this I can solve a big problem in my Project....

Following is the code I tried.... **Intent[] intentArray = new Intent[100]; declared as this class variable**

```
@Override
public void onActivityResult(int reqCode, int resultCode, Intent data) {
    super.onActivityResult(reqCode, resultCode, data);
    if(resultCode == Activity.RESULT_OK)
    {
        switch(reqCode)
        {
            case 1:
                trigName = data.getStringExtra("TriggerName");
                subName = data.getStringExtra("SubName");

                intentArray[i] = data; i++;

                temp = new HashMap<String, String>();
                temp.put("Name", trigName);
                temp.put("Sub", subName);
                list.add(temp);
                adapter.notifyDataSetChanged();
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:56:01.713

猜测你没有说明你所提供的代码有什么问题......但是

删除对`super.onActivityResult(reqCode, resultCode, data);`

或者如果你需要调用它；处理完所需信息后，在最后调用它。

# python - 简单的石头剪刀布游戏，返回分数有问题吗？

> ID：11150756
> 
> 赞同：0
> 
> 时间：2012-06-22T05:44:55.093
> 
> 标签：python

我正在为我的编程课编写这个剪刀石头布程序，并且在程序结束时显示满分时遇到了一些问题。我是 Python 的超级初学者，所以这里没什么特别的。出于某种原因，当我运行程序时，无论游戏循环多少次，唯一显示的分数都是 1。我在这里做错了什么？

```
from myro import *
from random import *

def announceGame():
    """ Announces the game to the user """ 
    speak("Welcome to Rock, Paper, Scissors. I look forward to playing you.") 

def computerMove():
    """ Determines a random choice for the computer """ 
randomNumber = random()
    if randomNumber == 1:
       compMove = "R"
    elif randomNumber == 2: 
       compMove = "P"
    else:
       compMove = "S"
return compMove 

def userMove():
    """ Asks the user to input their choice.""" 
    userChoice = raw_input("Please enter R, P, or S: ")
    return userChoice

def playGame(userChoice, compMove):
    """ Compares the user's choice to the computer's choice, and decides who wins.""" 

    global userWin
    global compWin
    global tie

    userWin = 0
    compWin = 0
    tie = 0

    if (userChoice == "R" and compMove == "S"):
       userWin = userWin + 1
       print "You win."

    elif (userChoice == "R" and compMove == "P"):
       compWin = compWin + 1
       print "I win."

    elif (userChoice == "S" and compMove == "R"):
       compWin = compWin + 1
       print "I win."

    elif (userChoice == "S" and compMove == "P"):
       userWin = userWin + 1
       print "You win"

    elif (userChoice == "P" and compMove == "S"):
       compWin = compWin + 1
       print "I win"

    elif (userChoice == "P" and compMove == "R"):
       userWin = userWin + 1
       print "You win"

    else:
       tie = tie + 1
       print "It's a tie"

    return compWin, userWin, tie

def printResults(compWin, userWin, tie):
    """ Prints the results at the end of the game. """
    print "     Rock Paper Scissors Results "
    print "------------------------------------" 
    print "Computer Wins: " + str(compWin)
    print "User Wins: " + str(userWin)
    print "Ties: " + str(tie) 

def main():
    announceGame()
    for game in range(1,6):
       u = userMove()
       c = computerMove()
       game = playGame(u,c)

    printResults(compWin, userWin, tie)  

main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:48:42.293

在 内部`playGame`，您将`userWin`、`compWin`和`tie`设置为零。因此，每次调用该函数时，它们都会在添加新值之前设置为零。您应该在循环中调用的函数之外初始化这些变量。（例如，您可以在 中初始化它们`announceGame`。）

# asp.net-mvc-3-areas - 如何在 mvc3 中显示模式弹出窗口？

> ID：11150757
> 
> 赞同：1
> 
> 时间：2012-06-22T05:44:56.000
> 
> 标签：asp.net-mvc-3-areas

我需要在弹出窗口中显示详细信息。我不知道该怎么做。我需要在 MVC3 Razor 视图中执行此操作。

我的控制器-

```
public ViewResult ViewDetail(Int32 id)
{
  var q = from p in db.accs
          where p.id == id
          select p;
  return View(q.FirstOrDefault());
} 
```

我的观点-

```
<td>@ Html.ActionLink("View Detail", "ViewDetail", new { id=item.id }) </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:55:11.627

这种任务实际上并不是 ASP.NET MVC / Razor 所做的。考虑使用像[JQuery UI Dialog](http://jqueryui.com/demos/dialog/)这样的 Javascript 库。您必须将几个 JQuery UI 脚本添加到您的页面，但回报是一个非常简单的 API；您可以使用一行代码从任何 HTML 元素（例如 id *mydiv ）创建一个基本对话框：*

```
$( "#mydiv" ).dialog(); 
```

当然，您可以应用自定义和主题。

当然，您可以简单地使用 Javascript：

```
alert("my details here"); 
```

获得一个基本的模态弹出窗口，但我猜这不是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T05:08:11.257

使用 Jquery UI [ModalForm](http://jqueryui.com/dialog/#modal-form)来显示您的数据。

假设您想在 jquery 的模态弹出窗口中显示以下内容。

```
<div id="displayinmodal">
<input type="file" id="file" name="file" />
<input type="submit" id="submitdata" value="Upload" />
</div> 
```

现在像这样写你的jquery。

```
<script>
$(document).ready(function(){
     $("#displayinmodal").dialog({ //displayinmodal is the id of the div you want to display in modal popup
         autoOpen: true
     });
});
</script> 
```

就是这样。您应该在浏览器中看到模态弹出窗口。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:59:19.113

如果你想要一个简单的没有多余装饰的模式（内容不多），你可以像这样使用 JavaScript 警报：

```
alert('Hello from a modal popup'); 
```

如果你想要一个更漂亮的选项，一个常见的解决方案是使用 jQuery UI 的对话框，它允许一个模式选项。在此处查看有关使用此选项获得的内容的演示：

[http://jqueryui.com/demos/dialog/#modal](http://jqueryui.com/demos/dialog/#modal)

代码很简单；下面应该使用 Google 的 CDN 作为脚本和股票 jQuery UI CSS 的来源为您做所有事情：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js" type="text/javascript"></script>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">
    $(function() {
        $( "#details" ).dialog({
            modal: true
        });
    });
</script>

<div id="details">
    Hello from a modal popup
</div> 
```

# c# - void* 通过 ref 传入 C#

> ID：11150776
> 
> 赞同：0
> 
> 时间：2012-06-22T05:47:23.233
> 
> 标签：c#, visual-c++, pointers, dll, dllimport

vc++ dll中有一个函数。

```
void fun(unsigned int nchannel,int nFGHandle,void* i); 
```

现在我想在我的 c# 代码中调用这个 dll。我是这样使用的，

```
[DllImport ("AVC.dll")]
public static extern void fun(UInt32 a,int b,ref void c ); 
```

所以我想问

1.  有没有必要编组？
2.  如何在 C# 中将ref 用于**void* i**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T05:50:12.993

据我所知，您使用`IntPtr`to marshal `void *`，但是，如果您需要返回值，您可以直接使用`out <type>`并有几个重载，例如：

```
[DllImport ("AVC.dll")]
public static extern void fun(UInt32 a,int b, out int c );
[DllImport ("AVC.dll")]
public static extern void fun(UInt32 a,int b, out float c ); 
```

等等

# html - 重绘 HTML5 画布非常慢

> ID：11150779
> 
> 赞同：4
> 
> 时间：2012-06-22T05:47:40.783
> 
> 标签：html, canvas

我刚开始玩 HTML5 画布，我希望能用它制作一些游戏。然而，当我开始向它渲染鼠标坐标时，它几乎停止了：

[http://jsfiddle.net/mnpenner/zHpgV/](http://jsfiddle.net/mnpenner/zHpgV/)

我所做的只是渲染 38 行和一些文本，它应该能够处理，不是吗？

难道我做错了什么？我希望能够以至少 30 FPS 的速度进行渲染，但是对于这样的事情，我希望它能够绘制 1000 次。

还是我只是在工作中使用了错误的工具？WebGL 能胜任这项任务吗？为什么一个会比另一个慢这么多？

```
String.prototype.format = function() {
    var args = arguments;
    return this.replace(/\{(\d+)\}/g, function(m, n) {
        return args[n];
    });
};
var $canvas = $('#canvas');
var c = $canvas[0].getContext('2d');
var scale = 20;
var xMult = $canvas.width() / scale;
var yMult = $canvas.height() / scale;
var mouseX = 0;
var mouseY = 0;
c.scale(xMult, yMult);
c.lineWidth = 1 / scale;
c.font = '1pt Calibri';

function render() {
    c.fillStyle = '#dcb25c';
    c.fillRect(0, 0, scale, scale);
    c.fillStyle = '#544423';
    c.lineCap = 'square';
    for (var i = 0; i <= 19; ++i) {
        var j = 0.5 + i;
        c.moveTo(j, 0.5);
        c.lineTo(j, 19.5);
        c.stroke();
        c.moveTo(0.5, j);
        c.lineTo(19.5, j);
        c.stroke();
    }
    c.fillStyle = '#ffffff';
    c.fillText('{0}, {1}'.format(mouseX, mouseY), 0.5, 1.5);
}
render();
$canvas.mousemove(function(e) {
    mouseX = e.clientX;
    mouseY = e.clientY;
    render();
});
```

```
<canvas id="canvas" width="570" height="570"></canvas>
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T20:29:41.063

这是代码变得更好。

[http://jsfiddle.net/zHpgV/3/](http://jsfiddle.net/zHpgV/3/)

以下是我更改后您应该考虑的事项的细分：

*   连续添加到路径而不是停止并使用`beginPath`. 这是迄今为止最大的性能杀手。您最终会得到一条包含成千上万条线段的路径，这些线段永远不会被清除。
*   当只需要创建一次时，在初始化时不断地重复创建相同的路径。也就是说，您唯一需要在内部调用的`render`是`stroke`. 你不需要再打电话`lineTo/moveTo`了，当然也不需要连续打电话。见注 1。
*   为一条路径抚摸两次
*   在 for 循环中抚摸
*   重绘背景而不是设置 CSS 背景
*   一遍又一遍地设置线路上限

*注意 1：*如果您计划在应用程序中拥有多个路径，那么您可能应该缓存这样的路径，因为它们永远不会改变。我有一个关于如何做到这一点的[教程](http://simonsarris.com/blog/427-increasing-performance-by-caching-paths-on-canvas)。

当然，**如果您这样做只是为了制作背景，则应将其保存为 png，并且您应该使用 CSS 背景图像。**

像这样：http: [//jsfiddle.net/zHpgV/4/](http://jsfiddle.net/zHpgV/4/)

然后突然你的渲染例程相当小：

```
function render() {
    c.clearRect(0, 0, scale, scale);
    c.fillText('{0}, {1}'.format(mouseX, mouseY), 0.5, 1.5);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-22T17:41:14.057

正如我在评论中所说，我对这段代码的缓慢感到惊讶，因为我用非常快的动画绘制了更复杂的东西，甚至没有考虑双缓冲。

于是我又看了看，果然发现了一个bug。

主要问题是绘制路径的积累。

`c.beginPath();`每次绘制一条路径时添加一个。

这是[同一事物的快速渲染](http://jsfiddle.net/dystroy/dWj6X/)，以证明它现在可以运行。

画布绘图**速度**很快，可用于动画。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-22T06:01:22.747

您不必在每个动画帧中绘制整个网格。将它放在另一个底层画布上（通常称它们为“层”，但它们只是单独的画布元素），因此您只能重绘坐标。

```
<div id="canv">
 <canvas id="bgLayer" width="500" height="500" style="z-index: 0"></canvas>
 <canvas id="fgLayer"  width="500" height="500" style="z-index: 1"></canvas>
</div> 
```

这是我一直在使用分层画布[的示例。](http://catlion.github.com/)表格绘制在底部画布上，球绘制在顶部画布上。它只是一个游乐场，因此有很多需要修复和优化的地方，例如在另一个隐藏的画布上只绘制每个球一次，并使用[getImageData/putImageData](http://hacks.mozilla.org/2009/06/pushing-pixels-with-canvas/)来提高性能。

另外，推荐使用[requestAnimationFrame](https://stackoverflow.com/q/8195602/55209)来更新画布。相反，您的示例利用了每次鼠标移动，这比需要更频繁（当然，当鼠标移动时）。

有一篇关于提高画布性能的好[文章。](http://www.html5rocks.com/en/tutorials/canvas/performance/)此外，关于这个主题还有一篇很棒的[SO 帖子。](https://stackoverflow.com/q/8205828/55209)

# delphi - 使用最终应用程序发送组件的自定义设置

> ID：11150780
> 
> 赞同：0
> 
> 时间：2012-06-22T05:47:49.583
> 
> 标签：delphi, resources, delphi-7, custom-component

我正在`Delphi-7`研究一个基本上创建一个 zip 文件并具有 5 个功能的组件（如下）

1]文件夹

2]图像

3] 文本文件

4]在应用程序目录或应用程序数据目录中创建一个zip文件的文件夹

5]是否创建Zip文件

该组件将被拖放到一个**表单**上。现在我有另一个应用程序（**settingAppl**），用户可以从中实际决定启用`5`组件的任何功能。一切正常，因为我已将用户选择的设置保存在`registry`. 我没有使用注册表（我不确定将注册表 *.reg 与组件一起发送是否是个好主意），而是使用了一个 DAT 文件[About.com_fileof_delphi](http://delphi.about.com/od/fileio/a/fileof_delphi.htm)，**settingAppl**会将 5 个设置写入该文件。我需要将文件与将具有该组件的应用程序一起发送，以便它可以读取 5 个设置。

有没有一种方法可以直接将 5 个设置设置到组件中，因为如果应用程序目录中缺少文件，我会卡住该怎么办？

像 Eureka log 一样，有人能告诉我如何做类似的事情吗？这意味着当我们在 eureka 日志中设置设置时，程序员不必在最终应用程序中包含/发送文件

![在此处输入图像描述](../Images/6a8c8722deed669d914852f7b046f771.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:16:43.807

在经历了@david 和@Ken White 的想法之后（这比我想到的想法要简单得多..也更好（方式））。我`published`像这样将属性引入到组件中

```
private
  { Private declarations }
  FFolderzip  ,Fimagezip,Ftextzip      : Boolean;
  FMessagebo : string;
published
   { Published declarations }
   {component Properties}
   {#1.Folder Zip}
   property ZipFolder : Boolean read FFolderzip  write FFolderzip  default False;
   {#2.Send imagezip ?}
   property ZipImage : Boolean read Fimagezip   write Fimagezip   default False;
   {#3.text files}
   property ZipText : Boolean read Ftextzip   write Ftextzip   default False;
   {#4.message}
   property ZipMessage: String read FMessagebo write FMessagebo ; 
    ....
 end; 
```

然后访问属性

```
 procedure TForm1.Button1Click(Sender: TObject);
    var
       bZipFolder,bZipImage,bZipText: boolean;
       sMessage : string;
   begin
       bZipFolder:=zipperCom1.ZipFolder ;
       bZipImage :=zipperCom1.ZipImage; 
       bZipText  :=zipperCom1.ZipText; 
       sMessage  :=zipperCom1.ZipMessage;
    end; 
```

额外参考来源：-

1] [ADDWriteToReadOnlyProps](http://www.evocorp.com/Delphi/ADDWriteToReadOnlyProps.htm)

2][德尔福属性](http://www.podgoretsky.com/ftp/Docs/Delphi/D5/dg/property.html)

# loading - Microchip：如何在 MPLAB X 中加载多个 HEX 文件

> ID：11150783
> 
> 赞同：0
> 
> 时间：2012-06-22T05:48:02.527
> 
> 标签：loading, microchip, pic18, mplab

我使用 MPLAB X（有时是 MPLAB 8）并完成了一些项目。我有这些十六进制文件：

*   引导加载程序.hex
*   魔术标志.hex

Bootloader 从地址 0x0 加载到 0x7FF。魔术标志位于地址 0x40 中（因此在引导加载程序区域中）。

现在我需要在 MPLAB X 中设置项目以加载所有内容（bootloader+magicFlag+app）。可以加载引导加载程序，然后是magicFlag，然后设置保留闪存并在应用程序上工作并仅加载应用程序区域（从0x800到0xFFFF），但这对我来说不太舒服。例如，当我使用 iSYSTEM 的 WinIDEA IDE 与飞思卡尔合作时，我能够设置许多要加载的 SX 文件，非常简单、快速并且可以正常工作。但是当我用 MPLAB XI 尝试它时，总是会出错：

> (944) appl.hex 和 bootloader.hex 之间地址 0h 的数据冲突。

我尝试了什么：

*   用于在项目属性中加载的设置文件（加载部分）
*   在项目属性中设置内存范围（ICD 3 部分）

但我认为加载 ICD 3 没有问题。因为当 MPLAB X 创建统一的 hex 文件时，错误及时出现。

想象一下，这是我的链接器的一部分：

```
CODEPAGE   NAME=BootResetVec START=0x000             END=0x007         PROTECTED
CODEPAGE   NAME=BootHighISR  START=0x008             END=0x017         PROTECTED
CODEPAGE   NAME=BootLowISR   START=0x018             END=0x029         PROTECTED
CODEPAGE   NAME=TRMAGIC      START=0x040             END=0x07F         PROTECTED
CODEPAGE   NAME=BootLoader   START=0x080             END=0x07FF        PROTECTED

CODEPAGE   NAME=page         START=0x800             END=0x7D7F
CODEPAGE   NAME=debug        START=0x7D80            END=0x7FFF        PROTECTED 
```

我提醒一下，这不仅是我的项目，而且只是带有 magicFlag 的引导加载程序，而且我只有来自 appl 的源代码。当然，最好在一个项目中拥有带有 appl 的 bootloader 源代码。

所以，MPLAB X 害死我了，请帮助我 :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:58:19.460

您不能将两个应用程序加载到同一个内存地址空间！您需要将`magic_flag`应用程序重新编译到更高的地址，而不是在程序闪存中合并两者。链接器不能代替你做。:)

# c# - 从显示的文本中删除 html 特殊字符

> ID：11150785
> 
> 赞同：0
> 
> 时间：2012-06-22T05:48:14.133
> 
> 标签：c#, string, html-entities

我有 Xml 巫婆转换为纯文本，然后在 Web 浏览器中以 html 格式显示。

在每行的末尾出现符号 ¶ 我想删除该符号或将其替换为 .

有谁知道我怎么能做到这一点？

这就是我将 XML 转换为纯文本的方式：

```
XmlDocument doc = new XmlDocument();
                        doc.LoadXml(this.dataGridViewResult.SelectedRows[0].Cells["XMLEvent"].Value.ToString());

StringBuilder sb = new StringBuilder();
foreach (XmlNode node in doc.DocumentElement.ChildNodes)
{
  sb.Append(char.ToUpper(node.Name[0]));
  sb.Append(node.Name.Substring(1));
  sb.Append(' ');
  sb.AppendLine(node.InnerText);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:19:24.817

'¶' 出现在哪里？是在编辑器中打开转换后的文本文件时吗？

通常，该符号用于在文本编辑器中可视化行尾，它实际上并不是文本的一部分。在许多情况下，您可以在文本编辑器中选择显示/隐藏行结束标记。

但是，如果您感兴趣的输出是 HTML，则该字符不应出现在此处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:51:25.507

尝试这个：

```
sb.AppendLine(node.InnerText.TrimEnd('¶')); 
```

或者

```
sb.AppendLine(node.InnerText.Replace("¶",".")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:52:38.170

特别是在你的情况下（假设它总是在行尾），我会使用：

```
sb.AppendLine(node.InnerText.Replace('\u00b6', '.')); 
```

如果你想保持你的代码 unicode 免费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T06:09:05.033

循环后`foreach`，尝试：

```
sb.Replace("¶", "."); 
```

# oracle - 无法使用 DBCA 创建数据库

> ID：11150786
> 
> 赞同：0
> 
> 时间：2012-06-22T05:48:18.877
> 
> 标签：oracle, oracle11g

我已经在 Windows 7 上成功安装了 Oracle 11g。但是，当我使用 DBCA 创建数据库时，它在最后一步显示 init.ora（拒绝访问），然后停止。我使用管理员登录系统。

我已经手动更改了创建数据库文件的目录的设置。但是都没有成功。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-07T01:45:06.030

这是在我的 Windows 10 PC 上运行的 Oracle 12c 中。

在打开命令提示符之前右键单击“CMD”并

单击“以管理员身份运行”，以完全管理员权限打开命令提示符

通过在此命令窗口中键入 DBCA 来调用“DBCA”帮助

数据库创建助手打开，这一步之后的一切都很顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:36:58.093

听起来您没有遵循安装指南。如果您尚未将用户添加到域组，则会出现典型错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T08:15:11.947

我今天跳进了同样的问题。无论您是否以管理员身份登录，该问题都会一直出现（在大多数情况下，我们以管理员身份登录，和我一样）。

我得到的问题是：按Windows键打开开始菜单，输入'dbca'，当dbca.bat出现在程序中时，右键单击并选择'以管理员身份运行'，现在一切正常！

# windows-runtime - 如何从剪贴板中读取“终端服务私有数据”？

> ID：11150794
> 
> 赞同：0
> 
> 时间：2012-06-22T05:49:06.370
> 
> 标签：windows-runtime, clipboard, terminal-services

当我查看剪贴板时，我得到的只是一个名为“终端服务私有数据”的 IRandomAccessStream。当您从桌面复制文件但在模拟器中运行您的应用程序时，就会发生这种情况。我想尝试阅读这些数据，有谁知道我在哪里可以找到文档以找出流中的内容？如果您复制多个文件或一个文件，则它是相同的格式和值类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:43:29.463

您可以编写一个小应用程序将其转储为字符串或十六进制值。我敢打赌，如果你仔细看，格式会很明显。

# java - 在android中使用浮点值设置布局边距

> ID：11150797
> 
> 赞同：3
> 
> 时间：2012-06-22T05:49:29.597
> 
> 标签：java, android, android-layout, mobile

我想设置 Imageview 的边距。我想要实现的是将一张图像移动到一定距离。屏幕的内容是RelativeLayout，左边有ImageView，右边有button。现在我想在单击 100 次按钮时在图像和按钮之间的间隙内从左到右移动图像。我遵循的代码如下：

```
private static int count= 1 ;

public void onClick(View view) {

    RelativeLayout lay = (RelativeLayout)findViewById(R.id.layout1);
    ImageView i1= (ImageView)findViewById(R.id.img1);
    ImageButton btn= (ImageButton)findViewById(R.id.iBtn);

    int i1Width = i1.getWidth();
    int btnWidth = btn.getWidth();
    int totalMragine = lay.getWidth() - i1Width - btnWidth ; //the total margine image will move.
    int stepSize =  (lay.getWidth() - i1Width - btnWidth ) / 100;   
    int step = stepSize * count++;  

    Log.i("i1Width ", ""+i1Width );
    Log.i("btnWidth ", ""+btnWidth );
    Log.i("lay.getWidth()", ""+lay.getWidth());     
    Log.i("stepSize", ""+stepSize);     
    Log.i("count", ""+count);

    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    lp.setMargins(step, 0, 0, 0);
    i1.setLayoutParams(lp);     

    LinearLayout.LayoutParams lp1 = (LinearLayout.LayoutParams) horse.getLayoutParams();
    Log.i("currentMargine", ""+lp1.leftMargin);

    if(lp1.leftMargin >= totalMragine ){
        Log.i("Result", "maringe over");
    }
} 
```

我想知道我设置的边距是整数，但步长的值是浮点数。那么如何在 LayoutParams 中设置边距浮动？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:02:56.320

你可以做一件事计算每次移动的距离，就像移动的时候一样

移动距离 = 剩余长度/剩余点击次数

在最后一步（第 100 步）中，它将以错误 < 结束**。**5 像素和**.** 5px 太小了）

像

```
1st click  distance_to_move = 370/100;   as round off come 4 

2nd click  distance_to_move = 366/99;    as round off come 4 

3rd click  distance_to_move = 362/98;    as round off come 4 
```

所以 movemnt 将在 px 44444...3444...3444..3444...

# mysql - 需要Expressionengine mysql帮助！- 从类别 A 和（B 或 C）中获取条目

> ID：11150799
> 
> 赞同：0
> 
> 时间：2012-06-22T05:49:32.503
> 
> 标签：mysql, expressionengine, categories

我已经为此苦苦挣扎了几天，但我没有从 EE 论坛得到任何回复。本质上我正在尝试这样做（请参阅类别位）：

```
{exp:channel:entries channel="events" category="7&(175|177)"} 
```

但是您不能将 AND/OR 类别请求与开箱即用的本机标签混合使用

我一直在尝试编写一个自定义查询来处理它，但我一直坚持如何处理类别帖子表。

目前我的查询看起来像这样，但类别查询不起作用。

```
{exp:query sql="SELECT 
             type.cat_id, 
             type.cat_name as cat_name, 
             type.cat_url_title,
             type.group_id,
             t.title as title,
             t.status,
             t.channel_id,
             t.site_id,
             d.field_id_32 as date,
             p.cat_id as cat_id
            FROM 
             exp_categories type JOIN 
             exp_category_posts p ON type.cat_id = p.cat_id JOIN
             exp_channel_titles t ON p.entry_id = t.entry_id JOIN
             exp_channel_data d ON t.entry_id = d.entry_id
            WHERE 
             t.status = 'open' AND
             t.site_id = 1 AND
             type.group_id = 2 AND
             /* problem bit! */
             (p.cat_id = 7 AND ((p.cat_id = 175) OR (p.cat_id = 177))) AND
             t.channel_id = 3
            GROUP BY 
             type.cat_id
            ORDER BY
             type.cat_order
  LIMIT 5"} 
```

如果有人以前做过这样的事情或者可以看到我哪里出错了，我真的很感激指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:55:44.140

这不能在单个查询中完成。我会为此构建一个简单的插件（从[pkg.io](http://pkg.io)开始）并执行几个查询，返回 entry_ids 以传递给 Channel Entries 标记。

```
$cat_7_entries = $final_entries = array();
$cat_7_query = $this->EE->db->query("SELECT entry_id FROM exp_category_posts WHERE cat_id = 7");
if($cat_7_query->num_rows() > 0)
{
    foreach($cat_7_query->result_array() as $row)
    {
        $cat_7_entries[] = $row['entry_id'];
    }
    $cat_7_entries = implode(',', $cat_7_entries);

    $entries_query = $this->EE->db->query("SELECT entry_id FROM exp_category_posts WHERE cat_id IN(175,177) AND entry_id IN(".$cat_7_entries.")");
    if($entries_query->num_rows() > 0)
    {
        foreach($entries_query->result_array() as $row)
        {
            $final_entries[] = $row['entry_id'];
        }
        $vars = array(0 => array('entry_ids' => implode('|', $final_entries)));
        return $this->EE->TMPL->parse_variables($this->EE->TMPL->tagdata, $vars);
    }
} 
```

然后只需使用 parse="inward" 将标准频道条目标签与您的插件标签一起包装。

```
{exp:my_plugin:my_method parse="inward"}
{exp:channel:entries channel="events" entry_id="{entry_ids}"}
...
{/exp:channel:entries}
{/exp:my_plugin:my_method} 
```

这样做的好处是标准的频道条目标签会为您检查频道、状态、到期日期等，但只会返回与您指定的合格 entry_id 列表匹配的所有条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:47:48.417

*@Penzizzle 我认为这里的秘诀是您需要在各自的专栏*中基本上检查您感兴趣的三个类别。

这是演示此技术的查询的简化版本：

```
SELECT 
   t.entry_id,
   cat1.cat_id as cat1,
   cat2.cat_id as cat2,
   cat3.cat_id as cat3
FROM
   exp_weblog_titles t
JOIN
   exp_category_posts as cat1 ON cat1.entry_id = t.entry_id
JOIN
   exp_category_posts as cat2 ON cat2.entry_id = t.entry_id
JOIN
   exp_category_posts as cat3 ON cat3.entry_id = t.entry_id
WHERE
   cat1.cat_id = 175 AND (cat2.cat_id = 177 OR cat3.cat_id = 175) 
```

看看这对你有什么作用？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:35:21.720

哇，多好的查询啊！稍微退后一步怎么样？为什么不让你的外循环只是逻辑的一部分，然后在循环内做平衡：

```
{exp:channel:entries channel="events" category="7"}
  {categories show="175|177"}
    {!-- do stuff --}
  {/categories}
{/exp:channel:entries} 
```

这可能正是您度过一个愉快的星期五所需要的；）

-s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T08:07:19.817

试试这个 where 子句：

```
WHERE 
  t.status = 'open' AND
  t.site_id = 1 AND
  type.group_id = 2 AND
  t.channel_id = 3 AND
  p.cat_id = 7 OR p.cat_id = 175 OR p.cat_id = 177 
```

如果你真的想要这个逻辑：

```
/* problem bit! */
(p.cat_id = 7 AND ((p.cat_id = 175) OR (p.cat_id = 177))) AND 
```

那么你可能不得不重新组织你的表格和逻辑。

# java - 为 android 创建 facebook 哈希键

> ID：11150800
> 
> 赞同：0
> 
> 时间：2012-06-22T05:49:50.143
> 
> 标签：java, android, openssl, keytool

我按照步骤创建哈希键。

1.  下载的openssl

2.  解压并复制 bin 文件夹中的所有文件，包括 openssl.exe

3.  将从 Openssl 的 bin 文件夹中复制的所有文件粘贴到 Jdk bin 文件夹中。

4.  然后我在 openssl.exe 终端窗口上使用了以下命令

    keytool -exportcert -alias androiddebugkey -keystore C:\Users\Joelle.android\debug.keystore | openssl sha1 -二进制 | openssl enc -a -e

但它抛出以下错误

```
openssl error :'keytool is invalid command' 
```

请指导我...

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T05:57:30.813

Keytool 通常在 JRE bin 文件夹中找到，在我的情况下它存在于

> C:\Program Files\Java\jre6\bin

所以你应该写

> cd C:\Program Files\Java\jre6\bin

然后

> keytool -exportcert -alias androiddebugkey -keystore C:\Users\Joelle.android\debug.keystore | openssl sha1 -二进制 | openssl enc -a -e

有好的工具礼物

尝试使用此工具生成密钥哈希[http://www.easyfacebookandroidsdk.com/download/keyhash.zip](http://www.easyfacebookandroidsdk.com/download/keyhash.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T05:53:50.923

尝试使用

```
keytool -exportcert -alias androiddebugkey -keystore C:\Users\Joelle.android\debug.keystore | openssl sha1 -binary | openssl base64 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:53:27.127

而不是仅仅写 keytool，你必须指定它的完整路径，即在我的例子中，路径是：

```
C:\Program Files (x86)\Java\jre6\bin\keytool.exe 
```

# arrays - Perl：这是创建唯一数组的正确方法吗？

> ID：11150801
> 
> 赞同：4
> 
> 时间：2012-06-22T05:49:52.810
> 
> 标签：arrays, perl, perl-data-structures, perl-hash

我正在尝试创建一个独特的数组，而不管其原始顺序如何并且不使用任何模块，这就是我到目前为止所提出的：

```
my @arr = qw(b a a c d g e f);
my %hash;
@hash{@arr}=();
say keys %hash; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T06:02:43.187

是的。由于哈希键是唯一的，因此这是一种惯用的方法。完成同一件事的方法有很多。

你也可以使用一个模块，例如[List::MoreUtils](http://search.cpan.org/perldoc?List%3a%3aMoreUtils)

```
use strict;
use warnings;

use List::MoreUtils qw(uniq);
print join ":", uniq qw(a a a b b c d); 
```

**输出：**

```
a:b:c:d 
```

一些不同的重复数据删除方法：

```
my @arr = keys { map { $_ => 1 } qw(b a a c d g e f) }; 
```

花括号为 创建匿名哈希`keys`，map 语句创建键/值对列表。

* * *

```
my @arr = dedupe(qw(a a b c d d e));

sub dedupe {
    my %hash = map { $_ => 1 } @_;
    return keys %hash;
} 
```

同样的事情，但以子程序的形式，并分成两行。请注意，这两个列表都是半随机顺序的，因为哈希是无序的。

使用的子例程`List::MoreUtils`同样简单，也许更可取，因为它将保留参数的顺序。不过，它仍然使用哈希。

```
sub uniq {
    my %seen = ();
    grep { not $seen{$_}++ } @_;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T06:18:46.250

是的，您使用的是正确的方法，但还有许多其他方法可以创建一个独特的数组。

请参阅 perlfaq4：[如何从列表或数组中删除重复元素？](http://perldoc.perl.org/5.8.9/perlfaq4.html#How-can-I-remove-duplicate-elements-from-a-list-or-array?)更多细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T06:45:15.767

没有排序的唯一数组，也称为集合。我知道你说“没有模块”（为什么？！）。但是，如果您改变主意，请尝试[`Set::Object`](https://metacpan.org/module/Set%3a%3aObject)或[`Set::Scalar`](https://metacpan.org/module/Set%3a%3aScalar)

# php - PHP/MySQL - 以正确的格式准备字符串以插入日期时间 SQL 列

> ID：11150802
> 
> 赞同：0
> 
> 时间：2012-06-22T05:50:05.273
> 
> 标签：php, sql

在我的 UI 中，日期显示如下 - `dd.mm.YYYY hh:ii:ss`。用户可以编辑/添加新日期，并且很可能他们会尝试使用不能用于 SQL 查询的相同格式（24.06.2012 15:35:00）。这是我到目前为止所做的：

```
$dt = (date_parse_from_format("d.m.Y H:i:s", $data['event_time']));
        $newdate = sprintf("%02d-%02d-%04d %02d:%02d:%02d" , $dt['day'], $dt['month'], $dt['year'], $dt['hour'], $dt['minute'], $dt['second']);
        $test = date("Y-m-d H:i:s", strtotime($newdate));
        if ($test == "1970-01-01 01:00:00")
        {
            throw new Exception('Invalid date');
        } 
```

会发生什么 - 如果我留下支票`if ($test == "1970-01-01 01:00:00")`，我会得到一个例外，但如果我评论该`$test = date("Y-m-d H:i:s", strtotime($newdate));`行并检查日期仅插入零。 `$newdate`是对 SQL 格式正确的刺痛 -`YYYY-mm-dd H:i:s`但 obv. 我想念这里的东西。如何将此字符串插入为有效的 SQL 日期时间？

谢谢

勒龙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:03:15.430

[DateTime](http://www.php.net/manual/en/class.datetime.php)类是在 PHP 5.2 中引入的，允许您使用类似这样的东西

```
$dt = DateTime::createFromFormat("d.m.Y H:i:s", $data['event_time']);
if($dt === false){
  throw new Exception("Invalid date");
} 
```

[DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)失败时返回 false （此方法仅在 PHP 5.3 后可用）

然后在保存到数据库时，您可以使用以下内容获取 MySQL 的正确格式

```
$dt->format("Y-m-d H:i:s") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:46:53.307

MySQL 提供 FROM_UNIXTIME( ) 和 UNIX_TIMESTAMP( ) 函数将 Unix 时间戳转换为 MySQL 日期格式，反之亦然。

```
$SqlString = "INSERT INTO table(mydate, content) VALUES (FROM_UNIXTIME($mydate), $content)"; 
```

UNIX_TIMESTAMP，如果不带参数调用，则返回 Unix 时间戳（自 '1970-01-01 00:00:00' UTC 以来的秒数）作为无符号整数。如果使用日期参数调用 UNIX_TIMESTAMP()，它会返回参数的值作为自 '1970-01-01 00:00:00' UTC 以来的秒数。date 可以是 DATE 字符串、DATETIME 字符串、TIMESTAMP 或格式为 YYMMDD 或 YYYYMMDD 的数字。

```
$SqlString = "SELECT *, UNIX_TIMESTAMP($mydate) AS mydate FROM table WHERE conId = $conId"; 
```

深入了解这些 MySql 函数，mktime() 函数可以帮助您。

# html - 网络应用程序可以提供桌面通知吗

> ID：11150808
> 
> 赞同：3
> 
> 时间：2012-06-22T05:50:33.767
> 
> 标签：html, notifications, web-notifications

好吧，制作应用程序的一个小想法在我脑海中闪过。但这是我第一次尝试提出申请。到目前为止，我已经在 PHP、C++、Ruby 和 Rails 框架上工作过，但都是初学者。

如果我的想法需要，我准备进行更大的飞跃并广泛学习它们。要求是 Web 应用程序为您提供桌面通知。我在 Gmail 聊天框中看到过这种情况。我需要知道的是，什么是正确的开始工具？PHP能走那么远吗？还是在 Rails 上工作会是更好的选择？另外，普通的初级程序员可以做这样的事情吗？制作这样的应用程序需要什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T06:31:02.183

桌面通知不依赖于语言。没有可以使通知出现在桌面上的服务器端语言。不管你在服务器上放什么，**除非客户端支持这样的通知 API，否则**你不能让该代码将通知放在桌面上。

客户端支持意味着必须有某种应用程序在客户端上运行，可以在桌面上放置通知对话框。这是第一个要求。

如果您没有在客户端上运行任何具有这种支持的东西，那么无论您在服务器上使用什么魔法（PHP、Ruby、Perl，...），客户端上都不会发生任何事情。

这就是为什么，正如您从 KCiebiera 的回答中看到的那样，**可以使通知成为可能的客户端是 Chrome 和 Firefox**。

您所做的是在客户端（在本例中为 Javascript）上运行代码，查找某些内容（例如来自服务器的消息），然后指示浏览器（Chrome 或 Firefox）启动通知。

它并不比这更复杂。查看 KCiebiera 发布的教程，这应该可以帮助您入门。

希望这可以帮助您更好地理解问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T06:03:08.447

AFAIK 桌面通知仅在 Chrome/Chromium 和 Firefox 浏览器中可用。有一个工作草案[http://www.w3.org/TR/notifications/](http://www.w3.org/TR/notifications/)和一个很棒的教程 [http://www.html5rocks.com/en/tutorials/notifications/quick/](http://www.html5rocks.com/en/tutorials/notifications/quick/)关于如何使用它们。基本上你必须学习 JavaScript API。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T06:51:57.587

服务器端发生的事情在这里无关紧要，因为通知发生在客户端。桌面通知目前[是 W3C 工作草案的](http://www.w3.org/TR/notifications/)一部分，并在当前版本的 Chrome 和下一个版本的 Firefox、Safari 和 IE 中实现；有关详细信息，请参阅[兼容性表。](http://caniuse.com/#feat=notifications)有[很多](http://duckduckgo.com/?q=html5%20notifications%20tutorial)关于如何实现这一点的教程。

您必须在服务器上实现一些客户端可以用来获取（或被推送）通知的方法，以便它可以使用上述 API 显示它们。不管你用的是Rails、PHP、C++等等，只要付出足够的努力，他们都可以做到。

# git - Git Flow：完成功能后，您是否必须从远程手动删除功能分支？

> ID：11150810
> 
> 赞同：10
> 
> 时间：2012-06-22T05:51:01.270
> 
> 标签：git, version-control, github, git-flow

我是新手`GIT`和`GIT-Flow`。[在我的 python-django 项目中]

我做了什么 ：

```
git flow feature start new_feature
# perform some commits on the feature/new_feature branch

git push origin feature/new_feature

git flow feature finish new_feature
# I suppose that merges feature/new_feature to develop and deletes feature/new_feature

git push origin develop # Pushes the new changes to remote 
```

问题：

*   我的本地机器上似乎删除了 feature/new_feature 分支。
*   但是在`github`[ My remote named origin ] 上，我可以看到分支功能/new_feature。
*   我很困惑，它不应该显示已删除的分支。
*   我环顾四周寻找解决方案 - 但他们说你应该在远程手动删除它们，这似乎不适合抽象`git flow`

那么，你们每次使用时都必须从所有遥控器中删除所有功能分支`git-flow`吗？

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T07:13:20.757

如果您曾经做过`git push origin`（`feature`在本地签出），请知道当前的默认推送策略是默认的。
这意味着（[`git config`手册页](http://git-scm.com/docs/git-config.html)）

> **`matching`**- 将*所有*具有相同名称的分支推入两端。

但：

> 这是目前的默认值，但**Git 2.0 会将默认值更改为`simple`**.
> 
> `upstream`- 将当前分支推送到其上游分支。
> 这样，git push 将更新与 git pull 合并的远程 ref 相同的远程 ref，使 push 和 pull 对称。

（由于`feature`最初在 GitHub 中没有上游分支，因此不会推送）

[（过去几个月](https://stackoverflow.com/questions/948354/git-push-current-branch/9749535#9749535)正在讨论政策的变化）

所以现在，如果你确实将你的`feature`分支推送到了 GitHub，在将它本地合并到`develop`并推送之前`develop`，你需要从 GitHub 中删除你的功能分支：

```
git push origin :feature 
```

如果您在过程中的任何时候都没有指定标志“”，那么[git flow](https://github.com/nvie/gitflow/blob/develop/git-flow-feature)不会删除功能分支的唯一原因。[见资料](https://github.com/nvie/gitflow/blob/develop/git-flow-feature#L338-L355)。`fetch`

```
# delete branch
if flag fetch; then
  git push "$ORIGIN" ":refs/heads/$BRANCH"
fi 
```

这意味着你应该做一个

```
git flow feature finish -F new_feature 
```

这个想法是先获取并确保在删除之前没有*其他*`new_feature`贡献者在 GitHub 上添加新的进化。

# facebook - 用于客户端应用程序的 facebook-graph-api 实时更新的回调 url

> ID：11150813
> 
> 赞同：0
> 
> 时间：2012-06-22T05:51:22.347
> 
> 标签：facebook, facebook-graph-api, windows-7

我需要从 facebook graph api 获取使用 javascipt & HTML5 的 windows 8 Metro 风格应用程序的实时更新。由于应用程序是客户端应用程序，它没有任何回调 url。有人可以告诉我在 Windows 7 手机应用程序的情况下这是如何完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:09:35.913

只有当您有服务器来处理来自 facebook 的更新请求时，才能使用实时更新。
此功能不适用于仅限客户端的应用程序。

# iphone - 添加为页脚视图时，UIButton 没有响应

> ID：11150815
> 
> 赞同：-1
> 
> 时间：2012-06-22T05:51:36.087
> 
> 标签：iphone, ios, uitableview, ios4, uibutton

我的按钮没有响应触摸事件，请找到如下代码片段。

我已添加`UIButton`并`UIView`设置`UIView`为`UITableView's`页脚视图。

请让我知道并谢谢。

```
CGRect tblViewFrame = CGRectMake(self.view.bounds.origin.x, self.view.bounds.origin.y, self.view.bounds.size.width, 300);

self.tblViewSettings = [[[UITableView alloc]initWithFrame:tblViewFrame style:UITableViewStyleGrouped]autorelease];
self.tblViewSettings.backgroundColor = [UIColor clearColor];
self.tblViewSettings.showsVerticalScrollIndicator = FALSE;
self.tblViewSettings.delegate = self;
self.tblViewSettings.dataSource = self;
self.tblViewSettings.scrollEnabled = YES;

// Set the background color
self.view.backgroundColor = [UIColor clearColor];

UIView *buttonView = [[[UIView alloc]initWithFrame:CGRectMake(10,10, 320, 60)]autorelease];
self.signoutButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
self.signoutButton.frame = CGRectMake(10,10, 300, 40);
UIImage *image = [[UIImage imageNamed:@"btn-large1.png"] stretchableImageWithLeftCapWidth:22 topCapHeight:0];
NSString *strSignOut = NSLocalizedString(@"Sign Out", @"SignOut Button");
[self.signoutButton setTitle:strSignOut forState:UIControlStateNormal];
[self.signoutButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
self.signoutButton.titleLabel.shadowOffset = CGSizeMake(0, -1);
[self.signoutButton setBackgroundImage:image forState:UIControlStateNormal];
self.signoutButton.titleLabel.font = [UIFont boldSystemFontOfSize:20.0];
[self.signoutButton addTarget:self action:@selector(signOutBtnTapped:) forControlEvents:UIControlEventTouchUpInside];

buttonView.backgroundColor = [UIColor clearColor];

[buttonView addSubview:self.signoutButton];
buttonView.userInteractionEnabled = YES;
//[self.view addSubview:buttonView];
self.tblViewSettings.tableFooterView = buttonView;

self.tblViewSettings.tableFooterView.userInteractionEnabled = YES;

[self.view addSubview:self.tblViewSettings];

-(IBAction)signOutBtnTapped:(id)sender{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:57:14.427

我查看了您的代码并将其应用于我的项目。实际上它有效。我没有更改您的代码中的任何内容。我想你必须检查表格视图和底部视图的框架，因为其他一切都工作正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T06:31:48.687

在页脚视图部分中添加按钮

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
UIView* customView;

customView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 60.0)];

UIButton *Login_Btn = [UIButton buttonWithType:UIButtonTypeCustom];
    [Login_Btn setImage:[UIImage imageNamed:@"btn_login.png"] forState:UIControlStateNormal];

Login_Btn.frame = kiPhoneButtonFrame;

[customView addSubview:Login_Btn];
[Login_Btn addTarget:self 
                      action:@selector(Login_Btn_Clicked:)
            forControlEvents:UIControlEventTouchUpInside];

return customView;
} 
```

和按钮点击方法

```
-(IBAction)Login_Btn_Clicked:(id)sender
{
     // Code for button CLick which you want to do.
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T06:23:03.343

尝试捕获事件 `UIControlEventTouchDown`而不是`UIControlEventTouchUpInside`in

`[self.signoutButton addTarget:self action:@selector(signOutBtnTapped:) forControlEvents: UIControlEventTouchUpInside]`;

其他一切似乎都还可以。

# php - 是否可以使用 PHP 而不是 .htaccess 重定向到 HTTP 错误页面？

> ID：11150818
> 
> 赞同：1
> 
> 时间：2012-06-22T05:51:53.217
> 
> 标签：php, .htaccess, redirect, http-status-code-404

最近我的 .htaccess 文件遇到了一些问题（每当我将文件放到服务器上时，我的整个站点都出现故障，被 500 错误取代）。我一直想知道是否可以使用 PHP 完全替换 .htaccess 文件的错误页面功能。此外，如果有人可以帮助我解决我的 .htaccess 问题，那也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:02:17.623

是的，可以通过 php 标头函数使用。对于重定向到 404 错误页面，请将此代码添加到脚本的顶部。

```
<?php
header("Location:error.php");
?> 
```

或使用此代码显示 404 错误页面：

```
<?php
    header("HTTP/1.0 404 Not Found");
?> 
```

# android - 将现有联系人标记为收藏或加星标？

> ID：11150822
> 
> 赞同：0
> 
> 时间：2012-06-22T05:52:44.390
> 
> 标签：android, android-contacts

如何通过代码将现有联系人标记为收藏或加星标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T06:19:19.627

如果您不是以编程方式表示，只需转到“人员”，然后单击您想要收藏的联系人。然后只需单击右上角的星号。这就是我在android ICS中的做法。请参阅此链接： [http ://www.androidcentral.com/android-101-favoriting-and-un-favoriting-contacts](http://www.androidcentral.com/android-101-favoriting-and-un-favoriting-contacts)

以编程方式，联系人提供程序中有一个名为“STARRED”的列。要将特定联系人设为收藏夹，您必须将此值更改为 1。

这里有一个类似的问题： [How to update starred value of a contact in android using ContactsContract URI](https://stackoverflow.com/questions/10583893/how-to-update-starred-value-of-a-contact-in-android-using-contactscontract-uri)

有关联系人内容提供程序的更多信息，请参阅[http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html)

# java - 如何在java中将十六进制值转换为浮点数？

> ID：11150825
> 
> 赞同：0
> 
> 时间：2012-06-22T05:52:58.147
> 
> 标签：java, floating-point, hex

> **可能重复：**
> [如何将十六进制字符串转换为 Java 中的浮点数？](https://stackoverflow.com/questions/1071904/how-to-convert-hex-string-to-float-in-java)

我想在java中将十六进制值转换为等效的浮点值。

```
Ex.What is the output of 000C (hexa value) ? 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:56:44.870

将十六进制读取为整数并使用[`intBitsToFloat`](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#intBitsToFloat%28int%29).

# google-apps-script - 如何从谷歌网站调用 gmail 服务

> ID：11150828
> 
> 赞同：-2
> 
> 时间：2012-06-22T05:53:05.940
> 
> 标签：google-apps-script

我阅读了在 Google 网站中使用电子表格服务的教程[https://developers.google.com/apps-script/articles/building-sites-app-part2 。](https://developers.google.com/apps-script/articles/building-sites-app-part2)该代码使用电子表格密钥。但是要访问我的邮件，我应该使用 Oauth 或类似的东西，

```
var email = String(Session.getUser().getUserLoginId()); 
```

当我们在谷歌网站中嵌入 GAS 时，我们也可以使用分钟触发器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:18:37.267

你的问题不清楚。你想让我做什么 ？您想要获取用户的电子邮件 ID 还是想要访问您的电子邮件。

Session.getUser().getUserLoginId() 只返回登录用户的登录ID。它仅适用于 Google Apps 帐户（不适用于消费者帐户）。

如果您想访问您的电子邮件，请使用 Gmail 服务

# c++ - 需要帮助 c++ 模板动态内存分配

> ID：11150833
> 
> 赞同：1
> 
> 时间：2012-06-22T05:53:38.940
> 
> 标签：c++, templates

我写了一个模板类，它可以工作——但由于某种原因，我的动态分配存在问题。数组的初始长度：旧 2 新 4。它第一次工作（新点上的旧点（所以现在他的大小为 4）现在，新的大小为 8）但在下一轮 - 它在`delete [] temp;`with堆问题。有任何想法吗？谢谢

```
template <class T>
void Log<T>::Add(T item)
{
    // If array is full
    if(m_oldSize == m_oldCount)
    {
        // prepare array switch
        T* temp = m_old;

        // Point to new array
        m_old = m_new;
        m_oldSize = m_newSize;
        m_newSize *= ARRAY_MUL;
        m_newCount = DEFAULT_COUNT;

        //delete old
        delete [] temp;
        temp = NULL;

        //create new array
        m_new = new T[m_newSize];
    }

    // Add item and update new array
    m_old[m_oldCount++] = item;
    if(m_oldCount > FIRST_ROUND)
    {
        m_new[m_newCount++]= m_old[m_newCount];
        m_new[m_newCount++]= m_old[m_newCount];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:45:57.717

由于这是作业，我刚刚创建了一个非优雅的解决方案，您应该能够找到陷阱并扩展它。

```
#include <iostream>

using namespace std;

struct foo
{
  foo(int h) : g(h) { }
  int g;
};

template <typename T>
class bar
{
public:
  bar() : curSize(2), curNo(0)
  {
    a = new T[curSize];
  }

  void Add(T item)
  {
    if (curNo == curSize) {
      curSize = 2 * curSize;
      T *newArray = new T[2*curSize];
      for (size_t i = 0 ; i != curNo; ++i) {
        newArray[i] = a[i];
      }
      delete[] a;
      a = newArray;

    }
    a[curNo] = item;
    ++curNo;

  }

  void print()
  {
    for (size_t i = 0 ; i != curNo; ++i) {
      cout << a[i]->g << endl;
    }
  }

private:

  size_t curSize;
  size_t curNo;
  T * a;
};

int main()
{
 foo *f1 = new foo(1);
 foo *f2 = new foo(2);
 foo *f3 = new foo(3);
 foo *f4 = new foo(4);
 bar<foo*> *g = new bar<foo*>();
 g->Add(f1);
 g->Add(f2);
 g->Add(f3);
 g->Add(f4);
 g->print();
 cout << "Add more and print" << endl;

 g->Add(f1);
 g->Add(f2);
 g->Add(f3);
 g->Add(f4);
 g->Add(f3);
 g->Add(f4);

 g->print();

} 
```

# udp - UDP 对我的消息来说不够大，如何改进？

> ID：11150835
> 
> 赞同：0
> 
> 时间：2012-06-22T05:54:06.780
> 
> 标签：udp, ar.drone

我正在使用 UDP 为 ar 无人机编写程序，但无人机有时会挂起，我认为 UDP 可能不够大，如果仍然使用 UDP，有什么办法可以改善这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:38:44.747

UDP datagram sizes are limited by:

1.  The outgoing socket send buffer. Defaults for this vary wildly, from 8k in Windows to 53k or more in other systems.

2.  The Path MTU or Maximum Transmission Unit of the entire network path between you and the receiver. This is typically no more than 1260 bytes.

The safest size for a UDP datagram is 534 bytes as this will never be fragmented by the transport. If you're planning on sending datagrams larger than this you need to consider a different transport, usually TCP.

# php - 如何使用php下载rar文件

> ID：11150836
> 
> 赞同：2
> 
> 时间：2012-06-22T05:54:12.147
> 
> 标签：php

我写了下载rar文件的代码，它工作得很好，但是

```
 $name = 'file.rar';
      $data = file_get_contents("file.rar");
      $fh = fopen("$name", 'w') or die("can't open file");
      fwrite($fh, $data);
      fclose($fh);

      header("Cache-Control: public");
      header("Content-Description: File Transfer");
      header("Content-Length: ". filesize("$name").";");
      header("Content-Disposition: attachment; filename=$name");
      header("Content-Type: application/octet-stream; "); 
      header("Content-Transfer-Encoding: binary");
      readfile($name);
      exit; 
```

下载后，打开该文件时显示错误意外结束存档，它不会完全提取给我一些建议提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:06:13.363

您可以在您的网络服务器上使用以下代码制作 ZIP 文件

```
<?php
$za = new ZipArchive();

$za->open('test_with_comment.zip');
print_r($za);
var_dump($za);
$za->addFile('index.txt', 'newname.txt'); // original file , file to be added in zip

echo "numFiles: " . $za->numFiles . "\n";
echo "status: " . $za->status  . "\n";
echo "statusSys: " . $za->statusSys . "\n";
echo "filename: " . $za->filename . "\n";
echo "comment: " . $za->comment . "\n";

for ($i=0; $i<$za->numFiles;$i++) {
    echo "index: $i\n";
    print_r($za->statIndex($i));
}
echo "numFile:" . $za->numFiles . "\n";
?> 
```

之后，您可以提供下载链接..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:49:58.293

这个file.rar是通过代码生成的吗？我试过你的代码没有这些代码

```
 $data = file_get_contents("file.rar");
      $fh = fopen("$name", 'w') or die("can't open file");
      fwrite($fh, $data);
      fclose($fh); 
```

它对我来说工作正常。

# asp.net - 编译器错误消息：CS0103：当前上下文中不存在名称“数据库”

> ID：11150837
> 
> 赞同：0
> 
> 时间：2012-06-22T05:54:15.277
> 
> 标签：asp.net

> **可能重复：**
> [基于 Razor 的视图看不到引用的程序集](https://stackoverflow.com/questions/4953330/razor-based-view-doesnt-see-referenced-assemblies)

我是 ASP.net 中的新手，我正在尝试连接到数据库，但我不断收到此错误

> **编译错误
> 
> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS0103：当前上下文中不存在名称“数据库”
> 
> 源错误：
> 
> 第 1 行：@{ 第 2 行：var db = Database.Open("demo"); ' 第 3 行：
> 第 4 行：
> 
> 源文件：c:\Users\Ayoya\Documents\My Web Sites\demo\Page.cshtml
> 行：2 **

谁能告诉我怎么了？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:00:31.703

编译器已经告诉你出了什么问题——它不知道你的意思`Database`。这意味着是页面的属性，还是具有静态`Open`方法的类型的名称？从代码本身并不清楚，显然编译器也找不到名称。

弄清楚你的意思是什么名字，然后找出编译器看不到它的原因，然后修复它。如果您在这些步骤中需要更多帮助，则需要提供更多信息。

（顺便说一句，我完全同意 dbaseman：将数据库调用放在您的视图中是一个坏主意。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:00:39.410

如果您在 Razor 视图中打开数据库，那是完全错误的方法。你的逻辑应该放在控制器中，而不是视图中。考虑创建一个包含视图所需的所有数据的“视图模型”类，并从控制器填充该类。

这段代码不起作用的原因可能是您需要指定*Database*的完整命名空间。不过，我不确定该课程是什么。如果它在一个单独的 DLL 中，你会有更多的问题。不过，您应该再次通过将数据库逻辑放在控制器中来规避这个问题。

# javascript - 如何通过perl中的ajax调用将值从一个div传递到另一个？

> ID：11150846
> 
> 赞同：1
> 
> 时间：2012-06-22T05:55:35.120
> 
> 标签：javascript, jquery, ajax, perl

基本上，我希望在同一页面中通过 ajax 调用成功将值从一个 div 传递到另一个 div。

但是，我仍然可以使用从 div 获取值的另一个页面来做到这一点。成功后，该值将加载到另一个 div。

这是我的代码：

我的 index.pl 有以下代码。

```
 while($query->fetch()) {
    print qq( "<option id='$tblname_id'>$tblname_name</option>" );
 }

print "<div id='body'></div>"; 
```

我的 script.js 包含以下代码。

```
$(document).ready(function(){
 $('option').click(function(){
    var selected=$(this).val();
    var id=this.id;
    //alert(id);   //here I am getting the id of selected option
    $.ajax({
        type:"get",
        url:"hello.pl", //instead of hello.pl,I want to do with index.pl itself
        data:{'id':id},
        success: function(msg){
                   $("#body").html(msg);
                   $("#body").show();
            }
    });
  });
}); 
```

Hello.pl 包含

```
 $obt_id=$q->param('id'); 
```

这个有效。但是当我对 index.pl 做同样的事情时，它不会。

哪里有问题？

一句话，我的问题很简单。

如何在同一页面中通过从其他 div 发送的 ajax 调用获取 div 中的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:03:56.380

> 如何通过ajax调用在同一页面中从其他div发送来获取div中的值？

看一下jQuery的[`load()`](http://api.jquery.com/load/)功能。一个例子：

```
$('#result').load('test.html #foo'); 
```

这将获取元素的内容`id=foo`并将结果附加到元素`id=result`

# python - 如何让 Python 等待输入？

> ID：11150850
> 
> 赞同：0
> 
> 时间：2012-06-22T05:56:17.940
> 
> 标签：python

我在 Maya 中使用 python，一个 3D 动画包。我很想运行一个定义（A），但在该定义中我想要另一个需要有效对象选择的定义（B）。脚本将继续运行，直到生成一个（在 def B 中），我想继续使用我的脚本（def A）从 def B 返回值。我如何告诉 def A 等到从定义B？

这么短的问题：如何让 python 等待接收到有效的返回值？

我希望这是有道理的，并提前感谢您的宝贵时间。

C

例子：

```
def commandA () :
   result = commandB()
   ### Wait for a value here ###
   if result == "OMG its a valid selection" :
      do_another_commandC()

def commandB () :
   # This command is kept running until a desired type of selection is made
   maya.mel.eval("scriptjob \"making a valid selection\" -type polygon")
   if selection == "polygon" :
      return "OMG its a valid selection"
   else :
      commandB() 
```

我需要 ### 行中的一些东西让函数等到收到所需的返回，然后继续其余的。目前，该功能只是运行所有内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:24:49.237

你可以只使用一个while循环：

```
def commandA () :
    result = ""
    while (result != "OMG its a valid selection")
       # perhaps put a 0.1s sleep in here
       result = commandB()
    do_another_command() 
```

* * *

我注意到

`selection`在您的代码中实际上并没有被赋予一个值（至少在您给我们的代码中没有），它不应该是：

`selection = maya.mel.eval("scriptjob \"making a valid selection\" -type polygon")`

* * *

另外，您是否有理由递归调用 commandB ？这最终可能会使用不必要的资源，特别是如果有人反复做出错误的选择。这个怎么样？

```
def commandA () :
    result = ""
    while (result != "polygon")
       # perhaps put a 0.1s sleep in here (depending on the behavior of the maya command)
       result = commandB()
    do_another_command()

def commandB () :
   # This command retrieves the selection
   selection = maya.mel.eval("scriptjob \"making a valid selection\" -type polygon")
   return selection 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:42:17.873

如果 commandB() 的范围仅限于 commandA() 您可以考虑使用闭包（[什么是闭包？](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)）

或者只是嵌套的python函数（[http://effbot.org/zone/closure.htm，http://www.devshed.com/c/a/Python/Nested-Functions-in-Python/](http://www.devshed.com/c/a/Python/Nested-Functions-in-Python/)）

在代码的任何部分考虑“result = commandB()”语句，

解释器应该等到从 commandB() 返回某些内容并分配给结果，然后再继续执行下一行。

# c# - 将数据从 Asp.net web 服务绑定到客户端应用程序的最佳方法

> ID：11150852
> 
> 赞同：0
> 
> 时间：2012-06-22T05:56:24.667
> 
> 标签：c#, asp.net, wcf

我必须将数据从 Asp.net webservice 绑定到 Windows Forms 应用程序。

这是我的代码：

```
PGPInfo[] _personGroupInfoObj = webObject.GetAllPGPMobInfo(); 
```

我也试过：

```
 dataset ds=webObject.GetallLocations(); 
```

两者都需要 1 分钟来绑定 10000 条记录。

我的应用程序中有 20 种这样的方法。我想加快这个绑定过程以提高性能。

还有其他方法可以绑定数据吗？

# objective-c - CGWindowListCreate 生成一个非常长的窗口列表

> ID：11150859
> 
> 赞同：1
> 
> 时间：2012-06-22T05:57:11.043
> 
> 标签：objective-c

当我从石英窗口服务中使用 CGWindowListCreate 时，它​​会生成一个非常长的窗口 ID 数组。我试图打开排除桌面元素的选项，但即使只有 3 或 4 个我称之为打开的窗口，我也会得到一个 30-40 个窗口的列表。

这是我的做法：

```
 CGWindowListOption opt = 1 << 4;
 CFArrayRef windowids =CGWindowListCreate(opt,kCGNullWindowID); 
```

我想知道我做错了什么导致了这个问题，以及我能做些什么来解决它。我只是想让程序列出由应用程序创建的窗口，例如查找器窗口或浏览器窗口，而不是它包含的任何其他内容。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:27:43.917

我发现一个解决方案是将窗口列表过滤到仅位于 Dock“下方”的那些窗口（就窗口分层而言）。

下面的代码对我来说效果很好。它获取屏幕上的所有窗口（不包括桌面元素）。它从列表中提取“Dock”窗口的窗口 ID。然后再次获取屏幕窗口，仅过滤到 Dock 窗口“下方”的那些窗口。

```
// Fetch all on screen windows
CFArrayRef windowListArray = CGWindowListCreate(kCGWindowListOptionOnScreenOnly|kCGWindowListExcludeDesktopElements, kCGNullWindowID);
NSArray *windows = CFBridgingRelease(CGWindowListCreateDescriptionFromArray(windowListArray));

NSLog(@"All on screen windows: %@", windows);

// Find window ID of "Dock" window
NSNumber *dockWindowNumber = nil;
for (NSDictionary *window in windows) {
    if ([(NSString *)window[(__bridge NSString *)kCGWindowName] isEqualToString:@"Dock"]) {
        dockWindowNumber = window[(__bridge NSString *)kCGWindowNumber];
        break;
    }
}

NSLog(@"dockWindowNumber: %@", dockWindowNumber);

CFRelease(windowListArray);

if (dockWindowNumber) {
    // Fetch on screen windows again, filtering to those "below" the Dock window
    // This filters out all but the "standard" application windows
    windowListArray = CGWindowListCreate(kCGWindowListOptionOnScreenBelowWindow|kCGWindowListExcludeDesktopElements, [dockWindowNumber unsignedIntValue]);
    NSArray *windows = CFBridgingRelease(CGWindowListCreateDescriptionFromArray(windowListArray));
    NSLog(@"On screen application windows: %@", windows);
}
else {
    NSLog(@"Could not find Dock window description");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:18:44.290

这将返回每个窗口，无论它是在屏幕上还是在屏幕外，你应该将它与选项结合起来`kCGWindowListOptionOnScreenOnly`（并且不要对你正在使用的那个进行硬编码）。它看起来像这样：

```
CGWindowListOption opt = kCGWindowListOptionOnScreenOnly|kCGWindowListExcludeDesktopElements;
CFArrayRef windowids =CGWindowListCreate(opt,kCGNullWindowID); 
```

无论如何，这就是我从文档中收集到的。

# iphone - Phone gap ios app - 显示带有打印/电子邮件选项的pdf文件

> ID：11150861
> 
> 赞同：3
> 
> 时间：2012-06-22T05:57:29.270
> 
> 标签：iphone, ios, cordova, phonegap-plugins, pdf-viewer

我有执行以下任务的要求。

在 Phonegap iOS 应用程序中，用户希望在单击将从远程服务器加载 pdf 的链接后查看 pdf 文件。并且用户还需要此文档查看器的打印、电子邮件功能。

到目前为止，我已经尝试了以下选项。

1.  当用户单击链接并尝试通过 Safari 加载 pdf 时退出应用程序。这不起作用，因为用户必须重新登录才能查看应用程序。

2.  检查子浏览器插件。但它不提供打印/电子邮件等选项。

如果有人可以帮助有类似经验的人，那就太好了。

谢谢

# spring - 放置在文件夹中时找不到 MessageSource 的 ResourceBundle

> ID：11150869
> 
> 赞同：12
> 
> 时间：2012-06-22T05:58:53.430
> 
> 标签：spring, spring-mvc, resources, resourcebundle

我正在尝试将资源包与 Spring 的消息源一起使用。这是我这样做的方式：

```
@Component
public class MessageResolver implements MessageSourceAware {

    @Autowired
    private MessageSource messageSource;

    public void setMessageSource(MessageSource messageSource) {
        this.messageSource = messageSource;
    }

    public String getMessage(){
        return messageSource.getMessage("user.welcome", new Object[]{"Rama"} , Locale.US);
    }

} 
```

这是我的文件夹结构：

![在此处输入图像描述](../Images/9202f7ca06e3eae6badabfef58626cb0.png)

messages_en_US.properties 只包含一行：

```
user.welcome=Welcome {0} 
```

这是使用的xml配置：

```
<bean name="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename">
        <value>resourcebundles/messages</value>
    </property>
</bean> 
```

这是我得到的错误：

```
WARNING: ResourceBundle [resourcebundles/messages] not found for MessageSource: Can't find bundle for base name resourcebundles/messages, locale en_US
Exception in thread "main" org.springframework.context.NoSuchMessageException: No message found under code 'user.welcome' for locale 'en_US'. 
```

但是，如果我将资源包直接移动到资源文件夹下，它就可以正常工作。在这种情况下，这是我正在使用的 xml 配置：

```
<bean name="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
<property name="basename">
    <value>messages</value>
</property> 
```

是如果我必须使用ResourceBundleMessageSource，我应该把我的资源包直接放在资源下吗？如果我必须只将它保存在指定的文件夹中，还有其他方法可以让这个工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-30T17:58:53.770

男孩，也许你可以改变xml配置如下：

采用

```
org.springframework.context.support.ReloadableResourceBundleMessageSource 
```

代替

```
org.springframework.context.support.ResourceBundleMessageSource 
```

所有配置如下：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:resourcebundles/messages" />
    <property name="useCodeAsDefaultMessage" value="true" />
</bean> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-22T08:26:55.990

将您的配置更改为 xml 文件中 messageSource bean 的以下配置。

```
<bean name="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource"> 
    <property name="basename"> 
        <value>classpath*:resourcebundles/messages</value> 
    </property> 
</bean> 
```

由于所有属性文件都在 java 的类路径中，因此您需要使用前缀定义路径，`classpath*:`否则它将查看应用程序的 web 目录。

希望这对您有所帮助。干杯。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-27T18:01:25.263

现在快 2015 年了，我正在使用 Spring 4.1.2.RELEASE 并且 messageSource bean 需要配置的方式肯定存在问题，因此它可以获取目标资源包。

1) 如果 messageSource bean 的类型是**ReloadableResourceBundleMessageSource**它将不起作用：

```
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.support.ReloadableResourceBundleMessageSource;

@Configuration
@ComponentScan(basePackages = { "com.intertech.service" })
//@ImportResource({"classpath:spring/applicationContext-i18n.xml"})
public class AppConfig {

  @Bean(name = "messageSource")
  public ReloadableResourceBundleMessageSource getMessageSource() {
      ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
      messageSource.setBasename("config/messages");
      messageSource.setDefaultEncoding("UTF-8");
      messageSource.setUseCodeAsDefaultMessage(true);
      return messageSource;
  }

//  @Bean(name = "messageSource")
//  public ResourceBundleMessageSource getMessageSource() {
//      ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
//      messageSource.setBasename("config/messages");
//      messageSource.setDefaultEncoding("UTF-8");
//      messageSource.setUseCodeAsDefaultMessage(true);
//      return messageSource;
//  }
} 
```

2) 如果 messageSource bean 是**ResourceBundleMessageSource**类型，它将起作用：

```
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.support.ResourceBundleMessageSource;

@Configuration
@ComponentScan(basePackages = { "com.intertech.service" })
//@ImportResource({"classpath:spring/applicationContext-i18n.xml"})
public class AppConfig {

//  @Bean(name = "messageSource")
//  public ReloadableResourceBundleMessageSource getMessageSource() {
//      ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
//      messageSource.setBasename("config/messages");
//      messageSource.setDefaultEncoding("UTF-8");
//      messageSource.setUseCodeAsDefaultMessage(true);
//      return messageSource;
//  }

  @Bean(name = "messageSource")
  public ResourceBundleMessageSource getMessageSource() {
      ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
      messageSource.setBasename("config/messages");
      messageSource.setDefaultEncoding("UTF-8");
      messageSource.setUseCodeAsDefaultMessage(true);
      return messageSource;
  }
} 
```

3) 如果您使用与配置类结合的 XML 配置文件 - 它会起作用（注意基本包是如何以类限定方式配置的，即“config.messages”而不是“config/messages”）：（applicationContext -i18n.xml)

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource"
        p:basename="config.messages"
        p:useCodeAsDefaultMessage="true"/>

    <!-- This will not work -->
    <!--
    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
        p:basename="config/messages"
        p:useCodeAsDefaultMessage="true"/>
     -->
</beans> 
```

和：

```
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.ImportResource;

@Configuration
@ComponentScan(basePackages = { "com.intertech.service" })
@ImportResource({"classpath:spring/applicationContext-i18n.xml"})
public class AppConfig {

//  @Bean(name = "messageSource")
//  public ReloadableResourceBundleMessageSource getMessageSource() {
//      ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
//      messageSource.setBasename("config/messages");
//      messageSource.setDefaultEncoding("UTF-8");
//      messageSource.setUseCodeAsDefaultMessage(true);
//      return messageSource;
//  }

//  @Bean(name = "messageSource")
//  public ResourceBundleMessageSource getMessageSource() {
//      ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
//      messageSource.setBasename("config/messages");
//      messageSource.setDefaultEncoding("UTF-8");
//      messageSource.setUseCodeAsDefaultMessage(true);
//      return messageSource;
//  }
} 
```

4) 最重要的是……如果您使用的是**WebApplicationInitializer**（没有 web.xml），则必须在根上下文中注册定义“messageSource”bean 的配置类，而不是在调度程序 servlet 的上下文中：

```
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRegistration;

import org.springframework.web.WebApplicationInitializer;
import org.springframework.web.context.ContextLoaderListener;
import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;
import org.springframework.web.servlet.DispatcherServlet;

public class WebAppInitializer implements WebApplicationInitializer {

    @Override
    public void onStartup(ServletContext container) throws ServletException {
    // Create the 'root' Spring application context
    AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
    rootContext.register(AppConfig.class);
    // Manage the lifecycle of the root application context
    container.addListener(new ContextLoaderListener(rootContext));
    // Create the dispatcher servlet's Spring application context
    AnnotationConfigWebApplicationContext dispatcherServlet = new AnnotationConfigWebApplicationContext();
    dispatcherServlet.register(MvcConfig.class);
    // Register and map the dispatcher servlet
    ServletRegistration.Dynamic dispatcher = container.addServlet("dispatcher", new DispatcherServlet(
            dispatcherServlet));
    dispatcher.setLoadOnStartup(1);
    dispatcher.addMapping("*.htm");
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-29T11:33:31.040

在我的例子中，使用 Spring **4.3.2.RELEASE**和**java config**以及**ReloadableResourceBundleMessageSource**，我必须将我的模板引擎定义为一个 bean，否则我的消息没有得到解决。

这是一个工作配置的示例。

**AppConfig.java**

```
import java.util.concurrent.TimeUnit;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.context.MessageSource;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.support.ReloadableResourceBundleMessageSource;
import org.springframework.web.servlet.ViewResolver;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;
import org.thymeleaf.TemplateEngine;
import org.thymeleaf.spring4.SpringTemplateEngine;
import org.thymeleaf.spring4.templateresolver.SpringResourceTemplateResolver;
import org.thymeleaf.spring4.view.ThymeleafViewResolver;
import org.thymeleaf.templatemode.TemplateMode;
import org.thymeleaf.templateresolver.ITemplateResolver;

@Configuration
@EnableWebMvc
@ComponentScan("myapp")
public class AppConfig extends WebMvcConfigurerAdapter implements ApplicationContextAware {

private ApplicationContext applicationContext;

private static final boolean CACHE_THYMELEAF_TEMPLATES = false;
private final String UTF8_ENCODING = "UTF-8";

@Override
public void setApplicationContext(ApplicationContext applicationContext) {
    this.applicationContext = applicationContext;
}

@Bean
public ViewResolver viewResolver() {
    ThymeleafViewResolver resolver = new ThymeleafViewResolver();
    resolver.setTemplateEngine(templateEngine());
    resolver.setCharacterEncoding(UTF8_ENCODING);
    resolver.setCache(CACHE_THYMELEAF_TEMPLATES);
    return resolver;
}

@Bean
public TemplateEngine templateEngine() {
    //this method must be defined as a bean otherwise i18n messages are not found
    //if method defined as private TemplateEngine templateEngine() messages are not found
    SpringTemplateEngine engine = new SpringTemplateEngine();
    engine.setEnableSpringELCompiler(true);
    engine.addTemplateResolver(templateResolver());
    return engine;
}

private ITemplateResolver templateResolver() {
    SpringResourceTemplateResolver resolver = new SpringResourceTemplateResolver();
    resolver.setApplicationContext(applicationContext);
    resolver.setPrefix("/WEB-INF/thymeleaf/");
    resolver.setTemplateMode(TemplateMode.HTML);
    resolver.setSuffix(".html");
    resolver.setCacheable(CACHE_THYMELEAF_TEMPLATES);
    resolver.setCharacterEncoding(UTF8_ENCODING);
    return resolver;
}   

@Bean
public MessageSource messageSource() {
    ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
    messageSource.setBasenames("WEB-INF/i18n/messages");
    messageSource.setUseCodeAsDefaultMessage(true);
    messageSource.setDefaultEncoding(UTF8_ENCODING);
    messageSource.setFallbackToSystemLocale(false);
    messageSource.setCacheSeconds((int)TimeUnit.HOURS.toSeconds(1));
    return messageSource;
}

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T07:09:27.280

```
 <!-- Application Message Bundle -->
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="resourcebundles/messages" />
</bean> 
```

您必须如上所示配置您的消息路径。另外，检查类名。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-18T16:10:28.480

> 是如果我必须使用ResourceBundleMessageSource，我应该把我的资源包直接放在资源下吗？如果我必须只将它保存在指定的文件夹中，还有其他方法可以让这个工作吗？

您可以在自己的包中定义您的消息，它不需要位于资源文件夹中。

使用 Spring 5.2.2.RELEASE 版本的组件，这是我设法使其工作的方式：

文件的限定名称为：

```
/tutproject/src/com/tutproject/app/messages/messages.properties 
```

bean 在我的 Spring Bean 配置文件 (XML) 中是这样定义的：

```
<bean id="messageSource"
    class="org.springframework.context.support.ResourceBundleMessageSource">
<property name="basename"
    value="/com/tutproject/app/messages/messages">
</property>
</bean> 
```

Java 构建路径包括`tutproject/src`，这是 XML 定义中省略的位置部分。

ResourceBundleMessageSource 类的一些额外有用信息：

> *   基本名称遵循 {@link java.util.ResourceBundle} 约定：本质上，* 一个完全限定的类路径位置。如果它不包含包限定符 *（例如 {@code org.mypackage}），它将从类路径根目录解析。* 请注意，JDK 的标准 ResourceBundle 将点视为包分隔符： ***这意味着“test.theme”实际上等同于“test/theme”**。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-09T10:24:58.583

我使用了以下配置，它工作正常

```
<beans:bean id="messageSource class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <beans:property name="basename" value="classpath:resourcebundles/ScreenLabelResources" />
    </beans:bean> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-13T19:09:08.443

对我有用的东西非常简单。

它是

```
<property name="basename">
            <value>locale\messages</value>
        </property> 
```

我把它改成

```
<property name="basename">
            <value>locale/messages</value>
        </property> 
```

只是一个 \ to / change 为我修复了它。我正在使用 MAC。

我没有尝试过`*classpath`，这可能对我不起作用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-25T15:12:12.293

我使用了以下配置，它在我的项目中运行良好。我的 messages.properties 位于以下路径：..\WebContent\WEB-INF\resources

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:WEB-INF/resources/messages" />
    <property name="useCodeAsDefaultMessage" value="true" />
</bean> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-05T14:10:34.757

我使用了以下配置，它在我的项目中运行良好。

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:configurations/messages" />
    <property name="useCodeAsDefaultMessage" value="true" />
</bean> 
```

地点：`src\main\resources\configurations\messages_en.properties`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-31T15:41:41.927

用于此的 YAML 版本

```
 spring:
     messages:
       basename: i18n/validation, i18n/message # for multiple properties just use comma separated values
       encoding: UTF-8 
```

您可以参考[文档](https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html)以查看完整说明。

另外我应该提到，默认`MessageSource`bean 是一个`ResourceBundleMessageSource`已经从类路径中读取的，所以不需要使用 nonation like `classpath:i18n/validation`。

## 目录结构

[![在此处输入图像描述](../Images/5ba7475f9a907a68397c1616fc0a9125.png)](https://i.stack.imgur.com/4mlCa.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-25T14:49:43.877

在 Spring Boot 2.2.5 中，情况略有变化。不再需要类路径。

```
 @Bean
public MessageSource messageSource() {
    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
    messageSource.setBasename("messages");
    messageSource.setDefaultEncoding("UTF-8");
    return messageSource;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-28T04:14:55.000

我强烈建议将属性文件保留在项目之外，这样我们就不需要为每个属性更改编译代码。

下面是我们在现场项目中使用的配置。在 application.properties 文件中设置 property.location 值

```
@Configuration
public class LocalizationConfiguration {

    private static final Logger logger = LoggerFactory.getLogger(LocalizationConfiguration.class);

    @Value("${property.location}")
    private String propertyLocation;

    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver localeResolver = new SessionLocaleResolver();
        localeResolver.setDefaultLocale(Locale.ENGLISH); // change this
        return localeResolver;
    }

    @Bean
    public ReloadableResourceBundleMessageSource messageSource() {
        ReloadableResourceBundleMessageSource  resource = new ReloadableResourceBundleMessageSource();
        String messageFolderPath = propertyLocation + "/" + "i18n";
        resource.setBasename("file:"+messageFolderPath+"/messages");
        resource.setDefaultEncoding("UTF-8");
        resource.setCacheSeconds(10);
        return resource;
    }

    @Bean
    public LocalValidatorFactoryBean validatorFactoryBean() {
        LocalValidatorFactoryBean bean = new LocalValidatorFactoryBean();
        bean.setValidationMessageSource(messageSource());
        return bean;
    }

} 
```

# c# - C# - WPF - 确定画布中的鼠标位置仅适用于形状

> ID：11150872
> 
> 赞同：1
> 
> 时间：2012-06-22T05:59:09.943
> 
> 标签：c#, wpf, wpf-controls, mouseevent

我目前正在研究一种包含某些选择工具的图像处理工具。为了向用户显示当前选择（例如一个圆圈），使用了三个事件（都在某个画布内）：

```
public MainWindow()
{        
    InitializeComponent();
}

private Ellipse _ellip = new Ellipse();
private Point _p = new Point();
private bool _mouse = false;
private double _xcor, _ycor;

private void mouseDown(object sender, MouseButtonEventArgs e)
{
    _p = Mouse.GetPosition(canvas1);
    _xcor = _p.X;
    _ycor = _p.Y;
    _mouse = true;
}

private void newPos(object sender, MouseEventArgs e)
{

    if (mouse)
    {
        _ellip.Visibility = Visibility.Visible;
        _p = Mouse.GetPosition(canvas1);
        _ellip.Margin = new Thickness((_xcor + _p.X) / 2 - Math.Sqrt((_xcor - _p.X) * (_xcor - _p.X) + (_ycor - _p.Y) * (_ycor - _p.Y)) / 2, (_ycor + _p.Y) / 2 - Math.Sqrt((_xcor - _p.X) * (_xcor - _p.X) + (_ycor - _p.Y) * (_ycor - _p.Y)) / 2, 0, 0);
        ellip.Height = Math.Sqrt((_xcor - _p.X) * (_xcor - _p.X) + (_ycor - _p.Y) * (_ycor - _p.Y));
        ellip.Width = Math.Sqrt((_xcor - _p.X) * (_xcor - _p.X) + (_ycor - _p.Y) * (_ycor - _p.Y));
    }

    InvalidateVisual();
}

private void mouseUp(object sender, MouseButtonEventArgs e)
{
    mouse = false;
    ellip.Visibility = Visibility.Hidden;
} 
```

这在一个条件下一切正常：圆圈后面有某种形状。如果在 canvas1 中的空白区域使用事件 MouseLeftButtonDown/Up 和 MouseMove，不知何故不会引发。一旦我创建了一个填充画布的矩形，一切正常。但这带来了另一个问题：如果矩形比画布大，它基本上会超出画布，并且事件也在画布之外工作（只要它位于矩形顶部）。我真的不明白这里出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:07:21.907

仅当点击测试表明鼠标指针下方有“某物”时，WPF 才能识别鼠标按钮操作。因此，您应该`HitTestCore(PointHitTestParameters)`在画布上实现。

以下是如何覆盖默认命中测试的说明：http: [//msdn.microsoft.com/en-us/library/ms752097.aspx#overriding_default_hit_testing](http://msdn.microsoft.com/en-us/library/ms752097.aspx#overriding_default_hit_testing)。

# eclipse - Eclipse Drupal XDebug 断点在 .module 上不起作用

> ID：11150877
> 
> 赞同：1
> 
> 时间：2012-06-22T05:59:44.040
> 
> 标签：eclipse, drupal-7, xdebug, breakpoints

我已经成功地用 Eclipse 配置了[Xdebug](http://en.wikipedia.org/wiki/Xdebug)，现在我可以在`index.php`文件上设置断点了。

当我设置其他断点时`index.php`，文件断点不起作用。如果文件在同一个文件夹中，它会在第一行停止，但断点在恢复后不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:20:50.957

首先：断点正在使用 xdebug_break(); 但不是通过编辑器放置...其次：通过在eclipse的php服务器配置中删除路径变量

问题已解决

# android - Android : 通过 SERVER 获取在线或离线状态

> ID：11150878
> 
> 赞同：0
> 
> 时间：2012-06-22T05:59:44.973
> 
> 标签：android, http-get

我正在 android 4.0.3 即 ICS 版本中创建一个应用程序，当客户端登录到应用程序时连接到服务器。我试图通过服务器在线或离线获取客户端的状态并在应用程序屏幕上看到.我无法继续。谁能说我：

**是否可以通过服务器获取用户的状态？**

1-- 如何进行第一步...？

2-- 我应该如何从服务器获得客户端已连接并查看到其他客户端示例的响应-当我们登录到 Skype 时，我们的状态显示为可用绿色单选按钮，以同样的方式我怎样才能得到它。？

如果有人指导我，这将非常有帮助。非常感谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T07:18:22.693

我假设您正在尝试开发聊天应用程序？

如果是这种情况，请尝试使用 XMPP 库。XMPP 广泛用于聊天应用程序，包括 Facebook 聊天（我认为还有 Google talk），并且有大量可用的开源库。

否则，如果您只想将实时通知作为全局的一部分，请尝试使用推送通知。Google 支持适用于 Android 的云到设备消息传递 (C2DM)。它允许向特定设备推送通知，而无需处理持久连接、电池和 CPU 使用等。

C2DM 方法归结为这一点。当客户端连接到您的服务器时，获取他的朋友列表和他们的“C2DM ID”并将 C2DM 推送到他们的设备。此推送被传递到您的应用程序，您可以通过触发通知或更新 UI 等方式对其进行响应。（您的应用程序不一定要运行。推送通知通过特定的广播传递，您的应用程序可以注册接收器以唤醒它。）

请记住，每个设备、每个应用程序的 C2DM 消息都有配额，并且每条消息的有效负载也有限制。所以你不应该通过这个发送大量文件。只是对您的应用程序的通知，因此它可以调用您的服务器并获取更新的列表，而不是轮询。

您可以在此处获取有关 C2DM 和代码示例的更多信息。[https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T01:10:42.440

您可能已经继续前进，但我正在为将来遇到此问题的任何人发帖。

**如果应用程序始终在您希望发生通信时运行，那么在这种情况下使用**[Firebase](https://www.firebase.com/)是一个很好的解决方案。（它不会像 C2DM/CDM 那样唤醒你的应用程序，除非你有一个服务一直在运行并且如果设备处于睡眠状态仍然不会唤醒...... ***AFAIK***）

它可能对某些场景有用，但可能不适用于聊天应用程序，因为您希望设备在消息到达时唤醒。

请注意，尽管他们对免费订阅有限制。

# c - 使用 printf 函数而不实际导入 stdio.h 并且它有效？！为什么呢？

> ID：11150883
> 
> 赞同：5
> 
> 时间：2012-06-22T06:00:10.023
> 
> 标签：c

> **可能重复：**
> [为什么#include <stdio.h>*不需要*使用 printf()？](https://stackoverflow.com/questions/336814/why-include-stdio-h-is-not-required-to-use-printf)

```
//#include <stdio.h>
//#include <conio.h>

main(){

printf("Hi");
getch();

} 
```

当我编写这个程序时，它让我震惊的是，它实际上没有导入任何包含 printf 函数的 c 库，例如 stdio。为什么呢？（使用 Dev-C++ 4.9.9.2，另存为 .c，而不是 .cpp）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T06:03:55.300

C 允许您在不首先定义原型的情况下调用函数。（C++ 不这样做。） 的隐式原型`printf`定义如下：

```
int printf(); 
```

巧合的是，这个隐式原型的调用约定`printf`与您平台上的实际调用约定相匹配。

一般来说，你不能指望这个工作，并且有很多情况下它不会工作。我建议启用编译器警告以检测隐式原型声明，以便您可以修复它们（通过包含正确的标头）。

**脚注：** `#include`不导入库，它只是在编译时将文件粘贴到您的源代码中。标`<stdio.h>`头包含（直接或间接）某些原型，但库必须单独链接。由于`printf`通常位于默认链接到程序的库中，因此您通常无需执行任何操作即可使用`printf`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T06:04:38.943

预`#include`处理器指令不*导入*任何库；*在C*语言的定义中没有这样的*导入概念。*

 *您只是碰巧调用了一个名为的函数`printf`，而标准*C*库（例如`libc.so`在 Linux 上，我不知道 Windows 是如何调用它的）恰好在默认情况下被链接。由于您使用该库已知的名称调用函数，因此它会被链接，并在运行时被调用。

但是，您应该在编译器中启用所有警告，它会警告您调用未声明的函数。*

# c# - 使用带有 asp.net mvc3 的 Google C2DM 服务为 Android 创建推送通知服务时面临的问题

> ID：11150887
> 
> 赞同：0
> 
> 时间：2012-06-22T06:00:35.323
> 
> 标签：c#, android, asp.net, android-c2dm

Guyz 面临使用使用 OAuth 2.0 的 Google C2DM 创建推送通知服务（适用于 android）的问题。我是新手开发者，截止日期快到了！请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:50:35.790

在上面的问题中只有一个问题。我失去了冷静，承受着巨大的压力。这不适用于知识产权。所以，简单的问题就解决了。下面给出的 Guyz 是像我这样的傻瓜的代码：

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net;
using System.Text;
using System.IO;
using System.Collections;
using System.Net.Security;
using System.Security.Cryptography.X509Certificates;
using System.Configuration;
using System.Data.SqlClient;
using System.Collections.Specialized;
using System.Diagnostics;
using System.Configuration;
using System.Web.Script.Serialization;
using PushNotification.Entities;
namespace PushNotification
{
    public class AndroidCommunicationService
    {

        public bool AcceptAllCertifications(object sender, System.Security.Cryptography.X509Certificates.X509Certificate certification, System.Security.Cryptography.X509Certificates.X509Chain chain, System.Net.Security.SslPolicyErrors sslPolicyErrors)
        {
            return true;
        }

        public string GetAuthenticationCode()
        {
            string returnUrl = "";
            string URL = "https://accounts.google.com/o/oauth2/auth";
            NameValueCollection postFieldNameValue = new NameValueCollection();
            postFieldNameValue.Add("response_type", "code");
            postFieldNameValue.Add("scope", "https://android.apis.google.com/c2dm/send");
            postFieldNameValue.Add("client_id", ConfigurationManager.AppSettings["ClientId"].ToString());
            postFieldNameValue.Add("redirect_uri", "http://localhost:8080/TestServer/test");
            postFieldNameValue.Add("state", "profile");
            postFieldNameValue.Add("access_type", "offline");
            postFieldNameValue.Add("approval_prompt", "auto");
            postFieldNameValue.Add("additional_param", DateTime.Now.Ticks.ToString());
            string postData = GetPostStringFrom(postFieldNameValue);
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            HttpWebRequest Request = (HttpWebRequest)WebRequest.Create(URL);
            Request.Method = "POST";
            Request.KeepAlive = false;

            Request.ContentType = "application/x-www-form-urlencoded;charset=UTF-8";
            Request.ContentLength = byteArray.Length;

            ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback(AcceptAllCertifications);
            Stream dataStream = Request.GetRequestStream();
            // Write the data to the request stream.
            dataStream.Write(byteArray, 0, byteArray.Length);
            // Close the Stream object.
            dataStream.Close();

            Request.Method = "POST";

            try
            {
                WebResponse Response = Request.GetResponse();

                var sr = new StreamReader(Response.GetResponseStream());
               // You can do this and return the content on the screen ( I am using MVC )
                returnUrl = sr.ReadToEnd();
              // Or 
                returnUrl = Response.RedirectUri.ToString();
            }
            catch
            {
                throw ;
            }
            return returnUrl;
        }
        public TokenResponse GetNewToken(string Code)
        {
            TokenResponse tokenResponse = new TokenResponse();
            string URL = ConfigurationManager.AppSettings["TokenCodeUrl"];
            NameValueCollection postFieldNameValue = new NameValueCollection();
            postFieldNameValue.Add("code", Code);
            postFieldNameValue.Add("client_id", ConfigurationManager.AppSettings["ClientId"]);
            postFieldNameValue.Add("client_secret", ConfigurationManager.AppSettings["ClientSecret"]);
            postFieldNameValue.Add("redirect_uri", ConfigurationManager.AppSettings["RedirectUrl"]);
            postFieldNameValue.Add("grant_type", "authorization_code");

            string postData = GetPostStringFrom(postFieldNameValue);
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            HttpWebRequest Request = (HttpWebRequest)WebRequest.Create(URL);
            Request.Method = "POST";
            Request.KeepAlive = false;

            Request.ContentType = "application/x-www-form-urlencoded;charset=UTF-8";
            Request.ContentLength = byteArray.Length;

            ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback(AcceptAllCertifications);
            Stream dataStream = Request.GetRequestStream();
            // Write the data to the request stream.
            dataStream.Write(byteArray, 0, byteArray.Length);
            // Close the Stream object.
            dataStream.Close();

            Request.Method = "POST";

            try
            {
                WebResponse Response = Request.GetResponse();
                var tokenStreamRead = new StreamReader(Response.GetResponseStream());
                JavaScriptSerializer js = new JavaScriptSerializer();
                var objText = tokenStreamRead.ReadToEnd();
                 tokenResponse = (TokenResponse)js.Deserialize(objText, typeof(TokenResponse));            
            }
            catch (WebException wex)
            {
                var sr = new StreamReader(wex.Response.GetResponseStream());

                Exception ex = new WebException(sr.ReadToEnd() + wex.Message);
                throw ex;
            }

            return tokenResponse;
        }

        public TokenResponse RefreshToken(string RefreshToken)
        {
            TokenResponse tokenResponse = new TokenResponse();
            string URL = ConfigurationManager.AppSettings["TokenCodeUrl"]; 
            NameValueCollection postFieldNameValue = new NameValueCollection();
            postFieldNameValue.Add("refresh_token", RefreshToken);
            postFieldNameValue.Add("client_id", ConfigurationManager.AppSettings["ClientId"]);
            postFieldNameValue.Add("client_secret", ConfigurationManager.AppSettings["ClientSecret"]);
            postFieldNameValue.Add("grant_type", "refresh_token");

            string postData = GetPostStringFrom(postFieldNameValue);
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            HttpWebRequest Request = (HttpWebRequest)WebRequest.Create(URL);
            Request.Method = "POST";
            Request.KeepAlive = false;

            Request.ContentType = "application/x-www-form-urlencoded;charset=UTF-8";
            Request.ContentLength = byteArray.Length;

            ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback(AcceptAllCertifications);
            Stream dataStream = Request.GetRequestStream();
            // Write the data to the request stream.
            dataStream.Write(byteArray, 0, byteArray.Length);
            // Close the Stream object.
            dataStream.Close();

            Request.Method = "POST";

            try
            {
                WebResponse Response = Request.GetResponse();
                var tokenStreamRead = new StreamReader(Response.GetResponseStream());
                JavaScriptSerializer js = new JavaScriptSerializer();
                var objText = tokenStreamRead.ReadToEnd();
                tokenResponse = (TokenResponse)js.Deserialize(objText, typeof(TokenResponse));
            }
            catch 
            {
                throw;
            }

            return tokenResponse;
        }

        public string SendPushMessage(string RegistrationId, string Message ,string AuthString)
        {
            HttpWebRequest Request = (HttpWebRequest)WebRequest.Create(ConfigurationManager.AppSettings["PushMessageUrl"]);
            Request.Method = "POST";
            Request.KeepAlive = false;

            //-- Create Query String --//
            NameValueCollection postFieldNameValue = new NameValueCollection();
            postFieldNameValue.Add("registration_id", RegistrationId);
            postFieldNameValue.Add("collapse_key", "fav_Message");
            postFieldNameValue.Add("data.message", Message);
            postFieldNameValue.Add("additional_value", DateTime.Now.Ticks.ToString());

            string postData = GetPostStringFrom(postFieldNameValue);
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            Request.ContentType = "application/x-www-form-urlencoded;charset=UTF-8";
            Request.ContentLength = byteArray.Length;

// This is to be sent as a header and not as a param .
            Request.Headers.Add(HttpRequestHeader.Authorization, "Bearer " + AuthString);

            try
            {
                //-- Create Stream to Write Byte Array --// 
                Stream dataStream = Request.GetRequestStream();
                dataStream.Write(byteArray, 0, byteArray.Length);
                dataStream.Close();

                ServicePointManager.ServerCertificateValidationCallback = new System.Net.Security.RemoteCertificateValidationCallback(AcceptAllCertifications);
                WebResponse Response = Request.GetResponse();
                HttpStatusCode ResponseCode = ((HttpWebResponse)Response).StatusCode;

                if (ResponseCode.Equals(HttpStatusCode.Unauthorized) || ResponseCode.Equals(HttpStatusCode.Forbidden))
                {
                    return "Unauthorized - need new token";
                }
                else if (!ResponseCode.Equals(HttpStatusCode.OK))
                {
                    return "Response from web service isn't OK";

                }

                StreamReader Reader = new StreamReader(Response.GetResponseStream());
                string responseLine = Reader.ReadLine();
                Reader.Close();

                return responseLine;

            }
            catch 
            {

                throw;
            }

        }

        private string GetPostStringFrom(NameValueCollection postFieldNameValue)
        {
            //throw new NotImplementedException();
            List<string> items = new List<string>();

            foreach (String name in postFieldNameValue)
                items.Add(String.Concat(name, "=", System.Web.HttpUtility.UrlEncode(postFieldNameValue[name])));

            return String.Join("&", items.ToArray());
        }
        private static bool ValidateRemoteCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors policyErrors)
        {
            return true;
        }

    }
}
public class TokenResponse
    {
        public String access_token{ get; set; }

        public String expires_in { get; set; }

        public String token_type { get; set; }

        public String refresh_token { get; set; }

    } 
```

# jquery - jQuery - '.on' 和 ':first'

> ID：11150891
> 
> 赞同：1
> 
> 时间：2012-06-22T06:00:48.267
> 
> 标签：jquery

是否可以将`:first`and`:last`选择器与 jQuery 的选择器一起使用？

我希望每个列表项中的第一个链接触发警报。但是，目前，只有第一个链接会触发它。

JavaScript 代码：

```
<script type="text/javascript">
    $(document).ready( function(){
        $('ul').on("click", "li a:first", function(event) {
            alert("test");
        });
    }
</script> 
```

和 HTML：

```
<ul>
    <li>
        <a href="#">Trigger</a>
        <a href="#">Don't Trigger</a>
    </li>
    <li>
        <a href="#">Trigger</a>
        <a href="#">Don't Trigger</a>
    </li>
</ul> 
```

**演示：http:** [//jsfiddle.net/pjgalbraith/tuJnv/](http://jsfiddle.net/pjgalbraith/tuJnv/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T06:02:39.367

`:first-child`改为使用

```
$('ul').on("click", "li a:first-child", function(event) {
    alert("test");
}); 
```

**演示：http:** [//jsfiddle.net/joycse06/tuJnv/1/](http://jsfiddle.net/joycse06/tuJnv/1/)

正如医生所说

> :first 伪类等价于 :eq(0)。它也可以写成:lt(1)。
> 
> 虽然这仅匹配一个元素，但 :first-child 可以匹配多个：每个父元素一个。

`:first`将只匹配一个元素，首先在选定的一组元素上。在哪里`:first-child`可以找到`the first child`你想要的每个父母的一个（）。

文档[`:first`](http://api.jquery.com/first-selector/)和[`:first-child`](http://api.jquery.com/first-child-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T06:05:37.317

更改`:first`为`:first-child`：

```
<script type="text/javascript"> 
    $(document).ready( function(){ 
        $('ul').on("click", "li a:first-child", function(event) { 
            alert("test"); 
        }); 
    } 
</script> 
```

Fiddle 上的代码位置：http: [//jsfiddle.net/tuJnv/3/](http://jsfiddle.net/tuJnv/3/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T06:08:26.413

例如可以这样做 - [http://jsfiddle.net/tuJnv/7/](http://jsfiddle.net/tuJnv/7/)

# jquery - jquery .animate 按对象 X 或 Y 的百分比

> ID：11150892
> 
> 赞同：1
> 
> 时间：2012-06-22T06:00:52.743
> 
> 标签：jquery, jquery-animate, percentage

由于 IE 和世界其他地方之间的一些 css 限制，我被迫使用 .animate 作为 % 而不是 px 或 objectToMove 跳转（仅限 IE）然后动画。

因此，如果使用以下内容

```
 $('.myClick').click(function() {
  $('.objectToMove').animate({
    top: '+=10%'
          }, 'fast', function() {
    // Animation complete.
  });
}); 
```

它将 objectToMove 移动屏幕高度的 10%。我想将它移动为 objectToMove 高度的 10%。

这是否可能无需获取屏幕和对象高度并计算对象与屏幕高度的百分比等？

**例子**

画布大小 = 720px

objectToMove = 100px

我想将 objectToMove 移动 10px 而不是 72px

谢谢艺术

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:25:58.737

以一种简单的方式，

和

```
top: '+=' + ( $('.objectToMove').height() / 100 ) * 10; 
```

您可以获得对象所需的百分比高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:16:26.460

这就是我所拥有的。如果您被迫继续按百分比工作，这应该有效。

首先，我将获得元素的高度和 HTML。

```
var moveObject = $('.objectToMove').height();
var html = $('html').height(); 
```

然后我要找出将物体移动到其自身高度的 10% 会是什么

```
var distance = (moveObject/html)*10; 
```

现在，我要将对象从顶部移动 10% 的高度。

```
$('.objectToMove').animate({
    top: '+='+distance+'%'},1500); 
```

我对此进行了测试，它对我有用。让我知道它是否不起作用。

# php - 上传 CSV 时出现 UTF-8 编码问题

> ID：11150895
> 
> 赞同：0
> 
> 时间：2012-06-22T06:01:25.493
> 
> 标签：php, utf-8

我在 UTF-8 编码上遇到了一些问题。我有一个 CSV 文件，这是它的内容：

```
Quién tú - Tes,  más , S03
Who you, More, SO2 
```

我已经一一提取了它，我的循环中有这个条件

```
if(mb_detect_encoding($exploded_value[$i], 'UTF-8', true))
{
   echo $cleaned_data = utf8_encode($exploded_value[$i]);
}
else
{
  echo $cleaned_data=$exploded_value[$i];
} 
```

我清理的数据变成了这样：

```
QuiÃ©n tÃº - Tes
mÃ¡s
S03

Who you
More
SO2 
```

像 á, ç, ú 这样的字符会被解码，当检索到它时会给出错误的输出。

带有西班牙字符的文本被检测为 UTF-8 编码字符。因此，它属于 utf8_encode($exploded_value[$i])。当 utf8_encode 执行它的过程时，它被解码了。

我的元内容类型的声明是 charset=UTF8

任何人都遇到过这个问题。你能分享一下你是如何解决的吗？请帮忙。我用谷歌搜索并没有找到任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:21:07.140

您的逻辑是相反的：您正在重新编码已经 utf-8 编码的内容，而不是您按原样传递的内容。

要解决此问题，只需切换`if`和`else`主体：

```
if(mb_detect_encoding($exploded_value[$i], 'UTF-8', true))
{
   // already UTF-8
   echo $cleaned_data=$exploded_value[$i];
}
else
{
   // not yet UTF-8
   echo $cleaned_data = utf8_encode($exploded_value[$i]);
} 
```

# eclipse - 从 SVN 存储库结帐后如何在 Eclipse 中导入 Blackberry 项目？

> ID：11150899
> 
> 赞同：0
> 
> 时间：2012-06-22T06:01:40.437
> 
> 标签：eclipse, eclipse-plugin, blackberry-eclipse-plugin

当我从 SVN 存储库签出后导入黑莓项目时，我收到以下错误。但是当我从其他目录导入在我的系统上开发的项目时，我没有收到任何错误。

```
 java.lang.NullPointerException
at net.rim.ejde.A.J.H.B.F.setApplicationImage(RIMEIDE:2272)
at net.rim.ejde.A.J.H.B.R.doAddPages(RIMEIDE:2018)
at net.rim.ejde.A.J.H.B.F.addPages(RIMEIDE:277)
at org.eclipse.ui.forms.editor.FormEditor.createPages(FormEditor.java:138)
at           org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:348)
at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:670)
at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465)
at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
at org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:289)
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2863)
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2768)
at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2760)
at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2711)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2707)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2691)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2682)
at org.eclipse.ui.ide.IDE.openEditor(IDE.java:651)
at org.eclipse.ui.ide.IDE.openEditor(IDE.java:610)
at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:365)
at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:168)
at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:229)
at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:208)
at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:274)
at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:250)
at org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:373)
at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:526)
at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48)
at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:845)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:843)
at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1131)
at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1235)
at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:264)
at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:258)
at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:298)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4066)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3657)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2640)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2604)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
at org.eclipse.equinox.launcher.Main.run(Main.java:1408) 
```

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:19:03.120

确保项目文件夹中有 .project 和 .classpath 文件。

谢谢

纳文 M

# c# - UploadFile1.PostedFile.FileName 给出空异常错误。如何处理？

> ID：11150904
> 
> 赞同：0
> 
> 时间：2012-06-22T06:02:25.913
> 
> 标签：c#, asp.net, c#-4.0

我正在开发一个网站，我必须在其中上传 excel 文件。我有一个放置在 UpdatePanel 内的表单。当我使用此代码时：

```
protected void uploadClick(object sender, EventArgs e)
{

   string extension = Path.GetExtension(Uploader.PostedFile.FileName);

} 
```

从上面的行..我正在检查文件的扩展名。如果不是 .xlsx ，我会提示用户不允许使用这种类型的文件。但问题是

Uploader.PostedFile.Name 给出空错误异常。这是错误信息：

用户代码未处理 NullReferenceException

请帮助我如何处理这种情况。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:05:45.633

好的，因为您在 UpdatePanel 中使用上传器，所以它不起作用。你可以做两件事：

1.  通过使用 UpdatePanel 触发器为上传者使用完整的回发，更多信息在这里[http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)

2.  使用来自 ajax 工具包的异步上传器[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx)

# javascript - 如何使用java脚本在android中打开外部页面？

> ID：11150911
> 
> 赞同：0
> 
> 时间：2012-06-22T06:03:19.653
> 
> 标签：javascript, cordova

我正在使用**cordova 1.8**，我想在我的应用程序本身中使用本机浏览器打开外部网页，我搜索但没有得到答案。但是我写了一个代码片段。有什么建议么？

```
<!Doctype>
<html>
<head>
    <title>demo browser</title>
    <script type="text/javascript" charset="utf-8" src="cordova-1.8.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="childbrowser.js"></script>
    <script>
    function onDeviceReady() {
        window.plugins.childBrowser.showWebPage("http://www.google.com", { showLocationBar: true });
    }
    </script>
</head>
<body>
hello visitor<br><br>
<button onClick="onDeviceReady();">click to open</button></body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:06:35.430

只需调用意图查看网址：

```
String uri_str;
Uri uri = Uri.parse(uri_str);
Intent i = new Intent(Intent.ACTION_VIEW, uri);
startActivity(i); 
```

# c# - 在 gridview 中绑定和访问复选框值

> ID：11150912
> 
> 赞同：0
> 
> 时间：2012-06-22T06:03:21.420
> 
> 标签：c#, asp.net

在我的网格视图中，我有一个复选框列，并且正在将网格视图与字典绑定。我需要`Id`从复选框中获取相应的内容。

在我的字典中，我有像这样的关键值

```
Id         Name
--         ----
 1         Arts
 2         Science
 3         Engineering 
```

在这里，我尝试将此复选框的值绑定为

```
<asp:TemplateField>
    <ItemTemplate>
      <asp:CheckBox ID="chkSelItem" value="<%# Eval("Key.Id") %>" 
                                                       runat="server" />
    </ItemTemplate>
</asp:TemplateField>

<asp:TemplateField HeaderText="Department">
    <ItemTemplate>
         <%# Eval("Key.Name") %>
    </ItemTemplate>
    <HeaderStyle HorizontalAlign="Left" />
</asp:TemplateField> 
```

从代码隐藏中，我尝试过

```
foreach (GridViewRow row in gridDepartments.Rows)
        {
            CheckBox chkSelItem = (CheckBox)row.FindControl("chkSelItem");

            if (chkSelItem.Checked)
            {
                int departmentId = int.Parse(chkSelItem.Text);
                ////
                ////                 
            }
        } 
```

其抛出错误，或未显示复选框的任何值。

我也尝试过`FindControl`，但没有使用它，因为这`key & Value`对中正在使用一个类（它继承另一个类）和一个布尔值。这就是我正在尝试的方法，任何人都可以在这里帮助我，提前谢谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:15:20.937

采用

```
CheckBox chkSelItem = (CheckBox)row.cell[0].FindControl("chkSelItem");// Replace row.cell[0] accrding to you celll index 
```

代替

```
 CheckBox chkSelItem = (CheckBox)row.FindControl("chkSelItem"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:17:26.240

我认为您必须使用 Text 而不是 value，因为您正在分配 value 并获取 text 属性。文本将是空字符串并用 int 解析它会引发异常。

int.Parse(chkSelItem.Text);

```
<asp:CheckBox ID="chkSelItem" value="<%# Eval("Key.Id") %>" runat="server" /> 
```

将会

```
<asp:CheckBox ID="chkSelItem" Text="<%# Eval("Key.Id") %>" runat="server" /> 
```

或者

如果您必须使用复选框的值，则访问值而不是文本

```
<asp:CheckBox ID="chkSelItem" value="<%# Eval("Key.Id") %>" runat="server" />

int departmentId = int.Parse(chkSelItem.Attributes["value"].ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T06:29:26.430

**在 Aspx 页面中：**

```
<asp:CheckBox ID="chkSelItem" Text="<%# Eval("Key.Id") %>" runat="server" /> 
```

在代码隐藏中添加检查以确保项目不为空：

```
 CheckBox chkSelItem = (CheckBox)row.FindControl("chkSelItem");

    if (chkSelItem != null && chkSelItem.Checked && !string.IsNullOrEmpty(chkSelItem.Text))
    {

        int departmentId = int.Parse(chkSelItem.Text);                
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T06:32:44.180

```
You can try this one...

Bind id to lable instead of to checkbox as below.

<asp:TemplateField>     
<ItemTemplate>       
<asp:CheckBox ID="chkSelItem" runat="server" />     

<asp:Label ID="lblSelectedItem" value=<%# Eval("Key.Id")) %> visible="False"/>
</ItemTemplate> </asp:TemplateField>

In codebehind try this

foreach (GridViewRow row in gridDepartments.Rows)         
{             
      CheckBox chkSelItem = (CheckBox)row.FindControl("chkSelItem");
       Label lblSelectedItem= (Label)row.FindControl("lblSelectedItem");

      if (chkSelItem.Checked) 
      {
                 int departmentId = int.Parse(lblSelectedItem.Text); 
      }
} 

Hope this is what u want... 
```

# node.js - 无法连接到 Mongo 服务器

> ID：11150913
> 
> 赞同：0
> 
> 时间：2012-06-22T06:03:21.203
> 
> 标签：node.js, mongodb

该 ip:port 上没有运行 mongo 服务器或任何服务器或任何服务，但我们仍然收到此类错误。

```
(lockerdb) Database connection error: { [Error: failed to connect to [127.0.0.1:10004]]
  [stack]: [Getter/Setter],
  [message]: 'failed to connect to [127.0.0.1:10004]',
  [arguments]: undefined,
  [type]: undefined }

node.js:201

        throw e; // process.nextTick error, or 'error' event on first tick

        ^

TypeError: Cannot call method 'close' of null
    at /home/<user>/Documents/Server_v1/ssc/ssc-lac/lac-util.js:1653:15
    at /home/<user>/node_modules/mongodb/lib/mongodb/db.js:247:16
    at [object Object].<anonymous> (/home/<user>/node_modules/mongodb/lib/mongodb/connection/server.js:383:7)
    at [object Object].emit (events.js:88:20)
    at [object Object].<anonymous> (/home/<user>/node_modules/mongodb/lib/mongodb/connection/connection_pool.js:93:15)
    at [object Object].emit (events.js:70:17)
    at Socket.<anonymous> (/home/<user>/node_modules/mongodb/lib/mongodb/connection/connection.js:385:10)
    at Socket.emit (events.js:67:17)
    at Array.0 (net.js:319:25)
    at EventEmitter._tickCallback (node.js:192:41) 
```

此错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:32:12.787

您很可能仍在尝试连接到该端口上的服务。

默认行为是尝试连接，当它无法连接时，它会因您看到的错误而死亡。这是出于安全原因，因为 90% 的时间连接错误意味着数据库故障（就像您的情况一样），这是不好的，不应被忽略。

克服此错误的最简单方法是`try catch`连接块，以便了解何时收到连接错误并对其进行处理。

# facebook - a 为空 http://connect.facebook.net/en_US/all.js 第 66 行

> ID：11150914
> 
> 赞同：0
> 
> 时间：2012-06-22T06:03:39.053
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在创建一个使用 facebook apis 的移动网站。我收到以下错误。当我第一次登录该网站并单击一个调用邀请朋友对话框的按钮时。刷新页面后，错误就会消失。

FB.init 已被调用 - 这可能表明存在问题：

```
a is null
http://connect.facebook.net/en_US/all.js
Line 66 
```

# mysql - 使用eclipse从mysql读取阿拉伯字符

> ID：11150915
> 
> 赞同：0
> 
> 时间：2012-06-22T06:03:53.263
> 
> 标签：mysql, eclipse, arabic

我有一个包含阿拉伯表格的数据库，我可以从 Netbeans 读取它，所以我可以看到阿拉伯字符并将其写入表格，但我想使用 Eclipse 读写，我试过这样：

```
String unicode1 = "?useUnicode=yes&characterEncoding=UTF-8";
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = (Connection) DriverManager.getConnection(
                "jdbc:mysql://localhost:3306/searchengine"+unicode1, Username, Password);
        PreparedStatement statement = (PreparedStatement) con
                .prepareStatement("select * from invertedindex");
        ResultSet results = statement.executeQuery();
        while (results.next()) {
            System.out.println(results.getString(1));
        } 
```

但我仍然看到阿拉伯字符像问号，我做错了什么

**注意：** 这些表支持阿拉伯字符，因为我可以使用 Netbeans 读取和写入同一个表

# 编辑

我试过`System.out.println("يييي");`了，但我有问号，好像我有阿拉伯字符但 Eclipse 没有显示它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:12:14.443

尝试`select convert(name using UTF8) from invertedIndex`

# python - 简单的 OOP 查询。Python：在 __init__ 中保存对象名称

> ID：11150919
> 
> 赞同：0
> 
> 时间：2012-06-22T06:04:28.677
> 
> 标签：python, oop

尽可能接近标题。我对 OOP（和一般编码）非常陌生，并且想创建一个玩二十一点的程序。我想将创建的对象自动保存到列表中，因此一旦创建，我就可以使用列表循环浏览它们（我想创建播放器对象，但将变量名（正确的词？？？）保存到列表中一次它是使用用户输入创建的，我可以自动访问它们。

到目前为止，我已经构建了这个：

```
ROSTER = []   

class Player():
"""player in the game"""

    def __init__(self, name, score= 0):
        self.name = name
        self.score = score
        ROSTER.append(self.name) 
```

但当然，这只给了我放入变量 self.name 的名称......我怎样才能捕获变量名称（再次正确的术语？）。self.name 不会（afaik）让我通过以下方式访问各个对象：

请原谅废话格式。=/

另外，如果我使用了错误的术语，请纠正我。就掌握所有术语而言，自学有点困难。

编辑：对不起，我的帖子令人困惑。我发布的代码是为了显示一个死胡同，而不是我要找的东西，而且我的术语很糟糕（我大部分时间都觉得自己像个外国人）。当我说变量名时，我想我应该说“对象名”（？）所以：

p1 = 玩家（“鲍勃”）

p2 = 玩家（“起诉”）

我想要 ["p1","p2"] （或者当我尝试调用它们时，如果字符串格式会给我带来问题，无论适当的方式是什么。）

再次，对于超级混乱的第一篇文章感到抱歉。希望这次编辑更清晰，更专注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:10:30.173

你可以`self`换成名册。IE：

```
ROSTER = []

class Player():
    def __init__(self, name, score = 0):
        self.name = name
        self.score = score
        ROSTER.append(self) 
```

然后你会使用这样的`ROSTER`列表：

```
>>> p1 = Player("Jane")
>>> p2 = Player("John")
>>> ROSTER
[<__main__.Player instance at 0x10a937a70>, <__main__.Player instance at 0x10a937a28>]
>>> for p in ROSTER:
...   print p.name, p.score
... 
Jane 0
John 0 
```

或者，也许更好，您可以将 ROSTER 设为[字典](http://docs.python.org/library/stdtypes.html#mapping-types-dict)：

```
ROSTER = dict()

class Player():
    def __init__(self, name, score = 0):
        self.name = name
        self.score = score
        ROSTER[self.name] = self 
```

这样，您可以使用 名称访问播放器对象`ROSTER[name]`，并且可以使用 循环访问它们`ROSTER.values()`。例如：

```
>>> p1 = Player("Jane")
>>> p2 = Player("John")
>>> print ROSTER["Jane"].name, ROSTER["Jane"].score
Jane 0
>>> print ROSTER["John"].name, ROSTER["John"].score
John 0
>>> for p in ROSTER.values():
...   print p.name, p.score
... 
Jane 0
John 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:23:25.727

你在说这个吗？

```
ROSTER = []   

class Player():

    def __init__(self, name, score= 0):
        self.name = name
        self.score = score
        ROSTER.append(self)

a=Player('Jack',100)
b=Player('Blackk',1000)
c=Player('Mike')

for x in ROSTER:
    print(x.name,x.score) 
```

**输出：**

```
Jack 100
Blackk 1000
Mike 0 
```

# wicket - Wicket 模型窗口在第一次通过右键单击在新选项卡中打开然后单击模型窗口链接时抛出错误

> ID：11150929
> 
> 赞同：0
> 
> 时间：2012-06-22T06:05:37.163
> 
> 标签：wicket

当我使用 Ajax 链接 URL 将一个页面 (A) 转到另一个页面 (B) 时，显示如下 ...?wicket:interface=:58::::#

在 B 页面上，我有一个打开模型窗口的链接。当我们直接单击模型窗口的链接时，它工作正常，但是当第一次通过右键单击在新选项卡中打开链接然后单击模型窗口链接时，它会抛出错误。

我正在使用 setResponsePage(new B(variable)) 来访问另一个页面。当我使用 setResponsePage(B.class) 而不是 setResponsePage(new B(variable)) 时，它工作正常。

注意：我不想将 pageparameter 与可书签和 setResponsePage 一起使用。

错误是：

org.apache.wicket.WicketRuntimeException: 组件 listForm:group:issueList:1:在页面 com.B[id = 18] 上找不到 editStatus，侦听器接口 = [RequestListenerInterface name=IBehaviorListener，method=public abstract void **org.apache.wicket** .behavior.IBehaviorListener.onRequest()] org.apache.wicket.protocol.http.request.InvalidUrlException: org.apache.wicket.WicketRuntimeException: 组件 listForm:group:issueList:1:editStatus 在页面 com.B [id = 18]，侦听器接口 = [RequestListenerInterface name=IBehaviorListener, method=public abstract void org.apache.wicket.behavior.IBehaviorListener.onRequest()] at .... ............ 27 更多

**“editStatus”**是模型窗口上的链接名称。

我正在使用 A 类的代码

```
class A extends WebPage {

   Link<String> escalated = new Link<String>("escalated") {

      public void onClick() {

         setResponsePage(new B(Variables));
   } };

}

class B extends WebPage {

   public B(variables..) {
   }

   final ModalWindow model = new ModalWindow("UpdateModel");

   model.setContent(new C(model,variables,model.getContentId()));

   item.add(new AjaxLink<Void>(**"editStatus"**) {
      public void onClick(AjaxRequestTarget target) {

         model.show(target);

      }
   }.add(new Image("edit_icon", "image/edit.png")));   

  }
}

class C extends Panel {

  public C(.....) {

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:47:04.757

我已经解决了这个问题。错误与检票口组件的状态有关。

使用 StatelessLink 而不是 Link。

正确的代码：A类扩展网页{

StatelessLink 升级 = 新 StatelessLink("升级") {

```
 public void onClick() {

     setResponsePage(new B(Variables)); 
```

} };

}

它还会从 url 中删除 "...?wicket:interface=:58::::#"。当我们使用 Link、AjaxLink 时，它会保持状态。因此，当我们在新选项卡中打开任何链接时，它会在服务器端更改状态（更改组件的 id），但在客户端它将保持不变。因此，当我们单击同一页面上的任何链接时，没有更新 id 的信息，它会引发错误。

# c# - 如何在 KeyDown 中确定按下了 Shift + Tab

> ID：11150930
> 
> 赞同：2
> 
> 时间：2012-06-22T06:05:38.670
> 
> 标签：c#, winforms, keydown

如何在 KeyDown 中确定`⇧</kbd> + `Tab` was pressed.`

```
private void DateTimePicker_BirthDate_KeyDown(object sender, KeyEventArgs e)
{
   if (e.KeyCode == Keys.Tab && e.Modifiers == Keys.Shift)
   {
       //do stuff
   }
} 
```

不能工作，因为永远不会在同一秒内完全按下两个键。你总是先换档，然后换另一档..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T06:12:13.823

> 它不能工作，因为永远不会在同一秒内完全按下两个键。

你是对的，你的代码不起作用，但你的理由是错误的。问题是这个`Tab`键有一个特殊的含义——它会导致焦点发生变化。未调用您的事件处理程序。

如果您使用不同的键而不是`Tab`，那么您的代码将正常工作。

* * *

如果你*真的*想改变某个特定控件的`Shift`+行为`Tab`，可以通过覆盖来完成，`ProcessCmdKey`但请记住，许多用户使用该`Tab`键在表单中导航，更改该键的行为可能会惹恼这些用户。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (DateTimePicker_BirthDate.Focused && keyData == (Keys.Tab | Keys.Shift))
    {
        MessageBox.Show("shift + tab pressed");
        return true;
    }
    else
    {
        return base.ProcessCmdKey(ref msg, keyData);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T06:17:51.537

如果您正在寻找像 Ctrl K + D 这样的按键组合（Tab，然后是 Shift），您将不得不使用取自[MSDN social](http://social.msdn.microsoft.com/Forums/en/winforms/thread/67d26d46-0a15-4199-88f6-1e08e295b578)的这个修改后的示例。

```
private StringBuilder _pressedKeys = new StringBuilder();

private void DateTimePicker_BirthDate_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Tab)
    {
        _pressedKeys.Append("Tab");
        return;
    }

    if (e.Modifiers == Keys.Shift)
    {
        _pressedKeys.Append("Shift");
        return;
    }

    if (_pressedKeys.ToString()."TabShift")
    {
        MessageBox.Show("It works!");
         _pressedKeys.Clear();
    }
    else
    {
         _pressedKeys.Clear();
    }

    base.OnKeyDown(e);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T06:12:20.110

先钩住 Tab keypress 事件，然后在事件期间，检查 Shift 键的状态。请记住，有两个 shift 键；确保你检查他们两个。

这篇非常相关的帖子展示了如何检查修饰键的状态：

[如何检测当前按下的键？](https://stackoverflow.com/questions/1100285/how-to-detect-the-currently-pressed-key)

编辑：另一个值得赞成的回答者提供的见解是必须禁止制表键的默认行为（更改控制焦点）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T06:17:13.933

[你可以在这篇文章](http://bytes.com/topic/c-sharp/answers/271241-how-capture-shift-tab-c-form)中找到你的答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-17T10:38:26.237

这很简单。

您可以使用 TextBox 中的 KeyUp 事件来做到这一点

```
 private void txtBox1_KeyUp(object sender, KeyEventArgs e)
    {               
        if (e.KeyCode == Keys.Tab && e.Shift == false) // TAB Key Pressed
        {

        }

        if (e.KeyCode == Keys.Tab && e.Shift == true) // TAB + SHIFT Key Pressed
        {

        }
    }

    Or

    Using this you can identify Any Key is press inside the form

    //Add This code inside the Form_Load Event
    private void Form1_Load(object sender, EventArgs e)
    {
    this.KeyUp += new System.Windows.Forms.KeyEventHandler(KeyPressEvent);
    this.KeyPreview = true;
    }

    //Create this Custom Event
    private void KeyPressEvent(object sender, KeyEventArgs e) 
    {
        if (e.KeyCode == Keys.Tab && e.Shift == false) // TAB Key Pressed
        {

        }

        if (e.KeyCode == Keys.Tab && e.Shift == true) // TAB + SHIFT Key Pressed
        {

        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-17T10:43:16.997

这很简单。

```
Using this you can identify Any Key is press inside the form

//Add This code inside the Form_Load Event
private void Form1_Load(object sender, EventArgs e)
{
    this.KeyUp += new System.Windows.Forms.KeyEventHandler(KeyPressEvent);
    this.KeyPreview = true;
}

//Create this Custom Event
private void KeyPressEvent(object sender, KeyEventArgs e) 
{
    if (e.KeyCode == Keys.Tab && e.Shift == false) // TAB Key Pressed
    {

    }

    if (e.KeyCode == Keys.Tab && e.Shift == true) // TAB + SHIFT Key Pressed
    {

    }
} 
```

# asp.net-mvc - 使用 DropList 或 DropListFor 在 MVC 中忽略选定的属性

> ID：11150931
> 
> 赞同：0
> 
> 时间：2012-06-22T06:06:02.993
> 
> 标签：asp.net-mvc

我有一个枚举，它是属性描述与数据库中索引的映射。我的 ViewModel 上有一个属性，它代表该枚举的一个实例。我已经尝试过返回枚举实例列表，这意味着我这样做：

```
@Html.DropDownListFor(m => m.CurrentFilter,
                    Model.FilterTypes.Select(entry =>
                        new SelectListItem{ Text = entry.ToString(), Value = ((int)entry).ToString()}),
                    new { @class = "normalcell", style = "WIDTH: 132px;" }) 
```

并返回一个 SelectListItems 列表，这意味着我这样做：

```
 @Html.DropDownListFor(m => m.CurrentFilter,
                    Model.FilterTypes.Select(entry =>
                        new SelectListItem{ Text = entry.Text, Value = entry.Value, Selected = entry.Selected}),
                    new { @class = "normalcell", style = "WIDTH: 132px;" }) 
```

在第二种情况下，当我调试时，我确定条目对象上的 Selected 属性对于正确的项目是正确的。在这两种情况下，我的 HTML 中都没有写入“选择”属性，因此没有选择正确的项目。我还设置了一个断点，并且 CurrentFilter 确实具有正确的值，并且我的页面的其余部分正确呈现，因此它正在查找值。

我写了很多有效的下拉列表，使用类似的代码，我无法为我的生活看到为什么这不起作用，无论我如何尝试这样做？

我也试过：

```
@Html.DropDownListFor(m => m.CurrentFilter,
                    Model.FilterTypes,
                    new { @class = "normalcell", style = "WIDTH: 132px;" }) 
```

在我看来，这似乎是一种合乎逻辑的方式（返回一个 SelectListItems 列表，只是在页面中不做任何处理），但 Selected 属性仍然被忽略。

更新：

我试着这样做：

```
@Html.DropDownList("CurrentFilter", Model.FilterTypes, new { @class = "normalcell", style = "WIDTH: 132px;" }) 
```

并从请求中读取值。我仍然会返回一个列表，其中只有一个具有 Selected == true 的项目，并且 MVC 仍然会忽略它。

这行得通，不足为奇，但我很想知道为什么所有其他事情都行不通。

```
<select class="normalcell" id="CurrentFilter" name="CurrentFilter" style="WIDTH: 132px;">
  @foreach (SelectListItem item in Model.FilterTypes)
  {
      if (item.Selected)
      {
           <option value="@item.Value" selected="selected">@item.Text</option>
      }
      else
      {
         <option value="@item.Value">@item.Text</option>
      }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:35:38.157

我相信原因是 MVC 绑定引擎不知道如何处理 Enum 值。我认为您需要为您的视图模型创建一个“代理”属性。像这样的东西...

```
public enum MyEnum { a, b, c, d };

public MyEnum EnumVal { get; private set; }

public string EnumProxy
{
    get { return EnumVal.ToString(); }
    set { EnumVal = (MyEnum)Enum.Parse(typeof(MyEnum), value); }
} 
```

然后使用枚举名称构造下拉列表：

```
Type t = typeof(MyEnum);
var ddList = Enum.GetNames(t).Select(
    item => new SelectListItem() { Text = item, Value = item }
).ToArray(); 
```

现在您应该可以正常使用*DropDownListFor*了：

```
@Html.DropDownListFor(model => model.EnumProxy, ddList) 
```

我不确定是否有更简洁的解决方案。这个应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:41:23.667

我的 DDL 教程展示了如何使用枚举。请参阅我的教程[使用 DropDownList Box 和 jQuery](http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with-aspnet-mvc)以及[我的博客教程的 ASP.Net MVC 中](http://blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx)的级联 DropDownList 第 2 部分说明：当字符串参数（要绑定的属性）和 SelectList 对象具有相同名称时，选择的值未使用。

Darin 有一个关于未显示所选值的另一个常见原因的 SO 帖子。请参阅[MVC DropDownList SelectedValue 未正确显示](https://stackoverflow.com/questions/10039006/mvc-dropdownlist-selectedvalue-not-displaying-correctly)

# iphone - 处理 UIwebview youtube 视频播放器的控制按钮

> ID：11150933
> 
> 赞同：3
> 
> 时间：2012-06-22T06:06:16.713
> 
> 标签：iphone, ios, uiwebview, youtube

我正在创建一个 youtube 视频播放器，它可以播放 youtube 视频列表（给定视频 ID 列表）。我将 youtube 视频嵌入到 UIWebview 中，如下所示：

```
NSString *htmlFormat = @"<html><head><body style=\"margin:0\"><embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" width=\"40\" height=\"30\"></embed></body></html>";
NSString *url = [NSString stringWithFormat:@"http://www.youtube.com/watch?v=%@", videoId];
NSString *html = [NSString stringWithFormat:htmlFormat, url];
[webView loadHTMLString:html baseURL:nil]; 
```

我需要的是：

*   播放器播放完当前视频后，将自动播放下一个视频。
*   当用户点击播放器控制面板中的下一个按钮时播放下一个视频
*   如果用户点击“完成”按钮，则停止播放列表。

我的方法是处理播放器完成播放时可能发送的事件，用户点击控制按钮，因此我可以修改 html 内容以加载其他视频。

我的问题是：

1.  **给定视频 ID 列表，是否有更好的方法来播放 youtube 视频列表？**

2.  **如何处理这些事件？**

我找到[了一些](https://stackoverflow.com/questions/8518719/how-to-receive-nsnotifications-from-uiwebview-embedded-youtube-video-playback/8554040#8554040)建议处理通知`UIMoviePlayerControllerDidExitFullscreenNotification`和的解决方案`UIMoviePlayerControllerDidEnterFullscreenNotification`，但我无法区分控制按钮的事件和完成播放事件（电影播放器​​控制器在所有情况下都退出全屏模式）。有些人建议使用 HTML`<video>`标签，但我认为这不可能。

# c# - 在c#中访问图像的egde边界内的像素

> ID：11150939
> 
> 赞同：0
> 
> 时间：2012-06-22T06:06:52.023
> 
> 标签：c#, image, image-processing

我正在做一些用于手部检测的图像处理部分，并且我已经完成了一些基本部分，例如手部颜色检测。然后边缘检测。我的问题是我想访问边缘边界内的像素，以便我可以标记整个手势部分。

> 我想将边缘内的区域标记为`completely black or completely white`。

我怎样才能做到这一点？

# jquery - jqplot条形图如何隐藏y轴标签

> ID：11150942
> 
> 赞同：4
> 
> 时间：2012-06-22T06:07:10.263
> 
> 标签：jquery, charts, jqplot

我正在研究 jqplot 水平堆积条形图。我想隐藏`x`和`y`轴的所有标签。我能够隐藏`x`轴标签和标记，但是当我试图隐藏`y`轴标签时，一个条目仍然存在。

这就是我想要的
![](../Images/5b79033e9118cb60920b4751eb1696e3.png)

这就是我所
![在此处输入图像描述](../Images/e116e0342a8bb5a87f2f7c4f4d2c6a5d.png)
强调的部分必须被隐藏。

[您可以在此处](http://jsfiddle.net/arunpjohny/TfUfD/)找到工作示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:14:53.397

我以前做过这样的事情。请查看[此答案](https://stackoverflow.com/a/10796450/613495)。我认为这与您的问题有关。对您来说，重要的部分是`axesDefaults`.

我在您的代码示例上测试了上述解决方案，但在使用时它似乎不起作用`CategoryAxisRenderer`。因此，在您的情况下，唯一的解决方案似乎是`jQuery`在您完成情节后使用并抓住蜱虫并自己隐藏它们 -[就像我在这里展示](http://jsfiddle.net/TfUfD/57/)的那样。

```
$(".jqplot-xaxis-tick").hide();
$(".jqplot-yaxis-tick").hide(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-03T20:25:54.623

您可以将标签覆盖为空字符串

```
yaxis: {
    ticks: ['']
} 
```

# jquery - 在不重新加载页面的情况下显示 Joomla 布局

> ID：11150946
> 
> 赞同：0
> 
> 时间：2012-06-22T06:07:39.890
> 
> 标签：jquery, joomla

我的仪表板中有很多选项卡。对于每个选项卡，我放置一个单独的布局。当用户选择一个选项卡时，页面会重新加载。

但现在我想在不重新加载的情况下显示页面。我在每个布局中使用了很多 ajax 函数。当我使用加载方法加载页面时，它在 IE 中不起作用，并且页面内可选择的日期选择器和 UI 不起作用。有没有可能在不重新加载的情况下加载页面布局。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:38:34.453

试试这个优秀的插件来 ajaxify 你的网站：[http ://extensions.joomla.org/extensions/site-management/site-performance/13293](http://extensions.joomla.org/extensions/site-management/site-performance/13293)

# .net - 带有浮点数的 F# 重载运算符 ( *= ) 不能与其他浮点数一起使用

> ID：11150947
> 
> 赞同：1
> 
> 时间：2012-06-22T06:08:03.317
> 
> 标签：.net, f#, operator-overloading

我正在像这个函数一样规范化我的向量：

```
member this.Normalize =
    if  this.Length > _zerotolerance  then
        let inv:float = 1.0 / this.Length 
        this.x <- this.x *= inv   // overloaded
        this.y <- this.y *= inv   // overloaded 
```

但是 -默认情况下，我无法使用用于浮点数的**乘法赋值运算符 *=，因此我需要创建一个。**

根据 MSDN [http://msdn.microsoft.com/en-us/library/dd233204%28v=vs.110%29](http://msdn.microsoft.com/en-us/library/dd233204%28v=vs.110%29)我必须以下列方式重载运算符：

```
static member ( *= ) (arg1 : type, arg1: type) = ...code etc... 
```

因此，我在我的 F# 代码文件中重载了以下用于乘法赋值的运算符，如下所示：

```
// Operator
static member ( *= ) ( v1:vector2, v2:vector2 ) =
   v1.x <- v1.x + v1.x * v2.x 
   v1.y <- v1.y + v1.y * v2.y 

static member ( *= ) ( v1:vector2, v2:float )  = 
   v1.x <- v1.x + v1.x * v2
   v1.y <- v1.y + v1.y * v2 

// Operator
static member ( *= ) ( f1:float, f2:float ) = 
    f1 <- f1 + f1 * f2 
```

它似乎不起作用。即使在重载运算符后，我也有以下问题：

> vector2.fs(107,36)：错误 FS0001：“浮点”类型不支持任何名为“*=”的运算符

所以运算符 *= 不适用于浮点数。它在这里失败（规范化功能）：

```
this.X <- this.X *= inv 
```

为了检查运算符的其他重载，我临时为 Vector2s 创建了测试函数：

```
member this.MultiplyAssignmentTest_1(v1:vector2,v2:vector2):vector2 = v1 *= v2

member this.MultiplyAssignmentTest_2(v1:vector2,v2:float):vector2 = v1 *= v2 
```

操作员通过了**Vector *= Vector**和**Vector *= Float**的测试， 但是当我尝试执行**Float *= Float时仍然失败**

第三个测试函数 - **float *= float**：完全失败并出现完全相同的错误。

```
member this.MultiplyAssignmentTest_3(v1:float,v2:float):float = v1 *= v2 
```

OFC 我总是可以写`this.X <- This.X + This.X *= inv`，这对于简短的公式来说很好。但是当我开始用它编写大量向量数学时，这并不是很经济——而且为了快速编码。

1.  我搞砸了什么？我真的以某种方式搞砸了我的超载，还是有一个我不知道的错误？

2.  为什么它适用于我的**Vector2 *= Float** 但不适用于**Float *= Float**？

3.  或者我自己没有注意到一个错字/大小写错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T07:58:45.357

正如约翰所说，最好避免使用可变变量。另一个问题是你想为浮点重载运算符（*=），但你没有浮点类型的定义，所以你试图在你的类的定义中这样做，并且重载将永远不会执行，因为没有参数属于类 (vector2) 的类型。

其他两个重载工作正常，因为重载中涉及的至少一个参数属于 (vector2) 类型，因此它们将解析。

您可以在全局级别定义 (=*) 但它不适用于 vector2，因此您需要在全局级别的定义中指定所有重载。

您可以尝试使用独立类进行重载的这段代码：

```
type vector2 = {x:float; y:float} with

// Operator
    static member ( *= ) ( v1:vector2, v2:vector2 ) =
       {x = v1.x + v1.x * v2.x; y = v1.y + v1.y * v2.y }

    static member ( *= ) ( v1:vector2, v2:float )  = 
       {x = v1.x + v1.x * v2; y = v1.y + v1.y * v2 }

type Overloads = Overloads with
    static member (?<-) (a:vector2, Overloads, b:vector2) = a *= b
    static member (?<-) (a:vector2, Overloads, b:float)   = a *= b
    static member (?<-) (a:float  , Overloads, b:float)   = a *  b

let inline ( *= ) f1 f2 =  f1 ? (Overloads) <- f2

// now you can add more methods for vector2 using the global definition of ( *=)
type vector2 with 
    static member Length (v1:vector2) = sqrt( v1.x ** 2.0 + v1.y ** 2.0)
    // more methods 
```

做这个技巧，你可以对浮点数和vector2使用(*=)。另请注意，我删除了可变变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:56:07.640

这也有效：

```
let inline ( *= ) (p : byref<_>) x = p <- p * x

[<Literal>]
let _zerotolerance = 1e-3

type A(x0, y0) =
    let mutable x = x0
    let mutable y = y0

    member __.Length = sqrt (x * x + y * y)

    member this.Normalize =
        if this.Length > _zerotolerance  then
            let inv:float = 1.0 / this.Length 
            &x *= inv
            &y *= inv 
```

# java - 如何将一个列表分配给另一个列表？

> ID：11150953
> 
> 赞同：4
> 
> 时间：2012-06-22T06:08:52.640
> 
> 标签：java, list, collections, arraylist

我在处理列表时遇到了一个问题，我有三个名为 UserInf、userData、userProcess 的类，我使用 UserInf 类创建了一个通用列表，我需要将该列表设置为另一个列表，该列表在类 userprocess 中，这是我的示例代码*

```
public class UserInf 
{
    private List<Data> pData;

    private String userId;

public void setData(List<Data> pData)
    {
        this.pData=pData;// Need to assign the fpData
    }
    public List<Data> getData()
    {
        return this.pData;
    }

    public void setUserId(String userId)
    {
        this.userId = userId;
    }
    public String getUserId()
    {
        return userId;
    } 
```

在我的其他类用户数据中，我使用 userInf 创建了列表，添加添加这样的值

```
List<UserInf> userInformation=new ArrayList<UserInf>();
UserInf userInfo=new UserInf();
userInfo.setUserId(userid);
  userInfo.setData(pdata);
userInformation.add(userInfo);//up to this working fine

} 
```

在我的其他类 userprocees 中，我想将 userInformation 列表分配给另一个列表，我为 userInf 类创建对象并获取属性并分配给我的新列表

```
List<UserInf> userProcessList=new ArrayList<UserInf>();
UserInf userProcess=new UserInf();
userProcess.getData();
userProcess.getUserId();
userProcessList.add(userProcess);//problem is here 
```

但这不起作用如何在java中将列表分配给另一个这样的列表

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T06:23:52.133

你可以试试这个：

```
List<Int32> copy = new List<Int32>(original); 

List<Int32> copy = original.ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:31:58.743

```
List<UserInf> userInformation=new ArrayList<UserInf>();
UserInf userInfo=new UserInf();
userInfo.setUserId(userid);
userInfo.setData(pdata);
userInformation.add(userInfo);//up to this working fine 
```

现在通过将先前的列表作为参数传递来创建新列表。

```
List<String> userProcessList=new ArrayList<String>(userInformation); 
```

# java - Java停用词库

> ID：11150955
> 
> 赞同：1
> 
> 时间：2012-06-22T06:09:06.633
> 
> 标签：java

java中是否有停用词库？

示例：编写一个 java 程序从文件中读取输入，然后对每个单词中的字符进行排序。完成此操作后，按升序对所有结果单词进行排序，最后是文件中数值的总和。

*   处理数据时删除特殊字符和停用词
*   测量执行代码所花费的时间

请提供任何停用词库来解决上述难题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T06:13:03.690

Apache Lucene 具有用于各种自然语言的各种停用词集以及用于自然语言处理的大量其他功能。此处提供英文停用词：http: [//lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/analysis/standard/StandardAnalyzer.html](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/analysis/standard/StandardAnalyzer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:13:13.320

不需要使用库：这可以通过仅使用标准包的几行代码来完成。

*   FileInputStream 读取文件

*   [扫描仪](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)轻松获取您的单词。

*   Double.parseDouble 读取数值

*   Arrays.sort（或任何其他 Collection 实用程序）对数据进行排序。

*   System.currentTimeMillis 来衡量你的操作的持续时间。

如果要过滤停用词，只需将它们放入 HashSet 并在阅读时过滤它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T06:15:14.367

为什么需要停用词库？只需将停用词存储在 a 中`File`并从中读取，如果在您的文本中找到任何此类词，请将其删除。

另一种方法是保留一个`List`停用词。检查 a`List`会相对容易。

你可能想看看[这个](http://www.koders.com/java/fid04763A14AB2F6DCEE22818DDCE301ABBF804C571.aspx)实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T06:24:23.060

请参阅 Wiki 页面上的外部链接以获取[停用词](http://en.wikipedia.org/wiki/Stop_words) Google 也有[一些实施](http://code.google.com/p/iestwitter/source/browse/trunk/src/edu/shu/nlt/twitter/analysis/ontology/tech/StopWords.java?spec=svn11&r=11)

# c# - 如何在 Crystal 报表的命令中设置查询字符串

> ID：11150956
> 
> 赞同：1
> 
> 时间：2012-06-22T06:09:09.653
> 
> 标签：c#, crystal-reports

我制作了一个水晶报告，其中我将数据库名称传递给查询字符串。我想将该数据库绑定到水晶报表命令中。那么这怎么可能，因为报告会根据用户的选择显示来自多个数据库的数据。

我制作了一个网络表单并使用水晶报表查看器。我将数据库名称发送到查询字符串中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:34:11.927

我建议您应该使用数据表作为数据源，并使用存储过程或查询来决定数据来自哪个数据库。

检查此链接会有所帮助

[http://www.codeproject.com/Articles/28899/Crystal-Report-with-DataSet-and-DataTable-using-C](http://www.codeproject.com/Articles/28899/Crystal-Report-with-DataSet-and-DataTable-using-C)

# c++ - 使用 -Wall 时如何禁用 -Wc++0x-compat？

> ID：11150958
> 
> 赞同：3
> 
> 时间：2012-06-22T06:09:22.273
> 
> 标签：c++, c++11, g++, compiler-warnings

g++ 中的`-Wall`标志包括 flag `-Wc++0x-compat`，它检查如果代码根据新的 c++11 标准编译时可能（将）出现的各种问题。但我想禁用该警告，以便当前警告不会在兼容性警告的弹幕中丢失。我没有在手册页中找到任何有用的东西，也没有在 Google 中找到任何有用的东西。似乎没有像 eg 那样的禁用标志[`-Wunused-variable`](https://stackoverflow.com/questions/2605519/how-to-disable-specific-warning-when-wall-is-enabled)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T06:13:14.017

`-Wno-c++0x-compat`​​​​​​​​​​​​​​​​​​​​​​​​​​​</p>

# python - 使用 pywin32 在 python 中模拟击键

> ID：11150966
> 
> 赞同：4
> 
> 时间：2012-06-22T06:10:13.910
> 
> 标签：python, user-interface, simulation

我希望在 Windows 7 中模拟 python 3.2 中的击键以发送到 GUI。我的电脑上安装了 python win32 模块。顺序是 alt+t+r+name+enter。什么是最好的发送方式这些对活动窗口的击键？任何示例代码都会有很大帮助。感谢您。（我见过一些名为 sendkeys 的模块，但它可以与 pywin32 一起使用吗？我不允许安装任何其他模块）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T12:29:51.923

我知道这可能并不完美。我们有一个使用 python 2.7 的测试应用程序。我们利用 Windows 脚本主机来发送密钥。我还没有时间将任何东西移植到 python 3，但这可能会让你朝着正确的方向前进。它应该非常相似。

```
import win32api
import win32com.client

shell = win32com.client.Dispatch("WScript.Shell")
shell.Run("app")
win32api.Sleep(100)
shell.AppActivate("myApp")
win32api.Sleep(100)
shell.SendKeys("%")
win32api.Sleep(500)
shell.SendKeys("t")
win32api.Sleep(500)
shell.SendKeys("r")
win32api.Sleep(500)
shell.SendKeys("name")
win32api.Sleep(500)
shell.SendKeys("{ENTER}")
win32api.Sleep(2500) 
```

以下是Windows Scripting Host的[发送键命令列表。](http://ss64.com/vb/sendkeys.html)

# 更新

这使用 pywin32。它默认安装在 Python 的[ActiveState](http://www.activestate.com/activepython)版本中（这是我正在使用的版本）。我不确定，但我不相信它默认安装在普通版本的 python 中。

# c# - 如何在 C# 中将类型转换为类

> ID：11150970
> 
> 赞同：1
> 
> 时间：2012-06-22T06:10:56.583
> 
> 标签：c#

我需要学习如何在 C# 中将类型转换为类。

就我而言，我有一个双数组对象，但它们存储在对象数组中。

```
public object Convert(object[] values, Type targetType, object parameter,
                      CultureInfo culture)
{
    if (values == null || values.Any(v => v == DependencyProperty.UnsetValue))
        return false;
    var typeOfArray = values[0].GetType();
    var firstItem = (double)values[0];
    return values.Skip(1).Any(item => (double)item == firstItem);
} 
```

我想为任何类型制作这个通用实现，但 equals(method and operator) 不起作用。但是，如果我将类型转换为类，我想我可以做我想做的事。

但是我想学习一些想法，我应该如何做这个操作或者我如何将类型对象转换为类来使用它的转换操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T06:19:57.707

> 我想为任何类型制作这个通用实现，但 equals(method and operator) 不起作用。

三个选项；

1：使用`object.Equals(x,y)`方法（这里使用虚`Equals(x)`方法，但避免了null-ref问题）

```
object firstItem = values[0];
return values.Skip(1).Any(item => Equals(item,firstItem)); 
```

2：使用`dynamic`，但意识到这可能会影响性能：

```
dynamic firstItem = values[0];
return values.Skip(1).Any(item => (dynamic)item == firstItem); 
```

3：使用泛型（这里`values`是类型化的，`T[]`）：

```
var comparer = EqualityComparer<T>.Default;
T firstItem = values[0];
return values.Skip(1).Any(item => comparer.Equals(item,firstItem)); 
```

泛型选项的好处是，当它*是*值类型（例如`double`）时，您可以避免装箱。

# html - 在 SVG 上显示文本

> ID：11150972
> 
> 赞同：1
> 
> 时间：2012-06-22T06:11:14.853
> 
> 标签：html, svg

我有一个非常图形化的网站，我用 svg 渲染。我遇到的问题是我需要在图像上显示一些文本，并且由于大多数浏览器不支持在元素中自动换行，因此我使用 a在 svg`<foreignObject>`中添加 a 。`<div>`

虽然这在 Firefox 中效果相对较好，但 Chrome 处理得非常糟糕。我想知道我是否应该尝试`<div>`在 html 中制作一个漂浮在框架上的 a，但我认为很难始终如一地定位这个元素。那么，有人有什么想法吗？这是我正在处理的页面的链接：http: [//okcomputerstl.com/K9_Athletic_Club/services.html](http://okcomputerstl.com/K9_Athletic_Club/services.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:34:25.020

如果您的内容需要自动流式布局，请使用 HTML，并根据需要添加 svg 边框或背景。

如果您的内容主要是图形，并且您不需要自动流布局，那么完全避免使用 foreignObject 并使用一个或多个 <text> 元素。

SVGWeb 根本不处理foreignObject（或svg 中的html）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:22:46.063

查看[RaphaelJS](http://raphaeljs.com/)。

1.  它本质上是一个用于高级 SVG 的跨浏览器框架。
2.  它有很好的文档和支持（sencha）
3.  它在 2.1 版本中逐渐成熟
4.  这是免费的。

这是一个文本[示例](http://raphaeljs.com/text-rotation.html)。根据我的经验，它的排版效果很好。

# c++ - glTexImage2D 在 OpenGL 3 及更高版本的 GLUT/FreeType 示例中失败

> ID：11150983
> 
> 赞同：2
> 
> 时间：2012-06-22T06:13:08.467
> 
> 标签：c++, opengl, freetype, glteximage2d

我正在使用此处找到的示例：[http ://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Text_Rendering_01](http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Text_Rendering_01)

问题是，当我指定版本高于 3 的 OpenGL 上下文时，即：

```
glutInitContextVersion (3, 2); 
```

调用 glTexImage2D 会导致 GL_INVALID_ENUM（由 GLIntercept 报告）错误，并且示例的输出为空白。据我从 OpenGL 3.3 参考资料中可以看出，只有当 type 不是有效的类型常量或 target 是无效的目标时才会发生这种情况。

这是违规行：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_ALPHA, g->bitmap.width, g->bitmap.rows, 0, GL_ALPHA, GL_UNSIGNED_BYTE, g->bitmap.buffer); 
```

另外，我尝试修改示例以调整位图大小，使其尺寸最接近 2 的幂，如 NeHe 教程（[http://nehe.gamedev.net/tutorial/freetype_fonts_in_opengl/24001/](http://nehe.gamedev.net/tutorial/freetype_fonts_in_opengl/24001/)），但我仍然得到同样的错误。

我也尝试过使用 GLFW 实现示例并遇到同样的问题。

我在示例中使用了不同的着色器加载代码，但着色器编译/链接都很好，如果我没有指定现代 OpenGL 版本，该示例仍然有效。

如果它有助于我的环境是：Windows 7 64 位，Visual Studio 2010
AMD HD6950 图形和 Catalyst 12.3 驱动程序。

软件库是：
FreeGLUT 2.8.0
GLEW 1.7.0
FreeType 2.4.9
glm-0.9.3.0

* * *

作为参考，这里是 gliLog.txt - 我省略了日志末尾的大部分内容，因为它一遍又一遍地重复出现相同的错误。

```
GL Intercept Log. Version : 0.5    Compile Date: Dec  3 2005    Run on: Fri Jun 22 15:42:05 2012

===================================================
Diagnostic: Unknown function wglCreateContextAttribsARB being logged.
GL ERROR - Function wglGetPixelFormat(0x200110ef) generated error GL_INVALID_ENUM
GL ERROR - Function glGetString(GL_VERSION) generated error GL_INVALID_ENUM
GL ERROR - Function glGetString(GL_EXTENSIONS) generated error GL_INVALID_ENUM
...
InterceptShaderGLSL::CreateObjectPost - Unknown object type 0x8dd9
InterceptShaderGLSL::DeleteObjectPost - Unable to find shader ID 2
GL ERROR - Function glTexImage2D(GL_TEXTURE_2D,0,GL_ALPHA,27,35,0,GL_ALPHA,GL_UNSIGNED_BYTE,0x73ab670) generated error 0x0500
ImageSaveManager::Save2DImage - invalid width/height on image
InterceptImage::SaveTextureImage - Error saving image 1
GL ERROR - Function glDrawArrays(GL_TRIANGLE_STRIP,0,4) generated error 0x0502
GL ERROR - Function glTexImage2D(GL_TEXTURE_2D,0,GL_ALPHA,20,35,0,GL_ALPHA,GL_UNSIGNED_BYTE,0x73ac300) generated error 0x0500
ImageSaveManager::Save2DImage - invalid width/height on image
InterceptImage::SaveTextureImage - Error saving image 0
GL ERROR - Function glDrawArrays(GL_TRIANGLE_STRIP,0,4) generated error 0x0502
GL ERROR - Function glTexImage2D(GL_TEXTURE_2D,0,GL_ALPHA,23,28,0,GL_ALPHA,GL_UNSIGNED_BYTE,0x73ac580) generated error 0x0500
ImageSaveManager::Save2DImage - invalid width/height on image
InterceptImage::SaveTextureImage - Error saving image 0 
```

这是示例代码

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <GL/glew.h>
#include <GL/freeglut.h>
/* Using GLM for our transformation matrix */
#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>
#include <glm/gtc/type_ptr.hpp>
/* Using FreeType 2 for rendering fonts */
#include <ft2build.h>
#include FT_FREETYPE_H
#include "shader_utils.h"

#pragma comment(lib, "opengl32.lib")
#pragma comment(lib, "glew32.lib")
#pragma comment(lib, "freeglut.lib")
#pragma comment(lib, "freetypeD.lib")

GLuint program;
GLint attribute_coord;
GLint uniform_tex;
GLint uniform_color;

struct point {
    GLfloat x;
    GLfloat y;
    GLfloat s;
    GLfloat t;
};

GLuint vbo;

FT_Library ft;
FT_Face face;

const char *fontfilename;

int init_resources()
{

    /* Initialize the FreeType2 library */
    if(FT_Init_FreeType(&ft)) {
        fprintf(stderr, "Could not init freetype library\n");
        return 0;
    }

    /* Load a font */
    if(FT_New_Face(ft, fontfilename, 0, &face)) {
        fprintf(stderr, "Could not open font %s\n", fontfilename);
        return 0;
    }

    /* Compile and link the shader program */
    GLint link_ok = GL_FALSE;

    program = text::LoadShader("text.v.glsl", NULL, "text.f.glsl");

    const char* attribute_name;
    attribute_name = "coord";
    attribute_coord = glGetAttribLocation(program, attribute_name);
    if (attribute_coord == -1) {
        fprintf(stderr, "Could not bind attribute %s\n", attribute_name);
        return 0;
    }

    const char* uniform_name;
    uniform_name = "tex";
    uniform_tex = glGetUniformLocation(program, uniform_name);
    if (uniform_tex == -1) {
        fprintf(stderr, "Could not bind uniform %s\n", uniform_name);
        return 0;
    }

    uniform_name = "color";
    uniform_color = glGetUniformLocation(program, uniform_name);
    if (uniform_color == -1) {
        fprintf(stderr, "Could not bind uniform %s\n", uniform_name);
        return 0;
    }

    // Create the vertex buffer object
    glGenBuffers(1, &vbo);

    return 1;
}

/**
    * Render text using the currently loaded font and currently set font size.
    * Rendering starts at coordinates (x, y), z is always 0.
    * The pixel coordinates that the FreeType2 library uses are scaled by (sx, sy).
    */
void render_text(const char *text, float x, float y, float sx, float sy) {
    const char *p;
    FT_GlyphSlot g = face->glyph;

    /* Create a texture that will be used to hold one "glyph" */
    GLuint tex;
    glActiveTexture(GL_TEXTURE0);
    glGenTextures(1, &tex);
    glBindTexture(GL_TEXTURE_2D, tex);
    glUniform1i(uniform_tex, 0);

    /* We require 1 byte alignment when uploading texture data */
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

    /* Clamping to edges is important to prevent artifacts when scaling */
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    /* Linear filtering usually looks best for text */
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    /* Set up the VBO for our vertex data */
    glEnableVertexAttribArray(attribute_coord);
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    glVertexAttribPointer(attribute_coord, 4, GL_FLOAT, GL_FALSE, 0, 0);

    /* Loop through all characters */
    for(p = text; *p; p++) {
        /* Try to load and render the character */
        if(FT_Load_Char(face, *p, FT_LOAD_RENDER))
            continue;

        /* Upload the "bitmap", which contains an 8-bit grayscale image, as an alpha texture */
        glTexImage2D(GL_TEXTURE_2D, 0, GL_ALPHA, g->bitmap.width, g->bitmap.rows, 0, GL_ALPHA, GL_UNSIGNED_BYTE, g->bitmap.buffer);

        /* Calculate the vertex and texture coordinates */
        float x2 = x + g->bitmap_left * sx;
        float y2 = -y - g->bitmap_top * sy;
        float w = g->bitmap.width * sx;
        float h = g->bitmap.rows * sy;

        point box[4] = {
            {x2,     -y2    , 0, 0},
            {x2 + w, -y2    , 1, 0},
            {x2,     -y2 - h, 0, 1},
            {x2 + w, -y2 - h, 1, 1},
        };

        /* Draw the character on the screen */
        glBufferData(GL_ARRAY_BUFFER, sizeof box, box, GL_DYNAMIC_DRAW);
        glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

        /* Advance the cursor to the start of the next character */
        x += (g->advance.x >> 6) * sx;
        y += (g->advance.y >> 6) * sy;
    }

    glDisableVertexAttribArray(attribute_coord);
    glDeleteTextures(1, &tex);
}

void display()
{
    float sx = 2.0 / glutGet(GLUT_WINDOW_WIDTH);
    float sy = 2.0 / glutGet(GLUT_WINDOW_HEIGHT);

    glUseProgram(program);

    /* White background */
    glClearColor(1, 1, 1, 1);
    glClear(GL_COLOR_BUFFER_BIT);

    /* Enable blending, necessary for our alpha texture */
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    GLfloat black[4] = {0, 0, 0, 1};
    GLfloat red[4] = {1, 0, 0, 1};
    GLfloat transparent_green[4] = {0, 1, 0, 0.5};

    /* Set font size to 48 pixels, color to black */
    FT_Set_Pixel_Sizes(face, 0, 48);
    glUniform4fv(uniform_color, 1, black);

    /* Effects of alignment */
    render_text("The Quick Brown Fox Jumps Over The Lazy Dog",          -1 + 8 * sx,   1 - 50 * sy,    sx, sy);
    render_text("The Misaligned Fox Jumps Over The Lazy Dog",           -1 + 8.5 * sx, 1 - 100.5 * sy, sx, sy);

    /* Scaling the texture versus changing the font size */
    render_text("The Small Texture Scaled Fox Jumps Over The Lazy Dog", -1 + 8 * sx,   1 - 175 * sy,   sx * 0.5, sy * 0.5);
    FT_Set_Pixel_Sizes(face, 0, 24);
    render_text("The Small Font Sized Fox Jumps Over The Lazy Dog",     -1 + 8 * sx,   1 - 200 * sy,   sx, sy);
    FT_Set_Pixel_Sizes(face, 0, 48);
    render_text("The Tiny Texture Scaled Fox Jumps Over The Lazy Dog",  -1 + 8 * sx,   1 - 235 * sy,   sx * 0.25, sy * 0.25);
    FT_Set_Pixel_Sizes(face, 0, 12);
    render_text("The Tiny Font Sized Fox Jumps Over The Lazy Dog",      -1 + 8 * sx,   1 - 250 * sy,   sx, sy);
    FT_Set_Pixel_Sizes(face, 0, 48);

    /* Colors and transparency */
    render_text("The Solid Black Fox Jumps Over The Lazy Dog",          -1 + 8 * sx,   1 - 430 * sy,   sx, sy);

    glUniform4fv(uniform_color, 1, red);
    render_text("The Solid Red Fox Jumps Over The Lazy Dog",            -1 + 8 * sx,   1 - 330 * sy,   sx, sy);
    render_text("The Solid Red Fox Jumps Over The Lazy Dog",            -1 + 28 * sx,  1 - 450 * sy,   sx, sy);

    glUniform4fv(uniform_color, 1, transparent_green);
    render_text("The Transparent Green Fox Jumps Over The Lazy Dog",    -1 + 8 * sx,   1 - 380 * sy,   sx, sy);
    render_text("The Transparent Green Fox Jumps Over The Lazy Dog",    -1 + 18 * sx,  1 - 440 * sy,   sx, sy);

    glutSwapBuffers();
}

void free_resources()
{
    glDeleteProgram(program);
}

int main(int argc, char* argv[]) {
    glutInitContextVersion (3, 2);
    glutInitContextFlags (GLUT_FORWARD_COMPATIBLE | GLUT_DEBUG);
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA|GLUT_ALPHA|GLUT_DOUBLE);
    glutInitWindowSize(640, 480);
    glutCreateWindow("Basic Text");

    if(argc > 1)
        fontfilename = argv[1];
    else
        fontfilename = "FreeSans.ttf";

    GLenum glew_status = glewInit();
    if (GLEW_OK != glew_status) {
        fprintf(stderr, "Error: %s\n", glewGetErrorString(glew_status));
        return 1;
    }

    if (!GLEW_VERSION_2_0) {
        fprintf(stderr, "No support for OpenGL 2.0 found\n");
        return 1;
    }
    if (init_resources()) {
        glutDisplayFunc(display);
        glutMainLoop();
    }

    free_resources();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T06:29:06.087

`GL_ALPHA`在 GL 3.2 核心中[不是](http://www.opengl.org/wiki/GL_Error_Codes)有效的[图像格式，因此](http://www.opengl.org/wiki/Image_Format)[错误](http://www.opengl.org/wiki/GL_Error_Codes). 如果您想要单通道图像格式，则必须使用有效的单通道图像格式。即，一些来自位深度。我会建议。[`GL_INVALID_ENUM`](http://www.opengl.org/wiki/GL_Error_Codes)`GL_RED``GL_R8`

这也意味着[像素传输格式](http://www.opengl.org/wiki/Pixel_Transfer#Pixel_format)（倒数第三个参数）也必须是`GL_RED`.

请注意，当您使用兼容性配置文件时，这些教程仅适用于 3.2+。它们不向前兼容，因为它们必须与 GL ES 兼容。

# php - IMAP：通过 php 更改电子邮件密码

> ID：11150988
> 
> 赞同：1
> 
> 时间：2012-06-22T06:13:53.757
> 
> 标签：php, imap, change-password

如何使用 php.ini 更改邮件帐户的密码。我正在使用 IMAP 功能。

IMAP 文档： http: [//php.net/manual/en/book.imap.php](http://php.net/manual/en/book.imap.php)

注意：无法访问 cpanel API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:22:36.793

如果您无权访问 cPanel API，那么您就更不可能拥有对进行更改所需的各种文件的 root 访问权限。

更改密码不是 IMAP、POP 或 SMTP 的功能 - 这是服务器配置问题，因此您需要操作服务器配置。几个主机提供 API（例如 cPanel / Hostgator），但您已经排除了这一点，所以他唯一的其他选择是“exec”，我不会像您那样使用 cPanel、Plesk 或类似的 bargepole还需要对存储配置的数据库进行操作。哎呀，如果你有root访问权限。

编辑：多一点研究，我发现了这个：[http](http://trac.roundcube.net/browser/github/plugins/password/password.php) ://trac.roundcube.net/browser/github/plugins/password/password.php支持多个后端。但是 cPanel 选项使用 cPanel API；所以还是没有运气！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-20T21:47:34.490

您可以尝试的是[mailpw_change](https://github.com/dirkboye/mailpw_change)。它不是真正的 PHP，而是一个简单的 HTML UI，带有一个在下面调用的 Python 脚本（您可以根据自己的需要进行调整，因为它非常简单）。

# html - 两个 div：自动高度和 100%

> ID：11150989
> 
> 赞同：0
> 
> 时间：2012-06-22T06:14:10.297
> 
> 标签：html, css

我有身高100％的身体。还有两个子div。是否可以制作：

1.  第一个 div 高度等于内容高度
2.  第二个 div 高度等于所有其他可用空间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:18:04.397

一旦 dom 准备好，你可以用 jQuery 来做到这一点

```
$(document).ready(function(){
    $('#second').css({
        'height': ($('body').height() - $('#first').height()) + 'px'
    });
}); 
```

# sql - 在设计视图中添加新列失败

> ID：11150990
> 
> 赞同：0
> 
> 时间：2012-06-22T06:14:12.560
> 
> 标签：sql, sql-server-2008

我有一个数据库表。该表有一个数据（该表中已有数据）。我想向数据库中添加新的列。我在使用设计视图时尝试过，但不能。有什么办法可以做到。需要更改列名并特别添加新列。没有数据丢失。

数据库 - SQL SERVER 2008 R2

我试图添加名称字段，那是 NULL

![图像](../Images/899382d7ede696d0cdb32f5c6fba4d72.png)

当我去保存它时，我得到了这个错误

![错误](../Images/468b984132f80e045f23499f9abd4993.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:54:57.617

正如警报消息所述，Sql Management Studio 中有一个选项可以禁用此安全机制。

工具 --> 选项 --> 设计器 --> 表和数据库设计器取消选中“防止保存需要重新创建表的更改”。

您当然可以始终使用 ALTER TABLE ADD COLUMN

# facebook-graph-api - 如何将 facebook 与黑莓应用程序集成

> ID：11150992
> 
> 赞同：-2
> 
> 时间：2012-06-22T06:14:44.783
> 
> 标签：facebook-graph-api, blackberry, twitter

这是我第一次尝试将 facebook 集成到我的应用程序中。

（我也想整合推特）。

谁能告诉我将 facebook 与 BB 应用程序集成的步骤。

我有 app ID 和 Secrete ID。我不知道如何走得更远。

请分享代码片段或链接或与 facebook/twitter 集成相关的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:26:05.507

从此[链接下载 jar 文件](http://sourceforge.net/projects/facebook-bb-sdk/)

```
String NEXT_URL = "http://www.facebook.com/connect/login_success.html";
String APPLICATION_ID = "xxxxxxxxxxxx";
String APPLICATION_SECRET = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
String[] PERMISSIONS = Facebook.Permissions.ALL_PERMISSIONS;          

ApplicationSettings as = new ApplicationSettings(NEXT_URL, APPLICATION_ID, APPLICATION_SECRET, PERMISSIONS);
Facebook fb = Facebook.getInstance(as);

try{
 User user = fb.getCurrentUser();
 String result = user.publishStatus("Hello world!");
 if ((result != null) && !result.trim().equals("")) {
    Dialog.inform("Publish Success.");
 } else {
    Dialog.inform("Publish Failed.");
 }

}catch(FacebookException fe){
  fe.printStackTrace();
} 
```

# ios - 只能点击 UITableView 中的一项

> ID：11150993
> 
> 赞同：2
> 
> 时间：2012-06-22T06:14:47.217
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, listview

所以我有一个`UITableView`列出数据的子类。我只需要选择一个单元格。

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
// rows in section 0 should not be selectable
    UITableViewCell *cell = (UITableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
if (indexPath.row == 3) {
    cell.userInteractionEnabled = YES;
    cell.selectionStyle = UITableViewCellSelectionStyleGray;
    NSLog(@"Hey whats up, address");
    return indexPath;
}
else {
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
}
   return nil;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

[tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

到目前为止，我执行此操作的代码有效，但仅在单击单元格至少一次之后。将它放在 didSelectCell 中，如果按住 1-2 秒，则可以选择单元格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T06:22:10.053

你应该在`cellForRowAtIndexPath`. 像这样：

```
-(UITableViewCell*)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

// your code
if(indexPath.row != 3)
{
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
{

} 
```

然后在`didSelectRowAtIndexPath`：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
   if(indexPath.row == 3)
    {
        //do your stuff
    {

} 
```

# google-app-engine - 在 Google App 引擎中，我们可以在 60 秒内处理多少数据？

> ID：11150996
> 
> 赞同：1
> 
> 时间：2012-06-22T06:15:13.553
> 
> 标签：google-app-engine

我正在尝试从远程服务器获取大量数据，为此我从 GAE 发送请求，作为以 SOAP 格式 XML 获取大量数据的响应，我想知道我们可以接收多少数据在 60 秒内使用 Google App 引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:55:10.627

响应大小应小于[32MB 且在 60 秒内](https://developers.google.com/appengine/docs/python/urlfetch/overview#Quotas_and_Limits)。不要忘记，如果您要达到这些限制中的任何一个，您的应用程序将引发超时或其他事情，这是不好的。

您很可能应该使用[任务队列 API](https://developers.google.com/appengine/docs/python/taskqueue/)或[延迟库](https://developers.google.com/appengine/articles/deferred)在后台运行这些任务，并确保用户在超时之前不会等待 60 秒。