# StackOverflow 问答 11290000-11290999

# python - 用 python 解析非有序 HTML 页面的最佳方法是什么？

> ID：11290003
> 
> 赞同：1
> 
> 时间：2012-07-02T08:18:39.383
> 
> 标签：python, parsing, html-parsing, web-crawler, beautifulsoup

我正在尝试使用 BeautifulSoup 解析以下 HTML 页面（我将解析大量页面）。

我需要保存每个页面中的所有字段，但它们可以动态更改（在不同页面上）。

这是一个页面示例 -[第 1](http://patft.uspto.gov/netacgi/nph-Parser?Sect2=PTO1&Sect2=HITOFF&p=1&u=/netahtml/PTO/search-bool.html&r=1&f=G&l=50&d=PALL&RefSrch=yes&Query=PN/7630027) 页和具有不同字段顺序的页面 -[第 2 页](http://patft.uspto.gov/netacgi/nph-Parser?Sect2=PTO1&Sect2=HITOFF&p=1&u=/netahtml/PTO/search-bool.html&r=1&f=G&l=50&d=PALL&RefSrch=yes&Query=PN/7980050)

我编写了以下代码来解析页面。

```
import requests
from bs4 import BeautifulSoup

PTiD = 7680560

url = "http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO1&Sect2=HITOFF&d=PALL&p=1&u=/netahtml/PTO/srchnum.htm&r=1&f=G&l=50&s1=" + str(PTiD) + ".PN.&OS=PN/" + str(PTiD) + "&RS=PN/" + str(PTiD)

res = requests.get(url, prefetch = True)

raw_html = res.content

print "Parser Started.. "

bs_html = BeautifulSoup(raw_html, "lxml")

#Initialize all the Search Lists
fonts = bs_html.find_all('font')
para = bs_html.find_all('p')
bs_text = bs_html.find_all(text=True)
onlytext = [x for x in bs_text if x != '\n' and x != ' ']

#Initialize the Indexes
AppNumIndex = onlytext.index('Appl. No.:\n')
FiledIndex = onlytext.index('Filed:\n  ')
InventorsIndex = onlytext.index('Inventors: ')
AssigneeIndex = onlytext.index('Assignee:')
ClaimsIndex = onlytext.index('Claims')
DescriptionIndex = onlytext.index(' Description')
CurrentUSClassIndex = onlytext.index('Current U.S. Class:')
CurrentIntClassIndex = onlytext.index('Current International Class: ')
PrimaryExaminerIndex = onlytext.index('Primary Examiner:')
AttorneyOrAgentIndex = onlytext.index('Attorney, Agent or Firm:')
RefByIndex = onlytext.index('[Referenced By]')

#~~Title~~
for a in fonts:
        if a.has_key('size') and a['size'] == '+1':
                d_title = a.string
print "title: " + d_title

#~~Abstract~~~
d_abstract = para[0].string
print "abstract: " + d_abstract

#~~Assignee Name~~
d_assigneeName = onlytext[AssigneeIndex +1]
print "as name: " + d_assigneeName

#~~Application number~~
d_appNum = onlytext[AppNumIndex + 1]
print "ap num: " + d_appNum

#~~Application date~~
d_appDate = onlytext[FiledIndex + 1]
print "ap date: " + d_appDate

#~~ Patent Number~~
d_PatNum = onlytext[0].split(':')[1].strip()
print "patnum: " + d_PatNum

#~~Issue Date~~
d_IssueDate = onlytext[10].strip('\n')
print "issue date: " + d_IssueDate

#~~Inventors Name~~
d_InventorsName = ''
for x in range(InventorsIndex+1, AssigneeIndex, 2):
    d_InventorsName += onlytext[x]
print "inv name: " + d_InventorsName

#~~Inventors City~~
d_InventorsCity = ''

for x in range(InventorsIndex+2, AssigneeIndex, 2):
    d_InventorsCity += onlytext[x].split(',')[0].strip().strip('(')

d_InventorsCity = d_InventorsCity.strip(',').strip().strip(')')
print "inv city: " + d_InventorsCity

#~~Inventors State~~
d_InventorsState = ''
for x in range(InventorsIndex+2, AssigneeIndex, 2):
    d_InventorsState += onlytext[x].split(',')[1].strip(')').strip() + ','

d_InventorsState = d_InventorsState.strip(',').strip()
print "inv state: " + d_InventorsState

#~~ Asignee City ~~
d_AssigneeCity = onlytext[AssigneeIndex + 2].split(',')[1].strip().strip('\n').strip(')')
print "asign city: " + d_AssigneeCity

#~~ Assignee State~~
d_AssigneeState = onlytext[AssigneeIndex + 2].split(',')[0].strip('\n').strip().strip('(')
print "asign state: " + d_AssigneeState

#~~Current US Class~~
d_CurrentUSClass = ''

for x in range (CuurentUSClassIndex + 1, CurrentIntClassIndex):
    d_CurrentUSClass += onlytext[x]
print "cur us class: " + d_CurrentUSClass

#~~ Current Int Class~~
d_CurrentIntlClass = onlytext[CurrentIntClassIndex +1]
print "cur intl class: " + d_CurrentIntlClass

#~~~Primary Examiner~~~
d_PrimaryExaminer = onlytext[PrimaryExaminerIndex +1]
print "prim ex: " + d_PrimaryExaminer

#~~d_AttorneyOrAgent~~
d_AttorneyOrAgent = onlytext[AttorneyOrAgentIndex +1]
print "agent: " + d_AttorneyOrAgent

#~~ Referenced by ~~
for x in range(RefByIndex + 2, RefByIndex + 400):
    if (('Foreign' in onlytext[x]) or ('Primary' in onlytext[x])):
        break
    else:
        d_ReferencedBy += onlytext[x]
print "ref by: " + d_ReferencedBy

#~~Claims~~
d_Claims = ''

for x in range(ClaimsIndex , DescriptionIndex):
    d_Claims += onlytext[x]
print "claims: " + d_Claims 
```

我将页面中的所有文本插入到列表中（使用 BeautifulSoup 的 find_all(text=True)）。然后我尝试查找字段名称的索引，然后从该位置遍历列表并将成员保存到字符串中，直到到达下一个字段索引。

当我在几个不同的页面上尝试代码时，我注意到成员的结构正在发生变化，我在列表中找不到他们的索引。例如，我搜索“123”的索引，在某些页面上，它在列表中显示为“12”、“3”。

你能想出任何其他方法来解析通用的页面吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:22:36.503

我认为最简单的解决方案是使用 pyquery 库 [http://packages.python.org/pyquery/api.html](http://packages.python.org/pyquery/api.html)

您可以使用 jquery 选择器选择页面的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:42:04.913

如果你使用beautifulsoup，并且拥有dom `<p>123</p>`，`find_all(text=True)`你将拥有`['123']`

但是，如果你有 dom `<p>12<b>3</b></p>`，它与以前的语义相同，但是 beautifulsoup 会给你`['12','3']`

也许您可以准确地找到使您无法完成的标签`['123']`，然后首先忽略/消除该标签。

一些关于如何消除**<b>**标签的假代码

```
import re
html='<p>12<b>3</b></p>'
reExp='<[\/\!]?b[^<>]*?>'
print re.sub(reExp,'',html) 
```

对于模式，你可以使用这个：

```
import re
patterns = '<TD align=center>(?P<VALUES_TO_FIND>.*?)<\/TD>'
print re.findall(patterns, your_html) 
```

# sql - 设置 Sybase ASE 15.5 在仅使用 IPv6 的 Windows Server 2003 机器上运行

> ID：11290004
> 
> 赞同：1
> 
> 时间：2012-07-02T08:18:44.697
> 
> 标签：sql, ipv6, sap-ase

我将在 Windows Server 2003 机器上安装 Sybase ASE 15.5。此 W2K3 仅使用 IPv6。

我在那台机器上成功安装了 Sybase。我也可以通过命令查看：

```
isql -U sa -P -S SYBSERVER 
```

但我无法在**DSEDIT**实用程序（或文件 %SYABSE%\ini\ **sql.ini**）中配置 IP 以在另一台机器上远程此 Sybase 服务器

默认内容为：

```
[SYBSERVER_XP]
master=NLWNSCK,SYBSERVER,5001 
query=NLWNSCK,SYBSERVER,5001 

[SYBSERVER]
master=NLWNSCK,SYBSERVER,5000 
query=NLWNSCK,SYBSERVER,5000 
```

W2K3 IPv6 地址是：**2001:dc9::94:60**。我尝试将 sql.ini 更改为：

```
[SYBSERVER_XP]
master=TCP,2001:dc9::94:60,5001 
query=TCP,2001:dc9::94:60,5001 

[SYBSERVER]
master=TCP,2001:dc9::94:60,5000 
query=TCP,2001:dc9::94:60,5000 
```

但我无法 ping Sybase 服务器。

**我怎样才能解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:48:17.997

它似乎太旧了，您可能已经想通了。

尝试这个

> [SYBSERVER] master=tcp,ether,SYBSERVER.v6,5000 查询=tcp,ether,SYBSERVER.v6,5000

还要检查错误日志以查看 sybase 现在是否正在侦听 IPV6

# google-chrome - 我应该使用 MutationRecord.oldValue 吗？

> ID：11290007
> 
> 赞同：10
> 
> 时间：2012-07-02T08:18:50.363
> 
> 标签：google-chrome, dom, webkit, mutation-observers

我在 Windows 7 上使用最新的 Google Chrome 稳定版（19.0.1084.56 m），并首次尝试使用 Mutation 观察者。（该项目是第三方网站的用户脚本，我无权访问其服务器。）

所以碰巧[`MutationRecord`](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#interface-mutationrecord)有一个字段`oldValue`：

> `record . oldValue`
> 
> > 返回值取决于`type`. 对于“ `attributes`”，它是更改前的已更改属性的值。对于“ `characterData`”，是变更前节点的数据。对于“ `childList`”，它为空。

因此，我正在监视对的更改，`characterData`但是当我得到`MutationRecord`该字段时，该`oldValue`字段始终为空。

**如果它可以工作，是否有可能我有什么问题，或者这个功能太前沿而无法期望工作？**

在某个地方我可以找到 Google 的文档、错误报告、功能请求等，这些文档可能会声明是否已实施或何时实施？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-04-15T13:40:06.780

配置你的观察者：

```
observer.observe(container, {
    attributeOldValue : true
}); 
```

完整的 API 文档： [https ://developer.mozilla.org/pt-BR/docs/Web/API/MutationObserver](https://developer.mozilla.org/pt-BR/docs/Web/API/MutationObserver)

# php - 如何在codeigniter中上传压缩文件夹？

> ID：11290009
> 
> 赞同：2
> 
> 时间：2012-07-02T08:18:51.550
> 
> 标签：php, codeigniter, upload

我是 codeigniter 的新手，即使在 PHP 中也是如此。我想上传一个压缩文件夹，其中可能包含 CMS 模块，包括子目录。另一方面，我必须在服务器端解压缩文件夹。有没有办法完成这个任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:43:34.220

我曾经尝试上传和解压缩上传的 zip 文件（包含 XML 文件），解压缩它并在服务器端提取 XML 数据。

我使用 CodeIgniter-Unzip 库来解压上传的 zip 文件，它很容易使用。这里是源

[CodeIgniter-解压](http://getsparks.org/packages/unzip/show)

希望能帮助到你 ：）

# java - 使用 Spring Security 支持 Android 和 OpenID

> ID：11290011
> 
> 赞同：2
> 
> 时间：2012-07-02T08:18:58.183
> 
> 标签：java, android, rest, spring-security, openid

我正在尝试使用*Spring Security OpenID*将我的用户从我的 Android 应用程序验证到我的服务器，以调用 web 服务（由 Spring Security 保护）。

我`AccountManager`从 Android 中查看以获取 google 帐户（我获取电子邮件地址）。

那么，如何使用 OpenID 进行身份验证（我无法发布`j_spring_openid_security_check`，因为需要用户操作来授权访问，并且是网页......）？

或如何保护我的 REST Web 服务调用（如果无法进行 OpenID 身份验证）？

# php - 使用 SecurityServiceProvider 时总是被重定向到 /login

> ID：11290014
> 
> 赞同：1
> 
> 时间：2012-07-02T08:19:14.530
> 
> 标签：php, symfony1, silex

我对 Silex 的 SecurityServiceProvider 有一些问题。

基本上我想要的是以下结构：

**/admin/** --> 仅限于某些用户的管理页面（可以有多个页面，例如 /admin/users 和 /admin/projects）

**/admin/login** --> 访问者可以用来登录管理页面的页面

**/admin/logout** --> 访问者从管理页面注销时看到的页面

为了实现这一点，我编写了以下代码：

```
<?php 

require_once __DIR__.'/../vendor/autoload.php'; 

use Symfony\Component\HttpFoundation\Request; 
use Symfony\Component\HttpFoundation\Response; 

$app = new Silex\Application(); 
$app['debug'] = true; 

$app->register(new Silex\Provider\SecurityServiceProvider()); 
$app->register(new Silex\Provider\TwigServiceProvider(), array( 
    'twig.path' => __DIR__.'/views', 
)); 
$app->register(new Silex\Provider\UrlGeneratorServiceProvider()); 
$app->register(new Silex\Provider\SessionServiceProvider()); 

$app['security.firewalls'] = array( 
        'login' => array( 
        'pattern' => '^/admin/login$' 
    ), 
    'logout' => array( 
        'pattern' => '^/admin/logout$' 
    ), 
    'admin' => array( 
        'pattern' => '^/admin/', 
        'form' => array('login_path' => '/admin/login', 'check_path' 
=> '/admin/login_check'), 
        'users' => array( 
            'admin' => array('ROLE_ADMIN', '5FZ2Z8QIkA7UTZ4BYkoC 
+GsReLf569mSKDsfods6LYQ8t 
+a8EW9oaircfMpmaLbPBh4FOBiiFyLfuZmTSUwzZg=='), // PW is foo
        ), 
        'logout' => array('logout_path' => '/admin/logout') 
    ), 
); 

$app->get('/admin/login', function(Request $request) use ($app) { 
    return $app['twig']->render('login.html', array( 
        'error'         => $app['security.last_error']($request), 
        'last_username' => $app['session']- 
>get('_security.last_username'), 
    )); 
}); 

$app->get('/admin/logout', function(Request $request) use ($app) { 
    return $app['twig']->render('logout.html', array()); 
}); 

$app->get('/admin/', function () use ($app) { 
    return $app['twig']->render('admin.html', array()); 
}); 

$app->run(); 

?> 
```

现在，发生的情况是，当我访问页面“/admin/”时，我总是被重定向到“/login”，这很好，因为我没有经过身份验证，但它应该是“/admin”login”作为“login_path”中的参数我的配置表明...我做错了什么或者这可能是 SecurityServiceProvider 中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:31:08.157

我首先想到的是手册告诉你：

> login_path 路径必须始终定义在安全区域之外（或者如果它在安全区域中，则必须启用匿名身份验证机制）

请参阅此处： [Silex doc on security with form](http://silex.sensiolabs.org/doc/providers/security.html#securing-a-path-with-a-form)

我希望它可以帮助您解决一个基本缺陷，并且您可以继续。

# java - “私有”修饰符是否也确保 Java 中的线程安全

> ID：11290016
> 
> 赞同：0
> 
> 时间：2012-07-02T08:19:21.723
> 
> 标签：java, concurrency, synchronization, this, java.util.concurrent

阅读Brain Goetz 的[这篇](http://www.ibm.com/developerworks/java/library/j-jtp0618/index.html#ibm-pcon)关于安全构造技术的优秀文章后，我对清单 5 中给出的评论感到困惑。下面是代码片段：

```
public class Safe { 

 private Object me;
 private Set set = new HashSet();
 private Thread thread;

 public Safe() { 
 // Safe because "me" is not visible from any other thread
 me = this;

// Safe because "set" is not visible from any other thread
 set.add(this);

// Safe because MyThread won't start until construction is complete
// and the constructor doesn't publish the reference
   thread = new MyThread(this);
}

public void start() {
   thread.start();
 }

private class MyThread(Object o) {

private Object theObject;

public MyThread(Object o) { 
  this.theObject = o;
}

...
 }
} 
```

他为什么要这么说`me`？`// Safe because "me" is not visible from any other thread`. 两个线程不能同时访问实例变量`me`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:31:53.083

唯一的一点是，**在构造函数运行**时，您不会通过将其设置为私有属性来*泄漏`this`*。在构造函数完成并且调用者接收到`this`对象的引用之后，显然也是`me`引用，它可以将它发布到任何线程，因此它确实可以被任何线程访问。但这不是 Goetz 的重点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:24:16.857

`private`修饰符本身并不能确保线程安全。但是，其他线程无法访问/查看您的对象是什么。在这里，实例`Safe`被传递给 MyThread，并且没有被存储/暴露在其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:09:03.047

请注意有关此代码的以下几点：

1.  `me`是`private`
2.  没有其他公共方法间接允许访问`me`外部代码。

    这两者一起允许`me`参考的线程安全。如果该类被重新设计为具有另一个公共方法，如下所示：

`public Safe someMethodForPublicAcess(){ return me; }`

然后线程安全就消失了，即使成员`me`是`private`. 发生这种情况是因为外部代码现在可以调用这个公共方法并传递`me`给多个线程，这些线程可以做任何他们喜欢的事情。

# c# - c#如何在代码的任何地方创建BaloonTip Accessible

> ID：11290017
> 
> 赞同：0
> 
> 时间：2012-07-02T08:19:22.597
> 
> 标签：c#, .net-2.0

**编辑**

我将改变我的问题 - 如何制作一个可以从代码中的任何位置访问的 baloonTip。不管是什么类或加载的dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:14:57.973

我找到了解决方案。最简单的方法是通过构造函数发送一个trayicon 变量的指针。在所有班级。发送指针需要在战争类型之前添加 ref。例如 MyClass(ref Notifyicon try){...} 并创建 wariable 将是
new MyClass(ref trayicon);

# android - Android 手机锁屏导致后续的几个 onPause/onResume 事件

> ID：11290018
> 
> 赞同：9
> 
> 时间：2012-07-02T08:19:37.227
> 
> 标签：android, onresume, onpause

我在 Android 上开发时遇到了这种有点奇怪的行为，在我用谷歌搜索时，我能找到的唯一答案是这是设计使然，我不应该关心它。

我的应用程序在活动时获取位置数据，我正要实现一种方法来节省电池电量，方法是在调用 onPause 事件时停止位置更新，然后在调用 onResume 事件时恢复获取。

在调试时，我注意到锁定手机时出现了这种奇怪的行为，onPause->onResume 被依次调用了三次或更多次，然后以 onStop 事件结束。我能找到的唯一答案是：这就是android的工作方式，没关系。

我想我很好奇，有人可以解释我需要多次停止和恢复一个简单的子活动吗？这不会消耗更多的电池，尤其是对于在 onResume 中有严重代码的大型活动？有没有办法防止这种情况发生？如果知道至少我在这些事件中的代码不会被调用，我会很高兴，也许有一个 if{} 块可以防止不必要的 CPU 周期。

非常感谢任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:02:42.917

您必须注册广播接收器以处理“屏幕超时”和“屏幕锁定”事件。

您只需停止数据检索。示例代码：

```
public class ScreenReceiver extends BroadcastReceiver {     

        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
                //screen locked, do here 
            } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
                //screen unlocked, do something here
            }
        }

} 
```

您需要将此 ScreenReceiver 类的广播接收器注册到 androidMenifest.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T04:10:51.880

我最近遇到了同样的问题，并且能够通过对清单文件中的活动进行配置更改来阻止它的发生。我相信当用户锁定设备时，可能会发生一些事情：方向会改变，屏幕大小会改变（如果导航栏或通知栏消失）等等，这会导致 Android 重建所有活动和片段。我最终在 Config 更改中选择了很多选项，并且在 onPause 之后停止调用 onResume。

# cordova - phonegap：使用android sdk 2.2时，jquery mobile的listview滚动缓慢

> ID：11290020
> 
> 赞同：0
> 
> 时间：2012-07-02T08:19:40.363
> 
> 标签：cordova

我在 jquery mobile 上使用 phonegap。使用android sdk 2.2（API Level 8）时，jquery mobile的listview滚动很慢。但是当我使用 android sdk 4.0 (API level 14) 时它非常流畅

我在我的 Galaxy Nexus 上运行它，而不是在虚拟设备上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T21:35:07.490

如果您想让您的应用程序在 Android < 4.0 和 Android 4.0+ 上都可用，那么您应该编译 2 个不同的应用程序。如果为 Android < 4.0 编译，浏览器将在 Android 4.0+ 上表现不佳。

# excel - 是否可以使用“xlsread”将 Excel 工作表的名称加载到 MATLAB 中？

> ID：11290022
> 
> 赞同：5
> 
> 时间：2012-07-02T08:19:43.967
> 
> 标签：excel, matlab, file-io

我有 10 个 Excel 文件，每个文件有 50 张，每张都有不同的名称。我想将所有工作表的名称加载到 MATLAB 中，将它们放入单元格字符串中。是否可以使用“xlsread”命令来执行此操作？或者还有其他方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T08:48:26.953

您可以使用[`xlsfinfo`](http://www.mathworks.de/help/techdoc/ref/xlsfinfo.html)获取 Excel 文件中的工作表名称列表。

```
[status,sheets] = xlsfinfo(filename) 
```

变量 sheet 将包含一个带有工作表名称的元胞数组。

# php - 如何在if else语句php中设置多个条件

> ID：11290025
> 
> 赞同：0
> 
> 时间：2012-07-02T08:20:03.183
> 
> 标签：php, if-statement

```
<html>
<head>
<title> GRADE DETAILS </title>
</head>
<body>

<?php
$myname=$_GET ['myname'];
$mygrade=$_GET ['mygrade'];

if(($myname=='@' or $myname=='!'))
{
    echo "Special character not allowed.";
}

else if($myname==" ")
{
    echo "Please enter your name";

}

else
{
    switch($mygrade)
{
case "";
echo "you did not enter grade";
break;

case A;
echo "Increment 30% of basic salary";
break;

case B;
echo "Increment 10% of basic salary";
break;

default;
echo"Wrong Grade";
break;
}
}

?>
</body>
</html> 
```

我想在我的 if else 语句中设置多个条件..我尝试了很多方法，但仍然没有工作...我希望有人可以帮助我..与我的 Switch Case 无关，但问题仅在 IF ELSE ..请帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:23:59.197

基本上没问题，但是你需要将“CASE”语句后面的分号替换为冒号，然后将文本字符串（A，B等）放在引号中：

```
switch($mygrade) {
    case "":
        echo "you did not enter grade";
    break;

    case "A":
        echo "Increment 30% of basic salary";
    break;

    case "B":
        echo "Increment 10% of basic salary";
    break;

    default:
        echo "Wrong Grade";
    break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:26:11.577

您缺少一些引号，`A`并被`B`解释为常量

```
<?php
$myname= trim($_GET ['myname']);
$mygrade= trim($_GET ['mygrade']);

if(strstr('@',$myname) or strstr('!',$myname) )
{
    echo "Special character not allowed.";
}

else if(empty($myname))
{
    echo "Please enter your name";

}

else
{
    switch($mygrade)
{
case "":
echo "you did not enter grade";
break;

case 'A':
echo "Increment 30% of basic salary";
break;

case 'B':
echo "Increment 10% of basic salary";
break;

default:
echo"Wrong Grade";
break;
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T08:31:16.833

这是一个普通的PHP吗？我在下面有我的答案。但是，我不建议您继续这样做。您可以搜索其他可以帮助您进行验证的类或框架。这也可能易于注射。

回答你的问题：（基本上）

```
$invalid = array("@", "!");
if (in_array($myname, $invalid)) {
    echo 'Special character not allowed.';
}

if (empty($myname)) {
    echo "Please enter your name";
}

if (!empty($mygrade)) {
    switch($mygrade) {
       case "":
        echo "you did not enter grade";
        break;

    case "A":
        echo "Increment 30% of basic salary";
        break;

    case "B":
        echo "Increment 10% of basic salary";
        break;

    default:
        echo "Wrong Grade";
        break;
    }
}
else {
    echo 'Grade was empty';
} 
```

# eclipse - HTTP 状态 404 - 在带有 Tomcat 的 Eclipse 上

> ID：11290029
> 
> 赞同：11
> 
> 时间：2012-07-02T08:20:11.867
> 
> 标签：eclipse, servlets, tomcat7

我正在尝试使用 Eclipse 在我的本地 Tomcat 上运行一个 servlet。

**但我不断收到这个错误，不知道该怎么做。**

我实际上在这里记录了它：[http ://www.screenr.com/ZyD8](http://www.screenr.com/ZyD8)

非常感谢！

我也将 web.xml 更改为：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID"
    version="3.0"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" >

    <display-name>
TEST3
    </display-name>

    <welcome-file-list>

        <welcome-file>
TEST3
        </welcome-file>
    </welcome-file-list>

    <servlet>

        <servlet-name>
helloServlet
        </servlet-name>

        <servlet-class>
HelloServlet
        </servlet-class>
    </servlet>

    <servlet-mapping>

        <servlet-name>
helloServlet
        </servlet-name>

        <url-pattern>
/hello
        </url-pattern>
    </servlet-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-02T08:33:12.157

我看过你的链接。

当您运行任何动态 Web 项目时。默认情况下`Servlet`，容器（在本例中为 Tomcat）搜索欢迎列表中指定的文件。检查你的`web.xml`，它应该包含类似的条目

```
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list> 
```

您尚未从上述任何列表中创建文件。所以，跑步

`http://localhost:8080/TEST2`会给你404错误。

而是 run :`http://localhost:8080/TEST2/HelloSerlvet`将调用您创建的 servlet。

编辑：检查 Eclipse 的项目菜单并验证“自动构建”是否已选中并且 Servlet 容器正在运行（`http://localhost:8080`）。

编辑 2：右键单击项目 --> 属性，选择 Java 构建路径 --> 源选项卡 --> 更改默认输出文件夹。`/WEB-INF/classes` 在下创建`/WebContent`（eclipse中默认）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-09T21:42:36.737

这是基于 Hardik Mishra 的回答，其中有一些亮点： 1\. 从文件资源管理器（不是来自 Eclipse），在 /WebContent 下手动创建“/WEB-INF/classes” 2\. 右键单击​​项目 --> 属性，选择Java 构建路径 --> 源选项卡 --> 将默认输出文件夹更改为您刚刚在上面创建的文件夹。3\. 转到文件资源管理器，而不是从 Eclipse，因为 Eclipse“项目资源管理器”可能有一些不显示类文件夹的过滤器。您应该会看到在此目录下编译的 .class 文件

尝试再次测试它。如果它不起作用，请重新启动 Eclipse 一次，然后它应该可以工作了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-22T09:41:47.273

我已经看到这些类型的问题已经有一段时间了，并且已经看到了多种解决方案，这些解决方案对某些人有效，而其余的人仍然面临同样的问题。

一种简单的解决方案是遍历 .java/.jsp/etc.，右键单击并选择从服务器运行选项。

我发现这个解决方案是一种简单而有效的运行方式。

路径 Java Resource->src->->example.java-->右键单击-->运行方式-->在服务器上运行。

即使在此之后，您也可能会遇到一些问题，例如端口 8005 不可用，请按照以下链接清除您当前的 Apache 设置并重新设置。

[TOMCAT - HTTP 状态 404](https://stackoverflow.com/questions/16340711/tomcat-http-status-404)

[部署错误：Tomcat启动失败，服务器8080端口已被占用](https://stackoverflow.com/questions/5310945/deployment-errorstarting-of-tomcat-failed-the-server-port-8080-is-already-in-u/5310993#5310993)

希望这个发现是有帮助的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-30T03:22:05.153

通常，当您修改 web.xml 文件时，您应该“清理”Tomcat。只需在 Eclipse 中右键单击 Tomcat 并进行清理。对项目做同样的事情。您也可以停止 Tomcat，从 Tomcat 中删除应用程序（右键单击 Tomcat 下的应用程序并删除），然后将其添加回来。重新启动 Tomcat。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-08T11:19:49.310

我将把这个问题分为两种情况：

场景 1：您尝试运行/执行 html/jsp 文件但收到此错误。

场景 2：您已成功执行 jsp/html 文件，但它没有执行下一个 servlet 文件。示例：webcontent/webapp 中有 jsp 提交表单，它正在执行，但在填写并提交表单后，您会收到此错误。

***场景一：***

1.  确保您的 jsp/html 文件位于您在创建项目时创建的 webcontent/webapp 文件夹中。

2.  检查`web.xml`文件的内容应该是这样的：

    [![在此处输入图像描述](../Images/c410e0d85652cfea717358b4486fa6b6.png)](https://i.stack.imgur.com/Q8TEb.jpg)

3.  尝试更改 tomcat 服务器版本。

**场景二：**

1.  在这个级别，您的主要罪魁祸首是 web.xml 文件，您必须在其中彻底检查 Servlet 映射或在文件级别添加 webservlet 注释。

# ios - 更改文本字段后如何移动滑块？

> ID：11290031
> 
> 赞同：1
> 
> 时间：2012-07-02T08:20:15.860
> 
> 标签：ios, xcode, slider, textfield

现在，当我移动滑块时，我的文本字段的值正在改变。我也需要向后工作，改变文本字段值，滑块移动。

我的代码：

```
- (void)sliderChanged:(UISlider *)sender {

    self.slider.valueChangedHandler = ^(id sender) {
    self.aleField.text = [NSString stringWithFormat:@"%.f", [(UISlider *)sender value]];
};

} 
```

**编辑**

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
   slider.value = [aleField.text floatValue];

    NSUInteger newLength = [aleField.text length] + [string length] - range.length;
    return (newLength > 2) ? NO : YES;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:27:06.340

创建文本字段后，添加：

```
[self.textField addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged]; 
```

然后有以下方法：

```
- (void)textFieldDidChange:(UITextField*)sender {
    //Assuming slider is a property
    slider.value = [sender.text floatValue];
} 
```

我引用[了 https://stackoverflow.com/a/7010676/391040](https://stackoverflow.com/a/7010676/391040)和[https://stackoverflow.com/a/4711136/391040](https://stackoverflow.com/a/4711136/391040)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:31:12.767

要在键入时执行此操作，请实现文本字段委托

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSCharacterSet *numberSet = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789"] invertedSet];
    NSString *filtered = [[string componentsSeparatedByCharactersInSet:numberSet] componentsJoinedByString:@""];
    BOOL basicTest = [string isEqualToString:filtered];
    if (basicTest) {
        slider.value = [aleField.text floatValue];
    }
    return basicTest;
} 
```

这也将允许您让用户只插入数字。

要将值反映到滑块：

```
slider.value = [textField.text floatValue]; 
```

# mysql - Mysql查询检查数字是否为x并计为1

> ID：11290032
> 
> 赞同：2
> 
> 时间：2012-07-02T08:20:16.557
> 
> 标签：mysql

Mysql查询问题

例如，如果是 1,2 或 5，如何计为 1

字段1 = 1 字段2= 1 字段3= 5 字段4= 2 字段5=0；字段6=6；

我需要检查这些字段中的任何一个是否为 1、2 或 5，并将它们计为 1 并忽略其余字段。

选择字段1+字段2+字段3+字段4+字段5+字段6；FROM 表 WHERE id=1; // 应该返回 4 (1+1+1+1+0+0)

这可以做到还是我必须用php来做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:22:37.580

```
SELECT field1 IN (1,2,5) + field2 IN (1,2,5) + ... 
```

但是，这在某种程度上表明设计不佳。也许如果您可以提供数据背后语义含义的更多详细信息，我们可以提出更好的替代方案？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:25:26.127

这应该有效：

```
select count(field1) + count(field2) + count(field3) + count(field4) + count(field5) + count(field6) as total
from table
where 
    field1 in(1,2,5)
    or field2 in(1,2,5)
    or field3 in(1,2,5)
    or field4 in(1,2,5)
    or field5 in(1,2,5)
    or field6 in(1,2,5) 
```

编辑：然而eggyal提出了一个很好的观点。您能否分享更多关于您的目标的信息，以便找到更好的解决方案？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T08:28:59.493

另一种选择是使用 IF 语句，如下所示：

```
SELECT IF(field1 = 1 or field1 = 2 or field1 = 5, 1, 0)+IF(field2 = 1 or field2 = 2 or field2 = 5, 1, 0)+IF(field3 = 1 or field3 = 2 or field3 = 5, 1, 0)+IF(field4 = 1 or field4 = 2 or field4 = 5, 1, 0)+IF(field5 = 1 or field5 = 2 or field5 = 5, 1, 0)+IF(field6 = 1 or field6 = 2 or field6 = 5, 1, 0) FROM table 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T08:35:18.833

您可以使用搜索`CASE`语句，但正如@eggyal 所建议的那样，您的架构中可能存在设计缺陷。解决这个问题可以很好地简化您的要求。

```
SELECT  CASE WHEN Field1 IN (1, 2, 5) THEN 1 ELSE 0 END
        + CASE WHEN Field2 IN (1, 2, 5) THEN 1 ELSE 0 END
        + CASE WHEN Field3 IN (1, 2, 5) THEN 1 ELSE 0 END
        + CASE WHEN Field4 IN (1, 2, 5) THEN 1 ELSE 0 END
        + CASE WHEN Field5 IN (1, 2, 5) THEN 1 ELSE 0 END
        + CASE WHEN Field6 IN (1, 2, 5) THEN 1 ELSE 0 END
FROM    Table 
```

# java - 谷歌自定义搜索 API，如何使用 Java 以编程方式遍历谷歌结果页面？

> ID：11290033
> 
> 赞同：1
> 
> 时间：2012-07-02T08:20:20.307
> 
> 标签：java, json, parsing, google-search-api, google-custom-search

以下代码取自：[Java code for using google custom search API](https://stackoverflow.com/questions/10257276/java-code-for-using-google-custom-search-api)。它可以正常提取谷歌结果页面中第一页的前 10 个结果。

```
public static void main(String[] args) throws Exception {      
String key="YOUR KEY";     
String qry="Android";     
URL url = new URL("https://www.googleapis.com/customsearch/v1?
key="+key+ "&cx=013036536707430787589:_pqjad5hr1a&q="+ qry + "&alt=json");     

HttpURLConnection conn = (HttpURLConnection) url.openConnection();    
conn.setRequestMethod("GET");     
conn.setRequestProperty("Accept", "application/json");     
BufferedReader br = 
new BufferedReader(new InputStreamReader( (conn.getInputStream())));      
String output;     
System.out.println("Output from Server .... \n");     
while ((output = br.readLine()) != null) 
 {          
    if(output.contains("\"link\": \""))
    {                             
     String link=output.substring(output.indexOf("\"link\": \"")+
     ("\"link\": \"").length(), output.indexOf("\","));             
     System.out.println(link);       //Will print the google search links         
    }          
 }     
conn.disconnect();                               
} 
```

我试图弄清楚如何遍历所有结果页面？通过在[https://developers.google.com/custom-search/v1/using_rest](https://developers.google.com/custom-search/v1/using_rest)中搜索，我发现`start`查询中的参数引用了索引，很明显，通过在循环中更改此值可以达到目的，但会花费我对每个页面的查询（不应该是这种情况，因为它不是新查询，它是相同的查询，但只是新页面）。另外，我发现谷歌已经提到如果查询成功，响应数据包含`totalResults`总结果的值，但他们提到它是估计数。那么，如何才能从这项服务中受益并获得实际的结果数或页面数以便遍历它们呢？我为每个页面发出新查询没有任何意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:27:13.077

1.  您应该使用 JSON 解析器从结果中提取数据，而不是自己解析结果。

2.  Google 不会针对单个查询一次返回所有结果。如果搜索 Java，大约有 214,000,000 个结果？将它们全部归还会持续几天，而且无论如何您都无法对它们做任何有意义的事情。因此，如果有多个页面，您必须为每个页面执行一个新查询，就像使用浏览器进行 Google 搜索一样。大多数时候，有趣的结果在第一页或第二页。返还更多会浪费资源。

3.  谷歌不知道结果的确切数量。它返回一个估计值。计算结果的确切数量太难了。知道有 214,000,001 个结果而不是 214,000,002 个结果并没有任何价值，而且确切的数字无论如何都会立即过时。

# php - Jomsocial 获取当前的个人资料数据

> ID：11290034
> 
> 赞同：1
> 
> 时间：2012-07-02T08:20:21.717
> 
> 标签：php, api, object

我正在尝试在 PHP 中为 jomsocial 开发一个自定义模块。

如何检索有关用户正在可视化的当前配置文件的信息？（不是关于 looged 用户本身的信息，而是关于显示的个人资料！）获取用户名和 ID 就足够了，但是有谁知道获取信息的方法和多少信息？我一直在搜索 Jomsocial API，但没有运气;(

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T15:33:11.397

```
// Return user with the given id
$user =& CFactory::getUser($userId);

// Return current logged-in user. If no one is logged-in, it will
// return a visitor object
$user =& CFactory::getUser(); 
```

从自定义字段中检索任何用户特定的信息

```
$user =& CFactory::getUser($userId);
$data = $user->getInfo('FIELD_CODE'); 
```

这很简单。如果您想查看全部内容，只需执行 var_dump($user) 或 print_r($user);

例如，如果您想获取用户的性别，您可以使用

```
$gender = $user->getInfo('FIELD_GENDER'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-23T06:10:27.600

我认为这个答案已经很晚了，但是对于那些有同样问题的人来说。

我最近在 Joomla 2.5.11 中完成了一些与 Jomsocial Version: 2.8.3 相关的任务，我遇到了你描述的问题。

在模块中，您可以添加以下代码行

```
require_once( JPATH_BASE . DS . 'components' . DS . 'com_community' . DS . 'libraries' . DS . 'core.php');
$userinfo = & CFactory::getActiveProfile(); 
```

因此，$userinfo 对象包含您想要的所有信息，当前显示的配置文件的 id 将是：

```
$userinfo->_userid 
```

希望这对其他开发人员有所帮助。

干杯。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-02T04:23:17.640

以上都不是正确的，我有同样的问题。要获取当前查看的个人资料的用户信息，您必须使用：

```
$this->_user = CFactory::getRequestUser(); 
```

这是获取当前查看的个人资料信息而不返回登录用户个人资料信息的唯一方法...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-06T10:11:46.893

$cuser = CFactory::getUser(); $userid = $cuser->id; echo $data 这将给出当前用户的 id，n 像这样我们可以获取当前用户的用户名 n 的其他详细信息。就像 $username = $cuser->username;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-15T06:57:41.477

检索当前登录用户的基本方法如下所示。如果没有人登录，它将返回“guest”对象。

$cuser = CFactory::getUser();

1.  $用户->ID；
2.  $用户->名称；
3.  $用户->用户名；
4.  $用户->电子邮件；
5.  $用户->密码；
6.  $用户->块；
7.  $用户->注册日期；
8.  $用户->上次访问日期；
9.  $cuser->getThumbAvatar();

或者

您可以在他们的网站上参考JomSocial userObject[的](http://documentation.jomsocial.com/wiki/JomSocial_User_Object)完整官方文档。

# jquery - 时间选择器中的 jQuery 冲突

> ID：11290037
> 
> 赞同：1
> 
> 时间：2012-07-02T08:20:37.210
> 
> 标签：jquery

我有两个 js 文件并且在实现中存在冲突。我的链接顺序是：

```
 <script language="javascript" src="../js/time.js"></script>     
      <script language="javascript" src="../js/time_picker_min.js"></script>
      <script type="text/javascript" src="../js/json.js"></script>
      <script type="text/javascript" src="../js/jquery-1.7.2.min.js" ></script> 
```

页面调用顺序是

```
<script type="text/javascript">
      $(document).ready(function () {
          <?php $check = ronly($_SESSION['num']);?>
           var myvar= '<?php echo $check; ?>';
        var table = 'prel';
         var id = '<?php echo $_SESSION['num'];?>';

         loadJson(table, id, myvar);
         showhide();
    });
 </script>
 <script language="javascript">
    window.addEvent("domready", function (){

        var tp1 = new TimePicker('time1_picker', 'preltemph', 'time1_toggler', {imagesPath:"../images"});

    });
</script>

 <input type="text" name="preltemph" id="preltemph" /> <a href="#"                          id="time1_toggler">Temp</a>
<div id="time1_picker" class="time_picker_div"></div> 
```

如果我在没有任何其他 Jquery 的情况下在单独的页面上使用时间选择器，它工作正常。但不是在与他人一起使用时。时间选择器是 mootool。

如何解决这两者之间的冲突。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:23:25.313

我认为您可能需要查看 jQuery.noConflict()

从这个网站[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:56:27.123

我觉得你需要搬家

```
<script type="text/javascript" src="../js/jquery-1.7.2.min.js" ></script> 
```

像这样的所有脚本的顶部

```
<script type="text/javascript" src="../js/jquery-1.7.2.min.js" ></script>
<script language="javascript" src="../js/time.js"></script>     
<script language="javascript" src="../js/time_picker_min.js"></script>
<script type="text/javascript" src="../js/json.js"></script> 
```

# java - Java - 双显示器上的透明窗口

> ID：11290038
> 
> 赞同：2
> 
> 时间：2012-07-02T08:21:00.690
> 
> 标签：java, transparency, foreground, multiple-monitors

我想在 Java 中使用全屏透明窗口。看起来没有问题。

```
Window ovl = new Window(null) ;

ovl.setBackground(new Color(255,255,255,200));
ovl.setLayout(new BorderLayout());
ovl.setVisible(true);
ovl.setAlwaysOnTop(true);

// ovl.setSize((1680*2), 100); //- OK
ovl.setSize((1680*2)+1, 100); //- NotOK 
```

我有一个双显示器设置。第一个 1680 和第二个 1920 宽度。当我展开我的表单大于我​​的第一台显示器的双倍尺寸时，窗口会失去所有透明性。（当我将窗口移动到第二个监视器时也是如此）就像大部分窗口都在第二个监视器上一样。

它甚至不会变回来，而是保持这种方式。

系统：Linux Mint Debian 版和 OpenJDK 7

# c# - asp.net excel 插件

> ID：11290043
> 
> 赞同：2
> 
> 时间：2012-07-02T08:21:22.823
> 
> 标签：c#, asp.net, excel, nuget

从.net页面将内容保存到excel的最简单方法是什么？我知道 NUget 上有一些软件包，但哪个最容易/最好使用？

我只需要简单的文本，所以我知道我可以做 .csv 没问题，但我需要对格式进行额外的控制，例如使文本粗体、斜体、下划线、更改单元格颜色，我不相信通过 CSV 可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:37:44.260

尝试使用 Open Office Xml 格式 (xlsx) 读写 Excel 2007/2010 文件的 EPPlus 开源 .net 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:41:02.093

NPOI 适合添加格式。开源

[http://npoi.codeplex.com/](http://npoi.codeplex.com/)

# chef-infra - 厨师“缺少所需的身份验证”

> ID：11290047
> 
> 赞同：0
> 
> 时间：2012-07-02T08:21:34.367
> 
> 标签：chef-infra

当我从周末回来时，在尝试使用 chef 部署新节点时遇到以下错误。

我试图重新启动服务器并用 Google 搜索了很多，但没有找到可靠的解决方案，仍然不知道为什么会突然发生这种情况。

我们没有对服务器或 Chef 配置进行任何更改。

任何想法和建议将不胜感激。

```
merb : chef-server (api) : worker (port 4000) ~ Started request handling: Mon Jul 02 09:57:24 +0200 2012
merb : chef-server (api) : worker (port 4000) ~ Params: {"action"=>"index", "controller"=>"search"}
merb : chef-server (api) : worker (port 4000) ~ Mixlib::Authentication::MissingAuthenticationHeader: missing required authentication header(s) 'X_OPS_SIGN', 'X_OPS_USERID', 'X_OPS_TIMESTAMP', 'X_OPS_CONTENT_HASH' - (Merb::ControllerExceptions::BadRequest)
/usr/share/chef-server-api/app/controllers/application.rb:48:in `authenticate_every' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:06:47.833

只需重新启动安装厨师的服务器即可解决此问题。独立重启服务并没有解决问题。

# c++ - 向量括号语法与迭代器

> ID：11290048
> 
> 赞同：0
> 
> 时间：2012-07-02T08:21:52.220
> 
> 标签：c++, vector

为什么下面的代码块重复打印出“40”，

```
vector<Square> array(81);

char c;
int d;

int i = 0;

for(c='A'; c<'J'; c=c+1)
  for(d=1; d<10; d++)
    array.push_back( Square(c, d));

for(int i = 0; i<81; i++)
  cout << array[i].column << array[i].row << endl;
  } 
```

而这打印出来， A1, A2, A3, .... , I9

```
vector<Square> array(81);

char c;
int d;

int i = 0;

for(c='A'; c<'J'; c=c+1)
  for(d=1; d<10; d++)
    array[i++] = ( Square(c, d));

for(i = 0; i<81; i++)
  cout << array[i].column << array[i].row << endl;
} 
```

推回是否将其放入必须通过迭代器访问的随机内存中？在查看向量时总是使用迭代器会更好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T08:23:56.077

`vector<Square> array(81);`声明一个包含 81 个元素的向量。当您`push_back`插入新元素时，即使用的大小将增加到 82、83、...，而您现有的元素将保持不变。

所以 - 在你的第一个片段中，你打印出`vector`任何`push_back`s 之前的元素。第二个片段将元素替换为您想要的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:32:46.120

每次使用 时`push_back`，都会创建一个附加到向量末尾的*新元素。*

如果您希望您的第一个代码示例正常工作，您应该避免设置向量大小，并将其声明为`vector<square> array;`

# asp.net - 如何将 ASP.NET 2.0 应用程序迁移到云端

> ID：11290050
> 
> 赞同：1
> 
> 时间：2012-07-02T08:21:57.640
> 
> 标签：asp.net, cloud, saas, migrate, multi-tenant

我们如何将现有的 ASP .Net 2.0 应用程序迁移到云平台？现有应用程序在代码级别和数据库级别需要进行哪些更改？

**更新：**我有一个带有 SQL 2008 数据库的 ASP.Net 2.0 应用程序。我想将它部署在具有多租户支持的云环境中。在这种情况下，需要进行哪些更改。目前在 web.config 文件中配置了“ConnectionString”。如何更改代码/数据库以实现多租户支持。

基本上我正在寻找将现有 ASP.Net 应用程序移动到云平台的步骤。

请建议相同的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:19:38.850

我不确定您所说的多租户支持是什么意思。多租户通常意味着您需要处理您的应用程序并为不同的组织隔离数据。不确定云与此有什么关系。如果您希望为不同的组织旋转不同的实例，您将不得不再次使用相关云提供商的 API。其中一些可以自动管理应用程序和实例。

云提供可扩展性和弹性（自动可扩展性），它本身不提供多租户。为了实现最大的可扩展性，您可能需要使用云数据存储（通常是键/值）并放弃关系数据库。这可能需要对应用程序进行认真的重新架构。您是否需要这种可扩展性和弹性是另一个话题，您可以只使用云作为基础设施（即他们将为您管理服务器）

# blackberry - 在黑莓中解压缩/解压 Zip 文件

> ID：11290051
> 
> 赞同：3
> 
> 时间：2012-07-02T08:22:03.497
> 
> 标签：blackberry, zip, unzip

我有一个包含文件夹的 zip 文件，在文件夹内我有一些图像文件。我希望提取这些图像。但是我找不到任何东西。我一直在看 zipMe，但找不到任何相关的帮助。

下面是我到目前为止开发的代码。

```
 ZipEntry dataZE;
    InputStream isData;
    StringBuffer sbData;
    ZipInputStream dataZIS;

    String src = "file:///store/home/user/images.zip";
    String path = "file:///store/home/";
    String fileName = "";
    FileConnection f_Conn;

    public UnZipper() {

        debugger("Unzipper constructor");

        try {
            f_Conn = (FileConnection) Connector.open(src);
        } catch (IOException e) {
            debugger("f_conn error :" + e.getMessage());
        }

        try {
            isData = f_Conn.openInputStream();
        } catch (IOException e) {
            debugger("f_conn error getting ip_stream:" + e.getMessage());
        }

        sbData = new StringBuffer();

        dataZIS = new ZipInputStream(isData);

        debugger("got all thing initialized");

    }

    public void run() {

        debugger("unzipper run");

        try {
            startUnziping();
        } catch (IOException e) {

            debugger("Error unzipping " + e.getMessage());
        }

        debugger("finished...");

    }

    private void startUnziping() throws IOException {

        debugger("startUnziping");
        dataZE = dataZIS.getNextEntry();
        fileName = dataZE.getName();
        writeFile();
        dataZIS.closeEntry();

        debugger(">>>>>>>>>>> : " + fileName);
    }

    private void readFile() throws IOException {

        debugger("readFile");
        int ch;
        int i = 0;
        while ((ch = dataZIS.read()) != -1) {

            debugger((i++) + " : " + sbData.toString()
                    + " >>> writting this..");
            sbData.append(ch);
        }

    }

    private void writeFile() {

        debugger("writting file...");
        FileConnection f_Conn = null;
        byte[] file_bytes = new byte[sbData.length()];
        file_bytes = sbData.toString().getBytes();

        try {
            readFile();
        } catch (IOException e) {
            debugger("Error while reading " + e.getMessage());
        }

        try {
            f_Conn = (FileConnection) Connector.open(path + fileName);
        } catch (IOException e) {
            debugger("getting f_conn" + e.getMessage());
        }

        if (!f_Conn.exists()) {
            // create the file first
            debugger("I know file does not exists");
            try {
                f_Conn.mkdir();
            } catch (IOException e) {
                debugger("Oops!!! error creating fle : " + e.getMessage());
            }
        }
        try {
            f_Conn.setWritable(true);
            debugger("file is nt writeable");
        } catch (IOException e) {
            debugger("cannot make it writeable : " + e.getMessage());
        }
        OutputStream lo_OS = null;
        try {
            lo_OS = f_Conn.openOutputStream();
            debugger("got out Stream hero!!!");
        } catch (IOException e) {
            debugger("cant get out Stream !!!");
        }
        try {
            lo_OS.write(file_bytes);
            debugger("yess...writtent everything");
        } catch (IOException e) {
            add(new LabelField("Error writing file ..." + e.getMessage()));
        }
        try {
            lo_OS.close();
            debugger("now closing connection...");
        } catch (IOException e) {
            debugger("error closing out stream : " + e.getMessage());
        }

    }
} 
```

我已经能够获得 ZipEntry 表示包含图像的文件夹，但是我无法弄清楚我必须如何提取这些图像。

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:35:24.173

`ZipEntry`在您的 zip 文件中迭代所有内容`startUnzipping`（您只使用代码中的第一个文件）。与子文件对应的项目应具有类似“文件夹名***/***文件***名***”的名称。

# javascript - 如果我即时创建 jquery ui 对话框，除了在单页应用程序中调用对话框（“关闭”）之外是否有任何清理？

> ID：11290057
> 
> 赞同：4
> 
> 时间：2012-07-02T08:22:20.933
> 
> 标签：javascript, jquery, jquery-ui

在单页 Web 应用程序中，如果我像这样动态创建 jquery ui 对话框：

```
 $("<div>hello</div>").dialog({ 
      buttons : { 
           "cancel" : function() { 
                $(this).dialog("close");
           } 
      } 
 }); 
```

每次关闭后我需要做任何特殊的清理工作吗？我需要调用对话框的“销毁”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:25:17.807

如果您计划在每次打开对话框时完全重新创建对话框，您应该调用`destroy`它，因为上面的代码被多次调用。

如果对话框只打开一次，那没关系。

# android - 如何在 android 中像 YouTube 应用一样在操作栏上制作不可点击的应用图标

> ID：11290058
> 
> 赞同：2
> 
> 时间：2012-07-02T08:22:21.110
> 
> 标签：android, android-actionbar

我想在操作栏上添加不可点击的应用程序图标，例如 YouTube 应用程序在屏幕的左上角有应用程序图标。当前操作上的应用程序图标表现得像按钮。

请参阅以了解应用程序图标：

[http://developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-08T18:20:45.383

我认为您正在寻找`getSupportActionBar().setHomeButtonEnabled(false);`appCompat。如果您没有使用 appCompat，那么只需`getActionBar().setHomeButtonEnabled(false)`假设您的活动正在扩展`ActionBarActivity`.

# java - 用于堆栈 url 的模式

> ID：11290061
> 
> 赞同：3
> 
> 时间：2012-07-02T08:22:29.647
> 
> 标签：java, jsp, design-patterns, servlets, action

我有以下问题。我们有一个应用程序，它基本上是一组控制与用户交互的 JSP 和操作类。这些操作设置了页面正确显示所需的一些参数。系统中的 url 总是包含事件的名称，它定义了我们接下来应该去哪个页面。

现在，几乎每个页面都有一个取消按钮，应该指向上一页。从一开始，每个取消按钮的 url 都被严格定义，但最终，随着系统变得越来越大，为这个按钮编写逻辑以使其准确地指向上一页变得非常困难。

例如，假设我们有三个页面，A、B 和 C。页面 A 有一个指向页面 B 的链接，而 B 有一个指向 C 的链接。因此 C 有一个连到 B 的 url（并且它还包含要在 B) 上显示的实体的键。但是，假设页面 A 被修改，现在在 C 上也有一个链接。现在我们需要检查从那里来的 C 页面并适当地设置 URL，逻辑变得非常复杂。

因此，我向我的团队提出了以下解决方案。用户会话应该包含一个称为 CancelStack 的特殊对象。导致页面的每个操作都应将其 url 推送到堆栈中（包含事件和一些所需的附加数据）。在每个页面上，取消按钮现在应该有一个指向特殊事件的 url，称为 cancelStack。

cancelStack 操作的作用是：

*   从会话中检索取消堆栈。
*   弹出最后一个 url，不要使用它。
*   再次弹出 url 并重定向到该 URL。

为什么我们不使用就检索最后一个 url？假设我们有页面 A 和 B，A 通向 B。A 的操作将其 url 放在堆栈中，这应该是 B 页面的取消 url。现在，B 的操作将它的 url 放在堆栈中。因此我不使用弹出它，然后弹出第一个url，重定向到A动作，这个动作再次将A url添加到堆栈中（因此堆栈大小仅减少1，而不是2）。

这似乎是一个很好的方案，但是堆栈的顶部元素在没有使用的情况下弹出似乎很奇怪。因此我有一个问题。是否有任何设计模式可以在会话中存储 URL 序列以便正确组织取消按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:12:09.753

你的所作所为在我看来是合理的。老实说，我现在想不出解决您的问题的设计模式，但我认为如果除此之外您`cancelStack`还保留对你会摆脱那些让你烦恼的多余的东西。 否则你只是顶部的。 例如在你的例子中： `currentURL``currentURL``pop`
`pop``cancelStack`

> 假设我们有页面 A 和 B，A 通向 B...

`currentUrl`是 A。A 的动作不是取消，所以`currentUrl`ie`A`被推送到`cancelStack`. 然后它是动作，`B`并且`currentURL`是`B`但动作是取消，所以`B`不放在堆栈中。所以顶部`cancelStack`是`A`（`currentUrl`而是`B`）。因此，如果您检索（不需要额外`pop`的）`cancelStack``A``pop`

# javascript - Rails 不能包含 AngularJS

> ID：11290075
> 
> 赞同：5
> 
> 时间：2012-07-02T08:23:44.110
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3.2, angularjs

我正在关注本[教程](http://rubydoc.info/gems/angularjs-rails/1.0.1.1/frames)，尽管将其添加到 Gem 文件并捆绑安装它工作正常。当我尝试将它包含到 application.js 文件中时，加载它时出现以下错误：

```
throw Error("Sprockets::FileNotFound: couldn't find file 'angular'\n  (in /my/path/to/rails/app/assets/javascripts/application.js:13)") 
```

application.js 文件如下所示（从第 13 行开始）：

```
//= require angular
//= require jquery
//= require jquery_ujs
//= require jquery.ui.autocomplete
//= require bootstrap
//= require pusher.min.js
//= require pusher_setup
//= require_directory . 
```

因此，我的问题是如何成功地将 AngularJS 包含到我的 Rails 项目中？

我目前正在使用 Rails 3.2.2 和 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T11:50:45.867

我遇到了同样的问题。我通过以下方式解决了它。

1）就我而言，文件`//= require_tree .`中缺少`application.js`..所以我添加了它。

2) 重新启动 Apache 服务器（如果是 webrick，则重新启动它）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T19:51:28.587

添加 gem 后，您始终必须重新启动 Web 服务器。

通过查看 gem 的源代码，它有 angular javascripts `vendor/assets/javascripts`，这意味着它们只需做`//= require angular`. 如果它们没有加载，可能是因为需要重新启动服务器并且您需要捆绑安装。

至于`require_tree .`，我强烈建议不要这样做，因为这意味着您将失去对加载顺序的控制。

例如，Angular 本身是用它自己的 jQuery 版本（jQuery-lite）打包的，但是如果在加载时已经存在 jQuery，它将使用*全局*版本。

这意味着做

```
//= reqiure angular 
//= require jquery 
```

会做一些不同的事情，而不是

```
//= require jquery
//= require angular 
```

还有许多其他情况下加载顺序很重要，例如，如果您有 Backbone.js 和 Underscore，您将希望在 Backbone 之前加载 Underscore，等等。

作为一般做法，我总是建议只使用`require`，除非您在顺序无关紧要的情况下加载自己的代码，例如`//= require_tree ./controllers`您自己的控制器目录。在那种情况下，我会说`require_tree`完全没问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-04T09:46:45.300

如果您像这样使用，请在您的 gemfile 中：

```
group :assets  do
   gem 'angularjs-rails'
end 
```

然后删除该组 :assets 东西，它应该很简单，没有阻塞：

前任：

```
gem 'angularjs-rails' 
```

它肯定会起作用

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-21T01:15:14.573

万一有人遇到同样的问题并且提供的解决方案不起作用。我已`//= require angular`在资产中添加

```
group :assets do
//= require angular
end 
```

但是我仍然遇到同样的错误。经过一番搜索，我发现由于某种原因需要将其**添加到 assets group 之外**。现在一切都好。不确定这是否是最好的方法，但是我不再收到此错误。

# python - 在 selenium webdriver 中切换到 web 对话框：Python

> ID：11290077
> 
> 赞同：4
> 
> 时间：2012-07-02T08:23:55.747
> 
> 标签：python, internet-explorer, selenium, webdriver

我想在 selenium web driver (Internet Explorer) 下处理一个 web 对话框。我正在使用 Python

在我的应用程序中，当我单击图标时，会打开一个 Web 对话框，其中包含一些文本框（Webelements），我需要在输入一些文本后单击保存按钮。问题是我不知道焦点是否切换到网络对话框。这是我的代码

```
driver.find_element_by_xpath("//img[contains(@src,'/images/btn_add.gif')]").click()
driver.switch_to_alert()
driver.find_element_by_name("report_cutoff_date").sendkeys("10/31/2010") 
```

这是我得到的错误

```
Traceback (most recent call last):
File "C:\Users\vthaduri\workspace\LDC\test.py", line 14, in <module>
driver.find_element_by_name("report_cutoff_date").sendkeys("10/31/2010")
File "C:\Python27\lib\site-packages\selenium-2.21.2-py2.7.egg\selenium\webdriver\remote\webdriver.py", line 282, in find_element_by_name
return self.find_element(by=By.NAME, value=name)
File "C:\Python27\lib\site-packages\selenium-2.21.2-py2.7.egg\selenium\webdriver\remote\webdriver.py", line 651, in find_element
{'using': by, 'value': value})['value']
File "C:\Python27\lib\site-packages\selenium-2.21.2-py2.7.egg\selenium\webdriver\remote\webdriver.py", line 153, in execute
self.error_handler.check_response(response)
File "C:\Python27\lib\site-packages\selenium-2.21.2-py2.7.egg\selenium\webdriver\remote\errorhandler.py", line 147, in check_response
raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.NoSuchElementException: Message: u'Unable to find element with name == report_cutoff_date' 
```

供您参考，该网络元素具有相同的名称和截止日期。

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T04:47:15.273

试试这个：

```
parent_h = browser.current_window_handle
# click on the link that opens a new window
handles = browser.window_handles # before the pop-up window closes
handles.remove(parent_h)
browser.switch_to_window(handles.pop())
# do stuff in the popup
# popup window closes
browser.switch_to_window(parent_h)
# and you're back 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T05:00:09.533

我认为问题在于以下代码 -

```
driver.switch_to_alert(); 
```

您想切换到执行第一次 click() 操作时出现的另一个对话框。我认为出现的这个框不是**警报**。您可能必须通过使用切换到另一个对话框

```
 driver.getWindowHandles();
 driver.switchTo().window(handle); 
```

[您可以在此处](http://joychester.blogspot.in/2010/09/switch-frame-and-windows-sample-code.html)查看示例。

# opencl - clBuildProgram 在构建此特定内核时产生 AccessViolationException

> ID：11290080
> 
> 赞同：2
> 
> 时间：2012-07-02T08:24:06.690
> 
> 标签：opencl, nvidia

这是某种并行缩减/极值内核的一部分。我已将其减少到仍然`clBuildProgram`崩溃的最小代码（请注意，它确实崩溃了，而不仅仅是返回错误代码）：

**编辑**：这似乎也发生在`local_value`声明`global`而不是`local`.

**EDIT2 / SOLUTION**：问题是有一个无限循环。我应该写`remaining_items >>= 1`而不是`remaining_items >> 1`。正如答案中所说，nvidia 编译器在编译/优化错误方面似乎不是很健壮。

```
kernel void testkernel(local float *local_value)
{
    size_t thread_id = get_local_id(0);

    int remaining_items = 1024;

    while (remaining_items > 1)
    {
        // throw away the right half of the threads
        remaining_items >> 1; // <-- SPOTTED THE BUG
        if (thread_id > remaining_items)
        {
            return;
        }

        // look for a greater value in the right half of the memory space
        int right_index = thread_id + remaining_items;
        float right_value = local_value[right_index];
        if (right_value > local_value[thread_id])
        {
            local_value[thread_id] = right_value;
        }

        barrier(CLK_GLOBAL_MEM_FENCE);
    }
}
```

删除这些行`return;`和/或`local_value[thread_id] = right_value;`导致 clBuildProgram 成功完成。

我可以在我的所有计算机上重现这个问题（NVIDIA GTX 560、GT 555M、GT 540M，它们都是 Fermi 2.1 架构）。在使用 x64 或 x86 库时，在 NVIDIA CUDA Toolkit SDK 版本 4.0、4.1 和 4.2 上很明显。

有谁知道可能是什么问题？

是否有可能自动假定本地（又名共享）内存是`(WORK_GROUP_SIZE) * siezof(its_base_type)`？这可以解释为什么当我上面提到的行被删除时它会起作用。

* * *

用于复制的最小主机代码（C99 兼容）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

#ifdef __APPLE__
#include <OpenCL/opencl.h>
#else
#include <CL/cl.h>
#endif

#define RETURN_THROW(expression) do { cl_int ret = expression; if (ret) { printf(#expression " FAILED: %d\n" , ret); exit(1); } } while (0)
#define REF_THROW(expression) do { cl_int ret; expression; if (ret) { printf(#expression " FAILED: %d\n" , ret); exit(1); } } while (0)

int main(int argc, char **argv)
{
    // Load the kernel source code into the array source_str
    FILE *fp;

    fp = fopen("testkernel.cl", "rb");
    if (!fp)
    {
        fprintf(stderr, "Failed to load kernel.\n");
        exit(1);
    }
    fseek(fp, 0, SEEK_END);
    int filesize = ftell(fp);
    rewind(fp);
    char *source_str = (char*)calloc(filesize, sizeof(char));
    size_t bytes_read = fread(source_str, 1, filesize, fp);
    source_str[bytes_read] = 0;
    fclose(fp);

    // Get platform information
    cl_uint num_platforms;
    RETURN_THROW(clGetPlatformIDs(0, NULL, &num_platforms));

    cl_platform_id *platform_ids = (cl_platform_id *)calloc(num_platforms, sizeof(cl_platform_id));
    RETURN_THROW(clGetPlatformIDs(num_platforms, platform_ids, NULL));

    cl_device_id selected_device_id = NULL;

    printf("available platforms:\n");
    for (cl_uint i = 0; i < num_platforms; i++)
    {
        char platform_name[50];
        RETURN_THROW(clGetPlatformInfo(platform_ids[i], CL_PLATFORM_NAME, 50, platform_name, NULL));
        printf("%s\n", platform_name);

        // get devices for this platform
        cl_uint num_devices;
        RETURN_THROW(clGetDeviceIDs(platform_ids[i], CL_DEVICE_TYPE_GPU, 0, NULL, &num_devices));

        cl_device_id *device_ids = (cl_device_id *)calloc(num_devices, sizeof(cl_device_id));
        RETURN_THROW(clGetDeviceIDs(platform_ids[i], CL_DEVICE_TYPE_GPU, num_devices, device_ids, NULL));

        // select first nvidia device
        if (strstr(platform_name, "NVIDIA"))        // ADAPT THIS ACCORDINGLY
        {
            selected_device_id = device_ids[0];
        }
    }

    if (selected_device_id == NULL)
    {
        printf("No NVIDIA device found\n");
        exit(1);
    }

    // Create an OpenCL context
    cl_context context;
    REF_THROW(context = clCreateContext(NULL, 1, &selected_device_id, NULL, NULL, &ret));

    // Create a program from the kernel source
    cl_program program;
    REF_THROW(program = clCreateProgramWithSource(context, 1, (const char **)&source_str, NULL, &ret));

    // Build the program
    cl_int ret = clBuildProgram(program, 1, &selected_device_id, NULL, NULL, NULL);
    if (ret)
    {
        printf("BUILD ERROR\n");
        // build error - get build log and display it
        size_t build_log_size;
        ret = clGetProgramBuildInfo(program, selected_device_id, CL_PROGRAM_BUILD_LOG, 0, NULL, &build_log_size);
        char *build_log = new char[build_log_size];
        ret = clGetProgramBuildInfo(program, selected_device_id, CL_PROGRAM_BUILD_LOG, build_log_size, build_log, NULL);
        printf("%s\n", build_log);
        exit(1);
    }

    printf("build finished successfully\n");
    return 0;
}
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:33:17.563

根据我的经验，nvidia 编译器在处理构建错误时不是很健壮，因此您可能在某处遇到编译错误。

我认为您的问题确实是`return`，或者更重要的是它与`barrier`. 根据关于障碍的opencl规范：

> 在处理器上执行内核的工作组中的所有工作项必须执行此功能，然后才能允许任何工作项继续执行越过障碍。执行内核的工作组中的所有工作项都必须遇到此函数。
> 
> 如果屏障在条件语句内，则如果任何工作项进入条件语句并执行屏障，则所有工作项都必须输入条件语句。
> 
> 如果 barrer 在循环内，则所有工作项都必须为循环的每次迭代执行屏障，然后才能允许任何工作项继续执行超出屏障。

所以我认为你的问题可能是很多线程会在到达障碍之前返回，使这段代码无效。也许你应该尝试这样的事情：

```
kernel void testkernel(local float *local_value) {
    size_t thread_id = get_local_id(0);
    int remaining_items = 1024;
    while (remaining_items > 1) {
        remaining_items >>= 1;// throw away the right half of the threads
        if (thread_id <= remaining_items) {
             // look for a greater value in the right half of the memory space
             int right_index = thread_id + remaining_items;
             float right_value = local_value[right_index];
             if (right_value > local_value[thread_id])
                 local_value[thread_id] = right_value;
        }
        barrier(CLK_GLOBAL_MEM_FENCE);
    }
} 
```

**Edit:** Furthermore as noted in the comments it needs to be `remaining_items>>=1` instead of `remaining_items>>1` in order to avoid producing an infinite loop.

# perl - 在perforce中删除多个标签

> ID：11290087
> 
> 赞同：3
> 
> 时间：2012-07-02T08:24:24.297
> 
> 标签：perl, perforce, labels

我正在研究创建标签的 perforce-perl 脚本。由于脚本的重复执行，我创建了数百个 LABEL_A.180 等类型的标签。我想知道是否有任何命令或任何其他方式可以一次删除多个标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:54:05.647

P4V 中没有删除多个标签的命令或功能。最好的方法是编写另一个脚本来找到标签，然后一个接一个地删除它们。

我不知道 P4Perl API，所以我不能给你一个例子，但是它与现有的标签创建*非常相似，只是将一个*[附加`-d`标志](http://www.perforce.com/perforce/doc.current/manuals/cmdref/label.html)传递给[`p4 label`command](http://www.perforce.com/perforce/doc.current/manuals/cmdref/label.html)。

高温下，

# c++ - 两种不同条件下的 pthread 同步

> ID：11290089
> 
> 赞同：3
> 
> 时间：2012-07-02T08:24:31.087
> 
> 标签：c++, synchronization, pthreads, conditional, mutex

我有一个工作线程处理工作项队列。工作项现在可能无法处理，因此工作线程可能会将它们推回队列中。

```
void* workerFunc(void* arg) {
    WorkItem* item = NULL;

    while(true) {
        {
            scoped_lock(&queueMutex);
            while(workerRunning && workQueue.empty())
                pthread_cond_wait(&queueCondition, &queueMutex);
            if(!workerRunning)
                break;

            item = workQueue.front();
            workQueue.pop();
        }

        // process item, may take a while (therefore no lock here),
        // may also be considered unprocessable

        if(unprocessable) {
            scoped_lock(&queueMutex);
            workQueue.push(item);
        }
    }
    return NULL;
} 
```

现在我需要执行以下操作：有时，我需要扫描工作队列以删除不再需要的项目（从将工作项目排入队列的同一线程中）。我不能为此使用 queueMutex，因为我可能会错过当前正在处理的项目，所以我需要一种方法在所有未完成的项目实际上都在队列中的点暂停整个处理线程（最好在顶部while 循环）。

我考虑过将第二个布尔变量（“暂停”）与另一个互斥锁和条件变量结合使用，但是必须处理工作人员等待 queueCondition 上的信号的特殊情况；实际上，该`pthread_cond_wait()`调用必须解锁/锁定两个互斥锁。

我想这个问题必须有一个简单的解决方案，但我似乎无法想出它 - 我希望你们中的一些人能够帮助我。

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:30:59.773

基本上你需要`WaitForMultipleObjects()`在 POSIX 上模拟 WinAPI 的调用。POSIX 没有像 WinAPI 那样等待所有类型的事件/对象的单一 API。

使用`pthread_cond_timedwait`和`clock_gettime`。您可以参考这篇论文[WaitFor API](http://www.hackerzvoice.net/madchat/windoz/coding/winapi/waitfor_api.pdf)了解许多实现细节。

那里有一些有趣的代码（在答案中发布太多，但可用）可以解决您的问题。

**PS**参考这个问题进行讨论：[WaitForSingleObject and WaitForMultipleObjects equivalent in linux](https://stackoverflow.com/questions/2719580/waitforsingleobject-and-waitformultipleobjects-equivalent-in-linux)

# python - Python：优雅地将字典与值的 sum() 合并

> ID：11290092
> 
> 赞同：37
> 
> 时间：2012-07-02T08:24:38.007
> 
> 标签：python, dictionary

我正在尝试合并来自多台服务器的日志。每个日志都是一个元组列表 ( `date`, `count`)。`date`可能出现不止一次，我希望生成的字典包含所有服务器的所有计数的总和。

这是我的尝试，例如一些数据：

```
from collections import defaultdict

a=[("13.5",100)]
b=[("14.5",100), ("15.5", 100)]
c=[("15.5",100), ("16.5", 100)]
input=[a,b,c]

output=defaultdict(int)
for d in input:
        for item in d:
           output[item[0]]+=item[1]
print dict(output) 
```

这使：

```
{'14.5': 100, '16.5': 100, '13.5': 100, '15.5': 200} 
```

正如预期的那样。

**因为看到代码的同事，我要疯了。她坚持认为，必须有一种更加 Pythonic 和优雅的方式来完成它，而无需这些嵌套的 for 循环。有任何想法吗？**

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-02T08:50:23.657

没有比这更简单的了，我认为：

```
a=[("13.5",100)]
b=[("14.5",100), ("15.5", 100)]
c=[("15.5",100), ("16.5", 100)]
input=[a,b,c]

from collections import Counter

print sum(
    (Counter(dict(x)) for x in input),
    Counter()) 
```

请注意，`Counter`（也称为多重集）是数据最自然的数据结构（一种元素可以多次属于的集合类型，或等效地 - 具有语义 Element -> OccurrenceCount 的映射。您可以在第一位，而不是元组列表。

* * *

也可以：

```
from collections import Counter
from operator import add

print reduce(add, (Counter(dict(x)) for x in input)) 
```

使用`reduce(add, seq)`而不是`sum(seq, initialValue)`通常更灵活，并允许您跳过传递多余的初始值。

请注意，您还可以使用`operator.and_`查找多重集的交集而不是总和。

* * *

上面的变体非常慢，因为每一步都会创建一个新的 Counter 。让我们解决这个问题。

我们知道`Counter+Counter`返回一个新`Counter`的合并数据。这没关系，但我们想避免额外的创建。让我们`Counter.update`改用：

> update(self, iterable=None, **kwds) 未绑定的 collections.Counter 方法
> 
> 像 dict.update() 但添加计数而不是替换它们。Source 可以是可迭代的、字典或另一个 Counter 实例。

这就是我们想要的。让我们用兼容的函数包装它，`reduce`看看会发生什么。

```
def updateInPlace(a,b):
    a.update(b)
    return a

print reduce(updateInPlace, (Counter(dict(x)) for x in input)) 
```

这仅比 OP 的解决方案慢一点。

**基准测试**：http : [//ideone.com/7IzSx](http://ideone.com/7IzSx) *（更新了另一个解决方案，感谢**astynax**）*

*（另外：如果你非常想要一个单线，你可以用相同的方式替换`updateInPlace`它`lambda x,y: x.update(y) or x`，甚至被证明更快，但在可读性方面失败。不要:-)）*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-02T08:41:22.627

```
from collections import Counter

a = [("13.5",100)]
b = [("14.5",100), ("15.5", 100)]
c = [("15.5",100), ("16.5", 100)]

inp = [dict(x) for x in (a,b,c)]
count = Counter()
for y in inp:
  count += Counter(y)
print(count) 
```

**输出：**

```
Counter({'15.5': 200, '14.5': 100, '16.5': 100, '13.5': 100}) 
```

**编辑：** 正如[邓肯](https://stackoverflow.com/users/107660/duncan)建议的那样，您可以用一行替换这 3 行：

```
 count = Counter()
    for y in inp:
      count += Counter(y) 
```

替换为：`count = sum((Counter(y) for y in inp), Counter())`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-02T08:35:34.200

您可以使用 itertools 的[groupby](http://docs.python.org/library/itertools.html#itertools.groupby)：

```
from itertools import groupby, chain

a=[("13.5",100)]
b=[("14.5",100), ("15.5", 100)]
c=[("15.5",100), ("16.5", 100)]
input = sorted(chain(a,b,c), key=lambda x: x[0])

output = {}
for k, g in groupby(input, key=lambda x: x[0]):
  output[k] = sum(x[1] for x in g)

print output 
```

使用 of`groupby`而不是两个循环和 a`defaultdict`将使您的代码更清晰。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T09:40:02.043

您可以使用 Counter 或 defaultdict，也可以尝试我的变体：

```
def merge_with(d1, d2, fn=lambda x, y: x + y):
    res = d1.copy() # "= dict(d1)" for lists of tuples
    for key, val in d2.iteritems(): # ".. in d2" for lists of tuples
        try:
            res[key] = fn(res[key], val)
        except KeyError:
            res[key] = val
    return res

>>> merge_with({'a':1, 'b':2}, {'a':3, 'c':4})
{'a': 4, 'c': 4, 'b': 2} 
```

或者更通用：

```
def make_merger(fappend=lambda x, y: x + y, fempty=lambda x: x):
    def inner(*dicts):
        res = dict((k, fempty(v)) for k, v
            in dicts[0].iteritems()) # ".. in dicts[0]" for lists of tuples
        for dic in dicts[1:]:
            for key, val in dic.iteritems(): # ".. in dic" for lists of tuples
                try:
                    res[key] = fappend(res[key], val)
                except KeyError:
                    res[key] = fempty(val)
        return res
    return inner

>>> make_merger()({'a':1, 'b':2}, {'a':3, 'c':4})
{'a': 4, 'c': 4, 'b': 2}

>>> appender = make_merger(lambda x, y: x + [y], lambda x: [x])
>>> appender({'a':1, 'b':2}, {'a':3, 'c':4}, {'b':'BBB', 'c':'CCC'})
{'a': [1, 3], 'c': [4, 'CCC'], 'b': [2, 'BBB']} 
```

您也可以子类化`dict`并实现一个`__add__`方法：

# c - 桌面上没有egl的Opengl es 2.0（Windows）

> ID：11290093
> 
> 赞同：1
> 
> 时间：2012-07-02T08:24:42.800
> 
> 标签：c, visual-studio-2008, opengl-es, opengl-es-2.0

我有一个使用 Visual Studio 2008 在 Windows 上的简单程序。

在我的代码中，我使用 gl 函数，即 #include GLES2/gl2.h 和 #include EGL/egl.h

在代码中，我使用 EGL 来初始化上下文。如下所示。

它创建一个窗口和 CreateEGLContext。

我没有在屏幕上显示我的结果。但存储在内存中，所以我不交换显示和表面缓冲区。

我想从这段代码中删除 egl.h 的问题怎么可能。

谁能给我任何想法。先感谢您

```
GLboolean  CreateWindow1 ( ESContext *esContext, const char* title, GLint width, GLint height,      GLuint flags )
{
   GLuint attribList[] =
         {
      EGL_RED_SIZE,       5,
     EGL_GREEN_SIZE,     6,
   EGL_BLUE_SIZE,      5,
   EGL_ALPHA_SIZE,     (flags & ES_WINDOW_ALPHA) ? 8 : EGL_DONT_CARE,
   EGL_DEPTH_SIZE,     (flags & ES_WINDOW_DEPTH) ? 8 : EGL_DONT_CARE,
   EGL_STENCIL_SIZE,   (flags & ES_WINDOW_STENCIL) ? 8 : EGL_DONT_CARE,
   EGL_SAMPLE_BUFFERS, (flags & ES_WINDOW_MULTISAMPLE) ? 1 : 0,
   EGL_NONE
  };

   if ( esContext == NULL )
  {
     return GL_FALSE;
  }

  esContext->width = width;
  esContext->height = height;

  if ( !WinCreate ( esContext, title) )
    {
    return GL_FALSE;
    }

     if ( !CreateEGLContext ( esContext->hWnd,  &esContext->eglDisplay,  &esContext->eglContext,    &esContext->eglSurface,
                    attribList) )
  {
  return GL_FALSE;
  }

  return GL_TRUE;
 } 
```

我的答案是我假设的解决方案。或者，如果我们想或使用任何其他框架，我们可以制作自己的框架:)

@Nicol Bolas：非常感谢您的编辑。我将 OpenGL 添加到我的问题中，因为做 OpenGL 的人将 OpenGL ES 理解为它是 OpenGL 的子 APL。我建议您进行更好的编辑，这会有所帮助。在您进行多次编辑之前，我失去了发布问题的能力

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:56:36.043

EGL 在 OpenGL ES 2.0（和其他 Khronos 图形 API）和计算机上运行的本机窗口系统（如 GNU/Linux 系统、Microsoft Windows 或 Mac OS X 的 Quartz 上常见的 X 窗口系统）之间提供了一个“粘合”层。在 EGL 可以确定绘图表面的类型或底层系统的任何其他特性之前，它需要打开与窗口系统的通信通道。因为每个窗口系统都有不同的语义，EGL 提供了一种基本的不透明类型——EGLDisplay——它封装了所有系统依赖项，用于与本地窗口系统交互。任何使用 EGL 的应用程序需要做的第一个操作是创建和初始化与本地 EGL 显示的连接。

# javascript - 将属性从 DOM 节点复制到 dijit 小部件？

> ID：11290094
> 
> 赞同：0
> 
> 时间：2012-07-02T08:24:43.557
> 
> 标签：javascript, scala, lift, dojo

我有这样的html标记

```
<button id="button1" onclick="alert='yup'"></button> 
```

我想使用该 DOM 作为锚点来制作一个按钮小部件

```
var button = new Button({label: "button"}, "button1") 
```

如何将 onclick 属性复制到按钮小部件中？我之所以要这样做，是因为我使用的 web 框架 (lift) 在将按钮添加到 dijit 小部件之前添加了一些功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:26:26.240

PEM 是绝对正确的，为此使用 dojo 解析器（onclick 的关键字将大写'C'：“onClick='alert(true)'”或“data-dojo-props='onClick:function() {alert （真的）}' ”。

无论如何，这是实现它的一种方法

```
var dom = dojo.byId('button1');
var fn = eval(dom.onclick.toString());
dom.onclick = null;
var button = new Button({label: "button", onClick:fn}, "button1"); 
```

# java - 如何编写java hibernate多对多关系检索查询

> ID：11290096
> 
> 赞同：1
> 
> 时间：2012-07-02T08:24:57.497
> 
> 标签：java, hibernate

我有两个表，如下所示。我想编写一个查询来获取特定组的所有联系人。（根据组 id）。请帮我。提前致谢。

1.此联系人表，其中有很多与联系人组表有多对多的关系。

```
@Entity
@Table(name="contacts")
public class Contacts implements Serializable { 
private Long id;
private String userId;
private String emailId;
private Set<ContactGroups> contactGroups;
private String firstName;
private String lastName;

@Id
@Column(name="id")
@GeneratedValue(strategy=GenerationType.AUTO)
public Long getId() {
    return id;
}
public void setId(Long id) {
    this.id = id;
}

@Column(name="user_id")
public String getUserId() {
    return userId;
}
public void setUserId(String userId) {
    this.userId = userId;
}

@Column(name="email_id")
public String getEmailId() {
    return emailId;
}
public void setEmailId(String emailId) {
    this.emailId = emailId;
}

@ManyToMany(targetEntity = ContactGroups.class, cascade =          {CascadeType.ALL},fetch=FetchType.EAGER)
@JoinTable(name="contact_group",
    joinColumns=@JoinColumn(name="c_id", referencedColumnName="id"),
    inverseJoinColumns=@JoinColumn(name="g_id", referencedColumnName="id")
)
public Set<ContactGroups> getContactGroups() {
    return contactGroups;
}
public void setContactGroups(Set<ContactGroups> contactGroups) {
    this.contactGroups = contactGroups;
}

@Column(name="first_name")
public String getFirstName() {
    return firstName;
}
public void setFirstName(String firstName) {
    this.firstName = firstName;
}
@Column(name="last_name")
public String getLastName() {
    return lastName;
}
public void setLastName(String lastName) {
    this.lastName = lastName;
}

 }

 @Entity
 @Table(name="contact_groups")
 public class ContactGroups implements Serializable{
private Long id;
private String groupName;
private String userName;

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
public Long getId() {
    return id;
}
public void setId(Long id) {
    this.id = id;
}

@Column(name="user_name")
public String getUserName() {
    return userName;
}
public void setUserName(String userName) {
    this.userName = userName;
}

@Column(name="group_name")
public String getGroupName() {
    return groupName;
}
public void setGroupName(String groupName) {
    this.groupName = groupName;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:38:21.247

```
select c from Contacts c 
inner join c.contactGroups group
where group.id = :groupId 
```

但如果一切都会更简单

*   你命名了你的实体`ContactGroup`和`Contact`（没有最后的`s`）
*   您将关联映射为双向关联。它将允许`ContactGroup`通过 ID 获取，并且只需调用`getContacts()`以获取其联系人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:31:22.130

```
select c from Contacts c, ContactGroups g
where c.contactGroups.id = g.id
    and g.id = 'whatever id you want' 
```

# android - 如何从 URL 下载图像并将其动态存储在我的应用程序的可绘制文件夹中？

> ID：11290109
> 
> 赞同：-3
> 
> 时间：2012-07-02T08:25:41.607
> 
> 标签：android, imagedownload

在我的项目中，我想从 URL 下载图像，并且想通过 Kik Messenger 共享图像。在 Kik Messenger 中共享图像的代码是：

```
KikMessage message = new KikMessage("com.kik.myapp.id");
message.setImage(this, R.drawable.something); 
```

那么如何将图像存储在可绘制文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:32:50.467

您的应用程序资源目录是只读的，因此您根本不能这样做。

最好的办法是查看 Kik Messenger 是否提供任何采用 Drawable 而不是资源 ID 的方法。

**更新：**我刚刚检查[了 Kik Messenger 文档](http://kik.com/dev/docs/android/index.html)，确实还有其他两种设置图像的方法：`setImage(BitmapDrawable)`和`setImage(File)`. 最简单的选择可能是将图像保存到内部存储并附加文件（如果您不再需要它，则将其删除）。

# mysql - Mysql - 尝试更新时间戳列时。更新失败

> ID：11290115
> 
> 赞同：4
> 
> 时间：2012-07-02T08:26:13.317
> 
> 标签：mysql, insert-update

我想我可能在mysql中遇到了一个错误，或者只是我做错了。

在过去的四个月里，我一直在使用相同的特定查询，就在今天它以某种方式停止工作。我看不出问题。

我在 mysql 控制台中执行这些查询，效果很好，并且正在更新该字段。但是当 PHP 执行这些查询时，它会失败。

将记录插入表（带有两个时间戳字段）后，我正在尝试更新特定的时间戳列。

但不幸的是，它无法更新该列。

查询顺利（没有错误），但时间戳列中的值仍然保持不变。这很奇怪，因为当我将初始列值保留为 NULL 时，更新查询成功。

列 ：

```
START_DATETIME, END_DATETIME - are "timestamp" type. 
```

插入：

```
INSERT INTO TABLE1(START_DATETIME, END_DATETIME, RESPONSE) 
VALUES(NOW(), NOW(), 'STARTED') 
```

插入成功。编号为 123

更新查询与任何其他查询一样正常：

```
UPDATE TABLE1 
SET END_DATETIME = NOW(), RESPONSE='ENDED'
WHERE ID = 123 
```

更新失败，`END_DATETIME`没有得到`NOW()`值。

可以用这个复制：

```
CREATE TABLE TABLE1 
(
    id int auto_increment, 
    start_datetime timestamp, 
    end_datetime timestamp, 
    response varchar(100), 

    primary key(id)
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:55:03.467

您可能已经将第一个时间戳列（那个`START_DATETIME`）定义为自动插入并使用`CURRENT_TIMESTAMP`值自动更新（与`NOW()`.

请注意，如果您没有明确说明脚本中的`TIMESTAMP`列的任何内容，则它们中的**第**一个默认情况下会获得此行为/属性。阅读有关此[自动初始化和更新](http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html)的 MySQL 文档，其中指出：`CREATE TABLE`**[`TIMESTAMP`](http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html)**

 **> *   没有`DEFAULT CURRENT_TIMESTAMP`也没有`ON UPDATE CURRENT_TIMESTAMP`，它与同时指定`DEFAULT CURRENT_TIMESTAMP`和相同`ON UPDATE CURRENT_TIMESTAMP`。

所以，如果你做 a `SHOW CREATE TABLE tableName`，你会得到这样的东西：

```
CREATE TABLE table1
( ...
, START_DATETIME TIMESTAMP NOT NULL 
                   DEFAULT CURRENT_TIMESTAMP
                   ON UPDATE CURRENT_TIMESTAMP
, ...
) ; 
```

如果您不想要这种行为，您应该将列定义更改为不自动更新：

```
ALTER TABLE table1
  MODIFY COLUMN  
    START_DATETIME TIMESTAMP NOT NULL
                     DEFAULT CURRENT_TIMESTAMP ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:30:42.123

在进一步研究之后，如果第一个表具有 ON UPDATE CURRENT_TIMESTAMP ，这是我所期望的，因为它是由更新到第二个记录自动设置的。

我不认为这以前可以工作。

要解决这个问题：

```
ALTER TABLE TABLE1
    CHANGE COLUMN start_datetime start_datetime TIMESTAMP NULL DEFAULT NULL AFTER id,
    CHANGE COLUMN end_datetime end_datetime TIMESTAMP NULL DEFAULT NULL AFTER start_datetime; 
```

如果您想要日期时间值，则 TIMESTAMP 对此没有多大用处，因为它对于自动更新值很有用，因为 TIMESTAMP 数据类型提供自动初始化和更新到当前日期和时间。有关更多信息，请参阅[TIMESTAMP 的自动初始化和更新](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

如果您需要一个字段，您可以自己管理，然后是其他类型之一

*   日期
*   约会时间

可能更合适，见[11.3.1。DATE、DATETIME 和 TIMESTAMP 类型](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:57:17.213

这是时间戳类型的问题，如果您将两个列都更改为日期时间，您将得到您所期望的**

# c# - Umbraco 4.7 系统架构建议与 200K+ 节点一起工作

> ID：11290119
> 
> 赞同：3
> 
> 时间：2012-07-02T08:26:21.530
> 
> 标签：c#, sql-server, umbraco

我需要在 Umbraco 4.7 上创建网站，我需要按价格比较一些产品和一些其他属性（大约 10 个）。我需要对信息进行搜索和排序，产品数量将超过 200K+ 项。我现在已经在 30K 上进行了测试，它似乎有点慢。所以，我的问题是：我应该如何构建我的系统？通过使用 umbraco 节点，我如何提高 200K+ 节点集合中的搜索速度？或者也许我必须将 SQl 服务器和 umbraco 结合起来，在这种情况下，我会确保我有最佳的速度来处理这么多的数据？如果您对如何实施此解决方案有任何经验或想法，请提供一些提示。如果您有一些具体实施的链接，则最好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:12:32.787

如果 Umbraco 是给定的，则有三种架构选择：

首先将产品和产品范围添加为内容部分中的树结构 - 但考虑到这将导致 app_data\umbraco.config 膨胀，我认为 200,000 种产品会严重减慢速度。

其次，使用像[ucommerce](http://www.ucommerce.dk/)这样的产品目录产品，您可以在其中对产品进行编目，然后使用 umbraco 来布局范围、产品、搜索页面 - 并连接到 ucommerce API 以从 Sql Server 数据库中提取产品。这会更高效并且有很好的支持，但是 ucommerce 有收费元素（对于大型安装 - 您可以免费尝试），您将无法设置个人范围管理。

最后，您可以推出自己的数据库和产品维护系统，并添加自己的专用部分——但开发成本很高。

我个人会使用 ucommerce 或类似的产品/目录维护 Umbraco add-id，因为这样可以避免减慢 Umbraco 的速度并为您提供预先编写的维护工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:02:38.300

关于您的选择，我同意 Amelvin 的观点。使用 LinqToSql 将数据卸载到自定义数据库实现将是一个有效的选项。这里的问题纯粹是减轻 Umbraco 的压力。

WRT搜索，我会认真考虑使用Examine。它旨在处理您正在谈论的数据量等等。它建立在 Lucene.net 之上，因此无论数据量如何都非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T14:50:48.620

正如 Digbyswift 所提到的，使用 Examine 来执行搜索，这比标准搜索要快得多，并且在执行搜索时您不会访问数据库。

# javascript - iPhone 上的某些移动浏览器无法正确执行 Javascript

> ID：11290120
> 
> 赞同：2
> 
> 时间：2012-07-02T08:26:36.210
> 
> 标签：javascript, ios, browser, uiwebview

我正在尝试运行从我在 UIWebView 中加载的 URL 返回的 javascript。该脚本获取图像并在其上绘制一个点以显示用户位置。

在 Mobile Safari、UIWebView 和 Google Chrome Mobile 中，图像未正确生成并且点位于错误的位置。

在桌面 Safari、Chrome、Opera Mini 和我的应用程序的 Android 版本中，它运行良好。

我需要帮助才能让它在 UIWebView/Mobile Safari 中工作。

**问题 1：** zoomIn() 方法中对 context.drawImage() 的调用在 Mobile Safari 的调试控制台中生成以下错误：“Javascript Error. undefined. INDEX_SIZE_ERR: DOM Exception 1: Index or size was negative, or greater than允许的值。”

**问题 2：**在 zoomOut() 方法中，图像本身绘制得很好，但点在不正确的位置。

**更新：**从下面的代码中可以看出，我添加了 console.log 语句来打印出原始图像的宽度和高度。在有问题的*浏览器*中，这些值是应有值的**一半。**我现在正试图找出原因。

**代码：**

```
window.onload = function zoomIn() {
    var canvas = document.getElementById("area");
    var context = canvas.getContext("2d");
    var imageObj = new Image();
    var px = 1988;
    var py = 734;
    imageObj.src = "IMAGE URL GOES HERE";
    imageObj.onload = function() {
      canvas.width=640;
      canvas.height=480;
      if(px-canvas.width<0 || py-canvas.height<0){
          canvas.width=500;
          canvas.height=300;
      }

      console.log(imageObj.height);
      console.log(imageObj.width);

      context.drawImage(imageObj, px-canvas.width, py-canvas.height, canvas.width*2, canvas.height*2,0,0,canvas.width,canvas.height);

      context.beginPath();
      context.arc(canvas.width/2, canvas.height/2, 10, 0, 2 * Math.PI, false);
      context.fillStyle = "red";
      context.fill();
      context.lineWidth = 3;
      context.strokeStyle = "black";
      context.beginPath();
      context.font = "10pt Calibri";
      context.fillStyle = "black"
      context.textAlign = "center";
      context.fillText("You Are Here", canvas.width/2, canvas.height/2+20);
      context.stroke();
    };
  document.form1.button2.style.visibility="hidden"
  document.form1.button1.style.visibility="visible";
};

function zoomOut(){
   var canvas = document.getElementById("area");
   var context = canvas.getContext("2d");
   var imageObj = new Image();
   var px = 1988;
   var py = 734;
   imageObj.src = "IMAGE URL GOES HERE";
   imageObj.onload = function(){
      canvas.width=imageObj.width
      canvas.height=imageObj.height
      context.drawImage(imageObj,0,0);

      context.arc(px, py, 20, 0, 2 * Math.PI, false);
      context.fillStyle = "red";
      context.fill();
      context.lineWidth = 3;
      context.strokeStyle = "black";

      context.beginPath();
      context.rect(0, 0, canvas.width, canvas.height);
      context.font = "15pt Calibri";
      context.fillStyle = "black";
      context.textAlign = "center";

      context.fillText("You Are Here",px,py+25);
      context.stroke();
   };
   document.form1.button1.style.visibility="hidden"
   document.form1.button2.style.visibility="visible";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:17:39.240

如果您阅读了我的整篇文章（不包括代码），您就会知道我最终发现 iPhone 上原始图像的尺寸是其他浏览器中的*一半*。

这是由于 Apple 对可下载图像的大小设置了限制，即 3 兆像素。我的图像比那个大。但是 Javascript 引用了（在 iOS 上）我们超出其界限的部分图像。

**资料来源：**[Apple 文档：了解 iOS 资源限制](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html)

# html - 可变高度容器中元素的垂直中间

> ID：11290124
> 
> 赞同：4
> 
> 时间：2012-07-02T08:26:46.790
> 
> 标签：html, css

我有以下情况：

![在此处输入图像描述](../Images/f146fd4b55a9364429a983b8e28ff07a.png)

一个可变高度的 div (#container)，内部有一个图像（放置在另一个 div 内的图像），我需要浮动：右**并**在中间垂直对齐。这个怎么做？

谢谢。

**编辑**：

也许我没有说得足够清楚，以至于我*事先不知道*容器有多少内容，从几行到一堵文字墙，所以任何依赖于它的高度的解决方案都行不通（这就是我的问题：P )

这是一个与图像对齐的可能内容示例的小提琴：http: [//jsfiddle.net/9DbmN/](http://jsfiddle.net/9DbmN/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:57:30.923

你应该看看Chris Coyier 的 Centering [in the Unknown](http://css-tricks.com/centering-in-the-unknown/)。Imo 它是垂直居中圣杯的非常可靠的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:17:35.870

我不会阻止在这里使用表格）））如果您使用`vertical-align: middle`在其`td`元素上设置了两个单元格的表格-它将完美（并且轻松！！！）解决您的问题。

如果您想要两个容器，其中一个（带有图像的那个）将浮动到右侧并需要居中 - 我会说您必须避免`float`为此使用属性。因为a）据我了解，您不需要将左侧的内容放在图像下方，对吗？b) 浮点数是块级元素，即使您设置`display: table-cell`了也无法更改它，浏览器仍会将其呈现为`display: block`- 这使我得出结论，您无法通过 css 将其居中（至少通过表示我知道）。

如果您不需要 ie7 支持，可能的解决方法可能是：

html:

```
<div id="container">
    <div class="content">Content goes here, vertically aligned with the image</div>
    <div class="i_used_to_be_floated_right">Image goes here</div>
</div> 
```

CSS：

```
#container {
    display: table;
    width: 100%;
}
.content, .i_used_to_be_floated_right {
    display: table-cell;
    vertical-align: middle;
}
.content {
    background: green;
    width: 80%;
}
.i_used_to_be_floated_right{
    background: red;
    width: 20%;
} 
```

可以在这里看到工作示例：http: [//jsfiddle.net/skip405/sDXMj/1/](http://jsfiddle.net/skip405/sDXMj/1/)

但是，如果您需要 ie7 - 我会投票支持我在一开始所说的表格解决方案。

# php - 在php中处理多字节字符

> ID：11290125
> 
> 赞同：0
> 
> 时间：2012-07-02T08:26:49.127
> 
> 标签：php, internationalization

我正在研究基于 php 的 mime 解析器。如果正文包含字符串，就像`Iñtërnâtiônàlizætiøn`我们看到的那样，它正在转换为`IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n`. 有人可以建议如何处理（什么功能）这样的字符串吗？

所以我们正在做以下事情

1.  使用 Zend 库连接到 IMAP 服务器

    ```
    mail = new Zend_Mail_Storage_Imap($params); 
    ```

2.  使用阅读消息

    ```
    $message = $mail->getMessage($i); 
    ```

    在循环。

3.  当我们打印时，`$message`我们会看到字符串，例如`Iñtërnâtiônàlizætiøn`打印为`IÃ±tÃ«rnÃ¢tiÃ´nÃ lizÃ¦tiÃ¸n`.

我需要的是，是否有某种方法可以保留原始字符串？这只是我们可能会遇到其他多字节字符的一个示例，那么如何知道我们一般如何处理呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:30:49.790

对此没有特定的*功能*，您只需要在其所在的编码中处理字符串。字符串只是一个字节块，通过将这些字节*解释*为文本的任何内容，它都会变成字符。并且某些东西需要为此使用正确的编码，否则这些字节不会被解释为它们应该是的字符。请参阅[在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)，了解常见缺陷的概要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:11:38.193

如评论中所述，您可以使用 php mb_* 函数来处理多字节字符。这里只是一个检测字符串编码的例子：

```
$s="Iñtërnâtiônàlizætiøn";
echo mb_detect_encoding($s);  //UTF-8 
```

然后您可以使用它，使用 utf8_decode($s) 或任何 mb_ 函数将字符串转换为您想要的编码。

# windows-phone-7 - 适用于 Windows Phone 的 RTMP 库

> ID：11290127
> 
> 赞同：8
> 
> 时间：2012-07-02T08:26:57.817
> 
> 标签：windows-phone-7, rtmp, weborb, fluorinefx

我正在构建一个 WP7 应用程序来使用 RTMP 拍照并将图像上传到第三方服务器。不幸的是，我找不到任何适用于 Windows Phone 7 的 RTMP 客户端的合理实现。

我已经下载[了 WebOrb](http://www.themidnightcoders.com/products/weborb-for-net/overview.html)，但似乎 WP7 库的 WebOrb 不支持 RTMP。此外，我无法将 Silverlight dll 集成到我的 WP7 应用程序中。

我还查看了[FluorineFX](http://www.fluorinefx.com/download.html)，但它也没有 WP7 的版本。

您能否建议另一个在 WP7 上提供 RTMP 的库，或者让上述库与 WP7 一起使用的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:17:47.247

我不知道 WP7 是否可以运行“exe”文件，但如果可以，请尝试使用 VLC 2.00“Twoflower”或[新版本](http://www.videolan.org/vlc/releases/2.0.0.html)。第一个在带有 RTMP 等的 PC 上运行良好。

# cordova - Phonegap 1.9 Cordova webview，有什么区别？

> ID：11290129
> 
> 赞同：5
> 
> 时间：2012-07-02T08:27:07.333
> 
> 标签：cordova

对不起，这么奇怪的问题，但我似乎无法在 phonegaps 自己的网页上找到答案。

他们说 1.9 包括科尔多瓦 webview，我猜它替代了本机 webview。

但是这些网络视图的主要好处和区别是什么？

更快的速度，原生集成还是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T16:55:36.523

CordovaWebView 扩展了本机 WebView 并添加了从 JavaScript 调用本机层所需的位。关于它的文档即将发布，但要查看一个示例，您可以查看：

[https://github.com/infil00p/CordovaActionView](https://github.com/infil00p/CordovaActionView)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T09:13:26.477

cordova webview 和phonegap 之间肯定存在一些不兼容，认为它们据说是同源的。

我正在为我的 web 应用程序使用 cordova webview，因为我只是不知道如何使用 phonegap 来包装在线 web 应用程序，请参阅[这个问题](https://stackoverflow.com/questions/16804291/wrap-online-website-into-android-app-using-phonegap)。

如您所见，PhoneGap 网站上的文档仍然引用了 1.9.0 版本的 cordova，认为 cordova 已经是 2.7.0 版本。

所以实际上我建议你分开对待它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:34:32.980

Adobe 收购了 Phonegap，并更名为 Cordova。Cordova Webview 允许显示 HTML 页面，phonegap 框架允许使用 javascript API（传感器、联系人、相机等）使用设备功能

# xaml - Metro 应用程序中的 GridView 滚动不起作用

> ID：11290130
> 
> 赞同：2
> 
> 时间：2012-07-02T08:27:07.557
> 
> 标签：xaml, gridview, windows-8, microsoft-metro, windows-runtime

我试图构建一个使用 GridView 的 winRT Metro 应用程序。我得到了 GridView，看起来我想要它这样做。但是水平滚动不起作用。当我拖动它移动的内容但是当我释放它时，它会返回开始。

有谁知道为什么它不起作用？

```
<Page
    x:Class="WR.Levels"
    IsTabStop="false"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Wordy"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:uc="using:Wordy.UserControls"
    mc:Ignorable="d">
    <UserControl.Resources>
        <CollectionViewSource x:Name="cvsLevels" IsSourceGrouped="True"/>

        <CollectionViewSource x:Name="cvsCategories" IsSourceGrouped="True" ItemsPath="Levels"/>

    </UserControl.Resources>
<Canvas x:Name="innertialCanvas" 
                Grid.Row="1"
                Background="#FF3D6E4F" 
  >
<uc:BG HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />  

<Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="84"/>
                <RowDefinition Height="700"/>
            </Grid.RowDefinitions>

            <StackPanel Margin="20,20,0,0" Grid.Row="0" Orientation="Horizontal">
                <Button x:Name="backButton" Style="{StaticResource BackButtonStyle}"   Margin="10" VerticalAlignment="Center"  >Back</Button>

                <TextBlock Name="appName" Text="WR" FontSize="48" VerticalAlignment="Center" />
            </StackPanel>
<GridView ItemsSource="{Binding Source={StaticResource cvsCategories}}" Margin="0,0,0,0" 
          IsItemClickEnabled="True" SelectionMode="None" MaxHeight="700" Grid.Row="1"
          AutomationProperties.AutomationId="LevelsGrid">
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Width="150" Height="130" Margin="10" AutomationProperties.AutomationId="Level">
                            <StackPanel.Background>
                                <SolidColorBrush Color="White" Opacity="0.2" />
                            </StackPanel.Background>
                            <StackPanel Orientation="Horizontal" Margin="10">
                                <uc:Stars Height="50" Width="50" />
                                <uc:Stars Height="50" Width="50" />

                            </StackPanel>
                            <TextBlock Text="{Binding Name}" Margin="0,10,0,0" FontSize="24" HorizontalAlignment="Center"></TextBlock>
                        </StackPanel>
                    </DataTemplate>
                </GridView.ItemTemplate>
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>

        <GridView.GroupStyle>
                <GroupStyle HidesIfEmpty="True">
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <Grid Margin="0">
                                <TextBlock Text='{Binding Name}' 
                                   Foreground="White" Margin="20"
                                   Style="{StaticResource HeaderTextStyle}" AutomationProperties.AutomationId="LevelGroup"/>
                            </Grid>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>

                    <GroupStyle.ContainerStyle>
                        <Style TargetType="GroupItem">

                        <Setter Property="Margin" Value="3,0"/>
                        </Style>
                    </GroupStyle.ContainerStyle>

                    <GroupStyle.Panel>
                        <ItemsPanelTemplate>
                            <VariableSizedWrapGrid/>
                        </ItemsPanelTemplate>
                    </GroupStyle.Panel>
                </GroupStyle>
            </GridView.GroupStyle>

            </GridView>
        </Grid>
    </Canvas>
</Page> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:05:48.943

当我删除画布标签时，它起作用了！

# c++ - C++ winsock 在 bind() 上给出 10038 错误

> ID：11290133
> 
> 赞同：1
> 
> 时间：2012-07-02T08:27:18.283
> 
> 标签：c++, sockets, networking, console, winsock2

嗯，这里的第一篇文章，这个地方似乎到处都是谷歌，我通常可以找到我的解决方案，不得不在任何网站/论坛上亲自问我自己的问题；但是，如果我在这个问题上再发汗，我会追捕开发出winsock并射击他们的人（对不起，我认为我没有运气就翻过网的每个角落的每一块石头...... breeaatheee .... wheew *）*

我是网络编程的新手，但在过去三年里一直在使用 C++，只是出于兴趣，最近也在玩 AS3。

我正在尝试编写一个服务器（对于客户来说，我也在从事 AS3 项目），据我所知，这个 SOCKET 非常好。我没有重新创建它，使用它进行多线程处理，没有重新分配或任何东西。没有有趣的偏见。只是想把它全部设置好，bind() 就在我脸上吐出了讨厌的 10038。

我看过 MSDN，我很清楚 10038 的意思是“尝试对无效套接字进行操作”；对于我的生活，我看不出它在哪里无效。

但是我的闲话已经够多了，下面是代码：（functions.h 是空的，还没有走那么远）

```
 //Server for Project7 - Client written in AS3 under FlashDevelop. Developed under and for the Windows Operating System Enviroment
//All connections handled under TCP/IP on port 3011
//Client is URL locked to www.cutdev.com
//Copyright Tyler Buchinski 2012 All Rights Reserved
#include <iostream>
#include "functions.h"

#define WIN32_MEAN_AND_LEAN

#include <winsock2.h>
#include <windows.h>

        using namespace std;

int main()
{

    const int iReqWinsockVer = 2;   // Minimum winsock version required

WSADATA wsaData;

  if (WSAStartup(MAKEWORD(iReqWinsockVer,0), &wsaData)==0)
  {
    // Check if major version is at least iReqWinsockVer
    if (LOBYTE(wsaData.wVersion) >= iReqWinsockVer)
    {

        SOCKET SocketListen;
        SocketListen = (AF_INET,SOCK_STREAM,IPPROTO_TCP);

            if(SocketListen == INVALID_SOCKET)
                {
                    cout << "ERROR - could not creaate listening socket." << endl;
                    system("pause");

                    return 4;
                }

            sockaddr_in Listener, Channel1;

            Listener.sin_family = AF_INET;
            Listener.sin_port = htons(3011);
            Listener.sin_addr.S_un.S_addr = INADDR_ANY;

            int err = bind(SocketListen,(sockaddr*)(&Listener),sizeof(Listener));
            if (!err == 0)
                {
                    cout << "Listener binding failed!" << endl;
                    cout << err << endl;
                    cout << WSAGetLastError();

                    return 3;
                }

    }
    else
    {
        // Required version not available
        cout <<"Required version of Winsock not installed." << endl;
    }

    // Cleanup winsock
    if (!WSACleanup() == 0)
    {
        // cleanup failed
        cout << "WSACleanup Failed!!" << endl;
        system("pause");
    }
  }
  else
  {
    cout << "WSA Startup failed!" << endl;
  }
    return 0;
} 
```

提前感谢您的帮助！-泰勒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:41:10.360

错误`10038`是`WSAENOTSOCK`：

> 尝试对不是套接字的东西进行操作。
> 
> 如果 s 参数中的描述符不是套接字，则返回此错误。

发生这种情况是因为您省略了对常量的调用`socket()`并`SocketListen`包含`IPPROTO_TCP`常量的值而不是套接字描述符：

```
SocketListen = (AF_INET,SOCK_STREAM,IPPROTO_TCP); 
```

应该变成：

```
SocketListen = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP); 
```

# java - SWIG 更改函数签名

> ID：11290138
> 
> 赞同：3
> 
> 时间：2012-07-02T08:27:41.027
> 
> 标签：java, swig

我正在使用 Swig 创建一个 Java 接口。基本上，在 C++ 中我有模板（

```
template<class T> class TSizedArray
{
    int GetLength();
    T* GetElements() const;
    ...
}

class Producer
{
    TSizedArray<long> GetLongs();
    ...
} 
```

该模板用作我需要通过 SWIG 导出到 Java 的某些 API 函数的返回值。但是，在 Java 中，我们希望使用原生 Java 数组而不是这个简单的包装器：

```
Java:
    long[] result = Producer.GetLongs(); 
```

我不确定如何使用 SWIG 实现这一目标。模板有多个实例化，用作不同类中多个方法的输入和输出。我能够使用：

```
%typemap(jstype) TCustomElementList "long[]" 
```

获取生成的 Java 接口为 long[] GetLongs()，但生成的实现创建了 TCustomElementList 类型的新对象。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:30:24.190

你的类型图是正确的，但你需要的不仅仅是那个：

```
%module test

template<class T> class TSizedArray
{
public:
    int GetLength();
    T* GetElements() const;
};

%typemap(jstype) TSizedArray<long> "long[]"
%typemap(jtype) TSizedArray<long> "long[]"
%typemap(javaout) TSizedArray<long> {
    return $jnicall;
  }

%typemap(out) TSizedArray<long> {
  $result = JCALL1(NewLongArray, jenv, $1->GetLength());
  JCALL4(SetLongArrayRegion, jenv, $result, 0, $1->GetLength(), $1->GetElements());
}

class Producer
{
public:
    TSizedArray<long> GetLongs();
}; 
```

（此接口通过 SWIG 运行良好，但尚未进一步测试）。

您需要为 Proxy 类和 JNI 类（jtype 和 jstype 类型映射）设置返回类型。您还需要指示代理传递 JNI 代码返回的内容（javaout 类型映射）。然后，您需要提供一些 JNI 胶水代码，这些代码被插入以在 C++ 端（输出类型映射）创建一个新的 Java 数组。

# android - 更改为横向模式android时出现意外错误

> ID：11290139
> 
> 赞同：0
> 
> 时间：2012-07-02T08:27:42.303
> 
> 标签：android, android-service

当我将活动更改为横向模式时，我遇到了一些意外的服务泄漏错误。该应用程序运行良好，错误仅显示在 logcat 中。

logcat 错误是：

> E/ActivityThread(16640): Activity com.amazon.hsyal.ui.VoltageSODLoggerActivity 泄露了ServiceConnection com.amazon.hsyal.ui.VoltageSODLoggerActivity$1@41461908 原来绑定在这里
> 
> E/ActivityThread(16640): android.app.ServiceConnectionLeaked: Activity com.amazon.hsyal.ui.VoltageSODLoggerActivity 已经泄露了原来绑定在这里的ServiceConnection com.amazon.hsyal.ui.VoltageSODLoggerActivity$1@41461908
> 
> E/ActivityThread(16640)：在 android.app.LoadedApk$ServiceDispatcher.(LoadedApk.java:999)
> 
> E/ActivityThread(16640)：在 android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:893)
> 
> E/ActivityThread(16640)：在 android.app.ContextImpl.bindService(ContextImpl.java:1139)
> 
> E/ActivityThread(16640)：在 android.content.ContextWrapper.bindService(ContextWrapper.java:386)
> 
> E/ActivityThread(16640)：在 com.amazon.hsyal.ui.VoltageSODLoggerActivity$2.onClick(VoltageSODLoggerActivity.java:96)
> 
> E/ActivityThread(16640)：在 android.view.View.performClick(View.java:3538)
> 
> E/ActivityThread(16640)：在 android.view.View$PerformClick.run(View.java:14132)
> 
> E/ActivityThread(16640)：在 android.os.Handler.handleCallback(Handler.java:605)
> 
> E/ActivityThread(16640)：在 android.os.Handler.dispatchMessage(Handler.java:92)
> 
> E/ActivityThread(16640)：在 android.os.Looper.loop(Looper.java:137)
> 
> E/ActivityThread(16640)：在 android.app.ActivityThread.main(ActivityThread.java:4492)
> 
> E/ActivityThread(16640)：在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> E/ActivityThread(16640)：在 java.lang.reflect.Method.invoke(Method.java:511)
> 
> E/ActivityThread(16640)：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
> 
> E/ActivityThread(16640)：在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
> 
> E/ActivityThread(16640)：在 dalvik.system.NativeStart.main(Native Method)

对应的onCreate代码为：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    PowerManager mgr= (PowerManager) this.getSystemService(Context.POWER_SERVICE);
    wk = mgr.newWakeLock(PowerManager.FULL_WAKE_LOCK, "MyWakeLock");
    wk.acquire();
    intent = new Intent(getBaseContext(), LoggerService.class);
    Button start_stop_button = (Button) findViewById(R.id.start_stop_button);
    start_stop_button.setOnClickListener(startStopButtonListener);

    if(getServiceInfo(this)){
        start_stop_button.setText("Stop Service");

    }else
    {   start_stop_button.setText("Start Service");

    }

} 
```

我认为在创建服务连接实例的地方一定存在一些问题。目前我正在 onCreate 中执行此操作，我还需要在其他地方执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:00:42.903

当方向改变时，重新创建活动，即调用 onDestroy() 并再次调用 onCreate。

您可能忘记在 onDestroy() 方法中释放唤醒锁。使您的唤醒锁成为成员变量并调用

```
wk.release(); 
```

在您的 onDestroy() 方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:54:01.437

在您的代码中，我看不到您的服务连接的实例，只有一个`Intent`（您可能知道，这不是与您的服务的连接）......

您可能希望在您的活动方法中`onStart()`绑定您的服务并取消绑定您的服务。另外，如果您不需要您一路出现`onStop()`，我建议您`WakeLock`在课堂上移动您的...`Service``Activity`

有关该类以及如何从 a 绑定/取消绑定（而不是使用and ）的更多详细信息，请参见[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)`Service``Service``startService()``stopService()`

# facebook - 将活动添加到 facebook api

> ID：11290145
> 
> 赞同：0
> 
> 时间：2012-07-02T08:28:03.267
> 
> 标签：facebook, api, android-activity

1.  我有一个 Facebook 应用，想发布用户活动。我如何在 Web 应用程序中执行此操作 - 方法和 API 是什么？（不适用于网站，因为[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)中的 facebook 文档适用于网站）。
2.  我是否必须为要发布的每个用户活动创建一个新的 html 页面？它不会创建数百万页，还是我在这里遗漏了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:16:09.977

I have found Yan has given a nice detail about this thought. Can you give a try, I am succeed on his suggestion.

Here is the link

[http://ian.tresman.co.uk/how-add-facebook-page-activity-post-rss-feed-web-page.htm](http://ian.tresman.co.uk/how-add-facebook-page-activity-post-rss-feed-web-page.htm)

Marshal [http://coronabd.blogspot.com](http://coronabd.blogspot.com)

# linux - 在mmap()之后，写入返回地址是可以的，但是读取导致系统崩溃。为什么？

> ID：11290146
> 
> 赞同：-1
> 
> 时间：2012-07-02T08:28:03.803
> 
> 标签：linux, crash, kernel, mmap, itanium

我想在两个进程之间共享内存。
之后`mmap()`，我得到一个地址 `mapStart`，然后我添加偏移量`mapStart`并得到`mapAddr`，并确保`mapAddr`不会超过映射的 PAGE_SIZE。
当我写信`mapAddr`给

```
memcpy((void *)mapAddr, data, size); 
```

一切都好。

`mapAddr`但是当我从

```
memcpy( &data, (void *)mapAddr, size);` 
```

这将导致系统崩溃。
谁知道为什么？ [类似的问题在这里](https://stackoverflow.com/questions/10733816/read-and-write-processs-memory-through-dev-mem-text-segment-works-but-data-se)

**添加一些信息：** @Tony Delroy，@J-16 SDiZ
mmap 函数是：

```
mapStart = (void volatile *)mmap(0, PAGE_SIZE, PROT_READ | PROT_WRITE, MAP_SHARED | MAP_LOCKED, memfd, pa_base); 
```

系统崩溃：没有任何操作系统错误消息，控制台打印一些`MCA`信息

[此处](https://stackoverflow.com/questions/10733816/read-and-write-processs-memory-through-dev-mem-text-segment-works-but-data-se)描述的详细信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:19:30.953

至少有两个可能的问题：

> 在 mmap() 之后，我得到一个地址 mapStart，然后我将偏移量添加到 mapStart 并获取 mapAddr，并确保 mapAddr 不会超过映射的 PAGE_SIZE。

Not`mapAddr`必须确保不超过映射大小，但是`mapAddr+size`. 您正在尝试触摸`size`字节，而不仅仅是一个。

```
memcpy((void *)mapAddr, data, size);
memcpy( &data, (void *)mapAddr, size); 
```

假设`data`不是一个数组（这是一个合理的假设，因为您在第一行中没有使用地址运算符），第二行**不是从数据***指向*的位置复制，**而是**从数据开始。这很可能是一些未分配的内存，或者堆栈上的某个位置，或者其他什么。如果堆栈上没有很多，它还不如从堆栈末尾读取到文本段，或者......其他东西。

（如果`data`确实是一个数组，当然是等价的，但是你的代码风格会不一致。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:53:50.363

只是一些想法。

您是否`mmap()`跨越具有不同属性的内存区域？这是非法的。较旧的内核（您说 2.6.18）允许这样做，但是当您写入其中一些内核时会崩溃。

请参阅[这篇文章](http://article.gmane.org/gmane.linux.ports.ia64/16211/)以获取一些起点。如果可能，请尝试更新的内核。

# asp.net-mvc-3 - 用逗号分隔的字符串数组

> ID：11290147
> 
> 赞同：1
> 
> 时间：2012-07-02T08:28:03.897
> 
> 标签：asp.net-mvc-3

我有一个字符串数组，我希望它以逗号分隔的视图返回。

```
@Html.DisplayFor(m => name.studentName) <span>, </span>} 
```

我正在使用这种方式，但最后一个字符串也将以逗号结尾。想知道如何避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:35:23.663

我假设您的模型上有一组学生，每个学生都拥有`studentName`您要显示的属性：

```
public IEnumerable<Student> Students { get; set; } 
```

在您的视图中，您正在循环浏览此集合并单独显示每个学生的姓名。

现在，您可以执行以下操作，而不是循环：

```
@Html.Raw(
    string.Join(
        "<span>,<span>",
        Model.Students.Select(x => Html.Encode(x.studentName))
    )
) 
```

甚至更好的是，将此逻辑外部化为可重用的自定义 HTML 助手：

```
public static class HtmlExtensions
{
    public static IHtmlString FormatStudentNames(this HtmlHelper htmlHelper, IEnumerable<Student> students)
    {
        return new HtmlString(
            string.Join(
                "<span>,<span>",
                students.Select(x => Html.Encode(x.studentName))
            )
        );
    }
} 
```

然后在你的视图中简单地调用这个助手：

```
@Html.FormatStudentNames(Model.Students) 
```

您不再需要编写任何 foreach 或您正在编写的任何循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:33:10.643

尝试

```
@string.Join(",", name.studentName); 
```

并在 MSDN 上查看[string.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-07T07:41:21.833

```
 $(".category").change(function () {
        var value = $(this).val();
        loadSubCategory(value)
    });

    function loadSubCategory(parentID) {

        var $el = $("#SubCats");
        $el.prop("disabled", true);
        $el.empty();
        $.ajax({
            cache: false,
            url: "/Category/loadSubCategory?id=" + parentID,
            success: function (data) {
                if (data != '' && data != null) {
                    if (data != 'error') {
                        var sch = JSON.parse(data);
                        if (sch.length > 0) {
                            $el.prop("disabled", false);
                            for (i = 0; i < sch.length; i++) {
                                $el.append($("<option></option>")
                                    .attr("value", sch[i].ID).text(sch[i].Description));
                            }
                        }
                    }
                }
            }
        });
    }

public ActionResult loadSubCategory(string id)
        {

            string list = "";
            try
            {

                list = Newtonsoft.Json.JsonConvert.SerializeObject(menu.SubCategory(id));
            }
            catch (Exception ex)
            {
            }
            return Content(list);

        }
  public List<CategoryModel> SubCategory(string parentID){

     List<CategoryModel> listCategory= new List<CategoryModel>();
      string[] yourValues = parentID.Split(',');
                    foreach (var item in yourValues)
                    {
                        var Category = UowObj.CategoryRepository.Get(filter: c => c.ParentId.ToString() == item && c.IsActive == true).ToList();
                        if (Category != null)
                        {
                            var category= new CategoryModel();
                            foreach (var itemq in Category)
                            {

                                category.ID = itemq.ID;
                                category.Description = itemq.Description;
                            }
                            listCategory.Add(merchant);
                        }

    } 
```

# c# - 当 TextBlock 是 UserControl 的一部分时，如何处理 TextBlock.KeyDown 事件？

> ID：11290150
> 
> 赞同：0
> 
> 时间：2012-07-02T08:28:10.547
> 
> 标签：c#, wpf, textblock

我有这个简单的`UserControl`：

```
<UserControl x:Class="WPFTreeViewEditing.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <TextBlock Text="Hello, world!" KeyDown="TextBlock_KeyDown" />
    </Grid>
</UserControl> 
```

我想处理 TextBlock.KeyDown 事件。因此，我在代码隐藏中添加了一个事件处理程序：

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();
    }

    private void TextBlock_KeyDown(object sender, KeyEventArgs e)
    {
        MessageBox.Show("Key up!");
    }
} 
```

但它不会触发。怎么了？

**更新。**

`PreviewKeyDown`也不火。

这`UserControl`在`HierarchicalDataTemplate`当时使用：

```
<Window x:Class="WPFTreeViewEditing.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WPFTreeViewEditing"
        Title="MainWindow" Height="265" Width="419">
    <Grid>
        <TreeView ItemsSource="{Binding}">
            <TreeView.Resources>
                <HierarchicalDataTemplate DataType="{x:Type local:ViewModel}" ItemsSource="{Binding Items}">
                    <local:UserControl1 />
                </HierarchicalDataTemplate>
            </TreeView.Resources>
        </TreeView>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:24:13.023

从[UIElement.KeyDown](http://msdn.microsoft.com/en-us/library/system.windows.uielement.keydown.aspx)的文档：

> **在焦点**位于此元素上时按下某个键时发生。

您正在使用没有焦点的 TextBlock，因此您的 KeyDown 事件将由另一个控件处理。

您可以切换到 TextBox 并应用一些样式，使其外观和行为类似于 TextBlock，但您将能够获得焦点并处理事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:31:26.743

您应该使用`PreviewKeyDown`事件而不是`KeyDown`事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T01:47:21.020

好的，即使这个问题是很久以前发布的，我也遇到了同样的问题，并找到了一种让 KeyDown 事件正常工作的方法，尽管它可能不是你要找的我会发布代码来帮助未来的人同样的问题。

首先，Xaml 对象中的 KeyDown 事件处理程序只有在该对象具有焦点时才会触发。因此，您需要一个 CoreWindow 事件处理程序，它有点像同一件事，但无论什么对象或事物具有焦点，它都会始终运行。以下将是代码。

```
//CLASS.xaml.h
ref class CLASS{
private:
    Platform::Agile<Windows::UI::Core::CoreWindow> window;

public:
    void KeyPressed(Windows::UI::Core::CoreWindow^ Window, Windows::UI::Core::KeyEventArgs^ Args);

//CLASS.xaml.cpp
CLASS::CLASS(){
    InitializeComponent();
    window = Window::Current->CoreWindow;

    window->KeyDown += ref new TypedEventHandler
    <Windows::UI::Core::CoreWindow^, Windows::UI::Core::KeyEventArgs^>(this, &CLASS::KeyPressed);
};

void CLASS::KeyPressed(Windows::UI::Core::CoreWindow^ Window, Windows::UI::Core::KeyEventArgs^ Args){
SimpleTextBox->Text = Args->VirtualKey.ToString();
}; 
```

基本上你想要一个值来保存你的窗口并使用它来创建一个新的 TypedEventHandler。为了安全起见，您通常希望在类的构造函数中执行此操作，该函数仅在类开始时调用一次（尽管我仍然更喜欢构造函数）。

您可以使用此方法为任何事件创建事件处理程序。只需将“KeyDown”更改为另一个属性，如 KeyUp、PointerMoved、PointerPressed，并将“&CLASS::KeyPressed”更改为您希望在收到相应类型的事件时触发的函数的名称。

# php - 使用 SwiftMailer 向不同的收件人发送不同的邮件

> ID：11290153
> 
> 赞同：1
> 
> 时间：2012-07-02T08:28:26.240
> 
> 标签：php, email, swiftmailer

我正在尝试使用 SwiftMailer 发送大量电子邮件，到目前为止我能够成功发送一封电子邮件。

但问题是我想 从我的数据库发送`different Messages`到。`different Recipients`

我知道如何使用`$message->addTo`函数添加多个收件人，但是我们过去`$message->setBody`在`batch send`.

那么如何以批处理模式将不同的消息发送给不同的收件人？

这是我的电子邮件格式，假设我正在向 100 个不同的用户发送工作匹配配置文件，每个 100 个不同的用户都有不同的内容

```
<User Name> <Email Address>

               <Job Matching Title 1>
               <Job Description>

               <Job Matching Title 2>
               <Job Description>                   

               <Job Matching Title 3>
               <Job Description> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:49:45.707

根据评论，装饰器插件可以帮助您实现这一目标 -

[http://swiftmailer.org/docs/plugins.html#decorator-plugin](http://swiftmailer.org/docs/plugins.html#decorator-plugin)

很高兴它对你有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:33:07.650

由于消息是自定义的，因此您必须生成和发送单独的电子邮件。

看看您是否可以在 Outlook 或任何其他电子邮件客户端中执行您要求的操作。如果你不能在那里，那么你也不能在这里。

# css - 基本字体大小与移动设备

> ID：11290156
> 
> 赞同：3
> 
> 时间：2012-07-02T08:28:33.970
> 
> 标签：css, mobile, responsive-design, font-size

在这些文章之后：

[CSS 字体大小：em vs. px vs. pt vs. percent](http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/)

[16 像素用于正文复制。任何少都是一个代价高昂的错误](http://www.smashingmagazine.com/2011/10/07/16-pixels-body-copy-anything-less-costly-mistake/)

我即将使用以下基本尺寸：

```
body {
    font-size: 100%;
} 
```

并将其用作基本段落字体大小，在桌面上产生**16px**，除非用户更改他的浏览器或系统设置。

* * *

该网站的布局是响应式的，我也担心它在移动设备上的外观 - 包括小型智能手机和高 DPI 显示器。

如果我只是指定`100%`，这在移动设备上会产生什么结果？**我可以期望浏览器**为给定的屏幕尺寸和 DPI 选择最佳字体大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T11:32:33.657

根据我的经验，如果您将其设置为 100%，大多数现代智能手机浏览器都非常擅长设置合适的字体大小 - 但您永远无法确定。

如果是我，我会通过手动设置**您喜欢**的较小屏幕分辨率的字体大小来添加额外的保护层。

```
@media (max-width: 767px) {
  body {
    font-size:18px;
  }
} 
```

粗略地说，您必须在移动设备上对其进行测试才能获得您正在寻找的完美字体大小。

亚当。

# java - 来自java程序的命令

> ID：11290157
> 
> 赞同：0
> 
> 时间：2012-07-02T08:28:37.180
> 
> 标签：java, command

```
package src;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader; 

public class Command
{ 
    public static void main(String args[]) 
    { 
        try 
        {
            Process p=Runtime.getRuntime().exec("cmd /c dir"); 
            p.waitFor(); 
            BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream())); 
            String line=reader.readLine(); 
            while(line!=null) 
            { 
                System.out.println(line); 
                line=reader.readLine(); 
            } 

        } 
        catch(IOException e1) {} 
        catch(InterruptedException e2) {} 

        System.out.println("Done"); 
    } 
} 
```

我试图运行这段代码，但它无法执行任何东西。我需要做一些类路径或其他设置来完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:42:52.410

注释行：

```
p.waitFor(); 
```

并重新运行。

您可能还想阅读[此内容](https://stackoverflow.com/a/5483880/1057429)

# c++ - 禁止其他应用程序编辑注册表项

> ID：11290158
> 
> 赞同：1
> 
> 时间：2012-07-02T08:28:38.173
> 
> 标签：c++, windows, registry

我们可以禁用对我们的应用程序使用的特定注册表项的编辑吗？我只希望我的应用程序对注册表进行更改，而其他人看不到或编辑它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:33:29.100

是和不是。

注册表充当系统上的任何其他文件。您可以在每个键上设置特定的访问修饰符。因此，如果您设置访问密钥，以便只有特定用户可以查看/编辑它们，那将会发生。但是，要使其正常工作，您的程序必须以该用户身份运行。

如果用户以同一用户身份启动另一个程序或 regedit，他也将能够修改/查看该密钥。

管理员将始终能够查看/修改该密钥。即使他不是所有者并且管理员权限已被删除，他仍然可以重新让自己成为所有者。

# java - 使用 StAX 读取所有文本元素

> ID：11290162
> 
> 赞同：1
> 
> 时间：2012-07-02T08:29:02.130
> 
> 标签：java, xml, xml-parsing, stax

我需要解析一个 xml 文件，无论其中的标签是什么，并读取其所有叶子的文本（仅限文本元素）。我正在使用 StAX，但似乎无法提前知道元素只是文本（因此 getElementText 会抛出不离开元素的异常）。所以我决定使用一个过滤器，只过滤标签元素，并以这种方式迭代抛出文档：

```
InputStream in = null;
    try {
        in = new FileInputStream("file.xml");
        DatiEstratti de = DatiEstratti.getInstance();

        // Processamento ad eventi
        XMLInputFactory factory = (XMLInputFactory) XMLInputFactory.newInstance();

        XMLEventReader eventReader = factory.createXMLEventReader(in);
        // usa il filtro per filtrare solo i tag element
        eventReader = factory.createFilteredReader(eventReader, new ElementOnlyFilter());

        while (eventReader.hasNext()) {

            XMLEvent event = eventReader.nextEvent();

            if (event.getEventType() == XMLStreamConstants.START_ELEMENT) {
                StartElement startElement = event.asStartElement();

                XMLEvent peekEvent = eventReader.peek();
                if(peekEvent.isEndElement()){
                    // questa è la prima volta che viene fatto un pop
                    // quindi è una foglia.
                    // recupera il dato.
                    String value = eventReader.getElementText();

                    logger.info("dato : " + value);
                }

                String nome = startElement.getName().getLocalPart();
                String prefix = startElement.getName().getPrefix();
                if (prefix != null) {
                    nome = prefix + ":" + nome;
                }
                de.push(nome);
                logger.info("push : " + de.stampaPercorso());

            } else if ((event.getEventType() == XMLStreamConstants.END_ELEMENT)) {

                de.pop();
                logger.info("pop : " + de.stampaPercorso());
                if (0 > de.nLivelliPercorso()) {
                    break;
                }
            }
            //handle more event types here...
        } 
```

...过滤器在哪里：

```
public class ElementOnlyFilter implements EventFilter, StreamFilter {

/* implementation of EventFilter interface */
@Override
public boolean accept(XMLEvent event) {
    return acceptInternal(event.getEventType(  ));
}

/* implementation of StreamFilter interface */
@Override
public boolean accept(XMLStreamReader reader) {
    return acceptInternal(reader.getEventType(  ));
}

/* internal utility method */
private boolean acceptInternal(int eventType) {
    return eventType == XMLStreamConstants.START_ELEMENT
            || eventType == XMLStreamConstants.END_ELEMENT;
}

} 
```

问题是找到休假时出现以下异常：

```
 javax.xml.stream.XMLStreamException: ParseError at [row,col]:[3,42]
Message: parser must be on START_ELEMENT to read next text
    at com.sun.xml.internal.stream.XMLEventReaderImpl.getElementText(XMLEventReaderImpl.java:114)
    at javax.xml.stream.util.EventReaderDelegate.getElementText(EventReaderDelegate.java:88)
    at xmlparser.XmlParser.main(XmlParser.java:63) 
```

我想知道方式。这段代码有问题吗？我认为 peek() 不会改变阅读器，因此 getElementText() 应该由开始元素调用。还有其他方法可以实现我的目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:07:27.633

首先，如果您过滤以仅包含开始和结束元素事件，那么您将根本看不到叶节点中包含的文本。我会使用不同的方法，使用未经过滤的流，如下所示：

```
XMLEventReader eventReader = factory.createXMLEventReader(in);
StringBuilder content = null;
while(eventReader.hasNext()) {
  XMLEvent event = eventReader.nextEvent();
  if(event.isStartElement()) {
    // other start element processing here
    content = new StringBuilder();
  } else if(event.isEndElement()) {
    if(content != null) {
      // this was a leaf element
      String leafText = content.toString();
      // do something with the leaf node
    } else {
      // not a leaf
    }
    // in all cases, discard content
    content = null;
  } else if(event.isCharacters()) {
    if(content != null) {
      content.append(event.asCharacters().getData());
    }
  }
  // other event types here
} 
```

诀窍是`content = null`在结束元素部分的末尾 - 在进入`if(event.isEndElement())`块时，如果`content`它是非空的，那么你知道在这个和相应的开始标签之间没有中间的结束元素事件，即它是一个叶节点。

# objective-c - 比较两个文件中的字符串在 Objective C 中返回 Null

> ID：11290166
> 
> 赞同：0
> 
> 时间：2012-07-02T08:29:33.120
> 
> 标签：objective-c, nsstring, nsarray

提前抱歉，这是一个初学者的问题。以下是我正在尝试做的步骤：

1.  读取两个文本文件（用于专有名称和常规单词的 unix 单词列表文件）
2.  将文本分成字符串
3.  将分隔的字符串放入每个列表的数组中
4.  比较数组并计算匹配数

无论出于何种原因，此代码都会不断返回空匹配项。我可能在做什么？非常感谢您的帮助。

```
 int main (int argc, const char * argv[])
{

    @autoreleasepool {

        // Place discrete words into arrays for respective lists
        NSArray *regularwords = [[NSString stringWithContentsOfFile:@"/usr/dict/words" encoding:NSUTF8StringEncoding error:NULL] componentsSeparatedByString:@"\n"];
        NSArray *propernames = [[NSString stringWithContentsOfFile:@"/usr/dict/propernames" encoding:NSUTF8StringEncoding error:NULL] componentsSeparatedByString:@"\n"];

        // The compare and count loop
        NSInteger *counter;
        for (int i = 0; i < [propernames count]; i++) {
            NSString *stringFromRegularWords = [regularwords objectAtIndex:i];
            NSString *properNamesString = [propernames objectAtIndex:i];
            if ([properNamesString isEqualToString:stringFromRegularWords]) {
                counter++;
            }
        }
        // Print the number of matches
        NSLog(@"There was a total of %@ matching words", counter);
    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:32:10.693

你正在做`objectAtIndex:i`，期望单词在两个文件中的索引完全相同。您可能应该做的是将其中一个文件中的条目添加到 NSMutableSet 中，然后以这种方式检查成员资格。

```
 // Place discrete words into arrays for respective lists
    NSArray *regularwords = [[NSString stringWithContentsOfFile:@"/usr/dict/words" encoding:NSUTF8StringEncoding error:NULL] componentsSeparatedByString:@"\n"];
    NSArray *propernames = [[NSString stringWithContentsOfFile:@"/usr/dict/propernames" encoding:NSUTF8StringEncoding error:NULL] componentsSeparatedByString:@"\n"];

    // Add each of the words to a set so that we can quickly look them up
    NSMutableSet* wordsLookup = [NSMutableSet set];
    for (NSString* word in regularwords) {
         [wordsLookup addObject:word];
    }

    NSInteger *counter;
    for (NSString *properName in propernames) {
        // This efficiently checks if the properName occurs in wordsLookup
        if ([wordsLookup containsObject:properName]) {
            counter++;
        }
    } 
```

请注意，我的示例还使用“快速枚举”，即`for ... in`语法。虽然没有必要解决您的问题，但它确实使代码更短并且可以说更快。

# wordpress - IE7 & 8 默认为骨骼 wordpress 主题的最小样式表

> ID：11290167
> 
> 赞同：2
> 
> 时间：2012-07-02T08:29:41.053
> 
> 标签：wordpress, internet-explorer-8, media-queries

我正在使用骨骼响应主题作为样板来设计一个 wordpress 主题。然而，由于浏览器呈现最小的样式表选项，该主题在 IE7 和 8 中失败。基本上它继承了所有的基本样式，并且没有从 768up.css 和 1080up.css 继承。

我环顾四周，认为会有一些关于此的文档，但找不到任何文档。

骨骼主题可以在这里找到[http://themble.com/bones/](http://themble.com/bones/)

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:18:41.590

IE 7 + 8 不支持媒体查询。几个月前我很难学到这一点。

我让他们使用出色的 Respond.js 工作。

[http://responsejs.com/](http://responsejs.com/)

**编辑：**我对 Wordpress 不太熟悉，但看起来有一个插件可以解决这个问题 - [http://wordpress.org/extend/plugins/respondjs/](http://wordpress.org/extend/plugins/respondjs/)

# scala - `isInstanceOf` 是如何工作的？

> ID：11290169
> 
> 赞同：29
> 
> 时间：2012-07-02T08:29:50.757
> 
> 标签：scala, subtype

假设，我们有：

```
class B
class A extends B
trait T 
```

然后它成立：

```
val a: A with T = new A with T 
a.isInstanceOf[B]  // result is true ! 
```

是否可以说，该`isInstanceOf`方法检查是否至少有一种类型（不是所有类型）与子类型关系中的右侧匹配？

乍一看，我认为带有 type 的值`A with T`不能是 的子类型`B`，因为`A` **和** `T`不是 的子类型`B`。但它是`A` **或者** `T`是一个子类型`B`——对吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-02T08:35:51.407

`isInstanceOf`查看继承链中是否有相应的条目。`A with T`包含`A`和`B`的链必须为真`T`。`a.isInstanceOf[B]`

编辑：

实际上生成的字节码调用 javas `instanceof`，所以它会`a instanceof B`在 java.xml 中。更复杂一点的调用`a.isInstanceOf[A with T]`就像`(a instanceof A) && (a instanceof T)`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-02T13:58:49.710

> 乍一看，我认为类型 A 和 T 的值不能是 B 的子类型

这里有两个误解。首先，实例的静态类型对结果有任何影响`isInstanceOf`：没有。需要明确的是，在做的时候， type`a.isInstanceOf[B]`的事实*是不相关*的。`a``A with T`

 *该方法`isInstanceOf`由 JVM 在字节码级别实现。它查看*每个实例携带*的类信息，并检查是`B`类之一（实例本身及其祖先的类）还是实现的接口之一。这就是“is-a”关系：“a is a B”。

从技术上讲，`isInstanceOf`它是 Java 反射的一部分，它被称为`instanceof`.

第二个误解是继承可以以某种方式*删除*父类型。这永远不会发生：继承只添加类型，从不删除它们。类型`A with T`是 an `A`, a `B`, a `T`, an`AnyVal`和 an `Any`。因此，即使`isInstanceOf`确实查看了 type `A with T`，它仍然会返回 true。*

# python - 在 web2py 中从服务器下载文件

> ID：11290179
> 
> 赞同：0
> 
> 时间：2012-07-02T08:30:47.427
> 
> 标签：python, web2py

我目前正在建立一个网站，从中获取用户上传的文件，对其进行一些处理，并提供一个链接供用户下载处理后的文件。我目前想在本地系统上提供文件的路径，我是 web2py 的新手，并且在执行此操作时遇到了麻烦。

有人可以帮我这样做吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:50:23.413

请参阅此链接以获取一些提示：[webpy：如何流式传输文件](http://webpy.org/cookbook/streaming_large_files)，并且可能会添加一些如下代码：

```
BUF_SIZE = 262144
class download:
    def GET(self):
        file_name = # get from url
        file_path = os.path.join('/path to your file', file_name)
        f = None
        try:
            f = open(file_path, "rb")
            webpy.header('Content-Type','application/octet-stream')
            webpy.header('Content-disposition', 'attachment; filename=%s' % file_name)
            while True:
                c = f.read(BUF_SIZE)
                if c:
                    yield c
                else:
                    break
        except Exception, e:
            # throw 403 or 500 or just leave it
            pass
        finally:
            if f:
                f.close() 
```

# eclipse-emf - 如何使 EMF 删除为已删除属性生成的代码

> ID：11290181
> 
> 赞同：0
> 
> 时间：2012-07-02T08:30:52.987
> 
> 标签：eclipse-emf, eclipse-emf-ecore

从 ecore 模型中删除属性后，我重新生成代码，但删除属性中的方法仍保留在生成的代码中。是否有自动删除此代码的方法？

编辑 - 代码已从接口中删除，但未从实现中删除。我想将其从实施中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:47:03.137

如果您的实现类在属性的 javadoc 中有 @generated 标记，它们也应该被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:52:15.300

这并不总是有效，我知道的唯一方法是删除 impl 类并根据新的 ecore 模型重新生成代码。

# ios - 在 navigationController 中显示 modalviewController 后，push 和 pop 动画会损坏

> ID：11290182
> 
> 赞同：1
> 
> 时间：2012-07-02T08:30:53.843
> 
> 标签：ios, iphone, objective-c, uinavigationcontroller, modal-view

我有一个普通的 NavigationController。当我打开一个 modalView（使用 segues）并关闭它时，来自 NavigationController 的所有下一个推送和弹出动画都会变得混乱。

基本上它只动画导航栏，但该视图的内容没有动画（向左或向右）！

细节：

1.  NavigationController A 推送 viewController B。
2.  ViewController B 提供了一个 modalView。
3.  模型视图被解雇。
4.  用户在 viewController B 中按下后退按钮 --> 左侧（到 ViewController A）的动画未显示！

有谁知道发生了什么？

一些代码（2.show modal）：

```
- (void)sendFilesDidPick:(SendFilesType)type{
    switch (type) {
        case Library:
            if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]){
                UIImagePickerController *picker = [[UIImagePickerController alloc] init];
                picker.delegate = self;

                picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
            picker.mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
            picker.allowsEditing = YES;
            [self presentModalViewController:picker animated:YES];
        }else {
            ////TODO: Tell user not available
        }
        break;
    default:
        break;
    }
} 
```

一些代码（3.）：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{

    [self dismissModalViewControllerAnimated:YES];
} 
```

好的，我有一个线索：在模态视图出现并关闭后，所有其他可能消失的视图都不会调用“ViewWillDissapear”。这可能就是杀死所有东西的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:58:28.083

好的，我发现了问题！

我有一个标签栏子类。在我的子类中，我正在这样做：

```
- (void)viewDidAppear:(BOOL)animated {
     //Custom code
} 
```

我改成这样：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    //Custom code
} 
```

现在每件事似乎都正常工作！

# xcode - Xcode 版本/AppStore

> ID：11290186
> 
> 赞同：1
> 
> 时间：2012-07-02T08:31:04.413
> 
> 标签：xcode, version

准备好将应用程序放到 appStore 上时；是否需要最低版本的 Xcode？还是任何版本都好？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-29T13:59:37.597

据[苹果](https://developer.apple.com/library/ios/qa/qa1806/_index.html)称，

*   您应该始终使用[最新的 Xcode](https://developer.apple.com/downloads/)（需要 Apple ID 才能登录）

> 注意：您可以使用最新的 SDK 构建，并在较早的操作系统上运行您的应用程序。部署目标构建设置控制您的应用程序将在其上运行的最低操作系统版本。此设置独立于 Base SDK 构建设置。

# 使用任何其他 SDK 是临时的

*   请务必了解，使用较旧的 SDK 是一种临时解决方法，而不是解决方案。应尽快修复阻止您的应用使用最新 SDK 的问题。在旧的构建系统仍然受支持的情况下，修复这些问题会容易得多。

# 最新最简单的方法

[应用程序加载器](https://stackoverflow.com/questions/8094317/where-to-find-application-loader-app-in-mac)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T13:38:43.460

您需要有一些 XCode 的最低版本，但不需要有最新版本...

有关将应用程序提交到应用程序商店的简单步骤和指南，请查看以下网址

[App Store 提交和证书创建的简单步骤 -**来自 iOSCodeGUIDE**](http://ioscodeguide.blogspot.in/2017/05/app-store-submission-and-certification.html)

# xcode - 获取当前执行的应用程序的 PID

> ID：11290194
> 
> 赞同：5
> 
> 时间：2012-07-02T08:31:31.477
> 
> 标签：xcode, memory, malloc, malloc-history

在 XCode 上调试时，我想从这个示例中了解如何获取当前调试的应用程序的 PID；

2012-07-02 16:02:02.124 应用名称[14995:700]

其中哪一个是pid？我需要获取 pid，因为我想使用 malloc_history 检查内存泄漏，这需要应用程序的 pid，

我尝试了 ff: 组合，

```
shell malloc_history
 app 
 appname.app
 appname[14995]
 appname[14995:700]
 14995
 14995:700
 700
0x000000 (address) 
```

但我总是得到该进程在历史记录中不存在（malloc_history 找不到您有权访问的进程，其名称类似于“”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-28T15:59:23.553

如果您使用的是 Cocoa，您可以使用：

```
[NSProcessInfo processInfo].processIdentifier; 
```

# c# - 从文件中搜索字符串的正则表达式可能是什么？

> ID：11290195
> 
> 赞同：0
> 
> 时间：2012-07-02T08:31:41.303
> 
> 标签：c#, asp.net, regex

我有一个包含这些行的 HTML 文件 -

```
<script>PrintFileURL("13572_BranchInformationReport_2012-06-29.xml","13572_BranchInformationReport_2012-06-29.zip",0,"184277","Jun 29  1:30","/icons/default.gif")</script>
<script>PrintFileURL("13572_BranchInformationReport_2012-07-02.zip","13572_BranchInformationReport_2012-07-02.zip",0,"184302","Jul  2  1:30","/icons/default.gif")</script>
<script>PrintFileURL("13572_IndividualInformationReportDelta_2012-06-29_033352.zip","13572_IndividualInformationReportDelta_2012-06-29_033352.zip",0,"53147","Jun 29  3:33","/icons/default.gif")</script>
<script>PrintFileURL("13572_IndividualInformationReportDelta_2012-07-02_033458.zip","13572_IndividualInformationReportDelta_2012-07-02_033458.zip",0,"62719","Jul  2  3:35","/icons/default.gif")</script>
<script>PrintFileURL("13572_IndividualInformationReport_2012-07-01.acc","13572_IndividualInformationReport_2012-07-01.zip",0,"4033364","Jul  1 12:50","/icons/default.gif")</script> 
```

我需要从这个字符串中提取文件名 -

> 13572_IndividualInformationReportDelta_2012-06-29_033352.zip
> 
> 13572_IndividualInformationReportDelta_2012-07-02_033458.zip
> 
> 13572_BranchInformationReport_2012-07-02.zip
> 
> 13572_BranchInformationReport_2012-07-02.xml
> 
> 13572_IndividualInformationReport_2012-07-01.acc

现在我正在使用以下正则表达式代码 -

```
 var fileNames = from Match m in Regex.Matches(pageSource, @"[0-9]+_+[A-Za-z]+_+[0-9]+-+[0-9]+-+[0-9]+\.+(acc|zip|app|xml|def|enr|exm|fpr|pnd|trm)")
                        select m.Value; 
```

它给了我最后 3 个文件，但没有给我前 2 个文件。

有人可以为我提供一个正则表达式来提取所有这些文件吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:36:05.837

添加`(_+[0-9]+)?`到它：

```
var fileNames = from Match m in Regex.Matches(pageSource, @"[0-9]+_+[A-Za-z]+_+[0-9]+-+[0-9]+-+[0-9]+(_+[0-9]+)?\.+(acc|zip|app|xml|def|enr|exm|fpr|pnd|trm)") 
```

这意味着它还应该与`_+[0-9]+`文件名中的可选后缀匹配行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:42:04.897

`\d+_\w+_\d+-\d+-\d+(_\d+)?\.+(acc|zip|app|xml|def|enr|exm|fpr|pnd|trm)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:44:00.147

试试下面的正则表达式

```
@"^[^\(]*\(\""([^""]+)\""" 
```

并使用：

```
match.Groups[1]; 
```

# php - 句子的正则表达式

> ID：11290198
> 
> 赞同：0
> 
> 时间：2012-07-02T08:32:01.620
> 
> 标签：php, regex

我构建了一个正则表达式来匹配 PHP 脚本中的句子，虽然效果很好，但它错过了第一句话。这是包含正则表达式的 PHP。

```
preg_match_all('([A-Z][^\.!?]*[\.!?]\s)', '$data', $arr, PREG_OFFSET_CAPTURE); 
```

用于测试的字符串。

> Persoonsgegevens van 84.000 Bol.com-klanten waren toegankelijk via een lek in de site van een externe partij waar Bol.com mee samenwerkte。Het ging om een kwetsbaarheid voor sql-injectie。De gegevens zijn volgens Bol.com niet misbruikt。
> 
> De webwinkel heeft de getroffen klanten uit zichzelf geïnformeerd, blijkt onder meer uit een topic op GoT。Het gaat om 84.000 klanten die meededen aan de 'kennismakingsactie' Warm Welkom。
> 
> De klantgegevens stonden in een database van een externe partij waar Bol.com mee samenwerkte voor de actie, zegt Bol.com-directeur Daniel Ropers tegenover Tweakers.net。Van de klanten konden naam, geslacht, e-mailadres en geboortedatum worden achterhaald; betaalgegevens 商品 niet toegankelijk。
> 
> “We hebben gisteravond klanten geïnformeerd die eind vorig jaar hebben meegedaan aan de marketingactie”，zegt Ropers。“通过 het Bureau dat de actie heeft verzorgd waren gedurende een bepaalde periode gegevens toegankelijk。” Het lek zou in ieder geval vorig jaar zomer al in de software hebben gezeten。Sinds februari waren de gegevens versleuteld。Volgens Webwereld gaat het om een lek 在 de tool amfphp 中。
> 
> Bol.com ondernam actie nadat het bedrijf werd getipt。Ropers：“Buiten de tipgever 是 er niemand bij de data geweest；er 是 niets uitgelekt。我们 zijn de tipgever zeer dankbaar。” Hij benadrukt dat Bol.com zelf niet is gehackt, maar zegt ook dat het bedrijf desondanks zijn verantwoordelijkheid wil nemen。“Voor alle bedrijven waar we me come samenwerken hebben we security-checklists. Daar moeten we dus een stap verder in gaan。” 资料来源：[Tweakers.net](http://tweakers.net/nieuws/82873/gegevens-deel-bol-punt-com-klanten-waren-toegankelijk-via-sql-injectie.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:37:10.130

我会使用这个正则表达式来匹配句子：

```
'.*?([\.!?]+|$)' 
```

在此处添加更多调整，并为测试输入提供更好看的输出（仅测试输入 - 不保证一般文本）：

```
/[\S].*?(?:[\.!?]+["]?(?=\s)|$)/ 
```

# graphics - 如何在 C++ 中为光线追踪绘制像素？

> ID：11290200
> 
> 赞同：2
> 
> 时间：2012-07-02T08:32:15.123
> 
> 标签：graphics, pixel, trace

我目前正在尝试学习 C++ 中的光线追踪。我从两本书中得到帮助：一本是[Kevin Suffern 的 Ray Tracing from the Ground Up](http://www.raytracegroundup.com/)，另一本是[Matt Pharr 的基于物理的渲染](http://www.pbrt.org/)。这两本书非常适合学习基础知识，然后是高级知识。

我可以使用 Suffern 书中的用户界面创建一些基本形状。但是，当我尝试自己编写所有代码时，事情就变得疯狂了。我意识到我什至不知道如何打开一个窗口并在上面填充像素。你有什么好的资源可以推荐，可以教我用 C++ 绘图的基础知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T10:24:40.480

您可以生成图像文件而不是绘制到窗口。[PPM](http://netpbm.sourceforge.net/doc/ppm.html)格式是最容易生成的格式。浏览器通常可以显示 PPM。Safari 可以。

如果要生成 PNG 文件，请使用[libpng](http://www.libpng.org/pub/png/libpng.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:34:26.453

SDL might work for you: [http://www.libsdl.org/](http://www.libsdl.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:23:14.933

您可以分配自己的图像缓冲区，将像素写入其中，然后根据需要保存到文件/绘制到窗口。我希望 Pharr 的书在某处藏有它自己的版本，由 Literate Programming 提供。

更具体地说：GUI API 和图像文件格式库通常能够读取以行优先数组顺序存储的简单图像缓冲区数据。我会推荐一种 RGBA 像素格式，如下所示：

```
template<class T> class image_rgba {
  unsigned m_rows, m_cols;
  T *m_data;

public:
  image_rgba(unsigned rows, unsigned columns)
    : m_rows(rows)
    , m_cols(columns)
    , m_data(new T[rows*columns*4])
  {}
  ~image_rgba()  { delete[] m_data; }

  typedef T pixel[4];
  pixel index_pixel_ref(unsigned row, unsigned col)  {
    assert(row<m_rows && col<m_cols);
    return m_data + (m_cols*row+col)*4;
  }
} 
```

（请注意，我没有测试上述内容——最好将其视为伪代码......）

# primefaces - primefaces 中的 poll 的替代方案

> ID：11290201
> 
> 赞同：0
> 
> 时间：2012-07-02T08:32:17.507
> 
> 标签：primefaces

我正在使用primeface 3.2。我正在使用 ajax poll 来让每个反应都进入 gui。但是 ajax poll 并没有停止。我试图在服务器端停止。我正在使用 stop=true 来停止投票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:42:47.977

**更新**

这是展示[投票的链接 - 开始/停止](http://www.primefaces.org/showcase/ui/pollStartStop.jsf)

* * *

**老的**

如果你想从服务器端停止轮询，你可以使用 *RequestContext API *

就像*cagataycivici所描述的那样*

看看他的（旧）博客文章

[如何停止从服务器端轮询](http://cagataycivici.wordpress.com/2011/05/23/how-to-stop-polling-from-server-side/)

代码片段

客户

```
<p:poll listener="#{bean.listener}" update="sth"  stop="#{bean.stop}"/> 
```

服务器

```
private boolean stop = false;

public void listener() {
    if(condition) {
        stop = true;    
    }
} 
```

# iphone - registerNib forCellReuseIdentifier 不重用单元格

> ID：11290202
> 
> 赞同：2
> 
> 时间：2012-07-02T08:32:18.620
> 
> 标签：iphone, objective-c, ios

分析我的应用程序，如果表格视图正确出列，我在“生活”中看到我的单元格 (PZCell) 的 25 个实例应该有 7 个左右。我的代码如下。

```
- (void)viewDidLoad 
{
    [super viewDidLoad];

    [self.tableView registerNib:[UINib nibWithNibName:@"PZCell" bundle:[NSBundle mainBundle]] 
         forCellReuseIdentifier:@"PZCell"];

    self.tableView.delegate = self;
    self.tableView.dataSource = self;
    self.view.backgroundColor = [UIColor clearColor];
} 
```

* * *

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    PZCell *aCell = (PZCell *) [tableView dequeueReusableCellWithIdentifier:@"PZCell"];
    [aCell setResult:[self.result.results objectAtIndex:[indexPath row]]];
    return aCell;
} 
```

在 nib 中设置重用标识符没有任何区别。任何帮助表示赞赏。干杯

# mysql - 合并 SELECT 和 SHOW 查询

> ID：11290204
> 
> 赞同：1
> 
> 时间：2012-07-02T08:32:27.230
> 
> 标签：mysql

我可以合并 SELECT 查询和 SHOW 语句的结果吗？

例如 - 需要在一张表中得到答案：

```
 select * from INFORMATION_SCHEMA.VIEWS 
```

和

```
 show create view `v1` 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:39:26.210

不，你不能。但是下面的查询会给出类似的结果：

```
SELECT *, CONCAT(
 "CREATE",
 -- can't get ALGORITHM
 " DEFINER = '",
   SUBSTRING_INDEX(DEFINER, '@', 1), "'@'", SUBSTRING_INDEX(DEFINER, '@', -1), "'",
 " SQL SECURITY ", SECURITY_TYPE,
 " VIEW `", REPLACE(TABLE_NAME, "`", "``"), "`",
 " AS ", VIEW_DEFINITION,
 IF(CHECK_OPTION <> "NONE", CONCAT(" WITH ", CHECK_OPTION, " CHECK OPTION"), "")
) AS `CREATE`
FROM INFORMATION_SCHEMA.VIEWS 
```

# dojo - 带有突出显示 html 的 dijit.InlineEditBox

> ID：11290206
> 
> 赞同：0
> 
> 时间：2012-07-02T08:32:30.260
> 
> 标签：dojo, highlight, inlineeditbox

我有一些 dijit.InlineEditBox 小部件，现在我需要在它们上面添加一些搜索突出显示，所以我返回的结果带有一个带有 class="highlight" 的跨度超过匹配的单词。生成的代码如下所示：

```
<div id="title_514141" data-dojo-type="dijit.InlineEditBox" 
     data-dojo-props="editor:\'dijit.form.TextBox\', onFocus:titles.save_old_value, 
     onChange:titles.save_inline, renderAsHtml:true">Twenty Thousand Leagues <span 
     class="highlight">Under</span> the Sea</div> 
```

这看起来和预期的一样，但是，当我开始编辑标题时，添加的跨度就会显示出来。如何让编辑器删除添加的跨度，以便只保留文本？

在这种特殊情况下，书籍的标题中没有 html，因此某种完整的标签剥离应该可以工作，但最好找到一个解决方案（如果是带有 dijit.Editor 小部件的简短描述字段），其中现有的 html 保留在原处，仅删除突出显示的范围。

此外，如果您能提出更好的方法（内联编辑和单词突出显示），请告诉我。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:46:25.620

这将如何影响您在编辑器中显示的内容？这取决于您允许进入该字段的内容 - 您将需要一个富文本编辑器（巨大的足迹）来正确处理 html。

这些 RegExp 将修剪掉 XML 标记

```
this.value = this.displayNode.innerHTML.replace(/<[^>]*>/, " ").replace(/<\/[^>]*>/, ''); 
```

这是以下代码的运行示例：[fiddle](http://jsfiddle.net/seeds/5eNSC/)

```
<div id="title_514141" data-dojo-type="dijit.InlineEditBox" 
     data-dojo-props="editor:\'dijit.form.TextBox\', onFocus:titles.save_old_value, 
     onChange:titles.save_inline, renderAsHtml:true">Twenty Thousand Leagues <span 
     class="highlight">Under</span> the Sea

 <script type="dojo/method" event="onFocus">
   this.value = this.displayNode.innerHTML.
      replace(/<[^>]*>/, " ").
      replace(/<\/[^>]*>/, '');
   this.inherited(arguments);
 </script>
</div> 
```

renderAsHtml 属性仅修剪“关闭一层”，因此嵌入的 HTML 仍将是 html afaik。有了以上内容，您应该能够 1) 覆盖`onFocus`处理，2) 自己设置可编辑值，3) 调用“旧”`onFocus`方法。

或者（因为看到你已经在道具中设置了'titles.save_*'，使用`dojo/connect`而不是`dojo/method`- 但你需要先到达那里，有点说。

# objective-c - 应用程序不等待方法完成执行

> ID：11290208
> 
> 赞同：0
> 
> 时间：2012-07-02T08:32:31.447
> 
> 标签：objective-c, ios

我有一个`getnamefornumbers`调用基于soap的Web服务（生成sudzc）的方法，它返回一些我存储在数组中以供使用的数据。但问题是，当我调用该方法时，它需要时间来执行，并且在该方法也执行之后编码，这会导致空数组。

当此方法完成其工作然后执行其余代码时，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:35:52.307

您应该使用`NSURLConnection`委托方法。在异步环境中，这是正常行为：

1.  您拨打电话（以异步方式）
2.  应用程序继续运行（在您进行 1\. 调用后，程序继续执行其余说明）

所以你必须有两个解决方案，让它同步，所以你只会在答案到来后继续（在你的情况下，数组被填满），我可能会不鼓励。或者，您将其设为异步，并在实际拥有该数组时使用该数组。

至于如何实施的具体细节，必须提供更多细节，以便我为您提供建议。

* * *

**更新 1.0**

```
-(void)requestConnectionToServer{

   NSURL *url= [NSURL URLWithString:@"myWebServiceURL"];

    NSMutableURLRequest *theRequest=[NSMutableURLRequest requestWithURL:url];

    self.reference=aReference;

    [theRequest setHTTPMethod:@"GET"];

    [theRequest setTimeoutInterval:20.0];
    [NSURLConnection connectionWithRequest:theRequest delegate:self];
}

#pragma mark NSURLConnectionDelegate Implementation

-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    NSLog(@"Response:%@",[[NSString alloc] initWithData:webData encoding:NSASCIIStringEncoding]);

}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
    NSLog(@"ERROR with theConenction %@",error);
} 
```

* * *

**更新 2.0**

```
 dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

    dispatch_async(queue, ^{

        myArray = [MyWebServiceAccess getnamefornumbers];

        dispatch_sync(dispatch_get_main_queue(), ^{
            [myArray makeSomething];
        });
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:36:29.263

您必须使用自定义委托。您应该定义协议并将当前类委托给负责执行 getnamefornumbers 的类。操作完成后，您应该返回调用者类。

这是协议的示例[http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)

# mongodb - MongoDB multikey：最大（推荐，有效）键数？

> ID：11290222
> 
> 赞同：1
> 
> 时间：2012-07-02T08:33:19.997
> 
> 标签：mongodb, indexing, feed, multikey

我有“提要”集合，每个提要都有评论。因此，当有人对提要发表评论时，他会被添加到 Mongo 的多键字段“订阅者”中。

```
feeds: {
 _id: ...,
 text: "Text",
 comments: [{by: "A", text: "asd"},{by: "B", text: "sdf"}],
 subscribers: ["A","B"]

} 
```

然后，当我需要获取用户 A 的所有带有新评论的提要时，我会请求带有 {subscribers:"A"} 的提要。

通常有 2-5 条评论，但有时（在热门提要上）可能有超过 100 条评论和超过 100 条订阅者。

我知道不建议使用包含太多键的多键字段。那么多少算太多？

我问是因为我需要决定 - 我是使用多键还是直接向每个用户发送评论更好。在这种情况下，我必须为每个订阅者复制提要 - 并且集合会增长得非常快 - 我认为这也不好：1000 个用户，每个用户后面跟着 10 个用户，每个用户每天执行 10 个操作 = 每 10 个记录 1 000 000天！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:32:17.243

尽管您可能会在处理非常大的文档时遇到问题，尤其是当 MongoDB 必须扫描整个文档以完成查询时，如您所料；具有大量值的数组在 MongoDB 中并没有问题，即使它们是多键索引。

有一个警告：索引不会存储超过 1024 字节的键（在多键文档的情况下，这是数组中的项目）。只要数组中的项目比这个限制短，你应该没问题。

话虽如此，您**确实**希望避免使用数组或文档的其他部分将无限且永远增长的数据模型。虽然 MongoDB 为每个文档在磁盘上添加了一点填充，但如果文档在创建后大幅增长，数据库必须将其移动到磁盘上的另一个位置。无论您决定对数据进行建模，请确保您的文档在创建后不会增长太多。

参考：

*   [索引大小限制](http://docs.mongodb.org/manual/reference/limits/#limit-index-size)
*   [多键索引](http://www.mongodb.org/display/DOCS/Multikeys)

# java - Eclipse 无法创建可运行的 jar - 未选择资源

> ID：11290225
> 
> 赞同：37
> 
> 时间：2012-07-02T08:33:37.490
> 
> 标签：java, eclipse, executable-jar

当我尝试将我的项目导出为可运行的 jar 时，Eclise 给了我以下错误：

未选择资源。

该项目在 Eclipse 中运行良好，我已经尝试在导出之前清理项目，但这不起作用。

有想法该怎么解决这个吗。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-24T19:02:20.880

问题很可能与您的运行配置有关。

*   转到包含您希望在从命令行调用 jar 时自动运行的 main(String[] args) 方法的类
*   右键单击->运行方式...->应用程序
*   确保它运行到您满意
*   现在像以前一样完成导出过程，选择**新**创建的启动配置。

最后一步是关键。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-11-14T08:29:53.863

我找到了另一个解决方案。

我发现 JDK 9 中有一个错误。

我通过降级到 JDK 8(1.8.1) 解决了这个问题

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T09:58:30.180

我解决了这个问题，我将项目导出为存档文件。然后我打开了一个新的工作区并导入了存档的项目。之后，我尝试将项目导出为可运行的 jar，经过两次尝试后，jar 按原样运行。

我仍然不知道确切的原因是什么，但我希望遇到同样问题的人会觉得这很有帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-14T15:38:27.280

执行 (project->clean) 并创建一个新的运行配置（选择正确的项目和类名并使用 main() 方法）为我解决了这个问题。您只需在导出可运行 jar 时选择新的运行配置 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T08:52:15.060

试试这个，这是在eclipse中创建jar或runnable jar的方法，项目中的所有外部库都将包含在内

```
File -> Export-> Java ->Runnbale JAR file

Launch configuration : your Class containing the public static void main(String[] args)

Export destination : Target place

Library Handling:

Package required libraries into generated JAR

FINISH 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T08:36:07.253

当您在 Eclipse 中单击此选项时，您应该会看到一个弹出窗口，让您选择要导出的文件，您需要选择 src 文件夹。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-12T03:10:41.597

我遇到了同样的问题，我能够解决它。也许你应该交叉验证`main`你在这个项目中选择的类。其他项目的类可能与您选择`main`的类同名。`main`确保您选择的`main`课程是您选择的项目中的课程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-01T11:16:00.457

问题是你的包裹。你可能重命名了它，并且在导出选项中，程序很混乱，它使用了你的包的名字。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-27T20:42:39.407

这基本上是在您更改程序包名称时发生的。这会造成关于包的混淆，根据程序导出，main 方法仍然写在旧包中。要解决它，只需将其复制并粘贴到具有不同名称的同一个包中，然后尝试导出它。也检查日志。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-10T23:59:27.367

我也有同样的情况。对我来说，删除现有的 Eclipse 安装（不是项目工作区）并使用新安装的 Eclipse 打开现有的 Eclipse 工作区是唯一有效的方法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-24T12:33:42.423

只需将项目复制为新项目即可。通过创建新的运行/调试设置来配置构建路径。这将解决问题。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-11-05T19:10:43.560

我继续收到“未选择资源”错误。然后我做了我引用的程序，它给了我一个清单文件。然后我能够创建一个可执行的 JAR。

引用：“我将项目导出为存档文件。然后我打开了一个新的工作区并导入了存档的项目。之后我尝试将项目导出为可运行的 jar，经过两次尝试后 jar 按原样运行。 "

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-07-11T19:58:02.070

我也遇到了同样的问题，就我而言，我刚刚关闭了项目并重新打开它，现在它正在工作

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2013-03-27T16:40:59.013

在选择主类时检查您的项目是否正确。

如果类不存在，则为 Eclipse 的标准错误。

# architecture - 不同计算机体系结构之间数据传输时的问题

> ID：11290228
> 
> 赞同：2
> 
> 时间：2012-07-02T08:33:41.750
> 
> 标签：architecture, distributed-computing, data-transfer, computer-architecture

我对不同计算机体系结构之间的数据传输有疑问。在此过程中具体转换***整数、浮点数和字符型***数据时会出现什么样的问题？您能否提供有关这些特定类型的简要信息？

我搜索了它，但找不到任何必要的信息。任何信息将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:40:55.437

在现代机器上的架构之间移植代码的最大区别是：

1.  指针的大小：例如 32 位与 64 位。
2.  long 的大小：通常与指针的大小相同。
3.  字节顺序：大端或小端（或一些古代机器是中端）。
4.  二进制浮点与十进制浮点：十进制浮点是 2008 年添加的最新标准。这不是一个常见问题，但许多机器没有硬件支持（IBM Power 机器是唯一的吗？）十进制浮点指向并具有仿真库。

在谈论真正的旧机器时，还有一些事情：

1.  机器字的长度：与指针大小有关
2.  一个字节中的位数：现在标准化为 8，但 40 多年前，情况并非如此。
3.  浮点数的表示。在 IEEE-754 之前，没有标准，不同的机器有不同的表示。具有两种浮点类型的 VAX 可能是最著名的例子之一。
4.  负数的表示。今天的机器使用二进制补码。Cray 1 以使用补码而著称。

# c# - 如何从日期名称创建数组？

> ID：11290230
> 
> 赞同：0
> 
> 时间：2012-07-02T08:33:50.930
> 
> 标签：c#, arrays, winforms, datetime

> **可能重复：**
> [如何获取下个月每一天的名称？](https://stackoverflow.com/questions/11288893/how-to-get-the-name-of-each-day-in-next-month)

我需要在 currentMonth 从 DayNames 创建一个数组

```
DateTime dt = new DateTime();
dt = DateTime.Now;
string[] days = ( names of days);  // this month should be: Sunday, Monday... 
```

我该怎么做，请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:46:52.927

获取当月所有日期名称的 LINQ 方式，以*“Sunday”*开头（en-us 中的 fe）：

```
var now = DateTime.Now;
var culture = System.Globalization.CultureInfo.CurrentCulture;
String[] thisMonthDays = 
     Enumerable.Range(1, culture.Calendar.GetDaysInMonth(now.Year, now.Month))
               .Select(day => new DateTime(now.Year, now.Month, day))
               .Select(date => culture.DateTimeFormat.GetDayName(date.DayOfWeek))
               .ToArray(); 
```

（因为我来自德国，所以列表以*“Sonntag”*开头）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:36:10.877

您好，您可以查找 DayOfWeek 枚举[http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)

```
var arr = Enum.GetValues(typeof(DayOfWeek)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T08:39:55.707

你可以做：

```
DateTime dt = DateTime.Now;
DateTime end_DateTime = 
        new DateTime(dt.Year, dt.Month, DateTime.DaysInMonth(dt.Year, dt.Month));

List<string> result = new List<string>();

for (DateTime dt1 = new DateTime(dt.Year, dt.Month, 1); 
     dt1 <= end_DateTime; dt1 = dt1.AddDays(1))
{
    result.Add(dt1.DayOfWeek.ToString());
} 
```

到底

```
string[] resultarr = result.ToArray(); 
```

这会给你

```
"Sunday", "Monday", "Tuesday" .... and so on for current month of July. 
```

因为`01/07/2012 (dd/MM/yyyy)`是星期天等等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T08:45:13.250

```
 DateTime Base = new DateTime(DateTime.Now.Year, DateTime.Now.AddMonths(1).Month, 1);

    int x = DateTime.DaysInMonth(Base.Year, Base.Month);
    string[] daysOfMonth = new string[x];
    int i = 0;
    while (Base.Day != x)
    {
        daysOfMonth[i++] = Base.DayOfWeek.ToString();
        Base = Base.AddDays(1);
    } 
```

从您之前的问题：[如何获取下个月每一天的名称？](https://stackoverflow.com/questions/11288893/how-to-get-the-name-of-each-day-in-next-month)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T08:40:08.050

我认为你可以这样做

```
 DateTime dt = new DateTime();
            dt = DateTime.Now;
            string[] days1 = { "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" };  // this month should be: Sunday, Monday... 
```

希望对你有帮助 ：-）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-02T08:43:50.370

试试这个：

```
DateTime dt = new DateTime(year, month,...); // initialize to first day in month
List<string> days = new List<string>();
do 
{
   days.Add(dt.ToString("dddd"));
   dt.AddDays(1);
} while (dt.Month == month); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-02T08:45:54.160

从你的最后一个帖子

```
DateTime Base = new DateTime(DateTime.Now.Year, DateTime.Now.AddMonths(1).Month, 1);
List<String> Days = new List<String>();
int x = DateTime.DaysInMonth(Base.Year, Base.Month);
while (Base.Day != x)
{
    Days.Add(Base.DayOfWeek.ToString());
    Base = Base.AddDays(1);
} 
```

然后使用

```
String[] StringArray = Days.ToArray(); 
```

如果您需要字符串数组而不是列表。

除非您真的需要一个数组，否则我只会保留列表原样，它可以以相同的方式使用，所以我看不出有充分的理由不必要地进行数组复制。

或者你可以这样做（正如 Habib.OSU 建议的那样）：

```
DateTime Base = new DateTime(DateTime.Now.Year, DateTime.Now.AddMonths(1).Month, 1);

int x = DateTime.DaysInMonth(Base.Year, Base.Month);
String[] StringArray = new String[x];
while (Base.Day != x)
{
    daysOfMonth[Base.Day - 1] = Base.DayOfWeek.ToString();
    Base = Base.AddDays(1);
} 
```

这很可能是两者中较快的一个。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-02T08:38:53.270

星期几总是相同的，您不需要将它们与当前月份联系起来。

如果您只关心用英语成为他们。

```
string[] weekdays = { "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Saturday" }; 
```

如果您想要一个月中所有日子的列表，请参阅此[线程](https://stackoverflow.com/questions/4022993/how-to-get-a-list-of-week-days-in-a-month)。

# php - 使用 PHP 将数据导出到包含图像的多个工作表 excel

> ID：11290233
> 
> 赞同：0
> 
> 时间：2012-07-02T08:34:13.210
> 
> 标签：php, html, excel, codeigniter

我在使用 PHP（Codeigniter）将数据导出到 excel 时遇到问题。

以下是我发现的一些问题：

*   多个工作表
*   每个工作表可以包含图像

我使用了一些 PHP 库，它适用于多个工作表问题，但是当我尝试包含 html 标记以在工作表内显示图像时它不起作用：

```
<img src='localhost/../../image.jpg' /> 
```

有没有图书馆可以解决我的问题？

谢谢 ：）

# c# - 标准方式为 Windows Phone 动态设置基于主题的图像

> ID：11290235
> 
> 赞同：2
> 
> 时间：2012-07-02T08:34:18.957
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

我目前正在 MainPage.xaml.cs 中为这样的主题设置图像

```
public MainPage()
{
    InitializeComponent();
    setThemeIcons();
}

private void setThemedIcons()
{
    Uri u;
    if ((Visibility)Application.Current.Resources["PhoneDarkThemeVisibility"] == Visibility.Visible)
    {
        u = new Uri("/Images/img_dark.png", UriKind.Relative);
    }
    else
    {
        u = new Uri("/Images/img_light.png", UriKind.Relative);
    }
    btnSessionSearch.Source = new BitmapImage(u);
} 
```

这对我来说似乎是一个劣质的编码。主要原因是我必须对应用程序中的每个主题敏感的图像执行此操作。

理想的方法是直接在 XAML 中绑定图像。如何做到这一点以使其具有主题意识？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:57:44.437

看看 ThemedImageConverter 你可以这样使用它：

```
<Image Stretch="None" Source="{Binding Converter={StaticResource themedImageConverter}, ConverterParameter={StaticResource PhoneBackgroundColor}}"
DataContext="/WP7SampleProject4;component/Images/{0}/appbar.feature.camera.rest.png" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:40:18.953

准备一个 ValueConverter，它将在文件路径中添加“dark”或“light”后缀，并在绑定图像源属性时使用它。

有关接口和在 XAML 中使用转换器的更多信息`IValueConverter`可以在 Internet 中找到，例如。在[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter%28v=vs.95%29.aspx)上，[TheCodeproject](http://www.codeproject.com/Tips/234337/Data-Binding-Using-IValueConverter-in-Silverlight)。

# iphone - 如何在当前视图控制器视图上方添加 UIview？

> ID：11290236
> 
> 赞同：1
> 
> 时间：2012-07-02T08:34:25.943
> 
> 标签：iphone, ios, ipad

我有一个 Ipad 应用程序，我正在尝试执行一些条形码读取过程。当我按下主页中的按钮时，我正在呈现条形码读取 viewcontrollers 视图，如下所示`

```
 ZBarReaderViewController *reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;

    reader.supportedOrientationsMask = ZBarOrientationMaskAll;

    reader.sourceType=UIImagePickerControllerSourceTypeCamera;
    //reader.cameraDevice = UIImagePickerControllerCameraDeviceFront;

    reader.cameraOverlayView=cameraOverlay;

    if( [UIImagePickerController isCameraDeviceAvailable:                         UIImagePickerControllerCameraDeviceFront ])
    {
           reader.cameraDevice = UIImagePickerControllerCameraDeviceFront;
    }
    ZBarImageScanner *scanner = reader.scanner;

    reader.wantsFullScreenLayout = YES;
    // TODO: (optional) additional reader configuration here

    // EXAMPLE: disable rarely used I2/5 to improve performance

    [scanner setSymbology: ZBAR_I25
                   config: ZBAR_CFG_ENABLE
                       to: 0];
     reader.showsZBarControls = NO; 
    // present and release the controller
   [self presentModalViewController:reader animated:YES];
    //[appdel.navigationController pushViewController:reader animated:YES];

    //[reader.view addSubview:collect];
    [reader.view addSubview:back];
      [back addTarget:self action:@selector(backpressed:) forControlEvents:UIControlEventTouchUpInside];
    [reader.view addSubview:scan];
    [scan addTarget:self action:@selector(getpressed:) forControlEvents:UIControlEventTouchUpInside];

    [reader release]; 
```

当我按下添加到阅读器视图的扫描按钮时，我需要添加另一个视图。我正在这样做。`-(IBAction)getpressed:(id)sender{[self.view addSubview:newview] }`但它没有添加到视图中。有人可以帮我实现这一点吗？`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:19:24.770

您需要覆盖到您的 zbar 视图并添加该按钮覆盖视图：

```
//set the frame according to your requirement 
aOverlay = [[UIView alloc] initWithFrame:CGRectMake(0.0,0.0,320.0,480.0)]; 
aOverlay.backgroundColor = [UIColor clearColor];
UIButton *aBtnscan  = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[aBtnscan setFrame:CGRectMake(115, 435, 80, 45)];

[aBtnscan addTarget:self action:@selector(getpressed:)forControlEvents:UIControlEventTouchUpInside];
[aOverlay addSubview:aBtnscan];
reader.cameraOverlayView = aOverlay; 
// You code 
```

# mysql - 学说一个表被多个表引用，我怎样才能在不切换的情况下获得引用记录

> ID：11290239
> 
> 赞同：0
> 
> 时间：2012-07-02T08:34:41.440
> 
> 标签：mysql, doctrine

成像我有 3 张桌子，人，男孩，女孩

```
 table person{
     id
     ...}
 table boy{
    id,
    foreign key a_id= a.id, one to one,
    description,
    ...
}
table girl{
    id,
    foreign key a_id= a.id, one to one, 
    description,
    ...
} 
```

表人只能被男孩或女孩引用一次。如果现在我得到一个人 ID，我怎样才能快速获取男孩/女孩信息而不尝试启动一个男孩和一个女孩？因为我的问题是我有很多表被表人引用，而 if 会太长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:38:30.147

我认为更好的方法是将表名放在您的人员表中，即在您的人员表中添加一个名称为表男孩、女孩等的列。

然后您可以轻松参考正确的表格

# sql - 如何在 SQL Server 2008 中的链接 Firebird 服务器上执行存储过程

> ID：11290242
> 
> 赞同：3
> 
> 时间：2012-07-02T08:34:53.073
> 
> 标签：sql, sql-server, stored-procedures, firebird, linked-server

我通过 ODBC 在我的 SQL Server 2008 上有一个链接的 Firebird 数据库。

我可以执行这样的查询并得到想要的结果：

```
SELECT * FROM OPENQUERY(LINKED_SERVER_NAME, 'SELECT * FROM TABLE_NAME') 
```

现在我想知道如何使用一个参数输入来执行存储过程。

我试过了：

```
SELECT * FROM OPENQUERY(LINKED_SERVER_NAME, 'STORED_PROCEDURE_NAME 00001') 
```

和

```
EXEC LINKED_SERVER_NAME.STORED_PROCEDURE_NAME '00001' 
```

没有成功...

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:45:26.793

我不知道 MSSQL 但你可以试试

```
SELECT * FROM OPENQUERY(LINKED_SERVER_NAME, 'SELECT * FROM STORED_PROCEDURE_NAME(00001)') 
```

# plone - z3c.form 参考小部件 - 能够在 Plone 中重新排序和选择 AT 和 Dexterity 内容

> ID：11290243
> 
> 赞同：0
> 
> 时间：2012-07-02T08:34:54.723
> 
> 标签：plone

是否有用于 Plone 4.1+ 的参考小部件，它可以选择和重新排序原型和敏捷内容。

即这个小部件将用于定义文件夹的下拉菜单顺序和项目（选择和重新排列文件夹内的项目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:19:28.280

这是代码：

[https://github.com/miohtama/webcouturier.dropdownmenu/blob/master/src/webcouturier/dropdownmenu/menusettings.py](https://github.com/miohtama/webcouturier.dropdownmenu/blob/master/src/webcouturier/dropdownmenu/menusettings.py)

# php - 有什么方法可以破解我自己的 PHP 登录表单？是否足够安全？

> ID：11290248
> 
> 赞同：0
> 
> 时间：2012-07-02T08:35:14.220
> 
> 标签：php, security, testing

简而言之，我有一个测试服务器/网站，我在其中上传了一个名为“private”的文件夹，其中包含 PHP 脚本。程序流程如下：登录 -> 搜索项目编号 -> 显示项目图像 -> 注销或重新搜索。

未来物品页面会显示大量关于每个特定物品的数据库信息，但暂时只显示一张图片。测试网站的链接如下：

[http://testserver574.hostei.com/private/login.html](http://testserver574.hostei.com/private/login.html)

我的主要问题是关于安全性和漏洞。login.html 页面有一个表单，该表单将信息发布到名为“ProcessLogin.php”的 php 脚本中，该脚本会将您重定向回使用错误凭据的登录页面。用户名和密码暂时被硬编码到该脚本中。

除了添加 SSL（安全套接字层）之外，这是否安全“足够”？当用户无法阅读 php 代码时，如何将用户名和密码硬编码到 ProcessLogin.php 中是不安全的？

如果您真的想尝试，用户名和密码并不难猜 :P 但即使它是真实的用户名和密码，如何才能通过入侵这样的登录来显示图像？

PS：用户名和密码相同，我只是想知道是否有人可以毫不费力地破解此登录名...

编辑：我的登录功能如下：

```
function login($userName, $URL) {
        session_regenerate_id(TRUE); //Security measure - create new sesion id
        $_SESSION['valid'] = 1;
        $_SESSION['userName'] = $userName;

        redirectPage($URL); //Redirect Page
    } 
```

在 php.ini 中使用“===”验证用户名和密码后发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:41:17.690

重要的问题是登录*后*会发生什么。您是否设置了 cookie 来识别用户？那个饼干里有什么？伪造那个cookie有多容易？拦截那个 cookie 有多容易（提示：没有 SSL，很容易）？打开任何受保护的页面是否需要有效的 cookie？或者，如果我知道 URL 并且根本没有检查，我可以直接转到您的“受保护”页面之一吗？在这些受保护的页面上检查 cookie 的方式是否存在任何缺陷，可能允许我绕过检查？等等……等等……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:50:01.347

作为安全性，它将保护什么与您所保护的内容有关。IE 考虑我将列表与我最喜欢的运动队放在一起并将其粘贴在互联网上并在登录屏幕后面使用编辑表单的情况 ssl 是否足以保护这些数据？可能是因为这些信息对其他人来说毫无意义。但是，如果它是我的银行帐户详细信息的列表，我可能想要更进一步，并进行更多检查，例如查看实施一次性密码，例如 yubikey [http://www.yubico.com/yubikey](http://www.yubico.com/yubikey)查看服务器配置以加强托管站点的服务器的安全性，并可能在登录表单上查看一些更复杂的加密/解密。因此，如果这些图像是您遛狗或其他类似的图像，那么您在表格上放置的安全性很可能是足够的。但是，如果它们是设计计划或对您/您的公司更重要/至关重要的东西，您可能希望考虑实施其他一些安全程序。

# debug-symbols - 如何将 libc6-dbg 中的调试符号与 pstack 一起使用？

> ID：11290249
> 
> 赞同：9
> 
> 时间：2012-07-02T08:35:18.640
> 
> 标签：debug-symbols, pstack

我安装了 libc6-dbg，但 pstack 仍然说：

（在 /lib/x86_64-linux-gnu/libc.so.6 中找不到符号）

我如何告诉它在哪里可以找到符号？

# jquery - 如何检测一个类的存在并添加或删除另一个类？

> ID：11290251
> 
> 赞同：2
> 
> 时间：2012-07-02T08:35:21.267
> 
> 标签：jquery

我有以下内容：

```
<html lang="en" class="no-js theme-light"> or
<html lang="en" class="no-js xxx yyy theme-light"> 
```

我想这样做，以便单击链接将其更改为：

```
<html lang="en" class="no-js theme-dark"> 
<html lang="en" class="no-js xxx yyy theme-dark"> 
```

再次单击会将其更改回来。即删除`theme-dark`和添加`theme-light`。

有人可以解释我如何做到这一点`jQuery`吗？

```
 $('#sidebar-theme-switch').click(function (e) {
    ???
 }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T08:38:40.770

```
$('#sidebar-theme-switch').click(function() {
    $('html').toggleClass('theme-light theme-dark')
}); 
```

[**现场演示**](http://jsfiddle.net/rXNV3/)

[切换类](http://api.jquery.com/toggleClass/)

> 描述：根据类的存在或 switch 参数的值，从匹配元素集中的每个元素中添加或删除一个或多个类。

# iphone - 双击合并图像

> ID：11290258
> 
> 赞同：1
> 
> 时间：2012-07-02T08:36:02.357
> 
> 标签：iphone, ios, image, gestures

我有两个 ImageView，我正在合并两个图像。第一个图像是**bodyImage**，第二个图像是一个**纹身**图像。我已经完成了合并，但我想问

1）我可以将纹身图像拖到bodyImage上。我想在水龙头坐标上使用 doubleTap tattooImage mergeWith bodyImage。希望你理解问题

**谢谢**

![在此处输入图像描述](../Images/8ba3b86943d888aa23ddb76c0d066075.png)+ ![在此处输入图像描述](../Images/8a34367dc63a3ccabee8cbec4598cea5.png) = ![在此处输入图像描述](../Images/3ca739dce423ead853b7787538b39e9a.png)

**这是我的代码：这里 imageView1 是我的 bodyImage 和 imageView2 是我的纹身图**

```
- (void)tapDetected:(UITapGestureRecognizer *)tapRecognizer
{
    int width=500;
    int height=500;
    NSLog(@"takephoto from twitter");

    CGSize newSize = CGSizeMake(width, height);
    UIGraphicsBeginImageContext( newSize );

    // Use existing opacity as is
    [imageView1.image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];

    // Apply supplied opacity if applicable

    [imageView2.image drawInRect:CGRectMake(180,200,200,200) blendMode:kCGBlendModeDarken alpha:0.4];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

    imageView1.image=newImage;

    UIGraphicsEndImageContext();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:05:49.040

掩码图片[http://www.developers-life.com/resize-and-mask-an-image.html](http://www.developers-life.com/resize-and-mask-an-image.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:06:14.770

为此，您需要图像遮罩。我写了一篇[关于如何使用它的教程](http://jeroendeleeuw.com/post/33638733049)，以及我如何在我自己的应用程序中使用它。从苹果文档：

> 掩蔽技术可以通过控制图像的哪些部分被绘制来产生许多有趣的效果。你可以：
> 
> *   将图像蒙版应用于图像。您还可以使用图像作为蒙版来实现与应用图像蒙版相反的效果。
> *   使用颜色来屏蔽图像的某些部分，其中包括称为色度键屏蔽的技术。
> *   将图形上下文剪辑到图像或图像掩码，当 Quartz 将内容绘制到剪辑上下文时，它有效地掩蔽图像（或任何类型的绘图）。

# c# - winform优化

> ID：11290263
> 
> 赞同：1
> 
> 时间：2012-07-02T08:36:10.417
> 
> 标签：c#, winforms, optimization

我有一个程序可以加载一个选项卡，该选项卡加载了大约 332 个文本框。加载新标签时，在显示标签之前有 2-3 秒的延迟。我曾尝试暂停和恢复，甚至研究线程，但发现 winform 只能使用一个线程。

我想知道是否有一种方法可以在另一个线程中创建文本框，然后将它们添加到主窗体中，或者有一种方法可以更好地创建 332 个文本框。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:43:38.330

根据您的布局，我强烈建议用 DataGridView 替换文本框，或者使用某种 continous-control 在滚动时加载文本框。主要瓶颈是手柄的创建。在 winforms 中，每个控件都有自己的句柄（甚至是标签），并且当像这样大量使用时，确实会产生性能问题。

如果 datagridview 不是一个选项，您能否提供有关布局的更多信息（也许是屏幕截图？），以便社区可以尝试替代方案。当您尝试添加它们时，在另一个线程中创建文本框会产生问题，但您只能在需要时创建它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:46:55.483

很简单：不要使用 300 个文本框。您一次只能使用*一个*文本框。剩下的数据你可以画出来，当用户想要编辑它时，你可以为它创建编辑控件。这正是网格的工作原理，因此我建议使用网格或类似控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:45:04.627

我也遇到了这个问题，它进一步影响了之前未激活的选项卡上控件的初始化代码。

我的解决方法是使用“正在加载...”启动画面来阻止程序，并以编程方式单击选项卡，以便加载/激活控件。完成此操作后，标签页不应花费很长时间才能再次显示。

尽管我同意其他人的观点，您可能希望考虑减少单个选项卡中的控件数量。

# gdb - 监控linux动态库

> ID：11290267
> 
> 赞同：4
> 
> 时间：2012-07-02T08:36:20.007
> 
> 标签：gdb, dynamic-linking, ldd, ltrace, gdbinit

我想监视（调试）一个用 C 语言编写的 linux 动态库。
我想看看何时以及将哪些参数传递给它。

监视“X”的库由另一个动态库“Y”调用。
“X”和“Y”都出现在可执行文件“A”的 /proc/pid/maps 中。

使用 ltrace，在可执行文件上没有显示 lib X 或 Y。
可执行文件正在使用多个线程。

此外，当在 exec 上使用 ldd 命令时，它没有提及任何关于 libs X 或 Y 的内容
。ldd Y，表明 Y 需要 X。

在所有库上使用 ldd，项目中的 exec 没有提到任何需要 Y 的人。
但 Y 似乎已加载到 exec 的 /proc/pid/maps 中。

我不确定我可以采取哪些步骤来调试 X lib，不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:33:24.223

如果 user756235 可以在 gdb 下运行它，那么这是一种使用[this](https://stackoverflow.com/a/11273702/184968)和[this](https://stackoverflow.com/a/10748611/184968)的方法。唯一的问题是在共享库 X 中列出完整的函数列表：`nm ./libX.so | grep "T "`

然后创建 .gdbinit （在我的情况下，我控制 args `print_in_lib`）：

```
host: srv2-x64rh5-01, OS: Linux 2.6.18-238.el5>more .gdbinit
file main
set pagination off
set logging file gdb.txt
set breakpoint pending on
set logging on
b print_in_lib
commands
info args
continue
end
r
set logging off
quit 
```

当我运行时`gdb`：

> 主机：srv2-x64rh5-01，操作系统：Linux 2.6.18-238.el5>gdb -q 函数“print_in_lib”未定义。断点 1 (print_in_lib) 挂起。警告：在 0x2aaaaaaab000 处添加的符号文件系统提供的 DSO 中找不到可加载的部分千：1 print_debug：0
> 
> 断点 1，print_in_lib (print_debug=0, index=0) at my_lib.cpp:7 7 if (print_debug) { print_debug = 0 index = 0
> 
> 断点 1，print_in_lib (print_debug=0, index=1) at my_lib.cpp:7 7 if (print_debug) { print_debug = 0 index = 1
> 
> 断点 1，print_in_lib (print_debug=0, index=2) at my_lib.cpp:7 7 if (print_debug) { print_debug = 0 index = 2
> 
> 断点 1，print_in_lib (print_debug=0, index=3) at my_lib.cpp:7 7 if (print_debug) { print_debug = 0 index = 3

# sql - SQL插入-for循环

> ID：11290269
> 
> 赞同：1
> 
> 时间：2012-07-02T08:36:23.873
> 
> 标签：sql, sql-server, insert-into, logfile

如何使 SQL Server 以块的形式提交插入？我需要将大量行从旧数据库复制到新表中，它有几个问题：

1.  它需要很长时间才能完成，并且在整个事务完成之前我看不到表中的任何行。

2.  我的日志文件正在疯狂增长，它可能会用完空间。

3.  如果中间出现问题，我必须重复所有内容。

如果我添加`SET ROWCOUNT 500`，我可以限制行数，但我不知道如何继续使用最后插入的 ID。我可能会查询新表以查看最后插入的内容，但我不确定这是否正确。这有点困难，因为我的`where`子句不使用`ID`列，所以我不确定如何确切地知道从哪里继续。

最好的方法是什么？是否有“for循环”或允许我每隔一段时间提交一次的东西？

我正在为 SQL Server 2008 R2 使用 SSMS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:01:32.413

即使 TomTom 的回答带有讽刺意味，它也包含两个基本选项，可能会对您有所帮助：

1.  您可以在 T-SQL 中编写一个循环（例如参见[while](http://msdn.microsoft.com/de-de/library/ms178642%28v=sql.90%29.aspx)）并使用 TOP 和 OFFSET 来选择块（您需要一个 order by）。您可以根据[Microsoft](http://msdn.microsoft.com/en-us/library/ms190422%28v=sql.105%29.aspx)最小化 looging 。如果您只是担心重新启动而不重做所有事情，这应该没问题，尽管我不希望它很快。

2.  您可以将您的选择导出到文件并使用批量插入来加载它。

您可以在[此处（关于批量导入和批量导出操作）](http://msdn.microsoft.com/en-us/library/ms187042%28v=sql.105%29.aspx)和[此处（插入部分最佳实践）](http://msdn.microsoft.com/de-de/library/ms174335.aspx)找到更多选项。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-02T08:47:28.907

> 如何使 SQL Server 以块的形式提交插入？

您编写将其插入块中的代码，非常容易。

1：是的，这就是交易的运作方式，你知道的。

2：是的，这就是交易的运作方式，你知道的。

3：是的，你猜怎么着——这就是交易的运作方式，你知道的；）

> 但我不知道如何继续使用最后插入的 ID

叫做编程。在客户端生成 ID。记住你生成的最后一个。

一般来说，我建议不要在代码中插入 - 根据您的代码的工作方式，这听起来像是数据复制操作，并且还有其他机制（批量复制接口）。

> 我正在为 SQL Server 2008 R2 使用 SSMS

基本上它的行为与您对其进行编程一样。您可以轻松地在 SSMS 端放入一些循环，或导出到文件，然后批量插入文件。虽然不会帮助您解决第 2 项...除非您使用简单的备份模型并且不关心恢复。

那么3也很复杂 - 你如何正确重启？很多额外的代码。

最好的方法取决于具体情况，遗憾的是你太模糊了，不能盲目猜测。

# javascript - 在 Three.js 中将经度和纬度转换为 xyz（为了旋转相机）的问题

> ID：11290270
> 
> 赞同：1
> 
> 时间：2012-07-02T08:36:27.663
> 
> 标签：javascript, latitude-longitude, three.js

我正在开发一个 javascript 应用程序，可以在其中设计自己的壁橱。我希望可以平滑地旋转壁橱（不改变相机到壁橱的距离）。通常旋转对象本身是最容易的，但考虑到不同的网格具有不同的原点（它们的相对 (0,0) 点与全局 (0,0) 点不同），这不是一个选项。相反，我想我必须像在球体上一样围绕壁橱旋转相机。所以我想做的是根据任何经度和纬度（用户输入）计算相机需要的确切位置。结果，旋转真的很奇怪。当前状态的应用程序在[这里](http://halloo.nl/kastenplanner/test.html)（重要：不适用于 IE，不过将来会有插件）。相关代码如下。注意：我在网上找到了这些公式。我自己做了几次数学运算，每次都能确认公式。我唯一可以确定的是到偏移点（xOffset，yOffset，zOffset）的距离（半径）是恒定的，但整个事情只是非常奇怪地旋转。我在[这里](https://stackoverflow.com/questions/8426822/rotate-camera-in-three-js-with-mouse)发现了另一个这样的问题。我尝试用他们的公式替换我的公式（即使它们没有意义，尽管它们似乎对他们有用）但这根本没有帮助（旋转仍然很奇怪，半径甚至不再看起来恒定）。

伪：

```
x = xOffset + radius * cos(longitude) * cos(latitude)
y = yOffset + radius * cos(longitude) * sin(latitude)
z = zOffset + radius * sin(longitude)
camera.lookAt(xOffset, yOffset, zOffset) 
```

相关代码（注：度数转换为弧度）：

```
var lon = 30;
var lat = -90;
var cameraRadius = 400;

function cameraReposition() {   
var lon = dimensions.lon;
var lat = dimensions.lat;
camera.position.x = cameraX + cameraRadius * Math.cos(Math.PI * lon / 180) * Math.cos(Math.PI * lat / 180);
camera.position.y = cameraY + cameraRadius * Math.cos(Math.PI * lon / 180) * Math.sin(Math.PI * lat / 180);
camera.position.z = cameraZ + cameraRadius * Math.sin(Math.PI * lon / 180); 
camera.lookAt(new THREE.Vector3(cameraX, cameraY, cameraZ));
}

$('#visiblecanvas').mousemove(function(e){
    if(mousedown || rightMousedown) {
        var clickX = e.pageX - this.offsetLeft;    
        var clickY = e.pageY - this.offsetLeft;
        lon += (clickY - lastY) / 10;
        lat -= (clickX - lastX) / 10;
        lastY = clickY;
        lastX = clickX;
        if (lon > 360)
            lon -= 360;
        if (lon < -360)
            lon += 360;
        if (lat > 360)
            lat -= 180;
        if (lat < -360)
            lat += 360;
    }
}); 
```

另一个注意事项：当 lon 和 lat 超过 360 度时改变的方式现在不是很相关，因为 lon 和 lat 目前都是通过 gui 控制的（用于调试目的）。

编辑：错误的应用程序链接！固定的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:33:20.790

```
 latLongToVector3: function(lat, lon, radius, heigth) {
      var phi = (lat)*Math.PI/180;
      var theta = (lon-180)*Math.PI/180;

      var x = -(radius+heigth) * Math.cos(phi) * Math.cos(theta);
      var y = (radius+heigth) * Math.sin(phi);
      var z = (radius+heigth) * Math.cos(phi) * Math.sin(theta);

      return new THREE.Vector3(x,y,z);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:36:01.707

相机定位在我看来还不错，至少当纬度或经度发生变化时它遵循正确的轨迹，而另一个保持不变。看起来很奇怪的是相机的方向——lookAt 没有指定“向上”的位置，因此它可以选择任何方向，例如，您最终可能会看到正确的点，但是是上下颠倒的。

我自己没有尝试过 Three.js，但在文档中我看不到将附加信息提供给相机的方法。您可能必须手动设置 projectionMatrix 及其逆矩阵。

# c - 在没有转储的情况下分析 BSOD

> ID：11290271
> 
> 赞同：0
> 
> 时间：2012-07-02T08:36:28.197
> 
> 标签：c, windows, driver, kernel, bsod

我正在开发的驱动程序之一导致了蓝屏死机。不幸的是，没有创建转储文件，因为它没有配置/资源不足。我试图重现这次崩溃，但到目前为止还没有运气。

有没有办法使用 WinDbg 或任何其他工具获取一些信息？我有这个信息：

*   蓝屏截图
*   .sys 文件。
*   它的 pdb
*   源代码
*   它坠毁的机器

除了转储本身，我什么都有。

您的帮助将不胜感激。

* * *

正如我上面所说，不存在转储（/minidump）。这是实际的问题。

对于这个特定的崩溃，我知道我将无法获得堆栈。只需获取特定的代码行就足够了。因为 BSOD 包含模块的地址，所以似乎应该有一种方法来检测它到底是哪一行。正如我上面提到的，我确实有 .sys 文件、pdb 和源代码。

这是取自 MSDN 的特定代码：[SYSTEM_SERVICE_EXCEPTION](http://msdn.microsoft.com/en-us/library/windows/hardware/ff558949%28v=vs.85%29.aspx)。我怎么能从那里知道具体的线路是什么？和/或提出的具体例外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T03:13:12.150

你有crash地址，想知道源码行吗？

启动 kd 或 windbg，解除其之前的地址和代码。找到函数入口点（它调整堆栈的位置），您现在可以查找符号表。从那里你再次解除并比较来源。

抱歉，我想您需要阅读一些 asm。我不知道更好的办法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:52:11.743

如果你很幸运，你会有 minidump `C:\windows`，所以检查它是否在那里。如果可用，请在 Windbg 中打开并分析。您不需要配置低资源来创建转储，请参阅此链接[http://support.microsoft.com/kb/254649](http://support.microsoft.com/kb/254649)，了解如何设置窗口以创建转储文件。如果要调试驱动程序，请创建完整转储。

回到你的问题来分析问题：

*   请参阅此处的错误检查参考以了解您的 BSOD 错误。[http://msdn.microsoft.com/en-us/library/windows/hardware/hh406232(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh406232(v=vs.85).aspx)

*   根据您获得的 BSOD，检查任何参数或其他信息以获取可能的原因。

但是，您不太可能根据您拥有的信息得出良好的结论。您将需要转储文件才能真正理解问题。

# android - 使用 URI 从 sdcard 获取缩略图

> ID：11290275
> 
> 赞同：2
> 
> 时间：2012-07-02T08:36:56.433
> 
> 标签：android, image, listview, uri, thumbnails

如何使用给定的 URI 从 sdcard 获取缩略图？我曾尝试使用 bitmapfactory，但性能不佳或 OutOfMemoryError 我要将缩略图放入包含大量数据的列表视图中，我应该使用缩略图还是任何建议？如果要使用缩略图，那么该怎么做...？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:45:51.663

```
 // Parameters
 int w,h;     

 // First only decode image size
 BitmapFactory.Options opt = new BitmapFactory.Options();
 opt.inJustDecodeBounds = true;
 Bitmap bmp = BitmapFactory.decodeFile(file, opt);

 // Decode small enough image
 int heightRatio = (int)opt.outHeight/h;
 int widthRatio = (int)opt.outWidth/w;
 if (heightRatio > 1 || widthRatio > 1)
 {
      if (heightRatio > widthRatio)
           opt.inSampleSize = heightRatio;
      else
           opt.inSampleSize = widthRatio; 
 }

 opt.inJustDecodeBounds = false;
 bmp = BitmapFactory.decodeFile(file, opt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:46:07.597

使用[ThumbnailUtils](http://developer.android.com/reference/android/media/ThumbnailUtils.html)类获取图像/视频的缩略图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:48:53.050

可以使用以下方法获取图像的缩略图：

```
private Bitmap getBitmap(String path) {

    Uri uri = getImageUri(path);
    InputStream in = null;
    try {
        final int IMAGE_MAX_SIZE = 1200000; // 1.2MP
        in = mContentResolver.openInputStream(uri);

        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(in, null, o);
        in.close();

        int scale = 1;
        while ((o.outWidth * o.outHeight) * (1 / Math.pow(scale, 2)) > IMAGE_MAX_SIZE) {
            scale++;
        }
        Log.d(TAG, "scale = " + scale + ", orig-width: " + o.outWidth       + ", orig-height: " + o.outHeight);

        Bitmap b = null;
        in = mContentResolver.openInputStream(uri);
        if (scale > 1) {
            scale--;
            // scale to max possible inSampleSize that still yields an image
            // larger than target
            o = new BitmapFactory.Options();
            o.inSampleSize = scale;
            b = BitmapFactory.decodeStream(in, null, o);

            // resize to desired dimensions
            int height = b.getHeight();
            int width = b.getWidth();
            Log.d(TAG, "1th scale operation dimenions - width: " + width    + ", height: " + height);

            double y = Math.sqrt(IMAGE_MAX_SIZE
                    / (((double) width) / height));
            double x = (y / height) * width;

            Bitmap scaledBitmap = Bitmap.createScaledBitmap(b, (int) x,     (int) y, true);
            b.recycle();
            b = scaledBitmap;

            System.gc();
        } else {
            b = BitmapFactory.decodeStream(in);
        }
        in.close();

        Log.d(TAG, "bitmap size - width: " +b.getWidth() + ", height: " + b.getHeight());
        return b;
    } catch (IOException e) {
        Log.e(TAG, e.getMessage(),e);
        return null;
    }
} 
```

并且在使用位图后总是调用 bitmap.recycle() 方法。它将从内存中清除位图。还要避免代码中的内存泄漏。这将解决您的 OOME。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T08:49:34.373

尝试使用此代码，它修复了内存不足错误。将高度和宽度更改为您的。这里 intent_data2 是文件路径。

```
public Bitmap custom_SizedImage(String intent_data2) {
        int targetHeight = 534, targetWidth = 534;
        Options options = new Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(intent_data2, options);
        double sampleSize = 0;
        Boolean scaleByHeight = Math.abs(options.outHeight - targetHeight) >= Math
                .abs(options.outWidth - targetWidth);

        if (options.outHeight * options.outWidth * 2 >= 1638) {
            sampleSize = scaleByHeight ? options.outHeight / targetHeight
                    : options.outWidth / targetWidth;
            sampleSize = (int) Math.pow(2d,
                    Math.floor(Math.log(sampleSize) / Math.log(2d)));
        }
        options.inJustDecodeBounds = false;
        options.inTempStorage = new byte[128];
        while (true) {
            try {
                options.inSampleSize = (int) sampleSize;
                mBitmap = BitmapFactory.decodeFile(intent_data2, options);
                Display display = getWindowManager().getDefaultDisplay();
                int width = display.getWidth();
                int height = display.getHeight();
                int screenDiff = height - width;
                int screenRatio = screenDiff / 3;
                float scaleFactor = mBitmap.getWidth() / width;
                float y_Pos = scaleFactor * screenRatio;
                Matrix matrix = new Matrix();
                matrix.postScale(0.5f, 0.5f);
                croppedBitmap = Bitmap.createBitmap(mBitmap, 0, (int) y_Pos,
                        mBitmap.getWidth(), mBitmap.getWidth(), matrix, true);

                scaledBitmap = Bitmap.createBitmap(targetWidth, targetHeight,
                        Config.RGB_565);

                float ratioX = targetWidth / (float) croppedBitmap.getWidth();
                float ratioY = targetHeight / (float) croppedBitmap.getHeight();
                float middleX = targetWidth / 2.0f;
                float middleY = targetHeight / 2.0f;

                Matrix scaleMatrix = new Matrix();
                scaleMatrix.setScale(ratioX, ratioY, middleX, middleY);

                Canvas canvas = new Canvas(scaledBitmap);
                canvas.setMatrix(scaleMatrix);
                canvas.drawBitmap(croppedBitmap,
                        middleX - croppedBitmap.getWidth() / 2, middleY
                                - croppedBitmap.getHeight() / 2, new Paint(
                                Paint.FILTER_BITMAP_FLAG));
                //saveImage(scaledBitmap);

                break;
            } catch (Exception ex) {
                try {
                    sampleSize = sampleSize * 2;
                } catch (Exception ex1) {

                }
            }
        }
        return scaledBitmap; 
```

}

# php - 获取所有信息

> ID：11290279
> 
> 赞同：13
> 
> 时间：2012-07-02T08:37:26.507
> 
> 标签：php, regex

拿这个 Lorem Ipsum 文本：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Nulla felis diam，mattis id elementum eget，ullamcorper et purus。

我怎样才能使用 PHP 和正则表达式获得之后的所有内容`Nulla`？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-02T08:41:16.227

嗯，您不想使用一些简单的东西，例如：

```
$str = substr($lorem, strpos($lorem, 'Nulla')); 
```

如果您不想寻找 Nulla，但也想寻找 'null'，您可能会考虑使用 stripos 而不是 strpos... 此代码将在返回值中包含 Nulla。如果你想排除 Nulla，你可能想将它的 lentgh 添加到 strpos 值，即

```
$str = substr($lorem, strpos($lorem, 'Nulla') + 5); 
```

最后，如果您需要更通用的东西，并且按照@Francis 的建议：

```
$needle = 'Nulla'; 
$str = substr($lorem, strpos($lorem, $needle) + strlen($needle)); 
```

老实说，正则表达式对于这样的事情来说太过分了......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T08:40:30.013

试试这个：

```
$string = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla felis diam, mattis id elementum eget, ullamcorper et purus.";
$prefix = "Nulla";
$index = strpos($string, $prefix) + strlen($prefix);
$result = substr($string, $index); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T08:41:01.220

```
/Nulla(.*)/ 
```

现在你有 Nulla 之后的所有文本在 $1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T08:47:28.010

```
$string = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla felis diam, mattis id elementum eget, ullamcorper et purus.';

preg_match('/Nulla(.*)/',$string, $matches);
print_r($matches); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-13T14:11:11.040

不是最好的选择，但您可以考虑以下适合的地方：

```
<?php

$myString = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla felis diam, mattis id elementum eget, ullamcorper et purus.";
$explodedArray = explode("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla",$myString);
echo $explodedArray[1]; 
```

# git - Eclipse Git 插件：无法配置推送到上游

> ID：11290280
> 
> 赞同：16
> 
> 时间：2012-07-02T08:37:36.277
> 
> 标签：git, eclipse-plugin

在 Eclipse 中，我有一个与 git 存储库连接的项目。我可以提交和远程推送，但选项：团队->远程->“配置从上游获取”和“配置推送到上游”被禁用/灰色。

![在此处输入图像描述](../Images/3f6e26472474f4d2e823a04bbe825948.png)

究竟发生了什么？？

如何启用它们？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-24T18:24:04.497

这是我所做的，效果很好：

1.  右键单击您的项目，选择团队→在存储库视图中显示。您将切换视角并进入 Git Repositories 选项卡。
2.  右键单击“远程”并选择“创建远程”。对于“远程名称”，输入“来源”。检查“配置获取”和“检查配置推送”。单击确定。
3.  单击更改。输入您在初始推送期间所做的回购 URL 信息。单击保存。您现在应该能够通过右键单击您的项目来推送，然后团队→推送到上游。

因为遥控器是在相关项目下添加的，所以每个项目都可以有自己的上游来源并且它们不会干扰（而 Window > Preferences 解决方案是全局设置）。

根据您对所做操作的描述，您似乎尝试了此操作 - 但可能没有使用遥控器的名称“origin”，这是绝对必要的。

# c++ - Soci 作为 linux/ubuntu 上的静态库？

> ID：11290282
> 
> 赞同：0
> 
> 时间：2012-07-02T08:38:14.630
> 
> 标签：c++, orm, soci

出于安全原因，我需要将程序与 soci 静态链接。

我构建了静态库 libsoci_core.a 和 libsoci_postgresql.a，因为我的后端是 postgresql。

我的问题是，当我使用这些库构建程序时，会出现链接错误。

> [...]/lib/libsoci_core.a(backend-loader.cpp.o)：在函数`(匿名命名空间)::do_unload(std::basic_string, std::allocator > const&)'中：
> 
> backend-loader.cpp:(.text+0x623): undefined reference to `dlclose'

查看 backend-loader.cpp 中的代码，它调用了 dlclose 和其他动态库加载函数。

所以我想知道是否有可能避免这些错误并拥有一个“真正的”静态构建。

或者我应该使用什么选项来避免这个错误并且代码会调用静态 posgresql 库？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:30:27.023

由于您正在尝试构建静态链接库，因此需要删除/删除 dl* 函数。

一种方法是使用您自己的函数创建一个 dlstub.c 文件并将它们链接到库。

使用来自 (/usr/include/dlfcn.h) 的原型：

```
#include <dlfcn.h>

int    dlclose(void *){}
char  *dlerror(void){}
void  *dlopen(const char *, int){}
void  *dlsym(void *restrict, const char *restrict){} 
```

将存根函数编译为 *.o 文件，并将其链接到编译命令：

```
gcc -c -O2 -g dlstubs.c
gcc -static ...  -o dlstubs.o ... 
```

# php - 按 x 然后 y 对 php 数组进行排序

> ID：11290283
> 
> 赞同：1
> 
> 时间：2012-07-02T08:38:15.960
> 
> 标签：php, arrays, sorting, multidimensional-array

我想按“命中”对数组进行排序，但我也想查找特定 ID 并将其设置为第一次迭代，然后继续“命中”排序。

例如，我有一个多维数组：

```
$myarray = array(
    array(
        "id"=>10,
        "hits"=>80
    ),
    array(
        "id"=>14,
        "hits"=>50
    ),
    array(
        "id"=>15,
        "hits"=>700
    ),
    array(
        "id"=>18,
        "hits"=>200
    )
); 
```

我想测试 id 是否是特定的东西，即如果 id==18 然后把它放在第一位，然后按点击排序。我将如何使用 usort 和自定义函数来做到这一点？

我想我正在寻找类似的东西：

```
function customsort($a,$b){
    if($a["id"]==18){ //or b==18?
        return -1;
    } else {
        return $a["hits"]>$b["hits"];
    }
}

usort($myarray,"customsort"); 
```

我想要的结果是订单：

```
array(
    "id"=>18,
    "hits"=>200
),
array(
    "id"=>14,
    "hits"=>50
),
array(
    "id"=>10,
    "hits"=>80
),
array(
    "id"=>15,
    "hits"=>700
) 
```

（或者如果它们被标记为 ABCD，那么我需要它是 DBAC）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:51:10.617

您的代码中唯一可能使其不起作用的是`return $a["hits"]>$b["hits"];`. 您的函数应仅返回 1/-1（不是真/假），因此将该行更改为：`return $a["hits"]>$b["hits"]?1:-1;`并且它应该按预期工作。

果然，它有效：[http ://codepad.org/ItyIa7fB](http://codepad.org/ItyIa7fB)

# android - 无法从 Google Play 下载应用程序 [即使上述应用程序是在同一设备上开发的]

> ID：11290285
> 
> 赞同：0
> 
> 时间：2012-07-02T08:38:23.573
> 
> 标签：android, publish, google-play

我在 Android 市场上开发并发布了一个 Android 应用程序。我用于开发的手机是运行 Android 2.3 的三星 Galaxy。

在 Google Play 上，它不允许我将应用程序下载到上述手机，说该手机不符合条件。

这可能是什么原因？它被下载到其他甚至运行 Android 2.2 的设备上，因此它不会成为 Manifest 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:40:46.970

清单可以定义其他限制（除了最低版本）。例如屏幕尺寸、密度、所需硬件等等。

开发者还可以在开发者控制台中定义一些过滤器。

因此，这些选项之一可能是过滤掉您的设备。

# mongodb - 在 JAX-RS/MongoDB/Jackson 应用程序中必须在哪里调用 MongoDB ensureIndex()？

> ID：11290289
> 
> 赞同：1
> 
> 时间：2012-07-02T08:38:39.753
> 
> 标签：mongodb, jax-rs, jackson

我正在按照这个[示例](http://architects.dzone.com/articles/modern-web-apps-using-jax-rs)使用 JAX-RS、MongoDB 和 Jackson 映射器创建一个简单的 Web 应用程序。如果我想索引某些字段，我应该在哪里调用 MongoDB 的 ensureIndex()？

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:43:44.347

您可以随时调用`ensureIndex()`以开始索引字段。这是一个阻塞调用，因此在构建索引时您将无法使用该集合。

如果您正在寻找从杰克逊调用的函数原型，这可能会有所帮助：

[http://vznet.github.com/mongo-jackson-mapper/apidocs/net/vz/mongodb/jackson/JacksonDBCollection.html#ensureIndex(com.mongodb.DBObject)](http://vznet.github.com/mongo-jackson-mapper/apidocs/net/vz/mongodb/jackson/JacksonDBCollection.html#ensureIndex(com.mongodb.DBObject))

您还可以`db.example.ensureIndex( {<field>: 1 } )`在`mongo`shell 中使用该命令来启动索引过程。

# jquery - jQuery拆分数组元素

> ID：11290292
> 
> 赞同：0
> 
> 时间：2012-07-02T08:38:46.133
> 
> 标签：jquery

我正在尝试从一些 li 元素中获取 id。但我不确定如何拆分数组中的结果。所以 message_1 变成 1， message_2 变成 2，依此类推。

```
<ul id="chat_viewport">
<li id="message_1">message</li>
<li id="message_2">message this and that</li>
<li id="message_3">3</li>
<li id="message_4">4</li>
<li id="message_5">5</li>
</ul>

<a href="#" class="test">TEST</a>​

$("a.test").click(function(e) {
e.preventDefault();

var idarray = $("#chat_viewport")
         .find("li") //Find the li in #chat_viewport
         .map(function() { return this.id; }) //Project Ids
         .get(); //ToArray

var biggest = Math.max.apply( null, idarray );

alert(idarray);
});​ 
```

我在这里有一个例子[http://jsfiddle.net/T5x5d/](http://jsfiddle.net/T5x5d/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:41:20.397

用这个替换你的`.map`函数：

```
function() { return this.id.replace('message_', ''); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:42:00.243

如果您确定 ID 的格式，则可以使用：

```
.map(function() { return this.id.split('_')[1]; }) 
```

PS 将整个代码置于问题之中。时间不长，如果您的 jsFiddle 出现问题，其他用户将无法理解答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:47:31.183

修改它看起来像这样：

```
$("a.test").click(function(e) {
e.preventDefault();

var idarray = $("#chat_viewport")
         .find("li") //Find the li in #chat_viewport
         .map(function() { return this.id.split('_')[1]; }) //Project Ids
         .get(); //ToArray

var biggest = Math.max.apply( null, idarray );

alert(idarray);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T08:51:02.267

这是一个太多但是：

```
$("a.test").click(function(e) {
    e.preventDefault();
    var idarray = $("#chat_viewport")
        .find("li") //Find the li in #chat_viewport
        .map(function() {
            var match = /(\d+)/.exec(this.id);
            return match !== null ? parseInt(match[0]) : 0;
         }) //Project Ids
         .get(); //ToArray
    var biggest = Math.max.apply( null, idarray );

    alert(biggest);
}); 
```

我不认为它必须具有 message_ 的 id 只是其 id 中的一个数字并将其转换为一个数字（如果你想返回一个带有数字的数组）如果没有找到数字它将返回一个 0。

# delphi - 无效方法（无效*像素）；到delphi声明

> ID：11290293
> 
> 赞同：0
> 
> 时间：2012-07-02T08:38:46.287
> 
> 标签：delphi

这样的声明应该如何转换为delphi？

```
void method (void *pixels); 
```

而且我也有我应该预先分配该变量的信息。

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:52:37.057

如果您需要坚持原始声明格式（例如在转换 C DLL 头文件时），则转换为：

```
procedure method(pixels: Pointer); 
```

[您可以在此处](http://www.drbob42.com/delphi/headconv.htm)找到有关将 C 标头转换为 Delphi 的更多信息

另一方面，如果您正在转换整个方法或类，您可能希望将其调整为更类似于 Delphi 的代码。我不知道“像素”是什么，所以我很难猜出哪个是最好的选择。

大胆猜测，如果它是一个包含有关每个像素（位置、颜色、Alpha 通道？）的一些信息的矩阵，您可以轻松地使用对象列表处理这样的结构，或者创建自己的类来处理它。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:41:10.193

假设像素指向像素数组，您可以这样做：

```
procedure method(var pixels); cdecl; 
```

如果您将像素作为***无类型***参数传递，它会作为指针隐式传递，这也是 C 声明所做的，因此转换与原始参数完美匹配。使用无类型指针使您可以将其转换为您喜欢的任何内容或获取其地址来获取指针。只要你知道像素的结构，那可能会更方便：

假设像素是一个固定大小的字节数组，其中每个位都是一个像素：

```
type
  TPixels = array[0..7] of Byte;

const
  Grey: TPixels = ($55, $AA, $55, $AA, $55, $AA, $55, $AA);

procedure method(var pixels); cdecl;
begin
  Move(Grey, pixels, Sizeof(Grey));
  // ...
  TPixels(pixels)[3] := $FF;
  // ... 
```

# algorithm - NSGA-II（非支配排序算法）

> ID：11290294
> 
> 赞同：3
> 
> 时间：2012-07-02T08:38:46.703
> 
> 标签：algorithm, sorting, genetic-algorithm, evolutionary-algorithm

我研究了非支配排序算法（nsga-II）。

此链接上给出了算法。 [http://church.cs.virginia.edu/genprog/images/2/2f/Nsga_ii.pdf](http://church.cs.virginia.edu/genprog/images/2/2f/Nsga_ii.pdf)

我想知道它是带有示例的现实应用程序.....我试图在互联网上搜索，但没有找到它。

如果您有任何想法或相关数据/链接，请与我分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:59:04.950

您只需在 Google Scholar 中搜索“NSGA-II + 应用程序”即可找到一些实际应用程序：[http ://scholar.google.com/scholar?start=10&q=nsga-ii+application&hl=en&as_sdt=0,5](http://scholar.google.com/scholar?start=10&q=nsga-ii+application&hl=en&as_sdt=0,5)

提出 NSGA-II 的确实是 Kalyanmoy Deb 教授和他的合著者 Samir Agrawal、Amrit Pratap 和 T. Meyarivan。

在我自己的研究中，我调查了一些基于 NSGA-II 的投资组合优化问题（金融工程问题）的方法，您可以在链接中找到一篇论文： [https ://editorialexpress.com/cgi-bin/conference/下载.cgi?db_name=CEF2012&paper_id=167](https://editorialexpress.com/cgi-bin/conference/download.cgi?db_name=CEF2012&paper_id=167)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T16:38:52.477

根据我自己的个人经验，我使用 NSGA-II 解决了两个问题。网络中的多目标旅行商问题和社区检测。这些主要是学术研究，因此不能称为现实生活中的应用。

对于 NSGA-II 的更具体示例，我知道 NSGA-II 用于优化化学过程。SK Gupta 教授，我从他那里了解到 NSGA-II，他自己就是这样做的，你可以在他的论文列表中查看一些实际应用 [http://www.iitk.ac.in/che/Publ%20List% 20SKG%20June%202012.pdf](http://www.iitk.ac.in/che/Publ%20List%20SKG%20June%202012.pdf)特别是论文 #160、163、164、177 和 187。

我不确定，但发明者本人 Kalyanmoy Deb 教授也在机械工程领域使用它。

基本上，您可以在任何需要优化的工业过程中使用它，无论是化学过程还是汽车零件的设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T23:44:59.633

我在多目标进化方法中使用 NSGA-II 来优化人工神经网络，该网络对应于大脑部分的计算模型，该部分被认为是用于动作选择的低级系统。如果您有兴趣，可以在[http://francky.me/publications.php#mRF2011上找到更多信息](http://francky.me/publications.php#mRF2011)

请注意，任何其他符合帕累托的排名方法都可能有效。

# javascript - Codeigniter 包括 javascript 文件

> ID：11290297
> 
> 赞同：0
> 
> 时间：2012-07-02T08:39:01.987
> 
> 标签：javascript, codeigniter

我有一个初学者问题。

我正在为我的网站使用一些插件。我像这样在我的标题中包含了 jquery 和 jquery ui

```
<script type="text/javascript" src="<?php echo base_url(); ?>js/jquery-1.7.2.min.js"></script>
  <script type="text/javascript" src="<?php echo base_url(); ?>js/jquery-ui.min.js"></script> 
```

我在页脚中包含了我为站点上的全局内容创建的主 js 文件。

所以我真的不想在页脚中包含 js 仅在以下情况下生效：详细信息页面

os 如果我在页眉中包含 jquery，在页脚中包含主 js，并在详细信息视图文件中包含详细信息 js，可以吗？

谢谢你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:32:59.970

确保您的 base_url 正常工作。如果它不工作，请在配置文件中设置 base_url 然后使用它。

```
$config['base_url'] = ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:45:08.040

确保您的 URL 帮助程序已加载。

确保您在配置中设置了 base_url，并带有尾随 /。

对于您的 JS - 您可以保持原样或将所有内容放在页脚中。
先加载jquery，再加载ui，再加载自己的js。

对于 Jquery - 使用 google cdn 和您的服务器作为备份。

# css - 居中对齐图像

> ID：11290298
> 
> 赞同：1
> 
> 时间：2012-07-02T08:39:12.880
> 
> 标签：css, image, html, alignment

如何将图像居中对齐到垂直和水平到 div。

我需要在不固定高度或填充的情况下获得它，因为图像大小不是恒定的，因此它应该对所有图像都灵活。

这是我的踪迹 [http://jsfiddle.net/yHdAx/2/](http://jsfiddle.net/yHdAx/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:47:28.387

要居中对齐图像，您必须将其显示设置为阻止，然后将左右边距设置为自动。在新代码示例中，我还使用顶部和底部边距进行了此操作。这是完成这项工作所需的代码：

**CSS**

```
.test {
    background-color:#999;
    height:60%;
    display:block;
    vertical-align:middle;
    padding-top: 25%;
    padding-botton: 25%;
}

.test img {
    max-width:50%;
    vertical-align: ;
    display: block;
    margin: auto auto auto auto;
} 
```

**HTML**

```
<div style="height:800px; background-color:#CCC">
    <div class="test">
        <img src="http://static.clickbd.com/global/classified/item_img/607724_0_original.jpg" />
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:49:17.323

嘿，现在您可以`table-cell`像这样习惯 div 中的属性

**现场演示** [http://jsfiddle.net/yHdAx/3/](http://jsfiddle.net/yHdAx/3/)

**HTML**

```
 <div style="height:800px; background-color:#CCC">
<div class="test">
<img src="http://static.clickbd.com/global/classified/item_img/607724_0_original.jpg" />
</div> 
```

**CSS**

```
 .test{
background-color:red;
height:600px; display:table-cell; vertical-align:middle;
    text-align:center;
}
.test img{
max-width:50%;

} 
```

更多信息[http://www.brunildo.org/test/img_center.html](http://www.brunildo.org/test/img_center.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:55:26.510

应用于`display:block`图像并将其边距设置为`auto`。

```
.test {
    background-color:#999;
    padding: 50px 0;
}

.test img {
    display: block;
    margin: auto;
} 
```

这是小提琴，[http://jsfiddle.net/yHdAx/5/](http://jsfiddle.net/yHdAx/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T09:11:31.203

如果你没有在包含的 div 上设置高度怎么办，那么设计会中断吗？

要使图像居中，只需使用

```
.test img {
    display:block; 
    width:25%; 
    margin:0 auto;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T09:32:34.373

我试着只玩一个 div

```
div  {
    display:table-cell;
    background:red;
    width:500px;
    height:500px;
    vertical-align:middle;
    text-align:center;
} 
```

我希望这也能帮助你：- [http://jsbin.com/ihunuq/3/edit](http://jsbin.com/ihunuq/3/edit)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T13:22:27.780

您可以使用位置：绝对。类似的东西：[jsfiddle](http://jsfiddle.net/yHdAx/11/)。

```
.test{
  background-color:#999;
  height:60%;
  width: 100%;
  position: relative;
}
.test img{
  max-width:50%;
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  margin: auto;
} 
```

# ios - 如何拥有“大师大脑”应用程序？

> ID：11290299
> 
> 赞同：0
> 
> 时间：2012-07-02T08:39:15.130
> 
> 标签：ios, design-patterns

在我的应用程序中，我希望有一个“大脑”来跟踪正在发生的事情。也就是说 - 多个视图控制器需要能够在这个大脑中设置值并获取它的数据。

我将如何实施呢？据我所知，使我的大脑成为单例类是一种选择，否则我必须在每个视图控制器中将大脑声明为委托，并在每次创建大脑时将其分配给它，这看起来很混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:42:10.100

正如您所说，您的答案在您的问题中。如果您想从多个对象访问一个对象并且不需要多个副本，请使用单例模式。

请记住，如果您的代码中有两个或更多对象会尝试同时操纵“大脑”，则必须保持数据线程安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:18:01.153

至于单例模式，您可能想阅读这篇[单例有什么不好的地方？](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)

确保你使用[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模式设计你的应用程序，你应该很好。“大脑”就是模型。

您的“模型”的行为方式取决于您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T08:41:23.720

单例模式是一种选择。另一个选项是 NSUserDefault。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T09:02:04.523

是的，你是对的 Singleton 是一个不错的选择。因为我认为您正在处理少量数据，所以单例将是好的和容易的，否则将数据保存在数据库或 NSuserDefaults 中。

# objective-c - 如何将 UTF-32（十六进制）转换为 UTF-8（十六进制）

> ID：11290304
> 
> 赞同：0
> 
> 时间：2012-07-02T08:39:30.300
> 
> 标签：objective-c, unicode, nsstring, type-conversion

在 Obj-C 中，如何转换`\u20000`为这个最终字符串：（`"%F0%A0%80%80"`将用于构建 URL）？

仅供参考：根据[此页面](http://www.fileformat.info/info/unicode/char/20000/index.htm)，`\u20000`= `0x00020000`UTF-32（十六进制）或`0xF0 0xA0 0x80 0x80`UTF-8（十六进制）。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-04T04:10:42.263

我最终使用了@ParagBafna 的建议，即使用此代码[ConvertUTF](http://www.koders.com/c/fid112E1609930ADAE7CA143040A834BAC0165DCD65.aspx?s=ConvertUTF.h)，来自[此链接](http://www.koders.com/c/fid112E1609930ADAE7CA143040A834BAC0165DCD65.aspx?s=ConvertUTF.h)。它工作得很好。

# linux - 如何使用自定义结构创建 cpio 存档

> ID：11290306
> 
> 赞同：0
> 
> 时间：2012-07-02T08:39:34.977
> 
> 标签：linux, archive

我有一个文件的 cpio 存档-`/./folder1/file1`

我的目标是`file1`用另一个替换。

我将 cpio 存档解压缩到文件夹`/test`并替换了`file1`.

我的结构：

```
/test/folder1/file1 
```

我用这个命令创建了新的存档：

```
find ./test | cpio -o -F newArch 
```

但在`newArch`我的文件中存储为`/folder1/file1`.

如何获取具有结构的存档`/./folder1/file1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:48:47.760

cpio 没有任何前缀命令，虽然我仍然认为这是一个没有实际意义的练习，但您可以尝试它是否保留通过标准输入获得的文件名：

```
find ./test -printf "././%f\n"| cpio -o -F newArch 
```

根据需要调整格式字符串的前缀。我没有 7zip 来测试它如何解释路径。

# android - 为什么我得到 arrayindexoutofboundsexception？

> ID：11290311
> 
> 赞同：-1
> 
> 时间：2012-07-02T08:40:04.323
> 
> 标签：android, andengine, indexoutofboundsexception

我正在使用 AndEngine 制作游戏，但我不知道为什么会出现此错误。它似乎以前工作过，我不确定是什么代码更改导致了错误。有人有想法么？

```
 07-02 01:34:44.747: E/AndroidRuntime(19252): java.lang.ArrayIndexOutOfBoundsException
07-02 01:34:44.747: E/AndroidRuntime(19252):    at com.prattia.webs.testgfx5.TestGFX5Activity$2.onAreaTouched(TestGFX5Activity.java:249)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.entity.scene.Scene.onAreaTouchEvent(Scene.java:409)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.entity.scene.Scene.onSceneTouchEvent(Scene.java:328)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.engine.Engine.onTouchScene(Engine.java:452)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.engine.Engine.onTouchEvent(Engine.java:438)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.input.touch.controller.BaseTouchController$TouchEventRunnablePoolItem.run(BaseTouchController.java:102)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.util.adt.pool.RunnablePoolUpdateHandler.onHandlePoolItem(RunnablePoolUpdateHandler.java:54)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.util.adt.pool.RunnablePoolUpdateHandler.onHandlePoolItem(RunnablePoolUpdateHandler.java:1)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.util.adt.pool.PoolUpdateHandler.onUpdate(PoolUpdateHandler.java:88)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.input.touch.controller.BaseTouchController.onUpdate(BaseTouchController.java:62)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.engine.Engine.onUpdate(Engine.java:584)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.engine.Engine.onTickUpdate(Engine.java:548)
07-02 01:34:44.747: E/AndroidRuntime(19252):    at org.andengine.engine.Engine$UpdateThread.run(Engine.java:820) 
```

我的代码的那部分：

```
private void createFiller(float x, float y) {
        fillerNum++;
        Log.e("Creating Filler",Integer.toString(fillerNum));
        filler[fillerNum].active=true;
        filler[fillerNum].sprite = new Sprite(x-fillerTR.getWidth()/2,y - fillerTR.getHeight()/2,fillerTR,getVertexBufferObjectManager())
        {
            @Override
            public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY){
                if(pSceneTouchEvent.isActionMove()){
                    setPosition(pSceneTouchEvent.getX() - getWidth() / 2, pSceneTouchEvent.getY() - getHeight() / 2);
                }
                if(pSceneTouchEvent.isActionUp()){
                    Log.e("Action Up",Integer.toString(fillerNum));
                    if(!filler[fillerNum].body.getUserData().equals("destroyed"))//Line 249
                        createStationaryFiller();
                }
                return true;
            }
        };

        scene.registerTouchArea(filler[fillerNum].sprite);

        filler[fillerNum].body = PhysicsFactory.createCircleBody(mPhysicsWorld, filler[fillerNum].sprite, BodyType.DynamicBody, FIXTURE_DEF);
        filler[fillerNum].body.setUserData("fill");
        mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(filler[fillerNum].sprite, filler[fillerNum].body, true, true));
        scene.attachChild(filler[fillerNum].sprite);
    } 
```

如果需要任何其他解释或代码，请告诉我，我可以发布。我难住了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:46:12.957

行号会很好，但我怀疑fillerNum 大于填充数组的大小。无论如何，你的堆栈跟踪说异常是在第 249 行引发的，所以找到那行，你会发现你的问题 :)

# c# - 如何在多域环境中为用户枚举组

> ID：11290314
> 
> 赞同：1
> 
> 时间：2012-07-02T08:40:16.550
> 
> 标签：c#, .net, windows, pinvoke, directoryservices

假设您的组织中有一个包含两个域的林。在我的例子中，每个域都定义在一个服务器中，所以我有两个域控制器。

```
DOMAIN1
  group1
  user1
DOMAIN2
  group2
  user2

group1 members: user1, user2
group2 members: user1, user2 
```

有没有办法从域 DOMAIN2 中的机器列出**user1**所属的组？使用 C# 或 WinAPI 对我有效。

* * *

**编辑：** WinAPI 函数[NetUserGetGroups](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370653%28v=vs.85%29.aspx)对我不起作用，因为当它被执行以在属于域 DOMAIN2 的机器中加载 user1 的组时它不起作用。

我需要类似于[LookupAccountName](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379159%28v=vs.85%29.aspx)的东西，它能够解析跨域：

> 如果无法在本地系统上解析名称，此函数将尝试使用本地系统信任的域控制器解析名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:33:48.023

如果您使用的是 .NET 4.0，[`System.DirectoryServices.AccountManagement`](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间会有所帮助。您使用创建与域的连接`PrincipalContext`，让用户使用`UserPrincipal`并调用该方法`GetGroups`。我相信您可以为所有必需的域执行此操作，前提是您具有适当的权限。此代码项目[文章](http://www.codeproject.com/Articles/38344/Using-System-DirectoryServices-AccountManagement)显示了一些示例。

# browser - Google Chrome 扩展程序更新设置或首选项文件？

> ID：11290317
> 
> 赞同：0
> 
> 时间：2012-07-02T08:40:38.753
> 
> 标签：browser, google-chrome-extension, bookmarks

我发现浏览器是否通过“始终显示书签栏”选项中的设置显示书签栏，它是相对的**“...Google\Chrome\User Data\Default\Preferences** ”文件：

```
{
   ......
   "bookmark_bar": {
      "show_on_all_tabs": false
   },
   ......
} 
```

如何通过 API 或文件控制“书签栏”选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:50:58.633

我发现谷歌无法通过谷歌搜索支持相关的 API。

# c# - Socket.Bind 和 Connect 使用本地地址

> ID：11290323
> 
> 赞同：5
> 
> 时间：2012-07-02T08:40:59.513
> 
> 标签：c#, sockets

为了测试我的服务器/客户端应用程序，每个客户端都通过其 IP 地址知道，我创建了几个网络适配器（请参阅[如何在 .NET 中创建虚拟网络适配器？](https://stackoverflow.com/questions/2234102/how-to-create-a-virtual-network-adapter-in-net)）。192.168.0.10 和 11 现在都对应于本地以太网适配器（10 是“真正的”适配器，11 是环回适配器）。

`Connect`只要客户端不将`Bind`其套接字连接到特定地址，客户端就可以自己连接到服务器。但如果是这样，服务器不会注意到任何事情，并且客户端会发生超时（`Bind`出于安全原因，我想使用服务器通过查看远程端点的 IP 地址自动检测哪个客户端正在连接自己）新连接：如果服务器不知道 IP 地址，它将立即断开连接 - 以前我使用了多个虚拟机，但它使用了更多的 RAM，而且使用起来不太实用）。

这是我服务器中的代码，例如在 192.168.0.10:1234 上监听

```
IPEndPoint myEP = new IPEndPoint(myAddress, myPort);
Socket listeningSocket = new Socket(myAddress.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
listeningSocket.Bind(myEP);
listeningSocket.Listen(50);
Socket acceptedSocket = listeningSocket.Accept(); 
```

这是我客户端中的代码，例如绑定到 192.168.0.11（任何端口）并连接到 192.168.0.10:1234

```
Socket socket = new Socket(svrAddress.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
socket.Bind(new IPEndPoint(myAddress, 0)); // Bind to local address using automatic port
socket.Connect(new IPEndPoint(svrAddress, svrPort)); // Works fine without Bind, timeout with Bind 
```

我已经尝试过使用相应的 IPv6 地址，但我得到了完全相同的结果。如果我`Bind`在同一地址上的客户端（使用与服务器不同的端口），它工作正常。

知道我做错了什么吗？

编辑这是我的测试项目（它可能对某人有用）

服务器部分：

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Threading.Tasks;

namespace Server
{
    class Program
    {
        static void Main(string[] args)
        {
            IPAddress[] ips = Dns.GetHostEntry(Dns.GetHostName()).AddressList;

            string line = string.Empty;
            while (line != "q")
            {
                // Gets the IP address to listen on.
                Console.WriteLine("IP to listen on:");
                int count = 0;
                foreach (IPAddress ip in ips)
                    Console.WriteLine("{0}: {1}", ++count, ip.ToString());

                string numString = Console.ReadLine();
                int pos = Convert.ToInt32(numString) - 1;
                IPAddress myAddress = ips[pos]; // Removing or not the scope ID doesn't change anything as "localEndPoint" below will contain it no matter what

                // Binds and starts listening.
                IPEndPoint myEP = new IPEndPoint(myAddress, 12345);
                Socket listeningSocket = new Socket(myAddress.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
                listeningSocket.Bind(myEP);
                listeningSocket.Listen(50);

                IPEndPoint localEndPoint = (IPEndPoint)listeningSocket.LocalEndPoint;
                Console.WriteLine("Listening on {0}:{1}", localEndPoint.Address, localEndPoint.Port);

                Task.Factory.StartNew(() =>
                    {
                        try
                        {
                            // Accepts new connections and sends some dummy byte array, then closes the socket.
                            Socket acceptedSocket = listeningSocket.Accept();
                            IPEndPoint remoteEndPoint = (IPEndPoint)acceptedSocket.RemoteEndPoint;
                            Console.WriteLine("Accepted connection from {0}:{1}.", remoteEndPoint.Address, remoteEndPoint.Port);
                            acceptedSocket.Send(new byte[] { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 });
                            acceptedSocket.Close(5000);
                            Console.WriteLine("-= FINISHED =- Type q to quit, anything else to continue");
                        }
                        catch (Exception ex)
                        { }
                    });

                line = Console.ReadLine();

                // Closes the listening socket.
                listeningSocket.Close();
            }
        }
    }
} 
```

客户端部分

```
using System;
using System.Linq;
using System.Net;
using System.Net.Sockets;
using System.Threading.Tasks;

namespace Client
{
    class Program
    {
        static void Main(string[] args)
        {
            IPAddress[] ips = Dns.GetHostEntry(Dns.GetHostName()).AddressList;

            string line = string.Empty;
            while (line != "q")
            {
                // Gets the IP address to connect to (removes the "scope ID" if it's an IPv6).
                Console.WriteLine("IP to connect to:");
                int count = 0;
                foreach (IPAddress ip in ips)
                    Console.WriteLine("{0}: {1}", ++count, ip.ToString());

                string numString = Console.ReadLine();
                int pos = Convert.ToInt32(numString) - 1;
                IPAddress svrAddress = ips[pos].AddressFamily == AddressFamily.InterNetworkV6
                    ? new IPAddress(ips[pos].GetAddressBytes())
                    : ips[pos];

                Console.WriteLine("Connecting to " + svrAddress);

                // Gets the IP address to bind on (can chose "none" - also removes the "scope ID" if it's an IPv6).
                Console.WriteLine("IP to bind to:");
                Console.WriteLine("0: none");
                count = 0;
                IPAddress[] filteredIps = ips.Where(i => i.AddressFamily == svrAddress.AddressFamily).ToArray();
                foreach (IPAddress ip in filteredIps)
                    Console.WriteLine("{0}: {1}", ++count, ip.ToString());

                numString = Console.ReadLine();
                pos = Convert.ToInt32(numString) - 1;
                IPEndPoint localEndPoint = (pos == -1)
                    ? null
                    : new IPEndPoint(
                        filteredIps[pos].AddressFamily == AddressFamily.InterNetworkV6
                            ? new IPAddress(filteredIps[pos].GetAddressBytes())
                            : filteredIps[pos]
                        , 0);
                Console.WriteLine("Binding to " + (localEndPoint == null ? "none" : localEndPoint.Address.ToString()));

                // Binds to an address if we chose to.
                Socket socket = new Socket(svrAddress.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
                if (localEndPoint != null)
                    socket.Bind(localEndPoint);

                Task.Factory.StartNew(() =>
                {
                    try
                    {
                        // Connects to the server and receives the dummy byte array, then closes the socket.
                        socket.Connect(new IPEndPoint(svrAddress, 12345));
                        IPEndPoint remoteEndPoint = (IPEndPoint)socket.RemoteEndPoint;
                        Console.WriteLine("Connected to {0}:{1}", remoteEndPoint.Address, remoteEndPoint.Port);
                        byte[] buffer = new byte[10];
                        Console.WriteLine((socket.Receive(buffer) == buffer.Length) ? "Received message" : "Incorrect message");
                        socket.Close();
                    }
                    catch (Exception ex)
                    {
                        // An exception occured: should be a SocketException due to a timeout if we chose to bind to an address.
                        Console.WriteLine("ERROR: " + ex.ToString());
                    }
                    Console.WriteLine("-= FINISHED =- Type q to quit, anything else to continue");
                });

                line = Console.ReadLine();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T03:45:37.813

实际上这是我的网络适配器的配置问题，它与“**弱主机模型**”有关。

根据我所读到的（在 Windows[中使用特定网络接口作为套接字](https://stackoverflow.com/questions/2065495/using-a-specific-network-interface-for-a-socket-in-windows)），在 Vista 之前的 Windows 上绑定仅适用于传入流量，而不会对传出流量执行任何操作。

从 Vista 开始，它是可能的，但默认情况下它不起作用：您需要允许“弱主机模型”使用

```
netsh interface ipv4 set interface "loopback" weakhostreceive=enabled
netsh interface ipv4 set interface "loopback" weakhostsend=enabled 
```

有关更多信息，请参阅[https://web.archive.org/web/20150402200610/http://blog.loadbalancer.org/direct-server-return-on-windows-2008-using-loopback-adpter/](https://web.archive.org/web/20150402200610/http://blog.loadbalancer.org/direct-server-return-on-windows-2008-using-loopback-adpter/)。

编辑

实际上，与其创建多个环回适配器并更改它们的主机模型，不如只创建一个环回适配器，在与您的真实 IP 不同的网络上为其提供多个 IP 地址，然后仅使用这些 IP 进行测试，这样会更好、更容易. 这样就没有路由问题，并且您确定一切都保持在本地（因为在真实适配器和环回适配器之间没有路由）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-21T07:12:59.457

在服务器中使用以下代码将连接绑定到同一端口上的所有接口上。

```
// Binds and starts listening.
IPEndPoint myEP = new IPEndPoint(IPAddress.Any, 12345); 
```

# ruby-on-rails - Ruby on Rails：如何将数据库导出到 sql 文件？

> ID：11290332
> 
> 赞同：0
> 
> 时间：2012-07-02T08:41:20.730
> 
> 标签：ruby-on-rails, database, export, rake

我想将数据库导出到单个 sql 文件中。我接手了一个开发人员构建的项目，该开发人员在离开项目之前似乎没有备份它。我需要复制数据库结构，以便基本上可以在本地测试环境中处理它。

我注意到`rake db:structure:dump`终端中的 -command 给了我以下响应：**rake aborted！不知道如何构建任务“数据集：导出”**

是否有我需要安装的 gem 或其他东西，或者你如何简单地将数据库导出到单个文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:02:48.973

您可以执行以下操作：

a) 使用 rake db:schema.dump 创建模式的 rails 版本

生成的文件是 db/schema.rb 您可以使用 db:schema:load 在本地加载它

b) 使用 mysql 工具获取真正的 sql 转储。参见例如

[http://dev.mysql.com/doc/refman/5.0/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.0/en/mysqldump.html)

c) 尝试调试 rake 任务失败的原因。一个问题可能是您需要先设置 RAILS_ENV，例如在 Unix-bash 上

```
RAILS_ENV=production; export RAILS_ENV 
```

但是，如果您没有快速找到解决方案，请尝试 a) 或 b)，因为在更改代码、更新 gem 等之前拥有数据库结构很重要。

# google-sheets - 如何将 Google 电子表格的工作表字符串 id 转换为整数索引 (GID)？

> ID：11290337
> 
> 赞同：18
> 
> 时间：2012-07-02T08:41:38.847
> 
> 标签：google-sheets, gdata-api, google-spreadsheet-api, gdata-python-client

要将 google 电子表格的单个工作表导出为 CSV，需要传递整数工作表索引（GID）。

> [https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key=%s&gid=%d&exportFormat=csv](https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key=%s&gid=%d&exportFormat=csv)

但是，这些信息在哪里？使用 gdata.spreadsheets.client，我可以为工作表找到一些字符串 id，例如“oc6、ocv、odf”。

```
client = gdata.spreadsheets.client.SpreadsheetsClient()
feed = client.GetWorksheets(spreadsheet, auth_token=auth_token) 
```

它在原子 XML 之下返回。（一部分）

```
<entry gd:etag="&quot;URJFCB1NQSt7ImBoXhU.&quot;">
    <id>https://spreadsheets.google.com/feeds/worksheets/0AvhN_YU3r5e9dGpTWGx3UVU3MTczaXJuNEFKQjMwN2c/ocw</id>
    <updated>2012-06-21T08:19:46.587Z</updated>
    <app:edited xmlns:app="http://www.w3.org/2007/app">2012-06-21T08:19:46.587Z</app:edited>
    <category scheme="http://schemas.google.com/spreadsheets/2006" term="http://schemas.google.com/spreadsheets/2006#worksheet"/>
    <title>AchievementType</title>
    <content type="application/atom+xml;type=feed" src="https://spreadsheets.google.com/feeds/list/0AvhN_YU3r5e9dGpTWGx3UVU3MTczaXJuNEFKQjMwN2c/ocw/private/full"/>
    <link rel="http://schemas.google.com/spreadsheets/2006#cellsfeed" type="application/atom+xml" href="https://spreadsheets.google.com/feeds/cells/0AvhN_YU3r5e9dGpTWGx3UVU3MTczaXJuNEFKQjMwN2c/ocw/private/full"/>
    <link rel="http://schemas.google.com/visualization/2008#visualizationApi" type="application/atom+xml" href="https://spreadsheets.google.com/tq?key=0AvhN_YU3r5e9dGpTWGx3UVU3MTczaXJuNEFKQjMwN2c&amp;sheet=ocw"/>
    <link rel="self" type="application/atom+xml" href="https://spreadsheets.google.com/feeds/worksheets/0AvhN_YU3r5e9dGpTWGx3UVU3MTczaXJuNEFKQjMwN2c/private/full/ocw"/>
    <link rel="edit" type="application/atom+xml" href="https://spreadsheets.google.com/feeds/worksheets/0AvhN_YU3r5e9dGpTWGx3UVU3MTczaXJuNEFKQjMwN2c/private/full/ocw"/>
    <gs:rowCount>280</gs:rowCount>
    <gs:colCount>28</gs:colCount>
</entry> 
```

我也尝试使用工作表参数，但因“无效工作表”错误而失败。

> [https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key=%s&sheet=XXX&exportFormat=csv](https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key=%s&sheet=XXX&exportFormat=csv)

我想应该有一些神奇的功能，但找不到。如何将它们转换为整数 id？或者我可以使用字符串 id 导出工作表吗？

编辑：我刚刚用python制作了转换表。肮脏但工作:-(

```
GID_TABLE = {
    'od6': 0, 
    'od7': 1, 
    'od4': 2, 
    'od5': 3, 
    'oda': 4, 
    'odb': 5, 
    'od8': 6, 
    'od9': 7, 
    'ocy': 8, 
    'ocz': 9, 
    'ocw': 10, 
    'ocx': 11, 
    'od2': 12, 
    'od3': 13, 
    'od0': 14, 
    'od1': 15, 
    'ocq': 16, 
    'ocr': 17, 
    'oco': 18, 
    'ocp': 19, 
    'ocu': 20, 
    'ocv': 21, 
    'ocs': 22, 
    'oct': 23, 
    'oci': 24, 
    'ocj': 25, 
    'ocg': 26, 
    'och': 27, 
    'ocm': 28, 
    'ocn': 29, 
    'ock': 30, 
    'ocl': 31, 
    'oe2': 32, 
    'oe3': 33, 
    'oe0': 34, 
    'oe1': 35, 
    'oe6': 36, 
    'oe7': 37, 
    'oe4': 38, 
    'oe5': 39, 
    'odu': 40, 
    'odv': 41, 
    'ods': 42, 
    'odt': 43, 
    'ody': 44, 
    'odz': 45, 
    'odw': 46, 
    'odx': 47, 
    'odm': 48, 
    'odn': 49, 
    'odk': 50, 
    'odl': 51, 
    'odq': 52, 
    'odr': 53, 
    'odo': 54, 
    'odp': 55, 
    'ode': 56, 
    'odf': 57, 
    'odc': 58, 
    'odd': 59, 
    'odi': 60, 
    'odj': 61, 
    'odg': 62, 
    'odh': 63, 
    'obe': 64, 
    'obf': 65, 
    'obc': 66, 
    'obd': 67, 
    'obi': 68, 
    'obj': 69, 
    'obg': 70, 
    'obh': 71, 
    'ob6': 72, 
    'ob7': 73, 
    'ob4': 74, 
    'ob5': 75, 
    'oba': 76, 
    'obb': 77, 
    'ob8': 78, 
    'ob9': 79, 
    'oay': 80, 
    'oaz': 81, 
    'oaw': 82, 
    'oax': 83, 
    'ob2': 84, 
    'ob3': 85, 
    'ob0': 86, 
    'ob1': 87, 
    'oaq': 88, 
    'oar': 89, 
    'oao': 90, 
    'oap': 91, 
    'oau': 92, 
    'oav': 93, 
    'oas': 94, 
    'oat': 95, 
    'oca': 96, 
    'ocb': 97, 
    'oc8': 98, 
    'oc9': 99
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-06-24T17:04:28.480

我发现您的问题正在寻找解决同一问题的方法，并且惊讶地发现这些工作表 ID 实际上与 1:1 对应`gids`- 我最初假设它们是独立分配的，而不是混淆的练习。

通过对他们用来从表中生成工作表 ID 的公式进行逆向工程，我能够找到一个*稍微干净的解决方案：*

```
worksheetID = (gid xor 31578) encoded in base 36 
```

因此，一些 Python 从工作表 ID 转到`gid`：

```
def to_gid(worksheet_id):
    return int(worksheet_id, 36) ^ 31578 
```

这仍然很脏，但适用于高于 99 的 GID，而不需要巨型表。至少只要他们不改变生成逻辑（他们可能不会改变，因为它会破坏人们已经使用的现有 ID）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-12T11:15:53.923

此代码适用于新的 Google 表格。

```
// Conversion of Worksheet Ids to GIDs and vice versa
// od4 > 2
function wid_to_gid(wid) {
    var widval = wid.length > 3 ? wid.substring(1) : wid;
    var xorval = wid.length > 3 ? 474 : 31578;
    return parseInt(String(widval), 36) ^ xorval;
}
// 2 > od4
function gid_to_wid(gid) {
    var xorval = gid > 31578 ? 474 : 31578;
    var letter = gid > 31578 ? 'o' : '';
    return letter + parseInt((gid ^ xorval)).toString(36);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-12T08:38:43.193

我无法在 Wasilewski 的帖子中添加评论，因为显然我缺乏声誉，所以这里是基于 Wasilewski 回答的 Javascript 中的两个转换函数：

```
// Conversion of Worksheet Ids to GIDs and vice versa
// od4 > 2
function wid_to_gid(wid) {
    return parseInt(String(wid),36)^31578
}
// 2> 0d4
function gid_to_wid(gid) {
    // (gid xor 31578) encoded in base 36
    return parseInt((gid^31578)).toString(36);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-12T18:03:11.173

这是 Buho 代码的 Java 改编版，可与新的 Google 表格和旧版 Google 电子表格一起使用。

```
// "od4" to 2  (legacy style)
// "ogtw0h0" to 1017661118 (new style)
public static int widToGid(String worksheetId) {

    boolean idIsNewStyle = worksheetId.length() > 3;

    // if the id is in the new style, first strip the first character before converting
    worksheetId = idIsNewStyle ? worksheetId.substring(1) : worksheetId;

    // determine the integer to use for bitwise XOR
    int xorValue = idIsNewStyle ? 474 : 31578;

    // convert to gid
    return Integer.parseInt(worksheetId, 36) ^ xorValue;

}

// Convert 2 to "od4" (legacy style)
// Convert 1017661118 to "ogtw0h0"  (new style)
public static String gidToWid(int gid) {

    boolean idIsNewStyle = gid > 31578;

    // determine the integer to use for bitwise XOR
    int xorValue = idIsNewStyle ? 474 : 31578;

    // convert to worksheet id, prepending 'o' if it is the new style.
    return 
        idIsNewStyle ? 
        'o' + Integer.toString((worksheetIndex ^ xorValue), 36): 
        Integer.toString((worksheetIndex ^ xorValue), 36);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-01T17:48:23.207

这是对 Buho 和 Julie 代码的 Clojure 改编版，应该适用于新的 Google 表格和旧版 Google 电子表格。

```
(defn wid->gid [wid]
  (let [new-wid? (> (.length wid) 3)
        wid      (if new-wid? (.substring wid 1) wid)
        xor-val  (if new-wid? 474 31578)]
    (bit-xor (Integer/parseInt wid 36) xor-val)))

(defn gid->wid [gid]
  (let [new-gid? (> gid 31578)
        xor-val  (if new-gid? 474 31578)
        letter   (if new-gid? "o" "")]
    (str letter (Integer/toString (bit-xor gid xor-val) 36)))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-24T06:30:29.213

如果您将 Python 与[gspread](https://github.com/burnash/gspread)一起使用，请执行以下操作：

```
wid = worksheet.id
widval = wid[1:] if len(wid) > 3 else wid
xorval = 474 if len(wid) > 3 else 31578
gid = int(str(widval), 36) ^ xorval 
```

我可能会为此打开一个 PR。

# ajax - 如何在 MVC3 中创建 Ajax 助手

> ID：11290338
> 
> 赞同：2
> 
> 时间：2012-07-02T08:41:43.543
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, authorization

我在这里创建@Html.ActionLink 助手我检查用户的权限。如果是，我会显示此链接，否则不会。现在的问题是@Ajax.ActionLink 我可以为 Ajax.ActionLink 做助手吗？我制作自定义助手来检查权限。它适用于 html.actionlink 助手。我如何检查 ajax 操作中的权限？

```
 public static IHtmlString CustomActionLink(this HtmlHelper htmlHelper, int userId, string reqController, string reqAction,  string linkText,int reqActionId = 0)
    {

        bool isAllowed = checkPermission(userId, reqController, reqAction, reqActionId);
        if (isAllowed == false)
        {
            return MvcHtmlString.Empty;
        }
        return htmlHelper.ActionLink(linkText, reqAction, new { id =reqActionId });
    } 
```

我想在 Ajax Actions 中做同样的检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T08:44:29.807

在 ASP.NET MVC 中，HTML 帮助器方法只是现有 HtmlHelper 和类的[扩展方法。](http://msdn.microsoft.com/en-us/library/bb383977.aspx)`AjaxHelper`一旦您了解了 .NET 中的*扩展方法*是什么以及它是如何工作的，那么将这个概念应用到类中就不难了`AjaxHelper`：

```
public static IHtmlString CustomAjaxActionLink(
    this AjaxHelper ajaxHelper, 
    AjaxOptions ajaxOptions,
    int userId, 
    string reqController, 
    string reqAction,  
    string linkText,
    int reqActionId = 0
)
{
    bool isAllowed = checkPermission(userId, reqController, reqAction, reqActionId);
    if (!isAllowed)
    {
        return MvcHtmlString.Empty;
    }

    return ajaxHelper.ActionLink(
        linkText, 
        reqAction, 
        new { id = reqActionId }, 
        ajaxOptions
    );
} 
```

在您的视图中，只需使用此自定义帮助器（当然，在将声明包含类的命名空间纳入范围之后）：

```
@Ajax.CustomAjaxActionLink(
    new AjaxOptions { UpdateTargetId = "foo" },
    123,
    "SomeController",
    "SomeAction",
    "click me and get a surprise!",
    456
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:07:06.353

使用 AuthorizeAttribute 怎么样？

```
public class AuthorizeAdminAttribute : AuthorizeAttribute
    {

        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            if(!AppSecurity.Instance.IsUserInRoles(filterContext.HttpContext.User, AdminGroups))
            {
                HandleUnauthorizedRequest(filterContext);
            }
            base.OnAuthorization(filterContext);
        }
    } 
```

在你的控制器中你可以使用类似的东西：

```
[AuthorizeAdmin]
        public ActionResult Index()
        {
            return View();
        } 
```

# iphone - UIView 在转换子视图时自动调整大小

> ID：11290339
> 
> 赞同：2
> 
> 时间：2012-07-02T08:41:47.300
> 
> 标签：iphone, objective-c, ios

我正在尝试提供旋转支持，但是在两个 UIView 之间转换时，autoResizingMask 属性似乎被忽略了。

这是一个说明问题的视频： [http ://www.youtube.com/watch?v=AWtO7J6YNxA](http://www.youtube.com/watch?v=AWtO7J6YNxA)

我目前将每个 UIView（父视图和子视图）设置为：

```
uiView.autoresizingMask =  (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight ); 
```

此外，父视图具有：

```
self.view.autoresizesSubviews = YES; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:25:04.563

当您从 Web 视图（Google 页面）返回时，您上面提到的两个视图似乎以纵向模式显示，但设备处于横向模式。如果是这样，您可以在转换到 UIWebView 页面之前存储两个视图框架坐标（x、y、宽度和高度），并在转换回来时恢复它们。当然，如果设备处于横向或纵向模式，您需要检查返回。

如果您在 PORTRAIT 模式下保存了 Frame 坐标并从 UIWebView 返回到屏幕并且设备处于 PORTRAIT 模式，则只需使用

```
self.myView.frame = CGRectMake(savedValueOfX, 
                               savedValueOfY,
                           savedValueOfWidth,
                         savedValueOfHeight); 
```

如果设备现在处于横向模式，那么像这样恢复它们......

```
self.myView.frame = CGRectMake(savedValueOfX, 
                               savedValueOfY,
                           savedValueOfHeight,
                           savedValueOfWidth); 
```

# asp.net - 如何在客户端列出已安装的打印机？

> ID：11290345
> 
> 赞同：0
> 
> 时间：2012-07-02T08:41:59.183
> 
> 标签：asp.net, printing

我有一个网络应用程序。我列出了计算机上本地安装的打印机，但是当应用程序从服务器运行时，它会列出服务器上的打印机。我需要本地打印机列表。我怎样才能做到这一点？？

# vim - VIM：破解 ctags 或调整标签栏以获得更好的 PHP 支持

> ID：11290352
> 
> 赞同：2
> 
> 时间：2012-07-02T08:42:11.047
> 
> 标签：vim, ctags, tagbar

最近，我放弃`Taglist`了`Tagbar`。`Tagbar`对除 PHP 之外的所有语言都按预期工作。它将类、方法和变量列出到它们各自的类别中，而不是将方法和变量显示到它们各自的范围内。

我开始知道`ctags`对 PHP 的支持很差。

有什么方法可以改进`ctags`和`Tagbar's`支持 PHP 吗？我正在寻求某种黑客或调整，或任何其他方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T00:22:32.503

我刚刚使用[PHP_Parser](https://github.com/nikic/PHP-Parser)作为语法解析后端编写了一个名为[phpctags](https://github.com/techlivezheng/phpctags)的工具来生成 ctags 兼容索引文件和一个名为[tagbar-phpctags 的 tagbar](https://github.com/techlivezheng/tagbar-phpctags)插件插件来增强对 tagbar 的 PHP 支持。

方法和属性，甚至在函数中分配的局部变量现在都可以在它们自己的范围内列出，以及它们的访问信息。

也许这些会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T05:22:25.733

不幸的是，对此没有简单的答案。ctags PHP 解析器只使用正则表达式，结果——正如您所注意到的——是缺少对范围的支持。

有两种方法可以让适当的范围支持工作：有人必须为 ctags 编写一个实际的递归解析器模块，或者一些其他可以以 ctags 兼容格式输出标签的程序。理论上，这甚至可以用 PHP 编写，这可能会更容易——也许已经有一些功能可以访问 AST，然后只需要以正确的格式打印出来。但在有人这样做之前，恐怕没有真正的方法可以在 Tagbar 中正确显示 PHP 范围，因为它必须依赖 ctags 提供给它的信息。

# sql - 如何将6列排序为数字顺序

> ID：11290353
> 
> 赞同：2
> 
> 时间：2012-07-02T08:42:11.760
> 
> 标签：sql, sql-server, sql-server-2008

我在 6 列中获取数据。如何将这些列排序为它们的值并将它们存储到新列或同一列中。

```
Input
ID  N1 N2 N3 N4 N5 N6
1   6  4  5  3  1  2
2   42 43 46 45 48 47

Desired Output
ID  N1 N2 N3 N4 N5 N6  S1 S2 S3 S4 S5 S6
1   6  4  5  3  1  2   1  2  3  4  5  6
2   42 43 46 45 48 47  42 43 45 46 47 48 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:08:44.933

尝试：

```
DECLARE @t TABLE (ID INT, N1 INT,N2 INT,N3 INT,N4 INT,N5 INT,N6 INT)
INSERT @t VALUES 
(1, 6  ,4  ,5  ,3  ,1  ,2),
(2, 42 ,43 ,46 ,45 ,48 ,47)

DECLARE @t1 TABLE (ID INT, a INT, b VARCHAR(10), RowNum INT)
DECLARE @t2 TABLE (ID INT, a INT, b VARCHAR(10))

INSERT @t1
SELECT  ID, a, b, ROW_NUMBER() OVER (PARTITION BY ID ORDER BY a) RowNum
FROM    @t
UNPIVOT
(
    a FOR b IN ([N1],[N2],[N3],[N4],[N5],[N6])
) unpvt
ORDER BY ID, a

UPDATE  @t1
SET     b = 'S'+ CAST(RowNum AS VARCHAR(10))

INSERT INTO @t2
SELECT  a.ID, a.a, a.b
FROM    @t1 a

SELECT  a.ID, 
        a.N1,a.N2,a.N3,a.N4,a.N5,a.N6, 
        b.S1,b.S2,b.S3,b.S4,b.S5,b.S6
FROM    @t a 
JOIN    (
    SELECT  *
    FROM    @t2
    PIVOT
    (
        MAX(a) FOR b IN ([S1],[S2],[S3],[S4],[S5],[S6])
    ) pvt
) b ON b.ID = a.ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:31:51.210

给猫剥皮的方法不止一种。

**到目前为止**，Ivan 发布的方法是执行此操作的首选方法，但如果速度不是问题，那么遵循非常未设置的解决方案就可以了，而且观看起来很有趣。

本质上，所有这些都是相互交换列，直到所有项目都在正确的位置。

```
DECLARE @Cnt INTEGER
DECLARE @t TABLE (ID INT, N1 INT,N2 INT,N3 INT,N4 INT,N5 INT,N6 INT)
INSERT @t VALUES 
(1, 6  ,4  ,5  ,3  ,1  ,2),
(2, 42 ,43 ,46 ,45 ,48 ,47)

SET @Cnt = 1
WHILE @Cnt <> 0
BEGIN
  SET @Cnt = 0

  UPDATE @t SET N1 = N2, N2 = N1, @Cnt = @Cnt + 1 WHERE N1 > N2
  UPDATE @t SET N2 = N3, N3 = N2, @Cnt = @Cnt + 1 WHERE N2 > N3
  UPDATE @t SET N3 = N4, N4 = N3, @Cnt = @Cnt + 1 WHERE N3 > N4
  UPDATE @t SET N4 = N5, N5 = N4, @Cnt = @Cnt + 1 WHERE N4 > N5
  UPDATE @t SET N5 = N6, N6 = N5, @Cnt = @Cnt + 1 WHERE N5 > N6
  SELECT * FROM @t

END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:16:54.960

```
select T.ID, T.N1, T.N2, T.N3, T.N4, T.N5, T.N6, 
       N.X.value('N[1]', 'int') as S1,
       N.X.value('N[2]', 'int') as S2,
       N.X.value('N[3]', 'int') as S3,
       N.X.value('N[4]', 'int') as S4,
       N.X.value('N[5]', 'int') as S5,
       N.X.value('N[6]', 'int') as S6
from YourTable as T
cross apply
  (
    select N
    from (values (N1),(N2),(N3),(N4),(N5),(N6)) as N(N)
    order by N.N
    for xml path(''), type
  ) as N(X) 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/74334)

同样的事情，但使用`pivot`而不是 XML。

```
select P.ID, P.N1, P.N2, P.N3, P.N4, P.N5, P.N6,
       P.[1] as S1,
       P.[2] as S2,
       P.[3] as S3,
       P.[4] as S4,
       P.[5] as S5,
       P.[6] as S6
from
  (
    select T.ID, T.N1, T.N2, T.N3, T.N4, T.N5, T.N6, N.N, N.rn
    from YourTable as T
    cross apply
      (
        select N,
               row_number() over(order by N.N) as rn
        from (values (N1),(N2),(N3),(N4),(N5),(N6)) as N(N)
      ) N
  ) as T
pivot (min(T.N) for T.rn in ([1],[2],[3],[4],[5],[6])) as P 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/74335)

# c - sprintf 中的 pcmC%iD%ip 参数

> ID：11290355
> 
> 赞同：0
> 
> 时间：2012-07-02T08:42:19.140
> 
> 标签：c, linux, linux-kernel, printf

这行代码会做什么。

`pcm->card->number`，`pcm->device`两者都是`int`。

```
char str[16];

sprintf(str, "pcmC%iD%ip", pcm->card->number, pcm->device); 
```

它取自 android/kernel/sound/core/pcm.c。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:50:00.287

根据 和的[描述`sprintf()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/sprintf.html)，是[`fprintf()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fprintf.html)`%i`

> int 参数转换为样式为 [-]dddd 的有符号十进制。精度指定出现的最小位数；如果被转换的值可以用更少的数字表示，它将用前导零扩展。默认精度为 1。使用显式精度 0 转换 0 的结果是没有字符。

所以结果是例如`pcmC12D23p`if`pcm->card->number == 12`和`pcm->device == 23`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:50:08.167

我的猜测：这一行正在形成设备的文件名。就像你可以在*/dev中找到的一样*

# c# - 如何使文本框在 asp.net(c#) 中不可编辑

> ID：11290356
> 
> 赞同：7
> 
> 时间：2012-07-02T08:42:20.343
> 
> 标签：c#, asp.net, html

我创建了一个 ASP Web 应用程序，在该应用程序中，一个表单必须更新文本框字段中的日期值，我将日历按钮放在该文本框附近。它可以更新该文本框字段中的日期，但它是可编辑的。我想通过仅使用日历按钮更新日期值，我使用只读属性但返回空值所以不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T08:48:32.943

尝试客户端 html`readonly`属性而不是 ASP.NET 服务器端`readonly`。

```
myTextBox.Attributes.Add("readonly", "readonly"); 
```

来自 MSDN，

> 发生回发时，将 ReadOnly 属性设置为 true 的 TextBox 控件的 Text 值发送到服务器，但服务器不处理只读文本框。这可以防止恶意用户更改只读文本值。Text 属性的值在回发之间保留在视图状态中，除非被服务器端代码修改。

这就是为什么具有服务器端`readonly`属性的文本框在回发中具有空值的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T11:00:34.427

您可以使用 `TextBox1.Enabled = false;`或

`TextBox1.Attributes.Add("readonly","readonly");`

不同之处在于，如果你做`enabled= false`了，那么你不能传递`textbox`. 如果您需要传递 的值，`textbox`那么您应该使用 的只读属性`textbox`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:50:32.560

您可以在 asp.net 中使 textBox 不可编辑

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T09:54:27.783

在文件后面的代码的页面加载事件中，只需编写以下代码：

```
yourTextBoxName.Attributes.Add("readonly","readonly"); 
```

你也可以通过使用属性来做同样的事情

```
Enabled="false" 
```

在您的 aspx 页面上，但您将无法在页面后面的代码中访问其值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-05T04:55:49.073

通过使用只读，它会在回发时出现问题，只需设置此 java 脚本属性

```
onkeydown="javascript:return false" 
```

通过使用这个你可以拥有像 readonly 这样的属性并且绝对没有问题会引起

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T08:48:42.587

你可能想用这个：

```
TextBox1.Enabled = false; 
```

# iphone - 在 2 个 ViewController 之间导航

> ID：11290360
> 
> 赞同：2
> 
> 时间：2012-07-02T08:42:29.403
> 
> 标签：iphone, ios, xcode

我使用`Navigation Controller`我的`ViewControllers`，我将我的设置`importantViewController`为这样的`RootView`：

```
UINavigationController *navControl = [[UINavigationController alloc] initWithRootViewController: vc];
[self presentModalViewController: navControl animated: YES]; 
```

然后，我 pushView anotherView 是`FrontViewController`这样的：

```
 [self.navigationController pushViewController:vc animated:YES]; 
```

在`FrontViewController`另一个视图中按下按钮后，将按下另一个视图`ViewA`，但它与另一个 ViewController 连接`ViewB`方式与此相同：

```
 [self.navigationController pushViewController:vc animated:YES]; 
```

（我认为我在解雇他们中的任何一个时做错了`[self.navigationController popViewControllerAnimated:YES];`）

这是一个插图：

![在此处输入图像描述](../Images/b7a251685557cb6d66129e7a836dde31.png)

我的问题是，我需要在视图 A 和视图 B 之间导航，然后当我关闭它们中的任何一个时，它会返回到`FrontViewController`. 就像一个孩子视图的孩子。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:53:01.633

我认为这是针对**dismissModalViewController**，但试试这个，

从视图 B 编写这样的代码

```
[[self parentViewController].navigationController popViewControllerAnimated:YES]; 
```

从视图 A 你可以写，

```
[self.navigationController popViewControllerAnimated:YES]; 
```

或者你可以使用这个，

```
[self.navigationController popToViewController:frontViewController animated:YES]; 
```

**更新**

```
for (UIViewController *tmpController  in [self.navigationController viewControllers]) 
{
    if ([tmpController isKindOfClass:[FrontViewController class]])
    {
        [self.navigationController popToViewController:tmpController animated:YES];
        break;
    }
} 
```

这是实现这一目标的最佳解决方案。

在您的视图 A 或 B 上都写下此代码。

希望它现在可以工作:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T08:57:21.410

@Prasad G 指出了一种方法。但是这个解决方案的问题是你需要相同的对象`frontViewController`。您不能通过创建新对象来做到这一点。为了以这种方式`frontViewController`在 appdelgate 中声明对象并从重要的VC使用中推送它

```
appdelgate.frontViewController = // initialize
// Push it 
```

从视图 B 返回时

```
[self.navigationController popToViewController:appdelegate.frontViewController animated:YES]; 
```

另一种解决方案是

```
for (UIViewController *vc  in [self.navigationController viewControllers]) {
    if ([vc isKindOfClass:[FrontViewController class]]) {
        [self.navigationController popToViewController:vc animated:YES];
        break;
    }
} 
```

使用这种方式，您可以从任何级别的导航堆栈访问任何视图控制器。

如果您有 10 个视图控制器并且想要继续使用任何一个，则使用第一个解决方案，因此您必须首先在 appdelegate 中创建所有 10 个视图控制器的对象。

这段代码可能有拼写问题，因为我只是在这里输入的

希望这可以帮助 ：）

**更新**

-> 你有 impVC 作为你的根视图 -> 你推了 frontVC -> 从那里你推了 VC_A -> 从那里你想推 VC_B

所以你完成了推送，回到 VC_A 你可以使用

```
[self.navigationController popViewControllerAnimated]; 
```

现在您可以再次打开 VC_B 并再次弹出它。要从 VC_A 转到 frontVC，您可以使用`popViewControllerAnimated`；要从 VC_B 转到 frontVC，您可以使用我提到的 for 循环。

如果您正在寻找其他东西，请解释一下。如果您仍然面临问题，请解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:56:04.640

在 FrontViewController 按下按钮后：

```
 ViewA instance
  [self.navigationController pushViewController:ViewA animated:YES] 
```

当 ViewA 被驳回时

```
 [self.navigationController popViewControllerAnimated:YES]; 
```

在 ViewA 中加载 ViewB

```
 ViewB instance
  [self.navigationController pushViewController:ViewB animated:YES] 
```

在后视图 B 到 FrontViewController

```
 FrontViewController instance
[self.navigationController popToViewController:FrontViewController animated:YES]; 
```

在后视图 B 到视图 A

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T08:51:54.247

```
[self.navigationController popToViewController:frontViewController animated:YES]; 
```

试试这样我认为它会对你有所帮助。

# iphone - 如何将触摸事件传递给其他视图？

> ID：11290362
> 
> 赞同：0
> 
> 时间：2012-07-02T08:42:38.953
> 
> 标签：iphone, ios, cocos2d-iphone, touch

```
+-----------------------+  +--------------------+
| A                     |  | A                  |
| +-------------------+ |  | +----------------+ |
| |B                  | |  | | C              | |
| |                   | |  | |                | |
| +-------------------+ |  | +----------------+ |
+-----------------------+  +--------------------+ 
```

我有一个如上所述的视图层次结构。（B和C各占A的整个空间，各占屏幕大小，先加B后加C）

出于某种原因，C 正在获取滚动效果的触摸事件
（B 是 cocos2d-x 层，C(scroll view) 在 scrollViewDidScroll [http://getsetgames.com/2009/08/21/cocos2d-and-时设置 B 的位置uiscrollview/](http://getsetgames.com/2009/08/21/cocos2d-and-uiscrollview/) )

我想在不滚动时将触摸事件传递给 B 或它的子视图。

如何在这里将触摸事件传递给 B？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:34:59.730

[WWDC 2012 滚动视图会话](https://developer.apple.com/videos/wwdc/2012/)中涵盖了同样的问题。

步骤是..

```
1\. You hide your scrollview.
2\. place dummy view where scrollview would be and attach scrollview's panGestureRecognizer to this view. 
```

瞧，当它不滚动时，触摸会转到虚拟视图后面的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:09:28.647

因此，如果我正确理解您的上下文，B 和 C 不会重叠（至少不完全重叠）并且共享相同的超级视图。

我看到的唯一可能性是定义自己的自定义窗口，覆盖

```
- (void)sendEvent:(UIEvent*)event { 
```

根据需要处理您在 A 中获得的触摸。

有关更改触摸事件的目标视图的示例，请参阅[SO 上的此线程。](https://stackoverflow.com/questions/8356723/forwarding-touch-events-only-to-the-views-being-touched)您将需要构建自己的流程来处理您必须管理的不同情况，并且还可能通过进行某种投影来弄乱触摸坐标。

# networking - 使用 AWK 计算 NS2 中的吞吐量

> ID：11290364
> 
> 赞同：2
> 
> 时间：2012-07-02T08:42:43.847
> 
> 标签：networking, network-programming, awk, ns2, throughput

![在此处输入图像描述](../Images/84fbcbbf3332d58639ff016d35f79ebf.png) 我在 NS 2.29 中的 senario 有 5 个节点，每个节点有 2 个接口来期望节点 0 和节点 4，节点 0 想要将数据包发送到节点 4。我使用的协议是 AODV，节点类型是无线的

我要计算

接收数据包/发送数据包

以及不同模拟时间的吞吐量，我想用AWK语言做所有事情。

我不知道如何共享输出文件来理解我所说的。

输出文件 ：

```
s -t 0.100000000 -Hs 0 -Hd -2 -Ni 0 -Nx 0.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl AGT -Nw --- -Ma 0 -Md 0 -Ms 0 -Mt 0 -Is 0.0 -Id 4.0 -It cbr -Il 1000 -If 1 -Ii 0 -Iv 32 -Pn cbr -Pi 0 -Pf 0 -Po 0 

r -t 0.100000000 -Hs 0 -Hd -2 -Ni 0 -Nx 0.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl RTR -Nw --- -Ma 0 -Md 0 -Ms 0 -Mt 0 -Is 0.0 -Id 4.0 -It cbr -Il 1000 -If 1 -Ii 0 -Iv 32 -Pn cbr -Pi 0 -Pf 0 -Po 0 

s 0.100000000 _0_ RTR  --- 0 AODV 48 [0 0 0 0] ------- [0:255 -1:255 30 0] [0x2 1 1 [4 0] [0 4]] (REQUEST)

s -t 0.100295000 -Hs 0 -Hd -2 -Ni 0 -Nx 0.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl MAC -Nw --- -Ma 0 -Md ffffffff -Ms 0 -Mt 800 -Is 0.255 -Id -1.255 -It AODV -Il 100 -If 0 -Ii 0 -Iv 30 -P aodv -Pt 0x2 -Ph 1 -Pb 1 -Pd 4 -Pds 0 -Ps 0 -Pss 4 -Pc REQUEST 

r -t 0.101095133 -Hs 1 -Hd -2 -Ni 1 -Nx 40.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl MAC -Nw --- -Ma 0 -Md ffffffff -Ms 0 -Mt 800 -Is 0.255 -Id -1.255 -It AODV -Il 48 -If 0 -Ii 0 -Iv 30 -P aodv -Pt 0x2 -Ph 1 -Pb 1 -Pd 4 -Pds 0 -Ps 0 -Pss 4 -Pc REQUEST 

r -t 0.101120133 -Hs 1 -Hd -2 -Ni 1 -Nx 40.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl RTR -Nw --- -Ma 0 -Md ffffffff -Ms 0 -Mt 800 -Is 0.255 -Id -1.255 -It AODV -Il 48 -If 0 -Ii 0 -Iv 30 -P aodv -Pt 0x2 -Ph 1 -Pb 1 -Pd 4 -Pds 0 -Ps 0 -Pss 4 -Pc REQUEST 

s 0.102001360 _1_ RTR  --- 0 AODV 48 [0 ffffffff 0 800] ------- [1:255 -1:255 29 0] [0x2 2 1 [4 0] [0 4]] (REQUEST)

s -t 0.102476360 -Hs 1 -Hd -2 -Ni 1 -Nx 40.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl MAC -Nw --- -Ma 0 -Md ffffffff -Ms 1 -Mt 800 -Is 1.255 -Id -1.255 -It AODV -Il 100 -If 0 -Ii 0 -Iv 29 -P aodv -Pt 0x2 -Ph 2 -Pb 1 -Pd 4 -Pds 0 -Ps 0 -Pss 4 -Pc REQUEST 

r -t 0.103276493 -Hs 0 -Hd -2 -Ni 0 -Nx 0.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl MAC -Nw --- -Ma 0 -Md ffffffff -Ms 1 -Mt 800 -Is 1.255 -Id -1.255 -It AODV -Il 48 -If 0 -Ii 0 -Iv 29 -P aodv -Pt 0x2 -Ph 2 -Pb 1 -Pd 4 -Pds 0 -Ps 0 -Pss 4 -Pc REQUEST 

r -t 0.103301493 -Hs 0 -Hd -2 -Ni 0 -Nx 0.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl RTR -Nw --- -Ma 0 -Md ffffffff -Ms 1 -Mt 800 -Is 1.255 -Id -1.255 -It AODV -Il 48 -If 0 -Ii 0 -Iv 29 -P aodv -Pt 0x2 -Ph 2 -Pb 1 -Pd 4 -Pds 0 -Ps 0 -Pss 4 -Pc REQUEST 

s 0.105531867 _1_ RTR  --- 0 AODV 48 [0 ffffffff 0 800] ------- [1:255 -1:255 29 0] [0x2 2 1 [4 0] [0 4]] (REQUEST)

s -t 0.105786867 -Hs 1 -Hd -2 -Ni 1 -Nx 40.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl MAC -Nw --- -Ma 0 -Md ffffffff -Ms 2 -Mt 800 -Is 1.255 -Id -1.255 -It AODV -Il 100 -If 0 -Ii 0 -Iv 29 -P aodv -Pt 0x2 -Ph 2 -Pb 1 -Pd 4 -Pds 0 -Ps 0 -Pss 4 -Pc REQUEST 

r -t 0.106587000 -Hs 2 -Hd -2 -Ni 2 -Nx 80.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl MAC -Nw --- -Ma 0 -Md ffffffff -Ms 2 -Mt 800 -Is 1.255 -Id -1.255 -It AODV -Il 48 -If 0 -Ii 0 -Iv 29 -P aodv -Pt 0x2 -Ph 2 -Pb 1 -Pd 4 -Pds 0 -Ps 0 -Pss 4 -Pc REQUEST 

r -t 0.106612000 -Hs 2 -Hd -2 -Ni 2 -Nx 80.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl RTR -Nw --- -Ma 0 -Md ffffffff -Ms 2 -Mt 800 -Is 1.255 -Id -1.255 -It AODV -Il 48 -If 0 -Ii 0 -Iv 29 -P aodv -Pt 0x2 -Ph 2 -Pb 1 -Pd 4 -Pds 0 -Ps 0 -Pss 4 -Pc REQUEST 

s 0.109702791 _2_ RTR  --- 0 AODV 48 [0 ffffffff 2 800] ------- [2:255 -1:255 28 0] [0x2 3 1 [4 0] [0 4]] (REQUEST)

s -t 0.110077791 -Hs 2 -Hd -2 -Ni 2 -Nx 80.00 -Ny 500.00 -Nz 0.00 -Ne -1.000000 -Nl MAC -Nw --- -Ma 0 -Md ffffffff -Ms 4 -Mt 800 -Is 2.255 -Id -1.255 -It AODV -Il 100 -If 0 -Ii 0 -Iv 28 -P aodv -Pt 0x2 -Ph 3 -Pb 1 -Pd 4 -Pds 0 -Ps 0 -Pss 4 -Pc REQUEST 
```

……

未完待续

谁能解释我该怎么做？任何答案都会非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T11:16:43.530

假设您有以下两条数据线，它们由时间戳和在以该时间戳结束的时间间隔内发送的字节数组成：

```
s 1341227109 10010
r 1341227111 19115
s 1341227118 12345
r 1341227122 16773 
```

此代码段将计算两个事件之间的时间间隔内的吞吐量：

```
awk '! sprev && $1 == "s" {sprev = $2; next} $1 == "s" {sinterval = $2 - sprev; sthroughput = $2 / sinterval; print sthroughput, "sent bytes/second"}' inputfile 
```

为接收到的数据添加类似的块。如果需要，您可以使用数组单独跟踪节点到节点的通信。

需要解决的问题：

*   您想输出每个间隔的吞吐量吗？可能不是。仅使用第一个和最后一个事件是否足够好？您是否想进行某种移动计算，需要一些事件或更大的时间段？
*   是否有不同类型的事件需要单独核算？
*   设置中是否有要忽略或使用的数据？

在我看来，处理 NS2 数据的更自然的选择可能是 TCL，因为它似乎在包中使用，并且可能有您可以利用的 API。但是，AWK 非常适合处理表格数据。

# cocoa - 核心数据：refreshObject:mergeChanges：出现“缺失链接”错误

> ID：11290365
> 
> 赞同：0
> 
> 时间：2012-07-02T08:42:45.013
> 
> 标签：cocoa, core-data

假设我有以下实体关系模型：

```
A <-->> B <-->> C <-->> D 
```

A 是我的根对象，我将它保留在我的应用程序中的某个位置。我使用 NSFetchRequest 来获取 C 的特定实例及其所有底层 D 对象，因此 B 尚未在上下文中注册。在我用完 C 之后，我想通过保存和使用 refreshObject:mergeChanges: 来清除该内存，将它连同它的所有 D 对象一起变成故障。但是，我想保持我的 A 对象完好无损。

由于所有相关实体都将变成故障，Core Data 是否会按照图表返回到我的 A 对象，或者上下文中缺少注册的 B 对象来链接两者是否会停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:16:47.307

我会假设后者（对 A 没有更改），但您可以通过`willTurnIntoFault`在托管对象子类中覆盖来轻松检查这一点：

```
- (void) willTurnIntoFault
{
    NSLog(@"%@ will turn into fault", self.name);
    [super willTurnIntoFault];
} 
```

# javascript - 将 createToken 与 stripe.js 一起使用很热门 [LEGACY]

> ID：11290366
> 
> 赞同：4
> 
> 时间：2012-07-02T08:42:47.137
> 
> 标签：javascript, stripe-payments

我正在将 stripe.js 集成到我的应用程序中。我正在做类似的事情：

```
var tokenDetails = {
    number: $('#cnumber').val(),
    exp_month: $('#expmonth').val(),
    exp_year: $('#expyear').val(),
    cvc: $('#cvc').val()
};

Stripe.createToken(tokenDetails, myCallback); 
```

这确实启动了对条带创建令牌的调用，但是，我收到以下错误：

```
{
    "error": {
        "message": "Invalid amount. Amount must be an integer in cents.",
        "param": "amount",
        "type": "invalid_request_error"
     }
} 
```

文档没有说明需要“金额”字段来获取信用卡详细信息的令牌？这是必需的吗？在这种情况下，我将获取令牌，然后将用户添加到带有条带的重复计划中。有人知道这个错误吗？

编辑：

回调函数必须存在，我没有正确传递它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:59:02.487

在这里发现了问题。显然 Stripe.createToken() 函数采用各种类型的第二个参数。如果它是一个函数，它会作为标记化过程的回调被调用。如果它不是一个函数，它被认为是数量（我认为）。

在我的情况下，回调函数是未定义的（错误的命名空间），所以 createToken 函数假定它是一个数量，它不能做任何事情，因此出现错误。

修复...确保回调函数存在。

# asp.net - 正则表达式匹配 url 不适用于某些文件类型

> ID：11290370
> 
> 赞同：-3
> 
> 时间：2012-07-02T08:43:04.240
> 
> 标签：asp.net, .net, regex

我希望我的正则表达式匹配所有不以结尾的有效*URL*

> .gif
> .jpg
> .jpeg
> .pdf
> .doc

我试过了

```
http(s)?://([\w-]+\.)+[\w-]+(/[\w- ./?%&=;]*)?((?!jpg)|(?!gif)|(?!doc)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:09:22.330

您需要为此使用**lookbehind**，尝试

```
http(s)?://([\w-]+\.)+[\w-]+(/[\w- ./?%&=;]*)?(?<!jpg)(?<!gif)(?<!doc)$ 
```

您还需要末尾的锚点`$`，它与字符串的末尾匹配，这对于清楚地定义后视应该向后看的点很重要。

[在 Regexr 上](http://regexr.com?31dkb)查看

# javascript - 当字段高于 15 时，在 [HTTP POST] 之后打开 fancybox

> ID：11290372
> 
> 赞同：2
> 
> 时间：2012-07-02T08:43:11.333
> 
> 标签：javascript, jquery, razor

**情况：**

我们打开第一个花式框，用户在其中填写日期、时间、位置等基本数据。

在那篇文章之后，我们打开第二个花式框窗口，允许用户填写一些细节。像金额，组名，电子邮件等。当金额高于 15 和 30 时，位置 = X 时，我们会自动创建其他时间，当位置 = Y 时，我们会自动创建 30 和 60。

但是，如果该金额高于一天允许的最大值。它需要打开第三个花式框，允许用户为其他人填写一个额外的日期。

**问题：**

问题是当第二个花式框的金额字段高于某个数字时，我如何让花式框打开。该特定数字取决于第一页上的字段。

**代码：**

```
function closeFancyGroepAndIndi() {

    $.fancybox.close();

// this would always open that page
//    $.fancybox({
//        'type': 'ajax',
//        'ajax': { cache: false },
//        'href': ResolveUrl('~/Groep/CreateDouble')

//    });

// reloads the main tables. This should only be the case when the amount is not higher.
    $("#reservationList").load(ResolveUrl('~/Reservation/reservationList'));
    if ($("#indexGroep") && $("#indexIndividual")) {
        var id = $("#reservationId").val();
        $("#indexGroep").load(ResolveUrl('~/Reservation/groepList'), { reservationId: id });
        $("#indexIndividual").load(ResolveUrl('~/Reservation/individualList'), { reservationId: id });
    } 
```

**思念至今：**

我想检查第二页中的值它是javascript，但是我必须将第三个fancybox中的值提供给一个隐藏字段。值的检查将发生。leftOverAmount = $('#AmountHidden').val(); 和 maxAmount = $('maxAmountHidden').val();

那么如何在他的 javascript 的第二页中获取我的第一页的位置呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:16:16.937

在文本框的模糊事件上调用函数，例如

现在，只要用户输入任何值并切换到某个不同的字段，就会调用 javascript 函数。在该函数中，检查文本框的值，如果它大于所需值，则触发您的 js 函数以打开新的弹出窗口。

标记这个答案是否适合你

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:23:27.307

因为我在不止一个地方使用了这个值。它已经在我的 web.config 中定义了

所以我在我看来使用这个

```
 var appSetting = '@(System.Configuration.ConfigurationManager.AppSettings["MaxAmount"].ToString())' 
```

并从我的局部视图中调用 appSetting。并且还改变了额外弹出窗口的想法。所以现在我要在金额 > maxAmount 时显示和隐藏字段。

# sharepoint - 如何区分 WSS 和 Moss 进行条件编译？

> ID：11290378
> 
> 赞同：1
> 
> 时间：2012-07-02T08:43:41.183
> 
> 标签：sharepoint, moss, wss

我不想创建多个项目来分别编译 WSS 和 Moss。如何创建条件来编译不同的 Sharepoint 版本？如何区分版本？

表达意图的示例：

```
#if Moss
//reference a dll specific for moss
#elif WSS
//reference a dll specific for wss
#endif 
```

# ruby - 我应该如何在 Ruby 中检查 EOF

> ID：11290380
> 
> 赞同：1
> 
> 时间：2012-07-02T08:43:47.863
> 
> 标签：ruby, shell

我有一个 Ruby 脚本（1.8.7），它设置了自己的交互式 shell 来运行特定的命令。我希望能够在用户按下 CTRL+D (mac/linux) 时退出。该脚本只是处于一个循环中，并使用 Readline 来读取用户输入。我知道 CTRL+D 发送 EOF 控制字符，但我如何在 Ruby 中对此进行测试？它似乎没有包含在标准 unix 信号列表中，并且由于从技术上讲它不是一个字符，我猜在线上的普通字符串比较也不起作用。

任何想法/指针/建议将不胜感激

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:03:22.907

从[文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/readline/rdoc/Readline.html#readline-method)中：

> **读行（提示 = “”，add_hist = false）**
> 
> (...) 当输入的行为空且用户输入 EOF（在 UNIX 上按 ^D）时，返回 nil。

例子：

```
require "readline"
while buf = Readline.readline("> ", true)
  p buf
end
puts "EOF received, exiting" 
```

# c# - 将字符串转换为十进制

> ID：11290384
> 
> 赞同：0
> 
> 时间：2012-07-02T08:44:01.090
> 
> 标签：c#, .net

> **可能重复：**
> [将字符串转换为小数分隔符“。”的最佳方法 和“，”不敏感的方式？](https://stackoverflow.com/questions/4094179/best-way-to-convert-string-to-decimal-separator-and-insensitive-way)

我在将字符串转换为十进制时遇到问题。这是我尝试过的示例：（在评论中我放置了每次调用的结果）。

```
decimal myValue = Convert.ToDecimal(59,99) //5999

decimal myValue = Convert.ToDecimal(59,99,System.Globalization.CultureInfo.InvariantCulture) //5999

decimal myValue = Convert.ToDecimal(59.99) //59.99

decimal myValue = Convert.ToDecimal(59.99,System.Globalization.CultureInfo.InvariantCulture) //59.99 
```

我希望始终使用小数部分获得小数，独立于分隔符（。或，）

我怎么能这样做？

# c# - 检查类型化对象数组是否不为空

> ID：11290390
> 
> 赞同：0
> 
> 时间：2012-07-02T08:44:16.507
> 
> 标签：c#, arrays

我有一个 Item[] _items 项目数组，其中一些项目可能为空。我想检查数组是否包含至少一个非空项。

我目前的实现似乎有点复杂：

```
 internal bool IsEmtpy { get { return (!(this.NotEmpty)); } }
    private bool IsNotEmpty { get { return ( this.Items.Any(t => t != null));} } 
```

所以我的问题是：**有没有一种更简单的方法来检查一个类型化的引用对象数组是否包含至少一个非空对象？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:47:22.113

您的实现没有复杂性。基本上，检查数组中是否存在非空值的唯一方法是查看所有值，直到到达非空值或数组末尾。

不过下面的代码更容易理解：

```
internal bool IsEmtpy { get { return this.Items.All(t => t == null); } }
private bool IsNotEmpty { get { return this.Items.Any(t => t != null); } } 
```

`IEnumerable`扩展如下可能更好：

```
public static class Extensions {

    public static bool ContainsOnlyEmpty<TSource>(this IEnumerable<TSource> source) {
        return source.All(t => t == null);
    }

    public static bool ContainsNonEmpty<TSource>(this IEnumerable<TSource> source) {
        return source.Any(t => t != null);
    }

} 
```

并像这样使用它：`bool nonEmpty = this.Items.ContainsNonEmpty();`

# visual-studio-2005 - 如何从鼠标右键单击获取文本？

> ID：11290394
> 
> 赞同：-3
> 
> 时间：2012-07-02T08:44:33.557
> 
> 标签：visual-studio-2005, c#-2.0

我使用 Microsoft Visual Studio 2005。并尝试使用 C# 进行编程，我有一个带有文本的文本文件。例如：D23423P 34L211 5 我使用鼠标右键单击复制从文本文件中复制此文本，以将其用于我的 17 个文本框。文本框具有标签：label1。

所以我为label1创建了一个ContextMenuStrip：粘贴和剪切：

```
private void pasteToolStripMenuItem_Click(object sender, EventArgs e)
{
        string tempr = Clipboard.GetText(TextDataFormat.Text);
        textBox1.Paste(tempr);
} 
```

如果我单击粘贴函数，我想获取文本（D23423P 34L211 5）并填充 17 个文本框，例如：

```
 textBox1: D
    textBox2: 2
    textBox3: 4
    .... 
```

我单击右键单击“粘贴”我将数据文本保存在 tempr 中。如何设置文本框 1 和 D 文本框 2 和 2 ...？我应该使用 Methode 字符串拆分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:09:54.797

在你的类中声明一个 TextBox 数组：

```
private const int TextBoxCount = 17;
private TextBox[] TextBoxArray; 
```

并在表单的构造函数中填充它：

```
TextBoxArray = new TextBox[] { textBox1, textBox2, textBox3... }; 
```

在您的粘贴函数中，遍历字符串，并使用 [] 进行索引：

```
for (int i = 0; i < TextBoxCount; i++)
    TextBoxArray[i].Text = tempr[i]; 
```

# spotify - Spotify 应用程序链接

> ID：11290397
> 
> 赞同：0
> 
> 时间：2012-07-02T08:45:18.230
> 
> 标签：spotify

我希望能够在我的应用程序中共享 spotify（facebook、twitter 等）之外的特定内容的链接。

我的链接看起来像“spotify:app:myapplication:page:58”。

我用常规的 a-tags 打开这些链接

```
<a href="spotify:app:myapplication:page:58">my link</a> 
```

我上钩的事件是

```
sp = getSpotifyApi(1);
models = sp.require('sp://import/scripts/api/models');
models.application.observe(models.EVENT.ARGUMENTSCHANGED, function () { console.log(['ARGUMENTSCHANGED', models.application.arguments]); });
models.application.observe(models.EVENT.LINKSCHANGED, function () { console.log(['LINKSCHANGED', models.application.arguments]); });
models.application.observe(models.EVENT.ACTIVATE, function () { console.log(['ACTIVATE', models.application.arguments]); });
models.application.observe(models.EVENT.DEACTIVATE, function () { console.log(['DEACTIVATE', models.application.arguments]); });
models.application.observe(models.EVENT.CHANGE, function () { console.log(['CHANGE', models.application.arguments]); }); 
```

我的问题是单击链接时不会触发任何事件。我可以看到 spotify 打开了链接，因为它在任务栏中闪烁。

即使我在 spotifys 搜索框中输入完整链接，也不会触发任何内容。当我离开或进入我的应用程序时，唯一触发我的事件是激活/停用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:01:51.423

`models.EVENT.ARGUMENTSCHANGED`是你想要的那个。如果事件没有触发，则说明你的代码有问题——确保在加载应用程序时添加了观察者。

# jquery - 连接多个 TinyMCE 文本区域以显示锚点和链接

> ID：11290400
> 
> 赞同：0
> 
> 时间：2012-07-02T08:45:24.860
> 
> 标签：jquery, plugins, tinymce

我在同一个表单上有两个 TinyMCE 文本区域。它们都是使用 element 选项在同一个调用中启动的。

```
tinyMCE.init({
theme : "advanced",
mode : "exact",
elements: "description1,description2", 
```

我还启用了高级链接插件：

```
plugins : "advlink" 
```

如果将锚添加到一个文本区域，则在其他文本区域链接对话框中对我不可用。在添加到 description1 的链接时，只有在 description1 中添加的锚点可用。

我想以某种方式阅读页面上启动的所有文本区域，并允许用户从中选择锚点。如果这需要一个 ajax 解决方案，那么我想指定页面外文本区域以查看锚点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:59:53.120

> 我想以某种方式阅读页面上启动的所有文本区域，并允许用户从中选择锚点。如果这需要一个 ajax 解决方案，那么我想指定页面外文本区域以查看锚点。

这里不需要使用ajax，因为所有代码都在页面上。您需要做的就是在

```
tinymce.get('description1').getContent(); //and
tinymce.get('description2').getContent(); 
```

# c# - 覆盖 Form.Text 属性

> ID：11290402
> 
> 赞同：1
> 
> 时间：2012-07-02T08:45:38.557
> 
> 标签：c#, .net, winforms, properties

我正在尝试覆盖[Form.Text](http://msdn.microsoft.com/en-us/library/ms159419.aspx)`Title`以在出现在表单上之前进行修改。

作为概念证明，我创建了这个类，它将用于代替直接继承自`Form`：

```
public class FormWithVersionNumber : Form
{
    [SettingsBindable(true)]
    public override string Text
    { 
        get
        {
            return "tester";
        }

    }
} 
```

我希望所有继承自此的表单都具有标题`"tester"`，但它始终为空白。我经历过断点，看不出有什么理由会发生这种情况。那么是什么原因呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:59:51.690

因为实际`Title`不是`Text`从`WindowText`.`Control`

以下是您可以如何做的示例：

```
public partial class FormWithVersionNumber : Form
{
    public override sealed string Text
    {
        get
        {
            return base.Text + " 1.0.0.0";
        }
        set
        {
            base.Text = value + " 1.0.0.0";
        }
    }

    public FormWithVersionNumber()
    {
        InitializeComponent();

        Text = "Some Title";
    }
} 
```

# cuda - CURAND_STATUS_DOUBLE_PRECISION_REQUIRED 未定义

> ID：11290404
> 
> 赞同：1
> 
> 时间：2012-07-02T08:45:42.480
> 
> 标签：cuda, double-precision

在构建我的 CUDA 项目时，我收到以下错误：

`cutil_inline_runtime.h(328): error: identifier "CURAND_STATUS_DOUBLE_PRECISION_REQUIRED" is undefined`

所以我开始用谷歌搜索。由于我找不到解决方案（也没有找到实际问题），我从 nVIDIA CURAND 指南 pdf 下载并开始阅读。在那个pdf中它说：

```
Enumerator:
...
**CURAND_STATUS_DOUBLE_PRECISION_REQUIRED** GPU does not have double precision required by MRG32k3a
... 
```

这意味着我不能执行**双重**数据类型的操作......对吗？好吧，这似乎是错误的，因为我向你保证，几天前我使用**双**数据类型制作了一个项目，它工作得很好。有人有建议吗？谢谢！

**编辑**由于我无法找到问题的“真正”解决方案，最终我在 cutil_inline_runtime.h 中用“CURAND_STATUS_DOUBLE_PRECISION_REQUIRED”注释掉了这些行，现在它可以工作了。我知道这很“丑陋”，但这是唯一有帮助的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:00:49.323

我也有这个问题。问题是我使用了不同版本的 cuda SDK 和 cuda 工具包。我使用的是更新版本的 SDK，它引用了 CURAND_STATUS_DOUBLE_PRECISION_REQUIRED 的定义，但在我安装的旧版 cuda 工具包的 curand.h 中未定义该定义。

尝试安装与您的 cuda SDK 版本匹配的工具包版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:15:12.707

尝试谷歌搜索“计算能力”，这是 nvidia 定义各种 CUDA 能力的方式。在 CUDA C 编程指南中，多次提到具有 1.2 或更低计算能力的设备不支持双精度 FP 数学：[CUDA C 编程](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf "CUDA C 编程")，第 140 页，并检查表 F-1，即关于 dpfp 支持的行.

Gefore 8800 GT是G80架构芯片，计算能力1.0。你不能在这张卡上做双重计算。请记住，许多示例代码都使用了仿真模式等，这可能会让您误以为它可以工作。

# javascript - 如何直接从api获取json并使用它？

> ID：11290405
> 
> 赞同：2
> 
> 时间：2012-07-02T08:45:44.257
> 
> 标签：javascript, json

```
var moviereviewtext = "{"title": "Friday the 13th", "year": 1980, "reviews": [{"reviewer": "Pam", "stars": 3, "text": "Pretty good, but could have used more Jason"}, {"reviewer": "Alice", "stars": 4, "text": "The end was good, but a little unsettling"}]}";

var jsonobj = eval("(" + moviereviewtext + ")"); 
```

上图中有一个变量，我们以 json 格式输入数据。但我需要的是，我有 api 的 url，我必须从那里获取 json 并将其分配给变量。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:01:10.050

你没有忘记逃避你的报价吗？

如果是这样，您应该这样做：

```
var moviereviewtext = "{\"title\": \"Friday the 13th\", ...}"; 
```

或者那个

```
var moviereviewtext = "{'title': 'Friday the 13th',  ...}"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:00:53.430

```
var moviereviewtext = "{\"title\": \"Friday the 13th\", \"year\": 1980, \"reviews\": [{\"reviewer\": \"Pam\", \"stars\": 3, \"text\": \"Pretty good, but could have used more Jason\"}, {\"reviewer\": \"Alice\", \"stars\": 4, \"text\": \"The end was good, but a little unsettling\"}]}";
responseJSON = JSON.parse(moviereviewtext);
alert(responseJSON.title); 
```

您追求的是 JSON.parse() 吗？

上面的代码将显示移动的标题，其余数据可以使用点符号以相同的方式访问。

另外，我相信您忘记转义您的 moviereviewtext 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:58:54.293

最简单的解决方案（虽然不是每个人都喜欢）是使用 jQuery 来处理向托管该 API 的服务器发出 AJAX 请求：

```
$.get(url, options).done(function(obj) { 
    // access the object fields here
    var title = obj.title;
    ...
}) 
```

jQuery 不仅为您处理浏览器不兼容问题，它还解析 JSON，因此您的回调函数将直接接收解码的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T09:04:47.230

如果那是您正在寻找的东西，这就是 Jquery...

```
 var myVariable = $.ajax({
           url: '/path/to/url',
           dataType: 'json',
        },
           async: false,
           success: function(data){
                           // do whatever
           }
       }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-02T08:53:58.260

[http://forums.ext.net/showthread.php?6084-Consume-Web-Service-from-JavaScript-getting-JSON-response](http://forums.ext.net/showthread.php?6084-Consume-Web-Service-from-JavaScript-getting-JSON-response)

我建议您使用 JQuery 而不是 javascript：检查： http: [//www.codeproject.com/Articles/37727/Prepare-a-JSON-Web-Service-and-access-it-with-JQue](http://www.codeproject.com/Articles/37727/Prepare-a-JSON-Web-Service-and-access-it-with-JQue)

检查这个，非常适合初学者： http: [//www.json.org/js.html](http://www.json.org/js.html)

[JavaScript 初学者：在 JavaScript 中使用 JSON 和对象](https://stackoverflow.com/questions/866482/beginner-javascript-working-with-json-and-objects-in-javascript)

# delphi - 使用 DefineProperties 替换 TPersistent 属性，例如 TFont

> ID：11290413
> 
> 赞同：5
> 
> 时间：2012-07-02T08:46:33.723
> 
> 标签：delphi, properties, delphi-xe2

我正在更新组件中的一些属性。为了避免丢失属性错误，我使用**DefineProperties**从流中读取旧属性。大多数属性都可以正常工作，例如**Integer**，但我无法让基于**TPersistent**的属性正常工作。TReader 中的**ReadProperty(TPersistent)****过程**是受保护的，不是公开的，需要破解才能访问它。即使这样，**ReadFontProperty**过程也不会被调用，并且会发生缺少属性的异常。

如何读取**TFont**属性？

这是我尝试做的一些示例代码。

```
...

type
  TMyComponent = class(TComponent)
  strict private
    // Removed 
    //FIntegerProperty: Integer;
    //FFontProperty: TFont;

    // New
    FNewIntegerProperty: Integer;
    FNewFontProperty: TFont;

    procedure ReadIntegerProperty(Reader: TReader);
    procedure ReadFontProperty(Reader: TReader);
  protected
    procedure DefineProperties(Filer: TFiler); override;
  published
    // Removed properties
    //property IntegerProperty: Integer read FIntegerProperty write FIntegerProperty;
    //property FontProperty: TFont read FFontProperty write SetFontProperty;

    // New properties
    property NewIntegerProperty: Integer read FNewIntegerProperty write FNewIntegerProperty;
    property NewFontProperty: TFont read FNewFontProperty write SetNewFontProperty;
  end;

implementation

procedure TMyComponent.DefineProperties(Filer: TFiler);
begin
  inherited;

  // This works
  Filer.DefineProperty('IntegerProperty', ReadIntegerProperty, nil, FALSE);

  // This doesn't
  Filer.DefineProperty('FontProperty', ReadFontProperty, nil, FALSE);
end;

procedure TMyComponent.ReadIntegerProperty(Reader: TReader);
begin
  FNewIntegerProperty:= Reader.ReadInteger;
end;

type
  THackReader = class(TReader);

procedure TMyComponent.ReadFontProperty(Reader: TReader);
begin
  { TODO : This doesn't work. How do we read fonts? }
  THackReader(Reader).ReadProperty(FNewFontProperty);
end;

... 
```

**更新 1**

使用以下代码尝试了 David 的建议：

```
Filer.DefineProperty('Font.CharSet', ReadFontCharSet, nil, False); 
```

...

```
procedure TMyComponent.ReadFontCharSet(Reader: TReader);
begin
  Reader.ReadInteger;
end; 
```

我收到**无效的属性值**错误。我想这与**Charset**类型为**TFontCharset**（= System.UITypes.TFontCharset = 0..255）有关。我如何阅读这种类型的财产？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T09:44:41.963

为此，您需要使用的每个单独发布的属性，`TFont`并且您需要使用完全限定的名称。

```
Filer.DefineProperty('FontProperty.Name', ReadFontName, nil, False);
Filer.DefineProperty('FontProperty.Height', ReadFontHeight, nil, False);
Filer.DefineProperty('FontProperty.Size', ReadFontSize, nil, False);
// and so on for all the other published properties of TFont 
```

`ReadFontName`等`ReadFontHeight`应该将旧的属性值读入新命名的组件中。

```
procedure TMyComponent.ReadFontName(Reader: TReader);
begin
  FNewFontProperty.Name := Reader.ReadString;
end;

// etc. etc. 
```

**更新**

你问如何阅读 Charset 属性。这很复杂，因为它既可以写为文本标识符（参见`FontCharsets`Graphics.pas 中的常量），也可以写为纯整数值。这是一些快速组合的代码，可以读取您的字符集。

```
procedure TMyComponent.ReadFontCharset(Reader: TReader);

  function ReadIdent: string;
  var
    L: Byte;
    LResult: AnsiString;
  begin
    Reader.Read(L, SizeOf(Byte));
    SetString(LResult, PAnsiChar(nil), L);
    Reader.Read(LResult[1], L);
    Result := UTF8ToString(LResult);
  end;

  function ReadInt8: Shortint;
  begin
    Reader.Read(Result, SizeOf(Result));
  end;

  function ReadInt16: Smallint;
  begin
    Reader.Read(Result, SizeOf(Result));
  end;

var
  Ident: string;
  CharsetOrdinal: Integer;

begin
  Beep;
  case Reader.ReadValue of
  vaIdent:
    begin
      Ident := ReadIdent;
      if not IdentToCharset(Ident, CharsetOrdinal) then begin
        raise EReadError.Create('Could not read MyFont.Charset');
      end;
      FNewFontProperty.Charset := CharsetOrdinal;
    end;
  vaInt8:
    FNewFontProperty.Charset := ReadInt8;
  vaInt16:
    FNewFontProperty.Charset := ReadInt16;
  else
    raise EReadError.Create('Could not read FontProperty.Charset');
  end;
end; 
```

# maven - 从 Maven settings.xml 文件中获取属性到应用程序上下文

> ID：11290414
> 
> 赞同：0
> 
> 时间：2012-07-02T08:46:35.860
> 
> 标签：maven, properties, settings

关于这个问题有很好的[问题和答案](https://stackoverflow.com/questions/4107222/can-i-inject-properties-from-maven-passwords-defined-in-settings-xml-into-my-s)，但这些选项对我不起作用。

我想将变量传递给应用程序上下文：

```
<bean class="blah.blah.Blah" id="blah">
    <property name="first" value="${first.property}"/>
    <property name="second" value="${second.property}"/>
</bean> 
```

我在 Maven 的`settings.xml`文件中有以下内容：

```
<profiles>
    <profile>
      <id>profileId</id>
      <activation>
          <activeByDefault>true</activeByDefault>
      </activation>
      <properties>
          <first.property>first value</first.property>
          <second.property>second value</second.property>
      </properties> 
```

我尝试[了这个选项](https://stackoverflow.com/a/10736501/1240930)（这有点奇怪），它没有给出任何结果。比我添加了这个插件：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0-alpha-2</version>
    <executions>
      <execution>
        <phase>process-resources</phase>
        <goals>
          <goal>write-project-properties</goal>
        </goals>
        <configuration>
          <outputFile>
            src/main/resources/maven.properties
          </outputFile>
        </configuration>
      </execution>
    </executions>
</plugin> 
```

之后项目中没有任何`maven.properties`文件。如果我创建了空文件，则其中没有任何内容。我试图用 重复这些步骤`-PprofileId`，但没有帮助。有人可以提供一个工作代码片段或告诉我我在这里想念什么吗？提前致谢。

**更新**：我错了，`properties-maven-plugin`工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:43:57.483

从您的问题中我不清楚 - 但是如果您尝试运行`mvn -PprofileId resources:resources`属性插件将不会运行，因为该命令正在执行单个目标，而不是 Maven 生命周期阶段。如果你跑步会发生什么`mvn -PprofileId process-resources`？

另一个问题，是否还有其他配置文件处于活动状态？ `activeByDefault`并不意味着“始终活跃”。根据[Maven 文档](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)“当 POM 中的配置文件在命令行上或通过其激活配置激活时，默认情况下处于活动状态的所有配置文件都会自动停用。” 因此，如果您有另一个配置文件处于活动状态，`profileId`则不会。

尝试从该配置文件中删除激活块并运行`mvn -PprofileId process-resources`.

# eclipse - Findbugs-Plugin 的 XML 文件（过滤器）的路径

> ID：11290415
> 
> 赞同：1
> 
> 时间：2012-07-02T08:46:36.547
> 
> 标签：eclipse, eclipse-plugin, findbugs

有人可以知道包含 Eclipse 中 Findbugs-Plugin 配置的外部 XML 文件的保存路径在哪里。它可能在 .prefs 文件中的某个地方吗？（我要求提供可以包含在以下位置的文件 xml 文件的路径：Window -> Preferences -> Java -> Findbugs -> File filters -> Include file filters）。

感谢所有提示，问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:00:54.237

Findbugs 设置保存在文件中：

```
[WORKSPACE]/.metadata/.plugins/org.eclipse.core.runtime/.settings/edu.umd.cs.findbugs.plugin.eclipse.prefs 
```

您可以在此处找到当前工作区文件夹：*Help -> About Eclipse -> Installation Details -> Configuration -> System properties ->* Parameter *-data*

# smartgwt - smart gwt所需的xml文件结构

> ID：11290419
> 
> 赞同：1
> 
> 时间：2012-07-02T08:46:47.940
> 
> 标签：smartgwt

代码工作正常。但我无法显示来自“setDataURL（“ds/test_data/employees.data.xml”）的最终数据。所以请告诉我我在哪里创建 dis 文件以及如何创建。

包 com.smartgwt.sample.showcase.client；

```
import com.smartgwt.client.data.DataSource;
import com.smartgwt.client.data.fields.DataSourceFloatField;
import com.smartgwt.client.data.fields.DataSourceIntegerField;
import com.smartgwt.client.data.fields.DataSourceTextField;
import com.smartgwt.client.widgets.Canvas;
import com.smartgwt.client.widgets.grid.CellFormatter;
import com.smartgwt.client.widgets.grid.ListGridRecord;
import com.smartgwt.client.widgets.tree.TreeGrid;
import com.smartgwt.client.widgets.tree.TreeGridField;

import com.google.gwt.i18n.client.NumberFormat;

import com.smartgwt.sample.showcase.shared.FieldVerifier;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.event.dom.client.KeyCodes;
import com.google.gwt.event.dom.client.KeyUpEvent;
import com.google.gwt.event.dom.client.KeyUpHandler;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.DialogBox;
import com.google.gwt.user.client.ui.HTML;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.TextBox;
import com.google.gwt.user.client.ui.VerticalPanel;

/**
 * Entry point classes define <code>onModuleLoad()</code>.
 */
public class Showcase implements EntryPoint {
    /**
     * The message displayed to the user when the server cannot be reached or
     * returns an error.
     */
    private static final String SERVER_ERROR = "An error occurred while "
            + "attempting to contact the server. Please check your network "
            + "connection and try again.";

    /**
     * Create a remote service proxy to talk to the server-side Greeting service.
     */
    private final GreetingServiceAsync greetingService = GWT
            .create(GreetingService.class);

    /**
     * This is the entry point method.
     */
    public void onModuleLoad() {

        RootPanel.get().add(getViewPanel());
      }

      public Canvas getViewPanel() {

        EmployeeXmlDS employeesDS = EmployeeXmlDS.getInstance();

        TreeGrid treeGrid = new TreeGrid();
        treeGrid.setCanEdit(true);
        treeGrid.setLoadDataOnDemand(false);
        treeGrid.setWidth(500);
        treeGrid.setHeight(400);
        treeGrid.setDataSource(employeesDS);
        treeGrid.setNodeIcon("icons/16/person.png");
        treeGrid.setFolderIcon("icons/16/person.png");
        treeGrid.setShowOpenIcons(false);
        treeGrid.setShowDropIcons(false);
        treeGrid.setClosedIconSuffix("");
        treeGrid.setAutoFetchData(true);

        TreeGridField nameField = new TreeGridField("Name");
        TreeGridField jobField = new TreeGridField("Job");
        TreeGridField salaryField = new TreeGridField("Salary");
        salaryField.setCellFormatter(new CellFormatter() {
          public String format(Object value, ListGridRecord record, int rowNum, int colNum) {
            if (value != null) {
              NumberFormat nf = NumberFormat.getFormat("#,##0");
              try {
                return "$" + nf.format(((Number) value).longValue());
              } catch (Exception e) {
                return value.toString();
              }
            } else {
              return null;
            }
          }
        });

        treeGrid.setFields(nameField, jobField, salaryField);
        return treeGrid;
      }

    }

    class EmployeeXmlDS extends DataSource {

      private static EmployeeXmlDS instance = null;

      public static EmployeeXmlDS getInstance() {
        if (instance == null) {
          instance = new EmployeeXmlDS("employeesDS");
        }
        return instance;
      }

      public EmployeeXmlDS(String id) {

        setID(id);
        setTitleField("Name");
        setRecordXPath("/List/employee");
        DataSourceTextField nameField = new DataSourceTextField("Name", "Name", 128);

        DataSourceIntegerField employeeIdField = new DataSourceIntegerField("EmployeeId", "Employee ID");
        employeeIdField.setPrimaryKey(true);
        employeeIdField.setRequired(true);

        DataSourceIntegerField reportsToField = new DataSourceIntegerField("ReportsTo", "Manager");
        reportsToField.setRequired(true);
        reportsToField.setForeignKey(id + ".EmployeeId");
        reportsToField.setRootValue("1");

        DataSourceTextField jobField = new DataSourceTextField("Job", "Title", 128);
        DataSourceTextField emailField = new DataSourceTextField("Email", "Email", 128);
        DataSourceTextField statusField = new DataSourceTextField("EmployeeStatus", "Status", 40);
        DataSourceFloatField salaryField = new DataSourceFloatField("Salary", "Salary");
        DataSourceTextField orgField = new DataSourceTextField("OrgUnit", "Org Unit", 128);
        DataSourceTextField genderField = new DataSourceTextField("Gender", "Gender", 7);
        genderField.setValueMap("male", "female");
        DataSourceTextField maritalStatusField = new DataSourceTextField("MaritalStatus",
            "Marital Status", 10);

        setFields(nameField, employeeIdField, reportsToField, jobField, emailField, statusField,
            salaryField, orgField, genderField, maritalStatusField);

        setDataURL("ds/test_data/employees.data.xml");
        setClientOnly(true);
      }
    } 
```

# php - array_merge 没有按预期工作

> ID：11290423
> 
> 赞同：7
> 
> 时间：2012-07-02T08:47:07.867
> 
> 标签：php, arrays, multidimensional-array, array-merge

我有一个双层数组。第一层大约有 10 个索引。这些包含每个到 275 个元素的数组，每个数组包含一个单词。

```
Array
(
[0] => Array
    (
    [0] => Suspendisse
    [1] => Nam.
    [2] => Amet
    [3] => amet
    [4] => urna
    [5] => condimentum
    [6] => Vestibulum
    [7] => sem
    [8] => at
    [9] => Curabitur
    [10] => lorem
    .... to [275]
    )
[1] => Array
    (
    ... you get the idea
    )
... 10 elements total
) 
```

现在，通过某些情况，例如占用空间的添加图像，我有时需要重新计算剩余的单词数并重新分配仍然剩余的数组。

为此，我编写了以下函数来使剩余的数组成为一个大长的单词数组，然后我可以将 array_chunk 调整为正确的比例。&$array 是对“母数组”的引用，$memory 是一个多余的单词数组，$index 是我们通过 for 循环迭代的地方，$limit 是第二级的“数组”长度，在这个案例 275

```
function redistribute(&$array,$memory,$index,$limit)
{
$ret[] = $array[0];
// skip past the current processed items
for($c=1;$c<$index;$c++)
    {
    $ret[] = $array[$c];
    }
// apply current item
$ret[] = $array[$index];

//join the rest into one big array off words;
$r2=$memory;
$length = count($array);
for($c=$index+1;$c<$length;++$c)
    {
    array_merge($r2,$array[$c]);
    print_r($r2);
    }
} 
```

**问题**

array_merge(arr1,arr2) 似乎不起作用。

执行时

```
redistribute($splitupchunk,array('test','test2','test3','test4'),$i,275); 
```

print_r($r2) 只打印没有来自 $array[$c] 的额外变量的测试数字。我该如何解决？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-02T09:06:34.620

我找到了它不起作用的原因。我假设 array_merge 通过引用而不是通过返回工作。

通过制作线

```
array_merge($r2,$array[$c]);

$r2 = array_merge($r2,$array[$c]); 
```

它现在按预期工作。

# iphone - 使用 UIPanGestureRecognizer 后，UILongPressGestureRecognizer 不起作用

> ID：11290428
> 
> 赞同：1
> 
> 时间：2012-07-02T08:47:28.627
> 
> 标签：iphone, uiimageview, uigesturerecognizer, uipangesturerecognizer

当我的 hitView 部分来自 UIPanGestureRecognizer 之后的超级视图时，UILongPressGestureRecognizer 不起作用。为什么？

```
 - (id)initWithFrame:(CGRect)frame 
    {
      UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];
    [panGesture setMaximumNumberOfTouches:1];
    [panGesture setDelegate:self];
    [_glassesImage addGestureRecognizer:panGesture];

    UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(enchance:)];
    longPressGesture.minimumPressDuration = 0.2;
    [_glassesImage addGestureRecognizer:longPressGesture];

    [self addSubview:_glassesImage];
    }

    - (void)enchance:(UILongPressGestureRecognizer *)gestureRecognizer 
   {
        UIView *hitView = [gestureRecognizer view];
        hitView.alpha=0.6;
        inLongPress=YES;
        gestureRecognizer.allowableMovement = 200;

      if ([gestureRecognizer state] == UIGestureRecognizerStateEnded){
        hitView.alpha=1.0;
        inLongPress=NO;

      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:51:24.660

尝试为您的手势识别器定义一个委托，然后提供一个实现：

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

（[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIGestureRecognizerDelegate/gestureRecognizer%3ashouldRecognizeSimultaneouslyWithGestureRecognizer%3a)）

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
    return YES;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:02:53.817

将委托添加到 longPressGesture。

```
longPressGesture.delegate = self; 
```

我想这会对你有所帮助。

# jquery - 如果子div为空，jQuery隐藏父div

> ID：11290432
> 
> 赞同：7
> 
> 时间：2012-07-02T08:47:33.367
> 
> 标签：jquery, html, hide, parent

我环顾四周，发现了很多关于此的问题，但没有一个解决方案对我有用。我有这样的结构：

```
<div class="pricetag">
    <div class="price">400</div>
</div>

<div class="pricetag">
    <div class="price"></div>
</div>

<div class="pricetag">
    <div class="price">250</div>
</div> 
```

我想要做的是隐藏 .pricetag ，其中 .price 不包含任何内容。同一页面上可能有很多不同的 .pricetag，但我只想隐藏 .price 为空的那些。

jQuery可以做到这一点吗？我尝试了很多不同的脚本，但没有一个能正常工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-02T08:50:31.723

您可以使用[`:empty`](http://api.jquery.com/empty-selector/)选择器和[`parent`](http://api.jquery.com/parent/)方法，假设空`.price`元素永远不会包含任何文本节点（例如换行符）：

```
$(".price:empty").parent().hide(); 
```

这是一个[工作示例](http://jsfiddle.net/VDH8C/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:03:11.137

试试这个 jQuery 脚本

```
$(document).ready(function(e)
{
    $('div.pricetag').each(function(key, value)
    {
        if(!$('div.price', value).html()) $(value).hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T08:49:39.880

```
$('.price').each(function(){
  if ($(this).text().length == 0) {
    $(this).parent().hide()
  }
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T08:51:31.667

**工作演示** [http://jsfiddle.net/mm4pX/1/](http://jsfiddle.net/mm4pX/1/)

您可以使用`.is(':empty')`检查 div 是否为空，然后隐藏父 div。

希望这可以帮助，

**代码**

```
$('.price').each(function() {
    if $('.price').is(':empty') $(this).parent().hide()
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T08:52:05.230

这个 jquery 代码会做到这一点

```
$(function(){
  $(".price").each(function(){
    if($(this).html()=="")
      $(this).parent(".pricetag").hide();
  });
}); 
```

jsbin 示例：http: [//jsbin.com/ovagus](http://jsbin.com/ovagus)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-02T08:38:06.047

如果`:empty`元素包含空格，则选择器不会选择该元素。如果这是一个问题，那么您可以从空格中修剪元素：

```
function isEmpty(element){
  return !$.trim(element.html())
}

$(".box").each(function() {
  var box = $(this);
  var body = box.find(".box-body");

  if(isEmpty(body)) {
    console.log("EMPTY");
    box.hide();
  } 
}); 
```

[http://codepen.io/DanAndreasson/pen/jWpLgM](http://codepen.io/DanAndreasson/pen/jWpLgM)

# mysql - information_schema.tables 查询慢

> ID：11290433
> 
> 赞同：8
> 
> 时间：2012-07-02T08:47:37.823
> 
> 标签：mysql, performance

我在一个典型的共享托管服务产品上运行了一组自行开发的应用程序。我从允许表的静态配置表列表移动到基于 D/B 元数据前缀的表列表的列表。当我确实将此版本推广到公共服务时，我的每个请求延迟平均增加了**2.3-2.4 秒**。一些工具显示这完全取决于一个 SQL 查询：

```
SELECT TABLE_NAME AS name
FROM information_schema.tables
WHERE TABLE_SCHEMA = '<DBname>'
AND TABLE_NAME LIKE '<TablePrefix>%'; 
```

我使用它是因为我想显式地命名结果集中的列。但是，使用替代查询对此进行编码会添加一行额外的代码，该代码行在**<2 mSec**中运行：

```
SHOW TABLES LIKE '<TablePrefix>%'; 
```

我的服务提供商使用 Enterprise MySql 5.0.92-50，所以我无法进行任何分析。这是一个扩展问题，因为它不会发生在我可以分析的开发环境和测试 VM 上。它们支持成千上万的用户，因此实时模式将非常大，但即便如此，连接和大多数查询也只需要几毫秒。

有谁知道为什么在大型多用户系统上查询基于内存的 information_schema 需要这么长时间？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-09T18:58:29.043

对于那些可能想要一个小缺点的黑客：[http ://www.mysqlperformanceblog.com/2011/12/23/solving-information_schema-slowness/](http://www.mysqlperformanceblog.com/2011/12/23/solving-information_schema-slowness/)

它的作用是禁用一些在查询架构时更新的统计信息，更多信息在这里：[http ://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_stats_on_metadata](http://dev.mysql.com/doc/refman/5.1/en/innodb-parameters.html#sysvar_innodb_stats_on_metadata)

为了让不想阅读的懒惰者更轻松，您只需更改设置：

```
innodb_stats_on_metadata=0 
```

您可以在配置文件中或动态地执行此操作：

```
mysql> set global innodb_stats_on_metadata=0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T12:26:37.723

信息架构没有优化，没有索引，只有带有元数据的表，通常，当您从架构运行 SELECT 时，它会打开并读取文件。

看看这篇文章 -[优化 INFORMATION_SCHEMA 查询](http://dev.mysql.com/doc/refman/5.5/en/information-schema-optimization.html)；在某些情况下，它会帮助你。

# java - 在Java中合并两个多边形

> ID：11290437
> 
> 赞同：1
> 
> 时间：2012-07-02T08:47:45.440
> 
> 标签：java, polygons

是否有一种干净的 Java 方法可以将两个给定重叠多边形的点合并为一个多边形？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T08:57:24.127

您想要的是一个[凸壳算法](http://en.wikipedia.org/wiki/Convex_hull_algorithms)，它将采用一组点并返回包含原始点的最小点集。这可以及时完成`n.log n`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T14:01:56.847

[Area](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/Area.html)类支持添加闭合多边形。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-14T22:28:54.223

Convex Hull 与添加不同。添加意味着制作一个看起来像两个多边形重叠的多边形，不一定是凸的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-11T17:26:22.547

您可以为此使用[JTS](https://github.com/locationtech/jts)（Java 拓扑套件）。

*   创建你的多边形对象
*   使用**union**方法，该方法将返回来自两个多边形的所有点的 Set

简单的代码示例：

*   给定多边形 1（作为 WKT）： POLYGON ((0 0, 0 10, 10 10, 10 0, 0 0))
*   给定多边形 2（作为 WKT）： POLYGON ((5 5, 15 5, 15 15, 5 15, 5 5))

    ```
    // create polygons
    Polygon p1 = new GeometryFactory().createPolygon(new Coordinate[]{new Coordinate(0, 0), new Coordinate(0,10), new Coordinate(10,10), new Coordinate(10,0), new Coordinate(0,0)});
    Polygon p2 = new GeometryFactory().createPolygon(new Coordinate[]{new Coordinate(5,5), new Coordinate(15,5), new Coordinate(15,15), new Coordinate(5,15), new Coordinate(5,5)});
    // calculate union
    Geometry union = p1.union(p2);
    // print as WKT
    System.out.println(union.toText()); 
    ```

结果是一个新的多边形：

```
POLYGON ((0 0, 0 10, 5 10, 5 15, 15 15, 15 5, 10 5, 10 0, 0 0)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-03T21:12:53.660

使用@Charles Keepax 提供的算法，您可以执行以下操作：

```
public static Polygon mergePolygons(Polygon a, Polygon b) {
    // create arrays for border of each polygon
    Point[] a_pts = new Point[a.npoints];
    Point[] b_pts = new Point[b.npoints];
    // fill them in an array of Points instead of separate coords.
    Arrays.setAll(a_pts, i -> new Point(a.xpoints[i], a.ypoints[i]));
    Arrays.setAll(b_pts, i -> new Point(b.xpoints[i], b.ypoints[i]));
    // first merge 2 arrays into 1
    Point[] all_pts = (Point[]) mergeArrays(a_pts, b_pts);
    // apply Convex Hull on resulting array
    convexHull(all_pts, all_pts.length);

    // separate x and y coordinates back 
    int[] x_pts = new int[all_pts.length];
    int[] y_pts = new int[all_pts.length];
    Arrays.setAll(x_pts, i -> all_pts[i].x);
    Arrays.setAll(y_pts, i -> all_pts[i].y);
    // return polygon object using those coordinates
    return new Polygon(x_pts, y_pts, all_pts.length);
} 
```

但是，@Lars 的解决方案当然更实用，这就是你可以用一种天真的方式做到这一点的方法。

# html - Visual Studio 2010 的简单 HTML 项目类型

> ID：11290440
> 
> 赞同：58
> 
> 时间：2012-07-02T08:48:06.940
> 
> 标签：html, visual-studio-2010, rest, visual-studio-2012

我们正在使用 Visual Studio 2010 开发一个基于 REST 的应用程序，使用 asp.net web api，我们希望使用 IIS 托管它。

对于客户端，我们希望使用纯 html、css 和 javascript 来访问和使用这个基于 REST 的应用程序。

但是我们在 VS 2010 中找不到任何项目类型的 HTML Web 应用程序或站点。我们不想使用 asp.net 或 mvc 空项目。

是否有任何可用的项目类型或任何其他最佳方式来做到这一点？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-07-02T08:53:19.253

在您的驱动器上为该网站创建一个文件夹。然后创建一个空白解决方案项目（其他项目类型 -> Visual Studio 解决方案）。最后，右键单击您的解决方案并选择“添加 -> 现有网站”，在“添加现有网站”对话框中选择文件系统，然后导航到您的网站文件夹。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-14T23:10:31.970

我做了一个简单的模板。获取它：
访问**[Visual Studio Gallery](http://visualstudiogallery.msdn.microsoft.com/23f0cf36-063d-46e7-a6de-ec07008b5d1b)**页面。下载 VSIX 文件并安装它。下次创建新项目时，您将在 Visual C# 项目类型中看到 HTMLProjectTemplate。 **另一种安装插件的方法：** 直接从VS2010 > Tools > Extension Manager 安装，在 Online Gallery 中搜索**HTMLWebsite**，安装。下次创建新项目时，您将在 Visual C# 项目类型下看到模板。

# c++ - QuickFIX 发起程序无法发送消息

> ID：11290443
> 
> 赞同：1
> 
> 时间：2012-07-02T08:48:14.827
> 
> 标签：c++, quickfix

我一直在尝试使用 QuickFIX 来设置客户端。这是来自 QuickFIX 站点的示例，如下所示：

```
int main( int argc, char** argv ) {
  try
  {
    if(argc < 2) return 1;
    std::string fileName = argv[1];
    FIX::SessionSettings settings(fileName);
    Handler application;
    FIX::FileStoreFactory storeFactory(settings);
    FIX::FileLogFactory logFactory(settings);
    FIX::SocketInitiator initiator(application, storeFactory, settings, logFactory /*optional*/);
    initiator.start();
    cout << "Started.\n";
    initiator.block();
    cout << "Stopped.\n";
    return 0;
  }
  catch(FIX::ConfigError& e)
  {
    std::cout << e.what();
    return 1;
  }
} 
```

我定义了`Handler`实现`Application`类。配置文件如下所示：

```
# default settings for sessions
[DEFAULT]
ConnectionType=initiator
ReconnectInterval=60
SenderCompID=CLIENT
FileLogPath=.
FileStorePath=.
DataDictionary=D:\Program Files\quickfix\spec\FIX44.xml

# session definition
[SESSION]
# inherit ConnectionType, ReconnectInterval and SenderCompID from default
BeginString=FIX.4.4
TargetCompID=SERVER
HeartBtInt=30
SocketConnectPort=6523
SocketConnectHost=127.0.0.1
StartTime=8:00:00
EndTime=23:00:00 
```

运行时，`Handler::toAdmin`和`Handler::onCreate`被调用，然后`block`功能块。但是使用小型 FIX 应用程序 Mini-FIX 作为服务器，我无法从程序中获取任何传入消息。我试过打开两个 Mini-FIX，一个作为服务器，一个作为客户端，它们之间的通信很好。而且我已经确保 ID 和监听端口是正确的。那么会有什么问题呢？Mini-FIX 应该已经收到了程序发送的`toAdmin`Message 。`8=FIX.4.4|9=55|35=5|34=1|49=CLIENT|52=20120702-08:29:25.334|56=SERVER|10=115`开始时间和结束时间看起来很奇怪，但`toAdmin`实际上被调用了。所以我认为消息应该已经发送了。

**编辑** 在对配置文件和程序进行了几次更改后，我已经解决了这个问题，但我不太确定是什么原因造成的。认为这是封闭的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T04:44:32.920

您在问题中发布的 FIX 消息是 LOGOUT 消息（35=5），用这种消息发起连接很奇怪。我希望第一条消息是 LOGON (35=A)。尝试在每次登录时重置序列号，在配置中添加以下行：

```
ResetOnLogon=Y 
```

在 QuickFIX 发行版中还有一个小型服务器（执行程序），您可以使用它来测试您的客户端。请在此处找到服务器：

[http://www.quickfixengine.org/quickfix/doc/html/examples.html](http://www.quickfixengine.org/quickfix/doc/html/examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:46:33.427

在我操作了配置文件和 Mini-FIX 之后，问题就消失了。
似乎是由几个原因引起的：

1.  时间应设置在区间内。

2.  充当服务器的 Mini-FIX 应正确设置目标计算机 ID。

3.  `initiator.block()`足以启动引擎并等待。无需运行`start()`，`block()`两者兼而有之。

# php - 在 php/mysql 中使用主键交换数据库表中的行

> ID：11290445
> 
> 赞同：0
> 
> 时间：2012-07-02T08:48:27.720
> 
> 标签：php, mysql, rows, swap

在我的应用程序中，我想交换数据库中的行。

这意味着，我的桌子有以下结构，

```
Column     Type             Null    Default     Comments

intid         int(11)           No           
intuserid         int(11)           No           
vchimagename      varchar(50)   No 
```

这里 intid 是主键。

当我使用此功能进行 wsapping 时，

```
function row_swap($table, $id1, $id2)
{
    if (!mysql_query("UPDATE $table SET intid='$id1' where intid='$id2'"))
    {
        echo mysql_error() ;
        exit ;
    }
    if (!mysql_query("UPDATE $table SET intid='$id2' where intid='$id1'"))
    {
        echo mysql_error() ;
        exit ;
    }

    return 1;
} 
```

调用函数，

```
row_swap('tblupload', 7, 8) ; 
```

然后显示错误，

```
Duplicate entry '8' for key 'PRIMARY' 
```

那么如何通过使用他们的主键来交换行呢？

如果有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:17:40.533

更改主键从来都不是一个好的编码习惯。

您得到的错误是因为主键

*   不能有重复记录（意味着它应该是唯一的）
*   不能留空

假设您的变量设置为 id1 = 1 id2 = 2

现在您在第一个查询中所做的是将 id2 与 id1 交换

```
mysql_query("UPDATE $table SET intid='$id1' where intid='$id2'") 
```

现在在数据库中，字段更新为 id1 = 2 id2 = 2

这违反了主键的规则。所以你有一个错误

> 键“P​​RIMARY”的重复条目“8”

解决方案是将虚拟值作为 temp 然后交换值。如果您解决了交换两个数字的问题（在学校或学习任何编程语言时），您可能已经这样做了。

你取一个临时变量并将数字 A 和 B 交换为

```
temp = A;
A = B;
B = Temp; 
```

@NobitaZZ 提供的解决方案是正确的，除非并且直到您的 intid 值达到 999999 的标记。选择一个您知道不会干扰您的逻辑的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:51:42.743

```
function row_swap($table, $id1, $id2)
{
    if (!mysql_query("UPDATE $table SET intid='999999' where intid='$id2'"))
    {
        echo mysql_error() ;
        exit ;
    }
    if (!mysql_query("UPDATE $table SET intid='$id2' where intid='$id1'"))
    {
        echo mysql_error() ;
        exit ;
    }
    if (!mysql_query("UPDATE $table SET intid='$id1' where intid='999999'"))
    {
        echo mysql_error() ;
        exit ;
    }

    return 1;
} 
```

您应该使用临时 ID (999999)

# javascript - jQuery过滤器作为css结构伪类的替代品

> ID：11290449
> 
> 赞同：0
> 
> 时间：2012-07-02T08:48:36.440
> 
> 标签：javascript, jquery, html, css

更新：对不起，我的 IE 9 没有配置好：它应该被设置为接受使用 ActiveX 元素。在我这样做之后，它工作得很好。抱歉打扰了。

问题：我想更改每个第三个表格列的颜色。

*初始 DOM*：

```
 <table border="1">
    <tr><td>TD #0</td><td>TD #1</td><td>TD #2</td></tr>
    <tr><td>TD #3</td><td>TD #4</td><td>TD #5</td></tr>
    <tr><td>TD #6</td><td>TD #7</td><td>TD #8</td></tr>
  </table> 
```

*结果 DOM*

```
 <table border="1">
    <tr><td>TD #0</td><td>TD #1</td><td>-here my color changed green- TD #2</td></tr>
    <tr><td>TD #3</td><td>TD #4</td><td>-here my color changed green- TD #5</td></tr>
    <tr><td>TD #6</td><td>TD #7</td><td>-here my color changed green- TD #8</td></tr>
  </table> 
```

为了实现这一点，我尝试了一个 CSS-3 伪类：

```
$("tr td:nth-child(3)").css("color", "green"); 
```

它在 FF、Chrome 中运行良好 .. 但在 IE 9 中失败。

相应的 Jquery 过滤器的表达式是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:52:33.113

更新：我没有意识到您正在为多个`tr`s 执行此操作。这是适当的解决方案

```
$("tr").each(function(){
    $(this).children("td:eq(2)").css("color","red");
}); 
```

以下解决方案仅适用于第一个`tr`.

jquery selctor 返回一个 dom 元素数组，因此您始终可以使用简单的数组索引直接获取元素。

```
var elem = $("tr td")[2];
$(elem).css("color","red"); 
```

这也可以，因为它是原生 jQuery 并且不依赖于 css：

```
$("tr td:eq(2)").css("color", "red"); 
```

注意：这两种技术都使用基于 0 的索引

[http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

# xml - 从 Mathematica 生成与 Excel 兼容的 XML 文件

> ID：11290454
> 
> 赞同：3
> 
> 时间：2012-07-02T08:49:08.323
> 
> 标签：xml, excel, wolfram-mathematica

Excel 可以将其工作簿保存为“XML 表”格式，保留所有格式和样式信息，然后将它们作为原生 Excel 工作簿打开和编辑。我希望通过*Mathematica* for Excel 生成此类文件，以编程方式添加行、列、单元格等的格式信息。

第一个绊脚石的问题是，即使我在*Mathematica*`Import`中生成 Excel 文件，然后将其返回到生成的文件，Excel 也无法打开。在文本编辑器中打开它会显示该文件包含撇号而不是引号。添加选项以解决此问题，但生成的文件仍然无法由 Excel 打开。更仔细的比较表明，它还删除了生成文件中的大部分命名空间前缀。*`Export``"XML"``"AttributeQuoting" -> "\""``Export``Export`*

 *如何从*Mathematica*生成与 Excel 兼容的 XML 文件？

PS这个问题来自上一个问题：“[如何从Mathematica 将数字作为文本字段导出到Excel？](https://stackoverflow.com/q/11256618/590388) ”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T03:50:28.740

我找到了解决方案。[从文档](http://reference.wolfram.com/mathematica/XML/tutorial/ImportingXML.html#18255)中，

> 一些文档以不符合命名空间的方式使用名称，因为扩展 XML 的 XML 命名空间推荐是在最初的 XML 推荐之后提出的。`"IncludeNamespaces"->"Unparsed"`提供以允许解析这些文档。该名称始终表示为 XML 文件中出现的确切的单个字符串。除非绝对必要，否则不应使用此选项值。

有了这个选项，`"IncludeNamespaces"->"Unparsed"`一切都很好，甚至`"AttributeQuoting" -> "\""`不需要这个选项：

```
XMLData = Import["test.xml", "IncludeNamespaces" -> "Unparsed"];
Export["test-from MMa.xml", XMLData] 
```

导出的文件由 Excel 打开，没有警告。*

# c# - 按来源操作网页

> ID：11290455
> 
> 赞同：0
> 
> 时间：2012-07-02T08:49:10.457
> 
> 标签：c#, html, webpage

我用几个不同的术语搜索了这个，但我找不到我的解决方案。我想要做的是通过编辑其源来操作网页，例如从代码中删除一部分可能是一个 div 左右。我知道如何获取网页的源代码并知道如何更改代码，但我不知道如何立即操作页面，例如删除一个元素。

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:51:30.753

*   如果您想操作客户端代码 (HTML)，您需要的是**Ajax**。

    您可以使用**JQuery** javascript 库来操作页面的 html 添加、编辑和删除 html 标签、脚本等。

    [在这里](http://dotnetguts.blogspot.co.uk/2012/01/jquery-ajax-examples-by-calling-aspnet.html)，您可以找到一个不错的教程作为起点。

*   如果您想操作服务器代码（C# 代码隐藏），您需要在 Visual Studio（ASP.NET Web 应用程序）中创建一个 Web 项目

**编辑**：正如**@CSharpened**所评论的，这两种解决方案都不是互斥的。您可以拥有一个使用 Ajax 来操作 UI 的 ASP.NET Web 应用程序。事实上，很多人都是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:52:17.493

我会考虑使用 AJAX。您可以使用 javascript 或 jquery 以及 html、asp.net 和 C# 来实现您所追求的结果。

对于删除 div 或折叠菜单等简单的编辑，简单的 Javascript 或 jquery 就足够了。但是，更改页面的编码需要您使用 AJAX 或类似的。

# objective-c - 使用属性作为常量而不调用返回常量的 getter 方法

> ID：11290456
> 
> 赞同：1
> 
> 时间：2012-07-02T08:49:12.253
> 
> 标签：objective-c, properties, constants

我在一个类中有一个常量，我定义了它`#define HEIGHT 65`而且我知道如何通过调用返回这个常量的 getter 方法从这个类中得到它。我的意思是我不想这样做：

```
#define HEIGHT 65

.
.
.

-(int)getHeight{
    return HEIGHT;
} 
```

**但问题是有没有办法定义一个常量并像其他一样`@property`得到它。`instanceClass.HEIGHT``properties`**

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:00:23.643

关于什么：

```
@property (nonatomic, readonly) int height; 
```

然后在实现文件中：

```
@dynamic height;

....

- (int)height {
    return HEIGHT;
} 
```

# javascript - 使用jquery延迟css触发

> ID：11290459
> 
> 赞同：0
> 
> 时间：2012-07-02T08:49:29.670
> 
> 标签：javascript, jquery, css

有没有办法延迟 css 使用 jquery 触发？

我有一些 css 可以在一个 li 的悬停时显示菜单，但它真的很快，我想将它延迟 1 秒左右。

我知道我可以做这样的事情：

```
$('div#new-menu-lower ul li:hover ul li:first-child ul')
  .delay(800)
  .queue( function(next){ 
    $(this).css('display','block'); 
    next(); 
  }); 
```

但是有没有办法保留 css 并使用 JQ/JS 来延迟加载 css 类会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:00:35.197

有一种方法。如果您将 CSS 保存在外部文件中，通过`link`标签引用它，那么在禁用标签元素后，DOM 将停止引用 CSS 中的元素。然后，一旦您想引用元素，您就可以启用该元素。

# java - Felix 中的嵌入式 Java DB？

> ID：11290463
> 
> 赞同：1
> 
> 时间：2012-07-02T08:49:40.803
> 
> 标签：java, database, apache-felix

我假设有一种方法可以在独立的 Felix 4.0.2 OSGi 盒子中使用嵌入式 Java DB 实例。但是我似乎找不到任何关于我应该如何设置整个事情的线索：我应该使用哪些实现包？我应该如何设置它？

我尝试了很多东西，包括从 glassfich 3.1.2 安装中获取专用包，但无论我做什么，框架都没有注册持久性管理器来为我的应用程序提供。

否则我的代码遵循所有学术规则，注册了一个 ServiceTracker 以了解 EntityManagerFactory 注册，但没有找到...这是我的 persistence.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">

<persistence-unit name="com.julianware.toolbox.logbacktracker.pu"
    transaction-type="RESOURCE_LOCAL">
    <!-- mapping-file>META-INF/maintenance_orm.xml</mapping-file>
    <mapping-file>META-INF/vehicle_orm.xml</mapping-file -->

    <class>com.julianware.toolbox.logbacktracker.pu.LoggerEvent</class>

    <exclude-unlisted-classes>true</exclude-unlisted-classes>

    <properties>
        <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver" />
        <property name="javax.persistence.jdbc.url" value="jdbc:derby:database;create=true" />
        <property name="javax.persistence.jdbc.user" value="felix" />
        <property name="javax.persistence.jdbc.password" value="felix" />
    </properties>
</persistence-unit> 
```

还有我的 Activator 的 start() 方法：

```
public void start(final BundleContext context) throws Exception {
    Filter filter = context.createFilter(String.format("(&(%s=%s)(%s=%s))",
        OBJECTCLASS, EntityManagerFactory.class.getName(),
        EntityManagerFactoryBuilder.JPA_UNIT_NAME, "com.julianware.toolbox.logbacktracker.pu")
    ); 
    entityManagerFactoryTracker = new ServiceTracker(context, filter,  new ServiceTrackerCustomizer() {

        @Override
        public void removedService(ServiceReference reference, Object service) {}

        @Override
        public void modifiedService(ServiceReference reference, Object service) {}

        @Override
        public Object addingService(ServiceReference reference) {
            logger.debug("Found Entity Manager Service reference.");
            entityManagerFactory = (EntityManagerFactory) context.getService(reference);
            return entityManagerFactory;
        }
    });
    entityManagerFactoryTracker.open();

} 
```

最后，我使用的是 JDK 7。Java DB 实现是 jdk 安装的实现。有人知道吗？

万分感谢。朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:27:32.437

我不确定，但您可以从 Maven Central 尝试 Derby。它应该包含正确的 OSGi 元数据。

# xquery - 如何在 Marklogic Server 中获取文件扩展名？

> ID：11290464
> 
> 赞同：0
> 
> 时间：2012-07-02T08:49:46.123
> 
> 标签：xquery, marklogic

我想在 Marklogic 服务器中获取上传文件的文件扩展名。我知道如何获取文件名。但这给出了文件名和扩展名，如 new.txt。但我只想要扩展名而不是完整的文件名。我怎样才能得到文件扩展名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:05:30.877

从文件名获取文件扩展名的方法有很多。例如，您可以使用`functx:substring-after-last($filename, '.')`或其他方法`(fn:substring-after)`在点之后获取子字符串。请参阅：[xqueryfunctions.com](http://www.xqueryfunctions.com/xq/c0008.html#c0046)

附言`fn:tokenize($filename, '\.')[fn:last()]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:09:01.047

我经常使用以下替换：

```
fn:replace("c:\a\b\c.d.e.txt", '^(.*\.)?([^\.]+)$', '$2') 
```

但正如 Andrew 所建议的那样，使用 functx 也是一个好主意。functx 库的副本作为 MarkLogic 后期版本的一部分分发。只需添加以下导入即可使它们可用：

```
import module namespace functx = "http://www.functx.com" at "/MarkLogic/functx/functx-1.0-nodoc-2007-01.xqy"; 
```

！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:17:08.903

只是为了多样性，另一个产生扩展的表达式:)：

```
reversed-string(substring-before(reversed-string($filePath), '.')) 
```

其中`reversed-string($s)`可以定义为：

```
codepoints-to-string(reverse(string-to-code-points($s))) 
```

所以带有替换的整个表达式是：

```
codepoints-to-string(
             reverse(
              string-to-codepoints(
               substring-before(codepoints-to-string(reverse(string-to-codepoints($filePath))),
                               '.')
                                   )
                     )
                              ) 
```

# jquery - jQuery将特定的选择列表选项移动到底部

> ID：11290472
> 
> 赞同：2
> 
> 时间：2012-07-02T08:50:27.557
> 
> 标签：jquery, dom-manipulation

我有以下标记：-

```
<select name="a" id="a">
    <option>Option 1</option>
    <option>Option Bottom</option>
    <option>Option 2</option>
    <option>Option 3</option>
    <optgroup label="Test">
       <option>Option A</option>
       <option>Option B</option>
    </optgroup>
</select> 
```

使用 jQuery 我希望将选项移动`Option Bottom`到列表的底部。然而，`<optgroup>`必须保持在最底层。

所以标记需要这样读：-

```
<select name="a" id="a">
    <option>Option 1</option>
    <option>Option 2</option>
    <option>Option 3</option>
    <option>Option Bottom</option>
    <optgroup label="Test">
       <option>Option A</option>
       <option>Option B</option>
    </optgroup>
</select> 
```

我可以`<optgroup>`通过使用 获得不包括的选项`$options = $('#a').children('option');`

我将如何获取该`Option Bottom`选项，以及如何将其移至列表底部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T08:53:17.013

```
$('#a > option').filter(function() {
    return this.innerHTML == "Option Bottom";
}).insertBefore($('#a  optgroup'));​ 
```

[**现场演示**](http://jsfiddle.net/rXNV3/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:57:18.787

```
$('#a option').each(function() {
    if($(this).text() == 'Option Bottom') {
        $(this).insertBefore('#a optgroup');
    }
}); 
```

# android - Android：是否允许使用默认图标将应用程序发布到 Google Play？

> ID：11290475
> 
> 赞同：0
> 
> 时间：2012-07-02T08:50:37.137
> 
> 标签：android, publishing, google-play

只是想知道是否允许使用默认的 Android 图标在 Google Play 上发布应用程序？我的应用程序成功发布，没有错误，但现在已经过去了大约四个小时，我仍然无法在 Google play 上找到它。所以我想知道使用默认的开发者图标是否是一个错误。关于图标的文档也没有提及此事。

非常感谢您对此事的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:05:04.593

是的，没关系，有时它需要一些时间才能出现在 google play 上，因为它被填充在所有服务器上（*我猜*）。

所以保持耐心，它会出现得更快，有时可能需要 1 小时 - 24 小时。:)

所以当你手指交叉的时候，看看[这个帖子](https://stackoverflow.com/q/9809682/593709)

# ios - 导航控制器

> ID：11290480
> 
> 赞同：0
> 
> 时间：2012-07-02T08:51:20.753
> 
> 标签：ios, ipad, viewcontroller, navigationcontroller

在我的应用程序中，我有一个`navigation controller`. 我添加了一个返回按钮以转到登录屏幕`(UIViewController)`。如何从 回到登录屏幕`navigation controller`？

这是我的后退按钮的代码。

```
(void)viewDidLoad
{

    [super viewDidLoad];

    UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonSystemItemCancel target:self action:@selector(goBacktoLogin)];

    self.navigationItem.leftBarButtonItem = backButton;

}

(void) goBacktoLogin

{

    LoginViewController *loginViewController = [[ LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];

[[ self navigationController] popToViewController:loginViewController animated:YES];

} 
```

我收到以下错误：

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，
> 
> 原因：“试图弹出一个不存在的视图控制器。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:58:18.137

如果您需要返回导航层次结构中的第一个视图控制器，请使用：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:00:15.300

你的问题我不清楚。但我认为这可能会有所帮助：

使用这个将登录控制器推入导航堆栈，

```
LoginViewController *loginViewController = [[ LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];

self.navigationController pushViewController:loginViewController animated:NO]; 
```

并在推送的屏幕（登录视图控制器）中：

推动另一个控制器。然后添加一个后退按钮。点击它

执行这个命令：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

# windows - TeamCity 的构建代理无法找到 PowerShell

> ID：11290484
> 
> 赞同：2
> 
> 时间：2012-07-02T08:51:38.277
> 
> 标签：windows, powershell, teamcity

我在 Windows 2008 R2 SP1 Core 上安装了 TC 的构建代理。服务器已安装 PowerShell 2.0（仔细检查，实际上从 PS 下载了 TC 安装）。查看一些构建配置，我发现它们与此代理不兼容，因为`powershell_x86`/`powershell_x64`是必需的。我尝试删除构建代理目录以强制升级，但没有运气。有趣的是，如果我手动将`powershell_x86`, `powershell_x86_Path`（以及 64 位）变量提供到配置文件中，一切运行正常。

有什么办法可以让构建代理自动找到 PowerShell？它在寻找什么/在哪里寻找它？也许“核心”有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:13:44.623

[在http://svn.jetbrains.org/teamcity/plugins/powershell/trunk/powershell-agent/src/main/java/jetbrains/buildServer/powershell/agent/detect/](http://svn.jetbrains.org/teamcity/plugins/powershell/trunk/powershell-agent/src/main/java/jetbrains/buildServer/powershell/agent/detect/PowerShellRegistry.java)上查看 PowerShell 插件的一些源代码[PowerShellRegistry.java](http://svn.jetbrains.org/teamcity/plugins/powershell/trunk/powershell-agent/src/main/java/jetbrains/buildServer/powershell/agent/detect/PowerShellRegistry.java)它在 PowerShell 检测逻辑中提到了这个页面：http: [//blogs.msdn.com/b/powershell/archive/2009/06/25/detection-logic-poweshell-installation.aspx](http://blogs.msdn.com/b/powershell/archive/2009/06/25/detection-logic-poweshell-installation.aspx)。看看那个页面，它谈到了检查注册表。也许您缺少一些注册表项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:55:46.617

问题是，它需要`MicrosoftWindowsPowerShell`(x64) 和`MicrosoftWindowsPowerShell-WOW64`(x86) （以及依赖项），否则它无法找到它。可能是 Windows 中的一些注册表映射位魔法。

# c# - 条件 C# 断点？

> ID：11290485
> 
> 赞同：10
> 
> 时间：2012-07-02T08:51:38.273
> 
> 标签：c#, debugging, if-statement, foreach, breakpoints

我正在调试一个`foreach`将迭代超过 1000 次的循环 - 所以我只希望循环中的断点为特定项目中断。

所以...

```
foreach(Employee employee in employees)
{
//DO SOMETHING
//BREAK HERE WHEN employee.Id == '2342'
//DO SOMETHING ELSE
} 
```

我是否必须在其中编写一个`If`语句和一些虚拟代码并以这种方式破坏它？那是唯一的方法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-02T08:52:38.213

```
if (employee.Id == '2342') Debugger.Break(); 
```

或者，您可以在 VS 中设置条件断点，但根据我的经验，这非常慢。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-02T08:54:34.623

如果您使用的不是 VS 的 express 版本，请右键单击断点并单击设置条件。

我个人会使用这种方法，因为我认为修改代码来调试它是不好的做法。

否则，您将被迫按照自己的方式行事。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-02T11:07:14.520

只是添加到以前的答案。使用条件断点。

![在此处输入图像描述](../Images/2a6e7eb9457372521389111a7d5f5e25.png)

您可以指定如下条件
![在此处输入图像描述](../Images/dacf655fcf40ed580bccdbb8f15802da.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T08:55:51.753

通过 UI 使用带有条件断点的 VS 调试器。

最**简单**，**最快**的方式imo。

[终极 Visual Studio 提示和技巧博客](http://blogs.msdn.com/b/zainnab/archive/2010/05/03/set-a-simple-breakpoint-condition-vstipdebug0021.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-02T08:54:32.313

您可以在 Visual Studio 中使用条件断点。

右键单击断点并选择条件，然后放入您的子句。

# web-applications - java可以用来创建像dropbox这样的桌面应用程序吗？

> ID：11290487
> 
> 赞同：0
> 
> 时间：2012-07-02T08:51:45.860
> 
> 标签：web-applications, web, desktop-application, sync

我打算创建一个与网络同步文件的桌面应用程序。

**简而言之，它与 DROPBOX 的工作方式完全一样。**

只是想知道Java是否可以做到这一点？如果没有，或者如果有更好的方法，请告诉我......

提前致谢 ！！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:00:43.483

在使用 Java 时，您***几乎***可以用其他编程语言做任何事情，唯一的区别是它需要多长时间，执行速度等。

答案是，是的。您可以制作一个可执行的 .jar 文件，将特定文件夹中的所有文件复制到在线服务器。然后要访问服务器，您可以在具有登录屏幕的不同计算机上安装“保管箱”程序，并将您的程序连接到服务器，然后从服务器中提取所有数据以将其复制到本地文件夹。

然后进行更高级的配置，例如每隔几秒/每次修改文件时同步，当有人在处理特定文件时锁定文件以防止文件损坏。

这是可能的，听起来像是一个有趣的项目，但它可能不适合胆小的人（取决于你有多复杂）。玩得开心。

# javascript - 比较数字 - 异常行为

> ID：11290494
> 
> 赞同：0
> 
> 时间：2012-07-02T08:52:07.650
> 
> 标签：javascript, comparison, numbers

我从一个表中得到 2 个值，我想比较它们。如果一个比另一个更大，那么我会警告一些错误。问题是我得到了错误的结果......例如，我有 1000.00 和 1000000.00，当我做 1000.00 > 1000000.00 时，我得到一个 TRUE！，因此出现错误，为什么会这样？

希望有人可以在这里帮助我！谢谢

```
row = document.getElementById(tabla).rows;
cell = document.getElementById(tabla).rows[0].cells;

for (i=2;i<row.length-1;i++){
    var TotalDist = parseFloat(document.getElementById(tabla).rows[i].cells[cell.length].firstChild.nodeValue).toFixed(2);
    var Total = document.getElementById(tabla).rows[i].cells[cell.length+1].firstChild.nodeValue;

    if(TotalDist>Total)
       alert("Error");
} 
```

其中一个值已经是我从数据库获得的浮点数，另一个（TotalDist）是由用户设置的，所以我将其转换为浮点数以便可以正确比较它们......但它似乎没有工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T08:55:57.600

您需要将两个值都转换为数字（即`parseFloat`在两个字符串上使用）->

```
row = document.getElementById(tabla).rows;
cell = document.getElementById(tabla).rows[0].cells;

for (i=2;i<row.length-1;i++){
    var TotalDist = parseFloat(document.getElementById(tabla).rows[i].cells[cell.length].firstChild.nodeValue).toFixed(2);
    var Total = parseFloat(document.getElementById(tabla).rows[i].cells[cell.length+1].firstChild.nodeValue);

    if(TotalDist>Total)
       alert("Error");

} 
```

使用`nodeValue`a时`string`返回...[请参阅文档](https://developer.mozilla.org/en/DOM/Node.nodeValue)

```
var value = node.nodeValue; 
```

> value 是一个**字符串**，包含当前节点的值

# java - 从 ListActivity 条目启动 Intent - Android

> ID：11290500
> 
> 赞同：0
> 
> 时间：2012-07-02T08:52:33.580
> 
> 标签：java, android, android-layout, android-intent, android-listview

我已经实现了`ListActivity`, 并且想`intent`为列表中每个可能的项目选择启动一个不同的选项。

例如：

![在此处输入图像描述](../Images/524768e9492977387e15d302079181ea.png)

单击关于项目应该启动`intent`一个新活动，然后单击访问电话库项目应该启动一个`intent`打开电话库（例如选择图像）。

我想了解两点：

1.  如何确定单击了哪个项目，以便我可以启动正确的`intent`？
2.  如何使列表中的项目在被选中时更改样式？（比如说突出显示以便用户体验更好）

以下是`MyActivity`（实现`ListActivity`）的代码：

```
public class MyActivity extends ListActivity implements OnItemClickListener 
{

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    { 

        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_activity);

        ListView listView = (ListView) findViewById(android.R.id.list);

        listEntryClass listEntries[] = new listEntryClass[]
        {
            new listEntryClass( "About", "About" ),
            new listEntryClass( "Access Phone Gallery", "Access Gallery and Choose an Image" )
        };

        listEntryArrayAdapter adapter = new listEntryArrayAdapter(this, R.layout.list_entry_layout, listEntries);

        View header = (View)getLayoutInflater().inflate(R.layout.list_header_layout, null);
        TextView headerValue = (TextView) header.findViewById(R.id.list_header);
        headerValue.setText( this.getString(R.string.headerPrefs) );

        listView.addHeaderView(header);
        listView.setAdapter(adapter);

        listView.setOnItemClickListener( this );

    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
    {

        Log.d(TAG, "Clicked an entry");
    }

} 
```

我想在某个地方应该有类似 a`switch-case`的`id`点击项目，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:57:23.557

```
 @Override
 public void onItemClick(AdapterView <? > parent, View view, int position, long id)
 {
     if (postion == 0) {
         startActivity(MyActivity.this, FirstActivity.class);
     } else if (possion == 1) {
         startActivity(MyActivity.this, SecondActivity.class);
     } else {
         startActivity(MyActivity.this, ThirdActivity.class);
     }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T08:58:56.867

**如何确定单击了哪个项目，以便启动正确的意图？**

```
 @Override
    public void onItemClick(AdapterView <? > parent, View view, int position, long id) {

       // Here position denotes which row index you clicked.
      //If you clicked first item in ListView then row index will be zero
     // and so on...

       switch (position) {
       case 0:
           //First Item/row clicked
           break;
       case 1:
           //Second Item/row clicked
           break;
       }
   } 
```

**如何使列表中的项目在被选中时更改样式？（比如说突出显示以便用户体验更好）**

至于设置颜色，你需要一个`StateListDrawable`. 您可以使用`android:listSelector`属性在列表中设置它，在 XML 中定义可绘制对象，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_enabled="false" android:state_focused="true"
        android:drawable="@drawable/item_disabled" />
  <item android:state_pressed="true"
        android:drawable="@drawable/item_pressed" />
  <item android:state_focused="true"
        android:drawable="@drawable/item_focused" />
</selector> 
```

> ListView xml 如下所示。

```
<ListView android:id="@+id/list" 
      android:layout_width="fill_parent"
      android:layout_height="wrap_content" 
      android:dividerHeight="0dip"
      android:divider="@null" 
      android:listSelector="@drawable/list_selector"
      android:layout_gravity="center" /> 
```

# c++ - C++ Builder XE2 - 复选框提示不显示

> ID：11290508
> 
> 赞同：0
> 
> 时间：2012-07-02T08:52:56.533
> 
> 标签：c++, checkbox, tooltip, c++builder-xe2

正如标题所示，即使我设置了复选框的提示属性，当鼠标光标悬停在控件上时，工具提示也不会显示。TButton 控件上的相同 Hint 属性没有问题。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:23:55.877

确保`TCheckBox.ShowHint`or`TCheckBox.ParentShowHint`属性设置为 True。

在后一种情况下，请确保`Parent`'`ShowHint/ParentShowHint`属性为 True，依此类推，直到父层次结构。如果您到达 TForm 并启用了一切，请确保`TApplication.ShowHint`属性为 true，并且没有`OnHint`可能丢弃提示通知的事件处理程序被分派到`TCheckBox`.

# java - JBoss AS 5.x 停产？

> ID：11290517
> 
> 赞同：2
> 
> 时间：2012-07-02T08:53:45.703
> 
> 标签：java, jakarta-ee, jboss, jboss5.x

我无法在 JBoss 网站上找到 JBoss AS 5.x 将终止生命周期的任何官方日期。谁能给我一个提示在哪里看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:26:44.440

终于找到了： [https ://access.redhat.com/support/policy/updates/jboss_notes/](https://access.redhat.com/support/policy/updates/jboss_notes/)

# html - 在 CSS 中，根据其祖先选择元素的技术，您将其称为什么？

> ID：11290518
> 
> 赞同：0
> 
> 时间：2012-07-02T08:53:47.383
> 
> 标签：html, css

我正在开发一个带有示例的项目，该示例可以简化为以下内容。CSS 中使用的技术的名称是什么？

```
<html>
    <head>
        <style type="text/css">
        #numberone #numbertwo #numberthree
        {
            color: red;
        }
        </style>
    </head>
    <body>
        <div id="numberone">
            <div id="numbertwo">
                <div id="numberthree">
                    This is red
                </div>
            </div>
        </div>
        <div id="numberthree">
            This is not red
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:00:01.027

我假设您指的是使用[后代组合](http://www.w3.org/TR/css3-selectors/#descendant-combinators)器来定位具有特定祖先结构的元素。从规范：

> 后代组合器是分隔两个简单选择器序列的空格。“A B”形式的选择器表示元素 B，它是某个祖先元素 A 的任意后代。

我将修改您的 CSS 以使用类选择器而不是 ID 选择器，因为 ID 值在文档中必须是唯一的。此示例将选择具有类名`numberthree`的元素，这些元素是具有类名的元素的`numbertwo`后代，并且是具有类名的元素的后代`numberone`：

```
.numberone .numbertwo .numberthree {
    color: red;
} 
```

而此示例将选择具有类名的所有元素，`numberthree`而不管它们的祖先如何：

```
.numberthree {
    color: red;
} 
```

因此，鉴于您的示例标记（再次修改为使用类），以下内容将适用：

```
<div class="numberone">
    <div class="numbertwo">
        <div class="numberthree">
            This is red for both snippets above
        </div>
    </div>
</div>
<div class="numberthree">
    This is only red for the second snippet above
</div> 
```

# parameter-passing - Google Fusion 地图 - 如何从外部 url 传递参数

> ID：11290521
> 
> 赞同：0
> 
> 时间：2012-07-02T08:54:00.283
> 
> 标签：parameter-passing, google-fusion-tables

我想使用嵌入的谷歌融合地图制作指向页面的外部链接，以打开带有预设选择的页面。如何在 url 中传递参数？

例如，如何使用传递的参数来选择第一个县（安德森县）来链接到此示例页面？ [http://www.texastribune.org/library/data/census-2010/](http://www.texastribune.org/library/data/census-2010/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:14:21.853

这是一个使用该 fusionTable 并使用 URL 中指定的所有参数查询 Anderson County的[示例。](http://www.geocodezip.com/v3_FusionTablesLayer_linktoA.html?lat=31.636563&lng=-96.060020&zoom=7&type=m&tableid=2557947&tablequery=SELECT%20geometry%20from%202557947%20where%20county%20contains%20%27Anderson%20County%27)

# mysql - 优化 SQL-Query 几个 JOIN

> ID：11290525
> 
> 赞同：2
> 
> 时间：2012-07-02T08:54:04.940
> 
> 标签：mysql, sql, query-optimization

我有一个带有嵌套连接的 SQL 查询：

```
SELECT rh.host, rh.report, COUNT(results.id), COUNT(results_2.id), COUNT(results_3.id), COUNT(results_4.id)
FROM report_hosts rh
INNER JOIN report_results rr ON rh.report = rr.report
LEFT OUTER JOIN results ON rr.result = results.id AND results.type =  'Hole' AND results.host = rh.host
LEFT OUTER JOIN results results_2 ON rr.result = results_2.id AND results_2.type =  'Warning' AND results_2.host = rh.host
LEFT OUTER JOIN results results_3 ON rr.result = results_3.id AND results_3.type =  'Note' AND results_3.host = rh.host
LEFT OUTER JOIN results results_4 ON rr.result = results_4.id AND results_4.type =  'Log' AND results_4.host = rh.host
GROUP BY rh.host 
```

原样查询大约需要 5 秒，其中 99.7%*复制到临时表*。一个`EXPLAIN`完整的查询显示为：

```
+----+-------------+-----------+--------+---------------+---------+---------+-------------------+------+---------------------------------+
| id | select_type | table     | type   | possible_keys | key     | key_len | ref               | rows | Extra                           |
+----+-------------+-----------+--------+---------------+---------+---------+-------------------+------+---------------------------------+
|  1 | SIMPLE      | rr        | ALL    | report        | NULL    | NULL    | NULL              | 3139 | Using temporary; Using filesort |
|  1 | SIMPLE      | rh        | ref    | report        | report  | 5       | openvas.rr.report |  167 | Using where                     |
|  1 | SIMPLE      | results   | eq_ref | PRIMARY,type  | PRIMARY | 4       | openvas.rr.result |    1 |                                 |
|  1 | SIMPLE      | results_2 | eq_ref | PRIMARY,type  | PRIMARY | 4       | openvas.rr.result |    1 |                                 |
|  1 | SIMPLE      | results_3 | eq_ref | PRIMARY,type  | PRIMARY | 4       | openvas.rr.result |    1 |                                 |
|  1 | SIMPLE      | results_4 | eq_ref | PRIMARY,type  | PRIMARY | 4       | openvas.rr.result |    1 |                                 |
+----+-------------+-----------+--------+---------------+---------+---------+-------------------+------+---------------------------------+ 
```

当我删除`LEFT JOIN`s 时，查询会在大约 1 秒内执行，每个`LEFT JOIN`会增加大约一秒的执行时间。

**我的问题：** 谁能解释一下，如果有更多的 s，为什么一个连接的*复制到临时表*`LEFT JOIN`任务需要更长的时间？MySQL 是否为每个 JOIN 多次复制临时表？

我怎样才能避免这种情况？我错过了索引吗？

**我打算完成的工作：** 我有一个包含几台主机扫描结果的表。每个结果都按类型分类（“孔”、“警告”、“注释”或“日志”）。我想选择每个主机和相应数量的漏洞、警告、注释和日志。作为“限制”，我有一个事实，即并非每个主机都有每种类型的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:17:14.457

您多次加入单个表，这实际上就像加入多个表一样。您应该能够使用一些 case 语句和 where 子句来处理它。（实际上你可能不需要 where 子句。）

```
SELECT rh.host, rh.report, 
 COUNT(CASE WHEN results.type = 'Hole' THEN 1 ELSE NULL END) as Holes, 
 COUNT(CASE WHEN results.type = 'Warning' THEN 1 ELSE NULL END) as Warnings,
 COUNT(CASE WHEN results.type = 'Note' THEN 1 ELSE NULL END) as Notes, 
 COUNT(CASE WHEN results.type = 'Log' THEN 1 ELSE NULL END) as Logs
FROM 
 report_hosts rh
INNER JOIN 
 report_results rr 
ON 
 rh.report = rr.report
LEFT OUTER JOIN 
 results 
ON 
 rr.result = results.id 
 AND results.host = rh.host
WHERE
 results.type = 'Hole' 
 OR results.type = 'Warning' 
 OR results.type = 'Note' 
 OR results.type = 'Log'
GROUP BY rh.host, rh.report 
```

案例语句（IME）并不是表现最好的，但是来自许多连接的数据膨胀可能会抵消这一点并提供更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:09:29.937

使用大量数据（在您的情况下是额外的`left join`）将意味着将其存储在内存中。

如果您耗尽缓冲区，您的查询将需要存储到驱动器上的临时结果表中。

尝试使用相同数量的`left join`s，但使用 a 限制行数`limit`。它应该确认问题出在缓冲区中（这意味着它将运行得更快）。

# php - 将变量值从 MySQL 传递到数组的列表框

> ID：11290526
> 
> 赞同：-1
> 
> 时间：2012-07-02T08:54:06.483
> 
> 标签：php, mysql, html

```
<form action = "settings.php" method  = "post">
Student ID*:
<input type = "text" name = "std_id" value = "<?php echo $user_data['std_id'];?>"><br>
Firstname*:
<input type = "text" name = "name" value = "<?php echo $user_data['name'];?>"><br>
Surname*:
<input type = "text" name = "surname" value = "<?php echo $user_data['surname'];?>"><br>
Group*:
<select name = "group" id = "group">
    <option value="0"><-- Please Select Item --></option>
    <?php 
    $show=mysql_query("SELECT * FROM room_group_options ORDER BY op_id");
    while ($array = mysql_fetch_array($show))
    {
        $id = $array['id'];
        $group = $array['group'];
        echo "<option value = '$id'> $group </option>";
    }?>
</select><br>
Email*:
<input type = "text" name = "email" value = "<?php echo $user_data['email'];?>"><br>
<input type = "submit" name "update" value = "update">
</form> 
```

上面的代码是从数据库查询的更新表单。所有变量都可以，除了组

```
 if(empty($_POST) === false && empty($error) === true)
    {
        $update_data = array(
            'std_id' => $_POST['std_id'],
            'name' => $_POST['name'],
            'surname' => $_POST['surname'],
            'group' => (int)$_POST['group'],
            'email' => $_POST['email'],
        );

        print_r($_POST);
                    print_r($update_data);

        die();
    } 
```

这用于从提交按钮获取数据。我尝试使用 print_r 来获取每个数组中的所有值。他们都有除了组。我可以解决这个问题吗？

```
 Array ( [std_id] => 52211001 [name] => testname2 [surname] => testsurname1 [group] => [email] => tes21@test.com ) 
    Array ( [std_id] => 52211001 [name] => testname2 [surname] => testsurname1 [group] => 0 [email] => tes21@test.com ) 
```

这是一个输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:05:27.320

为什么要转换为int？和行：

`echo "<option value = '$id'> $group </option>";`

应该：

`echo '<option value = "'.$id.'">'. $group .'</option>';`

# javascript - 单击 div 时如何停止 youtube 视频？

> ID：11290527
> 
> 赞同：1
> 
> 时间：2012-07-02T08:54:17.543
> 
> 标签：javascript, jquery, youtube-api

我有显示 youtube 视频前面的 div。单击视频时如何停止视频？看看我的例子。 [http://jsfiddle.net/uprosoft/6wXvA/81/](http://jsfiddle.net/uprosoft/6wXvA/81/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:00:16.960

看这里

[http://apiblog.youtube.com/2011/01/introducing-javascript-player-api-for.html](http://apiblog.youtube.com/2011/01/introducing-javascript-player-api-for.html)

你有这个功能：

```
 function stopVideo() {
    player.stopVideo();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:09:41.897

您无法控制使用 iFrame，您需要

```
<object id="ytplayer" style="height: 390px; width: 640px">
    <param name="movie" value="http://www.youtube.com/v/NWHfY_lvKIQ?version=3&enablejsapi=1">
    <param name="allowScriptAccess" value="always">
    <embed id="ytplayer" src="http://www.youtube.com/v/NWHfY_lvKIQ?version=3&enablejsapi=1" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" width="640" height="390">
</object>

<div onclick="document.getElementById('ytplayer').stopVideo()">Stop</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:22:11.867

如果主文档和 iframe 的文档不在同一个域中，则您无法从 iframe 访问 DOM。

即：从 chrome 控制台：

> 不安全的 JavaScript 尝试从 URL [http://fiddle.jshell.net/_display/的框架访问具有 URL](http://fiddle.jshell.net/_display/) [http://www.youtube.com/embed/NWHfY_lvKIQ?wmode=opaque](http://www.youtube.com/embed/NWHfY_lvKIQ?wmode=opaque)的框架。域、协议和端口必须匹配。

如果您想控制 youtube 视频，则需要将其嵌入到您的页面中。

在 youtube 视频上，单击“嵌入”，然后选中此框：

> 使用旧的嵌入代码 [?]

你会有好的代码:)

# python - 是否可以在不修改脚本的情况下从脚本本身外部控制 python 日志记录级别？

> ID：11290528
> 
> 赞同：0
> 
> 时间：2012-07-02T08:54:27.243
> 
> 标签：python, logging

主要是关于如何获得与 java 日志记录类似的行为的问题，在其中创建或编辑日志记录配置文件以更改日志记录的行为就足够了。

这在 Python 中是否可行，而无需修改使用日志记录功能的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:56:22.890

只要 python 程序使用logging 模块中的[`.fileConfig`方法，那么可以，您可以通过编辑文件来更改 logging 配置。](http://docs.python.org/library/logging.config.html#logging.config.fileConfig)

通常，较大程序的 main 函数会这样调用它：

```
import logging

DEFAULT_LOG_CONFIG = 'somepath/logging.conf'

def main(args):
    ...
    # parse command line arguments or similar
    log_config = options.logconfig or DEFAULT_LOG_CONFIG
    logging.fileConfig(DEFAULT_LOG_CONFIG) 
```

[有关文件格式](http://docs.python.org/library/logging.config.html#configuration-file-format)的文档非常全面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:24:05.780

Martijn 是正确的（赞成），但如果您使用的是 Python 的 2.7/3.2 或更高版本，那么您可能会考虑使用较新[的基于字典的配置](http://docs.python.org/library/logging.config.html#logging.config.dictConfig)，它比 Martijn 提到的旧的基于 .ini 文件的配置提供更好的日志记录功能。字典模式也有[相当好的文档记录](http://docs.python.org/library/logging.config.html#configuration-dictionary-schema)。[基于字典的配置可通过logutils](http://pypi.python.org/pypi/logutils/)包以额外依赖项的价格用于较旧的 Python 版本。

Logging 的配置功能旨在准确涵盖上述用例：您甚至可以安排长时间运行的程序（例如服务器）[即时](http://docs.python.org/howto/logging-cookbook.html#configuration-server-example)重新配置，而无需重新启动。

# python - 将 C++/CUDA 类传递给 PyCUDA 的 SourceModule

> ID：11290536
> 
> 赞同：7
> 
> 时间：2012-07-02T08:54:52.013
> 
> 标签：python, cuda, boost-python, pycuda

我有一个用 C++ 编写的类，它也使用了 cuda_runtime.h 中的一些定义，这是名为 ADOL-C 的开源项目的一部分，你可以看看[这里](http://gitorious.org/adol-c/adol-c/blobs/cuda/ADOL-C/src/adoublecuda.h)！

这在我使用 CUDA-C 时有效，但我想以某种方式在 PyCUDA 中导入这个类，如果有可能的话。所以，我将在内核内部（不在“main”中）使用这个类来定义用于计算函数导数的特定变量。有没有办法将这个类传递给 PyCUDA 的 SourceModule？

我问了一个类似的问题，但在这里我想解释一下。因此，有一个解决方案使用 nvcc -cubin 编译我的 C 代码（感谢 talonmies），然后使用 driver.module_from_file() 导入它，但是，我想使用 SourceModule 并将这些内核写入 .py 文件中，所以它可以更加用户友好。我的示例如下所示：

```
from pycuda import driver, gpuarray
from pycuda.compiler import SourceModule
import pycuda.autoinit
kernel_code_template="""
__global__ void myfunction(float* inx, float* outy, float* outderiv)
{
    //defining thread index
    ...
    //declare dependent and independet variables as adoubles
    //this is a part of my question
    adtl::adouble y[3];
    adtl::adouble x[3];
    // ... 
}
""" 
```

...这只是一个想法，但 SourceModule 不会知道什么是**“adouble”**，因为它们是在类定义 adoublecuda.h 中定义的，所以我希望你现在能更好地理解我的问题。有谁知道我应该从哪里开始？如果没有，我将在 CUDA-C 中编写这个内核，并使用 nvcc -cubin 选项。

感谢帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T11:22:20.143

PyCUDA SourceModule 系统实际上只是一种将您传递到文件中的代码、将该文件编译`nvcc`为 cubin 文件以及（可选）将该 cubin 文件加载到当前 CUDA 上下文中的一种方式。PyCUDA 编译器模块对 CUDA 内核语法或代码一无所知，并且（几乎）对编译的代码没有影响[几乎限定词是因为它可以用`extern "C" { }`声明将用户提交的代码括起来以停止 C++ 符号修改]。

因此，要执行我认为您要问的问题，您应该只需要`#include`声明您的设备代码在提交的字符串中需要的任何标头，以及通过`include_dirs`关键字选项传递的 python 列表中的一组合适的搜索路径。如果你做这样的事情：

```
from pycuda import driver, gpuarray 
from pycuda.compiler import SourceModule 
import pycuda.autoinit 
kernel_code_template="""

#include "adoublecuda.h" 
__global__ void myfunction(float* inx, float* outy, float* outderiv) 
{ 
    //defining thread index 
    ... 
    //declare dependent and independet variables as adoubles 
    //this is a part of my question 
    adtl::adouble y[3]; 
    adtl::adouble x[3]; 
    // ...  
}

""" 

module = SourceModule(kernel_code_template, include_dirs=['path/to/adoublecuda']) 
```

and it should automagically work (note untested, use at own risk).

# ssh - Jenkins Text-finder 无法成功构建

> ID：11290540
> 
> 赞同：3
> 
> 时间：2012-07-02T08:55:04.987
> 
> 标签：ssh, jenkins

我是在 Linux 服务器上运行命令的 usnig SSH 插件，我使用 SSH 启动了一个脚本，该脚本需要超过 1 小时的时间才能运行，我不想等待那么多时间，所以我在 Exec 超时时设置了 30 秒的时间。但它显示错误 ERROR: Exception when publishing，异常消息 [Exec timed out or was interrupted after 30,000 ms] 并且不稳定。我不想让我的构建变得不稳定，因为我使用 Jenkins 文本查找器来稳定这个构建。在那个詹金斯文本查找器中，我在正则表达式中搜索了字符串“发布时异常”。但是我的构建仍然不稳定。请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T10:28:16.377

您已经为[Publish over SSH Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+SSH+Plugin)设置了超时，这与您的构建步骤无关（这是 - 或应该是 - *Execute shell Script on remote host using SSH*）。您可能有一个*通过 SSH 构建后步骤发送构建工件*，然后由于超时而失败。

这里的混淆是*Publish over SSH Plugin*和*SSH Plugin*的选项设置在同一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T10:49:50.187

由于您正在从非 TTY 环境执行脚本；詹金斯无法从您的脚本中正确退出。

您想要的是在脚本执行后立即退出！不想等待整个超时发生然后不正确地断开连接！

解决方案：让它在 PTY 中执行。（请勾选所附截图所示的复选框）

![截屏](../Images/bcb53eb01ec5fab1070303a5943918f7.png)

我有同样的问题，它现在对我来说非常完美。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-08T02:20:25.427

这就是我让它工作的方式：

![截屏](../Images/b2a80e46ed2e444587ea277094e70faf.png)

# linux - Hadoop：JobTracker 吃... 300% CPU？

> ID：11290546
> 
> 赞同：1
> 
> 时间：2012-07-02T08:55:28.043
> 
> 标签：linux, hadoop

最近，Ganglia 几乎以红色显示了 Hadoop 服务器。

![在此处输入图像描述](../Images/a8e56ac225ee83f69820c77eebaa4cb2.png)

通过`atop`, `htop`, ... 我看到`jobtracker`and`namenode`进程正在消耗 ~300% CPU：

```
30858  adtech    adtech      42   15.54s    13.17s      0K      0K      0K      0K   --    -  S      6  332%   java
31066  adtech    adtech      24    6.18s     8.86s      0K      0K      0K      0K   --    -  S      7  174%   java
31164  adtech    adtech      44    5.66s     8.38s      0K      0K      0K      4K   --    -  S      5  162%   java 
```

以下是相关的配置文件：

**核心站点.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
   <property>
       <name>fs.default.name</name>
       <value>hdfs://hmaster90:9000</value>
       <description>
       The name of the default file system. Either the literal string
       "local" or a host:port for NDFS.
       </description>
   </property>
</configuration> 
```

**hdfs-site.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>

   <property>
     <name>dfs.replication</name>
     <value>2</value>
   </property>

   <property>
     <name>dfs.name.dir</name>
     <value>/data/hdfs11/dfs/name</value>
   </property>

   <property>
     <name>dfs.data.dir</name>
     <value>/data/hdfs11/dfs/data</value>
   </property>

   <property>
     <name>hadoop.tmp.dir</name>
     <value>/data/hdfs11/dfs/tmp</value>
   </property>

</configuration> 
```

**mapred-site.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>

    <property>
      <name>mapred.job.tracker</name>
      <value>hmaster90:9001</value>
    </property>

    <property>
      <name>mapred.system.dir</name>
      <value>/data/hdfs11/mapreduce/system</value>
    </property>

    <property>
      <name>mapred.local.dir</name>
      <value>/data/hdfs11/mapreduce/local</value>
    </property>

    <property>
      <name>mapred.temp.dir</name>
      <value>/data/hdfs11/mapreduce/temp</value>
    </property>

    <property>
      <name>mapred.tasktracker.map.tasks.maximum</name>
      <value>7</value>
      <description>
            The maximum number of map tasks that will be run simultaneously by a task tracker.
      </description>
    </property>

    <property>
      <name>mapred.tasktracker.reduce.tasks.maximum</name>
      <value>7</value>
      <description>
            The maximum number of reduce tasks that will be run simultaneously by a task tracker.
      </description>
    </property>

    <property>
      <name>mapred.map.tasks</name>
      <value>56</value>
      <description>
        This should be a prime number larger than multiple number of slave hosts,
        e.g. for 3 nodes set this to 17
      </description>
    </property>

    <property>
      <name>mapred.reduce.tasks</name>
      <value>21</value>
      <description>
        This should be a prime number close to a low multiple of slave hosts,
        e.g. for 3 nodes set this to 7
      </description>
    </property>

</configuration> 
```

**jobtracker.log**：[https ://gist.github.com/3032037](https://gist.github.com/3032037)

我应该先看哪里？

* * *

**回复@J-16SDiZ：**

```
# su - adtech
$ jstack -J-d64 -m 3135
Attaching to process ID 3135, please wait...
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at sun.tools.jstack.JStack.runJStackTool(JStack.java:136)
    at sun.tools.jstack.JStack.main(JStack.java:102)
Caused by: sun.jvm.hotspot.runtime.VMVersionMismatchException: Supported versions are 14.0-b16\. Target VM is 20.5-b03
    at sun.jvm.hotspot.runtime.VM.checkVMVersion(VM.java:223)
    at sun.jvm.hotspot.runtime.VM.<init>(VM.java:286)
    at sun.jvm.hotspot.runtime.VM.initialize(VM.java:344)
    at sun.jvm.hotspot.bugspot.BugSpotAgent.setupVM(BugSpotAgent.java:594)
    at sun.jvm.hotspot.bugspot.BugSpotAgent.go(BugSpotAgent.java:494)
    at sun.jvm.hotspot.bugspot.BugSpotAgent.attach(BugSpotAgent.java:332)
    at sun.jvm.hotspot.tools.Tool.start(Tool.java:163)
    at sun.jvm.hotspot.tools.JStack.main(JStack.java:86) 
```

# file - SkyDrive 文件元数据

> ID：11290549
> 
> 赞同：2
> 
> 时间：2012-07-02T08:55:48.990
> 
> 标签：file, api, metadata, windows-8, onedrive

skydrive api 中的每个文件都有哪些类型的元数据？

如果可以在下载文件之前远程获取文件校验和和最后写入时间，那就太好了。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:11:24.023

您无法获取文件校验和，但您可以在下载文件之前获取最后修改时间。更多详情请参考 SkyDrive API：http: [//msdn.microsoft.com/en-us/library/live/hh826531.aspx#reading_files_props](http://msdn.microsoft.com/en-us/library/live/hh826531.aspx#reading_files_props)

# android - pubnub.subscribe 没有响应

> ID：11290550
> 
> 赞同：3
> 
> 时间：2012-07-02T08:55:51.017
> 
> 标签：android, pubnub

我在我的应用程序中使用[PubNub SDK for Android](https://github.com/pubnub/pubnub-api/tree/master/android)。我尝试订阅一个频道，但没有任何反应。

这是我连接到 pubnub 的代码：

```
public class MyPubnub {
    private static Pubnub pubnub = null;
    private static final String publishKey = "MY PUBLISH KEY";
    private static final String subscribeKey = "MY SUBSCRIBER KEY";
    private static final String secretKey = "MY SECRET KEY";

    private MyPubnub() {
    }

    public static Pubnub getPubnubObject() {
        if (pubnub == null) {
            pubnub = new Pubnub(publishKey, subscribeKey, secretKey, null,
                    false);
        }
        return pubnub;
    }
} 
```

* * *

**订阅pubnub的代码：**

```
public void onCreate(Bundle b) {
    super.onCreate(b);
    initUI();
    Pubnub pn = MyPubnub.getPubnubObject();
    String channel = getChannelName();
    Reciver reciver = new Reciver();

    pn.subscribe(channel, reciver);
}
class Reciver implements Callback {

    @Override
    public boolean execute(Object message) {
        Log.d("PUBNUB", "message received [" + message.toString() + "]");
        return true;
    }
} 
```

* * *

在调试过程中，我注意到一旦我尝试运行这一行，应用程序就会冻结：（`pn.subscribe(channel, reciver);`没有任何反应，没有任何反应）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T03:56:23.357

# PubNub 安卓 SDK

您正在询问使用 PubNub 订阅功能在 Android 移动电话设备上接收远程消息的 PubNub Android API。关于您使用的单例模式，这看起来不错！:-)

> **PubNub Android SDK 文档：** [http ://www.pubnub.com/docs/java/android/android-sdk.html](http://www.pubnub.com/docs/java/android/android-sdk.html)

但是，听起来您在订阅呼叫中被阻止了。您是否使用最新的 PubNub Android API - [https://github.com/pubnub/java/tree/master/android](https://github.com/pubnub/java/tree/master/android) - 最新的 API 应该允许您自动调用订阅 API 而不会阻止您的应用程序。但是，如果是这种情况，并且 subscribe() 方法确实阻塞了您的应用程序，您可以通过将此函数调用放在 Java 线程中并在新消息到达时向您的父主程序发送消息帖子来解决此问题。

所以最终的解决方案是将 PubNub 方法调用放在一个新线程中，在接收到来自回调的更新时向父级发送更新：

> [https://github.com/pubnub/java/tree/master/android](https://github.com/pubnub/java/tree/master/android)

```
Thread t = new Thread() {
    public void run() {
        HashMap<String, Object> args = new HashMap<String, Object>(6);
        args.put("channel", _channel);

        // callback to get response
        args.put( "callback", new ReceivedMessage() );

        // Listen for Messages (Subscribe)
        _pubnub.subscribe(args);
    };
};
t.start();
threads.put(_channel, t); 
```

然后你实现你的 ReceiveMessage() 类：[https](https://github.com/pubnub/java/tree/master/android) ://github.com/pubnub/java/tree/master/android - 查看源代码。

请注意，这不是完整的复制/粘贴答案，但它会让您指向正确的方向。此外，这种线程样式将向后兼容未来的升级。

所以最后，使用 Threads() 是你的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:55:13.717

不要在 cypherkey 上传递 null，只需传递“”。我得到一个空异常并且没有触发消息到达事件。

替换这个：pubnub = new Pubnub(publishKey, subscribeKey, secretKey, null, false);

通过这个： pubnub = new Pubnub(publishKey, subscribeKey, secretKey, "", false);

# node.js - node.js UDP 数据在高包率下丢失

> ID：11290553
> 
> 赞同：0
> 
> 时间：2012-07-02T08:55:59.183
> 
> 标签：node.js, udp

我在与 node.js 0.6.18> 和 0.8.0 的 UDP 连接上观察到大量数据丢失。它以每秒约 1200 个数据包的高数据包速率出现，帧数限制为约 1500 字节。每个数据包都有一个递增的数字，因此很容易跟踪丢失的包的数量。

```
var server = dgram.createSocket("udp4");

server.on("message", function (message, rinfo) {

        //~processData(message);        
        //~ writeData(message, null, 5000);

}).bind(10001); 
```

在接收回调中，我测试了两个案例，我首先将 5000 个包保存在一个文件中。结果没有丢包。在我包含了一个数据处理例程并获得了大约 50% 的丢弃率之后。我所期望的是流程数据例程应该是完全异步的，并且不应该给系统引入死时间，因为它是一个简单的解析器来处理包中的二进制数据并将事件发送到进一步的处理例程。

似乎解析例程引入了死区时间，其中事件处理程序无法处理每个数据包。

在低包裹率（< 1200 包裹/秒）下，没有观察到数据丢失！这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:13:37.427

Node.js 作为单线程系统运行。在您进行处理时，您的进程无法接收数据，并且网络数据将排队等待操作系统缓冲区已满，然后数据包将被丢弃。有很多方法可以处理这个问题，但通常您将拥有一组接收（和排队）数据的进程，而另一组进程将在不延迟接收进程的情况下进行处理。可能有很多模块可以帮助您构建这个，但我会把它留给专家...... ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T05:49:03.990

I've bumped into a similar issue with [statsd](https://github.com/etsy/statsd) which also uses node.js udp. If you're running on linux, changing the receive buffers seems to improve things considerably to avoid drops.

Specifically, you can run something like

`sudo sysctl -w net.core.rmem_default=20971520`

see [this statsd github issue](https://github.com/etsy/statsd/issues/318#issuecomment-21841474) for more info.

# vb.net - 针对大量数据优化 For 循环

> ID：11290556
> 
> 赞同：0
> 
> 时间：2012-07-02T08:56:09.557
> 
> 标签：vb.net, optimization, loops

```
For indY as Integer = 1 To xLsheet.UsedRange.Rows.Count Then
If aRndLAcctNo.Contains(xLsheet.Cells(indy + 1, 2).Value.ToString()) Then
aRndLTotProd.Add(Indy)
End If
Next 
```

当我将它设置为“到 1000”时，它运行良好。但是当我使用 'To xLsheet.UsedRange.Rows.Count' 时，它会引发错误。我的 excel 文件包含 16000 行。请帮助如何优化 For 循环。或者，如果您可能会建议另一种方法，我可以获取 excel 文件的行，其中包含已经在 arndLacctNo 字符串列表中的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:56:23.563

您在这里遇到的主要问题是您没有研究错误消息的文本，其次也没有在您的问题中包含错误消息。

假设你收到这样的东西：

```
prog.vb (5,63) : Error VBNC30205: Expected end of statement. 
```

这告诉您，“在 file`prog.vb`的第 5 行第 63 列中，您有一个错字；而不是语句的结尾，您还有其他内容”。

在我的例子中，第 5 行第 63 列是`Then`没有相应的`If`潜伏的地方。查看您自己的错误消息，找到您自己的代码位置，然后删除那里有问题的关键字。这是一个简单的语法错误，与行数无关。

# java - 实现多个通用接口

> ID：11290558
> 
> 赞同：5
> 
> 时间：2012-07-02T08:56:12.173
> 
> 标签：java, generics

我需要处理两种不同类型的事件，但我遇到了以下问题：

接口 EventListener 不能使用不同的参数多次实现：`EventListener<PriceUpdate>`和`EventListener<OrderEvent>`。

有没有一个优雅的解决方案？

```
public interface EventListener <E> {
    public void handle(E event);
}
public interface PriceUpdateEventListener extends EventListener<PriceUpdate> {
}
public interface OrderEventListener extends EventListener<OrderEvent> {
}

public class CompositeListener implements OrderEventListener,PriceUpdateEventListener {
....
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T09:01:12.917

现实中只有一种 handle(Object) 方法。你实际上写的是一样的

```
public class CompositeListener implements EventListener {
    public void handle(Object event) {
        if (event instanceof PriceUpdate) {
            ///
        } else if (event instanceof OrderEvent) {
            ///
        }
    }
} 
```

如果没有这个检查逻辑，你无论如何都不能有效地调用你的事件监听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T10:18:32.810

我正在尝试在我的项目中做同样的事情，但似乎没有任何优雅的方式可以做到这一点。问题是通用接口方法的所有不同版本都具有相同的名称，并且可以将相同的参数应用于它们。至少如果您正在使用子类，并且不能保证您不会，它不会编译。至少这是我认为正在发生的事情。

```
class Fraction extends Number{
...
}
GenericInteface <T> {
void method(T a);
}

NumberInterface extends GenericInteface <Number>{
}
FractionInterface extends GenericInteface <Fraction>{
}
ClassWithBoth implements NumberInterface, FractionInterface{
void method(Number a){
}
void method(Fraction a){
}} 
```

在这个例子中，如果调用 ClassWithBoth 的方法命名方法，参数是分数，它必须从方法 2 中选择，两者都可以作为分数也是数字。做这样的事情是愚蠢的，但不能保证人们不会这样做，而且如果他们这样做 java 将不知道该怎么做。

我想出的“解决方案”是像这样重命名函数。

```
class Fraction extends Number{
...
}
GenericInteface <T> {
void method(T a);
}
NumberInterface {
void numberMethod(Number a);
}
FractionInterface {
void fractionMethod(Fraction a);
}
ClassWithBoth implements NumberInterface, FractionInterface{
void numberMethod(Number a){
}
void fractionMethod(Fraction a){
}} 
```

可悲的是，这有点消除了首先拥有 GenericInterface 的漏洞，因为你不能真正使用它。

# c# - 序列化 XML 相同的标签两次

> ID：11290564
> 
> 赞同：13
> 
> 时间：2012-07-02T08:56:38.803
> 
> 标签：c#, .net, xml, exception-handling, xml-serialization

我有问题：

我必须将类序列化为 XML 文件。但是必须使用相同的名称命名两个属性：

所需的xml：

```
<?xml version="1.0"?>
<Test>
  <HeaderText>
    <Tag1>AAA</Tag1>
  </HeaderText>
  <HeaderText>
    <Tag2>BBB</Tag2>
  </HeaderText>
</Test> 
```

我不需要将它反序列化回对象。

代码：

```
public class Header1
{
    [XmlElement("Tag1")]
    public String Tag1 { get; set; }
}

public class Header2
{
    [XmlElement("Tag2")]
    public String Tag2 { get; set; }
}

public class Test
{
    [XmlElement("HeaderText")]
    public Header1 Header1 { get; set; }

    [XmlElement("HeaderText")]
    public Header2 Header2 { get; set; }
}

var doc = new Test
{
    Header1 = new Header1 { Tag1 = "AAA" },
    Header2 = new Header2 { Tag2 = "BBB" }
};

var xml = new XmlSerializer(typeof(Test));
using (var fs = new FileStream("test.xml", FileMode.Create))
{
    xml.Serialize(fs, doc);
} 
```

此代码不起作用。

> 命名空间 '' 中的 XML 元素 'HeaderText' 已存在于当前范围内。使用 XML 属性为元素指定另一个 XML 名称或命名空间。

我能做些什么？

**真实世界的例子：**

```
 <Product>
    <RecordReference>1-15991</RecordReference>
    <MainSubject>
      <MainSubjectSchemeIdentifier>66</MainSubjectSchemeIdentifier>
      <SubjectCode>2</SubjectCode>
    </MainSubject>
    <MainSubject>
      <MainSubjectSchemeIdentifier>20</MainSubjectSchemeIdentifier>
      <SubjectHeadingText>Venäläisiä kirjoja: uskonto, teosofia, mystiikka</SubjectHeadingText>
    </MainSubject>
</Product> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T09:06:47.157

使用数组：

```
public class Test
{
    [XmlElement("HeaderText")]
    public string[] HeaderText { get; set; }
} 
```

接着：

```
var doc = new Test
{
    HeaderText = new[] { "AAA", "BBB" }
};
var xml = new XmlSerializer(typeof(Test));
using (var fs = new FileStream("test.xml", FileMode.Create))
{
    xml.Serialize(fs, doc);
} 
```

也适用于`List<string>`.

* * *

更新：

使用复杂对象定义模型：

```
public class Header
{
    public string Tag { get; set; }
} 
```

然后你就有了这个模型的集合：

```
public class Test
{
    [XmlElement("HeaderText")]
    public Header[] HeaderText { get; set; }
} 
```

然后你序列化：

```
var doc = new Test
{
    HeaderText = new[] 
    { 
        new Header { Tag = "AAA" }, 
        new Header { Tag = "BBB" }
    }
};
var xml = new XmlSerializer(typeof(Test));
using (var fs = new FileStream("test.xml", FileMode.Create))
{
    xml.Serialize(fs, doc);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-02T09:13:01.703

您可以告诉序列化程序忽略您当前的属性，并添加一个新属性以进行序列化：

```
public class Test
{
    [XmlIgnore]
    public String Header1 { get; set; }

    [XmlIgnore]
    public String Header2 { get; set; }

    [XmlElement("HeaderText")]
    public String[] HeaderText
    {
        get{  return new[]{Header1,Header2};   }
        set{  if(value.Length == 2) { Header1 = value[0]; Header2 = value[1];} }
    }
} 
```

现场示例：[http ://rextester.com/YVEF64085](http://rextester.com/YVEF64085)

# c++ - 加载相对于二进制文件的图像

> ID：11290565
> 
> 赞同：3
> 
> 时间：2012-07-02T08:56:52.597
> 
> 标签：c++, sdl

我正在尝试将一些图像加载到一个非常基本的基于 C++/SDL 的程序中。图像是使用加载的`SDL_LoadBMP`。我有图像加载，一切似乎都很完美。我的问题是图像是相对于我调用程序的位置加载的。

所以我有一个类似这样的目录结构。

```
project/
    src/
        source.cpp
    assets/
        image.bmp
    bin/
        program 
```

当我从项目目录 ( `./bin/program`) 执行程序时，它必须使用路径`assets/image.bmp`来加载图像。有什么方法可以使用相对路径，`../assets/image.bmp`以便可以从任何地方执行程序？

我想我需要一些东西来提供程序的绝对路径，然后我可以将路径附加到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:17:30.417

在 Linux 上，`/proc/self/exe`是指向当前进程的可执行文件的符号链接。所以你可以用`readlink`它来找到它的路径。从那里您可以使用通常的路径操作来查找您的资源。也许您应该满足程序可执行文件再次成为二进制文件所在位置的符号链接的情况，即只要当前路径是符号链接，就进行更多的重新链接。

曾经有一个关于[查找当前可执行文件路径的问题，没有`/proc/self/exe`](https://stackoverflow.com/questions/1023306/finding-current-executables-path-without-proc-self-exe)它也询问了可移植接口，但在接受的答案中没有给出满足所有需求的单一解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:03:57.743

在 Windows 中：

1.  `GetModuleFileName(NULL, ...`为您提供二进制文件的完整路径
2.  `PathRemoveFileSpec(...`只留下你的目录
3.  `PathCombine(..., _T("..\\..\\image.bmp"))`上面第 2 项的结果为您提供了完全合格的图像路径

# asp.net - ASP.NET 后台线程性能指南

> ID：11290566
> 
> 赞同：1
> 
> 时间：2012-07-02T08:56:58.367
> 
> 标签：asp.net, memory, background-thread

我在我的 asp.net Web 服务应用程序中运行一个后台线程。该线程的职责是在特定时间后访问数据库并更新缓存中的数据表。数据表有大约 500K 行。在任务管理器中，当我查看进程时，Web 开发服务器第一次消耗大约 300,000K，下一次达到 500,000K，有时达到 1,000,000K 以上，有时又回落到 500,000-600,000K。当我在本地机器上工作时，数据库中的数据不会改变。谁能指导我在代码中做错了什么：

```
protected void Application_Start(object sender, EventArgs e)
    {
        Thread obj = new Thread(new ThreadStart(AddDataInCache));
        obj.IsBackground = true;
        obj.Start();
    }

private void AddDataInCache()
    {
        Int32 iCount = 0;
        while (true)
        {
            MyCollection _myCollection = new MyCollection();
            DataTable dtReferences = null;
            DataTable dtMainData = null;
            try
            {
                dtMainData = _myCollection.GetAllDataForCaching(ref dtReferences);

                HttpRuntime.Cache.Insert("DATA_ALL_CACHING", dtMainData, null,
                    Cache.NoAbsoluteExpiration, Cache.NoSlidingExpiration,
                    CacheItemPriority.Default, null);

                HttpRuntime.Cache.Insert("DATA_REFERENCES_CACHING", dtReferences, null,
                    Cache.NoAbsoluteExpiration, Cache.NoSlidingExpiration,
                    CacheItemPriority.NotRemovable, null
                    );
            }
            catch (Exception ex)
            {

            }
            finally
            {
                if (_myCollection != null)
                    _myCollection = null;

            }
            iCount++;
            Thread.Sleep(18000);
        }
    } 
```

在`GetAllDataForCaching`我`SqlDataReader`从我的数据访问层得到一个：

```
public DataTable GetAllDataForCaching(ref DataTable dReferenceTable)
{
      DataTable dtReturn = new DataTable();
      SqlDataReader dReader = null;
      try
      {
            dReader = SqlHelper.ExecuteReader(CommandType.StoredProcedure, "[GetDataForCaching]", null);
            if (dReader != null && dReader.HasRows)
            {
                  dtReturn.Load(dReader);
                  dReferenceTable = new DataTable();
                  if (dReader.HasRows)
                {
                    DataTable dtSchema = dReader.GetSchemaTable();
                    List<DataColumn> listCols = new List<DataColumn>();

                    if (dtSchema != null)
                    {
                        foreach (DataRow drow in dtSchema.Rows)
                        {
                            string columnName = System.Convert.ToString(drow["ColumnName"]);
                            DataColumn column = new DataColumn(columnName, (Type)(drow["DataType"]));
                            column.Unique = (bool)drow["IsUnique"];
                            column.AllowDBNull = (bool)drow["AllowDBNull"];
                            column.AutoIncrement = (bool)drow["IsAutoIncrement"];
                            listCols.Add(column);
                            dReferenceTable.Columns.Add(column);
                        }
                    }

                    while (dReader.Read())
                    {
                        DataRow dataRow = dReferenceTable.NewRow();
                        for (int i = 0; i < listCols.Count; i++)
                        {
                            dataRow[((DataColumn)listCols[i])] = dReader[i];
                        }
                        dReferenceTable.Rows.Add(dataRow);
                    }
                }
            }
      }
      finally
        {
            if (dReader != null)
            {
                if (dReader.IsClosed == false)
                    dReader.Close();
                dReader = null;
            }
        }
    return dtReturn;
} 
```

我正在使用 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:18:53.090

I'll start by addressing the follow up question:

> ... is that sometimes Cache returns null ...

This can be because presumably it takes some time for the background thread to fill the cache. When `Application_Start` fires, you start up the background thread and then the `Application_Start` finishes. The application can then move on to other tasks, for instance processing a page.

If during the processing of the page, an attempt is made to access the cache before the initial run of `AddDataInCache` has finished, then the cache will return null.

Regarding memory consumption, I don't immediately see how you could improve the situation unless you are able to reduce the amount of row in the cached DataTables.

In the first call to `AddDataInCache`, the cache is empty to begin with. Then your GetAllDataForCaching creates two DataTables and fill them with data. This causes the process to aquire memory to store the data in the DataTables.

On the second and subsequent calls to `AddDataInCache`, the cache already holds all the data that was fetched on the previous run. And then again you create two new datatables and fill them with data. This causes the memory consuption to go up again in order to hold both the preexisting data in cache and the new data in the DataTables created in the second run. Then once the second run has completed loading the data you overwite the preexisting data in the cache with the new data fetched in the second run.

At his point the data that was in the cache from the first run becomes eligible for [garbage collection](http://msdn.microsoft.com/en-us/library/0xy59wtx.aspx). But that doesn't mean that the memory will be immediately reclaimed. The memory will be reclaimed when the garbage collector comes around and notices that the DataTables are no longer needed in memory.

Note that the cached items from the first run will only become eligible for garbage collection if no "live" objects are holding a reference to them. Make sure that you keep your cache usage short lived.

And while all of this is going on, your background thread will happily go about its business refreshing the cache. It's therefore possible that a third cache refresh occurs before the garbage collector releases the memory for the DataTables fetched in the first run, causing the memory consumption to increase further.

So in order to decrease the memory consumption, I think you will simply have to reduce the amount of data that you store in the cache (fewer rows, fewer columns). Increasing the time between cache refreshes might also be helpful.

And finally, make sure you are not keeping old versions of the cached objects alive by referencing them in long lived requests/application processes.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T11:24:32.760

You will be a lot more efficient with a timer than having the thread sleep like that. Timers are more memory and CPU - efficient.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T14:23:25.767

I agree with Peter and I will recommend you to use `System.Threading.Timer`, you can find this following link useful:

[http://blogs.msdn.com/b/tmarq/archive/2007/07/21/an-ounce-of-prevention-using-system-threading-timer-in-an-asp-net-application.aspx](http://blogs.msdn.com/b/tmarq/archive/2007/07/21/an-ounce-of-prevention-using-system-threading-timer-in-an-asp-net-application.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T07:24:07.927

I have done it by putting following code before `Thread.Sleep(18000);`

```
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

It is keeping the memory in control so far.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T07:47:38.280

Firstly, you should use `using` (see [IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)) when working with database connection, command, reader etc.

Secondly web cache can be cleared because of [pool recycling](https://stackoverflow.com/questions/3280297/what-happens-to-cache-when-application-pool-recycles) or IIS reset. That's why you cannot rely on having your items in cache "for ever". This is a safe way to get the data:

```
private DataTable GetDataWithReferences(out DataTable dtReferences)
{
    dtReferences = HttpRuntime.Cache["DATA_REFERENCES_CACHING"];
    DataTable dtMainData = HttpRuntime.Cache["DATA_ALL_CACHING"];
    if ( null == dtMainData )
    {
        dtMainData = _myCollection.GetAllDataForCaching(/*ref - why?*/out dtReferences);
        // cache insert
    }

    return dtMainData;
} 
```

# c# - 循环的 Lambda 表达式转换以显示列表

> ID：11290577
> 
> 赞同：2
> 
> 时间：2012-07-02T08:57:32.593
> 
> 标签：c#, list, lambda, functional-programming

我正在尝试学习 lambda 表达式的使用，因此即使在阅读了文档和其他各种相关文章之后仍然难以实现。因此，如果我想将以下循环转换为 lambda 表达式，那么我将如何去做，我只需要一种方法来了解 lambda 表达式是如何工作的。
代码：

```
var pc = Enumerable.Range(2, 100).ToList();
var j = 0;
while (j < pc.Count)
{
    Console.WriteLine(pc[j]);
    j++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:03:42.017

```
Enumerable.Range(2, 100).ToList().ForEach(p => Console.WriteLine(p)); 
```

一步一步的解释

1.  Enumerable.Range`IEnumarable<int>`从 2 开始，长度为 100。即。项目将是 2,3,4.....101。

2.  `.ToList()`将其转换`IEnumerable`为`List`. 为什么要转换？这样我们就可以`ForEach`使用`List`.

3.  对你来说最重要`ForEach()`。顾名思义，它对列表中的每个项目执行操作。在这里，列表的每个元素都被取出并放入运行时变量 p 中，该变量“转到”`=> Console.WriteLine(p)`以在控制台上写入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T09:29:48.207

我知道这不是你问题的答案，但这是一个例子，我总是重新考虑 LINQ 是否真的是解决问题的最佳解决方案。我知道您只需要一个学习示例，但请记住，对于一个拿着锤子的人来说，一切看起来都像钉子......

```
foreach (var item in Enumerable.Range(2, 100))
{
  Console.WriteLine(item);
} 
```

这对我来说更容易理解，并且不会创建不必要的列表。

（希望我不会收到太多愤怒的评论......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T09:02:45.623

尝试

```
Enumerable.Range(2, 100).ToList().ForEach(n => Console.WriteLine(n)) 
```

但请注意，由于创建了额外的对象，通常 lambdas 很慢。不要在性能关键的应用程序中使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T09:02:16.260

```
pc.ForEach(f => Console.WriteLine(f)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T09:02:55.480

您不需要创建`Enumerable.Range`.

```
var result = string.Join(Environment.NewLine, Enumerable.Range(2, total));
Console.Write(result); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T09:03:13.467

```
pc.ForEach(j => Console.WriteLine(j)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-02T09:03:51.620

你可以这样做：

```
Enumerable.Range(2, 100).ToList().ForEach(x => Console.WriteLine(x)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-02T09:04:18.977

```
 Enumerable.Range(2, 100).ToList().ForEach(n => Console.WriteLine(n)); 
```

# sql - 如何获取在列中具有特定值的表名列表？

> ID：11290579
> 
> 赞同：0
> 
> 时间：2012-07-02T08:57:53.783
> 
> 标签：sql, sql-server-2008, powershell, sql-server-2008-r2

我们的应用程序中有这样的要求。开发一个 powershell 脚本来更新 web.config 文件和数据库表中的计算机名。

如果应用程序已安装但用户必须更改计算机名称，则将执行此脚本。[所以即使机器名称改变，如果他执行脚本，我们安装的应用程序也不会中断。无需卸载和重新安装产品]

现在很多表都包含其中包含计算机名的字段。例如。URL、BaseURL 等列包含计算机名，然后是剩余的文本。

我必须找到具有列值计算机名的表名`(like column names URL and baseURL contains machine name.For example. AB2S481V0:80/Project/Default.aspx AB2S481V0 is the computername ).`

通过手动查看每个表来查找列表是繁重的，因为那里有很多表。如果我传递数据库名和列子字符串（不是整个列名），有什么方法可以找到表名列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:00:33.103

```
Select a.name as  [Table Name],b.name as [Column Name]
from sys.tables a
Join sys.columns b on a.object_id = b.object_id
where b.name like '%ColumnName%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:07:54.270

我经常使用以下查询按列名搜索表：

```
USE MYDB
SELECT t.name, c.name
FROM sys.tables t
JOIN sys.columns c ON c.object_id = t.object_id
WHERE c.name LIKE '%[my_serach_pattern]%' 
```

object_id 指的是sys.tables 中的表id（即sys.objects 表中的object_id）。

查看[MSDN](http://msdn.microsoft.com/it-it/library/ms189783.aspx)以获取更多信息。

# php - 警告： session_start() 但没有空格，它在第一行

> ID：11290590
> 
> 赞同：0
> 
> 时间：2012-07-02T08:59:07.410
> 
> 标签：php, session, warnings

昨天我在我的页面上看到一个语法错误，然后我通过 FTP 连接到 Web 服务器并编辑了 index.php 文件（我看到了错误），我更正了页面中间的一个单词，然后我保存了它。我刷新了页面，在页面顶部看到以下警告消息：

`Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at ../index.php:1) in /home/../public_html/../index.php on line 2`

好的，我知道这意味着什么，标头已经发送。我没有空格，没有包含，在`session_start()`. 我把`ob_start()`函数放在前面`session_start()`，但我得到了同样的警告信息。

具有讽刺意味的是，我没有编辑或修改`session_start()`函数，我没有放任何东西。我只更正了页面中间的一个字符，我收到了这个警告信息。

我不知道我该怎么办。谁能帮我？请建议！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:01:24.450

可能存在导致发送输出的[字节顺序标记。](https://en.wikipedia.org/wiki/Byte_order_mark)PHP 不知道 BOM，只是将其视为输出，然后发送到浏览器。

将文件另存为不带 BOM 的 utf-8 以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:02:05.183

FTP 客户端 PC 是 Windows PC，PHP 文件是否保存为 UTF-8？编辑器可能预先添加了 PHP[无法理解](https://bugs.php.net/bug.php?id=22108)的 BOM 。您可以使用十六进制编辑器删除它并删除前三个字节，或者将文件再次保存在不预先添加 BOM 的编辑器中，例如 Notepad++。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T09:02:20.370

显然，`index.php`在调用`session_start`. 检查第 1 行的`index.php`空格等。

最可能的原因是您`index.php`使用某些 Windows 文本编辑器进行了编辑，出于某种原因，该编辑器认为您的文件是 UTF-8 编码并在其开头放置了一个[BOM](https://en.wikipedia.org/wiki/Byte_order_mark)。PHP 不以任何特殊方式处理 BOM，因此这些字节直接进入浏览器，导致标头结束。

# java - 域模型到 JSON - 深度序列化问题

> ID：11290599
> 
> 赞同：0
> 
> 时间：2012-07-02T08:59:55.610
> 
> 标签：java, spring, hibernate, domain-model

我正在使用 Hibernate 4.1 和 Spring 3.1。

考虑以下 User 类具有对包括 self 在内的其他对象的引用。我定义的所有休眠映射都是 LAZY 的，所以只有当我在 jsp 或其他代码中使用它们时才会加载引用对象。

```
class User {
  private User createdBy;
  private Department department;
  private Project project;
  .....
  .....
} 
```

问题是当我想返回一个 JSON 表示时，它使用反射来完成它并在那里进行深度序列化。下面是我的控制器代码。

```
@ResponseBody
public User getUser(int id) {
  User user = [fetch user from service];
  return user;
} 
```

因为我也有自我参考，所以它进入了无限循环。

解决这个问题的解决方案是什么？我知道我需要在返回 UserDTO 的地方使用 DTO 模式，但我创建了多少这样的方法。例如，在一个地方我只需要基本的用户属性，在另一个地方我需要用户及其部门，在另一个地方我需要用户与部门和项目。

我需要公开多少这样的方法。有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:11:10.573

问题是您有一个循环引用，而您的 JSON 编码器没有处理它。因此，您需要手动处理它。

按照您的评论创建 DTO 会有所帮助。您可以为所需的每个解码级别使用一种方法实现 Helper。

您可以使用[`BeanUtils`](http://commons.apache.org/beanutils/)将每个属性从一个 bean 复制到另一个。

另一个解决方案（更具概念性）是：

为每个边界方法实现一种装饰器，并在结果上应用[推土机](http://dozer.sourceforge.net/)。你可以在[这里举一个例子](http://dozer.sourceforge.net/documentation/usage.html)

*装饰*或多或少像这样发生：

```
public interface Controller {
   User getUser(int id);
}

public class RealController {
   public User getUser(int id) {
      return dao.getUser(id);
   }
}

public class DecoratedController {

   private Controller realController;

   public User getUser(int id) {
      // here you will apply dozer or do it manually creating an object with so deep as you wish
      return flatUserStructure(realController.getUser(id));
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:21:04.990

为了能够调整 Hibernate 关联加载，您可以使用**fetch join**，请阅读[14.3。关联和连接](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins)

为避免深度序列化问题，您可以创建适当的 DTO 并使用诸如[Jackson Java JSON 处理器](http://jackson.codehaus.org/)项目的[@JsonIgnore](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/annotate/JsonIgnore.html)注释之类的东西对其进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:23:32.550

我认为问题由两部分组成：

*JSON 自定义序列化*：您可以使用这种方法来避免`UserDTO`为`User`. 但是，您仍然应该将 JSON 序列化程序定义为 bean 或可配置的服务对象，以便您可以命令它在不同的控制器方法映射中序列化什么。一个很好的例子可以在[这里](http://sghill-dev.blogspot.nl/2012/04/how-do-i-write-jackson-json-serializer.html)找到。

*Spring 配置*：下一步是配置 spring 以使用您的客户 JSON 序列化程序。因此，当使用 时`@ResponseBody`，Spring 将使用您的自定义 JSON 序列化程序。很好的例子可以在[这里](http://magicmonster.com/kb/prg/java/spring/webmvc/jackson_custom.html)和[那里](http://rwehner.wordpress.com/2010/06/09/2-ways-to-create-json-response-for-ajax-request-in-spring3/)找到。

# android - 你如何制作一个尖头按钮？（箭头状）

> ID：11290600
> 
> 赞同：1
> 
> 时间：2012-07-02T08:59:59.367
> 
> 标签：android, button

你如何制作这种类型的按钮？我认为它是 Android 4+，它经常出现在 Google 的应用程序中。

![在此处输入图像描述](../Images/1211fafcca86ed0209a549cab9d9cd33.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:32:47.650

在矩形图像中绘制填充了您想要的任何背景颜色的箭头形状，并将填充矩形（箭头外部）的 2 个三角形保留为白色。将文件另存为 .png 并将其用作按钮的背景。白色三角形将被绘制为透明的。

您还可以将其设置为 9 个补丁，以允许按钮内的文本长度不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:02:07.387

`Photoshop`您可以通过制作一些部分来创建图像`Transparent`

# c# - 托管在控制台应用程序中的 WCF 服务

> ID：11290605
> 
> 赞同：4
> 
> 时间：2012-07-02T09:00:15.890
> 
> 标签：c#, wcf, .net-4.0, console-application, self-hosting

托管在控制台应用程序中的 WCF 服务可以处理多少负载？它能否像 IIS 上托管的 WCF 一样处理传入请求？

附加说明：请求可以同时到达吗？

我有一个托管在控制台应用程序中的 WCF 服务。我从 Web 应用程序中调用此 WCF 服务。该网络应用程序可能同时有数百个请求。

我已经模拟了大量请求，但我无法确定托管 WCF 服务的控制台应用程序实际上是同时还是按顺序回答它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T09:08:07.160

WCF 服务的托管位置无关紧要。这一切都取决于绑定、端点、端点行为和服务行为设置，最后但并非最不重要的是，取决于您设置（通过属性）服务的实例化模式和并发类型的方式。

[`ServiceHost`](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost.aspx)这些设置由实例接管。即使它在控制台应用程序中运行，应用程序本身也只是一个容器，`ServiceHost`它是根据您提供的设置为您的 WCF 服务创建运行时环境的容器。

对于您感兴趣的内容，请参见[此处](http://msdn.microsoft.com/en-us/library/ms735114%28v=vs.100%29.aspx)（并发和节流）。[此外，关于 WCF 实例模式的内容](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)非常广泛。

出于性能原因，我建议您使用单例服务，您可以通过 InstanceContextMode 指定该服务。如果你有数百个请求进来，如果为每个请求创建一个服务实例，它不会对并发有任何好处。您必须通过检查所有服务操作是否都是线程安全的来分析您的情况是否可能单例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:24:02.600

> 托管在控制台应用程序中的 WCF 服务可以处理多少负载？

尽可能多地为自托管 WCF 服务提供您的计算机。

主机可以是控制台应用程序或 Windows 服务，没关系，从负载角度来看它们是相同的。

# rsync - Sublime Text 2：在保存/备份时将文件复制到另一个文件夹

> ID：11290606
> 
> 赞同：5
> 
> 时间：2012-07-02T09:00:16.140
> 
> 标签：rsync, sublimetext, sublimetext2

在 ie Adob​​e Dreamweaver 中，可以设置将保存的文件自动复制到另一个项目特定位置。如何使用 Sublime Text 2 实现这一目标？

我在 Windows 7 上，我不想安装第三方工具（如 Windows 的 rsync）来查看文件夹，然后对更改采取措施。我只想将我的文件保存到两个位置（本地 SVN 存储库和第二个 Windows 远程共享文件夹）。

有没有一个插件可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-12T09:57:11.267

现在有一个适合我需要的插件：[SublimeFileSync](https://github.com/bcharbonnier/SublimeFileSync)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:58:40.930

您可以查看[自动备份插件](https://github.com/joelpt/sublimetext-automatic-backups)。它不会在特定于项目的位置备份文件，但它是每次保存文件时自动保存备份的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T15:18:10.067

[https://github.com/akalongman/sublimetext-autobackups](https://github.com/akalongman/sublimetext-autobackups)

配置选项：

```
{
    // Don't make changes to this file directly as they can get wiped out when the
    // plugin is updated. Instead transfer what you need to the 'Settings - User' file.

    // The directory where we'll keep our backups. If empty, we'll try to put them in
    // ~/sublime_backups
    "backup_dir": "~/sublime_backups",

    // If true, also save a backup copy any time a file is opened (if backup file not exists)
    "backup_on_open_file": true,

    // If true, backups saved per day, in separate folders, for example ~/sublime_backups/2013-05-23/myfile.php
    "backup_per_day": true,

    // If set, backups saved per second. possible values: false, "folder" or "file"
    // false - disabled backup per second
    // "folder" - backup example D:/Sublime Text Backups/2013-05-23/095034/myfile.php
    // "file" - backup example D:/Sublime Text Backups/2013-05-23/myfile_095034.php
    // to use this feature, you must have enabled backup_per_day setting
    "backup_per_time": "file",

    // Files larger than this many bytes won't be backed up.
    "max_backup_file_size_bytes": 262144, // = 256 KB

    // Files older than X days will be deleted. If 0 - auto delete disabled
    "delete_old_backups": 0, // days to delete

    // If true, backup file opened in same line as cursor in original file
    "open_in_same_line": true,

    // If true, show backup previews (only in ST3)
    "show_previews": true

} 
```

# java - 如何将第三方库添加到 Talend 项目？

> ID：11290609
> 
> 赞同：11
> 
> 时间：2012-07-02T09:00:26.387
> 
> 标签：java, etl, talend

如何将第三方库（jar 文件）添加到 Talend 项目？

还有一个问题是，每个 Talend 都`component`使用`LogFactory`，但在我的情况下，它正在抛出

```
java.lang.NoClassDefFoundError: org.apache.commons.logging.LogFactory
    at ... 
```

有了`tSetGlobalVar`组件，我如何利用现有的日志库来摆脱这个异常？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-05T18:37:08.987

只是为了让其他人受益，在最近发布的 Talend 中，他们删除了用户库。

我们需要使用`Modules`来查看、下载或安装新库。我们可以通过转到添加模块视图`Window -> Show view -> Talend -> Modules`。从该`Modules`部分我们可以管理所有外部库。

![安装或下载外部库](../Images/6ffb9b3d089c3b957ec0c39bb8f06aa9.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T16:27:19.103

有两种方法可以添加额外的库。

1.  Window -> Preferences -> Java -> Build Path -> User Libraries 这将包括所有项目作业的 jar 文件。

2.  使用 tLibraryLoad 组件在作业中加载 lib 文件。

至于您的第二个问题，这应该可以开箱即用，但是您可能会以某种方式丢失文件。在您的 Talend 安装路径中，检查插件目录。apache 日志记录 jar 文件应该在那里。就我而言：org.apache.commons.logging_1.1.1.v201005080502.jar

如果它丢失了，那么我建议重新安装 Talend（它不应该丢失）。如果它在那里，但您仍然收到错误，请尝试如上所述将其显式包含在用户库中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T13:50:03.817

您可以使用`tLibraryLoad`component 或`Editing Routine Libraries`.

欲了解更多信息，请访问

[http://vikramtakkar.blogspot.in/2013/03/importing-external-jar-or-library-files.html](http://vikramtakkar.blogspot.com/2013/03/importing-external-jar-or-library-files.html)

# android - 如何通过在Android中快速单击两次按钮来防止双重代码运行

> ID：11290610
> 
> 赞同：12
> 
> 时间：2012-07-02T09:00:27.523
> 
> 标签：android, android-button

如果我在我的 Android 应用程序中快速单击按钮，它背后的代码似乎运行了两次。如果我单击我的菜单按钮两次，则必须启动 onclick 的活动只会启动两次，我必须退出两次。

这真的很烦人，因为如果我点击菜单按钮的速度太快，我可以在后台加载一大堆活动，我必须一个一个地退出它们，所以这显然是我的应用程序的一个错误状态，我想解决这个问题。

这个问题我能做些什么？

我使用简单的 onClickListeners 和 Buttons

编辑：

关于答案和评论，我的菜单按钮如下所示：

```
top20Button.setOnClickListener(new OnClickListener()
{
    public void onClick(View v)
    {
        favButton.setClickable(false);
        nearButton.setClickable(false);
        highlightedButton.setClickable(false);
        top20Button.setClickable(false);

        Intent i = new Intent();
        i.putExtra("showDialog", false);
        i.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
        i.setClass(Search.this, Top20.class);
        startActivity(i);
        finish();

    }
}); 
```

在所有这些更正之后，它仍然是相同的：S 当我像疯子一样点击时，历史堆栈上有多个活动，我必须多次退出。

有什么建议么 ？我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T09:03:24.550

您可以使用以下代码：**btn.setEnabled(false);**

```
btn.setOnclickListener(new View.onClickListener(){

      public void onClick(View v) {
            btn.setEnabled(false);

      }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-05T13:43:05.713

您可以像这样暂时禁用视图

```
public static void disableTemporarly(final View view) {

        view.setEnabled(false);
        view.post(new Runnable() {
            @Override
            public void run() {

                view.setEnabled(true);
            }
        });
    } 
```

* * *

**编辑：**

上述解决方案将正常工作。但是当使用 Kotlin 的力量时它会变得更好

1) 创建 SafeClikc 监听器

```
class SafeClickListener(
        private var defaultInterval: Int = 1000,
        private val onSafeCLick: (View) -> Unit
) : View.OnClickListener {

    private var lastTimeClicked: Long = 0

    override fun onClick(v: View) {
        if (SystemClock.elapsedRealtime() - lastTimeClicked < defaultInterval) {
            return
        }
        lastTimeClicked = SystemClock.elapsedRealtime()
        onSafeCLick(v)
    }
} 
```

2）添加扩展功能使其适用于任何视图，这将创建一个新的 SafeClickListener 并将工作委托给它

```
fun View.setSafeOnClickListener(onSafeClick: (View) -> Unit) {

    val safeClickListener = SafeClickListener {
        onSafeClick(it)
    }
    setOnClickListener(safeClickListener)
} 
```

3）现在很容易使用它

```
settingsButton.setSafeOnClickListener {
    showSettingsScreen()
} 
```

快乐的科特林 ;)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-28T11:10:19.590

```
 Button.setOnClickListener(new View.OnClickListener {  
   @Override
   public void onClick(final View v) {
        v.setEnabled(false);
        v.postDelayed(new Runnable() {
         @Override
         public void run() {
            v.setEnabled(true);
         }
        },150); //150 is in milliseconds
    }
 }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T09:03:38.287

嗯，这是预期的行为......

使用 SINGLE_TOP 标志启动您的新活动

或尝试`android:launchMode="singleInstance"`在您的 AndroidManifest.xml 中设置 Top20 活动

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-18T10:53:14.227

这样就解决了activity的多个Instances的问题，并且依然播放默认动画

```
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-17T21:37:39.350

该解决方案更符合我的要求。而是使用启用/禁用视图功能。我使用时间，首先，创建一个变量来存储用户最后一次按下视图*，然后当用户按下视图时，捕获变量中的时间，以便比较当前时刻和用户最后一次按下视图，如果时间之间的差异时间太小，这意味着快，或者非常快，请忽略它，仅此而已。但是，如果它对您来说是一个合理的时间，请将最后一个时间变量设置为当前时间，然后做任何您想做的事情。

```
@Override
public void onListItemClick(ListView list, View item, int position, long id) {

    Long now = System.currentTimeMillis();
    if((now - lastTimeSelected) > 500){
        lastTimeSelected = now;
        // your code goes here
    } else {
        Log.i(TAG, "Too fast!");
    }

} 
```

我在其他帖子上看到了类似的[答案](https://stackoverflow.com/a/35726991/1067450)，但似乎没有人喜欢这种方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-07T11:06:28.767

Add the following code snipet to your Activity definition in Androidmanifest.xml

```
android:launchMode = "singleTask" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-12T07:14:34.103

在类内使用`frozen`变量。`Application`

那是

```
public class App extends Application {
public static boolean frozen = false;
} 
```

单击时某处：

```
//...
onClick() {
if (frozen) {
return;
}
frozen = true
}
//... 
```

在某个地方发布，例如，当新的 Activity 启动时

```
onCreate (...) {
super.onCreate(...);
frozen = false;
} 
```

在`AndroidManifest.xml`：

```
<application
        android:allowBackup="true"
        android:largeHeap="true"
        android:name="com.example.App"
        android:icon="@drawable/icon"
        android:label="@string/app_alias"
        android:theme="@style/AppTheme" > 
```

# javascript - Javascript 包含两次，因为 LESS CSS 需要启用资产

> ID：11290611
> 
> 赞同：0
> 
> 时间：2012-07-02T09:00:30.037
> 
> 标签：javascript, ruby-on-rails, assets, pipeline

我正在使用带有**LESS**的 Twitter Bootstrap ，它**需要启用资产管道**。但是如果启用了资产，那么我的**CoffeeScript 代码会**在浏览器中包含两次——一次在 application.js 中，第二次在 posts.js 中。

我怎样才能解决这个问题？

这两个文件都包含：

```
$('.slider').each(function() {
    val = $(this).attr('val')
    $(this).slider({
      orientation: 'horizontal',
      range: "min",
      max:100
    }); 
```

而且我在两个文件中都遇到了错误：**Uncaught TypeError: Object [object Object] has no method 'slider'** from Chrome just after

```
$(this).slider({ 
```

但是，如果我现在转到posts.js 并在那里发表评论，它将毫无错误地通过，并且来自application.js 的孪生函数将正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:45:51.877

管道似乎并不关心您的 application.js 中是否有此行

```
//= require_tree . 
```

连同另一行，例如：

```
*= require jquery.ui.slider 
```

如果 jquery.ui.slider.js 在“.”下，它只会包含两次，因为这就是你告诉它要做的事情。它并没有真正检查这个文件是否已经包含在内。

# java - 使用 Java 在 Memcached 中共享对象

> ID：11290612
> 
> 赞同：0
> 
> 时间：2012-07-02T09:00:30.520
> 
> 标签：java, php, memcached, protocol-buffers

在我最近的项目中。我应该在 Java 应用程序和 Php 应用程序之间共享 memcached 中的一些数据对象。使用 Protobuf 处理序列化/反序列化过程。

但是当我在Java应用程序中将Protobuf的Data对象序列化写入Memcached时，Php应用程序使用Memcached->get()获取缓存的Data对象，然后使用PB4PHP反序列化Data对象。发生错误，是 Memcached->get() 反序列化错误。像这样：

> Memcached->get() 无法反序列化数据。

我认为 Php memcached 库的方法 Memcached->get() 有一个默认的序列化过程。所以他们不能反序列化 Protobuf 字节流。

有谁知道如何使它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:00:56.797

php和java中对象的存储方式是不同的。尝试使用 JSON 或 XML 等常见格式存储它们，而不是简单的序列化。在获取时，再次将其转换为 Java 或 PHP。我会建议使用 JSON。

# javascript - 在 UIWebView 中禁用复制和粘贴

> ID：11290613
> 
> 赞同：3
> 
> 时间：2012-07-02T09:00:30.563
> 
> 标签：javascript, iphone, css, ios4, uiwebview

几乎，我已经尝试了所有方法来禁用复制/粘贴，`UIWebView`但没有任何东西对我有用。

我`UIWebView`从一个字符串（字符串数组）加载我的，如下所示：

```
[webView loadHTMLString:
[NSString stringWithFormat:@"%@<p class=\"paragraph\"  style=\"float: right\"  >%@</p>",css,[[array objectAtIndex:0] valueForKey:@"content"]]   baseURL:nil ]; 
```

我试过这个：

```
-(void)webViewDidFinishLoad:(UIWebView *)webView1{
[webView1 stringByEvaluatingJavaScriptFromString:@"document.body.style.webkitUserSelect='none';"];
} 
```

和这个：

```
 NSString *css =
@"<head><style><body> *{-webkit-touch-callout: none; -webkit-user-select: none;}</style> </head>  </body> "; 
```

但没有什么对我有用，尤其是对于 iOS 4.2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T00:41:52.647

```
-webkit-user-select: none; /* Disable selection/Copy of UIWebView */ 
```

还将禁用 Mobile Safari 上的表单。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T09:14:29.207

看起来更复杂的是......看看[这个关于SO的线程，](https://stackoverflow.com/questions/5995210/disabling-user-selection-in-uiwebview)它详细说明了你必须做的一切......

摘要：您需要：

**修改你的 CSS（就像你一样）：**

```
<style type="text/css">
* {
  -webkit-touch-callout: none;
  -webkit-user-select: none; /* Disable selection/Copy of UIWebView */
}
</style> 
```

**添加一些javascript：**

```
NSString * jsCallBack = @"window.getSelection().removeAllRanges();";    
[webView stringByEvaluatingJavaScriptFromString:jsCallBack]; 
```

**禁用复制/粘贴菜单：**

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender 
{
  BOOL superCanPerform = [super canPerformAction:action withSender:sender];
  if (superCanPerform) {
    if (action == @selector(copy:) ||
      action == @selector(paste:)||
      action == @selector(cut:)) 
    {
       return _copyCutAndPasteEnabled;
    }
  }
  return superCanPerform;
} 
```

`canPerformAction`应该在你的 UIWebView 中定义；你有两个选择：

1.  为 UIWebView 定义一个类别（如果可以从所有 UIWebView 中删除此行为）；

2.  从那里派生您自己的 Web 视图类`UIWebView`并覆盖该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T09:54:29.697

用这个。

```
<style type="text/css">
*:not(input):not(textarea) {
-webkit-user-select: none; /* disable selection/Copy of UIWebView */
-webkit-touch-callout: none; /* disable the IOS popup when long-press on a link */
}       
</style>
 If you want Disable only anchor button tag use this.

a {-webkit-user-select: none; /* disable selection/Copy of UIWebView */
   -webkit-touch-callout: none; /* disable the IOS popup when long-press on a link */
 } 
```

# merge - sed：多行的条件合并

> ID：11290616
> 
> 赞同：5
> 
> 时间：2012-07-02T09:00:39.190
> 
> 标签：merge, sed, lines

我需要基于模式使用 sed 合并文件的行。例如：

输入文件：

```
X1 A B C D E F

\+ G H I J 1 

\+ LK T PP E OO 2

X2 DDF F Y 

\+ J W Q 
```

……

预期输出：

```
X1 A B C D E F G H I J 1 LK T PP E OO 2

X2 DDF F Y J W Q 

.. 
```

* * *

我想在 vi 编辑器中等效于 wat (:%s/\n+/ /g)

在网上搜索我找到了一个解决方案，从逻辑上讲应该可行

> sed -e '{:a; N; s/\n+/ /g; ta}' 文件

但是这个命令违背了我的理解和逻辑，并产生了输出

```
X1 A B C D E F

\+ G H I J 1 LK T PP E OO 2
X2 DDF F Y 

\+ J W Q 
```

……

欢迎任何想法，并在此先感谢

斯里苏里亚

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-02T09:10:00.270

这可能对您有用：

```
sed ':a;$!N;s/\n+//;ta;P;D' file 
```

解释：

*   `:a`是循环占位符
*   `$!N`表示如果不是文件结尾，则将下一行附加到当前行。
*   `s/\n+//`表示删除一行结束后跟一个加号
*   `ta`表示如果最后一个替换工作分支到`a`循环占位符
*   `P`打印到第一个换行符。
*   `D`删除直到并包括第一个换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:25:49.043

另一种 awk oneliner：

```
awk 'BEGIN{RS="  "}{gsub(/\n\n\+/,"")}1' yourFile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T23:19:17.053

potong 的回答对我不起作用，但类似的工作：

```
sed -e :a -e '$!N;s/\n+//;ta' -e 'P;D' file 
```

这里有好的 sed 文档：http: [//sed.sourceforge.net/sedfaq3.html](http://sed.sourceforge.net/sedfaq3.html)

# python - SublimeCodeIntel and PyQ4

> ID：11290631
> 
> 赞同：4
> 
> 时间：2012-07-02T09:02:09.507
> 
> 标签：python, pyqt4, sublimetext2

I'm using Sublime Text 2 and SublimeCodeIntel plugin. I want to have some code completion for PyQt4 but I'm receiving notification "... could not resolve first part ...". For python libraries code completion is working awesome.

Is it possible to configure SublimeCodeIntel to have code completion for PyQt4?

Thanks for help Pawel

========== UPDATE ============
My configuration for this plugin:

```
{
    "Python": {
        "python": "C:\\Python32"
            "pythonExtraPaths": [
            "libs",
            "~/Applications/Sublime Text 2.app/Contents/MacOS",
            "/Applications/Sublime Text 2.app/Contents/MacOS",
            "C:\\Python32\Lib\\site-packages"
            ]
    }
} 
```

========== UPDATE ===========
I created new cix file that contains something like that:

```
<?xml version="1.0"?>
<codeintel name="PyQt4" version="2.0" description="PyQt4">
    <file lang="Python" mtime="201207021718" path="QtCore.pyd">
        <scope ilk="blob" lang="Python" name="PyQt4.QtCore">
            <scope ilk="class" name="QAbstractEventDispatcher">
                <scope ilk="function" name="closingDown" signature="closingDown()"/>
            </scope>
        </scope>
    </file>
</codeintel> 
```

After that i put file in correct place and I checked that file is loaded. But this file didn't help and it looks that SublimeCodeIntel ignore it because of something. I can't find a place and a reason why is doing that.

If you have any ideas please help.

=============== UPDATE ================
It looks like is working. I restarted Sublime Edit and change the code like this:

```
import PyQt4.QtCore
PyQt4.QtCore. 
```

After last dot code completions shows that QAbstractEventDispatcher is available. That means that cix file is working but there is some problem with formatting or some problem with encoding maybe. There is something strange also. Only import PyQt4.QtCore is working. For below lines this cix file is not working:

```
import PyQt4
PyQt4.QtCore.

from PyQt4 import *
QtCore.

from PyQt4.QtCore import *
QAbstractEventDispatcher. 
```

Do you have any ideas what is going on? Pawel

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:08:53.390

The codeintel libraries originate from the Komodo IDE, and and solutions that work for that IDE also work with SublimeCodeIntel.

What you need are [CIX (codeintel XML) files](http://community.activestate.com/faq/codeintel-cix-schema) that describe the binary libraries in question. And as it happens, someone has created such files for PyQT4 and linked to them from a StackOverflow answer: [Autocompletion not working with PyQT4 and PyKDE4 in most of the IDEs](https://stackoverflow.com/questions/1167065/autocompletion-not-working-with-pyqt4-and-pykde4-in-most-of-the-ides).

The Komodo team themselves have also generated such files, and [provided a FAQ entry for them](http://community.activestate.com/forum/komodo-python-qt-and-pyqt-catalog-files-cix).

The trick, of course, is how to get SublimeCodeIntel to acknowledge these catalogs. Any CIX files placed in the `SublimeCodeIntel/libs/codeintel2/catalogs/` path should be loaded by the codeintel library. Usually this is located within your Sublime Packages directory, reachable from the `Preferences` menu (look for `Browse Packages...`).

I do not think there is any way to configure SublimeCodeIntel to look in additional paths for these.

# java - Spring MVC URL 映射

> ID：11290637
> 
> 赞同：0
> 
> 时间：2012-07-02T09:02:30.063
> 
> 标签：java, spring, spring-mvc, controller

嗨，我正在创建一个 spring mvc 应用程序。spring 上下文似乎将控制器方法映射到错误的 url。

我有以下控制器：

你好世界控制器

```
package com.springapp.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

@Controller
@RequestMapping("/hello")
public class HelloWorldController {

    @RequestMapping(method = RequestMethod.GET)
    public ModelAndView helloWorld() {

        String message = "Hello World, Spring 3.0!";
        return new ModelAndView("hello", "message", message);
    }
} 
```

联系人控制器

```
package com.springapp.controller;

import com.springapp.form.Contact;
import com.springapp.service.ContactService;

import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.SessionAttributes;
import org.springframework.web.servlet.ModelAndView;

@Controller
@RequestMapping("/contacts")
public class ContactsController {

    @Autowired
    private ContactService contactService;

    @RequestMapping(method = RequestMethod.GET)
    public String listContacts(Model map) {

        map.addAttribute("contact", new Contact());
        map.addAttribute("contactList", contactService.listContacts());

        return "contact";
    }

    @RequestMapping(value="{contactId}", method=RequestMethod.GET)
    public String showContact(@PathVariable("contactId") Integer contactId) {

        contactService.getContact(contactId);
        return "redirect:/contacts";
    }

    @RequestMapping(value = "/add", method = RequestMethod.POST)
    public String addContact(@ModelAttribute("contact") Contact contact, BindingResult result) {

        contactService.addContact(contact);
        return "redirect:/contacts";
    }

    @RequestMapping("/{contactId}/delete")
    public String deleteContact(@PathVariable("contactId") Integer contactId) {

        contactService.removeContact(contactId);
        return "redirect:/contacts";
    }
} 
```

然而，弹簧上下文将它们映射为：

```
INFO: Mapped URL path [/contacts/new] onto handler 'contactsController'
INFO: Mapped URL path [/contacts/new.*] onto handler 'contactsController'
INFO: Mapped URL path [/contacts/new/] onto handler 'contactsController'
INFO: Mapped URL path [/contacts/addContact] onto handler 'contactsController'
INFO: Mapped URL path [/contacts/addContact.*] onto handler 'contactsController'
INFO: Mapped URL path [/contacts/addContact/] onto handler 'contactsController'
INFO: Mapped URL path [/contacts/delete/{contactId}] onto handler 'contactsController'
INFO: Mapped URL path [/contacts/delete/{contactId}.*] onto handler 'contactsController'
INFO: Mapped URL path [/contacts/delete/{contactId}/] onto handler 'contactsController'
INFO: Mapped URL path [/hello] onto handler 'helloWorldController'
INFO: Mapped URL path [/hello.*] onto handler 'helloWorldController'
INFO: Mapped URL path [/hello/] onto handler 'helloWorldController' 
```

它从哪里得到这些`new`和`addContact`模式？`/contacts`也缺少映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:02:40.490

您的问题可能取决于您在旧版本应用程序中的映射。尝试在 Tomcat 中更新已部署的版本。

如果您使用 Eclipse 运行/调试您的项目，请尝试清理/编译您的项目，而不是在 Tomcat 中部署新版本。

# asp.net - 排序在图表控件中不起作用？

> ID：11290639
> 
> 赞同：2
> 
> 时间：2012-07-02T09:02:42.880
> 
> 标签：asp.net, sorting

```
finalChart.Series["Series1"].ChartType = SeriesChartType.Column;
finalChart.Series["Series1"].XValueMember = mydatasource;
finalChart.Series["Series1"].YValueMembers = mydatasource;
if (SortDropDownList.SelectedItem.Text == "Ascending")
   finalChart.DataManipulator.Sort(PointSortOrder.Ascending,  "Series1");
else
   finalChart.DataManipulator.Sort(PointSortOrder.Descending, "Series1"); 
```

> 我想要做的是显示排序的图表。仅显示未排序的图表。从 SortDropDownList 进行选择后，图表系列没有变化，即不排序。虽然我没有在这里显示，但我已经使用了 selectedChangedEvent。

任何帮助都将是一个很大的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:19:39.460

您可以将 AutoPostBack 添加到您的下拉列表

```
<Asp:DropDownList id="ddl" runat="server" AutoPostBack="True"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T05:52:49.263

好吧，我找到了解决问题的方法（排序不起作用）。在上面的代码中，我从数据源列名称中分配了 xvaluemember 和 yvaluemember。对于 DataManipulator.Sort 锻炼，我尝试了 Point 数据，即我使用了 DataBindXY(xvaluemember, yvaluemember)。我认为所有的图表控件排序和分组公式只适用于点数据而不是数据源。

# user-interface - 你用什么工具来截屏你的软件在开发后的样子？

> ID：11290641
> 
> 赞同：2
> 
> 时间：2012-07-02T09:02:49.270
> 
> 标签：user-interface, specifications

我需要为我们的产品编写一些开发规范。图形方面在此开发中非常重要，因此我需要对应用程序中未来对话框的外观进行截图，并且这些截图必须看起来真实。

如果不进行开发，您将如何制作这样的屏幕截图？你知道任何（最好是免费的）工具可以做到这一点吗？

具体信息：Windows 7，使用 Visual Studio 2010 开发，主要使用 MFC 常用控件。

谢谢你。

# asp.net - 请求经常超时

> ID：11290643
> 
> 赞同：5
> 
> 时间：2012-07-02T09:02:50.883
> 
> 标签：asp.net, performance, .net-3.5, iis-7.5, informix

我一次又一次面临以下问题，我不知道如何解决它..

我经常收到以下错误，我不得不`restart the IIS`或`republish`临时解决问题：

```
Error Message:Request timed out.
Error Message:ERROR [08S01] [Informix .NET provider]Communication link failure.
Error Message:Thread was being aborted. 
```

我试着做：

```
<httpRuntime executionTimeout="600" /> 
```

但仍然是同样的问题！

* * *

```
Stack Trace:
   at System.Web.HttpContext.InvokeCancellableCallback(WaitCallback callback, Object state)
   at System.Web.UI.Page.AsyncPageBeginProcessRequest(HttpContext context, AsyncCallback callback, Object extraData)
   at ASP.appmaster_aspx.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object data)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

**我的页面加载：**

```
 protected void Page_Load(object sender, EventArgs e)
        {

            if (Session["emp_num"] != null && !string.IsNullOrEmpty(Session["emp_num"].ToString()))
            {
                try
                {

                    string user_setting = Personalization_DAL.CheckWidgetSettings(int.Parse(Session["emp_num"].ToString()));

                    if (!string.IsNullOrEmpty(user_setting))
                    {
                        user_flag = int.Parse(user_setting);
                    }

                    GetLinkedApp = DB_Connection_s.DB_Connection.GetLinkedAppUser(int.Parse(Session["emp_num"].ToString()));
                    if (!Page.IsPostBack)
                    {
                        //Profile
                        GetProfile();

                        if (Session["emp_app"] != null && !string.IsNullOrEmpty(Session["emp_app"].ToString()))
                        {
                            BindAvailableSystems(Session["emp_app"].ToString());
                        }

                        BindMainSystems();

                        if (GetLinkedApp > 0)
                        {
                            rlv_available_sys.Visible = true;
                            h5_app.Visible = true;
                            lbtn_addApp.Visible = false;
                            h4_app.Visible = false;
                            intro.Visible = true;

                        }
                        else
                        {
                            rlv_available_sys.Visible = false;
                            h5_app.Visible = false;
                            lbtn_addApp.Visible = true;
                            h4_app.Visible = true;
                            intro.Visible = false;
                        }
                        //Applications
                        if (rlv_available_sys.Visible == true)
                        {
                            Session["emp_app"] = GetLinkedApp;
                            BindAvailableSystems(Session["emp_app"].ToString());
                            if (user_flag > 0)
                            {
                                Get_UserApplicationSystems(1, 1, GetLinkedApp.ToString());
                            }
                            else
                            {
                                Get_UserApplicationSystems(user_flag, 1, GetLinkedApp.ToString());
                            }

                        }
                        //services
                        Get_MainSystems(user_flag);
                        if (GetLinkedApp > 0)
                        {
                            GetServiceInformation();
                        }
                        string[] statistics = TrackUser();
                        base.TraceActivity("Enter the portal", "https://" + Request.Url.Authority + "/AppMaster.aspx", statistics[0], statistics[1], statistics[2]);
                    }

                    TraceSystemsMode();
                }
                catch (Exception ee)
                {
                    string message = ee.Message;
                }

            }
            else
            {
                Response.Redirect("LoginPage.aspx", false);
            }
        } 
```

* * *

我的通用处理程序：

```
public void ProcessRequest(HttpContext context)
        {
            try
            {
                using(Stream photo_stream = Photo_DAL.RetrievePhoto(int.Parse(context.Session["emp_num"].ToString())))
               {
                byte[] photo_bytes = Photo_DAL.StreamToByteArray(photo_stream);
                if (photo_bytes == null)
                {
                    photo_bytes = File.ReadAllBytes(Path.Combine(context.Server.MapPath("~/images/PortalImages/"), "user.png"));
                }
                //context.Response.ContentType = "image/png";
                context.Response.BinaryWrite(photo_bytes);
                }
            }
            catch (Exception ee)
            {
            }

        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T23:53:59.350

这是推测，因为有很多我们无法从问题中发布的代码段中看到的引用代码。

我将假设您没有正确处理数据库连接 ( `DB_Connection_s`) 有几个原因。

**A) 通过重置修复**

```
 I get the following errors frequently , and i had to restart the IIS or 
    republish to fix the problem temporary` 
```

对我来说，这表明您正在使用到数据库的所有连接，因为当您重新启动或重新发布时，所有当前连接都将被删除。

**B) 没有明确的处置**

在您的代码中，您引用`DB_Connection_s`了 ，但是它没有包含在 using 块中，也没有被实例化，这意味着它很可能是一个静态类或方法（很难判断没有该引用的代码）。

**建议**

确保您始终正确处理数据库连接。他们需要在完成后调用 .Dispose() **。**这通常是通过获取包含上下文的类并实现它`IDisposable`，然后使用 using 语句包装对该类的*所有*调用来完成的。using 语句将`Dispose`自动调用该方法。如果您不想实现`IDisposable`，您也可以`.Dispose()`在查询完成后通过直接调用连接来显式（不建议）处理数据库连接。

**编辑以响应新添加的评论：**

@just_name - 从评论中的代码来看，在我看来可能存在问题。依靠`~DBConnection()`处理你的连接，只调用`.Close()`，而不是关闭一个流，这对我来说是最突出的。

**i) 终结器可能需要很长时间**

使用终结器处理连接可能会有风险，因为您永远无法确定它何时被调用。“垃圾回收期间终结器执行的确切时间未定义。” - [MSDN Object.Finalize](http://msdn.microsoft.com/en-us/library/system.object.finalize(v=vs.71).aspx)。如果在处理任何连接之前有大量资源，这可能会导致系统等待很长时间，从而减慢请求。

**ii) 关闭不是处置**

尽管您在技术上调用`.Close()`连接是安全的，但它可能会导致生产问题。原因是连接将关闭，但事件处理程序将保留，有时如果涉及延迟加载或动态代理，这些事件处理程序可以保存连接的副本。

**iii) 使用处置**

**a) 明确地处理你的连接**

总是明确地处理你的连接，不要等待垃圾收集器去做。处理它的最佳实践方法是`using(){}`在访问您的`DBConnection`课程时使用块。您可以进行一些更改来执行此操作：

定义 DBConnection 以实现 IDisposable 以便它可以在 using 块中使用

```
public class DBConnection : IDisposable
{
  //other methods already in here
  public void Dispose()
  {
   //Close_Connection(); Call this if you want, but you MUST call 
   //.Dispose on your connections
   connection.Dispose();
  }
} 
```

这将允许您像这样创建一个新的 DBConnection：

```
using( var DB_Connection_s = new DBConnection() )
{
 //todo: interact with database connection
} 
```

`.Dispose()`using 块将在达到final 时自动调用，`}`并保证释放连接。此外，如果数据库访问涉及任何排队，这允许数据库发生更短的事务时间，这可以提高查询和请求速度。

如果您不喜欢 using 块的实现，那么至少，更改`.Close()`到`.Dispose()`您使用的任何地方 close 并确保没有可能的执行路径导致`.Dispose()`在数据库访问完成后不会立即被调用。

**b)`.Dispose()`在非托管资源上使用**

始终`.Dispose()`在非托管资源上使用。有几种方法可以做到这一点，但最佳实践方法是使用`using(){}`块。我注意到您可以在一个地方专门使用必须处理的代码中的流来实现这一点。

这是有问题的代码之一：

```
IfxDataReader ifxDataReaders = DB_Connection.DBCmd.ExecuteReader(); 
if (ifxDataReaders.Read()) { 
 item = (int)ifxDataReaders["emp_num"]; 
} 
ifxDataReaders.Close(); 
```

我对此有几个问题。首先，您正在调用`.Close()`上面讨论的内容。其次，因为这是在 try 块中，所以 ifxDataReaders 可能会抛出异常并且程序将继续运行而无需关闭或处置阅读器。这会导致很多问题。

您应该做的是确保`.Dispose`始终**在**您的非托管资源上调用它。您可以使用 using 块（隐式始终调用`.Dispose()`）来执行此操作。

```
using(IfxDataReader ifxDataReaders = DB_Connection.DBCmd.ExecuteReader())
{
 if (ifxDataReaders.Read()) { 
  item = (int)ifxDataReaders["emp_num"]; 
 } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:51:43.857

我知道它不属于 ，`Error Message:Request timed out`但它可能与`Error Message:Thread was being aborted.`. 因此，由于我们没有任何代码示例，我认为`Response.Redirect("aPage.aspx")`当它是在 Try-Catch 块内制作时，可以认为它可能是一个问题。

如果是您的情况，请尝试在`Response.Redirect`方法的 EndResponse 参数中添加“False”，如下所示：

```
try {
    // [... SOME CODE ...]
    Response.Redirect("aPage.aspx", False)
} catch (Exception e) {
    // [... YOUR CATCH ...]
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T13:53:07.177

因此，我赞成 Zia 的评论，建议您单独运行这些部件以隔离超时。Informix 连接是否有可能出错？

数据库查询有两个超时，连接超时和命令超时。这些都不会使用**executionTimeout**值。我没有尝试使用 Informix 提供程序，但是如果服务器繁忙或命令对象等待长 SQL 查询运行，我会增加连接对象的超时时间。

这是在 Informix 连接对象上设置 connectionTimeout 的链接... [http://publib.boulder.ibm.com/infocenter/idshelp/v115/index.jsp?topic=%2Fcom.ibm.net_cc.doc%2Fcom .ibm.swg.im.dbclient.adonet.ref.doc%2Fdoc%2FDB2ConnectionClassConnectionTimeoutProperty.htm](http://publib.boulder.ibm.com/infocenter/idshelp/v115/index.jsp?topic=%2Fcom.ibm.net_cc.doc%2Fcom.ibm.swg.im.dbclient.adonet.ref.doc%2Fdoc%2FDB2ConnectionClassConnectionTimeoutProperty.htm)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T15:08:25.853

主要问题是，为什么要花这么长时间？为什么某些页面的点击时间会超过 30 秒？你真的可以用这么慢的网站生活吗？

我们必须看看如何降低性能，以便请求在 30 秒内完成。

可以分享一下代码吗？让我们看看代码的瓶颈在哪里。

# jquery - DataTables TableTools

> ID：11290648
> 
> 赞同：1
> 
> 时间：2012-07-02T03:42:32.843
> 
> 标签：jquery, css, tabletools

[DataTables](http://datatables.net/index)在我的网站上启动并运行。我似乎无法让 tableTools css 工作。特别是，我想要`copy_csv_pdf_print.swf`加载。我只能用一些样式来渲染表格。

`copyCSVExcelPDFPrint`链接应该呈现为左上角的按钮（即http://datatables.net/extras/tabletools/ [）](http://datatables.net/extras/tabletools/)，但它们呈现为链接。

我加载了必要的 css 和 javascript 文件，包括 tableTools 的 css 文件；然后是下面的 jQuery 代码。在我的 php 文件中，我使用 id 定位表`demo`。

```
jQuery(document).ready( function ($) {
    $('#demo').dataTable( {
        "sDom": 'T<"clear">lfrtip<"clear spacer">T'
    } );
} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T10:21:28.620

也许你必须绑定媒体文件夹结构。默认 swf 文件绑定如下。你必须改变你的。

```
"sSwfPath": "media/swf/copy_csv_xls_pdf.swf" 
```

# c# - 如何在 C# 中编码 tcpclient 流？

> ID：11290649
> 
> 赞同：0
> 
> 时间：2012-07-02T09:03:00.690
> 
> 标签：c#, encoding, tcpclient, pop3

我的 pop3 客户端有问题。我无法在 utf-8 或 iso 8859-1 中编码我从 tcpclient 流中检索到的电子邮件。这是代码：

```
TcpClient tcpClient = new TcpClient();
txtLog.Text = "Dico:\r\nConnect me to " + txtServer.Text + ":" + txtPort.Text + "\r\n\r\n";
tcpClient.Connect(txtServer.Text, Convert.ToInt32(txtPort.Text));
NetworkStream netStream = tcpClient.GetStream();
System.Text.Encoding iso_8859_1 = System.Text.Encoding.GetEncoding("iso-8859-1");
System.IO.StreamReader strReader = new System.IO.StreamReader(netStream, iso_8859_1);

System.Text.Encoding utf_8 = System.Text.Encoding.UTF8;

if (tcpClient.Connected)
{
    txtLog.Text = "Il server risponde:\r\n" + strReader.ReadLine() + "\r\n\r\n";
    byte[] WriteBuffer = new byte[100990024];
    ASCIIEncoding enc = new System.Text.ASCIIEncoding();

    WriteBuffer = enc.GetBytes("USER " + txtUser.Text + "\r\n");
    txtLog.Text = "Dico:\r\nHere's the username: " + txtUser.Text + "\r\n\r\n";
    netStream.Write(WriteBuffer, 0, WriteBuffer.Length);
    txtLog.Text = "Il server risponde\r\n" + strReader.ReadLine() + "\r\n\r\n";
    WriteBuffer = enc.GetBytes("PASS " + txtPass.Text + "\r\n");
    txtLog.Text = "Dico:\r\nHere's the password: " + txtPass.Text + "\r\n\r\n";
    netStream.Write(WriteBuffer, 0, WriteBuffer.Length);
    txtLog.Text = "Il server risponde\r\n" + strReader.ReadLine() + "\r\n\r\n";

    WriteBuffer = enc.GetBytes("RETR " + messaggio.Text + "\r\n");
    txtLog.Text = "Messaggio: " + messaggio.Text + "\r\n\r\n";
    string message;
    netStream.Write(WriteBuffer, 0, WriteBuffer.Length);
    while (true)
    {
        message = strReader.ReadLine();
        if (message == ".")
        {
            if (message == "/n") break;
            break;
        }
        else
        {
            txtLog.Text += message + "\r\n\r\n";
            continue;
        }
    } 
```

我总是得到这样的东西“questa_=E8_una_prova_=F2_=EC_?=”。怎么了？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:17:53.927

您正在查看传输编码，它用于传输文本编码产生的字节。

虽然文本可以使用 UTF-8 或任何其他字符集进行编码，但传输编码通常是`base 64`或`quoted-printable`. 字符串`"questa_=E8_una_prova_=F2_=EC_?="`看起来像后者。

[在此处](https://stackoverflow.com/questions/2226554/c-class-for-decoding-quoted-printable-encoding)查看如何将quoted-printable 解码为字符串，并[在此处](https://stackoverflow.com/questions/44383/reading-email-using-pop3-in-c-sharp)查看 .NET 中现有的 POP3 客户端实现。

# android - 如何使 layout_height 和 layout_width 大小相等

> ID：11290653
> 
> 赞同：5
> 
> 时间：2012-07-02T09:03:15.650
> 
> 标签：android, android-layout

我有一些分辨率为 320x320 的图像。

为`layout_width`它设置值`fill_parent`

但我不知道我应该为`layout_height`

我希望高度和宽度的大小相同。

如果我将`layout_height=wrap_content`宽度设置为两倍，那么高度...

我怎样才能增加一些布局来填充 x 中的所有空间但让 y 大小与 x 的大小一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:16:29.177

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

int width = metrics.widthPixels; 
```

现在使用宽度动态设置高度。

这是设备屏幕的宽度，因为您使用的是 layout_width = fill parent。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:18:20.953

> 如果我设置 layout_height=wrap_content 宽度是高度的两倍...

我认为这是因为每当您将高度/宽度设置为它时，`WRAP_CONTENT` *它会使布局变得尽可能宽或高以适应布局的背景，布局的子视图*因此如果您添加更多的子视图，它会变得更大布局

当设置为`FILL_PARENT`then 时，它*会占用整个可见的左侧屏幕区域*。

> 解决方案

1.  要么你可以给`dp`你的布局一些固定大小，然后你将不得不为设备的不同大小制作不同的 XML 文件。
2.  您可以尝试使用 LinearLayout 的`weightSum`和`layout_weight`属性，并通过应用适当的权重来管理布局的高度和宽度。[我个人推荐使用`weight`]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T09:06:18.750

您是否尝试过明确设置 layout_height

例如

```
android:layout_height="320dip" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T09:09:26.570

在您的活动`onCreate(...)`方法中，在调用后立即`setContentView(...);`

用这个：

```
ImageView image = (ImageView)findViewById(R.id.image);
image.getLayoutParams().width = image.getHeight(); 
```

# windows - Windows - 文件扩展名操作

> ID：11290654
> 
> 赞同：0
> 
> 时间：2012-07-02T09:03:18.353
> 
> 标签：windows, cmd

我试图使用命令行做两件简单的事情。我想创建一个运行 cmd 命令并执行以下操作的批处理文件：

a) 确认某些类型文件（.pdf、.doc 等）的下载选项后打开。

b) 始终对某些类型的文件（.pdf、.doc 等）显示扩展选项。

找不到方法，谢谢大家帮忙。本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:48:07.940

您可以使用[reg 命令](http://www.computerhope.com/reg.htm)更改注册表中的这些设置。但是，在用户注销并重新登录之前，它不会生效。

a) Internet Explorer“打开此类文件前始终询问”选项存储在：

HKCU\Software\Microsoft\Windows\Shell\AttachmentExecute\{0002DF01-0000-0000-C000-000000000046}

请参阅[http://support.microsoft.com/kb/905703](http://support.microsoft.com/kb/905703)

b）我认为您无法控制显示单个文件类型的扩展名。您只能控制是否显示*所有*已知文件类型的扩展名，使用：

HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced\HideFileExt

请参阅以下 stackoverflow 问题。答案恰好有一个具有此精确注册表设置的 reg 命令示例： [批处理文件：如果注册表项的数据等于](https://stackoverflow.com/questions/9315289/batch-file-if-registry-keys-data-is-equal-to)

# backbone.js - Backbone.xmpp：根据项目 id 区分项目类型

> ID：11290659
> 
> 赞同：0
> 
> 时间：2012-07-02T09:03:34.710
> 
> 标签：backbone.js, xmpp

我想根据 item_id 和 Backbone.xmpp 来区分节点项目。例如，在每个“待办事项”项目的[todo.app](http://documentcloud.github.com/backbone/examples/todos/index.html)中，我希望能够分配不同的注释（或多个用户在每个“待办事项”上发布注释）。我想根据 todo id 将这些笔记分配给 todo。

我可以将 Backbone 关系与[Backbone.xmpp](https://github.com/ggozad/Backbone.xmpp)一起使用吗？

任何帮助或指导表示赞赏。

Edit2：我必须将嵌套模型存储在 xmpp 服务器上的叶节点中吗？

1.  todos 和 notes 是发布在叶节点上的单独项目。将评论分配给待办事项是否有效？区分将基于项目 ID（todoid：todo_1，noteid：todo_1_note_1）。

2.  todos 是项目，notes 是 todo 项目中的对象数组（JSON 对象）？但是使用此解决方案时，我不会在发布笔记时收到通知，因为它将是待办事项的更新。此外，所有笔记都将存储在一个项目中 - 这可能会很长。

3.  最初我的想法是在叶节点上映射待办事项（作为叶节点名称或“标题”属性）和项目注释，但到目前为止 BB.xmpp 不支持这一点，对吧？

因此，我倾向于第一个解决方案，其中 todos 和 notes 由 item id 区分。

Backbone.xmpp 中如何实现这一点？

Edit1：该代码适用于带有本地存储的原始 todo.app。

```
$(function(){

// ------------------- Todo Model ------------------

var Todo = Backbone.RelationalModel.extend({

  relations: [{
     type: Backbone.HasMany,
     key: "children",
     relatedModel: "Todo",
     collectionType: "TodoList",
     reverseRelation: {
         key: "parent",
         includeInJSON: "id"
     } 
  }],

initialize: function() {
  console.log("MODEL: initialize()");
  if (!this.get("order") && this.get ("parent")) {
    this.set( {order: this.get("parent").nextChildIndex() });
  }
},

defaults: function() {
    console.log("MODEL: defaults()");
  return { 
      done: false,
      content: "default content" };
},

nextChildIndex: function() {
    var children = this.get( 'children' );
    return children && children.length || 0;
},

clear: function() {
  this.destroy();
}
}); 
```

// -------------------- 待办事项集合 ------------------

```
var TodoList = Backbone.Collection.extend({
model: Todo,
// Save all of the todo items under the `"todos"` namespace.
localStorage: new Store("todos-backbone"),

done: function() {
  return this.filter(function(todo){ return todo.get('done'); });
},

});
var Todos = new TodoList; 
```

// ------------------- 待办事项视图 ------------------

```
var TodoView = Backbone.View.extend({
tagName:  "li",

template: _.template($('#item-template').html()),

events: {
  "keypress input.add-child": "addChild",
  "click .check"              : "toggleDone",
  "dblclick label.todo-content" : "edit",
  "click span.todo-destroy"   : "clear",
  "keypress .todo-input"      : "updateOnEnter",
  "blur .todo-input"          : "close"
},

initialize: function() {
    console.log("TODOVIEW: initialize()");
  this.model.bind('change', this.render);
  this.model.bind('destroy', this.remove);

  this.model.bind("update:children", this.renderChild);
  this.model.bind("add:children", this.renderChild);

  this.el = $( this.el );
  this.childViews = {};
},

render: function() {
  console.log("TODOVIEW: render()");
  $(this.el).html(this.template(this.model.toJSON()));
  this.setText();
  this.input = this.$('.todo-input');

  this.el.append("<ul>", {"class": "children"}).append("<input>", { type: "text", "class": "add-child" });

  _.each(this.get("children"), function(child) {
      this.renderChild(child);
  }, this);      
    return this;
},

  addChild: function(text) {
      console.log("TODOVIEW: addChild()");
      if (e.keyCode == 13){
          var text = this.el.find("input.add-child").text();
          var child = new Todo( { parent: this.model, text: text});
      }
  },

  renderChild: function(model){
      console.log("TODOVIEW: renderChild()");
    var childView = new TodoView({ model: model});
    this.childViews[model.cid] = childView;
    this.el.find("ul.children").append(childView.render());
  },

// Remove the item, destroy the model.
clear: function() {
    console.log("TODOVIEW: clear()");
  this.model.set({parent: null});
  this.model.destroy();
  //this.model.clear();
}
}); 
```

// - - - - - - - - - 应用程序 - - - - - - - - - - - -

```
var AppView = Backbone.View.extend({
el: $("#todoapp"),

statsTemplate: _.template($('#stats-template').html()),

events: {
  "keypress #new-todo":  "createOnEnter",
  "keyup #new-todo":     "showTooltip",
  "click .todo-clear a": "clearCompleted",
  "click .mark-all-done": "toggleAllComplete"
},

initialize: function() {
    console.log("APPVIEW: initialize()");
  _.bindAll(this, 'addOne', 'addAll', 'render', 'toggleAllComplete');

  this.input = this.$("#new-todo");

  Todos.bind('add',     this.addOne);
  Todos.bind('reset',   this.addAll);
  Todos.bind('all',     this.render);

  Todos.fetch();
},

render: function() {

},

addOne: function(todo) {
  var view = new TodoView({model: todo});
  this.$("#todo-list").append(view.render().el);
},

addAll: function() {
  Todos.each(this.addOne);
},

// Generate the attributes for a new Todo item.
newAttributes: function() {
  return {
    content: this.input.val(),
    order:   Todos.nextOrder(),
    done:    false
  };
},

createOnEnter: function(e) {
    console.log("APPVIEW: createOnEnter()");
  if (e.keyCode != 13) return;
  Todos.create( this.newAttributes());
  this.input.val('');
},
});
var App = new AppView;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:04:40.770

除了让它工作之外，没有什么特别阻止您将 Backbone.relational 与 Backbone.xmpp 一起使用；）

另一方面，Backbone.xmpp 提供不会触发的实时通知，除非您再次保存待办事项模型，以便在您的 XMPP 节点上重新发布它。XMPP（以及主干）也支持简单的包含，当您尝试围绕它构建关系数据时，您实际上只是在解决它。

仅在待办事项上提供注释可能要简单得多，这样可以节省您与 Backbone.relational 集成的所有精力。

# ios - 如何使用不同的用户操作（包括点击应用程序图标）捕获所有 iOS 推送通知

> ID：11290661
> 
> 赞同：26
> 
> 时间：2012-07-02T09:03:35.213
> 
> 标签：ios, objective-c, swift, apple-push-notifications, push

根据苹果指南：

“作为呈现通知的结果，用户点击警报的操作按钮或点击（或点击）应用程序图标。如果点击操作按钮（在运行 iOS 的设备上），系统将启动应用程序和应用程序调用其委托的 application:didFinishLaunchingWithOptions: 方法（如果已实现）；它传入通知负载（用于远程通知）或本地通知对象（用于本地通知）。

如果在运行 iOS 的设备上点击应用程序图标，应用程序会调用相同的方法，但不会提供有关通知的信息。如果在运行 Mac OS X 的计算机上单击应用程序图标，应用程序将调用委托的 applicationDidFinishLaunching: 方法，委托可以在该方法中获取远程通知负载。”

我的问题是假设用户从提供者那里收到了 3-4 条推送通知，并且全部都存储在苹果的通知中心。如果用户点击通知警报，他/她可以轻松地在应用程序中获取通知数据。但是如果用户点击 iPhone 上的应用程序图标，如何获取与所有先前通知相关的所有数据。

提前致谢！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-02T09:11:35.067

您不能，您只会收到有关用于打开您的应用程序的通知的信息。

因此，如果用户打开您的应用，并且您的应用有通知，您将无法从应用中检索它们。

一种解决方法可能是跟踪服务器上的通知并在应用程序中处理它。因此，服务器跟踪已读取的通知。这就是 Facebook 的做法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-09-26T09:27:47.130

要以正确的方式做到这一点，必须满足一些条件：

> 您的服务器知道您的应用当前看到了什么以及它可以再次发送哪些通知。

让我们只考虑远程通知。应用程序的三种状态：

*   **前景**：

    *   通知在没有用户操作的情况下出现：

        ```
        func application(application: UIApplication, didReceiveRemoteNotification userInfo: [NSObject : AnyObject]) {
            //handle your notification
        } 
        ```

    您可以使用第三方库显示横幅：[BSForegroundNotification](https://github.com/kunass2/BSForegroundNotification)

*   **背景**

    *   通知出现在屏幕上。*（请注意，在推送通知中设置 content-available=1 可能会导致在按下应用程序图标后显示最新的推送消息，因为调用了 didReceive... **）**。*

        ```
        //nothing is called in the app, but app icon badge changes
        // OR - if the notification contains the field content-available set to 1 - 
        func application(application: UIApplication, didReceiveRemoteNotification userInfo: [NSObject : AnyObject]) {
            //handle your notification
        } 
        ```

    *   用户点击通知

        ```
        func application(application: UIApplication, didReceiveRemoteNotification userInfo: [NSObject : AnyObject]) {
            //handle your notification
        } 
        ```

    *   用户采取通知操作

        ```
        func application(application: UIApplication, handleActionWithIdentifier identifier: String?, forRemoteNotification userInfo: [NSObject : AnyObject], completionHandler: () -> Void) {
             //handle your notification's action
        } 
        ```

        或者

        ```
        func application(application: UIApplication, handleActionWithIdentifier identifier: String?, forRemoteNotification userInfo: [NSObject : AnyObject], withResponseInfo responseInfo: [NSObject : AnyObject], completionHandler: () -> Void) {
             //handle your notification's action response info
        } 
        ```

    *   用户点击应用程序图标

        ```
        func applicationDidBecomeActive(application: UIApplication) {
            //fetch pending notifications from server
        } 
        ```

*   **根本没有运行**

    *   通知出现在屏幕上。

        ```
        //nothing is called in the app, but app icon badge changes 
        ```

    *   用户点击通知

        ```
        func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {
            if let userInfo = launchOptions?[UIApplicationLaunchOptionsRemoteNotificationKey] as? [NSObject: AnyObject] {
                //handle your notification
            }
        } 
        ```

    *   用户采取通知操作

        ```
        func application(application: UIApplication, handleActionWithIdentifier identifier: String?, forRemoteNotification userInfo: [NSObject : AnyObject], completionHandler: () -> Void) {
             //handle your notification's action
        } 
        ```

        或者

        ```
        func application(application: UIApplication, handleActionWithIdentifier identifier: String?, forRemoteNotification userInfo: [NSObject : AnyObject], withResponseInfo responseInfo: [NSObject : AnyObject], completionHandler: () -> Void) {
             //handle your notification's action response info
        } 
        ```

    *   用户点击应用程序图标

        ```
        func applicationDidBecomeActive(application: UIApplication) {
            //fetch pending notifications from server
        } 
        ```

**如何处理通知？**

1.  `let notification = WLNotification(userInfo: userInfo)`

    > 当您收到通知时，请记住`WLNotification`保持当前应用程序状态。将来您可能需要它知道该通知的来源。

2.  `WLNetworkClient.sharedClient().notificationForIdentifier(notification.identifier)`

    > 从服务器获取有关该通知的详细信息，同时让它知道您确实收到了该通知，并影响了用户的数据。

**如何获取所有待处理的通知？**

```
WLNetworkClient.sharedClient().pendingNotificationsWithCompletionBlock(nil) 
```

> 获取您错过的所有通知。换句话说，获取那些未在服务器中标记为您已接收的那些。

阅读[Apple 推送通知的限制](http://bluetubeinc.com/blog/2013/6/limitations-of-apple-push-notifications)。

**查看相关问题：**

*   [如何确保 iOS 应用程序收到服务器发送的每个推送通知？](https://stackoverflow.com/q/32932920/2725435)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-03T16:18:37.133

我遇到了同样的问题：如果用户点击推送横幅，他会获得推送应用程序的信息，如果他点击应用程序图标，他不会得到它。您可以从它处理衍生一，但只有一些限制。例如，如果您想从推送中获得徽章编号，您可以这样做：（推送 -> 应用程序图标 -> 应用程序图标徽章 -> 您的 var）

在 AppDelegate

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{ 
    newMessages = application.applicationIconBadgeNumber;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T09:12:06.210

从概念上讲，当应用程序通过单击为推送通知呈现的警报视图加载时，`didReceiveLocalNotification`如果您的应用程序在后台，则应用程序将使用委托方法启动。此时`applicationDidFinishLaunching`委托方法没有被调用。

当您的应用程序不在后台时，单击为推送通知显示的警报视图将调用`applicationDidFinishLaunching`方法。

希望这可以清除您对这两种委托方法之间的理解。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-08-27T17:38:53.880

您可以使用以下代码：

```
 NSArray *pendingNotifications = [[[UIApplication sharedApplication] scheduledLocalNotifications] sortedArrayUsingComparator:^(id obj1, id obj2)                       {

        if ([obj1 isKindOfClass:[UILocalNotification class]] && [obj2 isKindOfClass:[UILocalNotification class]])
        {
            UILocalNotification *notif1 = (UILocalNotification *)obj1;
            UILocalNotification *notif2 = (UILocalNotification *)obj2;
            return [notif1.fireDate compare:notif2.fireDate];
        }

        return NSOrderedSame;
 }];

 // if there are any pending notifications -> adjust their badge number
 if (pendingNotifications.count != 0)
 {
     //do something
 } 
```

# android - 微调器 setOnItemSelectedListener 没有启动

> ID：11290664
> 
> 赞同：0
> 
> 时间：2012-07-02T09:03:46.807
> 
> 标签：android, spinner

每个产品我都有一个微调器。微调器有产品选项（如重量 10 磅、20 磅等），也有二级选项，如颜色。

为此，我想让客户在用颜色绑定相同的微调器后选择第一个重量。但我不能让微调器启动 setOnItemSelectedListener。

谢谢你的时间！

```
ddlOptions = (Spinner) lnr.findViewById(R.id.ddlOptions);
ddlOptions.setId(products.get(i).ID);
SpinnerBind(ddlOptions, products.get(i).ID, -1);

ddlOptions.setOnItemSelectedListener(new OnItemSelectedListener() {
    int first = 0;
    int ProductId = ddlOptions.getId();

    @Override
    public void onItemSelected(AdapterView <? > parentView, View selectedItemView, int position, long id) {
        if (first != 0) {
            SpinnerBind(ddlOptions, ProductId, mItems.get(position).getId());
        } else first = 1;
    }

    @Override
    public void onNothingSelected(AdapterView <? > parentView) {
        // your code here
    }

});

public static class Element {
    private String mText;
    private int mId;

    public Element(String text, int id) {
        mText = text;
        mId = id;
    }

    public int getId() {
        return mId;
    }

    public void setId(int id) {
        mId = id;
    }

    public String getmText() {
        return mText;
    }

    public void setmText(String mText) {
        this.mText = mText;
    }

    @Override
    public String toString() {
        return mText;
    }
}

private List < Element > mItems;

public void SpinnerBind(Spinner ddlOptions, int ProductId, int ParentId) {
    mItems = new ArrayList < MainScreen.Element > ();
    ArrayList < String > optionNames = new ArrayList < String > ();
    ArrayList < ProductOption > productOptions = this.dhn.GetProductOptions(ProductId, ParentId);

    for (int i = 0; i < productOptions.size(); i++) {
        mItems.add(new Element(productOptions.get(i).OptionName, productOptions.get(i).ID));
    }

    ArrayAdapter < MainScreen.Element > adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, android.R.id.text1, mItems);

    ddlOptions.setAdapter(adapter);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:18:57.707

这是个愚蠢的问题。只需要微调器上的第二个项目。选择相同的项目时，微调器不会触发。

# apache - 带条件的 Apache HTTPD 重定向

> ID：11290667
> 
> 赞同：0
> 
> 时间：2012-07-02T09:03:54.700
> 
> 标签：apache, redirect

我必须将任何**http://www.mycompany.com/old**重定向到**http://www.mycompany.com/new**。

问题是，我必须保留**http://www.mycompany.com/old/images/bg.jpg**。我目前使用 REDIRECT PERMANENT，它将所有内容重定向到新的子目录。

我如何做到这一点，保留这个[http://www.mycompany.com/old/images/bg.jpg](http://www.mycompany.com/old/images/bg.jpg)并重定向除此之外的所有内容？感谢您的及时回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:19:35.317

一切都井然有序；*首先*重定向或别名该 URL ，然后执行其余部分。

并具体查看标志（http://httpd.apache.org/docs/current/mod/mod_rewrite.html）：

```
L | last 
```

这是“立即停止重写过程并且不再应用任何规则。特别注意每个目录和 .htaccess 上下文的警告（另请参见 END 标志）。详细信息......”

因此，使用 L 对 ^/images/bg.jpg 进行空重写将仅免除该条目。

如果它确实是一个 URL，您也可以用 ! 并首先执行 RewriteCond !^/images/bg.jpg - 然后执行新/旧重写。

```
RewriteCond !^/images...etc
RewriteRule /old(.*) /new$1 R=... 
```

甚至

```
RewriteCond !^/images1...etc AND
RewriteCond !^/images2...etc AND
RewriteCond !^/images3...etc
RewriteRule /old(.*) /new$1 R=... 
```

德。

# android - 发送 AJAX POST 请求

> ID：11290672
> 
> 赞同：1
> 
> 时间：2012-07-02T09:04:18.600
> 
> 标签：android, ajax, post

我正在编写一个将与站点交互的应用程序。在该站点中，身份验证是通过 AJAX POST 请求进行的。如何在我的 Android 应用程序中执行该请求？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T09:55:01.223

你必须在这里区分一下：

**AJAX**只是从客户端浏览器向网站发起[HTTP 发布请求的技术。](https://de.wikipedia.org/wiki/Hypertext_Transfer_Protocol#HTTP_POST)在您的情况下，您希望从 Java 应用程序发送该**HTTP Post 请求。**

首先，您必须找出请求的 URL 以及在该请求中发送的键值对，您可以通过分析 AJAX 代码或使用某些浏览器插件或[Wireshark](https://www.wireshark.org/)向您显示原始 POST 请求来做到这一点。`HttpClient`然后您可以使用例如 Apache （Android SDK 中已经提供）提交该请求。要了解如何做到这一点，请查看[此答案](https://stackoverflow.com/a/3325065/1467115)。

# ios - insertNewObjectForEntityForName:inManagedObjectContext: 未能分配 persitentStore

> ID：11290675
> 
> 赞同：0
> 
> 时间：2012-07-02T09:04:22.857
> 
> 标签：ios, core-data

在开始使用配置（因此有多个存储文件）后，托管对象上下文保存操作由于缺少新插入对象的持久存储文件信息而失败。

苹果在以下声明`assignObject:toPersistentStore:`：

> 仅当接收者的持久存储协调器管理多个在其配置中具有对象实体的可写存储时，才需要使用此方法。在托管对象模型中维护配置可以消除在许多情况下直接调用此方法的需要。如果接收者的持久存储协调器只管理一个可写存储，或者如果只有一个存储在其模型中具有对象的实体，则对象将自动分配给该存储。

所以我明白，只要给定的实体**只**分配给一个配置（一个商店文件），它就会自动分配给正确的商店。

如果我检查协调器的持久存储，它会列出 2 个可用存储。检查模型`entitiesForConfiguration:`我可以看到实体已正确分配给任一配置。

但是，如果我将一个对象插入到模型中，通过`[[managedObject objectID] persistentStore]`它的 always寻找持久存储`nil`？

我错过了什么/某处吗？

* * *

至少这个问题可以解决。我已经在我的网站上为所有觉得被考虑的人提供了类别（和解释）。
[NSEntityDescription 上的一个类别以及一个解释。](http://berndrabe.de/blog "NSEntityDescription 类别")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:34:04.540

在我看来，您有一个绑定到默认配置的持久存储。我使用像您这样的设置，但只将一个持久存储绑定到自定义配置 1，另一个绑定到自定义配置 2。因此默认配置没有存储。

通过这种设置，我从来没有遇到过没有将对象分配给商店的问题。

# wpf - 使用文本框对 WPF 数据网格进行排序

> ID：11290677
> 
> 赞同：0
> 
> 时间：2012-07-02T09:04:25.490
> 
> 标签：wpf, vb.net, datagrid

我的应用程序上有一个数据网格，它从数据库中获取数据。这是通过将其放入数据表然后使用 dataGrid1.ItemsSource = DT.DefaultView 显示它来工作的。

我还有一个将用作搜索框的文本框。我希望搜索框搜索数据网格并显示正确的数据。根据用户在搜索框中的输入，不仅显示突出显示，而且实际上使数据消失或重新出现。

我搜索了多个论坛，但没有找到适用于我的应用程序的解决方案。因此，如果有人能给我一个解决方案，我将不胜感激。

编辑，对问题进行排序

```
Private Sub txtSearchBox_TextChanged(ByVal sender As System.Object, ByVal e As System.Windows.Controls.TextChangedEventArgs) Handles txtSearchBox.TextChanged

    If txtSearchBox.Text = "" Then
        dataGrid1.ItemsSource = DT.DefaultView 'puts the data in to the datagrid
        DT.DefaultView.RowFilter = Nothing
    Else
        chosenFilter = txtSearchBox.Text

        'sets the datagrid filter
        DT.DefaultView.RowFilter = "TYPEID LIKE '%" & chosenFilter & "%'"
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:59:46.440

有许多选项可以解决您的问题。

**1) 在 CollectionView 上使用过滤器**

在代码后面/ViewModel 中创建 ListCollectionView。将数据项放入 collectionsView 并将 DataGrid Itemssoure 绑定到它。然后将过滤器委托传递给 CollectionView，它根据 TextInput 过滤项目。将处理程序附加到文本框 TextChanged 事件，以便在文本更改时刷新/过滤 CollectionView。此处也对此进行了说明：[如何从集合中过滤项目？](http://bea.stollnitz.com/blog/?p=31)

**2) 使用 Jeff Wilcox AutocompleteBox 并实现自定义 SelectionAdapter**

这有点棘手，但恕我直言更优雅。您需要 Jeff Wilcox AutoCompleteBox，它包含在 WPF Toolkit - 2010 年 2 月版本中。您可以从这里下载它：[WPF Toolkit Feb 2010](http://wpf.codeplex.com/releases/view/40535)。此处解释了这个非常有用的控件的功能：[在 WPF 工具包中使用 AutoCompleteBox](http://iserialized.com/using-the-autocompletebox-in-the-wpf-toolkit/)和此处[的 AutoCompleteBox 控件：缺少的指南](http://www.jeff.wilcox.name/2008/11/autocompletebox-missing-guide/)。此处解释了如何实现自定义选择适配器：[Page Up/Page Down 适配器](http://www.jeff.wilcox.name/2008/12/pageup-pagedown/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:15:03.633

将搜索框中的更改应用到网格的 ItemsSource。这就是您所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:35:38.147

```
Private Sub txtSearchBox_TextChanged(ByVal sender As System.Object, ByVal e As System.Windows.Controls.TextChangedEventArgs) Handles txtSearchBox.TextChanged

If txtSearchBox.Text = "" Then
    dataGrid1.ItemsSource = DT.DefaultView 'puts the data in to the datagrid
    DT.DefaultView.RowFilter = Nothing
Else
    chosenFilter = txtSearchBox.Text

    'sets the datagrid filter
    DT.DefaultView.RowFilter = "TYPEID LIKE '%" & chosenFilter & "%'"
End If

End Sub 
```

# oracle - Oracle Server 11g：如何禁用远程连接？

> ID：11290681
> 
> 赞同：2
> 
> 时间：2012-07-02T09:04:47.173
> 
> 标签：oracle, connection

如何禁用与 Oracle Server 11g 的远程连接？
一种方法是，我可以对端口 1521 使用防火墙。
是否可以禁用远程连接并仅保留 Oracle Server 的本地连接而没有防火墙但仅使用 Oracle Server 设置？
例如，SQL Server 2008 (Express) 具有远程连接服务：SQL Browser。如果它没有运行，就不可能远程连接到服务器。
Oracle Server 的方式是否类似？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:31:41.957

`localhost`您可以在 address或上设置您的侦听器`127.0.0.1`，这意味着它仅在该机器上可见。防火墙不会有任何东西 - 机器的外部 IP 地址上的端口 1521 上不会有任何监听。您可以使用 来确认`netstat`。

您不能直接从数据库中执行此操作，如果这就是您所说的“仅使用 Oracle 服务器设置”的话；所有远程连接都通过侦听器并传递给数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:58:54.340

如果只想本地连接，不要启动Oracle Listener，只使用ORACLE_SID连接数据库。只要侦听器正在运行，就可以远程访问数据库。

你没有解释为什么你有这个要求，所以我开始猜测。能够进行应用程序维护可能是一个很好的理由。如果是这样，为什么不使用受限会话权限？在这种情况下，将实例设置为受限会话，以便只有具有受限会话权限的用户才能连接到数据库实例。通常只有特定的管理员帐户才应具有此权限。

```
alter system enable restricted session; 
```

*   停止在维护期间不应该存在的现有会话。
*   进行维护。

    更改系统禁用受限会话；

我希望这有帮助。

# java - 无法从位于包中的命令行运行 java 程序

> ID：11290682
> 
> 赞同：-1
> 
> 时间：2012-07-02T09:04:57.190
> 
> 标签：java, command-line, command-prompt

请参阅以下代码，并驻留在填充目录中

我的包.pack1

```
package mypack.pack1;

public class myclass
{
    public static void main(String args[])
    {
        System.out.println("KKKKKKKKKKKKKKKKKKKKKKKKKKKKKK");
    }
} 
```

请参阅以下屏幕截图。那是错误的。

而且我不想在类路径中添加任何东西，因为我在特定的目录中并且它必须工作。

为什么它不起作用.??????

![在此处输入图像描述](../Images/42268939de70586a0c2d933d50c611f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:13:51.700

要执行`myClass`包中的主类`mypack.pack1`，命令是

```
java mypack.pack1.myClass 
```

但是包含包树根目录（即包含 的目录）的目录（或 jar）`mypack`必须在类路径中，以便 java 找到该类。所以在你的情况下完整的命令是

```
java -cp F:\ mypack.pack1.myClass 
```

这个命令可以从你想要的任何目录运行。

旁注：按照惯例，Java 中的所有 Java 类都以大写字母开头。你的类应该被命名`MyClass`以尊重这些约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:17:39.557

它不起作用，因为您已经在该目录下 (mypack\pack1)。

按原样运行它

```
F:\ directory 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:08:21.407

您需要从`F:\`目录运行它

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T09:09:12.047

解决方案1：在命令提示符下运行以下命令：

```
javac myclass.java
java myclass 
```

解决方案 2：在命令提示符下运行以下命令：

```
cd ..
cd..
javac mypack.pack1.myclass.java
java mypack.pack1.myclass 
```

问题是您已经在`F:\mypack\pack1`目录中。所以你不需要指定`mypack.pack1.myclass`. 如果你想以同样的方式运行它，直接从 F: 目录运行它。我的意思是执行`cd..`2 次并运行你的命令。

# jquery - 如何调整偏移量（）？

> ID：11290686
> 
> 赞同：3
> 
> 时间：2012-07-02T09:05:12.917
> 
> 标签：jquery

我的意思是我有这个代码：

```
<script>
        $(document).ready( function() {
            $('html, body').animate({
             scrollTop: $(".error").offset().top
            }, 1500);
        });
</script> 
```

它工作正常。因此，它滚动到第一个 .error。这没关系，但我想在屏幕上滚动一点，例如向上滚动 20 像素，以便更好地查看有错误的整个输入字段。现在它位于浏览器屏幕的边缘。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T09:06:20.690

像这样？

```
scrollTop: $(".error").offset().top - 20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:06:45.573

```
....
scrollTop: $(".error").offset().top - 20 
```

# filter - 如何获取 HBase 中的最大行键？

> ID：11290687
> 
> 赞同：2
> 
> 时间：2012-07-02T09:05:13.103
> 
> 标签：filter, hadoop, hbase, max, key-value

如何获得`rowkey`HBase 表中的最大值？

我有一个有两行的表：

```
TT-0001 column=cf:col-1, timestamp=1341218075789, value=abc
TT-0002 column=cf:col-1, timestamp=1341218075789, value=abc 
```

我想得到row2（rowkey的最大值）。

我如何在 Hbase 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:25:31.863

使用您选择的行键，您可以简单地返回您表的“最后”行并仅打印行键（因为我假设您只是增加“TT-”后面的数字）。您还可以使用将发出值的[KeyOnlyFilter](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/KeyOnlyFilter.html)，并且您可以使用自己的方法来检查哪个行键是最大的。

您可能应该查看行[键设计](http://hbase.apache.org/book/rowkey.design.html)，尤其是所提供链接的第 6.3.3 节，因为我不推荐像您生成的行键。如命名部分所述，最新、最新的行将是第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T13:39:39.737

HTable 类的 getRowOrBefore() 方法将帮助我们做到这一点。例如，

```
HTable table=new HTable(conf,"test");
Result result=table.getRowOrBefore(Bytes.toBytes("TT-9999"),Bytes.toBytes("colfam"));
System.out.println(Bytes.toString(result.getRow())); 
```

# c# - 使用 Linq to sql 概念在 wpf 中更新记录的问题

> ID：11290688
> 
> 赞同：2
> 
> 时间：2012-07-02T09:05:16.957
> 
> 标签：c#, wpf, linq-to-sql

```
 MyDatatBaseDataContext MyDB = new MyDatatBaseDataContext();
        var _Update = from u in MyDB.Employees where u.Address == "WestSreet" select u;
        foreach (var item in _Update)
        {
            item.Address = "WS";
        }
        MyDB.SubmitChanges();
        var Select = from s in MyDB.Employees select s;
        grd_1.ItemsSource = Select; 
```

使用上面的代码，我可以更新记录，我也可以在原始表数据和 DataGrid 中看到记录修改。原始表已成功更新。

```
 MyDatatBaseDataContext MyDB = new MyDatatBaseDataContext();
        var _Udate_2 = MyDB.Employees.Where(u => (u.Address == "WestSreet"));
        foreach (var item in _Udate_2)
        {
            item.Address = "WS";
        }
        var Select = from s in MyDB.Employees select s;

        grd_1.ItemsSource = Select; 
```

使用上面的代码，我可以更新记录。我可以在 DataGrid 中看到修改 **但在原始表数据中看不到**记录修改。原始表没有更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:08:06.463

你错过了一个

```
 MyDB.SubmitChanges(); 
```

在第二段代码上。

应该是这样的：

```
 MyDatatBaseDataContext MyDB = new MyDatatBaseDataContext();
     var _Udate_2 = MyDB.Employees.Where(u => (u.Address == "WestSreet"));
    foreach (var item in _Udate_2)
    {
        item.Address = "WS";
    }
    MyDB.SubmitChanges();
    var Select = from s in MyDB.Employees select s;

    grd_1.ItemsSource = Select; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:08:43.013

因为在第二个代码中你没有打电话`MyDB.SubmitChanges();`

```
MyDatatBaseDataContext MyDB = new MyDatatBaseDataContext();
        var _Udate_2 = MyDB.Employees.Where(u => (u.Address == "WestSreet"));
        foreach (var item in _Udate_2)
        {
            item.Address = "WS";
        }
MyDB.SubmitChanges(); // Need to call that 
```

# javascript - 如何清理粘贴上的输入？一个小小的 WYSIWYG 编辑器

> ID：11290693
> 
> 赞同：0
> 
> 时间：2012-07-02T09:05:36.167
> 
> 标签：javascript, jquery, editor, wysiwyg, paste

嘿 Stackoverflow 社区，

我编写了一个示例代码，应该在粘贴时清理 HTML 代码，但它没有按预期工作。在每次粘贴时，它都会复制`<textarea>`并且粘贴不起作用。

这是 JsFiddle：http: [//jsfiddle.net/Kxmaf/214/](http://jsfiddle.net/Kxmaf/214/)

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:39:16.710

**新版本：http:** [//jsfiddle.net/Kxmaf/218/](http://jsfiddle.net/Kxmaf/218/)

你是对的`setTimeout()`，不知道*粘贴*事件延迟。现在，我在 FF 上看到，这`document.execCommand()`有点错误，所以我简化了很多（不再关注，execCommand）：

```
$editor.on('paste, keydown', function() {
    var $self = $(this);            
    setTimeout(function(){ 
        var $content = $self.html();             
        $clipboard.val($content);
    },100);
}); 
```

* * *

这个怎么样：http: [//jsfiddle.net/Kxmaf/215/](http://jsfiddle.net/Kxmaf/215/)

```
$editor.on('paste, keydown', function() {
     var $self = $(this),
         $content = $self.html();       
     $clipboard.val('').focus();
     document.execCommand('insertHTML', false, $content);
     $self.html($content);
     placeCaretAtEnd($self);                
}); 
```

没有了`setTimeout()`。我也添加了 keydown ，因为它对我来说听起来更好；）如果你愿意，你可以删除它。这样做：

*   获取#content 的内容
*   删除 textarea 内容并专注于它。
*   将 #content 中的内容插入到 textarea
*   替换#content的内容，以防它被删除或替换（这是我测试的一部分，我不知道`$self.html($content);`现在是否相关。
*   在#content 末尾添加插入符号。

`placeCaretAtEnd()`来自[https://stackoverflow.com/a/4238971/460368](https://stackoverflow.com/a/4238971/460368)我稍微修改了一下。

# php - PHP多语言日期：howto？

> ID：11290702
> 
> 赞同：3
> 
> 时间：2012-07-02T09:06:41.030
> 
> 标签：php, datetime, translation

注意：这不是[Translating PHP date() for Multilingual Site](https://stackoverflow.com/questions/4975854/translating-php-date-for-multilingual-site)的副本。我已经读过了！

对不起，我首先要解释一下我的框架是如何工作的，这样你就可以准确地理解我的问题出在哪里：

这是我的 PHP 代码的工作原理（粗略的原则）。让我们以一个想查看 URL 的人为例`http://myweb.com/valid.php`：

*   在文件`valid.php`中，代码包含正确的类定义，然后创建一个对象并调用`display()`显示页面的函数。
*   在文件`valid.php`中，当创建对象时，它会分析主机，并且在主机中有语言（, , ...），默认语言（如果没有找到）是英语`http://`**`us`**`.myweb.com/``http://`**`cn`**`.myweb.com/``http://`**`fr`**`.myweb.com/`
*   然后我加载一个缓存的 PHP 文件，其中是翻译。这是一个`translation`对象，我**`$t`**简称为
*   从现在开始，每当我想要翻译时，我都会做类似的事情`$t->get('my_string')`。

让我们以 2 种语言文件为例：

*   2个语言文件：`cache.us.php`和`cache.fr.php`
*   在`cache.us.php`你有这样的一行：`$thanks_for_the_fish = "Thanks for the fish"`.
*   在`cache.fr.php`你有这样的一行：`$thanks_for_the_fish = "Merci pour le poisson"`.
*   我构建我的页面，包含正确的语言文件，然后调用`$t->get('thanks_for_the_fish')`并翻译它。

现在我的问题来自日期格式。使用短日期格式，这不是问题：

*   在`cache.us.php`：`$short_date_format = "m/d/Y, H:i"`。
*   在`cache.fr.php`：`$short_date_format = "d/m/Y à H:i"`。

但是对于**长**日期格式，我只是在学习法语，我从以下内容开始：

*   在`cache.fr.php`：`$long_date_format = "%s, %d %s %d"`。
*   然后所有的日子：`$sunday = "dimanche"`，`$monday = "lundi"`等等
*   然后在我的翻译代码中：

像这样的东西（仔细阅读代码中的注释，我的问题就在里面！）：

```
static private $_TabStrDaysOfWeek = array(
    0 => 'sunday',
    1 => 'monday',
    ...,
    6 => 'saturday'
);
public function translateDate($date_time)
{
    $long_day = $this->tr->get(
        $this->_TabStrDaysOfWeek[ $date_time->format('w') ]
    );
    /*

    here's where I'm stuck:
    what could be the code to be able to display:
    - english:
      Monday, 1st September 2006
      Tuesday, 2nd September 2006
      Wednesday, 3rd September 2006
      Thursday, 4th September 2006

    - french:
      Lundi, 1 septembre 2006
      Mardi, 2 septembre 2006
      Mercredi, 3 septembre 2006
      Jeudi, 4 septembre 2006

    - arabian!!:
      1 - Don't know
      2 - Don't know
      3 - Don't know
      4 - Don't know
    */
} 
```

...我说阿拉伯语是因为我迟早会需要它，普通话也是如此。我所有其他翻译问题都解决了，但这个！

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T18:12:33.483

对于国际化任务，我强烈建议使用 PHP [intl](http://cz2.php.net/manual/en/intro.intl.php "国际")扩展。它包含几个用于常见国际化任务的类，例如日期/时间格式、数字格式、字符串音译等。具体来说，[IntlDateFormatter](http://cz2.php.net/manual/en/class.intldateformatter.php)类能够为任何可用的语言环境格式化（和解析）日期时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:41:23.480

以下是我的做法：似乎除了切换并分别处理每种语言之外别无可能：

* * *

这是我的缓存中的内容：

```
$this->jour_dimanche = dimanche
$this->jour_lundi = lundi
$this->jour_mardi = mardi
$this->jour_mercredi = mercredi
$this->jour_jeudi = jeudi
$this->jour_vendredi = vendredi
$this->jour_samedi = samedi

$this->mois_janvier = janvier
$this->mois_fevrier = février
$this->mois_mars = mars
$this->mois_avril = avril
$this->mois_mai = mai
$this->mois_juin = juin
$this->mois_juillet = juillet
$this->mois_aout = août
$this->mois_septembre = septembre
$this->mois_octobre = octobre
$this->mois_novembre = novembre
$this->mois_decembre = décembre

// long date format = 'day, (month number) (month) (year)'
// '%s, %d %s %d' => 'Mardi, 2 juillet 2012'
$this->date_format_long = %\s, j %\s Y à H:i 
```

...还有我的 PHP 代码：

```
public function translateDate($date_time, $first_upcase=true)
{   
    switch ($this->_trad->getLang()) {
        /* TODO: all other languages */
        case 'us':
        case 'ar':
        case 'es':
        case 'cn':
            throw new Exception("not handled yet");
            break;

        default:
            /* default = french */
            $day = $this->_trad->get(
                self::$_TabStrDaysOfWeek[ $date_time->format('w') ]
            );  
            $month = $this->_trad->get(
                self::$_TabStrMonths[ $date_time->format('j') ]
            );  
            $ret = sprintf(
                $date_time->format(
                    $this->_trad->get('date_format_long')
                ),  
                $day,
                $month
            );  
            if ($first_upcase) {
                $ret = ucfirst($ret);
            }   
            break;
    }   
    return $ret;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T19:07:11.993

一个简单的解决方案，看看它可能对你有帮助 [https://github.com/LeonardoCaitano/MyDateTime](https://github.com/LeonardoCaitano/MyDateTime)

# android - 处理所有异常的 Http 连接，并在 android 中使用 url 发送和接收数据

> ID：11290706
> 
> 赞同：0
> 
> 时间：2012-07-02T09:06:47.667
> 
> 标签：android

嗨，我正在开发 android 中的 Web 服务应用程序。我需要一个类来处理所有异常并使用带有参数的 URL 发送接收 json 数据。请帮助我任何一个好的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:15:17.740

这是我编写的通过 POST 发送数据的帮助程序类的片段。

```
List<NameValuePair> params = new ArrayList<NameValuePair>();

params.add(new BasicNameValuePair("param1", param1));
params.add(new BasicNameValuePair("param2", param2));

DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("http://www.blabla.com/posterome");
httpPost.setEntity(new UrlEncodedFormEntity(params)); 
```

并得到回应...

```
HttpResponse httpResponse = httpClient.execute(httpPost); 
```

此片段中使用的类在`org.apache.http.*`包中。

至于 JSON，`JSONObject`就足够了。网络上到处都有关于如何正确使用它的示例。只是谷歌它。

# asp.net - 输入按钮随机浮动

> ID：11290708
> 
> 赞同：0
> 
> 时间：2012-07-02T09:06:59.067
> 
> 标签：asp.net, css

我在 IE7 上的一个输入按钮遇到了这个问题，该按钮用于搜索产品（正如您可以从图像中猜到的那样），由于某种原因，在 IE7 中，这个按钮被扔到随机位置，而不是固定在它的设置位置应该。这只发生在 IE7 中，而不是任何浏览器，所以我很好奇是否有人知道它为什么会这样做？（另外 IE7 支持不是我的选择，必须做。）

![正确按钮](../Images/8dc843f29755bdbdff97aa569c18f79e.png) ![不正确的按钮](../Images/8f20910b940d148531738d9c4edbf4e1.png)

我的CSS：

```
dl#Navigation input.Button {
background: none repeat scroll 0 0 #FFFFFF;
border: 2px solid #3B9BD9;
color: #000000;
}
dl#Navigation input.Smallest {
cursor: pointer;
width: auto;
} 
```

html:

```
 <dt>Search Products<br />
    <web:SearchTextBox runat="server" id="SearchKeyword" class="Text" />
    <web:SearchSubmit ID="SearchSubmit1" runat="server" SearchBoxes="SearchKeyword" Text="Go" URL="~/catalogue/results.aspx" Class="Smallest Button" />
    </dt> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:53:52.483

我建议做的一件事是检查父容器（不知何故在`dt`这里）具有适当的宽度来容纳两个元素，然后将`width`属性设置为`input`元素。

但是，还有一些其他方法可以定位元素并获得相同的结果。使用`floats`例如会产生同样的效果。`float: left`在两个元素 (`input`和`button`)上使用。但要做到这一点，您需要了解浮点数的特性以及如何处理它们。

Ps 关于您的示例 css 代码的另一条建议是检查您的选择器。尝试使用以下 css 而不是您的 css，什么都不会改变（希望 :)），但是**选择器**的效率更好

```
#Navigation .Button {
    background: #FFF;
    border: 2px solid #3B9BD9;
    color: #000;
}
#Navigation .Smallest {
    cursor: pointer;
} 
```

# php - PHP 具有两个级别权重的随机数

> ID：11290715
> 
> 赞同：0
> 
> 时间：2012-07-02T09:07:30.143
> 
> 标签：php, random

我有越来越多的所谓的战斗分组在不同的等级。我想随机化显示给用户的战斗。展示率由排名第一（排名越高 - 展示次数越多）定义的展示率，第二个级别是从该排名的收藏中获得随机战斗。排名中的每场战斗都有自己的印象数。

在 $battles 中，我从数据库中获取战斗，并执行一些计算来定义显示率和每个等级应该获得的印象。

```
foreach ($battles as $el => &$values) {
    $values['show_rate'] = $values['rank'] * 100 / $totals['sum_of_ranks'];
    $values['dedicated_impressions'] = $totals['total_battle_impressions'] * $values['show_rate'] / 100;
    $values['impressions_left'] = $values['dedicated_impressions'] - $values['sum_of_impressions'];
} 
```

这是上一个循环的结果。在关键`battle_ids`我有这个等级的战斗的ID，在`battle_impressions`我有以相同方式排序的相同战斗的印象。

```
 $battles = array(
    0 => array(
        'battles_in_rank' => '1',
        'battle_ids' => array(
            0 => '28',
        ),
        'battle_impressions' => array(
            0 => '3',
        ),
        'sum_of_impressions' => '3',
        'rank' => '0',
        'show_rate' => 0,
        'dedicated_impressions' => 0,
        'impressions_left' => -3,
    ),
    1 => array(
        'battles_in_rank' => '4',
        'battle_ids' => array(
            0 => '27',
            1 => '19',
            2 => '18',
            3 => '17',
        ),
        'battle_impressions' => array(
            0 => '0',
            1 => '0',
            2 => '0',
            3 => '0',
        ),
        'sum_of_impressions' => '0',
        'rank' => '1',
        'show_rate' => 6.6666666666667,
        'dedicated_impressions' => 230.53333333333,
        'impressions_left' => 230.53333333333,
    ),
    2 => array(
        'battles_in_rank' => '2',
        'battle_ids' => array(
            0 => '7',
            1 => '3',
        ),
        'battle_impressions' => array(
            0 => '0',
            1 => '3',
        ),
        'sum_of_impressions' => '3',
        'rank' => '3',
        'show_rate' => 20,
        'dedicated_impressions' => 691.6,
        'impressions_left' => 688.6,
    ),
    3 => array(
        'battles_in_rank' => '2',
        'battle_ids' => array(
            0 => '12',
            1 => '5',
        ),
        'battle_impressions' => array(
            0 => '17',
            1 => '1',
        ),
        'sum_of_impressions' => '18',
        'rank' => '4',
        'show_rate' => 26.666666666667,
        'dedicated_impressions' => 922.13333333333,
        'impressions_left' => 904.13333333333,
    ),
    4 => array(
        'battles_in_rank' => '1',
        'battle_ids' => array(
            0 => '2',
        ),
        'battle_impressions' => array(
            0 => '3434',
        ),
        'sum_of_impressions' => '3434',
        'rank' => '7',
        'show_rate' => 46.666666666667,
        'dedicated_impressions' => 1613.7333333333,
        'impressions_left' => -1820.2666666667,
    ),
); 
```

在我获得所有这些信息后，我执行清理以获得随机函数的良好结果。

```
$elements = array();
$weights = array();
foreach ($battles as $el => &$values) {
    $elements[] = array($values['battle_ids'], $values['battle_impressions']);
    $weights[] = $values['show_rate'];
} 
```

这是我目前拥有的随机函数：

```
public function getRandom($values, $weights)
{
    $pos = mt_rand(1, array_sum($weights));
    $em = 0;
    foreach ($values as $k => $v) {
        $em += $weights[$k];
        if ($em >= $pos) {
            if (is_array($v)) {
                return $this->getRandom($v[0], $v[1]);
            } else {
                return $v;
            }
        }
    }
} 
```

我这样称呼它以获得一个随机的战斗ID。

```
$this->getRandom($elements, $weights); 
```

我需要的是拥有 5 或 10 个唯一的随机 ID。

它可以工作，但是这个函数每次调用只给我一个随机元素，当我多次调用它时，我经常得到相同的 id，比如 10 次中有 6 次。

例如，如果我需要 5 场随机战斗，我必须在一个循环中调用该函数，迭代 20-30 次才能获得 5 个独特的随机战斗。如果较高级别的战斗结束了，它应该用较低级别的战斗填充阵列，所以我总是以 5 场战斗（或 10 场）结束。

第二级随机化应该是一个等级的战斗，由他们的印象加权。这就是为什么随机函数是递归的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:11:22.060

您不能在数据库上执行此操作吗？就像是：

```
SELECT * FROM battles ORDER BY Rank DESC, RAND() 
```

**编辑**

如果你想确保更高的等级出现得更频繁，那么我会做这样的事情。假设等级 1 是最低等级，等级 10 是最高等级。

```
SELECT * FROM battles ORDER BY (Rank * RAND()) 
```

# javascript - 使用 javascript 访问速度变量

> ID：11290716
> 
> 赞同：7
> 
> 时间：2012-07-02T09:07:30.780
> 
> 标签：javascript, jquery, html, velocity

```
<head> #set($test = "works")) </head>

<script> 
    var get = "${test}"; // I also tried using '$test' and "$test" also

    alert(get);
</script> 
```

它会提醒**${test}**，但应该打印**works**。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T09:14:39.050

尝试这个...

```
 #set ($test = "works")

  <script type="text/javascript">
       var myvar = "${test}";
       alert (myvar);
  </script> 
```

这肯定有效！！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T09:10:14.693

尝试`var get = "$test";`代替`var get = "${test}";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-25T15:27:34.303

我意识到这个问题很老了，但这对我有用：

```
#set ($test = "hi")
<script>
    alert("$test");
</script> 
```

需要在警报中的变量周围包含引号，因为它是一个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T22:12:17.463

我在使用瓷砖时遇到了这个问题，我让它工作的唯一方法是使用 jstl c:out 标签，比如：

```
var get = "<c:out value='${test}' />"; 
```

这应该可以工作，并记得在页面顶部添加 jstl 包含

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-28T15:32:29.397

就像在 html 中一样使用它：

```
<script> 
    var get = $test;

    alert(get);
</script> 
```

# ios - NSDictionary 填充 JSON 数据

> ID：11290718
> 
> 赞同：0
> 
> 时间：2012-07-02T09:07:44.350
> 
> 标签：ios, jsonkit

我调用一个返回 JSON 的 URL（我使用 JSONKit）。我将它转换为这样的 NSString：

```
[{"name":"aaaaaa","id":41},{"name":"as","id":23},... 
```

等等。我想只用 JSON 的“名称”部分填充 UIPickerView。但是，当用户选择一个名字时，我需要“id”参数，所以我想用 JSON 填充一个 NSDictionary（setValue:id for key:name），这样我就可以得到用户选择的值，并从字典中获取 id。我怎样才能只用 JSON 的“名称”填充一个数组？

我对 JSONKit 库有点迷茫，有什么指导吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:22:40.510

首先，我认为`name`在字典中作为键并不是一个好主意，因为您可以有许多相同的名称。我会`id`作为关键。

现在，你可以做的是：

```
NSString *myJson; //Suppose that this is the json you have fetched from the url
id jsonObject = [myJson objectFromJSONString];
// Now you have an array of dictionaries 
// each one having 2 key/value pairs (name/id)

NSArray *names = [jsonObject valueForKeyPath:@"name"];
NSArray *ids = [jsonObject valueForKeyPath:@"id"];

// Now you have two parallel arrays with names / ids 
```

或者您可以只迭代您的 json 对象并自己处理数据：

```
for (id obj in jsonObject)
{
  NSString *name = [obj valueForKey:@"name"];
  NSNumber *id = [obj valueForKey:@"id"];
  // Do whatever you like with these
} 
```

# java - 配置并连接到 Spring JMX

> ID：11290719
> 
> 赞同：0
> 
> 时间：2012-07-02T09:07:49.223
> 
> 标签：java, spring, jmx

我正在尝试为我的独立 Spring 应用程序配置 JMX 控制台。

我是这样配置的：

应用上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"

    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/aop 
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <!-- Must for auto wiring 
    <context:annotation-config />
    -->

    <context:component-scan base-package="com.fixgw.beans">
    </context:component-scan>

    <bean id="FeedListenerBean" class="com.fixgw.beans.FeedListenerBean">
    </bean>

    <bean id="TriggerBean" class="com.fixgw.test.TriggerBean">
    </bean>

    <bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean" >
    <property name="locateExistingServerIfPossible" value="true" />

    </bean>

    <bean id="exporter" class="org.springframework.jmx.export.MBeanExporter">
        <property name="beans">
            <map>
                <entry key="bean:name=TriggerBean1" value-ref="TriggerBean" />
            </map>
        </property>
        <property name="server" ref="mbeanServer" />
    </bean>
</beans> 
```

还有一个 Trigger bean，我希望它是在 JMX 中公开的公共方法：

```
public class TriggerBean implements IJmxTriggerBean
{
    static Logger logger = Logger.getLogger(TriggerBean.class);

    FeedListenerBean fe = null;

    public void start()
    {
        try
        {
            // init();
            PropertyConfigurator.configure(FixGWConstants.LOG4J_PATH);
            ApplicationContext context = new ClassPathXmlApplicationContext(FixGWConstants.APPLICATION_CONTEXT_XML);
            fe = (FeedListenerBean) context.getBean("FeedListenerBean");
            Thread t=new Thread()
            {
                public void run()
                {
                    while (true)
                    {
                        System.out.println("a");
                        try
                        {
                            Thread.sleep(1000);
                        }
                        catch (InterruptedException e)
                        {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
            };
            t.run();
            doTheListen();

        }
        catch (Throwable t)
        {
            logger.error(t);
            System.out.println(t);
        }

    }

    public void doTheListen()
    {
        fe.listen();
    }

}

package com.finbird.fixgw.test;

public interface IJmxTriggerBean
{
    public void doTheListen();
} 
```

1.  这足以配置吗？
2.  现在我应该连接到哪个本地地址：端口才能访问控制台？

谢谢，雷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:12:25.093

您有 JMX 服务器，但需要一个 HTMLAdapter 才能通过浏览器查看这些 bean。例如来自[这篇文章](http://sujitpal.blogspot.com/2006/09/webapp-remote-control-with-jmx-and.html)：

```
 <bean id="htmlAdaptor" class="com.sun.jdmk.comm.HtmlAdaptorServer" init-method="start" />

  <bean id="exporter" class="org.springframework.jmx.export.MBeanExporter">
    <property name="beans">
     <map>
       <entry key="adaptor:name=htmlAdaptor" value-ref="htmlAdaptor" />
       <entry key="bean:name=calculatorConfigBean" value-ref="calculatorConfig" />
     </map>
    </property>
    <property name="server" ref="mbeanServer" />
  </bean> 
```

请注意，我在这里假设 HTML/浏览器访问。有关在代码中配置适配器的 Oracle 教程，请参见[此处。](http://docs.oracle.com/cd/E19206-01/816-4178/6madjde5s/index.html)

# c# - ASP.NET MVC 3 Linq 大写或小写数据库搜索

> ID：11290721
> 
> 赞同：1
> 
> 时间：2012-07-02T09:07:52.917
> 
> 标签：c#, linq, entity-framework

我需要立即帮助。): 我不懂英语。

**ASP.NET MVC 3 Linq 大写或小写包含搜索**

例子：

```
string metin="baris";

var IcerikAra = (from icerik in Context.dbDokumanEditor
join kategori in Context.dbDokumanKategori on 
icerik.KategoriID equals kategori.KategoriID
where icerik.Icerik.toLower().Contains(metin)
select new { 
KategoriID=kategori.
KategoriAd=kategori.KategoriAd
}).ToList(); 
```

**例外**： **堆栈跟踪：**

```
at System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommandentityCommand, CommandBehavior behavior)
at System.Data.Objects.Internal.ObjectQueryExecutionPlan.Execute[TResultType](ObjectContext context, ObjectParameterCollection parameterValues)
at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable.GetEnumerator()
at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator()
at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable.GetEnumerator()
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
at Plus.Areas.DokumanEditor.Controllers.DokumanController.DokumanIcerikAramaBaslat(String metin) 
```

**错误消息：**执行命令定义时发生错误。有关详细信息，请参阅内部异常。

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:13:32.453

在 where 子句中使用 String.Equals

```
where icerik.Icerik.Equals(metin,StringComparison.CurrentCultureIgnoreCase) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:42:47.943

我解决如下：

```
database datatype text -> old
database datatype nvarchar(MAX) -> new

var IcerikAra = (from icerik in Context.dbDokumanEditor
                 join kategori in Context.dbDokumanKategori on icerik.KategoriID equals kategori.KategoriID
where icerik.Icerik.ToLower().Contains(metin)
select new { 
     KategoriID=kategori.KategoriID,
     KategoriAd=kategori.KategoriAd
}).ToList(); 
```

# algorithm - Hadoop 上的凝聚聚类和支持向量机

> ID：11290732
> 
> 赞同：0
> 
> 时间：2012-07-02T09:08:35.120
> 
> 标签：algorithm, hadoop, mapreduce, machine-learning, weka

我想实现结合支持向量机的凝聚聚类算法。我希望它的工作方式是这样的：

1.  使用大量训练数据训练支持向量机分类器。将训练好的模型放在一边。训练数据实际上是一大组实体对。每个实体都是一个数字数组（双精度）。SVM 将给定的对分类为相同/不同。

2.  给定大量实体（基本上是双值数组），通过使用经过训练的 SVM 将给定实体对分类为相同/不同，找到两个最接近的实体（数组）。如果它们相同，则继续将它们聚类。

3.  只要我们看到集群中的每个实体都可以与另一个集群中的每个其他实体配对，就可以继续使用凝聚集群机制。

4.  当我们发现我们有两个集群时，结束凝聚聚类机制，其中一个集群中至少存在一个实体，另一个集群中存在另一个实体，当给 SVM 时将被分类为不相同。

5.  在输出中打印/存储输出簇。

现在，我已经在一台独立机器上使用 WEKA 的 SVM 和 Agglomerative Clusterer 完成了所有这些工作。当涉及到大数据时，我需要在 Hadoop 之上执行此操作。我知道 Mahout 包含 SVM，但它不包含 HAC。

一世。是否可以将 WEKA 与 Hadoop 一起使用？ii. 如果我打算自己在 Hadoop 中编写 HAC，如何将经过训练的 SVM 模型存储在 HDFS 中，然后将其用于凝聚集群？我熟悉 Hadoop 框架。

# jpa - JPA (openjpa)、DB2、更新、提交 = 游标名称无效？

> ID：11290742
> 
> 赞同：0
> 
> 时间：2012-07-02T09:09:28.920
> 
> 标签：jpa, db2, websphere, openjpa, sqlexception

尝试使用 JPA（WebSphere-openjpa，DB2）对对象执行简单更新：

```
public T update(T t) {
    synchronized(this) {
        this.em.getTransaction().begin();
        t = this.em.merge(t);
        this.em.getTransaction().commit();
    }
    return t;
} 
```

但在事务提交期间出现“无效游标名称”SQL 异常。任何想法这意味着什么？

```
[3/07/12 12:17:27:586 EST] 00000025 webapp        E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[JAXRSApplication]: <openjpa-2.1.2-SNAPSHOT-r422266:1179900 fatal store error> org.apache.openjpa.persistence.RollbackException: The transaction has been rolled back.  See the nested exceptions for details on the errors that occurred.
FailedObject: prepstmnt 125018062 UPDATE CCHDEVT.TCC_PROPERTY SET COMMENTS = ?, LAST_UPDATED = ? WHERE PROPERTY_NAME = ? [org.apache.openjpa.jdbc.kernel.JDBCStoreManager$CancelPreparedStatement_]
at org.apache.openjpa.persistence.EntityManagerImpl.commit(EntityManagerImpl.java:593)
at com.qbe.config.dao.GenericDAOJpaImpl.update(GenericDAOJpaImpl.java:50)
at com.qbe.config.service.QBEPropertyService.saveProperty(QBEPropertyService.java:42)
at com.qbe.config.web.QBEPropertyResource.save(QBEPropertyResource.java:87)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$VoidOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:167)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1188)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:763)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:454)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1020)
at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3703)
at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:962)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659) 
```

打破它...

```
Caused by: <openjpa-2.1.2-SNAPSHOT-r422266:1179900 fatal general error> org.apache.openjpa.persistence.PersistenceException: The transaction has been rolled back.  See the nested exceptions for details on the errors that occurred.
FailedObject: prepstmnt 125018062 UPDATE CCHDEVT.TCC_PROPERTY SET COMMENTS = ?, LAST_UPDATED = ? WHERE PROPERTY_NAME = ? [org.apache.openjpa.jdbc.kernel.JDBCStoreManager$CancelPreparedStatement_]
at org.apache.openjpa.kernel.BrokerImpl.newFlushException(BrokerImpl.java:2321)
at org.apache.openjpa.kernel.BrokerImpl.flush(BrokerImpl.java:2158)
at org.apache.openjpa.kernel.BrokerImpl.flushSafe(BrokerImpl.java:2056)
at org.apache.openjpa.kernel.BrokerImpl.beforeCompletion(BrokerImpl.java:1974)
at org.apache.openjpa.kernel.LocalManagedRuntime.commit(LocalManagedRuntime.java:81)
at org.apache.openjpa.kernel.BrokerImpl.commit(BrokerImpl.java:1498)
at org.apache.openjpa.kernel.DelegatingBroker.commit(DelegatingBroker.java:933)
at org.apache.openjpa.persistence.EntityManagerImpl.commit(EntityManagerImpl.java:569)
... 45 more 
```

打破它...

```
Caused by: <openjpa-2.1.2-SNAPSHOT-r422266:1179900 fatal general error> org.apache.openjpa.persistence.PersistenceException: Invalid cursor name.
FailedObject: prepstmnt 125018062 UPDATE CCHDEVT.TCC_PROPERTY SET COMMENTS = ?, LAST_UPDATED = ? WHERE PROPERTY_NAME = ? [org.apache.openjpa.jdbc.kernel.JDBCStoreManager$CancelPreparedStatement_]
at org.apache.openjpa.jdbc.sql.DBDictionary.narrow(DBDictionary.java:4878)
at org.apache.openjpa.jdbc.sql.DBDictionary.newStoreException(DBDictionary.java:4838)
at org.apache.openjpa.jdbc.sql.DB2Dictionary.newStoreException(DB2Dictionary.java:596)
at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:136)
at org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:78)
at org.apache.openjpa.jdbc.kernel.BatchingPreparedStatementManagerImpl.flushBatch(BatchingPreparedStatementManagerImpl.java:236)
at org.apache.openjpa.jdbc.kernel.BatchingConstraintUpdateManager.flush(BatchingConstraintUpdateManager.java:63)
at org.apache.openjpa.jdbc.kernel.AbstractUpdateManager.flush(AbstractUpdateManager.java:103)
at org.apache.openjpa.jdbc.kernel.AbstractUpdateManager.flush(AbstractUpdateManager.java:76)
at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.flush(JDBCStoreManager.java:742)
at org.apache.openjpa.kernel.DelegatingStoreManager.flush(DelegatingStoreManager.java:131)
... 52 more 
```

打破它...

```
Caused by: com.ibm.db2.jcc.a.SqlException: Invalid cursor name.
at com.ibm.db2.jcc.a.zc.setCursorName(zc.java:723)
at com.ibm.websphere.rsadapter.DB2UniversalDataStoreHelper.doStatementCleanup(DB2UniversalDataStoreHelper.java:243)
at com.ibm.ws.rsadapter.jdbc.WSJdbcPreparedStatement.closeWrapper(WSJdbcPreparedStatement.java:490)
at com.ibm.ws.rsadapter.jdbc.WSJccPreparedStatement.closeWrapper(WSJccPreparedStatement.java:294)
at com.ibm.ws.rsadapter.jdbc.WSJdbcObject.close(WSJdbcObject.java:240)
at com.ibm.ws.rsadapter.jdbc.WSJdbcObject.close(WSJdbcObject.java:193)
at org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.close(DelegatingPreparedStatement.java:161)
at org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.close(DelegatingPreparedStatement.java:161)
at org.apache.openjpa.jdbc.kernel.BatchingPreparedStatementManagerImpl.flushBatch(BatchingPreparedStatementManagerImpl.java:234)
... 57 more 
```

# git - 这个 git 日志是什么意思？

> ID：11290744
> 
> 赞同：2
> 
> 时间：2012-07-02T09:09:30.663
> 
> 标签：git

这是 git 的最新日志。

```
commit 608991c
Merge: 5c0c062 1fe65f9
Author: foo
Date:   Mon Jul 2 

    Merge branch 'mybranch' of xxx.xxx.xxx.xxx:/myproject into mybranch

    Conflicts:
        bar.c 
```

此日志是否意味着用户 foo 进行了合并操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:28:24.987

如“[合并冲突：冲突和解决方案](http://www.gitguys.com/topics/merging-with-a-conflict-conflicts-and-resolutions/)”中所述，这是解决合并冲突后生成的自动日志消息。

[您可以在函数](https://github.com/git/git/blob/master/builtin/merge.c#L969-L979)中看到内置在[git 源文件`builtin/merge.c`中的消息`suggest_conflicts()`](https://github.com/git/git/blob/master/builtin/merge.c#L969-L979)

```
static int suggest_conflicts(int renormalizing)
{
    const char *filename;
    FILE *fp;
    int pos;

    filename = git_path("MERGE_MSG");
    fp = fopen(filename, "a");
    if (!fp)
        die_errno(_("Could not open '%s' for writing"), filename);
    fprintf(fp, "\nConflicts:\n"); 
```

* * *

从用户的角度来看：

> ### 解决冲突
> 
> 在我们解决了冲突之后（通过`README`为这个 git 合并更改我们想要的文件的方式），我们必须告诉 git 通过将冲突的文件添加到索引来解决冲突。
> 
> 在这种情况下，我们需要添加`README`到 git 索引。
> `git status`然后将不再抱怨`README`文件有冲突：

```
$ git add README
$ git status
# On branch master
# Changes to be committed:
#
#   modified:   README
#   new file:   plan
# 
```

> 我们已准备好提交合并：

```
$ git commit
[master 368a14a] Merge branch 'test' 
```

> git log 命令显示已解决的冲突：

```
$ git log
commit 368a14a034eda95ee401bb56b3bb8df04b84ab0c
Merge: 3330113 c406564
Author: Tim Flagg 
Date:   Fri Mar 25 13:26:10 2011 -0700

    Merge branch 'test'

    Conflicts:
        README 
```

> `gitg --all`显示合并：

![在日志中合并](../Images/4759ac94d171c673b944597e0619ec41.png)

# iphone - UITableView dataSource 必须从 tableView:cellForRowAtIndexPath 返回一个单元格

> ID：11290746
> 
> 赞同：4
> 
> 时间：2012-07-02T09:09:34.180
> 
> 标签：iphone, ios5

我在[https://stackoverflow.com/search?q=UITableView+dataSource+must+return+a+cell+from+tableView%3AcellForRowAtIndexPath](https://stackoverflow.com/search?q=UITableView+dataSource+must+return+a+cell+from+tableView%3AcellForRowAtIndexPath)进行了搜索，但我知道我需要检查单元格是否为零，但我的单元格是自定义的，我不使用 xib，我使用故事板。我也在 storyboard.as [http://i.stack.imgur.com/g0rRO.png上选择类 CustomPlaceTableViewCell](https://i.stack.imgur.com/g0rRO.png)

代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
CustomPlaceTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    //if ([cell isKindOfClass:[CustomPlaceTableViewCell class]]) { cell = (CustomPlaceTableViewCell *)cell; }
//retrieve the place info
Place *place = [self.placeDataController objectInPlaceListAtIndex:indexPath.row];

//set the cell with place info
if (place.name)
{
    cell.nameLabel.text =place.name;
}
else
{
    cell.nameLabel.text = @"PortAura";
}

 if (place.distance)
{
    cell.distanceLabel.text = place.distance;    
}
else
{
    cell.distanceLabel.text = @"PortAura";
}

 return cell;

}

CustomPlaceTableViewCell.m
@interface CustomPlaceTableViewCell : UITableViewCell{
  UILabel *nameLabel;
  UILabel *distanceLabel;
  UILabel *addressLabel;
}
@property (nonatomic) IBOutlet UILabel *nameLabel;
@property (nonatomic) IBOutlet UILabel *distanceLabel;
@property (nonatomic) IBOutlet UILabel *addressLabel;
 @end

   @implementation CustomPlaceTableViewCell
   @synthesize distanceLabel,nameLabel,addressLabel;

  - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
 {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
  }
 return self;
}

 - (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
  [super setSelected:selected animated:animated];

  // Configure the view for the selected state
 }

 @end 
```

当我运行我的应用程序时，它给了我：

2012-07-02 17:16:26.675 MyAura[2595:707] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从 tableView:cellForRowAtIndexPath 返回一个单元格：”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:33:24.820

我想你错过了 tableView:cellForRowAtIndexPath 中的返回单元格试试这个

```
return cell; 
```

ans检查或使用这个`NSLog(@"description = %@",[cell description]);`

如果`[cell description]`为空，则更改它

```
CustomPlaceTableViewCell *cell = (CustomPlaceTableViewCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:50:56.330

是的，即使您使用了上述所有建议，您的代码也会崩溃。您是否检查过您的单元格实际上是在创建的？

不，这没有被创建，这个方法实际上是在返回一个`nil`值。

在您的代码中使用以下行试图使用可重用单元但如果没有创建单元怎么办？

```
CustomPlaceTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

你必须在你的代码之后检查这个：

```
if (cell == nil) {
     cell = [[CustomPlaceTableViewCell alloc] init]; // or your custom initialization
} 
```

在此之后，只有您的单元格不会为零，并且应用程序不会崩溃。

希望这能解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-03T18:50:31.280

我也面临同样的问题，但我解决了。

我正面临这个问题，因为我在单独的 Xib 文件中创建了我的 talbeViewCell，并将我的 tableview 类作为文件的所有者。但是，我还没有将我的单元格 IBOutlet 链接到我的 tableview 类。

因此，将我的 tableviewcell Xib 链接到在我的 tableview 中创建的 IBOutlet，我解决了这个问题。

您将遇到此问题，因为您在 cellforRowAtIndex 中创建的 tableviewcell 为 nil。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T09:29:26.310

`return cell;` 最后不见了

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T01:15:05.353

首先我使用：

```
 PlaceMasterViewController *placeController = [[PlaceMasterViewController alloc]init];
    [self.navigationController pushViewController:placeController animated:YES]; 
```

导致我表中没有数据，或者给我错误，所以我使用了：

```
 UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                             bundle: nil];

    PlaceMasterViewController *placeController = (PlaceMasterViewController*)[mainStoryboard 
                                                       instantiateViewControllerWithIdentifier: @"peoplemastViewControl"];
    [self.navigationController pushViewController:placeController animated:YES]; 
```

一切都好

# php - 记录在 PDO mssql 事务循环中消失

> ID：11290747
> 
> 赞同：6
> 
> 时间：2012-07-02T09:09:38.437
> 
> 标签：php, sql, sql-server, transactions, pdo

我有以下代码（或多或少）可以导入从 500.000 到 4.000.000 行的任何位置：

```
$sSql = "Insert into table (a,b,c) VALUES(?,?,?)"
$oSQLStmnt = $pdo->prepare($sSql);
$oSQLStmnt->setAttribute(PDO::SQLSRV_ATTR_ENCODING, PDO::SQLSRV_ENCODING_SYSTEM);
if (!$oSQLStmnt) {
    echo $pdo->errorInfo(); // Handle errors
}
$pdo->beginTransaction();
$iLineCounter = 1;
while (($sLine = fgets ($oCSV, 8000)) !== FALSE) {
      $aLine = explode('|', $sLine); //Fgetscsv did not work properly 
       if ($iLineCounter % 100 == 0) {
            lo("Inserting row " . $iLineCounter);
            $pdo->commit();
            sleep(0.15);
            $pdo->beginTransaction();
       }
       try {
            $oSQLStmnt->execute($aLine);
            $iSuccesulInserts++;
       }
       catch (exception $e) {
            print_r($e);
            $iFailedInserts++;
       }

       $iLineCounter++;
}
$pdo->commit(); 
```

如您所见，我每 100 行执行一次提交，甚至添加了一些睡眠。我过去每 25.000 行只运行一次提交，而且我没有使用任何睡眠。然而，在某一时刻，我发现我丢失了记录。我开始使用这些设置（睡眠和行数）。这样，我将丢失记录的数量从 50.000 减少到大约 100。但我仍然缺少记录！他们要去哪？我知道 SQL 没问题，因为当出现问题时我会立即收到错误消息。

我以为我可以在事务期间堆叠很多插入？调用 beginTransaction 会不会有问题？

**更新：**

赏金结束了，我不得不奖励它。谢谢大家的答案。或者实际上是提示，因为你们都没有真正回答我的问题。尽管非常感谢您的建议，但我并没有要求解决方法。赏金被授予的答案是因为它最接近实际回答我的问题。不幸的是，它没有用。

现在我正在使用 CSV 批量导入，效果很好，但如果有人有任何其他解决此问题的提示，请告诉我。因为我更喜欢使用我原来的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:43:41.610

我以前遇到过这个问题。对我来说，我必须在 INSERTS 之前执行“SET NOCOUNT ON”，因为 SQL Server 试图为每个 INSERT 返回“添加一行”，并且消息队列已满，它只是停止插入数据，没有返回任何错误！

因此，您绝对应该尝试在 INSERTS 之前执行“SET NOCOUNT ON”。我敢打赌它会解决你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T14:40:02.253

您使用 sleep() 0.15 秒来延迟执行，但是，问题：如果 INSERT 花费的时间超过 0.15 秒会发生什么？由于先前的提交，要运行的脚本和表可能会被阻止。

然后尝试在数据库中一次运行多个 INSERT 的方法。尝试这样的事情：

```
INSERT INTO example (example_id, name, value, other_value)VALUES
(100, 'Name 1', 'Value 1', 'Other 1'), (101, 'Name 2', 'Value 2', 'Other 2'),
(102, 'Name 3', 'Value 3', 'Other 3'), (103, 'Name 4', 'Value 4', 'Other 4'); 
```

为此，请执行以下操作：

```
$sql = ' INSERT INTO example (example_id, name, value, other_value)VALUES';
while (($sLine = fgets ($oCSV, 8000)) !== FALSE) {
    // generate VALUES to INSERT in a $sql .= '(..., ..., ...),'
} 
```

然后跑！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T16:45:28.680

@萨拉蒂斯，

您是否考虑过创建一个使用 MERGE 执行所需操作的简单存储过程？合并会消耗一些相当大的开销，但是，我一直都知道它是将记录从“主”数据源同步到依赖数据源的一种非常可靠的方法。

我的理念是数据库应该控制数据的使用方式，代码应该控制数据库何时执行它的操作。我更喜欢做的是将任何接触数据的东西保存在存储过程中，并在某些条件/事件发生时用代码调用存储过程。但是，您的情况可能非常独特，以至于这并不是最佳实践。

以下代码片段来自 Microsoft，作为如何完成合并的示例：

```
MERGE Production.UnitMeasure AS target
USING (SELECT @UnitMeasureCode, @Name) AS source (UnitMeasureCode, Name)
ON (target.UnitMeasureCode = source.UnitMeasureCode)
WHEN MATCHED THEN 
    UPDATE SET Name = source.Name
WHEN NOT MATCHED THEN   
    INSERT (UnitMeasureCode, Name)
    VALUES (source.UnitMeasureCode, source.Name)
    OUTPUT deleted.*, $action, inserted.* INTO #MyTempTable; 
```

这是整篇文章的链接，涵盖了几个不同的场景： [http ://technet.microsoft.com/en-us/library/bb510625.aspx](http://technet.microsoft.com/en-us/library/bb510625.aspx)

现在，要将信息从 CSV 获取到 SQL Server，以下链接说明了如何使用文件路径作为 FROM 子句的一部分并在 WITH 子句中指定分隔符来实现这一点。

它也涵盖了 BULK INSERT，如果这对您最有效，但是，我偏爱 MERGE，因为它处理新记录的 INSERT 和 UPDATES 现有记录。 [http://sqlserverpedia.com/blog/sql-server-bloggers/so-you-want-to-read-csv-files-huh/](http://sqlserverpedia.com/blog/sql-server-bloggers/so-you-want-to-read-csv-files-huh/)

仅供参考，仅当文件与 SQL Server 实例位于相同的磁盘上时，BULK INSERT 才有效。可以理解的是，我的公司不会授予我访问 SQL Server 本地驱动器的权限，因此我今晚必须在家中对此进行测试，以便为您提供一个可以使用的工作示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T10:35:44.343

您是否考虑过使用 Sprocs 而不是插入语句？按顺序写入任意数量的记录 - 一次一个 - 有点浪费时间/精力。它只是没有应有的速度。

您确定不能使用 BULK INSERT 或 XML 来一次插入多行吗？

# asp.net-mvc - 在 mvc .net 中读取 excel 工作表

> ID：11290753
> 
> 赞同：0
> 
> 时间：2012-07-02T09:09:56.363
> 
> 标签：asp.net-mvc

有人可以提供一些关于如何使用 MVC 在 .Net 4.0 中读取 excel 电子表格的好例子吗？

我将不得不阅读 Excel 电子表格中的 3-4 个工作表，遍历每个工作表中的行，检索每个单元格中的值，然后将其存储在数据库中。寻找一些带有示例的代码来为我指明正确的方向。

感谢您提前提供的帮助。起诉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:29:15.267

您可以使用[NPOI](http://npoi.codeplex.com/)。你有这么多例子，你可以尝试使用例子 ImportXlsToDataTable

# jquery - 将自动完成列表中国家/地区的 Google 地图限制为“印度、美国和英国”

> ID：11290755
> 
> 赞同：2
> 
> 时间：2012-07-02T09:10:09.697
> 
> 标签：jquery, google-maps

此代码不起作用。请告诉我确切的解决方案

```
<script src="maps.googleapis.com/maps/api/…; type="text/javascript"></script>
<script type="text/javascript">
   function initialize() {
      var input = document.getElementById('searchTextField');
      /* restrict to multiple cities? */
      var options = {
          types: ['(cities)'],
          componentRestrictions: {country: ["usa", "uk"]}
      };
      var autocomplete = new google.maps.places.Autocomplete(input, options); 
   }
   google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

**更新**

2017 年 1 月，Maps JavaScript API 3.27 版中引入了多个国家/地区过滤器自动完成功能：

> 您现在可以将自动完成预测限制为仅来自多个国家/地区的显示。您可以通过在 AutocompleteOptions 的 componentRestrictions 字段中指定最多 5 个国家来做到这一点。

[https://developers.google.com/maps/documentation/javascript/releases#327](https://developers.google.com/maps/documentation/javascript/releases#327)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T09:57:51.357

首先，您不能从多个国家/地区进行过滤。[这是此处报告](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4233)的已知问题。

然后对于您的代码，您必须使用两个字符串作为国家代码：

> componentRestrictions 可用于将结果限制为特定组。目前，您可以使用 componentRestrictions 按国家/地区进行过滤。国家必须作为两个字符传递，ISO 3166-1 Alpha-2 兼容的国家代码。[来源](https://developers.google.com/maps/documentation/javascript/places)。

这是我 jsfiddled 的一个国家[工作示例](http://jsfiddle.net/YphZw/)（取自[Google 示例列表](https://developers.google.com/maps/documentation/javascript/examples/)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-23T08:43:07.060

这是我通过操纵多个自动完成 div 的位置一直在使用的解决方法：

```
 var location = $('#location');
var options1 =  { 
                    types: ['(cities)'],
                    componentRestrictions: {country: 'uk'}
                }
var options2 =  { 
                    types: ['(cities)'],
                    componentRestrictions: {country: 'irl'}
                }
if (location.exists()) { 
    $(location).each(function(index){
        new google.maps.places.Autocomplete(this, options2);
        new google.maps.places.Autocomplete(this, options1);
    });
 var pressed = 0;
            google.maps.event.addDomListener(this, 'keydown', function(e){
            if (e.keyCode == 40 || e.keyCode == 38) { 
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
            }
        },true); 
    location.keypress(function(e) {
        setTimeout(function(e){
            setInterval(function(e){
            if($('.pac-container.pac-logo').last().css('display') != 'none' ){
                $('.pac-container.pac-logo').first().children('.pac-item').appendTo($('.pac-container.pac-logo').last())
            }
            else{
                $('.pac-container.pac-logo').last().children('.pac-item').appendTo($('.pac-container.pac-logo').first())
            }
            },100)

        }
        ,300)
    });
} 
```

CSS：

```
.pac-container.pac-logo:last-of-type {
     box-shadow: none !important;
}
.pac-container.pac-logo:last-of-type:after {
    content: none !important;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-17T14:51:21.113

在等待谷歌的解决方案两年后，我意识到了一个新项目的解决方法。

该功能是过滤多个组件限制并将顶部结果合并到一个数组中。这意味着一个接一个地给出特定的结果集。

也许这个解决方案可以优化，即所有国家或地区的整体结果都应诉诸行政区域、城市和街道的“权重”。

摆弄的脚本在[这里](https://jsfiddle.net/5w6tuxd4/)。

主要功能（之后有回调的多个请求）：

```
 service = new google.maps.places.AutocompleteService();
       var request1 = {
         input: inputData,
         componentRestrictions: {country: 'de'},
       };
       var request2 = {
         input: inputData,
         componentRestrictions: {country: 'at'},
       };
       var request3 = {
         input: inputData,
         componentRestrictions: {country: 'ch'},
       };
       $('#result').empty();
       service.getPlacePredictions(request1, callback);
       service.getPlacePredictions(request2, callback);            
       service.getPlacePredictions(request3, callback); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-22T09:35:48.117

[更新](https://stackoverflow.com/questions/34179717/need-multiple-country-componentrestrictions-in-google-places-autocomplete/41707097#41707097)一下，在 2017 年 1 月 Maps JavaScript API 3.27 版发布后，多个国家/地区过滤器可能会传递一系列字符串国家/地区代码。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-07-30T14:54:36.747

为什么您不放置单选按钮/复选框等来获取多个国家/地区的地址，也许这对你们有用。var valueofcountry=“ca”；// 假设这个值来自复选框/收音机

```
 var autoCompleteOptions = {componentRestrictions: {country: valueofcountry}}; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-01-13T12:09:56.263

最后我得到了这个问题的解决方案..我希望这段代码能工作..试试这个

```
// FOR SPECIFIC COUNTRY 'INDIA' ONLY 
var options = {
    types: ['(cities)'],
    componentRestrictions: {country: "IN"}
};

autocomplete = new google.maps.places.Autocomplete(document.getElementById('text_box_id'), options);
/*  When the user selects an address from the dropdown,
    populate the address fields in the form. */
google.maps.event.addListener(autocomplete, 'place_changed', function() {
    fillInAddress();
});

// FOR SPECIFIC COUNTRY 'US' ONLY 
var options = {
    types: ['(cities)'],
    componentRestrictions: {country: "US"}
};

autocomplete = new google.maps.places.Autocomplete(document.getElementById('text_box_id'), options);
/*  When the user selects an address from the dropdown,
    populate the address fields in the form. */
google.maps.event.addListener(autocomplete, 'place_changed', function() {
    fillInAddress();
}); 
```

# blackberry - 在我的黑莓应用程序中的浏览器中提供链接时打开在线 PDF 文件

> ID：11290757
> 
> 赞同：1
> 
> 时间：2012-07-02T09:10:19.937
> 
> 标签：blackberry, browser

我正在开发一个需要从 url 下载 PDF 文件的应用程序。下载后，我必须为用户打开该 PDF 文件，但由于我没有任何默认的 PDF 应用程序，我正在努力在浏览器中打开该 PDF 文件作为 google doc 及其 url。

```
"http://docs.google.com/gview?embedded=true&url=" + pdfURL 
```

其中 pdfURL 是服务器上 PDF 的 url。

问题：当我在以下代码的帮助下打开浏览器时：

```
BrowserSession myBrowser = Browser.getDefaultSession();
myBrowser.displayPage("http://www.stackoverflow.com"); 
```

但结果如图所示： ![在此处输入图像描述](../Images/473683855b20e5341ea32079ff8fe9e8.png)

数据加载任务始终在 28k 处停止，并且对于每个 url，此图片在每种情况下都会出现。请帮助我完成这项任务。我的代码的实际问题是什么？

# java - 如何发送带有大附件的电子邮件？（OutOfMemoryError：java 堆空间）

> ID：11290758
> 
> 赞同：2
> 
> 时间：2012-07-02T09:10:20.483
> 
> 标签：java, jakarta-mail, attachment, out-of-memory, large-file-upload

`OutOfMemoryError: Java Heap Space`当我尝试附加一个大附件时，我遇到了一个。当发送带有一些大文件（比如 50M）的电子邮件时，将引发错误。

代码是这样的：

```
//add attaches
if (vo.getAttaches() != null) {
    InputStream iStream = null;
    ByteArrayDataSource bdSource = null;
    String filename = null;

    for (int i = 0; i < vo.getAttaches().length; i++) {
         iStream = new FileInputStream(vo.getAttaches()[i]);
         bdSource = new ByteArrayDataSource(iStream, null);
         filename = vo.getAttachesFileName()[i];
         email.attach(bdSource, MimeUtility.encodeText(filename), filename);
    }
} 
```

它`bdSource = new ByteArrayDataSource(iStream, null)`抛出了上面的异常。我读过“[使用 java 邮件内存不足](https://stackoverflow.com/questions/1945390/out-of-memory-using-java-mail)”，但我不明白。如何上传大附件？如果我定义一个缓冲区`byte[1024]`，那么如何编码`email.attach()`？缓冲区中的所有数据都应该使用相同的`filename`吗？

* * *

**更新：**谢谢你的好意。我使用 FileDataSource 而不是 ByteArrayDataSource，看来我的 send() 函数没有异常。但我仍然无法发送带有大附件的电子邮件。**apache james**收到此错误：

```
 java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2786)
    at java.io.ByteArrayOutputStream.toByteArray(ByteArrayOutputStream.java:133)
    at com.sun.mail.util.ASCIIUtility.getBytes(ASCIIUtility.java:261)
    at javax.mail.internet.MimeMessage.parse(MimeMessage.java:338)
    at org.apache.james.core.MimeMessageWrapper.parse(MimeMessageWrapper.java:477)
    at org.apache.james.core.MimeMessageWrapper.loadMessage(MimeMessageWrapper.java:205)
    at org.apache.james.core.MimeMessageWrapper.checkModifyHeaders(MimeMessageWrapper.java:414)
    at org.apache.james.core.MimeMessageWrapper.setHeader(MimeMessageWrapper.java:426)
    at org.apache.james.core.MimeMessageCopyOnWriteProxy.setHeader(MimeMessageCopyOnWriteProxy.java:652)
    at org.apache.james.transport.mailets.UsersRepositoryAliasingForwarding.service(UsersRepositoryAliasingForwarding.java:101)
    at org.apache.james.transport.mailets.LocalDelivery.service(LocalDelivery.java:64)
    at org.apache.james.transport.LinearProcessor.service(LinearProcessor.java:424)
    at org.apache.james.transport.JamesSpoolManager.process(JamesSpoolManager.java:405)
    at org.apache.james.transport.JamesSpoolManager.run(JamesSpoolManager.java:309)
    at java.lang.Thread.run(Thread.java:619)
03/07/12 13:08:33 ERROR spoolmanager: An error occurred processing Mail1341292071375-0 through transport
03/07/12 13:08:33 ERROR spoolmanager: Result was error
03/07/12 13:08:33 ERROR spoolmanager: Exception in processor <error>
java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2786)
    at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:94)
    at org.apache.james.core.MimeMessageUtil.copyStream(MimeMessageUtil.java:168)
    at org.apache.james.core.MimeMessageWrapper.writeTo(MimeMessageWrapper.java:276)
    at org.apache.james.core.MimeMessageUtil.writeTo(MimeMessageUtil.java:66)
    at org.apache.james.core.MimeMessageUtil.writeTo(MimeMessageUtil.java:50)
    at org.apache.james.mailrepository.MessageInputStream.writeStream(MessageInputStream.java:131)
    at org.apache.james.mailrepository.MessageInputStream.<init>(MessageInputStream.java:101)
    at org.apache.james.mailrepository.JDBCMailRepository.store(JDBCMailRepository.java:718)
    at org.apache.james.transport.mailets.ToRepository.service(ToRepository.java:98)
    at org.apache.james.transport.LinearProcessor.service(LinearProcessor.java:424)
    at org.apache.james.transport.JamesSpoolManager.process(JamesSpoolManager.java:405)
    at org.apache.james.transport.JamesSpoolManager.run(JamesSpoolManager.java:309)
    at java.lang.Thread.run(Thread.java:619)
03/07/12 13:08:33 ERROR spoolmanager: An error occurred processing Mail1341292071375-0 through error
03/07/12 13:08:33 ERROR spoolmanager: Result was ghost 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:19:14.650

问题是您在撰写消息时试图将整个文件存储在内存中，这实际上通常不是必需的。如果您要附加真实文件，那么最好使用 a`javax.activation.FileDataSource`而不是 a `javax.mail.util.ByteArrayDataSource`（两者都实现`DataSource`接口），因为它可以允许数据流式传输而不是保存在内存中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:19:59.713

**对于您的更新：在 2010**[年 12 月 30 日](https://issues.apache.org/jira/browse/JAMES-134?focusedCommentId=12976058&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12976058)的同一线程中转换为“邮件格式（ascii）”时，似乎一个旧的（？）变体将整个文件`JamesSpoolManager`读[入内存](https://issues.apache.org/jira/browse/JAMES-134)，问题似乎已解决。

* * *

`ByteArrayDataSource`将从提供的输入流中读取完整的输入，请参阅 javadoc：

> 使用来自指定 InputStream 的数据和指定的 MIME 类型创建一个 ByteArrayDataSource。**InputStream 被完全读取，数据存储在一个字节数组中。**

因此，如果要读取的文件“大于”您的堆大小（JVM 限制），它将抛出`OutOfMemoryException`.

* * *

因此，要回答您的问题，您有（至少）两种选择：

1.  `FileDataSource`在这个[SO 答案](https://stackoverflow.com/a/3177640/271357)中使用类似
2.  给你的程序更多的内存（在这种情况下可能不是一个好的解决方案..）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-22T07:40:24.500

我面临同样的问题。但是，同时在多封电子邮件中。这会导致日志中出现两个错误。

```
1\. OutOfMemoryError: Java 堆空间
```

```
2\. 超出最大连接数
```

我在 wrapper.conf 文件中更改了两个参数。

```
#wrapper.java.initmemory=16
 wrapper.java.initmemory=32

#wrapper.java.maxmemory=64
wrapper.java.maxmemory=128 
```

重新启动服务器后，错误消失并且邮件发送接收正在工作。

# android - Android NDK C 库导致 seg 错误

> ID：11290759
> 
> 赞同：3
> 
> 时间：2012-07-02T09:10:22.063
> 
> 标签：android, c, segmentation-fault, android-ndk

我在使用与 Android NDK 一起使用的库中的 c 代码时遇到了一些问题。

它适用于模拟器，但不适用于真实设备。它给了我一个“libc - 致命信号 11”（SIGSEGV）

我已将问题追溯到库中的一段代码，但我无法理解第二行的作用。

这是代码：

```
int lookup_mpz(mpz_t z, const char *(*tab)(const char *), const char *key) {
  const char *data= tab(key); //--> Causes SEGV
  if (!data) {
    pbc_error("missing param: `%s'", key);
    return 1;
  }
  mpz_set_str(z, tab(key), 0);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:14:08.033

第二行是通过一个名为 的函数指针调用一个函数`tab`。该函数具有签名：

```
const char* f(const char*); 
```

建议在调用之前检查`key`and`tab()`不为 NULL `tab()`。

# haskell - 带字节串的 HSP

> ID：11290760
> 
> 赞同：2
> 
> 时间：2012-07-02T09:10:24.253
> 
> 标签：haskell, happstack

我在我的家庭项目中切换到[HSP](http://www.haskell.org/haskellwiki/HSP) - 我喜欢它编译为 Haskell 代码。但是我的服务器使用 ByteString 进行输出。有没有让 HSP 生成 ByteString 输出的好方法？正如我所看到的输出和 HSP 的源代码，有硬编码`"Any string literal" :: String`- 对 String 的显式类型限定。

我的观点是，使用惰性 ByteString 进行连接比 String 更快，并且由于输入和输出是 ByteString，因此没有理由将 String 仅用于模板化。

可能有 HSP 的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:05:05.820

最新版本`HSP`使用该`text`包，`String`比`ByteString`.

# ruby-on-rails-3 - 如何使用关联 ID，例如脏属性？

> ID：11290763
> 
> 赞同：1
> 
> 时间：2012-07-02T09:10:31.423
> 
> 标签：ruby-on-rails-3, activerecord, activemodel

我有一些模型有_许多其他模型。如果关联模型的结构发生变化，我想在保存之前做一些事情。像这样的东西：

```
class Foo < AR:Base
  has_many :bars

  before_save :do_smth, :if => bar_ids_changed? # like ActiveModel:Dirty

  def do_smth
    ...
  end
end 
```

实现这一点的更好方法是什么？

# python - 如何找到可以将新项目插入排序列表并保持排序的索引？

> ID：11290767
> 
> 赞同：30
> 
> 时间：2012-07-02T09:11:00.283
> 
> 标签：python, sortedlist

```
a = 132

b = [0, 10, 30, 60, 100, 150, 210, 280, 340, 480, 530] 
```

我想知道它`a`应该在有序列表中的第 6 位`b`。

这样做的最pythonic方式是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-02T09:16:10.477

[`bisect`](https://docs.python.org/3/library/bisect.html)是 Python 标准库中的一个模块，非常适合此任务。`bisect`模块中的函数`bisect`将为您提供值的插入点的索引。

让我举一个代码示例`bisect`

```
from bisect import bisect
a = 132
b = [0, 10, 30, 60, 100, 150, 210, 280, 340, 480, 530]
print(bisect(b, a)) 
```

结果将是`5`因为列表是从 0 开始的，所以实际上它是第 6 位。

您可以知道的是将结果用于`insert`.

```
index = bisect(b, a)
b.insert(index, a) 
```

或没有中间变量

```
b.insert(bisect(b, a), a) 
```

现在`b`将`[0, 10, 30, 60, 100, 132, 150, 210, 280, 340, 480, 530]`。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-02T09:12:32.750

使用[bisect](http://docs.python.org/py3k/library/bisect.html)。它不是最漂亮的 API，但它正是您所需要的。

您将要使用`bisect.bisect`，它会返回您想要的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-18T14:59:17.267

边缘情况还有进一步的担忧。例如，假设您要选择上述`b`范围内的元素，`(a, c)`然后使用

```
b[idx_a:idx_c] 
```

那么你需要考虑`a, c`实际元素的情况`b`。注意

```
bisect.bisect(b, 10)
bisect.bisect(b, 11) 
```

两者都会给出索引 2。因此，如果`a=10`我们需要将索引降低 1。幸运的是，有一个函数`bisect.bisect_left`可以做到这一点，即在我们的示例中

```
bisect.bisect_left(b, 10) 
```

给出 1。

总体而言，左索引应使用`bisect.bisect_left()`和右索引`bisect.bisect_right()`（与 相同`bisect.bisect()`）计算。

# php - 替代使用全局变量字符串以及与使用它们相关的任何安全问题？

> ID：11290769
> 
> 赞同：2
> 
> 时间：2012-07-02T09:11:09.513
> 
> 标签：php, string, security, global-variables, global

我试图寻找这个问题的答案，但其他文章似乎都没有像我一样清楚地回答这个问题。

我编写了很多代码，其中当用户从一个页面跳转到另一个页面时使用字符串变量，并且在设置全局 $string; 后使用它们。类型交易

就最安全而言，传递要在另一个页面上使用的变量有哪些更好的解决方案？

使用全局 $strings 是一件坏事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:15:10.567

全局变量本身不允许您在页面之间保留变量值。

为此，您必须使用会话机制（例如[使用`$_SESSION`PHP 魔术数组](http://www.php.net/manual/en/book.session.php)）。

有关安全性和会话，请参阅：

*   [http://php.net/manual/en/session.security.php](http://php.net/manual/en/session.security.php)
*   [PHP 会话变量的安全性如何？](https://stackoverflow.com/questions/1181105/how-safe-are-php-session-variables)

# android - 在 jQuery 移动垂直滚动期间触发向左滑动/向右滑动

> ID：11290771
> 
> 赞同：8
> 
> 时间：2012-07-02T09:11:11.390
> 
> 标签：android, jquery-mobile, jquery-events

问题是当我想要垂直滚动时会触发 swipeleft/swiperight 事件。

我们使用的是 jQuery mobile 1.1.0 版本和 jQuery 1.7.1。

代码是：

```
 $(document).delegate('#quizResumePage', 'swipeleft swiperight', function (event) {
   event.stopImmediatePropagation();
    if (event.type == 'swipeleft') {
       $('#btnnext').trigger('click');
    }  else  if (event.type == 'swiperight')  {
       $('#btnprevious').trigger('click');
    }
   event.preventDefault();
}); 
```

那为什么当我想滚动页面时会触发滑动事件呢？

这个问题出现在三星galaxy android 2.3.5...

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T19:44:18.593

您可以控制滑动事件的工作方式来更改以下对象的值

```
$.extend($.event.special.swipe,{
  scrollSupressionThreshold: 10, // More than this horizontal displacement, and we will suppress scrolling.
  durationThreshold: 1000, // More time than this, and it isn't a swipe.
  horizontalDistanceThreshold: 30,  // Swipe horizontal displacement must be more than this.
  verticalDistanceThreshold: 75,  // Swipe vertical displacement must be less than this.
}); 
```

在收听滑动之前将其放在您的代码上。例如，将verticalDistanceThreshold 更改为15，将durationThreshold 更改为500，这将有助于减少误报。

另一方面，在您的代码中，您正在触发按钮上的单击事件，虽然这有效，但更好的方法是直接调用执行下一个/上一个操作的方法。

祝你好运！

# jquery - javascript中的window.onbeforeunload

> ID：11290780
> 
> 赞同：2
> 
> 时间：2012-07-02T09:11:42.327
> 
> 标签：jquery, onbeforeunload, click

我正在使用 javascript window.onbeforeunload 函数在用户尝试离开页面而不提交数据时向用户显示警报。这种功能运行良好。

问题出现在 IE 中（仅），即使点击内部链接，window.onbeforeunload 事件也会触发

```
<a class="editlink" onclick="fnEditLink(this);" href="javascript:void(0);" > <img src="/images/newstyle/pencil.png" alt="edit" /> Edit </a> 
```

这是一个内部链接，用于在不进行任何重定向或 ajax 调用的情况下编辑网格行。只是对 html DOM 结构中新创建的行进行简单的编辑。

这是我在页面中使用的 javascript 代码：

```
<script>
var is_clicked = false;
$(document).ready(function(){
    $('#get-a-quote-step2').submit(function(){
        is_clicked = true;
        return validate('get-a-quote-step2');
    });
    $('#skip_step, form input').click(function(){is_clicked = true;});
});

window.onbeforeunload = function() {

    if(!is_clicked)
        return false;
}
is_clicked = false;
<script> 
```

在 Firefox 上一切正常，但在 IE 上却产生了问题。我正在使用 IE 8 来测试这些东西，但我想问题出在所有版本的 IE 上。

在我上面的代码中，问题是如果我点击一个内部链接，它会将 is_clicked 标志设置为 true，然后如果我按下刷新按钮，我可以重新加载页面，而无需询问用户是否离开，他将丢失所有未保存的数据。

我在想是否有 esp；在 JQuery 中，以便我们知道是否未单击某些特定链接，例如 isNotClicked() ？或者，如果我的问题有任何其他解决方案，这是最受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T00:31:22.470

因此，如果您只想阻止某些链接触发 onbeforeunload 事件，您可以在 click 事件声明中简单地返回 false ...

```
<a href="http://google.com">Call unload first and load a page</a>
<a href="javascript:void(0);" id="request">Do an ajax request</a>
<script>
$(document).ready(function(){
    $('#request').click(function(e){
        //do some stuff
        //returning false wil prevent the onbeforeunload event from firing
        //but also will not redirect if the link has an href
        return false;
    });
});
window.onbeforeunload = function(e){
        return 'Want to leave?';
}

</script> 
```

# objective-c - 使用网站

> ID：11290782
> 
> 赞同：0
> 
> 时间：2012-07-02T09:12:06.820
> 
> 标签：objective-c

我很想创建一个文本字段和一个按钮。单击按钮时，它应该在我所在的聊天室中“发布”文本字段输入。

`input id="chat-submit" class="input_submit" value="Post Message" type="submit"`

这是我从网站上获得的`Chatbutton`或`Post message`按钮的东西。

我必须使用什么方法或者你们可以给我什么示例代码来达到我想要的原因？

请帮我。我尝试了不同的 HTTPRequest 东西，但我不知道将我的聊天按钮信息放在哪里......

我想创建一个这样的移动聊天......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:55:33.490

那么，您想知道如何创建 HTTP POST 请求并使用参数填充它吗？

除非您使用第三方库，否则在 Cocoa 中您必须自己组装 POST 请求正文。你可以使用这样的代码：

```
 NSMutableURLRequest *request = ...;
    NSMutableString *ps = [NSMutableString string];

    BOOL first = YES;
    for (NSString *key in self.postParameters)
    {
        [ps appendFormat:@"%@%@=%@", (first==YES) ? @"" : @"&", key, [[self.postParameters objectForKey:key] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        first=NO;
    }

    NSData* postVariables = [ps dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
    NSString* postLength = [NSString stringWithFormat:@"%lu", [postVariables length]];

    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody: postVariables]; 
```

此代码假定您有一个 NSDictionary `self.postParameters`，其中包含您要发布的内容。

制作完成后`NSMutableURLRequest`，您可以使用`NSURLConnection`.

# php - 从 php 获取 img 并重新加载

> ID：11290783
> 
> 赞同：3
> 
> 时间：2012-07-02T09:12:09.707
> 
> 标签：php, image

您好，我有一个动态创建图像的 php 文件。基本上它在`img`. 我在 html 中这样称呼他们没有问题

```
<img src="img.php?session=<?php echo $session; ?>" />
<img src="img.php?session=<?php echo $session; ?>" /> 
```

现在，如果服务器上的图像发生变化，并且我再次从 html 调用它，图像没有改变，我必须刷新整页才能看到新图像。[编辑] 我还注意到它在 Chrome 上运行正常。我只有在 Firefox 有这个问题，它就像在 igonring`<meta http-equiv="Cache-Control" content="no-cache/>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:18:18.660

这与您的 PHP 无关，而与您的浏览器有关。浏览器正在缓存图像，因此需要完全刷新。`head`您应该可以通过在 HTML标记之间添加它来解决此问题

```
 <meta http-equiv="CACHE-CONTROL" content="NO-CACHE" /> 
```

**编辑** 看起来有另一个`http-equiv`可以做同样的事情：

```
 <meta http-equiv="Pragma" content="no-cache" />
 <meta http-equiv="Expires" content="-1" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T10:02:28.760

我采用的解决方案如下。

```
var ts = Math.round((new Date()).getTime() / 1000);
<img src="img.php?session=<?php echo $session; ?>&time=' + ts + '" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T09:18:30.120

您可以`No Cache`使用`header()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T09:24:17.403

在图片源末尾添加一个随机数，那么它会一直从服务器获取图片，因为它在缓存中找不到。

# objective-c - 为什么当 ARC 为项目打开但为特定文件目标 c 关闭时，没有调用 dealloc？

> ID：11290784
> 
> 赞同：0
> 
> 时间：2012-07-02T09:12:17.050
> 
> 标签：objective-c, ios

我的一个视图控制器关闭了 ARC，但是当我导航到上一个视图控制器时，我的 dealloc 方法没有被调用。

对于我使用的推送视图控制器

```
Magazine_ArticleViewController_iPhone *viewController = [[Magazine_ArticleViewController_iPhone alloc] 
                                                         initWithNibName:@"Magazine_ArticleViewController_iPhone" 
                                                         bundle:[NSBundle mainBundle]];

viewController.hidesBottomBarWhenPushed = YES;

IssueDataHolder *dataHolder = [m_arrIssueData objectAtIndex:m_nCurrentIssueIndex];

NSLog(@"%d",dataHolder.nIssueID);

[viewController setM_IssueDataHolder:dataHolder];
[self.navigationController pushViewController:viewController animated:YES];
[viewController release]; 
```

并导航我以前使用的视图控制器

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T09:54:51.693

对于仍然有问题 dealloc not called 并且无法找到原因的开发人员：根据 Paul 的回答`[performSelector:withObject:afterDelay:]`可能是此问题的原因。您必须`[performSelector:]`在推送新的 ViewController 之前取消。

```
[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(Method) object:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T07:13:11.293

我的 Magazine_ArticleViewController_iPhone viewcontroller 的 dealloc 没有被调用，因为在 viewcontroller（我正在推送 Magazine_ArticleViewController_iPhone viewcontroller）中我接受了一个具有保留属性的委托。当我做到@“assign”时，dealloc被解雇了。

我完全同意**@Paul de Lange**的评论。

**将委托的保留属性更改为分配**。

# c++ - TCP 连接已接受，但写入数据会导致它使用过时的连接

> ID：11290785
> 
> 赞同：1
> 
> 时间：2012-07-02T09:12:19.247
> 
> 标签：c++, sockets, tcp, berkeley-sockets

服务器 (192.168.1.5:3001) 运行 Linux 3.2，设计为一次只接受一个连接。客户端 (192.168.1.18) 正在运行 Windows 7。连接是无线连接。这两个程序都是用 C++ 编写的。

它在 10 个连接/断开周期中有 9 个效果很好。根据 Wireshark（见截图）的说法，第十个（随机发生）连接让服务器接受连接，然后当它稍后实际写入它时（通常是 30 多秒后），看起来它正在写入一个旧的陈旧连接，带有客户端已 FIN（不久前）但服务器尚未 FIN 的端口号。所以客户端和服务器连接似乎不同步——客户端建立新连接，服务器尝试写入前一个连接。一旦进入这种断开状态，每个后续的连接尝试都会失败。可以通过超出最大无线范围半分钟来启动断开状态（如之前 10 次中有 9 次这样有效，但有时会导致断开状态）。

[链接后面的 Wireshark 截图](http://bayimg.com/KaPjaaaDH)

屏幕截图中的红色箭头表示服务器何时开始发送数据（Len != 0），即客户端拒绝它并向服务器发送 RST 的时间点。右边缘下方的彩色点表示使用的每个客户端端口号的单一颜色。请注意在该颜色的其余点之后出现的一两个点如何很好地出现（并注意时间列）。

问题看起来像是在服务器端，因为如果您终止服务器进程并重新启动，它会自行解决（直到下次发生）。

希望代码不会太不寻常。我将listen()中的队列大小参数设置为0，我认为这意味着它只允许一个当前连接而没有挂起的连接（我尝试了1，但问题仍然存在）。在代码中显示“//错误”的跟踪打印中，没有任何错误出现。

```
// Server code

mySocket = ::socket(AF_INET, SOCK_STREAM, 0);
if (mySocket == -1)
{
  // error
}

// Set non-blocking
const int saveFlags = ::fcntl(mySocket, F_GETFL, 0);
::fcntl(mySocket, F_SETFL, saveFlags | O_NONBLOCK);

// Bind to port

// Union to work around pointer aliasing issues.
union SocketAddress
{
  sockaddr myBase;
  sockaddr_in myIn4;
};

SocketAddress address;
::memset(reinterpret_cast<Tbyte*>(&address), 0, sizeof(address));
address.myIn4.sin_family = AF_INET;
address.myIn4.sin_port = htons(Port);
address.myIn4.sin_addr.s_addr = INADDR_ANY;
if (::bind(mySocket, &address.myBase, sizeof(address)) != 0)
{
  // error
}
if (::listen(mySocket, 0) != 0)
{
  // error
}

// main loop
{
  ...
  // Wait for a connection.
  fd_set readSet;
  FD_ZERO(&readSet);
  FD_SET(mySocket, &readSet);
  const int aResult = ::select(getdtablesize(), &readSet, NULL, NULL, NULL);
  if (aResult != 1)
  {
    continue;
  }
  // A connection is definitely waiting.
  const int fileDescriptor = ::accept(mySocket, NULL, NULL);
  if (fileDescriptor == -1)
  {
    // error
  }

  // Set non-blocking
  const int saveFlags = ::fcntl(fileDescriptor, F_GETFL, 0);
  ::fcntl(fileDescriptor, F_SETFL, saveFlags | O_NONBLOCK);

  ...
  // Do other things for 30+ seconds.
  ...
  const int bytesWritten = ::write(fileDescriptor, buffer, bufferSize);
  if (bytesWritten < 0)
  {
    // THIS FAILS!! (but succeeds the first ~9 times)
  }

  // Finished with the connection.
  ::shutdown(fileDescriptor, SHUT_RDWR);
  while (::close(fileDescriptor) == -1)
  {
    switch(errno)
    {
    case EINTR:
      // Break from the switch statement. Continue in the loop.
      break;
    case EIO:
    case EBADF:
    default:
      // error
      return;
    }
  }
} 
```

因此，在 accept() 调用（假设这正是发送 SYN 数据包的时间点）和 write() 调用之间的某个地方，客户端的端口被更改为先前使用的客户端端口。

所以问题是：服务器怎么会接受一个连接（并因此打开一个文件描述符），然后通过以前的（现在是陈旧的和死的）连接/文件描述符发送数据？它是否需要在缺少的系统调用中提供某种选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:12:56.527

我正在提交一个答案来总结我们在评论中发现的内容，即使它还不是一个完整的答案。我认为它确实涵盖了要点。

您有一台服务器一次处理一个客户端。它接受一个连接，为客户端准备一些数据，写入数据，然后关闭连接。问题是准备数据的步骤有时比客户愿意等待的时间长。当服务器忙于准备数据时，客户端放弃了。

在客户端，当套接字关闭时，会发送一个 FIN 通知服务器客户端没有更多数据要发送。客户端的套接字现在进入 FIN_WAIT1 状态。

服务器收到 FIN 并回复 ACK。（ACK 由内核完成，无需用户空间进程的任何帮助。）服务器套接字进入 CLOSE_WAIT 状态。套接字现在是可读的，但服务器进程没有注意到，因为它正忙于它的数据准备阶段。

客户端收到 FIN 的 ACK 并进入 FIN_WAIT2 状态。我不知道客户端用户空间发生了什么，因为您没有显示客户端代码，但我认为这并不重要。

服务器进程仍在为挂断的客户端准备数据。它对其他一切都视而不见。同时，另一个客户端连接。内核完成握手。这个新客户端暂时不会得到服务器进程的任何关注，但在内核级别，第二个连接现在在两端都已建立。

最终，服务器的数据准备（为第一个客户端）完成。它尝试 write()。服务器的内核不知道第一个客户端不再愿意接收数据，因为 TCP 不传达该信息！所以写入成功并且数据被发送出去（你的wireshark列表中的数据包10711）。

客户端得到这个数据包，它的内核用 RST 回复，因为它知道服务器不知道的东西：客户端套接字已经为读写而关闭，可能已经关闭，也可能已经被遗忘。

在 Wireshark 跟踪中，服务器似乎只想向客户端发送 15 个字节的数据，因此它可能成功完成了 write()。但是 RST 很快就到达了，在服务器有机会执行它的 shutdown() 和 close() 之前，它会发送一个 FIN。收到 RST 后，服务器将不再在该套接字上发送任何数据包。shutdown() 和 close() 现在已执行，但没有任何在线效果。

现在服务器终于准备好接受（）下一个客户端了。它开始了另一个缓慢的准备步骤，并且由于第二个客户已经等待了一段时间，所以它进一步落后于计划。这个问题会越来越严重，直到客户端连接速度减慢到服务器可以处理的程度。

修复必须是让您在准备步骤期间客户端挂断时*通知服务器进程，并立即关闭套接字并转移到下一个客户端。*你将如何做取决于数据准备代码的实际外观。如果它只是一个 CPU 绑定的大循环，您必须找到一些地方来插入对套接字的定期检查。或者创建一个子进程来进行数据准备和写入，而父进程只是监视套接字-如果客户端在子进程退出之前挂断，则杀死子进程。其他解决方案是可能的（例如 F_SETOWN 在套接字上发生某些事情时向进程发送信号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:24:47.850

啊哈，成功！事实证明，在调用 accept() 之前，服务器正在接收客户端的 SYN，并且服务器的内核正在自动完成与另一个 SYN 的连接。所以肯定有一个监听队列，有两个连接在队列上等待是原因的一半。

另一半原因与问题中省略的信息有关（由于上述错误假设，我认为这无关紧要）。有一个主要的连接端口（称为 A），以及这个问题所涉及的次要的、麻烦的连接端口（称为 B）。正确的连接顺序是 A 建立一个连接（A1），然后 B 尝试建立一个连接（这将成为 B1）......在 200 毫秒的时间范围内（我已经将超时时间从很久以前写的 100 毫秒翻了一番，所以我以为我很慷慨！）。如果它在 200 毫秒内没有获得 B 连接，那么它会丢弃 A1。然后 B1 与服务器的内核建立连接，等待被接受。只有在 A2 建立连接时，它才会在下一个连接周期被接受，并且客户端也会发送 B2 连接。服务器接受 A2 连接，然后获得 B 队列上的第一个连接，即 B1（尚未被接受 - 队列看起来像 B1、B2）。这就是为什么当客户端断开 B1 时服务器没有为 B1 发送 FIN。所以服务器的两个连接是A2和B1，显然是不同步的。它尝试写入 B1，这是一个死连接，因此它丢弃 A2 和 B1。然后下一对是 A3 和 B2，它们也是无效的对。在服务器进程被杀死并且 TCP 连接全部重置之前，它们永远不会从不同步中恢复。所以服务器的两个连接是A2和B1，显然是不同步的。它尝试写入 B1，这是一个死连接，因此它丢弃 A2 和 B1。然后下一对是 A3 和 B2，它们也是无效的对。在服务器进程被杀死并且 TCP 连接全部重置之前，它们永远不会从不同步中恢复。所以服务器的两个连接是A2和B1，显然是不同步的。它尝试写入 B1，这是一个死连接，因此它丢弃 A2 和 B1。然后下一对是 A3 和 B2，它们也是无效的对。在服务器进程被杀死并且 TCP 连接全部重置之前，它们永远不会从不同步中恢复。

因此解决方案是将等待 B 套接字的超时从 200 毫秒更改为 5 秒。如此简单的修复让我摸不着头脑（并在将其放入 stackoverflow 后的 24 小时内修复）！我还通过将套接字 B 添加到主 select() 调用中，然后将其接受（）并立即关闭（），使它从杂散的 B 连接中恢复（只有当 B 连接花费超过 5 秒的时间才能建立时才会发生这种情况）。感谢@AlanCurry 建议将其添加到 select() 并添加关于 listen() backlog 参数作为提示的拼图。

# android - Android ListView 图片onclick解析

> ID：11290799
> 
> 赞同：0
> 
> 时间：2012-07-02T09:13:01.423
> 
> 标签：android, xml, listview, imageview

我的列表视图是从在线资源解析的，但我无法让列表视图将图像 src 传递给单个列表项

SingleMenuItemActivity

```
static final String KEY_SONG = "song";
static final String KEY_ARTIST = "artist";
static final String KEY_THUMB_URL = "thumb_url";
static final String KEY_DURATION = "duration";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.libraryonclick);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String song = in.getStringExtra(KEY_SONG);
    String artist = in.getStringExtra(KEY_ARTIST);
    String thumb_url = in.getStringExtra(KEY_THUMB_URL);
    String duration = in.getStringExtra(KEY_DURATION);

    // Displaying all values on the screen
    TextView lblSong = (TextView) findViewById(R.id.textView1);
    TextView lblArtist = (TextView) findViewById(R.id.textView2);
    Drawable imgThumb = ((ImageView)findViewById(R.id.onclickthumb)).getDrawable(); //   thumb image
    TextView lblDuration = (TextView) findViewById(R.id.textView3);

    Button link3Btn = (Button)findViewById( R.id.button1 );
    link3Btn.setOnClickListener( new View.OnClickListener()
    {
        public void onClick(View v)
        {
            Uri uri = Uri.parse("http://google.com");
            startActivity( new Intent( Intent.ACTION_VIEW, uri ) );
        }
    });

    lblSong.setText(song);
    lblArtist.setText(artist);
    lblDuration.setText(duration);
    imgThumb.setImageResource(thumb_url);

    //Maybe more code here?
} 
```

列表视图活动

```
public class CustomizedListView extends Activity {
// All static variables
static final String URL = "http://dl.dropbox.com/u/48258247/music.xml";
// XML node keys
static final String KEY_SONG = "song"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.library);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row

    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String song = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String artist = ((TextView) view.findViewById(R.id.artist)).getText().toString();
            String thumb_url = ((TextView) view.findViewById(R.id.list_image)).getText().toString();
            String duration = ((TextView) view.findViewById(R.id.duration)).getText().toString();

            // Starting new intent
            Intent in = new Intent(CustomizedListView.this, org.scouts.library.SingleMenuItem.class);
            in.putExtra(KEY_SONG, song);
            in.putExtra(KEY_ARTIST, artist);
            in.putExtra(KEY_THUMB_URL, thumb_url);
            in.putExtra(KEY_DURATION, duration);
            startActivity(in);

        }
    });     
} 
```

我想我可能需要通过 imageloader 类来解析

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:30:41.347

你可以简单地试试这个 -

```
URL url = new URL("http://image10.bizrate-images.com/resize?sq=60&uid=2216744464");
Bitmap bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream());
imageView.setImageBitmap(bmp); 
```

`ImageView`在您的`CustomizedListView`类和方法中创建一个`oncreate()`通过意图从调用文件接收 url 路径。并将其粘贴到下面的代码中并尝试一下。

而且，看看[这个](http://www.ziddu.com/download/19661275/ImgLoadFrmWeb.zip.html)例子

# android - AsyncTask、内部类和按钮状态

> ID：11290802
> 
> 赞同：0
> 
> 时间：2012-07-02T09:13:03.563
> 
> 标签：android, button, android-asynctask, nested-class

对于音乐应用程序（音序器），我有几个按钮

```
static ArrayList<Button> Buttonlist = new  ArrayList<Button>(); 

    Buttonlist.add(0,(Button) findViewById(R.id.case_kick1));
    Buttonlist.add(1,(Button) findViewById(R.id.case_kick2));
    Buttonlist.add(2,(Button) findViewById(R.id.case_kick3));
    Buttonlist.add(3,(Button) findViewById(R.id.case_kick4));
    Buttonlist.add(4,(Button) findViewById(R.id.case_kick5));
    Buttonlist.add(5,(Button) findViewById(R.id.case_kick6));
    Buttonlist.add(6,(Button) findViewById(R.id.case_kick7));
    Buttonlist.add(7,(Button) findViewById(R.id.case_kick8)); 
```

例如，我通过 onClickListeners 激活

```
Buttonlist.get(0).setActivated(true); 
```

我通过循环和 ifs 播放了激活的声音：

```
if (Buttonlist.get(k).isActivated()) {mSoundManager.playSound(1); Thread.sleep(250);} 
```

该应用程序运行良好，但在播放时我无法访问播放/暂停按钮：我搜索并发现了 AsyncTasks。

我有一个嵌套类 PlayPause ：

```
class PlayPause extends AsyncTask<ArrayList<Button>,Integer,Void> 
```

我有这个：

```
protected Void doInBackground(ArrayList<Button>... params) {

    for(int k=0;k<8;k++)
    {
    boolean isPlayed = false;

    if (Buttonlist.get(k).isActivated()) {
    mSoundManager.playSound(1); 
    isPlayed = true;
    try {Thread.sleep(250);
    } 
    catch (InterruptedException e) 
    {e.printStackTrace();}}

    if(!isPlayed){
    try {Thread.sleep(250);}
    catch (InterruptedException e) 
    {e.printStackTrace();}
    }

   }
 return null;

} 
```

我通过启动它

```
 Play.setOnClickListener(new PlayClickListener()); 
```

使用 PlayClickListener ：

```
public class PlayClickListener implements OnClickListener {

private Tutorial acti;

public PlayClickListener(){
    super();
    }

    @SuppressWarnings("unchecked")
    public void onClick(View v) {
    if(Tutorial.play==0){
        Tutorial.play=1;
        Tutorial.Play.setBackgroundResource(R.drawable.action_down);
        acti = new Tutorial();
    Tutorial.PlayPause myPlayPause = acti.new PlayPause();
    myPlayPause.execute(Tutorial.Buttonlist);
    }
    else
    {
    Tutorial.play=0;
    Tutorial.myPlayPause.cancel(true);
    Tutorial.Play.setBackgroundResource(R.drawable.action);
    }
}

 } 
```

但它不起作用。当我点击按钮并点击播放/暂停时，我有这个：

```
07-02 11:06:01.350: E/AndroidRuntime(7883): FATAL EXCEPTION: AsyncTask #1
07-02 11:06:01.350: E/AndroidRuntime(7883): Caused by: java.lang.NullPointerException
07-02 11:06:01.350: E/AndroidRuntime(7883):     at com.Tutorial.Tutorial$PlayPause.doInBackground(Tutorial.java:603)
07-02 11:06:01.350: E/AndroidRuntime(7883):     at com.Tutorial.Tutorial$PlayPause.doInBackground(Tutorial.java:1) 
```

而且我不知道如何摆脱这个错误。显然，即使列表是静态的，Asynctask 也没有找到 Buttonlist 的激活状态。我不知道如何访问这些按钮的状态，isPressed 也不起作用。

感谢您阅读和帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:09:22.477

`ButtonList`要从访问`AsyncTask`，您必须通过传递给 的参数名称来引用它`AsyncTask`，在这种情况下`params`。使用 an `AsyncTask`，传入的参数始终是`Array`在之间指定的类型，`<....>`并且访问它（如果您只传入一个数组列表）将是这样的......

`ArrayList<Button> Buttonlist = params[0];`

然后，您可以从您的`AsyncTask`. 虽然我建议给它一个不同的名字，以防万一有任何冲突。

澄清一下，您可以将任意数量的对象传递给`AsyncTask`逗号分隔的`AsyncTask`. 在您的情况下，您只传入一个数组列表，因此异步任务被交给一个数组，其中只有一个对象。因此，您将查看 params 数组的第一个空间，因此`params[0]`

这有点令人困惑，但这是因为系统正在为您管理一个线程池，并且很多实现都是隐藏的。

# c# - Linq to Sql 查询重用

> ID：11290804
> 
> 赞同：1
> 
> 时间：2012-07-02T09:13:18.013
> 
> 标签：c#, .net, sql, linq-to-sql

假设我们有一个视图 V1 和 V2，声明如下：

```
create view V2 as
select V1.*, V2.C1, V2.C2, V2.C3
from V1
join V2 on V1.Key = V2.Key
where bla-bla 
```

所以 V2 缩小了 V1 的结果集并添加了一些连接。C#中有一个检索例程

```
IEnumerable<V1> GetData(MyFilter filter, MySortOrder order) {} 
```

我想用 V2 重用。是否可以不在 L2S 中而不是在数据库中执行连接？我应该在数据库上下文中手动创建一个基类还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:40:22.937

最终创建了一个接口，该接口包含其属性，`V1`然后从中继承`V1`和`V2`声明（使用 sqlmetal.exe 生成）（感谢部分类！）：

```
public interface IV {
    int P1 {get;set;}
    int P2 {get;set;}
}

public partial class V1: IV { }
public partial class V2: IV { } 
```

然后修改`GetData()`：

```
IEnumerable<IV> GetData(Func<MyDataContext, IEnumerable<IV>> MyFilter filter, MySortOrder order) {} 
```

所以我可以传入任何一个`myDataContext.V1`或`myDataContext.V2`实体集并转换结果。不知道这是否是最好的解决方案，但它很干燥，我很高兴。

# security - 如何生成安全会话 ID

> ID：11290805
> 
> 赞同：4
> 
> 时间：2012-07-02T09:13:20.560
> 
> 标签：security, boost-random

对于 C++ Web 服务器，我必须生成会话 ID。我想到了使用某种随机数和哈希值，以及会话的初始 IP 地址和时间戳。

这会产生一个合理的、不可猜测的 ID 吗？什么是好的随机生成器算法（由 boost-random 实现的最可取的算法）？

亲切的问候托尔斯滕

我的解决方案现在看起来像：

```
std::string secure_session_generator::operator()( const char* /* network_connection_name */ )
{
    std::stringstream out;
    out << std::hex << distribution_( generator_ );

    return out.str();
} 
```

成员是默认构造的：

```
 boost::random::random_device                                        generator_;
    boost::random::uniform_int_distribution< boost::uint_least64_t >    distribution_; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:21:35.600

您可以在此处使用示例：[Boost 示例](http://www.boost.org/doc/libs/1_50_0/libs/random/example/password.cpp)。然后只需将大小增加到更适合会话 ID 的大小，例如 64 个字符或其他内容。这样你就不必在散列或任何东西上使用计算，而且它已经是可读的。

或者不使用 boost-random 而只使用 ctime 和 stdio.h

```
string getRandom(int ip)
{
    srand(time(NULL) + ip + rand());
    stringstream ss;
    for(int i = 0;i < 64;i++)
    {
            int i = rand() % 127;
            while(i < 32)
                    i = rand() % 127;
            ss << char(i);
    }
    return ss.str();
} 
```

或者，不使用 IP，你可以用 rand() 来代替 IP，只要确保你在 srand 中播种了一些东西。

另外，无论如何，我不是密码学家，所以使用风险自负。

# objective-c - 使用 NSTimer 制作闹钟

> ID：11290808
> 
> 赞同：3
> 
> 时间：2012-07-02T09:13:28.260
> 
> 标签：objective-c, ios, xcode

我刚刚尝试制作一个带有本地通知的闹钟应用程序，但这并没有成功，因为我需要出现一个警报而不是它进入 iOS 5+ 的通知中心

到目前为止，我一直在努力使用 nstimer 及其功能，所以我想知道是否有人可以提供帮助。

我希望当用户选择一个时间（通过 UIDatePicker，只有时间）以在此时显示警报。我已经想出了如何从 UIDatePicker 获取时间，但我不知道如何正确设置 nstimer 的触发功能。这是我到目前为止所尝试的，如果有人可以提供帮助......不胜感激。谢谢

示例（它每秒都会进入函数，而不是我告诉它的某个时间......不是我想要的）：

```
NSDate *timestamp;
NSDateComponents *comps = [[[NSDateComponents alloc] init] autorelease];

[comps setHour:2];
[comps setMinute:8];
timestamp = [[NSCalendar currentCalendar] dateFromComponents:comps];

NSTimer *f = [[NSTimer alloc] initWithFireDate:timestamp
                             interval:0
                               target:self
                             selector:@selector(test)
                             userInfo:nil repeats:YES];

NSRunLoop *runner = [NSRunLoop currentRunLoop];
[runner addTimer:f forMode: NSDefaultRunLoopMode]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:18:45.460

正如@Nate所说的改变

```
NSTimer *f = [[NSTimer alloc] initWithFireDate:timestamp
                             interval:0
                               target:self
                             selector:@selector(test)
                             userInfo:nil repeats:YES]; 
```

到

```
NSTimer *f = [[NSTimer alloc] initWithFireDate:timestamp
                             interval:0
                               target:self
                             selector:@selector(test)
                             userInfo:nil repeats:NO]; //<-- Change here 
```

# php - mongodb聚合php

> ID：11290809
> 
> 赞同：4
> 
> 时间：2012-07-02T09:13:29.947
> 
> 标签：php, mongodb, mongodb-query, aggregation-framework

我正在使用 mongodb 2.1 以及如何将此查询转换为 php

```
db.counter.aggregate([ 
 { $match:{ page_id:123456 }}, 
 { $group:{_id:"$page_id",total:{$sum:"$pageview"}} } 
 ]); 
```

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T17:28:46.913

您可以使用 PHP 中的“command()”方法将聚合框架作为数据库命令运行。您的示例查询的精确语法是：

```
 $conn = new Mongo("localhost:$port");
   $db = $conn->test;

   $result = $db->command (
            array( 
                "aggregate" => "counter",
                "pipeline" => 
                    array( 
                        array( '$match' => array( 'page_id' => 123456 )),
                        array( '$group' => array( "_id" => '$page_id',
                                    'total' => array( '$sum' => '$pageview')  
                                )
                            )
                    )
            )
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T13:31:59.463

尝试：

```
$m = new MongoClient();
$con = $m->selectDB("dbName")->selectCollection("counter");
$cond = array(
    array('$match' => array('page_id' =>123456)),
    array(
        '$group' => array(
            '_id' => '$page_id',
           'total' => array('$sum' => '$pageview'),
        ),
    )
);
$out = $con->aggregate($cond);
print_r($out); 
```

更多详情[请点击这里](http://php.net/manual/en/mongocollection.aggregate.php)

# javascript - 无法打印 DIV 标记中的元素

> ID：11290811
> 
> 赞同：1
> 
> 时间：2012-07-02T09:13:31.077
> 
> 标签：javascript, html, css

我在这个 HTML 文件中使用了一个可拖动和可调整大小的 DIV。用户将 DIV 标签放置到他想要的主要父 DIV 标签中的位置。现在我想打印这个主 DIV 标签，但问题是我用来打印这个主 DIV 的代码是按顺序打印的，不像用户排列 DIV 的方式。它也不占用主要的DIV背景图像。这是代码。

JAVASCRIPT & CSS

```
<link rel="stylesheet" type="text/css" href="byrei-dyndiv_0.5.css">
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.1.min.js" > </script> 
<script type="text/javascript" src="byrei-dyndiv_1.0rc1.js"></script>   
<script language="javascript" type="text/javascript"> 
function change(boxid,divtoaffect) { 
content = document.getElementById("" + boxid + "").value.replace(/\n/g, '<br>'); 
document.getElementById(divtoaffect).innerHTML = content; 
} 
function select1() {
test=document.getElementById("changeMe");
test.style.backgroundImage="url('Sunset.jpg')";
}

function select2() {
test=document.getElementById("changeMe");
test.style.backgroundImage="url('Blue hills.jpg')";
}

    function PrintElem(elem)
    {
        Popup($(elem).text());
    }

    function Popup(data) 
    {
        var mywindow = window.open('', 'my div', 'height=400,width=600');
        mywindow.document.write('<html><head><title>my div</title>');
        /*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
        mywindow.document.write('</head><body >');
        mywindow.document.write(data);
        mywindow.document.write('</body></html>');
        mywindow.document.close();
        mywindow.print();
        return true;
    }  

//  Print DIV

function printContent(id){
                            str=document.getElementById(id).innerHTML
                            newwin=window.open('','printwin','left=100,top=100,width=400,height=400')
                            newwin.document.write('<HTML>\n<HEAD>\n')
                            newwin.document.write('<TITLE>Print Page</TITLE>\n')
                            newwin.document.write('<script>\n')
                            newwin.document.write('function chkstate(){\n')
                            newwin.document.write('if(document.readyState=="complete"){\n')
                            newwin.document.write('window.close()\n')
                            newwin.document.write('}\n')
                            newwin.document.write('else{\n')
                            newwin.document.write('setTimeout("chkstate()",2000)\n')
                            newwin.document.write('}\n')
                            newwin.document.write('}\n')
                            newwin.document.write('function print_win(){\n')
                            newwin.document.write('window.print();\n')
                            newwin.document.write('chkstate();\n')
                            newwin.document.write('}\n')
                            newwin.document.write('<\/script>\n')
                            newwin.document.write('</HEAD>\n')
                            newwin.document.write('<BODY onload="print_win()">\n')
                            newwin.document.write(str)
                            newwin.document.write('</BODY>\n')
                            newwin.document.write('</HTML>\n')
                            newwin.document.close()
                        }

</script> 
</head> 
<body> 
<style type="text/css">
#output1,#output2 ,#output3 {
width: 300px;
word-wrap: break-word;
border: solid 1px black;
}

</style> 
```

HTML

```
<div style="width:650px;height:300px;" id="changeMe" >

        <table cellpadding="5" cellspacing="0" width="100%" style="margin:auto;">
            <tr>
                <td><div class="dynDiv_moveDiv" id="output1" style="font-weight:bold;height:20px;margin-top:40px;">
                    <div class="dynDiv_resizeDiv_tl"></div>
                     <div class="dynDiv_resizeDiv_tr"></div>
                     <div class="dynDiv_resizeDiv_bl"></div>
                     <div class="dynDiv_resizeDiv_br"></div>
                    </div>
                    </td>
            </tr>
            <tr>
                <td><div class="dynDiv_moveDiv" id="output2" style="height:40px;margin-top:30px;">
                    <div class="dynDiv_resizeDiv_tl"></div>
                     <div class="dynDiv_resizeDiv_tr"></div>
                     <div class="dynDiv_resizeDiv_bl"></div>
                     <div class="dynDiv_resizeDiv_br"></div>
                    </div></td>
            </tr>   
            <tr>
                <td><div class="dynDiv_moveDiv" id="output3" style="height:50px;margin-top:40px;">
                    <div class="dynDiv_resizeDiv_tl"></div>
                     <div class="dynDiv_resizeDiv_tr"></div>
                     <div class="dynDiv_resizeDiv_bl"></div>
                     <div class="dynDiv_resizeDiv_br"></div>
                    </div></td>
            </tr>   
        </table>
    </div>
<tr>
    <td align="center"><input type="button" value="Print Div" onClick="printContent('changeMe')" />
    </td>
</tr> 
```

这是更清晰的图像 ![在此处输入图像描述](../Images/5b02fb38447b7337757622d3dc8af312.png) ![在此处输入图像描述](../Images/7cecb26429141940214889dd1e4cd931.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-05T13:58:43.163

对于 Chrome 和 Safari，您可以在 CSS 中添加以下内容：

```
@media print
{
    * {-webkit-print-color-adjust:exact;}
} 
```

# java - 在列表中查找所需条目的数量？

> ID：11290818
> 
> 赞同：4
> 
> 时间：2012-07-02T09:13:53.463
> 
> 标签：java, algorithm, comparison

设计一个算法，给定数组中的 n 个元素的列表，找到在列表中出现超过 n/3 次的所有元素。该算法应在线性时间内运行（ n >=0 ）

您应该使用比较并实现线性时间。没有散​​列/过多的空间/并且不使用标准的线性时间确定性选择算法？我觉得问题是自我阻塞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:17:21.087

**提示：**看看[Boyer 和 Moore 的线性时间投票算法](http://www.cs.utexas.edu/users/moore/best-ideas/mjrty/index.html)

**脚步：**

1.  在 0(n) 时间内使用中位数算法查找数组的中位数
2.  使用中值作为主元进行分区
3.  在a) 中值和第一个元素和 b) 中值和最后一个元素之间的每个部分中使用**moore 的投票算法**

4.  检查中位数是否是必需的元素。

有关解决此问题的更详细算法，您可以参考[**此**](http://www.cs.utexas.edu/users/misra/scannedPdf.dir/FindRepeatedElements.pdf)文档。真的，这将非常有帮助。

有关更多答案，请参阅[此类似帖子。](https://stackoverflow.com/questions/8362076/an-interesting-google-interview-algorithm-i-found-online-that-requires-linear-ti)

# ruby-on-rails - Rails 模型似乎有效但未验证

> ID：11290822
> 
> 赞同：1
> 
> 时间：2012-07-02T09:14:21.330
> 
> 标签：ruby-on-rails, database, validation, activerecord, model

我的模型看起来像这样，没什么特别的：

```
# Table name: invoices
#
#  id               :integer         not null, primary key
#  total            :float
#  discount         :float
#  description      :text
#  created_at       :datetime        not null
#  updated_at       :datetime        not null
#  company_id       :integer
#  secret           :string(255)
#  address_id       :integer
#  price_per_credit :float
#  paid             :boolean 
```

我可以在服务器和 Rails 控制台中创建它的实例，如果我调用`.valid?`它们，这些实例将返回 true（出于测试目的，我关闭了所有验证）。

```
1.9.3p194 :001 > i = Invoice.new
 => #<Invoice id: nil, total: nil, discount: nil, description: nil, created_at: nil, updated_at: nil, company_id: nil, secret: nil, address_id: nil, price_per_credit: nil, paid: nil> 
1.9.3p194 :002 > i.valid?
 => true 
```

但是，由于某种原因，我无法将这些实例保存到数据库中。

```
1.9.3p194 :003 > i.save
   (0.3ms)  begin transaction
   (0.1ms)  rollback transaction
 => false 
```

在本地我使用 sqlite，生产服务器正在运行 MySQL，但两者都显示这种行为。我不确定该怎么做才能调试它。我确实跑`db:migrate`了，我的宝石是最新的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T09:38:29.987

原来我有一个`before_create`返回错误的过滤器，导致保存过程停止。为了解决这个问题，我添加`nil`到类中，如下所示：

```
# BEFORE:
def set_paid
    self.paid = false
end

# AFTER:
def set_paid
    self.paid = false
    nil
end 
```

希望这对其他人也有帮助！

# c# - 如何创建一个日志文件来记录在 C# 中复制的每个文件的详细信息？

> ID：11290824
> 
> 赞同：-2
> 
> 时间：2012-07-02T09:14:25.680
> 
> 标签：c#, asp.net, logfile

我正在开发一个从远程服务器读取文件并将其复制到本地驱动器的应用程序。

我用来读写文件的代码是 -

```
string saveTo1 = savePath + @"\" + filename[i];
                byte[] buffer = new byte[32768];
                using (Stream input = getResponse.GetResponseStream())
                {
                    using (FileStream output = new FileStream(saveTo1, FileMode.OpenOrCreate))
                    {
                        int bytesRead;

                        while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
                        {
                            output.Write(buffer, 0, bytesRead);
                        }
                        output.Close();
                    }
                } 
```

如何创建一个日志文件来跟踪文件复制的详细信息，并记录复制文件时是否有任何错误？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:24:16.283

您可以通过不同的方式登录。

*   EventLogger（正如已经建议的）
*   自定义文件日志（如已回答）
*   日志引擎：我建议你 [log4net](http://logging.apache.org/log4net/)。它非常强大且高度可定制。

无论如何，我会以这种方式塑造代码，其中 MyLogManager 实现了以前的解决方案之一：

```
string saveTo1 = savePath + @"\" + filename[i];
byte[] buffer = new byte[32768];
try
{
            using (Stream input = getResponse.GetResponseStream())
            {
                using (FileStream output = new FileStream(saveTo1, FileMode.OpenOrCreate))
                {
                    int bytesRead;

                    while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
                    {
                        output.Write(buffer, 0, bytesRead);
                    }
                    output.Close();
                }
            }
    //logging good news and info
    MyLogManager("Good news", FileDetails);
}
catch(Exception ex)
{
    //logging bad news and exceptions info
    MyLogManager("Bad news", ExceptionDetails);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:19:58.140

网上有很多可用的日志记录框架。我会建议[NLog](http://nlog-project.org/)。下载并将其包含在您的项目中。您可以执行以下方法，

```
try
{
        //Write your code here
        //OnSuccess : NLogger.Debug("file copied")

}
catch(Exception)
{
   NLogger.Error("Exception Details");
} 
```

使用 NLog 处理存档、文件句柄等有很多优点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:16:01.803

是的，这是完全可能的。只需使用 system.io 文件操作创建一个文件，然后为每个复制的文件打开日志文件并添加一行。如果您有异常，那么您可以简单地将异常详细信息复制到日志文件中，而不是抛出它并破坏应用程序。

我更喜欢使用这种方法，因为您可以对其进行定制以完全满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T09:22:21.167

你想要的是一个简单的日志。你可以让它更有用。

在这里检查：

[.NET 日志工具和库](http://www.dotnetlogging.com/)

# android - 当我的代码中的数据匹配时，如何在后台运行弹出对话框

> ID：11290829
> 
> 赞同：0
> 
> 时间：2012-07-02T09:14:37.140
> 
> 标签：android

我有一个`Date`数组，它在我的应用程序中的各个位置存储日期和时间，例如：

```
private Date    m_DateTimeArray[];

m_DateTimeArray = new Date[Utilities.DATE_TIME_MAX_COUNT];

m_DateTimeArray[0] = 1-july-2012 12:30:00
m_DateTimeArray[1] = 1-july-2012 01:00:00
m_DateTimeArray[2] = 1-july-2012 02:30:00
m_DateTimeArray[3] = 1-july-2012 03:15:00
m_DateTimeArray[4] = 1-july-2012 04:20:00
m_DateTimeArray[5] = 1-july-2012 05:00:00
m_DateTimeArray[6] = 1-july-2012 06:30:00 
```

现在我退出我的应用程序，所以现在在后台我想要的是，每当我的设备当前日期与存储在数组中的这个日期匹配时，它就会弹出一个包含一些信息的对话框，同样每当我的当前日期与数组中存储的下一个日期匹配时它再次弹出一个对话框。因此，无论我的应用程序是否处于运行状态，整个过程都应该运行。那么如何做到这一点。我经历了许多示例，例如`AlarmManager`，`IntetService`服务，但无法获得我想要的结果。因此，如果有人处理此类问题，请帮助我解决此问题。

**我的主要活动代码**

```
public class AndroidAlarmService extends Activity 
{
private PendingIntent pendingIntent;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button buttonStart = (Button)findViewById(R.id.startalarm);
    Button buttonCancel = (Button)findViewById(R.id.cancelalarm);

    buttonStart.setOnClickListener(new Button.OnClickListener()
    {
        @Override
        public void onClick(View arg0) 
        {
            Intent myIntent = new Intent(AndroidAlarmService.this, MyAlarmService.class);
            pendingIntent = PendingIntent.getService(AndroidAlarmService.this, 0, myIntent, 0);

            AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            calendar.add(Calendar.SECOND, 20);
            alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);

            Toast.makeText(AndroidAlarmService.this, "Start Alarm", Toast.LENGTH_LONG).show();
        }});

    buttonCancel.setOnClickListener(new Button.OnClickListener()
    {
        @Override
        public void onClick(View arg0) 
        {
            AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
            alarmManager.cancel(pendingIntent);

            // Tell the user about what we did.
            Toast.makeText(AndroidAlarmService.this, "Cancel!", Toast.LENGTH_LONG).show();
        }});

}
} 
```

**我的警报服务中的代码**

```
public class MyAlarmService extends IntentService 
{   
public void onCreate() 
{
    super.onCreate();
}

public MyAlarmService() 
{
    super("MyAlarmService");
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    super.onStartCommand(intent, startId, startId);
    Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG).show();
    return START_STICKY;
}

@Override
protected void onHandleIntent(Intent intent) 
{
    Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG).show();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:34:32.327

有 2 种方法，例如使用 Action TIME_TICK 制作一个广播接收器和使用 AlarmManager，但在阅读您的要求时，只有一种首选方法是**使用 AlarmManager**。

每当生成 DATE Array 中的数据时，您需要为 Array 的每个元素设置一个警报。

我相信您已经尝试了许多网上可用的示例，然后我告诉您再次使用它们[示例](http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html)您将按原样使用此示例，您只需要更改代码中的一件事，就像他们在那里添加的`cal.add(Seconds,10);`那样*取而代之的是，*您必须**添加当前时间和日期数组元素 time 的差异**。

示例中的其余代码将保持原样。

编辑尝试编写代码

```
 for(int i=0;i<dateArray.length();i++)
    {
    Intent myIntent = new Intent(AndroidAlarmService.this, MyAlarmService.class); 
    pendingIntent = PendingIntent.getService(AndroidAlarmService.this, 0, myIntent, 0); 

    AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE); 

    Calendar calendar = Calendar.getInstance(); 
    calendar.setTimeInMillis(System.currentTimeMillis()); 
    calendar.add(Calendar.MILLISECOND, diff(dateArray[i])); 
    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent); 

    Toast.makeText(AndroidAlarmService.this, "Start Alarm", Toast.LENGTH_LONG).show(); 
    }

    long diff(Date date) {
        long difference = 0;
        try {

            // set current time
            Calendar c = Calendar.getInstance();
            difference = date.getTime() - c.getTimeInMillis();
            if (difference < 0) {
                difference = difference * -1;
                difference = 86400000 - difference;
            }
        } catch (Exception e) {
            // TODO: handle exception
        }
        return difference;
    } 
```

# linux - 从 bash 脚本中检查自动完成是否已初始化

> ID：11290833
> 
> 赞同：3
> 
> 时间：2012-07-02T09:14:56.660
> 
> 标签：linux, bash, shell, autocomplete, sh

我正在寻找一种方法来从我的 shell 脚本中检查脚本特定完成是否已由用户使用初始化`complete -F ...`

我希望此检查打印出有关如何初始化完成的建议，例如：

`Warning: Auto completion is not initialized. Please run : source ....; complete -F ...`

问题是在子shell中运行的脚本没有关于用户工作的父shell的“完整”环境的信息。

所以`complete -p| grep my-script-name`永远不要返回任何结果。

用户应该运行“源代码”和“完成”命令或手动将它们添加到他的 .bashrc 中，因为我们正在一个无法访问 bash 完成系统目录的服务器上工作。

或者，如果您知道从脚本中初始化（而不仅仅是检查）自动完成的方法，我会很乐意接受它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:21:00.700

要么您希望每个用户都使用 bash 补全（我认为这不好，例如我更喜欢将其关闭），要么让用户自己决定，但是让他们在每个 TABTAB 上打印此消息是一种威胁，你不觉得吗？

我会将您认为每个用户都应该运行的内容放入 /etc/bash.bashrc 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:35:48.973

您的脚本可以访问父 shell 的此类信息的唯一方法是包含它而不是作为子 shell 执行。您可以设计您的脚本，使其无论是运行还是包含都可以正常工作，而不是指导您的用户他们可以包含一些配置。

然后，您可以简单地通知您的用户，如果他们想要启用完成，他们需要包含您的脚本，而不是将其作为可执行脚本运行（根据需要使用 source 或 . 的指令）。

但是，在这种情况下，我倾向于将此信息添加到文档中或将其添加到始终显示的横幅中（但可以使用 -q 之类的选项开关禁用），而不是支持两种运行脚本的模式（因为增益太小了）。

# objective-c - STAssertTrue 没有按我的预期工作

> ID：11290838
> 
> 赞同：1
> 
> 时间：2012-07-02T09:15:12.183
> 
> 标签：objective-c, ios, xcode, unit-testing

我在单元测试中有这两行。如果我注释掉`STAssertTrue`测试，数据将毫无问题地写入文件并且写入文件是`YES`.

```
BOOL writeResult = [winePDF writeToFile:wineDocumentDirectoryFilename atomically:YES];
STAssertTrue((writeResult), @"Didn't write to file"); 
```

我希望这个测试能够通过，但它失败了。我试过了

```
STAssertEquals(YES, writeResult, @"Didn't write to file"); 
```

这也失败了。

在单元测试中没有做太多，所以在期待您的消息灵通的答案时拍了拍我的额头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T06:05:30.533

您可以使用以下代码获得更好的调试选项：

```
if( ! writeResult) {
    STFail(@"Didn't write to file");
} 
```

因此，您将确定您的测试代码不工作或您的代码有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:46:58.067

你的代码对我来说看起来是正确的。你确定写成功了吗？你确定 winePDF 不是空的吗？

我建议在你的第一行之前添加这个：

```
STAssertNotNil(winePDF, @"winePDF should not be nil"); 
```

# c# - 字符串的扩展在 C# 中返回该字符串的意外值

> ID：11290841
> 
> 赞同：3
> 
> 时间：2012-07-02T09:15:14.377
> 
> 标签：c#

也许这个问题听起来不好或太简单了。但在这种情况下不适合我。

我的问题是：我为字符串创建了一个扩展，比如

```
public static void SetString( this string aString, string anotherString ) {

         aString = anotherString ;

         // process info for that string ... (database, files, etc)
      } 
```

如果我像这样调用该扩展名：

```
string anExistingString = "123";
anExistingString.SetString("Other value");

Console.Write(anExistingString); 
```

但返回`123`而不是`Other value`...

我的错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:16:08.973

这是不可能的扩展方法。对类变量的引用是按值传递的，为了给方法中传递的值分配一个新值，您需要使用一个`ref`参数：

```
public void SetString(ref string aString, string anotherString)
{
  aString = anotherString;
} 
```

就我个人而言，我认为`ref`和`out`参数是一种代码气味，它通常意味着该方法负责不止一件事，或者正在做不应该做的事情。在您的示例中，赋值比调用方法更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T09:16:36.690

您也可以查看我的文章：[Extension Methods](http://pranayamr.blogspot.com/2010/11/extension-methods.html)其中我谈到了字符串加密扩展方法

您需要从将为您完成工作的函数返回值..

```
public static string SetString( this string aString, string anotherString)
{
    return anotherString ;
}

string anExistingString = "123";
anExistingString = anExistingString.SetString("Other value"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:20:57.037

当调用会更改原始值的函数时，.net 中的默认行为是返回值并重新分配该值（例如，子字符串不会更改值，但会返回更改后的值）。（现在你可以有一个带有*ref*参数的静态过程，但使用扩展方法是不可能的）

```
public static string SetString( this string aString, string anotherString ) {    
        //process logic here
        return anotherSTring;
 }

 //call
string anExistingString = "123";
anExistingString  = anExistingString.SetString("Other value"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T09:28:59.160

您可以尝试调用`String.Copy`方法：

```
public static void SetString(this string aString, string anotherString )
 {        
      aString = string.Copy(anotherString);       
 } 
```

# javascript - Safari 上的 Javascript onLoad 不断加载

> ID：11290844
> 
> 赞同：1
> 
> 时间：2012-07-02T09:15:33.303
> 
> 标签：javascript, safari, onload

我有一个 javascript 函数，我想在页面加载时调用它。所以我使用body onLoad标签调用了这个函数——

```
<body onload="function();" > 
```

这可行，但在 Safari 浏览器上，即使在函数完成执行后，应用程序仍会继续显示加载符号。当我使用页面上的按钮单击调用相同的函数时，Safari 表现良好，并且在函数执行后不显示加载符号。

我在 Chrome 和 Firefox 上进行了测试，我没有看到这个问题。我还尝试了其他在加载时调用它的方法 -

```
$(document).ready(function() {
});
$(document).onload(function() {
}); 
```

但问题在 Safari 上仍然存在。有任何想法吗 ？

# android - 更新：旋转超过屏幕尺寸的位图

> ID：11290847
> 
> 赞同：1
> 
> 时间：2012-07-02T09:15:47.137
> 
> 标签：android, matrix, touch, image-rotation

我的图像更大，但只有一部分必须显示在屏幕上。我已经做到了。我的问题是，图像必须用手指旋转。下面的代码可以在小图像上正常工作。但是在我的图像上它有一个错误的行为，上下重新定位图像并奇怪地旋转它。如何使我的图像正常旋转？，作为一个小图像。然后我必须能够触摸到颜色。[我在这里](https://stackoverflow.com/questions/10933130/how-to-detect-wich-part-of-an-image-has-been-touched-when-image-is-rotated)得到了答案，但我仍然需要努力。但首先，请告诉我如何解决旋转问题，如果你对第二个问题有想法，我想听听他们的意见。

这是图像：

![这是图像](../Images/8a7cbafd24455fb2a7b85919accb806d.png)

这是它应该如何出现在屏幕上：

![这就是它应该出现在屏幕上的方式](../Images/64a8f31c3741080b00301dff6838481f.png)

**XML 布局**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView android:id="@+id/imag"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:src="@drawable/roata"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="-200dp"
    android:scaleType="center"/>
 </RelativeLayout> 
```

**Java代码**：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    picture = (ImageView)findViewById(R.id.imag);
    picture.setOnTouchListener(onTableTouched);
}

public android.view.View.OnTouchListener onTableTouched = new android.view.View.OnTouchListener()
{
    public boolean onTouch(View v, MotionEvent evt)
    {
        double r = Math.atan2(evt.getX() - picture.getWidth() / 2, picture.getHeight() / 2 - evt.getY());
        int rotation = (int) Math.toDegrees(r);

        if (evt.getAction() == MotionEvent.ACTION_DOWN)
        {
            //
        }

        if (evt.getAction() == MotionEvent.ACTION_MOVE)
        {
           updateRotation(rotation);
        }

        if (evt.getAction() == MotionEvent.ACTION_UP)
        {
            //
        }

        return true;
    }
};

private void updateRotation(double rot)
{
    float newRot = new Float(rot);

    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.roata);

    Matrix matrix = new Matrix();
    matrix.postRotate(newRot - 50);

    Bitmap redrawnBitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
    picture.setImageBitmap(redrawnBitmap);
} 
```

**更新：** 因为我无处可去`Bitmap`，`Matrix`我试图调整`RotateAnimtaion()`以得到尽可能相似的东西。我认为修改第二个参数和动画动态的持续时间，我们可以在不改变 Y 位置的情况下得到类似的结果。现在，问题是图像是裁剪的，我认为是因为`scaleType="center"`. 我将发布代码和屏幕截图。这可以改进吗？

```
Animation a = new RotateAnimation(0.0f, param,
            Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF,
            0.5f);
    a.setFillEnabled(true);
    a.setFillAfter(true);
    a.setDuration(param);

  picture.startAnimation(a); 
```

![在此处输入图像描述](../Images/65eb49e9da3fbf6a7aef3be30b7e005b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:25:20.640

我认为问题是，您试图在每个 updateRotation() 调用中重绘相同的位图。

去掉这条线怎么样

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.roata); 
```

from`updateRotation(double rot)`并让它全局声明，这样您就不需要一次又一次地创建相同的位图，这就是您获得 OutOfMemory 的原因。

尝试这个，

```
Bitmap bitmap=null;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    picture = (ImageView)findViewById(R.id.imag);
    bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.roata);
    picture.setOnTouchListener(onTableTouched);
}

public android.view.View.OnTouchListener onTableTouched = new android.view.View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent evt) {
        double r = Math.atan2(evt.getX() - picture.getWidth() / 2, picture.getHeight() / 2 - evt.getY());
        int rotation = (int) Math.toDegrees(r);

        if (evt.getAction() == MotionEvent.ACTION_DOWN) {
            //
        }

        if (evt.getAction() == MotionEvent.ACTION_MOVE) {
           updateRotation(rotation);
        }

        if (evt.getAction() == MotionEvent.ACTION_UP) {
            //
        }

        return true;
    }
};

private void updateRotation(double rot) {
    float newRot = new Float(rot);

    Matrix matrix = new Matrix();
    matrix.postRotate(newRot - 50);

    Bitmap redrawnBitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);
    picture.setImageBitmap(redrawnBitmap);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:28:05.953

只需将 Bitmap 声明为全局：

```
private WeakReference<Bitmap> bitmap; 
```

并使用

```
bitmap =new WeakReference(BitmapFactory.decodeResource(getResources(), R.drawable.roata)); 
```

代替

```
bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.roata); 
```

# iphone - UITableViewCell 中的特殊自定义复选标记

> ID：11290849
> 
> 赞同：0
> 
> 时间：2012-07-02T09:16:00.370
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

据我了解，`UITableViewCellAccessoryTypeCheckmark`点击/取消点击该行时会出现 。

但是，我想制作一个始终可见的配件。像一个`Checkbox`或类似的东西。这是因为如果选择了该行，我想显示其他信息，但是如果`Checkbox`点击该行的右端，则应在其中出现一个勾号。

对不起，如果我不是很清楚。请向我寻求任何澄清。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:29:05.640

您必须创建自定义附件视图。在该视图中添加两个 UIImageView，并为复选框提供一个标签。

创建时：

```
#define CHECKBOX_TAG 123

UIView *customAccessoryView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 60, 30)] autorelease];
UIImageView *otherInfo = [[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 30, 30)] autorelease];
UIImageView *checkbox = [[[UIImageView alloc] initWithFrame:CGRectMake(30, 0, 30, 30)] autorelease];
checkbox.tag = CHECKBOX_TAG;
[customAccessoryView addSubview:otherInfo];
[customAccessoryView addSubview:checkbox];
cell.accessoryView = customAccessoryView; 
```

在显示时，如果选中，将复选框隐藏设置为 NO：

```
UIImageView *checkbox = [cell.accessoryView viewWithTag:CHECKBOX_TAG];
if(selected){
    checkbox.hidden = NO;
}else{
    checkbox.hidden = YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:19:03.153

如果你想要 a 的`UIKit`use`accessoryType`属性`UITableViewCell`。

```
@property(nonatomic) UITableViewCellAccessoryType accessoryType 
```

如果你真的想要一个自定义的使用`accessoryView`。

```
@property(nonatomic, retain) UIView *accessoryView 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:23:58.093

制作一个按钮并将其添加到您的*acceessoryView:*并像复选框一样使用它...这将解决您的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T09:22:46.857

您可以通过使用按钮来实现此目的。在单元格中创建一个带有未选中复选框图像的按钮，当用户单击此按钮时，更改要检查的按钮图像。

# batch-file - 将2个批处理文件写入1个

> ID：11290854
> 
> 赞同：0
> 
> 时间：2012-07-02T09:16:21.390
> 
> 标签：batch-file, command, cmd, uac

我有 2 个单独的批处理文件，第一个检查 UAC 是启用还是禁用。如果启用，它会调用“uac.bat”。

```
REG QUERY HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\System\ /v EnableLUA | FIND "0x1" >NUL && ( call uac.bat ) || ( echo Good day sir ) 
```

与上一个批处理文件位于同一文件夹中的“uac.bat”，弹出UAC提示：

```
@echo off

:: BatchGotAdmin
:-------------------------------------
REM  --> Check for permissions
>nul 2>&1 "%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system"

REM --> If error flag set, we do not have admin.
if '%errorlevel%' NEQ '0' (
    echo Requesting administrative privileges...
    goto UACPrompt
) else ( goto gotAdmin )

:UACPrompt
    echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
    echo UAC.ShellExecute "%~s0", "", "", "runas", 1 >> "%temp%\getadmin.vbs"

    "%temp%\getadmin.vbs"
    exit /B

:gotAdmin
    if exist "%temp%\getadmin.vbs" ( del "%temp%\getadmin.vbs" )
    pushd "%CD%"
    CD /D "%~dp0"
:-------------------------------------- 
```

我试过使用“调用”命令，但我做错了，因为即使我的 UAC 被禁用，它仍然会弹出 UAC 提示，就好像我的 UAC 已启用一样。如何解决这个问题？

谢谢转发:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:28:34.667

这应该将两者合二为一。

```
@echo off
REG QUERY HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\System\ /v EnableLUA | FIND "0x1" >NUL && ( goto :PROMPTUAC )
exit >nul

:PROMPTUAC
>nul 2>&1 "%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system"
if '%errorlevel%' NEQ '0' (
    echo Requesting administrative privileges...
    goto UACPrompt
) else ( goto gotAdmin )

:UACPrompt
echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
echo UAC.ShellExecute "%~s0", "", "", "runas", 1 >> "%temp%\getadmin.vbs"
"%temp%\getadmin.vbs"
exit /B

:gotAdmin
if exist "%temp%\getadmin.vbs" ( del "%temp%\getadmin.vbs" )
pushd "%CD%"
CD /D "%~dp0" 
```

# linq - 带有存储过程的 linq 的安全性和速度

> ID：11290859
> 
> 赞同：0
> 
> 时间：2012-07-02T09:16:37.767
> 
> 标签：linq, security, stored-procedures

我想在 asp.net 中使用带有存储过程的 linq，但如果它降低了信息的安全性，我更喜欢使用不带存储过程的 linq。有什么资料可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:08:30.950

将 linq 与存储过程一起使用的任何安全风险都与直接将存储过程与旧的 Db/SqlCommand 方法一起使用相同。我建议您查看 [LINQ-to-SQL 与存储过程？](https://stackoverflow.com/questions/14530/linq-to-sql-vs-stored-procedures)接受的答案很好地详细说明了彼此之间的优势。

# twitter-bootstrap - 获取未编译的 twitter 引导程序

> ID：11290861
> 
> 赞同：1
> 
> 时间：2012-07-02T09:16:51.750
> 
> 标签：twitter-bootstrap, less

我正在使用较少的 php，并希望实现 twitter 引导 CSS 文件的未编译版本。但是当我下载它时，我只得到编译版本。

我在哪里可以获得未编译的更少版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:18:29.010

你可以从 github [twitter bootstrap获得](https://github.com/twitter/bootstrap/)

# jquery - Jquery，在回调中设置函数参数

> ID：11290863
> 
> 赞同：1
> 
> 时间：2012-07-02T09:17:05.963
> 
> 标签：jquery, jquery-plugins

我正在尝试编写我的第一个 jquery 插件，但遇到了一些困难。

代码片段：

在这里，我正在初始化我的插件并设置 MyEvent 发生时应该执行的函数。

```
$("#myMap").MyPlugin({ myEvent: function() { alert("test"); } }); 
```

这是我的插件脚本中的功能

```
function setEvents(options) {
            $.each(options, function(event, fn) {
                if (typeof (fn) == 'function') {
                    if (event == "myEvent") {
                        $(myDiv).click(fn);
                    }
                }
            });
        } 
```

这很好用，但我想在事件发生时从插件中检索信息。基本上我想接收我在“setEvents”函数中设置的参数。

```
$("#myMap").MyPlugin({ myEvent: function(myParam) { alert(param); } }); 
```

我似乎无法弄清楚这一点，有人可以指出我正确的方向。

**更新：**我当前插件脚本的更完整片段

```
(function($) {
    var defaults = {
        width: 300,
        height: 300,
        myEvent: null
    };

    $.fn.myPlugin = function(options) {
        var options = $.extend(defaults, options); 
        var myDiv = $(this);
        return this.each(function() {
            setEvents(options);
        });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:22:55.777

由于事件被您的插件`myEvent`映射到`click`事件，您可以将参数映射传递给[click()](http://api.jquery.com/click/)以便最终将其传递给您的处理程序：

```
if (typeof(fn) == "function") {
    if (event == "myEvent") {
        $(myDiv).click({
            param: myParam
        }, fn);
    }
} 
```

然后你可以写：

```
$("#myMap").MyPlugin({
    myEvent: function(event) {
        alert(event.data.param);
    }
}); 
```

# jquery - asp.net 4.0应用中需要jQuery验证插件帮助

> ID：11290869
> 
> 赞同：-1
> 
> 时间：2012-07-02T09:17:34.083
> 
> 标签：jquery, asp.net-4.0, jquery-validate

我在 asp.net 4.0 应用程序中使用 jQuery 验证插件。

[**点击这里查看插件**](http://jquery.bassistance.de/validate/demo/)

我在页面上有两个按钮 1) 提交 2) 取消

当我单击提交按钮时，这会验证表单并显示适当的错误消息。

我使用取消按钮返回上一页。

但是现在当我单击取消按钮时，它也会显示错误消息。

我不想在单击取消按钮时验证表单。

我们怎么能这样做。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:29:00.427

如果没有看到您的代码，我会假设您的“取消”按钮也是`input[type=submit]`. 将其更改为`input[type=button]`，然后适当地处理它。

例如，您的“提交”按钮可能如下所示：

```
$(".selector").validate({
   submitHandler: function(form) {
       // do other stuff for a valid form
     form.submit();
   }
}); 
```

而您的“取消”按钮就像：

```
$("#cancel").click(function() {
     history.back(); // or window.location.href = ...your link
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:32:14.903

在没有看到标记的情况下，我假设您的取消按钮实际上是另一个提交按钮，并且您在代码隐藏中处理重定向。如果这是真的，点击取消按钮也会触发验证插件，因为它正在监听`onsubmit`事件。我有两个选择：

1.  使用超链接而不是按钮/输入元素。您必须对 URL 进行硬编码，或者在页面加载期间将其设置在代码隐藏中。
2.  在您的页面上将设置`UseSubmitBehavior`为 false `.aspx`，这应该会将标记更改为`<input type="submit" />`.

# c# - RC 更新后的 ASP.NET WebAPI XML 序列化

> ID：11290871
> 
> 赞同：3
> 
> 时间：2012-07-02T09:17:42.223
> 
> 标签：c#, asp.net-4.0, asp.net-web-api, asp.net-4.5

在 asp.net 4 RC 更新之前，我一直在使用 WebApi 来输出 XML。我的模型具有 XmlSerialization 属性`[XmlElement(ElementName = "the name")]`，因此我可以使用更友好的名称。

例如

```
[XmlElement(ElementName = "Branch")]
public string site_nm { get; set; } 
```

在 .net 4 RC 更新后，输出的 XML 会忽略这一点。

我知道 WebApi 中有些东西发生了变化，比如在返回时根据 OData 协议使方法返回值`IQueryable<T>`，您现在需要添加`[Queryable]`到您的方法中。

我需要添加一些东西来使序列化工作吗？我已通读更改说明，但看​​不到任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T09:29:57.263

您需要指示格式化程序使用 XmlSerializer：

```
GlobalConfiguration.Configuration.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

现在的默认值是 DataContractSerializer。

# ms-access - MS 访问：如何嵌入 JPEG 图像并预览它们？

> ID：11290874
> 
> 赞同：3
> 
> 时间：2012-07-02T09:17:51.310
> 
> 标签：ms-access, ms-access-2007

**我使用 Access 2007**

我创建了一个 OLE 字段来存储 JPEG，因此我可以轻松地将它们拖到 DATABASE 中。

这样可行。问题是：**此字段不显示 JPEG，而是显示通用 JPEG 拇指**，我需要双击打开 JPEG 并预览它。

有没有一种无需双击即可**预览 JPEG的方法？**

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:50:28.460

您将需要使用附件数据类型来显示 bmps 以外的任何内容。只有 bmp 图像将显示在 OLE 字段中（请参阅 Northwind 示例数据库以获取示例，员工表单显示存储在 OLE 字段中的 bmp 图像）。

或者，您可以存储图像的路径并使用一些 VBA 在您的表单中显示它。通常，最好存储图像的路径，而不是图像，即使数据库的大小限制更高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:52:13.667

您是否考虑过将数据库的图像条目存储为“文本”，并简单地存储图像的路径（//pics/mypic.jpg），而不是图像对象本身？如果您的数据库位于共享驱动器上，您可以在与数据库相同的文件夹中创建一个文件夹来保存您的图像。插入图像时，您可以有一个文本框并只需键入该图像的相对路径。这将防止您的数据库膨胀。从那里，它只是一些简单的代码来显示图片。

将数据库设置为仅存储图像的路径名后，您可以按照以下***简单***说明来了解如何在表单上显示这些图像：[Microsoft 知识库](http://support.microsoft.com/default.aspx?scid=kb;en-us;285820)

我最近将我的几个数据库从使用 OLE 转换为带有图片路径名的文本字段，我对此非常满意。

# silverlight - 统一堆栈面板中的元素大小

> ID：11290877
> 
> 赞同：0
> 
> 时间：2012-07-02T09:18:04.070
> 
> 标签：silverlight

我需要帮助统一堆栈面板中元素的大小

```
 void MainPageLoaded(object sender, RoutedEventArgs e)
    {
        var random = new Random();

        for (var i = 0; i < 5; i++)
        {
            var grid = new Grid();

            var border = new Border()
                             {
                                 Height = random.Next(50, 150),
                                 Width = random.Next(50, 150),
                                 Margin = new Thickness(10),
                                 BorderBrush = new SolidColorBrush(Colors.White),
                                 BorderThickness = new Thickness(1)
                             };

            grid.Children.Add(border);

            imageBoxesStackPanel.Children.Add(grid);
        } 
```

var h = imageBoxesStackPanel.Children.Max(n => n.DesiredSize.Height);

我想要实现的是在stackpanel中找到每个网格的最大高度和最大宽度并将其应用于所有网格。问题是所需的大小总是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:36:44.120

在 WPF 中`UniformGrid`可以完成这项工作，但不幸的是，默认情况下它没有为 Silverlight 实现。它有几种选择，例如[这个](http://www.jeff.wilcox.name/2009/01/uniform-grid/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:46:57.783

您只能在[measure/arrange pass](http://msdn.microsoft.com/en-us/library/ms745058.aspx#LayoutSystem_Measure_Arrange)之后以自定义方式执行此操作，在此之前尺寸将不可见。之后（`OnLoaded`如果有的话），您可以使用网格的`ActualHeight`and `ActualWidth`。

简而言之：

```
var h = imageBoxesStackPanel.Children.Max(n => n.ActualHeight); 
```

然而，这对性能不利，并且会触发另一个布局传递。

备注：在 WPF 中，最好的解决方案是 a`SharedSizeGroup`或 a `UniformGrid`。这在 Silverlight 中没有实现，但有人已经[实现了](http://die-rooter.de/ITworks/archives/27-SharedSize-Grid-with-Silverlight.html)。

# jquery - 网页中的可滚动菜单

> ID：11290878
> 
> 赞同：0
> 
> 时间：2012-07-02T09:18:07.440
> 
> 标签：jquery, asp.net

我必须创建一个菜单，该菜单会根据单击“下一步”和“上一个”按钮而不断移动。实现这一目标的最佳方法是什么。一个样本会对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:35:05.810

请查看 ASP.NET 内置向导控件。

> [演练 ASP.NET 向导控件](http://weblogs.asp.net/sreejukg/archive/2012/01/21/walkthrough-wizard-control-in-asp-net.aspx)
> 
> [向导控制:代码项目](http://www.codeproject.com/Articles/15804/ASP-NET-2-0-Wizard-Control)

**[在 ASP.NET 2.0 中](http://www.4guysfromrolla.com/articles/031506-1.aspx)**编辑自定义分页****

# database - 在 Rails 3 上从 sqlite3 迁移到 postgresql？

> ID：11290891
> 
> 赞同：1
> 
> 时间：2012-07-02T09:19:14.113
> 
> 标签：database, ruby-on-rails-3, sqlite, postgresql

在帖子之后：[如何从 SQLite 迁移到 PostgreSQL（Rails）](https://stackoverflow.com/questions/4248072/how-to-migrate-from-sqlite-to-postgresql-rails)

我`sqlite3 development.sqlite3 .dump | psql mypgdb mypguser`在我的 Rails 应用程序中运行，我收到此错误（我的应用程序中的所有模型/表都相同）：

```
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  current transaction is aborted, commands ignored until end of transaction block
ERROR:  syntax error at or near "AUTOINCREMENT"
LINE 1: ...E TABLE "projects" ("id" INTEGER PRIMARY KEY AUTOINCREM... 
```

将不胜感激一些建议/修复。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:23:08.217

这对于 PostgreSQL 来说不是有效的 SQL——你可能想要一个[SERIAL](http://www.postgresql.org/docs/9.2/static/datatype-numeric.html#DATATYPE-SERIAL)而不是 INTEGER AUTOINCREMENT。您可能还想[手动将这些序列的 nextval 设置](http://www.postgresql.org/docs/9.2/static/functions-sequence.html)为 max(id)+1。

然后，您将需要处理大多数无类型的 sqlite 和严格的 PostgreSQL 之间的所有其他差异。

然后，您将希望停止在开发设置和部署中使用不同的系统。只会让自己痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:18:16.410

我建议您使用`gem "yaml_db"`，其目的是将表从一个数据库移动到另一个数据库。 [https://github.com/ludicast/yaml_db#readme](https://github.com/ludicast/yaml_db#readme)

你可以通过这个 gem 和一个很好的文档来完成所有的事情。它有 2 个基本命令，所以没什么难的。

# mysql - mysql update selected

> ID：11290893
> 
> 赞同：-1
> 
> 时间：2012-07-02T09:19:16.020
> 
> 标签：mysql, selected

I have a mysql query that selects a number of records

```
SELECT
leads.Affiliate_ID,
leads.first_name,
leads.last_name,
leads.email,
leads.loan_purpose,
leads.home_tel,
leads.mobile_tel,
leads.postcode,
leads.house_num,
leads.app_time,
leads.new_application_date,
leads.payment_accepted,
leads.sms
FROM
leads
WHERE
leads.Affiliate_ID =  '23' AND
leads.sms IS NULL  AND
leads.payment_accepted IS NULL  AND
leads.new_application_date < (NOW() - INTERVAL 5 DAY) 
```

how do I now update `leads.sms` to `1` on all selected records

Any help or suggestions would be great

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:22:16.820

If I understood your question well, try:

```
UPDATE
leads SET sms = 1
WHERE
Affiliate_ID =  '23' AND
sms IS NULL  AND
payment_accepted IS NULL  AND
new_application_date < (NOW() - INTERVAL 5 DAY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:21:13.660

Simply replace everything before the WHERE by the standard [update syntax](http://dev.mysql.com/doc/refman/5.0/en/update.html) :

```
update leads set sms=1
WHERE
leads.Affiliate_ID =  '23' AND
leads.sms IS NULL  AND
leads.payment_accepted IS NULL  AND
leads.new_application_date < (NOW() - INTERVAL 5 DAY) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T10:34:29.863

To update the data, you don't need to select the records using select statement. You need to put the condition using `WHERE` clause as shown below. Using `WHERE` clause, the records are updated for the row who satisfy that condition.

```
UPDATE
leads SET sms = 1
WHERE
Affiliate_ID =  '23' AND
sms IS NULL  AND
payment_accepted IS NULL  AND
new_application_date < (NOW() - INTERVAL 5 DAY) 
```

Also in your question at all places you have used `leads.FIELD_NAME`. When there is one table, you don't need to use table name before field name. Table name is needed when JOINS are used using two or more tables.

# apache-flex - flex 属性被忽略

> ID：11290894
> 
> 赞同：0
> 
> 时间：2012-07-02T09:19:16.830
> 
> 标签：apache-flex, twitter, properties

我正在尝试让 itemrenderer 显示推文中的文本，以及（如果有的话）上传的图像。文本显示正常，但无论我做什么，图像都不会显示。难道是因为我指的是一个并不总是存在的属性，在这种情况下，itemrenderer 只是忽略所有推文的属性？

这是我的代码：

```
 [Bindable(event="dataChange")]
        public function get data():Object
        {
            return _data;
        }
        public function set data(value:Object):void
        {
            _data = value;
            dispatchEvent(new Event("dataChange"));
            }   
    ]]>
</fx:Script>

<s:Label text="{data.text}"
         width="100%"
         styleName="tweetlist"/>
<s:Image id="tweetImage" source="{data.entities.media.creative.media_url}"/> 
```

我对 Flex 很陌生，到目前为止，我设法通过将来自不同来源的代码粘贴在一起来使事情正常进行。因此，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:13:18.930

我看到您正在绑定到一个深度嵌套的属性：`data.entities.media.creative.media_url`. 如果您希望绑定正常工作，则必须确保该路径上的每个属性都设置为可绑定。

具体来说：

*   `data`必须在 ItemRenderer 上可绑定；默认情况下，当您扩展时`ItemRenderer`，我将删除您的自定义 Bindable 声明和事件调度（甚至`data`完全删除 getter/setter 覆盖）
*   数据实例的`entities`属性必须声明为 Bindable
*   实体实例的`media`属性必须声明为 Bindable
*   以此类推一直到`media_url`物业

但是，访问这样的深层嵌套属性并不被认为是良好的编码实践（通常，不仅仅是在 Flex 中），所以我建议您封装您需要的属性，以便您可以像这样绑定到它：

```
<s:Image id="tweetImage" source="{data.media_url}" /> 
```

从“干净代码”的角度来看，这不仅会更好，而且如果列表中有很多项目，也会提高性能。（因为绑定的数量将减少 5 倍）

另一种解决方案是不使用数据绑定并简单地设置`tweetImage`的`source`属性：

```
override public function set data(value:Object):void {
    super.data = value;
    tweetImage.source = data.entities.media.creative.media_url;
} 
```

# primefaces - 在 primefaces 中使用相同格式的两个文件上传

> ID：11290895
> 
> 赞同：0
> 
> 时间：2012-07-02T09:19:17.093
> 
> 标签：primefaces

我正在使用 Primefaces 3.2。我正在以相同的形式使用两个文件上传处理程序。当我首先上传文件时，文件名会反映在两个上传处理程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:00:04.053

不支持同一表单中的多个高级文件上传器。这在 primefaces 用户指南第 181 页中有说明。您可以尝试使用基本文件上传。

# iphone - MPMoviePlayerController 无法读取文档路径中的文件

> ID：11290896
> 
> 赞同：1
> 
> 时间：2012-07-02T09:19:19.990
> 
> 标签：iphone, ios, mpmovieplayercontroller, document

我录制了一个视频并将其复制到路径

```
NSURL *videoPath =[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUsersDomainMask,YES) objectAtIndex:0],@"/output.mov"]]; 
```

然后使用 MPMoviePlayer 播放：

```
MPMoviePlayerController *player = [[MPMovieController alloc] initWithContentURL:videoPath]; 
```

这不起作用。视频无法加载。文件路径是

```
"/var/mobile/Applications/12341235-12354125-123412-41/Documents/output.mov" 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T09:24:50.973

出于某种奇怪的原因，即使`MPMoviePlayerController`某些 s 被视为有效对象，它似乎也不喜欢它们。`NSURL`

“秘密”是获取文件路径`NSString`，然后用于`[NSURL fileURLWithPath:URLStringPath]`创建用于创建`MPMoviePlayerController`实例的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:22:37.740

我想你忘记为你的文件路径设置 / 像这样使用

```
NSURL *videoPath =[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%@",[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUsersDomainMask,YES) objectAtIndex:0],@"output.mov"]]; 
```

# javascript - 检测输入框何时由键盘填充，何时由条形码扫描仪填充。

> ID：11290898
> 
> 赞同：36
> 
> 时间：2012-07-02T09:19:24.873
> 
> 标签：javascript, barcode-scanner

我如何以编程方式检测何时通过在键盘上键入填充文本输入以及何时通过条形码扫描仪自动填充文本输入？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-12T06:33:43.843

我写了这个答案，因为我的条形码扫描仪摩托罗拉 LS1203 生成了按键事件，所以我不能使用 Utkanos 的解决方案。

我的解决方案是：

```
var BarcodeScanerEvents = function() {
     this.initialize.apply(this, arguments);
};

BarcodeScanerEvents.prototype = {
    initialize: function() {
       $(document).on({
          keyup: $.proxy(this._keyup, this)
       });
    },
    _timeoutHandler: 0,
    _inputString: '',
    _keyup: function (e) {
        if (this._timeoutHandler) {
            clearTimeout(this._timeoutHandler);
            this._inputString += String.fromCharCode(e.which);
        } 

        this._timeoutHandler = setTimeout($.proxy(function () {
            if (this._inputString.length <= 3) {
                this._inputString = '';
                return;
            }

            $(document).trigger('onbarcodescaned', this._inputString);

            this._inputString = '';

        }, this), 20);
    }
}; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-07-24T15:17:25.860

改编了上面超级有用的[Vitall 答案，](https://stackoverflow.com/a/15354814/7448114)以使用 IIFE 而不是原型设计，以防万一现在看到这个的人对此感兴趣。

这也使用了“keypress”事件而不是 keyup，这使我能够可靠地使用 KeyboardEvent.key，因为 KeyboardEvent.which 现在已被弃用。我发现这适用于条形码扫描以及磁条卡刷卡。

根据我的经验，使用 keyup 处理刷卡会导致我做额外的工作来处理“Shift”键码，例如 Shift 码后面会跟着表示“/”的代码，预期的字符是“？”。使用'keypress'也解决了这个问题。

```
(function($) {
    var _timeoutHandler = 0,
        _inputString = '',
        _onKeypress = function(e) {
            if (_timeoutHandler) {
                clearTimeout(_timeoutHandler);
            }
            _inputString += e.key;

            _timeoutHandler = setTimeout(function () {
                if (_inputString.length <= 3) {
                    _inputString = '';
                    return;
                }
                $(e.target).trigger('altdeviceinput', _inputString);
                _inputString = '';

            }, 20);
        };
    $(document).on({
        keypress: _onKeypress
    });
})($); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-02T09:56:41.430

好吧，条形码不会触发任何关键事件，因此您可以执行以下操作：

```
$('#my_field').on({
    keypress: function() { typed_into = true; },
    change: function() {
        if (typed_into) {
            alert('type');
            typed_into = false; //reset type listener
        } else {
            alert('not type');
        }
    }
}); 
```

根据您想要评估的时间，您可能希望不是在更改时而是在提交时进行此检查，或者其他。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-12-23T10:50:13.130

您可以尝试以下示例，使用 jQuery 插件[https://plugins.jquery.com/scannerdetection/](https://plugins.jquery.com/scannerdetection/)

其高度可配置、基于时间的扫描仪检测器。它可以用作基于前缀/后缀、基于时间的条码扫描器的解决方案。

使用教程和最佳实践，以及关于各种条码扫描仪模型以及如何处理它的讨论。[http://a.kabachnik.info/jquery-scannerdetection-tutorial.html](http://a.kabachnik.info/jquery-scannerdetection-tutorial.html)

```
$(window).ready(function(){

	//$("#bCode").scannerDetection();

	console.log('all is well');

	$(window).scannerDetection();
	$(window).bind('scannerDetectionComplete',function(e,data){
            console.log('complete '+data.string);
            $("#bCode").val(data.string);
        })
        .bind('scannerDetectionError',function(e,data){
            console.log('detection error '+data.string);
        })
        .bind('scannerDetectionReceive',function(e,data){
            console.log('Recieve');
            console.log(data.evt.which);
        })

        //$(window).scannerDetection('success');
```

```
<input id='bCode'type='text' value='barcode appears here'/>
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-06-11T09:42:17.133

对于 ES6 2019 版本的 Vitall 答案。

```
const events = mitt()

class BarcodeScaner {
  initialize = () => {
    document.addEventListener('keypress', this.keyup)
    if (this.timeoutHandler) {
      clearTimeout(this.timeoutHandler)
    }
    this.timeoutHandler = setTimeout(() => {
      this.inputString = ''
    }, 10)
  }

  close = () => {
    document.removeEventListener('keypress', this.keyup)
  }

  timeoutHandler = 0

  inputString = ''

  keyup = (e) => {
    if (this.timeoutHandler) {
      clearTimeout(this.timeoutHandler)
      this.inputString += String.fromCharCode(e.keyCode)
    }

    this.timeoutHandler = setTimeout(() => {
      if (this.inputString.length <= 3) {
        this.inputString = ''
        return
      }
      events.emit('onbarcodescaned', this.inputString)

      this.inputString = ''
    }, 10)
  }
}
```

可以像这样与反应钩子一起使用：

```
const ScanComponent = (props) => {
  const [scanned, setScanned] = useState('')
  useEffect(() => {
    const barcode = new BarcodeScaner()
    barcode.initialize()
    return () => {
      barcode.close()
    }
  }, [])

  useEffect(() => {
    const scanHandler = code => {
      console.log(code)
      setScanned(code)
    }

    events.on('onbarcodescaned', scanHandler)
    return () => {
      events.off('onbarcodescaned', scanHandler)
    }
  }, [/* here put dependencies for your scanHandler ;) */])
  return <div>{scanned}</div>
}
```

我使用 npm 中的 mitt 进行活动，但你可以使用任何你喜欢的东西；）

在 Zebra DS4208 上测试

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-08-03T07:35:16.973

Vitall 的解决方案只有在您已经按下至少一个键的情况下才能正常工作。如果你不这样做，第一个字符将被忽略（if(this._timeoutHandler) 返回 false 并且不会附加字符）。

如果您想立即开始扫描，可以使用以下代码：

```
var BarcodeScanerEvents = function() {
	this.initialize.apply(this, arguments);
};

BarcodeScanerEvents.prototype = {
	initialize : function() {
		$(document).on({
			keyup : $.proxy(this._keyup, this)
		});
	},
	_timeoutHandler : 0,
	_inputString : '',
	_keyup : function(e) {
		if (this._timeoutHandler) {
			clearTimeout(this._timeoutHandler);
		}
		this._inputString += String.fromCharCode(e.which);

		this._timeoutHandler = setTimeout($.proxy(function() {
			if (this._inputString.length <= 3) {
				this._inputString = '';
				return;
			}

			$(document).trigger('onbarcodescaned', this._inputString);

			this._inputString = '';

		}, this), 20);
	}
};
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-05-14T13:23:24.123

如果您可以为条形码扫描仪设置前缀，我建议这样做（我更改了一点 Vitall 代码）：

```
var BarcodeScanner = function(options) {
     this.initialize.call(this, options);
};
BarcodeScanner.prototype = {
    initialize: function(options) {
       $.extend(this._options,options);
       if(this._options.debug) console.log("BarcodeScanner: Initializing");
       $(this._options.eventObj).on({
          keydown: $.proxy(this._keydown, this),
       });
    },
    destroy: function() {
        $(this._options.eventObj).off("keyup",null,this._keyup);
        $(this._options.eventObj).off("keydown",null,this._keydown);
    },
    fire: function(str){
        if(this._options.debug) console.log("BarcodeScanner: Firing barcode event with string: "+str);
        $(this._options.fireObj).trigger('barcode',[str]);
    },
    isReading: function(){
        return this._isReading;
    },
    checkEvent: function(e){
        return this._isReading || (this._options.isShiftPrefix?e.shiftKey:!e.shiftKey) && e.which==this._options.prefixCode;
    },
    _options: {timeout: 600, prefixCode: 36, suffixCode: 13, minCode: 32, maxCode: 126, isShiftPrefix: false, debug: false, eventObj: document, fireObj: document},
    _isReading: false,
    _timeoutHandler: false,
    _inputString: '',
    _keydown: function (e) {
        if(this._input.call(this,e))
            return false;
    },
    _input: function (e) {
        if(this._isReading){
            if(e.which==this._options.suffixCode){
                //read end
                if(this._options.debug) console.log("BarcodeScanner: Read END");
                if (this._timeoutHandler) 
                    clearTimeout(this._timeoutHandler);
                this._isReading=false;
                this.fire.call(this,this._inputString);
                this._inputString='';
            }else{
                //char reading
                if(this._options.debug) console.log("BarcodeScanner: Char reading "+(e.which));
                if(e.which>=this._options.minCode && e.which<=this._options.maxCode)
                    this._inputString += String.fromCharCode(e.which);
            }
            return true;
        }else{
            if((this._options.isShiftPrefix?e.shiftKey:!e.shiftKey) && e.which==this._options.prefixCode){
                //start reading
                if(this._options.debug) console.log("BarcodeScanner: Start reading");
                this._isReading=true;
                this._timeoutHandler = setTimeout($.proxy(function () {
                    //read timeout
                    if(this._options.debug) console.log("BarcodeScanner: Read timeout");
                    this._inputString='';
                    this._isReading=false;
                    this._timeoutHandler=false;
                }, this), this._options.timeout);
                return true;
            }
        }
        return false;
    }
}; 
```

如果您需要自定义超时、后缀、前缀、最小/最大 ascii 码读取：

```
new BarcodeScanner({timeout: 600, prefixKeyCode: 36, suffixKeyCode: 13, minKeyCode: 32, maxKeyCode: 126}); 
```

我还添加了`isShiftPrefix`使用这些选项的选项，例如`$`char 作为前缀：`new BarcodeScanner({prefixKeyCode: 52, isShiftPrefix: true});`

这是一个小提琴：[https ://jsfiddle.net/xmt76ca5/](https://jsfiddle.net/xmt76ca5/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-02T09:26:48.323

您可以在该输入框上使用“onkeyup”事件。如果事件已触发，那么您可以将其称为“从键盘输入”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-09T06:34:11.757

```
$(window).ready(function(){

	//$("#bCode").scannerDetection();

	console.log('all is well');

	$(window).scannerDetection();
	$(window).bind('scannerDetectionComplete',function(e,data){
            console.log('complete '+data.string);
            $("#bCode").val(data.string);
        })
        .bind('scannerDetectionError',function(e,data){
            console.log('detection error '+data.string);
        })
        .bind('scannerDetectionReceive',function(e,data){
            console.log('Recieve');
            console.log(data.evt.which);
        })

        //$(window).scannerDetection('success');
```

```
<input id='bCode'type='text' value='barcode appears here'/>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-17T22:56:45.557

嗨，我有一个替代解决方案可以在不使用 jQuery 的情况下评估条形码扫描仪的结果，首先您需要并输入在条形码扫描仪工作时具有焦点的文本

```
<input id="input_resultado" type="text" /> 
```

JavaScript 中的代码是：

```
var elmInputScan = document.getElementById('input_resultado');           

elmInputScan.addEventListener('keypress', function (e){        
  clearInterval( timer_response );    
  timer_response = setTimeout( "onInputChange()", 10);
}); 
```

当条形码扫描仪输入文本调用几次按键事件时，但只有我对最终结果感兴趣，因此我使用计时器。就是这样，您可以将值处理到 onInputChange 函数中。

```
function onInputChange() {    
  console.log( document.getElementById('input_resultado').value );
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-29T13:59:48.723

```
document.addEventListener("keypress", function (e) {
  if (e.target.tagName !== "INPUT") {
    // it's your scanner
  }
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-07-06T14:05:36.867

没有一个解决方案对我有用，因为我不想专注于输入。我希望结果页面（项目详细信息页面）继续监听扫描仪扫描下一个项目。我的扫描仪触发按键事件，所以这对我来说就像一个魅力。

```
var inputTemp = '';
var inputTempInterval = setInterval(function() {
    // change 5 as minimum length of the scan code
    if (inputTemp.length >= 5) {
        var detected = inputTemp;
        inputTemp = '';
        clearInterval(inputTempInterval); // stop listening if you don't need anymore
        onScannerTrigger(detected);

    } else {
        inputTemp = '';
    }

}, 100);

$(window).keypress(function(e){   
    inputTemp += String.fromCharCode(e.which);
});

function onScannerTrigger(scannedCode) {
    console.log(scannedCode);
    // do your stuff
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-08T08:04:17.010

我发布了一个不依赖 jQuery 或输入字段的轻量级 JS 包。它简单地查看按键事件的时间来确定它是条形码扫描仪还是常规输入。

[https://www.npmjs.com/package/@iteexperts/barcode-scanner](https://www.npmjs.com/package/@itexperts/barcode-scanner)

```
import {BarcodeScanner} from "@itexperts/barcode-scanner";

let options = {
  timeOut: 130,
  characterCount: 13
}

let barcodeScanner = new BarcodeScanner(options);
barcodeScanner.addEventListener('scan', function(e){
    let barcode = e.detail;
    console.log(barcode);
}); 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2020-04-28T19:40:17.937

我强烈推荐这个 js 插件[https://github.com/axenox/onscan.js](https://github.com/axenox/onscan.js) 它易于使用，并且有多种选项可以满足您的需求。

```
<script src="path-to-onScan.js"></script>
script>
// Initialize with options
onScan.attachTo(document, {
    suffixKeyCodes: [13], // enter-key expected at the end of a scan
    reactToPaste: true, // Compatibility to built-in scanners in paste-mode (as opposed to keyboard-mode)
    onScan: function(sCode, iQty) { // Alternative to document.addEventListener('scan')
        console.log('Scanned: ' + iQty + 'x ' + sCode); 
    },
    onKeyDetect: function(iKeyCode){ // output all potentially relevant key events - great for debugging!
        console.log('Pressed: ' + iKeyCode);
    }
});
</script> 
```

# c++ - 使用智能指针在窗口消息中将对象作为 WPARAM 传递

> ID：11290912
> 
> 赞同：2
> 
> 时间：2012-07-02T09:20:17.327
> 
> 标签：c++, mfc, c++11

我正在寻找一种将对象（`vector<long>`在我的情况下）作为`WPARAM`C++11 样式传递的方法。

我发现的教程使用 C 风格的强制转换或 a`reinterpret_cast`来传递指向对象的指针。这就要求消息的接收者在接收到对象后正确地处理它。

有没有办法使用 a 传递对象`unique_ptr`？接收者可以完全拥有该对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T09:28:06.873

如果您使用 Windows 消息传递指向对象的指针，那么您需要确保两件事：

1.  在消息被处理之前源不会销毁对象
2.  如有必要，目的地正确销毁对象

如果您知道消息肯定会被处理，那么您可以在发送消息时调用`.release()`源`unique_ptr`，然后在另一个处理程序中取得所有权`unique_ptr`。

问题在于如果未处理消息，请确保将其清理干净。这很棘手，因为通常没有一种干净的方法来检查，除非您使用`SendMessage`(not `PostMessage`) 并使用返回值来传达参数已被声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:24:14.797

没有这样的方法。WPARAM 在标头中定义为 UINT_PTR。它只是一个大到足以在所有体系结构中接受指针的数字。您可以使用它传递指针的原因是指针本身实际上只是数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T09:26:33.937

您可以执行以下技巧：分配一个`shared_ptr<>` *on heap* (!)，将指针作为 WPARAM 传递给它，复制`shared_ptr<>`on receive 并删除您作为`WPARAM`.

# deployment - 部署windows服务的最佳实践

> ID：11290913
> 
> 赞同：4
> 
> 时间：2012-07-02T09:20:24.520
> 
> 标签：deployment, windows-services, continuous-integration

我正在寻找持续交付 Windows 服务的最佳实践。

目前我们有一组 powershell 脚本，可以卸载、重启、安装更新，但错误处理很棘手。我们正在审查系统中心，但还有其他可用于部署 Windows 服务的选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:50:51.377

自 2011 年 12 月以来，我们一直在使用 Presto，并进行了 1,000 多次部署。我们部署的大部分是 Windows 服务。

好的是我们在 Presto 中设置了我们的应用程序和服务器，然后我们可以重复部署到任何服务器（或一次多台服务器），只需点击一个按钮。Presto 将复制我们的官方发布二进制文件，更新我们应用程序配置文件中的所有项目，创建和启动服务等......

因此，如果您的应用程序有 30 个手动部署步骤，您可以在 Presto 中输入这些步骤，然后它会自动为您完成。

值得一看： http: [//presto.codeplex.com/](http://presto.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:35:47.960

您最基本和普遍接受的最佳选择来自[此线程](https://stackoverflow.com/questions/4743064/windows-service-deployment)，它基本上链接到有关为 Windows 服务创建安装程序的[Microsoft 支持文章。](http://support.microsoft.com/kb/317421)

# ruby-on-rails - Rails 表单验证问题

> ID：11290915
> 
> 赞同：0
> 
> 时间：2012-07-02T09:20:29.460
> 
> 标签：ruby-on-rails, ruby, validation

我不明白为什么表格没有经过验证。即使文本字段中没有值，也会执行 create 方法这是我使用的代码

```
class MoviesController < ApplicationController
  def new 
    @movie = Movie.new
    @movies = Movie.find(:all)
  end

  def create
    @movie = Movie.new(params[:movie])
    if @movie.save
      redirect_to "http://localhost:3000/movies/new/"
    end
  end
end 
```

模型

```
class Movie < ActiveRecord::Base
  attr_accessible :title, :year

  validates_presence_of :title
  validates_presence_of :year

end 
```

这是视图

```
Enter new movie information 
<%= form_for @movie do |f|%><br />
    Title <%= f.text_field :title %><br />
    Year <%= f.text_field :year %><br />
    <%= f.submit %>
<% end %>

<hr />
List of all movies<br />
<% if !@movies.blank? %>
  <% for item in @movies %>
    <%= item.id %>&nbsp;<%=  item.title %> (<%= item.year %>) <br />
  <% end %>
<% else %>

<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:14:47.593

在控制器中

```
 def create
    @movie = Movie.new(params[:movie])
    if @movie.save
      redirect_to new_movie_path  # You sure you what to redirect this to new after success? 
                                  # redirect as per your project requirement on success
    else
      render :new # render new with errors displayed
    end
  end 
```

在视图中添加了验证失败时的错误显示消息

```
<%= form_for @movie do |f|%>
  <% if @movie.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@movie.errors.count, "error") %> prohibited this from being saved:</h2>
        <ul>
        <% @movie.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
    <br />
    Title <%= f.text_field :title %><br />
    Year <%= f.text_field :year %><br />
    <%= f.submit %>
<% end %>

<hr />
List of all movies<br />
<% if !@movies.blank? %>
  <% for item in @movies %>
    <%= item.id %>&nbsp;<%=  item.title %> (<%= item.year %>) <br />
  <% end %>
 <% else %>
   No Movies found.
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:26:43.847

当您调用@movie.save 时会进行验证。因为@movie 无效，所以#save 将返回false 并填充@movie.errors。

此验证不会阻止提交表单（并执行#create）。为此，您想查看使用 JavaScript/jQuery 和 Rails 进行的验证。

# sql - 如何自然地对值为 0 的文本进行排序？

> ID：11290916
> 
> 赞同：0
> 
> 时间：2012-07-02T09:20:44.497
> 
> 标签：sql, sqlite, sorting, natural-sort

我想从 sql 中对这个测试表进行排序：

```
CREATE TABLE test (
    _id integer primary key autoincrement,
    val text
);

insert into test (_id, val) values ("49","-10");
insert into test (_id, val) values ("53","-6");
insert into test (_id, val) values ("63","-6");
insert into test (_id, val) values ("9","-5");
insert into test (_id, val) values ("56","-5");
insert into test (_id, val) values ("73","-5");
insert into test (_id, val) values ("38","-4");
insert into test (_id, val) values ("52","-4");
insert into test (_id, val) values ("55","-4");
insert into test (_id, val) values ("64","-4");
insert into test (_id, val) values ("81","-4");
insert into test (_id, val) values ("50","-3");
insert into test (_id, val) values ("60","-3");
insert into test (_id, val) values ("78","-3");
insert into test (_id, val) values ("27","-2");
insert into test (_id, val) values ("1","80");
insert into test (_id, val) values ("2","85");
insert into test (_id, val) values ("3","100");
insert into test (_id, val) values ("4","120");
insert into test (_id, val) values ("5","-");
insert into test (_id, val) values ("6","0");
insert into test (_id, val) values ("7","0 (init)");
insert into test (_id, val) values ("8","-1");
insert into test (_id, val) values ("23","1");
insert into test (_id, val) values ("67","3");
insert into test (_id, val) values ("14","4");
insert into test (_id, val) values ("16","4");
insert into test (_id, val) values ("22","4");
insert into test (_id, val) values ("61","4");
insert into test (_id, val) values ("37","5");
insert into test (_id, val) values ("51","5");
insert into test (_id, val) values ("76","5");
insert into test (_id, val) values ("32","6");
insert into test (_id, val) values ("35","6");
insert into test (_id, val) values ("71","6");
insert into test (_id, val) values ("88","6");
insert into test (_id, val) values ("18","7");
insert into test (_id, val) values ("44","7");
insert into test (_id, val) values ("39","9");
insert into test (_id, val) values ("90","9");
insert into test (_id, val) values ("91","9");
insert into test (_id, val) values ("69","16");
insert into test (_id, val) values ("105","-");
insert into test (_id, val) values ("36","0");
insert into test (_id, val) values ("65","0");
insert into test (_id, val) values ("75","0");
insert into test (_id, val) values ("106","d");
insert into test (_id, val) values ("43","noise"); 
```

从这里使用修改后的 sql： [SQLite 排序问题](https://stackoverflow.com/questions/4368864/sqlite-sorting-question)

```
select _id, case when cast(val as number) = 0 then val when cast(val as number) <>0 then cast(val  as number) end as sorting from test order by sorting; 
```

我得到了几乎完美的结果，但是：0 值不在正负之间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:45:12.657

编辑：对不起，这是给 MySQL 的。也许你可以为 SQLite 调整它？

可能不是最漂亮的，但这会将任何不是（签名）数字的“val”排序到最后。只要确保它的值高于最高数字即可。

```
select
  _id,
  val
from test
order by 
case when val NOT REGEXP '^-{0,1}[0-9]{1,}$' then 999999 else
cast(val as signed integer)
end 
```

# web-services - 从 Domino 调用 Web 服务时出错

> ID：11290917
> 
> 赞同：0
> 
> 时间：2012-07-02T09:20:45.867
> 
> 标签：web-services, xpages, lotus-domino

我需要通过它的 SOAP Web 服务连接到 .net 应用程序，但无法从 Domino 中运行它。使用 XPages 我想连接到 Web 服务以将数据返回到 xpage。我尝试创建一个代理来拨打电话，但没有奏效。我在运行代理时收到以下 java StackTrace：

```
WebServiceEngineFault
 faultCode: {http://www.lotus.com/domino/ws/}HTTP
 faultSubcode:
 faultString: (401) Unauthorized
 faultActor:
 faultNode:
 faultDetail:
        {}string:

(401) Unauthorized
        at lotus.domino.axis.transport.http.HTTPSender.readFromSocket(Unknown Source)
        at lotus.domino.axis.transport.http.HTTPSender.invoke(Unknown Source)
        at lotus.domino.axis.strategies.InvocationStrategy.visit(Unknown Source)
        at lotus.domino.axis.SimpleChain.doVisiting(Unknown Source)
        at lotus.domino.axis.SimpleChain.invoke(Unknown Source)
        at lotus.domino.axis.client.AxisClient.invoke(Unknown Source)
        at lotus.domino.axis.client.Call.invokeEngine(Unknown Source)
        at lotus.domino.axis.client.Call.invoke(Unknown Source)
        at lotus.domino.axis.client.Call.invoke(Unknown Source)
        at lotus.domino.axis.client.Call.invoke(Unknown Source)
        at lotus.domino.axis.client.Call.invoke(Unknown Source)
        at lotus.domino.websvc.client.Call.invoke(Unknown Source)
        at com.imanage.worksite.IWOVServicesSoapStub.getFolders(Unknown Source)
        at JavaAgent.NotesMain(Unknown Source)
        at lotus.domino.AgentBase.runNotes(Unknown Source)
        at lotus.domino.NotesThread.run(Unknown Source) 
```

我可以从soapUI 中成功调用它，传入用户ID、密码和域凭据。

我在使用 Web 服务的代理中设置凭据：

```
 String arg0 = "DOMAINNAME\\USERID";
                            String arg1 = "PASSWORD";
                            stub.setCredentials(arg0, arg1); 
```

以及 Web 服务使用者本身（在 SoapStub 类中 - 在 getFolders 调用中）：

```
 _call.setUsername("DOMAINNAME\\USERID");
                    _call.setPassword("PASSWORD"); 
```

我是 XPages 和 Java 的新手。有谁知道我可能遗漏了什么或应该检查什么？

（我不能将 Lotusscript 用于 Web 服务使用者，因为 WSDL 生成的变量名太长，所以在这种情况下我必须使用 java）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:28:28.027

在这些情况下，为了帮助缩小范围，最好让 SOAPUI 进行完整的测试。

所以请执行以下操作。

1.  从提供者的 WSDL 在 SOAPUI 中创建一个模拟服务。

2.  将您的代理指向模拟服务，以便您可以捕获代理发送的内容。（即。捕获 SOAP 请求）。

3.  使用相同的 SOAP 请求通过 SOAPUI 将其发送到 .NET 服务器。它应该重现该问题并为您提供有关失败原因的更多信息。

以下 wiki 文章解释了如何执行此操作。

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Testing_your_Domino_web_service_provider_and_consumer_using_SoapUI._](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Testing_your_Domino_web_service_provider_and_consumer_using_SoapUI._)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:16:08.863

我会使用 CXF，它似乎[在 XPages 中得到更好的支持](http://www.wissel.net/blog/d6plinks/SHWL-8SUKV5)。您使用的是什么身份验证？我发现摘要身份验证可能不适用于 .net 中的某些服务（Sharepoint 数据是一个），您需要调用另一个端点来获取摘要令牌。我使用 TCPMon（跨平台）或 Fiddler 来查看线路上的内容（您将这些工具配置为代理，以便您可以观看）[AD107](http://www.slideshare.net/NotesSensei/ad107-13518780)可能有其他信息，看看。

# linux - 蓝牙连接在启动后立即关闭

> ID：11290918
> 
> 赞同：1
> 
> 时间：2012-07-02T09:20:53.340
> 
> 标签：linux, bluetooth, connection, fedora

我的问题是与蓝牙设备的连接。我有一台带有集成蓝牙设备的上网本。我想将我的上网本与 OBD-II 接口连接并编写一个软件来读取我的汽车的统计数据。为了测试连接，我首先通过蓝牙菜单添加 OBD 设备。管理器连接到界面，它希望我在配置发生时等待。这种状态“永远”持续。等了 60 分钟后，我关上了窗户。但是，该设备显示在可用设备列表中。因为无法切换按钮发起连接，所以想到了使用minicom（OBD-II接口使用SPP进行通信）。

据我所知，我需要与蓝牙设备建立连接，并使用虚拟串行端口与 minicom 连接。在阅读了一些帖子后，我发现 hcitool 应该能够创建蓝牙会话。有了这个，我能够连接到设备并打开“已连接”按钮。不幸的是，它在 2 秒后切换回来。

*   `hcitool scan`能够找到设备
*   `hcitool cc 00:11:22:33:44:55`能够连接已经提到的 2 秒
*   `hcitool con`如果在启动后 2 秒内被调用，则列出连接

我还尝试使用 putty 通过 Windows PC 进行连接。Windows 与设备连接没有问题，之后，我能够发送请求并获得适当的答案。所以看起来界面工作正常。

我正在使用带有 gnome3 的 Fedora 17。如果您需要任何输出或更多信息，请告诉我。

提前致谢

# optimization - 为什么 `logBase 10 x` 比 `log x / log 10` 慢，即使是专门的？

> ID：11290929
> 
> 赞同：17
> 
> 时间：2012-07-02T09:22:05.550
> 
> 标签：optimization, haskell, ghc

`solrize`在#haskell 中询问了有关此代码的一个版本的问题，我尝试了其他一些案例，想知道发生了什么。在我的机器上，“快速”代码大约需要 1 秒，“慢”代码需要大约 1.3-1.5 秒（一切都用 编译`ghc -O2`）。

```
import Data.List

log10 :: Double -> Double
--log10 x = log x / log 10 -- fast
--log10 = logBase 10 -- slow
--log10 = barLogBase 10 -- fast
--log10 = bazLogBase 10 -- fast
log10 = fooLogBase 10 -- see below

class Foo a where
    fooLogBase :: a -> a -> a

instance Foo Double where
    --fooLogBase x y = log y / log x -- slow
    fooLogBase x = let lx = log x in \y -> log y / lx -- fast

barLogBase :: Double -> Double -> Double
barLogBase x y = log y / log x

bazLogBase :: Double -> Double -> Double
bazLogBase x = let lx = log x in \y -> log y / lx

main :: IO ()
main = print . foldl' (+) 0 . map log10 $ [1..1e7] 
```

我希望 GHC 能够在专业化时变成`logBase x y`与 完全相同的东西。`log y / log x`这里发生了什么，推荐的使用方式是`logBase`什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-02T11:49:04.917

和往常一样，看看核心。

快速（1.563 秒）-

```
-- note: top level constant, referred to by specialized fooLogBase

Main.main_lx :: GHC.Types.Double
Main.main_lx =
     case GHC.Prim.logDouble# 10.0 of { r ->
     GHC.Types.D# r
  }

Main.main7 :: GHC.Types.Double -> GHC.Types.Double
Main.main7 =
  \ (y :: GHC.Types.Double) ->
    case y of _ { GHC.Types.D# y# ->
    case GHC.Prim.logDouble# y# of { r0 ->
    case Main.main_lx of { GHC.Types.D# r ->
    case GHC.Prim./## r0 r of { r1 ->
    GHC.Types.D# r1
    }
    }
    } 
```

慢（2.013 秒）

```
-- simpler, but recomputes log10 each time
Main.main7 =
  \ (y_ahD :: GHC.Types.Double) ->
    case y_ahD of _ { GHC.Types.D# x_aCD ->
    case GHC.Prim.logDouble# x_aCD of wild1_aCF { __DEFAULT ->
    case GHC.Prim.logDouble# 10.0 of wild2_XD9 { __DEFAULT ->
    case GHC.Prim./## wild1_aCF wild2_XD9 of wild3_aCz { __DEFAULT ->
    GHC.Types.D# wild3_aCz
    }
    }
    }
    } 
```

在快速版本中，log10 计算一次并共享（静态参数仅应用一次）。在慢速版本中，它每次都会重新计算。

您可以按照以下推理生成更好的版本：

```
-- 1.30s
lx :: Double
lx = log 10

log10 :: Double -> Double
log10 y = log y / lx

main :: IO ()
main = print . foldl' (+) 0 . map log10 $ [1..1e7] 
```

而且，使用数组融合，您可以消除组合风格的损失：

```
import qualified Data.Vector.Unboxed as V

lx :: Double
lx = log 10

log10 :: Double -> Double
log10 y = log y / lx

main :: IO ()
main = print . V.sum . V.map log10 $ V.enumFromN 1 (10^7) 
```

成本降低 3 倍

```
$ time ./A
6.5657059080059275e7

real    0m0.672s
user    0m0.000s
sys     0m0.000s 
```

这和手写一样好。与上面正确编写的版本相比，以下内容没有任何好处。

```
lx :: Double
lx = D# (GHC.Prim.logDouble# 10.0##)

log10 :: Double -> Double
log10 (D# y) = D# (case logDouble# y of r -> r /## d#)
    where
        D# d# = lx

main :: IO ()
main = print . V.sum . V.map log10 $ V.enumFromN 1 (10^7) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T23:09:48.997

另一个错过的优化：除以常数（log 10）应替换为乘以倒数。

# windows - 在 Windows 64 位上安装 QT Jambi

> ID：11290930
> 
> 赞同：2
> 
> 时间：2012-07-02T09:22:08.447
> 
> 标签：windows, qt4, 64-bit, failed-installation, qt-jambi

我正在尝试在我的电脑上安装 QTJambi，win7 64 位。

它不重复：[在 Windows 64 位系统上安装 QT Jambi 时遇到](https://stackoverflow.com/questions/7545104/trouble-installing-qt-jambi-on-a-windows-64-bit-system)问题，因为我的问题是没有加载 64 位 JVM，并且我已将 JAVA_HOME 设置为指向 Program files (x86) 文件夹中的 32 位 JDK。

运行 qtjambi.bat 时

我得到以下异常：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
        at com.trolltech.qt.QtJambiObject.<clinit>(Unknown Source)
Caused by: java.lang.RuntimeException: Loading library failed, progress so far:
No 'qtjambi-deployment.xml' found in classpath, loading libraries via 'java.libr
ary.path'
Loading library: 'QtCore4.dll'...
 - using 'java.library.path'

        at com.trolltech.qt.internal.NativeLibraryManager.loadNativeLibrary(Unkn
own Source)
        at com.trolltech.qt.internal.NativeLibraryManager.loadQtLibrary(Unknown
Source)
        at com.trolltech.qt.Utilities.loadQtLibrary(Unknown Source)
        at com.trolltech.qt.Utilities.loadQtLibrary(Unknown Source)
        at com.trolltech.qt.QtJambi_LibraryInitializer.<clinit>(Unknown Source)
        ... 1 more
Caused by: java.lang.UnsatisfiedLinkError: C:\qtjambi-4.7.1\bin\QtCore4.dll: Can
't load IA 32-bit .dll on a AMD 64-bit platform
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary1(Unknown Source)
        at java.lang.ClassLoader.loadLibrary0(Unknown Source)
        at java.lang.ClassLoader.loadLibrary(Unknown Source)
        at java.lang.Runtime.load0(Unknown Source)
        at java.lang.Runtime.load(Unknown Source)
        at com.trolltech.qt.internal.NativeLibraryManager.loadLibrary_helper(Unk
nown Source)
        ... 6 more 
```

嗯，我认为的妙语是：

```
 Can't load IA 32-bit .dll on a AMD 64-bit platform 
```

我能做些什么？

请帮助提供详细的答案，我正在尝试按照互联网上的说明进行两天，但没有一个足够详细，目前我什至无法开始查看 QTJambi。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:51:20.630

您需要将 64 位 Java 与 64 位 Jambi 和 32 位 Java 与 32 位 Jambi 一起使用。Java 二进制文件取自 PATH，而不是 JAVA_HOME，因此请确保变量包含正确的路径。

# java - 在 Java Web 应用程序中，尽管 AWS SDK 内部使用 1.3，但如何添加 common-codec 1.6

> ID：11290931
> 
> 赞同：2
> 
> 时间：2012-07-02T09:22:08.573
> 
> 标签：java, jar, amazon-web-services, classpath

我正在使用 Amazon SDK for java 构建一个 Java Web 应用程序。
SDK 使用第 3 方 Apache 通用编解码器 1.3。
我已将 common-codec 1.6 添加到项目中（我需要它），但它仍然首先“找到”来自 SDK 的那个。
在这种情况下应该怎么做。
我可以从 SDK 中删除 1.3，但我想只升级亚马逊“内部”使用的库是不好的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T10:36:45.200

右键单击项目->属性->java构建路径->订购和导出选项卡，选择您的SDK并按顺序向上移动。

# jquery - JQuery Firebug 非法字符

> ID：11290933
> 
> 赞同：1
> 
> 时间：2012-07-02T09:22:16.060
> 
> 标签：jquery, firebug

我有这个代码片段：

```
$(function() {
    $('.toolbar [id^=button]').on('click', function () {
        $(this)
            .css('background-color', '#559153')
            .siblings("[id^=button]").css('background-color', '#88e885');

    });

});​ 
```

Firebug 在最后发现了一个非法字符。没有字符。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T09:23:52.503

将其复制并粘贴到 Firebug 的控制台中。转到片段的末尾，点击“结束”，然后点击“退格”

这将删除一个不可见的非法字符

一直发生在我身上。很不爽！

**编辑**

我去了这里：[在线逃脱者](http://www.neoegm.com/tech/online-tools/intelligent-escaper-unescaper-online-unescape-and-escape-tool-with-url-parameter-parsing-and-more/) 并逃脱了您的片段。你可以`%u200B`在最后看到，那是混蛋！

# python - 单个参数 super() - 它有什么用？

> ID：11290936
> 
> 赞同：6
> 
> 时间：2012-07-02T09:22:28.660
> 
> 标签：python, superclass

> **可能重复：**
> [Python 3 super() 的使用](https://stackoverflow.com/questions/2771904/usage-of-python-3-super)

在 Python 3.2 的文档中它说；

> 如果省略第二个参数，则返回的超级对象是未绑定的

据我了解，未绑定（如“未绑定到实例”）对象是从超（类，类）返回的。那么，超（类）中的“未绑定”是什么意思？你怎么绑定它？

```
class Base:
    def printme(self): print("I'm base")

class Derived(Base):
    def printme(self): print("I'm derived")

class Derived2(Derived):
    def printme(self):
        super().printme()
# next-in-mro bound-to-self method

        super(Derived, self).printme()
# beyond-Derived-in-mro bound-to-self method

        super(Derived, Derived2).printme(self)
# beyond-Derived-in-mro-of-Derived2 unbound method

        super(Derived2).printme
# WTF is this? There's not even a printme attribute in it

Derived2().printme() 
```

# ios - iOS 应用程序的内存泄漏会利用任何漏洞吗？

> ID：11290950
> 
> 赞同：1
> 
> 时间：2012-07-02T09:23:15.573
> 
> 标签：ios, security

我有这个问题的谷歌，并找到了这张[幻灯片](http://www.slideshare.net/OwenGoss/finding-and-fixing-memory-leaks-in-ios-apps-5251292)。 ![在此处输入图像描述](../Images/41c3051db580f5f4049c9c4615e8921a.png)

真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:26:24.183

是的。由于您的设备需要内存来为其他应用程序“加油”，最终您的应用程序将被杀死。这就是人们使用乐器的原因，不仅仅是因为它是最佳实践。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:26:41.040

当然，内存泄漏可能会导致您的应用程序表现不佳并最终崩溃。这就是为什么您应该仔细管理内存（升级到 ARC 可能会改善内存泄漏问题）并且不要忘记当您收到内存警告时有机会进行清理（通过 UIViewController 类中的 didReceiveMemoryWarning）

# python - 如何在 GAE 中的 NDB 中执行投影查询

> ID：11290951
> 
> 赞同：2
> 
> 时间：2012-07-02T09:23:19.663
> 
> 标签：python, google-app-engine

在 1.7 版本中，NDB 获得了支持投影查询，[文档说明](https://developers.google.com/appengine/docs/python/ndb/queries?hl=pl#projection)这是语法：

```
qry = Article.query(projection=[Article.author, Article.tags]) 
```

但是运行这个会导致异常：

```
TypeError: __init__() got an unexpected keyword argument 'projection' 
```

那么 NDB 中是否支持投影查询，如果是，如何使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T09:25:15.277

文档中有错误，正确的语法是：

```
qry = Article.query().get(projection=[Article.author, Article.tags]) 
```

…替换[为您选择的方法，](https://developers.google.com/appengine/docs/python/ndb/queryclass?hl=pl)`get`只要它需要[**q_options](https://developers.google.com/appengine/docs/python/ndb/queryclass?hl=pl#kwdargs_options)参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:46:07.637

您可以从测试用例中了解如何使用：http: [//codereview.appspot.com/6133044/patch/2001/1012](http://codereview.appspot.com/6133044/patch/2001/1012)

在这里：[http ://code.google.com/p/appengine-ndb-experiment/issues/detail?id=181](http://code.google.com/p/appengine-ndb-experiment/issues/detail?id=181)

但请记住 `Article.query().get(projection=[Article.author, Article.tags])` 始终返回实体，而不是查询。此外`get`，您可以使用`fetch(projection=[Article.author, Article.tags])`或`fetch_async(projection=[Article.author, Article.tags])`

# hibernate - 如何使用 Postgres 和 Tomcat7 JDBC 池配置 PreparedStatement 缓存？

> ID：11290960
> 
> 赞同：3
> 
> 时间：2012-07-02T09:24:03.690
> 
> 标签：hibernate, postgresql, tomcat, jdbc

我正在使用带有 Postgres 9.1 的 Tomcat7 和带有 Hibernate 的 JPA，我想配置准备好的语句池。

我通过查看 postgres 查询日志看到的正常默认行为是看到许多 PARSE、BIND、执行相同的查询，所以似乎即使使用了 jdbc 准备好的语句，它们也没有被 postgres jdbc 驱动程序缓存或在服务器上。

在线阅读似乎表明我必须在 postgres jdbc 驱动程序上配置准备好的语句池，所以我添加`connectionProperties="prepareThreshold=3"`到我的应用程序 context.xml 资源定义中，但我仍然没有看到任何缓存正在进行它仍然有很多 PARSE、BIND 消息在日志文件中，即使我得到一个准备好的语句执行超过 3 次。

我知道查询计划器无法为准备好的语句制定计划，因为我使用的是传入参数的语句。由于我使用的是 Hibernate，因此发送到数据库的所有语句都将是 JDBC 准备好的语句，所以有我对此无能为力。

我正在处理的应用程序尚未投入生产，所以我没有关于配置准备好的语句缓存的价值的现场测量？使用 postgres 和 hibernate 时，它​​通常会提高现实世界的性能吗？

任何人都知道使用 postgres 和 tomcat7 jdbc 池而不是 dbcp 池成功配置准备好的语句缓存吗？我的配置如下。

```
<Resource 
        name="jdbc/thedb"
        factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
        auth="Container"
        type="javax.sql.DataSource"

    jmxEnabled="true"
    logAbandoned="true"
    suspectTimeout="60000"
    jdbcInterceptors="StatementFinalizer;ResetAbandonedTimer"

    driverClassName="org.postgresql.Driver"
    url="jdbc:postgresql://127.0.0.1:5432/thedb"
    username="theusername" 
    password="thepassword" 
    connectionProperties="prepareThreshold=3"

    maxActive="20"
    maxIdle="20" 
    minIdle="3"        
    maxWait="5000"

    testOnBorrow="true"
    validationInterval="30000"
    validationQuery="SELECT count(*) FROM data_source_test"
/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:24:47.553

我认为tomcat jdbc pool不支持准备语句的池化。[文档](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)说“poolPreparedStatements”：“[...] 未使用属性。”

也许这对你有用：[关于 Tomcat jdbc 池的新闻](http://www.tomcatexpert.com/popular/tomcat_jdbc-pool)

# c++ - 在 C++ 中使用正则表达式匹配文件名

> ID：11290967
> 
> 赞同：0
> 
> 时间：2012-07-02T09:24:31.147
> 
> 标签：c++, regex

我想在 C++ 中使用正则表达式匹配文件名。所需文件名的格式为“ProjectXX.txt”，其中 X 应为数字。我使用的带有正则表达式的代码看起来：

```
static const wregex initFile(L"(\\Project)(\\d\\d)\\.(\\txt)");
wsmatch result;
if(regex_match(fileName, result, initFile)) 
```

我需要`CString`（因此`L""`）因为我使用 windows.h。然而，代码抛出了一个异常，虽然我试图修改正则表达式，但我无法管理它以匹配文件名。什么是正确的正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:02:54.453

和 `\\`前面的目的是什么？第一个可能会导致错误，因为正则表达式没有转义序列。删除那些 (`L"(Project)(\d\d)\.(txt)")，它应该可以工作。`P``t``\P`

当我在做的时候：为什么要捕获必须是常量的字符串。我会写这个`L"Project(\\d\\d)\\.text"`，并完成它，只使用`L"Project"`and`L"txt"`而不是第一个和第三个捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:52:09.303

@hmjd 的评论几乎是正确的，但有点太宽泛了。它也会接受`L"Project[0-9]{2}@txt"`。你要`L"Project[0-9]{2}\\.txt"`

# iphone - 获取创建 xml 的日期 NSXMLParser

> ID：11290970
> 
> 赞同：0
> 
> 时间：2012-07-02T09:24:44.437
> 
> 标签：iphone, xml, xcode, ipad, nsxmlparser

我在网络服务器上有一个非常大的 xml 文件（17 MB），它会不断更新（每月一次或两次）。当用户触发更新时，我将 XML 解析为核心数据。现在我想在我的应用程序唤醒/启动期间检查本地解析的数据库是否是最新的，或者服务器上是否有更新的 xml。

xml 是由非 IT 公司通过 MS Office 创建的，所以我真的不能指望他们对 xml 做很多更改。现在我只有

```
<dataroot xmlns:od="urn:schemas-microsoft-com:officedata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:noNamespaceSchemaLocation="someXML.xsd" generated="2012-06-28T12:53:12"> 
```

生成数据根的属性。

有关如何以快速简洁的方式获取文件创建日期的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:41:13.397

我给了你重要的代码。我在 .h 文件中获取一个字符串变量，并在解析的 didstartelement 解析方法中初始化该字符串。检查下面的代码。

```
 @interface TestViewController: UIViewController <NSXMLParserDelegate>  {
        NSString *generatedDate;
    }
    @end

#import "TestViewController.h"

@implementation TestViewController

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
    if ( [elementName isEqualToString:@"dataroot"] ) {
        generatedDate = [[NSString alloc]initWithFormat:@"%@",[[attributeDict objectForKey:@"generated"] retain]];
        }
   }
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:32:13.687

您不能只存储和检查服务器上的创建或修改日期并将其与您存储的值进行比较吗？这样，如果它是相同的，您甚至不需要费心阅读 XML。您可能会得到误报（日期已更改但数据未更改），但您不会得到误报（数据已更改但日期未更改），因此会减少大量处理。

一旦您确定它已更改，您可以传递 XML 以检查日期，如果它位于文件的特定位置（即开头），只需读取文件的大部分内容并搜索字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T09:45:25.693

您可以使用 NSXMPParser 获取生成的时间。使用以下

```
NSXMLParser *parser  = [[NSXMLParser alloc] initWithData:yourXMLData];

[parser setDelegate:self];

[parser parse]; 
```

这将调用您的委托方法。您需要处理以下委托方法来获取您的日期

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {
     NSString *generatedDate = [attributeDict objectForKey:@"generated"];
} 
```

希望这可以帮助

# svn - 为什么 mvn release:prepare 将我的整个 SVN 树的副本创建到 /tags？

> ID：11290972
> 
> 赞同：1
> 
> 时间：2012-07-02T09:24:53.723
> 
> 标签：svn, maven, maven-release-plugin

我正在使用 Maven 3 和 Subversion，并使用 mvn release:prepare 进行发布。我们的 SVN 设置和布局是标准的。但是，当我们这样做时，复制到 /tags 目录中的新标签名称下的目录结构是完整的“主干/分支/标签”，然后是它下面的所有内容，而不仅仅是我运行此命令的特定主干/分支.

IE

1.  我创建了一个新的本地工作区目录
2.  我 cd 进入这个新目录
3.  我将主干结帐到此目录中：`svn checkout http://svn-server-01:8090/svn/our-project/trunk/our-master --username myuid --password mypassword`
4.  我 cd 进入刚刚签出的主 maven 项目： cd our-master
5.  我进行了试运行： mvn release:prepare -DdryRun=true
6.  我运行干净： mvn release:clean
7.  我运行发布准备正确： mvn release:prepare 并制作一个新的“0.2”标签
8.  我看看SVN，看看：

```
    标签 -> 0.1 -> 标签 -> 空
                -> 分支 -> 空的
                -> 主干 -> 0.2 版本的主干
    分支 -> 空的
    主干-> 0.2-SNAPSHOT

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T09:58:19.450

听起来您的 pom 中的 scm 配置不正确。它应该如下所示：

```
<scm>
  <connection>scm:svn:http://somerepository.com/svn_repo/trunk/</connection>
  <developerConnection>scm:svn:https://somerepository.com/svn_repo/trunk/</developerConnection>
  <url>http://somerepository.com/view.cvs</url>
</scm> 
```

特别是连接和开发者连接。

# content-management-system - 在 Debian 上的 .htaccess 中启用干净的 URL (Drupal 7)

> ID：11290975
> 
> 赞同：0
> 
> 时间：2012-07-02T09:25:02.250
> 
> 标签：content-management-system, drupal-7, debian, clean-urls

我有一个复杂的问题，我无法弄清楚。通过修改**/etc/apache2/sites-enabled中的****000-default**文件可以解决此问题。

 **AllOverride行必须保留以下**关键字****None**。

`<Directory /var/www/>
Options Indexes FollowSymLinks MultiViews
AllowOverride None Order allow,deny
allow from all
</Directory>`

有没有其他方法可以在 Debian 服务器上为 Drupal 7 启用干净的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T08:24:10.603

在项目根目录中打开 .htaccess 文件。取消注释`RewriteBase /drupal`并将其更改为您的项目名称，例如`RewriteBase /myprojectname`. 评论`RewriteBase /` 转到 /admin/config/search/clean-urls 将有一个选项来启用干净的 URL。**

# .net - 强制重新创建数据库以进行实体到复杂类型的转换

> ID：11290976
> 
> 赞同：1
> 
> 时间：2012-07-02T09:25:08.607
> 
> 标签：.net, entity-framework, migration, ef-code-first

我有一个 WCF 服务，使用 EF（仍在学习它）将一些自己的元数据存储在数据库中。在某些时候，我意识到（要求已更改）我不需要某些类的单独实体，并且希望将它们转换为复杂类型，因为关系是 1:1。我不介意重新创建数据库或丢失任何数据，因为没有。

问题是，每当我尝试运行应用程序或调用 Update-database 时，我都会收到“'Model.ReportConfig' 类型已配置为实体类型。它不能重新配置为复杂类型。” 这在某种程度上是有道理的，但我真的不希望它被重新配置，而是从头开始配置，但即使我删除了所有旧表，甚至在 web.config 中指定了绝对干净的数据库，我仍然会收到这个错误。

顺便提一句。我没有看到任何 EdmMetadata 表。

这让我对我的数据完整性感到困惑。有任何想法吗？

**编辑**有问题的 ReportConfig。我的 DbContext 中没有其他配置（即使我尝试在 OnModelCreating 中添加 modelBuilder.ComplexType();）

```
[DataContract]
[ComplexType]
//    [Table("UserReportConfigs", Schema = "WebApp")]
public class ReportConfig
{
//        [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
//        public long Id { get; set; }

    [DataMember]
    public string Title { get; set; }

    [DataMember]
    public DateTime From { get; set; }

    [DataMember]
    public DateTime To { get; set; }

    [DataMember]
    public int ReportAs { get; set; }

    [DataMember]
    public string ParamValue { get; set; }
} 
```

**EDIT2**我将 ReportConfig 重命名为 Configuration 并且错误消息现在反映了新名称，所以我假设它是试图跟上的元数据可能是错误的。看起来在迁移期间 EF 将其注册为实体，然后发现它被标记为 ComplexType。

我正在使用 5.0.0-rc 版本的 EF

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T09:59:50.923

确保您的 DbContext 类中还没有 a `DbSet<ReportConfig>`，因为这会告诉 EF 这`ReportConfig`是一个实体。

# c# - 如何使用 C# 和 LINQ to Twitter 库更新 Twitter 上的状态

> ID：11290983
> 
> 赞同：4
> 
> 时间：2012-07-02T09:25:36.510
> 
> 标签：c#, twitter, exception-handling, http-status-code-401, linq-to-twitter

我正在编写一个 Metrol Style 应用程序来更新我的 Twitter 上的状态。我使用 LINQ to Twitter 库。但我不明白为什么我的应用程序会抛出异常 401 Unauthorized。这是我的代码：

```
private void UpdateStatus()
{
     // configure the OAuth object
    var auth = new SingleUserAuthorizer
    {
        Credentials = new InMemoryCredentials
        {
            ConsumerKey = "ConsumerKey",
            ConsumerSecret = "ConsumerSecret",
            OAuthToken = "TwitterAccessToken",
            AccessToken = "TwitterAccessTokenSecret"
        }
    };

    using (var twitterCtx = new TwitterContext(auth, "https://api.twitter.com/1/", "https://search.twitter.com/"))
    {
        var tweet = twitterCtx.UpdateStatus("Hi everybody!"); // error here

        viewTextBlock.Text = String.Empty;
        viewTextBlock.Text = viewTextBlock.Text + "Status returned: " +
                                            "(" + tweet.StatusID + ")" +
                                            tweet.User.Name + ", " +
                                            tweet.Text + "\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:50:02.490

我刚刚发布了一篇关于在 Windows 8 中通过 LINQ to Twitter 使用 OAuth 的博客文章：

[http://geekswithblogs.net/WinAZ/archive/2012/07/02/using-linq-to-twitter-oauth-with-windows-8.aspx](http://geekswithblogs.net/WinAZ/archive/2012/07/02/using-linq-to-twitter-oauth-with-windows-8.aspx)

我还在此处的 LINQ to Twitter 文档中包含了 401 FAQ：

[http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20FAQ&referringTitle=Documentation](http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20FAQ&referringTitle=Documentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:05:06.193

您可以使用 Twitterizer 程序集来实现它。首先，您可以创建一个可用于访问 Twitter 的令牌，然后使用该特定令牌您可以更新 TwitterStatus (Twitterizer.Core.TwitterObject.TwitterStatus)。示例代码如下。

```
public void CreateCachedAccessToken(string requestToken)
    {
        string ConsumerKey = ConfigurationManager.AppSettings["ConsumerKey"];
        string ConsumerSecret = ConfigurationManager.AppSettings["ConsumerSecret"];

        OAuthTokenResponse responseToken = OAuthUtility.GetAccessToken(ConsumerKey, ConsumerSecret, requestToken);

        //Cache the UserId
        Session["GetCachedUserId"] = responseToken.UserId;

        OAuthTokens accessToken = new OAuthTokens();
        accessToken.AccessToken = responseToken.Token;
        accessToken.AccessTokenSecret = responseToken.TokenSecret;
        accessToken.ConsumerKey = ConsumerKey;
        accessToken.ConsumerSecret = ConsumerSecret;

        Session["AccessToken"] = accessToken;
    } 
```

要更新 TwitterStatus，您可以执行以下操作。

```
public OAuthTokens GetCachedAccessToken()
    {
        if (Session["AccessToken"] != null)
        {
            return (OAuthTokens)(Session["AccessToken"]);
        }
        else
        {
            return null;
        }
    }

TwitterStatus.Update(GetCachedAccessToken(), txtTweet.Trim()); 
```

下面提到的方法可用于实现登录。

```
 protected string GetTwitterAuthorizationUrl()
    {
        string ConsumerKey = ConfigurationManager.AppSettings["ConsumerKey"];
        string ConsumerSecret = ConfigurationManager.AppSettings["ConsumerSecret"];

        OAuthTokenResponse reqToken = OAuthUtility.GetRequestToken(ConsumerKey, ConsumerSecret);
        return "https://twitter.com/oauth/authorize?oauth_token=" + reqToken.Token;
    } 
```

希望这可以帮助。如果有任何澄清，请提出。谢谢

# dynamics-crm - CRM 2011 external content with relative URL

> ID：11290985
> 
> 赞同：0
> 
> 时间：2012-07-02T09:25:56.843
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-4

In CRM 4.0 we could place dynamic content (aspx) in the ISV-folder in CRM, creating separate applications but with security and relative URLs to CRM, so for example a custom 360 view of account could be linked in an iframe using a relative URL along the lines of

> /ISV/CrmMvcApp/Account.aspx/Overview?id=....

In CRM 2011 usage of the ISV folder is deprecated and Microsoft has some guidelines on how to transition into doing this in supported manner ([MSDN gg309571: Upgrade Code in the ISV folder to Microsoft Dynamics CRM 2011](http://msdn.microsoft.com/en-us/library/gg309571.aspx)). They say:

> For scenarios that will not be satisfied by the Web resources feature, create your Web application in its own application pool with its own web.config.

The way I am reading this (coupled with the guidelines on supported/unsupported) is that we need a separate web site in IIS with its own binding as you are not allowed to add virtual directories etc. under the standard CRM app. This is unfortunate and does not allow relative paths/URLs in customizations and sitemap. This is troublesome especially when exporting and importing solutions from DEV, TEST and/or PROD.

*   Are my assumptions wrong?
*   Can we somehow have relative paths?
*   Have anyone else found a pragmatic and easy approach to having external content without doing the sitemap and customization changes for each environment?

**EDIT**: Confirmed with other sources that my understanding of the guidelines are correct, as this is also listed in the list of unsupported changes. Virtual folders and web apps are to be kept totally separated from the default CRM web site.

> Creating an Internet Information Services (IIS) application inside the Microsoft Dynamics CRM website for any VDir and specifically within the ISV folder is not supported.

[MSDN gg328350: Unsupported Customizations](http://msdn.microsoft.com/en-us/library/gg328350.aspx#Unsupported)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:57:52.037

If you primarily need to access CRM data/records, take a look at using a jScript web resources. You can do "most" CRUD operations using the REST OData services. If you use JQuery to parse the JSON it's very productive.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:27:15.537

I have found a solution much like the javascript redirect, without the need for client execution and only configuring the environment details (servername, port) once. Additional logic can easily be added.

The solution creates a dependency into the customizations, but not an environment one like and can be used for unmanaged and managed solutions.

The solution was to place a file `Redirect.aspx` in the ISV folder. The code does not in any way interact with CRM and falls within the supported guidelines, however the solution **is not future proof** as the ISV folder is deprecated by Microsoft.

`Redirect.aspx`will automatically pass along any parameter passed, so will work with or without the entity identifiers and so on.

Usage:

*   Place the file in the ISV folder on the CRM app server
*   Change the server name and port to match the current environment (must be done for each environment)
*   In customizations, for example for an iframe, use the following as a source:

    ```
    /ISV/Redirect.aspx?redirect=http://SERVERREPLACE/CustomMvcApp/SomeControllerAction 
    ```

Here is the content of `Redirect.aspx`

```
<%@ Page Language="C#" %>    
<html>
<script runat="server">
  protected override void OnLoad(EventArgs e)
  {
      // must be customized for each environment
      const string ServerBaseName = "appserver1:60001"; 
      const string UrlParameterName = "redirect";
      const string ReplacePattern = "SERVERREPLACE";

      var parameterUrl = Request.Params[UrlParameterName].Replace(ReplacePattern, ServerBaseName);

      var queryStringBuilder = new StringBuilder();

      foreach (var key in Request.QueryString.AllKeys)
      {
          if (key == UrlParameterName)
          {
              continue;
          }

          queryStringBuilder.Append(!(queryStringBuilder.Length > 0) ? "?" : "&");
          queryStringBuilder.Append(key + "=" + Request.QueryString[key]);
      }

      var completeRedirectString = parameterUrl + queryStringBuilder;

      Response.Redirect(completeRedirectString);
  }   
</script>
<head>
    <title>Redirecting</title>
</head>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:42:09.973

Not quite "relative urls" as per your question, but a solution I use is to store "stub" or "root" urls in a config entity and read those records in JScript at runtime to determine the fully qualified destination for your custom links.

# c# - 如何将参数传递给 EventHandler

> ID：11290987
> 
> 赞同：5
> 
> 时间：2012-07-02T09:26:17.450
> 
> 标签：c#

不，这不是那种基本的问题。我正在做一个应用程序并得到一个类似的场景，文件将被下载然后上传到 FTP 服务器，然后本地副本将被删除，然后一个条目将被放置在该文件名的字典中。所以，代码如下

```
public void download_This_WebPage(string url, string cookies_String, string local_Saving_File_Name_With_Path)
{
    WebClient wb = new WebClient();
    wb.Headers.Add(HttpRequestHeader.Cookie, cookies_String);
    // Below I want to pass this local_File _Path to the event handler
    wb.DownloadFileCompleted += new System.ComponentModel.AsyncCompletedEventHandler(wb,);
    wb.DownloadFileAsync(new Uri(url), local_Saving_File_Name_With_Path + ".html");
}

public void data_Download_Completed(Object sender, System.ComponentModel.AsyncCompletedEventArgs args)
{
      //use the file name to upload the file to FTP

}

public FTP_Completed
{
    // Delete the file
} 
```

但是，我不知道如何将该文件名传递给 download_Completed 的事件处理程序。有人可以指导我吗

**编辑：** 感谢“达林”和“弗雷德里克”的回答。是否有任何通用方法可以将自定义数据传递给（已定义）事件处理程序，如下所示

```
void main_Fn()
{
    string my_Data = "Data";
    some_object a = new some_object();
    some_Object.click_event += new eventHandler(click_Happened);
    (Assume that the event passes two ints, I also want to pass the string "my_Data"
      to "click_Happened")
    some_object.start();
}

void click_Happened(int a, int b)
{
   // I want to get the string "my_Data" here. 
} 
```

总之如何欺骗签名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T09:31:20.843

`userToken`您可以将参数中的文件名传递给[DownloadFileAsync()](http://msdn.microsoft.com/en-us/library/ms144197.aspx)。操作完成后，它将在传递给的[AsyncCompletedEventArgs](http://msdn.microsoft.com/en-us/library/system.componentmodel.asynccompletedeventargs.aspx)`UserState`参数的属性中可用：`data_Download_Completed()`

```
string filename = local_Saving_File_Name_With_Path + ".html";
wb.DownloadFileAsync(new Uri(url), filename, filename); 
```

然后：

```
public void data_Download_Completed(Object sender,
    System.ComponentModel.AsyncCompletedEventArgs args)
{
    string filename = (string) args.UserState;
    // Now do something with 'filename'...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:31:14.243

您可以使用该方法的第三个参数，`DownloadFileAsync`它允许您将一个传递`UserState`给完成的处理程序：

```
// subscribe to the completed event
wb.DownloadFileCompleted += data_Download_Completed;
string file = local_Saving_File_Name_With_Path + ".html";
wb.DownloadFileAsync(new Uri("url"), file, file); 
```

在处理程序内部：

```
public void data_Download_Completed(Object sender, AsyncCompletedEventArgs args)
{
    // extract the filename from the UserState of the args
    string file = args.UserState as string;
    ...

} 
```

# javascript - 下划线中的部分模板（就像在车把中一样）？

> ID：11290988
> 
> 赞同：11
> 
> 时间：2012-07-02T09:26:19.897
> 
> 标签：javascript, underscore.js, handlebars.js

我有这样的骨干模型

```
var PeopleModel = Backbone.Model.extend({
defaults: {              
    "people": [
          { "username": "alan", "firstName": "Alan", "lastName": "Johnson", "phone": "1111", "email": "alan@test.com" },
          { "username": "allison", firstName: "Allison", "lastName": "House", "phone": "2222", "email": "allison@test.com" },
          { "username": "ryan", "firstName": "Ryan", "lastName": "Carson", "phone": "3333", "email": "ryan@test.com" },
          { "username": "ed", "firstName": "Edward", "lastName": "Feild", "phone": "4444", "email": "ed@test.com" },
          { "username": "phil", "firstName": "Philip", "lastName": "Doom", "phone": "5555", "email": "phil@test.com" },
          { "username": "gerald", "firstName": "Gerald", "lastName": "Butler", "phone": "6666", "email": "gerald@test.com" }
    ],
    "company": {"name": "Random Corp."},
    "country": "England"
}

}); 
```

下面是我的模板

```
<script id="people-template" type="text/x-handlebars-template">
{{#each people}}
  {{> person}}
{{/each}}
</script>

<script id="person-partial" type="text/x-handlebars-template">
 <div class="person">
    <h2>{{fullName}} </h2>
    <div class="phone">{{phone}}</div>
   <div class="email"><a href="mailto:{{email}}">{{email}}</a></div>    
 </div> 
```

这就是我使用handlebars.js 实现部分的方式。

我的问题

**1.我们有类似的东西，我的意思是underscore.js模板引擎的部分吗？**

**2.如果是，我们如何在underscore.js模板引擎中实现partial**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T18:01:28.343

不，Underscore 的模板中没有原生的部分支持。但是，您可以将几乎任何您想要的 JavaScript 放入其中`<% ... %>`；特别是，您可以调用自己的函数，这样您就可以毫不费力地添加部分内容。你可以有这样的模板：

```
<script id="people-template" type="text/x-handlebars-template">
    <% _(people).each(function(person) { %>
      <%= partial('person', person) %>
    <% }) %>
</script> 
```

然后添加一个`partial`函数`window`：

```
window.partial = function(which, data) {
    var tmpl = $('#' + which + '-partial').html();
    return _.template(tmpl)(data);
}; 
```

演示：http: [//jsfiddle.net/ambiguous/HDuj5/9/](http://jsfiddle.net/ambiguous/HDuj5/9/)

这不像`{{> ... }}`在 Handlebars 中那样流畅和漂亮，但 Underscore 的模板是 JavaScript 本身的一个非常薄的包装器，这在一定程度上限制了你。您可以使用命名空间来避免将东西直接放入其中，`window`或者您可以使用[`{variable: ...}`选项`_.template`](http://underscorejs.org/#template)和包装器来设置您的标准助手。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-09T22:33:16.103

或者为了避免使用全局范围，您可以像这样混合使用全局模板助手：

```
(function() {
    var originalUnderscoreTemplateFunction = _.template;
    var templateHelpers = {};

    _.mixin({
        addTemplateHelpers : function( newHelpers ) {
            _.extend( templateHelpers, newHelpers );
        },

        template : function(text, data, settings) {
            // replace the built in _.template function with one that supports the addTemplateHelpers
            // function above. Basically the combo of the addTemplateHelpers function and this new
            // template function allows us to mix in global "helpers" to the data objects passed
            // to all our templates when they render. This replacement template function just wraps
            // the original _.template function, so it sould be pretty break-resistent moving forward.

            if( data )
            {
                // if data is supplied, the original _.template function just returns the raw value of the
                // render function (the final rentered html/text). So in this case we just extend
                // the data param with our templateHelpers and return raw value as well.

                _.defaults( data, templateHelpers ); // extend data with our helper functions
                return originalUnderscoreTemplateFunction.apply( this, arguments ); // pass the buck to the original _.template function
            }

            var template = originalUnderscoreTemplateFunction.apply( this, arguments );

            var wrappedTemplate = function( data ) {
                _.defaults( data, templateHelpers );
                return template.apply( this, arguments );
            };

            return wrappedTemplate;
        }
    }
} 
```

然后打电话

```
_.addTemplateHelpers( {
    partial : function() {
        return _.template(
            $('#' + which + '-partial').html(),
            data
        );
    }
} ); 
```

这是github 上[下划线 mixin的链接。](https://github.com/rotundasoftware/underscore-template-helpers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-13T16:17:56.923

我认为这类似于戴夫的回答，但可能需要更少的代码：

```
function partialTemplate(origTemplate, partialValues){
    return function(values){
        return origTemplate(_.defaults(values, partialValues));
    };
} 
```

示例用法：

```
var t = _.template('<%= val1 %>,<%= val2 %>'); // original template requiring 2 values
var pt = partialTemplate(t, {val1:1}); // partial template with 1 value pre-populated
pt({val2:2}); // returns '1,2'
pt({val2:3}); // returns '1,3' 
```

# c# - 如何将 Odata 字符串转换为实体对象

> ID：11290994
> 
> 赞同：1
> 
> 时间：2012-07-02T09:26:55.563
> 
> 标签：c#, wcf, entity-framework, wcf-data-services, odata

有什么办法可以“逆转” Odata 服务的效果？即 Odata Web 服务从实体对象生成一个 RSS xml 字符串。

有什么办法可以反过来吗？即从 Odata 字符串生成实体对象？

基本上，我正在寻找可以在控制台应用程序中使用的 Odata 序列化器和反序列化器功能，而无需创建 Odata 服务。

我可以访问生成给定 OData 字符串的 EDMX 文件。我只需要反序列化数据的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:23:43.347

这几乎正​​是 ODataLib 的用途。它是一个实现 OData 格式的读取器和写入器的库。它不读取或写入实际的实体对象，而是将实体表示为自己的 OM（这样您就不必为每个实体类型指定 CLR 类型）。但是将 OM 转化为实际实例非常容易。

ODataLib (Microsoft.Data.OData.dll) 在 NuGet 上可用，或者它是 WCF 数据服务 5.0 版本的一部分。

这是如何使用它的一个非常简短的示例：http: [//blogs.msdn.com/b/astoriateam/archive/2011/10/14/introducing-the-odata-library.aspx](http://blogs.msdn.com/b/astoriateam/archive/2011/10/14/introducing-the-odata-library.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:50:32.933

这些函数是 WCF 数据服务的内部实现 - 所有相关的**内部**类都应该在`System.Data.Services.Serializers`命名空间内。

您可以尝试使用类 from`System.ServiceModel.Syndication`来处理 Atom / RSS 提要。我认为数据服务在内部使用它们，但您很可能会重新实现数据服务中已经可用的部分 OData 处理。

# django - 从查询集中过滤掉多封电子邮件

> ID：11290997
> 
> 赞同：0
> 
> 时间：2012-07-02T09:27:25.470
> 
> 标签：django, email, django-queryset

我正在尝试从查询集中过滤掉多封电子邮件，以阻止我们的员工电子邮件影响任何导出。我在settings.py中有以下内容：

```
EMAIL_FILTERS = ['email1', 'email2'] 
```

我正在尝试使用它在以下查询中使用我们的电子邮件过滤掉数据库中的任何条目：

```
EMAIL_FILTERS = getattr(settings, 'EMAIL_FILTERS')

campaigns = CampaignsSignup.objects.filter(created_date__gte=self._get_start_date(dte), 
                                    created_date__lte=self._get_end_date(dte)).order_by('-created_date') 
```

然而，在尝试 Q 并排除之后，我似乎无法让它工作。我还应该尽可能多地指出，我希望能够使用 endwith 一些员工正在使用他们的个人电子邮件地址，所以目前它不可行。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T09:59:34.567

我看到您找到了解决方案，但通常的方法是`exclude`：

```
campaigns = CampaignsSignup.objects.filter(
                created_date__gte=self._get_start_date(dte), 
                created_date__lte=self._get_end_date(dte)
            ).order_by('-created_date').exclude(email__in=SAVCHAMP_EMAIL_FILTERS) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:49:38.220

在把所有东西都扔给它之后，我偶然发现了一种方法。将 __in 与 Q 一起使用可以正确过滤掉设置中 email_filter 列表中包含的电子邮件。

```
campaigns = CampaignsSignup.objects.filter(~Q(email__in=SAVCHAMP_EMAIL_FILTERS), created_date__gte=self._get_start_date(dte), 
                                    created_date__lte=self._get_end_date(dte)).order_by('-created_date') 
```

# php - 为什么我不能使用 Eclipse Juno 创建 PHP 项目？

> ID：11290998
> 
> 赞同：2
> 
> 时间：2012-07-02T09:27:27.223
> 
> 标签：php, eclipse, eclipse-pdt

我在 Fedora 17 中从标准的 Fedora 存储库安装了 Eclipse Juno。我使用帮助->安装新软件界面从 Eclipse 存储库中添加了 PDT。

但是，当我去创建一个新项目时，我没有创建 PHP 项目的选项，只有普通的“常规”项目。

为什么 Eclipse 不允许我创建 PHP 项目，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:14:18.510

我关闭了 Eclipse 并删除了 ~/.eclipse/*，重新启动了 Eclipse，PHP 插件（和其他插件）似乎已经醒来。

仍然不知道是什么原因造成的，但我现在至少可以完成工作！

# vba - 创建一个读写excel电子表格+读写电子邮件的Windows应用程序

> ID：11290999
> 
> 赞同：0
> 
> 时间：2012-07-02T09:27:31.443
> 
> 标签：vba, vbscript, excel

我是在欧洲一家医院工作的实习生。我的日常工作是在需要时为护士、医生或外科医生寻找替代品。为此，我收到了来自某个部门的请求，格式为 Excel 电子表格，其中包含 4 个不同的属性，这些属性决定了所需的时间、部门和特定类型的人员。

从该信息中，我查看了一个固定数据库，该数据库也基于 excel 电子表格，供符合要求的人使用。

在我发送电子邮件/短信或致电部门负责人以获得批准后，回复几乎总是肯定的。

一旦我得到确认，我将更换的信息发送到需要更换的部门，然后我的工作就完成了。我每天要做大约 150 个这样的请求，如果我能为此编写一个程序，我就能为医院节省很多纳税人的钱，因为他们雇用了另外 3 个人来做这项工作。

因此，我的问题是： **编写此程序的最佳语言是什么？**

您会推荐一种可以更轻松地访问文件和发送电子邮件的脚本语言吗？还是我们太弱了，无法完成这项任务？

**语言要求如下：**

*   **访问 Excel 电子表格**
*   **阅读电子表格并从单元格数组中复制值**
*   **在电子表格中查找值**
*   **使用我在 Excel 电子表格搜索中获得的值发送电子邮件？**
*   **阅读一封电子邮件，如果值为 = 是，则执行...否则执行...**
*   **最后，向 xxx 人发送一封带有 xxxxxx 信息的电子邮件**

*如果我使用的是我的 mac，我会使用像 applescript 和 automator 这样的脚本语言来访问和读取 excel 文件并发送电子邮件/短信。*

感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:35:04.617

下面的代码距离完整的解决方案还有很长的路要走。它的目的是让您开始思考您的系统将如何运作。

展望未来，我设想需要一个名为*HumanActionRequired.txt*的文本文件。第 10 行代码是一个常量，指定将在其中创建此文件的文件夹。您必须将“C:\DataArea\Play”替换为系统上文件夹的名称。您可能希望重命名文件：见第六行。

虽然我设想这个文件是错误消息的目的地，但我在这里使用它来列出收件箱中消息的详细信息。我只输出了一小部分可用属性，但它应该让你思考什么是可能的。

下面的代码属于 OutLook 中的一个模块：

1.  打开 Outlook。
2.  选择工具、宏和安全。您需要将安全级别设置为“中”。稍后，您可以与 IT 部门讨论获取宏的受信任状态，但现在就可以了。
3.  选择工具、宏和 Visual Basic 编辑器或单击 Alt+F11。
4.  您可能会在左侧看到 Project Explorer（如果没有，则显示 Control+R）。如果您从未创建过 Outlook 宏，则右侧区域将为灰色。
5.  选择插入、模块。灰色区域将变为白色，上面的代码区域和下面的立即窗口。
6.  将下面的代码复制到代码区。

将光标定位在宏*LocateInterestingEmails()*中，然后单击 F5。您将被警告宏正在尝试访问您的电子邮件。勾选*允许访问*并选择时间限制，然后单击是。该宏会将 Inbox 中电子邮件的选定属性写入文件*HumanActionRequired.txt*。

```
Option Explicit
Sub LocateInterestingEmails()

  Dim ErrorDescription As String
  Dim ErrorNumber As Long
  Static ErrorCount As Integer
  Const FileCrnt As String = "HumanActionRequired.txt"
  Dim FolderTgt As MAPIFolder
  Dim InxAttachCrnt As Long
  Dim InxItemCrnt As Long
  Dim OutputFileNum As Long
  Const PathCrnt As String = "C:\DataArea\Play"

  ErrorCount = 0
  OutputFileNum = 0

Restart:

  ' On Error GoTo CloseDown

  Set FolderTgt = CreateObject("Outlook.Application"). _
              GetNamespace("MAPI").GetDefaultFolder(olFolderInbox)

  OutputFileNum = FreeFile
  Open PathCrnt & "\" & FileCrnt For Append Lock Write As #OutputFileNum

  For InxItemCrnt = 1 To FolderTgt.Items.Count
    With FolderTgt.Items.Item(InxItemCrnt)

      If .Class = olMail Then
        Print #OutputFileNum, "-----------------------------"
        Print #OutputFileNum, "Subject: " & .Subject
        Print #OutputFileNum, "Sender: " & .SenderEmailAddress
        Print #OutputFileNum, "Recipient: " & .To
        Print #OutputFileNum, "Date sent: " & .SentOn
        If .Attachments.Count > 0 Then
          Print #OutputFileNum, "Attachments:"
          For InxAttachCrnt = 1 To .Attachments.Count
            Print #OutputFileNum, "  " & .Attachments(InxAttachCrnt).DisplayName
          Next
        End If
      End If
    End With
  Next

CloseDown:
  ErrorNumber = Err.Number
  ErrorDescription = Err.Description
  Err.Clear

  Set FolderTgt = Nothing

  If ErrorNumber <> 0 Then
    ' Here because of an error
    If OutputFileNum = 0 Then
      ' Output file not open
      OutputFileNum = FreeFile
      Open PathCrnt & "\" & FileCrnt For Append Lock Write As #OutputFileNum
    End If
    Print #OutputFileNum, "-----------------------------"
    Print #OutputFileNum, "Error at " & Now()
    Print #OutputFileNum, "Error number = " & ErrorNumber & _
                          "   description = " & ErrorDescription
  End If

  If OutputFileNum <> 0 Then
    ' File open
    Close OutputFileNum
    OutputFileNum = 0
  End If

End Sub 
```

**版本 2**

此版本包括第一个版本中的代码以及：

*   它会打开一个现有工作簿，其中保存有关找到的 Excel 附件的信息。
*   `xls?`它根据收到的日期/时间和发件人的姓名识别带有扩展名的附件并将其保存到光盘中。
*   它会打开每个保存的附件。对于已保存附件中的每个工作表，它会在现有工作簿中创建一行，其中包含文件名、发件人姓名和电子邮件地址、工作表名称和单元格 A1 的值。

我认为这段代码不会直接有用，但它显示了如何保存附件和打开工作簿以读取或写入，我相信你会需要这些。

我知道唯一丢失的代码是：

*   将已处理的电子邮件移动到保存文件夹。
*   生成回复电子邮件。

但是，根据您希望如何自动化整个过程，可能需要更多代码。

下面的代码并不像我想要的那样整洁。在您完全理解之前，我不想再添加任何内容。我还希望更好地了解您计划发送的电子邮件以及整个过程所需的自动化。

对您不理解的代码的任何部分提出问题。

```
Option Explicit
Sub LocateInterestingEmails()

  ' I use constants to indentify columns in worksbooks because if I move the
  ' column I only need to update the constant to update the code.  I said the
  ' same in a previous answer and some one responded that they preferred
  ' Enumerations.  I use Enumerations a lot but I still prefer to use constants
  ' for column numbers.
  Const ColSumFileNameSaved As String = "A"
  Const ColSumFileNameOriginal As String = "B"
  Const ColSumSenderName As String = "C"
  Const ColSumSenderEmail As String = "D"
  Const ColSumSheet As String = "E"
  Const ColSumCellA1 As String = "F"

  ' You must change the value of this constant to the name of a folder on your
  ' computer.  All file created by this macro are written to this folder.
  Const PathCrnt As String = "C:\DataArea\Play"

  ' I suggest you change the values of these constants to
  ' something that you find helpful.
  Const FileNameHAR As String = "HumanActionRequired.txt"
  Const FileNameSummary As String = "Paolo.xls"

  Dim CellValueA1 As Variant
  Dim ErrorDescription As String
  Dim ErrorNumber As Long
  Dim FileNameReqDisplay As String
  Dim FileNameReqSaved As String
  Dim FolderTgt As MAPIFolder
  Dim InxAttachCrnt As Long
  Dim InxItemCrnt As Long
  Dim InxSheet As Long
  Dim OutputFileNum As Long
  Dim Pos As Long
  Dim ReceivedTime As Date
  Dim RowSummary As Long
  Dim SenderName As String
  Dim SenderEmail As String
  Dim SheetName As String
  Dim XlApp As Excel.Application
  Dim XlWkBkRequest As Excel.Workbook
  Dim XlWkBkSummary As Excel.Workbook

  ' Ensure resource controls are null before macro does anything that can cause
  ' an error so error handler knows if the resource is to be released.
  OutputFileNum = 0
  Set XlApp = Nothing
  Set XlWkBkRequest = Nothing
  Set XlWkBkSummary = Nothing

  ' Open own copy of Excel
  Set XlApp = Application.CreateObject("Excel.Application")
  With XlApp
    .Visible = True         ' This slows your macro but helps during debugging
    ' Open workbook to which a summary of workbooks extracted will be written
    Set XlWkBkSummary = .Workbooks.Open(PathCrnt & "\" & FileNameSummary)
    With XlWkBkSummary.Worksheets("Summary")
      ' Set RowSummary to one more than the last currently used row
      RowSummary = .Cells(.Rows.Count, ColSumFileNameSaved).End(xlUp).Row + 1
    End With
  End With

Restart:

  ' I prefer to have my error handler switched off during development so the
  ' macro stops on the faulty statement.  If you remove the comment mark from
  ' the On Error statement then any error will cause the code to junp to label
  ' CloseDown which is at the bottom of this routine.

  ' On Error GoTo CloseDown

  ' Gain access to InBox
  Set FolderTgt = CreateObject("Outlook.Application"). _
              GetNamespace("MAPI").GetDefaultFolder(olFolderInbox)

  ' Open text file for output.  I envisage this file being used for error
  ' messages but for this version of the macro I write a summary of the
  ' contents of the InBox to it.
  OutputFileNum = FreeFile
  Open PathCrnt & "\" & FileNameHAR For Output Lock Write As #OutputFileNum

For InxItemCrnt = 1 To FolderTgt.Items.Count
  With FolderTgt.Items.Item(InxItemCrnt)

    If .Class = olMail Then
      ' Only interested in mail items.  Most of the other items will be
      ' meeting requests.
      Print #OutputFileNum, "-----------------------------"
      Print #OutputFileNum, "Subject: " & .Subject
      ' Currently we are within With FolderTgt.Items.Item(InxItemCrnt).
      ' Values from this mail item are to be written to a workbook
      ' for which another With will be required.  Copy values to
      ' variables for they are accessable.
      ' Note: XlApp.XlWkBkSummary.Worksheets("Summary")
      '         .Cells(RowSummary, ColSumFileNameOriginal).Value = _
      '       FolderTgt.Items.Item(InxItemCrnt).Attachments(InxAttachCrnt) _
      '       .DisplayName
      ' is legal but is not very clear.  Code is much clearer will full use
      ' of With stateents even if it means values must be copied to variable.
      SenderName = .SenderName
      SenderEmail = .SenderEmailAddress
      ReceivedTime = .ReceivedTime
      Print #OutputFileNum, "SenderName: " & SenderName
      Print #OutputFileNum, "SenderAddr: " & SenderEmail
      Print #OutputFileNum, "Received: " & ReceivedTime
      Print #OutputFileNum, "Date sent: " & .SentOn
      If .Attachments.Count > 0 Then
        Print #OutputFileNum, "Attachments:"
        For InxAttachCrnt = 1 To .Attachments.Count
          With .Attachments(InxAttachCrnt)
            ' I cannot find an example for which the
            ' DisplayName and FileName are different
            FileNameReqDisplay = .DisplayName
            Print #OutputFileNum, "  " & FileNameReqDisplay & "|" & .FileName
            Pos = InStrRev(FileNameReqDisplay, ".")
            ' With ... End With and If ... End If must be properly nested.
            ' Within the If below I want access to the attachment and to the
            ' workbook.  Hence the need to terminate the current With and then
            ' immediately start it again within the If ... End If block.
          End With
          If LCase(Mid(FileNameReqDisplay, Pos + 1, 3)) = "xls" Then
            With .Attachments(InxAttachCrnt)
              ' Save the attachment with a unique name.  Note this will only be
              ' unique if you do not save the same attachment again.
              FileNameReqSaved = _
                   Format(ReceivedTime, "yyyymmddhhmmss") & " " & SenderName
              .SaveAsFile PathCrnt & "\" & FileNameReqSaved
            End With
            ' Open the saved attachment
            Set XlWkBkRequest = _
                         XlApp.Workbooks.Open(PathCrnt & "\" & FileNameReqSaved)
            With XlWkBkRequest
              'Examine every worksheet in workbook
              For InxSheet = 1 To .Worksheets.Count
                With .Worksheets(InxSheet)
                  ' Save sheet name and a sample value
                  SheetName = .Name
                  CellValueA1 = .Cells(1, 1).Value
                End With
                ' Save information about this sheet and its workbook
                With XlWkBkSummary.Worksheets("Summary")
                  .Cells(RowSummary, ColSumFileNameSaved).Value = _
                                                            FileNameReqSaved
                  .Cells(RowSummary, ColSumFileNameOriginal).Value = _
                                                          FileNameReqDisplay
                  .Cells(RowSummary, ColSumSenderName).Value = SenderName
                  .Cells(RowSummary, ColSumSenderEmail).Value = SenderEmail
                  .Cells(RowSummary, ColSumSheet).Value = SheetName
                  .Cells(RowSummary, ColSumCellA1).Value = CellValueA1
                  RowSummary = RowSummary + 1
                End With  ' XlWkBkSummary.Worksheets("Summary")
              Next InxSheet
              .Close SaveChanges:=False
              Set XlWkBkRequest = Nothing
            End With  ' XlWkBkRequest
          End If
        Next
      End If
    End If
  End With
Next

CloseDown:
ErrorNumber = Err.Number
ErrorDescription = Err.Description
Err.Clear

Set FolderTgt = Nothing

If ErrorNumber <> 0 Then
  ' Have reached here because of an error
  If OutputFileNum = 0 Then
    ' Output file not open
    OutputFileNum = FreeFile
    Open PathCrnt & "\" & FileNameHAR For Append Lock Write As #OutputFileNum
  End If
  Print #OutputFileNum, "-----------------------------"
  Print #OutputFileNum, "Error at " & Now()
  Print #OutputFileNum, "Error number = " & ErrorNumber & _
                        "   description = " & ErrorDescription
End If

' Release resources

If OutputFileNum <> 0 Then
  ' File open
  Close OutputFileNum
  OutputFileNum = 0
End If

If Not (XlWkBkRequest Is Nothing) Then
  XlWkBkRequest.Close SaveChanges:=False
  Set XlWkBkRequest = Nothing
End If

If Not (XlWkBkSummary Is Nothing) Then
  XlWkBkSummary.Close SaveChanges:=True
  Set XlWkBkSummary = Nothing
End If

If Not (XlApp Is Nothing) Then
  XlApp.Quit
  Set XlApp = Nothing
End If

End Sub 
```