# StackOverflow 问答 11393000-11393999

# jquery - 使用 jquery/ajax 将变量保存到会话 - MODX 革命

> ID：11393005
> 
> 赞同：0
> 
> 时间：2012-07-09T10:13:47.700
> 
> 标签：jquery, ajax, modx

我有 2 个选项，用户可以在 modx rev 2.2.0 * background
* font-size制作的页面上更改

要更改背景和字体大小，我使用了 jquery，所以我认为最好的方法是使用 ajax。所以我必须创建 1/2 页面，将这些变量添加到会话中，所以如果用户转到不同的页面，背景和字体大小保持不变。如果用户在几天后访问页面，背景和字体大小将保持不变。

这是我的javascript代码：

```
<script type="text/javascript">
 $(document).ready(function () {
  background5();
    var originalFontSize = $('html').css('font-size');
 });

 function background1() { $('.wrap').css("background","url(assets/templates/default/images/bg1.jpg)"); return false; }
 function background2() { $('.wrap').css("background","url(assets/templates/default/images/bg2.jpg)"); return false; }
 function background3() { $('.wrap').css("background","url(assets/templates/default/images/bg3.png)"); return false; }
 function background4() { $('.wrap').css("background","url(assets/templates/default/images/bg4.jpg)"); return false; }
 function background5() { $('.wrap').css("background","url(assets/templates/default/images/bg5.jpg)"); return false; }
 function background6() { $('.wrap').css("background","url(assets/templates/default/images/bg6.jpg)"); return false; }
 function background7() { $('.wrap').css("background","url(assets/templates/default/images/bg7.jpg)"); return false; }
 function background8() { $('.wrap').css("background","url(assets/templates/default/images/bg8.jpg)"); return false; }
 function background9() { $('.wrap').css("background","url(assets/templates/default/images/bg9.jpg)"); return false; }
 function big_font() {
  var currentFontSize = $('html').css('font-size');
  var currentFontSizeNum = parseFloat(currentFontSize, 10);
  var newFontSize = currentFontSizeNum*1.1;
  $('html').css('font-size', newFontSize);
  return false;
 }
 function small_font() {
  var currentFontSize = $('html').css('font-size');
  var currentFontSizeNum = parseFloat(currentFontSize, 10);
  var newFontSize = currentFontSizeNum*0.9;
  $('html').css('font-size', newFontSize);
  return false;
 }
</script> 
```

我的问题是如何在 modx 中将变量添加到会话中，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T04:59:17.213

创建一个用作 Ajax 存根的资源，并在其上放置一个未缓存的片段，其中包含您的“添加到会话”代码。该片段可能很简单：

```
<?php
// example only, be sure to sanitize and add some sensible defaults here
$background = $_POST['background'];
$fontSize   = $_POST['font_size'];

// write to user's session
$_SESSION['background'] = $background;
$_SESSION['fontSize'] = $fontSize;

return ''; 
```

然后使用 jQuery 创建对存根的 Ajax 调用，将`background`和`font_size`参数传递给它：

```
var background = 6,
    fontSize = 2;
// let's assume your Ajax stub resource id is 7
$.post("[[~7]]", { background: background, font_size: fontSize } ); 
```

`background()`注意：您可以只使用一个函数来整理所有这些函数，如下所示：

```
function background(n) {
    var url = "assets/templates/default/images/bg"+parseInt(n)+".jpg";
    $('.wrap').css("background","url("+url+")"); 
    return false; 
} 
```

# django - 我们如何在 Django url 中传递字典对象？

> ID：11393006
> 
> 赞同：0
> 
> 时间：2012-07-09T10:13:50.403
> 
> 标签：django, django-urls

我是 Django 框架的新手，所以我想知道如何将字典对象作为参数传递给 Django URL。在我的视图中，我如何将它作为字典对象检索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:29:04.597

您可以对字典进行 url 编码，如下所示。您可以通过在 urls.py 中适当地编写模式或在您的视图中通过视图参数获取它们`request.GET.get('key1')`（这里的“key1”是要传递的变量的名称）。所以基本上你将不得不重建字典。

```
import urllib
my_dict = { 'key1': 'abc', 'key2': 100 }
uri = urllib.urlencode(my_dict)
fullurl = your_server_url + "/?" + uri 
```

这里`your_server_url`被假定为您的网址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:17:23.537

罗汉所说的将完全按照您的意愿行事。

但是，既然您说您是 Django 新手，我建议您改用随附的电池。据我所知，有一个极端的情况是您希望在 URL 中传递字典（这是您第一次引入用户并希望为他们带来一些信息时）。

如果以上不是您的用例，请查看[会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/)。

如果您尝试通过 URL 导入有关您的用户的信息，请记住验证您获得的内容。

# c# - 使用 wcf 服务实现锁定/编辑/解锁

> ID：11393007
> 
> 赞同：0
> 
> 时间：2012-07-09T10:13:51.757
> 
> 标签：c#, wcf, entity-framework, locking

我正在实现一个服务，让用户浏览各种对象，添加新对象然后保存它们，这是一个非常基本的功能。该服务通过 WCF 提供，并首先使用 EF4 代码访问 SQL Server 数据库的数据。

但是有一个问题：有一些规则应该让一个用户一次只能处理一个对象，因此标题中提到了锁定编辑解锁行为。

因此，假设有一个过滤器显示“时间戳在日期 X 和日期 Y 之间的记录”。现在用户锁定了这个“过滤器”，并且是唯一可以为日期 X 和日期 Y 之间的时间范围添加（注意：不能修改！）新记录的用户。

还值得注意的是，过滤器不是我可以访问的物理实体，因为实际上有无限可能的过滤器。因此，“选择更新”/行锁定是不可能的（我认为！）。此外，过滤器仅在固定的时间范围步骤中可用，因此过滤器没有重叠，尽管您可以锁定未来（或过去）的距离没有限制。

到目前为止，我已经提出了一个可行的解决方案，但我对此并不满意。我更喜欢将代码放在我的服务中，而不是在数据库中实现它，但欢迎提出任何建议：

*   当用户请求锁定时，我首先检查是否已经存在符合过滤器并设置了“锁定”时间戳的对象。如果有，则不可能再有一个锁。如果没有，我创建一个新记录并将其保存以获取此记录的“句柄”（一些 id）以传回给客户端。但是，在我这样做之前，我再次运行查询，如果我在设置了“锁定”时间戳的时间范围内收到多个记录，则具有例如最高 id 的记录将计为实际锁定，所有其他记录将被删除。我认为这不是特别干净，所以我真的不想使用它。

*   我也想过使用 WCF operationcontract 属性在任何时候只允许一次调用，但我也不喜欢这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:43:48.677

我建议在用户尝试选择过滤器或尝试保存更改时检查活动过滤器（选择使用户体验更好）。为了确定有源滤波器，您需要确保尚未使用时间步长，这可以像这样轻松完成：

public static class FilterMonitor { private static Dictionary steps = new Dictionary();

```
public static bool CheckActiveAddIfNew(TimeStep step)
{
    //Assumes synchronization logic
    bool isActive;
    if(!steps.TryGetValue(step, out isActive)
    {
       steps.Add(step, true);
       isActive = true;
    }
    return isActive;
}

public static bool ChangeFilter(TimeStep oldSetp, TimeStep newStep)
{
   //Synchronization code
   bool ableToChange;
   if(!CheckActiveAddIfNew(newStep))
   {
       steps[newStep] = true;
       steps[oldStep] = false;
       ableToChange = true;
   }

   return ableToChange;
} 
```

}

一旦用户完成过滤器，他们应该释放它并允许其他用户在需要时获取它。这可以通过类似 ChangeFilter 方法的方法来完成，该方法仅允许他们在尚未被其他用户选择的情况下选择新过滤器。这确保了任何时候只有一个用户可以访问过滤器，从而防止多个用户从同一个过滤器中添加/删除的情况。

但是，如果您需要多个用户访问同一个 TimeRange 但只想允许单个用户向该范围添加/删除记录，只需将 Dictionary 中的 bool 替换为一个映射到一个且只有一个用户的 User 对象。这会将逻辑从简单的活动/非活动过滤器更改为用户1/非活动的活动和拥有。显然，只允许 User1 将记录添加到该范围。

请让我知道，如果你有任何问题。

# javascript - 如何使用 Javascript SDK 设置访问令牌？

> ID：11393012
> 
> 赞同：7
> 
> 时间：2012-07-09T10:14:04.850
> 
> 标签：javascript, facebook-javascript-sdk, facebook-access-token

我正在寻找类似于`Facebook::setAccessToken($access_token)`PHP SDK 的东西；也就是说，设置用于后续请求的访问令牌（通过其他方式检索到它）。

在 Javascript 中，我只能找到 getter ( `FB.getAccessToken`)。我想这是故意避免使用访问令牌客户端的，但是如果只有与访问令牌相关的用户才能看到它，会有什么风险？

我可以将它作为每个查询的参数嵌入，但据我所知，这对于 XFBML 是不可能的。

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:33:00.040

SDK 中没有内置任何内容。

如果你真的需要它，你可以这样破解它：

```
FB.provide('', {
  'setAccessToken': function(a) {
    this._authResponse = { 'accessToken': a };
  }
});
// Usage
FB.setAccessToken('my_access_token'); 
```

但是，如果您这样做，Facebook 将登录到他们的服务器，表明您使用了他们的 SDK 的“已弃用”功能，并向您发送警告消息。最好将它直接传递给请求（这就是我最终的结果）。

不过，这对 XFBML 不起作用（您必须自己发出 FQL 查询并填充您自己的标记）。

# iphone - 如何以编程方式从 UITextField 中的阿拉伯语键盘检查输入的文本是否为阿拉伯语？

> ID：11393016
> 
> 赞同：0
> 
> 时间：2012-07-09T10:14:20.167
> 
> 标签：iphone, ios, ipad, uitextfield

我们如何检查选定的键盘不是英语而是阿拉伯语。所以在后期我将阿拉伯数字转换为英文数字，​​以便在网络服务器上更好地搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:34:07.233

您可以知道手机的当前语言。通过以下代码

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSArray *languages = [defaults objectForKey:@"AppleLanguages"];
    NSString *currentLanguage = [languages objectAtIndex:0];

    NSLog(@"Current Locale: %@", [[NSLocale currentLocale] localeIdentifier]);
    NSLog(@"Current language: %@", currentLanguage); 
```

如果它是阿拉伯语，这意味着键盘也将使用阿拉伯语，用户将输入阿拉伯语文本。

# mysql - 获取最大序列号对应的记录

> ID：11393018
> 
> 赞同：1
> 
> 时间：2012-07-09T10:14:25.280
> 
> 标签：mysql, aggregate-functions

我想获取与最大序列号对应的记录

```
slno            date      name

1-22-12-2011-1  1/1/2012  Amrutha
1-22-12-2011-2  1/1/2012  Amrutha
1-22-12-2011-3  1/1/2012  Amrutha 
```

我想要一个返回与 slno 对应的数据的查询`1-22-12-2011-3`。我的意思是最后一个位置的最大值。我怎样才能为它写一个查询？我的数据库管理系统是 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:32:18.350

***假设您有相同格式的数据，例如`1-22-12-2011-1`***

下面应该工作

```
SELECT MAX(CONCAT(
           substr(slno,1,1), 
           substr(slno,3,2), 
           substr(slno,6,2),
           substr(slno,9,4),
           substr(slno,14,1)))
as "newslno"
FROM myTable; 
```

这将为您提供最大`slno`的桌子

## [在 sqlfiddle 演示](http://sqlfiddle.com/#!2/2ad0e/18)

* * *

## 更新 1

我认为您需要在 WHERE 语句中添加 AND 条件...`AND name='Amrutha'`

```
SELECT MAX(CONCAT( 
                 substr(slno,1,1), 
                 substr(slno,3,2), 
                 substr(slno,6,2), 
                 substr(slno,9,4), 
                 substr(slno,14,1))) as "newslno" 
FROM u_investment 
WHERE investorcode='0809/ 115' AND name='Amrutha' 
```

# java - 当数组大小增加时找到第 n 个最大数（多次）

> ID：11393019
> 
> 赞同：1
> 
> 时间：2012-07-09T10:14:27.250
> 
> 标签：java, algorithm

我们可以使用*O(n)*时间复杂度的***Median of Medians 算法轻松找到第 n 个最大的。*** 如果我们必须在同一个数组中多次找到第 n 个最大的数，最好的方法是对*O(NlogN)*进行排序 ，然后在*O(1)*时间复杂度中找到该数。 但是，当数组大小增加并且我们必须找到第 n 个最大的数，比如 array.length/3 th 最大或 array.length/2 th 最大 时，什么是有效的算法。**例子**

 *****```
Array- 1,3,2,4,5 n=2 Answer-4   
New Array 1,3,2,4,5,7  n=2 answer-5  
New Array 1,3,2,4,5,7,3 n=2 answer-5 
```

**注意**
n 取决于数组的长度。
请帮帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T10:24:37.830

我确信您必须始终跟踪整个阵列。假设我们收到 100, 99, 98, ..., 1, 0, -1, ... 那么第 n 个最大的数字将遵循相同的顺序，尽管速度变慢：100、100、99、99、98、 98...

本质上，我们不能忘记输入中的任何数字，因为在这种情况下，每个数字最终都会被选为第 n 个最大的数字。

也就是说，每次我们读入一个新元素时，都有一个 O(log N) 算法（对于 N，整体元素的数量）来“更新”第 n 个最大的元素，这似乎可能是最优的。或多或少，只需保留 n 个最大元素的最小优先级队列和 Nn 个较小元素的最大优先级队列。每当 n 增加（例如，array.length / 3 增加）时，将一些东西从较小元素队列中拉出到较大元素队列中；每次我们读取一个新元素时，将其放入适当的队列中，可能会将一个元素从“较大元素”队列中撞到“较小元素”队列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:15:00.907

有趣的问题。这取决于有多少值是唯一的，以及您从新数组开始、搜索和插入的频率。

对于许多 n 是唯一的，很少从频繁插入/搜索的新数组开始，我的第一个预感是：

*   创建一个 max-heap`tip`和一个 max-heap `bulk`，让 n 成为你想要的排名（第 n 个值）
*   插入：将新节点推入`tip`；如果`tip.size() >= (n-1)`，弹出`tip.top()`并推入`bulk`
*   查询词语：返回`bulk.top()`

这应该为您`O(N log(N))`提供启动、`O(log(N))`插入（比排序快得多）和`O(1)`搜索。

如果唯一值的数量远小于 N，我可能会使用计数排序，然后按值对 bin 进行排序。

**编辑**：更详细地查看 Louis Wasserman 的答案，它似乎与我的第一个算法几乎完全重叠。但是，仍然想建议不要将*“从较小元素队列中取出的东西”*拉出来，而是可以通过选择最大元素作为推入最小堆的元素来进行搜索 O(1)。*****

# dylib - 将库（dylib）链接到已编译的 ipa

> ID：11393020
> 
> 赞同：0
> 
> 时间：2012-07-09T10:14:35.890
> 
> 标签：dylib, ipa, install-name-tool

我有一个已编译的 ipa 和一个 .dylib 文件。使用 install_name_tool 我可以更改 ipa 文件二进制文件中存在的库。是否有任何用于向 ipa 添加库的命令。更具体地说，我想在 ipa 的 Mach-O 二进制文件中添加一个 LC_LOAD_DYLIB 命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:54:38.200

您将需要编辑 Mach-o 二进制文件来执行此操作。这需要一些编程：P 查看 mach_inject 以获得更多提示。

# android - 如何使用 System.load() 函数加载库？

> ID：11393022
> 
> 赞同：0
> 
> 时间：2012-07-09T10:14:40.867
> 
> 标签：android, android-ndk, libusb

我需要`ld-uClibc-0.9.30.1.so`为我的 Android Eclipse 项目加载库。我尝试`Sytem.load("/root/workspace/libs/ld-uClibc-0.9.30.1.so")`从主机加载它，但出现错误：

```
Cannot load library /root/workspace/libs/ld-uClibc-0.9.30.1.so. Library not found. 
```

有什么事？为什么它不适用于 System.load？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:15:28.717

才意识到真正的问题是什么。我一直认为您正在尝试加载 uClibc C 库。但实际上，情况并非如此。您正在尝试加载 uClibc 动态链接器，以解决与 uClibc 而不是仿生链接的 libusb 版本中的依赖关系。

**这只是行不通**（至少没有淫秽的黑客）

您需要使用 ndk 工具链重建与仿生相关的所有内容，这可能通过其生成独立工具链功能来实现。

但是，试图让 libusb 在没有 root 或修改设备文件权限的情况下在 android 上运行可能是徒劳的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:18:53.823

将库添加到项目文件夹内的 libs 文件夹中，然后调用

```
System.loadLibrary("ld-uClibc-0.9.30.1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:26:33.493

我用 NDK 编译了 libusb.so，现在至少可以在 Android 项目中加载它。我认为这个话题可以被视为已回答。我将发布另一个关于在 Android 上使用 libusb 的问题。如果你们仍然给我一些好的提示，我将不胜感激，因为到目前为止它对我帮助很大。

# ios - 操作无法完成。（可可错误 516。）

> ID：11393023
> 
> 赞同：4
> 
> 时间：2012-07-09T10:14:43.257
> 
> 标签：ios, database, sqlite, copy

```
-(void) checkAndCreateDatabase{

BOOL success;

NSFileManager *fileManager = [NSFileManager defaultManager];

success = [fileManager fileExistsAtPath:databasePath];

if(success) return;

NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

 NSError *errr;

 [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:&errr];

 NSLog( @"Error >>>>>>>> %@",errr);

} 
```

使用上述代码在 iOS 5.0 模拟器中创建的数据库文件，但没有 sql 查询。如果使用 iOS 4.3 模拟器，它可以正常工作。运行 te app 时显示以下错误。

```
Error >>>>>>>> Error Domain=NSCocoaErrorDomain Code=516 "The operation couldn’t be completed. (Cocoa error 516.)" UserInfo=0x6a53860 {NSUserStringVariant=(
Copy
), NSFilePath=/Users/sj/Library/Application Support/iPhoneSimulator/5.0/Applications/D8BF5CC1-5690-4897-A3D7-252D915D399E/MyTest.app/MyTestDB.sql, NSDestinationFilePath=/Users/sj/Library/Application Support/iPhone Simulator/5.0/Applications/D8BF5CC1-5690-4897-A3D7-252D915D399E/Documents/MyTestDB.sql, NSUnderlyingError=0x6a65510 "The operation couldn’t be completed. File exists"} 
```

# tridion - 无法初始化类 com.tridion.linking.Linking

> ID：11393026
> 
> 赞同：2
> 
> 时间：2012-07-09T10:14:59.733
> 
> 标签：tridion

对于我们正在开发的 .NET Tridion 2011 SP1 Web 应用程序，我收到以下错误。据我所知以下文档，所有必需的程序集和 jar 文件都安装在 bin 目录中，并且全部配置为指向许可证文件（最近生成）。

任何人都从以前的经验中知道可能导致这种情况的原因是什么？

# 无法初始化类 com.tridion.linking.Linking

找不到某些配置的类路径根

=================================================

ClassPath : C:\Websites\Live\malvern.com.en\bin\bin ClassPath : C:\Websites\Live\malvern.com.en\bin\bin ClassPath : C:\Websites\Live\malvern.com.en \bin\bin

==================================================== ========== 一些 Java 类或接口无法找到或加载

此问题的最典型原因是：

*   您忘记配置类路径
*   类路径中缺少 jarfile、zipfile 或目录
*   您的一个类路径条目中有错字
*   您的类路径中缺少一个类所需的 jarfile
*   您的类路径中的 jarfile 已过期且不包含一些新类

==================================================== ==========

javax.servlet.jsp.tagext.TagSupport com.tridion.web.jsp.tag.DynamicComponentLinkHandler com.tridion.web.jsp.tag.IncrementKeyHandler javax.servlet.http.Cookie com.tridion.marketingsolution.profilesync.Handler com.tridion .smarttarget.tags.PromotionContentTagHandler com.tridion.smarttarget.tags.PromotionTagHandler com.tridion.webservices.odata.ODataPublicationMappingFilter com.tridion.web.jsp.tag.ConditionHandler com.tridion.web.jsp.ResponseWrapper com.tridion.smarttarget。 tags.AttributeTagHandler com.tridion.smarttarget.tags.ItemContentTagHandler com.tridion.web.jsp.tag.ConditionsHandler javax.servlet.jsp.JspException [Ljavax.servlet.http.Cookie; com.tridion.linking.Linking com.tridion.smarttarget.tags.FallbackContentTagHandler com.tridion.web.jsp.tag.ComponentLinkHandler com.tridion.web.jsp.tag.ComponentPresentationHandler com.

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

# 异常详细信息：Java.Lang.Throwable：无法初始化类 com.tridion.linking.Linking

找不到某些配置的类路径根

=================================================

ClassPath : C:\Websites\Live\malvern.com.en\bin\bin ClassPath : C:\Websites\Live\malvern.com.en\bin\bin ClassPath : C:\Websites\Live\malvern.com.en \bin\bin

==================================================== ========== 一些 Java 类或接口无法找到或加载

此问题的最典型原因是：

*   您忘记配置类路径
*   类路径中缺少 jarfile、zipfile 或目录
*   您的一个类路径条目中有错字
*   您的类路径中缺少一个类所需的 jarfile
*   您的类路径中的 jarfile 已过期且不包含一些新类

==================================================== ==========

javax.servlet.jsp.tagext.TagSupport com.tridion.web.jsp.tag.DynamicComponentLinkHandler com.tridion.web.jsp.tag.IncrementKeyHandler javax.servlet.http.Cookie com.tridion.marketingsolution.profilesync.Handler com.tridion .smarttarget.tags.PromotionContentTagHandler com.tridion.smarttarget.tags.PromotionTagHandler com.tridion.webservices.odata.ODataPublicationMappingFilter com.tridion.web.jsp.tag.ConditionHandler com.tridion.web.jsp.ResponseWrapper com.tridion.smarttarget。 tags.AttributeTagHandler com.tridion.smarttarget.tags.ItemContentTagHandler com.tridion.web.jsp.tag.ConditionsHandler javax.servlet.jsp.JspException [Ljavax.servlet.http.Cookie; com.tridion.linking.Linking com.tridion.smarttarget.tags.FallbackContentTagHandler com.tridion.web.jsp.tag.ComponentLinkHandler com.tridion.web.jsp.tag.ComponentPresentationHandler com.

源错误：

第 35 行：第 36 行：<% Tridion.ContentDelivery.Web.Linking.ComponentLink componentLink = null; %> 第 37 行：<% Tridion.ContentDelivery.Web.Linking.Link 链接 = null; %> 第 38 行： 第 39 行：

源文件：c:\Websites\Live\malvern.com.en\default.aspx 行：37

堆栈跟踪：

# [Throwable：无法初始化类 com.tridion.linking.Linking

找不到某些配置的类路径根

=================================================

```
ClassPath           : C:\Websites\Live\malvern.com.en\bin\bin
ClassPath           : C:\Websites\Live\malvern.com.en\bin\bin
ClassPath           : C:\Websites\Live\malvern.com.en\bin\bin 
```

==================================================== ========== 一些 Java 类或接口无法找到或加载

此问题的最典型原因是：

*   您忘记配置类路径
*   类路径中缺少 jarfile、zipfile 或目录
*   您的一个类路径条目中有错字
*   您的类路径中缺少一个类所需的 jarfile
*   您的类路径中的 jarfile 已过期且不包含一些新类

==================================================== ==========

javax.servlet.jsp.tagext.TagSupport com.tridion.web.jsp.tag.DynamicComponentLinkHandler com.tridion.web.jsp.tag.IncrementKeyHandler javax.servlet.http.Cookie com.tridion.marketingsolution.profilesync.Handler com.tridion .smarttarget.tags.PromotionContentTagHandler com.tridion.smarttarget.tags.PromotionTagHandler com.tridion.webservices.odata.ODataPublicationMappingFilter com.tridion.web.jsp.tag.ConditionHandler com.tridion.web.jsp.ResponseWrapper com.tridion.smarttarget。 tags.AttributeTagHandler com.tridion.smarttarget.tags.ItemContentTagHandler com.tridion.web.jsp.tag.ConditionsHandler javax.servlet.jsp.JspException [Ljavax.servlet.http.Cookie; com.tridion.linking.Linking com.tridion.smarttarget.tags.FallbackContentTagHandler com.tridion.web.jsp.tag.ComponentLinkHandler com.tridion.web.jsp.tag。

] Codemesh.JuggerNET.NTypeValue.Throw(Int64 inst) +514 Codemesh.JuggerNET.JavaClass.ThrowTypedException(Int64 inst) +1243 Codemesh.JuggerNET.JavaMethod.CallObject(JavaProxy jpo, JavaMethodArguments args) +915 Com.Tridion.Linking.ComponentLink ..ctor(Int32 publicationId) +154 Tridion.ContentDelivery.Web.UI.ComponentLink.Render(HtmlTextWriter writer) +193 ASP.default_aspx.__RenderbodyContent(HtmlTextWriter __w, Control parameterContainer) 在 c:\Websites\Live\malvern.com。 en\default.aspx:37 System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +131 ASP.includes_site_master.__RenderForm1(HtmlTextWriter __w, Control parameterContainer) 在 c:\Windows\Microsoft.NET\Framework64\v4 .0.30319\Temporary ASP.NET Files\root\8694a1d7\ddf129e2\App_Web_0p0okahq.0.cs:0 System.Web.UI.Control。RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+131 System.Web.UI.HtmlControls.HtmlForm.RenderChildren（HtmlTextWriter writer）+315 System.Web.UI.HtmlControls.HtmlContainerControl.Render（HtmlTextWriter writer）+48 System.Web.UI。 Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+246 System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+246 System.Web.UI.Page.Render（HtmlTextWriter writer）+40 System.Web.UI .Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+5290Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+246 System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+246 System.Web.UI.Page.Render（HtmlTextWriter writer）+40 System.Web.UI .Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+5290Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+246 System.Web.UI.Control.RenderChildrenInternal（HtmlTextWriter writer，ICollection children）+246 System.Web.UI.Page.Render（HtmlTextWriter writer）+40 System.Web.UI .Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+5290

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:00:59.327

看起来你可能有一些丢失的配置，或者某处的一些错误配置。[Peter 对Presentation Error - SmartTarget Page](https://stackoverflow.com/questions/11047381/presentation-error-smarttarget-page)的回答的第 1 部分提供了一些可能有用的信息的链接。

# c++ - 异步下载，如何使用 libcurl 或其他东西？

> ID：11393027
> 
> 赞同：0
> 
> 时间：2012-07-09T10:14:59.933
> 
> 标签：c++, c, asynchronous, pthreads, libcurl

看了论坛后，我找不到答案，所以我会尽量清楚并理解。

我尝试了 libcurl，但我不确定是否能够做到我想要的（或者至少不成功）。我使用游戏引擎（适用于 iPhone 和 Android 的 cocos2d-x），我需要进行异步下载以在下载期间保持游戏循环运行。

我尝试使用 pthread，但我遇到了许多错误，例如非分配内存的 realloc 或用于获取 json 文件的其他对象上的错误。

你有一个例子如何做到这一点？还是其他图书馆？

我了解线程的逻辑，但是如果您在 iPhone 上有简单的 ASIHttpRequest 之类的东西，那就太好了。一些 int 和 startRequest 在回调中完成，我可以随心所欲地做。

无论如何，对不起我的英语并提前感谢。达米安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:11:18.387

[http://think-async.com/](http://think-async.com/)这应该正是您正在寻找的。

您将拥有两个功能，一个用于启动连接，另一个用于读取和结束连接。如果您为这两个编写了一个包装器，这可能会有所帮助，这样您就可以通过一个方法调用以您想要的方式进行 HTTP 连接。

# asp.net-mvc-3 - MVC3 上传文件更多信息

> ID：11393031
> 
> 赞同：0
> 
> 时间：2012-07-09T10:15:17.780
> 
> 标签：asp.net-mvc-3, file-upload

我可以使用**HttpPostedFileBase**在 MVC3 (C#) 中上传文件，但我想了解更多关于上传文件的信息......

*   怎么获得

> 文件大小

*   怎么获得

> 文件类型

*   如何按文件类型过滤文件上传

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:16:44.163

> 文件大小

使用`file.ContentLength`where file is you `HttpPostedFileBase`variable。

> 文件类型

您可以使用文件名的扩展名，但显然不是 100% 可靠。如果您想要一个防弹解决方案，您将不得不使用启发式方法。例如查看上传文件的内容以尝试猜测其类型。例如，要测试已知的图像格式，您可以使用[以下技术](https://stackoverflow.com/a/5209528/29407)。我还写了[另一篇](https://stackoverflow.com/a/6388927/29407)关于使用自定义验证属性验证已知图像格式的文章。

> 如何按文件类型过滤文件上传

HTML5 支持指定内容类型：

```
<input type="file" name="file" accept="image/*" /> 
```

如果您的浏览器不支持 HTML5，您将不得不使用其他一些技术，例如 Flash 或其他东西。您可以使用现有的插件，例如[Uploadify](http://www.uploadify.com/)或[Plupload](http://www.plupload.com/)，它们通过测试客户端浏览器的功能并逐步回退来提供此功能。

为了过滤文件输入框的内容，您绝对无法在 IE7 中使用原生 HTML 和 javascript。

# html - 带有 HTML 文本的图像标签

> ID：11393040
> 
> 赞同：2
> 
> 时间：2012-07-09T10:15:49.267
> 
> 标签：html, image, text

我有一个图像“m1”和一个文本“示例文本”。我需要将图像和文本显示为，

m1 示例文本。此文本应以位于图像中心轴的方式显示。图片和文字之间应该有间距。我怎样才能使用 HTML 获得这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:16:47.190

`vertical-align: middle`在图像的 CSS 中指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:53:08.230

**您可以在img**标签内使用 align 属性。例如：

```
<img src="someimgurl" align="absmiddle"> 
```

**您可以使用CSS Margin**控制图像和文本之间的间距：

```
<img src="someimgurl" align="absmiddle" style="margin-right:5px"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:19:27.503

对不起，它很简单。使用 vertical-align: middle 我们可以做到这一点。很抱歉在这里问这么简单的问题。

# css - 如何删除单击按钮时出现的虚线

> ID：11393044
> 
> 赞同：8
> 
> 时间：2012-07-09T10:15:54.353
> 
> 标签：css

我正在使用 IE9 单击按钮时出现虚线，请建议如何删除该虚线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T10:27:52.307

对于 Internet Explorer 9，您可以使用：

```
a:active, a:focus { 
 outline: none; 
 ie-dummy: expression(this.hideFocus=true);
} 
```

我希望这能帮到您 ........

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T00:04:38.113

似乎从 Internet Explorer 8 和 9 中的输入和按钮中删除虚线轮廓的 css：

```
:root input:focus, :root button:focus {
  outline: none;
} 
```

我通过查看 outlook.com 登录页面的来源发现了这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T10:19:29.527

```
<input class="button" type="submit" id="submitForm" value="SEND" /> 

input[type="submit"] {
    outline: none;
    } 
```

或者

```
<input type="button" id="submitForm" value="SEND" /> 

input[type="button"] {
    outline: none;
    } 
```

应该管用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-16T22:47:26.097

这是我希望浏览器默认不会实现的东西。我总是使用以下方法来重置虚线：

```
a:active,
a:focus,
input:focus {
    border: 0;
    outline: 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-19T04:45:39.333

这对我有用`a:focus, *:focus{ outline:none; _noFocusLine: expression(this.hideFocus=true); text-decoration: none; }`

# c# - 如何将解析的 XML 发送到 XMPP 服务器

> ID：11393048
> 
> 赞同：0
> 
> 时间：2012-07-09T10:16:19.997
> 
> 标签：c#, xmpp, windows-phone-7.1

[这是从 Jabber 服务器获取 anwser](https://stackoverflow.com/questions/11344866/getting-anwser-from-jabber-server/11353210#11353210)的新问题

> 您不会成功地将收到的 XML 视为文件，这就是您的 Unexpected end of file has occurred 错误的来源。您必须逐步解析 XML。

好的，我的问题是如何？如何发送未关闭的 xml 图像？

我应该序列化对象然后发送吗？

顺便提一句。我不能使用现有的库，因为在 Windows Phone 7.5 中没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T00:15:46.020

让我用一个例子来详细解释一下（摘自[这里](http://ceit.uq.edu.au/content/how-xmpp-works-step-step)的片段）。

> 您不会成功地将收到的 XML 视为文件，这就是您的 Unexpected end of file has occurred 错误的来源。您必须逐步解析 XML。

当您连接到 XMPP 时，您打开了与服务器的连接。为此，您发送如下内容...

```
<stream:stream
  to='example.com'
  xmlns='jabber:client'
  xmlns:stream='http://etherx.jabber.org/streams'
  version='1.0'> 
```

...让我们暂时忽略身份验证，并假设这有效。您会注意到仅这一节不是有效的 XML（元素未关闭）。但是，对于 XMPP，没关系。服务器将发回它自己的消息，告诉您一切顺利。现在我们知道我们可以发送我们的消息节了。我们输入我们的信息，然后发送...

```
<message from='juliet@example.com' to='romeo@example.net'>
    <body>Romeo, romeo...</body>
</message> 
```

几秒钟后，我们决定下线……

```
 <presence type='unavailable'/>
</stream:stream> 
```

现在让我们看看我们发送了什么...

```
<stream:stream
      to='example.com'
      xmlns='jabber:client'
      xmlns:stream='http://etherx.jabber.org/streams'
      version='1.0'>

    <!-- A few seconds elapsed -->

    <message from='juliet@example.com' to='romeo@example.net'>
        <body>Romeo, romeo...</body>
    </message>

    <!-- A few seconds elapsed -->

    <presence type='unavailable'/>
</stream:stream> 
```

因此，最后，您可以将与服务器的交互视为您正在创建一个最终成为完全有效的 XML 文档的文档。当您第一次学习 XMPP 时，这是一种很好的思考方式。

但是，您是在一段时间内创建此文档，而不是一次全部创建。XML 库通常不会认为您现在只创建文档的一部分：它们关注的是一次创建整个文档。这就是为什么传统的 XML 库可能对您编写 XMPP 程序没有帮助的原因。此外，一个简单的 XML 库将无法处理额外的信息，例如身份验证逻辑。

最后，您可以编写自己的库。但是，您在选择工具时需要非常小心（正如我之前所说，XML 库可能无法处理这些部分 XML 创建）。

无论如何，最后，你的问题是......

`How can I send not closed pice of xml?`

答案是：找一个图书馆为你做这件事。而且我不仅仅指 XML 部分：我指的是所有 XMPP。正确的库甚至不需要您关心 XML 甚至存在的事实，除非您真的很先进。如果找不到图书馆...

1.  更努力地看。花一天时间寻找图书馆仍然少于一个月自己制作图书馆的时间。
2.  看看你是否能找到一个开源库来满足你的大部分需求。然后，解决不同的部分，或者自己更改源代码以填补空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:33:18.063

XMPP 协议基于 XML 代码。基本上到此为止。与服务器的连接是通过使用一个开始标签来建立的，并且在认证之后，更多的 XML 消息被发送到服务器和从服务器发送，这被称为节。完成服务器后，XML“文件”将使用结束标记关闭。. 然后服务器关闭套接字。因此，您可以在不关闭“文件”的情况下发送 XML 代码。希望这可以帮助您理解。

# jquery - 滚动 JQuery -move

> ID：11393049
> 
> 赞同：0
> 
> 时间：2012-07-09T10:16:23.713
> 
> 标签：jquery

我有一个带有 img 的简单按钮。双img：顶部的蓝色箭头，底部的绿色箭头（高度44px）。由于不同的原因，我不能将 img 放在后台。所以我尝试将 img 放在 html 中并用 jQuery 移动它。但它不动。任何人都可以帮忙吗？ [http://jsfiddle.net/uPd86/](http://jsfiddle.net/uPd86/)

HTML：

```
<div id="button">
  <div id="text">boto</div>
  <div id="arrow"><img src="http://www.mig-marketing.com/img/arrowDouble.png"></div>
</div>​ 
```

CSS：

```
#button{
    position:absolute;
    top:20px;
    left:20px;
    width:45px;
    height: 15px;
    line-height: 15px;
    overflow:hidden;
}    

#text{
    position:absolute; 
}

#arrow{
    position:absolute;
    right:0px;
    width:15px;
    height:15px;
}​ 
```

JAVASCRIPT：

```
$(function(){

    $("#button").hover(function() {
        $("#button #arrow").animate({top: "-22"}, 1200);
    });

}) 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:09:31.193

您是否尝试这样做：

[http://jsfiddle.net/rathoreahsan/uPd86/6/](http://jsfiddle.net/rathoreahsan/uPd86/6/)

**jQuery**

```
$(function(){

    $("#button").hover(function() {
        $("#button #arrow").animate({top: "-17px"}, 1200);
    }, function(){
        $("#button #arrow").animate({top: "0px"}, 1200);
    });

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:22:55.417

这是使用 jQuery 进行翻转图像的代码箱的简单解决方案。

```
$(function() {
    $("#button #arrow").mouseenter(function() {
        $("#button #arrow").animate({
            top: "-17"
        }, 500);
    });
    $("#button #arrow").mouseleave(function() {
        $("#button #arrow").animate({
            top: "0"
        }, 500);

    });
}); 
```

试用演示：[http ://codebins.com/codes/home/4ldqpb4](http://codebins.com/codes/home/4ldqpb4)

# html - 谷歌浏览器不想使用 mediaelement.js 播放 mp4

> ID：11393050
> 
> 赞同：8
> 
> 时间：2012-07-09T10:16:28.827
> 
> 标签：html, google-chrome, video, mp4, mediaelement

我在我的网站上使用最新的 mediaelement.js 来播放 html5 视频。谷歌浏览器中有一些奇怪的东西。他播放一个视频，但不想播放 mp4 格式的另一个视频，也不想回退到 webm。两个视频都是用 ffmpeg 转换的，参数如下：

```
ffmpeg -i input.mov -acodec libfaac -ab 96k -vcodec libx264 -vpre slower -vpre main -level 21 -refs 2 -b 345k -bt 345k -threads 0 -s 640x360 output.mp4 
```

此外，第一个视频播放正常，没有使用 mp4 格式的 mediaelement.js 库，第二个视频变成了 webm 格式。

示例页面来自`http://random.net.ua/video_test/`：

*   `http://random.net.ua/video_test/video1.html`（好的）
*   `http://random.net.ua/video_test/video2.html`（好的）
*   `http://random.net.ua/video_test/video1-mediaelement.html`（好的）
*   `http://random.net.ua/video_test/video2-mediaelement.html`（失败）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T00:28:51.013

如果您尝试`$("video").get(0).currentSrc`在控制台中执行或等效操作，您会看到 non-mediaelement.js 版本正在播放 Webm 视频，Chrome 可以正常播放，但如果您在 mediaelement.js 版本中查看相同的内容，它正在尝试播放 MP4。

然后，如果你看一下，`$("video").get(0).error`你会发现你有一个 MediaError。检查它，你会看到它有“代码 4”。根据规范，即 MEDIA_ERR_SRC_NOT_SUPPORTED。

现在，试试`$("video").get(0).canPlayType("video/mp4")`——它返回`"maybe"`.

现在这是猜测，但 Chrome 可能会报告“可能”，因为它可以播放 MP4 的某些配置文件，但不能播放其他配置文件。不管是什么原因，我个人更喜欢 Mediaelement.js 将“可能”视为“否”，如果其他源类型都不能原生播放，则继续启动 Flash 后备。修补它很容易做到这一点。我已经在我刚刚制作的叉子上做到了这一点——看看[https://github.com/tremby/mediaelement/tree/maybe-to-no](https://github.com/tremby/mediaelement/tree/maybe-to-no)

希望有帮助。让我知道它是否适合你——我希望它会放弃 MP4 并在你的情况下尝试使用 Webm。在我自己的项目中（调试让我想到了这个问题）我*只有*一个 MP4 文件，并且 Flash 后备很高兴取代它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-14T02:54:55.160

## using the Media Source API...

I realise this doesn't relate to the fallback answered above, but I think that its important to point out that fallback to webm isn't required if the MP4 videos are encoded appropriately.

MP4 video can also be encoded to support the the [**Media Source API**](https://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html) which allows downloading of chunks that make the video available before the entire file has completed downloading.

The MP4 implementation is more widely used and wouldn't require a webm fallback in most browsers.

A chart showing the video format support for the **Media Source API** [**here**](http://www.jwplayer.com/html5/mediasource/).

FFmpeg will do this, and its opensource.

See here: ([**Encode h.264 and WebM videos for MediaElement.js using FFmpeg**](http://blogs.visigo.com/chriscoulson/encode-h-264-and-webm-videos-for-mediaelement-js-using-ffmpeg/)) below:

* * *

## **Chris Coulson writes:** June 14th,2012 (Windows)

I recently added a video player to a client’s site. I found John Dyer’s MediaElement.js to be an excellent solution for doing this. As long as you provide both an h.264 and WebM encoded version of the video, it will play natively on almost all browsers. For unsupported browsers it will fall back to Flash.

The client’s videos were all wmv’s, so they would need to be converted to h.264 and WebM. Luckily John also provided some directions for encoding to these formats using FFmpeg:

[http://johndyer.name/ffmpeg-settings-for-html5-codecs-h264mp4-theoraogg-vp8webm/](http://johndyer.name/ffmpeg-settings-for-html5-codecs-h264mp4-theoraogg-vp8webm/)

Unfortunately FFmpeg has changed since the commands were published, so some slight modifications were required. I also made some modifications so that the aspect ratio of the video was preserved and to encode the video at a lower bit rate and faster speed. As well, some of the videos being converted were really short, and would be finished before the 10 second mark that the thumbnail is created at. To solve this problem I modified the script to attempt to capture the thumbnail at the 1, 2, 3, 5 and 10 second mark with each successful capture overwriting the last.

Here’s the updated batch file that I used:

```
REM mp4 (H.264 / AAC)
"c:\program files\ffmpeg\bin\ffmpeg.exe" -y -i %1 -vcodec libx264 -pix_fmt yuv420p -vprofile high -preset fast -b:v 500k -maxrate 500k -bufsize 1000k -vf scale=trunc(oh*a/2)*2:480 -threads 0 -acodec libvo_aacenc -b:a 128k %1.mp4

REM webm (VP8 / Vorbis)
"c:\program files\ffmpeg\bin\ffmpeg.exe" -y -i %1 -vcodec libvpx -quality good -cpu-used 5 -b:v 500k -maxrate 500k -bufsize 1000k -vf scale=trunc(oh*a/2)*2:480 -threads 0 -acodec libvorbis -f webm %1.webm

REM jpeg (screenshot at 10 seconds, but just in case of a short video - take a screenshot earlier and overwrite)
"c:\program files\ffmpeg\bin\ffmpeg.exe" -y -i %1 -ss 1 -vframes 1 -r 1 -vf scale=trunc(oh*a/2)*2:480 -f image2 %1.jpg
"c:\program files\ffmpeg\bin\ffmpeg.exe" -y -i %1 -ss 2 -vframes 1 -r 1 -vf scale=trunc(oh*a/2)*2:480 -f image2 %1.jpg
"c:\program files\ffmpeg\bin\ffmpeg.exe" -y -i %1 -ss 3 -vframes 1 -r 1 -vf scale=trunc(oh*a/2)*2:480 -f image2 %1.jpg
"c:\program files\ffmpeg\bin\ffmpeg.exe" -y -i %1 -ss 5 -vframes 1 -r 1 -vf scale=trunc(oh*a/2)*2:480 -f image2 %1.jpg
"c:\program files\ffmpeg\bin\ffmpeg.exe" -y -i %1 -ss 10 -vframes 1 -r 1 -vf scale=trunc(oh*a/2)*2:480 -f image2 %1.jpg 
```

I also created a seperate batch file that will iterate over all wmv’s in a given directory and run the encoder batch against each file:

```
for /r %1 %%i in (*.wmv) do "c:\program files\ffmpeg\CreateWebVideos.bat" % 
```

* * *

## **Faron Coder says**: September 3, 2014 at 6:52 pm (*nix)

Hello –</p>

For those who use unix based ffmpeg – here’s the corresponding to author’s codes (above) in name of unix.

```
ffmpeg -y -i $fileid -vcodec libx264 -pix_fmt yuv420p -vprofile high -preset fast -b:v 500k -maxrate 500k -bufsize 1000k -vf “scale=trunc(oh*a/2)*2:480″ -threads 0 -acodec libvo_aacenc -b:a 128k “$file.mp4″ < /dev/null

ffmpeg -y -i $fileid -vcodec libvpx -quality good -cpu-used 5 -b:v 500k -maxrate 500k -bufsize 1000k -vf "scale=trunc(oh*a/2)*2:480" -threads 0 -acodec libvorbis -f webm "$file.webm" < /dev/null

ffmpeg -y -i $fileid -ss 1 -vframes 1 -r 1 -vf "scale=trunc(oh*a/2)*2:480" -f image2 "$file.jpg" < /dev/null
ffmpeg -y -i $fileid -ss 2 -vframes 1 -r 1 -vf "scale=trunc(oh*a/2)*2:480" -f image2 "$file.jpg" < /dev/null
ffmpeg -y -i $fileid -ss 3 -vframes 1 -r 1 -vf "scale=trunc(oh*a/2)*2:480" -f image2 "$file.jpg" < /dev/null
ffmpeg -y -i $fileid -ss 5 -vframes 1 -r 1 -vf "scale=trunc(oh*a/2)*2:480" -f image2 "$file.jpg" < /dev/null
ffmpeg -y -i $fileid -ss 10 -vframes 1 -r 1 -vf "scale=trunc(oh*a/2)*2:480" -f image2 "$file.jpg" < /dev/null 
```

* * *

Hope that helps.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-23T18:56:57.960

这是一个对我有用的简单解决方案。我的问题是在 Chrome 29 上播放 MP4 视频文件。在浏览了 WWW 上的一堆类似线程并尝试了一堆带有扩展名的东西等之后，我找到了这个解决方案。这就是有效的：

在该页面上的 chrome 地址栏中键入 chrome:flags 搜索“硬件”

启用“硬件加速视频解码”。然后重新启动它

这将允许您在 chrome 上播放 mp4 - 如果您尝试这样做，则可以投射到 chromecast。

# c# - 将 NINI 与独立存储一起使用

> ID：11393053
> 
> 赞同：1
> 
> 时间：2012-07-09T10:16:34.333
> 
> 标签：c#, isolatedstorage, nini

我正在尝试保存一些配置信息，并且希望在 IsolatedStorage 中使用 NINI 库和文件。我不知道为什么，但是当我尝试保存配置时，我在 Nini Save 方法上遇到以下异常：Source cannot be saved in this state

这是代码：

```
 isf = IsolatedStorageFile.GetStore(IsolatedStorageScope.User | IsolatedStorageScope.Assembly | IsolatedStorageScope.Domain, null, null);
        var isfs = new IsolatedStorageFileStream("file.ini", FileMode.Create, isf);
        //Stream s = new StreamWriter(isfs);

        IConfigSource mainSource = new IniConfigSource(isfs);

        var config1 = mainSource.Configs["General"];

        if (config1 == null)
        {
            mainSource.AddConfig("General");
            config1 = mainSource.Configs["General"];
        }
        config1.Set("CW", CommentWidth);
        mainSource.Save();

        isfs.Close(); 
```

异常发生在 mainSource.Save(); . 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:42:08.020

从构造函数文档中[`IniConfigSource(Stream)`](http://nini.sourceforge.net/Reference/html/index.html)：

> 这是一个不可保存的源，除非您调用其中一个重载的[Save](http://nini.sourceforge.net/Reference/html/Nini.Config.IniConfigSource.Save_overload_1.html)方法。

所以，你可能想要[`Save(Stream)`](http://nini.sourceforge.net/Reference/html/index.html). 在将流传递给`Save`.

* * *

与您的评论相反，我尝试了这一点，发现`isfs`流已关闭（可能是通过构造函数方法 - 它没有记录它将对流做什么） - 所以我收到了*不同*的错误消息。这导致我重新初始化`isfs`，并且正如我所说，将它传递给`Save`方法：

```
isfs = new IsolatedStorageFileStream("file.ini", FileMode.Create, isf);
((IniConfigSource)mainSource).Save(isfs); 
```

它工作正常。

# python - 我自己在 list_display 中使用的方法和 value as boolean icon

> ID：11393060
> 
> 赞同：9
> 
> 时间：2012-07-09T10:16:53.693
> 
> 标签：python, django, django-admin

我编写了自己在 list_display （管理类）中使用的方法，如下所示：

```
class MyClassAdmin(admin.ModelAdmin):

    list_display = ('my_own_method')

    def my_own_method(self, obj):
        if [condition]:       
            return True
        else: 
            return False 
```

但是此值在列表中显示为文本（True 或 False），而不是像这样的默认 django 布尔图标： ![在此处输入图像描述](../Images/ac9dc2a1d9c5e7a2a43ed3ba2debce36.png)

我应该怎么做才能改变这种情况？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T10:20:50.390

将您的代码更改为以下内容：

```
class MyClassAdmin(admin.ModelAdmin):

    list_display = ('my_own_method')

    def my_own_method(self, obj):
        if [condition]:       
            return True
        else: 
            return False
    my_own_method.boolean = True 
```

可以在以下[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)中找到`list_display`：

> 如果给定的字符串是模型的方法，ModelAdmin 或返回 True 或 False 的可调用对象，如果您为方法提供值为 True 的布尔属性，Django 将显示一个漂亮的“on”或“off”图标。

# android - 如何以编程方式通过蓝牙在 android 设备之间传输图像和文本数据

> ID：11393061
> 
> 赞同：2
> 
> 时间：2012-07-09T10:16:56.877
> 
> 标签：android

我创建了一个 android 应用程序，列出了我设备附近的蓝牙设备。我怎样才能将该列表中的任何一个配对并将数据传输到该设备。我使用了来自[http://android-er.blogspot.in/2011/05/scan-bluetooth-devices.html](http://android-er.blogspot.in/2011/05/scan-bluetooth-devices.html)的代码 来列出蓝牙设备。我怎么能从那里向任何人发送图像或文本。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:23:45.807

图像传输： http: [//kamrana.wordpress.com/2012/05/12/sending-images-over-bluetooth-in-android/](http://kamrana.wordpress.com/2012/05/12/sending-images-over-bluetooth-in-android/)

对于文本：在同一示例中，只需将字符串转换为字节而不是图像，并且“示例”中还有蓝牙聊天应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T06:13:10.357

这是完整的代码

> BluetoothTexting.java：

```
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.UUID;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothServerSocket;
import android.bluetooth.BluetoothSocket;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnKeyListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

public class BluetoothTexting extends Activity {

  private static int DISCOVERY_REQUEST = 1;

  private Handler handler = new Handler();
  private ArrayList<BluetoothDevice> foundDevices;
  private ArrayAdapter<BluetoothDevice> aa; 
  private ListView list;

  private BluetoothAdapter bluetooth;
  private BluetoothSocket socket;
  private UUID uuid = UUID.fromString("a60f35f0-b93a-11de-8a39-08002009c666");

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    configureBluetooth();
    setupListView();    
    setupSearchButton();
    setupListenButton();
  }

  private void configureBluetooth() {
    bluetooth = BluetoothAdapter.getDefaultAdapter();
  }

  private void setupListenButton() {
    Button listenButton = (Button)findViewById(R.id.button_listen);
    listenButton.setOnClickListener(new OnClickListener() {
      public void onClick(View view) {
        Intent disc = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
        startActivityForResult(disc, DISCOVERY_REQUEST);     
      }
    });
  }

  @Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == DISCOVERY_REQUEST) {
      boolean isDiscoverable = resultCode > 0;
      if (isDiscoverable) {
        String name = "bluetoothserver";
        try {
          final BluetoothServerSocket btserver = 
            bluetooth.listenUsingRfcommWithServiceRecord(name, uuid);

          AsyncTask<Integer, Void, BluetoothSocket> acceptThread = 
            new AsyncTask<Integer, Void, BluetoothSocket>() {

            @Override
            protected BluetoothSocket doInBackground(Integer... params) {
              try {
                socket = btserver.accept(params[0]*1000);
                return socket;
              } catch (IOException e) {
                Log.d("BLUETOOTH", e.getMessage());            
              }
              return null;
            }

            @Override
            protected void onPostExecute(BluetoothSocket result) {
              if (result != null)
                switchUI();
            }            
          };          
          acceptThread.execute(resultCode);
        } catch (IOException e) {
          Log.d("BLUETOOTH", e.getMessage());            
        }
      }
    }
  }

  private void setupListView() {
    aa = new ArrayAdapter<BluetoothDevice>(this, 
               android.R.layout.simple_list_item_1,
               foundDevices);
    list = (ListView)findViewById(R.id.list_discovered);    
    list.setAdapter(aa);

    list.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> arg0, View view, 
                              int index, long arg3) {
        AsyncTask<Integer, Void, Void> connectTask = 
          new AsyncTask<Integer, Void, Void>() { 
            @Override
            protected Void doInBackground(Integer... params) {
              try {
                BluetoothDevice device = foundDevices.get(params[0]);
                socket = device.createRfcommSocketToServiceRecord(uuid);
                socket.connect();              
              } catch (IOException e) {
                Log.d("BLUETOOTH_CLIENT", e.getMessage());
              }
              return null;
            }

            @Override
            protected void onPostExecute(Void result) {
              switchUI();
            }
          };
        connectTask.execute(index);
      }      
    });
  }

  private void setupSearchButton() {
    Button searchButton = (Button)findViewById(R.id.button_search);

    searchButton.setOnClickListener(new OnClickListener() {
      public void onClick(View view) {
        registerReceiver(discoveryResult, 
                         new IntentFilter(BluetoothDevice.ACTION_FOUND));

        if (!bluetooth.isDiscovering()) {
          foundDevices.clear();
          bluetooth.startDiscovery();
        }
      }
    });
  }

  private void switchUI() {    
    final TextView messageText = (TextView)findViewById(R.id.text_messages);
    final EditText textEntry = (EditText)findViewById(R.id.text_message);

    messageText.setVisibility(View.VISIBLE);
    list.setVisibility(View.GONE);
    textEntry.setEnabled(true);

    textEntry.setOnKeyListener(new OnKeyListener() {
      public boolean onKey(View view, int keyCode, KeyEvent keyEvent) {
        if ((keyEvent.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_DPAD_CENTER)) {
          sendMessage(socket, textEntry.getText().toString());
          textEntry.setText("");
          return true;
        }
        return false;
      }      
    });
    BluetoothSocketListener bsl = new BluetoothSocketListener(socket, handler, messageText);
    Thread messageListener = new Thread(bsl);
    messageListener.start();
  }

  private void sendMessage(BluetoothSocket socket, String msg) {
    OutputStream outStream;
    try {
      outStream = socket.getOutputStream();
      byte[] byteString = (msg + " ").getBytes();
      byteString[byteString.length - 1] = 0;
      outStream.write(byteString);
    } catch (IOException e) {
      Log.d("BLUETOOTH_COMMS", e.getMessage());
    }    
  }

  BroadcastReceiver discoveryResult = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
      BluetoothDevice remoteDevice;
      remoteDevice = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
      if (bluetooth.getBondedDevices().contains(remoteDevice)) {  
        foundDevices.add(remoteDevice);
        aa.notifyDataSetChanged();
      }
    }
  };

  private class MessagePoster implements Runnable {
    private TextView textView;
    private String message;

    public MessagePoster(TextView textView, String message) {
      this.textView = textView;
      this.message = message;
    }

    public void run() {
      textView.setText(message);
    }     
  }

  private class BluetoothSocketListener implements Runnable {

      private BluetoothSocket socket;
      private TextView textView;
      private Handler handler;

      public BluetoothSocketListener(BluetoothSocket socket, 
                                     Handler handler, TextView textView) {
        this.socket = socket;
        this.textView = textView;
        this.handler = handler;
      }

    public void run() {
      int bufferSize = 1024;
      byte[] buffer = new byte[bufferSize];      
      try {
        InputStream instream = socket.getInputStream();
        int bytesRead = -1;
        String message = "";
        while (true) {
          message = "";
          bytesRead = instream.read(buffer);
          if (bytesRead != -1) {
            while ((bytesRead==bufferSize)&&(buffer[bufferSize-1] != 0)) {
              message = message + new String(buffer, 0, bytesRead);
              bytesRead = instream.read(buffer);
            }
            message = message + new String(buffer, 0, bytesRead - 1); 

            handler.post(new MessagePoster(textView, message));              
            socket.getInputStream();
          }
        }
      } catch (IOException e) {
        Log.d("BLUETOOTH_COMMS", e.getMessage());
      } 
    }
  }
} 
```

> 主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<EditText
android:id="@+id/text_message"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:enabled="false"
/>
<Button
android:id="@+id/button_search"
android:text="Search for listener"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_above="@id/text_message"
/>
<Button
android:id="@+id/button_listen"
android:text="Listen for connection"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_above="@id/button_search"
/>

<ListView
android:id="@+id/list_discovered"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_above="@id/button_listen"
android:layout_alignParentTop="true"
/>
<TextView
android:id="@+id/text_messages"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_above="@id/button_listen"
android:layout_alignParentTop="true"
android:visibility="gone"
/>
</RelativeLayout> 
```

# c - icmp.c 检查过期的地方

> ID：11393063
> 
> 赞同：2
> 
> 时间：2012-07-09T10:17:02.053
> 
> 标签：c, networking, kernel, icmp

在`kernel-3.0.26 code net/ipv6/icmp.c`，在发送 ICMP 回复时，它会检查计时器是否到期。它应该检查路由器广告给出的值吗？我认为到期值存储在`rt->rt6_expires`（`ndisc.c`第 1284 行）中。然后在发送 ICMP 回复时，它应该检查到期计时器，对吗？检查是在哪里进行的？请有人给我解释一下。

先感谢您。对不起，我的英语不好。

# java - 为什么相对路径和绝对路径会产生不同的结果？

> ID：11393065
> 
> 赞同：2
> 
> 时间：2012-07-09T10:17:05.833
> 
> 标签：java, maven, jenkins, java-web-start

> **可能重复：**
> [Java：设置“user.dir”时 File.exists() 不一致](https://stackoverflow.com/questions/2275362/java-file-exists-inconsistencies-when-setting-user-dir)

为什么会这样：

```
void test(){
  print(new File("downloads/"));
  print(new File("downloads/").getAbsoluteFile());
  print(new File("C:\\someDir\\downloads\\"));
}

void print(File dir){
  log.info(dir.getAbsolutePath() + " exists " + dir.exists() + " contains: " + (dir.list() != null ? dir.list().length : "") + " files");
} 
```

打印这个：

```
C:\someDir\downloads exists true contains: 0 files
C:\someDir\downloads exists true contains: 1 files 
C:\someDir\downloads exists true contains: 1 files 
```

当通过 Jenkins 中的 Maven 中的 JUnit 作为 WebStart 从站执行时？

# javascript - 不要从 JavaScript 对象的值呈现 null

> ID：11393066
> 
> 赞同：10
> 
> 时间：2012-07-09T10:17:07.520
> 
> 标签：javascript, jquery, html

我正在寻找最有效的输出方式`empty string`而不是`"null"`值`null`。有没有办法在**没有**条件语句（即`if`或三元（`? :`）运算符）的情况下做到这一点。

代码示例如下：

```
$.each(data, function(index, item) {
  return $("div#SearchResults").append(item.PhoneNumber);
} 
```

什么时候`item.PhoneNumber is null`，页面在里面呈现一个字符串“ **null** ” `SearchResults div`，而不是我想是**空**的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-09T10:19:56.723

```
$.each(data, function(index, item) {
  return $("div#SearchResults").append(item.PhoneNumber || "");
} 
```

使用`$.trim`（意外地转换`null`为`undefined`空字符串）：

```
$.each(data, function(index, item) {
  return $("div#SearchResults").append($.trim(item.PhoneNumber));
} 
```

出乎意料，因为它既不直观又无证。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T10:20:13.553

如果你真的决定不使用`if`或三元来评估变量，那么就有可能使用`||`运算符：

```
$.each(data, function(index, item) {
  return $("div#SearchResults").append(item.PhoneNumber || '');
} 
```

但是，老实说，只需使用条件运算符，这就是它们的用途，并有助于在脚本的执行和输出中实施一定程度的安全性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:18:56.907

试试这个，

```
$.each(data, function(index, item) {
  return $("div#SearchResults").append(item.PhoneNumber?item.PhoneNumber:"");
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-02T07:05:07.013

没有 JQuery：

```
$.each(data, function(index, item) {
  return $("div#SearchResults").append([item.PhoneNumber].join(''));
} 
```

# c# - EF 4.3 使用本地缓存而不是从数据库重新获取

> ID：11393068
> 
> 赞同：1
> 
> 时间：2012-07-09T10:17:14.963
> 
> 标签：c#, .net, entity-framework, ef-code-first

有人可以向我解释为什么我下面的 EF（4.3）代码第一个代码会导致检索到“旧”密码。

```
using (var context = new CableSenseInstanceConfiguratorContext())
{
    var user = context.Installers.Where(u => u.UserName == "admin").FirstOrDefault();
    Console.WriteLine(user.Password); // Outputs "oldpassword"

    // Change the details on a different context;
    using (var context2 = new CableSenseInstanceConfiguratorContext())
    {
        var installer = context2.Installers.Single(i => i.UserName == "admin");
        installer.Password = "changed"; 
        context2.SaveChanges();
    }

    var user2 = context.Installers.Where(u => u.UserName == "admin").FirstOrDefault();
    Console.WriteLine(user2.Password); // Outputs "oldpassword"
} 
```

密码是“oldpassword”启动。所以我在另一个上下文（context2）中更改密码，然后再次将其提取到 user2 中。我可以验证两者的输出都是“旧密码”。通过分析 SQL，我可以看到密码确实被更改了，我还可以看到填充 user2 的代码*正在*进入数据库，但它只是没有使用这些值。

我了解 EF 将本地上下文的概念作为缓存和跟踪实体的一种方式，但据我了解，a`context.Installers.Where(..)`应该强制从数据库中重新获取，而 a`context.Installers.Find()`应该查看本地上下文。似乎无论我如何查询安装程序，它都在使用本地缓存。

**编辑**

感谢@Reinard 的解决方案。我误解了文档 - 我从[这里](http://blogs.msdn.com/b/adonet/archive/2011/01/28/using-dbcontext-in-ef-feature-ctp5-part-3-finding-entities.aspx)读到：

> 请注意，DbSet 和 IDbSet 始终会针对数据库创建查询，并且始终会涉及到数据库的往返行程，即使返回的实体已经存在于上下文中。

所以我假设因为它会进入数据库，它会重新获取我的对象。实际发生的事情是它进入数据库，获取对象，发现我已经在跟踪该对象（因为之前的负载），所以我最终得到了旧对象 - 这实际上是文档所说的！

令人惊讶的是，使用`context.Installers.Local.Clear()`没有区别，我需要`AsNoTracking().`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T10:41:23.593

既不`Where`也`Find`不会显式地从数据库中重新获取。据我所知，只有当上下文中不存在实体时，Find 才会从数据库中检索实体。

为了显式强制重新获取，请使用 AsNoTracking()。

例如

```
context.Installers.AsNoTracking().Where(u => u.UserName == "admin").FirstOrDefault(); 
```

# ios - 如何在 iOS 的 Instagram 上分享图片？

> ID：11393071
> 
> 赞同：87
> 
> 时间：2012-07-09T10:17:22.283
> 
> 标签：ios, objective-c, swift, instagram-api

我的客户想在 Instagram、Twitter、Facebook 上分享一张图片。

我已经完成了 Twitter 和 Facebook，但没有在互联网上找到任何 API 或任何东西来在 Instagram 上分享图像。**是否可以在 Instagram 上分享图片？如果是，那怎么办？**

当我查看 Instagram 的开发者网站时，我发现了 Ruby on Rails 和 Python 的库。但是没有iOS Sdk的文档

我已根据 instagram.com/developer 从 instagram 获得令牌，但现在不知道下一步如何与 instagram 图像共享。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-16T09:17:50.923

最后我得到了答案。您不能直接在 Instagram 上发布图片。您必须使用 UIDocumentInteractionController 重新分配您的图像。

```
@property (nonatomic, retain) UIDocumentInteractionController *dic;    

CGRect rect = CGRectMake(0 ,0 , 0, 0);
UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIGraphicsEndImageContext();
NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/test.igo"];

NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", jpgPath]];
self.dic.UTI = @"com.instagram.photo";
self.dic = [self setupControllerWithURL:igImageHookFile usingDelegate:self];
self.dic=[UIDocumentInteractionController interactionControllerWithURL:igImageHookFile];
[self.dic presentOpenInMenuFromRect: rect    inView: self.view animated: YES ];

- (UIDocumentInteractionController *) setupControllerWithURL: (NSURL*) fileURL usingDelegate: (id <UIDocumentInteractionControllerDelegate>) interactionDelegate {
     UIDocumentInteractionController *interactionController = [UIDocumentInteractionController interactionControllerWithURL: fileURL];
     interactionController.delegate = interactionDelegate;
     return interactionController;
} 
```

**注意：**一旦您重定向到 Instagram 应用程序，您将无法返回您的应用程序。你必须再次打开你的应用程序

[从这里](https://github.com/hiren443/InstagramShareiOS)下载源代码

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-02-02T07:08:53.853

**这是将图像+标题文本上传到 Instagram 的完整测试代码。**

**in.h 文件**

```
//Instagram
@property (nonatomic, retain) UIDocumentInteractionController *documentController;

-(void)instaGramWallPost
{
            NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];
            if([[UIApplication sharedApplication] canOpenURL:instagramURL]) //check for App is install or not
            {
                NSData *imageData = UIImagePNGRepresentation(imge); //convert image into .png format.
                NSFileManager *fileManager = [NSFileManager defaultManager];//create instance of NSFileManager
                NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //create an array and store result of our search for the documents directory in it
                NSString *documentsDirectory = [paths objectAtIndex:0]; //create NSString object, that holds our exact path to the documents directory
                NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"insta.igo"]]; //add our image to the path
                [fileManager createFileAtPath:fullPath contents:imageData attributes:nil]; //finally save the path (image)
                NSLog(@"image saved");

                CGRect rect = CGRectMake(0 ,0 , 0, 0);
                UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0);
                [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
                UIGraphicsEndImageContext();
                NSString *fileNameToSave = [NSString stringWithFormat:@"Documents/insta.igo"];
                NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:fileNameToSave];
                NSLog(@"jpg path %@",jpgPath);
                NSString *newJpgPath = [NSString stringWithFormat:@"file://%@",jpgPath];
                NSLog(@"with File path %@",newJpgPath);
                NSURL *igImageHookFile = [[NSURL alloc]initFileURLWithPath:newJpgPath];
                NSLog(@"url Path %@",igImageHookFile);

                self.documentController.UTI = @"com.instagram.exclusivegram";
                self.documentController = [self setupControllerWithURL:igImageHookFile usingDelegate:self];
                self.documentController=[UIDocumentInteractionController interactionControllerWithURL:igImageHookFile];
                NSString *caption = @"#Your Text"; //settext as Default Caption
                self.documentController.annotation=[NSDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@"%@",caption],@"InstagramCaption", nil];
                [self.documentController presentOpenInMenuFromRect:rect inView: self.view animated:YES];
            }
            else
            {
                 NSLog (@"Instagram not found");
            }
}

- (UIDocumentInteractionController *) setupControllerWithURL: (NSURL*) fileURL usingDelegate: (id <UIDocumentInteractionControllerDelegate>) interactionDelegate {
    NSLog(@"file url %@",fileURL);
    UIDocumentInteractionController *interactionController = [UIDocumentInteractionController interactionControllerWithURL: fileURL];
    interactionController.delegate = interactionDelegate;

    return interactionController;
} 
```

**或者**

```
-(void)instaGramWallPost
{
    NSURL *myURL = [NSURL URLWithString:@"Your image url"];
    NSData * imageData = [[NSData alloc] initWithContentsOfURL:myURL];
    UIImage *imgShare = [[UIImage alloc] initWithData:imageData];

    NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];

    if([[UIApplication sharedApplication] canOpenURL:instagramURL]) //check for App is install or not
    {
        UIImage *imageToUse = imgShare;
        NSString *documentDirectory=[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
        NSString *saveImagePath=[documentDirectory stringByAppendingPathComponent:@"Image.igo"];
        NSData *imageData=UIImagePNGRepresentation(imageToUse);
        [imageData writeToFile:saveImagePath atomically:YES];
        NSURL *imageURL=[NSURL fileURLWithPath:saveImagePath];
        self.documentController=[[UIDocumentInteractionController alloc]init];
        self.documentController = [UIDocumentInteractionController interactionControllerWithURL:imageURL];
        self.documentController.delegate = self;
        self.documentController.annotation = [NSDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@"Testing"], @"InstagramCaption", nil];
        self.documentController.UTI = @"com.instagram.exclusivegram";
        UIViewController *vc = [UIApplication sharedApplication].keyWindow.rootViewController;
        [self.documentController presentOpenInMenuFromRect:CGRectMake(1, 1, 1, 1) inView:vc.view animated:YES];
    }
    else {
        DisplayAlertWithTitle(@"Instagram not found", @"")
    }
} 
```

**并将其写入 .plist**

```
<key>LSApplicationQueriesSchemes</key>
    <array>
        <string>instagram</string>
    </array> 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-10-31T07:28:56.080

您可以使用 Instagram url 方案提供的一种

[![在此处输入图像描述](../Images/b791afad3c316e66c764a10d8a1cec88.png)](https://i.stack.imgur.com/9znuQ.png)

1.  Instagram[官方文档在这里](https://developers.facebook.com/docs/instagram/sharing-to-feed/)

2.  与 UIDocumentInteractionController 共享

    ```
     final class InstagramPublisher : NSObject {

     private var documentsController:UIDocumentInteractionController = UIDocumentInteractionController()

     func postImage(image: UIImage, view: UIView, result:((Bool)->Void)? = nil) {
         guard let instagramURL = NSURL(string: "instagram://app") else {
             if let result = result {
                 result(false)
             }
         return
     }
         if UIApplication.sharedApplication().canOpenURL(instagramURL) {
             let jpgPath = (NSTemporaryDirectory() as NSString).stringByAppendingPathComponent("instagrammFotoToShareName.igo")
             if let image = UIImageJPEGRepresentation(image, 1.0) {
                 image.writeToFile(jpgPath, atomically: true)
                 let fileURL = NSURL.fileURLWithPath(jpgPath)
                 documentsController.URL = fileURL
                 documentsController.UTI = "com.instagram.exclusivegram"
                 documentsController.presentOpenInMenuFromRect(view.bounds, inView: view, animated: true)
                 if let result = result {
                     result(true)
                 }
             } else if let result = result {
                 result(false)
             }
         } else {
             if let result = result {
                 result(false)
             }
         }
         }
     } 
    ```

3.  通过直接重定向共享

    ```
     import Photos

     final class InstagramPublisher : NSObject {

     func postImage(image: UIImage, result:((Bool)->Void)? = nil) {
     guard let instagramURL = NSURL(string: "instagram://app") else {
         if let result = result {
             result(false)
         }
         return
     }

     let image = image.scaleImageWithAspectToWidth(640)

     do {
         try PHPhotoLibrary.sharedPhotoLibrary().performChangesAndWait {
             let request = PHAssetChangeRequest.creationRequestForAssetFromImage(image)

             let assetID = request.placeholderForCreatedAsset?.localIdentifier ?? ""
             let shareURL = "instagram://library?LocalIdentifier=" + assetID

             if UIApplication.sharedApplication().canOpenURL(instagramURL) {
                 if let urlForRedirect = NSURL(string: shareURL) {
                     UIApplication.sharedApplication().openURL(urlForRedirect)
                 }
             }
         }
     } catch {
         if let result = result {
             result(false)
         }
     }
     }
     } 
    ```

4.  将照片调整为推荐尺寸的扩展

    ```
     import UIKit

     extension UIImage {
         // MARK: - UIImage+Resize

         func scaleImageWithAspectToWidth(toWidth:CGFloat) -> UIImage {
             let oldWidth:CGFloat = size.width
             let scaleFactor:CGFloat = toWidth / oldWidth

             let newHeight = self.size.height * scaleFactor
             let newWidth = oldWidth * scaleFactor;

             UIGraphicsBeginImageContext(CGSizeMake(newWidth, newHeight))
             drawInRect(CGRectMake(0, 0, newWidth, newHeight))
             let newImage = UIGraphicsGetImageFromCurrentImageContext()
             UIGraphicsEndImageContext()
             return newImage
         }
     } 
    ```

5.  不要忘记在 plist 中添加所需的方案

> ```
>  <key>LSApplicationQueriesSchemes</key>
>   <array>
>        <string>instagram</string> 
>   </array> 
> ```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-12-30T09:11:11.900

希望这个答案能解决您的疑问。这将直接在 Instagram 而不是相机中打开库文件夹。

```
NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];
if ([[UIApplication sharedApplication] canOpenURL:instagramURL])
{
    NSURL *videoFilePath = [NSURL URLWithString:[NSString stringWithFormat:@"%@",[request downloadDestinationPath]]]; // Your local path to the video
    NSString *caption = @"Some Preloaded Caption";
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library writeVideoAtPathToSavedPhotosAlbum:videoFilePath completionBlock:^(NSURL *assetURL, NSError *error) {
        NSString *escapedString   = [self urlencodedString:videoFilePath.absoluteString];
        NSString *escapedCaption  = [self urlencodedString:caption];
        NSURL *instagramURL = [NSURL URLWithString:[NSString stringWithFormat:@"instagram://library?AssetPath=%@&InstagramCaption=%@",escapedString,escapedCaption]];
        if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) {
            [[UIApplication sharedApplication] openURL:instagramURL];
        }
    }]; 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-07-24T09:24:02.640

如果您不想使用 UIDocumentInteractionController

```
import Photos

...

func postImageToInstagram(image: UIImage) {
        UIImageWriteToSavedPhotosAlbum(image, self, #selector(SocialShare.image(_:didFinishSavingWithError:contextInfo:)), nil)
    }
    func image(image: UIImage, didFinishSavingWithError error: NSError?, contextInfo:UnsafePointer<Void>) {
        if error != nil {
            print(error)
        }

        let fetchOptions = PHFetchOptions()
        fetchOptions.sortDescriptors = [NSSortDescriptor(key: "creationDate", ascending: false)]
        let fetchResult = PHAsset.fetchAssetsWithMediaType(.Image, options: fetchOptions)
        if let lastAsset = fetchResult.firstObject as? PHAsset {
            let localIdentifier = lastAsset.localIdentifier
            let u = "instagram://library?LocalIdentifier=" + localIdentifier
            let url = NSURL(string: u)!
            if UIApplication.sharedApplication().canOpenURL(url) {
                UIApplication.sharedApplication().openURL(NSURL(string: u)!)
            } else {
                let alertController = UIAlertController(title: "Error", message: "Instagram is not installed", preferredStyle: .Alert)
                alertController.addAction(UIAlertAction(title: "OK", style: .Default, handler: nil))
                self.presentViewController(alertController, animated: true, completion: nil)
            }

        }
    } 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-01-30T11:31:47.990

对于 iOS 6 及更高版本，您可以使用此 UIActivity 将图像上传到 Instagram，它使用 iOS 挂钩具有相同的工作流程，但简化了开发：

[https://github.com/coryalder/DMActivityInstagram](https://github.com/coryalder/DMActivityInstagram)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-08-11T11:54:46.483

这是我详细实施的正确答案。在 .h 文件中

```
 UIImageView *imageMain;
 @property (nonatomic, strong) UIDocumentInteractionController *documentController; 
```

in.m 文件只写

```
 NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];
 if([[UIApplication sharedApplication] canOpenURL:instagramURL])
 {
      CGFloat cropVal = (imageMain.image.size.height > imageMain.image.size.width ? imageMain.image.size.width : imageMain.image.size.height);

      cropVal *= [imageMain.image scale];

      CGRect cropRect = (CGRect){.size.height = cropVal, .size.width = cropVal};
      CGImageRef imageRef = CGImageCreateWithImageInRect([imageMain.image CGImage], cropRect);

      NSData *imageData = UIImageJPEGRepresentation([UIImage imageWithCGImage:imageRef], 1.0);
      CGImageRelease(imageRef);

      NSString *writePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"instagram.igo"];
      if (![imageData writeToFile:writePath atomically:YES]) {
      // failure
           NSLog(@"image save failed to path %@", writePath);
           return;
      } else {
      // success.
      }

      // send it to instagram.
      NSURL *fileURL = [NSURL fileURLWithPath:writePath];
      self.documentController = [UIDocumentInteractionController interactionControllerWithURL:fileURL];
      self.documentController.delegate = self;
      [self.documentController setUTI:@"com.instagram.exclusivegram"];
      [self.documentController setAnnotation:@{@"InstagramCaption" : @"We are making fun"}];
      [self.documentController presentOpenInMenuFromRect:CGRectMake(0, 0, 320, 480) inView:self.view animated:YES];
 }
 else
 {
      NSLog (@"Instagram not found");

 } 
```

你肯定会得到结果。例如，您会从底部看到带有 instagram 图像的弹出窗口。单击它并玩得开心。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-02-02T10:38:59.553

我在我的应用程序中尝试了这个，它运行良好（Swift）

```
import Foundation

import UIKit

class InstagramManager: NSObject, UIDocumentInteractionControllerDelegate {

    private let kInstagramURL = "instagram://"
    private let kUTI = "com.instagram.exclusivegram"
    private let kfileNameExtension = "instagram.igo"
    private let kAlertViewTitle = "Error"
    private let kAlertViewMessage = "Please install the Instagram application"

    var documentInteractionController = UIDocumentInteractionController()

    // singleton manager
    class var sharedManager: InstagramManager {
        struct Singleton {
            static let instance = InstagramManager()
        }
        return Singleton.instance
    }

    func postImageToInstagramWithCaption(imageInstagram: UIImage, instagramCaption: String, view: UIView) {
        // called to post image with caption to the instagram application

        let instagramURL = NSURL(string: kInstagramURL)
        if UIApplication.sharedApplication().canOpenURL(instagramURL!) {
            let jpgPath = (NSTemporaryDirectory() as NSString).stringByAppendingPathComponent(kfileNameExtension)
            UIImageJPEGRepresentation(imageInstagram, 1.0)!.writeToFile(jpgPath, atomically: true)
            let rect = CGRectMake(0,0,612,612)
            let fileURL = NSURL.fileURLWithPath(jpgPath)
            documentInteractionController.URL = fileURL
            documentInteractionController.delegate = self
            documentInteractionController.UTI = kUTI

            // adding caption for the image
            documentInteractionController.annotation = ["InstagramCaption": instagramCaption]
            documentInteractionController.presentOpenInMenuFromRect(rect, inView: view, animated: true)
        }
        else {

            // alert displayed when the instagram application is not available in the device
            UIAlertView(title: kAlertViewTitle, message: kAlertViewMessage, delegate:nil, cancelButtonTitle:"Ok").show()
        }
    }
}

 func sendToInstagram(){

     let image = postImage

             InstagramManager.sharedManager.postImageToInstagramWithCaption(image!, instagramCaption: "\(description)", view: self.view)

 } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-01-03T09:02:52.860

这是正确的答案。您不能直接在 Instagram 上发布图片。您需要使用 UIDocumentInteractionController 重定向到 Instagram...

```
NSString* imagePath = [NSString stringWithFormat:@"%@/instagramShare.igo", [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]];
[[NSFileManager defaultManager] removeItemAtPath:imagePath error:nil];

UIImage *instagramImage = [UIImage imageNamed:@"imagename you want to share"];
[UIImagePNGRepresentation(instagramImage) writeToFile:imagePath atomically:YES];
NSLog(@"Image Size >>> %@", NSStringFromCGSize(instagramImage.size));

self.dic=[UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:imagePath]];
self.dic.delegate = self;
self.dic.UTI = @"com.instagram.exclusivegram";
[self.dic presentOpenInMenuFromRect: self.view.frame inView:self.view animated:YES ]; 
```

**注意：**一旦您重定向到 Instagram 应用程序，您将无法返回您的应用程序。你必须再次打开你的应用程序

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-03-28T08:25:20.627

您可以在不使用 UIDocumentInteractionController 的情况下执行此操作，并使用以下 3 种方法直接访问 Instagram：

它就像所有其他著名的应用程序一样工作。代码是用 Objective c 编写的，因此您可以根据需要将其翻译成 swift。您需要做的是将图像保存到设备并使用 URLScheme

将此添加到您的 .m 文件中

```
#import <Photos/Photos.h> 
```

首先，您需要使用此方法将 UIImage 保存到设备：

```
-(void)savePostsPhotoBeforeSharing
{
    UIImageWriteToSavedPhotosAlbum([UIImage imageNamed:@"image_file_name.jpg"], self, @selector(image:didFinishSavingWithError:contextInfo:), NULL);
} 
```

此方法是将图像保存到您的设备的回调：

```
- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo: (void *) contextInfo;
{
    [self sharePostOnInstagram];

} 
```

图片保存到设备后，需要查询刚刚保存的图片，作为PHAsset获取

```
-(void)sharePostOnInstagram
{
    PHFetchOptions *fetchOptions = [PHFetchOptions new];
    fetchOptions.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"creationDate" ascending:NO],];
    __block PHAsset *assetToShare;
    PHFetchResult *result = [PHAsset fetchAssetsWithMediaType:PHAssetMediaTypeImage options:fetchOptions];
    [result enumerateObjectsUsingBlock:^(PHAsset *asset, NSUInteger idx, BOOL *stop) {
        assetToShare = asset;

    }];

    if([assetToShare isKindOfClass:[PHAsset class]])
    {
        NSString *localIdentifier = assetToShare.localIdentifier;
        NSString *urlString = [NSString stringWithFormat:@"instagram://library?LocalIdentifier=%@",localIdentifier];
        NSURL *instagramURL = [NSURL URLWithString:urlString];
        if ([[UIApplication sharedApplication] canOpenURL: instagramURL])
        {
            [[UIApplication sharedApplication] openURL: instagramURL];
        } else
        {
            // can not share with whats app
            NSLog(@"No instagram installed");
        }

    }
} 
```

别忘了把它放在你的 info.plist 下`LSApplicationQueriesSchemes`

```
<string>instagram</string> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-02-04T11:57:57.493

```
- (void) shareImageWithInstagram
{
    NSURL *instagramURL = [NSURL URLWithString:@"instagram://"];
    if ([[UIApplication sharedApplication] canOpenURL:instagramURL])
    {
        UICachedFileMgr* mgr = _gCachedManger;
        UIImage* photoImage = [mgr imageWithUrl:_imageView.image];
        NSData* imageData = UIImagePNGRepresentation(photoImage);
        NSString* captionString = [NSString  stringWithFormat:@"ANY_TAG",];
        NSString* imagePath = [UIUtils documentDirectoryWithSubpath:@"image.igo"];
        [imageData writeToFile:imagePath atomically:NO];
        NSURL* fileURL = [NSURL fileURLWithPath:[NSString stringWithFormat:@"file://%@",imagePath]];

        self.docFile = [[self setupControllerWithURL:fileURL usingDelegate:self]retain];
        self.docFile.annotation = [NSDictionary dictionaryWithObject: captionString
                                                     forKey:@"InstagramCaption"];
        self.docFile.UTI = @"com.instagram.photo";

        // OPEN THE HOOK
        [self.docFile presentOpenInMenuFromRect:self.view.frame inView:self.view animated:YES];
    }
    else
    {
        [UIUtils messageAlert:@"Instagram not installed in this device!\nTo share image please install instagram." title:nil delegate:nil];
    }
} 
```

我在我的应用程序中尝试了这个，它肯定会工作

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-12-09T17:07:37.950

至于我，这里描述的最好和最简单的方法[从我的 iOS 应用程序将照片分享到 Instagram](https://stackoverflow.com/questions/20297157/share-photo-to-instagram-from-my-ios-app)

您需要使用 .igo 格式将图像保存在设备上，然后使用“UIDocumentInteractionController”发送本地路径 Instagram 应用程序。不要忘记设置“UIDocumentInteractionControllerDelegate”

我的建议是添加如下内容：

```
NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];
if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) 
{
 <your code>
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-06-12T09:16:06.110

```
NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];

if ([[UIApplication sharedApplication] canOpenURL:instagramURL])
{

    NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/Insta_Images/%@",@"shareImage.png"]];

    NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", jpgPath]];

    docController.UTI = @"com.instagram.photo";

    docController = [self setupControllerWithURL:igImageHookFile usingDelegate:self];

    docController =[UIDocumentInteractionController interactionControllerWithURL:igImageHookFile];

    docController.delegate=self;

    [docController presentOpenInMenuFromRect:CGRectMake(0 ,0 , 612, 612) inView:self.view animated:YES]; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-01-11T19:03:37.417

我注意到，如果您将`URL`指向图像`activityItems`而不是`UIImage`，`Copy to Instagram`活动项本身就会出现，并且您无需执行任何其他操作。请注意，`String`里面的对象`activityItems`将被丢弃，并且无法在 Instagram 中预填充标题。如果您仍想提示用户发布特定标题，则需要创建自定义活动，在其中将该文本复制到剪贴板并让用户知道它，就像在[这个 gist](https://gist.github.com/almassapargali/109fe4145e01f9df272307eb9447b2b4)中一样。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-02-15T11:53:17.513

```
 @import Photos;

    -(void)shareOnInstagram:(UIImage*)imageInstagram {

        [self authorizePHAssest:imageInstagram];
    }

    -(void)authorizePHAssest:(UIImage *)aImage{

        PHAuthorizationStatus status = [PHPhotoLibrary authorizationStatus];

        if (status == PHAuthorizationStatusAuthorized) {
            // Access has been granted.
            [self savePostsPhotoBeforeSharing:aImage];
        }

        else if (status == PHAuthorizationStatusDenied) {
            // Access has been denied.
        }

        else if (status == PHAuthorizationStatusNotDetermined) {

            // Access has not been determined.
            [PHPhotoLibrary requestAuthorization:^(PHAuthorizationStatus status) {

                if (status == PHAuthorizationStatusAuthorized) {
                    // Access has been granted.
                    [self savePostsPhotoBeforeSharing:aImage];
                }
            }];
        }

        else if (status == PHAuthorizationStatusRestricted) {
            // Restricted access - normally won't happen.
        }
    }
    -(void)saveImageInDeviceBeforeSharing:(UIImage *)aImage
    {
        UIImageWriteToSavedPhotosAlbum(aImage, self, @selector(image:didFinishSavingWithError:contextInfo:), NULL);
    }

    - (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo: (void *) contextInfo;
    {
        if (error == nil){
            [self sharePostOnInstagram];
        }
    }

    -(void)shareImageOnInstagram
    {
        PHFetchOptions *fetchOptions = [PHFetchOptions new];
        fetchOptions.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"creationDate" ascending:false]];
        PHFetchResult *result = [PHAsset fetchAssetsWithMediaType:PHAssetMediaTypeImage options:fetchOptions];

        __block PHAsset *assetToShare = [result firstObject];

        if([assetToShare isKindOfClass:[PHAsset class]])
        {
            NSString *localIdentifier = assetToShare.localIdentifier;
            NSString *urlString = [NSString stringWithFormat:@"instagram://library?LocalIdentifier=%@",localIdentifier];
            NSURL *instagramURL = [NSURL URLWithString:urlString];
            if ([[UIApplication sharedApplication] canOpenURL: instagramURL])
            {
                [[UIApplication sharedApplication] openURL:instagramURL options:@{} completionHandler:nil];
            } else
            {
                NSLog(@"No instagram installed");
            }
        }
    } 
```

**注意：- IMP TODO：- 在 Info.plist 中添加以下键**

```
<key>LSApplicationQueriesSchemes</key>
<array>
<string>instagram</string>
</array> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-08-25T06:53:30.173

我使用了这段代码：

```
 NSString* filePathStr = [[NSBundle mainBundle] pathForResource:@"UMS_social_demo" ofType:@"png"];
NSURL* fileUrl = [NSURL fileURLWithPath:filePathStr];

NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/test.igo"];
[[NSData dataWithContentsOfURL:fileUrl] writeToFile:jpgPath atomically:YES];

NSURL* documentURL = [NSURL URLWithString:[NSString stringWithFormat:@"file://%@", jpgPath]];

UIDocumentInteractionController *interactionController = [UIDocumentInteractionController interactionControllerWithURL: documentURL];
self.interactionController = interactionController;
interactionController.delegate = self;
interactionController.UTI = @"com.instagram.photo";
CGRect rect = CGRectMake(0 ,0 , 0, 0);
[interactionController presentOpenInMenuFromRect:rect inView:self.view animated:YES]; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-06-19T04:57:13.760

```
-(void)shareOnInstagram {

    CGRect rect = CGRectMake(self.view.frame.size.width*0.375 ,self.view.frame.size.height/2 , 0, 0);

    NSString * saveImagePath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/ShareInstragramImage.igo"];

    [UIImagePNGRepresentation(_image) writeToFile:saveImagePath atomically:YES];

    NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", saveImagePath]];

    self.documentController=[UIDocumentInteractionController interactionControllerWithURL:igImageHookFile];

    self.documentController.UTI = @"com.instagram.exclusivegram";
    self.documentController = [self setupControllerWithURL:igImageHookFile usingDelegate:self];

    [self.documentController presentOpenInMenuFromRect: rect    inView: self.view animated: YES ];

}

-(UIDocumentInteractionController *) setupControllerWithURL: (NSURL*) fileURL usingDelegate: (id <UIDocumentInteractionControllerDelegate>) interactionDelegate {

    UIDocumentInteractionController *interactionController = [UIDocumentInteractionController interactionControllerWithURL: fileURL];
    interactionController.delegate = interactionDelegate;
    return interactionController;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-03-09T12:40:48.687

```
NSURL *myURL = [NSURL URLWithString:sampleImageURL];
NSData * imageData = [[NSData alloc] initWithContentsOfURL:myURL];
UIImage *imageToUse = [[UIImage alloc] initWithData:imageData];
NSString *documentDirectory=[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *saveImagePath=[documentDirectory stringByAppendingPathComponent:@"Image.ig"];
[imageData writeToFile:saveImagePath atomically:YES];
NSURL *imageURL=[NSURL fileURLWithPath:saveImagePath];
self.documentController = [UIDocumentInteractionController interactionControllerWithURL:imageURL];
self.documentController.delegate = self;
self.documentController.annotation = [NSDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@""], @"", nil];
self.documentController.UTI = @"com.instagram.exclusivegram";
[self.documentController presentOpenInMenuFromRect:CGRectMake(1, 1, 1, 1) inView:self.view animated:YES]; 
```

# database - 数据库模式 - 拆分表而不是建立关系

> ID：11393074
> 
> 赞同：0
> 
> 时间：2012-07-09T10:17:42.587
> 
> 标签：database, database-design

假设我有一个包含 5000 条记录的表，另一个表包含 5 个主题的列表。每个主题与较大表中的 1000 条记录相关联 - 每个评论都有一个“主题”字段，它是主题表的外键。

例如，如果数据库存储了网站上所有用户的评论。主题 A 将有 1000 条评论，主题 B 将有 1000 条评论……

如果我想获得关于特定主题的所有评论，我将不得不编写一个查询以从可能的 5000 行中获取正确的 1000 行。如果我创建 5 个表，每个表只存储关于特定主题的评论。

假设永远不会超过 40 个主题，这是一种明智的数据库设计方法吗？我看不到任何明显的缺点，但似乎它会产生更快的查询结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:29:36.213

不要走那条路。它不会更快，但很快就会成为维护的噩梦，因为

*   您必须为每个新主题添加一个新表格
*   如果你想要所有主题的评论，你将不得不做很多 UNION ALL ... 样式查询，如果主题列表发生变化，你必须修改每一个查询（尽管这可以通过巧妙的使用来缓解意见）
*   每次你想摆脱一个话题时，你都必须删除一张桌子

只需将所有注释放在一个表中，添加带有索引的外键，就可以了（5000 条记录是非常少量的数据，顺便说一句 - RDBMS 系统通常可以处理数百万行而没有任何问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T11:19:48.297

弗兰克施密特是对的。

我假设您对关系数据库没有太多经验-值得阅读它们（Joe Celko 有几本书可能会有所帮助）。您描述的问题实际上是 RDBMS 旨在解决的关键问题之一；他们使用索引、外键和 SQL 来做到这一点。如果您正在使用 RDBMS，最好了解这一点，因为有解决这些问题的标准方法，并且大多数开发人员都熟悉它们。

有时这些工具还不够用，或者现实生活中的性能问题迫使您设计非“标准”的解决方案——但它们往往不会出现在 5000 条记录中。如果你能证明你有问题，你应该只考虑这些解决方案，因为它们可能会解决一个约束，但通常会以牺牲其他问题为代价。

因此，如果您可以证明您的 5000 条记录数据库太慢，并且您已经优化了其他所有内容，向其投入了更多硬件，对其进行了缓存，并且用完了选项，那么您可能会考虑按照您描述的方式拆分表。它会造成维护头痛，并且您的数据库访问代码变得难以阅读 - 接受该项目的新开发人员将有一个 WTF 时刻，并且需要培训和文档。

# c# - 在 HtmlAgilityPack 中运行脚本

> ID：11393075
> 
> 赞同：16
> 
> 时间：2012-07-09T10:17:42.880
> 
> 标签：c#, javascript, html-agility-pack

我正在尝试抓取一个特定的网页，其工作方式如下。

首先加载页面，然后运行某种 javascript 来获取填充页面所需的数据。我对那个数据很感兴趣。

如果我使用 HtmlAgilityPack 获取页面 - 脚本不会运行，所以我得到它基本上是一个空白页面。

有没有办法强制它运行脚本，所以我可以获取数据？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-09T12:15:24.090

您将获得服务器返回的内容 - 与 Web 浏览器相同。当然，Web 浏览器会运行这些脚本。Html Agility Pack 只是一个 HTML 解析器 - 它无法解释 javascript 或将其绑定到文档的内部表示。如果你想运行脚本，你需要一个网络浏览器。您的问题的完美答案将是一个完整的“无头”网络浏览器。它包含了一个 HTML 解析器、一个 javascript 解释器和一个模拟浏览器 DOM 的模型，所有这些都一起工作。基本上，那是一个网络浏览器，除了没有渲染部分。目前还没有这样的东西可以完全在 .NET 环境中运行。

最好的办法是使用`WebBrowser`控件并在 Internet Explorer 中在程序控制下实际加载和运行页面。这不会很快或很漂亮，但它会做你需要做的事情。

另请参阅我对类似问题的回答：[Load a DOM and Execute javascript, server side, with .Net](https://stackoverflow.com/questions/10886161/load-a-dom-and-execute-javascript-server-side-with-net/10886733#10886733)，其中讨论了 .NET 中用于执行此操作的可用技术。不幸的是，大多数部件现在都存在，但还没有完全到位或者没有以正确的方式集成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-27T08:07:48.700

您可以为此使用 Awesomium，[http:](http://www.awesomium.com/) //www.awesomium.com/ 。它工作得相当好，但不支持 x64 并且不是线程安全的。我用它来扫描一些网站 24x7 并且它至少连续几天运行良好，但它通常会崩溃。

# r - 连接因子并替换 R 中的名称

> ID：11393077
> 
> 赞同：3
> 
> 时间：2012-07-09T10:17:45.183
> 
> 标签：r, factors

我开始使用 R 但我在做一些使用 python =P 很容易的事情时遇到了一些问题但我还没有准备好放弃（还）

我有一个包含几列的 data.frame。有些是因子，有些是整数值。
其中一列具有以下值：

```
Levels: High Low Neither SI 
```

我想做的是将 High 和 Low 连接成一个因子，我的意思是创建一个名为 Foreign 的新因子，它将包含 High 和 Low 的值。
但是我在这样做时遇到了一些困难。

我试过：

```
dataset[Origin == 'High',]$Origin == 'Foreign'

gsub("High", 'Foreign', dataset, fixed = TRUE) 
```

我也尝试过使用 grep 但没有任何卢克..

我想这很容易，但我无法理解如何处理问题。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T10:30:35.340

你可以检查一下

```
levels(dataset$Origin)
[1] "High" "Low" "Neither" "SI" 
```

所以你只需要

```
levels(dataset$Origin)[1:2] <- "Foreign" 
```

# xcode - 将 Xcode 项目推送到 GitHub 时的身份验证问题

> ID：11393080
> 
> 赞同：6
> 
> 时间：2012-07-09T10:17:55.007
> 
> 标签：xcode, github

当我想通过 Xcode 将我的项目推送到 GitHub 时，我遇到了一个问题。

注意，我不是在这里谈论终端。我必须为团队中的艺术家设置 Xcode 环境。终端不适合他...

一开始我尝试使用 HTTPS 地址（https://github.com/zeroliu/DumplingJump.git），但总是收到 403 身份验证错误。

> 错误：请求的 URL 返回错误：403 访问 [https://github.com/zeroliu/DumplingJump.git/info/refs](https://github.com/zeroliu/DumplingJump.git/info/refs)致命：HTTP 请求失败

通过到处搜索，我发现 GitHub 实际上只接受 SSH 方式。 **但奇怪的是，我可以使用 HTTPS 方式通过终端推送我的项目……我认为这种说法是不正确的。**

无论如何，然后我尝试了 SSH 方式，但它也无法正常工作。Xcode 要求我输入我的用户名和密码，但无论我尝试了多少次，它都无法正常工作。我认为问题出在 Xcode 本身，因为 SSH 地址是 git@github.com:Organization/Repository.git 的形式，Xcode 愚蠢地认为用户名是 git，但不是 Organization ...当我更改用户时推送项目时命名，Xcode会自动将“git”替换为我的用户名，这会将地址更改为Organization@github.com:Organization/Repository.git。这应该是我无法通过 SSH 访问的原因。

你们中有人成功通过 Xcode 将项目推送到 GitHub 上吗？真的需要你的帮助！！超级感谢！！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-09T10:22:56.020

我总是将 github URL 设置为：

```
https://username:password@github.com/username/Whatever.git 
```

这对安全性不利，但我已经浪费了足够多的时间来尝试让 SSH 使用多个密钥对，而且我每次都不必费心输入我的用户名/密码。

# php - 使用 MySQL 在字符串中搜索字符

> ID：11393084
> 
> 赞同：2
> 
> 时间：2012-07-09T10:18:19.787
> 
> 标签：php, mysql, search

例如，假设您在数据库中有一个随机字符串：**APKHDP**

我想搜索包含字符 PHP 的所有字符串（按该顺序）。所以我搜索 PHP 并返回上面的字符串。或者我搜索 HPP，它什么也没返回。

是否有一个简单的解决方案可以使这成为可能，也许使用 REGEX？听起来很简单。但到目前为止，我发现的答案非常复杂。

我将它与 PHP 一起使用（因此是示例！），如果这是最好的前进方式，我很乐意将 PHP 集成到解决方案中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:24:13.103

```
SELECT * FROM table WHERE text_field REGEXP '.*P.*H.*P.*' 
```

[文档](http://dev.mysql.com/doc/refman/5.6/en/regexp.html)。_

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T10:22:25.663

使用 MySQL 正则表达式 - 你可以匹配事物，但不能替换 - 例如：

选择“APKHDP”正则表达式（“[PHP]”）

返回“1”（即，正则表达式匹配字符串）。

尽管上面的正则表达式可能不适合您的需要（它匹配任何使用字母 P、H 和 P），但您必须对其进行调整。

你可以让你的正则表达式更复杂，或者你可以做多个匹配：

```
SELECT field FROM TABLE WHERE field REGEXP(match1) AND field REGEXP(match2)..etc 
```

无论您认为哪个最简单...

链接：[REGEXP 的 MySQL 手册](http://dev.mysql.com/doc/refman/5.1/en/regexp.html#operator_regexp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:23:25.957

```
SELECT * 
FROM  `COLUMNS` 
WHERE  `TABLE_NAME` 
REGEXP  'APKHDP' 
```

# android - Android中的显示部分

> ID：11393085
> 
> 赞同：0
> 
> 时间：2012-07-09T10:18:26.333
> 
> 标签：android

我正在从我的数据库中检索数据。在我的数据库中，一个带有价值的字段价格。我检索了数据，我在 a 中显示所有数据`ListView`（其中包含 a `TextView`）。我想要显示格式为`Price:67787`. 但它只显示67787。我搜索了，但我找不到正确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:26:05.307

```
String[] from = new String[] { db.KEY_INCOME};

Add Followin v v v v v v v v v v v

for(int i=0; i<from.length; i++) {

    from[i] = "Price:"+from[i];

}

^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^  ^ ^ ^

int[] to = new int[] {R.id.text1 };

SimpleCursorAdapter notes = new SimpleCursorAdapter(this, R.layout.columnview, c, from, to);

//System.out.println("notes="+notes.getCount());

// setListAdapter(notes); lv.setAdapter(notes); 
```

/* 我认为你正在填充 TextView 的值（在列表视图中）。在那里，你可能已经设置

```
yourTextView.setText(PRICE_FROM_DATABASE); 
```

而是设置如下：

```
yourTextView.setText("Price:"+PRICE_FROM_DATABASE); 
```

*/

# c# - ToUpper() 方法不起作用

> ID：11393088
> 
> 赞同：3
> 
> 时间：2012-07-09T10:18:33.743
> 
> 标签：c#, .net

我正在从服务器传递一条消息，该消息存储到一个名为 strObject 的字符串变量中。我希望将 strObject 中的字符串转换为大写。所以，我使用 ToUpper() 方法。但是，当我添加断点并通过该行时，我的字符串没有被转换为大写。strObject 变量将始终包含文本 Task_status。我希望将其转换为 TASK_STATUS。我错过了什么吗？在下面发布我的相关代码：-

```
public void VerifyValue(String strObject, String strValue, int row)
        {               
            strObject.ToUpper().Trim();
            strValue.ToUpper().Trim();
            switch (strObject)
            {
                case "TASK_STATUS":
                    if (m_taskStatus.taskStatus.ToString() == strValue)
                    {
                        ExcelRecorder(null, row);
                    }
                    else
                    {
                        ExcelRecorder("The value [" + m_taskStatus.taskStatus.ToString() + "] does not match with the given value.", row);
                    }
            }
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T10:19:38.823

`strObject.ToUpper()``string`以大写形式返回 a

使用以下...

```
strObject = strObject.ToUpper().Trim(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T10:20:35.273

A`System.String`是不可变的，因此您必须重新分配，例如：

```
strObject = strObject.ToUpper().Trim(); 
```

所有操作字符串的方法都保持原始字符串不变并返回具有所需内容的**新字符串。**您必须获取该返回值并将其分配给某物。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T10:20:33.367

`string.ToUpper()`返回一个值，使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T10:21:42.823

字符串是不可变的，因此调用字符串上的函数实际上并不会改变字符串。相反，它们返回字符串的修改副本。

这意味着您必须存储函数的返回值，例如存储在原始变量中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T10:20:59.547

这不起作用，因为字符串是不可变的，您必须将值分配回`strObject`

```
strObject = strObject.ToUpper().Trim(); 
```

此外，您的代码中显示的内容也没有做太多`switch`，除非这不是整个代码，否则您可以将其删除。

```
public void VerifyValue(String strObject, String strValue, int row)
{               
     //strObject.ToUpper().Trim();
     //strValue.ToUpper().Trim();
     if(strObject.ToUpper() ==  "TASK_STATUS")
     {
          if (m_taskStatus.taskStatus.ToString() == strValue.ToUpper())
          {
              ExcelRecorder(null, row);
          }
          else
          {
               ExcelRecorder("The value [" + m_taskStatus.taskStatus.ToString() + "] does not match with the given value.", row);
           }
       }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-09T11:15:12.640

# 字符串是不可变的，使用它们时需要记住这一点。

您的方法将值插入到您调用各种工作方法的 strObject 和 strValue 变量中，但这些工作方法不会更改已创建的不可变字符串变量。

尽管原始变量是不可变的，但您仍然可以将新变量（即使名称相同）设置为等于原始变量加上 worker 方法的结果。

所以你真正需要做的就是改变

`strObject.ToUpper().Trim();`

和

`strValue.ToUpper().Trim();`

到

`strObject = strObject.ToUpper().Trim()`

和

`strValue = strvalue.ToUpper().Trim()`

这个答案几乎与我[在这里](https://stackoverflow.com/questions/11583601/datetime-adddays-not-working-as-expected/52719465#52719465)的答案重复，但我认为两者都是正确的。

# jquery - TinyMCE 和 JQuery 对话框：TinyMCE 仅在对话框中 modal:true 时读取

> ID：11393090
> 
> 赞同：4
> 
> 时间：2012-07-09T10:18:38.647
> 
> 标签：jquery, tinymce, modal-dialog, jquery-dialog

我在 Dialog 插件中使用 TinyMCD 插件。

一切正常，直到我将对话框的 modal 参数设置为 true。当我这样做时，TinyMCE textarea 仅在第一次打开对话框然后变为只读时才能正常工作。

这是我的代码示例：

```
tinyMCE.init({ mode: 'none' });
        var dlgComments = $('#dlgInternalComments');
        if (dlgComments.length == 0)
        {
            dlgComments = $('<div/>').attr('id', 'dlgInternalComments'),
                txtAreaComments = $('<textarea/>').attr('id', 'txtInternalComments').appendTo(dlgComments);

            dlgComments.dialog({
                height: 300,
                width: 800,
                modal:true,
                open: function ()
                {
                    if ($('#txtInternalComments_parent', $(this)).length == 0)
                    {
                        var ddd = {mode:'none'}; //$.extend({}, Globals.RichTextBox, { mode: 'none' });
                        txtAreaComments.tinymce(ddd);
                    }
                },
                buttons: {
                    'Parse': function ()
                    {
                        processAuthorsParagraph();
                        $(this).dialog('close');
                    }
                }
            });
        }
        else
        {
            dlgComments.dialog('open');
        } 
```

我不知道如何解决这个问题。我从这里尝试了一些建议：http: [//www.codestumps.com/2011/05/adding-tinymce-into-a-jquery-ui-dialog/](http://www.codestumps.com/2011/05/adding-tinymce-into-a-jquery-ui-dialog/)但我还没有找到解决方案。

如果你能帮助我，非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:00:10.120

问题已解决，这是完整的工作代码：

```
function removeTinyMCE () {
    tinyMCE.execCommand('mceFocus', false, 'dialog-modal');
    tinyMCE.execCommand('mceRemoveControl', false, 'dialog-modal');
}

function addTinyMCE() {
    jQuery('#dialog-modal').tinymce({
        script_url: '/js/tiny_mce_3.2.7_jquery/jscripts/tiny_mce/tiny_mce.js',
        width: "800px",
        mode: "textarea",
        theme : "simple",
    });
}

function addAuto()
{
    $('#dialog-modal').dialog({
        autoOpen: true,
        modal: true,
        title: "Email Dialog",
        open: addTinyMCE,
        close: function() {
            removeTinyMCE();
            $(this).dialog('destroy');
        },
        buttons:  {
            'Cancel': function() {
                processAuthorsParagraph();
                removeTinyMCE();
                $(this).dialog('destroy');   
            }
        }
    });
} 
```

对话框的 html 是：

```
<div style="display: none"; id="dialog-modal" title="Basic modal dialog" style="display: none" ></div> 
```

# javascript - 在 c# 中使用 javascript 日历设置值后如何获取文本框的文本？

> ID：11393093
> 
> 赞同：0
> 
> 时间：2012-07-09T10:18:45.233
> 
> 标签：javascript, asp.net, c#-2.0

我有一个 asp:TextBox 控件和一个与之关联的 javascript 日历函数。

```
<asp:TextBox ID="txtFromDate" ReadOnly="true" runat="server" style="font-family:Verdana; font-size:11px;"></asp:TextBox>
<a href="javascript: void(0);" onmouseover="if (timeoutId) clearTimeout(timeoutId);window.status='Show Calendar';return true;" onmouseout="if (timeoutDelay) calendarTimeout();window.status='';" onclick="g_Calendar.show(event,'formAddCosting.txtFromDate',false); return false;">
<img src="Images/calendar.gif" name="calendarFromDate" width="34" border="0" alt="" /></a> 
```

我可以从 javascript 日历中选择日期并将其显示在文本框中。但是，当我尝试检查文本框的日期以在后面的代码中进行验证时，会在调试期间`dtFrom = Convert.ToDateTime(txtFromDate.Text.ToString());`显示。`""`如何从后面的代码中获取文本框的值？我正在使用 VB2005、ASP.Net2.0 和 C#。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:33:08.540

采取以下步骤从 TextBox 中获取价值：

1.  从文本框中删除`ReadOnly="false"`属性，因为这是您无法获取文本框值的唯一原因。原因是当使用 ReadOnly="true" 或 Enabled="false" 时，您的 texytbox 的值不会保留在视图状态中。

2.  要在年龄加载函数的文件后面的代码中使文本框只读，请编写以下代码：

    txtFromDate.Attributes.Add("readonly","re​​adonly");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:26:16.243

那是因为你`TextBox`是只读的：http: [//www.codeproject.com/Articles/33649/ViewState-and-Readonly-Property-of-Textbox](http://www.codeproject.com/Articles/33649/ViewState-and-Readonly-Property-of-Textbox)

因此，要么启用并验证它（如果用户想手动输入日期），要么使用 a`HiddenField`来存储日历中的日期。

我会推荐第一个选项，因为最好不要像对待孩子一样对待用户。

# javascript - window.frames.length 在 chrome 和 Firefox 浏览器中返回 0

> ID：11393095
> 
> 赞同：1
> 
> 时间：2012-07-09T10:18:48.643
> 
> 标签：javascript, html, firefox, google-chrome

我在 Chrome 和 firefox 上有这个问题，函数**crse_FrameExists()中的****window.frames.length**总是返回零，而实际上它应该返回值 3 和 true 才能继续。我在 IE9 上没有问题。有谁知道为什么会这样。任何解决方法都会很有用...谢谢，下面的代码片段：

 **```
alert(window.frames.length); 
```

在 IE 中返回 0 假设为 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:34:34.923

将您`frameset`的放在`head`或 中是违法的`body`。

把它直接放在`head`（不带`body`）之后，你会没事的。

例如 ：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <script>
        function crse_FrameExists(frameName){
            for (i = 0; i < window.frames.length; i++) {
                if (window.frames[i].name == frameName) return(true);
            }
            return(false);
        }
        window.onload=function(){
            alert("crse_FrameExists('fra_header'):" + crse_FrameExists('fra_header') );
        };
    </script>
</head>
    <frameset id="Nav4mainFrameset" framespacing="0" border="false" frameborder="0" rows="76,*">
        <frame name="fra_minimain" id="fra_minimain" scrolling="no" noresize src="index2.html">
        <frameset cols="188,*">
            <frame name="fra_header" id="fra_header" scrolling="no" noresize src="index2.html">
            <frame name="fra_content" id="fra_content" scrolling="auto" noresize src="index2.html">
        </frameset>
    </frameset>
</html> 
```

不要忘记使用`http://`而不是`file://`为您的测试打开您的页面，因为 Chrome 的安全模型将每个文件视为一个域。

并且不要放入`for="window" event="onload()"`您的脚本元素：这不是规范化的，并且不适用于非 MS 浏览器。您必须像我的示例中那样使用标准的加载解决方案。**

# asp.net - 使用通配符匹配 xpath 中的属性

> ID：11393111
> 
> 赞同：8
> 
> 时间：2012-07-09T10:19:45.453
> 
> 标签：asp.net, xpath

我正在开发一个基于 .net 2.0 的 asp.net 应用程序。

我在处理 XML 时遇到了一些问题。

假设我有这样的 XML：

```
<person name="xxxyx" age="32" />

<person name="zzz" age="32" />

<person name="yyyxx" age="32" /> 
```

现在我想选择名字包含的人`yx`

如何使用 xpath 来实现它？

我只知道这个表达式会匹配名字正好是“yx”的人：

```
"//person[name='yx'"]" 
```

如何进行模糊搜索？

顺便说一句，任何想法通过指定属性（如“名称”）对匹配的人进行排序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T11:13:22.187

像@Utkanos 建议`//person[contains(@name, 'yx')]`的应该匹配你想要的节点。

至少据我所知，XPath 本身没有能力也不打算在节点上提供顺序，而是返回节点集，它们是“没有重复的节点的无序集合”（参见[1](https://stackoverflow.com/a/5598641/948404)和注释）。[然而，在 2.0 版中，这2](http://www.ximeco.org/Xime/XPathCanSortHlousek.pdf)版可能会有一些我不熟悉的更改。

假设排序应该在 XSL 转换中完成，您可以`<xsl:sort />`像这样使用：

```
<xsl:apply-templates select="//person[contains(@name, 'yx')]">
    <xsl:sort select="@name" />
</xsl:apply-templates> 
```

这里记录了更多属性：http `<xsl:sort />`: [//www.w3.org/TR/xslt#sorting](http://www.w3.org/TR/xslt#sorting)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T10:22:40.927

使用该`contains()`功能。

```
//person[contains(@name, 'yx')] 
```

另外，请注意您需要`@`在前面，`name`因为它是一个属性。

**[演示](http://www.xmlplayground.com/8aC98G)。**

# android - 免费版和付费版共享偏好

> ID：11393113
> 
> 赞同：0
> 
> 时间：2012-07-09T10:19:49.227
> 
> 标签：android, android-sharedpreferences

只是一个简单的问题...我有一个免费和付费版本的应用程序。用户数据使用共享首选项存储。目前，我只是在两个版本中使用相同的包名称，因此当用户升级时，它将从相同的 sharedpreferences 中读取。目前它似乎工作正常，但我只是不知道这样做是否可以。

所以基本上就是想问一下我上面用的方法好不好，你预测这样升级会不会有数据丢失的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:30:06.930

`SharedPreferences`用户可以在应用程序设置中轻松删除，也`SharedPreferences`可以在卸载时删除所有其他数据。

在您的情况下，最好的方法是将文件保存在 SD 卡上，其中包含有关应用程序状态的信息。

# python - Django/Python：电子邮件回复已更新到站点

> ID：11393114
> 
> 赞同：5
> 
> 时间：2012-07-09T10:19:52.837
> 
> 标签：python, django, email

我目前正在开发的 Django 站点会在内容更新时发送电子邮件。

我想添加的一个功能是用户可以回复这些邮件，即评论某个主题。然后，此回复会在页面上显示为更新。

解决这个问题的好方法是什么？有没有可以插入的模块？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T10:44:28.773

首先，您需要能够接收邮件并在这样做时调用 python 函数。有多种方法可以做到这一点：

*   使用 Python 内置的[poplib](http://docs.python.org/library/poplib.html#pop3-example)定期检查您的邮箱
*   一些虚拟主机，尤其是 Webfaction，允许您在收到邮件时自动调用 python 脚本，通过他们称为 mail2script 的东西
*   [其他主机建议使用Mailgun](http://mailgun.net)或[Postmark](http://postmarkapp.com/)等第三方服务。这取决于你的需求，真的。

一旦您收到邮件并能够在此事件中调用 python 脚本，只需将注释添加到 Django 模型中的正确线程即可。

但是，在考虑构建此功能时，您还应该考虑使其更安全的方法（众所周知，电子邮件很容易伪造）-您不希望随机的人能够像其他人一样发表评论。这并不是那么容易做到的，但唯一的电子邮件回复 ID 是一种相当直接的方式（但绝不保证安全）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T08:56:42.860

我在从事类似项目时遇到的一些基本问题，以防有任何帮助：

**发送电子邮件**：我开始使用 Django`send_mail`和`send_mass_mail`子进程，但我现在切换到[django-mailer](https://github.com/pinax/django-mailer)和 cron 条目，以便我们能够正确管理邮件队列并记录发送的内容等。您可以从[Pinax](http://pinaxproject.com/)项目很有用：http: [//pinaxproject.com/ecosystem/](http://pinaxproject.com/ecosystem/)，比如用于通知的一个或另一个用于电子邮件确认的。

**获取电子邮件**：正如@herman-schaaf 所建议的那样，我正在使用 poplib，加上一个 cron 条目以每隔几分钟检查一次邮件。我会记录使用他们的 UIDL 下载的所有电子邮件，以便检查它们是否已经被处理。

**注意循环**：您可能希望使用与 From 地址不同的 Return-Path。为了防止泛滥，我还设置了检查以阻止任何用户在单次迭代中提交超过*x*封邮件，或者每次迭代超过*n*封邮件。

**日期和时间**：您可能还希望从电子邮件中解析发送日期以跟踪插入，而不是使用`datetime.now()`或`timezone.now()`因为您可以接收几分钟前发送的电子邮件。我猜你将不得不像我们一样处理时区。我们在 Django 版本 1.4 可用时切换到它，它比以前的版本更容易处理时区感知日期时间（[请参阅此处的发布说明](https://docs.djangoproject.com/en/dev/releases/1.4/#support-for-time-zones)），并将其与存储感知日期时间的 PostgreSQL 结合使用。Pinax 还有一个应用程序来简化用户时区本地化的实施。

**伪造电子邮件**：在我们的案例中，由于应用程序的封闭性，我们并不担心伪造电子邮件，但我们会通知所有更新票证的参与者，包括创建者收到创建本身的通知，因此每个人至少可以注意到如果他/她被冒充（您可以在通知电子邮件中包含管理员的电子邮件地址，用户可以报告任何可疑活动）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:34:33.953

[在这里](https://docs.djangoproject.com/en/dev/topics/email/?from=olddocs/)查看 django.core.mail 模块...

```
from django.core.mail import send_mail

send_mail('Subject here', 'Here is the message.', 'from@example.com',
    ['to@example.com'], fail_silently=False) 
```

[或在此处](https://stackoverflow.com/q/6367014/430408)查看此帖子...

# c# - WPF中的动态控制

> ID：11393116
> 
> 赞同：1
> 
> 时间：2012-07-09T10:20:00.223
> 
> 标签：c#, wpf

我正在尝试以 WPF 表单创建动态控件（标签和组合框），并相应地安排它们。这样做的最佳做法是什么，以及如何调整窗口大小以适应控件的增长？

```
public MainWindow()
    {
        MyEntities db = new MyEntities();
        InitializeComponent();
        var ID = db.Courses.Where(f => f.CourseId!=null).ToList();
        foreach (var c in ID) 
        {
            ComboBox c = new ComboBox();                
            this.stackpanel.Children.Add(c);
        }
    } 
```

XAML

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">

    <StackPanel Name= "stackpanel"/>     
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:44:43.743

您可以声明 ItemsControl 并提供项目模板：

```
 <ItemsControl ItemsSource="{Binding Collection}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Name}" />
                 <ComboBox ... />
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

正如 Batuu 建议的那样，您可以使用 ListView 等其他控件来获得额外的行为。

对于随控件列表一起增长的窗口，您可以使用 LPL 在评论中建议的 Window.SizeToContent 属性。

```
<Window x:Class="WpfApplication2.MainWindow"
    ...
    SizeToContent="Height"> 
```

[此处](http://msdn.microsoft.com/en-us/library/system.windows.sizetocontent.aspx)描述了可用的选项。

# mysql - 从特定时期抓取行时最简单的时间戳类型？

> ID：11393119
> 
> 赞同：0
> 
> 时间：2012-07-09T10:20:17.053
> 
> 标签：mysql, datetime, unix-timestamp

我在表中有一个列，我想在行更改或第一次插入时自动更新它。我已将其设置为使用该`UNIX_TIMESTAMP`函数，因为当我想获取至少一周前的所有行或者是否有更简单/更好的方法时，我发现这是最简单的。

我可以使用`datetime`or`timestamp`类型，但我不确定如何检索 7 天或更早的行。

我知道我只是将`DEFAULT`设置设置为相应的功能，例如`UNIX_TIMESTAMP`自动更新！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:20:10.257

最简单的方法是让你的专栏像这样：

```
CREATE TABLE foo(
whatever_id int auto_increment,
myTS timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY(whatever_id)
); 
```

这样，每当您在行中出现任何内容时，myTS 都会自动更新为当前日期。CURRENT_TIMESTAMP 的默认值是可选的。唯一的缺点是 MySQL 只允许表中的一列拥有`DEFAULT`或`ON UPDATE`拥有`CURRENT_TIMESTAMP`. 但是有一些变通方法，而且现在已经走得太远了。询问您是否需要知道。

然后，当您想要 7 天或更早的行时，您可以

```
SELECT
*
FROM foo
WHERE
DATEDIFF(CURDATE(), myTS) >= 7
/*or
DATEDIFF(CURDATE(), myTS) >= DATE_SUB(NOW(), INTERVAL 1 WEEK)
*/ 
```

[在此处](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)阅读有关`DATEDIFF`功能的更多信息。

或者另一种方式是

```
SELECT
*
FROM foo
WHERE
DATE_ADD(myTS, INTERVAL 1 WEEK) <= CURDATE() 
```

`DATE_ADD`您可以在与上述相同的链接下阅读有关功能的更多信息。

当然，也可以简单地手动选择日期：

```
SELECT
*
FROM foo
WHERE
myTS < '2012-07-02' 
```

But note, that a `timestamp` column consists of date **and** time value. So when you write something like query above it's implicitly `'2012-07-02 00:00:00'`. So if you want to have something like `<= 2012-07-02 (the whole day)` you have to write `<= '2012-07-02 23:59:59'`. Wanted to add that, just in case this leads to confusion.

# r - 控制 ggplot2 图例显示顺序

> ID：11393123
> 
> 赞同：79
> 
> 时间：2012-07-09T10:20:31.277
> 
> 标签：r, ggplot2

有谁知道我如何控制ggplot2中图例的顺序？

从我可以看到的顺序出现与实际比例标签而不是比例声明顺序有关。更改比例标题会改变排序。我用菱形数据集做了一个小例子来强调这一点。我正在尝试将 ggplot2 用于一系列绘图，并且我想让一个变量出现在它们的右侧。目前，尽管这只发生在其中一些中，但我不知道如何在保留适当比例标签的同时强制执行我想要的排序。

```
library(ggplot2)
diamond.data <- diamonds[sample(nrow(diamonds), 1000), ]
plot <- ggplot(diamond.data, aes(carat, price, colour = clarity, shape = cut)) +
  geom_point() + opts(legend.position = "top", legend.box = "horizontal")
plot # the legend will appear shape then colour 
plot + labs(colour = "A", shape = "B") # legend will be colour then shape
plot + labs(colour = "Clarity", shape = "Cut") # legend will be shape then colour 
```

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-07-09T15:14:00.263

在 0.9.1 中，确定图例顺序的规则是**秘密**且**不可预测**的。现在，在 github 的 0.9.2 开发版本中，您可以使用该参数来设置图例的顺序。

这是示例：

```
plot <- ggplot(diamond.data, aes(carat, price, colour = clarity, shape = cut)) +
  geom_point() + opts(legend.position = "top")

plot + guides(colour = guide_legend(order = 1), 
              shape = guide_legend(order = 2)) 
```

![在此处输入图像描述](../Images/2989cf66bfe7aea79886995c819aba0d.png)

```
plot + guides(colour = guide_legend(order = 2), 
              shape = guide_legend(order = 1)) 
```

![在此处输入图像描述](../Images/efdeb30ae215406c4ae81a37b489b279.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-09T10:34:31.913

在我看来，图例的顺序是由刻度名称中的字符数决定的。（是的，我同意，这看起来很奇怪。）

因此，一种解决方法是用空格填充标签：

```
plot + labs(colour = "Clarity", shape = "      Cut") 
```

![在此处输入图像描述](../Images/f7152dbf31315be5fe53c9dae75c58be.png)

* * *

我真诚地希望有人尽快发布适当的解决方案！

# actionscript-3 - 是否可以在任何自定义文件夹中使用 Air2 或 Air2.5 保存文件？

> ID：11393126
> 
> 赞同：0
> 
> 时间：2012-07-09T10:20:37.580
> 
> 标签：actionscript-3, file, air, save, directory

我的 Air 2.5 应用程序需要在一些自定义文件夹中保存一些文本文件。

目前我正在使用文档文件夹来保存文件（使用 FileStream），效果很好。但我需要将它保存在任何文件夹中。

有没有办法将文件保存在任何目标文件夹中？（使用文件流）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:35:47.663

自 1.5 以来，根据[Adob​​e AIR 文档的说法：](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7e5b.html)

> 除非对用户的计算机有管理员限制，否则 AIR 应用程序有权写入用户硬盘驱动器上的任何位置。

另请阅读[面向开发人员的最佳安全实践](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7e59.html)。

例如，您可以使用以下命令进入桌面：

```
File.desktopDirectory.resolvePath(your_path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:36:42.007

如果您有管理员权限，您可以将文件保存在任何地方，但不能保存在 File.ApplicationDirectory 中（您将遇到安全错误）。

但是有一个技巧：

```
var fs : FileStream = new FileStream;
var errorFile : File = File.applicationDirectory.resolvePath("foo.txt");

try{
    // Error
    fs.open(errorFile, FileMode.WRITE);
}catch(e:Error){
    trace("Security error");
}

var okFile : File = new File(File.applicationDirectory.resolvePath("foo.txt").nativePath);

// No error
fs.open(okFile, FileMode.WRITE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:16:33.017

我有工作的解决方案。它将文件保存到您的目标文件夹。它可能会帮助你。

```
/*Requires AIR 2.5 (May be AIR 2.0\. I have not tested) and Flash CS6.*/
import flash.filesystem.*;
import flash.utils.ByteArray;

//Sample XMl
var xml:XML = <audio>song1.mp3</audio>;
var outputString:String = '<?xml version="1.0" encoding="utf-8"?>\n';
outputString +=  xml.toXMLString();
outputString = outputString.replace(/\n/g,File.lineEnding);

//Byte array
var xmlData:ByteArray = new ByteArray();
xmlData.writeUTFBytes(outputString);

//Targeted custom folder
var urlStr:String = "file:///D:/Temp/"; // you can get this URL from external text file
var audioXMLFile:File = new File();
audioXMLFile.url = urlStr;
audioXMLFile = audioXMLFile.resolvePath("SongList.xml");

//File stream
var outStream:FileStream = new FileStream();
outStream.addEventListener(Event.CLOSE, dataSaved, false, 0, true);
outStream.addEventListener(OutputProgressEvent.OUTPUT_PROGRESS, savingProgress, false, 0, true);

//open output file stream in WRITE mode
outStream.openAsync(audioXMLFile, FileMode.WRITE);

//write out the file
outStream.writeBytes(xmlData, 0, xmlData.length);

//Saving progress
function savingProgress(e:OutputProgressEvent):void
{
    if (e.bytesPending == 0)
    {
        //Close stream on save
        e.target.close();
    }
}

// 
function dataSaved(e:Event):void
{
    trace("File Saved");
} 
```

# android - 在 Android 3.0 中，图像没有显示在 webview 中？

> ID：11393128
> 
> 赞同：0
> 
> 时间：2012-07-09T10:20:46.007
> 
> 标签：android, android-webview

我正在使用以下代码显示超过 1,000x1,000 的图像，存储在我项目的 assets 文件夹中。要启用缩放控件，我想在 WebView 中显示它。

我的代码：

```
public class ImageActivity extends Activity {
  String html_data;
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    loadHTML();
  }
  public void loadHTML() {
    final String mimeType = "text/html";
    final String encoding = "utf-8";
    final String html = "<h1>Header</h1><p>Custom HTML</p><p><img src=\\"
      + "file:///android_asset/africa.png\\/></p>";
    WebView wv = (WebView) findViewById(R.id.mapview);
    wv.loadDataWithBaseURL("fake://not/needed", html, mimeType, encoding,"");
  }
} 
```

还有我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">
<WebView
  android:id="@+id/mapview"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:gravity="center" />
</LinearLayout> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:43:00.403

将图像的路径更改为：

```
String html = "<h1>Header</h1><p>Custom HTML</p><p><img src=\"file:///android_asset/africa.png\"/></p>"; 
```

请确保您的项目资产文件夹下有 africa.png。

# visual-c++ - Java EE 与旧版 C++ 应用程序的集成

> ID：11393132
> 
> 赞同：2
> 
> 时间：2012-07-09T10:21:03.230
> 
> 标签：visual-c++, jakarta-ee, java-native-interface, jca

我正在开发一个 Java EE Web 应用程序，它应该与旧版 Visual C++ 应用程序（.dll 文件）集成以应用一些业务逻辑（使用 .dll 函数）。

谁能指出如何实施这种方法。我已经进行了一些谷歌搜索，并阅读了有关 JCA 和 JNI 的信息，但不能保证 JNI 在应用程序服务器上正常运行。

我有点没有明确的方向。谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:07:28.903

考虑将 .dll 包装在将 .dll 方法公开为服务的 c++ 应用程序中。

它不一定是 SOAP Web 服务，但可以是轻量级的东西，例如基于 ZeroMQ 的协议缓冲区。我认为这种方法更具可测试性和可维护性，因为您不会引入 JNI 复杂性，而您最终编写的 C++ 只是一个很小的服务包装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:25:58.453

您可以使用 JNI 来满足您的要求。您的想法并不复杂。使用 JBOSS 应用程序服务器您可以编写一个 java 应用程序，在其中加载您的 c++ dll 并通过 JNI 连接它。最近的大多数应用程序都使用 JNI 来使用本机实现已被长期写回以避免重新实现。

# matlab - 使用 Numpy 进行类似 MATLAB 的数组索引

> ID：11393140
> 
> 赞同：11
> 
> 时间：2012-07-09T10:21:40.490
> 
> 标签：matlab, numpy, python-3.x

在 MATLAB 和 Numpy 中，数组都可以由数组索引。但是，行为是不同的。让我通过一个例子来解释这一点。

MATLAB：

```
>> A = rand(5,5)

A =

    0.1622    0.6020    0.4505    0.8258    0.1067
    0.7943    0.2630    0.0838    0.5383    0.9619
    0.3112    0.6541    0.2290    0.9961    0.0046
    0.5285    0.6892    0.9133    0.0782    0.7749
    0.1656    0.7482    0.1524    0.4427    0.8173

>> A([1,3,5],[1,3,5])

ans =

    0.1622    0.4505    0.1067
    0.3112    0.2290    0.0046
    0.1656    0.1524    0.8173 
```

麻木：

```
In [2]: A = arange(25).reshape((5,5))

In [3]: A
Out[3]: 
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24]])

In [6]: A[[0,2,4], [0,2,4]]
Out[6]: array([ 0, 12, 24]) 
```

换句话说：MATLAB 选择行和列，Numpy “压缩”两个索引数组并使用元组指向条目。

如何使用 Numpy 获得 MATLAB 行为？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-09T11:14:19.303

您可以使用辅助函数[`numpy.ix_`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ix_.html)来获取 Matlab 行为：

```
from numpy import ix_
A[ ix_( [0,2,4], [0,2,4] ) ] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-09T10:52:05.283

你可以这样做：

```
A[[0,2,4],:][:,[0,2,4]] 
```

这将给出您想要的类似 MATLAB 的结果。

值得一提的是，如果您使用切片进行索引，那么您将获得类似 MATLAB 的结果，而不需要任何此类骇客：

```
>>> A[1:3,1:3]
array([[ 6, 7],
       [11,12]]) 
```

在 numpy 中，与 MATLAB 不同，`1:3`它不仅仅是缩写`[1,2]`或类似的东西。（此时我觉得有必要提及您肯定已经知道的事情，即 Python`1:3`有点像`[1,2]`，而 MATLAB 有点像`[1,2,3]`：右侧端点包含在 MATLAB 中，而排除在 Python 中。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T20:21:36.657

使用 numpy 执行此操作的有效方法是重塑索引数组以匹配它们索引的轴，即

```
In [103]: a=numpy.arange(100).reshape(10,10)

In [104]: a
Out[104]: 
array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9],
   [10, 11, 12, 13, 14, 15, 16, 17, 18, 19],
   [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],
   [30, 31, 32, 33, 34, 35, 36, 37, 38, 39],
   [40, 41, 42, 43, 44, 45, 46, 47, 48, 49],
   [50, 51, 52, 53, 54, 55, 56, 57, 58, 59],
   [60, 61, 62, 63, 64, 65, 66, 67, 68, 69],
   [70, 71, 72, 73, 74, 75, 76, 77, 78, 79],
   [80, 81, 82, 83, 84, 85, 86, 87, 88, 89],
   [90, 91, 92, 93, 94, 95, 96, 97, 98, 99]])

In [105]: x=numpy.array([3,6,9])

In [106]: y=numpy.array([2,7,8])

In [107]: a[x[:,numpy.newaxis],y[numpy.newaxis,:]]
Out[107]: 
array([[32, 37, 38],
      [62, 67, 68],
      [92, 97, 98]]) 
```

Numpy 的广播规则是你的朋友（而且比 matlab 好得多）......

高温高压

# android - 更改按钮单击android上的imageview

> ID：11393142
> 
> 赞同：0
> 
> 时间：2012-07-09T10:21:43.490
> 
> 标签：android

单击按钮时，我正在尝试更改图像。目前处于学习曲线中，因此无法确定其失败的原因。

这是我的代码：

```
public class Main extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button changeMebtn = (Button) findViewById(R.id.changeMe);

    changeMebtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ImageView image = (ImageView) findViewById(R.drawable.amsterdam);
            image.setImageResource(R.drawable.lima);
        }
    });

} 
```

}

XML:

```
 <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/amsterdam" />

    <Button
        android:id="@+id/changeMe"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Change Me" 
        android:layout_gravity="center"/> 
```

当我单击按钮时，我目前收到一般错误。

有人可以告诉我我在这里做错了什么......？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T10:22:44.083

利用

```
 ImageView image = (ImageView) findViewById(R.id.imageView1);
            image.setImageResource(R.drawable.lima); 
```

代替

```
 ImageView image = (ImageView) findViewById(R.drawable.amsterdam);
            image.setImageResource(R.drawable.lima); 
```

因为您的图像 ID 是 xml 中的 imageView1 而不是 amsterdam

和第二点使用`R.id.imageView1`而不是`R.drawable.amsterdam`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T10:23:53.930

利用：

```
ImageView image = (ImageView) findViewById(R.id.imageView1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-17T16:18:14.717

```
ImageView image = (ImageView) findViewById(R.id.imageView1); 
```

# asp.net-mvc - 基于Id的实体框架join

> ID：11393144
> 
> 赞同：1
> 
> 时间：2012-07-09T10:21:50.667
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我一般从 asp.net mvc3 和 mvc 开始，同时我也在学习实体框架。

我正在构建的应用程序允许用户为其他用户创建账单或付款，我不确定在编写查询时如何为账单和帐户类创建关系。我遇到的问题是我将 accountId 存储在数据库中，但是我想从 toAccountId 和 fromAccountId 中显示用户的名字和姓氏。

课程

```
public class Bill
{
    public int BillId { get; set; }
    public string BillName { get; set; }
    public string BillDescription { get; set; }
    public decimal Price { get; set; }
    public DateTime DateCreated { get; set; }
    public DateTime? DateDue { get; set; }
    public int FromAccountId { get; set; }
    public int ToAccountId { get; set; }
}

public class Account
{
    public int AccountId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string MobilePhone { get; set; }
    public string BankAccountNumber { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    public DateTime LastLogin { get; set; }
}

public class HomeViewModel
{
    public IEnumerable<Bill> Bills { get; set; } 
} 
```

在控制器中

```
private IBillRepository repository;
public ViewResult Home()
{
    int userID = 1;
    HomeViewModel viewModel = new HomeViewModel
    {
        Bills = repository.Bills
            .OrderByDescending(b => b.DateCreated)
            .Where(b => b.FromAccountId.Equals(userID))
            .Take(amountOfBillsOnPageOnLoad)
    };
    return View(viewModel);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:44:18.300

这可能会有所帮助 // 使用导航属性

```
public class Bill
{
    public int BillId { get; set; }
    public string BillName { get; set; }
    public string BillDescription { get; set; }
    public decimal Price { get; set; }
    public DateTime DateCreated { get; set; }
    public DateTime? DateDue { get; set; }
    public int FromAccountId { get; set; }
    public int ToAccountId { get; set; }

    public Account Accounts { get; set; }  // Navigation Property to the Account
} 
```

在您看来，您可以像这样访问 Account 对象属性。

```
@model.Accounts.FirstName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:29:24.407

就像是...

```
 Bills = repository.Bills.Include("Account")
            .OrderByDescending(b => b.DateCreated)
            .Where(b => b.FromAccountId.Equals(userID))
            .Take(amountOfBillsOnPageOnLoad) 
```

...应该让你去。请注意使用“包含”将数据从相关表中提取到查询中。您也可以使用这种语法（实际上可能是首选）`.Include(b => b.Account)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:04:43.427

你可以这样做，

```
 public class Bill
    {
        public int BillId { get; set; }
       //...........
        public Account FromAccount { get; set; }
        public Account ToAccount { get; set; }
        public int FromAccountId { get; set; }
        public int ToAccountId { get; set; }
    }

    public class Account
    {
        public int AccountId { get; set; }
     //..............
    } 
```

# mongodb - Schema - 图表创建者 mongodb

> ID：11393147
> 
> 赞同：14
> 
> 时间：2012-07-09T10:22:21.990
> 
> 标签：mongodb, graphics, schema, database

我需要用我的数据库的所有模型创建一个模式。我将 ROR 与**mongodb**一起使用。

我实际上正在寻找一种工具来绘制这样的东西：

![http://talks.php.net/presentations/slides/mongodb/blog2.png](../Images/dc3279c4a60b0c404fade2beda525125.png)

有什么建议吗？还是我必须打开油漆并适应？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-17T15:45:34.330

[http://www.draw.io/](http://www.draw.io/)

draw.io 是一个免费的在线图表应用程序，围绕 Google Drive 设计，用于工作流、BPM、组织结构图、UML、ER、网络图等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-19T12:27:00.453

[http://www.gliffy.com/](http://www.gliffy.com/)

今天我正在使用 Glyffy。我采用了像你这样的模型作为建模，在glyffy中实现的巨大优势可以直接在Google Drive中使用，可以与其他用户共享模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:35:22.017

我建议使用 Visio，因为它更灵活。如果其目的只是做代表人物 Visio 甚至 Dia 应该做必要的帮助。如果您想从中开发模型，那将是不可能的。

# mysql - mySQL 多表选择超过 3 个表

> ID：11393151
> 
> 赞同：1
> 
> 时间：2012-07-09T10:22:35.200
> 
> 标签：mysql

给定下表中的 PAGE_ID，我将如何编写一条 SQL 语句来提取 TEMPLATE_NAME (TEMPLATES) 和所有 AREA_NAME (TEMPLATE_AREAS)：

![在此处输入图像描述](../Images/065f29e2c0eaae632cb171cb31fa960f.png)

对不起，如果这很容易。我对此很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:26:52.093

```
select t.TEMPLATE_NAME, a.AREA_NAME
from page_versions p
inner join templates t on t.template_id = p.template_id
inner join template_areas a on a.template_id = t.template_id
where p.page_id = 123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:33:15.573

```
SELECT T.TEMPLATE_NAME, A.AREA_NAME
FROM PAGE_VERSIONS P
LEFT JOIN TEMPLATES T ON T.TEMPLATE_ID = P.TEMPLATE_ID
LEFT JOIN TEMPLATE_AREAS A ON A.TEMPLATE_ID = P.TEMPLATE_ID
WHERE P.PAGE_ID = yourPageId; 
```

# c# - 在 C# 中列出 excel 工作簿连接

> ID：11393152
> 
> 赞同：3
> 
> 时间：2012-07-09T10:22:39.773
> 
> 标签：c#, excel, com, connection

我想在 C# 中列出一个 excel 文件的连接。使用 COM 接口，我可以打开 excel 文件，但是如何找到参考？ ![在此处输入图像描述](../Images/aca26f0d5824091cc13688e37c0201ab.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T16:55:43.667

我不确定如何在 C# 中执行此操作，但这可能会让您走上正确的道路。在 Excel VBA 中，您可以循环浏览工作簿对象内的 .Connections 属性。

这是一个打印到调试窗口的所有连接的示例：

```
Dim conn As WorkbookConnection
For Each conn In ActiveWorkbook.Connections
    Debug.Print conn.Name
Next conn 
```

# jquery - Ajax 在 Chrome 扩展程序中不起作用？

> ID：11393154
> 
> 赞同：0
> 
> 时间：2012-07-09T10:22:41.820
> 
> 标签：jquery, xml, ajax, google-chrome, google-chrome-extension

我正在尝试编写一个示例扩展，这就是它应该如何工作的。我的扩展程序有一个选项页面，当人们单击登录按钮时，它会向 test.php 发送一个 ajax 请求并获取信息以提醒用户。但它不起作用，我不知道为什么。这是我的文件夹结构

```
chrome 

  \ manifest.json
  \ options.html
  \ options.js
  \ test.php 
```

在 options.html 中

```
<div class="login-button" id="login-button">Sign in</div> 
```

在 options.js 中

```
 $(document).ready(function(){  
    alert('hello');
    $('#login-button').click(function() {
        loginAjax();
    });
 })
 function loginAjax() {
    $.ajax({
       url: 'test.php',
       data: "",
       dataType: 'json',
       success: function(data) {
          alert(data);
       }
    });
 } 
```

在 Ajax URL 中，我尝试放置一个绝对路径，但它不起作用。

提前致谢。

**编辑：它已经工作了，我不知道：-D**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:50:55.243

你必须使用 Cross-Origin XMLHttpRequest 而不是 jquery 查看更多[http://code.google.com/chrome/extensions/xhr.html](http://code.google.com/chrome/extensions/xhr.html)

# android - OpenGL ES 光镜面渲染仅在对象的一半上

> ID：11393156
> 
> 赞同：2
> 
> 时间：2012-07-09T10:22:45.083
> 
> 标签：android, opengl-es, xamarin.android, opentk, opengl-es-lighting

我正在关注适用于 Android 的 Pro OpenGL ES 一书，并试图让镜面反射正确渲染。这是正在发生的事情：

![奇怪的镜面反射](../Images/22c16e9672a962bcb24facb991876a24.png)

我正在使用 OpenTK 的 ES11.GL。

这是我的照明代码：

```
float[] pos = { -14.0F, 7.0F, -50.0F, 1.0F };

float[] white = { 1.0f, 1.0f, 1.0f, 1.0f };
float[] red = { 1.0f, 0.0f, 0.0f, 1.0f };
float[] green = { 0.0f, 1.0f, 0.0f, 1.0f };
float[] blue = { 0.0f, 0.0f, 1.0f, 1.0f };
float[] grey = { 0.2f, 0.2f, 0.2f, 1.0f };

GL.LightModel(All.LightModelAmbient, grey);

GL.Light(Sunlight, All.Position, pos);
GL.Light(Sunlight, All.Diffuse, white);
GL.Light(Sunlight, All.Specular, red);
GL.Light(Sunlight, All.Ambient, blue);

GL.Material(All.FrontAndBack, All.Specular, red);
GL.Material(All.FrontAndBack, All.Diffuse, green);
//GL.Material(All.FrontAndBack, All.Shininess, 5.0F); -- disabled for testing

GL.ShadeModel(All.Smooth);
GL.Enable(All.Lighting);
GL.Enable(Sunlight); 
```

由于我对 3D 和 OpenGL 都很陌生，所以我不知道这个问题是由什么引起的。如果我将光移到另一侧，图像就会反转。如果光线直接来自球体前面，则根本不会显示任何规格。

为什么基本灯可以正常工作，但在包含规范时，它会失败？

# xml - 多行上的 XML 拆分属性值

> ID：11393159
> 
> 赞同：15
> 
> 时间：2012-07-09T10:22:50.307
> 
> 标签：xml, indentation

我有包含长属性值的 XML 数据。该值不包含空格字符。我想通过拆分 XML 文本来格式化 XML 以提高可读性，以便该行不超过最大列数。
有没有办法做到这一点？是否可以在行的每一端放置任何中断字符，以便 XML 解析器不将其视为空格（如 Visual Basic 中的下划线字符）？

例如：

```
<element attribute="this_is_a_very_long_text_attribute_value_that_I_want_to_split_on multiple_line_for_readability"/> 
```

我想要类似的东西：

```
<element attribute="this_is_a_very_long
_text_attribute_value_that_I_want_to_split
_on multiple_line_for_readability"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:28:53.913

本身没有提供`XML`换行符的规定，`Attribute Values`
但是这可以根据您使用它编写的 IDE 来完成，
即。如果您使用的是 Visual Studio，则可以设置换行并由 IDE 本身处理，
但如果您使用的是记事本等低级文本编辑器，则无法完成此操作
，您可能应该查看 XML 编辑器的文档

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-10T18:43:04.347

那么有一种方法：简而言之，只需使用制表符而不是空格。有关更多信息，请查看此答案。 [https://stackoverflow.com/a/38880984/3135511](https://stackoverflow.com/a/38880984/3135511)

嗯，像 Chrome 开发者工具或 Visual Studio 这样的 IDE 可能会困住并限制你这样做，但一些普通的编辑器会完成这项工作，而 html/xml 会处理它。

# mongodb - 将 mongo db .group 与 c# 驱动程序一起使用

> ID：11393164
> 
> 赞同：2
> 
> 时间：2012-07-09T10:23:14.150
> 
> 标签：mongodb, mongodb-.net-driver

我正在尝试进行多字段“不同”查询，这当然是不可能的
（请参阅我的尝试：[从 linq 查询中选择新类型](https://stackoverflow.com/questions/11362594/selecting-a-new-type-from-linq-query)）

在我意识到这一点之后，我发现我可以通过使用 .group 和 MongoDB 来检索我需要的数据。

有没有办法在 MongoDB C# 包装器中使用以下查询/命令？

```
disciplines = db.result.group({ 
    key: {DisciplineName:1, DisciplineCode:1}, 
    reduce: function(obj, prev) { if (!obj.hasOwnProperty("DisciplineName")) { 
        prev.DisciplineName = obj.DisciplineName; 
        prev.DisciplineCode = obj.DisciplineCode; 
    }}, 
    initial: { } 
}); 
```

我的`Result`课程（文档）如下所示：

```
public class Result
{
    public virtual int ResultId { get; set; }
    public virtual string DisciplineCode { get; set; }
    public virtual string DisciplineName { get; set; }
    public virtual int CompetitorId { get; set; }
    //other stuff
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:19:53.993

使用解决：

```
var initial = new BsonDocument();

//return a list of keys for the group
var keyFunction = (BsonJavaScript)@"function(doc) { 
                                        return { 
                                            DisciplineName : doc.DisciplineName, 
                                            DisciplineCode: doc.DisciplineCode 
                                        }; 
                                    }";

var reduce = @"function(obj, prev) {
                    if (!obj.hasOwnProperty(""DisciplineName"")) {
                        prev.DisciplineName = obj.DisciplineName; 
                        prev.DisciplineCode = obj.DisciplineCode;
                    }
                }";

var bsonDocs = _db.GetCollection("result").Group(Query.Exists("DisciplineName"), keyFunction, initial, reduce, null).ToArray();

//I hate this!!
var disciplines = new List<Discipline>();

foreach (var item in bsonDocs)
    disciplines.Add(BsonSerializer.Deserialize<Discipline>(item)); 
```

我真的不喜欢我必须迭代`IEnumerable<BsonDocument>`以将每个序列化为一个`Discipline`对象的方式。

如果可以反序列化 BsonDocuments 集合，将更新

# javascript - 在 MDN setInterval 示例中，var intervalID 是如何工作的？

> ID：11393167
> 
> 赞同：0
> 
> 时间：2012-07-09T10:23:31.137
> 
> 标签：javascript, firefox, setinterval

这是 window.setInterval 的 Mozilla 开发者网络示例

```
var intervalID = window.setInterval(func, delay[, param1, param2, ...]);
var intervalID = window.setInterval(code, delay); 
```

（可以在这里找到：[https](https://developer.mozilla.org/en/DOM/window.setInterval) ://developer.mozilla.org/en/DOM/window.setInterval ）

我更习惯于编译这些类型的算法的 Java 编程，所以我的问题是：

intervalID 是如何工作的？似乎在幕后发生了某种递归函数，但这是一个完整的猜测 - 它是如何构造的，并且该结构（可能相当大）是否存储为 intervalID，等待`clearInterval(intervalID)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:57:37.800

`intervalID`只是`setInterval`函数返回的一个数字，用于标识正在进行的间隔。

想象一下，好像有一个数字映射到一个函数和一个区间的元组。这可能不是它的实际实现方式，但我认为它足以作为它如何工作的心理模型

```
11: [function () { ... }, 500],
27: [function () { ... }, 230],
875: [function () { ... }, 650]
... 
```

地图中的每个功能都将在给定的时间间隔内继续执行。如果您`clearInterval`使用与地图中的某个项目对应的 id 调用，它将删除该项目并且该函数将停止执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:58:14.263

我只是假设您想知道它在 Firefox 浏览器中是如何工作的（每个浏览器都有自己的相同方法的实现）。该实现可以在[nsGlobalWindow::SetTimeoutOrInterval()](http://hg.mozilla.org/mozilla-central/file/1ee6c61e0a0b/dom/base/nsGlobalWindow.cpp#l9298)中找到，它实际上非常简单。每个窗口都有一个未完成的超时列表，当您调用`window.setInterval()`一个新的[超时结构](http://hg.mozilla.org/mozilla-central/file/1ee6c61e0a0b/dom/base/nsGlobalWindow.h#l131)并添加到该列表中时。超时结构包含对[计时器对象](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsITimer)的引用，该对象将在需要调用回调时通知窗口。它有一个`mPublicId`成员，它只是一个数字 - 每创建一个新的超时，它就会递增，并由`setInterval()`. 你打电话时`clearInterval()`它将在列表中查找具有匹配 ID 的超时并将其删除。

# ruby - What is the difference between nesting module definitions and using :: in definition in ruby?

> ID：11393169
> 
> 赞同：6
> 
> 时间：2012-07-09T10:23:46.797
> 
> 标签：ruby, scope, constants

What are the differences between this:

```
module Outer
  module Inner
    class Foo
    end
  end
end 
```

and this:

```
module Outer::Inner
  class Foo
  end
end 
```

I know the latter example won't work if `Outer` was not defined earlier, but there are some other differences with constant scope and I could find their description on SO or in documentation (including Programming Ruby book)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T10:59:05.297

Thanks to keymone's [answer](https://stackoverflow.com/a/11393398/169000) I formulated correct Google query and found this: [Module.nesting and constant name resolution in Ruby](http://coderrr.wordpress.com/2008/03/11/constant-name-resolution-in-ruby/)

Using `::` changes constant scope resolution

```
module A
  module B
    module C1
      # This shows modules where ruby will look for constants, in this order
      Module.nesting # => [A::B::C1, A::B, A]
    end
  end
end

module A
  module B::C2
    # Skipping A::B because of ::
    Module.nesting # => [A::B::C2, A]
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T10:38:50.923

there is at least one difference - constant lookup, check this code:

```
module A
  CONST = 1

  module B
    CONST = 2

    module C
      def self.const
        CONST
      end
    end
  end
end

module X
  module Y
    CONST = 2
  end
end

module X
  CONST = 1

  module Y::Z
    def self.const
      CONST
    end
  end
end

puts A::B::C.const # => 2, CONST value is resolved to A::B::CONST
puts X::Y::Z.const # => 1, CONST value is resolved to X::CONST 
```

# mysql - PHP - MySQL 查询三个表

> ID：11393172
> 
> 赞同：1
> 
> 时间：2012-07-09T10:23:54.037
> 
> 标签：mysql, sql, create-table

基本上我拥有的是一个图片库。只是试图创建一个用于学习目的。我现在所拥有的是，当他/她单击类别时，会触发以下用于选择画廊的 mysql 查询：

```
    从画廊 WHERE 中选择 ID、名称、gallery_thumb
    category1=$category_id 或 category2=$category_id 或
    category3=$category_id ORDER BY ID DESC

```

这只是我拼凑起来的一个快速而糟糕的解决方案。基本上我希望一个画廊出现在许多类别中。在这里，我在创建画廊时这样做了，我可以将其添加到三个或更少的类别中，因此一个画廊可能会出现在不同的类别中。但这个灵魂不是我想要的。

**画廊表：**

```
    创建表`画廊`（

    `ID` int(11) NOT NULL AUTO_INCREMENT,
    `name` varchar(1000) 字符集 utf8 整理 utf8_unicode_ci 非空，
    `description` varchar(1000) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
    `category1` varchar(500) 字符集 utf8 整理 utf8_unicode_ci 非空，
    `category2` varchar(500) 字符集 utf8 整理 utf8_unicode_ci 非空，
    `category3` varchar(500) 字符集 utf8 整理 utf8_unicode_ci 非空，
    `web_link` varchar(3000) 字符集 utf8 整理 utf8_unicode_ci 非空，
    `gallery_thumb` varchar(2000) 字符集 utf8 整理 utf8_unicode_ci 非空，
    `reg_time` 时间戳 NOT NULL DEFAULT CURRENT_TIMESTAMP，
    主键（`ID`）
    )

```

如果我得到我想要工作的功能，category2 和 category3 将是不必要的并被删除。

**标签表：**

```
    创建表`gallery_tags`（
    `ID` int(11) NOT NULL AUTO_INCREMENT,
    `tag_name` varchar(100) 字符集 utf8 整理 utf8_unicode_ci 非空，
    主键（`ID`）
    )

```

**标签和画廊参考表：**

```
    创建表`gallery_tag_reference`（
    `ID` int(11) NOT NULL AUTO_INCREMENT,
    `gallery_id` int(11) NOT NULL,
    `tags_id` int(100) NOT NULL,
    主键（`ID`）
    )

```

我添加了标签功能。当我现在创建一个画廊时，我可以向画廊添加任意数量的标签。现在画廊将只有一个主要类别和许多与之相关的标签。但我希望画廊也能根据我在创建画廊时添加的标签出现在其他类别中。这些类别将有一个或多个预定义的标签。我现在要做的是，当访问者单击类别时，将选择相同的数据，而在此之前只有查询过滤部分会有所不同。

**例子：**

类别 1 将有标签：汽车、蓝色、闪亮
画廊 1 将有标签：蓝色、红色、快速。
Gallery1 不属于 category1，但因为它在表“gallery_tags”中添加了一个标签“blue”，所以它出现在访问者单击 category1 按钮时执行的查询结果中。

**示例 2：**

Category1 将没有标签。
Category2 将没有标签。
Category3 将没有标签。
Category4 将具有预定义的标签：黄色、红色。
Category5 将具有预定义的标签：高、高。

Gallery1 将没有标签，但它属于 Category1。
Gallery2 将没有标签，但它属于 Category2。
Gallery3 将有标签：黄色、高大、字段
Gallery3 属于 Category3。

当访问者点击 Category4 按钮时，选择的是属于 Category4 的画廊和具有标签“黄色”或“红色”的画廊。因为这里我们没有属于 Category4 的画廊，但我们有 gallery3，它有标签黄色，并且 Category4 也有预定义的标签“黄色”，当点击时，画廊 3 会显示在 Category4 中。

类别 5 也是如此。它没有直接属于它的任何画廊，但是因为画廊 3 有一个与之相关的标签“高”，并且类别 5 也有预定义的标签“高”，所以画廊 3 也显示在类别 5 中。

我希望我清楚地描述了我想要实现的目标。由于我在 MySQL 方面不是很有经验，所以我很难将必要的查询放在一起。我希望有人会帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:58:53.527

好的，所以您的基本选择单位是**标签**和**类别**- 让我们从为它们创建表格开始

```
CREATE TABLE tags (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(100) NOT NULL,
  -- Maybe some other things you want? Tag description?
  UNIQUE INDEX name
); 
```

这给了我们一张`tags`桌子，我们可以用

```
INSERT INTO tags(name) VALUES
  ('car'),('blue'),('shiny'),('red'),('fast'),('yellow'),('tall'),('high'),('field')
; 
```

基本上相同的事情发生在类别上：

```
CREATE TABLE categories (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(100) NOT NULL,
  -- Maybe some other things you want? Description?
  UNIQUE INDEX name
);

INSERT INTO categories(name) VALUES
  ('cars'),('people'),('colors'),('landscapes'),('misc')
; 
```

现在我们可以看看画廊：

*   每个画廊都应该属于一个类别（现在），每个类别都可以有很多画廊。所以它是`1:n`来自类别的 POV 的关系，所以我们需要在`n`关系的 -side 中的指针字段，画廊。**为了简洁起见**，我在这里不使用外键，强烈建议您考虑使用它们。
*   每个画廊可以有很多标签，每个标签可以属于很多画廊 - 所以它是一个 n:m 关系，我们不需要直接在表中的字段，但我们需要一个连接表。
*   每个类别可以有很多标签，每个标签可以属于很多类别 - 所以这是同一回事

所以我们这样做：

```
CREATE TABLE galleries (
  id int(11) PRIMARY KEY AUTO_INCREMENT,
  name varchar(100)  NOT NULL,
  category` INT NOT NULL,
  -- the other fields you want: description, web_link, gallery_thumb,reg_time
  UNIQUE INDEX(name)
) 
```

注意类别的数据类型`INT`：它将链接到类别表的主键，这`INT`也是。

我们可能不会忘记连接表：

```
CREATE TABLE galleries_tags (
  gallery INT,
  tag INT,
  PRIMARY KEY(tag, gallery),
  KEY(gallery)
);

CREATE TABLE categories_tags (
  category INT,
  tag INT,
  PRIMARY KEY(tag, category),
  KEY(category)
); 
```

类型的`tag`字段`INT`将这些连接表链接到表的`id`字段`tags`，而`gallery`相应的。`category`字段将链接到`id`各个表的字段。

我们再次用`INSERT`查询填充表。（懒得写出来）

现在您的数据已在数据库中，是时候再次将其取出：

你用例：用户点击一个类别，你想选择画廊，有

*   要么在此类别下提交
*   或与此类别共享标签

这很容易，但需要一点思考：

*   你的目标表是`categories`
*   对于按类别进行选择，您有一个直接选择器：`category`字段
*   对于标签选择，您必须通过上述连接表加入
*   `LEFT JOIN`对于组合选择，如果您不想错过仅限类别的选择，则需要这样做，但这会影响您的表现。所以你选择单独和`UNION`结果

假设您的用户选择了类别 4：

```
SELECT * FROM galleries WHERE category=4
UNION
SELECT categories.* 
FROM galleries
INNER JOIN galleries_tags ON galleries.id=galleries_tags.gallery
INNER JOIN categories_tags ON categories_tags.tag=galleries_tags.tag
WHERE categories_tags.category=4 
```

鲍勃是你的叔叔。

这个查询有什么作用？第一部分很简单，第二部分选择那些画廊，即

*   附有标签 ( `INNER JOIN galleries_tags ON ...`)
*   哪些标签附加了类别 ( `INNER JOIN categories_tags ON ...`)
*   哪些类别有`id`4

# iphone - 免费实时货币转换汇率 xml 提要 url

> ID：11393173
> 
> 赞同：6
> 
> 时间：2012-07-09T10:24:00.653
> 
> 标签：iphone, ios5, xml-parsing

任何提供实时更新 xml 数据馈送以集成到 iphone 应用程序的链接

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T10:35:33.903

你可以试试这些xml文件

[http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml](http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml)

[http://www.ecb.int/stats/exchange/eurofxref/html/index.en.html](http://www.ecb.int/stats/exchange/eurofxref/html/index.en.html)

[http://themoneyconverter.com/rss-feed/USD/rss.xml](http://themoneyconverter.com/rss-feed/USD/rss.xml)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T10:38:24.850

you can try yahoo , its free

> For example, to convert from GBP to EUR: [http://download.finance.yahoo.com/d/quotes.csv?s=GBPEUR=X&f=sl1d1t1ba&e=.csv](http://download.finance.yahoo.com/d/quotes.csv?s=GBPEUR=X&f=sl1d1t1ba&e=.csv)

which give data in .csv file which easily can be parsed.

# git - Git-tfs 重置为远程

> ID：11393180
> 
> 赞同：3
> 
> 时间：2012-07-09T10:24:48.580
> 
> 标签：git, git-tfs

我想重置为遥控器的状态。

使用普通的 git 我会做类似的事情`git reset --hard origin/HEAD`。

我正在使用 git-tfs。有谁知道如何用 git-tfs 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T10:57:56.737

解决方案是研究 git-tfs 如何构造远程 URI。

在我的情况下，以下工作：

`git reset --hard tfs/default`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T09:38:28.387

我找到了以下“内置” `git tfs reset-remote`，我不知道这是否是你想做的 Ben？ [https://github.com/git-tfs/git-tfs/blob/master/doc/commands/reset-remote.md](https://github.com/git-tfs/git-tfs/blob/master/doc/commands/reset-remote.md)

# gnuplot - 使用条件绘图 (Gnuplot) 绘制扇区切割数据

> ID：11393183
> 
> 赞同：0
> 
> 时间：2012-07-09T10:24:53.333
> 
> 标签：gnuplot

我有数据描绘了一个星的特征点的 3D 分布。简而言之，我在球体内有一个随机的 3D 点分布。我想对除 x>=0,y>=0,z>=0 扇区内的所有点之外的所有点进行 3D 绘图。那就是我想切掉球体的1/8。我的尝试：

```
spl 'data' u ($2>=0.?($3>=0.?($4>=0.?1/0:$2):$2):$2):3:4:7 w d lc palette z 
```

什么也没做。我的意思是，它似乎策划了一切。列是 $2=x、$3=y、$4=z 和 $7 一个数量级，以赋予点颜色。

知道我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:15:34.423

您的条件语法至少看起来是正确的。使用以下数据文件：

```
1 1 1 1
1 -1 1 2
1 1 -1 3
1 -1 -1 4

-1 1 1 5
-1 -1 1 6
-1 1 -1 7
-1 -1 -1 8 
```

命令

```
spl 'data.dat' u ($1>=0.?($2>=0.?($3>=0.?1/0:$1):$1):$1):2:3:4 w points pt 7 ps 3 palette z 
```

产生这个输出： ![在此处输入图像描述](../Images/cd8972cf4f1f208e2f693d2fb936b5ca.png)

(1,1,1) 处的点不存在，因为它应该存在。这是使用 gnuplot 4.6.0。当我尝试该命令时，`w d lc palette z`我什么也看不到，也许该`with dots`选项的行为有所不同？

# javascript - jQuery | 字符串替换不起作用

> ID：11393185
> 
> 赞同：0
> 
> 时间：2012-07-09T10:24:59.463
> 
> 标签：javascript, jquery, replace, str-replace

我有以下脚本：

```
var id = $(this).attr('id');
var ui_id = id.replace("delete", "hidden");
var am_id = id.replace("delete", "internal"); 
```

如果我做

```
console.log(id); 
```

我得到以下值：

```
widget-zcircle-2-link_image-remove 
```

但是**ui_id**和**am_id**的值没有改变。

以下代码：

```
console.log(ui_id);
console.log(am_id); 
```

在我的控制台中打印出以下结果：

```
widget-zcircle-2-link_image-remove
widget-zcircle-2-link_image-remove 
```

代替

```
widget-zcircle-2-link_image-hidden
widget-zcircle-2-link_image-internal 
```

我的代码中有什么我看不到的问题吗？

亲切的问候梅里亚诺斯尼科斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:27:52.070

**`delete`在`remove`**您的替换功能中替换...就像

```
var ui_id = id.replace("remove", "hidden"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T10:27:15.877

您的输入包含`"remove"`但您的代码正在寻找`"delete"`.

# android - ADT 20 在属性列表中设置布局高度/宽度

> ID：11393190
> 
> 赞同：5
> 
> 时间：2012-07-09T10:25:01.307
> 
> 标签：android, eclipse

我尽可能使用 eclipse 的图形界面编辑器——XML 编辑器似乎有很多错误；在我使用向上/向下箭头键滚动文件之前，某些文本不会出现（或出现在错误的位置和/或扭曲）。

无论如何，我最近“升级”到了 r20 的 android 开发工具。在以前的版本中，我可以直接从属性列表中手动设置布局高度和宽度等内容（例如，如果我想将高度设置为 20dp，我可以从属性列表中对其进行编辑）。现在，它只提供“填充父项”和“匹配内容”选项，您不能输入任何内容。

那么，现在有没有办法做到这一点？这种行为正常吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:38:33.563

我注意到了同样的情况，重新启动 Eclipse 对我没有任何影响。显然这是一个已知的错误。[无法自由输入体重、身高的值](http://code.google.com/p/android/issues/detail?id=33978&q=match_parent&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

所有的东西都认为 R20 是一个质量很差的升级，有太多的错误可以通过一些回归测试发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:56:58.277

我刚刚通过重新启动eclipse解决了这个问题。

我希望这对你有用。

# java - 链接回亚马逊应用商店以获取评分

> ID：11393191
> 
> 赞同：20
> 
> 时间：2012-07-09T10:25:13.137
> 
> 标签：java, android, android-studio, android-intent

我目前在 Google Play 商店的 android 应用程序中使用以下代码来请求对我的应用程序进行审查和评级。

```
Intent goToMarket = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=com.yapp.blah"));
goToMarket.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(goToMarket); 
```

如何链接回亚马逊应用商店或亚马逊市场以实现相同的目标？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-02-10T21:39:46.813

只需使用以下代码。起初尝试通过URI打开市场应用程序，但如果找不到打开Web链接。

```
public static final String MARKET_AMAZON_URL = "amzn://apps/android?p=";
public static final String WEB_AMAZON_URL = "http://www.amazon.com/gp/mas/dl/android?p=";

    private static void openOnAmazonMarket(Context context, String packageName) {

    try {
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(MARKET_AMAZON_URL + packageName));
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intent);
    } catch (android.content.ActivityNotFoundException anfe) {
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(WEB_AMAZON_URL + packageName));
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intent);
    }

} 
```

Google Play 和三星 Galaxy Apps 的链接如下：

```
public static final String MARKET_GOOGLE_URL = "market://details?id=";
public static final String WEB_GOOGLE_URL = "http://play.google.com/store/apps/details?id=";

public static final String MARKET_SAMSUNG_URL = "samsungapps://ProductDetail/";
public static final String WEB_SAMSUNG_URL = "http://www.samsungapps.com/appquery/appDetail.as?appId="; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-10T11:37:11.763

您可以执行以下操作：

1.  检查设备是否基于其制造商。例如：[https ://developer.amazon.com/sdk/fire/specifications.html](https://developer.amazon.com/sdk/fire/specifications.html)

2.  要撰写评论和打开亚马逊应用商店，请使用以下意图

    ```
    amzn://apps/android?p=package_name 
    ```

    `p=Link`特定包名称的详细信息页面的 位置。

参考：亚马逊开发者链接。

[https://developer.amazon.com/sdk/in-app-purchasing/sample-code/deeplink.html](https://developer.amazon.com/sdk/in-app-purchasing/sample-code/deeplink.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-27T21:25:40.080

这是首选方法，将直接打开适用于 Android 的 Amazon Appstore：

```
amzn://apps/android?p=<package_name> 
```

来源：[https ://developer.amazon.com/public/community/post/Tx3A1TVL67TB24B/Linking-To-the-Amazon-Appstore-for-Android](https://developer.amazon.com/public/community/post/Tx3A1TVL67TB24B/Linking-To-the-Amazon-Appstore-for-Android)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-31T10:14:03.147

有两种方法可以做到：

**选项 1：链接到亚马逊零售网站**

这种类型的链接将被适用于 Android 的亚马逊应用商店以及设备上任何已安装的浏览器获取。基本网址如下：

[http://www.amazon.com/gp/mas/dl/android](http://www.amazon.com/gp/mas/dl/android)？

选项 2：直接链接到适用于 Android 的 Amazon Appstore

这个特殊格式的链接是首选方法，它将直接打开适用于 Android 的 Amazon Appstore。基本网址如下：

amzn://apps/android?

[http://www.amazon.com/HUT-Solution-Loving-Pakman/dp/B00HYT72LU](https://rads.stackoverflow.com/amzn/click/com/B00HYT72LU)

# linux - Youtube 的 Zend_Gdata 库未导入到 linux 环境中的 cakephp 1.2 应用程序

> ID：11393192
> 
> 赞同：0
> 
> 时间：2012-07-09T10:25:22.757
> 
> 标签：linux, cakephp, cakephp-1.2, zend-gdata

我正在使用 Zend_Gdata 插件在我们的 web 应用程序中使用 cakephp 1.2 验证 Youtube 帐户凭据。

Zend/Gdata/ClientLogin.php 文件用于调用我们的 youtube 控制器文件中的身份验证方法，如下所示：

```
App::import('Vendor', 'Zend_Gdata_ClientLogin', true, false,'Zend/Gdata/ClientLogin.php'); 
```

Zend 库根据需要位于“供应商”文件夹中，因此上述导入应该可以工作。

但是当应用程序在 Linux 环境中托管时，当它到达这条线时会挂起。它在 Windows 中运行良好。

我试图查明错误可能出在哪里，但由于未导入 ClientLogin.php 文件，我似乎无法更进一步。

是否有在 Windows 以外的 linux 环境中配置 Zend 库的具体步骤？还是 cakephp 1.2 ？

非常感谢您对此事的任何帮助。我已经坚持了几天了：S

非常感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:50:52.690

在 Vendor 中创建一个名为 zend_include_path.php 的文件并将代码放在下面：

```
set_include_path(implode(PATH_SEPARATOR, array(
        dirname(__FILE__) . '/ZendGdata/library',
        get_include_path(),
    ))); 
```

在您的控制器中：

```
App::import('Vendor', 'zend_include_path');
App::import('Vendor', 'Zend_Gdata', true, false, 'Zend/Gdata.php');
Zend_Loader::loadClass('Zend_Gdata_YouTube');
Zend_Loader::loadClass('Zend_Gdata_AuthSub');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin'); 
```

现在您可以使用以下方法。

```
$httpClient = Zend_Gdata_ClientLogin::getHttpClient(); 
```

# applet - java.lang.NoClassDefFoundError 与我的小程序

> ID：11393194
> 
> 赞同：2
> 
> 时间：2012-07-09T10:25:28.077
> 
> 标签：applet, java

当我调用我的 jsp 时，我的应用程序中有一个小程序我有这个错误

> java.lang.ClassNotFoundException：在 sun.plugin2.applet.Plugin2ClassLoader.loadClass0（未知来源）处 sun.plugin2.applet.Applet2ClassLoader.findClass（未知来源）处的 VisualisationCourbeCharge.class（未知来源） ) 在 sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source) 在 sun.plugin2.applet.Plugin2Manager 的 sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source)。 createApplet(Unknown Source) at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source) at java.lang.Thread.run(Unknown Source)

我的代码：

```
 StringBuffer applet = new StringBuffer();
    applet.append("<object classid=\"clsid:8AD9C840-044E-11D1-B3E9-00805F499D93\" ");
    applet.append("width = \"750\" height = \"500\" hspace = \"0\" vspace = \"0\" align = \"middle\">\n");
    applet.append("\t<param name=\"archive\" value=\"jfreechart-0.9.8.jar,jcommon-0.8.0.jar\">\n");
    applet.append("\t<param name=\"codebase\" value=\"./ihm/applet/graphe/\">\n");
    applet.append("\t<param name=\"code\" value=\"VisualisationCourbeCharge.class\">\n");
    applet.append("\t<param name=\"");
    applet.append(ConstantesApplet.PARAMETRE_LANGUE);
    applet.append("\" value=\"");
    applet.append(langue);
    applet.append("\">\n");

<object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" width = "750" height = "500" hspace = "0" vspace = "0" align = "middle">
    <param name="archive" value="jfreechart-0.9.8.jar,jcommon-0.8.0.jar">
    <param name="codebase" value="./ihm/applet/graphe/">
    <param name="code" value="VisualisationCourbeCharge.class">
    <param name="langue" value="fr">
    <param name="unit" value="MW">
    <param name="powerUnit" value="">
    <param name="nomColonne" value="Valeur">
    <param name="dateDebut" value="2007-02-01T00:00:00">
    <param name="duree" value="1">
    <param name="decalage" value="7">
    <param name="nombreMaxJours" value="32">
    <param name="anterieur" value="false">
    <param name="existePuissanceSouscrite" value="false">
    <param name="listColumn" value="Valeur;">
    <param name="valuesTime" value="2007-02-01T00:00:00;2007-02-01T00:10:00;2007-02-01T00:20:00;2007-02-01T00:30:00;2007-02-01T00:40:00;2007-02-01T00:50:00;2007-02-01T01:00:00;2007-02-01T01:10:00;2007-02-01T01:20:00;2007-02-01T01:30:00;2007-02-01T01:40:00;2007-02-01T01:50:00;2007-02-01T02:00:00;2007-02-01T02:10:00;2007-02-01T02:20:00;2007-02-01T02:30:00;2007-02-01T02:40:00;2007-02-01T02:50:00;2007-02-01T03:00:00;2007-02-01T03:10:00;2007-02-01T03:20:00;2007-02-01T03:30:00;2007-02-01T03:40:00;2007-02-01T03:50:00;2007-02-01T04:00:00;2007-02-01T04:10:00;2007-02-01T04:20:00;2007-02-01T04:30:00;2007-02-01T04:40:00;2007-02-01T04:50:00;2007-02-01T05:00:00;2007-02-01T05:10:00;2007-02-01T05:20:00;2007-02-01T05:30:00;2007-02-01T05:40:00;2007-02-01T05:50:00;2007-02-01T06:00:00;2007-02-01T06:10:00;2007-02-01T06:20:00;2007-02-01T06:30:00;2007-02-01T06:40:00;2007-02-01T06:50:00;2007-02-01T07:00:00;2007-02-01T07:10:00;2007-02-01T07:20:00;2007-02-01T07:30:00;2007-02-01T07:40:00;2007-02-01T07:50:00;2007-02-01T08:00:00;2007-02-01T08:10:00;2007-02-01T08:20:00;2007-02-01T08:30:00;2007-02-01T08:40:00;2007-02-01T08:50:00;2007-02-01T09:00:00;2007-02-01T09:10:00;2007-02-01T09:20:00;2007-02-01T09:30:00;2007-02-01T09:40:00;2007-02-01T09:50:00;2007-02-01T10:00:00;2007-02-01T10:10:00;2007-02-01T10:20:00;2007-02-01T10:30:00;2007-02-01T10:40:00;2007-02-01T10:50:00;2007-02-01T11:00:00;2007-02-01T11:10:00;2007-02-01T11:20:00;2007-02-01T11:30:00;2007-02-01T11:40:00;2007-02-01T11:50:00;2007-02-01T12:00:00;2007-02-01T12:10:00;2007-02-01T12:20:00;2007-02-01T12:30:00;2007-02-01T12:40:00;2007-02-01T12:50:00;2007-02-01T13:00:00;2007-02-01T13:10:00;2007-02-01T13:20:00;2007-02-01T13:30:00;2007-02-01T13:40:00;2007-02-01T13:50:00;2007-02-01T14:00:00;2007-02-01T14:10:00;2007-02-01T14:20:00;2007-02-01T14:30:00;2007-02-01T14:40:00;2007-02-01T14:50:00;2007-02-01T15:00:00;2007-02-01T15:10:00;2007-02-01T15:20:00;2007-02-01T15:30:00;2007-02-01T15:40:00;2007-02-01T15:50:00;2007-02-01T16:00:00;2007-02-01T16:10:00;2007-02-01T16:20:00;2007-02-01T16:30:00;2007-02-01T16:40:00;2007-02-01T16:50:00;2007-02-01T17:00:00;2007-02-01T17:10:00;2007-02-01T17:20:00;2007-02-01T17:30:00;2007-02-01T17:40:00;2007-02-01T17:50:00;2007-02-01T18:00:00;2007-02-01T18:10:00;2007-02-01T18:20:00;2007-02-01T18:30:00;2007-02-01T18:40:00;2007-02-01T18:50:00;2007-02-01T19:00:00;2007-02-01T19:10:00;2007-02-01T19:20:00;2007-02-01T19:30:00;2007-02-01T19:40:00;2007-02-01T19:50:00;2007-02-01T20:00:00;2007-02-01T20:10:00;2007-02-01T20:20:00;2007-02-01T20:30:00;2007-02-01T20:40:00;2007-02-01T20:50:00;2007-02-01T21:00:00;2007-02-01T21:10:00;2007-02-01T21:20:00;2007-02-01T21:30:00;2007-02-01T21:40:00;2007-02-01T21:50:00;2007-02-01T22:00:00;2007-02-01T22:10:00;2007-02-01T22:20:00;2007-02-01T22:30:00;2007-02-01T22:40:00;2007-02-01T22:50:00;2007-02-01T23:00:00;2007-02-01T23:10:00;2007-02-01T23:20:00;2007-02-01T23:30:00;2007-02-01T23:40:00;2007-02-01T23:50:00;">
    <param name="valuesNominal" value="0.5;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;0.0;">
    <param name="valuesFormer" value="">
    <param name="valuesPower" value="">
</object> 
```

**它适用于 JRE 1.4，但不适用于 JRE 1.6**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:41:04.477

将后续`jar`文件添加到服务器中。@Moataz Elmasry 的建议很好。

将`jar`文件放入特定目录。`i.e. /bin`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:06:10.147

从改变

```
<param name="code" value="VisualisationCourbeCharge.class"> 
```

至

```
<param name="code" value="VisualisationCourbeCharge"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T17:41:19.800

嗯...

我不太确定，但我只是想分享我的案例，所以也许这也可以帮助你......

如果您说它仅适用于 1.4 版本，那么我可能会建议有关您的*`VisualisationCourbeCharge`*班级内部结构的事情；正如我所注意到的，这个类不是一个 lib 吗？好的...所以，我记得，1.4 版本适用于**内部**类...在 1.4 代码中就像

```
public class A{}
class B{}//inner class B 
```

...我记得，在同一个包中生成 A 和 B 类

但是在 1.6 中，我在使用它抛出的代码结构时遇到了问题`java.lang.ClassNotFoundException`

```
public class A{}
class B{}//inner class B 
```

...因为包中没有生成 B 类（至少在我的 Eclipse IDE 中）...

所以我希望你仔细观察你的源文件；*VisualisationCourbeCharge*是内部类（作为示例 B 类）吗？如果是，那么只需将其放在主类（示例 A 类）大括号区域中，或者使其不是子类而是*单独*的公共类并重新编译。

* * *

还有一个建议...

您是否尝试过像[文档](http://docs.oracle.com/javase/6/docs/technotes/guides/plugin/developer_guide/using_tags.html#html)所说的那样使用这两个标签：

```
<object 
  classid="clsid:CAFEEFAC-0016-0000-0000-ABCDEFFEDCBA"
  <param name="code" value="Applet1.class">
    <comment>
      <embed code="Applet1.class"
        type="application/x-java-applet;jpi-version=1.6">
        <noembed>
          No Java Support.
        </noembed>
      </embed>
    </comment>
  </object> 
```

?

这应该同时支持 IE 和 Mozilla

仍然有更少的细节......显示*VisualisationCourbeCharge*源代码

* * *

报告是否有帮助

# javascript - 如何使用javascript字典中的键查找值

> ID：11393200
> 
> 赞同：30
> 
> 时间：2012-07-09T10:25:45.440
> 
> 标签：javascript, dictionary

我对 Javascript 的字典有疑问。我有一个字典，其中键值对像这样动态添加：

```
var Dict = []
var addpair = function (mykey , myvalue) [
  Dict.push({
    key:   mykey,
    value: myvalue
  });
} 
```

我将调用这个函数并传递给它不同的键和值。但是现在我想根据密钥检索我的值，但我无法这样做。谁能告诉我正确的方法？

```
var givevalue = function (my_key) {
  return Dict["'" +my_key +"'"]         // not working
  return Dict["'" +my_key +"'"].value // not working
} 
```

由于我的密钥是一个变量，我不能使用`Dict.my_key`

谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-09T10:27:30.113

JavaScript 中的数组不使用字符串作为键。您可能会发现该值在那里，但键是一个整数。

如果你做成`Dict`一个对象，这将起作用：

```
var dict = {};
var addPair = function (myKey, myValue) {
    dict[myKey] = myValue;
};
var giveValue = function (myKey) {
    return dict[myKey];
}; 
```

该`myKey`变量已经是一个字符串，因此您不需要更多引号。

# jquery - jquery在新窗口中打开图片

> ID：11393205
> 
> 赞同：2
> 
> 时间：2012-07-09T10:26:06.987
> 
> 标签：jquery, html, variables, click

我有以下html：

```
<li><a href="#" filename="prettygirls_1"><img src="large/prettygirls_1.jpg" alt="Pretty Girls Doing Horrid Things" /></a></li>
<li><a href="#" filename="prettygirls_2"><img src="large/prettygirls_2.jpg" alt="Pretty Girls Doing Horrid Things" /></a></li> 
```

我正在尝试编写一些将文件名属性传递给变量的 jquery，然后在新窗口中打开源文件的大版本。

我的 jquery 看起来像这样（我知道这是不正确的）：

```
$('div#slider ul li a').click(function() {
    var img_to_load = $(this).attr('filename');
    filePath = 'large/'; 
    $('<a href=" ' + filePath + img_to_load + '.jpg' + 'target="_blank"' + '</a>').html();
    //alert (img_to_load);
}); 
```

我该如何构建这个？

所有代码实际上都可以在这里找到： http: [//dev.jessicaharby.com/work/tempindex.cfm](http://dev.jessicaharby.com/work/tempindex.cfm)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:33:12.860

尝试这个：

**JS：**

```
window.open(filePath + img_to_load + '.jpg', '', 'width=640,height=480'); 
```

更改宽度和高度以适合，或者如果您无法指定确切的宽度和高度，只需使用

```
window.open(filePath + img_to_load + '.jpg'); 
```

请参阅[window.open-MDN](https://developer.mozilla.org/en/DOM/window.open)。

因为它是在活动中打开的`click`，所以它不会被弹出窗口阻止程序阻止，只要打开的 URL 在同一个域中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:32:24.377

我建议：

```
$('ul li a').click(function(e) {
    // prevents the default action of the link's click-event ('e'), above
    e.preventDefault();
    // finds the 'img' element within the 'a', using 'find()`
    // and converts that, using '[0]' to a plain DOM node
    // and retrieves the full, absolute, 'src' from that element
    var img_to_load = $(this).find('img')[0].src,
        imgWindow = window.open(img_to_load, 'imgWindow');
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/yUdwt/)。

上面将打开任何随后单击的图像到同一个窗口中（使用新的图像元素重新加载打开的窗口），因为它将首先查看是否有一个同名的窗口打开（在这种情况下，函数`'imgWindow'`中的第二个参数`window.open()`) 并且，如果它存在，重新使用它。否则它将打开一个具有该名称的窗口。

如果您希望图像每次都在自己的窗口中打开，只需省略该参数并简单地使用：

```
$('ul li a').click(function(e) {
    e.preventDefault();
    var img_to_load = $(this).find('img')[0].src,
        imgWindow = window.open(img_to_load);
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/yUdwt/1/)。

参考：

*   `event.preventDefault()`（[jQuery](http://api.jquery.com/event.preventDefault/)），（[纯 JavaScript](https://developer.mozilla.org/en/DOM%3aevent.preventDefault)）。
*   [`find()`](http://api.jquery.com/find/).
*   [`window.open()`](https://developer.mozilla.org/en/DOM/window.open).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T04:54:41.627

尝试这个：

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery demo</title>
  <script src="jquery-1.9.1.js"></script>
</head>
<body>
<script>
$(document).on("click", "#btn", function(event) {
    window.open("http://www.google.com", '_blank');
});
</script>
<input type=button name="btn" id="btn">
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T11:52:37.203

现在，codebins 提供了上述查询的解决方案。所以，在[http://codebins.com/codes/home/4ldqpb5上试试吧](http://codebins.com/codes/home/4ldqpb5)

```
$(function() {
    $('div#slider ul li a').click(function(e) {
        e.preventDefault();
        var imageWin;
        var imageUrl = $.trim($(this).attr('filename')),
            imageWin = window.open(imageUrl);

    });
}); 
```

# ios - GCD 和外线程

> ID：11393209
> 
> 赞同：0
> 
> 时间：2012-07-09T10:26:34.353
> 
> 标签：ios, objective-c, grand-central-dispatch

有没有办法可以创建一个新的（或关联现有的）调度队列并将其绑定到特定线程？

我有一个 AudioUnit 回调 proc 在我无法控制的线程上运行，并且希望在正确执行回调之前检查某个给定队列是否有任何块供我在该 AudioUnit 线程中处理。

我可能可以使用 OSAmtomicEnqueue 和朋友，但想知道 GCD 是否已经提供了某种“转义”，允许我将特定线程绑定到特定队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:31:09.413

根据 Apple'doc，答案是否定的。

> GCD 提供并管理 FIFO 队列，您的应用程序可以以块对象的形式向这些队列提交任务。提交到调度队列的块在系统完全管理的线程池上执行。不保证执行任务的线程。

# sorting - android：通过选中的复选框对联系人/项目进行排序

> ID：11393211
> 
> 赞同：0
> 
> 时间：2012-07-09T10:26:49.763
> 
> 标签：sorting, checkbox, android-contacts

我创建了一个 ListActivity。在列表中的每个项目中，我使用自定义适配器绑定了联系人姓名和复选框。现在我想通过选中的复选框对我的联系人进行排序，首先选中，然后是其他。

有没有一种快速的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:53:19.220

我不知道您是否可以按复选框排序。但是还有另一种方法可以实现您的目的。只需创建一个包含所有联系人姓名的数据库和一个为每个联系人姓名初始化为零的字段（您可以将其称为标志）。将联系人姓名与列表视图绑定，并以这样的方式实现它，每当单击联系人列表中的项目时，该联系人姓名的标志设置为 1。然后您可以根据选中标志的数量轻松对列表进行排序。

# django - Django，当我们有表层次结构时查询数据

> ID：11393215
> 
> 赞同：1
> 
> 时间：2012-07-09T10:26:56.583
> 
> 标签：django, django-models, hierarchy

假设我们有三个**分层**形式的表：

```
Course 
    Topic 
        Sub-Topic 
```

或在代码中：

```
class Course(models.Model):
    name            = models.CharField(max_length = 100)

class Topic(models.Model):
    name            = models.CharField(max_length = 100)
    course          = models.ForeignKey('Course' , null = True , blank = True)

class SubTopic(models.Model):
    name            = models.CharField(max_length = 100)
    topic          = models.ForeignKey('Topic' , null = True , blank = True) 
```

我想要的是获取课程、主题和子主题的列表，以在导航系统之**类的树中表示。**

我知道`select_related()`可以跟随和发现`ForeignKeys`任何深度。如何在我的场景中使用该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:33:09.823

如果您只是想输出到模板，您可以使用[_set](https://docs.djangoproject.com/en/dev/topics/db/queries/#related-objects)例如，如果您将课程列表传递给您的模板。

```
{% for c in courses %}
    {{c.name}}
    {% for t in c.topic_set.all %}
       {{t.name}}
       {% for st in t.subtopic_set.all %}
           {{st.name}}
       {% endfor %}
    {% endfor %}
{% endfor %} 
```

# php - 从不带 0 的数组中获取 MIN 值

> ID：11393216
> 
> 赞同：6
> 
> 时间：2012-07-09T10:26:58.623
> 
> 标签：php

```
$array1 = array(0,1,3,0);
$array2 = array(2,0,3,2);
$array3 = array(0,4,5,1);

echo min($array1) . "\n";
echo min($array2) . "\n";
echo min($array3) . "\n"; 
```

这还给我：

```
0
0
0 
```

但我想收到：

```
1
2
1 
```

如何在函数 MIN 中跳过 0？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T10:28:23.383

尝试[array_filter](http://php.net/manual/en/function.array-filter.php)：

> 如果未提供回调，则将删除所有等于 FALSE 的输入条目。

所以它会`0`为你删除。

```
echo min(array_filter($array1)) . "\n"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T10:29:12.100

此外`array_filter`，您可以更明确地使用

```
$min = min(array_diff($array1, array(0));    // result = 1 
```

这可以让您很容易地忽略更多值，例如

```
$min = min(array_diff($array1, array(0, 1)); // result = 3 
```

# c#-2.0 - 正则表达式 - DLE 未处理

> ID：11393220
> 
> 赞同：1
> 
> 时间：2012-07-09T10:27:12.383
> 
> 标签：c#-2.0

我需要丢弃 SOAP 响应中的 ASCII 控制字符，因为这些控制字符不允许形成有效的 XML 数据。

我使用下面的正则表达式来丢弃控制字符，

@"[^\x09\x0A\x0D\x20-\xD7FF\xE000-\xFFFD\x10000-x10FFFF]"

但是上面的 REGEX 没有处理 ASCII 控制字符 - DLE（数据链路转义）。

请帮助我处理正则表达式，它将丢弃所有 ASCII 控制字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:18:55.630

通过给出的链接。

[http://www.theplancollection.com/house-plan-related-articles/hexadecimal-value-invalid-character](http://www.theplancollection.com/house-plan-related-articles/hexadecimal-value-invalid-character)

根据链接，下面提到的正则表达式适用于一组有效的 XML 字符。

```
string re = @"[^\x09\x0A\x0D\x20-\xD7FF\xE000-\xFFFD\x10000-x10FFFF]";
return Regex.Replace(text, re, ""); 
```

我相信 DLE 本身就包含在这组有效的表达式中。因此它没有被替换。我不熟悉正则表达式。如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:52:54.453

DLE 是`\x10`，那不在您的正则表达式中。

此外，您似乎也用 . 丢弃了所有字母数字字符`\x20-\xD7FF`。那是对的吗？

见[http://en.wikipedia.org/wiki/Control_character](http://en.wikipedia.org/wiki/Control_character)

# bash - bashrc - 带有空格的变量以表示惰性

> ID：11393224
> 
> 赞同：1
> 
> 时间：2012-07-09T10:27:21.507
> 
> 标签：bash, variables, spaces

我想在我的 .bashrc 中设置这样的东西

```
export p1=`eval echo ~/projects/customer name/project name`
export p2=`eval echo ~/projects/customerb name/project name` 
```

`cd $p1`由于空格，键入失败，我得到未找到目录的问题。

我知道打字`cd "$p1"`（*在变量周围带有语音标记*）是有效的。

如何正确设置我的变量，以便我可以做这样的事情......

```
cd $p2
cp $p1/file $p2/
open $p1/lib 
```

...**无需**每次都输入语音标记？

在此先感谢，
尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:45:01.687

这不是一个好主意。您应该学会按原样处理外壳，而不是依靠 hack 来获得您认为更美观的行为。

也就是说，您可以通过`IFS`在分配时从变量中删除空间来达到您想要的效果`p1`

样本：

```
IFS= p1="/path with/some/spaces in/it"
ls -l $p1 
```

现在这是不言而喻的，但无论如何我都会说清楚，你不应该放松`IFS`并保持这种状态；大多数时候结果不会是你所期望的。您应该只对特定命令执行此操作。

此外，您要查找的术语是“双引号”，而不是“语音标记”。一般而言，在谷歌搜索、提问和搜索文档时，最好使用正确的行话。

编辑：

复制粘贴友好版本：

```
IFS= export p1="$HOME/projects/customer name/project name"
cd $p1 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-09T10:37:56.723

您可以通过创建一个为您放置引号的函数轻松地做到这一点：

```
cdd(){
    command cd "$*"
} 
```

现在，如果你输入

```
ps1="some path /with lots /of spaces/"
cdd $ps1 
```

这确实会显示所需的行为。

请注意（如其他注释中所示） ，如果路径名中包含空格以外的特殊字符，这**可能无法按预期工作——在使用它之前***知道*何时使用它。 `$p1`

# html - 如何在检票口中使用 html5 日历输入类型

> ID：11393229
> 
> 赞同：4
> 
> 时间：2012-07-09T10:27:44.263
> 
> 标签：html, wicket, wicket-1.5, wicketstuff

我正在试验 HTML5。我想知道的是 Wicket 如何处理 HTML5 输入类型，例如日期和电子邮件，如果有的话？目前，Wicket 使用 java 脚本为日期输入生成日历。

使这个问题复杂化的是 Wicket 如何处理不支持日期类型的 HTML5 输入标签（以及其他新的 HTML5 标签）的浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:22:43.220

Wicket（1.5 及更高版本）不支持 input type='date' 或开箱即用的类似构造。Wicket Extensions 中有一个`DateTextField`，但它没有指定`type='date'`（还）。我建议创建您自己的实现来正确设置类型属性（我猜测为什么它们没有被添加到该字段是它会破坏现有的应用程序）。

有[EmailTextField](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/markup/html/form/EmailTextField.html)、[NumberTextField](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/markup/html/form/NumberTextField.html)等。[_](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/markup/html/form/TextField.html) 这些添加类型属性并验证服务器上的输入。

不支持 HTML5 输入的浏览器回退到`type='text'`，因此从 Wicket 的角度来看没有什么不同。Wicket 仍将根据设置的规则验证输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-13T17:07:14.987

您只需要覆盖方法 TextField# **getInputType()**并返回“ **date** ”，这样您就可以跳过 TextField 组件中对 onComponentTag 方法的验证。例如，如果您不想创建自己的组件，可以使用这样的匿名类：

```
 DateTextField dob = new DateTextField("dob", dobModel){
            private static final long   serialVersionUID    = 1L;

           /* (non-Javadoc)
            * @see org.apache.wicket.markup.html.form.TextField#getInputType()
            */
            @Override
            protected String getInputType()
            {
                return "date";
            }           
        }; 
```

# java - 如何在不访问数据库的情况下显示带有一些数据（不是当前数据）的 html

> ID：11393232
> 
> 赞同：0
> 
> 时间：2012-07-09T10:27:55.050
> 
> 标签：java, html, database, jsp

我有一个 Web 应用程序，我从用户那里获取一些输入，当用户单击提交按钮时，会查询数据库并将结果显示在 html 页面中。现在，我有一个新要求，页面上有一个链接（用户填写详细信息的jsp页面），单击该链接必须显示之前单击提交按钮后显示的结果（最新结果）但应该不再查询数据库。一个例子应该清楚

比方说，用户在页面中填写详细信息并第一次单击提交。显示的结果是“APPLE”。现在，同一用户返回并单击他填写详细信息的同一页面上的链接（例如“详细信息”）。同时，数据库中的值已更改为 MANGO。现在，当用户单击此详细信息链接时，结果页面应显示 APPLE 而不是 MANGO（当用户单击提交按钮而不是单击“详细信息”链接时应显示 MANGO）

如何做到这一点？我不想使用屏幕抓取解决方案。有更好的方法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:49:27.197

我认为您可以在用户提交按钮时轻松缓存页面。当用户单击链接时，会显示您页面的缓存版本。如果他再次单击提交，则清除旧缓存并生成新缓存。您的旧链接将指向您的缓存文件，所以一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:33:02.720

显示陈旧数据而不是显示当前数据是一个很奇怪的要求，但如果你真的想这样做，你可以只将第一个查询的结果存储在会话中，然后从会话中获取详细信息，而不是从数据库。

或者您可以将第一个查询的结果存储在某个数据库表中，并从该数据库表中获取详细信息，而不是从“真实”数据库表中获取它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:33:32.873

有两种方法：

*   **在客户端存储详细信息**

在第一次请求期间使用 AJAX 并将详细信息存储在客户端。并在以后需要时使用这些详细信息。

*   **在服务器端存储详细信息**

在第一次请求期间，将详细信息存储在用户会话中，并在您需要时从中获取。

# jquery - jquery隐藏框脚本在IE中不起作用

> ID：11393234
> 
> 赞同：0
> 
> 时间：2012-07-09T10:27:56.510
> 
> 标签：jquery, internet-explorer, explorer

我不是高级 jquery 程序员。刚刚开始我的冒险。我遇到了一个严重的问题。我创建的脚本在 IE 中不起作用。它适用于 Firefox 和 chrome。你能帮我解决这个问题吗？

```
 $(document).ready(function(){

    $('#quotein')
        .css('margin-left', '-890px');

    var paddingLeft = parseInt($('#quotein .quote1').css('padding-left'));
        console.log(paddingLeft);
    var paddingRight = parseInt($('#quotein .quote1').css('padding-right'));
    var slideWidth = $('#quotein .quote1').width() + paddingLeft+paddingRight;
    slideWidth = ''+slideWidth+'px';

    var isHidden = false;

    $('#quotein .quotebutton')
        .css('cursor', 'pointer')
        .click(function(){
            if(!isHidden){
                isHidden = true;
                $(this)
                    .css('background', 'url(_images/generic/quote-out.png) no-repeat left') 
                    .parent()
                    .animate({
                        'left': slideWidth
                    }, 'fast');
            }else{
                isHidden = false;
                $(this)
                    .css('background', 'url(_images/generic/quote-in.png) no-repeat left')
                    .parent()
                    .animate({
                        'left': '0px'
                    }, 'fast');
            }
        });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:28:23.787

> 注释 console.log 行，当您没有打开开发者工具并尝试写入控制台时，有时 IE 会抛出错误。– slash197 7 月 9 日 10:34

这导致了一个问题。谢谢@slash197。

# security - 谷歌搜索后 Chrome 更改历史记录的方式是否值得关注？

> ID：11393236
> 
> 赞同：0
> 
> 时间：2012-07-09T10:28:07.890
> 
> 标签：security, google-chrome

在所有版本的 Chrome 中，您都可以使用地址栏作为直接跳转到 google 搜索结果进行查询的快捷方式。

我刚刚在 Chrome（Mac 版 20.0.1132.47）中注意到，当我在地址栏中键入搜索查询并获取结果*然后点击历史记录返回按钮*时，我现在被带到 Google 主页，我的查询预先写在文本框中。

示例：如果我从一个页面开始，然后在地址栏中输入“如何上传到 imgur”，我会直接进入此处： ![在此处输入图像描述](../Images/66fa14917c4ac4bbf68a2df6df40cefd.png) 然后，当我按下后退按钮时，我会进入此页面： ![在此处输入图像描述](../Images/c5a9cfb7b1ef32bfa834bf81a20bf598.png)

这是 Chrome 的一项新功能，还是我多年来一直对它视而不见？我有 90% 的把握它以前没有这样做过。

但我真正的问题是：这是如何完成的？你怎么能欺骗浏览器认为你去过一个你没有去过的页面，这难道不是一个安全问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:41:48.870

我的 chrome（相同版本，也是 Mac）不这样做。我还在 Canary 版本（目前为 22）上对此进行了测试，它也没有这种行为。

也许这是 google.com（而不是 chrome）正在试用的东西？

Chrome 在后台/隐藏选项卡中从多功能框（地址栏）加载这些搜索结果，然后在您按 Enter 时将选项卡带入查看，因此浏览器窗口中发生的任何事情都是 google.com 正在做的事情，而不是 chrome 它是自己。

至于它是如何完成的，很可能是 HTML History API，你可以在这里阅读：http: [//diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

# java - 从 MySQL 访问数据

> ID：11393237
> 
> 赞同：0
> 
> 时间：2012-07-09T10:28:15.847
> 
> 标签：java, mysql

我需要将数据从 excel 文件导入 MySQL，然后访问数据并显示它。有人可以给我一个关于我应该如何去做的想法吗？也有人可以简要介绍一下此任务的**硬件/软件要求**（要安装的 MySQL 版本）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:32:22.147

这个问题相当广泛。这里有一些提示：

*   [Apache POI](http://poi.apache.org/)是用于 Microsoft 文档的 Java API：有了它，您应该能够从 Java 读取 Excel 文件

*   然后您可以使用 JDBC 将您的数据加载到 MySQL（假设您已经有一个适当的数据库实例和表）。在 Web 上进行快速搜索将为您提供许多这样的[示例](http://www.vogella.com/articles/MySQLJava/article.html)。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:33:23.927

[http://blog.tjitjing.com/index.php/2008/02/import-excel-data-into-mysql-in-5-easy.html](http://blog.tjitjing.com/index.php/2008/02/import-excel-data-into-mysql-in-5-easy.html)

上面的链接说明了如何从 Excel 转换数据并将其放入 MySQL 数据库。

[http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)

至于您的下一个问题，您需要从网站获取 MySQL 的 JDBC 连接（上面的链接），并使用它连接到您的数据库。

完成后，您可以使用多种方法来检索数据，并将其返回以在您的程序中使用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:33:37.307

这取决于您的数据的结构以及您希望多久完成一次。

对于一次性加载，如果您有一些简单的东西（例如 1 个表格），您可以在 excel 中使用字符串连接函数来创建插入。

如果您有更复杂的事情，您可以使用编程语言来创建插入。我在 UNIX 上，我喜欢 PERL，我正在将 excel 电子表格转换为 CSV 文件（另存为）并在 PERL 中解析这些文件。如果您在 Windows 上，您可能有更好的编程选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T10:42:46.710

这是测试/设置要求还是应用程序应该能够从 excel 文件加载数据的业务要求？

在第一种情况下，我只需将其转换为 CSV 并使用`mysqlimport` 或使用 SQLYog 之类的 GUI 工具导入数据。软件：SQLYog（免费社区版）、mysqlimport（MySQL自带）

在第二种情况下，我会使用 Apache POI。软件：Apache POI（免费和开源）

顺便说一句，也可以使用 excel 文件创建 ODBC 数据源。您可以使用 JDBC-ODBC 桥接器来访问它。

硬件：无特殊硬件要求。

# ruby - 如何定义方法并使用一些参数对其应用

> ID：11393239
> 
> 赞同：-2
> 
> 时间：2012-07-09T10:28:25.270
> 
> 标签：ruby, methods

我有一些代码需要附加一个新的窗口页面并检查它是否存在。我需要多次这样做。我想创建一些可以定义算法的类，然后将其应用于具有确切标题值的类。我写了以下代码：

```
def check_title()
@a
$ie=Watir::IE.attach(:title, @a)
rescue Watir::Exception::NoMatchingWindowFoundException
puts ("could not find browser")
end
end 
```

在需要的地方我粘贴代码来调用方法

```
check=Title.new("Business Partner")
check.check_title() 
```

我收到此错误消息 -

```
`initialize': wrong number of arguments(1 for 0) (ArgumentError) 
```

请告诉我应该如何正确描述这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:33:19.037

如果你不知道如何用 ruby​​ 创建一个类，你可能应该给自己买一本关于它的书，或者阅读帮助你学习 ruby​​ 的大量在线资源......

```
class Title
  def initialize(title)
    @a = title
  end
end 
```

# android - Android：GridView 嵌套在 ListView 中

> ID：11393241
> 
> 赞同：1
> 
> 时间：2012-07-09T10:28:34.033
> 
> 标签：android, android-layout, android-listview, android-gridview

我目前通过将 GridView 添加到 ListView 的一行而陷入困境，它为每一行使用不同的布局。在我看来，这应该是可能的，不是吗？或者这应该怎么做？虽然我总是收到 NullPointerException 并且不知道为什么。

我使用以下代码为我的 ListView 生成视图。第二个视图应该将 GridView 添加到 ListView：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        int type = getItemViewType(position);
        if (convertView == null) {
            switch (type) {
                case TYPE_ITEM0:
                    convertView = mInflater.inflate(R.layout.foto_details_headline, null);
    /* Logic for first Row of the ListView */
                    break;
                case TYPE_ITEM1:

                    convertView = mInflater.inflate(R.layout.foto_details_gridview, null);
                    GridView gridview = (GridView) findViewById(R.id.gridview);
                    Context m = getApplicationContext();
                    int s = mData.get(0).pictures.size();

    //le wild null pointer appears                        
                    gridview.setAdapter(new FotoDetailsImageAdapter(convertView.getContext(), mData.get(0).pictures));
                    break;

            }

        }

        return convertView;
    } 
```

当我想设置适配器 (FotoDetailsImageAdapter) 时会出现 NullPointer。上下文和图片不是空的——我已经证明了这一点。我怀疑处理到 ImageAdapter 的上下文有问题。

总而言之，它应该看起来类似于我的 iOS 应用程序——我在其中实现了相同的逻辑（也使用列表视图）。第二行包含一个 GridView。

![在此处输入图像描述](../Images/d4289a349abe064f35e56c0008650aa9.png)

有任何想法吗？是否可以在 ListView 中嵌套 GridView？这应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:32:00.520

您可以将 GridView 放在 ScrollView 中。这是 Youtube 链接[http://www.youtube.com/watch?v=kNX996ZZ2CI](http://www.youtube.com/watch?v=kNX996ZZ2CI)

在这种情况下，GridView 将是可滚动的

# extjs - ExtJs 4 - 在网格内的组合框中显示一个值而不是它的 id

> ID：11393242
> 
> 赞同：0
> 
> 时间：2012-07-09T10:28:35.823
> 
> 标签：extjs, extjs4

我在 StackOverflow 上的第一个问题，不要责怪我太多；）

我必须做一个界面，显示一个网格，其中包含从 ajax 请求加载的内容。

在这一点上，没有什么困难，我设法创建了一个模型、一个商店和一个代理，以便从我的 php/mysql 脚本中获取值并将它们显示在网格上。

但是在返回的数据中，我有一些 ID 应该被转换为存储在另一个 MySQL 表中的等效值。

在这一点上，我被卡住了，在搜索了几个小时后，我仍然不明白如何将我必须的 id 值重新映射到另一个商店/模型的标签。

这是代码：

面板视图：

```
Ext.define('Audiotel.views.TimeRangePanelView', {
extend : 'Ext.grid.Panel',
config : {
    columns : [{
        header : 'Start date',
        dataIndex : 'slo_time_start',
        editor : {
            xtype : 'timefield',
            format : 'H:i:s',
            increment : 60 // In minutes
        },
        renderer : function(value, metaData, record, rowIndex, colIndex, store, view) {
            return value;
        }
    }, {
        header : 'End Date',
        dataIndex : 'slo_time_end',
        editor : {
            xtype : 'timefield',
            format : 'H:i:s',
            increment : 60 // In minutes
        },
        renderer : function(value, metaData, record, rowIndex, colIndex, store, view) {
            return value;
        }
    }, {
        header : 'Days',
        dataIndex : 'slo_valid_days',
        editor : Ext.create('Ext.form.field.ComboBox', {
            typeAhead : true,
            triggerAction : 'all',
            selectOnTab : true,
            store : [['Everyday', 'Everyday'], ['WE and holiday', 'WE and holiday'], ['Week', 'Week']],
            lazyRender : true,
            listClass : 'x-combo-list-small'
        })
    }, {
        header : 'Range',
        dataIndex : 'slo_hou_id',
        editor : Ext.create('Ext.form.field.ComboBox', {
            selectOnTab : true,
            store : [['1', 'Peak'], ['2', 'Offpeak'], ['3', 'Night']],
            listClass : 'x-combo-list-small',
        }),
        renderer : function(value, metaData, record, rowIndex, colIndex, store, view) {
            return value;
        }
    }],
    height : 400,
    width : '100%',
    store : Audiotel.stores.StoreBuilder.factory('TimeRange').createStore('getDefaultTimeRange'),
    renderTo : "range_table_div",
    frame : true
},

constructor : function() {
    this.callParent()
}
}); 
```

商店建设者（使用代理）：

```
Ext.define('Audiotel.stores.StoreBuilder', {

statics : {
    instance: null,
    factory: function(name) {
        if(!this.instance){
            this.instance = new this({storeName: name});
        }
        return this.instance;
    }
},

storeName: null,

config: {
    storeName: ''
},

constructor: function(config){
        this.initConfig(config);
},

applyStoreName: function(name){
    if(!name){
        throw new Error('['+ Ext.getDisplayName(arguments.callee) +'] Name of store to create.');
    }
    return name;
},

createStore: function(proxyMethod, proxyParams){
    var modelName = Audiotel.utils.AppUtils.BASE_PATH+'.'+Audiotel.utils.AppUtils.MODEL_PATH+'.'+this.getStoreName()+'Model';
    Ext.Loader.syncRequire(modelName);  
    return Ext.create('Ext.data.Store', {
            autoLoad: true,
            proxy: Ext.create('Audiotel.proxies.AudiotelProxyWrapper', {method: proxyMethod, params: proxyParams}).getWrappedProxy(),
            model:  modelName,
            storeId:    this.getStoreName()+'Store'
        });
}
}); 
```

模型 ：

```
Ext.define('Audiotel.models.TimeRangeModel', {
extend : 'Ext.data.Model',
alias : 'TimeRange',
fields : [{
    name : 'slo_time_start',
    type : 'string'
}, {
    name : 'slo_time_end',
    xtype : 'string'
}, {
    name : 'slo_valid_days',
    type : 'string'
}, {
    name : 'slo_hou_id',
    type : 'string'
}]
}); 
```

我要翻译的值是“slo_hou_id”，它仍然显示“1”而不是“峰值”。

提前感谢您的帮助！

ps：我对 ExtJS 很陌生...

**编辑 ：**

我为我的其他表值创建了一个新商店：

```
Ext.define('Audiotel.models.HoursModel', {
extend : 'Ext.data.Model',
alias : 'Hours',
fields : [{
    name : 'hou_id',
    type : 'int'
}, {
    name : 'hou_label',
    xtype : 'string'
}]
}); 
```

我已经将数据加载到其中：

```
[{"hou_id":"1","hou_label":"Heures pleines"},{"hou_id":"2","hou_label":"Heures creuses"},{"hou_id":"3","hou_label":"Heures nuit"}] 
```

但是当我尝试搜索值时，它似乎失败了：

```
var hours = Audiotel.stores.StoreBuilder.factory('Hours').createStore('getHoursValues');

console.log(hours.getById(1));
console.log(hours.findRecord('hou_id', 1)); 
```

全部返回 null ... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:37:37.460

You have 2 options:

1.  First option is that you return what you want from MySQL, instead of doing the "join" in Javascript: so, from MySQL/PHP, return "Peak" instead of "1".
2.  Use "Store.find*" functions to map "1" to "Peak". Something like `other_store.findRecord('slo_hou_id', 1).attribute_you_want`.

# extjs4 - 如何在 extjs 中为标签创建弯曲边框？

> ID：11393243
> 
> 赞同：1
> 
> 时间：2012-07-09T10:28:36.390
> 
> 标签：extjs4, extjs4.1

我正在尝试为 extjs 中的标签创建弯曲边框（带弯曲角的边框线）。这是为了突出一些重要的文字？

```
 xtype: label,
 text: 'my text',
 margin: '0 0 0 5' 
```

这些是我当前该标签的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:54:28.483

最好的方法是使用 css。

该css文件：

```
.round-corners {
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    -o-border-radius: 3px;
    -ms-border-radius: 3px;
    -khtml-border-radius: 3px;
    border-radius: 3px;
} 
```

进而：

```
xtype: label,
text: 'my text',
margin: '0 0 0 5',
cls: 'round-corners', 
```

# security - 在 POSTGRES 数据库中为“postgres”用户添加密码是个好主意吗？

> ID：11393244
> 
> 赞同：0
> 
> 时间：2012-07-09T10:28:38.070
> 
> 标签：security, postgresql

我的问题与安全性和任何其他类型的限制有关。

如果我为“postgres”用户添加密码，这将使其更容易受到攻击。我会因此失去任何功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:27:50.057

它有点过时了，但[PostgreSQL 档案](http://archives.postgresql.org/pgadmin-support/2009-05/msg00024.php)中的这个链接可能会有所帮助。

“postgres”用户没有默认密码，因此除非您通过 pg_hba.conf 文件允许，否则您无法以该用户身份连接。

所以 Daniel 是对的：这真的归结为 pg_hba.conf 文件的安全性。

# java - 使用 mvc 模式和观察者模式构建 swing gui

> ID：11393245
> 
> 赞同：2
> 
> 时间：2012-07-09T10:28:53.470
> 
> 标签：java, swing, model-view-controller, observer-pattern

我必须使用观察者模式构建一个应用 mvc 模式的摇摆 gui。我了解观察者模式的工作原理，但我不知道如何使用观察者模式实现 mvc 模式。有人可以帮助我理解可能发布的示例代码。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:12:19.247

解释了 MVC 的实现以及观察者模式的工作原理：

[最新的 Swing MVC 示例 + 问题](https://stackoverflow.com/questions/2330385/up-to-date-swing-mvc-example-question/2338877#2338877)

使用 Swing 时要遵循的一些准则：

[挥杆的 GUI 指南](https://stackoverflow.com/questions/2337323/gui-guidelines-for-swing/2337940#2337940)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:40:29.520

MVC 是一种分离模型、视图和控制器的模式。Swing 基于 MVC，因此被称为**PLAF** (Pluggable look and feel)

在 Swing 中，它的 Controller，当某个动作完成时做出反应，然后控制器通知 Model 根据所做的动作采取行动，然后它的控制器通知 View 模型发生了一些变化，然后 View 发生变化本身来反映模型的变化。

如何使用 MVC

**1.**为 gui 和业务逻辑创建**单独的包。** 例如：

```
com.demo.gui;

com.demo.logic; 
```

**2.**尽量**让业务逻辑远离GUI**，代码应该使得相同的业务逻辑可以应用到桌面应用的Swing和Web开发的JSP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:56:18.953

观察者模式通常使用 Swing 中的侦听器来实现。本文解释了如何为 Swing 组件本身实现类似 MVC 的架构：

[http://java.sun.com/products/jfc/tsc/articles/architecture/](http://java.sun.com/products/jfc/tsc/articles/architecture/)

# html - 在 ASP.NET MVC3 中布局位于不同表单上的数据

> ID：11393246
> 
> 赞同：0
> 
> 时间：2012-07-09T10:28:53.770
> 
> 标签：html, asp.net-mvc-3, razor, html-table

我正在尝试对视图文件的布局进行排序，以便所有表单字段都垂直排列，两个按钮在页面底部水平排列。

这是我尝试格式化之前代码的样子：

```
@using (Html.BeginForm())
{

<p>
    @Html.LabelFor(m => m.UserName)
    @Html.EditorFor(n => n.UserName)
    @Html.ValidationMessageFor(m => m.UserName)
</p>

<p>
    @Html.LabelFor(m => m.Role)
    @Html.DropDownListFor( m => m.Role, Model.Roles, "-- Role --")
    @Html.ValidationMessageFor(m => m.Role)
</p>

 <p>
    @Html.LabelFor(m => m.InsertDate)
    @Html.EditorFor(n => n.InsertDate)
    @Html.ValidationMessageFor(m => m.InsertDate)
</p> 

 <p>
    @Html.LabelFor(m => m.ActiveInd)
    @Html.EditorFor(n => n.ActiveInd)
    @Html.ValidationMessageFor(m => m.ActiveInd)
</p> 

<p>
    <input type="submit" value="save"/>
   </p>
}

@using (Html.BeginForm("Index", "ZUserRole", "GET"))
{
    <input type="submit" value="cancel"/>
} 
```

当它在页面上呈现时，字段都脱节了，按钮位于不同的水平线上。我试图通过使用表格来解决这个问题。但是，由于 Html.BeginForm 函数，这遇到了问题。这是我的尝试：

```
<table>

@using (Html.BeginForm())
{

<tr>
<td>
    @Html.LabelFor(m => m.UserName)
    </td>
    <td>
    @Html.EditorFor(n => n.UserName)
    @Html.ValidationMessageFor(m => m.UserName)
    </td>
</tr>

<tr>
<td>
    @Html.LabelFor(m => m.Role)
    </td>
    <td>
    @Html.DropDownListFor( m => m.Role, Model.Roles, "-- Role --")
    @Html.ValidationMessageFor(m => m.Role)
</td>
</tr>

 <tr>
<td>
    @Html.LabelFor(m => m.InsertDate)
    </td>
    <td>
    @Html.EditorFor(n => n.InsertDate)
    @Html.ValidationMessageFor(m => m.InsertDate)
</td>
</tr>

 <tr>
<td>
    @Html.LabelFor(m => m.ActiveInd)
    </td>
    <td>
    @Html.EditorFor(n => n.ActiveInd)
    @Html.ValidationMessageFor(m => m.ActiveInd)
</td>
</tr>

<tr>
<td>
    <input type="submit" value="save"/>
   </td>
}
<td>
 @using (Html.BeginForm("Index", "ZUserRole", "GET"))
{
<input type="submit" value="cancel"/>
    }
 </td>
 </tr>

 </table> 
```

这会导致解析错误导致的异常。我猜你不能在 BeginForm 函数的任何一侧打开 html 标签。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:52:55.987

使用无表设计将是最佳选择。如果您仍想使用表格，请尝试以下操作：

```
<table>
<tr>
<td>
@using (Html.BeginForm())
{
<table>
<tr>
<td>
    @Html.LabelFor(m => m.UserName)
    </td>
    <td>
    @Html.EditorFor(n => n.UserName)
    @Html.ValidationMessageFor(m => m.UserName)
    </td>
</tr>

<tr>
<td>
    @Html.LabelFor(m => m.Role)
    </td>
    <td>
    @Html.DropDownListFor( m => m.Role, Model.Roles, "-- Role --")
    @Html.ValidationMessageFor(m => m.Role)
</td>
</tr>

 <tr>
<td>
    @Html.LabelFor(m => m.InsertDate)
    </td>
    <td>
    @Html.EditorFor(n => n.InsertDate)
    @Html.ValidationMessageFor(m => m.InsertDate)
</td>
</tr>

 <tr>
<td>
    @Html.LabelFor(m => m.ActiveInd)
    </td>
    <td>
    @Html.EditorFor(n => n.ActiveInd)
    @Html.ValidationMessageFor(m => m.ActiveInd)
</td>
</tr>

<tr>
<td>
    <input type="submit" value="save"/>
       </td>
</tr></table>
    }
</td>
    <td valign="bottom">
     @using (Html.BeginForm("Index", "ZUserRole", "GET"))
    {
    <input type="submit" value="cancel"/>
        }
     </td>
     </tr>

     </table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:48:11.953

在这种情况下，您需要为标签或第一个 td 单元格提供固定宽度。在上面的表格示例中，如果您为第一个 TD 子项设置了固定宽度，则所有标签都会对齐。话虽如此，也给每个表格自己的表格；如果您为第一个单元格设置了固定宽度，那么无论您使用多少张表格，它们都会排成一行。

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:44:23.160

最简单的方法是使用 CSS。

我假设你知道如何使用 CSS。

如果没有，您可以遵循很多教程，例如：[Css Tutorial](http://www.w3schools.com/css/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:35:37.890

我将两个不同的提交按钮放在同一个表单上，以便它们可以轻松排列。然后我将它们提交给两个单独的控制器操作方法，这些方法使用自定义属性进行注释： [HandlesSubmitFrom(name ="XXXXX")] 其中名称对应于相关提交按钮的名称。为了让它工作，我必须稍微不同地命名第二个动作方法（因为它们具有相同的签名），但将注释 [ActionName("Index")] 放在它上面。

# python - Django celery 使用 Ajax 检索任务状态

> ID：11393248
> 
> 赞同：6
> 
> 时间：2012-07-09T10:29:03.023
> 
> 标签：python, python-2.7, celery, django-celery

我正在使用 celery 2.5.3 和 django celery - 2.5.5。我使用 mysql 作为代理。

这是场景，当用户请求我在从另一个站点获取数据的工作人员中排队工作时。这可能需要几分钟，具体取决于数据的大小。作业开始后，我们必须显示加载器图像。当工作人员完成下载数据（将是 html 格式）时，我必须用检索到的数据替换加载器图像。

我们使用 celery 的原因是有时脚本需要超过 30 秒才能完成并超时。

目前我计划使用 ajax 调用来检查作业的状态，这个函数将在固定的时间间隔使用。

我经历了几个问题，这就是我想出的

要启动工作人员，我正在使用此代码

```
def testCelery(request):
   result=testadd.apply_async()
   return HttpResponse(str(result.task_id)) 
```

这会将task_id返回到客户端并使用ajax我将向服务器发送请求以检查作业是否已完成

```
def getStat(request,task_id):
      res = AsyncResult(task_id)
      s=res.ready()
      if s==True:
         return HttpResponse(str(res.get()))
      else:
         return HttpResponse(str(s)) 
```

我不确定这是否是正确的方法，或者它在实时场景中的表现如何。

请指教。

编辑：使用 djcelery 视图检查状态

好的，我已经按照 bruno 的建议修改了我的代码，现在它看起来像

```
from djcelery import views as celery_views
def getStat(request,task_id):
    return celery_views.is_task_successful(request, task_id) 
```

它似乎正在工作。并且仍然使用带有 task_id 的 ajax 调用来检索状态。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T12:07:36.490

Django-celery 已经提供了您正在寻找的视图和 url -`views.task_status`并且`views.is_task_successful`都将 task_id 作为参数并返回一个带有（resp.）完整状态（包括异常和如果任务失败时的回溯）的 json 响应，或者只是一个布尔标志。

例如，将以下内容添加到`urls.py`：

```
urlpatterns += patterns('djcelery.views',
    url(r'^task/status/(?P<task_id>.+)/$', 'task_status',
    name='task-status')
) 
```

# python - ViewDoesNotExist：错误

> ID：11393257
> 
> 赞同：0
> 
> 时间：2012-07-09T10:29:20.073
> 
> 标签：python, django, view, error-handling

我有以下代码，你可以看到`C_account()`视图中有一个函数，但我仍然得到

```
**Exception Type: ViewDoesNotExist at /create_account/

Exception Value: Could not import EPM.views.C_account. View does not exist in module EPM.views.** 
```

任何想法可能是什么问题？

`EPM/views.py`包含`C_account`函数定义的视图 ( )：

```
from django.shortcuts import render_to_response
from django.http import HttpResponse, HttpResponseRedirect
from django.template import RequestContext
from EPM.forms import *
from EPM.models import *
from datetime import date
from django.contrib.sessions.models import Session
from django.conf.urls.defaults import *

from django.forms.formsets import formset_factory

import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'deducive.settings'

from django.core.management import setup_environ
from deducive import settings
import csv

def C_account(request):
 if request.method == 'POST':
    form = CreateAccountForm(request.POST)
    if form.is_valid():

    acc_act_date = form.cleaned_data['Account_Activation_Date']
    present_date = date.today()
    if acc_act_date <= present_date:
        stat = 'active'
    else:
        stat = 'inactive'

    acc_cat_id = Account_Categories_T.objects.get(cat_name = stat, category = 'status')

        sto =   GL_Account_T(account_number=form.cleaned_data['Account_Number'],
                account_name=form.cleaned_data['Account_Name'],
                                account_description=form.cleaned_data['Account_Description'],
                                parent_account_number=form.cleaned_data['Parent_Account_Number'],
                                account_manager=form.cleaned_data['Account_Manager'],
                                account_category_id = acc_cat_id,
                                account_activation_date=form.cleaned_data['Account_Activation_Date'],
                                )
        sto.save()

        return HttpResponseRedirect('/create_account/thanks/')

else:
    form = CreateAccountForm()
return render_to_response('CreateAccountForm.html', {'form': form}, context_instance=RequestContext(request))

def thanks(request):
    return render_to_response('Thanks.html') 
```

和 URLConf ( `EPM/urls.py`)，它的`C_account`视图正确连接到`create_account/`URL：

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('EPM.views',
    (r'^create_account/$', 'C_account'),
    (r'^create_account/thanks/$', 'thanks'),) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:12:05.793

很高兴听到你解决了这个问题。

稍微令人困惑的`ViewDoesNotExist`异常可能是因为 Django`ImportError`在读取时遇到了`views.py`（其中有`from EPM.forms import *`，由于您提到的字段拼写错误，它会触发异常）；当前的行为是吞下许多异常（例如`ImportError`）并将它们重新引发为`ViewDoesNotExist`异常。

有一个四年前的[Django 错误](https://code.djangoproject.com/ticket/6379)讨论如何使这些错误消息更有帮助（主要是通过捕获更少的异常）。同时，您可以通过尝试来追踪这些类型的问题，*例如*

```
from EPM.views import * 
```

在 shell ( `./manage.py shell`) 中，它将向您显示原始异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:51:06.297

我终于破解了我的错误。问题出在我的 forms.py 中，我在一个地方将 CharField 写为 Charfield。但我仍然想知道为什么它指向我通过在 shell 中`forms.py` 导入我得到它的错误。`views.py`

# css - 特定示例中的 CSS 层次结构

> ID：11393258
> 
> 赞同：0
> 
> 时间：2012-07-09T10:29:23.617
> 
> 标签：css, hierarchy

我正在为 Joomla 编写简单的菜单模块！在这一点上，我正在研究一个核心 css 结构 - 比如说 ataptable 模板 - 这将重置最重要的全局 css 声明。我在以下 HTML 结构中遇到了 CSS 层次结构的问题：

```
<div id="main" role="main">
<div id="top">
    <div class="menu">
        <ul class="main-level">
            <li class="main-level">
                <a class="main-level" href="/joomla17/index.php/using-joomla">Using Joomla!</a>
                    <ul class="sub-level">
                        <li class="sub-level">
                            Menu Item
                        </li>
                    </ul>
            </li>
        </ul>
    </div>
</div> 
```

和 CSS 文件：

主布局 css 文件（独立于模块）：

```
/* PART OF MAIN LAYOUT FILE */          
    #main ul {    
list-style-position: outside;
        list-style-type: square;
        margin: 10px 0;
        padding: 0 0 0 15px;
    } 
```

模块 css 文件（应重置 css 全局变量的声明）：

```
 /* MY MODULE CLASSES */
.mod_sjqmenu ul.sub-level {
    border: 1px solid #666666;
    display: block;
    margin: 0;
    padding: 0;
    position: absolute;
    text-align: left;
    width: 100%;
}

.mod_sjqmenu ul {
    cursor: pointer;
    list-style: none outside none;
    margin: 0;
    padding: 0;
    position: relative;
    z-index: 9999;
} 
```

由于某种原因，我的模块声明不会覆盖边距和填充属性（其他属性也是如此）。我很困惑——为什么？在我看来，应该统治#main ul 并将margin 和padding 设置为0，因为它们在层次结构中更深并且更接近DOM 对象。

我错过了什么或我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:43:15.133

它们可能在层次结构中显得更深，但 #main ul 使用 id，这是首选。您只使用一个低于 id 的类。你可以写

```
 #main .mod_sjqmenu ul{} 
```

覆盖CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:34:37.563

我“认为”它是加载规则的顺序，但如果需要，您可以使用 !important 覆盖

例如 `list-style-position: outside !important;

```
 list-style-type: square !important;
    margin: 10px 0 !important;
    padding: 0 0 0 15px !important;
}` 
```

# php - 致命错误：未捕获的 SoapFault 异常：[Client] DTD 不受 SOAP 支持

> ID：11393263
> 
> 赞同：2
> 
> 时间：2012-07-09T10:29:34.217
> 
> 标签：php, soap

我正在尝试使用带有肥皂示例的 php Web 服务，但是我收到此错误，我不知道这是什么意思？你能帮帮我吗？谢谢。

这是完整的错误：

> 致命错误：未捕获的 SoapFault 异常：C:\Program Files (x86)\EasyPHP-5.3.9\www\istemci.php:3 中的 SOAP 不支持 [Client] DTD
> 堆栈跟踪：
> #0 C:\Program Files ( x86)\EasyPHP-5.3.9\www\istemci.php(3): SoapClient->__call('gonder', Array)
> #1 C:\Program Files (x86)\EasyPHP-5.3.9\www\istemci. php(3): SoapClient->gonder('mesaj', 'konu', 'kime')
> #2 {main}
> 在 C:\Program Files (x86)\EasyPHP-5.3.9\www\istemci.php 中抛出3号线

这是我的 server.php 代码：

```
 <?php 
  $istemci=new SoapClient(null,array ('uri'=>'http://ersindogan-testuri','location'=>'http://localhost/test/sunucu.php'));
  var_dump ($istemci->gonder('mesaj','konu','kime'));
  ?> 
```

这是client.php代码：

```
 <?php 
         class SMS {
         public function gonder($mesaj,$konu,$kime){
         return 'mesaj gonderildi';    
        } 
      }
     $sunucu=new SoapServer(null,array ('uri'=>'http://ersindogan-testuri'));

     $sunucu->setClass('SMS');

     $sunucu->handle(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T05:05:24.267

```
1\. Check the End point URL, make sure its the right one

2\. Check the SOAP header formation. Make sure you have required information, with encoding too .
3\. SOAP parameters might be case sensitive 
```

请排除故障并回复。

# java - 对动态 URL 应用过滤器

> ID：11393265
> 
> 赞同：1
> 
> 时间：2012-07-09T10:29:43.247
> 
> 标签：java, url, servlets, servlet-filters

我必须像这样过滤网址：

```
http://www.mysite.com/708e93 
```

哪里`708e93`是唯一的 id，基于这个 id 我必须在 jsp 中创建动态页面。

现在的问题是 - 我在过滤器映射下的 url-pattern 中放了什么

```
<filter-mapping>
<filter-name>foo.bar.MyFilter</filter-name>
<url-pattern> ?? </url-pattern>
</filter-mapping> 
```

如果我将 root (/) 放在 url-pattern 中..对 mysite 的每个请求都将被过滤，那么在这种情况下我怎样才能获得唯一的 id？

有什么解决办法吗？

**编辑**：

我不想像这样在 url 中添加目录：`http://www.mysite.com/dynamicpages/708e93`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:36:29.287

For dynamic url's such as use case you have. you should be have all the dynamic pages inside a directory, lets say `dynamicpages` folder. And you should be mapping a directory url pattern like below :

```
<filter-mapping>
  <filter-name>foo.bar.MyFilter</filter-name>  
  <url-pattern>/dynmaicpages/*</url-pattern>
</filter-mapping>

<servlet-mapping>
  <servlet-name>foo.bar.MyServlet</servlet-name>  
  <url-pattern>/dynmaicpages/*</url-pattern>
</servlet-mapping> 
```

You can get the Unique id using the following methods:

*   `HttpServletRequest.getPathInfo()` If you have servlet mapping like above, this will give you the unique id value directly.

For ex, if the request uri is `/dynamicpages/708e93` it will return `708e93`.

*   `HttpServletRequest.getRequestURI()` This will give you the entire request url. And you need to parse the unique id properly.

For ex, if the request uri is `/dynamicpages/708e93` it will return `/dynamicpages/708e93`.

# symfony - 开发上的致命错误 onAuthenticationFailure

> ID：11393266
> 
> 赞同：2
> 
> 时间：2012-07-09T10:29:57.920
> 
> 标签：symfony

我正在使用 ajax 和`FOSUserBundle`symfony2 实现身份验证。这是我在 security.yml 中的代码：

```
 main:
            pattern:    ^/
            form_login:
                provider: fos_userbundle
                default_target_path: hello
                remember_me: true
                success_handler: my.success_handler
                failure_handler: my.success_handler
                check_path: /login_check
                login_path: /login
            remember_me:
                key:        %secret%
            anonymous: false
            logout: true 
```

和 services.yml：

```
my.success_handler:
        class:   Kgr\UserBundle\Controller\SuccessHandler
        arguments: [@router] 
```

和类 SuccessHandler ：

```
namespace Kgr\UserBundle\Controller;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Symfony\Bundle\FrameworkBundle\Routing\Router;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Security\Http\Authentication\AuthenticationSuccessHandlerInterface;
use Symfony\Component\Security\Http\Authentication\AuthenticationFailureHandlerInterface;

class SuccessHandler implements AuthenticationSuccessHandlerInterface, AuthenticationFailureHandlerInterface
{
    protected $router;

    public function __construct(RouterInterface $router)
    {
        $this->router = $router;
    }

    public function onAuthenticationSuccess(Request $request, TokenInterface $token)
    {
        if($request->isXmlHttpRequest()){
            $response = new Response(json_encode(array(
                'success'=> 1,
            )));
            $response->headers->set('Content-Type', 'application/json');
            return $response;
        }else{
            if ($token->getUser()->isSuperAdmin()) {
                return new RedirectResponse($this->router->generate('admin'));
            }
            else {
                return new RedirectResponse($this->router->generate('MyAppmondeUserBundle_homepage'));
            }
        }
    }

     public  function onAuthenticationFailure(Request $request, AuthenticationException $exception)
    {
        if($request->isXmlHttpRequest()){
            $response = new Response(json_encode(array(
                'success'=> 0,
            )));
            $response->headers->set('Content-Type', 'application/json');
            return $response;
        }else{
            if ($token->getUser()->isSuperAdmin()) {
                return new RedirectResponse($this->router->generate('admin'));
            }
            else {
                return new RedirectResponse($this->router->generate('MyAppmondeUserBundle_homepage'));
            }
        }
    }
} 
```

我不明白错误：

```
Fatal error: Declaration of Kgr\UserBundle\Controller\SuccessHandler::onAuthenticationFailure() must be compatible with that of Symfony\Component\Security\Http\Authentication\AuthenticationFailureHandlerInterface::onAuthenticationFailure() in D:\wamp1\www\Symfony\src\Kgr\UserBundle\Controller\SuccessHandler.php on line 12 
```

通过 onAuthenticationSuccess 单独行走的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:36:20.337

You've missed use statement for `AuthenticationException`.

Add `use Symfony\Component\Security\Core\Exception\AuthenticationException;` to the top

# python - 设置 pyodbc 搜索 odbcinst.ini 文件的位置

> ID：11393269
> 
> 赞同：5
> 
> 时间：2012-07-09T10:30:08.213
> 
> 标签：python, odbc, pyodbc

我正在尝试使用**ubuntu**中的**pyodbc**查询符合 ODBC 的数据库。为此，我已经安装了驱动程序（比如 mysql-odbc-driver）。安装后，带有配置的**odbcinst.ini**文件在位置**/usr/share/libmyodbc/odbcinst.ini**中创建 当我尝试使用我的 pyodbc 连接代码连接到数据库时，我收到一个***未找到驱动程序的错误消息***。现在，当我将文件的内容复制到**/etc/odbcinst.ini**时，它可以工作了！

 *********这意味着 pyodbc 在文件/etc/odbcinst.ini**中搜索驱动程序信息。

**如何更改**在 odbcinst.ini 文件中搜索驱动程序信息的位置

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T10:43:42.557

假设您在这里使用 unixODBC 有一些可能性：

*   从头开始重建 unixODBC 并设置 --sysconfdir
*   导出指向目录的 ODBCSYSINI env var，unixODBC 将在此处查找 odbcinst.ini 和 odbc.ini 系统 dsns
*   导出 ODBCINSTINI 并将其指向您的 odbcinst.ini 文件

顺便说一句，我怀疑 pyodbc 会在 odbcinst.ini 文件中查找任何内容，但 unixODBC 会。有一个 ODBC 驱动程序管理器 API 列表，可用于检查 ODBC ini 文件。*******

# performance - 如何计算我的处理器的 MIPS？

> ID：11393270
> 
> 赞同：7
> 
> 时间：2012-07-09T10:30:15.893
> 
> 标签：performance, architecture, x86, preprocessor, performance-testing

我有一台旧电脑。
我想准确计算其处理器的 MIPS（每秒百万指令）和 DMIPS。
我能为此做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:16:07.263

与您想要的一致，这里有一些引导加载程序代码，它执行一种基准测试，可能用于以某种方式测量 MIPS。这里的主要目标是低级，我相信这是您可以实际使用 PC 进行编程的最低级别，除非您愿意更换 BIOS 或其他东西。

无论如何，这是一个软盘映像的代码，当它启动时，它将尝试执行四条指令（两条`add`s、一条`sub`和一条条件跳转）一百万次。指令执行多少次由`ITERS`宏控制。通过提高或降低它，您可以指定应该进行多少次迭代。

时间是通过使用该指令来测量的，该指令将自上电以来的处理器滴答数作为寄存器和`rdtsc`中的 64 位数字返回。通过在执行循环之前和之前计算这个值的差，我们得到处理器执行它所花费的滴答数。然后使用 BIOS 10h 调用将该值作为十六进制值输出到屏幕。显然，实际花费的时间取决于处理器时钟的频率。`edx``eax`

这是来源。如果您使用 NASM 编译它`-f bin`，您将获得软盘映像，然后应该使用一些原始块写入程序将其写入软盘，例如`dd`. 然后，在引导时，选择软盘作为引导介质。所有这些都可以与 USB 驱动器一起使用，但这更多地依赖于 BIOS。与所有低级的东西一样，我对在您的计算机上实际执行此软件的结果不承担任何责任。

```
bits 16
org 0x7c00

ITERS equ 1000000

jmp 0x0000:start

start:
    cli
    xor ax, ax
    mov ds, ax
    mov ss, ax
    mov sp, stack_end

    rdtsc
    mov [old_rdtsc], eax
    mov [old_rdtsc+4], edx
    mov eax, ITERS

.loop:
    add ebx, ecx
    add ecx, edx

    sub eax, 1
    jnz .loop

    rdtsc

    sub eax, [old_rdtsc]
    sbb edx, [old_rdtsc+4]

    mov si, 15

.fillbuf_eax:
    mov edi, eax
    shr eax, 4
    and di, 0xf
    mov bl, [hex_chars+di]
    mov [str_buf+si], bl
    sub si, 1
    cmp si, 7
    ja .fillbuf_eax

.fillbuf_edx:
    mov edi, edx
    shr edx, 4
    and di, 0xf
    mov bl, [hex_chars+di]
    mov [str_buf+si], bl
    sub si, 1
    jns .fillbuf_edx

    mov ah, 0xe
    xor bx, bx
.bios_write:
    pusha
    mov al, [str_buf+bx]
    int 10h
    popa
    add bx, 1
    cmp bx, 16
    jb .bios_write

    sti

.halt:
    hlt
    jmp .halt

hex_chars db "0123456789ABCDEF"
old_rdtsc resq 1
str_buf resb 16

STACK_SIZE equ 200
stack resb STACK_SIZE
stack_end equ $

times 510-($-$$) db 0x90
db 0x55, 0xaa 
```

在我相当旧的 AMD Athlon XP 1700+ 上，我得到`0x1e8596`了执行此代码的结果，它等于 2000278 CPU 滴答声。由于 CPU 以 1466MHz 运行，这或多或少等于大约 1.36ms。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T10:33:52.397

这是一种非常粗暴的做法：

```
get start time.
add two numbers million times <- repeat this N times, N >= 1
get end time.

MIPS = (end time - start time) in seconds / N. 
```

在这里找到了套件（在 C 中，int+floating）

[https://llvm.org/viewvc/llvm-project/test-suite/trunk/SingleSource/Benchmarks/Dhrystone/?diff_format=h&sortby=date](https://llvm.org/viewvc/llvm-project/test-suite/trunk/SingleSource/Benchmarks/Dhrystone/?diff_format=h&sortby=date)

对于 Dhrystone mips，您需要运行 Dhrystone 套件来获取分数，然后将分数除以 1757。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T11:16:53.713

在特定 GHZ 上按处理器类型列出了 MIPS 列表，可在

[http://en.wikipedia.org/wiki/Instructions_per_second](http://en.wikipedia.org/wiki/Instructions_per_second)

否则，您可以对基准进行编程并运行它（在没有太多运行的控制台中）或从某处下载基准并运行......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-15T12:48:29.897

知道您的处理器将在一个周期内执行多少条指令以及您的时钟速度，就可以计算 MIPS。

MIPS = (处理器时钟速度 * 每个周期执行的指令数)/(10^6)。

例如，TI 6487 每个周期可以执行 8 条 32 位指令，时钟速度为每个内核 1.2 GHz。

所以 MIPS = ((1.2 * 10^9) * 8)/(10^6) = 9600 MIPS 每个内核，这个 DSP 有 3 个内核，所以 DSP 的总 MIPS 是 28800。

# spring - 找不到 HTTP 请求的映射（Spring MVC）

> ID：11393287
> 
> 赞同：8
> 
> 时间：2012-07-09T10:31:29.650
> 
> 标签：spring, spring-mvc

这可能是关于这个 Spring MVC 错误的第 100 万个问题，但我仍然无法让它工作。

我正在尝试将一个简单的控制器方法映射到 /account，稍后我想添加 /account/{id}，但我什至无法让 /account 工作。

这是我的 web.xml

```
<?xml version="1.0" encoding="ISO-8859-1" ?>

<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
    version="2.4">

    <display-name>My Spring MVC web application</display-name>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>springDispatcherServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:application-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>springDispatcherServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:application-context.xml</param-value>
    </context-param>
</web-app> 
```

application-context.xml 的内容：

```
<mvc:annotation-driven />
<context:component-scan base-package="org.example" />

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/views/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

AccountController.java：

```
@Controller
public class AccountController  {

    @RequestMapping(value="/account", method = RequestMethod.GET)
    public ModelAndView showAccount() throws Exception {
        ModelAndView mav = new ModelAndView();
        mav.setViewName("account");
        mav.addObject("someText", "Hello World!");
        return mav;
    }   
} 
```

src/main/webapps/views/account.jsp：

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<h1>${someText}</h1> 
```

当我在 Tomcat 中启动应用程序时，我看到日志中出现以下行：

```
[localhost-startStop-1] INFO org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Mapped "{[/account], methods=[GET], params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView org.example.springmvc.controller.AccountController.showAccount() throws java.lang.Exception 
```

对我来说，这表明 url localhost:8080/account 已正确映射，并且至少应该提供一些输出。但是当我访问 localhost:8080/account 时，我收到 404 错误，并且日志显示：

```
No mapping found for HTTP request with URI [/views/account.jsp] in DispatcherServlet with name 'springDispatcherServlet'
No mapping found for HTTP request with URI [/favicon.ico] in DispatcherServlet with name 'springDispatcherServlet' 
```

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:17:58.220

尝试将以下 bean 添加到 application-context.xml

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T12:21:54.510

您的 Spring 配置没有任何问题，看起来`/account`URI 正在由您的 Controller 正确处理，并且它正在正确返回视图名称，该名称`account`由您的 InternalViewResolver 解析为`/views/account.jsp`> 的路径。

现在由于某种原因，这个调度出了什么问题（因为`/*`你的 Spring DispatcherServlet 的映射，假设 Spring 也可以处理这个 /views，这可能就是你看到这个特定错误的原因）。您可以这样做，而不是将视图放在`/views`文件夹中，而是将其移动到`/WEB-INF/views`文件夹并将您的 viewresolver 更改为：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

# cordova - getParameterByName 在 iPhone 的 Phonegap 中的 JavaScript 中返回空值

> ID：11393288
> 
> 赞同：0
> 
> 时间：2012-07-09T10:31:45.940
> 
> 标签：cordova

我是phonegap的新手。我已经通过了网址。它是返回空值。并使用函数获取 URL 值并调用 getParameterByName('label')

```
<a href="add-personal-info.html?label=lbl_alias" data-transition="slide">

function getParameterByName(name)

{  
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(window.location.search);
    if(results == null)
      return "";
    else
      return decodeURIComponent(results[1].replace(/\+/g, " "));

} 
```

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:10:43.243

不确定我是否理解您的问题，但如果您想获得“标签”参数的值，您可以简单地使用：

```
$(document).ready(function()
{
    var label_value = window.location.search.replace("?", "");
    label_value  = label_value.replace("label=", "");
}); 
```

如果您的 URL 中有多个参数，则必须修改此代码。

希望这可以帮助 ！再见 ！

# ant - jenkins ant 调用和常春藤任务

> ID：11393290
> 
> 赞同：3
> 
> 时间：2012-07-09T10:32:09.007
> 
> 标签：ant, jenkins, ivy

我在 os x 服务器（Lion）上安装了一个 jenkins，我希望它调用一个 ant 脚本来编译一个单一的示例项目。

安装有一个专用用户“jenkins”，如果我从 ssh 实例登录他，我可以成功运行编译任务（使用 ivy 的任务）：

```
jenkins>ant compile 
```

当 Web 界面调用 ant 时出现问题，出现以下错误：

```
Problem: failed to create task or type antlib:org.apache.ivy.ant:resolve 
```

原因：ant 没有从库中正确加载 ivy 的*解析任务。*我真的无法理解修复。我确信 jenkins 以“jenkins”用户身份运行命令。

**编辑：更多信息**

```
BUILD FAILED
/Users/Shared/Jenkins/Home/jobs/example-build/workspace/build.xml:19: Problem: failed to create task or type antlib:org.apache.ivy.ant:resolve
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.
No types or tasks have been defined in this namespace yet
This appears to be an antlib declaration. 
Action: Check that the implementing library exists in one of:

    -/usr/share/ant/lib
    -/Users/Shared/Jenkins/Home/.ant/lib
    -a directory added on the command line with the -lib argument

Total time: 0 seconds
Build step 'Invoke Ant' marked build as failure
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:34:22.120

看起来 Jenkins 作业使用的 ANT 安装无法获取 ivy jar。

# 选项1

将以下目标添加到您的 ANT 构建并调用它一次以将 ivy jar 安装到 ANT 可以识别的位置，即 $HOME/.ant/lib

```
<target name="bootstrap" description="Install ivy">
    <mkdir dir="${user.home}/.ant/lib"/>
    <get src="https://repository.sonatype.org/service/local/artifact/maven/redirect?r=central-proxy&amp;g=org.apache.ivy&amp;a=ivy&amp;v=LATEST&amp;e=jar"
         dest="${user.home}/.ant/lib/ivy.jar"/>
</target> 
```

笔记：

*   该目标使用 Sonatype 的 Nexus 存储库提供的 REST API 来下载最新版本的 ivy。

# 选项 2

如果 ivy jar 位于以下目录中：

*   /usr/local/bin/ivy

**您可以使用lib**参数调用 ANT来指定 ANT 插件的替代位置。

```
ant -lib /usr/local/bin/ivy clean build 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T17:34:40.367

当您运行 Ant 任务时，请确保在类路径中存在 ivy.jar。在 eclipse -> Run As-> Ant Build -> Edit configuration -> Classpath 选项卡中。尽管 Eclipse 在 ANT Home 中有 ivy.jar，但由于某种原因它没有被调用。

# android - Android Sqlite无法提取数据

> ID：11393299
> 
> 赞同：0
> 
> 时间：2012-07-09T10:32:30.947
> 
> 标签：android, sqlite, cursor

我只是在阅读我的表格，但我无法启动应用程序，因为它给了我这些错误：

这是连接到 dbclass 的代码。它调用 DBclass 中的 id 方法，然后关闭 db。

```
public int return_id_phone(Context contxt) {
    Database db = new Database(contxt);
    db.open();
    int id_phone = db.id(2);
    db.close();
    return id_phone;
} 
```

这是要提取的代码。只返回一个数字，它很简单，我不知道它为什么会崩溃。它在下面的错误中说我没有关闭游标并且数据库也被锁定。

```
public int id(int row) {
    String[] columns = new String[] { ID_ROW, VALUE_ROW };
    Cursor c = ourDatabase.query(DATABASE_TABLE_2, columns, ID_ROW + "='"
            + row+"'", null, null, null, null);
    if (c != null) {
        c.moveToFirst();
        int id= c.getInt(1);
        c.close();
        return id;
    } else {
        c.close();
        return 0;
    }
} 
```

我不知道我做错了什么......

```
> 07-09 11:54:05.460: E/SQLiteDatabase(6938): close() was never explicitly called on database '/data/data/com.anonyme.app/databases/faraway' 
07-09 11:54:05.460: E/SQLiteDatabase(6938): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:2069)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1123)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1081)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1167)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:833)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.background.Database.open(Database.java:89)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.extract.Contacts.phoneandname(Contacts.java:124)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.anonyme.app.IntroActivity.uploadall(IntroActivity.java:85)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.anonyme.app.IntroActivity.onCreate(IntroActivity.java:76)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.Activity.performCreate(Activity.java:4465)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.os.Looper.loop(Looper.java:137)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ActivityThread.main(ActivityThread.java:4507)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at java.lang.reflect.Method.invoke(Method.java:511)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at dalvik.system.NativeStart.main(Native Method)
07-09 11:54:05.460: E/System(6938): Uncaught exception thrown by finalizer
07-09 11:54:05.465: E/System(6938): java.lang.IllegalStateException: Don't have database lock!
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2227)
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2319)
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2315)
07-09 11:54:05.465: E/System(6938):     at android.util.LruCache.trimToSize(LruCache.java:197)
07-09 11:54:05.465: E/System(6938):     at android.util.LruCache.evictAll(LruCache.java:285)
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2280)
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1252)
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase.finalize(SQLiteDatabase.java:2040)
07-09 11:54:05.465: E/System(6938):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
07-09 11:54:05.465: E/System(6938):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
07-09 11:54:05.465: E/System(6938):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:49:36.513

我看到了几件事……首先，您在查询中将整数视为字符串（删除引号以解决该问题）。

其次，游标可以为空而不为空，因此您应该更改检查以查找 0 记录计数。

尝试这个：

```
public int id(int row) { 
    String[] columns = new String[] { ID_ROW, VALUE_ROW }; 
    Cursor c = ourDatabase.query(DATABASE_TABLE_2, columns, ID_ROW + "= " 
        + row, null, null, null, null); 
    if (c.getcount() != 0) { 
        c.moveToFirst(); 
        int id= c.getInt(1); 
        c.close(); 
        return id; 
    } else { 
        c.close(); 
        return 0; 
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:35:27.660

试试下面的一段代码：

```
public int id(int row) {
    String[] columns = new String[] { ID_ROW, VALUE_ROW };
    try {
        Cursor c = ourDatabase.query(DATABASE_TABLE_2, columns, ID_ROW + "='"
            + row+"'", null, null, null, null);
        if (c != null) {
            c.moveToFirst();
            int id= c.getInt(1);
            return id;
        } else {
             return 0;
        }
    } finally {
        c.close();
    }
} 
```

# c - 指针的使用会取消关联变量的“注册”属性吗？

> ID：11393300
> 
> 赞同：11
> 
> 时间：2012-07-09T10:32:50.787
> 
> 标签：c, optimization, assembly

在 C 中，指针的使用会取消关联变量的“注册”属性吗？

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
    register int clk=0;    //maybe register maybe not
    int *adr=&clk;         //not a register now? i have its address
    *adr=1;  //if i use this 1000000 times, does it exist in L1 at least?
    printf("%d",clk);
    return 0;

} 
```

给出编译器错误“不能获取寄存器变量的地址”，但它不是寄存器 %100。这只是一个机会。

这是最慢的循环吗？

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
    int *p;
    int i=0;
    p=&i;
for(*p=0;(*p)<100;(*p)++)
{
    //do nothing
}
    printf("%d ",i);
    return 0;

} 
```

如果我使用“register”关键字将几乎所有变量都设为指针样式并且只有三个变量只有原始类型，那么编译器是否会使这三个变量“真正注册”的机会更高？

好的。问题解决了。我学习了一些组装，发现这取决于优化级别以及变量的波动性。使用 __asm{} 确保它在寄存器中计算。谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-09T10:33:53.157

在 C 中，应用于使用说明符`&`声明的变量是非法的`register`。

> 6.7.1
> 
> 实现可以将任何寄存器声明简单地视为自动声明。然而，无论是否实际使用了可寻址存储，使用存储类说明符寄存器声明的对象的任何部分的地址都无法显式计算（通过使用6.5.3.2 中讨论**的一元 & 运算符**）或隐式计算（如 6.3.2.1 中所述，将数组名称转换为指针）。

和 6.5.3.2：

> 一元 & 运算符的操作数应该是函数指示符、[] 或一元 * 运算符的结果，或者是一个左值，它指定一个不是位域**且未使用寄存器存储类**说明符声明的对象.

至于 C++，如果你使用 & 和 a `register`，它会取消它的含义：

> ANSI C 不允许获取寄存器对象的地址；此限制不适用于 C++。但是，如果在对象上使用了地址运算符 (&)，**编译器必须将对象放在可以表示地址的位置**。实际上，这意味着在内存中而不是在寄存器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:38:37.260

you are right, if you use & to a register variable, that make this variable to main memory, so you can get it's address. because register variable have not address.

# c# - 如何将图片框点击事件组合为一个？

> ID：11393306
> 
> 赞同：1
> 
> 时间：2012-07-09T10:33:14.060
> 
> 标签：c#, picturebox, mouseclick-event

```
private void p01_Click(object sender, EventArgs e)
    {
        if (p01.Image == pmiss.Image)
        {
            score++;
            makeMoleVisable(1, phit);
        }
        else
        {
            score--;
            molesmissed++;
        }
    }
    private void p02_Click(object sender, EventArgs e)
    {
        if (p02.Visible)
        {
            if (p02.Image == pmiss.Image)
            {
                score++;
                p02.Image = phit.Image;
            }
            else
            {
                score--;
                molesmissed++;
            }
        }
    } 
```

你好，我有 36 个这样的图片框点击事件。我只想对所有 36 个图片框使用一次单击事件。此外，所有点击事件都做同样的事情，只是第一个事件的代码略有不同。纳克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:40:59.680

只需转到每张图片的事件属性并设置`p02_Click`或使用您自己的自定义名称。

如果您在一个面板中拥有所有图片框，您可以尝试：

```
foreach (Control p in mypanel.ControlCollection)
{
    p = p as PictureBox;
    p.Click += (p01_Click);
} 
```

`Tag`您还可以通过设置一个属性`p01`并在代码中检查该属性来测试它是否为 pictureBox1 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:37:28.963

您可以对每个组图片框重复使用 eventhandler 方法。该方法的 sender 参数将包含触发事件的对象。

# python - 在 GAE 上使用 python 2.7 进行大型 Freebase 查询

> ID：11393315
> 
> 赞同：0
> 
> 时间：2012-07-09T10:33:44.690
> 
> 标签：python, google-app-engine, python-2.7, freebase

我需要在 GAE 上使用 Python 从 Freebase 查询大约 30000 个实体。到目前为止，这是我晚上的旅程：

首先，我尝试使用此处使用“光标”键的解决方案：[如何增加 freebase API 结果限制](https://stackoverflow.com/questions/2318463/how-to-increase-freebase-api-result-limit)。但是我遇到了此处描述的“键光标是保留字”错误：[Freebase“键光标是保留字”](https://stackoverflow.com/questions/8003317/freebase-key-cursor-is-a-reserved-word)。我遵循了解决方案，但我看不到如何按此处所述获取光标值：[How to get cursor from mqlread() when using Freebase API?](https://stackoverflow.com/questions/4835141/how-to-get-cursor-from-mqlread-when-using-freebase-api) . 这篇文章推荐使用 python freebase 库：

```
freebase.mqlread(query, extended=True) 
```

因此，我按照此处的说明在 GAE 上安装了 freebase 库：[http](http://code.google.com/p/freebase-python/wiki/GoogleAppEngine) ://code.google.com/p/freebase-python/wiki/GoogleAppEngine 。接下来，我得到了 GAE 错误：

```
No module named uritemplate 
```

所以我在我的 Mac 上运行“easy_install uritemplate”并将安装的 uritemplate.egg 文件（没有安装目录）复制到我的 GAE 应用程序目录中。但我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:28:23.060

这是如何使用游标的示例： [http ://wiki.freebase.com/wiki/MQL_Read_Service#cursor:_return_albums_by_Bob_Dylan_3_at_a_time](http://wiki.freebase.com/wiki/MQL_Read_Service#cursor:_return_albums_by_Bob_Dylan_3_at_a_time)

您不应使用 freebase-python 库，因为它尚未更新以处理新的 googleapis。

# c# - 保存上传的文件 - 进程无法访问

> ID：11393316
> 
> 赞同：4
> 
> 时间：2012-07-09T10:33:48.603
> 
> 标签：c#, upload, permissions

我有以下函数来处理上传的图像。

它在第一次尝试时工作正常（重新启动 IIS 后），但在第二次尝试时我总是得到

> 该进程无法访问该文件，因为它正被另一个进程使用

现在，我确实知道文件以某种方式被 IIS 保持打开状态，但是如果我有，为什么会发生这种情况

```
newFile.Flush();
newFile.Close();
newFile.Dispose(); 
```

这是完整的功能：

```
private void SaveFile(HttpPostedFile file, string path)
{
    Int32 fileLength = file.ContentLength;
    string fileName = file.FileName;
    byte[] buffer = new byte[fileLength];
    file.InputStream.Read(buffer, 0, fileLength);

    FileStream newFile = new FileStream(path, FileMode.Create, FileAccess.Write);

    try
    {
        newFile.Write(buffer, 0, buffer.Length);
    }
    catch { }
    finally
    {
        newFile.Flush();
        newFile.Close();
        newFile.Dispose();
    }
} 
```

**更新：**
经过几次检查，我确信没有其他任何东西可以锁定文件，但这`w3wp.exe`是 IIS 进程。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T10:39:16.683

必须有其他东西保持文件打开 - 或者可能在第一次调用返回之前进行了第二次调用（在单独的线程上）。

顺便说一句，您最好编写如下代码：

```
private void SaveFile(HttpPostedFile file, string path)
{
    Int32 fileLength = file.ContentLength;
    string fileName = file.FileName;
    byte[] buffer = new byte[fileLength];
    file.InputStream.Read(buffer, 0, fileLength);

    using (FileStream newFile = new FileStream(path, FileMode.Create, FileAccess.Write))
    {
        newFile.Write(buffer, 0, buffer.Length);
    }
} 
```

# jquery - jquery函数不显示，怎么回事？

> ID：11393320
> 
> 赞同：1
> 
> 时间：2012-07-09T10:33:57.680
> 
> 标签：jquery, html

我正在尝试让这个 Jquery 计数功能正常工作，但它没有出现在我面前，有人可以告诉我我做错了什么吗？

我正在使用由“mhuggins”（[https://github.com/mhuggins/jquery-countTo](https://github.com/mhuggins/jquery-countTo)）创建的函数，所以我自己没有做到，只是想让它工作。

> 计数.js

```
 (function($) {
    $.fn.countTo = function(options) {
        // merge the default plugin settings with the custom options
        options = $.extend({}, $.fn.countTo.defaults, options || {});

        // how many times to update the value, and how much to increment the value on each update
        var loops = Math.ceil(options.speed / options.refreshInterval),
            increment = (options.to - options.from) / loops;

        return $(this).each(function() {
            var _this = this,
                loopCount = 0,
                value = options.from,
                interval = setInterval(updateTimer, options.refreshInterval);

            function updateTimer() {
                value += increment;
                loopCount++;
                $(_this).html(value.toFixed(options.decimals));

                if (typeof(options.onUpdate) == 'function') {
                    options.onUpdate.call(_this, value);
                }

                if (loopCount >= loops) {
                    clearInterval(interval);
                    value = options.to;

                    if (typeof(options.onComplete) == 'function') {
                        options.onComplete.call(_this, value);
                    }
                }
            }
        });
    };

    $.fn.countTo.defaults = {
        from: 0,  // the number the element should start at
        to: 100,  // the number the element should end at
        speed: 1000,  // how long it should take to count between the target numbers
        refreshInterval: 100,  // how often the element should be updated
        decimals: 0,  // the number of decimal places to show
        onUpdate: null,  // callback method for every time the element is updated,
        onComplete: null,  // callback method for when the element finishes updating
    };
})(jQuery); 
```

然后我尝试将它与这个 html 页面一起使用

> 测试.html

```
<html>
<head>
<script type="text/javascript" src="scripts/jquery-1.6.2.js"></script>
<script type="text/javascript" src="scripts/countup.js"></script>
<script type="text/javascript"><!--
    $('.timer').countTo({from: 0, to: 500});
//--></script>
</head>

<body>
<span class="timer"></span>
</body>
</html> 
```

当我启动页面时，什么也没有发生。该脚本对其他人有效，所以很明显是我做错了什么。我对此很陌生，所以这并不奇怪。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:35:53.800

看起来你不见了`document.ready(function() { // timer code here });`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T10:37:22.277

`<span class="timer">`执行脚本时没有。将其添加为[DOMready 处理程序](http://api.jquery.com/ready/)：

```
<script type="text/javascript"><!--
    jQuery(function($) {
        $('.timer').countTo({from: 0, to: 500});
    });
//--></script>
</head> 
```

或在正文末尾执行：

```
<body>
    <span class="timer"></span>
    <script type="text/javascript"><!--
        $('.timer').countTo({from: 0, to: 500});
    //--></script>
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:37:32.157

```
$(document).ready(function(){
    $('.timer').countTo({from: 0, to: 500});
}); 
```

# uitableview - 编辑完成后如何从自定义uitableviewcell的文本字段向数组添加数据

> ID：11393323
> 
> 赞同：0
> 
> 时间：2012-07-09T10:34:09.210
> 
> 标签：uitableview, nsmutablearray, uitextfield

我正在创建 customUiTableViewCells，其中每个在 uitableview 中都有一个文本字段，其中每个部分彼此不同。在一个部分中，我可以添加和删除任何数量的单元格。如果行达到 uitableview 的边界，则滚动时（即，不可见）该单元格中给出的数据未采用。在我的代码中，当我按下按钮时，我正在从 tableview 读取数据，现在我有了一个想法，比如在编辑每一行之后，我希望数据存储在某个数组中。所以当我按下按钮时，我应该从这个数组而不是单元格中读取数据。请给我任何建议，以便我可以继续前进。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:45:30.140

确保将 cellForRowAtIndexPath: 中的 CellIdentifier 更改为：

```
NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row]; 
```

没有静电。

然后，您的 TextFields 会保留数据以供以后存储。

# c# - 如何在应用程序启动时加载配置？

> ID：11393324
> 
> 赞同：2
> 
> 时间：2012-07-09T10:34:10.487
> 
> 标签：c#, .net, wpf

我创建了一个配置文件*App.config*，其中包含与我的应用程序相关的所有操作参数。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="MinConnectionCount" value="2"/>
    <add key="MaxConnectionCount" value="7"/>
  </appSettings>
</configuration> 
```

为了读取这些值并使它们可用于整个应用程序，只需使用类的`AppSettings`属性，`ConfigurationManager`如下所示：

```
try
{
    NameValueCollection myAppSettings = ConfigurationManager.AppSettings;

    byte min = byte.Parse(myAppSettings["MinConnectionCount"]);
    byte max = byte.Parse(myAppSettings["MaxConnectionCount"]);
}
catch (ConfigurationErrorsException e)
{
    throw e;
} 
```

属性读取的值`AppSettings`是字符串类型的，所以必须进行必要的转换和检查：

*   您必须进行适当的转换，确保没有解析错误。验证转换获得的值是否与应用程序域一致可能很有用：例如，最小连接数必须小于最大连接数。
*   任何涉及加载配置的事情都必须在应用程序启动时完成，因为加载的参数可用于分配任何数据结构，如表、队列等。如果在加载配置时遇到错误，应用程序应该使用默认配置：错误可能由警报报告。
*   最后，配置必须是只读的，这意味着在应用程序运行时不应更改它们。这也简化了多线程的访问。

为了实现这些目标，我创建了一个类，该类从文件加载配置并通过适当的属性使转换后的参数可用。

```
public class MyConfiguration
{
    enum Errors
    {
        CONNECTION_RANGES_ERROR
        // some other errors
    }

    private byte m_MinConnectionCount;
    private byte m_MaxConnectionCount;

    private readonly List<Errors> m_ConfigErrors = new List<Errors>();

    public MyConfiguration()
    {
        try
        {
            NameValueCollection appSettings = ConfigurationManager.AppSettings;

            if (!SetConnectionRanges(appSettings["MinConnectionCount"], appSettings["MaxConnectionCount"]))
                m_ConfigErrors.Add(Errors.CONNECTION_RANGES_ERROR);

            // ...
        }
        catch (ConfigurationErrorsException e)
        {
            throw e;
        }
    }

    private bool SetConnectionRanges(string minCountStr, string maxCountStr)
    {
        if (byte.TryParse(minCountStr, out m_MinConnectionCount)
            && m_MinConnectionCount > 0
            && byte.TryParse(maxCountStr, out m_MaxConnectionCount)
            && m_MaxConnectionCount > m_MinConnectionCount)
            return true;

        m_MinConnectionCount = 2;
        m_MaxConnectionCount = 7;
        return false;
    }

    public byte MinConnectionCount { get { return m_MinConnectionCount; } }

    public byte MaxConnectionCount { get { return m_MaxConnectionCount; } }

    public List<Errors> GetErrors() { return m_ConfigErrors; }
} 
```

该`GetErrors()`方法允许获取在加载配置参数期间发生的错误列表：用户可能会收到这些错误的通知，并且可能会被告知应用程序已使用参数的默认值。

1.  如何确保在应用程序启动期间首先实例化此类？
2.  我可以将单例模式应用到这个类：这样我应该只调用一个`Instance`属性作为`Main`方法的第一条语句。`Instance`但是我应该在 WPF 应用程序中在哪里调用该属性？
3.  我可以不使用单例模式，而是为`MyConfiguration`类创建一个全局变量并调用该`GetErrors()`方法作为该方法的第一个语句`Main`。`GetErrors()`但是我应该在 WPF 应用程序中的哪里调用该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:54:57.597

将您的类更改`static`为确保它的单个实例。

`MyConfiguration.GetErrors()`然后，您可以在您显示的第一个表单的情况下调用`Load`并报告错误。

# android - 如何在android（模拟器/设备）中处理HOME按钮

> ID：11393333
> 
> 赞同：0
> 
> 时间：2012-07-09T10:34:53.973
> 
> 标签：android

如何在设备和模拟器中处理主页按钮。

我找到了这两种方法：-

> 公共无效 onPause
> 
> 公共无效 onStop

但根据我的需要，这不是完美的解决方案。任何人指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:39:30.960

我找到了解决方案：-

```
public void onUserLeaveHint()
{
    super.onUserLeaveHint();
} 
```

仅在按下 HOME 按钮时执行。

更多细节见[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:45:35.873

请看，出于安全原因，android 开发人员本身不允许我们使用主页按钮更改任何类型的行为。但是即使你真的想禁用主页按钮，你也可以通过添加下面的代码来做到这一点......

```
@Override
public void onAttachedToWindow() {
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();
}

@Override    
public boolean onKeyDown(int keyCode, KeyEvent event) {   

    if(keyCode == KeyEvent.KEYCODE_HOME) {
        Log.i("Home Button","Clicked");
    }

    if(keyCode==KeyEvent.KEYCODE_BACK) {

        finish();
    }

    return false;
} 
```

# android - 运行 Android kenel 映像的模拟器脚本所需的一切

> ID：11393334
> 
> 赞同：1
> 
> 时间：2012-07-09T10:34:57.357
> 
> 标签：android, kernel

我在熊猫平台下编译了一个金鱼内核，并`zImage`在路径中创建了一个`panda/goldfish/arch/arm/zImage`。

现在我使用这个命令来运行模拟器：

```
./emulator -kernel /home/kpit/android_sd/panda/goldfish/arch/arm/boot/zImage -avd avd 
```

这给了我错误：

```
PANIC: Could not open: /home/kpit/android-sdk-linux//.android/avd/avd.ini 
```

谁能告诉我有什么问题？

我是安卓新手。因此，请在回答时考虑这一点，以便我了解问题所在。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:11:47.220

看来您已请求名为“avd”的 Android 虚拟设备 (AVD)（根据您的选项“-avd avd”，但没有这样的设备。您的 avd 目录中有什么（尝试 'ls /home/kpit/android-sdk -linux/.android/avd)?

# xcode - 将 xcode 项目转换为 dylib

> ID：11393337
> 
> 赞同：0
> 
> 时间：2012-07-09T10:35:20.537
> 
> 标签：xcode, project, dylib

我想创建一个 .dylib 文件。我在 XCode 中有一个 iPhone 项目。有什么办法可以将这个项目转换为 .dylib 文件？谁能给我详细的分步说明。我不想用 C 语言创建 dylib 文件。我听说有一些模板要创建，但没有找到合适的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:15:38.510

Xcode 本身不支持为 iOS 构建 dylib。尝试破解 Xcode 配置以添加此支持，如下所述：http: [//blog.iosplace.com/ ?p=33](http://blog.iosplace.com/?p=33)

# extjs - ExtJS 代理可以主动通知它的 Stores 更改吗？

> ID：11393343
> 
> 赞同：1
> 
> 时间：2012-07-09T10:35:37.617
> 
> 标签：extjs

据我所知， a总是通过调用for CRUD 操作`Ext.data.proxy.Proxy`连接到 a 。`Ext.data.store.Store``Store``Proxy`

反方向也可以吗？那就是`Proxy`主动通知由?`Store`表示的远程数据的更改。`Proxy`

例如：另一个用户修改了后端数据。后端将更改通知所有连接的用户。更改由`Proxy`到调解`Store`，然后使用 的网格`Store`立即显示更改的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:51:05.727

这正是它的工作原理！代理发出请求，每当收到响应时，它都会通知商店，商店也会对网格做同样的事情。

但是，您正在谈论的应用程序模型称为[COMET](http://en.wikipedia.org/wiki/Comet_%28programming%29#Ajax_with_long_polling)，它需要 extjs 没有的不同类型的代理。无论如何，阅读流式请求并为自己填充存储非常简单（听起来很难，但事实并非如此）

你可以看看[这个](http://www.frozenmountain.com/products/websync/demos/extjsticker)例子（运行它并查看源代码）

# c# - 我需要从 xml 文件加载项目数组，但顶层不读取列出的项目

> ID：11393344
> 
> 赞同：0
> 
> 时间：2012-07-09T10:35:38.413
> 
> 标签：c#, xml, winforms, serialization

使用 System.Xml.Serialization 我正在尝试读取以下结构中的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<rootname xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <AListItem>
    <someDataItem>1</someDataItem>
    <anotherItem>2</anotherItem>
  </AListItem>
  <AListItem>
    <someDataItem>3</someDataItem>
    <anotherItem>4</anotherItem>
  </AListItem>
  <Name>a string</Name>
</rootname> 
```

我的班级结构：

```
public class rootname
{
    public rootname() { }

    [XmlElement("AListItem")]
    List<AListItem> DataList { get; set; }

    public string Name { get; set; }
}

public class AListItem
{
    public AListItem() {}

    public string someDataItem { get; set; }
    public string anotherItem { get; set; }
} 
```

反序列化：

```
using (System.IO.FileStream stream = new FileStream(openFile.FileName, FileMode.Open, FileAccess.Read))
{
    System.Xml.Serialization.XmlSerializer xml = new System.Xml.Serialization.XmlSerializer(typeof(rootname));
    rootname deserializedObject = xml.Deserialize(stream) as rootname;
} 
```

'Name' 属性已加载，但 DataList 为空。应该如何加载 AListItem 项？XmlElement 属性是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:54:00.247

谢谢托尼，我刚刚意识到问题所在。我忘记公布名单了！

```
public class rootname
{
    public rootname() { }

    [XmlElement("AListItem")]
    public List<AListItem> DataList { get; set; } // <<< public!

    public string Name { get; set; }
} 
```

哎呀。

# java - 如何标记意大利语输入？

> ID：11393345
> 
> 赞同：1
> 
> 时间：2012-07-09T10:35:43.320
> 
> 标签：java, nlp, tokenize

我正在尝试用 Java 标记意大利语文本以进行进一步处理。是否有任何工具可以标记意大利语输入？[SimpleTokenizer](http://code.google.com/p/tt4j/wiki/SimpleTokenizer)在一定程度上可以正常工作，但如果像“De Marchi”这样的意大利姓氏，我将其作为 2 个令牌。

# ios - 如何在 Cordova IOS 应用程序上禁用键盘

> ID：11393348
> 
> 赞同：0
> 
> 时间：2012-07-09T10:35:50.793
> 
> 标签：ios, xcode, cordova

目前我正在创建一个科尔多瓦 xcode 应用程序。我只是编辑默认的 index.html。我没有配置 xib 向它添加任何元素。只是纯 html、css 和 javascript。我在我的 html 上输入了文本，它由 xcode 读取，并在单击输入文本后自动弹出键盘，这是我不想发生的。你们中的任何人都应该知道如何以编程方式禁用它吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T10:18:19.647

有两个选项可以实现它：
1）将您的文本字段设为只读
2）使用此插件并手动隐藏键盘
[https://build.phonegap.com/plugins/785](https://build.phonegap.com/plugins/785)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:38:53.957

已经有一个“完成”按钮，只需单击它。

# php - 创建接口以使用 php 连接外部服务器（并执行 shell 命令）

> ID：11393353
> 
> 赞同：0
> 
> 时间：2012-07-09T10:36:07.263
> 
> 标签：php, shell-exec

我有 4 台服务器用于 web、dns、邮件和数据库。我想创建一个接口来使用服务器的 IP（可能是端口）和用户名和密码（稍后，在下一步执行 linux/winsows 命令，例如关闭/重置服务器、停止/启动 IIS、停止/启动）来远程连接这些服务器邮件服务器，...）

是否有可能或任何链接来帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:37:28.907

套接字是一种使用服务器-客户端模型的方法，但我不建议这样做。
[SSH](http://php.net/manual/en/book.ssh2.php)是另一种安全连接到服务器并执行命令的方式，您可以在本地计算机上创建一个 CGI 脚本并一次管理一个服务器，使用表单/按钮等。请注意，如果服务器-，您必须具有 openssh-server 包一边是使用linux发行版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:58:22.917

您可以使用 GeoPhoenix 所说的 ssh 模块。您可以尝试使用 curl 的另一种方法。我假设您使用的是 php，因此请考虑以下示例，

```
function check_dserver_process(){
    if(!$ch)
       $ch = curl_init();

        $options=array( CURLOPT_URL => "http://122.165.212.22:81/mysite/init.php",
                        CURLOPT_FRESH_CONNECT => 1,
                        CURLOPT_RETURNTRANSFER => 1, 
                        CURLOPT_FORBID_REUSE =>1,
                        CURLOPT_USERAGENT => "Mozilla/4.0 (compatible; MSIE 5.01;Windows NT 5.0)"
                     );

        curl_setopt_array($ch,$options);
        $result=curl_exec($ch);  
        $op=($result===false ? curl_error($ch) : $result);
        curl_close($ch);
        return $op;
} 
```

如果你调用上面的函数，它将从给定的 url 中获取 init.php 的输出。[所以你可以使用exec()](http://php.net/manual/en/function.exec.php)函数从 init.php 运行你自己的命令。在您开始 init.php 中的过程之前，请确保请求来自您的一个 ip。

# c++ - 删除 OpenGL 中的嵌套显示列表

> ID：11393354
> 
> 赞同：3
> 
> 时间：2012-07-09T10:36:09.457
> 
> 标签：c++, opengl

我有一个关于在 OpenGL 中删除嵌套显示列表的问题。可以通过以下方式简单地创建显示列表：

```
 GLuint myList = glGenLists(1);
    glNewList(myList, GL_COMPILE);
    // ...code for objects in list...
    glEndList(); 
```

如果我没记错的话，这样的列表会被简单地删除：

```
 glDeleteLists(myList, 1); 
```

现在也可以嵌套显示列表，这样每个列表都包含另一个或多个显示列表。代码将采用以下形式：

```
 GLuint parentList = glGenLists(1);      // ID = 1
    glNewList(parentList , GL_COMPILE);

    GLuint childList1 = glGenLists(1);      // ID = 2
    glNewList(childList1 , GL_COMPILE); 
    // .. code for some objects here
    glEndList();

    GLuint childList2 = glGenLists(1);      // ID = 3
    glNewList(childList2, GL_COMPILE); 
    // .. code for more objects here
    glEndList();

    glEndList(); 
```

但我的问题是，如何删除这样的嵌套列表？glDeleteList(.) 仅父级就足够了，还是应该单独删除其子级？在后一种情况下：顺序重要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:44:46.970

glNewList 在编译过程中*不会*被记录。[相反，它会产生错误。](http://www.opengl.org/sdk/docs/man/xhtml/glNewList.xml)

```
GL_INVALID_OPERATION is generated if [...] glNewList is called 
while a display list is being defined 
```

所以这些“嵌套”列表不存在。

# ruby-on-rails - 需要独特的友谊帮助 Rails 3

> ID：11393355
> 
> 赞同：0
> 
> 时间：2012-07-09T10:36:10.690
> 
> 标签：ruby-on-rails, rails-activerecord

我需要有关友谊独特性的帮助，并将我的 routes.rb 添加到朋友链接中：

```
devise_for :users

resources :users, only: [:index, :show] do
          resources :friendships, only: [:create, :destroy]
          end 
```

我的用户模型：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username
  # attr_accessible :title, :body
  has_many :topics
  has_many :posts
  has_many :friendships
    has_many :friends, :through => :friendships
    has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"
    has_many :inverse_friends, :through => :inverse_friendships, :source => :user
end 
```

我的友谊模型：

```
class Friendship < ActiveRecord::Base
  attr_accessible :friend_id, :user_id
  belongs_to :user
    belongs_to :friend, :class_name => "User"
end 
```

友谊控制器.rb：

```
class FriendshipsController < ApplicationController
    before_filter :authenticate_user!

    def create
        @friendship = current_user.friendships.build(:friend_id => params[:friend_id])
        if @friendship.save
            flash[:notice] = "Arkadaşlara eklendi."
            redirect_to root_url
        else
            flash[:error] = "Arkadaşlara Eklenemiyor."
            redirect_to root_url
        end
    end

    def destroy
        @friendship = current_user.friendships.find(params[:id])
        @friendship.destroy
        flash[:notice] = "Arkadaşlarımdan kaldırıldı."
        redirect_to current_user
    end
end 
```

users_controller.rb：

```
class UsersController < ApplicationController
    before_filter :authenticate_user!

  def index
        @users = User.all
  end
  def show
    @user = User.find(params[:id])
    @topics = @user.topics.paginate(page: params[:page])
    @friendship = @user.friendships.build(:friend_id => params[:friend_id])
    @friendships = @user.friendships.all

  end 
end 
```

这是我的朋友添加链接：

```
 <h1>
        <%= @user.username %>
      </h1>

            <%= link_to "Arkadaşlarıma Ekle", friendships_path(:friend_id => @user), :method => :post,class: "btn btn-large btn-primary" %> 
```

而且我找不到将用户显示为朋友的正确路径。

```
<%  for friendship in @friendships %> 
<%= link_to friendship.friend.username, '#' %>
(<%= link_to 'Sil', friendship, :method => :delete %>)
<% end %> 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:13:02.217

鉴于嵌套路线，它需要了解用户才能获得友谊。您可以使用很酷的助手来帮助您从对象中获取路径

更像红宝石的惯用语

```
<%  @friendships.each do |friendship} %> 
  <%= link_to friendship.friend.username, '#' %>
  (<%= link_to 'Sil', [@user, friendship], :method => :delete %>)
<% end %> 
```

“添加到朋友”链接将是类似的......但我不清楚逻辑 - 你在这个阶段有哪个@user？@user 是登录用户还是“当前”用户？

由于您使用的是设计......很可能您真正想要的是：

```
<%  current_user.friendships.each do |friendship} %> 
  <%= link_to friendship.friend.username, '#' %>
  (<%= link_to 'Sil', [current_user, friendship], :method => :delete %>)
<% end %> 
```

如果这个片段来自*另一个*用户的页面......那么它更像是

```
<h1><%= @user.username %></h1>

<%= link_to "Arkadaşlarıma Ekle", user_friendships_path(current_user, :friend_id => @user), :method => :post, class: "btn btn-large btn-primary" %> 
```

# iphone - array length in objective c

> ID：11393359
> 
> 赞同：0
> 
> 时间：2012-07-09T10:36:35.910
> 
> 标签：iphone, objective-c

> **Possible Duplicate:**
> [array in objective c](https://stackoverflow.com/questions/11392642/array-in-objective-c)

i have doubt about how to find the length of array.....

my code is

```
#import <Foundation/Foundation.h>

void myFunction(int i, int*anBray);

int main(int argc, const char * argv[])
{
    int anBray[] = {0,5, 89, 34,9,189,9,18,99,1899,1899,18,99,189, 34,89, 34,89, 34,89, 34,89, 34,89, 34,89, 34,89, 34,89, 34,89, 34,89, 34,89, 34,89, 34,89, 34,2,600,-2,0};
    int i;    

    NSLog (@"Input:");
    for (i=0; i<sizeof(anBray)/sizeof(int); i++)
        NSLog(@ " anBray[%i]= %i ",i,anBray[i]); 

    NSLog (@"Output");

    myFunction(i,anBray);

    return 0;

}

void myFunction(int i, int*anBray) {

    for ( i=0;  i<anBray; i++) {
        if ( anBray[i] == 0) {
            anBray[i] = anBray[i+1] - anBray[i]; 
        } else {
            anBray[i] = anBray[i] - anBray[i];
            anBray[i] = anBray[i+1] - anBray[i];
        }
        NSLog(@ " anBray[%i]= %i",i,anBray[i]); 

    }

} 
```

in the function "void myFunction" it works but it gives garbage value too.how can it makes properly works? plz help...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:43:47.793

for(i = 0; i < anBray; i++) { 行没有意义。您正在尝试将指针与整数进行比较。

要确定数组的大小，您可以像在 main 函数中那样使用 sizeof anBray/sizeof anBray[0] 或 sizeof anBray/sizeof (int) 在您的特定情况下进行操作。

但是，在您的 myFunction 函数中，您接受的是一个 int 指针，因此您无法获得指针指向的数组的大小。这个 int 指针指向 anBray 的第一个元素。也就是说，以下是等价的：

```
myFunction(i, anBray);
myFunction(i, &anBray[0]); 
```

由于您无法从 myFunction 确定数组大小，因此您必须传递大小（实际上是元素计数，而不是字节大小）或在数组末尾使用已知的标记值（例如 -1）来检测它。然后，您可以循环直到到达终点，例如：

```
#include <stdio.h>

void f(int nelem, int *a) {
    int e;
    for (e = 0; e < nelem; e++) // Now the element count is known.
        printf("a[%d] = %d\n", e, a[e]);
}

int main(void) {
    int x[] = { 5, 6, 7, 8 };
    // The number of elements in an array is its total size (sizeof array)
    // divided by the size of one element (sizeof array[0])
    // Here we pass it as the first argument to f()
    f(sizeof x / sizeof x[0], x);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:19:28.920

在任何 C 语言中，您都无法确定声明为无维度的数组（相对于 NSArray）的大小。信息根本无法获得。数组纯粹作为指向第一个元素的指针传递，并且没有与数组一起存储或以某种方式与指针一起传递的维度信息。

在像 Java 这样的语言中，数组本身就是一个对象，带有一个包含其维度的标头。但在 C 中，数组只是某个空间的地址。

# ios - 核心数据 - initWithEntity 导致无法识别的选择器发送到实例

> ID：11393363
> 
> 赞同：2
> 
> 时间：2012-07-09T10:36:53.267
> 
> 标签：ios, core-data, entity

我想使用核心数据来持久化一些实体，比如事件。

因此我使用类`DSManagedObject`和`Event`

该类`DSManagedObject`扩展`NSManagedObject`并具有所有实体都可以使用的通用方法。类`Event`扩展`DSManagedObject`。

下面的代码是`DSManagedObject.h`and `.m`。中的相关代码`.m`就是`getContext`-method。

```
@interface DSManagedObject : NSManagedObject

+ (NSManagedObjectContext *)getContext;
- (NSArray*)getEntitiesForName:(NSString*)_entityName context:(NSManagedObjectContext*)_context;
- (Event*)getEntityForName:(NSString*)_entityName forEventId:(NSInteger)_eventId context:(NSManagedObjectContext*)_context;
- (bool)deleteEntityForName:(NSString*)_entityName forEventId:(NSInteger)_eventId context:(NSManagedObjectContext*)_context;

@end

@implementation DSManagedObject

+ (NSManagedObjectContext *)getContext {

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES],NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES],
                             NSInferMappingModelAutomaticallyOption, nil];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    NSURL *storeUrl = [NSURL fileURLWithPath:[basePath stringByAppendingFormat:@"DesertStorm.sqlite"]];
    NSPersistentStoreCoordinator *persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[NSManagedObjectModel mergedModelFromBundles:nil]];
    NSError *error = nil;

    if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
        NSLog(@"error loading persistent store..");
        [[NSFileManager defaultManager] removeItemAtPath:storeUrl.path error:nil];
        if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
    }

    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init];
    [context setPersistentStoreCoordinator:persistentStoreCoordinator];

    return context;

} 
```

现在在`Event`我想调用的类中，`initWithEntity`但随后`[Event managedObjectModel] unrecognized selector sent to instance`发生错误。什么原因 ？:(

```
@interface Event : DSManagedObject

@property (assign)              NSInteger   eventId;

@end

@implementation Event

@dynamic eventId;

- (id)init {

    NSEntityDescription *entity = [NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:[DSManagedObject getContext]];
    self = [self initWithEntity:entity insertIntoManagedObjectContext:[DSManagedObject getContext]];  // error occurs
    self = [super init];
    if (self) {

    }
    return self;
}

...

@end 
```

我是使用核心数据的新手，所以表现出理解；）感谢您的帮助

PS：如果你想知道我为什么要覆盖`init`-method...复杂的原因^^

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T10:58:55.800

来自[核心数据](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdManagedObjects.html)文档：

> 在典型的 Cocoa 类中，您通常会覆盖指定的初始化程序（通常是 init 方法）。在 NSManagedObject 的子类中，您可以通过三种不同的方式自定义初始化——通过覆盖 initWithEntity:insertIntoManagedObjectContext:、awakeFromInsert 或 awakeFromFetch。**您不应该覆盖 init。**不鼓励您覆盖 initWithEntity:insertIntoManagedObjectContext: 因为在此方法中所做的状态更改可能无法与撤消和重做正确集成。另外两种方法 awakeFromInsert 和 awakeFromFetch 允许您区分两种不同的情况：

因此，灵魂建议是覆盖 initWithEntity:insertIntoManagedObjectContext: 或利用`awakeFromInsert`or `awakeFromFecth`。如果需要，可以在调用`initWithEntity:insertIntoManagedObjectContext:`or之后调用 ovveride 前者，因为它会被调用`insertNewObjectForEntityForName:inManagedObjectContext:`。

是否有您想要实现的特定目标？

**编辑**

尝试覆盖`initWithEntity:insertIntoManagedObjectContext:`而不是`init`

```
- (id)initWithEntity:(NSEntityDescription*)entity insertIntoManagedObjectContext:(NSManagedObjectContext*)context    
{    
    self = [super initWithEntity:entity insertIntoManagedObjectContext:context];
    if (self != nil) {

        // Perform additional initialization.

    }

    return self;    
} 
```

**该方法是 NSManagedObject 的指定初始化器。您不能简单地通过发送 init 来初始化托管对象。**请参阅[`NSManagedObject`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/occ/instm/NSManagedObject/initWithEntity:insertIntoManagedObjectContext:)课程以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:52:58.453

我在 - 方法中解决了这个问题`init`。我仍然重写该方法（我知道我不应该，但是……无论如何）

这是代码

```
- (id)init {
    return [NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:[DSManagedObject getContext]];
} 
```

这将返回一个 NSManagedObject 并且不会发生错误:)

# jsf - 阻止输入以选择富人：建议框

> ID：11393365
> 
> 赞同：1
> 
> 时间：2012-07-09T10:36:59.550
> 
> 标签：jsf, richfaces, autosuggest

我使用richFaces 3.3.3 中的标签rich:suggestionBox 进行智能研究。

但我想阻止用户使用回车键选择项目的可能性。

我不知道该怎么做。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:26:24.140

如果要阻止输入键的操作，您可能需要使用 event.keyCode == 13，13 是键盘输入键操作的键代码。

你可以像这样把它放在你的 rich:suggestionBox 的 onsubmit 属性中。

```
onsubmit="if (event.keyCode == 13) { return false}" 
```

每当用户按回车时，它都不会被提交。希望这可以帮助。

# powershell - How do I parse a date in PowerShell?

> ID：11393366
> 
> 赞同：9
> 
> 时间：2012-07-09T10:37:02.940
> 
> 标签：powershell, powershell-2.0

I write a script that removes backups older than five days. I check it by the name of the directory and not the actual date.

How do parse the directory name to a date to compare them?

Part of my script:

```
...

foreach ($myDir in $myDirs)
{
  $dirName=[datetime]::Parse($myDir.Name)
  $dirName= '{0:dd-MM-yyyy}' -f $dirName
  if ($dirName -le "$myDate")
  {
        remove-item $myPath\$dirName -recurse
  }
}
... 
```

Maybe I do something wrong, because it still does not remove last month's directories.

The whole script with Akim's suggestions is below:

```
Function RemoveOldBackup([string]$myPath)
{

  $myDirs = Get-ChildItem $myPath

  if (Test-Path $myPath)
  {
    foreach ($myDir in $myDirs)
    {
      #variable for directory date
      [datetime]$dirDate = New-Object DateTime

      #check that directory name could be parsed to DateTime
      if([datetime]::TryParse($myDir.Name, [ref]$dirDate))
      {
            #check that directory is 5 or more day old
            if (([DateTime]::Today - $dirDate).TotalDays -ge 5)
            {
                  remove-item $myPath\$myDir -recurse
            }
      }
    }
  }
  Else
  {
    Write-Host "Directory $myPath does not exist!"
  }
}

RemoveOldBackup("E:\test") 
```

Directories names are, for example, 09-07-2012, 08-07-2012, ..., 30-06-2012, and 29-06-2012.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-09T10:53:38.607

`[DateTime]::Today`尝试计算解析目录名和解析结果的区别：

```
foreach ($myDir in $myDirs)
{
    # Variable for directory date
    [datetime]$dirDate = New-Object DateTime

    # Check that directory name could be parsed to DateTime
    if ([DateTime]::TryParseExact($myDir.Name, "dd-MM-yyyy",
                                  [System.Globalization.CultureInfo]::InvariantCulture,
                                  [System.Globalization.DateTimeStyles]::None,
                                  [ref]$dirDate))
    {
        # Check that directory is 5 or more day old
        if (([DateTime]::Today - $dirDate).TotalDays -ge 5)
        {
            remove-item $myPath\$dirName -recurse
        }
    }
} 
```

# java - 如何减小 Java ME 应用程序的大小？

> ID：11393370
> 
> 赞同：6
> 
> 时间：2012-07-09T10:37:17.767
> 
> 标签：java, java-me

使用 Java ME 我遇到了以下问题：

项目构建后，项目中的所有类（包括匿名类）都转换为单独的文件。这导致应用程序大小的增加，因为每个单独的文件在组装包中不小于 1 KB。

这个问题在 J2ME 中尤其严重，因为应用程序的大小非常重要。

我的问题是：

1.  有没有办法解决这个问题？
2.  是否可以使用特定的方法来减小应用程序的大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T10:42:45.377

您的目标是哪些设备？几年前，这在旧设备上曾经是一个问题，但除非您的 MIDlet 真的很大，否则这些天您应该不会有太多问题。您是否真的遇到过问题，或者您是否正在寻求有关如何在未来预防它的建议？

[您可以使用Proguard](http://proguard.sourceforge.net/)混淆和减少编译的类大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:04:05.037

所以 Proguard 做得很好，已经从你的最终 Jar 文件中削减了 300K。它可以做得更多吗？也许。您使用了哪些设置？[我总是](http://smallandadaptive.blogspot.com.br/2008/10/obfuscate-your-classes.html)至少：

*   defaultpackage=""，所有混淆的类都移动到默认包
*   多个字段和方法可以取同名，只要它们的参数和返回类型不同
*   optimizationpasses="3"，要执行的优化遍数。这可能因一个应用程序而异。检查最终的罐子大小，当它没有进一步缩小时，停止增加这个值。

但是你的 jar 文件不太可能下降到你只需要 proguard 所需的 256kb。

当您说您的媒体文件已经被压缩时，您是否在将它们添加到 lwuit 之前[使用了类似PNGGauntlet 的东西？](http://smallandadaptive.blogspot.com.br/2008/10/optimize-your-images.html)

# ant - converting a string from uppercase to lowercase in ant build.xml

> ID：11393373
> 
> 赞同：1
> 
> 时间：2012-07-09T10:37:27.173
> 
> 标签：ant

> **Possible Duplicate:**
> [UPPERCASE, lowercase, Capitalize an Ant property](https://stackoverflow.com/questions/7129672/uppercase-lowercase-capitalize-an-ant-property)

Need to convert a string from upper case to lower case in ant build.xml file

var=xxx Say if i have to make this as XXX and pass it to other variable. I tried few approaches suggested in the forum but they dint work for me..

Can someone help me on this..

I tried the links below which dint work for me.. [Ant string functions?](https://stackoverflow.com/questions/3725827/ant-string-functions) [How do you convert a string to uppercase in ant?](https://stackoverflow.com/questions/5941274/how-do-you-convert-a-string-to-uppercase-in-ant)

Am using ant version 1.6.1

# .net - Library to make HTML XHTML-compliant

> ID：11393375
> 
> 赞同：1
> 
> 时间：2012-07-09T10:37:30.147
> 
> 标签：.net, html, tidy

What libraries can you advise except HtmlAgilityPack and Tidy?

To be able to apply XPath queries to HTML content, I use either Tidy as console program with some tricks to get C# XmlDocument or Html Agility Pack. Both these libs are outdated - HAP wasn't changed since May-2010 and Tidy since 2008\. I had bad experience using HAP because it did not fix document structure by closing tags even after applying next trick:

```
public static HtmlDocument MakeEmptyDocument()
{
    HtmlDocument doc = new HtmlDocument();
    doc.OptionAutoCloseOnEnd = true;
    doc.OptionFixNestedTags = true;
    doc.OptionOutputAsXml = true;
    doc.OptionWriteEmptyNodes = true;
    return doc;
}

public static HtmlDocument LoadHtmlDocumentFromString(string content)
{
    HtmlDocument doc = MakeEmptyDocument();
    doc.LoadHtml(content);
    StringBuilder sb = new StringBuilder();
    using (StringWriter sw = new StringWriter(sb))
        doc.Save(sw);

    using (StringReader sw = new StringReader(sb.ToString()))
        doc.Load(sw);
    return doc;
} 
```

Generally I preferred Tidy but now I have a case when it breaks quite simple document completely and removes BIG content part from it. So it looks like we need alternatives that can be used from .NET .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-09T20:52:10.307

Tidy 项目已被 HTACG（HTML Tidy Advocacy Community Group）接管，现在已经发布了带有 libtidy 库的 tidy5（截至 2015 年底），这些库提供了一个“可以从大量编程语言中调用”的 C 接口。请参阅以下内容：

[HTML Tidy 项目（开发者部分）](http://www.html-tidy.org/developer/)

# android - ViewPager as part of a Fragment in a Multipane Layout

> ID：11393381
> 
> 赞同：1
> 
> 时间：2012-07-09T10:37:48.697
> 
> 标签：android, android-layout, android-viewpager

Hi developer i want to build a custom layout for tablets in landscape mode. I will display a two pane layout with one fragment left and one fragment right. The left fragment is a viewPager with 3 other listfragment. The right fragment shows details about the selected row of the left listView from one page of the viewPager. I didn't find a good solution for this problem. I read you can't put fragments into fragment but how can i build my viewPager as part of a fragment?

Has anybody a good solution or tutorial for this problem? I found this one but it is not so clear for me: [Viewpageindicator inside fragment](https://stackoverflow.com/questions/9699881/viewpageindicator-inside-fragment)

# javascript - 通过掩码获取所有元素

> ID：11393387
> 
> 赞同：0
> 
> 时间：2012-07-09T10:38:01.833
> 
> 标签：javascript

在没有 jQuery 的情况下获取所有这样的元素

```
<input type="checkbox" name="IB_PROPERTY_415_DEL" id="IB_PROPERTY_415_DEL" value="Y">
<input type="checkbox" name="IB_PROPERTY_417_DEL" id="IB_PROPERTY_417_DEL" value="Y"> 
```

其中 415 更改每次迭代，整个值（414、416 等） 页面上存在其他名称的其他复选框我需要一次解决方案，用于控制台脚本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:43:39.797

使用循环？

```
var elements = [];
for (var i=415; i<418; i++)
    elements.push(document.getElementById("IB_PROPERTY_"+i+"_DEL")); 
```

（唯一标识符应该足够了）

如果你不知道 id，你可以试试这个：

```
var inputs = document.querySelectorAll("input[type=checkbox][value=Y]");
var elements = [];
for (var i=0; i<inputs.length; i++)
    if (inputs[i].name == inputs[i].id && /^IB_PROPERTY_\d{3}_DEL$/.test(inputs[i].id))
        elements.push(inputs[i]); 
```

（请注意，这[`document.querySelectorAll`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)不适用于所有浏览器，请参阅@Matt 的解决方案以获得更好的方法）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T10:44:27.810

不使用 jQuery（或至少 Sizzle），需要相当多的工作：

```
function getMatchingEls() { 
    // Get all the input elements
    var els = document.getElementsByTagName("input");
    // This regex matches the varying `name` attributes you have
    var regex = /^IB_PROPERTY_\d+_DEL$/
    // This is what we store matches in
    var matches = [];

    for (var i=0;i<els.length;i++) {
        var curr = els[i];

        // Check it's a checkbox, and it's name matches the expression
        if (curr.type === "checkbox" && regex.test(curr.name)) {
            matches.push(curr);
        }
    }

    return matches;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:42:21.140

获取页面上的所有元素，编写一个正则表达式以使用匹配的字符串测试每个 id 并将它们存储在一个单独的数组中。该数组将包含您想要的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T10:48:20.033

如果所有元素都有根元素，则从中获取所有子元素，然后过滤掉您需要的元素：

```
var mathched = [];
var elements = document.getElementById('root').childNodes;
for (var i = 0; i < elements.length; i++) {
  if (elements[i].id.match("IB_PROPERTY_\\d+_DEL")) {
    matched.push(elements[i]);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T10:49:46.020

简单的方法：

```
function get_checkboxes() {
    var cboxes = new Array();
    var inputs = document.getElementsByTagName('input');
    var len = inputs.length;
    for (var i=0; i<len; i++) {
        //if (inputs[i].name && inputs[i].name.indexOf('IB_PROPERTY_')==0) {
        if (inputs[i].name && inputs[i].name.match("IB_PROPERTY_\\d+_DEL")) { // this test is better test as alexanderb suggests
            cboxes.push(inputs[i]);
        }
    }
    //alert(cboxes.length);
    return cboxes;
} 
```

# java - 枚举有什么用？

> ID：11393389
> 
> 赞同：12
> 
> 时间：2012-07-09T10:38:13.297
> 
> 标签：java, enums

在阅读了一些关于枚举的问题和答案后，我发现它并没有真正有用......

它介于类和变量之间，但我知道我可以在哪里使用它，所以它会比一个类或几个变量更有用。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-09T10:42:15.973

您还可以做其他事情以及使用它们的原因，但我使用枚举的主要原因是防止出现无效参数的可能性。例如，想象以下方法：

```
public void doSomethingWithAMonth(int monthNum); 
```

这不仅是模棱两可的（月份索引是从 1 开始还是从 0 开始？），而且您可以给出完全正确的无效数据（13+，负数）。如果您有`Month`JAN、FEB 等的枚举，则签名变为：

```
public void doSomethignWithAMonth(Month month); 
```

调用此方法的代码将更具可读性，并且不能提供无效数据。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-09T10:42:48.860

我将 Enums 用于任何具有多个不变“类型”的事物。即一周中的几天。

为什么我在这种情况下不使用 String 是因为我不能在 String 上执行 switch 语句，而我可以在 Enum 上执行，所以一周中的每一天我都可以做一些特定的事情。

在使用单例模式时，我也使用 Enum，查看[Effective Java book CH2(CHAPTER 2 CREATING AND DESTROYING OBJECTS)](https://rads.stackoverflow.com/amzn/click/com/0321356683)，引用：

“虽然这种方法尚未被广泛采用，但单元素枚举类型是实现单例的最佳方式。” 不会粘贴代码阅读这本书非常好。

如果我是你，我会首先阅读[Java 中的思考](https://rads.stackoverflow.com/amzn/click/com/0131872486)一章枚举类型。然后在 Effective Java 第 6 章之后，你应该会很好

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-09T11:19:47.317

最简单的定义 -`An enum is just like any other class, with a predefined set of instances.`

enum 最好的部分是它可以在我们不能使用字符串的 switch 语句中使用。

并且 Enum 是一种安全类型，因此您不能在运行时分配新值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-09T10:42:24.157

`enum`强制编码人员从预定义的实体或概念列表中进行选择。虽然您可以通过类或将变量设置为特定的已知值来实现相同的目标，但枚举不太容易出错，因为它宣传并强制执行一个菜单，值的设置者可以从中选择。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-09T10:42:41.060

枚举有助于防止人们做他们不应该做的事情。例如，如果我有：

```
public final static int WEATHER_SUNNY = 0;
public final static int WEATHER_RAINY = 1;
public final static int WEATHER_HAIL = 2; 
```

然后我可以做：`MyClass.WEATHER_SUNNY + MyClass.WEATHER_HAIL`这没有任何意义。这就是为什么最好有一个 Weather 枚举。这使代码更具可读性，并且不允许将两个天气整数相加。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-09T10:47:07.467

我会在其他答案中添加枚举是只有固定数量实例的类。这些实例可能具有字段和方法，并且可以用作任何其他 Java 对象。例如，`Month`枚举可以定义方法，如

```
public int getNumberOfDays(int year);
public boolean isFirstOfYear(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-09T10:42:21.147

正如“enum”这个名字一样，它是枚举常量的理想选择，它提供了扩展的功能。例如，您可以存储一些由多个参数组成的常量，例如：constantId、constanNameString、附加参数。此外，枚举可以包含函数。

枚举的一个奇特用途是制作单例。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-09T10:46:04.263

当您拥有功能上重要且有限的值列表时，枚举很有用。

举例来说，您需要使用一周中的某一天：不会添加另一天，您宁愿在代码中使用 Day.MONDAY 而不是数字，并且必须记住 0 是星期一，1 是星期二和很快。它也使 switch 语句更容易理解，具有：

```
Switch(day) { 
  case Monday : ... break;
  case Tuesday : ... break
  etc.
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-07-09T10:46:53.707

除此之外，枚举对于创建单例很有用：

[在 Java 中实现单例模式的有效方法是什么？](https://stackoverflow.com/questions/70689/efficient-way-to-implement-singleton-pattern-in-java)

# php - Zend Oracle 默认日期格式

> ID：11393390
> 
> 赞同：0
> 
> 时间：2012-07-09T10:38:17.840
> 
> 标签：php, oracle, zend-framework

在我的项目中，我将 Zend 框架与 Oracle 一起使用。当我试图以这样的方式获取信息时：

```
$comments = $this->commentModel->fetchAll($where, array('PERSON_COMMENT_ID ASC'));

$list = array();
foreach ($comments as $comment) {
    $list[] = array(
      'text' => "{$comment['TEXT']}",
      'date' => $comment['CREATION_DATE'],
      'comment_id' => "{$comment['PERSON_COMMENT_ID']}",
      'person_id' => "{$person_id}"
    );
} 
```

Oracle 以格式返回我的日期`dd.MM.YY`。

如何获取格式的日期`dd.MM.YYYY`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:44:10.133

由于您需要更改您选择的列（更改`CREATION_DATE`为`TO_CHAR(CREATION_DATE, 'dd.MM.YYYY')`），您需要准备一个 SELECT 对象，指定所需的列，然后将其传递给以`fetchAll`代替`$where`参数。

所以

```
$select = $this->commentModel->select()
    ->columns(array(..., new Zend_Db_Expr("TO_CHAR(CREATION_DATE, 'dd.MM.YYYY')")))
    ->where(...);

$comments = $this->commentModel->fetchAll($select, array('PERSON_COMMENT_ID ASC')); 
```

希望有帮助。另外，我还没有测试过这个，所以不能保证它会正确解析和/或运行；）

编辑：

由于您无论如何都要遍历每一行，所以您可以只做`date($format, strtotime($comment['CREATION_DATE']));`整个事情。

# oracle - 解密 dbms_obfuscation_toolkit.DESEncrypt oracle 的 JSP 代码

> ID：11393397
> 
> 赞同：0
> 
> 时间：2012-07-09T10:38:50.257
> 
> 标签：oracle, jsp, obfuscation, encryption

我是 Oracle 和 JSP 的新手。作为我任务的一部分，我尝试在 JSP 中创建一个登录页面。所以我已将它连接到数据库，并且我拥有所有用户名和密码。但是 passowrd 是加密格式.. 我的主管告诉我它在 dbms_obfuscation_toolkit.DESEncrypt 中加密...我必须将该密码解密为原始密码，以便我可以使用登录页面上提供的密码检查它.. 我在 JSP 中使用此代码：

```
<%@ page import="java.sql.*" %>
<%@ page import="java.security.*" %>
<%@ page import="javax.crypto.*" %>
<%@ page import="javax.crypto.spec.*" %>

<HTML>
<HEAD>
<TITLE>Simple JSP/Oracle Query Example</TITLE>
</HEAD>
<BODY>

<%
   Class.forName("oracle.jdbc.OracleDriver");

   Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@xxx:xxxx:xxxx","ixxxer","ixxxer");
                        // @//machineName:port:SID,   userid,  password

    Statement st=conn.createStatement();

    ResultSet rs=st.executeQuery("Select * from Cusxxxxer");

    while(rs.next()){
        String name=rs.getString("user_id");
        String p=rs.getString("password");
        out.println(name+":"+p);
        out.println("</br>");

    String algorithm1 = "DES";//magical mystery constant
    String algorithm2 = "DES/CBC/NoPadding";//magical mystery constant
    IvParameterSpec iv = new IvParameterSpec( new byte [] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 } );//magical mystery constant
    Cipher cipher;
    SecretKey key;
    String k="12345abc";
    key = new SecretKeySpec( k.getBytes( ), algorithm1 );
    cipher = Cipher.getInstance( algorithm2 );

    String str="test1234abc";

    cipher.init( Cipher.ENCRYPT_MODE, key, iv ); //normally you could leave out the IvParameterSpec argument, but not with Oracle

    byte[] bytes=str.getBytes("UTF-8");

    byte[] encrypted = cipher.doFinal( bytes );

    }
%>  
</BODY>
</HTML> 
```

我对语句的最后一行有问题：`byte[] encrypted = cipher.doFinal( bytes );`该语句给了我一个错误：

javax.crypto.IllegalBlockSizeException：com.sun.crypto.provider.SunJCE_h.a(DashoA6275) 的 com.sun.crypto.provider.SunJCE_h.b(DashoA6275) 的输入长度不是 8 个字节的倍数。 provider.SunJCE_h.b(DashoA6275) at com.sun.crypto.provider.DESCipher.engineDoFinal(DashoA6275) at javax.crypto.Cipher.doFinal(DashoA6275) at _check1._jspService(_check1.java:83) [SRC:/check1 .jsp:45] 在 com.orionserver[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].http.OrionHttpJspPage.service(OrionHttpJspPage.java:56) 在 oracle.jsp.runtimev2.JspPageTable.service(JspPageTable .java:350) 在 oracle.jsp.runtimev2.JspServlet.internalService(JspServlet.java:509) 在 oracle.jsp.runtimev2.JspServlet.service(JspServlet.java:413) 在 javax.servlet.http.HttpServlet.service( HttpServlet.java:853）在 com。evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:824) at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2) )].server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:330) 在 com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java: 830) at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.HttpRequestHandler.run(HttpRequestHandler.java:285) at com.evermind[Oracle Application Server Containers for J2EE 10g ( 10.1.2.0.2)].server.http.HttpRequestHandler.run(HttpRequestHandler.java:126) 在 com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].util。ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:186) 在 java.lang.Thread.run(Thread.java:534)

我知道错误意味着参数需要 8 个字节的倍数。但我该怎么办？请任何人都可以更正我的代码或给我一些其他的例子。我是 JSP 和 ORACLE 的新手，所以不太了解。提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:30:53.490

请更换

```
String str="test1234abc"; 
```

到

```
String str="12345abc"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:54:57.477

好的，我得到了查询的答案...... psaraj12 提到了同样的事情。但只是为了让所有人都清楚它背后的原因是什么，我使用的是 8 字节加密。所以密码必须是 8 个字符的倍数。因此，通过在登录页面上检查密码必须是 8 个字符的倍数来解决问题。

# android - Tabs text custom color in Sherlock Action Bar

> ID：11393400
> 
> 赞同：2
> 
> 时间：2012-07-09T10:38:52.690
> 
> 标签：android, styles, actionbarsherlock

How can I change the colors of the tabs in the Action Bar depending on whether a tab is selected or not?

It should look like this: black when selected, and that kind of brown when not selected/inactive.

I tried to set it in the styles.xml but I couldn't find the proper name to make it work.

Thanks a lot for your help!

EDIT: I'm using the following piece of code for the TabsListener

```
class MyTabsListener implements TabListener {
        private Fragment fragment;

        public MyTabsListener(Fragment ef) {
            this.fragment = ef;
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            ft.replace(R.id.realtabcontent, fragment);
            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
        }
    } 
```

![enter image description here](../Images/56c932eb6e17725053510f7f86a9af66.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-15T10:32:34.807

上面的答案是有效的，但它们是*不完整*的。如果您希望根据选项卡的**状态**更改不同的**文本颜色**，则需要执行以下步骤：

 **1.  首先，将以下行添加到`res/values/colors.xml`文件中

    ```
    <color name="text_tab_selected">#000000</color>   
    <color name="text_tab_unselected">#886C2A</color> 
    ```

2.  创建一个 android xml 资源文件，`/res/color`命名为 tab_text.xml （或任何你想要的，但要跟踪文件名）。该文件需要作为点@Maarek 的选择器。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.androdid.com/apk/res/android"> 
      <item android:state_selected="true" android:color="@color/text_tab_selected" /> 
      <item android:state_active="true" android:color="@color/text_tab_selected"/> 
      <item android:state_selected="false" android:color="@color/text_tab_unselected" />
      <item android:state_active="false" android:color="@color/text_tab_unselected"/>
    </selector> 
    ```

    请注意`state_active="false"`，`state_active="true"`这是真正的交易。

3.  正如 Fatih Kaplan 和 noloman 所解释的，您必须将新样式添加到您的主题样式中。打开或创建`res/values/styles.xml`并添加您的主题以下行：

    ```
    <style name="TabTextColor" parent="@style/Widget.Sherlock.ActionBar.TabText">  
     <item name="android:textColor">@color/tab_text</item>  
    </style> 
    ```

4.  最后将以下几行添加到您的应用程序主题中`<style name="Theme.yourTheme" parent="@style/Theme.Sherlock">`

    ```
    <item name="actionBarTabTextStyle">@style/TabTextColor</item>
    <item name="android:actionBarTextStyle>@style/TabTextColor</item> 
    ```

5.  推论：记得将你的主题添加到 manifest.xml 文件中的 Activity 中。
    如果每个 Api 版本存在，请记住在任何样式文件中重复第 4 步。`(res/values-v11/styles.xml, res/values-v16/styles.xml and so on)`.
    如果您在线收到 Lint 警告`"android:actionBarStyle"`，请将该行替换为以下内容：

    ```
    <item name="android:actionBarTabTextStyle" tools:ignore="NewApi">@style/TabTextColor</item> 
    ```

![选项卡捕获](../Images/f0cbcc793a8ad1859b46d3d48c7685ab.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T08:31:38.227

事实上这很简单。你应该做的就是定义一个这样的属性

```
<style name="tabtextcolor" parent="@style/Widget.Sherlock.ActionBar.TabText">
    <item name="android:textColor">@android:color/white</item>
</style> 
```

接着

将这些样式添加到您的主题中

```
<item name="actionBarTabTextStyle">@style/tabtextcolor</item>
<item name="android:actionBarTabTextStyle">@style/tabtextcolor</item> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T18:31:51.850

您可以通过创建这样的颜色资源来做到这一点：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" android:color="#ff7a7a7a"/> <!-- pressed -->
    <item android:state_focused="true" android:color="#ff7a7a7a"/> <!-- focused -->
    <item android:state_selected="true" android:color="#ff6955b4"/> <!-- selected -->
    <item android:color="#ff7a7a7a"/> <!-- default -->

</selector> 
```

在你的风格中，你会做这样的事情。我使用 ActionBarSherlock 但你可以很容易地找到非 Sherlock 应用程序的 TabText 样式。

```
<style name="Theme.StyledActionBar" parent="@style/Theme.Sherlock">
    <item name="actionBarTabTextStyle">@style/StyledActionBarTabText</item>
    <item name="android:actionBarTabTextStyle">@style/StyledActionBarTabText</item>
</style>

<style name="StyledActionBarTabText" parent="@style/Widget.Sherlock.ActionBar.TabText">
    <item name="android:textColor">@color/tab_text</item>
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T10:43:35.250

如果您注册 TabHost.OnTabChanged 事件并调用 mTab​​Host.getCurrentTabView() 来获取视图，那么 view.setBackgroundResource() - 您可以设置背景图像...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T12:41:32.847

```
<!-- ActionBar Tab bar style -->
        <item name="actionBarTabBarStyle">@style/Sundio.ActionBarTabs</item>
        <item name="android:actionBarTabBarStyle">@style/Sundio.ActionBarTabs</item>

<style name="Sundio.ActionBarTabs" parent="Widget.Sherlock.Light.ActionBar.TabBar">
        <item name="android:background">@drawable/actionbar_tabs_selector</item>
        <item name="background">@drawable/actionbar_tabs_selector</item>
        <item name="titleTextStyle">@color/brown_text_color</item>
        <item name="android:titleTextStyle">@color/brown_text_color</item>
    </style> 
```**

# backbone.js - how to lay out a complex app and its views/regions/layouts

> ID：11393403
> 
> 赞同：3
> 
> 时间：2012-07-09T10:39:00.550
> 
> 标签：backbone.js, marionette

Even after reading some nice tutorials and blogposts on how to structure a Backbone Marionette app, I got confused while writing my own. Here is my setup.

I have an app that can easily be structured into different sub-apps (aka Backbone modules) Click on a link in my main navigation bar starts one of these apps. That means it loads the apps starting layout into my #main div.

But these apps have different layouts in themself, so navigating inside the app overwrites regions specified in the main app layout.

e.g.

```
var myApp = Backbone.Marionette.Application()
...
var layout = myApp.myModule.layout = new Backbone.Marionette.Layout()
...
myApp.main.show(myApp.myModule.layout) 
```

where layout has the following DOM tree each mapped to a region

```
#app_main
  .albums
  .artists 
```

Then I do something like

```
layout.app_main.show(new myView()) 
```

and from now on I can not get access to layout.albums or layout.artists even after using the back button (using a Backbone.Router and History)

Should I split my module's main layout to contain only #app_main, and load the opening layout into it at a separate step? Or do you have any other ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:14:57.977

了解更多关于您的目标会有所帮助，但这里有一个答案。让我知道它是否有帮助！

假设这是您的 HTML 布局：

```
<div id="app">
  <div id="app_nav">
    <a href="#music">Music</a>
    <a href="#books">Books</a>
  </div>
  <div id="sub_app"></div>
</div> <!-- /#app_main --> 
```

对于我们的“音乐”子应用，我们将使用这个模板：

```
<script id="musicApp-template" type="template/html">
  <div class="albums"></div>
  <div class="artists"><div>
</script> 
```

对于专辑项目视图：

```
<script id="album-template" type="template/html">
  <img src="<%=albumThumbSrc %>" />
  <p><%=albumTitle %></p>
</script> 
```

对于艺术家项目视图：

```
<script id="artist-template" type="template/html">
  <%=firstName %> <%=lastName %>
</script> 
```

--

对于我们的“书籍”子应用，我们将使用这个模板：

```
<script id="booksApp-template" type="template/html">
  <div class="books"></div>
  <div class="authors"></div>
</script> 
```

对于图书项目视图：

```
<script id="book-template" type="template/html">
  <img src="<%=bookThumbSrc %>" />
  <p><%=bookTitle %></p>
</script> 
```

对于艺术家项目视图：

```
<script id="author-template" type="template/html">
  <%=firstName %> <%=lastName %>
</script> 
```

并引导应用程序：

```
$(document).ready({
  myApp.start();
  if(!Backbone.history.started) Backbone.history.start();
}); 
```

--

现在设置我们的 Marionette 视图。

在 myApp.js 中

```
var myApp = new Backbone.Marionnette.Application();

myApp.addRegions({
  subAppRegion: "#sub_app"
});

// Your data
myApp.artists = new Backbone.Collection([...]);
myApp.books = new Backbone.Collection([...]); 
```

在 myApp.musicApp.js

```
myApp.module("musicApp", function(musicApp, myApp) {
  /* Setup your Views
   ================== */
  var MusicLayout = Backbone.Marionette.Layout.extend({
    template: #musicApp-template",
    regions: {
      albumsRegion: ".albums",
      artistsRegion: ".artists"
    }
  });

  var AlbumView = Backbone.Marionette.ItemView.extend({
    template: "#album-template"
  });

  var AlbumListView = Backbone.Marionette.CollectionView({
    itemView: AlbumView
  });

  var ArtistView = ...
  var ArtistListView = ...

  /* Create router for app navigation
   ==================================== */
  var Router = Backbone.Marionette.AppRouter.extend({
    appRoutes: {
      "music" : showMusicApp
    },
    controller: musicApp
  });
  new Router();

  /* Method to show the music app
   ================== */
  musicApp.showMusicApp = function() {
    // Instantiate Views
    var musicLayout = new MusicLayout();
    var albumListView = new AlbumListView({ collection: myApp.albums });
    var artistListView = new ArtistsListView({ collection: myApp.artists });

    // Show musicApp layout in subAppRegion of main app
    myApp.subAppRegion.show(musicLayout);

    // Show albums and artists in musicApp layout
    layout.albumsRegion.show(albumListView);
    layout.artistsRegion.show(artistListView);
  }
}); 
```

`myApp.booksApp`你可以用同样的方式设置你的模块：

```
myApp.module("booksApp", function(booksApp, myApp) {
  ...
  var Router = Backbone.Marionette.AppRouter.extend({
    appRoutes: {
      "books" : showBooksApp
    },
    controller: booksApp
  });
  new Router();

  booksApp.showBooksApp = function() {
    ...
    myApp.subAppRegion.show(booksLayout)
    ...
  }
  ...
}); 
```

我还没有测试所有这些代码，如果有一些问题很抱歉，我相信它可以改进。

如果您还没有阅读[David Sulc 的教程](http://davidsulc.com/blog/2012/05/06/tutorial-a-full-backbone-marionette-application-part-1/)，您应该看一下 - 它会让您更好地了解完整的应用程序。但我希望这能让您对如何使用布局和区域来显示不同的 subApp 视图有一个基本的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T04:45:01.350

作为我自己项目的一般规则，我总是将定义区域的元素保持为空，然后在`Layout.onRender`方法中动态加载它们。这在 Marionette.Async 中具有额外的好处，如果我需要在显示区域中的视图之前从服务器加载其他数据，我可以在视图的`beforeRender`方法中这样做。

我的规则的一个例外是在该区域的元素中显示一个动画的“正在加载...” div，一旦填充该区域就会被覆盖。

# macos - 如何在 Mac OS X 上列出 POSIX 信号量

> ID：11393411
> 
> 赞同：9
> 
> 时间：2012-07-09T10:39:40.140
> 
> 标签：macos, posix, handle

如何列出属于 Mac OS X 上特定进程的 POSIX 命名信号量？

我知道这个`ipcs -s`命令，但它似乎列出了 System V 信号量，我猜它与 POSIX 不同，因为我不认识我自己命名的信号量。

我使用`sem_open`//函数`sem_close`。`sem_wait`

有没有办法列出属于特定进程的“句柄”，比如 Windows 平台上的 Process Explorer？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-06T02:24:26.980

你可以做到`lsof -p <pid> | grep PSXSEM`。`lsof`特权运行时可能更可靠，您不妨使用`sudo lsof ...`.

# iphone - 如何为此使用nspredicate？

> ID：11393412
> 
> 赞同：0
> 
> 时间：2012-07-09T10:40:01.547
> 
> 标签：iphone

我坚持在以下代码中使用 nspredicate ：

```
for (int i=0; i<[nodes count]; i++)
{
    NSMutableDictionary *dict=[nodes objectAtIndex:i];

    NSInteger docid = [[dict objectForKey:@"docid"] integerValue];
    NSString *strPred = [NSString stringWithFormat:@"docId == %i",docid];
    [request setPredicate:[NSPredicate predicateWithFormat:strPred]];
    NSArray* objects=[[context executeFetchRequest:request error:nil] retain];
   NSPredicate *objCount = [NSPredicate predicateWithFormat:[objects count]];

    if([objects count])//how do i reduce these if else block too using nsprdicate
    {
        [dict setObject:@"1" forKey:@"isbookthere"];
    }
    else
    {
        [dict setObject:@"0" forKey:@"isbookthere"];
    }
    [objects release];
    [nodes replaceObjectAtIndex:i withObject:dict];
} 
```

我也必须删除 ifelse 块，因为如果计数达到 4000，则循环会进行那些导致问题的多次迭代，所以为了降低这种风险，我假设使用 NSPredicate。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:27:40.663

您只需将 var 初始化为零。如果对象计数大于零，您只需更改 var 值。我可以从你的解释中预测到这一点。如果我在某个地方错了，请告诉我。

# php - How can I meassure server size requirement?

> ID：11393414
> 
> 赞同：0
> 
> 时间：2012-07-09T10:40:03.067
> 
> 标签：php, memory-management, resources, webserver

Consider a regular PHP website with no Flash or other special features. Is there a measurement for server size requirements (e.g. 1 GB RAM allowing 100 people at the same time being connected)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:48:07.240

您更有可能首先面临数据级别的限制，而不是应用程序级别的限制。例如，如果您使用的是 MySQL，则有一个[公式](https://dba.stackexchange.com/questions/1229/how-do-you-calculate-mysql-max-connections-variable)可以计算（大致！）在一定 RAM 量可用的情况下它可以服务的连接数，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:44:18.860

你不需要太多的内存来服务一个普通的网站，所以要求可能非常低。

但是，如果您同时考虑超过 100 个用户，这是一个相当大的数量，那么最好对您的网站进行分析，测量每个用户的大小和内存使用情况，然后乘以了解它如何在您的特定网站上增长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:46:33.377

不，如果不了解有关您的情况/用例的更多详细信息，就无法对服务器大小要求进行概括。

请提供更多详细信息：

*   您打算服务多少流量？
*   这些访客最常做的事情是什么？浏览页面、创建图像、发表评论等，
*   您可能拥有的有关要求的任何其他信息。

此外，您始终可以从共享主机开始，然后在您的网站变得非常受欢迎时继续使用更大的计划或云服务器。

# cuda - 用于电磁学的 CUDA 中的 3D 有限差分时域 (FDTD)

> ID：11393418
> 
> 赞同：2
> 
> 时间：2012-07-09T10:40:51.467
> 
> 标签：cuda

我看到了 CUDA-SDK 中提供的 FDTD3D 示例，但没有关于它的文档。是否有人尝试修改它以计算麦克斯韦方程组的解，或者最好从头开始编写所有内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-08T21:10:28.023

这是此处提供的较晚答案，用于从未回答列表中删除此问题。

正如 OP 所提到的，CUDA-SDK 提供了一个 3D 有限差分时域 (FDTD) 求解器，该求解器的描述在论文中提供

[P. Micikevicius，“使用 CUDA 在 GPU 上进行 3D 有限差分计算”](https://www.google.it/search?q=3D+Finite+Difference+Computation+on+GPUs+using+CUDA&oq=3D+Finite+Difference+Computation+on+GPUs+using+CUDA&aqs=chrome..69i57j0.1136j0j9&sourceid=chrome&es_sm=122&ie=UTF-8)

该代码已针对 Tesla 卡进行了优化，并使用共享内存来加载 3D 计算域的切片，以实现快速模板评估（减少*读取冗余*）。该代码不适用于电磁应用，因为更新规则如下：

![在此处输入图像描述](../Images/8dffeb2f1101ec8685b5ef3cab1e5e6f.png)

但它可以很容易地扩展到电磁学。在这方面实现电磁学 3D FDTD 代码并特别注意模板计算效率的一个很好的参考如下：

[V. Demir，AZ Elsherbeni，“基于计算统一设备架构 (CUDA) 的有限差分时域 (FDTD) 实现”，*Appl。计算。电磁铁。社会党。J.*，卷。25，名词。4，第 303-314 页，2010 年 4 月](http://www.engineering.olemiss.edu/~atef/pdfs/journal_papers/2010/CUDA_Based_FDTD_Implementation.pdf)

它还对有效的模板计算进行了彻底的讨论。电磁场是矢量场，在这种情况下，上述更新方程由电场和磁场三个分量的六个方程代替。例如，`x`磁场的-分量的更新方程是

![在此处输入图像描述](../Images/d951df9b7f435b3100032f44054524f2.png)

最后，应该提到 CUDA 中 3D FDTD 的另一个讨论来源是 Parallel ForAll 博客，请参阅

[CUDA C/C++ 中的有限差分方法，第 1 部分](http://devblogs.nvidia.com/parallelforall/finite-difference-methods-cuda-cc-part-1/)

和

[CUDA C++ 中的有限差分方法，第 2 部分](http://devblogs.nvidia.com/parallelforall/finite-difference-methods-cuda-c-part-2/)

ps 此答案中出现的公式是使用[mimetex](http://www.forkosh.com/mimetex.html)生成的。

# java - 在 GlassFish 中更改 JVM 命令行程序

> ID：11393421
> 
> 赞同：0
> 
> 时间：2012-07-09T10:41:04.587
> 
> 标签：java, glassfish, profiling

我正在尝试链接到 Oracle Solaris Studio 12.2：性能分析器 [http://docs.oracle.com/cd/E18659_01/html/821-1379/afabb.html](http://docs.oracle.com/cd/E18659_01/html/821-1379/afabb.html)

它要求您使用`collect -j`命令来运行`java`JVM。

不幸的是，GlassFish 似乎只允许您更改 Java 主页。`./config/asenv.conf`里面有一个`AS_JAVA`.

我试图在`start-domain`那里捕获长长的 Java 命令行。但是，它似乎挂起。

有没有办法改变JVM命令行程序？希望没有入侵 GlassFish 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:32:39.200

没有机会。您必须将参数添加到您的 asadmin 脚本中……但这并不神奇。

# wpf - Kinect sdk 1.5 getDisplayPosition 方法

> ID：11393422
> 
> 赞同：-1
> 
> 时间：2012-07-09T10:41:10.123
> 
> 标签：wpf, canvas, kinect

> **可能重复：**
> [将 Kinect 方法从 Beta 2 转换为版本 1](https://stackoverflow.com/questions/10367582/converting-kinect-methods-from-beta-2-to-version-1)

在 kinect sdk beta 2 中，有一种方法可以获取关节的显示位置。kinect sdk 1.5 中是否有一种方法可以做同样的事情，还是我必须编写一个新方法？

```
 private Point getDisplayPosition(Joint joint)
    {          

        float depthX, depthY;
        _kinectNui.SkeletonEngine.SkeletonToDepthImage(joint.Position, out depthX, out depthY);
        depthX = Math.Max(0, Math.Min(depthX * 320, 320));  //convert to 320, 240 space
        depthY = Math.Max(0, Math.Min(depthY * 240, 240));  //convert to 320, 240 space
        int colorX, colorY;
        ImageViewArea iv = new ImageViewArea();
        // only ImageResolution.Resolution640x480 is supported at this point
        _kinectNui.NuiCamera.GetColorPixelCoordinatesFromDepthPixel(ImageResolution.Resolution640x480, iv, (int)depthX, (int)depthY, (short)0, out colorX, out colorY);

        // map back to skeleton.Width & skeleton.Height
        return new Point((int)(imageContainer.Width * colorX / 640.0) , (int)(imageContainer.Height * colorY / 480) );
    } 
```

此方法取自 Kinect Skeleton。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:57:28.863

有关新的、旧的和工作方法，请参阅[将 Kinect 方法从 Beta 2 转换为版本 1](https://stackoverflow.com/questions/10367582/converting-kinect-methods-from-beta-2-to-version-1)。工作方法是：

```
private Point getDisplayPosition(DepthImageFrame depthFrame, Joint joint)
{ 
    float depthX, depthY;        
    DepthImagePoint depthPoint = sensor.MapSkeletonPointToDepth(joint.Position, depthImageFormat);

    depthX = depthPoint.X;
    depthY = depthPoint.Y;

    depthX = Math.Max(0, Math.Min(depthX * 320, 320));
    depthY = Math.Max(0, Math.Min(depthY * 240, 240));

    int colorX, colorY;
    ColorImagePoint colorPoint = depthFrame.MapToColorImagePoint(depthPoint.X, depthPoint.Y, sensor.ColorStream.Format);
    colorX = colorPoint.X;
    colorY = colorPoint.Y;

    return new Point((int)(skeleton.Width * colorX / 640.0), (int)(skeleton.Height * colorY / 480));
} 
```

# mysql - MySQL 在哪里 在

> ID：11393423
> 
> 赞同：27
> 
> 时间：2012-07-09T10:41:13.587
> 
> 标签：mysql, where-clause, multiple-tables, in-subquery

有没有办法（没有 JOIN）`WHERE`在 2 列（或）`IN`子查询上使用子句？目前，我正在做

```
WHERE 'col1' IN
(
    SELECT id FROM table
) OR 'col2' IN
(
    SELECT id FROM table
) 
```

而且我相信我可以做得更好:)。我也试过`WHERE ('col1', 'col2') IN <subquery>`，但 MySQL 说：`Operand should contain 2 column(s)`

谢谢你的帮助。

编辑：通过“不加入”，我的意思是我已经做了很多加入：[http](http://pastebin.com/bRfD21W9) ://pastebin.com/bRfD21W9 ，正如你所看到的，子查询在另一个表上。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-04-07T07:24:22.203

```
SELECT *
FROM table

WHERE 
(col_1, col_2) NOT IN
 (SELECT col_1, col_2 FROM table) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T10:53:49.757

像这样重写你的代码，你很高兴：

```
WHERE ('col1', 'col2') IN
(
    SELECT id, id FROM table
) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T14:23:03.377

我读过你不同意`JOIN`，但只是另一种方式。看看它是否`join`对`friends`你有用。

```
SELECT `timeline`.`action`, `timeline`.`data`, `timeline`.`tlupdate`,
            u1.`id` AS ufrom_id, u1.`username` AS ufrom_username, u1.`firstname` AS ufrom_firstname, u1.`lastname` AS ufrom_lastname, u1.`picture` AS ufrom_picture,
            u2.`id` AS uto_id, u2.`username` AS uto_username, u2.`firstname` AS uto_firstname, u2.`lastname` AS uto_lastname, u2.`picture` AS uto_picture,
            m.`id` AS m_id, m.`name` AS m_name, m.`alternative_name` AS m_altname, m.`tiny_img` AS m_tiny, m.`normal_img` AS m_normal
    FROM `timeline`
    JOIN `users` u1 ON u1.`id` = `timeline`.`user_id_from`
    JOIN `users` u2 ON u2.`id` = `timeline`.`user_id_to`
    JOIN `friends` f on f.`idol_id`=u1.`id` or f.`idol_id`=u2.`id`
    JOIN `movies` m ON m.`id` = `timeline`.`movie_id`; 
```

## 更新：

当您使用时，`inner join`您也可以这样做以避免完整结果集的条件。

```
JOIN `friends` f on ((f.`idol_id`=u1.`id` or f.`idol_id`=u2.`id`) and f.idol_id = ?) 
```

您可以使用`DISTINCT`或使用`GROUP BY`来获得独特的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-07T07:17:17.773

manurajhada 答案很好。如果您仍然决定避免加入，您可以：

```
SELECT ... FROM (SELECT id FROM table) subquery, other_table
WHERE other_table.col1 = subquery.id OR other_table.col2 = subquery.id 
```

这应该使 MySQL 使用连接缓冲区来保存子查询的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T10:58:08.883

您可以尝试以下查询：

```
select name from user_details where groupid IN ( select g_id from user_groups ) OR  cityid IN ( select c_id from user_cities ); 
```

希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-20T08:34:03.333

我也面临类似的问题

```
SELECT COUNT(*) FROM msg_old WHERE idfrom IN 
    (SELECT olduserid FROM temp_user)
    OR
    idto IN (SELECT olduserid FROM temp_user) 
```

我想出了解决方案

```
SELECT * FROM msg_old 
INNER JOIN temp_user 
ON msg_old.IDFROM = temp_user.olduserid
OR msg_old.IDTO = temp_user.olduserid 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-07T14:12:51.043

```
select * from table1  WHERE (col1, col2) in (select subquerycol1, subquerycol2 from subquery_table where some_condition=1) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-09T10:44:38.187

是的，你可以做到。这很容易。您必须在子查询中选择与 where 子句中提到的相同数量的列。

# ios - 使用 CCCrypt 进行 AES 加密后 DataSize 发生变化

> ID：11393424
> 
> 赞同：0
> 
> 时间：2012-07-09T10:41:14.220
> 
> 标签：ios, encryption

我正在尝试使用 CCCrypt 加密我的数据，但它有问题，我加密后数据长度发生了变化，但解密时没有发生，这是以下代码。

```
- (NSData *)AES256EncryptWithKeyGenerateIV:(NSString *)key {
    char keyPtr[kCCKeySizeAES128+1];
    bzero(keyPtr, sizeof(keyPtr));

    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    char ivPtr[kCCKeySizeAES128+1];

    unsigned char result[CC_MD5_DIGEST_LENGTH];
    CC_MD5([key UTF8String], strlen([key UTF8String]), result);

    NSString* resultString = [NSString stringWithFormat:
                              @"%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x",
                          result[0], result[1], result[2], result[3],
                          result[4], result[5], result[6], result[7],
                          result[8], result[9], result[10], result[11],
                          result[12], result[13], result[14], result[15]
                          ];
    resultString = [resultString substringToIndex:16];

    bzero(ivPtr, sizeof(ivPtr));
    [resultString getCString:ivPtr maxLength:sizeof(ivPtr)     encoding:NSUTF8StringEncoding];
    NSUInteger dataLength = [self length];

    NSLog(@"Before encrypt dataLength is %d",dataLength);

    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesDecrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128,
                                      0,
                                      keyPtr, kCCBlockSizeAES128,
                                      ivPtr,
                                      [self bytes], dataLength,
                                      buffer, bufferSize,
                                      &numBytesDecrypted);

    NSLog(@"After file encrypted dataLength is %d",numBytesDecrypted);
    if (cryptStatus == kCCSuccess) {
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer);
    return nil;
} 
```

这是我打印数据长度的日志：

2012-07-09 18:29:20.787 加密前 dataLength 为 248
2012-07-09 18:29:20.788 文件加密后 dataLength 为 240
2012-07-09 18:29:20.789 加密前 dataLength 为 20
2012-07- 09 18:29:20.790 文件加密后 dataLength 为 16
2012-07-09 18:29:20.792 加密前 dataLength 为 583
2012-07-09 18:29:20.792 文件加密后 dataLength 为 576
2012-07-09 18: 29:20.795 加密前 dataLength 为 31120
2012-07-09 18:29:20.796 文件加密后 dataLength 为 31120
2012-07-09 18:29:20.797 加密前 dataLength 为 27551
2012-07-09 18:29:20.798 后文件加密数据长度为 27536
2012-07-09 18:29:20.800 加密前数据长度为 1266
2012-07-09 18:29:20.800 文件加密后 dataLength 为 1264
2012-07-09 18:29:20.802 加密前 dataLength 为 431315
2012-07-09 18:29:20.809 文件加密后 dataLength 为 431312
2012-07 -09 18:29:20.815 加密前 dataLength 为 204
2012-07-09 18:29:20.815 文件加密后 dataLength 为 192
2012-07-09 18:29:20.817 加密前 dataLength 为 1083
2012-07-09 18: 29:20.817 文件加密后 dataLength 为 1072
2012-07-09 18:29:20.818 加密前 dataLength 为 440
2012-07-09 18:29:20.819 文件加密后 dataLength 为 432

有人可以告诉我为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:10:28.657

使用分组密码时必须应用填充，以使纯文本适合密码块。AES 是一种分组密码，使用 128 位、16 字节的分组大小。尝试在 CCOptions 中使用显式填充和 CBC 模式，请参阅 CCCrypt 的 Apple 文档如何做到这一点（尽管我再次看到了对加密方法的更好描述）。

[编辑] 注意：尝试`kCCOptionPKCS7Padding`，CBC 可能是默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T06:48:03.823

我使用 CCCrypt 函数对某些东西进行 DES 加密。当要加密的数据长度不是 8 字节的倍数时，就会发生错误大小。

所以我处理如下：

```
- (NSString *) encryptUseDES:(NSString *)plainText key:(NSString *)key
{
    NSString *ciphertext = nil;
    const char *textBytes = [plainText UTF8String];
    NSUInteger dataLength = [plainText length];
    NSUInteger len1=dataLength % 8;

    if(len1!=0)
    {
        dataLength+=(8-len1);
    }    
    unsigned char buffer[1024];
    memset(buffer, 0, sizeof(char));
    size_t numBytesEncrypted = 0;

    Byte iv[] = {0x02, 0x00, 0x01, 0x02, 0x00, 0x06, 0x00, 0x05};

    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmDES,
                                          NULL,
                                          [key UTF8String], kCCKeySizeDES,
                                          iv,
                                          textBytes, dataLength,
                                          buffer, 1024,
                                          &numBytesEncrypted);
.....
} 
```

然后一切正常！

# javascript - Javascript OOP - 在异步回调中丢失了这个

> ID：11393430
> 
> 赞同：7
> 
> 时间：2012-07-09T10:41:56.093
> 
> 标签：javascript, oop, callback, this, prototype

我的问题仍然困扰着我的 js oop - 我确定我做的不好，但我不知道如何做对。

例如，我有这个代码

```
Auth.prototype.auth = function () {
    var request = new XMLHttpRequest();

    request.open('GET', this.getAuthServerURL() + '/token', true);
    request.send();

    request.onloadend = function () {
      var response = JSON.parse(request.responseText);

      console.log(response);
      if(response.result == 'found') {
        var token = response.token;

        this.setToken(token);
        this.isSigned = true;
      } else {
        console.log('Not logged yet.');
      }
    }
} 
```

问题是我无法从“request.onloadend”函数的上下文访问函数 setToken - 这可能是因为我失去了对“this”的引用。

这个问题的解决方案是什么？我可以以某种方式将“this”变量传递给这个函数的上下文吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T10:44:37.917

有几种方法可以做到这一点。最直接的就是简单地保存一份你需要的值：

```
Auth.prototype.auth = function () {
    var request = new XMLHttpRequest();
    var self = this; // save "this" value

    request.open('GET', this.getAuthServerURL() + '/token', true);
    request.send();

    request.onloadend = function () {
      var response = JSON.parse(request.responseText);

      console.log(response);
      if(response.result == 'found') {
        var token = response.token;

        self.setToken(token); // use saved "this" value
        self.isSigned = true;
      } else {
        console.log('Not logged yet.');
      }
    }
} 
```

另一种方法是使用[`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)：

```
request.onloadend = (function () {
  var response = JSON.parse(request.responseText);

  console.log(response);
  if(response.result == 'found') {
    var token = response.token;

    this.setToken(token); // use saved "this" value
    this.isSigned = true;
  } else {
    console.log('Not logged yet.');
  }
}).bind(this); 
```

第二种方法“更干净”，但存在浏览器兼容性问题（IE < 9 不支持）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T10:45:00.297

[`.bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)功能：

```
Auth.prototype.auth = function () {
    var request = new XMLHttpRequest();

    request.open('GET', this.getAuthServerURL() + '/token', true);
    request.send();

    request.onloadend = function () {
      var response = JSON.parse(request.responseText);

      console.log(response);
      if(response.result == 'found') {
        var token = response.token;

        this.setToken(token);
        this.isSigned = true;
      } else {
        console.log('Not logged yet.');
      }
    }.bind(this); //<-- bound
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:44:29.290

您可以在外部范围内捕获对它的引用，我使用了 identifier `self`，但是请随意赋予名称更多语义含义：

```
var self = this;
request.onloadend = function () {
  ...
  self.setToken(token);
  ...
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T10:44:41.860

`this`回调前捕获：

```
Auth.prototype.auth = function () {
    var self = this;

    var request = new XMLHttpRequest();

    request.open('GET', this.getAuthServerURL() + '/token', true);
    request.send();

    request.onloadend = function () {
      var response = JSON.parse(request.responseText);

      console.log(response);
      if(response.result == 'found') {
        var token = response.token;

        self.setToken(token);
        self.isSigned = true;
      } else {
        console.log('Not logged yet.');
      }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T10:45:11.503

保存`this`在回调外部的本地变量中。

```
Auth.prototype.auth = function () {
    var request = new XMLHttpRequest();
    var _this = this;

    request.open('GET', this.getAuthServerURL() + '/token', true);
    request.send();

    request.onloadend = function () {
      var response = JSON.parse(request.responseText);

      console.log(response);
      if(response.result == 'found') {
        var token = response.token;

        _this.setToken(token);
        _this.isSigned = true;
      } else {
        console.log('Not logged yet.');
      }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T10:45:14.087

你说得很对：回调是用`XMLHTTPRequest`对象作为上下文（即 的值`this`）调用的。您需要给您的实例另一个名称，以便您可以在回调范围内访问它：

```
Auth.prototype.auth = function () {
    var request = new XMLHttpRequest(),
        authInstance = this;

    request.open('GET', this.getAuthServerURL() + '/token', true);
    request.send();

    request.onloadend = function () {
      var response = JSON.parse(request.responseText);

      console.log(response);
      if(response.result == 'found') {
        var token = response.token;

        authInstance.setToken(token);
        authInstance.isSigned = true;
      } else {
        console.log('Not logged yet.');
      }
    }
} 
```

[有关为什么这是必要的更多解释，请参见另一个问题的答案](https://stackoverflow.com/questions/4886632/what-does-var-that-this-mean-in-javascript/4886696#4886696)。我使用`authInstance`了而不是`self`，因为我认为使用描述性变量名称通常很好；您永远不必弄清楚`authInstance`意味着什么，而`self`当将来有人（可能是您！）阅读代码时可能会模棱两可。

另一种选择是使用[`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)，但这可能比这里需要的更复杂。

# ruby-on-rails - node.js 世界中的 ActiveRecord 等价是什么？

> ID：11393438
> 
> 赞同：28
> 
> 时间：2012-07-09T10:42:29.537
> 
> 标签：ruby-on-rails, node.js, activerecord

我正在考虑`node.js`为即将到来的项目使用工具，用于学习和绩效目的。[例如](https://stackoverflow.com/questions/11151243/how-to-optimize-this-query-in-activerecord-latest-10-topics-by-friends)，Rails 中的一些模型：

```
class User
  has_many :topics
  has_many :friends
  has_many :friend_users, :through => :friends
  has_many :friend_topics, :through => :friend_users, :source => :topics      
end

class Friend
  belongs_to :user
  belongs_to :friend_user, :class_name => "User", 
      :foreign_key => :phone_no, :primary_key  => :phone_no
end

class Topic
  belongs_to :user
end 
```

允许优雅的查询代码，例如：

```
latest_10_topics_from_friends = current_user.friend_topics.limit(10) 
```

并生成优化的 SQL。`node.js`生态系统中有类似的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-12T18:54:32.780

水线似乎是您正在寻找的东西。它是由 Sails Project 背后的同一个人创建的。

[https://github.com/balderdashy/waterline](https://github.com/balderdashy/waterline)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-09T19:35:04.990

## 更新的答案

使用[续集](https://github.com/sequelize/sequelize)

* * *

### 老答案：

看看[塔](https://github.com/viatropos/tower)项目。您可以按如下方式定义模型：

```
# app/models/user.coffee
class App.User extends Tower.Model
  @belongsTo "author", type: "User"
  @belongsTo "commentable", polymorphic: true
  @has_many "topics"
  @has_many "friends"
  @has_many "friend_users", through: "friends"
  @has_many "friend_topics", through: "friends_users", source: "topics"

# app/models/friend.coffee
class App.Friend extends Tower.Model
  @belongs_to "user"
  @belongs_to "friend_user", type: "User", 
                foreign_key: "phone_no", primary_key: "phone_no"

# app/models/topic.coffee
class App.Topic extends Tower.Model
  @belongs_to "user" 
```

现在您将能够查询您的数据

```
current_user.friend_topics().limit(10) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-09T11:00:36.543

如果你使用的是 MySql，你可以试试 Sequelize.js。很难达到 ActiveRecord 提供的功能数量，但尽管如此，我一直在使用 Sequelize，它是 Node.js 的一个很好的解决方案

其他数据库还有其他几种 ORM 解决方案，您可以在此处查看它们[http://search.npmjs.org/](http://search.npmjs.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-26T21:52:33.597

[mongoose](http://mongoosejs.com/)可能是最接近的类比，尽管它是针对文档存储而不是像 rails/active record 这样的关系数据库

# asp.net - 将网页请求重定向到默认子文件夹

> ID：11393441
> 
> 赞同：1
> 
> 时间：2012-07-09T10:42:43.843
> 
> 标签：asp.net, redirect, webserver, ultidev

我正在使用 UltiDev Web Server Pro，并且我的所有 aspx 文件都位于子文件夹“WebForms”中。

我希望能够默认所有对页面的请求到这个文件夹，这样他们就可以输入： `http://myserver/somepage.aspx`而不是

`http://myserver/WebForms/somepage.aspx`.

这可能吗？

编辑：

这是下面解决方案的 VB.NET 版本，包括区分大小写的检查：

```
If Not HttpContext.Current.Request.Path.ToUpper.Contains("/WEBFORMS/") Then
    Context.RewritePath("/WebForms" + HttpContext.Current.Request.Path, False)
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:00:33.020

您可以使用 the`Global.asax`和`Application_BeginRequest`to`RewritePath`到最终目的地，并且仍然拥有没有**WebForm**路径的链接。

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{   
    if(!HttpContext.Current.Request.Path.Contain("/WebForms/"))
       RewritePath("/WebForms" + HttpContext.Current.Request.Path, false);  
} 
```

# vector - 使用“按列值过滤”和使用 java 向量进行多列过滤 - xPages

> ID：11393445
> 
> 赞同：0
> 
> 时间：2012-07-09T10:42:46.247
> 
> 标签：vector, filter, lotus-notes, xpages

我有一个用 3 个组合框和 1 个视图控件构建的 xPage。我想使用视图控件中的“按列值过滤”选项来提供过滤值的选项，从而允许用户显示组合框的任意组合。例如，仅comboBox1，或comboBox1 和comboBox2，或仅comboBox3，或comboBox1 和comboBox2 和comboBox3。

我使用了“xPages 演示应用程序”中的示例（[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/xpagesdemoapp.htm](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/xpagesdemoapp.htm)或[http://xpagesblog.com/XPagesHome.nsf/Entry。 xsp?documentId=AAC8E26599256FDC852578CB0066CC13](http://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=AAC8E26599256FDC852578CB0066CC13)）使用未分类列的向量进行多列过滤。

因此，我遇到了一个似乎相当重要的问题，即数据需要按日期排序。日期不是过滤器之一，但它必须是第一列才能正确排序数据。所以我的第一列是一个字符串，YYYYMMDD，以确保数据正确排序。我尝试在视图控件中使用排序选项，但这似乎不适用于以这种方式实现的列过滤。

因此，作为我过滤的条件之一，我已将其作为空字符串传递 - 使用空字符串将选择所有的思考过程（如上面的 url 示例中所示）。

我用来进行过滤的代码是：

```
var vtr:java.util.Vector = new java.util.Vector();
var t1 = sessionScope.Email;
var t2 = sessionScope.Own;
var t3 = sessionScope.Module;

vtr.addElement("");
@If(sessionScope.Own=="My calls",vtr.addElement(t1),vtr.addElement(""));
@If(sessionScope.Own=="My calls",vtr.addElement(""),vtr.addElement(t2));
@If(sessionScope.Status=="Open",vtr.addElement("Open"),vtr.addElement(""));
@If(sessionScope.Module=="All",vtr.addElement(""),vtr.addElement(t3));

return vtr; 
```

我发现并非所有数据都被返回。我认为这可能是由于日期字段。所以我删除了它（更改视图并删除了第一个添加元素），但我仍然发现并非所有数据都被返回。我怀疑这可能是由于传递了空字符串，或者这实际上并没有按我希望的方式工作。

有谁知道我是否可以按照我想要的方式进行这项工作，如果没有，您对我该如何解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:21:33.397

1.  不需要日期作为视图中的第一个可排序列。第一列确实需要排序才能使查找工作，就像 Notes 视图需要排序才能使 @DbColumn 和 @DbLookup 工作一样。XPages 使用相同的下划线架构。此示例 - [http://dev.openntf.org/demos/demoapp.nsf/viewFilteringVector.xsp](http://dev.openntf.org/demos/demoapp.nsf/viewFilteringVector.xsp) - 无需按日期对数据进行排序即可工作。

2.  我对您的示例为什么不起作用的猜测取决于您的 Notes 视图的排序方式。尝试使用第 1 列（电子邮件）升序排序、第 2 列（自己的）升序排序和第 3 列（模块）再次升序排序来创建一个新视图。在这种情况下，您应该能够使矢量过滤正常工作。

3.  如果所有这些都不适合您，您可以考虑多层类别过滤（853 的新功能）。XPages 中的这种过滤类型与 categoryFilter 的工作方式有关，但也允许您按子类别（或子类别）过滤视图。这种技术可能更适合您的场景。

    希望这可以帮助。

# css - CSS溢出滚动条阻止图像底部

> ID：11393451
> 
> 赞同：0
> 
> 时间：2012-07-09T10:42:56.517
> 
> 标签：css, image

我试图隐藏图像的垂直滚动条，同时在必要时提供水平滚动条。我正在使用的 CSS 是

```
style="overflow-x:auto; overflow-y:hidden;" 
```

这很好，但我遇到了图像底部被水平滚动条挡住的问题。有没有办法在图像“下方”添加栏？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:43:35.917

您可以使用填充移动水平滚动条

```
#img_parent {
   overflow-x:auto;
   overflow-y:hidden;
   padding-bottom: 10px;
} 
```

# sencha-touch - sencha touch2 中的图像叠加没有出现

> ID：11393453
> 
> 赞同：0
> 
> 时间：2012-07-09T10:43:01.927
> 
> 标签：sencha-touch, sencha-touch-2

我想在点击图像时显示叠加层。但它没有显示。我的代码中有什么错误。谁能告诉我如何在点击图像时显示叠加层。

这是我的代码：

```
 {
      xtype: 'image',
      src: 'http://www.veryicon.com/icon/preview/System/Colored%20Developers%20Button/question%20Yellow%20Icon.jpg',
      listeners: {
                 tap: function () {
                  var popup = Ext.create('Ext.Panel', {
                  modal: true,
                  centered: true,
                  width: 300,
                  height: 400,
                  layout: 'fit',                                                                
                  scrollable: true
                 });
                popup.show();
               }
              },
       height: 32,
       width: 32
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:10:32.600

试试这个代码

```
{
  xtype: 'image',
  src: 'http://www.veryicon.com/icon/preview/System/Colored%20Developers%20Button/question%20Yellow%20Icon.jpg',
  listeners: {
             tap: function (ele) {
              var popup = Ext.create('Ext.Panel', {
              modal: true,
              centered: true,
              width: 300,
              height: 400,
              layout: 'fit',                                                                
              scrollable: true
             });
            popup.showBy(ele);
           }
          },
   height: 32,
   width: 32
} 
```

# jquery - 在 jQuery 中使 src 为空时，图像未从 DOM 中删除

> ID：11393460
> 
> 赞同：0
> 
> 时间：2012-07-09T10:43:24.923
> 
> 标签：jquery, image

我有以下 HTML：

```
<img src="image.jpg" id="image" /> 
```

和那个JavaScript：

```
jQuery(document).ready(
    function($)
    {
        $('#image').attr('src', '');
    }
); 
```

但我的问题是代码运行时图像仍然存在。

通过使用 Chrome 控制台，我注意到 img 元素 src 正在变空，但图像仍然存在于网站中。

关于如何删除图像的任何想法？请注意，如果可能的话，我宁愿不从 dom 中删除 img 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:48:48.090

```
jQuery(document).load(
    function($)
    {
        $('#image').attr('src', '');
    }
); 
```

# javascript - 选中的单选按钮显示一个 div

> ID：11393461
> 
> 赞同：0
> 
> 时间：2012-07-09T10:43:31.090
> 
> 标签：javascript, jquery, css, dom

我有这个标记我的网页之一，

```
<div class="radio-spoof">
    <input type="radio" name="enquiry" value="General enquiry" class="radio"/>
    <div class="checked"></div>
</div>
<label for="general_enquiry">General enquiry</label>
<div class="radio-spoof">
    <input type="radio" name="enquiry" value="Request a brochure" class="radio" checked="true"/>
    <div class="checked"></div>
</div>
<label for="request_a_brochure">Request a brochure</label> 
```

基本上，我正在做的是试图欺骗一些收音机按钮，因此我可以拥有好看的按钮，当检查收音机时，我想显示`.checked`，默认设置为设置为`display:none`。我需要检查 DOMReady 上的选中单选按钮，当单击单选时，目前我有这个页面，但它似乎没有正确选择 .checked div。

`if($('input[type=radio]:checked')) {
console.log("!");
$(this).parent().children('div').show();
}`

我希望上面的代码选择单选按钮父项，然后查找子 div (.checked) 并显示它。我弄错了吗？`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:14:43.603

```
$(function(){
  $(':radio').change(function(){
    var $this = $(this);
    console.log($this);
    $(':radio[name='+this.name+']').next().hide();
    if($this.is(':checked')){
      $this.next('.checked').show();
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:23:59.160

在我看来，您正在尝试获得自定义样式的单选按钮？我在一个项目中没有 JS 的一个非常酷的方法是这样的（适应你的代码）：

**HTML**

```
<div class="radio-spoof">
    <input id="radio-1" type="radio" name="enquiry" value="General enquiry" class="radio"/>
    <label for="radio-1">General enquiry</label>
</div> 
```

**CSS**

```
.radio-spoof input {
  position: absolute;
  left: -9999px;
} /* not display: none so it is tabbable */

.radio-spoof label {
  display: inline-block;
  padding-left: 35px; /* width of your custom image + spacing to text */
  height: 30px;
  line-height: 30px; /* height of your custom image */
  background: url(your/custom/image) center left no-repeat;
}

.radio-spoof input:checked + label {
  background-image: url(your/custom/active/image);
} 
```

每次单击标签时复选框都会切换，它们通过输入 id 和标签连接，并且标签获取输入样式。

如果您希望复选框在未选中的情况下看起来像默认值，您可以这样设置：

**CSS**

```
.radio-spoof input + label { display: none }

.radio-spoof input:checked {
  position: absolute;
  left: -9999px;
}

.radio-spoof input:checked + label {
  display: inline-block;
  padding-left: 35px; /* width of your custom image + spacing to text */
  height: 30px;
  line-height: 30px; /* height of your custom image */
  background: url(your/custom/image) center left no-repeat;
} 
```

然后你有默认收音机，如果它们被选中，标签就会取代它们......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:50:15.100

**演示**您需要在复选框状态更改时注册一个事件：http: [//jsfiddle.net/FtPLS/2/](http://jsfiddle.net/FtPLS/2/) **或** [http://jsfiddle.net/QCkpG/1/](http://jsfiddle.net/QCkpG/1/)

*   另外我认为你应该使用`.next`而不是`.children`.
*   如果你想隐藏`.checked`就这样做 =>`$('.checked').hide()`
*   您可以将`$('input[type=radio]').is(':checked')`其用于您的选中/取消选中条件。

希望这有助于事业，`:)`

**代码**

```
$(function() {
    // here ==> $('.checked').hide(); will hide all the div with checked class
    $('input').click(function() { // can use .change instead if you want
        if ($('input[type=radio]').is(':checked')) {
            alert('!')
            $(this).parent().next('div').show(); // whatever you wanna show or 
            //$(this).next('div').show();
        }
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T11:08:51.510

对于上述问题，我已经完成了代码箱的解决方案。所以，在[http://codebins.com/codes/home/4ldqpb6上试试吧](http://codebins.com/codes/home/4ldqpb6)

解决方案：

```
$(document).ready(function() {
    $('input[type=radio]').each(function() {
        if ($(this).is(':checked')) {
            $(this).next('.checked').show();
        }
        $(this).click(function() {
            if ($(this).is(':checked')) {
                $(this).next('.checked').show();
            }
        });
    });
}); 
```

# html - 表格和间距

> ID：11393469
> 
> 赞同：0
> 
> 时间：2012-07-09T10:43:45.820
> 
> 标签：html

我创建了几个表。现在我需要两张桌子彼此相邻，而不是一张桌子在彼此之上。如何将第二张桌子放置在第一张桌子旁边（右侧）但中间有足够的空间？

这是我的第二张表的一些代码：

```
<table>
<h3>Personaldaten</h3>
<tr>
    <td>Externe Referenz:</td>
    <td colspan="2">
       <input class="LargeText" type="text" style="width: 150%">
    </td>
</tr>

<tr>
    <td>Titel:</td>
    <td colspan="2">
        <input class="LargeText" type="text" style="width: 150%">
    </td>
</tr> 
```

上面是第一个表中的 2 个实体，我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:47:57.693

尝试在表格周围使用包装器并使用 float:left;

```
//margin: top right bottom left
<div style="width:500px; margin: 30px 0px 0px 320px">
    <table style="width:240px; float:left; margin-right:20px;">
    </table>
    <table style="width:240px; float:left;">
    </table>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:46:58.937

如果您真的不需要它并使用 CSS 之类的，请摆脱您的绝对定位

```
table{
float:left;
margin:0px 5px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:47:33.800

你真的有两个选择。

如果您对使用表格创建布局感到满意，请将您的两个表格放在另一个表格中。IE

```
<table>
  <tr>
    <td>
      <table>{ table 1 stuff }</table>
    </td>
    <td>
      <table>{table 2 stuff }</table>
    </td>
  </tr>
</table> 
```

或者你可以开始研究'[浮动](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFUQFjAA&url=http://css.maxdesign.com.au/floatutorial/&ei=JLb6T4-hA4Kz0QXSlYHQAw&usg=AFQjCNHmuqofeBKJpUpmAt7wW42MpmJE0A)'你的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T10:48:20.430

您可以创建一个具有 1 行和 2 列的新表，并将第一个表放在第一列中，将第二个表放在第二列中。这样两个表可以并排显示

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T10:50:02.940

如果是我，我会将您的表格围绕在一个`div`图层中，指定图层的宽度和高度`div`以强制表格彼此相邻。

例如：

```
<div id="tablecontainer">
<table id="lefttable"></table>
<table id="righttable"></table>
</div> 
```

在 CSS 中：

```
table
{
margin: 5px;
}

#lefttable
{
float: left;
} 
```

显然，这段代码不会*完全*是 OP 想要的，但你明白了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T10:54:02.260

使用`float: left`或`display: inline-block`。

**#1：**

```
table {
    margin: 10px;
    float: left
} 
```

**#2：**

```
table {
    margin: 10px;
    display: inline-block
} 
```

参见[http://shaquin.tk/experiments/tables2.html](http://shaquin.tk/experiments/tables2.html)和[http://shaquin.tk/experiments/tables3.html](http://shaquin.tk/experiments/tables3.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-09T12:57:29.713

首先，修复语法和样式。`table`元素不能有子元素`h3`。要么把`h3`里面的一个单元格（里面是 a `tr`），或者把它变成 a `caption`。不要将宽度设置为 150%，因为这会使单元格占据可用空间宽度的 150%。输入字段集的宽度最好以字符为单位，使用`size`HTML 中的属性。

然后，您可以按照其他答案中的建议或使用`align=left`in`table`标签来浮动 CSS 中的表格。要在表格之间创建水平间距，您可以`margin-right`在第一张表格上进行设置。

请注意，为了可用性和可访问性，通常应该呈现表单，以便在一行上有一个带有其标签的输入项，以便以简单的方式垂直填写表单。所以你可能正在解决错误的问题。

# android - 当一些闹钟在 Android 中重复时，设置多个闹钟的最佳方式

> ID：11393473
> 
> 赞同：3
> 
> 时间：2012-07-09T10:44:00.013
> 
> 标签：android, alarmmanager, android-alarms, repeatingalarm

我正在构建一个提醒应用程序，其中一次、每周、每月提醒，我们会在到期日期和时间通知用户提醒。用户可以随时更新提醒，以更新提醒时间或完全删除提醒。我已经想到了两种方法可以解决特定问题。

1.  每当用户设置提醒时，使用唯一 ID 相应地安排警报并更新或删除它，以防用户更新或删除警报。
2.  由于我将提醒时间存储在数据库中，因此更好的方法是为最近的提醒安排警报。并让由警报触发的服务为下一个最近的提醒安排一个新警报。

第二种方法似乎很干净，但是我们如何解决警报触发的服务在为下一次提醒安排新警报之前被系统杀死的情况？

**编辑** 看起来如果系统为内存杀死服务，它将重新创建服务。这是否意味着每次运行时依靠服务来安排警报是安全的？

**编辑 2** 我已经意识到，只要设备重新启动，Android 就会终止任何警报。这使得方法 2 成为更好的解决方案。我现在已经实现了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-17T14:20:01.667

挂起的意图需要以与取消已设置的警报完全相同的方式创建。如果您想在某个时间激活一个闹钟，您可以在设置新闹钟时取消之前的闹钟。

用于设置闹钟用途：

```
Intent myIntent = new Intent(getApplicationContext(), SessionReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 1, myIntent, PendingIntent.FLAG_UPDATE_CURRENT);

AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

alarmManager.set(AlarmManager.RTC, now.getTimeInMillis(), pendingIntent); 
```

要取消警报，请使用：

```
AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
Intent myIntent = new Intent(getApplicationContext(), SessionReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 1, myIntent, PendingIntent.FLAG_UPDATE_CURRENT);

alarmManager.cancel(pendingIntent); 
```

# javascript - 为什么在Tomcat7中部署的html页面中导入时找不到javascript库？

> ID：11393474
> 
> 赞同：0
> 
> 时间：2012-07-09T10:44:09.937
> 
> 标签：javascript, html, tomcat

我在 Eclipse 中有一个 Web 服务项目，我通过右键单击该项目并将其部署到 Tomcat，然后单击在服务器上运行。以下脚本标记位于其中一个 html 页面中：

```
 <script type="text/javascript" src="../assests/js/lib/yui_3.6.0pr3/yui/build/yui/yui-min.js"></script> 
```

html 页面位于文件夹中，该文件夹`SamplePages`包含在文件夹中`TEST-WS/production`，该文件夹`assets`也在`TEST-WS/production`. 当我在浏览器中打开此页面时，我收到以下 JS 错误：

```
GET http://localhost:8080/TEST-WS/production/assests/js/lib/yui_3.6.0pr3/yui/build/yui/yui-min.js 404 (Not Found) 
```

路径`TEST-WS/production/assests/js/lib/yui_3.6.0pr3/yui/build/yui/yui-min.js`是正确的，并且 .js 文件在那里。我还有其他脚本，例如：

```
<script type="text/javascript" src="../assets/js/lib/all-concat.js"></script> 
```

但它工作正常。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:51:26.030

```
src="../assests/js
src="../assets/js 
```

其中一条路径可能是错误的。

# asp.net - 如何为不同的用户提供不同的登录页面？

> ID：11393475
> 
> 赞同：0
> 
> 时间：2012-07-09T10:44:16.340
> 
> 标签：asp.net, c#-4.0

嗨，我有一个登录页面，当有人登录时，他必须被引导到由他的角色分配给他的 pahe，任何人都可以帮我这样做

```
 this is how my db table looks

        usertable                                 RoleTabel
-----------------------                     ---------------------------
   UserID|UserName|Pwd|RoleID                RoleID|RoleName
     1   |Anil    |123|1                       1   |Admin 
```

像这样任何人都可以告诉我如何实现以及要使用的查询...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:51:15.607

```
if(HttpContext.Current.User.IsInRole("admin"))
{
 // redirect to admin page
}
else if(HttpContext.Current.User.IsInRole("someother"))
{
 // redirect to someother page
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:51:34.373

假设您使用的是标准 SQL（您可以轻松地将其转换为 EF）：

```
Select RoleID from <tablename> where UserName = 'Anil' and Pwd = '123'; 
```

只有当用户名/密码组合正确时，这才会为您提供角色 ID。然后根据角色的数量，您可以执行 case 语句或 if/else。

# php - 在订单电子邮件模板中添加自定义属性 - Magento

> ID：11393479
> 
> 赞同：7
> 
> 时间：2012-07-09T10:44:22.033
> 
> 标签：php, magento

我创建了一个“公司名称”属性，该属性被添加到我的客户帐户信息中，并且是必填字段。

它会在注册、表单和编辑页面上填满，并且也会显示在后端的客户网格上。

但是，我无法在我的任何订单电子邮件模板中显示公司名称。

我相信这是因为在我的订单表中既没有任何名为“公司名称”的列，也没有任何自定义变量可以传递给订单/发票/发货模板以在客户姓名后面的行旁边显示公司名称。

谁能指出我可以在其中创建包含自定义“公司名称”属性的自定义变量并将其传递给所有类型的销售电子邮件模板的文件

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-09T14:41:42.590

经过一番搜索，我找到了正确的文件来进行更改。由于我已经将“公司名称”作为我的属性之一，因此我检索了该字段的值并将其作为参数传递给以下函数

app/code/core/Mage/Sales/Model/Order.php

```
public function sendNewOrderEmail()
{
 /*Existing Code*/
 if ($this->getCustomerIsGuest()) {
        $templateId = Mage::getStoreConfig(self::XML_PATH_EMAIL_GUEST_TEMPLATE, $storeId);
        $customerId = Mage::getModel('customer/customer')->load($this->getCustomerId());
        $companyname = $customerId->getCompanyname();
        $customerName = $this->getBillingAddress()->getName();
    } else {
        $templateId = Mage::getStoreConfig(self::XML_PATH_EMAIL_TEMPLATE, $storeId);
        $customerId = Mage::getModel('customer/customer')->load($this->getCustomerId());
        $companyname = $customerId->getCompanyname();
        $customerName = $this->getCustomerName();
    }
    /*Existing Code*/
    $mailer->setTemplateParams(array(
      'order'        =>  $this,
      'billing'      =>  $this->getBillingAddress(),
      'payment_html' => $paymentBlockHtml,
      'companyname'  => $companyname
   ));
   /*Rest of the code remains the same*/
 } 
```

进行此更改后。我编辑了我的交易电子邮件以包含此参数。由于我想在送货地址中显示，我将变量放在此行之前

```
 System > Transactional Emails > New Order Email 

     {{ var companyname }}
     {{var order.getShippingAddress.format('html')}} 
```

如果您的公司名称被保存为客户信息的一部分，那么这将显示在您的订单电子邮件中的“送货地址”信息中。

您可以对发票和发货电子邮件执行相同的操作。

希望这可以帮助某人！:-)

# javascript - 如何使用 Javascript 设置表单元素的值？

> ID：11393486
> 
> 赞同：2
> 
> 时间：2012-07-09T10:44:29.240
> 
> 标签：javascript, jquery, forms, iframe, mootools

我有一个像这样的简单表格：

```
<form ENCTYPE="multipart/form-data" action="upload.php" method="POST">
<p>UPLOAD FILE: <input type="file" name="file1"> <br /></p>
<input type="submit" value="Upload">
<input type="hidden" name="email" id="email" value="">
</form> 
```

我必须将隐藏字段的值设置为“email@email.com”之类的电子邮件。我可以通过外部 iframe 添加查询字符串参数来获取此值，例如：

```
<iframe name="email@email.com" src="index.html?email=email@email.com"> 
```

行。但是如何将 value="" 设置为 value="email@email.com"？我知道必须使用 javascript，但我不知道如何处理 var。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:47:08.123

```
document.getElementById('Id').value='new value'; 
```

**回复评论：** 试试这个：

```
<input type="" name="email" id="email">

<iframe id="frm" name="email@email.com" src="index.html?email=email@email.com">
</iframe>

<script>
document.getElementById('email').value = document.getElementById('frm').name;
</script> 
```

然后你可以改变采用它。将类型更改为隐藏等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T10:53:41.350

如果您的脚本是从 iframe 内的文档执行的，您可以这样做：

```
var getUrlParameter = function(name, defaultValue) {
    name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    var regexS = "[\\?&]"+name+"=([^&#]*)";
    var regex = new RegExp( regexS );
    var results = regex.exec( document.location.href );
    if( results == null ) return defaultValue;
    else return decodeURIComponent(results[1]);
};

document.getElementById('email').value=getUrlParameter('email'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:49:45.817

正如您已将此问题标记为 jQuery 您可以使用`$('#Id').val('new value');`但不要忘记添加 jQuery 库。

# python - 从父目录导入 Python 包

> ID：11393492
> 
> 赞同：38
> 
> 时间：2012-07-09T10:44:38.587
> 
> 标签：python, import, package, importerror

我有以下源代码结构

```
/testapp/
/testapp/__init__.py
/testapp/testmsg.py
/testapp/sub/
/testapp/sub/__init__.py
/testapp/sub/testprinter.py 
```

其中`testmsg`定义了以下常量：

```
MSG = "Test message" 
```

和`sub/testprinter.py`：

```
import testmsg

print("The message is: {0}".format(testmsg.MSG)) 
```

但我越来越`ImportError: No module named testmsg`

它不应该从包结构开始工作吗？我真的不想在每个子模块中扩展 sys.path ，我什至不想使用相对导入。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-09T10:51:08.577

这完全取决于您**运行**的脚本。该脚本的路径将自动添加到 python 的搜索路径中。

使其成为以下结构：

```
TestApp/
TestApp/README
TestApp/LICENSE
TestApp/setup.py
TestApp/run_test.py
TestApp/testapp/__init__.py
TestApp/testapp/testmsg.py
TestApp/testapp/sub/
TestApp/testapp/sub/__init__.py
TestApp/testapp/sub/testprinter.py 
```

然后`TestApp/run_test.py` *先*运行：

```
from testapp.sub.testprinter import functest ; functest() 
```

然后`TestApp/testapp/sub/testprinter.py`可以这样做：

```
from testapp.testmsg import MSG
print("The message is: {0}".format(testmsg.MSG)) 
```

[这里](http://as.ynchrono.us/2007/12/filesystem-structure-of-python-project_21.html)有更多好的提示；

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-09T10:47:33.337

使用如下的相对导入

```
from .. import testmsg 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-13T03:15:25.187

这个问题有答案——动态导入：

[如何在父目录中导入python文件](https://stackoverflow.com/questions/10078287/how-to-import-a-python-file-in-a-parent-directory/10078468#comment17421554_10078468)

```
import sys
sys.path.append(path_to_parent)
import parent.file1 
```

这是我用来导入任何东西的东西。当然，您仍然必须将此脚本复制到本地目录，导入它以及`use`您想要的路径。

```
import sys
import os

# a function that can be used to import a python module from anywhere - even parent directories
def use(path):
    scriptDirectory = os.path.dirname(sys.argv[0])  # this is necessary to allow drag and drop (over the script) to work
    importPath = os.path.dirname(path)
    importModule = os.path.basename(path)
    sys.path.append(scriptDirectory+"\\"+importPath)        # Effing mess you have to go through to get python to import from a parent directory

    module = __import__(importModule)
    for attr in dir(module):
        if not attr.startswith('_'):
            __builtins__[attr] = getattr(module, attr) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-10-25T06:16:59.993

对于仍然有同样问题的人。这就是我解决我的方法：

```
import unittest 
import sys
import os

sys.path.append(os.getcwd() + '/..')

from my_module.calc import * 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-11T10:19:30.637

试试这个：

```
 import sys
import os
sys.path.append(os.path.dirname(os.path.dirname(__file__)))

from my_module import * 
```

# ubuntu - icc 编译代码无法加载共享对象 (libimf.so)

> ID：11393495
> 
> 赞同：1
> 
> 时间：2012-07-09T10:44:47.437
> 
> 标签：ubuntu, icc

我正在用 icc 编译一个 cpp 代码（在 ubuntu 下）：

```
icc -I/usr/share/R/include -I/~/Desktop/work/p1/geqw4/vi3/out/sp/ccode/eigen -fpic -O2 -pipe -c -DEIGEN_NO_DEBUG aha.cpp -o aha.o

icc -shared -o aha.so aha.o -L/usr/local/lib/R/site -Wl,-rpath,/usr/local/lib/R/site -L/usr/lib64/R/lib -lR 
```

它可以编译，但是在运行可执行文件时，我得到：

```
unable to load shared object '~/Desktop/work/p1/geqw4/vi3/out/sp/ccode/simcode/mine2/aha.so':
  libimf.so: cannot open shared object file: No such file or directory 
```

libimf.so 在 /opt/intel/lib/intel64 中。我记得上次使用 icc 时遇到了同样的问题（一年前），但我不记得解决方案是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:54:00.043

您需要更新库路径，以便链接器在 /opt/intel/bin 中查找。（您确定它是 bin 而不是 lib？）您可以将其添加到您的 LD_LIBRARY_PATH 环境变量中，或者如果您希望它是系统范围的，则可以将其添加到 /etc/ld.so.conf 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T11:09:13.250

好的解决了；

以备将来记录（如果有的话，我每年使用一次 icc）：

做

```
gedit ~/.bashrc 
```

然后

```
LD_LIBRARY_PATH=/opt/intel/lib/intel64
export LD_LIBRARY_PATH 
```

然后，从 ~/ 目录执行：

```
source .bashrc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-08T16:44:02.677

英特尔编译器带有各种设置环境的 shell 脚本。通常，您所要做的就是获取一个脚本：

```
 source ${INTEL_COMPILER_DIR}/bin/compilervers.csh 
```

它还应该为您可能拥有的其他产品（MKL、TBB 等）设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-21T19:01:40.660

许多 icpc 或 icc 链接的共享库实际上并不需要。构建后，您应该`ldd -u -r`在最终构建文件（可执行文件或共享库）上运行以显示所有未使用的库依赖项。如果您看到未使用 libimf，则可以使用此选项编译可执行文件或共享库：

```
-Wl,--as-needed 
```

然后重新运行`ldd -u -r`并查看依赖项是否消失。

# keystore - 未找到 Trigger.io 密钥库文件

> ID：11393499
> 
> 赞同：2
> 
> 时间：2012-07-09T10:45:06.043
> 
> 标签：keystore, trigger.io

我使用成功创建了一个密钥库文件，

keytool -genkey -v -keystore arun_release_key.keystore -alias my_key -keyalg RSA -keysize 2048 -validity 10000

我的密钥库位于“C:\Users\kp\Desktop\forge-tools-3.3.2\forge-tools”中，名为 arun_release_key.keystore

现在，当我执行“forge package android”时，首先它会询问“您的密钥库的位置”问题就在这里，我键入位置，如“C:\Users\kp\Desktop\forge-tools-3.3 .2\forge-tools" 无法加载密钥库是我得到的错误。再次尝试不带引号并尝试仅键入文件名 arun_release_key.keystore。

我面临的这个问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:20:08.223

您是否尝试在 local_config.json 中明确设置它？我的看起来像这样（在 Ubuntu 上）-

```
"android": {
    "sdk": "/home/kkrause/Documents/android-sdk-linux",
    "profiles": {
        "DEFAULT": {
            "keystore": "/home/kkrause/Documents/camosites/camomedia.keystore",
            "keyalias": "camomedia"
        }
    }
} 
```

在 Windows 上它会是这样的（注意反斜杠转义） -

```
"android": {
    "sdk": "C:\\home\\kkrause\\Documents\\android-sdk-windows",
    "profiles": {
        "DEFAULT": {
            "keystore": "C:\\home\\kkrause\\Documents\\camosites\\camomedia.keystore",
            "keyalias": "camomedia"
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:02:05.063

确保您的别名、密码全部正确。我发现我搞砸了我的 alias_name 并且它不起作用。

# neo4j - neo4j-manual-milestone.pdf 的错误

> ID：11393509
> 
> 赞同：0
> 
> 时间：2012-07-09T10:45:27.533
> 
> 标签：neo4j

这些代码在 neo4j-manual-milestone.pdf（版本：1.8M05）中：

```
 TraversalDescription t = new TraversalDescription();
    t.setOrder( TraversalDescription.DEPTH_FIRST );
    t.setUniqueness( TraversalDescription.NODE );
    t.setMaxDepth( 10 );
    t.setReturnFilter( TraversalDescription.ALL );
    t.setRelationships( new Relationship( "singer", Relationship.OUT ) );
    // END SNIPPET: traversalDesc

    // START SNIPPET: traverse
    URI traverserUri = new URI( startNode.toString() + "/traverse/node" );
    WebResource resource = Client.create()
            .resource( traverserUri );
    String jsonTraverserPayload = t.toJson();
    ClientResponse response = resource.accept( MediaType.APPLICATION_JSON )
            .type( MediaType.APPLICATION_JSON )
            .entity( jsonTraverserPayload )
            .post( ClientResponse.class );

    System.out.println( String.format(
            "POST [%s] to [%s], status code [%d], returned data: "
                    + System.getProperty( "line.separator" ) + "%s",
            jsonTraverserPayload, traverserUri, response.getStatus(),
            response.getEntity( String.class ) ) );
    response.close(); 
```

当我使用它们时，会显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:05:48.787

如果您访问手册的在线版本，在页面底部的[http://docs.neo4j.org/chunked/1.8.M05/tutorial-traversal-java-api.html](http://docs.neo4j.org/chunked/1.8.M05/tutorial-traversal-java-api.html)有一个完整链接源，它与主 neo4j 构建一起执行和测试。

高温高压

# r - 如果通过 RScript 调用 tryCatch 不会捕获错误

> ID：11393510
> 
> 赞同：14
> 
> 时间：2012-07-09T10:45:29.887
> 
> 标签：r, try-catch

我在 R 中遇到了一个奇怪的问题。

考虑以下代码（真实代码的真正简化版本，但仍然存在问题）：

```
library(timeSeries)

tryCatch(
{
  specificWeekDay <- 2

  currTs <- timeSeries(c(1,2),c('2012-01-01','2012-01-02'),
                       format='%Y-%m-%d',units='A')
  # just 2 dates out of range
  start <- time(currTs)[2]+100*24*3600
  end <- time(currTs)[2]+110*24*3600

  # this line returns an empty timeSeries
  currTs <- window(currTs,start=start,end=end)

  message("Up to now, everything is OK")

  # this is the line with the uncatchable error
  currTs[!(as.POSIXlt(time(currTs))$wday %in% specificWeekDay),] <- NA

  message("I'm after the bugged line !")

},error=function(e){message(e)})

message("End") 
```

当我在 RGui 中运行该代码时，我正确地得到以下输出：

> 到目前为止，
> 在为函数 '[<-' 选择方法时评估参数 'i' 时一切正常：as.POSIXlt.numeric(time(currTs)) 中的错误：必须提供'origin'
> End

相反，当我使用以下行通过 RScript（在 Windows 中）运行它时：

```
RScript.exe --vanilla "myscript.R" 
```

我得到这个输出：

> 截至目前，一切正常
> 执行中断

好像 RScript 崩溃了……

关于原因的任何想法？
这是一个 timeSeries 包错误，还是我做错了什么？
如果是后者，确保捕获所有错误的正确方法是什么？

提前致谢。

* * *

**编辑 ：**

这是一个较小的示例，它重现了不使用 timeSeries 包的问题。要对其进行测试，只需按上述方式运行它：

```
library(methods)
# define a generic function
setGeneric("foo", 
           function(x, ...){standardGeneric("foo")})
# set a method for the generic function
setMethod("foo", signature("character"),
          function(x) {x})
tryCatch(
{
  foo("abc")
  foo(notExisting)
},error=function(e)print(e)) 
```

似乎与通用方法调度有关；当方法的参数导致错误时，调度程序无法找到该方法的签名，并随之引发`tryCatch`函数在通过 RScript 运行时似乎无法处理的异常。
奇怪的是，它不会发生，例如`print(notExisting)`; 在这种情况下，异常会得到正确处理。

关于原因以及如何捕捉这种错误的任何想法？

注意：
我在 Windows 7 上使用 R-2.14.2

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-11T16:46:05.723

问题在于实现 S4 方法分派的内部 C 代码尝试捕获和处理一些错误的方式以及在这种方法中如何处理非交互式情况。应尽快在 R-devel 和 R-patched 中制定解决方法。

解决方法现在致力于 R-devel 和 R-patched。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T11:19:48.953

## 关于`tryCatch()`[OP 已经知道并使用但我没有注意到] 的信息

我认为你错过了你`tryCatch()`没有对*错误*做任何特别的事情，因此你以正常的方式提出了一个错误。在交互式使用中，错误会以通常的方式抛出和处理，但在非交互式会话 (a la `Rscript`) 中运行的脚本中的错误将中止正在运行的脚本。

`tryCatch()`是一个复杂的函数，它允许在 R 中捕获和处理各种事件，而不仅仅是错误。然而，默认情况下，它被设置为模仿标准的 R 错误处理过程；基本上允许 R 抛出和报告错误。如果您希望 R 执行基本行为以外的任何操作，则需要为错误添加特定的处理程序：

```
> e <- simpleError("test error")
> tryCatch(foo, error = function(e) e,
+          finally = writeLines("There was a problem!"))
There was a problem!
<simpleError in doTryCatch(return(expr), name, parentenv, handler): object 'foo'
not found> 
```

我建议您`?tryCatch`更详细地阅读以更好地了解它的作用。

另一种方法是使用`try()`. 要修改您的脚本，我会这样做：

```
# this is the line with the uncatchable error
tried <- try(currTs[!(as.POSIXlt(time(currTs))$wday %in% specificWeekDay),] <- NA,
             silent = TRUE)
if(inherits(tried, "try-error")) {
    writeLines("There was an error!")
} else {
    writeLines("Everything worked fine!")
} 
```

关键是保存返回的对象，`try()`以便您可以测试该类，并`try()`进行静默操作。考虑差异：

```
> bar <- try(foo)
Error in try(foo) : object 'foo' not found
> bar <- try(foo, silent = TRUE)
> class(bar)
[1] "try-error" 
```

请注意，在上面的第一次调用中，错误被捕获**并**作为消息报告。第二种，没有报道。在这两种情况下，`"try-error"`都会返回一个类对象。

在内部，`try()`编写为单个调用，`tryCatch()`该调用为错误处理程序设置自定义函数，该函数将错误报告为消息并设置返回的对象。您可能希望研究 R 代码`try()`作为使用`tryCatch()`.

# asp.net-mvc-3 - 如何使用在数据库中找到的值预填充 tokenput

> ID：11393515
> 
> 赞同：0
> 
> 时间：2012-07-09T10:46:17.050
> 
> 标签：asp.net-mvc-3, razor, jquery-tokeninput

我正在使用在[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)上找到的 tokeninput 控件——我相信它很受欢迎。

我有以下代码可以很好地用作者姓名填充输入框 - 但我想在用户处于 EDIT 会话时使用在数据库中找到的值预填充控件，即查找已经为该记录找到的作者（看起来像这样）：

![在此处输入图像描述](../Images/5f87fdce650b47eff6fe3efd9cbf2322.png)

这是代码：

```
 $("#authorlist").tokenInput('/author/getauthors/', {
        hintText: "Enter surname",
        searchingText: "Searching...",
        preventDuplicates: true,
        allowCustomEntry: true,
        highlightDuplicates: false,
        tokenDelimiter: "*",
        theme: "facebook"
//        prePopulate: [{"id": 5016, "name": "Test 1" }]
    }); 
```

显然，这已经获得了完整的作者列表（/author/getauthors/）——但它也需要从该列表中预先填充，作者已经找到了该记录——这就是我似乎无法弄清楚的一点。

我可以看到您可以在 javascript 中使用 prePopulate （我已将其注释掉）并且我在 Edit.cshtml 中找到了作者值，即

```
@foreach(var item in Model.AUTHORs.Select(model => new { model} ))
        {
            <div type="hidden" id="authorHidden" > @item.model.FULL_NAME</div>
        } 
```

因此，这只是将这些值放入某种 json 格式并让 tokeninput 控件填充它们以准备好在表单加载并向用户显示时的情况。

在 Edit.cshtml 中显示 tokeninput 控件的其他代码是：

```
<div class="editor-label">Authors</div>
     <div class="authors">
         <div class="editor-field">
             <input type="text" id="authorlist" name="tiAuthors" />
         </div>
     </div> 
```

非常感谢任何帮助或指示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T09:59:26.510

您可以在视图内的输入中使用 HTML5`data-*`属性来放置您想要预填充的作者列表：

```
<input type="text" id="authorlist" name="tiAuthors" data-authors="@Json.Encode(Model.AUTHORs.Select(a => new { id = a.AuthorId, name = a.AuthorName })))" /> 
```

进而：

```
$('#authorlist').tokenInput('/author/getauthors/', {
    hintText: 'Enter surname',
    searchingText: 'Searching...',
    preventDuplicates: true,
    allowCustomEntry: true,
    highlightDuplicates: false,
    tokenDelimiter: '*',
    theme: 'facebook',
    prePopulate: $('#authorlist').data('authors')
}); 
```

# php - 使用 .htaccess 将 PHP 查询重写为 HTML

> ID：11393517
> 
> 赞同：0
> 
> 时间：2012-07-09T10:46:19.807
> 
> 标签：php, .htaccess, mod-rewrite

我在将我的 php 查询重写到任何类型的 seo 友好 url 时遇到了很多麻烦。

我想得到

[http://example.com/provider_list/Dublin.html](http://example.com/provider_list/Dublin.html)来自以下网址

[http://example.com/provider_list.php](http://example.com/provider_list.php)？**locationName=都柏林**&checkIn_Date=09%2F07%2F2012&checkOut_Date=10%2F07%2F2012&extratype=1&noofextra=1&x=50&y=21

对于所有其他位置也是如此

例如

provider_list/Wexford.html

因此，如果查询包含“locationName=ANYLOCATION”，它会将其重新写入此...

查询字符串中其他名称的值是什么无关紧要...

这可以通过.htacess吗？

所有的帮助都得到了感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:10:32.560

尝试这个：

```
RewriteEngine on
RewriteRule provider_list/(\w+).html /locationName=$1&checkIn_Date=09%2F07%2F2012&checkOut_Date=10%2F07%2F2012&extratype=1&noofextra=1&x=50&y=21 [L] 
```

但是，对于这么长的查询字符串，这不是优雅的解决方案，有必要吗？

# php - 文本区域值爆炸并提交到 MySQL 数据库

> ID：11393519
> 
> 赞同：0
> 
> 时间：2012-07-09T10:46:20.893
> 
> 标签：php, mysql, explode

```
if(isset($_POST['usersadded'])){    
$value = $_POST['usersadded'];
$lines = explode("\n", $value);
foreach ($lines as $line) {
mysql_query("INSERT INTO Users_$support (Users) VALUES ('$line')");
}; 
```

我已经与数据库建立了有效连接，所以这不是错误的。但它从不提交任何东西:(

$support 是一个数字，例如 19。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:52:11.830

在插入带有 PHP 变量的内容时，我总是建议使用这种 SQL 语法。

```
mysql_query("
INSERT INTO
    `table_name`
SET
    `field` = '" . $field_variable . "'
"); 
```

当您没有在查询字符串中正确地表述您的 PHP 变量时，可能会出现该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:02:57.697

试试这个

```
mysql_query("INSERT INTO Users_$support (Users) VALUES (\"'\".$line.\"'\")"); 
```

# php - 是否有用于提取引号的 php 脚本？

> ID：11393520
> 
> 赞同：0
> 
> 时间：2012-07-09T10:46:26.363
> 
> 标签：php, text-extraction, quoting

我在 stackoverflow 或谷歌上找不到任何东西，所以我想问一下。

我正在寻找一个可以从给定文本中提取引号的 php 脚本。例如，我有这样的文字：

> 费德勒完全配得上他的胜利。这不仅使他与桑普拉斯在七个温网冠军头衔上平起平坐，而且还使他创下了第 286 周成为世界第一的纪录。他是第二位占据榜首的老人，以115万英镑的支票离开。他将前往奥运会——也将在全英俱乐部上演——显然是最受欢迎的。

并希望提取一个句子，例如：

> 费德勒完全配得上他的胜利。

这句话必须自己说得通。它不能引用前面的句子，因为它是一个引用并且是单独呈现的。外面有这样的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:01:29.040

如果您选择第一句话，很有可能它不会“参考前一句”:)

你可以使用`preg_match()`它。 [http://php.net/manual/de/function.preg-match.php](http://php.net/manual/de/function.preg-match.php)

[请参阅First Sentence Regex](https://stackoverflow.com/questions/1569091/first-sentence-regex)的第一个答案和一些正则表达式示例的评论。

# php - CentOS - 在 PHP 中找不到 Mongo 类

> ID：11393524
> 
> 赞同：0
> 
> 时间：2012-07-09T10:46:42.960
> 
> 标签：php, mongodb, classnotfound

我需要 CentOS 5.4 机器上的 MongoDB PHP 驱动程序。我的 PHP 版本是 5.1.6。我下载了 RPM 并安装了它。这在 /usr/bin 目录中创建了几个文件。我复制了

```
/usr/bin/mongo 
```

至

```
/usr/lib/php/modules 
```

这就是 extension_dir 在执行 phpinfo(); 时显示的内容。

我还添加了

```
extension=mongo.so 
```

在 /etc/php.ini 中。但是在执行我的 PHP 脚本时，我仍然得到

```
Mongo class not found. 
```

这里出了什么问题？

此外，我的 phpinfo() 显示 PHP 版本 5.1.6，而从命令行运行 PHP 显示 5.3.3。那有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:01:43.203

你说你的网络服务器和命令行 PHP 报告不同的版本。它们将安装在不同的位置，并且它们的扩展是 API 互不兼容的。

当您安装 php_mongo 扩展时，它可能已经使用命令行 php 来确定安装扩展的目录。

确保您的网络服务器的 php 版本具有正确的 php_mongo，并且它位于正确的扩展目录中。（从返回的 php.ini 中获取目录`phpinfo()`）

我希望您意识到 PHP 5.1 也已经过时多年了。除非您有特定的理由使用那么旧的版本，否则您还应该考虑升级到更新的版本。

**编辑：**

只需阅读您的评论*“我还必须提到 /usr/bin/mongo 是一个二进制可执行文件，但它没有 .so 扩展名。我将它原样复制到 /usr/lib/php/modules”*

不不不！:)

这是 mongo 命令行客户端。这不是 PHP 扩展！

您可以运行 a`find /* -name "mongo.so"`以查看安装程序将文件放在哪里，这可能还会告诉您它安装的 PHP 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:02:34.037

看起来您将 MongoDB 服务器的 RPM 包与安装[MongoDB PHP 驱动程序](http://www.php.net/manual/en/mongo.installation.php#mongo.installation.nix)的要求混淆了。PHP 驱动程序提供从您的 PHP 应用程序对服务器的访问，并且不安装任何命令行工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:54:23.827

重启httpd！

```
yum service httpd restart 
```

# iphone - iPhone 中带有文本检测功能的增强现实引擎

> ID：11393534
> 
> 赞同：3
> 
> 时间：2012-07-09T10:47:13.430
> 
> 标签：iphone, ios5, ocr, augmented-reality

我想创建一个与“ [word lens](http://itunes.apple.com/us/app/word-lens/id383463868?mt=8) ”类似的应用程序，有人知道任何增强现实 sdk 可以从相机输入/视频中检测文本及其位置吗？或者任何人都可以给我任何关于我应该从哪里开始的指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:32:29.957

我对字符识别和增强现实还很陌生，但是您可以查看[OpenCV](http://opencv.willowgarage.com/wiki/)进行图像识别。

如果您需要检测字符然后翻译它们。您应该搜索光学字符识别库，例如[tesseract](http://code.google.com/p/tesseract-ocr/)。

我不知道是否有很多图书馆可以做到这一点，但你可以搜索一下。

希望我有所帮助。

# iphone - Live iOS 应用程序：更改捆绑包标识符

> ID：11393535
> 
> 赞同：1
> 
> 时间：2012-07-09T10:47:22.680
> 
> 标签：iphone, certificate, provisioning, cfbundleidentifier

我在应用商店中有一个应用程序，该应用程序部署了带有通配符捆绑标识符的应用程序 ID 的证书。现在我必须向这个应用程序添加推送通知，导致与此问题中描述的完全相同的[问题](https://stackoverflow.com/questions/2575552/can-i-change-the-bundle-identifier-in-my-app-after-its-been-approved)。

链接问题中的答案说我应该使用完整的捆绑标识符创建一个新的应用程序 ID。这是一个问题，因为供应门户告诉我“您指定的捆绑标识符已在使用中。请选择另一个。”

我查看了所有应用程序 ID、配置文件等，并且捆绑包 ID 未在使用中。要么是其他人在使用它，要么是我很久以前做过并删除了它。

我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:17:17.310

必须联系 Apple 开发人员支持。几周后，他们发现捆绑包 ID 被另一个帐户占用，并且能够将其转移到我的帐户。

# ruby-on-rails-3 - 在 Rails 中解析 request.request_parameters

> ID：11393536
> 
> 赞同：0
> 
> 时间：2012-07-09T10:47:24.987
> 
> 标签：ruby-on-rails-3

我正在构建一个 Web 服务应用程序，我正在尝试很好地处理一个 422 页面，将 POST 的 JSON 发送回用户，以更好地调试错误。为此，我使用 request.request_parameters 来取回我发送的 JSON，但它碰巧以有线方式组织（对我来说），我真的不能只用原始数据取回它

我作为 JSON 发送的是这个。

```
{   
  "name":"New set intensity",
  "properties":
  [
    {"uri":null,"value":"on"},     
    {"uri":"https://type.lelylan.com/properties/intensity","value":"100.0"}
  ]
} 
```

我从 request.request_parameters 得到的是这个。

```
{"{\"name\":\"New set intensity\",\"properties\":"=>{"{\"uri\":null,\"value\":\"on\"},  {\"uri\":\"https://type.lelylan.com/properties/intensity\",\"value\":\"100.0\"}"=>{"}"=>nil}}} 
```

我的主要问题是内容以某种方式成为关键，并且在内部递归。有没有办法取回干净的数据？非常感谢。

更新：我试图更好地了解此问题发生的位置和原因。

在我的控制器中，我尝试以我知道的两种可用方式进行访问。

```
# request.body.read.inspect
"{\"name\":\"New set intensity\",\"properties\":[{\"uri\":\"not_valid\"}]}"                                                                                                                                     

# request.request_parameters
{"{\"name\":\"New set intensity\",\"properties\":"=>{"{\"uri\":\"not_valid\"}"=>{"}"=>nil}}} 
```

请求来自 Capybara

```
page.driver.post(@uri, @params.to_json) 
```

控制器只返回 JSON，所以这就是我定义它的方式。我没有放“respond_to”和“respond_with”，当我提出请求时，它会呈现 json 视图 show.rabl.json。这让我认为它可以识别正确的格式。

```
class FunctionsController < ApplicationController

before_filter
...

def index
  ...
end

def show
..
end

def create
  body = JSON.parse(request.body.read)
  @function = Function.new(body)
  if @function.save
    render 'show', status: 201, location: FunctionDecorator.decorate(@function).uri
  else
    render_422 "notifications.resource.not_valid", @function.errors
  end
end 
```

谢谢。

# visual-studio-2010 - 使用 Visual Studio 2010 进行 Sharepoint 2010 开发

> ID：11393537
> 
> 赞同：0
> 
> 时间：2012-07-09T10:47:25.983
> 
> 标签：visual-studio-2010, sharepoint-2010

我是 SharePoint 2010 开发的新手，尽管过去 3 年我是一名 .net 开发人员。我在虚拟机中设置了带有 windows 7（64 位）、sharepoint Foundation 2010、visual studio 2010 和 sql server 2001 R2 的开发环境。首先，我在 SharePoint 2010 中创建了一个新的 Web 应用程序，还创建了新的网站集。然后我为学生详细信息创建了一个自定义列表。现在我需要创建一个简单的学生注册页面，该页面使用正则表达式验证所有用户条目，例如电子邮件 ID、电话号码等，并使用必填字段验证器验证少数字段。我需要如何为此目的使用 Visual Studio 2010。请将此视为 SharePoint 2010 开发中的入门级问题。希望这个问题适合这个论坛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:58:54.820

启动 Visual Studio 文件菜单 -> 新建 -> 项目 -> 从已安装的模板中选择 SharePoint -> 空 SharePoint 项目 给出正确的名称并保存

然后它要求输入**SharePoint URL**

输入**SharePoint URL**并验证它，然后按**完成**按钮

现在您的解决方案可以使用了

在解决方案资源管理器中选择项目右键单击它添加新项目-> 可视 Web 部件，您必须在此 Web 部件的用户控件中编写代码，一些代码片段如下：

```
using (SPSite site = new SPSite(SPContext.Current.Site.Url))
{
    using (SPWeb web = site.OpenWeb())
    {
        SPList StudentInfoList = web.Lists["Student Information"];
        SPListItemCollection listItems = StudentInfoList.GetItems();
        SPListItem item = listItems.Add();
        item["RollNumber"] = Convert.ToInt32(TextBox1.Text);;
        item["StudentName"] = TextBox2.Text
        item["PhoneNumber"] = TextBox3.Text;
        item["EmailID"] = TextBox4.Text;
        item.Update();
        StudentInfoList.Update();
    }
} 
```

欢迎使用 SharePoint :-)

# liferay - 嵌套 liferay-ui:panel-container

> ID：11393542
> 
> 赞同：1
> 
> 时间：2012-07-09T10:47:51.337
> 
> 标签：liferay, jsp-tags, taglib, liferay-6

我正在使用 Liferay 6.1，需要`<liferay-ui:panel-container>`嵌套 collapsible(!) （至少 2 层深）。

我试过了

```
<liferay-ui:panel-container extended="true" id="outerPanelContainer">
    <liferay-ui:panel collapsible="true" title="outer panel">
        outer content
        <liferay-ui:panel-container extended="true" id="innerPanelContainer">
            <liferay-ui:panel collapsible="true" title="inner panel">
                inner content
            </liferay-ui:panel>
        </liferay-ui:panel-container>
    </liferay-ui:panel>
</liferay-ui:panel-container> 
```

但我得到了 2 个不可折叠的“面板”，以及看起来不像面板的外面板。

我不确定我做错了什么。

编辑：删除内部容器标签解决了部分问题：面板再次可折叠，但这也删除了它们上面的“[+]”和“[-]”图标，因此用户没有得到他们的视觉线索'是可折叠的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:08:11.217

为我工作，或者我不明白你想要实现什么，请看截图：

![在此处输入图像描述](../Images/d3ecb09a35f2897e3d2ac41e265663e8.png)

# asp.net - 如何动态创建一个asp按钮并向其添加事件

> ID：11393543
> 
> 赞同：3
> 
> 时间：2012-07-09T10:47:53.037
> 
> 标签：asp.net, events, c#-4.0, button

我正在尝试在 asp.net 上动态创建一个按钮，但我无法向其中添加事件。下面有什么问题或缺失？

提前致谢

$

```
 Button btn2 = new Button();
    btn2.ID = "btnEdit";
    btn2.Text = "Edit Member";
    btn2.Click += new EventHandler(btnEdit_Click);
    form1.Controls.Add(btn2); 
```

我也试过这样：

$

```
 Button btn2 = new Button();
    btn2.ID = "btnEdit";
    btn2.Text = "Edit Member";
    btn2.Attributes.Add("OnClick","btnEdit_Click);
    form1.Controls.Add(btn2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:58:24.783

阅读有关 asp.net 网络表单生命周期的文章[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。每次加载页面时都必须创建/重新创建控件（例如 OnLoad-Method）

[http://www.asp.net/web-forms/videos/aspnet-ajax/how-to-dynamically-add-controls-to-a-web-page](http://www.asp.net/web-forms/videos/aspnet-ajax/how-to-dynamically-add-controls-to-a-web-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:53:36.350

我认为您试图在这里混合服务器端和客户端事件。

html 属性`OnClick`是客户端，当用户单击按钮时，它会触发一段 JavaScript 服务器事件`OnClick`发生在用户单击按钮并将其回发到服务器时，这允许您将函数（服务器端）挂钩到那个事件。

您在寻找服务器端还是客户端？

要添加客户端事件，您可以执行

```
btn2.Attributes.Add("onclick","my_javascript_function"); 
```

要添加服务器端事件，您可以执行

```
btn2.Click += new System.EventHandler(this.MyMethod); 
```

this.MyMethod 是一个已经 seutp 处理服务器端按钮单击的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-30T09:42:21.137

创建一个添加所有动态控件的方法，如下所示

```
public void AddControls()
{
    Button btn2 = new Button();
    btn2.ID = "btnEdit";
    btn2.Text = "Edit Member";
    btn2.Click += new EventHandler(btnEdit_Click);
    form1.Controls.Add(btn2);
} 
```

然后在 Page_Load() 事件和**IsPostBack**块的外部调用该方法，如下所示

```
protected void Page_Load(object sender, EventArgs e)
{

    if (!IsPostBack)
    {

    }
    AddControls();
} 
```

因为动态添加的控件的视图状态不会在**Page_Load()**事件之前加载。通过此链接了解更多信息[http://msdn.microsoft.com/en-us/library/vstudio/hbdfdyh7(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/hbdfdyh7(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T11:56:16.977

如果我是对的，您可以在`Page_Load`.

如果是检查回发。

```
if(!postback)
{
   create your buttons.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-14T20:37:45.443

这应该可以解决问题：

```
protected void Page_Load(object sender, EventArgs e)
{
    Button b = new Button() { ID = "btnEdit", Text = "Edit Member" };
    b.Click += (sd, ev) => {
        // Do whatever you want to be done on click here.
        Button me = (Button)sd; // This creates a self-reference to this button, so you can get info like button ID, caption... and use, like this:
        me.Text = "Yay! You clicked me!";
    };
    form1.Controls.Add(b);
} 
```

# django - 这个查询集上的循环是最优的吗？

> ID：11393545
> 
> 赞同：2
> 
> 时间：2012-07-09T10:47:58.520
> 
> 标签：django, postgresql, django-queryset

如果不是，我能做些什么来改进它？因为目前仅使用我们的开发数据进行评估需要 13 秒。原始 SQL 的想法？

```
 suppliers = models.Supplier.objects.all().order_by('company')
    for supplier in suppliers :
        sup = {}
        sup['company'] = supplier.company
        sup['supplies'] = get_supplies(1, supplier.uuid)
        sup['category'] = 'Supplier'
        if isocode == None :
            addresses = models.Address.objects.filter(company = supplier.company).iterator()
        else :
            addresses = models.Address.objects.filter(company = supplier.company, country_iso = isocode).iterator()
        sup['contacts'] = list(models.Contact.objects.filter(address__in=addresses))
        company_list.append(sup) 
```

# -------------------------------------------------- ----------------------------

```
class SupplierManager(models.Manager):
    def suppliers_for_panel(self, bought_in_control_panel_id):
        return self.filter(supplies__bought_in_control_panel__id = bought_in_control_panel_id).filter(company__hidden=0).order_by('company__name')

class Supplier(models.Model):
    uuid = UUIDField(primary_key=True)
    company  = models.ForeignKey(Company, db_column='company_uuid',null=True, blank=True)
    sector = models.ForeignKey(CustomerSector, db_column='sector_uuid',null=True, blank=True,verbose_name=_('Sector'))
    account_number = models.CharField(null=True, blank=True,max_length=255,verbose_name=_('Account No'))
    reference  = models.CharField(null=True, blank=True,max_length=255)
    notes = models.TextField(null=True, blank=True) 
    date_created = models.DateTimeField(null=True, blank=True, auto_now_add=True)
    date_modified = models.DateTimeField(null=True, blank=True, auto_now=True)
    user = UserField(null=True, blank=True)
    jms_code = models.CharField(null=True, blank=True,max_length=255)

    objects = SupplierManager()

    def __unicode__(self):
        return self.company.name

    class Meta:
        db_table = 'supplier' 
```

# -------------------------------------------------- ----------------------------

```
class Contact(models.Model):

    uuid = UUIDField(primary_key=True)
    address = models.ForeignKey(Address, db_column='address_uuid',null=True,blank=True,verbose_name=_('Address'))
    title = models.ForeignKey(Title,db_column='title_uuid',null=True, blank=True)
    forename = models.CharField(null=True, blank=True,max_length=255)
    surname = models.CharField(null=True, blank=True,max_length=255)
    position = models.CharField(null=True, blank=True,max_length=255)
    mobile = models.CharField(null=True, blank=True,max_length=255)
    direct_line = models.CharField(null=True, blank=True,max_length=255)
    email = models.CharField(null=True, blank=True,max_length=255)
    origin = models.IntegerField(null=True, blank=True)
    lead_source = models.IntegerField(null=True, blank=True)
    notes = models.TextField(null=True, blank=True)
    contact_status = models.ForeignKey(ContactStatus, db_column='contact_status_uuid',verbose_name=_('Contact Status'))
    contact_method = models.ForeignKey(ContactMethod, db_column='contact_method_uuid',verbose_name=_('Contact Method'))
    date_created = models.DateTimeField(null=True, blank=True, auto_now_add=True)
    date_modified = models.DateTimeField(null=True, blank=True, auto_now=True)
    user = UserField(null=True, blank=True)
    jms_code = models.CharField(null=True, blank=True,max_length=255)
    allow_download = models.NullBooleanField(serialize=False)
    is_modified = ModifiedField(serialize=False)

    def __unicode__(self):
        return self.get_full_name()

    def get_full_name(self):
        return self.forename + " " + self.surname

    class Meta:
        db_table = 'contact' 
```

# -------------------------------------------------- ----------------------------

```
class Address(models.Model):
    uuid = UUIDField(primary_key=True)
    company = models.ForeignKey(Company, db_column='company_uuid',null=True,blank=True,verbose_name=_('Address'))
    group_name = models.CharField(null=True, blank=False,max_length=255,verbose_name=_('Corporate Group'))
    line1 = models.CharField(null=True, blank=False,max_length=255,verbose_name=_('Address Line 1'))
    line2 = models.CharField(null=True, blank=True,max_length=255,verbose_name=_('Address Line 2'))
    line3 = models.CharField(null=True, blank=True,max_length=255,verbose_name=_('Address Line 3'))
    town = models.CharField(null=True, blank=True,max_length=255)
    county = models.CharField(null=True, blank=True,max_length=255)
    postcode = models.CharField(null=True, blank=True,max_length=255)
    country_iso = models.CharField(null=True, blank=True,max_length=255)
    telephone = models.CharField(null=True, blank=True,max_length=255)
    fax = models.CharField(null=True, blank=True,max_length=255)
    email = models.CharField(null=True, blank=True,max_length=255)
    website = models.CharField(null=True, blank=True,max_length=255)
    description = models.CharField(null=True, blank=True,max_length=255)
    date_created = models.DateTimeField(null=True, blank=True, auto_now_add=True)
    date_modified = models.DateTimeField(null=True, blank=True, auto_now=True)
    user = UserField(null=True, blank=True)
    jms_code = models.CharField(null=True, blank=True,max_length=255)
    allow_download = models.NullBooleanField(serialize=False)
    notes = models.CharField(null=True, blank=True,max_length=255)    
    is_modified = ModifiedField(serialize=False)

    def __unicode__(self):
        if self.description in [ '',  None ] :
            if self.line1 not in [ '', None ] :
                return self.line1
            return self.uuid
        return self.description

    def asList (self) :
        return [ b for b in self.line1, self.line2, self.line3, self.town, self.county if b not in ('', None) ]

    class Meta:
        db_table = 'address'
        verbose_name_plural = ('Addresses') 
```

# -------------------------------------------------- ----------------------------

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:22:39.743

首先，添加`.select_related('company')`到您的初始供应商查询。现在，您每次`supplier.company`在循环中访问时都会发出一个额外的查询。

查询膨胀的其余部分来自选择`Address`和`Contact`单独。这是每次通过循环都必须发出的另外两个查询。如果您使用的是 Django 1.4+，您可以尝试使用[`prefetch_related`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)将其删除。如果您运行的是较小的版本，您可以尝试[django-batch-select](https://github.com/lilspikey/django-batch-select/)它为您提供类似的功能。可能需要重新考虑一下您的方法，以找出一种同时选择所有内容的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:14:15.077

可以重写为：

```
sup['contacts'] = models.Contact.objects.filter(address__in=addresses) 
```

Sups 最终会成为一个 Queryset 对象，当您使用它时会对其进行评估。如果您确实需要该列表，请执行以下操作，这将立即评估 QuerySet 并为您提供 Python 列表对象：

```
sup['contacts'] = list(models.Contact.objects.filter(address__in=addresses)) 
```

[https://docs.djangoproject.com/en/dev/ref/models/querysets/#in](https://docs.djangoproject.com/en/dev/ref/models/querysets/#in) https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:11:58.260

```
sup['contacts'] = Contact.objects.filter(address__in=addresses) 
```

# java - LineNumberChangeRulerColumn 上的 RevisionInformation 或 ChangeInformation

> ID：11393548
> 
> 赞同：0
> 
> 时间：2012-07-09T10:48:10.470
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我试图在 LineNumberChangeRulerColumn 上显示作者或 ChangeInformation。

```
Iterator<IVerticalRulerColumn> it =  ruler2.getDecoratorIterator();
while(it.hasNext()){
  IVerticalRulerColumn c = it.next();
  if(c instanceof LineNumberChangeRulerColumn){
    LineNumberChangeRulerColumn lnc = (LineNumberChangeRulerColumn)c;
    lnc.showLineNumbers(false);
    lnc.setDisplayMode(true);
            lnc.setRevisionInformation(ri);
    lnc.showRevisionAuthor(true);
    System.out.println("ci"+lnc.isShowingChangeInformation());
    System.out.println("ri"+lnc.isShowingRevisionInformation());    
  }         
} 
```

但是 ri（RevisionInformation）从何而来？我试图创建一个没有运气，因为它不允许我创建一个修订？请帮忙。东道国

```
visionInformation ri = new RevisionInformation();
Revision r = new Revision();
r.addRange(new LineRange(1,10));
ri.addRevision(r); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:23:36.997

@eactor，您如何获得修订详细信息！
从您的代码中，您无法获得修订详细信息的来源。

希望以下内容对您有所帮助。

如果您使用的是**[svnkit](http://svnkit.com/)**：
您可以参考[打印 subversion 存储库树](http://wiki.svnkit.com/Printing_Out_A_Subversion_Repository_Tree)的文档作为示例。

或者

可以参考[BuiltInAnnotate中的实现](http://www.javadocexamples.com/java_source/org/polarion/team/svn/ui/annotate/BuiltInAnnotate.java.html)

```
Map revisions = new HashMap();
String [][]lines = annotateOp.getAnnotatedLines();
RGB palette = SVNTeamPreferences.getAnnotateRGB(SVNTeamUIPlugin.instance().getPreferenceStore(), SVNTeamPreferences.ANNOTATE_RGB_BASE_NAME);
boolean useOneRGB = SVNTeamPreferences.getAnnotateBoolean(SVNTeamUIPlugin.instance().getPreferenceStore(), SVNTeamPreferences.ANNOTATE_USE_ONE_RGB_NAME);
for (int i = 0; i < lines.length; i++) {
    BuiltInAnnotateRevision revision = (BuiltInAnnotateRevision)revisions.get(lines[i][0]);
    if (revision == null) {
     revisions.put(lines[i][0], revision = new BuiltInAnnotateRevision(lines[i][0], lines[i][4], useOneRGB ? palette : CommitterColors.getDefault().getCommitterRGB(lines[i][5])));
      info.addRevision(revision);
      }
    revision.addLine(Integer.parseInt(lines[i][6]));
  } 
```

# c++ - 位 c 操作

> ID：11393554
> 
> 赞同：-4
> 
> 时间：2012-07-09T10:48:40.443
> 
> 标签：c++, c, bit-manipulation

这个问题的接受答案显示了如何在 c 中设置一个位：[您如何设置、清除和切换单个位？](https://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit-in-c)

但并没有真正说明“x”是什么。

是从左到右还是从右到左计算？无论如何，那个平台不依赖吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:22:18.153

C 标准没有说明如何对移位的位进行编号。它说，对于您移动它的每个位置，一个值将是两倍大。

> E1 << E2 的结果是 E1 左移 E2 位位置；空出的位用零填充。如果 E1 具有无符号类型，则结果的值为 E1 x 2 ^(E2) , [...]。

在大多数当前机器上，这意味着`1 << x`将在值的表示中设置位号 x。它正式没有说明该位的存储位置。

# unix - 用 | 去除 csv 文件中数据的时间分量 分离变量

> ID：11393556
> 
> 赞同：-1
> 
> 时间：2012-07-09T10:48:46.803
> 
> 标签：unix

对 UNIX 有点新，但我有一个关于重新更改 csv 文件进入数据馈送的问题。

有几个| 日期返回的分隔列（例如）

|07-04-2006 15:50:33:44:55:66| 这需要更改为 |07-04-2006|

是否所有数据都写入另一个文件并不重要。这些文件中有数千行。

理想情况下，我正在寻找一种方法来进入第 3 和第 7 管道列并获取前 10 个字符并删除其他任何内容，直到下一个 |

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T08:27:45.743

这适用于所有列，但除非有不得更改的日期列，否则应该这样做：

```
sed 's/|\(..-..-....\) ..:..:..:..:..:..|/|\1|/g' 
```

如果要更改文件，可以使用 sed 的`-i`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:56:40.280

你到底想要什么？

`|07-04-2006 15:50:33:44:55:66|`您可以使用`|07-04-2006|`File IO进行替换。

# android - 如何在android中找到音乐应用程序的开始和结束时间？

> ID：11393563
> 
> 赞同：1
> 
> 时间：2012-07-09T10:49:20.470
> 
> 标签：android, audio, core-audio

我正在开发一个应用程序，它应该捕获音频（FM /音乐）的开始和结束时间。我上网了很多，知道这可以通过 audioFocusListener 来实现。我已经实现了监听器，但我没有正确获取值。即当音频获得焦点并失去焦点时，这没有给出适当的值。 [OnAudioFocusChangeListener 在播放和暂停音频时没有执行？](https://stackoverflow.com/questions/11081465/onaudiofocuschangelistener-is-not-executed-when-the-audio-is-played-and-paused)
有没有其他方法可以实现相同的？

```
public class AudioManagerExample extends Activity implements OnAudioFocusChangeListener{
 AudioReceiver adreceiver;

 @Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);
 AudioManager am =   (AudioManager) getSystemService(AUDIO_SERVICE);
 am.requestAudioFocus(this,AudioManager.STREAM_MUSIC,AudioManager.AUDIOFOCUS_GAIN)
}

@Override
 public void onAudioFocusChange(int focusChange) {
 Log.d("AudioManager", "Inside on audio focus change");
  if(focusChange == AudioManager.AUDIOFOCUS_GAIN)
     Log.d("AudioManager", "audio focus gained");
  if(focusChange == AudioManager.AUDIOFOCUS_LOSS)
     Log.d("AudioManager", "audio focus lossed"); 
  /* Here i am always getting value -1 */

 }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:16:14.030

我在这里粘贴一些代码，以便您了解，按照您的要求进行操作..希望这会对您有所帮助，

```
public void updateProgressBar() 
{
    mHandler.postDelayed(mUpdateTimeTask, 100);        
}   

/**
 * Background Runnable thread
 * */
private Runnable mUpdateTimeTask = new Runnable() 
{
       public void run()
       {
           long totalDuration = mp.getDuration();
           long currentDuration = mp.getCurrentPosition();

           // Displaying Total Duration time
           songTotalDurationLabel.setText(""+utils.milliSecondsToTimer(totalDuration));
           // Displaying time completed playing
           songCurrentDurationLabel.setText(""+utils.milliSecondsToTimer(currentDuration));

           // Updating progress bar
           int progress = (int)(utils.getProgressPercentage(currentDuration, totalDuration));
           //Log.d("Progress", ""+progress);
           songProgressBar.setProgress(progress);

           // Running this thread after 100 milliseconds
           mHandler.postDelayed(this, 100);
       }
    }; 
```

# python - python中的bcrypt

> ID：11393564
> 
> 赞同：6
> 
> 时间：2012-07-09T10:49:21.180
> 
> 标签：python, security, hash, bcrypt

目前我正在尝试构建一个安全性非常高的登录系统。

所以我想使用 bcrypt 并且我还找到了第 3 方库 [py-bcrypt](http://www.mindrot.org/projects/py-bcrypt/)。

但是作者说是纯python实现。

现在我在某处读到不建议在 python 中使用 bcrypt，因为它太慢了，这会导致安全漏洞。bcrypt 应该在 C 中实现。

谁能证实这一点？现在我该怎么办？

**我应该使用：**

*   bcrypt (python)
*   SHA512（来自 hashlib）
*   有些不同

*我正在使用 Google App Engine*

**编辑：** [http ://packages.python.org/passlib/lib/passlib.hash.bcrypt.html#bcrypt-backends](http://packages.python.org/passlib/lib/passlib.hash.bcrypt.html#bcrypt-backends)

> 应该注意的是，考虑到当前安全所需的轮数，纯 python 实现（#4）太慢而无法使用。因此，默认情况下它是禁用的，除非设置了环境变量 PASSLIB_BUILTIN_BCRYPT="enabled"。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T11:26:31.083

比较一下两者如何？这是对 8000 个随机位和相应时间的密码进行哈希处理的代码：

哈希库：

```
#!/usr/bin/env python
import hashlib
import random

password = str(random.getrandbits(8000))
print hashlib.sha512(password).hexdigest() 
```

Hashlib 包括盐：

```
#!/usr/bin/env python
import hashlib
import random

password = str(random.getrandbits(8000))
salt = str(random.getrandbits(256))
print hashlib.sha512(password + salt).hexdigest() 
```

加密：

```
#!/usr/bin/env python
import bcrypt
import random

password = str(random.getrandbits(8000))
print bcrypt.hashpw(password,bcrypt.gensalt()) 
```

定时 bcrypt：

```
$ time ./bcrypt_test.py 
$2a$12$Om3a3zKsCNAM/SLB3hq5w.HYukFwn4CJ73rjXYNUPgqckUx2uLEmG

real    0m0.401s
user    0m0.313s
sys 0m0.013s 
```

计时哈希库：

```
$ time ./hashlib_test.py 
9e37eb4f164bbb1808833297d0244327e4faac109cd92729228f6e36d75d23044ac13a7a1907515cd6db44474b244678779e3ae4e97d8355c2069332aae52d61

real    0m0.032s
user    0m0.021s
sys 0m0.010s
$ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T12:49:25.703

尝试[passlib](http://pypi.python.org/pypi/passlib/)。它具有[bcrypt](http://packages.python.org/passlib/lib/passlib.hash.bcrypt.html)的 C 实现。

# c++ - 如果新大小与旧大小相同，标准是否保证 std::string::resize 不会做任何事情？

> ID：11393566
> 
> 赞同：1
> 
> 时间：2012-07-09T10:49:29.543
> 
> 标签：c++, string, resize

正如标题所说：

> 如果新大小与旧大小相同，标准是否保证 std::string::resize 不会做任何事情？

[当然，我可以测试它，但它可能是UB，所以测试不会在这里工作。]
[在 cppreference.com 和 cplusplus.com 中，文档对这个案例只字未提]

例子：

```
std::string s( "asd" );
// s.size() is 3
s.resize( 3 );    // will this affect **somehow** the string? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:01:53.820

不，没有任何保证。实现*可以*将字符串重新分配到新缓冲区，以减少其`capacity()`.

标准说：

> *效果*：改变指定字符串的长度，`*this`如下所示：
> 
> — 如果`n <= size()`，该函数用`*this`长度为 n 的字符串替换由 指定的字符串，其元素是由 指定的原始字符串的初始元素的副本`*this`。
> 
> — 如果`n > size()`，该函数用`*this`长度为 n 的字符串替换由 指定的字符串，该字符串的第一个`size()`元素是由 指定的原始字符串的副本，`*this`其余元素全部初始化为 c。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:03:52.673

ISO/IEC 14882:2011(E) § 21.4.4：

`void resize(size_type n, charT c);`

*要求：* n <= max_size()

*抛出：*如果 n > max_size()，则为 length_error。

*效果：*改变 *this 指定的字符串的长度，如下所示：

*   如果 n <= size()，该函数将 *this 指定的字符串替换为长度为 n 的字符串，其元素是 *this 指定的原始字符串的初始元素的副本。
*   如果 n > size()，函数将 *this 指定的字符串替换为长度为 n 的字符串，其第一个 size() 元素是 *this 指定的原始字符串的副本，其余元素全部初始化为 c。

# c++ - 对具有两列并支持 CRUD 操作的 C++ 数据结构的建议

> ID：11393567
> 
> 赞同：0
> 
> 时间：2012-07-09T10:49:31.400
> 
> 标签：c++, data-structures, crud

我想设计/找到一个支持两列数据和对这些数据进行 CRUD 操作的 C++ 数据结构/容器。我查看了 STL Containers，但它们都不支持我的要求（如果我错了，请纠正我）。我的确切要求如下

1.  具有两列的数据结构。
2.  支持以下功能

    1.  搜索特定项目。

    2.  搜索符合条件的项目列表

    3.  这两列都应支持上述搜索操作。即，我应该能够在两列上搜索数据。

    4.  更新特定项目

    5.  删除特定项目
    6.  添加新项目

我更喜欢搜索操作比添加/删除操作更快。

此外，我将在线程之间共享这些数据，因此需要支持互斥锁（我也可以分别对这些数据实现互斥锁。）

现有的任何 STL 是否满足我的要求，或者我们是否有任何其他库或数据结构最适合我的要求。

注意：我不能使用数据库或 SQLite 来存储我的数据。

谢谢 问候， 迪内什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:58:58.690

如果其中一列是唯一的，那么您可能可以使用[Map](http://www.cplusplus.com/reference/stl/map/)。否则，定义一个具有两个代表列的成员变量的类，并将其存储在一个[向量](http://www.cplusplus.com/reference/stl/vector/)中。有一些算法可以帮助您搜索容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:24:12.993

> 搜索特定项目。

如果您需要单向映射（即快速搜索一列中的值），您应该使用映射或多映射容器类。但是，标准库中没有双向映射，因此您应该将自己的映射构建为一对（多）映射或使用其他库，例如 boost::bimap

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:33:37.600

你最好的选择是[Boost.Bimap](http://www.boost.org/libs/bimap/doc/html/index.html)，因为当你想根据任一列进行搜索时，它会让你很容易。如果您决定需要更多列，那么 Boost.Multi_index 可能会更好。[这是一个例子](https://stackoverflow.com/a/4450256/127893)！

# c++ - 在成员函数中使用 operator()

> ID：11393570
> 
> 赞同：4
> 
> 时间：2012-07-09T10:49:44.640
> 
> 标签：c++, operator-overloading

我在我的一个类中重载了运算符 ()，我想在另一个成员函数中使用它。

```
class A {
public:
    void operator()();
    void operator()(double x);
};

void A::operator()() {
    // stuff
};

void A::operator()(double x) {
    // stuff with other members and x
    this->operator();
}; 
```

线路`this->operator()`不工作。我只想使用我定义为我的类的成员函数的运算符`A`。我得到的错误是：`Error 1 error C3867: 'A::operator ()': function call missing argument list; use '&A::operator ()' to create a pointer to member`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T10:56:59.110

你应该写：

```
void A::operator()(double x) {
    // stuff with other members and x
    this->operator()();
}; 
```

第一个`()`是运算符的名称，第二个是调用本身的名称：这是错误消息中缺少的（空）参数列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:17:21.490

经验法则：

运算符重载函数的名称**总是** `operator@`，`@`作为重载运算符。

要通过名称直接调用运算符重载函数，请键入`operator@(params)`，在您的情况下，键入`operator() (...)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:58:50.680

在指向对象的指针上调用成员函数的语法是：

```
ptr->memberName(); 
```

在你的情况下，成员名称是`operator()`，所以你想写

```
ptr->operator()(); 
```

或其他变体

```
ptr->operator()(1.0);   // operator() accepting single argument of type double 
```

定义也是如此`operator()`-您到处都缺少一对父母。

# wpf - 如何在 WPF 中 TabControl 的 TabItem 中显示 Word 文档？

> ID：11393576
> 
> 赞同：0
> 
> 时间：2012-07-09T10:50:10.310
> 
> 标签：wpf, xaml, ms-word, tabcontrol, documentviewer

有没有办法在 WPF 的 TabControl 的 TabItem 中打开 Word 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:08:14.403

向您的控件添加一个[`DocumentViewer`](http://msdn.microsoft.com/en-us/library/system.windows.controls.documentviewer.aspx)控件，该控件`TabItem`可以托管文档等固定`xps`文档。您可能*需要将*您的 word 文档转换为 xps 文档，然后将其加载到 DocumentViewer 控件中以显示它。

更多信息可以在[这篇文章](http://www.c-sharpcorner.com/uploadfile/mahesh/viewing-word-documents-in-wpf/)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T20:46:16.663

似乎 DocumentViewer 在尝试将其添加到 TabItem 的控件集合时无法转换为 System.Windows.Forms.Control 类型。

# iphone - 为什么这个 UIButton 在禁用时仍然触发事件处理程序

> ID：11393577
> 
> 赞同：3
> 
> 时间：2012-07-09T10:50:13.473
> 
> 标签：iphone, cocoa-touch, ios5, uibutton

我在视图中有一个 UIButton。我像这样附加一个事件处理程序：

```
[self.button addTarget:self  
           action:@selector(button_touchUpInside:)      
 forControlEvents:UIControlEventTouchUpInside]; 
```

处理程序如下所示：

```
-(void) button_touchUpInside:(id)sender
{
    NSLog(@"%@", ((UIButton *)sender).enabled ? @"ENABLED" : @"DISABLED"); // Logs DISABLED
   // Do stuff
} 
```

我禁用这样的按钮：

```
-(void)setEnabled:(BOOL)enabled
{
    enabled_ = enabled;
    self.button.enabled = enabled;
} 
```

我的问题是，即使我`enabled = NO`在按钮上设置了 a`TouchUpInside`仍然会触发处理程序。我可以在处理程序中看到该按钮被禁用，但是处理程序仍然被触发。

请注意，有几种方法可以解决这个问题 - 检查处理程序中的 button.enabled，@sanchitsingh 在下面的答案等。我想知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:01:22.850

只需检查您的代码中是否涉及任何手势。这可能会导致问题。我认为你应该只使用

```
 button.enabled = NO;
 button.userInteractionEnabled = NO; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T07:06:50.800

根据我的个人经验，从[这个问题和网络上的其他线程来看，Apple 关于](https://stackoverflow.com/questions/2326051/how-can-a-disabled-button-get-touches)[UIControl.enabled](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/instp/UIControl/enabled)的文档似乎是不正确的，并且设置 UIControl disabled 并不能阻止它获取触摸事件。它只抵消了一些事件，例如（从内存中，现在无法检查）单击、触摸和当前动作触发事件，因此您必须有效地使用 UserInteractionEnabled 属性才能真正摆脱触摸事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:56:53.570

试试这个

```
button.userInteractionEnabled=NO; 
```

# c# - 有没有办法在相机捕捉中显示标题？

> ID：11393579
> 
> 赞同：0
> 
> 时间：2012-07-09T10:50:18.503
> 
> 标签：c#, xaml, windows-phone-7.1

基本上我使用`CameraCaptureTask`. 我想在相机页面中显示文本。有什么办法可以显示吗？

# php - 获取点的总和（表中的列）按 CustomerID 分组，条件为日期（持续时间）

> ID：11393581
> 
> 赞同：2
> 
> 时间：2012-07-09T10:50:38.967
> 
> 标签：php, mysql, group-by, sum, having

我有一张交易表，因为每个客户都有几笔交易，每笔交易都有积分。

我需要运行一个 mysql 查询来查找每个客户在一定时间内的积分总和。

每笔交易都有一个 CustomerID 、 Points 、 TranactionDate

问题是我只需要为日期范围在两个日期之间的交易找到 SUM(Points) GroupBY CustomerID。

像这样：

```
SELECT SUM(SELECT `Points` FROM `transaction` 
    WHERE Date BETWEEN '30/09/2012' AND '4/10/2012') 
    GROUP BY `CustomerID` 
```

请我需要上述查询的等效查询。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:54:51.670

```
SELECT SUM(Points) as customerPoints FROM transaction 
    WHERE Date BETWEEN '30/09/2012' AND '4/10/2012' 
    GROUP BY CustomerID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:53:29.807

```
SELECT `CustomerID`, SUM(`Points`) AS `Points`
FROM `transaction`
WHERE `Date` BETWEEN '30/09/2012' AND '4/10/2012'
GROUP BY `CustomerID` 
```

# ios - Xcode 4.3.3 编译项目-> 构建成功但 Phonegap-App 不会安装在 iPhone 3G 上

> ID：11393584
> 
> 赞同：2
> 
> 时间：2012-07-09T10:51:03.610
> 
> 标签：ios, xcode, cordova

标题中描述了该问题。Build Settings 中的架构设置为 (armv 7) $(ARCHS_STANDARD_32_BIT)。armv6 也不起作用。设备运行 iOS 4.2.1。我今天更新了我的 Xcode，从那以后它不再在 3G 上运行，但是它可以在 iOS 5.1 的 4S 上运行。该应用程序是用Phonegap开发的

有人经历过这种情况并知道如何避免吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:11:25.220

1.  确保您的 Info.plist 不包含 armv7 的“所需设备功能”键。如果存在，请将其删除。

2.  确保“仅构建活动架构”设置为**NO**。

3.  在目标的“构建设置”下，在“架构”行中选择“其他”，然后手动输入两个值：**armv6**和**armv7**。单击弹出框外部以保存手动输入的值。

![iOS iPhone 3G 未安装应用程序 Xcode 4.2 4.3 armv6 armv7](../Images/81bf3593ab3f984920ab801666035a93.png)

# android - 在 android 活动测试中，如何完成我的主要活动开始的另一个活动？

> ID：11393585
> 
> 赞同：0
> 
> 时间：2012-07-09T10:51:07.823
> 
> 标签：android, testing, android-activity

我正在为我们用 3 个按钮编写的活动编写活动测试。其中 2 个按钮启动其他活动。

我可以编写一个模拟按钮按下的测试，然后检查所需的活动是否正在运行，但我无法从第二个活动返回。第二个活动保持在最前面并阻止假设第一个活动正在运行的其他测试正常工作。他们只是有点冻结。

我有对第一个活动的引用，但这是我需要调用 finish() 的第二个活动。有没有办法做到这一点？

编辑：我在这个要点中添加了一些实际的源代码来说明我的问题：[https ://gist.github.com/3076103](https://gist.github.com/3076103)

它专门针对测试活动。在生产代码中一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:12:20.147

您可能应该使用[http://developer.android.com/reference/android/app/Instrumentation.ActivityMonitor.html](http://developer.android.com/reference/android/app/Instrumentation.ActivityMonitor.html)来获取第二个活动的参考，或者您可以阻止第二个活动的启动（仍然可以保证调用启动第二个活动实际上已经到达框架）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:03:40.243

您需要一种方式让您的活动相互交流，以便一个活动可以告诉另一个活动完成。有几种方法可以做到这一点。一种方法是在我的应用程序中创建服务；我的“第二个”活动将连接到此服务以注册一种接收消息的方式，而我的主要活动将连接以提供它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:15:28.820

在 Activity1 中添加以下内容以启动 Activity2

```
Intent myIntent = new Intent(view.getContext(), Activity2.class);
startActivityForResult(myIntent, 0); 
```

在 Activity2 添加以下内容以启动 Activity1 并完成 Activity2

```
Intent intent = new Intent();
setResult(RESULT_OK, intent);
finish(); 
```

更多详情：[http ://www.warriorpoint.com/blog/2009/05/24/android-how-to-switch-between-activities/](http://www.warriorpoint.com/blog/2009/05/24/android-how-to-switch-between-activities/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T15:32:00.397

*   如果您使用 startActivityForResult 启动活动，则可以使用[finishActivity(int requestCode)](http://developer.android.com/reference/android/app/Activity.html#finishActivity%28int%29)从父项关闭活动。

    开始活动：
    `startActivityForResult(new Intent(...), 123123 /*requestCode*/);`

    当您想完成该活动（来自呼叫者）时，请使用：
    `finishActivity(123123 /*requestCode*/)`

*   还有一种方法可以查找子活动是否完成。但是只有当子活动为自己调用完成（）时，您才能跟踪这一点。要从子节点接收子节点完成请求，您需要覆盖父活动中的[finishFromChild()](http://developer.android.com/reference/android/app/Activity.html#finishFromChild%28android.app.Activity%29)方法。

# c# - 无需复制控制器的 Ajax 回发的不同视图

> ID：11393588
> 
> 赞同：1
> 
> 时间：2012-07-09T10:51:17.240
> 
> 标签：c#, ajax, asp.net-mvc-3

我有一个“添加到购物车”按钮，如果浏览器支持 JS + Ajax（并且没有关闭它），它会使用 Ajax 发布回站点，但是如果他们不支持它，或者将其关闭它执行手动样式的 POST。

我希望完成的是两种视图——一种是用户使用常规 POST 发回，另一种是来自 AJAX POST。这样我就可以显示内嵌消息（部分）或全屏。

我宁愿不必重复控制器/动作代码两次，它看起来不优雅。

对于此类问题，是否有任何推荐的解决方案或模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:06:53.660

约翰，

您可以对请求使用 IsAjaxRequest 方法来确定这一点。因此，您可以将其应用于您的场景：

```
public ActionResult AddToCart(YourCartViewmodel cartViewmodel)
{
     if (ModelState.IsValid)
     {
         // do the standard/common db stuff here
         if(Request.IsAjaxRequest())
         {
             return PartialView("myPartialView");
         }
         else
         {
             return View("standardView");
         }
     }
     /* always return full 'standard' postback if model error */
     return View(cartViewmodel);   
} 
```

尽管可能没有给出完整的解决方案，但这应该会给您一个良好的开端...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:58:55.187

您可以在控制器中执行两种不同的操作。一个用于常规帖子，一个用于 AJAX。

```
public ActionResult AddToCart(Viewmodel vm)
{
     if (ModelState.IsValid)
     {
         DoStuff(vm);
         return View("ViewForRegularPost");
     }
     /* error */
     return View(vm);   
} 
```

和

```
public ActionResult JsonAddToCart(Viewmodel vm)
{
     if (ModelState.IsValid)
     {
         DoStuff(vm);
         return View("ViewForJS");
     }
     /* error */
     return View(vm);     
} 
```

不要重复您的控制器代码，而是为实际的控制器代码使用单独的方法。

```
public void DoStuff(Viewmodel vm)
{
    //TODO : Actual controller code goes here
} 
```

# linux - 重启后无法连接apache服务器

> ID：11393598
> 
> 赞同：0
> 
> 时间：2012-07-09T10:51:53.673
> 
> 标签：linux, apache, reboot

我是 Linux 新手，我有一个紧急问题，我有一个 apache 服务器，我不得不重新启动它，但现在我无法连接到它。有任何想法吗？我的代码

```
sudo reboot 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:44:44.347

感谢大家的帮助，这是主机的问题......不是我这边。干杯。

# android - 从数据库中获取完成建议

> ID：11393599
> 
> 赞同：0
> 
> 时间：2012-07-09T10:51:59.213
> 
> 标签：android, database, autocomplete

我正在尝试从数据库中检索前 5 个单词并将其设置为按钮文本，因为这是我的代码

```
String [] deal;
 String text,s1,s2,s3,s4,s5;
 text=edt.getText().toString();
         deal=db.getAllItemFilter(text);
                 s1=deal[0];
                 s2=deal[0];
                 s3=deal[0];
                 s4=deal[0];
                 s5=deal[0];

                 sug1.setText(s1);
                 sug2.setText(s2);
                 sug3.setText(s3);
                 sug4.setText(s4);
                 sug5.setText(s5); 
```

对于数据库查询，我正在使用此代码，但它不起作用

```
public String[] getAllItemFilter(String text)
    {
        String [] columns=  new String[]{word};

        Cursor cursor = this.ourdatabase.query(database_table, columns, " word like 'text%' ", null, null, null, null);

        String [] deal = new String[cursor.getCount()];

            int iword = cursor.getColumnIndex(word);
            int i=0;
            for (cursor.moveToFirst();!cursor.isAfterLast();cursor.moveToNext())
            {
                 deal[i]=cursor.getString(iword);
                 i++;
                 if(i==5)
                     break;
             }

            return deal;

    } 
```

谁能帮我从数据库中获得前 5 条建议。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:29:45.230

您的查询不正确。当您设置它时，它每次都在寻找“文本*”（您忘记格式化查询，因此变量被用作变量）。

*如果您想要以*提供的文本开头的单词，请将光标更改为我在下面显示的内容：

```
Cursor cursor = this.ourdatabase.query(database_table, columns, " word like '" + text + "%' ", null, null, null, null); 
```

如果您只想要*包含*所提供文本的单词，请将其更改为：

```
Cursor cursor = this.ourdatabase.query(database_table, columns, " word like '%" + text + "%' ", null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:55:45.257

您应该首先在 SQL 查询结束时设置“LIMIT=5”而不是循环限制，这样可以节省资源。然后您可以将 word% 替换为 %word% 以匹配单词开头。

# java - 如何将长字符串转换为数组或数据库字段？

> ID：11393603
> 
> 赞同：0
> 
> 时间：2012-07-09T10:52:13.037
> 
> 标签：java, database, string, itext

我正忙于对 OpenBravoPOS 进行一些扩展，以阅读我们订购产品的公司的发票。

此发票以 PDF 格式创建。我使用 Itext Library 来阅读特定的订单行。问题是我能够阅读我需要的页面，在一个大字符串中。这个字符串看起来像

```
LEVERINGSBON 30/06/2012 27828/2012/NL/WebShop   Distributeur ID nummer: 15099191 Uw distributeur: Klant Naam: FM Point Marcel Snoeck Adres: Zonnedauw 17 5953MS Reuver Telefoon: +31654317017 E-MAIL: yvonneenmarcel@home.nl Opmerking: -  Lp. Rekening Totaal FV/39525/2012/NL     vd Wal Sandra 72.00 1 3 x 354 - Luxury Collection 50ml NEW! 72.00 FV/39526/2012/NL     Slaats Tim 6.00 2 1 x KR01 - Eye Pencil DECADENCE BLACK 6.00 FV/39527/2012/NL     Nabben Britt 44.95 3 3 x E013 - Krachtreiniger 1000ml 24.75 4 2 x E016 -Tapijtreiniger 1000ml 9.20 5 1 x 3 Step Mascara PERFECT BLACK 11.00 FV/39528/2012/NL     Nabben Lieke 32.00 6 1 x 192 - Luxury Collection 50ml 21.00 7 1 x 3 Step Mascara PERFECT BLACK 11.00 FV/39529/2012/NL     Claessens Patrick 12.40 8 1 x P101 - Peeling VERBENA 12.40 FV/39530/2012/NL     Smits Yolanda 56.00 9 1 x E006 - Wasmiddel VIVID COLOURS 1000ml 7.00 10 2 x B023 - Body Lotion 200ml NEW 18.40 11 2 x 023 - Classic Collection 30ml 30.60 FV/39531/2012/NL     van Pol-Thijssen Silvia 34.70 12 1 x 110 - Classic Collection 50ml 15.30 13 1 x N003 - Nagellak HOT RED 7.00 14 1 x P103 - Peeling CHERRY BLOSSOM 12.40 Aantal: 21 Totaal: 258.05 € 1.17.4564.29482 1/1        " 
```

我试图做的是读取每一行，并确定这是否是订单行，如果是，我需要将其放入数据库中。

一个订单行看起来像

```
2 1 x KR01 - Eye Pencil DECADENCE BLACK 6.00 
```

您可以阅读如下；订单第 2 行，第 1 件产品 KR01 描述 Eye Pencil Decadence Black，价格为 6.00

有没有一种简单的方法来读取这个长字符串并将其与正确的订单行分开。

感谢您的回复

到目前为止，我的代码是：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package part4.chapter15;

import com.itextpdf.text.pdf.PdfArray;
import com.itextpdf.text.pdf.PdfName;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.parser.PdfReaderContentParser;
import com.itextpdf.text.pdf.parser.SimpleTextExtractionStrategy;
import com.itextpdf.text.pdf.parser.TextExtractionStrategy;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.PrintWriter;

public class ExtractPageContent {

    /** The original PDF that will be parsed. */
    public static final String PREFACE = "C:/Users/marcel/Documents/FM/NL/FMPoint        /Kassa_voorraad_software/PDF-Itext/PDF_Results_Import_Files/small.pdf" ;
    /** The resulting text file. */
    public static final String RESULT = "C:/Users/marcel/Documents/FM/NL/FMPoint        /Kassa_voorraad_software/PDF-Itext/PDF_Results_Import_Files/sample-            result.txt" ;

    /**
     * Parses a PDF to a plain text file.
     * @param pdf the original PDF
     * @param txt the resulting text
 * @throws IOException
 */
public void parsePdf(String pdf, String txt) throws IOException {

        /** Putting result in Array, to be able extract to Table */
        PdfArray array;

        PdfReader reader = new PdfReader(pdf);
        PdfReaderContentParser parser = new PdfReaderContentParser(reader);
        PrintWriter out = new PrintWriter(new FileOutputStream(txt));
        TextExtractionStrategy strategy;
        for (int i = 1; i <= reader.getNumberOfPages(); i++) {
            strategy = parser.processContent(i, new SimpleTextExtractionStrategy());
            String str = strategy.getResultantText();
            CharSequence FindPage = "Lp. Rekening Totaal"; 
            if  (str.contains(FindPage)){ 
              out.println(strategy.getResultantText());
        }
        }
        out.flush();
        out.close();
    }

    /**
     * Main method.
     * @param    args    no arguments needed
     * @throws IOException
     */
    public static void main(String[] args) throws IOException {
        new ExtractPageContent().parsePdf(PREFACE, RESULT);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:01:28.323

您可以设计一个`regex`以多种不同方式解决此问题的方法。这是一个：

```
 String pdf = "LEVERINGSBON 30/06/2012 27828/2012/NL/WebShop   Distributeur ID nummer: 15099191 Uw distributeur: Klant Naam: FM Point Marcel Snoeck Adres: Zonnedauw 17 5953MS Reuver Telefoon: +31654317017 E-MAIL: yvonneenmarcel@home.nl Opmerking: - Lp. Rekening Totaal FV/39525/2012/NL     vd Wal Sandra 72.00 1 3 x 354 - Luxury Collection 50ml NEW! 72.00 FV/39526/2012/NL     Slaats Tim 6.00 2 1 x KR01 - Eye Pencil DECADENCE BLACK 6.00 FV/39527/2012/NL     Nabben Britt 44.95 3 3 x E013 - Krachtreiniger 1000ml 24.75 4 2 x E016 -Tapijtreiniger 1000ml 9.20 5 1 x 3 Step Mascara PERFECT BLACK 11.00 FV/39528/2012/NL     Nabben Lieke 32.00 6 1 x 192 - Luxury Collection 50ml 21.00 7 1 x 3 Step Mascara PERFECT BLACK 11.00 FV/39529/2012/NL     Claessens Patrick 12.40 8 1 x P101 - Peeling VERBENA 12.40 FV/39530/2012/NL     Smits Yolanda 56.00 9 1 x E006 - Wasmiddel VIVID COLOURS 1000ml 7.00 10 2 x B023 - Body Lotion 200ml NEW 18.40 11 2 x 023 - Classic Collection 30ml 30.60 FV/39531/2012/NL     van Pol-Thijssen Silvia 34.70 12 1 x 110 - Classic Collection 50ml 15.30 13 1 x N003 - Nagellak HOT RED 7.00 14 1 x P103 - Peeling CHERRY BLOSSOM 12.40 Aantal: 21 Totaal: 258.05 € 1.17.4564.29482 1/1        ";
    String patternString = "\\d\\s\\d\\sx.*?\\d\\.\\d\\d";
    Matcher matcher = Pattern.compile(patternString).matcher(pdf);
    List<String> dataRows = new ArrayList<String>();
    while (matcher.find()) {
        dataRows.add(matcher.group());
    }
    System.out.println(dataRows); 
```

**正则表达式的解释：**
`\\d\\s\\d\\sx` : 匹配数字、空格、数字、空格、'x'
`.*?`: 匹配任意数量的任意字符，但匹配非贪婪[为什么这很重要？](http://www.regular-expressions.info/repeat.html) `\\d\.\\d\\d`：将最后一个数字与两位小数匹配
这可能需要根据数据的变化进行调整，但这应该是一个很好的起点。

如果您需要自定义数据结构的列表而不是 String，则可以像这样获取匹配的各个部分：

```
...  
String patternString = "(\\d)\\s(\\d)\\sx.*?\\d\\.\\d\\d";
...
while (matcher.find()) {
    MyDataObj m = new MyDataObj();
    m.setSomeField(dataRows.add(matcher.group(1)));
    m.setAnotherField(dataRows.add(matcher.group(2)));
} 
```

只需将您希望保留在模式中的每个值都包含在 parathensis 中，然后使用 等检索它们`matcher.group(1)`（`matcher.group(2)`为`matcher.group(0)`您提供整个匹配项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:49:25.157

答案的结果很好以下代码结果如下：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package part4.chapter15;

import com.itextpdf.text.pdf.PdfArray;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.parser.PdfReaderContentParser;
import com.itextpdf.text.pdf.parser.SimpleTextExtractionStrategy;
import com.itextpdf.text.pdf.parser.TextExtractionStrategy;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class ExtractPageContent {

/** The original PDF that will be parsed. */
    public static final String PREFACE = "C:/Users/marcel/Documents/FM/NL/FMPoint/Kassa_voorraad_software/PDF-Itext/PDF_Results_Import_Files/big.pdf" ;
    /** The resulting text file. */
    public static final String RESULT = "C:/Users/marcel/Documents/FM/NL/FMPoint/Kassa_voorraad_software/PDF-Itext/PDF_Results_Import_Files/sample-result.txt" ;

    /**
     * Parses a PDF to a plain text file.
     * @param pdf the original PDF
     * @param txt the resulting text
     * @throws IOException
     */
    public void parsePdf(String pdf, String txt) throws IOException {

        /** Putting result in Array, to be able extract to Table */
        PdfArray array;

        PdfReader reader = new PdfReader(pdf);
        PdfReaderContentParser parser = new PdfReaderContentParser(reader);
        PrintWriter out = new PrintWriter(new FileOutputStream(txt));
        TextExtractionStrategy strategy;
        for (int i = 1; i <= reader.getNumberOfPages(); i++) {
            strategy = parser.processContent(i, new SimpleTextExtractionStrategy());
            String str = strategy.getResultantText();
            CharSequence FindPage = "Lp. Rekening Totaal"; 
            if  (str.contains(FindPage)){ 
/*                Pattern re =  Pattern.compile("(\\d+)\\s(\\d+)(\\xA0)x(\\xA0)(.*?)(\\d+\\.\\d{2})"); */
                /* Pattern for orders of Artikels with product Code */
                Pattern re2 =  Pattern.compile("(\\d+)\\s(\\d+)(\\xA0)x(\\xA0)(\\w+)(\\xA0)-\\s(.*?)(\\d+\\.\\d{2})"); 
                Matcher m = re2.matcher(str);
                int mIdx = 0;
                while (m.find()){
                    for( int groupIdx = 0; groupIdx < m.groupCount()+1; groupIdx++ ){
                        /*System.out.println( "[" + mIdx + "][" + groupIdx + "] = " + m.group(groupIdx));*/
                        System.out.println( "[" + mIdx + "][" + groupIdx + "] = " + m.group(groupIdx));
                    }
                    mIdx++;
                }

/**     System.out.println(dataRows); */

          out.println(strategy.getResultantText());
    }
    }
    out.flush();
    out.close();
}

/**
 * Main method.
 * @param    args    no arguments needed
 * @throws IOException
 */
public static void main(String[] args) throws IOException {
    new ExtractPageContent().parsePdf(PREFACE, RESULT);
}

} 
```

输出结果如下所示。

*完成订单行*[0][0] = 4 3 x 023 - 经典系列 30ml 45.90

*行号*[0][1] = 4

*数量*[0][2] = 3

*空*[0][3] =  

*空*[0][4] =  

*产品代码*[0][5] = 023

*空*[0][6] =  

*产品描述*[0][7] = 经典系列 30ml

*价格*[0][8] = 45.90

[1][0] = 5 2 x C052 - 手和指甲霜 100ml 新 15.20

[1][1] = 5

[1][2] = 2

[1][3] =  

[1][4] =  

[1][5] = C052

[1][6] =  

[1][7] = 手指甲霜 100ml 新

[1][8] = 15.20

感谢您的大力支持

# c# - 我们可以在 Windows 服务中吞下未处理的异常吗

> ID：11393604
> 
> 赞同：0
> 
> 时间：2012-07-09T10:52:18.380
> 
> 标签：c#, windows-services

我在 c# 中使用 windows 服务使用 sFTP (ssh.net) 进行文件传输。我已经在每个代码块中处理了异常，但我仍然收到未处理的异常，并且我的 Windows 服务崩溃了。

我通过使用发现了未处理的异常

```
AppDomain.CurrentDomain.UnhandledException 
```

有可能避免这种未处理的异常并避免服务崩溃。

提前致谢。维杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:55:06.670

不，因为[`UnhandledException`](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)不会改变进程正在下降的事实。它只是让您有机会在此之前做某事（例如记录失败）。

即使事情可以这样工作，但事实是您的服务存在错误。您应该更多地寻找修复它们而不是隐藏它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:56:23.397

> 有可能避免这种未处理的异常并避免服务崩溃。

是的。这也是一个糟糕的设计决策。

> AppDomain.CurrentDomain.UnhandledException

这是放置写崩溃报告然后重新启动服务的最后手段处理程序的好地方。

吞下异常并不聪明。必须处理您期望的每个异常。

> 我在每个代码块中都处理了异常，但我仍然收到未处理的异常

听起来你不知道自己在做什么。没有必要在每个代码块中处理异常 - 它使用异常处理程序完全重载您的代码。但是，有必要在有意义的地方进行适当的异常处理，并捕获每一个敏感（可预期的）异常。

避免服务崩溃并不聪明——因为如果你不知道你有什么异常，那么你最终可能会得到一个损坏的服务而不是一个崩溃的服务。快速而艰难地失败仍然是编写可靠服务器系统的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:58:00.570

避免未处理异常的唯一方法是没有异常！假设您的服务不使用任何可能在单独线程上引发异常的多线程功能，您可以在 ServiceBase.Run 调用周围放置一个异常处理程序

这样，任何漏掉的异常都可以在最后一分钟被捕获并处理。通常，尽管您想尝试将它们向下抓住并相应地处理

对于线程应用程序，它变得有点困难，因为生成的每个新线程都不会抛出主线程，也不会由这个“包罗万象”的处理程序处理。

编辑：

我可能会补充一点，我不容忍这样做 - 理想情况下，您应该在正确的地方处理异常 - 如果您遇到未处理的异常，那么您需要检查堆栈并查看哪里出了问题。将处理程序添加到 AppDomain.UnhandledException 并将异常树和堆栈写入日志会有所帮助（您确实有一些日志记录机制，对吗？）。无论是那个还是调试

# sql - 如何在 SQL Server 上放置双精度类型？

> ID：11393606
> 
> 赞同：1
> 
> 时间：2012-07-09T10:52:28.977
> 
> 标签：sql, sql-server

我需要在 SQL Server 中存储以下双精度值：

`double x = 52.22105994970536;`

我应该使用什么 SQL Server 数据类型来存储这种类型的值。也许`decimal`或`float`？

我不确定这是否相关，但我需要用 a `.`not a存储这些值`,`以分隔值的小数部分。SQL Server 中是否有我应该注意的设置以确保发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:02:02.923

> 我不确定这是否相关，但我需要用 . 不是 a ，用于分隔值的小数部分。SQL Server 中是否有我应该注意的设置以确保发生这种情况？

不，学习编程到你意识到这根本不是问题的程度就足够了——小数存储为小数。“。” 或“，”是用于打印值的视觉转换（可以说是“ToString”调用）的一部分，与该值无关。

如果要存储双倍，则要存储双倍。观点。如果您想确保您的程序以“.”显示它，那么请正确编程 UI，但不要打扰 SQL Server 内部存储。通常它们显示在语言环境中 - 在大多数情况下，这比硬编码更智能。所以，也许你强制更改 UI 区域设置？或者硬编码转换以在每次打印出值时应用。

> 我应该使用什么 SQL Server 数据类型来存储这种类型的值。也许十进制或浮点数？

[http://msdn.microsoft.com/en-us/library/ms187752.aspx](http://msdn.microsoft.com/en-us/library/ms187752.aspx)

解释sql server的数据类型。

选择一个符合您要求的。可能是具有给定精度的浮点版本。现在，如果您害怕，因为它们被命名为“近似数字”，请注意 double 是近似数字，在 C#（或您使用的任何其他前端语言 - 您不要告诉我们）中也是如此。

默认推荐的映射位于[http://msdn.microsoft.com/en-us/library/ms131092.aspx](http://msdn.microsoft.com/en-us/library/ms131092.aspx)并指向“浮动”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:00:47.043

正如 Damien_The_Unbeliever 所说，格式化是（应该是无关紧要的）格式化是您为显示、报告等所做的事情。

至于是使用浮点还是定点（十进制），如果您用来访问它的语言具有十进制类型，十进制可以解决很多问题。如果您将数字操作为双精度数，那么在后端使用小数不会给您那么多，因为您仍将手动处理浮点表示固有的不准确性。

# java - JiBX 如何绑定/map 静态类？

> ID：11393607
> 
> 赞同：0
> 
> 时间：2012-07-09T10:52:29.857
> 
> 标签：java, jibx

我有以下课程

```
public class RootElement
{
    protected String code;
    protected RootElement.SubElement subElement;

    public static class SubElement
    {
        protected String desc;
        // Getter-Setter methods
    }
    // Getter-Setter methods
} 
```

下面是 JiBX 映射（绑定）文件

```
<binding name="binding" package="com.test.jibx">
   <mapping class="com.test.jibx.RootElement" name="Root">
       <value name="Code" field="code"/>
       <structure name="SubElement">
           <value name="Desc" field="desc"/>
       </structure>
   </mapping>
</binding> 
```

当我尝试绑定此 XML 时，我收到以下错误消息。

```
Nonstatic field desc not found in class com.test.jibx.RootElement 
```

如何绑定或映射静态类？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:12:05.140

[http://jibx.sourceforge.net/binding/tutorial/binding-advanced.html](http://jibx.sourceforge.net/binding/tutorial/binding-advanced.html)

阅读页面的第一部分：内部类由标准 java $ 表示法表示。

# internationalization - Wicket 中表单组件的国际化标签

> ID：11393610
> 
> 赞同：3
> 
> 时间：2012-07-09T10:52:51.947
> 
> 标签：internationalization, wicket

如何为我的表单组件正确创建国际化标签，以便在显示反馈消息时显示国际化字段名称而不是 java 代码中的字段名称？

我读过这个：

[https://cwiki.apache.org/WICKET/everything-about-wicket-internationalization.html](https://cwiki.apache.org/WICKET/everything-about-wicket-internationalization.html)

以及 wicket 的 xhtml 标签的文档：

[https://cwiki.apache.org/WICKET/wickets-xhtml-tags.html](https://cwiki.apache.org/WICKET/wickets-xhtml-tags.html)

```
<label wicket:for="name">
     <wicket:label>
         <wicket:message key="label.name"/>
     </wicket:label>
</label>
<input wicket:id="name" type="text" wicket:message="placeholder:label.name" /> 
```

这会导致以下错误：

```
Last cause: Expected close tag for '<wicket:label>' Possible attempt to embed 
component(s) '<wicket:message key="label.name"/>' in the body of this 
component which discards its body 
```

如果我`wicket:message`用一些任意文本替换它，它会在任何关联的反馈消息中显示文本。

（有一个相关的 jira 问题：[https](https://issues.apache.org/jira/browse/WICKET-3903) ://issues.apache.org/jira/browse/WICKET-3903但是我仍然不明白已经做了什么来解决这个问题以及我必须做什么......）

刚刚发现在java中有一种方法可以做到这一点：

```
add(new TextField<String>("name").setRequired(true).setLabel(new Model<String>(getString("label.name")))); 
```

是否有可能以更舒适的方式做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:24:46.490

我刚刚测试了以下内容：

```
<form wicket:id="form">
        <label for="input"><wicket:message key="input">some input</wicket:message></label>
        <input wicket:id="input" type="text" name="input">
        <input type="submit" value="submit">
 </form> 
```

在java类中：

```
Form<HomePage> form = new Form<HomePage>("form"
                              , new CompoundPropertyModel<HomePage>(this));
    wmc.add(form);

    TextField textField = new TextField("input");
    textField.setRequired(true);
    form.add(textField); 
```

在我提供的属性文件中：

```
input=SomeInputField 
```

这导致了以下屏幕（如果我将所需字段留空并按提交。

![enter image description here](../Images/8355cd806e159c93dbf83ca1c5d9dc7b.png)

这是你想要的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T08:57:35.667

这是[@bert 的](https://stackoverflow.com/a/11394100/851811)另一种方法，它一直对我有用（不知道`<wicket:label>`）

发生验证错误时显示的文本`FormComponent`可以通过 指定[`FormComponent.setLabel(IModel)`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/form/FormComponent.html#setLabel(org.apache.wicket.model.IModel))。显示的文本将是`IModel`'s的结果`getObject()`。

```
TextField comp = new TextField("comp");
// Use internationalized text from XML resource file
comp.setLabel(new StringResourceModel("formResources.comp.label", this, null)); 
```

Notice this has nothing to do with `<label>` nor [`FormComponentLabel`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/form/FormComponentLabel.html). `FormComponentLabel` is a component that can be used to model `<label>` tags.

You could even subclass FormComponentLabel to provide the label text based on `FormComponent.getLabel()`, and maybe output an extra mark when the field is required:

```
public class MyLabel extends SimpleFormComponentLabel{
    private boolean required;
    public MyLabel (String id, LabeledWebMarkupContainer labelProvider) {
    super(id, labelProvider);
            if (labelProvider instanceof FormComponent){
                required = ((FormComponent)labelProvider).isRequired();
        }
    }

    protected void onComponentTagBody(final MarkupStream markupStream, 
                                      final ComponentTag openTag) {
        String mark = "";
        if (required){
            // could be for instance "*"
            mark = getString("formResources.requiredField"); 
        }
        String text = getModelObjectAsString() + mark;
        replaceComponentTagBody(markupStream, openTag, text);
    }
}

{
TextField component = new TextField("component");
component.setRequired(true);
component.setOutputMarkupId(true);
IModel labelModel = new StringResourceModel("formResources.component.label", 
                                            this, null); 
component.setLabel(labelModel);
add(component);
add(new MyLabel("componentLabel", component);
}

<label wicket:id="componentLabel"/>
<input type="text" wicket:id="component"/> 
```

This way you would have clean way of

1.  Setting the `FormComponent`'s text to an internationalized resource string
2.  Reusing exactly the same resource string transparently for the `<label>` tag and even adding custom marks to it based on `FormComponent`'s properties.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-29T14:16:58.760

Another alternative is to use the key attribute of `<wicket:label/>`, like so:

```
<label wicket:for="name">
   <wicket:label key="label.name">Placeholder label</wicket:label> 
</label>
<input wicket:id="name" type="text"/> 
```

Unfortunately this attribute is not documented on the wiki page describing wicket's xhtml tags. All attributes supported are documented using JavaDoc in the class handling the tag (`org.apache.wicket.markup.html.form.AutoLabelTextResolver`).

The advantage of this alternative is that there is no additional coding required.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-23T23:44:19.537

Wicket throws an exception to tell you that your `<wicket:message>` tag will be removed because the body of the `<wicket:label>` tag is replaced. The problem is you cannot nest the `<wicket:message>` tag inside the `<wicket:label>` tag (and shouldn't need to).

either this (Option 1):

```
<label wicket:for="name">
     <wicket:label key="label.name"/>
</label>
<input wicket:id="name" type="text /> 
```

or this (Option 2):

```
<label wicket:for="name">
     <wicket:message key="label.name"/>
</label>
<input wicket:id="name" type="text /> 
```

should work for you and result in HTML something like the following (assuming the properties file contains `label.name=Name`):

```
<label for="someMarkupId">
    Name
</label>
<input id="someMarkupId" type="text" /> 
```

The difference is that if you set the label for the component through the Java code like so:

```
component.setLabel(new Model("value set in code")); 
```

then using the Option 1 will result in the label being set to "value set in code", while using Option 2 will still result in the label set to "Name". Also if the label is set through Java code, and the key is missing from the properties file the Option 2 will throw an exception, while Option 1 will simply use the value set in the code.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-29T10:06:47.777

I prefer this:

```
<label wicket:for="name"><wicket:label />:</label>
<input type="text" wicket:id="name"></input> 
```

Just make sure to set the label in the `FormComponent` using `setLabel`, so the only java needed is:

```
add(new TextField("name", nameModel).setLabel(Model.of("i18n.name"))); 
```

This will be rendered as (in Dutch):

```
<label id="name63-w-lbl" for="name63">Naam:</label>
<input type="text" value="" name="name" id="name63"> 
```

# excel - 在 Excel 工作表单元格中导出数据

> ID：11393611
> 
> 赞同：1
> 
> 时间：2012-07-09T10:52:52.017
> 
> 标签：excel, asp-classic

我正在以经典 asp 格式导出 excel 工作表中的数据。我正在使用外部表方法在 Excel 表中导出数据。

我想知道有没有办法将数据导出到 Excel 工作表单元格中。因为当我使用导出的文件进行导入时，我会向我显示错误。

问候和感谢，

果冻赛尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:39:00.840

也许不完全是您所需要的，但这有效：

```
<%
  Set ExcelApp = CreateObject("Excel.Application")
  ExcelApp.Application.Visible = True
  ExcelApp.DisplayAlerts = False
  Set ExcelBook = ExcelApp.Workbooks.Add
  ExcelBook.Worksheets(1).Cells(1, 1).Font.Size = 12
  ExcelBook.Worksheets(1).Cells(1, 1).Font.Bold = True
  ExcelBook.Worksheets(1).Cells(1, 1).Value="Hello"
  ExcelBook.SaveAs Server.MapPath(".") & "\Hello.xls"
  ExcelApp.Application.Quit
  Set ExcelApp = Nothing
%> 
```

# php - PHP输出嵌套的子节点

> ID：11393612
> 
> 赞同：0
> 
> 时间：2012-07-09T10:52:53.323
> 
> 标签：php, xml, dom

我正在尝试将 xml 文件输出到一个数组，然后输出到屏幕。xml 文件加载我知道它会加载，因为我可以输出 entry > Id 但我无法访问它的子节点。我需要位于的数据。

```
content > s:organisationSummay
content > s:organisationSummay > s:address
content > s:organisationSummay > s:geographicCoordinates 
```

我将如何访问位于 s:organisationSummay ,s:address, s:geographicCoordinates 中的数据，以便我可以为该子节点中的每个项目获取ElementsByTagName。

```
$doc2 = new DOMDocument();
$url  = 'http://v1.syndication.nhschoices.nhs.uk/organisations/'.$_POST['ServiceType'].'/postcode/'.$_POST['PostCode'].'.xml?apikey=??&range=50';
echo $url;

$doc2->load($url);
$arrFeeds = array();

foreach ($doc2->getElementsByTagName('entry') as $node) 
{
  echo $node->getElementsByTagName($content->'s:name');

  $itemRSS = array (
    'PracticeName' => $organisationSummary->getElementsByTagName('s:name')->item(0)->nodeValue
  );

  array_push($arrFeeds, $itemRSS);
} 
```

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns:s="http://syndication.nhschoices.nhs.uk/services" xmlns="http://www.w3.org/2005/Atom">
  <title type="text">NHS Choices - GP Practices Near Postcode - ls1- Within 50km</title>
  <id>http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/postcode/bd164jt?range=50</id>
  <rights type="text">© Crown Copyright 2009</rights>
  <updated>2012-07-06T10:24:46+01:00</updated>
  <category term="Search"/>
  <logo>http://www.nhs.uk/nhscwebservices/documents/logo1.jpg</logo>
  <author>
    <name>NHS Choices</name>
    <uri>http://www.nhs.uk</uri>
    <email>webservices@nhschoices.nhs.uk</email>
  </author>
  <link rel="self" type="application/xml" title="NHS Choices - GP Practices Near Postcode - ;ls1 - Within 50km" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/postcode/ls1?apikey=??&amp;range=50"/>
  <link rel="first" type="application/xml" title="first" length="1000" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/postcode/ls1?apikey=??&amp;range=50&amp;page=1"/>
  <link rel="next" type="application/xml" title="next" length="1000" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/postcode/Ls1?apikey=??&amp;range=50&amp;page=2"/>
  <link rel="last" type="application/xml" title="last" length="1000" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/postcode/LS1?apikey=??&amp;range=50&amp;page=10"/>
  <link rel="alternate" title="NHS Choices - Find and choose services - GP Practices" href="http://www.nhs.uk/ServiceDirectories/pages/ServiceSearch.aspx?ServiceType=GP"/>
  <s:SearchCoords>439300,411100</s:SearchCoords>
  <entry>
    <id>http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/1</id>
    <title type="text">Medical Practice</title>
    <updated>2012-07-06T09:24:46Z</updated>
    <link rel="self" title="Medical Practice" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/1?apikey=??"/>
    <link rel="alternate" title="Medical Practice" href="http://www.nhs.uk/ServiceDirectories/Pages/GP.aspx?pid=1"/>
    <content type="application/xml">
      <s:organisationSummary>
        <s:name>Medical Practice</s:name>
        <s:address>
          <s:addressLine>Health Care Centre</s:addressLine>
          <s:addressLine>2</s:addressLine>
          <s:addressLine>Town</s:addressLine>
          <s:addressLine>Yorkshire</s:addressLine>
          <s:postcode>?</s:postcode>
        </s:address>
        <s:contact type="General">
          <s:telephone>5558383</s:telephone>
        </s:contact>
        <s:geographicCoordinates>
          <s:northing>438880</s:northing>
          <s:easting>411444</s:easting>
          <s:longitude>-1.82821202227791</s:longitude>
          <s:latitude>53.996218047559</s:latitude>
        </s:geographicCoordinates>
        <s:Distance>0.5</s:Distance>
      </s:organisationSummary>
    </content>
  </entry>
  <entry>
    <id>http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/2</id>
    <title type="text">Surgery</title>
    <updated>2012-07-06T09:24:46Z</updated>
    <link rel="self" title="Surgery" href="http://v1.syndication.nhschoices.nhs.uk/organisations/gppractices/1?apikey=??"/>
    <link rel="alternate" title="Surgery" href="http://www.nhs.uk/ServiceDirectories/Pages/GP.aspx?pid=2"/>
    <content type="application/xml">
      <s:organisationSummary>
        <s:name>Surgery</s:name>
        <s:address>
          <s:addressLine>Healthcare Centre</s:addressLine>
          <s:addressLine>Kings</s:addressLine>
          <s:addressLine>Town</s:addressLine>
          <s:postcode>?</s:postcode>
        </s:address>
        <s:contact type="General">
          <s:telephone>555555</s:telephone>
          <s:email>Email</s:email>
        </s:contact>
        <s:geographicCoordinates>
          <s:northing>78421</s:northing>
          <s:easting>484100</s:easting>
          <s:longitude>-1.828987402220691</s:longitude>
          <s:latitude>53.987218047559</s:latitude>
        </s:geographicCoordinates>
        <s:Distance>0.5</s:Distance>
      </s:organisationSummary>
    </content>
  </entry>

</feed> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:53:33.880

这是一个命名空间文档，因此您需要使用正确的命名空间方法，例如[`DOMDocument::getElementsByTagNameNS`](http://www.php.net/manual/en/domdocument.getelementsbytagnamens.php).

此外，您的循环有很多错误，我怀疑您要么没有包含所有代码，要么您真的误解了 DOMDocument 的工作原理。

```
$NS = array(
    's'    => "http://syndication.nhschoices.nhs.uk/services",
    'atom' => "http://www.w3.org/2005/Atom",
);

$entries = array();

foreach ($doc2->getElementsByTagNameNS($NS['s'], 'organisationSummary') as $node) 
{
    $entries[] = array(
        'name'    => trim($node->getElementsByTagNameNS($NS['s'], 'name')->item(0)->textContent),
        'address' => keyByElementName($node->getElementsByTagNameNS($NS['s'], 'address')->item(0)),
        'geographicCoordinates' => keyByElementName($node->getElementsByTagNameNS($NS['s'], 'geographicCoordinates')->item(0)),
    );
}

function keyByElementName(DOMNode $node)
{
    $elem = array();
    foreach ($node->childNodes as $child) {
        if ($child->nodeType===XML_ELEMENT_NODE) {
            $elem[$child->localName] = trim($child->textContent);
        }
    }
    return $elem;
} 
```

但是，请考虑使用[`DOMXPath`](http://php.net/manual/en/class.domxpath.php)or [`SimpleXML`](http://php.net/manual/en/book.simplexml.php)，因为它们比 dom 遍历更容易。

# regex - 替换包含 CRLF 的字符串？

> ID：11393616
> 
> 赞同：1
> 
> 时间：2012-07-09T10:53:00.787
> 
> 标签：regex, bash, sed

我正在重新格式化文件，我想执行以下步骤：

1.  用临时字符序列（`$CRLF$`或其他东西）替换双 CRLF
2.  删除整个文件中的所有 CRLF
3.  返回并更换双CRLF。

所以像这样输入：

```
This is a paragraph
of text that has
been manually fitted
into a certain colum
width.

This is another
paragraph of text
that is the same. 
```

会变成

```
This is a paragraph of text that has been manually fitted into a certain colum width.

This is another paragraph of text that is the same. 
```

似乎这应该可以通过一些简单的`sed`程序来管道输入，但我不知道如何引用`CRLF`in `sed`（使用 in `sed 's/<CRLF><CRLF>/$CRLF$/'`）。或者也许有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:08:01.710

您可以使用 sed 以 {CRLF} 结尾装饰所有行：

```
sed 's/$/<CRLF>/' 
```

然后用 tr 删除所有 \r\n

```
| tr -d "\r\n" 
```

然后用 \n 替换双 CRLF

```
| sed 's/<CRLF><CRLF>/\n/g' 
```

并删除剩余的 CRLF。

有一个单线 sed 可以在一个周期内完成所有这些操作，但我现在似乎找不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:17:53.930

试试下面的：

```
cat file.txt | sed 's/$/ /;s/^ *$/CRLF/' | tr -d '\r\n' | sed 's/CRLF/\r\n'/ 
```

这不是您给出的方法；它的作用如下：

1.  在每一行的末尾添加一个空格。
2.  将任何仅包含空格（即空白行）的行替换为“CRLF”。
3.  删除任何换行符（CR 和 LF）。
4.  用 Windows 样式的换行符替换任何出现的字符串“CRLF”。

这对我来说适用于 Cygwin bash。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:31:54.273

### 重新定义问题

看起来您*真正*想要做的是重新排列您的段落和单行间距。有多种方法可以做到这一点。

### 非 Sed 解决方案

如果你不介意在 coreutils 之外使用一些包，你可以使用一些额外的 shell 实用程序来使这变得简单：

```
dos2unix /tmp/foo
fmt -w0 /tmp/foo | cat --squeeze-blank | sponge /tmp/foo
unix2dos /tmp/foo 
```

Sponge 来自*moreutils*包，它允许你编写你正在阅读的同一个文件。*dos2unix*（或者*tofrodos* ）包将允许来回转换你的行尾，以便更容易地与期望 Unix 风格的行尾的工具集成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T15:51:16.753

这可能对您有用（GNU sed）：

```
sed ':a;$!{N;/\n$/{p;d};s/\r\?\n/ /;ba}' file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-27T15:19:10.957

我错过了为什么这不容易？

添加 CRLF：

> sed -es/\s+$/$'\r\n'/ < index.html > index_CRLF.html

删除 CRLF... 去 unix：

> sed -es/\s+$/$'\n'/ < index_CRLF.html > index.html

# magento - 折扣后应用的 Magento 免运费购物车规则

> ID：11393617
> 
> 赞同：3
> 
> 时间：2012-07-09T10:53:06.050
> 
> 标签：magento

我有一个我找不到解决方案的问题。我有一个购物车规则，为订单小计 > 75 美元提供免费送货服务。但是，如果使用折扣代码，则尽管订单总金额低于 75 美元，但仍会再次应用此规则。没有税收和其他费用。只有当他们花费 > 75 美元时，我才想免费送货。任何想法我该如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T07:21:34.413

您是对的，购物车规则仅适用于购物车小计，免费送货承运人模型也是如此。使用一个小的重写就可以改变freeshipping模型的行为。

首先，停用允许免费送货的购物车规则。然后转到`System > Configuration > Shipping Methods`并激活免费送货承运商，为其提供 75 美元的“最低订单金额”。

接下来，我们需要添加重写，以便免费送货模型使用折扣值而不是小计。

添加一个带有相应模块注册文件的模块 My_Shipping。由于您在 stackoverflow 上提问，我假设您熟悉创建 Magento 模块。然后`My/Shipping/etc/config.xml`使用以下重写声明添加文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <global>
        <models>
            <shipping>
                <rewrite>
                    <carrier_freeshipping>My_Shipping_Model_Freeshipping</carrier_freeshipping>
                </rewrite>
            </shipping>
        </models>
    </global>
</config> 
```

现在唯一缺少的是重写的载体模型。以下代码实现了您需要的更改：

```
class My_Shipping_Model_Freeshipping extends Mage_Shipping_Model_Carrier_Freeshipping
{
    /**
     * Force the original free shipping class to use the discounted package value.
     *
     * The package_value_with_discount value already is in the base currency
     * even if there is no "base" in the property name, no need to convert it.
     *
     * @param Mage_Shipping_Model_Rate_Request $request
     * @return Mage_Shipping_Model_Rate_Result
     */
    public function collectRates(Mage_Shipping_Model_Rate_Request $request)
    {
        $origBaseSubtotal = $request->getBaseSubtotalInclTax();
        $request->setBaseSubtotalInclTax($request->getPackageValueWithDiscount());
        $result = parent::collectRates($request);
        $request->setBaseSubtotalInclTax($origBaseSubtotal);
        return $result;
    }
} 
```

就是这样。现在，如果包括折扣在内的小计高于 75 美元，则可以使用免费送货方式。否则客户是看不到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:34:33.103

不幸的是，这是我注意到的一个错误。他们根据未贴现值计算小计。您可以解决此问题的一种方法是为您的折扣代码规则设置“停止处理规则”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T08:21:33.560

你可以试试跟班。这必须重写模型“Mage_SalesRule_Model_Rule_Condition_Address”。这会将“折扣小计”选项添加到管理面板中销售规则管理的条件选项中。

```
class YourCompany_SalesRule_Model_Rule_Condition_Address extends Mage_SalesRule_Model_Rule_Condition_Address {

/**
 * (non-PHPdoc)
 * @see Mage_SalesRule_Model_Rule_Condition_Address::loadAttributeOptions()
 */
public function loadAttributeOptions()
{
    parent::loadAttributeOptions();

    $attributes = $this->getAttributeOption();

    $attributes['base_subtotal_with_discount'] = Mage::helper('salesrule')->__('Subtotal with discount');

    $this->setAttributeOption($attributes);

    return $this;
}

/**
 * (non-PHPdoc)
 * @see Mage_SalesRule_Model_Rule_Condition_Address::getInputType()
 */
public function getInputType()
{
    if ($this->getAttribute() == 'base_subtotal_with_discount')
        return 'numeric';

    return parent::getInputType();
}

/**
 * Add field "base_subtotal_with_discount" to address.
 * It is need to validate the "base_subtotal_with_discount" attribute
 * 
 * @see Mage_SalesRule_Model_Rule_Condition_Address::validate()
 */
public function validate(Varien_Object $address)
{
    $address->setBaseSubtotalWithDiscount($address->getBaseSubtotal() + $address->getDiscountAmount());

    return parent::validate($address);
} 
```

}

# c# - MVC 3 PartialView 表单 - 提交更改 URL

> ID：11393621
> 
> 赞同：1
> 
> 时间：2012-07-09T10:53:10.577
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-partialview

我有一个 MVC 3 项目，它有一个简单的表单，包含在 PartialView 中：（表单位于`<div id="form"> </div>`加载此部分视图的“”中

```
 @using (Ajax.BeginForm("Submit", "Form", new AjaxOptions
                                                           {
                                                               HttpMethod = "POST",
                                                               UpdateTargetId = "form"
                                                           }))
{ .... } 
```

我的控制器是：

```
 [HttpPost]
    public PartialViewResult Submit(FormElement form)
    {
 ....
  return PartialView("_RequestFormSubmitted");
    } 
```

我遇到的问题是，当我提交表单时，我被定向到查看结果 URL (/Form/Submit/)，而不是停留在当前页面上，并返回部分视图。

我错过了一些非常明显的东西吗？我可能会错过脚本参考吗？

我在页面末尾包含以下脚本：

```
 <script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

编辑：

我的表单现在在 HTML 中呈现如下

```
<form action="/Form/Submit" data-ajax="true" data-ajax-method="Post" data-ajax-mode="replace" data-ajax-update="#form" id="form0" method="post">    <hgroup>
        <h6 class="icon"><img src="/Content/img/icon/dining.png"> YOUR<br>DINING<br>REQUEST</h6>
    </hgroup>
<ul>

    <li class="field type-select">
        <label for="Name">Your name</label>
        <input class="text-box single-line" data-val="true" data-val-required="The Your name field is required." id="Name" name="Name" type="text" value="">
        <span class="field-validation-valid" data-valmsg-for="Name" data-valmsg-replace="true"></span>
    </li>
    <li>
        <input type="submit" value="Submit">
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:18:42.233

对，解决了：我没有包括

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

（但是我有“非 ajax 的！”）

无论如何感谢大家的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:00:03.813

你需要使用

`new AjaxOptions { InsertionMode = InsertionMode.Replace, HttpMethod = "Post", UpdateTargetId = "listForm" }`

在您的提交链接上

# c# - params object[] 方法参数装箱？

> ID：11393624
> 
> 赞同：1
> 
> 时间：2012-07-09T10:53:21.810
> 
> 标签：c#, object, casting, params, boxing

好的，所以当我有一个看起来像的方法时

```
getPacket(params object[] inputs)
{

 } 
```

输入数组是装箱变量的数组还是只是原始类型的数组（我发送多种不同的类型，例如short、int、bool）

如果它们被装箱，您可以在不知道原始类型的情况下对原始类型进行运行时拆箱吗？

如果它们没有装箱，我如何判断它是 int、short、bool 等，因为我希望能够创建一个方法，将来自不同类型的整个堆栈的字节数组组合在一起。

另一个问题，数组中的对象是否与它们在方法调用中传递的顺序相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:56:35.620

数组中的对象将与传递给方法的顺序相同，如果源参数是值类型，它们将被装箱。

您可以使用`is`关键字检查每个对象的基础类型并采取相应措施，例如：

```
static void Main(string[] args)
{
    Receive(1, true);
}

static void Receive(params object[] values)
{
    foreach (var v in values)
    {
        if (v is int)
        {
            // ...
        }
        else if (v is bool)
        {
            // ...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:56:53.843

如果您有一个对象数组，那么是的，例如，如果您将整数放入数组中，它们将被装箱。在不知道所涉及的实际类型的情况下，我不知道任何拆箱方法，因此您必须将数组中的项目转换为它们实际代表的任何值。

# c# - LINQ C#按单词出现的复杂排序列表

> ID：11393627
> 
> 赞同：-6
> 
> 时间：2012-07-09T10:53:34.320
> 
> 标签：c#, linq

> **可能重复：**
> [按 LINQ C# 中出现的单词对列表进行排序](https://stackoverflow.com/questions/11392014/sort-list-by-occurrence-of-a-word-by-linq-c-sharp)

我在这里发布了一个类似的问题，并得到了一个不起作用的答案。这是我需要排序的数据。

```
 ID     Title
  ---    ------
  1      JCB Excavator - ECU P/N: 728/35700
  2      Geo Prism 1995 Geo cart Geo001 -Geo ABS #16213899
  3      Geo Prism 1995 - Geo ABS #16213899
  4      Geo Prism 1995 - ABS #16213899
  5      Wie man BBA reman erreicht
  6      this JCB test JCB
  7      Ersatz Airbags, Gurtstrammer und Auto Körper Teile 
```

我的搜索数据就像“JCB GEO”。我想对它进行排序，使数据变得像

```
 ID     Title
  ---    ------
  2      Geo Prism 1995 Geo cart Geo001 -Geo ABS #16213899
  3      Geo Prism 1995 - Geo ABS #16213899
  4      Geo Prism 1995 - ABS #16213899
  6      this JCB test JCB
  1      JCB Excavator - ECU P/N: 728/35700
  5      Wie man BBA reman erreicht
  7      Ersatz Airbags, Gurtstrammer und Auto Körper Teile 
```

首先出现的行是数据时间最长的行。所以对于**GEO**，这个词在大多数行中都有最长的时间。ID 2 有最大时间，单词 GEO，下一行有 2 个 Geo 单词...

我说我发布了这个问题并在下面得到了答案，这不起作用。

```
List<SearchResult> list = new List<SearchResult>() {
  new SearchResult { Description = "JCB Excavator - ECU P/N: 728/35700" },
  new SearchResult { Description = "Geo Prism 1995 - ABS #16213899" },
  new SearchResult { Description = "Geo Prism 1995 - ABS #16213899" },
  new SearchResult { Description = "Geo Prism 1995 - ABS #16213899" },
  new SearchResult { Description = "Wie man BBA reman erreicht" },
  new SearchResult { Description = "this test JCB" },
  new SearchResult { Description = "Ersatz Airbags, Gurtstrammer und Auto Körper  Teile"   }            
};
var wordsToFind = "Geo JCB".Split();
var values = list.Select(x => new { SearchResult = x, Count = x.Description.Split(' ')
  .Where(c => wordsToFind .Contains(c)).Count() })
  .OrderByDesending(x => x.Count)
  .Select(x => x.SearchResult); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:06:04.830

也许你可以这样做？我用来测试的主控制台程序

```
static void Main(string[] args)
        {
            var list = SearchResult.GetResult();
            var wordArray = "Geo,JCB".Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
            list.Sort((a, b) => {
                int sum1 = 0, sum2=0;
                foreach (var item in wordArray)
                {
                    sum1 += Regex.Matches(a.Description, item).Count;
                    sum2 += Regex.Matches(b.Description, item).Count;
                }

                if (sum1 < sum2) return 1;
                else if (sum1 > sum2) return -1;
                else return 0;
            });
            foreach (var item in list)
            {
                Console.WriteLine(item.Description);
            }
            Console.ReadKey();
        } 
```

搜索结果类

```
public class SearchResult
    {
        public string Description { get; set; }
        public static List<SearchResult> GetResult()
        {
            var list = new List<SearchResult>()
            {
                new SearchResult(){Description = "JCB Excavator - ECU P/N: 728/35700"},
                new SearchResult(){Description = "Geo Prism 1995 Geo cart Geo001 -Geo ABS #16213899"},
                new SearchResult(){Description = "Geo Prism 1995 - Geo ABS #16213899"},
                new SearchResult(){Description = "Geo Prism 1995 - ABS #16213899"},
                new SearchResult(){Description = "Wie man BBA reman erreicht"},
                new SearchResult(){Description = "this JCB test JCB"},
                new SearchResult(){Description = "Ersatz Airbags, Gurtstrammer und Auto Körper  Teile"}
            };
            return list;
        }
    } 
```

根据您的要求返回正确的输出...

```
Geo Prism 1995 Geo cart Geo001 -Geo ABS #16213899
Geo Prism 1995 - Geo ABS #16213899
this JCB test JCB
Geo Prism 1995 - ABS #16213899
JCB Excavator - ECU P/N: 728/35700
Ersatz Airbags, Gurtstrammer und Auto Körper  Teile
Wie man BBA reman erreicht 
```

# wordpress - 在每个 WordPress 帖子图像周围添加一个 Div

> ID：11393628
> 
> 赞同：0
> 
> 时间：2012-07-09T10:53:35.887
> 
> 标签：wordpress

我需要能够将放置在帖子中的所有图像包装在 div 中，以便我可以为图像添加自定义样式。（我需要每个图像上的图像边框。）

我怎样才能得到它，以便它自动在帖子内容中的每个图像周围添加一个 div？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:54:34.390

你为什么不给每个`<img>`标签应用一个类，而不是用一个 div 包围每个图像？

因此，您可以在 CSS 文件中添加：

```
img .border
{
/* your border code here */
} 
```

对于 HTML 中的每个图像，只需添加`class="border"`.

我还建议研究一些 CSS3 -`border-image`可能会提供解决方案：[http ://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

# c# - 在文本文件c#中复制行号

> ID：11393633
> 
> 赞同：0
> 
> 时间：2012-07-09T10:53:47.380
> 
> 标签：c#, text-files

我有 2 个文件文件 A 和文件 B 如何需要复制文件 A 上的第 30 行并将其粘贴到文件 B 中第 30 行的顶部我可以在 C# 中执行此操作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T10:55:45.187

这是一个*非常*简单的方法，假设文件 B 小到可以读入内存：

```
string lineFromA = File.ReadLines("fileA.txt").Skip(29).First();
string[] linesFromB = File.ReadAllLines("fileB.txt");
linesFromB[29] = lineFromA;
File.WriteAllLines("fileC.txt", linesFromB); 
```

这假设您使用的是 .NET 4 及其惰性[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)方法。如果不是，最简单的方法是将*两个*文件完全读入内存，使用[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines)两次：

```
string[] linesFromA = File.ReadAllLines("fileA.txt");
string[] linesFromB = File.ReadAllLines("fileB.txt");
linesFromB[29] = linesFromA[29];
File.WriteAllLines("fileC.txt", linesFromB); 
```

肯定有更*有效*的方法，但除非我有任何理由需要更有效的方法，否则我会选择上述方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:52:36.393

如果您在写入端使用流写入器，您将获得一个不使用大量内存且也可用于较大文件的例程。

```
 string lineFromA = File.ReadLines("fileA.txt").Skip(29).First();
        using (var fileC = File.AppendText("fileC.txt"))
        {
            int i = 0;
            foreach (var lineFromB in File.ReadLines("fileB.txt"))
            {
                i++;
                fileC.WriteLine(i != 30 ? lineFromB : lineFromA);
            }
        } 
```

# javascript - qunit deepEqual 测试在相同对象上失败

> ID：11393635
> 
> 赞同：0
> 
> 时间：2012-07-09T10:53:52.430
> 
> 标签：javascript, qunit

为什么以下测试失败？

```
function queryString2Map(queryString) {
    var pairs = [], i, keyValuePair, key, value, map = {};
    if (queryString !== '') {
        pairs = queryString.split('&');
        for (i = 0; i < pairs.length; i += 1) {
            keyValuePair = pairs[i].split('=');
            key = decodeURIComponent(keyValuePair[0]);
            value = (keyValuePair.length > 1) ? decodeURIComponent(keyValuePair[1]) : undefined;
            map[key] = value;
        }
    }
    return map;
}

test("queryString2Map", 1, function () {
    var qs = 'a=123&bob=%20a%20&symbols=%22%24%25%5E%26%3C%3E%2F%5C%3A~%40%3B%23&undef';
    var map = {
        'a': '123',
        'bob': ' a ', 
        'symbols': '"$%^&<>/\\:~@;#',
        'undef': undefined
    };
    deepEqual(queryString2Map(qs), map, "querystring converted to map");
}); 
```

queryString2Map 返回的对象与测试中的地图对象相同，那么为什么测试会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T00:28:16.937

尝试使用 propEquals，父原型对象之间可能存在一些未显示的差异。

# c++ - 发布模式下的快照不正确，在调试模式下正常工作

> ID：11393638
> 
> 赞同：1
> 
> 时间：2012-07-09T10:54:07.207
> 
> 标签：c++, windows, file, file-io, snapshot

我有程序拍摄磁盘中所有卷的快照。它将使用`FSCTL_GET_VOLUME_BITMAP`. 它将数据写入另一个文件。

一切正常，但是当我按照指示更改代码时却不行：

如果卷包含操作系统，那么我会将一些驱动程序文件复制到 system32/驱动程序中，因此在我读取数据之前发生了写入。

`FSCTL_GET_VOLUME_BITMAP`我只读取了在写入完成后使用的 Volumebitmap 。但它只返回新复制文件的值。所有其他已经存在的数据都是 0。

当我尝试在调试模式下调试代码时，它完全需要旧数据 + 新数据。但是当我尝试在发布模式下运行时，它给出的更改值仅是新复制的文件。

在调试和发布模式下会出现什么问题？

我尝试设置属性 C/C++ 优化，整个程序优化 -> 是，然后它提供了错误的值。但是，如果我将其设置为“否”，那么它会提供正确的结果。

所以问题发生在Release模式。

# android - Android，为什么 HttpPost 方法在 Android v2.3 和 Android v4.0.3 中返回两个不同的结果？

> ID：11393644
> 
> 赞同：4
> 
> 时间：2012-07-09T10:54:27.947
> 
> 标签：android, proxy, http-post

我创建了一个示例代码来比较 HttpPost 方法在两个不同的 Android 操作系统 v2.3 和 v4.0 中的输出。我有一张使用运营商 3G 服务的 sim 卡。因此，我通过 3G 服务连接到 Internet。代理服务器地址和端口由移动运营商自动设置，两者相同。

我的代码是这样的：

```
public class MainActivity extends Activity {

    private final String TAG = "MainActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Log.i(TAG, "inside onCreate()...");

        ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetwork = connMgr.getActiveNetworkInfo();

        if (activeNetwork != null) {
            Log.i(TAG, "Internet connection found.");
            new MyAsyncTask().execute();
        } else
            Log.i(TAG, "Internet connection not found.");
    }

    private class MyAsyncTask extends AsyncTask<Void, Void, Boolean> {
        @Override
        protected void onPreExecute() {
            Log.i(TAG, "onPreExecute()...");
        }

        @Override
        protected Boolean doInBackground(Void... arg0) {
            boolean status = false;

            String xml = postData();    
            if(xml != null)
                status = true;

            return status;
        }

        @Override
        protected void onPostExecute(Boolean result) {
            if (result) 
                Log.i(TAG, "Process finished successfully...");
        }
    }

    private String postData() {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://demo.excelforce.com.my/mobiletraderjssb/dopwd.aspx?");

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
        nameValuePairs.add(new BasicNameValuePair("u", Uri.encode("test01")));
        nameValuePairs.add(new BasicNameValuePair("p", Encryption.encrypt("112233")));
        nameValuePairs.add(new BasicNameValuePair("v", "1.1"));
        nameValuePairs.add(new BasicNameValuePair("t", "0"));

        try {
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            Log.i("Requestd Connection", httppost.getURI().toString());

            HttpResponse response = httpClient.execute(httppost);
            String responseBody = EntityUtils.toString(response.getEntity());
            Log.i("Server Response: ", responseBody);

            if (response.containsHeader("Set-Cookie")) {
                String sessionId = extractSessionId(response.getHeaders("Set-Cookie")[0].getValue());
//              PropertyManager.setSessionID(sessionId);
                Log.i("Session Id:", sessionId);
            } else
                Log.e("ERROR", "Response doesn't have Set-Cookie in header");

                return responseBody;

        } catch(UnsupportedEncodingException usee) {
            usee.printStackTrace();
        } catch(ClientProtocolException cpe) {
            cpe.printStackTrace();
        } catch(IOException ioe) {
            ioe.printStackTrace();
        }

        return null;
    }

    private String extractSessionId(String str) {
        String session = null;
        if (str!=null)
            session = str.substring(0, str.indexOf(";"));
        return session;
    }
} 
```

当我在 Android v2.3 设备（Samsung Galaxy S）上运行这个应用程序时，我的输出在 logcat 中是这样的：

```
07-09 18:21:11.031: I/MainActivity(1277): inside onCreate()...
07-09 18:21:11.035: I/MainActivity(1277): Internet connection found.
07-09 18:21:11.035: I/MainActivity(1277): onPreExecute()...
07-09 18:21:11.718: I/Requestd Connection(1277): http://demo.excelforce.com.my/mobiletraderjssb/dopwd.aspx?
07-09 18:21:13.941: I/Server Response:(1277): <TD ID="LGFLAG">S</TD><TD ID="LGMSG"></TD><TD ID="CLNT_0">CLNTXXX,EF TEST,C,001,</TD>
07-09 18:21:13.941: I/Session Id:(1277): ASPNETSESSIONID=jjodj3m22notn1m50oxs0u55
07-09 18:21:13.941: I/MainActivity(1277): Process finished successfully... 
```

而当我在 Android V4.0.3（Samsung Galaxy 2 或 HTC Xperia）上运行应用程序时，logcat 中的输出如下所示：

```
07-09 18:08:45.085: I/MainActivity(19358): inside onCreate()...
07-09 18:08:45.090: I/MainActivity(19358): Internet connection found.
07-09 18:08:45.090: I/MainActivity(19358): onPreExecute()...
07-09 18:08:45.155: I/Requestd Connection(19358): http://demo.excelforce.com.my/mobiletraderjssb/dopwd.aspx?
07-09 18:08:46.235: I/Server Response:(19358): <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
07-09 18:08:46.235: I/Server Response:(19358):     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
07-09 18:08:46.235: I/Server Response:(19358): <html xmlns="http://www.w3.org/1999/xhtml">
07-09 18:08:46.235: I/Server Response:(19358): <head>
07-09 18:08:46.235: I/Server Response:(19358): <title></title>
07-09 18:08:46.235: I/Server Response:(19358): </head>
07-09 18:08:46.235: I/Server Response:(19358): <body>
07-09 18:08:46.235: I/Server Response:(19358): <table>
07-09 18:08:46.235: I/Server Response:(19358): <tr>
07-09 18:08:46.235: I/Server Response:(19358): <td id="LGFLAG">S</td>
07-09 18:08:46.235: I/Server Response:(19358): <td id="LGMSG"></td>
07-09 18:08:46.235: I/Server Response:(19358): <td id="CLNT_0">CLNTXXX,EF TEST,C,001,</td>
07-09 18:08:46.235: I/Server Response:(19358): </tr>
07-09 18:08:46.235: I/Server Response:(19358): </table>
07-09 18:08:46.235: I/Server Response:(19358): </body>
07-09 18:08:46.235: I/Server Response:(19358): </html>
07-09 18:08:46.235: E/ERROR(19358): Response doesn't have Set-Cookie in header
07-09 18:08:46.440: I/MainActivity(19358): Process finished successfully... 
```

如您所见，我的 XML 数据由 HTML 代码包装。这个 HTML 代码来自哪里？有人说可能是因为移动运营商自动设置的代理服务器。这是对的吗？我认为它不应该是正确的，因为如果代理服务器在 v4.0.3 中操纵我的代码或向我的代码注入一些东西，为什么我对 Android v2.0 和 v3.0 没有相同的响应？是因为Android v4.0里面的bug吗？！！！

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:05:48.437

看起来缺少接受请求类型。

尝试添加类似的内容：

```
httppost.setHeader("Accept","application/xml"); 
```

如果没有，则设置 Apache HttpClient 登录：
[https](https://stackoverflow.com/a/3303131/538169)
://stackoverflow.com/a/3303131/538169 并查找请求中的差异。

# apache-flex - 将 Flash Builder 4.5 移动应用程序 TextArea 背景颜色设置为黑色，将字体颜色设置为白色

> ID：11393647
> 
> 赞同：1
> 
> 时间：2012-07-09T10:54:30.803
> 
> 标签：apache-flex, air, flex4.5, flex-mobile, flash-builder4.5

我正在 Flash Builder 4.5 中创建一个虚拟移动应用程序。在应用程序代码中，我使用的是 TextArea，并且在朗姆酒时间添加和删除 TextArea。现在我想将 TextArea 背景颜色设置为黑色，将字体颜色设置为白色。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:28:44.183

我必须说这不是很简单，但是您要查找的样式不是`backgroundColor`，而是[contentBackgroundColor](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/SkinnableTextBase.html#styleSummary)。它适用于所有扩展[SkinnableTextBase](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/SkinnableTextBase.html)的组件。

```
<s:TextArea color="0xffffff" contentBackgroundColor="0x000000" /> 
```

# asp.net - 在 asp.net 中使用 Http 模块配置 ETags

> ID：11393649
> 
> 赞同：3
> 
> 时间：2012-07-09T10:54:36.437
> 
> 标签：asp.net, etag

我正在使用 seo 优化和 yslow 优化我们公司的网站。但在 yslow 中，ETAGS 是 F 。我浏览了数十个网站和教程，最好的选择是使用 HTTP 模块。我已经这样做了，并尝试了几个模块，但没有一个显示结果。也许语法有问题，或者我注册错了。有人说最好使用 app_PostReleaseRequestState 而不是 OnPreSendRequestHeaders，因为堆崩溃了。我用过两者都没有结果。这里是：文件名是 etag，它在 app-code 文件夹中

网络配置：

```
<system.webServer>
        <modules runAllManagedModulesForAllRequests="true">
        <add type="CompressionModule" name="CompressionModule"/>
            <add type="ETags" name="ETags"/>
        <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </modules>
    </system.webServer> 
```

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
/// <summary>
/// Summary description for ETags
/// </summary>

    public class ETags : IHttpModule
    {
        public void Dispose() { }
        public void Init(HttpApplication app)
        {
            app.PostReleaseRequestState += new EventHandler(app_PostReleaseRequestState);

        }
        void app_PostReleaseRequestState(object sender, EventArgs e)
        {
            HttpContext.Current.Response.Headers.Remove("ETag");
            HttpContext.Current.Response.Headers.Remove("Server");
            HttpContext.Current.Response.Headers.Remove("X-AspNet-Version");
            HttpContext.Current.Response.Headers.Remove("X-Powered-By");
        }
        //public void Init(HttpApplication context)
        //{
        //    context.PreSendRequestHeaders += OnPreSendRequestHeaders;
        //}

        //void OnPreSendRequestHeaders(object sender, EventArgs e)
        //{
        //    HttpContext.Current.Response.Headers.Remove("ETag");
        //    HttpContext.Current.Response.Headers.Remove("Server");
        //    HttpContext.Current.Response.Headers.Remove("X-AspNet-Version");
        //    HttpContext.Current.Response.Headers.Remove("X-Powered-By");
        //}
    } 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:13:32.480

首先，您可以删除服务器中的服务器标签！不要让他一次又一次地放置它，然后您将其移除。

您甚至可以使用以下命令在 web.config 上执行此操作`customHeaders`：

```
<httpProtocol>
    <customHeaders>
        <remove name="X-Powered-By" />
        <remove name="X-UA-Compatible" />
        <remove name="ETag" />
    </customHeaders>
</httpProtocol> 
```

[ETag 或实体标签](http://en.wikipedia.org/wiki/HTTP_ETag)是标记页面的方式，然后在您的代码上查看页面是否已更改并需要更新。如果您看到 ETag，那么您的代码的某些部分会被添加到此检查中，我认为您必须保持原样，因为您破坏了程序的这个逻辑。

如果此 ETag 由服务器放置以标记图像或类似项目，您可以通过添加更多的静态内容来避免大多数此标记，这也可以在 iis 或 web.config 上完成。

```
<staticContent>
    <clientCache cacheControlMaxAge ="8.00:00:00" cacheControlMode="UseMaxAge" />
</staticContent> 
```

所以我认为你制作的模块对于这个认为是不必要的。

# javascript - Javascript 中的自定义警报无法正常工作

> ID：11393651
> 
> 赞同：1
> 
> 时间：2012-07-09T10:54:48.170
> 
> 标签：javascript, jquery, css, firefox-addon

我正在使用 addon-builder 为 Firefox 开发一个插件。我想用我的插件替换 Javascript 中的普通警报框。因此，我选择了使用 jQuery 的自定义警报框。jAlert 详细信息在[此处](http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/)给出。

现在，我制作了自定义警报（警报中带有标题和颜色）。它在某些网站上运行正常。但在某些网站上，默认 CSS 主导着我的 jQuery CSS，这会导致意外警报（丑陋警报）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:58:20.070

不是最好的解决方案，我通常会避免这种情况，但它仍然有效。

CSS 中使用的`!important`关键字将强制它覆盖任何其他当前设置。

即正常

```
.example {
    font-size: 14px;
} 
```

即强制

```
.example {
    font-size: 14px !important; 
} 
```

但是，尝试找出发生冲突的 CSS 样式，并可能更改它的应用顺序或命名（如果这是一个常见参数）。

# extjs - ExtJS 4 选择带有复选框标题的多个 CheckColumn 复选框

> ID：11393660
> 
> 赞同：6
> 
> 时间：2012-07-09T10:55:27.310
> 
> 标签：extjs, extjs4, extjs4.1

我有一列`checkcolumn`类型来启用切换布尔值。我希望能够一次切换该值的所有行。理想情况下，我可以在`checkcolumn`标题中添加一个复选框并监听更改。那可能吗？

我想指出，我不是在寻找一个复选框模型来选择行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T20:20:08.150

我为此创建了 Ext.ux.CheckColumn 的更新版本，只需在包含 extjs 代码后包含此代码：

```
Ext.define('Ext.ux.CheckColumn', {
    extend: 'Ext.grid.column.Column',
    alias: 'widget.checkcolumn',

    disableColumn: false,
    disableFunction: null,
    disabledColumnDataIndex: null,
    columnHeaderCheckbox: false,

    constructor: function(config) {

        var me = this;
        if(config.columnHeaderCheckbox)
        {
            var store = config.store;
            store.on("datachanged", function(){
                me.updateColumnHeaderCheckbox(me);
            });
            store.on("update", function(){
                me.updateColumnHeaderCheckbox(me);
            });
            config.text = me.getHeaderCheckboxImage(store, config.dataIndex);
        }

        me.addEvents(
            /**
             * @event checkchange
             * Fires when the checked state of a row changes
             * @param {Ext.ux.CheckColumn} this
             * @param {Number} rowIndex The row index
             * @param {Boolean} checked True if the box is checked
             */
            'beforecheckchange',
            /**
             * @event checkchange
             * Fires when the checked state of a row changes
             * @param {Ext.ux.CheckColumn} this
             * @param {Number} rowIndex The row index
             * @param {Boolean} checked True if the box is checked
             */
            'checkchange'
        );

        me.callParent(arguments);
    },

    updateColumnHeaderCheckbox: function(column){
        var image = column.getHeaderCheckboxImage(column.store, column.dataIndex);
        column.setText(image);
    },

    toggleSortState: function(){
        var me = this;
        if(me.columnHeaderCheckbox)
        {
            var store = me.up('tablepanel').store;
            var isAllChecked = me.getStoreIsAllChecked(store, me.dataIndex);
            store.each(function(record){
                record.set(me.dataIndex, !isAllChecked);
                record.commit();
            });
        }
        else
            me.callParent(arguments);
    },

    getStoreIsAllChecked: function(store, dataIndex){
        var allTrue = true;
        store.each(function(record){
            if(!record.get(dataIndex))
                allTrue = false;
        });
        return allTrue;
    },

    getHeaderCheckboxImage: function(store, dataIndex){

        var allTrue = this.getStoreIsAllChecked(store, dataIndex);

        var cssPrefix = Ext.baseCSSPrefix,
            cls = [cssPrefix + 'grid-checkheader'];

        if (allTrue) {
            cls.push(cssPrefix + 'grid-checkheader-checked');
        }
        return '<div class="' + cls.join(' ') + '">&#160;</div>'
    },

    /**
     * @private
     * Process and refire events routed from the GridView's processEvent method.
     */
    processEvent: function(type, view, cell, recordIndex, cellIndex, e) {
        if (type == 'mousedown' || (type == 'keydown' && (e.getKey() == e.ENTER || e.getKey() == e.SPACE))) {
            var record = view.panel.store.getAt(recordIndex),
                dataIndex = this.dataIndex,
                checked = !record.get(dataIndex),
                column = view.panel.columns[cellIndex];
            if(!(column.disableColumn || record.get(column.disabledColumnDataIndex) || (column.disableFunction && column.disableFunction(checked, record))))
            {
                if(this.fireEvent('beforecheckchange', this, recordIndex, checked, record))
                {
                    record.set(dataIndex, checked);
                    this.fireEvent('checkchange', this, recordIndex, checked, record);
                }
            }
            // cancel selection.
            return false;
        } else {
            return this.callParent(arguments);
        }
    },

    // Note: class names are not placed on the prototype bc renderer scope
    // is not in the header.
    renderer : function(value, metaData, record, rowIndex, colIndex, store, view){
        var disabled = "",
            column = view.panel.columns[colIndex];
        if(column.disableColumn || column.disabledColumnDataIndex || (column.disableFunction && column.disableFunction(value, record)))
            disabled = "-disabled";
        var cssPrefix = Ext.baseCSSPrefix,
            cls = [cssPrefix + 'grid-checkheader' + disabled];

        if (value) {
            cls.push(cssPrefix + 'grid-checkheader-checked' + disabled);
        }
        return '<div class="' + cls.join(' ') + '">&#160;</div>';
    }
}); 
```

那么复选框列的示例设置将如下所示：

```
{
    xtype: "checkcolumn",
    columnHeaderCheckbox: true,//this setting is necessary for what you want
    store: (you need to put the grids store here),
    sortable: false,
    hideable: false,
    menuDisabled: true,
    dataIndex: "value_flag",
    listeners: {
        checkchange: function(column, rowIndex, checked){
             //code for whatever on checkchange here
        }
    }
} 
```

看起来像这样： ![在此处输入图像描述](../Images/95a229b59dc6ff33595efd92fe351fdd.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-25T16:43:51.060

我根据@Reimius 提供的代码创建了一个补丁。它只在必要时调用 getStoreIsAllChecked 方法以稍微提高性能。它还支持 Extjs 4.2 希望对您有所帮助。

[https://github.com/twinssbc/extjs-CheckColumnPatch](https://github.com/twinssbc/extjs-CheckColumnPatch)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-24T10:04:26.887

如果您使用 ExtJS 6.5.2 或更高版本，则应使用此设置。

```
{ 
  xtype: 'checkcolumn',
  headerCheckbox: true, // THIS OPETION SHOW YOU CHECKBOX ON HEADER.
  sortable: false, // THIS OPTION DISABLE SORTING.
  hideable: false, // THIS OPTION EXCLUDE COLUMN FORM MENU.
  menuDisabled: true, //THIS OPTION HIDE MENU ON THE HEADER.
  dataIndex: 'isChecked',
  width: 25
} 
```

输出将是这样的。 [![输出将是这样的](../Images/2bbc3d4cdde0c5c00fb24613b93ef7e0.png)](https://i.stack.imgur.com/7CZCJ.png)

如果你喜欢这个建议，请竖起大拇指。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-14T06:28:51.337

使用上面 bocong 的方法对我来说开箱即用不起作用：标题复选框显示为未选中，并且在单击时没有切换其状态（它看起来也有点时髦，在左侧被切断了一点点） .

我修改（并大大简化了）上面 bocong 的代码，以使其适用于 ExtJS 4.2.1（从常规行的复选框中复制必要的标记）：

```
getHeaderCheckboxImage: function (allChecked) {
    return '<img class="x4-grid-checkcolumn ' + ( allChecked ? 'x4-grid-checkcolumn-checked' : '' ) + '">';    
} 
```

它似乎工作得很好！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-27T15:58:50.273

**做**

**

```
 selModel: {
   selType: 'checkboxmodel',
   showHeaderCheckbox: true
 } 
```

**

更多详情请参考：

[http://docs.sencha.com/extjs/5.1.0/api/Ext.selection.CheckboxModel.html#cfg-showHeaderCheckbox](http://docs.sencha.com/extjs/5.1.0/api/Ext.selection.CheckboxModel.html#cfg-showHeaderCheckbox)

# neo4j - Neo4j Cypher 获取关系方向

> ID：11393662
> 
> 赞同：4
> 
> 时间：2012-07-09T10:55:35.247
> 
> 标签：neo4j, cypher

我有以下密码查询，它返回特定节点的所有（进出）关系：

```
START s=node(1) MATCH s<-[r]->(t) RETURN type(r) as RelationshipType, ....... 
```

现在我想找出每一种关系的方向。有没有像“ `RETURN RelationshipDirection(r)`”这样的命令？？:)

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-16T14:20:08.430

根据 neo4j 2.0，您可以使用 startnode(r)

请参阅 [http://docs.neo4j.org/chunked/snapshot/query-functions-scalar.html#functions-startnode](http://docs.neo4j.org/chunked/snapshot/query-functions-scalar.html#functions-startnode)

STARTNODE 返回关系的起始节点

因此，在您的示例中，您可能会通过以下方式找到传出关系`startnode(r) = s`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:08:31.837

不幸的是，现在使用 Cypher 是不可能的。[这](https://github.com/neo4j/neo4j/issues/85)是一个问题。请添加您可能有的任何评论。

安德烈斯

# grails - 如何在grails中保存多对多域对象

> ID：11393666
> 
> 赞同：2
> 
> 时间：2012-07-09T10:55:46.550
> 
> 标签：grails, grails-2.0

我有两个域类，Course 可以属于一个或多个培训，Track 可以有一个或多个课程。

```
Class Track{
   string name 
   static hasMany= [courses: Course]

}

Class Course{
   String name
   static belongsTo = [tracks: Track]

} 
```

在课程中创建一个页面，我有字段

```
<g:select id="tracks" name="tracks.id" from="${com.springpeople.tms.Track.list()}" optionKey="id" value="${courseInstance?.tracks?.id}" class="many-to-one" noSelection="['null': '']"/> 
```

但是轨道没有在课程中保存，我是否需要明确传递轨道对象。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:32:41.823

首先，您需要保存轨道类对象，然后才能保存课程类对象。

在您尝试保存课程对象的情况下，您将无法获得曲目 ID，这就是为什么它会通过异常。

通过 save 方法保存轨道类对象后。

之后使用 object.addToCourse(courseObject).save(); 为了节省。

# symfony - Symfony2 + swift mailer + 命令：电子邮件正文显示在控制台中

> ID：11393667
> 
> 赞同：3
> 
> 时间：2012-07-09T10:56:02.247
> 
> 标签：symfony, swiftmailer

我在我的 Symfony 应用程序中创建**了一个新命令。**

在此命令中，我调用了一项服务，该服务*从 FOS bundle 作为邮件程序***发送电子邮件** 。

 *我的问题是**电子邮件正文显示**在控制台中以便发送电子邮件。

我想说该`msg mailer`方法在命令**之外可以正常工作。**

**这是我的命令**：

```
class ReminderCommand extends Command
{
    protected function execute(InputInterface $input, OutputInterface $output)
    {
        $this->container = $this->getApplication()->getKernel()->getContainer();            

        # the mailer service works fine out the command
        $mailer = $this->container->get('mailer');
        $mailer->sendMsg(...);          

        $text = ' => mail sent';

        $output->writeln($text);
    }
} 
```

请帮忙

谢谢

山姆

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T08:44:28.883

我想你可能已经使用了内存假脱机。

当使用内存假脱机时，你必须知道，由于 symfony 处理控制台命令的方式，电子邮件不会自动发送。您必须自己处理刷新队列。使用以下代码在控制台命令中发送电子邮件：

```
$container = $this->getContainer();
$mailer = $container->get('mailer');
$spool = $mailer->getTransport()->getSpool();
$transport = $container->get('swiftmailer.transport.real');
$spool->flushQueue($transport); 
```

参考：http : [//symfony.com/doc/2.0/cookbook/console/sending_emails.html](http://symfony.com/doc/2.0/cookbook/console/sending_emails.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-09T11:43:23.610

我找到了解决方案。

以这种方式使用服务：

```
 $this->container->get('mailer')->sendMsg(...) 
```

不是

```
 # the mailer service works fine out the command
    $mailer = $this->container->get('mailer');
    $mailer->sendMsg(...); 
```

现在可以使用

玩得开心，希望它可以帮助一些人

山姆*

# python - 用另一个列表替换列表中的最后一个元素

> ID：11393670
> 
> 赞同：10
> 
> 时间：2012-07-09T10:56:09.410
> 
> 标签：python

例如我有两个数组 a`array1`和`array2`

```
array1 = ['A', 'B', 'C', 'D', 'E', 'F',]
array2 = ['G', 'H', 'I',]` 
```

现在我想要输出为

```
array1 = ['A', 'B', 'C', 'D', 'E', 'G', 'H', 'I',] 
```

我怎么能在python中做到这一点

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-09T10:57:02.353

```
>>> array1 = ['A', 'B', 'C', 'D', 'E', 'F']
>>> array2 = ['G', 'H', 'I']
>>> array1 = array1[:-1] + array2
>>> array1
['A', 'B', 'C', 'D', 'E', 'G', 'H', 'I'] 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-09T10:58:54.437

要替换 python 列表的一部分，您可以使用切片分配：

```
>>> array1 = ['A', 'B', 'C', 'D', 'E', 'F']
>>> array2 = ['G', 'H', 'I']
>>> array1[-1:] = array2
>>> array1
['A', 'B', 'C', 'D', 'E', 'G', 'H', 'I'] 
```

您可以使用切片分配替换列表的任何部分，包括插入不替换现有元素的列表：

```
>>> array1[0:0] = ['1st', '2nd']
>>> array1
['1st', '2nd', 'A', 'B', 'C', 'D', 'E', 'G', 'H', 'I'] 
```

在这里，`[0:0]`切片选择一个空白部分`array1`并用新元素“替换”它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T23:17:20.077

链接数组时，使用 itertools 可能很有用：

```
import itertools
array1 = itertools.chain(array1[:-1], array2) 
```

而已。

文档：[http ://docs.python.org/2/library/itertools.html#itertools.chain](http://docs.python.org/2/library/itertools.html#itertools.chain)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T11:32:41.637

```
>>> array1.remove(array1[len(array1)-1])
>>> for i in array2:
        array1.append(i) 
```

有点天真但有效..

# java - Java Applet Com 端口

> ID：11393671
> 
> 赞同：0
> 
> 时间：2012-07-09T10:56:09.427
> 
> 标签：java, security, applet, serial-port

任何带有 Java 小程序的设备我想通过 com 端口响应和发送数据。应用程序在 appletviewer 中工作。当我使用任何浏览器时。这个程序卡住了安全屏障？没有以任何方式越过它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:49:14.310

对小程序进行数字签名，然后说服用户接受代码（出现提示时单击“确定”）。

如果您找到其他方法（除了完全不切实际的策略文件），请告诉我，以便我可以向 Oracle 提出安全错误。

# linux - 为什么Linux内核的`struct file_operations`中的close函数被称为release？

> ID：11393674
> 
> 赞同：14
> 
> 时间：2012-07-09T10:56:18.060
> 
> 标签：linux, linux-kernel, kernel

我正在尝试制作一个支持打开、关闭、读写操作的linux内核模块。所以我想通过struct file_operations注册这些函数，但是我在struct中找不到'close'条目。我想我应该使用'release'而不是'close'，但我想知道为什么名字是'release'而不是'close'？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-09T11:05:35.123

因为文件可能会被多次打开，所以当你关闭一个描述符时，只有在最后一次关闭对文件的最后引用的调用时才会调用释放。所以关闭和释放是有区别的。

> release：在该文件的最后一次 close(2) 时调用，即当 file->f_count 达到 0 时。虽然定义为返回 int，但返回值被 VFS 忽略（参见 fs/file_table.c:__fput()）。[更多的](http://www.moses.uklinux.net/patches/lki-3.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-12T20:24:05.137

我也有类似的困惑。Perreal 是正确的，因为在调用 close 时不会调用 release。[这是Linux Device Drivers 3rd edition](http://www.xml.com/ldd/chapter/book/ch03.html)一书的摘录：

```
int (*flush) (struct file *); 
```

当进程关闭设备的文件描述符副本时，会调用刷新操作；它应该在设备上执行（并等待）任何未完成的操作。这不能与用户程序请求的 fsync 操作相混淆。目前，flush 仅在网络文件系统 (NFS) 代码中使用。如果 flush 为 NULL，则根本不会调用它。

```
int (*release) (struct inode *, struct file *); 
```

释放文件结构时调用此操作。与 open 一样，release 可能会丢失。

请注意，每次进程调用 close 时都不会调用 release。每当共享文件结构时（例如，在 fork 或 dup 之后），直到所有副本都关闭后才会调用 release。如果您需要在关闭任何副本时刷新挂起的数据，您应该实现 flush 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-17T06:13:03.217

> 请注意，每次进程调用 close 时都不会调用 release。每当共享文件结构时（例如，在 fork 或 dup 之后），直到所有副本都关闭后才会调用 release。如果您需要在关闭任何副本时刷新挂起的数据，您应该实现 flush 方法。

取自 LDD3（第 3 章）。

# php - PHP 图像上传器将 PNG 转换为 8 位

> ID：11393675
> 
> 赞同：0
> 
> 时间：2012-07-09T10:56:21.660
> 
> 标签：php, image, file-upload, gd, image-uploading

我们有一些相当老的代码可以上传、调整大小然后保存图像，以便可以在我们的 CMS 中使用。

除非我们上传 24 位 PNG，否则一切正常，因为出于某种原因，它会将其转换为 8 位 PNG，无论如何要解决这个问题？

附件是有问题的功能：

```
function resize_png( $origfile,$newfile,$endh,$endw,$imagequal,$crop,$watermrkimg=false) {

    $imagequal = floor($imagequal/10);          //needed to give a quality of between 0-9 as required by php5 (php4 allowed 0-99)

$return_val = 1;
if (!$return_val = ( ($img = ImageCreateFromPNG ( $origfile )) && $return_val == 1 ) ? "1" : "0" ) {
    quit_on_error ("Your picture is corrupt, please try resaving it or uploading another picture","Image Error",'1');
}

// 1\. get transparent colour
$colorTransparent = imagecolortransparent($img);

$origw = imagesx ($img);                                                            // Original image width
$origh = imagesy ($img);                                                            // Original image height

$ratiow = $origw / $endw;                                                   //get ratios of current dimension against min dimension
$ratioh = $origh / $endh;

if ($ratiow == $ratioh) {                                                       //if image is already correctly proportioned
    $neww = round($origw / $ratiow);
    $newh = round($origh / $ratioh);
    $offsetw = '0';
    $offseth = '0';
}
elseif ($ratioh < $ratiow) {                                                    // if image is wide

    if ($crop == '1')
    {
        $neww = round($origw / $ratioh);                                        // this will be too wide
        $newh = round($origh / $ratioh);                                        // this will be perfect
    }
    else {
        $neww = round($origw / $ratiow);                                        // this will be perfect
        $newh = round($origh / $ratiow);                                        // this will be to short
    }

    $offseth = '0';                                                             // as height perfect
    $offsetw = round(($neww - $endw) / 2);                                      // horizontally centred
}
else  {                                                                         // if image is tall
    if ($crop == '1')
    {
        $neww = round($origw / $ratiow);                                            // this will be perfect
        $newh = round($origh / $ratiow);                                            // this will be too tall
    }
    else
    {
        $neww = round($origw / $ratioh);                                            // this will be too thin
        $newh = round($origh / $ratioh);                                            // this will be perfect

    }
    $offsetw = '0';                                                             // as width perfect
    $offseth = round(($newh - $endh) / 2);                                      // vertically centred
}

if($crop != '1')            // If original is smaller then don't resize at all, then quality will be better
{                           // ... unless of course we are cropping for a thumbnail, then we want to be resized up ...
    if (($origw < $neww) && ($origh < $newh))
    {
         $neww = $origw;
        $newh = $origh;
    }
}

$resized_id = ImageCreate( $neww , $newh );                                     // create an image to resize the image proportionally

// 2\. Set transparent colour
imagepalettecopy($resized_id, $img);
imagefill($resized_id,0,0,$colorTransparent);
imagecolortransparent($resized_id,$colorTransparent);

ImageCopyResampled( $resized_id, $img,                                          // resize image - no cropping, so may be too big in one dimension
                0,0,                                                            // dst x,y
                0,0,                                                            // src LR,UD
                $neww, $newh,
                $origw, $origh );

if ($crop == '1')
{
    $resized_cropped_id = ImageCreate( $endw , $endh );                             // create an image to crop the oversized dimension

    // 2\. Set transparent colour for cropped image
    imagepalettecopy($resized_cropped_id, $img);
    imagefill($resized_cropped_id,0,0,$colorTransparent);
    imagecolortransparent($resized_cropped_id,$colorTransparent);

    ImageCopyResampled( $resized_cropped_id, $resized_id,                               // crop image - so right size
                    0,0,                                                            // dst x,y
                    $offsetw,$offseth,                                              // src LR,UD
                    $endw, $endh,
                    $endw, $endh);

    $return_val = ( $full = ImagePNG( $resized_cropped_id, $newfile, $imagequal )   // save jpeg to destination
                 && $return_val == 1 ) ? "1" : "0";
     ImageDestroy( $resized_cropped_id );
}
else
{
    $return_val = ( $full = ImagePNG( $resized_id, $newfile, $imagequal )   // save jpeg to destination
                 && $return_val == 1 ) ? "1" : "0";

}

ImageDestroy( $resized_id );                                                    // wipe memory for temp images
ImageDestroy( $img );

return ($return_val) ? TRUE : FALSE ; 
```

}

谢谢大家，我现在已经使用 get_png_imageinfo 和 imagecreatetruecolor 修复了它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:59:43.523

[`imagecreate`](http://php.net/imagecreate)使用最大尺寸为 256 色的颜色表创建基于调色板的图像。

[`imagecreatetruecolor`](http://php.net/imagecreatetruecolor)没有这样的限制，但当然会带来文件大小大很多倍的缺点。

# mysql - 需要Mysql自我加入帮助

> ID：11393678
> 
> 赞同：1
> 
> 时间：2012-07-09T10:56:27.010
> 
> 标签：mysql

我有以下表结构：

```
uid    | product_code
---------------------
00001  | 'tb'
00001  | 'im' 
00001  | 'ip'
00002  | 'tb'
00002  | 'im' 
```

我想要一个 selfjoin 查询，它将向我显示那些具有所有三个产品代码 'mg'、'ip'、'tb' 的 uid。即只显示00001。如何做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:00:55.553

```
SELECT sj1.uid FROM tbl sj1 
    JOIN tbl sj2 ON sj1.uid = sj2.uid 
    JOIN tbl sj3 ON sj1.uid = sj3.uid
WHERE sj1.product_code = 'tb'
    AND sj2.product_code = 'im'
    AND sj3.product_code = 'mg' 
```

如果您有更多产品代码，也应该可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:01:26.990

```
select uid from mytable 
where product_code in ('mg','ip','tb') 
group by uid having count(distinct(product_code))=3; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:59:53.540

如果您只有三个产品代码 `Select * from table group by uid having count(uid) =`3

# grails - 如何使用 grails（create/list.gsp）从自动生成的视图中插入/查看主键（电子邮件）？

> ID：11393680
> 
> 赞同：2
> 
> 时间：2012-07-09T10:56:35.407
> 
> 标签：grails, view, mapping, primary-key, gsp

我有旧的数据库架构 (PostgreSQL) 我无法更改它。我在用数据库模型映射我的类时遇到问题，这就是我想要的，也是我所拥有的：

-> 数据库模式 -**数据表用户**- *PostgreSQL*

> PK id STRING（电子邮件），密码 STRING

-> 我的模型 -**域用户**

> PK邮箱STRING，密码STRING

我需要能够让用户通过**create.gsp** *视图*插入用户的 id（电子邮件），我不想手动更改**create.gsp**或其他**.gsp**我希望***Grails***为我自动生成视图。

那么，***我该如何自动生成显示主键的视图，就像其他字段一样让最终用户插入/查看呢？***

在我的*域中*，我有这样的东西：

```
class Usuario {
    String id
    String password

    static constraints = {
        id email: true
        password blank:false, nullable:false
    }

    static mapping = {
        table 'usuario'
        version false
        id column: 'id', generator: 'assigned'
    }

    String toString(){
        return id
    }
} 
```

在此先感谢，对我的英语感到抱歉！

**更新：**

我只是尝试将 [以下代码] 插入我的**用户控制器**，现在我可以看到**id**字段，但只有当我创建一个新用户**create.gsp**时，当我在**list.gsp**中显示用户列表时我不能查看字段**ID**（电子邮件）

```
def scaffold = Usuario 
```

**更新二：**

我遵循了[user1128791](https://stackoverflow.com/users/1128791/user1128791)的评论，它对我有用，我安装了**模板系统**，然后我在它上面工作，更改*list.gsp*表单*src/templates/scaffolding*以显示 id 字段，如下所示：

```
excludedProps = Event.allEvents.toList() << 'version' << 'id'
allowedNames = domainClass.persistentProperties*.name << 'dateCreated' << 'lastUpdated' 
```

为了这

```
excludedProps = Event.allEvents.toList() << 'version'
allowedNames = domainClass.persistentProperties*.name << 'dateCreated' << 'lastUpdated' << 'id' 
```

**更新三：**

我更进一步并进行了以下更改，仅适用于我的*电子邮件*字段和*密码*字段。

```
class User {
    String email
    String password

    static transients = ['id']

    void setId(String email) {
       id = email
    }

    String getId() {
       return email
   }

   static constraints = {
       email email: true, blank:false, nullable:false
       password blank:false, nullable:false
   }
    static mapping = {
        table 'usuario'
        version false
        id generator: 'assigned', name: 'email'
        email column: 'id'
    }

    String toString(){
        return id
    }
} 
```

为了使您能够获得有关我的问题以及我如何解决它的最大信息量，这就是我正在映射的内容：

```
CREATE TABLE usuario
(
   id text NOT NULL,
   "password" text,
    CONSTRAINT "PK usuario" PRIMARY KEY (id)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:21:06.650

来自[http://www.grails.org/Artifact+and+Scaffolding+Templates](http://www.grails.org/Artifact+and+Scaffolding+Templates)：

要为您的项目自定义模板，您需要安装模板：

```
grails install-templates 
```

这将在您的项目中创建 src/templates 文件夹，其中将包含各种工件和脚手架模板。

比您必须更改每个 *.gsp 模板以呈现文本字段而不是 ID 的隐藏字段。

编辑：查看模板。Grails 2.0 应该为“分配”的 id 自动执行此操作。

# windows-phone-7 - 滑块控件行为更改

> ID：11393683
> 
> 赞同：0
> 
> 时间：2012-07-09T10:56:39.587
> 
> 标签：windows-phone-7

我在 wp7 中创建了一个滑块来控制背景音频播放器的音量。

```
<Slider x:Name="VolumeSlider" Height="89" Margin="12,0,24,-20" VerticalAlignment="Bottom" ManipulationCompleted="OnSoundManipulationChanged" Maximum="100" SmallChange="1" LargeChange="100" Value="75"/> 
```

发生的情况是，我尝试操纵滑块，但即使我尝试移动很长距离，滑块也只是移动了一小步。在我将手指从滑块上移开之前，不会触发 ManipulationCompleted 事件，但它也只是设置了小的值变化。

在我的应用程序中导航到另一个页面后会发生此行为。如果我重新启动应用程序，它会再次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:53:26.097

我找到了解决方案，该解决方案由 Paul Sinnema 发布并且运行良好！

[http://forums.create.msdn.com/forums/p/82897/501068.aspx](http://forums.create.msdn.com/forums/p/82897/501068.aspx)

```
using System.Windows;  
using System.Windows.Controls;  

namespace ControlClassLibrary  
{  
public class PSSlider : Slider  
{  
    public PSSlider()  
    {  
    }  

    public UIElement GestureListenerBug  
    {  
        get { return (UIElement)GetValue(GestureListenerBugProperty); }  
        set { SetValue(GestureListenerBugProperty, value); }  
    }  

    public static readonly DependencyProperty GestureListenerBugProperty =  
        DependencyProperty.Register("GestureListenerBug", typeof(UIElement), typeof(PSSlider), new PropertyMetadata(null));  

    protected override void OnMouseEnter(System.Windows.Input.MouseEventArgs e)  
    {  
        SetHitTestVisibility(false);  

        base.OnMouseEnter(e);  
    }  

    protected override void OnMouseLeave(System.Windows.Input.MouseEventArgs e)  
    {  
        SetHitTestVisibility(true);  

        base.OnMouseLeave(e);  
    }  

    private void SetHitTestVisibility(bool visible)  
    {  
        if (GestureListenerBug != null)  
        {  
            GestureListenerBug.IsHitTestVisible = visible;  
        }  
    }  
} 
```

}

```
<ct:PSPhoneApplicationPage x:Class="MCRemote.MainPage" 
                       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
                       xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone" 
                       xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone" 
                       xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls" 
                       xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                       xmlns:cv="clr-namespace:MCRemote.Converters" 
                       xmlns:ct="clr-namespace:ControlClassLibrary;assembly=ControlClassLibrary" 
                       xmlns:co="clr-namespace:MCRemote.Controls" 
                       xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
                       mc:Ignorable="d" 
                       x:Name="Main" 
                       SupportedOrientations="Portrait" 
                       Orientation="Portrait" 
                       shell:SystemTray.IsVisible="True" 
                       Loaded="PhoneApplicationPageLoaded" 
                       d:DesignHeight="768" 
                       d:DesignWidth="480" 
                       Foreground="White"> 
```

...

```
 <ct:PSSlider x:Name="VolumeSlider" 
                         GestureListenerBug="{Binding ElementName=Main}" 
                         Maximum="1" 
                         Minimum="0" 
                         SmallChange="0.01" 
                         LargeChange="0.1" 
                         ManipulationStarted="SliderManipulationStarted" 
                         ManipulationCompleted="SliderManipulationCompleted" 
                         Value="{Binding PlaybackInfo.BoundVolume, Mode=TwoWay}" 
                         Grid.Column="1" 
                         Grid.Row="2" /> 
```

# mysql - 如何在 ruby on rails 2 中访问 bit mysql 数据类型？

> ID：11393685
> 
> 赞同：1
> 
> 时间：2012-07-09T10:56:48.123
> 
> 标签：mysql, ruby-on-rails, ruby

我[`bit`](http://dev.mysql.com/doc/refman/5.0/en/bit-type.html)在 MySQL 数据库中有一个类型的字段，但我不确定如何访问该值。

ruby`debug`方法给了我（注意空格，它们可能是以二进制形式存储的不可见字符）：

```
--- &id001 !ruby/object:Room 
attributes: 
  bit_field_false: !binary |
    AA==

  bit_field_true: !binary |
    AQ== 
```

`bit_field_false``bit_field_true`应该是和`false`分别`true`。我还注意到一些奇怪的属性：

*   当我将它们转换为整数时，它们都显示为`0`
*   当我提取真值时，即`<%= @room.bit_field_true ? "true" : "false" %>`和`<%= @room.bit_field_false ? "true" : "false" %>`，它们都产生`true`
*   当我将它们显示为字符串时，它们显示为空字符串

如何获得它们各自的值？二进制值是否意味着什么？

最终目标是在复选框中显示它们，我有类似的东西：

```
<% form_for(@room) do |room_f| %>
  <%= check_box_tag :room_bit_field_false %><br/>
  <%= check_box_tag :room_bit_field_true %><br/>
<% end %> 
```

但它总是显示为未选中。我不确定这是如何为此设置创建复选框，所以这也可能是错误的，但不管我想知道如何在代码中提取位值。

作为参考，我使用的是 Ruby on Rails 2.3.2，带有`mysql`适配器和 mysql `Ver 14.14 Distrib 5.5.10, for osx10.6 (i386)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:30:52.933

我发现了比[https://stackoverflow.com/a/11394467/111884](https://stackoverflow.com/a/11394467/111884)`bitfields`建议的要简单得多的东西（我无法开始工作 - 也许是 rails 2 或其他东西） - 方法。`getbyte`

您可以通过以下方式获得第一位：

```
bit_field_false.getbyte(0)  # Returns `0`
bit_field_true.getbyte(0)   # Returns `1` 
```

还发现你可以这样做：

```
bit_field_false == "\0"  # Returns `true`
bit_field_false == "\1"  # Returns `false`

bit_field_true == "\0"   # Returns `false`
bit_field_true == "\1"   # Returns `true` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:51:46.383

如果您只是使用位字段来存储布尔值，我建议您让您的生活变得比需要的更加艰难。

在这里使用布尔字段，一切都会简单得多。像这样努力工作通常表明您正在使用 Rails，而不是使用它。

...话虽如此，我已经使用了位字段和 Redis（用于存储权限）。如果您想在 ActiveRecord 中执行此操作，像[https://github.com/grosser/bitfields](https://github.com/grosser/bitfields)这样的插件似乎是一种更好的方法。

# ruby - Ruby on Rails：如何为变量分配硬值？

> ID：11393687
> 
> 赞同：1
> 
> 时间：2012-07-09T10:56:53.420
> 
> 标签：ruby, ruby-on-rails-3, variables, routing, variable-assignment

我正在使用多个重定向，我想从 A->B->C->A 重定向。

所以在 B 中，我将路径 A 保存为

```
@previouspage = request.referer 
```

所以此时@previouspage = A，但是当我在C中调用@previouspage时，并没有带来B中保存的硬值，而是找到了自己的相对request.referer，也就是B。

所以在 C 中，@previouspage = B（因为我认为 Ruby 中的变量是软链接）

我将如何保存 request.referer 在 B 点的任何值，然后将该 URL 保存到我以后可以访问的变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:41:17.793

HTTP 是一种无状态协议：请求之间不会记住变量。如果要在请求之间保存状态，则可以使用会话。在 Rails 中是这样完成的：

在 B 中：

```
session[:page_a] = request.referer 
```

在 C 中：

```
@next_page = session[:page_a] 
```

[Rails 安全指南](http://guides.rubyonrails.org/security.html)从会话及其漏洞开始。你可能想检查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T15:23:03.190

完成这项工作需要三件事

*   使用会话：sessions[:original_page]=request.referrer
*   考虑登录后会话刷新的事实（检查是否为零）
*   记得在控制器中使用 session[:original_page]=nil 后立即设置它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T11:40:21.923

Rails 变量不会在请求之间保留。如果你想保存一些数据，你应该：

*   将其保存在（会话）cookie 中
*   将其保存在数据库中
*   从袖子里拿出一些技巧并将引用者作为参数或类似的东西传递，但根本不推荐。

# foreach - 在 Velocity 中使用 foreach.count

> ID：11393695
> 
> 赞同：1
> 
> 时间：2012-07-09T10:57:25.793
> 
> 标签：foreach, velocity

我正在尝试创建一个带有“for each”循环的速度模板，就像这样

```
#foreach ($Key in $!{KeyList})
    #if $Key1Function == something, write something #end
#end 
```

我希望在`KeyFunction`迭代循环时更改 的数字。

所以我尝试写`$Key$foreach.countFunction`,`$Key{$foreach.count}Function`和`$Key{$foreach.count}$Function`，不出所料，这一切都失败了。

我也尝试过使用`#set`（在 foreach 循环中），即

```
#set($a = "KeyFunction")
#set($b = "foreach.count") ##(or velocityCount -- same problem)
#set($c = "$a$b") 
```

但是现在当我检查时，`$c`我得到`KeyFunction1`了，当我尝试 $ this (ie `$$c`) 时，我得到了`$KeyFunction1`——我无法让 Velocity 再次评估。

我已经尝试`#evaluate`在各种地方和方式使用，但它似乎没有做任何事情。

编辑-如果它使问题变得更简单，我可以重写`$Key1Function`为 `$KeyFunction1`，这可能需要更少的'$'符号才能工作？

谁能帮我解决这个问题的正确语法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:20:11.997

评估不返回值。它只是将内容呈现到输出流中。VelocityTools 中的 RenderTool 确实返回值。但为此，您不需要那么大的力量。只需将上下文放入自身：

```
context.put("ctx", context); 
```

并要求它提供您想要的值，使用插值字符串（双引号）来创建密钥。所以，像这样：

```
#foreach ($Key in $!{KeyList})
 #if ($ctx.get("$Key${foreach.count}Function") == something) write something #end
#end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T20:10:34.497

请参阅[http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html#loops](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html#loops)，有一个名为 $velocityCount 的变量包含循环计数器，默认从 1 开始。

名称和起始值都可以自定义。

# iphone - 在 iPhone 中单击图像视图时显示放大的图像

> ID：11393696
> 
> 赞同：1
> 
> 时间：2012-07-09T10:57:28.443
> 
> 标签：iphone, objective-c, xcode, uitableview, uiimageview

我已经实现了异步图像视图以在我的自定义单元格视图上加载图像，但图像在单元格上显示为小。所以我需要在单击该图像视图时显示该图像的放大形式。我怎样才能做到这一点？

这是我的代码：

```
 if (cell == nil) {
     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

     //create new cell
     cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

     //common settings
     cell.selectionStyle = UITableViewCellSelectionStyleNone;
     cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
     cell.layer.cornerRadius = 10; 
     cell.layer.masksToBounds = YES;

     cell.imageView.contentMode = UIViewContentModeScaleAspectFit;
     cell.imageView.frame = CGRectMake(10.0f, 10.0f, 60.0f, 44.0f);
     cell.imageView.backgroundColor = [UIColor colorWithRed:73 green:73 blue:73 alpha:1];

     cell.imageView.image = [UIImage imageNamed:@"Placeholder.png"];
     imgBtn=[cell imageView];
     objectAtIndex:indexPath.row]objectForKey:@"Name"];
     cell.imageView.imageURL =  [NSURL URLWithString:[[detailsList objectAtIndex:indexPath.row]objectForKey:@"image_url"]];
} 
```

我想在触摸单元格内的图像视图时放大图像。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:19:25.350

您可以使用手势识别器添加图像，如下所示：-

```
UITapGestureRecognizer *tapped = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageTapped:)];           
tapped.numberOfTapsRequired = 1;
[image setUserInteractionEnabled:YES];
image.tag = indexPath.row;
[image addGestureRecognizer:tapped];   
[cell.contentView addSubview:image]; 
```

你的图像功能将是： -

```
 - (void)imageTapped:(UITapGestureRecognizer *)gesture 
{
    UIImageView *img = (UIImageView *)[gesture view];
    BigimgView.image = img.image
    [self.view addSubview:BigimgView];
    UITableViewCell *cell = [MyTableView cellForRowAtIndexPath:[NSIndexPath indexPathWithIndex:img.tag]];

} 
```

而 BigimgView 可以是大尺寸的 imageview 的 iboutlet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:23:01.447

您想在点击 imageView 时收到消息吗？一个可能的解决方案是创建一个自定义 UITableViewCell，可能在自己的 xib 文件中。

那么您的问题是使您的自定义 UITableViewCell 上的 UIImageView 可点击。请看一下这个问题：[这里](https://stackoverflow.com/questions/855095/how-can-i-detect-the-touch-event-of-an-uiimageview)

更简单的解决方案是使用 UIButton，而不是 UIImageView。您可以将图像/背景图像设置为 UIButton。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T11:27:11.953

尝试使用 UIButton：

```
UIButton * b = [[UIButton alloc] initWithFrame:CGRectMake(0.0f, 0.0f , cell.imageView.frame.size.width, cell.imageView.frame.size.height)];
b.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[b addTarget:self action:@selector(changeSize:) forControlEvents:UIControlEventTouchUpInside];
[cell.imageView addSubview:b];

-(IBAction)changeSize:(UIButton *)sender
{
    UIImageView * imageView = (UIImageView *)[sender superview];
    imageView.frame = //Your larger frame goes here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T12:11:36.063

在您的自定义单元格中添加按钮。

```
@interface custom : UITableViewCell
{
    UIButton *button1
} 
```

然后在xib中添加按钮。然后连接到该按钮。

来到 tableview 数据源方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"CellIdentifier";

    // Dequeue or create a cell of the appropriate type.
    /// UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    custom *cell=(custom *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        // cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        NSArray *topView=[[NSBundle mainBundle]loadNibNamed:@"custom" owner:self options:nil];

        for(id currentobject in topView)
        {
            if ([currentobject isKindOfClass:[UITableViewCell class]])
            {
                cell=(custom *)currentobject;
                //cell.backgroundView.backgroundColor=[UIColor clearColor];

                 break;
             }
         }
    }   
    //  0.0f, 0.0f , cell.imageView.frame.size.width,        cell.imageView.frame.size.height
    [cell.button1 addTarget:self action:@selector(changeSize) forControlEvents:UIControlEventTouchUpInside];
} 
```

现在单击按钮。它将转到该方法。,., 试试.,.,

```
-(IBAction)changeSize:(UIButton *)sender
{
    UIImageView * imageView = (UIImageView *)[sender superview];
    imageView.frame = //Your larger frame goes here
} 
```

您需要为 cell.button1 提供背景图片，它可能对您有所帮助。，。

我在学习。，

# jquery - Firefox 3 中的 ContentEditable - 表格辅助箭头出现在错误的位置

> ID：11393703
> 
> 赞同：1
> 
> 时间：2012-07-09T10:57:58.380
> 
> 标签：jquery, firefox, contenteditable

通过 jQuerys 的`after()`函数插入新行时，标准的表格辅助箭头在页面上的位置非常偏离。（它们相对于正在编辑的 td 处于偏离位置）。插入的行使用 contenteditable 标记。

在 Firefox 3 上复制。

有人遇到过类似的事情吗？或者有什么办法可以禁用这些箭头？

```
newRow = '<tr class="focus"> <td class="column1"><div contenteditable="true">Date</div></td><td class="column2"><div contenteditable="true">Entity</div></td> <td class="column3"><div contenteditable="true">Instances</div></td><td class="column4 "><div contenteditable="true">Type</div></td><td class="column5"><div contenteditable="true">Rule by</div></td><td class="column6" contenteditable="false"><a class="save">Save</a></td></tr>';
$('.manageRules .edit').live('click', function(e) {
        $(this).closest('tr').prev().after(newRow)
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T15:01:59.123

这可能与 Firefox 中的这个 bugg 报告有关。

[https://bugzilla.mozilla.org/show_bug.cgi?id=520556](https://bugzilla.mozilla.org/show_bug.cgi?id=520556)

ContentEditable 在错误放置的定位元素内。

# xml - 如何使标签孩子独一无二？

> ID：11393704
> 
> 赞同：0
> 
> 时间：2012-07-09T10:57:59.923
> 
> 标签：xml, validation, xsd, schema

如何在我的 xml 文件中的限制标签中禁止重复标签？例如在我的 xml 文件中，我有两个语言环境标签，但它应该只有一个标签

这是我的 xml 文件：

```
 <app:string name="firstName">
        <app:restriction>
            <app:regex>^\w*$</app:regex>
            <app:type/>
            <app:locale/>
            <app:locale/>
        </app:restriction>
    </app:string> 
```

这是我的字符串标签的xsd：

```
<xs:element name="string">
    <xs:complexType>
        <xs:complexContent>
            <xs:extension base="main:BaseType">
                <xs:sequence>
                    <xs:element name="restriction" type="main:StringRestriction" minOccurs="0"
                                maxOccurs="1"/>
                </xs:sequence>
                <xs:attribute name="lang" type="main:LocaleTypes"/>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
</xs:element>

<xs:complexType name="BaseType">
    <xs:attribute name="name" type="main:nameType" use="required"/>
    <xs:attribute name="readonly" type="xs:boolean" use="optional" default="true"/>
</xs:complexType>

<xs:complexType name="StringRestriction">
    <xs:complexContent>
        <xs:extension base="main:RestrictionBase">
            <xs:sequence>
                <xs:choice maxOccurs="1">
                    <xs:element type="xs:string" name="locale"/>
                    <xs:element type="xs:string" name="type"/>
                    <xs:element type="xs:string" name="regex"/>
                    <xs:element type="xs:string" name="maxLen"/>
                    <xs:element type="xs:string" name="minLen"/>
                </xs:choice>
            </xs:sequence>
        </xs:extension>
    </xs:complexContent>
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:48:28.643

如果我正确理解你需要一个模式来强制你的`restriction`标签包含标签而不重复。

如果你用这个代替：

```
<xs:sequence>
    <xs:choice maxOccurs="1">
        <xs:element type="xs:string" name="locale"/>
        <xs:element type="xs:string" name="type"/>
        <xs:element type="xs:string" name="regex"/>
        <xs:element type="xs:string" name="maxLen"/>
        <xs:element type="xs:string" name="minLen"/>
    </xs:choice>
</xs:sequence> 
```

有了这个：

```
<xs:all minOccurs="0">
    <xs:element type="xs:string" name="locale"/>
    <xs:element type="xs:string" name="type"/>
    <xs:element type="xs:string" name="regex"/>
    <xs:element type="xs:string" name="maxLen"/>
    <xs:element type="xs:string" name="minLen"/>
</xs:all> 
```

您的架构不允许标签`locale`内有重复的元素。`restriction`您可以在此处查看摘要：http: [//www.w3schools.com/schema/el_all.asp](http://www.w3schools.com/schema/el_all.asp) 除此之外，您可以使用`minOccurs`并`maxOccurs`强制某些元素始终出现，而其他元素只是可选的。

# mongodb - Spring Data Mongo - 从@DbRef 引用的对象中排除查询中的字段

> ID：11393708
> 
> 赞同：2
> 
> 时间：2012-07-09T10:58:18.143
> 
> 标签：mongodb, spring-data

假设我有两个类如下：

```
public class Person {

    private String personId;

    private String name;

    private Address address;

}

public class Order {

    private String orderId;

    @DbRef
    private Person customer;

} 
```

我想做的是对 Order 集合运行查询，但只返回链接的 Person 对象的特定字段，例如：

```
public Order findByOrderId(String orderId) {
    Query query = query(where("orderId").is(orderId));
    query.fields().exclude("person.address");
    return operations.findOne(query,Order.class);
} 
```

我得到了返回的数据，但如果我的排除参数跨通过@DbRef 链接的子对象，则似乎没有应用它。我可以排除 Order 对象的属性没问题。我遇到的问题是 Person 文档可能会变得非常大，我希望在获取 Order 对象时控制网络流量（即只获取我需要的数据）。

我正在使用 spring-data-mongodb 的 1.0.0.M5 版本

有谁知道是否支持这种操作？

非常感谢

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:35:56.243

目前这是不可能的。原因是我们使用不幸的是不采用字段规范参数`DBRef`的方法透明地翻译来自商店的对象。`fetch()`我建议在 MongoDB Java 驱动程序的错误跟踪器以及 Spring Data MongoDB 中打开一张票，让我们选择他们可能引入的添加方法。

对此的解决方法实际上可能是将对象映射为`DBRef`域类内部，并通过触发`findOne(…)`指定嵌套排除项来手动将其解析为实际对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:34:45.080

另一种解决方法可能是扩展 AbstractMongoEventListener 并覆盖 onAfterConvert 方法并将其公开为 Spring Bean

在这里，您将可以访问 Order 对象，然后可以设置您不想为空的任何内容。

您仍将获得具有默认值的空字段，但大小会小得多

或者，您也可以编写一个自定义 PersonInfo 类，该类仅包含您需要的字段并将其设置为 Order 对象以及将 Peson 设置为 null

# vaadin - 需要 Vaadin ExcelExport 示例

> ID：11393710
> 
> 赞同：1
> 
> 时间：2012-07-09T10:58:19.097
> 
> 标签：vaadin

我是 Vaadin 的新手。此时我遇到问题 ExcelExport。

当我单击按钮时，它没有下载文件，也没有显示任何错误。

我不知道这个文件的位置是什么。

```
final ThemeResource export = new ThemeResource("adminicons/green.png");
    final Button excelExportButton = new Button("Export to Excel");

    public TestExport() {

        final Table table = new Table("This is my Table");
      HorizontalLayout vlaLayout = new HorizontalLayout();

      table.addContainerProperty("First Name", String.class,  null);
      table.addContainerProperty("Last Name",  String.class,  null);
      table.addContainerProperty("Year",       Integer.class, null);

      table.addItem(new Object[] {
          "Nicolaus","Copernicus",new Integer(1473)}, new Integer(1));
      table.addItem(new Object[] {
          "Tycho",   "Brahe",     new Integer(1546)}, new Integer(2));
      table.addItem(new Object[] {
          "Giordano","Bruno",     new Integer(1548)}, new Integer(3));
      table.addItem(new Object[] {
          "Galileo", "Galilei",   new Integer(1564)}, new Integer(4));
      table.addItem(new Object[] {
          "Johannes","Kepler",    new Integer(1571)}, new Integer(5));
      table.addItem(new Object[] {
          "Isaac",   "Newton",    new Integer(1643)}, new Integer(6));

        excelExportButton.setIcon(export);

        excelExportButton.addListener(new ClickListener() {
            private static final long serialVersionUID = -73954695086117200L;
            private ExcelExport excelExport;

            public void buttonClick(final ClickEvent event) {
                excelExport = new ExcelExport(table);
                excelExport.excludeCollapsedColumns();
                excelExport.setReportTitle("Demo Report");

                excelExport.export();
            }
        });

      vlaLayout.addComponent(table);
      vlaLayout.addComponent(excelExportButton); 
```

setCompositionRoot(vlaLayout);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-25T04:53:06.647

我想您不再需要答案了，但我正在为那些最终在这里寻找示例的人提供链接。[请在这里找到](https://github.com/haiwan/Exporter/tree/master/src/org/vaadin/haijian)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T01:26:43.043

这段代码在 vaadin 6 项目中对我有用，我希望仍然在 vaadin 7 上工作

```
 private ExcelExport excelExport;

   btnExcel.addListener(new ClickListener() {

        /**
         * 
         */
        private static final long serialVersionUID = 1L;

        @Override
        public void buttonClick(ClickEvent event) {
            if (tMovement.size() > 0){

                excelExport=  new ExcelExport(tMovement,"Movimientos");
                excelExport.setReportTitle("Movimientos");
                excelExport.setDisplayTotals(false);
                excelExport.setDoubleDataFormat("0");
                excelExport.export();

            }else{
                showMessage("AVISO", ("No hay registros para exportar"),1);
            }
        }
    }); 
```

# ruby-on-rails - 如何在 Rails 3.2 中缩小长搜索 url

> ID：11393715
> 
> 赞同：0
> 
> 时间：2012-07-09T10:58:35.397
> 
> 标签：ruby-on-rails, search, url-rewriting, controller, ruby-on-rails-3.2

我有这个搜索控制器网址：

```
http://localhost:3000/search/index?utf8=✓&amp;search=Search_terms 
```

如何将其修剪为：

```
http://localhost:3000/search=query 
```

搜索代码：

```
#search-box
  #search-form
    = form_tag search_index_path, :method => 'get'  do
      = text_field_tag :search, params[:search], :autocomplete => "off"
      %button#search-button{:type => "submit"}
        %span Go! 
```

或者这可能吗？

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:24:29.620

Ruby（或 Rails）本身无法做到这一点。你需要

1.  将 JavaScript 回调附加到表单的提交事件
2.  验证表格
3.  将表单的目标 URL 替换为由`search=`+ 输入值组成的 URL。

请记住，并非所有字符都可以成为 URL 的一部分。这就是您应该将搜索查询作为参数而不是 URI 的一部分传递的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:10:31.013

如果您不想`params[search]`在 URL 上显示 ，则应在表单中将方法从 更改`GET`为`POST`。

阅读：[http ://www.cs.tut.fi/~jkorpela/forms/methods.html](http://www.cs.tut.fi/~jkorpela/forms/methods.html)

或在问题中包含您的表单代码...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:32:50.347

（仅）Rails 完全有可能。

确保您提交的页面是您的根路径

（在 config/routes.rb 中）

```
root :to => "search#index" 
```

然后只需确保您的表格发布到`root_path`

摆脱“雪人”有点棘手。如果您确定不会有任何人提交非 UTF8 字符，那么避免使用 form_tag 帮助程序并手动编码您的表单（使用如此短的表单很容易）将摆脱它。

# facebook-page - 我的页面上没有开发者应用程序

> ID：11393717
> 
> 赞同：0
> 
> 时间：2012-07-09T10:58:43.540
> 
> 标签：facebook-page

我目前正在为我正在使用 Drupal CMS 的本地协会开发网站。drupal有一个[facebook 模块](http://drupal.org/project/fb_social)，它集成了所有 FB 社交插件。使用它需要一个应用程序 ID。我已经使用他们给我的凭据连接到该协会的 FB 页面，但我碰壁了，因为我无法访问任何 FB Developers 帐户功能，因此我无法生成任何应用程序 ID。

当我访问[https://developers.facebook.com](https://developers.facebook.com)时，它会简单地将我重定向到关联 FB 页面，仅此而已。谷歌搜索我读到他们的帐户应该被“确认”。我遵循了涉及提供电话号码等的程序，但仍然无法访问与开发人员相关的任何内容。

我承认我完全迷路了，没有线索。协会/公司 FB 页面是否需要遵循特定步骤？如果我使用我的个人 FB 帐户来获得这个著名的 APP ID，有什么特别的缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:26:22.477

> 我已使用他们给我的凭据连接到该协会的 FB 页面

这些是什么证书？

开发人员必须是自然人，这意味着普通用户帐户——而不是页面帐户或类似的东西。

# performance - 为什么 OpenSSL 0.9.7h 版本比 OpenSSL 1.0.1c 版本快？

> ID：11393718
> 
> 赞同：1
> 
> 时间：2012-07-09T10:58:44.477
> 
> 标签：performance, openssl

有人能告诉我为什么 openssl 0.9.7h 的工作速度比 openssl 1.0.1c 快吗？在同一台计算机上使用默认配置和在 ubuntu 12.04 aes 中的 openssl 0.9.7h 速度测试 50% 的工作速度比 openssl 1.0.1c 快

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:41:56.180

性能下降可能是由于以下原因：

1.  正在协商的 OpenSSL 版本（在 0.9.7h 中可能是 SSL 3.0 或 TLS 1.0，但在 OpenSSL 1.0.1c 中可能是 TLS 1.2）
2.  这可能是由于正在协商密码列表。如果您使用的是默认密码列表，则它可能已被 OpenSSL 更改。（TLS 1.2 密码更安全，因此消耗更多 CPU）

# google-maps - 使用 postgis 进行邻域分类

> ID：11393720
> 
> 赞同：1
> 
> 时间：2012-07-09T10:58:52.420
> 
> 标签：google-maps, gis, geospatial, postgis, geojson

我需要构建一个 Web 应用程序来探索一些调查数据，但我正在努力寻找合适的工具。PostGIS 看起来很有趣，但我不确定它是否符合我的需要或者可能是矫枉过正。

数据集（表 1）包含具有空间属性的行（洛杉矶的事件），即长/纬度字段。我有另一个数据集（表 2）定义了[Los Angeles](http://projects.latimes.com/mapping-la/about/#the-data)的区域。我可以在 PostGIS 中执行以下操作吗？

*   仅从表 2 中定义的某个区域中选择表 1 中的数据点？
*   按区域列出分类变量？例如，计算每个区域的男性和女性人数？
*   按区域对数字变量进行分箱吗？例如，要获得年龄分布，显示每个区域有多少人年龄为 [0-9)、[10-19)、[20-29) 等？

此外，我想知道通过javascript（使用geojson）直接查询PostGIS数据库是否安全，或者我是否应该始终在两者之间有一个应用程序层（代码注入等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:00:34.373

对你的观点的回答是肯定的，是的，是的。安装 PostGIS 后，您将能够完成所有这些操作（假设表 1 具有这些属性）。

仅从表 2 中定义的某个区域中选择表 1 中的数据点？

*   是的，以几种方式。表 2 中的数据是定义为多边形，还是点列表？点列表有点难做，但如果你在这里有多边形，工作起来会容易得多。（查看您的链接后，使用形状（shp）文件。

按区域列出分类变量？例如，计算每个区域的男性和女性人数？

*   计数在 select 子句中，geo 组件在 where 子句中。只要这些属性存在于表 1 中，您就可以按所需的任何值进行这些计数。

按区域对数字变量进行分箱吗？例如，要获得年龄分布，显示每个区域有多少人年龄为 [0-9)、[10-19)、[20-29) 等？

*   是的，和上面的答案一样。分箱可能需要一个 case 语句，但只要你能按它分组，你就可以按它计数。呵呵

不知道我是否可以回答最后一个问题...

# sql-server-2008 - 如何在 sql server 2008 中创建字段的子列

> ID：11393722
> 
> 赞同：0
> 
> 时间：2012-07-09T10:58:54.080
> 
> 标签：sql-server-2008

我有一个表，其中我在该字段中再次有一个名为 Work_Type_Name 的字段，一些 work_Type 具有 sub_work_Name，例如列名是“Civil_work”，并且在此工作类型中有：道路建设、桥梁建设、池塘建设，还有更多的列.

像这样有更多的字段有子列。

**我的问题是如何创建具有这种结构的这种类型的表。** 请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:07:36.423

您可以创建另一个名为`Work_Type`定义的表

```
Work_type_id  Work_type_name  parent_id
------------  --------------  --------- 
```

`parent_id`然后您可以通过引用`work_type_id`同一张表来存储该表中的所有工作类型。

如果工作类型没有父级，您可以存储`0`为`parent_id`.

前任：

```
Work_type_id Work_type_name       parent_id
------------ -------------------  ---------
1            Civil_work           0
2            road construction    1
3            bridge construction  1 
```

最后，您可以`Work_Type_Name`将原始表格中的 更改为`Work_type_id`。

# bash - 使用内部 bash 脚本时 Inotifywait 不起作用

> ID：11393726
> 
> 赞同：0
> 
> 时间：2012-07-09T10:58:56.043
> 
> 标签：bash, inotify, inotify-tools

我正在尝试制作一个 bash 脚本`inotiy-tools`来监视一个目录。

这是我的脚本

```
while f=$(inotifywait -m -e create -q -r "/media/data2/Music/English"  --format '%f %w')
do
    echo "$f"
done 
```

问题是当我运行上面的脚本时，它不会在终端上打印任何内容。我检查了该`inotifywait`命令，它在终端上运行良好，但为什么它在我的脚本中不起作用。

*终端上的 inotifywait*

```
noob@noob:~$ inotifywait -m -e create -q -r /media/data2/Music/English  --format '%f %w'
hello /media/data2/Music/English/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:02:24.207

问题是`f=$(inotifywait...`等待该命令结束，然后才给你输出。

我很少写 bash，但你可以试试：

```
inotifywait .... |
while read line
do
    echo $line
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-17T06:08:28.137

不要`-m`在该上下文中使用开关，否则该`inotifywait`命令将永远不会将控制返回到`while`循环。

# jquery - jquery自动完成不返回带有é的结果

> ID：11393727
> 
> 赞同：1
> 
> 时间：2012-07-09T10:58:58.760
> 
> 标签：jquery, utf-8, character-encoding, jquery-autocomplete

我很难使用 JQquery 自动完成脚本。它工作正常，直到我在搜索查询中使用非 UTF8 字符执行搜索。

例如：搜索查询“test”成功返回“test”、“test é”等结果，但是当我将 é 添加到搜索查询时，它不再提供任何结果：（查询“test é”不返回任何结果）。

当我调用执行查询并将结果作为 json 数组返回的 php 脚本时，它确实向我显示了正确的输出：“ **[{“id”：“1230”，“value”：“Test \u00e9”}]** "，只是在 HTML 页面上不再给出带有结果的下拉列表。

对此的任何建议都非常感谢。

沃尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:55:25.273

我——终于——找到了。而且，像往常一样，这很简单：

在我调用 JSON 脚本的 javascript 部分中，我将“q: **escape** (request.term)”替换为“q: **encodeURI** (request.term)”。这解决了我的问题！

```
$("#field")
.autocomplete({
    source: function( request, response ) {
        $.getJSON("./ajax/json_search.php", {
            object_type: "artists",
            q: encodeURI(request.term)
            }, response);
        }
}) 
```

# php - 将 RGBA 中的 Alpha 转换为 CSS 不透明度

> ID：11393741
> 
> 赞同：3
> 
> 时间：2012-07-09T10:59:47.590
> 
> 标签：php, css, image

我正在尝试从 RGBA 获取透明度并将其转换为 CSS 不透明度。

因此，在使用以下方法获取图像像素的 RGBA 后：

```
$rgb = imagecolorat($img, $j, $i);
$colors = imagecolorsforindex($img, $rgb);
// Printing colors, I get
// 255,255,255,127
// 249,161,66,126
//... 
```

出于某种原因，透明度始终是整数（即 127）而不是十进制数。但我想将那个 127 数字转换为我可以在 CSS 中使用的东西：

```
opacity:0;filter:alpha(opacity=0) 
```

但是，我无法弄清楚 RGBA 中的 alpha 与如何将其转换为 CSS 不透明度之间的联系。

我将对来自不同类型图像的各种像素执行此操作。PNG、JPG、GIF

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:07:54.453

`opacity = (127 - transparency) / 127.0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:02:02.923

不透明度与透明度相反。

给定透明度范围 0 .. 255：

```
opacity = (255 - transparency) / 255.0 
```

如果您的最大值不同，只需用该值替换两次出现的 255。

# visual-studio-2010 - 将 SQL 文件添加到 BI 解决方案

> ID：11393742
> 
> 赞同：0
> 
> 时间：2012-07-09T10:59:50.880
> 
> 标签：visual-studio-2010, tsql, reporting-services

我正在从事 SSRS BI 项目。将 VS 2010 与 TFS 2010 结合使用，我创建了解决方案。每个解决方案都包含一个或多个报表服务器项目。每个项目包含一个或多个报告。每个报告使用一个或多个数据集，始终基于 T-SQL。这些数据集中的 SQL 难以阅读，因此我想将原始 .sql 文件添加到适用的项目中。这可能吗？如何？在我的解决方案中添加 SQL Server 项目似乎是一个太大的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:46:51.407

只需添加现有项目。如果它是一个有效的 SQL 文件，它应该能够被添加到项目中，这样 TFS 就会在您签入时将其拾取。

# android - 如何设置警报与 Android 中的警报应用程序相同？

> ID：11393744
> 
> 赞同：2
> 
> 时间：2012-07-09T10:59:55.857
> 
> 标签：android, broadcastreceiver, alarmmanager, alarm, android-alarms

我正在尝试使用小弹出框在我的应用程序之外设置警报。我使用 Activity 制作了那个弹出框。我一直在尝试设置警报应用程序之类的警报，但在某些情况下我会失败。

如果我使用后退按钮从启动活动中退出应用程序，我就成功了。

但是当我按下主页按钮时，警报会保持工作魅力，但最后一次使用的活动是在后台。

我不确定为什么会发生这种情况，我想知道当我按下主页按钮时如何在没有任何后台活动的情况下完成这项工作。

这是我的 onReceiver 代码。

```
@Override
public void onReceive(Context context, Intent intent) {

    try {
         Bundle bundle = intent.getExtras();
         String message = bundle.getString("alarm_message");

         Intent newIntent = new Intent(context, ReminderPopupMessage.class);
         newIntent.putExtra("alarm_message", message);
         newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
         context.startActivity(newIntent);
        } catch (Exception e) { 
         e.printStackTrace();

        }
} 
```

}

如果你们提供实际警报应用程序代码的链接，那就太棒了。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:38:01.200

很久之后我找到了答案

刚刚在 Android 弹出类清单文件中添加了这个。

```
 <activity android:name=".AlarmPopup" android:theme="@android:style/Theme.Dialog"
          android:clearTaskOnLaunch="true" android:launchMode="singleInstance" 
          android:finishOnTaskLaunch="true" excludeFromRecents="true"/> 
```

问题得到解决。

我希望它对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:35:48.210

是的，您实际上应该尝试 Android 警报应用程序的 src，[这](https://github.com/android/platform_packages_apps_alarmclock)是链接。

[在这里](https://stackoverflow.com/a/11359301/519718)看看我的另一个答案

# flash - 我们如何为 Flash 项目设置常规发布设置？

> ID：11393746
> 
> 赞同：0
> 
> 时间：2012-07-09T11:00:03.697
> 
> 标签：flash, flash-cs5.5

在 Flash 5.5 中，您可以创建 Flash 项目，允许您在生产时共享 Flash 文件库。它还允许您将所有文件一起发布。

我希望在发布所有 flash fla 文件时，将输出的 swf 文件保存到特定文件夹中。我无法找到自动执行此操作的方法，因此如果您有 200 个文件，则需要转到每个 fla 文档并更改其发布设置。这有点毁了所有项目的用处......

可能可以使用jsfl来做到这一点。但是更喜欢以其他方式来做，所以我的艺术家团队可以像以前一样继续工作。

非常感谢您的时间和提前帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:56:37.763

您的问题的答案是肯定的，JSFL 可以为您做到这一点。我会给你一个例子，并尽我所能在 jsfl 代码中注释以解释正在发生的事情。随时提出任何澄清问题。

因此，假设您的计算机上有一个文件夹，其中包含许多其他文件夹，这些文件夹都包含 FLA 文件。此代码将遍历该主包含文件夹中的所有文件夹，我们称其为“allFLAs”，然后将它们输出到名为“allSWFs”的文件夹中。下面的代码会将来自 allFLA 的原始文件夹保存在 allSWF 中。因此，如果 FLA 文件位于 allFLA/group1/file1.fla，那么在 allSWFs 中将包含 allSWFs/group1/file1.swf。如果您有相同名称的文件，它们就不会相互覆盖。您可以从 exportSWF 行中删除 + dirList[n] ，它会将所有 SWF 放入主 allSWFs 文件夹中。

此代码不会更改其运行的任何文件的发布设置，并在完成时关闭 Flash IDE。

```
// Main folder that holds the folders containing all the FLA files.
var folder = 'file:///C:/path/to/main/folder/allFLAs';

if (!null) {
    // Create an array of all the folders that are contained in our main folder.
    var dirList = FLfile.listFolder(folder, 'directories');
    // Loop through each item in the array to find each FLA file.
    for (var n = 0; n<dirList.length; ++n) {
        // Create an array of all FLA files in the directory list array.
        var list = FLfile.listFolder(folder+'/'+ dirList[n] + '/*.fla', 'files');
        fl.outputPanel.trace('file:///C:/path/to/output/folder/allSWFs/'+ dirList[n]);
        // Create containing folder for this file based on the name of the folder in the directory list array, in the new output folder.
        FLfile.createFolder('file:///C:/path/to/output/folder/allSWFs/'+ dirList[n]);
        var flaName;
        var swfName;
        for (var i = 0; i<list.length; ++i) {
            flaName = list[i];
            swfName = list[i].split('.')[0]+'.swf';
            fl.outputPanel.trace(flaName+' exported as '+swfName);
            // open the document, publish to SWF, and close without saving.
            fl.openDocument(folder+'/'+ dirList[n] +'/'+flaName);
            fl.getDocumentDOM().exportSWF('file:///C:/path/to/output/folder/allSWFs/'+ dirList[n] + '/'+swfName, true);
            fl.closeDocument(fl.getDocumentDOM(), false);
        }
    }
}
fl.quit() 
```

# javascript - 在现代浏览器中？

> ID：11393750
> 
> 赞同：4
> 
> 时间：2012-07-09T11:00:17.953
> 
> 标签：javascript, html, css, blink

我正在做一个项目，为我们的 CS 教员创建一个网站。不过有一个问题。我们希望页面上的某些元素以有意义的方式突出显示。解决方案必须是跨浏览器的（即必须在 IE 中工作）。

**于是，一个问题：**

如何`blink`在现代浏览器（想想 Chrome）中模拟（在 IE6 中完美运行）？

**更新：** 我找到[了这个 jQuery 插件](https://stackoverflow.com/q/3361564/352796)来做闪烁，但我们不使用 jQuery，并且更喜欢现代浏览器的 CSS3 后备。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-05T21:22:03.233

我想知道为什么没有人建议[CSS3 动画](http://www.w3.org/TR/css3-animations/)：

```
@keyframes blink {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.blink {
  animation: blink 600ms infinite;
} 
```

[JSBin 上的](http://jsbin.com/EhUqILA/1/edit?html,css,output)演示。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T11:03:13.257

您可以`text-decoration`为此目的使用 CSS 属性：

例如：

```
span {
    text-decoration: blink;
} 
```

让所有人`span nodes`眨眼……眨眼……眨眼……眨眼……

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T11:48:00.990

这是一些要模拟的 JavaScript `<blink>`：

```
var blink = (function () {
  var elems;

  function blink() {
    for (var i = 0; i < elems.length; i++) {
      var visible = elems[i].style.visibility === 'visible';
      elems[i].style.visibility = visible ? 'hidden' : 'visible';
    }
  }

  this.start = function () {
    elems = document.getElementsByClassName('blink');
    setInterval(blink, 500);
  };

  return { start: start };
}());

addEventListener('load', blink.start); 
```

[CodePen 演示](http://codepen.io/anon/pen/pJeVjW?editors=101)

只需将类添加`blink`到任何元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-25T18:32:41.830

你不必上课。使用传统标签并简单地为其添加 CSS。

> 通过直接 CSS：

```
/* Standard (Mozilla) */
@keyframes blink { from { opacity: 1; } to { opacity: 0; } }
/* Chrome & Safari */
@-webkit-keyframes blink { from { opacity: 1; } to { opacity: 0; } }
blink { -webkit-animation: blink 600ms infinite; animation: blink 600ms infinite; } 
```

> 直接通过 JS 添加的 CSS

```
if ("[object HTMLUnknownElement]" === Object.prototype.toString.call(document.createElement('blink'))) {
    var head = document.head || document.getElementsByTagName("head")[0],
        style = document.createElement("style");
    /* Standard (Mozilla) */
    style.appendChild(document.createTextNode("@keyframes blink { from { opacity: 1; } to { opacity: 0; } }"));
    /* Chrome & Safari */
    style.appendChild(document.createTextNode("@-webkit-keyframes blink { from { opacity: 1; } to { opacity: 0; } }"));
    style.appendChild(document.createTextNode("blink { -webkit-animation: blink 600ms infinite; animation: blink 600ms infinite; text-decoration: blink; }"));
    head.appendChild(style);
} 
```

* * *

```
/* Standard (Mozilla) */
@keyframes blink { from { opacity: 1; } to { opacity: 0; } }
/* Chrome & Safari */
@-webkit-keyframes blink { from { opacity: 1; } to { opacity: 0; } }
blink { -webkit-animation: blink 600ms infinite; animation: blink 600ms infinite; }
```

```
<p><blink>I Blink</blink></p>
<hr />
<p><noblink>I don't</noblink></p>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-05T14:37:07.267

只是备注：如果你想“闪烁”一个链接，最好改变闪烁文本的颜色而不是隐藏它，因为当它隐藏时你不能点击它，所以它变成了一个尝试点击的游戏链接 ：-）

```
function toggleBlink() {
    for(var i = 0; i < blinkers.length; i++) {
        if(blinkers[i].style.color == 'red') {
            blinkers[i].style.color = 'white';
        } else {
            blinkers[i].style.color = 'red';
        }
    }
} 
```

// “白色”是我的背景颜色

# android - BadParcelableException：解组时出现 ClassNotFoundException

> ID：11393751
> 
> 赞同：9
> 
> 时间：2012-07-09T11:00:21.710
> 
> 标签：android, exception, service, badparcelableexception

我对 Serializable 和 Parcelable 很陌生。我很难将此对象的实例从应用程序传递到远程服务：

```
public class Event implements Parcelable, Cloneable {

    /** Defines under what Bundle's key architecture events are stored */ 
    public static final String BUNDLE_KEY = "ZKEvent";

    /** Defines which messages are architecture's events */
    public static final int MSG_WHAT = 0xDEFECABE;

    /** Defines a key to store map under a Bundle to put into a Parcel (oh yeah!) */
    private static final String MAP_KEY = "MAP";

    /** Indicates this event ID. This ID should be the same in the event answer if any */
    private int idEvent = 0;

    /** Indicates this event priority */
    private int priority = EventPriority.EVENT_PRIORITY_LOW;

    /** ID for this event's sender */
    private int idSource = 0;

    /** ID for this event's destination */
    private int idDestination = 0;

    /** Action to be performed */
    private int action = EventAction.DEFAULT;

    public static final Parcelable.Creator<Event> CREATOR =
        new Parcelable.Creator<Event>() {
            public Event createFromParcel(Parcel in) {
            return new Event(in);
        }

        public Event[] newArray(int size) {
            return new Event[size];
        }
    };

    /** 
     * Event's data
     * Represented as 
     *      key -> parameter;
     *      value -> data 
     */
    private Map<String, Object> data = new HashMap<String, Object>();

    /** Default constructor */
    public Event() {};

    /** Contructor with ID of the event */
    public Event(int id) {
        idEvent = id;
    }

    /** Constructor for Parcelable */
    public Event(Parcel in) {
        readFromParcel(in);
    }

    /** Gets event's priority */
    public int getPriority() {
        return priority;
    }

    /** Sets this event's priority */
    public void setPriority(int priority) {
        this.priority = priority;
    }

    /** Gets the ID of this event's sender */   
    public int getIdSource() {
        return idSource;
    }

    /** Sets the ID of this event's sender */
    public void setIdSource(int idSource) {
        this.idSource = idSource;
    }

    /** Gets the ID of this event's destination */
    public Integer getIdDestination() {
        return idDestination;
    }

    /** Sets the ID of this event's destination */
    public void setIdDestination(Integer idDestination) {
        this.idDestination = idDestination;
    }

    /** Gets the action of this event */
    public int getAction() {
        return action;
    }

    /** Sets the action of this event */
    public void setAction(int action) {
        this.action = action;
    }

    /** Gets the data of this event */
    public Object getData(String key) {
        return data.get(key);
    }

    /** Sets the data of this event  */
    public void addData(String key, Object data) {
        this.data.put(key, data);
    }

    /** Gets the ID of this event */
    public int getIdEvent() {
        return idEvent;
    }

    /** Sets the ID of this event */
    public void setIdEvent(int idEvent) {
        this.idEvent = idEvent;
    }

    @Override
    public Object clone() {

        Event clone = new Event();

        clone.action = this.action;
        clone.idDestination = this.idDestination;
        clone.idEvent = this.idEvent;
        clone.idSource = this.idSource;
        clone.priority = this.priority;

        for(Entry<String,Object> entry: this.data.entrySet()) {
            clone.data.put(entry.getKey(), entry.getValue());
        }

        return clone;
    }

    @Override
    public int describeContents() {
        // TODO Nothing here
        return 0;
    }

    @Override
    public void writeToParcel(Parcel out, int flags) {

        out.writeInt(idEvent);
        out.writeInt(priority);
        out.writeInt(idSource);
        out.writeInt(idDestination);
        out.writeInt(action);

        Bundle mapBundle = new Bundle();
        mapBundle.putSerializable(MAP_KEY, (Serializable) data);
    out.writeBundle(mapBundle);
    }

    /** Restoring this object from a Parcel */
    public void readFromParcel(Parcel in) {

        idEvent = in.readInt();
        priority = in.readInt();
        idSource = in.readInt();
        idDestination = in.readInt();
        action = in.readInt();

        Bundle mapBundle = in.readBundle();
        data = (Map<String, Object>) mapBundle.getSerializable(MAP_KEY);
    }
} 
```

所以我创建了这个 Event 类的一个新实例，并将它传递给服务，如下所示：

```
/** Register with service */
private void registerWithService() {
    Event registerEvent = EventFactory.getEvent();
    registerEvent.setAction(EventAction.REGISTER);
    registerEvent.setIdSource(1);

    Bundle data = new Bundle();
    data.putParcelable(Event.BUNDLE_KEY, registerEvent);

    Message msg = new Message();
    msg.setData(data); // Exception thrown here in the Service
    msg.what = Event.MSG_WHAT;
    try {
        outMessenger.send(msg);
    } catch (RemoteException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

在这里，在远程服务中抛出异常的位置：

```
 public void handleMessage(Message msg) {
        if (msg.what == Event.MSG_WHAT) {
            // Get the data bundle
            Bundle bundle = msg.getData();
            // Extract the event from the message
            Event event = (Event) bundle.get(Event.BUNDLE_KEY); // Exception thrown here
            sendEvent(event);
        } else {
            Log.i(TAG, "Received non architecture message, dropping...");
        }
    } 
```

和堆栈跟踪：

```
07-09 12:38:10.947: E/AndroidRuntime(2234): FATAL EXCEPTION: main
07-09 12:38:10.947: E/AndroidRuntime(2234): android.os.BadParcelableException: ClassNotFoundException when unmarshalling: com.blabla.android.core.event.Event
07-09 12:38:10.947: E/AndroidRuntime(2234):     at android.os.Parcel.readParcelable(Parcel.java:1958)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at android.os.Parcel.readValue(Parcel.java:1846)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at android.os.Parcel.readMapInternal(Parcel.java:2083)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at android.os.Bundle.unparcel(Bundle.java:208)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at android.os.Bundle.get(Bundle.java:260)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at com.blabla.android.core.event.EventManager$EventHandler.handleMessage(EventManager.java:44)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at android.os.Looper.loop(Looper.java:123)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at android.app.ActivityThread.main(ActivityThread.java:3683)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at java.lang.reflect.Method.invoke(Method.java:507)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-09 12:38:10.947: E/AndroidRuntime(2234):     at dalvik.system.NativeStart.main(Native Method) 
```

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T12:11:29.253

在这种方法中，您永远不会将 Bundle 写入 Parcel：

```
public void writeToParcel(Parcel out, int flags) {

    out.writeInt(idEvent);
    out.writeInt(priority);
    out.writeInt(idSource);
    out.writeInt(idDestination);
    out.writeInt(action);

    Bundle mapBundle = new Bundle();
    mapBundle.putSerializable(MAP_KEY, (Serializable) data);
   // You need to actually write the Bundle to the Parcel here...
} 
```

**编辑为 ClassLoader 问题添加了额外的解决方案：**

`handleMessage()`在远程服务中设置类加载器，如下所示：

```
Bundle bundle = msg.getData();
bundle.setClassLoader(Event.class.getClassLoader());
Event event = (Event) bundle.get(Event.BUNDLE_KEY); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-18T23:21:27.497

到目前为止找到的唯一解决方案：

```
 val bundle = Bundle().apply {
        classLoader = YourClassName::class.java.classLoader
        putParcelable("deepLinkData", YourClassName(param1, param2, param3))
 } 
```

请注意，deepLinkData 是一个键，可以是任何东西

```
 val myIntent = Intent(Intent.ACTION_VIEW)
    myIntent.putExtra("deepLinkBundle", bundle) 
```

# javascript - asp.net 中的聊天应用程序

> ID：11393752
> 
> 赞同：0
> 
> 时间：2012-07-09T11:00:24.640
> 
> 标签：javascript, jquery, asp.net, ajax, wcf

我想为自动化网站创建聊天，因此客户端不会向服务器发送任何请求以进行响应，而是服务器在收到来自其他客户端的消息时向客户端发送响应

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:04:39.913

看看[SignalR](http://signalr.net/)：

> .NET 的异步库，可帮助构建实时、多用户交互式 Web 应用程序。

[SignalR：示例聊天应用程序](http://geekswithblogs.net/jeroenb/archive/2011/12/14/signalr-starter-application.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:03:07.997

维杰你需要实现反向 ajax 类型的东西。查看彗星和其他方法来做到这一点。[在这里](http://www.ibm.com/developerworks/web/library/wa-reverseajax1/index.html)查看

# jquery - jquery移动导航栏溢出

> ID：11393754
> 
> 赞同：2
> 
> 时间：2012-07-09T11:00:29.807
> 
> 标签：jquery, jquery-mobile

我正在构建一个 jQuery Mobile 应用程序，并在其标题上设置了一个导航栏小部件。结构就像一个常规的 jQM 导航栏（CSS 结构是 jQM 的默认结构）：

```
<nav data-role="navbar">
    <ul>
        <li><a href="">...</a></li>
        <li><a href="">...</a></li>
        <li><a href="">...</a></li>
        <li><a href="">...</a></li>
    </ul>
</nav> 
```

我希望导航栏有固定宽度的按钮和水平溢出，所以我可以通过一个 jQuery 脚本设置一个水平滚动导航栏，就像这里找到的那​​样：[JQM 水平滚动导航栏](https://stackoverflow.com/questions/5738446/jqm-horizontal-scroll-navbar)。

问题是，框架在没有更多按钮空间时总是创建一个新行：http: [//i.stack.imgur.com/pNrk5.png](https://i.stack.imgur.com/pNrk5.png)，但我的预期行为是这样的：[http://imgur .com/M8U1v](https://imgur.com/M8U1v)。

我尝试过修改 CSS 结构，设置溢出：隐藏、空白、固定高度导航栏等，但到目前为止没有成功。

我在这里错过了什么吗？

# ldap - 如何在 LDIF 文件中定义国家对象类？

> ID：11393758
> 
> 赞同：1
> 
> 时间：2012-07-09T11:00:43.360
> 
> 标签：ldap

我需要具有以下 dn 格式：c=,o=organisation,dc=xxx,dc=net 并且我定义了以下 ldif 文件：

```
dn: c=France,o=BMP,dc=myComp,dc=net
c: FR
objectClass: c
description: French officies 
```

但 ldapAdd 说该 ldif 文件有问题，输出以下错误：

```
ldap_add: Invalid syntax (21) additional info: objectClass: value #0 invalid per syntax 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:59:52.840

`c`不是一个`objectClass`，它是一个属性。该条目应包含`objectClass`允许该`c`属性的一个，例如：

```
dn: c=France,o=BMP,dc=myComp,dc=net
c: FR
objectClass: country
objectClass: top
description: French officies 
```

### 也可以看看

*   [RFC4519](https://www.rfc-editor.org/rfc/rfc4519#section-3.2)

# html - CSS 模拟 div 中的简单表格

> ID：11393760
> 
> 赞同：0
> 
> 时间：2012-07-09T11:00:48.587
> 
> 标签：html, css, html-table

我使用了一些 AJAX 将 HTML 输出到 div。

我以为 AJAX 会让我显示一个表格，但由于它输出到一个 div，结果证明它没有。 `<td>`代码等被忽略。无论如何，我知道无表格显示被认为更好，但是我在 CSS 方面非常薄弱。

谁能建议如何在没有表格的情况下显示以下简单输出。当文本长度不同时，我主要需要使列对齐。

### HTML

```
<div id="displayhere"></div> 
```

### 输出我想进入 div 除了不确定如何将表格放入 div：

```
<tr><td colspan=2>Heading</td></tr>
<tr><td>Short text option 1</td><td><input type="checkbox"></td></tr>
<tr><td>Really long text Option 2</td><td input type="checkbox"></td></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:04:15.000

所有你需要做的，以简化的形式是：

```
var output = '<tr><td colspan=2>Heading</td></tr><tr><td>Short text option 1</td><td><input type="checkbox"></td></tr><tr><td>Really long text Option 2</td><td><input type="checkbox"></td></tr>',
    table = $('<table />').appendTo('#displayhere'),
    tbody = $('<tbody />').html(output).appendTo(table); 
```

[JS Bin 演示](http://jsbin.com/ezonuy/4/edit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:11:54.700

您可以在 div 标签内有表格..以下工作正常

```
<div id="displayhere">
<table>
<tr>
    <td colspan=2>Heading</td>
</tr>
<tr>
    <td>Short text option 1</td>
    <td><input type="checkbox"></td>
</tr>
<tr>
    <td>Really long text Option 2</td>
    <td> <input type="checkbox"></td></tr>
</table>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T11:17:35.617

正如[@DavidThomas 暗示](https://stackoverflow.com/a/11393803/20578)的那样，您可以在 a 中有一个 HTML 表格，如果不将它们包装在标签中`<div>`，您就不能拥有标签。`<tr>``<table>`

我注意到您要插入的 HTML 也可以通过以下几种方式进行改进：

1.  表格内的标题单元格有一个标签：`<th>`. 如果标题适用于多行，那么您应该将这些行包装在`<tbody>`标签中，并将`scope`属性设置`<th>`为`rowgroup`

2.  当您为表单控件添加标签时，您应该将标签文本包装在一个`<label>`元素中，并将`<label>`'`for`属性设置`id`为其表单控件的 。

这是改进的代码。屏幕阅读器用户会发现处理此代码更容易：

```
<tbody>
    <tr>
        <th scope="rowgroup" colspan="2">Heading</th>
    </tr>
    <tr>
        <td><label for="option1">Short text option 1</label></td>
        <td><input id="option1" type="checkbox"></td>
    </tr>
    <tr>
        <td><label for="option2">Really long text Option 2</label></td>
        <td><input id="option2" type="checkbox"></td>
    </tr>
</tbody> 
```

# python - 在一个 Python 进程中接收 HTTP 请求，从另一个进程中回复

> ID：11393770
> 
> 赞同：1
> 
> 时间：2012-07-09T11:01:28.917
> 
> 标签：python, events, io, response, multiprocessing

我可以以某种方式将响应对象从一个进程“移动”到另一个进程吗？

第一个进程是执行其他 IO 的非阻塞服务器。它需要在 Tornado 或 Twisted 等非阻塞环境中完成。

需要另一个进程（实际上是“工作”进程池）来使用 PIL 处理图像。由于 GIL，我无法在线程中执行此操作。但是，工作人员需要获取响应对象的文件句柄才能将结果写入其中，或者它应该将结果返回给第一个进程，并且由于结果可能非常大（~1 mb），它不会似乎是个好主意。（它可能是一个单独的进程池，而不是每个请求的分叉 - 后一个似乎是一个糟糕的策略）

那么，我可以以某种方式允许工作进程直接写入响应吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:36:49.073

你不能。一个进程一次只能访问一个端口，如果不访问该端口，您将无法直接响应。

但你不需要那个。你需要的是**代理**！您可以向您的应用程序添加一个线程，该线程将侦听不同的端口。然后您启动您的图像进程，当该进程完成其工作时，您可以将结果发送到端口。然后你的线程将读取它并发送响应。

# excel - 使用 JIRA 图表动态创建 MS Word 报告？

> ID：11393776
> 
> 赞同：1
> 
> 时间：2012-07-09T11:01:53.697
> 
> 标签：excel, ms-word, jira

每个月我都必须为我的团队手动创建一份报告。为此，我使用了从我编写的 groovy 脚本生成的数字组合、屏幕截图、从 JIRA 实例中的一系列图表中剪切和粘贴以及剪切和粘贴的 Excel 图表。

我发现手动执行此操作越来越无聊，并且我怀疑有一种更简单的方法可以自动生成此报告。我可以使用这个应用程序（http://www.docmosis.com/）从 groovy 脚本中生成带有数据的 word 文档，但我还没有找到一种在生成或 excel 中自动包含 JIRA 图表的方法，所以我的问题是：

是否可以生成包含来自各种来源的生成数据的 word 文档，包括（按重要性顺序）：

*   JIRA 图表
*   以编程方式生成数据和
*   Excel图表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:53:33.253

由于您已经在 Groovy 中编写了逻辑代码，因此最好跳过 Excel 步骤并**使用 JIRA PDF View Plugin 直接从 JIRA 生成报告**。这个插件将您的工作减少到单击并下载一个漂亮的 PDF 文档（PDF 比 Word 文档更便携）。

这些简短的教程可以帮助您：

1.  [重用您的 Groovy 脚本来报告逻辑](http://midori.hu/products/jira-pdf-view-plugin/documentation/)（另请参阅那里的“图表”教程）
2.  [将数据、图表和模板放在一起](http://midori.hu/products/jira-pdf-view-plugin/documentation/template-development)

*在我的原始答案后 2 年更新：*

**JIRA PDF View Plugin 3.5.0+ 还可以导出 JIRA 图表**（准确地说是 JIRA 仪表板中的小工具）。因此，现在您可以执行 Groovy 脚本、包含 JIRA 图表并将所有结果整合到专业的 PDF 文档中。

更好的是，现在有一个免费插件可以让您的每月流程 100% 自动化！它将根据首选计划（CRON 触发器）生成您的 PDF 文档并将其发送到您的团队成员的邮箱。

相关教程：

1.  [将 JIRA 仪表板导出为 PDF](http://www.midori-global.com/products/jira-pdf-view-plugin/documentation/dashboards)

2.  [自动化 JIRA PDF 导出](http://www.midori-global.com/products/jira-pdf-view-plugin/documentation/automation)

Discl：我是开发这些产品的开发人员，但这是解决您的问题的最佳方法。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T00:47:37.000

Jira 中生成的大多数图表都是根据搜索结果返回的数据创建的。因此，您可以使用 REST 或 SOAP api 从 Jira 获取数据，并通过其他方式生成您自己的图表。

我不确定是否有一种无编码的方法。但我会编写一个 C# 程序，将数据从您的来源（Jira、其他程序、Excel）添加到 Word 模板。并且会创建一个从插入的数据生成图表的模板。

对于 Word 文档生成，我会在这里查看 -http://www.codeproject.com/Articles/20287/Generating-Word-Reports-Documents

对于文档中的图表创建，我会在这里查看 - [http://office.microsoft.com/en-us/word-help/create-a-chart-in-a-document-HP005190046.aspx](http://office.microsoft.com/en-us/word-help/create-a-chart-in-a-document-HP005190046.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:40:00.947

如果您先将 JIRA 图表转换为图像，则最简单。当您说 JIRA 图表时，您的意思是来自[这个插件](https://studio.plugins.atlassian.com/svn/JCHART/trunk/)的东西吗？

一旦你有了一张图片，你的文档生成工具应该能够包含它。

有许多文档生成工具可以包括以编程方式生成的数据，其中一些可以包括 Excel 图表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T06:19:23.483

现在有一个 JIRA 插件可以在 Word 文档中生成图表，这可能会对您有所帮助。 [https://marketplace.atlassian.com/plugins/com.clariostechnology.officecharts.officecharts](https://marketplace.atlassian.com/plugins/com.clariostechnology.officecharts.officecharts)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T23:12:29.987

现在还有用于 JIRA 的 Intelligent Reporter，它是一种从 JIRA 数据创建 word 文档的无代码方法，包括具有 JIRA 数据完整格式的原生 Word 图表。

[https://marketplace.atlassian.com/plugins/com.clariostechnology.intelligentreports](https://marketplace.atlassian.com/plugins/com.clariostechnology.intelligentreports)

免责声明：我为创建此插件的公司工作。如果有什么你需要它不能做的，请告诉我。

# php - PHP5 在类中使用类

> ID：11393780
> 
> 赞同：0
> 
> 时间：2012-07-09T11:02:03.447
> 
> 标签：php, oop

我试图在一个类中使用一个类，但似乎对类的初始化内容有问题。如果您执行 var_dump，它可以很好地看到类结构，但它不会看到您初始化的内容。我知道我可能错过了一些非常明显的东西，任何指针都会很棒。下面是一个例子...

```
class firstClass()
{

    public $thedate;

    function __construct()
    {
        $this->thedate = date();
    }

}

class secondClass()
{

    public $datefrom1stclass;

    function __construct()
    {
        $this->datefrom1stclass = new firstClass;

        echo $this->datefrom1stclass->thedate;

    }

} 
```

抱歉，如果我没有很好地解释，如果我执行 var_dump，我会得到以下信息：

```
object(firstClass)#3 (1) { ["thedate"]=> NULL } 
```

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:08:32.393

您不应该在没有任何参数的情况下调用[date()](http://php.net/manual/en/function.date.php)：至少应该给出一个（格式，作为字符串）：

```
$this->thedate = date('D M j G:i:s T Y'); 
```

您的其余代码是正确的（尽管我更喜欢`new firstClass()`带括号的形式 - 它更具可读性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:26:30.057

这是正确的代码:) 享受`

```
public $thedate;

function __construct()
{
    $this->thedate = date("Ymd");
} 
```

}

第二类{

```
public $datefrom1stclass;

function __construct()
{
    $this->datefrom1stclass = new firstClass;

    echo $this->datefrom1stclass->thedate;

} 
```

} $var = 新的 secondClass(); var_dump($var); ?> `

# php - javascript数组到字符串JSON

> ID：11393782
> 
> 赞同：0
> 
> 时间：2012-07-09T11:02:17.390
> 
> 标签：php, javascript, arrays, json, codeigniter

首先，我是 php 和 javascript 的新手

我有一个网络表单，用户可以在其中添加多个联系人并发送到服务器。

由于某些原因，我不能使用普通的 html 元素来存储值，所以我使用数组来存储值。

```
//init array

var contacts = new Array(); //contact array

var tempArray = new Array(); //temp array to store current contacts

//getting the contact info and setting to a temp array

tempArray = {
      name:"username",
      age:12,
      sex:false
     };

//push the content to the `contacts` array

contacts.push(tempArray); 
```

我在数组中添加了许多联系人`contacts`，现在我需要将数组提交到服务器。

**问题**

我正在使用 Codeignitor 和 Malsup FORM 插件。

根据malsup，我可以像这样配置数据选项

```
var options = { 

dataType:'json', //type of data
data:[contactArray:contacts], //additional parm

    }; 
```

在`ajaxSubmit`选项上，我可以将此选项作为参数。

当我这样做时，我收到以下错误

```
uncaught exception: [Exception... "Component returned failure code: 0x80460001 (NS_ERROR_CANNOT_CONVERT_DATA) [nsIDOMFormData.append]"  nsresult: "0x80460001 (NS_ERROR_CANNOT_CONVERT_DATA)"  location: "JS frame :: /js/form.js :: fileUploadXhr :: line 224"  data: no]
temp/jquery.min.js
Line 4 
```

它适用`$.POST`于 jQuery。

所以我尝试`JSON.stingify()`将数据转换为字符串。

但是在服务器上我变得像这样

```
'contactArray' => string '[{"name":"username","sex":"12","sex":"false"}]' 
```

如果我使用了，`json_decode`那么我不能使用表单验证。

我想在 CODEIGNITOR 中使用表单验证库。

CI 支持元素数组的验证。

所以

如果我得到类似的东西，`name[],age[],sex[]`那么我可以轻松验证。

请帮我解决问题或给我建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:08:26.370

此代码不创建数组：

```
tempArray = {
      name:"username",
      age:12,
      sex:false
     }; 
```

它创建一个对象（完全覆盖您之前分配的空白数组`tempArray`）。

> 如果我得到类似 name[],age[],sex[] 的信息，那么我可以轻松验证。

如果需要，您可以创建看起来像这样的发布数据，作为发送数据之前的准备步骤。这很容易::

```
function prepContacts(contacts) {
    var result = []; // Build up string in array, we'll join at the end
    var nameKey, ageKey, sexKey;

    // I've put [] in these because you use PHP
    nameKey = encodeURIComponent("name[]");
    ageKey = encodeURIComponent("age[]");
    sexKey = encodeURIComponent("sex[]");

    for (index = 0; index < contacts.length; ++index) {
        contact = contacts[index];
        result.push(nameKey + "=" + encodeURIComponent(contact.name));
        result.push(ageKey + "=" + encodeURIComponent(contact.age));
        result.push(sexKey + "=" + encodeURIComponent(contact.sex));
    }

    return result.join("&");
} 
```

然后通过以下方式发布`$.ajax`：

```
$.ajax({
    url: "/path/to/resource",
    type: "POST",
    data: prepContacts(contacts),
    success: function(response) {
        // POST worked, but you have to check response for whether
        // it worked at the logic level
    },
    error: function() {
        // POST failed
    }
}); 
```

# proxy - nutch：通过goagent代理爬行

> ID：11393784
> 
> 赞同：1
> 
> 时间：2012-07-09T11:02:26.927
> 
> 标签：proxy, nutch

我现在正在学习用 Nutch 抓取页面。但是有一个我无法解决的问题。我想通过本地代理服务器抓取页面，地址为 127.0.0.1:8087。并且服务器运行良好（我的 FireFox 可以很好地使用它）。在 Nutch-conf 文件 conf/nutch-site.xml 中，我添加了一些属性如下：

**http.agent.host--> 127.0.0.1**

**http.proxy.port-->8087**

我的本地服务器不需要任何身份验证。

Nutch 可以成功运行，但不通过代理请求。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T12:43:09.040

只需将这些属性添加到 nutch-site.xml （将 XXXX 替换为正确的值）

```
<property>
  <name>http.proxy.host</name>
  <value>XXXXXX</value>
  <description>The proxy hostname.  If empty, no proxy is used.</description>
</property>

<property>
  <name>http.proxy.port</name>
  <value>XXXXXXXX</value>
  <description>The proxy port.</description>
</property> 
```

如果您需要身份验证：

```
<property>
  <name>http.proxy.username</name>
  <value></value>
  <description>Username for proxy. This will be used by
  'protocol-httpclient', if the proxy server requests basic, digest
  and/or NTLM authentication. To use this, 'protocol-httpclient' must
  be present in the value of 'plugin.includes' property.
  NOTE: For NTLM authentication, do not prefix the username with the
  domain, i.e. 'susam' is correct whereas 'DOMAIN\susam' is incorrect.
  </description>
</property>

<property>
  <name>http.proxy.password</name>
  <value></value>
  <description>Password for proxy. This will be used by
  'protocol-httpclient', if the proxy server requests basic, digest
  and/or NTLM authentication. To use this, 'protocol-httpclient' must
  be present in the value of 'plugin.includes' property.
  </description>
</property> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:30:12.270

我遇到了一些类似的问题。不确定是否相同。我从终端为这些设置路径并运行 Nutch。它工作得很好。我没有在 Nutch 中进行任何其他附加设置。它适用于 Ubuntu，但不知何故它不适用于 mac。让我知道它是否有效。

```
 export http_proxy=http://server-ip:port/
    export http_proxy=http://127.0.0.1:8087/
    export http_proxy=http://proxy-server.mycorp.com:8087/ 
```

# java - java.sql.SQLException: ORA-01461: 只能绑定 LONG 值以插入 LONG 列

> ID：11393786
> 
> 赞同：4
> 
> 时间：2012-07-09T11:02:35.673
> 
> 标签：java, jdbc, oracle11g, blob

我正在使用一个简单的界面（在 jsf 1.2 和 Rich faces 3.3.2，Oracle 11g R1 中）让用户选择带有rich:fileUpload 的图片并保存在表格中。作为测试，我创建了下表。

```
CREATE TABLE TEST
(
 MIME_TYPE VARCHAR2 (1000),
 PHOTO BLOB,
 STUDENT_ID NUMBER NOT NULL
) 
```

将图片保存到 BLOB 字段的代码片段如下。

```
//......From the uploadFile Listener
public void listener(UploadEvent event) throws Exception {
...      
item = event.getUploadItem();
...
StudentPhotoDAO dao = new StudentPhotoDAO();
dao.storePhoto(item.getData(),item.getContentType(),studentId);
...
}

//......From the PhotoDAO ..........................

public void storePhoto(byte data[],String mimeType, Long studentId){
{
 ...
  ByteArrayInputStream bis=new ByteArrayInputStream(data);
  String query = "update  TEST set PHOTO = ? ,MIME_TYPE = ?  where STUDENT_ID=?";
  pstmt = conn.prepareStatement(query);
  pstmt.setAsciiStream(1,(InputStream)bis,data.length);
  pstmt.setString(2,mimeType.toString());
  pstmt.setLong(3,studentId);
  pstmt.executeUpdate();
 } 
```

我收到以下错误：

```
java.sql.SQLException: ORA-01461: can bind a LONG value only for insert into a LONG column 
```

请问代码中的错误在哪里。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:10:49.177

您指定`student_id`as `number`，它似乎映射到`BigInteger`. 参见例如[这张表](http://docs.oracle.com/cd/B19306_01/java.102/b14188/datamap.htm)。

您要么提供 a `BigInteger`，要么需要更改`student_id`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:07:39.167

看[Oracle LONG 类型说明](http://www.orafaq.com/wiki/LONG)：“LONG 是一种 Oracle 数据类型，用于存储字符数据……”。所以 LONG 不是 Oracle 中的数字。这是一个文本。

我认为您收到此错误是因为： `pstmt.setAsciiStream(1,(InputStream)bis,data.length);`

尝试使用`pstmt.setBinaryStream(int, InputStream, int)`或`pstmt.setBinaryStream(int, InputStream, long)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:40:08.293

你在打电话

```
pstmt.setLong(3,studentId); 
```

并且您将列指定为

```
STUDENT_ID NUMBER NOT NULL 
```

以及文档如何说：

> 试图将 LONG 数据类型中的值插入另一个数据类型。这是不允许的。

所以就这样吧：

```
STUDENT_ID INTEGER NOT NULL
pstmt.setInt(3, studentId); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-08T22:36:25.753

在 Oracle 中将大型二进制流绑定到 BLOB 列时，请使用`PreparedStatement.setBlob()`而不是`setAsciiStream()`或`setBinaryStream()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-18T17:12:44.027

我想使用 ASCII 流是罪魁祸首。

```
pstmt.setAsciiStream(1, (InputStream) bis, data.length); 
```

尝试

```
pstmt.setBinaryStream(1, new ByteArrayInputStream(data)); 
```

（看起来 Oracle 将带有长度参数的 ASCII 流解释为不能超过 4000 字节的 LONG。但这只是一个未经证实的猜测。）

# c# - C# 使用多个 XML 声明反序列化 XML

> ID：11393787
> 
> 赞同：0
> 
> 时间：2012-07-09T11:02:52.800
> 
> 标签：c#, xml, xml-deserialization

第三方供应商向我们提供了格式不正确的 XML。它有多个 XML 声明：

```
<?xml version="1.0" encoding="utf-16"?><!DOCTYPE bob />
<?xml version="1.0"?><!DOCTYPE jim>

<elements>
...
</elements 
```

我的反序列化代码：

```
 var serializer = new XmlSerializer(response.GetType());

                reader = new XmlTextReader(stream) {XmlResolver = null};

                result = (IResponse) serializer.Deserialize(reader); 
```

我遇到的问题是反序列化程序抱怨多个 XML 声明。有什么办法可以去掉声明，以便 XML 成功反序列化？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:17:22.310

您可以围绕 a 编写一个包装器`XmlReader`，它会过滤掉后续的 xml 处理指令和文档类型。

```
public class XmlFilteringReader : XmlReader
{
    private readonly XmlReader _source;
    private bool _gotXmlDeclaration = false;
    private bool _gotDoctype = false;

    public XmlFilteringReader(XmlReader source)
    {
        _source = source;
    }

    public override bool Read()
    {
        var ok = _source.Read();
        if (ok && _source.NodeType == XmlNodeType.ProcessingInstruction
                && _source.LocalName == "xml")
        {
            if (_gotXmlDeclaration) return Read(); // Recursive
            _gotXmlDeclaration = true;
        }
        else if (ok && _source.NodeType == XmlNodeType.DocumentType)
        {
            if (_gotDoctype) return Read(); // Recursive
            _gotDoctype = true;
        }
        return ok;
    }

    // Implementation of other methods and properties
    // by calling the same method or property on _source
} 
```

```
var serializer = new XmlSerializer(response.GetType());
var reader = new XmlFilteringReader(new XmlTextReader(stream) {XmlResolver = null});
var result = (IResponse) serializer.Deserialize(reader); 
```

可以通过使用 Mvp.Xml 库来[`XmlWrappingReader`](https://mvpxml.svn.codeplex.com/svn/Library/Main/Source/Common/XmlWrappingReader.cs)简化[实现](https://mvpxml.codeplex.com/)。还有[一篇](http://www.tkachenko.com/blog/archives/000585.html)关于此的博客文章。

# c# - 为什么我们要参考其他项目？

> ID：11393788
> 
> 赞同：1
> 
> 时间：2012-07-09T11:02:56.360
> 
> 标签：c#, visual-studio-2010, inheritance, reference, namespaces

在查看具有多个项目的解决方案时：

1）为什么要添加对其他项目的引用？我们不能只使用继承吗？

2）使用Visual Studio添加引用后，为什么还要将项目添加到命名空间系统？例如：`using myReferenceProject;`我认为 IDE 会这样做。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using myReferenceProject;
using System.Data.SqlClient;
using System.Data; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T11:05:00.910

> 1）为什么我们要参考其他项目？我们不能只使用继承吗？？？

他们是两个*完全*不同的概念。

添加对另一个程序集的引用基本上是说：“我希望能够使用其中的一些代码。请让编译器知道此代码存在，并可选择将其复制到输出目录中，以便它在执行时也存在。”

如果编译器不知道该类型，您将如何使用继承来创建从某种类型派生的类？

> 2）在我们使用visual studio IDE给出参考之后，为什么我们必须将项目添加到命名空间系统？？？

因为程序集和命名空间也是不同的概念。指令只是对`using`编译器说“当我在代码中引用类型时`Foo`，请查看这些名称空间以尝试解析它。” 该类型可能来自您引用的*任何程序集。*

了解程序集和命名空间之间的区别非常重要。尽管它们的名称*通常*相似（`Foo.Bar.dll`通常在命名空间中提供类型`Foo.Bar`），但它们在*概念上*是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:06:10.553

该项目是一个*自给自足*的可编译单元，*必须编译*成有效的汇编文件。**这就是为什么您需要特别指定每个**项目需要哪些引用，以便能够与其他项目*分开*编译。

项目级别没有任何*继承*概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:09:14.693

> 1）为什么我们要参考其他项目？我们不能只使用继承吗？

这个问题没有意义。继承与项目引用有什么关系。你能详细说明吗？

> 2）在我们使用Visual Studio IDE提供参考之后，为什么我们必须将项目添加到命名空间系统？

因为在引用另一个程序集的程序集（添加对项目的引用时会发生这种情况）和知道在哪里找到*类的**语言*之间存在固有差异，当您在文件中使用指令时会发生这种情况。*`using`*

 *例如，假设您在项目中创建了一个名为`TextBox`. 然后在另一个文件中你想使用那个类。语言如何知道您是在引用自定义`TextBox`类还是引用程序集中的另一个类？这个问题的答案是*命名空间*。通过使用其名称空间完全限定类名，您可以告诉编译器您正在使用哪个类。

该`using`指令是一种为每个文件指定命名空间一次的方法，而不是每次使用该类（或该命名空间中的其他类）时。因此，如果您需要`TextBox`在一个文件中多次引用您的类，您不会希望*每次*都写这个：

```
MyCodebase.MyAssembly.MyNamespace.MyOtherNamespace.SomethingElse.TextBox 
```

相反，您包含`using`整个命名空间的指令，因此您只需编写以下代码：

```
TextBox 
```*

# facebook - FB.ui send 不会向用户发送消息

> ID：11393790
> 
> 赞同：0
> 
> 时间：2012-07-09T11:02:59.273
> 
> 标签：facebook, api, fb.ui

我有一个连接 Facebook API 的网站。用户通过 Facebook 获得以下权限：offline_access、user_birthday、read_stream、publish_stream、email、user_about_me、user_website、user_location

我有他的朋友列表（用户被授予访问权限）和每个人的“发送消息”按钮。当用户单击按钮时，我使用以下选项调用 fb.ui 方法：

```
app_id:      fb_app_id,
to:          fb_user_id,
method:      'send', 
name:        'Message Title',
description: 'Message Text',
picture:     '/images/fb-icon-180x180.png',
link:        'http://facebook.com/' 
```

对话框本身显示正确（我想发送给的人是正确的），但是当我单击保存时，显示一个空白页面并且没有发送任何消息。

是权限问题还是我的代码中有错误？我在有和没有 app_id 的情况下都试过了，但没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:54:05.487

问题解决了。Facebook 似乎需要在您在 fb.ui 选项中使用的链接上使用 200 响应状态代码。我在那里有一个 301 重定向——这就是它不起作用的原因。

# javascript - 如何检测多个样式表何时被javascript动态注入

> ID：11393794
> 
> 赞同：0
> 
> 时间：2012-07-09T11:03:15.067
> 
> 标签：javascript

我有以下函数，当相应的 HTML 也注入页面时，它会在样式表中动态加载。

这一切都很好。注入的 html 是隐藏的，一旦它的样式表被加载，它就会被设置为可见。

```
function _addCssFile(filename, fragment) {

                var stylesheet = doc.createElement("link");
                stylesheet.setAttribute("rel", "stylesheet");
                stylesheet.setAttribute("type", "text/css");
                stylesheet.setAttribute("href", filename);
                doc.getElementsByTagName("head")[0].appendChild(stylesheet);

            stylesheet.onload = function(){
                fragment.setAttribute("style", "visibility:visible;");
            }          
} 
```

但是，有可能一段 html 有多个要注入的 css 文件，因此我需要能够检测到数组中的所有 css 文件何时已成功注入 DOM。

上面的函数针对每个包含的 css 文件运行，一旦注入了整个样式表数组，我将如何触发事件？如您所见，注入的 html 当前将设置为对于第一个加载的样式表可见，并且对于每个后续文件再次设置为可见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:05:28.653

有一个柜台。对于添加的每个 CSS 文件，递增计数器。对于每个加载的 CSS 文件，将其递减。如果在添加所有 CSS 文件后计数器达到零，则它们已全部加载。

# asp.net-mvc-3 - 我什么时候必须处理我的上下文

> ID：11393801
> 
> 赞同：0
> 
> 时间：2012-07-09T11:04:04.643
> 
> 标签：asp.net-mvc-3, entity-framework, telerik-mvc

我有使用 MVC 的项目，并且我有实例化服务的控制器，该服务管理存储库，并在存储库中进行 CRUD 操作。问题是，一旦我用我的服务中的数据填充我的网格控件（Telerik），如果我进行更新并刷新数据，它就会出现旧数据而不是新数据。我认为这是我的上下文变量的持久性问题，需要处理/实例化但不太确定何时何地（工作单元变量位于服务中）。

```
 <HttpPost()>
    <GridAction()>
    Function Edit(id As Integer, name As String, clientNo As String, image As String, unit As String) As ActionResult
        Try
            Dim org = Me._orgService.GetOrgById(id)

            With org
                .orgNAME = name
                .orgCLIENTNO = clientNo
                .orgIMAGE = image
                .orgUNIT = unit
            End With

            TryUpdateModel(org)
            Me._orgService.EditOrg(org)
        Catch ex As Exception
            'Log the error 
            ModelState.AddModelError("", MS_UNABLE_SAVE_CHANGES)
            Response.StatusCode = 500
            Return Content(String.Join("", (From state In ModelState Select state).SelectMany(Function(s) s.Value.Errors).Select(Function(e) e.ErrorMessage).ToArray()))
        End Try

        Return View(New GridModel(All()))

    End Function 
```

这是服务

```
 Public Sub EditOrg(org As hdmtORG) Implements IOrgService.EditOrg
        Me._context.OrgRepository.Edit(org)
        Save()
    End Sub 
```

这是存储库（通用）

```
 Public Overridable Sub Update(entity As TEntity) Implements IEntityRepository(Of TEntity).Edit
        Me._objectSet.Context.ObjectStateManager.ChangeObjectState(entity, EntityState.Modified)
    End Sub 
```

任何的想法？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:11:00.053

尝试使用`<OutputCache(Duration:=0)> _`

```
<OutputCache(Duration:=0)>
<HttpPost()>
    <GridAction()>
    Function Edit(id As Integer, name As String, clientNo As String, image As String, unit As String) As ActionResult 
```

# java - Android布局编辑器错误

> ID：11393804
> 
> 赞同：0
> 
> 时间：2012-07-09T11:04:20.807
> 
> 标签：java, android, android-layout

当我尝试查看 XML 的图形布局时遇到错误。我在错误日志中收到以下错误。

> java.lang.NoSuchFieldError：在 android.content.res.Configuration.updateFrom(Configuration.java:507) 在 android.content.res.Resources.updateConfiguration( Resources.java:1450) 在 android.content.res.Resources.updateConfiguration(Resources.java:1408) 在 android.content.res.Resources.(Resources.java:205) 在 android.content.res.Resources.(Resources .java:185) 在 android.content.res.BridgeResources.(BridgeResources.java:118) 在 android.content.res.BridgeResources.initSystem(BridgeResources.java:97) 在 com.android.layoutlib.bridge.android.BridgeContext .initResources(BridgeContext.java:155) 在 com.android.layoutlib.bridge.impl.RenderAction.setUp(RenderAction.java:227) 在 com.android.layoutlib.bridge.impl.RenderAction.init(RenderAction.java:121) 在 com.android.layoutlib.bridge.impl.RenderSessionImpl.init(RenderSessionImpl.java:165) 在 com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:320) 在 com.android.ide.common .rendering.LayoutLibrary.createSession(LayoutLibrary.java:325) 在 com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372) 在 com.android.ide.eclipse .adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1317) 在 com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1071)在 com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditor 的 com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:897)。pageChange(LayoutEditor.java:384) at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:291) at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:228) at org. eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 在 org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003) 在 org.eclipse.swt.widgets.Widget.sendEvent(Widget. java:1027) 在 org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1012) 在 org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:770) 在 org.eclipse.swt.custom .CTabFolder.setSelection(CTabFolder.java:3256) 在 org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:2045) 在 org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:323)在 org.eclipse.swt.widgets 的 org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)。org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3910) 的 Widget.sendEvent(Widget.java:1003) org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3503) 的 org .eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2405) 在 org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2369) 在 org.eclipse.ui.internal.Workbench.access$4( Workbench.java:2221) 在 org.eclipse.ui.internal.Workbench$5.run(Workbench.java:500)internal.Workbench$5.run(Workbench.java:500)internal.Workbench$5.run(Workbench.java:500)

我已附上屏幕截图。我试图搜索此问题的解决方案。有些地方据说更新了java。我也更新了Java。

![在此处输入图像描述](../Images/5b41c0db3a1d174884b24fdfe358e68f.png) 提前致谢。

# compression - 如何在 Minify 中全局禁用缩小

> ID：11393805
> 
> 赞同：1
> 
> 时间：2012-07-09T11:04:22.633
> 
> 标签：compression, minify

我正在使用 Minify - [http://code.google.com/p/minify/](http://code.google.com/p/minify/)将我的 .js 文件合并为一个，但 Minify 也在缩小/压缩 JavaScript 文件，我不希望这样。我知道有一个调试模式，但我也不想要那个，我只是一个全局配置 Minify 只是为了组合 groupsConfig.php 中的指定文件/组，仅此而已。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:24:44.747

在 2.5.1 版本中，您可以将其放在 config.php 中：

```
$min_serveOptions['minApp']['noMinPattern'] = '#\.(?:js|css)$#i'; 
```

这意味着所有以 js 或 css 结尾的文件都不会被缩小。此选项通常用于避免压缩所有已压缩的文件，如 '*.min.js' 或 smilar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T06:56:52.980

[如果您想暂时禁用缓存而不使用调试模式，请将这些设置放在 config.php 的末尾：](https://code.google.com/p/minify/wiki/CommonProblems)

```
// disable server caching
$min_cachePath = null;
// prevent client caching
$min_serveOptions['maxAge'] = 0;
$min_serveOptions['lastModifiedTime'] = $_SERVER['REQUEST_TIME']; 
```

# jquery - jQuery中的命名空间函数

> ID：11393811
> 
> 赞同：5
> 
> 时间：2012-07-09T11:04:45.580
> 
> 标签：jquery

这两段代码有什么区别？两者都运行良好，那么为什么要在函数中使用 .dropdown.data-api 呢？我在互联网上阅读了有关命名空间的信息，但对此我不清楚。谁能告诉我命名空间函数的用途是什么？

```
$('html').on('click.dropdown.data-api',
  function () {
    $el.parent().removeClass('open')
  })
}

$('html').on('click',
  function () {
    $el.parent().removeClass('open')
  })
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T11:13:00.610

如果您希望取消绑定或触发它，则命名事件允许您定位特定事件。

想象一下，您有两个相同类型的事件绑定到相同的元素。

```
$('.something').on('click', function() { /* do something */ });
$('.something').on('click', function() { /* do something else */ }); 
```

由于我们没有为任一事件命名空间，因此现在很难解除绑定或触发其中一个但不能触发另一个。现在考虑：

```
$('.something').on('click.one', function() { /* do something */ });
$('.something').on('click.two', function() { /* do something else */ }); 
```

因为这一次每个事件都有自己的命名空间，我们现在可以触发或取消绑定其中一个，而另一个保持不变。

```
$('.something').off('click.one'); //unbind the 'one' click event
$('.something').trigger('click.two'); //simulate the 'two' click event 
```

[**编辑**- 正如@jfrej 在下面指出的那样，命名空间意味着您有时甚至不需要引用事件类型名称。因此，如果您在单个命名空间上同时有鼠标悬停和单击事件，则可以使用 .] 解除两者的绑定`off('.namespace')`。]

# stringtemplate - 如何摆脱 StringTemplate 警告“\n in string”

> ID：11393815
> 
> 赞同：1
> 
> 时间：2012-07-09T11:05:02.990
> 
> 标签：stringtemplate, stringtemplate-4

我正在使用 StringTemplate 4 来生成一些 Java 源文件。

模板非常简单，例如：

```
QueryHandler(method) ::="
public class Obtenir<method.name>Handler extends QueryHandler\<List\<<method.name>Db>> implements IQueryHandler\<List\<<method.name>>>{
    private IQuery\<List\<<method.name>Db>> query;
    private <method.name>Converter converter;

    @Inject
    public Obtenir<method.name>Handler(IQuery\<List\<<method.name>Db>> query, <method.name>Converter converter, IStatisticsCollecter theStatsCollecter){
        super(theStatsCollecter);
        if(query == null){
            throw new IllegalArgumentException(\"The query argument cannot be null\");
        }
        if(converter == null){
            throw new IllegalArgumentException(\"Illegal argument for converter(null)\");
        }
        this.query = query;
        this.converter = converter;
    }

    public List\<<method.name>> handle(Object... params) throws JdbcException {
        final String method = \"obtenir<method.name>\";
        DaoQueryStatusCallable status = new DaoQueryStatusCallable();
        List\<<method.name>Db> result = invoke(query, status, method);
        return converter.convert(result);
    }

 }
" 
```

代码更简单：

```
STGroup group = new STGroupFile("src/main/resources/QueryHandler.stg");
ST wsTemplate = group.getInstanceOf("QueryHandler");
wsTemplate.add("method", m);
System.out.println(wsTemplate.render()); 
```

模板行由 Unix EOL (\n) 分隔。当我执行代码时，StringTemplate 发出警告“QueryHandler.stg 1:25: \n in string”。

结果是正确的，但我仍然想摆脱这条消息。

有人遇到过这个问题并且知道如何解决吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T15:25:42.300

t() ::= "..." 仅用于单行。请用

```
t() ::= <<
...
>> 
```

获取多行模板。三

# arrays - 将文件中的行读入 Bash 数组

> ID：11393817
> 
> 赞同：241
> 
> 时间：2012-07-09T11:05:27.447
> 
> 标签：arrays, bash

我正在尝试将包含行的文件读入 Bash 数组。

到目前为止，我已经尝试了以下方法：

# 尝试1

```
a=( $( cat /path/to/filename ) ) 
```

# 尝试2

```
index=0
while read line ; do
    MYARRAY[$index]="$line"
    index=$(($index+1))
done < /path/to/filename 
```

两次尝试都只返回一个包含文件第一行的元素数组。我究竟做错了什么？

**我正在运行 bash 4.1.5**

* * *

## 回答 #1

> 赞同：347
> 
> 时间：2012-07-09T12:38:41.527

[该`readarray`命令](http://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html#index-readarray)（也拼写为`mapfile`）是在 bash 4.0 中引入的。

```
readarray -t a < /path/to/filename 
```

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2012-07-09T11:10:02.027

最新版本基于[BinaryZebra 的评论](https://stackoverflow.com/questions/11393817/bash-read-lines-in-file-into-an-array/11393884?noredirect=1#comment56571512_11393884) 并[在此处测试](https://gist.github.com/nhed/d36ea500986d8fb6211c)。添加`command eval`允许将表达式保留在当前执行环境中，而之前的表达式仅在 eval 期间保留。

使用没有空格\制表符的 $IFS，只有换行符/CR

```
$ IFS=$'\r\n' GLOBIGNORE='*' command eval  'XYZ=($(cat /etc/passwd))'
$ echo "${XYZ[5]}"
sync:x:5:0:sync:/sbin:/bin/sync 
```

另请注意，您可能将数组设置得很好，但读错了 - 请务必使用双引号`""`和大括号`{}`，如上例所示

* * *

**编辑：**

请注意关于可能的全局扩展的评论中关于我的回答的许多警告，特别是[gniourf-gniourf](https://stackoverflow.com/questions/11393817/bash-read-lines-in-file-into-an-array/11393884?noredirect=1#comment35615660_11393884)对我之前尝试解决的评论

考虑到所有这些警告，我仍然将这个答案留在这里（是的，bash 4 已经存在很多年了，但我记得一些只有 2/3 年历史的 Mac 将 pre-4 作为默认 shell）

**其他注意事项：**

也可以按照下面 drizzt 的建议，将分叉的 subshel​​l+cat 替换为

```
$(</etc/passwd) 
```

我有时使用的另一个选项是将 IFS 设置为 XIFS，然后再恢复。另请参阅[Sorpigal 的答案](https://stackoverflow.com/a/11394045/652904)，不需要为此烦恼

* * *

## 回答 #3

> 赞同：136
> 
> 时间：2012-07-09T11:20:55.977

将文件的每一行读入`bash`数组的最简单方法是：

```
IFS=$'\n' read -d '' -r -a lines < /etc/passwd 
```

现在只需索引数组`lines`即可检索每一行，例如

```
printf "line 1: %s\n" "${lines[0]}"
printf "line 5: %s\n" "${lines[4]}"

# all lines
echo "${lines[@]}" 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-10-21T12:47:30.840

如果文件包含没有空格且每行 1 个字符串的字符串，则另一种方法是：

```
fileItemString=$(cat  filename |tr "\n" " ")

fileItemArray=($fileItemString) 
```

查看：

打印整个数组：

```
${fileItemArray[*]}

Length=${#fileItemArray[@]} 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2015-05-29T17:51:23.007

你的第一次尝试很接近。这是使用您的想法的简单方法。

```
file="somefileondisk"
lines=`cat $file`
for line in $lines; do
        echo "$line"
done 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-18T19:35:00.760

```
#!/bin/bash
IFS=$'\n' read  -d '' -r -a inlines  < testinput
IFS=$'\n' read  -d '' -r -a  outlines < testoutput
counter=0
cat testinput | while read line; 
do
    echo "$((${inlines[$counter]}-${outlines[$counter]}))"
    counter=$(($counter+1))
done
# OR Do like this
counter=0
readarray a < testinput
readarray b < testoutput
cat testinput | while read myline; 
do
    echo value is: $((${a[$counter]}-${b[$counter]}))
    counter=$(($counter+1))
done 
```

# c# - 我应该公开 IObservable 在我的界面上？

> ID：11393818
> 
> 赞同：20
> 
> 时间：2012-07-09T11:05:28.297
> 
> 标签：c#, .net, system.reactive

我的同事和我有争执。我们正在编写一个处理大量数据的 .NET 应用程序。它接收数据元素，根据某些标准将它们的子集分组为块并处理这些块。

假设我们有类型的数据项`Foo`一个接一个地到达某个源（例如来自网络）。我们希望收集相关类型对象的**子**集，从每个这样的子集`Foo`构造一个类型对象并处理类型对象。`Bar``Bar`

我们中的一个人建议了以下设计。它的主要主题是`IObservable<T>`直接从我们组件的接口中公开对象。

```
// ********* Interfaces **********
interface IFooSource
{
    // this is the event-stream of objects of type Foo
    IObservable<Foo> FooArrivals { get; }
}

interface IBarSource
{
    // this is the event-stream of objects of type Bar
    IObservable<Bar> BarArrivals { get; }
}

/ ********* Implementations *********
class FooSource : IFooSource
{
    // Here we put logic that receives Foo objects from the network and publishes them to the FooArrivals event stream.
}

class FooSubsetsToBarConverter : IBarSource
{
    IFooSource fooSource;

    IObservable<Bar> BarArrivals
    {
        get
        {
            // Do some fancy Rx operators on fooSource.FooArrivals, like Buffer, Window, Join and others and return IObservable<Bar>
        }
    }
}

// this class will subscribe to the bar source and do processing
class BarsProcessor
{
    BarsProcessor(IBarSource barSource);
    void Subscribe(); 
}

// ******************* Main ************************
class Program
{
    public static void Main(string[] args)
    {
        var fooSource = FooSourceFactory.Create();
        var barsProcessor = BarsProcessorFactory.Create(fooSource) // this will create FooSubsetToBarConverter and BarsProcessor

        barsProcessor.Subscribe();
        fooSource.Run(); // this enters a loop of listening for Foo objects from the network and notifying about their arrival.
    }
} 
```

另一个人提出了另一种设计，它的主题是使用我们自己的发布者/订阅者接口，并且仅在需要时在实现中使用 Rx。

```
//********** interfaces *********

interface IPublisher<T>
{
    void Subscribe(ISubscriber<T> subscriber);
}

interface ISubscriber<T>
{
    Action<T> Callback { get; }
}

//********** implementations *********

class FooSource : IPublisher<Foo>
{
    public void Subscribe(ISubscriber<Foo> subscriber) { /* ...  */ }

    // here we put logic that receives Foo objects from some source (the network?) publishes them to the registered subscribers
}

class FooSubsetsToBarConverter  : ISubscriber<Foo>, IPublisher<Bar>
{
    void Callback(Foo foo)
    {
        // here we put logic that aggregates Foo objects and publishes Bars when we have received a subset of Foos that match our criteria
        // maybe we use Rx here internally.
    }

    public void Subscribe(ISubscriber<Bar> subscriber) { /* ...  */ }
}

class BarsProcessor : ISubscriber<Bar>
{
    void Callback(Bar bar)
    {
        // here we put code that processes Bar objects
    }
}

//********** program *********
class Program
{
    public static void Main(string[] args)
    {
        var fooSource = fooSourceFactory.Create();
        var barsProcessor = barsProcessorFactory.Create(fooSource) // this will create BarsProcessor and perform all the necessary subscriptions

        fooSource.Run();  // this enters a loop of listening for Foo objects from the network and notifying about their arrival.
    }
} 
```

你觉得哪一个更好？暴露`IObservable<T>`并让我们的组件从 Rx 操作符创建新的事件流，或者定义我们自己的发布者/订阅者接口并在需要时在内部使用 Rx？

以下是有关设计需要考虑的一些事项：

*   在第一个设计中，我们接口的消费者触手可及 Rx 的全部功能，并且可以执行任何 Rx 操作符。我们中的一个人声称这是一个优势，另一个人声称这是一个缺点。

*   第二种设计允许我们在后台使用任何发布者/订阅者架构。第一个设计将我们与 Rx 联系在一起。

*   如果我们希望使用 Rx 的强大功能，则需要在第二种设计中进行更多工作，因为我们需要将自定义发布者/订阅者实现转换为 Rx 并返回。它需要为每个希望进行事件处理的类编写胶水代码。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T21:48:28.177

暴露`IObservable<T>`不会以任何方式*污染*带有 Rx 的设计。事实上，设计决策与公开旧式 .NET 事件或滚动您自己的 pub/sub 机制之间的挂起完全相同。唯一的区别是`IObservable<T>`更新的概念。

需要证明吗？看看 F#，它也是一种 .NET 语言，但比 C# 更年轻。在 F# 中，每个事件都派生自`IObservable<T>`. 老实说，我认为抽象一个完全合适的 .NET pub/sub 机制是没有意义的——也就是说`IObservable<T>`——远离你自己的 pub/sub 抽象。只是暴露`IObservable<T>`。

对我来说，滚动您自己的 pub/sub 抽象就像将 Java 模式应用于 .NET 代码一样。不同之处在于，在 .NET 中，观察者模式一直都有很好的框架支持，根本不需要自己动手。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T16:27:05.870

首先，值得注意的是它`IObservable<T>`是`mscorlib.dll`and`System`命名空间的一部分，因此暴露它在某种程度上等同于暴露`IComparable<T>`or `IDisposable`。这相当于选择 .NET 作为您的平台，您似乎已经这样做了。

现在，我不想提出答案，而是提出一个不同的问题，然后提出不同的心态，我希望（并相信）你会从那里开始管理。

您基本上是在问：*我们是否想在整个系统中推广 Rx 运算符的分散使用？*. 现在显然这不是很吸引人，因为您可能在概念上将 Rx 视为第 3 方库。

无论哪种方式，答案都不在于你们两个提出的基本设计，而在于这些设计的用户。我建议将您的设计分解为抽象级别，并确保 Rx 运算符的使用仅限于一个级别。当我谈到抽象级别时，我的意思是类似于[OSI 模型](http://en.wikipedia.org/wiki/OSI_model)，只是在同一个应用程序的代码中。

在我的书中，最重要的是不要站在设计的立场上*“让我们创造一些可以在整个系统中使用和分散的东西，因此我们需要确保我们只做一次并且恰到好处，因为未来的所有岁月”*。我更像是“让我们让这个抽象层产生其他层***当前****实现其目标**所需的最小 API* **” 。**

 **关于您的两个设计的简单性，实际上很难判断，因为`Foo`并且`Bar`没有告诉我太多关于**用例**的信息，因此也没有告诉我可读性因素（顺便说一句，这些因素因用例而异）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T04:35:14.273

> 在第一个设计中，我们接口的消费者触手可及 Rx 的全部功能，并且可以执行任何 Rx 操作符。我们中的一个人声称这是一个优势，另一个人声称这是一个缺点。

我同意 Rx 的可用性是一个优势。列出为什么它是一个缺点的一些原因可能有助于确定如何解决这些问题。我看到的一些优点是：

*   正如 Yam 和 Christoph 所反对的那样，IObservable/IObserver 从 .NET 4.0 开始就在 mscorlib 中，因此（希望）它将成为每个人都会立即理解的标准概念，例如事件或 IEnumerable。
*   Rx 的运营商。一旦您需要组合、过滤或以其他方式操作潜在的多个流，这些将变得非常有用。您可能会发现自己使用自己的界面以某种形式重做这项工作。
*   Rx 的合同。Rx 库执行一个定义明确的合约，并尽可能多地执行该合约。即使您需要自己制作运营商，`Observable.Create`也会执行合同执行工作（这就是`IObservable`Rx 团队不建议直接实施的原因）。
*   Rx 库有很好的方法来确保您在需要时使用正确的线程。

我已经写了一些图书馆不包括我的案例的运营商。

> 第二种设计允许我们在后台使用任何发布者/订阅者架构。第一个设计将我们与 Rx 联系在一起。

我看不出*暴露*Rx 的选择对你如何在底层实现架构的影响比使用你自己的接口更重要。我会断言，除非绝对必要，否则您不应该发明新的 pub/sub 架构。

此外，Rx 库可能具有将简化“引擎盖下”部分的运算符。

> 如果我们希望使用 Rx 的强大功能，则需要在第二种设计中进行更多工作，因为我们需要将自定义发布者/订阅者实现转换为 Rx 并返回。它需要为每个希望进行事件处理的类编写胶水代码。

是和不是。如果我看到第二个设计，我首先想到的是：“这几乎就像 IObservable；让我们编写一些扩展方法来转换接口。” 胶水代码编写一次，随处使用。

胶水代码很简单，但如果你认为你会使用 Rx，只需公开 IObservable 并省去麻烦。

**进一步的考虑**

基本上，您的替代设计在 3 个关键方面与 IObservable/IObserver 不同。

1.  没有办法取消订阅。这可能只是复制到问题时的疏忽。如果没有，如果你走那条路，强烈考虑添加它。
2.  没有定义错误流向下游的路径（例如`IObserver.OnError`）。
3.  无法指示流的完成（例如`IObserver.OnCompleted`）。这仅在您的基础数据旨在具有终止点时才相关。

您的替代设计还将回调作为操作返回，而不是将其作为接口上的方法，但我认为区别并不重要。

Rx 库鼓励使用函数式方法。您的`FooSubsetsToBarConverter`类将更适合作为`IObservable<Foo>`返回的扩展方法`IObservable<Bar>`。这稍微减少了混乱（为什么要在函数可以正常运行时创建具有一个属性的类）并且更适合 Rx 库其余部分的链式组合。您可以将相同的方法应用于备用接口，但如果没有操作员的帮助，这可能会更加困难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:44:18.730

另一种选择可能是：

```
interface IObservableFooSource : IFooSource
{
    IObservable<Foo> FooArrivals
    {
        get;
    }
}

class FooSource : IObservableFooSource 
{
    // Implement the interface explicitly
    IObservable<Foo> IObservableFooSource.FooArrivals
    {
        get
        {
        }
    }
} 
```

这样，只有期望 IObservableFooSource 的客户端才能看到特定于 RX 的方法，而期望 IFooSource 或 FooSource 的客户端则不会。**

# iis - IIS Express 中的符号链接支持 (Visual Studio 2010)

> ID：11393826
> 
> 赞同：0
> 
> 时间：2012-07-09T11:05:44.303
> 
> 标签：iis, windows-7, symlink, ntfs, iis-express

我可以使用`mklink <link> <target>`在 IIS7 和/或 IIS Express 中创建的文件的符号链接吗？

我创建了一个简单的 HTML（它是 MVC3 Razor，但这不是问题）项目，其中包含以下代码：

`<link href="foo.js">`

然后我将`foo.js`文件移动到另一个目录并使用以下命令创建了指向该文件的链接：

`mklink foo.js bar\foo.js`

HTML 保持不变。

FireBug 显示（在网络选项卡上）文件大小为 0B（供讨论），因为系统中的此类文件实际上是 0B。问题是 FireBug 不读取文件的内容或 IIS Express 未正确提供文件。

IE 的行为类似。

我正在使用带有 VS2010 的 IIS Express 进行开发，尚未在 IIS7 上进行测试，操作系统是 Windows 7 x64。

命令创建的硬链接：

`mklink / h <link> <target>`

工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:41:12.207

我对图像尝试了相同的操作，但使用了符号链接——所以没有“/H”——当我尝试使用 Visual Studio 2010 的内部 Web 服务器 (Cassini) 时得到了相同的结果。

也许 IIS Express 确实有同样的限制，因为当我在我的 Win 7（64 位）笔记本电脑上重试使用 IIS 时，图像是正确的服务器。

干杯

# android - 通过从 webview 获取 URL 在媒体播放器中打开 Youtube 视频

> ID：11393830
> 
> 赞同：2
> 
> 时间：2012-07-09T11:06:08.337
> 
> 标签：android, android-webview

我从 web 视图连接到 youtube 视频页面。我可以从这里获取视频的 rtsp 链接，我想在本机媒体播放器中打开它。但这里的问题是：我想在用户想要播放视频时触发媒体播放器的打开，当他/她点击视频时。我怎么能听呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T04:18:22.227

下面的代码在本机媒体播放器中打开您的视频。

```
 String url = "Rtsp Link";
   Intent intent = new Intent(Intent.ACTION_VIEW); 
   intent.setDataAndType(Uri.parse(url,"video/*");
   startActivity(intent); 
```

# java - apache poi 自定义格式指南

> ID：11393834
> 
> 赞同：1
> 
> 时间：2012-07-09T11:06:43.303
> 
> 标签：java, apache-poi

是否有关于如何在 apache poi 中为单元格使用自定义格式的指南？

我对基本格式的工作原理有一个模糊的想法，例如`$#,##0.00`生成[此处](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFDataFormatter.html)`$1,000.00`所述的输出。

但是，在查看[此](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/ss/examples/LoanCalculator.java)示例时，我看到了以下内容：`wb.createDataFormat().getFormat("_($* #,##0.00_);_($* (#,##0.00);_($* \"-\"??_);_(@_)")`

我不能做出正面或反面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-20T11:10:39.567

也许为时已晚，但它可能会帮助别人。您可以在此处找到更多详细信息和示例：

**CellFormat** javadoc - [https://poi.apache.org/apidocs/org/apache/poi/ss/format/CellFormat.html](https://poi.apache.org/apidocs/org/apache/poi/ss/format/CellFormat.html)

**DataFormatter**
- [https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html](https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T21:24:23.363

正如上面@Gagravarr 所述，这些不是特定于 poi 的。此[链接](http://office.microsoft.com/en-us/excel-help/number-format-codes-HP005198679.aspx)应该可以帮助其他有此问题的人

# c++ - C ++中联合中的两个数组

> ID：11393836
> 
> 赞同：8
> 
> 时间：2012-07-09T11:06:55.807
> 
> 标签：c++, unions, strict-aliasing

是否可以像这样在联合中共享两个数组：

```
struct
    {
        union
        {
            float m_V[Height * Length];
            float m_M[Height] [Length];
        } m_U;
    }; 
```

这两个数组共享相同的内存大小还是其中一个更长？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:20:56.770

两个数组都需要具有相同的大小和布局。当然，如果你用 初始化任何东西`m_V`，那么所有的访问`m_M`都是未定义的行为；例如，编译器可能会注意到 in 没有任何 `m_V`变化，并返回一个较早的值，即使您已经通过`m_M`. 在遥远的过去，我实际上使用过这样做的编译器。我*会*避免在联合不可见的情况下进行访问，例如通过传递对同一函数`m_V`的引用和 `m_M`对同一函数的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:10:40.677

隐含地保证这些在内存中的大小相同。编译器不允许在 2D 数组或 1D 数组的任何地方插入填充，因为所有内容都必须与`sizeof`.

[当然，如果您写入`m_V`和读取`m_M`（反之亦然），您仍然是类型双关语，这在技术上会调用未定义的行为。但那是另一回事。]

# ios - 在 SplitViewController 上移动 UIImage 对象

> ID：11393840
> 
> 赞同：0
> 
> 时间：2012-07-09T11:07:11.477
> 
> 标签：ios, ipad

我有一个 UIImageView 对象 X，它包含在 TableView 对象 A 中。我希望能够触摸 X 并将其从对象 A 中移除并将其移动到对象 B（UIView）中。对象 A 和 B 都在 SplitViewController 内部。

```
 A        B
_____    _____
|   |    |   |
| X | -> |   |
|___|    |___| 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:02:14.867

是的，这是可能的。

1.  创建一个可拖动的 UIView。苹果为此提供了一些示例代码：[MoveMe](https://developer.apple.com/library/ios/#samplecode/MoveMe/Introduction/Intro.html)

2.  拖动开始时，将`UIView`X 移动到 viewA 和 viewB 的第一个公共超视图（someSuperview）：

    `[someSuperview addSubview:viewX];`

3.  调整 viewX 的框架，使其绝对位置保持不变：

    `[viewA convertRect:viewX.frame toView:someSuperview];`

4.  等待用户执行拖动/移动。

5.  触摸结束后，将 viewX 添加到 viewB 并再次转换框架。

# c# - 无法在 Visual Studio 2008 中使用 Crystal Reports

> ID：11393842
> 
> 赞同：1
> 
> 时间：2012-07-09T11:07:15.870
> 
> 标签：c#, asp.net, crystal-reports

我正在使用`ASP.NET/C#`。`Visual Studio 2008`我试图`Crystal Reports`在我的项目中使用。当我添加水晶报表时。我可以`CrystalReport1.rpt`在我的项目中看到，但是当我点击它时。这是我的问题的图像。

![在此处输入图像描述](../Images/f468f02ea8a678cbbf4ee53e85da4e36.png)

任何人都可以帮我解决这个问题。我无法做任何进一步的事情。

我需要重新安装 Crystal Report 吗？

有安装链接吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:13:08.180

看起来 .rpt 文件扩展名未连接到 VS 中的设计器。我的猜测是您需要重新安装 Crystal Reports。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:18:17.397

您必须为 Visual Studio 安装/重新安装 CrystalReports

> Crystal Reports for Visual Studio 是 Crystal Reports 的自定义版本，在大多数 Microsoft Visual Studio 版本中作为默认安装的一部分提供 [http://msdn.microsoft.com/en-us/library/ms225592(v=vs. 90).aspx](http://msdn.microsoft.com/en-us/library/ms225592(v=vs.90).aspx)

在 Visual Studio 中单击**Help\About Visual Studio**以查找所有已安装的组件。
如果未安装，请使用原始 Visual Studio 安装程序。

# javascript - 页面内容更改时更新指针

> ID：11393844
> 
> 赞同：0
> 
> 时间：2012-07-09T11:07:24.873
> 
> 标签：javascript, html, internet-explorer

当我将鼠标悬停在具有`cursor: pointer;`样式（无论是否默认）的元素上并单击此元素以触发内容更改时，鼠标指针不会反映基础内容的更改并保持不变。

该行为在 Firefox 和 Chrome 中是正确的，但在 IE 和 Opera 中，鼠标指针在移动之前不会更新其样式。有没有合适的方法来解决这个问题？我考虑过将指针移动一个像素左右，但这肯定会触发一些其他错误，我希望这样的事情会被任何体面的内容阻止程序阻止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:24:28.643

您可以尝试在进行更改时将窗口的光标设置为“等待”，然后在完成后将其取下。这可能会触发有问题的浏览器重新检查光标实际应该是什么，并且会产生副作用，如果更改花费的时间比预期的要长，用户将看到正在发生某些事情的反馈。

# vim - 在 VIM 状态栏中显示电池使用情况

> ID：11393846
> 
> 赞同：2
> 
> 时间：2012-07-09T11:07:33.973
> 
> 标签：vim, statusbar

我有一台 Macbook 10.7。我总是最大化终端窗口，所以如果我想检查电池状态，我必须将鼠标移到顶部或退出最大的 vim 窗口。所以我想在vim状态栏中显示电池。这是我所做的：创建一个文件并使其可执行。

```
vi /bin/battery

#!/bin/bash
ioreg -l|grep -i capacity | tr '\n' ' | '|awk '{printf("%.1f%%", $10/$5 * 100)}' 
```

现在，如果我在终端中输入“电池”，它将输出 87.6% 之类的东西。我的问题是我应该如何在 VIM 状态栏中显示这个东西？

**好的！感谢 Romainl 和 Ingo 的帮助。在阅读和测试后，我认为我得到了一个“完美”的解决方案。至少我很满意。:P**

这是细节。

```
sudo vi /bin/battery

#!/bin/bash
/usr/sbin/ioreg -l|grep -i capacity|tr '\n' ' | '|awk '{printf("%d%%",$10/$5*100)}'>~/.battery

crontab -e
#check battery every 4 mins.
*/4 * * * * /bin/battery 
```

电池脚本输出到文件。它每 4 分钟运行一次（由 crontab 控制）。其余部分与 Ingo 的答案大致相同。

```
:let g:battery = '???'
:autocmd CursorHold * let g:battery = system('cat ~/.battery')
:set statusline+=%{g:battery} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:49:58.463

状态行会经常更新（每次移动！），这对于调用外部脚本来说太频繁了。

查看`:help autocommand-events`，并使用`:autocmd`s 更新 Vim 变量，然后将该变量包含在状态行中。合适的事件可能是：`CursorHold`, `FocusGained`,`BufRead`

```
:let g:battery = '???'
:autocmd CursorHold * let g:battery = system('/bin/battery')
:set statusline+=%{g:battery} 
```

（和/或定义映射以手动更新变量。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T16:04:21.897

最好设置一个 cronjob 并将电池电量放在一个文件中，然后从 vim 读取该文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:42:22.180

您的脚本在我的 MacPro 上没有输出任何内容，但我想这有点正常（没有电池）。

无论如何，这应该工作：

```
:set statusline+=%{system('/bin/battery')} 
```

请注意，状态行会经常更新：`/bin/battery`每秒可能会调用十几次。听起来对你的电池不好！

您是否考虑过设置通知系统（例如使用 Growl）？

或者只是一个自定义映射：

```
:nnoremap <F11> :exec('echo(sytem("date"))')<CR> 
```

# php - PHP会话超时脚本

> ID：11393849
> 
> 赞同：1
> 
> 时间：2012-07-09T11:07:45.877
> 
> 标签：php, session, timeout, logout

如果用户在 10 分钟内未更改页面，我有此代码可将用户注销。

```
$inactive = 600;

if(isset($_SESSION['timeout']) ) {
  $session_life = time() - $_SESSION['timeout'];
  if($session_life > $inactive) { 
    header("Location: logout.php"); 
  }
}

$_SESSION['timeout'] = time(); 
```

如您所见，它非常简单。我在所有受保护页面的顶部都包含此功能，如果脚本未运行 10 分钟，则下次刷新页面时，用户将被发送到我的注销脚本。

然而，这就是问题所在。在 $session_life > $inactive 变为 true 后，需要再次运行脚本才能注销用户。一旦这成为现实，我需要该人立即注销。

有没有办法做到这一点而不会让事情变得太复杂？（即不使用 AJAX）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T11:10:01.083

不，您的 PHP 代码在每个请求上运行。如果您希望超时“立即”触发，那么您必须通过连续请求向服务器发送垃圾邮件（坏主意）或将超时逻辑移至客户端代码。

适当的解决方案可能是在页面加载时启动 Javascript 计时器，并在计时器到期时将用户重定向到注销页面。如果用户同时导航到另一个页面，当前计时器将被自动丢弃，并在该页面加载时启动一个新计时器。它可以像这样简单：

```
<script type="text/javascript">
    setTimeout(function() { window.location.href = "logout.php"; }, 60 * 10);
</script> 
```

**更新：**当然，您还应该保留服务器端代码以在您自己的一方强制执行业务规则。当客户端合作时，Javascript将为您提供“最佳”方案；如果客户端对您不利，PHP 代码将为您提供保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:15:53.750

你可以通过减去当前时间来做到这一点，比如 time(); 到你想要的时间。试试这个链接。

[如何在 30 分钟后使 PHP 会话过期？](https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:09:32.387

我有一个我测试过的想法，它适用于我的服务器设置 - 它使用 linux 调用来设置会话文件的延迟删除。这纯粹是服务器端的，并且会在应该的时候准确地终止会话。但是，您必须具有运行 shell 命令的权限。

```
$inactive = 600;

# if there is a delayed removal - cancel it
if (isset($_SESSION['pid'])) shell_exec('kill -9 '.$_SESSION['pid']);

# compose path to session file
$sesspath = session_save_path().'/sess_'.session_id();

# set up a delayed removal to destroy the session after $inactive seconds and
# get its PID
#
# you can put whatever command you like inside the single quotes (call a logout
# php script perhaps?)
$_SESSION['pid'] = shell_exec("nohup sh -c 'sleep $inactive && rm $sesspath' > /dev/null & echo $!"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T16:22:57.453

我会在页面的标题中包含一个元刷新，并检查自页面输出以来已经过了多长时间。一些简单的服务器端逻辑可以实现这一点。

# android - Android：从服务器获取编辑文本中的数据

> ID：11393851
> 
> 赞同：0
> 
> 时间：2012-07-09T11:07:48.510
> 
> 标签：android, json, httpclient, android-edittext

我有三个 EditText

1.  用户名
2.  姓名
3.  电子邮件

我想在用户登录后自动填充这些 EditText，并且我希望使用`json`. 任何人都可以帮助我做到这一点。我是json解析的新手所以请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:15:56.557

您必须在单击时实现该方法才能获取 EditText 的值。

```
String username = youedittext.getText().toString();
String name = youedittext2.getText().toString();
String email = youedittext3.getText().toString();

DefaultHttpClient client = new DefaultHttpClient();
                    ArrayList<NameValuepair> nvp = new ArrayList<NameValuePair>();
                    nvp.add(new BasicNameValuePair("username", username));
                    nvp.add(new BasicNameValuePair("name", name));
                    nvp.add(new BasicNameValuePair("mail", mail));
        HttpPost hpost = new HttpPost(url);
        hpost.setEntity(new UrlEncodedFormEntity());
        HttpResponse response = client.execute(hpost);

        HttpEntity entity = response.getEntity();
        InputStream is = entity.getContent();

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        String result = sb.toString();

        JSONObject jobject = new JSONObject(result);
                    //Here you have to read the JSONObject it's very easy

                Log.i("Content:",jobject.toString()); 
```

# java - 验证 GWT 组件需要很长时间

> ID：11393858
> 
> 赞同：8
> 
> 时间：2012-07-09T11:08:10.820
> 
> 标签：java, eclipse, gwt

在 Eclipse 中验证 GWT 组件过程需要很长时间，几乎不可能进行生产性工作。我从我的`Eclipse->Window->Preferences->Validators`：selected `Supend all validators`still Eclipse validates GWT components 中进行了选择，这非常慢。我怎样才能解决这个问题？当 Eclipse 每次保存时都验证整个应用程序时，这非常困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:36:26.300

我们有同样的现象。升级到 Eclipse Juno/4.2 为我们解决了这个问题。

[此处](https://stackoverflow.com/questions/11388560/gwt-code-validation-with-eclipse#answer-11389095)描述了另一种可能的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T15:02:33.180

我有同样的问题，这解决了这个问题：

右键项目 -> 属性 -> JavaScript -> 包含路径

然后像这样为已编译的 GWT 文件添加排除路径。您不需要验证它们：

![在此处输入图像描述](../Images/1fdab2169c36c6de12003e83a1659c04.png)

# c# - 如何处理http链接？

> ID：11393865
> 
> 赞同：1
> 
> 时间：2012-07-09T11:08:43.097
> 
> 标签：c#, http

众所周知，有许多文件托管网站，有没有办法在其中一个网站上处理文件的 http 链接，并在文件存在或 http 链接是否存在时检索结果。我知道其中一些文件托管网站可能使用他们自己的 API，但我想要一种更通用的方式。

编辑：

因此，据我所知，服务器上没有文件，只是我必须阅读响应并正确阅读。我想问另一件事，关于重定向，这是否意味着如果我得到一个重定向到另一个链接的链接的响应，我将从响应中获得最终目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:11:45.280

您可以使用 exists 方法查看文件是否存在：

```
bool System.IO.File.Exists(string path) 
```

///

为了确定删除服务器上是否存在文件，您可以尝试以下操作：

```
WebRequest request;
WebResponse response;
String strMSG = string.Empty;
request = WebRequest.Create(new Uri(“http://www.yoururl.com/yourfile.jpg”));
request.Method = “HEAD”;

try
{
    response = request.GetResponse();
    strMSG = string.Format(“{0} {1}”, response.ContentLength,         response.ContentType);
}
catch (Exception ex)
{
   //In case of File not Exist Server return the (404) Error
    strMSG = ex.Message;
} 
```

看到[这个](http://forums.asp.net/t/413945.aspx/1)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:15:10.437

如果我理解正确，您是在尝试判断给定 URL 是否有内容。

使用

[网络客户端](http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.80).aspx)

班级。

拨打网址，如果您收到 200，您就可以开始了。404 异常或类似情况可能意味着链接不好。

或者，更好的方法是执行 HEAD http 请求。有关详细信息，请参见[此处](https://stackoverflow.com/questions/122853/c-sharp-get-http-file-size)。

# php - 提交下拉表单时获取输出

> ID：11393866
> 
> 赞同：0
> 
> 时间：2012-07-09T11:08:49.957
> 
> 标签：php, mysql, database, forms, drop-down-menu

我正在制作一个包含数据库中信息的下拉菜单。它必须在我的下拉列表中获取不同的品牌，并且在选择品牌并提交搜索时，它将显示有关该品牌的信息。它从数据库中获取正确的品牌，但提交后它只显示我的最后一个品牌。有人可以帮帮我...这是我的下拉菜单和搜索（提交）代码：

```
<div class="bandwielkolom">
    <form action="index.php?lang=nl&p=<?php echo $_GET['p']; ?>#keuze" method="post">
        <table class="bandentabel">
        <tr>
            <th colspan="2">Op merk zoeken<a name="band"></a></th>
        </tr>
        <tr>
            <td>Merk:</td>
            <td>
                <select name="band_merk">
                <option value="0">- Merk -</option>
<?php
    $wielen = $wielclass->getMerkenWielen($website);
    foreach($wielen as $wiel)
    {
        echo "\t\t\t\t\t\t\t\t\t\t\t<option value=\"".$wiel->merk_code."\"";
        if(isset($_GET['search']) && $_GET['search'] == "band" && isset($_GET['wiel']) && $_GET['wiel'] == $wiel->merk_code || isset($_POST['band_submit']) && $_POST['band_merk'] == $wiel->merk_code) { echo " selected=\"selected\""; }
        echo ">".$wiel->merk_naam."</option>\n";
    }
?>
                </select>
            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td><input type="submit" name="band_submit" value="Zoek"/></td>
        </tr>
        </table>
    </form>
</div> 
```

这是我的课：

班级：

```
<?php
  class wielen extends connect {
    private $wielenlijst;
    public function getMerkenWielen($database) {
        $sql = "SELECT * FROM ".$database."_wielen ORDER BY merk_nummer";
        try {
            $stmt = $this->db->prepare($sql);
            $stmt->execute();
            $this->wielenlijst = $stmt->fetchAll(PDO::FETCH_OBJ);
            $stmt->closeCursor();
            return $this->wielenlijst;
        }
        catch (Exception $e) {
            die ($e->getMessage());
        }
    }
    public function __construct($dbo) {
        parent::__construct($dbo);
    }
  }
?> 
```

这仅显示提交后的最后一个品牌：

```
<?php
  if(isset($_POST['band_submit']))
    echo $wiel->merk_naam;
?> 
```

有人可以帮我解决这个问题，因为我无法让它工作

也许重新审视它会有所帮助

谢谢任何帮助

更新：

我现在得到了这种平静的代码，我将解释发生了什么以及我想要什么：

```
<div class="bandwielkolom">
                        <form action="index.php?lang=nl&p=<?php echo $_GET['p']; ?>#keuze" method="post">
                            <table class="bandentabel">
                                <tr>
                                    <th colspan="2">Op merk zoeken<a name="band"></a></th>
                                </tr>
                                <tr>
                                    <td>Merk:</td>
                                    <td>
                                        <select name="band_merk">
                                            <option value="0">- Merk -</option>
<?php
    $wielen = $wielclass->getMerkenWielen($website);
    $get_wiel = isset($_GET['wiel']) ? $_GET['wiel'] : '';
    $post_wiel = isset($_POST['band_merk']) ? $_POST['band_merk'] : '';
    foreach($wielen as $wiel) {
      if ($_SERVER['REQUEST_METHOD'] === 'POST') {
        $selected = $post_wiel['wiel'] === $wiel->merk_code ? ' selected="selected"' : '' ;
      }
      else {
        $selected = $get_wiel['wiel'] === $wiel->merk_code ? ' selected="selected"' : '' ;
      }
      echo '\t\t\t\t\t\t\t\t\t\t\t<option value="' . $wiel->merk_code . '"' . $selected . '>' . $wiel->merk_naam . '</option>';
    }
?>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                    <td><input type="submit" name="band_submit" value="Zoek"/></td>
                                </tr>
                            </table>
                        </form>
                    </div>
                                                            <?php
if(isset($_POST['band_submit']) && $_POST['band_merk'] == $wiel->merk_code)
    echo $wiel->merk_naam;
?> 
```

进程代码：

```
if(isset($_POST['band_submit']) && $_POST['band_merk'] == $wiel->merk_code)
    echo $wiel->merk_naam; 
```

我从我的数据库中得到一个带有四个选项的选择框，所以它工作正常。这些选项中包含图片和文本等数据。当我选择一个并按下提交时，他必须显示所选选项的信息，并且应该保持选中状态。

现在发生的事情是，当我选择一个选项并按下提交时，什么也没有发生......按钮正在工作，但我没有得到所选选项的任何输出，它不会保持选中状态。

做错了什么，但我不知道是什么

欢迎任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:18:39.177

你需要再次使用你的 for 循环来列出它们。

```
foreach($wielen as $wiel)
{
    echo $wiel->merk_naam;
} 
```

# iphone - 代码签名错误 Xcode 4.3.3

> ID：11393867
> 
> 赞同：0
> 
> 时间：2012-07-09T11:08:50.977
> 
> 标签：iphone, ios, xcode, xcode4.3

我刚刚将我的 xcode 更新到 4.3.3，它开始在我以前运行良好的所有项目上给我这个错误。我可以构建一切，但是当我这样做时：XCode> Product> Archive 我得到错误：

代码签名错误：身份“iPhone Distribution”与默认钥匙串中的任何有效、未过期的证书/私钥对都不匹配。

在我的构建设置中，我已经选择了一个有效的钥匙串，它存在于我的系统上，并且通过钥匙串访问可见。什么？？？我尝试清理派生数据但没有用....

有人可以帮忙吗......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:24:37.267

这似乎是配置文件的问题。从组织者中删除当前的所有配置文件，并尝试使用新下载的配置文件。希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:04:25.287

确保您不仅在 PROJECT 中而且在 TARGET 中选择了有效的签名设置。

# clojure - 如何将两个列表合并为坐标？

> ID：11393869
> 
> 赞同：3
> 
> 时间：2012-07-09T11:09:00.910
> 
> 标签：clojure

如果我有两个具有相同 [任意] 长度 X 和 Y 的任意长度列表，我如何合并它们使得

((X1 Y1) (X2 Y2) ... (Xn Yn)) ？

例如列表 X：（1 3 4 5 6 ... N）和列表 Y：（5 13 1 4 9 ... N）

我如何合并它们以创建类似的东西

((1 5) (3 13) (4 1) (5 4) (6 9) ...) ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T11:21:15.363

```
(map list [1 2 3] [4 5 6])
=> ((1 4) (2 5) (3 6)) 
```

虽然对于坐标，我会使用 (map vector ...) 代替：

```
(map vector [1 2 3] [4 5 6])
=> ([1 4] [2 5] [3 6]) 
```

# c# - 我想全选并将其复制到剪贴板

> ID：11393871
> 
> 赞同：1
> 
> 时间：2012-07-09T11:09:10.523
> 
> 标签：c#

我有一个显示文本的 WebBrowser。如果我将它复制到clipbaord，它会将所有的html标签复制到我不想要的。

我希望能够**全选**然后复制到剪贴板。

我想将**文本及其格式**复制到剪贴板。

当我突出显示我自己的文本并在粘贴时单击复制时，它就是我想要的完美。

但是，当我使用此代码仅复制文档文本时，我得到了 Html 标签。

这就是我复制到剪贴板的方式：

```
void CopyCellText()
{
Clipboard.Clear();
if (webBrowser1 != null)
{
Clipboard.SetText(webBrowser1.DocumentText.ToString().Trim());
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:01:34.190

全选并复制到剪贴板：

```
webBrowser1.Document.ExecCommand("SelectAll", true, null);
webBrowser1.Document.ExecCommand("Copy", true, null); 
```

您不会看到 html 标签，但会看到所有格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:19:25.450

你的意思是你想将你的 html 代码转换为文本并复制到剪贴板？您将需要[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)。检查[此页面](http://olussier.net/2010/03/30/easily-parse-html-documents-in-csharp/)以获得简单的指南。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T11:20:28.937

[http://www.dreamincode.net/code/snippet1921.htm](http://www.dreamincode.net/code/snippet1921.htm) << 检查这个代码片段。如果您在使用正则表达式时剥离字符串会更好！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T12:00:55.330

我认为您获取 HTML 标记的原因是`webBrowser1.DocumentText`将获取 HTML 文档本身的全部内容，其中将包括所有生成的 HTML。

快速搜索给了我以下信息：

[从.net（C＃）中的Webbrowser控件中检索选定的文本](https://stackoverflow.com/questions/217353/retrieving-selected-text-from-webbrowser-control-in-netc)

[从 WebBrowser 控件中获取所有文本](https://stackoverflow.com/questions/8570125/get-all-text-from-webbrowser-control)

# ssis - 没有分隔符的 SSIS 文件，如何（是否可以）使用文件源读取？

> ID：11393874
> 
> 赞同：0
> 
> 时间：2012-07-09T11:09:16.807
> 
> 标签：ssis, flat-file, fixed-width

我有一个提要（用于员工详细信息），其一条记录是这样的。

```
101EnggAnal 
```

给我的简介是第一个 3 个字符将是员工 ID，接下来 4 个将是部门，最后 4 个将是指定。我可以使用平面文件源阅读这个吗？如果是怎么办？我是否必须将脚本组件编写为源才能完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:12:22.223

除非我在您的问题中遗漏了一些细微差别，否则您只是在查看格式为 Ragged right 或可能为 Fixed width的[平面文件连接管理器。](http://msdn.microsoft.com/en-us/library/ms183343.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:14:25.840

我认为最简单的方法是将其作为一列读取，并在数据流任务中使用源上的派生列通过表达式生成您想要的 3 列，然后再将它们用作目标的列。

# c# - 如何从 Windows 应用程序中抓取数据网格

> ID：11393875
> 
> 赞同：2
> 
> 时间：2012-07-09T11:09:19.077
> 
> 标签：c#, datagrid, screen-scraping, user32

我正在尝试从 Windows 应用程序内的数据网格中抓取数据。

我已经使用 User32.dll 及其方法（例如`GetWindow`查找句柄然后使用`SendMessage`读取内容）成功地从应用程序中的文本框中抓取了数据。

```
[DllImport("user32.dll", EntryPoint = "GetWindow", SetLastError = true)]
    internal static extern IntPtr GetWindow(IntPtr lpWindHandle, uint lpWindowName);

[DllImport("user32.dll", SetLastError = true)]
    public static extern bool SendMessage(IntPtr hWnd, uint Msg, int wParam, StringBuilder lParam); 
```

我的问题是这些方法似乎没有返回任何值 a `DataGrid`or `table`。

有人对我如何能够实现这一目标有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:35:12.057

这可以通过使用 UI 自动化 API 来实现。我希望这些链接可以帮助您找到所需的解决方案：[类似问题的讨论，](http://social.msdn.microsoft.com/forums/en-US/windowsaccessibilityandautomation/thread/361bc745-8561-4799-af1d-63d1428615cc/)[DataGrid 控件类型的 UI 自动化支持](http://msdn.microsoft.com/en-us/library/ms752044.aspx)。虽然具体的解决方案取决于数据网格的许多实现细节。

# c++ - C++ - 包含错误

> ID：11393877
> 
> 赞同：6
> 
> 时间：2012-07-09T11:09:39.193
> 
> 标签：c++, string, header, include

我对 c++ 很陌生，正在做一个教程。我已经完全复制了教程，但是在编译时出现了这个错误：

`'String file not found'`

为线`#include <string>;`

有人可以告诉我如何修改这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T12:03:24.213

> 好的，所以我将文件的名称从 .C 更改为 .cpp ，这个特殊问题似乎已经消失了。

您似乎找到了解决方案，我添加它以澄清**为什么**会发生这种情况。一些与 IDE 集成的编译器将`.c`文件视为 C 源代码，而`.cpp`（或`.cc`、`.c++`等）视为 C++ 代码。编译`.c`文件时，不包括 C++ 支持，并且使用 C 编译器而不是 C++ 编译器。而 C 没有`<string>`（虽然它有`<string.h>`，但它包含完全不同的东西）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T11:14:35.837

看起来您的编译器没有正确或完全安装。编译器应该能够找到自己的头文件，而无需您付出更多的努力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T11:35:29.740

好的，所以我将文件的名称从 .C 更改为 .cpp ，这个特殊问题似乎已经消失了。但是，我现在收到 3 个 Apple Mach-o Linker (Id) 错误 (?)

由于这与原始问题不同，我将关闭此问题并打开一个新问题

感谢所有的帮助！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-09T13:32:56.670

检查位置`c:/...../include`

如果存在`string`文件应该重新安装编译器

# javascript - jQuery 过滤颜色和类别

> ID：11393882
> 
> 赞同：0
> 
> 时间：2012-07-09T11:09:52.407
> 
> 标签：javascript, jquery

我需要 jQuery 来过滤我的颜色和类别列表。我做了两个过滤器，但是当我过滤一个颜色然后过滤一个类别时，我过滤掉的其他颜色又出现了。这是我的 html 和 jQuery 代码：

```
<!DOCTYPE html>
<html>
<head>
<style>
#scrollable{
    height:920px;
    width:920px;
    overflow: auto;
}
#scrollable li{
    list-style-type:none;
}
.product{
    float:left;
}
.red{
    background:#FF0000;
}
.green{
    background:#00FF00;
}
.blue{
    background:#0000FF;
}
.a{
    width:300px;
    height:300px;
}
.o{
    width:300px;
    height:300px;
}
.k{
    width:300px;
    height:300px;
}
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<form>
<select id="cat">
<option value="all">All</option>
<option value="a">A</option>
<option value="k">K</option>
<option value="o">O</option>
</select>
<label>Red<label><input type="checkbox" checked=checked name="red" id="red" /><br />
<label>Green<label><input type="checkbox" checked=checked name="green" id="green" /><br />
<label>Bleu<label><input type="checkbox" checked=checked name="blue" id="blue" /><br />
</form>
<ul id="scrollable">
    <li><div class="product a red">R a</div><div class="product o blue">B o</div><div class="product k green">G k</div></li>
    <li><div class="product o green">G o</div><div class="product k red">R k</div><div class="product o blue">B o</div></li>
    <li><div class="product k blue" >R k</div><div class="product a green">G a</div><div class="product a red">R a</div></li>
</ul>
<script>
function catFilter(){
    if ($(this).val() == "a") {
        $(".a").show();
        $(".o").hide();
        $(".k").hide();
    }
    if ($(this).val() == "o") {
        $(".a").hide();
        $(".o").show();
        $(".k").hide();
    }
    if ($(this).val() == "k") {
        $(".a").hide();
        $(".o").hide();
        $(".k").show();
    }
    if ($(this).val() == "all") {
        $(".a").show();
        $(".o").show();
        $(".k").show();
    }
}
function filter() {
    if ($('#red').attr('checked')) {
        $(".red").show();
    } else {
        $(".red").hide();
    }
    if ($('#green').attr('checked')) {
        $(".green").show();
    } else {
        $(".green").hide();
    }
    if ($('#blue').attr('checked')) {
        $(".blue").show();
    } else {
        $(".blue").hide();
    }
}

$(":checkbox").click(filter);
$("#cat").change(catFilter);
</script>
</body>
</html> 
```

任何想法如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:14:16.763

你可能想要这个

```
function catFilter(){
    var items=$('input:not(":checked")');
    var unchecked=[];
    items.each(function(i){
       unchecked[i]='.'+$(this).prop('id');
    });
    unchecked=unchecked.toString();

    if ($(this).val() == "a") {
        $(".a").not(unchecked).show();
        $(".o").hide();
        $(".k").hide();
    }
    if ($(this).val() == "o") {
        $(".a").hide();
        $(".o").not(unchecked).show();
        $(".k").hide();
    }
    if ($(this).val() == "k") {
        $(".a").hide();
        $(".o").hide();
        $(".k").not(unchecked).show();
    }
    if ($(this).val() == "all") {
        $(".a").not(unchecked).show();
        $(".o").not(unchecked).show();
        $(".k").not(unchecked).show();
    }
} 
```

[**演示。**](http://jsfiddle.net/PTfNC/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:36:25.053

我要做的是将两个过滤器参数存储在两个变量中，并使用一个函数相应地显示/隐藏。过滤器函数将是：

```
var catFil = "",
    colFil = [];
function catFilter(){
    switch($(this).val()){
        case "a":
            catFil = ".a";
            break;
        case "o":
            catFil = ".o";
            break;
        case "k":
            catFil = ".k";
            break;
        default:
            catFil = "";
            break;
    }
    applyFilter();
}
function filter() {
    colFil=[];
    if ($('#red').attr('checked')) {
        colFil.push(".red");
    }
    if ($('#green').attr('checked')) {
        colFil.push(".green");
    }
    if ($('#blue').attr('checked')) {
        colFil.push(".blue");
    }
    applyFilter();
}

function applyFilter(){
    var i;
    /*Hide every products */
    $(".product").hide();
    /* show the needed product*/
    for (i = 0;i<colFil.length;i++){
        $(catFil+colFil[i]).show();
    }
} 
```

# mysql - Rails 3.2 选择记录时，下一个选项在表单中可用

> ID：11393887
> 
> 赞同：0
> 
> 时间：2012-07-09T11:10:14.013
> 
> 标签：mysql, ruby-on-rails, forms, join

我有一个表格，可以从我的数据库中的其他表中进行多项选择。

我在vestigingen（位置）和组织（组织）之间有关系我想隐藏该特定组织的选项，直到它在下拉列表中被选中。所以当它被选中时，我想选择哪个位置。我想在没有选择组织时隐藏位置

截屏： ![在此处输入图像描述](../Images/4bec1d0b9c66b954f81829add6f92b0b.png)

我希望你明白我的意思。

谢谢

编辑：这是我的 _form.html.erb

```
<%= form_for(@contracten) do |f| %>
  <% if @contracten.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@contracten.errors.count, "error") %> prohibited this contracten from being saved:</h2>

      <ul>
      <% @contracten.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :naam %><br />
    <%= f.text_field :naam %>
  </div>
  <div class="field">
    <%= f.label :omschrijving %><br />
    <%= f.text_area :omschrijving %>
  </div>
  <div class="field">
    <%= f.label :organisatie %><br />
    <%= f.select :organisatieid, options_for_select(@organisaties.map{ |f| [f.naam, f.id] }), :include_blank => true %>
  </div>
  <div class="field">
    <%= f.label :vestiging %><br />
    <%= f.select :vestigingid, options_for_select(@vestigingens.map{ |f| [f.naam, f.id] }), :include_blank => true %>
  </div>
  <div class="field">
    <%= f.label :Beheerder %><br />
    <%= f.select :persoonid, options_for_select(@personen.map{ |f| [f.naam, f.id] }), :include_blank => true %>
  </div>
  <div class="field">
    <%= f.label :contractsoort %><br />
    <%= f.select :contractsoortid, options_for_select(@contractsoorten.map{ |f| [f.naam, f.id] }), :include_blank => true %>
  </div>
  <div class="field">
    <%= f.label :datumingang %><br />
    <%= f.datetime_select :datumingang %>
  </div>
  <div class="field">
    <%= f.label :datumeinde %><br />
    <%= f.date_select :datumeinde %>
  </div>
  <div class="field">
    <%= f.label :contractduur %><br />
    <%= f.number_field :contractduur, :placeholder => 'in jaren' %>
  </div>
  <div class="field">
    <%= f.label :opzegtermijn %><br />
    <%= f.number_field :opzegtermijn, :placeholder => 'In Maanden' %>
  </div>
  <div class="field">
    <%= f.label :betalingsperiode_eenheid_id %><br />
    <%= f.number_field :betalingsperiodeeenheidid, :disabled => 'true' %>
  </div>
  <div class="field">
    <%= f.label :betalingstermijn %><br />
    <%= f.number_field :betalingstermijn %>
  </div>
  <br>
  <div class="actions">
    <%= f.submit "Toevoegen", :class => 'button3' %>
  </div>
<% end %>
<br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:23:45.510

看看这里的第一个例子

[http://api.jquery.com/val/](http://api.jquery.com/val/)

应该告诉您如何使用 JQuery 执行此操作

基本上，您需要为您的选择分配一个 onchange 事件，然后在 val 不为空或等于某个选项时显示您的辅助选择。

如果您发布代码，则可以提供更具体的答案

# php - 用php截取网页的屏幕截图

> ID：11393898
> 
> 赞同：1
> 
> 时间：2012-07-09T11:10:44.007
> 
> 标签：php, com

我正在使用以下功能截取网页的屏幕截图。

```
function my2()
{

    $Browser = new COM('InternetExplorer.Application');

    $Browserhandle = $Browser->HWND;

    $Browser->Visible = true;
    $Browser->Fullscreen = true;
    $Browser->Navigate('http://www.tatvic.com');

    while ($Browser->Busy)
    {
        com_message_pump(4000);
    }

    $img = imagegrabwindow($Browserhandle, 0);
    $Browser->Quit();
    imagepng($img, 'screenshot.png');
} 
```

这工作正常。但由于它是一个屏幕截图，它并没有占据整个页面。我的意思是它没有占用我们可以通过滚动看到的页面部分。

我能做什么，脚本首先将页面缩小到 25% 或 35% 或将其转换为 a4 大小，然后截屏以便可以存储整个页面的图像？？？.

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:21:26.673

看看[PhantomJS](http://phantomjs.org/)。它是一个支持 JavaScript 的无头 WebKit API。这意味着，您不需要 GUI/浏览器即可查看。

它允许您抓取整页，保存为 PNG、SVG 等。

# jquery - 通过 css 属性查找元素

> ID：11393899
> 
> 赞同：5
> 
> 时间：2012-07-09T11:10:44.283
> 
> 标签：jquery

我有一个`div`包含大约 100 个其他`div`元素。每个`div`元素都有`top`和`left`属性。如何找到`div`具有最大`left`属性的？
我需要最好的表现。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:24:27.010

试试这个，

**[现场演示](http://jsfiddle.net/UAYWD/)**

```
var divWithTopLeft = null;
var maxLeft = 0;
$('div').each(function(){
    left = this.style.left.replace('px','');
    if(left > maxLeft )
    {
         maxLeft = left;
         divWithTopLeft = this;
    }   
}); 
```

# python - python subprocess.Popen 隐藏真实的“显示名称”

> ID：11393903
> 
> 赞同：6
> 
> 时间：2012-07-09T11:10:56.977
> 
> 标签：python, popen

我想在python中执行一个子进程，子进程需要一个参数来指定密码。默认情况下，`ps`当我的子进程运行时，每个可以登录这台机器的人都可以使用该实用程序获取密码。

而且我知道Popen有一个`__executable__`参数，它可以隐藏真实的程序名称，但不能隐藏子进程的密码参数。

如何隐藏我的密码？

PS：我在linux上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:21:42.807

`subprocess`不公开 API 来做到这一点。我建议使用环境变量将密码传递给命令：

```
subprocess.check_call('command --password="$PASSWORD"', shell=True,
                      env=dict(os.environ, PASSWORD=password)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:57:39.560

我不认为你可以*为*子进程做到这一点，但有一个库可以*从*子进程中做到这一点：[http ://code.google.com/p/py-setproctitle/](http://code.google.com/p/py-setproctitle/)

该方法特定于每个操作系统；有些系统根本不支持。如果可能，通过其他方式（例如通过标准输入管道）为子进程提供密码。

# javascript - 如何将二维数组 javascript 发送到 sinatra

> ID：11393904
> 
> 赞同：1
> 
> 时间：2012-07-09T11:10:57.550
> 
> 标签：javascript, ruby, arrays, sinatra

我在javascript中有一个二维数组，我必须将其发送到sinatra并使用datamapper存储，我一直在尝试将它们放入表单中，但是使用表单有点困难，我可以将数组发送到sinatra并处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:32:35.273

您可以将其发送到 Sinatra，将内容编码为 JSON 字符串，并使用 POST 请求的正文部分传递它。

这是字符串的外观。

```
require 'json'
JSON.dump([[1,2,3], [4,5,6], [7,8,9]])
# => "[[1,2,3],[4,5,6],[7,8,9]]" 
```

将内容发送到 Sinatra（使用`curl`或任何其他 HTTP 库）

```
$ curl -d "[[1,2,3],[4,5,6],[7,8,9]]" http://localhost:3000/loader 
```

然后指示 Sinatra 处理路径

```
post '/loader' do
  json = JSON.load(request.body.read)
  # ... do something with json
end 
```

笔记。我实际上没有尝试过代码，因此您可能需要进行一些小的更改才能使其正常工作。这只是一个原型。

# perl - Gitweb - 最后一个提交人的名字

> ID：11393906
> 
> 赞同：1
> 
> 时间：2012-07-09T11:11:02.207
> 
> 标签：perl, git, cgi, gitweb

我希望在 GitWeb 项目列表中添加对每个项目进行最后一次提交的人的姓名，而不是

```
14 min ago 
```

它说的是

```
14 min ago (Someone's Name) 
```

我已经查看`gitweb.cgi`并找到了写入字符串的点（我的第 5488 行），但我真的不知道如何继续。

有人已经这样做了吗？或者谁能​​提供一个快速的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:50:40.983

感谢 simbabque 指点我`git_get_last_activity`。我的解决方案（可能是次优的，如果是，请告诉我）：

更改`git_get_last_activity`为

```
sub git_get_last_activity {
my ($path) = @_;
my $fd;

$git_dir = "$projectroot/$path";
open($fd, "-|", git_cmd(), 'for-each-ref',
     '--format=%(committer)',
     '--sort=-committerdate',
     '--count=1',
     'refs/heads') or return;
my $most_recent = <$fd>;
close $fd or return;
if (defined $most_recent &&
    $most_recent =~ / (\d+) [-+][01]\d\d\d$/) {
  my $bracket_position = rindex($most_recent, "<");
  my $committer_name = substr($most_recent, 0, $bracket_position - 1);
    my $timestamp = $1;
    my $age = time - $timestamp;
    return ($age, age_string($age), $committer_name);
}
return (undef, undef, undef);
} 
```

然后搜索稍后调用的位置（应该只有一次）并更改

```
($pr->{'age'}, $pr->{'age_string'}) = @activity; 
```

成为

```
($pr->{'age'}, $pr->{'age_string'}, $pr->{'committer'}) = @activity; 
```

然后`git_project_list_rows`去换

```
(defined $pr->{'age_string'} ? $pr->{'age_string'} : "No commits") . "</td>\n" . 
```

至

```
(defined $pr->{'age_string'} ? $pr->{'age_string'} . ' (' . $pr->{'committer'} . ')' : "No commits") . "</td>\n" . 
```

# plsql - 将列数据转换为xml格式；查询失败，因为当前不支持所有列类型

> ID：11393907
> 
> 赞同：1
> 
> 时间：2012-07-09T11:11:06.200
> 
> 标签：plsql, oracle10g, sqltools

我正在尝试将列数据转换为 xml 格式，但收到以下错误消息：

> 查询失败，因为当前不支持所有列类型。

```
CREATE TABLE EMP(NAME VARCHAR2(10 BYTE))

INSERT INTO EMP VALUES ('C');
INSERT INTO EMP VALUES ('A');
INSERT INTO EMP VALUES ('T');

SELECT xmlelement("NAME",NAME) FROM EMP; 
```

我在用：

> Oracle 数据库 10g 企业版 10.2.0.4.0 - 64bi
> 
> PL/SQL 版本 10.2.0.4.0 - 生产
> 
> SQLTools 1.5.0 Beta build 9 作为 EDITOR

为什么会出现这个错误？？？解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:00:13.613

我找到了答案：

```
select dbms_xmlquery.getxml('select * from EMP') from dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-15T13:20:19.017

这更像是一种解决方法，而不是解决方案。

我遇到了与 sam 相同的问题 -也在使用**SQLTools**`SELECT xmlelement`运行语句。一个区别是我运行的是 Oracle DB 版本 11.2.0.2.0。

 **我发现如果我在**SQLPlus**中运行语句，它能够显示结果。

```
SQL> SELECT XMLELEMENT("name",ename) FROM scott.emp WHERE ROWNUM < 3;

XMLELEMENT("NAME",ENAME)
--------------------------------------------------------------------------------
<name>SMITH</name>
<name>ALLEN</name> 
```

**如果我在SQL Developer**中运行该语句，它会*尝试*显示结果，但只显示`(XMLTYPE)`. [![在 SQL Developer 中使用 XMLElement](../Images/d0b26bc84363a960f2a98a7ed550b451.png)](https://i.stack.imgur.com/ivPZX.png)**

# drupal-7 - 我如何在博客内容中引用其他博文 - drupal 7 with views

> ID：11393915
> 
> 赞同：0
> 
> 时间：2012-07-09T11:11:46.023
> 
> 标签：drupal-7, drupal-views

我在 drupal 7 中使用“视图”模块创建博客文章，以将内容项显示为博客。但是，我希望能够内联引用旧帖子，以便重用内容并增加流量。但我目前的工作流程是去查看旧帖子并复制网址，就像它是一个外部链接一样。

在内部做这件事似乎很愚蠢，如果链接发生变化，也会破坏链接。

我怎样才能动态添加这些呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:46:24.063

这两个插件可以解决问题：

*   [CKeditor 链接](http://drupal.org/project/ckeditor_link)- 如果您使用 ckeditor
*   [LinkIt](http://drupal.org/project/linkit/)集成到其他所见即所得的模块中

# c# - 更有效地对枚举数组进行排序

> ID：11393920
> 
> 赞同：-1
> 
> 时间：2012-07-09T11:12:50.770
> 
> 标签：c#, enums, performance

目前，我的 Winform 上有一些按钮需要根据用户单击的内容在不同点禁用/启用。

我做的第一稿是

```
button1.Enabled = false;
button2.Enabled = false; 
```

禁用 2 个按钮，这显然是一种可怕的做法，因为目前有很多超过 2 个，而且可能还会有更多，因为这仍在开发中。所以我需要有一种方法可以轻松更改表单上的按钮选择。

然后我想出了这个

```
private enum Buttons { Button1, Button2 } // etc with all buttons - that are named :)

private void DisableButtons(params Buttons[] buttons)
{
    foreach (Buttons button in buttons)
    {
        switch (button)
        {
            case Buttons.Button1:
                button1.Enabled = false;
                break;
            case Buttons.Button2:
                button2.Enabled = false;
                break;
        }
    }
} 
```

我仍然不太满意。我可以废弃`switch-case`and`foreach`为

```
private void DisableButtons(params Buttons[] buttons)
{
    button1.Enabled = buttons.Contains(Buttons.Button1) ? false : true;
} 
```

对于每个按钮，但我只是认为必须有更好的方法。

关于如何更有效地做到这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:40:15.300

我建议您实际上不想创建一个可以灵活启用和禁用任何按钮组合的功能，因为您还不知道您`Form`将如何工作。当然，这可能会为您节省几行代码，但不会将任何上下文信息传递给下一个维护您的代码的开发人员。它也不会比直接设置控件的状态运行得更快。

我会创建一个函数，当您`Form`更改状态时调用该函数，该函数采用与您的状态有关的所有可能参数`Form`。`switch`然后，我将解码这些参数，并使用传统和`if`语句在一次传递中按名称显式设置表单上控件的状态。

这个中心功能将使您和未来的开发人员清楚地知道您的状态如何变化以及控件的预期行为方式。它不会以不必要的抽象级别降低代码的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:16:20.707

您可以将最后一行代码缩短为：

```
button1.Enabled = !buttons.Contains(Buttons.Button1); 
```

**替代解决方案**

或者您可以使用每个按钮的[Tag](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)属性为每个按钮设置一个枚举值。

```
button1.Tag = Buttons.Button1;
button2.Tag = Buttons.Button2;
button3.Tag = Buttons.Button3;
// etc 
```

你可以对 for 循环中的所有按钮执行此操作：

```
var buttons = <all buttons, todo>
foreach (var button in buttons) {
    button.Enabled = !button.Contains((Buttons)button.Tag));
} 
```

# django - 注销时的django消息

> ID：11393929
> 
> 赞同：6
> 
> 时间：2012-07-09T11:13:21.747
> 
> 标签：django

一旦用户退出站点，它应该重定向到主页并在页面顶部显示“U 已成功退出”消息。有人帮我在主页上显示消息吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-15T11:06:36.513

您可以将 user_logged_out 信号与消息框架结合使用：

首先，确保设置了消息框架（[https://docs.djangoproject.com/en/dev/ref/contrib/messages/](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)）。

然后将此代码包含在将被调用的某个地方（我倾向于将其放在 receivers.py 模块中，然后从已安装应用程序中的 models.py 文件中导入它）：

```
from django.contrib.auth.signals import user_logged_out
from django.dispatch import receiver
from django.contrib import messages

@receiver(user_logged_out)
def on_user_logged_out(sender, request, **kwargs):
    messages.add_message(request, messages.INFO, 'Logged out.') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-04-11T14:14:41.470

尝试：

```
from django.contrib.auth.views import LogoutView

class YourCustomLogoutView(LogoutView):

    def get_next_page(self):
        next_page = super(YourCustomLogoutView, self).get_next_page()
        messages.add_message(
            self.request, messages.SUCCESS,
            'You successfully log out!'
        )
        return next_page 
```

在网址中：

```
url(r'^logout/$', YourCustomLogoutView.as_view(), {'next_page': settings.LOGOUT_REDIRECT_URL}, name='logout'), 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T11:58:44.957

尝试使用会话。可以更简单。

在注销视图中，在会话变量中设置一个条目，如`session['just_logged_out'] = True`，然后在主页视图中检查该变量。

```
try:
  just_logged_out = request.session.get('just_logged_out',False)
except:
  just_logged_out = False 
```

在模板中，您可以使用

```
{% if just_logged_out %}  You are successfully logged out {% endif %} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T11:16:23.047

使用消息框架。 [https://docs.djangoproject.com/en/dev/ref/contrib/messages/](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-01T05:53:23.763

这是@andilabs 答案的简化版本：

```
from django.contrib import messages
from django.contrib.auth.views import LogoutView

class UserLogoutView(LogoutView):
    def dispatch(self, request, *args, **kwargs):
        if request.user.is_authenticated:
            messages.info(request, "You have successfully logged out.")
        return super().dispatch(request, *args, **kwargs) 
```

在你的 urls.py 中：

```
path('logout/', views.UserLogoutView.as_view(), name='logout') 
```

# javascript - 在完成之前执行flush javascript

> ID：11393931
> 
> 赞同：0
> 
> 时间：2012-07-09T11:13:28.207
> 
> 标签：javascript

我编写了一个函数，它在执行另一个函数之前等待 x 毫秒。现在我有一个问题，它在完成之前不会执行任何更改。

```
this.changeColor('#99FFCC');
this.pausecomp(this, 'changeColor','#FFFFFF', 1000);

changeColor = function (color)
{
    this.inputElem.style.backgroundColor = color;
};

pausecomp = function (element, meth, argument, ms)
{
    ms += new Date().getTime();
    while (new Date() < ms) {}
    element[meth](argument);
} 
```

该脚本将按预期执行，但在完成所有操作之前不会改变颜色。所以 500 毫秒内不会显示第一颜色...

我不能使用 setTimeout()

我的主要目标是闪烁文本框背景，所以如果有办法用 css 或任何其他方法做到这一点，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:21:31.667

尝试这样做：

```
changeColor(this, '#99FFCC');
pausecomp(this, 'changeColor','#FFFFFF', 1000);

changeColor = function (element, color)
{
    element.inputElem.style.backgroundColor = color;
};

pausecomp = function (element, meth, argument, ms)
{
    setTimeout(function() {element[meth](argument); }, ms);
} 
```

# ruby-on-rails - Rails - simple_form，在新建和编辑的集合中包含一个命名的空白对象

> ID：11393933
> 
> 赞同：29
> 
> 时间：2012-07-09T11:13:35.857
> 
> 标签：ruby-on-rails, simple-form

我有一个 simple_form，我试图在其中始终包含一个空白项，因为该字段中的“nil”值在此数据库中具有特殊含义。为了让最终用户更清楚，我还想用类似“（如果没有则选择）”的方式来命名它。

我目前正在这样做，但它只在创建新对象时插入“空白”项目，而不是在编辑时插入。

```
# _child_form.html.erb

<%= simple_form_for @child do |f| %>
  <%= f.input :first_name %>
  <%= f.input :last_name %>
  <%= f.association :parent, :collection => @parents, :prompt => "(select if none)" %>

  <%= f.button.submit %>
<% end %> 
```

.

```
# child_controller.rb

def new
  @child = Child.new
  @parents = Parent.all
end

def edit
  @child = Child.find(params[:id])
  @parents = Parent.all
end 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-09T11:19:23.760

你想用`:include_blank`，不是`:prompt`

```
<%= f.association :parent, :collection => @parents, :include_blank => "(select if none)" %> 
```

[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)

# c# - 找不到 WCF 服务引用命名空间

> ID：11393934
> 
> 赞同：4
> 
> 时间：2012-07-09T11:13:37.213
> 
> 标签：c#, wcf, namespaces, wcf-client, service-reference

我已经引用了我的解决方案中的本地 WCF 服务。但是我的控制器类无法获取服务命名空间？传统上我会使用 svcUtil 来编写一个包装类，但由于这是内部的，我虽然可以简单地添加“服务引用”，点击命名空间然后简单地调用我的服务（即 var service = new QServiceReference.MyClass();）

我无法显示图片，所以这是我的解决方案的结构，

```
Solution  
-> Services Folder
    -> QService Folder
       QService Project  
-> Web Folder
    -> Zipporah.Queuing.Web (project)
       -> Services References
          -> QServiceReference
       -> Controllers Folder
          -> KioskProcessController 
```

我的班级（KioskProcessController）如下：

```
using System.Web.Mvc;

using Zipporah.Queuing.Web.QServiceReference; (ITS THIS NAMESPACE REFERENCE THAT DOES NOT WORK)

namespace Zipporah.Queuing.Web.Controllers
{
    public class KioskProcessController : ZipController
    {
        public ActionResult Index()
        {
            return View();
        }

        public ViewResult Queue()
        {
            return View();
        }

        public ViewResult PreAppointment()
        {
            return View();
        }
    }
} 
```

抱歉，如果该结构不清楚（如前所述，我无法发布图片）

任何线索或想法将不胜感激？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-09T11:25:22.163

为您的 WCF 客户端生成的命名空间可能与您的命名空间不同`using`。在您的`Solution Explorer`窗口中，当您选择`Service References`文件夹时，您可以启用该`Show All Files`按钮，然后导航到文件`Reference.cs`，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/e42b6ec573abbdab1448acf30b763ba0.png)

然后，在`Reference.cs`文件中，您可以通过“添加服务引用”对话框找到***实际生成的命名空间***`using`，您可以在其他文件中通过语句使用该命名空间。

# java - 如何在 Cassandra 中列出列族中的所有列名？

> ID：11393935
> 
> 赞同：4
> 
> 时间：2012-07-09T11:13:40.163
> 
> 标签：java, cassandra, hector

我正在使用 Cassandra，我想制作一个显示任何列族内容的数据浏览器。我需要获取列名来配置 UI 网格。是否可以收集所有行中的列名？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T15:19:46.937

如果您使用的是 Cassandra 1.1，最好的方法是：

```
SELECT column_name FROM system.schema_columnfamilies WHERE keyspace_name = X AND columnfamily_name = Y 
```

另请参阅[http://www.datastax.com/dev/blog/schema-in-cassandra-1-1](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:05:15.963

这个答案有几个部分。

首先，要回答您的具体问题，您应该使用 sliceQuery 来获取一行中的所有列。传递一个空的 ByteBuffer 作为开始和结束值来有效地请求所有列：

```
ByteBuffer empty = ByteBufferUtil.EMPTY_BYTE_BUFFER;       
sliceQuery.setRange(empty,empty,false,100); 
```

其次，您需要对存储在列族中的数据模型做出假设。

如果数据模型是静态的（每个对象一行，每个属性一列），那么您返回的列名应该是您要显示的列名。但是，如果数据是以动态方式存储的（每列一个对象，具有相同主键的所有对象都存储在同一行中） - 例如在时间序列中 - 那么您需要了解列是如何存储的需要解释名称（可能是复合名称）。动态方法的另一个非常常见的用途是通过 CQL 定义列族时的持久化方式。

我应该补充一点，没有办法知道列族是如何用于存储对象的。您可以查询架构，但它只告诉您数据在持久化时如何格式化，而不是数据（和属性名称）如何序列化和反序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T15:36:46.353

尝试这个：

```
select columnfamily_name from system.schema_columnfamilies where keyspace_name=‘mykeyspace'; 
```

# c++ - Boost.Thread 3.0.0 中的重大变化

> ID：11393936
> 
> 赞同：8
> 
> 时间：2012-07-09T11:13:40.990
> 
> 标签：c++, boost, boost-thread

在 Boost 库 1.50.0 版的发行说明中，我注意到了两个重大更改（[请参见此处](http://www.boost.org/doc/libs/1_50_0/doc/html/thread/changes.html)）：

> #6266 重大更改：线程析构函数应在可连接时调用终止。
> 
> #6269 重大更改：如果可加入，线程移动分配应调用终止。

这对我目前使用 Boost 1.49.0 的现有项目意味着什么？我需要改变什么吗？如果是，我需要具体改变什么？如果我忘记修改现有项目之一会怎样？我会遇到编译时错误（我希望如此）还是会遇到令人讨厌且难以发现的运行时问题（我绝对不希望如此）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T11:16:03.217

当它说“重大变化”时，它的意思是，“如果你依赖于以前是 X，但现在是 Y 的行为，你的程序就会被破坏”。

对于给定的两个更改，这意味着如果您依赖析构函数或移动赋值调用`join()`（或`detach()`），我认为这是以前的行为，您的程序现在必须显式地`join()`或`detach()`遇到您的朋友`std::terminate()`。这不是编译时错误，但也不是不可预测的运行时行为——你会得到一个很好的干净崩溃，直接返回到`boost::thread`'s 的析构函数，这是问题的原因。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T12:27:11.530

以下代码过去可以正常工作，但在 v3 中，程序将在`t`离开其范围时中止，因为`thread::~thread`调用`std::terminate`，而不是静默地从线程中分离：

```
#include <boost/thread.hpp> 
#include <iostream>

void f()
{}

int main() 
{ 
  {
    boost::thread t(f);
  }
  std::cout << "exiting gracefully" << std::endl;
} 
```

# apache - glassfish 3.1.2 管理控制台端口 4848 已关闭

> ID：11393939
> 
> 赞同：0
> 
> 时间：2012-07-09T11:14:04.350
> 
> 标签：apache, console, glassfish, admin

我有一个远程服务器。glassfish 3.1.2 在 apache 2.2 后面运行。管理端口 4848 已关闭，因此我无法使用[http://some_server.com:4848](http://some_server.com:4848)，其中 some_server 是我的服务器的域名。如何配置 apache 和 glassfish 才能访问 glassfish 管理控制台？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:19:12.373

我只能猜测，您正在尝试做一些称为“端口转发”的事情。您可以为此使用 apache httpd mod_proxy： [http ://httpd.apache.org/docs/2.0/mod/mod_proxy.html](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html)

为了让您初步了解它的外观：

```
<Location /adminconsole/>
ProxyPass http://your.glassfish-server:4848/
</Location> 
```

这将使您的管理控制台可以通过您的 apache:8080/adminconsole

注意：我强烈建议不要这样做。网络管理员倾向于阻止 80/8080/443 之外的所有内容是有充分理由的。因此，您可以与他们讨论解决问题的好方法。

# wpf - 使用 MVVM Light EventToCommand 绑定 WPF Image 控件事件

> ID：11393940
> 
> 赞同：1
> 
> 时间：2012-07-09T11:14:05.667
> 
> 标签：wpf, image, binding, mvvm-light, eventtocommand

我想在 WPF MVVMLight 应用程序中将命令连接到 Image 的 MouseDown 事件。我有以下代码：

```
<Border Grid.Row="2" Grid.Column="1" BorderThickness="1" BorderBrush="Black">
                <Image Margin="3" Name="Content" Source="{Binding Content}" HorizontalAlignment="Left">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseDown">
                            <cmd:EventToCommand 
                                Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.SelectMediaCommand}" 
                                CommandParameter="{Binding}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>    
                </Image>
            </Border> 
```

当我将 < Triggers > 粘贴到其他控件中（例如同一视图中的文本块）时，MouseDown 确实会发生（绑定是正确的）。试过把它放在Border里面，还是没有效果。我想我错过了一些东西。有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:01:42.960

interaction.triggers 部分是正确的。所以错误只是在您的命令绑定中。像 SvenG 建议检查您的 vs 输出窗口或使用[Snoop](http://snoopwpf.codeplex.com/)查找绑定错误。

我的工作示例：

```
 <Image Source="arrange.png" Grid.Row="1">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseDown">
                <cmd:EventToCommand 
                            Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.OpenCommand}" 
                            CommandParameter="{Binding}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </Image> 
```

这意味着您的用户控件需要具有 ICommand 属性 OpenCommand 的数据上下文/视图模型。

# java - 使用java识别系统中的临时文件

> ID：11393941
> 
> 赞同：0
> 
> 时间：2012-07-09T11:14:09.420
> 
> 标签：java, jnotify

我想知道是否有任何与文件相关的函数来确定文件是临时文件还是日志文件。因为在运行 Jnotify 时它变得乏味，因为临时文件被频繁地创建和修改，增加了负担并使 jnotify 不稳定。

所以有什么让我尽快知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:23:52.647

是否有操作系统文件属性告诉您该文件是“临时的”？（您不指定操作系统。）如果没有这样的属性，通过简单地检查文件（相对于使用基于名称/路径的某种算法）来确定文件是“临时的”是不可能的。

# ruby-on-rails - 使用 uploadify、pluplad 和 co 进行 Youtube 上传

> ID：11393942
> 
> 赞同：1
> 
> 时间：2012-07-09T11:14:12.550
> 
> 标签：ruby-on-rails, flash, uploadify, plupload

我正在使用`youtube_it`gem 在我的应用中管理 youtube 视频

上传后，youtube 使用视频 ID 等重定向到回调...

Uploadify 和 Plupload (flash) 非常适合上传，但让我对回调感到疯狂。

重定向 (302) 被视为错误并且不再显示。如果没有回调，我无法在没有 youtube 的视频 ID 的情况下处理数据库中的视频

我尝试了一些选项（调试、错误事件），但无法获取 302 url

使用 ruby`net/http`​​ 返回 302 url，flash 有什么魔力吗？

这是一个plupload的示例日志。

```
uploader.bind('Error', function(up, err) {
  console.log("Error code: " + err.code);
  console.log("Error message: " + err.message);
  console.log("Error details: " + err.details);
});

Error code: -300
Error message: IO error.
Error details: Error #2038 
```

但这里不是 302 我有 -300 吗？o_o（但这是 302，视频已正确上传到 youtube 上并且可用）

我不认为这是一个 plupload 或 uploadify 问题，因为我对两者都有同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:31:08.433

可悲的是，这是不可能的。我将寻求在应用程序服务器上进行代理上传（并激活 html5 上传，是的！）

# freebase - 从 MQL 查询中获取光标，Freebase

> ID：11393944
> 
> 赞同：1
> 
> 时间：2012-07-09T11:14:14.993
> 
> 标签：freebase, mql

我正在尝试按照[此示例](http://www.freebase.com/docs/mql/ch04.html#envelopeparameters)获取在 MQL 查询中返回的“光标”值。虽然[我的尝试](https://www.googleapis.com/freebase/v1/mqlread?cursor=true&query=%5B%7B%22type%22%3a%22/music/album%22,%22artist%22%3a%22The%20Police%22,%22name%22%3anull,%22limit%22:10%7D%5D)产生了以下错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "invalid",
    "message": "cursor is invalid.",
    "locationType": "other",
    "location": "parameters.cursor"
   }
  ],
  "code": 400,
  "message": "cursor is invalid."
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:23:13.427

在新 API 中，参数的起始值为`cursor`null，而不是`true`之前的值。试试[这个](https://www.googleapis.com/freebase/v1/mqlread?cursor=&query=%5B%7B%22type%22%3a%22/music/album%22,%22artist%22%3a%22The%20Police%22,%22name%22%3anull,%22limit%22:10%7D%5D)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:26:31.267

此处的文档 [http://wiki.freebase.com/wiki/MQL_Read_Service](http://wiki.freebase.com/wiki/MQL_Read_Service)

# json - 爪哇玩！toJson 忽略某些方法

> ID：11393949
> 
> 赞同：1
> 
> 时间：2012-07-09T11:14:33.027
> 
> 标签：json, playframework-2.0

是否可以使用 toJson(object) 序列化对象并让 toJson-parser 忽略某些方法？

我们在 User 类（getSocial - 与 Facebook 集成有关）中有一个方法，它使 toJson() 解析失败 - 如果可能，我们希望它在序列化时忽略该方法。

这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:26:51.083

您可以只迭代对象并将其重写为`Map`或`List`仅使用指定的值。

请注意，如果您使用 Ebean 选择对象，它会获取整个对象以及不应获取的数据（作为密码或其他凭据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:01:07.320

使用[fastjson 和 PropertyFilter](http://code.alibabatech.com/wiki/display/FastJSON/PropertyFilter)：

示例代码

```
import com.alibaba.fastjson.serializer.JSONSerializer;
import com.alibaba.fastjson.serializer.PropertyFilter;
import com.alibaba.fastjson.serializer.SerializeWriter;

PropertyFilter filter = new PropertyFilter() {
    public boolean apply(Object source, String name, Object value) {
        return false;
    }
};

SerializeWriter out = new SerializeWriter();
JSONSerializer serializer = new JSONSerializer(out);
serializer.getPropertyFilters().add(filter);

A a = new A();
serializer.write(a);

String text = out.toString();
Assert.assertEquals("{}", text); 
```

属性过滤器

```
PropertyFilter filter = new PropertyFilter() {
    public boolean apply(Object source, String name, Object value) {
        if("name".equals(name)) {
            return true;
        }
        return false;
    }
};

SerializeWriter out = new SerializeWriter();
JSONSerializer serializer = new JSONSerializer(out);
serializer.getPropertyFilters().add(filter);

A a = new A();
a.setName("chennp2008");
serializer.write(a);

String text = out.toString();
Assert.assertEquals("{\"name\":\"chennp2008\"}", text); 
```

值对象：

```
public static class A {
    private int id;
    private String name;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

# c++ - 字符串操作性能问题

> ID：11393961
> 
> 赞同：0
> 
> 时间：2012-07-09T11:16:01.157
> 
> 标签：c++, string, performance

最近，我们遇到了一段生成 XML 的代码的性能问题。想在这里分享经验。这有点长，请多多包涵。

我们准备了一个包含许多项目的简单 XML。每个项目可以有 5-10 个元素。结构是这样的：

```
<Root>
    <Item>
        <Element1Key>Element1Val</Element1Key>
        <Element2Key>Element2Val</Element2Key>
        <Element3Key>Element3Val</Element3Key>
        <Element4Key>Element4Val</Element4Key>
        <Element5Key>Element5Val</Element5Key>
    <Item>
    <Item>
        <Element1Key>Element1Val</Element1Key>
        <Element2Key>Element2Val</Element2Key>
        <Element3Key>Element3Val</Element3Key>
        <Element4Key>Element4Val</Element4Key>
        <Element5Key>Element5Val</Element5Key>
    <Item>
</Root> 
```

生成 XML 的代码是（简化为全局函数）：

```
void addElement(std::string& aStr_inout, const std::string& aKey_in, const std::string& aValue_in)
{
    aStr_inout += "<";
    aStr_inout += aKey_in;
    aStr_inout += ">";
    aStr_inout += "Elemem1Val";
    aStr_inout += "<";
    aStr_inout += aValue_in;
    aStr_inout += ">";
}

void PrepareXML_Original()
{
    clock_t commence,complete;
    commence=clock();

    std::string anXMLString;
    anXMLString += "<Root>";

    for(int i = 0; i < 200; i++)
    {
        anXMLString += "<Item>";
        addElement(anXMLString, "Elemem1Key", "Elemem1Value");
        addElement(anXMLString, "Elemem2Key", "Elemem2Value");
        addElement(anXMLString, "Elemem3Key", "Elemem3Value");
        addElement(anXMLString, "Elemem4Key", "Elemem4Value");
        addElement(anXMLString, "Elemem5Key", "Elemem5Value");
        anXMLString += "</Item>";

        replaceAll(anXMLString, "&", "&amp;");
        replaceAll(anXMLString, "'", "&apos;");
        replaceAll(anXMLString, "\"", "&quot;");
        replaceAll(anXMLString, "<", "&lt;");
        replaceAll(anXMLString, ">", "&gt;");
    }
    anXMLString += "</Root>";

    complete=clock();
    LONG lTime=(complete-commence);
    std::cout << "Time taken for the operation is :"<< lTime << std::endl;
} 
```

replaceAll() 代码将用编码形式替换特殊字符。这在下面给出。

```
void replaceAll(std::string& str, const std::string& from, const std::string& to) 
{
    size_t start_pos = 0;
    while((start_pos = str.find(from, start_pos)) != std::string::npos) 
    {
        str.replace(start_pos, from.length(), to);
        start_pos += to.length();
    }
} 
```

在最小的例子中，我编码了 200 个项目。但是，在实际情况下，这可能更多。上面的代码花费了大约 20 秒来创建 XML。这远远超出了任何可接受的限度。可能是什么问题呢？以及如何提高这里的性能？

注意：字符串类的用法没有太大区别。我用 MFC CString 的另一个字符串实现测试了相同的逻辑，我得到了类似（更糟）的观察结果。另外，我不想在这里使用任何 DOM XML 解析器来以更好的方式准备 XML。这个问题并不特定于 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:16:03.247

我意识到问题可能是由于相同的字符串越来越长，这导致以下结果：1.随着字符串的增长，字符串连接变得更加昂贵 2.字符替换发生在更大的字符串中循环继续进行并且变得越来越慢。

为了解决这个问题，我使用了一个临时字符串来对单个项目 XML 进行编码，并在循环结束时将这个小 XML 附加到主 XML 中。修改后的方法如下。

```
for(int i = 0; i < 200; i++)
{
    std::string anItemString;  // Create a new string for the individual Item entry
    anItemString += "<Item>";
    addElement(anItemString, "Elemem1Key", "Elemem1Value");
    addElement(anItemString, "Elemem2Key", "Elemem2Value");
    addElement(anItemString, "Elemem3Key", "Elemem3Value");
    addElement(anItemString, "Elemem4Key", "Elemem4Value");
    addElement(anItemString, "Elemem5Key", "Elemem5Value");
    anItemString += "</Item>";

    replaceAll(anItemString, "&", "&amp;");
    replaceAll(anItemString, "'", "&apos;");
    replaceAll(anItemString, "\"", "&quot;");
    replaceAll(anItemString, "<", "&lt;");
    replaceAll(anItemString, ">", "&gt;");

    anXMLString += anItemString;   // Do all the operations on the new string and finally append to the main string.
} 
```

这提高了 XML 创建的性能，所用时间仅为 17 毫秒！

因此，我学到的教训是，在创建更大的结果时，将其拆分为子操作，将子操作的结果收集到新字符串中，并将一次附加到全局结果中。我不确定这是否已经是一种模式或名称。

由于 StackOverFlow 提供了一个选项来分享 Q&A 方面的经验，所以我想利用它。欢迎任何意见/改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:52:40.057

如果您可以在创建内容之前估计结果字符串 ( `anXMLString`) 的长度，那么您可以为字符串分配足够的缓冲区空间。当缓冲区足够大时，将不会发生重新分配和复制（目标字符串）。

这边走：

```
std::string anXMLString;
anXMLString.reserve( size ); 
```

我不确定std :: string，它是否需要搜索附加点，或者是否将字符串的长度保留在内存中。

# java - 来自 HDFS 集群的 ListFiles

> ID：11393966
> 
> 赞同：6
> 
> 时间：2012-07-09T11:16:14.687
> 
> 标签：java, hadoop

我是 hadoop 和其他东西的业余爱好者。现在，我正在尝试访问 hadoop 集群（HDFS）并从客户端 eclipse 中检索文件列表。在hadoop java客户端上设置好所需的配置后，我可以进行以下操作。

我可以执行从客户端访问 HDFS 的**copyFromLocalFile**、**copyToLocalFile操作。**这就是我所面临的。当我给出 listFiles() 方法时，我得到了

```
org.apache.hadoop.fs.LocatedFileStatus@d0085360
org.apache.hadoop.fs.LocatedFileStatus@b7aa29bf 
```

主方法

```
Properties props = new Properties();
props.setProperty("fs.defaultFS", "hdfs://<IPOFCLUSTER>:8020");
props.setProperty("mapreduce.jobtracker.address", "<IPOFCLUSTER>:8032");
props.setProperty("yarn.resourcemanager.address", "<IPOFCLUSTER>:8032");
props.setProperty("mapreduce.framework.name", "yarn");
FileSystem fs = FileSystem.get(toConfiguration(props)); // Setting up the required configurations
Path p4 = new Path("/user/myusername/inputjson1/");
RemoteIterator<LocatedFileStatus> ritr = fs.listFiles(p4, true);
while(ritr.hasNext())
        {
            System.out.println(ritr.next().toString());
        } 
```

我也尝试过 FileContext 并最终只获得了 filestatus 对象字符串或其他东西。当我迭代到远程hdfs目录时是否有可能获取文件名，有一个名为getPath（）的方法，这是我们使用hadoop API检索文件名完整路径的唯一方法还是有任何其他方法这样我就可以只检索指定目录路径中的文件名，请帮助我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T11:49:11.033

您确实可以使用`getPath()`它将返回一个`Path`对象，让您查询文件的名称。

```
Path p = ritr.next().getPath();
// returns the filename or directory name if directory
String name = p.getName(); 
```

您获得的`FileStatus`对象可以告诉您这是文件还是目录。

以下是更多 API 文档：

[http://hadoop.apache.org/common/docs/r1.0.0/api/org/apache/hadoop/fs/Path.html](http://hadoop.apache.org/common/docs/r1.0.0/api/org/apache/hadoop/fs/Path.html)

[http://hadoop.apache.org/common/docs/r1.0.0/api/org/apache/hadoop/fs/FileStatus.html](http://hadoop.apache.org/common/docs/r1.0.0/api/org/apache/hadoop/fs/FileStatus.html)

# linux - 如何仅从差异中获得差异

> ID：11393971
> 
> 赞同：3
> 
> 时间：2012-07-09T11:16:29.693
> 
> 标签：linux, sed, diff

我有这个代码，如何改进它

```
diff  -b -i -w  out.txt out2.txt  
 | grep '^>' 
 | sed 's/^>//g' 
 | sed ':a;N;$!ba;s/\n/ /g' 
```

示例数据（out.txt）

```
abc def ghk
abc def2 ghk
abc def ghk

123 333 555
566 3423 23
566 3423 3542 
```

示例数据（out2.txt）

```
abc def2 ghk
abc def ghk
abc def ghk

123 555 555
fsdjhfsda sd
566 3423 3542 
```

预期结果 ：

```
abc def ghk  123 555 555  fsdjhfsda sd 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T00:10:08.200

这是一种简单的方法：

```
echo `diff -biw out.txt out2.txt | sed -n 's/^> //p'` 
```

如果你想单独使用 grep - 如果你可以利用 GNU grep 的格式化功能 - 你可以使用这个：

```
diff --unchanged-group-format= --changed-group-format=%\> \
  --new-line-format='%l ' -biw out.txt out2.txt 
```

这可能是最快的方法，当您的文件很大时，它不需要大的内存缓冲区。（您的原始 sed 解决方案和 echo 解决方案都会将行保留在内存中直到结束，但这会随着它的进行而将它们吐出。）不过，命令本身非常冗长。另请注意，它在输出末尾留下了一个额外的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:22:11.750

看起来`comm`+`tr`是相似的：

```
comm --nocheck-order -13 out.txt out2.txt | tr '\n' ' ' 
```

你也可以把所有`sed`和`grep`合二为一`sed`：

```
diff  -b -i -w out.txt out2.txt | sed '/^>/!{d};:a;N;$!ba;s/\n>/ /g;s/^>//'

 $ diff  -b -i -w  out.txt out2.txt | grep '^>' | sed 's/^>//g' | sed ':a;N;$!ba;s/\n/ /g'
123 555 555  fsdjhfsda sd  566 3423 3542
 $ diff  -b -i -w out.txt out2.txt | sed '/^>/!{d};:a;N;$!ba;s/\n>/  /g;s/^>//'
123 555 555   fsdjhfsda sd   566 3423 3542
 $ comm --nocheck-order -13 out.txt out2.txt | tr '\n' '  '
123 555 555 fsdjhfsda sd 566 3423 3542 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:40:08.830

这可能对您有用：

```
diff  -b -i -w out.txt out2.txt | sed '/^>/H;$!d;g;s/\n>/ /g;s/^ *//' 
```

# jquery - jQuery 工具：工具提示使标题消失？

> ID：11393973
> 
> 赞同：1
> 
> 时间：2012-07-09T11:16:32.370
> 
> 标签：jquery, jquery-tools

我正在尝试使用 jQuery Tools 的工具提示功能使工具提示出现。当标记看起来像这样时，很好：

```
<input type="submit" title="Submit your foo" value="foo"></input> 
```

但是当输入被禁用时，标题会神秘地从 DOM 中消失：

```
<input type="submit" disabled="disabled" title="Sorry, you cannot submit your foo" value="foo"></input> 
```

这只发生在我尝试使用 jQuery 工具时。如果我不使用 jQuery 工具，标题看起来就好了（默认浏览器效果）。有什么想法有什么问题吗？

**更新：**

[http://jsfiddle.net/7jCXz/](http://jsfiddle.net/7jCXz/) - 这个例子似乎删除了两个输入标签中的标题属性，而不仅仅是禁用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:33:08.620

尝试将您的提交按钮[包装](http://api.jquery.com/wrap/)`div`成一个，然后在您的`div`：

```
$(document).ready(function(){
    $('input[disabled="disabled"]').each(function(){
        var $tit = $(this).attr('title');
        $(this).wrap('<div class="submitWrapper" title="' + $tit + '"></div>');
    });
    //$('.submitWrapper').tooltip(); // or something like this
    $('.submitWrapper').on('mouseover', function(){
        alert('submitWrapper clicked!');
    });
}); 
```

* * *

[演示](http://jsfiddle.net/tnEmZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T05:07:13.047

帮助你有点晚了，但希望能帮助别人。

Using jQuery Tooltip, if you want to get/set the title attribute after the tooltip has been initialised, you need to use

```
$(foo).tooltip("option","content") 
```

or

```
$(foo).tooltip("option","content","some new content") 
```

Ref: [http://api.jqueryui.com/tooltip/#option-content](http://api.jqueryui.com/tooltip/#option-content)

# android - MSISDN 只能由 WAP 网站获取吗？

> ID：11393974
> 
> 赞同：-1
> 
> 时间：2012-07-09T11:16:39.303
> 
> 标签：android, iphone, http, wap, msisdn

我需要获取将从 Android 或 iPhone 访问它的人的 MSISDN（电话号码）。我知道我可以从 HTTP 标头中获取 MSISDN。

我想知道，如果我已经**与移动运营商签订了合同，**那么我可以从一个完整的 HTML 网站获得 MSISDN，还是我需要制作一个仅 WAP 的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:28:11.283

无论客户端使用何种技术，您都可以获得标头（如果它们存在）。服务器端你只需要拔出你想要的标题。无论是 WAP 还是 HTML 请求，它们都会在那里，因为两者都是 HTTP。WAP/WML 是一种类似于 HTML 的标记语言，据我所知，对 WAP 页面的请求仍然是 HTTP。

*披露：我从事此类项目。*

****下面的原始答案，左边，因为它可能对“那些后来者”有用****

 **您无法从 HTTP 标头获取 MSISDN，除非：

*   出现了严重错误，请参阅 O2 MSISDN 泄漏。当他们的过滤器开始将 MSISDN 作为标题添加到所有网站而不是他们自己的东西时。

*   你有一个非常狡猾的供应商。

*   您与特定的网络提供商达成了一项协议，为从他们的网络访问您的系统的访问者插入这些标头。

有关更多信息，请参阅[HTTP 中的 Mobile Subscriber Leakage](http://blog.jgc.org/2012/02/mobile-subscriber-leakage-in-http.html)或 google。您捕获此类信息的命中率将非常低。

据我所知，WAP 也不例外。隐私影响是巨大的，这种泄漏将受到公众的合理谴责。

还 ：

[登记册](http://www.theregister.co.uk/2012/01/25/o2_hands_out_phone_numbers_to_websites/)**

# asp.net - Asp.net - 会话超时窗口

> ID：11393976
> 
> 赞同：0
> 
> 时间：2012-07-09T11:16:45.137
> 
> 标签：asp.net

我们在 DotNet 1.0/2.0 中开发的遗留应用程序很少。我们想为这些应用程序实现会话超时。

因此，如果用户在 20 分钟内没有进行任何活动，应该会弹出一个窗口，说明您是否要保持会话处于活动状态 - 如果没有，则将我注销，否则保持他的会话处于活动状态。

请帮助我是 DotNet 的新手。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:27:42.483

如果您的应用程序正在使用母版页，或者您的页面是从某些自定义页面类继承的，那么这对您来说很容易，否则您将不得不在每个页面中编写代码。

当用户登录到您的应用程序时，将他的登录 ID 放入某个 cookie，然后在您的母版页、自定义页面类或所有页面中执行以下操作：

```
if(Session["SOMEVARIABLE"] == null)
{
      //show your dialuge to user
} 
```

如果用户选择保持会话活动而不是从 cookie 中选择他/她的登录 ID，请再次调用您的登录机制并将他/她登录到应用程序，否则将他/她重定向到登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:31:10.940

**您可以通过在 web.config 文件的 system.web 标记下添加此代码来设置 Asp.Net 应用程序的超时时间**

**表单认证：**

```
<authentication mode="Forms">
    <forms loginUrl="~/Default.aspx" defaultUrl="~/Default.aspx" protection="Validation" timeout="20"/>
</authentication> 
```

**Windows 身份验证：**

注意：如果用户登录到 Windows 环境并且它由活动目录（域）控制，则有可能存在域策略在这么多分钟不活动后将用户从“Windows 会话”中注销, 这是出于安全原因。我认为您的下一步是与负责 Windows 网络的人交谈并将其传递给他们。

**对于第二部分**

> 因此，如果用户在 20 分钟内没有进行任何活动，应该会弹出一个窗口，说明您是否要保持会话处于活动状态 - 如果没有，则将我注销，否则保持他的会话处于活动状态。

**, 下面是链接，请通过此链接，您将找到问题的完整解决方案。**

[http://community.devexpress.com/blogs/aspnet/archive/2011/06/15/asp-net-how-to-show-a-popup-warning-before-session-timeout](http://community.devexpress.com/blogs/aspnet/archive/2011/06/15/asp-net-how-to-show-a-popup-warning-before-session-timeout.aspx)

谢谢和问候，
Subhankar

# linq - Linq - 使用条件逻辑返回集合索引

> ID：11393977
> 
> 赞同：0
> 
> 时间：2012-07-09T11:16:51.247
> 
> 标签：linq

我有一个收藏

```
List<int> periods = new List<int>();
            periods.Add(0);
            periods.Add(30);
            periods.Add(60);
            periods.Add(90);
            periods.Add(120);
            periods.Add(180);

            var overDueDays = 31; 
```

我在到期日有一个变量。当值在 0 到 29 之间时，我想返回 0 的索引。当在 30 到 59 之间时，我想返回索引 1。期间列表来自 db，因此它不是硬编码的，值可能与这里的不同. 在一个语句中使用 LINQ 的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:46:40.330

您可以使用`.TakeWhile()`：

```
int periodIndex = periods.TakeWhile(p => p <= overDueDays).Count() - 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:29:33.930

这并不是 Linq 的真正设计目的，但是（假设范围不固定）您可以执行以下操作来获取索引

```
List<int> periods = new List<int>();
            periods.Add(0);
            periods.Add(30);
            periods.Add(60);
            periods.Add(90);
            periods.Add(120);
            periods.Add(180);

var overDueDays = 31;

var result = periods.IndexOf(periods.First(n => overDueDays < n)) - 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:02:13.620

这个怎么样 ？

```
 var qPeriods = periods.Where(v => v <= overDueDays)
                          .Select((result, i) => new { index = i })
                          .Last(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T13:17:28.793

假设`periods`已排序，您可以使用以下方法：

```
var result = periods.Skip(1)
                    .Select((o, i) => new { Index = i, Value = o })
                    .FirstOrDefault(o => overDueDays < o.Value);

if (result != null)
{
    Console.WriteLine(result.Index);
}
else
{
    Console.WriteLine("Matching range not found!");
} 
```

第一个值被跳过，因为我们有兴趣与范围的上限值进行比较。通过跳过它，索引会在不需要减去 1`FirstOrDefault`的情况下就位。在`overDueDays`不落在任何可用范围之间的情况下使用。

# android - 在 MonoDroid 中声明 NDEF_DISCOVERED IntentFilter 属性的方法？

> ID：11393979
> 
> 赞同：1
> 
> 时间：2012-07-09T11:16:55.383
> 
> 标签：android, android-intent, xamarin.android, nfc

我是 Monodroid 的新手，想知道是否有办法使用`IntentFilter`属性来声明：

```
<intent-filter>
    <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:mimeType="text/plain" />
</intent-filter> 
```

我尝试使用 Visual Studio 的智能感知来寻找它，但没有任何显示。我已经包含了 Android.Nfc。

原因是我无法让我的应用程序正常运行。它总是说“不幸的是，app_name 已停止”。不知道是不是`AndroidManifest.xml`合并的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:40:21.497

您可以使用它[`IntentFilterAttribute`](http://docs.mono-android.net/?link=T%3aAndroid.App.IntentFilterAttribute#)来生成：

```
[IntentFilter(new[] { "android.nfc.action.NDEF_DISCOVERED" }, 
              Categories = new[] { "android.intent.category.DEFAULT"}, 
              DataMimeType = "text/plain")]
public class MyActivity : Activity
{
    // ...
} 
```

# web-services - 将特殊字符“&”作为输入在 REST Web 服务中传递

> ID：11393981
> 
> 赞同：0
> 
> 时间：2012-07-09T11:17:05.743
> 
> 标签：web-services, rest

我有一个休息网络服务，其网址是

"/services/fetchData?id=value&name=value&date=......" 在上面如果我的名字有 '&' 字符说 'H&M' 然后 M 被忽略。

你能建议我如何避免这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:18:43.883

您应该对参数进行[urlencode](http://en.wikipedia.org/wiki/Percent-encoding)，这样`&`就变成`%26`.

# java - 视图完全渲染后如何进行回调？

> ID：11393986
> 
> 赞同：13
> 
> 时间：2012-07-09T11:17:39.427
> 
> 标签：java, android, view, callback

视图完全渲染后如何进行回调？

我正在尝试调用一个获取父视图屏幕截图的方法。如果我在方法中编写该代码`onCreate()`，应用程序会由于空指针而崩溃（因为没有呈现视图）。目前我实施的临时解决方案是在调用该方法之前延迟 1 秒。但是，我正在寻找一个更强大的解决方案来解决这个问题。

任何建议和帮助表示赞赏。谢谢 ：）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T12:31:21.437

试试这个逻辑......总是在视图获得焦点或渲染或失去焦点后调用

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    doWhateverAfterScreenViewIsRendered();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:59:44.607

我现在有一个更好的选择 :) 这确实在布局渲染后提供了一个回调

```
private class LoadActivity extends AsyncTask<String, Void, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        mainMethod();
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);

        takeScreenShot(1);
    }

    @Override
    protected String doInBackground(String... params) {
        return null;
    };
} 
```

我创建了上面的类，然后在 onCreate() 中调用了这个方法来执行

```
LoadActivity loadactivity= new LoadActivity();
loadactivity.execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:28:27.900

您应该[`onResume()`](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)在您的 上使用回调`Activity`，即

> 当 Activity 开始与用户交互时调用。此时，您的活动位于活动堆栈的顶部，用户输入将转到它。

# ruby - 将 SHA1 密码转换为二进制形式

> ID：11393988
> 
> 赞同：3
> 
> 时间：2012-07-09T11:17:49.750
> 
> 标签：ruby, bash, sha1, hexdump

我有一个密码在 SHA1 中加密的数据库，我需要将它们转换为 SHA1 二进制形式并使用 base64 进行编码，我怎样才能得到它？

这就是我所拥有的：

```
# echo -n "password" | openssl sha1
5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8 
```

这就是我需要的：

```
# echo -n "password" | openssl sha1 -binary | base64
W6ph5Mm5Pz8GgiULbPgzG37mj9g= 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:12:35.480

```
require 'digest/sha1'
require 'base64'

Base64.encode64(Digest::SHA1.digest('password'))
# => "W6ph5Mm5Pz8GgiULbPgzG37mj9g=\n" 
```

这会添加一个换行符，因此您可能需要使用

```
Base64.encode64(Digest::SHA1.digest('password')).chop
# => "W6ph5Mm5Pz8GgiULbPgzG37mj9g=" 
```

甚至更简单，如`@FrederickCheung`建议的那样：

```
Digest::SHA1.base64digest('password') 
```

* * *

## 编辑

当您只有 SHA-1 编码密码的十六进制字符串时，请执行

```
require 'base64'

pass = "5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8"
Base64.encode64([pass].pack('H*')).chop
# => "W6ph5Mm5Pz8GgiULbPgzG37mj9g=" 
```

或者您甚至可以绕过`base64`库并完全依赖`pack`：

```
[[pass].pack('H*')].pack('m0')
# => "W6ph5Mm5Pz8GgiULbPgzG37mj9g=" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:19:42.240

Python 3 方法：

```
import sys, base64

def hex_to_b64(word):
    number = int(word, base=16)
    bytestr = number.to_bytes(20, 'big')
    b64 = base64.b64encode(bytestr).decode('ascii')
    return b64

if __name__ == '__main__':
    for word in sys.argv[1:]:
        print(hex_to_b64(word)) 
```

这使

```
localhost-2:coding $ python3 shaswitch.py 5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8
W6ph5Mm5Pz8GgiULbPgzG37mj9g= 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-21T20:35:27.577

为什么要求助于python；OP想要bash：

```
% openssl sha1 -binary <(echo -n 'password') | base64
W6ph5Mm5Pz8GgiULbPgzG37mj9g= 
```

# firefox - Selenium RC 2.24.1 + Firefox 10.0.2 配置文件

> ID：11393992
> 
> 赞同：0
> 
> 时间：2012-07-09T11:18:04.647
> 
> 标签：firefox, selenium

在对许多旧版本的 Firefox（3.0.19、3.6.28、10.0.2）进行多次测试后，我遇到了一些麻烦。

我的最后一个测试是使用以下参数启动“selenium-server-standalone-2.24.1.jar”：-firefoxProfileTemplate C:\Users\XXXXXXXX\AppData\Roaming\Mozilla\Firefox\Profiles\g3c1ac71.Profile_FF_10

在此配置文件中，我已将语言配置为法语，但它不起作用，我的网站以英语显示。我也遇到了 SSL 异常，但是当 selenium 启动我的网站时，Firefox 会给我一个关于自签名证书的警报

在 3.0.19 版本中，使用了配置文件，但由于 Flash 插件，Firefox 崩溃了，所以我知道我知道使用配置文件。

很难理解 selenium 和 Firefox 之间的兼容性。

这是我忘记的特殊步骤吗？

看待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:01:28.610

重新启动计算机后，一切都像魅力一样工作。奇怪的 ！

# jquery - 如何让 jQuery UI 自动完成多个以删除已选择的项目

> ID：11393993
> 
> 赞同：3
> 
> 时间：2012-07-09T11:18:09.313
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-autocomplete, jquery-ui-autocomplete

[此处](http://jqueryui.com/demos/autocomplete/#multiple)提供的 jQuery UI 自动完成多个示例允许您多次添加相同的项目。

我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T11:18:10.407

如果您在[此处](http://jqueryui.com/demos/autocomplete/#multiple)使用 jQuery UI 提供的示例，请在自动完成的 select 函数中添加以下行：

```
availableTags.splice($.inArray(ui.item.value, availableTags), 1); 
```

这基本上删除了刚刚从可用标签列表中选择的项目。

您最终得到的选择函数应如下所示：

```
select: function( event, ui ) {
    var terms = split( this.value );
    // remove the current input
    terms.pop();
    // add the selected item
    terms.push( ui.item.value );
    // add placeholder to get the comma-and-space at the end
    terms.push( "" );
    this.value = terms.join( ", " );
    // remove added item from list of available items to select
    availableTags.splice($.inArray(ui.item.value, availableTags), 1);
    return false;
} 
```