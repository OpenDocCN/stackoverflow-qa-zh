# StackOverflow 问答 12022000-12022999

# html - Facebook like 按钮框在窗口区域外打开

> ID：12022007
> 
> 赞同：5
> 
> 时间：2012-08-18T20:28:55.293
> 
> 标签：html, css, facebook

我的网站底部有一个类似 facebook 的按钮。当我点击它时，我可以输入评论的“框”出现在我的网络浏览器窗口之外，我无法向下滚动或类似的东西（见下面的截图 - 图像的底部是窗口的底部）。我怎样才能解决这个问题？（即使框出现在按钮上方）。tks

![在此处输入图像描述](../Images/8c541fcc9012a0a4815b0186c7f987fc.png)

**HTML**

```
 <div id="social">
    <div class="fb-like" data-href="http://mydomain.com" data-send="false" data-layout="button_count" data-width="106" data-show-faces="false" data-font="verdana"></div>
    <a href="https://twitter.com/share" class="twitter-share-button" data-lang="msa">Tweet</a> 
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
  </div> 
```

**CSS：**

```
#footer {
    position: fixed;
    bottom: 0;
    color: #333;
    left: 0;
    z-index: 999;
    width: 96%;
    text-align: right;
    padding: 30px 2%;
    vertical-align: bottom;
}
#social {
    position: absolute;
    vertical-align: middle;
    left: 2%;
    color: #333;
}

.fb_iframe_widget, iframe.twitter-share-button {
    display: inline-block;
    vertical-align: middle;
}
span.languageselector {
    display: inline-block;
    height: 20px; /* same height as #social div */
    line-height: 20px; /* same as line-height */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:53:10.397

实际上有一个讨厌的解决方案。而且我不认为这是一个合法的。但是，如果它非常重要，您可以覆盖 facebook css。在你的情况下，这样的事情就可以解决问题。

```
.fb-like.fb_edge_widget_with_comment.fb_iframe_widget span iframe {

/* Now you can apply css here */
bottom:0!important;
} 
```

如果你想启用发送按钮，你可以使用，

对于浅色方案：

```
.fb_edge_comment_widget.fb_send_button_form_widget.light.fb_iframe_widget {

/********css code here*******
*Ex:    
position: fixed!important;
bottom: 20px!important;
top: initial!important;
*/
} 
```

对于深色方案：

```
.fb_edge_comment_widget.fb_send_button_form_widget.dark.fb_iframe_widget {

/********css code here*******/

} 
```

我再说一遍，这不是一个适当的解决方案。所以除非真的很重要，否则不要使用它。请记住，这些课程可以更改，并不适合所有场合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T15:53:14.950

我有同样的问题。我能够通过删除属性来修复它

```
overflow:auto 
```

从父元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T00:51:04.103

*这是将Like*按钮嵌入固定和绝对定位的容器中的常见问题。在您的情况下，最简单的解决方案是将类似按钮在页面中向上移动。您不能强制评论框弹出*而*不是*down*。

# android - 如何生成具有用户定义长度的字符串？

> ID：12022013
> 
> 赞同：1
> 
> 时间：2012-08-18T20:29:45.790
> 
> 标签：android, string

我需要能够生成具有用户定义长度的字符串。例如，如果用户输入 128，我需要一个 128 个字符的字符串。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:32:15.240

您可以创建 X random `char`s（在循环中）并使用 a`StringBuffer`连接它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:43:55.897

```
static final String generate(int n) {
  final char[] buf = new char[n];
  final Random rand = new Random();
  final int n_cs = Character.MAX_VALUE + 1;
  while (n > 0) {
    char ch;
    do {
      ch = (char) rand.nextInt(n_cs);
    } while (Character.isHighSurrogate(ch)
               || Character.isLowSurrogate(ch));
    buf[--n] = ch;
  }
  return new String(buf);
} 
```

通常，您可能应该指定某种字母表，如下所示...

```
static final String generate(int n, final char[] alphabet) {
  final char[] buf = new char[n];
  final Random rand = new Random();
  final int n_alpha = alphabet.length;
  while (n > 0) {
    buf[--n] = alphabet[rand.nextInt(n_alpha)];
  }
  return new String(buf);
} 
```

# javascript - 可以将单数 Javascript var 视为数组吗？

> ID：12022020
> 
> 赞同：0
> 
> 时间：2012-08-18T20:30:49.397
> 
> 标签：javascript

虽然我确信那里有一个重复的问题，因为我不熟悉 javascript，我不知道正确的术语，因此不知道从哪里开始搜索它（如果我知道它叫什么，我刚刚读过它）。

我有一个包含一组数字的奇异变量（**不是数组）：**

```
var Latitude = Math.floor(Math.random()*90) + Math.random(); 
```

我想将 Latitude 中包含的所有数字编码，包括浮点数之后的数字（包括浮点数和任何减号 - 尽管请注意此代码示例不添加减号）到字母数组中，所以 0 = A，1 = B，依此类推。

是否有任何*简单*的方法可以将奇异 var 转换为单个数字数组进行编码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T20:35:22.087

首先，您的问题中的轻微错字`Math.random`是一个功能。您想将获得的数字转换为字符串，最简单的方法是添加一个空字符串 - `''`。然后只需使用该`split`函数将字符串分解为数组：

```
var Latitude = ((Math.floor(Math.random()*90) + Math.random()) + '').split(''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:40:38.830

```
var latitude = new Array();
latitude.value = Math.floor(Math.random*90) + Math.random();
latitude.push(2);//demonstrating that it's an array;
console.log(latitude.value);//for testing purposes only
console.log(latitude);//for testing purposes only 
```

现在您可以使用纬度的值，也可以将其用作数组。

***编辑***对不起，我似乎误读了你的问题。格雷厄姆的回答是正确的。但这可能会帮助有类似问题的人。我以为您想使用相同的变量来存储值和数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:38:03.533

首先将值转换为字符串 (toString())，然后将其拆分 (split())：

```
var arr = Latitude.toString().split('') 
```

# c++ - C++ - 有没有办法将字段\方法添加到使用“typedef”定义的类型中？

> ID：12022021
> 
> 赞同：0
> 
> 时间：2012-08-18T20:31:04.920
> 
> 标签：c++, inheritance, typedef

正如标题所说，有没有办法做这样的事情：

```
typedef vector<int> ListInt;
string ListInt::GetSomeValue() { //Add method to 'ListInt'
    return "value";
}
int ListInt::SomeField; //Add field\variable to 'ListInt' 
```

无继承等（减少编译时间）

对不起，短信很抱歉，但我认为这已经足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:39:07.927

这可以用我知道的使用[统一函数调用语法](http://www.drdobbs.com/cpp/uniform-function-call-syntax/232700394)或运行时类型修改的语言来解决。C++ 都不支持这些，所以，不，我认为你在这里没有选择。有很多“关闭”解决方案，例如继承或自由函数或封装类型 - 但没有一个完全符合您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T20:48:54.847

```
//ListInt.h
struct ListInt {
    vector<int> *operator->( );
    vector<int> *operator*( );
    int SomeField;
    string GetSomeValue( );
private:
    vector<int> internalvalue;
};

//ListInt.cpp
vector<int> *ListInt::operator->( ) {
    return &internalvalue;
}
vector<int> *ListInt::operator*( ) {
    return &internalvalue;
}
string ListInt::GetSomeValue( ) {
    return "value";
} 
```

地址为`SomeField`as`ListInt::SomeField`和地址为`GetSomeValue`as `ListInt::GetSomeValue`。例子：

```
ListInt listInt;
listInt.SomeField = 3;
listInt.GetSomeValue( ); //Returns 'value'
listInt->push_back(2); //Use `vector<int>`'s fields. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T23:49:29.693

> 有没有办法将字段/方法添加到使用“typedef”定义的类型中？

首先需要回答的是`typedef`真正的含义。A为现有类型`typedef`创建*别名*，但*不*创建新类型。之后的`typedef`新名称将与原始名称完全相同，并且在*大多数*情况下，这两个名称都可以互换使用^*。

一旦清楚了，答案似乎很明显：您不能从`typedef`别名中添加或删除任何功能，因为它完全引用了另一种类型。没有两种类型，只有一种：原版。

* * *

^*原始类型和通过 a 创建的别名`typedef`不是 100% 等效的，尽管差异很小。特别是，原始类型的名称（假设它是用户定义的）与函数、变量或别名`std::vector<X>`位于不同的标识符空间中。`typedef`名称不是类型的`typedef`名称，它是类型的别名。以下代码显示了其中一个差异：

```
struct A {};
typedef A B;
struct A a;      // creates a variable `a` of type `A`
//struct B b;    // error, `B` is a typedef, not a `struct` 
```

一些最显着的差异只有在编译多个翻译单元时才清楚：`typedef`别名*始终*位于翻译单元的内部。目标文件中生成的任何符号都不会引用`typedef`. 编译器将解析`typedef`实际类型，并且所有符号和名称修改都将像使用*实际*类型一样执行。

# php - javascript 或 jQuery 不适用于动态生成的内容

> ID：12022027
> 
> 赞同：4
> 
> 时间：2012-08-18T20:32:01.160
> 
> 标签：php, javascript, jquery, dynamic-content

早上的人。如何让我的 javascript 或 jquery 在动态生成的内容中工作。

基本上，我根据用户在导航菜单上单击的内容创建了生成内容的网页。

我面临的问题：

1.  当主页从内容页面生成内容时，jquery 或 javascript 将不起作用。
2.  但是当我单独打开内容页面时，一切正常。

通过搜索收集的信息：

> jQuery.load() 方法忽略与动态生成的内容一起出现的脚本标签。

所以我尝试以下方法：

1.  将我需要的标签放在主页中，而不是在内容页面中。它不起作用。似乎 jquery 找不到内容元素，因为它们是动态生成的。
2.  由于 jQuery.load() 忽略了脚本标签，我尝试了纯 javascript ajax，比如 w3schools.com 的教学方式，即 xmlhttp 方式来生成内容。它不起作用。
3.  单击按钮时。控制台没有响应。

* * *

**示例**contact.php

```
<script type="text/javascript">
$(function() {
    $("#submitUser").click(function(e) {
    var fname = $("#fname").val();
    $("#theresult").text(fname);
    e.preventDefault();
});
});
<form id="contactForm"> 
<label for='fname' >First Name</label><br/>
<input id="fname" type="text" name="fname" maxlength="100" />
</form>
<div id="theresult"></div> 
```

当这个contact.php动态生成到其他页面时，它不起作用。当我单击“提交”按钮时，控制台没有显示任何响应。好像jquery不存在。
但是当我在浏览器中单独打开它时，它可以工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T20:53:19.417

对于动态生成的元素，您应该委托事件，您可以使用以下`on`方法：

```
$(function() {
    $(document).on('click', '#submitUser', function(e) {
       var fname = $("#fname").val();
       $("#theresult").text(fname);
       e.preventDefault();
    });
}); 
```

`live()`方法已[弃用](http://api.jquery.com/category/deprecated/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T20:37:43.293

由于您的问题没有很好地描述，因此在这里暗中进行猛烈抨击，但也许您正在尝试使用`.click()`等将事件绑定到动态加载到页面中的事物？

如果是这样，你可能想看看[`.on()`](http://api.jquery.com/on/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T20:40:19.697

您需要使用现场活动。

例如，如果您生成的内容包含点击事件，您可以这样做：

```
$(".something").live("click", function({ 
// do something
)}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-06T08:33:00.527

对于动态生成的字段，请使用 .on() JQuery 方法：

```
$(document).on('click', '#MyID', function(e) {
    e.preventDefault(); // or you can use "return false;"
}); 
```

# maps - 如何获取带有房屋轮廓的谷歌地图视图？

> ID：12022028
> 
> 赞同：0
> 
> 时间：2012-08-18T20:32:02.917
> 
> 标签：maps

在这个应用程序中，您输入您的家庭住址，然后地图会变成带有每个房屋轮廓的视图？你们有谁知道他们是怎么做到的吗？或者他们走了什么路线？任何与此相关的有用信息或交互式地图将不胜感激。

您可以在这里查看图片：

![](../Images/f8643354daa82d7cf605bca07c5737c7.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:11:48.560

您引用的 URL 提供的是图像，而不是地图，因此它可能只是他们想要做的事情的模型。

也有可能这个应用程序适用于有限的地理区域，他们手动计算了包裹信息（或从他们的城市获取）。

仅凭图像很难分辨。

# gwt - Gwt UIBinder DockLauout 北元素引发错误，因为必须包含小部件，但发现

> ID：12022029
> 
> 赞同：0
> 
> 时间：2012-08-18T20:32:13.990
> 
> 标签：gwt, uibinder

在尝试使用 Gwt UIBinder 从主 UI 加载自定义小部件时，我遇到了异常

```
[ERROR] <g:north size='5'> must contain a widget, but found <app:HeaderPanel ui:field='headerPanel'> Element <g:DockLayoutPanel styleName='{style.outer}' unit='EM'> (:8) 
```

在开发模式下解析 XML 时。下面是我为此创建的 XML

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui" 
    xmlns:app='urn.import:com.test.test.client'
    xmlns:test='urn.import=com.test.test.client'>
     <ui:style src="Resources/GlobalStyles.css" />

  <g:DockLayoutPanel unit='EM' styleName='{style.outer}'>

    <g:north size='5'>
      <app:HeaderPanel ui:field='headerPanel' />
    </g:north>

    <g:west size='14'>
      <test:FriendList ui:field='friendList' />
    </g:west>

    <g:center>
      <g:HTMLPanel styleName='{style.boxPadding}'>

        <div class="{style.titleBar}">Latest Activity</div>
        <g:ScrollPanel ui:field='mainPanel' styleName='{style.mainPanel}' />
      </g:HTMLPanel>
    </g:center>

    <g:south size="3">
      <g:HTMLPanel styleName='{style.footerPanel}'>
        <div>
          <a href="#">Contact us</a>
          |
          <a href="#">Privacy</a>
          |
          <a href="#">About</a>
        </div>
      </g:HTMLPanel>
    </g:south>

  </g:DockLayoutPanel>

</ui:UiBinder> 
```

headerPanel 小部件在层次结构中退出。上面UiBinder对应的代码如下

```
public class TestApp implements EntryPoint {

    @UiField
    HeaderPanel headerPanel;
    @UiField
    ScrollPanel mainPanel;

    RootLayoutPanel root;

    private static TestApp singleton;

    public static TestApp get() {
        return singleton;
    }

    interface TestAppUiBinder extends UiBinder<DockLayoutPanel, TestApp> {
    }

    private static TestAppUiBinder uiBinder = GWT
            .create(TestAppUiBinder.class);

    @Override
    public void onModuleLoad() {
        // TODO Auto-generated method stub
        singleton = this;
        DockLayoutPanel outer = uiBinder.createAndBindUi(this);

        root = RootLayoutPanel.get();
        root.add(outer);
    }

} 
```

基本上我是 Gwt 的新手并试图学习这些东西。在这方面的任何指针都会有很大的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:23:12.290

是什么 `<app:HeaderPanel ui:field='headerPanel' />`？如果它不扩展 Widget 那么它将无法工作。试着放在`<g:Label>FOO</g:Label>`那里，看看它是否有效。还要确保您的 xmlns 是正确的。它将在 com.test.test.client 包中查找 Header Panel。如果您尝试使用 gwt 标题面板，那么它需要

```
<g:HeaderPanel ui:field="headerPanel" /> 
```

我想你误解了`xmlns`. 这告诉 gwt 在哪里寻找你的 java 类。app 和 test 都指向同一个包。仅当您想要包含自己的自定义小部件类或额外的东西（如`CellTable`和`DataGrid`. 我相信你想要使用标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T05:28:31.990

问题已得到修复，因为它是 xml 解析问题。感谢您提供输入。

# css - 有没有办法在一个元素上使用两个类或模拟这种行为？

> ID：12022035
> 
> 赞同：0
> 
> 时间：2012-08-18T20:33:01.010
> 
> 标签：css

我需要去做：

```
 <p id="un_but" class="blue_but" class="radius_right">SignUp</p> 
```

但这不起作用。

显然我可以结合类属性，但我想知道是否还有另一种方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T20:35:14.520

```
 <p id="un_but" class="blue_but radius_right" >SignUp</p> 
```

dom element( `p`) 只能有一个属性( `class`)，但有多个值用空格分隔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T20:39:15.057

CSS 鲜为人知的技巧之一是您不必将元素限制在一个类中。如果您需要在一个元素上设置多个类，只需在属性中用空格分隔它们即可添加它们。例如：

```
<p class="pullquote btmmargin left">...</p> 
```

这会在该段落标签上设置以下三个类：

pullquote btmmargin left 您可以在 CSS 中将它们指定为通用类：

```
.pullquote { ... }
 .btmmargin { ... }
 p.left { ... } 
```

如果您将类设置为特定元素，您仍然可以将其用作类列表的一部分，但请注意，它只会影响 CSS 中指定的那些元素。

您可以使用重要关键字来设置不同类的优先级。例如：

```
.pullquote { width :15 px !important }
     .btmmargin { width:20px  }
     p.left { ... } 
```

在上面的示例中，20px 宽度属性将具有更高的优先级。

# iframe - 如何将 Open Graph 属性添加到 iframe？

> ID：12022039
> 
> 赞同：0
> 
> 时间：2012-08-18T20:33:50.073
> 
> 标签：iframe, facebook-opengraph, prettyphoto

如何将 Open Graph 属性添加到 iframe？

例如，这是 prettyPhoto（用于显示全屏图像的类似灯箱的 jquery 插件）默认生成的 Facebook“点赞”按钮：

```
<iframe src="//www.facebook.com/plugins/like.php?locale=en_US&amp;href=http%3A%2F%2Fexample.com%2F%23prettyPhoto%2F2%2F&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowtransparency="true"></iframe> 
```

这段代码有以下问题：

1.  在实践中，它喜欢页面[http://example.com](http://example.com)而不是动态照片页面（即[http://example.com/#prettyPhoto/2/](http://example.com/#prettyPhoto/2/)）
2.  [它显示来自页面http://example.com](http://example.com)的标题和描述，而不是动态照片页面

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)工具，当我将我的动态图像页面地址传递给它时（http://example.com/#prettyPhoto/2/）告诉我：

```
Inferred Property:  The 'og:url' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property:  The 'og:title' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property:  The 'og:description' property should be explicitly provided, even if a value can be inferred from other tags. 
```

设置这些属性是否有助于获得正确的图像 url 和描述？如何将这些属性插入到“喜欢”按钮 iframe 中？例如，假设 og:title 是“我的超级形象”。上面提到的 iframe 代码在这个属性集下应该是什么样子，放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:59:11.350

> 如何将 Open Graph 属性添加到 iframe？

当然，一点也不。

这些属性被放入提供 HTML 文档的 URL 的 HTML 代码中；“iframe”与它无关。

> 这段代码有以下问题：
> 
> 在实践中，它喜欢页面[http://example.com](http://example.com)而不是动态照片页面（即[http://example.com/#prettyPhoto/2/](http://example.com/#prettyPhoto/2/)）
> 
> [它显示来自页面http://example.com](http://example.com)的标题和描述，而不是动态照片页面

这些*不是*类似按钮代码的问题，而是`http://example.com`.

URL 的散列部分仅具有客户端含义——它甚至根本不会传输到 Web 服务器。`http://example.com/#prettyPhoto/2/`从 Web 服务器（服务于 example.com 的服务器）的角度来看，完全相同的 URL 也是`http://example.com/` **如此**。因此，它将为对这两个 URL 的请求提供相同的数据，这完全*不是*点赞按钮或 Facebook 的错。

这很可能是菜鸟的错，*他们使用**花哨的 AJAX*和东西在 example.com 上设置了该页面，认为这很酷等等，但同时缺乏有关所涉及技术的*基本知识。*

> 设置这些属性是否有助于获得正确的图像 url 和描述？

不; 直到使网站的个别内容在个别 URL 下可用的问题没有首先解决。

# javascript - Cufon 和德语变音符号 (ö,ä,ü)

> ID：12022042
> 
> 赞同：0
> 
> 时间：2012-08-18T20:34:47.403
> 
> 标签：javascript, fonts, cufon

我对 cufon 字体有一个奇怪的错误。当我在“Lösung”中的单词中有变音符号时，该单词会显示为“LÖSung”。

字体已使用，元素以正确的字体显示。

这里是我用来设置元素的 JS 代码。

```
Cufon.replace('h2,h3,.counter,.blog_more, .navigation a,.contentheading, #search, #footer ',
{font:family:'Lobster 1.3',hover:true }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-19T10:23:22.167

好的，在[jsfiddle.net](http://jsfiddle.net/kmVB8/2/)上玩了一下代码后，结果发现如果你有同样的问题，你必须关闭 text-transform:capitalize; 在你的 CSS 文件中

# javascript - jQueryJavascript：“无法转换 JavaScript 参数 arg 0 [nsIDOMDocumentFragment.appendChild]”

> ID：12022044
> 
> 赞同：0
> 
> 时间：2012-08-18T20:34:52.947
> 
> 标签：javascript, jquery

我的`HTML`样子

```
 <div class="queue_list">
        <div class="queue_item hide-item">
            <img class="thumbnail" />
            <p class="title"></p>
        </div>
    </div> 
```

我的`jQuery`功能看起来像

```
$(function(){
    $('#queue').click(function(){
        $("#feature").load("templates/queue.html");
        var template = $('.queue_item').clone();
        if (localStorage['test'] == null ) {
            $('.queue_list').append(<p>You have not added any video to the queue yet</p>);
        } else {
            queue_list = JSON.parse(localStorage['queue']);
            for (var i = 0; i < queue_list.length; i++) {
                console.log(queue_list[i]);
            }
        }
    }); 
```

当我在 中进行测试时`Firefox`，我看到异常为

```
message "Could not convert JavaScript argument arg 0 [nsIDOMDocumentFragment.appendChild]"
name    "NS_ERROR_XPC_BAD_CONVERT_JS"
result  2153185289
__proto__   [unsupported: no toString() function in type object] { QueryInterface=QueryInterface(), initialize=initialize()} 
```

我`localStorage['test']`是空的

我在这里做错了什么？

# wordpress - 网站刷新时字体会发生一秒钟的变化

> ID：12022046
> 
> 赞同：0
> 
> 时间：2012-08-18T20:34:55.310
> 
> 标签：wordpress, fonts, cufon

我需要有关我的字体问题的帮助。当我刷新站点时，所有文本字体都以类似于 Verdana 的开头，然后更改为我正确的字体 Quantico。好像嗡嗡作响。我的 wordpress 主题是使用 Cufon 字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:07:50.070

Cufon 只是在页面加载后替换页面字体，因此您将获得两种不同版本的字体。初始页面加载时的原始 css 字体，然后运行 ​​cufon.replace 后的 Cufon 字体。我不认为有任何办法解决它。您可以试试这个（[https://github.com/sorccu/cufon/wiki/FAQ#wiki-faq-5](https://github.com/sorccu/cufon/wiki/FAQ#wiki-faq-5)）并检查实际加载 Cufon 的时间。

# python - Python中函数装饰器的变体

> ID：12022049
> 
> 赞同：0
> 
> 时间：2012-08-18T20:35:03.363
> 
> 标签：python, decorator

Python 中函数类型和类类型、参数和无参数装饰器的不同化身有哪些示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:35:03.363

```
def decorator_noarg(f):
    def wrapper(*args, **kwargs):
        print("Inside decorator-function, WITHOUT arg.")
        return f(*args, **kwargs)
    return wrapper

def decorator_witharg(dec_arg):
    def real_decorator(f):
        def wrapper(*args, **kwargs):
            print("Inside decorator-function, WITH arg: %s" % (dec_arg))
            return f(*args, **kwargs)
        return wrapper
    return real_decorator

class decoratorclass_noarg(object):
    f = None
    def __init__(self, f):
        def host_wrapper(*arg, **kwargs):
            print("Inside decorator-class, WITHOUT arg.")

            # We lose the original instance of the object.
            return f(test_class(), *arg, **kwargs)

        self.f = host_wrapper

    def __call__(self, *args, **kargs):
        return self.f(*args, **kargs)

class decoratorclass_witharg(object):
    f = None
    def __init__(self, dec_arg):
        def decorator(host_method):
            def host_wrapper(host_obj, *arg, **kwargs):
                print("Inside decorator-class, WITH arg: %s" % (dec_arg))
                return host_method(host_obj, *arg, **kwargs)
            return host_wrapper
        self.f = decorator

    def __call__(self, *args, **kwargs):
        return self.f(*args, **kwargs)

class decorator_on_function_noarg(object):
    f = None

    def __init__(self, f):
        self.f = f
        pass

    def __call__(self):
        print("Inside decorator-on-function class, without arg.")
        return self.f()

class decorator_on_function_witharg(object):
    f = None

    def __init__(self, dec_arg):
        def decorator(host_method):
            def host_wrapper(*arg, **kwargs):
                print("Inside decorator-on-function class, with arg: %s" % (dec_arg))
                return host_method(*arg, **kwargs)
            return host_wrapper
        self.f = decorator

    def __call__(self, *args, **kwargs):
        return self.f(*args, **kwargs)

def decorator_function_on_method_noarg(f):
    print("Inside decorator-function on method, without arg.")
    return f

def decorator_function_on_method_witharg(dec_arg):
    def wrapper(f):
        print("Inside decorator-function on method, with arg: %s" % (dec_arg))
        return f

# Testing calls.

class test_class(object):
    #@decorator_witharg(44)
    #@decorator_noarg
    #@decoratorclass_witharg(1)
    #@decoratorclass_noarg
    #@decorator_function_on_method_noarg
    #@decorator_function_on_method_witharg(33)
    def test_func(self, arg1, arg2):
        print("Inside: %s, %s" % (arg1, arg2))
        return 123

#@decorator_on_function_noarg
#@decorator_on_function_witharg(22)
def test_func():
    print("Inside test_func.")

#test_class().test_func(33, 44)
#test_func() 
```

# java - 为什么 jvisualvm 崩溃并显示消息：“未指定协议”

> ID：12022052
> 
> 赞同：2
> 
> 时间：2012-08-18T20:35:18.077
> 
> 标签：java, linux, jvisualvm

使用 Ubuntu 11.10。当我从命令行运行 jvisualvm 时，输出为：“未指定协议”。然后程序退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T15:29:25.243

Jayan 是正确的，这看起来像是一个`DISPLAY`错误，当您尝试在同一台机器上作为不同用户或远程机器上运行命令时，可能会发生这种情况。如果您不担心安全性，这里有一个快速修复它的方法。

*   在您的本地计算机上键入`xhost +`作为主用户（可以启动显示窗口的程序的用户，例如`xterm`）。

*   如果您在同一台机器上以另一个用户的身份运行命令，那么您现在可能能够执行此操作。`export DISPLAY=localhost:0.0`如果没有，请以该用户身份尝试。

*   如果您在远程计算机上运行命令，但希望它显示在本地计算机上，请`export DISPLAY=YOUR_IP_ADDRESS:0.0`在远程计算机上尝试。

我在尝试以用户身份在本地计算机上运行 JVisualVM`mapred`以分析一些 Hadoop 作业时遇到了它。我可以想象，当 Hadoop 在集群中运行时（而不是在我的本地机器上以伪分布式模式运行），我必须登录到远程机器来执行此操作。

（关于安全性的评论：`xhost +`如果 Internet 上的任何人知道您的 IP 地址，将允许他们在您的计算机上弹出窗口。`xhost`重新启动时重置的效果，因此在个人计算机上通常不是问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:56:53.387

您是否尝试过使用 GUI 运行任何其他应用程序？如果它们也因类似错误而失败，则与显示设置有关。

获得此错误的一种方法是未定义正确的 DISPLAY。（请发布完整的例外情况。）

# python - 对 is_valid 的工作方式感到困惑

> ID：12022057
> 
> 赞同：2
> 
> 时间：2012-08-18T20:35:29.510
> 
> 标签：python, django

我有一个视图可以验证表单中的数据，该表单仅包含有关项目的一些基本信息。`is_valid`即使在阅读完 [这篇](https://docs.djangoproject.com/en/dev/ref/forms/validation/#form-subclasses-and-modifying-field-errors)文章后，我也对该方法在这里的工作方式感到困惑。如果用户没有输入一些必填字段，例如名称或图像 1，我希望他们在页面上看到“此字段是必需的”或类似性质的错误。我想如果`form.is_valid`返回`False`，这些消息会自动在页面上为用户提出。或者我是否需要为每个字段指定我希望用户看到的错误消息？

```
 #view
            def sell(request):
                if request.method == "POST":
                    form = AddItem(request.POST, request.FILES)
                    if form.is_valid():
                        item = form.save(commit=False)
                        item.user = request.user
                        item.is_active = True
                        item.slug = slugify(item.name)
                        item.save()
                        return HttpResponseRedirect('thanks.html')  
                else:
                    form = AddItem()
                    return render_to_response('forsale.html', locals(), context_instance=RequestContext(request))

    #form    
        class AddItem(forms.ModelForm):
            name = forms.CharField(label="Title")

            class Meta:
                model = Item
                exclude = ('user','slug','is_active',)

#model

class Item(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=75)
    slug = models.SlugField(max_length=50, unique=True)
    is_active = models.BooleanField(default=True, blank=True)
    image1 =  models.ImageField(upload_to='img')
    image2 =  models.ImageField(upload_to='img', blank=True)
    image3 =  models.ImageField(upload_to='img', blank=True)
    image_caption1 = models.CharField(max_length=200, blank=True)
    image_caption2 = models.CharField(max_length=200, blank=True)
    image_caption3 = models.CharField(max_length=200, blank=True)
    price = models.DecimalField(max_digits=8, decimal_places=2)
    quantity = models.IntegerField(default=1)
    description = models.TextField()
    created = models.DateTimeField(auto_now_add=True)
    shipping_price = models.DecimalField(decimal_places=2, max_digits=6)
    categories = models.ManyToManyField(Category) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:42:44.240

您需要从表单对象中提取错误，`form.errors`然后根据需要处理字典。如果您使用的是 ajax，只需将 dict 作为 json 发送回来并使用 javascript 来处理它。如果是直接 html 表单提交，那么你需要用传递的字典中的错误来渲染和响应页面，并在模板中处理传递的错误（通常带有`{% if errors %}`标签

# android - DialogFragment - 实现 OK 按钮和其他问题

> ID：12022058
> 
> 赞同：0
> 
> 时间：2012-08-18T20:35:57.167
> 
> 标签：android, dialog

我正在尝试实现一个相对简单`DialogFragment`的，它应该包含一个图像和一个确定按钮，我想根据我的活动的需要显示它。

`onCreateView`我在via中设置了它的布局`inflater.inflate`，但我不知道如何告诉它 OK 按钮事件处理程序的实现位于我的自定义 DialogFragment 类中。它似乎试图在活动中找到它，这不是我想要的。打电话`getDialog().dismiss()`就足以驳回它吗？

以下是我在活动中创建对话框的方式：

```
ResponseDialog dialog = new ResponseDialog();
dialog.show(getFragmentManager(), "dialog_response_image"); 
```

另外，有些人说我的自定义 DialogFragment 应该设置`getDialog().setCanceledOnTouchOutside(true);`，但我应该在哪里设置。在`onActivityCreated`?

如果我想设置它包含的图像的来源，我如何从活动中访问它的视图？

~~此外，由于某种原因，即使我使用静态宽度/高度，它也会填满整个显示器。有谁知道如何解决这一问题？~~- 我设法通过切换到`LinearLayout`而不是布局 XML来解决这个`RelativeLayout`问题......`DialogFragment`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:background="@color/background_color"
    tools:context=".MainActivity"
    android:layout_width="200dp"
    android:layout_height="400dp"
    android:id="@+id/dialogImageReponse" >

    <Button
        android:id="@+id/dialogButtonOk"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="@string/ok"
        android:onClick="Ok" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:18:17.940

我将尝试回答您的每个问题：

1.）关于“如何告诉它确定按钮事件处理程序的实现位于我的自定义 DialogFragment 类中”我不确定你为什么要这样做，因为你没有告诉我们。

2.) “调用 getDialog().dismiss() 是否足以解除它？”。如果你想从你的 Activity 中关闭 DialogFragment 那么你只需要调用 dialog.dismiss() （这里的'dialog' 是指 ResponseDialog dialog = new ResponseDialog(); 所以显然你只能调用 dialog.dismiss() 一旦你'已经创建了 ResponseDialog 对象。

3.) 关于“getDialog().setCanceledOnTouchOutside(true);” 再一次，你只需要打电话

```
dialog.setCanceledOnTouchOutside(true); 
```

紧随其后：

```
ResponseDialog dialog = new ResponseDialog();
dialog.show(getFragmentManager(), "dialog_response_image"); 
```

4.) 你可以通过调用来访问它的视图：

```
View v = dialog.getView(); 
```

尽管如果您只想设置要使用的图像的来源，并且我假设您想使用存储在手机中的照片或图片，那么您将不得不像这样为 ResponseDialog 使用参数化构造函数一个参数，您必须传递 URI 或您希望在 dialogfragment 中显示的图片的文件路径：

```
ResponseDialog dialog = new Response(String filepath); 
```

然后在我理解为 ResponseDialog 的自定义对话框类中，您必须使用此文件路径（在构造函数中接收）来创建位图，然后将该位图设置为该 DialogFragment 中 ImageView 的源。

# android - 为什么我不能播放高于 1.8 的 android 音高？

> ID：12022060
> 
> 赞同：1
> 
> 时间：2012-08-18T20:36:12.783
> 
> 标签：android, audio, pitch

我正在尝试编写一个能够与用户输入同步播放 MIDI 文件的音乐应用程序。我已经完成了创建自定义视图、播放声音和读取 MIDI 数据的工作。现在我正在尝试播放 MIDI 音符。我用

```
sounds.play(tone, 1.0f, 1.0f, 0, 0, x.x); 
```

除了更高的音高外，这可以很好地播放 66kb 样本。根据文档，音高 xx 的范围从 0.5（半速，八度以下）到 2.0（两倍速度，八度以上）。但是，当我尝试高于 1.8 的音高时，我收到 AudioTrack 错误，“AudioFlinger 无法创建音轨，状态：-22。我实际上也可以使用低于 0.5 的值，这与文档相反。

什么是停止使用高于 1.8 的值？

# android - ADT 插件的 Eclipse 问题

> ID：12022064
> 
> 赞同：0
> 
> 时间：2012-08-18T20:37:00.500
> 
> 标签：android, eclipse

有谁知道如何修复/清理安装eclipse？

我的带有 ADT 插件的 Eclipse Juno 版本的行为非常奇怪，但是由于 Eclipse 无需安装就直接运行，我不知道如何将其重新配置为初始状态。

当我注意到输入时xml布局代码行消失时，我正在处理Android布局。代码本身并没有被删除，只是没有显示——有时我什至看不到我正在输入的代码，或者它看起来好像在覆盖其他东西。

而最后一根稻草刚刚发生。不知何故，我的键盘通过 Eclipse 卡在了 Ctrl 按钮上。所以在我退出程序后，我的 Ctrl 按钮仍然被按下。所以尝试在记事本中键入“s”会弹出“保存”对话框，当我打开 Word 时，它问我是否想从 ctrl 开始以安全模式启动键被按下。解决方案是重新启动我的笔记本电脑（当我在重新启动之前插入键盘时，这个错误仍然存​​在）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:42:30.357

`eclipse -clean`您是否从命令行尝试过。

如果这没有帮助，请尝试重新安装 ADT 插件，方法是先从帮助 -> 关于 -> 安装详细信息中删除它，然后按照[http://developer.android.com/sdk/installing/installing-adt.html中的说明重新安装](http://developer.android.com/sdk/installing/installing-adt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:33:38.743

也许 Ctrl 卡住不是最后一根稻草，而是整个问题？这种事情经常发生在我身上（在 Windows 中）。Control、Shift、Alt 卡住导致混乱的行为。实际发生的情况是，由于某种原因，key-up 事件丢失了，因此操作系统认为 key 仍然处于关闭状态。如果您正在使用 alt-tabbing 进入虚拟机，或者使用硬件调试器（在调试会话中进行按键操作），这种情况尤其经常发生。

每当您认为这发生在您身上时，解决方案就是一次按下所有修改键（左移、右移、alt、左控制、右控制等），以便操作系统知道它们的状态。无需重新启动 PC。

# ios - 更改 viewControllers 属性后的 UITabBarController 异常

> ID：12022069
> 
> 赞同：0
> 
> 时间：2012-08-18T20:37:46.923
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uitabbarcontroller

我有一个带有两个选项卡的 UITabBarController。TAB A 是 UIViewController，TAB B 是从 nib 加载的 UIViewController。

我试图让当我从 TAB B 移动到 TAB A 或从 TAB B 任何其他选项卡时，我想将 TAB B 重置为其初始状态。我通过创建一个新的并在 viewControllers 数组中替换它来做到这一点。问题是，在我重置 UIViewController 后，我收到一条错误消息，类似于“发送到已释放实例的消息。它通常是以下两个错误之一：

```
*** -[AddCompetitionViewController isEqual:]: message sent to deallocated instance...
*** -[AddCompetitionViewController retain]: message sent to deallocated instance... 
```

这发生在我从 TAB B 切换回 TAB A 之后。

这是我用来替换选项卡并尝试隔离问题的代码。

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
    NSLog(@"Should Select: %@", viewController);
    return YES;
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    NSLog(@"Did Select: %@", viewController);
    if ([viewController class] != [AddCompetitionViewController class]) {
        AddCompetitionViewController *ACViewController = [[AddCompetitionViewController alloc] initWithNibName:@"AddCompetition" bundle:[NSBundle mainBundle] andDancer:self.currentDancer];
        UITabBarItem *ACitem = [[UITabBarItem alloc] initWithTitle:@"Add Comp." image:[UIImage imageNamed:@"Addcomp.png"] tag:0];
        ACViewController.tabBarItem = ACitem;

        NSMutableArray *arr = [[NSMutableArray alloc] initWithArray:self.viewControllers];
        [arr replaceObjectAtIndex:1 withObject:ACViewController];
        [self setViewControllers:arr];
        NSLog(@"Replaced: %@", [arr objectAtIndex:1]);
    }
} 
```

（我正在使用 ARC）

使用 NSLogs，我已经能够确定当我尝试切换回 TAB A 时，应用程序正在尝试引用旧的、原始的 UIViewController，而不是新的。tabBarController:didSelectViewController: 是最后一个被调用的东西，我没有任何代码在替换后引用 UIViewController。我也尝试添加一个异常断点，但它只列出了一堆十六进制数据，然后默认为应用程序主。这是我的日志：

```
2012-08-18 16:20:05.479 How's My Feisin'[4780:c07] Should Select: <AddCompetitionViewController: 0x78a5af0>
2012-08-18 16:20:05.489 How's My Feisin'[4780:c07] Did Select: <AddCompetitionViewController: 0x78a5af0>
2012-08-18 16:20:06.885 How's My Feisin'[4780:c07] Should Select: <CompetitionListViewController: 0x78a7550>
2012-08-18 16:20:06.887 How's My Feisin'[4780:c07] Did Select: <CompetitionListViewController: 0x78a7550>
2012-08-18 16:20:06.887 How's My Feisin'[4780:c07] Replaced: <AddCompetitionViewController: 0x6c5d0f0>
2012-08-18 16:20:09.290 How's My Feisin'[4780:c07] *** -[AddCompetitionViewController retain]: message sent to deallocated instance 0x78a5af0 
```

和回溯：

```
* thread #1: tid = 0x1c03, 0x017cddee CoreFoundation`___forwarding___ + 206, stop reason = EXC_BREAKPOINT (code=EXC_I386_BPT, subcode=0x0)
frame #0: 0x017cddee CoreFoundation`___forwarding___ + 206
frame #1: 0x017cdcb2 CoreFoundation`_CF_forwarding_prep_0 + 50
frame #2: 0x0176e2c0 CoreFoundation`CFRetain + 96
frame #3: 0x01798ab9 CoreFoundation`CFArrayApplyFunction + 57
frame #4: 0x0072ffbb UIKit`_afterCACommitHandler + 255
frame #5: 0x0183b99e CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 30
frame #6: 0x017d2640 CoreFoundation`__CFRunLoopDoObservers + 384
frame #7: 0x0179e4c6 CoreFoundation`__CFRunLoopRun + 1174
frame #8: 0x0179dd84 CoreFoundation`CFRunLoopRunSpecific + 212
frame #9: 0x0179dc9b CoreFoundation`CFRunLoopRunInMode + 123
frame #10: 0x01c447d8 GraphicsServices`GSEventRunModal + 190
frame #11: 0x01c4488a GraphicsServices`GSEventRun + 103
frame #12: 0x0071f626 UIKit`UIApplicationMain + 1163
frame #13: 0x00002595 How's My Feisin'`main + 181 at main.m:16
frame #14: 0x000024d5 How's My Feisin'`start + 53 
```

任何帮助找出这个错误，或者找到一个更好的地方来替换 UIViewController 都会很棒！谢谢！

编辑：我找到了导致问题的原因，但仍然没有办法解决它。尽管我从未见过 UITabBarController 为视图更改设置动画，但它显然仍会执行动画。我设法分析了应用程序，并且 _afterCACommitHandler 正在对该对象进行额外的发布。

编辑：我想出了一个解决方法，我在 tabBarController 和 TAB B 的 UIViewController 之间放置了另一个 UIViewController。然后让新的 UIViewController 重置旧的。它有效，但它不是做事的正确方法。而且我仍然不知道是什么导致了额外的释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:36:13.853

我认为问题在于您创建了一个新数组 arr，在其中替换了一个视图控制器，但您从未将选项卡栏控制器的 viewControllers 数组重置为该数组。在 [arr replaceObjectAtIndex:1] 语句之后，尝试添加以下行：

tabBarController.viewControllers = arr;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T02:33:37.460

我创建了一个解决方法，将 TAB B 的 UIViewController 封装在另一个 UIViewController 中。这个中间控制器是 UITabBarController 的委托，它会释放并重新创建我想要在选项卡更改时重置的 UIViewController。这可以防止标签栏控制器中缺少 ViewController 引用。

这是中间类：

.h 文件

```
#import <UIKit/UIKit.h>
#import "AddCompetitionViewController.h"
#import "Dancer.h"

@interface AddCompResetViewController : UIViewController <UITabBarControllerDelegate>
{
    BOOL willReset;
}

@property (nonatomic, retain) Dancer *currentDancer;
@property (nonatomic, retain) AddCompetitionViewController *ACViewController;

- (id)initWithDancer:(Dancer *)dancer andTabBarController:(UITabBarController *)aController;
@end 
```

.m 文件

```
@implementation AddCompResetViewController
@synthesize currentDancer, ACViewController;

- (id)initWithDancer:(Dancer *)dancer andTabBarController:(UITabBarController* )aController;
{
    if ((self = [super init])) {
        self.currentDancer = dancer;
        //create first instance
        self.ACViewController = [[AddCompetitionViewController alloc] initWithNibName:@"AddCompetition" bundle:[NSBundle mainBundle] andDancer:self.currentDancer];
        self.ACViewController.theTabBarController = aController;
        [self.view addSubview:self.ACViewController.view];
        willReset = NO;
    }
    return self;
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    //reset
    if (viewController != self) {
        AddCompetitionViewController *AViewController = [[AddCompetitionViewController alloc] initWithNibName:@"AddCompetition" bundle:[NSBundle mainBundle] andDancer:self.currentDancer];
        [self.ACViewController.view removeFromSuperview];
        self.ACViewController = nil;
        self.ACViewController = AViewController;
        [self.view addSubview:self.ACViewController.view];
        willReset = NO;
    } else if (viewController == self) {
        willReset = YES;
    }
}

- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
    if (viewController.tabBarItem.tag == 4) {
        [self.navigationController popToRootViewControllerAnimated:YES];
        return NO;
    } else {
        return YES;
    }
} 
```

# c - 分段错误但找不到错误

> ID：12022070
> 
> 赞同：-3
> 
> 时间：2012-08-18T20:38:00.033
> 
> 标签：c, pointers

```
#include<stdio.h>
#include<stdlib.h>

struct node {
    char str[200];
    int nn;
    struct node* next;
};

int number;
struct node* start=NULL;
struct node* current;
//function to insert into the list 

void insert() {
    struct node* n;
    n=(struct node*)malloc(sizeof(struct node));
    n->str=malloc(sizeof(char) * 1000);
    printf("please enter the data that you would like to insert: ");
    gets(n->str);
    printf("asdasdasdasd");
    n->next=NULL;
    if( start==NULL ) {
        start->next=n;
        current=n;
    }
    else {

    current->next=n;
    current=n;

    }

    printf("done\n");
}

void display() {
    current=start;
    int i=0;
    while( current->next!=NULL ) {
        printf("node%d= %s\n",++i,current->str);
        current=current->next;

    }
    printf("this the end");
}

int main() {
    char c;
    int input;

    do {
        printf("Select from the following options:\n"
           "1.Display list\n"
           "2.Add to list\n"
           "3.delete from list\n");

        scanf("%d",&input);
        switch (input) {
            case 1: display(); break;
            case 2: insert(); break;
      //    case 3: delete(); break;
            default : printf("Please select 1 , 2 or 3\n");
        }
        printf( "would you like to continue?(y/n)\n");
        scanf("%s",&c);
    } while(c=='y');

    return 0;
} 
```

这在插入函数中给了我一个错误，A SEGMENTATION FAULT！

我尝试了一些东西，但我只是没有得到清晰的画面。我对指针有点弱，实际上很困惑！

请告诉我我做错了什么来帮助我。忘记我的链表逻辑，让它错了。我只想知道为什么会发生分段错误！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:45:18.337

由于您没有告诉我们发生段错误的行，我只能猜测。

至少这些台词对我来说听起来很假：

```
if( start==NULL ) {
    start->next=n;
    current=n;
} 
```

您确定要取消引用`start`吗`NULL`？这就是你正在做的事情`start->next`。取消引用`NULL`会导致段错误。

也许这会按您期望的方式工作：

```
if( start==NULL ) {
    start=n;
    current=n;
} 
```

所以基本上，如果`start`还没有定义，定义它，它也成为你当前的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T20:50:05.080

你有很多错误，但你的崩溃是因为你没有分配开始

```
n->next=NULL;
    if( start==NULL ) {
        start->next=n;
        current=n;
    }
    else {

    current->next=n;
    current=n; 
```

你问 start 是否为空，如果是，你尝试通过调用 start->next 来读取它。你需要先分配它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T20:52:04.737

1.  编译错误
    `n->str=malloc(sizeof(char) * 1000);`

    > 这是在常量上重新分配地址！！！！！您正在更改数组的地址？？？

2.  执行概率为 25% 的危险函数。

    `gets(n->str);`

3.  在空指针处设置值！！！

    `struct node* start=NULL;....
    start->next=n;`

工作代码示例

```
 #include<stdio.h>
    #include<stdlib.h>

    struct node {
        char *str;
        int nn;
        struct node* next;
        };

    int number;
    struct node* start=NULL;
    struct node* current;
    //function to insert into the list

    void insert() {
        struct node* n;
        n=(struct node*)malloc(sizeof(struct node));
        n->str=(char*)malloc(sizeof(char) * 1000);
        printf("please enter the data that you would like to insert: ");
        scanf("%s",n->str);
        printf("asdasdasdasd");
        n->next=NULL;
        if( start==NULL ) {
            //start->next=n;
            current=n;
        }
        else {

        current->next=n;
        current=n;

        }

        printf("done\n");
    }

    void display() {
        current=start;
        int i=0;
        while( current->next!=NULL ) {
            printf("node%d= %s\n",++i,current->str);
            current=current->next;

        }
        printf("this the end");
        }

    int main() {

        char c;
        int input;

        do {
            printf("Select from the following options:\n"
               "1.Display list\n"
               "2.Add to list\n"
               "3.delete from list\n"
               );

        scanf("%d",&input);
        switch (input) {

            case 1: display(); break;
            case 2: insert(); break;
        //    case 3: delete(); break;
            default : printf("Please select 1 , 2 or 3\n");

            }
        printf( "would you like to continue?(y/n)\n");
        scanf("%s",&c);
        }while(c=='y');

    return 0;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T20:55:47.267

您应该使用调试器（而不是我们）来查找有关问题的更多信息。

例如 gdb（[GNU 调试器](http://en.wikipedia.org/wiki/GNU_Debugger)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-18T20:44:45.860

```
if( start==NULL ) {
        start->next=n;
        current=n;
    } 
```

我认为你在这里有一个小问题;-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-18T20:51:29.707

下一行不安全：

```
 scanf("%s",&c); 
```

scanf 添加终止空字符 '\0' 在您的情况下会破坏堆栈。

# java - Android 调试密钥库

> ID：12022072
> 
> 赞同：7
> 
> 时间：2012-08-18T20:38:05.800
> 
> 标签：java, android, windows-7, android-keystore

我正在尝试访问我的 .android debug.keystore，以便可以将其用于 facebook。

当我输入 windows cmd 时：`C:\Users\<user>\.android\debug.keystore`

我得到`C:\Users\<user>`的不是内部或外部命令、可运行程序或批处理文件。

有人可以告诉我发生了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T20:48:08.350

在命令行类型中

```
cd %USERPROFILE%/.android 
```

您可以在此位置找到 debug.keystore

# c# - Textbox1.text 从 form1 到 form2

> ID：12022073
> 
> 赞同：-2
> 
> 时间：2012-08-18T20:38:13.607
> 
> 标签：c#, string, forms, textbox

我需要帮助将 Form2.textbox1 中的输入传递给 Form1.sti Form1 = 主工作窗口 Form2 = 弹出窗口，以输入路径。

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    private void Form2_Load(object sender, EventArgs e)
    {

    }

    public string sti { get; set; }

    private void button1_Click(object sender, EventArgs e)
    {
        textBox1.Text = sti;
        this.Close();
    }
}

public partial class Form1 : Form
{
    int CountR = 1;

    public Form1()
    {
        InitializeComponent();
    }

    public string sti { get; set; }

    public void Form1_Load(object sender, EventArgs e)
    {
        Form2 popup = new Form2();
        popup.ShowDialog();
        popup.Dispose();
    }
   public void button1_Click(object sender, EventArgs e)
    {                
    Label7.Text = sti; 
     } 
```

但它总是返回 Null。

我以这种方式构建它是因为我不希望用户只与 IT 管理员混淆路径。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:44:58.720

你为什么不创建另一个`Form2`用于从其中捕获值的属性`Form1`

在 中`Form2`，添加：（*就像在 form1 中一样*）

```
public string sti { get; set; } 
```

所以在你的`Form1`代码中，它看起来像这样

```
public void Form1_Load(object sender, EventArgs e)
{
    Form2 popup = new Form2();
    popup.sti = sti;
} 
```

并且在`Form2`

```
private void button1_Click(object sender, EventArgs e)
{
    textBox1.Text = sti;
    this.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:47:22.650

如果你想在表单之间传递数据，有一个很好的教程： http: [//www.codeproject.com/Articles/17371/Passing-Data-between-Windows-Forms](http://www.codeproject.com/Articles/17371/Passing-Data-between-Windows-Forms)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T21:16:27.183

~~您正在创建一个新的`Form1`，它没有对`Form2`您创建~~的 的引用。

您更改了示例，创建了 2 个不同的 sti 属性，您需要在关闭 Form2 之前将`Form2`sti 值分配给属性。`Form1`

这段代码应该适合你。

**表格1**

```
public partial class Form1 : Form
{
    public string sti { get; set; } 

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Form2 popup = new Form2();
        popup.ShowDialog();
        sti  = popup.sti;
        popup.Close();
        popup.Dispose(); 

    }

    private void button1_Click(object sender, EventArgs e)
    {
        label1.Text = sti;
    }

} 
```

**表格2**

```
public partial class Form2 : Form
{
    public string sti { get; set; } 

    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {

        sti = textBox1.Text;
        this.Hide();
    }
} 
```

* * *

您还可以创建一个可以从两种形式引用的静态类，这样您只处理一个 sti 属性。像这样的东西：

**表格1**

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        myProperties.sti = "Hello";
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Form2 popup = new Form2();
        popup.ShowDialog();
        popup.Dispose(); 

    }

    private void button1_Click(object sender, EventArgs e)
    {
        label1.Text = myProperties.sti;
    }
}

public static class myProperties
{
    public static string sti { get; set; } 
} 
```

**表格2**

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
        textBox1.Text = myProperties.sti;
    }

    private void button1_Click(object sender, EventArgs e)
    {

        myProperties.sti  = textBox1.Text;
        this.Close();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T21:18:36.090

尝试 ：

```
public partial class Form2 : Form
{
    public String sti { get; set; }

    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form3 frm = new Form3();
        frm.ShowDialog();
        sti = frm.sti;

        textBox1.Text = sti;
    }
} 
```

其他形式：

```
public partial class Form3 : Form
{

    public String sti { get; set; }
    public Form3()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        sti = textBox1.Text;
        this.Close();
    }
} 
```

# python - Google App Engine urlFetch 截断页面文本

> ID：12022074
> 
> 赞同：0
> 
> 时间：2012-08-18T20:38:20.343
> 
> 标签：python, google-app-engine, beautifulsoup

我正在使用 GAE python 2.5 和 Beautiful Soup 3.08，并且正在发生一些事情，切断了我的文本的第一部分。

这是我的代码：

```
from google.appengine.api import urlfetch
from BeautifulSoup import BeautifulSoup

url = 'http://www.cmegroup.com/CmeWS/mvc/xsltTransformer.do?xlstDoc=/XSLT/da/DailySettlement_CPC-FUT.xsl&url=/da/DailySettlement/V1/DSReport/ProductCode/J4/FOI/FUT/EXCHANGE/XNYM/Underlying/J4?tradeDate=08/16/2012'

print '<hr>This is the raw result fetched (print result.content)<hr>'
result = urlfetch.fetch(url = url, method = urlfetch.GET)
print result.content

soup = BeautifulSoup(result.content)
print '<hr>This is prettified soup (soup.prettify)<hr>'
print soup.prettify()

print '<hr>here is the print out of iteration through the findall<hr>Go!<br>'
trSet = soup.findAll('tr')
if trSet is not None:
  for i in trSet:
    i.string
else:
  print "Couldn't find TRs in Soup!" 
```

我运行此代码的应用程序站点是：[http](http://mwp-test2.appspot.com/) ://mwp-test2.appspot.com/ 发生的事情是第一次打印根本没有发生。有任何想法吗？（我也遇到了 Beautiful Soup 的 findAll 问题，但我打算在弄清楚这个截断问题后问这个问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:30:10.907

当我运行您的页面时，第一个打印件似乎确实有效。此外，您应该使用 response.out.write 而不是 print。看看这里的文档：[https ://developers.google.com/appengine/docs/python/tools/webapp/overview](https://developers.google.com/appengine/docs/python/tools/webapp/overview)

# python - python Tk在我设置后保留标签文本

> ID：12022082
> 
> 赞同：2
> 
> 时间：2012-08-18T20:39:10.990
> 
> 标签：python, tkinter

这是一个非常简单的 Python Tk 程序。我似乎无法阻止一个简单的问题，我确信我错过了一些简单的事情。

我做一个标签：

```
myLabelText = StringVar()
myLabelText.set("Something kinda long")
myLabel = Label(frame, textvariable=myLabelText).pack() 
```

稍后在同一程序中，我想更新该标签以显示“Foo”...

```
myLabelText.set("Foo")
frame.update_idletasks() 
```

标签现在看起来像“Fooething kinda long” 目标是只有“Foo”并清除标签文本的其余部分。

我试图将标签设置为一长串空格，但由于某种原因，这并没有清除该字段中的文本。这样做的正确方法是什么？

* * *

## 编辑

这是一个演示我的问题的完整示例。

```
from Tkinter import *
import tkFileDialog, Tkconstants
import time
import urllib2

def main():
    " Controlling function "

    root = Tk()
    app = App(root)
    root.mainloop()

class App:
    " Class for this application "

    def __init__(self, master):

        # Setup the window
        frame = Frame(master, width=400, height=200)
        frame.pack()
        frame.pack_propagate(0)
        self.frame = frame
        self.master = master

        # Start Button
        self.button = Button(frame, text='Start', bg="#339933", height=3, width=10, command=self.start)
        self.button.pack()

        # Label
        self.operation_action_text = StringVar()
        self.operation_action_text.set("Waiting on user to click start...")
        self.operation_action = Label(frame, textvariable=self.operation_action_text)
        self.operation_action.pack()

    def start(self):
        " Change the label "

        # Do something and tell the user
        response = urllib2.urlopen('http://www.kennypyatt.com')
        json_string = response.read()
        self.operation_action_text.set("Something kinda long")
        self.frame.update_idletasks()
        time.sleep(2)

        # Do something else and tell the user
        response = urllib2.urlopen('http://www.kennypyatt.com')
        json_string = response.read()
        self.operation_action_text.set("ABCDEFGHI")
        self.frame.update_idletasks()
        time.sleep(2)

        # Do a third thing and tell the user
        response = urllib2.urlopen('http://www.kennypyatt.com')
        json_string = response.read()
        self.operation_action_text.set("FOO")
        self.frame.update_idletasks()

        return

main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T03:53:00.050

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-15T05:09:31.947

我知道帖子很旧，但我找到了解决您问题的方法。这是一个解释解决方案的小代码：

```
global y
y=0
top=TopLevel()

def_newlabel():
  global y,od2,odpuni
  if y > 0:
    od2.destroy()
    odpuni.destroy()
  odpuni = Label(top, text="blablabla",bg="lightskyblue")
  odpuni.grid(row=7, column= 3, sticky="E")
  od2 = Label(top, text="blabla",bg="lightskyblue")
  od2.grid(row=7, column= 4, sticky="W")
  y=y+1 
```

所以基本上，你所要做的就是让计数器失去功能，将其设置为 0，然后当你到达 def_newlabel() 时。它将首先检查您的计数器是否大于 0。如果不是，它将继续程序。如果您已经使用了标签，您的计数器将大于 0 并触发“IF 循环”并删除您的标签文本。我设法让它工作的唯一方法。

问候，卢卡。

# javascript - jQuery 高度无法正常工作

> ID：12022084
> 
> 赞同：0
> 
> 时间：2012-08-18T20:39:19.283
> 
> 标签：javascript, jquery

我正在尝试将一些文本居中在一个 100px x 100px 的圆形框中；

我正在处理的网站在这里： http: [//www.blackcountrydesigns.co.uk/the1theme/](http://www.blackcountrydesigns.co.uk/the1theme/)

我正在使用以下 jQuery 脚本来实现这一点

```
$(document).ready(function()
{
   $('.header .menu li a').each(function(){
      padding = (100 - $(this).innerHeight())/2
      alert($(this).height());
      $(this).css({'padding-top' : padding+'px' , 'padding-bottom' : padding+'px'})
   });

}); 
```

我遇到的问题是，当它们只在一个盒子上时，它认为某些盒子或在 2 线上。

希望你能帮忙！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:56:30.520

发生这种情况的可能性很大，因为在进行计算时使用的字体不是您请求的自定义字体，因为自定义字体在某些浏览器中是异步加载的。

因此，当使用默认字体时，文本分两行，但是当加载自定义字体时，它显示在一行中。如果您删除 google 字体样式表，您将看到字体在第一个和第三个菜单项内以两行显示。这是 chrome 在 DOMready 上检测到的。

**这是没有自定义字体的原型的小提琴：http: [//jsfiddle.net/z7n7H/](http://jsfiddle.net/z7n7H/)**

为了解决这个问题，如果您知道没有菜单项应该换行，您可以在锚点上强制使用不间断的空格：

```
.header .menu li a{ white-space: nowrap } 
```

或者尝试监听字体加载事件（如果存在）并从那里进行计算：[https ://developers.google.com/webfonts/docs/webfont_loader](https://developers.google.com/webfonts/docs/webfont_loader)

您也可以尝试使用与您正在使用的自定义字体具有相同宽度的默认字体，尽管这很容易破坏。

另一种选择是使用该`window.onload`事件，因为那时字体应该已经下载并应用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T20:57:07.533

使用图像会很好，因为您的样式在 Firefox 和 IE 中被破坏了，而且如果为什么使用 javascript 为其分配填充.. 如果您应用相同的

底部填充：36px；填充顶部：36px；

这将是统一的 PS 注意填充是用于`<a href></a>`标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T21:06:19.597

在任何浏览器中使用它都会起作用

```
 $('.header .menu li a').each(function(){
      var a=$('.header .menu li').height(); 
       alert(a);
     var padding = a-65;

      $(this).css({'padding-top' : padding+'px' , 'padding-bottom' : padding+'px'})
   }); 
```

# javascript - 试图从集合中获取特定模型

> ID：12022085
> 
> 赞同：1
> 
> 时间：2012-08-18T20:39:41.890
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我正在构建一个简单的backbone.js 应用程序，而不使用“真正的数据库”。我的数据库非常简单，看起来像这样：

```
[
    { "Name": "Daniel", "Month": "abc", "year": "83" },
    { "Name": "Johan", "Month": "abg", "year": "33" }
] 
```

我成功地将数据提取到集合实例中，我做了 console.log 并看到它有效：

```
this.nameList = new NameList();
this.nameList.fetch();
console.log(this.nameList); 
```

在这里我很好，现在我尝试只使用集合中的一个模型，但没有任何效果。我试过：

```
console.log(this.nameList.at(1));
console.log(this.nameList.get(id));  //when id is passed as a number.
console.log(this.nameList.getByCid(id))  //when id is passed as a number. 
```

我总是得到“未定义”。

*   我如何使用这样的简单数据库？
*   我在哪里可以读到这些东西？

作为更新，它在处理集合时对我有用：

```
 this.projectList = new ProjectList;
    this.projectList.fetch({
        success: function (data) {
            console.log(data.get(id));
        }
    }); 
```

使用单个模型时不起作用：

```
 this.project = new Project({id: id});
    this.project.fetch({
        success: function (data) {
            console.log(data);
        }
    }); 
```

现在我得到：GET ......../Client/web/Data/projects/3 404（未找到）

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:14:41.100

您可以从“模型”属性中检索模型：

console.log(this.nameList.models[0].name);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T23:57:33.657

```
/Client/web/Data/projects/3 404 (Not Found) 
```

你确定你真的在那个 RESTian 位置提供一些东西吗？

集合的默认获取行为将是对集合 URL [/Client/web/Data/projects] 执行 GET，您说它正在提供正确的数据。

但是，当您在单个模型上调用 fetch() 时，它会将该模型的 id 附加到集合 URL：/Client/web/Data/projects/3，它返回 404/Not Found 响应。如果您手动尝试该 URL，您是否真的得到响应？

至于为什么`console.log(this.nameList.get(id))`返回未定义，似乎 nameList 没有正确填充。看看输出`console.log(this.nameList.models)`- 它真的有你期望的模型吗？

# android - 从放置在 SDCard 上的 SQLite 获取数据

> ID：12022092
> 
> 赞同：0
> 
> 时间：2012-08-18T20:40:30.163
> 
> 标签：android, sqlite, android-sdcard

我想创建一个 android 应用程序，它从放置在我的 sdcard 目录中的 sqlite 数据库中获取数据。

谁能给我一个 100% 有效的教程或链接？

我已经搜索了教程，但他们只是提供了从 /data/data/package/databases 复制到 /sdcard 的方法

之前谢谢，对不起英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:49:25.740

[这篇博客](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)描述了如何将一个 sqlite 数据库添加到您的 apk，然后将其复制到 data/data/... 您可以使用复制部分从 sdcard 复制数据库，而不是博客文章中使用的 assets 目录。

# android - Android NDK 二进制文件大小

> ID：12022096
> 
> 赞同：1
> 
> 时间：2012-08-18T20:40:58.230
> 
> 标签：android, android-ndk

我正在使用 ndk-build 工具编译一个 NDK 项目。我想知道是否可以添加任何其他编译器标志来减小编译二进制文件的大小？

我的 Android.mk 文件是：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE    := anddown
LOCAL_SRC_FILES := anddown.c src/autolink.c src/buffer.c src/markdown.c src/stack.c html/houdini_href_e.c html/houdini_html_e.c html/html_smartypants.c html/html.c
LOCAL_C_INCLUDES := jni/src jni/html

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:45:38.370

确保 '-Os' 标志在 CFLAGS 中被传递。这可以实现尝试减少二进制大小的优化。还要确保从最终的二进制文件中删除调试符号。

# android - Android自定义listView - 个人外观

> ID：12022103
> 
> 赞同：0
> 
> 时间：2012-08-18T20:41:26.240
> 
> 标签：android, android-listview, android-custom-view

我想制作自定义列表视图。我在想这样的事情。

[https://lh5.ggpht.com/ZoKmauiAgpdvK-mdJVycMzB7uzf0jchXAbrk88xN9grUqT2q5VvPdTe1uNBVlMA-gLM](https://lh5.ggpht.com/ZoKmauiAgpdvK-mdJVycMzB7uzf0jchXAbrk88xN9grUqT2q5VvPdTe1uNBVlMA-gLM)

我想对每个“项目”有不同的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:40:29.643

执行此类操作的一种方法是为图标和 On/Off 开关使用大量图像视图，然后为文本内容创建具有自定义字体的文本视图（取决于您想使用的内容）并定位所有这些元素使用这里描述的RelativeLayout [http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)。

现在，为了为不同的列表行使用不同的图标，您需要将有关每一行的信息存储在 SQLite 数据库中，并使用该信息，您可以使用您在可绘制文件夹中的图像填充相应的图像视图，因此如果您的用户选择一些转换为警报的选项，然后您必须将他的偏好存储在数据库中并使用它从您的drawables文件夹中选择闹钟图像。其实很简单。

# python - Pythonic 方法来简化这个长的 Django 视图？

> ID：12022105
> 
> 赞同：0
> 
> 时间：2012-08-18T20:41:55.453
> 
> 标签：python, django, refactoring, styles

我正在编写一个驱动博客文章编辑页面上的“提交”按钮的视图。此视图将从博客文章编辑页面上的表单捕获 POST 数据并更新与该博客文章关联的 Post 对象。

我对 Django 相当陌生，对 Python 也不太熟悉，所以我不确定简化这个视图的最佳方法。

只是为了让这更容易理解，`draft`我在编辑时称之为博客文章。我现在拥有的代码（在下面完整复制）有一系列 3 块，如下所示：

```
try:
    new_title = request.POST['post_title']
except (KeyError):
    return render_to_response('blog/edit.html', {
        'draft': draft,
        'error_msg': "That's weird. You didn't provide a" +
                        "post title in the POST arguments.",
        }, context_instance=RequestContext(request))
draft.title = new_title
# Here goes some code specific to handling updating the title 
```

如您所见，基本上，此块只是尝试获取 POST 数据，如果不能，它会重定向回编辑页面并显示错误消息。

由于该视图本质上做了 3 次相同的事情，因此违反了 DRY 原则。我正在尝试找到解决此问题的方法。将此代码分离到另一个函数的问题是错误处理过程需要向视图的调用者返回一些内容。我是否应该将它分开并检查返回值的类型？那干净吗？我不需要向函数传递大量参数吗？这被认为是不好的形式吗？

此外，如果您有任何其他提示来改进此代码的样式或设计，我将不胜感激，因为我是 Python/Django 新手。

非常感谢！

* * *

立即查看完整代码：

```
def save_changes(request, draft_id):
    draft = get_object_or_404(Post, pk=draft_id)
    # Get the new title
    try:
        new_title = request.POST['post_title']
    except (KeyError):
       return render_to_response('blog/edit.html', {
            'draft': draft,
            'error_msg': "That's weird. You didn't provide a" +
                            "post title in the POST arguments.",
            }, context_instance=RequestContext(request))
    draft.title = new_title
    if draft.slug = None:
        draft.slug = unique_slugify(draft.title)
    # Get the new text
    try:
        new_text = request.POST['post_text']
    except (KeyError):
        return render_to_response('blog/edit.html', {
            'draft': draft,
            'error_msg': "That's weird. You didn't provide" +
                            "post text in the POST arguments.",
            }, context_instance=RequestContext(request))
    draft.text = new_text
    # Get the new publication status
    try:
        new_published_status = request.POST['publish']
    except (KeyError):
        return render_to_response('blog/edit.html', {
            'draft': draft,
            'error_msg': "That's weird. You didn't provide a" +
                            "publication status in the POST arguments."
    if new_published_status != draft.published:
        if draft.published:
            draft.published = False
            draft.pub_date = None
        else:
            draft.published = True
            draft.pub_date = timezone.now()
    draft.save()
    return HttpResponseRedirect(reverse('blog.views.edit', args=draft.id)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:54:35.047

一个简单的列表理解将解决您的问题。

```
error_messages = {'post_title':'post title','post_text':'post text','publish':'publication status'}
errors = [error_messages[key] for key in ('post_title','post_text','publish') if not request.POST.has_key(key)] 
```

这将为您提供错误消息名称的列表。然后，您可以编写一个错误部分来获取错误列表并决定如何处理它（例如显示所有错误，显示第一个，甚至根据缺失的数量对消息的语法进行一些奇特的逻辑）。

我可以推荐Django 中的[Forms对象为您进行验证吗？](https://docs.djangoproject.com/en/1.4/topics/forms/)

# php - PHP cURL cookie 问题

> ID：12022108
> 
> 赞同：0
> 
> 时间：2012-08-18T20:42:11.903
> 
> 标签：php, post, cookies, curl

我有一个最奇怪的问题：

如果我尝试用 curl 发布一个 cookie，我会得到一个 http_code 500，当我把 cookie 放在外面时，它可以正常工作吗？！

我添加了这样的cookie：

```
curl_setopt($curl, CURLOPT_COOKIE, 'someCookie=' . $_COOKIE['someCookie'] . '; path=/'); 
```

有任何想法吗？只是提示，反弹想法..任何东西

卷曲信息：

```
Array (
     [url] => valid url
     [content_type] => text/html; charset=utf-8
     [http_code] => 500
     [header_size] => 279
     [request_size] => 270
     [filetime] => -1
     [ssl_verify_result] => 0
     [redirect_count] => 0
     [total_time] => 0.345595
     [namelookup_time] => 2.3E-5
     [connect_time] => 0.000122
     [pretransfer_time] => 0.000126
     [size_upload] => 1026
     [size_download] => 52106
     [speed_download] => 150771
     [speed_upload] => 2968
     [download_content_length] => -1
     [upload_content_length] => 1026
     [starttransfer_time] => 0.000814
     [redirect_time] => 0
     [certinfo] => Array ( )
     [redirect_url] =>
) 
```

注意：没有错误发生，我在访问日志中看到了所有内容（尽管 http_code 500）

我可以从命令行成功执行命令，那么对于可能阻止 php 执行它的原因有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:12:38.167

我见过的最愚蠢的问题是因为路径而发生的

我不知道为什么或如何...但是当我删除它时，它工作得很好

编辑：所以经过大约 4 小时的研究后，我发现了一个 do-try-redo 测试：路径与内部服务器错误相结合......

当然错误没有记录在任何日志中，无论如何 tnx 4 帮助

# iphone - Limitations of an old version of iPhone SDK

> ID：12022110
> 
> 赞同：0
> 
> 时间：2012-08-18T20:42:23.307
> 
> 标签：iphone, sdk

I have a mac with OSX version 10.5.6 and I'm wondering about the limits of developing iPhone apps with it.

Since I need to install an old SDK, will the apps I make still be possible to use on new iPhones? What kind of features will I miss out on, by using an old SDK? Are there any major changes in the new version of Xcode that will make it reduntant or unprogressive for me to learn an old SDK?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T21:42:34.957

You will not be able to submit an app to the App Store unless it has been compiled against the latest iOS SDK (iOS 5.1 at this time, iOS 6 soon.) This does *not* mean it needs to use the features in the latest SDK, but you must have used that SDK when compiling. Apple will automatically reject apps compiled against an older SDK.

If you don't care about the App Store and just want to play around, you can do so with an old SDK but it might not allow you to attach the debugger to a device running a newer version of iOS.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:36:43.050

> Since I need to install an old SDK, will the apps I make still be possible to use on new iPhones?

The code is for the most part is still the same. Your apps will work on all iPhones, iPads, and iPod touches.

> What kind of features will I miss out on, by using an old SDK?

Faster Compiling, Code suggestions, and a few other things that won't prevent you from making iOS apps in the future.

> Are there any major changes in the new version of Xcode that will make it reduntant or unprogressive for me to learn an old SDK?

No

Good luck!

# android - 在 MediaController 顶部添加视图

> ID：12022117
> 
> 赞同：4
> 
> 时间：2012-08-18T20:43:53.883
> 
> 标签：android, android-videoview, mediacontroller

MediaController 始终显示在屏幕中所有视图的顶部，并且在隐藏之前不要将点击传递到下面的视图，我的问题是：

如何在 MediaController 顶部添加按钮视图以便处理点击事件？或者如何将点击事件传递给下面的视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:21:38.407

尝试覆盖 MediaController。[调度触摸事件（）](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/view/View.java#View.dispatchTouchEvent%28android.view.MotionEvent%29)

它更适合您的任务，请[在此处查看我的答案](https://stackoverflow.com/a/11137996/375929)以获取详细说明。

代码将如下所示：

```
public class MyMediaController extends MediaController {
    ...
    private WeakReference<Button> mButton;

    // TODO You'll have to call this whenever the layout might have been rebuilt
    // i.e. in onCreate() of your activity (or in onConfigurationChanged() if you
    // handle configuration changes yourself)
    public void setButton(Button button) {
        mButton = new WeakReference<Button>(button);
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        int iX = (int) event.getX();
        int iY = (int) event.getY();

        Button button = mButton.get();
        if (button != null) {
            Rect buttonHitRect = new Rect();
            button.getHitRect(buttonHitRect);
            if (buttonHitRect != null && buttonHitRect.contains(iX, iY)) {
                // user hit the button, dispatch event to the button
                button.dispatchTouchEvent(event);
                return true;
            }
        }
        // button did not get hit, pass the touch through
        return super.dispatchTouchEvent(event)
    }
} 
```

试试这个，让我知道它是怎么回事。

**UPD** Theres's a very similar question on this,它可能有更好的解决方案：[Android MediaController拦截所有其他触摸事件](https://stackoverflow.com/questions/7909603/android-mediacontroller-intercepts-all-other-touch-events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T22:09:24.567

当一个视图与另一个视图重叠时，隐藏的视图将不会获得任何触摸事件，因为顶部的视图会消耗触摸事件。如果你想让隐藏视图接收触摸事件，那么你必须手动将触摸事件从顶视图传递到隐藏视图。这里有两种可能：

*   *您希望两个视图共享触摸事件*：在这种情况下，将触摸事件传递给隐藏视图后，通过从顶部视图的 onTouch() 方法返回 false 来指示 android 尚未使用触摸事件。
*   您希望仅由隐藏视图处理触摸事件：在这种情况下，将触摸事件传递给隐藏视图后，通过从顶部视图的 onTouch() 方法返回 true 指示 android 已使用触摸事件。

这是一个示例代码：

```
btn.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch (View v, MotionEvent event)
        {
            list.onTouchEvent(event);
            return true;       // return true if touch event is consumed else return false
        }
    }); 
```

用于此的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/shape" >

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:cacheColorHint="#00000000" >
    </ListView>

    <Button
        android:id="@+id/view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#88cc0000"
        android:layout_alignParentTop="true"
        android:onClick="showMe" />
</RelativeLayout> 
```

这里 Button 隐藏了列表视图，当触摸事件传递到下面的布局时，列表仍然会滚动。
我希望这将有所帮助。:)

# android - 如何管理 Android 的开发、测试和生产环境？

> ID：12022119
> 
> 赞同：2
> 
> 时间：2012-08-18T20:43:55.250
> 
> 标签：android

我正在开发一个 Android 应用程序，但不确定我应该如何管理开发、测试和生产环境/构建。

例如，我有一个用于开发的 API 字符串；对于测试和生产，这个字符串是不同的。我应该把它放在我的 Android 项目中的什么位置，我该如何管理使用哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:51:30.097

如果你使用版本控制系统，比如 Git，你可以有不同的分支和不同的值。例如，我为我的 Android 应用程序的 API 使用两个不同的 URL：`localhost:3000/api/bla`和`www.mysite.com/api/bla`.

我有一个用于开发并使用我的本地主机服务器的主分支，以及一个我使用的具有实际网站的生产分支。我用新功能、错误修复等更新主开发分支，当我需要时，我将这些更改合并到生产分支中。

# regex - 将 URL 方案与端口匹配

> ID：12022120
> 
> 赞同：0
> 
> 时间：2012-08-18T20:44:12.927
> 
> 标签：regex, url

我正在尝试使用此 regex 匹配 URI / URL 方案（例如 ftp、http、https）`^(.*:)`。问题是我的 url 有一个端口号，因此该`:`方案中的服务器连接不是唯一的`:80`。如何使用正则表达式匹配方案？

给定这个例子：

```
http://video.google.co.uk/videoplay?docid=-7246927612831078230&hl=en#00h02m30s 
```

我希望正则表达式匹配：

```
http 
```

我对类似的东西不感兴趣

```
^((http[s]?|ftp):\/) 
```

我知道这会起作用，但是它是有限的。它不会给我`mailto, tel, ssh, etc.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:53:59.520

我刚刚发现这`^[^:]+`行得通。

# mysql - 左连接表 ON 行与 JSON 值？

> ID：12022123
> 
> 赞同：1
> 
> 时间：2012-08-18T20:44:41.820
> 
> 标签：mysql, json

这个很难，我有 2 个表需要在特定行上加入，问题是第一个表行是 json 值

这是表项中的 json 行

```
[{"id":"15","value":"News Title"},{"id":"47","value":"image1.jpg"},{"id":"33","value":"$30"}] 
```

这是我需要加入 json ID 并获取实际属性名称的表属性，例如 Title 、 Image 、 Price

```
id      Name
15      Title
47      Image
33      Price 
```

所以开始是

```
SELECT item_values FROM ujm_items 
LEFT JOIN?????
 WHERE category = 8 AND published = 1 ORDER BY created DESC 
```

但在 json 上留下 join ，不知道。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T20:50:53.850

...这就是为什么您不将结构化数据存储在单个 SQL 字段中的原因。它否定了关系数据库的全部目的。

除非你有一个包含 JSON 解析器的数据库，否则你有两个选择：

a) 查找/提取特定键/值对的不可靠字符串操作

b) 将 json 插入一个客户端，该客户端可以解析回本机，提取所需的键/值，然后使用其他一些 ID 字段进行实际连接。

```
SELECT ...
LEFT JOIN ON SUBSTR(jsonfield, POSITION('"id:"', jsonfield)) etc... 
```

无论哪种方式，它都会完全破坏性能，因为您不能在这些计算/派生值上使用索引。

请注意，这不会按原样工作-只是为了证明这会变得多么丑陋。

修复您的表格 - 规范化设计，不要存储您需要从中提取数据的 JSON 数据。放入一个您只能完全获取/更新的 json 字符串是一回事。有一个你需要加入其中的子值是完全不同的事情。

# php - 想要在使用 CodeIgniter 下载完成时加载页面

> ID：12022127
> 
> 赞同：0
> 
> 时间：2012-08-18T20:45:05.437
> 
> 标签：php, codeigniter, download

我有一个控制器：-

```
function game_file($filename)
    {      
        $file_path = base_url()."resources/games_application/$filename";
        header('Content-Type: application/octet-stream');
        header("Content-Disposition: attachment; filename=$filename");
        ob_clean();
        flush();
        readfile($file_path);
        redirect('downloads');  //This is not working 
    } 
```

我的观点是：-

```
<a href='".base_url()."downloads/game_file/".$games_data['file_name']."'>Download<a/> 
```

我可以下载文件，但问题是下载后我想重定向到`download`控制器。这只会下载我的文件，但下载完成后不会重定向。我做错了什么吗？

编辑：-我知道我无法重定向，因为标头已经发送，所以任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:28:34.933

你所提议的**永远不会**奏效。as a`redirect()`是一个标头操作，并且您已经设置了标头。但这本身只是一个问题。

您不能设置文件**下载**，然后将页面重定向到其他地方！需要重新考虑你的过程。也许从主下载页面对“下载”操作进行 javascript 捕获。

但是你...`redirect('downloads'); //This is not working`永远不会工作。

# spring - Spring Security 推荐的设计以请求用户登录到具有不同角色的不同用户

> ID：12022132
> 
> 赞同：0
> 
> 时间：2012-08-18T20:45:29.727
> 
> 标签：spring, grails, spring-security, security

我有以下用例，需要有关正确实施的建议。要清楚这可以通过配置完成还是我需要实现新代码？

**业务用例**

该企业希望允许用户通过社交媒体网站登录并访问他们的一些页面。但是为了访问处理 $$ 的页面，用户必须通过应用程序本地帐户登录。

**技术用例**

允许用户通过 Facebook 或其他提供商登录并提供角色 USER_PARTIAL_RIGHTS

如果用户访问角色为 USER_FULL_RIGHTS 的页面，则会提示用户登录到本地 JDBC 存储帐户。

此身份验证还必须确保页面受 USER_FULL_RIGHTS 角色而不是其他角色保护。

我正在使用 grail spring 安全插件，但我希望必须自定义插件。

那么有什么建议这样做呢？我有几个想法是：

**技术理念**

*   自定义弹簧访问被拒绝处理程序
*   自定义访问被拒绝控制器而不是股票 jsp 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:33:24.713

根据我对您的问题的理解，这是我的建议。对于通过 Facebook 登录，请使用 Spring Social。[这](http://www.springsource.org/spring-social/)是文档。实现很简单。编写自定义登录方法并设置部分权限的权限，如下所示：

```
 public void signin(String userId) {
    authorities = new ArrayList<GrantedAuthority>();
            //set your partial rights authority
    SecurityContextHolder.getContext().setAuthentication(new UsernamePasswordAuthenticationToken(userId, null, authorities));   
} 
```

并使用@secured 注解进行方法级别的安全实现，以访问需要完全权限的页面。像这样的东西

```
 @Secured("USER_FULL_RIGHTS ")
 yourMethod(){
 //code
 } 
```

这将提示登录，可以使用来自应用程序本地帐户的身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T00:25:08.297

我们最终实现的是一个控制器，它查看角色并将用户重定向到正确的登录页面。有点乱，但它有效。

```
Collection<GrantedAuthority> inferred = SpringSecurityUtils.findInferredAuthorities(SpringSecurityUtils.getPrincipalAuthorities());

if(ifAnyGranted('ROLE_FOO', inferred)) {
  redirect(controller: 'foo',action: 'home')
  return
} 
```

# visual-studio-2010 - 视觉工作室可以建议变量名吗？

> ID：12022136
> 
> 赞同：4
> 
> 时间：2012-08-18T20:46:27.463
> 
> 标签：visual-studio-2010, visual-studio

Eclipse 可以自动创建（或建议）变量名。例如，如果我有一个名为 MyClass 的类并且我想从中创建一个对象，MyClass myClass = new MyClass(); 在类名 (MyClass) 之后的 Eclipse 中，我按 ctrl+space 键，Eclipse 会自动建议变量的名称 (myClass)。Visual Studio 中是否有类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T02:21:24.063

Visual Studio 不执行您所描述的操作，但可以通过扩展获得此功能。我知道[ReSharper](http://www.jetbrains.com/resharper/)可以做到这一点（以及更多），所以您可能想尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T14:02:29.700

我看到有两个免费选项：

1) 免费的 Visual Studio 扩展[.net AutoCode](http://visualstudiogallery.msdn.microsoft.com/48eeb43f-cb46-4680-b7df-11e73cf894ca)。
只需安装它并输入代码：
`MyClass i`
然后按 Ctrl + Enter。自动编码将替换`MyClass i`为
`MyClass myClass = new MyClass();`

2）您可以编写一个代码片段并将其与 newvar.snippet 名称一起保存到自定义片段文件夹（通常是 C:\Users\UserName\Documents\Visual Studio NNNN\Code Snippets\Visual C#\My Code Snippets）：

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippets xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
  <CodeSnippet Format="1.0.0">
    <Header>
      <SnippetTypes>
        <SnippetType>Expansion</SnippetType>
      </SnippetTypes>
      <Title>newvar</Title>
      <Author>
      </Author>
      <Description>Declares varible with the same name as its type name.</Description>
      <HelpUrl>
      </HelpUrl>
      <Shortcut>newvar</Shortcut>
    </Header>
    <Snippet>
      <Imports>
        <Import>
        </Import>
      </Imports>
      <Declarations>
        <Literal Editable="true">
          <ID>type</ID>
          <ToolTip>type</ToolTip>
          <Default>type</Default>
          <Function>
          </Function>
        </Literal>
      </Declarations>
      <Code Language="csharp"><![CDATA[$type$ $type$ = new $type$($end$);]]></Code>
    </Snippet>
  </CodeSnippet>
</CodeSnippets> 
```

当您重新启动 VS 并输入代码
`newvar`
然后按 Tab 键两次
VS 将插入 `type type = new type();`
第一个“类型”字高亮显示。输入适当的类名`MyClass`（启用自动完成）并按两次 Enter 键。VS 将替换代码：
`MyClass MyClass = new MyClass();`
不幸的是，变量将获得其类的名称（请参阅[visualstudio.uservoice.com 上的](https://visualstudio.uservoice.com/forums/121579-visual-studio-2015/suggestions/9279405-add-camelcase-transformation-for-snippet-variables)[SO 答案](https://stackoverflow.com/a/164729/2164198)和建议）。但是手动修复（不正确的变量大小写）非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:52:54.013

Visual Studio 不建议使用变量名称，但它应该可以完成大多数其他事情。

例如，如果你这样做`MyClass myClass =`，它应该会弹出一个 IntelliSense 框`new MyClass();`。

然而，它确实有一些有用的东西，可以快速为你创造东西。例如，如果您键入`class`并按 TAB 两次，它将创建一个类模板，或者如果您键入`ctor`，`mbox`它将`MessageBox.Show()`分别创建一个构造函数或调用。

# asp.net-mvc - ModelBindingContext 的 string.Parse 等效项？

> ID：12022139
> 
> 赞同：0
> 
> 时间：2012-08-18T20:46:53.993
> 
> 标签：asp.net-mvc, asp.net-mvc-3

以下 modelbindingcontext int.parse 代码的字符串等价物是什么？

```
int myint = int.Parse(valueProvider.GetValue("MyId").AttemptedValue); 
```

想使用`string.Parse`...但未定义

```
string mystring = string.Parse(valueProvider.GetValue("MyName").AttemptedValue); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:52:49.427

快速简单的答案是这`AttemptedValue`已经是一个字符串。所以我不确定解析或调用`ToString()`它的意义是什么。

执行此操作和您的`int`方案的更正确方法是`ConvertTo()`使用`ValueProviderResult`.

```
int myInt = valueProvider.GetValue("MyId").ConvertTo(typeof(int));
string myString = valueProvider.GetValue("MyName").ConvertTo(typeof(string)); 
```

# python - 如何在 VIM 中为文件设置正确的路径？

> ID：12022142
> 
> 赞同：3
> 
> 时间：2012-08-18T20:47:22.020
> 
> 标签：python, vim, path

每当我`:pwd`在 vim 中点击时，该命令总是返回 path `C:\Windows\system32`，即使我在桌面上的 Python 文件中。所以每当我运行`:!python %`命令返回

```
python: can't open file '\Users\myname': [Errno 2] No such file or directory. 
```

但是，如果我使用命令设置路径，`:cd %:p:h`然后运行相同的 python 命令，Python 文件将正确执行。所以基本上我想知道如何让 vim 为我打开的每个文件正确设置路径。

*（即，如果我在位于桌面的文件中`:pwd`返回`~\Desktop\`，或者如果我在主目录中的文件中`:pwd`返回`C:\Users\MyName\`）*。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T20:48:55.613

您可以设置`autochdir`：

```
:set autochdir 
```

使用此设置，当前工作目录将跟随您正在编辑的文件。

请参阅`:help 'autochdir'`，特别是此注释：

> 注意：当此选项在某些插件上时可能不起作用。

# ios - 使用 Adob e AIR 在 iOS 应用程序中单点登录

> ID：12022143
> 
> 赞同：1
> 
> 时间：2012-08-18T20:47:38.517
> 
> 标签：ios, authentication, air, single-sign-on, facebook-authentication

我正在尝试将 Facebook SSO 集成到我正在使用 Flash（使用 AIR）开发的 iOS 游戏中。

我正在使用我发现的唯一教程（这是一个非常好的教程）： http: [//www.saumitrabhave.com/2011/10/facebook-single-sign-on-for-air-ios.html](http://www.saumitrabhave.com/2011/10/facebook-single-sign-on-for-air-ios.html)

我已经走了这么远，并在那里实现了这些东西，但我坚持将访问令牌返回给应用程序。

在本教程中，invoke 方法（在 Facebook 授权完成并返回应用程序时调用）实现如下：

```
protected function onInvoke(e:InvokeEvent):void{  
 var str:String = e.arguments[0];
 if(str && str.indexOf("fb"+APP_ID+"://") != -1 )
 ... 
```

`e.arguments`始终是一个空数组，因此`str`未定义。什么会导致这种行为？

谢谢，坎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T20:53:41.373

我刚刚找到了解决方案（我已经尝试了好几个小时）。调用方法以某种方式被调用了两次，我只是检查第一个（没有意识到甚至还有第二次调用），因为它不起作用，我终止了应用程序，之后没有检查任何其他内容。

供将来参考：调用事件可能会被调用两次，第一次没有发送身份验证令牌，但第二次有。

# c# - 编辑抛出错误：对象引用未设置为对象的实例

> ID：12022144
> 
> 赞同：0
> 
> 时间：2012-08-18T20:47:42.447
> 
> 标签：c#, asp.net, sql

```
protected void schgrid_RowDataBound(object sender, GridViewRowEventArgs e)
{
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                //getting username from particular row
                string schlName = Convert.ToString(DataBinder.Eval(e.Row.DataItem, "schlName"));
                //identifying the control in gridview
                ImageButton lnkbtnresult = (ImageButton)e.Row.FindControl("imgbtnDelete");
                //raising javascript confirmationbox whenver user clicks on link button
                lnkbtnresult.Attributes.Add("onclick", "javascript:return ConfirmationBox('" + schlName + "')");
            }
} 
```

这是上面一行的错误：

> *你调用的对象是空的*

```
protected void schgrid_RowEditing(object sender, GridViewEditEventArgs e)
{
        schgrid.EditIndex = e.NewEditIndex;

        if (txtSearch.Text == "")
        {
            BindSchoolDetails();
        }
        else
        {
            BindSearchDetails();
        }
    } 
```

每当我使用`rowEditing`时，都会引发异常，`schgrid_RowDataBound`其中实际用于删除 gridview 记录。

请帮我解决这个问题。给我看一些代码来纠正这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:32:09.560

如果 lnkbtnresult 为 null，则可能是因为控件未调用 imgbtnDelete。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:40:32.523

据我所知，您的**lnkbtnresult**必须为空，您可以在调试时检查它的值，然后再遇到错误行。由于提供给 DataBinder.Eval 的名称（字符串“schlName”）错误，该图像按钮可能为空。只需尝试检查您用于 schlName 的 ID 是否正确。把你的aspx代码也放上去，会很有帮助的。

# regex - 正则表达式来分离自定义上传的视频

> ID：12022148
> 
> 赞同：0
> 
> 时间：2012-08-18T20:48:48.290
> 
> 标签：regex

我需要将自定义上传的视频和一些检测到`-`或未`_`检测到的视频分开。任何人都可以帮我处理我的代码吗？

```
$services_regexp = array("#^[\w\s]+\.(?P<format>[a-zA-Z0-9]{2,5})#" => 'local',` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:04:48.820

`[\w\s]+`，您似乎在扩展名之前用于文件名，仅匹配字母数字字符（`\w`是 的快捷方式`[A-Za-z0-9_]`）和空格（`\s`）。如果您还想允许破折号，那么您需要在字符类的末尾添加它：

```
"#^[\w\s-]+\.(?P<format>[a-zA-Z0-9]{2,5})#" 
```

下划线已经包含在`\w`.

# visual-studio - 防止需要将 NuGet.exe 添加到源代码管理

> ID：12022154
> 
> 赞同：73
> 
> 时间：2012-08-18T20:49:11.480
> 
> 标签：visual-studio, version-control, nuget

**一些上下文：**
我已经按照[使用 NuGet 的教程进行操作，但没有成功提交包](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)。通过手动添加和为 nuget.targets 文件解决[此 NuGet 问题后，一切正常。](http://nuget.codeplex.com/workitem/1879)`<RestorePackages>``<Import ...>`

但是，一旦我使用 Mercurial 克隆了存储库，构建时出现以下错误：

> 找不到“C:\...\Visual Studio 2010\Projects\MyProject\.nuget\nuget.exe”

这是有道理的，因为我的忽略模式阻止了我签入 exe 文件。从[这个相关的 SO 问题](https://stackoverflow.com/q/10111441/419956)中，我推断在版本控制中包含这个文件并不少见（或者是吗？），但如果我能提供帮助，我真的**不希望将 NuGet.exe 提交给版本控制。**

* * *

***问题：****有没有一种方便的方法来防止需要签入 NuGet.exe？*

* * *

我尝试了一些 Google-fu，浏览了文档，并摆弄了 NuGet.targets 文件，但到目前为止还没有运气。如果我可以动态地指向构建解决方案的特定环境的 NuGet.exe，这似乎更可取。

我知道我可以只添加 exe 文件，但我想知道是否有其他方法可以处理这个问题，或者知道为什么没有可行的替代方案。

**更新：**
nuget.targets 文件包含一些相关的 xml：

```
<!-- only (relevant) parts of the xml shown below -->
<DownloadNuGetExe Condition=" '$(DownloadNuGetExe)' == '' ">false</DownloadNuGetExe>
...
<UsingTask TaskName="DownloadNuGet" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
    <Task>
        <Code Type="Fragment" Language="cs">
        <![CDATA[
        try {
            OutputFilename = Path.GetFullPath(OutputFilename);

            Log.LogMessage("Downloading latest version of NuGet.exe...");
            WebClient webClient = new WebClient();
            webClient.DownloadFile("https://nuget.org/nuget.exe", OutputFilename);

            return true;
        }
        catch (Exception ex) {
            Log.LogErrorFromException(ex);
            return false;
        }
        ]]>
        </Code>
    </task>
</UsingTask> 
```

我不熟悉 .targets 文件的工作原理，但这似乎与我正在寻找的内容一致。戴上牛仔编码帽后，我尝试将DownloadNuGetExe 元素中的 更改`false`为`true`，但这并没有按预期工作（有或没有条件属性）。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-08-19T10:14:51.640

刚刚检查：nuget.targets 是一个 msbuild 文件。你走对了，在：

```
<DownloadNuGetExe Condition=" '$(DownloadNuGetExe)' == '' ">false</DownloadNuGetExe> 
```

将值更改为 true：

```
<DownloadNuGetExe Condition=" '$(DownloadNuGetExe)' == '' ">true</DownloadNuGetExe> 
```

但是您必须在此之后**重新启动 Visual Studio 或重新加载解决方案（请参阅注释）**才能生效。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-22T12:46:13.610

查看该`.targets`文件，如果您既不想签`NuGet.exe`入也不想每次都下载它，还有另一种方法可以做到这一点。关键是这样的：

```
<NuGetExePath Condition=" '$(NuGetExePath)' == '' ">$(NuGetToolsPath)\nuget.exe</NuGetExePath> 
```

遵循仅在尚未定义属性时才设置属性的 MSBuild 约定，此值默认为解决方案的本地副本，如果属性为`NuGet.exe`，则下载它。但是 MSBuild 属性可以被环境变量覆盖。`DownloadNuGetExe``true`

如果您已经将 NuGet 下载到某个中心位置，则可以离开`DownloadNuGetExe`并`false`定义一个名为 的环境变量`NUGETEXEPATH`，它将被使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T13:19:10.377

启用 NuGet 包还原 [![在此处输入图像描述](../Images/c916fc90acbe90edcf45d009e2a2a928.png)](https://i.stack.imgur.com/pWuIs.png)

右键单击解决方案，然后选择**启用 NuGet 包还原**

# android - 为什么 SystemClock.currentThreadTimeMillis() 似乎以一半的速度运行？

> ID：12022158
> 
> 赞同：3
> 
> 时间：2012-08-18T20:50:14.067
> 
> 标签：android, time, clock

我正在尝试编写一个能够与用户输入同步播放 MIDI 文件的音乐应用程序。我已经完成了创建自定义视图、播放声音和读取 MIDI 数据的工作。我在视图的 onDraw() 方法中运行 MIDI 数据的播放，因此我可以将用户输入应用到它。音符数据存储为音符音高和播放时间数组，从开始时以毫秒为单位。

我的测试数据每 500 毫秒（半秒）播放一个不同音高的音符。我将 currentThreadTimeMillis() 记录在每个音符的时间间隔旁边，这与我预期的一样。每 500 个带有微小变化的滴答声，就会播放一个音符。然而，这个以毫秒为单位的计数大约是真实世界速度的一半，需要一秒钟才能计算 500 毫秒！我在 Galaxy Ace 上运行，所以这不是慢速模拟器的问题。

为什么 SystemClock.currentThreadTimeMillis() 需要两秒钟才能计算 1000 毫秒？

```
 public void onDraw(Canvas canvas) {
        // TODO : Draw notes
       canvas.drawColor(Color.BLACK);
       canvas.drawBitmap(aNote.img, aNote.x, aNote.y, null);
       if (ready>0){
            elapsed_time = SystemClock.currentThreadTimeMillis() - start_time;
            midi_note_data = MIDI.track_data.get(current_note);

            if (midi_note_data.start_time <= elapsed_time){
                current_note++;
                pitch = midi_note_data.pitch;
                Log.d("MUSIC", "Note time " + midi_note_data.start_time + " ThreadTime "+ elapsed_time);
                sounds.play(tone, 1.0f, 1.0f, 0, 0, notes[pitch]);                  
            }

            if (current_note > MIDI.track_data.size()-1){
                ready = -2;
            }

       }else if (ready == 0){
            start_time = SystemClock.currentThreadTimeMillis();
            Log.d("MUSIC", "Start time "+start_time);
            ready = 1;
       }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T20:54:04.823

您正在使用 SystemClock.currentThreadTimeMillis()，这是当前线程已运行的时间量。在 Android 上，我猜 UI 线程实际上只运行了一半的时间。（另一半用于操作系统的其余部分！）

切换到 System.currentTimeMillis() ，您的问题将得到解决。

您可以在此处阅读有关[不同时间测量系统](http://developer.android.com/reference/android/os/SystemClock.html)的更多信息。

# javascript - 在不同的div中加载左侧导航的链接内容

> ID：12022162
> 
> 赞同：1
> 
> 时间：2012-08-18T20:50:38.247
> 
> 标签：javascript, jquery, css, html, xhtml

我有顶部导航，左侧导航，其链接由单击顶部导航链接驱动，页面本身是两列布局，左侧导航和内容容器，顶部导航

```
 <div id="topnav">Topic1 | Topic 2 | Topic 3</div>

    <div id="navigation">
      <!--all links from topic1 by default, or topic 2 links if topic 2 clicked-->
        <a href="home.html">Home</a>
        <a href="pictures.html">Picture</a>
    </div>
    <div id="content">
         <!-- content will load here -->
    </div> 
```

当我单击主题 1 时，属于主题 1 的所有链接都应加载到左侧导航中，当我单击图片时，我的图片应加载到 #content 中。如何在 jquery 或 javascript 中执行此操作？请帮助..jquery新手在这里..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:04:03.540

HTML

```
<a class="loader" href="home.html">Link 1</a>
<div id="content"></div> 
```

JavaScript（使用 jQuery）

```
$('a.loader').on('click', function(e) {
    e.preventDefault();
    $('#content').load($(this).attr('href'));
}); 
```

就像@Musa 所说，您正在加载的 URL 应该在您自己的域中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:18:39.500

您可以使用框架：

索引.htm:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ca" lang="ca">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<title>Site</title>
</head>
<frameset rows="100,*">
  <frame src="topnav.htm" name="topnav" />
  <frameset cols="300,*">
    <frame name="navigation" />
    <frame name="content" />
  </frameset>
</frameset>
</html> 
```

顶部导航.htm:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>Topnav</title>
</script>
</head>
<body>
<a href="topic1.htm" target="navigation">Topic 1</a> | 
<a href="topic2.htm" target="navigation">Topic 2</a> | 
<a href="topic3.htm" target="navigation">Topic 3</a> | 
</body>
</html> 
```

主题1.htm：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>Topic1</title>
</script>
</head>
<body>
<a href="content1-1.htm" target="content">Content 1</a> | 
<a href="content1-2.htm" target="content">Content 2</a> | 
<a href="content1-3.htm" target="content">Content 3</a> | 
</body>
</html> 
```

然后，创建你的

*   内容1-1.htm
*   内容1-2.htm
*   内容1-3.htm

对 topic2.htm 和 topic3.htm 执行相同的操作

# javascript - 根据用户输入设置文本区域的范围

> ID：12022163
> 
> 赞同：0
> 
> 时间：2012-08-18T20:50:43.473
> 
> 标签：javascript, jquery

我有一个文本区域，我正在尝试检查是否有人输入**{{link** 我可以弹出一个模式让他们完成一些信息。

我现在的情况是，如果有人输入字母 k，它将返回 6 个字符，然后确定文本是否匹配**{{link**

但是我在设置范围的起点和终点时遇到问题。我认为问题在于识别节点，但我不确定。

主要是当有人输入字母“k”时，我只是想回去检查他们是否输入了：**{{link** ，如果他们输入了，它会启动一个模态。

这就是我在尝试设置范围和获取选择的部分不起作用的部分。

```
$(document).on('keyup', 'textarea', function(e) {

    if (e.keyCode == 75) {

    var end = $('textarea').getCaretPosition();
    var start = end - 6;
    var node = $(this).get(0);

    var range = document.createRange();
    range.setStart(node, start);
    range.setEnd(node, end);

    var selection = range.toString();

        if( selection == '{{link' ){    
            // we'll launch a modal here
        }
    }

});

    $.fn.getCaretPosition = function() {
        var el = $(this).get(0);
        var pos = 0;
        if ('selectionStart' in el) {
            pos = el.selectionStart;
        } else if ('selection' in document) {
            el.focus();
            var Sel = document.selection.createRange();
            var SelLength = document.selection.createRange().text.length;
            Sel.moveStart('character', -el.value.length);
            pos = Sel.text.length - SelLength;
        }
        return pos;
    } 
```

这会产生错误：未捕获的错误：INDEX_SIZE_ERR: DOM Exception 1 at range.setStart(node, start);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:33:00.023

不确定这是否是您的意思[http://jsfiddle.net/sailorob/J6PVJ/](http://jsfiddle.net/sailorob/J6PVJ/)

# objective-c - 更改 UIDocument 交互图标

> ID：12022164
> 
> 赞同：0
> 
> 时间：2012-08-18T20:50:50.017
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, uidocumentinteraction

> **可能重复：**
> [更改 UIDocumentInteractionController 图标](https://stackoverflow.com/questions/11912401/change-uidocumentinteractioncontroller-icons)

我目前在我的应用程序中有一个 UITableView，它使用 UIDocumentInteractionController 来显示特定文件类型的默认图像：![在此处输入图像描述](../Images/53ae9f5a2b47279ecd2aa026720e8f94.png)

我想知道我是否有一个占位符，可以说任何图像文件类型我可以有那个节目而不是默认的吗？这就是我想要的默认图像占位符： ![在此处输入图像描述](../Images/416a77288f6f3e3e81dcecb6c4e01a0b.png)

这可能吗？我将如何实现我读到的关于使用 .plist 的信息，但我没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:52:06.867

的`UTI`属性`UIDocumentInteractionController`为您提供文件的统一类型*标识符*，请参阅[统一类型标识符概念](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_conc/understand_utis_conc.html#//apple_ref/doc/uid/TP40001319-CH202-CHDHIJDE)。例如，“public.tiff”用于 TIFF 文件，“public.jpeg”用于 JPEG 文件，“com.apple.quicktime-movie”用于 QuickTime 电影。

统一类型标识符在*一致性层次结构*中声明。TIFF 和 JPEG 文件都是图像，在 UTI 概念中，这通过“public.tiff”和“public.jpeg”都*符合*“public.image”这一事实来表达。

话虽如此，您可以执行以下操作来为所有图像文件类型显示您自己的图标。

*   将该图标添加到您的应用程序资源中，例如“myimageicon.png”。

*   要为文件选择图标，请检查该文件的 UTI 是否符合“public.image”并在这种情况下使用您的图标。否则使用默认图标。

    ```
    // Assuming that self.docInteractionController is already set up ...
    if (UTTypeConformsTo((CFStringRef)self.docInteractionController.UTI, kUTTypeImage)) {
        cell.imageView.image = [UIImage imageNamed:@"myimageicon.png"];
    } else {
        cell.imageView.image = docInteractionController.icons.lastObject;
    } 
    ```

您必须导入`<MobileCoreServices/MobileCoreServices.h>`并添加`MobileCoreServices.framework`才能进行编译。

# php - Symfony POST 变量始终为空

> ID：12022166
> 
> 赞同：2
> 
> 时间：2012-08-18T20:51:02.820
> 
> 标签：php, symfony-2.1

这是我的 Symfony 控制器：

```
class MyPageController extends Controller
{
    public function indexAction(Request $request)
    {
        $postData = $request->request->get('manage');
        return new Response('<html><body>Post: '.$postData.'!</body></html>');
    }
} 
```

这是我的 HTML：

```
<form action="/..." method="POST" id="entity">
    <input type="text" value="This is the value" id="manage" />
    <input type="submit" class="button" value="Submit" />
</form> 
```

`$postData`总是空的。

我也试过：

```
$postData = $request->request->get('entity'); 
```

`$postData['manage']`也是空的！

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T21:12:25.320

我想这不是 symfony 问题，只是 html，您的输入需要`name`属性，因此它可以包含在 POST 中

```
<form action="/..." method="POST" id="entity">
<input type="text" value="This is the value" name="manage" />
<input type="submit" class="button" value="Submit" />
</form> 
```

# javascript - 我如何选择具有特定值的数组元素并执行函数 javascript

> ID：12022177
> 
> 赞同：1
> 
> 时间：2012-08-18T20:52:33.020
> 
> 标签：javascript

我有一个数组，里面有几个项目，其中一个是位置。其中一些位置是空的，没有任何价值。我想把这些空位置中的每一个都拿走并执行一项功能。有谁知道该怎么做？

数组可能如下所示：

```
array=[{user:a,user_id:b,date:c,profile_img:d,text:e,contentString:f,url:g,location:""},    
{user:a,user_id:b,date:c,profile_img:d,text:e,contentString:f,url:g,location:""}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:07:21.260

一个简单的`for`循环应该可以工作：

```
for (var i = 0; i < array.length; i++) {
    if (array[i].location.length == 0) {
        //Do something with array[i]
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:16:59.013

虽然你可以编写一个循环，但使用 Underscore.js 会更容易，它有一个很棒的过滤器功能。

只需编写一个测试以返回具有空位置的用户。

```
var allUsers = [{
    user: "user-with-location",
    user_id: "b",
    date: "c",
    profile_img: "d",
    text: "e",
    contentString: "f",
    url: "g",
    location: "asdf"
}, {
    user: "user-without-location",
    user_id: "b",
    date: "c",
    profile_img: "d",
    text: "e",
    contentString: "f",
    url: "g",
    location: ""
}];

var usersWithoutLocation = _.filter(allUsers, function(user) {
    return user.location === "";
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T00:20:56.660

作为提示，您可以[简化值检查](https://stackoverflow.com/questions/5515310/is-there-a-standard-function-to-check-for-null-undefined-or-blank-variables-in)。

```
for (var i = 0; i < array.length; i++) {
  if (!array[i].location) {
    //Do something with array[i]
  }
} 
```

# idioms - 具体到编程世界，“海龟一路向下”是什么意思？

> ID：12022182
> 
> 赞同：10
> 
> 时间：2012-08-18T20:53:27.773
> 
> 标签：idioms, phrase

我经常听到这句话，但并不完全理解它的含义。这是什么意思？如果可能的话，有没有例子？

谢谢你！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T20:58:00.097

这个表达式的一个用途是指一种编程风格，其中调用堆栈非常深。您可能会看到一个被调用的方法`Grobble`并想知道它做了什么，因此您打开定义并看到以下内容：

```
class FooHandler
{
    void Grobble(Foo foo)
    {
        foo.Grobble();
    }
} 
```

那么你看看`Foo.Grobble`：

```
class Foo
{
    FooImpl _fooImpl;

    void Grobble()
    {
        _fooImpl.Grobble();
    }
} 
```

这也让你`FooImpl`看起来像这样：

```
class FooImpl
{
    void Grobble()
    {
        this.Grobble(false);
    }

    // etc...
} 
```

越往深处看代码，还是看不到尽头，你只能沮丧地惊呼“一路下来都是乌龟！”

参考是地球在乌龟背上的[隐喻。](http://en.wikipedia.org/wiki/Turtles_all_the_way_down)乌龟站在什么上面？另一只乌龟……等等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T20:58:58.650

这通常是指自托管编程语言，其中解释器或编译器是用正在解释/编译的相同语言编写的。它还可以引用以语言本身编写的语言的库。

Smalltalk 和 Lisp 以这种方式而闻名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T20:56:52.260

Turtles all the way down 是一个短语，有时用来指代无限递归。例如，最小整数是多少？没有一个。-2 小于 -1，-3 小于 -2，依此类推。没有底。引用的原始来源是对“如果世界在乌龟的背上，乌龟站在什么上？”这个问题的回答。无论如何，它没有我所知道的任何编程特定含义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T21:47:13.633

它有时用于指代“纯”面向对象（或函数式）语言。在 ao java、c#、c++、Objective c 和 Delphi 中，有一些本机类型 (int) 的行为不像对象。在 Smalltalk 中，这种错觉保持得更好。

# php - 如何将购物车从更新一项更改为全部更新

> ID：12022183
> 
> 赞同：0
> 
> 时间：2012-08-18T20:53:33.350
> 
> 标签：php, html, forms, dynamic, cart

花了很长时间，但我有一个购物车工作。问题是，在我的业务性质中，客户的购物车中可能有数百件商品，而我更新单个商品的方式非常原始，如果有很多商品需要更新，可能会变得乏味。

对于客户购物车的购物车数据库中的每一行，我都会生成商品的表单和产品信息。因此，每一行都有它自己的更新项目按钮。

```
$top_query = "SELECT t1.product_id, image_path, suggested_quantity, sales_info sku_item_number FROM product_customer_suggested_qty AS t1 
            LEFT JOIN product_images AS t2 ON t1.product_id = t2.product_id 
RIGHT JOIN products AS t3 ON t1.product_id = t3.product_id          
            WHERE customer_id = '".$customer_id."'
            AND cart_visible != 0";
        //echo $top_query;
            $histresult = mysql_query($top_query) or die (mysql_error());

 <tr>
                <td width="181"><strong>Product</strong></td>
                <td width="181"><strong>Sales Info</strong></td>
                <td width="100"><strong>Suggested Qty</strong></td>
                <td width="100"><strong>Qty</strong></td>
                <td width="100"><strong>Image</strong></td>
                <td width="100"><strong>Add to Cart?</strong></td>
              </tr>
              <?php
              $i =0;
              while($row=mysql_fetch_array($histresult))
            {
                echo '<tr height = "50px">';
                //We grab the product id as well as everything else we need.
                $customer_id= $row['customer_id'];
                $product_id= $row['product_id'];
                $link = $row['image_path'];
                $sku_item_number = $row['sku_item_number'];
                $suggested_quantity = $row['suggested_quantity'];

                 echo '
                 <form action="ezcopy.php? method="post"><td>'.$sku_item_number.'</td>';
    echo '<td>'.$suggested_quantity.'
    <input class="same" id="same'.$i.'" title="'.$i.'" name="same'.$i.'" type="checkbox" value ="'.$suggested_quantity.'"/> 
    <input name="customer_id" type="hidden" value="'.$customer_id.'">
    <input name="product_id" type="hidden" value="'.$product_id.'">
    <input name="i" type="hidden" value="'.$i.'">
    </td>';

    echo '<td><input  class="qty" name="qty'.$i.'" id="qty'.$i.'" type="text"size="4" maxlength="4"></td>'; 
```

这只是整行的一部分，它完全可以用于更新数量，并允许用户根据他们的历史记录自动复制建议的值。

但是，如果我只想在底部制作一个显示“全部更新”的按钮，从而使整个购物车成为一个大表格，我该如何修改数量表格，以便它可以读取未知的动态数量的项目并更新数据库？实现这一目标的好策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:23:41.493

在与谷歌苦苦挣扎之后，我终于在这里找到了一个例子。 [http://www.theblog.ca/update-multiple-rows-mysql](http://www.theblog.ca/update-multiple-rows-mysql)

关键是在行生成循环之外将表单更改为一个大的而不是许多小的。

```
 while($row=mysql_fetch_array($histresult))
            {
                echo '<tr height = "50px">';
                //We grab the product id as well as everything else we need.
                $customer_id= $row['customer_id'];
                $product_id= $row['product_id'];
                $link = $row['image_path'];
                $sku_item_number = $row['sku_item_number'];
                $suggested_quantity = $row['suggested_quantity'];
                $sales_info = $row['sales_info'];
                $item_id = $row['id_product_customer_suggested_qty'];

                 echo '<td>'.$sku_item_number;
                 //This array stores the item index.

                 echo '</td>';

                 echo '<td>'.$sales_info.'</td>';
    echo '<td>'.$suggested_quantity.'
    <input class="same" id="same'.$i.'" title="'.$i.'" name="same'.$i.'" type="checkbox" value ="'.$suggested_quantity.'"/> 
    <input name="item_id[]" type="hidden" value="'.$item_id.'">
    <input name="customer_id[]" type="hidden" value="'.$customer_id.'">
    <input name="product_id[]" type="hidden" value="'.$product_id.'">
    <input name="i" type="hidden" value="'.$i.'">
    </td>';

    echo '<td><input  class="qty" name="qty[]" id="qty'.$i.'" type="text"size="4" maxlength="4"></td>'; 
```

第一个关键是输入名称是如何改变的。它们现在都是数组。在行生成循环的末尾是一个提交按钮。然后，提交时发生的事情是下一个关键。

```
foreach($_POST['item_id'] as $key=>$item_id)
{ 
    $qty = $_POST['qty'][$key];
    $product_id = $_POST['product_id'][$key];
    $customer_id = $_POST['customer_id'][$key];

    if (!empty($qty))
    {
        echo 'Product is '.$product_id.'<br>';
        echo 'Quantity requestesd is '.$qty.'<br><br>';
        //perform UPDATE query as that inidividual item
        }
} 
```

这会动态抓取表单中的每一行，每一行都由 item_id 唯一。我们现在可以只在需要时执行更新查询。这是一个非常强大的技巧。

# c# - Silverlight 4/5 DataPager 模板 PageSize ComboBox

> ID：12022186
> 
> 赞同：1
> 
> 时间：2012-08-18T20:53:53.717
> 
> 标签：c#, silverlight, silverlight-5.0, datapager

我为 Silverlight DataPager 控件定义了一个模板，其中包含一个具有 PageSize 值的 ComboBox

**模板：**

```
<Style TargetType="sdk:DataPager">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="sdk:DataPager">
                <Grid x:Name="Root" Background="Transparent">
                    <Border BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2" MinHeight="24" Padding="{TemplateBinding Padding}"             VerticalAlignment="Bottom">
                        <StackPanel HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Orientation="Horizontal" VerticalAlignment="Stretch">
                            <Button x:Name="FirstPageButton" BorderBrush="{StaticResource BorderBrushColor}" BorderThickness="1" Background="{StaticResource BackgroundColor}" Foreground="{StaticResource ForegroundColor}" HorizontalAlignment="Right" Height="20" Padding="1" Template="{StaticResource ButtonTemplate}" VerticalAlignment="Center" Width="20" Margin="0,0,3,0">
                                <Grid Height="9" Width="8">
                                    <Path Data="M0,1 L1,0 L1,2 Z" HorizontalAlignment="Right" Height="9" Stretch="Fill" Width="5" Fill="White"/>
                                    <Rectangle HorizontalAlignment="Left" Width="2" Fill="White"/>
                                </Grid>
                            </Button>
                            <Button x:Name="PreviousPageButton" BorderBrush="{StaticResource BorderBrushColor}" BorderThickness="1" Background="{StaticResource BackgroundColor}" Foreground="{StaticResource ForegroundColor}" HorizontalAlignment="Right" Height="20" Padding="1" Template="{StaticResource ButtonTemplate}" VerticalAlignment="Center" Width="20" Margin="0,0,3,0">
                                <Path Data="M0,1 L1,0 L1,2 Z" HorizontalAlignment="Center" Height="9" Stretch="Fill" Width="5" Fill="White"/>
                            </Button>
                            <Border x:Name="Separator1" BorderThickness="1,0,1,0" Margin="0, 3" Width="1" BorderBrush="#FF747474"/>
                            <StackPanel x:Name="NumericButtonPanel" Margin="1" Orientation="Horizontal"/>
                            <StackPanel x:Name="PageSizeDisplay" Orientation="Horizontal">

                                <ComboBox SelectedValue="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=PageSize, Mode=TwoWay}" 
                                          SelectedValuePath="Content" Width="60" Margin="3"
                                          BorderBrush="{TemplateBinding BorderBrush}" Foreground="{TemplateBinding Foreground}">
                                    <ComboBoxItem Content="10"></ComboBoxItem>
                                    <ComboBoxItem Content="20" IsSelected="True"></ComboBoxItem>
                                    <ComboBoxItem Content="50"></ComboBoxItem>
                                    <ComboBoxItem Content="100"></ComboBoxItem>
                                    <ComboBoxItem Content="200"></ComboBoxItem>
                                </ComboBox>

                            </StackPanel>
                            <StackPanel x:Name="PageDisplay" Orientation="Horizontal">
                                <TextBlock x:Name="CurrentPagePrefixTextBlock" Foreground="{TemplateBinding Foreground}" Margin="4,0,0,0" VerticalAlignment="Center" Width="Auto"/>
                                <TextBox x:Name="CurrentPageTextBox" BorderBrush="{TemplateBinding BorderBrush}" Foreground="{TemplateBinding Foreground}" Height="Auto" Margin="4,2,4,2" Style="{StaticResource TextBoxStyle1}" TextWrapping="Wrap" VerticalAlignment="Center" Width="40"/>
                                <TextBlock x:Name="CurrentPageSuffixTextBlock" Foreground="{TemplateBinding Foreground}" Margin="0,0,4,0" VerticalAlignment="Center" Width="Auto"/>
                            </StackPanel>
                            <Border x:Name="Separator2" BorderThickness="1,0,1,0" Margin="0,3" Width="1" BorderBrush="#FF747474"/>
                            <Button x:Name="NextPageButton" BorderBrush="{StaticResource BorderBrushColor}" BorderThickness="1" Background="{StaticResource BackgroundColor}" Foreground="{StaticResource ForegroundColor}" HorizontalAlignment="Right" Height="20" Padding="1" Template="{StaticResource ButtonTemplate}" VerticalAlignment="Center" Width="20" Margin="3,0">
                                <Path Data="M0,0 L1,1 L0,2 Z" HorizontalAlignment="Center" Height="9" Stretch="Fill" Width="5" Fill="White"/>
                            </Button>
                            <Button x:Name="LastPageButton" BorderBrush="{StaticResource BorderBrushColor}" BorderThickness="1" Background="{StaticResource BackgroundColor}" Foreground="{StaticResource ForegroundColor}" HorizontalAlignment="Right" Height="20" Padding="1" Template="{StaticResource ButtonTemplate}" VerticalAlignment="Center" Width="20">
                                <Grid Height="9" Width="8">
                                    <Path Data="M0,0 L1,1 L0,2 Z" HorizontalAlignment="Left" Height="9" Stretch="Fill" Width="5" Fill="White"/>
                                    <Rectangle HorizontalAlignment="Right" Width="2" Fill="White"/>
                                </Grid>
                            </Button>
                        </StackPanel>
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**用法：**

```
<sdk:DataPager x:Name="pager" Source="{Binding Path=ItemsSource, ElementName=myGrid}" PageSize="50" /> 
```

我的 DataGrid 绑定到 a `PagedCollectionView`，但仍然`PageSize` `ComboBox`不显示正确的值。（如果`IsSelected`没有设置属性，则没有选中项`ComboBox`）

我也尝试过设置 的`PageSize`属性`PagedCollectionView`，这也无济于事。

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:22:20.390

您正在尝试将 ComboBoxItem 值与 int32 值绑定。

试试这个：

```
<ComboBox SelectedValue="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=PageSize, Mode=TwoWay}" 
Width="60" Margin="3"
BorderBrush="{TemplateBinding BorderBrush}" Foreground="{TemplateBinding Foreground}">

<sys:Int32>10</sys:Int32>
<sys:Int32>20</sys:Int32>
<sys:Int32>50</sys:Int32> 
```

还要添加以下命名空间：

```
xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

# macos - Mac OS X：应用程序文件夹的图标在哪里？

> ID：12022192
> 
> 赞同：1
> 
> 时间：2012-08-18T20:54:43.720
> 
> 标签：macos, icons, finder

有谁知道 Finder 侧边栏中的图标在哪里？我想在我的应用程序中使用那个小分辨率优化的应用程序图标，但我在任何地方都找不到原件。

![在此处输入图像描述](../Images/bc5becdfa8e096fd610312d72dacc096.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:37:51.360

如果您想在源代码中使用该图标，您可以通过调用以下方式获取 NSImage：

```
[[NSWorkspace sharedWorkspace] iconForFileType: NSFileTypeForHFSTypeCode(kToolbarApplicationsFolderIcon)] 
```

您可以更改为 kToolbar{theIcon} 以获取工具栏上显示的任何其他图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:05:50.520

找到了。

`/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/SidebarApplicationsFolder.icns`

# c# - 富文本框中的 EN_MAXTEXT 消息

> ID：12022201
> 
> 赞同：0
> 
> 时间：2012-08-18T20:56:35.387
> 
> 标签：c#, winapi

根据msdn [here](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761684%28v=vs.85%29.aspx)上写的内容，如果要插入的字符数超过richTextBox的宽度，我应该收到EN_MAXTEXT消息，如果它没有ES_AUTOHSCROLL样式。
但这对我不起作用。

我写了这段代码：

```
 public class myRTB : RichTextBox
        {

            protected override void WndProc(ref Message m)
            {
                if (m.Msg == (WM_REFLECT | WM_COMMAND))
                {
                    int code = (int)m.WParam;
                    code = (code >> 16) & 0xffff;  // convert to hiword   
                    if (code == EN_MAXTEXT)
                    {
                        MessageBox.Show("max text");
                    }
                }

                base.WndProc(ref m);
            }

            public const int WM_USER = 0x400;
            public const int WM_REFLECT = WM_USER + 0x1C00;
            public const int WM_COMMAND = 0x111;
            public const int EN_MAXTEXT = 0x0501;

        } 
```

我使用这段代码删除了 ES_AUTOHSCROLL 样式：

```
 private void button1_Click(object sender, EventArgs e)
            {
                // get the style
                IntPtr style = GetWindowLongPtr32(myRTB1.Handle, GWL_STYLE);
                // remove the ES_AUTOHSCROLL style
                SetWindowLong32(myRTB1.Handle, GWL_STYLE, (int)style - ES_AUTOHSCROLL);
            }

            public const int GWL_STYLE = -16;
            public const int ES_AUTOHSCROLL = 0x0080;

            [DllImport("user32.dll", EntryPoint = "SetWindowLong")]
            private static extern int SetWindowLong32(IntPtr hWnd, int nIndex, int dwNewLong);

            [DllImport("user32.dll", EntryPoint = "GetWindowLong")]
            private static extern IntPtr GetWindowLongPtr32(IntPtr hWnd, int nIndex); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-18T21:07:52.613

删除 WM_REFLECT，它与 C# 无关。

# php - 如何处理大量 Cron 作业

> ID：12022204
> 
> 赞同：3
> 
> 时间：2012-08-18T20:57:06.993
> 
> 标签：php, mysql, cron

我的网络服务器正在运行 cpanel，其中有一个 Cron 作业模块，它提供了一个 GUI 来添加/删除/编辑 cron 作业。

**问题：**我需要创建大量的 cron 作业（超过 100 个）。每个 cronjob 只是简单地`wget <url>`触发一堆 PHP 函数。管理它们的最佳方法是什么？cPanel 的 Cron GUI 当前的问题是 cron 作业中没有组织。如果我有 5 个相关的 cron 作业，分别添加 100 个其他不相关的 cron 作业，那么在长长的 cron 作业列表中找到这些 cron 作业将变得更加困难。

我应该坚持使用 cPanel 的 GUI 吗？或者是否有具有更好功能的替代 GUI，例如文件夹或在列表中上下移动 cron 作业的能力？或者我应该只有 1 个 cron 作业，它调用一个 PHP 文件，该文件`wget`使用PHP 执行各种操作`CURL`，并带有一个表并将作业存储在 MySQL 数据库中，本质上是创建我自己的 cron 版本，它运行一个触发每个 cronjob分钟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:01:39.733

尝试将它们分组。

假设您有 10 组，每组 10 人，具体取决于您如何组织它们。

每个 cron 作业调用一个 PHP 脚本，该脚本调用 10 个其他 PHP 脚本。

如果您需要它们在不同时间运行，您可以做一个简单的检查`time()`以查看应该调用哪些脚本。

您可以使用 cURL 将它们称为其他 PHP 脚本。

不过请确保设置一个较大的脚本超时时间，否则您最终可能会遇到很多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:01:48.633

您能否在 CPanel 中创建一项将运行一个脚本的作业。

然后在该脚本中，您可以创建运行 100 个脚本的逻辑。

如果它们要在不同的时间运行，那么您可以使用`switch(time)`, 或类似的方法来管理执行。

# android - 隐藏触摸android上的操作栏

> ID：12022205
> 
> 赞同：3
> 
> 时间：2012-08-18T20:57:36.960
> 
> 标签：android, touch, hide, android-actionbar

我想隐藏我在触摸时覆盖的顶部操作栏，然后在另一次触摸时再次显示它。不知何故，我可能应该在某些东西上添加一个 onTouchListener 但如何？该事件仅应在其他处理程序未使用时处理，以便当我滑动更改图像等时我的多点触控仍然有效。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T21:23:45.573

像这样的东西应该可以工作（未经测试的代码 - 所以带上一粒盐）

基本上，重写 onTouch，并调用它的超级方法，以免失去功能。检查它是否被消耗，否则切换或显示/隐藏操作栏。

```
Boolean showBar = true; // Global variable

@Override
public boolean onTouch(View v, MotionEvent event) {
   Boolean result = super.onTouch(v,event);

   if(!result) // False - Not consumed event.
   {
       if(showBar) // Toggle action bar visiblity
          getActionBar().hide();
       else
          getActionBar().show();

       showBar = !showBar;
   }
   return result;   
} 
```

# c# - 按索引在通用列表中查找对象

> ID：12022206
> 
> 赞同：0
> 
> 时间：2012-08-18T20:57:42.093
> 
> 标签：c#, list

这是我的通用列表。我想通过根据索引查找对象来返回对象 CompanyEmail。我该怎么做呢 ？

```
 List<CompanyEmail> companyEmail = (List<CompanyEmail>)ViewState["companyEmail"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T21:01:47.630

尝试：

```
 List<Data> data = new List<Data>();
 Data temp = data[1]; 
```

在您的列表中：

```
companyEmail[index]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T21:14:30.803

为什么在索引上，您可以使用 Dictionary 类（它也是通用的）。[http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

希望我说对了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T21:01:36.393

这应该可以解决问题：

[http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx](http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx)

利用：

```
List<T>.FindIndex(Predicate) 
```

# python - django + 获取模型，最初没有在表单中验证

> ID：12022208
> 
> 赞同：1
> 
> 时间：2012-08-18T20:58:28.097
> 
> 标签：python, django, django-forms

我的 dJango 应用中有一个模型，名为`event`. 我希望用户能够克隆`event`以创建新的，而不必从头开始——并非所有信息每次都会更改。

当我这样做时，当它加载克隆事件页面时，我在一些必填字段上遇到了验证错误，因为我没有复制现有的所有信息，而`event`只是复制了一些字段。当页面首次加载（但用户尚未提交表单）时，未复制和必需的字段会引发验证错误。有没有办法使初始验证不发生？

**[编辑]**

```
Model:
    class Event(models.Model):
        class Meta:
            db_table = 'event'

        type = models.ForeignKey(EventType, default="0")
        title = models.CharField(max_length=150, default='Event')
        location = models.TextField()
        description = models.TextField(max_length=1050)
        start_time = models.DateTimeField()
        end_time = models.DateTimeField() 
```

视图和模板：

在克隆的情况下，我通过 do 获取事件`event_id`to clone from `Event.objects.get(id=event_id)`。获得对象后，我`form`通过执行设置以下值：

```
map = {
    'type': event.type.name,
    'title': event.title,
    'location': event.location,
    'description': event.description,
    'start_time': event.start_time,
    'end_time': event.end_time
}

form = EventForm(map) 
```

对象中的值`form`与模型中的值同名。在克隆的情况下，假设我`title`从地图中删除，并将其加载到表单中，当我在模板上显示表单时，它下面有一个验证错误......但是用户刚刚打开了页面...... .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:00:19.740

你可以这样做：

```
form = EventForm(initial=map) 
```

# internet-explorer - jquery ajax 成功未在 ie8,9 中调用

> ID：12022209
> 
> 赞同：1
> 
> 时间：2012-08-18T20:58:36.883
> 
> 标签：internet-explorer, jquery

下面的代码在其他浏览器中运行良好，但在 IE7+ 中却不行。我已经完成了与此类问题相关的其他解决方案，但对我没有用。

我已经添加了警报以在 IE 中对其进行测试，但它没有调用。在开发人员控制台的“网络”部分的 IE9 中，我看到了包含有效数据的响应。仍然没有调用 ajax 成功函数。不知道具体原因。

如果有人对此有任何指示/想法真的会帮助我。

提前致谢 ！！！！！

```
function callExternalWSUsingAjax(request,response){

 if ('XDomainRequest' in window && window.XDomainRequest !== null) {
   // override default jQuery transport
  $.ajaxSettings.xhr = function() {
      try { return new XDomainRequest(); }
      catch(e) { }
  };
   // also, override the support check
  $.support.cors = true;
 }
  $.ajaxSetup({
    cache: "false"
  });
  $.ajax({
            async : false,
            url: "https://externaldomain.com/services/myrestservicw/SearchCountry",
            dataType: "json",
            data: {
                    featureClass: "P",
                    style: "full",
                    name_startsWith: request.term
            },
            success: function(resp, txtS, xhr) {
            if (xhr.status==200) {      

                alert(xhr.status);   // not called in IE
            } else {
                alert('EEE'+xhr.status);
           }
        },
        error:function(XMLHttpRequest,status,error){
            alert('E : '+error + 'Status : ' + status) ;
        }
});

} 
```

# markdown - 是否有用于创建持久和连接的降价文档的在线编辑器？

> ID：12022212
> 
> 赞同：4
> 
> 时间：2012-08-18T20:59:50.787
> 
> 标签：markdown

markdown 语言有很多有用的在线编辑器。

但是，有没有可以轻松创建一堆持久化和连接的降价页面的方法？

*持久化*是指编辑器会保存您正在处理的任何文档（例如，github 的 markdown 编辑器将持久化对 git 项目的任何编辑）。

通过*connected*，我的意思是不仅应该很容易链接到其他 markdown 页面（可以只是一个链接，`[page2](page2.html)`而且还可以轻松创建要链接的新页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:09:27.700

You can create and store it at [**github:gist**](https://gist.github.com/), just give it a filename with the extension .md and it will render as markdown.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:33:19.490

我用

### [http://jottit.com](http://jottit.com)

非常基本，但可能是一个开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T21:04:34.307

我刚刚遇到了另一种可能的解决方案：

[平凡](http://helloform.com/projects/commonplace/)

> Markdown 文件的简单服务器。允许使用类似 wiki 的 Web 界面创建和编辑 Markdown 文件。

还有一个：

[WCM](http://woffs.de/Software/WCM)

> WofFS 的 Content Machine 是一个小型 perl CGI，它采用 Markdown 文件或 shell 脚本（或其他）的目录树并将其转换为可浏览的网站。

[文档库](http://appbaseio.github.io/Docbase/)

> 将 markdown 文件变成漂亮的文档中心。

# java - 为什么我可以访问 b 的值，即使它在子类中设置为私有？

> ID：12022213
> 
> 赞同：0
> 
> 时间：2012-08-18T21:00:15.760
> 
> 标签：java

```
public class A {

protected int b = 16;

}

public class B extends A{

    private int b=20;

    public static void main(String[] args)
    {
        B b = new B();
        System.out.println(b.b);
    }

} 
```

输出为 20。 引用类型 B 的对象的 b 怎么可能不能正确访问私有成员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:01:58.163

`static`类中的方法可以访问`private`包含类的所有成员。

由于您`main`是班级的一部分，`B`因此可以看到所有成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T21:02:40.200

您在 B 类中获得 b 的值。B 可以访问它自己的私有成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T21:01:12.697

你仍然可以直接从`B`类内部访问它，即使它是`private`. 由于该`main`方法位于那里，因此可以访问私有变量。

类中的变量`b`被类中`A`的变量隐藏，除非您像这样声明它，否则无法访问：`b``B`

```
A ab = new B();
System.out.println(ab.b); 
```

这将打印`16`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T21:03:27.660

`b`您正在访问上面当前类中的类成员变量`B`。B 可以访问所有它的成员变量，无论它们是如何声明的。

因为`A.b`受保护但对调用类可用，您可以通过向上转换来访问它：

```
System.out.println(((A)b).b); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T21:18:39.363

因为`main()`是`B`类的成员，所以可以访问`private`成员。

# python - 从 Python 中的字典中提取不相等的随机键

> ID：12022229
> 
> 赞同：6
> 
> 时间：2012-08-18T21:02:15.340
> 
> 标签：python, function, dictionary, python-2.7

所以我正在尝试通过 Python 设置多项选择测验。我对 Python 还很陌生，所以如果有更简单的方法可以做到这一点，我很抱歉。但是，在继续使用新技术之前，我正在尝试真正了解一些基础知识。

我有一本字典。在这本词典中，我想抓取 3 个随机键。我还想确保这三个键不相等（换句话说，彼此随机）。这是我到目前为止写的代码：

```
import random

word_drills = {'class': 'Tell Python to make a new kind of thing.',
               'object': 'Two meanings: the most basic kind of thing, and any instance of some thing.',
               'instance': 'What you get when you tell Python to create a class.',
               'def': 'How you define a function inside a class.',
               'self': 'Inside the functions in a class, self is a variable for the instance/object being accessed.',
               'inheritance': 'The concept that one class can inherit traits from another class, much like you and your parents.',
               'composition': 'The concept that a class can be composed of other classes as parts, much like how a car has wheels.',
               'attribute': 'A property classes have that are from composition and are usually variables.',
               'is-a': 'A phrase to say that something inherits from another, as in a Salmon *** Fish',
               'has-a': 'A phrase to say that something is composed of other things or has a trait, as in a Salmon *** mouth.'}

key1 = ' '
key2 = ' '
key3 = ' '             

def nodupchoice():
    while key1 == key2 == key3: 
        key1 = random.choice(word_drills.keys())
        key2 = random.choice(word_drills.keys())
        key3 = random.choice(word_drills.keys())

nodupchoice()

print "Key #1: %s, Key #2: %s, Key #3: %s" % (key1, key2, key3) 
```

我很确定问题出在我的 while 循环上。我想创建一个函数，它会一直运行直到所有三个键都不同。最后，它将打印结果。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T21:05:34.303

您可以使用`random.sample`：

```
>>> random.sample(word_drills, 3)
['has-a', 'attribute', 'instance'] 
```

而且你不需要`.keys()`，对字典的迭代是对键的。

请注意，`random.sample`它将从您提供的列表中返回三个唯一值（即它永远不会返回`'has-a'`两次）：

```
>>> all(len(set(random.sample(word_drills, 3))) == 3 for i in range(10**5))
True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T21:04:50.803

采用`random.sample`

```
>>> import random
>>> random.sample([1,2,3,4,5,6], 3)
[4, 5, 2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T21:05:46.603

可能最简单的事情是`shuffle`按键：

```
keysShuffled = list(word_drills)
random.shuffle(keysShuffled) 
```

然后取前3个

```
threeUnique = keysShuffled[:3] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T21:21:36.457

也许你想试试[Quiz Me 2.5](http://code.activestate.com/recipes/sets/33-quiz-me-25/)？它是 Python 3.x 中带有 GUI 的多项选择测验系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T21:35:03.733

正如其他人所解释的那样，[`random.sample`](http://docs.python.org/library/random.html#random.sample)这是做你想做的最好的方式。

解释为什么您的原始代码不起作用：

第一个问题，您的`while`循环存在逻辑错误 - 只要两个项目不同，它就会结束（例如`'a' == 'a' == 'b'`，为真，循环将结束），要解决这个问题，有几种方法：

```
while not (key1 != key2 != key3): 
```

或者，a`set`只能包含唯一项，因此当长度`set([key1, key2, key3])`为 3 时，所有三个值都不同：

```
while len(set([key1, key2, key3]) != 3: 
```

第二个问题，以及代码将拒绝运行的原因：

`key1` `key2` `key3`被定义为全局变量（`key1 = ' ' are at the top-level of your`.py` 文件，不在函数中）

您可以毫无问题地在函数中查找全局变量（就像您在哪里完成的那样`while key1 == key2 ...`）。发生错误是因为您还尝试在循环中*分配*to `key1`- 这会使 Python 的解析器感到困惑，因为您正在查找`while key1 == ...`部件中的全局变量，但尝试在下一行创建一个新的函数局部变量，因此它会抛出一个错误。

解决此问题的垃圾方法如下：

```
key1 = ' '
key2 = ' '
key3 = ' '             

def nodupchoice():
    global key1
    global key2
    global key3
    while not (key1 != key2 != key3):
        key1 = random.choice(word_drills.keys())
        key2 = random.choice(word_drills.keys())
        key3 = random.choice(word_drills.keys()) 
```

然后它将按您的预期工作，但不要那样做 - 全局变量[有它们的用途](https://stackoverflow.com/questions/146557/do-you-use-the-global-statement-in-python)，但这不是这种情况..

您可以轻松地从函数返回多个值，而不是使用全局变量：

```
def nodupchoice():
    key1 = ' ' # local variables, which are inaccessible outside this function
    key2 = ' '
    key3 = ' '

    while not (key1 != key2 != key3):
        key1 = random.choice(word_drills.keys())
        key2 = random.choice(word_drills.keys())
        key3 = random.choice(word_drills.keys())

    return key1, key2, key3

key1, key2, key3 = nodupchoice()

print "Key #1: %s, Key #2: %s, Key #3: %s" % (key1, key2, key3) 
```

哦，甚至更好的是，您可以传入`word_drills`作为参数：

```
def nodupchoice(things):
    key1 = ' ' # local variables, which are inaccessible outside this function
    key2 = ' '
    key3 = ' '

    while not (key1 != key2 != key3):
        key1 = random.choice(things)
        key2 = random.choice(things)
        key3 = random.choice(things)

    return key1, key2, key3

key1, key2, key3 = nodupchoice(word_drills) 
```

...并且您编写的函数几乎与`random.sample(word_drills, 3)`!

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-09-27T15:13:03.573

我遇到了同样的问题并写了[https://github.com/robtandy/randomdict](https://github.com/robtandy/randomdict)来解决它。也许它也会帮助你。

它提供了一个 python dict 对象，但带有附加方法，random_key、random_value 和 random_item。所有这些都具有 O(1) 的运行时间复杂度。

# extjs - 立即加载 TreeStore。外接程序 4

> ID：12022232
> 
> 赞同：4
> 
> 时间：2012-08-18T21:02:40.513
> 
> 标签：extjs, tree

我的问题是：如何一次加载 TreeStore？因为现在，如果我使用代理，在渲染后获取 Tree，当我展开叶子时，还有一个带有 GET 参数的请求`'node'`- 叶节点的 id。所以我需要用这片叶子的树来回应。但我想一次加载所有树并且不再请求该树。

现在我有以下代码：

```
 Ext.define('AdminPanel.TreeNavigation', {              
        extend: 'Ext.data.Model',  
        fields: ['id', 'text', 'leaf', 'children']  
    });

    var store = Ext.create('Ext.data.TreeStore', {

                    model: 'AdminPanel.TreeNavigation',  

                    proxy: {  
                        type: 'ajax',
                        url : 'admin/getTreeNav',
                        reader: {
                            type: 'json',
                            root: 'result'
                        }
                    },

                    root: {
                        expanded: true
                    }

                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:06:39.390

在商店中，我将阅读器根设置为“结果”。

但是在 json_data 我已经发送了 'children' 属性，如下所示：

```
{
    "result": [{
        "text": "\u041d\u043e\u0432\u043e\u0441\u0442\u0438",
        "leaf": true,
        "children": []
    }, {
        "text": "\u0410\u043a\u0446\u0438\u0438",
        "leaf": true,
        "children": []
    }, {
        "text": "\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",
        "leaf": true,
        "children": []
    }, {
        "id": "lang",
        "text": "\u042f\u0437\u044b\u043a",
        "leaf": false,
        "children": [{
            "text": "\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b",
            "leaf": true,
            "children": []
        }]
    }]
} 
```

但需要这样：

```
{
    "result": [{
        "text": "\u041d\u043e\u0432\u043e\u0441\u0442\u0438",
        "leaf": true,
        "result": []
    }, {
        "text": "\u0410\u043a\u0446\u0438\u0438",
        "leaf": true,
        "result": []
    }, {
        "text": "\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",
        "leaf": true,
        "result": []
    }, {
        "id": "lang",
        "text": "\u042f\u0437\u044b\u043a",
        "leaf": false,
        "result": [{
            "text": "\u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b",
            "leaf": true,
            "result": []
        }]
    }]
} 
```

因此，Tree 将在 TreePanel 中加载所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:31:21.017

您需要从服务器以递归方式发送子节点。您不需要模型上的叶子和子属性，因为模型将自动使用具有这些和更多属性的 NodeInterface 类进行包装（请参阅 API 以获取完整的属性列表）

# .net - 如何使用asp .net web api、实体框架和json（代码优先）往返一个有关系的对象？

> ID：12022233
> 
> 赞同：4
> 
> 时间：2012-08-18T21:02:51.190
> 
> 标签：.net, asp.net-mvc, json, entity-framework, code-first

使用 .NET 客户端应用程序，我试图通过 asp .net web api JSON 发布一个包含对象 B 集合的对象 A，创建一个 LocalDB 数据库并存储数据。然后再次获取对象 A。

该应用程序包括 3 个项目。一个 asp .net mvc 4 web api 项目、一个 .Net 控制台应用程序和一个 .Net 类库。asp .net 应用程序和控制台应用程序都引用了类库，其中包括对象 A 和 B 的类定义。

类库：

```
public class Actor
{
    public Actor()
    {
        this.Movies = new HashSet<Movie>();
    }

    public int ActorID { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Movie> Movies { get; set; }
}

public class Movie
{
    public Movie()
    {
        this.Actors = new HashSet<Actor>();
    }

    public int MovieID { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Actor> Actors { get; set; }
} 
```

控制台应用程序：

```
Movie movie = new Movie()
{
    Name = "Dr. No"
};

Actor actor = new Actor()
{
    Name = "Sean Connery"
};

movie.Actors.Add(actor);

using (HttpClient client = new HttpClient())
{
    client.BaseAddress = new Uri("http://localhost:3654");
    client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

    var response = client.PostAsJsonAsync<Movie>("api/movies", movie).Result;
    response.EnsureSuccessStatusCode();

    response = client.GetAsync("api/movies/1").Result;
    response.EnsureSuccessStatusCode();

    Movie newMovie = response.Content.ReadAsAsync<Movie>().Result;
} 
```

asp .net mvc DbContext：

```
public class MediaContext : DbContext
{
    public MediaContext()
    {
        this.Configuration.LazyLoadingEnabled = false;
    }

    public DbSet<Movie> Movies { get; set; }
    public DbSet<Actor> Actors { get; set; }
} 
```

**问题 #1：**似乎 JSON 不喜欢循环引用，但是如果我不将集合添加到两个对象，EF5 不会创建 MoviesActors 表来保存引用。

**问题 #2：**即使我在控制器中添加了引用，当我返回该对象时，它也不会与 Actors 一起返回它。例如，我期望像

```
Movie
{
   MovieID = "1",
   Name = "???",
   Actors[] = { 1 }
} 
```

但相反，Actors 只是空值。

**更新**：这是自引用异常：

ExceptionMessage=检测到类型为“System.Data.Entity.DynamicProxies.Movie_157D88BDC89E46A7CE4875C2970C7BBFB893972095EFA0745C2261AACC007969”的自引用循环。路径'[0].Actors[0].Movies'。

我设法使用[如何解决 Json 序列化循环引用错误中的方法解决此异常？](https://stackoverflow.com/questions/4754375/how-did-i-solve-the-json-serializing-circular-reference-error)并且只是禁用代理。这解决了问题 #1。但是，当我得到电影时，即使使用 Include("Actors")，它们仍然没有任何 Actor。我可以看到引用已在 LocalDb 的中间表中正确创建。

**更新 2**

终于想通了，下面回答。

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T03:51:49.953

经过大量搜索，我终于能够解决我的问题。最初我尝试将 [ScriptIgnore] 标记添加到电影集，但是我使用的是 EF5 final，它将默认序列化程序更改为 JSON .NET。我终于发现 [ScriptIgnore] 不起作用，我不得不像这样设置 [JsonIgnore]：

```
public class Actor
{
    public int ActorID { get; set; }
    public string Name { get; set; }

    [JsonIgnore]
    public virtual ICollection<Movie> Movies { get; set; }
}

public class Movie
{
    public int MovieID { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Actor> Actors { get; set; }
} 
```

这样做与 Get 方法中的 .Include("Actors") 急切加载相结合，最终解决了我的问题。

总之，我需要：

1.  在两个对象上都有虚拟 ICollection 引用以创建中间表。
2.  将 [JsonIgnore] 添加到 Movies 集合引用以解决循环引用。
3.  关闭代理以解决我的 500 错误。
4.  使用 .Include("Actors") 急切地在 GetMovies/GetMovie 方法中加载 Actor

此外，我发现对于 Movie 对象的后续 PUT，其中 Actors 集合已更改，我必须手动将每个子 Actor 上的 RelationShip 状态更改为已添加/已删除，以确保相关集合已更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:00:46.583

关于您的评论：

> 此外，我很乐意`public virtual ICollection<Movie> Movies { get; set; }`从 Actor 类中删除 ，但是这样做，EF 并没有在 LocalDb 中生成中间表。

如果您删除其中一个集合 EF 按照惯例假定您的关系是一对多关系（它没有中间表，但其中一个表中只有一个外键）与具有两个的模型相反EF 创建多对多关系（具有中间表）的集合。

但是，您可以使用 Fluent API 覆盖此约定，并明确告诉 EF 剩余集合属于多对多关系而不是一对多关系。有了这个模型...

```
public class Actor
{
    //...
    public int ActorID { get; set; }
    public string Name { get; set; }
}

public class Movie
{
    //...
    public int MovieID { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Actor> Actors { get; set; }
} 
```

...您可以通过这种方式定义多对多关系：

```
public class MediaContext : DbContext
{
    //...
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Movie>()
            .HasMany(m => m.Actors)
            .WithMany()
            .Map(a =>
            {
                a.MapLeftKey("MovieID");
                a.MapRightKey("ActorID");
                a.ToTable("MovieActors"); // intermediate table
            });
    }
} 
```

# azure - 访问 Hadoop 的原始数据

> ID：12022237
> 
> 赞同：0
> 
> 时间：2012-08-18T21:03:53.603
> 
> 标签：azure, hadoop-streaming

我正在查看 data.seattle.gov 数据集，我想知道如何将所有这些大型原始数据发送到 hadoop 集群。我在 azure 上使用 hadoop。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:58:25.943

在 Windows Azure 中，您可以将数据集（非结构化数据等）放在 Windows Azure 存储中，然后从 Hadoop 集群访问它

查看博客文章：Windows Azure 上的 Apache Hadoop：从 Hadoop 集群连接到 Windows Azure 存储：

[http://blogs.msdn.com/b/avkashchauhan/archive/2012/01/05/apache-hadoop-on-windows-azure-connecting-to-windows-azure-storage-your-hadoop-cluster.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2012/01/05/apache-hadoop-on-windows-azure-connecting-to-windows-azure-storage-your-hadoop-cluster.aspx)

您还可以从 Azure 市场获取数据，例如政府数据集等。

[http://social.technet.microsoft.com/wiki/contents/articles/6857.how-to-import-data-to-hadoop-on-windows-azure-from-windows-azure-marketplace.aspx](http://social.technet.microsoft.com/wiki/contents/articles/6857.how-to-import-data-to-hadoop-on-windows-azure-from-windows-azure-marketplace.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:42:27.410

看起来 data.seattle.gov 是一个独立的数据服务，而不是建立在公共云之上。他们有自己的 Restful API 用于数据访问。
其中我认为最简单的方法是将感兴趣的数据下载到您的 hadoop 集群或 S3，然后在 Amazon EC2 上使用 EMR 或自己的集群。
如果他们（data.seattle.gov）具有相关的查询功能，您可以从您的 hadoop 集群中按需查询数据，并将数据引用作为输入。仅当您在这些查询中进行非常严重的数据减少时，它才可能起作用 - 否则网络带宽将限制性能。

# objective-c - 自定义 UITableViewCell 无法正确绘制

> ID：12022239
> 
> 赞同：0
> 
> 时间：2012-08-18T21:04:03.220
> 
> 标签：objective-c, ios, interface-builder

我的自定义 UITableViewCell 遇到了一个非常奇怪的问题。我在 Interface Builder 中有一个标识符为“ThreadCell”的单元格，并带有一些自定义标签。这些标签被标记，所以我可以访问它们。

在我的代码中，我正在执行以下操作：

```
static NSString *CellIdentifier = @"ThreadCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if(cell == nil){
    cell = [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault reuseIdentifier: @"ThreadCell"];
}

Person *person = [self.people objectAtIndex: indexPath.row];
UILabel *nameLabel = (UILabel *)[cell viewWithTag: 0];
nameLabel.text = person.nickname;

return cell; 
```

这似乎工作正常，有一个例外。TableView 绘制如下：

![细胞](../Images/1bd118c66dc0bc1f25132f70b9dcdbce.png)

这显然不是我的自定义单元格。但奇怪的是，当我*点击*一个单元格时，我得到了这个：

![细胞](../Images/b211bba9f73c2d0f4f957753bf746e9e.png)

这*是*我的自定义单元格，绘制在默认单元格*后面。**什么？！*我不确定这是怎么发生的，因为我从来没有在任何地方设置 textview 的标题，所以我不确定第一个 John Smith 来自哪里。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:06:15.140

在您的代码中，您分配一个普通的`UITableViewCell`而不是自定义单元格的实例。设置`reuseIdentifier`in`initWithStyle`不足以加载自定义单元类的实例。

如果您为 iOS 5 及更高版本开发，则可以使用`registerNib:forCellReuseIdentifier:`注册包含自定义单元格的 NIB 文件。`dequeueReusableCellWithIdentifier:`然后将始终返回该 NIB 的实例。

# vb.net - 服务器监听

> ID：12022240
> 
> 赞同：0
> 
> 时间：2012-08-18T21:04:05.927
> 
> 标签：vb.net, login, client, ip, broadcast

**我正在使用 VB.NET**

所以我有一个每秒广播它自己的IP的服务器

```
Private Sub IPBroadcastTimer_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles IPBroadcastTimer.Tick
        BroadcastIP()
End Sub 
```

我是否必须每秒播放一次，以便客户在几分钟或几小时后接收？

如果是这样，我将如何设置服务器来监听登录？

以下是客户端和服务器端发生的情况：

服务器：**“每秒广播 IP”** > **“侦听传入传输”** > **“接收 3 个字符串*[用户名/密码/IP]* ”** > **“检查本地 XML 文件上的用户名和密码有效性”** > **“向目标 IP 发送确认或拒绝”**

客户端：**“监听服务器广播”** > **“接收服务器 IP”** > **“通过表单发送 3 个字符串：用户名、密码和本地 IP”** > **“监听服务器的确认或拒绝”**

我用它来发送，但听似乎不起作用......

```
Public EndPoint As New IPEndPoint(IPAddress.Parse("255.255.255.255"), 1001) ''Send destination port
Public EndPoint2 As New IPEndPoint(IPAddress.Any, 2001) ''Receive destination port
Public UserIPEndPoint As New IPEndPoint(IPAddress.Any, 2001)
Public UsernameEndPoint As New IPEndPoint(IPAddress.Any, 2001)
Public PassEndPoint As New IPEndPoint(IPAddress.Any, 2001)

Public Send As New UdpClient(2001) ''Send source port
Public Receive As New UdpClient(1001) '' Receive source port 
```

发送：

```
Send.Send(IPInBytes, IPInBytes.Length, EndPoint) 
```

接收：

```
Receive.Receive(UserIPEndPoint) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:21:55.973

广播的目的是什么？如果是让消费者检测服务，也许最好依赖已经开发的协议（例如[Bonjour](http://en.wikipedia.org/wiki/Bonjour_%28software%29)或[SSDP](http://en.wikipedia.org/wiki/Simple_Service_Discovery_Protocol)）。至少就像在 SSDP 中一样，消费者可以广播一个问题（“有人在吗？”），服务可以回答该问题。服务也可以自发地广播它们的存在，例如当它们启动时，以便持续检测的消费者可以找到它们。

# git - 将 CVS 存储库镜像到 git 存储库

> ID：12022242
> 
> 赞同：1
> 
> 时间：2012-08-18T21:04:22.230
> 
> 标签：git, cvs

我四处搜索，但我不明白什么是最好的方法：我想克隆一个现有的 CVS 存储库（特别是 OpenSSH 可移植），或者它的修订版（例如 v6.0p1）到一个 git repo ，用于应用个人补丁。每当发布另一个稳定的 OpenSSH 时，我还想合并更改。它不必是实时的或任何特殊的，只要能够将我的补丁合并到新版本即可。

我以前有 git（和 SVN 经验），但没有 CVS 经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:46:15.673

您有两个选择：维护供应商分支或使用`git cvsimport`. 您使用哪种取决于您想要多少历史记录以及您的耐心程度。

如果您想要完整的历史记录并且有耐心，您可以使用`git cvsimport`. 如果你幸运的话，你可能会发现其他人已经这样做了并且正在保持最新的结果——如果你信任他们，使用他们的 repo 是最好的选择。

如果您不需要完整的历史记录或不耐烦，您可以维护一个供应商分支：这是我们在拥有 DVCS 之前所做的 :)。获取当前版本的副本，将其放在一个名为“vendor”的分支中，并以此为基础进行工作。当下一个版本发布时，切换回供应商分支，更新它以匹配新版本并酌情合并/重新设置基准。

请注意，虽然在使用 DVCS 时不需要供应商分支，但在 git 中它们实际上比在 Subversion 中要容易得多，因为 git 不需要您识别重命名并且（与现在的 svn 一样）不会离开 meta -当您解压最新版本时，您的工作副本中的所有数据都会受到冲击。

# php - Pay Pal Listener 不运行数据库事务

> ID：12022243
> 
> 赞同：0
> 
> 时间：2012-08-18T21:04:41.707
> 
> 标签：php, mysql, paypal, paypal-ipn

我有一个 PayPal 监听器，它从 PayPal 获取`HTTP POST`请求（或者 PayPal 文档似乎表明这是他们发送的内容），监听器发回信息以供 PayPal 验证，然后如果信息得到验证，它会执行数据库事务。这是正常的 PayPal IPN 流程，验证部分工作正常。

我从 PayPal 获得的数组中的值之一`POST`是我通过它来跟踪交易号的东西。所以我打了一个看起来像这样的电话：（不是实际代码；我完全了解[SQL 注入](http://www.bobby-tables.com/)）

```
UPDATE transactions SET status='paid' WHERE id=$_POST['invoice'] 
```

**问题：**如果我通过将带有一些输入的表单指向我的侦听器来伪造输入，一切正常，但如果我从 PayPal 获得一个真正的 POST 数组，则数据库不会运行。我知道`$_POST['invoice']`当我获得真实的 PayPal 数据时设置了变量，我已经测试过了，它有一个有效的值，比如 84，所以我不知道为什么我的交易没有执行。事务上方和下方的行都执行。

也许我将不得不发布我的实际代码，但是是否有可能以某种方式配置 PHP，使其在收到来自 PayPal 的请求时不会运行交易？就像我说的，我认为 PayPal 正在发送一个`HTTP POST`请求，所以它应该与我的假表格无法区分，但有些地方出了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T03:21:46.067

可能您的表单输入看起来与实际的 IPN 不同。

PayPal 的 IPN 可以包含数组，当从 $_POST 变量中读取时，php 不能很好地处理这些数组。这可能会使您的处理程序绊倒（在这种情况下，您将需要读取和操作原始数据）。

如果可能，请尝试读取原始传入数据并与您的模拟数据进行比较，正如其他人所建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:37:01.057

通知 URL 设置为指向开发数据库中的侦听器。所以我收到的电子邮件表明 POST['invoice'] 变量已设置，但所有事务都在开发数据库上运行

# jquery - 如何在 Rails 中安装和使用 jQuery 插件？

> ID：12022247
> 
> 赞同：0
> 
> 时间：2012-08-18T21:04:54.687
> 
> 标签：jquery, ruby-on-rails

我在 ThemeForest 上购买了一个使用大量 jQuery 插件（easytabs、datepicker 等）的主题。我试图让它们在我的 Rails 应用程序中工作。他们都没有。这是我认为我需要做的才能让他们工作：

1) 将 jQuery 插件复制到 vendor/assets/javascripts 文件夹
2) 在 application.js 文件中需要它
3) 在 [view].js.coffee 文件中调用它 - 在我的情况下为 contacts.js.coffee
4) 放将所需的 HTML 放入 [view].html.erb 文件（没有 javascript 等，只需将适当的 ID 等插入 jQuery 插件将要操作的部分

我显然错过了一些东西，因为它们都不起作用。我使用的唯一 jQuery 插件是 DataTables 插件，但我为它遵循了 RailsCast，并使用它的 gem 安装了它。RailsCast 提到，“幸运的是，这有一个宝石，否则我们必须检查并修复损坏的图像链接......”

我是 Rails / Web 开发的新手，我已经在这堵墙上敲了几天，所以我不想盲目地开始更新 jQuery 文件中的链接。

我应该如何解决这个问题？

这是我（大部分）剪切和粘贴的代码：

来自 Application.js：

```
 WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require dataTables/jquery.dataTables
//= require plugins/ui/jquery.easytabs.min
//= require_tree . 
```

来自 properties.js.coffee：

```
# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/
jQuery ->
  $('#properties').dataTable
    sPaginationType: "full_numbers"
    bProcessing: true
    bServerSide: true
    sAjaxSource: $('#properties').data('source')
  $('#tab-container').easytabs
    animationSpeed: 300,
    collapsible: false,
    tabActiveClass: "clicked" 
```

来自 index.html.erb 的属性：

```
<!-- Tabs -->
        <div class="fluid">
            <div class="widget grid6">       
                <ul class="tabs">
                    <li><a href="#tabb1">Tab active</a></li>
                    <li><a href="#tabb2">Tab inactive</a></li>
                </ul>

                <div class="tab_container">
                    <div id="tabb1" class="tab_content">
                        Tab is active and has left tabs             
                    </div>
                    <div id="tabb2" class="tab_content"> This tab is active now</div>
                </div>  
                <div class="clear"></div>        
            </div>

            <div class="widget grid6 rightTabs">       
                <ul class="tabs">
                    <li><a href="#tabb3">Tab active</a></li>
                    <li><a href="#tabb4">Tab inactive</a></li>
                </ul>
                <div class="tab_container">
                    <div id="tabb3" class="tab_content">
                        Tab is active and has right tabs               
                    </div>
                    <div id="tabb4" class="tab_content"> This tab is active now</div>
                </div>  
                <div class="clear"></div>        
            </div>
        </div> 
```

这是我的 github 帐户，如果你真的想看看我所做的一切，尽其荣耀 [https://github.com/jonlehman/REAPP](https://github.com/jonlehman/REAPP)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:17:57.000

在你的咖啡脚本中你写

```
$('#tab-container').easytabs 
```

然而在您的 html 中没有带有 id 的元素`tab-container`，但您确实使用了一个名为`tab_container`（注意下划线）的类，所以您的咖啡脚本应该是

```
$('.tab_container').easytabs 
```

希望这可以帮助。

# python - 对分算法的复杂度是多少？

> ID：12022249
> 
> 赞同：11
> 
> 时间：2012-08-18T21:05:31.643
> 
> 标签：python, list, search, complexity-theory, bisect

我编写了代码来了解在搜索列表中的元素时哪个更快。原来是平分的。我不明白二分算法的复杂性是什么，它是否使用 Van Emde Boas 树？

```
#python inbuilt list search using 'in' took 0.0702499200317 secs

def mul3():
    a = [1, 2, 4, 5, 6, 7, 8, 10, 12, 42, 55, 65, 69, 95, 96, 101, 156, 199]
    for x in a:
        if x in a:
            print x, "True"
        else:
            print x, "False"

#using bisect took 0.0649611193601

def mul4():
    a = [1, 2, 4, 5, 6, 7, 8, 10, 12, 42, 55, 65, 69, 95, 96, 101, 156, 199]
    import bisect
    for x in a:
        locate = bisect.bisect_left(a, x)
        if locate == len(a) or a[locate] != x:
            print False
        print True

 #using binary search took 0.0651483638284

a = [1, 2, 4, 5, 6, 7, 8, 10, 12, 42, 55, 65, 69, 95, 96, 101, 156, 199]

for x in a:
    lo = 0
    hi = 18
    while lo < hi:
        mid = (lo+hi)//2
        midval = a[mid]
        if midval < x:
            lo = mid+1
        elif midval > x:
            hi = mid
        else:
            print True
            lo = hi 
```

参考： [http ://docs.python.org/library/bisect.html](http://docs.python.org/library/bisect.html)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-18T21:08:44.390

它使用二进制搜索，这使得它 O(log n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:09:58.240

有二分搜索，对。**O(Ln(n))**就是答案。

但是，您的列表不足以测试所有案例。所有算法可能需要**不同的执行时间**，但你必须在所有情况下测试这些。如果您使用足够多的列表进行测试，您将获得*正确的结果*。

我希望你被说服。

# android - 创建自定义垂直搜索栏，android

> ID：12022252
> 
> 赞同：0
> 
> 时间：2012-08-18T21:05:34.000
> 
> 标签：android, android-widget, android-ui

在我的应用程序中，我需要一个垂直搜索栏，如下所示： ![垂直搜索栏](../Images/46cdbe400b2a6ba83799de61a983dc85.png)

我不知道如何修改android的默认搜索栏看起来像这样！我也不知道任何提供这种搜索栏的外部第三方库..

有什么办法可以得到这个！

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:09:28.250

你不修改它......你创建自己的视图：

```
package android.widget;

import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.view.MotionEvent;

public class VerticalSeekBar extends SeekBar {

    public VerticalSeekBar(Context context) {
        super(context);
    }

    public VerticalSeekBar(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public VerticalSeekBar(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(h, w, oldh, oldw);
    }

    @Override
    protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(heightMeasureSpec, widthMeasureSpec);
        setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
    }

    protected void onDraw(Canvas c) {
        c.rotate(-90);
        c.translate(-getHeight(), 0);

        super.onDraw(c);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (!isEnabled()) {
            return false;
        }

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_UP:
                setProgress(getMax() - (int) (getMax() * event.getY() / getHeight()));
                onSizeChanged(getWidth(), getHeight(), 0, 0);
                break;

            case MotionEvent.ACTION_CANCEL:
                break;
        }
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:29:46.397

如果您希望在移动搜索栏时突出显示背景，您可以通过覆盖 onTouchEvent 来捕获 MotionEvent，并对布局的背景颜色/图像执行任何您想要的操作。顺便说一句，您能否更好地解释“我想要一个搜索栏，其中在移动搜索栏时也会突出显示部分宽度”的意思？

# javascript - Javascript动态链接问题？

> ID：12022259
> 
> 赞同：1
> 
> 时间：2012-08-18T21:06:03.743
> 
> 标签：javascript

可能存在重复（我尝试检查有关创建动态链接的问题，但它们引用了静态链接 - 我希望对用户隐藏此链接）。在 ww3 网站上测试以下代码：

```
<!DOCTYPE html>
<html>
<body>

<script type="text/javascript">
document.write("<a href=&quot;www.google.com&quot;>Google</a>");
</script>

</body>
</html> 
```

我得到：

```
 http://www.w3schools.com/jsref/%22www.google.com%22 
```

作为链接地址而不是 www.google.com。

我该如何纠正这个问题？以及如何使链接仅在设定的时间后出现？请注意，这是代码的简化版本以提高可读性（动态链接将包括在脚本运行时分配的两个浮点变量）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T21:08:43.243

`<a>`标签`href`必须包含协议`http://`，否则它会链接到相对于链接所在页面的文档：

```
// Print quote literals, not html entities `&quot;`
document.write("<a href='http://www.google.com'>Google</a>"); 
```

的用例`document.write()`通常是有限的，因为它在页面加载后无法使用而不覆盖整个内容。很多时候你会想要在页面已经渲染之后创建元素。在这种情况下，您将使用`document.createElement()`and `appendChild()`。

```
// Create the node...
var newlink = document.createElement('a');
newlink.href = 'http://www.google.com';
// Set the link's text:
newlink.innerText = "Google";

// And add it to the appropriate place in the DOM
// This just sticks it onto the <body>
// You might, for example, instead select a specific <span> or <div>
// by its id with document.getElementById()
document.body.appendChild(newlink); 
```

顺便说一句，w3schools 不隶属于[W3C](http://www.w3.org/)，因此通常不推荐使用它们的示例，因为它们通常已过时或不完整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T21:10:23.653

你有2个问题：

1）您需要`http://`在 URL 之前，所以它是：[http](http://www.google.com) ://www.google.com 2）您不需要在 document.write 中使用引号，但如果您愿意，您可以执行以下 3 项之一：

```
document.write('<a href="http://www.google.com">Google</a>');
document.write("<a href='http://www.google.com'>Google</a>");
document.write("<a href=http://www.google.com>Google</a>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T21:08:43.857

使用斜杠“\”转义引号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T21:09:34.070

要使链接成为绝对链接，请在 URL 的开头包含“http://”。写出：

```
<a href="http://www.google.com"> 
```

代替

```
<a href="www.google.com"> 
```

第二个示例将被视为相对 url，`index.html`例如。

# actionscript-3 - Flash AS3游戏中的一些错误，经过大量的努力和帮助，几乎完成了

> ID：12022261
> 
> 赞同：0
> 
> 时间：2012-08-18T21:06:24.210
> 
> 标签：actionscript-3, flash, error-handling

首先，我真的要感谢你到目前为止给我的所有帮助，因为我对 AS3 一无所知（只有基本的 gotoAnd 东西）我来到 Stackoverflow 搜索一些已经制作的代码，但我受到一些成员的鼓励自己编写代码，现在已经过去了将近 2 周，感谢很多伟大的人，我的足球点球比赛快结束了，我真的很喜欢这个地方。

我知道我必须处理一些碰撞和其他问题，因为目前游戏并不是最好的（记住我只是一个新手），但不幸的是，在一遍又一遍地检查游戏功能时，我发现了以下内容：

1-当你得到3失败时，游戏结束并且在一些动画之后出现一个再次播放按钮，你点击它，一切似乎都很好，但是当你第二次继续播放时你达到3失败，当你点击按钮出现一个新的光标？？？请帮助 2-我尝试了数百万次以使球快速移动并为其轨迹设置动画但无法实现，对此的任何帮助将不胜感激。我有速度变量和重力，但我不知道如何使用它们

3- 我收到与 removeChild 相关的 actionscript 错误，我多次尝试删除一些行，但无法修复。

4-我使用了太多的计时器，我不知道这是否值得推荐。

这是 .fla 文件[https://rapidshare.com/files/1702748636/kicks.fla](https://rapidshare.com/files/1702748636/kicks.fla)以防万一有人想尝试游戏（这真的很简单，因为这是我的第一个 AS 项目）并想帮助我代码并帮助我改进游戏，如果有人不需要进入文件，这里是代码（我知道这个地方到处都是非常聪明的人），一旦我完成它我知道我将能够做很多事情AS3 的东西。

* * *

```
 var score:Number;
  var angle:Number;
  var speed:Number;
  var cursor:MovieClip;
  var failed:Number;
  var ballRotation:Boolean = false;
  function initializeGame( ):void
  { 

        ball.x = 296.35;
        ball.y = 353.35;
score=0;
failed=0;
cursor = new Cursor();

addChild(cursor);
cursor.enabled = true;
Mouse.hide();
stage.addEventListener(MouseEvent.MOUSE_MOVE, dragCursor);
stage.addEventListener(MouseEvent.CLICK, kick);
  }

  function dragCursor(event:MouseEvent):void
  {
cursor.x = this.mouseX;
cursor.y = this.mouseY;
  }

  initializeGame();
  var mouse = this.Mouse;

  function kick(evt:Event)
  {
    removeChild(cursor);

pateador_mc.play();

var timer:Timer = new Timer(500,1);
timer.addEventListener(TimerEvent.TIMER, delayedAction);
timer.start();
function delayedAction(e:TimerEvent)
{
    moveBall();
}
  }
  speed=-100000;
  var ease:int = 100;
  var gravity:Number = 0.5;
  function moveBall()
  { 
var targetX:Number = mouseX;
var targetY:Number = mouseY;
var angle = Math.atan2(targetY,targetX);
ball.x =  mouseX + Math.cos(angle);
ball.y =  mouseY + Math.sin(angle) ;
ballRotation = true;
stage.removeEventListener(MouseEvent.CLICK, kick);

if (ballRotation==true)
{

  keeper.gotoAndStop(1 + Math.floor(Math.random() * keeper.totalFrames));
  ball.play();

}

   if (ball.hitTestObject ( keeper)){
      ball.y=keeper.x-ball.height- ball.width;
    trace ("Tomela");

}

if   (ball.hitTestObject(goalie) && ball.y>69 /*&& ball.y<178 && ball.X>139 && ball.x<466*/)
{

    gol_mc.play();
    score ++;
    showScore();
    var timer3:Timer = new Timer(3000,1);
    timer3.addEventListener(TimerEvent.TIMER, delayedAction3);
    timer3.start();
    function delayedAction3(e:TimerEvent)
    {
        ball.x = 296.35;
        ball.y = 353.35;
        stage.addEventListener(MouseEvent.CLICK, kick);
            stage.addEventListener(MouseEvent.MOUSE_MOVE, dragCursor);
                addChild(cursor);
                keeper.gotoAndStop(1);

    }

}

else
{ 
    fails_mc.play();
     failed++;
    var timer2:Timer = new Timer(3000,1);
    timer2.addEventListener(TimerEvent.TIMER, delayedAction2);
    timer2.start();
    function delayedAction2(e:TimerEvent)
    {
        ball.x = 296.35;
        ball.y = 353.35;
            stage.addEventListener(MouseEvent.MOUSE_MOVE, dragCursor);
            stage.addEventListener(MouseEvent.CLICK, kick);
            addChild(cursor);
            keeper.gotoAndStop(1);

    }

    trace(failed);

   if (failed==3) {
       gameFinished();

       trace("YOU LOST");

       }
}
  function showScore():void{
goles_txt.text ="" +score;

}
  trace (score);

    function gameFinished(){
 gameOver.play ();
 stage.removeEventListener(MouseEvent.CLICK, kick);
 stage.addEventListener(MouseEvent.MOUSE_MOVE, dragCursor);
   timer2.stop();
           Mouse.show();

            this.mouseX=cursor.x ;
             this.mouseY=cursor.y;

           again_btn.addEventListener(MouseEvent.MOUSE_DOWN, playAgain);

  }

  function playAgain():void{
        gameOver.gotoAndPlay(31);
        fails_mc.gotoAndStop(1);
        keeper.play();

var timer4:Timer = new Timer(1000,1);
    timer4.addEventListener(TimerEvent.TIMER, delayedAction3);
    timer4.start();
    function delayedAction3(e:TimerEvent)
    {
    initializeGame();

}
  }

  } 
```

* * *

我真的很感激你们，我保证我不会再打扰很长时间了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:42:15.517

1/3。
问题 1 和 3 是同一个问题。看起来您每次点击都试图从舞台上删除光标（removeChild）（因此在第一次点击后它会出错，因为它不再是任何东西的孩子）。您将其添加回您的延迟Action2 上，除非您的命中测试为真并且仅在 3 秒后才会运行。在初始化游戏时，您会创建一个全新的光标并将其添加到舞台上，这就是为什么您在第一场游戏后会得到一个副本。

而不是 removeChild 光标，最好将它的可见性设置为 false/true 并且只创建一次。

1.  为此，您需要使用 EnterFrame 处理程序、计时器或补间。我可以稍后发布一个示例。

2.  我不明白你为什么要使用计时器或需要延迟你的功能，除了可能为踢动画留出时间？

您的代码非常杂乱无章，将函数命名为“delayedAction”之类的东西很糟糕，因为它并没有真正告诉您有关函数用途的任何信息。您在其他功能中也有太多功能。这是我所做的代码的**快速重构，希望能教一些东西。**我还为球动画添加了补间。

```
import flash.events.Event;
import fl.transitions.Tween;
import fl.transitions.TweenEvent;

var score:Number;
var cursor:MovieClip;
var failed:Number;
var ballRotation:Boolean = false;

var ballTweenX:Tween;
var ballTweenY:Tween;

var targetCursor = new Cursor(); //only want one of these and you want it to exist the whole time so keep out here.

addChild(targetCursor);

initializeGame();

function initializeGame( ):void
{ 
    stage.addEventListener(MouseEvent.MOUSE_MOVE, dragCursor);
    stage.addEventListener(MouseEvent.CLICK, kick);

    ball.x = 296.35;
    ball.y = 353.35;
    score=0;
    failed=0;

    targetCursor.visible = true;
    Mouse.hide();
}

function dragCursor(event:MouseEvent):void
{
    targetCursor.x = this.mouseX;
    targetCursor.y = this.mouseY;
}

function kick(evt:Event)
{
    //removeChild(targetCursor); 
    targetCursor.visible = false; 
    pateador_mc.play();

    stage.removeEventListener(MouseEvent.CLICK, kick); //move this here, because you don't the option kick again while already kicking
    stage.removeEventListener(MouseEvent.MOUSE_MOVE, dragCursor); //added this, you probably don't want the target moving after the click...
    setTimeout(moveBall, 500);//cleaner and more efficient than using a timer for a one time delayed call.
}

function moveBall()
{ 
    var targetX:Number = mouseX;
    var targetY:Number = mouseY;
    var angle = Math.atan2(targetY,targetX);

    targetX =  mouseX + Math.cos(angle);
    targetY =  mouseY + Math.sin(angle) ;

    ballRotation = true;

    ballTweenX = new Tween(ball, "x", null, ball.x, targetX, .3, true);
    ballTweenY = new Tween(ball, "y", null, ball.y, targetY, .3, true);

    ballTweenY.addEventListener(TweenEvent.MOTION_FINISH, ballTweenDone,false,0,true);

    if (ballRotation==true)
    {
        keeper.gotoAndStop(1 + Math.floor(Math.random() * keeper.totalFrames));
        ball.play();
    }
}

function stopBallTween():void {
    ballTweenX.stop();
    ballTweenY.stop();
}

function ballTweenDone(e:TweenEvent):void {
    if (ball.hitTestObject ( keeper)){
        ball.y=keeper.x-ball.height- ball.width;
        trace ("Tomela");
    }

    if   (ball.hitTestObject(goalie) && ball.y>69 /*&& ball.y<178 && ball.X>139 && ball.x<466*/)
    {
        gol_mc.play();
        score ++;
        showScore();
    }else
    { 
        fails_mc.play();
        failed++;
        trace(failed);

        if (failed==3) {
           gameFinished();
           trace("YOU LOST");  
           return; //added this because you don't want the rest of this function running if it's a game over
        }
    }

    setTimeout(resetShot, 3000); //you had the code I put in resetShot repeated twice

    trace(score);
}

function resetShot():void {
    ball.x = 296.35;
    ball.y = 353.35;
    targetCursor.visible = true;
    keeper.gotoAndStop(1);
    stage.addEventListener(MouseEvent.MOUSE_MOVE, dragCursor);
    stage.addEventListener(MouseEvent.CLICK, kick);
}

function showScore():void{
    goles_txt.text ="" +score;  
}

function gameFinished(){
    gameOver.play();
    stage.removeEventListener(MouseEvent.CLICK, kick);
    stage.removeEventListener(MouseEvent.MOUSE_MOVE, dragCursor);
    Mouse.show();

    //this.mouseX=cursor.x ;
    //this.mouseY=cursor.y;  //These are read only properties, your can't set the mouse position...

    again_btn.addEventListener(MouseEvent.MOUSE_DOWN, playAgain);
}

function playAgain(e:Event = null):void{
    gameOver.gotoAndPlay(31);
    fails_mc.gotoAndStop(1);
    keeper.play();

    setTimeout(initializeGame, 1000);
} 
```

# gcc - 为什么 GCC 在不存在的“sizeof”之前抱怨缺少标识符？

> ID：12022263
> 
> 赞同：4
> 
> 时间：2012-08-18T21:07:04.303
> 
> 标签：gcc, gtk, cross-compiling

我正在为 Windows 交叉编译 GTK+ 3.4.4。我已经交叉编译了 GTK（ATK、Cairo、GDK Pixbuf 和 Pango）的所有构建依赖项，并将它们安装到`/usr/i686-w64-mingw32/`.

但是，尝试编译 GTK 本身会导致以下错误：

```
In file included from gdkrgba.c:31:0:
fallback-c89.c:40:1: error: expected identifier or '(' before 'sizeof'
fallback-c89.c:40:1: error: expected ')' before '==' token 
```

第 34 - 44 行`gdk/fallback-c89.c`包含：

```
34\.  #ifndef HAVE_ISINF
35\.  /* Unfortunately MSVC does not have finite()
36\.   * but it does have _finite() which is the same
37\.   * as finite() except when x is a NaN
38\.   */
39\.  static inline gboolean
40\.  isinf (double x)
41\.  {
42\.      return (!_finite (x) && !_isnan (x));
43\.  }
44\.  #endif 
```

我一点也不知道 GCC 在哪里找到 ' `sizeof`' 或 ' `==`'。为什么编译器会抛出如此神秘的错误消息，我该如何解决？

* * *

**编辑：**这是实际的命令行：

```
/usr/bin/i686-w64-mingw32-gcc -std=gnu99 -DHAVE_CONFIG_H -I. -I..
  -DG_LOG_DOMAIN="Gdk" -DGDK_COMPILATION -I.. -I../gdk -I..
  -DG_DISABLE_CAST_CHECKS -mms-bitfields
  -I/usr/i686-w64-mingw32/include/pango-1.0
  -I/usr/i686-w64-mingw32/include/glib-2.0
  -I/usr/i686-w64-mingw32/lib/glib-2.0/include
  -I/usr/i686-w64-mingw32/include/cairo -I/usr/i686-w64-mingw32/include/pixman-1
  -I/usr/i686-w64-mingw32/include -I/usr/i686-w64-mingw32/include/freetype2
  -I/usr/i686-w64-mingw32/include/libpng15
  -I/usr/i686-w64-mingw32/include/gdk-pixbuf-2.0 -O2 -Wall -mms-bitfields -MT 
  gdkrgba.lo -MD -MP -MF .deps/gdkrgba.Tpo -c gdkrgba.c -DDLL_EXPORT -DPIC -o
  .libs/gdkrgba.o 
```

* * *

**进一步编辑：**使用该选项编译后`-E`，我捕获了以下预处理输出......这解释了奇怪的情况`sizeof`：

```
# 39 "fallback-c89.c"
static inline gboolean
((sizeof (double x) == sizeof (float) ? __fpclassifyf (double x) : sizeof double x)) == (0x0100 | 0x0400))
{
  return (!_finite (x) && !_isnan (x));
} 
```

我只能得出结论，这`isinf`已经是一个已定义的宏。它只是在上面的函数声明中使用时被扩展。

我的问题现在变成了……为什么`HAVE_ISINF`没有定义？是不是配置脚本有问题？

* * *

**另一个编辑：**好的，所以我决定在构建树中搜索包含字符串 ' `HAVE_ISINF`' 的所有内容，并遇到以下实例：

*   autom4te.cache/traces.1

    ```
    m4trace:configure.ac:740: -1- AH_OUTPUT([HAVE_ISINF], [/* Define to 1 if you
      have the `isinf\' function. */
    @%:@undef HAVE_ISINF]) 
    ```

*   配置文件

    ```
    /* Define to 1 if you have the `isinf' function. */
    #undef HAVE_ISINF 
    ```

*   配置文件

    ```
    /* Define to 1 if you have the `isinf' function. */
    /* #undef HAVE_ISINF */ 
    ```

令人惊讶的是，没有`config.log`提到“HAVE_ISINF”。

* * *

**（可能）最终编辑：**`autom4te.cache/output.0`我做了更多调查并在这里找到了字符串“isinf” ： [http ://paste.ubuntu.com/1154478/](http://paste.ubuntu.com/1154478/)

此代码引用了`ac_fn_c_check_func`，因此我挖掘了该[函数的源代码](http://gcc.gnu.org/svn/gcc/branches/cilkplus/libcilkrts/configure)并编译[了脚本生成](http://paste.ubuntu.com/1154489/)[的`.c`](http://paste.ubuntu.com/1154489/)示例：

```
test.c:25:6: warning: conflicting types for built-in function ‘isinf’
  [enabled by default]
/tmp/ccLYd1R8.o:test.c:(.text+0xc): undefined reference to `_isinf'
collect2: ld returned 1 exit status 
```

这很奇怪，因为我上面的解释表明这`isinf`只是一个宏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T00:18:14.430

我终于找到[了这个](http://lists.fedoraproject.org/pipermail/scm-commits/2012-July/817348.html)。总之：

> “isnan() 和 isinf() 是 C99 宏而不是函数，因此请使用 AC_CHECK_DECL 而不是 AC_CHECK_FUNCS。”

所以看起来我会修补源代码。

# semantics - emacs 无法识别（需要 'semantic-ia）

> ID：12022264
> 
> 赞同：1
> 
> 时间：2012-08-18T21:07:11.237
> 
> 标签：semantics, cedet, emacs24

我是 emacs 新手，我正在尝试在 Mac 上使用 emacs 24.1 设置 cebet1.1。我的 .emacs 很简单：

（加载文件“~/elisp/cedet-1.1/common/cedet.el”）

（需要'semantic-ia）

(global-ede-mode 1)

（语义加载启用过多代码助手）

（语义加载启用语义调试助手）

(global-srecode-minor-mode 1)

但是，当我启动 emacs 时，它给了我一个错误：“符号作为变量的值是 void：'semantic-ia”。我仔细检查了 cedet 安装，文件 ~/elisp/cedet-1.1/semantic/semantic-ia.el 确实存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T18:51:09.237

我遇到了这个问题，以下更改对我有用

```
 (require 'semantic/ia) 
```

# iphone - 在 UILabel 上设置文本会使我的应用程序崩溃

> ID：12022272
> 
> 赞同：1
> 
> 时间：2012-08-18T21:08:13.167
> 
> 标签：iphone, objective-c, ios, nsstring, uilabel

所以我已经设置了我的 UILabel，但是当我将我的游戏循环中的文本设置为一个作为分数的字符串时（所以文本在每个循环中被重置）我的应用程序崩溃了。

这是我得到的错误：

> 0x15560b0: cmpl (%eax), %ecx 线程 1

断点是这样说的：

> EXC_BAD_ACCESS（代码=1，地址=0x67b30064

这是我设置 UILabel 的方式（在我的 init 方法中）：

```
//SET UP THE SCORE LABEL HERE
scoreLabel = [[UILabel alloc] init];
scoreString = [NSString stringWithFormat:@"%d", score];
[scoreLabel setFont: [UIFont fontWithName: @"TimesNewRoman" size: 10.0f]];
[scoreLabel setFrame: CGRectMake(262, 250, 100, 40)];
[scoreLabel setBackgroundColor:[UIColor clearColor]];
[scoreLabel setTextColor: [UIColor clearColor]];
[scoreLabel setTextColor: [UIColor whiteColor]];
scoreLabel.transform = CGAffineTransformMakeRotation(89.53);
[self addSubview: scoreLabel];
//[scoreLabel setText: scoreString]; 
```

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-14T13:05:15.097

您是否在主队列之外进行标签更新？在我将更新发送到主队列之前，我遇到了这些崩溃。

```
dispatch_async(dispatch_get_main_queue(), ^{
    self.lblSyncProgress.text = @"Some string";
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T21:22:27.150

```
//in your .h file
UILabel *scoreLabel;
NSString *scoreString;

//in your .m file    
//SET UP THE SCORE LABEL HERE 
scoreLabel = [[UILabel alloc] init];
 [scoreLabel setFont: [UIFont fontWithName: @"TimesNewRoman" size: 10.0f]];
 [scoreLabel setFrame: CGRectMake(262, 250, 100, 40)];
 [scoreLabel setBackgroundColor:[UIColor clearColor]];
 [scoreLabel setTextColor: [UIColor clearColor]];
 [scoreLabel setTextColor: [UIColor whiteColor]];
 scoreLabel.transform = CGAffineTransformMakeRotation(89.53);
 [self addSubview: scoreLabel]; 

//In your update method
 scoreString = [NSString stringWithFormat:@"%d", score];
scoreLabel.text = scoreString; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T21:23:59.740

我在你的代码中注意到你有

```
scoreString = [NSString stringWithFormat:@"%d", score]; 
```

确保“分数”是一个字符。如果不是看看[这个](https://stackoverflow.com/questions/2107544/types-in-objective-c-on-iphone)

# jquery - jQuery - SSL $.post

> ID：12022273
> 
> 赞同：6
> 
> 时间：2012-08-18T21:08:23.240
> 
> 标签：jquery, ajax, post, ssl, https

如果我通过 SSL 提供一个页面，并且我做一个 AJAX 帖子：

```
$.post('/core/somepage.php', ....); 
```

帖子是通过 HTTPS 发布的，还是我必须输入一个绝对 URL，例如：

`$.post('https://example.com/core/somepage.php', ....);`

此外，这是否适用于：

```
$('#element').load('/core/something.php'); 
```

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T21:12:11.430

是的，帖子将通过`https`. 根据定义，相对路径使用当前方案。你知道吗，你甚至可以做一些事情，比如`//example.com/somepage`如果你想去一个明确的主机但保持当前的方案。

# regex - mod_rewrite 将请求重定向到子文件夹

> ID：12022274
> 
> 赞同：1
> 
> 时间：2012-08-18T21:08:26.540
> 
> 标签：regex, apache, mod-rewrite

我已经在服务器的根目录（运行 Apache 2.4.2 的 WAMP）上对我的网站进行了本地编码，并且考虑到这一点，我正在设置图像和其他资源的源，因此例如名为 example.png 的图像将具有“src =/img/example.png”。现在我已将项目移至子文件夹，并且图像不会加载，因为它们的链接已损坏。我不想为 html 上的每个图像设置新源，所以我希望有另一种方法可以使用 mod_rewrite 修复链接。

演示：我想要一个请求

```
http://localhost/img/logo.gif 
```

要去

```
 http://localhost/newdir/img/logo.gif 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:22:57.463

这应该这样做：

```
RewriteEngine on
RewriteRule !^newdir/ newdir%{REQUEST_URI} 
```

有关您的问题的更多信息，请参阅此帖子：

[https://stackoverflow.com/a/1612329/971459](https://stackoverflow.com/a/1612329/971459)

小心取消注释 httpd.conf 文件中的以下行：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

具有以下文件结构：

```
-www
  -newfolder
     -img
        -header.png
  -.htaccess 
```

当我访问：

localhost/img/header.png 我看到了图片

# php - 用分号分隔标签

> ID：12022275
> 
> 赞同：0
> 
> 时间：2012-08-18T21:08:30.097
> 
> 标签：php, tags

我在 MySQL 数据库中有由分隔的标签，`;`它们都在一个字段中。

所以每当我尝试加载该字段时。数据将显示如下：

`tag1 ; tag2 ; tag3`

我想要做的是为每个标签添加 url。基本上我想这样显示它：

```
<a href="http://example.com/tag1">tag1</a> 
<a href="http://example.com/tag2">tag2</a>  
<a href="http://example.com/tag3">tag3</a> 
```

我在想用with`str_replace`来代替`;`，`</a>`但是我该怎么做每个标签的开头！

有没有比这更好的代码`str_replace`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T21:10:50.570

您可能会“作弊”，然后在生成的数组中[爆炸](http://php.net/explode)`;`并[循环。](http://php.net/foreach)

* * *

不过，这**几乎从来都不**是正确的方法！您应该始终努力[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的数据库（如果不这样做，您应该*确切地知道为什么*选择不这样做）。就目前而言，您的表甚至没有遵守第一个范式，它指出每个字段中应该只有原子数据。这是一个坏主意的原因是因为您将很难查询表（例如获取具有特定标记的所有行）。

您*应该*做的是为标签创建一个单独的表，其中包含两个字段：（`postid`来自您已有的表）和`tag`. 然后使用`JOIN`操作将它们连接在一起。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T21:13:49.533

```
$tags = "tag1 ; tag2 ; tag3";
$t = explode(";",$tags);
$string = '';
foreach($t as $value) {
   $value = trim($value);
   $string .= "<a href='http://example.com/$value'>$value</a>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T21:11:10.423

```
$string = "tag1 ; tag2 ; tag3";
$tags = explode(" ; ", $string);
foreach ($tags as $tag) {
  echo '<a href="http://example.com/'. $tag .'">' . $tag .'</a>';
} 
```

# css - IE只有样式表，如何防止IE加载其他样式表

> ID：12022279
> 
> 赞同：1
> 
> 时间：2012-08-18T21:08:47.100
> 
> 标签：css, internet-explorer

[作为这个问题](https://stackoverflow.com/q/12019725/985284)的后续，我如何防止 Internet Explorer 加载多个样式表，（因为我希望 Firefox 和 Chrome 加载一个，而 IE 加载另一个？）是放置引用的顺序吗？或相同的文件名但在不同的文件夹中，我需要做一种`if else`声明，还是什么？

例如，IE 是否会加载两者：

```
<!--[if IE]>
    <link href="/Content/SiteIE.css" rel="stylesheet" type="text/css">
<![endif]-->
<link href="/Content/Site.css" rel="stylesheet" type="text/css"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T21:11:35.427

完整的语法是：

```
<!--[if IE]>
According to the conditional comment this is IE<br />
<![endif]-->
<!--[if IE 6]>
According to the conditional comment this is IE 6<br />
<![endif]-->
<!--[if IE 7]>
According to the conditional comment this is IE 7<br />
<![endif]-->
<!--[if IE 8]>
According to the conditional comment this is IE 8<br />
<![endif]-->
<!--[if IE 9]>
According to the conditional comment this is IE 9<br />
<![endif]-->
<!--[if gte IE 8]>
According to the conditional comment this is IE 8 or higher<br />
<![endif]-->
<!--[if lt IE 9]>
According to the conditional comment this is IE lower than 9<br />
<![endif]-->
<!--[if lte IE 7]>
According to the conditional comment this is IE lower or equal to 7<br />
<![endif]-->
<!--[if gt IE 6]>
According to the conditional comment this is IE greater than 6<br />
<![endif]-->
<!--[if !IE]> -->
According to the conditional comment this is not IE<br />
<!-- <![endif]--> 
```

来源：[http ://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T21:14:06.363

是的，它会同时加载两者。但我有时会做的是使 IE 特定规则具有更高的特异性，以便它比其他浏览器的其他规则具有更高的顺序

# javascript - jQuery .offset() 没有检索到正确的位置

> ID：12022283
> 
> 赞同：5
> 
> 时间：2012-08-18T21:10:03.813
> 
> 标签：javascript, jquery, html, css, facebook-like

我正在开发一个通过 PHP 动态创建类似 facebook 的按钮的网站。但是，`<div>`包含按钮的 需要具有 CSS 属性`overflow: hidden;` 这是我发现的唯一一种方法，它可以制作一种两列格式，强制两列都扩展为最长的长度。这种方法的唯一问题是，当有人单击它们并展开时，放置在容器底部附近的任何类似 facebook 的按钮都会被剪掉。

这是我尝试解决此问题的方法：

1.  使用 jQuery，我遍历页面上所有类似 facebook 的按钮，并使用该[`offset()`](http://api.jquery.com/offset/)方法计算它们的文档偏移量。

2.  然后，我使用 jQuery 的方法[`clone()`](http://api.jquery.com/clone/)为每个按钮提供绝对定位和计算出的偏移量。[`css()`](http://api.jquery.com/css/)我希望将每个克隆的按钮放置在与将其附加到文档时克隆的按钮相同的位置。

3.  最后，我将每个旧的类似 facebook 的按钮的 css 更改`visibility: hidden;`为以使其不可见，但仍占用它以前在页面上的空间。我使用该函数将类似 facebook 的按钮的克隆添加到没有`overflow: hidden;`属性的 div 中[`appendTo()`](http://api.jquery.com/appendTo/)。

这是我这个过程的全部代码：

```
// Replaces functional facebook recommend buttons with identical ones
// in a div where they won't get clipped when they expand.
// Hides the old buttons so space is still left for new ones
$(window).load(function(){
    $(".fb-recommend").each(function(){ // cycle through each recommend button
        var offset = $(this).offset(); // calculate offset of each button
        var newButton = $(this).clone(); // clone the button
        newButton.css({'position':'absolute', 'left':offset.left, 'top':offset.top});
        $(this).css("visibility","hidden"); // hide the old button
        newButton.appendTo("#wrapper"); // put the new button in the wrapper where it won't get clipped
    });
}); 
```

在所有这一切结束时，我希望将每个按钮的克隆放置在旧按钮所在的位置，但在不同的`<div>`. 整个过程有效，除了克隆的类似 facebook 的按钮出现在与克隆它们的位置略有不同的位置（正如 PitaJ 指出的那样，它们似乎偏离了大约 39px 的垂直偏移倍数）。您可以在此处查看问题：

# [**链接到测试网站**](http://calypsofarm.org/test/news.php)

如您所见，第一个按钮放置在正确的位置（由其隐藏克隆填充的空白空间），但其他偏移量未正确计算。

我将不胜感激提供的任何想法或帮助。如果您希望我更好地解释或发布更多代码，请告诉我！

**编辑：**我想我会在这里发布类似 facebook 的按钮的 CSS（即使我改变的只是边距）：

```
#content .fb-recommend {
    margin: 15px 0 5px 0;
} 
```

**编辑 2：**根据 UnLoco 的建议，我在 fb-reccommend CSS 中添加了一个 min-height 属性，并注释掉了隐藏旧按钮的代码行，以便更容易看到问题（虽然稍微减少了，但问题仍然存在. CSS 现在看起来像这样：

```
#content .fb-recommend {
    margin: 15px 0 5px 0;
    min-height: 39px;
} 
```

**编辑 3：**问题似乎已在所有浏览器中解决，但 IE 通过将 CSS 更改为：

```
.fb-recommend {
    min-height: 24px;  // I used 24 because the fb-buttons are 24px in height
} 
```

**最终编辑？**这似乎适用于我的所有浏览器，包括 IE：

```
.fb-recommend {
    min-height: 39px;
} 
```

我现在在想 39 可能来自旧 fb 按钮的 15px 边距 + 它的 24px 高度。我想我可以通过简单地将高度设置为 39px 并且没有边距来解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T04:34:22.020

这是因为您在 fb iframe 实际加载之前检索偏移量。只需添加这样的 CSS 规则
`div.fb-recommend{min-height:39px}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T22:13:41.483

我相信你的问题是一些奇怪的 jQuery 怪异。

要解决此问题，只需将您的代码更改为：

```
$(window).load(function(){
    $(".fb-recommend").each(function(index){ // cycle through each recommend button
        var offset = $(this).offset(); // calculate offset of each button
        var newButton = $(this).clone(); // clone the button
        newButton.css({'position':'absolute', 'left':offset.left, 'top':offset.top + (39*index)});
        $(this).css("visibility","hidden"); // hide the old button
        newButton.appendTo("#wrapper"); // put the new button in the wrapper where it won't get clipped
    });
}); 
```

这将解释奇怪的偏移问题。

# ruby - 如何合并这两个没有键的哈希数组？

> ID：12022284
> 
> 赞同：0
> 
> 时间：2012-08-18T21:10:04.173
> 
> 标签：ruby, arrays, hash

我有以下哈希数组：

```
>> hash = { "One" => [{"Oneone" => "1", "Onetwo" => "2"}, {"Oneone" => "3", "Onetwo" => "4"}], "Two" => [{"Twoone" => "5", "Twotwo" => "6"}, {"Twoone" => "7", "Twotwo" => "8"}] }
{
    "One" => [
        [0] {
            "Oneone" => "1",
            "Onetwo" => "2"
        },
        [1] {
            "Oneone" => "3",
            "Onetwo" => "4"
        }
    ],
    "Two" => [
        [0] {
            "Twoone" => "5",
            "Twotwo" => "6"
        },
        [1] {
            "Twoone" => "7",
            "Twotwo" => "8"
        }
    ]
} 
```

我想合并它们来实现这一点：

```
{
    "OneTwo" => [
        [0] {
            "Oneone" => "1",
            "Onetwo" => "2",
            "Twoone" => "5",
            "Twotwo" => "6"
        },
        [1] {
            "Oneone" => "3",
            "Onetwo" => "4",
            "Twoone" => "7",
            "Twotwo" => "8"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:52:36.043

假设您的示例代表您的数据，这应该有效。

```
Hash[hash.keys.join,
     hash.values.transpose.map { |hashes| hashes.inject &:merge }
    ] 
```

# php - 此 mod_rewrite 规则如何导致我的任何文件无法加载？

> ID：12022286
> 
> 赞同：2
> 
> 时间：2012-08-18T21:10:17.033
> 
> 标签：php, .htaccess, mod-rewrite

以下 mod_rewrite 规则导致我的网站表现得很奇怪，我键入 localhost/signin/。

```
Options +FollowSymLinks
RewriteEngine On

RewriteRule ^signin/?$ access.php [NC,L] 
```

它会导致所有带有相关链接的附加文件（图像、css、php、js）无法加载？但是，当我键入 localhost/signin 时，所有带有负载的附加文件都没有错。我认为发生这种情况是因为 /signin/ 被视为一个目录，并且所有相关链接都将查看所有附加文件的不存在目录。

**编辑：**我想出了一个解决方案，但它涉及混淆我的标记，这不是我想要的。看看我下面的答案，你会明白的。

但是，我希望重写规则忽略这些附加文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T21:46:26.960

## 问题

您遇到的问题是（澄清后）与使用重写规则无关。请编辑您的问题以准确表示您的问题。

几乎可以肯定，因为您有以下参考资料：

```
<link rel="stylesheet" type="text/css" href="css/foo.css">
<script src="js/foo.js"> 
```

这意味着用于查找 css/js 文件的路由取决于当前请求的目录（虚拟或真实）。

如果当前请求是 /foo，则请求在根目录中。因此，将请求以下网址：

```
/css/foo.css
/js/foo.js 
```

但是，如果当前请求是 /foo/，则该请求位于 dir 中`/foo/`。因此，将要求以下 urs：

```
/foo/css/foo.css
/foo/js/foo.js 
```

## 使用绝对网址

避免这种情况的方法就是在链接/脚本标签中使用绝对 url：

```
<link rel="stylesheet" type="text/css" href="/css/foo.css">
<script src="/js/foo.js"> 
```

这样，无论当前的 url 是什么 - 使用链接和脚本标记中的确切 url。

## 基础标签 - 小心

正如您在自己的答案中所指出的那样，您可以使用基本标签 - 但更明显的是不依赖它。某些浏览器也存在问题，例如将“#”转换为对“/#”的请求，这是忽略基本标记存在的另一个原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T03:20:26.777

经过足够长的搜索后，我发现我可以使用：

```
<base href="/beta/" /> 
```

在每个 HTML 文件的 head 部分中以修复相对路径。我不太关心这种方法，因为它弄乱了我的标记。如果其他人有想法，请与我分享。

顺便说一句，我在 Macbook Pro 上使用 MAMP Pro。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T22:00:00.307

由于我没有足够的代表来支持正确的答案，所以这里是：暴风雨天气的答案是一件非常好的事情。

它不仅会直接提供所有文件，还会对文件夹执行此操作。如果您正在开始一个新的临时项目，或者需要快速输出一些测试代码，这将非常有用。只需在其中创建一个带有 index.php 的新目录，服务器就会很好地为它提供服务。

当然，如果没有 -d 标志，这也可以，但是您也必须输入整个文件名，这可能会很混乱。

无论如何，我宁愿只支持我上面的答案，但是唉。

# google-chrome - 如何防止弹性项目由于其文本而溢出？

> ID：12022288
> 
> 赞同：74
> 
> 时间：2012-08-18T21:10:27.703
> 
> 标签：google-chrome, flexbox, css

对于列表，我考虑了以下布局。每个列表项由两列表示。第二列应占用所有可用空间，但如果第一列占用太多空间，则应以最小尺寸将其固定在右侧。然后第一列应该显示一个省略号。

问题发生在最后一种情况下。当第一列包含太多文本时，它没有显示省略号，而是将自身拉伸到弹性框之外，导致出现水平滚动条，并且第二列没有锚定在右侧。

我想让它像这样呈现（样机）：

![预期渲染](../Images/3332ae427f6dcf9d57c5a449b4292afe.png)

我怎样才能做到这一点？

这是 [样品小提琴](http://jsfiddle.net/QCLjt/2/)。

```
.container {
    display: -webkit-flex;
}

div {
    white-space: nowrap;
    text-overflow: ellipsis;
}

.container > div:last-child {
    -webkit-flex: 1;
    background: red;
}
```

```
<!-- a small first column; the second column is taking up space as expected -->
<div class="container">
    <div>foo barfoo bar</div>
    <div>foo bar</div>
</div>

<!-- a large first column; the first column is overflowing out of the flexbox container -->
<div class="container">
    <div>foo barfoo barfoo barfoo barfoo barfoo barfoo bar
    foo barfoo barfoo barfoo barfoo barfoo barfoo bar
    foo barfoo barfoo barfoo barfoo barfoo barfoo bar</div>
    <div>foo bar</div>
</div>
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-08-26T15:29:06.183

# 更新

## 添加有效的代码：

```
.container {
    display: -webkit-flex; 
}

.container>div:first-child{
    white-space:nowrap;
   -webkit-order:1;
   -webkit-flex: 0 1 auto; /*important*/
    text-overflow: ellipsis;
    overflow:hidden;
    min-width:0; /* new algorithm overrides the width calculation */
}

.container > div:last-child {
    -webkit-flex: 1;
    -webkit-order:2;
    background: red;
    -webkit-flex:1 0 auto; /*important*/
}
.container > div:first-child:hover{
    white-space:normal;
}
```

```
<div class="container">
    <div>foo barfoo bar</div>
    <div>foo bar</div>
</div>

<div class="container">
        <div>foo barfoo barfoo barfoo barfoo barfoo barfoo bar
        foo barfoo barfoo barfoo barfoo barfoo barfoo bar
        foo barfoo barfoo barfoo barfoo barfoo barfoo bar</div>
    <div>foo bar</div>
</div>
<div class="container">
    <div>foo barfoo bar</div>
    <div>foo bar</div>
</div>

<div class="container">
        <div>foo barfoo barfoo barfoo barfoo barfoo barfoo bar
        foo barfoo barfoo barfoo barfoo barfoo barfoo bar
        foo barfoo barfoo barfoo barfoo barfoo barfoo bar</div>
    <div>foo bar</div>
</div><div class="container">
    <div>foo barfoo bar</div>
    <div>foo bar</div>
</div>
```

## 原始答案/解释。

W3C 规范说，“**默认情况下，弹性项目不会缩小到其最小内容大小（最长单词或固定大小元素的长度）以下。要更改此设置，请设置 'min-width' 或 'min-height'财产。** ”

如果我们按照这个推理，我相信这个 bug 已经从 Canary 中删除了，而不是相反。

我一输入就检查`min-width`，`0`它在 Canary 中有效。

所以错误存在于较旧的实现中，而金丝雀删除了该错误。

这个例子在金丝雀中工作。[http://jsfiddle.net/iamanubhavsaini/zWtBu/](http://jsfiddle.net/iamanubhavsaini/zWtBu/)

我使用了 Google Chrome 版本 23.0.1245.0 金丝雀。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-20T23:06:29.777

`flex`您可以通过将属性的第三个值设置为 auto来设置孩子的首选大小，如下所示：

```
flex: 1 0 auto; 
```

这是设置`flex-basis` [属性](http://dev.w3.org/csswg/css3-flexbox/#flex-basis-propdef)的简写。

（[例](http://jsfiddle.net/QCLjt/3/)）

然而，正如评论中所指出的，这在 Chrome Canary 中似乎不起作用，尽管我不确定为什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T14:11:54.793

更新：这不是答案。它解决了不同的问题，这是找到真正答案的一步。所以我保留它是出于历史原因。请不要投票。

我相信这是你的答案：http: [//jsfiddle.net/iamanubhavsaini/zWtBu/2/](http://jsfiddle.net/iamanubhavsaini/zWtBu/2/)

![在此处输入图像描述](../Images/2a350adf96df14ced6ee366e1d5dbc20.png)

参考[W3C](http://www.w3.org/TR/2012/WD-css3-flexbox-20120612/)

对于第一个元素

```
-webkit-flex: 0 1 auto; /* important to note */ 
```

对于第二个元素

```
-webkit-flex:1 0 auto; /* important to note */ 
```

是起作用的属性和值。

[在http://www.w3.org/TR/2012/WD-css3-flexbox-20120612/#flex](http://www.w3.org/TR/2012/WD-css3-flexbox-20120612/#flex)了解更多信息

* * *

这就是你颠倒顺序的方式：http: [//jsfiddle.net/iamanubhavsaini/zWtBu/3/](http://jsfiddle.net/iamanubhavsaini/zWtBu/3/)

而这个具有红色背景的东西的预定义最小宽度：http: [//jsfiddle.net/iamanubhavsaini/zWtBu/1/](http://jsfiddle.net/iamanubhavsaini/zWtBu/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T05:12:48.720

更新：这不是答案。它解决了不同的问题，这是找到真正答案的一步。所以我保留它是出于历史原因。请不要投票。

编辑2：这个答案不能解决问题。问题的目标和答案之间存在细微差别。

首先，`text-overflow:ellipsis`与`overflow:hidden`. 实际上，它适用于除`overflow:visible`. [参考](http://www.quirksmode.org/css/textoverflow.html)

然后，遍历：

[http://jsfiddle.net/iamanubhavsaini/QCLjt/8/](http://jsfiddle.net/iamanubhavsaini/QCLjt/8/)

在这里，我有 put`overflow`和`max-width`属性。`max-width:60%;`并且`overflow:hidden`是使事物按照您的意图出现的原因，因为在文本数据过多的情况下`hidden`阻止文本显示并实际创建确定大小的框。`60%`

然后，如果您真的对**flex box 模型**感兴趣，可以通过`-webkit-order`.

[**http://jsfiddle.net/iamanubhavsaini/QCLjt/9/**](http://jsfiddle.net/iamanubhavsaini/QCLjt/9/)

- 代码 -

```
<div class="container">
    <div>foo barfoo bar</div>
    <div>foo bar</div>
</div>

<div class="container">
        <div>foo barfoo barfoo barfoo barfoo barfoo barfoo bar
        foo barfoo barfoo barfoo barfoo barfoo barfoo bar
        foo barfoo barfoo barfoo barfoo barfoo barfoo bar</div>
    <div>foo bar</div>
</div> 
```

​关注CSS

```
.container {
    display: -webkit-flex;
}

div {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow:hidden;
}
.container>div:first-child{
   -webkit-order:1;
        -webkit-flex: 1;
}
.container > div:last-child {
    -webkit-flex: 1;
    -webkit-order:2;
    background: red;
} 
```

​-- 没有宽度，它仍然有效。这就是我所看到的。

![在此处输入图像描述](../Images/1cb86bfee189f38bba0e3640d792c59b.png)

——评论后

**-webkit-订单：N；**是我们将在 2 年多之后使用的东西，而不是`float:---;`更多的 hack（如果 W3C 坚持这个课程，并且如果每个浏览器供应商都遵循）

在这里，左 div 的 order 为 1，右 div 的 order 为 2。因此，它们是左右的。

[http://jsfiddle.net/iamanubhavsaini/QCLjt/10/](http://jsfiddle.net/iamanubhavsaini/QCLjt/10/)

同样的事情，但只有当你正在寻找左右时，只需将事物的顺序更改为`div>first-child { -webkit-order:2; } div>last-child{-webkit-order:1;}`

注意：这种`-webkit-flex`做事方式显然会使这段代码在其他引擎上无用。因为，`float`应该在多个浏览器引擎上重用代码。

**以下是一些 JS 示例；没有回答问题**- 评论后

*我认为这回答了您的问题以及更多问题，还有其他一些方法和不同的解决方案，但不完全是这个问题的解决方案。 [http://jsfiddle.net/iamanubhavsaini/vtaY8/1/](http://jsfiddle.net/iamanubhavsaini/vtaY8/1/) [http://jsfiddle.net/iamanubhavsaini/9z3Qr/3/](http://jsfiddle.net/iamanubhavsaini/9z3Qr/3/) [http://jsfiddle.net/iamanubhavsaini/33v8g/4/](http://jsfiddle.net/iamanubhavsaini/33v8g/4/) [http://jsfiddle.net/伊玛努巴夫赛尼/33v8g/1/](http://jsfiddle.net/iamanubhavsaini/33v8g/1/)*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T17:42:45.200

对于Mozilla，您应该添加“最小宽度：1px；”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-23T05:04:53.377

这个例子真的帮助了我：http: [//jsfiddle.net/laukstein/LLNsV/](http://jsfiddle.net/laukstein/LLNsV/)

```
container {
    display: -webkit-flex;
    -webkit-flex-direction: row;
    padding: 0;
    white-space: nowrap;
}

.container>div {
    overflow: hidden;
    display: inline-block;
    -webkit-flex: 1;
    min-width: 0;
    text-overflow: ellipsis;
    -moz-box-sizing: border-box;
         box-sizing: border-box;
} 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2014-05-23T09:59:02.653

您应该使容器位置：相对，子位置：绝对。

# ruby-on-rails - Rails 使用 IF 和 ELSE 语句隐藏基于 Page 的 div

> ID：12022289
> 
> 赞同：5
> 
> 时间：2012-08-18T21:10:28.217
> 
> 标签：ruby-on-rails, if-statement

我有一个主页，我想以某种方式显示一个 div，它需要位于应用程序视图的顶部。

Div 被归类为“HOME-BANNER”

我正在尝试创建一个 IF ELSE 语句来反映隐藏 div 如果它不在主页上。

我的问题是如何调用当前页面以将其标识为主视图的索引。另外我会结束代码还是放置一个 else 语句来继续页面的其余部分？

```
<html>
<head>
  <title>WEBSITE</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<% if current_page == "home#index" %>
<div class="HOME-BANNER">

<% end %>

<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a href="#" class="brand">WEBSITE</a>
                <ul class="nav">
                    <li><%= link_to "All Jobs", jobs_path %></li>
                    <li><%= link_to "My Profile", tempers_path %></li>

                </ul>

                <div class="float-right">

                    <div class="btn-group open">
                          <a class="btn btn-primary" href="#"><i class="icon-user icon-white"></i></a>
                          <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
                          <ul class="dropdown-menu">
                            <li><i class="icon-pencil"></i><a href="<%= link_to '', edit_user_registration_path %>"> My Profile</a></li>
                            <li class="divider"></li>
                            <li><a href="#"><i class="icon-th-large"></i> Dashboard</a></li>
                            <li><a href="#"><i class="icon-th-list"></i> My Posts</a></li>
                            <li><a href=""><i class="icon-th-list"></i> My Searches</a></li>
                            <li><i class="icon-stop"></i> <%= link_to ' Sign out', destroy_user_session_path, :method => :delete %></li>
                          </ul>
                    </div>
                </div>
        </div>
    </div>
</div>

<div class="container"> 

    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>

    <%= yield %>
</div>
<div class="footer"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T21:35:58.257

您想从控制器执行此操作。由于这是一个本地化事件，因此请使用专门托管此视图的控制器，而不是您的应用程序控制器。

```
def whatever_view_this_is
  @home_banner  = true
end 
```

然后在你看来：

```
<% if @home_banner %>
  <div class="HOME-BANNER">
<% end %> 
```

# asp.net-mvc - 带有 Knockout.js 的 Web API - 为什么这不起作用？

> ID：12022295
> 
> 赞同：1
> 
> 时间：2012-08-18T21:12:08.880
> 
> 标签：asp.net-mvc, asp.net-ajax, knockout.js

我有一个 Web API，它成功地返回了 JSON 格式的博客文章数组：

```
[{"ID":1,"Title":"First Blog Post","Body":"Some Content"},{"ID":2,"Title":"Second BlogPost","Body":"Some other content"}] 
```

出于练习目的，我想使用 Knockout.js 在列表中显示所有帖子。

这是我的代码：

```
<script>
$(document).ready(function () {

    function AppViewModel() {
        var self = this;

        self.posts = ko.observableArray([
        { Title: 'Default Title', Body: 'Default Body' },
        ]);

        $.getJSON('api/posts', function (data) {
            ko.mapping.fromJSON(data, {}, self.posts);
        });

    }

    ko.applyBindings(new AppViewModel());

}); 
```

我的绑定：

```
<tbody data-bind="foreach: posts">
                <tr>
                    <td data-bind="text: Title"></td>
                    <td data-bind="text: Body"></td>
                </tr>
</tbody> 
```

我的表显示为空，由于某种原因它没有显示 JSON 数据......

**回答：**我必须将 fromJSON 更改为 fromJS 并且它有效！非常感谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:52:00.613

返回的 json 具有标题大小写的属性名称，但 self.posts 中的原始属性名称具有小写的属性名称。我假设您绑定到模板中的小写版本。考虑将返回的 json 也更改为小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:55:28.747

在您的情况下，您需要为映射指定更新目标。

来自[Knockout Mapping 插件文档](http://knockoutjs.com/documentation/plugins-mapping.html)：

> 如果像上面的示例一样，您在类内部执行映射，您希望将其作为映射操作的目标。ko.mapping.fromJS 的第三个参数表示目标。例如，

```
ko.mapping.fromJS(data, {}, someObject); 
```

所以在你的情况下：

```
$.getJSON('api/posts', function (data) {
        ko.mapping.fromJSON(data, {}, self.posts);
    }); 
```

一个工作的[JSFiddle](http://jsfiddle.net/gFVwR/1/)

另请注意，**属性名称区分大小写**，它们应在 JSON 以及您的视图模型和绑定中匹配。例如，您检索`"Title"`但您正在使用`title`

# javascript - 当我在消息中放入 :)) 时，消息系统 jquery 发送 jQuery514109241_1210239812938

> ID：12022297
> 
> 赞同：-1
> 
> 时间：2012-08-18T21:12:22.833
> 
> 标签：javascript, jquery

当我将“:))”放入我的 textarea 并通过 ajax 发送时，它会在数据库中输入一个类似“jQuery172039628539560362697_1345324072488”的值，我该如何阻止它？我是否应该首先在 javascript 中以某种方式解析我的文本以使其识别它的文本，而不是 javascript 编码的一部分？

这就是我获取文本的方式

```
var message = $("textarea.message_thread").val();
var dataString = 'id=' + id + '&message=' + message;
// make ajax call 
```

发送

```
$.ajax( 
                        {  
                            type: "POST",  
                            url: "/inbox/instsend",  
                            data: dataString,
                            dataType: 'json',
                            success: function(results) {}

                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:39:02.637

请参阅问题下的评论；问题是提交的`dataString`内容实际上是一个 url 编码的字符串，而不是 JSON 可化或 JSON 文字变量。

因此：

```
dataString = {id: id, message: message}; 
```

将解决这个问题，在这里。jQuery 将采用该对象初始化变量并将其编码为 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:14:47.543

当您使用 JSONP 进行跨域 AJAX 调用时，这是由 jQuery 自动完成的。它应该将此字符串作为`callback`参数的值发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T21:19:44.017

因为你在这里做 POST。这会起作用

```
var dataString = '{'+'id:' + id + 'message:' + message +'}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T21:15:24.507

您需要清理输入并转义任何控制代码 - 例如：和）

# c++ - 位域可以用作“穷人”的快速整数类型吗？

> ID：12022299
> 
> 赞同：6
> 
> 时间：2012-08-18T21:12:47.583
> 
> 标签：c++

我刚刚注意到 gcc 关于位域的一个有趣属性。如果我创建`struct`如下：

```
template <int N>
struct C
{
    unsigned long long data : N;
}; 
```

然后在 amd64 上：

1.  用*-m64* , 对于 N ∊ <1, 64>, `sizeof(C) == 8`;
2.  使用*-m32*，对于 N ∊ <1, 32>，`sizeof(C) == 4`对于 N ∊ <33, 64> `sizeof(C) == 8`，.

（与`sizeof(unsigned long long) == 8`）。

这似乎*最*类似于 C99/C++11 `uint_fastXX_t`，除了在我的系统上`sizeof(uint_fast8_t) == 1`。但是例如，我无法重现与`__int128`（总是导致`sizeof(C) == 16`）类似的任何东西。

*将前面提到的用作C++98 中*`struct`“穷人”的替代品对您来说似乎是个好主意吗？`uint_fastXX_t`

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T21:23:34.110

不——位域通常会比裸露的、未修饰的*慢*`int`得多，因为如果您执行的操作（例如，加法或乘法）可能会溢出指定大小，编译器将（通常）插入按位`and`指令以确保结果适合指定的大小。例如，如果您将两个 10 位数字相乘并将结果放在一个 10 位字段中，则乘法可能会产生最多 20 位的数字，因此编译器通常会产生 20 位的结果，使用按`and`位获取结果的 10 个最低有效位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T21:28:34.180

并不真地。在我们关心的大多数系统上`uint_fast32_t`，`uint_least32_t`、 和`uint32_t`将是同一类型。

例如，仅在[外来硬件](https://stackoverflow.com/a/6972551/597607)上，快速/最少类型可能是 36 位，而不是 32 位。*

# mysql - 使用数据库值重写动态网页的hta ccess中的URL？

> ID：12022302
> 
> 赞同：2
> 
> 时间：2012-08-18T21:13:19.830
> 
> 标签：mysql, apache, .htaccess

如果我有一个动态页面，它接受一个像 example.com/posts.php?id=2 这样的 id 参数，我如何在 htaccess 中创建一个 RewriteRule，以便 url 显示帖子的标题而不是它的 id，因此，例如posts.php?id=2 显示标题为“PHP 很酷”的帖子，我希望将url 重写为example.com/2/php-is-cool 或类似的东西？如果标题值存储在 MySQL 数据库中，这可能吗？

**附加信息：**

这就是我的 htaccess 的样子：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mydomain\.com$
RewriteRule (.*) http://www.mydomain.com/$1 [R=301,L]

ErrorDocument 404 /index.php
ErrorDocument 403 /index.php
php_value post_max_size 20M 
```

基本上，我有一个 MySQL 数据库，它将博客文章存储在一个名为 posts 的表中。posts 表有一个 id 属性（即自增主键）、一个 title 属性和一个 content 属性。当我访问 mydomain.com/posts.php?id=X 时，它会在网页上的数据库中显示我的帖子，其 id 为“X”。我只是希望能够重新编写 URL，以便它显示页面的标题。**我这样做主要是为了 SEO，而不是美学**。这可能使用 htaccess，还是我必须以不同的方式处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:21:09.233

重写规则适用于在后端 (apache) 上处理 URL 的方式。使用 mod_rewrite 重写这些 URL 不会影响用户在浏览器的 URL 栏中看到的内容，除非您将用户重定向到新的 URL（例如使用 302 重定向），这会导致浏览器重新加载页面。

您可以使用 HTML5 pushstate 功能实现您所要求的功能（如果该浏览器不支持 pushstate，则回退到 URL 哈希）。

查看此 URL 以了解更多详细信息：

[http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)

此外，您可以使用 BackboneJS 及其路由器功能在浏览器中处理您的页面和 URL 处理逻辑。

[http://backbonejs.org/#Router](http://backbonejs.org/#Router)

这是一种非常特定于应用程序的解决方案，如果不知道您的确切配置、应用程序逻辑等，这个答案就无法详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:31:47.107

如果您只为 SEO 做这件事，最简单的方法是将*所有*URL 传递给一个脚本，该脚本分析请求并从数据库中传递内容。像

```
RewriteRule (.*) index.php?url=$1 
```

当然，您必须从规则中排除 index.php。

# java - 具有唯一 ID 的 ArrayBlockingQueue

> ID：12022310
> 
> 赞同：0
> 
> 时间：2012-08-18T21:14:46.000
> 
> 标签：java, multithreading, synchronization, thread-safety, blockingqueue

在从 StackOverflow 获得帮助后，我找到了我在下面实现的解决方案。

**问题陈述：-**

每个线程每次都需要使用`UNIQUE ID`，并且必须运行`60 minutes`或更长时间，因此`60 minutes`有可能所有线程都`ID's`将完成，因此我需要`ID's`再次重用它们。所以我在`ArrayBlockingQueue`这里使用概念。

**两种情况：-**

1.  如果`command.getDataCriteria()`包含`Previous`，那么每个线程总是需要在`UNIQUE ID`之间使用`1 and 1000`并释放它以再次重用。
2.  否则，如果`command.getDataCriteria()`包含`New`，那么每个线程总是需要在`UNIQUE ID`之间使用`2000 and 3000`并释放它以再次重用。

**问题：-**

我刚刚注意到的一件奇怪的事情是 - 在下面的 else if 循环中，如果你在 run 方法中看到我的下面的代码，`command.getDataCriteria() is Previous`那么它也被输入到`else if block(which is for New)`其中不应该发生的事情，因为我正在做一个`.equals check`？为什么会这样？

```
else if(command.getDataCriteria().equals(PDSLnPConstants.DATA_CRITERIA_NEW)) { 
```

以下是我的代码： -

```
class ThreadNewTask implements Runnable {
      private Command command;
      private BlockingQueue<Integer> existPool;
      private BlockingQueue<Integer> newPool;
      private int existId;
      private int newId;

      public ThreadNewTask(Command command, BlockingQueue<Integer> pool1, BlockingQueue<Integer> pool2) {
            this.command = command;
            this.existPool = pool1;
            this.newPool = pool2;
      }

      public void run() {

            if(command.getDataCriteria().equals(PDSLnPConstants.DATA_CRITERIA_PREVIOUS)) {
                  try {
                        existId = existPool.take();
                        someMethod(existId);
                  } catch (Exception e) {
                        System.out.println(e);
                  } finally {
                        existPool.offer(existId);
                  }
            } else if(command.getDataCriteria().equals(PDSLnPConstants.DATA_CRITERIA_NEW)) {
                  try {
                        newId = newPool.take();
                        someMethod(newId);
                  } catch (Exception e) {
                        System.out.println(e);
                  } finally {
                        newPool.offer(newId);
                  }
            }
      }

      // And this method needs to be synchronized or not?
      private synchronized void someMethod(int i) {
            System.out.println();
            System.out.println("#####################");
            System.out.println("Task ID: " +i);
            System.out.println("#####################");
            System.out.println();
      }
}

public class TestingPool {
      public static void main(String[] args) throws InterruptedException {
            int size = 10;
            int durationOfRun = 60;
            LinkedList<Integer> availableExistingIds = new LinkedList<Integer>();
            LinkedList<Integer> availableNewIds = new LinkedList<Integer>();
            for (int i = 1; i <= 1000; i++) {
                  availableExistingIds.add(i);
            }
            for (int i = 2000; i <= 3000; i++) {
                  availableNewIds.add(i);
            }
            BlockingQueue<Integer> existIdPool = new ArrayBlockingQueue<Integer>(1000, false, availableExistingIds);
            BlockingQueue<Integer> newIdPool = new ArrayBlockingQueue<Integer>(1000, false, availableNewIds);

            // create thread pool with given size
            ExecutorService service = new ThreadPoolExecutor(size, size, 500L, TimeUnit.MILLISECONDS, new ArrayBlockingQueue<Runnable>(10), new ThreadPoolExecutor.CallerRunsPolicy()); 

            // queue some tasks
            long startTime = System.currentTimeMillis();
            long endTime = startTime + (durationOfRun * 60 * 1000L);

            // Running it for 60 minutes
            while(System.currentTimeMillis() <= endTime) {
                  Command nextCommand = getNextCommandToExecute();
                  service.submit(new ThreadNewTask(nextCommand, existIdPool, newIdPool));
            }

            // wait for termination        
            service.shutdown();
            service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS); 
      }
} 
```

**更新：-**

我刚刚注意到的一件奇怪的事情是 - 在下面的`else if loop`if `command is Previous`then 中，它也被输入到 else if 块中，这不应该发生对吗？为什么会这样？我不知道为什么会发生这种情况？

```
else if(command.getDataCriteria().equals(PDSLnPConstants.DATA_CRITERIA_NEW)) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:04:59.957

`if ()`如果你输入一个你也输入的，那么就没有办法了，`else`所以其他事情正在发生。我看不出你的代码有什么问题，所以我怀疑你误解了你的输出。你期待一个不同`Command`的来`getNextCommandToExecute()`吗？

我只是用一个模拟的来运行你的代码，`Command`它设置了一个随机值`dataCriteria`并得到了以下输出。我看不出有什么问题：

```
Task ID: 2001
Task ID: 1
Task ID: 2002
Task ID: 2003
Task ID: 2
Task ID: 2004
Task ID: 3
Task ID: 2005
... 
```

您是否期望您的线程有某种特定的时间安排？给定线程竞争条件，第一个`Command`生成的*不一定*是您将看到的第一个输出。

以下是对您的代码的一些一般反馈：

*   我会使用`pool.put(...)`而不是`offer(...)`which could return `false`。
*   您最好在构建队列后填充队列，而不是使用`LinkedList`.
*   你应该使用`ArrayList`而不是`LinkedList`通常。
*   您加载，`for (int i = 2000; i <= 3000; i++)`但需要从 2001 到 3000，否则它将超过 1000 个数字。

# java - Ubuntu脚本编译多个java文件？

> ID：12022313
> 
> 赞同：2
> 
> 时间：2012-08-18T21:15:01.987
> 
> 标签：java, linux, bash, unix, ubuntu

我知道该命令是`javac file_name.java`，但我将如何组合一个可以编译多个 java 文件的 shell 脚本？

我也在考虑复制文件，我认为我只是使用`cp`和绝对文件路径引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:17:30.450

创建一个 .sh 文件并添加以下内容。使文件成为可执行文件并运行它。（指定完整路径以及文件名）

```
#! /bin/sh
javac sample.java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:50:42.837

试试这个脚本：`compile_java_files.sh`

```
#!/bin/sh

typeset -r JAVA_FILES_DIR=$(cd full_path_to_java_files 2>/dev/null ; pwd)   # JAVA FILES DIRECTORY

LOG_DIR="/tmp/java_compilation/logs"    # Create this dir or use another one

for java_file in `ls $JAVA_FILES_DIR`;
do
    javac $java_file
    return_status=`echo $?`
    if [ $return_status -ne 0 ]
    then
        echo "Failed to compile $java_file" >> $LOG_DIR/$java_file.ERR

        exit 1
    fi
done 
```

然后运行您的脚本（不要忘记指定包含 java 文件的目录的路径）：

```
chmod +x compile_java_files.sh
./compile_java_files.sh 
```

# c++ - 访问指针数组/通过另一个指针并删除数组中的单个元素而不删除第一个指针或整个数组

> ID：12022314
> 
> 赞同：-1
> 
> 时间：2012-08-18T21:15:13.963
> 
> 标签：c++, pointers, multidimensional-array, delete-operator

在我的主窗口中，我创建了一个**PointerClass**的实例，它包含一个指向**PointerObject**的指针数组（我希望能够使用**PointerObject[X][Y]****访问**它并以**相同的方式删除它**，并检查**PointerObject[X] [Y] == NULL**（这就是我使用指针的**原因**））并且我不想要带有向量的解决方案。

 ******```
#define X 10
#define Y 10

class PointerObject
{
public:
        int X;
        int Y;
}

class PointerClass
{

public:
       PointerObject       *ArrayOfPointerObjects[X][Y];
}

PointerMethod(&PointerClass); 
```

然后，在我的 PointerMethod 中创建指向数组的指针：

```
PointerMethod(PointerClass *pointerClass)
{
     // don't know the right way to do this
     pointerClass->ArrayOfPointerObjects= new PointerObject[X][Y];

     // set all pointers in the array to NULL - is this needed?
     for (int x=0; x < X; x++)
     {
         for (int y=0; y < Y; y++)
         {
              pointerClass->ArrayOfPointerObjects[x][y] = NULL;
         }
     }

     // trying to store some data here
     pointerClass->ArrayOfPointerObjects[0][0] = new PointerObject;

     // trying to delete it
     delete pointerClass->ArrayOfPointerObjects[0][0];
     // or trying this:
     delete[] pointerClass->ArrayOfPointerObjects[0][0];

     // causes access violation or doesn't work
} 
```

我之前问过这个没有成功或关于错误类型的问题。

[通过另一个指针删除指向类中多维数组的指针 - 如何？](https://stackoverflow.com/questions/12009818/delete-pointer-to-multidimensional-array-in-class-through-another-pointer-how)

我可以访问数组，检查它是否为 NULL。但是当我调用 delete / delete[] pointerClass->ArrayOfPointerObjects[x][y] 时，它似乎删除了指向指针类的指针而不是 [X][Y] 处的元素，我想删除位置 [X] 处的指针[Y] 而不是指针类，我不想删除整个数组。

我怎样才能做到这一点而不会太复杂？我猜我的数组并不是真正的指针数组，只是指向数组的指针。但我希望它是存储在指针或其他东西中的指针数组。仍然重要的是我如何访问它以及如何删除数组中的元素。我需要能够检查指针是否为 NULL，如果不能删除该单个 PointerObject。

这样做的重要性在于我想要：

1.  使用 [X][Y] 访问 PointerObjects 数组
2.  检查数组中的对象是否为 NULL（=需要指针）
3.  删除指针数组中的单个项目，而不破坏指向 PointerClass 对象的指针或删除数组的其余部分。只需删除数组中某个 X、Y 位置的单个 PointerObject，以便删除后的 [X][Y] = NULL。

如果与我的其他线程有太多的混淆或相似之处，那是因为人们告诉我我不想要的东西并且它导致了主题，这里更好地说明了它是如何工作的以及我希望它如何工作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-18T22:15:09.073

嗯，我想是[这样的](http://ideone.com/6zJZw)

```
#include <iostream>

class Foo 
{
    int i_;
    int j_;
public:
    Foo(int i, int j) : i_(i), j_(j) {}

    void print_coords()
    {
        std::cout << this << " (" << i_ << ',' << j_ << ')' << std::endl;
    }
};

class Bar
{
public:
    Foo *arr[5][5];  
};

class Que
{
public:
    void init(Bar *b)
    {
        for(int i=0; i<5; i++)
            for(int j=0; j<5; j++)
                b->arr[i][j] = new Foo(i, j);
    }

    void print(Bar *b, int i, int j)
    {
        try {
            if(b->arr[i][j])
                b->arr[i][j]->print_coords();
            else
               throw 0;
        } catch (int e) {
            std::cout << &b->arr[i][j] << " points to null" << std::endl;
        }
    }

    void rem(Bar *b, int i, int j)
    {
        delete b->arr[i][j];
        b->arr[i][j] = 0;
    }
};

int main()
{
    Bar *b = new Bar();
    Que *q = new Que();

    q->init(b);
    q->print(b, 2, 2);
    q->rem(b, 2, 2);
    q->print(b, 2, 2);

    return 0;
} 
```******

# nginx - 基本的 nginx URL 重写问题

> ID：12022315
> 
> 赞同：0
> 
> 时间：2012-08-18T21:15:16.647
> 
> 标签：nginx

我对 nginx 完全陌生，我想知道是否有人可以帮我一把。

我想要改变的是：

domain.com/ngu/short.php?t=123

进入

domain.com/t/123

如果有人可以向我解释它是如何完成的，我将非常感激。我在网站上查看了类似的情况，但我没有发现任何完全相同的东西，所以我遇到了一些困难。感谢您的时间 ：）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:53:58.530

万一这对其他人有帮助，这就是我（实际上是朋友）最终做的事情：

```
 location / {
        root /home/jim/www;
        index  index.html index.htm index.php;
        if (!-f $request_filename) {
          rewrite ^/t/(.+)$ /ngu/short.php?t=$1 last;
          rewrite ^/u/(.+)$ /ngu/short.php?u=$1 last;
          rewrite ^/s/ /ngu/short.php last;
          break;
        }
    } 
```

我不明白，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:02:17.350

以下位置块进行重写：

```
location ~ /ngu/short.php {
  if ($args_t) {
    rewrite ^ http://$host/t/$v? last;
  }
} 
```

但这需要您枚举所有可能的论点，如果您有很多潜在的论点，它可能更容易做到

```
location ~ /ngu/short.php {
  if ($args ~ "([a-z]+)=(\d+)") {
    set $p $1;
    set $v $2;
    rewrite ^ http://$host/$p/$v? last;
  }
} 
```

解释：

*   我们在 /ngu/short.php 路径上做一个匹配的位置
*   上面的第一个代码块检查我们是否有 at=value 参数，如果有，则重写
*   上面的第二个代码块检查更通用的参数=某事。然后我们需要将反向引用保存在变量中，因为重写规则会重置反向引用，从而阻止直接使用它们
*   在任何一种情况下，如果 if 不匹配，将返回 404
*   $host 和 $args en $args_ 是标准 nginx 变量，请参见[http://wiki.nginx.org/HttpCoreModule#Variables](http://wiki.nginx.org/HttpCoreModule#Variables)
*   我们添加一个？广告重写结束以防止 nginx 读取 url 参数

# asp.net-mvc-3 - 使用 jquery 调用 webservice 方法时找不到页面错误

> ID：12022318
> 
> 赞同：0
> 
> 时间：2012-08-18T21:15:48.090
> 
> 标签：asp.net-mvc-3, jquery

我在 MVC Web 应用程序的根文件夹中创建了一个 WebService 目录，并创建了一个名为 MyService.asmx 的 Web 服务。在这个文件中，我创建了一个 UpdateReadCount 方法，我使用下面的代码从 javascript 调用该方法。

```
function updateReadCount(contentID) {

    $.ajax({
        type: "POST",
        url: "/WebServices/MyService.asmx/UpdateReadCount",
        data: "{'contentID': '" + contentID + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (json) {
            //$("#" + messageView).html(json.d);
        }

    });
} 
```

我收到页面未找到错误。这发生在托管页面上，而它在本地主机上完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:22:57.270

为什么将 .asmx 与 MVC 应用程序一起使用？你可以为此做一个干净的控制器动作。

# bash - bash echo 在没有文件名的 bash 变量中给出的文件行数

> ID：12022319
> 
> 赞同：81
> 
> 时间：2012-08-18T21:15:57.757
> 
> 标签：bash, wc

我在 bash 脚本中有以下三个结构：

```
NUMOFLINES=$(wc -l $JAVA_TAGS_FILE)
echo $NUMOFLINES" lines"

echo $(wc -l $JAVA_TAGS_FILE)" lines"

echo "$(wc -l $JAVA_TAGS_FILE) lines" 
```

当脚本运行时，它们都会产生相同的输出：

```
121711 /home/slash/.java_base.tag lines
121711 /home/slash/.java_base.tag lines
121711 /home/slash/.java_base.tag lines 
```

即文件的名称也被回显（我不想这样做）。为什么这些脚本会失败，我应该如何输出一个干净的：

```
121711 lines 
```

?

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-08-18T21:31:02.690

### 使用您自己的数据的示例

您可以避免将文件名嵌入到**NUMOFLINES**变量中，方法是使用来自**JAVA_TAGS_FILE**的重定向，而不是将文件名作为参数传递给*wc*。例如：

```
NUMOFLINES=$(wc -l < "$JAVA_TAGS_FILE") 
```

### 说明：使用管道或重定向来避免输出中的文件名

如果输入来自管道或重定向操作符，wc 实用程序将不会在其输出中打印文件名*。*考虑这些不同的例子：

```
# wc shows filename when the file is an argument
$ wc -l /etc/passwd
41 /etc/passwd

# filename is ignored when piped in on standard input
$ cat /etc/passwd | wc -l
41

# unusual redirection, but wc still ignores the filename
$ < /etc/passwd wc -l
41

# typical redirection, taking standard input from a file
$ wc -l < /etc/passwd
41 
```

如您所见，*wc*打印文件名的唯一时间是它作为参数传递，而不是作为标准输入上的数据传递。在某些情况下，您可能希望打印文件名，因此了解它何时显示很有用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-18T21:17:53.503

`wc`如果您不提供文件名，则无法获取文件名。

```
wc -l < "$JAVA_TAGS_FILE" 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-08-11T12:33:09.073

您还可以使用 awk：

`awk 'END {print NR,"lines"}' filename`

或者

`awk 'END {print NR}' filename`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-18T05:32:13.373

（适用于 Mac，可能还有其他 Unix）

实际上 wc 方法存在一个问题：如果它不以行尾符号终止，则它不计算最后一行。

改用这个

```
nbLines=$(cat -n file.txt | tail -n 1 | cut -f1 | xargs) 
```

甚至更好（感谢 gniourf_gniourf）：

```
nblines=$(grep -c '' file.txt) 
```

注意：chilicuil 的 awk 方法也有效。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-18T21:18:35.853

这是一个非常简单的：

```
NUMOFLINES=$(cat $JAVA_TAGS_FILE | wc -l ) 
```

或者

```
NUMOFLINES=$(wc -l $JAVA_TAGS_FILE | awk '{print $1}') 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-07-18T12:45:56.267

我通常使用 bash 的“反勾号”功能

```
export NUM_LINES=`wc -l filename` 
```

注意 'tick' 是 'back tick' 例如 ` 不是普通的单引号

# javascript - 用javascript为CSS创建一个新的单元类型？

> ID：12022321
> 
> 赞同：1
> 
> 时间：2012-08-18T21:16:17.540
> 
> 标签：javascript, jquery, css

有点奇怪的问题。或许更多的是好奇。

我希望能够向 CSS 添加新的单位类型。所以目前，我们有“px”、“%”、“em”之类的东西。

因为我知道我将要使用的屏幕尺寸，所以我想为毫米添加“mm”。这可能吗？我能找到的最接近的东西是 cssHooks，但那将是很多钩子！

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T21:19:09.937

CSS 已经有这个单元（[文档](http://www.w3.org/TR/css3-values/#absolute-lengths)），所以你可以[马上使用它](http://jsfiddle.net/DGYcp/)。

请注意，这可能不会在屏幕上给出以毫米为单位的确切尺寸。CSS 假定像素密度为 96dpi。

回答您的具体问题：**不，不可能使用 JavaScript 创建新的 CSS 单元**。但是，如果您知道屏幕的大小和您使用的分辨率（以像素为单位），您始终可以计算以像素为单位的等效值。例如，如果您在`1024x768px`屏幕上使用`40x30cm`，您可以假设`cm`( `10mm`) 在 附近`26px`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T21:20:39.503

您确实知道 CSS 中已经提供了毫米和厘米。

可用的 CSS 单位：

*   `em`（*ems*，元素字体的高度）
*   `ex`( *x-height* , 字母 "x" 的高度)
*   `px`（*像素*，相对于画布分辨率）
*   `in`（*英寸*；1 英寸=2.54 厘米）
*   `cm`（*厘米*；1cm=10mm）
*   `mm`（*毫米*）
*   `pt`（*点*；1pt=1/72in）
*   `pc`(*派卡斯*; 1pc=12pt)

绝对单位通常仅用于其他介质类型，如打印等。

您可以像这样使用 jQuery 设置它们：

```
$(element).css('height', '50mm'); 
```

[**小提琴**](http://jsfiddle.net/YNDYz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T21:42:02.867

如果您的屏幕**不是**96dpi，您*可以*使用支持变量的**CSS 预处理器**，例如**[SASS](http://sass-lang.com/)**。这样，您可以定义一个从毫米到像素的变量：

```
$mm = 2.83 // for 72dpi (72/25.4≈2.83)

.content
    width: 150px*$mm 
```

不过，它不是很优雅。它需要对所有样式表进行预处理，而且语法 ( `npx * $mm`) 很尴尬。

如果屏幕的 DPI 是可变的，您可以尝试使用[媒体查询](http://thesassway.com/intermediate/responsive-web-design-in-sass-using-media-queries-in-sass-32)来响应屏幕大小。我怀疑您可以`$mm`根据屏幕尺寸进行定义。不幸的是，据我所知，目前无法基于 DPI 进行定位。基于 Webkit 的移动浏览器支持`-webkit-device-pixel-ratio`，但那不一样。

# c# - C# 使用字符串生成器更改文本框行的颜色

> ID：12022326
> 
> 赞同：0
> 
> 时间：2012-08-18T21:16:34.713
> 
> 标签：c#, networking

我正在实施一个 ping 测试，以查看远程计算机是否在线。我有一个文本框，您可以在其中输入计算机 IP，然后有一个按钮，当按下该按钮时，会 ping 所有计算机以查看它们是否在线。我想更改线条的颜色以反映在线或离线（绿色或红色）。如果失败，我当前的代码会将整个文本框颜色更改为红色。

我的目标是，如果其中一台计算机未能通过 ping 测试，它会显示为红色，而其他计算机如果收到 ping 回复则保持绿色。

谢谢。

```
private void button_Click(object sender, EventArgs e)
{
    var sb = new StringBuilder();
    foreach (var line in txtcomputers.Lines)
    {
        string strhost = line;
        if (strhost.Length > 0)
        {
            Ping pingSender = new Ping();
            PingOptions options = new PingOptions();
            options.DontFragment = true;
            // Create a buffer of 32 bytes of data to be transmitted.  
            string data = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
            byte[] buffer = Encoding.ASCII.GetBytes(data);
            int timeout = 120;
            try
            {
                PingReply reply = pingSender.Send(strhost, timeout, buffer, options);
                if (reply.Status == IPStatus.Success)
                    txtcomputers.ForeColor = Color.Green;
                else
                    txtcomputers.ForeColor = Color.Red;
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T02:02:44.023

按照 Jon 的建议，在使用 RichTextBox 时，您需要使用[`SelectionStart`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectionstart.aspx)、和来获取每行的起始字符索引。看看这是否适合你。[`SelectionLength`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionlength%28v=vs.100%29)[`SelectionColor`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectioncolor%28v=vs.100%29)[`GetFirstCharIndexFromLine`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.getfirstcharindexfromline%28v=vs.100%29)

```
private void button_Click(object sender, EventArgs e)
{
    var sb = new StringBuilder();
    Color originalColor = txtcomputers.SelectionColor; ;

    for (int i = 0; i < txtcomputers.Lines.Count(); i++)
    {
        var line = txtcomputers.Lines[i];
        string strhost = line;
        if (strhost.Length > 0)
        {
            Ping pingSender = new Ping();
            PingOptions options = new PingOptions();
            options.DontFragment = true;
            // Create a buffer of 32 bytes of data to be transmitted.   
            string data = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
            byte[] buffer = Encoding.ASCII.GetBytes(data);
            int timeout = 120;
            try
            {
                PingReply reply = pingSender.Send(strhost, timeout, buffer, options);
                txtcomputers.SelectionStart = txtcomputers.GetFirstCharIndexFromLine(i);
                txtcomputers.SelectionLength = strhost.Length;

                if (reply.Status == IPStatus.Success)
                {
                    txtcomputers.SelectionColor = Color.Green;
                }
                else
                {
                    txtcomputers.SelectionColor = Color.Red;
                }

            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            txtcomputers.SelectionLength = 0;
        }
    }
    txtcomputers.SelectionColor = originalColor;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:18:02.107

我相信 a`TextBox`不能有多种颜色的文本。（至少在 Windows 窗体中。您尚未指定 GUI 使用的平台。）

你应该看看[`RichTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx)，这绝对允许这样做*。*

# objective-c - 如何获取 SecKeychainRef 的属性？

> ID：12022328
> 
> 赞同：0
> 
> 时间：2012-08-18T21:16:57.527
> 
> 标签：objective-c, ios, macos, keychain

如何检索`SecKeychainRef`对象的属性？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T01:31:21.473

对于那些寻找更一般的答案来替代弃用的问题`SecKeychainSearchCreateFromAttributes`（这是引导我到这个页面的搜索）的人，`SecItemCopyMatching`这是需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:44:51.790

根据上面的对话，听起来您正在寻找`SecKeychainFindGenericPassword()`或`SecKeychainFindInternetPassword()`。有关在 Mac OS X 中使用钥匙串的更多信息，包括替换最近弃用的 API，您应该阅读[钥匙串服务编程指南](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/keychainServConcepts/)

# visual-studio-2010 - 在 Azure 部署期间，Web.config 被神秘地破坏了

> ID：12022329
> 
> 赞同：1
> 
> 时间：2012-08-18T21:17:19.347
> 
> 标签：visual-studio-2010, azure, web-config, visual-studio-2012, azure-deployment

我知道这很奇怪，所以为了让你相信我并帮助我，我在这里提供了很多证据。

**问题：** Azure 部署期间下的`web.config`文件`site/1/views`已更改。

**事实：**

*   该文件存在于`.cspkg`包中，[此处不是这种情况](https://stackoverflow.com/questions/11050151/web-config-altered-drastically-during-azure-deployment)
*   没有其他`web.config`被改变，不是根，不是站点 2,3,4.. 中的那个，不是在区域中，不是在任何其他地方。整个解决方案有 10+ 个 web.config 文件，但只有这一个，下面的一个`Views`已经`site/1`改变。
*   文件没有被替换，被编辑，唯一的变化是`2.0.0.0`->`1.0.0.0`和 `4.0.0.0`to `3.0.0.0`，这是有针对性的破坏，我不得不说。没有其他任何改变，我自己定义的命名空间仍然存在。

**试过：**

*   远程桌面到 Azure 实例，编辑文件，站点工作，即使重新启动后也不会变回（除了在 Azure 界面重新启动，整个包刚刚重新加载）
*   重新打包重新部署，两次，没用。

**我对上次部署所做的更改，这是一个成功的部署**

*   立即安装 Visual Studio 2012 Ultimate 试用版
*   将整个解决方案从 MVC3 升级到 MVC4，Azure SDK 从 1.0 升级到 1.7
*   把所有项目从framework 4.0改成4.5，发现Azure不支持4.5，改回4.0
*   最终构建并打包
*   整个包在 Visual Studio 2010 下运行良好
*   整个解决方案也适用于本地

**图片**

**pic1**`web.config` site(1) Views文件夹下的 原始文件![在此处输入图像描述](../Images/e7c44bf0b0ab067072cb722700cc058d.png)

**pic2**`.cspkg`包装 内。![在此处输入图像描述](../Images/545a5a52cbf9d8360e0b2cf81052c354.png)

**pic3** 从远程桌面再次检查 ![在此处输入图像描述](../Images/e67c31be9f08092df5183fc3917c1e39.png)

**最后的话**

我知道有一个解决方案是让 site(1) 为空，一个虚拟站点，所以无论更改什么都无关紧要。或者只是加载我的备份并返回到 VS2010。但我真的很想知道它是如何改变的，以及如何避免它，谢谢。

# ios - 在使用#DEFINE 语句时，您是否失去了静态打字能力？

> ID：12022330
> 
> 赞同：0
> 
> 时间：2012-08-18T21:17:22.567
> 
> 标签：ios, objective-c, xcode, c-preprocessor, static-typing

定义时，我似乎失去了静态打字能力，

```
#define myAppDelegate (WorkClockAppDelegate *) [[UIApplication sharedApplication] delegate] 
```

去做这个，

```
[myAppDelegate doSomething]; 
```

Xcode 不知道**doSomething**是什么，尽管只要我知道自己在做什么，它就会编译并运行良好，而且**doSomething**实际上存在于 myAppDelegate 上！

有什么办法可以克服这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:04:20.970

你不会丢失它，不 - 你可能省略了`#import`，或者 s 的顺序`#import`可能是错误的。

> 有什么办法可以克服这个吗？

只需使用一个功能：

```
WorkClockAppDelegate * myAppDelegate() {
  // TODO add error checking
  return (WorkClockAppDelegate *) [[UIApplication sharedApplication] delegate];
} 
```

或方法：

```
+ (WorkClockAppDelegate *)workClockAppDelegate {
  // TODO add error checking
  return (WorkClockAppDelegate *) [[UIApplication sharedApplication] delegate];
} 
```

引入类型安全。

尽管您可以使用`extern`变量，但这不是很安全。

使用`#define`不是一个好的解决方案，imo。

# jquery - jQuery：附加消息出现后消失

> ID：12022331
> 
> 赞同：0
> 
> 时间：2012-08-18T21:17:28.823
> 
> 标签：jquery

我的`queue.html`样子

```
<div class="queue">
    <div class="player_controls">
        <button id="previous" class="btn btn-large navigator-button navigator-icons">
            <i class="icon-backward icon-large"></i>
        </button>
        <button id="play" class="btn btn-large navigator-button navigator-icons">
            <i class="icon-play icon-large"></i>
        </button>
        <button id="next" class="btn btn-large navigator-button navigator-icons">
            <i class="icon-forward icon-large"></i>
        </button>
        <button id="shuffle" class="btn btn-large navigator-button navigator-icons">
            <i class="icon-random icon-large"></i>
        </button>
    </div>

    <div class="queue_list">
        <!--p>your localStorage data will be displayed here</p-->
        <div class="queue_item hide-item">
            <img class="thumbnail" />
            <p class="title"></p>
        </div>
    </div>
</div> 
```

我的`jQuery`功能看起来像

```
$(function(){
    $('#queue').click(function(){
        $("#feature").load("templates/queue.html");
        var template = $('.queue_item').clone();
        if (localStorage['queue'] != null ) {
            $('.queue_list').append('<p>You have not added any video to the queue yet</p>');
        } else {
            var queue_list = JSON.parse(localStorage['queue']);
            for (var i = 0; i < queue_list.length; i++) {
                console.log(queue_list[i]);
            }
        }
    });

    $('body').on('click', '#play', function(){
        bootstrap_alert.success('will play video now');
    });

    $('body').on('click', '#previous', function(){
        bootstrap_alert.success('will play previous video now');
    });

    $('body').on('click', '#next', function(){
        bootstrap_alert.success('will play next video now');
    });

    $('body').on('click', '#shuffle', function(){
        bootstrap_alert.success('will shuffle videos now');
    });
}); 
```

`CSS`看起来像

```
.hide-item {
    display: none;
}

.view-item {
    display: block;
    height: 120px;
    margin-left: 1%;
} 
```

一旦我点击`Queue`按钮，上面的`jQuery`功能就会启动，它会快速显示`html`并`You have not added any video to the queue yet`消失。

为什么它不留在页面上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T19:24:37.260

我注意到您正在使用按钮。你把它们放在表格里了吗？如果您这样做了，浏览器将回发您的页面并刷新您的页面。该页面将恢复到其原始状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T21:33:37.323

我会大胆猜测并说您正在附加到一个`.queue_list`被该函数替换的元素`load()`。

尝试在加载新内容时在回调中进行附加：

```
$('#queue').click(function() {
    $("#feature").load("templates/queue.html", function() { //callback
        var template = $('.queue_item').clone();
        if (localStorage['queue'] != null) {
            $('.queue_list').append('<p>You have not added any video to the queue yet</p>');
        } else {
            var queue_list = JSON.parse(localStorage['queue']);
            for (var i = 0; i < queue_list.length; i++) {
                console.log(queue_list[i]);
            }
        }
    });

});​ 
```

# css - 将标志中的文本居中

> ID：12022335
> 
> 赞同：1
> 
> 时间：2012-08-18T21:17:42.587
> 
> 标签：css

如何在下图中将文本居中

我有这个

```
.flag{ 
    background: url('flag.png') no-repeat;
    width:120px; 
height:120px; 
}
</style>

<div class="flag">WOW</div> 
```

这就是它目前的显示方式 ![文本对齐错误](../Images/f0735290ffeef5fcae73b84ec6107323.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:19:52.370

```
text-align: center;
line-height: 120px; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T21:20:16.883

尝试：

```
.flag{ 
    background: url('flag.png') no-repeat;
    width:120px; 
    height:120px;
    text-align:center;
    line-height:120px;
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T21:20:17.063

利用

```
.flag{ 
    background: url('flag.png') no-repeat;
    width:120px; 
    height:120px; 
    line-height:120px; /* same as height */
    text-align:center;
} 
```

# html - 为什么当元素的子过渡结束时可以运行transitionend事件？

> ID：12022336
> 
> 赞同：6
> 
> 时间：2012-08-18T21:17:49.297
> 
> 标签：html, css, css-transitions, transition, transitions

`transitionend`我将一个事件绑定到`div1`. 当`div1`的过渡结束时，事件开始运行。这里没有问题。

我遇到了一个特殊情况：

我为此添加了 3 个段落`div1`，当每个段落的过渡结束时，`div1`'`transitionend`事件也会运行。因此，该`transitionend`事件运行了 4 次。>.<

在`div1`'`transitionend`事件的侦听器函数的主体中，我可以看到`event.target`!== `this`。我觉得很可笑！

Chrome 和 Firefox 都有这个问题。所以我猜这不是浏览器的 HTML5 规范实现错误。

谁能解释为什么元素的`transitionend`事件也可以由该元素的子元素触发？

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T21:31:59.257

这称为事件冒泡。默认情况下，子元素上发生的许多事件将在原始对象上调用事件处理程序后通过父元素冒泡。您可以通过检查`event`对象来检测冒泡，也可以通过在处理源对象上的事件时停止传播来防止冒泡。

停止传播是 IE 与其他浏览器不同的事情之一。在其他浏览器中，您调用：

```
event.stopPropagation() 
```

在 IE9 之前的 IE 中：

```
window.event.cancelBubble = true; 
```

# c# - 如何覆盖 DataGridRow 模板内的 AlternatingRowBackground？

> ID：12022343
> 
> 赞同：4
> 
> 时间：2012-08-18T21:18:18.733
> 
> 标签：c#, wpf, xaml, datagrid

我正在创建一个带有 AlternatingRowBackground 属性的行的 DataGrid。但是，必须修改行中的数据，这需要一些时间。

我正在尝试使行的背景颜色在初始化时显示为浅灰色。这是我在 RowTemplate 中所做的：

```
<ControlTemplate.Triggers>
    <DataTrigger Binding="{Binding Initialized}" Value="False">
        <Setter Property="Background" Value="LightGray"/>
    </DataTrigger>
</ControlTemplate.Triggers> 
```

但这不适用于仍具有 AlternatingRowBackground 中指定颜色的奇数行。

如何覆盖它，使所有未初始化的行都显示为浅灰色？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T05:30:29.810

我遇到了同样的问题，接下来为我工作：在样式中设置 AlternatingRowBackground，但不在 DataGrid 中。

```
 <Grid.Resources>
        <Style x:Key="dg" TargetType="DataGrid">
            <Setter Property="AlternatingRowBackground" Value="Orange"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
        </Style>
    </Grid.Resources>
    <DataGrid ItemsSource="{Binding Source={StaticResource one}, Path=Persons}" Style="{StaticResource dg}">
        <DataGrid.Columns>
            <DataGridTextColumn Width="*" Header="Name" Binding="{Binding Path=Name}"/>
        </DataGrid.Columns>
        <DataGrid.RowStyle>
            <Style TargetType="DataGridRow">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Mature}" Value="True">
                        <Setter Property="Background" Value="LightGray"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </DataGrid.RowStyle>
    </DataGrid> 
```

# c# - 如何在 C# 代码中模拟移位机？

> ID：12022348
> 
> 赞同：0
> 
> 时间：2012-08-18T21:18:41.930
> 
> 标签：c#, keyboard, keycode, shift

我正在使用这个代码来模拟按键或按键：

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
public static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, uint dwExtraInfo);
const uint KEYEVENTF_KEYUP = 0x0002;
const uint KEYEVENTF_EXTENDEDKEY = 0x0001;

// Key up
keybd_event((byte)Convert.ToInt32("A0"), 0, KEYEVENTF_KEYUP | 0, 0);

// Key down
keybd_event((byte)Convert.ToInt32("A0"), 0, KEYEVENTF_EXTENDEDKEY | 0, 0); 
```

根据[此表](http://delphi.about.com/od/objectpascalide/l/blvkc.htm)，左移键码为 A0。

由于某种原因，上面的代码不起作用。有谁知道为什么？非常感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:26:24.767

如果不需要使用[keycode](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx)`Keys.LShiftKey` ，那么您可以使用 System.Windows.Forms Namespace的[KEY 枚举](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)。

进一步使用

```
keybd_event((byte)0xA0, 0x45, KEYEVENTF_KEYUP | 0, 0); 
```

这不是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:39:10.763

我会[在这里](http://www.mods.com.au/budapi_docs/Virtual%20Key%20Codes.htm)使用钥匙。

```
 keybd_event(160, 0, KEYEVENTF_EXTENDEDKEY | 0, 0); 
```

# vb.net - vb.net 中的 Excel 工作表

> ID：12022350
> 
> 赞同：0
> 
> 时间：2012-08-18T21:18:53.227
> 
> 标签：vb.net, excel

有没有办法让当前工作表在 excel 中成为在 vb.net 中更改工作表时显示的工作表？假设我在工作表 1 上并通过 vb.net 将其更改为工作表 2，如果我输入数据，它将显示在工作表 2 上，但为了查看数据，我必须实际转到 excel 文件并选择工作表 2为了更改正在显示的实际工作表页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:38:27.270

尝试了这段代码，它似乎对我有用。诀窍是方法`sheet.Activate()`

```
Sub Main
    Dim excelApp as Microsoft.Office.Interop.Excel.Application = _
                    new Microsoft.Office.Interop.Excel.Application()
    Try  
        Dim inFile As String = "D:\temp\test.xls"
        ' Show excel ' 
        excelApp.Visible = true
        Dim excelWorkbook As Microsoft.Office.Interop.Excel._Workbook = _
                             excelApp.Workbooks.Open(infile)  

        Dim x as Integer 
        for x = excelApp.Sheets.Count to 1 step -1 
            Dim sheet as _Worksheet = CType(excelApp.Sheets(x), _Worksheet)
            sheet.Activate()   ' Activate the sheet'
            Thread.Sleep(5000) ' Sleep for 5 seconds to see the sheet'
        Next
        Finally  
            if excelApp IsNot Nothing then
                excelApp.DisplayAlerts = false
                'excelApp.Quit();  'remove the comment to close excel'
            End if
        End try
 End Sub 
```

# c# - 不同分组的 ICollectionViews 仍然可以在控件之间同步吗？

> ID：12022353
> 
> 赞同：0
> 
> 时间：2012-08-18T21:19:22.883
> 
> 标签：c#, wpf

假设我有一个运动运动员的内存集合，包括他们就读的大学、他们的位置和当前球队，绑定到 3 个不同的控件（ListBoxes），以便按这 3 个不同的分组浏览不同的运动员

是否可以将 3 个控件与不同的 ICollectionView 同步，以便一个选择与其他选择同步？或者只有当它们都绑定到同一个 ICollectionView 实例时才有可能？我已经设置了 3 个 ListBoxes IsSynchronizedWithCurrentItem="true" 但我怀疑这仅在它们使用相同的 ICollectionView 时才有效？

这就是我在我的代码中所做的：

```
 ICollectionView collegeView = new ListCollectionView(playerDatabase);
        collegeView.GroupDescriptions.Add(new PropertyGroupDescription("CollegeName"));
        collegeView.SortDescriptions.Add(new SortDescription("CollegeName", ListSortDirection.Ascending));
        collegeView.SortDescriptions.Add(new SortDescription("FirstName", ListSortDirection.Ascending));
        lstCollege.ItemsSource = collegeView;

        ICollectionView positionView = new ListCollectionView(playerDatabase);
        positionView.GroupDescriptions.Add(new PropertyGroupDescription("PositionCode", new NFLPositionGrouper()));
        positionView.SortDescriptions.Add(new SortDescription("PositionName", ListSortDirection.Ascending));
        positionView.SortDescriptions.Add(new SortDescription("FirstName", ListSortDirection.Ascending)); 
```

playerDatabase 变量来自投射匿名类型的 LINQ to Entity 查询。

顺便说一句，原始数据库中大约有 2000 行 - 初始界面似乎需要明显的 1 秒才能开始绘制自己是否有其他方法可以更有效地做到这一点？只要我不替换 ControlTemplate 并因此删除 VirtualizingStackPanel（但我确实有 ItemTemplate 和 HeaderTemplate 的 DataTemplates），我就不会无意中禁用项目虚拟化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:47:39.757

这些`CollectionView`行为很像数据库中的视图，因为它有点像实际数据的实时快照，您可以对其进行分组、排序、过滤等。如果您使用 3 个单独的 CollectionView，我不相信`IsSynchronizedWithCurrentItem`会在其中工作这种情况是因为我相信可能取决于一个单一的，`ICollectionView`.

但是，您没有理由不能在 ViewModel 中创建一个属性（您是否使用 MVVM？如果没有，我强烈推荐它）代表 CurrentPlayer 并将`SelectedItem`所有 ListBox 的属性绑定到该属性（确保属性引发`NotifyPropertyChanged`事件）。

# css - rails image hover - 在底部显示黑条

> ID：12022354
> 
> 赞同：0
> 
> 时间：2012-08-18T21:19:33.877
> 
> 标签：css

我正在使用 Rails，并从创建顶部带有徽标的应用程序布局开始。徽标是指向主页的链接。

当我将图像悬停时，它会在其底部创建一个黑条，它必须是默认样式或其他东西，但我似乎找不到任何使它这样做的地方..

有没有其他人经历过这个？

谢谢

另外 - 为了尝试调试它，我打开了 chrome 调试器并观察了链接元素和图像元素的样式，当我悬停和不悬停之间没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:32:11.380

只需添加 CSS 行：

```
a:hover { text-decoration: none; } 
```

# python - Python - Windows 最大目录路径长度解决方法

> ID：12022364
> 
> 赞同：1
> 
> 时间：2012-08-18T21:20:47.623
> 
> 标签：python, windows

问题是使用python创建多个目录时windows中路径的字符限制`os.makedirs()`

在发布此问题之前，我在搜索我的问题时发现了此帖子：

[python win32文件名长度解决方法](https://stackoverflow.com/questions/3555527/python-win32-filename-length-workaround)

现在选择的答案建议了前缀解决方法，但我的问题是，有没有办法确保 Windows 和 UNIX 中的功能？

我想到的另一种方法是一个一个地创建文件夹，然后创建文件，这样你就永远不会超过路径长度，但我无法弄清楚代码中的明显错误。

```
path = ['folder1/s1/s1/abc.txt',
        'folder1/s1/s2/def.txt']

def makedirs(path):
    explode = path.split('/')
    for i in range(len(explode)-1):
        os.mkdir(explode[i])
        os.chdir(explode[i])

        if i == len(explode) -2:
            download_file(explode[i+1])

    # something to go back here
    os.chdir('../' * (len(explode)-3)) # ??

makedirs(path[0]) 
```

现在这只适用于第一行，因为我不知道如何回到根目录或重置它。如果没有“重置”，文件夹就在彼此之下：

`folder1/s1/s1/folder1/s1/s1/abc.txt`（或类似的东西）

我可以设置从根目录的路径来重置它，但是我们可能会遇到同样的问题，即达到最大长度。任何有关如何使其在两个操作系统上工作的帮助都将不胜感激！

请随时指出我错在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:48:36.937

您需要使用 unc 路径和 unicode 文件名，但并非所有 python 函数都知道这一点，os.mkdir 有效，而 os.makedirs 无效

```
import os

path = u'\\\\?\\c:\\'

for i in xrange(1000):
    path += u'subdir\\'
    os.mkdir(path) 
```

但最好也提供删除它们的代码，Windows资源管理器无法删除

```
import os

path = u'\\\\?\\c:\\'

for i in xrange(1000, 0, -1):
    try:
        os.rmdir(path + (u'subdir\\' * i))
    except:
        pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:32:10.163

根据[这个 stackoverflow 答案](https://stackoverflow.com/a/6306377/145999)：虽然 chdir 可以使用 os.chdir("..") 上一个目录，但与平台无关的方式是：`os.chdir(os.pardir)`.

在一个循环中调用这个 N 次；
或尝试像这样的不可读的单行（未经测试）：
`os.chdir(os.path.join(*([os.pardir] * NUM_TIMES)))`

（除了 path.split('/')，​​您还可以使用[此处描述的方法](https://stackoverflow.com/a/3167684/145999)使其适用于所有操作系统）

# search - 带有选择器的 AST

> ID：12022367
> 
> 赞同：0
> 
> 时间：2012-08-18T21:21:31.120
> 
> 标签：search, language-agnostic, metaprogramming, abstract-syntax-tree

我正在寻找允许使用选择器在 AST 上搜索给定语言的语言/库（即“/function(int, int)”以查找具有给定签名或“namespace(name=xxx)/method(name=yyy) 的所有函数*)" 以查找给定命名空间中以 yyy 开头的所有方法）。

我知道总是有可能将 AST 转换为 XML 并使用 XPath / XQuery，但我正在寻找内置或易于与语言集成的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:06:49.853

[http://cs.nyu.edu/~lharris/content/programquerylangs.html](http://cs.nyu.edu/~lharris/content/programquerylangs.html)

当我在玩这样的东西时，我的重点最初是专门面向 Java 的，也使用 Eclipse AST 工具。这与语言无关，我所知道的大多数工具也不是。

但是，它确实包含了一些项目链接（我只玩过其中两个，而且很长一段时间都没有），这可能会给你一些想法，尽管我不清楚你想从答案中得到什么样的信息。AST 本身与实现紧密相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:08:04.257

这是实用的：[https ://live.gnome.org/GObjectIntrospection/](https://live.gnome.org/GObjectIntrospection/)

以及 gcc 插件 dehydra：[https](https://developer.mozilla.org/en-US/docs/Dehydra) ://developer.mozilla.org/en-US/docs/Dehydra LLVM 有很多项目：[http ://llvm.org/ProjectsWithLLVM/](http://llvm.org/ProjectsWithLLVM/)

这是理论上的：http: [//www.complang.org/colm/](http://www.complang.org/colm/)但可能很有趣。

另请参阅此线程，关于使用 OWL/语义网进行查询的主题：http: [//lists.w3.org/Archives/Public/semantic-web/2012Aug/0077.html](http://lists.w3.org/Archives/Public/semantic-web/2012Aug/0077.html)

# titanium - 使用钛每 5 秒抓取一次 json 内容

> ID：12022374
> 
> 赞同：0
> 
> 时间：2012-08-18T21:22:55.160
> 
> 标签：titanium, titanium-mobile

我想做以下事情：

每 5 秒访问一个 url，从 url 中获取 json 内容，并显示在 iphone 应用程序屏幕上。

我怎样才能使用钛移动做到这一点？

我尝试使用 onload 和 addEventListener 函数，但无济于事......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:49:46.803

我的代码只是向您展示如何获取数据，但并非每 5 秒一次。它在每个请求加载后 5 秒执行抓取 json。

```
function grab_json() {
    // do something with grabbing json data
    var xhr = Titanium.Network.createHTTPClient({
        onload: function(e) {
            // do something

            // when finish, grab the json data in the next 5 seconds
            setTimeout(function() {
                grab_json();
            }, 5000);
        }
    });
    xhr.open("GET", "your-url-here");
    xhr.send();
}

// execute the function when view loaded
grab_json(); 
```

# c++ - 对话框在错误的地方

> ID：12022380
> 
> 赞同：0
> 
> 时间：2012-08-18T21:23:40.043
> 
> 标签：c++, windows, winapi

我对此一无所知，甚至不确定要发布什么代码。

我有一个 C++ 应用程序。初始窗口有一个编辑控件、自定义控件和菜单。当用户按下 F5 时，会打开一个带有自己的消息循环的新窗口。然后新窗口打开一个对话框，并按预期显示为模态。

奇怪的是对话框似乎隐藏在第二个窗口后面。我必须 alt-tab 到第一个窗口，然后 alt-tab 回到第二个窗口才能进入对话框。

如果我取消对话框，第二个窗口被破坏（如预期），并显示一个消息框（如预期），但该消息框似乎隐藏在第一个窗口后面。同样，我必须按两次 alt-tab 才能将 MessageBox 放在最前面，然后就可以了。

有没有人知道什么会导致 DialogBox 和 MessageBox 出现这种奇怪的 Pop-Under 行为？

谢谢！

创建对话框的代码

INT_PTR ip = DialogBox(GetModuleHandle(NULL), MAKEINTRESOURCE(IDD_AMBIGUOUS), this->hWnd, DlgAmbiguous);

DlgAmbiguous Proceduels 的代码

```
INT_PTR CALLBACK DlgAmbiguous(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    UNREFERENCED_PARAMETER(lParam);
    switch (message)
    {
    case WM_INITDIALOG:
        {
            HWND hStaticTerm = GetDlgItem(hDlg, IDC_TERM);
            SetWindowText(hStaticTerm, lpAmbiguousTerm);

            if (wcscmp(lpAmbiguousTerm, L"canvas") == 0)
            {
                HWND hComboBox = GetDlgItem(hDlg, IDC_MEANING);
                SendMessage(hComboBox, CB_ADDSTRING, NULL, reinterpret_cast<LPARAM>(_T("Program Window")));
                SendMessage(hComboBox, CB_ADDSTRING, NULL, reinterpret_cast<LPARAM>(_T("Region in Program Window")));
            }

            return (INT_PTR)TRUE;
        }
    case WM_COMMAND:
        if (LOWORD(wParam) == IDOK)
        {
            HWND hComboBox = GetDlgItem(hDlg, IDC_MEANING);
            iAmbiguousResult = SendMessage(hComboBox, CB_GETCURSEL, NULL, NULL);
            EndDialog(hDlg, iAmbiguousResult + 100);
            return (iAmbiguousResult == -1) ? FALSE : TRUE;
        }
        else if (LOWORD(wParam) == IDCANCEL)
        {
            EndDialog(hDlg, DLG_CANCEL);
            return (INT_PTR)FALSE;
        }
        break;
    }
    return (INT_PTR)FALSE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:27:18.023

当你打开一个窗口时，不管它是否在同一个线程上运行，指定它的父窗口是有意义的。这将强制新窗口出现在其父窗口上方。这同样适用于对话框：

```
INT_PTR WINAPI DialogBox(
  _In_opt_  HINSTANCE hInstance,
  _In_      LPCTSTR lpTemplate,
  _In_opt_  HWND hWndParent,
  _In_opt_  DLGPROC lpDialogFunc
); 
```

注意第三个参数。将窗口置于顶部的其他选项是调用该 `SetWindowPos`函数。

# ios - UITableView/UITableView 单元格索引问题

> ID：12022383
> 
> 赞同：0
> 
> 时间：2012-08-18T21:24:05.543
> 
> 标签：ios, uitableview, if-statement

我正在为我的网络浏览器制作一个书签页面，问题是每次我添加一个新对象时，我都必须设置属性，因为我创建了一个自定义单元格（我必须设置两个标签的文本），所以我需要一种方法仅编辑新添加的对象...我熟悉索引，但无法提出任何解决此问题的方法...例如，当我将第一页添加为书签时，它很好，但是一旦我将 2 页添加为书签，则 2细胞是完全相同的......有什么想法吗？

这是我的代码：

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"CustomCell";

CustomCell *cell = (CustomCell*)
[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:nil options:nil];
    cell = (CustomCell *) [nib objectAtIndex:0];

}

// Set up the cell...

     NSString *theTitle=[webView stringByEvaluatingJavaScriptFromString:@"document.title"];
NSString *currentURL = webView.request.URL.absoluteString;
      cell.websiteTitle.text = theTitle;
cell.websiteURL.text = currentURL;
universalURL = currentURL;

return cell;
} 
```

设置单元格时，我需要指向最新的单元格！

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:53:05.113

你的方法行不通。您不能将单元格用作标题和 URL 的存储，因为单元格被*重复使用*（并且因为它是糟糕的设计）。表格视图只为可见行分配单元格，并在滚动表格视图时为不同的行重用一个单元格。

相反，您应该将标题和 URL 存储在单独的*数据源*中，例如`NSMutableArray *bookmarks`数组中的每个项目都是一个`NSDictionary`带有“标题”和“URL”键的位置。

要将书签添加到您的表格中，您只需将一个新条目附加到数组并调用`reloadData`表格视图。

然后，该`tableView:cellForRowAtIndexPath:`方法可以使用`bookmarks`具有行号的数组`indexPath.row`来填充单元格的所有元素。

# python - 传递 HTTPS POST 参数进行身份验证

> ID：12022384
> 
> 赞同：0
> 
> 时间：2012-08-18T21:24:08.827
> 
> 标签：python, https

```
<h2 class="block-title">
  <img class="img img-16 img-grey-down"
       src="https://sstatic.fotolia.com/v2010/pics/all/img/clear.gif"
       alt="arrow" />
  I already have an account
  <span class="block-title-right"></span>
</h2>

<div class="block-content">
  <p>Welcome back!</p>
  <form action="/Member/Login" method="post">
    <div class="form login-form mini-form">

      <div class="form-line on">
        <label class="form-label" for="login">
          Login <span class="form-required">*</span>
        </label>
        <input type="text" name="login" id="login" value="" class="form-text" tabindex="1" />
        <div class="cb"></div>
      </div>

      <div class="form-line">
        <label class="form-label" for="password">
          Password <span class="form-required">*</span>
        </label>
        <input type="password" name="password" id="password" value="" class="form-text" tabindex="2" />
        <div class="cb"></div>
      </div>

      <div class="form-line remember-form-line on">
        <a class="form-lost" href="http://www.fotolia.com/Member/ForgotPassword">
          Forgot password?
        </a>
        <label class="form-label" for="remember_me">
          <input type="checkbox" name="remember_me" id="remember_me" value="1" class="form-checkbox" tabindex="3" />
          Remember me
        </label>
        <div class="cb"></div>
      </div>

      <div class="form-action">
        <input type="submit" name="signin" id="signin" value="Login " class="button button-S-L color-1-button" tabindex="4" />
        <div class="cb"></div>
      </div>

    </div>
  </form>
</div> 
```

你好！我正在尝试发布变量登录凭据，但不幸的是，它没有给我登录后页面*（我们在成功登录后获得的页面）*，目前代码是这样的：

```
import os 
import httplib, urllib 
import urllib import urllib2

def file_write(filename, text_to_write):   
    f = open(filename, 'w')  
    f.write(text_to_write)   
    f.close() 

if __name__ == "__main__":
    url = 'https://www.fotolia.com/Member/Login'
    user_agent ='Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'
    values = {
        'login': 'XXXXXXXXXXX',
        'password': 'Random123',
    }
    headers = {'User-Agent': "some-user-agent"}

    data = urllib.urlencode(values)   
    req = urllib2.Request(url, data, headers)   
    response = urllib2.urlopen(req)   
    the_page = response.read()   
    file_write('output.html', the_page) 
```

### 问题：

处理页面没有文件扩展名，让我们看看这里的表单动作写成 /Member/Login ？并且协议是 HTTPS，我应该如何处理这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:36:57.550

尝试

```
values = {
           'login' :'XXXXXXXXXXX',
           'password' : 'Random123',
           'submit' : 'Login',
         } 
```

# jquery - Jquery 标签粘贴

> ID：12022385
> 
> 赞同：0
> 
> 时间：2012-08-18T21:24:17.907
> 
> 标签：jquery, tabs

```
$('li > a').click(function (event, ui) {
    location = $(this).attr('href');
    if (location != "gala") {
        actions.load_location(location);
    } else {
        actions.bp_gala();
    }
});

or

$("#tabs").tabs(show: function (event, ui) {
    switch (ui.index) {
    case 0:
        actions.load_location("home");
        break;
    case 1:
        actions.bp_gala();
        break;
    case 4:
        actions.load_location("barcelona");
        break;
    case 5:
        actions.load_location("cruise");
        break;
    }
    //window.location.replace(ui.tab.hash);
}
}); 
```

我试过添加`event.stopPropagation()`，但第一次点击后事件似乎冒泡/标签棒。尝试了`$(Document).ready`各种组合，但似乎没有任何效果。关于这一点的更多信息是我正在动态创建第二个选项卡。当我重新加载特定位置时，我会清除 subTab 并重建它。这就是我将问题缩小到的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:39:00.607

```
$("#tabs").tabs({
show: function(event, ui) { 
switch(ui.index)
{
case 0:
$('#home').html('<div id="homeSubtabs"><ul></ul></div>');
actions.get_job_list("home");
  break;
case 1:
actions.bp_gala();
  break;
case 4:
$('#barcelona').html('<div id="barcelonaSubtabs"><ul></ul></div>');
actions.get_job_list("barcelona");
  break;
case 5:
$('#cruise').html('<div id="cruiseSubtabs"><ul></ul></div>');
actions.get_job_list("cruise");
  break;
}
       //window.location.replace(ui.tab.hash);
}
}); 
```

解决了！事实证明，在动态创建子选项卡时，您需要从我正在调用的函数之外清除内容。如您所见，开关内的 div 。

# sql - 在带有 TRY-CATCH 块的事务中返回

> ID：12022387
> 
> 赞同：7
> 
> 时间：2012-08-18T21:25:02.047
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有以下代码，作为一个通用示例，我想知道如果事务以`RETURN`.

```
BEGIN TRANSACTION
    BEGIN TRY
        IF NOT EXISTS(SELECT 1 FROM dbo.tblProducts WHERE intProductID = @intProductID)
            BEGIN
                SELECT 'Product does not exists' AS strMessage
                RETURN
            END

        UPDATE dbo.tblProducts SET
            curPrice = 10
        WHERE
            intProductID = @intProductID

        SELECT 'Success' AS strMessage

    END TRY 

    BEGIN CATCH
        SELECT ERROR_MESSAGE() AS strMessage
        IF @@TRANCOUNT > 0
            ROLLBACK TRANSACTION
    END CATCH

IF @@TRANCOUNT > 0
    COMMIT TRANSACTION 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T09:06:59.033

它应该像下面

```
BEGIN TRY
    SET NOCOUNT ON
    SET XACT_ABORT ON
    BEGIN TRANSACTION
        IF NOT EXISTS(SELECT 1 FROM dbo.tblProducts 
                          WHERE intProductID = @intProductID)
        BEGIN
            SELECT 'Product does not exists' AS strMessage
            Rollback TRan
            RETURN
        END

        UPDATE dbo.tblProducts SET
        curPrice = 10
        WHERE
        intProductID = @intProductID

        SELECT 'Success' AS strMessage
    COMMIT TRAN
END TRY 

BEGIN CATCH
    SELECT ERROR_MESSAGE() AS strMessage
    ROLLBACK TRANSACTION
END CATCH 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T02:54:06.617

我只是通过运行上面的代码然后检查`SELECT @@TRANCOUNT`然后尝试`ROLLBACK`. 返回后，`@@TRANCOUNT`为 1，我能够`rollback`成功交易，表明它处于`transaction`打开状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-28T20:44:07.437

此代码适用于嵌套事务：

```
BEGIN TRY
   IF @@TRANCOUNT > 0
      SAVE TRANSACTION MyTransactionName
   ELSE
       BEGIN TRANSACTION MyTransactionName

    IF NOT EXISTS(SELECT 1 FROM dbo.tblProducts WHERE intProductID = @intProductID)
        BEGIN
            SELECT 'Product does not exists' AS strMessage
            ROLLBACK TRANSACTION MyTransactionName
            RETURN
        END

    UPDATE dbo.tblProducts SET
        curPrice = 10
    WHERE
        intProductID = @intProductID

    SELECT 'Success' AS strMessage

    COMMIT TRANSACTION MyTransactionName
END TRY 

BEGIN CATCH
    SELECT ERROR_MESSAGE() AS strMessage
    ROLLBACK TRANSACTION MyTransactionName
END CATCH 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-28T21:26:17.987

请参阅我在以下 DBA.StackExchange 答案中发布的存储过程模板，因为它解决了 TRY / CATCH 与事务的使用，并且它处理嵌套调用，即使事务是在应用程序层中打开的：

[我们是否需要在 C# 代码和存储过程中处理事务](https://dba.stackexchange.com/questions/93258/are-we-required-to-handle-transaction-in-c-code-as-well-as-in-store-procedure/93265#93265)

# python - 在python Gtk3中使弹出GtkMenu透明且无边框

> ID：12022389
> 
> 赞同：3
> 
> 时间：2012-08-18T21:25:14.630
> 
> 标签：python, user-interface, cairo, gtk3

我无法使用 Python 和 Gtk3 制作无边框和透明的弹出菜单。使用相同的代码，我可以使我的主窗口和消息对话框具有适当的样式，那么我的代码有什么问题？在 CSS 定义中添加`border-style: none` *（或如下所示的每一侧）*只会删除底部边框。这是我所拥有的屏幕截图。您可以在后面看到格式正确的主窗口。Cairo 正确绘制了弹出窗口的背景*（注意白色矩形内的圆角，但它不透明）*。

          ![截屏](../Images/2c99bcf2f14239162b78275ddf3ea4bb.png)

**编辑**我能够通过获取父级`Gtk.Menu`并在其上设置/绘图来使菜单透明。但我一直无法摆脱顶部、左侧和右侧的边框。只是底部。

以下是相关代码：

```
def __init__(self):
   ....#other code...

   css.load_from_data("""
        .title { background-color: rgba(255, 255, 255, 0); color: rgba(%s,1);}
        .iconview { background-color: rgba(255, 255, 255, 0); color: rgba(%s,1); font-size:%i}
        .background2 { background-color: rgba(%s,0.7);  color: rgba(%s, 1);border-top-style:none; border-left-style:none; border-right-style:none; border-bottom-style:none;}
    """ % (str(sel f.FONT_rgb).strip('[]'),str(self.FONT_rgb).strip('[]'),FONTSIZE,str(self.BG_rgb).strip('[]'),str(self.FONT_rgb).strip('[]')))
    Gtk.StyleContext.add_provider_for_screen(Gdk.Screen.get_default(), css,
        Gtk.STYLE_PROVIDER_PRIORITY_APPLICATION)

    parent=self.popup.get_parent()
    screen=parent.get_screen()

    parent.set_visual(screen.get_rgba_visual())
    parent.set_app_paintable(True)
    parent.get_style_context().add_class('background2')

    for child in self.popup.get_children():
        child.get_style_context().add_class('iconview')
        child.set_app_paintable(True)
    self.popup.get_style_context().add_class('iconview')
    self.popup.set_app_paintable(True)

    parent.connect("draw", self.draw_window_cb)

def on_mouse_click(self,widget, event):
    # Check if right mouse button was preseed
    if event.type == Gdk.EventType.BUTTON_RELEASE and self.dragging==False:

        if event.button == 3 and path != None:
            self.popup.popup(None, None, None, None, event.button, event.time) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:32:34.993

尝试：

```
border-radius: 15       
border-width: 0 
```

# javascript - 为什么 Firefox 和 Chrome 控制台中的“}{”这样的结构会返回“未定义”？

> ID：12022390
> 
> 赞同：3
> 
> 时间：2012-08-18T21:26:19.917
> 
> 标签：javascript, firefox, google-chrome-devtools

如果我输入

```
}{ 
```

在 Firefox 或 Chrome 的控制台中，结果是**undefined**，*而不是*SyntaxError。

此构造返回**未定义**（构造如 }!{ 返回 false）。这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T21:35:30.950

当您[`debugger;`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/debugger)在控制台中输入时，会出现一个断点，其中显示了答案：

```
with ((window && window.console && window.console._commandLineAPI) || {}) {
debugger;
} 
```

在 Chrome 的开发者工具中，输入被包装在一个`with`块中，然后进行逐字评估。因此，当您输入 时`}{`，将评估以下内容：

```
with ((window && window.console && window.console._commandLineAPI) || {}) {
}{
} 
```

这是一个空`with`块，后面是一个空块。

给读者的练习：试试`}for(;;){`

# ios - 检查文件是否可以使用 AVAudioPlayer 播放

> ID：12022394
> 
> 赞同：3
> 
> 时间：2012-08-18T21:27:35.220
> 
> 标签：ios, avaudioplayer

有没有一种方法可以用来确定文件是否可由 AVAudioPlayer 播放？这比将文件类型检查到类型列表更容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T01:44:59.367

参考以下代码。

```
NSString *pathExtension = [audioFilePath pathExtension];
CFStringRef preferredUTI = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, (CFStringRef)pathExtension, NULL);
BOOL fileConformsToUTI = UTTypeConformsTo(preferredUTI, kUTTypeAudio);

if(fileConformsToUTI)
{
    NSLog(@"playable");
}
else
{
    NSLog(@"not playable");
} 
```

# java - KeyListener 源

> ID：12022400
> 
> 赞同：0
> 
> 时间：2012-08-18T21:29:19.683
> 
> 标签：java, listener, keylistener

如何访问 KeyListener 本身与 KeyListener 关联的组件？

确切地说，我必须创建一个与整个 JTextArea 数组相关联的通用密钥侦听器，并且我需要从中访问它们中的每一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:35:36.660

您可以在组件所在的类中创建 KeyListener 作为内部类。

第二种选择是将组件作为参数传递给 KeyListener 的构造函数，但这会增加耦合。

实际上，内部类已被添加到 Java 中，这是出现这种情况的原因之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T22:08:36.523

`KeyEvent`附带起源于“附加”的组件，`KeyEvent`可以使用它的[`getComponent`方法](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ComponentEvent.html#getComponent%28%29)访问它。

# html - 发布提交按钮值

> ID：12022401
> 
> 赞同：0
> 
> 时间：2012-08-18T21:30:03.273
> 
> 标签：html

在我正在制作的表单中，我需要通知处理 php 脚本单击了哪个按钮。我有三个按钮，新建、保存和删除。我希望发布表单和所有按钮值，但表单 + 按钮点击后才会发布。我在这里查看 html 规范[http://www.w3.org/TR/html401/interact/forms.html#submit-format](http://www.w3.org/TR/html401/interact/forms.html#submit-format)但如果这是预期的，我还没有找到一些解释。我有这个 php 脚本

```
<?php
/**
tpost.php
*/
//Buttons
$new = $_POST['new'];
$save = $_POST['save'];
$delete = $_POST['delete'];
//Error: Notice: Undefined index: save in C:\wamp\www\form-dev\troll.php on line 7
//Forms
$city = $_POST['city'];
$zip = $_POST['zip'];
$cs = $_POST['cs'];
//Error: Notice: Undefined index: save in C:\wamp\www\form-dev\troll.php on line 8
//Buttons echo
echo '<b>'.$new.'</b>' .'<br/>';
echo '<b>'.$save.'</b>' .'<br/>';
echo '<b>'.$delete.'</b>' .'<br/>';

//Forms echo

echo '<b>'.$city.'</b>' .'<br/>';
echo '<b>'.$zip.'</b>' .'<br/>';
echo '<b>'.$cs.'</b>' .'<br/>';
?> 
```

这是我正在使用的 html

```
<!Doctype html>
<head>
<meta charset="uft-8">
<title>Buttons post</title>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<style type="text/css">
label{
width:15%;
float:left;
font-style:italic;
}
</style>
<script type="text/javascript">
$(document).ready(function() {
   $('.inew').on("click",function()
    {
    alert('new');
    });
     $('.isave').on("click",function()
    {
    alert('save');
    });
     $('.idelete').on("click",function()
    {
    alert('delete');
    });
    });
</script>
</head>
<body>
<form action="tpost.php" name="troll" method="post">
<label>Enter Your City</label><input type="text" name="city" value="some-city"/><br/><br/><br/>
<label>Enter Your Neighbourhood</label><input type="text" name="zip" value="my-zip" /><br/><br/><br/>
<label>Enter Your Nearest Shopping Mall</label><input type="text" name="cs" value="shop-here" /><br/>
<br/><hr/><br/>
<br/>
<hr/>
<input class="inew" type="submit" name="new" value="new" />
<input class="isave" type="submit" name="save" value="save" />
<input class="idelete" type="submit" name="delete" value="delete" />
</form>
</body>
</html> 
```

对此有何解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:58:04.237

我在这里找到了答案[http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2)

它说

> 如果一个表单包含多个提交按钮，只有激活的提交按钮是成功的。

# wpf - 使用 MVVM 架构更改整个窗口内容

> ID：12022404
> 
> 赞同：0
> 
> 时间：2012-08-18T21:31:05.343
> 
> 标签：wpf, mvvm, mvvm-light

我是 WPF/MVVM 的新手，我需要创建一个应用程序窗口。

澄清一下，我想有一个带有基本菜单的窗口，根据在该页面/窗口上单击的选项，在同一窗口中启动一组全新的控制器（完全取代菜单界面）。

基本上，我希望能够用新用户界面的内容替换菜单窗口的内容，然后以后能够再次返回菜单界面。

有什么方向吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:41:15.267

棱镜导航是要走的路。您可以在 MSDN 上阅读有关[PRISM Navigation的信息。](http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx)它通过大量代码示例提供了很好的解释。[Karl Shifflett在这里](http://blogs.msdn.com/b/kashiffl/archive/2010/10/04/prism-v4-region-navigation-pipeline.aspx)和[这里](http://karlshifflett.wordpress.com/2011/09/05/simplifying-prism-wpf-navigation-synchronous-navigation-confirmation/)也有一些很好的博客文章，这些文章很有帮助。

# javascript - JSON 视角

> ID：12022405
> 
> 赞同：2
> 
> 时间：2012-08-18T21:31:13.463
> 
> 标签：javascript, json

假设我有一个如下所示的 JSON 文档/JavaScript 对象：

```
var animal = {
  "squirrel": "Squirrels belong to a large family of small or medium-sized rodents called the Sciuridae."
} 
```

在 JavaScript 中，这会发生：

```
console.log(animal.squirrel) //Squirrels belong to a large family of small or medium-sized rodents called the Sciuridae 
```

假设我想将`rank`对象添加到：

```
var animal = {
  "squirrel": {   
    "rank": {
      "Kingdom": "Animalia",
      "Phylum": "Chordata",
      "Class": "Mammalia",
      "Order": "Rodentia",
      "Suborder": "Sciuromorpha",
      "Family": "Sciuridae"
    }
  }
} 
```

排名可以像这样访问：

```
animal.squirrel.rank 
```

但我仍然希望对象的顶层`animal.squirrel`是包含上述句子的字符串。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T21:34:35.897

在 JSON 中是不可能的。然而，在 JavaScript 中，您可以做一些事情。您可以提供`toString`将对象转换为字符串时使用的方法：

```
var animal = {
  "squirrel": {   
    "rank": {
      "Kingdom": "Animalia",
      "Phylum": "Chordata",
      "Class": "Mammalia",
      "Order": "Rodentia",
      "Suborder": "Sciuromorpha",
      "Family": "Sciuridae"
    },
    toString: function() {
      return "Squirrels belong to a large family of small or medium-sized rodents called the Sciuridae.";
    }
  }
}; 
```

您还可以使用`String`对象：

```
var animal = {
    squirrel: new String("Squirrels belong to a large family of small or medium-sized rodents called the Sciuridae.")
};

animal.squirrel.rank = {
    "Kingdom": "Animalia",
    "Phylum": "Chordata",
    "Class": "Mammalia",
    "Order": "Rodentia",
    "Suborder": "Sciuromorpha",
    "Family": "Sciuridae"
}; 
```

后者的行为更像是一个字符串，但它使用一个`String`对象，这有时会令人沮丧并且通常是不好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T02:27:29.427

正如其他人所说，这在任何对象上下文中都是不可能的，因此您需要将所有内容作为对象*上/*对象中的可访问部分来处理。

```
var animal = {
  "squirrel": {
    "info": "Squirrels belong to a large family of small or medium-sized rodents called the Sciuridae.",
    "rank": {
      ...
    }
  }
} 
```

而且，我认为不相关，您可以为通用设置快速访问器。

```
function getAnimalInfo(animalName) {
  if (!animal[animalName]) return "No info for: " + animalName;

  return animal[animalName].info;
} 
```

所以，

```
console.log(getAnimalInfo("squirrel")); //Squirrels belong to a large family of small or medium-sized rodents called the Sciuridae 
```

# .net - 将巨大的 DataTable 均分为多个

> ID：12022411
> 
> 赞同：0
> 
> 时间：2012-08-18T21:32:34.003
> 
> 标签：.net, vb.net, datatable

我有一个大约 156K 的数据表，我想制作 6 个数据表并将记录划分给每个数据表，例如 table1 将保存 0 到 30k 的行，表 2 将保存 30k1 到 60k 的行，依此类推。

大表按从 0 到 14 的数字列排序

关于如何在不循环的情况下执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:37:08.237

您可以使用 LINQ [`GroupBy`](http://msdn.microsoft.com/en-us/library/bb534501.aspx)：

测试数据：

```
Dim tbl1 = New DataTable
tbl1.Columns.Add("ID", GetType(Int32))
tbl1.Columns.Add("Text", GetType(String))
For rowIndex As Int32 = 1 To 156000
    tbl1.Rows.Add(rowIndex, "Row " & rowIndex)
Next 
```

拆分为多个表：

```
Dim tableCount = 6 
Dim divisor = tbl1.Rows.Count / tableCount ' needed to identify each group '
Dim tables() As DataTable = tbl1.AsEnumerable().
        Select(Function(r, i) New With {.Row = r, .Index = i}).
        GroupBy(Function(x) Math.Floor(x.Index / divisor)).
        Select(Function(g) g.Select(Function(x) x.Row).CopyToDataTable()).
        ToArray() 
```

请注意，由于 156000 / 6 = 26000，这会将它们拆分为每个包含 26000 行的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:35:18.803

在数据库级别上做吗？

从您的表中选择到其他人然后删除原始表。

# dbus - 了解 HAL DBus 事件？

> ID：12022412
> 
> 赞同：0
> 
> 时间：2012-08-18T21:32:55.920
> 
> 标签：dbus, hal

我正在 DBus 上观看 HAL 事件，观察交流适配器何时被移除/插入。

通过*dbus-montior*，这两个事件看起来完全相同：

**拔出事件**

```
signal sender=:1.85 -> dest=(null destination) serial=3698 path=/org/freedesktop/Hal/devices/computer_power_supply_ac_adapter_AC0; interface=org.freedesktop.Hal.Device; member=PropertyModified
   int32 1
   array [
      struct {
         string "ac_adapter.present"
         boolean false
         boolean false
      }
   ] 
```

**插件事件**

```
signal sender=:1.85 -> dest=(null destination) serial=3701 path=/org/freedesktop/Hal/devices/computer_power_supply_ac_adapter_AC0; interface=org.freedesktop.Hal.Device; member=PropertyModified
   int32 1
   array [
      struct {
         string "ac_adapter.present"
         boolean false
         boolean false
      }
   ] 
```

但是，显式查询*org.freedesktop.Hal中的**ac_adapter.present*属性确实会正确返回设备状态。

 ****问题：***在 PropertyModified 事件中发送的布尔值是什么？是否存在我可以过滤的事件，该事件将包含有关适配器存在的信息，或者我是否必须在收到更模糊的“发生某事”消息后显式查询？

[HAL DBus 文档](http://people.freedesktop.org/~dkukawka/hal-spec-git/0.5.11/hal-spec.html)不是特别有用，或者我找错地方了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:49:15.803

> 在收到更模糊的“发生了什么事”消息后，我是否必须明确查询？

是的。如果你使用像d-feet这样的DBus浏览器，你会看到`org.freedesktop.Hal.Device`AC适配器对象上的接口有方法

*   `GetProperty(String property) -> Variant`
*   `GetPropertyBoolean(String property) -> Boolean`- 可能对`ac_adapter.present`*

# linux - if语句判断一个内核是32还是64

> ID：12022416
> 
> 赞同：0
> 
> 时间：2012-08-18T21:34:09.733
> 
> 标签：linux, shell, if-statement

我想知道内核是 64 还是 32 英寸`#!/bin/sh`。

我构建了这段代码！

```
krnl=$(uname -i)

# Check whether 64 or 32 bit kernel and download the correct version;
if [ $krnl='i386' ] ; then # 32
  # Do 32-bits stuff
else
  # Do 64-bits stuff
fi 
```

但它似乎总是返回真实的。我做错了什么，为什么会发生这种情况以及如何解决这个问题？我用谷歌搜索的内容总是在 bash 中显示或不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:39:03.203

Whitesapce 在 bash 中很重要。'=' 字符周围需要空格，如下所示：

```
if [ $krnl = 'i386' ] ; then # 32 
```

否则，您定义了一个长字符串“x86_64=i386”或“i386=i386”，并且非空字符串返回true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T21:43:25.197

'=' 符号周围需要空格以正确测试 $krnl 值：

```
krnl=$(uname -i)

# Check whether 64 or 32 bit kernel and download the correct version;
if [ $krnl = 'i386' ] ; then # 32
  # Do 32-bits stuff
else
  # Do 64-bits stuff
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T21:37:38.627

`[`您必须在命令中的等号周围放置空格。否则，它会获取一个参数，如果该参数不是空字符串，则返回 true，它永远不会是。

另外，`uname -m`可能会更好。`uname -i`我从amd64 机器上得到“未知” 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T21:39:32.380

在我的机器上，`uname -p`返回`i686`而`uname -i`返回`i386`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T21:40:40.480

在我的控制台`uname -m`中，`uname -i`然后`uname -p`返回`x86_64`：

```
krnl=`uname -i`

if [ $krnl="x86_64" ] ; then # 64
  echo "64"
else
  echo "32"
fi 
```

~~应该~~ 可以在我的机器上工作。

**更新 ：**

```
krnl=`uname -i`
if [ "$krnl" == "x86_64" ]; then
        echo "64"
else
        echo "32"
fi 
```

当我更改为：

```
if [ "$krnl" != "x86_64" ]; then 
```

回声 32

# javascript - JavaScript 不会更新文件

> ID：12022420
> 
> 赞同：0
> 
> 时间：2012-08-18T21:34:41.333
> 
> 标签：javascript, html, css, function

我有一些 JavaScript 函数旨在为选择标记获取文件，并在选择某个选项时更新它们。

JavaScript 仍在检索这些文件，但我已经通过 FTP 获取了新选项，而旧选项只显示了出来。

```
$(document).ready(function() {
$('#schedGrab').change(function() {
var schedGrab = $(this).find('option:selected').text();
if (schedGrab == "English") {
    $("#schedPost").load('../start/classes.html #english');
    $("#specPost").load('../start/specs.html #english');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:57:10.857

改变

`$("#schedPost").load('../start/classes.html#english');`

至

`$("#schedPost").load('../start/classes.html?'+ new Date().getTime() +'#english');`

（我认为 # 没用，但现在不是你的问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:37:49.187

一些想法：

*   我认为您想松开 html 页面和您指向的 id 之间的空格。例如

    index.html#something

不是

```
index.html #something 
```

*   查看[http://jsfiddle.net](http://jsfiddle.net)。如果您可以复制一个简单的、配对的问题版本，它将有助于我们讨论。它

# ember.js - 如何创建与 Ember.js 和 Rails 关联的 belongsTo 记录？

> ID：12022421
> 
> 赞同：4
> 
> 时间：2012-08-18T21:34:55.120
> 
> 标签：ember.js, ember-data

我在使用 belongsTo 关联时遇到问题，并使用 Ember.js 和 ember-data 向我的 Rails 控制器发送外键。我的 Ember.js 控制器会将项目名称发送到 Rails 控制器，但不会发送 client_id 值。在 Rails 控制器中， params[:project][:client_id] 以 nil 的形式出现。

帮助！我哪里错了？

**楷模：**

```
DA.Project = DS.Model.extend
  name: DS.attr('string')
  client: DS.belongsTo('DA.Client')

DA.Client = DS.Model.extend
  name: DS.attr('string')
  projects: DS.hasMany('DA.Project') 
```

**控制器：**

```
DA.ProjectsController = Em.ArrayController.extend  
  createProject: (project) ->
    @transaction = DA.store.transaction()
    p = @transaction.createRecord(DA.Project, project)
    validation_errors = p.validate()

    if validation_errors
      DA.displayError validation_errors
    else
      @transaction.commit() 
```

**看法：**

```
DA.ProjectsNew = Em.View.extend
  tagName: 'form'
  templateName: 'projects/new'

  init: ->
    @_super()

  didInsertElement: ->
    @_super()

  submit: (event) ->
    event.preventDefault()
    project = {}
    project.name = @get('name')
    project.client = @get('client_id')

    DA.ProjectsController.createProject(project) 
```

**模板：**

```
{{view Em.TextField valueBinding="view.name" placeholder="Project Name" tabindex="1"}}
{{view Em.TextField valueBinding="view.client_id" placeholder="Client ID" tabindex="2"}}
<button type="submit">Create</button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:25:58.563

在`submit`函数中，`project.client`分配了一个 id 而不是`DA.Client`实例。如果该`DA.Client`实例应该预先存在，您可以使用`DA.store.find(DA.Client, @get('client_id'))`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T10:23:54.780

请注意，根据您如何绑定允许您选择与您正在创建的对象相关联的对象的方式，Ember 可能会在您只希望获得 ID 时自动为您提供对象。例如，使用 Ember.Forms.Select 视图绑定，此示例中 client_id 的值将是实际的 Client 对象实例，而不仅仅是 ID。

如果你在 App.store.find() 调用中盲目地使用这个对象，你将得到一个永远不会被实现的 promise 对象，其 ID 设置为原始对象的序列化。如果您随后尝试提交此操作，它将尝试坚持以下内容：

```
"field_id":"<App.Type:ember123:1>" 
```

# ios - 无法填充 UITableView，源数组有效

> ID：12022423
> 
> 赞同：0
> 
> 时间：2012-08-18T21:35:06.620
> 
> 标签：ios, objective-c, multithreading, uitableview, grand-central-dispatch

我无法让我的表格视图显示我的数据，该数组具有 NSLog 输出的有效数据。我在开头放了一个断点，`tableView:cellForRowAtIndexPath:`但它永远不会到达那里。任何想法为什么？

```
#import "ViewController.h"
#import "Ride.h"

@interface ViewController ()
@property (nonatomic, strong) NSMutableData *responseData;
@end

@implementation ViewController

@synthesize rideIds = _rideIds;
@synthesize rideNames = _rideNames;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"viewdidload");

    self.responseData = [NSMutableData data];

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    // http://www.strava.com/api/v1/segments/229781/efforts?best=true

    // Efforts on segment by athlete limited by startDate and endDate
    //NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://www.strava.com/api/v1/segments/229781/efforts?athleteId=11673&startDate=2012-02-01&endDate=2012-02-28"]];

    //Leader Board on Segment all Athletes
    //NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://www.strava.com/api/v1/segments/229781/efforts?best=true"]];

    //Rides by Athlete
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://www.strava.com/api/v1/rides?athleteId=10273"]];

    //Twitter Example
    //NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://api.twitter.com/1/trends"]];

    //Efforts by Ride
    //NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://www.strava.com/api/v1/rides/77563/efforts"]];

    //Effort Detail
    //NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://www.strava.com/api/v1/efforts/688432"]];

    //Google API Call
    //NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AIzaSyAbgGH36jnyow0MbJNP4g6INkMXqgKFfHk"]];

/*    dispatch_async(dispatch_get_main_queue(),^ {
        NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    } ); */

        NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    if(theConnection){
        self.rideIds = [[NSMutableArray alloc]init];
        self.rideNames  = [[NSMutableArray alloc] init];
    } else {
        NSLog(@"No Connection");
        }

}

//Delegate methods for the NSURLConnection

//In order to download the contents of a URL, an application needs to provide a delegate object that, at a minimum, implements the following delegate methods: connection:didReceiveResponse:, connection:didReceiveData:, connection:didFailWithError: and connectionDidFinishLoading:.

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

    NSLog(@"didReceiveResponse");

    //This message can be sent due to server redirects, or in rare cases multi-part MIME documents.
    //Each time the delegate receives the connection:didReceiveResponse: message, it should reset any progress indication and discard all previously received data.

    [self.responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    [self.responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {

    NSLog(@"didFailWithError");
    NSString *errorDescription = [error description];
//    NSLog([NSString stringWithFormat:@"Connection failed: %@", errorDescription]);
    NSLog(@"Connection failed: %@", errorDescription);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSLog(@"connectionDidFinishLoading");
    NSLog(@"Succeeded! Received %d bytes of data",[self.responseData length]);

    // convert to JSON
    NSError *myError = nil;
    //NSDictionary *jsonRes = [NSJSONSerialization JSONObjectWithData:self.responseData options:NSJSONReadingMutableLeaves error:&myError];

    NSDictionary *jsonResult = [NSJSONSerialization JSONObjectWithData:self.responseData options:NSJSONReadingMutableLeaves error:&myError];
    NSDictionary *jsonRides =[jsonResult objectForKey:@"rides"];

    // Show all values coming out of "rides" key
    // Store ride id's and names on arrays for later display on tableview
    for (NSDictionary *rides in jsonRides) {

        [self.rideIds addObject:[rides objectForKey:@"id"]];
        NSLog(@"id = %@", [rides objectForKey:@"id"]);
        //NSLog(@"%@",self.rideIds);

        [self.rideNames addObject:[rides objectForKey:@"name"]];
        NSLog(@"name = %@", [rides objectForKey:@"name"]);
        //NSLog(@"%@",self.rideNames);
    }
        NSLog(@"%@",self.rideIds);
        NSLog(@"%@",self.rideNames);

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    // Show all values coming out of NSKSONSerialization
    for(id key in jsonResult) {

        id value = [jsonResult objectForKey:key];

        NSString *keyAsString = (NSString *)key;
        NSString *valueAsString = (NSString *)value;

        NSLog(@"key: %@", keyAsString);
        NSLog(@"value: %@", valueAsString);
    }

    // extract specific value...
    // NSArray *results = [res objectForKey:@"results"];
    /*NSArray *results = [res objectForKey:@"rides"];
    for (NSDictionary *result in results) {
        NSData *athleteData = [result objectForKey:@"name"];
        NSLog(@"Ride name: %@", athleteData);
    }*/

/*    dispatch_async(dispatch_get_main_queue(),^ {
        [self.rideTableView reloadData];
    } ); */

    [self.rideTableView reloadData];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    NSLog(@"tableView:numberOfRowsInSection: ");

    //return self.rideIds.count;
    NSLog(@"%u",self.rideNames.count);
    return 3;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"tableView:cellForRowAtIndexPath: ");

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if( nil == cell ) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text= [self.rideNames objectAtIndex:indexPath.row];
    return cell;
}

- (void)tableView:(UITableView *)tv
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tv deselectRowAtIndexPath:indexPath animated:YES];
}

@end 
```

NSLog内容：

```
2012-08-18 18:47:29.497 WebServiceCall[10387:c07] viewdidload
2012-08-18 18:47:29.503 WebServiceCall[10387:c07] tableView:numberOfRowsInSection: 
2012-08-18 18:47:29.503 WebServiceCall[10387:c07] 0
2012-08-18 18:47:29.504 WebServiceCall[10387:c07] tableView:cellForRowAtIndexPath: 
2012-08-18 18:47:29.506 WebServiceCall[10387:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'
*** First throw call stack:
(0x14b6022 0xeb6cd6 0x14a2d88 0x395d 0xb3c54 0xb43ce 0x9fcbd 0xae6f1 0x57d42 0x14b7e42 0x1d87679 0x1d91579 0x1d164f7 0x1d183f6 0x1da5160 0x17e84 0x18767 0x27183 0x27c38 0x1b634 0x13a0ef5 0x148a195 0x13eeff2 0x13ed8da 0x13ecd84 0x13ecc9b 0x17c65 0x19626 0x22fd 0x2265 0x1)
terminate called throwing an exception(lldb) 
```

更新：似乎在通过 viewDidLoad 之后，它会直接跳入`tableview:numberOfRowsInSection`跳过所有 4 种处理方法的方法`NSURLConnection`（我更新了我的数组）。

我的视图控制器既是我的代表，也是`NSURLConnection`我的`tableView`. 似乎它首先运行的是 tableView 方法。关于如何使其首先运行`NSURLConnection`方法的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:18:14.787

在哪里`tableView:numberOfSectionsInTableView:`？也许那是返回**0**尽管如果未设置默认值为**1 ；**您还需要在您的 tableView 上设置`delegate`和。`dataSource`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:17:14.560

您可以尝试两件事 - 首先，在您的 numberOfRowsInSection 方法中记录 self.rideIds.count 以确保它不返回 0。其次，在您的 connectionDidFinishLoading 方法结束时，放入 [tableView reloadData] （或任何出口到你的表视图是），这应该解决在连接完成之前调用表视图方法的问题。

编辑后：错误“-[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array”是由 numberOfRowsInSection 方法中的“return 3”引起的。当应用程序启动时，表格视图将尝试在您的连接返回任何结果之前自行填充，因此 numberOfRowsInSection 第一次应该返回 0 而不是 3，如果您放回 return self.rideIds.count 行，它将执行此操作。如果您在连接委托方法的末尾执行 reloadData，则将填充数组并且表格视图应该正常工作。

# http - 过载服务器的 HTTP 状态码

> ID：12022429
> 
> 赞同：19
> 
> 时间：2012-08-18T21:36:08.087
> 
> 标签：http, seo, http-status-codes, googlebot, http-status-code-503

几个小时，我的网站服务器负载过大。
我应该向访问我网站的 Googlebot 发送哪个 HTTP 状态代码？

“ **269稍后回电**”是否适合这种情况，或者**503服务不可用**或者您有什么建议吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-18T21:41:10.703

503表示服务**暂时**不可用，适合在服务器超载时使用。[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

Wikipedia 文章将 269 定义为必须**异步**处理的请求的初始响应。269 表示请求向服务器的待办事项“队列”添加了一些内容，服务器将尽快得到响应，而 503 表示服务器不会“记住”该请求。

不过，我从未听说过 269，它的第一个谷歌结果是这个问题，然后是 Wikipedia 文章。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-13T05:37:16.363

另一种选择是**429 - Too Many Requests**响应。

在 RFC6585 中定义 - [https://www.rfc-editor.org/rfc/rfc6585#section-4](https://www.rfc-editor.org/rfc/rfc6585#section-4)

该规范没有定义源服务器如何识别用户，也没有定义它如何计算请求。

例如，限制请求速率的源服务器可以基于每个资源、整个服务器甚至一组服务器之间的请求计数来执行此操作。

同样，它可能通过其身份验证凭据或有状态的 cookie 来识别用户。

另请参阅响应中的 Retry-After 标头。

# php - 完全删除消息队列

> ID：12022432
> 
> 赞同：0
> 
> 时间：2012-08-18T21:36:47.950
> 
> 标签：php, queue, posix

我在 PHP 中有一个用于处理任务的消息队列，我在插入任务时引起了一个错误，它刚刚插入了一堆布尔值（我通常通过它传递对象）。

我杀死了读取队列的进程，因为它由于未删除项目而挂起。

我在很长一段时间内运行良好的典型代码是：

```
 $mqst = msg_stat_queue($mqh);

    while ($mqst['msg_qnum']) {
        output('Queue is populated', O_DEBUG);
        msg_receive($mqh, 0, $msgtype, 2048, $data, true);
        $mqst = msg_stat_queue($mqh);
        if ($data instanceof \Core\Image) {
            $new_tasks[] = $data;
        } else {
            output('Got some odd data.. ' . print_r($data, true), O_ERROR);
        }
    } 
```

从我的终端：

```
$ php -r '$mqh = msg_get_queue(12345, 0666);
          $mqst = msg_stat_queue($mqh); 
          $i = $mqst["msg_qnum"]; while ($i--) {
             msg_receive($mqh, 0, $type, 2048, $data, true);
             var_dump($type, $data); 
          }' 
```

输出：

```
int(0)
bool(false)
int(0)
bool(false)
int(0)
bool(false)
int(0)
bool(false)
int(0)
bool(false)
int(0)
bool(false)
int(0)
bool(false) 
```

我可以无限期地重复这一点，他们没有让步。我试图删除队列但没有成功，文档指出：

> msg_remove_queue() 销毁队列指定的消息队列。仅当所有进程都处理完消息队列并需要释放它所占用的系统资源时才使用此功能。

但是，我已经终止了该过程，并且在释放资源方面并不是很具体。我不确定为什么在收到消息后没有将消息从队列中弹出。也许我错过了一些简单的东西

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-18T22:07:27.190

**编辑**这个答案是错误的。

更深入地研究了这个问题，我认为问题如下：队列中的第一条消息大于2048个字节，导致`msg_receive`返回错误。因此，消息永远不会从队列中删除，因此它会保持原样。

在下一次调用该函数时，它将尝试获取相同的条目，因此它将再次失败。

我最初的建议是让`msg_receive`函数成为 while 循环的条件，这*会*立即说明这一点。（如果确实是解决方案）。

**解决方案**：现在，将`MSG_NOERROR`标志添加到`msg_receive`函数中，只是为了查看下一条消息是否确实太大，然后从那里调试。

# dojo - 我应该如何使用 JSDoc 记录 Dojo getter 和 setter？

> ID：12022435
> 
> 赞同：3
> 
> 时间：2012-08-18T21:37:16.197
> 
> 标签：dojo, jsdoc

在声明扩展的模块时，将`dojo/Stateful`定义 getter 和 setter 的模式，`_xxxGetter`并将`_xxxSetter`其表示为`.get('xxx')`and `.set('xxx')`。

所以，我的问题是，如何最好地用 JSDoc 记录这一点？`@function`似乎不支持提供替代方法名称，无论如何，这是参数值的变体，而不是方法名称？

那么，JSDoc 是否对这个模型有任何内在的支持，还是我只需要为这些东西编写明确的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:51:38.007

那么，如果它仅用于生成文档？试试这个：[https ://github.com/jsdoc3/jsdoc](https://github.com/jsdoc3/jsdoc)

现在可以堆叠多个文档块 pr 变量/函数。不要对此垂头丧气-但我相信语法是这样的：

```
{
 ...
 /**
  * Get varname property
  * @returns {mixed}
  *//**
  * Set varname property
  * @param {mixed} val
  * @returns {this}
  */
  varname: null
 ...
} 
```

# jquery - jquery 更改此 .post 插件以便能够在回调中使用 $(this)

> ID：12022436
> 
> 赞同：0
> 
> 时间：2012-08-18T21:37:17.830
> 
> 标签：jquery, ajax, plugins, this, .post

我将此插件代码用于我在网上找到的 ajax 调用

```
jQuery.fn.postAjax = function(success_callback) {
  this.submit(function(e) {
    e.preventDefault();
    $.post(this.action, $(this).serialize(), success_callback);
    return false;
  })
  return this;
}; 
```

我对其进行了一些更改，因此我可以更好地使用它，就像它的用法一样

```
$("#my_form_name").postAjax(function(data){
   //code here
}); 
```

这段代码的唯一问题是我不能`$(this)`在回调中使用，这是一个问题......

我怎么能改变这个插件才能使用`$(this)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:40:21.150

试试这个：

```
jQuery.fn.postAjax = function(success_callback) {
    this.submit(function(e) {
        e.preventDefault();
        $.post(this.action, $(this).serialize(), $.proxy(success_callback, this));
        return false;
    })
    return this;
};​ 
```

阅读有关[jQuery 代理](http://api.jquery.com/jQuery.proxy/)功能的信息。

# linux - 需要适用于 Linux 的端口映射解决方案

> ID：12022437
> 
> 赞同：2
> 
> 时间：2012-08-18T21:37:21.053
> 
> 标签：linux, networking

AnalogX 制作了一个方便实用的 Windows 实用程序，名为 Portmapper。它侦听您喜欢的任何端口并将流量转发到另一个 IP 地址。因此，您可以在路由器中打开一系列端口，所有端口都映射到一台机器。然后，该机器将每个特定端口转发到 LAN 中您喜欢的任何地址。

对于可用的 NAT 条目数量有限的路由器来说，这是一个很好的解决方案。只需将一个范围指向一台 PC，然后让它完成剩下的工作。它可以将80端口的流量转发到192.168.1.101，将5900端口转发到192.168.1.102，将5901端口转发到192.168.1.103:5900等。

我正在寻找基于 linux 的替代品。要么是我创建配置文件的程序，其中详细说明了要转发的端口号和 IP，要么是使用内置解决方案（如 iptables）的策略。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:33:27.010

好吧，您可以在 Linux 中通过以下方式本地执行此操作`iptables`：

[http://www.debuntu.org/how-to-redirecting-network-traffic-a-new-ip-using-iptables](http://www.debuntu.org/how-to-redirecting-network-traffic-a-new-ip-using-iptables)

[http://ramblings.narrabilis.com/ip-forward-using-iptables-port-and-host-redirect](http://ramblings.narrabilis.com/ip-forward-using-iptables-port-and-host-redirect)

[http://www.revsys.com/writings/quicktips/nat.html](http://www.revsys.com/writings/quicktips/nat.html)

# python - Python 中使用了哪种正则表达式风格？

> ID：12022443
> 
> 赞同：7
> 
> 时间：2012-08-18T21:37:53.950
> 
> 标签：python, regex, pcre, icu

我想知道 Python 使用了哪种 RegEx 风格？它是 PCRE、Perl 兼容还是 ICU 或其他？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-18T21:43:47.400

它与Perl*足够*兼容，这意味着大多数 Perl 表达式无需修改即可工作。它旨在与 Perl 兼容，但当然也有一些细微差别。

从技术上讲，它使用自己的正则表达式风格。例如，早在其他实现采用该语法之前，Python 正则表达式就提供了命名组。它还支持开箱即用的 Unicode。如今，大多数 Python 扩展都在其他地方得到支持。请参阅[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T04:04:14.610

不幸的是，我无法直接回答评论，但原子块是一个重要功能（尽管很少有人了解它们的功能），因为您可以使用它创建多字节字符序列。即在Windows 中，换行符是\r\n。

示例：/(?>\r\n|\n|\r)\p{Any}/ 匹配到 \n\r 或 \r.，因为这是换行符和任何字符文字的组合，但确实如此与 \r\n 不匹配，因为换行符后面没有任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T21:42:11.930

[这里](http://www.regular-expressions.info/python.html)有一个很好的 Python 正则表达式支持概述。

把它们加起来：

> Python 的正则表达式语法中唯一缺少的重要特性是原子分组、所有格量词和 Unicode 属性。

原子分组和所有格量词不会给语言增加太多的表达能力。它们本质上是为了更简单和更快的正则表达式。

Python regex 支持 Unicode，因为您可以使用文字 unicode 字符，例如 Æ，但您不能在 regex 本身中使用任何 Unicode 转义码。

# php - 如何将PHP的路径更新到我刚安装在mac osx山狮上的新版本？

> ID：12022450
> 
> 赞同：1
> 
> 时间：2012-08-18T21:39:13.833
> 
> 标签：php, macos

首先，我是 mac 新手，从[http://www.php.net](http://www.php.net)下载 PHP 包后，我刚刚在我的机器上安装了 PHP 5.4.6 ，我解压缩并通过终端导航到目录，然后我运行以下命令：

```
./configure --with-config-file-path=~/php-5.4.6/php.ini
make
make test
sudo make install 
```

我重新启动了 Apache，`sudo apachectl graceful`但是当我转到 info.php 时，它仍然说 PHP 5.3.13 是 macs 附带的默认版本，我尝试运行`echo $PATH`我在搜索互联网时得到了这个结果`/usr/local/php5:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/mysql/bin:/usr/local/mysql/bin`，他们说关于改变路径因为安装了默认的 PHP 并且安装`/usr/local/php5`了新的`/usr/local/bin/`，所以当我运行时`/usr/local/bin/php -v`我得到

```
PHP 5.4.6 (cli) (built: Aug 18 2012 22:52:55) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies 
```

所以我想知道如何更新该路径。

提前致谢，抱歉拖了这么久。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T21:52:24.670

您需要指定 httpd.conf 配置以使用新的 mod_php 库...假设您在构建期间传递了正确的*--with-apxs2*标志。

如果使用内置的 Apache 服务器，请参见：/etc/apache2/httpd.conf

```
LoadModule php5_module <MY_NEW_PATH>/libphp5.so 
```

# python - django-openid-auth OpenID 失败：未知用户

> ID：12022451
> 
> 赞同：3
> 
> 时间：2012-08-18T21:39:21.467
> 
> 标签：python, django, django-openid-auth

我正在尝试通过`django-openid-auth`使用在 Steam 上实现简单的 Open ID 身份验证单点登录，我基本上使用了与[官方 repo 示例](https://github.com/jezdez/django-openid-auth/blob/master/example_consumer/settings.py)`Django 1.4.1` 中提供的完全相同的设置：

```
import os
import django
import settings_local

DEBUG = True
TEMPLATE_DEBUG = DEBUG
PROJECT_DIR = os.path.dirname(__file__)

ADMINS = (
     ('me', 'me@gmail.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': settings_local.DB_NAME,
        'USER': settings_local.DB_USER,
        'PASSWORD': settings_local.DB_PW,
        'HOST': settings_local.DB_HOST,
        'PORT': '',
    }
}

TIME_ZONE = 'Europe/Paris'
LANGUAGE_CODE = 'en-us'
SITE_ID = 1
USE_I18N = True
USE_L10N = True

USE_TZ = True

MEDIA_ROOT = ''
MEDIA_URL = ''

STATIC_ROOT = ''
STATIC_URL = '/static/'

STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

SECRET_KEY = settings_local.PROJECT_SECRET_KEY

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'debug_toolbar.middleware.DebugToolbarMiddleware',
)

ROOT_URLCONF = 'myproject.urls'

WSGI_APPLICATION = 'myproject.wsgi.application'

TEMPLATE_DIRS = (
    os.path.join(PROJECT_DIR, "templates"),
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.admindocs',
    'south',
    'debug_toolbar',
    'accounts',
    'django_openid_auth',
)

AUTH_PROFILE_MODULE = 'accounts.UserProfile'

# django-debug-toolbar
INTERNAL_IPS = ('127.0.0.1',)
DEBUG_TOOLBAR_CONFIG = {
    'INTERCEPT_REDIRECTS': True,
    'SHOW_TEMPLATE_CONTEXT': True,
}

# django-openid-auth
AUTHENTICATION_BACKENDS = (
    'django_openid_auth.auth.OpenIDBackend',
    'django.contrib.auth.backends.ModelBackend',
)

OPENID_CREATE_USER = True
#ALLOWED_EXTERNAL_OPENID_REDIRECT_DOMAINS = ['http://steamcommunity.com/']
OPENID_UPDATE_DETAILS_FROM_SREG = False
OPENID_SSO_SERVER_URL = settings_local.STEAM_OPENID_ENDPOINT
LOGIN_URL = '/login/'
LOGIN_REDIRECT_URL = '/'
OPENID_USE_AS_ADMIN_LOGIN = False 

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
        }
    } 
```

我的`views.py`

```
from django.http import HttpResponse
from django.contrib.auth.decorators import login_required
from django.shortcuts import render_to_response

def home(request):
    if request.user.is_authenticated():
        return render_to_response('home.html', {'username':
            request.openid})
    else:
        return render_to_response('home.html', {'auth_url': '/openid/login/'})

def next_works(request):
    return HttpResponse('?next= bit works')

@login_required
def require_authentication(request):
    return HttpReponse('This page requires authentication')

def login(request):
    pass 
```

`home.html`

```
<p>index</p>
{% if auth_url %}
<form action="{{ action }}" method="post">
    {% csrf_token %}
    <p> <a href={{ auth_url }}>log in</a></p>
    {% if username %}
    you are {{ username }}
    {% endif %}
</form>
{% endif %} 
```

`runserver`日志：

```
[18/Aug/2012 23:07:23] "GET /openid/login/ HTTP/1.1" 200 152374
Error attempting to use stored discovery information: <openid.consumer.consumer.TypeURIMismatch: Required type http://specs.openid.net/auth/2.0/signon not found in ['http://specs.openid.net/auth/2.0/server'] for endpoint <openid.consumer.discover.OpenIDServiceEndpoint server_url='https://steamcommunity.com/openid/login' claimed_id=None local_id=None canonicalID=None used_yadis=True >>
Attempting discovery to verify endpoint
Performing discovery on http://steamcommunity.com/openid/id/XXXXXXX
Received id_res response from https://steamcommunity.com/openid/login using association 1234567890
Using OpenID check_authentication
signed
op_endpoint
claimed_id
identity
return_to
response_nonce
assoc_handle
[18/Aug/2012 23:07:34] "GET /openid/complete/?janrain_nonce=2012-08-18T21%3A07%3A23ZqVw9m0&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.mode=id_res&openid.op_endpoint=https%3A%2F%2Fsteamcommunity.com%2Fopenid%2Flogin&openid.claimed_id=http%3A%2F%2Fsteamcommunity.com%2Fopenid%2Fid%2FXXXXXXX&openid.identity=http%3A%2F%2Fsteamcommunity.com%2Fopenid%2Fid%2FXXXXXXX&openid.return_to=http%3A%2F%2F0.0.0.0%3A8000%2Fopenid%2Fcomplete%2F%3Fjanrain_nonce%3D2012-08-18T21%253A07%253A23ZqVw9m0&openid.response_nonce=2012-08-18T21%3A07%3A21Z1IUzhN7wFJy70hXK0bam4nlVxsc%3D&openid.assoc_handle=1234567890&openid.signed=signed%2Cop_endpoint%2Cclaimed_id%2Cidentity%2Creturn_to%2Cresponse_nonce%2Cassoc_handle&openid.sig=yvReb4BR0gTpkig0cLyT%2BA5QdYc%3D HTTP/1.1" 403 169466 
```

怎么了 ：

*   用户点击登录
*   重定向到 steamcommunity.com/openid/login 并询问 steam id/pw
*   `/openid/complete/?janrain_nonce=...`使用错误代码重定向回网站`403`，触发`django-openid-auth`“未知用户”消息代码

我尝试过的：

*   使用`django-openid-auth`示例并替换`OPENID_SSO_SERVER_URL`为 Steam OpenID 端点——它可以工作
*   使用这个[示例存储库](https://github.com/rajasaur/openid_userprofiles/)并将 Steam OpenID 端点放入其中`/media/js/openid-en.js`——它也可以工作

现在搜索了几个小时后，我找不到我的代码有什么问题。

编辑：修复它。只需`settings.py`从其中取出`django-openid-auth/example_consumer`并逐行更改即可查看问题所在。最终在此页面上粘贴了完全相同的`settings.py`内容，但现在可以正常工作了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T23:38:21.073

I ran into the exact same issue and discovered that the problem was with this line:

```
OPENID_CREATE_USER = True 
```

This setting is missing the `S` at the end of the name. The line should read:

```
OPENID_CREATE_USERS = True 
```

Correcting this typo caused OpenID login to work perfectly. When the OP says *"Ended up having the exact same `settings.py` pasted on this page but it's now working..."* they probably missed this very small difference.

# java - JDBI 是否接受 UUID 参数？

> ID：12022452
> 
> 赞同：9
> 
> 时间：2012-08-18T21:39:29.700
> 
> 标签：java, jdbc, jdbi

使用 SQL 对象参数绑定时，[JDBI](http://jdbi.org/)是否可以直接使用 UUID 参数？

我有这样的方法：

```
@SqlQuery("EXECUTE [MyProcedure] :myField")
MyDto myMethod(@Bind("myField") UUID myField); 
```

它绑定到接收如下参数的 SQL Server 存储过程：

```
@myField uniqueidentifier 
```

执行时，抛出此异常：

```
! com.microsoft.sqlserver.jdbc.SQLServerException: The conversion from UNKNOWN to UNKNOWN is unsupported.
! at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
! at com.microsoft.sqlserver.jdbc.DataTypes.throwConversionError(DataTypes.java:1117)
! at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.setObject(SQLServerPreparedStatement.java:991) 
```

如果我将 JDBI 上的参数类型更改为 String，并使用 UUID 对象中的 toString() 方法调用它，它会起作用：

```
@SqlQuery("EXECUTE [MyProcedure] :myField")
MyDto trash(@Bind("myField") String myField); 
```

有没有办法编写接受 UUID 参数的 DAO 方法并在绑定之前将它们转换为字符串？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T02:29:44.110

JDBI 只为 JDBC 公开它们的类型公开基于类型的显式绑定。JDBC 不公开用于绑定的 UUID 类型，因此默认将其设置为 Object。不幸的是，JDBC 没有提供明确的 UUID 绑定机制，所以通过 String 可能是最便携的方式:-(

如果您想在 Java 中将其绑定为 UUID 并在内部将其转换为 String，则有两种路径。首先，如果您*总是*想将 UUID 绑定为字符串，请使用 ArgumentFactory，请参阅[https://github.com/brianm/jdbi/blob/master/src/test/java/org/skife/jdbi/v2/sqlobject /TestRegisterArgumentFactory.java](https://github.com/brianm/jdbi/blob/master/src/test/java/org/skife/jdbi/v2/sqlobject/TestRegisterArgumentFactory.java)为例。

第二种是，如果你只想在特定情况下这样做，创建一个自定义的Binder，比如用[http://jdbi.org/sql_object_api_argument_binding/](http://jdbi.org/sql_object_api_argument_binding/)

使用 ArgumentFactory 实现从 UUID 到字符串的全局绑定示例：

UUIDArgumentFactory.java：

```
public class UUIDArgumentFactory implements ArgumentFactory<UUID> {

    @Override
    public boolean accepts(Class<?> expectedType, Object value, StatementContext ctx) {
        return value instanceof UUID;
    }

    @Override
    public Argument build(Class<?> expectedType, UUID value, StatementContext ctx) {
        return new UUIDArgument(value);
    }
} 
```

UUIDArgument.java：

```
public class UUIDArgument implements Argument {
    private final UUID value;

    public UUIDArgument(UUID value) {
        this.value = value;
    }

    @Override
    public void apply(int position, PreparedStatement statement, StatementContext ctx) throws SQLException {
        statement.setString(position, value.toString());
    }    
} 
```

登记：

```
final DatabaseFactory factory = new DatabaseFactory(environment);
final Database db = factory.build(configuration.getDatabaseConfiguration(), "sqlserver");
db.registerArgumentFactory(new UUIDArgumentFactory()); 
```

# xml - XSD 使属性可以为空

> ID：12022454
> 
> 赞同：1
> 
> 时间：2012-08-18T21:40:19.277
> 
> 标签：xml, xsd

创建 XML 时，属性`wait`可能并不总是包含值。如何编辑架构以允许属性`wait`包含数字或不包含值？

```
<xs:complexType name="CommandType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute type="xs:string" name="exe" use="required" />
                <xs:attribute type="xs:string" name="args" use="required" />
                <xs:attribute type="xs:int" name="wait" use="required" />
                <xs:attribute type="xs:string" name="expectedOutput" use="required" />
                <xs:attribute type="xs:string" name="toVariable" use="required" />
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType> 
```

我已经尝试过这两种方法`nillable="true"` `xsi:nil="true"`，但它们都不起作用。当我尝试验证 XSD 时出现错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T08:47:42.733

"nillable" 仅适用于元素，不适用于属性 - 即使这样它也不是很有用，因为如果元素为空，您必须添加 xsi:nil="true"，这完全是多余的。

要么 (a) 定义一个类型，它是 xs:integer 和零长度字符串的联合，如 IMSoP 所建议的那样，或者 (b) 定义一个具有项目类型整数、minLength 0、maxLength 1 的列表类型。我更喜欢后一种解决方案因为它与模式感知 XSLT 和 XQuery 配合得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:02:16.640

可能有更简单的方法，但也许您可以创建一个自定义类型，该类型要么是空字符串，要么符合`xs:int`使用`union`类型的定义：

```
<xs:simpleType name="emptyString">
    <xs:restriction base="xs:string">
        <xs:length value="0" />
    </xs:restriction>
</xs:simpleType>
<xs:simpleType name="intOrEmpty">
    <xs:union memberTypes="xs:int emptyString" />
</xs:simpleType> 
```

顺便说一句，值得记住的是该`xs:string`类型包括空字符串，因此，如果`exe`属性应该始终具有非空值，则需要一个`nonEmptyString`类型（使用`minLength`限制）并将其标记为`required`. 我知道这在过去让我失望了。

# c++ - 使用 C++ 在 Windows 操作系统上安装电源管理 API 挂钩

> ID：12022462
> 
> 赞同：1
> 
> 时间：2012-08-18T21:41:18.270
> 
> 标签：c++, windows, winapi, kernel, power-management

让我先说一下，我最初的目标是在实际电源状态启动之前确定 Windows 操作系统正在进入的电源状态。我在另一个线程上问了一个类似的问题，为此我收到了一堆关于*为什么我的假笑需要知道这一点*。因此，无需详细解释我为什么需要这个，让我简单地说一下我连接到 PC 的硬件将需要这些信息来进行自己的电源管理。

此时我也试图避免编写设备驱动程序，因此我想尝试从用户模式/本地服务代码中找到解决方案。

好的，现在回到手头的问题。由于 Windows 操作系统只提供[基本的电源通知](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373247%28v=vs.85%29.aspx)，例如，不会让我区分重新启动与关闭或睡眠与休眠，因此我想在 Windows API 上实现一个全局挂钩来启动这些电源状态（它们是用于睡眠/休眠的[SetSuspendState](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373201%28v=vs.85%29.aspx)和用于重新启动/关闭的[InitiateSystemShutdown 。）我还发现](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376873%28v=vs.85%29.aspx)[这篇文章](http://www.codeproject.com/Articles/49319/Easy-way-to-set-up-global-API-hooks)解释了如何使用 C++/WinAPI 实现全局 API 挂钩。

因此，能够在电源事件发生之前拦截电源事件的命令，其想法是将电源事件的类型写入系统注册表（请参阅下面的 POWER_ACTION 和 SYSTEM_POWER_STATE），然后从用户模式/本地服务代码中读取它收到 WM_POWERBROADCAST 通知。

我从来没有做过全局 API 挂钩，所以在开始编写代码之前，我在向这个网站上的专业人士征求意见——你觉得这行得通吗？

还有一些关于 API 本身的技术问题：

**1：**我做了一些研究，似乎内核级别的大多数高级电源 API 都归结为从 Ntdll.dll 导出的*NtInitiatePowerAction*或*ZwInitiatePowerAction 。*两者似乎都做同样的事情，但问题是，我应该挂钩哪一个？

**2：**微软缺乏关于这些内核级 API 的文档。我能找到的唯一东西就是这个。有没有人有任何信息要添加到它？

```
NTSYSAPI
NTSTATUS
NTAPI
NtInitiatePowerAction(
    IN POWER_ACTION SystemAction,
    IN SYSTEM_POWER_STATE MinSystemState,
    IN ULONG Flags,
    IN BOOLEAN Asynchronous
);

typedef enum _POWER_ACTION {
PowerActionNone,
PowerActionReserved,
PowerActionSleep,
PowerActionHibernate,
PowerActionShutdown,
PowerActionShutdownReset,
PowerActionShutdownOff
} POWER_ACTION, *PPOWER_ACTION;

typedef enum _SYSTEM_POWER_STATE {
PowerSystemUnspecified = 0,
PowerSystemWorking,
PowerSystemSleeping1,
PowerSystemSleeping2,
PowerSystemSleeping3,
PowerSystemHibernate,
PowerSystemShutdown
} SYSTEM_POWER_STATE, *PSYSTEM_POWER_STATE;

//Flags seem to be the these ones
POWER_ACTION_QUERY_ALLOWED
POWER_ACTION_UI_ALLOWED
POWER_ACTION_OVERRIDE_APPS
POWER_ACTION_LOCK_CONSOLE
POWER_ACTION_DISABLE_WAKES
POWER_ACTION_CRITICAL 
```

上述标志的实际值可以是[这些here](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373148%28v=vs.85%29.aspx)。

**3：**我需要它在 Windows XP SP3 和更高版本的操作系统下工作。似乎从 XP 开始就支持所有这些东西，但我担心的是那些似乎没有在官方 MSDN 文档中提到的内核级 API。

所以无论如何，我很高兴听到对此的任何见解？

# asp.net - ASP.NET 会话 ID 值

> ID：12022468
> 
> 赞同：0
> 
> 时间：2012-08-18T21:42:24.237
> 
> 标签：asp.net

关于会话 ID 值的相对简单的问题 - 会话 ID 与浏览器的特定实例相关联，对吗（实例意思是窗口）？所以我从一个空桌面（WinXP 或 Win7 或任何客户端操作系统）开始。我打开一个 IE 浏览器窗口并从 ASP.NET 网站请求一个网页。然后我打开第二个 IE 浏览器窗口并从同一个 ASP.NET 网站请求同一个网页。(1) 我假设会有 2 个不同的会话 ID，两个 IE 浏览器窗口各一个，对吗？然后，我在其中一个 IE 浏览器窗口中打开一个附加选项卡。(2) 该附加选项卡是否具有与浏览器窗口相同的会话 ID，还是具有第三个唯一会话 ID？我知道我可以做一些测试来看看这个，但我需要回答老板' s 问题马上大声笑 - 所以我想有人可能会从头顶回答这个问题。蒂亚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T21:46:22.617

会话 cookie 是按浏览器实例创建的，而不是按浏览器窗口创建的。如果您打开 3 个 Internet Explorer 窗口，它们都将使用相同的会话 ID。

无论请求来自同一窗口还是同一浏览器实例中的不同窗口，该会话 ID 都会保留用于其他请求。

默认情况下，“实例”指的是浏览器，直到所有窗口都完全关闭。这可以扩展，但请记住，会话也保留在服务器的内存中（默认情况下，这也可以更改），因此如果将会话配置为保持活动时间过长，可能会影响性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T21:46:09.933

当您打开一个新选项卡时，它们共享同一个会话。如果您想同时进行新会话，则应在不同的浏览器中打开该站点。

# php - CakePHP 通过验证使表单成为全局的

> ID：12022470
> 
> 赞同：0
> 
> 时间：2012-08-18T21:42:39.730
> 
> 标签：php, cakephp, cakephp-1.2

我的应用程序有带有添加操作的联系人控制器，可以将联系人消息发布到数据库表*评论*。它的验证工作正常。现在，我想将添加视图（联系人表单）用作要在应用程序的所有页面中呈现的全局表单。

我知道，要做到这一点，我必须使一个元素包含表单（或添加视图），如下所示：

元素/contact.ctp

```
<div class="panel">
    <h4><?php echo __('contact'); ?></h4>
<?php echo $form->create('Contact',array('action'=>'index', 'class' => ''));?>
<?php echo $form->input('name', array('size' => 45, 'class' => 'input-text', 'label' => array( 'text' => __('name',true).'<sup>*</sup>'), 'error' => array('class' => 'error', 'wrap' => 'small')));?>
<?php echo $form->input('email', array('size' => 45, 'class' => 'input-text', 'label' => array('text' => __('email',true).'<sup>*</sup>'), 'error' => array('class' => 'error', 'wrap' => 'small')));?>
<?php echo $form->input('subject', array('type' => 'select', 'options' => array(null => __('choose subject',true), 'g' => __('general', true), 'r' => __('report', true)), 'class' => 'input-text', 'label' => array('text' => __('subject', true).'<sup>*</sup>'),'error' => array('class' => 'error', 'wrap' => 'small'))); ?>
<?php echo $form->input('content', array('class' => 'input-text', 'style' => 'height: 140px', 'title' => __('message', true),  'label' => array('text' => __('message',true).'<sup>*</sup>'), 'error' => array('class' => 'error', 'wrap' => 'small')));?>
<?php //echo $fck->load('Contact.message','Mini'); ?>
<span>    
<?php
App::import('Vendor','FoxCaptcha', array('file' => 'Fox_captcha.php'));
       $cap = new Fox_captcha(120,30,5);

                       $cap->image_dir = $html->url('/').'img/';

      $cap->lines_amount = 13;
       $cap->en_reload = $html->image('reload.png', array('alt' => __('reload', true), 'title' => __('reload the captcha', true), 'id' => 'frel', 'style' => 'vertical-align:middle'));

?>
</span>
<div>    
<span class="display:inline"><?php echo $cap->make_it('HTML');?></span>
<?php echo $form->input('vcode', array('size' => 45, 'class' => 'small input-text', 'label' => array('text' => __('captcha', true).'<sup>*</sup>'), 'error' => array('class' => 'error', 'wrap' => 'small')));?>
</div>

<?php echo $form->submit(__('send',true), array('class' => 'nice medium radius white button'));?>

<?php echo $form->end();?>
<div class="alert-box warning"><?php echo __('fields label with * are required');?></div>
</div> 
```

问题是：当我从任何页面（例如帖子/视图/22）使用此表单时，它会提交给联系人/添加。**我希望在提交帖子/视图/22 后触发任何验证消息。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:59:26.500

There is no solution for this requirement without Ajax and JSON. It includes submitting the form with Ajax to the contacts controller index action with event handler component activated and then check isAjax then render JSON output retrieved by the post's view and then populates the results.

# oop - 什么时候应该将所有内容存储在对象或专用存储中？

> ID：12022471
> 
> 赞同：2
> 
> 时间：2012-08-18T21:42:54.463
> 
> 标签：oop

假设我们有`Car`一个名为 MAIN 字段的类`VIN`（车辆识别号）。VIN给了我们很多信息，比如我们：

*   所有者
*   注册地
*   生产国
*   生产年份
*   颜色
*   引擎种类
*   等等等等

我可以继续并添加更多信息：

*   最后已知的 GPS 坐标
*   精美清单
*   是盗窃（布尔值）
*   等等等等

在对象内部存储一些信息（例如生产年份和发动机类型）似乎是合理的`Car`。然而，将所有这些信息存储在`Car`对象内部会使其过于复杂、“过载”且难以管理。此外，随着应用程序的发展，我可以添加越来越多的信息。

那么边界在哪里呢？什么应该存储在`Car`对象内部，什么应该存储在外部，例如`Dictionary<Car, GPSCoordinates>`

我认为可能我应该将“静态”数据存储在`Car`对象内，以便制作它`immutable`。并将“动态”数据存储在特殊存储中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T21:54:06.577

仅仅因为你的`Car`类提供了一个**属性** `GPSCoordinates`并不意味着你需要在内部保存这些坐标。本质上，这就是封装的全部内容。

是的，然后您可以添加诸如“IsInGarageNow”、“WasEverDrivedByMadonna”或“RecommendedOil”之类的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:55:25.890

我会使用一个类来调用`CarModel`应用程序中所有可能的汽车共享的基本属性（发动机尺寸、颜色、注册号等）。然后，您可以使用任意数量的更具体的子类来扩展此类，例如 Car、RentalCar 或任何适合您的业务逻辑的子类。

这样，您就可以清楚地定义所有汽车共享的内容以及汽车可能处于的不同状态的附加定义（例如，具有独特参数的 RentalCar）。

**更新：**

我想你正在寻找的是这样的（虽然我会建议反对它）：

```
public class Car
{
   // mandatory
   protected int engineSize;
   protected int color;

   // optional
   protected Map<String, Object> attributes = new HashMap<String, Object>();

   public void set(String name, Object value)
   {
     attributes.put(name, value);
   }

   public Object get(String name)
   {
     return attributes.get(name);
   }
} 
```

**为什么这不是一个好的解决方案：**

*   祝你好运，试图将这个类持久化到数据库或设计任何依赖于它的一组众所周知的属性的东西。
*   调试潜在问题的噩梦。
*   在类型定义方面不是很好地使用 OOP。这可以被滥用来将`Car`类变成它不是的东西。

# emacs - 如何获取一个变量来表示“symbol-function()”的函数名

> ID：12022473
> 
> 赞同：1
> 
> 时间：2012-08-18T21:43:18.950
> 
> 标签：emacs

我正在学习如何在 emacs lisp 中编程。我想我会编写一个简单的函数，将函数定义打印到消息缓冲区。这工作正常：

```
(let (
(fDefAsString (symbol-function 'scroll-down)) 
)
(message "%s" fDefAsString)
(switch-to-buffer-other-frame "*Messages*")) 
```

但我希望这是一个可以接受参数的函数，参数是我想查看其定义的函数的名称。所以我尝试了这个：

```
(defun message-function-definition (nameOfFunction)
(let (
(fDefAsString (symbol-function 'nameOfFunction)) 
)
(message "%s" fDefAsString)
(switch-to-buffer-other-frame "*Messages*"))) 
```

然后我写了这个：

```
(message-function-definition 'scroll-down) 
```

然后我运行“eval-buffer”。

我不断收到此错误：

调试器进入--Lisp 错误: (void-function nameOfFunction) symbol-function(nameOfFunction) (let ((fDefAsString ...)) (message "%s" fDefAsString) (switch-to-buffer-other-frame " *Messages* " )) 消息函数定义（向下滚动） eval（（消息函数定义（引用向下滚动））） eval-last-sexp-1（nil） eval-last-sexp（nil） 交互式调用（ eval-last-sexp nil nil) recursive-edit() 字节码("\306 @\307=\203!

我尝试过引用、取消引用，并且尝试使用“nameOfFunction”，但我无法让它工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:35:20.140

你试过取消引用吗？这对我有用：

```
(defun message-function-definition (nameOfFunction)
  (let ((fDefAsString (symbol-function nameOfFunction)))
    (message "%s" fDefAsString)
    (switch-to-buffer-other-frame "*Messages*"))) 
```

一些提示：

1.  您的代码没有正确缩进。如果您选择区域并使用 重新缩进`tab`，它将更易于阅读。

2.  您应该花几个小时阅读“Emacs Lisp Intro”，您将对 Emacs-lisp 中的工作原理有一个更好的了解，而不是通过在 StackOverflow 上一次问一个问题来弄清楚这一切。

3.  `symbol-function`并非旨在显示函数的人类可读定义。在大多数情况下，您不会真正看到任何有用的东西。

    尝试这个：

    ```
    (find-function-other-window 'scroll-down) 
    ```

# php - PHP绑定9管理

> ID：12022477
> 
> 赞同：2
> 
> 时间：2012-08-18T21:44:17.707
> 
> 标签：php, bind

有没有人知道我可以用来管理 named.conf 文件的 PHP 类？或者有人对此有什么建议吗？我想这是一个很常见的任务，但似乎没有人写过这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:34:31.457

你到底想用 PHP 管理什么？

我必须管理一个条目来使用 PHP/WEB + BIND9 conf 文件组织某种动态 dns。最后有一些占位符，然后读取这些占位符之间的值。

例如

### 占位符

www CNAME ...... ftp CNAME ......

### 占位符

# php - 在 Yii 中调试 SQL 查询。CFileLogRoute 与 CWebLogRoute

> ID：12022484
> 
> 赞同：3
> 
> 时间：2012-08-18T21:46:06.953
> 
> 标签：php, sql, debugging, yii

在网上广泛搜索后，我仍然无法弄清楚这一点。CWebLogRoute 不显示 SQL 调试信息，但 CFileLogRoute 显示。关于如何让 CWebLogRoute 工作的任何想法？谢谢！

这是我的配置文件：

```
'db'=>array(
    'connectionString' => 'mysql:host=localhost;dbname=myname',
    'emulatePrepare' => true,
    'username' => 'root',
    'password' => 'root',
    'charset' => 'utf8',
    'enableParamLogging'=>true,
    'enableProfiling'=>true,
),

'log'=>array(
    'class'=>'CLogRouter',
    'routes'=>array(
        array(
            'class'=>'CFileLogRoute',
            'levels'=>'error, warning, trace, info',
        ),
        array(
            'class'=>'CWebLogRoute',
            'levels'=>'error, warning, trace, info',
        ),
  ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:50:36.307

它至少显示了一些东西吗？它在我本地运行良好。尝试添加`profile`到`CWebLogRoute.levels`. 顺便说一句，我更`CProfileLogRoute`喜欢`sql`：

```
array(
    'class'=>'CProfileLogRoute',
    'enabled'=> YII_DEBUG,
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T09:08:52.110

你的 yii 框架是什么版本的？并设置级别 '' 。

```
'log'=>array(
        'class'=>'CLogRouter',
        'routes'=>array(
            array(
                'class'=>'CFileLogRoute',
                // 'levels'=>'error, warning',
            ),
            // uncomment the following to show log messages on web pages
            array( // configuration for the toolbar
              'class'=>'XWebDebugRouter',
              'config'=>'alignRight, opaque, runInDebug, fixedPos, collapsed, yamlStyle',
              // 'levels'=>'error, warning, trace, profile, info',
              'allowedIPs'=>array('127.0.0.1','::1','192.168.10.195','192\.168\.1[0-5]\.[0-9]{3}'),
            ),
        ),

    ), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T02:22:05.090

这并不能直接回答您的问题，但我发现 Yii 调试工具栏是我最近一直在做的工作的一个很棒的附加组件。它不仅会显示您正在运行的 SQL 语句（文字语句，而不是参数化版本），而且还会显示您确实经常需要的许多其他信息......

你可以在这里得到它：[http ://www.yiiframework.com/extension/yii-debug-toolbar/](http://www.yiiframework.com/extension/yii-debug-toolbar/)

# javascript - 将 JavaScript 表存储在变量中

> ID：12022490
> 
> 赞同：0
> 
> 时间：2012-08-18T21:46:38.987
> 
> 标签：javascript, jquery, css

我的目标是从 SQL 数据库中提取 cookie 存储提醒日期和时间。然后从那里将 cookie 存储为 JSON cookie 并解析它。从这里我们遍历 cookie，同时设置来自 cookie 的数据表/行/列。从这一点开始，我们会弹出一个模式来向访问者展示他/她当天有什么提醒。我的想法是遍历 cookie 并检查日期和时间以查看是否有任何超过当前日期和时间，如果是，则将 true 存储到`DatePasted`变量中，然后显示模态。但是，这样做的问题是，如果任何一个提醒为真，它将显示列表中的所有提醒。我们只想向他们展示到目前为止已经出现的超出当前日期和时间的提醒。有点像 Outlook 提醒。模态是使用 jQuery 创建的。

![真实例子](../Images/fda43eef425a4800b0a60b8d603da97f.png)

问题是我需要一种方法来控制显示模式和仅显示超过当前日期和时间的实际提醒`CookieTime`。可以在其中`CookieTime`包含一个以上的提醒。所以我的想法是循环检查`CookieTime`数据的日期和时间，如果有任何通过，则将该表行存储到一个变量中以显示在模式中并插入过去的数据行。如果他们有，那么我们需要向他们展示提醒模式。

这是一些伪代码：

```
var myTable
for (loop through the cookie data and check each entries date and time)

     CookieTime Reminder Date and Time

     if CookieTime < Current Date/Time){
        //Reminder has pasted the current date and time.
        myTable = (First row of table to contain the titles of the table)
       myTable = myTable + (rows of data from the cookie that have passed current date/time)
     }
}

if CookieTime < Current Date/Time){
   Print MyTable (Show the reminders window with data pasted...) 
} 
```

这是我到目前为止的脚本：

```
//Prepare the variables for the table layout...
var root=document.getElementById('tubData');
var tab=document.createElement('table');
tab.className="mytable";
var tbo=document.createElement('tbody');
var row, cell;
tab.className="mytable";

//Store todays current date and time.
var currDate = new Date();
//Store todays date and time to date.
var date = new Date(currDate.getMonth() + 1 + "-" + currDate.getDate() + "-" + currDate.getFullYear() + " " + currDate.getHours() + ":" + currDate.getMinutes() + ":" + currDate.getSeconds());

    $(document).ready(function(){

        //Grab the Cookie data that mysql created and parse with JSon.
        var reminders = $.cookie('reminders');
        reminders = JSON.parse(reminders);

        //Prepare creating the first row in the table.
        row=document.createElement('tr'); 

        for (var i=0,len=6; i<len; i++){
        // Create the Header of the table.         

            //Check and see if the currDate Date/Time has pasted the CookieTime Date/Time...
            var CookieTime = new Date(reminders[0].reminderdate + ' ' + reminders[0].remindertime); //Cookie Date/Time
            var difference = CookieTime - currDate; //Subtract CookieTime from currDate to see if time pasted.

                if (difference <= 0) {
                //If the Current Date/Time pasted CookieTime lets show the modal.
                    //Show Reminders Modal below...
                    var DatePasted = true;
                }else{
                    //Don't show Reminders Modal below...
                    var DatePasted = false;
                }

                cell=document.createElement('td');

                    //Create the Titles for each Column in the table.
                    switch(i){
                    case 0:
                        cell.innerHTML = "<img src='menubar/ico_delete16.gif' width='16' height='16'>";
                        break;
                    case 1:
                        cell.appendChild(document.createTextNode('Reminder Date'));
                        break;
                    case 2:
                        cell.appendChild(document.createTextNode('Title/Message'));
                        break;
                    case 3:
                        cell.appendChild(document.createTextNode('Priority'));
                        break;
                    case 4:
                        cell.appendChild(document.createTextNode('Call Type'));
                        break;
                    case 5:
                        cell.appendChild(document.createTextNode('Status'));
                        break;
                    }

                    row.appendChild(cell);
                    tbo.appendChild(row);
        }

        //Begin looping through the cookie array data to show on the following rows.
        for (var i=0,len=reminders.length; i<len; i++){

        row=document.createElement('tr');//Create a new row per loop.

            //We will start looping though and showing the data of the cookie per cell. 
            for (var i=0,len=6; i<len; i++){

                cell=document.createElement('td');

                    switch(i){
                    case 0: //Delete box for dismissing or snoozing a reminder.
                        if (reminders[0].tid==''){
                            cell.innerHTML = "<input name='remove" + i + "' id='remove" + i + "' type='checkbox' value='" + reminders[0].tid + "'>"
                        }else{
                            cell.innerHTML = "<input name='remove" + i + "' id='remove" + i + "' type='checkbox' value='" + reminders[0].thid + "'>"
                        }
                        break;
                    case 1: //Date and Time of the reminder here...
                        cell.appendChild(document.createTextNode(reminders[0].reminderdate + ' at ' + reminders[0].remindertime));                
                        break;
                    case 2: //Title and message of the reminder here...           
                        if ((reminders[0].title || '') == "")
                        {
                            cell.innerHTML = "<a href='reader.asp?tid=" + (reminders[0].tid || '') + "&cnt='" + (reminders[0].cnt || '') + "' >" + (reminders[0].message || '') + "</a>"
                        }
                        else
                        {
                            cell.innerHTML = "<a href='reader.asp?tid=" + (reminders[0].tid || '') + "&cnt='" + (reminders[0].cnt || '') + "' >" + (reminders[0].title || '') + '<br />' + (reminders[0].message || '') + "</a>"
                        }
                        break;

                    case 3: //Ticket Priority
                        switch(reminders[0].priority){
                        case 1:
                            cell.appendChild(document.createTextNode('Low'));
                            break;
                        case 2:
                            cell.appendChild(document.createTextNode('Normal'));
                            break;
                        case 3:
                            cell.appendChild(document.createTextNode('High'));
                            break;
                        case 4:
                            cell.appendChild(document.createTextNode('Critical'));
                            break;
                        case 5:
                            cell.appendChild(document.createTextNode('Emergency'));
                            break;
                        default:
                            cell.appendChild(document.createTextNode('Undefined'));
                            break;
                        }
                        break;
                    case 4: //Call Type here...
                        cell.appendChild(document.createTextNode((reminders[0].fieldvalues || '')));
                        break;
                    case 5: //The status of the ticket here...
                        switch(reminders[0].status){
                    case 1:
                        cell.appendChild(document.createTextNode('New'));
                        break;
                    case 2:
                        cell.appendChild(document.createTextNode('Active'));
                        break;
                    case 3:
                        cell.appendChild(document.createTextNode('Pending'));
                        break;
                    default:
                        cell.appendChild(document.createTextNode('Closed'));
                        break;
                        }
                        break;
                    }

                    row.appendChild(cell);
        }
                tbo.appendChild(row);
            }

    tab.appendChild(tbo);
    root.appendChild(tab);

       //Show JQuery Modal only if one of the dates/times has pasted CookieTimes
       if (DatePasted == true){ 
            $('#basic-modal-content').modal({
                escClose:false,
            });
       }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:18:54.973

这里 - 未经测试，可能有错别字

[演示](http://jsfiddle.net/mplungjan/5V6z7/)

```
//Prepare the variables for the table layout...
var root=$('#tubData');
var tab=$('<table/>');
tab.attr("class","mytable");
var tbo=$('<tbody/>');
var row, cell;
tab.attr("class","mytable");

//Store todays current date and time.
var currDate = new Date();

$(document).ready(function(){

        //Grab the Cookie data that mysql created and parse with JSon.
        var reminders = $.cookie('reminders');
        reminders = JSON.parse(reminders);

        //Prepare creating the first row in the table.
        row=$('<tr/>');

        // Create the Header of the table.         
        //Check and see if the currDate Date/Time has pasted the CookieTime Date/Time...
        var CookieTime = new Date(reminders[0].reminderdate + ' ' + reminders[0].remindertime); //Cookie Date/Time
        //Subtract CookieTime from currDate to see if time pasted.  
        var difference = CookieTime - currDate;
        var DatePasted = difference <= 0;

        //Create the Titles for each Column in the table.

        row.append('<td><img src="menubar/ico_delete16.gif" width="16" height="16"></td>')
           .append('<td>Reminder Date</td>');
           .append('<td>Title/Message</td>');
           .append('<td>Priority</td>');
           .append('<td>Call Type</td>');
           .append('<td>Status</td>');                   
        tbo.append(row);

        //Begin looping through the cookie array data to show on the following rows.
        $.each(reminders,function(i,reminders){

          row=$('<tr/>');//Create a new row per loop.
          row.append('<td><td><input name="remove' + i + '" id="remove' + i + '" type="checkbox" value="' +
                     (reminders[0].tid==''? reminders[0].tid:reminders[0].thid) +
              '"></td>')
          // Date and Time of the reminder here...
          row.append('<td>'+reminders[0].reminderdate + ' at ' + reminders[0].remindertime+'</td>');
          //Title and message of the reminder here...           
            row.append("<td><a href='reader.asp?tid=" + (reminders[0].tid || '') + "&cnt='" + (reminders[0].cnt || '') + "' >" + (reminders[0].title||'')+(reminders[0].title?'<br />':'') + (reminders[0].message || '') + '</a></td>')
          //Ticket Priority
          var prio = ["Undefined","Low","Normal","High","Critical","Emergency"]
          row.append("<td>"+prio[reminders[0].priority]+"</td>");
          row.append("<td>"+reminders[0].fieldvalues || '')+"</td>");
          row.append("<td>"+['','New','Active','Pending','Closed'][reminders[0].status]+"</td>");
          tbo.append(row);
     });

    tab.append(tbo);
    root.append(tab);

       //Show JQuery Modal only if one of the dates/times has pasted CookieTimes
       if (DatePasted){
            $('#basic-modal-content').modal({
                escClose:false,
            });
       }
 }); 
```

# iphone - 当我单击 XIB 文件时，Xcode 4.2 崩溃

> ID：12022492
> 
> 赞同：2
> 
> 时间：2012-08-18T21:47:34.117
> 
> 标签：iphone, xcode, cocoa, ipad, cydia

过去一个月我一直在使用 Xcode 4.2，没有发生任何事故。两天前，我回到我的项目中，为我的应用程序添加了一些导航栏。当我点击 .XIB（任何一个）时，xcode 崩溃了。

我尝试启动一个新项目，但最终得到了完全相同的结果。我 sudo 完全删除了 xcode 并进行了全新安装。不幸的是，问题仍然存在，我无法升级到最新的 Xcode，因为我可以访问的唯一 mac 是与 Mountain Lion 不兼容的 2006 macbook。

以下是 Xcode 启动时的错误消息。

这似乎是一个可可问题，但我不知所措。

> /SourceCache/IDEInterfaceBuilderCocoaTouch/IDEInterfaceBuilderCocoaTouch-933/IBPlugin/Utilities/IBObjectMarshalling.m:179 中的断言失败详细信息：Interface Builder 与 iOS 模拟器通信时遇到错误。“Interface Builder Cocoa Touch Tool”(431) 无法启动并以状态（null）退出，信号 5。请查看 Console.app 以获取“Interface Builder Cocoa Touch Tool”的崩溃报告以获取更多信息。函数：NSDisantObject *IBAttachToCocoaTouchTool(IBCocoaTouchTargetRuntime *) 线程：{name = (null), num = 1} 提示：无 回溯：0 0x00000000008c184b -[IDEAssertionHandler handleFailureInFunction:fileName:lineNumber:messageFormat:arguments:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:35:17.253

如果您真的无法升级到 xCode 4.4...

你用时间机器吗？

尝试倒带您的整个系统...

# c# - 无法加载类型“AjaxControlToolkit.Sanitizer.AntiXssSanitizerProvider”。

> ID：12022493
> 
> 赞同：5
> 
> 时间：2012-08-18T21:47:41.247
> 
> 标签：c#, asp.net, webforms, ajaxcontroltoolkit

我尝试使用 htmleditorextender，但出现错误。以下是我的设置

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<asp:TextBox runat="server" ID="textBoxGalleryUrl" CssClass="cstmtxtclr" />
<asp:HtmlEditorExtender ID="HtmlEditorExtender1" runat="server" TargetControlID="textBoxGalleryUrl"></asp:HtmlEditorExtender> 
```

我的 web.conf 设置是；

```
 <configSections>
    <sectionGroup name="system.web">
      <section name="sanitizer"
          requirePermission="false"
          type="AjaxControlToolkit.Sanitizer.ProviderSanitizerSection, AjaxControlToolkit"/>
    </sectionGroup>
  </configSections>

  <system.web>
    <!--<httpRuntime requestValidationMode="2.0"/>-->
    <compilation debug="true" targetFramework="4.0"/>

    <sanitizer defaultProvider="AntiXssSanitizerProvider">
      <providers>
        <add name="AntiXssSanitizerProvider"
              type="AjaxControlToolkit.Sanitizer.AntiXssSanitizerProvider"></add>
      </providers>
    </sanitizer>
  </system.web> 
```

我的 bin 文件夹中有以下 dll；

```
AntiXSSLibrary.dll
SanitizerProviders.dll
HtmlSanitizationLibrary.dll 
```

但我仍然收到此错误；

```
Could not load type 'AjaxControlToolkit.Sanitizer.AntiXssSanitizerProvider'. 
```

**为什么我收到此错误？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-20T13:24:11.357

[自 2012 年 6 月起，不再支持](http://stephenwalther.com/archive/2012/06/25/announcing-the-june-2012-release-of-the-ajax-control-toolkit.aspx)将`AntiXss`其用作默认消毒剂。从官方公告来看，显然新版本破坏了太多东西。`AntiXss`

要与您一起使用 AjaxControlToolkit，`HTML Agility Pack`首先需要使用 Nuget（[指令](http://nuget.org/packages/HtmlAgilityPack)）安装 pacakge。

然后你可以像这样`HTML Agility Pack`修改你的作为你的消毒剂`web.config`：

```
<configuration>
    <configSections>
        <sectionGroup name="system.web">
            <section name="sanitizer" requirePermission="false"
                     type="AjaxControlToolkit.Sanitizer.ProviderSanitizerSection, AjaxControlToolkit" />
        </sectionGroup>
    </configSections>

    <system.web>
        <sanitizer defaultProvider="HtmlAgilityPackSanitizerProvider">
            <providers>
                <add name="HtmlAgilityPackSanitizerProvider" type="AjaxControlToolkit.Sanitizer.HtmlAgilityPackSanitizerProvider"></add>
            </providers>
        </sanitizer>
      </system.web>
</configuration> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T14:56:07.033

必须为所有新版本的 Ajax Control Toolkit 安装[HTML Agility Pack 。](http://htmlagilitypack.codeplex.com/)不幸的是，网络上的很多答案都是错误的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T09:23:54.650

在高低搜索相同的问题要解决后，我发现 Ajax Control Kit 也需要通过 Library Package Manager 加载......

*PM* >*安装包 AjaxControlToolkit*

这为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:44:08.590

建议您从此处下载最新的 Html Agility Pack：http: [//htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)并放入您的 bin 并在您的项目中添加对它的引用。

**或者使用安装命令：**

PM> Install-Package HtmlAgilityPack

您可以查看此链接[http://nuget.org/packages/HtmlAgilityPack](http://nuget.org/packages/HtmlAgilityPack)

您不必使用或引用 AntiXSSLibrary，只需使用 HtmlAgilityPackSanitizerProvider，您的错误就会消失

祝你好运

# powershell - 如何在主代码和后台进程中使用相同的powershell函数

> ID：12022497
> 
> 赞同：2
> 
> 时间：2012-08-18T21:49:22.807
> 
> 标签：powershell, start-job

我想在我的主代码主体中使用的后台进程中使用相同的函数。

如果我这样写，“add”函数适用于后台进程，但我不能在主代码中使用它。

```
$add = { function add($a,$b) { return $a+$b } }
$job = Start-Job -Name "test" -ArgumentList @(2,4) -InitializationScript $add -ScriptBlock { return add $args[0] $args[1] }
sleep 1
Receive-Job -Name "test"
Remove-Job -Name "test" -force
add 2 4 
```

如果我删除“添加”函数定义周围的 {}，它适用于主体，但不适用于后台进程。

```
$add = function add($a,$b) { return $a+$b }
$job = Start-Job -Name "test" -ArgumentList @(2,4) -InitializationScript $add -ScriptBlock { return add $args[0] $args[1] }
sleep 1
Receive-Job -Name "test"
Remove-Job -Name "test" -force
add 2 4 
```

如何在后台进程和主代码中使用我的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:07:56.123

在您的主代码中点源您的“库”脚本块。

```
$add = { function add($a,$b) { return $a+$b } }
. $add
add 2 4 
```

# html - 在单行上垂直对齐图像和链接

> ID：12022499
> 
> 赞同：0
> 
> 时间：2012-08-18T21:49:34.940
> 
> 标签：html, css

如何对齐以下内容以使图像和链接垂直对齐？另外如何增加连续行之间的间距？

```
<li><img src="c.png" alt="Centern | Karta"/> <a href="centern.php">Centern</a> </li>

<li><img src="fi.png" alt="Feministiskt initiativ | Karta"/><a href="feministiskt.php">Feministiskt initiativ</a> </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:04:07.007

您可以将图像作为背景。

HTML

```
<li><a class='centern' href="centern.php" title="Centern | Karta">Centern</a> </li> 
```

CSS

```
a.centern {
    background: url('c.png') no-repeat;
    height:20px; //height of the link
    width:100px; //width of the link
    padding-left:40px //give some space for the background image
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:10:42.513

不完全确定对齐是什么意思。我在这里设置了一个小提琴：http: [//jsfiddle.net/GX5k6/](http://jsfiddle.net/GX5k6/)

```
/* this takes care of the alignment of the text and images */
li a {
    display: block;
    line-height: 32px;
    float: left;
    padding-left: 5px; /* spacing between image and text */
}
li img {
    display: block;
    float: left;    
}
li {
    clear: both;
    overflow: hidden;    
}
/* spacing between lines */
li {
   margin-bottom: 5px;   
} 
```

根据您是否考虑图像样式或内容以及如果您希望它们在页面打印时显示，您确实应该考虑按照@petar 的建议将它们制作为背景图像

# windows - Windows Azure 缓存（预览版）错误代码 :子状态 ：

> ID：12022500
> 
> 赞同：3
> 
> 时间：2012-08-18T21:49:47.753
> 
> 标签：windows, azure

我正在为 Windows azure Web 角色使用基于角色的缓存功能。配置为并置。我已按照 windows azure docs 给出的步骤进行缓存（预览）。我收到以下错误：

> ErrorCode <ERRCA0017>:SubStatus<ES0006>:有暂时故障。请稍后重试。（指定的一个或多个缓存服务器不可用，可能是由于网络或服务器繁忙。对于本地缓存集群，还要验证以下条件。确保已为此客户端帐户授予安全权限，并检查 AppFabric所有缓存主机上的缓存服务都允许通过防火墙。服务器上的 MaxBufferSize 必须大于或等于客户端发送的序列化对象大小。）。附加信息：客户端试图与服务器通信：net.tcp://127.255.0.4:20010/。

我以本地主机的身份运行所有内容，使用本地开发存储，我的缓存客户端与服务器的角色相同。更改了许多配置属性，但我总是得到那个 excpection 或类似的“无法连接到 tcp ....”。

我会很感激一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:54:36.047

您的应用程序可能会出现一些问题。

首先要确保您的机器中有 SDK 1.7，即使使用 Windows Azure 缓存服务，然后验证您是否有来自 Windows Azure 缓存（而不是来自 Windows Server App Fabric SDK）的参考集。我过去曾见过导致此类错误的此类错误配置。

现在，您是否已将 dataCacheClient、标识符更改为您的角色名称，如此处文档链接中[所述](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)。如果您按照描述的文档操作，则不应遇到任何错误，因此为了检查可能出现的问题，您可以创建与此链接中描述的完全相同的应用程序，看看是否有效。

要获取更多详细信息错误，请务必将 DataCacheFactoryConfiguration.ChannelOpenTimeout 值增加到更长的时间，即 2 分钟，然后默认为 20 秒，如此[处](http://blogs.msdn.com/b/akshar/archive/2011/05/01/azure-appfabric-caching-errorcode-lt-errca0017-gt-substatus-lt-es0006-gt-what-to-do.aspx)所述。此步骤将帮助您获取有关可能导致问题的实际根本原因的内部异常的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:10:37.313

我们使用 Azure 共存缓存（不再是预览版）作为我们的会话支持者，并且经常出现中断。大约一个月一次。

我们尝试使用企业库[瞬态故障处理](http://msdn.microsoft.com/en-us/library/hh680905%28v=pandp.50%29.aspx)，但是当缓存遇到问题时，我们的实例仍然挂起。我认为瞬态故障代码适用于数据缓存，但对于会话支持，有一些活动更接近于我们似乎无法编写代码的金属。

错误代码在过去一年中变得更加丰富，类似于......

> 错误代码：子状态：请求超时.. 附加信息：客户端试图与服务器通信：net.tcp://10.xx.xxx.xx:xxxxx/。

到目前为止，从试验和 MS 支持来看，我们最好的猜测是，每个或至少一个位于同一位置的缓存角色/实例都需要了解所有其他实例的 IP，因为 Azure 可以随时销毁和重新启动实例，有时这无法更新依赖实例。这是 Azure 的秘诀，但当我们的网站出现故障时，它就不是秘密了。我正在寻找有关此问题的更多信息，并查看其他人如何解决此问题。

**一种可能的解决方法。**我们的一位才华横溢的平台管理员发现，在实例上重置 IIS 并再扩展两个实例似乎有助于解决问题。这对我来说很有意义，因为它为缓存提供了另一个机会来收集有关其他实例的所有必需信息。尚未确认这可以解决问题，但如果我们在下一次中断期间重复此操作，它可能是一个有效的解决方法。

# jquery - 使用jquery改变div的位置

> ID：12022501
> 
> 赞同：0
> 
> 时间：2012-08-18T21:49:53.303
> 
> 标签：jquery

我有一个包含小 div 和一个空白空间的 div 作为起点。我想要做的是，当我单击与空白空间接壤的任何 div 时，单击的 div 必须移动到该空白空间并创建另一个空白空间，然后单击该空白空间将被附近的任何其他 div 占用。这个想法是小 div 必须有自动机制来决定移动的位置将/必须用 css 位置控制。我是 jquery 的新手，任何建议都将不胜感激，这是我的代码，我刚从两行 div 开始，但在我转到 4 行之前我无法做到这一点

```
<html>
    <head> 
    <title>divs</title>
        <link rel="stylesheet" media="all" type="text/css" href="css/main.css"/>
        <script type="text/javascript" src="js/jquery-1.8.0.js"></script>
    </head>
<script type="text/javascript">
    $(document).ready(function() {
        var goTo= new Array("2,5","1,3,6","2,4,7","3,8","1,6","2,5,7","3,7,8","4,7");
        var position= new Array("0,0","0,0,60","0,0,120","0,180","0,60","0,0,120","0,60,180","0,120");
        var here=8;
        var click=true;
        $(".box").click(function(){
            if(click==true){
                click=false;
                var id=$(this).attr("id");
                id=id.split("_");
                id=parseInt(id[1]);
                id--;
                var adjacents=goTo[id];
                adjacents=adjacents.split(",");
                var move=false;
                for(i in adjacents){
                    if(adjacents[i]==here){
                        move=true;
                    }
                }
                if(move==true){
                    var movePos=position[(here-1)];
                    alert(movePos);
                        movePos=movePos.split(",")
                    $(this).animate({top:movePos[0],left:movePos[1]},1000,function(){
                        $(this).attr("id","box_"+here);
                        here=id+1;
                        click=true;
                    })
                }
                else{
                    click=true;
                }
            }

        });

    });
</script>
    <body>
        <div id="container">

                <div id="box_1" class="box" style="background:yellow;top:0px;left:0px;">
                    1
                </div>
                <div id="box_2" class="box" style="background:red;top:0px;left:60px;">
                    2
                </div>
                <div id="box_3" class="box" style="background:magenta;display:block;top:0px;left:120px;">
                    3
                </div>

                <div id="box_4" class="box" style="background:brown;top:0px;left:180px;">
                    4
                </div>
                <div id="box_5" class="box" style=" background:orange;top:60px;left:0px;">
                    5
                </div>
                <div id="box_6" class="box" style="background:pink;top:60px;left:60px;">
                    6
                </div>
                <div id="box_7" class="box" style="background:green;top:60px;left:120px;">
                    7
                </div>

        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:00:37.193

嗨，您可以继续在那个大 div 中创建相同数量的小 div。并使其中一个小 div 透明。接下来单击该透明附近的一些 div，将单击的 div 的 css 更改为透明的，反之亦然。使用 jQuery 交换 css

# android - 调整自动旋转的位图大小

> ID：12022502
> 
> 赞同：1
> 
> 时间：2012-08-18T21:50:42.620
> 
> 标签：android, bitmap, resize, autorotate

我有一个代码，我在其中调用画廊来选择我在 imageview 中显示的图像。这工作正常并保持纵横比。问题是当图像尺寸大于 2048 x 2048 时，我正在使用此代码：

> uriIsNowAbitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(), selectedImageUri);
> 
> ```
>  //...
> 
>           int height = uriIsNowAbitmap.getHeight();
>           int width = uriIsNowAbitmap.getWidth();
> 
>           if ((width>=2048)||(height>=2048)) {
> 
>               int newheight  = height/10; // height in pixels
>               int newwidth = width/10; // width in pixels    
>               Bitmap avatarScaled = Bitmap.createScaledBitmap(uriIsNowAbitmap,  newwidth, newheight, true);
> 
>               previewNewAvatar.setImageBitmap(avatarScaled); 
> ```
> 
> }

也可以正常工作，但有问题。图像不是旋转横向显示的类型

为了解释，我举了这个例子。这是画廊的图片：

![在此处输入图像描述](../Images/f5cb8f09d7021478d112637feab60c4c.png)

当我选择图片并将其分配给 imageview 时显示旋转：

![在此处输入图像描述](../Images/473cb608bccba02a4a88b9c52fb42b26.png)

我不懂为什么。我已经尝试了一千种方法并阅读了很多关于调整大小的信息，我已经阅读了这个网站的线程和示例代码（[Android：高质量图像调整大小/缩放](http://stackoverflow.com/questions/4207562/android-high-quality-image-resizing-scaling)）等等......但没有任何帮助。目的是以这种方式展示......*用photoshop制作*:)

![在此处输入图像描述](../Images/4f15760a771cdc777dc5f26e12112d91.png)

我很感激任何帮助，花了很多时间试图修复它

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:16:13.513

首先，您必须检测方向变化，当检测到横向变化时，您只需相应地旋转位图。您必须将您的 Bitmap avatarScaled 声明为全局变量，以便在下面的 onConfigurationChanged() 方法中访问它：

使用 Activity 的 onConfigurationChanged 方法来检测方向的变化。请参阅以下代码：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig);

if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
Matrix matrix = new Matrix();
matrix.postRotate(90);
Bitmap rotated = Bitmap.createBitmap(avatarScaled, 0, 0, avatarScaled.getWidth(),
                                     avatarScaled.getHeight(), matrix, true);
previewNewAvatar.setImageBitmap(rotated);
} 
} 
```

您还必须在清单文件中编辑适当的元素以包含 android:configChanges 只需查看以下代码：

```
<activity android:name=".MyActivity"
      android:configChanges="orientation|keyboardHidden"
      android:label="@string/app_name"> 
```

# machine-learning - 如何使用视频数据集训练分类器

> ID：12022505
> 
> 赞同：1
> 
> 时间：2012-08-18T21:51:57.377
> 
> 标签：machine-learning, classification

如果我有一个特定动作的视频数据集，我怎么能用它们来训练一个分类器，以后可以用来分类这个动作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T22:06:10.593

这个问题非常笼统。一般来说，没有一种万无一失的方法来训练一个适用于所有事情的分类器。这在很大程度上取决于您正在使用的数据。

这是“通用”管道：

*   从视频中提取特征
*   标记你的特征（对你正在寻找的行动是积极的；否则是消极的）
*   将您的数据分成 2（或 3）组。一个用于训练，一个用于测试，另一个用于验证
*   在标记示例上训练分类器（例如 SVM、神经网络、最近邻...）
*   验证验证数据上的结果，如果这适用于算法
*   对未用于训练的数据进行测试。

您可以从这里开始使用一些机器学习工具[http://www.cs.waikato.ac.nz/ml/weka/](http://www.cs.waikato.ac.nz/ml/weka/)

确保您**从不出于****测试**以外的任何其他目的接触**测试数据**

 **祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-21T19:07:33.707

差不多 10 年后，这是一个更新的答案。

1.  设置摄像头并收集原始视频数据
2.  以单帧的形式将其保存在某处。自己在本地或使用云存储桶或使用[Sieve API 之](https://sievedata.com/)类的服务执行此操作。有用的回购[链接在这里](https://github.com/Sieve-Data/automatic-video-processing)。
3.  从 Sieve 或云存储桶导出以获取标记的数据。自己执行此操作或使用[Scale Rapid 之](https://scale.com/rapid)类的服务。
4.  将数据集拆分为训练、测试和验证。
5.  在标记的样本上训练分类器。在一些现有模型上使用迁移学习并仅微调最后几层。
6.  在每个训练时期后在测试集上运行您的模型，并保存具有最佳测试集性能的模型。
7.  最后使用验证集评估您的模型。

有很多 repos 可以帮助你入门：[https ://github.com/weiaicunzai/awesome-image-classification](https://github.com/weiaicunzai/awesome-image-classification)

可以帮助您确保获得最佳结果的两件事包括 1.**高质量的标记数据**和 2.**多样化的精选数据集**。这就是[Sieve](https://sievedata.com/)可以提供的帮助！**

# c# - 如何在 ListBox 中创建带有子项的可折叠组标题？

> ID：12022508
> 
> 赞同：0
> 
> 时间：2012-08-18T21:52:19.857
> 
> 标签：c#, .net, wpf

我有一个由分组数据填充的列表框，下面有一个标题和子项 - 我想自定义控件，使每个组标题都是一个扩展器（最初关闭），展开它会显示它下面的该组的项目

我还是 WPF 的新手，所以我该怎么做？我是否需要为 GroupStyle 的 HeaderTemplate （这里是否包含 ItemsPresenter ？）和 ItemTemplate 实现数据模板，或者除了两个数据模板之外，我还需要创建一个全新的 ControlTemplate 吗？

另外，使用扩展器作为标题会禁用 ListBox 的项目虚拟化功能吗？如果是这样，我该怎么做才能确保不会发生这种情况？如果我将 VirtualizingStackPanel 放在 Expander 内容中，会减轻这种情况还是不必要？

我的分组非常简单，只是一个字段上的平面集合：

```
ICollectionView collegeView = new ListCollectionView(playerDatabase);
collegeView.GroupDescriptions.Add(new PropertyGroupDescription("CollegeName"));
collegeView.SortDescriptions.Add(new SortDescription("CollegeName", ListSortDirection.Ascending));
collegeView.SortDescriptions.Add(new SortDescription("FirstName", ListSortDirection.Ascending));
lstCollege.ItemsSource = collegeView; 
```

**更新** 这是我迄今为止尝试过的：

```
<ListBox x:Name="lstCollege" IsSynchronizedWithCurrentItem="True">
<ListBox.GroupStyle>
    <GroupStyle>
        <GroupStyle.HeaderTemplate>
            <DataTemplate>
                <Border Background="Blue" CornerRadius="5">
                     <Expander Header="{Binding Path=Name}" FontWeight="Bold" Foreground="White" Padding="3">
                         <ItemsPresenter />
                     </Expander>
                </Border>
            </DataTemplate>
        </GroupStyle.HeaderTemplate>
    </GroupStyle>
</ListBox.GroupStyle>

<ListBox.ItemTemplate>
    <DataTemplate>
        <StackPanel Orientation="Vertical">
            <TextBlock>
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0} {1}">
                        <Binding Path="FirstName" />
                        <Binding Path="LastName" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </StackPanel>
    </DataTemplate>
</ListBox.ItemTemplate>
</ListBox> 
```

不幸的是，这呈现的是每个组的扩展器，但是项目并未在其中呈现 - 它们在组项目之外呈现并且扩展器为空

我认为发生这种情况的原因是因为 GroupItem 与 ListItem （或其他任何名称）分开呈现，因此 ListViewItem 不包含在每个 GroupItem 内......我认为 ListBox 呈现它的方式是 GroupItem、ListItem、ListItem , ListItem, GroupItem, ListItem 等

我将如何更改控件以便每个 GroupItem 也可以包含一组 ListItems ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:55:34.267

您应该能够创建一个`GroupStyle`并专门使用`ContainerStyle`来定义可使用 Expander 折叠的组。这不需要 a`DataTemplate`或 a`ControlTemplate`因为它特定于分组功能。看看 MSDN 上的“ [GroupStyle.ContainerStyle](http://msdn.microsoft.com/en-us/library/system.windows.controls.groupstyle.containerstyle) ”属性，[这个其他答案](https://stackoverflow.com/questions/4266311/how-to-group-listboxitems-by-first-letter-in-wpf-using-xaml)也提供了一个例子。

# qt - 在 python 中扩展 Qml：命名信号参数

> ID：12022513
> 
> 赞同：1
> 
> 时间：2012-08-18T21:53:57.953
> 
> 标签：qt, pyqt, qml, pyside

根据Qt的文档：

> 注册类上的所有 Qt 信号都可以作为 QML 中的特殊“信号属性”使用，用户可以为其分配单个 JavaScript 表达式。信号属性的名称是 Qt 信号名称的转换版本：前置“on”，信号名称的第一个字母大写。例如，上例中使用的信号具有以下 C++ 签名：
> 
> 信号：void partyStarted(const QTime &time);
> 
> 信号参数可以通过名称访问分配的脚本。无法访问未命名的参数，因此应注意在 C++ 类声明中命名所有信号参数。添加类型中列出的内在类型以及注册的对象类型都允许作为信号参数类型。使用其他类型不是错误，但无法从脚本访问参数值。

“所以应该注意在 C++ 类声明中命名所有信号参数” => 我如何在 python 中做到这一点？

我需要这个来尝试将这个自定义 C++ 扩展：[http](http://qt-project.org/doc/note_revisions/44/221/view) ://qt-project.org/doc/note_revisions/44/221/view (WheelArea) 转换成一些 python/PySide 或 PyQt 代码：

到目前为止，我几乎很好，但我不知道如何翻译这部分（车轮事件信号）：

```
signals:
    void verticalWheel(int delta);
    void horizontalWheel(int delta); 
```

在 python 中（命名的信号参数）从 qml 访问增量。

# javascript - jquery 语句专注于实时生成的输入

> ID：12022518
> 
> 赞同：1
> 
> 时间：2012-08-18T21:54:59.543
> 
> 标签：javascript, jquery, forms, focus

好的，所以我需要一个输入元素在它出现在 DOM 中时自动聚焦。这就是我目前正在尝试做的事情：

```
modal.fadeIn('fast', function(){
    $('input.cm_modal_input_elem').focus();
}); 
```

这是行不通的。这样做的官方方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:01:58.877

这是官方的做法，如果它不能正常工作，除了发布的代码之外的其他东西一定是导致问题的原因。就像说您正在动态插入元素并期望您在页面加载时调用的函数稍后在插入元素时执行，或者有其他元素稍后在您的脚本中接收焦点等。

这是一个[小提琴](http://jsfiddle.net/5uX6e/)来展示它的工作原理！

# java - 命令在终端中有效，但在脚本中无效？

> ID：12022519
> 
> 赞同：1
> 
> 时间：2012-08-18T21:55:02.077
> 
> 标签：java, linux, unix, ubuntu

我有以下脚本，它在作为脚本执行时不起作用，但在将完全相同的命令输入终端时起作用：

```
#! /bin/sh

cd ~/Desktop/Example/

javac Generator.java 
```

错误信息是：

> my_script.sh 3：my_script.sh：javac：未找到

上面的脚本名为 my_script.sh ，我使用以下命令从终端执行它：

> sh my_script.sh

当我做

> 回声 $SHELL

在终端我得到：

> /bin/bash

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:25:29.947

您还`jmlc`可以通过导出其 PATH 使其可用：

```
#! /bin/sh

export jmlc_bin=FULL_PATH_TO_JMLC

cd ~/Desktop/Example/

$jmlc_bin Generator.java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:01:50.250

将 jmlc 添加到您的路径并再次运行该脚本。

检查：打开一个新的 shell 并输入“jmc”。

使脚本正常工作的另一种方法是在脚本中指定完整路径。将“jmlc”替换为“/full_path_here/jmlc”。

**还要**确保 jmlc 脚本中的任何其他命令在路径中也可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T21:59:11.727

导航到单行命令正在运行的目录并将脚本保存在该目录中。

然后执行

```
./my_script.sh 
```

# iphone - 在未（尚未）发布的游戏中测试成就

> ID：12022526
> 
> 赞同：2
> 
> 时间：2012-08-18T21:56:58.290
> 
> 标签：iphone, ios, game-center

我有一个支持成就的小游戏。游戏尚未发布，但我需要测试成就。我现在可以做，但只是部分做，例如，当我执行游戏中心应用程序时，它似乎总是在沙盒模式下运行，并且该游戏未在“游戏”选项卡中列出。所以，我看不出成就是否达到了。有什么方法可以检查此信息以了解正在进行的游戏吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:41:47.487

您可以通过显示标准成就界面来检查，该界面将显示为游戏定义的所有未隐藏的成就以及当前登录用户已完成的成就。您应该在 ViewController 上放置与此类似的内容，并将其作为按钮的目标调用，例如：

```
- (void)showAchievements{
  GKAchievementViewController *achievements = [[GKAchievementViewController alloc] init];
  if (achievements != nil){
    achievements.achievementDelegate = self;
    [self presentModalViewController: achievements animated: YES];
  }
 [achievements release];
} 
```

你的 ViewController 应该实现 GKAchievementViewControllerDelegate 协议。

# c# - 无法通过 Style 为 ListBox 设置 GroupStyle？

> ID：12022529
> 
> 赞同：3
> 
> 时间：2012-08-18T21:57:49.480
> 
> 标签：c#, .net, wpf

我正在尝试创建一个样式，它将为我的 ListBox 控件设置 GroupStyle 属性，但是我收到了编译时错误：

```
The Property Setter 'GroupStyle' cannot be set because it does not have an accessible set accessor. 
```

我的样式设置器如下所示：

```
 <Setter Property="ListBox.GroupStyle">
            <Setter.Value>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Name}" />
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                </GroupStyle>
            </Setter.Value>
        </Setter> 
```

是否有解决此问题的方法，而且，如果此属性没有设置器，那么我们如何首先在 XAML 中使用属性设置器语法对其进行内联定义？（仍然是 WPF 的新手）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T01:42:38.513

我刚刚找到了答案——这是因为 XAML 编译器根据映射到我刚刚记住的内容的属性类型来处理元素标记之间的任何内容的方式！

如果属性是 ContentControl，那么您在两个标记之间定义的元素将分配给该 Content 属性，但是，如果该元素是 IList 的实例（这就是 GroupStyle），那么 .NET 实际上会调用 .Add()在被子下面

在这种情况下，GroupStyle 实际上是一个 ObservableCollection，因此是一个 IList，因此我们实际上并没有分配给 GroupStyle 对象，而是添加到集合中。

换句话说，由元素标记之间的内容（通过控件的 ContentProperty 属性映射）表示的属性类型会影响 XAML 编译器解释它的方式（直接赋值或调用 .Add()）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-27T12:40:50.100

您可以执行以下操作：

```
 <ListBox.GroupStyle>
            <GroupStyle ContainerStyle="{StaticResource listContainerStyle}"/>
        </ListBox.GroupStyle> 
```

然后

```
<Style x:Key="listContainerStyle" TargetType="{x:Type GroupItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <Expander Header="{Binding Name}" IsExpanded="True">
                    <ItemsPresenter />
                </Expander>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

艾维。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T22:24:57.767

```
//set you datatemplate as a resource
<DataTemplate x:Key="categoryTemplate">
<TextBlock Text="{Binding Path=Name}"/>
</DataTemplate>

//set header template binding to staticresource
<ListBox Name="lst"> 
   <ListBox.GroupStyle>
      <GroupStyle HeaderTemplate="{StaticResource categoryTemplate}" />
    </ListBox.GroupStyle>
</ListBox> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T01:13:17.360

为了更好地理解，您可以在代码中添加 groupstyle （这是 XAML 所做的）

```
GroupStyle g = new GroupStyle();
ListBox ls = new ListBox();
ls.GroupStyle.Add(g); 
```

但你不能设置 GroupStyle

```
GroupStyle g = new GroupStyle();
ListBox ls = new ListBox();
ls.GroupStyle=g;//error because GroupStyle has only a getter 
```

# jquery - 仅当 div 滚动到视口上方时才向下滚动

> ID：12022535
> 
> 赞同：0
> 
> 时间：2012-08-18T21:59:35.050
> 
> 标签：jquery, html, scroll

我有一个 div 和一个锚标签。

```
<div id="scrollDownifAboveScreen">Show all contents of this Div</div> 
```

锚标记：

```
<a onclick="getFreshcontent();scrolltoDiv();">Refresh</a> 
```

在用户刷新并且 div 的内容很大的情况下，该用户必须向下滚动才能阅读它。当他再次单击刷新时，我需要向下滚动到 div 的顶部。但如果 div 的顶部仍然可见，则不应发生滚动。我怎样才能做到这一点？

我使用了这种方法：

```
function scrolltoDiv(){

       var position = $('#scrollDownifAboveScreen')[0].scrollTop;
       alert(position);
       if(position<230)
       {
        $('html, body').animate({ scrollTop: $('#scrollDownifAboveScreen').offset().top-80 }, 'slow');
       }    

 } 
```

但是警报总是给我零

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:12:25.347

```
<a onclick="getFreshcontent();" href="#scrollDownifAboveScreen">Refresh</a> 
```

你试过这样吗？

# javascript - 查找将 onclick 事件分配给节点的代码

> ID：12022537
> 
> 赞同：3
> 
> 时间：2012-08-18T22:00:12.577
> 
> 标签：javascript, google-chrome-devtools

我正在尝试调试我没有编写的网页。有一个按钮在我单击它时运行 JavaScript 命令，但我无法弄清楚包含 .onClick 或 .click 命令的 JavaScript 代码在哪里，该命令将该函数分配给 click 事件。这是按钮的代码：

```
<li><a href="#top" class="page-link btn-custom btn-sign-up-bottom"></a></li> 
```

我知道我可以使用 Chrome 开发工具并查看元素选项卡->事件侦听器->单击以显示单击它时运行的函数，但我想找到设置侦听器的代码行。这很棘手，因为可以使用按钮所属的三个类中的任何一个来分配侦听器，或者可能是所有链接都被分配了这个 onClick。我怀疑我必须经常这样做，所以我希望有一个有效的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:03:51.850

我不知道如何找到该行，但是通过以下代码您可以找到哪个函数添加了事件。

首先给元素添加一个id，比如`myid`

在元素之后添加此脚本：

```
var el=document.getElementById('myid');
el.oldAddEvent=el.addEventListener;
el.addEventListener=function f(a,b,c){
    if(a=='click'){
        alert((f.caller?f.caller+"\n\n":"Window ")+"has added a click event to\n\n"+b+"\n\nwith eventCapture="+(c?true:false));
    }
    el.oldAddEvent(a,b,c);
} 
```

那么，如果有这样的脚本......

```
<script>
el.addEventListener('click',f,false);
</script> 
```

...它会提醒

```
Window has added a click event to

function f() {
    alert("click");
}

with eventCapture=false 
```

有了这个...

```
function g(){
el.addEventListener('click',f,false);
}
g(); 
```

...它会提醒

```
function g() {
    el.addEventListener("click", f, false);
}

has added a click event to

function f() {
    alert("click");
}

with eventCapture=false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:17:30.390

也许您可以像这样使用 chrome 控制台附加 onclick 处理程序并调用调试器

```
$('.btn-sign-up-bottom').click(function(){
   debugger;
}); 
```

Javascript 执行将中断，然后您可以继续按 F10 或 F11 来单步.. 看看它是如何进行的.. 也许您将单步执行原始事件处理函数！

# objective-c - NSViewController 等效于以下 UIViewController 函数/变量？

> ID：12022539
> 
> 赞同：1
> 
> 时间：2012-08-18T22:00:54.643
> 
> 标签：objective-c, macos, cocoa

我正在尝试为 OSX 调整以下[iOS Coreplot 教程](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2)，但在找到一些等效功能时遇到了麻烦。为了创建散点图，本教程将创建一个派生自 UIViewController 的类，但由于我在 Mac 上，所以我的等效类是派生自 NSViewController。

```
-(void)viewDidAppear:(BOOL)animated 
{
    [super viewDidAppear:animated]; [1]
    [self initPlot];
} 
```

在上面的函数中，类引用了一个`[super viewDidAppear]`. NSViewController 似乎没有这个功能，那么我应该使用什么功能呢？

```
self.hostView = [(CPTGraphHostingView *) [CPTGraphHostingView alloc]  
initWithFrame:self.view.bounds];
self.hostView.allowPinchScaling = YES;    
[self.view addSubview:self.hostView]; 
```

在上面的代码片段中，该类引用了一个`self.view`. NSViewController 没有这个功能，应该用什么等效的功能代替呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:21:04.397

没有直接等价于`-viewDidAppear:`。您可能必须`NSView`为视图控制器的根视图进行子类化，并覆盖`-viewWillMoveToSuperview:`并`-viewWillMoveToWindow:`获得类似的行为。有关更多信息，请参阅[`NSView`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsview_Class/Reference/NSView.html)文档。

`NSViewController`有一个`-view`方法（`[self view]`而不是`self.view`，但如果你真的想要的话，你*可以*使用后一种语法。）你指的是别的东西吗？

# ios - NSURLConnection 是否会自动保留从服务器发送的 cookie？

> ID：12022541
> 
> 赞同：17
> 
> 时间：2012-08-18T22:01:10.693
> 
> 标签：ios, session-cookies

我从 ios 登录到我的 tornado 后端并发回了一个secure_cookie，我注意到只要我验证了我设置的secure_cookie，我也可以请求其他信息。NSURLConnection 将 cookie 保留多长时间，或者一旦关闭应用程序，cookie 会被删除？

Apple文档中提到了这一点：

> URL 加载系统会自动发送任何适合 NSURLRequest 的存储 cookie。除非请求指定不发送 cookie。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-21T03:34:14.930

您的问题的几个方面。

首先，NSURLConnection 默认会根据设备的设置来管理 cookie。它会将 cookie 保存到商店并在适当的时候发送它们（当域与现有 cookie 匹配时）。这意味着如果您从带有保存在 cookie 存储中的 cookie 的 URL 发出请求，它将被发送。这解释了您提到的行为。通常，在默认设置下，cookie 会持续一段时间。

但是，此初始声明可能对您的需求没有帮助。我假设您可能希望控制此`secure_cookie`字段的到期（或“永远”保留），以便您的应用将来不必进一步进行身份验证。

在这种情况下，`NSHTTPCookieStorage`是要看的地方。此类将允许您检索：

> [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookiesForURL:[NSURL URLWithString:@" [http://example.com](http://example.com) "]]

并设置：

`[[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie]`（加上设置cookie字典对象）

根据经验和网上其他人的反馈，您应该注意 cookie 的存储并不总是 100% 可靠。如果您想向服务器发送特定的 cookie 和值，您应该将该值存储在您的应用程序中（例如 prefs 或 Core Data），并`NSHTTPCookieStorage`在每次启动时使用适当的值重置 cookie。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T04:56:46.947

您必须从[这里](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html)查看 cookie 缓存管理 这将帮助您更好地了解如何处理 cookie 的缓存。

还有另一个非常好的[描述](https://stackoverflow.com/questions/2053568/managing-http-cookies-on-iphone)，其中提到您可以从标头字段中获取 cookie，然后您可以完全控制它。如果需要，请在应用程序再次启动时存储和使用。

我希望这可以帮助您解决它。

# iphone - 轻松懒加载

> ID：12022542
> 
> 赞同：1
> 
> 时间：2012-08-18T22:01:14.577
> 
> 标签：iphone, objective-c, ios, uitableview, uiimageview

我已经使用该类成功实现了延迟加载`UIImageView+WebCache.h`。有没有不使用类的懒加载的简单方法`UIImageView+WebCache.h`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:06:28.963

您可以在 UIWebView 中加载图像。例如：

```
-(UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *identifier = @"ID";

    UITableViewCell *cell = [self.tv dequeueReusableCellWithIdentifier:identifier];

        if(cell == nil)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];

            UIWebView *webView=[[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];

            NSLog(@"URL=%@",[arrayURL objectAtIndex:indexPath.row]);

            NSURL *url=[NSURL URLWithString:[arrayURL objectAtIndex:indexPath.row]];
            NSURLRequest *req=[NSURLRequest requestWithURL:url];
            [webView loadRequest:req];
            webView.scalesPageToFit=TRUE;
            [cell.contentView addSubview:webView];

        }
        return cell;
    } 
```

# c++ - 在 OSX Lion 上使用 g++，ld：未知选项：-no_compact_unwind

> ID：12022543
> 
> 赞同：1
> 
> 时间：2012-08-18T22:01:25.867
> 
> 标签：c++, g++, osx-lion, ld

我按照OSX Lion 和 XCode 4.3 的[https://sites.google.com/site/dwhipp/tutorials/mac_compilers](https://sites.google.com/site/dwhipp/tutorials/mac_compilers)中的说明在命令行上使用 g++，但是当我运行它时，我得到了这个：

```
jeff~/Dropbox/cpp$ g++ hello.cpp 
ld: unknown option: -no_compact_unwind
collect2: error: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T13:10:27.280

如果您想在 Mac OS X Lion 上通过命令行使用最新版本的 GCC (4.7)，我有一个更好的解决方案。

安装 MacPorts（您可以下载源代码并编译它或下载 pkg 安装程序）：

[http://www.macports.org/install.php](http://www.macports.org/install.php)

安装MacPort，打开终端并输入（你需要root密码）

```
sudo port selfupdate 
```

用于更新端口树。然后输入

```
sudo port install gcc47 +universal 
```

此命令将在您的 Mac 上安装 GCC 4.7 编译器（此编译将花费大量时间，请耐心等待）。现在您可以通过命令行访问您的 GCC 4.7 编译器，名称为

```
gcc-mp-4.7 
```

（`g++-mp-4.7`用于 C++ 编译）。您还拥有添加选项的新 C++11 标准

```
g++-mp-4.7 -std=c++11 
```

# html - 如何使 div 的高度为 100%

> ID：12022551
> 
> 赞同：0
> 
> 时间：2012-08-18T22:02:31.630
> 
> 标签：html, css

我有一个包含侧边栏的 div。我希望侧边栏的高度为 100%（父 div 的）。现在它只是它所拥有的内容。

```
#parent {
    height: 100%;
}    
#sidebar {
    height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:12:24.207

实现这一点有很多可能性。

`<html>`最简单的方法是将和的高度设置`<body>`为`100%`。

**HTML**

```
<div id=parent>
    <div id=sidebar></div>
</div>​ 
```

**CSS**

```
html,body{height:100%}
#parent {
    height: 100%;
    background: #222 /* not needed */
}    
#sidebar {
    width: 200px; /* not needed */
    height: 100%;
    background: #444 /* not needed */
}​ 
```

[演示](http://jsfiddle.net/5tazc/)

**编辑**

`overflow:auto`修复问题太高内容：

**[演示](http://jsfiddle.net/5tazc/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:17:32.800

抱歉 100% 仅适用于宽度不适用于高度您可以尝试使用 jquery 方法

```
html_height = $("#parent").height();
$('#sidebar').height(html_height); 
```

除非您在侧栏上有填充/边距，否则高度应该没问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T22:55:26.847

当您将高度设置为 100% 时，它是什么的 100%？父级可能设置为 100%，但数量是多少？虽然 html 设置为视口的高度，但您的父 div 必须设置为具有实数设置高度的东西，或者从其父级继承它。

# javascript - 如何告诉 javascript 立即更新 DOM？

> ID：12022552
> 
> 赞同：10
> 
> 时间：2012-08-18T22:03:11.833
> 
> 标签：javascript, dom

我试图在 javascript 中调用时间密集型函数之前向用户加载“加载”消息。

HTML：

```
<p id='foo'>Foo</p>​ 
```

Javascript：

```
var foo = document.getElementById('foo');

function tellViewerLoading() {
  // Tell the user that loading is occuring.
  foo.innerHTML = 'loading...';   
}

function someActionThatTakesALongTime() {
  // Do some action that takes a long time.
  var i = 0;
  while(i < 100000) {i++; console.log(i);};
}

function domUpdateDelayExperiment() {
  tellViewerLoading();
  someActionThatTakesALongTime();
}

domUpdateDelayExperiment(); 
```

JSFiddle：http: [//jsfiddle.net/johnhoffman/xDRVF/](http://jsfiddle.net/johnhoffman/xDRVF/)

我想要发生的是在`tellViewerLoading()`调用后立即更新 DOM。

相反，DOM 似乎在`someActionThatTakesALongTime()`完成运行后更新。此时，显示加载消息是没有用的。

如何告诉 javascript 在`tellViewerLoading()`调用后立即更新 DOM？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T22:05:43.190

使用 setTimeout 生成长时间运行的函数：

```
function domUpdateDelayExperiment() {
  tellViewerLoading();
  setTimeout(someActionThatTakesALongTime, 50);
} 
```

说明：该函数更新 DOM，但浏览器在返回之前`tellViewerLoading()`不会**在屏幕上反映更改。**`domUpdateDelayExperiment()`通过 setTimeout() 的延迟`someActionThatTakesALongTime`，我们让浏览器反映 DOM 的变化。超时是任意的，但它的最小值在某些浏览器中可能很重要。50 ms 的值就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T22:07:59.437

实际上，如果您使用调试器单步执行代码，您会看到加载文本在调用下一个函数之前已更改。

您的浏览器只是挂在长函数调用上，因此无法更改显示的文本。

如果您希望浏览器有足够的时间在转到下一个功能之前更改显示，则使用短超时会有所帮助。

# php - 如何通过 JSON 将 HTML 从 PHP 传递到 AJAX - 正确

> ID：12022553
> 
> 赞同：0
> 
> 时间：2012-08-18T22:03:16.530
> 
> 标签：php, ajax, json

从早上起我仍然在使用 AJAX，所以也许这就是为什么有些事情不能像他们应该的那样工作的原因 - 让我们忘记它吧。综上所述，我的问题与通过 JSON 传递 HTML 不谋而合。PHP 代码示例：

```
$list = "<strong>This is test</strong>";
$response = array('success'=>true, 'src' => $list);
echo json_encode($response); 
```

基本上这是负责将 HTML 传递给 AJAX 的代码的主要部分。现在，让我们看一下 AJAX 代码的一部分：

```
 success: function(output)
            {
                alert(output);
                json = $(output).find(".content").text();
                var data = $.parseJSON(json);
                if(data.success == true)
                {
                   obj_a.parents(".row").append(data.src);
                   obj_a.attr("id", "rollBack");
                   obj_a.text("Roll back");
                }
            }, 
```

你们中的一些人会问我在这部分做什么：

```
json = $(output).find(".content").text(); 
```

答案是：我从“.content”框中检索 json 字符串，所以当我警告变量“json：我得到：

```
{"success":true,"src":"1\. dsfasdfasdffbcvbcvb<\/span>Edytuj<\/span> <\/a>Usu \u0144<\/span><\/div>2\. vbnvbnm454t<\/span>Edytuj<\/span><\/a>Usu\u0144<\/span><\/div>3\. ndfhgndgfhndfhgndfhd<\/span>Edytuj<\/span><\/a>Usu\u0144<\/span><\/div><\/div>"} 
```

问题是我没有得到这个 HTML ......我只得到没有任何 HTML 标签、样式等的文本......

我得到的字符串，而不是 HTML：“1\. dsfasdfasdffbcvbcvbEdytujUsuń2\. vbnvbnm454tEdytujUsuń3\. ndfhgndgfhndfhgndfhdEdytujUsuń”

请不要试图在上面的字符串中寻找任何 smart 或 gunius，因为你不会 - 它只是一个测试字符串。

根据 PHP 代码的一部分 - 在我的情况下，我得到“这是测试”而不是“**这是测试**”。

**总结我的问题是，如何通过 json 将这些 HTML 标签或整个 HTML 代码从 PHP 传递到 AJAX。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:13:33.387

我认为你误解了它的`jQuery.ajax()`工作原理。您只需要告诉它`dataType: 'json'`（这意味着您期望来自服务器的 JSON 输出），其余的由它来处理。你不需要使用`jQuery.parseJSON()`. 该`success()`方法将获得一个表示服务器响应的 JavaScript 对象。

```
 success: function(output)
        {
            // output is a JS object here:
            alert(output.success);  // true

            // ...
        }, 
```

要从那时起获取您的 HTML，您只需访问`output.src`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:14:01.703

您可以`dataType: 'json'`在您的 ajax 请求中指定并在您的成功调用中接收一个对象（即已解析的 json）。例如

```
$.ajax(url, {
    dataType: 'json',
    success: function(output)
        {
            if(output.success == true)
            {
               obj_a.parents(".row").append(output.src);
               obj_a.attr("id", "rollBack");
               obj_a.text("Roll back");
            }
        }, 
```

如果你不能改变 dataType 你会调用`$.parseJSON`输出

```
 function(output)
        {
            alert(output);
            var data = $.parseJSON(output);
            if(data.success == true)
            {
               obj_a.parents(".row").append(data.src);
               obj_a.attr("id", "rollBack");
               obj_a.text("Roll back");
            }
        }, 
```

# android - App强制关闭调试，logcat是个恶霸

> ID：12022554
> 
> 赞同：0
> 
> 时间：2012-08-18T22:03:17.807
> 
> 标签：android, android-sdk-2.3

这是下面的logcat，我无法理解空指针异常意味着什么，或者它下面的任何东西。

```
08-18 14:59:21.080: E/AndroidRuntime(13333): FATAL EXCEPTION: main
08-18 14:59:21.080: E/AndroidRuntime(13333): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{k.t.m/k.t.m.MainActivity}: java.lang.NullPointerException
08-18 14:59:21.080: E/AndroidRuntime(13333):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1894)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at android.os.Looper.loop(Looper.java:137)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at android.app.ActivityThread.main(ActivityThread.java:4514)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at java.lang.reflect.Method.invokeNative(Native Method)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at java.lang.reflect.Method.invoke(Method.java:511)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at dalvik.system.NativeStart.main(Native Method)
08-18 14:59:21.080: E/AndroidRuntime(13333): Caused by: java.lang.NullPointerException
08-18 14:59:21.080: E/AndroidRuntime(13333):    at android.app.Activity.findViewById(Activity.java:1794)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at k.t.m.MainActivity.<init>(MainActivity.java:14)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at java.lang.Class.newInstanceImpl(Native Method)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at java.lang.Class.newInstance(Class.java:1319)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at android.app.Instrumentation.newActivity(Instrumentation.java:1027)
08-18 14:59:21.080: E/AndroidRuntime(13333):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1885)
08-18 14:59:21.080: E/AndroidRuntime(13333):    ... 11 more 
```

这是迄今为止我拥有的主要java...感谢所有帮助我解决这个问题的人。

```
package k.t.m;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.support.v4.app.NavUtils;
import android.widget.*;

public class MainActivity extends Activity {

    TextView main = (TextView) findViewById(R.id.main);
    Button mainButton1 = (Button) findViewById(R.id.mainButton1);
    Button mainButton2 = (Button) findViewById(R.id.mainButton2);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mainButton1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                milesToKilometers();
            }

        });

        mainButton2.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                kilometersToMiles();
            }

        });

    }

    protected void kilometersToMiles() {

        main.setVisibility(View.INVISIBLE);
        mainButton1.setVisibility(View.INVISIBLE);
        mainButton2.setVisibility(View.INVISIBLE);

    }

    protected void milesToKilometers() {

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T22:04:05.993

你在打电话`findViewById()`之前打电话`setContentView()`，这不会很好。

# c# - 获取列表 使用通用方法的我的枚举属性

> ID：12022557
> 
> 赞同：6
> 
> 时间：2012-08-18T22:03:40.877
> 
> 标签：c#, generics, enums, custom-attributes

一开始，我们有这个基本的枚举。

```
public enum E_Levels {

    [ValueOfEnum("Low level")]
    LOW,

    [ValueOfEnum("Normal level")]
    NORMAL,

    [ValueOfEnum("High level")]
    HIGH
} 
```

我想得到一个`List<string>` **enum**。类似`Extensions.GetValuesOfEnum<E_Levels>()`which 的东西可能会返回`List<string>`“低级别”、“正常级别”和“高级别”。

StackOF 帮助我获得**了一个**值属性：

```
public static class Extensions {

    public static string ToValueOfEnum(this Enum value) {

        FieldInfo fieldInfo = value.GetType().GetField(value.ToString());
        ValueOfEnum[] attribs = fieldInfo.GetCustomAttributes(typeof(ValueOfEnum), false) as ValueOfEnum[];
        return attribs.Length > 0 ? attribs[0].value : null;
    }
} 
```

无论枚举是什么，我都可以调用这个方法：`E_Levels.LOW.ToValueOfEnum()`。

此外，StackOF 帮助我获得了`List<string>`一个**特定**的枚举。我在控制器中制作了这个方法：

```
private List<string> GetLevels() {

List<string> levelsToReturn = new List<string>();
var levels = Enum.GetValues(typeof(E_Levels)).Cast<E_Levels>();
foreach(E_Levels l in levels) 
    levelsToReturn.Add(l.ToValueOfEnum());

return levelsToReturn;
} 
```

但是这种方式需要我为每个枚举重写相同的方法。
因此，我尝试将此通用方法添加到我的类 Extensions 中：

```
public static class Extensions {

    public static string ToValueOfEnum(this Enum value) {...}

    public static List<string> GetValuesOf<T>() {

        List<string> levelsToReturn = new List<string>();
        var levels = Enum.GetValues(typeof(T)).Cast<T>();
        foreach(T l in levels) 
        levelsToReturn.Add(l.ToValueOfEnum());

        return levelsToReturn;
    }
} 
```

但是在我的foreach中，`.ToValueOfEnum()`是一个未知的方法。

所以我遇到了麻烦，我希望我能找到一种方法，不要一次又一次地为每个枚举重写相同的方法......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T22:14:48.623

让我们尽量保持这个更通用的目的。

我有一个[扩展方法](https://codereview.stackexchange.com/a/5354/3860)可以从枚举值中获取属性。这将使您能够快速访问属性。

```
public static class EnumExtensions
{
    public static TAttribute GetAttribute<TAttribute>(this Enum value)
        where TAttribute : Attribute
    {
        var type = value.GetType();
        var name = Enum.GetName(type, value);
        return type.GetField(name)
            .GetCustomAttributes(false)
            .OfType<TAttribute>()
            .SingleOrDefault();
    }
} 
```

使用它，您可以创建一些查询来获得您想要的。

```
var valuesOfLevels =
    Enum.GetValues(typeof(E_Levels)).Cast<E_Levels>()
        .Select(level => level.GetAttribute<ValueOfEnumAttribute>().Value); 
```

因此，您的`GetValuesOf()`方法（恕我直言，这对于这种特殊方法来说并不是一个好名字）可以这样写：

```
public static List<string> GetValuesOf<TEnum>()
    where TEnum : struct // can't constrain to enums so closest thing
{
    return Enum.GetValues(typeof(TEnum)).Cast<Enum>()
               .Select(val => val.GetAttribute<ValueOfEnumAttribute>().Value)
               .ToList();
} 
```

现在您可以像这样调用该方法：

```
var levelValues = GetValueOf<E_Levels>();
// levelValues = { "Low level", "Normal level", "High level" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:19:38.210

.Net 已经具有相同的属性`Description`，因此您可以使用此属性`ValueOfEnum`。

关于`dynamic`和扩展`type`以及以下示例

```
[TestFixture]
public sealed class ForTest
{
    [Test]
    public void Test()
    {
        var values = typeof(Levels).ToValues();
        values.ForEach(Console.WriteLine);
    }
}

public static class TypeExtensions
{
    public static List<string> ToValues(this Type value)
    {
        var result = new List<string>();
        var values = ToConcreteValues(value);
        foreach (dynamic item in values)
        {
            Description attribute = GetAttribute<Description>(item);
            result.Add(attribute.Description);
        }
        return result;
    }

    private static dynamic ToConcreteValues(Type enumType)
    {
        Array values = Enum.GetValues(enumType);
        Type list = typeof (List<>);
        Type resultType = list.MakeGenericType(enumType);
        dynamic result = Activator.CreateInstance(resultType);
        foreach (object value in values)
        {
            dynamic concreteValue = Enum.Parse(enumType, value.ToString());
            result.Add(concreteValue);
        }
        return result;
    }

    private static TAttribute GetAttribute<TAttribute>(dynamic value)
        where TAttribute : Attribute
    {
        Type type = value.GetType();
        FieldInfo fieldInfo = type.GetField(Enum.GetName(type, value));
        return (TAttribute) Attribute.GetCustomAttribute(fieldInfo, typeof (TAttribute));
    }
}

public enum Levels
{
    [Description("Low level")]LOW,
    [Description("Normal level")] NORMAL,
    [Description("High level")] HIGH
} 
```

结果输出：

```
Low level
Normal level
High level 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T22:10:29.180

您可以尝试 cast `(Enum)(object)l`，更改`ToValueOfEnum`为采用`object`，或者只是内联该方法：

```
public static List<string> GetValuesOf<T>()
{

    List<string> levelsToReturn = new List<string>();
    var levels = Enum.GetValues(typeof(T)).Cast<T>();
    foreach (T value in levels)
    {
        FieldInfo fieldInfo = value.GetType().GetField(value.ToString());
        ValueOfEnum[] attribs = fieldInfo.GetCustomAttributes(typeof(ValueOfEnum), false) as ValueOfEnum[];
        levelsToReturn.Add(attribs.Length > 0 ? attribs[0].value : null);
    }

    return levelsToReturn;
} 
```

这是使用铸造方法的单线解决方案：

```
return new List<string>(Enum.GetValues(typeof(T)).Cast<Enum>().Select(x => x.ToValueOfEnum())); 
```

如果您不清楚为什么`T`不被识别为`Enum`喜欢`E_Levels`，那是因为您没有指定`T : enum`. 不幸的是，您不能在 C# 中指定它（即使 CLR 支持它），所以其他方法，如运行时检查/假设（例如我在这里建议的）或编译后代码修改（例如[unconstrained-melody](http://code.google.com/p/unconstrained-melody/)）有要完成。

# javascript - 选择时自动重定向

> ID：12022559
> 
> 赞同：0
> 
> 时间：2012-08-18T22:03:47.247
> 
> 标签：javascript, redirect

我有一个`<select>`包含不同页面标题，单击标题会自动重定向到所选页面。但是一旦用户到达那里，我希望页面的标题成为`<select>`.

因此，如果进入“书籍”页面，一旦出现，我想在`<select>`.

有没有一种快速简便的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:36:17.697

如果您想在客户端执行此操作，并且所有选择选项的值都是“链接”页面的绝对 URL，请编写如下内容：

```
document.getElementById('pageSelector').value = location.href; 
```

如果该位置不在列表中，则将选择先前选择的（第一个选项或具有该`selected`属性的任何一个）。

如果您想在服务器端执行此操作，那么当您写出所有选择选项时，`selected`如果当前选项适用于您正在写出的页面，请添加该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:55:36.850

所以我从你的问题中得到的是，你的选择是导航的一部分？你在用jquery吗？

您可以在每页底部使用一行 jquery 说

```
$([insert nav selector here]).val(page); 
```

你需要定义

```
var page = "the correct page"; 
```

在每一页的顶部

# c++ - 存储动态创建对象的列表/向量的最佳方法是什么？

> ID：12022560
> 
> 赞同：2
> 
> 时间：2012-08-18T22:03:47.053
> 
> 标签：c++, dynamic, storage

我一直在想这个问题，今天我终于到了一个我需要得到正确答案的时刻。

即：我很困惑我应该如何存储列表/向量/？动态创建的对象？

例如：我有这个程序，它将从文件中读取有关连接的数据，然后在此基础上创建`node`s（其中包含连接信息）对象。

所以问题是：我应该使用`std::vector<node>`and 在`for`循环中创建临时对象和`push_back()`它们还是使用`std::vector<node*>`和`push_back()`动态分配`node`的指针，然后在程序结束时删除它们？

我确实有我想要存储的元素的数量。

或者也许有更好的方法来做到这一点，我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:25:50.140

哦，如果你有一个已知的大小......分配你的向量具有那个已知的大小（以消除加载期间调整大小的开销），那么加载的效率与`memcpy()`. 它只会按预期堆叠您的值。高效，比指针间接更有效。

如果您的元素是多态的，则需要指针。如果您担心清理内存（应该），请考虑使用： http: [//www.boost.org/doc/libs/1_50_0/libs/ptr_container/doc/ptr_vector.html](http://www.boost.org/doc/libs/1_50_0/libs/ptr_container/doc/ptr_vector.html)

**[编辑]**

如果一切都是固定大小的，还可以考虑[http://www.boost.org/doc/libs/1_50_0/doc/html/array.html](http://www.boost.org/doc/libs/1_50_0/doc/html/array.html)。它就像一个 C 数组，但没有任何调整大小的开销和 STL 支持……如果你真的需要速度的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T22:05:54.563

如果您不是绝对需要动态分配，请不要使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T22:17:22.610

你会`std::vector<node>`在那种情况下使用。

您提前知道所需物品的类型、尺寸和元素数量。您所描述的内容非常适合向量-您正在处理连续分配。

一般来说，使用`std::list`应该是非常少见的；矢量通常是正确的选择。

另请注意，`reserve()`当您知道大小时，您可以使用在填充之前设置分配大小 - 这可以节省大量重新分配和节点复制。

# php - Zend Gdata 日历：setQuery 与完全匹配？

> ID：12022565
> 
> 赞同：0
> 
> 时间：2012-08-18T22:04:25.123
> 
> 标签：php, zend-framework, google-calendar-api, google-data-api, zend-gdata

我无法使用`Zend_Gdata_Calendar`完全匹配的词组返回 Google 日历事件的子集。

[参考指南`Zend_Gdata_Books`](http://framework.zend.com/manual/1.11/en/zend.gdata.books.html)，在该部分`setQuery()`中，建议使用 Zend 应该可以做到这一点：

> 请注意，参数值中的任何空格、引号或其他标点符号都必须经过 URL 转义（使用加号 (+) 表示空格）。要搜索确切的短语，请将短语括在引号中。例如，要搜索与短语“间谍飞机”匹配的书籍，请将`q`参数设置为`%22spy+plane%22`。

据我所知，`Zend_Gdata_Books`并`Zend_Gdata_Calendar`扩展相同的`setQuery()`功能，所以我认为它们在 Zend 端是等价的。

至于谷歌，[日历查询参数参考](https://developers.google.com/google-apps/calendar/v2/reference#Parameters)说日历 API 支持标准数据 API 查询参数，这反过来又说全文查询字符串`q`支持不区分大小写的精确短语搜索，正如`Zend_Gdata_Books`所示。

我已经尝试了所有这些方法：

```
$gCal = new Zend_Gdata_Calendar();
$query = $gCal->newEventQuery();

$query->setQuery("%22event+text%22"); //no results
$query->setQuery("%22event%20text%22"); //no results
$query->setQuery("\"event text\""); //too many results
$query->setQuery('"event text"'); //too many results
$query->setQuery("event text"); //too many results 
```

我意识到前两个不起作用，因为字符串被双重 URL 编码。在后一种情况下，我得到了我想要的事件，但也得到了我不想要的事件，包括“事件”或“文本”。

会不会是 Google 为 Calendar API 实现了不同的全文查询？我可能会做什么样的愚蠢的事情来打破它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T07:25:58.643

看起来你想试试它`$query->setQuery('"event text"');`
产生查询字符串`Query string(19) "?q=%22event+text%22"`
where`$query->setQuery("event text");`
产生查询字符串`Query string(13) "?q=event+text"`

我用了 ：

```
$gCal = new Zend_Gdata_Calendar();
        $query = $gCal->newEventQuery();
        $query->setQuery("event text");
        Zend_Debug::dump($query->getQueryString(), 'Query'); 
```

去测试。

# javascript - Bizrate 弹出现场商家代码会禁用 Magento 页面

> ID：12022568
> 
> 赞同：1
> 
> 时间：2012-08-18T22:05:10.157
> 
> 标签：javascript, magento

我们在 Magento 网站上实现了 BizRate 商家评级代码，不幸的是，它使页面的其余功能失效（无法加载缩放图像，并且最重要的“添加到购物车”按钮不起作用。

这是我通过 Aheadworks Z Blocks 加载的代码（以及我们的 BBB 评级）

```
<table style="width: 312px; background-color: #ffffff; height: 60px; border: 0px solid #949494;" border="0" cellspacing="5" cellpadding="0" align="center">
<tbody>
<tr>
<td style="text-align: center;" colspan="2"><br /> <!-- BEGIN: Bizrate Medal (112x37 pixels) -->
<script type="text/javascript">// <![CDATA[
var bizrate={small:"true"};
<script src="//medals.bizrate.com/medals/js/16820_medal.js" type="text/javascript">
// ]]></script>
<p><a class="br-button"> <img usemap="#16820_medal" src="//medals.bizrate.com/medals/dynamic/small/16820_medal.gif" border="0" alt="See Carrot Ink Reviews at Bizrate.com" width="112" height="37" /> 
<map name="16820_medal">
<area title="See Carrot Ink Reviews at Bizrate.com" shape="poly" coords="1,0,1,36,61,36,61,20,111,20,111,0" href="//www.bizrate.com/ratings_guide/merchant_detail__mid--16820.html?rf=sur" target="_blank" />
<area title="Bizrate" shape="rect" coords="62,21,111,36" href="//www.bizrate.com/?rf=sur" target="_blank" /> 
</map>
</a></p>
<!-- END: Bizrate Medal (112x37 pixels) --></td>
<td style="text-align: center;" colspan="2"><br /> <a id="bbblink" class="rbhzbus" style="display: block; position: relative; overflow: hidden; width: 100px; height: 38px; margin: 0px; padding: 0px;" title="Carrot Ink, Ink Cartridge - Refill &amp; Sales, Carrollton, TX" href="http://www.bbb.org/dallas/business-reviews/ink-cartridge-refill-and-sales/carrot-ink-in-carrollton-tx-37007583#bbblogo" target="_blank"><img id="bbblinkimg" style="padding: 0px; border: none;" src="http://seal-dallas.bbb.org/logo/rbhzbus/carrot-ink-37007583.png" alt="Carrot Ink, Ink Cartridge - Refill &amp; Sales, Carrollton, TX" width="200" height="38" /></a>
<script type="text/javascript">// <![CDATA[
var bbbprotocol = ( ("https:" == document.location.protocol) ? "https://" : "http://" ); document.write(unescape("%3Cscript src='" + bbbprotocol + 'seal-dallas.bbb.org' + unescape('%2Flogo%2Fcarrot-ink-37007583.js') + "' type='text/javascript'%3E%3C/script%3E"));
// ]]></script>
</td>
</tr>
</tbody>
</table> 
```

关于如何清理这个以便 magento 继续运行的任何想法？先感谢您。++++++++++++ 更新：嗯 - 这通过 Magento HTML 编辑器进行了一些代码抖动修正。

但是，现在我没有与它下面的“单元格”很好地分开 - 关于我没有关闭的任何想法可能会弄乱格式？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:59:24.873

尝试这个

```
<table style="width: 312px; background-color: #ffffff; height: 60px; border: 0px solid #949494;" border="0" cellspacing="5" cellpadding="0" align="center">
    <tbody>
        <tr>
            <td style="text-align: center;" colspan="2"><br /> <!-- BEGIN: Bizrate Medal (112x37 pixels) -->
                <script type="text/javascript">
                    // <![CDATA[
                    var bizrate={small:"true"};
                    // ]]>
                </script>
                <script src="//medals.bizrate.com/medals/js/16820_medal.js" type="text/javascript">
                <p><a class="br-button"> <img usemap="#16820_medal" src="//medals.bizrate.com/medals/dynamic/small/16820_medal.gif" border="0" alt="See Carrot Ink Reviews at Bizrate.com" width="112" height="37" /> 
                        <map name="16820_medal">
                        <area title="See Carrot Ink Reviews at Bizrate.com" shape="poly" coords="1,0,1,36,61,36,61,20,111,20,111,0" href="//www.bizrate.com/ratings_guide/merchant_detail__mid--16820.html?rf=sur" target="_blank" />
                        <area title="Bizrate" shape="rect" coords="62,21,111,36" href="//www.bizrate.com/?rf=sur" target="_blank" /> 
                        </map>
                        </a></p>
                        <!-- END: Bizrate Medal (112x37 pixels) --></td>
                <td style="text-align: center;" colspan="2"><br /> <a id="bbblink" class="rbhzbus" style="display: block; position: relative; overflow: hidden; width: 100px; height: 38px; margin: 0px; padding: 0px;" title="Carrot Ink, Ink Cartridge - Refill &amp; Sales, Carrollton, TX" href="http://www.bbb.org/dallas/business-reviews/ink-cartridge-refill-and-sales/carrot-ink-in-carrollton-tx-37007583#bbblogo" target="_blank"><img id="bbblinkimg" style="padding: 0px; border: none;" src="http://seal-dallas.bbb.org/logo/rbhzbus/carrot-ink-37007583.png" alt="Carrot Ink, Ink Cartridge - Refill &amp; Sales, Carrollton, TX" width="200" height="38" /></a>
                <script type="text/javascript">
                   // <![CDATA[
                        var bbbprotocol = ( ("https:" == document.location.protocol) ? "https://" : "http://" ); document.write(unescape("%3Cscript src='" + bbbprotocol + 'seal-dallas.bbb.org' + unescape('%2Flogo%2Fcarrot-ink-37007583.js') + "' type='text/javascript'%3E%3C/script%3E"));
                   // ]]>
                </script>
            </td>
        </tr>
    </tbody>
</table> 
```

此代码块中出现错误（脚本标记中的脚本）

```
 <script type="text/javascript">
    // <![CDATA[
     var bizrate={small:"true"};
     <script src="//medals.bizrate.com/medals/js/16820_medal.js" type="text/javascript">
     // ]]>
 </script> 
```

# c# - 如何创建 DbParameter 列表？

> ID：12022569
> 
> 赞同：2
> 
> 时间：2012-08-18T22:05:15.907
> 
> 标签：c#, list, generics, visual-studio-2005

为什么在我的 VS2005 中不能编译以下内容？

```
List<DbParameter> params = new List<DbParameter>(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T22:06:32.517

`params`在 C#中的[保留关键字中](http://msdn.microsoft.com/en-us/library/x53a06bb%28v=vs.71%29.aspx)

使用不同的变量名称或为其添加前缀`@`

```
List<DbParameter> @params = new List<DbParameter>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:07:31.140

您的变量名称`params`是保留关键字，请更改它。

# python - 用于打开网页、填充文本和单击按钮的脚本

> ID：12022570
> 
> 赞同：1
> 
> 时间：2012-08-18T22:05:37.800
> 
> 标签：python, facebook, text, login, fill

我想编写一个脚本，最好是 Python 代码，以填充网页中的文本区域，然后单击某些按钮。我遇到了一些解决方案，但没有一个有效，主要是因为 cookie 没有正确存储，例如，有一个 Python 脚本可以登录 Facebook，它似乎在 shell 屏幕中正确，但是当我打开Facebook 在浏览器中被注销，就像什么都没发生一样。此外，代码是为 Facebook 硬编码的，我要求更通用的东西。所以，拜托，如果有人在这些事情上取得了成功，你的建议是非常需要的。打开网页，在指定的文本元素中填写文本，单击指定的按钮，保存 cookie，仅此而已。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:16:48.010

[Selenium](http://seleniumhq.org/)会做你想做的一切。

像机械化这样的系统本质上是独立的。他们维护自己的 cookie 存储，因此这些 cookie 不会最终出现在浏览器中 - 就像来自一个浏览器（例如 Firefox）的 cookie 不会出现在另一个浏览器（例如 Chrome）中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:35:53.000

您还可以查看使用 Windows API 运行 Internet Explorer 实例并向其发出命令的[IEC 。](http://www.mayukhbose.com/python/IEC/index.php)虽然它可能不适合大规模自动化，但它非常易于使用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-02-25T12:07:18.920

您还可以查看使用 Windows API 运行 Internet Explorer 实例并向其发出命令的 IEC。虽然它可能不适合大规模自动化，但它非常易于使用。

# android - 应用启动器图标错误

> ID：12022579
> 
> 赞同：2
> 
> 时间：2012-08-18T22:06:38.330
> 
> 标签：android, icons, app-launcher

清单定义了我想要的应用程序图标。但是当我部署应用程序时，应用程序图标是一个完全不同的图标。可能会发生什么？

在我的任何项目文件中都找不到显示为图标的图像。我根本没有移动我的 ic_launcher 图像，所以它们都仍在其适当的可绘制文件夹中。它在一小时前在另一台计算机上显示良好。

当我从另一台计算机上的 svn 存储库下载我的代码并启动 eclipse 时，它​​开始显示不同。

清理我的项目解决了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:10:29.587

检查路径（/res/drawable-*）并尝试清理您的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:18:00.993

您的手机使用的密度可能与您提供的图标不同。您是否将图标缩小到所有密度？是不是忘记删除ldpi、mdpi、hdpi文件夹中的默认应用图标了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T22:18:09.943

确保 res/drawable-hdpi、ldpi、mdpi 具有正确的图像和尺寸。

下面的网站可能会帮助您了解尺寸.. [http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)

# objective-c - 通过另一个托管对象数组过滤托管对象数组

> ID：12022584
> 
> 赞同：0
> 
> 时间：2012-08-18T22:07:34.900
> 
> 标签：objective-c, ios, core-data, nspredicate

我有一个从 Core Data 获得的可变托管对象数组——我们称它们为 ObjectA。ObjectA 与 ObjectB 具有多对多的关系，因此每个 ObjectA 都有一个 ObjectB 的 NSSet。ObjectB 与ObjectC 是一对多的关系，即每个ObjectB 都有一个ObjectC。

现在这很清楚（希望如此），这就是我想要做的：我想根据给定 ObjectC 的名称过滤我的 ObjectAs 数组。换句话说，我从 Core Data 中所有我的 ObjectAs 的数组开始，我想只以拥有 ObjectB 的 ObjectAs 结束，该 ObjectB 的 ObjectC 被命名为“Potatoes”（例如）。我希望这是有道理的......这是一个虚拟的情况：一个人（ObjectA）可以拥有很多歌曲（ObjectB），而歌曲可以被很多人拥有。我有每个人的数组，但我只想要拥有属于特定专辑（objectC）的歌曲的人。希望这有助于澄清情况。

那么，有人对如何根据给定的 ObjectC 最好地过滤我的 ObjectAs 有任何建议吗？我当然可以用一堆循环和 if 来强制它，但我想知道是否有一种更有效的方法可以用更少的步骤来完成它，比如 NSPredicate （我以前用过，但不是在多层像这样的情况）。

任何建议，将不胜感激！

**编辑**

这是我的模型图：

![模型图](../Images/08061c420ed908a369cdf488a761296f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:46:34.713

如果我正确理解了您的问题，则以下提取请求应该可以工作：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"ObjectA"];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY objectBs.objectC.name = %@", @"Potato"];
request.predicate = predicate;

NSError *error;
NSArray *result = [context executeFetchRequest:request error:&error]; 
```

# java - 为什么我的 JTable 是空白的

> ID：12022589
> 
> 赞同：1
> 
> 时间：2012-08-18T22:08:19.773
> 
> 标签：java, swing, jtable

环顾堆栈交换，我找不到一个好的答案。我见过的类似问题中的大多数代码看起来很庞大而且很臃肿，很容易出现错误。我看不出我是否犯了同样的错误。

我只有两个类（和一个接口），我的问题是我的 JTable 是空白的：

![在此处输入图像描述](../Images/b8b8c3e2db854b1fb86cc63b5c44f324.png)

这是我的代码：

### 启动程序

```
public class Launcher {

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                IViewManager.Util.getInstance();
            }
        });
    }
} 
```

### 启动 ViewManager 框架

```
public class ViewManager implements IViewManager {

    JFrame frame = null;
    JTabbedPane myListTabs = null;
    ComicsListPane myComicsListPane = null;

    public ViewManager(){

    //Create and set up the window.
    frame = new JFrame("My List Agregator");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Add the Tabbed pane for lists.
    myListTabs = new JTabbedPane();
    myComicsListPane = new ComicsListPane();
    myListTabs.add(myComicsListPane);
    myListTabs.setTitleAt(myListTabs.getTabCount()-1, "title");
    frame.getContentPane().add(myListTabs);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
    }
} 
```

### 漫画列表窗格

```
public class ComicsListPane extends JPanel {
    /**
     * 
     */
    private static final long serialVersionUID = -5207104867199042105L;
    JTable myComicsTable = null;

        public ComicsListPane() {
                //Create the column names and data
            String[] columnNames = {"Comic Title",
                    "Volume",
                    "Edition",
            "Purchased"};

            Object[][] data = {
                    {"The Amazing Spider-man", new Integer(3),
                        new Integer(679), new Boolean(false)},
                        {"The Amazing Spider-man", new Integer(3),
                            new Integer(680), new Boolean(false)}
            };
            //Create the table
            myComicsTable = new JTable(data, columnNames);
            myComicsTable.setPreferredScrollableViewportSize(new Dimension(750, 110));
            myComicsTable.setFillsViewportHeight(true);
            myComicsTable.setFillsViewportHeight(true);

            JScrollPane scrollPane = new JScrollPane(myComicsTable);        
            scrollPane.add(myComicsTable);
            scrollPane.setPreferredSize(new Dimension(450, 110));
            this.add(scrollPane, BorderLayout.CENTER);
        }
    } 
```

我看不出哪里出错了，主要是我从 Java Doc Tutorials 中复制过来的。

有人可以向java新手指出错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T22:29:13.057

看起来您的问题出在创建`JScrollPane`.

```
JScrollPane scrollPane = new JScrollPane(myComicsTable);        
scrollPane.add(myComicsTable); 
```

这里的第二行是不需要的——你已经用 构建了`JScrollPane`，`JTable`没有必要再将它添加到`JScrollPane`. 确实 - 这是使用`add()`来自 的方法`Container`。如果不更详细地查看 javadocs/source，我并不清楚为什么它会导致您所看到的行为。

顺便说一句，当您使用 GUI 时（实际上，通常情况下），最好将代码缩小到最小的块。即一种方法来创建`JTable`- 可以显示吗？然后，一种将其包装在`JScrollPane`- 中的方法会如您所愿显示吗？等等等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T22:28:19.693

评论这一行：

```
scrollPane.add(myComicsTable); 
```

你应该看到表格数据。要滚动表格，您使用表格初始化滚动区域 - `new JScrollPane(myComicsTable);`。这应该足以启用滚动。有关滚动的详细信息，请参阅[如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T22:32:49.567

尝试注释掉这一行：

```
scrollPane.add(myComicsTable); 
```

# ruby-on-rails - ruby on rails 更改 Model.find() 上的默认列

> ID：12022590
> 
> 赞同：1
> 
> 时间：2012-08-18T22:08:22.083
> 
> 标签：ruby-on-rails, model, find

我有一个带有帖子的表，它的架构看起来像

```
id | post_id | title | body | etc... 
```

现在，当我使用

`Post.find(params[:id])`

它**搜索**不是我想要的**id 列，因为我****显示的是唯一的** `post_id`而不是`id`...

那么我怎样才能确保将在列`Post.find()`中搜索**呢**？`post_id`

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:35:39.213

```
Post.find_by_post_id(params[:id] 
```

此外， Model.find 与您的主键相关联。如果您可以使用 post_id 作为 primary_key，那么您可以告诉 rails post_id 是这样的：

```
self.primary_key = :post_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:28:19.777

假设您的意思是（`post_id`不`bucket_id`符合您的其余描述）使用：

```
Post.where( "post_id = #{params[:id]}").first 
```

注意：`.first`既然你提到它是独一无二的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T22:23:39.837

除非您想重写 ActiveRecord .find 方法，否则只需使用

```
Post.where(:post_id => id) 
```**

# bash - 如何使用内置 Bash getopts 的长选项？

> ID：12022592
> 
> 赞同：49
> 
> 时间：2012-08-18T22:08:38.513
> 
> 标签：bash, command-line-arguments, getopts

我正在尝试`-temp`使用 Bash getopts 解析一个选项。我这样称呼我的脚本：

```
./myscript -temp /foo/bar/someFile 
```

这是我用来解析选项的代码。

```
while getopts "temp:shots:o:" option; do
    case $option in
        temp) TMPDIR="$OPTARG" ;;
        shots) NUMSHOTS="$OPTARG" ;;
        o) OUTFILE="$OPTARG" ;;
        *) usage ;;
    esac
done
shift $(($OPTIND - 1))

[ $# -lt 1 ] && usage 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2015-05-04T09:23:09.843

正如其他人解释的那样， getopts 不会解析长选项。您可以使用 getopt，但它不可移植（并且在某些平台上已损坏...）

作为一种解决方法，您可以实现一个 shell 循环。这是一个在使用标准 getopts 命令之前将长选项转换为短选项的示例（我认为它更简单）：

```
# Transform long options to short ones
for arg in "$@"; do
  shift
  case "$arg" in
    "--help") set -- "$@" "-h" ;;
    "--rest") set -- "$@" "-r" ;;
    "--ws")   set -- "$@" "-w" ;;
    *)        set -- "$@" "$arg"
  esac
done

# Default behavior
rest=false; ws=false

# Parse short options
OPTIND=1
while getopts "hrw" opt
do
  case "$opt" in
    "h") print_usage; exit 0 ;;
    "r") rest=true ;;
    "w") ws=true ;;
    "?") print_usage >&2; exit 1 ;;
  esac
done
shift $(expr $OPTIND - 1) # remove options from positional parameters 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-08-19T12:01:34.240

`getopts`只能解析短选项。

大多数系统也有一个外部`getopt`命令，但 getopt 不是标准的，并且通常被设计破坏，因为它不能安全地处理所有参数（带有空格和空参数的参数），只有 GNU getopt 可以安全地处理它们，但前提是你以特定于 GNU 的方式使用它。

更简单的选择是两者都不使用，只需使用 while 循环迭代脚本的参数并自己进行解析。

有关示例，请参见[http://mywiki.wooledge.org/BashFAQ/035 。](http://mywiki.wooledge.org/BashFAQ/035)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T22:18:09.720

`getopts`由 shell 程序用于仅解析 1 个字符的位置参数（无 GNU 样式的长选项 (--myoption) 或 XF86 样式的长选项 (-myoption)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-08T22:36:05.403

**内置 bash`getopts`**确实只解析短选项，但您仍然可以添加几行脚本来使 getopts 处理长选项。

[这是在http://www.uxora.com/unix/shell-script/22-handle-long-options-with-getopts](http://www.uxora.com/unix/shell-script/22-handle-long-options-with-getopts)中找到的部分代码

```
 #== set options ==#
SCRIPT_OPTS=':fbF:B:-:h'
typeset -A ARRAY_OPTS
ARRAY_OPTS=(
    [foo]=f
    [bar]=b
    [foobar]=F
    [barfoo]=B
    [help]=h
    [man]=h
)

  #== parse options ==#
while getopts ${SCRIPT_OPTS} OPTION ; do
    #== translate long options to short ==#
    if [[ "x$OPTION" == "x-" ]]; then
        LONG_OPTION=$OPTARG
        LONG_OPTARG=$(echo $LONG_OPTION | grep "=" | cut -d'=' -f2)
        LONG_OPTIND=-1
        [[ "x$LONG_OPTARG" = "x" ]] && LONG_OPTIND=$OPTIND || LONG_OPTION=$(echo $OPTARG | cut -d'=' -f1)
        [[ $LONG_OPTIND -ne -1 ]] && eval LONG_OPTARG="\$$LONG_OPTIND"
        OPTION=${ARRAY_OPTS[$LONG_OPTION]}
        [[ "x$OPTION" = "x" ]] &&  OPTION="?" OPTARG="-$LONG_OPTION"

        if [[ $( echo "${SCRIPT_OPTS}" | grep -c "${OPTION}:" ) -eq 1 ]]; then
            if [[ "x${LONG_OPTARG}" = "x" ]] || [[ "${LONG_OPTARG}" = -* ]]; then 
                OPTION=":" OPTARG="-$LONG_OPTION"
            else
                OPTARG="$LONG_OPTARG";
                if [[ $LONG_OPTIND -ne -1 ]]; then
                    [[ $OPTIND -le $Optnum ]] && OPTIND=$(( $OPTIND+1 ))
                    shift $OPTIND
                    OPTIND=1
                fi
            fi
        fi
    fi

    #== options follow by another option instead of argument ==#
    if [[ "x${OPTION}" != "x:" ]] && [[ "x${OPTION}" != "x?" ]] && [[ "${OPTARG}" = -* ]]; then 
        OPTARG="$OPTION" OPTION=":"
    fi

    #== manage options ==#
    case "$OPTION" in
        f  ) foo=1 bar=0                    ;;
        b  ) foo=0 bar=1                    ;;
        B  ) barfoo=${OPTARG}               ;;
        F  ) foobar=1 && foobar_name=${OPTARG} ;;
        h ) usagefull && exit 0 ;;
        : ) echo "${SCRIPT_NAME}: -$OPTARG: option requires an argument" >&2 && usage >&2 && exit 99 ;;
        ? ) echo "${SCRIPT_NAME}: -$OPTARG: unknown option" >&2 && usage >&2 && exit 99 ;;
    esac
done
shift $((${OPTIND} - 1)) 
```

这是一个测试：

```
# Short options test
$ ./foobar_any_getopts.sh -bF "Hello world" -B 6 file1 file2
foo=0 bar=1
barfoo=6
foobar=1 foobar_name=Hello world
files=file1 file2

# Long and short options test
$ ./foobar_any_getopts.sh --bar -F Hello --barfoo 6 file1 file2
foo=0 bar=1
barfoo=6
foobar=1 foobar_name=Hello
files=file1 file2 
```

否则**在最近的 Korn Shell** ksh93 中，`getopts`可以自然地解析长选项，甚至显示类似的手册页。（见[http://www.uxora.com/unix/shell-script/20-getopts-with-man-page-and-long-options](http://www.uxora.com/unix/shell-script/20-getopts-with-man-page-and-long-options)）

**米歇尔·冯维莱。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-02T12:23:26.327

尽管这个问题是 2 年前发布的，但我发现自己也需要支持 XFree86 风格的长选项；而且我还想从 getopts 中获取我能得到的东西。考虑 GCC switch `-rdynamic`。我标记`r`为标志字母，并期望`dynamic`在`$OPTARG`......但是，我想拒绝`-r dynamic`，同时接受其他选项`r`。

我在下面提出的想法建立在观察结果之上，`$OPTIND`如果空间（间隙）跟随标志，则将比其他情况大一个。所以，我定义了一个 bash 变量来保存之前的值`$OPTIND`，称为，并在循环`$PREVOPTIND`结束时更新它。`while`如果`$OPTIND`大于`1`，`$PREVOPTIND`我们没有间隙（即`-rdynamic`）；并`$GAP`设置为`false`。如果相反`$OPTIND`大于`2`，`$PREVOPTIND`我们*确实*有一个间隙（例如`-r dynamic`），并`$GAP`设置为`true`。

```
usage() { echo usage: error from $1; exit -1; }

OPTIND=1
PREVOPTIND=$OPTIND
while getopts "t:s:o:" option; do
  GAP=$((OPTIND-(PREVOPTIND+1)))
  case $option in
    t) case "${OPTARG}" in
         emp)                  # i.e. -temp
           ((GAP)) && usage "-${option} and ${OPTARG}"
           TMPDIR="$OPTARG"
           ;;
         *)
           true
           ;;
       esac
       ;;
    s) case "${OPTARG}" in
         hots)                 # i.e. -shots
           ((GAP)) && usage
           NUMSHOTS="$OPTARG"
           ;;
         *) usage "-${option} and ${OPTARG}" ;;
       esac
       ;;
    o) OUTFILE="$OPTARG" ;;
    *) usage "-${option} and ${OPTARG}" ;;
  esac
  PREVOPTIND=$OPTIND
done
shift $(($OPTIND - 1)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-02T09:48:11.583

实现这一点的最简单方法是借助**getopt** 和**--longoptions**

试试这个，希望有用

```
# Read command line options
ARGUMENT_LIST=(
    "input1"
    "input2"
    "input3"
)

# read arguments
opts=$(getopt \
    --longoptions "$(printf "%s:," "${ARGUMENT_LIST[@]}")" \
    --name "$(basename "$0")" \
    --options "" \
    -- "$@"
)

echo $opts

eval set --$opts

while true; do
    case "$1" in
    --input1)  
        shift
        empId=$1
        ;;
    --input2)  
        shift
        fromDate=$1
        ;;
    --input3)  
        shift
        toDate=$1
        ;;
      --)
        shift
        break
        ;;
    esac
    shift
done 
```

这就是 - 你调用shell脚本

```
myscript.sh --input1 "ABC" --input2 "PQR" --input2 "XYZ" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-18T22:17:33.620

您不能将*getopts* Bash 内置函数用于长选项——至少，不必构建自己的解析函数。您应该查看*/usr/bin/getopt*二进制文件（由[util-linux](http://en.wikipedia.org/wiki/Util-linux)软件包在我的系统上提供；您的里程可能会有所不同）。

有关特定调用选项，请参见 getopt(1)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-06T18:04:35.430

感谢@mcoolive。

我能够使用您的 $@ 想法将整个单词和长选项转换为单字母选项。想提醒任何使用这个想法的人，`shift $(expr $OPTIND - 1)`在通过 getopts 循环运行参数之前，我还必须包括在内。

完全不同的目的，但这运作良好。

```
# convert long word options to short word for ease of use and portability

for argu in "$@"; do
  shift
  #echo "curr arg = $1"
  case "$argu" in
"-start"|"--start")
                   # param=param because no arg is required
                   set -- "$@" "-s"
                   ;;
"-pb"|"--pb"|"-personalbrokers"|"--personalbrokers")
                   # pb +arg required
                   set -- "$@" "-p $1"; #echo "arg=$argu"
                   ;;
"-stop"|"--stop")
                   # param=param because no arg is required 
                   set -- "$@" "-S" 
                   ;;
                #  the catch all option here removes all - symbols from an
                #  argument. if an option is attempted to be passed that is
                #  invalid, getopts knows what to do...
               *)  [[ $(echo $argu | grep -E "^-") ]] && set -- "$@" "${argu//-/}" || echo "no - symbol. not touching $argu" &>/dev/null
                   ;;
esac
done

#echo -e "\n final option conversions = $@\n"
# remove options from positional parameters for getopts parsing
shift $(expr $OPTIND - 1)

declare -i runscript=0
# only p requires an argument hence the p:
 while getopts "sSp:" param; do
[[ "$param" == "p" ]] && [[ $(echo $OPTARG | grep -E "^-") ]] && funcUsage "order" 
#echo $param
#echo "OPTIND=$OPTIND"
case $param in
s)
       OPTARG=${OPTARG/ /}
       getoptsRan=1
       echo "$param was passed and this is it's arg $OPTARG"
       arg0=start
       ;;
 p)
       OPTARG=${OPTARG/ /}
       getoptsRan=1
       echo "$param was passed and this is it's arg $OPTARG"
       [[ "$OPTARG" == "all" ]] && echo -e "argument \"$OPTARG\" accepted. continuing." && (( runscript += 1 )) || usage="open"
       [[ $( echo $pbString | grep -w "$OPTARG" ) ]] && echo -e "pb $OPTARG was validated. continuing.\n" && (( runscript += 1 )) || usage="personal"
       [[ "$runscript" -lt "1" ]] && funcUsage "$usage" "$OPTARG"
       arg0=start
       ;;
S)
       OPTARG=${OPTARG/ /}
       getoptsRan=1
       echo "$param was passed and this is it's arg $OPTARG"
       arg0=stop
       ;;
*)
       getoptsRan=1
       funcUsage
       echo -e "Invalid argument\n"
       ;;
esac
done
funcBuildExcludes "$@"
shift $((OPTIND-1)) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-02-11T15:27:46.917

一个简单的 DIY 如果您在使用内置时遇到问题`getopts`：

利用：

```
$ ./test-args.sh --a1 a1 --a2 "a 2" --a3 --a4= --a5=a5 --a6="a 6"
a1 = "a1"
a2 = "a 2"
a3 = "TRUE"
a4 = ""
a5 = "a5"
a6 = "a 6"
a7 = "" 
```

脚本：

```
#!/bin/bash

function main() {
    ARGS=`getArgs "$@"`

    a1=`echo "$ARGS" | getNamedArg a1`
    a2=`echo "$ARGS" | getNamedArg a2`
    a3=`echo "$ARGS" | getNamedArg a3`
    a4=`echo "$ARGS" | getNamedArg a4`
    a5=`echo "$ARGS" | getNamedArg a5`
    a6=`echo "$ARGS" | getNamedArg a6`
    a7=`echo "$ARGS" | getNamedArg a7`

    echo "a1 = \"$a1\""
    echo "a2 = \"$a2\""
    echo "a3 = \"$a3\""
    echo "a4 = \"$a4\""
    echo "a5 = \"$a5\""
    echo "a6 = \"$a6\""
    echo "a7 = \"$a7\""

    exit 0
}

function getArgs() {
    for arg in "$@"; do
        echo "$arg"
    done
}

function getNamedArg() {
    ARG_NAME=$1

    sed --regexp-extended --quiet --expression="
        s/^--$ARG_NAME=(.*)\$/\1/p  # Get arguments in format '--arg=value': [s]ubstitute '--arg=value' by 'value', and [p]rint
        /^--$ARG_NAME\$/ {          # Get arguments in format '--arg value' ou '--arg'
            n                       # - [n]ext, because in this format, if value exists, it will be the next argument
            /^--/! p                # - If next doesn't starts with '--', it is the value of the actual argument
            /^--/ {                 # - If next do starts with '--', it is the next argument and the actual argument is a boolean one
                # Then just repla[c]ed by TRUE
                c TRUE
            }
        }
    "
}

main "$@" 
```

# php - 有什么方法可以 JSON.parse PHP 中的 POST 吗？

> ID：12022593
> 
> 赞同：-1
> 
> 时间：2012-08-18T22:09:53.950
> 
> 标签：php, json, parsing

我知道它可以在 Ruby 中完成，但我需要解析 PHP 中的数组中的数组。

```
POST
{
Payload
{
amount="xxx",
uid="xxx",
actual_amount="xxx"
},
signature
} 
```

我可以使用 $_POST['payload'] 来访问 Payload，但是如何访问 payload 数组中的元素呢？从技术上讲，Payload 是一个 JSON 数组。像这样

```
a:2:s:7:"payload";s:61:"{"amount":25,"adjusted_amount":17.0,"uid":"brainiac"}";s:9:"signature";s:40:"fbc4e6081d2d1d5d3894dd26a09c4d6b97c9e591";} 
```

如果您仔细查看 JSON 数组，您会注意到有效负载数组根本不是一个数组。是弦！(s:#)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T22:12:16.637

有一个名为 的函数[`json_decode()`](http://php.net/manual/en/function.json-decode.php)，它将帮助您执行此任务。

```
$payload = json_decode($_POST['payload']);
var_dump($payload['amount']); // string(3) "xxx" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:28:13.617

我终于想明白了。以机智：

```
<?php

$post = array();
$post['array1'] = json_encode(array(
    'info1' => 'test 1',
    'info2' => 'test 2',
    'info3' => 'test 3'
));
$post['info4'] = '#';

echo serialize($post);
echo "\n";
var_dump(unserialize(serialize($post)));

?> 
```

[http://codepad.org/jaHT6lfW](http://codepad.org/jaHT6lfW)

给出：

```
a:2:{s:6:"array1";s:52:"{"info1":"test 1","info2":"test 2","info3":"test 3"}";s:5:"info4";s:1:"#";}
array(2) {
  ["array1"]=>
  string(52) "{"info1":"test 1","info2":"test 2","info3":"test 3"}"
  ["info4"]=>
  string(1) "#"
} 
```

所以：

```
<?php

$post = array();
$post['array1'] = json_encode(array(
    'info1' => 'test 1',
    'info2' => 'test 2',
    'info3' => 'test 3'
));
$post['info4'] = '#';

$serial = serialize($post);
echo "$serial\n";

$unserial = unserialize(serialize($post));
var_dump($unserial);

$unserial['array1'] = json_decode($unserial['array1']);
var_dump($unserial);

?> 
```

[http://codepad.org/mpfDLyvH](http://codepad.org/mpfDLyvH)

给出正确的输出。

说真的，在使用数组之后，在将其插入数据库之前，只需对*所有内容进行 JSON 编码。*`$_POST`如果您这样做，您将不必担心这种废话。为了理智起见，您的数据实际上应该只使用每个字段的一种常量类型进行序列化。

# c# - 如果节点不存在，则 LINQ 异常

> ID：12022603
> 
> 赞同：1
> 
> 时间：2012-08-18T22:11:17.590
> 
> 标签：c#, xml, linq, linq-to-xml

我正在尝试读取 xml 文件并将其写入数据模型中的实体。Xml 看起来像这样：

```
...
<item>
   <guid>123456-7890</guid>
   <enclosure type="image/jpeg" url="http://example.com"/>
</item> 
```

有时整个附件节点不存在，所以我在查询中使用了 let ，但它会中断：

```
var items = from xmlitems in xElem2.Descendants("item")
            let node_enclosure = xmlitems.Element("enclosure")
            select new
            {
                 strImageUrl = node_enclosure == null ? "none" : node_enclosure.Attribute("url").Value,
                 strguid = xmlitems.Element("guid").Value,
            }; 
```

更新：然后我试图从 Datacontext 中的 xml 中保存值。

```
using (var datacontext = new db_RBEntities1())
{
     foreach (var item in items)
     {
         try
         {                 
              xmltable = new RSSTable();
              xmltable.guid = item.guid;
              xmltable.imageurl= item.strImageUrl;            
              datacontext.RSSTable.AddObject(xmltable);
         }
         catch (EntitySqlException ex)
         {
         }
     }
     datacontext.SaveChanges();
} 
```

你能帮我查询一下有什么问题吗？感谢您的建议！

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:33:09.923

我不确定您的代码有什么问题，但您可以将其重写为更好看（恕我直言）。

如果您的文档中可能存在或不存在某个元素，并且您想从该元素中获取某些内容，我发现使用该名称查询所有元素（预计只有一个）更容易，投影到您想要的值（在这种情况下，`url`属性的值）并调用`SingleOrDefault()`. 这样，您将获得您的值或默认值（`null`在这种情况下）。

`NullPointerException`此外，使用强制类型转换从元素或属性中读取您的值，这使得在尝试读取值时不太可能获得 a 。

```
var items =
    from item in doc.Descendants("item")
    let enclosureUrl = item.Elements("enclosure")
        .Select(enclosure => (string)enclosure.Attribute("url"))
        .SingleOrDefault()
    select new
    {
        Guid = (string)item.Element("guid"),
        Url = enclosureUrl ?? "none",
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:39:31.427

我试试它的工作原理 xml 文件

```
<?xml version="1.0" encoding="utf-8" ?>

<items>
  <item>
    <guid>123458-7890</guid>    
  </item>
  <item>
    <guid>123456-7890</guid>
    <enclosure type="image/jpeg" url="http://example.com"/>
  </item>
</items> 
```

获取 xelement 的代码

```
XElement xElem2 = XElement.Load(@"C:\\XMLFile1.xml");
              var items = from xmlitems in xElem2.Descendants("item")
                          let node_enclosure = xmlitems.Element("enclosure")
                          select new
                          {
                              strImageUrl = node_enclosure == null ? "none" : node_enclosure.Attribute("url").Value,
                              strguid = xmlitems.Element("guid").Value
                          }; 
```

# eclipse - 未定义类型：process.jsp 中的 foo.FormBean

> ID：12022611
> 
> 赞同：1
> 
> 时间：2012-08-18T22:13:17.153
> 
> 标签：eclipse, weblogic-10.x

当我尝试启动 Eclipse 时，我在 Eclipse 中收到此错误消息`Undefined type: foo.FormBean at process.jsp`

这是我的 process.jsp 文件。我正在开发一个演示用户登录和身份验证系统。有人知道这意味着什么吗

`

```
<%@ page import="java.util.*" %>
<%! 
    ResourceBundle bundle =null;
    public void jspInit() {
       bundle = ResourceBundle.getBundle("forms");
      }
%>
<jsp:useBean id="formHandler" class="foo.FormBean" scope="request">
<jsp:setProperty name="formHandler" property="*"/>
</jsp:useBean>
<% 
   if (formHandler.validate()) {
%>
    <jsp:forward page="<%=bundle.getString(\"process.success\")%>"/>
<%
   }  else {
%>
    <jsp:forward page="<%=bundle.getString(\"process.retry\")%>"/>
<%
   }
%>  ` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T21:08:55.450

导致错误的行是：

```
 <jsp:useBean id="formHandler" class="foo.FormBean" scope="request"> 
```

foo.FormBean 未定义。

为了解决这个问题，将编译好的 FormBean 类放在 WEB-INF/classes/foo/ 下，并在进程 jsp 中添加 <%@ page import="foo.*" %>。

BR，
托利斯

# javascript - 你如何在textarea输入中去除html标签

> ID：12022614
> 
> 赞同：9
> 
> 时间：2012-08-18T22:13:46.713
> 
> 标签：javascript, jquery, html, css

我已经设置了一个小 Web 应用程序，您可以在其中将便利贴添加到页面中。这只是一个帮助更好地学习 JavaScript/jQuery 的项目，它似乎是一个合适的项目（我是 JS/jQuery 的新手）。

这是小提琴：http: [//jsfiddle.net/mitchbregs/mWaPz/](http://jsfiddle.net/mitchbregs/mWaPz/)

我找到了这个网站：[http ://www.hscripts.com/scripts/JavaScript/remove-html-tag.php](http://www.hscripts.com/scripts/JavaScript/remove-html-tag.php)

我这样实现了代码：

> ```
> function stripHTML(){
> var re = /(<([^>]+)>)/gi;
> for (i=0; i < arguments.length; i++)
> arguments[i].value=arguments[i].value.replace(re, "")
> } 
> ```

它仍然没有工作。

问题：我需要它，以便当有人在文本区域中输入文本时，如果他们输入类似“ `<b>Hi</b>`”的内容，它将`<b>`从输入中删除“”标签并只留下文本。

如果有人可以帮助我，那就太好了..谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T22:24:57.463

```
var textAreaValue = "text <br /> more text";
var strippedText = $("<div/>").html(textAreaValue).text();​ 
```

这是一个[Fiddle](http://jsfiddle.net/xheSt/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-18T22:30:06.183

你有三个问题：一个是方法没有正确返回（这是编写它的人的错）。接下来是您在 中定义方法`$(document).ready()`，因此无法找到它（至少在 Chrome 中）。第三，您没有以正确的方式称呼它（`onSubmit`永远不会在这里使用）。

我使用了@Joao 的方法（所以你应该支持他的答案）并使用了这个方法，移到了`ready()`函数之外：

```
function stripHTML(str){
  var strippedText = $("<div/>").html(str).text();
  return strippedText;
}​ 
```

并在这里调用它：

```
var post = stripHTML($(".text_input").val()) 
```

这是工作小提琴：http: [//jsfiddle.net/ee3MH/](http://jsfiddle.net/ee3MH/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-18T22:22:51.940

```
function stripHTML(text){
   var regex = /(<([^>]+)>)/ig;
   return text.replace(regex, "");
}
// USE: var str = stripHTML('<b>test</b>'); 
```

演示：http: [//jsfiddle.net/pisabev/eJzfw/3/](http://jsfiddle.net/pisabev/eJzfw/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T22:20:22.850

您可以使用 jquery .text 函数，尽管它宁愿转义 html 而不是剥离它：

```
$(".myTxtBox").text("<b>this text will be displayed, even the b tag."); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-08T20:46:48.300

没有人按照 OP 的要求成功回答了这个问题，因为内部标签将从输入中完全删除，而不仅仅是标签本身；所以，这是一个可以做到这一点的答案（[小提琴](http://jsfiddle.net/utH47/)）：

```
var input = "This is <b>not</b>a successful test";
var output = $("<div/>").html(input).children().remove().end().text() 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-18T22:33:13.287

```
$("textarea.text_input").on('keyup', function() {
    this.value = this.value.replace(/<(.|\n)*?>/g, '');
}); 
```

[小提琴](http://jsfiddle.net/mWaPz/1/)

# python - PYTHON：尝试创建词汇/翻译测验（初学者）

> ID：12022620
> 
> 赞同：0
> 
> 时间：2012-08-18T22:15:23.233
> 
> 标签：python

我是 Python 新手（也是 stackoverflow 的新手，你会很容易注意到它！）

我实际上正在尝试编写一个可以按如下方式工作的程序：用户启动程序。有人问他是否要输入一个新单词，以及该单词的翻译。单词及其翻译存储在文件 (data.txt) 中。当他完成添加新单词时，测验开始。该程序选择一个单词，并要求用户进行翻译。如果答案与文件中的翻译相似，则程序返回“Great !”，如果不是，则打印正确答案。

如您所见，这非常简单。我的问题是处理文件，尤其是检索文件中的内容并正确使用它。

这是我的代码：

```
#!/usr/bin/python3.2
# -*-coding:Utf-8 -*

#Vocabulary/translation quiz

import os
import random

keep_adding=input("Would you like to add a new word ? If yes, press \"O\" : ")
while keep_adding=="O":
    entry=[]
    word=input("Enter a word : ")
    word=str(word)
    entry.append(word)
    translation=input("And its translation : ")
    translation=str(translation)
    entry.append(translation)
    entry=str(entry)
    f = open("data.txt","a")
    f.write(entry)
    f.close()
    keep_adding=input("To continue, press \"O\" : ")

f = open("data.txt","a") #in case the file doesn't exist, we create one
f.close()

os.system('clear')
print("* * * QUIZ STARTS ! * * *")

f = open("data.txt","r")

text = f.readlines()
text = list(text)
print("What is the translation for : ",text[0], "?")
answer = input("Answer : ")
if (answer == text[1]):
    print("Congratulations ! That's the good answer !")
else:
    print("Wrong. The correct answer was : ",text[1]) 
```

非常感谢你的帮助 ！

**编辑：**确实对我的代码进行了一些更正。我得到的是以下内容：

```
 * * * QUIZ STARTS ! * * *
What is the translation for :  ['alpha', 'bravo']['one', 'two']['x', 'y'] ?
Answer : alpha
Traceback (most recent call last):
  File "Python_progs/voc.py", line 43, in <module>
    if (answer == text[1]):
IndexError: list index out of range 
```

在我的文件中，我有这个：

```
['alpha', 'bravo']['one', 'two']['x', 'y'] 
```

所以实际上，我只想得到问题中的第一个词（即 alpha），并且在回答 bravo 时，把它做对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-03T09:09:05.350

您也可以这样做；这不需要外部文件:)

```
###   WORDLIST   ###
list   = ['castigate','brave','prowess','tenacious','pre-emptive','orthodox','arcane','corpuscle','putrid','infidel','stratagem','affinity','abnegate','infraction']
mean   = ['to scold','courageous','skill','stubborn','early','traditional','mysterious','a living cell','rotting','unbeliever','scheme','attraction','to renounce','violation of law']
list1 = list.copy()

mean1 = mean.copy()
mean2 = mean.copy()
mean3 = mean.copy()
mean4 = mean.copy()

from random import randint
import random

word_count = len(list) - 1
options = []

options = random.sample(range(1, word_count), 4)

options1 = options.copy()
options2 = options.copy()
options3 = options.copy()
options4 = options.copy()
opt1 = options1.pop(0)
opt2 = options2.pop(1)
opt3 = options3.pop(2)
opt4 = options4.pop(3)

x = randint(0,3)
y = options.pop(x)
#ignore [options]
question = list.pop(y)
answer = mean.pop(y)

print("What is the meaning of",question,"?")
print("1)",mean1.pop(opt1))
print("2)",mean2.pop(opt2))
print("3)",mean3.pop(opt3))
print("4)",mean4.pop(opt4))

while True:
    try:
        userans = int(input("\nYour answer: "))
    except ValueError:
        print("Sorry, I didn't get that.")
        continue
    else:
        break

if userans - 1 is x:
    print("Your answer is correct!")
else:
    if userans is 100:
        print("There are %s words in your personal dictionary" % word_count)
    else:
        if userans > 4:
            print("It's OK if you do not know the answer. Better luck next time:)\nThe meaning of %s is %s!" % (question, answer))
        else:
            print("Your answer is wrong!\nThe meaning of %s is %s!" % (question, answer)) 
```

基本上，这段代码包含两个包含单词和含义的主要列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:53:13.547

### 问题

您的主要问题是您在测验文件中存储/检索事物的方式。

你正在做`f.write(str(entry))`，这是写条目的字符串表示。我不太确定你的意图是什么，但你应该意识到两件事：1）`str`列表的表示很难转回列表（在读取文件时）和 2）`write()`最后不附加换行符。如果你要这样做：

```
f.write("line1")
f.write("line2")
f.write("line3") 
```

然后您的文件将如下所示：

```
line1line2line3 
```

无论如何，所有内容都保存在一行上，所以当你这样做时`f.readlines()`，它会返回一个像这样的对象：

```
["['alpha', 'bravo']['one', 'two']['x', 'y']"] 
```

或更一般地说：

```
[a_string,] 
```

如您所见，它是一个列表，其中只有一项。这就是为什么你在做的时候会出错

```
if (answer == text[1]): 
```

您正在尝试访问不存在的第二个项目。

### 解决方案？

您需要做的是将每个测验/答案对存储为单独的行，并使用特定的分隔符分隔测验和答案：

```
 quiz, answer
    alpha, bravo
    one, two
    etc... 
```

例如：

```
with open("myquizfile.txt", "w") as f:
    while keepGoing: #You'd have to add your own exit logic.
        question = input("Enter a question: ")
        answer = input("Enter an answer: ")
        f.write("{0},{1}\n".format(question, answer)) #Notice the newline, \n 
```

要读取此文件，您需要执行以下操作：

```
with open("myquizfile.txt", "r") as f:
    question_answer_pairs = [line.split(",") for line in f] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T11:07:36.847

如果有人对该程序感兴趣，这是我的最终代码（再次感谢 Joel Cornett 的帮助）：

```
#!/usr/bin/python3.2
# -*-coding:Utf-8 -*

#Vocabulary/translation quiz

import os
import random

keep_adding=input("Would you like to add a new word ? If yes, press \"O\" : ")
with open("data.txt","a") as f:
    while keep_adding=="O":
        word=input("Enter a word : ")
        translation=input("And its translation : ") 
        f.write("{0},{1},\n".format(word,translation))
        keep_adding=input("To continue, press \"O\" : ")

#in case the file doesn't exist, we create one :
with open("data.txt","a") as f:
    pass

os.system('clear')
print("* * * QUIZ STARTS ! * * *")

with open("data.txt","r") as f:
    question = [line.split(",") for line in f]
    i = 0
    score = 0
    while i<len(question):
        num = random.randint(0,len(question)-1)
        print("\nQuestion number ",i+1,": \nWhat is the translation for ", question[num][0], "?")
        answer = input("Answer : ")
        if (answer == str(question[num][1])):
            print("Congratulations ! That's the good answer !")
            score += 1
        else:
            print("Wrong. The correct answer was : ",question[num][1])
        i += 1

if len(question)==0:
    print("\nThe file is empty. Please add new words to start the quiz !\n")
else:   
    if i>1:
        qu_pl = "questions"
    else:
        qu_pl = "question"
    if score>1:
        sc_pl = "answers"
    else:
        sc_pl = "answer"
    print("\n RESULTS :\n ",i, qu_pl,", ",score,"correct ",sc_pl," \n"\
    ," --> Your score is : ",score*100/i,"% !\n") 
```

# c# - 在 Linq 事务中检索身份值

> ID：12022637
> 
> 赞同：0
> 
> 时间：2012-08-18T22:18:04.643
> 
> 标签：c#, linq-to-sql, transactions

我正在尝试使用 Linq to sql 执行以下事务。

但没有检索到***id***字段，因此发生异常

> INSERT 语句与 FOREIGN KEY 约束冲突

那么该怎么办？

我的代码：

```
System.Data.Common.DbTransaction transaction = null;
            DBDataContext db = new DBDataContext();
            db.Connection.Open();
            transaction = db.Connection.BeginTransaction();
            db.Transaction = transaction;

            Table1 = new Table1();
            obj.objName = "some name";
            db.Table1s.InsertOnSubmit(obj);

            Table2 obj_info = new Table2();
            obj_info.Info = "some info";
            obj_info.Id = obj.Id;
            db.Table2s.InsertOnSubmit(obj_info);
            try
            {
                db.SubmitChanges();
                transaction.Commit();
            }
            catch (Exception)
            {
                transaction.Rollback();
            }
            finally
            {
                transaction.Dispose();
                db.Dispose();
            } 
```

编辑：也许我的代码不够清楚**obj**变量具有主键 Id 所以 obj.Id 是自动生成的标识，我需要将它插入到 obj_info.Id 这是外键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:59:44.807

线索应该在名称**InsertOnSubmit**上。您的交易未提交，因此在您尝试分配交易时没有 id。

我不清楚这些表之间的确切关系，但如果你有一个名为 obj_info 的表，其中有一个名为 objID 的列，用于在 obj 表中存储相关记录的 id，那么在你的 c# 类中你会期望有两个属性，比如

```
public Obj obj;
public int objID; 
```

如果是这种情况，您可以使用

```
 obj_info.obj = obj; 
```

代替

```
 obj_info.objID = obj.id 
```

如果你的表不相关，那么你需要先提交 obj 才能访问 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:16:30.667

似乎我需要在插入后使用 SubmitChanges

```
 System.Data.Common.DbTransaction transaction = null;
        DBDataContext db = new DBDataContext();
        db.Connection.Open();
        transaction = db.Connection.BeginTransaction();
        db.Transaction = transaction;

        Table1 = new Table1();
        obj.objName = "some name";
        db.Table1s.InsertOnSubmit(obj);
        db.SubmitChanges();

        Table2 obj_info = new Table2();
        obj_info.Info = "some info";
        obj_info.Id = obj.Id;
        db.Table2s.InsertOnSubmit(obj_info);
        db.SubmitChanges();
        try
        {
            db.SubmitChanges();
            transaction.Commit();
        }
        catch (Exception)
        {
            transaction.Rollback();
        }
        finally
        {
            transaction.Dispose();
            db.Dispose();
        } 
```

我对此并不完全确定，但它有效

如果有人可以确认，请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T22:44:32.593

```
 1\. your obj_info.id has a not null value
 2\. your table2 doesn't have an incremental value
the mistake came from one of those points 
```

# android - Android 手电筒在从其他活动返回时强制关闭

> ID：12022642
> 
> 赞同：0
> 
> 时间：2012-08-18T22:18:21.757
> 
> 标签：android, logcat, forceclose, flashlight

[我按照这里](http://www.mkyong.com/android/how-to-turn-onoff-camera-ledflashlight-in-android/)的教程并设法在我的应用程序中实现闪光灯。然而，我已经陷入困境。

闪光灯按钮在第一次加载应用程序时会产生奇迹，但是当您转到另一个活动（页面）然后返回第一个活动（页面）并尝试使用闪光灯按钮时，它会强制关闭应用程序

这是我加载应用程序的logCat，打开和关闭手电筒导航到另一个活动，然后再次尝试闪光灯并bam dead

```
08-18 23:12:50.854: I/info(10685): torch is turn on!
08-18 23:12:51.565: D/View(10685): onTouchEvent: viewFlags: 0x18004001
08-18 23:12:51.565: D/View(10685): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
08-18 23:12:51.565: I/info(10685): torch is turn off!
08-18 23:12:58.522: D/View(10685): onTouchEvent: viewFlags: 0x18004001
08-18 23:12:58.522: D/View(10685): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
08-18 23:12:58.672: D/ATRecorder(10685): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4054f238
08-18 23:12:58.682: D/WindowManagerImpl(10685): addView, new view, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@40545f00
08-18 23:12:58.912: D/Camera-JNI(10685): native_release: context=0x34cec0 camera=0x34ce78
08-18 23:13:00.844: W/KeyCharacterMap(10685): Can't open keycharmap file
08-18 23:13:00.854: W/KeyCharacterMap(10685): Error loading keycharmap file '/system/usr/keychars/synaptics-rmi-touchscreen.kcm.bin'. hw.keyboards.65537.devname='synaptics-rmi-touchscreen'
08-18 23:13:00.854: I/KeyCharacterMap(10685): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
08-18 23:13:01.214: D/WindowManagerImpl(10685): finishRemoveViewLocked, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@40545f00
08-18 23:13:02.205: D/View(10685): onTouchEvent: viewFlags: 0x18004001
08-18 23:13:02.205: D/View(10685): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
08-18 23:13:02.205: I/info(10685): torch is turn on!
08-18 23:13:02.205: D/AndroidRuntime(10685): Shutting down VM
08-18 23:13:02.205: W/dalvikvm(10685): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
08-18 23:13:02.215: E/AndroidRuntime(10685): FATAL EXCEPTION: main
08-18 23:13:02.215: E/AndroidRuntime(10685): java.lang.RuntimeException: Method called after release()
08-18 23:13:02.215: E/AndroidRuntime(10685):    at android.hardware.Camera.native_setParameters(Native Method)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at android.hardware.Camera.setParameters(Camera.java:958)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at com.reading.festival.ReadingFestivalGuide2012Activity$1.onClick(ReadingFestivalGuide2012Activity.java:84)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at android.view.View.performClick(View.java:2533)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at android.view.View$PerformClick.run(View.java:9320)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at android.os.Handler.handleCallback(Handler.java:587)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at android.os.Looper.loop(Looper.java:150)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at android.app.ActivityThread.main(ActivityThread.java:4385)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at java.lang.reflect.Method.invokeNative(Native Method)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at java.lang.reflect.Method.invoke(Method.java:507)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
08-18 23:13:02.215: E/AndroidRuntime(10685):    at dalvik.system.NativeStart.main(Native Method) 
```

用于相机的代码

```
private boolean isLighOn = false;

    private Camera camera;

    private Button button;

    @Override
    protected void onStop() {
        super.onStop();

        if (camera != null) {
            camera.release();
        }
    }

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //makes full screen and takes away title bar
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        //

        setContentView(R.layout.main);

        button = (Button) findViewById(R.id.buttonFlashlight);

        Context context = this;
        PackageManager pm = context.getPackageManager();

        // if device support camera?
        if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
            Log.e("err", "Device has no camera!");
            return;
        }

        camera = Camera.open();
        final Parameters p = camera.getParameters();

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                if (isLighOn) {

                    Log.i("info", "torch is turn off!");

                    p.setFlashMode(Parameters.FLASH_MODE_OFF);
                    camera.setParameters(p);
                    camera.stopPreview();
                    isLighOn = false;

                } else {

                    Log.i("info", "torch is turn on!");

                    p.setFlashMode(Parameters.FLASH_MODE_TORCH);

                    camera.setParameters(p);
                    camera.startPreview();
                    isLighOn = true;

                }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:25:25.397

你打电话`camera.setparameters()`后打电话`camera.release()`。释放后不应调用 setparameters。

# php - 使用 PHP 或 Javascript 去掉最后一个逗号

> ID：12022643
> 
> 赞同：0
> 
> 时间：2012-08-18T22:18:32.043
> 
> 标签：php, javascript, jquery, html

**我尝试了许多不同的方法来做到这一点，但我所有的想法都失败了。运行此while循环后如何摆脱最后一个逗号？**

```
<body onload="
    <?php while($row = mysql_fetch_assoc($thing3)): ?>
        checkEdits_<?php echo $row['directory_name']; ?>(),
    <?php endwhile; ?>
"> 
```

它在末尾添加了最后一个逗号，这破坏了整个脚本。

php while(loop) 在通过 dom 运行时将其输出：

```
<body onLoad="checkEdits_juk(), checkEdits_HTML(), checkEdits_JAVASCRIPT(), checkEdits_JQUERY(),"> 
```

除了我不想要最后一个逗号。他们是摆脱它的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T22:21:10.463

你可以把你的数据放在一个数组中并使用这个[`implode`](http://php.net/manual/en/function.implode.php)函数

```
 $directory_names = array();
  while($row = mysql_fetch_assoc($thing3)) {
    $directory_names[] = $row['directory_name'];
  }
  echo implode(', ', $directory_names); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T22:21:12.067

```
substr($yourString, 0, strlen($yourString) - 1); 
```

这将返回字符串的子字符串，其中包含从第 0 个索引到最后一个 - 1 位置的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T22:22:47.847

使用您的 MYSQL 行数组，使用 php 的连接函数（implode）[http://php.net/manual/en/function.join.php](http://php.net/manual/en/function.join.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T22:23:44.580

或者您可以使用：

```
<body onload="function() {
    <?php while($row = mysql_fetch_assoc($thing3)) { ?>
        checkEdits_<?php echo $row['directory_name']; ?>(); 
    <?php } ?>
}"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T22:24:19.540

用于`rtrim`去掉最后一个逗号。我会这样重写：

```
<?php 
$onload = "";
while($row = mysql_fetch_assoc($thing3)) {
    $onload .= "checkEdits_" . $row['directory_name'] . ", ";
}
$onload = rtrim($onload, ', ');
?>

<body onload="<?php echo $onload; ?>"> 
```

# android - 从标签设置 contentDescription 以实现 android 可访问性

> ID：12022646
> 
> 赞同：5
> 
> 时间：2012-08-18T22:20:03.037
> 
> 标签：android, accessibility

虽然常量`contentDescription`适用于某些小部件，但其他情况（例如带有标题的图片库）已经在 UI 中具有适当的可访问性标签。有没有办法将`ImageView`'s`contentDescription`与其`Textview`在 XML 中的标签联系起来？

例如，此`ImageView`定义的最后（虚构）行是否存在真正的等价物：

```
<LinearLayout>
    <ImageView
        android:id="@+id/image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:contentDescription="@+id/label" />
    <TextView
        android:id="@+id/label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-18T23:17:23.803

如果您已经知道 的值，则`TextView`可以使用它：

```
<LinearLayout>
    <ImageView
        android:id="@+id/image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:contentDescription="@string/some_str" />
    <TextView
        android:id="@+id/label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/some_str" />
</LinearLayout> 
```

但是，如果您以`TextView`编程方式设置 的内容，则需要对`ImageView`的内容描述执行相同的操作。（请参阅[本文档](http://developer.android.com/reference/android/view/View.html#setContentDescription(java.lang.CharSequence))。）

```
String desc = "Foo Bar";
yourTextView.setText(desc);
yourImageView.setContentDescription(desc); 
```

# ruby-on-rails - 在 Ruby on Rails 中发送动态电子邮件提醒？

> ID：12022650
> 
> 赞同：2
> 
> 时间：2012-08-18T22:20:36.923
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, email, delayed-job

我对 actionmailer 比较陌生，但是我已经设置了忘记密码的电子邮件，并且已经将它们作为延迟作业运行。我想设置动态电子邮件提醒，用户可以在活动开始前选择“提醒我***___*分钟**/小时/天”等选项并让它发送电子邮件提醒。我不想让它完全开放，并且会有一个包含以下选项的下拉列表：

*   活动时提醒我
*   在活动开始前 5/15/30 分钟提醒我
*   活动开始前 1 小时提醒我
*   活动前 1 天提醒我

实现这一目标的最佳/最有效方法是什么？延迟作业 run_at 函数能否完成此任务，或者我是否应该为每个下拉选项编写一个传递方法，调用某些内容来传递邮件

```
event_start - 60.minutes 
```

或类似的东西？我的应用程序使用的是 Rails 3.0.11，这与日常的 cron 任务不同，因为这些任务可以随时运行。此外，如果用户能够编辑更改开始和结束日期的事件日期，是否会导致延迟作业出现任何问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T00:12:31.287

最好将此信息存储在数据库中，并为每个事件之前的每个时间段设置一个延迟作业。

IE。对于事件 A，只有 6 个延迟作业，一个在事件前 1 天，另一个在 1 小时前，另一个在 30 分钟前，...

然后延迟的作业可以在数据库中查找用户需要提醒电子邮件的用户。

相反，如果您在用户选择它时设置延迟作业，那么如果他们改变主意怎么办？当延迟作业为特定用户运行时，删除/更改将变得更加困难。

此外，如果许多用户同时需要电子邮件，则可能会导致多个作业同时运行时出现流量问题。相反，一次通过电子邮件发送一个用户列表的单个作业会导致更少的问题。

# objective-c - UIButton 状态不会改变

> ID：12022651
> 
> 赞同：0
> 
> 时间：2012-08-18T22:20:54.367
> 
> 标签：objective-c, ios5, xcode4.3

在头文件中，我为 UIButton 声明了以下内容，其中包含状态“正常”、“突出显示”和“选定”的单独图像：

```
@property (nonatomic, weak) IBOutlet UIButton *checkbox;

-(IBAction)selectButton; 
```

并将它们连接到xib中的按钮。实现如下：

```
- (IBAction)selectButton
{
    self.checkbox.selected=!self.checkbox.selected;
} 
```

在运行期间，当用户触摸按钮时，它会转到“突出显示”的图像，但随后会立即返回“正常”图像而不是更改为“选定”图像。我在代码的两边都添加`NSLog(@"selected: %d",self.checkbox.selected`了`selectButton`，我`0`在之前和之后都得到了。我做错了什么，触摸按钮不会将状态更改为`selected`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:15:10.920

以下是什么意思？

```
self.checkbox.selected=!self.checkbox.selected; 
```

这是一个条件（总是错误的）。类似的东西`if (1 != 1) {..}`。

您的意思可能是以下之一：

```
self.checkbox.selected = YES;
self.checkbox.disabled = YES;
self.checkbox.highlighted = YES; 
```

（或`NO`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T03:31:44.870

```
- (IBAction)selectButton
{

if (check.isSelected) {
    self.checkbox.selected=NO;
 }else
{
    self.checkbox.selected=YES;

}

} 
```

# ruby-on-rails - Ruby on Rails - Carrierwave 获取图像尺寸宽度和高度

> ID：12022653
> 
> 赞同：2
> 
> 时间：2012-08-18T22:21:07.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, bundle, carrierwave

我需要知道当前载波实例的宽度和高度

例如：

```
image_tag image.photo_url,:width => image.photo.width, :height => image.photo.height 
```

但问题是 image.photo.width 和 image.photo.height 不起作用。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T23:09:12.153

您必须安装 ImageMagick、RMagick 或 MiniMagick。然后你打开文件（图像），然后才能找出它的高度。

示例：[https](https://github.com/jnicklas/carrierwave#conditional-versions) ://github.com/jnicklas/carrierwave#conditional-versions （参见 is_landscape? 方法），复制到这里：

```
 def is_landscape? picture
    image = MiniMagick::Image.open(picture.path)
    image[:width] > image[:height]
  end 
```

或其他相关问题：

[Carrierwave 和 mini_magick 查找宽度和高度](https://stackoverflow.com/questions/4454223/carrierwave-and-mini-magick-finding-widths-height)

# sql-server - Redgate Sql Azure 备份看不到数据库

> ID：12022655
> 
> 赞同：0
> 
> 时间：2012-08-18T22:21:10.600
> 
> 标签：sql-server, azure-sql-database, database-backups, redgate

当我配置 Redgate 的 Sql Azure 备份工具来恢复数据库时，它不允许我从本地 Sql Express 实例中选择任何内容。知道为什么吗？

![在此处输入图像描述](../Images/7715903569f2fafacf666a5de056a30e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:12:13.417

我没有对可能是您的问题的 sqlexpress 数据库进行任何测试。我不得不弃用该产品以支持[http://cloudservices.red-gate.com](http://cloudservices.red-gate.com)上的托管解决方案。也许您可以尝试 SQL 比较和 SQL 数据比较，因为 SQL Azure 备份基于这些工具的引擎。

我编写了 SQL Azure Backup，所以有任何问题都可以给我留言。

# java - 如何知道公钥类型？

> ID：12022659
> 
> 赞同：0
> 
> 时间：2012-08-18T22:21:17.463
> 
> 标签：java, network-programming

我正在使用`.getPublicKey()`返回公钥的方法。[http://docs.oracle.com/javase/7/docs/api/java/security/cert/Certificate.html#getPublicKey%28%29](http://docs.oracle.com/javase/7/docs/api/java/security/cert/Certificate.html#getPublicKey%28%29)

我如何知道远程主机证书的密钥类型是 DSA 还是 RSA ？我已经在相当数量的网站上测试了这种方法。我总是得到 Sun RSA 公钥而不是 DSA。我怀疑为了获得 DSA 密钥我应该做些什么？我知道 RSA 比 DSA 使用更广泛，但我想在我的集合中至少看到 1 个 DSA 密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:28:45.327

好吧，你可以做`getPublicKey() instanceof DSAPublicKey`，大概？

# ios - 限制 FlipsideViewController 方向

> ID：12022660
> 
> 赞同：0
> 
> 时间：2012-08-18T22:21:41.240
> 
> 标签：ios, xcode, ios5, xcode4.4

我正在基于 xcode Utility App 模板创建一个简单的实用程序应用程序。我想将 FlipsideViewController 方向限制为仅在调用 FlipsideViewController 时设备所处的方向。最简单的方法是什么？我已经尝试过几种不同的方法，但到目前为止，它们都失败了。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:58:49.047

首先，获取当前方向：

```
- (void) viewDidAppear: (BOOL) animated
{
    eLockOrient = self.interfaceOrientation;
} 
```

然后，禁止其他任何事情：

```
- (BOOL) shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation) interfaceOrientation
{
    if (eLockOrient == 0)
        return true;
    return (interfaceOrientation == eLockOrient);
} 
```

**ADD**：我做了一些更多的测试，模拟器和设备在启动方向方面存在显着的行为差异。设备似乎运行正常，但模拟器却没有。看来，如果您将模拟器置于横向模式，则当应用程序启动时，模拟器不会记得发送应用程序消息来告诉应用程序它需要旋转。模拟器没有意识到它是在风景中。下面是来自 sim 和 device 的痕迹。

设备：

**[TiAeManageSearchesVC.shouldAutorotate] intfOrient=1 [TiAeManageSearchesVC.shouldAutorotate] intfOrient=1 [TiAeManageSearchesVC.shouldAutorotate] intfOrient=1 [TiAeManageSearchesVC.shouldAutorotate] intfOrient=4 [TiAeManageSearchesVC.shouldAutorotate] intfOrient=4 [TiAeManageSearchesVC.shouldAutorotate]**

模拟器：

**[TiAeManageSearchesVC.shouldAutorotate] intfOrient=1 [TiAeManageSearchesVC.shouldAutorotate] intfOrient=1 [TiAeManageSearchesVC.shouldAutorotate] intfOrient=1 [TiAeManageSearchesVC.viewDidAppear] self.intfOrient=1**

因此，上面的代码将在记录日志消息的情况下工作。我正在添加以下几行来改进物理设备上的解决方案。这将消除日志中的错误消息。

```
if (eLockOrient == 0)
    return true; 
```

否则，我认为问题出在模拟器上。如果您在模拟器上加载应用程序时尝试针对第一个视图进行测试，您将遇到这些问题。我已经测试了后续视图，如果您执行以下操作，它们可以正常工作：

1.  启动应用程序。
2.  旋转模拟器。
3.  进入第二个视图。

# javascript - 有 sqlite admin chrome 扩展吗？

> ID：12022664
> 
> 赞同：0
> 
> 时间：2012-08-18T22:23:00.050
> 
> 标签：javascript, html, google-chrome, chrome-web-store

有这种事吗？我一直在网上搜索类似于 phpmyadmin 的东西，但我似乎找不到。

我知道有 SQLite 管理器，但我想要一些可用于 Web 开发的东西。因此，类似于 chrome 扩展程序将提供一个可以编辑数据库的界面，或者一个可以包含的greasemonkey 脚本或一个书签或一个 JS 文件。

chrome 的开发者工具中的资源选项卡已经提供了这个，但是有没有办法像在 phpmyadmin 中一样编辑这些信息？或者像可以执行查询的“sqlite shell”？

我发现这样的工具在使用数据库开发应用程序时非常有用。开发人员希望能够快速编辑数据库。或者如果没有，你能建议一种方法来缓解这种情况吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T10:23:48.250

经过数周的研究，似乎什么都不存在。可以做的最好的事情是使用第三方 sqlite 浏览器访问 SQLITE 数据库。数据库文件位于：

```
C:\Users\(username)\AppData\Local\Google\Chrome\User Data\Default\databases 
```

# java - 使用 JPA EclipseLink 的无连接远程 MySQL 连接

> ID：12022665
> 
> 赞同：2
> 
> 时间：2012-08-18T22:23:07.057
> 
> 标签：java, mysql, jpa

我正在使用 JPA(Eclipselink) 和远程 mysql 数据库直接开发桌面应用程序。

我的 persistence.xml 我有两个 PersistenceUnit 一个使用 localhost 另一个使用我的远程数据库。当我尝试加载 EntityManagerFactory 时，它在 localhost 上工作正常，但从未连接到远程，并且没有提供错误，只是等待很长时间。这是我的persistence.xml的一部分

Windows Server 2003 上的远程 MYSQL。

```
<persistence-unit name="SOFALEnterprisePU3" transaction-type="RESOURCE_LOCAL">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<properties>
  <property name="javax.persistence.jdbc.url" value="jdbc:mysql://192.168.10.138:3306/sofaldb"/>
  <property name="javax.persistence.jdbc.password" value="password"/>
  <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
  <property name="javax.persistence.jdbc.user" value="root"/>
</properties> 
```

本地 MYSQL

```
<persistence-unit name="SOFALEnterprisePU2" transaction-type="RESOURCE_LOCAL">
<properties>
  <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/sofaldb"/>
  <property name="javax.persistence.jdbc.password" value="password"/>
  <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
  <property name="javax.persistence.jdbc.user" value="root"/>
</properties> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:54:43.370

当您说远程时，您是指同一个局域网还是跨互联网？因为 IP 192.168.10.138 指定了一个专用 LAN，因此您的远程计算机必须在同一网络上拥有一个地址，例如 192.168.10。*

首先确保在 Windows 防火墙中打开端口 3306。

如果它是不同的网络，则需要将您的路由器配置为转发端口，并且您必须连接到路由器的公共 IP。

如果它是同一个 LAN，那么 mysql 可能没有设置为接受该用户名密码组合的远程连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:25:41.400

在普通的JPA中，每个项目只使用一个persistence.xml。但是你可以试试[Spring的JPA](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/orm.html#orm-jpa)，它可以在一个项目中使用多个persistence.xml。查看这个[链接](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/orm.html#orm-jpa-multiple-pu)来处理多个持久化单元。

# java - Windows/Mac 上基于 Android 的应用程序？

> ID：12022668
> 
> 赞同：0
> 
> 时间：2012-08-18T22:23:49.663
> 
> 标签：java, android, opengl-es, cross-platform, ouya

我正在寻找创建一个基于 android 的游戏。我计划让这个最终出现在 OUYA 上。我知道控制台还没有出来，所以很难说什么会起作用，什么不会，但我们知道它是基于 android 的，java 会起作用。

所以我正在用java编写我的游戏。我正在使用 OpenGL ES。我也希望它也可以在台式机上工作。我假设玩家要么有一个控制器，要么有一个键盘和鼠标（触摸也可以工作，但需要调整）。我知道 android 本身不会提供开箱即用的功能，但 java 确实有一些处理控制器的库。

在这个思路中，我想我正在使用 OpenGL ES 创建一个普通的 java 应用程序，并希望在 android 上运行它。有没有一种简单的方法可以打包一个普通的 java 应用程序，以便它也可以在 android 上运行？我应该如何构建我的应用程序以优化代码重用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:30:25.390

我认为最好的办法是使用[libGdx](http://code.google.com/p/libgdx/)库。

尽管它有点难，因为该库不像[Andengine](http://www.andengine.org/)那样高级，但 libGdx 允许您在桌面和 android 上运行您的应用程序，并且您可以使用 Java 在这个库上进行开发！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:27:26.980

如果您想将您的应用程序移植到不止一个平台，请考虑使用 C 和/或 C++ 对您的引擎和游戏进行编程。

# python - Python + Windows：如何编写一个在计算机睡眠/关机时弹出提醒的脚本？

> ID：12022670
> 
> 赞同：0
> 
> 时间：2012-08-18T22:24:21.107
> 
> 标签：python, windows

我想编写一个 Python 脚本来提醒我在睡眠/关机时服药。（只是一个简单的弹出消息）。我从哪里开始？

（如果存在，我正在寻找一个非常简单的实现。我不想为此付出太多努力）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:35:35.810

这将告诉您如何检测
Linux 事件：-[检测 Linux 下 Python/GTK 中的用户注销/关闭 - 未收到 SIGTERM/HUP](https://stackoverflow.com/questions/2490166/detect-user-logout-shutdown-in-python-gtk-under-linux-sigterm-hup-not-rece)。
Windows :- [Python - Windows 关机事件](https://stackoverflow.com/questions/1411186/python-windows-shutdown-events)

这会弹出通知

```
from tkinter import *
root = Tk()
w = Label(root, text="Take your Medicine \n :):)...Get Well Soon...")
w.pack()
root.mainloop() 
```

# jpeg - 解码部分 JPEG 文件

> ID：12022675
> 
> 赞同：5
> 
> 时间：2012-08-18T22:25:00.747
> 
> 标签：jpeg, partial, libjpeg

我正在尝试加载内存占用有限的大型 JPEG 文件（数百兆像素）的一部分。我只需要大约 20000 的 1000 条扫描线。似乎 libjpeg（以及它的 fork libjpeg-turbo）的当前实现并没有提供一种方法来跳过不需要的 19k 扫描线而不解码它们。是否有解决方法而不深入研究 libjpeg 内部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:30:51.393

您无法避免对要跳过的扫描线进行*解码，但可以避免将它们存储在任何地方。*当您从 libjpeg 获取每一行的回调时，只需等待行号与您想要的扫描线部分匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-29T08:27:39.520

一年前在 jpeglib-turbo 中实现了部分 JPEG 解码。我没有尝试过，但我想它应该可以工作。

核实：

[添加进一步的部分解码优化 #34](https://github.com/libjpeg-turbo/libjpeg-turbo/issues/34)

# python - 原子写入多个文件

> ID：12022676
> 
> 赞同：3
> 
> 时间：2012-08-18T22:25:06.590
> 
> 标签：python, database, synchronization, filesystems, atomic

假设我有一组文件。如何确保写入**所有**这些文件是原子的。

我考虑过写入临时文件，只有在写入成功后，才对每个文件执行原子重命名。然而，一次重命名所有文件并不是原子的。如果我们想附加到这些文件，这也不会扩展到非常大的文件。

相反，我考虑过实施交易，但这本身就变成了一个项目。我意识到这几乎是关于实现一个迷你数据库。

你会如何在 Python 中做到这一点？

```
d = FileWriter.open(['file1', 'file2'], 'wb+')
d.write('add hello world to files')
d.close() 
```

如果不成功，请确保 d.write 是原子的或至少回滚到原始文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T23:27:11.943

这就是我的想法。首先确保 open 是同步的，然后执行以下操作：

1.  写入临时文件：file1~、file2~和特殊文件success~（必须先写入）。
2.  写入成功后，删除文件成功~。
3.  将文件重命名为 file1 和 file2。

如果出现问题：

1.  检查是否成功~存在。
2.  如果是这样，请不要费心修理。由于文件未更新（未重命名），因此已隐式执行回滚。
3.  如果success~不存在，则在写入后和重命名过程中出现问题。在这种情况下，修复就像将 filex~ 重命名为 filex 一样简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:38:57.600

在当前声明中，您的要求是如此通用，以至于唯一合理的答案是操作系统级别的支持是必要的，而且它甚至不再是严格意义上的 Python 相关问题。查看有关**事务文件系统**的内容，例如[此处](http://en.wikipedia.org/wiki/Transactional_NTFS)和[此处](http://en.wikipedia.org/wiki/File_system#Transactional_file_systems)。关于迄今为止提出的解决方案的一小段摘录：

> 如果没有文件系统事务，即使不是不可能，确保跨多个文件系统操作的一致性也是很困难的。文件锁定可用作单个文件的并发控制机制，但它通常不保护目录结构或文件元数据。例如，文件锁定不能防止符号链接上的 TOCTTOU 竞争条件。文件锁定也不能自动回滚失败的操作，例如软件升级；这需要原子性。

所以我建议重新考虑你的问题（也许你的问题也是？）并更详细地分析你的要求。最重要的是，您需要的保证越少，您能找到的解决方案就越简单。也许您可以摆脱像文件锁定这样简单的事情，或者您会发现需要一个数据库。

说到这一点，如果您正在考虑文件系统，因为您的体系结构的组件需要访问*文件*，您是否考虑过[FUSE](http://fuse.sourceforge.net/)作为在常规数据库之上构建类似文件系统的外观的一种方式？使用[python-fuse](http://sourceforge.net/apps/mediawiki/fuse/index.php?title=FUSE_Python_tutorial)轻而易举。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T23:10:07.623

您可以尝试使用[flock](http://linux.die.net/man/2/flock)来实现您的目标。可以在 python 中使用`fcntl.flock`. 请注意，这只是一个*建议*措施。要真正保证您想要什么，您应该尝试使用支持严格锁定的数据库或文件系统/内核。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-06T08:22:56.927

数据库管理系统通常要么只使用一个预写日志文件，要么使用自定义文件系统，原因是通常的文件系统在保证原子性或执行顺序方面确实很糟糕。

它们针对一致性和性能进行了全面优化。

因此，只有写入单个文件的顺序是可信的，除非您使用专门的文件系统创建分区或映像文件。

但是，您可以在每次写入多个文件时写入事务编号。

并明确写入是否完整，例如使用带有开始/结束标记（如 <element>...</element> 或 { ... } 等）的 xml 或 json 样式块。

然后，您的代码可以轻松检测跨多个文件的任何间隙并确定崩溃后的最后一致状态。

为了避免崩溃后的最后一个一致状态因为一些写入在缓存中等待了几分钟而结束，所以这些方法中的任何一种都可以与 sync / fsync 结合使用。

使用sync / fsync 也使事务提交成为可能，即保证至少从文件系统的角度来看，到目前为止的所有内容都是写入的。

但是，您的存储系统可能仍然会因为断电而丢失最后一次写入，无论是硬盘还是带有内部缓存的 SSD、NAS 等。这些系统提供的保证可能千差万别，这是所有方法都需要考虑的挑战，无论是使用文件系统还是传统的 RDBMS 进行存储。

如果您要写入内置硬盘或 SSD，使用 UPS 绝对是一个很好的补充，尤其是当您在 USP 发出信号时以受控方式关闭系统时 ^^

# php - php未定义索引错误

> ID：12022679
> 
> 赞同：0
> 
> 时间：2012-08-18T22:25:10.083
> 
> 标签：php

我有一个带有三个参数 @startdate、@enddate 和 @field1 的存储过程，当我尝试执行以下 php 代码时，出现错误

**未定义索引：开始日期未定义索引：结束日期未定义索引：field1**

```
<?php
$myServer = "instance_name"; // host/instance_name
$myUser = "username"; // username
$myPass = "password"; // paasword
$myDB = "databasename"; // database name
$dbhandle = mssql_connect($myServer, $myUser, $myPass)
or die("Couldn’t connect to SQL Server on $myServer");
$selected = mssql_select_db($myDB, $dbhandle)
or die("Couldn’t open database $myDB");

<?php
$startdate = isset($_REQUEST['startdate']) ? $_REQUEST['startdate'] : null;
$enddate = isset($_REQUEST['enddate']) ? $_REQUEST['enddate'] : null;
$field1 = isset($_REQUEST['field1']) ? $_REQUEST['field1'] : null;
?>

<form action = "thisfile.php" method = "post">
Please input startdate <input type = "text" name = "startdate" /> </br>
Please input enddate <input type = "text" name = "enddate" /> </br>
Please input field1 name <input type = "text" name = "field1" /> </br>
Please submit <input type = "submit" name = "submit" value = "submit" /> </br>
</form>

<table border = "5" id="1">

 <?php
    if (isset($startdate) && isset($enddate) ){
$query = "storedprocedure '$startdate','$enddate','field1'";
    $result = mssql_query($query);
while ($rows = mssql_fetch_array($result) ) {
echo "<tr><td>".$rows[0]."&nbsp;<td>".$rows[1]."&nbsp;
   <td>".$rows[2]."&nbsp;<td>".$rows[3]."&nbsp;
    <td>".$rows[4]."&nbsp;<td>".$rows[5]."&nbsp;";
}
}

</table>
</body>
</html> 
```

我只是在顶部寻找三个文本框，当我在文本框中输入 startdate、enddate 和 field1 名称时，它应该在同一页面中显示输出。

编辑：我的存储过程类似于以下内容：

```
Create procedure storedprocedure
@startdate datetime,
@enddate datetime,
@field1  varchar(50)
select date, sum(qty), sum(qty), sum(qty2), sum(qty3), sum(qty4) from table1
where date between @startdate and @enddate and field1 like @field1 + '%'
group by date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:29:56.807

你为什么不试试这个

```
if (isset($startdate) && isset($enddate) ){
$query = "storedprocedure '$startdate','$enddate','field1'";
    $result = mssql_query($query);
while ($rows = mssql_fetch_array($result) ) {
echo "<tr><td>".$rows[0]."&nbsp;<td align=right>".$rows[1]."&nbsp;
   <td align=right>".$rows[2]."&nbsp;<td align=right>".$rows[3]."&nbsp;
    <td align=right>".$rows[4]."&nbsp;<td align=right>".$rows[5]."&nbsp;";
}
} 
```

这应该停止通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:39:37.020

您可以通过以下方式重写部分代码：

```
<?php
    $startdate = isset($_REQUEST['startdate']) ? $_REQUEST['startdate'] : null;
    $enddate = isset($_REQUEST['enddate']) ? $_REQUEST['enddate'] : null;
    $field1 = isset($_REQUEST['field1']) ? $_REQUEST['field1'] : null;
?> 
```

但实际上您需要检查所有请求参数（尤其是`enddate`和`field1`）是否存在。

另请参阅[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

# sql - SQL数据库查询

> ID：12022680
> 
> 赞同：0
> 
> 时间：2012-08-18T22:25:16.503
> 
> 标签：sql

我需要以下查询的帮助。我有以下方案：

Book(bid, title, price) Person(pid, name, zipcode) Order(pid, bid, quantity)

需要查询：

查询应返回所有 pid = 1 的客户已购买的所有书籍（澄清 - 只有当所有 pid = 1 的人从这本书中购买了至少 1 本时，这本书才会出现在结果中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:38:52.137

这是[**连接**](http://en.wikipedia.org/wiki/Join_%28SQL%29)所有三个表的问题：

```
SELECT b.*
FROM book b INNER JOIN order o ON (b.bid = o.bid)
     INNER JOIN person p ON (p.pid = o.pid)
WHERE p.pid = 1; 
```

# dojo - 我必须销毁我创建的 dijit 和 dojox 小部件吗？

> ID：12022683
> 
> 赞同：0
> 
> 时间：2012-08-18T22:25:39.980
> 
> 标签：dojo

当我创建一个新的 dijit/dojox 小部件时，可以说一个 Button，执行以下操作：

```
new Button({...}, "domId"); 
```

假设我将我的新按钮添加到选项卡面板，在某些时候用户关闭了该选项卡。销毁按钮是我的责任吗？

dojox 的小部件呢？

像对话框这样的组件呢？（在 jquery UI 中，您必须销毁小部件和用于创建它的 dom）。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:06:32.813

构造的任何小部件都将放置在 dijit.registry 中并在卸载时消失。

如果您有一个构建不止一次的小部件，假设您正在执行 ContentPane ajax 加载布局 - 那么您应该销毁在卸载内容窗格之前创建的任何小部件。也就是说，已放置在内容窗格的 DOM 下的小部件。例如，如果您有一个侧边栏菜单，请不要每次都销毁并重新创建它:)

如果您使用 ContentPane 的任何扩展并且它已将 dojo 标记设置为其内容 - 解析器会自动处理注册和卸载小部件。

所以回答；不是真的.. 但是，您不应该破坏作为小部件“实现”的 DOMNode，也不应该删除其中的任何内部子级。而是调用`dijit.byId('widgetId')`从注册表中提取小部件 - 然后`widget.destroy();`

如果它是一个 dojox 或一个对话框或其他东西，它都是一样的。它们由相同的基础 api 扩展`dijit._Widget`并具有相同的基本 api - 至少像 90% 的 dojox 模块一样。

# json - DataTables 错误：“无法解析来自服务器的 JSON 数据” - 虽然 JSON 响应有效

> ID：12022685
> 
> 赞同：0
> 
> 时间：2012-08-18T22:25:57.847
> 
> 标签：json, parsing, warnings, datatables

我已经使用 Datatables 一段时间了，在同一个网站上，我有两个单独的页面使用它。一个有效，一个给我标题中的 JSON 错误。奇怪的是，我从工作页面复制并粘贴了代码以创建非工作页面，并且响应看起来都有效。

**JSON响应（显然很糟糕......我觉得很好）：**

{"sEcho":0,"iTotalRecords":"190","iTotalDisplayRecords":"2","aaData":[["4","1","1","2","0"], ["91","2","1","1","0"]]}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:41:36.307

我发现我的错误...

我在 mySQL SELECT 查询中使用了“AS”。显然这会阻止 Datatables 正确解析响应，即使它看起来正确。

坏的：

```
SELECT SQL_CALC_FOUND_ROWS concat( "<input type='hidden' id='task_code' value='", t.id, "'><a href='learningguide_edit.php?task=", lg.taskID, "'><img src='../img/view_details_icon.gif' border='0'></a> &nbsp;", t.title ) AS task, IF(lg.cc_standards<>'-1',LENGTH(REPLACE(lg.cc_standards, '|', '@@'))-LENGTH(lg.cc_standards)+1,0) AS CC_Count, IF(lg.state_standards<>'-1',LENGTH(REPLACE(lg.state_standards, '|', '@@'))-LENGTH(lg.state_standards)+1,0) AS State_count, IF(lg.nocti_standards<>'-1',LENGTH(REPLACE(lg.nocti_standards, '|', '@@'))-LENGTH(lg.nocti_standards)+1,0) AS NOCTI_count, IF(lg.industry_standards<>'-1',LENGTH(REPLACE(lg.industry_standards, '|', '@@'))-LENGTH(lg.industry_standards)+1,0) AS Ind_count
    FROM   mlg_learning_guides lg, mlg_tasklist_5 t
    WHERE lg.taskID=t.id AND lg.courseID=5 
```

好的：

```
SELECT SQL_CALC_FOUND_ROWS concat( "<input type='hidden' id='task_code' value='", t.id, "'><a href='learningguide_edit.php?task=", lg.taskID, "'><img src='../img/view_details_icon.gif' border='0'></a> &nbsp;", t.title ), IF(lg.cc_standards<>'-1',LENGTH(REPLACE(lg.cc_standards, '|', '@@'))-LENGTH(lg.cc_standards)+1,0), IF(lg.state_standards<>'-1',LENGTH(REPLACE(lg.state_standards, '|', '@@'))-LENGTH(lg.state_standards)+1,0), IF(lg.nocti_standards<>'-1',LENGTH(REPLACE(lg.nocti_standards, '|', '@@'))-LENGTH(lg.nocti_standards)+1,0), IF(lg.industry_standards<>'-1',LENGTH(REPLACE(lg.industry_standards, '|', '@@'))-LENGTH(lg.industry_standards)+1,0)
    FROM   mlg_learning_guides lg, mlg_tasklist_5 t
    WHERE lg.taskID=t.id AND lg.courseID=5 
```

# clojure - Clojure 的 1.4 阅读器文字有什么优势，为什么不进行示例编译？

> ID：12022686
> 
> 赞同：9
> 
> 时间：2012-08-18T22:26:05.153
> 
> 标签：clojure

我有两个问题。首先，我需要做什么才能编译以下代码，Clojure 1.4 阅读器文字给了我哪些我无法从宏中获取的内容？

我知道我正在使用本地 data_readers.clj 文件覆盖阅读器，但是在哪里可以比我已经访问过的 Clojure 1.4 发行说明更详细地了解这些阅读器文字？

这是错误编译的代码。

```
java.lang.RuntimeException: No reader function for tag ?=, 
```

## 项目.clj

```
(defproject repl-test "0.0.1-SNAPSHOT"
  :description "TODO: add summary of your project"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.clojure/clojure-contrib "1.2.0"]
                 [clojure-csv/clojure-csv "1.3.2"]
                 [org.clojure/tools.cli "0.1.0"]
                 [util "1.0.2-SNAPSHOT"]
                 [clj-http "0.1.3"]]
   :aot [repl-test.core]
   :main repl-test.core) 
```

## data_readers.clj（位于我的 lein 项目 repl-test 的顶部）

```
{
 ?= repl-test.core/debug-print
 str repl-test.core/expand-sexp
} 
```

data_readers.clj 应该去别的地方吗？如果有，在哪里？

## core.clj 的相关部分

```
(ns repl-test.core
  (:gen-class)
  (:require [clojure.string :as str])
  (:require [util.core :as utl])
  (:use clojure-csv.core))

(defn debug-print
  "Gauche debug print"
  [x]
  `(let [res# ~x]
     (println "?=" res#)
     res#))

(defn expand-sexp
  "Expand S-exp in string"
  [s]
  (let [ls (map-indexed #(if (even? %) %2 (read-string %2))
                        (str/split s #"`"))]
    `(apply str (list ~@ls))))

(defn -main 
  [& args]
  (println (map inc #?=(range 10)))

  (let [i 100]
    (println #str"i = `i`")
    (println #str"(+ 1 2 3) = `(+ 1 2 3)`"))) 
```

示例代码来自[这里](https://gist.github.com/2399254)。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T06:51:40.337

阅读器文字让您可以创建自己的文字类型。像：

```
(< #meter 2 #inch 5)
(mass #molecule "H2O") 
```

与常规宏不同，阅读器文字由阅读器处理。因此，您可以在基于 s-expression 的数据文件中使用它们，而不仅仅是代码。

列出的文字`data_readers.clj`必须位于类路径的根目录中。那是在`src`一个 lein 项目的目录中。

# macos - 选项卡视图中的初始选项卡

> ID：12022688
> 
> 赞同：2
> 
> 时间：2012-08-18T22:26:13.790
> 
> 标签：macos, xcode4, tabview

我有一个带有多个选项卡视图项的选项卡视图的应用程序。

每当我运行我的应用程序时，它都会打开上次运行该应用程序时最后选择的选项卡视图项。

我总是希望第一个项目打开。

我尝试在选项卡视图属性检查器中设置“初始选项卡”设置，但这没有效果。我也试过 selectTabViewItem: 在 windowDidLoad: 末尾的窗口控制器中，但这也没有用。

任何想法？

TIA

问题解决了：

经过一番挖掘，我发现默认情况下，在父窗口的属性检查器中设置了“可恢复”。这会导致在重新运行应用程序时恢复上次选择的选项卡视图项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:53:10.287

你也可以实现

```
- (void) viewWillAppear: (BOOL) animated 
```

并在那里设置您想要的任何选项卡。

# iphone - Cocos2D 菜单按钮

> ID：12022689
> 
> 赞同：1
> 
> 时间：2012-08-18T22:26:58.043
> 
> 标签：iphone, objective-c, sdk, cocos2d-iphone

我想从图像中制作一个按钮，将玩家从当前场景（游戏场景）带回菜单场景，重置当前场景（游戏场景）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T04:59:05.630

使用这样的代码：

```
-(void)showBackBtnMenu
{
    CCSprite *backButtonNormal = [CCSprite         spriteWithSpriteFrameName:@"btnBackNormal.png"]; //Make sure u already added this sprite sheet. Otherwise use sprite from file.
    CCSprite *backButtonSelected = [CCSprite spriteWithSpriteFrameName:@"btnBackSelected.png"];

    CCMenuItemSprite *backButton = [CCMenuItemSprite itemFromNormalSprite:backButtonNormal selectedSprite:backButtonSelected disabledSprite:nil target:self selector:@selector(backBtnPress:)];

    backButton.position = ccp(63.0f, 34.0f);

 CCMenu *menu = [CCMenu menuWithItems:backButton, nil];
    menu.position = ccp(0,0); 
    [self addChild:menu z:3]; //Make sure this z value is higher than ur background
}

-(void)backBtnPress:(id)sender
{
       [[CCDirector sharedDirector] replaceScene:[transition transitionWithDuration:duration scene:[MyMainMenu scene]]];
} 
```

# c# - 应该使用 DbType.AnsiString 还是 DbType.String？

> ID：12022690
> 
> 赞同：0
> 
> 时间：2012-08-18T22:27:03.360
> 
> 标签：c#, string, visual-studio-2005, ansistring, dbtype

我在看别人写的代码。

它使用的所有地方`DbType.AnsiString`而不是`DbType.String`. 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:34:30.983

DbType.AnsiString 是一种遗留数据类型。它处理 8 位字符而不是 Unicode 字符。

冒着尖酸的风险，你的问题有点像问“为什么我的 1996 年车型的火花塞是按照 1994 年的设计标准设计的？”

就像有人说的那样，您可能需要查看数据库模式和现有代码库，或者请别人来解决这个问题。

维护旧代码和数据是软件开发人员职业的重要部分，也是最困难的部分。

# bash - 在 .bashrc 中扩展 ~

> ID：12022691
> 
> 赞同：0
> 
> 时间：2012-08-18T22:27:08.250
> 
> 标签：bash

我需要在**.bashrc**中展开主文件夹，如下例所示：

```
HOME=~
export ANT_OPTS=-Dant.logger.defaults=$HOME/environment/AnsiColorLogger.override 
```

在没有一次性 HOME 变量的情况下，是否有一条捷径可以在一行中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:30:54.950

`HOME`已经是 bash 中的内置变量；事实上，它的价值是什么`~`扩大到。

从 bash 手册页：

> 家
> 
> 当前用户的主目录；cd 内置命令的默认参数。执行波浪号扩展时也会使用此变量的值。

# javascript - 在 HTML 和 CSS 中，当专注于文本框时，我可以更改父 DIV 的背景吗？

> ID：12022694
> 
> 赞同：2
> 
> 时间：2012-08-18T22:27:26.770
> 
> 标签：javascript, html, css, pseudo-class

我已经阅读了关于无法使用伪类（例如 :focus）更改 CSS 中的父级的信息，所以我在这里看看我是否做错了什么或者是否有 JavaScript 替代方案。

如果可能的话，我宁愿不使用 javascript。

这是我当前的代码：

```
.box:focus .test{
background: #00FF00;
} 
```

因此，当我在文本框 .box 内单击时，该代码应将 DIV .test 的背景更改为绿色。

但是这不起作用，请有人指出我正确的方向，谢谢。

这是我的 HTML 的代码片段，这是一个测试页面，所以我可以看到它是如何工作的。

```
<input name="textfield" type="text" class="box" id="textfield" />

<div class="test" id="test">Content for  id "test" Goes Here</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T23:15:13.337

在 javascript 中，如果您要编写大量的 jQuery 库，我会安装它。这里有一些 jQuery 会改变父 css：

```
var parent = $(this).parent()

$('.box').focusin(function(){
    parent.css('background','#00FF00')
}).focusout(function(){
    parent.parent().css('background','transparent')
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T23:59:18.840

这实际上是可能的，无需使用 javascript。确实没有办法选择父级，但是您可以使用 css 选择兄弟级。我在这里设置了一个小例子：http: [//jsfiddle.net/k2dAp/1/](http://jsfiddle.net/k2dAp/1/)

HTML

```
<div class='container'>
<input type='text' />
<div class='background'></div>
</div> 
```

CSS

```
.container {
  border: red solid 1px; 
  position: relative;    
}
.background {
  position: absolute;
  background: grey;
  width: 100%;
  height: 100%;
  z-index: -1;
  top: 0;
  left: 0;   
}
input {
  margin: 10px;   
}
input:focus + .background {
  background: green;   
} 
```

正如你所看到的，我添加了一个额外的 div，它通过添加绝对定位和 z-index 来充当背景。然后您可以使用`+`选择器访问它。这将与旧版本的 IE 不兼容，但在现代浏览器中应该可以正常工作并且可以优雅地降级。添加 js 可能会在更多浏览器中工作，但当然不适用于禁用 js 的人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T22:34:42.003

您能否提供更多详细信息，例如代码片段等...

js 几乎可以做任何事情，所以答案是肯定的，有一个 js 替代品

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T22:42:18.367

你只能通过像这样使用 jquery 的 javascript 来做到这一点

```
$("#textfield").click(function(){
$("#test").css('background-color','#333');
}) 
```

# cakephp - CakePHP 和 AppExceptionHandler 用于非内置异常

> ID：12022695
> 
> 赞同：0
> 
> 时间：2012-08-18T22:27:46.783
> 
> 标签：cakephp, exception-handling, cakephp-2.0, http-status-code-503

对于异常处理，我计划使用这种方法

*   使用 Exception.handler或这个[创建您自己的异常处理程序：](http://book.cakephp.org/2.0/en/development/exceptions.html#create-your-own-exception-handler-with-exception-handler)
*   [使用带有 Exception.renderer 的自定义渲染器来处理应用程序异常](http://book.cakephp.org/2.0/en/development/exceptions.html#using-a-custom-renderer-with-exception-renderer-to-handle-application-exceptions)

1）你能谈谈它们之间的区别吗？Cookbook用这句话告诉了区别

> “如果您不想控制异常处理，但想更改异常的呈现方式......”

2）我打算添加**503 Service Unavailable**代码作为例外。但是我该如何实现这个错误呢？
Cookbook有这样一个missingWidget的例子，我该如何更改503服务不可用？

```
class AppExceptionRenderer extends ExceptionRenderer {
    public function missingWidget($error) {
        echo 'Oops that widget is missing!';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:16:03.850

您可以使用内核中已经可用的 InternalErrorException。

```
throw new InternalErrorException('Service Unavailable', 503) 
```

错误页面将由 ExceptionRenderer::error500() 方法使用视图 app/View/Errors/error500.ctp 呈现。根据您的需要，您可以仅自定义视图文件或制作自定义异常渲染器，该渲染器扩展 ExceptionRenderer 并覆盖 error500() 方法。

# php - 删除/添加过滤器到 Wordpress 函数 fil

> ID：12022696
> 
> 赞同：1
> 
> 时间：2012-08-18T22:27:59.230
> 
> 标签：php, wordpress, woocommerce

我在尝试通过我的主题 functions.php 文件更改消息的输出时遇到问题。

这是 woocommerce 插件提供的代码：

```
function woocommerce_add_to_cart_message() {
    global $woocommerce;

    if (get_option('woocommerce_cart_redirect_after_add')=='yes') :

        $return_to  = (wp_get_referer()) ? wp_get_referer() : home_url();

        $message    = sprintf('<a href="%s" class="button">%s</a> %s', $return_to, __('Continue Shopping;', 'woocommerce'), __('Product successfully added to your cart.', 'woocommerce') );

    else :

        $message    = sprintf('<a href="%s" class="button">%s</a> %s', get_permalink(woocommerce_get_page_id('cart')), __('View Cart &rarr;', 'woocommerce'), __('Product successfully added to your cart.', 'woocommerce') );

    endif;

    $woocommerce->add_message( apply_filter('woocommerce_add_to_cart_message', $message) );
} 
```

我想要做的是更改按钮消息，但我不完全确定如何执行此操作。

我一直在阅读 WP 法典，但不幸的是，我认为我不太了解它是如何工作的。这是我尝试过的：

```
function remove_woocommerce_add_to_cart_message() {
    remove_filter('woocommerce_add_to_cart_message', $message) ;
}

function woocommerce_add_to_cart_message_edited() {
    global $woocommerce;

    if (get_option('woocommerce_cart_redirect_after_add')=='yes') :

        $return_to  = (wp_get_referer()) ? wp_get_referer() : home_url();

        $message    = sprintf('<a href="%s" class="button">%s</a> %s', $return_to, __('Continue Shopping;', 'woocommerce'), __('Product successfully added to your cart.', 'woocommerce') );

    else :

        $message    = sprintf('<a href="%s" class="button">%s</a> %s', get_permalink(woocommerce_get_page_id('cart')), __('NEW CART MESSAGE', 'woocommerce'), __('Product successfully added to your cart.', 'woocommerce') );

    endif;

    $woocommerce->add_message( apply_filter('woocommerce_add_to_cart_message', $message) );
} 
```

因此，我尝试删除输出消息的过滤器，然后声明它，但它似乎不起作用。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:50:57.483

当代码声明`apply_filter('woocommerce_add_to_cart_message', $message)`代码将查找添加到该挂钩的任何过滤器，并一次通过它们。

您可以创建一个函数，命名为您喜欢的任何名称，并将其添加到该钩子中，如下所示：

```
function my_filer_function( $message )
{
    // Here you should modify $message as you want, and then return it.
    $newButtonString = 'NEW BUTTON STRING';
    $replaceString = '<a$1class="button">' . $newButtonString .'</a>';
    $message = preg_replace('#<a(.*?)class="button">(.*?)</a>#', $replaceString, $message);
    return $message;
}
// Then add the function to that filter hook and prioritize it last
add_filter( 'woocommerce_add_to_cart_message', 'my_filer_function', 999); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T06:40:02.497

```
// Output success messages
    if ( get_option( 'woocommerce_cart_redirect_after_add' ) == 'yes' ) :

        $return_to  = apply_filters( 'woocommerce_continue_shopping_redirect', wp_get_referer() ? wp_get_referer() : home_url() );

$message    = sprintf('%s',$added_text);
    else :

$message    = sprintf('%s',$added_text);

    endif; 
```

***以上代码我已对其进行了更改，请检查可能对您有帮助***

# php - PHP PDO 准备好的语句有时不起作用

> ID：12022697
> 
> 赞同：-1
> 
> 时间：2012-08-18T22:28:06.660
> 
> 标签：php, pdo, prepared-statement

我正在将我的 MySQL 查询切换到 PDO 准备语句。我的大多数查询都有效，但这个查询不起作用。它在“准备”方法之后立即中断。

你觉得哪里不对？

```
function get_users_days($item_ID, $user_ID)
{
    $today = date("Y-m-d");

    $SQL = "SELECT *
            FROM schedule 
            WHERE item_ID=:item_ID AND user_ID=:user_ID AND end_date>=:today";

    $stmt = $dbh->prepare($SQL);
    $stmt->bindParam(':item_ID', $item_ID);
    $stmt->bindParam(':user_ID', $user_ID);
    $stmt->bindParam(':today', $today);

    $stmt->execute();

    while($row = $stmt->fetch())
    {
      // do magical things
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:38:50.120

只需 在变量`global $dbh;` 之前添加`$today`

# c# - 如何在c#中每四个单词拆分一个字符串？

> ID：12022705
> 
> 赞同：3
> 
> 时间：2012-08-18T22:29:18.870
> 
> 标签：c#, .net

我正在使用 C# 4.0 并且遇到了一种情况，我必须将整个字符串按每四个单词拆分并将其存储在 List 对象中。所以假设我的字符串包含：`"USD 1.23 1.12 1.42 EUR 0.2 0.3 0.42 JPY 1.2 1.42 1.53"`，结果应该是：

```
USD 1.23 1.12 1.42
EUR 0.2 0.3 0.42
JPY 1.2 1.42 1.53 
```

它应保存到 List 对象中。我试过以下

```
List<string> test = new List<string>(data.Split(' ')); //(not working as it splits on every word) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-18T22:34:00.820

用一点 Linq 魔法：

```
var wordGroups = text.Split(' ')
                     .Select((word, i) => new { Word = word, Pos = i })
                     .GroupBy(w => w.Pos / 4)
                     .Select(g => string.Join(" ", g.Select(x=> x.Word)))
                     .ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T22:46:48.937

当然，我的回答不像 linq 那样迷人，但我希望发布这种`old school`方法。

```
void Main()
{
    List<string> result = new List<string>();

    string inp = "USD 1.23 1.12 1.42 EUR 0.2 0.3 0.42 JPY 1.2 1.42 1.53";
    while(true)
    {
        int pos = IndexOfN(inp, " ", 4);
        if(pos != -1)
        {
            string part = inp.Substring(0, pos);
            inp = inp.Substring(pos + 1);
            result.Add(part);
        }
        else
        {
            result.Add(inp);
            break;
        }
    }
}

int IndexOfN(string input, string sep, int count)
{
    int pos = input.IndexOf(sep);
    count--;
    while(pos > -1 && count > 0)
    {
        pos = input.IndexOf(sep, pos+1);
        count--;
    }
    return pos ;
} 
```

编辑：如果对输入字符串上的数字没有控制（例如，如果一些钱只有 1 或 2 个值），那么就无法在输入字符串的 4 个块中正确地进行子字符串化。我们可以求助于正则表达式

```
List<string> result = new List<string>();

string rExp = @"[A-Z]{1,3}(\d|\s|\.)+";
// --- EUR with only two numeric values---
string inp = "USD 1.23 1.12 1.42 EUR 0.2 0.42 JPY 1.2 1.42 1.53";
Regex r = new Regex(rExp);
var m = r.Matches(inp);
foreach(Match h in m)
   result.Add(h.ToString()); 
```

此模式还接受带逗号的数字作为小数分隔符和不带任何数字的货币符号（“GPB USD 1,23 1,12 1.42”

```
string rExp = @"[A-Z]{1,3}(,|\d|\s|\.)*"; 
```

[正则表达式语言 - 快速参考](http://msdn.microsoft.com/en-US/library/az24scfc%28v=vs.90%29)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-18T22:32:31.540

最简单的方法是首先将每个单词拆分成一个列表，然后编写一个小循环重新组合每组四个单词。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T09:26:30.587

反应式框架的家伙有一堆扩展`IEnumerable<T>`。其中之一就是`Buffer`如此简单地做你想做的事。

这里是：

```
var text = "USD 1.23 1.12 1.42 EUR 0.2 0.3 0.42 JPY 1.2 1.42 1.53";
var result = text.Split(' ').Buffer(4); 
```

这给出了：

![结果](../Images/40e24e667de1136f529e21c96e74b8a6.png)

# c# - 将整数添加到 Unicode 字符 - 这是做什么的？

> ID：12022714
> 
> 赞同：0
> 
> 时间：2012-08-18T22:31:13.670
> 
> 标签：c#

我正在初学者级别学习 C#。我不明白将整数添加到 Unicode 字符有什么作用。下面的示例中的添加有什么作用？

```
int amount = int.Parse(number.Text);
steps.Text = "";
string current = "";
do
{
    int nextDigit = amount % 8;
    amount /= 8;
    int digitCode = '0' + nextDigit;
    char digit = Convert.ToChar(digitCode);
    current = digit + current;
    steps.Text += current + "\n";
}
while (amount != 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:58:58.730

添加字符和整数时，字符将转换为表示字符代码的整数值。

所以`'0' + nextDigit`是一样的`48 + nextDigit`。

然后将整数转换为字符，然后再转换为字符串。使用该`ToString`方法可以更轻松地完成（因为整数始终在 0 和 7 之间）：

```
do {
  int nextDigit = amount % 8;
  amount /= 8;
  string digit = nextDigit.ToString();
  current = digit + current;
  steps += current + "\n";
} while (amount != 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:41:17.910

此代码将八进制数转换为字符串。如果你在谈论这条线：

```
int digitCode = '0' + nextDigit; 
```

此行将单个二进制数字转换为字符串数字。如果二进制值为 0，则 char 值为`'0' + 1`或`'1'`。这是一个常见且有用的小技巧。

在大多数字符集（Unicode、ASCII、UTF-x 等）中，`'0'`thru的字符`'9'`按顺序出现，因此您可以通过将数值 0 到 9 添加到`'0'`.

# android - 无法在 SearchView 中自动显示键盘

> ID：12022715
> 
> 赞同：30
> 
> 时间：2012-08-18T22:31:34.590
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-softkeyboard, android-4.2-jelly-bean, searchview

SearchView 默认聚焦，但是当我尝试显示软件键盘时 - 它不会发生：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,0); 
```

但是当我点击 SearchView 时 - 它确实如此。为什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-20T01:16:09.567

固定的！

```
mSearchView.setOnQueryTextFocusChangeListener(new OnFocusChangeListener() {
                        @Override
                        public void onFocusChange(View view, boolean hasFocus) {
                            if (hasFocus) {
                                showInputMethod(view.findFocus());
                            }
                        }
                    }); 
```

和

```
private void showInputMethod(View view) {
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        if (imm != null) {
          imm.showSoftInput(view, 0);
        }
    } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-22T16:14:21.827

我遇到了仍然无法打开键盘的 SearchView 的这个问题，并且能够通过添加 200 毫秒的延迟来做到这一点：

```
 mSearchView.setOnQueryTextFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(final View view, boolean hasFocus) {
            if (hasFocus) {
                view.postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
                        imm.showSoftInput(view.findFocus(), 0);
                    }
                }, 200);
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-09-22T09:48:52.097

如果您使用的是**SearchView**：

```
<android.support.v7.widget.SearchView
      android:id="@+id/searchView"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:focusableInTouchMode="true"
      android:iconifiedByDefault="true"
      app:showAsAction="always"
      app:iconifiedByDefault="true"/> 
```

然后只需将其添加到您的**onCreate**方法中：

```
final SearchManager searchManager = (SearchManager) getSystemService(SEARCH_SERVICE);
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false);
        searchView.setFocusable(true);
        searchView.setIconified(false);
        searchView.requestFocusFromTouch(); 
```

这个对我有用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-19T00:02:21.840

怎么用`setOnFocusChangeListener`？

```
searchview.setOnFocusChangeListener(new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (hasFocus){
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,0);
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-29T16:45:39.757

**最好和最简单的方法：**

```
 android:focusable="true"
        app:iconifiedByDefault="false"
        android:focusableInTouchMode="true" 
```

在 SearchView 下将以上三行添加到您的 xml 中，看看神奇......！！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-13T19:23:41.183

尝试：

```
void focusSearchViewAndOpenOrCloseKeyboard(boolean focus) {
    searchView.setIconified(focus);
} 
```

[源代码](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v7/appcompat/src/android/support/v7/widget/SearchView.java#709)向我们展示了`SearchView`它自己处理软键盘的[关闭和打开](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v7/appcompat/src/android/support/v7/widget/SearchView.java#1010)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-30T06:28:10.120

```
 <EditText
        android:id="@+id/edt_search"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerVertical="true"
        android:background="@null"
        android:ellipsize="end"
        android:hint="@string/SERACH"
        android:imeOptions="actionSearch"
        android:inputType="textVisiblePassword"
        android:singleLine="true"
        android:textAlignment="viewStart" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-01T15:56:14.413

像这样添加`<requestFocus />`您的搜索视图

```
<EditText
            android:id="@+id/et_search"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:background="@android:color/transparent"
            android:imeOptions="actionSearch"
            android:maxLines="1"
            android:padding="8dp"
            android:singleLine="true"
            android:textAppearance="@style/TextAppearance.AppCompat.Large"
            android:textColor="@android:color/white"
            android:textColorHint="#e6e6e6">

            <requestFocus />

        </EditText> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-11-23T12:21:23.573

我用下一个简单的方法解决了这个问题。

搜索视图菜单项：

```
<item
    android:id="@+id/menu_item_search"
    android:icon="@drawable/ic_search"
    android:title="@android:string/search_go"
    app:actionViewClass="android.support.v7.widget.SearchView"
    app:showAsAction="always|collapseActionView" /> 
```

要以编程方式展开 SearchView 并显示键盘，请调用：

```
mMenuItemSearch.expandActionView();
mSearchView.setQuery("your default query test or null", true); 
```

使用不同的 showAsAction 标志进行测试。**结果，当标志：“总是**”时，键盘不显示。然而，一切都适用于标志：“ **always|collapseActionView** ”

*expandActionView() + setQuery("null 或恢复文本", true);* 可以在创建（或恢复）视图时调用以显示键盘并专注于搜索。PS：调用*mSearchView.clearFocus();* 经过这两种方法清除焦点。

# spring - spring 和 RequestFactoryServlet 的配置需要

> ID：12022718
> 
> 赞同：0
> 
> 时间：2012-08-18T22:32:08.947
> 
> 标签：spring, gwt, requestfactory

我尝试使用来自 gwt 的请求工厂和 spring

所以我像这样设置web.xml

```
 <web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>requestFactoryServlet</servlet-name>
    <servlet-class>com.google.web.bindery.requestfactory.server.RequestFactoryServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>requestFactoryServlet</servlet-name>
    <url-pattern>/gwtRequest</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>welcomeGWT.html</welcome-file>
</welcome-file-list> 
```

但有个问题

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [org.calibra.server.service.AccountService] is defined: expected single bean but found 0: 
```

我不知道这个文件是如何被调用的，在我的 applicationContext.xml 我有

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:util="http://www.springframework.org/schema/util"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">
<context:component-scan base-package="com.calibra" />
</beans> 
```

账户服务

```
public interface AccountService {

    public Account findAccount(Long id);

    public void addNewAccount(Account account);

    public List<Account> loadAllAccounts();
}

@Service
public class AccountServiceImpl implements AccountService{

    @Override
    public void addNewAccount(Account account) {
        System.out.println("account added");
    }

   @Override
   public List<Account> loadAllAccounts() {
       System.out.println("loadAllAccounts");
       return new ArrayList<Account>(); 
   } 
```

编辑：

这适用于我的加载功能，如果我添加到我的 applicationContext

```
<bean id="accountService" class="org.calibra.server.service.AccountServiceImpl"/> 
```

这条线不为服务做这项工作

```
<context:component-scan base-package="com.calibra" /> 
```

任何想法？

# php - 在 000webhost 上发送带有 php 和 google apps mx 记录的 mail()，以及一些问题

> ID：12022720
> 
> 赞同：2
> 
> 时间：2012-08-18T22:32:45.843
> 
> 标签：php, email, send, mx-record

我正在将验证部分作为我网站的帐户注册的一部分，其中将向用户电子邮件发送一条消息，其中包含验证帐户的链接。我正在使用`000webhost`托管。我读到他们的邮件服务很差，我应该得到 Google Apps 服务。所以我做到了，我将 MX 记录更改为 Google 的。

但是当我使用 mail() 函数时，它仍然是由 000webhosts 服务发送的；我测试了它向我的帐户发送消息，发件人是：

**信息**info@mydomain.com*通过* **srv19.000webhost.com**

服务不应该是谷歌的吗？我更改了 MX 记录，但不知道。

还有一个问题，如果我使用 Google Apps 创建邮件@mydomain.com，并在我的托管 CPanel 中创建另一个具有相同地址的邮件，会发生什么？

我希望你能帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:36:34.600

当您不使用 DKIM 对您的消息进行签名时，Google 会显示“通过”消息。

如果您使用 google 应用程序发送电子邮件，您可以选择使用他们的电子邮件服务器，这将被 google 识别，因此邮件将不会显示。

**编辑：**让我补充一点，让 sendmail 发送（正确！）dkim 签名的邮件并不像应该的那么容易。许多电子邮件服务器会添加额外的标头，或更改您专门设置的标头。如果您签署任何这些标头，则签名将不再匹配。

通常使用 SMTP 直接发送到适当的电子邮件服务器更容易。SendGrid、Amazon SES 或 Postmark 是可以让您的生活变得更轻松的公司 - 成本非常合理。

**编辑2：**再次阅读问题，已经很晚了：您已将 MX 记录正确设置为 Google Apps，但这是用于接收电子邮件，而不是用于发送。因此，如果您发送电子邮件，它仍将使用您自己的服务器发送。

如果您想使用 Google 的服务器，有以下几种选择：

1.  使用电子邮件框架并使用 PHP 连接到他们的 SMTP 服务器（可能需要做很多工作）。
2.  设置 sendmail 将所有电子邮件转发到 google 的 SMTP 服务器（如果您的主机支持，设置起来很麻烦）。

在大多数情况下，（1）似乎是唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:45:34.447

当您使用 mail() 时，默认情况下 PHP 使用您的网络服务器配置使用的外发邮件服务器发送消息——这几乎总是在同一主机上运行的邮件服务器。

所以，你需要做的是使用不同的功能来发送你的邮件，它将连接到谷歌的服务器而不是你自己的网络服务器。

# android - ActionBar 的 NoSuchMethodError 异常

> ID：12022725
> 
> 赞同：1
> 
> 时间：2012-08-18T22:33:23.857
> 
> 标签：android, android-actionbar

我刚开始，`ActionBar`我得到了一个`NoSuchMethodError Exception`. 这是什么原因？

这是例外

```
java.lang.NoSuchMethodError: com.example.actionbar2.MainActivity.getActionBar 
```

代码 ：

```
package com.example.actionbar2;

import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.app.Fragment;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Toast;

public class MainActivity extends Activity {
public static Context appContext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

       //ActionBar gets initiated
        ActionBar actionbar = getActionBar();
      //Tell the ActionBar we want to use Tabs.
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
      //initiating both tabs and set text to it.
        ActionBar.Tab PlayerTab = actionbar.newTab().setText("Fragment A");
        ActionBar.Tab StationsTab = actionbar.newTab().setText("Fragment B");

     //create the two fragments we want to use for display content
        Fragment PlayerFragment = new AFragment();
        Fragment StationsFragment = new BFragment();

    //set the Tab listener. Now we can listen for clicks.
        PlayerTab.setTabListener(new MyTabsListener(PlayerFragment));
        StationsTab.setTabListener(new MyTabsListener(StationsFragment));

   //add the two tabs to the actionbar
        actionbar.addTab(PlayerTab);
        actionbar.addTab(StationsTab);
    }

    public class AFragment extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            // Inflate the layout for this fragment
            return inflater.inflate(R.layout.afragment, container, false);
        }

    }

    public class BFragment extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            // Inflate the layout for this fragment
            return inflater.inflate(R.layout.afragment, container, false);
        }

    }

    class MyTabsListener implements ActionBar.TabListener {
        public Fragment fragment;

        public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
        }

        @Override
        public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {
            Toast.makeText(MainActivity.appContext, "Reselected!", Toast.LENGTH_LONG).show();

        }

        @Override
        public void onTabSelected(Tab tab, android.app.FragmentTransaction ft) {
            ft.replace(R.id.fragment_container, fragment);

        }

        @Override
        public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {
            ft.remove(fragment);

        }

        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T13:21:44.150

这发生在 android 2.2 及更低版本上，请尝试在 4.0 及更高版本上运行。你也可能不得不使用

```
 getActionBar().setHomeButtonEnabled(true);
    getActionBar().setDisplayHomeAsUpEnabled(true); 
```

# php - php mysql查询以整数为值错误

> ID：12022727
> 
> 赞同：0
> 
> 时间：2012-08-18T22:33:33.597
> 
> 标签：php, mysql, pdo

有人可以告诉我为什么第一个 sql 查询有效，但第二个抛出错误。我一直无法找出整数值导致它中断的原因。

作品：

```
$SQL = "SELECT * FROM Users WHERE userName = $uname AND pass = $pword"; 
```

错误：

```
$SQL = "SELECT * FROM Users WHERE userName = $uname AND firstLogin = 1";

Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AND firstLogin = 1' at line 1 
```

此外，如果有一些额外的启示，你必须全神贯注。

编辑使用 PDO 显示功能连接：

```
<?php
    $uname = "userNameToSearchBy";

//PDO connection string 
    $user_name = "dbUsername";
    $pass_word = "dbPass";
    $database = "sdName";
    $server = "dbServer";
    $db = new PDO("mysql:host=".$server.";dbname=".$database.";", $user_name, $pass_word);
    $stmt = $db->prepare("SELECT * FROM Users WHERE userName=? AND firstLogin=?");
    $stmt->execute(array($uname, 1));
    //Returns the rows from thge database that match the query
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
    //Shows the number of rows returned
    $message = $stmt->rowCount();   
?>
<body>
<?php echo $message ?>
</body> 
```

输出符合 sql 条件的行数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:56:26.767

删除您的`quote_smart()`函数，已弃用的 mysql_ 函数，并改用[PDO 准备语句](http://php.net/manual/en/pdo.prepared-statements.php)。这应该可以解决您的问题，同时提高代码库的安全性和质量。

有一个标准注释对此提供了更多详细信息，特别是最后查看 PDO 教程：

> 请不要将 mysql_* 函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到**[红框](http://goo.gl/GPmFd)**了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有很好的 PDO 教程](http://goo.gl/vFWnC)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:47:45.170

尝试回显您的 sql 语句

```
$SQL = "SELECT * FROM Users WHERE userName = $uname AND firstLogin = 1";
echo($SQL); 
```

可能有问题`$uname`。如果它是空的，你会得到

```
$SQL = "SELECT * FROM Users WHERE userName = AND firstLogin = 1"; 
```

有语法错误。

你也可以`$uname`像这样引用

```
$SQL = "SELECT * FROM Users WHERE userName = '$uname' AND firstLogin = 1"; 
```

如果`$uname`也有单引号，那也会导致问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T22:50:09.150

尝试引用 $uname... 或将值传递给 mysql_real_escape()

# forms - 在帖子数组中存储术语并在表单提交时返回相应的帖子

> ID：12022730
> 
> 赞同：0
> 
> 时间：2012-08-18T22:33:59.853
> 
> 标签：forms, wordpress, custom-post-type, custom-taxonomy

我有一个带有复选框的分类术语列表，这些复选框在表单上作为数组发布到名为 Post List 的页面模板。我的目标是列出带有复选框的分类术语，然后在提交表单时，显示已分配给它们的已检查术语的相应帖子，例如

```
<?php
$terms = get_terms("the_taxonomy");
$count = count($terms);
if ( $count > 0 ){?>
?>

<form action="<?php echo esc_url( get_permalink( get_page_by_title( 'Post List' ) ) ); ?>" method="post">

 <?php foreach ( $terms as $term ) {?>

 <input type="checkbox" name="terms[]" value="<?php echo $term->name ?>" /><?php echo $term->       
 name ?> <br />

 <?php }?>

 <input type="submit" value="Submit" />
</form> 
```

当我在帖子列表页面 (post-list.php) 中打印数组时，我确实得到了返回的术语，所以我可以确认它是否有效

```
<?php
/*
Template Name: Post List 
*/
?>

<?php print_r($_POST['terms']);?>

<!---OUTPUT--->
Array ( [0] => term1 [1] => term2 [2] => term3 [3] => term4 ) 
```

如何将返回的术语数组与自定义帖子类型的存储术语进行比较，并根据选择和提交的术语返回帖子？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:21:31.260

从他写的这个链接[http://wordpress.org/support/topic/exclude-posts-](http://wordpress.org/support/topic/exclude-posts-containing-a-particular-tag) contains-a-particular-tag中阅读stiwdio的问题行

```
$term = get_term_by('slug','helen', 'post_tag'); 
```

so you need to pass comma separated terms like this which you are getting on post list template. You can use implode function to get comma separated list like this

```
$var = "'".implode("','",$_POST['terms'])."'";
echo $var; //OUTPUT - 'term1','term2','term3','term4' 
```

# python - 从 Python 字典中的随机键中选择一个随机值

> ID：12022732
> 
> 赞同：0
> 
> 时间：2012-08-18T22:34:21.037
> 
> 标签：python, function, dictionary, python-2.7

正如我之前所说，我正在尝试进行多项选择测验。测验将随机抓取 3 个键作为“答案”。然后测验将采用 3 个选定键的值并将其用作“问题”。我正在尝试使用 random.sample 作为参数从随机选择的键值中选择一个值。我的代码如下：

```
import random

word_drills = {'class': 'Tell Python to make a new kind of thing.',
               'object': 'Two meanings: the most basic kind of thing, and any instance of some thing.',
               'instance': 'What you get when you tell Python to create a class.',
               'def': 'How you define a function inside a class.',
               'self': 'Inside the functions in a class, self is a variable for the instance/object being accessed.',
               'inheritance': 'The concept that one class can inherit traits from another class, much like you and your parents.',
               'composition': 'The concept that a class can be composed of other classes as parts, much like how a car has wheels.',
               'attribute': 'A property classes have that are from composition and are usually variables.',
               'is-a': 'A phrase to say that something inherits from another, as in a Salmon *** Fish',
               'has-a': 'A phrase to say that something is composed of other things or has a trait, as in a Salmon *** mouth.'}

def nodupchoice():
    key1, key2, key3 = random.sample(word_drills, 3)
    print "%s, %s, %s" % (key1, key2, key3)
    #print word_drills.random.sample[key1, key2, key3]
    #print word_drills[key1]
    #print word_drills[random.sample(key1, key2, key3)]

nodupchoice() 
```

你会注意到我已经注释掉了我认为实际上会给我想要的结果的东西。不幸的是，每个人都没有。任何指导帮助将不胜感激。再次感谢。

***更新***

所以我已经合并了提供的新信息。再次感谢你。这就是我想出的：

```
import random

word_drills = {'class': 'Tell Python to make a new kind of thing.',
               'object': 'Two meanings: the most basic kind of thing, and any instance of some thing.',
               'instance': 'What you get when you tell Python to create a class.',
               'def': 'How you define a function inside a class.',
               'self': 'Inside the functions in a class, self is a variable for the instance/object being accessed.',
               'inheritance': 'The concept that one class can inherit traits from another class, much like you and your parents.',
               'composition': 'The concept that a class can be composed of other classes as parts, much like how a car has wheels.',
               'attribute': 'A property classes have that are from composition and are usually variables.',
               'is-a': 'A phrase to say that something inherits from another, as in a Salmon *** Fish',
               'has-a': 'A phrase to say that something is composed of other things or has a trait, as in a Salmon *** mouth.'}

def nodupchoice():
    # For loop that creates a list named keys. It grabs 3 random keys from the dictionary word_drills
    keys = [x for x in random.sample(word_drills, 3)]
    # User is presented with a question. A value from the previous randomly selected keys is selected as the 'question'
    print "Question: ", word_drills[random.choice(keys)]
    # Set the variables key1, key2, & key3 to the 3 keys in the list 'keys'
    key1, key2, key3 = keys[0], keys[1], keys[2]
    # User is presented with 3 choices.
    print "\n\n(a)%s   (b)%s   (c)%s" % (key1, key2, key3)
    selection = raw_input("> ")
    print selection

nodupchoice() 
```

我现在试图破译的问题是：如何根据字典 word_drills 中的内容检查用户选择。我正计划使用 if/else。如果它是正确的，它会通知你，否则你是不正确的。但是不知道如何解决这个问题。只是想再次感谢大家的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:38:42.533

我想你想做的是这样的：

```
print word_drills[random.choice([key1, key2, key3])] 
```

这将打印属于随机采样键之一的值之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:45:23.447

您可能想尝试使用[random.choice()](http://docs.python.org/library/random.html#random.choice)来选择密钥：

```
keys = random.sample(word_drills, 3)
print keys
print word_drills[random.choice(keys)] 
```

输出：

```
['has-a', 'attribute', 'class']
A phrase to say that something is composed of other things or has a trait, as in a Salmon *** mouth. 
```

# c++ - 如何在 opencv 代码中包含 Openframeworks 标头？

> ID：12022735
> 
> 赞同：0
> 
> 时间：2012-08-18T22:35:15.360
> 
> 标签：c++, opencv, makefile, openframeworks

这是一个有点菜鸟的问题。我正在尝试在 OpenFrameworks 中显示 opencv 图像。我没有使用代码块或任何特定的 IDE。我尝试将头文件路径包含到 makefile 中，但无法成功运行代码。

例如，我有一个测试程序，例如

```
#include <stdio.h>
#include <opencv2/opencv.hpp>
#include <stdlib.h>
#include <iostream>

#include "ofMain.h"
#include "testApp.h"
#include "ofAppGlutWindow.h"

using namespace std;
using namespace cv;

int main(int argc, char** argv)
{    
    ofAppGlutWindow window;
    ofSetupOpenGL(&amp;window, 300, 300, OF_WINDOW);        
    ofRunApp( new testApp());

} 
```

makefile 中的标志如下所示

```
OF_FLAGS =  -L../../../libs/openFrameworks/ -L../../../libs/openFrameworks/app

INCL     = -I/usr/local/include 

LIBS     = -L/usr/local/lib -lopencv_core -lopencv_highgui 
```

如何将 ofMain.h、testApp.h 和 ofAppGlutWindow.h 路径准确地包含到 makefile 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T22:23:13.880

如果您只想将 OpenCV 与 openFrameworks 一起使用并且不想做一些超级花哨的自定义东西，我建议您只查看与 openFrameworks 捆绑在一起的 open cv 示例。只需查看`<of folder>/examples/addons`文件夹并尝试编译`opencvExample`或`opencvHaarFinderExample`. 如果文件夹中没有 Makefile，请尝试使用 ofProjectGenerator 生成它们。如果一切设置正确，则无需手动更改 config.make 或示例的 Makefile。如果这些示例对您来说是正确的方向，请复制它们，重命名它们并以此开始您自己的项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-19T21:09:47.780

确保 ofxOpenCV 的 libs 文件夹包含在 Build Settings > Search Paths > Header Search Paths 中。

[![在此处输入图像描述](../Images/56eacb9155f6354f8632222b7fa462ef.png)](https://i.stack.imgur.com/TbSpj.png)

如果不明显，请单击左上角的 XCode 项目，然后在靠近顶部的水平菜单中，单击**Build Settings**并向下滚动到**Search Paths**。在 Header Search Paths 的值字段内双击并添加`../../../addons/ofxOpenCV/libs`. 最后，将右侧的下拉菜单设置为递归。

# xcode - Xcode 管理器在选择代码签名身份后挂起

> ID：12022737
> 
> 赞同：1
> 
> 时间：2012-08-18T22:35:27.713
> 
> 标签：xcode, xcode4

我正在尝试通过 Testflight 分发 ipa，并且在使用 Xcode (4.3) 时遇到了真正的问题。

存档似乎可以构建，但是当我在组织者中完成企业分发过程时，在选择代码签名身份后（我正在使用以前工作的设置）Xcode 只是挂起“处理”循环动画运行。

任何人都知道可能导致这种情况的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:14:40.477

你重新启动了你的 xcode/mac 吗？大多数情况下，此类问题都可以通过此拇指规则解决。

解决方法（不是解决方案）如果这不能解决它，假设构建在您的设备上运行并且只有归档是问题，将该构建（通常在 XCode Project Navigator 的产品文件夹中）拖放到您的设备中（通过iTunes），然后复制为该应用程序创建的 ipa 并将其提交给 TestFlight。

# apache - Apache htaccess URL 重写

> ID：12022739
> 
> 赞同：0
> 
> 时间：2012-08-18T22:35:50.090
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个像 - `http://www.mydomain.com/website/dev/main/html/about_us.html`

我怎样才能将它重写为简单的`http://www.mydomain.com/about`？

我在互联网和 SO 上看到了许多 URL 重写的示例，但仍然无法弄清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:40:43.827

在你的 htaccess 中试试这个，确保 mod_rewrite 在你的服务器上被激活：

```
Options +FollowSymLinks  
RewriteEngine On  

RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  

RewriteRule ^about$ ./website/dev/main/html/about_us.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:41:55.310

我确信这是对现有问题的重复。确保您的文件中有：

```
RewriteEngine On
RewriteBase /
RewriteRule ^about$ website/dev/main/html/about_us.html 
```

你也可以通过这种方式传递变量：

```
RewriteRule ^about/(.+)/(.+)$ about/index.php?q=$1&p=$2 
```

哪里`about/12/23`相等`about/index.php?q=12&p=23`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T22:42:09.467

根据 Apache [Rewrite Guide](http://httpd.apache.org/docs/2.2/rewrite/remapping.html)，您的 .htaccess 文件应包含：

```
RewriteEngine on
RewriteRule ^/about$ ./website/dev/main/html/about_us.html [R] 
```

这会打开重写引擎（如果还没有的话），然后设置一个规则。与正则表达式匹配的域之后的任何 URL`^/about$`都将被透明地重定向到`/website/dev/main/html/about_us.html`

# php - Node.js 和 PHP

> ID：12022741
> 
> 赞同：0
> 
> 时间：2012-08-18T22:36:02.967
> 
> 标签：php, node.js

我很难弄清楚这一点。我正在构建一个游戏，我希望使用 Node.js 对游戏进行编码（部分是为了学习，部分是因为它看起来是正确的）。但是该游戏也将有一个社区和其他使用 PHP 的东西。

所以我的问题是。如何使用 PHP 与 Node.js 对话？假设用户登录并进入实际游戏（玩家之间是实时的），我如何将用户信息提供给 Node.js？

或者我应该简单地使用 Node.js 编写所有代码？我只想被推向正确的方向，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:38:24.020

我不确定您尝试了什么，但由于您的问题非常广泛，请尝试从这里开始：http: [//bergie.iki.fi/blog/dnode-make_php_and_node-js_talk_to_each_other/](http://bergie.iki.fi/blog/dnode-make_php_and_node-js_talk_to_each_other/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:58:47.407

您可以尝试使用 JooDee，这是一个节点网络服务器，它允许您在网页中嵌入服务器端 javascript。如果您熟悉 Node 和 PHP/ASP，那么创建页面是轻而易举的事。下面是一个页面的样例，如下所示：

```
<!DOCTYPE html>
<html>
<:  //server side code in here
    var os = require('os');
    var hostname = os.hostname();
:>
<body>
    <div>Your hostname is <::hostname:></div>
</body>
</html> 
```

使用 JooDee 还允许您通过将属性附加到“客户端”对象服务器端并访问客户端 JavaScript 中生成的“客户端”对象，毫不费力地向客户端公开服务器 JavaScript 变量。

[https://github.com/BigIroh/JooDee](https://github.com/BigIroh/JooDee)

# ios - 游戏中心提交不起作用

> ID：12022747
> 
> 赞同：0
> 
> 时间：2012-08-18T22:37:16.390
> 
> 标签：ios, submit, game-center

我有一个应用程序，正在尝试向游戏中心提交分数。这是我的代码：

```
- (IBAction) submitScore{

NSString *show = [[NSString alloc] initWithFormat:@"Note: Scores may take some time to update"];
self.note.text = show;

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Submitted"
                                                message:@"Your score has been submitted to the Gamecenter leaderboard"
                                               delegate:nil
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles: nil];
[alert show];

array = [NSMutableArray arrayWithContentsOfFile:Path];

NSString *s = [[NSNumber numberWithInteger:[array count]] stringValue];
NSString *denom = [NSString stringWithFormat: @"%d", 15];;
double resultInNum;
double sdouble = [s doubleValue];
double denomdouble = [denom doubleValue];

resultInNum = sdouble/denomdouble * 100;

if(resultInNum > 0)
{
    self.currentLeaderBoard = kLeaderboardID;

    [self.gameCenterManager reportScore: resultInNum forCategory: self.currentLeaderBoard];
    Submit.enabled = NO;

}
array = [NSMutableArray arrayWithContentsOfFile:Path];

[array writeToFile:Path atomically:YES];
NSLog(@"Count: %i", [array count]); 
```

} 但是，当我尝试这样做时，它不会提交给排行榜。我在调试器中没有收到任何错误，并且它曾经可以工作，直到我添加了多个排行榜。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:24:01.467

分数值必须是 int64_t。

而且我不明白您为什么使用 NSStrings 而不是直接分配值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T13:25:01.093

只需确保您使用正确的代码来提交分数即可。这是我非常喜欢的一种方式。即使您会收到警告，因为他们不希望您在 iOS 7 中使用它，但它仍然有效。如果它不起作用，请告诉我。

`(IBAction)submitscoretogamecenter{`

```
GKLocalPlayer *localplayer = [GKLocalPlayer localPlayer];
[localplayer authenticateWithCompletionHandler:^(NSError *error) {

}];
//This is the same category id you set in your itunes connect GameCenter LeaderBoard
GKScore *myScoreValue = [[[GKScore alloc] initWithCategory:@"insertCategory"] autorelease];
myScoreValue.value = scoreInt;

[myScoreValue reportScoreWithCompletionHandler:^(NSError *error){

    //insert what happens after it's posted 

}];
[self checkAchievements]; 
```

`}`

# javascript - jQuery 无法从 PHP 脚本读取 JSON 响应

> ID：12022749
> 
> 赞同：1
> 
> 时间：2012-08-18T22:38:00.053
> 
> 标签：javascript, jquery, ruby-on-rails, json

在我的表单中，我想对两个字段做一些事情：

“website_domain”和“website_ip_address”

我正在尝试使用 jQuery/JSON 调用 PHP 脚本，将 website_domain 传递给它，并接收包含该网站 IP 地址的 JSON。

## 问题/症状描述：

它部分工作：在模糊时，它获取 PHP 脚本的 url。我可以在萤火虫中看到很多。我得到一个 200 好的。根据 JSONLint，PHP 脚本的输出是有效的 JSON：

{"field":"website_ip_address","value":"74.125.225.70"}

但在 Firebug 中，我没有 JSON 选项卡。我只有参数和标题选项卡。甚至没有响应选项卡。

不用说， website_ip_address 字段也没有填充我应该从 PHP 脚本的 JSON 输出中获取的数据。

## 我的 PHP 脚本：

需要注意的是，目前，这个 PHP 脚本与我的应用程序位于不同的域中。也许我的整个问题是跨域？

```
<?php 
    $domain = $_GET["domain_name"];
    $ip = gethostbyname($domain);
    // echo $ip;
    $json = array(
        'field' => 'website_ip_address',
        'value' => $ip,
        );
    header('Content-Type: text/plain');
    echo json_encode($json );
?> 
```

## 我的 jQuery/JSON 脚本：

请注意，这是在 Ruby On Rails 应用程序视图中编写的。

```
:javascript
  $("#website_domain").bind("blur", function(e){
     $.getJSON("http://exampledomain.com/temp_getIP.php?domain_name=" +$("#website_domain").val(),
        function(data){
          $('#website_ip_address').val(data);
        });
}); 
```

我真的希望这不仅仅是我的语法错误。根据我在 StackOverflow 上找到的答案，我已经写/重写了 2 天，但无济于事。我只是在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:48:06.300

问题可能出在不同的域上。我以前也有过这样的。尝试在php中添加`header("Access-Control-Allow-Origin: *")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T22:52:34.043

您当前正在尝试将 JS 对象（由解析的 JSON 响应形成）输出到该字段。您需要从其中输出一个*值*。所以不是：

```
$('#website_ip_address').val(data); //data is an object, not a string 
```

但

```
$('#website_ip_address').val(data.someValue); //output a property of the object 
```

使用您的代码，我希望该字段用对象的字符串表示形式填充，即`[object Object]`. 你没有提到这一点，所以我想知道a）你的成功功能是否正在触发（检查这个 - 将a插入`console.log`其中）；b) 你的 jQ 选择器是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T22:47:16.540

将您的 jQuery 代码放入准备好的文档中，例如：`$(function(){ });`

```
:javascript
$(function() {
    $("#website_domain").bind("blur", function(e){
        $.getJSON("http://exampledomain.com/temp_getIP.php?domain_name="+$("#website_domain").val(),
           function(data){
               $('#website_ip_address').val(data);
           });
        });
    });
}); 
```

你有一个缺失的结局`})`

# java - 如何“取消绘制”图像

> ID：12022754
> 
> 赞同：0
> 
> 时间：2012-08-18T22:38:55.453
> 
> 标签：java, image, drawing

我正在用Java制作一个游戏，我有它，当玩家按下左箭头按钮时，三个图像一个接一个地被绘制出来。但是当绘制第三张图像时，您仍然可以看到它之前绘制的图像（我旋转了图像以使其看起来更逼真）。无论如何要“取消绘制”图像吗？我做了一些研究，没有发现任何具体的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:54:24.710

不，您不能取消绘制图像。听起来图像不是完全不透明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:07:15.860

不要成为一个过于复杂的瘾君子，而是使用 OpenGL 在四边形上绘制它们怎么样。这样您就可以更轻松地隐藏、显示、旋转、动画、加速等。这一切都将比使用 Swing/AWT 快很多。[JOGL](http://jogamp.org/jogl/www/) library + [NeHe Tutorials](http://nehe.gamedev.net/)将快速向您展示如何实现这一点（真的，您只需要[this](http://nehe.gamedev.net/tutorial/lessons_01__05/22004/)和[this](http://nehe.gamedev.net/tutorial/lessons_06__10/17010/)）。或者，如果您想更简单、更便携，请使用[Unity 。](http://unity3d.com/support/resources/tutorials/)

# c++ - 输出堆损坏

> ID：12022756
> 
> 赞同：0
> 
> 时间：2012-08-18T22:39:21.473
> 
> 标签：c++

我正在尝试从一个类中打印一些数据，并且它打印得很好，直到他达到整数然后抛出一个堆损坏错误。谁能向我解释为什么会这样做？

```
void Skill::Display(ostream& out){
    char* myName = getName();
    char* myDescription = getDescription();
    int myLevel = getLevel();

    out << " - " << myName << " -- " << myDescription << "[Lvl: ";

    out << myLevel << "]" << endl; //Everything up to here is fine
}//breakpoint here and it gives me heap error. 
```

我不明白为什么打印 int 会导致堆错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:44:25.730

我认为错误更有可能是由 myName 或 myDescription 中的缓冲区溢出引起的。它们是如何计算的？您是否记得 null 终止并考虑缓冲区大小？

请记住，检测到错误的点不一定是错误的起源点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:45:19.373

错误发生在您的 getName() 或 getDescription() 方法中。检查初始化问题和空指针。另请参阅@Atimony 的建议。不正确终止的字符串也会导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T23:08:15.083

堆损坏的问题在于，检测到损坏的地方通常与实际发生损坏的地方无关。腐败可能在很久以前以不同的方法在不同的组件中发生过。

听起来你有一个复制品。在这种情况下，找到违规代码的最简单方法是在 Windows 上启用[Paged Heap](http://msdn.microsoft.com/en-us/library/windows/hardware/ff549561%28v=vs.85%29.aspx) ，如果在 Unix上启用[Electric Fence 。](http://elinux.org/Electric_Fence)这将在发生损坏的确切位置破坏您的可执行文件。

# iphone - 使用模式过滤数组

> ID：12022761
> 
> 赞同：2
> 
> 时间：2012-08-18T22:40:01.280
> 
> 标签：iphone, objective-c, ios, design-patterns

我有一个单词数组（所有单词都在 NSMutableArray 中）。我需要过滤单词，如下所示。

？？？- 任何四个字母的单词 ma?t* - 任何以字母“ma”开头且第四个字母为“t”的单词。 *z* - 任何包含字母“z”的单词？n？t？- 任何五个字母的单词，“n”作为第二个字母，“t”作为第四个字母。*s*b* - 任何包含字母“s”和其余字母中的字母“b”的单词。mouth - 如果当前单词列表 t*s 中存在单词“moth”，将返回它？- 任何以字母“t”开头的单词，长度至少为三个字母，并且单词的倒数第二个字母为“s”。* - 返回单词列表中的所有单词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:44:14.793

您可以使用以下代码使用模式进行过滤

```
-(NSMutableArray *)searchByPattern:(NSString *)patternString inputArray:(NSMutableArray *)inputArray
{
    NSLog(@"orginal Array count=%d",[inputArray count]);
    NSString *match=[NSString stringWithFormat:@"%@",patternString];
    NSLog(@"match = %@",match);
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF like %@",match];    
    NSMutableArray *mArrayFiltered = [[inputArray filteredArrayUsingPredicate:predicate] mutableCopy];
    //NSLog(@"mArrayFiltered = %@ count = %d",mArrayFiltered,[mArrayFiltered count]);
    return mArrayFiltered;
} 
```

# mysql - MySQL Replace() 函数没有为非拉丁字符提供正确的输出

> ID：12022765
> 
> 赞同：1
> 
> 时间：2012-08-18T22:41:00.780
> 
> 标签：mysql, character-encoding, replace

在 MySQL 文档中，字符串函数`REPLACE()`被称为“多字节安全”。我在使用俄语字符集时遇到问题。

```
 SELECT REPLACE('оофо', 'о', '*'); -- "**ф*", everything is correct
    SELECT REPLACE('оофоо', 'о', '*'); -- "**фоо", NOT CORRECT 
```

我应该在哪里寻找问题的根源？

附加信息：

> ```
> OS - Windows 7 (Russian),
> SELECT CHARSET('оофоо'); -- "utf8",
> SELECT LENGTH('оофоо'); -- "6". 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:08:09.700

1.  确保数据库字符集/联盟是 UTF-8

2.  在您插入这些俄语字符（表单 textarea ）的页面上，通过设置确保编码为 UTF-8 `Content-Type to text/html; charset=utf-8`。直接在表单输入中输入俄语文本。

3.  在处理此表单（将其插入数据库）的处理页面上，请确保在插入数据**之前**`SET NAMES utf8`将其存储为 UTF-8 ，预先在单独的查询中进行。

***   当您在视图中呈现数据库中的内容时，请确保`Content-Type is text/html; charset=utf-8`.

    *   确保内容类型**不是**windows-1251 或 iso-8859-1/latin1。确保数据库字符集/联盟不是 ISO-8859-1/Latin1。** 

 *** * *

有关更多信息，请参阅：[修复编码](https://stackoverflow.com/questions/3823278/fixing-encodings)**

# python - 如何稳定获取初始绝对工作目录

> ID：12022766
> 
> 赞同：1
> 
> 时间：2012-08-18T22:41:15.527
> 
> 标签：python, cross-platform, working-directory

[不可原谅的是，我原来的帖子在第二段中省略了“不”（现在在下面强调）这个词。]

Python 是否提供了一种稳定的方式来访问当前进程的*初始工作目录？*

（请注意，该解决方案可能***不会***假设与程序启动相关的执行时间。）

我能想到的唯一方法是：

```
import os
def getiwd():
    return os.environ['PWD'] 
```

...这是相当蹩脚的，即使人们抛开它在 Windows 下的可行性问题，因为代码的任何其他部分（例如客户端代码或由它加载的其他模块）都可以自由修改`os.environ['PWD']`. IOW，它是“不稳定的”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:49:55.353

您应该获取“初始”工作目录的方法是最初获取它并将其保存在其他地方。为此，除了`os.getcwd()`您可能知道的之外，不需要任何东西。

语言没有理由以任何其他方式提供它 - 当前的工作目录应该是可以更改的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T22:45:49.140

对于您的启动工作目录（作为脚本的第一行之一）：

```
ini_path = os.getcwd() 
```

对于脚本的路径，请使用[sys.path[0]](http://docs.python.org/library/sys.html#sys.path)。

测试代码（请在家尝试）：

```
import sys, os, inspect
ini_path = os.getcwd()

def ppaths(d=''):
    print('sys.path[0]:     {}'.format(sys.path[0]))
    print('ini_path:        {}'.format(ini_path))
    print('os.getcwd:       {}'.format(os.getcwd())) 
    print('inspect.getfile: {}'.format(inspect.getfile(inspect.currentframe())))
    print('os.dirfile:      {}'.format(
               os.path.dirname(inspect.getfile(inspect.currentframe()))))
    if d:
        print('==== Changing to "{}" '.format(d))
        os.chdir(d)

print()
ppaths('/')
ppaths('Users')
ppaths() 
```

在我的系统上（从编辑器内部运行），打印：

```
sys.path[0]:     /private/var/folders/00/kbqj5nt54m99z5gyffy8fksm0000gp/T/Cleanup At Startup
ini_path:        /Users/andrew
os.getcwd:       /Users/andrew
inspect.getfile: /private/var/folders/00/kbqj5nt54m99z5gyffy8fksm0000gp/T/Cleanup At Startup/untitled text 3-367027656.416
os.dirfile:      /private/var/folders/00/kbqj5nt54m99z5gyffy8fksm0000gp/T/Cleanup At Startup
==== Changing to "/" 
sys.path[0]:     /private/var/folders/00/kbqj5nt54m99z5gyffy8fksm0000gp/T/Cleanup At Startup
ini_path:        /Users/andrew
os.getcwd:       /
inspect.getfile: /private/var/folders/00/kbqj5nt54m99z5gyffy8fksm0000gp/T/Cleanup At Startup/untitled text 3-367027656.416
os.dirfile:      /private/var/folders/00/kbqj5nt54m99z5gyffy8fksm0000gp/T/Cleanup At Startup
==== Changing to "Users" 
sys.path[0]:     /private/var/folders/00/kbqj5nt54m99z5gyffy8fksm0000gp/T/Cleanup At Startup
ini_path:        /Users/andrew
os.getcwd:       /Users
inspect.getfile: /private/var/folders/00/kbqj5nt54m99z5gyffy8fksm0000gp/T/Cleanup At Startup/untitled text 3-367027656.416
os.dirfile:      /private/var/folders/00/kbqj5nt54m99z5gyffy8fksm0000gp/T/Cleanup At Startup 
```

现在，从 Bash 运行它：

```
kitchen:SO andrew$ pwd
/Users/andrew/bin/SO
kitchen:SO andrew$ ls ins.py
ins.py
kitchen:SO andrew$ ./ins.py

sys.path[0]:     /Users/andrew/bin/SO
ini_path:        /Users/andrew/bin/SO
os.getcwd:       /Users/andrew/bin/SO
inspect.getfile: ./ins.py
os.dirfile:      .
==== Changing to "/" 
sys.path[0]:     /Users/andrew/bin/SO
ini_path:        /Users/andrew/bin/SO
os.getcwd:       /
inspect.getfile: ./ins.py
os.dirfile:      .
==== Changing to "Users" 
sys.path[0]:     /Users/andrew/bin/SO
ini_path:        /Users/andrew/bin/SO
os.getcwd:       /Users
inspect.getfile: ./ins.py
os.dirfile:      .
kitchen:SO andrew$ 
```

从 Bash 中的不同目录运行：

```
kitchen:SO andrew$ cd ..
kitchen:bin andrew$ ./SO/ins.py

sys.path[0]:     /Users/andrew/bin/SO
ini_path:        /Users/andrew/bin
os.getcwd:       /Users/andrew/bin
inspect.getfile: ./SO/ins.py
os.dirfile:      ./SO
==== Changing to "/" 
sys.path[0]:     /Users/andrew/bin/SO
ini_path:        /Users/andrew/bin
os.getcwd:       /
inspect.getfile: ./SO/ins.py
os.dirfile:      ./SO
==== Changing to "Users" 
sys.path[0]:     /Users/andrew/bin/SO
ini_path:        /Users/andrew/bin
os.getcwd:       /Users
inspect.getfile: ./SO/ins.py
os.dirfile:      ./SO 
```

在所有情况下，`sys.path[0]`指向启动脚本的绝对路径。

为了`os.getcwd()`开始工作，您可以看到您还必须解析脚本名称的前导路径 - 更多工作......

更多在[这个 SO 帖子](https://stackoverflow.com/questions/50499/in-python-how-do-i-get-the-path-and-name-of-the-file-that-is-currently-executin)中。

# javascript - Chrome，Safari 在从 localStorage 读取时挂起，而 Firefox 很好？

> ID：12022768
> 
> 赞同：0
> 
> 时间：2012-08-18T22:41:34.010
> 
> 标签：javascript, jquery, firefox, google-chrome, safari

`Queue`我有以下代码，单击时会触发

```
$('#queue').click(function(){
        $("#feature").load("templates/queue.html", function(){
            var template = $('queue_item').clone();
            if (localStorage['queue'] == null) {
                $('.queue_list').append('<p>You have not added any video to the queue yet</p>');
            } else {
                var queue_list = JSON.parse(localStorage['queue']);
                for (var i = 0; i < queue_list.length; i++) {
                    console.log(queue_list[i]);
                    var item = fill_queue_item(queue_list[i]);
                    $('.queue_list').append(item).fadeIn('slow');
                }
            }
        });
    }); 
```

*   根据`items`添加到队列中的用户数量，此代码创建一个节点并插入`queue_list`
*   当我在 Firfox 上进行测试时，一切都很好，但 Safari 和 Chrome 几乎无法执行相同的操作

**问题** - 我怎样才能让 Chrome 和 Safari 像 Firefox 一样快乐，让他们做事快？

**更新**

```
function fill_queue_item(data) {
    var template = $('.queue_item').clone();
    template.removeClass('hide-item');
    template.find('img').attr('src', data.thumbnail);
    template.find('.title').html(data.title);
    template.attr('id', data.url);
    template.addClass('view-item');
    return template;
} 
```

可以包含任意数量的`queue`项目，但对于 Chrome/Safari，它不超过 20

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:46:09.490

我建议改变：

```
var template = $('.queue_item').clone(); 
```

对此：

```
var template = $('.queue_item').first().clone(); 
```

你现在拥有它的方式，你正在克隆每一个`.queue_item`，所以当你添加越来越多时，你正在创建许多不必要的克隆，而你真的只是想每次创建一个新的克隆用作模板。如果您每次对先前的结果执行 20 次此操作，您最终可能`2^20`会得到超过一百万个对象的克隆元素。

# wordpress - Woocommerce 愿望清单插件破坏 cookie/缓存？

> ID：12022770
> 
> 赞同：0
> 
> 时间：2012-08-18T22:41:44.887
> 
> 标签：wordpress, woocommerce

我现在正在开发一个 woocommerce 网站。我有一个从 Code Canyone 购买的愿望清单插件 - [http://codecanyon.net/item/dvin-woocommerce-wishlist-wp-plugin/1995206](http://codecanyon.net/item/dvin-woocommerce-wishlist-wp-plugin/1995206)

问题是当我激活愿望清单插件时，我不再能够将多个项目添加到购物车中。感觉插件以某种方式破坏了缓存或 cookie，并导致每次单击“添加到购物车”时它都会重置

我发现即使在没有修改主题或修改插件的情况下上传和运行，它仍然无法正常工作。我在网上查过，但似乎没有其他人有这个问题。所以一定是我？

在启用调试模式的情况下，我没有收到有关缓存或插件的任何错误。（不过，我确实收到了大量 cForms 错误。不知道为什么，但那是另一篇文章）。

看看 - [http://www.shultzilla.com/admin/shop/sample-product/](http://www.shultzilla.com/admin/shop/sample-product/)

有没有人遇到过这个问题？这是特定问题的症状吗？我不知道为什么这只会发生在我身上，而不会发生在其他人身上。

如果我停用该插件，它工作正常，所以我很确定它与这个插件有关。我试图联系开发人员，但没有收到他的回复，Code Canyon 说他们不负责任。

提前感谢您的帮助，你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T03:20:36.177

我设法联系了开发商。

原来有一个 session_start() 函数在两个文件中被调用。

他已经解决了这个问题，现在它可以工作了。

# c# - 随机算法的问题

> ID：12022771
> 
> 赞同：-2
> 
> 时间：2012-08-18T22:41:50.690
> 
> 标签：c#, random

在 C# ConsoleApp 中，我创建了一个方法，该方法将根据您给它的可能性参数返回 true 或 false，所以如果您给它 5，那么您将得到 50%，对于 false，给9，你有 90% 的机会是真的，10% 的机会是假的。就是这样：（我写这篇文章是作为一个教程，我在那个 balls-ThatGotNumbers-inside-a-box 中解释它有点清楚，因此变量 BallNumber 的名称）

```
static public bool TrueOrFalse(int possiblity)
{
      Random rand = new Random();
      int BallNumber = rand.Next(0, 10); // BallNumber values are from the interval: [0, 10[  (0, 1, 2, ....9)
      if (possiblity <= 0)
        return false;
      if (possiblity == 1)
        return (BallNumber == 0); // any number you like.
      if (possiblity == 2)
        return (BallNumber == 0 || BallNumber == 1); // any two numbers, cuz there's a 20% chance that you might get a ball from the box that has either number n OR m.
      if (possiblity == 3)
        return (BallNumber == 0 || BallNumber == 1 || BallNumber == 2); // any three numbers ... etc you got the point.
      if (possiblity == 4)
        return (BallNumber == 0 || BallNumber == 1 || BallNumber == 2 || BallNumber == 3);
      if (possiblity == 5)
        return (BallNumber == 0 || BallNumber == 1 || BallNumber == 2 || BallNumber == 3 || BallNumber == 4);
      if (possiblity == 6)
        return (BallNumber == 0 || BallNumber == 1 || BallNumber == 2 || BallNumber == 3 || BallNumber == 4 || BallNumber == 5);
      if (possiblity == 7)
        return (BallNumber == 0 || BallNumber == 1 || BallNumber == 2 || BallNumber == 3 || BallNumber == 4 || BallNumber == 5 || BallNumber == 6);
      if (possiblity == 8)
        return (BallNumber == 0 || BallNumber == 1 || BallNumber == 2 || BallNumber == 3 || BallNumber == 4 || BallNumber == 5 || BallNumber == 6 || BallNumber == 7);
      if (possiblity == 9)
        return (BallNumber == 0 || BallNumber == 1 || BallNumber == 2 || BallNumber == 3 || BallNumber == 4 || BallNumber == 5 || BallNumber == 6 || BallNumber == 7 || BallNumber == 8);

      return true; // if you give it a number higher than 10, it will return true ..
} 
```

现在该方法运行良好，但我想证明它。所以我想出了这个主意：

```
int TruePossiblity = 0, FalsePossiblity = 0;
for (int i = 0; i < 100; i++)
{
  bool _TRUE = TrueOrFalse(5);
  if (_TRUE) TruePossiblity  += 1;
  else FalsePossiblity  += 1;
}
Console.WriteLine(x);
Console.WriteLine(y); 
```

现在，应该打印的是：

```
50
50 
```

问题是它要么打印：

```
100
0 
```

或者

```
0
100 
```

所以，我调试了它，一步一步地走过它，惊讶地发现它最终打印出来了：

```
50
50 
```

`System.Threading.Thread.Sleep(1);` 我在分配变量后立即插入`_TRUE` 我得到了更好的结果，但不是那么好，我增加的时间越多，我得到的结果就越好（更接近它应该打印的结果，即 50,50）。当我使用 200 毫秒时，我实际上得到了所需的结果 50,50 ！

现在，只有一个线程在运行，它是主线程，所以线程之间没有竞争，所以事情可能会搞砸并产生那些不需要的结果。

怎么回事？有人可以解释一下吗？我可以避免使用 Sleep 吗？

感谢您提供的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T22:43:20.687

以[`Random`](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)当前时间为实例播种。因为循环执行太快，它使用相同的时间，因此您总是得到相同的“随机”值。

`Random`您应该将其作为参数传递或在类中使用成员变量，而不是在方法本身中创建。

例如：

```
static Random rand = new Random();

static public bool TrueOrFalse(int possiblity)
{
      int BallNumber = rand.Next(0, 10); // BallNumber values are from the interval: [0, 10[  (0, 1, 2, ....9)
      // ...

      return true; // if you give it a number higher than 10, it will return true ..
} 
```

来自[MSDN 的](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)评论：

> **为不同的 Random 对象提供相同的种子值会导致每个实例产生相同的随机数序列**。
> 
> 如果您的应用程序需要不同的随机数序列，请使用不同的种子值重复调用此构造函数。产生唯一种子值的一种方法是使其具有时间依赖性。例如，从系统时钟派生种子值。但是，系统时钟可能没有足够的分辨率来为这个构造函数的不同调用提供不同的种子值。这导致随机数生成器生成相同的伪随机数序列，如以下示例中的前两个 Random 对象所示。为防止这种情况，请应用一种算法来区分每次调用中的种子值，或调用 Thread.Sleep 方法以确保为每个构造函数提供不同的种子值。

# cakephp - 更新身份验证会话

> ID：12022773
> 
> 赞同：0
> 
> 时间：2012-08-18T22:42:00.927
> 
> 标签：cakephp, authentication

如何更新存储在`auth`会话中的用户信息？无需注销并再次登录。

我认为这个功能会做到这一点..但它是**最佳实践**吗？

```
function update($field, $value){
    $this->Session->write($this->Auth->sessionKey . '.' . $field, $value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:10:49.610

是的。

您可以获取当前的信息数组，对其进行修改，然后调用`$this->Auth->login($newUserData);`，但这也会更新会话（尽管不需要用户交互）。注意：仅适用于 CakePHP 2.0+。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:49:51.750

我已经完成`update`了获取新值数组的功能。带键（字段名称）：

```
public function update($fields, $values = null) {
    if (empty(parent::$_user) && !CakeSession::check(parent::$sessionKey)) {
        return false;
    }
    if (!empty(parent::$_user)) {
        $user = parent::$_user;
    } else {
        $user = CakeSession::read(parent::$sessionKey);
    }
    if (is_array($fields)) {
        if (is_array($values)) {
            $data = array_combine($fields, $values);
        } else {
            $data = $fields;
        }
    } else {
        $data = array($fields => $values);
    }
    foreach ($data as $field => $value) {
        if (isset($user[$field])) {
            $user[$field] = $value;
        }
    }
    return $this->login($user);
} 
```

（感谢[tigrang](https://stackoverflow.com/users/1377507/tigrang)的`login`功能）

# c - 两个带有 void 和空参数列表的函数声明

> ID：12022777
> 
> 赞同：6
> 
> 时间：2012-08-18T22:42:24.833
> 
> 标签：c, function, parameters, void

我想知道为什么下面的代码：

```
void foo(void);
void foo()
{
} 
```

在 gcc 中有效。在 C 中，没有重载之类的东西，上面的声明（实际上，其中一个是定义）声明了两个不同的函数（第一个不带任何参数，第二个可以带任意数量的任何参数）类型）。

但是，如果我们为第一个函数提供定义：

```
void foo(void)
{
}
void foo()
{
} 
```

由于重新定义，这次编译失败。**但是**，第一个代码是正确的，并且可能会令人困惑，如下所示：

```
void foo(void);

int main(void)
{
    foo();      //OK
    //foo(5);   //Wrong, despite ->the definition<- allows it
}

void foo()
{
} 
```

另一方面，这样的事情直接无效：

```
void foo(int);
void foo() //error: number of arguments doesn't match prototype
{
} 
```

与我前面的第一个代码相比，我认为编译器的行为有点奇怪。`int`不等于 也不`(/*empty list*/)`等于`void`。

谁能解释一下？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T22:57:38.613

引用关于函数声明符的标准的最新草案：

> (6.7.6.3/10) 类型为 void 的未命名参数作为列表中唯一项的特殊情况指定函数没有参数。
> 
> (6.7.6.3/14) 标识符列表仅声明函数参数的标识符。作为该函数定义的一部分的函数声明器中的空列表指定该函数没有参数。

所以声明和定义的声明符实际上是兼容的，因此引用相同的函数（当然没有发生重载，因为这样的事情在 C 中不存在。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T22:47:30.877

下面的行是一个函数声明，它告诉函数的签名`foo`：返回值的类型是什么，参数的类型是什么。

```
void foo(void); 
```

下面有一个函数定义，它告诉函数做什么。它不会使任何东西超载。定义和声明必须在签名中匹配。`void`数据类型允许在函数定义中省略它。

```
void foo()
{
} 
```

由于`void`不是可实例化的类型（您不能有 type 的值`void`），因此可以在函数定义的签名中省略参数。但是，如果您尝试这样做：

```
void foo(void*);
void foo() {
} 
```

那么您将遇到编译错误，因为`foo`预计会获得指向 don't-worry-about-type 值的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T22:50:17.630

C标准将void定义为：-

> void 类型包含一组空值；它是一个不完整的类型，无法完成。

和定义

```
void foo()
{
} 
```

意味着参数是对定义有效的空值集，因此 gcc 允许。

函数声明的原型还指定：-

> **void 类型的未命名参数作为列表中的唯一项的特殊情况指定该函数没有参数。**

# titanium - TideSDK 教程？

> ID：12022778
> 
> 赞同：3
> 
> 时间：2012-08-18T22:42:40.610
> 
> 标签：titanium, tidesdk

是否有一个不是旧 Titanium Desktop 残余的实际[TideSDK教程？](http://www.tidesdk.org/)我似乎找不到任何清晰的教程来概述编码到测试以在 TideSDK 上构建。我看到的大多数东西都是为了用于后期的 Titanium Desktop。如果有人可以概述 TideSDK 的应用程序创建过程，那将是非常受欢迎的。（例如代码，编译测试？/代码，测试，编译？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T12:53:29.627

目前从 TideSDK.org 站点下载的暂时提供 Titanium Desktop 1.2.0.RC4，而 TideSDK 团队继续为即将发布的 1.3.0-beta 版本（预计很快）做准备。因此，Appcelerator 的遗留文档仍可用于帮助您开始今天的桌面项目。如果您遇到任何问题，我们的邮件列表中有友好的人可以提供帮助。1.3.0 API 的唯一变化是命名空间从“Titanium”更改为“Ti”。请考虑加入 TideSDK 邮件列表[https://groups.google.com/forum/#!forum/tidesdk](https://groups.google.com/forum/#!forum/tidesdk)寻求帮助或在 Twitter [http://twitter.com/tidesdk](http://twitter.com/tidesdk)上关注我们以了解 TideSDK 新闻和公告的最新信息.

请记住，我们一直在使用旧代码和材料进行过渡。组建一个有能力和敬业的团队，通过复杂的代码库工作，建立持续集成基础设施并组织团队目前正在进行的工作是一项重大的努力。我们在 Github 上的存储库已经从几个存储库增长到 48 个过去几个月。该团队正在继续清理和组织我们从 Appcelerator 继承的代码，以便将来可以在此基础上进行构建。我们还努力成为一个非营利组织，以资助由 16 名程序员、开发人员和 UI 设计师组成的团队以及我们为此类项目所需的基础设施。这是我们未来成功的重要关键。

TideSDK 团队一直在我们的开发人员教育主管 Christian Engel 的指导下投入大量精力来制作高质量的文档，以期待即将发布的版本。TideSDK 的文档由 API 文档和一系列指南组成。指南专注于特定主题。在某些情况下，指南用作重点教程。要查看正在开发的文档，请访问全新的 titansdk.org 站点（于 2012 年 8 月末推出）并单击文档按钮。在短期内，工作主要集中在 API 文档和代码示例上。这项工作很快就会转移到指南上。

1.3.0-beta 版不会添加任何新功能，但会为底层库提供更新。这将使 SDK 能够在 OSX Lion、OSX Mountain Lion、Ubuntu 12.04 以及 Windows 7 和 8 上编译和使用。脚本语言版本也在更新。也许最重要的事情是将 WebKit 升级到可用的最新版本。这意味着最新的 HTML5 支持可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T00:47:36.843

TideSDK-1.3.1-beta 可用。请使用此处找到的最新版本的 TideSDK

[http://tidesdk.org](http://tidesdk.org)

并参阅位于以下位置的入门指南：

[http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started](http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started)

# java - 使用计时器倒计时

> ID：12022780
> 
> 赞同：4
> 
> 时间：2012-08-18T22:42:44.497
> 
> 标签：java, swing, timer

尝试编写一个计时器进行倒计时（如火箭发射：3-2-1-Go）。我所拥有的似乎只执行一次。我需要它重复（几乎递归）执行，直到值达到 0。

正如您将看到的，我有各种 println 语句来跟踪这一进程。这是我的输出：

> 在倒计时构造函数中
> 
> 在 ActionListener
> 
> 倒计时
> 
> 3

问题是我缺少以下输出：

> 2
> 
> 1
> 
> 去

这向我表明这个计时器实际上并没有倒计时。它似乎在等待一秒钟然后终止。

我怎样才能让它自己调用，直到计时器达到零？谢谢！

```
public class StopWatch {

    JFrameMath myTest;
    int seconds;

    /* Constructor */
    public StopWatch(JFrameMath thisTest, int sec) {
        myTest = thisTest;
        seconds = sec;

        myTest.hideTestButtons(true);
        Countdown display = new Countdown(myTest);
    }
}

class Countdown extends JFrame implements ActionListener {

    private Timer myTimer = new Timer(250, this);
    JFrameMath myTest;

    public Countdown(JFrameMath thisTest) {

        System.out.println("in Coundown constructor");  

        myTimer.setInitialDelay(1150);
        myTest = thisTest;
        myTimer.start();
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        System.out.println("in ActionListener");      
        int countSeconds = 3;

        if(countSeconds == 0) {
            myTest.showTimeRemaining("Go");
            myTimer.stop();
            System.out.println("done");
        } else {
            System.out.println("counting down");
            myTest.showTimeRemaining(""+countSeconds);
            countSeconds--;
        }

        myTimer.stop();
        myTest.hideTestButtons(false);
    }
}

public void showTimeRemaining(JFrameMath thisTest, String numSec) {
  System.out.println(numSec);
    lblCountdown.setText(numSec);
    thisTest.pack();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T22:56:17.100

**`myTimer.stop()`从末尾**删除**`actionPerformed`。这就是阻止它触发后续事件的原因。你唯一想打电话的地方`stop`就是里面`if (countSeconds == 0)`。**

 **另外，我不知道这是拼写错误还是测试，但您需要`int countSeconds = 3;`从`actionPerformed`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T22:56:14.400

首先，您在第一次通过时停止计时器：

```
myTimer.stop(); <---- remove this call
myTest.hideTestButtons(false); 
```

所以你的计时器永远不会再被调用。

解决了这个问题，你正在初始化

```
int countSeconds = 3; 
```

每次在 actionPerformed 中，所以计数器永远不会结束。

您需要将其移至类级别并在启动计时器之前对其进行初始化。**

# php - 清理所有已发布字段的正确方法？

> ID：12022783
> 
> 赞同：2
> 
> 时间：2012-08-18T22:44:05.723
> 
> 标签：php, forms, post, escaping, sanitize

我是清理输入数据的新手，但我们开始快速增加客户端数量，因此我们需要清理所有用户输入，以防万一，因为这是最佳实践。

如果我有一个发布 12 个字段的表单，那么清理它的最好和最便宜的方法是什么？

为简单起见，假设我有

```
$one = $_POST['one'];
$two = $_POST['two'];
$three = $_POST['three'];
$four = $_POST['four'];
$five = $_POST['five']; 
```

**编辑：** 就在这里 - 这是被插入到元数据下的数据库中。然后我打电话给

然后我只是打电话

```
printf('The input for One is ' .$theNewVarForOne. '!'); 
```

但是那里有潜在的恶意代码。剥离所有不确定输入的最佳方法是什么？

**编辑：**

我应该更具体。我基本上是在创建一些存储在数据库中的“发布”数据。标题、日期、正文等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:49:51.377

如果您要打印到屏幕上，那么 HTMLspecialchars 应该没问题：

```
echo htmlspecialchars($_POST['one']); 
```

它将任何潜在的恶意 javascript 和 HTML 转换为字符，`&lt;`以便它在源代码中显示为文本（意味着它无法执行），并且对于用户来说，它看起来就像屏幕上显示的原始输入：

```
<?php
$new = htmlspecialchars("<a href='test'>Test</a>", ENT_QUOTES);
echo $new; // &lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt;
?> 
```

另一方面，如果您要插入数据库，那么您将需要做一些额外的工作。

插入数据库时​​，您确实需要使用准备好的语句（这将阻止任何人对您的数据库使用 SQL 做任何时髦的事情）。我更喜欢使用[PDO](http://au.php.net/manual/en/book.pdo.php)来建立我的连接。

代码将如下所示（摘自[prepare](http://au.php.net/manual/en/pdo.prepare.php)上的文档）：

```
<?php
/* Execute a prepared statement by passing an array of values */
$sql = 'SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour';
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':calories' => 150, ':colour' => 'red'));
$red = $sth->fetchAll();
$sth->execute(array(':calories' => 175, ':colour' => 'yellow'));
$yellow = $sth->fetchAll();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:13:17.447

如果要将其插入数据库，我建议您使用 Fluffeh 的方法，但一个肮脏的快速解决方法是使用[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)。

# objective-c - 如何正确创建带有 UISlider 的缩略图选择器以从视频中进行选择？

> ID：12022786
> 
> 赞同：0
> 
> 时间：2012-08-18T22:44:24.187
> 
> 标签：objective-c, ios, uiimageview, uislider

嗨，这是一个对难题的简单问题（无论如何对我来说）

我不认为自己是初学者程序员，但看在上帝的份上，我似乎无法弄清楚这一点....我目前遇到与更新 uiimageview 相关的问题.. 当我的滑块移动时它没有更新左右..当我拖动它时它确实会减慢应用程序的速度，这告诉我正在发生进程并告诉我他们正确地连接了itnerface和他们的方法..发生了什么或者我现在正在做什么正在尝试检索由时间指定的特定帧的图像数据，然后能够根据 uislider 的位置将其选择为缩略图。所以它是一个手动缩略图选择器。

我通过界面构建​​器连接它和以编程方式进行连接，尝试了很多事情。

到目前为止，这是我所拥有的：

```
.h file 
```

![.h 文件](../Images/5e64f1710009a5fd0a6f5a43e34a972b.png)

```
.m file 
```

![点 m​​ 文件](../Images/cff2f40e48645c54627566d67af308f1.png)

```
the slider method for sliderValueChanged which gets called 
```

![滑块法](../Images/ec7ef57b85579a6f82bf93b06a5d44e7.png)

```
and finally my class method that i use to help retrieve a thumbnail image returning nsdata... passing in a video and a specified time position. 
```

![检索缩略图的类方法](../Images/4df875947af7f97efb0aa3e4a13a7121.png)

我在stackoverflow上读到，如果定期更新uiimageview会导致内存泄漏，因为它会缓存图像..并使用[UIImage imageWithData:]来避免任何泄漏等，所以我已经在我的代码中实现了这一点，但我的缩略图视图仍然无法根据滑块的位置加载图像。（创建滑块以将最小值和最大值设置为从 0 到视频的持续时间，以便滑块只能具有可以正确选择相关视频中的时间范围的值）

如果有人可以指导我如何解决这个问题.. 它现在已经超出了我几个小时！我很感激帮助。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:51:45.900

我意识到这里发生了什么......我传递给我的方法的滑块值不适合我的要求。

在类方法中它说 CMTimeMake(value 1, value 2).. 在做了一些研究之后，我明白了它是如何工作的。

基本上，在我的情况下，您在值 2 中指定了一个时间间隔，它是 60 .. 基于我复制的一些代码.. 无论您用值 1 代替什么，都将成为时间间隔的一部分.. 它们是分子和分母，所以1 /60 等于 1 60 秒 2/60 等于 2 60 秒的时间位置......如果我想要 3 秒，我需要做 60*3 = 180 所以

180/60 等于 180 秒的 60 秒，总共等于 3 秒......所以因为我的滑块值被映射到视频的持续时间，最大值为 15 秒......我可以使用的最高时间框架我在我的问题中写的代码......我只能得到 15 60 秒。哪个时间框架在第 60 秒之间并没有真正的差异，因此我看不到 uimageview 正在更新的原因......

所以为了纠正这个问题，我将我的滑块值乘以 60，这样每个值都会因为它们被映射到秒而发生变化……我乘以 60……当然，图像像魅力一样更新了。但是现在我需要弄清楚如何加快这个过程，因为目前它似乎是同步的，因为它大大滞后于界面

# ruby-on-rails - 是否可以在不卸载的情况下降级 RVM 版本？

> ID：12022798
> 
> 赞同：0
> 
> 时间：2012-08-18T22:46:54.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rvm

我有两台服务器正在运行（几乎）相同的安装。两台服务器都是虚拟机，并且 server_b 是作为 server_a 的副本创建的（这就是我知道它们是相同安装的方式）。Server_a 已使用“rvm get HEAD”进行了更新。

服务器_a：

*   rvm 版本 1.15.4
*   ruby-1.8.7-p334
*   .rvmrc 文件指定 ruby​​-1.8.7@my_gemset（未指定补丁级别）
*   导轨 3.0.5

服务器_b：

*   rvm v 1.2.8
*   ruby-1.8.7-p334
*   .rvmrc 文件指定 ruby​​-1.8.7@my_gemset（未指定补丁级别）
*   导轨 3.0.5

当我部署到 server_a 时，RVM 抱怨未安装 ruby​​-1.8.7-p370，但部署到 server_b 不会产生此错误。我不确定它为什么要寻找 1.8.7 的最新补丁级别——我已经检查了每台服务器上的 RVM 配置，并比较了它们。（'rvm info' 的输出导致两台服务器的信息相同，除了 RVM 版本）。

我得出的结论是它可能与 RVM 的版本有关？我错过了什么明显的东西吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T00:06:51.527

你应该更新而不是降级，你真正的问题是你指定没有补丁级别的 ruby​​ 版本，在这种情况下，RVM 将采用最新的已知补丁级别，所以`rvm use 1.8.7`你不需要告诉它`rvm use 1.8.7-p334`。

至于降级问题你可以指定 version `rvm get 1.2.8`，请记住这个版本大约有 2 年的历史了，从那时起很多东西都在 rvm 中修复了，你不会得到对旧版本的任何支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-20T05:20:31.027

是的，有可能。你能行的。以前我使用的是 rvm 版本 1.29.0 我尝试使用此代码将 rvm 与 1.28.0 版本一起使用 代码是：`rvm get 1.28.0`

# php - 如何更改图像的类型（mime 类型）？

> ID：12022799
> 
> 赞同：0
> 
> 时间：2012-08-18T22:46:57.510
> 
> 标签：php, image, image-processing, mime-types

当我将图像上传到 FB 时，它具有 image/png 类型（或 image/gif）。但是当我下载回我上传的图片时，它已经有 image/jpeg 类型了。如何更改类型？保存具有不同扩展名的图像就足够了吗？我试过了，它有效，但它是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:51:42.760

> 保存具有不同扩展名的图像就足够了吗？

仅当文件类型检测代码被破坏时。如果它只检查扩展名，那么确定，这将愚弄它。如果它，您知道，实际上是*查看*文件内容，那么不，这将无济于事；您必须使用 ImageMagick 之类的东西`convert`来对图像进行转码。

# php - 向 POST 客户端返回 HTTP 200 代码？

> ID：12022804
> 
> 赞同：9
> 
> 时间：2012-08-18T22:48:01.907
> 
> 标签：php, http, post

我有一台服务器向我发送 POST。我需要回复 HTTP 200 OK。服务器需要有点像“继续！” 在它执行另一个动作之前提示。它需要 HTTP 200 响应。

**编辑** 我已经尝试过 header()，但由于某种原因服务器不会读取它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-18T22:52:16.990

200 代码是对成功请求的标准响应......即使回显一个空的 json 字符串也会导致 200 OK 状态。

```
echo json_encode(array()); 
```

如果您想要做的只是向您的客户发出某个过程已完成的信号，您可以回显一条自定义状态消息，甚至像我上面演示的那样回显一个空白对象。

如果您想实际手动发送 200 标头，您可以这样做 -

```
header('Status: 200'); 
```

确保在您从服务器获得**任何**输出之前发送此标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-05T19:33:33.693

这个函数调用完成了这项工作： `http_response_code(200);`

见： http: [//php.net/manual/en/function.http-response-code.php](http://php.net/manual/en/function.http-response-code.php)

这个函数调用可以在服务器代码的任何地方抛出——调用这个函数的顺序似乎并不重要。

# java - Mysql 连接线程是否安全

> ID：12022807
> 
> 赞同：3
> 
> 时间：2012-08-18T22:48:11.713
> 
> 标签：java, mysql, thread-safety

```
public void SQLconnect() {
try {
  System.out.println("Connecting to MySQL database...");
  Class.forName("com.mysql.jdbc.Driver").newInstance();
  String conn = "jdbc:mysql://" + this.SQL_HOST/* + ":" + this.SQL_PORT */
      + "/" + this.SQL_DATA;
  this.con = DriverManager
      .getConnection(conn, this.SQL_USER, this.SQL_PASS);
} catch (ClassNotFoundException ex) {
  System.err.println("No MySQL driver found!");
} catch (SQLException ex) {
  System.err
      .println("Error while fetching MySQL connection!");
} catch (Exception ex) {
  System.err
      .println("Unknown error while fetching MySQL connection.");
 }
} 
```

这是java，我可以使用连接“con”从不同的线程连接到我的MySql数据库吗？或者这不是线程安全的。

如果它不是线程安全的，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:22:39.460

它不是线程安全的。每次需要时都必须建立新的连接。它永远不应该是成员变量，始终是局部变量或方法参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T05:34:04.070

在 JDBC 中，Connection 接口不是线程安全的，您必须自己管理它。例如，您需要每次打开新连接并关闭它。

为方便起见，您可以使用连接池，因为管理连接的打开和关闭是一项无聊的任务；使用连接池，您只需获得一个连接并将其放回，该池将管理它打开的所有连接并重用它们。您可以结帐[C3P0](http://sourceforge.net/projects/c3p0/)或[DBCP](http://commons.apache.org/dbcp/index.html)

# php - 在 JSON 中使用 1 和 0 代替 True 和 False

> ID：12022808
> 
> 赞同：2
> 
> 时间：2012-08-18T22:48:19.917
> 
> 标签：php, json, casting, boolean, type-conversion

在 PHP 中，我注意到如果我有一个数组，然后`json_encode()`它，布尔值将转换为`true`and `false`。但是，我希望它们分别转换为`1`和`0`。

这是一个例子：

```
$data = Array("foo" => true, "bar" => false, "baz" => false, "biz" => true);
print json_encode($data); 
```

上述输出：

```
{"foo":true,"bar":false,"baz":false,"biz":true} 
```

然而，如果`true`和`false`是`1`，`0`相反，我们可以有一个更短的字符串，这将花费更少的时间在互联网上传输：

```
{"foo":1,"bar":0,"baz":0,"biz":1} 
```

如何使用`1`and`0`而不是`true`and使 PHP 对 JSON 进行编码`false`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:48:19.917

我想到了。在对 JSON 进行编码之前，您可以使用 PHP 中的`array_walk`or`array_walk_recursive`函数将布尔值转换为整数。我写了一个函数来做到这一点：

```
function change_booleans_to_numbers(Array $data){
    // Note the order of arguments and the & in front of $value 
    function converter(&$value, $key){
        if(is_bool($value)){
            $value = ($value ? 1 : 0);
        }
    }
    array_walk_recursive($data, 'converter');
    return $data;
} 
```

这是一个演示脚本：

```
<?php
// Make the browser display this as plain text instead of HTML 
header("Content-Type:text/plain");

function change_booleans_to_numbers(Array $data){
    function converter(&$value, $key){
        if(is_bool($value)){
            $value = ($value ? 1 : 0);
        }
    }
    array_walk_recursive($data, 'converter');
    return $data;
}

$data = Array("foo" => true, "bar" => false, "baz" => false, "biz" => true);

print "Original:" . PHP_EOL;
var_dump($data);
print json_encode($data) . PHP_EOL;
print PHP_EOL;

$changed = change_booleans_to_numbers($data);
print "Processed:" . PHP_EOL;
var_dump($changed);
print json_encode($changed) . PHP_EOL; 
```

脚本输出：

```
Original:
array(4) {
  ["foo"]=>
  bool(true)
  ["bar"]=>
  bool(false)
  ["baz"]=>
  bool(false)
  ["biz"]=>
  bool(true)
}
{"foo":true,"bar":false,"baz":false,"biz":true}

Processed:
array(4) {
  ["foo"]=>
  int(1)
  ["bar"]=>
  int(0)
  ["baz"]=>
  int(0)
  ["biz"]=>
  int(1)
}
{"foo":1,"bar":0,"baz":0,"biz":1} 
```

# c# - 在 wpf 中为 DrawImage 使用 sql 数据库图像

> ID：12022810
> 
> 赞同：0
> 
> 时间：2012-08-18T22:48:22.437
> 
> 标签：c#, sql, wpf, uri, drawimage

关于这个片段：

```
dc.DrawImage(new BitmapImage(new Uri(@"E:\Images\Pic1.png", UriKind.Relative)), new System.Windows.Rect(140, 170, 150, 150)); 
```

如果我们使用 sql 数据库中的图像进行绘图，我们该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T22:52:53.790

[http://www.codeproject.com/Articles/10861/Storing-and-Retrieving-Images-from-SQL-Server-usin](http://www.codeproject.com/Articles/10861/Storing-and-Retrieving-Images-from-SQL-Server-usin)

1.  创建sql表

    ```
    CREATE TABLE [dbo].[tblImgData]
    (
        [ID] [int] NOT NULL ,
        [Name] [varchar] (50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
        [Picture] [image] NULL
    ) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
    ```

2.  从本地计算机获取图像

    ```
     protected void LoadImage()
        {
            try
            {
                this.openFileDialog1.ShowDialog(this);
                string strFn=this.openFileDialog1.FileName;
                this.pictureBox1.Image=Image.FromFile(strFn);
                FileInfo fiImage=new FileInfo(strFn);
                this.m_lImageFileLength=fiImage.Length;
                FileStream fs=new FileStream(strFn,FileMode.Open, 
                                  FileAccess.Read,FileShare.Read);
                m_barrImg=new byte[Convert.ToInt32(this.m_lImageFileLength)];
                int iBytesRead = fs.Read(m_barrImg,0, 
                                 Convert.ToInt32(this.m_lImageFileLength));
                fs.Close();
            }
            catch(Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
    ```

3.  将图像保存在数据库中

    ```
    private void btnSave_Click(object sender, System.EventArgs e)
    {
        try
        {
            this.sqlConnection1.Open();
            if (sqlCommand1.Parameters.Count ==0 )
            {
                this.sqlCommand1.CommandText="INSERT INTO tblImgData(ID," + 
                               " Name,Picture) values(@ID,@Name,@Picture)";
                this.sqlCommand1.Parameters.Add("@ID", 
                                 System.Data.SqlDbType.Int,4);
                this.sqlCommand1.Parameters.Add("@Name", 
                                 System.Data.SqlDbType.VarChar,50);
                this.sqlCommand1.Parameters.Add("@Picture", 
                                 System.Data.SqlDbType.Image);
            }

            this.sqlCommand1.Parameters["@ID"].Value=this.editID.Text;
            this.sqlCommand1.Parameters["@Name"].Value=this.editName.Text;
            this.sqlCommand1.Parameters["@Picture"].Value=this.m_barrImg;

            int iresult=this.sqlCommand1.ExecuteNonQuery();
            MessageBox.Show(Convert.ToString(iresult));
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            this.sqlConnection1.Close();
        }
    } 
    ```

# android - android两行listview行对齐

> ID：12022813
> 
> 赞同：0
> 
> 时间：2012-08-18T22:49:19.193
> 
> 标签：android, listview, android-linearlayout, android-relativelayout

我有一个两行列表视图，该行包含以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:orientation="vertical" 
android:layout_height="?android:attr/listPreferredItemHeight"
android:padding="6dip"
android:gravity="center_vertical"
>

  <TextView
    android:id="@+id/designation"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:gravity="center_vertical"
    android:textSize="18sp"
    android:textStyle="bold" />

  <TextView
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="2" 
    android:id="@+id/orderedValue"
    android:gravity="bottom"
    android:singleLine="true"
    android:ellipsize="marquee"
    />  

</LinearLayout> 
```

我想要的是让第一行（指定）位于该行的确切垂直中心，第二行（orderedValue）就在它的下方

我一直在尝试对 TextViews 使用 LinearLayout/Relative 布局、重力与 layout_gravity 的几种组合，但无济于事

这里有任何帮助/指针吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:51:23.150

我会`View`在第一个上方留一个空白，`TextView`它可以与下面的文本共享相同的权重。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:orientation="vertical" 
android:layout_height="?android:attr/listPreferredItemHeight"
android:padding="6dip"
>

  <View
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    />  

  <TextView
    android:id="@+id/designation"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="18sp"
    android:textStyle="bold" />

  <TextView
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1" 
    android:id="@+id/orderedValue"
    android:singleLine="true"
    android:ellipsize="marquee"
    />  

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:39:35.130

如果我是你，我会尝试将`designation`TextView 放在 LinearLayout 中并使用`android:layout_gravity`它来居中。我在我的活动中尝试了这个，它以第一个 TextView 为中心。但是，我不确定它是否适用于您的列表。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:orientation="vertical" 
android:layout_height="?android:attr/listPreferredItemHeight"
android:padding="6dip"
android:gravity="center_vertical" >
    <LinearLayout 
        android:id="@+id/layout"
        android:layout_height="fill_parent" 
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical" >
        <TextView
        android:id="@+id/designation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:textSize="18sp"
        android:textStyle="bold"
        android:text="designation" />
    </LinearLayout>
    <TextView
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="2" 
    android:id="@+id/orderedValue"
    android:gravity="bottom"
    android:singleLine="true"
    android:ellipsize="marquee"
    android:text="orderedValue" />  
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T00:47:05.290

iTurki，感谢您的输入，但在阅读您的解决方案之前我刚刚解决了它。

我切换到相对布局并更改了一些参数，最重要的是添加了：android:layout_centerVertical="true"。

这是我的最终布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:orientation="vertical" 
  android:layout_height="fill_parent"
  android:padding="6dip"
  >

  <TextView
    android:id="@+id/designation"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"       
    android:textSize="19sp"
    android:layout_centerVertical="true"
    android:textStyle="bold" />

  <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/orderedValue"       
    android:singleLine="true"
    android:layout_below="@id/designation"
    android:paddingTop="6dip"
    android:textColor="#33B5E5"
    android:textSize="13sp"
    />  

</RelativeLayout> 
```

谢谢两位的关注！

# ruby-on-rails - Rails 和 PostgreSQL 中的时区和夏令时

> ID：12022814
> 
> 赞同：1
> 
> 时间：2012-08-18T22:49:30.050
> 
> 标签：ruby-on-rails, postgresql, datetime, dst, rails-postgresql

### 背景

具有默认`created_at`列的文章模型

导轨`config.time_zone = 'Warsaw'`

我有一篇文章 created_at = local time 2012-08-19 00:15 (2012-08-18 22:15 in UTC)。

### 目标

接收 2012-08-19 （当地时间）创建的所有文章。

### 我的（无法正常工作）解决方案

```
Article.where(
  "date_trunc('day', created_at AT TIME ZONE '#{Time.zone.formatted_offset}')
   = '#{Date.civil(2012, 8, 19)}'"
) 
```

生成SQL：

```
SELECT "articles".* FROM "articles"
WHERE (date_trunc('day', created_at AT TIME ZONE '+01:00') = '2012-08-19') 
```

并返回一个空集。但是，如果我在 psql 中运行相同的查询，它会返回一篇文章……这让我很困惑。

### 问题

我做错了什么以及如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T13:55:06.273

> 目标：接收2012-08-19（当地时间）创建的所有文章。

`'+01:00'`（就像你使用它一样）是一个*固定*的时间偏移量，不能考虑 DST（*夏令时*）。使用时区**名称**（不是缩写）。这些在 PostgreSQL 中可用：

```
SELECT * FROM pg_timezone_names; 
```

对于华沙来说，这应该是[`'Europe/Warsaw'`](http://en.wikipedia.org/wiki/Cest)。系统从其存储的信息中知道 DST 的界限并应用相应的时间偏移。

* * *

此外，您的查询可以简化。

同样，保存`created_at`的`timestamp [without time zone]`值反映了创建行时服务器的本地时间（在内部保存为 UTC 时间戳）。

基本上只有两种可能性，具体取决于您客户的时区。

1.  您的阅读客户端使用与写作客户端**相同的**设置运行：只需投射到日期即可。[`timezone`](http://www.postgresql.org/docs/current/runtime-config-client.html#GUC-TIMEZONE)

    ```
    SELECT *
    FROM   articles
    WHERE  created_at::date = '2012-08-19'; 
    ```

2.  您的阅读客户端使用与写入客户端**不同的**设置运行[`timezone`](http://www.postgresql.org/docs/current/runtime-config-client.html#GUC-TIMEZONE)：添加`AT TIME ZONE '<tz name of *writing* client here>`'. 例如，如果是`Europe/Warsaw`，它看起来像：

    ```
    ...
    WHERE (created_at AT TIME ZONE 'Europe/Warsaw')::date = '2012-08-19'; 
    ```

*没有*必要在您发布的答案中双重应用`AT TIME ZONE`您在发布的答案中拥有它。

 *注意时区*名称*而不是缩写。看：

*   [具有相同属性的时区名称在应用于时间戳时会产生不同的结果](https://stackoverflow.com/questions/12042506/time-zone-names-with-identical-properties-yield-different-result-when-applied-to)

如果您的应用程序跨越多个时区..

.. 将列默认设置`created_at`为`now() AT TIME ZONE 'UTC'`- 或其他时区，重点是：在任何地方都使用相同的。

.. 或者，**最好**切换到`timestamptz`( `timestamp with time zone`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:59:07.793

[链接的答案](https://stackoverflow.com/q/9571392/939860)有帮助。我必须运行以下查询：

```
SELECT *
FROM   articles
WHERE (created_at AT TIME ZONE 'UTC' AT TIME ZONE 'CEST')::date = '2012-08-19'; 
```

> 这个问题需要列 created_at 的确切定义（究竟是什么数据类型？）

Rails 总是创建 created_at 列作为没有时区的时间戳。所以我必须首先`AT TIME ZONE 'UTC'`说 dbms 这个时间戳是在 UTC，第二个是在 CEST 区域显示日期。*

# node.js - Node.js 在大量并发连接中苦苦挣扎

> ID：12022815
> 
> 赞同：7
> 
> 时间：2012-08-18T22:49:51.300
> 
> 标签：node.js, ubuntu, tcp, apachebench, sysctl

我正在开发一个有点不寻常的应用程序，其中 10k 个客户端被精确计时，以每 3 分钟左右一次尝试一次提交数据。这个“ab”命令相当准确地模拟了现实世界中的一个弹幕：

```
ab -c 10000 -n 10000 -r "http://example.com/submit?data=foo" 
```

我在 rackspacecloud VPS 实例上的 Ubuntu 12.4 上使用 Node.js 来收集这些提交，但是，我看到 Node 的一些非常奇怪的行为，即使我删除了所有业务逻辑并将 http 请求变成了 no-同上。

当测试完成大约 90% 时，它会挂起很长一段时间。奇怪的是，这始终发生在 90% - 对于 c=n=10k，在 9000；对于 c=n=5k，在 4500；对于 c=n=2k，在 1800 处。测试实际上最终完成，通常没有错误。但是 ab 和 node 日志都显示持续处理直到大约 80-90% 的测试运行，然后在完成之前停顿很长时间。

当节点正常处理请求时，CPU 使用率通常在 50-70% 左右。在挂起期间，CPU 上升到 100%。有时它保持在 0 附近。在不稳定的 CPU 响应和它似乎与实际连接数（仅完成百分比）无关的事实之间，我不怀疑垃圾收集器。

我已经在本地主机和远程服务器上尝试过这个运行'ab' - 效果相同。

我怀疑与 TCP 堆栈有关的东西，可能涉及关闭连接，但我的配置更改都没有帮助。我的变化：

*   ulimit -n 999999
*   当我听（）时，我将积压工作设置为 10000

Sysctl 更改为：

```
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
net.ipv4.tcp_rmem = 4096 87380 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216
net.ipv4.tcp_max_orphans = 20000
net.ipv4.tcp_max_syn_backlog = 10000
net.core.somaxconn = 10000
net.core.netdev_max_backlog = 10000 
```

我还注意到我倾向于在内核日志中获取此消息：

```
TCP: Possible SYN flooding on port 80\. Sending cookies.  Check SNMP counters. 
```

我对这个消息感到困惑，因为 TCP 积压队列应该足够深，不会溢出。如果我禁用同步 cookie，“发送 cookie”会转到“断开连接”。

我推测这是某种 linux TCP 堆栈调整问题，我已经阅读了我在网上可以找到的所有内容。我尝试过的一切似乎都不重要。有什么建议吗？

**更新：**尝试使用 tcp_max_syn_backlog、somaxconn、netdev_max_backlog 并将 listen() backlog 参数设置为 50k，但行为没有变化。仍然会产生 SYN 洪水警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T22:59:04.650

您是否在运行节点的同一台机器上运行 ab？如果没有，您有 1G 或 10G 网卡吗？如果是，那么您不是真的在尝试处理 20,000 个打开的连接吗？

另外，如果您要更改`net.core.somaxconn`为 10,000，那台机器上绝对没有其他套接字打开？如果你这样做，那么 10,000 还不够高。

您是否尝试过使用`nodejs`集群来分散每个进程的打开连接数？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T10:49:31.583

我想您可能会发现这篇博文以及之前的博文很有用

[http://blog.caustik.com/2012/08/19/node-js-w1m-concurrent-connections/](http://blog.caustik.com/2012/08/19/node-js-w1m-concurrent-connections/)

# python - 附加列在 pandas DataFrame 中产生 NaN

> ID：12022823
> 
> 赞同：3
> 
> 时间：2012-08-18T22:50:26.947
> 
> 标签：python, data-mining, pandas

我需要将列迭代地添加到 DataFrame 对象。这是一个简化版本：

```
>>> x=DataFrame()
>>> for i in 'ps':
...  x = x.append(DataFrame({i:[3,4]}))
... 
>>> x
    p   s
0   3 NaN
1   4 NaN
0 NaN   3
1 NaN   4 
```

我应该怎么做才能得到：

```
 p   s
 0  3   3
 1  4   4 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:12:28.063

您首先创建 dict 的想法可能是最好的方法：

```
>>> from pandas import *
>>> DataFrame({c: [1,2] for c in 'sp'})
   p  s
0  1  1
1  2  2 
```

（这里使用字典推导，在 Python 2.7 中可用）。但是，为了完整起见，您可以 - 低效地 - 使用`join`或`concat`获取逐列工作的方法：

```
>>> df = DataFrame()
>>> for c in 'sp':
...     df = concat([df, DataFrame({c: [1,2]})], axis=1)
... 
>>> print df
   s  p
0  1  1
1  2  2
>>> 
>>> df = DataFrame()
>>> for c in 'sp':
...     df = df.join(DataFrame({c: [1,2]}), how='outer')
... 
>>> print df
   s  p
0  1  1
1  2  2 
```

[您可以看到列顺序的差异。] 但是您构建 dict 然后从构建的 dict 构建 DataFrame 的想法是一种更好的方法。

# c++ - KAuth API 代码行抛出错误，告诉我将 const char* 转换为非标量

> ID：12022824
> 
> 赞同：0
> 
> 时间：2012-08-18T22:50:26.750
> 
> 标签：c++, authentication

我正在关注本教程：

```
bit.ly/SBMmwp 
```

我在第一行收到以下错误：

**错误：请求从“const char [26]”转换为非标量类型“KAuth::Action”**

```
KAuth::Action readAction = "org.kde.auth.example.read";

KAuth::ActionReply reply = readAction.execute();
if (reply.failed())
{
    QMessageBox::information(this, "Error", QString("KAuth returned an error code: %1").arg(reply.errorCode()));
}
else
{
    QMessageBox::information(this, "Done!", QString("Successfully authenticated!"));
} 
```

错误在第一行：**KAuth::Action readAction = "org.kde.auth.example.read";**

为什么会这样？这是与滥用 KAuth API 相关的一些错误，还是常见的 C/C++ 错误。我什至不知道如何将该**const char[26]**转换**为非标量**类型。

* * *

* * *

* * *

* * *

**@nm** 不。这是创建主窗口（GUI）的事件。完整的代码类似于：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <kauth.h>
#include <QMessageBox>
#include <kauthaction.h>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    KAuth::Action readAction = "org.kde.auth.example.read";
    KAuth::ActionReply reply = readAction.execute();
    if (reply.failed())
    {
        QMessageBox::information(this, "Error", QString("KAuth returned an error code: %1").arg(reply.errorCode()));
    }
    else
    {
        QMessageBox::information(this, "Done!", QString("Successfully authenticated!"));
    }
}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:44:33.813

我基本上被打脸了。就像**Christian**写的那样完成，但是我得到未定义的引用等等等等的原因是因为我需要链接到 KDECore 库。如果您使用的是 QT，您将拥有一个 .pro 文件。你所要做的就是在里面写：

```
LIBS += -lkdecore 
```

但如果您在项目中使用 CMake，则需要 CMake.txt 中的这些行：

```
find_package(KDE4 REQUIRED)
target_link_libraries([name_of_application] kdecore) 
```

或者：

```
find_package(KDE4 REQUIRED)
target_link_libraries([name_of_application] ${KDE4_KDECORE_LIBS}) 
```

其中**[name_of_application]**是要构建的应用程序的名称（通常是项目名称）。要记住的一件事是，如果您使用 CMake，则必须根据应用程序的需要添加其他库。否则，您将获得对应用程序中其他组件的更多未定义引用。例如，如果我在我的应用程序中使用 QT GUI 组件，我会在 CMake.txt 中执行：

```
find_package(KDE4 REQUIRED)
target_link_libraries(My_Application_Name kdecore ${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:11:23.283

我不熟悉 KDE，但[http://www.purinchu.net/kdelibs-apidocs/kdecore/html/classKAuth_1_1Action.html](http://www.purinchu.net/kdelibs-apidocs/kdecore/html/classKAuth_1_1Action.html)建议您不能将字符串分配给“操作”。假设可以从“const char*”创建“QString”（对于字符串类并不罕见），将行更改为

```
KAuth::Action readAction("org.kde.auth.example.read"); 
```

可能会修复它。

注意：教程不一定正确；他们的作者并不总是跟上变化。

# jquery - 如何使用 jQuery 从具有其他子元素的元素中获取文本

> ID：12022826
> 
> 赞同：4
> 
> 时间：2012-08-18T22:50:31.863
> 
> 标签：jquery, html, dom

我有类似以下内容：

```
<div>
     Hello World
     <div>Something Else</div>
</div> 
```

我想使用 javascript/jQuery 来获取“Hello World”文本。我可以将它包装在一个跨度中并选择它，但我现在想知道如何做到这一点。

我认为只需使用 $('div').text() 就可以了，但它给了我“Hello WorldSomething Else”。

谢谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T22:55:55.020

尝试这个：

```
var div = document.getElementsByTagName('div')[0].firstChild;
var text = div.textContent ? div.textContent.trim() : div.innerText; 
```

[小提琴](http://jsfiddle.net/J6VzS/3/)

[请注意，IE8 及更早版本不支持该`trim`功能，如果您使用 jQuery，您可以使用`$.trim()`跨浏览器的 jQuery 实用功能。`$.trim(text)`]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:11:40.720

抱歉，如果这与@minitech 的答案太相似：

```
var text = $('div:first')
    .contents()
    .filter(function() {
        return (this.nodeType === 3);
    }).text();

alert(text);​ 
```

您可以使用`contents()`（获取所选元素的内容）和`filter()`将匹配集减少为仅文本（`nodetype === 3`表示“文本”）的组合。

[jsFiddle](http://jsfiddle.net/bbxNa/2/)

当然，`first()`如果您对 html 的外观有信心，您可以改用：

```
var text = $('div:first')
    .contents()
    .first()
    .text(); 
```

[jsFiddle](http://jsfiddle.net/bbxNa/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T22:55:51.037

`text()`，正如您所发现的，它不仅获取目标节点的文本，还获取任何子/后代节点的文本。

即使不是这种情况，您当前形式的代码仍将返回两段文本的串联，因为您的选择器目标简单`div`，因此 jQuery 将查找所有`div`s 并获取它们的文本，作为一个文本块。

您只能通过类似的方式获取元素的即时文本，尽管还有其他方法。

```
//make a mini plugin for getting the immediate text of an element
$.fn.extend({
    immediateText: function() {
        return this.clone().find("*").remove().end().text();
    }
});

//use the plugin
var immediateText = $('#some_element').immediateText(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T23:00:54.650

克隆元素（第一个 div），删除所有子元素并获取文本，可以选择删除空格`$.trim()`：

```
var elm = $('div:first').clone();
var text = $.trim(elm.children().remove().end().text()); 
```

[小提琴](http://jsfiddle.net/eEeYb/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T22:56:10.423

使用[`.contents`](http://api.jquery.com/contents)：

```
yourDiv.contents().filter(function() {
    return this.nodeType === 3;
}).map(function() {
    return this.nodeValue;
}).get().join(''); 
```

或者，没有 jQuery：

```
var i, c, result = '';

for(i = 0; c = yourDiv.childNodes[i]; i++) {
    if(c.nodeType === 3) {
        result += c.nodeValue;
    }
} 
```

# iphone - 如何在 cocos2d 中使用平铺坐标而不是常规坐标

> ID：12022829
> 
> 赞同：0
> 
> 时间：2012-08-18T22:51:03.510
> 
> 标签：iphone, objective-c, ios, xcode, cocos2d-iphone

我还是 cocos2d 的新手，我有这个问题，当我使用 ccp 坐标时，即使我移动到下一个屏幕，它也会保持在相同的位置。我得出的结论一定是我没有使用瓷砖坐标。所以我需要一些帮助转换。

```
 - (CGPoint)tileCoordForPosition:(CGPoint)position {
float x = floor(position.x / map.tileSize.width);
float levelHeightInPixels = map.mapSize.height * map.tileSize.height;
float y = floor((levelHeightInPixels - position.y) / map.tileSize.height);
return ccp(x, y);
  }

-(CGRect)tileRectFromTileCoords:(CGPoint)tileCoords {
float levelHeightInPixels = map.mapSize.height * map.tileSize.height;
CGPoint origin = ccp(tileCoords.x * map.tileSize.width, levelHeightInPixels -    ((tileCoords.y + 1) * map.tileSize.height));
return CGRectMake(origin.x, origin.y, map.tileSize.width, map.tileSize.height);
} 
```

这就是我用来将常规坐标转换为瓦片地图坐标的方法。

现在我正试图在特定位置产生一个敌人（0,0）

```
 -(void)addsaw{

CCSprite *saw = [CCSprite spriteWithFile:@"saw.png"]; 
// Determine where to spawn the target along the Y axis
CGSize winSize = [[CCDirector sharedDirector] winSize];
int minY =saw.contentSize.height/2;
int maxY = winSize.height - saw.contentSize.height/2;
int rangeY = maxY - minY;
int actualY =  ( rangeY) + minY;

//THIS IS THE PROBLEM RIGHT HERE
saw.position = ccp(0,0);
[self addChild:saw];
// Create the actions
id actionMove = [CCMoveTo actionWithDuration:actualDuration 
                                    position:ccp(-saw.contentSize.width/2, actualY)];
id actionMoveDone = [CCCallFuncN actionWithTarget:self 
                                         selector:@selector(spriteMoveFinished2:)];
[saw runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];
saw.tag = 1;
[_saws addObject:saw];

   } 
```

如何更改我的addsaw的ccp，以便我可以让它在瓷砖（0,0）而不是cocos2d常规（0,0）产生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:36:53.870

您应该将精灵添加到您的 cctmxtiledmap 而不是图层！

# soap - 如何重新初始化 angularjs 应用程序

> ID：12022831
> 
> 赞同：1
> 
> 时间：2012-08-18T22:51:27.000
> 
> 标签：soap, soap-client, angularjs

这是我的代码：

```
function MainCtrl($scope) {
    $scope.thisarray = globalObj;

    $scope.loadthis = function (index) {
        return thisarray[index];
    }
} 
```

这是标记：

```
<table ng-controller="MainCtrl">
    <tr>
        <td ng-repeat="element in thisarray">
            {{loadthis($index)}}
        </td>
    </tr>
</table> 
```

我正在通过`SOAP`回调加载一些数据：

```
 SOAPCLient.invoke(url, methodName, pl, true, function(obj) {globalObj = obj;

    **angular.bootstrap("html");**//here is where I try to reinitialize the app 

}); 
```

如果您查看`SOAP`呼叫，我`bootstrap`会重新初始化应用程序，但它一直没有工作。`loadthis`不显示 HTML 表内的任何数据。有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:21:59.780

每次从外部源获得数据时，您不应该重新初始化 AngularJS 应用程序。与其销毁和重新创建 AngularJS，不如在范围对象上使用 $apply 方法。

伪代码（在您的控制器中）如下所示：

```
SOAPCLient.invoke(url, methodName, pl, true, function(obj) {
    $scope.apply(function(){
        $scope.thisarray = obj;
    });
}); 
```

此外，如果我正确理解您的代码，您将为转发器（ng-repeat）中的每个项目调用 SOAP 调用，而您的 SOAP 调用为所有对象带回数据。因此，更好的方法是进行 SOAP 调用（如上面的代码片段），将数据分配给范围内的变量，然后让 ngRepeat 发挥作用。

我可能会误解您在这里尝试实现的目标，因此在您的代码中使用 jsFiddle / plunker 将有助于提供更详细的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T01:46:37.960

您可以使用 $.watch 监听 SOAP 的更改，然后在尝试强制推送时使用 $.apply。[在此处](http://docs.angularjs.org/api/)查看如何使用的示例

# java - 将 CountDownTimer 转换为我的 SimpleDateFormat 输出时出现问题

> ID：12022832
> 
> 赞同：0
> 
> 时间：2012-08-18T22:51:27.837
> 
> 标签：java, android, simpledateformat, countdowntimer

我有一个倒计时的计时器。我希望显示的格式为 00.00 或“ss.SS”。但是，我在几个小时内没有取得任何进展。如果没有 SimpleDateFormat，它会显示 01.91，然后转到 01.9。这使得它很难看，因为它会闪烁以保持视图居中。我真正想要的是一种保持格式 01.90 并且不允许删除 0 的方法。我可以在没有 SimpleDateFormat 的情况下使用我的原始代码完成此操作吗？

```
/*
 *  This is my original code before I tried the SimpleDateFormat
 *
 *  This code is fully functional and works good, it just keeps dropping the 0 every
 *     10 milliseconds and makes the view shake
 *
 *  getTimeSecs() could return 5, 10, 15, 30, 90 seconds converted to milliseconds
 *  getCountDownInterval() returns 10
 *  
 */

public void createTimer() {
    myCounter = new CountDownTimer(getTimeSecs(), getCountDownInterval()) {
        public void onTick(long millisUntilFinished) {
        timerIsRunning = true;

            if(millisUntilFinished < 10000) {
                TVcountDown.setText("0" + ((millisUntilFinished / 10) / 100.0));
            } else {
                TVcountDown.setText("" + ((millisUntilFinished / 10) / 100.0));
            }
        } //end onTick()

        @Override
        public void onFinish() {  
            timerIsRunning = false;
            TVcountDown.setBackgroundColor(myRes.getColor(R.color.solid_red));
            TVcountDown.setTextColor(myRes.getColor(R.color.white));
            TVcountDown.setText("Expired");

            // Make sure vibrate feature is enabled
            if(wantsVib == true) {
            vib.vibrate(300);
            }

        } //end onFinish()

    }.start();

} //end createTimer() 
```

这是我尝试 SimpleDateFormat 后的代码

```
public void createTimer() {
    myCounter = new CountDownTimer(getTimeSecs(), getCountDownInterval()) {
        public void onTick(long millisUntilFinished) {
        timerIsRunning = true;
            long current = (long) ((millisUntilFinished / 10) / 100.0);
            TVcountDown.setText("" + timerDisplay.format(current));
        }

        @Override
        public void onFinish() {  
            timerIsRunning = false;
            TVcountDown.setBackgroundColor(myRes.getColor(R.color.solid_red));
            TVcountDown.setTextColor(myRes.getColor(R.color.white));
            TVcountDown.setText("Expired");

            // Make sure vibrate feature is enabled
            if(wantsVib == true) {
                vib.vibrate(300);
            }

        }

    }.start();

} //end createTimer() 
```

我知道！我什至不认为我接近使用 SimpleDateFormat 得到它，我感到很沮丧。它运行，但只在毫秒方面倒计时。所以 15 秒显示 00.15 而不是 15.00。

我不希望有人为我编写所有代码，只需要指出正确的方向。我能找到的所有教程都涉及年、日等，我无法从中掌握概念。

我不想使用 SimpleDateFormat——因为它对我来说并不简单——只需使用我的原始代码并每 10 毫秒在毫秒侧的末尾添加一个零。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:51:08.803

试试这个：

```
TVcountDown.setText(convertToMyFormat(millisUntilFinished)); 
```

和`convertToMyFormat()`方法：

```
public String convertToMyFormat(long ms) {
    String secString, msecString;
    //constructing the sec format:
    int sec = (int) (ms / 1000);
    if(sec < 10)        secString = "0"+sec;
    else if(sec == 0)   secString = "00";
    else                secString = ""+sec;
    //constructing the msec format:
    int msec = (int) ((ms-(sec*1000))/10.0);
    if(msec < 10)       msecString = "0"+msec;
    else if(msec == 0)  msecString = "00";
    else                msecString = ""+msec;

    return secString+":"+msecString;
} 
```

我不确定我`msec`是否正确地完成了该部分，但您可以随意调整它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:00:19.193

将数字转换为字符串，它将保持格式化。另外你可以做这样的事情

```
 public String NumToStr(long i){
    if (i < 10 ) {
        return ("0" + Long.toString(i));
    }
        return Long.toString(i);
    } 
```

确保“9”总是以“09”返回。现在将字符串设置为文本。

实际上可能更容易的是

```
 if(millisUntilFinished < 10000) {
            TVcountDown.setText("0" + Long.toString((millisUntilFinished / 10) / 100.0));
    } else {
            TVcountDown.setText("" + Long.toString((millisUntilFinished / 10) / 100.0));
    } 
```

使用 Float.toString() 或 Double.toString，或任何你需要的东西。如果需要，不要害怕编写一个小函数来编辑字符串以使其显示为您想要的。

```
 public String KeepFirstTwoCharOfString(String string){
      //code to store first two Char into string
      // return the string containing only first 2 chars
  } 
```

# java - JAR 文件未正常运行

> ID：12022835
> 
> 赞同：-2
> 
> 时间：2012-08-18T22:52:09.703
> 
> 标签：java, jar, runnable

我创建了一个可运行的 jar 文件，其中包含以下类：

Main.class（这包含主要方法）

表单类

WrapLayout.class

清单文件 (Manifest.txt) 包含以下内容：

```
Main-Class: Main 
```

（它在末尾有一个新行）

我使用以下命令创建了 jar 文件：

```
jar cfm Organizer.jar Manifest.txt Main.class Form.class WrapLayout.class 
```

jar 文件已创建，但当我运行它时，命令窗口会打开片刻，然后关闭，然后什么也没有发生。该文件是一个 Swing 应用程序，我在 Parallels Desktop for Mac 上运行 Windows XP，但我认为这并不重要。有谁知道出了什么问题？

编辑：我尝试在 mac 中运行 jar 文件，并在控制台中收到此错误消息：

```
Exception in thread "main"
java.lang.UnsupportedClassVerionError: Main : Unsupported major.minor version51.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:37:13.930

按照以下步骤进行测试：

1.  启动命令提示符。导航到保存类文件的文件夹：C:>cd \mywork
2.  设置路径以包含 JDK 的 bin。例如：C:\mywork> 路径 c:\Program Files\Java\jdk1.5.0_09\bin;%path%
3.  编译你的类： C:\mywork> javac *.java
4.  创建清单文件： C:\mywork> echo Main-Class: YourMainClass >manifest.txt
5.  创建 jar 文件：C:\mywork> jar cvfm YourMainClass.jar manifest.txt *.class
6.  测试你的 jar：C:\mywork> YourMainClass.jar

# javascript - javascript 表单操作 changesrc 方法 post 文本输入 onsubmit

> ID：12022844
> 
> 赞同：0
> 
> 时间：2012-08-18T22:53:00.733
> 
> 标签：javascript, html, forms

我只是想将表单的文本输入发布到带有返回的 iframe 中，没有提交按钮。

```
function changesrc(main, url) {
document.getElementById('main').setAttribute('src', url);
} 
```

我的主要 iframe

```
<div id="frame"><iframe id="main" name="main" type="text/html" src="" frameborder="0" allowtransparency="true"></iframe> 
```

实际的文本输入父表单让我失望了......

```
<form id="url" onSubmit='changesrc('main', target)' method="post"><div id=target><input type="text" name="target" id="target" size="65"></div></form> 
```

请不要影响或降级，我知道这段代码很糟糕......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:51:16.620

您发布的代码有几个明显的问题：

```
function changesrc(main, url) {
    document.getElementById('main').setAttribute('src', url);
} 
```

此外，要访问元素`src`的`main`，只需使用点表示法，结果如下：

```
function changesrc(main, url) {
    document.getElementById(main).src = url;
} 
```

在上面的函数中，你应该使用提供给函数的参数作为字符串中的字符串`document.getElementById()` *或*字符串（就像你现在一样），但是如果你正在传递参数，你可能应该使用它（否则没有意义）。

```
<form id="url" action='changesrc('main', target)' method="post">
    <div id=target>
        <input type="text" name="target" id="target" size="65"></div>
    </form>
</div> 
```

在此，您尝试使用相同的字符串分隔符在字符串中引用字符串。要解决该问题，您应该在双引号分隔的字符串中使用单引号：

```
<form id="url" action="changesrc('main', target)" method="post"> 
```

或者在单引号分隔的字符串中使用双引号：

```
<form id="url" action='changesrc("main", target)' method="post"> 
```

该`action`属性用于指定表单数据应该提交到哪里，例如服务器端脚本；不适用于客户端事件处理；如果必须使用内联事件处理，则应使用`onkeypress`事件处理程序：

```
<form id="url" onkeypress="changesrc('main', target)" method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:54:06.443

检查您的代码：

在

```
<form id="url" action='changesrc('main', target)' method="post"><div id=target><input type="text" name="target" id="target" size="65"></div></form> 
```

你有`action='changesrc('main', target)'`。应该是`action="changesrc('main', target)"`，因为属性应该是双引号，如果你想要它们单引号，你应该转义其他单引号。

但`target`属性是您要将表单发送到的文件。您想在提交`changesrc`表单时执行，所以它是`onsubmit="changesrc('main',target)"`.

但是我们有`onsubmit="changesrc('main', target)"`. `target`但是，您需要输入的值而不是未定义的变量`id="target"`。那么，就是`onsubmit="changesrc('main', document.getElementById('target').value)"`。但是在调用那个函数之后，我猜你不想将表单发送到服务器，所以我们需要`onsubmit="changesrc('main',document.getElementById('target').value);return false;"`

但问题是你有两个元素`id="target"`。因此，将其从`<div>`.

那么，你有

```
function changesrc(main, url) {
    document.getElementById('main').setAttribute('src', url);
} 
```

好吧，它有效，但您没有使用参数`main`。我猜你想要

```
function changesrc(main, url) {
    document.getElementById(main).setAttribute('src', url);
} 
```

最终代码是：

HTML：

```
<form id="url" onsubmit="changesrc('main',document.getElementById('target').value);return false;" method="post">
    <div>
        <input type="text" name="target" id="target" size="65">
    </div>
</form>

<div id="frame">
    <iframe id="main" name="main" type="text/html" src="" frameborder="0" allowtransparency="true"></iframe>
</div> 
```

JavaScript：

```
function changesrc(main, url) {
    document.getElementById(main).setAttribute('src', url);
} 
```

你可以在这里看到它：http: [//jsfiddle.net/UsGJb/](http://jsfiddle.net/UsGJb/)

# ios - Phonegap SQLite 插件 预填充数据库 iOS

> ID：12022845
> 
> 赞同：0
> 
> 时间：2012-08-18T22:53:07.113
> 
> 标签：ios, sqlite, cordova

我想用我的应用程序分发一个填充的数据库。我正在尝试实现[SQLitePlugin](https://github.com/chbrody/Cordova-SQLitePlugin)，但正如页面所述，没有任何关于如何在 iOS 上执行此操作的文档。我试图实施这个[过时](http://gauravstomar.blogspot.ca/2011/08/prepopulate-sqlite-in-phonegap.html)的步骤，但没有任何运气。有没有人这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:48:32.473

我找到了一个至少对我有用的解决方案，所以这里是：

我使用并遵循了您提到的链接中的教程：http: [//gauravstomar.blogspot.fr/2011/08/prepopulate-sqlite-in-phonegap.html](http://gauravstomar.blogspot.fr/2011/08/prepopulate-sqlite-in-phonegap.html)

一定要复制并过去好的 database.db 和 000...001.db（好的要么在 /Caches 和 /Caches/file_0 文件夹中，要么在 /WebKit 和 /WebKit/file__0 中，我不记得了如果它不起作用，请尝试一个然后另一个）。然后我将它们粘贴到我的资源项目目录中。

我修改了这两行：

```
NSString *masterPath = [libraryDir stringByAppendingPathComponent:@"WebKit/Databases/"];
NSString *databasePath = [libraryDir stringByAppendingPathComponent:@"WebKit/Databases/file__0/"]; 
```

通过以下几行：

```
NSString *masterPath = [libraryDir stringByAppendingPathComponent:@"Caches/"];
NSString *databasePath = [libraryDir stringByAppendingPathComponent:@"Caches/file__0/"]; 
```

从您的模拟器/设备中删除您的应用程序。然后运行..它可以工作，我的数据库是预先填充的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T20:31:24.170

我将数据库放在 Resources 文件夹中，并将此代码放在`MainViewController.m`.

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"this.db"];

if ([fileManager fileExistsAtPath:databasePath] == NO) {
    NSString *resourcePath = [[NSBundle mainBundle] pathForResource:@"this" ofType:@"db"];
    [fileManager copyItemAtPath:resourcePath toPath:databasePath error:&error];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T01:26:04.650

以下内容来自一篇博客文章——但在我引用它之前，我因为发布链接而受到了轻微的打击。不过，我会在最后发布 URL，我建议您去那里获取完整的解释和一些后续评论。这种帮助归功于 Scott Buckel。

1）使用这个插件：[https ://github.com/chbrody/Cordova-SQLitePlugin/](https://github.com/chbrody/Cordova-SQLitePlugin/)

2) 将您的 sqlite db 文件复制到 PhoneGap 的 /assets 文件夹。

3) 然后，按照此处的说明操作：http: [//gauravstomar.blogspot.com/2011/08/prepopulate-sqlite-in-phonegap.html](http://gauravstomar.blogspot.com/2011/08/prepopulate-sqlite-in-phonegap.html)将文件复制到本机存储。更改 this.copy("Databases.db","/data/data/"+pName+"/app_database/");

3a) 使用您的数据库文件名，而不是 Databases.db。3b) 使用“databases”代替 app_database 3c) 您可能希望从 /assets 中删除该文件，因为它是重复的且不再需要。我的应用程序是它需要的大小的两倍。

4）（不确定这一步是否必要，我今天要离开办公室）。编辑 SQLitePlugin.java

4a) 第 176 行，我编辑了 1==1 以便始终执行 if 语句。第 179 行我更改了 this.setStorage(appPackage, false); 到 this.setStorage(appPackage, true);

5）然后您可以使用以下命令打开数据库并将其用作任何其他PhoneGap数据库

5a) var db = window.sqlitePlugin.openDatabase("[full_database_name_including_extension]", "1.0", "PhoneGap Demo", 200000);

完整的博客文章：[http ://www.raymondcamden.com/index.cfm/2012/7/27/Guest-Blog-Post-Shipping-a-populated-SQLite-DB-with-PhoneGap](http://www.raymondcamden.com/index.cfm/2012/7/27/Guest-Blog-Post-Shipping-a-populated-SQLite-DB-with-PhoneGap)

# java - LWJGL 包括 GUI 类？

> ID：12022847
> 
> 赞同：2
> 
> 时间：2012-08-18T22:53:10.597
> 
> 标签：java, user-interface, lwjgl

LWJGL 是否包含 GUI 类，还是您必须手动编写所有按钮和内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T22:56:27.733

据我所知，LWJGL 不附带 UI 库。不过，社区制作的很少。想到了[TWL 。](http://twl.l33tlabs.org/)它是由 LWJGL 的一位贡献者编写的。

# jquery - jQuery动画左侧：'-125％'不起作用

> ID：12022851
> 
> 赞同：-2
> 
> 时间：2012-08-18T22:53:48.143
> 
> 标签：jquery, animation, jquery-animate

我有一个正在尝试构建的向导，但动画无法正常工作。

```
 jQuery('#btnNext').on('click', function () {
        jQuery('#page_' + currentPage).animate(
            {
                left: '-125%'
            },
            200
        );
    }); 
```

在我的 chrome 调试器中，左侧元素被应用，但 div 根本没有移动。我的 CSS 看起来像这样：

```
.wizard 
{
    display:block;
    overflow: hidden;
    padding: 0;
}
.wizardPage
{
    display: block;
    border: 1px solid gray;
    border-radius: 1em; 
    margin-bottom: 1em;
    width: 796px;
}
#btnFirst, #btnPrevious{ float: left; margin-right: 0.5em;}
#btnNext, #btnFinish{float: right; margin-left: 0.5em; }
.wizard .wizardPage, #pageNavigator .navButton
{
    display: none;
}
#pageNavigator{width: 796px;} 
```

HTML 看起来像这样：

```
<div id="pageContainer" class="wizard">
    <div class="wizardPage" id="page_1">
        <div class="editLine">
            <label for="FirstName">
                First Name:</label>
            <input class="text-box single-line" data-val="true" data-val-length="The field First Name must be a string with a maximum length of 40."
                data-val-length-max="40" data-val-required="The First Name field is required."
                id="FirstName" name="FirstName" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="FirstName" data-valmsg-replace="true">
            </span>
        </div>
        <div class="editLine">
            <label for="MiddleName">
                Middle Name:</label>
            <input class="text-box single-line" data-val="true" data-val-length="The field Middle Name must be a string with a maximum length of 40."
                data-val-length-max="40" data-val-required="The Middle Name field is required."
                id="MiddleName" name="MiddleName" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="MiddleName" data-valmsg-replace="true">
            </span>
        </div>
        <div class="editLine">
            <label for="LastName">
                Last Name:</label>
            <input class="text-box single-line" data-val="true" data-val-length="The field Last Name must be a string with a maximum length of 40."
                data-val-length-max="40" data-val-required="The Last Name field is required."
                id="LastName" name="LastName" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="LastName" data-valmsg-replace="true">
            </span>
        </div>
        <div class="editLine">
            <label for="State" title="Due to state registration requirements, we are currently accepting investors from select states.">
                State of Residence:</label>
            <select name="State" id="State">
                <option value=""></option>
                <option value="AK" title="Alaska">AK</option>
                <option value="AL" title="Alabama">AL</option>
                <option value="AR" title="Arkansas">AR</option>
                <option value="AZ" title="Arizona">AZ</option>
                <option value="CA" title="California">CA</option>
                <option value="CO" title="Colorado">CO</option>
                <option value="CT" title="Connecticut">CT</option>
                <option value="DC" title="District of Columbia">DC</option>
                <option value="DE" title="Delaware">DE</option>
                <option value="FL" title="Florida">FL</option>
                <option value="GA" title="Georgia">GA</option>
                <option value="HI" title="Hawaii">HI</option>
                <option value="IA" title="Iowa">IA</option>
                <option value="ID" title="Idaho">ID</option>
                <option value="IL" title="Illinois">IL</option>
                <option value="IN" title="Indiana">IN</option>
                <option value="KS" title="Kansas">KS</option>
                <option value="KY" title="Kentucky">KY</option>
                <option value="LA" title="Louisiana">LA</option>
                <option value="MA" title="Massachusetts">MA</option>
                <option value="MD" title="Maryland">MD</option>
                <option value="ME" title="Maine">ME</option>
                <option value="MI" title="Michigan">MI</option>
                <option value="MN" title="Minnesota">MN</option>
                <option value="MO" title="Missouri">MO</option>
                <option value="MS" title="Mississippi">MS</option>
                <option value="MT" title="Montana">MT</option>
                <option value="NC" title="North Carolina">NC</option>
                <option value="ND" title="North Dakota">ND</option>
                <option value="NE" title="Nebraska">NE</option>
                <option value="NH" title="New Hampshire">NH</option>
                <option value="NJ" title="New Jersey">NJ</option>
                <option value="NM" title="New Mexico">NM</option>
                <option value="NV" title="Nevada">NV</option>
                <option value="NY" title="New York">NY</option>
                <option value="OH" title="Ohio">OH</option>
                <option value="OK" title="Oklahoma">OK</option>
                <option value="OR" title="Oregon">OR</option>
                <option value="PA" title="Pennsylvania">PA</option>
                <option value="RI" title="Rhode Island">RI</option>
                <option value="SC" title="South Carolina">SC</option>
                <option value="SD" title="South Dakota">SD</option>
                <option value="TN" title="Tennessee">TN</option>
                <option value="TX" title="Texas">TX</option>
                <option value="UT" title="Utah">UT</option>
                <option value="VA" title="Virginia">VA</option>
                <option value="VT" title="Vermont">VT</option>
                <option value="WA" title="Washington">WA</option>
                <option value="WI" title="Wisconsin">WI</option>
                <option value="WV" title="West Virginia">WV</option>
                <option value="WY" title="Wyoming">WY</option>
            </select>
            <span class="field-validation-valid" data-valmsg-for="State" data-valmsg-replace="true">
            </span>
        </div>
        <div class="editLine">
            <label for="BirthDate" title="You must be at least 18 years old to participate in Charlesfund.com.">
                Birth Date:</label>
            <input class="datePicker" data-val="true" data-val-required="The Birth Date field is required."
                id="BirthDate" name="BirthDate" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="BirthDate" data-valmsg-replace="true">
            </span>
        </div>
    </div>
    <div class="wizardPage" id="page_2">
        Page 2<br />
        blah bla blah
    </div>
    <div id="pageNavigator">
        <a class="navButton" id="btnFirst">&lt;&lt; First</a> <a class="navButton" id="btnPrevious">
            &lt; Previous</a> <a class="navButton" id="btnFinish">Last &gt;&gt;</a> <a class="navButton"
                id="btnNext">Next &gt;</a>
    </div>
</div> 
```

有人可以告诉我我做错了什么吗？我应该提到 div 在`ready()`函数中可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:22:01.200

如果您不想将对象的位置更改为绝对位置，则可以尝试使用 margin-left 来代替。

```
$('body').on('click','#btnNext', function () {
    $('#page_1').animate(
        {
             'margin-left': '-125%'
        },
        200
    );
});​ 
```

# php - 从漂亮的网址获取变量

> ID：12022854
> 
> 赞同：3
> 
> 时间：2012-08-18T22:54:03.353
> 
> 标签：php, .htaccess, mod-rewrite

我以前做过非常相似的事情，但由于某种原因，我在特定场景中遇到了一些困难。我想将文件夹路径作为变量传递并使其看起来很漂亮。

我有一个工作网址，例如：

```
http://mysite.com/albums/index.php?p=folder/subfolder/ 
```

我可以在没有“index.php”的情况下查看它，例如：

```
http://mysite.com/albums/?p=folder/subfolder/ 
```

我想要的是一个漂亮的 url，看起来像这样：

```
http://mysite.com/albums/folder/subfolder/ 
```

基本上，/albums/ 之后的任何内容都应该是一个变量。我玩过我的 .htaccess RewriteRule 一堆，但似乎无法让它工作。（得到 404 错误）这是我目前拥有的：

```
RewriteEngine On
RewriteRule ^albums/(.*)$ albums/?p=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:04:01.017

下面是我使用的，虽然每个调用都指向我的 index.php 文件，然后我用它做任何事情

```
 Options +FollowSymLinks
  RewriteEngine On

  RewriteCond %{SCRIPT_FILENAME} !-d
  RewriteCond %{SCRIPT_FILENAME} !-f

  RewriteRule ^.*$ ./index.php 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:57:38.720

更改`(.*)`为`(.+)`以确保 之后至少有一个字符`/`，否则您的规则循环...

# html - 使元素填充其容器中剩余的垂直空间的正确方法是什么

> ID：12022855
> 
> 赞同：0
> 
> 时间：2012-08-18T22:54:10.297
> 
> 标签：html, css

我有一个设置高度的 div，它将容纳任意元素和另一个我希望填充剩余空间的 div，以便填充 div。 [jsfiddle](http://jsfiddle.net/wTmVk/)

html:

```
<div class=container>
    <div class=title>
        <h1> title </h1>
    </div>
    <div class=body>
        <h1> stuff here </h1>    
    </div>
</div>​ 
```

CSS：

```
.container {
    border: 1px red solid;
    height: 300px;
}
.title {
    background: blue;    
}
.body {
    background: green;
} 
```

我希望绿色 div 填充红色边框内的空白区域，使其看起来像[这样](http://jsfiddle.net/keDNY/1/)，但没有明确设置高度，因为标题和包含 div 的大小是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:57:16.720

我会这样做的方式是将标题*放在*正文中。然后你可以将 body 高度设置为 100%（因为它的容器有一个固定的高度）并且标题只会填充它需要的内容，并有自己的背景。通过将相关元素组合到一个容器中，在布局中移动内容也会变得更加简单。

html:

```
<div class=container>
    <div class=body>
        <div class=title>
            <h1> title </h1>
        </div>
    <h1> stuff here </h1>    
    </div>
</div>​ 
```

CSS：

```
.container {
    border: 1px red solid;
    height: 300px;
}
.title {
    background: blue;

}
.body {
    height:100%;
    background: green;
} 
```

您始终可以在容器内添加另一个元素来包含您的多选，并让它继承父容器的属性。

# php - 如何在模板中包含 PHP？

> ID：12022858
> 
> 赞同：0
> 
> 时间：2012-08-18T22:54:54.580
> 
> 标签：php, wordpress, wordpress-theming

我正在尝试使用[WP Ultimate Search](http://wordpress.org/extend/plugins/wp-ultimate-search/installation/) ，它说：

> 使用 wp_ultimate_search_bar() 调用搜索栏 使用 wp_ultimate_search_results() 渲染搜索结果区域

我试过`<?php wp_ultimate_search_bar(); ?>`没有运气..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:59:06.080

`<?php echo wp_ultimate_search_bar(); ?>`将和添加`<?php echo wp_ultimate_search_results(); ?>`到 .php 文件

# delphi - DUnit2 的 CallerAddr 函数有什么作用，如何将其转换为 64 位？

> ID：12022862
> 
> 赞同：7
> 
> 时间：2012-08-18T22:55:45.367
> 
> 标签：delphi, assembly, 32bit-64bit

我试图让 DUnit2 在 64 位下工作，但我对这种方法的作用感到困惑，更不用说如何将其转换为 64 位了。纯 Pascal 会更好，但由于它指的是堆栈 (ebp)，所以它可能是不可能的。

```
function CallerAddr: Pointer; assembler;
const
  CallerIP = $4;
asm
   mov   eax, ebp
   call  IsBadPointer
   test  eax,eax
   jne   @@Error

   mov   eax, [ebp].CallerIP
   sub   eax, 5   // 5 bytes for call

   push  eax
   call  IsBadPointer
   test  eax,eax
   pop   eax
   je    @@Finish

@@Error:
   xor eax, eax
@@Finish:
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T01:31:33.803

```
function RtlCaptureStackBackTrace(FramesToSkip: ULONG; FramesToCapture: ULONG; 
  out BackTrace: Pointer; BackTraceHash: PULONG): USHORT; stdcall; 
  external 'kernel32.dll' name 'RtlCaptureStackBackTrace' delayed;

function CallerAddr: Pointer;
begin
  // Skip 2 Frames, one for the return of CallerAddr and one for the
  // return of RtlCaptureStackBackTrace
  if RtlCaptureStackBackTrace(2, 1, Result, nil) > 0 then
  begin
    if not IsBadPointer(Result) then
      Result := Pointer(NativeInt(Result) - 5)
    else
      Result := nil;
  end
  else
  begin
    Result := nil;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-18T23:09:51.270

```
function CallerAddr: Pointer; assembler;
    const
      CallerIP = $4;
    asm
       mov   rax, rcx ;For int.. XMM0 for float
       call  IsBadPointer
       test  rax,rax
       jne   @@Error

       mov   rax, [rcx].CallerIP
       sub   rax, 5   // 5 bytes for call

       push  rax
       call  IsBadPointer
       test  rax,rax
       pop   rax
       je    @@Finish

    @@Error:
       xor rax, rax
    @@Finish:
    end; 
```

# c# - 如何修改字典中的元素？

> ID：12022865
> 
> 赞同：0
> 
> 时间：2012-08-18T22:56:05.693
> 
> 标签：c#, dictionary

有没有办法改变索引元素的值而不像这样删除它？

```
// Dictionary<?,int> runningcount = …;
int value = runningcount[city];
runningcount.Remove(city);
runningcount.Add(city, ++value); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:02:12.960

可以像这样增加值：

```
runningcount[city]++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:01:04.663

您可以同时执行这两项操作：

```
runningcount[city] ++; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T22:59:45.047

当你知道钥匙给它一个新的价值时，你可以尝试一些类似的东西

```
runningcount[Keyvaluetoreplace] = newreplacedvalue; 
```

# ios - 如何使用带有 NSURLRequest 的 cookie 从 WEBserver 获取 JSON 数据？

> ID：12022869
> 
> 赞同：1
> 
> 时间：2012-08-18T22:56:22.057
> 
> 标签：ios, json, https, webserver, nsurlconnection

我在尝试从我们公司需要身份验证的站点之一获取 JSON 页面时遇到问题。

- [http://xyz.com](http://xyz.com) - 需要身份验证
- 我需要从[http://xyz.com/jsonpage1](http://xyz.com/jsonpage1)
获取数据 - 在 View DidLoad 中，我发送用户和密码用于登录以建立会话
- 然后，我有一个按钮将请求 JSON。

此序列不起作用（意味着如果会话加载代码与 json 加载代码位于不同的例程中）。如果我在同一个例程中都有这两个代码，比如视图 didLoad，那么它似乎可以识别我的凭据并取回 JSON。奇怪的！我错过了什么？应该如何工作？我认为建立会话会创建一次 cookie 而无需再次打扰它？当我单击按钮时，我是否以某种方式丢失了 cookie？

```
-(void)viewDidLoad
{
  [self establishSession];
}

-(void)establishSession{   
//
//Login Session
//
NSURL *url = [NSURL URLWithString:@"http://xyz.com/login"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

NSString *post = [NSString stringWithFormat:@"username=%@&password=%@",@"abc",@"123"];
NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

[request setValue:[NSString stringWithFormat:@"%d",[postData length]] forHTTPHeaderField:@"Content-Length"];
[request setTimeoutInterval:15];
[request setHTTPBody:postData];
[request setHTTPMethod:@"POST"];

urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[urlConnection start]; 
```

}

```
- (IBAction)getJSON:(id)sender
{
 NSError *error = nil;

resultsView.text =@"";

[self establishLoginSession];   //I have to have this line here to get it to work ?????

//get JSON

NSURL *jurl = [NSURL URLWithString:@"http://xyz.com/jsonPage1"];

NSData *jdata = [NSData dataWithContentsOfURL:jurl options:NSDataReadingUncached error:&error];
NSDictionary* jsonDict = [NSJSONSerialization
                      JSONObjectWithData:jdata //1
                      options:kNilOptions
                      error:&error];

NSString *dataString = [[NSString alloc]initWithData:jdata encoding:NSUTF8StringEncoding];
resultsView.text = dataString;
} 
```

```
//Not sure if I need the cookie??
-(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse  *)response
{

NSHTTPURLResponse *HTTPResponse = (NSHTTPURLResponse*) response;
NSDictionary *fields = [HTTPResponse allHeaderFields];

if([fields valueForKey:@"Set-Cookie"])
   cookie = [fields valueForKey:@"Set-Cookie"];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T05:35:54.833

您只能对一个`NSURLConnection`对象发出一个请求，因此您应该在发出请求之前立即创建它。

# c# - Messagebox 是类还是对象？

> ID：12022870
> 
> 赞同：1
> 
> 时间：2012-08-18T22:56:24.450
> 
> 标签：c#

我在初学者水平学习C#。通常在 C++ 中，如果我们需要访问类的方法/值，我们必须声明一个对象实例，并且只有通过对象才能访问该方法。但是在 C#.Net 中我了解到静态公共类我们不需要声明对象，我们可以直接使用 class.method() 名称调用方法。当我们引用标准类库类（例如消息框）时，请您澄清一下。

System.Windows.MessageBox.ToShow()

System.Windows - 它的名称空间。
ToShow - 它的方法
MessageBox - Messagebox 是类还是对象？

当我们引用任何属于该类的方法时，我相信所有标准的 .NET 类库名称空间都会通过构造函数在内部创建对象实例。它的对象名称始终与构造函数创建的类名称相同。如果我的理解有误，请纠正我。

谢谢， 卡里卡兰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T23:00:20.207

MessageBox 是一个**类**

[http://msdn.microsoft.com/en-us/library/system.windows.messagebox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.messagebox.aspx)

`Show`是类的**静态**方法`MessageBox`。您可以按格式调用静态方法*`ClassName.MethodName`*

另一件事`MessageBox`是它是一个`sealed`类。[密封](http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.100%29.aspx)类不能被继承。这意味着您不能从此类派生自定义类。

有关静态类和方法的更多信息[在这里得到了很好的解释](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:23:43.460

> 当我们引用任何属于该类的方法时，我相信所有标准的 .NET 类库名称空间都会通过构造函数在内部创建对象实例。它的对象名称始终与构造函数创建的类名称相同。

一点也不。只有**静态方法**可以直接从类中访问。要调用**实例方法**，您需要类的实例（即对象）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T23:03:16.067

MessageBox 是一个密封类，它有一个静态方法`ToShow()`。并且要访问静态方法，您不需要创建实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T23:01:33.303

```
System.Windows.MessageBox.Show();

System.Windows is namespace 
MessageBox is a class
Show is a static method 
```

# actionscript-3 - AS3 - 试图声明影片剪辑的价值

> ID：12022874
> 
> 赞同：0
> 
> 时间：2012-08-18T22:57:33.120
> 
> 标签：actionscript-3, movieclip

好的，我的 Bullet.as 文件中有以下代码：

```
public var impact:MovieClip;

public function Bullet():void
{
    addEventListener(Event.ADDED_TO_STAGE, whenAdded);
}

function whenAdded(e:Event)
{
    if(this is zArrow){
       power = -1;
       speed = 15;
       impact = arrowImpact;
       trace(impact);
    }
    if(this is Dice){
       power = -Math.round(Math.random()*5 + 1);
       speed = 10;
       impact = diceImpact
    }
} 
```

看，我正在尝试将“public var Impact：MovieClip”的值设置为影片剪辑“arrowImpact”或“diceImpact”。我想要的是每当子弹与敌人相撞时，它会留下一个影响图像，我试图根据碰撞的子弹改变显示的影响。

我可以使用此设置更改所有其他变量，例如功率和速度，但我无法声明“影响”影片剪辑变量是哪个影响影片剪辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:25:55.063

从我现在理解您的问题的方式来看，您想从库中提取这些特定的电影剪辑。如果我没有记错的话。为此，您需要将库中的每个影片剪辑与扩展 MovieClip 的 AS 类配对。

确保选中“Export for Actionscript”并为每个创建所需的类。然后，在您的 Bullet 代码中，您可以创建它们的新实例。所以说：

```
impact = new ArrowImpact)(); 
```

或 DiceImpact 取决于您的课程。

希望这与您想要的一致。

为了使用这些，我建议按照以下方式创建一个 getImpact 方法：

```
public function getImpactMC():MovieClip
{
    return impact;
} 
```

那么你需要在你的主文档中做的就是 addChild 这个方法的正确影响。但是，请注意，您需要先调整 ImpactMC 的 x 和 y 值，然后再将其作为子级添加到舞台上，以确保它显示在正确的位置。

很高兴这有帮助！

# wordpress - wordpress wp-login.php?redirect_to 路径错误

> ID：12022877
> 
> 赞同：1
> 
> 时间：2012-08-18T22:57:40.030
> 
> 标签：wordpress, redirect, dashboard

这是一个奇怪的问题。我用谷歌搜索了几个小时，但在我看来，没有一个人有同样的问题。

我将我的网站从[http://www.domain1.com/wpfolder](http://www.domain1.com/wpfolder)移至[http://www.domain2.com](http://www.domain2.com)。一切正常，除了我无法让“wp-login.php?redirect_to”路径指向正确的 url。

WordPress 不断将其设置为：“wp-login.php?redirect_to=http://www.domain2.com/wpfolder/wp-admin&reauth=1”

它应该设置为：“wp-login.php?redirect_to=http://www.domain2.com/wp-admin&reauth=1”

“wpfolder”不再存在..

我完全按照有关如何移动 WordPress 网站的说明进行操作，但该死的 URL 不会改变......

一些论坛提到将“site_url”和“home”从“http://www.domain2.com”更改为“http://domain2.com”。现在我终于可以进入管理面板了，但我不明白为什么需要这样？

我清理了浏览器 cookie 并检查了 wp-content 文件夹中的缓存。纳达..

该网站的其余部分也可以正常工作。

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:06:19.143

我通过复制文件和数据库将 WordPress 网站从 GoDaddy 移动到 Bluehost，问题就消失了。我不确定为什么要修复它，但假设它与缓存有关。

如果有人有更多信息，我很乐意阅读。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T08:47:34.337

我遇到了同样的问题，同样重定向到安装 wordpress 的子目录之一。如果某些缓存插件处于活动状态，则通过清除缓存解决了此问题。或者通过删除缓存插件（如果存在且当前尚未激活）。由于 wp-config.php 文件中的缓存插件创建的一些条目会产生上述问题。删除缓存插件后，它解决了 WP-admin URL 问题。

# curl - Cygwin 和 Curl

> ID：12022879
> 
> 赞同：0
> 
> 时间：2012-08-18T22:58:02.983
> 
> 标签：curl, cygwin

我在目录中安装了带有 curl 的 Cygwin`C:\cygwin`

我正在尝试运行以下内容，但我得到`No such file or directory`了`INPUT_LIST.TXT`. 我已经`INPUT_LIST.TXT`放置在`C:\cygwin`. 我应该将文件放在哪里才能使以下工作？

```
xargs curl -sw “%{url_effective}\t %{http_code}\t %{redirect_url}\\n” < INPUT_LIST.TXT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:59:46.223

从您的评论中，我可以看到您已设法将文件命名`INPUT_LIST.TXT.txt`为`INPUT_LIST.TXT`.

您需要执行以下操作之一：

*   重命名文件：`mv INPUT_LIST.TXT.txt INPUT_LIST.TXT`. 然后，您应该能够按照最初编写的命令运行命令。
*   使用您创建的文件名，使用`< INPUT_LIST.TXT.txt`而不是`< INPUT_LIST.TXT`.

# php - PHP array_search() 没有返回正确的索引

> ID：12022882
> 
> 赞同：-1
> 
> 时间：2012-08-18T22:58:39.403
> 
> 标签：php, arrays

我试图在文件中找到某一行。该文件是[http://cpcheats.co/pin-tracker/swf/coffee.flr](http://cpcheats.co/pin-tracker/swf/coffee.flr)。我正在使用 php 函数 search_array()，但它没有给我正确的密钥。此代码仅返回文件的第一行：

```
$newurl = file_get_contents("http://cpcheats.co/pin-tracker/swf/coffee.flr");
$array = explode("\n",$newurl);
$key = array_search('triggers_mc.pin_mc.triggerFunction = function () {', $array);
echo $array[$key]; 
```

有谁知道为什么会这样，或者解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T23:05:51.807

发生这种情况是因为您缺少搜索词开头的 4 个空格字符。

```
$key = array_search('    triggers_mc.pin_mc.triggerFunction = function () {', $array); 
```

工作正常。

如果您不想在搜索词中包含空格，一个可能的解决方案是`$array`在调用`array_search`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:06:20.160

在搜索值前添加四个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T23:05:06.463

> *`Array_search()`如果在数组中找到 needle 的键，则返回该键，否则返回 FALSE。*
> 
> *(int)假 == 0*

你的有问题`$needle`，array_search 返回 false，因此`$key = 0`；

# php - 在字符串中搜索模式中的字母数字字符

> ID：12022884
> 
> 赞同：1
> 
> 时间：2012-08-18T22:58:53.690
> 
> 标签：php, string, pattern-matching, alpha, numeric

我有一个包含 5 个单词的字符串。在字符串中，其中一个词是业余无线电呼号，可以是美国数千个呼号中的任何一个。为了从字符串中提取呼号，我需要使用以下模式。我需要提取的呼号可以位于字符串中的 5 个位置中的任何一个。数字永远不是第一个字符，数字永远不是最后一个字符。该字符串实际上是从一个数组中组合在一起的，因为它最初是从一个文本文件中读取的。

```
$string = $word[1] $word[2] $word[3] etc.... 
```

所以搜索可以在整个字符串或数组的每一块上完成。

```
Patterns:
1 Number and 3 Letters Example: AB4C A4BC
1 Number and 4 Letters Example: A4BCD
1 Number and 5 Letters Example: AB4CDE 
```

我已经尝试了所有我能想到和搜索的东西，直到我无法再搜索。我确定我想太多了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:20:58.193

这取决于其他单词可以包含的内容，但您可以使用正则表达式，例如：

```
#\b[a-z]+\d[a-z]+\b#i
                    ^ case insensitive
                 ^^ a word boundary
           ^^^^^^ One or more letters
         ^^ One number 
```

`{1,3}`您可以通过使用而不是for 字母来使其更具限制性，`+`以便您拥有 1 到 3 个字母的序列。

完整的表达式类似于：

```
$success = preg_match('#\b[a-z]+\d[a-z]+\b#i', $input_string, $matches); 
```

where`$matches[0]`将包含匹配的值，请参阅[手册](http://php.net/manual/en/function.preg-match.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:25:31.257

像这样的两步正则表达式可以做到这一点：

```
$str = "hello A4AB there BC5AD";
$signs = array();
preg_match_all('/[A-Z][A-Z\d]{1,3}[A-Z]/', $str, $possible_signs);
foreach($possible_signs[0] as $possible_sign)
    if (preg_match('/^\D+\d\D+$/', $possible_sign))
        array_push($signs, $possible_sign);

print_r($signs); //Array ([0] => A4AB [1] => BC5AD) 
```

**解释**

这是一种正则表达式方法，使用两种模式。我不*认为*它可以用一个来完成，并且仍然满足匹配规则的确切要求。

第一个模式强制执行以下要求：

*   子字符串以大写字母开头和结尾
*   substring 仅包含第一个和最后一个字母之间的其他大写字母或数字
*   总体而言，子字符串的长度不超过 6 个字符

由于复杂的 REGEX 原因，我*不能*以同样的模式做（除非有人知道一种方法并且可以纠正我），强制只包含一个数字。

@jeroen 的答案*确实*以单一模式强制执行此操作，但反过来*又不*强制执行子字符串的正确长度。无论哪种方式，我们都需要第二种模式。

因此，在获取初始匹配后，我们循环遍历结果。然后，我们将每个应用到第二个模式，该模式简单地强制子字符串中只有*一个*数字。

如果是这样，我们将子字符串点亮并将其添加到`$signs`数组中。

希望这可以帮助。

# ajax - 从php返回数组到ajax成功

> ID：12022888
> 
> 赞同：1
> 
> 时间：2012-08-18T22:59:25.113
> 
> 标签：ajax, arrays, json

我想将一个 php 函数中的数组返回给我的 ajax 调用。之后，我想使用页面中的数组值进行 ajax 调用。

所以这是我的ajax调用：

```
 $(function() {
        $("#find").click(function() {

            var url = $("#form_url").val();
            var dataString = 'url=' + url;

            $.ajax({
                type: "POST",
                url: "/ajax/add_url.php",
                data: dataString,
                }).done(function( result ) {
                    myresult(result);
            });

            return false;
        });
    });

 function myresult(result) {
var result_lines = result.split("<splitter>");    
if (result_lines[0] == '1') { 
    $('#content_error').html(result_lines[1]).fadeIn(250);
    $('#content_error').delay(1500).fadeOut(500);
} else if (result_lines[0] == '2') { 
    $('#content_success').html('Succesfully get images').fadeIn(250);
    $('#url_result').delay(500).fadeIn(500);
    $('#content_success').delay(1500).fadeOut(500);
    alert(eval(data));
}
return true; 
```

}

这是我的 php 脚本：

```
 if($_POST['url']) {

    $url = $Db->escape($_POST['url']);

        $html = file_get_html($url);
        $count = 0;
        $goodfiles = array();

        foreach($html->find('img') as $element) {

            $pic = url_to_absolute($url, $element->src);

            if(!empty($pic)){

                $pics = parse_url($pic);
                list($width, $height, $type, $attr) = getimagesize($pic);

                if($pics["scheme"]=="http" && $width >= 300 && $height >= 250) {

                    array_push($goodfiles,$pic);
                    $_SESSION['pictures'] = $goodfiles;
                    $count++;

                }
            }
      }

        if($count == 0){ 

            $_SESSION['count'] = 'empty'; 
            echo "1<splitter>"; 
            echo "No items found with the correct size"; 

        }else{

            $_SESSION['count'] = $count;
            echo "2<splitter>";
            echo json_encode($_SESSION['pictures']); 

        }

            $_SESSION['url'] = $url;
            $html->clear();
            $empty = 1;
    }

  } 
```

当 ajax 调用成功时，我在数组上使用 json_encode 在我的 php 页面上使用它。但我不知道如何将这个数组添加到 ajax 调用所在的页面上的 javascript 中。

现在我收到以下内容：

["image.jpeg","image.jpg"]

我想把它放在一个javascript数组中......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:11:23.803

这一行的错误是：

```
var result_lines = result.split("<splitter>"); 
```

`result`（AJAX 响应）是一个对象或数组（取决于 JSON 的性质），但您正试图对其调用字符串方法 ( `split()`)。

这会在您的 JS 控制台中导致错误 -*始终检查控制台*。

最后，`eval()`是邪恶的，除非在特殊情况下，否则几乎从不需要。尽量避免它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:05:13.643

我不知道如何使用 $.ajax 但这里有一个替代方案。

替换这个

```
$.ajax({
                type: "POST",
                url: "/ajax/add_url.php",
                data: dataString,
                }).done(function( result ) {
                    myresult(result);
            }); 
```

和

```
$.post("/ajax/add_url.php",{dataString:dataString},function(data){
           alert(data['you array index']);
},'json') 
```

我再说一遍，这是我的选择，所以不要勉强！

# objective-c - 当应用程序从后台返回时，所有内容顶部的密码视图，并支持自动旋转

> ID：12022896
> 
> 赞同：0
> 
> 时间：2012-08-18T23:00:05.120
> 
> 标签：objective-c, ios, cocoa-touch, ipad, ios5

我有一个简单的基于 UITabBarController 的通用应用程序，我正在 iPad 上添加自动旋转支持，目前唯一让我头疼的是支持 PassCode 视图控制器（基于 XIB）的自动旋转。

**要求：**
1- 密码 VC 的视图将在应用程序启动时显示自动旋转支持（完成）。
2- 当应用程序从后台返回 (didBecomeActive:) 时，Passcode VC 的视图将提供自动旋转支持，并位于其他所有内容之上。

**我为要求 2 所做的尝试：**
1- 将密码的视图作为子视图添加到应用程序的窗口 (addsubview:)。效果很好，除了自动旋转不起作用（我明白为什么）。
2-将密码的视图作为子视图添加到标签栏控制器的视图 (addsubview:)。自动旋转效果很好，但是如果以模态方式呈现另一个视图控制器，则密码的视图肯定会在其下方（也可以理解）。

我可以看到其他应用程序实现了我想要的完全相同的东西，例如 DropBox 和 GoodReader。

非常感谢任何输入！
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T02:50:20.790

我不能告诉你这是最好的方法，但我们设法使用单独的窗口获得了类似的功能。我们开始使用这个库：[Block Alerts](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)，这是一个很好的起点。

这让我们有了新`UIWindow`的东西，它会出现在一切之上，但不能很好地自动旋转。但是，通过一些实验，我们发现以下内容将为我们提供所需的自动旋转：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (UIInterfaceOrientationIsPortrait(interfaceOrientation))
    {
        CGPoint newCenter = CGPointMake(kDefaultPortraitWidth / 2, (kDefaultPortraitHeight * 0.3f));
        containerView.center = newCenter;
    }
    else
    {
        CGPoint newCenter = CGPointMake(kDefaultPortraitHeight / 2, (kDefaultPortraitWidth * 0.2f));
        containerView.center = newCenter;
    }

    return YES;
} 
```

容器视图只包含我们所有的“东西”，以便更容易像这样移动。

注意：常量并不重要，请使用使您的视图正常工作的任何内容。

# php - 如何使用时间戳计算元素

> ID：12022900
> 
> 赞同：0
> 
> 时间：2012-08-18T23:00:21.470
> 
> 标签：php, mysql, timestamp, counter

我的表中有一个时间戳值，它设置为更新当前时间戳。

当用户进行 x 工作时，它会自行更新。

我想计算在过去 30 分钟内有多少用户做了 x 工作。我需要什么 mysql 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:01:45.303

您应该在查询中使用[count](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)聚合函数

```
select 
    count(timestampColumnName) 
from 
    yourtable 
where 
    timestampColumnName>date_sub(now(), interval 30 minute)
    // and any other conditions as needed 
```

# php - 使用来自 mysql 查询的 GET Id

> ID：12022905
> 
> 赞同：-1
> 
> 时间：2012-08-18T23:01:38.577
> 
> 标签：php, mysql, html, css

我正在尝试在一些 php 中运行 mysql 查询，并将结果作为 HTML 回显。我让它工作了，但现在我想在链接中插入一个 id，这样我就可以使用一个页面来获取 id。有谁知道如何做到这一点。我尝试过（但不起作用）如下。在帖子的底部是最初工作的内容，但链接上没有 id ......

```
 <?
    echo "<tr bgcolor=\"#CCCCCC\" style=\"border-bottom:1px solid gray;\"><td> Team </td><td>Correct Picks</td><td>Points</td></tr>";
    while($row = mysql_fetch_array($memberslist)) {
        if ($row['User_ID'] == $id) {
            echo "<tr bgcolor=\"#F0F0F0\"><td>" . "<a href=\"2012week1.php?id=\"$row['User_ID']\"\">$row[User_ID]</a>" . "</td><td><b>" . $row['Correct_Picks'] . " </b> /" . $maxcorrectpicks . "</td><td>" . $row['Points'] . "</td></tr>";
        } else {
            echo "<tr><td>" . "<a href=\"2012week1.php?id=\"$row['User_ID']\"\">$row[User_ID]</a>" . "</td><td><b>" . $row['Correct_Picks'] . " </b> /" . $maxcorrectpicks . "</td><td>" . $row['Points'] . "</td></tr>";
    }
    }
    ?>

 $uniqueid = $_GET["$row['User_ID']"];
 echo $uniqueid; 
```

这是从工作的第一页开始......

```
 <?
    echo "<tr bgcolor=\"#CCCCCC\" style=\"border-bottom:1px solid gray;\"><td> Team </td><td>Correct Picks</td><td>Points</td></tr>";
    while($row = mysql_fetch_array($memberslist)) {
        if ($row['User_ID'] == $id) {
            echo "<tr bgcolor=\"#F0F0F0\"><td>" . "<a href=\"2012week1.php\">$row[User_ID]</a>" . "</td><td><b>" . $row['Correct_Picks'] . " </b> /" . $maxcorrectpicks . "</td><td>" . $row['Points'] . "</td></tr>";
        } else {
            echo "<tr><td>" . "<a href=\"otherteam.php\">$row[User_ID]</a>" . "</td><td><b>" . $row['Correct_Picks'] . " </b> /" . $maxcorrectpicks . "</td><td>" . $row['Points'] . "</td></tr>";
    }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T23:18:48.303

您遇到的问题是您试图从双引号内访问数组元素。您可以通过将其包裹在花括号中来完成这项工作`{$row['User_ID']}`。

为了使您的代码更具可读性并避免此问题，只需连接或使用 echo 的值列表。我还建议使用`htmlspecialchars()`来确保您正在创建有效的 HTML。

```
echo '<tr><td>',
  '<a href="2012week1.php?id=',
  htmlspecialchars($row['User_ID']),
  '">',
  htmlspecialchars($row[User_ID]),
  '</a>',
  '</td><td>'
  //etc. 
```

# c++ - 命名可以采用两个值（真和假）的类的属性的技术术语？

> ID：12022907
> 
> 赞同：1
> 
> 时间：2012-08-18T23:01:56.913
> 
> 标签：c++, class, word, boolean

是否存在一个技术英语单词来共同命名一个类的布尔成员组来表征它？

编辑：我不是在搜索“布尔”这个词。在以下示例中，是否存在一个单词来命名以“is”开头的变量组？

```
class MyClass
{
    protected:
        double x;
        double y;
        double z;

        bool isBig;
        bool isBeautiful;
        bool isRich;
        bool isBlackAndWhite;
}; 
```

编辑：标志绝对是我搜索的词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:04:12.793

“布尔”是这种结构的正确技术术语，[源于数学](http://en.wikipedia.org/wiki/Two-element_Boolean_algebra)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:04:15.700

“布尔”*是*变量的技术术语，可以是真或假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T23:19:14.437

一般而言，“特征”是一个描述它的词，但这在 C++ 中已经具有非常具体的含义，而您所描述的不是它。

我的建议？转到在线词库，输入“特征”，然后选择返回的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T23:20:56.790

`class Is { bool value; public: const bool get(void) { return value; } const };`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T23:25:29.037

我通常不会用固定的技术术语词典来命名“子结构”。我正在尝试使用一个名称来说明结构包含的数据类型。

从技术上讲，布尔值也可以称为“标志”，但我并不肯定将所有布尔值简单地收集到“标志”结构中确实是要走的路。结构实际上应该只用于形成实际属于一起的项目组；例如，如果您发现您将一些变量命名为“Timer_xxx”，那么这些变量可能是进入结构的不错候选者，您可能会称之为“Timer”。

以类似的方式，您可能不会做类似的事情

```
struct { double x, y, z; } BigFloatyNumbers; 
```

相反，您可能会将其写为

```
struct { double x, y, z; } Position; 
```

因此，在您的情况下，也许“属性”是一个合理的名称。它甚至是通用的:-)

# android - LogCat castExeption 完全没有意义

> ID：12022912
> 
> 赞同：0
> 
> 时间：2012-08-18T23:03:17.393
> 
> 标签：android, android-widget, logcat

这是Java，其中日志猫说我有错误...我将在该行添加注释...它说我已将文本视图投射到按钮但我根本没有。

```
package k.t.m;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    TextView errors;
    TextView tkm;
    TextView result;
    TextView main;
    Button mainButton1;
    Button mainButton2;
    Button back;
    Button go;
    EditText textbox;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        main = (TextView) findViewById(R.id.main);
        back = (Button) findViewById(R.id.secondaryButtonBack);
        mainButton1  = (Button) findViewById(R.id.mainButton1);
        mainButton2  = (Button) findViewById(R.id.mainButton2);
        go = (Button) findViewById(R.id.goButton); // error here in the logcat... below

        tkm = (TextView) findViewById(R.id.mkm);
        result = (TextView) findViewById(R.id.result);
        errors = (TextView) findViewById(R.id.errors);
        textbox = (EditText) findViewById(R.id.TextBox);

        textbox.setVisibility(View.INVISIBLE);
        back.setVisibility(View.INVISIBLE);
        go.setVisibility(View.INVISIBLE);

       mainButton1.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {

            milesToKilometers();
        }

       });

        mainButton2.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                kilometersToMiles();
            }

        });

        back.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                back();
                result.setText("");
                tkm.setText("");

            }

        });

    }

    protected void back() {

        main.setVisibility(View.VISIBLE);
        mainButton1.setVisibility(View.VISIBLE);
        mainButton2.setVisibility(View.VISIBLE);
        back.setVisibility(View.INVISIBLE);
        go.setVisibility(View.INVISIBLE);
        textbox.setVisibility(View.INVISIBLE);

    }

    protected void kilometersToMiles() {

        tkm.setText("Kilometers:");
        main.setVisibility(View.INVISIBLE);
        mainButton1.setVisibility(View.INVISIBLE);
        mainButton2.setVisibility(View.INVISIBLE);
        back.setVisibility(View.VISIBLE);
        go.setVisibility(View.VISIBLE);
        textbox.setVisibility(View.VISIBLE);
        go.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if(textbox.getText().toString().equals("")){

                    errors.setText("Error: Kilometers Missing");

                }
            }

        });
    }

    protected void milesToKilometers() {

        main.setVisibility(View.INVISIBLE);
        mainButton1.setVisibility(View.INVISIBLE);
        mainButton2.setVisibility(View.INVISIBLE);
        back.setVisibility(View.VISIBLE);
        go.setVisibility(View.VISIBLE);
        textbox.setVisibility(View.VISIBLE);

         go.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                }

            });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

现在这是 logcat 错误，我不知道出了什么问题……这对我来说毫无意义。

```
08-18 15:54:14.687: E/AndroidRuntime(15778): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.Button
08-18 15:54:14.687: E/AndroidRuntime(15778):    at k.t.m.MainActivity.onCreate(MainActivity.java:32) 
```

提前感谢所有人......这是xml文件，我认为没有任何问题，但你去......

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/main"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="                    What do you wish to convert?" />

    <Button
        android:id="@+id/mainButton2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="122dp"
        android:text="Kilometers to Miles" />

    <Button
        android:id="@+id/mainButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/mainButton2"
        android:layout_below="@+id/mainButton2"
        android:layout_marginTop="126dp"
        android:text="Miles to Kilometers" />

    <Button
        android:id="@+id/secondaryButtonBack"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/mainButton1"
        android:layout_marginTop="57dp"
        android:layout_toRightOf="@+id/mainButton1"
        android:text="Back" />

    <Button
        android:id="@+id/goButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/mainButton1"
        android:layout_centerHorizontal="true"
        android:text="Go" />

    <TextView
        android:id="@+id/result"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="" />

    <TextView
        android:id="@+id/errors"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/main"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="46dp"
        android:text="" />

    <EditText
        android:id="@+id/TextBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/result"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:inputType="number" />

    <TextView
        android:id="@+id/mkm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/TextBox"
        android:layout_toLeftOf="@+id/result" />

</RelativeLayout> 
```

这是 r.java 我不知道要找什么所以在这里

```
/* AUTO-GENERATED FILE.  DO NOT MODIFY.
 *
 * This class was automatically generated by the
 * aapt tool from the resource data it found.  It
 * should not be modified by hand.
 */

package k.t.m;

public final class R {
    public static final class attr {
    }
    public static final class dimen {
        public static final int padding_large=0x7f040002;
        public static final int padding_medium=0x7f040001;
        public static final int padding_small=0x7f040000;
    }
    public static final class drawable {
        public static final int ic_action_search=0x7f020000;
        public static final int ic_launcher=0x7f020001;
    }
    public static final class id {
        public static final int TextBox=0x7f080008;
        public static final int errors=0x7f080007;
        public static final int goButton=0x7f080005;
        public static final int main=0x7f080000;
        public static final int mainButton1=0x7f080002;
        public static final int mainButton2=0x7f080001;
        public static final int menu_settings=0x7f080009;
        public static final int mkm=0x7f080004;
        public static final int result=0x7f080006;
        public static final int secondaryButtonBack=0x7f080003;
    }
    public static final class layout {
        public static final int activity_main=0x7f030000;
    }
    public static final class menu {
        public static final int activity_main=0x7f070000;
    }
    public static final class string {
        public static final int app_name=0x7f050000;
        public static final int hello_world=0x7f050001;
        public static final int menu_settings=0x7f050002;
        public static final int title_activity_main=0x7f050003;
    }
    public static final class style {
        public static final int AppTheme=0x7f060000;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:08:46.217

这意味着您必须修改 findViewById。我认为在您将其引用到按钮 id 的 java 代码中声明了一个 textview。请检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:27:45.843

我明白你为什么如此困惑......我唯一能想到的就是清理你的项目然后重建它。日食中的“项目>清洁”。您可以搜索更多关于此的内容。但我现在和你一样困惑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T23:28:14.760

清理您的项目并重建。确保重新生成 R 文件。有时 Eclipse 会把事情搞砸

# java - 如何在 Java 中创建能够访问其值的对象的 ArrayList

> ID：12022913
> 
> 赞同：3
> 
> 时间：2012-08-18T23:03:18.780
> 
> 标签：java, class, object, arraylist

所以我正在用Java开发一个游戏，我对我应该如何去做有点困惑。这是一个集换式卡牌游戏，有点像魔术，所以到目前为止我有

*   游戏驱动
*   牌
*   狼卡
*   拉里昂卡

我希望我能够拥有至少 50 种不同类型的卡片，每一种都属于自己的班级，所以一个小问题是，这是最好的方法吗？至于我的问题：

我的 GameDriver 类中有以下代码：

```
ArrayList<Cards>  playerHand = new ArrayList<Cards>();
playerHand.add(new WolfCard());
playerHand.add(new TheLarionCard());
System.out.println(((Cards)playerHand.get(1))); 
```

每张卡都扩展卡，卡扩展 GameDriver，上面的代码将打印出如下内容：

```
TheLarionCard[panel0,0,0,0x0,invalid,layout=java.awt.FlowLayout] 
```

但是现在，如果我想获取 TheLarionCard 的健康状况，我想我可以将 .health 添加到最后一行，例如：

```
System.out.println(((Cards)playerHand.get(1).health)); 
```

但显然我不能，我在这里做错了什么？

任何帮助都很棒！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T01:22:45.033

我认为你有三个选择：

1.  您希望每种不同类型的卡都有一个`health`属性。在这种情况下，您可以将该属性放入父类中`Cards`，然后请求任何扩展类的属性都是有效的`Cards`。如果`Cards`该类具有`health`数据字段，则问题中的代码将起作用。

2.  您只想`TheLarionCard`拥有健康财产。在这种情况下，您的演员阵容将是：

    ```
    System.out.println(((TheLarionCard)playerHand.get(1).health)); 
    ```

    这样，编译器就知道在`TheLarionCard`类中查找健康属性，而不是`Cards`类。

3.  您实际上并不需要将各个卡片类作为`Cards`. 如果您这样做没有真正令人信服的理由，您可以让所有卡片都属于`Cards`该类，并且它们的不同类型（TheLarionCard、WolfCard 等）可以由数据字段指定。例如：

    ```
    public class Card {
        String type;

        public Card(String inType) {
            this.type = inType;
        }

        public String toString() {
            return "This is a " + type;
        }
    } 
    ```

    这样，如果您希望不同的卡片表现不同，您可以检查它们的`type`值并根据其值分配不同的行为，例如

    ```
    public void awesomeMethod() {
        if ("TheLarionCard".equals(type)) {
            // execute TheLarionCard code
        } else if ("WolfCard".equals(type)) {
            // execute WolfCard code
        }
    } 
    ```

    [这是其他一些答案正在讨论的抽象工厂模式](http://www.javapractices.com/topic/TopicAction.do?Id=128)设计的简化版本，因此，如果您不熟悉接口，可以尝试这种方式来查看结构是否有效，然后再添加接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:07:07.980

在 中定义一个接口或抽象方法`getHealth()`方法`Cards`，必须由`WolfCard`和实现`TheLarionCard`。然后，你可以做`playerHand.get(1).getHealth()`.

例如：

```
public abstract class BaseCard {
  protected int health;

  public abstract int getHealth();
}

public class WolfCard extends BaseCard {
  private int wolfHealthBoost;  

  public int getHealth() {
    return health + wolfHealthBoost;
  }
}

public class TheLarionCard extends BaseCard {
  public int getHealth() {
    return health;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T23:09:34.290

您应该检查这些类中是否有健康属性的获取器，不能从类外部访问私有属性。

只需创建一个返回健康属性的新方法 getHealth()，然后将其附加到最后一行的点之后。

顺便说一句，如果您已经使用该原型定义了 ArrayList，则不必强制转换 Cards 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T23:46:19.207

您实际上并不需要接口，甚至不需要如此复杂的各种类。我猜你所有的卡片都有类似的行为。它们属于某种类型，可以执行特定操作，可以对它们进行操作和/或影响等。因此，您只需要一个 Cards 类，其中包含管理这些通用状态的所有字段和方法/行动。

然后你可以创建从 Cards 类继承的单独的类（顺便说一句，最好重命名为“Card”），就像你有效果类型的卡片（比如 MTG Mana Flare 或 Hideous Visage 等价物），然后你也有生物卡（例如 MTG 的 Shivan Dragon 或 Dragon Whelp）您可以制作诸如 EffectCard 之类的类，它可能具有自己的字段，例如“duration”和“affectedTypes”，然后用它来制作 ManFlare 实例、Hideous Visage 实例等。还可以制作一个带有生命值、firstStrike 等内容的 CreatureCard，并从中制作 ShivanDragon 实例和 DragonWhelp 实例。

也不要害怕构图。与其对每张卡片进行子类化/制作额外的类，不如像上面那样创建一个更简单的层次结构，并将其传递给指示更具体细节的“命令”或“动作”类。就像 EffectCard 类的 FirstStrike 实例可以用一个“动作”实例来初始化，该实例具体告诉它如何影响一个 CreatureCard 实例，CreatureCard 类的 ShivanDragon 实例将有一个动作告诉它如何通过使用 Red 来增加它的攻击地卡等

# cuda - CUDA：全局内存变量上的数据总和

> ID：12022920
> 
> 赞同：0
> 
> 时间：2012-08-18T23:04:24.193
> 
> 标签：cuda, sum

我已经启动了一个包含 2100 个块和每个块 4 个线程的内核。

在这个内核中，所有线程都必须执行一个函数，并将其结果放在一个数组（在全局内存上）的“threadIdx.x”位置。

我当然知道，在这个项目中，函数总是返回 1.012086。现在，我编写了这段代码来完成这个总和：

```
currentErrors[threadIdx.x]=0;
for(i=0;i<gridDim.x;i++)
{
    if(i==blockIdx.x)
    {
        currentErrors[threadIdx.x]+=globalError(mynet,myoutput);
    }
} 
```

但是当内核结束时，所有数组的位置都有 1.012086 作为值（而不是 1.012086*2100）。

我哪里错了？感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:09:21.440

要计算块的部分结果的最终总和，我建议按照以下方式进行：

*   让每个块将部分结果写入 gridDim.x 大小数组的单独单元格。
*   将阵列复制到主机。
*   在主机上执行最终总和。

我假设每个块都有很多要自己计算的东西，这首先保证了 CUDA 的使用。

在您当前的状态下 --- 我认为您的内核可能有问题。在我看来，每个块都在汇总所有数据，返回最终结果，就好像它是部分结果一样。

您提出的循环并没有真正意义。对于每个块，只有一个`i`会做某事。该代码将等同于简单地编写：

```
currentErrors[threadIdx.x]=0;
currentErrors[threadIdx.x]+=globalError(mynet,myoutput); 
```

除了一些不可预测的调度差异。

请记住，块*不会*同步执行。每个块可以在任何其他块之前、期间或之后运行。

* * *

还：

*   您可能对[并行前缀和算法](http://en.wikipedia.org/wiki/Prefix_sum)感兴趣。
*   您可能想要检查前缀和的[有效 CUDA 实现](http://www.cse.chalmers.se/~billeter/pub/pp/)。

# objective-c - IOS tableviews 使用字典作为模型

> ID：12022921
> 
> 赞同：0
> 
> 时间：2012-08-18T23:04:44.650
> 
> 标签：objective-c, ios5

我开始思考我想尝试的示例程序。前提很简单，因为它为我列出了一大串姓名及其性别。

现在我开始有一个以姓名和性别为属性的人员类。之后，我建立了一个字典，其中字母字母作为键，一组人在下面。这工作得很好，因为在表格方法中我可以很容易地得到每个字母的人。

现在我想实现我可以切换男性或女性。

我遇到的问题是所有 tableview 控制器方法都会突然变得更加复杂。作为一个实例 numberOfRowsInSection 方法。在我刚刚得到字母键的数组并返回计数之前。现在我必须解析所有内容并计算男性或女性。

我觉得可能有更好的方法来解决这个问题。但我不确定。

有任何想法吗 ？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:23:56.720

您要么必须按照您的建议动态地执行此操作，如果列表中有很多人，这可能会变得非常慢。

另一种方法是将事物分成 3 个数组：一个包含所有人，一个包含男性，一个包含女性。

然后你有一个指针，它引用了 3 个数组之一，当用户改变他们的偏好时你改变这个指针。

# java - 在一个请求中上传 JSON 和二进制文件

> ID：12022925
> 
> 赞同：1
> 
> 时间：2012-08-18T23:05:20.523
> 
> 标签：java, google-app-engine, rest

我希望创建一个 RESTful API 用于 Android 和 iOS 应用程序。到目前为止，我一直在尝试在服务器上使用 Jersey，然后在客户端使用适当的 http 库。目前，我一直在使用`multipart/related`JSON 作为请求的 mimetype，其中 JSON 构成主体的第一部分，然后是 jpeg 图像作为第二部分。

到目前为止，我在向服务器发出请求时遇到了问题，`406 Not Acceptable`从 Jersey 获得了一个。我注意到它`multipart/related`主要用于发送电子邮件。实际上有没有一种方法可以支持混合类型的内容作为上传，或者我完全误解了`multipart/related`在这种情况下的用法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:39:12.403

您可能想查看此博客以获取更多信息，但这里是帮助您的重要部分：

[http://www.mkyong.com/webservices/jax-rs/file-upload-example-in-jersey/](http://www.mkyong.com/webservices/jax-rs/file-upload-example-in-jersey/)

```
@POST
@Path("/upload")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFile(
    @FormDataParam("file") InputStream uploadedInputStream,
    @FormDataParam("file") FormDataContentDisposition fileDetail) {

    String uploadedFileLocation = "d://uploaded/" + fileDetail.getFileName();

    // save it
    writeToFile(uploadedInputStream, uploadedFileLocation);

    String output = "File uploaded to : " + uploadedFileLocation;

    return Response.status(200).entity(output).build();
} 
```

我希望你想要 multipart/form-data，因为这是 multipart/related 描述的一部分：

> Multipart/Related 媒体类型适用于
> 由多个相互关联的主体部分组成的复合对象。对于
> Multipart/Related 对象，不能通过
> 单独显示组成的身体部位来实现正确的显示。Multipart/Related 对象的内容类型由 type 参数指定。
> “start”参数（如果给定）通过内容 ID 指向
> 包含对象根的正文部分。默认根是
> Multipart/Related 正文中的第一个正文部分。

有关此 mime 类型的更多信息，您可以查看

[https://www.rfc-editor.org/rfc/rfc2387](https://www.rfc-editor.org/rfc/rfc2387)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:10:00.777

如果您想将图像与 json 正文一起提交，您可以对图像进行 base64 编码并在 json 中包含 base64 字符串。然后在服务器端，您对字符串进行 base64 解码并将图像文件上传到 blobstore。请参阅此处的文件上传示例（页面底部）[https://developers.google.com/appengine/docs/java/blobstore/overview](https://developers.google.com/appengine/docs/java/blobstore/overview)

或者，您可以单独上传到 blobstore 并获取上传图像的 blobkey。然后，您可以将 blobkey 包含在您发布到服务器的 json 正文中。使用这种方法，您需要在每次需要上传新图像时获取 uploadurl。

# php - 将数据从 MySQL 数据库导出到 PHP 中的 excel

> ID：12022929
> 
> 赞同：1
> 
> 时间：2012-08-18T23:06:26.217
> 
> 标签：php, mysql, excel, export-to-csv

我是 PHP 新手。我只想将数据（我从查询数据库中得到的搜索结果）导出到 Excel。我的问题是excel中的数据会自动换行。**我想要 'cn' 'ai'... 在下一列而不是下一行。**

我已经删除了`$csv_output .= "\r";`我的代码中的所有内容。所以我觉得我的查询语句可能有问题：

```
$searchp = "
    select 
        * 
    from 
        insecticide a 
            LEFT JOIN crop b 
                ON a.ID = b.ID 
    where 
        a.Pestcide_trade_name like'%$tn%' 
        and a.Pestcide_trade_name like'%$tn2%' 
        and b.Crops like'%$crops%' 
        and b.Crops like'%$crops2%' 
        and a.AMW like'%$amw%' 
        and b.Pests like'%$pest%' 
        and a.Company_name like'%$cn%' 
        and a.Company_name like'%$cn2%' 
        and a.Active_ingredient like'%$ai%' 
        and a.Active_ingredient like'%$ai2%' 
        and a.PPE like'%$ppe%' 
        and a.PPE like'%$ppe2%' 
        and a.MMW like'%$mmw%' 
        and a.EH like'%$eh%' 
        and b.REI like'%$rei%' 
        and b.REI like'%$rei2%' 
    ORDER BY 
        a.Pestcide_trade_name ASC" 
```

我是 PHP 和 MySQL 的新手。请给我一些关于这个问题的提示。谢谢！

```
<?php
    require_once("db.php");

                $tn = $_POST['TN']?$_POST['TN']:'';
                $tn2 = $_POST['TN2']?$_POST['TN2']:'';
                $cn = $_POST['CN']?$_POST['CN']:'';
                $cn2 = $_POST['CN2']?$_POST['CN2']:'';
                $ai = $_POST['AI']?$_POST['AI']:'';
                $ai2 = $_POST['AI2']?$_POST['AI2']:'';
                $ppe = $_POST['PPE']?$_POST['PPE']:'';
                $ppe2 = $_POST['PPE2']?$_POST['PPE2']:'';
                $amw  = $_POST['AMW']?$_POST['AMW']:'';
                $mmw  = $_POST['MMW']?$_POST['MMW']:'';
                $eh = $_POST['EH']?$_POST['EH']:'';
                $crops = $_POST['Crops']?$_POST['Crops']:'';
                $crops2 = $_POST['Crop2']?$_POST['Crop2']:'';
                $rei = $_POST['REI']?$_POST['REI']:'';              
                $rei2 = $_POST['REI2']?$_POST['REI2']:'';
                $pest = $_POST['PEST']?$_POST['PEST']:'';
                $rate = $_POST['RATE']?$_POST['RATE']:'';
                $note = $_POST['Note']?$_POST['Note']:'';
                $restrictions = $_POST['Restrictions']?$_POST['Restrictions']:'';    
        $searchp = "select * from insecticide a LEFT JOIN crop b ON a.ID = b.ID where a.Pestcide_trade_name like'%$tn%' and a.Pestcide_trade_name like'%$tn2%' and b.Crops like'%$crops%' and b.Crops like'%$crops2%' and a.AMW like'%$amw%' and b.Pests like'%$pest%' and a.Company_name like'%$cn%' and a.Company_name like'%$cn2%' and a.Active_ingredient like'%$ai%' and a.Active_ingredient like'%$ai2%' and a.PPE like'%$ppe%' and a.PPE like'%$ppe2%' and a.MMW like'%$mmw%' and a.EH like'%$eh%' and b.REI like'%$rei%' and b.REI like'%$rei2%' ORDER BY a.Pestcide_trade_name ASC";
        $result=mysql_query($searchp)or die(mysql_error()); 
        $num=mysql_numrows($result);
        mysql_close();

       $csv_output = '"Trade name","Company Name","Active Ingredient","PPE","Applicators Must Wear","Mixers Must Wear","Environmental Hazards","CROPS","REI","PEST","RATE","RATE","NOTE","RESTRICTION"\N';

            $i=0;
            while ($i < $num) {

            $tn1 = mysql_result($result,$i,"Pestcide_trade_name");
            $cn1 = mysql_result($result,$i,"Company_name");
            $ai1 = mysql_result($result,$i,"Active_ingredient");
            $ppe1 = mysql_result($result,$i,"PPE");
            $amw1 = mysql_result($result,$i,"AMW");
            $mmw1 = mysql_result($result,$i,"MMW");

            $eh1 = mysql_result($result,$i,"EH");
            $crop1 = mysql_result($result,$i,"Crops");
            $rei1 = mysql_result($result,$i,"REI");
            $pest1 = mysql_result($result,$i,"Pests");
            $rate1 = mysql_result($result,$i,"Rate_FL_OZ_ARCE");
            $rate11 = mysql_result($result,$i,"RATE_LB_ARCE");
            $note1 = mysql_result($result,$i,"Note");
            $restrictions1 = mysql_result($result,$i,"Restrictions");

            $csv_output .= "$tn1";
            $csv_output .="$cn1";
            $csv_output .="$ai1";
            $csv_output .= "$ppe1";
            $csv_output .="$amw1";
            $csv_output .= "$mmw1";
            $csv_output .= "$eh1";
            $csv_output .= "$crop1";
            $csv_output .= "$rei1";
            $csv_output .= "$pest1";
            $csv_output .= "$rate1";
            $csv_output .= "$rate11";
            $csv_output .= "$note1";
            $csv_output .= "$restrictions1";
            $csv_output .= "\n";
            ++$i;
            }

    $filename = "results_".date("Y-m-d_H-i",time());
    header("Content-type: application/vnd.ms-excel");
    header("Content-disposition: csv" . date("Y-m-d") . ".csv");
    header( "Content-disposition: filename=".$filename.".csv");
    print $csv_output;
    exit;

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T23:11:03.103

不要自己编写 CSV 代码。见： http: [//php.net/manual/en/function.fputcsv.php](http://php.net/manual/en/function.fputcsv.php)

此外，您缺少分隔符......但不要修复此代码。重构它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T23:11:32.873

您忘记了逗号和引号：

```
 $csv_output .= '"' . $tn1 . '",';
        $csv_output .= '"' . $cn1 . '",';
        // etc. 
```

# javascript - 在 JavaScript 中使用像 requirejs 或 commonjs 模块这样的 AMD 有什么好处？

> ID：12022930
> 
> 赞同：15
> 
> 时间：2012-08-18T23:06:33.830
> 
> 标签：javascript, requirejs, commonjs

我已经阅读了很多关于 AMD 解决方案的文章，例如 RequireJS 或在 Javascript 中遵循 CommonJS 样式的模块加载器。

假设我有一个应用程序分为这几个部分：

*   依赖于我使用的框架的应用程序定义
*   依赖 App 定义和框架的模型 1
*   依赖 App 定义的模型 2、模型 1 和我的框架

我可以将每个部分编写为 RequireJS 模块或通用 JS 模块，并将我的项目拆分为我想要的多少个文件，但是将每个部分编写为一个模块或将它们拆分为多个文件然后以正确的顺序加载它们有什么好处（以避免依赖性问题）可能将所有文件连接到一个大文件中以减少 HTTP 请求（如 r.js 优化器所做的那样）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T00:47:26.690

在我看来，有三个比较重要的原因：

**您可以在不污染全局命名空间的情况下创建和重用模块。**全局命名空间污染越严重，函数/变量冲突的可能性就越大。这意味着您定义了一个名为“foo”的函数，而另一个开发人员定义了函数“foo”=其中一个函数被覆盖。

**您可以将代码构建**到单独的文件夹和文件中，并且 requirejs 将在需要时异步加载它们，因此一切正常。

**您可以为生产而构建。**RequireJS 带有自己的构建工具，称为 R.JS，它将把你的 JavaScript 模块连接和丑化成一个（或多个）包。这将提高您的页面速度，因为用户将不得不进行更少的脚本调用并加载更少的内容（因为您的 JS 被丑化了）。

您可以看一下这个简单的演示项目：[https](https://c9.io/peeter-tomberg/requirejs) ://c9.io/peeter-tomberg/requirejs（在 cloud9ide 中）。

要将您的模块构建到单个应用程序中，您所要做的就是安装 requirejs npm 包并运行命令：r.js -o build/build.properties.js

如果有任何问题，请走开。

**编辑：**

在开发中，将所有模块放在单独的文件中只是构建和管理代码的好方法。它还可以帮助您进行调试（例如“Module.js 第 17 行”而不是“scripts.js 第 5373 行”上的错误）。

对于生产，您应该使用构建工具将 javascript 连接和 uglify 到单个文件中。当您发出更少的请求时，这将有助于更快地加载页面。您提出的每个加载请求都会减慢您的页面速度。你的页面越慢，谷歌给你的分数就越少。页面越慢，您的用户就会越沮丧。您的页面越慢，您获得的销售额就越少。

如果您想了解更多关于网页性能的信息，请查看[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

# c# - RabbitMQ c# 客户端异步支持

> ID：12022931
> 
> 赞同：1
> 
> 时间：2012-08-18T23:06:49.633
> 
> 标签：c#, asynchronous, rabbitmq

我有这段代码，我使用[rabbitmq 客户端](http://www.rabbitmq.com/dotnet.html)。我很好奇这是异步的还是同步的？如果是同步的，我怎样才能让它异步？

```
 ConnectionFactory factory = new ConnectionFactory();
        factory.HostName = "localhost";
        using (IConnection connection = factory.CreateConnection())
        using (IModel channel = connection.CreateModel())
        {
            channel.QueueDeclare("hello", false, false, false, null);
            for (int i = 0; i < 1000; i++)
            {
                string message = "Hello World!";
                byte[] body = System.Text.Encoding.UTF8.GetBytes(message);

                channel.BasicPublish("", "hello", null, body);

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:24:01.313

[请参阅官方 C# 客户端指南](http://www.rabbitmq.com/releases/rabbitmq-dotnet-client/v3.0.0/rabbitmq-dotnet-client-3.0.0-user-guide.pdf)的第 2.9 章：

> 应用程序回调处理程序不得调用阻塞 AMQP 操作（例如 IModel.QueueDeclare、IModel.BasicCancel 或 IModel.BasicPublish）。如果他们这样做，通道将死锁

BasicPublish 是恕我直言阻止同步操作。

# c# - 我可以关闭我的代码引用的单个程序集的跟踪吗？

> ID：12022933
> 
> 赞同：6
> 
> 时间：2012-08-18T23:07:09.993
> 
> 标签：c#, trace, system.diagnostics

我有一个特定的代码框架，并且出于两个原因定义了一个 TraceListener：

*   与许多通过 Trace.Write 完成的旧日志记录向后兼容，直到我们对其进行更新，并且
*   如果我们需要，能够检测我们的代码引用的其他程序集是很好的。

但是，我有一个程序集（不是我们的程序集），它记录了许多无意义的数据，这些数据无助于我们调试任何东西。如何关闭对这个程序集的跟踪（或者，我们围绕它构建的外观项目），同时为应用程序的其余部分保留它？

我在我们的外观项目中尝试了各种配置，通常如下所示，但无济于事。我尝试添加与首先设置日志记录的`<remove>`元素相匹配的元素，尝试设置它们，设置和至少其他三个尝试。感谢您的任何帮助，您可以提供！`<add>``<clear>``<trace enabled="false">`

```
<system.diagnostics>
    <trace autoflush="true" indentsize="4">
      <listeners>
        <clear/>
      </listeners>
    </trace>
    <switches>
    </switches>
  </system.diagnostics> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:55:57.370

您可以编写自己的跟踪[过滤器](http://msdn.microsoft.com/en-us/library/ms229562.aspx)，与 TraceListener 一起使用。在此过滤器中，您可以在 stackTrace 中查找您的程序集并关闭事件跟踪。

在我的例子中，我编写了基于 EventTypeFilter 的过滤器（参见： [DotNetOpenAuthFilter ），它只过滤来自 DotNetOpenAuth 库的事件。](https://gist.github.com/3833100)

然后将过滤器连接到 web.config 中的侦听器：

```
<configuration>
  <system.diagnostics>
    <trace>
      <listeners>
        <add name="console" type="System.Diagnostics.ConsoleTraceListener" >
          <filter type="Common.Log.DotNetOpenAuthFilter, Common" initializeData="Warning" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T09:06:44.147

使用跟踪源。

1.  在跟踪源中对其进行初始化。

    `TraceSource logger = new TraceSource("Class1");`

2.  从代码中的关键点调用它：

    `logger.TraceInformation("Hello from Class1");`

3.  请务必编辑您的应用程序配置：

`<system.diagnostics> <trace autoflush="true"/> <sources> <source name="Class1" switchName="Class1Switch" switchType="System.Diagnostics.SourceSwitch"> <listeners> <add name="console"></add> <add name="csv" /> <!-- or you can add your own listener here --> </listeners> </source> </sources> <switches>
<add name="Class1Switch" value="Information" />
</switches> <sharedListeners> <add name="console" type="System.Diagnostics.ConsoleTraceListener" /> <add name="csv" type="System.Diagnostics.DelimitedListTraceListener" delimiter="|" initializeData="d:\data\tracing\trace.log" traceOutputOptions="Timestamp, ThreadId, LogicalOperationStack, DateTime, ProcessId"> </add> </sharedListeners> </system.diagnostics>`

如果说，您只想记录错误，请更改开关：

```
<add name="Class1Switch" value="Error" /> 
```

要完全关闭它：

```
<add name="Class1Switch" value="Off" /> 
```

# css - IE7 CSS 填充 Internet Explorer 7

> ID：12022936
> 
> 赞同：0
> 
> 时间：2012-08-18T23:08:08.887
> 
> 标签：css, internet-explorer-7, padding

我的网站大部分运行良好，但我在 IE7 中的 Site-Title 填充存在一个小问题。在所有其他浏览器中，主徽标周围都有足够的填充。请参阅网站左上角的徽标：http: [//alt.beaufortmusicfestival.com](http://alt.beaufortmusicfestival.com) 在 IE7 中，“Festival”一词和主导航栏的顶部边缘之间没有填充。当我修改代码时，它在除了 IE7 之外的所有代码中都发生了变化，其中没有任何区别。请参阅以下内容：

```
#site-title{
 padding:0px 0 0px 0;      **** this is the code that i am refering to. ****
} 
```

我在这里缺少什么吗？我知道 IE 7 很古怪。这个 css 代码位于一个名为 ie.css 的文件中，在我的标题中被称为条件 css 文件，目前它似乎工作正常。只是 IE 似乎无法识别对 padding-bottom 代码的任何更改。请指教。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:26:06.567

可以专门针对IE7试试

```
*:first-child+html #site-title {
    padding-bottom: 25px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T11:11:18.397

```
#site-title{
 padding:0px 0 0px 0\9; for ie 8 ,also ie9 in some cases  
 padding:0px 0 0px 0!ihateie; exactly can be anything (string)
} 
```

我希望这可以帮助你:)

# c# - char 和 char 有什么区别？

> ID：12022938
> 
> 赞同：21
> 
> 时间：2012-08-18T23:08:09.537
> 
> 标签：c#, .net, char

> **可能重复：**
> [字符串和字符串有什么区别](https://stackoverflow.com/questions/7074/what-is-the-difference-between-string-and-string)

当我运行时：

```
char c1 = 'a';
Console.WriteLine(c1); 
```

当我运行时：

```
Char c2 = 'a';
Console.WriteLine(c2); 
```

我得到完全相同的结果，`a`.

我想知道这两种形式有什么区别，为什么有两种形式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-18T23:10:55.610

结果是完全一样的。两者都代表相同的类型，因此生成的可执行文件完全相同。

关键字是框架`char`中类型的 C# 语言的别名。`System.Char`

您始终可以使用`char`关键字。要使用`Char`，您需要`using System;`在文件顶部包含`System`命名空间（或使用`System.Char`指定命名空间）。

* * *

在大多数情况下，您可以使用关键字或框架类型，但并非无处不在。例如，作为枚举中的支持类型，您只能使用关键字：

```
enum Test : int { } // works

enum Test : Int32 {} // doesn't work 
```

（我`int`在示例中使用，因为您不能使用 a`char`作为枚举的支持类型。）

* * *

相关：[C#中字节与字节数据类型之间的区别](https://stackoverflow.com/questions/2415742/difference-between-byte-vs-byte-data-types-in-c-sharp)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T23:09:51.877

据我所知，C# `char`type 关键字只是 的别名`System.Char`，因此它们引用相同的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T23:10:16.957

关键字是C#`char`中类型的别名。`System.Char`

# java - Java - 我可以保存 HttpServletResponse res.getWriter()

> ID：12022940
> 
> 赞同：0
> 
> 时间：2012-08-18T23:08:43.870
> 
> 标签：java, servlets

我正在尝试将此编写器保存在 servlet 中，以便它始终可供我使用，不仅在 doPost 方法（我得到 HttpServletResponse 的地方）中，而且我的方法似乎不起作用。当我在保存的 PrintWriter 中写入某些内容时，它似乎永远不会到达客户端。我错过了什么吗？

# r - Ubuntu R ForEach / DoMC 不使用多核

> ID：12022956
> 
> 赞同：5
> 
> 时间：2012-08-18T23:10:40.250
> 
> 标签：r, ubuntu, foreach, domc

我在 R 中构建了一个函数（在 Ubuntu 12.04 LTS 64 位、具有多线程和 6gb ram 的 4 核 i7 服务器上运行），我使用标准包安装了 R：

```
sudo apt-get install r-base r-recommended r-base-dev
sudo apt-get install r-cran-multicore r-cran-iterators r-cran-foreach r-cran-domc 
```

注意：我还在 R 中安装了`foreach`& `doMC`（这也没有帮助），就像我安装了`deldir`软件包一样：

```
install.packages(c("deldir"), dependencies = TRUE) 
```

我的函数运行良好，但它不使用并行内核（仅最大化 8 个内核中的 1 个）：

```
library(deldir)
library(foreach)
library(doMC)
registerDoMC(cores=8)

#getDoParWorkers()
#getDoParName()
#getDoParVersion()

# loop through files
inputfiles <- dir(path="/home/geoadmin/data/objects/", pattern='.txt')
for( inputfilenr in 1:length(inputfiles))
{
# set file variables    
curinputfile = paste("/home/geoadmin/data/objects/",inputfiles[[inputfilenr]], sep = "", collapse = NULL)
print (curinputfile)
curoutputfile = paste("/home/geoadmin/data/objects/",substr(inputfiles[[inputfilenr]], start=1, stop=10), '.out', sep = "", collapse = NULL)
# select the point x/y coordinates into a data frame...
points <- read.csv(curinputfile, header = TRUE, sep = ",", dec=".", fill = TRUE)
# set calculation variables, precision on 3 digits only because of the RDW coordinate system
voro = deldir(points$x, points$y, digits=3, list(ndx=2,ndy=2), rw=c(min(points$x)-abs(min(points$x)-max(points$x)), max(points$x)+abs(min(points$x)-max(points$x)), min(points$y)-abs(min(points$y)-max(points$y)), max(points$y)+abs(min(points$y)-max(points$y))))
tiles = tile.list(voro)
poly = array()
# start loop
  poly <- foreach (i=1:length(tiles), .combine=cbind) %dopar% 
    {
    # load tile info
    tile = tiles[[i]]
    # start with EWKB notation
    curpoly = "POLYGON(("
    # add list of coordinates by looping through the points in tile
    for (j in 1:length(tiles[[i]]$x)) { curpoly = sprintf("%s %.6f %.6f,",curpoly,tile$x[[j]],tile$y[[j]]) }
    # then again the first point to close the polygon and end the EWKB notation, adding that to the poly array
    sprintf("%s %.6f %.6f))",curpoly,tile$x[[1]],tile$y[[1]])
    }
write.csv(t(poly), file = curoutputfile, row.names = FALSE) 
} 
```

所以结果很好，但是没有并行性...

`doMC`确实注册正确：

```
> getDoParWorkers()
[1] 8
> getDoParName()
[1] "doMC"
> getDoParVersion()
[1] "1.2.5" 
```

如果我看一下用法（带`top`）：

```
top - 01:03:19 up 9 min,  3 users,  load average: 1.02, 0.86, 0.45
Tasks: 131 total,   2 running, 127 sleeping,   0 stopped,   2 zombie
Cpu(s): 12.5%us,  0.0%sy,  0.0%ni, 87.5%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   6104932k total,  1240512k used,  4864420k free,    16656k buffers
Swap:  6283260k total,        0k used,  6283260k free,   141996k cached

PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
1553 zzzzzzzz  20   0  913m 850m 3716 R  100 14.3   8:22.03 R 
```

因此，只需最大化一个核心。有谁知道什么可能导致`foreach`/`doMC`不使用多个核心？

```
> sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=C                 LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] doMC_1.2.5      multicore_0.1-7 iterators_1.0.6 foreach_1.4.0
[5] deldir_0.0-19

loaded via a namespace (and not attached):
[1] codetools_0.2-8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:52:49.823

添加问题的可能答案：由于 foreach/mc 确实在计算机本身上工作（使用标准示例），它是特定代码本身，并且 voro=deldir 部分可能占用时间，而不是它之后的循环。然而，这意味着需要调整 deldir 包。查看 DelDir 源代码中的代码，我似乎需要在代码中调整此代码段：

```
# Call the master subroutine to do the work:
repeat {
    tmp <- .Fortran(
            'master',
            x=as.double(x),
            y=as.double(y),
            sort=as.logical(sort),
            rw=as.double(rw),
            npd=as.integer(npd),
            ntot=as.integer(ntot),
            nadj=integer(tadj),
            madj=as.integer(madj),
            ind=integer(npd),
            tx=double(npd),
            ty=double(npd),
            ilist=integer(npd),
            eps=as.double(eps),
            delsgs=double(tdel),
            ndel=as.integer(ndel),
            delsum=double(ntdel),
            dirsgs=double(tdir),
            ndir=as.integer(ndir),
            dirsum=double(ntdir),
            nerror=integer(1),
            PACKAGE='deldir'
        ) 
```

尚不确定如何将其格式化为可以与 foreach 一起使用的东西...

# c# - 将 Http 标头添加到 HttpClient

> ID：12022965
> 
> 赞同：189
> 
> 时间：2012-08-18T23:12:30.453
> 
> 标签：c#, asp.net-web-api, dotnet-httpclient

在向 Web 服务发送请求之前，我需要将 http 标头添加到 HttpClient。我如何为单个请求执行此操作（而不是在 HttpClient 上对所有将来的请求）？我不确定这是否可能。

```
var client = new HttpClient();
var task =
    client.GetAsync("http://www.someURI.com")
    .ContinueWith((taskwithmsg) =>
    {
        var response = taskwithmsg.Result;

        var jsonTask = response.Content.ReadAsAsync<JsonObject>();
        jsonTask.Wait();
        var jsonObject = jsonTask.Result;
    });
task.Wait(); 
```

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2012-08-19T00:31:52.727

创建一个`HttpRequestMessage`，将 Method 设置为`GET`，设置您的标题，然后使用`SendAsync`而不是`GetAsync`.

```
var client = new HttpClient();
var request = new HttpRequestMessage() {
    RequestUri = new Uri("http://www.someURI.com"),
    Method = HttpMethod.Get,
};
request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue("text/plain"));
var task = client.SendAsync(request)
    .ContinueWith((taskwithmsg) =>
    {
        var response = taskwithmsg.Result;

        var jsonTask = response.Content.ReadAsAsync<JsonObject>();
        jsonTask.Wait();
        var jsonObject = jsonTask.Result;
    });
task.Wait(); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2019-02-14T17:03:07.873

如果它可以是所有请求的相同标头，*或者*您在每个请求后处置客户端，则可以使用以下`DefaultRequestHeaders.Add`选项：

```
client.DefaultRequestHeaders.Add("apikey","xxxxxxxxx"); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2019-12-16T15:08:34.010

要在请求上设置自定义标头，请使用自定义标头构建请求，然后将其传递给 httpclient 以发送到 http 服务器。例如：

```
HttpClient client = HttpClients.custom().build();
HttpUriRequest request = RequestBuilder.get()
  .setUri(someURL)
  .setHeader(HttpHeaders.CONTENT_TYPE, "application/json")
  .build();
client.execute(request); 
```

默认标头设置为 HTTPCLIENT 以在每个请求上发送到服务器。

# java - run 和 equals 方法的奇怪事情或我做的任何错误

> ID：12022972
> 
> 赞同：0
> 
> 时间：2012-08-18T23:13:31.343
> 
> 标签：java, multithreading, synchronization

我编写了一个多线程程序，其中我看到了一些奇怪的行为。下面是代码。

```
class Task implements Runnable {
      private Command command;
      private BlockingQueue<Integer> existPool;
      private BlockingQueue<Integer> newPool;
      private int existId;
      private int newId;

      public Task(Command command, BlockingQueue<Integer> pool1, BlockingQueue<Integer> pool2) {
            this.command = command;
            this.existPool = pool1;
            this.newPool = pool2;
      }

public void run() {
    if(command.getDataCriteria().equals(PDSLnPConstants.DATA_CRITERIA_PREVIOUS)) {
    try {
        // Getting existing id from the pool
        existId = existPool.take();
        attributeGetSetMethod(existId);
    } catch (Exception e) {
        getLogger().log(LogLevel.ERROR, e.getLocalizedMessage());
    } finally {
        // And releasing that existing ID for re-use
        existPool.offer(existId);       
    }
    }

//Something wrong happening here
else if(command.getDataCriteria().equals(PDSLnPConstants.DATA_CRITERIA_NEW)) {
    try {
        // Getting new id from the pool
        newId = newPool.take();
        attributeGetSetMethod(newId);
    } catch (Exception e) {
        getLogger().log(LogLevel.ERROR, e.getLocalizedMessage());
    } finally {
        // And releasing that new ID for re-use
        newPool.offer(newId);   
    }
    }
}
} 
```

从下面的代码。上面的运行方法被调用。

```
 for (int i = startRange; i <= endRange; i++) {
    availableExistingIds.add(i);
    }

    for (int n = newStartRange; n <= newEndRange; n++) {
    availableNewIds.add(n);
    }

    BlockingQueue<Integer> existIdPool = new ArrayBlockingQueue<Integer>(11, false, availableExistingIds);
    BlockingQueue<Integer> newIdPool = new ArrayBlockingQueue<Integer>(21, false, availableNewIds);

    GUID_ID_MAPPING = new LinkedHashMap<Integer, LinkedHashMap<Integer, String>>();
    long startTime = System.currentTimeMillis();
    long endTime = startTime + (durationOfRun*60*1000L);

    // Running for particular duration of time
    while(System.currentTimeMillis() <= endTime) {
    Command nextCommand = getNextCommandToExecute();
    Task nextCommandExecutorRunnable = new Task(nextCommand, existIdPool, newIdPool);
    executorService.submit(nextCommandExecutorRunnable); // Submit it for execution
    } 
```

**问题陈述：-**

我刚刚注意到的一件奇怪的事情是 - 在下面的 else if 循环中，如果您在 run 方法中看到我上面的代码，`if the command.getDataCriteria() is Previous`那么它也会进入 else if 块（这是 for `New`），这不应该像我一样发生做`.equals`检查？为什么会这样？

```
else if(command.getDataCriteria().equals(PDSLnPConstants.DATA_CRITERIA_NEW)) { 
```

**更新：-**

下面是来自我的控制台的图像。![在此处输入图像描述](../Images/d72ccb896fe48ea0e8e2c94bb5f170c4.png)

你可以清楚地看到，`dataCriteria was New`它去了`PREVIOUS block`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:25:54.290

如果你的代码真的

```
if(command.getDataCriteria().equals(PDSLnPConstants.DATA_CRITERIA_PREVIOUS)) {
   ...
else if(command.getDataCriteria().equals(PDSLnPConstants.DATA_CRITERIA_NEW)) {
   ...
} 
```

那么两个`...`s 都不可能被执行。它不依赖于同步、线程、错误的 equals 实现或其他任何东西。还有一些你不理解的东西（这两者中的 run() 调用真的是一样的吗？），或者可能是我对你的问题陈述不理解的东西（这很令人困惑）。

# opengl - OpenTK GL.VertexAttribPointer() 调用产生 INVALID_OPERATION 错误

> ID：12022973
> 
> 赞同：0
> 
> 时间：2012-08-18T23:13:44.497
> 
> 标签：opengl, opentk

我在我的第一个顶点属性上调用 GL.VertexAttribPointer，并且调用产生了 INVALID_OPERATION 错误。我不知道这意味着什么，因为 OpenGL API 没有将 VertexAttribPointer 调用可能导致的错误之一列出：( [http://www.opengl.org/sdk/docs/man/xhtml/glVertexAttribPointer. xml](http://www.opengl.org/sdk/docs/man/xhtml/glVertexAttribPointer.xml)）。

这是设置错误的位置附近的代码：

```
GL.BindVertexArray(mi_VAOHandle);

OpenGLUtilityLib.CheckError("binding vertex array");

System.Diagnostics.Debug.WriteLine("Binding attribute...");
GL.EnableVertexAttribArray(0);
OpenGLUtilityLib.CheckError("Enabling VAA 0");
GL.BindBuffer(BufferTarget.ArrayBuffer, mi_PositionBufferHandle);
OpenGLUtilityLib.CheckError("Binding position buffer to array buffer target");
GL.VertexAttribPointer(0, 3, VertexAttribPointerType.Float, false, Vector3.SizeInBytes, 0);
OpenGLUtilityLib.CheckError("Set vertex attribute pointer"); 
```

最后一次错误检查返回一个错误。

对于上下文，当我遇到此错误时，我一直在将一些初学者 OpenTK GL 代码重构为面向对象的结构，并且我的程序副本仍然有效，并且我正在按照相同的顺序执行所有操作，所以我想知道是否有什么可能已经被不同的街区打破了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:57:29.803

我没有调用 GL.GenVertexArrays 来创建我正在加载的 VAO。当您绑定 VAO 时，显然不会创建错误，但是当您第一次尝试在其中设置状态时。

# backbone.js - JSON.stringify() 与主干.js 中的集合

> ID：12022975
> 
> 赞同：4
> 
> 时间：2012-08-18T23:14:26.587
> 
> 标签：backbone.js

有人能解释一下 JSON.stringify() 如何神奇地只将 JSON 字符串化为通过 URL 获取的，并且不打扰完整集合对象的其他特定于主干的部分吗？

我对解释这种令人印象深刻的功能的底层实现和/或设计模式感到好奇。我不得不使用 json2.js 来获得 stringify 功能，所以我认为骨干网不会覆盖或装饰 stringify。

我发现如果我将集合直接传递给 JS OBJECT 代码，代码“看到”集合对象的模型键和其他特定于主干的部分，而如果我在该字符串化对象上执行 JSON.stringify THEN jquery.parseJSON，我的代码“看到”仅由 URL 返回的 JSON。

代码：

```
enter code here

$(function () {
    var Person = Backbone.Model.extend({
        initialize: function () {
            // alert("Model Init");
        }
    }),
    PersonList = Backbone.Collection.extend({
        model: Person,
        url: '/Tfount_Email/Email/SOAInbox',
        initialize: function () {
            // alert("Collections Init");
        }
    }),
    personlist = new PersonList();

    personlist.fetch({
        error: function () {
            alert("Error fetching data");
        },
        success: function () {
            // alert("no error");
        }
    }).complete(function () {

    // first call to makeTable w collection obj, we see MORE than just the JSON returned by URL
        makeTable(personlist);      

    // stringify then parse, we see only JSON returned by URL
        jsonString = JSON.stringify(personlist);
        var plistJSON = jQuery.parseJSON(jsonString);
        makeTable(plistJSON);
    });
});

function makeTable(obj) {

    var type = typeof obj
    if (type == "object") {
        for (var key in obj) {
            alert("key: " + key)
            makeTable(obj[key])
        }
    } else {
        alert(obj)
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T00:23:03.323

这是`JSON.Stringify`. 来自 Douglas Crockford 的 JSON2.js 文件：

> 当找到一个对象值时，如果该对象包含一个 toJSON 方法，就会调用它的 toJSON 方法并将结果字符串化。

[https://github.com/douglascrockford/JSON-js/blob/master/json2.js#L38-39](https://github.com/douglascrockford/JSON-js/blob/master/json2.js#L38-39)

当您在 Backbone.Collection 上调用 JSON.stringify 时，它会调用该集合的`toJSON`方法，如本注释所述。

# ios - 如何在 ViewDidLoad 方法上隐藏 UITextField、UILabel、UIButton？

> ID：12022979
> 
> 赞同：0
> 
> 时间：2012-08-18T23:16:09.133
> 
> 标签：ios, xcode, ipad

我正在尝试隐藏我的文本标签和按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:17:34.483

使用`UIView`(的隐藏属性`UITextField`，`UILabel`并且`UIButton`都是`UIView`) 的子类。

```
myControl.hidden = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:23:55.943

1.  转到视图控制器的 .h 文件，并使用适合您的控件 UITextView、UILabel 等的数据类型创建一个 IBOutlet...
2.  转到界面生成器并将您声明的 IBOutlet 绑定到您想要的项目。
3.  采用`myControl.hidden = YES;`

请不要犹豫，要求对这些步骤中的任何一个进行澄清。

# ruby-on-rails - 如何在 simple_form 标签旁边添加跨度

> ID：12022985
> 
> 赞同：2
> 
> 时间：2012-08-18T23:17:25.560
> 
> 标签：ruby-on-rails, simple-form

我正在尝试添加一个跨度，该跨度将在标签旁边包含一个字符计数器。标签是使用 simple_form 生成的，我似乎只能将 span 放在字段的上方或下方。我尝试的代码片段如下：

```
<%= simple_form_for(@message, :html => {:class => 'form-vertical' }) do |f| %>
<div class="inputs">
<%= f.input :to_user_id, :required => true, :as=> :hidden %><span id="counter">160</span>
<%= f.input :content, :required => true, :input_html=> { :class=> "field-message span6", :placeholder=> "your message goes here, keep it short, 140 characters short..." } %>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:35:28.103

表单构建器将具有独立的输入字段，因此一种方法是让 div 'input' 左浮动，然后让 'counter' 左浮动在它旁边。

样式.css

```
input { 
  clear: both;
  float: left; 
  width: 150px; 
}
#counter { float: left; width: 150px; } 
```

form.html.erb

```
...
<%= f.input :to_user_id, :required => true, :as=> :hidden %>
<div id="counter">160</div>
<%= f.input :content, :required => true, .... 
```

# android - Android NDK 应用无法加载库

> ID：12022990
> 
> 赞同：3
> 
> 时间：2012-08-18T23:18:19.777
> 
> 标签：android, android-ndk, java-native-interface

我的本机库代码：

```
#include <string.h>
#include <jni.h>

jstring Java_com_mindtherobot_samples_ndkfoo_NdkFooActivity_invokeNativeFunction(JNIEnv* env, jobject javaThis) {
  return env->NewStringUTF("Hello from native code!");
} 
```

安卓.mk：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE    := libpacman
LOCAL_SRC_FILES := main.cpp
LOCAL_CFLAGS := -DANDROID_NDK
LOCAL_LDLIBS := -llog

include $(BUILD_SHARED_LIBRARY) 
```

MainActivity.java：

```
public class MainActivity extends Activity {

    static {
        System.loadLibrary("libpacman");
    }

    // declare the native code function - must match main.cpp
    private native String invokeNativeFunction();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // this is where we call the native code
        String hello = invokeNativeFunction();

        new AlertDialog.Builder(this).setMessage(hello).show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

库编译成功并且 libpacman.so 在 libs/armeabi 目录中，但是 logcat 说：

```
E/AndroidRuntime(13060): FATAL EXCEPTION: main
E/AndroidRuntime(13060): java.lang.ExceptionInInitializerError
E/AndroidRuntime(13060):    at java.lang.Class.newInstanceImpl(Native Method)
E/AndroidRuntime(13060):    at java.lang.Class.newInstance(Class.java:1319)
E/AndroidRuntime(13060):    at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
E/AndroidRuntime(13060):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
E/AndroidRuntime(13060):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
E/AndroidRuntime(13060):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
E/AndroidRuntime(13060):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
E/AndroidRuntime(13060):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(13060):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(13060):    at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime(13060):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(13060):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(13060):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(13060):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(13060):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(13060): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load libpacman: findLibrary returned null
E/AndroidRuntime(13060):    at java.lang.Runtime.loadLibrary(Runtime.java:365)
E/AndroidRuntime(13060):    at java.lang.System.loadLibrary(System.java:535)
E/AndroidRuntime(13060):    at com.example.pacman.MainActivity.<clinit>(MainActivity.java:11)
E/AndroidRuntime(13060):    ... 15 more
W/ActivityManager(  315):   Force finishing activity com.example.pacman/.MainActivity 
```

因此，系统找不到库，但如果解压缩 APK 文件 - 它在 lib 目录中。为什么不在库中？

编辑。好的，现在我修复了包名称：

```
jstring Java_com_wiagames_pacman_MainActivity_invokeNativeFunction(JNIEnv* env, jobject javaThis) {
  return env->NewStringUTF("Hello from native code!");
} 
```

Android.mk 和 MainActivity.java 是一样的。包是 com.wigames.pacman 无处不在。但我收到错误：

```
E/AndroidRuntime(23084): FATAL EXCEPTION: main
E/AndroidRuntime(23084): java.lang.ExceptionInInitializerError
E/AndroidRuntime(23084):    at java.lang.Class.newInstanceImpl(Native Method)
E/AndroidRuntime(23084):    at java.lang.Class.newInstance(Class.java:1319)
E/AndroidRuntime(23084):    at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
E/AndroidRuntime(23084):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
E/AndroidRuntime(23084):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
E/AndroidRuntime(23084):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
E/AndroidRuntime(23084):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
E/AndroidRuntime(23084):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(23084):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(23084):    at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime(23084):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(23084):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(23084):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(23084):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(23084):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(23084): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load libpacman: findLibrary returned null
E/AndroidRuntime(23084):    at java.lang.Runtime.loadLibrary(Runtime.java:365)
E/AndroidRuntime(23084):    at java.lang.System.loadLibrary(System.java:535)
E/AndroidRuntime(23084):    at com.wiagames.pacman.MainActivity.<clinit>(MainActivity.java:13)
E/AndroidRuntime(23084):    ... 15 more
W/ActivityManager(  315):   Force finishing activity com.wiagames.pacman/.MainActivity 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T09:02:31.090

你的类名显然不是`NdkFooActivity`。还要确保您的 java 包是`com.mindtherobot.samples.ndkfoo`. 本机函数的名称和调用它的 Java 上下文必须是同步的。通常，您会生成`javah -jni`适用*于已编译类*的本机头文件，而不是 java 源代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T10:17:06.053

您传递给的库名称`System.loadLibrary()`应该是`pacman`，而不是`libpacman`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T23:44:03.993

根据我在NDK的经验，你的类在Android App中的路径必须与

```
Java_com_mindtherobot_samples_ndkfoo_NdkFooActivity_invokeNativeFunction

Java_com_mindtherobot_samples_ndkfoo [package name]
NdkFooActivity [activity or class name]
invokeNativeFunction [function name] 
```

# selenium-webdriver - Selenium：为什么在点击之前显然需要睡眠？

> ID：12022991
> 
> 赞同：1
> 
> 时间：2012-08-18T23:18:22.977
> 
> 标签：selenium-webdriver

硒 2.25、火狐、OSX ML。

我让 Selenium 单击具有 Ajax 影响的按钮。

然后我想与结果进行交互。如果没有下面的睡眠，我会收到点击失败的错误，因为它无法将点击目标滚动到视图中。我不明白。这是怎么回事？

```
 WebElement sampleComboInput = driver.findElement(By.id("sampleCombo-inputEl"));
    sampleComboInput.click();
    sampleComboInput.sendKeys("English-03.txt");
    sampleComboInput.sendKeys(Keys.TAB, Keys.TAB);
    WebElement goButton = driver.findElement(By.id("inputDialogGoButton-btnInnerEl"));
    goButton.click();

    WebElement resultsSpan = driver.findElement(By.cssSelector("span.ne-type-node.PERSON"));
    assertTrue(resultsSpan.isDisplayed());
    assertEquals("PERSON (3)", resultsSpan.getText());
    WebElement parent = resultsSpan.findElement(By.xpath(".."));
    Thread.sleep(5000); // without sleep, get error unable to scroll
    Actions action = new Actions(driver);
    action.doubleClick(parent);
    action.perform(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:47:53.753

它需要等待元素加载，您是否尝试过 waitForVisible ？使用睡眠可能会更有效，这可能会导致您的代码在等待时间可能更长的其他机器上无法运行

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T19:51:17.450

您应该尽量避免使用 Thread.Sleep，因为它会不一致地工作。空间游侠是正确的，它需要等待元素加载。

c# 版本具有“WebDriverWait”类和“Until”方法。使用这两个，您可以等待元素加载。

查看 Loudenvier 对这篇文章的回答： [Selenium c# Webdriver: Wait until Element is Present](https://stackoverflow.com/questions/6992993/selenium-c-sharp-webdriver-wait-until-element-is-present)

这是我喜欢的方式。使用简单，易于重复使用，并且避免了与 Thread.Sleep 相关的问题。

# activerecord - 活动记录自定义关系（不基于 FK）

> ID：12022992
> 
> 赞同：0
> 
> 时间：2012-08-18T23:18:28.833
> 
> 标签：activerecord, yii

我有 2 个表：*生产*和 *production_summary*。*生产*存储有关每个生产、销售或丢弃的产品的数据。**production_summary* 存储有关生产*的每日摘要。这是*相关*的数据库结构：

```
CREATE TABLE `production` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `created` date NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `production_summary` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `date` date NOT NULL,
  `summary` text NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

模型由 Gii 生成，名称分别为：*Production*和*ProductionSummary*。

我这样定义关系：

```
class Production extends CActiveRecord
{
...
public function relations()
{
    return array(
        'summary' => array(self::HAS_ONE, 'ProductionSummary', '', 'on' => 'summary.date = t.created' ),
    );
}
...
} 
```

当我得到模型时它工作正常：

```
$model = Production::model()->with( 'summary' )->findByPk($id); 
```

但是延迟加载失败： unknown column **t.created**。我明白了：Yii 在延迟加载时不会加入表，只是查询*ProductionSummary*表。

在我的情况下使用`with()`不是问题，但开始想知道定义这种关系的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:59:58.597

从 Yii 1.1.9 开始，你可以这样定义关系：

```
return array(
    'summary' => array(self::HAS_ONE, 'ProductionSummary', array('date' => 'created')),
); 
```

# .net - 如何控制外部本地 DLL 的执行

> ID：12022993
> 
> 赞同：-1
> 
> 时间：2012-08-18T23:18:31.310
> 
> 标签：.net, dllimport, native-code, native-methods

我在.NET中有这段代码：

```
 result = NativeMethods.gsapi_init_with_args(_ghostScriptInstance, args.Length, _argumentPointersHandle.AddrOfPinnedObject()); 
```

依次执行此代码

```
[DllImport("C:\\gsdll64.dll", EntryPoint = "gsapi_init_with_args")]
public static extern int gsapi_init_with_args(IntPtr instance, int argc, IntPtr argv); 
```

问题是由于未知的问题，本机执行进入无限循环并且永远不会返回。

问题是我怎样才能限制这个原生事物的执行时间。我可以以某种方式告诉.NET，如果`NativeMethods.gsapi_init_with_args`在一分钟内没有返回然后终止本机执行并返回吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:38:06.587

可能在新线程中调用该方法并在调用未及时完成时终止该线程。杀死线程是不好的，但在这种特殊情况下，我假设您无权访问本机函数的源代码。

不知何故 Thread.Abort 不起作用（将尝试弄清楚互操作线程的工作原理），而不是创建托管线程，您可以使用 CreateThread 创建本机线程并在超时后终止它。

```
[DllImport("Library.dll")]
public static extern void InfiniteLoop();

[DllImport("kernel32")]
private static extern int CreateThread(
   IntPtr lpThreadAttributes,
   UInt32 dwStackSize,
   IntPtr lpStartAddress,
   IntPtr param,
   UInt32 dwCreationFlags,
   UInt32 lpThreadId
 );

[DllImport("Kernel32.dll", CharSet = CharSet.Auto)]
public static extern int TerminateThread(int hThread);

[DllImport("Kernel32.dll", CharSet = CharSet.Auto)]
public static extern int GetLastError();

private delegate int InvokeInfiniteLoop(IntPtr args);

static void Main(string[] args)
{
      InvokeInfiniteLoop invokeInfiniteLoop = (args1) =>
                                                    {
                                                        InfiniteLoop();
                                                        return 0;
                                                    };
     IntPtr infiniteLoopPtr = Marshal.GetFunctionPointerForDelegate(invokeInfiniteLoop);
     int handle = CreateThread(IntPtr.Zero, 0, infiniteLoopPtr, IntPtr.Zero, 0, 0);
     Thread.Sleep(TimeSpan.FromSeconds(5));
     int terminated = TerminateThread(handle);
     Console.WriteLine(terminated);
} 
```

请注意，终止线程很危险，您可以在此处阅读所有相关信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms686717](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686717(v=vs.85).aspx) (v=vs.85).aspx 。HansPassant 是对的，如果源代码可用，您可以调试它并找出错误。

# ios - 带背景图像的自动旋转：如何摆脱平铺效果？最佳实践？

> ID：12022994
> 
> 赞同：1
> 
> 时间：2012-08-18T23:18:34.083
> 
> 标签：ios, autorotate

我有这段代码可以在 iPad 上旋转期间更改背景图像：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{    
if (![SysConfig isPhone]) {   // Only need to worry about this for the iPad 
    [super didRotateFromInterfaceOrientation:fromInterfaceOrientation];
    if ([SysConfig isRetina]) {          
        if (UIInterfaceOrientationIsLandscape(fromInterfaceOrientation)) {
            [[self view] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"Default-Portrait@2x~ipad.png"]]];
        } else {
            [[self view] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"Default-Landscape@2x~ipad.png"]]];
        }
        // retina display above, regular below
    } else {
    \\ Same thing but for low res display            
        }
    }
}
} 
```

它工作正常，除了在短时间内您看到原始背景图像平铺在新旋转的设备上，然后它旋转并转移到适合新方向的新图像，所以它不会平铺。我想摆脱平铺的视觉效果。

我从阅读 SO 中收集到，我可能会通过某种动画隐藏平铺（交叉淡入淡出两个图像，或者缩小旧图像并在旋转发生时将其平滑地扩展为新图像）。但我也不确定我是否在正确的地方这样做，因为我已经看到了涉及`viewDidAppear` `viewWillAppear` `willAnimateRotationToInterfaceOrientation`等的方法。

两个问题：

1.  我可以通过简单地将这段代码（可能稍作修改）移动到不同的方法（可能会影响效果的时间）来避免这种平铺效果吗？
2.  如果我必须去看更精细的动画，我应该使用哪种方法？任何指向示例的指针？

谢谢。我读了很多书，但似乎有很多方法可以让它几乎正确，如果有人对最佳实践有评论，我会很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:49:28.480

解决方案：除了交换纵向和横向的实例外，我将相同的代码放入`willAnimateRotationToInterfaceOrientation`并修复了平铺问题。

# c# - 无法确定文件夹中的 Outlook 项目类型

> ID：12022995
> 
> 赞同：1
> 
> 时间：2012-08-18T23:18:47.830
> 
> 标签：c#, outlook, vsto, outlook-addin, outlook-2010

我正在尝试浏览 Outlook 文件夹并`SaveAs`根据用户提供的某些标准（*年龄、主题、内容*）在其中保存项目（）。我遇到的问题是我无法确定文件夹中某些项目的类型。我正在使用

```
if( currentItem is MailItem )
  // do something
else if (currentItem is AppointmentItem)
  // do something else
// etc. 
```

尝试确定类型并酌情处理该项目。不幸的是，我发现有几种类型似乎与我测试过的任何列出的类型都不匹配。使用**OutlookSpy**我可以查看显示为**类型 53** `OlObjectClass.olMeetingRequest`的相关对象。`MeetingItem`这与or都不匹配，`AppointmentItem`而且我似乎没有看到任何其他可能列出的类型。我找不到`MeetingRequestItem`或等效的。显而易见的方法，比如`GetType`only 说它是一个 COM 对象，到目前为止我发现没有其他方法似乎可以解决问题。

我已经通读了 Office 2007 的 VSTO，但它也没有提供任何我能找到的指导。我已经搜索了 MSDN，这个站点还有很多其他站点，但运气不佳。另一个用户发布了一个类似的问题，但没有任何答案。VS2010 能够解决这个问题，因为您可以将动态转换添加到监视列表并显示对象信息，它只是不告诉您它是什么。

很抱歉问我似乎是一个菜鸟的问题，但我试图找出一个*对象到 Interop 类型映射*。如果有人有动态确定 Outlook 对象类型的方法，这将非常有帮助；我只是在这方面没有太多运气......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:53:59.663

会议请求、响应或更新以[`Outlook.MeetingItem`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.meetingitem.aspx). [`AppointmentItem`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.appointmentitem.aspx)您可以使用访问底层证券[`MeetingItem.GetAssociatedAppointment()`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._meetingitem.getassociatedappointment.aspx)。

这是一个[来自 MSDN 的示例，](http://msdn.microsoft.com/en-us/library/ff184658.aspx)说明如何`AppointmentItem`从 a 访问 a `MeetingItem`：

```
Outlook.Folder folder = Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox) as Outlook.Folder;
string filter = "[MessageClass] = 'IPM.Schedule.Meeting.Request'";
Outlook.Items items = folder.Items.Restrict(filter);
foreach (Outlook.MeetingItem request in items)
{
    Outlook.AppointmentItem appt =  request.GetAssociatedAppointment(false);
    if (appt != null)   
        Debug.WriteLine(appt.Subject);
} 
```

# sql - 将列中的每个条目乘以 SQL 中的固定数字

> ID：12022999
> 
> 赞同：18
> 
> 时间：2012-08-18T23:19:46.143
> 
> 标签：sql

在 SQL 中，假设我有一个具有以下布局的表：

```
id    name      age
1     george    12
2     tom       14
3     charles   19
4     henry     21
5     fiona     12
6     kate      14
... 
```

如果我发现我犯了一个可怕的输入错误，并且每个人实际上都是他们年龄的两倍，有没有办法`age`一次扫描将列乘以 2，而不是需要煞费苦心地检查整个列并单独编辑每个年龄（假设我有 500 个条目，所以手动工作是不可能的）。

有 SQL 解决方案吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-18T23:21:59.563

这真的很容易：

```
UPDATE table SET age=age*2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-18T23:21:42.573

是的，运行`update`：

```
update theTable set age = age * 2 
```

根据数据库中的设置，您可能不允许在`update`没有 a的情况下运行 an `where`（以防止错误），然后您将添加一个虚拟比较：

```
update theTable set age = age * 2 where 1 = 1 
```