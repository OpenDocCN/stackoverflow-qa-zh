# StackOverflow 问答 10613000-10613999

# php - 无法裁剪已通过大小的缩略图

> ID：10613000
> 
> 赞同：0
> 
> 时间：2012-05-16T06:17:17.887
> 
> 标签：php

我有一个尺寸为 "300X367" 的图像。

我有一个使用这种类型裁剪缩略图的图像功能

 **但此功能裁剪“41X50”的缩略图。我认为它按原始图像的比例裁剪缩略图。

但我想要传递参数的准确缩略图大小。由于尺寸太大，我无法将 image.php 的代码放在这里。

如果有人有在图像标签和裁剪缩略图中传递大小参数的解决方案。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:38:30.980

试试这个示例代码

```
 <?php
    function getFileExtenction($image)
    {
        $imageAry = explode(".", $image);
        return $imageAry[1];
    }

    $image = 'images/imageName.png'; //Your image location

    $imageType = getFileExtenction($image); //check the image file type

    if ($imageType == "png")
        $src = imagecreatefrompng($image);

    else if ($imageType == "jpg")
        $src = imagecreatefromjpeg($image);

    else if ($imageType == "gif")
        $src = imagecreatefromgif($image);
    else
    {

    }

    list($width, $height) = getimagesize($image); //To get the image width and height

    $newwidth = 41; //Give your thumbanail image width 
    $newheight = 50; //Give your thubnail  image height
    $tmp = imagecreatetruecolor($newwidth, $newheight);

    imagecopyresampled($tmp, $src, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);

    $filename = "NewImagename." . $imageType; 

    /*========== if you want to store this file in a folder Ex: "thumbs" ==========
    $filename = "thumbs/NewImagename." . $imageType; 
    */

    imagejpeg($tmp, $filename, 100);

    imagedestroy($src);
    imagedestroy($tmp);
    ?> 
```**

# python - 在 sqlite3/Python 中的“选择”期间缓存了哪些数据，这可以从一开始就手动完成吗？

> ID：10613006
> 
> 赞同：3
> 
> 时间：2012-05-16T06:17:50.223
> 
> 标签：python, caching, sqlite, query-optimization

假设你有一个包含几千行的 sqlite 数据库——每一个都包含或引用一个相当大的、唯一的 blob——并且你想对这个集合进行稀疏采样，基于 rowid 或一些等效的主键提取行。我发现在连接后（20k 行中）第一次尝试获取几个（500）数据点时，调用需要 10 多秒才能返回；并且，随着每次连续迭代，调用变得越来越短，直到在 50-100 次这样的查询后收敛到大约 100 毫秒。

显然，无论是 sqlite 还是它的 python 包装器，都必须缓存……一些东西。如果我清除非活动内存（我在 OS X 中，但我认为 Linux 有一个类似的 if-not-identical “purge” 命令？），该行为可以完全复制。问题是，索引没有解决的缓存是什么？此外，是否有可能从一开始就自动将加速这些查询的任何信息提取到内存中？还是我完全错过了其他东西？

一些笔记，以防有人不立即知道答案......

*   每个 blob 大约 40kB，并且是问题的一个大 (ha) 源。对于想在家玩的人，我在下面有一些代码，但是我最好为可排序的信息和数据保留单独的表格。这引入了一个内部连接，但它通常比将它们放在一起更好（尽管如果有人觉得这是错误的，我很想听到它）。如果没有内部连接/数据获取，事情会从 4 秒开始，很快就会下降到 3 毫秒。

*   我觉得这可能是一个 PRAGMA 的事情，但我摆弄了其他人在网络荒野中建议的一些设置，并没有真正看到任何好处。

*   内存数据库不是一种选择。一方面，我试图跨线程共享（这实际上可能不是内存中的问题......？不确定），但更重要的是，数据库文件通常约为 17 GB。所以，就这样了。

*   话虽如此，缓存合理数量的信息没有问题。经过几十次调用后，非活动内存无论如何都会变得有些臃肿，但我宁愿 (1) 正确和 (2) 有效地做到这一点。

好的，现在为任何想要尝试复制事物的人提供一些代码。您应该能够将其复制并粘贴到一个独立的脚本中（这基本上就是我所做的，保存格式）。

```
import sqlite3
import numpy as np
import time

ref_uid_index = """CREATE INDEX ref_uid_idx
                   ON data(ref_uid)"""

def populate_db_split(db_file, num_classes=10, num_points=20000, VERBOSE=False):
    def_schema_split0 = """
    CREATE TABLE main (
        uid            INTEGER PRIMARY KEY,
        name           TEXT,
        label          INTEGER,
        ignore         INTEGER default 0,
        fold           INTEGER default 0)"""

    def_schema_split1 = """
        CREATE TABLE data (
            uid            INTEGER PRIMARY KEY,
            ref_uid        INTEGER REFERENCES main(uid),
            data           BLOB)"""

    def_insert_split0 = """
        INSERT INTO main (name, label, fold)
            VALUES (?,?,?)"""

    def_insert_split1 = """
        INSERT INTO data (ref_uid, data)
            VALUES (?,?)"""

    blob_size= 5000
    k_folds = 5
    some_names = ['apple', 'banana', 'cherry', 'date']

    dbconn = sqlite3.connect(db_file)
    dbconn.execute(def_schema_split0)
    dbconn.execute(def_schema_split1)

    rng = np.random.RandomState()
    for n in range(num_points):
        if n%1000 == 0 and VERBOSE:
            print n

        # Make up some data
        data = buffer(rng.rand(blob_size).astype(float))
        fold = rng.randint(k_folds)
        label = rng.randint(num_classes)
        rng.shuffle(some_names)

        # And add it
        dbconn.execute(def_insert_split0,[some_names[0], label, fold])
        ref_uid = dbconn.execute("SELECT uid FROM main WHERE rowid=last_insert_rowid()").fetchone()[0]
        dbconn.execute(def_insert_split1,[ref_uid,data])

    dbconn.execute(ref_uid_index)
    dbconn.commit()
    return dbconn

def timeit_join(dbconn, n_times=10, num_rows=500):
    qmarks = "?,"*(num_rows-1)+"?"

    q_join = """SELECT data.data, main.uid, main.label
              FROM data INNER JOIN main ON main.uid=data.ref_uid
              WHERE main.uid IN (%s)"""%qmarks

    row_max = dbconn.execute("SELECT MAX(rowid) from main").fetchone()[0]

    tstamps = []
    for n in range(n_times):
        now = time.time()
        uids = np.random.randint(low=1,high=row_max,size=num_rows).tolist()
        res = dbconn.execute(q_join, uids).fetchall()

        tstamps += [time.time()-now]
        print tstamps[-1] 
```

现在，如果要复制内容，请执行以下操作。在我的机器上，这会创建一个 800MB 的数据库并生成如下所示的内容。

```
>>> db = populate_db_split('/some/file/path.db')
>>> timeit_join(db)
12.0593519211
5.56209111214
3.51154184341
2.20699000359
1.73895692825
1.18351387978
1.27329611778
0.934082984924
0.780968904495
0.834318161011 
```

所以... 你说什么，知识渊博的圣人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:51:35.020

GB 大小的数据库文件永远不会完全加载到内存中。它们被分成所谓的页面树。这些页面缓存在内存中，默认为 2000 页。

例如，您可以使用以下语句将 1kB 大小的缓存页数加倍。

```
 conn.execute("""PRAGMA cache_size = 4000""") 
```

该连接再次为最后 100 条语句提供缓存，如您在函数描述中所见：

```
 sqlite3.connect(database[, timeout, detect_types, isolation_level, check_same_thread, factory, cached_statements]) 
```

cached_statements 需要整数，默认为 100。

除了设置缓存大小之外，您不太可能从应用程序启动时主动缓存语句或页面中受益。

# iphone - 当点击精确点时，如何在 RMMapview 中显示自定义注释视图？

> ID：10613007
> 
> 赞同：0
> 
> 时间：2012-05-16T06:17:55.767
> 
> 标签：iphone, ipad

我已经实现了tapOnMarker 选择器，并创建了自定义的annotationView。它显示了annotationView，但是当我点击pinpoint时，annotationView抽象出计数小于当前pinpoint的pinpoint，并且pinpoints有最大计数显示在annotationView上，这是我的实现代码。

 `````
- (void) tapOnMarker: (RMMarker*) marker onMap: (RMMapView*) map
{
    frame = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"redbox.png"]];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame =CGRectMake(0, 0,0, 0);
    [button setBackgroundImage:[UIImage imageNamed:@"pinMarker.png"] forState:UIControlStateNormal];
    button.enabled = YES;
    button.userInteractionEnabled = YES;
    [button addTarget:self action:@selector(markerLabelButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [marker setLabel:frame];
} 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:27:57.743

加载标记时，请执行以下步骤：

```
RMMarker *marker = [[RMMarker alloc]initWithUIImage:img anchorPoint:CGPointMake(0.5, 1.0)];
[marker setText:@"hello"  forMarker: marker];
[marker hideLabel];

- (void) setText: (NSString*) text forMarker: (RMMarker*) marker
{
  CGSize textSize = [text sizeWithFont: [RMMarker defaultFont]]; 
  CGPoint position = CGPointMake(  -(textSize.width/2 - marker.bounds.size.width/2), 0 );
  [marker changeLabelUsingText: text position: position font: [UIFont systemFontOfSize: 15.0]foregroundColor: [UIColor whiteColor] backgroundColor: [UIColor blackColor]];  
} 
```

并且每当您单击标记时，将调用这些方法并显示标记：

```
- (void) tapOnMarker: (RMMarker*) marker onMap: (RMMapView*) map
{
  NSArray* markers = [self.markerManager markers];
  for(RMMarker* m in markers) {
    if ([m class] == [RMMarker class])
      [m hideLabel];
  }
  [marker showLabel];   
} 
`````

# php - 无法访问与您的字段名称对应的错误消息

> ID：10613010
> 
> 赞同：27
> 
> 时间：2012-05-16T06:18:06.403
> 
> 标签：php, codeigniter

我有一个 check_captcha 的回调函数，它查看是否`$row`是`==0`或`== 1`（此信息是从 sql 中查询的）。

问题是我无法调用它，`$self->form_validation->set_rule('captcha', 'call_back_check_captcha')`因为我的函数接受了一个`$row`var。我现在调用它的方式是我收到无法访问错误消息。我怎样才能使这项工作？

```
function check_captcha( $row)
{
    if($row ==0)//didnt find any
    {
        $this->form_validation->set_message('captcha', 'text dont match captcha');
        return FALSE;
    }
    else
    {
        return TRUE;
    }
}

function create_member() 
        {   

            $past = time() - 7200; 

        $this->db->query("DELETE FROM captcha WHERE captcha_time <".$past);                 
        $sql = "SELECT COUNT(*) AS count FROM captcha WHERE word =? AND ip_address =?";     
        $binds = array($_POST['captcha'], $this->input->ip_address(), $past);
        $query= $this->db->query($sql, $binds);

        $row = $query->row(); //row query rows : if it found an entry =1 

            $self->check_captcha($row->count);

        //VALIDATIONS
        $this->form_validation->set_rules('first_name', 'First Name', 'trim|required');
        $this->form_validation->set_rules('last_name', 'Last Name', 'trim|required');      
        $this->form_validation->set_rules( 'email_address', 'Email Address', 'trim|required|valid_email|unique[user.email_address]');
        $this->form_validation->set_rules('username', 'Username', 'trim|required|min_length[4]|unique[user.username]');
        $this->form_validation->set_rules('password', 'Password', 'trim|required|min_length[4]|max_leng[32]');
        $this->form_validation->set_rules('password2', 'Password Confirmation','trim|required|matches[password]');
        if(!$_POST['captcha']){
        $this->form_validation->set_rules('captcha', 'Captcha','trim|required');}else{
        $this->form_validation->set_rules('captcha', 'Captcha', 'callback_check_captcha');}

        if($this->form_validation->run()==FALSE)
        {   //this -> to the curr obj(UserController) && registraion() points to the the function in controller
            $this->registration();  //reloads reg page so they can fill out right stuff
        }
        else 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-16T06:28:59.160

```
$this->form_validation->set_message('check_captcha', 'text dont match captcha'); 
```

消息名称对应于**函数**，而不是**字段**。因此将其设置为“ **check_captcha** ”将修复您的错误。错误消息将使用正确的字段名称。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-29T13:41:24.377

实际上，最好的方法是在语言上添加此条目“check_captcha”，而不是直接在控制器上编写错误消息。

就我而言，验证规则（表单验证）“less_than”的消息不存在。

我更改了文件**/system/language/??/form_validation_lang.php**。我已经添加了缺少的条目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-01T17:33:29.873

这对我有帮助

转到 application/config/autoload.php 并在那里添加“安全”帮助程序类。

```
$autoload['helper'] = array('security'); 
```

或者在表单验证之前添加这个

```
$this->load->helper('security'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-03T11:02:35.573

您可以在中设置**错误消息**`set_rules`：

`$this->form_validation->set_rules('captcha', 'Captcha', 'callback_check_captcha',`

`array('check_captcha' => 'text dont match captcha'));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-22T02:03:12.440

在您的语言文件中添加一个条目，其中包含错误消息（yourfieldname）内的部分名称 - 这解决了问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-03T13:57:20.863

即使已经回答了问题，还有另一个错误可能导致相同的错误消息：

如果您调用回调**checkCaptcha**，它将不起作用。总是喜欢像**Codeigniter** /General Topics/PHP 风格指南中推荐的 check_captcha 这样的名称。

# java - 用于按插入顺序获取数据的集合

> ID：10613021
> 
> 赞同：1
> 
> 时间：2012-05-16T06:18:42.360
> 
> 标签：java

如果我想将员工详细信息 1) 作为键值 2) 没有键值，我可以使用哪些集合。在这两种情况下，我都想按插入的顺序检索数据。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T06:19:37.480

对于简单的`List`实现（简单的值列表存储），您可以使用[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)该类。对于`Map`（键值存储），使用[`LinkedHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html). 这两种实现都将*保留*插入顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T06:20:23.450

[链接哈希映射](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)：

> Map 接口的哈希表和链表实现，具有可预测的迭代顺序。此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。请注意，如果将键重新插入到地图中，则插入顺序不会受到影响。（如果在调用 m.containsKey(k) 将在调用之前立即返回 true 时调用 m.put(k, v)，则将键 k 重新插入到映射 m 中。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:22:49.757

**对于有序格式的键值对**：[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)

**对于有序格式的非键值对**：[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

# php - 我如何使用 $_SERVER['HTTP_REFERER'] 来查找该用户来自谷歌？

> ID：10613025
> 
> 赞同：1
> 
> 时间：2012-05-16T06:18:58.417
> 
> 标签：php, search

我以前没有使用`$_SERVER['HTTP_REFERER']`过，我不知道如何通过点击 Google 搜索结果中的链接来找到该用户来到我的网站。用户可以来自 google.com、google.co.uk 等......

非常感谢帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T06:26:34.937

```
$url = $_SERVER['HTTP_REFERER'];
$query = parse_url ($url, PHP_URL_QUERY);
$host = parse_url ($url, PHP_URL_HOST);
if (strstr ($query, 'q=') && strstr ($host, 'google.')) {
    // user came from google
else {
    // user didnt come from google
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:48:03.787

这是我的解决方案，当页面请求中不存在引荐来源网址时，它不会发出任何警告。

```
public function doesUserCameFromCrawler() {
    $crawlerList=array("google.","yandex.","bing.");

    if (isset($_SERVER['HTTP_REFERER'])) {
        $referringPage = parse_url( $_SERVER['HTTP_REFERER'] );
        if ( isset( $referringPage['host'] )) {
            $referringHost = $referringPage['host'];
            foreach ($crawlerList as $crawler) {
                if (strpos(strtolower($referringHost),$crawler) !== FALSE) {
                    return TRUE;
                }
            }
        }
    }
    return FALSE;
} 
```

# wpf - 创建通用 DataTemplateSelector

> ID：10613032
> 
> 赞同：0
> 
> 时间：2012-05-16T06:19:43.383
> 
> 标签：wpf

我想创建一个通用模板选择器，我可以添加将从上到下评估的项目，例如

```
<MyTemplateSelector>
    <SelectTemplateBasedOnType DataType="{x:Type SomeType}" DataTemplate="{StaticResouce Template1}"/>
    <SelectTemplateIfTrue Binding="{Binding Path=SomeProp}" DataTemplate="{StaticResource Template2}"/>
</MyTemplateSelector> 
```

我的第一部分“SelectTemplateBasedOnType”工作正常，但第二部分不工作，因为我无法让绑定工作。我的类“SelectTemplateIfTrue”接收到一个绑定对象，但我不确定如何获取绑定的值。有什么方法可以调用绑定还是我完全走错了路？

提前致谢。

PS，上面的 XAML 是伪 xaml，所以如果其中有任何错误，这不是问题。

# ios - 使用 BluetoothManager 私有框架获取蓝牙的 MAC 地址

> ID：10613036
> 
> 赞同：4
> 
> 时间：2012-05-16T06:19:54.770
> 
> 标签：ios, iphone, bluetooth, iphone-privateapi

我正在尝试在 IOS 5.0.1 iPhone 4S 中使用蓝牙实现设备发现。我正在使用私有框架 BluetoothManager。

我的代码是：

```
- (IBAction)searchForDevices:(id)sender
{
    [self.indicator setHidden:NO];

    [[NSNotificationCenter defaultCenter] addObserver:self    selector:@selector(bluetoothAvailabilityChanged:)     name:@"BluetoothAvailabilityChangedNotification" object:nil];

    btCont = [BluetoothManager sharedInstance];

    [[NSNotificationCenter defaultCenter] addObserver:self     selector:@selector(deviceDiscovered:) name:@"BluetoothDeviceDiscoveredNotification"     object:nil];
}

- (void)bluetoothAvailabilityChanged:(NSNotification *)notification
{
    self.label.text = @"Availability changed!";
    [btCont setDeviceScanningEnabled:YES];
}

- (void)deviceDiscovered:(BluetoothDevice *)device
{

    [self.indicator setHidden:YES]; 
    self.label.text = device.address; 
```

我的蓝牙耳机被发现了。调用了 deviceDiscovered 回调函数，但 device.address 不包含蓝牙设备的 MAC 地址。该应用程序正在崩溃。此外，device.name 返回通知的名称 (BluetoothDeviceDiscoveredNotification)，而不是发现的设备的名称。

任何建议如何以这种方式检索我的蓝牙耳机的 MAC 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:02:50.457

使用此代码：

```
- (void)deviceDiscovered:(NSNotification *) notification {
    BluetoothDevice *bt = [notification object];
    NSLog(@"name: %@ address: %@",bt.name, bt.address); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:52:49.607

如果这是越狱应用程序，您可以`kLockdownBluetoothAddressKey`通过 liblockdown.dylib使用密钥

# ruby-on-rails - 升级 rails 2.3 后在集成测试中设置多个 cookie 会导致 NoMethodError

> ID：10613037
> 
> 赞同：1
> 
> 时间：2012-05-16T06:20:05.670
> 
> 标签：ruby-on-rails, cookies, integration-testing, ruby-on-rails-2

这一切在 Rails 2.3.5 中运行良好，但是当一家承包商公司突然直接升级到 2.3.14 时，所有集成测试都在说：

```
NoMethodError: You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[] 
```

我的 ApplicationController 上有一个 before_filter 设置了一堆 cookie 供一些 javascript 使用，我发现如果我注释掉除了设置 cookie 值的行之外的所有行，它工作正常，哪一行都没有关系我离开。

```
before_filter :set_cookies

def set_cookies
  cookies['logged_in'] = (logged_in ? 'y' : 'n')
  cookies['gets_premium'] = (gets_premium ? 'y' : 'n')
  cookies['is_admin'] = (is_admin ? 'y' : 'n')
end 
```

如果这些行中只有一条处于活动状态，则集成测试中的一切都很好，否则我会收到上面的错误。例如，考虑以下测试/响应：

```
test "foo" do
  get '/'
end

$ ruby -I"lib:test" test/integration/foo_test.rb -n test_foo -v
Loaded suite test/integration/foo_test
Started
test_foo(FooTest): E

Finished in 5.112648 seconds.

  1) Error:
test_foo(FooTest):
NoMethodError: You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]
    test/integration/foo_test.rb:269:in `test_foo'

1 tests, 0 assertions, 0 failures, 1 errors 
```

但是，如果其中任何两个 cookie 设置行被注释掉，我会得到：

```
$ ruby -I"lib:test" test/integration/foo_test.rb -n test_foo -v
Loaded suite test/integration/foo_test
Started
test_foo(FooTest): .

Finished in 1.780388 seconds.

1 tests, 0 assertions, 0 failures, 0 errors 
```

在开发和生产模式下运行的网站运行良好——这只是让测试通过的问题。此外，通过调试输出，我已经验证了错误不会在设置 cookie 的方法中抛出，一切正常，错误发生在稍后的某个地方（但回溯没有告诉我在哪里）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:02:22.423

事实证明，这是 rack rack 如何将 cookie 与会话 cookie 一起写入客户端的一个错误。Rack 包括双换行符和省略分号。

像 firefox 这样的浏览器可以处理轻度格式错误的 cookie 数据，但集成测试客户端不能。

为了解决这个问题，我必须在将 cookie 头发送到客户端之前重写它。

在 environment.rb 中：

```
require 'rack_rails_cookie_header_hack' 
```

在 lib/rack_rails_cookie_header_hack.rb 中：

```
class RackRailsCookieHeaderHack

  def initialize(app)
    @app = app
  end

  def call(env)
    status, headers, body = @app.call(env)
    if headers['Set-Cookie']
      cookies = headers['Set-Cookie']
      cookies = cookies.split("\n") if is_str = cookies.is_a?(String)
      if cookies.respond_to?(:collect!)
        cookies.collect! { |h| h.strip }
        cookies.delete_if { |h| h.empty? }
        cookies.collect! { |h| h.include?(';') ? h : h + ';' }
      end
      headers['Set-Cookie'] = is_str ? cookies.join("\n").strip : cookies
    end
    [status, headers, body]
  end
end 
```

抱歉，没有明确说明来源，我实际上在不久前修复了这个问题并遇到了这个问题，并认为我会发布我的补丁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:14:18.620

L0ne 的答案对我有用，但您还需要包含它 - 它可以放在 lib/rack_rails_cookie_header_hack.rb 的底部，前提是您在 environment.rb 文件的底部需要它 - 即在 Rails::Initializer 之后已运行：

```
ActionController::Dispatcher.middleware.insert_before(ActionController::Base.session_store, RackRailsCookieHeaderHack) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T17:41:24.490

被遗忘的老问题...

我还没有测试过 Lone 的修复方法，但他已经正确地发现了问题。如果您捕获异常并使用打印`exception.backtrace`，您将看到问题是由 `gems/actionpack/lib/action_controller/integration.rb:329`

有问题的代码是这样的：

```
cookies.each do |cookie|
  name, value = cookie.match(/^([^=]*)=([^;]*);/)[1,2]
  @cookies[name] = value
end 
```

如果你和我一样，只对一些超快速的集成测试感兴趣，并且不太关心未来的可维护性（因为它是 rails 2），那么你可以在该方法中添加一个条件过滤器

```
cookies.each do |cookie|
  unless cookie.blank?
    name, value = cookie.match(/^([^=]*)=([^;]*);/)[1,2]
    @cookies[name] = value
  end
end 
```

问题解决了

# android - 从网上下载图像并存储在 SD 卡中。然后从 sd 卡中检索它并希望在列表视图中显示

> ID：10613038
> 
> 赞同：-1
> 
> 时间：2012-05-16T06:20:10.957
> 
> 标签：android, image, sd-card

这是一个基于图像的项目。在这个我想从网上下载图像并存储在 sd 卡中。然后在我想从 sd 卡中检索它并想在列表视图中显示之后。另外我想使用位图方法来压缩文件。还缓存以加快进程。任何人都可以为这个项目提供建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:34:19.747

您可以使用惰性列表概念来解决此问题，我正在与您共享此概念的链接，请使用它。

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

我希望它对你有帮助。

# sharepoint-2010 - 为页面布局分配一个唯一的 ِmaster 页面 在 sharepoint 的发布门户中

> ID：10613045
> 
> 赞同：0
> 
> 时间：2012-05-16T06:20:49.417
> 
> 标签：sharepoint-2010, sharepoint-2007, sharepoint-designer

希望你身体健康。

我有一个 SharePoint 门户，该门户的母版页包含很多侧面导航，我遇到了以下案例：

我有一个名为 service.aspx 的页面，我只想隐藏此页面的导航，此页面基于页面布局。

我尝试创建没有导航的母版页副本并将此母版页分配给页面布局，但我不能，因为站点母版页会覆盖第一页

与此相关的问题，有没有办法使用在页面布局中包含此脚本的脚本来隐藏母版页元素？

或者，您有解决此类问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:52:00.933

您应该能够向母版页添加占位符，以便可以禁用侧边导航的某些样式。这篇[文章](http://www.sharepointblues.com/2010/06/18/single-master-page-and-layout-design-techniques/)有一些非常好的信息，关于你需要做什么来完成这个。

在母版页中，在 body 标记的 class 属性中添加内容占位符，并删除该标记可能具有的所有 runat=”server” 属性，因为 SharePoint 通常不需要这些属性并且会导致错误。

```
 <body scroll="yes" class="<asp:ContentPlaceHolder ID='PlaceHolderAdditionalBodyClass' runat='server' />"> 
```

现在在您的页面布局中将内容应用到占位符，例如在您的 frontpage.aspx 中您将编写

```
 <asp:Content ContentPlaceholderID="PlaceHolderAdditionalBodyClass" runat="server">frontpage</asp:Content> 
```

使用frontpage.aspx 作为页面布局的页面现在在其主体上具有类frontpage，您可以在默认样式表上引用该类，以对默认样式声明进行任何例外处理。

假设你有一个没有快速启动的首页和一个快速启动的默认布局，你会做这样的事情来拉伸首页：

```
 #leftNavigationContainer {
          float: left;
          width: 200px;
  }

 #pageLayoutContainer {
          float: left;
          margin-left: 200px;
 }

.frontpage #leftNavigationContainer { display: none; }
.frontpage #pageLayoutContainer { margin-left: 0; } 
```

# ios - 使用块的内存泄漏

> ID：10613049
> 
> 赞同：0
> 
> 时间：2012-05-16T06:20:59.993
> 
> 标签：ios, ipad, memory-management, memory-leaks, avassetexportsession

我写了两种方法

*   一个产生音频的
*   另一个将音频添加到视频中

我使用 'AVAssetExportSession' 来做这些事情并在 AVAssetExportSession 类的 'exportAsynchronouslyWithCompletionHandler' 中执行一些操作

这是生成音频的代码

```
AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition 
                                                                      presetName:AVAssetExportPresetAppleM4A];   

NSString *outputUrl = [NSString stringWithFormat:@"%@/Video/%@",userDocumentsPath,@"finalAudio.m4a"];
//Specifing the output file where we want to store our fianl asset
_assetExport.outputFileType = AVFileTypeAppleM4A;
NSURL *finalUrl = [[NSURL alloc] initFileURLWithPath:outputUrl isDirectory:NO];
BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:finalUrl.path];
//deleting file if it exists
if (fileExists)
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    [fileManager removeItemAtPath:finalUrl.path error:NULL];
}

_assetExport.outputURL = finalUrl;
_assetExport.shouldOptimizeForNetworkUse = YES;
_assetExport.audioMix = audioMix;
__block ICImageToVideo *temp = self;

[_assetExport exportAsynchronouslyWithCompletionHandler:
 ^(void ) 
 {
     NSString *documentsPath = nil;
     NSArray *filePaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
     if ([filePaths count] > 0) 
     {
         documentsPath = [filePaths objectAtIndex:0];
     }

     NSString *audioPath = [NSString stringWithFormat:@"%@/Video/%@",documentsPath,@"finalAudio.m4a"];

     NSURL *finalAudio = [[NSURL alloc] initFileURLWithPath:audioPath isDirectory:NO];
     temp.audioUrl = finalAudio;

     [temp addAudioToVideo];

     [finalAudio release]; 
     [_assetExport release]; 
 }]; 
```

并且将音频添加到视频的代码是：

```
- (void)addAudioToVideo
{
NSString *userDocumentsPath = nil;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
if ([paths count] > 0) 
{
    userDocumentsPath = [paths objectAtIndex:0];
}
NSURL *videoUrl = [[NSURL alloc] initFileURLWithPath:self.videoUrl] ;

//    NSString* audio = [[NSBundle mainBundle] pathForResource:@"sample" ofType:@"mp3"];
//    NSURL *audioUrl = [[NSURL alloc] initFileURLWithPath:audio];

if (self.audioUrl || videoUrl) 
{
    NSLog(@"Found the URLs!");
}

//Used to denote an audoi/video asset taken from the url
//https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVURLAsset_Class/Reference/Reference.html

AVURLAsset* audioAsset = [[AVURLAsset alloc] initWithURL:self.audioUrl options:nil];
AVURLAsset* videoAsset = [[AVURLAsset alloc] initWithURL:videoUrl options:nil];

//Used to denote a set of AVCompositionMutableTrack 's to create a custom combination from combining them
//https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVMutableComposition_Class/Reference/Reference.html

AVMutableComposition* mixComposition = [AVMutableComposition composition];

//Used to allow us to make a low level composition of tracks
//https://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVMutableCompositionTrack_Class/Reference/Reference.html
AVMutableCompositionTrack *compositionCommentaryTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio 
                                                                                    preferredTrackID:kCMPersistentTrackID_Invalid];

//Here we insert a custom asset into a track of our mutable track composition at the specified time
[compositionCommentaryTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration ) 
                                    ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] 
                                     atTime:kCMTimeZero error:nil];

NSLog(@"Audio Duration : %f",CMTimeGetSeconds(audioAsset.duration));
NSLog(@"Video Duration : %f",CMTimeGetSeconds(videoAsset.duration));

int difference = CMTimeCompare(videoAsset.duration, audioAsset.duration);
NSLog(@"Difference = %d",difference);

//We create another mutable composition track to hold the video that we need to insert into our final asset
AVMutableCompositionTrack *compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo 
                                                                               preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration) 
                               ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] 
                                atTime:kCMTimeZero error:nil];

AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition 
                                                                      presetName:AVAssetExportPresetPassthrough];   

NSString *outputUrl = [NSString stringWithFormat:@"%@/Video/%@",userDocumentsPath,@"final.mov"];
//Specifing the output file where we want to store our fianl asset
_assetExport.outputFileType = @"com.apple.quicktime-movie";
NSLog(@"file type %@",_assetExport.outputFileType);
NSURL *finalUrl = [[NSURL alloc] initFileURLWithPath:outputUrl isDirectory:NO];
BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:finalUrl.path];
//deleting file if it exists
if (fileExists)
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    [fileManager removeItemAtPath:finalUrl.path error:NULL];
}

_assetExport.outputURL = finalUrl;
_assetExport.shouldOptimizeForNetworkUse = YES;

__block ICImageToVideo *temp = self;
[_assetExport exportAsynchronouslyWithCompletionHandler:
 ^(void ) 
 {
     NSString *documentsPath = nil;
     NSArray *filePaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
     if ([filePaths count] > 0) 
     {
         documentsPath = [filePaths objectAtIndex:0];
     }

     NSString *videopath = [NSString stringWithFormat:@"%@/Video/%@",documentsPath,@"final.mov"];
     NSLog(@"videoPAth: %@",videopath);

     BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:temp.videoUrl];
     //deleting file if it exists
     if (fileExists)
     {
         NSFileManager *fileManager = [NSFileManager defaultManager];
         [fileManager removeItemAtPath:temp.videoUrl error:NULL];

         NSURL* tempSrcURL = [[NSURL alloc] initFileURLWithPath:videopath];
         NSURL* sourceUrl = tempSrcURL;
         //[tempSrcURL release]; //[NEW LEAK FIXED]
         //NSURL *sourceUrl = [[NSURL alloc] initFileURLWithPath:videopath];

         NSURL* tempDestURL = [[NSURL alloc] initFileURLWithPath:temp.videoUrl];
         NSURL* destinationUrl = tempDestURL;
         //[tempDestURL release]; //[NEW LEAK FIXED]
         //NSURL *destinationUrl = [[NSURL alloc]initFileURLWithPath:self.videoUrl];

         [fileManager moveItemAtURL:sourceUrl toURL:destinationUrl error:nil];
         [tempSrcURL release]; //[NEW LEAK FIXED]
         [tempDestURL release]; //[NEW LEAK FIXED]
     }
     [temp.delegate didProgressVideoGenereation:1];
     [temp.delegate didFinishPreparingVideoWithUrl:self.videoUrl];
     [_assetExport release];
 }];

[audioAsset release];
[videoAsset release];
[videoUrl release];
[finalUrl release];
} 
```

我似乎在两个/一个块中都出现了泄漏，并且我未能使用泄漏工具或静态分析器确定问题所在。

任何的意见都将会有帮助 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:32:39.280

在您使用的第二个块中，`self`而不是`__block temp`

```
 [temp.delegate didFinishPreparingVideoWithUrl:self.videoUrl]; 
```

应该

```
 [temp.delegate didFinishPreparingVideoWithUrl: temp.videoUrl]; 
```

并且你直接在你的块中释放`_assetExport`不要这样做，保存`_assetExport`到一个对象变量并`release`在`dealloc`方法中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:27:48.257

在底部块中，您正在访问而不是使用上面定义`self.videoUrl`的可变块变量。`temp.videoUrl`

# vb.net - 让VB Form在选择的目录下准备工作环境

> ID：10613051
> 
> 赞同：2
> 
> 时间：2012-05-16T06:21:09.040
> 
> 标签：vb.net, visual-studio-2008, embedded-resource

我正在为一个模拟程序开发一个 GUI。模拟程序是由输入文件驱动的单个 .exe（`File.inp`位于同一目录中）。该`Original.inp`文件用作模板，表单从中读取所有值到数组中。然后它会更改这些值，以反映用户在表单中所做的更改。之后，它将所有新值写入`File.inp`. 通过按下“运行”按钮，`Simulation.exe`文件被执行。文件夹结构如下所示：

```
root  
|  
|---input   
|   |  
|   |--Original.inp
|
|---GUI.exe
|---Simulation.exe
|---File.inp 
```

理想情况下，我只提供 GUI，用户将选择工作目录，然后 GUI.exe 将创建一个输入文件夹并将 and 提取`Original.inp`到`Simulation.exe`适当的位置。到目前为止，我只设法在我的 VB 项目中包含`Original.inp`并`Simulation.exe`作为“EmbeddedResources”，并且我让我的代码在用户选择的工作目录中创建了一个输入文件夹。

有人可以向我解释如何将 .inp 和 .exe 文件提取到正确的目录中吗？我在谷歌上搜索过，尝试过`File.WriteAllBytes`但`Filestream.WriteByte`没有得到想要的结果。

问题`File.WriteAllBytes`是我无法指向嵌入的资源（“Simulation.exe 不是资源的成员”并且`Filestream.WriteByte`我得到了一个 0 kb 的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:25:39.107

问题评论者是正确的，这可能是最好留给安装程序的任务。但是，如上所述，为了回答所提出的问题，我提供以下方法。

与您在问题评论中的假设相反，您确实需要从 GUI 的可执行文件中“读取”嵌入式资源，因为它是*嵌入式*资源而不是*外部*资源。它不会神奇地从可执行文件中提取它。您需要从程序集中手动读取并写入您指定的位置。为此，您需要通过当前正在执行的程序集的 GetManifestResourceStream 方法使用 .Net Reflection 读取资源。

该`Simulation.exe`文件是二进制文件，因此必须按此处理。我假设该`Orginal.inp`文件是一个文本文件，因为它提供了展示不同类型文件读取和写入的机会。为简洁起见，省略了任何错误处理（应该有很多）。

代码可能如下所示：

```
Imports System.IO
Imports System.Reflection

Module Module1

Sub Main()
    'Determine where the GUI executable is located and save for later use
    Dim thisAssembly As Assembly = Assembly.GetExecutingAssembly()
    Dim appFolder As String = Path.GetDirectoryName(thisAssembly.Location)

    Dim fileContents As String = String.Empty

    'Read the contents of the template file. It was assumed this is in text format so a 
    'StreamReader, adept at reading text files, was used to read the entire file into a string
    'N.B. The namespace that prefixes the file name in the next line is CRITICAL. An embedded resource
    'is placed in the executable with the namespace noted in the project file, so it must be 
    'dereferenced in the same manner.
    Using fileStream As Stream = thisAssembly.GetManifestResourceStream("SOQuestion10613051.Original.inp")
        If fileStream IsNot Nothing Then
            Using textStreamReader As New StreamReader(fileStream)
                fileContents = textStreamReader.ReadToEnd()
                textStreamReader.Close()
            End Using
            fileStream.Close()
        End If
    End Using

    'Create the "input" subfolder if it doesn't already exist
    Dim inputFolder As String = Path.Combine(appFolder, "input")
    If Not Directory.Exists(inputFolder) Then
        Directory.CreateDirectory(inputFolder)
    End If

    'Write the contents of the resource read above to the input sub-folder
    Using writer As New StreamWriter(Path.Combine(inputFolder, "Original.inp"))
        writer.Write(fileContents)
        writer.Close()
    End Using

    'Now read the simulation executable. The same namespace issues noted above still apply.
    'Since this is a binary file we use a file stream to read into a byte buffer
    Dim buffer() As Byte = Nothing
    Using fileStream As Stream = thisAssembly.GetManifestResourceStream("SOQuestion10613051.Simulation.exe")
        If fileStream IsNot Nothing Then
            ReDim buffer(fileStream.Length)
            fileStream.Read(buffer, 0, fileStream.Length)
            fileStream.Close()
        End If
    End Using

    'Now write the byte buffer with the contents of the executable file to the root folder
    If buffer IsNot Nothing Then
        Using exeStream As New FileStream(Path.Combine(appFolder, "Simulation.exe"), FileMode.Create, FileAccess.Write, FileShare.None)
            exeStream.Write(buffer, 0, buffer.Length)
            exeStream.Close()
        End Using
    End If

End Sub

End Module 
```

您还必须添加逻辑来确定文件是否已被提取，这样就不会在每次调用 GUI 时都发生这种情况。这就是为什么安装程序可能是正确答案的一个重要原因。

# profiling - 分析 Wicket 应用程序

> ID：10613055
> 
> 赞同：3
> 
> 时间：2012-05-16T06:21:34.563
> 
> 标签：profiling, wicket

是否有任何好的工具或技术来分析 Wicket 应用程序？我正在寻找的是可以让我在处理请求时详细了解 Wicket 内部发生的情况。

它不必像 Spring 洞察力那样花哨。

我是 Wicket 的新手，到处都是匿名的内部类，很难看到事情何时发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T13:33:08.280

至少对于 Wicket 1.4 可以看看内部方法`org.apache.wicket.RequestCycle.steps()`。基本上，这是一个已被识别为对 Wicket 应用程序的请求的请求，将在此处遍历 Wicket 请求处理周期的相关步骤。在类的开头，`RequestCycle`每个主要步骤都由一个 int 常量表示。int 值越高，步入循环的时间越晚。`RequestCycle.step()`从中调用的方法`RequestCycle.steps()`有一个 switch 语句，用于将不同的步骤委托给负责的框架方法，这些方法进一步向下委托。

请求周期中的步骤或阶段是按顺序排列的：

*   NOT_STARTED - 初始值
*   PREPARE_REQUEST - 为进一步处理做准备，调用 onBeginRequest
*   RESOLVE_TARGET - 确定相关的请求目标
*   PROCESS_EVENTS - 处理事件，将当前步骤设置为响应并响应
*   RESPOND - 仅响应，用于重定向的情况
*   DETACH_REQUEST - 通过委托触发分离钩子
*   DONE - 在 DETACH_REQUEST 之后成为当前值

步骤中实际发生的事情取决于各种接口的实现，最显着的是`IRequestCycleProcessor`和`IRequestTarget`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T11:19:03.380

看

org.apache.wicket.response.filter.ServerAndClientTimeFilter org.apache.wicket.response.filter.AjaxServerAndClientTimeFilter org.apache.wicket.devutils.inspector.RenderPerformanceListener org.apache.wicket.protocol.http.RequestLogger

所有这些都给出了一些衡量标准，但也请参阅我对 Cedric Gatay 回应的评论。使用 Yourkit (http://www.yourkit.com) 之类的工具将极大地帮助您完成这项任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T06:41:56.337

您可以像使用任何其他 Java 应用程序一样使用 jvisualvm 进行分析。使用正确的类过滤器集，您将能够查看代码中的耗时并希望对其进行纠正。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T10:29:14.670

我发现它`wicket-devutils`附带一个名为的面板`DebugBar`，可以访问大量调试信息。

它可以在这里看到：[http ://wicket.apache.org/apidocs/1.4/org/apache/wicket/devutils/debugbar/DebugBar.html](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/devutils/debugbar/DebugBar.html)

# c++ - 存储在地图中时c ++元素丢失

> ID：10613057
> 
> 赞同：0
> 
> 时间：2012-05-16T06:21:50.043
> 
> 标签：c++, stl, map, dfa

我尝试了几天来模拟一个非确定性有限自动机，使用我存储状态转换的地图，正如这篇[文章](https://stackoverflow.com/questions/10589240/insert-pair-into-map-in-c)中所指出的那样。

问题是它们缺少非确定性转换，即那些用相同符号引导我进入不同状态的转换。这是我的代码：

```
#include <iostream>
#include <map>
#include <utility>
#include <iterator> // for ostream_iterator

using namespace std;

int main (){

    freopen ("testMap.in", "r", stdin);
    int testCases;
    int i, j;

    int stateOrigin, stateDestination;
    char transitionCharacter ;
    int numberTransitions=8;

        typedef map<pair<int, char>, int> transitions;
        transitions trans;

          for (j=0; j<numberTransitions;j++){
             cin>> stateOrigin>>stateDestination>>transitionCharacter;
             trans.insert(transitions::value_type(std::make_pair(stateOrigin,transitionCharacter), stateDestination ));
        }

        map<pair<int, char>, int>::iterator p = trans.begin();

       for( p = trans.begin(); p != trans.end(); p++ ){
         cout << p->first.first<< " "<<p->first.second<<" "<<p->second<<endl;
       }

return 0;
} 
```

当我打印地图的全部内容时，这告诉我：

```
0 a 0
1 b 1
1 c 2
3 d 4
4 d 4 
```

预期的输出是：

```
0 0 a
0 1 a
1 1 b
1 2 c
1 3 c
3 4 d
4 4 d
4 5 d 
```

我究竟做错了什么。在另一个问题中，回答说模拟非确定性有限自动机转换的最佳方法是使用映射，但使用映射适合此类问题还是可以以任何方式解决？为什么这些值会丢失？

更改地图结构是否方便？IE：

```
typedef map<pair<int, int>, char> transitions; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T06:28:06.697

映射是`1-to-1`键和值之间的关系，因此它可以表示确定性自动机。

非确定性自动机可以由`1-to-many`关联容器表示。

即您需要 a`std::multimap`或者您可以继续使用`std::map`带有值类型的 a 不同容器：

```
 typedef map<pair<int, int>, vector<char> > transitions; 
```

所以每对可以有多个`char`值。`int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:30:04.477

你可以使用typedef，它是合法的。

在 std::map 中，键必须是唯一的，因此我猜你有一些相同的对值。在这些情况下，请尝试使用 std::multimap，因为它可以在其中存储多个键控值。

编辑：好的，问题是：

```
map<pair<int, char>, int>::iterator p = trans.begin(); 
```

你有一双。您希望看到：

```
0 0 a
0 1 a 
```

但是键是： (0, a) 和 (0, a) 因此地图忽略了一个。

您可以通过将地图制作为：（更改 int 和 char 顺序）来避免这种情况

```
typedef map<pair<int, int>, char> transitions; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:34:26.283

由于地图是一对，因此您的插入始终在寻找一对<>，因为地图中的第一个元素是一对，请尝试以下代码

```
 trans.insert(std::make_pair(std::make_pair(stateOrigin,transitionCharacter), stateDestination )); 
```

# iphone - 使用没有情节提要的 xcode 4.3.2 创建一个新项目

> ID：10613059
> 
> 赞同：0
> 
> 时间：2012-05-16T06:21:56.420
> 
> 标签：iphone, xcode, storyboard

我正在寻找一个很好的教程，它逐步展示了如何在不使用情节提要的情况下使用 xcode 4.3.2 创建一个新项目。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:32:53.480

这是链接，当您创建任何项目时，它会为您提供项目所需的选项，只需查看以下链接

[http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_2.html](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_2.html)

希望这可以帮助

# css - css - 如何删除继承的样式

> ID：10613060
> 
> 赞同：2
> 
> 时间：2012-05-16T06:21:58.653
> 
> 标签：css, html-table

请看这个：http: [//jsfiddle.net/ymSpY/](http://jsfiddle.net/ymSpY/)。如果你能看到`<td>`有一个内表。内表继承父表的样式。内表有边框。如何使边框不可见或将其删除？正如您所看到的内部表格的标记，`style="border-collapse: collapse;"`我什至尝试过`border=0` ，但它不起作用。内部/子表的边界仍然存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T06:23:33.387

您只能将规则应用于直系子女：

```
.dataTable > thead, 
.dataTable > thead > tr > th, 
.dataTable > tbody, 
.dataTable > tbody > tr > td {
    padding:       2px;
    border-top:    1px solid #F5F2EF;
    border-left:   1px solid #F5F2EF;
    border-bottom: 1px solid #F5F2EF;
    border-right:  1px solid #F5F2EF;
} 
```

这样，边框规则就不会渗透到嵌套表中。唯一的其他选择是进行大量重置，这将很快导致您的 CSS 变成 kudzu。

演示：http: [//jsfiddle.net/ymSpY/10/](http://jsfiddle.net/ymSpY/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T06:30:50.647

我可能会为子表创建一个单独的类，但除此之外，这是一个解决方案：

```
.dataTable td table, .dataTable td table tbody, .dataTable td table td {
    border:none;
} 
```

[http://jsfiddle.net/ymSpY/6/](http://jsfiddle.net/ymSpY/6/)

编辑：这是一个为子表定义的类，一旦您开始将其他元素添加到主数据表中，这可能会给您带来更大的灵活性。 [http://jsfiddle.net/ymSpY/11/](http://jsfiddle.net/ymSpY/11/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T06:25:13.003

我很困惑。您已经更改了边框的颜色，那么为什么不将它们设置为 0 呢？

```
.dataTable td table td {
    border-top: 0;
    border-left: 0;
    border-bottom: 0;
    border-right: 0;
} 
```

示例[http://jsfiddle.net/ymSpY/4/](http://jsfiddle.net/ymSpY/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-27T15:50:03.327

假设您使用引导程序来设置您的 ui 样式，则此方法有效。

```
table.noborder td {
    border: none !important;
}

table.noborder td table.table td {
    border: 1px solid #dee2e6 !important;
} 
```

# ubuntu - Selenium Standalone Server 不会启动 Firefox，除非在交互模式下（Ubuntu、PHP、Selenium 和 php-webdriver-bindings-0.9.0）

> ID：10613061
> 
> 赞同：1
> 
> 时间：2012-05-16T06:22:13.893
> 
> 标签：ubuntu, selenium

我想这是我不知道启动 Selenium 独立服务器的正确开关组合的情况，但这里有......

我有一个 Ubuntu 桌面盒，我想通过 Selenium 运行测试。所以我安装了最新的 Selenium Standalone 服务器（selenium-server-standalone-2.21.0.jar）。我可以启动服务器的交互式会话并让 Firefox 按照[此处](http://dionysus.uraganov.net/software/how-to-install-selenium-server-with-firefox-on-ubuntu-11-10/)的示例运行，但针对我的 Selenium 版本和我的 firefox 路径（即 /usr/bin/firefox）进行了修改。

当我以非交互模式启动服务器时，如下所示：

```
java -jar /usr/lib/selenium/selenium-server-standalone-2.21.0.jar -port 4444 > /var/log/selenium/selenium-output.log 2> /var/log/selenium/selenium-error.log & echo $! > /tmp/selenium.pid 
```

然后我得到所有正确的反馈，说服务器正在运行。但是，当我尝试从 php-webdriver-bindings-0.9.0 运行 example.php （已修改以删除对“Internet Explorer”的引用）时，它会失败，因为从未启动过 Firefox。绝对没有从 example.php 返回到我的浏览器，但我可以看到服务器正在执行命令（尽管添加了 ini_set("display_errors",1); 和 error_reporting(E_ALL); 到文件顶部）。错误和输出日志也没有显示任何错误，只是来自服务器启动的简单状态消息。

由于 PHP 只是将命令传递给服务器，因此在我看来，无论是否处于交互模式，服务器都会拥有相同的用户，因此应该没有权限问题。

最终我想我会想要为大规模操作建立一个网格，但现在我真的很想让这台服务器正常工作。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:37:18.303

目前这对我有用： http: [//dionysus.uraganov.net/software/how-to-install-selenium-server-with-firefox-on-ubuntu-11-10/](http://dionysus.uraganov.net/software/how-to-install-selenium-server-with-firefox-on-ubuntu-11-10/)

更新：

好的。上面的链接是我第一次尝试设置 ci 环境。现在我有这个启动命令，这工作正常！

**ci服务器**

```
Xvfb -fp /usr/share/fonts/X11/misc/ :22 -screen 0 1024x768x16 2>&1 &  
export DISPLAY=:22  
java -jar /usr/lib/selenium/selenium-server-standalone.jar -role hub -multiWindow -browserSessionReuse -timeout 30000 -forcedBrowserModeRestOfLine "*firefox /usr/lib/firefox-9.0.1/firefox" 2>&1 & 
```

**任何工人**

```
java -jar /usr/lib/selenium/selenium-server-standalone.jar -role webdriver -hub http://[server-ip]:4444/grid/register -port 5555 -browser browserName=firefox,platform=LINUX,maxInstances=5 
```

**下一步**
更多浏览器，selenium 和 xvfb 的启动脚本。对于 selenium，有两个资源：
[https://github.com/feniix/selenium-grid-startup](https://github.com/feniix/selenium-grid-startup)
[http://www.danstraw.com/installing-selenium-server-2-as-a-service-on-ubuntu/ 2010/09/23/](http://www.danstraw.com/installing-selenium-server-2-as-a-service-on-ubuntu/2010/09/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:07:50.577

将您的命令更新为：

```
java -jar /usr/lib/selenium/selenium-server-standalone-2.21.0.jar -role hub 
```

然后，您需要为 webdriver 角色启动另一个实例。就像是：

```
java -jar /usr/lib/selenium/selenium-server-standalone-2.21.0.jar -role webdriver -hub http://127.0.0.1:4444/grid/register -port 5555 -browser browserName=firefox,platform=LINUX,maxInstances=5 
```

现在您应该能够访问`http://127.0.0.1:4444/grid/console`并查看可用的远程代理。现在，当您运行测试时，它应该可以工作了。

# java - 解析 XML 文档时出错

> ID：10613065
> 
> 赞同：0
> 
> 时间：2012-05-16T06:22:55.343
> 
> 标签：java, linux

我在我的项目中使用 Xerces 2.11.0。但是，我在朗姆酒时间遇到错误。错误的堆栈跟踪如下：

```
java.lang.Exception: org.openid4java.discovery.DiscoveryException: 0x70d: Error parsing XML document
        at org.iitk.brihaspati.modules.actions.GoogleRequest.performDiscoveryOnUserSuppliedIdentifier(GoogleRequest.java:83)
        at org.iitk.brihaspati.modules.actions.GoogleLogin.doPerform(GoogleLogin.java:86)
        at org.apache.turbine.modules.actions.VelocityAction.doPerform(VelocityAction.java:84)
        at org.apache.turbine.util.velocity.VelocityActionEvent.perform(VelocityActionEvent.java:120)
        at org.apache.turbine.modules.actions.VelocityAction.perform(VelocityAction.java:110)
        at org.apache.turbine.modules.ActionLoader.exec(ActionLoader.java:134)
        at org.apache.turbine.modules.pages.DefaultPage.doBuild(DefaultPage.java:154)
        at org.apache.turbine.modules.Page.build(Page.java:91)
        at org.apache.turbine.modules.PageLoader.exec(PageLoader.java:136)
        at org.apache.turbine.Turbine.doGet(Turbine.java:796)
        at org.apache.turbine.Turbine.doPost(Turbine.java:891)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
        at org.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java:466)
        at org.apache.catalina.servlets.InvokerServlet.doPost(InvokerServlet.java:216)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)
        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:494)
        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
        at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2417)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)
        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
        at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)
        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)
        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:577)
        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)
        at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
        at org.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java:1040)
        at org.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:1151)
        at java.lang.Thread.run(Thread.java:636)
Caused by: org.openid4java.discovery.DiscoveryException: 0x70d: Error parsing XML document
        at org.openid4java.discovery.xrds.XrdsParserImpl.parseXmlInput(XrdsParserImpl.java:197)
        at org.openid4java.discovery.xrds.XrdsParserImpl.parseXrds(XrdsParserImpl.java:50)
        at org.openid4java.discovery.yadis.YadisResolver.retrieveXrdsLocation(YadisResolver.java:448)
        at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:252)
        at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:232)
        at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:166)
        at org.openid4java.discovery.Discovery.discover(Discovery.java:147)
        at org.openid4java.discovery.Discovery.discover(Discovery.java:129)
        at org.openid4java.consumer.ConsumerManager.discover(ConsumerManager.java:542)
        at org.iitk.brihaspati.modules.actions.GoogleRequest.performDiscoveryOnUserSuppliedIdentifier(GoogleRequest.java:74)
        ... 46 more
Caused by: org.xml.sax.SAXParseException: s4s-att-invalid-value: Invalid attribute value for 'targetNamespace' in element 'schema'. Recorded reason: cvc-datatype-valid.1.2.1: 'xri://$xrd*($v*2.0)' is not a valid value for 'anyURI'.
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(Unknown Source)
        at org.openid4java.discovery.xrds.XrdsParserImpl.parseXmlInput(XrdsParserImpl.java:188)
        ... 55 more 
```

我也尝试过其他版本，例如 Xerces 2.8.1 和 Xerces 2.8.0。但是，每次我得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:30:44.053

这里给出了问题和可能的解决方案：

*   [http://code.google.com/p/openid4java/issues/detail?id=122](http://code.google.com/p/openid4java/issues/detail?id=122)

# xpages - 'cookie' 全局对象应该如何在 xPages 上工作？

> ID：10613075
> 
> 赞同：4
> 
> 时间：2012-05-16T06:23:43.877
> 
> 标签：xpages

'cookie' 全局对象应该如何在 xPages 上工作？它是一个地图，所以我可以很容易地检查 cookie 的存在，但是如何创建一个新的 cookie？使用 cookie.name="value" 会引发错误，因为正如假设的那样，cookie 必须是带有过期等参数的对象。但它是什么类型的对象？我找不到任何合适的文档，或者我错过了一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T07:30:30.417

**cookie 对象表示请求**实例的 cookie 值的映射。所以你不能使用它，因为“设置 cookie”意味着“将 cookie 添加到响应中”。

因此，正如文章所建议的，您必须使用响应对象。

```
var response = facesContext.getExternalContext().getResponse(); 
var userCookie = new javax.servlet.http.Cookie("name", "value"); 
userCookie.setMaxAge(60*60*24*365*10); // set age in seconds...
userCookie.setPath("/"); // cookie will be valid under this path
response.addCookie(userCookie); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T06:32:46.160

我无法对 cookie 全局对象给出答案，但下面的文章展示了如何使用 javax.servlet.http.Cookie 类在 XPages 中管理 cookie：

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/cookie-management.html](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/cookie-management.html)

也许 cookie 全局对象需要一个 javax.servlet.http.Cookie 类型的对象？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:10:09.947

您是否尝试过使用资源并将元标记定义为 Set-Cookie？

# perl - 将 perl 编辑器与 My Eclipse 集成

> ID：10613081
> 
> 赞同：0
> 
> 时间：2012-05-16T06:24:28.603
> 
> 标签：perl, myeclipse

我有一些用 perl 编写的自动化脚本。我可以在**史诗 ide**的帮助下使用 Eclipse 3.x 版本运行这些脚本。但我需要将它们与**My Eclipse 6.0**集成。我用谷歌搜索但找不到任何匹配的插件。任何人都可以在这方面帮助我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:06:28.020

您应该也可以在 My Eclipse 中安装 EPIC 插件，添加存储库更新站点，否则您可以尝试使用[perlipse](https://code.google.com/p/perlipse/)。

# java - FTPClient - Java，下载的文件大小为 0 kb

> ID：10613087
> 
> 赞同：0
> 
> 时间：2012-05-16T06:25:39.693
> 
> 标签：java, file, ftp, download

我尝试使用此代码从我公司的 ftp 站点下载文件。该文件已下载，但大小为 0 kb。任何想法？非常感谢 ！

```
package org.kodejava.example.commons.net;<br/><br/>

import org.apache.commons.net.ftp.FTPClient;
import java.io.IOException;
import java.io.FileOutputStream;

public class FtpDownloadDemo {
    public static void main(String[] args) {
        FTPClient client = new FTPClient();
        FileOutputStream fos = null;

        try {
            client.connect("ftp.domain.com");
            client.login("admin", "secret");

            String filename = "sitemap.xml";
            fos = new FileOutputStream(filename);

            client.retrieveFile("/" + filename, fos);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fos != null) {
                    fos.close();
                }
                client.disconnect();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    }
} 
```

# javascript - 谷歌地图上的标记

> ID：10613089
> 
> 赞同：0
> 
> 时间：2012-05-16T06:25:45.870
> 
> 标签：javascript, google-maps

我在谷歌地图上放置了大约 3 百个标记，我还需要突出显示一些带有 Circlce 的区域。所以我在地图上放置了 3 个圆圈。我只想在圆圈内显示标记，而不是在圆圈外。圆圈可以放在任何地方（比如固定半径），标记应该在圆圈内。所有标记和放置圆圈都在 javascript 中。我是刚毕业的 javascript 新手。

普拉迪

我画圆圈的部分。

```
 for (var i = 0; i < ltlg.length; i++) {

    var marker = new google.maps.Marker({
        map: map,
        position: ltlg[i],
        visible: false
    });

    var circle = new google.maps.Circle({

        map: map,
        radius: 10 * 55000,
        fillcolour: '#AA0000'

    });

    circle.bindTo('center', marker, 'position');
} 
```

其中 ltlg[i] 是包含 3 个纬度和经度的数组。

和我标记的部分

```
for (var i = 0; i < ltlg1.length; i++) {

        // var detail = cityDetails[i];
        var markerSnowFall = new google.maps.Marker({
            map: map,
            icon: Image,
            position: ltlg1[i]

        }); 
```

这里 ltlg1[i] 包含大约 30 万个经纬度。

问题是我不知道如何在标记和放置圆圈之间建立联系，目前两者（标记使用 ltlg1[i] 和 cicle 使用 ltlg[i]）都使用不同的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:30:53.190

要么为每个标记创建一个循环，检查到圆心的距离是否意味着标记在圆圈内，并且只显示适合这个的标记

或者，如果您在地图上放置标记的方式支持它，则只发送应该绘制的标记（例如，在以前的项目中，我们在数据库中有标记的位置，我们可以查询圆圈内的所有标记）

# linkedin - 如何使用 API 获取 LinkedIn 公司状态更新评论？

> ID：10613092
> 
> 赞同：1
> 
> 时间：2012-05-16T06:25:55.343
> 
> 标签：linkedin

我正在尝试使用 update-key 获取对某个特定公司状态更新的评论。手册中没有记录，但是当尝试调用类似于网络状态更新链接的链接时，我可以获得一些数据，但结果数据不正确（它已发送到另一篇文章）。链接是：[http](http://api.linkedin.com/v1/companies/) ://api.linkedin.com/v1/companies/ {company_id}/updates/key={update-key}/update-comments。

我只是想知道是否可以使用 API 以及此功能是否在计划中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:50:39.977

截至此答案，阅读公司更新可在预览模式下使用：

[https://developer.linkedin.com/reading-company-updates](https://developer.linkedin.com/reading-company-updates)

但是，似乎没有任何已发布的支持通过其 id 提取特定更新。您可以指定类型，并对结果进行分页，但根据上面链接的文档，似乎不支持提取特定更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T01:09:45.707

这实际上是可能的，但是 LinkedIn API 文档在示例中似乎有一些拼写错误：

```
v1/companies/{company_id}/updates/key={update_key} 
```

我能够让它工作！

# delphi - 如何确保 RTTI 可用于类而不实例化它？

> ID：10613094
> 
> 赞同：7
> 
> 时间：2012-05-16T06:26:05.683
> 
> 标签：delphi, delphi-xe2, rtti

我最近在这个论坛上发布了一个[问题](https://stackoverflow.com/questions/10600186/delphi-compiler-doesnt-emit-rtti)，询问有关 DXE2 可执行文件中缺少 RTTI 信息的任何建议。

那篇文章是我实际案例的精简版。RRUZ 前来救援，因此精简版很快得到解决。但是，最初的问题仍然存在，所以我现在将其完整发布。“主要的”：

```
program MissingRTTI;
{$APPTYPE CONSOLE}
uses
  System.SysUtils, RTTI, MyUnit in 'MyUnit.pas', RTTIUtil in 'RTTIUtil.pas';
var
  RHelp:  TRttiHelper;
begin
  RHelp := TRttiHelper.Create();
  if (RHelp.IsTypeFound('MyUnit.TMyClass')) then WriteLn('TMyClass was found.')
  else WriteLn('TMyClass was not found.');
  ReadLn;
  RHelp.Free();
end. 
```

`RTTIUtil.pas`：

```
unit RTTIUtil;
interface
uses
  MyUnit;
type
  TRttiHelper = class(TObject)
  public
    function IsTypeFound(TypeName: string) : boolean;
  end;
implementation
uses
  RTTI;
function TRttiHelper.IsTypeFound(TypeName: string): boolean;
var
  rCtx:   TRttiContext;
  rType:  TRttiType;
begin
  Result := false;
  rCtx := TRttiContext.Create();
  rType := rCtx.FindType(TypeName);
  if (rType <> nil) then
    Result := true;
  rCtx.Free();
end;
end. 
```

最后`MyUnit.pas`：

```
unit MyUnit;
interface
type
  TMyClass = class(TObject)
  end;
implementation
end. 
```

未找到所需的类型。但是，如果我进行更改`TRttiHelper.IsTypeFound`以使其实例化（并立即释放） 的实例`TMyClass`，则会找到该类型。像这样：

```
function TRttiHelper.IsTypeFound(TypeName: string): boolean;
var
  rCtx:   TRttiContext;
  rType:  TRttiType;
  MyObj:  TMyClass;
begin
  Result := false;
  MyObj:= TMyClass.Create();
  MyObj.Free();
  rCtx := TRttiContext.Create();
  ... 
```

所以我想知道，有什么方法可以强制发出 RTTI 而`TMyClass`无需实际实例化它？

**更新：**

另一方面，我可能会提到，如果我尝试使用 获取 TRttiType ，*则会*`TRttiContext.GetType`找到所需的类型。所以发出了一些RTTI。检查由检索到的属性会产生一个真值，即检索到的类型是公共的（因此应该可以使用 来定位）。*`TRttiType.IsPublic``TRttiContext.GetType``TRttiContext.FindType`*

 ** * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T06:36:37.333

添加对该类的引用，并确保编译器/链接器无法将其从可执行文件中剥离。

```
unit MyUnit;

interface

type
  TMyClass = class(TObject)
  end;

implementation 

procedure ForceReferenceToClass(C: TClass);
begin
end;

initialization
  ForceReferenceToClass(TMyClass);

end. 
```

在生产代码中，您可能希望将其放置`ForceReferenceToClass`在基本单元中以便可以共享。声明类的单元的初始化部分是最自然的调用位置，`ForceReferenceToClass`因为该单元是自包含的。

关于您`GetType`可以定位类型的观察，调用的行为`GetType(TMyClass)`将对该类型的引用添加到程序中。并不是说 RTTI 存在并且`FindType`找不到它。相反，包含`GetType(TMyClass)`将 RTTI 添加到生成的程序中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-19T22:23:06.183

我使用 {$STRONGLINKTYPES ON} 并且工作得很好。放在主机上。*

# php - PHP 类扩展超出 RAM - CodeIgniter

> ID：10613097
> 
> 赞同：1
> 
> 时间：2012-05-16T06:26:23.417
> 
> 标签：php, class, codeigniter, overloading, extends

我正在通过完全替换它来修改模型类。我还想打破不同类中的大部分组件，并在需要时加载它们。这个特定的类必须在构造函数中加载。我的类的一个简单模型如下：

**模型.php**

```
class CI_Model {
     function __construct(){
         load_class('Model_validations', 'core');
     }
 } 
```

**模型验证.php**

```
class CI_Model_validations extends CI_Model {
     private $validations = array();
     public function validates($field){
     }
 } 
```

我从以下程序中得到的是：

> 致命错误：第 233 行 /xampp/htdocs/cms/system/core/Controller.php 中允许的内存大小为 134217728 字节已用尽（尝试分配 261904 字节）

此外，我尝试删除`extends CI_Model`它，它工作得很好。我们也可以说该`CI_Model_validations::validate()`方法在加载后立即调用，但它是空的，我不知道这会如何导致问题。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:32:57.320

This is because CI_Model tries to load CI_Model_validations which tries to load CI_Model again as it inherits from it. And CI_Model tries to load CI_Model_validations again and so on ...

UPDATE: My assumption above seems wrong from [this answer](https://stackoverflow.com/a/8774159/365188). It says that load_class is a singleton loader.

# c# - 当控件从 asp.net 中的 masterpase 运行时，禁用单个页面的控件

> ID：10613101
> 
> 赞同：0
> 
> 时间：2012-05-16T06:26:38.350
> 
> 标签：c#, asp.net, user-controls

我正在设计一个网站以避免代码复杂性，我在页脚部分使用控件，并在母版页本身中调用控件。但现在我的客户要求他们不需要页脚用于名为contactus 的特定页面。

那么，这里有任何编程方式来禁用单个页面的控件或任何其他可用的解决方案吗？

我的母版页结构：

```
<form id="form1" runat="server">
    <div id="bodywrapper">
            <ucdart:Header ID="Header1" runat="server" />
            <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
            </asp:ContentPlaceHolder>
        </div>
        <ucdart:Footer ID="Footer1" runat="server" />
</from> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:39:24.643

您可以在要隐藏 div 的页面上尝试此操作

```
Footer  foot = (Footer)Master.FindControl("Footer1");
foot.Visible = false; 
```

这在您要显示 div 的页面上

```
Footer  foot = (Footer)Master.FindControl("Footer1");
foot.Visible = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:17:48.177

```
Control c = Master.FindControl("Footer1");
 c.Visible = false; 
```

# python - Python 委托模式 - 如何避免循环引用？

> ID：10613102
> 
> 赞同：5
> 
> 时间：2012-05-16T06:26:40.573
> 
> 标签：python, delegates, circular-reference

我想问一下在 Python 中使用委托模式是否会导致循环引用，如果是这样，实现它以确保对象及其委托将被垃圾收集的最佳方法是什么？

在 Objective C 中，通过使用对委托的弱引用来避免上述问题。在 C++ 中，我们不会在委托上调用 delete。我在这里找到了指向 Python 弱引用模块的链接：http: [//docs.python.org/library/weakref.html](http://docs.python.org/library/weakref.html)。似乎一个合理的方法可能是创建一个弱引用来使用这个模块来引用实例变量，但我不确定。

由于我用谷歌搜索了这个问题并且无法找到答案，我想知道这是否是 Python 中的一个问题，或者是否有一个我不知道的通用解决方案（不需要弱引用模块）的？此外，我在询问之前确实搜索了 stackoverflow，但我发现的问题要么处理循环导入，要么处理一般的委托模式，而不是特定于 Python 和循环引用的问题。

提前感谢您的任何回复。

下面列出了一些玩具示例的代码，以帮助说明我的问题。我已经以这种方式实现了代码并且它可以工作，但我不确定内存是否最终被垃圾收集。

```
class A(object):
    def __init__(self):
        self.delegate = None

        # Some other instance variables that keep track of state for performing some tasks.

    def doSomething(self):
        if self.delegate is not None:
            self.delegate.doSomething()
        else:
            print('Cannot perform task because delegate is not set.')

    # Other methods not shown.

class B(object):
    def __init__(self):
        self.a = A() # Need to keep object 'a' from garbage collected so as to preserve its state information.
        self.a.delegate = self  # Is this a circular reference? How to 'fix' it so that A and B will eventually be garbage collected?

    def doSomething(self):
        print('B doing something')

    # Other methods not shown. 
```

**编辑**：

在阅读了一些回复后，我决定澄清我的问题。我了解 Python 具有垃圾收集功能。我不确定它是否会对循环引用的对象执行垃圾收集。我的担忧源于 Python 文档中的以下段落：

> CPython 实现细节：CPython 目前使用引用计数方案，对循环链接的垃圾进行（可选）延迟检测，该方案在大多数对象变得无法访问时立即收集它们，但**不能保证收集包含循环引用的垃圾**。有关控制循环垃圾收集的信息，请参阅 gc 模块的文档。其他实现的行为不同，CPython 可能会改变。当对象变得无法访问时，不要依赖于立即完成对象（例如：始终关闭文件）。

可以在此处找到原始形式的段落：http: [//docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)粗体设置是我的。

以下帖子更清楚地解释了循环引用对象的问题以及为什么它会阻止对这些对象进行垃圾收集（至少在典型设置中）：[http ://www.electricmonk.nl/log/2008/07/07 /python-destructor-and-garbage-collection-notes/](http://www.electricmonk.nl/log/2008/07/07/python-destructor-and-garbage-collection-notes/)。

此外，我刚刚看到 Alex Martellli 对以下问题的回复，即 Python 用户是否应该担心循环引用：[我应该担心 Python 中的循环引用吗？](https://stackoverflow.com/questions/2428301/should-i-worry-about-circular-references-in-python)从他的回答中，我了解到，即使循环引用的对象最终会被垃圾收集，但也会有开销。是否重要取决于程序。

此外，他提到要使用 Python 的 weakref 模块，但没有明确说明如何使用。

因此，我想添加以下问题以澄清一些未解决的问题：

1.  文档说循环引用的对象不能保证垃圾收集。但从回复看来，情况并非如此。那么我误解了这篇文章还是我错过了更多细节？
2.  我想，正如亚历克斯的回复和我的问题中所述，使用弱引用会完全避免问题的开销吗？

再次感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T06:32:34.677

Python 已经进行了垃圾收集。如果您在 C 中编写自己的容器类型作为扩展，您只需要做一些特殊的事情。

**演示：**运行这个程序，观察内存使用情况*不会*攀升。

```
class C(object):
    pass

def circular():
    for x in range(10**4):
        for y in range(10**4):
            a = C()
            b = C()
            a.x = b
            b.x = a

circular() 
```

**脚注：**下面的函数没有做任何事情，删除它。

```
def setDelegate(self, delegate):
    self.delegate = delegate 
```

而不是调用`x.setDelegate(y)`，您可以使用`x.delegate = y`. 您可以在 Python 中重载成员访问，因此编写方法没有任何好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:37:07.647

为什么最后不被垃圾收集？当脚本结束并且 python 完成执行时，整个内存部分将被标记为垃圾收集和（最终）操作系统恢复。

如果你在一个长时间运行的程序中运行它，一旦 A 和 B 都被取消引用，那么内存将被回收。

# php - Freebase MID 数组并向 freebase 发送多个查询

> ID：10613103
> 
> 赞同：2
> 
> 时间：2012-05-16T06:26:50.673
> 
> 标签：php, freebase, mql

我想遍历 MySQL 结果，这是一个 Freebase MID 数组，我希望输出是 Freebase 文章的名称！

这是我的代码：

```
$query = "SELECT `mid` FROM `items`";
$result = mysql_query($query);
$count = 1;
while ($row = mysql_fetch_array($result)) {
   $mid = $row['mid'];
   $simple_query = array('name'=> null, 'mid'=>$mid);
   $q_array = array('q'.$count=>array('query'=>$simple_query));
   array_push ($query_array, $q_array );
   $count++;
}

$jsonquerystr = json_encode($query_array);
$apiendpoint = "http://api.freebase.com/api/service/mqlread?queries";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "$apiendpoint=$jsonquerystr");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$jsonresultstr = curl_exec($ch);
curl_close($ch);
$resultarray = json_decode($jsonresultstr, true); #true:give us the json struct as an array

foreach($resultarray as $name){
    echo "$name<br>";
} 
```

错误：

{ "code": "/api/status/error", "messages": [ { "code": "/api/status/error", "message": "'list' 对象没有属性 'get'" } ]，“状态”：“500 内部错误”，“transaction_id”：“缓存；cache04.p01.sjc1:8101;2012-05-14T07:31:39Z;0079”}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:03:49.137

您`$query_array`应该只是按名称查询的关联数组，而不是关联数组的数组。所以代替这个：

```
$q_array = array('q'.$count=>array('query'=>$simple_query));
array_push ($query_array, $q_array ); 
```

..它应该看起来像这样：

```
$q_array = array('query'=>$simple_query);
$query_array['q'.$count] = $q_array; 
```

但是，该代码使用的是即将被弃用的旧 Freebase API。在[新 API](http://wiki.freebase.com/wiki/Freebase_API)中执行此操作的更好方法是将其全部构建为一个查询，如下所示：

```
[{
  "mid": null,
  "name": null,
  "topics:mid|=":[
    "/m/045c7b",
    "/m/0d6lp",
    "/m/021ympy",
    ...
    ]
}] 
```

这使您可以传入一组 MID 并为每个 MID 取回一个名称。从新 API 中获取此内容的 URL 应如下所示：

`https://www.googleapis.com/freebase/v1/mqlread/?query=[{...}]`

# regex - htaccess 使用正则表达式重定向

> ID：10613104
> 
> 赞同：1
> 
> 时间：2012-05-16T06:26:52.707
> 
> 标签：regex, .htaccess, mod-rewrite, redirect

我的 .htaccess 文件包含以下内容

```
RewriteCond %{HTTP_HOST} ^www\.mydomain\.org\.in [NC]
RewriteRule ^(.*)$ http://mydomain.org.in/$1 [R=301,L] 
```

我将整个站点移动到一个子文件夹，现在网页中的 css 和 js 文件都没有加载。谁能告诉我这个正则表达式是什么意思或为什么会这样？

注意：我从我的前辈那里继承了该网站：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:32:55.473

它只是将任何请求重定向`www.mydomain.org.in/...`到`mydomain.org.in/...`; 即它`www`从前面剥离。但是，如果您只是将资源文件移动到子目录，这不会导致资源文件中断，假设您也移动了它们（尽管您可能应该将`.htaccess`文件留在原处）。

听起来您的 HTML 中指向 CSS/JS 文件的链接可能已损坏，可能是因为它们使用绝对 URI（相对于域根而不是当前 URI）。尝试先检查它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:42:17.200

正如威尔所解释的，.htaccess 不是问题。您的 JS 和 CSS 位置没有被提及，因此当源文件的位置发生更改时，浏览器不会找到它们，因此页面不会呈现。

但是，除了您拥有的代码之外，您还可以尝试以下 .htaccess 代码，看看它是否链接到文件。

```
RewriteRule ^(.+)\.css$ http://mydomain.org.in/folder/$1.css [R=302,NC]
RewriteRule ^(.+)\.js$ http://mydomain.org.in/folder/$1.js [R=302,NC] 
```

上面的代码将对 css 和 js 文件的调用重定向到您域中的子文件夹。更改`folder`为您将所有内容移动到的文件夹。

# jquery - 使用来自另一个域的 Jquery 获取请求不起作用？

> ID：10613106
> 
> 赞同：1
> 
> 时间：2012-05-16T06:27:03.513
> 
> 标签：jquery, cross-domain

我正在创建一个托管在域 example.com 上的 Web 应用程序，我想下载一个 1 MB 的二进制文件来检查下载速度，如果二进制文件托管在同一个域上，它的工作正常。

但是当我尝试使用另一个域时，它停止工作。我尝试了跨域属性，但注意到发生了。

我的代码如下：

```
 jQuery143.ajax({
    type: 'GET',
    url: 'http://example2.com/myfile.bin?id=xxxxxxx',
    dataType: 'application/octet-stream',
    success: function (msg) {
    },
    complete: function (xhr, textStatus) {
    }
}); 
```

当我用“example.com”替换“example2.com”时，它工作正常。所以请让我知道如何解决这个问题。

我把crossdomain.xml放在example2.com上，所以请求状态是OK的。

谢谢， Laxmilal Menaria

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:30:50.503

您可以尝试将数据类型发送为“jsonp”以进行跨域请求，您可以查看此链接以获取帮助[Cross domain Get with Jquery](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)并且此链接可帮助您开始[远程 JsonP](http://bob.pythonmac.org/archives/2005/12/05/remote-json-jsonp/)

来自[Jquery.ajax](http://api.jquery.com/jQuery.ajax/)

> “jsonp”：使用 JSONP 加载到 JSON 块中。添加一个额外的“？callback =？” 到 URL 的末尾以指定回调。通过将查询字符串参数“_=[TIMESTAMP]”附加到 URL 来禁用缓存，除非缓存选项设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:30:52.717

您的浏览器不允许进行跨域调用。如果您从浏览器调用，JSONP 似乎是唯一的选择。

[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:37:09.997

我认为您需要将跨域请求的“crossDomain”参数设置为 true。请检查这个[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# iphone - 将 UITabBarController 的第二个选项卡中的第二个 UITableView 连接到类文件？

> ID：10613110
> 
> 赞同：0
> 
> 时间：2012-05-16T06:27:39.100
> 
> 标签：iphone, objective-c, xcode, uitableview

我在 UITabBarController 的新选项卡中创建第二个 UITableView 时遇到问题。

我的应用程序：

第一个选项卡有一个 UITableView 显示来自网站的提要。它工作正常！

第二个选项卡，我想创建一个新的 UITableView 显示不同的信息。我能够在主 XIB 文件中创建一个空的 UITableView，还为新的 UITableView 创建了一个新的类文件，但我无法弄清楚如何将第二个选项卡中的新 UITableView 连接到我创建的新类文件。

感谢阅读.. 希望你能理解我的问题.. 谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:03:08.507

选择主 XIB 文件，它将打开界面生成器视图。打开实用程序视图->转到身份检查器->选择您的表格视图控制器->将类名添加到您的表格视图的身份检查器。

# jsp - 从 request.getParameter() 获取 Null 值

> ID：10613117
> 
> 赞同：0
> 
> 时间：2012-05-16T06:28:08.893
> 
> 标签：jsp, servlets

在我的应用程序中，在加入的帮助下，我在我的 jsp 页面中显示动态值，如下所示：

```
<%  while(rs.next()){ %>
<td><input type="checkbox" name="chkName" onclick="selectall()"></td> 
<td><input type="text"  name="empId" value="<%= rs.getString(1)%> "   disabled="disabled"  maxlength="10"></td>
<td><input type="text" name="device" value="<%= rs.getString(2)%>"   disabled="disabled" maxlength="10"></td>
<td><input type="text"  name="features" value="<%= rs.getString(3)%>"  disabled="disabled" maxlength="60"></td>
<td><input type="password" name="password" disabled="disabled"></td>
<td><input type="text"  name="policyName" value="<%= rs.getString(4)%>"  disabled="disabled" maxlength="10"></td>
</tr>
<% } 
%> 
```

每当我从另一个 servlet 调用时（因为我想显示从这个 jsp 到另一个 jsp 的获取）`request.getParameter("empId")`，它正在获取“NULL”值。我认为，我必须使用 set（`session.setAttribute()`或`request.setParameter()`）。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T06:47:55.153

可能是因为 disabled 属性..也许你可以用 readonly 代替它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:49:56.120

你的意思是说你需要在2个jsp页面之间传递值吗？然后您可以通过将其设置在隐藏的输入字段中或在会话中设置来使用它...

检查这是否对您有帮助...[在 JSP 页面中使用 request.setAttribute](https://stackoverflow.com/questions/229937/using-request-setattribute-in-a-jsp-page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T04:47:31.767

另一种简单的方法。

您可以添加隐藏类型。

```
<td><input type="text" value="<%= rs.getString(1)%> "   disabled="disabled"  maxlength="10"></td>
<td><input type="hidden"  name="empId" value="<%= rs.getString(1)%> "  maxlength="10"></td> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-16T07:00:55.560

尝试`request.getParameter("empID")`名为`empId`not的字段`<i>empId`。希望有帮助，只需重命名表单中的字段

# iphone - UILabel UILongPressGestureRecognizer 不工作？

> ID：10613118
> 
> 赞同：5
> 
> 时间：2012-05-16T06:28:09.853
> 
> 标签：iphone, ios, uibutton, uigesturerecognizer

我怎样才能获得`UILongPressGestureRecognizer`uilabel。当我实现以下代码时，它不会调用该函数。所以请告诉我我做错了什么？

```
UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc]      initWithTarget:self action:@selector(LabelLongPressed:)];
longPress.minimumPressDuration = 0.5;  // Seconds
longPress.numberOfTapsRequired = 0;

[objlblDuplicate addGestureRecognizer:longPress];
[longPress release]; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-16T06:30:41.183

默认情况下，UILabel 无法获取触摸事件。

```
objlblDuplicate.userInteractionEnabled = YES; 
```

# c# - (WPF C#) 图像水印和调整大小

> ID：10613121
> 
> 赞同：0
> 
> 时间：2012-05-16T06:28:43.423
> 
> 标签：c#, wpf, image, watermark

我的 WPF 应用程序已经可以调整图像大小和文本水印。当转换后的图像大小为 700 像素 x 700 像素且水印文本为 30 pt 时，我的应用程序将 4MB 图像转换为 600 KB 图像。

如何减小图像大小（600 KB 到 250 KB 或更小）？

考虑到我的应用程序是使用 WPF、C# 和 .NET 4 编写的，我应该使用哪个库或代码示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:43:16.563

减小图像大小有两种方法：降低分辨率或使用您正在使用的格式的压缩参数（即 jpeg 压缩基于余弦变换，使您能够控制最终图像的质量（和大小））。

我使用 BitmapSource 扩展方法来控制我保存的 Jpeg 图像的质量。也许你会发现它很有用：

```
 public static void SaveBitmapSourceAsJpeg(this BitmapSource image, string fileName, int quality)
    {
        using (var fileStream = new FileStream(fileName, FileMode.Create))
        {
            var encoder = new JpegBitmapEncoder();
            encoder.Frames.Add(BitmapFrame.Create(image));
            encoder.QualityLevel = quality;
            encoder.Save(fileStream);
        }
    } 
```

# c++ - -std=c++11 和 -std=gnu++11 有什么区别？

> ID：10613126
> 
> 赞同：155
> 
> 时间：2012-05-16T06:29:23.757
> 
> 标签：c++, gcc, c++11, clang

gcc 和 clang 的编译参数`-std=c++11`和as有什么区别？与和`-std=gnu++11`相同的问题？我了解 C++ 和 C 标准，我感兴趣的是参数的差异。`c99``gnu99`

我在某处读到它与一些扩展有关，但我不清楚哪些扩展以及如何为新项目选择一个或另一个。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-05-16T06:51:04.340

正如您自己发现的那样，这两个选项之间的区别在于是否启用了违反/扩展 C++ 标准的 GNU 扩展。[此处](http://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Extensions.html)描述了 GNU C++ 扩展。您还可以在您的 C++ 程序中使用大多数 GNU C 扩展（[在此处描述）。](https://gcc.gnu.org/onlinedocs/gcc/C-Extensions.html)[在此处](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)`-Wpedantic`阅读有关GCC 选项的信息也很有用。

请注意，某些扩展在使用 时仍然有效`-std=c++11`，只要它们不违反标准即可。例如，当使用 MinGW 编译器时，我需要一个工作的扩展`Boost.Lexical_Cast`。但是，只要您不使用它们中的任何一个，您最好还是坚持标准而不进行扩展以获得最大的可移植性。如果您发现自己被迫更改编译器，这可能会派上用场。

# java - 如何在 defprotocol 中使用可选参数？

> ID：10613128
> 
> 赞同：6
> 
> 时间：2012-05-16T06:29:35.753
> 
> 标签：java, clojure

我想在我的类型中有一个带有可选参数的函数。我已经成功地在不属于某个类型的函数中使用了可选参数，但是，我似乎无法让它在协议和类型中工作。

我失败的试验：

```
Clojure 1.4.0
user=> (defprotocol OptArg
(func [this a & b]))
OptArg

user=> (deftype Imp [] OptArg
(func [this a & b] (println a b)))
user.Imp

user=> (func (Imp.) 1 2)
CompilerException java.lang.IllegalArgumentException: No single method: func of interface: user.OptArg found for function: func of protocol: OptArg, compiling:(NO_SOURCE_PATH:5) 

user=> (defn opt-arg [a & b] (println a b))
#'user/opt-arg

user=> (opt-arg 1 2)
1 (2)
nil
user=> (opt-arg 1)
1 nil
nil
user=> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T06:46:57.267

[正如这里](http://groups.google.com/group/clojure/browse_thread/thread/1f2a120447c4178c?pli=1)所回答的，协议不支持可变参数。您必须为每个所需数量的参数定义一个单独的方法，或者简单地接受一个列表作为参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T05:45:11.730

我`defprotocol+`为您制作了一个带有可选参数的协议。这个想法是`& args`在协议中作为一个固定参数并自动创建一个包装函数。

看看[这个关于宏的要点](https://gist.github.com/sunng87/372a0a45a07357569eb6)。

用法

```
（defprotocol+ IPipeline
  （运行并等待 [this & args]））

(defrecord+管道[]
  管道
  （运行并等待 [this & args]
    ))

（运行并等待（管道。）1 2 3 4 5）

```

# python - 如何访问列表元素

> ID：10613131
> 
> 赞同：27
> 
> 时间：2012-05-16T06:29:56.127
> 
> 标签：python, list

我有一个清单

```
list = [['vegas','London'],['US','UK']] 
```

如何访问此列表的每个元素？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-16T06:33:54.197

我首先不调用它`list`，因为这是 Python 内置`list`类型的构造函数的名称。

但是，一旦您将其重命名为`cities`或其他名称，您将执行以下操作：

```
print(cities[0][0], cities[1][0])
print(cities[0][1], cities[1][1]) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-11T22:13:05.047

这很简单

```
y = [['vegas','London'],['US','UK']]

for x in y:
    for a in x:
        print(a) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-01T11:20:52.770

艰难地学习python ex 34

尝试这个

```
animals = ['bear' , 'python' , 'peacock', 'kangaroo' , 'whale' , 'platypus']

# print "The first (1st) animal is at 0 and is a bear." 

for i in range(len(animals)):
    print "The %d animal is at %d and is a %s" % (i+1 ,i, animals[i])

# "The animal at 0 is the 1st animal and is a bear."

for i in range(len(animals)):
    print "The animal at %d is the %d and is a %s " % (i, i+1, animals[i]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-14T04:17:11.837

试图`list[:][0]`显示列表中每个列表的所有第一个成员不起作用。结果将与 相同`list[0][:]`。

所以我使用这样的列表理解：

```
print([i[0] for i in list]) 
```

它返回列表中每个列表的第一个元素值。

PS：我使用变量`list`，因为它是问题中使用的名称。我不会使用它作为变量名，因为它是`list()`Python 中的基本函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-01T11:28:48.550

打印列表中所有项目的递归解决方案：

```
def printItems(l):
   for i in l:
      if isinstance(i,list):
         printItems(i)
      else:
         print i

l = [['vegas','London'],['US','UK']]
printItems(l) 
```

# hadoop - 在 hadoop mapreduce 作业中使用多个本地文件夹作为源

> ID：10613133
> 
> 赞同：0
> 
> 时间：2012-05-16T06:30:04.297
> 
> 标签：hadoop, mapreduce

我在多个本地文件夹中有数据，即 /usr/bigboss/data1、/usr/bigboss/data2 和更多文件夹。我想使用所有这些文件夹作为我的 MapReduce 命令的输入源并将结果存储在 HDFS 中。我找不到使用 Hadoop Grep 示例执行此操作的有效命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:25:56.630

数据需要驻留在 HDFS 中，以便您使用 grep 示例对其进行处理。您可以使用 -put FsShell 命令将文件夹上传到 HDFS：

```
hadoop fs -mkdir bigboss
hadoop fs -put /usr/bigboss/data* bigboss 
```

它将在当前用户 HDFS 目录中创建一个文件夹，并将每个数据目录上传到它

现在您应该能够在数据上运行 grep 示例

# ruby-on-rails - 如何将不同变量的结果组合成一个变量？

> ID：10613139
> 
> 赞同：-1
> 
> 时间：2012-05-16T06:30:33.373
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, controller

我的控制器索引操作中有以下四个变量，它们从不同的模型中检索数据，如下所示：

```
@forum = Forum.where(:user_id => @users.collect(&:user_id)).all
@poll=Poll.where(:created_by => @users.collect(&:user_id)).all
@article = Article.where(:user_id => @users.collect(&:user_id)).all
@jobpost = Jobplacement.where(:user_id => @users.collect(&:user_id)).all 
```

我想将所有这些变量的数据合并到一个变量`@post`中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T06:45:40.943

在单个集合中拥有不同类型的对象是不好的。但正如你所要求的那样尝试

```
@post = [@forum,@forum,@article,@jobpost].flatten 
```

更新：当我还是 Ruby 的新手时，我写了这个答案。当我看到这个答案时，我无法控制自己的笑容。flatten 的目的是从嵌套数组中生成单个数组。答案与问题无关。但我对赞成票感到惊讶:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:59:21.163

将它们放在哈希中：

```
@post = Hash.new
@post['forum']   = Forum.where(:user_id => @users.collect(&:user_id)).all
@post['poll']    = Poll.where(:created_by => @users.collect(&:user_id)).all
@post['article'] = Article.where(:user_id => @users.collect(&:user_id)).all
@post['job_placement'] = Jobplacement.where(:user_id => @users.collect(&:user_id)).all 
```

它们没有*加入*，但它们在一个变量中。您可以随时访问它们，并随心所欲地使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:50:45.807

像这样的东西：

```
conditions = { :user_id => @users }  # assuming primary_key is set correctly
                                     # in the User model
@post = Forum.where( conditions ).all   +
        Poll.where( conditions ).all    +
        Article.where( conditions ).all +
        Jobplacement.where( conditions ).all 
```

或者，如果你想变得花哨：

```
models = [ Forum, Poll, Article, Jobplacement ]

@post  = models.reduce [] do |records, model|
  records.push *model.where( :user_id => @users ).all
end 
```

**注意：** `.all`在这两种情况下都可能是不必要的，因为它通常在必要时由 Rails 自动调用，但我不确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-26T03:52:08.737

我认为您需要类似视图模型的概念。创建一个不继承的简单模型类`ActiveRecord::Base`，并将所有对象作为属性添加到新类中并对其进行初始化。

```
class Post 
   attr_accessor :forum, :poll, :article, :jobpost
   def initialize(forum,poll,article,jobpost)
      @forum = forum
      @poll = poll
      @article = article
      @jobpost = jobpost
   end
end 
```

在控制器动作中添加以下内容；

```
@post = Post.new(@forum,@poll,@article,@jobpost) 
```

# c# - 如何通过身份验证从共享文件夹中打开图像？

> ID：10613149
> 
> 赞同：0
> 
> 时间：2012-05-16T06:31:01.323
> 
> 标签：c#, image, .net-4.0, file-sharing

我试图使用该`Image.FromFile`方法从具有身份验证的文件夹中打开图像，但访问图像时发生错误。

> **NotSupportedException 未被用户代码处理。**不支持给定路径的格式。

我使用的文件名是这样的：

```
\\10.10.1.123\shared\picture.jpg passwrd /USER:compname\userwithaccess 
```

域名`passwrd`中用户的密码在哪里。`userwithaccess``compname`

当我将它粘贴到运行中时，该路径正在工作，它会打开图像，但为什么它`Image.FromFile`在我的应用程序中不起作用？

* * *

^(我的代码在 C# 中，框架在 .NET 4.0 中。项目是一个 WCF 服务，托管在 IIS 中，基于 Visual Studio 2010 Pro 构建。)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:30:53.470

看看 WindowsIdentity.Impersonate 方法。

[@msdn](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)

# servicestack - ServiceStack 方法的自定义属性

> ID：10613153
> 
> 赞同：3
> 
> 时间：2012-05-16T06:31:09.493
> 
> 标签：servicestack

我正在尝试为 ServiceStack 服务创建一个自定义属性，我可以使用它来控制服务类中的每个方法。

这是我正在实现的属性类。

```
[AttributeUsage(AttributeTargets.Method|AttributeTargets.Class , Inherited = false, AllowMultiple = false)]
public class MyRequestFilterAttribute:RequestFilterAttribute
{

    public string Provider { get; set; }

    public MyRequestFilterAttribute(ApplyTo applyTo): base(applyTo)
    {
        this.Priority = (int) RequestFilterPriority.Authenticate;
    }

    public MyRequestFilterAttribute():this(ApplyTo.All)
    {

    }

    public MyRequestFilterAttribute(ApplyTo applyTo, string provider): this(applyTo)
    {
        this.Provider = provider;
    }

    public MyRequestFilterAttribute(string provider): this(ApplyTo.All)
    {
        this.Provider = provider;
    }

    public override void Execute(IHttpRequest req, IHttpResponse res, object requestDto)
    {}
} 
```

这是服务类

```
[MyRequestFilter(ApplyTo.All)]
public class TodoService : RestServiceBase<Todo>
{
    public TodoRepository Repository { get; set; }                  
    public override object OnGet(Todo request)
    {
        if (request.Id == default(long))
            return Repository.GetAll();

        return Repository.GetById(request.Id);
    }
    public override object OnPost(Todo todo)
    {
        return Repository.Store(todo);
    }
    public override object OnPut(Todo todo)
    {
        return Repository.Store(todo);
    }
         [MyRequestFilter("Admin")]
    public override object OnDelete(Todo request)
    {
        Repository.DeleteById(request.Id);
        return null;
    }
    public object GetDetailsofALL()
    {
        return null;
    }
} 
```

当我将属性放在类级别时，我能够控制方法。IE

```
[MyRequestFilter(ApplyTo.All)]
public class TodoService : RestServiceBase<Todo>{} 
```

我需要的是在方法级别上也放置一个属性并进行一些身份验证，以便只有管理员有权执行此服务方法。但是，当我将此属性放在 Delete 方法中时，它不起作用，并且自定义过滤器属性没有被击中。只有类级别的属性调用有效。

```
[MyRequestFilter("Admin")]
public override object OnDelete(Todo request){} 
```

是否可以从方法级别设置权限/过滤器属性？如果是，我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:47:53.767

不，不可能将它添加到方法中。您可以将它添加到服务类或请求 DTO 中，并使用**ApplyTo**方法过滤器告诉 servicestack 它应该应用于哪些方法，例如：

```
[MyRequestFilter(ApplyTo.All)]
[MyRequestFilter(ApplyTo.Delete, "Admin")]
public class TodoService : RestServiceBase<Todo> { ... } 
```

您还可以参考[[RequiredRole]](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/RequiredRoleAttribute.cs)和[[RequestPermission]](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/RequiredPermissionAttribute.cs)属性的实现，以获取支持此功能的[请求过滤器属性](https://docs.servicestack.net/filter-attributes)的示例。

# jquery - 如何使用 jquery 选择器搜索列表

> ID：10613157
> 
> 赞同：1
> 
> 时间：2012-05-16T06:31:21.407
> 
> 标签：jquery, jquery-selectors, coffeescript

我正在尝试使用 jQuery 实现搜索。

我将允许用户输入搜索字符串，例如“zzz”，并且我想遍历“ul 列表”以仅选择值包含搜索字符串的“li”。

例如，如果 zzz 是搜索字符串，我只想选择值为 'zzzzaaa' 的第二个 'li'

```
<ul class="inputs-list"><li>
   <label class="user">
      <input type="checkbox" value="abcd" name="optionsCheckboxes">
      <img style="height: 30px;" src="http://boom.dailymus.es/v1/users/profile/502245329/square">
      <span>abcdefg</span>
   </label>
</li>

<li>
  <label class="user">
    <input type="checkbox" value="zzzzaaaa" name="optionsCheckboxes">
    <img style="height: 30px;" src="http://boom.dailymus.es/v1/users/profile/547205429/square">
    <span>zzzzz</span>
  </label>
</li> 
```

我尝试使用以下代码但无济于事

```
$.each @inputs_list.find('li'), (index, user) ->
  if user.find('input')[value *='#{searchString}']
     console.log('selected', user) 
```

如何修改我的代码以使搜索工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T06:59:16.903

以下取所有“.inputs-list”的后代复选框，使用[`.filter()`方法](http://api.jquery.com/filter/)将集合缩减为在其 value 属性中包含搜索字符串的那些，然后使用该[`.closest()`方法](http://api.jquery.com/closest/)获取匹配输入所属的 li 元素到：

```
var searchString = "zzz"; // obviously you'd get this from the user somehow

searchString = searchString.toLowerCase();
var matchingLIs = $("ul.inputs-list :checkbox").filter(function(){
                    return this.value.toLowerCase().indexOf(searchString) != -1;
                  }).closest("li"); 
```

您没有明确说明您实际上想要对匹配的 li 元素做什么，但是说您想隐藏所有不匹配的元素，您可以这样做：

```
$("ul.inputs-list > li").hide();
$("ul.inputs-list :checkbox").filter(function(i){
    return this.value.toLowerCase().indexOf(searchString) != -1;
}).closest("li").show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T06:36:45.880

我会看看`:contains`jQuery

```
$("div:contains('John')").css("text-decoration", "underline"); 
```

[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

```
$('.inputs-list').find("li:contains('" + searchString + "')").css("text-decoration", "underline"); 
```

我会尝试这样的事情......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T07:02:11.217

### 使用 jQuery 隐藏/显示

最初，我会做这样的事情：

```
// Real-time filtering, when the key is released
$("#terms").on("keyup", function(e){

  // Hide all list items, get those that match, show them
  $(".inputs-list li").hide().filter(function(){
    return $(this).text().match( new RegExp( e.target.value ) );
  }).show();

}); 
```

根据您列表的大小，我怀疑可能会出现没有元素可见的闪光。我目前正在研究一种更好的方法。

演示：http: [//jsbin.com/uzotiy/edit#javascript,html](http://jsbin.com/uzotiy/edit#javascript,html)

### 使用 CSS 隐藏/显示

使用 CSS 操作元素将比 jQuery 更快、更高效。因此，此方法仅添加和删除“突出显示”类。类规则应负责突出显示或设置`display`匹配元素：

```
$("#terms").on("keyup", function(e){
  $(".inputs-list li")
    .removeClass("highlight")
    .filter(":contains(" + e.target.value + ")")
      .addClass("highlight");
}); 
```

演示：http: [//jsbin.com/uzotiy/2/edit#source](http://jsbin.com/uzotiy/2/edit#source)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T07:20:48.293

试试这个

这里的类搜索是搜索文本框。

```
 $(document).ready(function()
        {
            $(".search").keyup(function()
            {
                var key=this.value;

                if(key.length>2)
                {
                    $(".user").each(function()
                    {
                        $this=$(this).find("input:first");
                        var val=$this.val();
                        var res = val.indexOf(key);

                        if(res!=-1)
                        {

                            $this.attr("checked","checked");
                        } 
                        else
                        {            
                            $this.removeAttr("checked");
                        }

                    });
                }
            });
        }); 
```

# c# - 数据库中的 DOB，一年后我想增加年龄并更新到数据库中

> ID：10613158
> 
> 赞同：-5
> 
> 时间：2012-05-16T06:31:22.243
> 
> 标签：c#, winforms, sql-server-2008

我将出生日期存储在数据库中，一年后我想增加年龄并更新到数据库中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T06:36:53.123

存储出生日期。使年龄成为计算列：

```
CREATE TABLE [Table](
    /* Columns */
    [DateOfBirth] [date] NULL,
    [Age]  AS CASE
    WHEN DATEADD(year,-DATEDIFF(year,DateOfBirth,CURRENT_TIMESTAMP),CURRENT_TIMESTAMP) < DateOfBirth THEN
        DATEDIFF(year,DateOfBirth,CURRENT_TIMESTAMP) - 1
    ELSE
        DATEDIFF(year,DateOfBirth,CURRENT_TIMESTAMP)
    END,
    /* Constraints, etc */
) 
```

这样您就不必自己做任何工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:39:07.373

您可以将年龄实现为计算值。这样在查询时年龄总是正确的（http://www.mssqltips.com/sqlservertip/1682/using-computed-columns-in-sql-server-with-persisted-values/）

# email - Facebook 身份验证 - 添加访问电子邮件地址的权限

> ID：10613163
> 
> 赞同：1
> 
> 时间：2012-05-16T06:31:45.153
> 
> 标签：email, authentication, permissions, facebook-javascript-sdk

这可能是一个基本问题。而且我的英语也很差...

我有一个需要 Facebook 登录的网络服务。使用 JavaScript SDK，我可以获取用户的基本信息，例如用户 ID、姓名、性别。现在大约有10000个用户。

这一次，我需要访问用户的电子邮件地址。我知道我可以通过添加范围属性从新用户那里获取电子邮件地址。但是，对于现有用户，虽然我可以访问电子邮件地址，但我不知道如何显示授权对话框以获取访问电子邮件地址的权限。

任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:59:25.740

下面是我使用过的代码片段。基本上使用 /me/permissions 检查他们的权限并显示重新验证链接

```
<script>
    var FB_config = {
        API_ID: 123123123123,
        PERMISSIONS: "publish_stream,email",
    };

    jQuery(document).ready(function(){
        // initialise FB
        window.fbAsyncInit = function() {
            FB.init({
                appId      : FB_config.API_ID,
                status     : true, 
                cookie     : true,
                xfbml      : true,
                oauth      : true
            });
            FB.Event.subscribe('auth.statusChange', FBverifyLogin);
        };
    });

    function FBverifyLogin(response) {
        if (response.status === 'connected') {
            checkPermissions(); // check permissions if the user is logged in
        }
    }

    function checkPermissions(){
        jQuery("#FBreauth").hide();
        FB.api('/me/permissions', function(response) {
            var permissions = FB_config.PERMISSIONS.split(",");
            for(var i = 0; i < permissions.length; i++)
            {
                if(response.data[0][permissions[i]] == undefined || response.data[0][permissions[i]] != 1)
                {
                    // user does not have full permissions, show reauth link
                    jQuery("#FBreauth").show();
                    break;
                }
            }
        });
    }
    function FBreauth(){
        FB.ui(
            {
                method: 'oauth',
                display: 'popup',
                app_id: FB_config.API_ID,
                client_id: FB_config.API_ID,
                redirect_uri: "http://www.facebook.com/connect/login_success.html",
                scope: FB_config.PERMISSIONS
            }
        );
    }
</script>
<a href="#" onclick="FBreauth(); return false;" id="FBreauth">App permissions have changes. Please reauthorize this app</a> 
```

# objective-c - Mapoverlay中的文本框/自定义视图中的文本框以显示在地图上

> ID：10613165
> 
> 赞同：1
> 
> 时间：2012-05-16T06:31:51.017
> 
> 标签：objective-c, ios, ios5, ios4

我是 IOS 应用程序开发的新手。我有一个地图视图，当用户点击 MKMapView 时，我想在那里弹出一个文本框，以便用户可以标记该地点。我想出了如何处理地图上的点击事件的部分。但我真的不明白如何在地图上显示文本框。我想我应该使用叠加层，但我不确定如何将文本框放在叠加层中。有人可以给我示例代码以将文本框放在叠加层中吗？

这是我处理点击事件的代码，这个覆盖显示可能必须进入 if 循环。

```
-(void)handleTapOnMap:(UITapGestureRecognizer*)sender 
{
    if (sender.state == UIGestureRecognizerStateRecognized)
    {
        NSLog(@"Tapped on the map");
        return;
    }
    else {

        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:41:51.967

如果您想添加自定义叠加层，您可以在 github[上的叠加层上看到这个项目](https://github.com/mtigas/iOS-MapLayerDemo)

或者，如果您想自己添加叠加层，则必须创建自定义视图并使用委托方法：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id )overlay
    {
    yourOverLayView *view = [[[yourOverLayView alloc] initWithOverlay:overlay] autorelease];

    return view;
    } 
```

您还可以阅读[mkmapview 教程](http://shawnsbits.com/blog/2011/04/04/adding-polygon-map-overlays/)：

# matlab - 将一个正定方阵划分为两个相同的矩阵

> ID：10613172
> 
> 赞同：1
> 
> 时间：2012-05-16T06:32:15.887
> 
> 标签：matlab, matrix, decomposition

只是我想将一个`n*n`正定矩阵划分为一个相同的`n*r`矩阵 B，其中 r 是任意的，换句话说：

```
B*B^T=A
(n*r)*(n*r)^T=(n*n) 
```

编辑：我认为这是我的错，无法描述我的问题。让`B`是一个维度为 的矩阵`(n*r)`。`A=f(B^T*B)`将其赋予A 为的函数`(n*n)`。我知道这个函数将保持矩阵的秩，换句话说`rank(A)=rank(B'*B)`。现在我想提取新的`B`. 所以新`B`的`(n*r)`又来了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:02:05.200

假设您有以下示例：

```
n = 4;
rng(0)
A = rand(n,n);
B = A * A'; 
```

如果矩阵`B`是满秩的，则不能使用更少的维度完全覆盖原始矩阵。所以，你只能*近似*它。这里的关键思想是最小化重建误差。

您可以`B`使用[特征值分解](http://en.wikipedia.org/wiki/Eigendecomposition_of_a_matrix)将其分解为特征向量。您可以[`eig`](http://www.mathworks.com/help/techdoc/ref/eig.html)在 MATLAB 中使用，但之后需要对特征值和相应的特征向量进行排序。相反，我更喜欢[奇异值分解](http://en.wikipedia.org/wiki/Singular_value_decomposition)并[`svd`](http://www.mathworks.com/help/techdoc/ref/svd.html)在 MATLAB 中使用。请注意，SVD 给出了低秩矩阵逼近中重构误差的最优解。

```
[U,S,~] = svd(B);
U = U * sqrt(S); 
```

我们现在知道了`B = U * U'`。[请参阅此处](http://linneus20.ethz.ch:8080/2_2_1.html)的 SVD 和特征值分解之间的关系。

正如我所说，我们需要近似它。我选择覆盖总方差 99% 的维度如下：

```
coverage =  cumsum(diag(S.^2));
coverage = coverage ./ norm(S,'fro')^2;
[~, nEig] = max(coverage > 0.99);
U2 = U(:,1:nEig); 
```

在这种情况下，U2 有 2 列而不是 4 列。如果数据是相关的，那么收益会更少。结果如下：

```
B
B1 = U*U'
B2 = U2*U2'

B =

    2.8966    2.1881    1.1965    2.1551
    2.1881    1.9966    0.6827    1.8861
    1.1965    0.6827    0.7590    0.5348
    2.1551    1.8861    0.5348    2.0955

B1 =

    2.8966    2.1881    1.1965    2.1551
    2.1881    1.9966    0.6827    1.8861
    1.1965    0.6827    0.7590    0.5348
    2.1551    1.8861    0.5348    2.0955

B2 =

    2.8896    2.2134    1.1966    2.1385
    2.2134    1.9018    0.6836    1.9495
    1.1966    0.6836    0.7586    0.5339
    2.1385    1.9495    0.5339    2.0528 
```

这似乎是一个很好的近似值。

# java - 覆盖java字符串方法

> ID：10613175
> 
> 赞同：0
> 
> 时间：2012-05-16T06:32:45.727
> 
> 标签：java, string, overriding

我们可以通过扩展String类来覆盖我们类中String类的所有方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T06:33:18.717

[`String`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)是类你[`final`](http://docs.oracle.com/javase/tutorial/java/IandI/final.html)不能`extend`

您可能也有兴趣知道它为什么是[`final`](http://docs.oracle.com/javase/tutorial/java/IandI/final.html)以及为什么不能扩展它，核心原因是它的不变性

* * *

**看**

*   [为什么是字符串最终在 Java 中](https://stackoverflow.com/questions/2068804/why-is-string-final-in-java)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T06:33:52.060

[`String`没有`final`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)，因此不能延长。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T06:35:47.693

你不能这样做，因为 String 类是 Final。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T06:47:25.560

我不明白您为什么要覆盖 String 方法。

你不能这样做`String class is final`。

但是您可以使用如下组合为 String 方法添加额外的功能

```
public class Example{
private String str;
public Example(String str){
    this.str=str;
}
public int length(){
    return str.length()+1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T06:39:46.050

您不能覆盖`final`类，其中`String`之一。

但是，您可以使用 String 辅助函数创建自己的类。

例如，

```
public class StringHelper
{
    public static String DoSomethingHelpfulToAString(String stringToDoStuffTo)
    {
        return "This string is now helpful";
    }
} 
```

然后，只需在您的字符串上使用辅助函数：

```
string stringToModify = "blah";
string modifiedString = StringHelper.DoSomethingHelpfulToAString(stringToModify); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T07:05:23.217

`String`是一个`final`类，因此你不能有另一个类`extend`。

# spring-mvc - 弹簧产生错误的前进路径

> ID：10613182
> 
> 赞同：0
> 
> 时间：2012-05-16T06:33:17.267
> 
> 标签：spring-mvc

我已经像这样将视图解析器添加到我的 spring-servlet.xml

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
     <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"></property>
    <property name="suffix" value="/WEB-INF/jsp/"></property>
    <property name="prefix" value=".jsp"></property>
    </bean> 
```

但是当我运行我的 Web 应用程序时，它会返回错误的路径，如日志中所示

```
Forwarding to resource [.jsphello/WEB-INF/jsp/] in InternalResourceView 'hello' 
```

而它应该是`WEB-INF/jsp/hello.jsp`

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:44:36.000

在配置中切换前缀和后缀：

```
<property name="prefix" value="/WEB-INF/jsp/"></property>
<property name="suffix" value=".jsp"></property> 
```

然后它会导致：

```
/WEB-INF/jsp/hello.jsp 
```

[前缀](http://en.wikipedia.org/wiki/Prefix)总是在前面，而[后缀](http://en.wikipedia.org/wiki/Suffix)在后面。

# c# - C#中的优先级队列实现

> ID：10613186
> 
> 赞同：3
> 
> 时间：2012-05-16T06:33:48.287
> 
> 标签：c#, .net, data-structures

我正在尝试使用 SortedDictionary 实现优先队列机制，我想就我当前的实现获得建议。

我的实现如下：

```
public class PriorityQueue
{
    private Object lockObj;
    private SortedDictionary<PQMsgPriority, Queue<PQMessage>> messageDictionary; 

    public PriorityQueue()
    {
        lockObj = new object();
        messageDictionary = new SortedDictionary<PQMsgPriority, Queue<PQMessage>>();
    }

    public void Enqueue(PQMessage item)
    {
        lock (lockObj)
        {
            if(item != null && item.MsgPriority == PQMsgPriority.None)
            {
                if (messageDictionary.ContainsKey(item.MsgPriority))
                {
                    Queue<PQMessage> dataList = messageDictionary[item.MsgPriority];
                    dataList.Enqueue(item);
                    messageDictionary[item.MsgPriority] = dataList;
                }
                else
                {
                    Queue<PQMessage> dataList = new Queue<PQMessage>();
                    dataList.Enqueue(item);
                    messageDictionary.Add(item.MsgPriority, dataList);
                }
            }
        }
    }

    public PQMessage Dequeue()
    {
        lock (lockObj)
        {
            PQMessage messageData = null;
            PQMsgPriority deleteKey = PQMsgPriority.None;

            //If no data available, throw an exception
            if (messageDictionary.Count == 0)
                throw new InvalidOperationException();

            foreach (KeyValuePair<PQMsgPriority, Queue<PQMessage>> item in messageDictionary)
            {
                Queue<PQMessage> dataList = item.Value;
                messageData = dataList.Dequeue();
                messageDictionary[item.Key] = dataList;

                //If there is no more elements remaining in the list, set a flag (deleteKey) for deleting the key
                if (dataList.Count == 0) 
                    deleteKey = item.Key;

                break;
            }

            //If the deleteKey flag is set, delete the key from the dictionary
            if (deleteKey != PQMsgPriority.None)
                messageDictionary.Remove(deleteKey);

            return messageData;
        }
    }

    public int Count()
    {
        lock (lockObj)
        {
            return messageDictionary.Count;
        }
    }

    public PQMessage Peek()
    {
        lock (lockObj)
        {
            PQMessage messageData = null;

            //If no data available, throw an exception
            if (messageDictionary.Count == 0)
                throw new InvalidOperationException();

            foreach (KeyValuePair<PQMsgPriority, Queue<PQMessage>> item in messageDictionary)
            {
                Queue<PQMessage> dataList = item.Value;
                messageData = dataList.Peek();
                break;
            }

            return messageData;
        }
    }
}

public enum PQMsgPriority
{
    High = 0,
    Medium = 1,
    Low = 2,
    None = 3
}

public class PQMessage
{
    private PQMsgPriority msgPriority;
    private Object message;

    #region Properties
    public PQMsgPriority MsgPriority
    {
        get { return msgPriority; }
        set { msgPriority = value; }
    }
    public Object Message
    {
        get { return message; }
        set { message = value; }
    }
    #endregion

    public PQMessage(PQMsgPriority msgPriority, Object message)
    {
        this.msgPriority = msgPriority;
        this.message = message;
    }
} 
```

如果有任何其他方法可以实现优先级队列，请指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T06:37:33.850

（我应该否认这一点，因为我假设您这样做是为了学习而不是防弹实现。如果想要一些可以正常工作的东西，那么您最好重用现有的实现）。

只是一些一般性的评论。在下面的示例中，第三行是不必要的。

```
Queue<PQMessage> dataList = messageDictionary[item.MsgPriority];
dataList.Enqueue(item);
messageDictionary[item.MsgPriority] = dataList; 
```

`dataList`您从 中返回的是`messageDictionary`地图中引用的副本。这意味着当您`Enqueue`获取数据时，它与以前一样在同一个底层队列上工作（不是队列的副本），因此无需再次将其放回原处，您只需删除该行即可。

在您的出队实现中，您有一个循环，您每次都在第一个元素上中断（例如，您只能绕过循环一次）。也许您可以调查使用 LINQ 将`First`元素取出并立即返回？（类似的`Peek`实现`）。

最后，给它`PQMessage`本身具有优先级，也许您可​​以考虑将 a`SortedList`用于您的实现？（见[这里](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:51:15.153

如果您需要提高并发性能，您可以只锁定一个队列进行写入。（整个 SortedDictionary 的读取锁仍然需要）。

并且不要忘记按正确的顺序设置和释放锁

# android - 用于启动屏幕的 Android 过渡图像 (TransitionDrawable)

> ID：10613190
> 
> 赞同：0
> 
> 时间：2012-05-16T06:33:54.180
> 
> 标签：android, transitions, transitiondrawable

我对 Android 有点陌生，但对 VB.net 很流利。我有两个关于启动画面的问题：

1.  我正在尝试创建一个在应用程序启动时启动的启动画面。我可以使用 Frame-Animations 来做到这一点，但我想使用 TransitionDrawable 类，因为它具有我想使用的效果（淡入淡出）。在更改定义后，我对 Frame-Animation 使用了相同的代码，但无法使其正常工作。我究竟做错了什么？

2.  我正在加载的这个标志包含 16 个图像。如何使用 TransitionDrawable 类从 logo1 到 logo2 到 logo3... 到 logo16？我尝试使用循环和“imageIds”数组来创建我自己的帧动画，但它不能用于过渡。帮助将不胜感激。

这是我的代码：

```
public class SplashScreenActivity extends Activity {

    TransitionDrawable animation;
    ImageView transImage;

    Integer[] imageIds = { R.drawable.logo1, R.drawable.logo2,
            R.drawable.logo3, R.drawable.logo4, R.drawable.logo5,
            R.drawable.logo6, R.drawable.logo7, R.drawable.logo8,
            R.drawable.logo9, R.drawable.logo10, R.drawable.logo11,
            R.drawable.logo12, R.drawable.logo13, R.drawable.logo14,
            R.drawable.logo15, R.drawable.logo16 };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        transImage = (ImageView) findViewById(R.id.splashImageView);
        animation = (TransitionDrawable) getResources().getDrawable(R.anim.transition_list);    
        transImage.setBackgroundDrawable(animation);        

        transImage.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    finish();
                    startActivity(new Intent("com.V1.V1LogoSplash.V1LogoMainActivity"));
                }
                return false;
            }; // END ONTOUCH
        }); // END ONLISTSENER
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        // TODO Auto-generated method stub
        super.onWindowFocusChanged(hasFocus);
        animation.startTransition(3000);
                  finish();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:39:24.523

你试试这个类型代码

```
public class SplashActivity extends Activity {

    Thread mSplashThread;

    private int SPLASH_DISPLAY_LENGTH = 3800;

    ImageView image;
    AnimationDrawable frameAnimation;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

//      this.requestWindowFeature(Window.FEATURE_NO_TITLE);
//      this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
//              WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.splashactivity);

        image = (ImageView) findViewById(R.id.splashImg);

        image.setBackgroundResource(R.drawable.splash_animation);

        frameAnimation = (AnimationDrawable) image.getBackground();

        Thread splashTread = new Thread() {
            public void run() {
                try {
                    sleep(SPLASH_DISPLAY_LENGTH);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } finally {
                    Intent intent;
                    intent = new Intent(SplashActivity.this,
                            ProductListActivity.class);
                    startActivity(intent);
                    finish();
                }
            }
        };
        splashTread.start();
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        frameAnimation.start();

    }

} 
```

和另一个可在 xml 中绘制的（你的 img 放在 xml 中）

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="true" >

    <item
        android:drawable="@drawable/survey11"
        android:duration="500"/>

    <item
        android:drawable="@drawable/survey6"
        android:duration="300"/>
    <item
        android:drawable="@drawable/survey5"
        android:duration="300"/>

    <item
        android:drawable="@drawable/survey3"
        android:duration="300"/>
    <item
        android:drawable="@drawable/survey2"
        android:duration="300"/>
    <item
        android:drawable="@drawable/survey1"
        android:duration="800"/>

</animation-list> 
```

# python - 如何处理 Python BaseHTTPServer 被杀死，但端口仍然被占用？

> ID：10613194
> 
> 赞同：0
> 
> 时间：2012-05-16T06:34:11.593
> 
> 标签：python, sockets, shell

我使用python BaseHTTPServer，它可以处理do_GET，do_POST方法，在do_POST方法中，我使用os.system执行linux shell，当我杀死python脚本时，但监听端口仍然被占用，所以我不能再次运行脚本， netstat -antp|grep 80 显示 bash/tail 占用了端口 80

```
import sys
import os
import traceback
import time
import logging.handlers
import logging
from threading import *
from datetime import datetime
import urllib2
reload(sys)
sys.setdefaultencoding('utf-8')

class WebRequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):
    server_version = 'python httpserver'
    sys_version = 'b'
    backup_dir = None
    def do_HEAD(s):
        s.send_response(200)
        s.send_header("Content-type", "text/html")
        s.end_headers()
    def do_GET(self):
        if self.path == '/foo':
            self.send_response(200)               
            os.system('nohup tail -f a.log &')

        else:
            self.send_error(404)
if __name__ == "__main__":
    try:
        server = BaseHTTPServer.HTTPServer(('',80), WebRequestHandler)    
        server.serve_forever()
    except KeyboardInterrupt:
        server.socket.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:57:04.780

文件描述符默认由子进程继承，因此监听端口 80 的套接字由您使用 system() 调用启动的命令继承。

为避免这种情况，您应该在侦听套接字上设置 FD_CLOEXEC 标志。这可以通过添加（和使用）特定的 HTTPServer 类来完成。

```
class WebServer(BaseHTTPServer.HTTPServer):
    def __init__(self, *args, **kwargs):
        BaseHTTPServer.HTTPServer.__init__(self, *args, **kwargs)
        # Set FD_CLOEXEC flag
        flags = fcntl.fcntl(self.socket.fileno(), fcntl.F_GETFD)
        flags |= fcntl.FD_CLOEXEC
        fcntl.fcntl(self.socket.fileno(), fcntl.F_SETFD, flags) 
```

有关的 ：

*   [从 C 中的系统命令启动的进程继承父 fd](https://stackoverflow.com/questions/6945865/process-started-from-system-command-in-c-inherits-parent-fds)

# c# - 如何删除 XtraTreeList 中节点图标和节点文本之间的空格

> ID：10613197
> 
> 赞同：1
> 
> 时间：2012-05-16T06:34:27.220
> 
> 标签：c#, winforms, devexpress, treelist

我有一个带有树列表的 WinForm 应用程序。列表中的节点具有图像索引和绑定到图像列表的 TreeList。问题是我找不到删除图标和文本之间空格的方法。

![在此处输入图像描述](../Images/41fa40151ff73ab3635cdb044d50abe0.png)

如果有人可以帮助我，我将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:10:48.473

看起来您选择了一个空图像。

树列表支持 a`StateImageList`和 a `SelectImageList`。确保您只使用您需要的那个。（尝试将 StateImageList 属性设置回“（无）”）

![图片](../Images/8a50935a2a738fe84fbd71c146f88daf.png)

# python - Django 模型实例未保存但未抛出错误

> ID：10613198
> 
> 赞同：1
> 
> 时间：2012-05-16T06:34:31.747
> 
> 标签：python, django, apache, django-models, django-views

我有这个非常简单的观点：

```
from models import Item, Tag, Category, User
from django.views.decorators.csrf import csrf_exempt
from django.http import HttpResponse

def save_item(request):
    try:
            print request.GET
        i = Item()
        i.user = User.objects.get_or_create(email=request.GET['user_email'][0])
        i.save()

        print i
    except Exception as e:
        print e.message()

    return HttpResponse() 
```

使用这些非常简单的模型：

```
class User(models.Model):
    email = models.EmailField()

class Item(models.Model):
    category = models.ForeignKey(Category, null=True, blank=True)
    tags = models.ManyToManyField(Tag, null=True, blank=True)
    address = models.CharField(max_length = 512, null=True, blank=True)
    user = models.ForeignKey(User)
    data = models.CharField(max_length = 1024, null=True, blank=True) 
```

打印是我的 error.log 中唯一显示的内容：

```
[Wed May 16 01:23:40 2012] [error] <QueryDict: {u'website': [u''], u'comment': [u''], u'rating': [u''], u'phone number': [u''], u'address': [u''], u'user_email': [u'cc.emeraldeyes@gmail.com']}> 
```

但未创建 Item 模型实例！

我可以在管理员或 shell 中手动创建一个：

```
ubuntu@ip-10-196-47-228:~/WeShouldServer$ ./manage.py shell
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from RemoteStorage.models import Item
>>> i = Item()
>>> from RemoteStorage.models import User
>>> i.user = User.objects.get(pk=1)
>>> i.save()
# THIS WORKS 
```

但试图在视图中保存一个...失败了。默默。为什么？？！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T06:38:14.163

[`get_or_create`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)返回元组

```
 user, created = User.objects.get_or_create(email=request.GET['user_email'][0]) 
```

# c# - 计算完数组后，显示无法隐式转换类型 'decimal' ，即使我使用了十进制数据

> ID：10613202
> 
> 赞同：0
> 
> 时间：2012-05-16T06:35:12.620
> 
> 标签：c#, asp.net-mvc-3, object, return

[我无法创建包含对象内部属性数组的对象](https://stackoverflow.com/questions/10612677/i-cannot-create-object-that-contains-arrays-of-property-inside-object)

在我解决了上面链接中的最后一个问题后，我遇到了一个新问题，我尝试搜索一个已发布的问题，但我仍然对它印象深刻。

在最后一行我想用来`Result(object)`查看，我不知道如何通过它。

问题出在最后一行（返回），它说

> 无法隐式转换类型“十进制”

谢谢你们 ：）

```
namespace finance3.Models
{
public class Expected_and_Risk
{

    public void Initialize(int size)
    {
        Prop = new decimal[size];
        AxB = new decimal[size];
        Forecast = new decimal[size];
        PowAxB = new decimal[size];
        Name = new string[size];
    }

    public decimal[] Prop { get; set; }
    public decimal[] Forecast { get; set; }
    public string[] Name { get; set; }
    public decimal[] AxB { get; set; }
    public decimal[] PowAxB { get; set; }

    public decimal  ExpectValue(Expected_and_Risk abc)
    {

        int count = abc.Forecast.Count();

        Expected_and_Risk Result = new Expected_and_Risk();
        Result.Initialize(count); 

        for (int i = 0 ; i < count ; i++)
        {

            Result.Name[i] = abc.Name[i];
            Result.Prop[i] = abc.Prop[i];
            Result.Forecast[i] = abc.Forecast[i];
            Result.AxB[i] = abc.Prop[i] * abc.Forecast[i];

            decimal a = Result.AxB[i];
            decimal sumAxB =+ a;

            double temp = (double)(a * a) ;
            Result.PowAxB[i] = (decimal)(temp);

        }
        // here is the problem
        return (Result); 
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T06:43:53.870

您正在尝试返回自定义对象，而不是小数。

改变：

```
public decimal  ExpectValue(Expected_and_Risk abc) 
```

对此：

```
public Expected_and_Risk ExpectValue(Expected_and_Risk abc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:44:46.100

您可以通过更改方法的签名来修复编译错误：

```
public Expected_and_Risk ExpectValue(Expected_and_Risk abc) { //... 
```

但是，我不知道这对您的逻辑是否有意义。

或者，如果有办法将`Expected_and_Risk`对象转换为单个数值，则可以声明转换运算符或实例方法来计算该值，然后将其返回：

```
return (decimal)Result; 
```

或者

```
return Result.DistillToDecimalValue(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:49:10.167

在您阅读此答案的其余部分之前，请考虑以下事项：如果没有适当的转换，不可能将类构造函数作为另一种形式返回。（例如您可能想要创建的 ToDecimal() 方法），因此更改：

```
public decimal ExpectValue(Expected_and_Risk abc) 
```

到：

```
public Expected_and_Risk ExpectValue(Expected_and_Risk abc) 
```

这是我对这个问题的看法：当你放置语句“return (Result);”时，我相信有两个可能的问题。1）您应该像这样格式化 return 语句：

```
return (decimal)Result; 
```

2) 您应该已将对象转换为小数，同时检查结果是否为有效小数（您必须创建转换方法“ToString()”）：

```
decimal retVal = 0;
if (!decimal.TryParse(Result.ToString(), out retVal)) throw new ArgumentException("Invalid Result"); //put whatever you want inplace of the argumentexception
return retVal; 
```

虽然我确信顶部的解决方案会起作用，但如果它不只是尝试上面的其他两个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T06:49:10.903

正如 dbaseman 解释的那样，您返回的是 Expected_and_Rick 类对象，而您的方法返回类型是十进制。关于循环，您将始终只返回一个 Expected_and_Rick 对象，因为您在 for 循环中覆盖了它。我建议您创建一个列表，其中 T 将是 Expected_and_Rick 类。

```
 public List<Expected_and_Risk> ExpectValue(Expected_and_Risk abc)
   {
        int count = abc.Forecast.Count();

        List<Expected_and_Risk> list = new List<Expected_and_Risk>();
        Result.Initialize(count); 

        for (int i = 0 ; i < count ; i++)
        {
            Expected_and_Risk Result = new Expected_and_Risk();
            Result.Name[i] = abc.Name[i];
            Result.Prop[i] = abc.Prop[i];
            Result.Forecast[i] = abc.Forecast[i];
            Result.AxB[i] = abc.Prop[i] * abc.Forecast[i];

            decimal a = Result.AxB[i];
            decimal sumAxB =+ a;

            double temp = (double)(a * a) ;
            Result.PowAxB[i] = (decimal)(temp);
            list.Add(Result);
    }
    return list; 
} 
```

另一方面，您可以拥有：

```
Expected_and_Risk data = ....
List<Expected_and_Risk> list = ExpectValue(data); 
```

# python - 修复范围内的嵌套循环

> ID：10613203
> 
> 赞同：0
> 
> 时间：2012-05-16T06:35:14.760
> 
> 标签：python, variables, loops, range, nested

我在让这个程序运行时遇到问题，现在大约是凌晨 2:00，所以我真的只想结束它。无论如何，我需要创建一个程序，在该程序中计算和显示几周内（由用户输入）的捐款总额和平均值。该程序使用嵌套循环来收集数据并计算平均值。

它的工作方式是：

*   程序询问周数
*   外循环每周迭代一次
*   内循环每周迭代 5 次
*   内部循环的每次迭代都要求用户提供一定数量的捐赠
*   在所有迭代之后，显示捐赠的总和以及每周捐赠的平均值

在创建这个程序时，我遇到了三个主要问题。首先是我的循环嵌套没有按照我想要的方式工作。

```
weeks = input("How many weeks available for collection? ")

for donation_week in range(0, weeks):
    for donation_day in range(0, donation_week*5):
        amount = input("How much money was donated today? ")
        break

week_total = amount * 5
collection_total = week_total * weeks
average = collection_total / weeks

print "In", weeks, "weeks, a sum of", collection_total, "was collected and an average"\
                   " of", average, "was donated each week" 
```

例如，如果用户输入 3 周，我希望程序每周获得 5 次，所以 15 次。但它没有，而是只要求两次。

第二个问题是当用户输入 1 周或 0 周时，会出现错误，指出“NameError: name 'amount' is not defined”

最后一个问题是我在编码中实际上还没有涉及到的问题，如果用户每天输入不同的金额，我将如何计算一周的总数（week_total）。我只将金额声明为一个变量，而实际上一周中有 5 天有 5 个金额变量。

再说一次，我对 python 很陌生，我的指导指南真的没有涉及到这些细节。我一直在尝试重新安排和更改这个程序两个小时左右，但我仍然很困惑。希望这里的人可以分享他们的知识。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T06:37:47.380

首先，该`break`语句导致内部循环提前终止。

其次，您必须计算循环内的运行总数（或至少将值保留在某处）。`amount`目前，您会在每次迭代中不断覆盖。

最后，`week_total`and`collection_total`逻辑看起来很可疑。只需保持每日金额的运行总和，最后除以周数即可获得每周平均值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:52:39.567

一次一个地回答你的问题：

> 例如，如果用户输入 3 周，我希望程序每周获得 5 次，所以 15 次。但它没有，而是只要求两次。

如前所述，那是因为你的休息，只要摆脱它，它就会不止一次这样做。

> 第二个问题是当用户输入 1 周或 0 周时，会出现错误，指出“NameError: name 'amount' is not defined”

好吧，让我们用 1 周来追踪它：

```
for donation_week in range(0,1): #range(0,1) == [0]
    for donation_day in range(0, 0*5): #during the first (and only) loop, donation_day is 0, so do no loops 
```

因此，当它通过循环时，设置的行`amount`永远不会执行，因此未定义数量。尝试在程序顶部将其定义为 0 以避免该问题。

此外，第二个 for 语句没有理由成为`in range(0, donation_week*5)`，如果您希望它每周要求 5 个，那实际上是完全错误的。如果你想要，它应该只是`in range(5)`（如果没有明确设置开始，也假定为 0）所以它每周会执行 5 次循环。你有它的方式，第一周它会问 0 次，第二周会问 5 次，第三周会问 10 次，等等。

> 最后一个问题是我在编码中实际上还没有涉及到的问题，如果用户每天输入不同的金额，我将如何计算一周的总数（week_total）。我只将金额声明为一个变量，而实际上一周中有 5 天有 5 个金额变量。

If you make it so that amount is defined at the top of the program as 0, you can just add the input to amount each time you get it. It won't keep track of how much was donated on each day, but it works perfectly if you just want totals and averages.

So, if you initiate amount at the top of your program and also change the `amount = input` line to `amount += input` to keep track of the running total (Also likely get rid of week_total and collection_total, I don't see it having a use anymore) and fix the logic within your for loop like I mentioned, you should be golden.

# outlook - 如何模糊撰写邮件检查器中的主题字段？

> ID：10613205
> 
> 赞同：2
> 
> 时间：2012-05-16T06:35:38.067
> 
> 标签：outlook, vsto

我有一个 Outlook VSTO 2010 加载项，它提供了一个按钮，用于将自定义查找中的文本插入主题。`CurrentItem`通过抓取检查器（*MailItem*）并附加到主题字符串，这项工作的基础就很好了。

出现问题的地方是，如果用户专注于主题字段，输入一些文本，然后单击自定义按钮以向主题添加更多文本。用户输入的文本尚未保存到底层`MailItem`，因此操作`MailItem.Subject`会忽略用户文本。

我可以通过在操作主题之前保存邮件项目来解决这个问题，确保主题输入字段保存到对象，但这与标准 Outlook 行为不一致，并且可能导致保存大量未发送的草稿到用户邮箱。有哪些选择？任何模糊主题领域的东西都会起作用（*我什至找不到办法*），但可能有更优雅的解决方案？

# ruby-on-rails - 我可以直接在数据库中使用重读音节吗？

> ID：10613207
> 
> 赞同：0
> 
> 时间：2012-05-16T06:35:58.950
> 
> 标签：ruby-on-rails, database, non-ascii-characters

我正在构建一个需要国家、城市列表的 Rails 应用程序。城市应该至少包含 100,000 人。我从[Wikipedia](http://en.wikipedia.org/wiki/List_of_towns_and_cities_with_100,000_or_more_inhabitants/country%3a_A-B)中找到了数据。但我需要澄清一下城市名称中包含一些特殊字母。

```
Durrës - ë
Vicente López - ó
São Paulo - ã 
```

我用谷歌搜索，发现这些是重音音节。

我的问题是

```
Can I directly insert these values into the database?
Can I search the database without any problem? 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:21:56.517

如果您将数据库设置为将值存储为 utf-8，您应该能够毫无问题地存储各种此类值。

当涉及到排序和比较时，重要的是您要求数据库使用哪种排序规则。简而言之，排序规则是一组规则，说明如何比较字符串，例如 é 如何相对于 e 排序，ß 是否等于 ss 等等。

使用全文搜索（solr、sphinx 等）时，您应该确保您的停用词、词干分析器的选择等是 Unicode 感知的

# git - git commit -a 没用

> ID：10613214
> 
> 赞同：2
> 
> 时间：2012-05-16T06:36:44.007
> 
> 标签：git

我是 Git 的新手，我已经遇到了一些问题......我确实克隆了一个存储库（在 BitBucket 上）到我的机器上，并修改了一个文件“Makefile”并创建了 3 个新文件（c_file、gma.txt 和ded_mpi.dat）。然后，我键入将这些添加/更改提交到主存储库：`commit -a`我在文本编辑器中写了一条消息）

我这里有 2 个问题。首先，我认为这会将我的更改提交给主代表，但事实并非如此（我通过克隆主版本进行了检查：我的更改不包括在内）。但是，在我机器上的代表中，`git log`包含我的消息......

我想我错过了 Git 工作方式的一些东西 :) `git diff`什么也没打印。

第二期：

`git status`印刷：

```
# On branch master 
# Your branch is ahead of 'origin/master' by 1 commit. 
# 
# Untracked files: 
# (use "git add <file>..." to include in what will be committed) 
# 
#   c_file  
#   gma.txt 
#   ded_mpi.dat 
nothing added to commit but untracked files present (use "git add" to track) 
```

文件 c_file、gma.txt 和 ded_mpi.dat 已提交但未添加...我认为`commit -a`“提交”和“添加”都做了...？？

另一方面，我修改的预先存在的 Makefile 的状态中没有任何内容......

如您所见，我需要帮助:)

如果有人可以帮助我了解发生了什么，那就太好了！

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T06:44:13.307

1.我想你忘了推送你的提交，比如“git push origin master”

2.“git commit -a”不添加新文件，只提交修改和删除文件，需要使用“git add”。准备提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:25:50.330

首先，请注意状态消息，它告诉您有尚未添​​加的未跟踪文件，可以使用

```
git add . 
```

现在，要修复您的提交，以免推送 2 个提交对象，您可以使用新添加的文件“修改”当前提交对象，如下所示：

```
git commit --amend 
```

现在，如果您这样做`git status`，您将有一个提交对象准备好推送到远程。

我强烈建议你掌握一些基础知识。去看看[Git Immersion](http://gitimmersion.com/)作为一个好的开始。

# c# - DLL 导入使用 SYSTEMTIME

> ID：10613219
> 
> 赞同：3
> 
> 时间：2012-05-16T06:36:55.067
> 
> 标签：c#, visual-c++, dllimport

我有一个使用 C++ 开发的 dll。现在我希望在我的 C# 应用程序中使用这些函数。我知道如何在我的应用程序中使用 dll，但我的问题是 dll 需要一个 SYSTEMTIME 类型的参数。

```
[DllImport("MyControl.dll")]
 public static extern Int32 MyCONTROL_NewControl(SYSTEMTIME stime); 
```

但我无法`SYSTEMTIME`在我的 C# 代码中使用。请就如何使用`SYSTEMTIME`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T06:43:38.853

那应该工作：

```
[StructLayout(LayoutKind.Sequential)]
private struct SYSTEMTIME {
    Int16 wYear;
    Int16 wMonth;
    Int16 wDayOfWeek;
    Int16 wDay;
    Int16 wHour;
    Int16 wMinute;
    Int16 wSecond;
    Int16 wMilliseconds;
} 
```

[另请参阅Christian.K](https://stackoverflow.com/users/21567/christian-k)指出的[pinvoke](http://www.pinvoke.net/default.aspx/Structures/SYSTEMTIME.html)的即用型解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T06:44:25.113

这就是你在 c# 中使用它的方式：

```
 [StructLayout(LayoutKind.Sequential)]
    public struct SYSTEMTIME
    {
        ushort wYear;//ushort = WORD
        ushort wMonth;
        ushort wDayOfWeek;
        ushort wDay;
        ushort wHour;
        ushort wMinute;
        ushort wSecond;
        ushort wMilliseconds;
    } 
```

# javascript - 如何控制window.open方法打开的opener页面

> ID：10613221
> 
> 赞同：2
> 
> 时间：2012-05-16T06:37:02.213
> 
> 标签：javascript, popup, window.open, window.opener

我有一个页面，我在其中通过 window.open 方法调用另一个弹出窗口。唯一如何在弹出页面仍然存在时从弹出页面更改开启页面中的标签，即尚未关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:34:51.610

最好让打开器窗口通过向弹出窗口公开一个小 API 来处理更改值。

我在这里概述了它：[javascript - pass selected value from popup window to parent window input box](https://stackoverflow.com/questions/9994120/javascript-pass-selected-value-from-popup-window-to-parent-window-input-box)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:52:19.900

它应该是这样的：

```
window.opener.document.getElementById('label1').value = "the new value"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T11:36:58.563

```
<script>
function myFunction() {
    var additionalWindow = window.open("/additional");

    // Write on the additional window
    additionalWindow.document.write('written from separate window');

    // Call a function on the additional window
    additionalWindow.someFunction();
}
</script> 
```

[这是 Mozilla 关于`window.open()`.](https://developer.mozilla.org/en-US/docs/Web/API/Window/open)

# java - 通过 TCP 发送大字符串时丢失数据。（客户端服务器）

> ID：10613226
> 
> 赞同：0
> 
> 时间：2012-05-16T06:37:26.180
> 
> 标签：java, vb.net, tcp

我有一个客户端/服务器应用程序，其中服务器在 java 中，客户端在 Vb.net 中。

当我从客户端向服务器发送大字符串时，没有收到完整的文本。请帮忙。

下面附上代码。

客户端--VB.net-

```
 Try
         Dim clientSocket As New System.Net.Sockets.TcpClient()

        ' msg("Client Started")
        clientSocket.Connect(StrIP_Add, intPort)
        clientSocket.SendBufferSize=104857600
        '6511 6522
        ' Label1.Text = "Client Socket Program - Server Connected ..."

        Dim serverStream As NetworkStream = clientSocket.GetStream()
        Dim outStream(104857600) As Byte

        ' MsgBox(strValidator.Trim.Length)

        outStream = System.Text.Encoding.ASCII.GetBytes(strValidator.Trim)
        ' Dim outStream As Byte() = "sdsfd"
        System.Threading.Thread.Sleep(2000)
        serverStream.Write(outStream, 0, outStream.Length)
        System.Threading.Thread.Sleep(2000)
        serverStream.Flush()

        Dim inStream(104857600) As Byte
        serverStream.Read(inStream, 0, outStream.Length) '104857600) ' CInt(clientSocket.ReceiveBufferSize))
        Dim returndata As String = _
        System.Text.Encoding.ASCII.GetString(inStream)
        '  msg("Data from Server : " + returndata)
        clientSocket.Close()

    Catch ex As Exception
        ' VikUcMsg.AddMessage("<b><u>" & Page.Title & "</u></b><br><br>" & "No Connectivity on the port :" & intPort, enmMessageType.Error)

    End Try 
```

* * *

服务器——Java

```
BufferedInputStream RecievedBuffer = new BufferedInputStream(
                TCPIP_Client_SOCKET.getInputStream());
        InputStreamReader RecievedInputStreamReader = new InputStreamReader(
                RecievedBuffer);

        System.out.println(RecievedBuffer.toString().length());
        //char[] RecievedChars = new char[TCPIP_Client_SOCKET
                //.getReceiveBufferSize()];

        char[] RecievedChars = new char[100000];
        //Thread.sleep(5000);
        RecievedInputStreamReader.read(RecievedChars);
        //Thread.sleep(5000);
        String strRecievedData=null;
        //Thread.sleep(5000);
        strRecievedData = new String( RecievedChars ).trim();
        //strRecievedData = RecievedChars.;
        Thread.sleep(5000);
        if (strRecievedData!=null)
        {
            System.out.println(strRecievedData);
                         } 
```

strRecievedData 一直只有 havig 8192。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:46:48.770

简短的回答是从套接字读取时必须循环，因为无法保证每次尝试读取时会收到多少字节。

伪代码：

```
while (!msgCompleted && !overallTimeout)
{
   bytesRead = netstream.Read(readBuffer);

   if (bytesRead > 0)
   {
      // here append readBuffer to msgBuffer from offset to offset+bytesRead 

      offset += bytesRead // update offset so you can keep appending

     // inspect the msgBuffer to see if the message is completed
   }

} 
```

话虽如此，您的代码中还有许多其他问题。例如...

您在这里分配一个 104857601（不是 104857600）字节缓冲区：

`Dim outStream(104857600) As Byte`

然后丢弃并用从 strValidator 重新获得的任何内容替换该缓冲区：

`outStream = System.Text.Encoding.ASCII.GetBytes(strValidator.Trim)`

仅仅为了替换它而预先分配它是没有意义的。

另一个...

您分配一定长度的输入缓冲区：

`Dim inStream(104857600) As Byte`

但随后使用不同缓冲区的长度读入该缓冲区：

`serverStream.Read(inStream, 0, outStream.Length)`

根据长度，这很容易出错。

您还需要循环读取此 VB 读取，就像读取 Java 一样。

# php - 用自定义字符串替换页码

> ID：10613231
> 
> 赞同：0
> 
> 时间：2012-05-16T06:38:13.370
> 
> 标签：php, regex, preg-replace

有一个字符串

```
http://www.ccdcdlmcc.sdc.smdc.,ms.cmcsjh?page=2$#$#L$JK#J$LK#J$ 
```

*我想用不同的字符串“[pageno]”* （包括方括号）替换页码，这样我的最终字符串将是：

```
http://www.ccdcdlmcc.sdc.smdc.,ms.cmcsjh?page=[pageno]$#$#L$JK#J$LK#J$ 
```

我已经用*explode*和str_split($string) 试过了，但是没有运气......可以用正则表达式来完成吗？

我的主要字符串`http://www.xyz.com/s/ref=sr_pg_2?rh=n%3A117332031%2Cn%3A!117333031%2Cn%3A118457031%2Cn%3A118458031&page=2&bbn=118457031&ie=UTF8&qid=1337146507`是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:46:28.313

干得好：

```
$str=preg_replace("/(\\?)(page)(=)(\\d+)/","?page=[pageno]",$yourstring); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:57:17.350

这是另一种方法：

```
<?php

$str = "http://www.ccdcdlmcc.sdc.smdc.,ms.cmcsjh?page=2$#$#L$JK#J$LK#J$";

echo preg_replace('/page=([0-9]+)/', 'page=[pageno]', $str);
?> 
```

我确实假设页码只是一个数值。否则，您必须使用 [0-9a-zA-Z] 以及您希望允许的其他字符来扩展 [0-9]。

# python - 解释 Django 源代码

> ID：10613236
> 
> 赞同：5
> 
> 时间：2012-05-16T06:38:29.403
> 
> 标签：python, django, lambda

我正在查看一些 Django 源代码并遇到了[这个](https://github.com/django/django/blob/master/django/core/files/utils.py)。究竟是做什么的：`encoding = property(lambda self: self.file.encoding)`做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T06:50:55.643

它基本上是一个完整的包装吸气剂的简写。Expanded 看起来像这样，尽管它不是真正的 1-1 扩展。

```
def encoding(self):
    return self.file.encoding 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T15:45:53.787

其他两个答案没有什么问题，但他们可能有点高级。所以这里是 101 版本：

## 拉姆达

虽然它在他们的 C# 文档中，但我认为微软实际上对 lambda 的概念有最好的解释：

> lambda 表达式是一个匿名函数，可以包含表达式和语句

大多数没有官方 CS 学位的人都会使用 lambda，但是当您将其视为简单的“匿名函数”时，我认为它变得更容易理解。Python 中 lambda 的格式为：

```
lambda [argument]: [expression] 
```

where`[argument]`可以是任何东西，单个参数或逗号分隔的参数列表，`[expression]`本质上是方法体。这就是为什么@Jordan 说你提到的代码大致相当于：

```
def encoding(self):
    return self.file.encoding 
```

`self`是传递给方法的参数，方法的返回值 ( `self.file.encoding`) 是表达式。

## 财产

基本上，该`property`方法允许您为类的属性创建“getter”和“setter”。在传统的 OOP 中，“成员”或类的属性通常设置为受保护的或私有的——您实际上永远不会直接访问该属性。相反，您访问的方法反过来检索或操作属性。其中最主要的是getter和setter。正如它们的名字所描述的那样，它们是分别获取和设置属性值的方法。

现在，Python OOP 并没有真正意义上的受保护或私有属性的概念。你可以自由地遵守规则，但没有什么能阻止你在课堂上访问你想要的任何东西。因此，在 Python 中，getter 和 setter 通常与`property`“伪造”属性结合使用，因为没有更好的词。例如：

```
def get_foo(self):
    return self.bar

def set_foo(self, value):
    self.bar = value

foo = property(get_foo, set_foo) 
```

有了它，我现在可以做`instance.foo`（没有括号）和`instance.foo = 'something'`. 它就像`foo`类的常规属性一样工作。

在您提到的代码中，他们只是设置了一个吸气剂，但它的工作原理是一样的。`encoding`将充当类上的属性并返回`file.encoding`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T06:43:02.893

它是一个代理从包含类访问它的**file.encoding**[属性](http://docs.python.org/library/functions.html#property)的属性。

# assembly - 如何让 MSP430 在模式 4 下休眠？

> ID：10613239
> 
> 赞同：2
> 
> 时间：2012-05-16T06:38:47.380
> 
> 标签：assembly, microcontroller, msp430

我有一个 MSP430 分配，我正在组装中，最后部分说明要这样做：

> 然后微控制器在模式 4 下进入睡眠状态。按下 RESET 按钮将开始另一个游戏。

我找不到任何方法让它进入睡眠状态，之后，我也不知道如何让它脱离睡眠状态。这就是我完成任务所缺少的，所以任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:07:19.410

要进入 LPM4，您需要检查特定部件的数据表，并找到 LPM 位所在的位置（在状态寄存器之一中）。使用适当的汇编代码将它们设置为正确的值，就是这样。

假设复位连接到 RESET 引脚，这会将其从睡眠模式中唤醒。无需做任何进一步的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T13:30:44.650

低功耗模式 4：SCG1=1，SCG0=1，OscOff=1，CPUOff=1：

```
BIS #F0h,SR 
```

您可以通过中断从 LPM4 唤醒。如果您的重置按钮连接到具有与之关联的外部中断的引脚，按下它将唤醒您的处理器。

# android - 如何区分android中同名的应用程序？

> ID：10613240
> 
> 赞同：1
> 
> 时间：2012-05-16T06:38:50.403
> 
> 标签：android

在 android 中，我列出了已安装的应用程序列表并存储在我的私人数据库中。在某些应用程序具有相同名称的情况下，例如有 4 个名为 Maps 的应用程序，如果一个应用程序得到更新，则私有数据库中的其他 3 个应用程序记录将得到更新。如何区分这些应用程序？我使用以下代码来获取已安装的应用程序列表。

```
PackageManager pm = this.getPackageManager();
    Intent intent = new Intent(Intent.ACTION_MAIN, null);
    intent.addCategory(Intent.CATEGORY_LAUNCHER);

    List<ResolveInfo> list = pm.queryIntentActivities(intent,
            PackageManager.PERMISSION_GRANTED);
    ArrayList<String> applist = new ArrayList<String>();
    ArrayList<String> packlist = new ArrayList<String>();

    for (ResolveInfo rInfo : list) {
        packlist.add(rInfo.activityInfo.packageName);
        applist.add(rInfo.activityInfo.applicationInfo.loadLabel(pm)
                .toString());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T12:13:50.757

我想补充一点这里没有提到的澄清。

尽管不能有两个应用程序具有相同的包名称，但用户可以在启动器应用程序中看到一个应用程序中的多个启动器活动。是的，正如您所注意到的，标准的“地图”应用程序（“com.google.android.apps.maps”包）有几个启动器活动，如“本地”、“导航”、“地图”。这些“应用程序”（或开发人员术语中的活动）是否在一个应用程序包中实现对用户来说并不重要。

活动名称（“com.google.android.maps.MapsActivity”，您可以通过 检索此字符串`rInfo.activityInfo.name`）本身也不是唯一的，因为任何人都可以创建具有唯一包名称的应用程序和位于 java 包 com.google.android 中的活动.maps 称为 MapsActivity。

因此，如果您想找到所有这些启动器活动的唯一标识符，您应该使用应用程序包名称（“com.google.android.apps.maps”）和活动名称（“com.google.android.maps”）的组合。地图活动”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:46:30.947

您不应该通过名称来区分两个应用程序。有些应用程序甚至没有与之关联的名称（即它们是空的）。区分两个应用程序的唯一可靠方法是通过它们的包名（这也被操作系统大量使用）。

另请注意，虽然包名称始终相同，但如果应用程序完全卸载然后重新安装，应用程序的 UID 可能会发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:45:25.823

使用安装路径作为唯一标识符（它们不会安装在同一个目录中）。

另一方面，如果您有时间，请阅读[这篇文章。](http://blog.javia.org/android-package-name/)包的配置包含 UID。链接来自[这个](https://stackoverflow.com/questions/5951917/unique-id-of-android-app)答案。

# jquery - Rails 应用程序的最佳 jquery 表单向导

> ID：10613244
> 
> 赞同：-1
> 
> 时间：2012-05-16T06:39:10.767
> 
> 标签：jquery, ruby-on-rails

我的rails应用程序需要一个多步骤注册表单向导。我知道那里有很多已建立的jquery解决方案，有人对最好的有意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:46:46.110

[试试railscasts.com 上](http://railscasts.com/)的这个视频教程

*   [http://railscasts.com/episodes/217-multistep-forms](http://railscasts.com/episodes/217-multistep-forms)

还请看：

*   [使用 jQuery（FormToWizard 插件）将任何 web 表单变成一个强大的向导](http://www.jankoatwarpspeed.com/post/2009/09/28/webform-wizard-jquery.aspx)
*   [演示](http://www.jankoatwarpspeed.com/examples/webform_to_wizard/)

# .net - 由于命令行参数无效，连接失败

> ID：10613245
> 
> 赞同：2
> 
> 时间：2012-05-16T06:39:12.787
> 
> 标签：.net, windows-phone-7, exception-handling

您好想开发一个windows phone 应用程序。我的电脑上安装了 vs2010 Ultimate。我下载了 Windows Phone 7 SDK 并开始开发应用程序。但是当我从 VS 运行应用程序时，出现以下错误：

> 由于命令行参数无效，连接失败

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T07:14:53.903

当我下载并安装带有 Service Pack 1 的 Windows 7 N 的媒体格式功能包时，此问题得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:51:55.440

有几个原因阻止与模拟器连接：

1.  然后需要更少的RAM，所以我提高了它。
2.  可能存在安装+卸载的先前工具版本，您必须手动删除该文件夹`%LocalAppData%\Microsoft\Phone Tools`才能使模拟器再次工作。
3.  如果在您创建一个空白应用程序并运行它时发生同样的事情，那么希望它只是一个错误的安装。

重新启动解决方案，然后如果它不起作用，那么与此同时，开发人员似乎找到了解决方法，请参阅*Windows Phone 7 论坛*-[模拟器不会启动；安装问题？](http://social.msdn.microsoft.com/Forums/en-US/windowsphone7series/thread/fde4c415-44c5-4837-b1cd-e09727a75b92/)

> 如果您在使用应用程序时遇到问题，但正在尝试开发一个应用程序。如果是这种情况，我建议您前往[App Hub](http://create.msdn.com/)寻求更多帮助。这是所有 Windows Phone 开发人员寻求免费资源、培训和帮助的地方。

参考：
[由于命令行参数无效，连接失败。: WP7 模拟器](https://stackoverflow.com/questions/9705234/connection-failed-because-of-invalid-command-line-arguments-wp7-emulator)
[连接到 Windows Phone 7 模拟器](http://forums.silverlight.net/t/187602.aspx/1)

# c - 如何将包含十六进制数字的字符串转换为c中的十六进制格式？

> ID：10613246
> 
> 赞同：0
> 
> 时间：2012-05-16T06:39:14.053
> 
> 标签：c, string, char, hex

> **可能重复：**
> [C中的十六进制到字符数组](https://stackoverflow.com/questions/1557400/hex-to-char-array-in-c)

例如，如果我想要一个像这样的十六进制数字，`"F32FC0F5EC894E16"`我会将它存储在一个 unsigned char 变量中，如下所示：

```
unsigned char s[8] = {0xF3, 0x2F, 0xC0, 0xF5, 0xEC, 0x89, 0x4E, 0x16}; 
```

但是如果我在一个有这个数字的字符串中得到这个：

```
char a[16]="F32FC0F5EC894E16" 
```

如何将其转换为十六进制数并以与上面的变量 's' 类似的方式使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:22:23.957

此作业存在溢出：

```
char a[16]="F32FC0F5EC894E16" 
```

您没有为空终止符留出空间。Char 数组不必以 null 结尾，但字符串是，这是一个字符串声明。不要为使用硬编码值初始化的变量声明 char 数组大小，请使用`[]`.

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void hexString2byteStream (char *in, unsigned char *out, int len) {
    char *p = in;
    char byte[3] = { 0 };
    int i = 0;

    while (sscanf(p, "%2s", byte)) {
        out[i++] = strtoul(byte, NULL, 16);
        if (i == len) break;
        p += 2;
    }
}

int main(void) {
    char a[]="F32FC0F5EC894E16";
    unsigned char bs[8];
    int i;

    hexString2byteStream(a, bs, sizeof(bs));

    for (i = 0; i < 8; i++) {
        printf("%x\n", bs[i]);
    }

    return 0;
} 
```

请注意，这`out`不是一个以 null 结尾的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:12:18.230

如果十六进制位数总是偶数，并且字符串是大写的，那么算法很简单。注意，没有异常或错误的控制。这只是一个基本算法。

```
void hexCharsToBinary ( char* a, int length, char* s)
{
    int i;
    for( i=0; i< length; i++)
    {
        char mask    = (i&1)? 0xf0 : 0x0f ;
        char charVal = ((*(a+i)>='0'&&*(a+i)<='9')?*(a+i)-'0':*(a+i)-'A'+10) ;

        s[i>>1] = (s[i>>1]&mask) | charVal << ((i&1)?0:4) ;
    }

 } 
```

# php - Codeigniter - 向数据库添加值

> ID：10613252
> 
> 赞同：0
> 
> 时间：2012-05-16T06:39:44.647
> 
> 标签：php, codeigniter

我试图让用户输入他们的详细信息，然后使用 codeigniter 将它们存储在数据库中。当我尝试添加一个条目时，我被带到显示成功但它没有向数据库添加任何内容的页面。

这是模型和控制器文件 -

1.  signup.php - 这是控制器

    ```
    <?php
    class Signup extends CI_Controller{

    function index(){
    $this->load->view('signup_form');
    }

    function insert_member(){

    //load model 
    $this->load->model('insert_member_model');

    if($q = $this->insert_member_model->new_member()){
        $data['content'] = 'success';
        $this->load->view('trial', $data);
    } 
    ```

    } }

2.  insert_member_model.php - 这是模型

    ```
    class Insert_member_model extends CI_Model{
        function new_member(){

        $new_member_data = array(
        'first_name' => $this->input->post('first_name'),
        'last_name' => $this->input->post('last_name'),
        'username' => 'NULL',
        'password' =>$this->input->post('password'),
        'email_address' => $this->input->post('email_address')
    );
    $insert = $this->db->where('membership', $new_member_data);
    return $insert;
     }
    } 
    ```

任何人都可以请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:42:39.103

在 insert_member_model.php 替换：

```
$this->db->where('membership', $new_member_data); 
```

和：

```
$this->db->insert('membership', $new_member_data); 
```

将数据插入数据库。

# crystal-reports - 使用公式将 Crystal Reports 中的组名称更改为非数据库值

> ID：10613257
> 
> 赞同：1
> 
> 时间：2012-05-16T06:39:49.390
> 
> 标签：crystal-reports, crystal-reports-xi

我希望将水晶报表中的组名更改为不在数据库中的指定文本值。

例如，我有一个可以是“i”或“a”的“状态”字段。我希望这些在组标题中显示为“非活动”或“活动”。我目前在“使用公式作为组名”中的代码是：

```
stringvar newGroupName;
if (groupname = "I") THEN newGroupName:= "Inactive" ELSE
if (groupname = "A") THEN newGroupName:= "Active" ELSE
newGroupName:= groupName;
newGroupName 
```

但是，这表明我为 groupName 保留字传递的参数太少。

在网上看过，但没有找到任何使用 groupname 函数定义非数据库名称的东西。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:08:51.750

补充一点，我总是在公式列表中添加一个标准公式来计算组名：

```
if {table.field} = 'I' then
    'inactive'
Else if {table.field} = 'a' then
    'active'
Else
    'unknown' 
```

然后在小组专家的小组名称公式中，我指的是公式`{MyGroupName}`

这使得编辑名称变得更加容易和快捷，而且在编辑组字段时也不会丢失（如果您有大量代码，这非常有用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:22:40.480

确保从窗口中选择字段，它们将显示为 {table.field} 等

这里不需要变量，只需执行以下操作：

```
if {table.field} = 'I' then
 'inactive'
Else if {table.field} = 'a' then
 'active'
Else
 'unknown'; 
```

# unix - 图形脚本

> ID：10613262
> 
> 赞同：-3
> 
> 时间：2012-05-16T06:40:12.203
> 
> 标签：unix

在 Gnu/Unix 操作系统中制作图形/漂亮图片的推荐脚本语言是哪些？

我想快速创建 2-d 和 3-d 对象以及不同的东西，比如为它们着色。Python 是否提供任何支持来做这些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:43:36.367

[python](http://pyopengl.sourceforge.net/)、[lua](http://luagl.sourceforge.net/)和[ruby](http://ruby-opengl.rubyforge.org/) ​​（以及几乎所有其他语言）都有 OpenGL 绑定。如果你想使用 python，有[Panda3D](http://www.panda3d.org/)、[Soya3D](http://home.gna.org/oomadness/en/soya3d/index.html) 和[OGRE](http://www.ogre3d.org/)之类的库（顺便说一下，它们也绑定了 Perl、Ruby 等）。

# php - 无法处理来自小型聊天模块的 ajax 请求

> ID：10613268
> 
> 赞同：0
> 
> 时间：2012-05-16T06:40:39.547
> 
> 标签：php, jquery, chat

我正在为我的客户开发一个简单的聊天模块，但无法处理来自`setInterval()`

这是我发送请求以从数据库中获取数据的 js 代码

```
function getData(){

    jQuery.ajax({
        url: '../../get_data.php',
        data: 'to=<?php echo $_SESSION['ch_usr_id']; ?>',
        cache: false,
        success: function(data){
            jQuery('<div>'+data+'</div>').appendTo("#ch-data-con");
            setInterval("getData()", 5000);
        }
    });
} 
```

这是`get_data.php`根据请求生成数据的文件

```
require "../../support/connection/connect_gib.php";

$to = addslashes(trim($_REQUEST['to']));

$query = "select * from chat where 
          guest_id='".mysql_real_escape_string($to)."' order by id asc";
$result = mysql_query($query);

while( $row = mysql_fetch_assoc($result) ){
    echo "<b>".$row['frm']." : </b> " .$row['message'] . "<br />";
} 
```

我得到了循环中的结果，就像所有数据一次又一次地重复一样，但是我想要新更新的数据，请让我纠正我做错的事情..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:46:55.203

您应该保留获取的最后一个 id 并将其用于新请求。在服务器端，您应该从那里获取。

```
$id= addslashes(trim($_REQUEST['id']));
$query = "select * from chat where 
          guest_id='".mysql_real_escape_string($to)."' AND id > '".mysql_real_escape_string($id)."' order by id asc"; 
```

函数获取数据（）{

```
jQuery.ajax({
    url: '../../get_data.php',
    data: 'to=<?php echo $_SESSION['ch_usr_id']; ?>&id=' + last_id_fecthed,
    cache: false,
    success: function(data){
        jQuery('<div>'+data+'</div>').appendTo("#ch-data-con");
        setInterval("getData()", 5000);
    }
}); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:47:27.500

您在 jQuery 中使用 appendTo 函数。所以所有聊天消息都将附加在旧列表之后。您可以使用 .html() 函数来替换完整的数据。

另一种方法是只从 php 端获取最后一条聊天消息，因此所有数据都不会重复。您可以使用 auto id 来指出最后获取的消息。

# node.js - NodeJS 如何运行的概念以及每个请求的空间

> ID：10613270
> 
> 赞同：0
> 
> 时间：2012-05-16T06:41:01.897
> 
> 标签：node.js

我一直在修补 NodeJS 一段时间。我似乎仍然不明白 Node 是如何运行的。也许只是我无法摆脱 PHP 的心态。我知道它与 PHP 有很大不同，但我仍然无法理解这个想法——尤其是当他们不断重复术语*event-loop*、*event-driven*和*REPL*时。

*   代码在启动时是否“永远”运行？是不是*就像*后端的一个大浏览器窗口一样，所有客户端都在*查看*它并从他们那里监听某种*onRequest*事件？

*   还是每个请求都是一个孤立的沙箱？每个请求的代码在哪里运行，与其他请求分开？

我在视频中看到了套接字连接聊天的演示，它看起来就像第一点描述的那样运行。但是，如果所有人都访问同一个“空间”，那不是很“奇怪”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:12:01.917

1.  节点代码不需要永远运行。您看到的典型用例使用 Node 作为 http 服务器（顺便说一下，这是 Node 的卖点之一；大约 5 行代码的基本 http 服务器），因此可以永远运行。
2.  单个请求是孤立的，因为它们在回调中被处理或响应。回调使用称为闭包的概念，可确保在调用回调时保持回调的状态。因此，每个响应都是一个保持其状态的回调。[这是](https://stackoverflow.com/q/2070275/1135590)一个关于闭包和回调的好链接。
3.  这些回调异步运行，因此主事件循环可以自由处理进一步的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T09:55:58.343

代码在启动时是否“永远”运行？是不是就像后端的一个大浏览器窗口一样，所有客户端都在查看它并从他们那里监听某种 onRequest 事件？

您将什么称为“代码”？一旦你启动了一个http服务器，通过调用listen函数，是的，它会永远运行，直到你终止进程。

还是每个请求都是一个孤立的沙箱？每个请求的代码在哪里运行，与其他请求分开？

每个传入的请求（HttpGet、HttpPost）都在一个函数中处理。为了简单起见，我不会使用术语回调。该函数是一个非阻塞异步函数。在 Javascript 中，所有函数都是一种孤立的沙箱，但它们可以访问全局变量。

```
http.createServer(onRequest).listen(80);
var xvz;
function onRequest() {
 var abc;
} 
```

在上面的代码片段中，abc 位于一个隔离的沙箱中。但是，abc 仍然可以访问 xyz。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:48:35.447

您的代码生成的程序是持久的。正如您所描述的，它就像一个旧的大浏览器窗口，接收请求并回复它们。

阅读以下示例。

```
var http = request("http");
var shared = 1;

function procreq (req, res)
{
    var notshared = 1;
    res.writeHead(200, { "Content-Type": "text/plain" });
    res.end(String(shared++) +  ', ' + String(notshared++));
}

var server = http.createServer(procreq);
server.listen(8080); 
```

通过运行该服务器示例，您可以看到程序是如何持久化的，并且该`shared`变量对所有请求都是可见的，它是一个真正的服务器共享变量。我认为，如果我没记错的话，在 PHP 中你可以使用 memcached（或者它是 APC？）来实现这一点。

# php - 编译 C 代码而不制作 .C 文件

> ID：10613271
> 
> 赞同：2
> 
> 时间：2012-05-16T06:41:07.783
> 
> 标签：php, gcc, cygwin

我正在尝试在 php 中编译一个“C”代码。我正在使用 windowsXP 和 cygwin 来编译代码。我将代码运行为：

**PHP 代码**

```
$a = ' int main(){ int i; for(i= 0;i!=10;i++) printf("Its Worked");return 0;}';

$o = exec('echo '.$a.' | c:\cygwin\bin\gcc-3 -xc - -o "c:\o\ank.exe"', $errD , $err); 
```

这是完美的工作，并根据我的需要制作一个 .exe 文件。

但是如果代码中有新行，即代码现在

```
$a = ' int main()
{ 
int i;
for(i= 0;i!=10;i++)
 printf("Its Worked");
return 0;
} ';

$o = exec('echo '.$a.' | c:\cygwin\bin\gcc-3 -xc - -o "c:\o\ank.exe"', $errD , $err); 
```

它给出了编译错误。

有人可以告诉我如何编译这样的代码而不制作 .c 文件。另一个问题是我不能包含任何头文件，因为它需要一个新行。

它也无法识别特殊字符，如 '%' 等。

欢迎所有答案和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:51:04.423

在 exc 命令之前使用： $a = preg_replace("/\n/",' ',$a); // 删除所有新行，因此实际运行的代码仅包含一行...

# vb.net - 绑定到数据表时 Datagridview 列索引发生变化

> ID：10613272
> 
> 赞同：0
> 
> 时间：2012-05-16T06:41:17.330
> 
> 标签：vb.net, visual-studio, datagridview

我有两个 datragridview 组合框列，以及 datagridview 中的两个文本框列。每个组合框列都绑定到单独的绑定源。

**列名是 sl_no、col_empname、col_empworktype、Col_Hours**等，而 displaymember、datapropertyname、valuemember 和 for comboxcolumn 是

col_empname:-emp_name,emp_id,emp_id

col_empworktype:-worktypename,worktypeid,worktypeid

我的问题是

1.  当我将数据绑定到 gridview 时，它会显示一个额外的列 emp_id（图 1）
2.  当我选择组合框列时，其列索引已更改
3.  选择组合框列后，它显示错误 datagridview ' **Datagridviewcombobox 值无效！'**

![在此处输入图像描述](../Images/a468f16252aca94582b91d655a4bb222.png)

在我的表单加载中，我指定了 datapropertyname

```
Dim employeecolumn As DataGridViewComboBoxColumn = CType(grdWorkStatus.Columns("Col_EmpName"), DataGridViewComboBoxColumn) 
employeecolumn.DisplayMember = "emp_name" 
employeecolumn.ValueMember = "emp_Id" 
employeecolumn.DataPropertyName = "emp_Id" 
employeecolumn.DataSource = EmployeeSource 
```

只有当我将数据库中的数据绑定到 grdiview（更新 grdiview 数据）时，才会出现所有这些问题。否则我可以保存。并且一切工作正常。

![](../Images/10d74b78c42f63ba9d27e1cac40b0ff9.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:00:50.780

当你将数据表绑定到a`DataGridView`时，它会绑定数据表中的所有列，所以如果你的数据表中有emp_id，那么它将显示在`DataGridView`。

您可能需要`emp_id`在 dataGridView 中创建一个列，使用`DataPropertyName`这些列`emp_id`，然后使 id 列不可见。

# jpa - EclipseLink 如何使用两个@OneToMany 和@ManyToOne 来替换@ManyToMany

> ID：10613273
> 
> 赞同：0
> 
> 时间：2012-05-16T06:41:21.587
> 
> 标签：jpa, eclipselink

我是 eclipselink 的新手，并试图在 manyTomany 关联表中添加额外的列。

所以我决定使用两个@OneToMany 和@ManyToOne 来替换@ManyToMany 关系。

我在以下链接中尝试了休眠方式，但它不起作用。 [http://www.mkyong.com/hibernate/hibernate-many-to-many-example-join-table-extra-column-annotation/](http://www.mkyong.com/hibernate/hibernate-many-to-many-example-join-table-extra-column-annotation/)

有谁知道如何在 eclispelink 中构建它？

谢谢

--------------只需点击上面的链接并粘贴测试代码 --------------

A面：

```
@Entity
@Table(name = "SideA")
    public class SideA {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long  id;

    private List<ABAssociation> association = new ArrayList<ABAssociation>();

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "pk.sideA", cascade=CascadeType.ALL)
    public List<ABAssociation> getAssociation() {
          return this.association;
    }

    public void setAssociation(List<ABAssociation> association) {
    this.association = association;
    }

} 
```

边B：

```
@Entity
@Table(name = "SideB")
public class SideB {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long  id;

    private List<ABAssociation> association = new ArrayList<ABAssociation>();

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "pk.sideB", cascade=CascadeType.ALL)
    public List<ABAssociation> getAssociation() {
        return this.association;
    }

    public void setAssociation(List<ABAssociation> association) {
        this.association = association;
    }

} 
```

联想：

```
@Entity
@Table(name = "ABAssociation")
@AssociationOverrides({
   @AssociationOverride(name = "pk.sideA", 
    joinColumns = @JoinColumn(name = "SIDEA_ID")),
   @AssociationOverride(name = "pk.sideB", 
    joinColumns = @JoinColumn(name = "SIDEB_ID")) })
public class ABAssociation {
   private ABAssociationPK pk = new ABAssociationPK();
   @EmbeddedId
   public ABAssociationPK getPk() {
        return pk;
   }
   public void setPk(ABAssociationPK pk) {
       this.pk = pk;
   }
   @Transient
   public SideA getSideA() {
       return getPk().getSideA();
   }
   public void setSideA(SideA sideA) {
       getPk().setSideA(sideA);
   }
   @Transient
   public SideB getSideB() {
       return getPk().getSideB();
   }
   public void setSideB(SideB sideB) {
       getPk().setSideB(sideB);
   } 
   private String extracolumn;
} 
```

ABA协会PK：

```
@Embeddable
public class ABAssociationPK implements java.io.Serializable{
    private static final long serialVersionUID = -3797694126054440157L;

    private SideA sideA;
    private SideB sideB;
    public ABAssociationPK(){}

    @ManyToOne
    public SideA getSideA() {
        return sideA;
    }

    public void setSideA(SideA sideA) {
        this.sideA = sideA;
    }

    @ManyToOne
    public SideB getSideB() {
        return sideB;
    }

    public void setSideB(SideB sideB) {
        this.sideB = sideB;
    }

} 
```

例外是：`Exception Description: Predeployment of PersistenceUnit [testPU] failed. Internal Exception: Exception [EclipseLink-7298] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException Exception Description: The mapping [sideA] from the embedded ID class [class com.fuhu.nabisync.resource.model.entity.ABAssociationPK] is an invalid mapping for this class. An embeddable class that is used with an embedded ID specification (attribute [pk] from the source [class com.fuhu.nabisync.resource.model.entity.ABAssociation]) can only contain basic mappings. Either remove the non basic mapping or change the embedded ID specification on the source to be embedded.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:15:58.200

信息很清楚：

> 与嵌入式 ID 规范一起使用的可嵌入类只能包含基本映射。

因此，ABAssociationPK 类中不能有 ManyToOne 关联。

执行此操作的标准 JPA 方法是使用[`@MapsId`注释](http://docs.oracle.com/javaee/6/api/javax/persistence/MapsId.html)。javadoc 提供了一个有用的示例。在您的特定情况下，`ABAssociationPK`该类应包含两个类型的字段`long`:`aId`和`bId`，映射为基本列。

`Association`实体应包含关联，并使用注释`@MapsId`：

```
@ManyToOne
@MapsId("aId")
public SideA getSideA() {
    return sideA;
}

@ManyToOne
@MapsId("bId")
public SideB getSideB() {
    return sideB;
} 
```

# asp.net-mvc-3 - 从另一个项目的控制器调用一个项目的控制器

> ID：10613274
> 
> 赞同：0
> 
> 时间：2012-05-16T06:41:25.443
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我正在使用 asp.net Mvc3 我在两个不同的项目中有 2 个控制器。

HomeProject 中的 HomeController 和 WorkProject 中的 WorkController

我需要从 Home Project 的 Home Controller 中调用 Work 控制器及其视图。

类似于：

```
 public ActionResult Home()
  {
     ViewBag.work = "Work/work/";
     return View(ViewBag.work);
  } 
```

但是不知道具体怎么做

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:54:10.783

您无法使用 mvc 框架（Html.Action 等）提供给您的内容来做到这一点。该框架不是为处理这种情况而设计的（也不应该）。

如果您愿意硬编码工作服务器的地址，则可以将其视为外部链接：

```
public ActionResult Home()
  {
     Response.Redirect("http://workserver.com/work/work");
  } 
```

顺便说一句，如果你问这个，你做错了什么。（您是否尝试过使用区域？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:04:49.113

如果您的两个项目作为一个 Web 应用程序运行。你可以使用

```
return RedirectToAction("Action", "Work") 
```

这会将您重定向到“工作”控制器的“操作”操作。请注意，您不能“调用”控制器 - 而是控制器上的操作。

# android - 如何缩放传递给位图的图像视图

> ID：10613281
> 
> 赞同：0
> 
> 时间：2012-05-16T06:42:07.767
> 
> 标签：android, imageview, zooming, bitmapfactory

嗨，每个正在开发 android applicaiton 的人都可以告诉我如何缩放传递给位图的图像视图。

## 示例代码：

```
mColor_Img = (ImageView)findViewById(R.id.color_img_id);
Resources res = getResources();
bmp = BitmapFactory.decodeResource(res,R.id.iv).copy(
        Bitmap.Config.ARGB_8888, true);
mColor_Img.setImageBitmap(copy_bmp);
mColor_Img.setOnTouchListener(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:55:59.350

我认为以下链接可能会对您有所帮助：

[如何在 Android 2 中使用多点触控：第 6 部分，实现捏合缩放手势](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-6-implementing-the-pinch-zoom-gesture/1847)

# sql - 触发更新值

> ID：10613285
> 
> 赞同：0
> 
> 时间：2012-05-16T06:42:21.707
> 
> 标签：sql, oracle, triggers, plsql

我想在我的表上创建一个触发器 审计触发器的功能是：它将所有值设置为 NULL 字符串“null”意味着`'null' -> NULL` 我应该如何做我希望它用于每一列而不是任何特定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:34:55.403

PL/SQL 中没有反射，所以你需要这样做：

```
create or replace trigger aud_upd_biur
before insert or update on your_audit_table
for each row
begin
     if :new.col1 = 'null'
     then
         :new.col1 := null;
     end if;
     if :new.col2 = 'null'
     then
         :new.col2 := null;
     end if;
     ....
     if :new.col99 = 'null'
     then
         :new.col99 := null;
     end if;
end; 
```

因此，如果您的审计表只有几列 cut'n'paste 就足够了。否则，您可以从数据字典中生成代码。

# javascript - 如何克隆 jQuery 对象并将其添加为兄弟对象？

> ID：10613287
> 
> 赞同：0
> 
> 时间：2012-05-16T06:42:31.807
> 
> 标签：javascript, jquery, html, css

我创建了一个使用`div`.

```
<div class="panel" style="display:inline; float:left;position: relative; width: 140px; height: 200px; border:solid 2px; border-color: red;cursor: pointer;"></div> 
```

我尝试使用 jQuery 克隆元素并将克隆附加到自身，但它没有按预期工作。

```
for (; i < noC; i++) {
    $(".panel").clone().appendTo($(".panel"));
} 
```

我希望在最后一个框之后添加每个框。

```
[]     // noC = 1
[][]   // noC = 2
[][][] // noC = 3 
```

相反，每个新框都插入到前一个框内。

```
[]     // noC = 1
[[]]   // noC = 2
[[[]]] // noC = 3 
```

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:34:27.770

```
noC = 3;
for(i= 0; i < noC;i++) {
    $("#panel").append(function(){     
        return $("#panel").find('div').length==0?$(this).clone(): $("#panel").find('div:first').clone();
    });
}​ 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/PBBBe///](http://jsfiddle.net/nanoquantumtech/PBBNe/) 或

```
 noC = 3;
    for(i= 0; i < noC;i++) {
    $("body").append($("#panel:first").clone());        
     }​ 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/HvnbU/](http://jsfiddle.net/nanoquantumtech/HvnbU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:18:49.147

[看看这个](http://jsfiddle.net/p8AfA/14/)。不要忘记您可以在追加、前置、插入其他元素之前修改克隆的元素。这是片段：

```
noC = 5;
for(var i = 0; i < noC; i++) {
    var panel = $('.panel').filter(':first').clone();
    panel.text('panel ' +i);
    $('.panel').filter(':last').after(panel);
} 
```

我使用 filter :last 将克隆的元素放在最后一个元素旁边:-D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-08T07:26:13.750

上面的答案我可以看到主要是按类引用元素，所以我认为这更灵活一点：

```
const cloneAsSibling = element => {
  element.clone().insertAfter(element);
} 
```

我在项目的 .each() 循环中使用了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T06:56:30.113

似乎您有一些语法错误，并且可能试图克隆错误的东西。

```
var i = 0;
var noC = 3;
for(i=0; i < noC; i++){
    $('#panel').clone().appendTo('.a');
} 
```

请注意，我将其从更改`.panel`为`#panel`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T07:01:00.657

检查一下。我认为您正在尝试克隆`panel`：

[小提琴](http://jsfiddle.net/p8AfA/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T07:05:27.367

```
var noC = 2;
    cloned = $('.panel').clone();
for(i= 0; i < noC;i++) {
    cloned.appendTo($(".panel"));
}​ 
```

**[演示](http://jsfiddle.net/D5cHR/1/)**

如果需要多次，您可以设备一个功能：

```
function appendClones(target, times) {
    var noC = times;
        cloned = $(target).clone();
    for(i= 0; i < noC;i++) {
        cloned.appendTo($(target));
    }​
} 
```

调用函数： `appendClones('.panel', 3);`

**注意：**将 id 更改`#panel`为 class `.panel`。因为`id`不允许多个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-03T20:13:24.997

我用“之后”解决了这个问题[http://api.jquery.com/after/](http://api.jquery.com/after/)

在此处显示我的示例[http://jsfiddle.net/gastonnina/Mf2dE/2/](http://jsfiddle.net/gastonnina/Mf2dE/2/)

```
<script>
function cloname(that){
    var li = $(that).closest('li');
    var clon = li.clone();
clon.html(clon.html()+" clonado");
li.after( clon );
}     
</script>
<ul>
    <li>Contenido1 <a href="javascript:void(0)" onclick="javascript:cloname(this);">CLONA</a></li>
</ul> 
```

# maven - Axis2 与 Maven 的最佳实践

> ID：10613290
> 
> 赞同：5
> 
> 时间：2012-05-16T06:42:38.597
> 
> 标签：maven, code-generation, axis2

我是 Maven 和 Axis2 的新手。我的项目由三个模块组成：客户端、接口和服务器。服务是基于 POJO 的。WSDL 正在服务器模块中构建。接口模块包含常见的东西，如服务接口和 bean。

我应该将 WSDL 生成（或手动复制）到接口模块中吗？我应该在客户端模块生成客户端代码吗？模块结构好吗？我想做的就是使构建过程自动化但结构严格。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T15:37:51.433

结果不会清除您称为“接口”的组件。对于 Web 服务构建，主要有两种方法：

*   从 wsdl 开始（即契约/或服务接口描述符）
*   从代码开始（可能是java接口）

我建议第一种方法，因为并非总是可以控制开发的双方。您可以使用第二种方法从 wsdl 定义 (java2wsdl) 开始，或者使用 altova xmlspy 等工具构建 wsdl。

有了 wsdl，您可以使用 axis2-maven wsdl2code 插件来开发 WSS（Web 服务服务器端）。2.6.0 版中的这个插件只生成服务器的源代码，但您需要将此代码托管在axis2-war 发行版中或作为aar 组件。

有了 wsdl，您可以再次使用 axis2-maven wsdl2code 插件来生成 WSC（Web 服务客户端）。您可以在插件指令中指定要生成测试代码。您可以使用 mvn generate-sources 生成客户端存根，移动生成的源并修改测试。

在这两种情况下，都需要构建初始的pom（这次我还没有找到官方统一或推荐的pom）。您可以在 google 中搜索一些 pom.xml 轴示例（即：[http](http://wso2.org/library/90) ://wso2.org/library/90 ）。

下面我有一些可用于构建 pom (WSC) 的 xml：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
      <modelVersion>4.0.0</modelVersion>
      <groupId>your_group_id</groupId>
      <artifactId>your_artifact_id</artifactId>
      <packaging>jar</packaging>
      <version>1.0-SNAPSHOT</version>
      <name>your_artifact_id</name>
      <url>http://your_url</url>
      <dependencies>
        <dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>4.8.1</version>
          <scope>test</scope>
        </dependency>

        <dependency>
          <groupId>javax.servlet</groupId>
          <artifactId>servlet-api</artifactId>
          <version>2.5</version>
          <scope>provided</scope>
        </dependency>
        <dependency>
          <groupId>javax.servlet.jsp</groupId>
          <artifactId>jsp-api</artifactId>
          <version>2.1</version>
          <scope>provided</scope>
        </dependency>

        <!-- axis2/axiom: dependencies -->
        <dependency>
              <groupId>org.apache.axis2</groupId>
              <artifactId>axis2</artifactId>
              <version>${axis2.version}</version>
        </dependency>
        <dependency>  
           <groupId>org.apache.axis2</groupId>  
           <artifactId>axis2-transport-local</artifactId>  
           <version>${axis2.version}</version>  
        </dependency>
        <dependency>  
           <groupId>org.apache.axis2</groupId>  
           <artifactId>axis2-transport-http</artifactId>  
           <version>${axis2.version}</version>  
        </dependency>         
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-codegen</artifactId>
            <version>${axis2.version}</version>
            <scope>provided</scope>
        </dependency>   

        <!-- axis2-rampart: dependencies -->
        <dependency>
            <groupId>org.apache.rampart</groupId>
            <artifactId>rampart-core</artifactId>
            <version>${axis2.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-jdk14</artifactId>
                </exclusion>
                <exclusion>
                    <artifactId>log4j-over-slf4j</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <!-- slf4j: dependencies -->
        <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>slf4j-api</artifactId>
          <version>${slf4j.version}</version>
        </dependency>
        <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>slf4j-log4j12</artifactId>
          <version>${slf4j.version}</version>
          <!-- 
          <scope>runtime</scope>
          -->
          <exclusions>
            <exclusion>
                <artifactId>log4j</artifactId>
                <groupId>log4j</groupId>
            </exclusion>
          </exclusions>
        </dependency> 
        <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>jcl-over-slf4j</artifactId>
          <version>${slf4j.version}</version>
        </dependency>
        <!-- log4j: dependencies -->
        <dependency>
          <groupId>log4j</groupId>
          <artifactId>log4j</artifactId>
          <version>${log4j.version}</version>
          <exclusions>
            <exclusion>
                <artifactId>jmxtools</artifactId>
                <groupId>com.sun.jdmk</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jmxri</artifactId>
                <groupId>com.sun.jmx</groupId>
            </exclusion>
            <exclusion>
                <artifactId>mail</artifactId>
                <groupId>javax.mail</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jms</artifactId>
                <groupId>javax.jms</groupId>
            </exclusion>
          </exclusions>
        </dependency>

        <!-- other: dependencies -->
      </dependencies>

      <build>
        <plugins>
          <plugin>
              <groupId>org.mortbay.jetty</groupId>
              <artifactId>maven-jetty-plugin</artifactId>
          </plugin>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
              <source>1.6</source>
              <target>1.6</target>
            </configuration>
          </plugin>
          <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
              <warName>${project.artifactId}</warName>
            </configuration>
          </plugin>

          <plugin>
              <groupId>org.apache.axis2</groupId>
              <artifactId>axis2-wsdl2code-maven-plugin</artifactId>
              <version>${axis2.version}</version>
              <executions>
                  <execution>
                    <id>wsc_01</id>
                    <goals>
                        <goal>wsdl2code</goal>
                    </goals>
                    <configuration>
                        <wsdlFile>${codegen.wsc_01.wsdl-uri}</wsdlFile>
                        <packageName>${codegen.wsc_01.package-name}</packageName>
                        <namespaceToPackages>${codegen.wsc_01.namespace-map}</namespaceToPackages>
                        <outputDirectory>${codegen.wsc.target-dir}</outputDirectory>
                        <databindingName>adb</databindingName>
                        <syncMode>sync</syncMode>
                        <generateServerSide>false</generateServerSide>
                        <generateServicesXml>true</generateServicesXml>
                        <generateTestcase>true</generateTestcase>
                        <language>java</language>
                    </configuration>
                  </execution>
                  <!-- other wsc-generation params -->
              </executions>
          </plugin> 

        </plugins>

      </build>

        <properties>
            <slf4j.version>1.6.3</slf4j.version>  
            <log4j.version>1.2.15</log4j.version>
            <axis2.version>1.6.0</axis2.version>
            <rampart.version>1.6.0</rampart.version>

            <!-- codegen.client.properties -->

            <codegen.wsc_01.wsdl-uri>wsdl_relative_path_or_url</codegen.wsc_01.wsdl-uri>
            <codegen.wsc_01.package-name>your_root_package</codegen.wsc_01.package-name>
            <codegen.wsc_01.namespace-map>http://your_url_namespace=your_java_namespace_mapped</codegen.wsc_01.namespace-map>

            <codegen.wsc.target-dir>target/generated-sources/axis2/wsdl2code</codegen.wsc.target-dir>
        </properties>
        <dependencyManagement>
            <dependencies>
                <dependency>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-jdk14</artifactId>
                    <version>1.5.2</version>
                </dependency>
            </dependencies>
        </dependencyManagement>
    </project> 
```

# c# - 从 db 获取未标记的数据

> ID：10613292
> 
> 赞同：3
> 
> 时间：2012-05-16T06:42:55.680
> 
> 标签：c#, sql-server-2008, tsql

我在做什么：

我正在编写一个 C# 应用程序，它将帮助员工处理电子邮件。我有一个带有邮件的数据库（SQL Server 2008 Express）。一个表包含邮件本身（每一行都有类似的列`msgId, sender, recipients, subject, body`），另一个表包含员工如何处理邮件的数据 - 每当电子邮件分配了某些属性时，具有该属性的新行将保存到第二个表.

第二个表包含列：`msgId, forTeam, notForTeam, processedByTeam`。每当员工将消息标记为与其团队相关时，都会在列中保存一行并带有`TEAMXX`值`forTeam`。每当员工对电子邮件执行其他操作时，都会在列中保存一行具有`TEAMXX`值的`processedByTeam`。

我正在尝试让电子邮件显示在“未处理”视图中，即。具有以下值的邮件：

```
forTeam: null
notForTeam: everything different than 'TEAM01'
processedByTeam: everything different than 'TEAM01' 
```

我一直在尝试编写许多不同的查询，但它仍然无法按照我想要的方式工作，这让我发疯了。将不胜感激正确的查询。

例子：

带有邮件 ( `Mails`) 的表格：

```
msgId sender  subject body  received (sortingTime)
53    x@x.com test    test  2012-05-11 11:00
54    b@b.com test2   test2 2012-05-10 10:00
55    h@h.com blah    blah  2012-05-11 12:00
56    t@t.com dfgg    dfgg  2012-05-11 12:30 
```

带作业的表 ( `MailAssignments`)：

```
msgId forTeam notForTeam  processedByTeam
54    null    TEAM02      null            - this means TEAM02 hid the mail from their view
54    TEAM01  null        null            - this means TEAM01 assigned the mail to them
54    null    null        TEAM01          - TEAM01 has processed the mail

53    TEAM01  null        null            - invisible to other teams
53    null    TEAM01      null            - invisible for TEAM01 (and also for others because of the above)

56    TEAM01  null        null
56    null    null        TEAM01          - mail processed by TEAM01 
```

现在，我希望我的 C# 应用程序有一个视图，它将邮件显示为“未处理”，即：

1.  邮件 54 最初是为 TEAM02 隐藏的 - 对他们来说应该是不可见的
2.  邮件 54 已分配给 TEAM01 - 现在应该在“此团队的”视图中对他们可见
3.  邮件 54 已由 TEAM01 处理 - 现在应该在“此团队的”视图中不可见
4.  邮件 53 已分配给 TEAM01 - 应该在他们的“这个团队”视图中可见（并且仅对他们）
5.  邮件 53 已为 TEAM01 隐藏 - 对 TEAM01 应该是不可见的（由于之前的操作，对于其他任何人来说）
6.  邮件 56 已分配给 TEAM01 - 现在应该只对“此团队的”中的 TEAM01 可见
7.  邮件 56 已由 TEAM01 处理 - 现在应该在“This Team's”中对 TEAM01 不可见

因此，对于两个表中的当前数据，最后，TEAM01 应该只在其“未处理”视图中看到：

```
mail 55 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:06:11.720

```
DECLARE @teamName varchar(50) = 'TEAM01'

SELECT * 
FROM Mails M
LEFT OUTER JOIN MailAssignments MA ON M.msgId = MA.msgId
WHERE MA.msgId IS NULL OR 
      (
         MA.forTeam IS NULL AND 
         MA.notForTeam <> @teamName AND 
         MA.processedByTeam <> @teamName
      ) 
```

这会做你想要的吗？

# javascript - Javascript Keydown 事件在 Firefox、Chrome 中完美运行，但在 Internet Explorer 中只有一次

> ID：10613295
> 
> 赞同：0
> 
> 时间：2012-05-16T06:43:16.707
> 
> 标签：javascript, asp.net, dom-events, postback

我正在开发一个小型问卷，并在`TAB`从 Javascript 中按下键时触发 ASP LinkBut​​ton 单击。

Javascript如下：

```
 document.onkeydown = keydown;
    function keydown(event) {
        if (event.key == "Tab" || event.keyCode == 9 || event.which == 9 && !event.shiftKey)
            __doPostBack('<%=btnNext.UniqueID%>', '', true, '', '', false, true); 
        else if (!event) {
            if (window.event.keyCode == 9 && window.event.keyCode == 9 && !window.event.shiftKey)
                __doPostBack('<%=btnNext.UniqueID%>', '', true, '', '', false, true);
        }
    } 
```

我的 ASP LinkBut​​ton 如下所示：

```
 <asp:LinkButton ID="btnNext" runat="server" CausesValidation="true"></asp:LinkButton> 
```

LinkBut​​ton 使页面重新加载下一个问题。这一切都在 Firefox 和 Chrome 中完美运行，但在 IE 中却不行。

在 IE 中，只有第一次`TAB`按键有效，但是当我再次按下`TAB`第二次时，在加载下一个问题后，什么也没有发生。

知道如何让它在 IE 中工作吗？讨厌这些浏览器差异....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:13:58.620

需要返回false来取消tab键导致的默认动作

```
document.onkeydown = keydown;
function keydown(event) {
    if(!event){
        event = window.event;
    }
    if (event.key == "Tab" || event.keyCode == 9 || event.which == 9 && !event.shiftKey){
        __doPostBack('<%=btnNext.UniqueID%>', '', true, '', '', false, true); 
        // Only capture tab events
        return false;
    }
    return true;
} 
```

（我也把你的代码[弄干了）](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

# c# - 可编辑复合主键

> ID：10613296
> 
> 赞同：2
> 
> 时间：2012-05-16T06:43:17.403
> 
> 标签：c#, asp.net-mvc-3, data-annotations, composite-primary-key

我有两个字段用作复合主键，它们不是自动生成的。现在在编辑视图中，这两个字段是只读的，不能编辑它们。那么如何进行编辑...？

**模型：**

```
[Key][Column (Order=0)]
[Required]
public string LOV_COLUMN { get; set; }
[Key][Column(Order = 1)]
[Required]   
public string LOV_CODE { get; set; }
[Required]   
public string LOV_DESC{ get; set; }  
public string COLUMN_TYPE { get; set; }
public string LOV_STATUS { get; set; } 
```

**控制器：**

```
public ActionResult Edit(string LOV_COLUMN= "", string LOV_CODE="")
{
    return View(dv.LOV.Find(LOV_COLUMN, LOV_CODE) ?? new ADM_LOV_Master());
}

[HttpPost]
public ActionResult Edit(ADM_LOV_Master entity, FormCollection form)
{
    try
    {
        var model = dv.LOV.Find(entity.LOV_COLUMN, entity.LOV_CODE);
        TryUpdateModel<ADM_LOV_Master>(model, form.ToValueProvider());
        dv.Entry<ADM_LOV_Master>(model).State = System.Data.EntityState.Modified;
        dv.SaveChanges();
        return RedirectToAction("Index");                
    }
    catch 
    {               
        return View();
    }
}

Edit View Code as:

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>LOV_Master</legend>       

    <table>
    <tr>
    <td>
    <div class="editor-label">
        @Html.LabelFor(model => model.LOV_COLUMN)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LOV_COLUMN)
        @Html.ValidationMessageFor(model => model.LOV_COLUMN)
    </div>
    </td>
    <td>
    <div class="editor-label">
        @Html.LabelFor(model => model.LOV_CODE)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LOV_CODE)
        @Html.ValidationMessageFor(model => model.LOV_CODE)
    </div>
    </td>
    <td>
    <div class="editor-label">
        @Html.LabelFor(model => model.LOV_DESC)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LOV_DESC)
        @Html.ValidationMessageFor(model => model.LOV_DESC)
    </div>
    </td>
    </tr>
    <tr>
    <td>
    <div class="editor-label">
        @Html.LabelFor(model => model.COLUMN_TYPE)
    </div>
    <div class="editor-field">
        @*@Html.EditorFor(model => model.COLUMN_TYPE)*@
        @Html.RadioButtonFor(model => model.COLUMN_TYPE, "C", new { id = "COLUMN_TYPE_false"})
        <label for="COLUMN_TYPE_true">Character</label>             
        @Html.RadioButtonFor(model => model.COLUMN_TYPE, "N", new { id = "COLUMN_TYPE_true"})
        <label for="COLUMN_TYPE_true">Number</label>                        
        @Html.ValidationMessageFor(model => model.COLUMN_TYPE)            
    </div>        
    </td>
    <td>
    <div class="editor-label">
        @Html.LabelFor(model => model.LOV_STATUS)
    </div>
    <div class="editor-field">
        @*@Html.EditorFor(model => model.LOV_STATUS)*@
        @Html.RadioButtonFor(model => model.LOV_STATUS, "Y", new { id = "LOV_STATUS_true"})
        <label for="LOV_STATUS_true">Yes</label>                
        @Html.RadioButtonFor(model => model.LOV_STATUS, "N", new { id = "LOV_STATUS_false" })
        <label for="LOV_STATUS_true">No</label>     
        @Html.ValidationMessageFor(model => model.LOV_STATUS)
    </div>
    </td>

    </tr>

</table>

</fieldset>
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:36:42.403

主键应该是不可变的，我强烈建议使用 ID (int, GUID) 作为主键，然后将它们添加为仅具有唯一约束的代理键。我这样说是因为如果任何数据在任何其他表中引用此数据，您将违反约束，这对您来说将是一场噩梦。

# java - 如何使用 PEMWriter 导出 .req 文件？

> ID：10613301
> 
> 赞同：1
> 
> 时间：2012-05-16T06:43:35.770
> 
> 标签：java, certificate, pem, writer

我有一个请求数据，但我不知道如何使用 PEMWriter 导出此请求数据。

**我的请求数据：**

```
-----BEGIN NEW CERTIFICATE REQUEST-----
MIIBoDCCAQkCAQAwYDEQMA4GA1UEBhMHTXlhbm1hcjEKMAgGA1UECBMBdDEKMAgGA1UEBxMBdDEK
MAgGA1UEChMBdDEKMAgGA1UECxMBdDEKMAgGA1UEAxMBdDEQMA4GCSqGSIb3DQEJARYBdDCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAp8NqU0BHIlxzOWuoAtOcamm1cxlAr5Uz+wlx/KSxKR4p
0VqV1PdUVNVK2O7C1jy5VB+hXeNIlwo3BIlA6hdWtS33ynZxdUZ9BrHr6lELjd6T91q0yzbV/dQk
pR0KmycIOXgfqGF7PhZlGku+fI7wllI8n/oZvFnW/M4kSCnfEBcCAwEAAaAAMA0GCSqGSIb3DQEB
BQUAA4GBADgOHimTuqjb+Vbt0ffuK9skIQFCoicfKV5vKPpU8Uxeji/RuQ7zQVoACYOcQ8O1Epof
Aq7vZFLXKlscFO/w4UKWGEix45JIFoc8a6rCVUQph8P8GLdQNofIWVXc2dgBe/yCqgD54bnQt1tX
GLciFlHU+Oa0Lxtdc+jIOzzvYe5P
-----END NEW CERTIFICATE REQUEST----- 
```

我就像这样使用 PEMWriter 导出了请求数据。 **代码 ：**

```
BufferedWriter bw = new BufferedWriter(new FileWriter(txtRequest.getText()));
PEMWriter writer = new PEMWriter(bw2);                  
writer.writeObject(certificate);

writer.close();
bw.close(); 
```

但我有一个错误。

**错误：java.io.IOException：未知对象已通过 - 无法编码。**

请解释一下。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:15:32.937

首先，您正在创建一个 BufferedWriter `bw`，但将`bw2`其用作 PEMWriter 的参数。我想这只是一个复制/粘贴错误，没关系。

但是，您将其用作 writeObject 的参数确实很重要。在您的情况下，它可能应该是 class 的对象`java.security.cert.X509Certificate`。该方法不接受类型参数`javax.security.cert.X509Certificate`- 不同之处在于 javax 中的 x。

查看 Bouncy Castle PEMWriter 的源代码，了解该方法接受的其他类型的类。

# mysql - MySQL 错误 #1064 - 菜鸟

> ID：10613305
> 
> 赞同：0
> 
> 时间：2012-05-16T06:44:07.810
> 
> 标签：mysql, data-binding, mysql-error-1064

尝试使表中的一列引用另一个表中的另一列时，我不断收到以下错误。

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FOREIGN KEY (campaignid) REFERENCES campaigns(id)' at line 1 
```

在这种情况下，我希望在“活动”表中的“页面”表中引用（= 到）列“id”中的“活动 ID”列。

```
ALTER TABLE pages FOREIGN KEY (campaignid) REFERENCES campaigns(id) 
```

谁能看到我哪里出错了？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T06:48:01.080

您缺少`ADD`我想的关键字（[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/alter-table.html)）：

```
ALTER TABLE pages ADD FOREIGN KEY (campaignid) REFERENCES campaigns(id); 
```

# c++ - 在ofstream中打开文件失败，没有管理员权限c ++

> ID：10613308
> 
> 赞同：-1
> 
> 时间：2012-05-16T06:44:23.743
> 
> 标签：c++, visual-c++

我正在使用以下代码在我的程序中打开一个文件。

> ```
> CString cstrOut;
> CString cstrFileName;
> cstrFileName.Format( "FinalSect%1d.txt", nSect+1 );
> std::ofstream echofile;
> echofile.open(cstrFileName); 
> ```

这工作正常，但是当我打开没有管理员权限的文件时，它无法打开。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:57:08.403

它与**用户访问控制**有关。普通用户对**C:**驱动器的访问权限有限，而**管理员对****C:**驱动器具有完全访问权限（假设 C: 是安装**Windows**的分区）。

要么让您的应用程序注册**UAC**（如果它是面向其他用户、商业或其他用户的非平凡应用程序）或以管理员身份运行**Visual Studio**（我假设您使用的是 VS，但也适用于其他 IDE）（表单上下文菜单或编辑快捷方式属性）。**或者，您可以在与安装Windows**的分区不同的分区上工作。

# c - How To Write *nix's basename in C

> ID：10613314
> 
> 赞同：0
> 
> 时间：2012-05-16T06:44:57.967
> 
> 标签：c, substring

I want to extract the base name from a string, like

```
/opt/home/etc/sample 
```

That is, I want to parse a string of large length returning `sample`, or the substring after the last `/` character. The string can be of any length.

How could this be done?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T07:01:07.820

```
char *input = "/opt/home/etc/sample";
char *output = NULL;

output = strrchr(input, '/');

if(output != NULL)
{
    printf("%s\n", output);
} 
```

Or otherway is that you can try to parse it all by yourself (Below code is just a sample and doesn't handle all error and boundary conditions, which you can try and learn by yourself)

```
char *input = "/opt/home/etc/sample";
int len = 0;
char *temp = NULL;

len = strlen(input);
temp = input + (len-1);
len--;

while((*temp != '/') && (len >= 0))
{
  temp--;
  len--;
}

if(len>=0)
{
   printf("%s\n", temp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:02:45.123

You can use strtok_r

```
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] ="This/a/sample/string";
  char * pch;
  char * ans;
  printf ("Splitting string \"%s\" into tokens:\n",str);
  pch = strtok_r (str,"/");
  if(pch==NULL)
  ans = str;
  while (pch != NULL)
  {
    ans = pch;
    pch = strtok_r (NULL, "/");
  }
  return 0;
} 
```

P.S please check the code for some small errors

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:03:15.217

There are `basename` / `dirname` functions in POSIX. Their return value will point to either static memory or some suffix of the input, so there's no need to free it. This may be way easier than to split the string yourself:

```
 // assuming you own *path:
  char *file = basename(path);
  char *dir = dirname(path);   //that's all! 
```

They also handle the special case when `path` is `"."` or `".."` or `"foo/"` (then, basename is `"."` - the correct thing).

*But beware if you don't own the string*: They take a non-const argument, and they may modify it.

If you really need to use `basename` on a `const char *`, the solution is about the same

```
 #include <libgen.h>  // POSIX

  void die(const char * errormessage);

  /* version of basename(3) that does not modify its argument.
   * This assumes that "path" is correctly 0-terminated!
   * Please free() the return value after use. */
  char * basename_safe(const char * path)
  {
    char * result;
    char * what_basename_says;

    if (!path) {
      // return a pointer to ".":
      result = malloc(2 * sizeof(char));
      if (!result) die("malloc failed!");
      result[0] = '.';
      result[1] = 0;
      return result;
    }

    // in case path is the empty string, we need 2 chars to store the result ".",
    // so add 2:
    result = malloc((2 + strlen(path)) * sizeof(char));
    if (!result) die("malloc failed");

    // basename wants write access to its argument:
    strcpy(result, path);

    what_basename_says = basename(result);
    // now what_basename_says actually may be a pointer into *result.

    strcpy(result, what_basename_says);
    // to allow for free(result)

    return result;
  } 
```

But, as I said before: if you know that you can modify `*path`, you may as well use `basename` without all this.

# python - 在 django/python 上访问请求标头

> ID：10613315
> 
> 赞同：33
> 
> 时间：2012-05-16T06:45:24.537
> 
> 标签：python, django, http, header, request

我需要使用 sencha 和 django 创建一个安全的 restFUL api。我对python相当陌生。到目前为止，我能够使用基本身份验证从 sencha 向服务器发送请求，如下所示

```
 new Ext.data.Store({
   proxy: {
     type: "ajax",
      headers: {
       "Authorization": "Basic asdjksdfsksf="
    }
   }
 }) 
```

在 php/apache 中，我可以使用下面的代码轻松访问这些标头

```
$headers = apache_request_headers();
print_r($headers); 
```

如何在python中做到这一点？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-16T06:47:54.163

`request.META`您可以使用字典在视图中访问它们。

如果您想要 Authorization 标头，您可以这样做`request.META['HTTP_AUTHORIZATION']`

如果您正在从头开始创建一个 RESTful API，您可能想看看使用[sweetpie](https://github.com/toastdriven/django-tastypie)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-11-09T13:36:55.077

您可以使用

```
request.META['HTTP_AUTHORIZATION'] 
```

而有时

```
request.META['Authorization'] 
```

能够帮助。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-10-08T15:13:02.177

从 django 2.2`HttpRequest.headers`开始，添加了允许对请求标头的简单访问。所以现在您还可以使用`get()`函数获取身份验证标头`request.headers`

```
request.headers.get('Authorization') 
```

这将为您提供价值代币价值。

```
Bearer eyJ0eYourToken... 
```

[https://docs.djangoproject.com/en/2.2/ref/request-response/#django.http.HttpRequest.headers](https://docs.djangoproject.com/en/2.2/ref/request-response/#django.http.HttpRequest.headers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-13T05:59:07.843

**HttpRequest.headers**

Django 2.2 中的新功能。

```
 if 'Authorization' in request.headers: # Authorization header exists
      #do something here
      pass

 else: # Authorization header not exists
     #do something here
     pass 
```

另请阅读[Django 官方文档](https://docs.djangoproject.com/en/3.0/ref/request-response/#django.http.HttpRequest.headers)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-13T22:49:35.987

对于 2.2 之前的 django 旧版本，您需要使用 META 键以下列方式访问标头。首先检查密钥授权标头密钥是否存在始终很重要，以防万一它未发布，否则您将遇到不存在的密钥错误。

```
if not ('HTTP_AUTHORIZATION' in request.META.keys()):

    return HttpResponse('NO AUTH HEADER PROVIDED')

elif (request.META['HTTP_AUTHORIZATION'] == 'Bearer YourAuthorizationKey123':

    # Validation passed - Proceed with whatever else you want to do 
```

# jquery - 使用 jQuery 在 iF rame 元素上进行实时事件

> ID：10613322
> 
> 赞同：0
> 
> 时间：2012-05-16T06:45:57.017
> 
> 标签：jquery, iframe, binding, live

我花了几个小时试图为我的问题找到解决方案：如何在 iframe 中实现点击按钮之类的功能，该按钮是使用 ajax 动态创建的。因为 .live() 不支持这一点，所以我最终得到了这样的女巫代码：

```
$("#iframeID").live("mouseover", function(){
  //Unbind and bind avoids firing event twice (?don't know why jquery does this)
  $(this).contents().find("#buttonID").unbind('click').bind('click', function(e){
    //Do whatever you want
  });
}); 
```

无论何时创建 iframe，在“鼠标悬停”之后，它都会将 click 事件绑定到该 iframe 内的按钮。这个解决方案真的对我有用，我对此很满意。所以我的问题是这个解决方案是否有一些缺点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:51:38.163

每次鼠标在 iFrame 中移动时，这不会解除绑定并将事件绑定到按钮吗？

# google-maps-api-3 - 在 Google Maps API V3 中显示多个图层

> ID：10613324
> 
> 赞同：2
> 
> 时间：2012-05-16T06:45:58.643
> 
> 标签：google-maps-api-3, google-fusion-tables

我正在尝试将多个地图图层添加到同一张地图，但我目前只能显示一个或另一个。我已将其缩小到“地图：地图”行，当我注释掉一个时，另一个显示。在这种情况下我必须有两层，所以我如何让它们都显示？提前致谢。

```
//Add layers
    layer1 = new google.maps.FusionTablesLayer({
        query: {select: 'Address', from: tableid1},
        styles: styles[0],
        //map: map <-- When commented, the other one displays
    });

    layer2 = new google.maps.FusionTablesLayer({
        query: {select: 'Address',from: tableid2},
        styles: styles[0],
        map: map
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:31:42.733

我认为您的问题可能是您正在尝试加载两个都引用样式规则的 FusionTable。从开发人员指南的[**FusionTables**部分](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)：

*您可以使用 Maps API 最多向地图添加五个 Fusion Tables 图层，**其中一个可以使用最多五个样式规则设置样式***。

* * *

您可能还需要仔细检查您是否没有超过 Google 对 FusionTable 使用设置的任何附加限制：

*   只有表中的前 100,000 行数据被映射或包含在查询结果中。
*   使用空间谓词的查询仅返回前 100,000 行中的数据。因此，如果您将筛选器应用于非常大的表并且筛选器匹配前 100K 之后的行中的数据，则不会显示这些行。

导入或插入数据时，请记住：

*   一次 API 调用发送的数据总大小不能超过 1MB。
*   Fusion Tables 中的一个单元格数据最多支持 100 万个字符；有时可能需要降低坐标精度或简化多边形或线描述。
*   每个表支持的最大顶点数为 500 万。

查看地图时，您可能会注意到：

*   显示了多几何形状的十个最大面积组件。
*   进一步缩小时，超过 500 个要素的表格将显示点（不是线或多边形）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:13:32.653

我在题为“样式图标标记 - 融合表”的问题中添加了一些关于样式和标记图标的信息，我认为您可以在这里看到： [样式图标标记 - 融合表](https://stackoverflow.com/questions/9916719/styling-icons-markers-fusion-tables)。

简而言之，您可以像您所做的那样在 JS 中设置样式，或者您可以直接在融合表中设置样式 - 包括分配不同的标记、多边形颜色等。请参阅前面的问题以获取如何做的示例这个。

顺便说一句，当您在融合表中进行样式设置时，您不仅限于对一张表进行样式设置。

干杯，温迪

# android - 即使在导航到 android 中的不同活动后，如何保持 CheckBox 的状态？

> ID：10613325
> 
> 赞同：0
> 
> 时间：2012-05-16T06:45:58.853
> 
> 标签：android, android-activity, checkbox, state

我是Android开发的新手。让我解释一下我的问题。我的主要活动中有一个复选框和一个按钮。当我选中（即启用）我的复选框并单击其下方的按钮时，我将移动到另一个活动，并且当我单击第二个活动中的按钮时，我会回到我的主活动。我的问题是当我回来时，复选框仍然未选中或禁用。即使从第二个活动回来后，我该怎么做才能保持其状态？请帮忙。

XML 布局的 CheckBox 部分是：

```
<CheckBox
    android:id="@+id/ckBxAll"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="ON" /> 
```

主要活动的骨架代码：

```
Public class TestActivity extends Activity {
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
LayoutInflater mInflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
View mMainView = mInflater.inflate(R.layout.main, null);        
setContentView(mMainView);
 Enable_chkbox = (CheckBox)mMainView.findViewById(R.id.ckBxAll);
if(b_onResume==true)
    {
      Enable_chkbox.setChecked(b_onResume);
   }
Enable_chkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub

//do something

        });//Enable_chkbox
Compose_btn=(Button)findViewById(R.id.btnCompose);
        Compose_btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent gotoComposeMessage=new Intent(TestActivity.this,ComposeMessage.class);
                startActivity(gotoComposeMessage);
            }
        });
}
@Override
    protected void onResume() {
      super.onResume();
     b_onResume=  Enable_chkbox.isChecked();

    }
   @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        unregisterReceiver(myreceiver);
        this.finish();
      }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            moveTaskToBack(true);
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
       super.onSaveInstanceState(savedInstanceState);
       savedInstanceState.putBoolean("Enable_chkbox",true);       

    }
    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onRestoreInstanceState(savedInstanceState);
        boolean myBoolean = savedInstanceState.getBoolean("Enable_chkbox");
    }  

} 
```

我的第二个活动：

```
public class ComposeMessage extends Activity{
    Button SaveSMS_btn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.composemessage);
        SaveSMS_btn=(Button)findViewById(R.id.btnSave);
        SaveSMS_btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent gotoHome=new Intent(getApplicationContext(),BlockTestActivity.class);
                Bundle BundleToCarryMessage = new Bundle();
                EditText EnterSMS_edt=(EditText)findViewById(R.id.edtEnterSMS);
                BundleToCarryMessage.putString("Message", EnterSMS_edt.getText().toString());
                gotoHome.putExtras(BundleToCarryMessage);
                startActivity(gotoHome);
            }
        });

    }

} 
```

第二个活动中使用的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/edtEnterSMS"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:inputType="textMultiLine" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/btnSave"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Save" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T07:07:28.287

还有另一种方法。您需要覆盖 onSaveInstanceState(Bundle savedInstanceState) 并将要更改的应用程序状态值写入 Bundle 参数，如下所示：

下一个代码用于在移动到第二个活动之前保存复选框状态：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {

  savedInstanceState.putBoolean("MyCheckBox", enable);

  super.onSaveInstanceState(savedInstanceState);
} 
```

这是当您恢复复选框状态时：

```
@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);

  boolean myBoolean = savedInstanceState.getBoolean("MyCheckBox");

} 
```

**编辑：**

```
public class TestActivity extends Activity implements OnCheckedChangeListener, OnClickListener  {

        private CheckBox Enable_chkbox;
        private View mMainView;
        private Button Compose_btn;
        private boolean myBoolean = false;;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            LayoutInflater mInflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
            mMainView = mInflater.inflate(R.layout.main, null);        
            setContentView(mMainView);
            initView();
        }

        private void initView(){

             Enable_chkbox = (CheckBox)mMainView.findViewById(R.id.ckBxAll);
             Enable_chkbox.setOnCheckedChangeListener(this);
             Compose_btn=(Button)mMainView.findViewById(R.id.btnCompose);
             Compose_btn.setOnClickListener(this);
        }

        @Override
        protected void onResume() {
          super.onResume();
          Enable_chkbox.setChecked(myBoolean);

        }

        @Override
        public void onSaveInstanceState(Bundle savedInstanceState) {
           super.onSaveInstanceState(savedInstanceState);
           savedInstanceState.putBoolean("Enable_chkbox", Enable_chkbox.isChecked());      
        }

        @Override
        protected void onRestoreInstanceState(Bundle savedInstanceState) {
            super.onRestoreInstanceState(savedInstanceState);
            myBoolean = savedInstanceState.getBoolean("Enable_chkbox");
        }

        @Override
        public void onClick(View arg0) {
            //do something
        }

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            //do something
        }  
} 
```

'

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T06:56:21.940

出于所有一般目的，您必须在离开活动时保存复选框和单选按钮的状态，并在返回活动时恢复它们。
为此，我们通常使用共享偏好。我们在方法中保存按钮的状态，在`onPause()`方法中恢复状态`onResume()`。
要使用共享首选项，您可以执行以下操作：

```
SharedPreferences prefs = this.getSharedPreferences(
      "com.example.app", Context.MODE_PRIVATE); 
```

阅读偏好：

```
String dateTimeKey = "com.example.app.datetime";

// use a default value using new Date()
long l = prefs.getLong(dateTimeKey, new Date().getTime()); 
```

编辑和保存首选项

```
Date dt = getSomeDate();
prefs.edit().putLong(dateTimeKey, dt.getTime()).commit(); 
```

[在此博客上](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)查看更多示例。
将上述代码放置在正确的方法（onPause 和 onResume）中，您可以恢复按钮的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:49:52.270

使用 startActivityforResult 切换到第二个活动。当您使用它切换时，您没有完成当前活动，因此它存储了活动的状态。

# android - Android中的classcastexception

> ID：10613332
> 
> 赞同：0
> 
> 时间：2012-05-16T06:46:34.363
> 
> 标签：android

我是安卓新手。我刚刚创建了一个带有按钮和“onClickListener”的简单应用程序。但是使用这两行：

```
button=(Button) findViewById(R.id.button1);
button.setOnClickListener(this); 
```

方法上的`onCreate()`原因`ClassCastException`。但如果没有这两行，该应用程序运行良好。会有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:10:35.267

//如果您在 xml 中使用 ImageButton 或 ImageView 并且您正在声明如下代码，您将异常为`ClassCastException`.

```
button=(Button) findViewById(R.id.button1); 
```

//为此，您需要将 ImageView 或 ImageButton 更改为 Button 以在代码中声明相应的小部件

# c# - C# 线程错误 + Backgroundworker 组件

> ID：10613337
> 
> 赞同：1
> 
> 时间：2012-05-16T06:46:50.840
> 
> 标签：c#, .net, multithreading, backgroundworker

当我尝试通过调度程序更新 UI 元素时，我收到一个错误，指出对象引用未设置为对象的实例。

示例代码是 ->

```
backgroundworker.DoWork += >
{
// do some work here.

// close the progressbar over here

    _progressBar.Dispatcher.Invoke(DispatcherPriority.Normal, 
                                            new Action( _progressBar.Close);
} 
```

我收到一个错误 Object reference not set in the _progressBar.Dispatcher.Invoke 语句，我的应用程序完全挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:36:58.190

你确定的价值`_progressBar`不为空吗？也许是`null`在不同的时间点。

我会添加以下几行来检查它：

```
new Action(() => {
                    if (_progressBar == null){
                        if (Debugger.IsAttached){
                            Debugger.Break();
                        } else {
                            Debug.Fail("_progressbar is null!");
                        }
                     } else {
                       _progressBar.Close();
                     }
                  }); 
```

# jquery - 从 jQuery/jQuery Mobile 的选择菜单中获取选定的项目？

> ID：10613346
> 
> 赞同：4
> 
> 时间：2012-05-16T06:47:37.967
> 
> 标签：jquery, jquery-mobile

我有一个这样的 jQuery Mobile 代码：

```
<select name="selectmenu1" id="selectmenu1">
                        <option value="o1">
                           a
                        </option>
                        <option value="o2">
                            b
                        </option>
                        <option value="o3">
                            c
                        </option>
                        <option value="o4">
                            d
                        </option>
                    </select> 
```

现在我想在用户更改选择后获取所选值。

如何用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-16T06:49:27.513

这很简单...

```
$("#selectmenu1").change(function() {
    var selected = $(this).val(); // or this.value
}); 
```

[js小提琴](http://jsfiddle.net/cPVpw/)。

如果您想要所选元素的文本节点，请改用它...

```
$("#selectmenu1").change(function() {
    var selected = $(this).find(":selected").text();
});​ 
```

[js小提琴](http://jsfiddle.net/sz4QP/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:50:45.520

```
$('#selectmenu1').on('change', function(){
     alert( this.value );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-25T09:22:16.047

> 这是 Jquery Mobile device 的正确答案。

```
$(document).bind( "change",'#selectmenu1', function(event, ui) {
    alert($( '#selectmenu1' ).val());

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

<select name="selectmenu1" id="selectmenu1">
  <option value="o1">
    a
  </option>
  <option value="o2">
    b
  </option>
  <option value="o3">
    c
  </option>
  <option value="o4">
    d
  </option>
</select> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T06:58:29.600

[http://jsfiddle.net/ipsjolly/5RaDB/](http://jsfiddle.net/ipsjolly/5RaDB/)

```
<select name="selectmenu1" id="selectmenu1">
                    <option value="o1">
                       a
                    </option>
                    <option value="o2">
                        b
                    </option>
                    <option value="o3">
                        c
                    </option>
                    <option value="o4">
                        d
                    </option>
</select>

<div id="getval" ></div>

<script>
 function displayVals() {
       var singleValues = $("select").val();
      $("#getval").html(singleValues);
  }
  $('#selectmenu1').change(function() {
      displayVals();
  });​
</script> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-16T07:06:02.920

试试这个..这是最简单的方法..

```
 <select name="selectmenu1" id="selectmenu1" onchange="selectvalue(this.value)>
                        <option value="o1">
                           a
                        </option>
                        <option value="o2">
                            b
                        </option>
                        <option value="o3">
                            c
                        </option>
                        <option value="o4">
                            d
                        </option>
                    </select> 
```

在 JavaScript 端代码是 ..

```
function selectvalue(value){

alert(value);

} 
```

# codeigniter - 找不到在 CodeIgniter 中配置任何 TinyMCE 图像上传插件的方法

> ID：10613352
> 
> 赞同：1
> 
> 时间：2012-05-16T06:48:04.270
> 
> 标签：codeigniter, tinymce, codeigniter-2, image-uploading

我对 CI 比较陌生，但我很喜欢它。

我已经构建了一个相当健壮的表单，它使用 TinyMCE 来修复标记。我的需求之一是上传图片而不是热链接。

我曾尝试运行多个不同的 TinyMCE 上传插件，但似乎都存在路径配置问题或 Apache 阻止了什么。

在阅读 CI 文档时，我似乎记得一些关于上传的内容，但我并没有真正遵循它。

有什么我没有做的吗？也许与 Routes 或 .htaccess 相关？是否有推荐的使用 CI 的 TinyMCE 上传方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:55:50.440

您上传图像的文件夹应放在“public_html”而不是任何子目录中。即图片上传文件夹应该在父文件夹中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-11T11:07:06.483

在上传按钮单击时创建您自己的 JQuery/Angular/Whatever 事件，并将 Ajax 调用与数据一起发送到您的服务器。您可以使用 JQuery 从输入中提取数据并将它们发送到表单处理控制器，如图[所示](https://www.formget.com/ajax-image-upload-php/)。

假设这是您的输入：

```
<input type="file" name="file" id="file" required /> 
```

您的 js 将包含一个 JQuery 触发器和一个单独的 Jquery 函数来进行 Ajax 调用，如下所示。

```
tinymce.init({
  selector: 'textarea',
  height: 500,
  toolbar: 'mybutton',
  menubar: false,
  setup: function (editor) {
  editor.addButton('mybutton', {
  text: 'My button',
  icon: false,
  onclick: function () {
   //Trigger Submit event on input
   $("#uploadimage").trigger('submit');
  }
});
  },
     content_css: [
      '//fast.fonts.net/cssapi/e6dc9b99-64fe-4292-ad98-6974f93cd2a2.css',
       '//www.tinymce.com/css/codepen.min.css'
       ]
});

  //Triggered on submit
$("#uploadimage").on('submit',(function(e) {
e.preventDefault();
$("#message").empty();
$('#loading').show();
$.ajax({
url: "ajax_php_file.php", // Url to which the request is send
type: "POST",             // Type of request to be send, called as method
data: new FormData(this), // Data sent to server, a set of key/value pairs (i.e. form fields and values)
contentType: false,       // The content type used when sending data to the server.
cache: false,             // To unable request pages to be cached
processData:false,        // To send DOMDocument or non processed data file it is set to false
success: function(data)   // A function to be called if request succeeds
{
$('#loading').hide();
$("#message").html(data);
}
});
})); 
```

使用 CI 表单上传库创建一个可以处理上传文件的控制器。坦率地说，我更喜欢 Froala 而不是 TinyMCE，因为它预先设计了所有这些漂亮的小东西，并且可能具有更多功能并且可以蒙皮。无论什么漂浮你的山羊人。让我知道这是否成功。我只是在现场准备了这段代码，它非常懒惰。您可以在 TinyMCE 初始化中移动表单处理功能。干杯!

# android - 如何在android的Hashmap中存储动态编辑文本值

> ID：10613353
> 
> 赞同：-4
> 
> 时间：2012-05-16T06:48:07.437
> 
> 标签：android, hashmap

我有多个动态编辑文本框..

```
TableLayout ll_list = (TableLayout) findViewById(R.id.tbl);
for(i=0;i < Sizedd; i++)
{
EditText ed_comm = new EditText(this);
ll_list.addView(ed_comm);
} 
```

如何将其值存储在哈希图中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:36:13.077

您可以做的是，为您创建的每个 EditText 设置 Tag，并使用 Text Watcher 存储它们的数据。我不擅长这个。但是尝试相应地修改我的代码段。

首先全局声明一个HashMap，

```
public  HashMap<Integer,String> myList=new HashMap<Integer,String>(); 
```

和

```
TableLayout ll_list = (TableLayout) findViewById(R.id.tbl);
for(i=0;i < Sizedd; i++)
{
EditText ed_comm = new EditText(this);
ed_comm.setTag(i); // By this you have set an Tag to the editText and hence you can find out which editText it is, in the TextWatcher implementation. 
ll_list.addView(ed_comm);

ed_comm.addTextChangedListener(new TextWatcher() {

                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void afterTextChanged(Editable s) {
                    Log.i("After  Text","Called");
                     myList.put(ed_comm.getTag(),s.toString().trim());
                }
            });
} 
```

而已。您已将值存储到 hashMap。这个 TextWatcher 将为您在 EditText 中输入的每个文本调用。因此，您的哈希图将随时更新。

现在要从 Hashmap 中获取数据，请执行此操作，

```
Iterator i = myList.iterator();
            while (i.hasNext()) {
                    System.out.println(i.next());
            } 
```

# ruby-on-rails - 我如何在水豚中单击此按钮

> ID：10613354
> 
> 赞同：18
> 
> 时间：2012-05-16T06:48:17.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec, capybara

请帮我用水豚解决这个问题

我在水豚中有一个这样的按钮：

```
<input type="submit" value="Verify" name="verify" id="verify" class="button"> 
```

我试过了

`click_button "verify"`

但它给出了错误：

```
Failure/Error: find('#verify').click
NoMethodError:
  undefined method `node_name' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-27T16:29:04.787

## **作者的回答**

问题出在html代码中：

```
<div>
<form>
<div>    
</div>
</div>
  <input type="submit" value="Verify" name="verify" id="verify" class="button">
</form> 
```

因为有一个多余`</div>`的，`<input>`被处理在表格之外，从而`capybara`导致那些错误。删除多余的后`</div>`，一切正常。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-05T15:28:34.880

尝试`js: true`在`describe`. 当您没有包含该按钮的表单时会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T20:27:25.957

您是否尝试过“加倍”CSS 选择器？自 capybara-2.4.3 以来，这一直是我的首选机制

```
find("#verify").find("[name=verify]").click 
```

除了#id-vale 之外的任何其他属性都可以解决问题，例如

```
find("#verify").find(".button]").click 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-21T20:08:38.737

如果你有一个元素的 ID，只需使用 @bonzofenix 的方法，但让它更简单一点：

`within 'form' do find('#verify').click end`

# javascript - 用正则表达式regEx匹配“rgb（xx，xx，xx）”的Javascript？

> ID：10613357
> 
> 赞同：0
> 
> 时间：2012-05-16T06:48:28.460
> 
> 标签：javascript, regex

如果有人能指出我正确的方向，我将不胜感激。我有一个数组“cArr”，在这个数组中我有 2 个元素。我想做的是匹配“rgb（xx，xx，xx）”并将其推送到数组“rgbArr”；我遇到的问题是正则表达式。

这是我的代码：

```
var cArr = ["id0{shape:round,rgb(24,23,12)}","id1{shape:long,weight:heavy,rgb(20,20,20)}","id2{shape:elongated,weigth:light,rgb(15,24,8)}"];

for(var i=cArr.length -1; i>=0; i--)
{
  if(cArr[i].match(matchColors))
  {
    rgbArr.push(cArr[i]);
    break;
  }
}

console.log(rgbArr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:01:59.820

I was wrestling with this issue today and have a slightly more simplified solution to this issue which uses a slightly different Regular Expression along with JavaScripts 'match' function (I have wrapped it up in a function so that we can reuse this functionality as required):

```
function parseRGB ( string ) {
    var rgbRegex = /(rgb\([^)]*\))/gi;
    var rgbArray = string.match(rgbRegex); 

    return rgbArray;
} 
```

Now simply call the function with the value you want to check. E.g.

```
parseRGB( '-moz-linear-gradient( top, rgb(68, 68, 68), rgb(153, 153, 153))' ); 
```

Which will return the following array:

```
[ "rgb(68, 68, 68)", "rgb(153, 153, 153)" ] 
```

A few things to note:

*   If no RGB matches are found this function will return null.
*   JavaScripts match string function will automatically put all occurances into an array for you. It can take a regular expression as a parameter.
*   This can handle multiple rgb values if they exist in the string to be checked.

Hope this helps someone.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:06:14.120

请澄清您的问题（似乎我在上面的评论），暂时尝试这样的事情。（但这并没有为您提供第一个元素中的多种 rgb 颜色......）

```
var matchColors=/.*?(rgb\([^)]*\)).*/;

var cArr = ["id0{shape:round,rgb(24,23,12)},id1{shape:long,weight:heavy,rgb(20,20,20)}","id2{shape:elongated,weigth:light,rgb(15,24,8)}","sdf"];

var rgbArr=[];

for(var i=cArr.length -1; i>=0; i--) {
    if(cArr[i].match(matchColors)) {
        var x = cArr[i].replace(matchColors,"$1");
        rgbArr.push(x);
//      break;
    }
}

console.log(rgbArr);​ 
```

# compatibility - 如何使用 java 应用程序检查 jre 版本

> ID：10613359
> 
> 赞同：10
> 
> 时间：2012-05-16T06:48:30.447
> 
> 标签：compatibility, java

我已经在JDK7中做了一个应用程序，但是jre6仍在市场上使用，如果我将我的jar文件发送给使用jre6的人，它不会工作，有没有办法让应用程序检查jre版本，如果它没有compat 然后要求用户更新..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T06:51:06.550

您可以使用[System.getProperty(String key);](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getProperty%28java.lang.String%29) `"java.version"`as 键的方法。

```
String version = System.getProperty("java.version"); 
```

示例输出：

```
1.6.0_30 
```

可用的密钥可以在[这里](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:02:07.680

```
static public void main(String[] arg) throws IOException
    {
        PrintStream out = System.out;
        Properties pro = System.getProperties();
        Set set = pro.entrySet();

       Iterator<Map.Entry<String , String >> itr = set.iterator();
        while(itr.hasNext())
        {
            Map.Entry ent = itr.next();
            out.println(ent.getKey() + " -> " + ent.getValue() + "\n");
        }
} 
```

使用`System.getProperty("java.version")`或`System.getProperty("java.runtime.version")`获取已安装的 java 版本。
上面的代码片段可以帮助您找到更多详细信息，例如 java 供应商名称、操作系统等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T06:51:10.937

```
System.getProperty("java.version") 
```

*   [演示](http://ideone.com/lDR83)

**注意**：它将返回当前 jvm 的版本，执行此代码的 jvm，如果您的计算机上安装了 java6 和 java7，并且您在 java 7 上运行此代码，它将显示版本 7

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T08:54:16.840

UnsupportedClassVersionError would occur if you try to run a Java file on an older version of jre compared to the version on which it was compiled.

java.lang.UnsupportedClassVersionError: Bad version number in .class file [at java.lang.ClassLoader.defineClass1(Native Method)] on running a compiled java class file.

In essence you can not run .class files that are compiled with a newer version than the JVM.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T06:53:09.917

这是一个检查版本并在版本不正确时抛出异常的[示例](http://www.java2s.com/Code/Java/Development-Class/CheckVersion.htm)`System.getProperty("java.version");`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T06:55:18.007

使用 Java Web Start，如果 Java 版本与您的 jar 不兼容，您会有一个消息框。例如：

```
<resources>
       <j2se version="1.4+"
             href="http://java.sun.com/products/autodl/j2se" /> 
```

在 jnlp 文件中

# windows-phone-7 - 如果windows phone 7应用程序在应用程序运行期间的互联网连接丢失如何处理？

> ID：10613360
> 
> 赞同：1
> 
> 时间：2012-05-16T06:48:32.733
> 
> 标签：windows-phone-7

我正在开发一个需要在线连接的 WP7 应用程序。在从 mainpage.xaml 导航到任何页面之前，我正在使用以下命令检查设备是否已连接到 Internet：

```
isAvailable = NetworkInterface.GetIsNetworkAvailable(); 
```

应用程序仅在`isAvailable`为真时继续；否则会弹出“请检查您的 WI-FI 连接”

问题：最初，该应用程序已连接到互联网，但是我应该如何处理在我使用该应用程序时失去互联网连接但在初始检查之后的情况？

我应该`isAvailable = NetworkInterface.GetIsNetworkAvailable();`在每次页面加载时还是在每次服务调用之前检查？有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T08:32:48.170

您应该挂钩 DeviceNetworkInformation.NetworkAvailabilityChanged 事件，这将允许您的应用程序在网络可用性发生变化时得到通知，从而无需在每次执行服务调用时进行检查：-

[http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.devicenetworkinformation.networkavailabilitychanged(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.net.networkinformation.devicenetworkinformation.networkavailabilitychanged(v=vs.92).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:08:10.463

在每个页面上检查 NetworkInterface.GetIsNetworkAvailable 毫无意义。即使用户有 Internet 连接，Web 请求也可能失败，实际上这种情况经常发生。只需确保处理所有错误情况，提供自动或易于使用的重试机制，并通知用户操作无法完成，因为其连接出现问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-16T07:16:45.913

```
using Microsoft.Phone.Net.NetworkInformation;

public MainPage()

    {
        InitializeComponent();

        if (NetworkInterface.GetIsNetworkAvailable())
        {
           // Use navigation method here
        }
        else

           MessageBox.Show("Need net connection"); 
```

# java - 如何使用 FileDialog 提供文件扩展名列表？

> ID：10613362
> 
> 赞同：0
> 
> 时间：2012-05-16T06:48:37.547
> 
> 标签：java, swing, jfilechooser, filedialog

我可以使用 JFileChooser 对文件进行扩展。例子：

```
JFileChooser chooser = new JFileChooser();
FileNameExtensionFilter filter = new FileNameExtensionFilter(
    "JPG & GIF Images", "jpg", "gif");
chooser.setFileFilter(filter); 
```

但我可以理解如何使用 FileDialog 做同样的事情。我的问题是我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:51:56.947

void setFilenameFilter(FilenameFilter filter) 将此文件对话窗口的文件名过滤器设置为指定的过滤器。

# c# - 如何在 C# 中检查和替换空值

> ID：10613363
> 
> 赞同：2
> 
> 时间：2012-05-16T06:48:49.233
> 
> 标签：c#, null

任何人都可以指导我使用字符串消息“NO DATA”检查和替换 strList 中的空值或允许它们在 dtList 中的方法。因为当我在这个列表中遇到一个空值时，它会显示一个错误，比如“位置没有行......”

```
private DataTable getSomething1(String text){
    DataTable dtb = new DataTable();
    ...
    ...
    return dtb;
}

...

protected void buttonCheck_Click(object sender, ImageClickEventArgs e){
    List<DataTable> strList = new List<DataTable>(){
        getSomething(txtInput.Text),
        getSomething2(txtInput.Text),
        getSomething3(txtInput.Text),
        ...                
    };
} 
```

我在 Webform 中使用了 C#。请帮助我修复此代码或指导我解决它的方法。提前致谢。

@tech，@ riffnl：最后我得到了你所有的想法，它现在真的很管用。Anw，感谢所有专业人士的建议。所以，这是我的解决方案^^

```
private String ConvertNullToEmptyString(DataTable element)
    {
        if (element.Rows.Count > 0) //just add this condition here
        {
            if (!DBNull.Value.Equals(element.Rows[0]["FullName"]))
                return (string)element.Rows[0]["FullName"] + " ";
            else
                return String.Empty;
        }
        return "NO DATA";
    }

protected void ....(){
     List<DataTable> strList = new List<DataTable>(){
       GetItem1(txtName.Text),   //private DataTable GetItem1(String t)
       GetItem2(txtName.Text),   //...           
     };

    txtGrD_D.Text = ConvertNullToEmptyString(strList[0]);
    txtGrM_D.Text = ConvertNullToEmptyString(strList[1]);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T06:52:24.090

您可以使用 C# 的[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx) **??** ：

```
string s = null;
s = s ?? "NO DATA";
// s now equals "NO DATA"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:56:27.777

由于您使用的是数据表，我假设您不是在谈论 NULL（或 nill），而是 DBNull .. 像这样更改函数 ConvertNullToEmptyString：

```
private String ConvertNullToEmptyString(DataTable element){ 
  if (element.Rows[0]["Fullname"] == DBNull.Value || element.Rows[0]["Fullname"] == null) {
    return "NO DATA";
  } else {
    return element.Rows[0]["Fullname"].ToString();
  }
} 
```

根据要求：新样品；

```
// a list of datatables each containing 1 row, wasn't that the point of datatables
    // anyway -- I think you don't have any rows, so let's try this:
    private String ConvertNullToEmptyString(DataTable element)
    {
        if (element.Rows.Count == 0)
        {
            return "NO DATA";
        }
        if (element.Rows[0]["Fullname"] == DBNull.Value || element.Rows[0]["Fullname"] == null)
        {
            return "NO DATA";
        }
        else
        {
            return element.Rows[0]["Fullname"].ToString();
        }
    } 
    protected void Test()
    {
        List<DataTable> strList = new List<DataTable>(){ 
           GetItem("test1"),   //private DataTable GetItem1(String t) 
           GetItem("test2")   //...            
         };
        txtGrD_D.Text = ConvertNullToEmptyString(strList[0]);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:54:17.500

使用 String.IsNullOrEmpty 尝试这种方式。我将 dataTable 中的单元格加倍可以为空。

```
 //creating an example table with one row (no data inisde):
        DataTable table = new DataTable();
        table.Columns.Add("FullName", typeof(string));
        table.Rows.Add("");
        string str = ConvertNullToEmptyString(table);

    //method to check for string:
    private String ConvertNullToEmptyString(DataTable element)
    {
        String s = element.Rows[0]["FullName"].ToString();
        return (string.IsNullOrEmpty(s) ? "NO DATA" : s);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T07:08:01.203

如果错误是“位置没有行...”，那么我猜问题不是字符串为空，而是您正在尝试访问数据表中不存在的行.

特别是，在这一行：

```
String s = element.Rows[0]["FullName"].ToString(); 
```

您尝试访问数据表的第一行。如果数据表为空怎么办？你得到一个错误！所以你应该检查数据表是否包含这样的行：

```
if (element.Rows.Count >0) 
```

* * *

回答您的评论：是的，我们可以。修改你的：

```
foreach (DataTable element in strList) 
```

变成类似的东西：

```
foreach (DataTable element in strList)     
    {          
    if (element.Rows.Count>0)
        {
        if(strList.Any(item => item == null))          
            {                
          ConvertNullToEmptyStringelement);                                                 
            }
        txtItem1.Text = mytext ;          
        .....
        }
    else
        {
        txtItem1.Text = "No Data";          
        }      
    } 
```

在不修改太多程序结构的情况下，这是我所能做到的。

# c# - 在 Flash 特定文件关闭时捕获事件

> ID：10613364
> 
> 赞同：-2
> 
> 时间：2012-05-16T06:49:00.767
> 
> 标签：c#

我想一直观察直到 myfile.fla 关闭而不是 Flash.exe
即
我想等到 myfile.fla 关闭而不是 Flash.exe
即
如何
在 c#中捕获 myfile.fla 关闭而不是 Flash.exe 的事件

```
' Open the notepad application
        info.FileName = "Flash.exe"

        ' Pass a text file name so that notepad will open it
        info.Arguments = "c:\MyFile.fla"
        process.StartInfo = info

        ' Start the process (notepad)
        process.Start() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:02:07.600

（编辑：这个答案是在用户将他的问题从记事本更改为 Flash 之前写的。*叹息*）

* * *

由于记事本不支持自动化，因此没有“官方支持”的方式来做到这一点。

您*也许*可以得出一些技巧，例如，

*   通过不断检查记事本的应用程序标题或
*   通过检查文件上是否还有一些锁定（*如果*记事本以某种方式锁定文件，我不知道）。

尽管如此，该解决方案可能会非常难看，并且需要 Windows API 调用。也许如果您详细说明您要解决的确切问题，可以建议替代解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:26:30.437

我可以使用以下代码关注 Windows 标题

public static void Main () { IntPtr hwnd = UnsafeNativeMethods.FindWindow("Notepad", null); StringBuilder stringBuilder = new StringBuilder(256); UnsafeNativeMethods.GetWindowText(hwnd, stringBuilder, stringBuilder.Capacity); Console.WriteLine(stringBuilder.ToString()); } } [SuppressUnmanagedCodeSecurity] 内部静态类 UnsafeNativeMethods { [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)] 内部静态 extern int GetWindowText ( IntPtr hWnd, [Out] StringBuilder lpString, int nMaxCount ); [DllImport("user32.dll", SetLastError = true)] internal static extern IntPtr FindWindow (string lpClassName, string lpWindowName);

}

# java - 使界面适应窗口宽度

> ID：10613365
> 
> 赞同：0
> 
> 时间：2012-05-16T06:49:06.927
> 
> 标签：java, gwt, window, width

我创建了一个 gwt 界面（出现在浏览器上）。当浏览器窗口重新调整界面的宽度以适应窗口的宽度时，如何使其宽度“有弹性”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:18:17.270

这是自动发生的，如果您从 RootLayoutPanel 开始，然后嵌套[布局面板](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#LayoutPanels)（LayoutPanel、DockLayoutPanel，...），直到您到达需要拉伸的内容。

确保对 HTML 页面使用[标准模式](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#Standards)，否则它可能不适用于所有浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:38:09.380

它应该像**不**使用像素或其他固定大小的单位一样简单。

但是您知道，GWT 并不能帮助您免于学习 HTML 和 CSS（甚至 JavaScript）

# r - R Programming：如何在 qplot 的条形上方放置标签？

> ID：10613376
> 
> 赞同：1
> 
> 时间：2012-05-16T06:49:53.927
> 
> 标签：r, label, ggplot2

> **可能重复：**
> [如何使用 ggplot2 在 R 中的 geom_bar 上放置标签](https://stackoverflow.com/questions/6455088/how-to-put-labels-over-geom-bar-in-r-with-ggplot2)

我一直在寻找如何在我的 qplot 栏顶部放置标签的方法。这是下面的图片 ![在此处输入图像描述](../Images/6a56823f683dc19239dd6c44171e0ab8.png)

和代码，

```
library(ggplot2)
library(colorRamps)
TawiTawiPop <- c(17000, 45000, 46000, 59000, 79000, 110000, 143000, 195000, 228204, 250718, 322317, 450346, 366550)
YearNames <- c("1903", "1918", "1939", "1948", "1960", "1970", "1975", "1980", "1990", "1995", "2000", "2007", "2010")

qplot(YearNames, TawiTawiPop, 
      xlab = expression(bold("Censal Year")), 
      ylab = expression(bold("Population")), 
      geom = "bar",
      stat = "identity", colour = I("red"), 
      fill = matlab.like2(13)) + theme_bw() + 
      opts(
        title = expression(bold("Tawi-Tawi Population from 1903 to 2010")),
        plot.title = theme_text(size = 18, colour = "darkblue"),
        legend.position = "none",
        panel.border = theme_rect(linetype = "dashed", colour = "red"))
        plot.title = theme_text(size = 18, colour = "darkblue") 
```

现在我想在它上面贴一个标签，就像下面的那个。我在 Mathematica 中做了这个

![在此处输入图像描述](../Images/76595e5f4315c94880ba46c22b1fe872.png)

那些标签“17000、45000 等等”，我想把它放在我的 qplot 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:56:45.090

```
library(ggplot2)
library(colorRamps)
TawiTawiPop <- c(17000, 45000, 46000, 59000, 79000, 110000, 143000, 195000, 228204, 250718, 322317, 450346, 366550)
YearNames <- c("1903", "1918", "1939", "1948", "1960", "1970", "1975", "1980", "1990", "1995", "2000", "2007", "2010")

qplot(YearNames, TawiTawiPop, 
      xlab = expression(bold("Censal Year")), 
      ylab = expression(bold("Population")), 
      geom = "bar",
      stat = "identity", colour = I("red"), 
      fill = matlab.like2(13)) + theme_bw() + 
      opts(
        title = expression(bold("Tawi-Tawi Population from 1903 to 2010")),
        plot.title = theme_text(size = 18, colour = "darkblue"),
        legend.position = "none",
        panel.border = theme_rect(linetype = "dashed", colour = "red"),
        plot.title = theme_text(size = 18, colour = "darkblue"))+
     geom_text(aes(label = TawiTawiPop,angle=90,hjust=-0.1)) 
```

# sharepoint - 在 SharePoint 2010 中使用 UniqueID 的 Caml 查询

> ID：10613379
> 
> 赞同：1
> 
> 时间：2012-05-16T06:50:02.597
> 
> 标签：sharepoint, sharepoint-2010, caml

我目前正在使用 SharePoint 列表，我想获取一些特定的列表项。以下 Caml 查询对我有用，并给了我两个项目。

```
<Where>
  <In>
    <FieldRef Name='UniqueId' />
    <Values>
      <Value Type='Lookup'>E0D2E6B2-28F5-4225-8DFD-9C1FFCC8A1CQ</Value>
      <Value Type='Lookup'>EDDC5A33-38F9-4A8C-B3A8-1EED0AB98D02</Value>
    </Values>
  </In>
</Where> 
```

当我添加像“test”这样的值时，我收到一个异常。似乎只有当我放弃了有效的 UniqueId 时，查询才会起作用。

如何进行 Caml 查询以在列表中查找两个以上的 UniqueId？（UniqueId 可能不存在。（它们来自单独的数据库）

有人可以帮我详细介绍一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T01:34:08.363

使用 SharePoint 的 CAML 查询生成器。生成器中列出的任何内容都是您可以在 SharePoint 中查询的有效列。[在此处](http://spcamlqueryhelper.codeplex.com/)下载 SharePoint 2007 构建器。

![在此处输入图像描述](../Images/e2daff68eea571aeb4a28a010ac47d12.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:48:28.393

只要该值是有效的 Guid，那么您就可以按照自己的要求进行操作。

从你的问题看来你正在尝试

```
<Value Type='Lookup'>test</Value> 
```

这会给你一个例外。

如果您想尝试使用您知道自己没有的 id，请尝试使用

```
string.Format("<Value Type='Lookup'>{0}</Value>", new Guid());
// <Value Type='Lookup'>00000000-0000-0000-0000-000000000000</Value> 
```

或者

```
string.Format("<Value Type='Lookup'>{0}</Value>", Guid.NewGuid());
// <Value Type='Lookup'>eebe4177-29ff-4ece-9daa-2c293fd9aebc</Value> 
```

如果您想尝试使用两个以上的元素，只需在 Values 元素中插入更多的 Value 元素。

# google-drive-api - 从开发者仪表板将应用程序发布到 Google Chrome 商店时出错

> ID：10613381
> 
> 赞同：3
> 
> 时间：2012-05-16T06:50:09.267
> 
> 标签：google-drive-api

我已经为 Google Chrome 商店发布了 3 个测试应用程序，没有任何问题，但在我的最后一个应用程序中，当我尝试发布应用程序时出现错误“

> “* 此项目不允许链接到清单中指定的 API 控制台项目。如果您的 Chrome Webstore 项目的其中一个人是 API 控制台项目的作者或所有者，您只能链接到 API 控制台项目。”

我已经检查了 API 控制台项目和应用程序具有相同的所有者，我。

我使用的清单是：

```
{
    "name": "Development",
    "description": "Developer test location",
    "container" : "GOOGLE_DRIVE",
    "api_console_project_id" : "[xxxxxx]",
    "version": "1.51",
    "icons": 
    {
        "96": "96x96.png",
        "128": "128x128.png"
    },
    "app": 
    {
        "launch": 
        {
            "web_url": "[xxxxx]"
        }
    }
} 
```

其中 [xxxxxx] 是真实数据，我正在为 Google Drive 开发一个应用程序。

更广泛的部分是，我试图更新我的一个旧应用程序（已经发布给测试人员）并且我得到了同样的错误，那么谷歌部分是否有任何变化或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:29:15.800

我可以在我的测试 Chrome 网上应用店列表中重现这一点。肯定有问题，如果您不拥有 Google API 控制台项目，我想这个错误是有道理的，但在我们为 Chrome 网上应用店列表和 API 控制台项目使用相同帐户的情况下，则不是。

我们正在通知 Google 云端硬盘工程团队有关此问题的信息。我们希望尽快解决这个问题，我会在这里随时通知您。

我们对不便表示抱歉。

# php - 如何计算固定号码的 PayPal 费用 (2.9% + .30)？

> ID：10613385
> 
> 赞同：8
> 
> 时间：2012-05-16T06:50:33.593
> 
> 标签：php, javascript, function, math

听起来是个简单的问题，我知道。我真的很难过。

以下是制作简单计算器的两个网站：

[http://thefeecalculator.com](http://thefeecalculator.com)

[http://ppcalc.com](http://ppcalc.com)

我需要在我的 PHP 应用程序中计算这些 PayPal 的费用。

这就是我得到的，说我们想“平均”支付 30 美元的会员费。这是我用来计算我们应该收取的费用以使用 PayPal 的计算来弥补它的功能（也在上述两个网站上都有描述）：交易的 2.9% + 0.30 美元。

```
function memfees()
{
    $calc = round((30 * .029) + 30 + .30,2);
    return $calc;
} 
```

在这里测试它：http: [//matt.mw/junk/php/memfees.php](http://matt.mw/junk/php/memfees.php) 如您所见，它显示为 31.17。其他两个网站都说应该是 31.20。如果我尝试 130.00 美元，我的计算为 134.07 美元，他们两个都计算为 134.19 美元。

我究竟做错了什么？

为什么我使用 Round 函数？百分比会导致一些小数超过百分之一，如果小数点后超过 2 位，PayPal 会生成错误。我认为人们通常会用钱来取舍（例如，31.6342 美元将是 31.63 美元），但如果是这样的话，我在我的功能中做错了什么？如果有大笔付款，则减少的金额会更大。这让我相信百分比部分有问题。

你能提供一些帮助吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T07:03:17.260

你的功能确实很奇怪。细分来看，PayPal 收取 0.30 美元的固定费率，并增加 2.9% 的交易百分比费用。

这个公式是加上 $.30 然后除以百分比差异 (100% - 2.9%)，这将为您提供 PayPal 实际减少之前的金额。

```
function memfees($amount)
{
    $amount += .30;
    return $amount / (1 - .029);
} 
```

您可以根据需要将其四舍五入和浮动。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T07:02:19.100

因为你想错了。

您不收取 30 美元，而是收取 31.20 美元。Paypal 从中扣除交易费 (2.9%) *，*然后从结果中扣除 0.30 美元：

```
 $31.20
*  0.971 (1 - 2.9%)
  ------
  $30.2952
- $00.30
  ------
  $29.9952 
```

所以你必须扭转这个过程，即在你的总数中加上 0.3 美元并除以 0.971。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-14T23:47:03.027

这是一个很好的数学解释，说明它是如何工作的。我们有这个号码 x，我们想从信用卡中扣款。我们不知道这个数字是多少，但我们知道当我们减去 30 美分并减去 x 的 2.9% 时，我们得到 y，也就是我们带回家的金额：

```
y = x - x * .029 - .3 
```

我们知道 y，因为我们知道我们想要带回家的数量。假设我们想带回家 100 美元，那么 y = 100。但是 x 是多少？

```
y = x - x * .029 - .3
y + .3 = x - x * .029
         = x(1 - .029)
(y + .3) / (1 - .029) = x
x = (y + .3) / .971 
```

*注意：因为`x - x * .029`可以写成`x * 1 - x * .029`then 所有需要做的只是使用分配属性，我们想出了`x(1 - .029)`*

于是我们提出了这个公式：

```
x = (y + .3) / .971 
```

它定义了这个臭名昭著的数字 x。此外，它回答了我们的问题；我应该从卡中收取多少金额才能支付交易费用并且不低于我们想要带回家的金额？好吧，我们需要做的就是填写带回家的金额，即 y：

```
x = (100 + .3) / .971
x = ~103.30 
```

我希望这有助于澄清。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-02T14:59:08.340

在 C# 中

```
public decimal CalcFee()
{
    //PayPal Percentage Fee = 0.29%, Fix Fee = 0.3
    var sum = this.Items.Sum(c => c.Price * c.Qty); //Total Items
    return Math.Round(Math.Round((sum + (decimal)0.3) / (decimal)0.971, 2) - sum, 2);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-16T02:00:40.167

一道数学题。100% 不是你想的那样：

*   100 % + 需收取固定费用
*   100 % 实际上是`97,1 % payout ($ 30) + 2,9 % fee`
*   为了获得 100%，我们应用三法则

例如：

```
 97.10 % = $ 30
  1.00 % = $ 30 / 97.1
100.00 % = $ 30 / 97.1 * 100
============================
100.00 % ~ 30,90 
```

现在我们需要添加固定费用：

```
$ 30,90 +  $ 0.30 
```

这导致了请求`$ 31.20`

那么这在 Code 中意味着什么？

```
//untested, not a php developer anymore
function requiredChargement($requiredPrice)
{
    $requiredPercentage = 100.0 - 2.9;
    $fullVariableCost = $requiredPrice / requiredPercentage * 100.0;
    return round($fullVariableCost + 0.3, 2);
} 
```

# c# - 应用程序级别的通用上下文菜单

> ID：10613389
> 
> 赞同：2
> 
> 时间：2012-05-16T06:50:39.227
> 
> 标签：c#, custom-contextmenu

我有一个非常庞大的业务应用程序，其中包含几乎所有类型的控件 + 第三方控件。现在我有一个要求，我必须在任何控件（网格、单元格、行、树节点、按钮等...等）上的**“ctrl + 双击”**上打开一个表单。

在 Winforms C#.Net 中是否可能。

我也尝试使用此代码，但没有帮助

```
const int WM_LBUTTONDBLCLK = 0x0203;//client area
const int WM_NCLBUTTONDBLCLK = 0x00A3;//non-client area
protected override void WndProc(ref Message m)
{
  if (m.Msg == WM_LBUTTONDBLCLK)
    return;
  if (m.Msg == WM_NCLBUTTONDBLCLK)
    return;
  base.WndProc(ref m);
} 
```

我不确定是否可以**在应用程序级别创建通用上下文菜单** 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:25:20.723

为此，您将不得不使用键盘和鼠标挂钩。

这里有一些很棒的文章可以帮助您入门。

[在 C# 中处理全局鼠标和键盘挂钩](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-)

和

[WPF，低级键盘钩子示例](http://blogs.vertigo.com/personal/ralph/Blog/Lists/Posts/Post.aspx?ID=8)

# android - setFocusable 不起作用

> ID：10613393
> 
> 赞同：1
> 
> 时间：2012-05-16T06:50:50.783
> 
> 标签：android, android-edittext

```
eT = (EditText) findViewById(R.id.searchAutoCompleteTextView_feed);
        eT.setFocusable(false);

eT.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Log.d("Cliked on edit text", "eT.onClick");
                eT.setFocusable(true);
            }
        }); 
```

我编写了这段代码，期望焦点不在 editText 上，因为它会弹出我不想要的屏幕键盘。效果很好，但是当我单击editText时，我希望将其聚焦，以便现在弹出小键盘....但这不起作用，当我单击editText时，它什么也没有

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-08-17T09:04:44.280

更好的答案是：

`eT.setFocusableInTouchMode(true); eT.setFocusable(true);`

而且您不必创建“假”焦点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T07:01:11.283

您必须在 EditText 上方创建一个具有“假”焦点的视图：

就像是 ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <!-- Stop auto focussing the EditText -->
    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:background="@android:color/transparent"
        android:focusable="true"
        android:focusableInTouchMode="true">
    </LinearLayout>

    <EditText
        android:id="@+id/searchAutoCompleteTextView_feed"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:inputType="text" />

</LinearLayout> 
```

在这种情况下，我使用了 LinearLayout 来请求焦点。希望这可以帮助。

# javascript - 如何在javascript中创建字典键值对数组？

> ID：10613395
> 
> 赞同：0
> 
> 时间：2012-05-16T06:51:03.267
> 
> 标签：javascript

```
var category = [{
    key: 'a',
    value: 'avinash'
}, {
    key: 'b',
    value: 'balaji'
}, {
    key: 's',
    value: 'satish'
}, {
    key: 'd',
    value: 'dheeraj'
}, {
    key: 'p',
    value: 'poonam'
}, ]; 
```

这是正确的创作方式吗？如果没有，任何人都可以建议我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T06:54:50.457

是的，这是一种方法......但我认为一个简单的对象可以很好地完成这项工作：

```
var category = {'a': 'avinash',
                'b': 'balaji',
                's': 'satish',
                'd': 'dheeraj',
                'p': 'poonam' }; 
```

# php - PHP 时间范围，获取总小时数、晚上时间、夜间时间、周末时间和节假日

> ID：10613402
> 
> 赞同：1
> 
> 时间：2012-05-16T06:51:39.753
> 
> 标签：php, date, strtotime

我目前正在开发一个应用程序，我需要在其现有的发票系统中添加一个新功能。

员工放弃工作时间如下：

```
Start: 18:30 01-01-2012
End: 00:30 02-01-2012 
```

现在，当有人从选定的日期范围创建发票时，系统会生成总工作时间 x 每小时价格。这工作正常，不是问题。

现在，如果工作时间是晚上、晚上、周末（周六/周日）和节假日，系统需要能够在每小时费率的基础上额外收取 % 的费用。

有人知道如何实现这一点吗？

周末并不难，但是当我到周末时，我还需要找出这些周末工作了多少小时……它有点多维……

我的想法是首先循环遍历时间范围，首先循环每天的日期，然后循环每天的时间，然后在每个循环中进行某种检查以检查它是否是夜间时间、晚上时间..周末时间..假期小时..

我很想听听任何想法，因为我有点卡住了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:52:04.197

我已经找到了一个解决方案来做我想做的事。所以我想把它分享给其他必须做同样事情的人。

我在开始日期时间和结束日期时间之间创建了一个循环，间隔为 15 分钟，因为员工总是在精确的时间或 :15、:30、:45 开始或结束。

每隔 15 分钟，我检查一下日期是否属于假期、晚上时间、夜间时间或周末时间（星期六 + 星期日）。

我已将假期日期添加到数组中，与 nighthours 和 nighthours 相同。

在每个 IF 语句检查中，我做了一个计数器来跟踪每种类型、假期、晚上时间、夜间时间或周末的 15 分钟。

所以最后你得到了每种类型的小时或假期或周末的总分钟数，除以 60 即可得出每种类型的小时、假期或周末的总工作时间。基于此，我计算了如果在这些时间工作要收取的额外费用。

我可能不是最好的方法，但它对我有用。

# ios - SplitViewController 有多个 DetailViewController，rootViewController 和 detailviewController 都有导航控制器

> ID：10613406
> 
> 赞同：0
> 
> 时间：2012-05-16T06:52:21.967
> 
> 标签：ios, ipad

我寻找一种在 iPad 应用程序中拥有多个详细视图的方法，我在苹果开发者网站[http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html)中找到了示例代码，但现在我想要详细查看此示例未涵盖的导航控制器，是否有任何示例涵盖此类应用程序。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:54:51.383

您可以简单地启动一个使用所需视图初始化的 uinavigationcontroller，然后在分配时将其传递给 UISpliviewcontroller，而不是您的 detailviewcontroller。

# r - 使用 R 将谷歌地理地图的输出打印为图像

> ID：10613414
> 
> 赞同：1
> 
> 时间：2012-05-16T06:52:41.937
> 
> 标签：r, google-maps, rgooglemaps

我正在使用 googlevis 包来绘制地理地图。我得到的输出是 HTML。是否可以生成 jpg 或 png 输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:54:46.517

Following Andrew tip I suggest to take a look at the [RgoogleMaps](http://cran.r-project.org/web/packages/RgoogleMaps/index.html) package. It seems to provide what you are looking for.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:24:06.950

You could also try the [osmar](http://cran.r-project.org/web/packages/osmar/) package which uses the data from OpenStreetMap.

# html - 将所有分隔线与输入字段从左到右相邻排列，然后使标签出现在输入字段的顶部

> ID：10613415
> 
> 赞同：-1
> 
> 时间：2012-05-16T06:52:42.563
> 
> 标签：html, css

我一直在搞乱css，但我无法得到我想要的布局。我想让所有输入字段垂直对齐，但重要的是我仍然保留分隔符（因为我在它们上使用了javascript）我一直在玩不同的位置和浮动设置，我似乎无法让它工作......

如果有人有一个很好的解决方案，可以使其全部垂直对齐（标签直接位于输入字段的顶部），我将不胜感激

这是我凌乱的代码：

[http://jsfiddle.net/hYa9a/4/](http://jsfiddle.net/hYa9a/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:22:55.723

Nightfirecat 建议的替代方案，如果计划是将标签放在文本框上方，那么这可能会奏效：

顺便说一句：我认为 jsfiddle.net/hYa9a/4/ 代码中有一个错字。在密码字段中，将其中一个 ID 输入为 usernameIn。这应该是密码输入吗？

```
<style>
#optionsBar{ /*same as login*/}
.placeholder {
    background-color: #fff;
    outline: none;
    font-family: "Times New Roman", Times, serif;
    font-size: 12px;
    text-indent: 0;
    /*box-shadow: 0 1px 1px rgba(0, 0, 0, 0.07) inset, 0 0 8px rgba(82, 168, 236, 0.6); */
    -moz-border-radius: 2px;
    border-radius: 2px;
}
/*same as login*/
.selectInput {
    border: 1px solid #8BAAFE;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.07) inset, 0 0 5px rgba(33, 93, 253, 0.6);
}    

#smLogin{
position:relative;
float:right;
width:100%;
height:30px;
}

#usernameIn{
    position: relative;
    float: left;
    width:150px;
    margin-left:-150px;
    margin-top:20px;
}
#passwordIn{
    position: relative;
    float: left;
    width:150px;
    margin-left:-150px;
    margin-top:20px;
}
#username{
    width:150px;
    position: relative;
    float: left;
}
#password{
    position: relative;
    float: left;
    width:150px;
}
#firstInput{
    position: relative;
    float: left;
}
#secondInput{
position: relative;
    float: left;
}
​&lt;/style>

<div id="optionsBar">
<div id="smLogin">
<form name="smLoginForm">

<div id="username" >
<label id="usernameLb"  for="username">Username</label>
</div>
<div id="usernameIn" class="inputs">
 <input id="firstInput" name="username"  class="placeholder controlInput"   type="text" size="20" value="">
</div>

<div id="password" >
 <label id="passwordLb" for="password">Password</label>
</div>
<div id="passwordIn" class="inputs">
 <input id="secondInput" name="password" class="placeholder controlInput" type="password" size="20" value="">
</div>

</form>
</div>
</div>​ 
```

注意：如果可以选择修改 HTML 代码而不仅仅是 CSS，我会建议将表单标签和文本框放在包装 div 中。就像是：

```
<div class="formobject">
<div id="username" >
<label id="usernameLb"  for="username">Username</label>
</div>
<div id="usernameIn" class="inputs">
 <input id="firstInput" name="username"  class="placeholder controlInput"   type="text" size="20" value="">
</div>
</div> 
```

然后，您可以通过删除单个标签和文本框上的所有样式来清理 CSS，并将宽度和浮动设置为仅 formobject div。像：

```
<style>
.formobject{
    float: left;
    width:150px;
}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:00:50.367

如果您的意思是将标签直接放在字段之上（如覆盖在字段之上），我建议您`position: absolute;`也将标签应用于`z-index: -1;`标签和`background-color: transparent;`文本字段，[如本 JSFiddle 中所使用的那样](http://jsfiddle.net/hYa9a/11/)。

# android - 从 Sqlite 数据库中检索数据并将其绘制在 XY 图中为 android

> ID：10613417
> 
> 赞同：2
> 
> 时间：2012-05-16T06:53:10.777
> 
> 标签：android, sqlite, graph

是否有任何现有代码允许从 SQLite 数据库中检索数据并将其显示在图表中？（我希望根据 y（字符串部门）绘制 x（整数人数）图表。以下代码仅允许在类文件中手动输入坐标。

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Vector<SeriesData> sds = new Vector<SeriesData>();
    //line
    SeriesData sd = new SeriesData();       
    sd.setData(new double[][]{{0,0}, {2, 2}, {4, 4}, {8, 8}});
    sds.add(sd);
    //bar
    SeriesData sd2 = new SeriesData();      
    sd2.setData(new double[][]{{0,0}, {2, 2}, {4, 4}, {8, 8}});
    sd2.series.bars.show = true;
    sds.add(sd2);

    FlotDraw fd = new FlotDraw(sds, null, null);

    setContentView(R.layout.main);
    FlotChartContainer tv = (FlotChartContainer)this.findViewById(R.id.flotdraw);
    if(tv != null) {
        tv.setDrawData(fd);
    }

} 
```

# android - 如何将适配器设置为自动完成文本视图？

> ID：10613419
> 
> 赞同：9
> 
> 时间：2012-05-16T06:53:14.190
> 
> 标签：android, search, autocompletetextview

我需要将适配器数据设置为 android 中的自动完成文本视图。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-12T07:18:03.073

创建一个 String 数组或从任何函数获取它并创建一个 String ArrayAdapter 然后让适配器为您设置列表。

```
 String[] array={"first","second item" ,"third item"};
 AutoCompleteTextView textView;

ArrayAdapter<String> adapter;

textView = (AutoCompleteTextView) findViewById(R.id.et_search);

adapter = new ArrayAdapter<String>(PlayListActivity.this,
                        android.R.layout.simple_list_item_1, array);

                textView.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T07:12:54.470

创建一个项目`AutoCompleteTextView`并将代码粘贴到所需位置 -

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
<TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="@string/hello"
   />
<AutoCompleteTextView android:id="@+id/myautocomplete"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:completionThreshold="1"
/>
</LinearLayout> 
```

**AutoCompleteTextview.java**

```
public class AndroidAutoCompleteTextView extends Activity implements TextWatcher{

AutoCompleteTextView myAutoComplete;
String item[]={
  "January", "February", "March", "April",
  "May", "June", "July", "August",
  "September", "October", "November", "December"
};

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

   myAutoComplete = (AutoCompleteTextView)findViewById(R.id.myautocomplete);

   myAutoComplete.addTextChangedListener(this);
   myAutoComplete.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, item));

   }

@Override
public void afterTextChanged(Editable arg0) {
 // TODO Auto-generated method stub

}

@Override
public void beforeTextChanged(CharSequence s, int start, int count, int after) {
 // TODO Auto-generated method stub

}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
 // TODO Auto-generated method stub

}
} 
```

只需使用此示例。并且，弄清楚他们如何将适配器设置为`AutoComplete TextView`希望这对您有所帮助。

# android - 如何在android中创建这种类型的布局

> ID：10613420
> 
> 赞同：-1
> 
> 时间：2012-05-16T06:53:16.997
> 
> 标签：android, android-listview

如何创建如下图所示的布局。是否有类似下图中的 ListView 示例？而且，如何在 android 的页脚处创建 Button？

谁能给我一些关于此图像中使用的内容的想法，我不明白。

![布局](../Images/3214ada51f22a43ff562083f4a8eeccb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:01:10.593

`RelativeLayout`您可以使用, 并在其中将子视图相对于彼此以扁平（意味着有效和快速）结构排列来实现这样的结果：

你有

*   一张`logo`图片`alignParentTop = true`，
*   设置为的`security`图像或按钮，`layout_below``logo`
*   一个`control`按钮`alignParentBottom = true`，最后
*   设置为并设置为控制的`list`列表视图，具有of 。`layout_below``security``layout_above``layout_height``fill-parent``match-parent`

**编辑**：`ListView`上面的控件还使用自定义的项目渲染器持有 - 可能 -`TextView`一个自定义图像设置为`drawableLeft`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T06:59:46.650

是的，我认为它是 ListView。尝试类似：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
<TextView
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/footer"
        android:layout_below="@id/title" >
    </ListView>

<LinearLayout
        android:id="@id/footer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"/>
</LinearLayout> 
```

# jquery - jQuery Mobile - 对话框没有第二次应用 jQuery 样式？

> ID：10613430
> 
> 赞同：1
> 
> 时间：2012-05-16T06:54:13.233
> 
> 标签：jquery, jquery-ui, jquery-mobile, dialog, jquery-ui-dialog

我有一个 jQuery 移动对话框，它在第一次加载时可以完美运行，但是一旦`dialog.close();`单击浏览器中的按钮或后退按钮并再次启动对话框，该对话框不会包含在 jQuery UI 标记中，也不会对其应用任何样式.

它第一次起作用，但之后再也没有。我假设它可能是因为旧数据可能存在于 DOM 中，但是当使用 firebug 检查页面时，我找不到旧数据存在。我注意到在第一次启动后，它在每个实例上都使用相同的 jQuery ID`element.data();`

以下是 console.logs 的示例：

```
Before the dialog is ever created:
Object { jQuery16102984105026891979={...}, role="dialog"}

After it has been created:
Object { jQuery16102984105026891979={...}, role="dialog", page={...}, more...}

After the `dialog.close();` function has been activated:
Object { jQuery16102984105026891979={...}, role="dialog", page={...}, more...}

After it has been created again:
Object { jQuery16102984105026891979={...}, role="dialog", page={...}, more...} 
```

为什么第二次没有应用样式？对话是用 启动的`$.mobile.changePage()`。

由于该应用程序是在 MVC 中构建的，因此我真的没有任何代码可以显示，尝试重现该问题将是一项巨大的努力。

我在 jquery.com 上发现了一个类似的未解决问题：http: [//forum.jquery.com/topic/dialog-not-applying-style-on-second-time-loading](http://forum.jquery.com/topic/dialog-not-applying-style-on-second-time-loading)。

# matlab - Matlab中的参数传递

> ID：10613432
> 
> 赞同：3
> 
> 时间：2012-05-16T06:54:19.273
> 
> 标签：matlab, parameters, arguments, argument-passing, matlab-deployment

我在matlab中有一个fun（a，b，c）形式的函数，当他调用函数时，使用可能会或可能不会给出参数'c'。我必须稍后在该函数中在“c”上使用 switch case，因此需要检查用户是否使用 2 个或 3 个参数调用了该函数？

怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T07:02:27.087

你可以通过使用来做到这一点`nargin`：

```
function fun(a,b,c)

if (nargin < 3)
    c = c_default_value;
end

switch c 
```

或使用`nargin`and `varargin`（此函数定义允许无限数量的参数）：

```
function fun(a,b,varargin)

if (nargin < 3)
    c = c_default_value;
else
    c = varargin{1};
end

switch c 
```

# vb.net - 从 Web 应用程序动态调用数据库

> ID：10613434
> 
> 赞同：0
> 
> 时间：2012-05-16T06:54:28.520
> 
> 标签：vb.net, visual-studio, database-connection

我希望根据用户输入进行数据库调用。我正在使用的线路是：

`general_read.CommandText = "SELECT * FROM general WHERE Business_Name = '" & business_name & "';"`

business_name 从以下位置动态加载：

```
Protected Sub btnLoad_Click(sender As Object, e As System.EventArgs) Handles btnLoad.Click
    business_name = txtName.Text

    dbConnect()
    dbGet()
    dbDisconnect()
End Sub 
```

显示的错误是：

`Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.`

我假设它与在进行数据库调用之前未设置的变量有关，但我并不完全确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:40:26.493

我猜它失败了

`general_read.CommandText = "SELECT * FROM general WHERE Business_Name = '" & business_name & "';"`

因为这是您指定的代码。如果是这种情况，那么您没有正确初始化 SQLCommand 对象。下面是 MSDN 页面，它正确地向您展示了如何为对象使用所有重载的构造函数。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)

如果 business_name 为 null，则在您尝试连接 ComamndText 字符串时也会引发异常。在该行上放一个断点，看看什么是空的。这就是你的问题所在。

希望这可以帮助。如果该行没有出错，请在出错的地方包含代码。

# ios - 寻找 NSMutableDate 类

> ID：10613437
> 
> 赞同：0
> 
> 时间：2012-05-16T06:54:35.993
> 
> 标签：ios, nsdate, mutable

有这样的第三方扩展`NSDate`吗？

我需要一些方法来调整日期（增加或减少日/月/年）并将日期对象保存在同一内存中（因此`myDate = getNewDateByAdjustingOldOne (myDate);`不可接受）。

如果没有已经实现的可变日期，是否有可能获取内部数据（考虑到类接口`NSDate`中无法访问内部数据）。`NSDate`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:56:00.767

您可以让所有需要共享`NSDate`对象的对象都存储一个指向该指针的指针，即

```
NSDate** pDate 
```

然后让他们的所有操作在`&pDate`. 在您正在调整日期的班级中，继续重置

```
&pDate = NSDate* *newDate* 
```

然后所有对象将同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:29:00.510

确实是执行 myDate = getNewDateByAdjustingOldOne (myDate); 的内存开销；这么小我真的不用担心。过早的优化会导致完全可以避免的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:31:36.597

您可以将`NSCalendar`and`NSDateComponents`用于可变日期。设置“预制”`NSDateComponents`以添加/减去默认时间量或根据需要进行设置。

```
NSDateComponents *comps = [NSDateComponents alloc] init];
comps.day = 1;
NSCalendar *cal = [NSCalendar currentCalendar];
// will wind up adding 1 day to the original date.
NSDate *newDate = [cal dateByAddingComponents:comps toDate:origDate options:NSWrapCalendarComponents]; 
```

Apple 在[Calendrical Calculations](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html#//apple_ref/doc/uid/TP40007836-SW3)上写了一些不错的文档。

# asp.net - ASP.NET 和谷歌地图。单击按钮时添加标记

> ID：10613444
> 
> 赞同：0
> 
> 时间：2012-05-16T06:55:24.060
> 
> 标签：asp.net, google-maps

我正在开发一个 ASP.NET 项目，并且在其中使用 Google Maps。我在页面加载时加载地图。然后通过单击一个按钮，我想添加一些标记。我正在使用以下代码。

```
function LoadSecurity(locationList, message) {
    if (document.getElementById("map_canvas") != null && 
        document.getElementById("map_canvas") != "null") {

        map = new google.maps.Map(document.getElementById("map_canvas"), 
            myOptions);

        for (var i = 0; i < locationList.length; i++) {
            if ((i == 0) || (i == locationList.length - 1)) {
                var args = locationList[i].split(",");
                var location = new google.maps.LatLng(args[0], args[1])
                var marker = new google.maps.Marker({
                    position: location,
                    map: map
                });
                marker.setTitle(message[i]);
            }
        }
    }
} 
```

我使用以下代码在按钮上调用该函数。

```
<asp:Button ID="Button1" runat="server" 
    OnClientClick="javascript: LoadSecurity('57.700034,11.930706','test')"
    Text="Button" /> 
```

但不工作。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:13:49.670

您在此处要求“i”位置的元素，但您的 locationList 那时只是一个字符串？

```
locationList[i].split(","); 
```

尝试将其更改为

```
locationList.split(","); 
```

但是您的代码中还有一些其他相当奇怪的东西。您的 for 循环从 0 到 locationList 的长度，但此时 locationList 是一个字符串而不是数组。所以你的 for 循环从 0 到 19 ......

如果您试图从您传递的字符串中获取 2 个坐标，请查看以下 jsfiddle：http: [//jsfiddle.net/f3Lmh/](http://jsfiddle.net/f3Lmh/)

如果您尝试在该字符串中传递多个坐标，则必须稍微改变传递它们的方式，因此很容易看出哪个坐标属于谁。我准备了另一个小jsfiddle：http: [//jsfiddle.net/f3Lmh/4/](http://jsfiddle.net/f3Lmh/4/)

# android - 如何在 onCreateView 中设置 imagebutton src？

> ID：10613449
> 
> 赞同：6
> 
> 时间：2012-05-16T06:56:04.427
> 
> 标签：android

在我的应用程序中，我有几个`ImageButton`由各自的 s 控制的`StateListDrawable`s。我将它们用作活动底部的选项卡菜单来切换片段。它们可以很好地改变状态（按下时，聚焦，默认）。片段的切换也可以。但是，我不知道如何在当前显示按钮所代表的片段时突出显示按钮（例如，按下时使用图像集）。

我尝试在运行时设置`BackgroundResource`, `ImageDrawable`,但每次启动我的应用程序时都会`ImageResource`得到一个。`NullPointerException`

如果这有帮助，这是我的日志

```
05-16 14:15:19.489: E/AndroidRuntime(4800): FATAL EXCEPTION: main
05-16 14:15:19.489: E/AndroidRuntime(4800): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.meralco/com.meralco.pms.TestPMSActivity}: java.lang.NullPointerException
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.os.Looper.loop(Looper.java:130)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.app.ActivityThread.main(ActivityThread.java:3687)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at java.lang.reflect.Method.invokeNative(Native Method)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at java.lang.reflect.Method.invoke(Method.java:507)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at dalvik.system.NativeStart.main(Native Method)
05-16 14:15:19.489: E/AndroidRuntime(4800): Caused by: java.lang.NullPointerException
05-16 14:15:19.489: E/AndroidRuntime(4800):     at com.meralco.pms.HomeFragment.onCreateView(HomeFragment.java:19)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at  android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.app.Activity.performStart(Activity.java:3791)
05-16 14:15:19.489: E/AndroidRuntime(4800):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1624)
05-16 14:15:19.489: E/AndroidRuntime(4800):     ... 11 more 
```

这是 HomeFragment.xml：

```
public class HomeFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.home, container, false);
    ImageButton btn_sin = (ImageButton) view.findViewById(R.drawable.button_sin);
    btn_sin.setBackgroundResource(R.drawable.pp_sin_1);
    return view;
    }
} 
```

主页.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center_horizontal|center_vertical"  >

    <TextView android:id="@+id/home_text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/home_text1"
        android:textSize="20sp"
        android:textStyle="bold"
        android:textColor="#000000"
        android:padding="10dp"
        android:gravity="center_horizontal|center_vertical" />

    <TextView android:id="@+id/home_text2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/home_text2"
        android:textSize="12sp"
        android:textColor="#000000"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:gravity="center_horizontal|center_vertical"/>

    <TextView android:id="@+id/home_text3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/home_text3"
        android:textSize="10sp"
        android:textColor="#000000"
        android:padding="15dp"
        android:textStyle="italic"
        android:gravity="center_horizontal|center_vertical"/>

</LinearLayout> 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.3"
        android:src="@drawable/phone_portrait_bg_01" />

    <FrameLayout
        android:id="@+id/fragment_content"
        android:layout_weight="7"
        android:layout_width="match_parent"
        android:layout_height="0dp">
        <ImageView android:src="@drawable/phone_portrait_bg_02"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="centerCrop"/>
    </FrameLayout>

    <fragment class="com.meralco.pms.ButtonsHandler"
        android:id="@+id/titles" 
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:layout_height="0dp" >
        <!-- Preview: layout=@layout/buttons -->
    </fragment>

</LinearLayout> 
```

按钮处理程序.java

```
public class ButtonsHandler extends Fragment{   
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        // Inflate the layout for this fragment

        return inflater.inflate(R.layout.buttons, container, false);
    }
} 
```

按钮.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal|center_vertical">

    <ImageButton
        android:id="@+id/button_sin"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="#000000"
        android:src="@drawable/button_sin"
        android:onClick="buttonClick" />

    <ImageButton
        android:id="@+id/button_city"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:background="#000000"

        android:src="@drawable/button_city"
        android:onClick="buttonClick" />

    <ImageButton
        android:id="@+id/button_date"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:background="#000000"
        android:src="@drawable/button_date"
        android:onClick="buttonClick" />

    <ImageButton
        android:id="@+id/button_all"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:background="#000000"
        android:src="@drawable/button_all"
        android:onClick="buttonClick" />

    <ImageButton
        android:id="@+id/button_help"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:background="#000000"
        android:src="@drawable/button_help"
        android:onClick="buttonClick" />

</LinearLayout> 
```

蒂亚！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T07:05:58.790

```
ImageButton btn = (ImageButton)findViewById(R.id.button1);
btn.setImageResource(R.drawable.newimage); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T07:17:19.137

试试这个方法

```
ImageButton btn_sin = (ImageButton) view.findViewById(R.id.button_sin);
btn_sin.setImageResource(R.drawable.pp_sin_1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:13:14.037

您无法访问**HomeFragment**中的**button_sin**，因为**HomeFragment**使用**home.xml**布局。

哟可以做下

```
public class ButtonsHandler extends Fragment{   
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
        // Inflate the layout for this fragment

        View v = inflater.inflate(R.layout.buttons, container, false);

        ImageButton btn_sin = (ImageButton) view.findViewById(R.id.button_sin);
        btn_sin.setBackgroundResource(R.drawable.pp_sin_1);

        return 
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:14:04.770

要将片段与活动连接起来，请看这里

[http://developer.android.com/guide/topics/fundamentals/fragments.html#CommunicatingWithActivity](http://developer.android.com/guide/topics/fundamentals/fragments.html#CommunicatingWithActivity)。

因此，首先您将 ButtonsHandler 与您的活动连接起来。然后您在 HomeFragment 中创建一个方法，您只需要从您的活动中调用此方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-02T05:31:28.937

问题出在你的代码上

```
 ImageButton btn_sin = (ImageButton) view.findViewById(R.drawable.button_sin); 
```

将其更改为

```
 ImageButton btn_sin = (ImageButton) view.findViewById(R.id.button_sin); 
```

R.id.button_sin 必须是布局中的 imagebutton id

# objective-c - 获取数据图像进行处理的最佳方法

> ID：10613451
> 
> 赞同：2
> 
> 时间：2012-05-16T06:56:07.480
> 
> 标签：objective-c, ios, image-processing, core-graphics, convolution

我想从 uiimage 获取数据以读取 rgb 值。我想将此数据用于卷积过滤器。在互联网上，我发现只有一种方法：

```
// First get the image into your data buffer
CGImageRef image = [UIImage CGImage];
NSUInteger width = CGImageGetWidth(image);
NSUInteger height = CGImageGetHeight(image);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
unsigned char *rawData_ = malloc(height * width * 4);
NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = bytesPerPixel_ * width;
NSUInteger bitsPerComponent = 8;
CGContextRef context = CGBitmapContextCreate(rawData, width, height, bitsPerComponent,           bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);

CGContextDrawImage(context, CGRectMake(0, 0, width, height));
CGContextRelease(context);

// Now your rawData contains the image data in the RGBA8888 pixel format.
int byteIndex = (bytesPerRow * yy) + xx * bytesPerPixel;
red = rawData[byteIndex];
green = rawData[byteIndex + 1];
blue = rawData[byteIndex + 2];
alpha = rawData[byteIndex + 3]; 
```

没关系，但我想处理数组上的像素，如下所示：[x][y][r,b,g]。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:14:21.963

还有另一种获取图像数据的方法：[技术问答 QA1509：从 CGImage 对象获取像素数据](https://developer.apple.com/library/mac/#qa/qa1509/_index.html)

至于如何访问它，您没有太多选择。多维 C 数组只有在第二维和后续维具有在编译时已知的固定大小时才能工作。图像数据没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:22:19.077

作为替代建议，我建议不要在 CPU 上进行图像卷积。相反，我的[GPUImage](https://github.com/BradLarson/GPUImage)框架中有各种基于 GPU 的卷积，这些卷积可以比 CPU 密集型实现快一个数量级。

其中包括经过高度优化的 GPUImageSobelEdgeDetectionFilter，它对图像的亮度执行 Sobel 边缘检测，以及 GPUImage3x3ConvolutionFilter，它允许您提供通用的 3x3 卷积核以应用于任意图像。对于实时视频，这些可以轻松地实时处理传入的帧。对于 UIImage，这些过滤器的运行速度比在 CPU 上执行的卷积快 6-10 倍。

根据您的具体问题，Ken 的建议是一个很好的建议，但实际上我发现 Apple 在链接文章中建议的数据复制方法实际上最终比在位图上下文中重绘图像要慢。这看起来很奇怪，但我在基准测试中得到了一致的结果。您在上面展示的 Core Graphics 绘图是我发现的访问原始 UIImage 像素数据的最快方法。

# android - 当我们在列表视图中点击它时如何展开列表行

> ID：10613453
> 
> 赞同：7
> 
> 时间：2012-05-16T06:56:19.090
> 
> 标签：android, listview

在我的应用程序中，我有一个自定义列表视图，其中包含一些文本视图和图像视图，如下图所示。 ![在此处输入图像描述](../Images/d4b2a008834940ca00e96950121ba5e7.png)

我的要求是当我们点击列表行时它应该展开，当再次点击它或点击任何其他行时它应该折叠。展开的行应该是这样的 ![在此处输入图像描述](../Images/f3d6cd0a527f29a59c2bd58082560adb.png)

扩展行的内容是动态的，有时没有数据，有时更多的值。它应该看起来像第二张图片。请为此提供解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T06:59:36.043

您正在寻找[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。

Expandable ListView 默认有两个级别。第一层称为“组视图”，第二层称为“子视图”。您可以通过使用我提供的第一个链接中的自定义适配器示例来简单地实现。

这里有几个链接可以帮助您入门，

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html)

[http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html](http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html)

[http://www.techienjoy.com/android-expandable-list-dynamically-created-example.php](http://www.techienjoy.com/android-expandable-list-dynamically-created-example.php)

**编辑 1**

要使唯一的孩子在特定时间展开，请添加以下内容，

```
explist.setOnGroupExpandListener(new OnGroupExpandListener() {

    public void onGroupExpand(int groupPosition) {

        for(int i=0; i<myExpAdapter.getGroupCount(); i++) {
            if(i != groupPosition) {
                explist.collapseGroup(i);
            }
        }
    }

}); 
```

# ruby-on-rails-3 - 一些宝石的Rspec混淆和启动方法

> ID：10613460
> 
> 赞同：0
> 
> 时间：2012-05-16T06:56:44.250
> 
> 标签：ruby-on-rails-3, rspec, capybara, factory-bot, faker

我是 Rspec 的新手，我从电子书和在线博客中学习它。我对一些宝石有些困惑，我应该如何进行测试？他们对 Rspec 和测试的真正作用是什么？

这些宝石如下

**gem factory_girl gem 'capybara
'
gem 'faker'
gem 'guard-rspec'
gem 'launchy'**

我不知道为什么要使用它们以及在开始学习 Rspec 时应该使用哪个 gem？另一个问题是我应该在学习 Rspec 的同时进行单元测试还是功能测试？

请帮我。
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:11:37.890

`factory_girl` is used as substitute for test fixtures, to generate objects with predefined data for use in tests;

`capybara` is a integration testing tool;

`faker` generates sample test data;

`guard-rspec` works with `guard`, an automated testing tool;

`launchy` takes web pages generated by integration tests and opens them in a browser

You can get a better idea what each gem does by finding it on Github and perusing the README. If you're looking for an introduction to RSpec, the [RSpec docs](http://www.relishapp.com/rspec) are a good place to start. There are a number of tutorials that address testing -- eg. [this one](http://ruby.railstutorial.org/).

# json - 谷歌地图中标记的json格式要求

> ID：10613464
> 
> 赞同：0
> 
> 时间：2012-05-16T06:57:04.900
> 
> 标签：json, google-maps, jquery

我有一个 json 文件，例如：`{ total: 86, success: true, "rows": [ {"a1_id":"3231VB8",`等等等等。

我的问题是，当使用 jquery 从例如这个 json 文件在谷歌地图中输入标记时，它不会这样做，直到我在 json 文件的开头替换`<total: 86, success: true, "rows":>`为。`<"markers":>`

好的，这样做没问题，但是当我这样做时，来自同一个 url/文件的另一个 json 请求被破坏了。

问题：我应该如何处理这个问题？有没有办法改变gmap代码来处理我的json文件或sh：

```
function(data) { 
    $.each( data.markers, function(i, m) {
            $('#map_canvas').gmap('addMarker', { 'position': new google.maps.LatLng(m.latitude, m.longitude), 'bounds':true } ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:38:16.557

所以本质上你是在问如何将 JSON 中的“rows”属性重命名为“markers”，因为“markers”是那些特定的 JS/jQuery 代码使用的？并且您需要在该代码中进行更改，以便现有的 JSON 可以被其他进程按原样使用？

如果是这样，为什么不在你的 JS/jQuery 代码中做以下小改动来引用“rows”属性而不是“markers”：

```
...
    $.each( data.rows, function(i, m) {
... 
```

唯一的变化是传递给的第一个参数`$.each()`。JSON 中的“total”和“success”参数实际上不需要删除，因为您显示的代码（在我更改之前和之后）只是忽略了它们。

如果由于某种原因您需要实际修改`data`对象，我假设它是通过解析 JSON 创建的，您可以尝试以下操作：

```
 data = { "markers" : data.rows }; 
```

也就是说，创建一个具有单个属性“markers”的新对象，该属性从原始对象引用“rows”数组，然后重新分配`data`变量以指向新对象。然后只需`$.each()`按原样使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:35:58.410

在使用[JSONLint](http://jsonlint.com/)验证我的 JSON 输出后，我收到了在字符串“total”和“success”周围添加引号的建议。所以我做到了，并且 JSON 输出正确验证。

这导致 ExtJs 和 Google Maps 接受我的 JSON 文件。

请记住：如果一个应用程序正在接受您的 JSON (ExtJs)，那不会说另一个也接受。（谷歌地图）。

# html - 基于子元素的 CSS 动态高度

> ID：10613469
> 
> 赞同：3
> 
> 时间：2012-05-16T06:57:42.253
> 
> 标签：html, css, height

很酷，所以我已经用 HTML fo 探索 CSS 大约一个月了，我仍在努力解决的一件事是如何让元素根据孩子的高度调整其高度。例如，我有一个新闻按钮，它会将我带到一个页面，该页面包含指向不同时间打印的文章存档的链接，文章的长度各不相同，但包含所有内容的内容元素总是允许文章溢出和然后我必须使用滚动，是否可以设置高度以适应里面的儿童元素。

我试过了：

```
height: 100%; 
```

如果我检查元素，指标说它是 647px。然后它就在那里

```
height: auto; 
```

将高度设置为 200px，一切都溢出了。

这是一段html嵌套..

```
 <div id="news_head">
 </div>
 <div id="news_content">
   <div id="news_scroll">
   </div>
   <div id="news_main_page">
   </div>
   <div id="side_archive">
   </div>
 </div>
 <div id="disquss_section">
 </div> 
```

用于此的 CSS 是：

```
#news_head {
  border: 1px solid red;
  height: 200px;
  width: 100%;
}

#news_content {
  border: 1px solid red;
  height: 100%;
  width: 1200px;
  margin: 5px auto;
}

#news_scroll {
  border: 1px solid green;
  width: 1198px;
  height: 200px;
}

#news_main_page {
  border: 1px solid blue;
  width: 988px;
  height: 430px;
  float: left;
}

#side_archive {
  border: 1px solid yellow;
  width: 200px;
  height: 430px;
  float: right; 
} 
```

我使用边框只是为了直观地了解正在发生的事情。我已经阅读了一些东西，但我不确定如何在这里实现它，[http://css-tricks.com/snippets/css/center-div-with-dynamic-height/](http://css-tricks.com/snippets/css/center-div-with-dynamic-height/)。任何帮助，我也在使用 JavaScript 和 jQuery，所以欢迎任何建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T07:02:01.720

如果您在容器 div 中浮动内容（如果它没有任何其他非浮动内容），它将保持为 0，但要解决此问题，您可以添加

```
<div style="clear: both"></div> 
```

在你的父元素结束之前（所以就在你的父元素之前）。我不是最优雅的解决方案，但就像魅力一样，而且我知道没有真正的替代方案。

# java - PHP 中 Java 的 HashSet 等价物

> ID：10613473
> 
> 赞同：6
> 
> 时间：2012-05-16T06:58:04.400
> 
> 标签：java, php, set, hashset

我对 php 比较陌生，很难找出要使用的正确数据结构。假设我有一个类 FooBar`equals()`并`hashCode()`正确实现。php 中什么样的集合（如果有的话）最类似于 Java 的 hashSet？我需要一个没有重复的对象集合。有人建议使用数组和函数`array_key_exists`，但我只是想知道是否还有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:32:21.993

标准 PHP 库 (SPL) 提供的 PHP 编程语言中可用的数据结构很少。尽管与 Java Collections Framework 实现相比它们算不上什么，但有时它们通过提供比数组更高级的功能非常有用。[您可以在此处](http://www.php.net/manual/en/spl.datastructures.php)找到可用数据结构的文档。

PHP 中最类似于​​ HashSet 的数据结构是[SplObjectStorage](http://www.php.net/manual/en/class.splobjectstorage.php)。

从文档中：

> SplObjectStorage 类提供从对象到数据的映射，或者通过忽略数据，提供对象集。这种双重目的在许多需要唯一标识对象的情况下很有用。

PHP 中的对象不实现`equals()`和`hashCode()`方法。对象的唯一性由`spl_object_hash()`函数返回的值决定。类使用相同的值`SplObjectStorage`来唯一标识它包含的对象。该`SplObjectStorage::getHash($object)`方法可用于检索`SplObjectStorage`集合中包含的对象的标识符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T07:21:08.717

从 5.2 版开始，Php 提供了 SplObjectStorage，它提供了 Java 的 Set 功能：

*   关心唯一性（同一个对象不能重复添加）
*   易于遍历集合
*   易于检查集合中是否存在对象

检查[http://technosophos.com/content/set-objects-php-arrays-vs-splobjectstorage](http://technosophos.com/content/set-objects-php-arrays-vs-splobjectstorage)的使用示例

# iphone - 无法从另一个视图控制器加载 webview 请求

> ID：10613476
> 
> 赞同：0
> 
> 时间：2012-05-16T06:58:08.807
> 
> 标签：iphone, ios5, xcode4.2

我正在实现 FB 类型的功能

1.  从左侧的数据库中填充菜单列表。
2.  单击任何菜单会在 webview 中加载相关网页。

Menu 和 Webview 都在不同的视图控制器中

单击菜单时，我向第一个视图控制器发送通知消息，并在通知消息中编写代码到 loadRequest。

但是，这是行不通的。我能够从第一个 Viewcontroller 成功加载请求。但是不可能从另一个 viewcontroller 执行。

这是我的代码：

**视图控制器 1：**

在 ViewLoad

```
NSNotificationCenter *note = [NSNotificationCenter defaultCenter];
[note addObserver:self selector:@selector(eventDidFire:) name:@"ILikeTurtlesEvent" object:nil];

    - (void) eventDidFire:(NSNotification *)note {
            web.delegate=self;
        [web loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]]];
     } 
```

在**视图控制器 2 中：**

```
NSNotificationCenter *note = [NSNotificationCenter defaultCenter];
[note postNotificationName:@"ILikeTurtlesEvent" object:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:32:44.013

这可能是您尝试做的另一种选择：

```
viewcontroller1.h:
-(void)clickmenu:(id)sender;

viewcontroller1.m:
-(void)clickmenu:(id)sender
{
  viewcontroller2 *obj = [[viewcontroller2 alloc] initWithNibName: @"viewcontroller2" bundle: [NSBundle mainBundle]];
[obj Loadwebview:[NSURL urlwithstring:@"http://www.google.com"]];
}

ViewController2.h:
-(void)Loadwebview:(NSURL *)url;
viewcontroller2.m:
-(void)Loadwebview:(NSURL *)url
{
      web.delegate=self;
    [web loadRequest:[NSURLRequest requestWithURL:url]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T06:05:30.920

我找到了我删除该行的解决方案：

web.delegate=自己；和代码工作！奇怪的 ！！但是是真的 。这是我的工作代码：

```
- (void) eventDidFire:(NSNotification *)note {
  // web.delegate=self;
 [web loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://192.168.11.77:5200/test/test.html"]]];

} 
```

希望对其他人有帮助！！！“：）

# ruby-on-rails - Rails - nil：NilClass（ActiveAdmin）的未定义方法“find”

> ID：10613477
> 
> 赞同：0
> 
> 时间：2012-05-16T06:58:09.443
> 
> 标签：ruby-on-rails, ruby, model, activeadmin

假设我有 2 个控制器。

广告客户活动和广告客户广告。

我需要advertisingr_ad 成为advertisingr_campaign 的孩子，但是由于我对activeadmin（以及ruby 本身）还很陌生，所以我遇到了一些问题。我正在尝试使用 ActiveAdmin 做一个嵌套资源。

下面的代码确实注册了所需的路线

```
ActiveAdmin.register Advertiser::Ad do
  belongs_to :advertiser_campaign
end 
```

但是当我尝试访问 /admin/advertiser_campaigns/1/advertiser_ads 时出现错误

```
NoMethodError in Admin::AdvertiserAdsController#index
undefined method `find' for nil:NilClass 
```

这可能意味着路由工作得很好，问题出在控制器的某个地方。我试图通过做这样的事情来覆盖 ActiveAdmin 控制器

```
controller do
  def index
    index! do |format|
      @advertiser_ads = Advertiser::Ad.all
      format.html
    end
  end
end 
```

但是绝对没有效果。虽然我看到控制器尝试执行我自定义覆盖的控制器但遇到相同的错误。

在我的 ads_campaign 模型中，我有

```
has_many :advertiser_ads, :class_name => 'Advertiser::Ad' 
```

在我的 ads_ad 模型中

```
belongs_to :advertiser_campaign, :class_name => 'Advertiser::Campaign' 
```

任何有关此问题的帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:17:17.123

[文档](http://rubydoc.info/github/gregbell/active_admin/master/ActiveAdmin/Namespace)说任何资源都在命名空间下注册。从您的示例看来，您正在尝试在`Advertiser::Ad`没有明确指定命名空间的情况下使用类。尝试：

```
AdminAdmin::Advertiser::Ad 
```

无论如何，如果这没有帮助，请使用 rails 控制台（检查已注册的命名空间/类）来更快地找出问题的根源。

# asp.net - 如何扩展 ASPNET_ISAPI 过滤器？

> ID：10613478
> 
> 赞同：0
> 
> 时间：2012-05-16T06:58:14.433
> 
> 标签：asp.net, .net, multi-tenant

有没有办法扩展标准 aspnet_isapi 过滤器？

我想覆盖负责创建应用程序域和托管环境的应用程序管理逻辑 - 这是 ApplicationManager 类的责任。我想扩展它的原因是为我的 Web 应用程序实现多租户支持，其中多个租户可以在同一个应用程序中运行。由于不同的租户应该能够加载同一程序集的不同版本，因此需要将它们隔离在不同的应用程序域中。因此，需要为每个租户创建新的应用程序域。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T11:08:36.343

有什么运气吗？我也有类似的问题。作为调查的结果 - 我认为编写自己的 ApplicationManager 不是一个好的（甚至可能的）方法。ApplicationManager 处理低级请求处理逻辑，而多租户则更高，更接近应用程序逻辑（业务逻辑）。看看创建子 AppDomains 方法。这可能是正确的方法。

# java - 在Java中创建对象时重载构造函数VS传递null

> ID：10613479
> 
> 赞同：5
> 
> 时间：2012-05-16T06:58:18.807
> 
> 标签：java, constructor

如果一个类在对象创建过程中需要多个字段信息，并且它允许的信息更少。比我们有两个选择
1\. 提供多个构造函数，或
2\. 允许客户端在创建对象时传递空参数。

其中，这是最佳实践。例如：
案例 1：

```
public class Test {
    Test(A ob1,B ob2, C ob3){

    }
    Test(A ob1,B ob2){
            this(ob1, ob2, null);    
    }
    public static void main(String args[]){
        Test ob = new Test(new A(),new B());
    }
} 
```

案例2：

```
public class Test {
    Test(A ob1,B ob2, C ob3){

    }
    public static void main(String args[]){
        Test ob = new Test(new A(),new B(), null);
    }
} 
```

我在同一个班级中使用了主要方法。请在其他类中考虑这些主要方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T07:13:44.050

使用多个构造函数是最好的。许多标准 API 库也实现了它。此外，它使代码松散耦合，而不是通过传递显式“null”值来创建对象的好习惯。

案例 2 增加了高耦合的机会。

除了主要问题：阅读更多：[在 Java 中处理多个构造函数的最佳方法](https://stackoverflow.com/questions/581873/best-way-to-handle-multiple-constructors-in-java)

**编辑：**

使用命名工厂方法来构造对象是更好的做法，因为它们比具有多个构造函数更具自我记录性。[Joshua Bloch 的有效 Java]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:01:19.863

案例一是偏爱。这是在 API 中具有此选项的大多数类中完成的。这也意味着如果需要，您可以在未来的版本中更改第二个/第三个/... 参数，而无需升级对构造函数的调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T07:08:58.297

案例 3，提供将创建对象的方法。

```
public class A {

  public static A create(B b) {
     A a = new A();
       a.setB(b);
  }

  public static A create(B b, C c) {
     A a = create(b);
       a.setC(c);

   return a;
  }

  private A() {} 

  public void setB(B);
  public void setC(C);

} 
```

构造函数应该能够创建对象以防止内存泄漏。其中较少的参数可以最大程度地减少发生 NullPointerException 的情况。提供像呈现的工厂方法将降低风险并改善对对象的控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T07:08:11.140

第一种情况是最好的。为什么要避免使用多个构造函数？除非你不打电话给他们，否则他们不会打扰你。拥有不同的构造函数也增加了代码的可读性，因为很清楚实例化对象需要哪些参数，而在 null 情况下，您总是必须查看不需要哪些参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T07:41:28.050

没有输入空值，因此您可能会为未来的错误和怀疑创造机会

```
 new Thing( myA, null, null) 
```

这里不清楚目的是传递一个空 B 和一个空 C，

```
 new Thing (myA) 
```

是明确的

# java - 定位问题 - 在 JPanel 中动态添加/删除

> ID：10613480
> 
> 赞同：1
> 
> 时间：2012-05-16T06:58:24.823
> 
> 标签：java, swing, windowbuilder

首先，对不起我的英语，它不是我的母语。我尽力做到最好

我的显示器有一些问题。我有一个 java.util.List 的 Panel 里面已经有一些元素。我想在创建 JDialog 时将它们插入 JPanel。我的 JDialog 中有两个 JButton，'add' 和 'delete'，分别在 JPanel 的底部添加一个新的 JPanel，另一个删除最后添加的 JPanel。我的问题是两个 JPanel 之间存在很大差距，无论添加多少 JPanel，我不知道为什么......两个演示图片：

* * *

![我的 JDialog 与 3 JPanel](../Images/699b528908aecc7b9de9e0766190a890.png)

## ![我的 JDialog 有超过 3 个 JPanel](../Images/a2337928800d22664f73c7cbb910493a.png)

我的布局是 GridBagLayout，我使用 WindowBuilder 和 Eclipse Indigo。这是我的代码。我认为问题来自我分配给 GridBagConstraints 中的锚的值...
listChamps 是我要插入的 JPanel 的列表
panelListFile 是插入 listChamps 元素的 JPanel

```
for (int i = 0; i < listChamps.size (); ++i) {
            GridBagConstraints gbc_pan = new GridBagConstraints ();
            gbc_pan.gridwidth = 1;
            gbc_pan.fill = GridBagConstraints.HORIZONTAL;
            gbc_pan.anchor = GridBagConstraints.NORTH;
            gbc_pan.gridx = 0;
            gbc_pan.gridy = i;
            panelListFiles.add (listChamps.get (i), gbc_pan);
 } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:07:17.737

我使用了两种方式，在这两种情况下都应该添加一个[JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)嵌套的[JComponent](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)，

*   [JPanel 与 JComponents 到 JTable](https://stackoverflow.com/a/6355910/714968)

*   [JPanel 与 JComponents 到另一个容器](https://stackoverflow.com/a/7224745/714968)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:34:36.797

您可以在 JPanel 中使用 JPanel，方法是使用不同的样式添加和重新排列它们的布局。

# java - java多线程和mysql

> ID：10613485
> 
> 赞同：2
> 
> 时间：2012-05-16T06:58:36.133
> 
> 标签：java, mysql, multithreading

我有一个运行一些多线程进程的应用程序。
在每个线程中，我与我的 mysql 数据库共享相同的连接，该连接存储对线程运行很重要的信息。

通常在多线程时我必须检查同步，所以我想同时共享相同的资源，但是我必须对 mysql 做同样的事情吗？

我正在使用 innodb ，它在使用它时会锁定行，我不知道我是否也需要在我的代码中查看对它的访问权限。

据我了解，我是否这样做并不重要，因为服务器会自行管理其连接，但我又不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:50:22.087

`Connection`java中的s不保证是线程安全的。

除此之外，Mysql（尤其是 innodb）可以安全地处理多个连接。

在对您的问题的评论中（由 Emil Vikström 提出），针对您的问题提出了解决方案；

（编辑）我引用：

> 您是否已经检查了处理该主题的多个问题之一？例如：[Java 线程和 MySQL](https://stackoverflow.com/questions/2167819/java-threads-and-mysql)以及[MySQL 连接器/JDBC 线程是否安全？](https://stackoverflow.com/questions/1209693/is-mysql-connector-jdbc-thread-safe)——埃米尔·维克斯特罗姆

# iphone - 如何获取巨大视频文件的切片数据

> ID：10613487
> 
> 赞同：3
> 
> 时间：2012-05-16T06:58:51.833
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsdata

我想将视频文件加载到 NSData 中，如果我使用 dataWithContentsOfFile:，当文件太大时它会消耗大量内存。如何获取具有偏移量和长度的文件的特定数据。我需要分段上传视频文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:47:33.287

这

```
NSData *data = [NSData dataWithContentsOfMappedFile:<path>];
NSRange first4k = {0, MIN([data length], 4096)};
return [data subdataWithRange:first4k]; 
```

只为您提供文件的前 4k，而无需加载所有文件。

但是 dataWithContentsOfMappedFile: 在 iOS5 中已被弃用。

我想 - 警告：未经测试！-

```
+ (id)dataWithContentsOfURL:(NSURL *)aURL options:(NSDataReadingOptions)mask error:(NSError **)errorPtr 
```

掩码设置为

```
NSDataReadingMappedIfSafe 
```

或者

```
NSDataReadingMappedAlways 
```

也应该做这项工作。

但是，这在 iOS5 中是新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:54:12.400

您可以使用[NSFileHandle](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilehandle_Class/Reference/Reference.html)然后使用 seekToFileOffset: 搜索并使用[readDataOfLength](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsfilehandle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileHandle/readDataOfLength%3a) [:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsfilehandle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileHandle/seekToFileOffset%3a)读取数据块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T16:57:48.297

这是一篇可能对[Cocoa is my Girlfriend有帮助的文章](http://www.cimgf.com/2012/02/17/extending-nsdata-and-not-overriding-dealloc/)

> 几周前，Matt Long 遇到了一个应用程序内存不足的问题。他有一个巨大的数据文件需要加载和处理，而内存占用超出了应用程序的承受能力。它可以很好地加载到 NSData 中，但在他完成之前，应用程序会因内存不足而死机。

# java - Sql INSERT into Statement 错误

> ID：10613493
> 
> 赞同：-2
> 
> 时间：2012-05-16T06:59:19.397
> 
> 标签：java, sql, database

请帮我找出语法错误，我已尽力指出但不能。

```
 String sql= "insert into ctable ("

        +"id,"
        +"name,"
        +"address,"
        +"phone,"
        +"email,"
        +"sale_Limit )"

        + "values (" +txtid.getText()+ ",'" +txtname.getText()+ "','" +txtaddress.getText()

        +"','" + txtphone.getText()+ "','"+ txtemail.getText()+ "','"+txtsaleLimit.getText()

        + "')"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T07:08:18.410

*直接*的问题很可能是缺少引号。

*更大*的问题是您将数据直接包含在 SQL 中。您应该改用参数化 SQL（通过 a `PreparedStatement`），以[避免 SQL 注入攻击](http://bobby-tables.com)，将代码 (SQL) 与数据（值）分开，并避免由于字符串转换而导致数据丢失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T07:21:08.797

`name`是 Access 中的保留字，因此您应该将列名称更改为其他名称。

正如其他答案指出的那样，我建议您查看[PreparedStatement](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)以避免可能的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，并且[PreparedStatement](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)也将帮助您转义特殊字符，例如`'`避免 SQL 语法错误的字符。

[访问保留字。](http://support.microsoft.com/kb/286335)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T07:02:08.850

忘记单引号了？

```
" +txtid.getText()+ " 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T07:10:36.753

也许你需要一个空间`"sale_Limit )"`和`"values"`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-16T07:07:36.257

INSERT INTO table_name (field1, field2,...fieldN) VALUES (value1, value2,...valueN);

从字段名称部分删除引号和加号。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-16T07:11:52.353

+"sale_Limit )" - 应该是空格，改为：

```
+"sale_Limit ) " 
```

"values (" +txtid.getText()+ ",'" - 缺少引号，改为：

```
"values ('" +txtid.getText()+ ",'" 
```

# c - 如何计算C中的整数边界

> ID：10613495
> 
> 赞同：2
> 
> 时间：2012-05-16T06:59:24.277
> 
> 标签：c

我正在开发一个程序，我需要知道 C 中带符号整数的确切边界。我的问题是，如果你编译一个依赖于这个边界的程序，你是否必须检查本地环境以查看有多少位用来持有价值？

我会尝试更好地解释这一点。每当我编写一个使用有符号整数的 C 程序，并且该程序的一部分依赖于大数时，我担心一个简单的计算会溢出：比如 4,294,967,296 + 1。会发生什么？这个数字会滚动到负数吗？

它取决于我如何编译程序（换句话说，我用来编译程序的编译器）还是取决于我的 .exe 运行的环境？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T07:02:55.013

((sizeof(n) + sizeof(int) - 1) & ~(sizeof(int) - 1))

这应该给你限制

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:02:55.427

这仅取决于您如何编译程序，即您不需要在运行时检查“环境”。对于任何重要的事情，您应该使用固定大小的整数类型`<stdint.h>`，例如`int32_t`。

您可以使用 中的常量检查整数类型的范围`<limits.h>`，例如`INT_MAX`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T07:13:21.573

标头`#include <limits.h>`包含您需要的常量，包括：

*   `CHAR_BIT`- a 中的位数`char`。
*   `CHAR_MAX`- 普通的最大值`char`。
*   `SCHAR_MAX`- a 的最大值`signed char`。
*   `UCHAR_MAX`- 的最大值`unsigned char`。
*   `SHRT_MAX`- a 的最大值`short`。
*   `USHRT_MAX`- 的最大值`unsigned short`。
*   `INT_MAX`
*   `UINT_MAX`
*   `LONG_MAX`
*   `ULONG_MAX`
*   `LLONG_MAX`
*   `ULLONG_MAX`

对于有符号类型，还有最小值：

*   `CHAR_MIN`- 平原`char`; 该值可能是 0 或负数。
*   `SCHAR_MIN`
*   `SHRT_MIN`
*   `INT_MIN`
*   `LONG_MIN`
*   `LLONG_MIN`

溢出时无符号算术的行为是完全定义的（产生的值是正确的模数`UINT_MAX + 1`或类似的，取决于操作数的类型）。

溢出时带符号算术的行为是未定义的，避免比调查好得多。任何给定的编译器都可以选择任何方式处理它。传统上，溢出时的值经常被包装（添加两个大的正但有符号的整数通常会产生一个负值）。然而，现代 C 编译器不那么宽容。

如果您真的担心溢出，可以使用上面的整数常量来帮助防止溢出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T07:04:42.457

使用`limits.h`标题。它定义了不同类型的最大值和最小值的常量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T07:05:11.967

> 比如说 4,294,967,296 + 1。会发生什么？这个数字会滚动到负数吗？

如果您添加该数字，如果未签名，它将翻转为 0。如果将最大正数加 1，无符号整数将翻转到最小负数。

# grails - Grails Spring Security插件@Secured注解未解析

> ID：10613500
> 
> 赞同：0
> 
> 时间：2012-05-16T06:59:47.477
> 
> 标签：grails, spring-security

```
package hompage

import logindetails.*
import login.User
import grails.plugins.springsecurity.Secured;

class RedirectController
{
    def springSecurityService

    def index() { }

    /**
     * This method will redirect the user if it has the role "ROLE_ADMIN"
     */
    @Secured(['ROLE_ADMIN'])
    def adminhomepage =
    {
        render(view: "adminhome")
    }

    /**
     * This method will redirect the user if it has the role "ROLE_USER"
     */
    @Secured(['ROLE_USER'])
    def userhomepage=
    {
        render(view: "userhome")
    }
} 
```

这是我的代码，当且仅当角色是 ROLE_ADMIN 时我想重定向到 adminhome，如果角色是 ROLE_USER，我想重定向到 userhome。

请帮助我执行此代码。

我正在使用 netbeans IDE，并且有 import *import grails.plugins.springsecurity.Secured的警告（如通常显示 java 代码的红色感叹号）*

```
unable to resolve class grails.plugins.springsecurity.Secured @ line 5, column 1. 
```

即使存在导入，我也没有得到它有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-27T10:48:01.003

包已从 grails.plugins 重命名为 grails.plugin

```
import grails.plugin.springsecurity.annotation.Secured 
```

请使用这个。参考：[来源](https://grails-plugins.github.io/grails-spring-security-core/v2/guide/requestMappings.html#securedAnnotations)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:13:17.793

检查您的类路径，清理 grails，并确保插件存在于 BuildConfig.groovy 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T22:28:22.973

我也在 Netbeans 中收到警告；它对我没有任何影响。一切仍然编译并运行良好。

@Secured 注释不会进行任何类型的重定向 - 它只是确保您在被发送到那里后被允许执行该操作。

我想确保我理解 - 无论他们扮演什么角色，如果有人去 'adminHomeController/index' 他们是重定向到 'adminHomeController/adminhomepage.gsp' 还是他们得到了 'adminHomeController/index.gsp' 服务？如果它们被重定向，则您提供的代码中没有任何内容会导致这种情况。您是否有任何 URL 映射可以做到这一点？

或者真正的问题是如果有人没有 ROLE_USER 他们仍然被允许去'adminHomeController/adminhomepage'？如果发生这种情况，请确保您的配置文件中有以下内容：

```
grails.plugins.springsecurity.securityConfigType = "Annotation" 
```

然后重新启动应用程序并尝试以没有 ROLE_USER 的用户身份访问 adminhomepage。如果他们仍然可以到达那里，请确保他们真的没有 ROLE_USER。

如果这是在登录时重定向某人，则可以使用更全面的方法来处理此问题，例如创建自定义 AuthSuccessHandler，但这有点复杂。要以这种方式进行重定向，我会执行以下操作：

```
 import org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils.*

    def index() {
      if(ifAnyGranted("ROLE_ADMIN")) {
           redirect(action: 'adminhomepage')
      } else if(ifAnyGranted("ROLE_USER")) {
           redirect(action: 'userhomepage')
      }
    }

    def adminhomepage() {
        //admin stuff
    }

    def userhomepage() {
        //user stuff
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T22:52:17.910

我遵循了您评论中列出的相同教程并遇到了同样的问题。如本文所述，“错误”并没有阻止我的任何代码从命令行构建。但是作为一个 Grails 初学者，在游戏中这么早看到那个小小的 Red X 用于最基本的应用程序可能会令人沮丧。

由于应用程序是从命令行编译和运行的，这肯定是 IDE 的问题。我检查了我的插件，但没有列出 Spring Security。右键单击 Plugins -> Open Grails Plugin Manager 并通过 STS 安装。它将卸载并重新安装相同的插件。我正在运行旧版本的 STS，因此希望新版本可以解决此问题。

希望这可以帮助任何偶然发现这个旧线程的人。

# html - 如何在服务器中存储大量图像以便在 html 页面中检索？

> ID：10613501
> 
> 赞同：2
> 
> 时间：2012-05-16T06:59:48.100
> 
> 标签：html, image, storage

**请试着理解我的好奇心**

假设有一个拥有大量用户的 Web 应用程序。每个用户可以上传数百
张图片，登录到他/她的帐户后，可以根据自己的
意愿查看这些图片。

**例如-** **Facebook**等社交网站。

所以我的**问题**是

1.  他们如何在服务器中存储这么多图像？

    *   在数据库中作为 BLOB 数据？或者
    *   在每个用户的服务器专用文件夹中？
2.  如果我选择使用数据库，那么

    *   我是否应该从数据库中检索图像，将它们复制到服务器中的临时文件夹中，并
        通过 <img **src** ='/serverpath/image'> 标记为**每个会话获取图像？**

那么**它们如何存储和检索呢？**
现在在我的应用程序中有用户详细信息（没有照片），每当我点击“查看图像”
链接时，照片应该出现而不刷新页面。根据我对存储和检索的上述担忧，如何使用**Java实现这一点？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T07:01:36.973

保存在文件夹中，保存到数据库的路径。在从 db 检索读取路径并相应地放置 src

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T07:07:47.770

将图像保存在文件夹中，重命名图像以添加一些用户指定的 id 等。要图片，所以你不能有两张具有相同ID的图片。然后将路径保存到数据库中。

我建议使用 ImageMagick 之类的东西将图像保存到文件夹。它可以更改图像的名称，如果您愿意，可以更改它的格式和大小。

当您想向用户显示图片时，只需从数据库中获取该路径，该路径具有指定的用户 ID 来显示属于用户的图片。

如果您确实拥有像 facebook 这样的数百万张图片，则将图像直接保存到数据库不是一个好选择。

而且我不认为您可以使用 java 显示该图像，我建议使用 javascript 和 ajax 。检查此页面以获取帮助，[http://www.w3schools.com/ajax/ajax_example.asp](http://www.w3schools.com/ajax/ajax_example.asp)

# java - 使用 JWebUnit 测试下载文件链接

> ID：10613504
> 
> 赞同：0
> 
> 时间：2012-05-16T07:00:10.003
> 
> 标签：java, jwebunit

我正在使用 JWebUnit。我如何使用它来测试下载链接是否正常工作以及文件是否已实际下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:54:22.093

按下链接后，您可以获取标头 getRequestHeaders() 然后使用然后获取返回的源以进行评估。

# jquery - 找不到错误，错误显示意外令牌非法

> ID：10613506
> 
> 赞同：0
> 
> 时间：2012-05-16T07:00:48.230
> 
> 标签：jquery

找不到错误，我只想用`click`

```
<script type="text/javascript">
$(#register_link).click(function(){
     $(#signin).animate({visibility:hidden;},"slow");
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:02:05.327

使用引号：

```
$('#register_link').click(function() {
    $('#signin').animate({visibility:hidden;},"slow");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:02:30.533

你错过`'`了选择器的引号

```
$('#register_link').click(function()
{
  $('#signin').animate({visibility:hidden;},"slow");
}); 
```

# javascript - jQuery .offset() 未定义 var 对象的类“top”

> ID：10613510
> 
> 赞同：1
> 
> 时间：2012-05-16T07:01:00.327
> 
> 标签：javascript, jquery, debugging, syntax

我正在处理以下代码，并且有点难过为什么我在调试器中遇到错误。显然在以var`var skillsLimit = ...`类开头的行中是未定义的。我在这里错误地设置了var吗？`.top``skillsOffset``skillsOffset`

```
// Set Pie graph to position fixed during a specified range
        var $window = $(window);
        var windowHeight = $(window).height();
        var pos = $window.scrollTop(); //position of the scrollbar
        var $this = $(this);

        $window.bind('scroll', function(){ //when the user is scrolling...
            var pos = $window.scrollTop(); //position of the scrollbar              
            var skillsOffset = $('#skills').offset();
            var skillsLimit = $('#skills').skillsOffset.top + $('#skills').outerHeight();
            if ( pos > skillsOffset ) {
                $('.chartwell-pies').css({ 'position' : 'fixed' });
            }               
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:13:58.297

`$('#skills')`从对 的赋值中删除`skillsLimit`，您已经在上面的行中获得了对象：

```
var pos = $window.scrollTop(); //position of the scrollbar              
var skillsOffset = $('#skills').offset();
var skillsLimit = skillsOffset.top + $('#skills').outerHeight(); 
```

# c# - 如何在不使用 Invoke 方法的情况下组合两个 lambda 表达式？

> ID：10613514
> 
> 赞同：20
> 
> 时间：2012-05-16T07:01:07.260
> 
> 标签：c#, linq, lambda, expression

我有两个 lambda 表达式：

```
Expression<Func<MyEntity, bool>> e1 = i = >i.FName.Contain("john"); 
```

和

```
Expression<Func<MyEntity, bool>> e2 = i => i.LName.Contain("smith"); 
```

i 类型来自我的 poco 实体，不能与调用一起使用。我想在运行时结合这些。

我想在运行时以类似的方式组合这些表达式：

```
Expression<Func<MyEntity, bool>> e3 = Combine(e1,e2); 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-16T07:08:26.400

问题是你不能只是“和”/“或”它们，因为你需要重写内部来改变参数；如果您使用`.Body`from `e1`，但使用*参数*from `e2`，它将不起作用 - 因为`.Body`of`e1`引用了一个未定义的完全不相关的参数实例。如果您使用以下内容，这会更加*明显：*

```
Expression<Func<MyEntity, bool>> e1 = i => i.FName.Contains("john");
Expression<Func<MyEntity, bool>> e2 = j => j.LName.Contains("smith"); 
```

`e1`（注意using`i`和`e2`using之间的区别`j`）

如果我们在不重写参数的情况下将它们组合起来，我们会得到无意义的结果：

```
Expression<Func<MyEntity, bool>> combined =
         i => i.FName.Contains("john") && j.LName.Contains("smith"); 
```

（哇......`j`从哪里来？）

然而; *无论参数的名称*如何，问题都是相同的：它仍然是一个不同的参数。

而且由于表达式是不可变的，您不能只是“就地”交换它。

诀窍是使用“访问者”来重写节点，如下所示：

```
using System;
using System.Linq.Expressions;

class SwapVisitor : ExpressionVisitor
{
    private readonly Expression from, to;
    public SwapVisitor(Expression from, Expression to)
    {
        this.from = from;
        this.to = to;
    }
    public override Expression Visit(Expression node)
    {
        return node == from ? to : base.Visit(node);
    }
}

static class Program
{
    static void Main()
    {
        Expression<Func<MyEntity, bool>> e1 = i => i.FName.Contains("john");
        Expression<Func<MyEntity, bool>> e2 = i => i.LName.Contains("smith");

        // rewrite e1, using the parameter from e2; "&&"
        var lambda1 = Expression.Lambda<Func<MyEntity, bool>>(Expression.AndAlso(
            new SwapVisitor(e1.Parameters[0], e2.Parameters[0]).Visit(e1.Body),
            e2.Body), e2.Parameters);

        // rewrite e1, using the parameter from e2; "||"
        var lambda2 = Expression.Lambda<Func<MyEntity, bool>>(Expression.OrElse(
            new SwapVisitor(e1.Parameters[0], e2.Parameters[0]).Visit(e1.Body),
            e2.Body), e2.Parameters);
    }
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2019-03-13T11:44:16.113

也许用一个简单的 if 语句？

```
using (MyDataBaseEntities db = new MyDataBaseEntities())
{
if (db.People.Any(p => p.FirstName == FirstNameText.Text && p.LastName == LastNameText.Text))
    {
        //Do something
    }
} 
```

# facebook - 如何通过一个请求在多个朋友墙上发布消息？

> ID：10613519
> 
> 赞同：0
> 
> 时间：2012-05-16T07:01:12.973
> 
> 标签：facebook, facebook-graph-api, post, message

有一个选项可以使用带有[https://graph.facebook.com/FRIEND_UID/Feed?accesstoken=XXXXXXXXXXXXXxxxxxx的图形 api 在朋友的墙上发布消息](https://graph.facebook.com/FRIEND_UID/Feed?accesstoken=XXXXXXXXXXXXXxxxxxx)

我想在“n”个人墙上发布一条消息……一次只有一个请求……

有什么选择吗？

提前致谢..

# sql - SQL 脚本语法错误

> ID：10613523
> 
> 赞同：0
> 
> 时间：2012-05-16T07:01:24.013
> 
> 标签：sql, sqlite, syntax-error

我在我的项目中使用 SQLite，我需要编写 SQL 查询来检索客户订单的总成本。这是查询：

```
SELECT SUM(g.cost * og.amount) 
       * (CASE om.include WHEN 0 THEN 0.0  ELSE m.markup_pct / 100) total_cost

FROM goods g JOIN orders_goods og ON g.good_id = og.good_id
    JOIN orders_markups om ON om.order_id = og.order_id
        JOIN markups m ON om.markup_id = m.markup_id 
                 AND om.view_class_id = m.markup_id
WHERE og.order_id = 0; 
```

但是当我通过 sqlite3 在我的数据库上执行上述查询时，它会抱怨：

```
Error: near line 1: near ")": syntax error 
```

你知道脚本有什么问题吗？

任何帮助将不胜感激。

**PS：**我没有附上数据库结构，因为错误是语法错误，所以错误与数据库的结构无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:04:26.853

case 语句中存在语法错误：它缺少`END`：

```
(CASE om.include WHEN 0 THEN 0.0  ELSE m.markup_pct / 100 **END**) total_cost 
```

# android - Android : RemoteViews 和 setOnClickPendingIntent

> ID：10613524
> 
> 赞同：0
> 
> 时间：2012-05-16T07:01:26.140
> 
> 标签：android, android-pendingintent

我有一个小部件，我想在用户单击按钮时更改图像。我该怎么做 ？进入 RemoteView 方法我只找到 setOnClickPendingIntent...我必须开始新的意图并进入这个新的活动我必须实现更改？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:37:54.023

看到这个例子：[https ://github.com/commonsguy/cw-advandroid/tree/master/AppWidget/PairOfDice](https://github.com/commonsguy/cw-advandroid/tree/master/AppWidget/PairOfDice)

源代码如下

```
 @Override
  public void onUpdate(Context ctxt, AppWidgetManager mgr, int[] appWidgetIds) {
    ComponentName me=new ComponentName(ctxt, AppWidget.class);

    mgr.updateAppWidget(me, buildUpdate(ctxt, appWidgetIds));
  }

  private RemoteViews buildUpdate(Context ctxt, int[] appWidgetIds) {
    RemoteViews updateViews=new RemoteViews(ctxt.getPackageName(), R.layout.widget);

    Intent i=new Intent(ctxt, AppWidget.class);

    i.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
    i.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

    PendingIntent pi=PendingIntent.getBroadcast(ctxt, 0 , i, PendingIntent.FLAG_UPDATE_CURRENT);

    updateViews.setImageViewResource(R.id.left_die, IMAGES[(int)(Math.random()*6)]); 
    updateViews.setOnClickPendingIntent(R.id.left_die, pi);
    updateViews.setImageViewResource(R.id.right_die, IMAGES[(int)(Math.random()*6)]); 
    updateViews.setOnClickPendingIntent(R.id.right_die, pi);
    updateViews.setOnClickPendingIntent(R.id.background, pi);

    return(updateViews);
  } 
```

# javascript - 如何将表单中的值添加到表中？

> ID：10613525
> 
> 赞同：0
> 
> 时间：2012-05-16T07:01:31.533
> 
> 标签：javascript

我需要将表单中的给定值添加到表中，如何使用 java 脚本来实现。

我已经包含了代码。到目前为止我做了什么。

在这里，我创建了一个表单和两个命令按钮来添加和删除一行，

现在我需要的是我在我创建的表格中输入的值应该反映在我创建的表上。

请帮助我实现这一目标。

```
 <script language="javascript">
    function deleteRow(i)
    {
    document.getElementById('table1').deleteRow(i)
    }
    function addRow()
    {
    var tbody = document.getElementById("table1").getElementsByTagName("tbody")[0];
    var row = document.createElement("TR");
    var cell1 = document.createElement("TD");
    var inp1 =  document.createElement("INPUT");
    inp1.setAttribute("type","text");
    inp1.setAttribute("value","");
    cell1.appendChild(inp1);
    var cell2 = document.createElement("TD");
    var inp2 =  document.createElement("INPUT");
    inp2.setAttribute("type","text");
    inp2.setAttribute("value","");
    cell2.appendChild(inp2);
    var cell3 = document.createElement("TD");
    var inp3 =  document.createElement("INPUT");
    inp3.setAttribute("type","text");
    inp3.setAttribute("value","");
    cell3.appendChild(inp3);
    var cell4 = document.createElement("TD");
    var inp4 =  document.createElement("INPUT");
    inp4.setAttribute("type","button");
    inp4.setAttribute("value","Delete");
    inp4.setAttribute("onClick", "deleteRow(this.parentNode.parentNode.rowindex)");
    cell4.appendChild(inp4);

    row.appendChild(cell1);
    row.appendChild(cell2);
    row.appendChild(cell3);
    row.appendChild(cell4);
    tbody.appendChild(row);

   //alert(row.innerHTML);
    }
    </script>

    <tr>
    <td>
    F.Name : &nbsp;
    </td>
    <td><input type="text" value="" id="fname"></td>
    </tr>
    <br> <br>
    <tr>

    <td>
    L.Name : &nbsp;
    </td>

    <td><input type="text" value="" id="lname"></td>
    </tr>
    <br> <br>
    <tr>

    <td>
    items  : &nbsp;  &nbsp;
    </td>
    <td width="98"><select name="select" id="item">
        <option value="item1" selected="selected">item1</option>
        <option value="item2">item2</option>
        <option value="item3">item3</option>
        <option value="item4">item4</option>
        <option value="item5">item5</option>

      </select></td>

    </tr>
    <br> <br>
    <input type="button" value="Add Row" onClick="addRow();">
    <br> <br>
    <table id="table1">
    <tbody>
    <tr>
    <td><input type="text" value=""></td>
    <td><input type="text" value="" width="10"></td>
    <td><input type="text" value="" width="10"></td>

    <td><input type="button" value="Delete"         onclick="deleteRow(this.parentNode.parentNode.rowIndex)">

    </td>
    </tr>
    </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:30:56.603

当您手动创建行时，为什么不管理一个 ID 逻辑，该逻辑将生成和管理动态分配给列的 ID，然后您可以轻松地填充它们，只是您需要这样做。

```
document.getelementbyID("IDofElement").innerHTML = your content. 
```

您肯定需要使用一种逻辑来生成 ID 并将其分配给动态元素

# html-email - 为什么 hotmail 不显示此 html 电子邮件的正文？

> ID：10613528
> 
> 赞同：1
> 
> 时间：2012-05-16T07:01:43.173
> 
> 标签：html-email, hotmail

我通过 codeigniter 发送电子邮件，hotmail 收件人收到一封看似空的电子邮件。![在此处输入图像描述](../Images/47db3e3112e5f4d4c74048045e25ae12.png)

但是，如果您显示来源，则主体是完整的：

```
 x-store-info:sbevkl2QZR7OXo7WID5ZcdV2tiiWGqTnL8LqRHZDpO1a6RfqJUb9Bvk56X3BJKAg6cjaVhmE0UEtHLPiBFT8cnf1LZrSPERjUEe8skwDm3KAgvehRwVK6+cJhj4xrCbMEtL9MZV6cCY=
Authentication-Results: hotmail.com; sender-id=pass (sender IP is 89.31.151.18) header.from=webmaster@biocoupons.fr; dkim=none header.d=biocoupons.fr; x-hmca=pass
X-SID-PRA: webmaster@biocoupons.fr
X-DKIM-Result: None
X-Message-Status: n:0:n
X-SID-Result: Pass
X-AUTH-Result: PASS
X-Message-Delivery: Vj0xLjE7dXM9MDtsPTA7YT0wO0Q9MTtHRD0xO1NDTD0w
X-Message-Info: NhFq/7gR1vRbK5wwd2CCPiz2FoG/apC9Nlwn9QDQUkFtCAY0+3pBZaTO9tRcEil5WQ1UlFPTmVO6YI0VFRvEqJtfBxGnyrZjARsdKFYGzasctOU2tO5XGDWuESbcCr0Hq4XO6B1tyQE=
Received: from brunetprod.nexen.net ([89.31.151.18]) by SNT0-MC3-F43.Snt0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4900);
     Tue, 15 May 2012 23:44:54 -0700
Received: by brunetprod.nexen.net (Postfix, from userid 33)
    id 9DB1030C00A; Wed, 16 May 2012 08:44:53 +0200 (CEST)
To: ecolehaiti@live.fr
Subject: =?utf-8?Q?Vous_avez_oubli=c3=a9_votre_mot_de_passe_sur_Bio_Coupons=3f?=
X-PHP-Script: www.biocoupons.fr/index.php/auth/forgot_password for 81.56.219.94
User-Agent: CodeIgniter
Date: Wed, 16 May 2012 08:44:53 +0200
From: "Bio Coupons" <webmaster@biocoupons.fr>
Reply-To: "Bio Coupons" <webmaster@biocoupons.fr>
X-Sender: webmaster@biocoupons.fr
X-Mailer: CodeIgniter
X-Priority: 3 (Normal)
Message-ID: <4fb34ce591593@biocoupons.fr>
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary="B_ALT_4fb34ce59161d"
Return-Path: webmaster@biocoupons.fr
X-OriginalArrivalTime: 16 May 2012 06:44:54.0956 (UTC) FILETIME=[671596C0:01CD332F]

This is a multi-part message in MIME format.
Your email application may not support this format.

--B_ALT_4fb34ce59161d
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit

Bonjour,

Vous avez perdu votre mot de passe ? Pas de panique. 
Pour crÃ©er un nouveau mot de passe, cliquez sur le lien suivant :

http://www.biocoupons.fr/auth/reset_password/
Vous recevez cet email Ã  la demande d'un utilisateur de Bio Coupons . C'est
une Ã©tape de la crÃ©ation d'un nouveau mot de passe sur le site. Si vous
N'AVEZ PAS demandÃ© un nouveau mot de passe, merci d'ignorer cet email, et
votre mot de passe restera inchangÃ©.

Merci,
L'Ã©quipe Bio Coupons

--B_ALT_4fb34ce59161d
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<html>
<head><title>CrÃ©ation d'un nouveau mot de passe sur Bio Coupons</title></h=
ead>
<body>
<div style=3D"max-width: 800px; margin: 0; padding: 30px 0;">
<table width=3D"80%" border=3D"0" cellpadding=3D"0" cellspacing=3D"0">
<tr>
<td width=3D"5%"></td>
<td align=3D"left" width=3D"95%" style=3D"font: 13px/18px Arial, Helvetica,=
 sans-serif;">
<h2 style=3D"font: normal 20px/23px Arial, Helvetica, sans-serif; margin: 0=
; padding: 0 0 18px; color: black;">CrÃ©er un nouveau mot de passe</h2>
Vous avez perdu votre mot de passe ? Pas de panique. <br />
Pour crÃ©er un nouveau mot de passe, cliquez sur le lien suivant :<br />
<br />
<big style=3D"font: 16px/18px Arial, Helvetica, sans-serif;"><b><a href=3D"=
http://www.biocoupons.fr/auth/reset_password/" style=3D"color: #3366cc;">CrÃ©er un nouveau mot de passe</a></b></=
big><br />
<br />
Le lien ne marche pas ? Copiez le lien suivant dans la barre d'adresse de v=
otre navigateur :<br />
<nobr><a href=3D"http://www.biocoupons.fr/auth/reset_password/" style=3D"color: #3366cc;">http://www.biocoupons.f=
r/auth/reset_password/</a></nobr><br /=
>
<br />
<br />
Vous recevez cet email Ã  la demande d'un utilisateur de <a href=3D"http://=
www.biocoupons.fr/" style=3D"color: #3366cc;">Bio Coupons</a>. C'est une Ã©=
tape de la crÃ©ation d'un nouveau mot de passe sur le site. Si vous N'AVEZ =
PAS demandÃ© un nouveau mot de passe, merci d'ignorer cet email, et votre m=
ot de passe restera inchangÃ©.<br />
<br />
<br />
Merci,<br />
L'Ã©quipe Bio Coupons</td>
</tr>
</table>
</div>
</body>
</html>

--B_ALT_4fb34ce59161d-- 
```

另一个邮件程序显示电子邮件正常。我尝试使用和不使用 doctype。

呈现的 HTML：

```
 <div id="mpf0_readMsgBodyContainer" class="ReadMsgBody" onclick="return Control.invoke('MessagePartBody','_onBodyClick',event,event);">
        <div class="SandboxScopeClass ExternalClass" id="mpf0_MsgContainer"></div> 
```

以及正确电子邮件的呈现 html（文本）

```
 <div id="mpf0_readMsgBodyContainer" class="ReadMsgBody" onclick="return Control.invoke('MessagePartBody','_onBodyClick',event,event);">
    <div class="SandboxScopeClass ExternalClass PlainTextMessageBody ContentFiltered" id="mpf0_MsgContainer">
        <pre>Bonjour,<br>Vous venez de vous inscrire à Bio Coupons et nous vous en remercions.<br> 
        </pre>
    </div>
</div> 
```

如您所见，消息正文 div 根本没有填充。我怀疑是 javascript 问题，但为什么它会出现在我的电子邮件中？谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:07:22.330

它只是在 html 代码的顶部缺少一个新行。IE ：

```
--B_ALT_4fb34ce59161d
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<html>
... 
```

代替

```
--B_ALT_4fb34ce59161d
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<html>
... 
```

很好奇，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-03T19:27:08.933

我们在 Web 应用程序中遇到了这个问题，我发现 CSS 注释是我们环境中的罪魁祸首。在尝试上述解决方案均未成功后，我开始逐行、逐节剖析我们的 HTML 模板。

在我们的环境中，我们使用 PreMailer.net ( [https://github.com/milkshakesoftware/PreMailer.Net](https://github.com/milkshakesoftware/PreMailer.Net) ) 从普通样式表中内联我们的 CSS 样式，并通过部分将其注入 HTML 电子邮件模板。在那些部分 CSS 文件中，有 CSS 注释。当我删除这些邮件时，Outlook.com Web 客户端（它还为@hotmail 和@live 帐户提供邮件服务）中正确呈现了电子邮件。

在我们的应用程序中，我将 CSS 注释从`/* */`服务器端注释更改为`@* *@`（我们正在为我们的 .NET MVC 4 应用程序使用剃刀语法），这样就成功了。

# settings - 网络提供商如何发送用于 GPRS/MMS 激活的 OTA 设置

> ID：10613536
> 
> 赞同：0
> 
> 时间：2012-05-16T07:02:11.433
> 
> 标签：settings, ota

提前感谢您的帮助..

移动网络提供商如何将 GPRS/MMS 激活的 OTA 设置发送到兼容 GPRS/MMS 的手机？谁能提供它所遵循的步骤/程序？是否有任何文档通过网络发布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:20:12.737

它是通过 OMA OTA(Opne Mobile Alliance OTA) 设置 SMS/WAP XML 来完成的。它可以是 OTA 兼容设备已知的一种特殊 SMS。[可以在此处](http://www.routomessaging.com/message-sms-types.pmx)找到此类消息的列表。

# android - 在 Android 手机启动时自动运行应用程序

> ID：10613538
> 
> 赞同：1
> 
> 时间：2012-05-16T07:02:17.113
> 
> 标签：android, startup

我想在手机启动时启动我的应用程序

[我只是按照这里](http://www.androidcompetencycenter.com/2009/06/start-service-at-boot/)的教程进行操作，但它在我的设备中不起作用。请看我的方法：

```
public class MyStartUpReciever extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Intent ii = new Intent();
        ii.setAction("com.sat.servicetrack");
        context.startService(ii);
    }

} 
```

这是我的 manifest.xml

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"></uses-permission>

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".ServiceTrack"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
<receiver android:name=".MyStartupReciever">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
        <category android:name="android.intent.category.HOME" />
    </intent-filter>
</receiver>
<service android:enabled="true" android:name=".MyService" >
    <intent-filter>
        <action android:name="com.sat.servicetrack" />
    </intent-filter>
</service>
</application> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:14:26.597

我做了类似的事情，但我正在开始活动。这是我的做法：

在清单中：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

在 Java 代码中：

```
public class BootUpReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        PendingIntent i = PendingIntent.getActivity(context, 0, new Intent(
                context,MainActivity.class),
                Intent.FLAG_ACTIVITY_NEW_TASK);
        AlarmManager mgr = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        mgr.set(AlarmManager.RTC, System.currentTimeMillis() + 20000, i);
    }
} 
```

您的代码似乎是正确的，但请尝试使用 PendingIntent ;) 希望它可以帮助您

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:28:16.700

试试这样......

```
@Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Intent i = new Intent(context, BootingActivity.class);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);
    } 
```

在清单文件中...

```
 <receiver android:name=".BroadcastReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"></action>
                <category android:name="android.intent.category.DEFAULT"></category>
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:15:03.707

您没有调用服务。

像这样的代码。

```
Intent objIntent= new Intent(context, MyService.class);
context.startService(objIntent); 
```

单击[此处](http://rdcworld-android.blogspot.in/2012/03/start-service-from-broadcast-receiver.html)了解如何从广播接收器启动服务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T07:25:11.347

```
 @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        if (intent.getAction().equals("android.intent.action.BOOT_COMPLETED")) {
            context.startService(new Intent(context, BootService.class));
        }
    } 
```

接下来你应该实现 BootService 类扩展服务

# c# - 创建一个 htmlhelper 来拆分文本

> ID：10613544
> 
> 赞同：1
> 
> 时间：2012-05-16T07:02:34.920
> 
> 标签：c#, asp.net-mvc-3, razor

我在表中有一个字段包含这个值“美国|非洲|亚洲”。我想从字段中获取值并拆分文本并将其绑定到下拉列表中。我正在使用 MVC 3。

到目前为止，我有这个：

```
public static SelectList SplitText(this HtmlHelper html, string  texttosplit, string seperator)
{
  return  new SelectList(texttosplit.Split('|'));
} 
```

但我不知道如何在下拉列表中绑定它

```
@Html.DropDownListFor(model => model.EM_opt1Values, @Html.SplitText(this will have an error it will not accept model => model.EM_opt1Values) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:10:45.987

我认为错误在于大写 M。

```
@Html.DropDownListFor(model => model.EM_opt1Values, @Html.SplitText(Model.EM_opt1Values)) 
```

该值应取自`Model`页面，而不是您在 lambda 中定义的模型变量。我无法在 ATM 上验证它，但我很肯定应该这样做。

# android - ExpandableListView 中的固定组

> ID：10613552
> 
> 赞同：9
> 
> 时间：2012-05-16T07:02:59.413
> 
> 标签：android, expandablelistview

在滚动组的项目时，是否有一种标准方法可以将组项目固定到屏幕顶部。我在 ListView 中看到了类似的示例。我应该实现哪些接口或覆盖哪些方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T10:52:21.483

我找到了基于Peter Kuterna 的[Pinned Header ListView](http://blog.peterkuterna.net/2011/05/pinned-header-listview-as-in-contacts.html)和 android 示例 ExpandableList1.java 的解决方案。PinnedHeaderExpListView.java

```
package com.example;

import com.example.ExpandableList.MyExpandableListAdapter;

import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.view.View;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.TextView;

/**
 * A ListView that maintains a header pinned at the top of the list. The
 * pinned header can be pushed up and dissolved as needed.
 */
public class PinnedHeaderExpListView extends ExpandableListView{

    /**
     * Adapter interface.  The list adapter must implement this interface.
     */
    public interface PinnedHeaderAdapter {

        /**
         * Pinned header state: don't show the header.
         */
        public static final int PINNED_HEADER_GONE = 0;

        /**
         * Pinned header state: show the header at the top of the list.
         */
        public static final int PINNED_HEADER_VISIBLE = 1;

        /**
         * Pinned header state: show the header. If the header extends beyond
         * the bottom of the first shown element, push it up and clip.
         */
        public static final int PINNED_HEADER_PUSHED_UP = 2;

        /**
         * Configures the pinned header view to match the first visible list item.
         *
         * @param header pinned header view.
         * @param position position of the first visible list item.
         * @param alpha fading of the header view, between 0 and 255.
         */
        void configurePinnedHeader(View header, int position, int alpha);
    }

    private static final int MAX_ALPHA = 255;

    private MyExpandableListAdapter mAdapter;
    private View mHeaderView;
    private boolean mHeaderViewVisible;

    private int mHeaderViewWidth;

    private int mHeaderViewHeight;

    public PinnedHeaderExpListView(Context context) {
        super(context);
    }

    public PinnedHeaderExpListView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public PinnedHeaderExpListView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void setPinnedHeaderView(View view) {
        mHeaderView = view;

        // Disable vertical fading when the pinned header is present
        // TODO change ListView to allow separate measures for top and bottom fading edge;
        // in this particular case we would like to disable the top, but not the bottom edge.
        if (mHeaderView != null) {
            setFadingEdgeLength(0);
        }
        requestLayout();
    }

    @Override
    public void setAdapter(ExpandableListAdapter adapter) {
        super.setAdapter(adapter);
        mAdapter = (MyExpandableListAdapter)adapter;
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        if (mHeaderView != null) {
            measureChild(mHeaderView, widthMeasureSpec, heightMeasureSpec);
            mHeaderViewWidth = mHeaderView.getMeasuredWidth();
            mHeaderViewHeight = mHeaderView.getMeasuredHeight();
        }
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);
        if (mHeaderView != null) {
            mHeaderView.layout(0, 0, mHeaderViewWidth, mHeaderViewHeight);
            configureHeaderView(getFirstVisiblePosition());
        }
    }

    /** 
     * animating header pushing
     * @param position
     */
    public void configureHeaderView(int position) {
        final int group = getPackedPositionGroup(getExpandableListPosition(position));
        int groupView = getFlatListPosition(getPackedPositionForGroup(group));

        if (mHeaderView == null) {
            return;
        }

        mHeaderView.setOnClickListener(new OnClickListener() {

            public void onClick(View header) {
                if(!expandGroup(group)) collapseGroup(group); 
            }
        }); 

        int state,nextSectionPosition = getFlatListPosition(getPackedPositionForGroup(group+1));

        if (mAdapter.getGroupCount()== 0) {
            state = PinnedHeaderAdapter.PINNED_HEADER_GONE;
        }else if (position < 0) {
            state = PinnedHeaderAdapter.PINNED_HEADER_GONE;
        }else if (nextSectionPosition != -1 && position == nextSectionPosition - 1) {
            state=PinnedHeaderAdapter.PINNED_HEADER_PUSHED_UP;
        }else  state=PinnedHeaderAdapter.PINNED_HEADER_VISIBLE;

        switch (state) {    
            case PinnedHeaderAdapter.PINNED_HEADER_GONE: {
                mHeaderViewVisible = false;
                break;
            }

            case PinnedHeaderAdapter.PINNED_HEADER_VISIBLE: {
                mAdapter.configurePinnedHeader(mHeaderView, group, MAX_ALPHA);
                if (mHeaderView.getTop() != 0) {
                    mHeaderView.layout(0, 0, mHeaderViewWidth, mHeaderViewHeight);
                }
                mHeaderViewVisible = true;
                break;
            }

            case PinnedHeaderAdapter.PINNED_HEADER_PUSHED_UP: {
                View firstView = getChildAt(0);
                if(firstView==null){
                    if (mHeaderView.getTop() != 0) {
                        mHeaderView.layout(0, 0, mHeaderViewWidth, mHeaderViewHeight);
                    }
                    mHeaderViewVisible = true;
                    break;
                }
                int bottom = firstView.getBottom();
                int itemHeight = firstView.getHeight();
                int headerHeight = mHeaderView.getHeight();
                int y;
                int alpha;
                if (bottom < headerHeight) {
                    y = (bottom - headerHeight);
                    alpha = MAX_ALPHA * (headerHeight + y) / headerHeight;
                } else {
                    y = 0;
                    alpha = MAX_ALPHA;
                }
                mAdapter.configurePinnedHeader(mHeaderView, group, alpha);
                //выползание
                if (mHeaderView.getTop() != y) {
                    mHeaderView.layout(0, y, mHeaderViewWidth, mHeaderViewHeight + y);
                }
                mHeaderViewVisible = true;
                break;
            }
        }
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);
        if (mHeaderViewVisible) {
            drawChild(canvas, mHeaderView, getDrawingTime());
        }
    }

} 
```

ExpandableList.java

```
package com.example;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.AbsListView.LayoutParams;
import android.widget.AbsListView.OnScrollListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListAdapter;
import android.widget.SectionIndexer;
import android.widget.TextView;
import android.widget.Toast;

import com.example.PinnedHeaderExpListView.PinnedHeaderAdapter;

/**
 * Demonstrates expandable lists using a custom {@link ExpandableListAdapter}
 * from {@link BaseExpandableListAdapter}.
 */
public class ExpandableList extends Activity {

    MyExpandableListAdapter mAdapter;
    PinnedHeaderExpListView elv;

    private int mPinnedHeaderBackgroundColor;
    private int mPinnedHeaderTextColor;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Set up our adapter
        mAdapter = new MyExpandableListAdapter();
        elv = (PinnedHeaderExpListView) findViewById(R.id.list);

        elv.setAdapter(mAdapter);

        mPinnedHeaderBackgroundColor = getResources().getColor(android.R.color.black);
        mPinnedHeaderTextColor = getResources().getColor(android.R.color.white);

        elv.setGroupIndicator(null);
        View h = LayoutInflater.from(this).inflate(R.layout.header, (ViewGroup) findViewById(R.id.root), false);
        elv.setPinnedHeaderView(h);
        elv.setOnScrollListener((OnScrollListener) mAdapter);
        elv.setDividerHeight(0);
    }

    /**
     * A simple adapter which maintains an ArrayList of photo resource Ids. 
     * Each photo is displayed as an image. This adapter supports clearing the
     * list of photos and adding a new photo.
     *
     */
    public class MyExpandableListAdapter extends BaseExpandableListAdapter implements PinnedHeaderAdapter, OnScrollListener{
        // Sample data set.  children[i] contains the children (String[]) for groups[i].
        private String[] groups = { "People Names", "Dog Names", "Cat Names", "Fish Names" };
        private String[][] children = {
                { "Arnold", "Barry", "Chuck", "David", "Stas", "Oleg", "Max","Alex","Romeo", "Adolf" },
                { "Ace", "Bandit", "Cha-Cha", "Deuce", "Nokki", "Baron", "Sharik", "Toshka","SObaka","Belka","Strelka","Zhuchka"},
                { "Fluffy", "Snuggles","Cate", "Yasha","Bars" },
                { "Goldy", "Bubbles","Fluffy", "Snuggles","Guffy", "Snoopy" }
        };

        public Object getChild(int groupPosition, int childPosition) {
            return children[groupPosition][childPosition];
        }

        public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
        }

        public int getChildrenCount(int groupPosition) {
            return children[groupPosition].length;
        }

        public TextView getGenericView() {
            // Layout parameters for the ExpandableListView
            AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                    ViewGroup.LayoutParams.MATCH_PARENT, 64);

            TextView textView = new TextView(ExpandableList.this);
            textView.setLayoutParams(lp);
            // Center the text vertically
            textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
            // Set the text starting position
            textView.setPadding(36, 0, 0, 0);
            return textView;
        }

        public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
                View convertView, ViewGroup parent) {
            TextView textView = getGenericView();
            textView.setText(getChild(groupPosition, childPosition).toString());
            return textView;
        }

        public Object getGroup(int groupPosition) {
            return groups[groupPosition];
        }

        public int getGroupCount() {
            return groups.length;
        }

        public long getGroupId(int groupPosition) {
            return groupPosition;
        }

        public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
                ViewGroup parent) {
            TextView textView = (TextView) LayoutInflater.from(getApplicationContext()).inflate(R.layout.header, parent, false);
            textView.setText(getGroup(groupPosition).toString());
            return textView;
        }

        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }

        public boolean hasStableIds() {
            return true;
        }

        /**
         * размытие/пропадание хэдера
         */
        public void configurePinnedHeader(View v, int position, int alpha) {
            TextView header = (TextView) v;
            final String title = (String) getGroup(position);

            header.setText(title);
            if (alpha == 255) {
                header.setBackgroundColor(mPinnedHeaderBackgroundColor);
                header.setTextColor(mPinnedHeaderTextColor);
            } else {
                header.setBackgroundColor(Color.argb(alpha, 
                        Color.red(mPinnedHeaderBackgroundColor),
                        Color.green(mPinnedHeaderBackgroundColor),
                        Color.blue(mPinnedHeaderBackgroundColor)));
                header.setTextColor(Color.argb(alpha, 
                        Color.red(mPinnedHeaderTextColor),
                        Color.green(mPinnedHeaderTextColor),
                        Color.blue(mPinnedHeaderTextColor)));
            }
        }

        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
            if (view instanceof PinnedHeaderExpListView) {
                ((PinnedHeaderExpListView) view).configureHeaderView(firstVisibleItem);
            }

        }

        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub

        }

    }

} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <view class="com.example.PinnedHeaderExpListView"
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /> 

</LinearLayout> 
```

header.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/header"
    android:layout_width="match_parent"
    android:layout_height="25dp"
    android:background="@android:color/black" >

</TextView> 
```

它按预期工作，除了单击标题。我希望单击标题将等于单击组项，但事件甚至不会发生并且 OnClickListener 没有获得控制权。为什么 ？

**EDIT :** clicking on header also works if you add following piece of code inside `onCreate()` method of `ExpandableList.java` activity.

```
 elv.setOnGroupClickListener(new OnGroupClickListener() {

        @Override
        public boolean onGroupClick(ExpandableListView parent, View v,
                int groupPosition, long id) {
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T07:53:34.030

I've tried to implement Homo Incognito's solution and encounter the same problem of pinned header not being clickable.

The culprit seems to be the ListView itself consuming all the click event thus not passing any to our 'augmented' header view. So you could try digging in ExpandableListView's click handling implementation, which is quite a mess considering its inheritance all the way up to AdapterView.

Instead of trying to highjack the click from ListView, I try circumnavigating such issue by simulating the header click from the list item underneath it. To do so, you need to implement the `onChildClick` to first see whether the position of the clicked item is underneath the pinned header, if so, then you can relay the click to the true header, if not, then just process the click for that item normally.

In the example below, when the clicked item is underneath the pinned header, I simply made the ListView scrolling to the true header, thus replacing the 'augmented' pinned header with the true header, and the user can take further action from there, e.g. collapsing the group.

*Note that such usability flow works only if you don't have any clickable view on the header items, otherwise you will have to do all the click relay and mapping between the pinned virtual header and the true header yourself with `onInterceptTouchEvent`.*

Following Homo Incognito's Code, in `PinnedHeaderExpListView.java` add the following method:

```
public int getHeaderViewHeight(){
        return mHeaderViewHeight;
    } 
```

in the activity `onCreate`, append the following:

```
elv.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {

        @Override
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {

            // we need to obtain the relative y coordinate of the child view, 
            // not its clicked subview, thus first we try to calculate its true index
            long packedPos = ExpandableListView.getPackedPositionForChild(groupPosition, childPosition);
            int viewPos = elv.getFlatListPosition(packedPos) - elv.getFirstVisiblePosition(); 
            View childView = parent.getChildAt(viewPos); // got it

            if (childView.getTop() < elv.getHeaderViewHeight()*.75){
                 // if the clicked child item overlaps more than 25%
                 //  of pinned header, consider it being underneath
                 long groupPackedPos = ExpandableListView.getPackedPositionForGroup(groupPosition);
                 int groupFlatPos = elv.getFlatListPosition(groupPackedPos);
                 elv.smoothScrollToPosition(groupFlatPos);
            }
            return true;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T08:16:10.200

in Homo Incognito's answer, child view in pinned head view can't click and receive the click event, but i found a way. I put the code at: [https://github.com/chenjishi/PinnedHeadListView](https://github.com/chenjishi/PinnedHeadListView)

```
private final Rect mRect = new Rect();
private final int[] mLocation = new int[2];

@Override
public boolean dispatchTouchEvent(MotionEvent ev) {
    if (mHeaderView == null) return super.dispatchTouchEvent(ev);

    if (mHeaderViewVisible) {
        final int x = (int) ev.getX();
        final int y = (int) ev.getY();
        mHeaderView.getLocationOnScreen(mLocation);
        mRect.left = mLocation[0];
        mRect.top = mLocation[1];
        mRect.right = mLocation[0] + mHeaderView.getWidth();
        mRect.bottom = mLocation[1] + mHeaderView.getHeight();

        if (mRect.contains(x, y)) {
            if (ev.getAction() == MotionEvent.ACTION_UP) {
                performViewClick(x, y);
            }
            return true;
        } else {
            return super.dispatchTouchEvent(ev);
        }
    } else {
        return super.dispatchTouchEvent(ev);
    }
}

private void performViewClick(int x, int y) {
    if (null == mHeaderView) return;

    final ViewGroup container = (ViewGroup) mHeaderView;
    for (int i = 0; i < container.getChildCount(); i++) {
        View view = container.getChildAt(i);

        /**
         * transform coordinate to find the child view we clicked
         * getGlobalVisibleRect used for android 2.x, getLocalVisibleRect
         * user for 3.x or above, maybe it's a bug
         */
        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
            view.getGlobalVisibleRect(mRect);
        } else {
            view.getLocalVisibleRect(mRect);
            int width = mRect.right - mRect.left;
            mRect.left = Math.abs(mRect.left);
            mRect.right = mRect.left + width;
        }

        if (mRect.contains(x, y)) {
            view.performClick();
            break;
        }
    }
} 
```

this is the way i handle the click event in pinned view, override dispatchTouchEvent.

![enter image description here](../Images/8012bc9af20d8583bf3401f656b2cc4c.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-23T15:52:41.877

I have a really simple solution using AXML and C#. The group will never move and children will be expandable and scrollable.

I'll show you here a case where there is only one group in the list, with the closed state at start.

**This solution even works inside scrollviews, viewpagers etc...**

1.  In your view, hard code your group view at the top of your ExpandableListView, with LinearLayout or whatever you need (this will never move ;-) ) and set the visibility property of your ExpandableListView to Gone.

    ```
    <LinearLayout
        android:id="@+id/llExpandableNotes"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginRight="10dp"
        android:layout_marginLeft="10dp"
        android:paddingTop="6dp"
        android:paddingBottom="6dp"
        android:background="@color/colorAliceBlue">
        <TextView
            android:id="@+id/txtExapndableNotes"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_weight="1"
            android:layout_gravity="center|left"
            android:textSize="16dp"
            android:textColor="@color/colorDodgerBlue" />
        <ImageView
            android:id="@+id/imgExpandable"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_gravity="center"
            android:src="@drawable/icon_plus_black" />
    </LinearLayout>
    <ExpandableListView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/expandableListViewNotes"
        android:textColor="@color/colorDodgerBlue"
        android:layout_marginRight="10dp"
        android:layout_marginLeft="10dp"
        android:groupIndicator="@null"
        android:visibility="gone"/> 
    ```

2.  Keep using your Adapter, but we have to hide the group view cause we hard coded it in the first step. Just set a LinearLayout with height property to 0dp

**Adapter**

```
 public override View GetGroupView(int groupPosition, bool isExpanded, View convertView, ViewGroup parent)
    {            
        var inflater = _context.GetSystemService(Context.LayoutInflaterService) as LayoutInflater;
        convertView = inflater.Inflate(Resource.Layout.group_visibility_gone, null);

        return convertView;
    } 
```

**AXML template**

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="0dp" /> 
```

3.  The event that expand the list is fired by the group we just came to hide. So let's keep it always open : `expandableListViewNotes.ExpandGroup(0);`

4.  Let's create an event by ourslef on the hard coded group

    ```
    private void llExpandableNotes_Clicked(object sender, EventArgs e)
    {
        switch(expandableListViewNotes.Visibility)
        {
            case ViewStates.Gone:
                imgExpandable.SetImageResource(Resource.Drawable.icon_minus_red);
                txtExapndableNotes.SetTextColor(Android.Graphics.Color.Red);
                expandableListViewNotes.Visibility = ViewStates.Visible;
                break;

            case ViewStates.Visible:
                imgExpandable.SetImageResource(Resource.Drawable.icon_plus_black);
                txtExapndableNotes.SetTextColor(Android.Graphics.Color.Black);
                expandableListViewNotes.Visibility = ViewStates.Gone;
                break;
        }
    } 
    ```

SUMMARY :

*   We have an ExpandableListView with an invisible group view (height=0dp)
*   We keep it always opened with ExpandGroup method
*   We create a fake header at the top of the ExapandableListView
*   ExpandableListView Visibility property starts with Gone state
*   We create a Click event on the fake group that set visibility on expandableListView to Visible or Gone.

And that's all ! Enjoy !

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-16T08:23:42.993

在适配器中：

```
public void setSelectedPosition(int position){
  this.listChildPosition=position;
} 
```

在getchildview

```
 if (listChildPosition == childPosition) {
        convertView.setBackgroundColor(context.getResources().getColor(
                R.color.white));
    } else {
        convertView.setBackgroundColor(context.getResources().getColor(
                R.color.expandlist));
    } 
```

在 onChildClick

```
 adapter.setSelectedPosition(childPosition);
    adapter.notifyDataSetChanged();
    v.setSelected(true); 
```

# oracle - 在运行时即时显示 Jasper 报告中的隐藏字段

> ID：10613553
> 
> 赞同：0
> 
> 时间：2012-05-16T07:03:00.477
> 
> 标签：oracle, jsf, jasper-reports

*我在使用JSF* / *Oracle 11g* / *iReport 4.1*开发的应用程序中有一个搜索页面。

用户选择字段，员工的记录根据列表中的选定字段返回，该列表进一步显示在 jsf 页面的数据表中，最后用户单击打印并使用 jasper 报告打印列出的记录。这一切都很好。现在我想问一下，如果用户针对搜索值选择某些复选框并希望 JasperReports 只显示那些选定的字段..那么

*   在 JasperReports 中这可能吗？

*   如果是的话......只是一个轻微的提示如何去做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:36:47.480

是的，有可能。

您可以在[***JasperReports API***](http://jasperreports.sourceforge.net/api/index.html)或[***DynamicJasper API***](http://dynamicjasper.com/docs/current/xref/)的帮助下完成。

您可以使用[此链接](http://dynamicjasper.com/documentation-examples/getting-started/)找到很多***DynamicJasper API***示例。

您还可以查看JasperReports ***API***[的此示例](http://jasperreports.sourceforge.net/sample.reference/noxmldesign/index.html#noxmldesign)

# android - 如何回到上次访问的活动？

> ID：10613557
> 
> 赞同：0
> 
> 时间：2012-05-16T07:03:13.857
> 
> 标签：android

```
 back = (Button) findViewById(R.id.back);
    back.setOnClickListener(new View.OnClickListener() {    
        public void onClick(View v1) {
            Intent setIntent = new Intent(Intent.ACTION_MAIN);
            setIntent.addCategory(Intent.CATEGORY_HOME);
            setIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(setIntent); 
        }
    }); 
```

我在我的应用程序中创建了一个后退按钮，一旦用户单击后退按钮，它将返回到上次访问的活动，但是当我单击后退按钮时，它会让我退出应用程序......有什么问题编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:05:10.153

只需调用[`finish`](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)按钮：

```
back.setOnClickListener(new View.OnClickListener()
{
    public void onClick(View v1) 
    {
        finish();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:06:11.220

您根本不应该自己实现“后退”按钮。它是 android 上已知的反模式。

但是，如果您仍然想实现这一点，那么只需调用`finish()`以关闭您当前的活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:07:47.657

1.  为什么要尝试实现系统按钮？！它已经在那里了。

2.  你可以运行`Activity.onBack()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T07:55:49.333

```
You can use like this.This is working for me.

@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {  
            Intent intent = new Intent(VisitorChat.this,L2STest.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
            startActivity(intent);

            return true;    
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T07:21:58.153

你也可以这样试试......

```
public void onBackPressed() {
        Intent backIntent = new Intent();
        backIntent.setClass(getApplicationContext(), yourbackactivityclassname.class);
        backIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(backIntent);
        finish();

    } 
```

# c# - Kinect 上的语音识别

> ID：10613559
> 
> 赞同：6
> 
> 时间：2012-05-16T07:03:22.067
> 
> 标签：c#, speech-recognition, kinect, speech

我有一个项目需要认可。它可以工作，但是如果我使用这个项目如何使用一个类并从其他类调用它的方法，我会遇到在线异常问题：

```
sre = new SpeechRecognitionEngine(ri.Id); 
```

错误是：

> 未找到所需 ID 的识别器。

编码：

```
KinectAudioSource source = kinectSensor.AudioSource;
source.EchoCancellationMode = EchoCancellationMode.None; // No AEC for this sample
source.AutomaticGainControlEnabled = false; // Important to turn this off for speech recognition
//  source.SystemMode = SystemMode.OptibeamArrayOnly;
speechRecognizer = CreateSpeechRecognizer();

using (Stream s = source.Start())
 {
   speechRecognizer.SetInputToAudioStream(s, new SpeechAudioFormatInfo(EncodingFormat.Pcm, 16000, 16, 1, 32000, 2, null));
   Console.WriteLine("Recognizing speech. Say: 'purple', 'green' or 'blue'. Press ENTER to stop");
   speechRecognizer.RecognizeAsync(RecognizeMode.Multiple);
   Console.ReadLine();
   Console.WriteLine("Stopping recognizer ...");
   speechRecognizer.RecognizeAsyncStop();
  }

 private static SpeechRecognitionEngine CreateSpeechRecognizer()
 {
   RecognizerInfo ri = GetKinectRecognizer();

   SpeechRecognitionEngine sre;
   //if (ri == null) return 0;
   sre = new SpeechRecognitionEngine(ri.Id);
   var colors = new Choices();
   colors.Add("red");
   colors.Add("green");
   colors.Add("blue");
   var gb = new GrammarBuilder { Culture = ri.Culture };
   gb.Append(colors);

   // Create the actual Grammar instance, and then load it into the speech recognizer.
   var g = new Grammar(gb);
   sre.LoadGrammar(g);
   sre.SpeechRecognized += SreSpeechRecognized;
   sre.SpeechHypothesized += SreSpeechHypothesized;
   sre.SpeechRecognitionRejected += SreSpeechRecognitionRejected;
   return sre;
  }
private static RecognizerInfo GetKinectRecognizer()
  {
   Func<RecognizerInfo, bool> matchingFunc = r =>
     {
      string value;
      r.AdditionalInfo.TryGetValue("Kinect", out value);
      return "True".Equals(value, StringComparison.InvariantCultureIgnoreCase) && "en-US".Equals(r.Culture.Name, StringComparison.InvariantCultureIgnoreCase);
       };
      return SpeechRecognitionEngine.InstalledRecognizers().Where(matchingFunc).FirstOrDefault(); 
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T15:53:26.710

我认为您的 GetKinectRecognizer() 方法不正确。

如果找到它并且找到的值作为输出参数，TryGetValue() 是否不会返回布尔值？您没有对 TryGetvalue() 返回的布尔值做任何事情。

您是否期望 AdditionalInfo 字典具有等于“Kinect”的键和字符串“True”或“False”值？这就是您的代码似乎要寻找的内容。

此代码是否基于您可以指向的示例。我并没有真正遵循您在matchingFunc 中的测试。您忽略了 TryGetvalue 的返回值，您正在寻找一个名为“Kinect”且字符串值为“True”的 AdditionalInfo 键，以及一个文化为“en-US”的识别器。

为什么不直接转储 SpeechRecognitionEngine.InstalledRecognizers() 的内容并确保它包含您认为它包含的内容。这是老派，但很有用：

```
foreach (RecognizerInfo ri in SpeechRecognitionEngine.InstalledRecognizers())
{
    Debug.WriteLine(String.Format("Id={0}, Name={1}, Description={2}, Culture={3}", ri.Id, ri.Name, ri.Description, ri.Culture));
    foreach(string key in ri.AdditionalInfo.Keys)
    {
        Debug.WriteLine(string.Format("{0} = {1}", key, ri.AdditionalInfo[key]));
    }
    Debug.WriteLine("-");
} 
```

我没有安装 Kinect SDK，但在我的 Windows 7 机器上它显示：

```
Id=MS-1033-80-DESK, Name=MS-1033-80-DESK, Description=Microsoft Speech Recognizer 8.0 for Windows (English - US), Culture=en-US
VendorPreferred = 
CommandAndControl = 
Version = 8.0
Language = 409;9
Desktop = 
SupportedLocales = 409;1009;3409;9
AudioFormats = 16;18;20;22;45;53;{6F50E21C-E30E-4B50-95E9-21E8F23D15BD}
SpeakingStyle = Discrete;Continuous
WildcardInCFG = Anywhere;Trailing
Dictation = 
Hypotheses = 
Alternates = CC;Dictation
windowsV6compatible = 
Name = MS-1033-80-DESK
DictationInCFG = Anywhere;Trailing
UPSPhoneSet = 
WordSequences = Anywhere;Trailing
Vendor = Microsoft
-
Id=MS-2057-80-DESK, Name=MS-2057-80-DESK, Description=Microsoft Speech Recognizer 8.0 for Windows (English - UK), Culture=en-GB
 = 
VendorPreferred = 
CommandAndControl = 
Version = 8.0
Language = 809
Desktop = 
SupportedLocales = 809;C09;1409;1809;1C09;2009;2409;2809;2C09;3009;4009;4409;4809;9
AudioFormats = 16;18;20;22;45;53;{6F50E21C-E30E-4B50-95E9-21E8F23D15BD}
SpeakingStyle = Discrete;Continuous
WildcardInCFG = Anywhere;Trailing
Dictation = 
Hypotheses = 
Alternates = CC;Dictation
windowsV6compatible = 
Name = MS-2057-80-DESK
DictationInCFG = Anywhere;Trailing
UPSPhoneSet = 
WordSequences = Anywhere;Trailing
Vendor = Microsoft
-
- 
```

确保您在 AdditionalInfo 字典中查找的值确实存在。然后制作你的 matchingFunc 来检查它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-04T08:46:29.680

尝试这个。这个对我有用。

```
 private static RecognizerInfo GetKinectRecognizer()
        {
            foreach (RecognizerInfo recognizer in SpeechRecognitionEngine.InstalledRecognizers())
            {
                System.Diagnostics.Debug.Write(recognizer.Culture.Name+"\n\n");
                //string value;
                //recognizer.AdditionalInfo.TryGetValue("Kinect",out value);
                if ("en-US".Equals(recognizer.Culture.Name, StringComparison.OrdinalIgnoreCase))
                {
                    return recognizer;
                }

            }

            return null;
        } 
```

# php - htaccess 文件不工作

> ID：10613560
> 
> 赞同：0
> 
> 时间：2012-05-16T07:03:23.560
> 
> 标签：php, .htaccess

我有一个`.htaccess`包含以下代码的文件：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteCond %{REQUEST_URI} (/|\.html|/[^.]*)$ [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^([A-Za-z0-9-_]+)/?$ $1.html [NC]
</IfModule> 
```

但它不起作用。我想更改 URL，例如`www.example.com/about.html`to`www.example.com/about`等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:07:28.167

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

`.htaccess`如果您下次不理解，请将其保存在您的代码片段文件中。替换`.html`为您需要删除的文件扩展名。

# javascript - 从命令行调用 nsIX509CertDB.nsIX509CertDB 失败

> ID：10613562
> 
> 赞同：0
> 
> 时间：2012-05-16T07:03:57.370
> 
> 标签：javascript, certificate, xpcom, x509, nss

我正在尝试开发一个调用 nsIX509CertDB.nsIX509CertDB 的 FF 扩展。从 xpcshell 调用此函数时，我总是收到错误 0x80004005 (NS_ERROR_FAILURE)。我怀疑它失败了，因为在 xpcshell 环境中无法提示我输入密码。有没有办法从命令行提供它？

我的代码：

```
if(nsIFile != null && nsIFile.exists()) {
        var certDB = Cc["@mozilla.org/security/x509certdb;1"]
                                        .getService(Ci.nsIX509CertDB);
        certDB.importPKCS12File(null, nsIFile);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:33:05.017

这很可能涉及编写代码来替换`@mozilla.org/nsCertificateDialogs;1`组件（实现[`nsICertificateDialogs`接口](http://hg.mozilla.org/mozilla-central/file/bfc259be3fa2/security/manager/ssl/public/nsICertificateDialogs.idl)）。然后你可以以`getPKCS12FilePassword`任何你喜欢的方式实现方法。

更简单的方法是使用NSS 中包含的[`pk12util`工具。](http://www.mozilla.org/projects/security/pki/nss/tools/pk12util.html)当然，除非这*确实*需要通过 xpcshell 来完成。

# java - 如何为 vanilla 基准测试调整 Java GC？

> ID：10613563
> 
> 赞同：4
> 
> 时间：2012-05-16T07:04:00.990
> 
> 标签：java, performance, garbage-collection, jvm, benchmarking

我正在尝试调整 GC，使其在短期基准测试中不会启动。

为此，我尝试将年轻一代设置得尽可能大，并确保我产生的垃圾少于 Eden 大小。

我使用了以下参数：

```
java -Xmx1g -Xms1g -Xmn1g -XX:NewSize=1000m -XX:MaxNewSize=1g -XX:SurvivorRatio=10000 -verbose:gc Main 
```

但是由于某种原因，当 VM 内存仅为 300M 时，我仍然会看到 [Full GC] 日志，是否有任何我缺少的 JVM 调整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T10:43:58.713

您的幸存者比例非常重要，10 000 您告诉 JVM 幸存者空间是伊甸园大小的 10000 分之一。

[从文档](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)：

> 如果幸存者空间太小，复制集合会直接溢出到终身代。如果幸存者空间太大，它们将是无用的空。在每次垃圾回收时，虚拟机都会选择一个阈值次数，一个对象在其被永久保存之前可以被复制。选择此阈值以使幸存者保持半满。命令行选项 -XX:+PrintTenuringDistribution 可用于显示该阈值和新生代对象的年龄。它对于观察应用程序的生命周期分布也很有用。

很明显，由于幸存者空间比率如此之低，您的对象直接存储在终身代中。

当终身代满时，发生了一个**主要的收集**，这就是你`[Full GC...]`在日志中看到的原因。

如果你想让年轻一代更大的用途：

```
-XX:NewRatio=1 
```

这意味着伊甸园和幸存者空间的组合大小将是总堆大小的一半。（我猜你不可能有更大的年轻一代）

`-XX:NewSize`如果你已经设置了`-Xmn`，你也不必设置，`-Xmn`从 1.4 开始也是一样的。而且我猜你不想从上面绑定年轻一代`-XX:MaxNewSize`，默认值是无限的。但是将年轻代的大小设置为与最大堆大小相同的值意味着您不会为老年代留出空间，所以我猜JVM会调整代的大小。

总而言之，在某些情况下，分配可以直接发生在终身代中。（[对象会直接分配到老年代吗？](http://java.sun.com/docs/hotspot/gc1.4.2/faq.html)）

> *   如果年轻代分配失败，并且对象是一个不包含任何对象引用的大数组，则可以直接将其分配到年老代。在某些特定情况下，此策略旨在通过从老年代分配来避免收集年轻代。阈值大小为 64k 字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T07:22:39.353

你可以获得full GC，因为你的tenured空间已经被填满了（大对象被直接放入tenured空间）

我通常会尝试 4 - 24 GB 的 eden 大小，但要确保永久空间的大小为 0.5 到 2 GB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T07:11:40.780

如果您要释放大量对象，GC 仍然会运行，这不仅仅是等到您使用完所有分配的空间的问题，如果这样做的话，它会在运行时导致严重的 GC 抖动.

您应该查看您对对象处理的使用以及是否可以提高效率。查看 LMAX 破坏者模式，了解如何通过更新对象值而不是解除分配替换对象本身来重用对象。

话虽如此，这是一篇关于调整 GC 的非常好的文章 - [http://developer.amd.com/documentation/articles/pages/4EasyWaystodoJavaGarbageCollectionTuning.aspx](http://developer.amd.com/documentation/articles/pages/4EasyWaystodoJavaGarbageCollectionTuning.aspx)

# javascript - 滚动条显示但不工作

> ID：10613564
> 
> 赞同：2
> 
> 时间：2012-05-16T07:04:17.330
> 
> 标签：javascript, jquery, html, css, scrollbar

我在网页设计/编码方面有点介于新手和中级之间......
来了！
如果你看这个：

[http://jsfiddle.net/ZPufX/](http://jsfiddle.net/ZPufX/)

css 表示 y 轴上的自动滚动条。问题是我在使它仅在文本（代码中的多个“某些文本”）出现时才显示的问题，而且，它甚至没有按原样滚动......

任何线索？

* * *

找到答案了！！

在 css 文件的属性中，执行如下操作：

```
div.example
{width: 960px;
height: 430px;
position: relative;
top: 90px;
left: 296px;
overflow: hidden;} 
```

进而 ：

```
div.example
{width: 960px;
height: 430px;
position: relative;
top: 90px;
left: 296px;
overflow: scroll;} 
```

这将导致滚动条仅在将鼠标悬停在框上时出现！

感谢 vimalnath 在这个问题上的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:22:08.413

我只是试图将文本框的位置从绝对更改为相对

演示在这里： [小提琴](http://jsfiddle.net/ZPufX/6/)

# wpf - WPF 样式验证触发命令

> ID：10613565
> 
> 赞同：0
> 
> 时间：2012-05-16T07:04:22.470
> 
> 标签：wpf, validation, mvvm, triggers, command

我有一些带有验证器的动态生成的文本框。如果发生验证错误，我希望他们向 VM 发送命令。这个Behavior是放在一个style里面的，所以我不用写到xaml生成中。

这是代码：

```
<behaviors:Triggers x:Key="validationTrigger" x:Shared="False">
    <behaviors:ValidationErrorEventTrigger>
        <cmd:EventToCommand Command="{Binding ValidationError,NotifyOnValidationError=True}"
                            PassEventArgsToCommand="True" />
    </behaviors:ValidationErrorEventTrigger>
</behaviors:Triggers>

<Style x:Key="EditableTextBox" TargetType="{x:Type TextBox}">
    <Setter Property="Background" Value="#DDFFDD" />
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <Border BorderBrush="Red" BorderThickness="2">
                    <AdornedElementPlaceholder />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="behaviors:OCCInteraction.Triggers" Value="{StaticResource ResourceKey=validationTrigger}" />
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="Background" Value="#FFDDDD"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

我现在遇到的问题是在 VlidationErrorEventTrigger 类中调用了“Onvalidation”事件，但在 Viewmodel 中没有调用命令。我已经通过直接集成而不是样式对其进行了测试，并且它以这种方式工作。

所以也许它与命令的绑定有关......

我希望这个描述足以解决问题。如果没有请告诉我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:22:12.210

我不确定你的绑定是如何完成的，但假设`DataContext`你``Control/Window has your ViewModel Instance and`ValidationError` 是你的命令......

```
<behaviors:Triggers x:Key="validationTrigger" x:Shared="False">
 <behaviors:ValidationErrorEventTrigger>
     <cmd:EventToCommand Command="{Binding Path=DataContext.ValidationError,RelativeSource="{RelativeSource Mode=FindAncestor,AncestorType={x:Type Window}}",NotifyOnValidationError=True}"                     
    PassEventArgsToCommand="True" />
 </behaviors:ValidationErrorEventTrigger>
</behaviors:Triggers> 
```

这是假设您的触发器无法找到所需的命令。

# c++ - 如何在 Linux 中通过写时复制找到分叉进程之间共享多少内存？

> ID：10613566
> 
> 赞同：10
> 
> 时间：2012-05-16T07:04:26.540
> 
> 标签：c++, c, linux, fork

如果有一个进程读取一个大文件并将其保存在其内存中（或只是一个 malloced char*），并且该主进程是分叉的，如果子进程仅从该内存（或 char*）中读取，根据写时复制，不复制保存指针的内存，并且父子和子共享相同的内存，直到其中任何一个尝试在该内存上写入，在这种情况下，进程会复制内存并更改那。

所以我的问题是，如果实现了复制写入，有没有办法知道子进程使用的不与主进程共享的内存量？换句话说，如果子进程使用来自某些读取调用的父内存，子进程实际使用了多少内存？

top 或 ps 命令只会给出孩子应该拥有的内存总量。（即假设内存或指针中的数据是由孩子复制的。）

有没有办法获取 CoW 语义实际使用的数据量？

我`/proc/[pid]/smaps` 按照 aix 和 Mat 的建议进行了检查，但我发现的只是很多空的 smaps 文件。我尝试了这个命令来查找哪些文件中有数据：`tail -n 5 */smaps | less` 我得到的 o/p 是

```
==> 1012/smaps <==

==> 1074/smaps <==

==> 10/smaps <==

==> 1148/smaps <==

==> 11862/smaps <==

==> 11/smaps <==

==> 1355/smaps <==

==> 1356/smaps <==

==> 1357/smaps <==

==> 1358/smaps <==

==> 1361/smaps <==

==> 13/smaps <==

==> 14900/smaps <==

==> 14/smaps <==

==> 1501/smaps <==

==> 15/smaps <==

==> 1684/smaps <==

==> 1685/smaps <==

==> 16/smaps <==

==> 17772/smaps <==

==> 17827/smaps <==

==> 17/smaps <==

==> 18490/smaps <==

==> 18/smaps <==

==> 1932/smaps <==

==> 1934/smaps <==

==> 19863/smaps <==

==> 19/smaps <==

==> 1/smaps <==

==> 20125/smaps <==

==> 20126/smaps <==

==> 20127/smaps <==

==> 20128/smaps <==

==> 20129/smaps <==

==> 20134/smaps <==

==> 20135/smaps <==

==> 20811/smaps <==

==> 20868/smaps <==

==> 20/smaps <==

==> 21116/smaps <==

==> 21774/smaps <==

==> 21/smaps <==

==> 22393/smaps <==

==> 22394/smaps <==

==> 22395/smaps <==

==> 22398/smaps <==

==> 22639/smaps <==

==> 22824/smaps <==

==> 22/smaps <==

==> 23009/smaps <==

==> 23058/smaps <==

==> 23059/smaps <==
Private_Dirty:         0 kB
Referenced:            0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB

==> 23835/smaps <==

==> 23961/smaps <==

==> 23962/smaps <==

==> 23963/smaps <==

==> 23964/smaps <==

==> 23/smaps <==

==> 24180/smaps <==

==> 24268/smaps <==

==> 24467/smaps <==

==> 24/smaps <==

==> 252/smaps <==

==> 25352/smaps <==

==> 25435/smaps <==

==> 25/smaps <==

==> 26465/smaps <==

==> 26/smaps <==

==> 27884/smaps <==

==> 27/smaps <==

==> 28/smaps <==

==> 29/smaps <==

==> 2/smaps <==

==> 303/smaps <==

==> 30/smaps <==

==> 316/smaps <==

==> 31/smaps <==

==> 32074/smaps <==

==> 32076/smaps <==

==> 32112/smaps <==
Private_Dirty:         0 kB
Referenced:            0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB

==> 32116/smaps <==
Private_Dirty:         0 kB
Referenced:            0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB

==> 322/smaps <==

==> 32466/smaps <==

==> 32467/smaps <==

==> 32/smaps <==

==> 33/smaps <==

==> 34/smaps <==

==> 37/smaps <==

==> 38/smaps <==

==> 3991/smaps <==

==> 3992/smaps <==

==> 39/smaps <==

==> 3/smaps <==

==> 4005/smaps <==

==> 4006/smaps <==

==> 4007/smaps <==

==> 4008/smaps <==

==> 4009/smaps <==

==> 4010/smaps <==

==> 4018/smaps <==

==> 4029/smaps <==

==> 4038/smaps <==

==> 4044/smaps <==

==> 4045/smaps <==

==> 4046/smaps <==

==> 4053/smaps <==

==> 4054/smaps <==

==> 4055/smaps <==

==> 40/smaps <==

==> 41/smaps <==

==> 42/smaps <==

==> 4339/smaps <==

==> 435/smaps <==

==> 436/smaps <==

==> 43/smaps <==

==> 44/smaps <==

==> 45/smaps <==

==> 46/smaps <==

==> 47/smaps <==

==> 48/smaps <==

==> 49/smaps <==

==> 4/smaps <==

==> 50/smaps <==

==> 51/smaps <==

==> 52/smaps <==

==> 53/smaps <==

==> 54/smaps <==

==> 55/smaps <==

==> 56/smaps <==

==> 57/smaps <==

==> 58/smaps <==

==> 5988/smaps <==

==> 59/smaps <==

==> 5/smaps <==

==> 6058/smaps <==

==> 6059/smaps <==
Private_Dirty:         0 kB
Referenced:            0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB

==> 60/smaps <==

==> 61/smaps <==

==> 62/smaps <==

==> 63/smaps <==

==> 64/smaps <==

==> 65/smaps <==

==> 66/smaps <==

==> 67/smaps <==

==> 68/smaps <==

==> 69/smaps <==

==> 6/smaps <==

==> 70/smaps <==

==> 71/smaps <==

==> 72/smaps <==

==> 73/smaps <==

==> 74/smaps <==

==> 771/smaps <==

==> 77/smaps <==

==> 782/smaps <==

==> 78/smaps <==

==> 79/smaps <==

==> 7/smaps <==

==> 80/smaps <==

==> 814/smaps <==

==> 819/smaps <==

==> 81/smaps <==

==> 82/smaps <==

==> 83/smaps <==

==> 84/smaps <==

==> 8654/smaps <==

==> 8655/smaps <==

==> 8656/smaps <==

==> 892/smaps <==

==> 8/smaps <==

==> 949/smaps <==

==> 950/smaps <==

==> 9/smaps <==

==> self/smaps <==
Private_Dirty:         0 kB
Referenced:            0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB 
```

那我现在该怎么办？我有正在运行的空白 smap 的进程。我如何获得那些 pid 的 smaps？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T07:13:02.527

我不知道有什么工具可以为您提供此信息，但您可能可以根据以下内容进行计算`/proc/[pid]/smaps`：

```
 /proc/[pid]/smaps (since Linux 2.6.14)
          This file shows memory consumption for each of  the  process’s  mappings.
          For each of mappings there is a series of lines such as the following:

              08048000-080bc000 r-xp 00000000 03:02 13130      /bin/bash
              Size:               464 kB
              Rss:                424 kB
              Shared_Clean:       424 kB
              Shared_Dirty:         0 kB
              Private_Clean:        0 kB
              Private_Dirty:        0 kB

          The  first  of these lines shows the same information as is displayed for
          the mapping in /proc/[pid]/maps.  The remaining lines show  the  size  of
          the mapping, the amount of the mapping that is currently resident in RAM,
          the number of clean and dirty shared pages in the mapping, and the number
          of clean and dirty private pages in the mapping. 
```

有关详细信息，请参阅[从 获取有关进程的内存使用情况的信息`/proc/pid/smaps`](https://unix.stackexchange.com/questions/33381/getting-information-about-a-process-memory-usage-from-proc-pid-smaps)。

# javascript - 在单击或鼠标悬停时为图像添加边框

> ID：10613568
> 
> 赞同：0
> 
> 时间：2012-05-16T07:04:26.853
> 
> 标签：javascript, jquery, css, asp.net-charts

我想为地图上的选定图像区域添加圆形边框，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:07:17.993

你可以使用 jQuery：

```
$('body').on('click', 'img', function() {
    $(this).addClass('with-round-corners');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:19:00.120

```
img
{
border:0px;
}
img:hover
{
border:1px solid black;
border-radius:5px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:19:04.563

在 click 上使用下面的 JQuery 代码：

```
$(imageAreasSelector).css({ 'border': '1px solid Red' });
$(imageAreasSelector).css({ 'border-radius': '5px' }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T07:10:50.283

你可以使用 CSS

```
img{
    border:none;
}
img:hover{
    border:1px solid;
} 
```

# php - 未定义的索引错误 PHP

> ID：10613570
> 
> 赞同：26
> 
> 时间：2012-05-16T07:04:39.083
> 
> 标签：php, forms, post, undefined

我是 PHP 新手，我收到了这个错误：

> 注意：未定义的索引：第 32 行 /var/www/test/modifyform.php 中的 productid
> 
> 注意：未定义的索引：第 33 行 /var/www/test/modifyform.php 中的名称
> 
> 注意：未定义的索引：第 34 行 /var/www/test/modifyform.php 中的价格
> 
> 注意：未定义索引：第 35 行 /var/www/test/modifyform.php 中的描述

我在网上找不到任何解决方案，所以也许有人可以帮助我。

这是代码：

```
<form action="<?php echo $_SERVER['PHP_SELF'];?>" method="POST">
   <input type="hidden" name="rowID" value="<?php echo $rowID;?>">

   <p>
      Product ID:<br />
      <input type="text" name="productid" size="8" maxlength="8" value="<?php echo $productid;?>" />
   </p>

   <p>
      Name:<br />
      <input type="text" name="name" size="25" maxlength="25" value="<?php echo $name;?>" />
   </p>

   <p>
      Price:<br />
      <input type="text" name="price" size="6" maxlength="6" value="<?php echo $price;?>" />
   </p>

   <p>
      Description:<br />
      <textarea name="description" rows="5" cols="30">
      <?php echo $description;?></textarea>
   </p>

   <p>
      <input type="submit" name="submit" value="Submit!" />
   </p>
   </form>
   <?php
   if (isset($_POST['submit'])) {
      $rowID = $_POST['rowID'];
      $productid = $_POST['productid']; //this is line 32 and so on...
      $name = $_POST['name'];
      $price = $_POST['price'];
      $description = $_POST['description'];

} 
```

之后我要做的（或者至少我正在尝试）是更新 MySQL 中的一个表。我真的不明白为什么`$rowID`定义了其他变量而没有定义。

感谢您花时间回答我。干杯!

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-16T07:06:46.023

尝试：

```
<?php

if (isset($_POST['name'])) {
    $name = $_POST['name'];
}

if (isset($_POST['price'])) {
    $price = $_POST['price'];
}

if (isset($_POST['description'])) {
    $description = $_POST['description'];
}

?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T07:14:38.750

显然，您的 html 表单中缺少索引“productid”。首先检查您的 html 输入。例如`<input type="text" name="productid" value="">` ，但这将处理 PHP 正在引发的当前错误。

```
 $rowID = isset($_POST['rowID']) ? $_POST['rowID'] : '';
  $productid = isset($_POST['productid']) ? $_POST['productid'] : '';
  $name = isset($_POST['name']) ? $_POST['name'] : '';
  $price = isset($_POST['price']) ? $_POST['price'] : '';
  $description = isset($_POST['description']) ? $_POST['description'] : ''; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-28T18:27:48.527

发生这种情况是因为您的 PHP 代码在表单发布之前被执行。

为了避免这种情况，将您的 PHP 代码包装在后面的 if 语句中，它将处理其余部分，无需为每个变量设置 if 语句

```
 if(isset($_POST) && array_key_exists('name_of_your_submit_input',$_POST))
        {
             //process PHP Code
        }
        else
        {
             //do nothing
         } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-04T06:18:36.767

尝试

```
<?php

  $rowID=$productid=$name=$price=$description="";  

   if (isset($_POST['submit'])) {
      $rowID = $_POST['rowID'];
      $productid = $_POST['productid']; //this is line 32 and so on...
      $name = $_POST['name'];
      $price = $_POST['price'];
      $description = $_POST['description'];

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T07:14:32.270

当您生成`<form>`. 我敢打赌`$name`，当您进入字段时，变量`$price`是`NULL`或空字符串。浏览器不会发送空输入字段，因此不会有它们的键。`echo``value``<input>``$_POST`

无论如何，您可以使用[`isset()`](http://hu2.php.net/manual/en/function.isset.php).

测试变量如下：

`if(isset($_POST['key'])) ? $variable=$_POST['key'] : $variable=NULL`

你最好把它设置为`NULL`，因为

> NULL 值表示没有值的变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-18T09:24:56.340

嘿，这是因为你试图在分配它之前显示值你只需填写值并提交表单它将显示正确的输出或者你可以在表单标签下面编写你的 php 代码它将运行没有任何错误

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-07-23T15:32:24.450

如果您使用的是 wamp 服务器，那么我建议您使用 xampp 服务器。你 。我在不到一分钟的时间内收到了这个错误，但我通过使用 (isset) 函数解决了这个问题。我没有错误。之后我删除（isset）功能，我没有看到任何错误。

顺便说一句，我正在使用 xampp 服务器

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-05-29T11:57:18.250

此错误有时发生在方法属性（有效的传递方法）错误选项：method="get" 但由 $Fname = $_POST["name"]; 调用 或者

```
 method="post" but  called by  $Fname = $_GET["name"]; 
```

更多信息请访问[http://www.doordie.co.in/index.php](http://www.doordie.co.in/index.php)

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2014-08-02T07:30:45.603

要消除此错误，您应该在您的 html 表单中执行以下操作`enctype`：

```
<form  enctype="multipart/form-data"> 
```

以下是该错误的原因，即如果您从 enctype 中的 form-data 开始，那么您应该从 multipart 开始：

```
<form enctype="form-data/multipart"> 
```

# java - 使用struts2在jsp上渲染pdf流

> ID：10613576
> 
> 赞同：0
> 
> 时间：2012-05-16T07:04:52.700
> 
> 标签：java, jakarta-ee, struts2

我在我的 Web 应用程序中使用 struts2。我想在 jsp 上渲染一个 pdf 流。我目前正在这样做：

```
public String renderPDF() throws Exception
{
     myService.rederPDF(getServletResponse().getServletOutputStream());
     return SUCCESS;
} 
```

myService 的 rederPDF 方法获取一个 pdf 流并写入 servlet 响应输出流。但这会引发“响应已提交”的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:35:19.407

当您在转发之前已经向客户端发送了一些东西时，会发生此异常。

我正在使用 Servlet 下载文件。看一看。

```
public class FileDownloadServlet extends HttpServlet {

public void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    byte[] b = null;
    ServletOutputStream sop = null;

    try {
        response.setContentType("application/pdf");
        response.setHeader("Content-Disposition","attachment; filename=yourFileName.pdf");          

        sop = response.getOutputStream();
        b =  myService.getFileData(); /* your code */
        sop.write(b);    
        return;         
    } catch (Exception e) { 
        /* some code*/
    }
    finally{ 
        /* some code*/
    }
}
} 
```

# android - Android 在视图下方绘制阴影：dispatchDraw 经常调用 - 任何缓存丢失

> ID：10613581
> 
> 赞同：2
> 
> 时间：2012-05-16T07:05:07.117
> 
> 标签：android, caching, shadow

我试图在视图元素下放置一个平滑的阴影。这是我到目前为止所做的：

子类 FrameLayout（我的 ShadowViewport），它覆盖 dispatchDraw(...) 并执行以下操作：

*   调用超类的 dispatchDraw 并将输出保存为位图
*   从此位图中提取 alpa
*   模糊
*   用一些偏移量绘制模糊的提取 alpha
*   绘制原始视图位图

    ```
    @Override
    protected void dispatchDraw(Canvas canvas) {
        Log.d("ShadowViewport", "dispatchDraw");

        final Bitmap output = Bitmap.createBitmap(getWidth(), getHeight(), Config.ARGB_8888);
        final Canvas sCanvas = new Canvas(output);

        // Draw internal view in canvas
        super.dispatchDraw(sCanvas);
        final Bitmap original = output.copy(Config.ARGB_8888, true);

        Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setColor(0x55000000);
        paint.setMaskFilter(new BlurMaskFilter(SHADOW_SIZE, Blur.NORMAL));

        canvas.drawBitmap(output.extractAlpha(), 0, SHADOW_SIZE, paint);
        canvas.drawBitmap(original, 0, 0, null);
    } 
    ```

**结果**

[在这里找到图像](http://img254.imageshack.us/img254/4647/shadowa.png)。正如你所看到的，左边的盒子有一个很好的生成阴影，即使是圆角；）

**问题**

on dispatchDraw 函数经常被调用，例如在滚动时。有没有办法缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:04:09.210

在 AndroidManifest 中启用 android:hardwareAccelerated="true" 属性将启用图像的自动缓存。例如，在滚动期间不调用 dispatchDraw 方法。

我还认为可以在布局类上使用[setDrawingCacheEnabled 。](http://developer.android.com/reference/android/view/View.html#setDrawingCacheEnabled%28boolean%29)要完成这项工作，您应该首先调用 getDrawingCache，如果它不为 null，则返回返回的位图。这似乎有点像“穷人”的优化，但可能是从旧手机中获得性能的好主意。

# jquery - 不使用 FormToWizard Jquery 插件保存数据

> ID：10613586
> 
> 赞同：0
> 
> 时间：2012-05-16T07:05:26.107
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, asset-pipeline

我试图将此插件样式设置到我的 rails 3.2 应用程序中并遇到一些问题.. [http://www.jankoatwarpspeed.com/post/2009/09/28/webform-wizard-jquery.aspx](http://www.jankoatwarpspeed.com/post/2009/09/28/webform-wizard-jquery.aspx)

当我点击提交时，表单没有保存到我的模型中，只是重定向到第一步。...

这是我的视图代码：

```
 <h1>Tell us a little about yourself.</h1>

    <form id="SignupForm" action="">
    <fieldset>
    <legend>Personal Information</legend>
    <%= simple_form_for @user do |f| %>

      <%= f.input :city %>
      <%= f.input :address %>
      <%= f.input :zipcode %>
      <%= f.input :date_of_birth, :as => :date, :start_year => Date.today.year - 90,
        :end_year => Date.today.year - 12,
        :order => [:month, :day, :year ] %>
      <%= f.input :gender, :collection => ['male','female'] %>
      </fieldset>

      <fieldset>
      <legend>Interests & Holidays</legend>
      <h2>Select your top 3 interests..</h2>
      <label class="checkbox">

      <%= f.association :interests, :as => :check_boxes, :label => false %>
      </label>
      <br></br>
      <h2>What holidays do you celebrate?</h2>
        <label class="checkbox">
        <%= f.association :holidays, :as => :check_boxes, :label => false %>

        </label>
        <br></br>
        </fieldset>
        <fieldset>
        <legend>Friends Birthdays</legend>
        <h2>Add up to 10 friends birthdays that you would like to remember..</h2>
        <br></br>
        <%= f.simple_fields_for :friends do |friend_f| %>
          <div id="input1" style="margin-bottom:4px;" class="clonedInput">
          <%= friend_f.input :name %>
          <%= friend_f.input :dob, :label => :Birthday, :as => :date, :start_year => Date.today.year - 90,
            :end_year => Date.today.year - 12,
            :order => [:month, :day, :year ] %>
          <%= f.input :gender, :collection => ['male','female'] %>

          <input type="button" id="btnAdd" value="add another name" />
          <input type="button" id="btnDel" value="remove name" />
          </div>
        <% end %>

        <%= f.button :submit %>
        <%end%>
        </fieldset>
    </div> 
```

继承人的js：

```
(function($) {
    $.fn.formToWizard = function(options) {
        options = $.extend({  
            submitButton: "" 
        }, options); 

        var element = this;

        var steps = $(element).find("fieldset");
        var count = steps.size();
        var submmitButtonName = "#" + options.submitButton;
        $(submmitButtonName).hide();

        // 2
        $(element).before("<ul id='steps'></ul>");

        steps.each(function(i) {
            $(this).wrap("<div id='step" + i + "'></div>");
            $(this).append("<p id='step" + i + "commands'></p>");

            // 2
            var name = $(this).find("legend").html();
            $("#steps").append("<li id='stepDesc" + i + "'>Step " + (i + 1) + "<span>" + name + "</span></li>");

            if (i == 0) {
                createNextButton(i);
                selectStep(i);
            }
            else if (i == count - 1) {
                $("#step" + i).hide();
                createPrevButton(i);
            }
            else {
                $("#step" + i).hide();
                createPrevButton(i);
                createNextButton(i);
            }
        });

        function createPrevButton(i) {
            var stepName = "step" + i;
            $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Prev' class='prev'>< Back</a>");

            $("#" + stepName + "Prev").bind("click", function(e) {
                $("#" + stepName).hide();
                $("#step" + (i - 1)).show();
                $(submmitButtonName).hide();
                selectStep(i - 1);
            });
        }

        function createNextButton(i) {
            var stepName = "step" + i;
            $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Next' class='next'>Next ></a>");

            $("#" + stepName + "Next").bind("click", function(e) {
                $("#" + stepName).hide();
                $("#step" + (i + 1)).show();
                if (i + 2 == count)
                    $(submmitButtonName).show();
                selectStep(i + 1);
            });
        }

        function selectStep(i) {
            $("#steps li").removeClass("current");
            $("#stepDesc" + i).addClass("current");
        }

    }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:13:09.803

这是我解决问题的方法。我首先编辑了 formToWizard.js 文件中的选项，如下所示：

> .options = $.extend({ submitButton: "submit" }

然后在我看来，我更改了表单元素，如下所示：

```
<script type="javascripts" src="formToWizard.js"></script>
  <form id="SignupForm" action= "users#create" method="post">
    <%= simple_form_for @user do |f| %>
     <fieldset><div id='step'>

       #multiple input fields

     <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
   <% end %>
  </div></fieldset>
</form> 
```

我用它来注册用户，所以我确保将表单元素指向我的 users#create 路径，然后我使用了“post”方法。如果您不确定要使用哪个路由以在控制器中执行创建操作，只需运行 rake 路由并使用它来填写表单的“操作”和“方法”字段，您应该一切顺利！

# iphone - 我想将单个字符串值存储在数组中，但它只保存最后一个值并删除所有第一个值

> ID：10613590
> 
> 赞同：-2
> 
> 时间：2012-05-16T07:05:45.930
> 
> 标签：iphone, arrays, string, store

```
-(void) getAllRowsFromTableNamed:(NSString *)  tableName
{   
AppDelegate *app =[[UIApplication sharedApplication]delegate];
strNam = app.strName;
NSString *qsql = [ NSString stringWithFormat:@"SELECT * FROM %@", tableName];
sqlite3_stmt  *statement;
if( sqlite3_prepare_v2(db2, [qsql UTF8String], -1, &statement, nil) == SQLITE_OK)
{    
while (sqlite3_step(statement)  ==  SQLITE_ROW)
{   
char *field1= (char *) sqlite3_column_text(statement, 0);
 NSString   *field1Str = [[NSString   alloc] initWithUTF8String:field1];
char *field2= (char *) sqlite3_column_text(statement, 1);
NSString   *field2Str = [[NSString   alloc] initWithUTF8String:field2];
 char *field3= (char *) sqlite3_column_text(statement, 2);
NSString   *field3Str = [[NSString   alloc] initWithUTF8String:field3];
char *field4= (char *) sqlite3_column_text(statement, 3);
 NSString   *field4Str = [[NSString   alloc] initWithUTF8String:field4];
NSString   *str =[[NSString alloc] initWithFormat:@"%@ - %@- %@- %@", field1Str, field2Str, field3Str, field4Str];
NSLog(@"%@",str);
 NSLog(@"%@",field1Str);

 self.strDat = field1Str;
 NSLog(@"%@", strDat);    
 array2 =[[NSMutableArray alloc]init];
 [self.array2 addObject:self.strDat]; 
 }
sqlite3_finalize(statement);
NSLog(@"%@",[array2 description]);
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:09:09.527

将数组的分配放在“while”之外，或者每次插入时创建array2

```
if( sqlite3_prepare_v2(db2, [qsql UTF8String], -1, &statement, nil) == SQLITE_OK)

{

//here

    array2 =[[NSMutableArray alloc]init];

    while (sqlite3_step(statement) == SQLITE_ROW)

    {
        ....
        ....
        ....

        [array2 addObject:self.strDat];

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:09:14.303

像这样在循环之前初始化数组

```
-(void) getAllRowsFromTableNamed:(NSString *)  tableName
{   
AppDelegate *app =[[UIApplication sharedApplication]delegate];
strNam = app.strName;
NSString *qsql = [ NSString stringWithFormat:@"SELECT * FROM %@", tableName];
sqlite3_stmt  *statement;
if( sqlite3_prepare_v2(db2, [qsql UTF8String], -1, &statement, nil) == SQLITE_OK)
{ 
 array2 =[[NSMutableArray alloc]init];

while (sqlite3_step(statement)  ==  SQLITE_ROW)
{   
char *field1= (char *) sqlite3_column_text(statement, 0);
 NSString   *field1Str = [[NSString   alloc] initWithUTF8String:field1];
char *field2= (char *) sqlite3_column_text(statement, 1);
NSString   *field2Str = [[NSString   alloc] initWithUTF8String:field2];
 char *field3= (char *) sqlite3_column_text(statement, 2);
NSString   *field3Str = [[NSString   alloc] initWithUTF8String:field3];
char *field4= (char *) sqlite3_column_text(statement, 3);
 NSString   *field4Str = [[NSString   alloc] initWithUTF8String:field4];
NSString   *str =[[NSString alloc] initWithFormat:@"%@ - %@- %@- %@", field1Str, field2Str, field3Str, field4Str];
NSLog(@"%@",str);
 NSLog(@"%@",field1Str);

 self.strDat = field1Str;
 NSLog(@"%@", strDat);    
 [self.array2 addObject:self.strDat]; 
 }
sqlite3_finalize(statement);
NSLog(@"%@",[array2 description]);
} 
} 
```

# for-loop - 如何在 CoffeeScript 的“for in”循环中使用缓存数组的长度？

> ID：10613592
> 
> 赞同：2
> 
> 时间：2012-05-16T07:05:48.967
> 
> 标签：for-loop, coffeescript

[以下 CoffeeScript 代码：](http://coffeescript.org/#try%3afor%20a%20in%20arr%0A%20%20do_something_with%20arr.length)

```
for a in arr
  do_something_with arr.length 
```

编译为：

```
var a, _i, _len;

for (_i = 0, _len = arr.length; _i < _len; _i++) {
  a = arr[_i];
  do_something_with(arr.length); // I want to use '_len' here
} 
```

是否可以使用缓存的值`arr.length`而不是在每次迭代中计算它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:34:12.047

如果您有一个定义的数组而不是一个范围数组，那么您实际上可以在块中使用 _len ：

```
for a in arr
  _len == arr.length 
```

但是，这依赖于 CS 内部结构，可能会在新版本中发生变化。它也不适用于每个阵列。

```
arr = [0..10]
for a in arr
  #this works
  console.log _len 
```

但：

```
for a in [0..10]
  #this doesn't work
  console.log _len 
```

我认为如果你想使用数组长度的缓存版本，最好在你的代码中明确地做到这一点，而不是依赖于 CS 的内部变量名称。

宁可这样做：

```
arrLength = arr.length
for a in arr
   doSomethingWith arrLength 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:56:25.510

考虑？

```
for i in [0...len = arr.length]
  a = arr[i]
  do_something_with len 
```

# mongodb - 恢复 MongoDB 转储时出现语法错误

> ID：10613593
> 
> 赞同：1
> 
> 时间：2012-05-16T07:05:57.413
> 
> 标签：mongodb

我正面临这个错误`SyntaxError: syntax error (shell):0`。我正在使用 ubuntu。我试过这样。首先打开终端并输入 mongo

```
MongoDB shell version: 2.0.4
connecting to: test
> 
```

之后我切换到我要创建的数据库`test1`然后使用以下命令

```
./mongorestore -h localhost:27017 -d test1 /home/ratheesh/testdev 
```

我收到了这个错误

```
Wed May 16 12:33:03 SyntaxError: syntax error (shell):0
> 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:52:20.903

`mongodump`等`mongorestore`是可执行程序，不应该从 mongo shell 运行。从命令行运行 restore 命令，运行后启动 mongo 并验证数据是否出现在数据库中。

# caching - 为什么 ASIHttpRequest 只在请求方式为“GET”时才使用缓存？

> ID：10613597
> 
> 赞同：0
> 
> 时间：2012-05-16T07:06:08.333
> 
> 标签：caching, post, asihttprequest

当我查看 ASIHTTPRequest 中的代码时，我发现以下部分

```
 if (![[self requestMethod] isEqualToString:@"GET"]) {
        [self setDownloadCache:nil];
    } 
```

但我不知道为什么？谁能告诉我原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:13:21.653

一般来说，GET 请求应该没有副作用：它们所做的只是产生一个响应（如果我没记错的话，这在 http 规范中有描述）。缓存响应并使用它来避免将来发出请求是非常安全的。

另一方面，其他 http 方法（如 post、put、delete）通常会产生副作用，因此仅返回先前的响应是不安全的：调用者可能依赖于副作用（例如，将一行插入数据库）。在这种情况下，您不会只想缓存“记录创建页面”并从缓存中显示它，而不是实际发出请求。

# c# - 通过 Visual Studio 2010 从 DLL 生成的 TLB 中缺少的属性和方法

> ID：10613600
> 
> 赞同：3
> 
> 时间：2012-05-16T07:06:13.370
> 
> 标签：c#, .net, visual-studio-2010, com, office-2010

我有一个`C# class library`项目，`Visual Studio 2010`我在其中添加了对 WSDL 的 Web 引用，将其指向我的 Web 服务。

我可以看到在 Visual Studio 中创建的代理很好。（见下面的截图）

![在此处输入图像描述](../Images/79e401e03c2b75c0b2edb436071855f6.png)

**目标：**我的最终目标是能够将这些代理打包并带到 VBA (Excel 2010) 并能够在那里调用 Web 方法。

我通过启用`'Make COM visible'`和`'Register for COM Interop'`.

**问题**：当我在 Oleviewer 中打开 TLB 时，我看到属性和方法在途中丢失了（见下面的截图）

![在此处输入图像描述](../Images/b9c4e6c18d50b57b9fd27078a78e476b.png)

![在此处输入图像描述](../Images/dfa5121bab2f7716ced5f1a1452e27e5.png)

**环境**：

*   Visual Studio 2010 Professional（目标平台设置为 x86）
*   视窗 7 x64
*   Office 2010 32 位
*   .NET 4.0

有人可以帮助我知道我在从 DLL 生成有效 TLB 时是否遗漏了什么？

# c# - 当我选择下拉列表时更改gridview标题文本

> ID：10613604
> 
> 赞同：0
> 
> 时间：2012-05-16T07:06:22.580
> 
> 标签：c#, javascript, jquery, asp.net

我有一些疑问这是我对 aspx 页面和 .cs 页面的编码如何实现以下目标为了它

```
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True"
onselectedindexchanged="DropDownList1_SelectedIndexChanged">
</asp:DropDownList>

<asp:GridView ID="GridView1" runat="server" >
<Columns>
<asp:TemplateField HeaderText="8-14">
<ItemTemplate>
<asp:TextBox ID="TxtWeek2" runat="server"></asp:TextBox>
</ItemTemplate>
</asp:TemplateField>
</Columns>
</asp:GridView> 
```

在 .CS 页面中

```
protected void Page_Load(object sender, EventArgs e)
{
if (!IsPostBack)
{
DropDownList1.Items.Add("Select");
DropDownList1.Items.Add("January");
DropDownList1.Items.Add("February");
DropDownList1.Items.Add("March");
DropDownList1.Items.Add("April");
DropDownList1.Items.Add("May");

SqlConnection cn = new SqlConnection("Data Source=192.169.10.22;Initial Catalog=SHRICITYUNO;User ID=uno;Password=uno");
SqlCommand cmd = new SqlCommand();
cn.Open();
cmd = new SqlCommand("SELECT Week1 FROM Finman_FundPlan", cn);
SqlDataAdapter da = new SqlDataAdapter(cmd);
DataSet ds = new DataSet();
da.Fill(ds);
GridView1.DataSource = ds;
GridView1.DataBind();
}

}

protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
string s = DropDownList1.SelectedItem.Text.ToString();
if (DropDownList1.SelectedItem.Text == "January")
{
this.GridView1.Columns[0].HeaderText = "";
this.GridView1.Columns[0].HeaderText = "29-31";
}
else if (DropDownList1.SelectedItem.Text == "February")
{
this.GridView1.Columns[0].HeaderText = "";
this.GridView1.Columns[0].HeaderText = "-";
}
else if (DropDownList1.SelectedItem.Text == "March")
{
this.GridView1.Columns[0].HeaderText = "";
this.GridView1.Columns[0].HeaderText = "29-31";
}
else if (DropDownList1.SelectedItem.Text == "April")
{
this.GridView1.Columns[0].HeaderText = "";
this.GridView1.Columns[0].HeaderText = "29-30";
}
else if (DropDownList1.SelectedItem.Text == "May")
{
this.GridView1.Columns[0].HeaderText = "";
this.GridView1.Columns[0].HeaderText = "29-31";
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:10:02.550

您可以在客户端使用 Javascript 来完成。如果您观察网格视图，那么您会注意到 row[0] 是 gridview 的标题行。现在您可以检查决定您必须更改的单元格测试。请参阅以下 javascript 函数来完成您的任务

```
<script language="Javascript"> 
function ChangeHeaderText()
{
   var gridObject = document.getElementById("Gridview1"); 
   gridObject.rows[0].cells[0].innerText = 'NewHeader Text'; 
   return false; 
} 
</script>

//call above function on 'onchange' event of dropdownlist
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" onchange = "return ChangeHeaderText()"
onselectedindexchanged="DropDownList1_SelectedIndexChanged">
</asp:DropDownList> 
```

试试这个它会工作......

# c++ - 如何在 Windows 上创建单例 Qt 应用程序？

> ID：10613606
> 
> 赞同：3
> 
> 时间：2012-05-16T07:06:33.890
> 
> 标签：c++, windows, qt, winapi

我想知道如何创建一个应用程序，该应用程序一次只能在主机操作系统上运行一个实例......可以说是一个单例应用程序。我想知道如何在 Qt 中创建这样的单例 C++ 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:19:17.140

您可以`QtSingleApplication`使用`Qt Solutions`. 请注意，这不是标准的 Qt 类。你应该下载它。该`QtSingleApplication`组件为应用程序提供支持

> 每个用户只能启动一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:10:39.610

当应用程序启动时，创建一个文件。当应用程序结束时，删除文件。

如果文件存在，则退出并显示错误消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T07:13:06.563

你真的不需要Qt，它是一个图形库。只需使用一些普通的 WINAPI 方法即可。您可以创建建议的文件（但当您的应用程序崩溃或断电后可能会变得奇怪），或使用内存映射文件或其他一些全局对象来检查您的应用程序是否仍在运行。您也可以检查进程列表以查看是否正在运行另一个副本。另一件事是用你的窗口类做一个 FindWindow，这很容易而且效果很好。有很多选择，只要搜索这个，这是一个常见的问题。（您可以为此使用一些库，但由于您只针对 Windows，我会使用 FindWindow。）

# c# - 用户控件事件处理程序

> ID：10613607
> 
> 赞同：0
> 
> 时间：2012-05-16T07:06:45.027
> 
> 标签：c#, asp.net

我在 C# 中有 2 个用户控件，如下所示（webheader，webfooter）

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="webheader.ascx.cs"     Inherits="WebUserControls.webheader" %>
   <p>
    <asp:Button ID="btnAdd" runat="server" Text="Add" onclick="btnAdd_Click" />

    &nbsp;&nbsp;&nbsp;&nbsp;

    <asp:Button ID="btnEdit" runat="server" Text="Edit" />

    &nbsp;&nbsp;&nbsp;&nbsp;

    <asp:Button ID="btnDelete" runat="server" Text="Delete" />

  </p>

  <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="webFooters.ascx.cs"      Inherits="WebUserControls.webFooters" %>
  <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
  <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
  <br />
  <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>
  <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
  <br />
  <asp:Label ID="Label3" runat="server" Text="Label"></asp:Label>
   <asp:TextBox ID="TextBox3" runat="server"></asp:TextBox>
  <br />
  <asp:Label ID="Label4" runat="server" Text="Label"></asp:Label>
  <asp:TextBox ID="TextBox4" runat="server"></asp:TextBox>
  <br />
  <asp:Label ID="Label5" runat="server" Text="Label"></asp:Label>
  <asp:TextBox ID="TextBox5" runat="server"></asp:TextBox>
   <p>
    &nbsp;</p> 
```

我在用户控件 webheader 中有 3 个按钮我想在 webfooters 中调用 3 个不同的方法每个按钮调用不同的方法我如何处理它，因为我将 2 个用户控件放在页面上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:40:32.353

在事件和代表的帮助下，您可以很容易地做到这一点。

从 WebHeader 公开事件并在内容页面中订阅它。将要在 WebHeader Click 上调用的 WebFooter 中的方法设为公开。单击按钮后，调用 WebFooter 的适当方法

```
//pseudo code

//WebHeader
public delegate void Button1Clicked(object[] args);
//raise this event when the button is clicked
public event Button1Clicked buttonClicked;

//WebFooter
public void Method1(object[] params); //for button 1 click

//In content page which holds both header and footer control
WebHeader.Button1Clicked+= new WebHeader.Button1Clicked (HandleClick);

public void HandleClick(object[] params)
{
    WebFooter.Method2(params);
} 
```

请参阅以下示例以获得更清晰的[信息 http://www.dotnetfunda.com/articles/article201.aspx](http://www.dotnetfunda.com/articles/article201.aspx)

# iphone - MBProgressHud 不会随着设备方向而改变。？

> ID：10613609
> 
> 赞同：0
> 
> 时间：2012-05-16T07:06:53.310
> 
> 标签：iphone, objective-c, ios, device-orientation, mbprogresshud

我正在使用 MBProgressHud 在初始视图上显示加载指示器，但这不会随设备方向而改变。我的代码是：

```
splashView = [[UIImageView alloc] initWithFrame:self.window.frame];

 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
 {
  splashView.image = [UIImage imageNamed:@"DefaultPad.png"];  
 }
 else
 {
    splashView.image = [UIImage imageNamed:@"Default.png"];  
 }

  hud = [[MBProgressHUD alloc]initWithView:splashView];
  [splashView addSubview:hud];

  hud.userInteractionEnabled=NO;
  hud.labelText = @"Loading...";

  [hud show:YES];

 [self.window addSubview:splashView];
 [self performSelector:@selector(Load_FirstView) withObject:nil afterDelay:3];
 [self.window makeKeyAndVisible]; 
```

我已经将`MBProgressHud.m`文件中的行从

```
- (void)deviceOrientationDidChange:(NSNotification *)notification { 

 NSLog(@"in device orientation ");
    UIView *superview = self.superview;
    if (!superview) {
        return;
    } else if ([superview isKindOfClass:[UIWindow class]]) {  // here changes have done
        [self setTransformForCurrentOrientation:YES];
    } else {
        self.bounds = self.superview.bounds;
        [self setNeedsDisplay];
    }
} 
```

至：

```
- (void)deviceOrientationDidChange:(NSNotification *)notification { 

 NSLog(@"in device orientation ");
    UIView *superview = self.superview;
    if (!superview) {
        return;
    } else if ([superview isKindOfClass:[UIImageView class]]) {
        [self setTransformForCurrentOrientation:YES];
    } else {
        self.bounds = self.superview.bounds;
        [self setNeedsDisplay];
    }
} 
```

如何让加载指示器随设备方向旋转？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:53:36.810

在 MBProgressHUD.m 我改变了

`UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;`

至

`UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];`

已收到方向通知，但状态栏尚未旋转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:12:28.647

尝试这个：-

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

    if(interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
       //code for portrait
  [hud release];
  hud = [[MBProgressHUD alloc]initWithView:splashView];
    }       
    else 
    { 
       //code for Landscape 
  [hud release];
  hud = [[MBProgressHUD alloc]initWithView:splashView];
    }
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || 
            interfaceOrientation == UIInterfaceOrientationPortrait || 
            interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
            interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
} 
```

如果它不起作用..您可以在 MBProgressHUD 的源代码中更改 with：`UIDeviceOrientationDidChangeNotification`-`UIApplicationDidChangeStatusBarOrientationNotification`

```
- (id)initWithView:(UIView *)view {
        // Let's check if the view is nil (this is a common error when using the windw initializer above)
        if (!view) {
                [NSException raise:@"MBProgressHUDViewIsNillException" 
                                        format:@"The view used in the MBProgressHUD initializer is nil."];
        }
        id me = [self initWithFrame:view.bounds];
        // We need to take care of rotation ourselfs if we're adding the HUD to a window
        if ([view isKindOfClass:[UIWindow class]]) {
                [self setTransformForCurrentOrientation:NO];
        }
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deviceOrientationDidChange:) 
                                                                                                 name:UIDeviceOrientationDidChangeNotification object:nil];

        return me;
} 
```

在上面的代码中，用 UIApplicationDidChangeStatusBarOrientationNotification 更改 UIDeviceOrientationDidChangeNotification。

这只是一种解决方法，因为 MBProgressHud 始终存在轮换问题。

我猜 MBProgressHud 有很多问题，你应该改用[svprogresshud](https://github.com/samvermette/SVProgressHUD)因为它可以很好地处理方向

# hibernate - 尝试探索层次结构时 JBoss 7 中的 StackOverflowError

> ID：10613610
> 
> 赞同：0
> 
> 时间：2012-05-16T07:06:54.183
> 
> 标签：hibernate, jboss, tree, stack-overflow, hierarchy

在我的 Jboss7 Java EE 6 Web 应用程序中，我需要管理一个简单的“类别”实体的树结构，如下所示：

```
@Entity
@Table(name="categorie")
@NamedQueries({ 
    @NamedQuery(name="selezionaTutti", query="select c from Categoria c left join fetch c.children left join fetch c.parent")
})
public class Categoria implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @NotNull
    private String nome;

    @OneToMany(cascade=CascadeType.ALL,fetch=FetchType.EAGER)
    @JoinColumn(name = "parent_id")
    private List<Categoria> children = new LinkedList<Categoria>();

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name = "parent_id",insertable=false,updatable=false)
    private Categoria parent;

... //various getter, setter, and so on
} 
```

命名查询一次加载我的整个（小）树，第一次，然后它停留在持久性上下文中。

然后我想“探索”这棵树，所以我得到根节点并将其传递给这个函数：

```
private List<Categoria> getAlberoCategorie(Categoria root, int profondita) {
        List<Categoria> tmpList = new ArrayList<Categoria>();
        root.setProfondita(profondita);
        if ( root.getParent() != null ) {
            tmpList.add(root);
        }
        if (!root.getChildren().isEmpty()) {
            profondita++;
            for (Categoria figlia : root.getChildren()) {
                tmpList.addAll(getAlberoCategorie(figlia,profondita)); // this line generates the stack overflow!!! 
            }
        }
        return tmpList;
    } 
```

异常的确切堆栈跟踪是：

> java.lang.StackOverflowError org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:112) org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:137) org.hibernate.collection.internal.PersistentBag .isEmpty(PersistentBag.java:249) it.trew.data.CategoriaFacade.getAlberoCategorie(CategoriaFacade.java:59)

在我的本地机器上，确实一切正常。在小型测试服务器上，读取类别时崩溃！

我怎样才能改善我的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:38:10.610

您的堆栈空间已超出。你在堆栈上放了太多数据。这可能是因为您使用了太多的局部变量（局部变量保存在堆栈中）或者因为递归深度太深或无限。

您可以做什么： 按此顺序：

1）检查无限递归。如果类别实体在其子列表中包含其自身或其父或祖先，则可能发生这种情况。在这种情况下，您会得到一个无限循环（由于无限递归），当堆栈已满时会中断，而这正是您遇到的异常。

要检查这一点，您可以查看您的数据库或调试代码，或者将递归深度打印到 System.out（您已经在参数中获得了深度`profondita`）。

如果没有不定式循环：

2) tmpList 在栈上。可能是，那里需要太多空间。将其作为参数而不是返回值（肯定不那么漂亮，但使用的资源更少）：

```
private void getAlberoCategorie(List<Categoria> list, Categoria root, int profondita) {
    root.setProfondita(profondita);
    if ( root.getParent() != null ) {
        list.add(root);
    }
    if (!root.getChildren().isEmpty()) {
        profondita++;
        for (Categoria figlia : root.getChildren()) {
            getAlberoCategorie(list, figlia,profondita); 
        }
    }
} 
```

如果这仍然没有帮助并且深度很深但不是无限的：

3）用迭代替换递归（常见的编程技术，但在这种情况下非常难看，因为这是为递归而设计的）。

可能1）（我猜）或2）会解决问题。

# jquery - JQUERY + 浏览器自动完成

> ID：10613611
> 
> 赞同：0
> 
> 时间：2012-05-16T07:07:00.067
> 
> 标签：jquery

我有一个输入并在其上发生自动完成 - 就像我假设的所有文本输入一样。

我一直在捕获 keyup() 事件以检查数据是否正确并让用户知道。

然而，自动完成会跳过 keyup() 事件——我应该如何捕获这个事件？我确实看到提到捕获密钥。这个对吗？

注意：我在这个页面上有一些输入类型的文本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:12:38.647

尝试绑定到**keyup**和**change**事件，例如：

```
$('yourInputTextEle').on('keyup change', function () {
    //your code here
}); 
```

你的意思是这样的吗。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:13:42.070

您需要使用结果扩展自动完成的创建。像这样的东西

```
$("#element").autocomplete("/url/")
    .result( 
        function (event, data, formatted) { 
            // Do something when selected
        }
    ); 
```

# ruby-on-rails - Ruby on Rails 功能测试

> ID：10613615
> 
> 赞同：0
> 
> 时间：2012-05-16T07:07:22.047
> 
> 标签：ruby-on-rails, functional-testing

我有这个代码：

```
 def test_create
    assert_difference('Comment.count') do
      post :create, :comment => {:comment => 'Comment'}
      assert_not_nil assigns(:comment)
      assert_equal assigns(:comment).comment, "Comment"
      assert_equal assigns(:comment).valid?, true
    end
    assert_response :redirect
    assert_redirected_to article_path(assigns(:comment))
    assert_equal flash[:notice], 'Comment was successfully created.'
  end 
```

并尝试对其进行测试，但它返回：

```
 test_create(CommentsControllerTest) [test/functional/comments_controller_test.rb:5]:
<nil> expected to not be nil. 
```

这段代码有什么问题？请帮助我，我是 Rails 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:20:46.157

它说“预计不会为零”。所以它在你检查注释变量的 assert_not_nil 行抱怨。

你有这个变量的问题。也许它不存在。

# python - curl Apache 设置访问 python 脚本

> ID：10613619
> 
> 赞同：0
> 
> 时间：2012-05-16T07:07:31.893
> 
> 标签：python, apache, curl

我有2个盒子。一个带有设置，另一个是我最近设置的。

设置已经可用的框我通过下面的 curl 命令看到我的程序输出：

```
curl "http://setup.com/~prakash_prasad/tools/runreport.py"

<?xml version="1.0"?>
<charts><showChart>True</showChart><transaction>
 Start;100;90;95
</transaction><transactionday>
 Start;20040;34460;45050
</transactionday></charts> 
```

其中 runreport.py 是一个 python 脚本，它访问 DB，获取数据并以格式化的 XML 格式打印它。

在我最近安装/配置 Apache 2.4.1 的另一个框中，当我通过浏览器点击该框时，会获得我的项目第一页。但是相同的后端脚本存在问题。我尝试在新的开发设置框中通过相同的 curl 测试输出：

```
curl "http://mybox.com:8181/runreport.py"

#!/usrbin/python

import cgi
import MySQLdb
from xml.dom.minidom import Document

print "Content-type: text/xml"
print

................... 
```

令人惊讶的是，我得到了 runreport.py 内容转储，而不是设置框中的程序输出转储？我应该启用什么 Apache 配置来转储与设置框相同的输出？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:15:20.383

在我看来，好像第二个盒子上的 Apache 不明白应该执行您的 python 脚本而不是作为下载文件提供。

# javascript - 想要拉伸 Flexigrid 中的最后一列

> ID：10613627
> 
> 赞同：7
> 
> 时间：2012-05-16T07:08:17.937
> 
> 标签：javascript, jquery, flexigrid

我没有找到任何方法以百分比形式在 flexigrid 中应用列宽。
我给出的绝对长度如下：

```
colModel : [
    {display:'ISO', width:50},
    {display:'Name', width:300},
    {display:'Printable Name', width:200},
    {display:'ISO3', width:200},
    {display:'Number Code', width:100},
], 
```

所以发生的事情是，当我调整最后一列的大小时，它的右侧有一个空白。请参考截图。

![在此处输入图像描述](../Images/40a543c3b57df65169c89afad9f2ac1a.png)

有没有办法让最后一列占据剩余空间，其余列是绝对的。此功能已在我们的应用程序中的 Flex 中实现，我无法知道它是如何完成的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T09:24:05.563

Hiya **demo** [http://jsfiddle.net/GNqZn/1/show](http://jsfiddle.net/GNqZn/1/show) **and** [http://jsfiddle.net/GNqZn/1/](http://jsfiddle.net/GNqZn/1/)

YOu probably need to write a custom function like this I wrote for this specific case in demo above:

In the demo above my table view had `700 width and 4 columns before number code hence 700/4`

Read here: [http://groups.google.com/group/flexigrid/browse_thread/thread/3da4473a5f467cea](http://groups.google.com/group/flexigrid/browse_thread/thread/3da4473a5f467cea)

Hope this will help you in right direction and demo will help you to play around. cheers!

D'uh this is no silver bullet but you can make it by tweaking for your specific need. :)

**UPDATE 5th June** To give OP a simple demo: [http://jsfiddle.net/2TkyR/22/](http://jsfiddle.net/2TkyR/22/) **or** [http://jsfiddle.net/gaNZR/11](http://jsfiddle.net/gaNZR/11) **or** [http://jsfiddle.net/gaNZR/11/show/](http://jsfiddle.net/gaNZR/11/show/)

If I may recommend it is vital if you read bit more about the plugin, play around a bit you will feel more confident.

*Please see an image attached below* All you need to do is add this customize function according to your needs.

Please Read this: [http://flexigrid.info/](http://flexigrid.info/) and some good tutorials & this: [http://www.kenthouse.com/blog/2009/07/fun-with-flexigrids/](http://www.kenthouse.com/blog/2009/07/fun-with-flexigrids/)

**Jquery code**

```
function GetColumnSize(percent){ 
    screen_res = (700/4)*0.95; // 700 is the width of table;
    col = parseInt((percent*(screen_res/100))); 
    if (percent != 100){ 
       // alert('foo= ' + col-18);
        return col-18; 
    }else{ 
       // alert(col);
        return col; 
    } 
} 
```

**call it like this** `width : GetColumnSize(100),`

```
 $("#flex1").flexigrid({
        url: 'post2.php',
        dataType: 'json',
        colModel : [
            {display: 'ISO', name : 'iso', width : 40, sortable : true, align: 'center'},
            {display: 'Name', name : 'name', width : 180, sortable : true, align: 'left'},
            {display: 'Printable Name', name : 'printable_name', width : 120, sortable : true, align: 'left'},
            {display: 'ISO3', name : 'iso3', width : 130, sortable : true, align: 'left', hide: true},
            {display: 'Number Code', name : 'numcode', width : GetColumnSize(100), sortable : true, align: 'right'}
            ], 
```

**2 Images below**

**Image 1** ![enter image description here](../Images/9089da4813c09f505f01821db197815f.png)

**Image 2** ![enter image description here](../Images/d7c3f42f3e49961c19e3901532096b25.png)

# xml - 通过使用 XSLT 保留第一次出现来删除重复的 XML 节点

> ID：10613629
> 
> 赞同：0
> 
> 时间：2012-05-16T07:08:23.090
> 
> 标签：xml, xslt

输入文件：

```
 <myroot>
        <nodeA id="a">
            <section id="i">  
                <item id="0" method="a"> <!-- parent section id="i" , keep this node-->
                    <somechild>a</somechild>
                </item>

                <item id="1" method="a">
                    <otherchild>a</otherchild>
                </item>
            </section>        

            <cell id="i">
                <part id="1" method="b"> <!-- parent cell id="i", keep this node-->
                    <attr>u</attr>
                </part>
            </cell>

            <section id="i">
                <item id="0" method="a"> <!-- parent section id="i", remove this node-->
                    <type>blah</type>
                </item>
                <item id="3" method="a">
                   <other>xx</other>    
                </item>

                <item id="0" method="b"> <!-- this has same id but different method, so we keep this -->
                    <otherchild>a</otherchild>
                </item>
            </section>

            <cell id="i">
                <part id="1" method="b"> <!-- parent cell id="i", remove this node -->
                    <attr>y</attr>
                </part>
            </cell>
        </nodeA>

        <nodeA id="b">
            <section id="i">
                <item id="1" method="a">
                    <otherchild>a</otherchild>
                </item>
            </section>        

            <section id="i">
                <item id="0" method="a">
                    <type>blah</type>
                </item>
                <item id="1" method="a">
                   <other>xx</other>    
                </item>
            </section>
           </nodeA>

        <nodeB id="a">
            <cell id="i">
                <part id="1" method="b">
                    <attr>u</attr>
                </part>
            </cell>

            <section id="i">
                <item id="0" method="a">
                    <type>blah</type>
                </item>                    
            </section>

            <cell id="i">
                <part id="1" method="b">
                    <attr>y</attr>
                </part>
            </cell>
        </nodeB>
</myroot> 
```

输出：

```
<myroot>
        <nodeA id="a">
            <section id="i">
                <item id="0" method="a">
                    <somechild>a</somechild>
                </item>

                <item id="1" method="a">
                    <otherchild>a</otherchild>
                </item>
            </section>

            <cell id="i">
                <part id="1" method="b">
                    <attr>u</attr>
                </part>
            </cell>

            <section id="i">
                <item id="3" method="a">
                   <other>xx</other>    
                </item>

              <item id="0" method="b"> <!-- this has same id but different method, so we keep this -->
                    <otherchild>a</otherchild>
                </item>
                </section>
        </nodeA>

        <nodeA id="b">
            <section id="i">
                <item id="1" method="a">
                    <otherchild>a</otherchild>
                </item>
            </section>        

            <section id="i">
                <item id="0" method="a">
                    <type>blah</type>
                </item>
            </section>
           </nodeA>

        <nodeB id="a">
            <cell id="i">
                <part id="1" method="b">
                    <attr>u</attr>
                </part>
            </cell>

            <section id="i">
                <item id="0" method="a">
                    <type>blah</type>
                </item>                    
            </section>
        </nodeB>

</myroot> 
```

任何人都可以帮助我进行转换，以便如果一个节点出现两次或多次并且具有相同的父 id，我们只保留第一次出现而忽略其他节点。文件中还有另一个元素，`<nodeB></nodeB>`即`<nodeC></nodeC>`. 等等。非常感谢。约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:02:49.047

我认为您需要定义一个键来“分组”重复项。似乎它们是根据节点名称、@id 和@method 属性以及父节点和@id 进行分组的。因此，您将像这样定义密钥：

```
<xsl:key 
   name="duplicates" 
   match="*" 
    use="concat(local-name(), '|', @id, '|', @method, '|', local-name(..), '|', ../@id, '|', local-name(../..), '|', ../../@id)"/> 
```

然后，您需要忽略不在键中的第一个元素。我认为您还需要一个子句来仅匹配“子”元素的元素（否则将忽略谁的部分元素）

```
<xsl:template 
   match="*
      [@id!='']
      [not(.//*[@id!=''])]
      [generate-id() != generate-id(key('duplicates', concat(local-name(), '|', @id, '|', @method, '|', local-name(..), '|', ../@id, '|', local-name(../..), '|', ../../@id))[1])]/> 
```

为了增加复杂性，您似乎不想输出所有子元素都是重复的元素。

```
<xsl:template 
   match="*
     [@id!='']
     [.//*[@id!='']]
     [not(.//*
        [not(.//*[@id!=''])]
        [generate-id() = generate-id(key('duplicates', concat(local-name(), '|', @id, '|', @method, '|', local-name(..), '|', ../@id, '|', local-name(../..), '|', ../../@id))[1])])
     ]" /> 
```

尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
   <xsl:output method="xml" indent="yes"/> 
   <xsl:key name="duplicates" match="*" use="concat(local-name(), '|', @id, '|', @method, '|', local-name(..), '|', ../@id, '|', local-name(../..), '|', ../../@id)"/> 
   <xsl:template match="@*|node()"> 
      <xsl:copy> 
         <xsl:apply-templates select="@*|node()"/> 
      </xsl:copy> 
   </xsl:template> 
   <xsl:template match="*[@id!=''][not(.//*[@id!=''])][generate-id() != generate-id(key('duplicates', concat(local-name(), '|', @id, '|', @method, '|', local-name(..), '|', ../@id, '|', local-name(../..), '|', ../../@id))[1])]"/> 
   <xsl:template match="*[@id!=''][.//*[@id!='']][not(.//*[not(.//*[@id!=''])][generate-id() = generate-id(key('duplicates', concat(local-name(), '|', @id, '|', @method, '|', local-name(..), '|', ../@id, '|', local-name(../..), '|', ../../@id))[1])])]"/> 
</xsl:stylesheet> 
```

当应用于您的示例 XML 时，将输出以下内容：

```
<myroot>
   <nodeA id="a">
      <section id="i">
         <item id="0" method="a"><!-- parent section id="i" , keep this node-->
            <somechild>a</somechild>
         </item>
         <item id="1" method="a">
            <otherchild>a</otherchild>
         </item>
      </section>
      <cell id="i">
         <part id="1" method="b"><!-- parent cell id="i", keep this node-->
            <attr>u</attr>
         </part>
      </cell>
      <section id="i">
         <item id="3" method="a">
            <other>xx</other>
         </item>
         <item id="0" method="b"><!-- this has same id but different method, so we keep this -->
            <otherchild>a</otherchild>
         </item>
      </section>
   </nodeA>
   <nodeA id="b">
      <section id="i">
         <item id="1" method="a">
            <otherchild>a</otherchild>
         </item>
      </section>
      <section id="i">
         <item id="0" method="a">
            <type>blah</type>
         </item>
      </section>
   </nodeA>
   <nodeB id="a">
      <cell id="i">
         <part id="1" method="b">
            <attr>u</attr>
         </part>
      </cell>
      <section id="i">
         <item id="0" method="a">
            <type>blah</type>
         </item>
      </section>
   </nodeB>
</myroot> 
```

# java - Java Swing - UI 块

> ID：10613630
> 
> 赞同：0
> 
> 时间：2012-05-16T07:08:25.850
> 
> 标签：java, swing, user-interface, concurrency, block

我有一个 GUI，在点击事件时，我正在调用数据库查询来生成多个图表。在完成所有图表之前，我看不到任何图表，这意味着 GUI 组件存在一些问题，在第一个图表完成并显示其内容之前，它会移动到下一个图表。可能的原因是什么以及如何避免此类问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:22:21.087

组件没有问题。你的设计有问题。您正在事件调度线程中运行的单个方法中执行长时间运行的查询和图表更新。通过这样做，EDT 将被完全阻塞，并且在所有查询都已运行并生成所有图表之前无法重新绘制任何内容。

每次完成一个查询时，使用后台线程执行查询，并在 EDT 中生成一个图表。SwingWorker 类有助于做到这一点。阅读[它的 API 文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)，以及关于 Swing 中并发[的教程。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

# facebook - 如何在 facebook 应用程序中选择 facebook 用户好友？

> ID：10613634
> 
> 赞同：0
> 
> 时间：2012-05-16T07:08:49.363
> 
> 标签：facebook, facebook-graph-api

我是 facebook 应用程序的新手。现在我正在开发 facebook 应用程序，当我们进入我们的个人资料和状态更新时，我想要一些效果，比如在 facebook 中，我们可以看到一个设施，比如谁和你在一起？意味着我们可以在我们当时所在的地方标记我们的 facebook 朋友。我想在我的 facebook 应用程序中使用这种效果，这样我就可以在我的朋友在哪里标记我的朋友？我有任何 api 来获取我们的 facebook 朋友并标记他们吗？
我试图结交朋友，但我只显示它我无法选择它们。
先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:14:52.383

尝试这个。

您可以通过向标签连接 PHOTO_ID/tags 发出 HTTP POST 请求来在照片上创建标签。

[https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)

# ruby-on-rails - ruby on rails using bootstrap - 在表单中的输入字段前添加文本和附加按钮

> ID：10613636
> 
> 赞同：0
> 
> 时间：2012-05-16T07:08:57.723
> 
> 标签：ruby-on-rails, twitter-bootstrap

我在我的 gemfile 中使用了 bootstrap-sass 2.0.0，但是我无法将前置和附加的内容都添加到表单中的输入标签中才能正常工作。

我在 FireBug 上使用 FireFox 并复制了他们在 twitter bootstrap 网站上用于示例的确切 html，复制到这里：

```
div class="control-group">
  <label class="control-label" for="appendedPrependedInput">Append and prepend</label>
  <div class="controls">
    <div class="input-prepend input-append">
      <span class="add-on">$</span>
      <input id="appendedPrependedInput" class="span2" type="text" size="16">
      <span class="add-on">.00</span>
    </div>
  </div>
</div> 
```

但是我得到的前置文本面对错误的方式（它看起来像附加的标签）所以它看起来像这样：[span）[.....input....][span）而不是这个：（span ][.....输入.....][跨度）。

附加的按钮也不会像这样注册为附加的（也使用示例中的复制代码）： (....input....) (button) 而不是 (....input.....][按钮）

关于我如何做到这一点的任何想法： (span][....input....][button) ？我已经尝试过下面的代码：

```
<form class="form-inline">
  <div class="control-group">
    <div class="controls">
      <div class="input-prepend input-append">
        <span class="add-on">Search</span>
        <input id="search" class="input-xlarge" type="text" size="16">
        <button class="btn" type="button">Go!</button>
      </div>
    </div>
  </div>
</form> 
```

我感谢任何和所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:35:06.600

您有正确的想法，您只需将要附加/前置或附加/前置的所有内容放在一行中，没有空格。

像这样：

```
<form class="form-inline">
  <div class="control-group">
    <div class="controls">
      <div class="input-prepend input-append">
        <span class="add-on">Search</span><input id="search" class="input-xlarge" type="text" size="16"><button class="btn" type="button">Go!</button>
      </div>
    </div>
  </div>
</form> 
```

我在自己的 Bootstrap 设置上对此进行了测试，它显示正确。

# java - Java中的Dealock帮助解释Groovy中的Jstack

> ID：10613638
> 
> 赞同：-2
> 
> 时间：2012-05-16T07:09:02.230
> 
> 标签：java, groovy, deadlock

我有一个 java 死锁似乎是 groovy 的问题。需要建议。

发现一个 Java 级别的死锁

```
"http-26100-Processor20":
  waiting to lock monitor 0x00007fc22f725b70 (object 0x00007fc248a51a58, a java.lang.Object),
  which is held by "MEC"

"MEC":
  waiting to lock monitor 0x000000000358e2e8 (object 0x00007fc248aed588, a java.beans.PropertyDescriptor),
  which is held by "IOC"

"IOC":
  waiting to lock monitor 0x00007fc22f725b70 (object 0x00007fc248a51a58, a java.lang.Object),
  which is held by "MEC"

Java stack information for the threads listed above

"http-26100-Processor20":
    at java.beans.Introspector.getBeanInfo(Introspector.java:157)
    - waiting to lock <0x00007fc248a51a58> (a java.lang.Object)
    at groovy.lang.MetaClassImpl$15.run(MetaClassImpl.java:2940)
    at java.security.AccessController.doPrivileged(Native Method)
    at groovy.lang.MetaClassImpl.addProperties(MetaClassImpl.java:2938)
    at groovy.lang.MetaClassImpl.initialize(MetaClassImpl.java:2921)
    - locked <0x00007fc42e5e48a0> (a groovy.lang.ExpandoMetaClass)
    at groovy.lang.ExpandoMetaClass.initialize(ExpandoMetaClass.java:463)
    - locked <0x00007fc42e5e48a0> (a groovy.lang.ExpandoMetaClass)
    at org.codehaus.groovy.reflection.ClassInfo.getMetaClassUnderLock(ClassInfo.java:166)
    at org.codehaus.groovy.reflection.ClassInfo.getMetaClass(ClassInfo.java:182)
    at org.codehaus.groovy.runtime.callsite.ClassMetaClassGetPropertySite.(ClassMetaClassGetPropertySite.java:35)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.createClassMetaClassGetPropertySite(AbstractCallSite.java:304)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.createGetPropertySite(AbstractCallSite.java:256)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.acceptGetProperty(AbstractCallSite.java:243)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGetProperty(AbstractCallSite.java:235)
    at org.codehaus.groovy.grails.plugins.springsecurity.ReflectionUtils.getConfigProperty(ReflectionUtils.groovy:34)
    at org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils.isAjax(SpringSecurityUtils.java:296)
    at org.codehaus.groovy.grails.plugins.springsecurity.AjaxAwareAuthenticationEntryPoint.determineUrlToUseForThisRequest(AjaxAwareAuthenticationEntryPoint.java:35)
    at org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint.buildRedirectUrlToLoginPage(LoginUrlAuthenticationEntryPoint.java:151)
    at org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint.commence(LoginUrlAuthenticationEntryPoint.java:141)
    at org.springframework.security.web.access.ExceptionTranslationFilter.sendStartAuthentication(ExceptionTranslationFilter.java:178)
    at org.springframework.security.web.access.ExceptionTranslationFilter.handleException(ExceptionTranslationFilter.java:157)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:117)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:112)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.codehaus.groovy.grails.plugins.springsecurity.IpAddressFilter.doFilter(IpAddressFilter.java:75)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:167)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:69)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Thread.java:662)

"MEC":
    at java.beans.PropertyDescriptor.getReadMethod(PropertyDescriptor.java:158)
    - waiting to lock <0x00007fc248aed588> (a java.beans.PropertyDescriptor)
    at java.beans.Introspector.processPropertyDescriptors(Introspector.java:683)
    at java.beans.Introspector.getTargetPropertyInfo(Introspector.java:615)
    at java.beans.Introspector.getBeanInfo(Introspector.java:407)
    at java.beans.Introspector.getBeanInfo(Introspector.java:164)
    - locked <0x00007fc248a51a58> (a java.lang.Object)
    at groovy.lang.MetaClassImpl$15.run(MetaClassImpl.java:2940)
    at java.security.AccessController.doPrivileged(Native Method)
    at groovy.lang.MetaClassImpl.addProperties(MetaClassImpl.java:2938)
    at groovy.lang.MetaClassImpl.initialize(MetaClassImpl.java:2921)
    - locked <0x00007fc42e910328> (a groovy.lang.ExpandoMetaClass)
    at groovy.lang.ExpandoMetaClass.initialize(ExpandoMetaClass.java:463)
    - locked <0x00007fc42e910328> (a groovy.lang.ExpandoMetaClass)
    at org.codehaus.groovy.reflection.ClassInfo.getMetaClassUnderLock(ClassInfo.java:166)
    at org.codehaus.groovy.reflection.ClassInfo.getMetaClass(ClassInfo.java:182)
    at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.getMetaClass(MetaClassRegistryImpl.java:210)
    at org.codehaus.groovy.runtime.InvokerHelper.getMetaClass(InvokerHelper.java:751)
    at groovy.lang.GroovyObjectSupport.(GroovyObjectSupport.java:32)
    at groovy.lang.Closure.(Closure.java:100)
    at Script1$_run_closure1.(Script1.groovy)
    at Script1.run(Script1.groovy:1)
    at Script1$run.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at Script1$run.call(Unknown Source)

"IOC":
    at java.beans.Introspector.getPublicDeclaredMethods(Introspector.java:1277)
    - waiting to lock <0x00007fc248a51a58> (a java.lang.Object)
    at java.beans.Introspector.internalFindMethod(Introspector.java:1312)
    at java.beans.Introspector.findMethod(Introspector.java:1383)
    at java.beans.Introspector.findMethod(Introspector.java:1363)
    at java.beans.PropertyDescriptor.getReadMethod(PropertyDescriptor.java:179)
    - locked <0x00007fc248aed588> (a java.beans.PropertyDescriptor)
    at groovy.lang.MetaClassImpl.applyPropertyDescriptors(MetaClassImpl.java:2215)
    at groovy.lang.MetaClassImpl.setupProperties(MetaClassImpl.java:1995)
    at groovy.lang.MetaClassImpl.addProperties(MetaClassImpl.java:2950)
    at groovy.lang.MetaClassImpl.initialize(MetaClassImpl.java:2921)
    - locked <0x00007fc42e6276d0> (a groovy.lang.ExpandoMetaClass)
    at groovy.lang.ExpandoMetaClass.initialize(ExpandoMetaClass.java:463)
    - locked <0x00007fc42e6276d0> (a groovy.lang.ExpandoMetaClass)
    at org.codehaus.groovy.reflection.ClassInfo.getMetaClassUnderLock(ClassInfo.java:166)
    at org.codehaus.groovy.reflection.ClassInfo.getMetaClass(ClassInfo.java:182)
    at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.getMetaClass(MetaClassRegistryImpl.java:210)
    at org.codehaus.groovy.runtime.InvokerHelper.getMetaClass(InvokerHelper.java:751)
    at groovy.lang.GroovyObjectSupport.(GroovyObjectSupport.java:32)
    at groovy.lang.Closure.(Closure.java:100) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:28:13.750

这是 Groovy 的一个已知问题，其代码超出了我们的控制范围（由 BeanInfo 获取的锁）。这通常发生在应用程序启动的重负载下。您能否向我们提供有关发生这种情况的背景的更多信息？

# asp.net-mvc-3 - 将夏普架构从 1.9.6 升级到 2.0.x

> ID：10613641
> 
> 赞同：2
> 
> 时间：2012-05-16T07:09:18.063
> 
> 标签：asp.net-mvc-3, sharp-architecture

我有一个使用 Sharp Architecture 1.9.6 构建的现有 ASP.NET MVC3 站点，我想升级到 2.0.4。

我使用 NuGet 来：`Update-Package sharp-architecture`. 显然存在许多编译问题......所以我一直在尝试使用[版本历史](https://github.com/sharparchitecture/Sharp-Architecture/blob/master/VersionHistory.txt)作为粗略指南来更新参考。

不幸的是，它并没有太大帮助，因为像 SharpArch.Infrastructure 这样的命名空间似乎已经在 2.0.0 --> 2.0.4 之间消失了，这很奇怪，因为我认为他们使用了语义版本控制......但无论如何......

我一直在网上搜索有关如何升级的指南，但没有发现任何有用的信息。即使阅读了[尖锐的架构博客](http://blog.sharparchitecture.net/)也没有帮助我解决这个问题......

那么有谁知道是否有关于如何升级到 2.0.x 版本的指南？当然，这一定是可能的。还是希望使用 Templify 建立一个新站点？

# c# - 如何创建 For_Each_With_Condition_With_Index 扩展方法 (EM)

> ID：10613642
> 
> 赞同：1
> 
> 时间：2012-05-16T07:09:18.183
> 
> 标签：c#, extension-methods

我有一个`ForEachWithIndex`EM

```
static void ForEachWithIndex<T>(this IEnumerable<T> enu, Action<T, int> action)
{
    int i = 0;
    foreach(T item in enu)
        action(item, i++);
} 
```

我这样称呼它

```
my_int_array.ForEachWithIndex((x, i) => x += i); 
```

现在我想创建一个检查条件然后执行该操作的设备。

通常我在上面使用

```
my_int_array.ForEachWithIndex((x,i) => 
{
    if (x != 0)
        x += i;
}); 
```

我想要一个将那个条件也作为参数的 EM。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:12:55.693

我会尽量避免构建一个可以完成所有工作的大型扩展方法。打破它，就像 LINQ 一样。

就我个人而言，我实际上不会做*任何*这些——我会用 LINQ 构建一个查询，然后使用一个`foreach`语句来执行该操作：

```
// Assuming you want the *original* indexes
var query = array.Select((Value, Index) => new { value, Index })
                 .Where(pair => pair.Index != 0);

foreach (var pair in query)
{
    // Do something
} 
```

很难确切知道您要做什么，因为增加 lambda 参数不会真正实现任何目标。不过，我强烈*建议*您考虑编写积木……您可能会发现Eric Lippert 对[vs](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)[的看法`foreach``ForEach`](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:15:00.217

只需将条件委托添加到参数列表：

```
static void ForEachWithIndexWithCondition<T>(this IEnumerable<T> enu, 
                     Func<T, int, bool> condition, Action<T, int> action)
{
    int i = 0;
    foreach (T item in enu)
    {
        if (condition(item, i))
            action(item, i);
        i++;
     }
} 
```

用法：

```
 var list = new List<string> { "Jonh", "Mary", "Alice", "Peter" };

        list.ForEachWithIndexWithCondition(
            (s, i) => i % 2 == 0,
            (s, i) => Console.WriteLine(s)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:27:37.780

您需要传递一个额外的 Func 参数，如下所示：

```
public static void ForEachWithIndex<T>(this IEnumerable<T> enu,
                           Action<T, int> action, Func<T, int, bool> condition)
{
    int i = 0;
    foreach (T item in enu)
    {
        if (condition(item, i))
        {
            action(item, i);
        }
        ++i;
    }
} 
```

这就是您的示例代码的样子：

```
my_int_array.ForEachWithIndex((x, i) => x += i, (x, i) => x != 0); 
```

# regex - 用 sed 替换两个已知字符串之间的未知字符串

> ID：10613643
> 
> 赞同：32
> 
> 时间：2012-05-16T07:09:35.147
> 
> 标签：regex, bash, sed

我有一个包含以下内容的文件：

`WORD1 WORD2 WORD3`

如何使用 sed 将 WORD1 和 WORD3 之间的字符串替换为`foo`，从而将文件的内容更改为以下内容？：

`WORD1 foo WORD3`

我尝试了以下方法，但显然我遗漏了一些东西，因为这不会产生预期的结果：

`sed -i '' 's/WORD1.*WORD3/foo/g' file.txt`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-16T07:13:21.243

```
sed -i 's/WORD1.*WORD3/WORD1 foo WORD3/g' file.txt 
```

或者

```
sed -i 's/(WORD1).*(WORD3)/\1 foo \2/g' file.txt 
```

您可能需要转义圆括号，具体取决于您的 sed 变体。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T10:02:31.133

这可能对您有用：

```
sed 's/\S\+/foo/2' file 
```

也许：

```
sed 's/[^[:space:]][^[:space:]]*/foo/2' file 
```

如果`WORD1`和`WORD3`出现不止一次：

```
echo "WORD1 WORD2 WORD3 BLA BLA WORD1 WORD4 WORD3" |
sed 's/WORD3/\n&/g;s/\(WORD1\)[^\n]*\n/\1 foo /g'
WORD1 foo WORD3 BLA BLA WORD1 foo WORD3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T08:24:17.953

样品内容`file.txt`

```
$ cat file.txt 
WORD1 WORD2 WORD3
WORD4 WORD5 WORD6
WORD7 WORD8 WORD9 
```

（[@DennisWilliamson](https://stackoverflow.com/users/26428/dennis-williamson)在评论中更正）
`$ sed -e 's/\([^ ]\+\) \+\([^ ]\+\) \+\(.*\)/\1 foo \3/' file.txt`

```
WORD1 foo WORD3
WORD4 foo WORD6
WORD7 foo WORD9 
```

while`awk`在某种程度上更简单

`$ awk -F' ' '{ print $1" foo "$3 }' file.txt`

```
WORD1 foo WORD3
WORD4 foo WORD6
WORD7 foo WORD9 
```

# mysql - 将函数输出转换为列名

> ID：10613644
> 
> 赞同：0
> 
> 时间：2012-05-16T07:09:53.343
> 
> 标签：mysql

我遇到了一个场景，我需要将函数的输出“转换”为我要选择的列名：

```
(SELECT
LOWER(DATE_FORMAT(NOW(), '%b'))
FROM lang_months
WHERE langRef = lang_statements.langRef
) AS month 
```

只返回预期的当前月份，但我希望在这种情况下选择名为“may”的列。

我该怎么做？

* * *

谢谢，你的回答给了我一个想法。我只是将当前日期放入一个变量中，并在查询中使用它，如下所示：

$thisMonth = strtolower(date('M')) ;

```
(SELECT
$thisMonth
FROM lang_months
WHERE langRef = lang_statements.langRef
) AS month 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:19:17.433

这是不可能的。当查询到达 MySQL 时，必须知道实体的名称。

最简单的选择可能是确定您使用的任何语言的列名，然后只使用它。例如，在 PHP 中：

```
$col = 'someAlias';
$query = "SELECT blah as `{$col}` FROM tbl"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:17:49.843

我不认为这是可能的。

您可以创建一个视图，为您的数据提供此视图，以便他们更有表现力地查询它，但您仍然必须手动编写这 12 个子查询和别名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:42:53.480

这应该有效：

```
$month = LOWER(DATE_FORMAT(NOW(), '%b'));       // Results in 'may'
$result = mysql_query('SELECT * FROM $month');  // Returns all records in table 'may' 
```

# java - 如何清理缓存 JAVA 应用程序

> ID：10613648
> 
> 赞同：2
> 
> 时间：2012-05-16T07:10:10.750
> 
> 标签：java, http

我已经使用 java.net 库制作了一个应用程序来捕获网页打开所花费的时间..示例代码

```
 HttpURLConnection conn = (HttpURLConnection)url.openConnection();
 for(int i=0; i<20; i++ )
  {
   conn.disconnect();
   conn.connect();
   long starTime = System.currentTimeMillis();
   JEditorPane editorPane = new JEditorPane();
   editorPane.setPage(new URL());
   long elasedTime = System.currentTimeMillis() - starTime;
   System.out.println(elasedTime);
  } 
```

但我面临一个问题，缓存！如果我反复打开网页，那么在某些情况下它会显示 time=0 mills ......这当然是不可能的，请任何人帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:21:22.023

`setUseCaches()`，继承自`URLConnection`，应该提供所需的内容：

```
公共无效 setUseCaches（布尔使用缓存）

将此 URLConnection 的 useCaches 字段的值设置为
指定的值。

一些协议会缓存文档。有时候，重要的是
能够“通过”并忽略缓存（例如，“重新加载”按钮
浏览器）。如果连接上的 UseCaches 标志为真，则连接为
允许使用它可以使用的任何缓存。如果为 false，缓存将被忽略。
默认值来自DefaultUseCaches，默认为true。

```

它必须在`connect()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:07:41.500

rahul ，您的程序中有一个巨大的错误。您的程序没有给出预期的结果，因为您没有正确编写它，特别是您的程序根本没有测量网页打开所花费的时间。

试试这个代码-->

```
HttpURLConnection conn = (HttpURLConnection)url.openConnection();
 for(int i=0; i<20; i++ )
  {
   long starTime = System.currentTimeMillis();       
   conn.connect();

   JEditorPane editorPane = new JEditorPane();
   editorPane.setPage(new URL());

   long elasedTime = System.currentTimeMillis() - starTime;
   System.out.println(elasedTime);

   conn.disconnect();
  } 
```

奇怪，没有人能注意到你程序中的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T07:21:06.033

您可以通过设置选择不使用任何现有缓存`conn.setUseCaches(false)`。这可能会提高计算的准确性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T07:21:01.357

`URLConnection`您可以在（或`HttpURLConnection`）中禁用缓存。

看

*   [URLConnection.useCaches](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URLConnection.html#useCaches)
*   [URLConnection.setUseCaches()](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URLConnection.html#useCaches)
*   [URLConnection.setDefaultUseCaches()](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URLConnection.html#setUseCaches%28boolean%29)。

# c# - 将 DropDownListbox 与数据集绑定时出错？

> ID：10613661
> 
> 赞同：0
> 
> 时间：2012-05-16T07:11:15.457
> 
> 标签：c#, asp.net, data-binding, dataset, database-connection

我正在尝试填充我的列表框，并且只能用 System.Data.Datarow 填充它 5 次，女巫是我数据库中的条目数量。

我需要将我的列表框与我的数据库链接，以便我可以使用它来选择要更改的项目，所以不想只是填充它而是绑定它。

我似乎找不到**ValueMember**和**DisplayMember**属性。我认为这可能是因为我正在使用 webForms 进行编程。

我的代码：

```
using (var conn = new SqlConnection(Properties.Settings.Default.DBConnectionString))
{
      conn.Open();

      SqlDataAdapter daTags = new SqlDataAdapter("Select * From Tag", conn);

      DataSet dsTags = new DataSet("TagCloud");

      daTags.FillSchema(dsTags, SchemaType.Source, "Tag");
      daTags.Fill(dsTags, "Tag");

      daTags.MissingSchemaAction = MissingSchemaAction.AddWithKey;
      daTags.Fill(dsTags, "Tag");

      DataTable tblTag;
      tblTag = dsTags.Tables["Tag"];

      dplTags.DataSource = dsTags;
      dplTags.DataMember = "Tag"; 
      dplTags.DataBind();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:14:34.100

您还应该指定[DataValueField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield.aspx) (ValueMember) 和[DataTextField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextfield.aspx) (DisplayMember) 属性。

# java - Java 应用程序无法连接到 IP，但我可以 ping 它

> ID：10613663
> 
> 赞同：0
> 
> 时间：2012-05-16T07:11:29.517
> 
> 标签：java, ping, hosts-file

我有一个播放应用程序连接到 1.2.3.4 的数据库，但出于某种原因播放！（以及其他 Java 应用程序）无法连接到它。

我确实尝试编辑主机文件并为 IP 设置一个名称，`app01 1.2.3.4`但是它只适用于托管数据库的盒子，它不适用于外部机器。我可以确认在 iptables 中打开了正确的端口，并且我也尝试过重新启动它。

如果我从同一个盒子在 1.2.3.4 的 4567 端口 ping postgres，它就可以工作。但是在我的 java 应用程序中设置相同的 IP 地址失败。怎么了？是权限问题还是 iptables 问题？谢谢。

堆栈跟踪：

```
Caused by: java.net.NoRouteToHostException: No route to host
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
        at java.net.Socket.connect(Socket.java:546)
        at java.net.Socket.connect(Socket.java:495)
        at java.net.Socket.<init>(Socket.java:392)
        at java.net.Socket.<init>(Socket.java:206)
        at org.postgresql.core.PGStream.<init>(PGStream.java:62)
        at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:76)
        ... 35 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:16:23.143

您可以检查数据库服务器上的防火墙设置吗？您可以尝试通过telnet 来检查您是否能够连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:16:46.077

您可以通过 pgadmin (http://www.pgadmin.org/) 连接到您的数据库吗？您可以通过给定端口（telnet 1.2.3.4 4567）从您的机器远程登录到数据库服务器吗？如果您无法 telnet，可能是 DB 服务器阻止了您的连接？您是否为 java 或仅为系统的其余部分设置了任何代理服务器？从例外来看，它似乎更像是一个网络问题，而不是 java 的任何问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:36:11.450

如果您在路由器后面，您将能够从另一台本地计算机（使用本地 IP）ping 它，但如果您没有正确进行端口转发，您可能无法从外部 ping（您可以从你的路由器）。

要记住的另一件事是，您无法从网络内 ping 您自己的外部 IP，这意味着您可以从 192.168.1.xx（客户端）ping 192.168.1.100（服务器），但您无法 ping来自 192.168.1.xx（客户端）的 72.15.xx.xx（端口转发到 192.168.1.100）。

为了做到这一点，您必须使用外部工具，有很多网站可以为您做到这一点，这是我使用的一个：

[http://www.yougetsignal.com/tools/open-ports/](http://www.yougetsignal.com/tools/open-ports/)

如果它说端口是打开的，那么它是打开的，它现在应该可以工作，如果它显示为关闭，那么你应该仔细检查你的防火墙是否允许数据，也许暂时关闭它以查看它，这就是问题。

如果您需要帮助将端口例外添加到防火墙或从路由器转发端口，请告诉我您正在使用哪个发行版/路由器型号，我会尝试为您挖掘更多信息。

# perl - modperl 使用模块时出现内部服务器错误

> ID：10613669
> 
> 赞同：2
> 
> 时间：2012-05-16T07:11:55.630
> 
> 标签：perl, module, internal-server-error

我尝试编写一个 perl_mod 脚本，但它说：“内部服务器错误”。

这是模块文件：（mm1.pm）

```
package mm1;
use strict;
use XML::Simple;
use DBI;

require Exporter;
our @ISA = qw(Exporter);
our @EXPORT_OK = qw(asd);
our @EXPORT = qw(asd);

sub asd(){
    print "2222";
} 
```

这是主文件：（main.perl）

```
#!/usr/bin/perl -w
use strict;
use CGI qw/:standard/;
use CGI::Carp qw/fatalsToBrowser warningsToBrowser/;
use mm1;

print header(-type => 'text/html', -charset=>'utf-8');
print "asdasd"; 
```

如果我尝试在没有“使用 mm1;”的情况下运行 这个 main.perl 然后成功了。

问题是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:39:07.300

那不是 mod_perl 模块，而是 CGI 程序。

（第一个）问题几乎可以肯定是您`1;`从模块文件的末尾省略了 。但是查看 Web 服务器错误日志将确认这一点。

# c - TCP 回显服务器中的绑定错误

> ID：10613697
> 
> 赞同：0
> 
> 时间：2012-05-16T07:14:02.350
> 
> 标签：c, tcp

我正在尝试在本地主机上的 Ubuntu 11.04 中实现 TCP 回显服务器和客户端程序。但是，我陷入了绑定功能。这是我的代码。

**TCP服务器**

```
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<arpa/inet.h>
#include<string.h>
#include<stdio.h>
#include<stdlib.h>

struct sockaddr_in serv_addr,cli_addr;
int listenfd,r,w,connfd,val,cli_addr_len;
unsigned short serv_port=30000;
char serv_ip[]="127.0.0.1";
char rbuff[128];
char sbuff[128];

int main()
{
    bzero(&serv_addr,sizeof(serv_addr));
    serv_addr.sin_family=AF_INET;
    serv_addr.sin_port=htons(serv_port);
    inet_aton(serv_ip,(&serv_addr.sin_addr));
    printf("\nTcp Echo server.\n");
    //creating socket

    if(listenfd=socket(AF_INET,SOCK_STREAM,0)<0)
    {
        printf("\nServer Error:Cannot create socket.\n");
        exit(1);
    }
    if(bind(listenfd,(struct sockaddr*)&serv_addr,sizeof(serv_addr))<0)
    {
        printf("\nServer Error:cannot Bind.\n");
        close(listenfd);
        exit(1);
    }
    if((listen(listenfd,5))<0)
    {
        printf("\nServer Error:Cannot listen.\n");
        close(listenfd);
        exit(1);
    }
    cli_addr_len=sizeof(cli_addr);
    for(;;)
    {
        printf("\nServer:listening for clients.... Press Control +C to stpo echo server :\n");
        if((connfd=accept(listenfd,(struct sockaddr*)&cli_addr,&cli_addr_len))<0)
        {
            printf("\nServer Error:Cannot accept client connections.\n");
            close(listenfd);
            exit(1);
        }
        printf("\nServer:connection from client %s accepted.\n",inet_ntoa(cli_addr.sin_addr));
        if((r=read(connfd,rbuff,128))<0)
            printf("\nServer Error:Cannot receive message from client.\n");
        else
        {
            rbuff[r]='\0';
            if((w=write(connfd,rbuff,128))<0)
                printf("\nServer Error:cannot send message to the client.\n");
            else
                printf("Echoed back %s to %s.\n",rbuff,inet_ntoa(cli_addr.sin_addr));
        }
    }
} 
```

在 ubuntu 中的 GCC 中编译后，我遇到了绑定错误。我只上传了整个代码，因为我自己没有收到任何错误并且需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:26:46.603

就在代码的错误下方：

```
if(listenfd=socket(AF_INET,SOCK_STREAM,0)<0)
{
    printf("\nServer Error:Cannot create socket.\n");
    exit(1);
} 
```

“=”的优先级低于“<”，修改如下，你的程序就ok了：

```
if( (listenfd = socket(AF_INET,SOCK_STREAM,0)) < 0)
{
    printf("\nServer Error:Cannot create socket.\n");
    exit(1);
} 
```

# java - 如何为我的程序生成一个工作 jar 文件？

> ID：10613698
> 
> 赞同：3
> 
> 时间：2012-05-16T07:14:16.313
> 
> 标签：java, jar, jsoup

我对java很陌生，事实上这是我的第一个程序。我似乎在为我的 java 程序生成 jar 文件时遇到问题。这是一个非常基本的程序，它仅从网站获取数据，然后将其显示在 gui 中。该程序依赖于 Jsoup 和 HtmlCleaner。gui 是用 JFormDesigner 制作的。

回到问题上来，当我使用 eclipse 运行程序时，一切运行良好。没有任何问题。但是，当我将它作为导出的 jar（或使用 Jar Maker 制作的 jar）运行时，GUI 甚至都不会出现。奇怪的是，当我用一个`.bat`文件运行它时，GUI 会显示，但程序并没有做它应该做的事情。

我真的被卡住了，我不知道下一步该尝试什么。任何帮助将不胜感激。

```
//package com.stackoverflow.q2835505;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import java.awt.*;

import javax.swing.*;

import com.sun.xml.internal.ws.util.StringUtils;

public class TestDumper extends JFrame {
public static String test = "+";
public static String test1 = "-";
public static String itemID;
public static String stab;
public static String slash;
public static String crush;
public static String magic;
public static String range;
public static String stabDef;
public static String slashDef;
public static String crushDef;
public static String magicDef;
public static String rangeDef;
public static String Str;
public static String Prayer;
public static String lowAlch;
public static String highAlch;
public static String Name;
public boolean guiWait = false;
public static boolean printed = true;

    public static void main(String[] args) throws Exception {
        statGrabber g = new statGrabber();
        g.setDefaultCloseOperation(EXIT_ON_CLOSE);
        g.setVisible(true);

        for ( ; ; ) {
        while(g.test){
        String url = g.textField2.getText();
        Document document = Jsoup.connect(url).get();
        stab = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(2).text();
        slash = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(3).text();
        crush = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(4).text();
        magic = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(5).text();
        range = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(6).text();
        stabDef = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(7).text();
        slashDef = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(8).text();
        crushDef = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(9).text();
        magicDef = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(10).text();
        rangeDef = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(11).text();
        Str = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(16).text();
        Prayer = document.select("table.wikitable.smallpadding tbody tr td").tagName("TD").eq(17).text();
        Name = document.select("table.wikitable.infobox caption b").text();
        highAlch = document.select("table.wikitable.infobox tbody tr td").tagName("TD").eq(8).text();
        lowAlch =  document.select("table.wikitable.infobox tbody tr td").tagName("TD").eq(9).text();
        g.sweet = true;
       // String shopPrice = document.select("table.wikitable.infobox tbody tr td").tagName("TD").eq(11).text();

       if(stab.startsWith(test)){
           stab = stab.substring(1);
       }
       if(slash.startsWith(test)){
           slash = slash.substring(1);
       }
       if(crush.startsWith(test)){
           crush = crush.substring(1);
       }
       if(magic.startsWith(test)){
           magic.trim();
           magic = magic.substring(1);
       }
       if(range.startsWith(test)){
           range.trim();
           range = range.substring(1);
       }
       if(stabDef.startsWith(test)){
           stabDef = stabDef.substring(1);
       }
       if(slashDef.startsWith(test)){
           slashDef = slashDef.substring(1);
       }
       if(crushDef.startsWith(test)){
           crushDef = crushDef.substring(1);
       }
       if(magicDef.startsWith(test)){
           magicDef.trim();
           magicDef = magicDef.substring(1);
       }
       if(rangeDef.startsWith(test)){
           rangeDef.trim();
           rangeDef = rangeDef.substring(1);
       }
       if(Str.startsWith(test)){
           Str.trim();
           Str = Str.substring(1);
       }
       if(Prayer.startsWith(test)){
           Prayer.trim();
           Prayer = Prayer.substring(1);
       }

       if(highAlch.equalsIgnoreCase("Cannot be alchemised")){
           highAlch = "0";
           lowAlch = "0";
       }
       else{
           highAlch = highAlch.replace(",", "");
           highAlch = highAlch.replace(" ", "");
           highAlch = highAlch.replace("c", "");
           highAlch = highAlch.replace("o", "");
           highAlch = highAlch.replace("i", "");
           highAlch = highAlch.replace("n", "");
           highAlch = highAlch.replace("s", "");

           lowAlch = lowAlch.replace(",", "");
           lowAlch = lowAlch.replace(" ", "");
           lowAlch = lowAlch.replace("c", "");
           lowAlch = lowAlch.replace("o", "");
           lowAlch = lowAlch.replace("i", "");
           lowAlch = lowAlch.replace("n", "");
           lowAlch = lowAlch.replace("s", "");
       }

       while(printed){
        System.out.print("item = "+ itemID+"\t");
        System.out.print(Name.replace(" ", "_")+"\t");
        System.out.print(Name.replace(" ", "_")+"\t");
        System.out.print(highAlch+"\t");
        System.out.print(lowAlch+"\t");
        System.out.print("0\t");
        System.out.print(stab+"\t");
        System.out.print(slash+"\t");
        System.out.print(crush+"\t");
        System.out.print(magic+"\t");
        System.out.print(range+"\t");
        System.out.print(stabDef+"\t");
        System.out.print(slashDef+"\t");
        System.out.print(crushDef+"\t");
        System.out.print(magicDef+"\t");
        System.out.print(rangeDef+"\t");
        System.out.print(Str+"\t");
        System.out.print(Prayer+"\n");
        System.out.print("Connected!\n");
        printed = false;
       }
        }
    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:44:45.570

在eclipse中，您可以右键单击项目名称

*   选择导出
*   在 Java 类别中选择 Runable JAR 文件
*   选择主类的配置（如果没有找到，你应该先运行你的应用程序）
*   设置导出目的地
*   选择将需要的库复制到子文件夹中
*   结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:01:16.497

导出 jar 时，可以在 jar manifest.mf 文件中将依赖 jar 指定为 Class-Path 条目。您可以在此链接中找到更多详细信息：http: [//docs.oracle.com/javase/tutorial/deployment/jar/downman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)。一旦你没有这样做，请确保相应的依赖 jar 将在类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:28:15.297

您可以使用 Eclipse IDE 生成 .jar 文件。您还可以将图像或媒体文件等资源文件添加到 .jar 中。

# javascript - Blogger 不会在其中保存带有此 javascript 的模板

> ID：10613712
> 
> 赞同：1
> 
> 时间：2012-05-16T07:15:18.003
> 
> 标签：javascript, blogger

当我在其中包含这段 javascript 时，模板不会保存：

```
 var minutes = secs / 60;
    var seconds = secs % 60;

     if ( seconds<10 ) {
            var extrazero = &quot;:0&quot;
    }
    else {
             extrazero = &quot;:&quot;
    } 
```

我已将其缩小到条件中的 < 符号。如果我将其更改为 = 符号，它会保存，但如果我有 < 符号，则会出现以下错误：

解析 XML 时出错，第 2741 行，第 16 列：元素的内容必须由格式正确的字符数据或标记组成。

编辑：我发现有人说在 javascript 周围放置 cdata 标签对他们有用。它确实保存但不起作用。

```
 //<![CDATA[   javascript here   //]]> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:28:56.090

只需在此处解析您的 Javascript 代码[http://www.blogcrowds.com/resources/parse_html.php](http://www.blogcrowds.com/resources/parse_html.php)然后粘贴到 Blogger 中:)

# asp.net - 什么可以是 sql 查询？

> ID：10613715
> 
> 赞同：1
> 
> 时间：2012-05-16T07:15:48.667
> 
> 标签：asp.net, sql, database

我有 2 个表`tbl_UserRegistration`，`tbl_Streaks`结构如下：

**tbl_UserRegistration**

```
 DATATYPE   LENGTH
UserName       Text         25  (PRIMARY KEY)
PhotoLink      Text        150  
DeviceToken    Integer      15
DeviceType     Integer       1 
```

**tbl_Streaks**

```
 DATA TYPE     LENGTH
ID          Integer         10 (PRIMARY KEY)
Player1     Text            25
Player2     Tex             25
Streaks     Integer         10 
```

现在我想用他们的照片链接来获取连胜纪录最高的球员。

编辑：

```
 i.e. Player1, Player2, MAX(streak), Photolink 
```

我怎样才能做到这一点？

什么可以是sql查询？

谢谢..

注意`Player1`- and `Player2`and`UserName`是相等的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:34:58.473

假设用户名与 Player1 和 Player2 相同，那么您可以将 tbl_Streaks 加入 tbl_UserRegistration 并在 SELECT 子句中找到 Streaks 的 MAX() 以及 Player1 和 Player2

以下在 T-SQL 中，将提取每个用户名的最大条纹：

```
SELECT
    r.UserName 
    , MAX(s.Streaks) mx     
FROM 
    tbl_UserRegistration r
    INNER JOIN tbl_Streaks s ON
        r.UserName = s.Player1
GROUP BY
    r.UserName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:50:39.907

`PhotoLink`您可以通过加入`tbl_UserRegistration`两次来检索两个用户。要获得得分最高的一对玩家，您可以按 的降序对行进行排序`Streak`并将它们限制为仅一行，如下所示：

```
SELECT
  s.Player1,
  s.Player2,
  s.Streak,
  u1.PhotoLink AS PhotoLink1,
  u2.PhotoLink AS PhotoLink2
FROM tbl_Streaks s
  INNER JOIN tbl_UserRegistration u1 ON u1.UserName = s.Player1
  INNER JOIN tbl_UserRegistration u2 ON u2.UserName = s.Player2
ORDER BY s.Streak DESC
LIMIT 1 
```

# c# - 如何在表格中排列项目 - MVC3 视图 (Index.cshtml)

> ID：10613716
> 
> 赞同：4
> 
> 时间：2012-05-16T07:15:50.710
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

我想使用 ASP.NET MVC3 显示特定类型的食物样品中不同类型维生素的含量。如何在我的视图 (Index.cshtml) 中显示它？

一个例子： ![在此处输入图像描述](../Images/906e3c420b6c784219aae4c0ab08e5a5.png)

这些是我的代码：

```
<table>
<tr>
    <th></th>
    @foreach (var m in Model)
    {
         foreach (var v in m.Vitamins)
         {
              <th>@v.Name</th> 
         }           
    }
</tr>

   @foreach (var m in Model)
   {
         foreach (var f in m.Foods)
        {
             <tr>
                  <td>@f.Type</td>
             </tr> 
        }          
   }
</table>

@*The amount of Vitamins in each food:

       var a in m.AmountOfVitamins
       @a.Amount

*@ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:23:33.927

如果正确订购了**Amount**集合（我猜是），那么您可以简单地使用：

```
foreach (var f in m.Foods)
{
    <tr>
        <td>@f.Type</td>
        foreach (var a in m.AmountOfVitamins)
        {
            <td>a.Amount</td>
        }
    </tr> 
} 
```

如果它们以其他随机顺序排列，那么您需要一种根据标题列 A、B、C、D 对它们进行排序的方法......

# c# - 使用多线程单元中的线程模型单元访问 COM dll 时出错

> ID：10613719
> 
> 赞同：1
> 
> 时间：2012-05-16T07:16:13.023
> 
> 标签：c#, multithreading, visual-studio-2010, com, com-interop

我必须与第三方应用程序通信，唯一的方法是访问提供的 COM 组件。因为交互大约需要 3 分钟，所以必须在后台进行。所以我试图做的是使用选项“embedd interop-types”= true 添加对组件的引用，并创建一个通过接口读取非常基本数据的测试。记录在案的方法是遵循以下代码：

```
System sys = new System();
if(Convert.ToBoolean(sys.Initialize()) && Convert.ToBoolean(sys.Login("John Smith", out userInstance)))
Project proj = new Project();
if (Convert.ToBoolean(proj.Open(sys, m_projName, m_scenarioName)))
    someValue = proj.Name; 
```

在使用 BackgroundWorker 之前，这非常有效。然后我在第一行代码中收到以下错误：

> 无法将“System.__ComObject”类型的 COM 对象转换为接口类型“ICAPILib.System”。此操作失败，因为 IID 为“{1F5EB3E2-35F6-11D2-A191-0060083A260B}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：加载类型库/DLL 时出错。（来自 HRESULT 的异常：0x80029C4A (TYPE_E_CANTLOADLIBRARY)）。

我已经尝试重新注册组件但没有任何成功。

当使用 BackgroundWorker 时，Thread Apartment Type 显然是 MTA。COM 组件的 ThreadingModel 设置为公寓。如果我正确理解了这篇文章 [http://msdn.microsoft.com/en-us/library/eaw10et3.aspx](http://msdn.microsoft.com/en-us/library/eaw10et3.aspx) ，则互操作编组应该负责访问对象。

有人知道我可以尝试做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:04:34.420

您不能使用 BackgroundWorker，它的线程类型错误。无法更改，它使用线程池线程，并且始终是 MTA。COM 自动创建一个 STA 线程，为 COM 服务器提供一个好客的家，这将导致任何调用被编组。哪个不适用于该组件，它没有正确注册其类型库。无论如何你都想避免的事情。

您必须改为创建自己的 Thread 并调用其 SetApartmentState() 方法将其切换到 STA，然后再启动它。在该线程上创建 COM 对象的实例也很重要，否则 CLR 仍将尝试编组调用。从技术上讲，您需要泵送一个消息循环（Application.Run），但您可能不需要这样做就可以逃脱。您会发现，如果调用死锁或预期事件未触发，则需要消息循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:24:40.977

发生的事情是 COM Marshaller 无法编组该对象。

**第一个答案：**标准编组需要一个类型库。可能是对象的类型库未正确注册，因此出现错误。你是x86还是x64？尝试使用 REGTLB 注册库。

**第二个答案：**如果这不起作用，简单的答案是使用 STA 公寓类型的线程。这可能意味着您不能使用 BackgroundWorker，但可能必须使用专门创建的线程，您在完成时将其销毁。如果我们谈论的是三分钟的操作，那么额外的开销可以忽略不计。

请注意，对象必须在要使用它的线程上创建，并且单元类型必须与对象的线程模型兼容，以避免编组。

# architecture - 更新 DataSet - 在哪一层？

> ID：10613722
> 
> 赞同：0
> 
> 时间：2012-05-16T07:16:36.110
> 
> 标签：architecture, dataset, 3-tier

我尝试构建 3 层应用程序。在`DAL`我从`database`( `No-SQL`) 到`DataSets`. 如果`BLL`有必要，我会处理这些数据。在`PL`我显示适当的数据。

问题是：如果数据`database`仍在更新，并且我需要立即拥有最新的“行”，我应该`DataSet`使用`BLL`某个计时器还是其他地方进行更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:09:39.443

当您说“**立即**”时，我必须假设您的应用程序非常渴望数据……为此，您应该在 DLL 和 BLL 之间使用第四层并称为**Cache**。

因为它接缝你想要快速的事情，并且为了快速的事情，你永远不会一遍又一遍地调用数据库，你调用一次，当有更新时，你清除该实体上的缓存，下次你的 BLL 询问数据时，缓存是空的，因此它传递给 DAL 以检索一组新记录，并将其放入缓存中以供下次调用。

要警惕更新，您可以制作自己的通知系统，或简单地实现[`INotifyCollectionChanged`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)界面...

如果您不想麻烦，当您发送要更改的新行时，您已经有了数据，您可以轻松地将其添加到网格（或您正在使用的任何集合对象）中

```
DataTable dt = bll.ListAllEmployeesByCompanyId( 2 );
dt.Rows.Insert(0, myNewRow);
gv.DataSource = dt; 
```

您可以通过在该网格中制作一个顶部边框并将其设为黄色（因为数据不是来自数据库）轻松创建一个漂亮的用户体验，并在数据全部来自数据库时将其变为浅绿色（并且所有内容都是同步的) ...

这完全取决于您的策略，始终取决于我们开发的每个软件的唯一问题：

> 用户真的关心这个*很棒*的功能吗？

因为，我们开发人员倾向于假设很多，有时，您确实假设错误:)

# command-line - 在 MSBuild 参数中设置应用程序名称

> ID：10613725
> 
> 赞同：7
> 
> 时间：2012-05-16T07:16:46.033
> 
> 标签：command-line, msbuild, web-deployment

我正在使用这个从命令行部署我的 Web 应用程序

> msbuild WebApplication1.csproj /t:Package /p:configuration=release

它工作正常，但部署的应用程序名称与项目设置页面中使用的名称相同。

我想使用相同的命令行设置已部署应用程序的名称。msbuild 中是否有任何参数可以这样做或任何其他方法。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-16T10:15:54.373

你应该试试这个

> msbuild WebApplication1.csproj /t:Package /p:configuration=release; **部署IISAppPath** =“what_ever_name_you_want”

您可以在项目文件 (.csproj) 中获取有关这些关键字的更多信息，在记事本中打开它并搜索 VS 设置的默认名称。并在命令行中使用该参数。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:35:23.223

[MS Build 命令行参数](http://msdn.microsoft.com/en-us/library/ms164311.aspx)：看起来您无法从命令行执行此操作。

但是您可以在配置文件中执行此操作 -使用属性组的[文章](http://msdn.microsoft.com/en-us/library/ms171481%28v=vs.80%29)

```
 <PropertyGroup>
     <appname>NewApplicationName</appname>
 </PropertyGroup> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:35:40.330

我无法准确说出您正在谈论的属性页中的设置是什么，但是语法将是这样的：

> msbuild WebApplication1.csproj /t:Package /p:configuration=release **/p:appname=Test**

# c# - 以本机速度运行动态编译的 C# 代码......如何？

> ID：10613728
> 
> 赞同：9
> 
> 时间：2012-05-16T07:17:10.930
> 
> 标签：c#, dynamic, compiler-construction, assemblies

我已经阅读了几篇关于编写和编译动态 C# 代码的文章。例如，[这篇文章](https://stackoverflow.com/questions/3188882/compile-and-run-dynamic-code-without-generating-exe)。我知道它可以通过多种方式完成。

但是，调用代码调用程序很慢。我做了一个简单的基准测试，它比调用本机方法慢了大约 500 倍。

我想要做的是相当于加载一个 DLL 并直接（“本机”）调用它的方法之一，这将带来我想要的速度优势。

解决这个问题的最简单方法是什么？将动态代码编译成dll然后加载？它可以在内存中完成吗？

**编辑**

我不在乎编译时间。只有执行。

**编辑 2、3**

这是我编写的基准代码：

```
 public static int Execute(int i) { return i * 2; }

    private void button30_Click(object sender, EventArgs e)
    {
        CSharpCodeProvider foo = new CSharpCodeProvider();

        var res = foo.CompileAssemblyFromSource(
            new System.CodeDom.Compiler.CompilerParameters()
            {
                GenerateInMemory = true,
                CompilerOptions = @"/optimize",                    
            },
            @"public class FooClass { public static int Execute(int i) { return i * 2; }}"
        );

        var type = res.CompiledAssembly.GetType("FooClass");
        var obj = Activator.CreateInstance(type);
        var method = type.GetMethod("Execute");
        int i = 0, t1 = Environment.TickCount, t2;
        //var input = new object[] { 2 };

        //for (int j = 0; j < 10000000; j++)
        //{
        //    input[0] = j;
        //    var output = method.Invoke(obj, input);
        //    i = (int)output;
        //}

        //t2 = Environment.TickCount;

        //MessageBox.Show((t2 - t1).ToString() + Environment.NewLine + i.ToString());

        t1 = Environment.TickCount;

        for (int j = 0; j < 100000000; j++)
        {
            i = Execute(j);
        }

        t2 = Environment.TickCount;

        MessageBox.Show("Native: " + (t2 - t1).ToString() + Environment.NewLine + i.ToString());

        var func = (Func<int, int>) Delegate.CreateDelegate(typeof (Func<int, int>), method);

        t1 = Environment.TickCount;

        for (int j = 0; j < 100000000; j++)
        {
            i = func(j);
        }

        t2 = Environment.TickCount;

        MessageBox.Show("Dynamic delegate: " + (t2 - t1).ToString() + Environment.NewLine + i.ToString());

        Func<int, int> funcL = Execute;

        t1 = Environment.TickCount;

        for (int j = 0; j < 100000000; j++)
        {
            i = funcL(j);
        }

        t2 = Environment.TickCount;

        MessageBox.Show("Delegate: " + (t2 - t1).ToString() + Environment.NewLine + i.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T07:31:18.217

是的，如果您通过 a`MethodInfo`或 non-specific调用`Delegate`，那么它确实会很慢。诀窍是：*不要那样做*。各种方法：

*   对于个别方法，通过一个基本**但类型化**的委托，例如`Action`，或作为一个通用的包罗万象，`Func<object[], object>`- 并用于`Delegate.CreateDelegate`创建一个**类型化**的委托：

    ```
    Action doSomething = (Action)Delegate.CreateDelegate(typeof(Action), method); 
    ```

    另一个变体是使用`Expression`API（它有一个`.Compile()`方法），或者`DynamicMethod`（它有`CreateDelegate()`）。关键：您必须获得一个**类型化**委托并使用**类型化**调用（不是`.DynamicInvoke`）调用。

*   对于生成整个类型的更复杂的情况，请考虑实现您知道的接口，即

    ```
    IFoo foo = (IFoo)Activator.CreateInstance(...); 
    ```

    再次; 在初始演员（非常便宜）之后，您可以使用静态代码：

    ```
    foo.Bar(); 
    ```

不要***使用***`someDelegate.DynamicInvoke(...)`，或者`someMethod.Invoke(...)`如果您追求任何类型的表演。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T08:07:04.153

除了 Marc 的建议之外，您还可以通过指定“优化”编译器选项来提高速度：

```
var res = foo.CompileAssemblyFromSource(
        new System.CodeDom.Compiler.CompilerParameters()
        {
            GenerateInMemory = true,
            CompilerOptions = "/optimize"
        }, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T08:31:59.680

认为值得展示所有潜在选项的外观及其性能特征。给定以下辅助类和函数：

```
public void Test(Func<int> func)
{        
    var watch = new Stopwatch();
    watch.Start();
    for (var i = 0; i <= 1000000; i++)
    {
        var test = func();
    }
    Console.WriteLine(watch.ElapsedMilliseconds);
}

public class FooClass { public int Execute() { return 1;}} 
```

设置和执行：

```
using (Microsoft.CSharp.CSharpCodeProvider foo = 
       new Microsoft.CSharp.CSharpCodeProvider())
{
    var res = foo.CompileAssemblyFromSource(
        new System.CodeDom.Compiler.CompilerParameters() 
        {  
            GenerateInMemory = true 
        }, 
        "public class FooClass { public int Execute() { return 1;}}"
    );

    var real = new FooClass();
    Test(() => real.Execute());                   // benchmark, direct call

    var type = res.CompiledAssembly.GetType("FooClass");
    var obj = Activator.CreateInstance(type);    
    var method = type.GetMethod("Execute");
    var input = new object[] { };                
    Test(() => (int)method.Invoke(obj, input));   // reflection invoke  

    dynamic dyn = Activator.CreateInstance(type);  
    Test(() => dyn.Execute());                    // dynamic object invoke

    var action = (Func<int>)Delegate.CreateDelegate(typeof(Func<int>), null, method); 
    Test(() => action());                         // delegate
} 
```

结果是：

```
8     // direct
771   // reflection invoke
41    // dynamic object invoke
7     // delegate 
```

所以在那些你不能使用委托的情况下（如果你还不够了解？），你可以试试`dynamic`.

# clearcase - 如何通过给定的元素名称获取 pvob 名称？

> ID：10613729
> 
> 赞同：1
> 
> 时间：2012-05-16T07:17:15.313
> 
> 标签：clearcase

我正在使用 ClearCase 编写一些脚本，我必须提供一个 pvob 名称。我在视图（动态或快照）的上下文中，并且我有一个元素名称（例如`<path>\filename.cpp`）或特定元素和文件版本（`<path>\filename.cpp@@\main\versioname\2`）

我如何获得它的 pvob？似乎我必须弄清楚vob名称然后找到它与pvob的链接？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:34:06.497

vob 元素和 PVob（包含对 UCM 对象的引用）之间没有直接链接

您可以做的是，在元素的当前路径中：

```
cleartool lsstream -cview 
```

这将为您提供附加到 PVob 的视图流的名称。
但是，您的元素可能是来自另一个 pvob 的组件的一部分。

另一种选择是列出所有 pvob 的所有组件及其根目录，并检查根目录类似于元素路径的组件。

注意：另一个链接在活动中：a`cleartool descr -l yourElement`将显示活动（及其 pvob）。
但同样，该 pvob 可能与您的元素所属的组件不同。

* * *

更直接的链接：转储你的元素

```
cleartool dump -l /path/to/your/element

[...]
derived objects:
hyperlinks to object:
arrow=1249731306
  type=27209
  hlink vob=90b77fed.efb24bb6.8312.8e:09:7f:84:65:a1
  hlink obj=64856a02.8d9d4624.abae.09:94:b0:e7:9c:2e
  from vob=90b77fed.efb24bb6.8312.8e:09:7f:84:65:a1    <=====
  from obj=20b6c0e8.270e4354.91f5.02:5c:6f:ed:41:54
  to vob=60efb222.0e034a34.aa4b.80:65:c3:9c:d4:ca      <=====
  to obj=eb7ec24a.510e4e03.8403.0b:e8:dd:3d:5c:db 
```

您的元素链接到两个 vobs：

*   实际的 Vob（包含文件）
*   PVob（这是一个'ucmvob'，即一个pvob）

你可以列出你所有的 vobs，询问他们的 oid：

```
 ct descr -fmt "%On %[plevels]p" vob:\avob 
```

您可以检查其 oid 是否与元素的超链接之一匹配。

注意：我使用 `%[plevels]p`它是因为它仅在 pvob 上有效！

# ajax - 单击菜单项内容在同一页面的右侧div中显示而不刷新？

> ID：10613734
> 
> 赞同：1
> 
> 时间：2012-05-16T07:17:26.333
> 
> 标签：ajax, jquery

我有一个 php 模板，其中我有一个左菜单作为accordin jquery 菜单。在此菜单中，我有菜单项。当我单击菜单项时，与此菜单项相关的页面将加载到页面右侧的 div 中而无需刷新![我的页面](../Images/b0a0db15673fb2348fd0a5767add122d.png)。我给你页面的屏幕截图。

任何人都可以在这方面帮助我，

提前谢谢你拉姆塞

这是left menu.php的代码

```
<div  id="leftmenu">
  <div class="urbangreymenu">
    <h3 class="headerbar"><a href="#">BREAST</a></h3>
     <ul class="submenu">
      **<li><a href="breast.php">Breast/a></li>**
      </ul>
    <h3 class="headerbar"><a href="#">CVS</a></h3>

    <ul class="submenu">
      <li><a href="#">CHEST PAIN</a></li>
      <li><a href="#">CHEST PAIN MASTER</a></li>
      <li><a href="#">DIZZINESS-VERTIGO-LOC</a></li>
      <li><a href="#">LOCAL-LEG-GENERALISED SWELLING</a></li>
      <li><a href="#">SHORT OF BREATH(+PND)</a></li>
    </ul>

    <h3 class="headerbar"><a href="#">ENT</a></h3>
    <ul class="submenu">
      <li><a href="#">EAR</a></li>
      <li><a href="#">NOSE</a></li>
      <li><a href="#">THROAT</a></li>
    </ul>

    <h3 class="headerbar"><a href="#">GENERAL</a></h3>
    <ul class="submenu">
      <li><a href="#">FATIGUE-MALAISE</a></li>
      <li><a href="#">FEVER</a></li>
      <li><a href="#">SKIN RASH & PRURITIS</a></li>
    </ul>

    <h3 class="headerbar"><a href="#">GIT</a></h3>
    <ul class="submenu">
      <li><a href="#">ABDOMINAL DISTENTION</a></li>
      <li><a href="#">ABDOMINAL PAIN</a></li>
      <li><a href="#">BLACK STOOLS</a></li>
      <li><a href="#">CONSTIPATION</a></li>
      <li><a href="#">DIARRHEA</a></li>
      <li><a href="#">NAUSEA-VOMITING</a></li>
    </ul>

    <h3 class="headerbar"><a href="#">NEUROLOGY</a></h3>
    <ul class="submenu">
      <li><a href="#">APHASIA & SLURRED SPEECH</a></li>
      <li><a href="#">BALANCE-TREMORS-PARALYSIS</a></li>
      <li><a href="#">HEADACHE</a></li>
      <li><a href="#">SEIZURES-MEMORY LOSS-CONFUSION</a></li>
      <li><a href="#">TINGLING-NUMBNESS</a></li>
    </ul>

     <h3 class="headerbar"><a href="#">PULMONARY</a></h3>
     <ul class="submenu">
      <li><a href="#">COUGH</a></li>
     </ul>
  </div>
</div> 
```

这是我的加载代码：

```
<div id ="content">
<script>
$.get('breast.php', function(data) {
$('.content').html(data);
});
</script>

</div> 
```

当我单击菜单项时，相关页面应该出现在该 div 中

提前谢谢你，拉姆塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:45:01.640

有什么问题？使用[docs.jquery.com/Ajax](http://api.jquery.com/category/ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:55:33.677

```
 $(document).ready(function () {
                        $('#leftmenu').find('a[href*=".php"]').live('click', function (e) {
                            e.preventDefault();

                            $.get($(this).attr('href'), function (data) {
                                $('.content').html(data);
                            });
                        });
        //Or

                    $('#leftmenu').find('a[href*=".php"][class*="MyWebLink"]').live('click', function (e) {
                        e.preventDefault();
if(!$(this).hasClass('Alreadyloaded')){

                        var Url = $(this).attr('href');

                        $.ajax({
                            url: Url, type: 'Get', dataType: 'json',
                            //data: { value: $(this).data('value') },
                            success: function (data) {
                                $('.content').append(data);
    //Or
                                $('.content').prepend(data);

                                $(this).addClass('Alreadyloaded');
                            }
                        });
}
                    });
                    }); 
```

# list - Sencha Touch 2 使用 JsonP 代理进行离线缓存

> ID：10613735
> 
> 赞同：3
> 
> 时间：2012-05-16T07:17:37.137
> 
> 标签：list, caching, proxy, jsonp, extjs

假设我已经按照 Sencha Touch 2 Getting Started 教程进行操作，并且有一个由 JsonP 代理数据填充的列表——如果用户离线，我该如何让缓存的数据出现？目前，如果没有互联网连接，则根本不会显示该列表。

在视频教程中，Ed 简要提到这可以“轻松完成”，但没有提供我在 Sencha 文档中可以找到的参考。

以下是我的商店对象的示例：

```
Ext.define('test.store.NewsListStore', {
extend : 'Ext.data.Store',
requires: ['test.model.NewsListModel', 'Ext.data.Request'],
config : {
    model : 'test.model.NewsListModel',
    storeId : 'news-list-store',
    autoLoad: true,
    proxy: {
    type: 'jsonp',
    url : 'http://example.com/jsonp',
    config : {
        noCache: false
    }
   },
    grouper : {
        groupFn : function(record) {
            var unix_timestamp = parseInt(record.get("entry_date"));
            var date = new Date( unix_timestamp*1000 );
            return Ext.Date.format(date, 'F');
        }
    },
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T13:41:20.057

以下是您可以使用 localstorage 的示例：

[http://www.robertkehoe.com/2012/11/sencha-touch-2-localstorage-example/](http://www.robertkehoe.com/2012/11/sencha-touch-2-localstorage-example/)

它使用 Sencha Touch 2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:37:20.690

看看这个关于[离线使用 Sencha Touch 应用程序](http://www.sencha.com/learn/taking-sencha-touch-apps-offline/)的教程- 它不是 Sencha Touch 2，但它可能会为您指明正确的方向

# android - 使用 GsmCellLocation 的 getPsc() 总是返回 -1

> ID：10613736
> 
> 赞同：4
> 
> 时间：2012-05-16T07:17:39.383
> 
> 标签：android, gsm, telephonymanager, cellular-network, umts

我已成功获取`GsmCellLocation`相关的 cid 和 lac 信息，但服务小区的 PSC（主扰码）总是以初始化值 -1 返回。谁能获得服务小区的真实 PSC 值？

```
telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
GsmCellLocation cellLocation = (GsmCellLocation) telephonyManager.getCellLocation();
psc = cellLocation.getPsc();
Log.d(TAG, "PSC = " + psc); 
```

我拥有所有必要的权限。我的邻居列表也返回空，但目前这不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:48:09.960

PSC 仅在 UMTS 网络上可用。
检查网络类型[getNetworkType](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getNetworkType%28%29)是否`NETWORK_TYPE_UMTS`存在`NETWORK_TYPE_EDGE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:49:33.190

我已经读到这适用于某些手机 - Google nexus 手机就是其中之一。

我试图在我的 Motorolla Razr 上运行您的测试代码 - 它返回 -1。

通过查看 android 源代码 (GsmServiceStateTracker.java)，看起来此功能是可选的，并且很可能未在许多手机上实现。您要查找的信息是作为来自 GSM 调制解调器的主动消息发送的，除了从`getPsc()`.

我的意思是如果你不需要，为什么要实施它。

我还尝试扩展您的测试代码以获取有关相邻单元格的信息，这些信息也可用于获取其 PSC 值。它不起作用，因为用于获取相邻小区信息的 at 命令未在我手机的 GSM 调制解调器中实现。

```
TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
GsmCellLocation cellLocation = (GsmCellLocation) telephonyManager.getCellLocation();
Log.d(TAG, "cid = " + cellLocation.getCid());
Log.d(TAG, "lac = " + cellLocation.getLac());

int psc = cellLocation.getPsc();
Log.d(TAG, "PSC = " + psc);

List<NeighboringCellInfo> neighCell = null; 
neighCell = telephonyManager.getNeighboringCellInfo();  
for (int i = 0; i < neighCell.size(); i++) 
{
    NeighboringCellInfo thisCell = neighCell.get(i);  
    int CID = thisCell.getCid();  
    int RSSI = thisCell.getRssi();
    int PSC = thisCell.getPsc();
    Log.d(TAG, " "+CID+" - "+RSSI + " - " + PSC);
} 
```

如果你真的想知道哪些手机实现了这一点，你应该在[一些基准应用程序](http://code.google.com/p/0xbench/)中添加一个测试，并希望能及时得到一些结果。

# php - 重新启动 Apache 网络服务器时出错

> ID：10613742
> 
> 赞同：0
> 
> 时间：2012-05-16T07:18:14.020
> 
> 标签：php, apache, windows-7, restart

我成功安装了 Apache Web 服务器。当我在浏览器中键入本地主机时，它显示它可以工作。然后我将 php 文件保存到服务器 httpdocs 并重新启动它显示以下警报。

> Apache 监视器已启动。

请让我知道我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:22:59.620

每次在 httpdocs 中保存 php 文件时，都不需要重新启动 Apache。只需刷新您的浏览器。

# c# - 对查询结果启动 foreach 循环时出现“不存在数据时尝试读取无效”

> ID：10613744
> 
> 赞同：5
> 
> 时间：2012-05-16T07:18:24.660
> 
> 标签：c#, entity-framework, exception-handling, linq-to-entities, azure-sql-database

我有这个查询：

```
 // _db derives from DbContext
 var toProcess = from jobItem in _db.Jobs
                 where jobItem.State == desiredState
                 select jobItem.ItemId;
 foreach (Guid itemId in toProcess ) //exception thrown on this line
 {
     // whatever
 } 
```

大多数情况下运行良好，但偶尔`foreach`会抛出：

> System.InvalidOperationException：不存在数据时尝试读取无效

使用以下堆栈跟踪：

```
System.Data.SqlClient.SqlDataReader.ReadColumnHeader(Int32 i)
System.Data.SqlClient.SqlDataReader.IsDBNull(Int32 i)
System.Data.Common.Internal.Materialization.Shaper.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal)
System.Data.Common.Internal.Materialization.Shaper.GetColumnValueWithErrorHandling[TColumn](Int32 ordinal)
System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper)
System.Data.Common.Internal.Materialization.Shaper`1.SimpleEnumerator.MoveNext() 
```

这没有任何意义。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:10:30.793

根据您对我的评论的回复：

> 有一些中等重量的活动预计会在几秒钟内完成，但我想可能需要更长时间。你认为会发生超时吗？

我想这是一个超时或类似的东西。您可以**增加 timeout**，或者您可以**强制它评估**并存储在内存中以供以后处理。您可以通过`ToArray()`在查询末尾添加：

```
 var toProcess = (from jobItem in _db.Jobs
                 where jobItem.State == desiredState
                 select jobItem.ItemId).ToArray(); 
```

看看是否有帮助。

# algorithm - 从 4 个输入数字中找出所有可能的组合，这些数字加起来最多为 24

> ID：10613753
> 
> 赞同：2
> 
> 时间：2012-05-16T07:19:17.310
> 
> 标签：algorithm

其实这个问题可以概括如下：

> 从给定的一组元素中找到满足特定条件的所有可能组合。

那么，有什么好的算法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T09:28:46.783

只有 16 种可能性（其中之一是将“没有”加在一起，这不会给你 24），所以老式的“蛮力”算法对我来说看起来不错：

```
for (unsigned int choice = 1; choice < 16; ++choice) {
    int sum = 0;
    if (choice & 1) sum += elements[0];
    if (choice & 2) sum += elements[1];
    if (choice & 4) sum += elements[2];
    if (choice & 8) sum += elements[3];
    if (sum == 24) {
        // we have a winner
    }
} 
```

在您的问题的完全一般形式中，判断组合是否符合“某些标准”的唯一方法是评估每个组合的这些标准。鉴于有关标准的更多信息，也许您可​​以制定一些方法来避免测试每种组合并相应地构建算法，但不能没有这些细节。再次，蛮力为王。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:23:45.963

[在Wikipedia](http://en.wikipedia.org/wiki/Subset_sum_problem)和[MathWorld](http://mathworld.wolfram.com/SubsetSumProblem.html)中有两个关于求和问题的有趣解释。

对于您提出的第一个问题，第一个答案适用于有限数量的元素。您应该意识到 Jessop 先生使用 16 作为循环边界的原因是因为这是 2^4，其中 4 是您的集合中的元素数。如果您有 100 个元素，则循环限制将变为 2^100，并且您的算法实际上需要永远完成。

在有界和的情况下，您应该考虑深度优先搜索，因为当元素的总和超过您要查找的总和时，您可以修剪分支并回溯。

在一般问题的情况下，找到满足特定标准的元素子集，这被称为背包问题，它被称为 NP-Complete。鉴于此，没有任何算法可以在小于指数的时间内解决它。

尽管如此，还是有几种启发式方法可以带来很好的结果，包括（但不限于）遗传算法（我个人很喜欢，因为我写了一本关于它们的书）和动态规划。在 Google 中进行简单搜索将显示许多描述该问题的不同解决方案的科学论文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T08:34:21.733

> 从给定的一组元素中找到满足特定条件的所有可能组合

如果我对您的理解正确，此代码将对您有所帮助：

```
 >>> from itertools import combinations as combi    
    >>> combi.__doc__
'combinations(iterable, r) --> combinations object\n\nReturn successive r-length
 combinations of elements in the iterable.\n\ncombinations(range(4), 3) --> (0,1
,2), (0,1,3), (0,2,3), (1,2,3)'
    >>> set = range(4)
    >>> set
    [0, 1, 2, 3]
    >>> criteria = range(3)
    >>> criteria
    [0, 1, 2]
    >>> for tuple in list(combi(set, len(criteria))):
    ...     if cmp(list(tuple), criteria) == 0:
    ...             print 'criteria exists in tuple: ', tuple
    ...
    criteria exists in tuple:  (0, 1, 2)

    >>> list(combi(set, len(criteria)))
    [(0, 1, 2), (0, 1, 3), (0, 2, 3), (1, 2, 3)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T02:46:28.893

(n X n ) 建立一个 nxn 的方阵

并将其对应的交叉值一起打印

例如

1 2 3 4

1 11 12 13 14

2 .. .. .. ..

3..

4 ....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T21:54:44.840

输入数字集很重要，因为您可以在您的起始集中允许负数、虚数、有理数等。您还可以限制为所有偶数、所有奇数输入等。

这意味着很难建立演绎的东西。您需要蛮力，也就是尝试每种组合等。

在这个特定的问题中，您可以构建一个递归的算法 - 例如，找到加起来为 23 的 3 个 Int ( 1,22 ) 的每个组合，然后加 1，每个组合加到 22 并加 2 等等。这又可以被打破到 2 的每个组合中，加起来为 21 等。您需要决定是否可以两次计算相同的数字。

一旦你有了它，你就有一个递归函数可以调用 -

```
combinations( 24 , 4 ) = combinations( 23, 3 ) + combinations( 22, 3 ) + ... combinations( 4, 3 );
combinations( 23 , 3 ) = combinations( 22, 2 ) + ... combinations( 3, 2 ); 
```

ETC

这很好用，除非您必须小心在递归中重复数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T01:49:23.490

如果我正确理解您的问题，您所要求的称为“排列”或从一组 (Y) 数字中排列 (X) 数字的可能方法的数量 (N)。

```
N = Y! / (Y - X)! 
```

我不知道这是否会有所帮助，但这是我为排列分配提出的解决方案。

你有一个输入：123（字符串）使用 substr 函数

1）将输入的每个数字放入一个数组中

```
array[N1,N2,N3,...] 
```

2）创建交换函数

```
function swap(Number A, Number B)
{
   temp = Number B 
   Number B = Number A   
   Number A = temp   
} 
```

3）该算法使用交换函数来移动数字，直到完成所有排列。

```
original_string= '123'    
temp_string=''

While( temp_string != original_string)
{
   swap(array element[i], array element[i+1])

   if (i == 1)
       i == 0

   temp_string = array.toString
   i++
} 
```

希望您可以遵循我的伪代码，但这至少适用于 3 位数排列

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T15:33:57.110

通常对于这样的问题，您必须尝试所有的可能性，如果您知道代码不满足标准，您应该做的事情是让代码中止构建组合（如果您的标准是您没有两个以上的蓝色球，那么你必须中止超过两个的计算）。[回溯](https://en.wikipedia.org/wiki/Backtracking)

```
def perm(set,permutation): 
    if lenght(set) == lenght(permutation):
       print permutation
    else:
        for element in set:
           if permutation.add(element) == criteria:
               perm(sett,permutation)
           else:
                permutation.pop()  //remove the element added in the if 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-04T23:58:03.113

```
 private int[][] work()
    {
        const int target = 24;
        List<int[]> combos = new List<int[]>();

        for(int i = 0; i < 9; i++)
            for(int x = 0; x < 9; x++)
                for(int y = 0; y < 9; y++)
                    for (int z = 0; z < 9; z++)
                    {
                        int res = x + y + z + i;
                        if (res == target)
                        {
                            combos.Add(new int[] { x, y, z, i });
                        }
                    }
        return combos.ToArray();
    } 
```

它立即起作用，但可能有更好的方法而不是“猜测和检查”。我所做的就是遍历所有可能性，将它们加在一起，看看它是否达到目标值。

# iis - 通过 HTTP 访问 SSAS

> ID：10613756
> 
> 赞同：4
> 
> 时间：2012-05-16T07:19:39.027
> 
> 标签：iis, iis-7, ssas, ssas-2008

我已经按照正确存在的所有步骤

[http://msdn.microsoft.com/en-us/library/gg492140.aspx](http://msdn.microsoft.com/en-us/library/gg492140.aspx)

我正在尝试通过 IIS (HTTP) 连接到 SSAS 2008。我的 SSAS 在机器 1 上。我的 excel 2010 客户端在机器 2 上。我为此启用了基本身份验证。当我使用机器 1（存在 SSAS）的“系统管理员”凭据时，我能够连接 SSAS。但是，如果我使用任何其他用户，那么我可以连接到 SSAS。这是 IIS 或 SSAS 的限制吗？请分享您的意见，这真的很紧急。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:35:56.650

您是否在 SSAS 数据库中定义了授予其他用户访问权限的角色？如果“系统管理员”是 SSAS 服务器管理员，则不需要通过角色明确授予对 SSAS 数据库的访问权限。但是其他用户（不是 SSAS 服务器管理员）将需要通过特定 SSAS 数据库中定义的角色进行显式访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:17:08.770

我的问题解决了。我不知道天气这是否是正确的解决方案。我在 SSAS 配置了 IIS_IUSERS 的机器上创建了几个用户，现在 SSAS 安全性按预期工作。请确认天气是否是正确的解决方案？任何意见和帮助表示赞赏。

关于，Avinash Nigam

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T16:13:57.350

首先，您不需要将 SSAS 配置为通过 HTTP 访问以从 excel 连接到它。你为什么这样做？

其次，访问 HTTP 多维数据集的正确方法是，`http://YOUR_SERVER/olap/msmdpump.dll`如果您在机器 2 上访问 SSMS 并在连接上通知它，它是否有效？

第三，更重要的是，IIS 在哪里？与 SSAS 相同的盒子？如果是的话，很好！如果不是，您需要配置 kerberos，因为您将处理双跳情况

# sql - 当我们通过范围时，如何从查找中获取记录：

> ID：10613757
> 
> 赞同：0
> 
> 时间：2012-05-16T07:19:41.303
> 
> 标签：sql, ssis

我从 Source 获取范围，如下图 Source Table::

```
ID  Begin   End

A1  12  25

B1  16  40 
```

查找表：：

```
LID Name

14  aa

17  bb

28  cc 
```

应用查找时，我需要以下内容::

```
ID  LID Name

A1  14  aa

A1  17  bb

B1  17  bb 
```

B1 28毫升

有没有办法从查找转换中获取，通过传递一些参数

这里的参数是 Begin 和 End。

查询看起来像

SELECT LID, Name FROM LOOKUP_TABLE WHERE LID BETWEEN ? 和 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:43:56.990

编辑查找转换，如下所示：

1.  在“常规”选项卡上，选择`Partial cache`缓存模式。
2.  在“连接”选项卡上，配置与查找表的连接。
3.  在“高级”选项卡上，检查`Modify the SQL statement`并输入您的参数化查询（见图 1）。
4.  在“修改 SQL 语句”框下，单击`Parameters`按钮以选择您希望用作参数的列（参见图 2）。

![修改SQL语句](../Images/16a65a4d3da3de3290e6560a1f98e0f9.png) ![选择参数](../Images/3cf8cf7afd7d8531e840fb9e54fb3592.png)

# antlr - antlr 全局规则范围声明 vs @members 声明

> ID：10613762
> 
> 赞同：8
> 
> 时间：2012-05-16T07:19:53.627
> 
> 标签：antlr, antlr3

在哪种情况下，您更愿意声明一个变量，全局范围还是 @members 声明？在我看来，他们可以为同样的目的服务？

**这里的更新**是解释我的意思的语法。

```
grammar GlobalVsScope;

scope global{
  int i;
}
@lexer::header{package org.inanme.antlr;}
@parser::header{package org.inanme.antlr;}

@parser::members {
  int j;
}

start
scope global;
@init{
  System.out.println($global::i);
  System.out.println(j);
}:R EOF;

R:'which one'; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T10:21:46.430

请注意，除了全局（ANTLR）范围之外，您还可以拥有*本地*规则范围，如下所示：

```
grammar T;

options { backtrack=true; }

parse
scope { String x; }
parse
 : 'foo'? ID {$parse::x = "xyz";} rule*
 | 'foo' ID
 ;

rule
 : ID {System.out.println("x=" + $parse::x);}
 ; 
```

我唯一考虑使用*本地*规则范围的情况是有很多谓词，或者启用了全局回溯（导致*所有*规则前面都有谓词）。在这种情况下，您*可以*创建一个成员变量`String x`（或在全局范围内定义它）并在`parse`规则中设置它，但您可能会更改此实例/范围变量，之后解析器可以回溯，并且此回溯*不会*导致全局变量设置为其原始形式/状态！本地范围变量也*不会*“未设置”，但这可能风险较小：它们是单个规则的本地变量。

总结一下：是的，你是对的，全局范围和成员/实例变量非常相似。但由于语法更友好，我会更早选择成员变量。

# entity-framework - 在实体框架中自定义实体

> ID：10613763
> 
> 赞同：0
> 
> 时间：2012-05-16T07:20:01.243
> 
> 标签：entity-framework

我有以下问题：我在数据库中有一个名为 Person 的表，其中包含所有相关数据，例如名字、姓氏、出生日期、性别等...。我的问题是：是否可以隐藏某些属性，如果可以，我该如何实现。我需要它，因为在我的实体而不是出生日期中，我想要一个名为 age 的属性，它将获取出生日期并计算年龄。另外我想隐藏另一个名为 job 的列，它的默认值为 N 表示否，也可以是 Y 表示是。取而代之的是，我希望拥有相同的列，但具有真或假。我知道我可以实现更改数据库的目的，但就我而言，我不允许这样做。最后一点：是否可以添加在数据库中没有表示的其他列.. 例如，一个计算的，它采用属性薪水并基于它（例如，如果它大于或小于 500 欧元）计算奖金？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:50:17.150

将您的上下文和实体放入一个单独的项目中。您描述的*Person*实体可以按如下方式完成：

```
public class Person
{
    public string FirstName { get; set; }

    public string LastName { get; set; }

    internal DateTime DateOfBirth { get; set; }
    [System.ComponentModel.DataAnnotations.Schema.NotMapped]
    public double AgeInYears { get { return DateTime.Now.Subtract(this.DateOfBirth).TotalDays / 365; } }

    public char Sex { get; set; }

    internal string Job { get; set; }
    [System.ComponentModel.DataAnnotations.Schema.NotMapped]
    public bool HasJob { get { return this.Job == "Y"; } }
} 
```

执行上述操作只会以您想要的数据类型将 FirstName、LastName、AgeInYears、Sex 和 HasJob 公开给其他项目。

要添加数据库中不存在的列，只需使用适当的[数据注释](http://msdn.microsoft.com/en-us/data/gg193958)，如上所示。

要隐藏列，请将其标记为内部。

希望有帮助。

# vb.net - 做一个拼写检查器

> ID：10613765
> 
> 赞同：2
> 
> 时间：2012-05-16T07:20:10.350
> 
> 标签：vb.net

我是 VB.Net 的新手。之前，我用 PHP 进行编程。我在 PHP 中制作了一个拼写检查器，它通过空格将一个大字符串拆分为单个单词，检查该单词是否在字典中，如果没有，它会突出显示它并在用户单击它时给出一些建议。我想在 VB.Net 中做同样的事情......有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:30:26.780

为您的字典使用 Dictionnary(Of String, String)。;
要拆分字符串，您可以使用拆分函数 (" ,;.") ; 定义 ExtWord，一个包含单词的类，一个布尔值，说明是否在字典中，以及建议的更正。然后，您有一个绑定到 ListView 的 ExtWord 列表，该列表视图具有一个 Horizo​​ntal WrapPanel 作为 ItemsPanel。设置 TextBlock 的背景颜色取决于是否在字典内。然后在TextBlock上处理右键，可以在代码中构建一个ContextMenu，并在代码里面添加正确的单词，然后显示出来。

我看到的唯一问题是如何使用 WrapPanel 进行“回车”。

希望它有助于找到您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:28:38.477

在 vb.net 中尝试下面的拼写检查链接

[http://www.a1vbcode.com/app-3641.asp](http://www.a1vbcode.com/app-3641.asp)

[http://www.codeproject.com/Articles/265823/i00-VB-NET-Spell-Check-No-3rd-Party-Components-Req](http://www.codeproject.com/Articles/265823/i00-VB-NET-Spell-Check-No-3rd-Party-Components-Req)

# java - 在 ssl (ldaps) 的支持下连接活动目录

> ID：10613767
> 
> 赞同：2
> 
> 时间：2012-05-16T07:20:17.823
> 
> 标签：java, ssl, active-directory, keystore, truststore

我正在尝试在 ssl 的支持下连接活动目录。

我尝试了以下网站的步骤。

[http://confluence.atlassian.com/display/CROWD/Configuring+an+SSL+Certificate+for+Microsoft+Active+Directory](http://confluence.atlassian.com/display/CROWD/Configuring+an+SSL+Certificate+for+Microsoft+Active+Directory)

当我尝试从 java 代码连接活动目录时，它会给出以下错误。

```
Exception in thread "main" javax.naming.CommunicationException: simple bind fail
ed: 172.16.12.4:636 [Root exception is java.net.SocketException: Connection rese
t]
        at com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)
        at com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)
        at com.sun.jndi.ldap.LdapCtx.<init>(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)
        at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
        at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
        at javax.naming.InitialContext.init(Unknown Source)
        at javax.naming.InitialContext.<init>(Unknown Source)
        at javax.naming.directory.InitialDirContext.<init>(Unknown Source)
        at ConnectActiveDirectory.main(ConnectActiveDirectory.java:39)
Caused by: java.net.SocketException: Connection reset
        at java.net.SocketInputStream.read(Unknown Source)
        at com.sun.net.ssl.internal.ssl.InputRecord.readFully(Unknown Source)
        at com.sun.net.ssl.internal.ssl.InputRecord.read(Unknown Source)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source)

        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.waitForClose(Unknown Sourc
e)
        at com.sun.net.ssl.internal.ssl.HandshakeOutStream.flush(Unknown Source)

        at com.sun.net.ssl.internal.ssl.Handshaker.kickstart(Unknown Source)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.kickstartHandshake(Unknown
 Source)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Un
known Source)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(Unknown Source
)
        at com.sun.net.ssl.internal.ssl.AppOutputStream.write(Unknown Source)
        at java.io.BufferedOutputStream.flushBuffer(Unknown Source)
        at java.io.BufferedOutputStream.flush(Unknown Source)
        at com.sun.jndi.ldap.Connection.writeRequest(Unknown Source)
        at com.sun.jndi.ldap.Connection.writeRequest(Unknown Source)
        at com.sun.jndi.ldap.LdapClient.ldapBind(Unknown Source)
        ... 13 more 
```

正在使用的代码是

```
import java.util.Hashtable;
import javax.naming.*;
import javax.naming.directory.*;

public class ConnectActiveDirectory {

    public static void main(String[] args) throws NamingException {
        Hashtable env = new Hashtable();
        env.put(Context.SECURITY_AUTHENTICATION, "simple");
        env.put(Context.SECURITY_PRINCIPAL,"Administrator@mysite.com");
        env.put(Context.SECURITY_CREDENTIALS, "password");
        env.put(Context.INITIAL_CONTEXT_FACTORY,"com.sun.jndi.ldap.LdapCtxFactory");
        env.put(Context.PROVIDER_URL, "ldaps://172.16.12.4:636/cn=Users,dc=mysite,dc=com");
        try{
            java.io.InputStream in = new java.io.FileInputStream("C:\\client.crt");
            java.security.cert.Certificate c = java.security.cert.CertificateFactory.getInstance("X.509").generateCertificate(in);
            java.security.KeyStore ks = java.security.KeyStore.getInstance("JKS");
            ks.load(null);
            if (!ks.containsAlias("alias ldap")) {
                ks.setCertificateEntry("alias ldap", c);
            }
            java.io.OutputStream out = new java.io.FileOutputStream("C:\\keystorefile.jks");
            char[] kspass = "changeit".toCharArray();
            ks.store(out, kspass);
            out.close();        
        }catch(Exception e){
            e.printStackTrace();
        }
        System.setProperty("javax.net.ssl.trustStore", "C:\\keystorefile.jks");
        DirContext ctx = new InitialDirContext(env);
        NamingEnumeration enm = ctx.list("");
        while (enm.hasMore()) {
            System.out.println(enm.next());
        }
        ctx.close();
    }
} 
```

做错了什么吗？

我在哪里可以获得与活动目录进行 ssl 连接的好教程？

[http://confluence.atlassian.com/display/CROWD/Configuring+an+SSL+Certificate+for+Microsoft+Active+Directory](http://confluence.atlassian.com/display/CROWD/Configuring+an+SSL+Certificate+for+Microsoft+Active+Directory)站点是否有正确的步骤来使用 ssl 创建和连接活动目录？

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-24T07:04:37.440

在我的 AD 域重命名后，我遇到了类似的问题。重新安装证书服务后，您需要删除并重新颁发颁发给您的域控制器的证书。脚步：

1.  打开 MMC
2.  添加管理单元 > 证书 > 计算机 > 本地计算机
3.  导航到个人 > 证书
4.  删除颁发给这台机器的任何旧证书（在我的情况下，这些证书是由旧 CA 颁发的）
5.  右键单击证书文件夹，单击请求新证书。
6.  按照步骤向您的域控制器颁发新证书。
7.  重新启动（不确定是否有必要，但我在它工作之前重新启动）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-10T08:01:12.900

我在 SSL 上使用 Atlassian Crowd 和 Active Directory 时收到了相同的错误消息。它不适用于这个特定的问题，但是当我试图找出发生了什么时，这个线程是第一个谷歌搜索命中，所以我会在这里写下来。

就我而言，我首先在没有 SSL 的情况下进行了测试，然后更改为 SSL。结果我忘了更改人群连接器设置中使用的协议。

之前：ldap://:389 之后：ldaps://:636

不小心使用 ldap://:636 给了我“连接重置”错误。

# iphone - 如何在 iPhone 的 for 循环中创建 UISwitch？

> ID：10613768
> 
> 赞同：3
> 
> 时间：2012-05-16T07:20:20.280
> 
> 标签：iphone, uiswitch

我在 Viewdid Load 中完成了以下代码，以编程方式创建多个开关。

```
float x =40.0, y=20.0,height=60.0,width=26.0;

    for (int i =0; i < 3; i++) {

        CGRect frame = CGRectMake(x, y, height, width);
        UISwitch *switchControl = [[UISwitch alloc] initWithFrame:frame];
        [switchControl addTarget:self action:@selector(flip:) forControlEvents:UIControlEventTouchUpInside];

        [switchControl setBackgroundColor:[UIColor clearColor]];
        [self.view addSubview:switchControl];

        y= y+50.0;
    }

- (IBAction) flip: (id) sender {
    UISwitch *onoff = (UISwitch *) sender;
    NSLog(@"%@", onoff.on ? @"On" : @"Off");
} 
```

完成此代码后，我可以创建多个 UISwitch。现在我不知道如何处理每个开关上的动作。如果有人知道如何处理所有开关上的操作，请帮助我。我会感激他/她。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:21:47.323

```
for (int i =0; i < 3; i++) {

    CGRect frame = CGRectMake(x, y, height, width);
    UISwitch *switchControl = [[UISwitch alloc] initWithFrame:frame];

    //add tag as index 
    switchControl.tag = i;
    [switchControl addTarget:self action:@selector(flip:) forControlEvents: UIControlEventValueChanged];

    [switchControl setBackgroundColor:[UIColor clearColor]];
    [self.view addSubview:switchControl];

    y= y+50.0;
}

- (IBAction) flip: (id) sender {
    UISwitch *onoff = (UISwitch *) sender;
    NSLog(@"no.%d %@",onoff.tag, onoff.on ? @"On" : @"Off");
    //use onoff.tag , you know which switch you got 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:21:51.003

它是 UIControlEventValueChanged 事件

```
[switchControl addTarget:self action:@selector(flip:) forControlEvents:UIControlEventValueChanged]; 
```

# lua - 如何确定 audio.play() 何时完成播放 mp3？lua

> ID：10613769
> 
> 赞同：0
> 
> 时间：2012-05-16T07:20:37.047
> 
> 标签：lua, mp3, coronasdk, duration

我在确定`audio.play()`播放 mp3 文件的方法时遇到问题。

我有这个代码..

```
audio.play("HelloWorld.mp3", {onComplete=print ("Done!")}) 
```

但是当 mp3 启动时，它也会打印`"Done!"`，我也尝试放置`Duration`，但它会做同样的事情。

我只想`"Done!"`在 mp3 播放完毕后打印。任何人都可以帮助我吗？

以及如何在lua中获取mp3文件的持续时间？就我而言，我只是手动查找 mp3 文件并将其输入到我的代码中。

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:58:12.517

现在我明白了，我只是把...

```
local songCompleted = function(event)   
  if event.completed then   
    print ("Done!")
    ...
  end
end

audio.play("HelloWorld.mp3", {onComplete=songCompleted}) 
```

# ios - ipad 设备上的测试文件出现错误

> ID：10613770
> 
> 赞同：0
> 
> 时间：2012-05-16T07:20:42.113
> 
> 标签：ios, ipad

我正在设备上测试 ipad 应用程序，但是当我测试它时它给出了错误，execultabe 是用无效的权利签名的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:24:24.257

确保您使用开发配置文件在构建设置中为应用程序签名，而不是使用 Ad Hoc 或其他分发配置文件。

# javascript - 禁用 href 功能不适用于 onmouseup 事件

> ID：10613771
> 
> 赞同：1
> 
> 时间：2012-05-16T07:20:42.193
> 
> 标签：javascript, javascript-events

我想在使用一次右键单击在新选项卡中打开超链接后禁用它。这样我就调用了 onmouseup 事件并检查了右键单击并调用禁用功能。但是禁用功能在这里不起作用。我不想隐藏链接，我只想禁用链接。

这是 HTML

```
<html>
<body>
<a id="1" href="link1.html" onmouseup="if(event.button==2){disable(this.id)}">link_1</a>
<a id="2" href="link2.html" onmouseup="if(event.button==2){disable(this.id)}">link_2</a>
</body>
</html> 
```

和 JavaScript，

```
<script>
function disable(get)
{
 document.get.style.display="block";
}
</script> 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:56:35.687

我不确定您想通过设置来完成什么`display:block`，`<a>`但您应该在浏览器中看到的错误是 JavaScript 错误，因为您`document.get`不正确。

由于您将元素 id 传递给`disable()`您可以使用的函数

```
document.getElementById(get).style.display = 'block'; 
```

设置显示属性。

或者只是`this`像这样通过：

### HTML

```
<a id="1" href="link1.html" onmouseup="if(event.button==2){disable(this)}">link_1</a>
<a id="2" href="link2.html" onmouseup="if(event.button==2){disable(this)}">link_2</a> 
```

​</p>

### JavaScript

```
function disable(theLink) {
    theLink.style.display="block";
}​ 
```

为了解决*禁用*问题，设置`display:block`不会禁用链接。您可能希望添加一个`onclick`函数来使用单击事件，如[使用 javascript 禁用链接](https://stackoverflow.com/questions/3929598/disable-link-using-javascript)和/或修改`<a>`样式以指示它已禁用，例如将颜色设置为灰色。

# javascript - 脚本在点击时不起作用，它只在悬停时起作用..??c

> ID：10613777
> 
> 赞同：-4
> 
> 时间：2012-05-16T07:21:05.973
> 
> 标签：javascript, asp.net

我正在使用一个在鼠标悬停时工作的脚本，bt 在单击时不起作用，可以告诉我..这是脚本和网站链接..即使我已经将悬停更改为单击，但它也无法正常工作......

[http://tympanus.net/codrops/2010/04/29/awesome-bubble-navigation-with-jquery/](http://tympanus.net/codrops/2010/04/29/awesome-bubble-navigation-with-jquery/)

```
 <script type="text/javascript">
    $(function () {
        $('#nav > div').hover(
            function () {
                var $this = $(this);
                $this.find('img').stop().animate({
                    'width': '310px',
                    'height': '110px',
                    'top': '45px',
                    'left': '35px',
                    'opacity': '1.0'
                }, 500, 'easeOutBack', function () {
                    $(this).parent().find('ul').fadeIn(700);
                });

                $this.find('a:first,h2').addClass('active');
            },
            function () {
                var $this = $(this);
                $this.find('ul').fadeOut(500);
                $this.find('img').stop().animate({
                    'width': '52px',
                    'height': '52px',
                    'top': '0px',
                    'left': '0px',
                    'opacity': '0.1'
                }, 5000, 'easeOutBack');

                $this.find('a:first,h2').removeClass('active');
            }
        );
    });

   http://tympanus.net/codrops/2010/04/29/awesome-bubble-navigation-with-jquery/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:25:51.693

尝试这样的事情：

```
$(/*selector*/).hover(/*smth*/).on('click', function() { /*your click function*/ }); 
```

# mysql - 对具有 3,500,000 行、索引的表进行查询优化

> ID：10613785
> 
> 赞同：3
> 
> 时间：2012-05-16T07:21:26.237
> 
> 标签：mysql, sql, query-optimization

我有一张产品表，大约有 3,500,000 件商品。该表在名为 title 的列上有一个全文索引。

以下查询示例最多需要 4 秒，这是完全不可接受的，并且正在寻找优化的方法......感谢想法/建议。

基本上; 哪些列应该被索引，我应该单独拉出这么多列还是拉出所有列更快（总共有 23 列）等等

查询示例：

```
SELECT PRid, title, Artist, author, actors, imageURL, prodcat, lowprice,
highprice, prodcatID, description from products where
((MATCH(title) AGAINST ('+blue +top' IN BOOLEAN MODE))) order by
userrating desc limit 500 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:46:34.450

您的第一个呼叫端口应该始终是`EXPLAIN`查看 MySQL 正在做什么。我怀疑对匹配分数以外的东西进行排序可能无济于事——我认为 mysql 不能在用户评级上使用索引与全文索引同时进行排序。

上次我使用 MySQL 全文搜索（承认是几年前）时，我发现它只是不够快超过一百万行左右。您可能需要考虑全文搜索引擎，例如 cloudsearch、elasticsearch、solr 或 sphinx。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:33:38.310

“标题”有多少种独特的组合？您可能会发现将这些数据放入带有主数据表中外键的查找表中是值得的。

然后在查询数据时，将两个表连接在一起并将过滤器应用于较小的表，这将花费更少的时间来应用。然后连接发生在一个数字字段上，您可以在主数据表中对其进行索引。

这将比在 3.5m 行上执行文本过滤器快得多。假设该数据中有许多重复项，您的查找表可能只是这个大小的一小部分。

您还会发现，如果使用数字而不是文本字段，则读取主数据会更快，因为行会更小，因此整个数据的大小也会更小。

将所有基于文本的数据放入查找中将使一切变得更快，因为主数据表可以变成固定格式而不是动态的，这意味着在表中定位数据时索引更有效。

希望有帮助！

戴夫

# jquery-mobile - 在 jquery coffeescript 中绑定点击事件

> ID：10613787
> 
> 赞同：5
> 
> 时间：2012-05-16T07:21:27.153
> 
> 标签：jquery-mobile, coffeescript

我正在使用rails 3.2并且也使用coffeescript..我对在我的应用程序中使用jquery mobile有疑问我有一个类似的html

```
<a href="#" data-item=12 data-status=true class="follow">
  <span class="ui-btn-inner">
    <span class="ui-btn-text">
      Follow
    </span>
  </span>
</a> 
```

在我的咖啡脚本中，我试图在点击此关注时编写函数，我试图发送一个 ajax 调用。

当我写喜欢

```
 $("a.follow").unbind('click').bind 'click', (event, data) ->
      event.stopPropagation()
      clickedEl = $(event.target)
      console.log(clickedEl) 
```

Console.log 有时会与类“ui-btn-text”一起打印，有时会与“ui-btn-inner”类一起打印。

但是在我的咖啡脚本函数中，我实际上需要从标签中获取属性。如何进行此操作

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T07:44:46.053

您可以使用[`event.currentTarget`](http://api.jquery.com/event.currentTarget/)代替`event.target`：

> 事件冒泡阶段中的当前 DOM 元素。

演示：http: [//jsfiddle.net/ambiguous/gdzUC/](http://jsfiddle.net/ambiguous/gdzUC/)

或者[`event.delegateTarget`](http://api.jquery.com/event.delegateTarget/)：

> 附加了当前调用的 jQuery 事件处理程序的元素。

演示：http: [//jsfiddle.net/ambiguous/UhBWM/](http://jsfiddle.net/ambiguous/UhBWM/)

你也可以使用[`closest`](http://api.jquery.com/closest/)：

```
clickedEl = $(this).closest('a') 
```

演示：http: [//jsfiddle.net/ambiguous/2LHp3/](http://jsfiddle.net/ambiguous/2LHp3/)

[`event.target`](http://api.jquery.com/event.target/)值为：

> 启动事件的 DOM 元素。

换句话说，它是实际被点击的东西。`currentTarget`和将`delegateTarget`是事件绑定的事物。使用`closest`可能是过度的，您通常会使用它来将 DOM 上升到一个容器，该容器包含您正在与之交互的多个项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T07:43:41.090

您可以使用 jQuery 始终获取链接元素，然后如果您需要来自包含的跨度的信息，则可以参考工作。

```
...
  clickedEl = $(event.target)
  parentLink = clickedEl.parentsUntil $("a.follow")
  console.log(parentLink) 
```

# c - C/如何为传入和传出数据绑定多个套接字

> ID：10613790
> 
> 赞同：1
> 
> 时间：2012-05-16T07:21:45.750
> 
> 标签：c, sockets

当我尝试绑定多个套接字时，我在代码中发现了一个问题。我试着解释一下情况，我有一个由两部分组成的应用程序，一个是用 C 编写的，运行在 machine_1 上，另一个是用 Java 编写，运行在 machine_2 上。C 程序应该能够通过一个端口将 udp 数据包发送到正在侦听它们的 machine_2 上的 4 个端口。反之亦然，machina_2 应该通过一个输出端口将 udp 数据包发送到 machine_1 上的 4 个相应端口。

我遇到的问题在 machine_1 上：

1.  我在那里有两个线程，一个处理到 machine_2 的传出数据，一个处理传入数据。在第一个线程（处理传出数据）中，我创建了 4 个套接字（具有 4 个不同的端口）来寻址 machine_2 上的相应套接字。在那个方向上工作得很好......
2.  但是当我尝试为来自 machine_2 的传入数据创建套接字时，我想使用与 machine_2 上的传入数据相同的端口号，但是当我尝试绑定套接字时遇到了问题。给我`: Address already in use`错误。

我需要一些关于如何在 C 应用程序内的 machine_1 上为传出和传入端口设置套接字配置的帮助。也许还有一个关于如何使用该`select()`函数监听所有 4 个传入套接字的示例。

如果需要代码示例，我可以在此处添加它们，但正如我所说，它仅适用于 thread_1，它通过一个套接字处理传出数据到 machine_2 上的 4 个不同套接字。

在此先感谢您的帮助！

我希望所附的图片可以更多地解释这种情况，重要的是我想在两台机器上使用相同的端口号来接收数据。意味着 machine_1 上的 port_1 与 machine_2 上的 port_1 具有相同的端口号，依此类推...![端口配置](../Images/8a2334f3728132a88052d016be71a245.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:55:07.903

创建一个用于发送的套接字，然后创建四个用于接收的套接字，将接收套接字绑定到正确的本地端口。在传出套接字上使用 sendto 将内容发送到接收器。

select 的懒惰示例（可能有问题，但您应该了解总体思路）：

```
fd_set fds;
int nfds = /* max(in_1, in_2, in_3, in_4) + 1 */;
while(1) {
    int ret = 0;
    FD_ZERO(&fds);
    FD_SET(in_1, &fds);
    FD_SET(in_2, &fds);
    FD_SET(in_3, &fds);
    FD_SET(in_4, &fds);
    ret = select(nfds, &fds, NULL, NULL, NULL);
    if(ret < 0) {
        break; /* something went wrong */
    } else if(ret == 0) {
        continue; /* nothing to do, try again */
    }
    if(FD_ISSET(in_1, &fds)) {
        handle_in_1();
    }
    if(FD_ISSET(in_2, &fds)) {
        handle_in_2();
    }
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:55:38.587

我的建议是只使用 4 个插座。套接字是双向的（也就是说，如果你真的需要 4 个套接字，因为这是 UDP，一个套接字可能就足够了）。然后，您可以在多个线程之间共享套接字并对其进行读取或写入。您只需要确保同步需要同步的任何内容。

下面是一个关于如何使用 select 的示例：

[http://www.lowtek.com/sockets/select.html](http://www.lowtek.com/sockets/select.html)

# sql-server - 获取订单最贵的客户姓名

> ID：10613795
> 
> 赞同：0
> 
> 时间：2012-05-16T07:21:56.763
> 
> 标签：sql-server, sql-server-2008-r2

我有一个包含 4 个表的小型数据库：客户 - 订单 - 订单线 - 产品，我正在玩一些查询，并试图获取订单最昂贵的人的姓名。

在玩了一些之后，我想出了以下查询，它显示了所有订单的价格：

```
SELECT SUM(OrderLine.Amount * Product.Price) AS OrderLinePrice, Orders.Id, Customer.Lastname
FROM OrderLine, Product, Orders, Customer
WHERE OrderLine.ProductId = Product.Id
AND Orders.Id = OrderLine.OrderId
AND Customer.Id = Orders.CustomerId
GROUP BY Orders.Id, Customer.Lastname
ORDER BY OrderLinePrice DESC 
```

现在我在概念上需要做或认为我需要做的是应用 MAX() 来仅选择最高的 OrderLinePrice，但我没有成功使用 SQL Server 抱怨无法在表达式上执行聚合函数包含一个聚合...

=============== 更新：

目前我的查询如下所示：

```
SELECT t.CustomerLastName
FROM (
    SELECT SUM(OrderLine.Amount * Product.Price) AS OrderLinePrice, Orders.Id, Customer.Lastname AS CustomerLastName
    FROM OrderLine, Product, Orders, Customer
    WHERE OrderLine.ProductId = Product.Id
    AND Orders.Id = OrderLine.OrderId
    AND Customer.Id = Orders.CustomerId
    GROUP BY Orders.Id, Customer.Lastname
    ) AS t
WHERE t.OrderLinePrice = 
(
    SELECT MAX(s.OrderLinePrice) AS MaxOrderPrice
    FROM (
        SELECT SUM(OrderLine.Amount * Product.Price) AS OrderLinePrice, Orders.Id, Customer.Lastname AS CustomerLastName
        FROM OrderLine, Product, Orders, Customer
        WHERE OrderLine.ProductId = Product.Id
        AND Orders.Id = OrderLine.OrderId
        AND Customer.Id = Orders.CustomerId
        GROUP BY Orders.Id, Customer.Lastname
        ) AS s
)
ORDER BY CustomerLastName 
```

这将检索客户列表，其中他们的订单价格等于最昂贵订单的价格。这正好检索到我想要的东西，但感觉非常多余。

我应该如何开始提高效率（如果可能）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:29:08.733

你可以通过几种方式做到这一点。这里有一些建议：

**CTE**

```
;WITH CTE
AS
(
    SELECT SUM(OrderLine.Amount * Product.Price) AS OrderLinePrice, 
    Orders.Id, Customer.Lastname
    FROM OrderLine, Product, Orders, Customer
    WHERE OrderLine.ProductId = Product.Id
    AND Orders.Id = OrderLine.OrderId
    AND Customer.Id = Orders.CustomerId
    GROUP BY Orders.Id, Customer.Lastname
)
SELECT
    MAX(OrderLinePrice) AS MaxorderPrice
FROM
    CTE 
```

**最大子查询**

```
SELECT
    MAX(t.OrderLinePrice) AS MaxorderPrice
FROM
    (
        SELECT SUM(OrderLine.Amount * Product.Price) AS OrderLinePrice, 
            Orders.Id, Customer.Lastname
        FROM OrderLine, Product, Orders, Customer
        WHERE OrderLine.ProductId = Product.Id
        AND Orders.Id = OrderLine.OrderId
        AND Customer.Id = Orders.CustomerId
        GROUP BY Orders.Id, Customer.Lastname
    ) AS t 
```

**排名前 1 的订单**

```
SELECT TOP 1
    t.Amount
FROM
    (
        SELECT SUM(OrderLine.Amount * Product.Price) AS OrderLinePrice, 
            Orders.Id, Customer.Lastname
        FROM OrderLine, Product, Orders, Customer
        WHERE OrderLine.ProductId = Product.Id
        AND Orders.Id = OrderLine.OrderId
        AND Customer.Id = Orders.CustomerId
        GROUP BY Orders.Id, Customer.Lastname
    ) AS t
ORDER BY t.OrderLinePrice DESC 
```

**编辑**

也许是这样的：

```
;WITH CTE
AS
(
    SELECT SUM(OrderLine.Amount * Product.Price) AS OrderLinePrice, 
    Orders.Id, Customer.Lastname
    FROM OrderLine, Product, Orders, Customer
    WHERE OrderLine.ProductId = Product.Id
    AND Orders.Id = OrderLine.OrderId
    AND Customer.Id = Orders.CustomerId
    GROUP BY Orders.Id, Customer.Lastname
)
SELECT
    *
FROM
    CTE
WHERE 
    CTE.OrderLinePrice=(SELECT MAX(CTE2.OrderLinePrice) FROM CTE AS CTE2) 
```

或者，如果您想要客户姓氏的最大值。你可以这样做：

```
;WITH CTE
AS
(
    SELECT SUM(OrderLine.Amount * Product.Price) AS OrderLinePrice, 
    Orders.Id, Customer.Lastname
    FROM OrderLine, Product, Orders, Customer
    WHERE OrderLine.ProductId = Product.Id
    AND Orders.Id = OrderLine.OrderId
    AND Customer.Id = Orders.CustomerId
    GROUP BY Orders.Id, Customer.Lastname
)
SELECT
    MAX(OrderLinePrice) AS MaxPrice,
    Lastname
FROM
    CTE
GROUP BY 
    CTE.Lastname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:10:11.087

首先，您是否考虑过使用显式连接？这可能只是一个口味问题，但也许您会发现显式连接的查询比隐式连接（或“逗号”连接）的查询更清晰，就像在您的示例中一样。

至于问题，您可以使用`TOP (1) WITH TIES`，如下所示：

```
WITH ranked AS (
  SELECT
    SUM(ol.Amount * p.Price) AS OrderLinePrice,
    o.Id,
    c.Lastname AS CustomerLastName
  FROM OrderLine ol
    INNER JOIN Product  p ON p.Id = ol.ProductId
    INNER JOIN Orders   o ON o.Id = ol.OrderId
    INNER JOIN Customer c ON c.Id = o.CustomerId
  GROUP BY Orders.Id, Customer.Lastname
)
SELECT *
FROM (
  SELECT **TOP (1) WITH TIES** CustomerLastName
  FROM ranked
  **ORDER BY OrderLinePrice DESC**
) s
ORDER BY CustomerLastName 
```

或者你可以使用`RANK()`or `DENSE_RANK()`，像这样：

```
WITH ranked AS (
  SELECT
    SUM(ol.Amount * p.Price) AS OrderLinePrice,
    o.Id,
    c.Lastname AS CustomerLastName**,
    RANK() OVER (ORDER BY SUM(ol.Amount * p.Price) DESC) AS rnk**
  FROM OrderLine ol
    INNER JOIN Product  p ON p.Id = ol.ProductId
    INNER JOIN Orders   o ON o.Id = ol.OrderId
    INNER JOIN Customer c ON c.Id = o.CustomerId
  GROUP BY Orders.Id, Customer.Lastname
)
SELECT CustomerLastName
FROM ranked
WHERE rnk = 1
ORDER BY CustomerLastName 
```

如果您只对最高总价感兴趣，`RANK()`就足够了，但如果您希望客户获得最高总价，请*`n`*改用`DENSE_RANK()`并将条件从 更改`rnk = 1`为。`rnk <= *n*`

# php - 在php中下载文件不起作用

> ID：10613797
> 
> 赞同：0
> 
> 时间：2012-05-16T07:22:01.053
> 
> 标签：php, download

我开发了一个从服务器下载 MP3 文件的代码。该代码适用于旧服务器，但不适用于新服务器。当我尝试下载罚款时它显示0字节

我通过 HTTP Post 方法发送下载链接

www.example.com/download.php?dlink=http://www.example.com/music/sample.mp3

这是我使用的代码

```
 ob_start();
    if(isset($_REQUEST['dlink']))
    {
        $file = $_REQUEST['dlink'];
        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename='.basename($file));
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Pragma: public');
        header('Content-Length: ' . filesize($file));
        ob_clean();
        flush();
        readfile($file);
         exit;
    }
ob_flush(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:33:24.587

您不应该在 dlink 参数中传递绝对 url，因为您无法从远程服务器读取文件。

使用这个网址 www.example.com/download.php?dlink=music/sample.mp3

假设根目录中的可执行文件。

# php - 如何让这个函数返回一个值？

> ID：10613798
> 
> 赞同：1
> 
> 时间：2012-05-16T07:22:06.483
> 
> 标签：php, function, return-value

我已经复制粘贴了一个我正在尝试修改的函数。我想让它正确处理错误。现在，`$smtpResponse`不返回任何值。当我在函数中回显值时，它们会显示，但`$smtpResponse`不会产生任何东西，也不会发送真值或假值。

我也尝试返回“失败”和“成功”，但它们没有显示。`$response`没有显示，但“它起作用了！” 做。为什么函数没有返回任何东西？

我试图输出如下：

```
//Send e-mail  
$repsonse = authSendEmail($from, $namefrom, $sendto,"", $subject,$message);

//Report success/failure
echo $response;

The culprit: 

function authSendEmail($from, $namefrom, $to, $nameto, $subject, $message) {
    //Connect to the host on the specified port  
    $smtpConnect = fsockopen($smtpServer, $port, $errno, $errstr, 60);  
    $smtpResponse = fgets($smtpConnect, 515);  

    if(empty($smtpConnect)) {  
        $output = "Failed to connect: $smtpResponse";  
        echo $output;
        return "Fail";
         //return false; 
         //used to read 'return $output' 
    }  

    else {  
        $logArray['connection'] = "Connected: $smtpResponse";  
    }  

    //Request Auth Login  
    fputs($smtpConnect,"AUTH LOGIN" . $newLine);  
    $smtpResponse = fgets($smtpConnect, 515);  
    $logArray['authrequest'] = "$smtpResponse";  

    if(!$smtpResponse) {
        return "Fail";
    }

    //Send username  
    fputs($smtpConnect, base64_encode($username) . $newLine);  
    $smtpResponse = fgets($smtpConnect, 515);  
    $logArray['authusername'] = "$smtpResponse";  

    if(!$smtpResponse) {
        return "Fail";
    }

    //Send password  
    fputs($smtpConnect, base64_encode($password) . $newLine);  
    $smtpResponse = fgets($smtpConnect, 515);  
    $logArray['authpassword'] = "$smtpResponse";  

    if(!$smtpResponse) {
        return "Fail";
    }

    //Say Hello to SMTP  
    fputs($smtpConnect, "HELO $localhost" . $newLine);  
    $smtpResponse = fgets($smtpConnect, 515);  
    $logArray['heloresponse'] = "$smtpResponse";  

    if(!$smtpResponse) {
        return "Fail";
    }

    //Email From  
    fputs($smtpConnect, "MAIL FROM: $from" . $newLine);  
    $smtpResponse = fgets($smtpConnect, 515);  
    $logArray['mailfromresponse'] = "$smtpResponse";  

    if(!$smtpResponse) {
        return "Fail";
    }

    //Email To  
    fputs($smtpConnect, "RCPT TO: $to" . $newLine);  
    $smtpResponse = fgets($smtpConnect, 515);  
    $logArray['mailtoresponse'] = "$smtpResponse";  

    if(!$smtpResponse) {
        return "Fail";
    }

    //The Email  
    fputs($smtpConnect, "DATA" . $newLine);  
    $smtpResponse = fgets($smtpConnect, 515);  
    $logArray['data1response'] = "$smtpResponse";  

    if(!$smtpResponse) {
        return "Fail";
    }

    //Construct Headers  
    $headers = "MIME-Version: 1.0" . $newLine;  
    $headers .= "Content-type: text/html; charset=iso-8859-1" . $newLine;  
    $headers .= "To: ".$nameto." <".$to.">" . $newLine;  
    $headers .= "From: ".$namefrom." <".$from.">" . $newLine;  
    fputs($smtpConnect, "Subject: $subject\n$headers\n\n $message \n.\n");  
    $smtpResponse = fgets($smtpConnect, 515);  
    $logArray['data2response'] = "$smtpResponse";  

    if(!$smtpResponse) {
        return "Fail";
    }

    // Say Bye to SMTP  
    fputs($smtpConnect,"QUIT" . $newLine);   
    $smtpResponse = fgets($smtpConnect, 515);  
    $logArray['quitresponse'] = "$smtpResponse";   

    if(!$smtpResponse) {
        return "Fail";
    }

    echo "It worked!";
    return "Success"; 
    //insert var_dump here -- uncomment out the next line for debug info
    //var_dump($logArray);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:44:55.413

:) 你有错字

```
//Send e-mail  
$repsonse = authSendEmail($from, $namefrom, $sendto,"", $subject,$message);

//Report success/failure
echo $response; 
```

您返回 $ **repsonse**并回显 $ *response*

并记录在案。复制/粘贴别人的代码不会带你去任何地方。如果您想学习自己编写代码，或者如果您真的需要复制/粘贴，请尝试了解您正在复制/粘贴的内容。我不想刻薄，只是给你一个建议。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:26:58.627

也许这太简单了，但是，你真的有这样的一行：

```
//Report success/failure echo $response; 
```

该回声只是评论的一部分，您需要将其放在新行上。

此外，您应该在退出函数之前真正关闭该套接字连接。

此外，恕我直言，在成功时返回布尔值 true 并在失败时返回 false 可能会更好。

# jsf - 使用 Primefaces 树导航

> ID：10613800
> 
> 赞同：1
> 
> 时间：2012-05-16T07:22:11.693
> 
> 标签：jsf, primefaces

我正在使用 Primefaces 3.2 和 JSF 2.0。

在我的应用程序中，在某些情况下节点选择会导致导航。问题是，似乎“nodeSelectListener”属性已从 Primefaces 3.2 中删除，迫使我将 ajax 与

```
<p:Tree ...>
 <p:ajax event="select" listener="#{treeBean.onNodeSelect}" />
</p:Tree> 
```

那只能让我导航使用

```
ExternalContext ec = fc.getExternalContext();
ec.redirect(url); 
```

如果不是因为节点选择在导航后消失了，那会很好。树位于在所有页面上呈现的 facelet 模板内。

我的问题是我无法使用传统的 JSF 导航进行导航，例如在使用 Ajax 时返回一个字符串，即：“myPage.xhtml”。那是行不通的。

我到处寻找更好的解决方案，但我只找到使用“nodeSelectListener”的示例，在树上设置 ajax=false。至少在 3.2 之前。似乎在重定向之后也很难以编程方式设置所选值。有没有人有更好的解决方案？

更新：我找到了一个在某种程度上有效的解决方案：

在 onNodeSelect 方法中，我使用这个

```
FacesContext
  .getCurrentInstance()
  .getApplication()
  .getNavigationHandler()
  .handleNavigation(FacesContext.getCurrentInstance(),
          "null", "myPage.xhtml"); 
```

# entity-framework-4 - 实体框架和事务

> ID：10613802
> 
> 赞同：2
> 
> 时间：2012-05-16T07:22:17.353
> 
> 标签：entity-framework-4, transactions

我们正计划在 asp.net 网络表单中开发一个新的应用程序。我们正在使用实体框架（使用 POCO 类方法）。

我们有表示层、业务逻辑层和数据访问层。我的问题是，如果我们想在页面上进行一些事务性工作，意味着向客户添加一些数据，添加一些与客户无关的其他数据，发送电子邮件等，那么我们如何在单个事务中完成。

我们是否应该在网页后面的代码上开始交易？或者将这些所有数据传递给 BLL 中的某个客户方法，它会以事务方式完成所有这些操作？在这两种方式中，代码都不会松散耦合。

当操作涉及不同的实体时，任何人都可以让我知道进行交易工作的最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:34:33.933

### 描述

`SaveChanges`在内部使用事务，但如果你想执行多个`SaveChanges`调用，你需要`TransactionScope`. 如果`scope.Complete()`未调用（发生异常），则事务将回滚。

### 样本

```
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required))
{
     // add something to your context
     myDbContext.Add(...);
     // save changes
     myDbContext.SaveChanges();
     // commit changes 
     scope.Complete(); 
} 
```

### 更多信息

*   [首先将 TransactionScope 与实体框架代码一起使用](http://pastebin.com/0kPe5T7F)

# codeigniter - CodeIgniter Wanwizard DM 加入其他领域

> ID：10613803
> 
> 赞同：0
> 
> 时间：2012-05-16T07:22:19.823
> 
> 标签：codeigniter, left-join, codeigniter-datamapper

表

上传字段

```
id|user_id|link|status 
```

Upload_acc 字段

```
id|user_id|name|password 
```

上传ACC模型

```
var $table = 'Upload';
var $has_one = array(
'Upload_acc'=>array('class'=>'Upload_acc','other_field'=>'upload','join_table'=>'Upload_acc'),
); 
```

如何使用 dm 进行此查询？

```
SELECT * FROM Upload LEFT JOIN Upload_acc ON Upload.user_id = Upload_acc.user_id WHERE Upload.status=0 
```

我看了看找不到[文件](http://datamapper.wanwizard.eu/pages/advancedrelations.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:50:12.400

你没有。

Datamapper 是一个 ORM，它在主键上维护对象之间的关系。您不能（错误地）将其用作美化的查询构建器。

您可以在 Upload 模型中创建自定义方法，使用 $this->db 在其中运行标准 AR 查询，然后将结果传递给 $this->process_query()。这会将自定义查询的结果转换为 Datamapper 对象。

# opencv - 使用 gpu cuda 支持编译 opencv

> ID：10613809
> 
> 赞同：1
> 
> 时间：2012-05-16T07:22:47.257
> 
> 标签：opencv, cuda, gpu

我将 OpenCV 2.3.1 与 CUDA 4.0 一起使用。

我已经通过 CMAKE 安装了带有 WITH_CUDA 标志的 OpenCV 2.3.1。然后我在发布和调试模式下编译了 OpenCV 解决方案，但是当我使用它的`getCudaEnabledDevice`功能时`CV::GPU`仍然返回 0。这意味着它没有检测到启用 CUDA 的设备。

看来我已经做对了，仍然发生了什么？

任何人都可以建议现在哪里可能出现问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T10:56:11.410

我有同样的问题。我通过使用.exe将opencv_core243d.dll从`E:\opencv\build\gpu\x64\vc10\lib`文件夹复制到工作目录来修复它。
不知道为什么这很重要，但确实如此。

使用 cuda 5.0
VS2010 express
win 7 x64

# javascript - 有没有办法引用除 $(this) 之外的所有项目 - Jquery / JS

> ID：10613810
> 
> 赞同：0
> 
> 时间：2012-05-16T07:22:48.013
> 
> 标签：javascript, jquery, this

如果我有多个项目，设置为`class="item"`，是否可以执行以下操作：

```
$(".item").mouseover(function(){
        $(!this).hide() // every .item but $(this)
         }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T07:23:43.623

```
var items = $(".item"); // caching .item's
items.mouseover(function(){
   items.not(this).hide() // every .item but $(this)                     
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T07:23:25.607

是的，这很容易实现：

```
$('.item').not(this).hide(); 
```

您可以通过存储项目列表来优化这一点：

```
var items = $('.item');
items.mouseover(function() {
    items.not(this).hide();
}); 
```

# php - 使用 PHP 和 Codeigniter 获取 FTP 超时错误

> ID：10613811
> 
> 赞同：0
> 
> 时间：2012-05-16T07:22:48.757
> 
> 标签：php, codeigniter, ftp

我正在尝试使用 PHP 和 Codeigniter 通过 FTP 发送文件。我实际上没有使用 Codeigniter FTP 类，因为它不能满足我的需要，因此它是原生 PHP。

基本上我需要的是脚本在发送的文件超时时执行操作。目前我的代码是这样的：

```
// connect to the ftp server
$connection = ftp_connect($item_server);

// login to the ftp account
$login = ftp_login($connection, $item_username, $item_password);

// if the connection or account login failed, change status to failed
if (!$connection || !$login) 
    { 
        // do the connection failed action here
    }
else
    {

// set the destination for the file to be uploaded to
$destination = "./".$item_directory.$item_filename;

// set the source file to be sent
$source = "./assets/photos/highres/".$item_filename;

// upload the file to the ftp server
$upload = ftp_put($connection, $destination, $source, FTP_BINARY);

// if the upload failed, change the status to failed
if (!$upload) 
    {
        // do the file upload failed action here
    }
// fi the upload succeeded, change the status to sent and close the ftp connection
else 
{
    ftp_close($connection);
    // update the item's status as 'sent'
// do the completed action here
    }

} 
```

所以基本上脚本连接到服务器并尝试将文件放入。如果无法建立连接，或者无法放入文件，它当前会执行操作。但我认为超时它只是坐在那里没有回复。我需要对所有内容的响应，因为它在自动脚本中运行，并且用户知道发生了什么的唯一方法是脚本告诉他们。

如果服务器超时，我怎样才能得到响应？

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:52:26.687

如果您阅读[手册](http://php.net/ftp_connect)，忽略超时值，它默认为 90 秒。

您可以将此值设置为更可接受的值并单独验证连接，而不是同时验证连接和登录。

```
// connect to the ftp server and timeout after 15 seconds if connection can't be established
$connection = ftp_connect($item_server, 21, 15);
if( ! $connection )
{
    exit('A connection could not be established');  
}

// login to the ftp account
if( ! ftp_login($connection, $item_username, $item_password) )
{
    exit('A connection was established, but the credientials seems to be wrong');   
} 
```

请注意，`ftp_login()`如果登录凭据错误，则会发出警告，因此您可能会以另一种方式处理（错误处理或简单地抑制警告）。

# postgresql - 如何让 Flask SQLAlchemy 重用数据库连接？

> ID：10613812
> 
> 赞同：22
> 
> 时间：2012-05-16T07:22:58.880
> 
> 标签：postgresql, sqlalchemy, flask, flask-sqlalchemy

我似乎无法让我的 Flask 应用程序关闭或重用数据库连接。我正在使用 PostgreSQL 9.1.3 和

```
Flask==0.8
Flask-SQLAlchemy==0.16
psycopg2==2.4.5 
```

当我的测试套件运行时，打开的连接数一直在攀升，直到达到 20（中的`max_connections`设置`postgresql.conf`），然后我看到：

```
OperationalError: (OperationalError) FATAL:  sorry, too many clients already
 None None 
```

`create_all`我已经将代码减少到它只是调用和`drop_all`（但没有发出任何 sql，因为没有模型）的地步。

我在日志中看到正在签入和签出的连接：

```
DEBUG:sqlalchemy.pool.QueuePool:Connection <connection object at 0x101c1dff0; dsn: 'dbname=cx_test host=localhost', closed: 0> checked out from pool
DEBUG:sqlalchemy.pool.QueuePool:Connection <connection object at 0x101c1dff0; dsn: 'dbname=cx_test host=localhost', closed: 0> being returned to pool
WARNING:root:impl   <-------- That's the test running
DEBUG:sqlalchemy.pool.QueuePool:Connection <connection object at 0x101c1dff0; dsn: 'dbname=cx_test host=localhost', closed: 0> checked out from pool
DEBUG:sqlalchemy.pool.QueuePool:Connection <connection object at 0x101c1dff0; dsn: 'dbname=cx_test host=localhost', closed: 0> being returned to pool 
```

对于每个测试运行，连接的地址（“xyz 处的连接对象”部分）是不同的。我怀疑这与问题有关，但我不确定如何进一步调查。

下面的代码在新的 venv 中重现了该问题：

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy
from unittest import TestCase

import logging
logging.basicConfig(level=logging.DEBUG)
logging.getLogger('sqlalchemy.pool').setLevel(logging.DEBUG)
logging.getLogger('sqlalchemy.engine').setLevel(logging.DEBUG)
logging.getLogger('sqlalchemy.dialects').setLevel(logging.DEBUG)
logging.getLogger('sqlalchemy.orm').setLevel(logging.DEBUG)

db = SQLAlchemy()

def create_app(config=None):
    app = Flask(__name__)
    app.config.from_object(config)
    db.init_app(app)
    return app

class AppTestCase(TestCase):
    SQLALCHEMY_DATABASE_URI = "postgresql://localhost/cx_test"
    TESTING = True

    def create_app(self):
        return create_app(self)

    def setUp(self):
        self.app = self.create_app()
        self.client = self.app.test_client()
        self._ctx = self.app.test_request_context()
        self._ctx.push()
        db.create_all()

    def tearDown(self):
        db.session.remove()
        db.drop_all()
        self._ctx.pop()

class TestModel(AppTestCase):
    def impl(self):
        logging.warn("impl")
        pass

    def test_01(self):
        self.impl()

    def test_02(self):
        self.impl()

    def test_03(self):
        self.impl()

    def test_04(self):
        self.impl()

    def test_05(self):
        self.impl()

    def test_06(self):
        self.impl()

    def test_07(self):
        self.impl()

    def test_08(self):
        self.impl()

    def test_09(self):
        self.impl()

    def test_10(self):
        self.impl()

    def test_11(self):
        self.impl()

    def test_12(self):
        self.impl()

    def test_13(self):
        self.impl()

    def test_14(self):
        self.impl()

    def test_15(self):
        self.impl()

    def test_16(self):
        self.impl()

    def test_17(self):
        self.impl()

    def test_18(self):
        self.impl()

    def test_19(self):
        self.impl()

if __name__ == "__main__":
    import unittest
    unittest.main() 
```

这是我第一次在 Flask 中使用应用工厂，我部分地从[Flask-SQLAlchemy 文档](http://packages.python.org/Flask-SQLAlchemy/contexts.html)中复制了这段代码。[Elseware](http://packages.python.org/Flask-SQLAlchemy/api.html#flask.ext.sqlalchemy.SQLAlchemy.init_app)那些文档提到在错误的上下文中使用 db 会导致连接泄漏 - 也许我做的 init 不正确？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-01T15:36:22.957

在阅读了 SQLAlchemy 文档并摆弄了一些数据库实例之后，我终于得到了解决方案。添加`db.get_engine(self.app).dispose()`，`tearDown()`使其看起来像：

```
def tearDown(self):
    db.session.remove()
    db.drop_all()
    db.get_engine(self.app).dispose()
    self._ctx.pop() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-06T00:48:46.573

自从大约一年前提出这些问题以来，我认为 OP 一定已经解决了他的问题。但是对于那些徘徊到这里（像我一样）试图弄清楚发生了什么的人来说，这是我最好的解释：

正如范所说，问题确实在于测试用例调用`setUp`和`tearDown`每个测试。虽然连接并没有完全从 SQLAlchemy 泄漏，而是因为每个测试都有自己的`setUp`，所以创建了应用程序的多个实例：每个应用程序都有自己的数据库连接池，大概不会被重用或回收测试结束。

换句话说，连接正在被检出并**正确**返回到池中，但该连接随后作为空闲连接继续存在，以供**同一**应用程序中的未来事务使用（连接池点）。

在上面的测试用例中，创建了大约 20 个连接池（每个都有空闲连接，因为 create/drop_all）并占用了 postgres 连接限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-16T00:32:17.087

编辑：SQLALCHEMY_COMMIT_ON_TEARDOWN 在 Flask-SQLAlchemy 版本 2.4.3 中已弃用。您可以在此处查看更改说明，他们建议`.commit()`您自行致电：

[https://flask-sqlalchemy.palletsprojects.com/en/2.x/changelog/?highlight=sqlalchemy_commit_on_teardown#version-2-4-3](https://flask-sqlalchemy.palletsprojects.com/en/2.x/changelog/?highlight=sqlalchemy_commit_on_teardown#version-2-4-3)

如果响应状态代码 < 400，我要做的是注册我自己的`app.after_request`调用`.commit()`。这需要您正确构建应用程序以确保响应状态代码 < 400 的 HTTP 事务应该提交到数据库，但我认为这是一个很好的设计原则。

----下面的旧答案----

在最新版本的 Flask-SQLAlchemy 中，`session.remove()`会自动调用`app.after_request`.

另外，请参阅`SQLALCHEMY_COMMIT_ON_TEARDOWN`此处的设置：

[https://pythonhosted.org/Flask-SQLAlchemy/config.html?highlight=sqlalchemy_commit_on_teardown](https://pythonhosted.org/Flask-SQLAlchemy/config.html?highlight=sqlalchemy_commit_on_teardown)

这也将自动提交事务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T16:12:16.067

你知道[`setUp and tearDown`](http://docs.python.org/library/unittest.html#unittest.TestCase.setUp)在 every 之前和之后都会调用`test method`。从您的代码看来，您需要它们以确保空数据库。
但是，也有[`setUpClass and tearDownClass`](http://docs.python.org/library/unittest.html#setupclass-and-teardownclass), 每个测试类调用一次。
我相信您可以拆分您当前拥有的代码并将`db-connection`相关部分移动到 -`Class`级别，同时将`test-method`相关部分保留在需要的位置。

# performance-testing - LoadRunner 和终端服务使用

> ID：10613823
> 
> 赞同：0
> 
> 时间：2012-05-16T07:23:26.843
> 
> 标签：performance-testing, loadrunner

我被要求在多台 PC 上使用 LoadRunner 来生成更大的负载，但我无法设置它。我知道我必须使用终端服务。有人可以帮我吗？基本上只需几个步骤即可设置控制器，因为我从未这样做过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:09:53.050

您不需要使用终端服务。您需要使用“负载生成器”的概念 - 使用此搜索词查看帮助页面，但基本上您在远程盒子上安装一些软件（与 LR 相同的磁盘），然后使用主控制器（控制器）连接到每一个并控制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T22:46:36.223

所以基本上有人要求您在多台机器上安装控制器的副本，以便产生比评估许可证附带的更大的负载，对吗？

如果是这样，那么你有两个问题在起作用

*   评估许可证不用于生产用途
*   要求您这样做的人要求您几乎忽略许可证。我敢打赌，如果有人为此对您的组织进行抨击，他们会将您扔到公共汽车下。

从终端服务器的角度来看，您可以在何时何地使用远程桌面来触摸 LoadRunner 控制器有相当严格的限制。即，如果控制器位于城市 A 而您位于城市 B，那么您在使用远程桌面/终端服务时几乎是 SOL，而不会 (a) 违反许可协议或 (b) 在购买 Performance Center 的情况下处于许可范围内。

# web-services - 如何使用 REST Web 服务删除文件

> ID：10613828
> 
> 赞同：0
> 
> 时间：2012-05-16T07:23:47.273
> 
> 标签：web-services, rest, drupal-services

> 服务版本 7.x-3.1 drupal 版本 7.12

我使用休息服务以 Base64 编码上传文件

> 资源路径：file.json

如何使用休息服务删除文件？
我现在如何删除节点

> 资源路径：节点/nid.json，资源类型：删除

我测试

> 资源路径：文件/fid.json，资源类型：删除

但收到404！

# c - 高斯混合 - C

> ID：10613830
> 
> 赞同：1
> 
> 时间：2012-05-16T07:24:04.080
> 
> 标签：c, opencv, gaussian, mog

有谁知道能够与 OpenCV 一起使用的高斯混合（必须用于 C）的良好实现？

我知道 OpenCV for C++ 中已经包含了一个未记录的实现，但是它必须在 C 中。如果已经有一个可以满足我的需求，我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:47:34.883

我在 OpenCV 中找到了[期望最大化](http://docs.opencv.org/modules/legacy/doc/expectation_maximization.html)的过时 C 接口，希望对您有所帮助。

# jsf-2 - @Named 在集成 JSF 2.0 和 spring 3.0.6 时不能在 weblogic 上工作

> ID：10613831
> 
> 赞同：0
> 
> 时间：2012-05-16T07:24:06.743
> 
> 标签：jsf-2, annotations, myfaces, spring-3

我在互联网上阅读了一篇关于使用 @Named 注释注入 JSF 托管 bean 的文章。

[如何使用@Named 注解](http://comdynamics.net/blog/89/jsf2-with-spring3-and-jsr-330/)

但它不适用于 weblogic 10.0.2。（在码头上工作正常）

我正在使用 Myfaces 2.1.6、Spring 3.0.6 进行注入。

请找到我在 POM.xml 中添加的 spring 和 JSF 的依赖项：

```
<dependencies>

        <dependency>
            <groupId>javax.annotation</groupId>
            <artifactId>jsr250-api</artifactId>
            <version>1.0</version>
        </dependency>

        <dependency>
            <groupId>org.jboss.el</groupId>
            <artifactId>jboss-el</artifactId>
            <version>2.0.1.GA</version>
            <scope>compile</scope>
            <exclusions>
                <exclusion>
                    <groupId>javax.el</groupId>
                    <artifactId>el-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.apache.myfaces.core</groupId>
            <artifactId>myfaces-api</artifactId>
            <version>2.1.6</version>
        </dependency>

        <dependency>
            <groupId>org.apache.myfaces.core</groupId>
            <artifactId>myfaces-impl</artifactId>
            <version>2.1.6</version>
        </dependency>

        <dependency>
            <groupId>commons-el</groupId>
            <artifactId>commons-el</artifactId>
            <version>1.0</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>

    </dependencies> 
```

**面孔-config.xml**

```
<?xml version="1.0"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
      http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd"
    version="1.2">
    <navigation-rule>
        <description>Navigation from the hello page.</description>
        <from-view-id>/login.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/wsListing.xhtml</to-view-id>
            <redirect />
        </navigation-case>
        <navigation-case>
            <from-outcome>failure</from-outcome>
            <to-view-id>/failure.xhtml</to-view-id>
            <redirect />
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <description>Navigation from the hello page.</description>
        <from-view-id>/wsListing.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>abcService</from-outcome>
            <to-view-id>/abcinput.xhtml</to-view-id>
            <redirect />
        </navigation-case>
        <navigation-case>
            <from-outcome>filterabc</from-outcome>
            <to-view-id>/filterabcinput.xhtml</to-view-id>
            <redirect />
        </navigation-case>
    </navigation-rule>

    <navigation-rule>
        <description>Navigation from the hello page.</description>
        <from-view-id>/abcinput.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/abcoutput.xhtml</to-view-id>
            <redirect />
        </navigation-case>
    </navigation-rule>

    <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    </application>
</faces-config> 
```

如果您能确定我做错了什么，请告诉我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:08:02.327

尝试在 applicationContext XML 中使用包含过滤器

```
<context:component-scan base-package="com.example.scan" >
    <context:include-filter  type="regex" expression="com.example.scan.*Bean"  />
</context:component-scan> 
```

# asp.net - 如何使用 Asp.net 将批量表添加到数据库中

> ID：10613837
> 
> 赞同：-1
> 
> 时间：2012-05-16T07:24:39.667
> 
> 标签：asp.net, sql, bulk

我在这里遇到一种情况，我需要上传一个 Excel 表，其中可能有超过 50K 的记录。现在的问题是我使用 DataTable 管理它。我将整个记录存储到 DataTable 中，并处理行并将其一一插入到数据库中。

我可以看到它只在一秒钟内插入 50 个记录，完成整个过程需要几个小时。

有什么方法可以将整个数据集或数据表发送到 SQL，这样它会比这快得多？

我正在使用 Web 应用程序。

* * *

在 Windows 应用程序中，有使用 DataAdapter 进行批量更新的选项。同样明智的是 ASP.NET 有什么方法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:40:40.327

希望这是你想要的

```
 public void BultInsert(DataTable dtSource)
            {
                System.Data.SqlClient.SqlBulkCopy bcp = new System.Data.SqlClient.SqlBulkCopy(GetconnectionString());//add connectionstring here

                bcp.DestinationTableName = "DestinationTable";//give destination table name

                //bcp.ColumnMappings.Add("Column1", "Column1");//Map all columns

                bcp.ColumnMappings.Add("Column2", "Column2");

                bcp.ColumnMappings.Add("Column3", "Column3");            
    // and so on...., maap all source table with your destination table
                if (dtSource.Rows.Count > 0)
                {
                    bcp.WriteToServer(dtSource);
                }

            } 
```

# sql - 在 oracle 中使用 sequence.nextval 创建表

> ID：10613846
> 
> 赞同：52
> 
> 时间：2012-05-16T07:25:40.970
> 
> 标签：sql, database, oracle, plsql

我使用以下查询创建了一个序列，

```
create sequence qname_id_seq start with 1 increment by 1 nocache; 
```

现在，当我尝试创建一个使用上述序列的表时，它会引发以下错误，

```
Error report:
SQL Error: ORA-00907: missing right parenthesis
00907\. 00000 -  "missing right parenthesis" 
```

我使用以下查询创建了一个带有 sequence.nextval 的表，

```
CREATE TABLE qname
(
    qname_id integer NOT NULL default qname_id_seq.nextval PRIMARY KEY,
    qname    VARCHAR2(4000) NOT NULL -- CONSTRAINT qname_uk UNIQUE
); 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-16T07:28:03.553

### 甲骨文 12c

我们现在终于有了`IDENTITY`像许多其他数据库一样的列，在这种情况下，序列是在幕后自动生成的。此解决方案比基于触发器的解决方案快得多，[如本博文所示](https://oracle-base.com/articles/12c/identity-columns-in-oracle-12cr1)。

因此，您的表创建将如下所示：

```
CREATE TABLE qname
(
    qname_id integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1) NOT NULL PRIMARY KEY,
    qname    VARCHAR2(4000) NOT NULL -- CONSTRAINT qname_uk UNIQUE
); 
```

### Oracle 11g 及以下

根据[文档](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_7002.htm#sthref7262)，您不能这样做：

> 默认列值的限制 DEFAULT 表达式不能包含对 PL/SQL 函数或其他列、伪列 CURRVAL、NEXTVAL、LEVEL、PRIOR 和 ROWNUM 或未完全指定的日期常量的引用。

在 Oracle 中拥有“自动递增”列的标准方法是使用触发器，例如

```
CREATE OR REPLACE TRIGGER my_trigger
  BEFORE INSERT 
  ON qname
  FOR EACH ROW
  -- Optionally restrict this trigger to fire only when really needed
  WHEN (new.qname_id is null)
DECLARE
  v_id qname.qname_id%TYPE;
BEGIN
  -- Select a new value from the sequence into a local variable. As David
  -- commented, this step is optional. You can directly select into :new.qname_id
  SELECT qname_id_seq.nextval INTO v_id FROM DUAL;

  -- :new references the record that you are about to insert into qname. Hence,
  -- you can overwrite the value of :new.qname_id (qname.qname_id) with the value
  -- obtained from your sequence, before inserting
  :new.qname_id := v_id;
END my_trigger; 
```

在文档中阅读有关[Oracle TRIGGER的更多信息](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/triggers.htm)

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-08-09T18:37:20.507

在 Oracle 12c 中，您现在可以将 CURRVAL 和 NEXTVAL 序列伪列指定为列的默认值。或者，您可以使用身份列；看：

*   [参考文件](http://docs.oracle.com/cd/E16655_01/server.121/e17209/statements_7002.htm#SQLRF54458)
*   文章：Oracle DB 12cR1 (12.1) 中的增强功能：12.1中表列和[标识列的](http://www.oracle-base.com/articles/12c/identity-columns-in-oracle-12cr1.php)[默认值](http://www.oracle-base.com/articles/12c/default-values-for-table-columns-enhancements-12cr1.php)

例如，

```
CREATE SEQUENCE t1_seq;
CREATE TABLE t1 (
  id          NUMBER DEFAULT t1_seq.NEXTVAL,
  description VARCHAR2(30)
); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-16T07:46:11.607

我自己更喜欢 Lukas Edger 的解决方案。

但您可能想知道还有一个函数[SYS_GUID](http://docs.oracle.com/cd/B14117_01/server.101/b10759/functions153.htm)可以作为默认值应用于列并生成唯一 ID。

[你可以在这里](http://rwijk.blogspot.com/2009/12/sysguid.html)阅读更多关于利弊的信息

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-08T08:27:58.477

您可以使用 Oracle 的**SQL Developer**工具来执行此操作（我的 Oracle DB 版本是 11）。创建表时，选择 **Advanced 选项**并单击底部 的**Identity Column选项卡，然后从那里选择****Column Sequence**。这将为您生成一个*AUTO_INCREMENT*列（相应的触发器和序列）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-11T11:43:53.953

在**Oracle 12c**中，您还可以声明一个**标识列**

```
CREATE TABLE identity_test_tab (
  id          NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  description VARCHAR2(30)
); 
```

[这里](https://oracle-base.com/articles/12c/identity-columns-in-oracle-12cr1)的示例和性能测试......其中，是短裤，结论是*直接使用序列*或新的*标识列*比**触发器快得多。**

# java - 如何从 InputStream 中捕获事件？

> ID：10613847
> 
> 赞同：0
> 
> 时间：2012-05-16T07:25:43.970
> 
> 标签：java, sockets, client

这是程序的客户端部分。我有这样的类，它与套接字一起使用，并且具有读取和写入服务器的方法我怎样才能创建一个事件来捕获来自服务器的消息？一些仅在 inputStream 中有消息时才执行操作的 actionListener。我试过调用 Running.receiveLine(); 的计时器 但效果很差。while(true) 的解决方案似乎也不好。

```
public class Running extends Thread{
private Socket s;
private PrintStream ps;
private BufferedReader br;

public Running(){
try{
    s = new Socket(InetAddress.getLocalHost(), 8072);
    ps = new PrintStream(s.getOutputStream());
    br = new BufferedReader(new InputStreamReader(s.getInputStream()));
} catch (UnknownHostException ex) {
    System.out.println("11");
    ex.printStackTrace();
} catch (IOException ex) {
    System.out.println("00");
    ex.printStackTrace();
}
}

public String receiveLine(){
    String ret = "";
    try {
        ret = br.readLine();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return ret;
}

public void sendLine(String s){
    ps.println(s);
}

public void close(){
    try {
        s.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:34:37.417

我认为使用方法不是问题，`read()`因为它会阻塞流量，直到有新的数据可用。所有标准 Java 输入流都基于监视器很好地实现了这种方法。所以你的线程在等待期间不会吃掉 CPU 和其他资源。

您也可以参考 Java NIO 中的非阻塞 IO。

**小补充。** 要与它一起使用，`Swing`您可以使用队列方法与`SwingWorker`.

# javascript - 从数组中提取序列

> ID：10613850
> 
> 赞同：0
> 
> 时间：2012-05-16T07:25:51.727
> 
> 标签：javascript, arrays, multidimensional-array

从任意值的数组开始，我希望能够提取给定值的所有序列。所以如果我从这个开始

```
[1,0,1,1,1,1,0,0] 
```

并搜索了 1。我想回来

```
[[1],[1,1,1,1]] 
```

我在 AS 中看到了一个实现，虽然不够清楚，我无法翻译：[在 AS3 数组中查找序列](https://stackoverflow.com/questions/9485615/finding-sequences-in-as3-array)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:21:45.507

我用代码注释从头写了一个：

```
function makeSequence(input, val) {
    var output = [], current = [];

    for (var i = 0; i < input.length; i++) {
        if (input[i] === val) {
            // if we have a matching value, add it to
            // the current match
            current.push(val);
        } else if (current.length) {
            // no match on current value, write out
            // any previous match
            output.push(current);
            current = [];
        }
    }
    // when done, make sure to add the last match
    if (current.length) {
        output.push(current);
    }
    return(output);
} 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/YvsET/](http://jsfiddle.net/jfriend00/YvsET/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:29:10.033

[AS3 基于 ECMAScript](http://en.wikipedia.org/wiki/ActionScript)，因此几乎兼容（除了标识符）并且很容易转换为 JS。试试这个转换后的代码版本（或多或少，只是去掉了标识符）。

```
var prev = '',
    q = 0,
    result = [],
    numbers = [1, 0, 1, 1, 1, 1, 0, 0],
    i;
for (i = 0; i < numbers.length; ++i) {
    if (prev != numbers[i]) {
        if (q > 0) {
            result.push(q);
        }
        q = 1;
        prev = numbers[i];
    } else {
        ++q;
    }
}
if (q > 0) {
    result.push(q);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:36:03.760

```
var prev = '',q = 0, numbers = [1,0,1,1,1,1,0,0];
for(var i=0; i<numbers.length; i++){   
 if(prev!=numbers[i]){      
   if(q>0) 
     result.push(q);
   q=1;    
   prev=numbers[i];
  }   
   else 
      q++; 
} 
if(q>0) 
   result.push(q);
return result; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T07:52:40.037

[只是使用filter() 方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)的另一个实现：参见示例小提琴[http://jsfiddle.net/NNmwr/2](http://jsfiddle.net/NNmwr/2)

```
var data         = [1,0,1,1,1,1,0,0],
    sequence_one = [];
    result       = [];

data.filter(function(d, i) {
   var current = data[i],
       prev    = data[i-1] || 0;

   if (current) {
      sequence_one.push(1);
      if (i === data.length -1) {
          result.push(sequence_one);    
      }
   }
   else {       
      if (prev) {
        result.push(sequence_one);
        sequence_one = [];
      }
   }
})

console.log(result); // [ [1], [1,1,1,1] ] 
```

# java - 以静态方式创建对象

> ID：10613853
> 
> 赞同：68
> 
> 时间：2012-05-16T07:25:57.817
> 
> 标签：java, static

谁能解释一下Java是如何执行这段代码的？我的意思是执行每个语句的顺序。

```
public class Foo
{
    boolean flag = sFlag;
    static Foo foo = new Foo();
    static boolean sFlag = true;

    public static void main(String[] args)
    {
        System.out.println(foo.flag);
    }
} 
```

**输出：**

```
false 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-05-16T07:30:05.683

*   类初始化开始。最初，`foo`为空且`sFlag`为假
*   第一个静态变量初始化程序 ( `foo`) 运行：
    *   `Foo`创建了一个新的实例
    *   用于执行的实例变量初始值设定项`flag`- 当前`sFlag`为 false，因此值为`flag`false
*   第二个静态变量初始化器 ( `sFlag`) 执行，将值设置为 true
*   类初始化完成
*   `main`运行，打印出来`foo.flag`，这是错误的

请注意，如果`sFlag`被声明为`final`，它将被视为*编译时常量*，此时对它的所有引用基本上都将被内联到`true`，因此`foo.flag`也是如此。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-16T07:29:17.320

`foo`在类的静态初始化期间和 sFlag 初始化之前实例化，布尔值的默认值为 false。

1.  类已加载
2.  Foo 被初始化为实例

    2.a实例成员标志初始化为sFlag的值（`false`默认）

3.  sFlag 初始化为**true**

有关详细信息，请参阅[JLS §12.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-16T07:31:25.387

当类被加载，`sFlag`并且`foo`字段被初始化但`foo`首先被初始化！
字段`flag`和`sFlag`是布尔值，不能为空，所以默认情况下是假的，在初始化`sFlag`时仍然是假的。在这之后是假的。就是这样`foo``flag = sFlag``flag`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T10:04:12.287

初始化操作的一般顺序是（在加载类之后和第一次使用之前）：

1.  静态（类）代码块按顺序出现在代码中，
2.  对象代码块按其出现在代码中的顺序（初始化块和赋值）。
3.  构造函数

当然，我不会将构造函数和函数体称为上面的*代码块*。

我不知道`final static`字段如何。看起来它们遵循`static`字段规则，并且在声明之前无法引用它们，尽管之前有评论说它们是在编译步骤初始化的。如果在出现编译错误之前引用它们：

```
Example.java:8: illegal forward reference
        System.err.println("1st static block j=" + j); 
```

也许`final static`字段可以初始化并编译到类文件中，但这不是一般规则，在声明之前仍然不能引用它们。

检查初始化顺序的示例代码：

```
class Example {    

    final static int j = 5;

    {
        System.err.println("1st initializer j=" + j);
    }

    static {
        System.err.println("1st static block j=" + j);
    }

    static {
        System.err.println("2nd static block j=" + j);
    }

    final static java.math.BigInteger i = new java.math.BigInteger("1") {    
        {
            System.err.println("final static anonymous class initializer");
        }
    };

    Example() {
        System.err.println("Constructor");
    }

    static {
        System.err.println("3nd static block j=" + j);
    }

    {
        System.err.println("2nd initializer");
    }

    public static void main(String[] args) {
        System.err.println("The main beginning.");
        Example ex = new Example();
        System.err.println("The main end.");
    } 
} 
```

上面的代码片段打印：

```
1st static block j=5
2nd static block j=5
final static anonymous class initializer
3nd static block j=5
The main beginning.
1st initializer j=5
2nd initializer
Constructor
The main end. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T07:42:33.463

起初静态字段应该运行并且首先内联！所以在第一行第 4 行，然后第 5 行将运行，所以首先初始化 foo 并且我们知道布尔变量默认初始化为 false 所以首先，当 foo 被初始化时，flag 的字段是 sflag，它是 false，然后 sfalsg 变为 true不会改变标志（没有关系）然后最后主要运行并打印错误的 falg ！！！希望有用！成功的

# html - 我将如何在 JSF 2 中模拟这种有条件地包含资源？

> ID：10613854
> 
> 赞同：0
> 
> 时间：2012-05-16T07:26:08.493
> 
> 标签：html, jsf, jsf-2, conditional-comments

简而言之，我想这样做（条件部分，我知道如何包含`<h:outputStyleSheet>`）：

```
<link rel="stylesheet" href="[path-to-dist]/leaflet.css" />
<!--[if lte IE 8]>
    <link rel="stylesheet" href="[path-to-dist]/leaflet.ie.css" />
<![endif]--> 
```

在 JSF 2 中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:56:43.767

采用`<h:outputText escape="false">`

```
<h:outputText value="&lt;!--[if lte IE 8]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;[path-to-dist]/leaflet.ie.css&quot;/&gt;&lt;![endif]--&gt;" escape="false" /> 
```

是的，这是一条丑陋的路线，但实际上没有其他方法，因为 Facelets 本质上是一种基于 XML 的视图技术。

* * *

**更新**：如果您碰巧使用 JSF 实用程序库[OmniFaces](http://omnifaces.org)，您可以只使用[它的`<o:conditionalComment>`组件](http://showcase.omnifaces.org/components/conditionalComment)。

```
<o:conditionalComment if="lte IE 8">
    <link rel="stylesheet" href="[path-to-dist]/leaflet.ie.css" />
</o:conditionalComment> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:49:11.620

我认为您应该能够包装`<h:outputText value="#{bean.pathToDist}" />`到您的链接。喜欢`<link rel="stylesheet" href="<h:outputText value="#{bean.pathToDist}" />/leaflet.css" />`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T12:01:28.847

尝试：

```
<f:verbatim>
&lt;!--[if IE]&gt;
<link rel="stylesheet" href="path/to/file.css" />
&lt;![endif]--&gt;
</f:verbatim> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-14T14:48:30.947

我试过这个：

```
<h:outputStylesheet library="css" name="blueprint/screen.css" />
<f:verbatim>&lt;!--[if lt IE 8]&gt;</f:verbatim>
<h:outputStylesheet library="css" name="blueprint/ie.css" />
<f:verbatim>&lt;![endif]--&gt;</f:verbatim>
<h:outputStylesheet library="css" name="esap.css" /> 
```

html输出是：

```
<!--[if lt IE 8]><![endif]-->
<link rel="stylesheet" media="screen" type="text/css" href="/esap/javax.faces.resource/blueprint/screen.css.xhtml?ln=css" />
<link rel="stylesheet" media="screen" type="text/css" href="/esap/javax.faces.resource/blueprint/ie.css.xhtml?ln=css" />
<link rel="stylesheet" media="screen" type="text/css" href="/esap/javax.faces.resource/esap.css.xhtml?ln=css" /> 
```

条件 html 放在样式表链接之前。

# php - 使用 FQL 多查询获取照片的结果不一致

> ID：10613861
> 
> 赞同：2
> 
> 时间：2012-05-16T07:26:54.560
> 
> 标签：php, facebook, facebook-fql

我打算使用 FQL 从我的朋友相册中获取包含某些特定条件的任何照片。该标准基于时间范围（$since - $until）和专辑标题的相似性基于与某些字符串的相似性（等于 SQL 中的“LIKE”）。这是我用来获取照片的 FQL 多查询：

```
$multiQuery = '{
"query1":"SELECT uid, name FROM user WHERE uid = me() OR uid IN (SELECT uid2 FROM friend WHERE uid1 = me())",
"query2":"SELECT aid, object_id, owner, link, created, location, name FROM album WHERE owner IN  (SELECT uid FROM #query1) AND created>= '.$unix_since_date.' AND created<= '.$unix_until_date.' AND (strpos(name,\''.$event.'\')>=0 OR strpos(name,\''.$organization.'\')>=0 OR strpos(name,\''.$location.'\')>=0)",
"query3":"SELECT object_id, pid, aid, owner, src_small, src_big, caption, created, place_id, like_info, comment_info FROM photo WHERE aid IN  (SELECT aid FROM #query2)"
}'; ` 
```

问题：一些用户可以根据标准成功地从他们的朋友那里选择照片。一些用户可以部分获得结果，而另一些用户则根本无法选择，尽管他们有朋友上传了符合所选条件的相册（并且这些朋友不限制他们的相册）。

几天来，我一直试图弄清楚为什么用户之间的选择结果不一致。有任何想法吗？

# c# - 如何进行 Direct3D Alpha 混合

> ID：10613862
> 
> 赞同：1
> 
> 时间：2012-05-16T07:26:56.313
> 
> 标签：c#, direct3d, alphablending, blending

我正在尝试在混合平行六面体容器内显示几个 3D 对象。得到的结果并不令人满意。

第一个数字似乎是正确的 [https://picasaweb.google.com/lh/photo/QabTkrf2zyIMP0UEuZvmTdMTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/QabTkrf2zyIMP0UEuZvmTdMTjNZETYmyPJy0liipFm0?feat=directlink)

第二个是错误的 [https://picasaweb.google.com/lh/photo/JqnZqeTuomNLqDR5vhizadMTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/JqnZqeTuomNLqDR5vhizadMTjNZETYmyPJy0liipFm0?feat=directlink)

我将托管 Directx 与 C# 一起使用

初始化：

```
DxDeviceArea.Transform.Projection = Matrix.PerspectiveFovLH((float)Math.PI / 4, 1.0f, 1.0f, MaxSizeArea * 2);
DxDeviceArea.Transform.View = Matrix.LookAtLH(new Vector3(0, 0, MaxSizeArea / 2f), new Vector3(0, 0, 0), new Vector3(0, 1, 0));
DxDeviceArea.RenderState.Lighting = true;
DxDeviceArea.RenderState.CullMode = Cull.CounterClockwise;
DxDeviceArea.RenderState.SourceBlend = Blend.SourceAlpha;
DxDeviceArea.RenderState.DestinationBlend = Blend.InvSourceAlpha;
DxDeviceArea.RenderState.AlphaBlendEnable = true;
DxDeviceArea.RenderState.BlendOperation = BlendOperation.Add;
DxDeviceArea.RenderState.AlphaTestEnable = true;
//Set light
DxDeviceArea.Lights[0].Type = LightType.Directional;
DxDeviceArea.Lights[0].Diffuse = Color.White;
DxDeviceArea.Lights[0].Direction = new Vector3(0, 0, -1);
DxDeviceArea.Lights[0].Enabled = true; 
```

在渲染函数中，第一步是在对象内部绘制，第二步是绘制混合边框。

在绘制第二个之前，我将 cullmode 从 CounterClockwise 切换到 None

```
DxDeviceArea.RenderState.CullMode = Cull.None; 
```

回转

```
//rotation
DxDeviceArea.Transform.World *= Matrix.RotationY((-PosX / 300F)) * Matrix.RotationX(PosY / 300F); 
```

我怎样才能解决显示的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:40:34.813

为了正确绘制透明表面，您必须按深度对它们进行排序并从后到前渲染它们。您还必须在渲染透明对象时禁用 z 缓冲区测试。

# php - 发送电子邮件

> ID：10613865
> 
> 赞同：-8
> 
> 时间：2012-05-16T07:27:13.117
> 
> 标签：php, html

使用 PHP，我正在尝试通过电子邮件发送表单中的详细信息。

我在我的页面上收到一封确认邮件，表明电子邮件已发送，但我从未在收件箱中收到该邮件。

有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:35:23.670

如果您正在使用 gmail 其他类似的网络邮件服务，那么您的电子邮件很可能被视为垃圾邮件。

# java - 在 Xuggler 中保存时图像损坏

> ID：10613867
> 
> 赞同：0
> 
> 时间：2012-05-16T07:27:24.843
> 
> 标签：java, image, webcam, xuggler

为了从网络摄像头捕获视频，我使用了[DisplayWebcamVideo.java中的示例代码](https://github.com/xuggle/xuggle-xuggler/blob/master/src/com/xuggle/xuggler/demos/DisplayWebcamVideo.java)

修改后的决议：

```
params.setValue ("video_size", "640x480"); 
```

要保存添加到该行的图像：

```
private static void updateJavaWindow (BufferedImage javaImage)
   {
     mScreen.setImage (javaImage);
     ImageIO.write (javaImage, "jpg", new File (fileOut));
   } 
```

所有的遗骸，但同时保持图像的周期性部分被涂成灰色。此外，如果我理解正确，在保存下一帧之前 - 从硬盘中删除前一个图像，然后创建一个新图像。因此，有时带有网络摄像头的图像并没有存储在 sozhranenie 应该发生的文件夹中 - 不是所需的文件。

你能告诉我如何正确保存来自网络相机的图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:21:29.703

我在我的项目中使用 Xuggler 在格式之间进行转码，这是让我彻底搜索它遇到的各种问题的功能之一。第一个问题是您尝试过的问题，更改分辨率，例如 320X240，但每当将其更改为更高时，它会导致某些或其他错误，这可能是由于以下事实

> Xuggle 网络摄像头支持很糟糕——正如开发人员所说

查看 Xuggler 的[Google 群组](http://groups.google.com/group/xuggler-users/browse_thread/thread/a95d1812356ae3c8 "Xuggler 和网络摄像头")了解更多详情。如果您想以比 Xuggler 提供的更多方式与网络摄像头交互，我建议您要么在大部分时间工作的 320X240 中使用它，要么使用 LTI-CIVIL（我也在使用）。

# android - 如何将屏幕捕捉到滚动视图内的视图边缘？

> ID：10613869
> 
> 赞同：3
> 
> 时间：2012-05-16T07:27:38.510
> 
> 标签：android, android-view, android-scrollview

我在滚动视图中得到了一些内容，它像盒子，很多盒子。每个都有输入字段。

当触摸输入字段时，我想将屏幕捕捉到框的边缘。我知道 scrollView 有一个函数，它是 scrollTo(x,y); 或类似的东西。

我可以用它来捕捉屏幕吗？如果是，我怎样才能获得视图边缘的坐标，或者我需要的东西？

任何人都可以帮忙吗？

（抱歉英语不好，希望你能理解我的问题）

# objective-c - 使用图像作为 NSTextField 的背景

> ID：10613870
> 
> 赞同：2
> 
> 时间：2012-05-16T07:27:38.650
> 
> 标签：objective-c, cocoa

有没有办法使用 jpeg/png 图像作为 NSTextField 的背景？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T07:33:10.997

**1 解决方案：**您可以简单地这样做：

```
NSImage *image = ...; //image for background
[_textfieldOutlet setBackgroundColor:[NSColor colorWithPatternImage:image]]; 
```

结果：

![带有背景的 NSTextField](../Images/30412815f7d1af5475c186e783144a9f.png)

* * *

**2 解决方案：**您可以`NSTextField`像这样子类 Your ：

```
#import "TextFieldSubclass.h"

@implementation TextFieldSubclass

- (void)awakeFromNib
{
    [self setDrawsBackground:NO];
}

- (void)drawRect:(NSRect)rect
{
    [super drawRect:rect];

    NSImage *image = ...; //image for background
    [image setFlipped:YES]; //image need to be flipped

    //use this if You need borders

    NSRect rectForBorders = NSMakeRect(2, 2, rect.size.width-4, rect.size.height-4);
    [image drawInRect:rectForBorders fromRect:rectForBorders operation:NSCompositeSourceOver fraction:1.0];

    //if You don't need borders use this:

    //[image drawInRect:rect fromRect:rect operation:NSCompositeSourceOver fraction:1.0];
}

@end 
```

**带边框的结果：**

![带边框](../Images/bb357dff60afe447c0fcb8178fe36a74.png)

**结果无边框：**

![无国界](../Images/d2011a62406dee9dc39296dfe208b7dd.png)

# java - 对哈希表执行包含操作

> ID：10613871
> 
> 赞同：0
> 
> 时间：2012-05-16T07:27:40.023
> 
> 标签：java, vector, hashtable

我有一个哈希表“listUserEvents”，其格式为字符串，向量。我正在尝试查看哈希表是否包含给定字符串的一些数据。

```
listUserEvents = getUserInfo();
for (int i = 0; i < compareEventData.size(); i++) {
          EventData eventForExistingDate = (EventData) compareEventData.elementAt(i);
//here i want to check if listUserEvents  the hashtable has eventForExistingDate.getSummary() for string "hello"
} 
```

如何执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:32:46.883

如果我正确理解了这个问题，您只需要：

```
if (listUserEvents.containsKey("hello"))
{
    ...
} 
```

您的描述不是很清楚，因为现在我们没有使用`eventForExistingDate`...

请注意，如果您使用泛型集合，则不太可能需要上一行中的强制转换。

# jquery - 获取“td”元素的jquery索引

> ID：10613873
> 
> 赞同：7
> 
> 时间：2012-05-16T07:28:02.340
> 
> 标签：jquery

我有标记

```
 <table>
    <tr id="1">
        <td colspan="4">
            <p class="que">
                1\. Who are you?</p>
        </td>
    </tr>
    <tr class="ans">
        <td>
            <input type="checkbox" />Student
        </td>
        <td>
            <input type="checkbox" checked="true" />Developer
        </td>
        <td>
            <input type="checkbox" />Other
        </td>
        <td>
            <input type="text" />
        </td>
    </tr>

</table>​​​ 
```

在这里，我想获取选中复选框的特定 td 的索引。例如这里应该是 1。但我每次都得到 0，这看起来像是行的索引。这是我使用的 jquery 代码。

```
 var answers = $('table tr.ans');
 $.each(answers, function () {
  var answer = $(this).find("input[type='checkbox']:checked").index(); 
    alert(answer);                   
  });​ 
```

这是[小提琴](http://jsfiddle.net/parush/Xj8aK/) 如何获得特定td的索引？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-16T07:30:05.827

你可以这样做

```
$("table tr.ans input[type='checkbox']:checked").parent().index(); 
```

您只需从复选框导航回`<td>`，此时直接调用`.index`就可以了：

> 如果没有参数传递给 .index() 方法，则返回值是一个整数，指示 jQuery 对象中的第一个元素相对于其兄弟元素的位置。

**[看到它在行动](http://jsfiddle.net/eLSWp/)**。

由于您是在循环中执行此操作，因此更合适的是

```
var answer = $(this).find("input[type='checkbox']:checked").parent().index(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:30:35.790

将行更改为：

```
var answer = $(this).find("input[type='checkbox']:checked").parent().index(); 
```

`td`这将为您提供您在 jquery 选择器中选择的输入的父级的索引。

# android - 如何在 onTouch 事件中获取和替换图像的背景颜色

> ID：10613874
> 
> 赞同：1
> 
> 时间：2012-05-16T07:28:02.367
> 
> 标签：android

基本上有以下两个障碍：

1.  我想在单击光标的坐标处获取图像的背景颜色。代码第一次获取颜色和坐标。但是当我再次单击时，会发生错误。
2.  我想以十六进制而不是 RGB 整数值获取图像的颜色，然后在找到颜色的特定区域中用我的颜色更改该特定颜色。

这是代码：

```
private ImageView mImageView;
private Button button;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.vp_view_img);

    if(getIntent().hasExtra("BitmapImage")) 
    {
        final Bitmap bitmap = (Bitmap) getIntent().getParcelableExtra("BitmapImage");

        mImageView = (ImageView) findViewById(R.id.canvas_image);
        mImageView.setImageBitmap(bitmap);
        mImageView.setOnTouchListener(new ImageView.OnTouchListener()
        {     
            @Override   
            public boolean onTouch(View v, MotionEvent event)
            {
                int x = (int)event.getX();
                int y = (int)event.getY();

               /*Toast.makeText(getBaseContext(), "Touch coordinates : "
                                     + String.valueOf(event.getX()) + "x"
                                     + String.valueOf(event.getY()),
                                     Toast.LENGTH_SHORT).show();*/
                ImageView imageView = (ImageView) v;
                Bitmap bitmap = ((BitmapDrawable)imageView.getDrawable()).getBitmap();
                int pixel = bitmap.getPixel(x,y);
                int redValue = Color.red(pixel);
                int blueValue = Color.blue(pixel);
                int greenValue = Color.green(pixel);

                Toast.makeText(getBaseContext(), "Color Code :"+
                    redValue+blueValue+greenValue,Toast.LENGTH_SHORT).show();
                return true;    
                }    
            });
    }
    else
    {
        Toast.makeText(getBaseContext(), 
                "No Image Found", 
                Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:11:43.043

让我们从第二个问题开始：为了将 a `Color`（表示为 an `Integer`）转换为相应的十六进制值，您应该知道，十六进制颜色表示实际上是：

```
#RGB, #RRGGBB, #RRRGGGBBB, #RRRRGGGGBBBB 
```

所以你可以取你想要的颜色的基色分量，把它们单独变成一个十六进制字符串，然后把它们放在一起：

```
/**
 * Converts the passed integer (color) into it's hexadecimal representation  
 * @param pixel the Color to convert
 * @return a String: the <code>pixel</code> parameter in #RRGGBB format 
 */
private String rgbToHex(int pixel)
{
    int redValue = Color.red(pixel);
    int blueValue = Color.blue(pixel);
    int greenValue = Color.green(pixel);
    return "#" + getBaseColorAsHex(redValue) + 
        getBaseColorAsHex(greenValue) + 
        getBaseColorAsHex(blueValue);
}

/**
 * Returns the hex representation of the <code>baseColor</code>
 * parameter, padding up to 2 characters if necessary.
 * @param baseColor the color whose hex representation is needed
 * @return the hex code for the passed parameter
 */
private String getBaseColorAsHex(int baseColor)
{
    final String hex = Integer.toHexString(baseColor);
    return (hex.length() == 1 ? '0' : "") + hex;
} 
```

从第一个问题开始，您应该提供您的 logcat 输出：在不知道错误的情况下，我们无法帮助解决它。

此外，您应该考虑将您的问题一分为二，因为在这种形式下，它不符合 Stack Overflow 的准则！

**编辑：**关于提出的第一个问题：一个严重的问题可能是您正在分析的图像小于屏幕，并且它被拉伸，因此当您点击屏幕并检索`x`和`y`坐标时，将它们镜像到图像上失败由于到它的大小：x 或 y 的值可能大于宽度，分别是位图的高度。

除非您使用`try-catch`块并记录异常，否则您将无法判断问题到底出在哪里。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T08:09:04.803

使用选择器怎么样？

在 res/drawable 文件夹中，制作如下代码的 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:color="@color/white"/> <!-- selected -->
    <item android:state_pressed="true" android:color="@color/white" />  <!-- pressed -->
    <item android:color="@color/black" />
</selector> 
```

# python - 编程 Python

> ID：10613882
> 
> 赞同：-1
> 
> 时间：2012-05-16T07:28:40.213
> 
> 标签：python, python-3.x

我想要一些关于我目前的大学任务的指导，我已经变得非常困难，希望你们有才华的人就我的方向以及我是否走在正确的道路上提供一些有价值的建议。目前我收到错误：

%: 'tuple' 和 'int' 不支持的操作数类型

但这只是开始，我在处理列表时遇到了麻烦，将它们记录为三柱门丢失，将列表中的名称添加到 getRuns() 函数中的每个提示中，并记录每个击球手的得分。

我的源代码是：

[http://pastebin.com/iTYdqQBi](http://pastebin.com/iTYdqQBi)

我的作业大纲是：

[http://pastebin.com/yRnqY15K](http://pastebin.com/yRnqY15K)

如果您能抽出五分钟的时间来帮助一个苦苦挣扎的学生，那将不胜感激。谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:05:12.423

你说你之前有这个程序工作过。由于您现在有很多问题，我建议您首先回到您拥有的工作版本（我希望您正在使用版本控制系统？）并从那里开始。

然后您一次进行一项更改，始终测试程序以确保它仍然有效。这样，您一次会遇到一个错误，您可以找到并修复它。您显然在这里犯了第一个新手错误：一次编写大量代码而没有对其进行测试，然后当您最终尝试运行代码时遇到了一大堆问题。

这不是编程的好方法。

至于你的第一个问题，我能看到的唯一会产生错误的地方`unsupported operand type(s) for %: 'tuple' and 'int'`是第 105 行，你说`if(totalScore%2==0):`. 我猜`totalScore`是一个元组。之前放一个`import pdb;pdb.set_trace()`就行了，调试一下。

# mysql - 数据库文件莫名其妙的增长

> ID：10613884
> 
> 赞同：0
> 
> 时间：2012-05-16T07:28:52.387
> 
> 标签：mysql

我的服务上运行了几个 Web 服务，包括 MySQL。出于某种原因，MySQL 占用的空间呈指数增长。ibdata1 文件大小约为 20GB，他占用了我在分区上的所有空间。所以我扩大了分区，但文件增长到了大约 30GB...

是什么导致了这种增长？我怎样才能阻止它？我怎样才能扭转增长，以便我可以继续工作（因为分区又满了......）

![在此处输入图像描述](../Images/3d15f310dcaf92510a78d2d38117969d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:39:49.080

正如前面的评论中提到的，很多原因都可能导致这个问题。错误被记录到某个表并且没有被清除？将大型二进制文件保存到数据库？等等

您可能会开始调查使用[此处](http://dev.mysql.com/doc/refman/5.1/en/show-table-status.html)`SHOW TABLE STATUS`记录的哪个表，以便缩小使用存储最多的表的范围。

# java - Java 缓存查询结果

> ID：10613885
> 
> 赞同：1
> 
> 时间：2012-05-16T07:28:52.743
> 
> 标签：java, database, caching, out-of-memory

我正在使用 JDBC。我有数据库密集型计算，我想缓存结果。

我`HashMap<String, ResultSet>`用来缓存结果。但是，由于缓存太大，程序经常会给出 OutOfMemory Exception。

关于使用更好的数据结构/缓存接口的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:33:51.030

首先，不要缓存`ResultSet`，用数据创建一些域对象，然后缓存它们。

其次，使用某种缓存框架来驱逐未使用的旧条目。我最喜欢的是[Guava Cache](http://code.google.com/p/guava-libraries/wiki/CachesExplained)，因为它可以在代码中轻松配置，但另一个流行的是[Ehcache](http://ehcache.org/)。

# xml - 在 WSDL 文件中，通过免费解决方案是否可以在不调用服务的情况下确定响应元素的 XPath？

> ID：10613889
> 
> 赞同：0
> 
> 时间：2012-05-16T07:29:07.860
> 
> 标签：xml, xpath, open-source, soapui, xmlspy

在 WSDL 文件中，是否可以在不调用服务的情况下确定请求/响应元素的 XPath？我的意思是打开一个 WSDL 并生成请求 + 响应消息。

或者我是否需要额外的软件，比如付费的 SOAPUI PRO 工具，它可以按照[这里已经描述的](https://stackoverflow.com/questions/9512117/in-a-wsdl-file-can-the-xpath-of-a-response-element-be-determined-without-invoki)方式完成？（我真的很想避免付费和封闭式助手。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:12:36.967

实际上，我想出了一个解决方法来完成这项工作。虽然不是首选的工作方式，但仍然欢迎更好、更有效的答案！

解决方法：

1.  从 WSDL 创建操作的 XML 请求+响应消息：
    a) 使用 SOAPUI 创建 Mockup 服务。这样 SOAOPUI 将为您创建一个虚拟响应消息。
    b) 请求消息默认已经可用

2.  将虚拟消息复制粘贴到某个能够从 XML 文件解析 Xpath 的程序（例如，XMLSpy 可以通过网格视图解析元素的 XPath，也可以使用[其他工具](https://stackoverflow.com/questions/1915219/tool-to-find-out-xpath)）

# android - Android - 如果应用程序正在运行，则停止（拦截）C2DM 推送通知？

> ID：10613896
> 
> 赞同：4
> 
> 时间：2012-05-16T07:29:33.137
> 
> 标签：android, push-notification, android-c2dm

我已经在我的应用程序中实现了 C2DM（Android 推送通知）并且一切正常。但是，当我的应用程序运行时，我能够收到通知。如果我的应用程序正在运行，我可以知道如何阻止推送通知进入吗？我只想在我的应用程序未运行时接收推送通知。因为据我所知，APNS（Apple Push Notification Service）会在发送推送通知之前检查应用程序是否正在运行。C2DM 也这样做吗？

提前谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T04:02:55.840

@Moujib 是对的。我和你面临同样的问题，如果应用程序正在运行，我想停止推送通知。我确实设法通过使用这里的代码解决了这个问题：http: [//kpbird.blogspot.com/2011/08/android-check-application-is-running.html](http://kpbird.blogspot.com/2011/08/android-check-application-is-running.html)

使用那段代码来检查您的应用程序是否正在运行。然后，如果应用程序正在运行，我什么也没做，如果它没有运行，我会发送/获取推送通知。希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:39:55.663

好吧，您可以在应用程序运行时禁用通知，换句话说，推送消息仍会发送给您，但您可以控制是否发出通知。

如果应用程序正在运行或在前台没有通知，否则通知...

# javascript - 如何保持 jQuery 手风琴禁用但仍更改其活动状态？

> ID：10613897
> 
> 赞同：1
> 
> 时间：2012-05-16T07:29:36.610
> 
> 标签：javascript, jquery, accordion

我有一个 jQuery 手风琴定义如下：

```
$("#acrd").accordion({
    autoHeight: false,
    header: '.navhead',
    alwaysOpen: true,
    navigation: true,
    collapsible: true,
    disabled: true
}); 
```

当客户点击一个按钮时，我会调用一个函数`DoSomething()`，如下所示：

```
function DoSomething(id) {
    $.ajax({
        url: "getapage.php?id="+id,
        cache: false
        }).done(function( html ) {
            if(html == 'OK') {
                $("#acrd").accordion({ active: 1 }); // doesn't work
            } else {
                alert("Give an error!");
            }
    });
} 
```

但是当我单击按钮时没有任何反应，我检查了 Firebug 并且没有语法错误。

我怎样才能做到这一点？（如果没有在进程中启用手风琴，客户端一定不能改变手风琴的活动状态）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:36:00.860

您可能打算使用[`activate`](http://jqueryui.com/demos/accordion/#method-activate)激活指定内容部分的方法：

```
$("#acrd").accordion("activate", 1); 
```

但是，当手风琴被禁用时，这将不起作用。所以你需要把它写成

```
$("#acrd").accordion("enable").accordion("activate", 1).accordion("disable"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:34:18.907

使用指定的活动选项初始化手风琴。

```
$( "#acrd" ).accordion({ active: 2 , others.... }); 
```

然后试试你的代码...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:39:24.760

像这样的东西，正如文档所说 `Get or set the active option, after init.` 的，[jquery ui active](http://jqueryui.com/demos/accordion/#option-active)

```
$( "#acrd" ).accordion( "option", "active", 2 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T15:40:19.720

如果您希望永久禁用它，那么这可能对您有用

```
$("#accordion h3").unbind("click"); 
```

将 h3 替换为您用作可点击标题的任何元素。您仍然可以通过激活方法或设置活动选项来更改选项卡。

Soruce：[jQuery 手风琴：防止窗格打开/取消 changestart 事件](https://stackoverflow.com/questions/2004869/jquery-accordion-prevent-pane-from-opening-cancel-changestart-event?answertab=votes#tab-top)

# java - Java 输入错误。我无法验证输入的字符串

> ID：10613902
> 
> 赞同：-2
> 
> 时间：2012-05-16T07:30:18.353
> 
> 标签：java, input, io, console

> **可能重复：**
> [Java 字符串比较？](https://stackoverflow.com/questions/995918/java-string-comparison)

晚上好。下面的代码没有给出错误，但是当我尝试验证输入的字符串时，它总是假设我没有输入“YES”，即使我确实使用了 toUpperCase() 方法。这一定是一个非常基本的错误，但我现在无法弄清楚，因为我只是在学习这种语言的基础知识。这是代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class Main{

    public static void main(String[] args) throws IOException{

        byte counter = 1;
        boolean myCondition = false;
        String answer;
        List<String> myList = new ArrayList<String>();
        BufferedReader objReader = new BufferedReader(new InputStreamReader(System.in));

        do{
            System.out.println("Enter the #" +counter +" person's name:");
            myList.add(objReader.readLine());
            counter++;
            System.out.println("Would you like to add another name to the list? yes/no");
            answer = objReader.readLine();
            if (answer.toUpperCase() == "YES"){
                myCondition = true;
            }

        } while (myCondition);

        System.out.println("The list of names you entered, looks like this:\n");
        for (String name: myList)
            System.out.println(name);

        System.out.println("\nPress <Enter> to randomize the list of names you entered.");
        objReader.readLine();
        Collections.shuffle(myList);

        System.out.println("Done! \nPress <Enter> to see how the randomized list looks like.\n");
        objReader.readLine();
        for(String nombre: myList)
            System.out.println(nombre);

    }

} 
```

提前感谢任何帮助和/或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:32:21.767

比较字符串时，您应该使用 .equals() 方法而不是 == ：

```
answer.toUpperCase().equals("YES") 
```

您可以放心，这是大多数人在开始 java 编程时会犯的错误 :)

# iframe - 浏览器缩放如何影响 iframe 的位置？当浏览器缩放时，iframe 的原点会移动

> ID：10613905
> 
> 赞同：1
> 
> 时间：2012-05-16T07:30:35.903
> 
> 标签：iframe, browser, zooming

我嵌入了 iframe，当浏览器放大时，我不知道缩放的基本中心是什么。我以为它应该是右上角，但事实并非如此。

看到这个网站，[http://www.deitte.com/IFrameDemo3/IFrameDemo.html](http://www.deitte.com/IFrameDemo3/IFrameDemo.html) 和 ctrl 滚动，布局会乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:57:19.553

放大时，您不仅放大了 iframe，还放大了整个页面。这也会影响页面上所有元素的顶部和左侧偏移位置，因此它会改变位置。

该`embed`元素有它`width`并`height`设置为，`100%`但它会调整到缩放的视口，因此为什么 flash 元素不调整它的大小。

我认为这里的部分问题是 UI 设计的混合方法。其中大部分是 Flash，HTML iframe 位于其顶部，位置完美，看起来像是无缝的（默认缩放）。在这种情况下，很难将这两者结合起来进行扩展。没有什么可以限制由 flash 元素控制的 iframe 的大小和位置。

我不是 Flash 专家，但我会冒险猜测 Flash 应用程序当前不知道浏览器缩放级别，因此也不能正确缩放；虽然它的宽度和高度根据它的容器大小而变化，但它的字体大小永远不会增加或减少（以及其他东西）。

# php - INSERT INTO table1 values FROM table2 WHERE

> ID：10613906
> 
> 赞同：0
> 
> 时间：2012-05-16T07:30:36.853
> 
> 标签：php, sql

我环顾四周，似乎没有什么对我有用。我有一个按钮，将其插入到 1 个表 1 中，然后它从表 3 中获取值以放入表 2 中，其中 ID 相同。

```
 if ($movieTime != "") {
        $query = "SELECT SchedID FROM tblCinemaSched WHERE TheaterID='$tid' AND CinemaID='$cid' AND MovieDate='$date' AND MovieTime='$movieTime'";
        //echo "$query<br>";
        $result=$conn->executeUpdate($query);
        $numRows=$conn->numRows($result);
        if ($numRows<=0) {

            $query = "INSERT INTO tblCinemaSched SET TheaterID='$tid', CinemaID='$cid', MovieDate='$date', MovieTime='$movieTime', MovieID='$movieId', PriceAmt='$priceId', CrtBy='$username', CrtDate=NOW()";
            //echo "$query<br>";
            $result=$conn->executeUpdate($query);
            //get seat defaults from tblCSeats
            $query = "INSERT INTO tblSSeats SELECT TheaterID,  CinemaID, '$date', '$movieTime', SeatID, RowNo, ColumnNo, Handicap, Status, LeftSeat, RightSeat, NULL, NULL,NULL,NULL,NULL,NULL,NULL,'$username',NOW() FROM tblCSeats WHERE TheaterID='$tid' AND CinemaID='$cid'";
            //echo "$query<br>";
            $result=$conn->executeUpdate($query);

            $errorStr   = "Succesfully added schedule.";
        }
        else {
            $errorStr   = "There's already an existing schedule for the specified time.";
        } 
```

您会看到 tableCSeats 有超过 1 行具有相同的 ID，这意味着我想将多个数据从 tableCSeats 插入到 tableSSeats。tableSSeats 是一个还没有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:50:49.307

盲目猜测，您似乎正在寻找[**`INSERT ... SELECT`**](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)陈述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:32:48.883

检查查询的返回值。您总是会收到“已成功添加日程”。因为您不检查查询是否成功。前任：

```
if(!$result=$conn->executeUpdate($query)) {
    die('error');
} 
```

或类似的东西。

# java - 使用 Guice 注入 Swing 组件的最佳实践？

> ID：10613914
> 
> 赞同：3
> 
> 时间：2012-05-16T07:31:11.407
> 
> 标签：java, swing, user-interface, dependency-injection, guice

我正在开发一个使用 Google Guice 作为 IOC 容器的 Java Swing 应用程序。我直接注入组件，但这让 Guice*在 EDT 之外*创建组件。

该应用程序看起来有点像这样：

```
private Panel1 panel1;
private Panel2 panel2;

@Inject
public class Application(Panel1 panel1, Panel2 panel2) {
    this.panel1 = panel1;
    this.panel2 = panel2;
} 
```

看看[这里](https://stackoverflow.com/q/2632033/1027266)和[这里](https://stackoverflow.com/q/2728097/1027266)的问题，我得出了注入*加载程序*而不是直接注入组件的结论。

```
private PanelLoader1 loader1;
private PanelLoader2 loader2;

private Panel1 panel1;
private Panel2 panel2;

@Inject
public class Application(PanelLoader1 loader1, PanelLoader2 loader2) {
    this.loader1 = loader1;
    this.loader2 = loader2;

    loader1.load();
    loader2.load();

    this.panel1 = loader1.get();
    this.panel2 = loader2.get();
}

public class PanelLoader {
    private Panel panel;
    public void load() {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                panel = new Panel();
            }
        });
    }
    public Panel get() {
        return panel;
    }
} 
```

它是否正确？这样做有什么最佳做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T21:07:34.500

如果你想使用“加载器”，你应该实现`com.google.inject.Provider`. 查看[http://code.google.com/p/google-guice/wiki/InjectingProviders上的示例](http://code.google.com/p/google-guice/wiki/InjectingProviders)

您不需要自己注入提供者，您可以配置模块以注入提供者创建的对象：

```
public class PanelModule extends AbstractModule {

@Override
protected void configure() {
    bind(Panel1.class).toProvider(Panel1Provider.class);
}

private static class Panel1Provider implements Provider<Panel1> {

    private Panel1 panel1;

    @Override
    public Panel1 get() {
        try {
            EventQueue.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    panel1 = new Panel1();
                }
            });
        } catch (InvocationTargetException e) {
            throw new RuntimeException(e); // should not happen
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
    return panel1;
} 
```

或者，如果每个组件只需要一个实例，则可以将实例直接绑定到类型：

```
public class PanelModule extends AbstractModule {

Panel1 panel1;
Panel2 panel2;

@Override
protected void configure() {

    try {
        EventQueue.invokeAndWait(new Runnable() {
            @Override
            public void run() {
                panel1 = new Panel1();
                panel2 = new Panel2();
            }
        });
    } catch (InvocationTargetException e) {
        throw new RuntimeException(e); // should not happen
    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    }

    bind(Panel1.class).toInstance(panel1);
    bind(Panel2.class).toInstance(panel2);
} 
```

# amazon-web-services - 如何将 Amazon EBS 卷克隆到另一个较小的卷中

> ID：10613915
> 
> 赞同：1
> 
> 时间：2012-05-16T07:31:11.753
> 
> 标签：amazon-web-services, amazon-ec2, cloning

我有两个亚马逊 ec2 实例，(1) 使用 SLES 并运行我当前的站点，(2) 一个使用 Amazon Linux 的新实例。我只是想将我的站点从 SLES 中移出，然后将其停用。

我有一个 100GB 的 EBS 卷连接到 SLES 服务器，实际只使用了大约 20GB。将数据带到新实例的最佳方式是什么？

*   创建一个大约 30GB 的新 EBS 卷并附加到新实例，使用 unix cp？
*   创建一个大约 30GB 的新 EBS 卷并附加到新实例，暂时还将 100GB 原始卷附加到新实例，使用 unix cp?
*   更智能/更简单的东西，例如创建 100GB EBS 卷的快照（？），不知何故？从中创建一个新的 30GB EBS 卷，然后将其附加到新实例？额外的好处是我不必关闭我的网站

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:23:42.027

增加目标卷的大小很容易，但要使其更小的唯一方法是创建所需大小的空白卷。然后，要么将新卷挂载到旧实例并进行复制，要么分离旧卷并将其重新附加到新卷并进行复制。基本上，在您列出的选项中，只有第一个和第二个有效。创建快照不起作用的原因是因为从卷创建快照会使快照与创建它的卷大小相同。尝试从小于原始快照的快照创建卷时会出错。

# c# - 整数和的算法

> ID：10613918
> 
> 赞同：-1
> 
> 时间：2012-05-16T07:31:21.763
> 
> 标签：c#, algorithm, math

> **可能重复：**
> [找到所有可能的数字组合以达到给定的总和](https://stackoverflow.com/questions/4632322/finding-all-possible-combinations-of-numbers-to-reach-a-given-sum)

我必须创建从数字数组中选择数字的方法，其总和将与所需的数字完全相同，或者如果不存在则选择最小的更大的数字。这个函数的算法是什么？

```
public int[] selectExactSum(int[] X, int SUM) {
} 
```

示例：数字为：{5, 2, 8, 4, 6}，所需总和为 12。

结果将是：{2, 4, 6}

如果所需的总和是 13，则结果将是：{2, 8, 4} - 因此，在这种情况下，总和将是 14 - 第一个最小的更大的一个。

如果所需的总和为 15，则可能的结果为：{5, 2, 8} 或 {5, 4, 6}。在这种情况下，返回您选择的一个 - 可能是您得到的第一个。

自定义数字和总和的算法是什么？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T07:53:35.873

这是称为[子集和](http://en.wikipedia.org/wiki/Subset_sum_problem)的问题的一般化案例。这是一个 NP 完全问题，因此最著名的算法是[pseudo-polynomial](http://en.wikipedia.org/wiki/Subset_sum_problem#Pseudo-polynomial_time_dynamic_programming_solution)。如果您了解上述链接算法，则可以扣除解决问题所需的修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:09:51.153

递归怎么样？

```
public static int[] SelectExactSum(int[] x, int sum) {
  int[]
    rest = x.Skip(1).ToArray(),
    with = x.Length == 1 ? x : x.Take(1).Concat(SelectExactSum(rest, sum - x[0])).ToArray(),
    without = x.Length == 1 ? new int[0] : SelectExactSum(rest, sum);
  int withSum = with.Sum(), withoutSum = without.Sum();
  return
    withSum >= sum ? (withoutSum >= sum ? (withSum < withoutSum ? with : without) : with) :
    withoutSum >= sum ? without : new int[0];
} 
```

注意：调用`SelectExactSum(new int[] {5,2,8,4,6}, 13)`不会返回问题中所述的 {2,8,4}，而是 {5,8}，因为它实际上总和为 13。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:21:41.960

我花了大约 15 分钟完成它，你可以看到它在这里运行：

[http://jesuso.net/projects/selectExactSum/index.php?numbers=5%2C2%2C8%2C4%2C6&reqSum=15](http://jesuso.net/projects/selectExactSum/index.php?numbers=5%2C2%2C8%2C4%2C6&reqSum=15)

这是代码：

[http://jesuso.net/projects/selectExactSum/selectExactSum.txt](http://jesuso.net/projects/selectExactSum/selectExactSum.txt)

我让它尽可能简单，但它是在 PHP 上制作的，如果您需要一些帮助将其翻译成 c#，请告诉我。

# iphone - 将 NSMutableArray 的 UIButtons 标题分配给 NSMutableArray 的 UIButtons？

> ID：10613922
> 
> 赞同：0
> 
> 时间：2012-05-16T07:31:39.717
> 
> 标签：iphone, objective-c, ios, uibutton, nsmutablearray

我有两个 NSMutableArray 。我的第一个数组包含 3 个 UIButtons 以及按钮标题，我的第二个数组包含 50 个 UIButtons 。但是所有这 50 个 UIButtons 都有随机字母作为标题。这是我的第一个数组代码。

```
 NSMutableArray *buttons = [NSMutableArray arrayWithObjects:btn1, btn2, btn3, nil];
        [btn1 setTitle:@"stack" forState:UIControlStateNormal]; 
        [btn2 setTitle:@"over" forState:UIControlStateNormal]; 
        [btn3 setTitle:@"flow" forState:UIControlStateNormal]; 
```

现在我想将我的第一个按钮标题“堆栈”分配给使用索引 3-7 的第二个数组按钮。第二个按钮标题“结束”到使用索引 15-18 的第二个数组按钮和第三个按钮标题“流”第二个使用索引 30-33 的数组按钮。请任何人为我提出一个解决方案。thanx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:51:09.483

```
for (int i=3; i<=7; ++i) {
    UIButton *temp = [stack objectAtIndex:i];
    [temp setTitle:@"Temp" forState:UIControlStateNormal]; 
```

作为一个例子。现在重复你的其他索引:)

# debugging - WP7 调试没有通过 USB 绑定？

> ID：10613923
> 
> 赞同：3
> 
> 时间：2012-05-16T07:31:47.487
> 
> 标签：debugging, windows-phone-7, tethering

我想在我的应用程序中调试一些网络问题案例。但我无法真正测试它，因为我的手机通过 USB 连接互联网。如果我将它与 USB 断开连接，我将无法调试......那么无论如何，我可以禁用手机上的 USB 网络共享吗？

编辑：我有一个 HTC Trophy，但它和我朋友的 Lumia 800 一样......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:09:42.203

假设您正在连接到计算机上未运行的 Web 服务，您可以通过断开您的 PC 与任何可以访问 Internet 的网络的连接来测试这一点（即关闭 PC 上的 wifi 或拉网线.)

这不是一个优雅的解决方案，也不是一个可以轻松自动化的解决方案，但它确实有效。;)（我使用这种方法测试了一个应用程序，该应用程序将逐步下载大文件，并在连接丢失和恢复时停止然后恢复。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:35:25.823

您还可以使用 Fiddler [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)作为模拟器的代理来模拟有损连接或根本没有连接。这样，您仍然可以在编写代码时浏览和查找参考资料 :-)

编辑：提琴手似乎不适用于模拟器（有关更多信息，请查看评论），但如果您想模拟有损连接，那么[这](http://blog.mrpol.nl/2010/01/14/network-emulator-toolkit/)是可行的方法，甚至适用于带有连接电缆的手机。

# python - 核心 Django 是否支持没有 django-south 或类似应用程序的迁移？

> ID：10613932
> 
> 赞同：1
> 
> 时间：2012-05-16T07:32:12.763
> 
> 标签：python, django, django-models, migration, django-south

Django 是否包含没有南应用程序的迁移概念？

如果不是，为什么他们不将它包含在 Django 1.4 中？（因为，这是必须的）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T07:38:30.283

不，它没有。South 被认为是 Django 中数据库迁移的“事实上的”标准。[进一步阅读](https://code.djangoproject.com/wiki/SchemaEvolution)可以在 Django 开发 wiki 中找到。

从版本 1.2 发行说明：

> Contrib-01（将 South 添加到 contrib） - 包括 South 的主要开发人员在内的普遍共识是 South 还没有准备好成为 Django 的真正组成部分。

这很可能仍然有效。South 有其局限性，当它是 django.contrib 模块时，它仍然存在可以被视为缺陷的差距。

也就是说，我想补充一点：南方仍然非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:05:27.217

South 并不是唯一与 Django 一起工作的迁移应用程序。有关一些当前选项，请参阅[http://djangopackages.com/grids/g/database-migration/](http://djangopackages.com/grids/g/database-migration/)。Simon Willison 也与人共同创建了[Dmigrations](http://code.google.com/p/dmigrations/)，但它已经过时并且已经有几年没有提交了。

South 被普遍认为是目前最好的，虽然我没有尝试过 NashVegas（部分是因为 South 太好了，我不需要）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-14T21:35:38.663

在成功的[kickstarter](http://www.kickstarter.com/projects/andrewgodwin/schema-migrations-for-django)活动之后，模式迁移将从 1.7 版开始添加到 Django 核心

[https://docs.djangoproject.com/en/dev/releases/1.7/#schema-migrations](https://docs.djangoproject.com/en/dev/releases/1.7/#schema-migrations)

# iphone - 如何使用 ios Api 共享文件或文件夹？

> ID：10613936
> 
> 赞同：2
> 
> 时间：2012-05-16T07:32:24.590
> 
> 标签：iphone, ios, ios4, dropbox-api

我有以下问题，我需要有关此方面的帮助 - 是否可以使用 Dropbox Ios API 共享文件和文件夹 - 是否可以获取任何文件或文件夹的共享 Dropbox URL，因此通过发送电子邮件等与他人共享。

我有使用 Dropbox 的应用程序，我想与朋友共享任何文件或文件夹？我怎么能这样做，我怎么能通知我的朋友从我的共享文件夹中获取那个特定的文件。我认为为此我需要共享文件 URL 发送给朋友，以便他们在此路径上下载文件？如果是的话，这一切都可以吗？那么如何，dropbox ios api 的哪个方法或类？

非常感谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:02:50.240

看`loadSharableLinkForFile`在`DBRestClient`. 完整的文档在网站上： http: [//dropbox.com/developers/reference/api#shares](http://dropbox.com/developers/reference/api#shares)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T15:37:01.483

Dropbox API 没有实现任何允许您共享文件夹的方法。这是一个限制。您只能在网站中共享文件夹。

# sql - 未找到 Postgresql 列，但在描述中显示

> ID：10613940
> 
> 赞同：1
> 
> 时间：2012-05-16T07:32:44.820
> 
> 标签：sql, postgresql, quoted-identifier

有类似的帖子，但没有一个帮助我解决我的问题。

我正在尝试在表格上进行简单的选择，只检索一列。该列显示在描述表中，但是当我尝试选择它时，我得到一个列未找到错误。我正在使用命令行界面。

**桌子：**

```
 id                        | integer                  | not null default 
 amazon_payment_id         | integer                  | not null
 source                    | character varying(10)    | not null
 timestamp                 | timestamp with time zone | not null
 status                    | character varying(50)    | not null
 statusReason              | character varying(100)   | not null
 transactionId             | character varying(50)    | not null
 transactionDate           | timestamp with time zone | 
 transactionAmount         | numeric(6,2)             | 
 errorMessage              | character varying(100)   | not null 
```

等等

**选择：**

```
select `transactionAmount` from ... where ... group by transactionAmount; 
```

**错误：**

```
ERROR:  column "transactionamount" does not exist
LINE 1: select `transactionAmount` from ... where... 
```

有谁知道为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T07:41:04.133

为什么```在列名中使用？

您可以在没有任何引号字符的情况下使用它，而使用引号字符可能区分大小写。也这样的报价 char 是`"`，而不是```

所以使用：

```
select "transactionAmount" 
from ... 
where ... 
group by "transactionAmount"; 
```

在以下位置阅读标识符：[http ://www.postgresql.org/docs/current/static/sql-syntax-lexical.html](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html)

# sql - 在 PL/SQL 中插入/更新

> ID：10613942
> 
> 赞同：2
> 
> 时间：2012-05-16T07:32:46.887
> 
> 标签：sql, plsql, oracle11g, plsqldeveloper

我在 PL/SQL 中创建了一个基于主键将数据从一个表插入到另一个表的过程。我的程序运行良好，但我不知道如果主键已经存在，我将如何更新表 MAIN 的列 CODE_NUMBER。
实际上，我希望 MAIN 表的行在具有主键时得到更新，并在主键不存在时从 REGIONS 插入数据。

```
DECLARE
    variable number;
    id number;
    description varchar2 (100);

    CURSOR C1 IS
        select regions.REGION_ID variable
        from regions;

BEGIN
      FOR R_C1 IN C1 LOOP
            BEGIN
                select regions.REGION_ID,regions.REGION_NAME
                into id,description
                from regions
                where regions.REGION_ID = R_C1.variable; 
                ----If exists then update otherwise insert
                INSERT INTO MAIN( ID, CODE_NUMBER) VALUES( id,description);
                dbms_output.put_line( id ||' '|| 'Already Exists');
            EXCEPTION
                WHEN DUP_VAL_ON_INDEX THEN
                dbms_output.put_line( R_C1.variable);
            END;
      END LOOP;
END; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T07:44:33.277

无需使用 PL/SQL 和游标来执行此操作。你真正想做的是这样的：

```
MERGE INTO MAIN dst
USING (
  SELECT regions.REGION_ID id,
         regions.REGION_NAME description
  FROM   regions
) src
ON src.id = dst.id
WHEN MATCHED THEN UPDATE 
  SET dst.code_number = src.description
WHEN NOT MATCHED THEN INSERT (id, code_number)
  VALUES (src.id, src.description) 
```

阅读有关[`SQL MERGE`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)文档中声明的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:41:29.443

在这种情况下，我真的看不出做光标的意义。为什么你不能这样做：

```
--Update the rows
UPDATE MAIN
SET ID=regions.REGION_ID,
    CODE_NUMBER=regions.[description]
FROM MAIN
JOIN regions
    ON MAIN.ID=regions.REGION_ID;

--Insert the new ones
INSERT INTO MAIN(ID,CODE_NUMBER)
SELECT
    regions.REGION_ID,
    regions.[description]
FROM
    regions
WHERE NOT EXISTS
    (
        SELECT
            NULL
        FROM
            MAIN.ID=regions.REGION_ID
    ) 
```

# android - 使用意图选择器时如何知道用户选择了哪个应用程序？

> ID：10613953
> 
> 赞同：0
> 
> 时间：2012-05-16T07:33:41.487
> 
> 标签：android, android-intent

我正在使用意图选择器来邀请朋友：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_SUBJECT, Resources.getString("InvitationSubject", getBaseContext()));

String body = Resources.getString("InvitationBody", getBaseContext()) + Local.User.FirstName;

intent.putExtra(Intent.EXTRA_TEXT, body);

startActivity(Intent.createChooser(intent, "Invite friends")); 
```

有没有办法知道用户在选择器中选择了哪个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:44:23.963

据我所知，没有直接的方法可以收集此类信息。你需要它做什么？恕我直言，android 意图系统的设计使您作为应用程序开发人员不必担心用户选择什么应用程序来处理您的意图。

# calendar - 如何使用 dhtmlx 调度程序向事件添加新字段？

> ID：10613960
> 
> 赞同：1
> 
> 时间：2012-05-16T07:34:26.147
> 
> 标签：calendar, scheduler, dhtmlx

我想向日历事件添加新字段或属性。我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:16:20.077

你需要

*   将新部分添加到灯箱表单 [http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler:details_form](http://docs.dhtmlx.com/doku.php?id=dhtmlxscheduler:details_form)
*   对于灯箱的新部分，将 map_to 值设置为新字段的名称
*   在服务器端将额外字段添加到渲染命令中的字段列表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T02:44:50.070

这是在事件中创建简单 href 链接的方法：

1) 转到事件配置控制台并在“自定义字段”部分下创建一个自定义字段。为字段命名。在此示例中，将其称为“url”。选择其类型为“TextArea”。

2) 创建另一个自定义字段，将其命名为“link_title”。也是一个“TextArea”。描述是可选的。

节省

3) 转到事件控制台的“模板”部分。在您可以输入文本的第一部分 (... scheduler.templates.event_text=function(start,end,event){... ) 下，放置 ->

```
return "<b> "+event.text+"</b><br><br><a href=\"http://" + event.url + "\">" + event.link_title + "</a>"; 
```

节省

当您从主日历创建活动时，您会看到额外的字段。输入它们，保存您的活动，然后瞧。嘟嘟甜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-28T05:19:55.930

日历事件是什么意思？

是否添加了新事件？，那么必须使用灯箱（内置选项）完成

```
 scheduler.config.lightbox.sections=[
            { name:"description", height:50, map_to:"text", type:"textarea", focus:true },
            { name:"location", height:43, map_to:"event_location", type:"textarea",
                default_value:"Blackheath Avenue London,Greenwich,Greater London SE10 8XJ,UK"},
            {name:"recurring", height:115, type:"recurring", map_to:"rec_type",
                button:"recurring"},
            { name:"time", height:72, type:"time", map_to:"auto"}
        ]; 
```

此处使用的每个标签都由插件支持，，，，您想要一个单独的自定义灯箱去

[http://docs.dhtmlx.com/scheduler/custom_details_form.html](http://docs.dhtmlx.com/scheduler/custom_details_form.html)

[这是预览](https://i.stack.imgur.com/DVBgo.png)

# wcf - 公开和隐藏 WCF 服务合同

> ID：10613967
> 
> 赞同：1
> 
> 时间：2012-05-16T07:34:41.673
> 
> 标签：wcf

假设我在 wcf 中有 4 个服务合同。我希望 service1,service2 对于 client1 和 service3 是可见的，对于 client2 来说 service4 是可见的。我们怎样才能做到这一点。

# linux - 现有会话不遵守对组成员身份的更改

> ID：10613971
> 
> 赞同：5
> 
> 时间：2012-05-16T07:35:04.433
> 
> 标签：linux, bash, ubuntu, permissions

我遇到了 Linux 权限和组成员身份的奇怪行为，这让我摸不着头脑。情况如下：

1.  我有两个用户：alice 和 bob

    ```
    alice@KAL:~$ id alice
    uid=3000(alice) gid=3000(alice) groups=3000(alice)
    alice@KAL:~$ id bob
    uid=3001(bob) gid=3001(bob) groups=3001(bob) 
    ```

2.  在 alice 的主目录中，有一个子目录，我想给 bob 写权限。

    ```
    (as alice)
    alice@KAL:~$ mkdir shared
    alice@KAL:~$ chmod g+w shared
    alice@KAL:~$ ls -l
    total 4
    drwxrwxr-x 2 alice alice 4096 2012-05-15 23:56 shared 
    ```

3.  我将组 alice (gid=3000) 添加为 bob 的次要组之一

    ```
    (as root)
    root@KAL:~# id bob
    uid=3001(bob) gid=3001(bob) groups=3001(bob)
    root@KAL:~# usermod -G 3000 bob
    root@KAL:~# id bob
    uid=3001(bob) gid=3001(bob) groups=3001(bob),3000(alice) 
    ```

4.  我打开一个新终端，并以 bob 身份 su，并在 alice 的主目录中测试我的权限。

    ```
    (initially as kp, su'ing as bob)
    kp@KAL:~$ sudo su bob
    bob@KAL:/home/kp$ cd /home/alice
    bob@KAL:/home/alice$ ls -l
    total 4
    drwxrwxr-x 2 alice alice 4096 2012-05-15 23:56 shared
    bob@KAL:/home/alice$ touch test
    touch: cannot touch `test': Permission denied    <-- fails as expected
    bob@KAL:/home/alice$ cd shared
    bob@KAL:/home/alice/shared$ touch test     <-- succeeds as expected
    bob@KAL:/home/alice/shared$ ls -l
    total 0
    -rw-r--r-- 1 bob bob 0 2012-05-16 00:02 test 
    ```

5.  在一个单独的终端中，我以 root 身份撤销了 bob 在组 alice 中的成员资格。

    ```
    (root)
    root@KAL:~# usermod -G 3001 bob
    root@KAL:~# id bob
    uid=3001(bob) gid=3001(bob) groups=3001(bob) 
    ```

6.  现在，回到我被起诉为 bob 的终端，很明显，会员资格撤销被认可但不被尊重。

    ```
    (as bob)
    bob@KAL:/home/alice/shared$ id bob
    uid=3001(bob) gid=3001(bob) groups=3001(bob)   <-- group 3000 no longer secondary group
    bob@KAL:/home/alice/shared$ touch test2        <-- should fail
    bob@KAL:/home/alice/shared$ ls -l
    total 0
    -rw-r--r-- 1 bob bob 0 2012-05-16 00:02 test
    -rw-r--r-- 1 bob bob 0 2012-05-16 00:20 test2
    bob@KAL:/home/alice/shared$ rm test            <-- this should also fail
    bob@KAL:/home/alice/shared$ ls -l
    total 0
    -rw-r--r-- 1 bob bob 0 2012-05-16 00:20 test2 
    ```

7.  如果我现在退出，并且再次以 bob 身份 su，则更改是现在尊重组成员身份。

    ```
    (as bob)
    bob@KAL:/home/alice/shared$ exit
    exit
    kp@KAL:~$ sudo su bob
    bob@KAL:/home/kp$ cd /home/alice/shared
    bob@KAL:/home/alice/shared$ ls -l
    total 0
    -rw-r--r-- 1 bob bob 0 2012-05-16 00:20 test2
    bob@KAL:/home/alice/shared$ touch test3
    touch: cannot touch `test3': Permission denied   <-- now fails as expected
    bob@KAL:/home/alice/shared$ id bob
    uid=3001(bob) gid=3001(bob) groups=3001(bob)
    bob@KAL:/home/alice/shared$ 
    ```

这是使用su的一些神器吗？组成员身份是否仅在 shell 启动时确定？

（这是在运行 Ubuntu Maverick 10.10 x86_64 2.6.35-32-generic 并运行 bash shell 的机器上。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T07:52:33.567

组成员资格在会话期间持续存在，因为它们应用于进程，即您当前的 shell。

# android - 如何获取图像的图像源的ID，如getImageResource

> ID：10613975
> 
> 赞同：-2
> 
> 时间：2012-05-16T07:35:37.243
> 
> 标签：android, image

我正在开发我想从 R.java 访问 imageView 使用的图像 ID 的应用程序。例如

```
imageView i;
i=(ImageView)findViewbyid(imageview1);
i.setImageResource(R.drawble.human); 
..... 
```

现在我想知道我在运行应用程序时使用了哪个 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:02:56.363

这将为您提供可绘制图像的 id

```
String mDrawableName =Integer.toString( R.drawable.human);              
int resID = getResources().getIdentifier(mDrawableName , "drawable", getPackageName()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:43:23.297

如果您正在寻找一种方法来获取 ImageView 的图像背景，这将对您有所帮助。

```
 ImageView imageView=(ImageView)findViewById(R.id.image);
       imageView.setBackgroundResource(R.drawable.ic_launcher);
      imageView.setDrawingCacheEnabled(true);
      Drawable d=imageView.getBackground(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:26:05.110

//当你在你的drawable中放置一个图像时，它会在R.java文件中生成一个Id

当您希望该特定图像显示在 ImageView 中时

你需要这样声明

```
public static Integer[] images = new Integer[]{R.drawable.my_love,R.drawable.first,R.drawable.second,R.drawable.third}; 
```

然后像这样设置图片资源，

```
ImageView i = new ImageView(this.context);
i.setImageResource(this.images[1]); 
```

//你已经声明为

```
imageView i=(ImageView)findViewbyid(imageview1); 
```

//这是什么imageview1？

而不是你需要给你的xml声明ImageView id作为

```
 imageView i=(ImageView)findViewbyid(R.id.imageview); 
```

# python - 一个使用 SimpleHTTPServer 和 SocketServer 的简单 python 服务器，如何在重新运行 .py 文件之前关闭套接字？

> ID：10613977
> 
> 赞同：9
> 
> 时间：2012-05-16T07:35:49.883
> 
> 标签：python, http, sockets, networking

当我在 linux shell 中运行我的 python 服务器文件`simplehttpwebsite.py`并执行 control+c 并再次运行它时，我得到`socket.error: [Errno 98] Address already in use`.

当我执行 ctrl+c 时，如何确保套接字关闭？

*简单的httpwebsite.py*

```
#!/usr/bin/env python
import SimpleHTTPServer
import SocketServer

Handler = SimpleHTTPServer.SimpleHTTPRequestHandler
server = SocketServer.TCPServer(('0.0.0.0', 8080), Handler)

server.serve_forever() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T08:04:44.017

这是你的做法

```
#!/usr/bin/env python
import SimpleHTTPServer
import SocketServer

Handler = SimpleHTTPServer.SimpleHTTPRequestHandler
class MyTCPServer(SocketServer.TCPServer):
    allow_reuse_address = True
server = MyTCPServer(('0.0.0.0', 8080), Handler)

server.serve_forever() 
```

恕我直言，这没有很好的记录，它绝对应该是默认值。

# java - ActiveMQ 休息消息服务性能差？

> ID：10613978
> 
> 赞同：1
> 
> 时间：2012-05-16T07:35:55.183
> 
> 标签：java, jms, activemq

我尝试使用 restful 发布请求发布消息，但无法发布超过 200 msg/sec 并且我的 CPU 利用率高于 90%，我使用 jmeter 进行负载测试。我在 amazon EC2 上的 ActiveMQ M1.large 实例类型，我还配置了性能变化，例如我遵循的线程大小

```
http://stackoverflow.com/questions/5487851/activemq-via-rest-high-throughput-jetty-configuration
http://www.pepperdust.org/?p=150

export JAVA_OPTS="-Xms5G" 

export ACTIVEMQ_OPTS_MEMORY ="-Xms5G"

ulimit -n 65000 
```

然后也无法发布超过 200 msg/sec

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:12:41.517

嗯，这里有很多变数。刚刚在我的笔记本电脑上本地对我的 vanilla activemq 安装进行了简单的 jmeter 测试。

Jmeter：10 个线程，~5K 文本文件/消息。

= ~370 持久性消息/秒。

你在jmeter中的设置是什么？您是否正在考虑改用 JMS？

# c - 即时调整 char* 的大小 - 为什么此代码*有效*？

> ID：10613986
> 
> 赞同：4
> 
> 时间：2012-05-16T07:36:20.257
> 
> 标签：c, pointers, malloc, realloc

我正在试验 malloc 和 realloc 并想出了一些代码来解决以下问题：

> 我想创建一个未知大小的字符串，而不设置任何限制。我可以向用户询问 nr 个字符，但我宁愿在用户键入每个字符时调整 str 的大小。

所以我试图用 malloc + realloc 来做到这一点，想法是每次用户输入一个新的字符时，我使用 realloc 请求 +1 块内存来保存字符。

在尝试实现这一点时，我犯了一个错误，最终做了以下事情：

```
int main () {
    /* this simulates the source of the chars... */
    /* in reality I would do getch or getchar in the while loop below... */

    char source[10];
    int i, j;
    for (i=0, j=65; i<10; i++, j++) { 
            source[i] = j;
    }

    /* relevant code starts here */

    char *str = malloc(2 * sizeof(char)); /* space for 1 char + '\0' */
    int current_size = 1;

    i = 0;
    while(i<10) {
            char temp = source[i];
            str[current_size-1] = temp;
            str[current_size] = '\0';
            current_size++;
            printf("new str = '%s' | len = %d\n", str, strlen(str));
            i++;
    }

    printf("\nstr final = %s\n", str);

    return 0;

} 
```

请注意，realloc 部分尚未实现。

我编译并执行了这段代码，得到了以下输出

```
new str = 'A' | len = 1
new str = 'AB' | len = 2
new str = 'ABC' | len = 3
new str = 'ABCD' | len = 4
new str = 'ABCDE' | len = 5
new str = 'ABCDEF' | len = 6
new str = 'ABCDEFG' | len = 7
new str = 'ABCDEFGH' | len = 8
new str = 'ABCDEFGHI' | len = 9
new str = 'ABCDEFGHIJ' | len = 10 
```

我发现这些结果很奇怪，因为我预计程序会崩溃：str 有 2 个字符的空间，并且代码在没有请求更多内存的情况下向 str 添加了超过 2 个字符。根据我的理解，这意味着我正在写在我不拥有的内存中，所以它应该给出一个运行时错误。

那么......为什么这有效？

（编译器是 GCC 4.3.4。）

提前致谢。

**编辑：** 其中一位评论者建议调用 free() 可能会导致错误信号。我尝试使用上面的代码调用 free() 并且执行代码没有导致错误。但是，在源数组中添加了更多项，并且还调用了 free 后，得到了以下错误：

*** 检测到 glibc****./prog: free(): 下一个尺寸无效（快速）：0x09d67008 ** **

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T07:38:12.123

由于您正在写入分配的内存，因此您的代码具有[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。

代码碰巧没有崩溃一次（甚至多次）的事实并没有改变这一点。

未定义的行为并不意味着代码必须崩溃。在您的情况下，恰好有一些内存紧跟在`str`您正在覆盖的后面。覆盖该内存的实际影响是未知的（您可能正在更改某些其他变量的值，破坏堆，启动核打击等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T11:04:41.553

从 glibc-2.14 看来，内存分配将按如下大小分配，并设置边框，所以当你分配 2 字节大小“char *str = malloc(2 * sizeof(char))”时，似乎分配的内存是不少于 16 字节，所以你可能会添加更多的项目，然后导致程序错误。

```
struct _bucket_dir bucket_dir[] = {

    { 16,   (struct bucket_desc *) 0},

    { 32,   (struct bucket_desc *) 0},

    { 64,   (struct bucket_desc *) 0},

    { 128,  (struct bucket_desc *) 0},

    { 256,  (struct bucket_desc *) 0},

    { 512,  (struct bucket_desc *) 0},

    { 1024, (struct bucket_desc *) 0},

    { 2048, (struct bucket_desc *) 0},

    { 4096, (struct bucket_desc *) 0},

    { 0,    (struct bucket_desc *) 0}};   /* End of list marker */

void *malloc(unsigned int len)
{
    struct _bucket_dir  *bdir;
    struct bucket_desc  *bdesc;
    void            *retval;

    /*
     * First we search the bucket_dir to find the right bucket change
     * for this request.
     */
    for (bdir = bucket_dir; bdir->size; bdir++)
        if (bdir->size >= len)
            break;
    if (!bdir->size) {
        printk("malloc called with impossibly large argument (%d)\n",
            len);
        panic("malloc: bad arg");
    }
    /*
     * Now we search for a bucket descriptor which has free space
     */
    cli();  /* Avoid race conditions */
    for (bdesc = bdir->chain; bdesc; bdesc = bdesc->next) 
        if (bdesc->freeptr)
            break;
    /*
     * If we didn't find a bucket with free space, then we'll 
     * allocate a new one.
     */
    if (!bdesc) {
        char        *cp;
        int     i;

        if (!free_bucket_desc)  
            init_bucket_desc();
        bdesc = free_bucket_desc;
        free_bucket_desc = bdesc->next;
        bdesc->refcnt = 0;
        bdesc->bucket_size = bdir->size;
        bdesc->page = bdesc->freeptr = (void *) cp = get_free_page();
        if (!cp)
            panic("Out of memory in kernel malloc()");
        /* Set up the chain of free objects */
        for (i=PAGE_SIZE/bdir->size; i > 1; i--) {
            *((char **) cp) = cp + bdir->size;
            cp += bdir->size;
        }
        *((char **) cp) = 0;
        bdesc->next = bdir->chain; /* OK, link it in! */
        bdir->chain = bdesc;
    }
    retval = (void *) bdesc->freeptr;
    bdesc->freeptr = *((void **) retval);
    bdesc->refcnt++;
    sti();  /* OK, we're safe again */
    return(retval);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T08:23:43.867

除了您触发未定义的行为（包括但不强制要求“崩溃”）这一事实之外，我认为您的应用程序实际上*确实*拥有您正在写入的内存。

在现代操作系统上，内存是按[页面](http://en.wikipedia.org/wiki/Memory_page)处理的，内存块大于两个字节。AFAIK malloc 向操作系统询问完整页面，并在需要时在内部划分它们。（注意：依赖于实现，但我认为至少 glibc 以这种方式运行。）所以操作系统允许你写入内存，因为它在技术上是你的。在内部，malloc 通常会划分页面并在每次请求时提供部分页面。因此，您可能会覆盖堆上的另一个变量。或者越界写入，根据malloc的观点，内存还在等待被请求。

我预计只有当您尝试写入尚未从操作系统分配或标记为只读的页面时才会崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T07:39:21.743

*[认为这种操作的行为是未定义的]*

调用 realloc 或 free 时经常检查堆的完整性，而不是在每次写入时检查，您可能没有覆盖到足以导致崩溃的程度。

请注意，您最后没有拨打免费电话，如果您愿意，您可能会遇到崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T07:57:00.103

添加到前面的答案，真的没有空间 2，它只是内存中的一个指针。在某个地方，malloc 记得它为 2 个字符分配了空间，但这是 malloc 的内部工作。

您可以尝试以下小实验，看看它是如何工作的：

在第一个指针后面创建另一个指针。

```
char *str2 = str + 5;

/* or you could simply malloc another */

char *str2 = malloc(2);

printf("str=%d, str2=%d\n",str,str2);

/* to eyeball the pointers actually received
and note the difference in the two pointers. 
You will need to raise source length to at least
that much to see the results below
*/ 
```

并在第一个循环之后引入另一个 printf ：

```
printf("new str2 = '%s' | len = %d\n", str2, strlen(str2)); 
```

迟早 str2 也会开始显示相同的字母。

高温高压*

# mysql - NOT IN 的奇怪行为

> ID：10613991
> 
> 赞同：6
> 
> 时间：2012-05-16T07:36:36.070
> 
> 标签：mysql, sql

我有这张桌子：

```
select count(distinct clean_deep_link) from tbl_1;
+---------------------------------+
| count(distinct clean_deep_link) |
+---------------------------------+
|                          121211 |
+---------------------------------+ 
```

我有这个查询：

```
select count(1) from tbl_1 where clean_deep_link IN
  (select clean_deep_link from tbl_2);

+----------+
| count(1) |
+----------+
|    66360 |
+----------+ 
```

但是当我将查询更改为它时，`not in`它返回一个空集：

```
select count(1) from tbl_1
where clean_deep_link not in (select clean_deep_link from tbl_2);
+----------+
| count(1) |
+----------+
|        0 |
+----------+ 
```

这怎么可能？如果子查询包含大约一半的记录，`not`子查询的不应该包含另一半吗？我在这里想念什么？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T07:38:53.460

我会假设这`tbl_1.clean_deep_link`是`NULL`其余的行。

这些值既不是您的子查询，`IN`也不是`NOT IN`您的子查询。

* * *

另一个原因可能是，您`NULL`在`tbl_2.clean_deep_link`.

请尝试以下方法：

```
select count(1) from tbl_1
where clean_deep_link not in (select clean_deep_link
                              from tbl_2 WHERE clean_deep_link IS NOT NULL); 
```

问题`NULL`在于它既不是`=`，也不是`<>`任何其他值（包括`NULL`）。

在检查时`NOT IN`，MySQL 需要检查每个值，`tbl_1`因为它不包含在`tbl_2`其中并因此检查它们是否存在`<>`。

你的价值观**不是** `<> NULL`，所以他们**不是** `NOT IN`。

另请参阅：[对空值使用 NOT IN 运算符](http://www.sqlbadpractices.com/using-not-in-operator-with-null-values/)

* * *

检查[SQL Fiddle](http://sqlfiddle.com/#!2/3de6a/3)中的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:45:26.910

MySQL 中的`NULL`列被计为不同的，因此三个`NULL`值都被认为是不同的。

如其他地方所述，您无法`NULL`使用传统的比较运算符与其他值进行比较，`IN`其中`NOT IN`.

以下运算符可以处理`NULL`值

```
x <=> y - returns 1 if x == y (even if both are NULL)
x IS NULL - returns 1 if x is null
x IS NOT NULL - returns 0 if x is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:49:02.543

```
SELECT COUNT(*) - COUNT(1) 
FROM tbl_1 
WHERE clean_deep_link IN (
    SELECT clean_deep_link 
    FROM tbl_2
); 
```

# forms - Buddypress 自定义头像上传页面

> ID：10613993
> 
> 赞同：0
> 
> 时间：2012-05-16T07:36:45.413
> 
> 标签：forms, upload, buddypress, avatar

我希望这个论坛上的某个人可以帮助我创建我正在尝试为 Buddypress 创建的自定义头像上传页面。提前为这封冗长的电子邮件道歉，但我想尽可能清楚，希望能得到一个明确而具体的答案:)

该页面是用户在注册网站后完成的三步“开始”过程的一部分（1\. 填写个人资料字段 2\. 上传头像 3\. 邀请朋友）。

我不是代码专家，但我已经通过分别从 profile/edit.php 和invite-anyone/by-email/by-email.php 文件中复制和编辑代码来对第 1 步和第 3 步进行排序，然后执行重定向 onsubmit 到下一步。

为了使第 1 步正常工作，我还必须编辑 bp-xprofile-template.php 文件以包含 if is_page ... else ... 以便页面使用loggedin_user 而不是displayed_user。

通过第 2 步，我的页面显示正确，但是在我为头像选择图像并点击上传后，页面刷新并且没有进行裁剪，如果您在 change-avatar 上上传头像就会这样做个人资料中的页面。

如果我将表单操作更改为重定向到登录用户配置文件中的更改头像页面（默认情况下没有操作），则会出现裁剪，但我不想让用户离开“步骤”。

我想也许我需要更改 bp-core-template.php 中的 avatar_admin 函数集中的某些内容，以便它可以在其他页面上运行，但这并没有超出我的能力范围。我真的希望有人能帮助解决这个问题，因为这是完成这个过程的最后一道障碍。

下面是 change-avatar.php 的代码，这是我已经复制并尝试在自定义页面上工作的代码。我的页面在“if ('crop-image' == bp_get_avatar_admin_step()”处停止正常工作。提前致谢。

```
 <h4><?php _e( 'Change Avatar', 'buddypress' ) ?></h4>

<?php do_action( 'bp_before_profile_avatar_upload_content' ) ?>

<?php if ( !(int)bp_get_option( 'bp-disable-avatar-uploads' ) ) : ?>

    <p><?php _e( 'Your avatar will be used on your profile and throughout the site. If there is a <a href="http://gravatar.com">Gravatar</a> associated with your account email we will use that, or you can upload an image from your computer.', 'buddypress') ?></p>

    <form action="" method="post" id="avatar-upload-form" class="standard-form" enctype="multipart/form-data">

        <?php if ( 'upload-image' == bp_get_avatar_admin_step() ) : ?>

            <?php wp_nonce_field( 'bp_avatar_upload' ) ?>
            <p><?php _e( 'Click below to select a JPG, GIF or PNG format photo from your computer and then click \'Upload Image\' to proceed.', 'buddypress' ) ?></p>

            <p id="avatar-upload">
                <input type="file" name="file" id="file" />
                <input type="submit" name="upload" id="upload" value="<?php _e( 'Upload Image', 'buddypress' ) ?>" />
                <input type="hidden" name="action" id="action" value="bp_avatar_upload" />
            </p>

            <?php if ( bp_get_user_has_avatar() ) : ?>
                <p><?php _e( "If you'd like to delete your current avatar but not upload a new one, please use the delete avatar button.", 'buddypress' ) ?></p>
                <p><a class="button edit" href="<?php bp_avatar_delete_link() ?>" title="<?php _e( 'Delete Avatar', 'buddypress' ) ?>"><?php _e( 'Delete My Avatar', 'buddypress' ) ?></a></p>
            <?php endif; ?>

        <?php endif; ?>

        <?php if ( 'crop-image' == bp_get_avatar_admin_step() ) : ?>

            <h5><?php _e( 'Crop Your New Avatar', 'buddypress' ) ?></h5>

            <img src="<?php bp_avatar_to_crop() ?>" id="avatar-to-crop" class="avatar" alt="<?php _e( 'Avatar to crop', 'buddypress' ) ?>" />

            <div id="avatar-crop-pane">
                <img src="<?php bp_avatar_to_crop() ?>" id="avatar-crop-preview" class="avatar" alt="<?php _e( 'Avatar preview', 'buddypress' ) ?>" />
            </div>

            <input type="submit" name="avatar-crop-submit" id="avatar-crop-submit" value="<?php _e( 'Crop Image', 'buddypress' ) ?>" />

            <input type="hidden" name="image_src" id="image_src" value="<?php bp_avatar_to_crop_src() ?>" />
            <input type="hidden" id="x" name="x" />
            <input type="hidden" id="y" name="y" />
            <input type="hidden" id="w" name="w" />
            <input type="hidden" id="h" name="h" />

            <?php wp_nonce_field( 'bp_avatar_cropstore' ) ?>

        <?php endif; ?>

    </form>

<?php else : ?>

    <p><?php _e( 'Your avatar will be used on your profile and throughout the site. To change your avatar, please create an account with <a href="http://gravatar.com">Gravatar</a> using the same email address as you used to register with this site.', 'buddypress' ) ?></p>

<?php endif; ?>

<?php do_action( 'bp_after_profile_avatar_upload_content' ) ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T14:53:02.093

感谢您提供有用的建议。只是要补充一点，@Zenvied 的建议效果很好。唯一的事情是我必须添加我自己的“bp_core_add_cropper_inline_js()”和“bp_core_add_cropper_inline_css()”实现，然后从我的“xprofile_screen_change_avatar()”实现中调用它们。所以代替这个：

```
 wp_enqueue_style( 'jcrop' );
 wp_enqueue_script( 'jcrop', array( 'jquery' ) );
 add_action( 'wp_footer', 'bp_core_add_cropper_inline_js' );
 add_action( 'wp_footer', 'bp_core_add_cropper_inline_css' ); 
```

我这样做了：

```
self::bp_custom_core_add_cropper_inline_css();
self::bp_custom_core_add_cropper_inline_js();
wp_enqueue_style( 'jcrop' );
wp_enqueue_script( 'jcrop', array( 'jquery' ) ); 
```

希望这对某人有帮助！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T19:17:58.510

我刚刚完成了实现我自己的自定义头像页面的工作，并且遇到了同样的问题。我想我实际上已经失去了头发。哈哈。我最终调整了我的代码，以确保 bp 仍然可以通过获取一些相关代码块并将其构建到一个新函数中作为我主题的一部分来升级。

问题是隐藏的提交值 'w' 是许多[wordpress 保留条款](http://codex.wordpress.org/Function_Reference/register_taxonomy#Reserved_Terms)之一。

```
<input type="hidden" name="image_src" id="image_src" value="<?php bp_avatar_to_crop_src(); ?>" />
<input type="hidden" id="x" name="x" />
<input type="hidden" id="y" name="y" />
<input type="hidden" id="w" name="w" />
<input type="hidden" id="h" name="h" /> 
```

您需要将此值更改为其他任何值，然后实现您自己的处理函数版本：

> buddypress/bp-xprofile/bp-xprofile-screens.php->xprofile_screen_change_avatar();

另外，也许还有更好的方法，但是为了使裁剪工作，我必须对

```
bp_core_add_jquery_cropper(){
 wp_enqueue_style( 'jcrop' );
 wp_enqueue_script( 'jcrop', array( 'jquery' ) );
 add_action( 'wp_head', 'bp_core_add_cropper_inline_js' );
 add_action( 'wp_head', 'bp_core_add_cropper_inline_css' );
} 
```

至

```
 wp_enqueue_style( 'jcrop' );
 wp_enqueue_script( 'jcrop', array( 'jquery' ) );
 add_action( 'wp_footer', 'bp_core_add_cropper_inline_js' );
 add_action( 'wp_footer', 'bp_core_add_cropper_inline_css' ); 
```

在我自己的 profile_screen_change_avatar() 实现中。

希望这对您或其他人仍然有用。让我知道这一切是否有意义（好与否；））。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:20:47.577

> 我的页面在“if ('crop-image' == bp_get_avatar_admin_step()”处停止正常工作

那么 bp_get_avatar_admin_step() = 在那一点上是什么？回显出来看看。

头像真的上传了吗？如果是这样，您必须弄清楚如何推进 admin_step。

> 我想也许我需要更改 bp-core-template.php 中的 avatar_admin 函数集中的某些内容，但这并不超出我的能力范围

与其改变，不如弄清楚它们是如何被调用的。

# php - 使用 PHP 解压 Tiled TMX 文件内容

> ID：10613996
> 
> 赞同：2
> 
> 时间：2012-05-16T07:36:56.523
> 
> 标签：php, xml, gzip, base64

我在从 .tmx（平铺）文件中提取图层内容时遇到问题。我想在 PHP 中获得完整的*未压缩*数据并制作一个小图像。获取宽度、高度等标题信息是没有问题的——SimpleXML 在那里完成了它的工作。但不知何故，瓦片层的解压缩不起作用。

数据本身存储为base64和gzip编码的字符串（类似`H4sIAAAAAAAAC+3bORKAIBQEUVzuf2YTTSwEA/gL00EnJvJQsAjcSyk7EU3v+Jn3OI`），但我什至在获取base64解码代码时遇到问题（它只是给了我奇怪的字符，当我重新打开平铺地图并将其保存为“base64 uncompressed”结果只是一个空字符串 -当然*不*使用 gzip 解压缩）。

我已经通过网络搜索并查看了数据是如何精确压缩的（[Github 文章](http://github.com/bjorn/tiled/wiki/TMX-Map-Format "Github 文章")）。似乎我必须使用该`gzinflate()`命令而不是所有其他命令（例如 gzuncompress），但这对我也不起作用。

我现在拥有的代码如下：

```
<?php
  // Get the raw xml data
  $map_xml = new SimpleXML(file_get_contents("map.tmx"));
  $data = $map_xml["layer"][0]["data"]["@content"]; // I would make a loop here
  $content =gzinflate(base64_decode($map_content)); // gives me and error

  var_dump($data); // results in nothing
?> 
```

经过更多研究后，我发现我应该使用 zlib 过滤器（[php.net 文章](http://nl.php.net/manual/en/filters.compression.php "php.net 文章")）。现在我真的很困惑，我不知道我应该选择什么 - 我再次询问谷歌并得到以下信息：[Compressing with Java Decompressing with PHP](https://stackoverflow.com/questions/1406917/compressing-with-java-decompressing-with-php "堆栈溢出问题")。根据答案，我必须在使用 base64 和 gzip 方法之前裁剪我们的标题。

现在我的问题是：我必须先剪掉标题吗？如果是，我该怎么做？如果没有，那我怎样才能得到未压缩的数据呢？

我真的希望有人可以在这里帮助我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:29:47.160

如前所述，Php 的 gzinflate 和 gzuncompress 名称不正确。但是，我们可以利用接受原始压缩数据的 gzinflate。gzip 标头长 10 个字节，可以使用 substr 剥离。使用上面的示例，我尝试了以下操作：

```
$base64content = "H4sIAAAAAAAAC+3bORKAIBQEUVzuf2YTTSwEA/gL00EnJvJQsAjcSyk7EU3v+Jn3OI";
$compressed = substr( base64_decode($base64content), 10);
$content = gzinflate($compressed); 
```

这为您提供了一个表示原始数据的字符串。您的 TMX 层主要由 gid 0、2 和 3 组成，因此如果您将其打印出来，您只会看到空白。要获得有用的数据，您需要对字符调用 ord：

```
$chars = str_split($content);
$values = array();
foreach($chars as $char) {
    $values[] = ord($char);
}
var_dump( implode(',', $values) );  // This gives you the equivalent of saving your TMX file with tile data stored as csv 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:30:57.877

哇，这些 PHP 函数的名字太可怕了。先来点背景。

您可能会遇到或能够制作三种格式。他们是：

*   原始 deflate，这是压缩为没有标题或尾部的 deflate 格式的数据，在[RFC 1951](https://www.rfc-editor.org/rfc/rfc1951)中定义。
*   zlib，它是包装在紧凑的 zlib 标头和预告片中的原始 deflate 数据，其中包含一个两字节的标头和一个四字节的 Adler-32 校验值作为预告片，在[RFC 1950](https://www.rfc-editor.org/rfc/rfc1950)中定义。
*   gzip，它是包装在 gzip 标头和预告片中的原始 deflate 数据，其中标头至少为 10 个字节，并且可以更长地包含文件名、注释和/或额外字段，以及带有 4 个字节的 8 字节预告片-byte CRC-32 和一个未压缩的长度模块 2^32。此包装器在[RFC 1952](https://www.rfc-editor.org/rfc/rfc1952)中定义。这是您将在后缀为 的文件中找到的数据`.gz`。

PHP 函数`gzdeflate()`并`gzinflate()`创建和解码原始 deflate 格式。PHP 函数`gzcompress()`并`gzuncompress()`创建和解码 zlib 格式。 *这些*函数都不应该在名称中包含“gz”，因为它们*都*不能处理 gzip 格式！对于试图创建或解码 gzip 格式数据的 PHP 编码人员来说，这将永远感到困惑。

似乎有（但文档不清楚它们是否总是存在）PHP 函数`gzencode()`，`gzdecode()`如果我正确阅读了简洁的文档，默认情况下会创建和解码 gzip 格式。 `gzencode()`还有一个生成 zlib 格式的选项，我怀疑它`gzdecode()`会尝试自动检测 gzip 或 zlib 格式并相应地解码。（这是所有这些函数都使用的实际[zlib 库的一部分。）](http://zlib.net/)

`zlib_encode()`和的文档`zlib_decode()`不完整（这些页面承认：“此函数当前未记录；只有它的参数列表可用”），因此很难说出它们在做什么。如果您知道要在字符串中放入什么，则有一个未记录的`encoding`字符串参数`zlib_encode()`可能允许您选择三种格式之一。没有`encoding`参数`zlib_decode()`，所以它可能会尝试在三种格式中自动检测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:09:07.953

我知道这已经过时了，但我确实花了一整天的时间在玩这段代码。
我做的事情真的很挑剔。但是，这里有一个快速函数可以将 TMX 文件转换为每个图层上每个图块的 ID 数组。

功劳归于其他回答者，他们帮助我拼凑出我出错的地方。

```
<?php

function getLayer($getLayerName = '')
{
    $xml = simplexml_load_file('level.tmx');
    $values = array();
    foreach($xml->layer as $child)
    {
        $name = $child->attributes()->name;

        if(!empty($getLayerName))
            if($name != $getLayerName)
                continue;

        $data = gzinflate(substr(base64_decode(trim($child->data)), 10));
        $chars = str_split($data);
        $i = 0;
        foreach($chars as $char)
        {
            $charID = ord($char);
            if($i % 4 == 0) // I'm only interested in the tile IDs
            {
                $values[(String) $name][] = $charID;
            }
            $i++;
        }
    }
    return $values;
}

print_r(getLayer());
//or you could use getLayer('LayerName') to get a single layer!

?> 
```

在我的示例 3x3 地图上，只有一张平铺图像，我得到以下信息：

```
Array
(
    [floor] => Array
        (
            [0] => 1
            [1] => 1
            [2] => 1
            [3] => 1
            [4] => 1
            [5] => 1
            [6] => 1
            [7] => 1
            [8] => 1
        )

    [layer2] => Array
        (
            [0] => 0
            [1] => 0
            [2] => 1
            [3] => 0
            [4] => 1
            [5] => 0
            [6] => 1
            [7] => 1
            [8] => 0
        )

) 
```

希望这个功能对任何需要它的人来说都很方便。

# c++ - 如何使用颜色识别纸币？

> ID：10613998
> 
> 赞同：-4
> 
> 时间：2012-05-16T07:37:06.507
> 
> 标签：c++, opencv

如何使用 Open CV 检测纸币的颜色。我将使用颜色来识别纸币。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:19:27.473

您可以使用 OpenCV 的[直方图函数](http://docs.opencv.org/modules/imgproc/doc/histograms.html#calchist)计算出图像中出现最多的颜色，然后选择最高值。或者，您可以将图像重新缩放为 1x1 像素并选择该颜色（应该是平均颜色）。

但是，仅使用颜色进行识别不太可能给出足够精确的结果以供任何使用。美国纸币的颜色都是一样的，欧元纸币也好不到哪里去：脏的 20 欧元可以像 5 欧元一样灰色（200 欧元和 100 欧元非常相似）。