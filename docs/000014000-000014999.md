# StackOverflow 问答 14000-14999

# c# - C# 中的遗传编程

> ID：14008
> 
> 赞同：60
> 
> 时间：2008-08-17T23:25:45.733
> 
> 标签：c#, genetic-algorithm, genetic-programming, evolutionary-algorithm

我一直在为 C# 寻找一些好的遗传编程示例。有人知道好的在线/书籍资源吗？想知道是否有用于进化/遗传编程的 C# 库？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-06-23T00:22:44.647

在开发[了自己的遗传编程教学应用程序](http://code.google.com/p/evo-lisa-clone/)后，我找到了一个完整的遗传编程框架，称为[AForge.NET Genetics](http://code.google.com/p/aforge/source/browse/#svn/trunk/Sources/Genetic)。它是[Aforge.NET 库](http://code.google.com/p/aforge/)的一部分。它在 LGPL 下获得许可。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-08-17T23:28:18.380

MSDN 去年有一篇关于基因编程的文章：[Genetic Algorithms: Survival of the Fittest with Windows Forms](http://msdn.microsoft.com/en-us/magazine/cc163934.aspx)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-08-26T06:14:06.850

我建议不要实际生成程序集，除非您绝对需要，特别是如果您刚刚开始实施遗传算法。

当目标语言是函数式和动态类型时，遗传算法最容易实现。这就是为什么大多数遗传算法研究都是用 LISP 编写的。因此，如果您打算在 C# 中实现它，您最好定义自己的迷你“树语言”，让算法生成树，并在运行算法的每次迭代时只解释树.

我在大学时做过一个这样的项目（用 C# 实现遗传算法），这就是我采用的方法。

这样做会给您带来优势，即只有 1 个表示可以使用（AST 表示），该表示最适合执行和遗传算法“复制”步骤。

或者，如果您尝试生成程序集，您可能最终会为应用程序添加大量不必要的复杂性。目前，除非整个应用程序域被销毁，否则 CLR 不允许从应用程序域卸载程序集。这意味着您需要在算法的每次迭代中为每个生成的程序启动一个单独的应用程序域，以避免在您的应用程序中引入巨大的内存泄漏。一般来说，整个事情只会增加一堆额外的刺激。

另一方面，解释的 AST 就像任何其他对象一样是可垃圾收集的，因此您不需要在多个应用程序域中胡闹。如果出于性能原因您想对最终结果进行代码生成，您可以稍后添加对它的支持。但是，我建议您使用[DynamicMethod](http://msdn.microsoft.com/en-us/library/system.reflection.emit.dynamicmethod.aspx)类来执行此操作。它将允许您在运行时动态地将 AST 转换为已编译的委托。这将使您能够部署单个 DLL，同时保持代码生成尽可能简单。此外，DynamicMethod 实例是可垃圾回收的，因此您最终可以将它们用作遗传算法的一部分来加快处理速度。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-08-18T01:00:07.010

您也许可以使用 LINQ 表达式树来实现遗传编程——它比随机 IL 生成更有可能生成可用的东西。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-17T23:28:25.993

[我在http://channel9.msdn.com/posts/Charles/Algorithms-and-Data-Structures-Mike-Swanson-Genetic-Session-Scheduler/](http://channel9.msdn.com/posts/Charles/Algorithms-and-Data-Structures-Mike-Swanson-Genetic-Session-Scheduler/)上看到 Mike Swanson 在 channel9 上对它进行了很好的高级讨论

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2011-10-17T17:56:18.890

如果您一般对遗传算法或启发式优化感兴趣，您可能想看看[HeuristicLab](http://dev.heuristiclab.com). 它已经开发了好几年，距离我们发布新版本已有 1.5 年。它是用 C# 4 编程的，并且有一个漂亮的 GUI。已经有许多算法可用，如遗传算法、遗传编程、进化策略、局部搜索、禁忌搜索、粒子群优化、模拟退火等等。还实现了几个问题，如车辆路线问题、旅行推销员、实函数优化、背包、二次分配问题、分类、回归等等。还有教程，我们集成了协议缓冲区，因此您可以与外部程序进行通信以进行解决方案评估。它是在 GPL 下获得许可的。2009年该软件获得了微软奥地利的微软创新奖。

我们还写了一本关于这个主题的书：[遗传算法和遗传编程](https://rads.stackoverflow.com/amzn/click/com/1584886293)。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-08-18T00:54:11.420

您是指实际的遗传编程，而不是一般的遗传算法？

如果是这样，C#/.net 不是最好的语言。例如，LISP 一直是 GP 的中流砥柱。

但是，如果必须，您可能会想要动态生成 CIL / MSIL。[您可以使用System.Reflection.Emit](http://msdn.microsoft.com/en-us/library/system.reflection.emit.aspx)来做到这一点，但我推荐[Mono.Cecil](http://www.mono-project.com/Cecil)。它缺乏好的文档（好像反射发射有它们）。但它提供了更好的组装发射和反射。

另一个问题是，在 .net 框架中加载代码并随后将其处理掉并非易事。至少，您不能卸载程序集。您可以卸载应用程序域，但是将代码加载到单独的应用程序域并在外部调用它的整个业务会变得非常混乱。.NET 3.5 的 System.Addin 东西应该使这更容易。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-25T03:04:32.457

我现在正在阅读[遗传编程领域指南](http://www.gp-field-guide.org.uk/)（免费 PDF 下载）。它也可作为平装本。它讨论了使用 Java 编写的名为[TinyGP](http://cswww.essex.ac.uk/staff/rpoli/TinyGP/)的库。你可能会从中获得一些里程。我还没有开始做任何实际的编程，但我希望在 C# 中应用一些概念。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-06-01T15:11:26.340

如果您对功能齐全的进化计算框架感兴趣，我已经将 ECJ 分叉到 C# .NET 4.0。该包包括原始 ECJ Java 项目中的所有内容，包括所有工作示例。

我还编写了 500 个单元测试来验证转换的许多方面。但是还需要更多的测试。特别是，分布式计算方面没有经过充分测试。那是因为我计划从 ECJ 对套接字的简单使用转换为使用 WCF 和 WF 的更强大的策略。我还将重新设计框架以利用 TPL（任务并行库）。

无论如何，您可以在此处下载初始转换：

[http://branecloud.codeplex.com](http://branecloud.codeplex.com)

我还在将其他几个与“合成智能”研究相关的框架从 Java 转换为 .NET（当我有时间的时候）。

本

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-05-21T18:50:35.787

Manning 的书：“ [.NET 中](http://www.amazon.co.uk/Metaprogramming-NET-Kevin-Hazzard/dp/1617290262)的元编程”通过表达式树专门介绍了 GP 的大部分内容。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-07-10T10:23:32.957

你可以试试[GeneticSharp](https://github.com/giacomelli/GeneticSharp)。

它具有所有经典的 GA 操作，如选择、交叉、变异、重新插入和终止。

它非常可扩展，您也可以定义自己的染色体、适应度函数、种群生成策略以及上面所有引用的操作。

它可用于多种应用程序，如 C# 库和 Unity 3D 游戏，在[GTK# 应用程序](https://github.com/giacomelli/GeneticSharp/tree/master/src/GeneticSharp.Runner.GtkApp)和[Unity 3D 跳棋游戏](https://github.com/giacomelli/GeneticSharp/tree/master/src/Samples/Unity/Checkers)中运行它的示例。

它也适用于 Win 和 OSX。

以下是如何使用该库的基本示例：

```
var selection = new EliteSelection();
var crossover = new OrderedCrossover();
var mutation = new ReverseSequenceMutation();
var fitness = new YourFitnessFunction();
var chromosome = new YourChromosome();
var population = new Population (50, 70, chromosome);

var ga = new GeneticAlgorithm(population, fitness, selection, crossover, mutation);

ga.Start(); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-22T00:48:16.413

我在 C# 中维护了一个 ECJ 端口。这很棒。

# c# - 在 C# 中禁用 ListView，但仍显示当前选择

> ID：14029
> 
> 赞同：7
> 
> 时间：2008-08-17T23:59:38.940
> 
> 标签：c#, .net, winforms, listview

我有一个 ListView 控件，我试图找出最简单/最好的方法来禁止更改选定的行，而不*隐藏*选定的行。

我知道有一个`HideSelection`属性，但只有在`ListView`仍然启用（但没有集中）时才有效。即使禁用了 ListView，我也需要可以查看选择。

我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-02T21:12:48.600

您还可以使 ListView 所有者绘制。然后，您可以完全控制项目的外观，无论它们是否被选中，或者 ListView 本身是否启用。DrawListViewItemEventArgs 提供了一种要求 ListView 绘制项目的各个部分的方法，因此您只需绘制您感兴趣的位。例如，您可以绘制项目的背景，但将其留给 ListView 进行绘制文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-18T01:01:35.790

有两个选项，更改所选行禁用的颜色。或者更改所有其他行以模拟它们被禁用，除了选定的行。第一个选项显然是最简单的，而第二个选项显然需要一些额外的保护。

我之前实际上已经完成了第一个选项，并且效果很好。您只需要记住将颜色更改回默认值，以防在此过程中稍后选择另一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-07T06:40:35.400

实施 SelectedIndexChanged 并执行此操作

```
 private void listViewABC_SelectedIndexChanged(object sender, EventArgs e)
    {
        listViewABC.SelectedItems.Clear();
    } 
```

# sql-server - 数据库触发器

> ID：14031
> 
> 赞同：18
> 
> 时间：2008-08-18T00:01:19.203
> 
> 标签：sql-server, database-design, triggers

在过去，我从来不喜欢在数据库表上使用触发器。对我来说，它们总是代表着一些将在数据库端发生的“魔法”，远离我的应用程序代码的控制。我还想限制数据库必须做的工作量，因为它通常是共享资源，我一直认为触发器在高负载情况下可能会变得很昂贵。

也就是说，我发现了几个使用触发器有意义的实例（至少在我看来它们是有意义的）。不过最近，我发现自己有时可能需要“绕过”触发器。我对不得不寻找方法来做到这一点感到非常内疚，我仍然认为更好的数据库设计会减少这种绕过的需要。不幸的是，这个数据库被多个应用程序使用，其中一些是由一个非常不合作的开发团队维护的，他们会对模式更改大喊大叫，所以我被卡住了。

关于触发器的一般共识是什么？爱他们？讨厌他们？认为它们在某些情况下是有目的的？是否认为需要绕过触发器意味着您“做错了”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-18T03:23:39.497

触发器通常使用不正确，会引入错误，因此应避免使用。永远不要设计触发器来执行跨表中的行的完整性约束检查（例如，“部门的平均工资不能超过 X）。

[Oracle 副总裁Tom Kyte](http://asktom.oracle.com)表示，他更愿意[将触发器作为 Oracle](http://tkyte.blogspot.com/2006/09/classic-example-of-why-i-despise.html)数据库的一个特性来删除，因为它们经常在 bug 中发挥作用。他知道这只是一个梦想，触发器会一直存在，但如果他可以的话，他会从 Oracle 中删除触发器，他会（连同 WHEN OTHERS 子句和自主事务）。

> 触发器可以正确使用吗？绝对地。
> 
> 问题是 - 它们在很多情况下都没有正确使用，以至于我愿意放弃任何感知到的好处，只是为了摆脱它们造成的滥用（和错误）。- 汤姆凯特

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-18T00:37:45.760

把数据库想象成一个很大的对象——在每次调用它之后，它应该处于逻辑一致的状态。

数据库通过表暴露自己，并且可以使用触发器来保持表和行的一致性。保持它们一致的另一种方法是禁止直接访问表，并且只允许通过存储过程和视图进行访问。

触发器的缺点是任何动作都可以调用它们；这也是一种优势——没有人会因为无能而破坏系统的完整性。

作为对立面，仅允许通过存储过程和视图访问数据库仍然允许后门访问权限。信任具有足够权限的用户不会破坏数据库完整性，所有其他用户都使用存储过程。

至于减少工作量：数据库在不必与外部世界打交道时效率惊人；您会非常惊讶甚至进程切换会损害性能。这是存储过程的另一个优点：而不是对数据库的十几个调用（以及所有相关的往返），有一个。

> 将东西堆放在一个存储过程中很好，但是当出现问题时会发生什么？假设您有 5 个步骤，但第一步失败了，那么其他步骤会发生什么？您需要在其中添加一大堆逻辑来满足这种情况。一旦你开始这样做，你就失去了在那种情况下存储过程的好处。

业务逻辑必须去某个地方，并且在数据库的设计中嵌入了许多隐含的域规则——关系、约束等是对业务规则进行编码的一种尝试，例如，用户只能有一个密码。假设您已经开始通过这些关系等将业务规则推送到数据库服务器上，那么您在哪里划清界限？数据库何时放弃对数据完整性的责任，并开始信任调用应用程序和数据库用户来正确处理数据？嵌入了这些规则的存储过程可以将大量政治权力推到 DBA 手中。这取决于您的 n 层架构中将存在多少层；如果有表示层、业务层和数据层，业务和数据的分离在哪里？业务层增加了什么附加值？您会将数据库服务器上的业务层作为存储过程运行吗？

是的，我认为必须绕过触发器意味着您“做错了”；在这种情况下，触发器不适合您。

![在此处输入图像描述](../Images/42d1d756887d8882b132626701fc1c75.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-18T00:08:53.853

我在 c# 中使用 web 和 winforms 应用程序，我非常**讨厌**触发器。我从来没有遇到过这样的情况，我可以证明使用触发器而不是将该逻辑移动到应用程序的业务层并在那里复制触发器逻辑。

我不做任何 DTS 类型的工作或类似的工作，因此可能会有一些使用触发器的用例，但如果我的任何团队中的任何人说他们可能想要使用触发器，他们最好已经准备好他们的论点因为我拒绝袖手旁观，让触发器添加到我正在处理的任何数据库中。

我不喜欢触发器的一些原因：

*   他们将逻辑移动到数据库中。一旦你开始这样做，你就要求一个痛苦的世界，因为你失去了你的调试、你的编译时间安全和你的逻辑流程。都是下坡路。
*   他们实现的逻辑对任何人来说都不容易看到。
*   并非所有数据库引擎都支持触发器，因此您的解决方案会创建对数据库引擎的依赖关系

我敢肯定我能想到更多的原因，但仅凭这些就足以让我不使用触发器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-18T00:18:13.863

触发器可能非常有用。它们也可能非常危险。我认为它们适用于诸如填充审计数据（创建者、修改日期等）之类的房屋清洁任务，并且在某些数据库中可用于参照完整性。

但我不喜欢将大量业务逻辑放入其中。这可能会使支持出现问题，因为：

*   这是要研究的额外代码层
*   有时，正如 OP 所了解的那样，当您需要进行数据修复时，触发器可能会假设数据更改始终是通过应用程序指令进行的，而不是来自开发人员或 DBA 修复问题，甚至来自不同的应用程序

至于必须绕过触发器来做某事，这可能意味着您做错了什么，也可能意味着触发器做错了什么。

我喜欢与触发器一起使用的一般规则是让它们保持轻便、快速、简单和尽可能非侵入性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-14T19:38:45.357

"Never design a trigger to do integrity constraint checking that crosses rows in a table" -- I can't agree. The question is tagged 'SQL Server' and CHECK constraints' clauses in SQL Server cannot contain a subquery; worse, the implementation seems to have a 'hard coded' assumption that a CHECK will involve only a single row so using a function is not reliable. So if I need a constraint which does legitimately involve more than one row -- and a good example here is the sequenced primary key in a classic 'valid time' temporal table where I need to prevent overlapping periods for the same entity -- how can I do that without a trigger? Remember this is a primary key, something to ensure I have data integrity, so enforcing it anywhere other than the DBMS is out of the question. Until CHECK constraints get subqueries, I don't see an alternative to using triggers for certain kinds of integrity constraints.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-18T00:13:45.310

我发现自己在进行批量数据导入时绕过了触发器。我认为在这种情况下这样做是合理的。

如果你最终经常绕过触发器，你可能需要再看看你把它们放在那里是为了什么。

一般来说，我会投票支持“它们在某些情况下是有目的的”。我总是对性能影响感到紧张。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T00:09:32.510

就个人而言，我不是粉丝。我将使用它们，但只有当我发现代码中的瓶颈可以通过将操作移入触发器来清除时。一般来说，我更喜欢简单，而保持简单的一种方法是将逻辑保存在一个地方——应用程序。我还从事过访问非常分散的工作。在这些环境中，我打包的代码越多，我就必须让越多的人参与进来，即使是最简单的修复也是如此。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-18T00:30:46.210

几周前我第一次使用触发器。我们将生产服务器从 SQL 2000 更改为 SQL 2005，我们发现驱动程序对 NText 字段（存储大型 XML 文档）的行为有所不同，丢弃了最后一个字节。我使用触发器作为临时修复，在数据末尾添加一个额外的虚拟字节（一个空格），解决我们的问题，直到可以推出适当的解决方案。

除了这个特殊的临时案例，我会说我会避免使用它们，因为它们确实隐藏了正在发生的事情，并且它们提供的功能应该由开发人员明确处理，而不是作为一些隐藏的魔法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-18T00:40:58.123

老实说，我唯一一次使用触发器来模拟一个唯一索引，该索引允许具有不计入唯一性的 NULL。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-18T01:01:10.017

> 至于减少工作量：数据库在不必与外部世界打交道时效率惊人；您会非常惊讶甚至进程切换会损害性能。这是存储过程的另一个优点：而不是对数据库的十几个调用（以及所有相关的往返），有一个。

这有点离题，但你也应该意识到你只是从一个潜在的积极因素来看这个。

将东西堆放在一个存储过程中很好，但是当出现问题时会发生什么？假设您有 5 个步骤，但第一步失败了，那么其他步骤会发生什么？您需要在其中添加一大堆逻辑来满足这种情况。一旦你开始这样做，你就失去了在那种情况下存储过程的好处。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-18T01:32:48.143

总粉丝，

但真的必须谨慎使用它，

*   需要保持一致性（尤其是在仓库中使用维度表时，我们需要将事实表中的数据与其适当的维度相关联。有时，维度表中的适当行的计算成本可能非常高，因此您需要密钥要直接写入事实表，保持“关系”的一种好方法是使用触发器。

*   需要记录更改（例如，在审计表中，知道@@user 做了什么更改以及何时发生更改很有用）

一些 RDBMS 像 sql server 2005 还为您提供了 CREATE/ALTER/DROP 语句的触发器（这样您就可以知道谁创建了什么表、何时、删除了哪些列、何时等。）

老实说，在这 3 个场景中使用触发器，我不明白你为什么需要“禁用”它们。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-18T19:08:10.387

一般的经验法则是：不要使用触发器。如前所述，它们增加了开销和复杂性，可以通过将逻辑移出 DB 层轻松避免。

此外，在 MS SQL Server 中，每个 sql 命令触发一次触发器，而不是每行触发一次。例如，下面的 sql 语句将只执行一次触发器。

```
UPDATE tblUsers
SET Age = 11
WHERE State = 'NY' 
```

许多人，包括我自己，都认为触发器是在每一行触发的，但事实并非如此。如果您有一个像上面这样的 sql 语句可能会更改多行中的数据，您可能希望包含一个游标来更新受触发器影响的所有记录。您可以看到这如何很快变得令人费解。

# linux - 什么是适用于 Linux 的好的数据库 ERD 工具？

> ID：14032
> 
> 赞同：28
> 
> 时间：2008-08-18T00:01:42.230
> 
> 标签：linux, ubuntu, erd

我最近在我的工作机器上切换到 Linux，并且对 Linux 桌面环境不熟悉，我想为数据库设计找到一个不错的 ERD 工具。每次我需要创建图表时重新启动到我的 Windows 分区会很快变得不愉快。我查看了 Dia，但没有看到任何 DB 工具——只有 UML、网络等。

有人有什么建议吗？对于它的价值，我使用的是 Ubuntu (Hardy Heron)。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-19T16:58:04.970

MySQL 刚刚正式发布了“MySQL Workbech for linux”的 alpha 版本：

请参阅此处的公告： [适用于 Linux 的 MySQL Workbench 5.1 Alpha 可用](http://dev.mysql.com/workbench/?p=153)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-21T20:01:06.823

对于简单的 ER 图，我绝对会推荐[Gliffy.com](http://www.gliffy.com/)；它是一个基于 Flash 的在线工具。一周前我写了一篇关于它的小[评论。](http://www.davedevelopment.co.uk/2008/08/11/review-gliffycom/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-05T14:54:26.830

对于通用（独立于供应商）工具，您可以尝试 dia（我更喜欢 dia-gnome 包）。还有一些用于生成 SQL 文件的插件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-04T06:31:03.200

MySQL Workbench 在 MacOS、Fedora、Ubuntu、Windows 上可用。

WB 5.1 专注于数据建模（取代 Mike Zinner 流行的 DBDesigner 产品）。

WB 5.2（2009 年 4 月发布）将包括对 MySQL 查询浏览器的彻底重写。

[http://forums.mysql.com/index.php?151](http://forums.mysql.com/index.php?151)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-18T02:49:53.590

查看 SQL 开发人员：[ [http://sqldeveloper.solyp.com/download/index.html]](http://sqldeveloper.solyp.com/download/index.html])

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-15T18:26:00.450

嗯，我认为 MySQL Workbench 的 Linux 版本可以在以下位置下载： [http://forums.mysql.com/read.php?3,56274,56274#msg-56274](http://forums.mysql.com/read.php?3,56274,56274#msg-56274)

您可以在此处查看预发布公告： [http://dev.mysql.com/workbench/?p=138](http://dev.mysql.com/workbench/?p=138)

它们仍处于 alpha 阶段，但从 Windows 版本来看，这将是“THE”ERD 工具。

PD：对于 ubuntu 部分，你很幸运，他们说 ubuntu 是“我们选择的 Linux 发行版”。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-15T18:46:13.833

查看 Oracle JDeveloper（免费软件）。它是纯 Java，因此可以在任何平台上运行。它适用于您可以通过 JDBC 连接的任何数据库。它构建数据库图表（以及许多其他图表——它恰好是一个完整的 Java IDE）。

它使用存储在 XML 文件中的“离线数据库对象”的概念。因此，如果您有现有的数据库对象，则首先将它们捕获到 JDeveloper 中，然后构建您的图表。如果您对脱机对象进行更改，您可以将它们“协调”回您的数据库，或者作为新对象 (DROP-REPLACE) 或作为修改 (ALTER)。

在[http://www.oracle.com/technology/software/products/jdev/index.html下载](http://www.oracle.com/technology/software/products/jdev/index.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-18T01:47:51.843

没有这样的建议，但是，

您可能希望将搜索范围扩大到 Eclipse 插件，例如[http://eclipse-erd.sourceforge.net/](http://eclipse-erd.sourceforge.net/)。

除此之外，您还需要为各种 ERD 工具付费，例如[Data Architect](http://www.thekompany.com/products/dataarchitect/)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-10-07T09:14:20.060

过去我在 Linux 上使用 Workbench 的体验很糟糕，希望它现在变得更好。

[这些天我对SchemaBank](http://schemabank.com)很满意，因为它们完全基于网络。你每个月给他们几块钱，他们托管你的图表以供私人/公共共享。支持正向/逆向工程、更改脚本等常见的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-18T13:33:56.973

作为权宜之计，我已经通过 Wine 安装了 DBDesigner（我应该先这样做），因为这是我的 Windows 开发人员正在使用的，但也会同时查看这两个。如果它不错，Eclipse 插件将是理想的。

谢谢。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-01-14T08:24:20.980

你可以试试 ORM Designer [http://www.orm-designer.com](http://www.orm-designer.com) 工具类似于 DBDesigner，但功能更多，还在日常开发中。

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2012-08-29T06:09:33.430

[您可以从LibreOffice](https://www.libreoffice.org/features/base/)试用 Base 。它可以连接到任何数据库，您可以使用可视化向导和工具轻松创建、设计和编写查询。

# unit-testing - 开发人员测试与 QA 团队测试 - 什么是正确的工作分工？

> ID：14040
> 
> 赞同：27
> 
> 时间：2008-08-18T00:19:05.360
> 
> 标签：unit-testing, testing, process, qa

在试图提倡更多的开发人员测试时，我发现了“这不是 QA 的工作吗？”的论点。被大量使用。在我看来，让 QA 团队承担所有测试职责是没有意义的，但同时 Spolsky 和其他人说你不应该使用 100 美元/小时的开发人员来做 30 美元/小时的测试人员可以做的事情. 在拥有专门的 QA 团队的公司中，其他人的经历是什么？分工应该画在哪里？

澄清：我的意思是 QA 作为验证和验证团队。开发者不应该做验证（以客户为中心的测试），但验证（功能测试）的划分点在哪里？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-08-18T01:08:58.443

这是“黑盒”测试（你知道代码应该做什么，但不知道它是如何工作的）和“白盒”测试（知道它是如何工作的会决定你如何测试它）之间的区别。当您提到质量保证时，大多数人会想到“黑盒”测试。

我在一家 QA 团队也是软件开发人员的公司工作。（如果您想猜测这家公司，这会大大缩小范围。）我知道 Joel 的观点，而我的经验使我部分不同意：出于同样的原因，“白帽”黑客更有效地发现某些类型的安全*漏洞*错误由知道如何编写代码的白盒测试人员更有效地发现（因此常见的错误是什么 - 例如，内存泄漏等资源管理问题）。

此外，由于面向 QA 的开发人员从初始设计阶段就参与了流程，理论上他们可以帮助在整个流程中推动更高质量的代码。理想情况下，对于每个在精神上专注于功能的项目开发人员，您都有一个相反的开发人员，他们在精神上专注于破坏代码（从而使其更好）。

从这个角度来看，与其说将开发人员用于测试人员，不如说是一种脱节的结对编程，其中一个开发人员强调控制质量。

另一方面，坦率地说，很多测试（比如基本的 UI 功能）并不需要那种技能。这就是乔尔的观点。

对于许多企业，我可以看到一个系统，其中编程团队为彼此的代码权衡代码审查和测试职责。例如，业务逻辑团队的成员可以不定期地巡回测试和审查 UI 团队的代码，反之亦然。这样，您就不会在全职测试上“浪费”开发人员人才，而是获得将代码暴露给（希望）专家审查和惩罚的优势。然后，一个更传统的 QA 团队可以进行“黑盒”测试。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-17T03:35:50.477

在适当的时候，质量控制团队应该能够进行安全、回归、可用性、性能、压力、安装/升级测试，而不是开发人员

开发人员应该对正在编写的代码进行单元测试，并将代码覆盖率作为最低目标。

在这两者之间，还有相当多的测试要做

*   完整的代码路径测试
*   组件测试
*   集成测试（组件）
*   系统（集成）测试
*   ETC

基于对最有意义的一些共同协议，这些责任在质量保证和开发之间混合。某些组件测试只能通过单元测试来完成，而其他组件测试则在集成测试期间“充分”测试等。

互相交谈，找出每个人最舒服的做法。这将需要一些时间，但这是非常值得的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-08-18T00:24:24.243

应该总是有一些开发人员测试。如果开发人员产生了太多的错误，那么他/她就是在浪费时间修复这些错误。重要的是，开发人员不要形成这样的态度：哦，好吧，如果我留下一个错误，它就会被抓住，我将有机会修复它。

我们试图为产生的错误保持一个阈值。如果在测试期间超过此阈值，则开发人员应对此负责。由您决定这个阈值是多少（对我们来说，它可能因项目而异）。

此外，所有单元测试均由开发人员完成。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-18T00:26:17.420

我在这个行业只工作了一年，但根据我的经验，开发人员负责对其功能进行单元测试，而 QA 负责测试场景。QA 还应该测试任何边界条件。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-18T06:46:35.080

我将我的答案粘贴在我们的内部论坛上。如果你有一个小时左右的时间……听听 Mary Poppendieck 的[基于 Speed](http://video.google.com/videoplay?docid=-5105910452864283694)的比赛视频。*受到推崇的*

*注意（由测试人员 - 我指的是 QA 团队）*

**开发人员/单元测试**________=_______ **可用性测试和探索性**测试

'================================================== ==================

**验收/客户测试**___=_____**属性测试**

想象这是一个有四个象限的正方形。:)

左半部分应该是自动化的。

*   开发人员测试验证代码是否按照编码人员的要求工作。工具：NUnit / xUnit / 任何自制工具
*   客户测试验证代码是否按照客户的要求工作。测试应该很容易编写，不应该要求客户学习 .NET/Java。否则客户不会编写这些测试（尽管他可能需要开发人员的一些帮助）。例如，Fit 使用可以用 Word 编写的 HTML 表格。工具：FIT 回归工具也在这里。记录回放。

右半部分更好地利用了优秀测试人员的时间和精力。例如，没有自动化测试可以告诉您 X 对话框是否可用。人类在这方面比机器做得更好。

*   可用性。尝试打破系统，（捕捉未处理的故障场景，输入空值）。基本上抓住了开发者遗漏的东西。
*   属性测试再次需要人类。您可以在此处检查系统所需的客户强制属性。例如性能 - 您的搜索对话框是否满足 2 秒的响应时间？安全性——有人可以侵入这个系统吗？等可用性 - 您的系统是否有 99.99% 的时间在线？

测试人员不应该花时间在左半边执行测试计划。这是开发人员的责任，以确保代码按照客户和开发人员的预期工作。测试人员实际上可以帮助客户制定验收测试。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-17T03:41:53.787

测试应该尽可能地自动化，如果测试人员正在编写添加到自动化测试套件的代码，这会将其重新投入开发工作。

此外，我发现我们在代码审查中完成了很多 QA，因为人们会建议他们希望看到的额外边缘和角落案例添加到正在审查的单元测试中（当然还有他们测试的代码） .

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-15T20:45:00.303

我的一般立场是测试人员永远不应该发现单元级别的错误（包括边界情况）。测试人员发现的错误应该在组件、集成或系统级别。当然，一开始测试人员可能会发现“快乐路径”错误和其他简单的错误，但这些异常应该用于帮助开发人员改进。

您的部分问题可能是使用每小时 100 美元的开发人员和每小时 30 美元的测试人员:}。但不管成本如何，我认为知道在开发周期早期发现的错误不可避免地会更便宜，您可能仍然可以通过让开发人员进行更多测试来节省资金。如果你有一个高薪的开发团队和黑客测试人员，你可能会发现很多明显的大问题，但是你会错过很多以后会回来困扰你的更模糊的错误。

所以，我想你的问题的答案是测试人员应该尽可能多地进行测试。你可以解雇所有的测试人员，让开发人员完成所有的测试，或者你可以雇佣一群测试人员，让开发人员检查他们想要的任何东西。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-25T23:47:23.070

有 2 种类型的 QA 团体，即那些想要维持现状的团体。我们一直这样做。他们自然会讨厌并摆脱那些试图让事情变得更有效率并因此超越他们舒适区的人。这不止一次发生在我身上。不幸的是，质量保证经理和他们的质量保证团队一样无能。因此，过去 6 年一直在管理的 QA 经理会扼杀任何自动化，会引入大量流程来证明它们的存在。这是高层管理人员的责任，要认识到这一点。有一些了解工具的技术 QA 人员。不幸的是，编程语言不是一种工具，而是一种愿景。与这些人一起工作实际上取决于他们愿意学习多少，以及管理层愿意承担多少改变事情的风险。测试的编写方式应与编写主代码的方式相同，即编写易于维护的面向对象结构。我确实认为，开发人员应该审查 QA 测试。大多数时候我发现自动化没有测试任何东西。不幸的是，qa 工作被认为是低级的，所以开发人员不会打扰。我自己很幸运，当我得到团队中一位有影响力的开发人员的支持时，他愿意向经理解释我的努力。不幸的是，它只工作了一半。恕我直言，测试人员应向开发经理报告。并且所有团队都应对 QA 测试实际测试的内容负责。我自己很幸运，当我得到团队中一位有影响力的开发人员的支持时，他愿意向经理解释我的努力。不幸的是，它只工作了一半。恕我直言，测试人员应向开发经理报告。并且所有团队都应对 QA 测试实际测试的内容负责。我自己很幸运，当我得到团队中一位有影响力的开发人员的支持时，他愿意向经理解释我的努力。不幸的是，它只工作了一半。恕我直言，测试人员应向开发经理报告。并且所有团队都应对 QA 测试实际测试的内容负责。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-18T00:32:30.280

以下是开发人员测试最有效/回报最高的一些方法：

*   开发人员在处理功能时修改共享库 - 开发人员可以深入了解 QA / 验证没有的可能副作用
*   开发人员不确定库调用的性能并编写单元测试
*   开发人员发现代码必须支持的规范中未考虑的用例路径，编写代码，更新规范，编写测试

在第三个示例中，开发人员应该执行多少测试任务是有争议的，但我认为这对开发人员来说是最有效的，因为来自多层文档和代码的所有相关细节都已经在她的短期记忆中。事后测试人员可能无法达到这种完美的风暴。

我们是在谈论 QA 还是验证？我认为 QA 包括检查清单、代码标准实施、UI 指南等。如果我们谈论的是验证，开发人员花大量时间编写和执行正式的测试用例是没有意义的，但是开发人员必须提供编写良好测试所需的所有基本原理和设计文档。

# .net - 使用附加行为防止内存泄漏

> ID：14061
> 
> 赞同：11
> 
> 时间：2008-08-18T00:49:33.957
> 
> 标签：.net, wpf, memory

我在我的 WPF 应用程序中创建了一个“附加行为”，它允许我处理 Enter 按键并移动到下一个控件。我称之为 EnterKeyTraversal.IsEnabled，你可以在我的博客上看到[代码](http://www.madprops.org/blog/enter-to-tab-as-an-attached-property/)。

我现在主要担心的是我可能有内存泄漏，因为我正在处理 UIElements 上的 PreviewKeyDown 事件并且从未明确地“取消挂钩”该事件。

防止这种泄漏的最佳方法是什么（如果确实有的话）？我是否应该保留我正在管理的元素的列表，并在 Application.Exit 事件中解开 PreviewKeyDown 事件？有没有人在他们自己的 WPF 应用程序中使用附加行为取得成功，并提出了一个优雅的内存管理解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-18T08:39:35.507

我不同意丹尼蓝精灵

一些 WPF 布局对象可能会阻塞您的内存，并且在没有进行垃圾回收时使您的应用程序变得非常缓慢。所以我发现单词的选择是正确的，你正在将内存泄漏给你不再使用的对象。您希望这些项目被垃圾收集，但事实并非如此，因为某处存在引用（在本例中为来自事件处理程序）。

现在寻求真正的答案:)

我建议您阅读[MSDN 上的这篇 WPF 性能文章](http://msdn.microsoft.com/en-us/library/bb613565.aspx)

> 不删除对象上的事件处理程序可能会使对象保持活动状态
> 
> 对象传递给其事件的委托实际上是对该对象的引用。因此，事件处理程序可以使对象保持比预期更长的时间。在对已注册侦听对象事件的对象执行清理时，必须在释放对象之前删除该委托。使不需要的对象保持活动状态会增加应用程序的内存使用量。当对象是逻辑树或可视树的根时尤其如此。

他们建议您研究[弱事件模式](http://msdn.microsoft.com/en-us/library/aa970850.aspx)

另一种解决方案是在完成对象后删除事件处理程序。但我知道，对于附加属性，这一点可能并不总是很清楚..

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-05-29T18:56:32.340

撇开哲学辩论不谈，在查看 OP 的博客文章时，我在这里看不到任何泄漏：

```
ue.PreviewKeyDown += ue_PreviewKeyDown; 
```

硬引用`ue_PreviewKeyDown`存储在`ue.PreviewKeyDown`.

`ue_PreviewKeyDown`是一种`STATIC`方法，不能是`GCed`。

没有硬引用`ue`被存储，所以没有什么能阻止它成为`GCed`.

所以...泄漏在哪里？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-18T14:44:49.763

是的，我知道在过去，内存泄漏是一个完全不同的主题。但是对于托管代码，内存泄漏一词的新含义可能更合适......

微软甚至承认这是内存泄漏：

> 为什么要实现 WeakEvent 模式？
> 
> 监听事件可能导致内存泄漏。侦听事件的典型技术是使用特定于语言的语法，将处理程序附加到源上的事件。例如，在 C# 中，该语法是：source.SomeEvent += new SomeEventHandler(MyEventHandler)。
> 
> 这种技术创建了从事件源到事件侦听器的强引用。通常，为侦听器附加事件处理程序会导致侦听器具有受源对象生存期影响的对象生存期（除非显式删除事件处理程序）。但在某些情况下，您可能希望侦听器的对象生命周期仅受其他因素控制，例如它当前是否属于应用程序的可视化树，而不是由源的生命周期控制。每当源对象的生命周期超出侦听器的对象生命周期时，正常的事件模式就会导致内存泄漏：侦听器的存活时间比预期的要长。

我们将 WPF 用于具有大型 ToolWindows 的客户端应用程序，可以拖放，所有漂亮的东西，并且都与 XBAP 兼容。但是我们遇到了一些没有垃圾收集的 ToolWindows 的相同问题。这是由于事实是它仍然依赖于事件侦听器。现在，当您关闭窗口并关闭应用程序时，这可能不是问题。但是，如果您正在使用大量命令创建非常大的 ToolWindows，并且所有这些命令都会一遍又一遍地重新评估，并且人们必须整天使用您的应用程序.. 我可以告诉你.. 它真的会堵塞你的记忆和您的应用程序的响应时间..

此外，我发现向我的经理解释我们有内存泄漏要容易得多，而不是向他解释某些对象由于某些需要清理的事件而没有被垃圾收集；）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-18T01:51:27.593

@Nick是的，附加行为的事情是，根据定义，它们与您正在处理其事件的元素不在同一个对象中。

我认为答案在于以某种方式使用 Wea​​kReference，但我还没有看到任何简单的代码示例来向我解释它。:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-30T15:33:53.160

为了解释我对 John Fenton 帖子的评论，这是我的回答。让我们看看下面的例子：

```
class Program
{
    static void Main(string[] args)
    {
        var a = new A();
        var b = new B();

        a.Clicked += b.HandleClicked;
        //a.Clicked += B.StaticHandleClicked;
        //A.StaticClicked += b.HandleClicked;

        var weakA = new WeakReference(a);
        var weakB = new WeakReference(b);

        a = null;
        //b = null;

        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();

        Console.WriteLine("a is alive: " + weakA.IsAlive);
        Console.WriteLine("b is alive: " + weakB.IsAlive);
        Console.ReadKey();
    }

}

class A
{
    public event EventHandler Clicked;
    public static event EventHandler StaticClicked;
}

class B
{
    public void HandleClicked(object sender, EventArgs e)
    {
    }

    public static void StaticHandleClicked(object sender, EventArgs e)
    {
    }
} 
```

如果你有

```
a.Clicked += b.HandleClicked; 
```

并且仅将 b 设置为 null 两个引用 weakA 和 weakB 都保持活动状态！如果您仅将 a 设置为 null b 保持活动状态但 a 不存在（这证明 John Fenton 错误地指出硬引用存储在事件提供程序中 - 在本例中为 a）。

这导致我得出一个错误的结论，即

```
a.Clicked += B.StaticHandleClicked; 
```

会导致泄漏，因为我虽然 a 的实例将由静态处理程序保留。事实并非如此（测试我的程序）。在静态事件处理程序或事件的情况下，情况正好相反。如果你写

```
A.StaticClicked += b.HandleClicked; 
```

将保留对 b 的引用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-18T08:48:25.473

您是否考虑过实施“弱事件模式”而不是常规事件？

1.  [WPF 中的弱事件模式](http://shevaspace.spaces.live.com/blog/cns!FD9A0F1F8DD06954!471.entry)
2.  [弱事件模式 (MSDN)](http://msdn.microsoft.com/en-us/library/aa970850.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T00:58:04.283

确保事件引用元素在它们引用的对象中，例如表单控件中的文本框。或者，如果这无法避免。在全局助手类上创建一个静态事件，然后监视全局助手类的事件。如果这两个步骤无法完成，请尝试使用 Wea​​kReference，它们通常非常适合这些情况，但它们会带来开销。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-18T03:40:18.403

我刚读了你的博文，我认为你得到了一些误导性的建议，马特。如果这里确实存在*内存*泄漏*，*那么这是 .NET Framework 中的错误，而不是您必须在代码中修复的问题。

我认为您（以及您博客上的海报）实际上在这里谈论的实际上并不是泄漏，而是持续消耗内存。那不是一回事。需要明确的是，泄漏内存是由程序保留，然后被放弃（即，指针悬空），随后无法释放的内存。由于内存是在 .NET 中管理的，这在理论上是不可能的。但是，程序可以保留不断增加的内存量，而不允许对它的引用超出范围（并有资格进行垃圾收集）；但是该内存没有泄漏。程序退出后，GC 会将其返回给系统。

所以。要回答您的问题，我认为您在这里实际上没有问题。您当然没有内存泄漏，并且从您的代码来看，我认为您不必担心，就内存消耗而言。只要您确保在没有取消分配的情况下不会重复分配该事件处理程序（即，您要么只设置一次，要么每次分配时只删除一次），这你似乎在做，你的代码应该没问题。

这似乎是您博客上的发帖人试图给您的建议，但他使用了令人震惊的工作“泄漏”，这是一个可怕的词，但许多程序员已经忘记了托管世界的真正含义；它不适用于这里。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-18T14:27:48.127

@大角星：

> ...当它们没有被垃圾收集时，阻塞你的内存并使你的应用程序非常慢。

这很明显，我不反对。然而：

> ...您正在向不再使用的对象泄漏内存...因为有对它们的引用。

“内存被分配给一个程序，并且该程序随后由于程序逻辑缺陷而失去了访问它的能力”（维基百科，“内存泄漏”）

如果存在对您的程序可以访问的对象的活动引用，那么*根据定义*，它不会泄漏内存。泄漏意味着该对象不再可访问（您或操作系统/框架），并且*在操作系统当前会话的生命周期内*不会被释放。这不是这里的情况。

（对不起，我是一个语义纳粹......也许我有点老派，但泄漏有一个非常具体的含义。现在人们倾向于使用“内存泄漏”来表示任何消耗超过他们想要的 2KB 内存的东西。 ..)

但是当然，如​​果你不释放事件处理程序，它所附加的对象将不会被释放，直到你的进程的内存被垃圾收集器在关闭时回收。但这种行为完全是意料之中的，与您似乎暗示的相反。如果您希望一个对象被回收，那么您需要删除任何可能使引用保持活动状态的东西，包括事件处理程序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-18T15:20:39.800

真真切切，

你当然是对的。但是有新一代的程序员诞生在这个世界上，他们永远不会接触非托管代码，我相信语言定义会一遍又一遍地重新发明自己。WPF 中的内存泄漏与 C/Cpp 不同。

或者当然对我的经理来说，我将其称为内存泄漏。对我的同事，我将其称为性能问题！

提到马特的问题，这可能是您可能需要解决的性能问题。如果您只使用几个屏幕并将这些屏幕控件设为单例，您可能根本看不到这个问题；）。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2008-08-18T15:09:55.577

嗯（经理位）我当然可以理解和同情。

但无论微软如何称呼它，我认为“新”定义并不合适。这很复杂，因为我们并不生活在一个 100% 托管的世界中（尽管微软喜欢假装我们这样做，但微软本身并不生活在这样一个世界中）。当您说内存泄漏时，您可能意味着程序消耗了太多内存（这是用户的定义），或者在退出之前不会释放托管引用（如此处），或者未正确清理非托管引用up（这将是真正的内存泄漏），或者从托管代码调用的非托管代码正在泄漏内存（另一个真正的泄漏）。

在这种情况下，“内存泄漏”的含义很明显，即使我们不够精确。但是与某些人交谈会变得非常乏味，他们称每一次过度消费或未能收集到内存泄漏；当这些人是程序员时令人沮丧，他们应该知道得更好。我认为，技术术语具有明确的含义很重要。当他们这样做时，调试会容易得多。

反正。不要打算把它变成一个关于语言的空想的讨论。只是说...

# unit-testing - 自动测试游戏

> ID：14087
> 
> 赞同：31
> 
> 时间：2008-08-18T01:44:57.153
> 
> 标签：unit-testing, automated-tests

**问题**

您将如何将自动化测试添加到游戏中？

我相信您可以对游戏引擎的许多功能（网络、对象创建、内存管理等）进行单元测试，但是是否可以自动测试实际游戏本身？

我不是在谈论游戏元素（比如 Protoss 会在地图 X 中击败 Zerg），而是在谈论游戏和引擎之间的交互。

**介绍**

在游戏开发中，引擎只是游戏的一个平台。您可以将游戏引擎视为操作系统，将游戏视为操作系统将运行的软件。游戏可以是脚本的集合或游戏引擎中的实际子程序。

**可能的答案**

我的想法是这样的：

您将需要一个确定性的引擎。这意味着给定一组输入，输出将完全相同。这将包括使用相同输入播种的随机生成器。

然后，创建一个包含化身/用户可以与之交互的几个对象的准系统级别。从小处着手，然后随着更多交互的发展，将对象添加到关卡中。

创建一个遵循路径的脚本（测试寻路）并与不同的对象交互（存储结果或预期行为）。该脚本将是您的自动化测试。一段时间后（比如一周），运行脚本和引擎的单元测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-18T05:59:19.853

[Games From Within 上](http://gamesfromwithin.com)的[这篇文章](http://gamesfromwithin.com/?p=97)可能是相关的/有趣的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-02T06:07:32.643

Riot Games 有[一篇](https://engineering.riotgames.com/news/automated-testing-league-legends)关于对多人在线 RTS 游戏英雄联盟 (LoL) 使用自动化测试的文章。

据开发者称，游戏代码和游戏平衡每天都有很多变化。他们构建了一个 Python 测试框架，它基本上是一个更简单的游戏客户端，它将命令发送到运行 LoL 游戏服务器实例的持续集成服务器。然后服务器向测试框架发送命令的效果，允许测试响应。

该框架提供了一个事件队列，用于记录特定时间点的事件、数据和效果。文章称其为“快照”。

这篇文章描述了一个法术单元测试的例子：

* * *

**设置**
1\. 赋予角色能力。
2\. 在中路（地图上的一个位置）生成一个敌方角色。
3\. 在中路生成一个小兵。（在英雄联盟的背景下，小兵是弱的不可控制的角色，是每个团队的军队的一部分。他们基本上是经典饲料，是敌方团队的经验和金币来源。但如果不加以控制，他们可以压倒对方team) 4\. 将角色传送到中路。

**执行**
1\. 拍摄所有变量的快照（例如玩家、敌人和普通角色的当前生命）。
2\. 施法。
3\. 激活对敌方角色的法术效果（例如，有些法术会在击中时触发）。
4\. 重置法术的冷却时间，使其可以立即再次施放。
5\. 施法。
6\. 激活法术对小兵的影响（在英雄联盟中，大多数法术在小兵上使用时都有不同的计算）。7\. 拍摄另一个快照。

**验证**
从第一个快照开始，重播事件，并断言预期结果（从游戏设计师的角度来看）是正确的。可以验证的事件示例包括： 伤害在法术伤害范围内（LoL 使用随机数来为攻击提供变化），与玩家角色和小兵相比，伤害得到了适当的抵抗，并且法术在范围内施放其有效范围。

* * *

文章显示，在普通游戏客户端查看测试服务器时，可以提取出测试视频。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T21:02:56.903

[另一个答案中已经提到了来自内部](http://www.gamesfromwithin.com/)[~~的两场游戏的力量的~~](http://www.gamesfromwithin.com/)一篇文章，但我建议阅读那里的所有内容（或几乎所有内容），因为它们都写得很好并且直接适用于游戏开发。[关于 Assert](http://gamesfromwithin.com/asserting-oneself)的文章特别好。您还可以访问他们以前的网站[Games From Within](http://www.gamesfromwithin.com/)，其中有很多关于[测试驱动开发](http://www.gamesfromwithin.com/articles/cat_testdriven_development.html)的文章，这是将单元测试发挥到极致。

两个人的力量是实现 UnitCpp 的人，这是一个非常受好评的单元测试框架。 [就个人而言，我更喜欢 WinUnit](https://stackoverflow.com/questions/3150/how-to-set-up-unit-testing-for-visual-studio-c#64482)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-18T04:24:39.187

> 在开发的游戏性方面，值是如此随机，以至于测试绝对值将是一个牵强的想法

但我们可以测试确定性值。例如，一个单元测试可能让 Guybrush Threepwood 走向一扇门（寻路），打开门（使用命令），因为他的库存中没有钥匙而失败（反馈），选择门钥匙（寻路 + 库存管理），然后终于开门。

所有这些路径都是确定性的。通过这个单元测试，我可以重构内存管理器，如果它以某种方式破坏了库存管理例程，单元测试就会失败。

这只是游戏中单元测试的一种想法。我很想知道其他想法，因此，这篇文章的动机。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-18T07:18:24.233

我曾经做过与您的想法类似的事情，并且非常成功，尽管我怀疑它实际上更像是系统测试而不是单元测试。正如您所建议的，您的随机数生成器必须以相同的值作为种子，并且每次都必须产生相同的序列。游戏以 50hz 周期运行，因此时间不是问题。我有一个可以记录鼠标点击和位置的系统，并使用它来手动生成一个“脚本”，该脚本可以被重放以产生相同的结果。通过消除时间延迟并关闭图形生成，可以在几秒钟内复制一个小时的游戏玩法。最大的问题是对游戏设计的更改会使脚本无效。

如果您的准系统房间包含独立于一般游戏玩法的逻辑，那么它可以很好地工作。引擎可以在没有任何 ui 的情况下启动，并在初始化完成后立即启动脚本。一路上的崩溃测试会很简单，但更复杂的测试（例如将字符留在正确位置）会更复杂。如果脚本的记录足够简单，它们在我的系统中，那么它们可以很容易地更新，并且可以非常快速地设置用于测试特殊行为的特殊脚本。我的系统还有一个额外的优势，那就是它可以在游戏测试期间使用，并且记录的事件的确切顺序可以更容易地修复错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-18T08:49:19.497

如果您正在测试渲染引擎，我想您可以渲染特定的测试场景，进行屏幕截图并将它们与参考测试渲染进行比较。通过这种方式，您可以直观地检测引擎的变化是否会破坏任何东西。您可以为声音引擎甚至动画（通过比较一系列帧）编写类似的测试。

如果您想测试游戏逻辑或场景进度，您可以通过测试脚本变量的各种条件来实现（假设您使用脚本来实现大部分场景和故事方面）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-15T13:57:05.727

如果您使用的是 XNA（这个想法当然可以外推到其他框架），您可以使用游戏内单元测试框架，让您在单元测试中访问游戏的状态。一个这样的框架是[Scurvy.Test](http://www.codeplex.com/ScurvyTest) :-)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-07-29T21:24:03.127

[http://flea.sourceforge.net/gameTestServer.pdf](http://flea.sourceforge.net/gameTestServer.pdf)

这是关于在游戏中实现成熟的功能测试器的有趣讨论。

术语“单元测试”意味着正在测试“单元”。这是一回事。如果您正在执行更高级别的测试（例如同时进行多个系统），通常这称为功能测试。可以对游戏的大部分内容进行单元测试，但是您不能真正为了好玩而进行测试。

只要您的测试可以是模糊的，确定性就不是必需的。例如，“角色是否受伤”而不是“角色是否损失了 14.7 点生命值。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-08-10T14:16:55.123

我已经写了一篇关于该主题的论文 - [http://download.springer.com/static/pdf/722/art%253A10.7603%252Fs40601-013-0010-4.pdf?auth66=1407852969_87bc2e71ad5228b36738f0237084ebe5&ext=.pdf](http://download.springer.com/static/pdf/722/art%253A10.7603%252Fs40601-013-0010-4.pdf?auth66=1407852969_87bc2e71ad5228b36738f0237084ebe5&ext=.pdf)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-18T03:34:25.653

这并没有真正回答你的问题，但我正在听[微软的 Pex](http://research.microsoft.com/pex/)播客，它与你提出的解决方案做了类似的事情，当我听它时，我记得我想看看是否真的很有趣它将能够测试游戏。我不知道它是否能具体帮助您，但也许您可以看看他们使用的一些想法并将其应用于您的单元测试。

# evaluation - 您将如何评估程序员？

> ID：14106
> 
> 赞同：10
> 
> 时间：2008-08-18T02:29:34.177
> 
> 标签：evaluation

几周前，我被指派评估我们所有的程序员。我对此感到非常不舒服，因为我是那个教每个人商店编程语言的人（他们都是大学毕业时不知道这种语言的，幸运的是，我非常精通它。）。在评价上，我对他们的表现（满分）非常有偏见。

我很高兴我们的编程商店不需要平均性能水平，但我听说过需要平均性能水平的商店的恐怖故事。

我的问题如下：

1.  作为程序员，你希望看到哪些评估问题？
2.  作为经理，您希望看到哪些评估问题？
3.  作为评估者，您如何防止评估中的偏见？
4.  我很想删除评估测试。进行评估测试有什么好处吗？有什么缺点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-08-18T03:34:29.817

完成任务实际上是评估开发人员所需的全部内容。之后，您查看开发人员生成的质量。他们是否编写单元测试并相信测试并对他们生成的代码负责？他们是否主动修复错误而不被分配？他们对编码充满热情吗？他们是否总是不断地学习，试图找到更好的方法来完成任务或改进流程？这些问题几乎就是我如何判断我直属的开发人员的方式。如果他们不直接隶属于您，并且您不是他们的直接下属，那么您真的不应该评估他们。如果你被指派评估那些不在你手下的程序员，那么你需要主动回答上述关于他们的问题，这可能很难。

您不能删除评估测试。我知道它有时会变得乏味，但我真的很喜欢这样做，这对于您正在评估的开发人员来说是无价的。你需要成为一个关心你的开发人员如何做的经理。你是他们的直接反映，因为他们是你。我总是留给开发人员的一个问题是让他们评估我。评估需要是一条两车道的道路。

我还必须评估一个千篇一律的问题列表，我会这样做，但我总是添加上面的内容，并在我与开发人员一对一的时候尝试让评估变得有趣和学习练习，这都是关于您正在审查的开发人员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-18T03:06:12.917

我首先会考虑的不一定是代码行数，而是人们添加的代码的价值，当然这反映了他们被分配要做的事情。有人告诉维护代码与构建新应用程序是非常不同的。还要考虑人们如何使用新技术使代码相关和更新？该人创建的代码的可维护性如何？他们做事的方式是否符合团队其他成员的逻辑和理解？他们的编码是改进了应用程序还是破坏了它？最后同样重要的是，他们的编码是否会随着时间的推移而改进？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T02:38:16.797

获得每个人的意见怎么样？与一个人一起工作的每个人都会对那个人有独特的洞察力。一个人可能会认为某人是个懒鬼，而另一个人则认为他们在开始编码之前花费了大量时间进行计划，等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-18T03:05:24.760

> 获得每个人的意见怎么样？与一个人一起工作的每个人都会对那个人有独特的洞察力。

如果 (1) 评估是在敞开的门下进行的，并且 (2) 你曾与那个人在一个项目上甚至在同一个模块上工作过，那将是可行的。作为评估他们的人，我无法评判那些我没有直接合作过的程序员。

> 一个人可能会认为某人是个懒鬼，而另一个人则认为他们在开始编码之前花了很多时间进行计划

不幸的是，这是有争议的。一个看起来像个懒鬼的人可能陷入了沉思，也可能没有。一个花很长时间计划的人，一定是一个糟糕的程序员吗？

我相信一个好的评估问题将能够回答这个问题。

# perl - 如何在 Perl 中测试 STDIN 而不会阻塞？

> ID：14118
> 
> 赞同：13
> 
> 时间：2008-08-18T03:02:10.663
> 
> 标签：perl, stdin

我正在编写我的第一个 Perl 应用程序——一个与 Arduino 微控制器对话的 AOL Instant Messenger 机器人，后者反过来控制一个伺服系统，该伺服系统将按下我们系统管理员服务器上的电源按钮，该服务器每 28 小时左右随机冻结一次。

我已经完成了所有困难的事情，我只是想添加最后一点代码来打破主循环并在用户键入“退出”时退出 AIM。

问题是，如果我尝试在主程序循环中从 STDIN 读取数据，它会阻止进程直到输入输入，从而使机器人处于非活动状态。我在阅读之前尝试过测试 EOF，但没有骰子...... EOF 总是返回 false。

下面是我正在使用的一些示例代码：

```
while(1) {
    $oscar->do_one_loop();

# Poll to see if any arduino data is coming in over serial port
    my $char = $port->lookfor();

# If we get data from arduino, then print it
    if ($char) {
        print "" . $char ;
    }

    # reading STDIN blocks until input is received... AAARG!
    my $a = <STDIN>;
    print $a;
    if($a eq "exit" || $a eq "quit" || $a eq 'c' || $a eq 'q') {last;}
}

print "Signing off... ";

$oscar->signoff();
print "Done\n";
print "Closing serial port... ";
$port->close() || warn "close failed";
print "Done\n"; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-08-18T03:12:06.150

Perl 内置是[`select()`](http://perldoc.perl.org/functions/select.html)，它是系统调用的传递`select()`，但我建议理智的人使用[`IO::Select`](http://search.cpan.org/dist/IO/lib/IO/Select.pm)。

代码示例：

```
#!/usr/bin/perl

use IO::Select;

$s = IO::Select->new();
$s->add(\*STDIN);

while (++$i) {
  print "Hiya $i!\n";
  sleep(5);
  if ($s->can_read(.5)) {
    chomp($foo = <STDIN>);
    print "Got '$foo' from STDIN\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-21T21:35:56.237

我发现只要 STDOUT 关闭，[IO::Select就可以正常工作，例如当管道中的上游进程退出时，或者输入来自文件时。](http://search.cpan.org/dist/IO/lib/IO/Select.pm)但是，如果输出正在进行（例如来自“tail -f”），则`<STDIN>`不会显示缓冲的任何部分数据。相反，使用无缓冲的[sysread](https://perldoc.perl.org/functions/sysread.html)：

```
#!/usr/bin/perl
use IO::Select;
$s = IO::Select->new(\*STDIN);

while (++$i) {
        if ($s->can_read(2)) {
                last unless defined($foo=get_unbuf_line());
                print "Got '$foo'\n";
        }
}

sub get_unbuf_line {
        my $line="";
        while (sysread(STDIN, my $nextbyte, 1)) {
                return $line if $nextbyte eq "\n";
                $line .= $nextbyte;
        }
        return(undef);
} 
```

# c++ - 如何创建 C++ Boost 无向图并以深度优先搜索 (DFS) 顺序遍历它？

> ID：14126
> 
> 赞同：31
> 
> 时间：2008-08-18T03:15:35.987
> 
> 标签：c++, boost-graph

如何创建 C++ Boost 无向图并以深度优先搜索 (DFS) 顺序遍历它？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-08-18T03:17:39.603

```
// Boost DFS example on an undirected graph.
// Create a sample graph, traverse its nodes
// in DFS order and print out their values.

#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/depth_first_search.hpp>
#include <iostream>
using namespace std;

typedef boost::adjacency_list<boost::listS, boost::vecS, boost::undirectedS> MyGraph;
typedef boost::graph_traits<MyGraph>::vertex_descriptor MyVertex;

class MyVisitor : public boost::default_dfs_visitor
{
public:
  void discover_vertex(MyVertex v, const MyGraph& g) const
  {
    cerr << v << endl;
    return;
  }
};

int main()
{
  MyGraph g;
  boost::add_edge(0, 1, g);
  boost::add_edge(0, 2, g);
  boost::add_edge(1, 2, g);
  boost::add_edge(1, 3, g);

  MyVisitor vis;
  boost::depth_first_search(g, boost::visitor(vis));

  return 0;
} 
```

# svn - 颠覆和网络开发

> ID：14135
> 
> 赞同：9
> 
> 时间：2008-08-18T03:33:13.987
> 
> 标签：svn, ftp

我正在将 Subversion 引入我们的网上商店。我希望通过 FTP 将签入的文件上传到服务器（并且当它们使用 Subversion 时，通过 SFTP）。这些文件被发送到发布候选页面以进行测试。可以调用脚本将文件移动到生产环境中。

我的问题是：如何通过 Subversion 将文件传输到服务器？是否有我可以添加的脚本在文件签入时进行传输？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-18T03:54:54.020

您想构建一个使用 SubVersion 中的提交后挂钩的脚本。您可以将脚本从存储库导出，然后通过 FTP 传输到服务器，或者您可以从存储库签出到服务器上的工作目录，然后在提交后挂钩脚本中的服务器工作目录上调用“svn update” .

[Subversion 常见问题解答中有更多信息](http://subversion.tigris.org/faq.html#website-auto-update)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-18T03:57:18.930

如果您对服务器具有 shell 访问权限，并且在其上安装了 SVN（或能够安装 SVN），那么您最好的选择可能就是完全绕过 FTP。

我们如何部署我们的应用程序是（简化的）

*   开发人员编写代码并检入主干
*   定期，当主干稳定时，我们将其快照作为标签
*   在服务器上，svn checkout 标签

如果需要对服务器进行任何更改（或直接在实时服务器本身上），使用颠覆来同步代码是微不足道的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-18T04:56:25.347

我认为您可能应该使用 svn export 而不是 svn checkout 进行部署，这样您就不会让那些 .svn 目录混淆您的生产备份工作。svn export 是一个“干净”的结帐。

我还会创建一个脚本来为你处理这一切。根据代码的结构，您通常可以对目录进行版本控制，只需将符号链接更新到最新版本，这使得回滚更容易。

您甚至可以使用[Capistrano](http://www.capify.org/)之类的工具来自动化部署。不过，我支持 CruiseControl 的建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-18T03:36:43.260

我认为您正在寻找的是与自动构建脚本集成的东西。我使用[CruiseControl](http://cruisecontrol.sourceforge.net/)对 ASP.Net 应用程序进行了类似的操作。我不知道你的确切要求，但我敢打赌你可以让它做你想做的事。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-18T03:50:11.970

提交后脚本对此很有用。基本上每次提交都会在事件之后调用一个脚本，您可以使用该脚本将 svn 导出到任何地方。

一篇有趣的[文章](http://arstechnica.com/articles/columns/linux/linux-20050406.ars)展示了如何做到这一点，[这](http://svnbook.red-bean.com/en/1.0/svn-book.html#svn-ch-5-sect-2.1)展示了挂钩脚本如何与 subversion 一起使用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-18T03:52:28.783

您可能可以使用 SVN“钩子”来执行此操作。基本上，您可以将服务器配置为在每次签入之前或之后运行脚本。[这是在线书籍](http://svnbook.red-bean.com/nightly/en/svn.reposadmin.create.html)相关部分的直接链接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T04:13:18.087

我赞同 Orion 的想法。如果您拥有对服务器的 shell 访问权限，那么使用 Subversion 本身作为部署工具实际上非常容易。只需确保设置了一些 Web 服务器规则，以免意外暴露 .svn 目录。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-04T18:52:38.123

svn2web 将在每次提交时从 subversion 存储库 ftp 或 scp 文件到 Web 服务器。有关详细信息，请参阅[SourceForge](http://svn2web.sourceforge.net/)项目。

# opengl - 在 wxWidgets 中启用 OpenGL

> ID：14138
> 
> 赞同：2
> 
> 时间：2008-08-18T03:34:30.723
> 
> 标签：opengl, wxwidgets

我安装了 wxWidgets 源代码，对其进行了编译，并将由此获得的库与我的应用程序代码链接起来。现在我需要在我的 wxWidgets 应用程序中使用 OpenGL。如何启用此功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T14:17:45.560

## 使用项目文件在 Windows 上构建：

假设 $(WXWIDGETSROOT) 是 wxWidgets 安装的根目录。

1.  打开文件 $(WXWIDGETSROOT)\include\wx\msw\setup.h
2.  搜索`#define`for `wxUSE_GLCANVAS`。
3.  将其值从 0 更改为 1。
4.  重新编译库。

## 在 Linux 和其他`./configure`基于平台的平台上构建：

只需使用`./configure --with-opengl`

（其他人给出的两个部分答案的混搭答案）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-30T14:14:58.177

如果你使用`configure`构建 wxWidgets，你只需要添加`--with-opengl`到你的命令行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-16T02:12:48.490

只是补充一点......如果你在linux上，你需要在运行configure时查看日志。如果它找不到 opengl 开发包，那么它将关闭 opengl，并显示一行很容易错过的警告。

像这样运行它以更清楚您实际上缺少哪些开发库（看起来 --with-opengl 在 3.0.0 和可能的早期版本的 wxwidgets 中默认启用，但包含我怀疑）。

```
./configure --with-opengl > configure.log 
```

一旦 configure 可以找到您认为要使用的所有开发库，您需要重新构建 wxwidgets：

```
make
sudo make install 
```

我必须在 linux mint 上安装这些，以使 wxwidget 的配置在 opengl 方面感到满意（并且也应该适用于 ubuntu）以获得我需要的开发库。

```
sudo apt-get install mesa-common-dev
sudo apt-get install freeglut3-dev 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-08-18T03:37:03.603

（假设 $(WX_WIDGETS_ROOT) 是 wxWidgets 安装的根目录。）

1.  打开文件 $(WX_WIDGETS_ROOT)\include\wx\msw\setup.h
2.  搜索并找到选项 wxUSE_GLCANVAS。将其值从 0 更改为 1。
3.  重新编译库。

# windows - 基于 Windows 的文本编辑器

> ID：14155
> 
> 赞同：32
> 
> 时间：2008-08-18T04:03:04.660
> 
> 标签：windows, editor

除了 Notepad++，你用什么文本编辑器在 Windows 中编程？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2008-08-19T00:25:28.653

再次投票给**gvim** ( [about](http://www.vim.org/about.php) , [download](http://www.vim.org/download.php#pc) )。我想一旦你学会了按键来控制它，你就不会想使用其他任何东西了。

此外，还有一个额外的好处是可以在几乎任何平台上使用它，包括漂亮的 Windows 端口。

![替代文字](../Images/be8e765b11be5158a87ac168d066480c.png)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-08-05T12:52:28.247

[崇高的文字](http://www.sublimetext.com)是惊人的。

![替代文字](../Images/4a3dc495783afb36466ed724c3ecfc17.png)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2008-08-18T04:20:59.663

[GNU Emacs](http://www.gnu.org/software/emacs/windows/ntemacs.html)是我首选的文本编辑器，它在 Windows 上运行良好（复制/粘贴实际上可以按预期工作）它也可以在所有主要平台上使用，因此如果您像我倾向于做的那样在操作系统上跳转，您可以重复使用您的知识。

我也很喜欢[JEdit](http://www.jedit.org/)。这是一个很好的代码和随机文本的文本编辑器。它是记事本和 Eclipse 之间的一个很好的中间地带。

如果您想要比记事本高出一步的东西来进行快速、高效的编辑，我会推荐[Notepad2](http://www.flos-freeware.ch/notepad2.html)。[当您用此版本替换](http://blogs.msdn.com/omars/archive/2004/04/30/124093.aspx)标准记事本时，它非常有用。您继续快速启动，但语法突出显示是一个真正的福音。我在每台 Windows 机器上都用 Notepad2 替换了记事本。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2008-08-18T05:37:40.973

我用[SciTE](http://www.scintilla.org/SciTE.html)

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2008-08-18T04:35:46.340

[UltraEdit](http://www.ultraedit.com/)是我的第二个家。它是一个很棒的通用文本编辑器。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2008-08-18T08:08:19.673

我是 Notepad2 的忠实粉丝——它太快了！

对于我来说快速简单的文本编辑，它接近完美。它具有 Xml 和代码的语法着色，并且可以轻松扩展。

我们使用 Dreamweaver 和 Visual Studio 进行更大的编码工作。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2008-08-18T04:07:42.997

[Textpad](http://www.textpad.com/)是我将用于随机文本编辑（检查 HTML 源代码、快速黑客、脚本等）的工具。

对于实际的 Java 开发，它一直是 Eclipse，尽管人们告诉我 IDEA 是猫的睡衣。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2008-08-18T04:32:12.650

[电子文本编辑器](http://e-texteditor.com/)

有点问题，但由于它使用 Textmate 捆绑包格式（和捆绑包），因此我使用过的任何其他编辑器都胜过它 - 也会定期更新。我每天都使用它，很乐意再次购买。

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2008-08-18T05:11:53.240

请注意，我主要使用 C/C++ 工作。对于 C/C++ 代码，我使用**Visual C++ Express Edition**或**Visual Studio Professional**。对于我正在学习的一点点 Python，我使用**[PythonWin](http://www.python.org/download/windows/)** IDE 中的编辑器。（主要是因为它完成了一些代码完成。）对于其他一切，我使用**[GViM](http://www.vim.org/)**。

小费：

> 在 Windows 上安装 ViM 后，如果您右键单击资源管理器中的任何文件，您会在右键菜单中看到**使用 Vim 编辑选项。**这对于查看和编辑*各种文本文件*非常有用，而无需担心特定的编辑器。GViM 可以理解大多数格式，因此可以使用语法着色来显示它们。习惯这样做，很快 GViM 就会成为你在 Windows 上事实上的通用文本编辑器。（甚至更换记事本。）

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2008-08-22T02:18:43.187

[Thej 已经推荐了它](https://stackoverflow.com/questions/14155/text-editors#14219)，但要详细说明：

[**SciTE**](http://scintilla.sourceforge.net/SciTEDownload.html) - 免费，具有多种语言的预设着色，并且它是多平台（Windows 和 Linux）且轻量级的。

[替代文字 http://scitedebug.luaforge.net/scite-debug.png](http://scitedebug.luaforge.net/scite-debug.png)

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2008-08-18T04:13:48.053

gvim。我还将 Dreamweaver 用于 Web 内容。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2008-08-24T22:45:09.527

# 记事本2

*   html、c#、javascript、css、xml、sql、python、bat 的语法高亮显示
*   矩形选择，正则表达式
*   缩进，背景/前景自定义

缺点：没有选项卡式窗口。

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2008-08-22T03:02:27.827

我会回应其他支持 Emacs 的人。我每天至少在 OS X、Windows 和 Linux 上编程。在所有三个系统上使用相同的 IDE 极大地提高了我的工作效率。也就是说，GNU Emacs 的香草版本......嗯，它很烂。我强烈建议您尝试[EmacsW32](http://ourcomments.org/Emacs/EmacsW32.html)反而。与 Aquamacs 制作对 OS X 友好的 Emacs 版本的方式很相似，EmacsW32 项目使 Emacs 开箱即用，就像 Windows 文本编辑器一样工作。请注意，Emacs 的所有功能（和复杂性）都在那里，但是如果您还没有建立肌肉记忆，那么没有理由不使用 Ctrl-C/X/V 作为复制/剪切/粘贴而不是 Mw /Ck/Cy 只是为了酷。EmacsW32 还带来了与 Windows 兼容的打开/保存对话框、健全的 CRLF 文件处理等等。如果您曾经渴望尝试 Emacs，请试一试。你不会后悔的。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2008-08-22T22:00:06.733

我知道这是我自己的问题，但我遇到了这个文本编辑器[Sublime Text](http://www.sublimetext.com/)并认为它很可爱。它有一些我以前从未见过的功能。它具有多行选择（不连续的行）和鸟瞰导航。它有点贵，但我玩免费版很开心。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2008-10-07T16:20:08.893

我用[EDIT.COM](http://en.wikipedia.org/wiki/MS-DOS_Editor)做很多事情，信不信由你。旧习难改。

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2008-08-18T04:22:19.677

不是每个人都使用记事本++，它不是那么好。

# [深红编辑器](http://www.crimsoneditor.com/)

[http://www.crimsoneditor.com/images/overview.gif](http://www.crimsoneditor.com/)

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2008-08-18T12:13:31.283

EditPlus 是我的首选编辑器。您需要的所有功能，仅此而已。

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2008-08-18T04:33:41.710

商业产品 (Windows)：[UltraEdit](http://www.ultraedit.com/)。

免费软件（Windows）：[记事本++](http://notepad-plus.sourceforge.net/uk/site.htm)、[PSPad](http://www.pspad.com/)。

跨平台：[JEdit](http://www.jedit.org/)。它是用 Java 编写的，几乎可以在任何东西上运行。

如果您不介意在 Windows 下降低性能，JEdit 有一些惊人的功能。对于该平台上的本机性能，我会选择其他平台之一。我倾向于在 Notepad++ 和 PSPad 之间来回切换。Notepad++ 可能会在大多数任务中脱颖而出。它具有分段折叠功能，非常方便。但是，您确实询问了该产品*以外*的产品。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2008-09-22T17:29:19.220

我讨厌听起来像一张破唱片，但 Vim 是我的选择。它在任何地方都以相同的方式工作，您很难找到更强大的编辑器。

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2008-09-22T17:34:29.397

我在 Windows 上编写的代码不多，但我选择了电子文本编辑器。就免费编辑器而言，没有什么能比得上 Emacs。

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2008-08-19T00:52:16.587

Textpad 代替了我的记事本。没有它我活不下去。我与 Textpad 一起使用的一些关键功能是：

1.  在文件中查找（以及全部打开、全部替换、全部保存、全部关闭）。
2.  块选择（连同列的复制/粘贴）。
3.  剪辑库
4.  语法高亮
5.  能够附加外部工具（编译器等）并将输出捕获到窗口。

我将 Eclipse 用于 Java，Visual Studio 用于 C++、C# 和 VB.NET，JellyFish Pro 用于 PowerBasic，我仍然将 Visual Studio 6 用于经典 VB，我将 TextPad 用于 perl、python、Powershell、vbscript、SQL、HTML、和批处理文件。

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2008-08-18T04:30:12.890

我个人喜欢[ConTEXT](http://www.contexteditor.org/index.html)。

很多人在这里给出了他们最喜欢的文本编辑器的建议：

[https://stackoverflow.com/questions/10238/text-editor-or-ide#10391](https://stackoverflow.com/questions/10238/text-editor-or-ide#10391)

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2008-08-18T04:36:07.587

我已经使用[UltraEdit](http://www.ultraedit.com/)多年...如果我正在处理一个项目，我更喜欢使用真正的 IDE，但没有什么比它更能快速更改源文件，或者特别是对于那些你只是在破解的小型 PHP 项目反正离开。对我来说，杀手级功能是比较功能。

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2008-08-18T05:01:53.293

我严格使用 jEdit。

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2008-08-18T12:44:02.627

我个人最喜欢的是[EditPad Pro](http://www.editpadpro.com/)。不是因为它在任何方面都优越，而是因为它是我开始使用的那个。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2008-08-18T12:47:09.110

UltraEdit 它是我最喜欢的文本编辑器。太糟糕了，我必须为此付出代价。您无法击败垂直与水平突出显示的能力。

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2009-01-22T17:16:59.837

CYGWIN、Textpad、Notepad 和各种 IDE（Eclipse、MS VS C++、MS VS VB6 等）上的 VIM

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2008-08-20T08:13:10.840

用于 .Net 开发的 Visual Studio。目前正在使用 VS2008，但似乎还没有完成。2005年可能是最稳定和最完整的。对于 .Net 开发来说，其他任何东西似乎都是徒劳的

我将 e-TextEditor 用于大多数其他事情。它涵盖了上述大部分主题，包括语法突出显示、多选/编辑、列选择、用于自动完成的 TextMate 包。

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2008-08-20T08:05:22.933

Notepad2，除了 Notepad++

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2008-08-20T08:10:25.417

Visual Studio、notepad2、notepad++。

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2008-09-29T20:09:42.043

如您所见，询问首选编辑器会得到很多回复。对我来说：UltraEdit - 健壮：Notepad++ - 轻量级

也倾向于使用各种工具自带的IDE（如VB、C#等）

但是，最好的建议是选择一个像样的编辑器并**彻底学习它**。您将花费大量时间使用它。所以，你越了解它，从长远来看，它会为你节省更多的时间。

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2009-01-28T09:22:48.750

Vim 是我的默认设置，当我在 Visual Studio 中时，我使用 ViEmu 和 Resharper。

除了一些小插曲之外，它确实以三个世界中最好的而告终。我可以使用 Vim 命令，Visual Studio 快捷方式也可以，Resharper 只是为 Visual Studio 添加了一堆有用的功能。

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2009-06-23T13:13:27.383

当然是崇高的。它是我见过的 Windows 上最好的文本编辑器。

* * *

## 回答 #34

> 赞同：3
> 
> 时间：2009-06-23T13:18:25.873

edit.com [edit.com http://cloud.anyhub.net/0-edit-com.png](http://cloud.anyhub.net/0-edit-com.png)

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2010-01-12T15:33:59.213

GVIM (www.vim.org) because it's free (donation-ware), cross platform, widely available, efficient, extensible, network enabled, and open source.

**VIM** Features (not an extensive list) *

*   Ability to apply actions across all buffers
*   Autocommands
*   Block modification
*   Code Completion Code
*   Highlighting (and methods for adding your own syntax with REGEX)
*   Colorschemes
*   DIFF
*   Folding
*   Indenting/Formatting Key Mapping
*   Macros Marks
*   Modal Editing
*   Project Management (Project Plugin)
*   Registers (local, global, etc)
*   Regular Expressions
*   Scriptable Snippets (Templating)
*   Spell Checker
*   Tagging
*   Text-Objects

I suggest learning the basics from **Derek Wyatt's VI/Vim Page** ([http://www.derekwyatt.org/](http://www.derekwyatt.org/)), tutorial pages, and adding to your skill set on as you go.

**Suggested PLUGINS**

*   Project
*   XPT Templates
*   Minibufexpl
*   MRU
*   Calendar
*   NerdTree -Taglist

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2010-10-07T15:35:05.053

[Geany](http://geany.org/)是一款出色的文本编辑器：轻量级且功能丰富

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2008-08-18T12:28:04.873

在这里为 Textpad 投票。我尝试了 Notepad++，但很恼火的是它在打开的文件更新时没有通知我（这在查看活动日志文件时很痛苦）。

* * *

## 回答 #38

> 赞同：2
> 
> 时间：2008-10-07T16:09:08.760

免费，快速编辑：[Notepad2](http://sourceforge.net/projects/notepad2/)

但是共享软件程序[Textpad](http://www.textpad.com/)仍然是我的最爱。一些关键特性：

*   您可以下载几乎所有语言的语法文件，或者自己制作。

*   您可以将数百个文件加载到其中，并在所有文件中应用正则表达式搜索和替换。

*   它有一个快速有效的内置文件搜索器。

*   很难让它崩溃。它可以记住尽可能多的撤消状态。

*   您可以创建击键宏

* * *

## 回答 #39

> 赞同：2
> 
> 时间：2009-01-28T09:18:22.800

我是另一个 vim 用户，但我实际做的是使用带有 viEmu 的 Visual Studio（基本上可以让您在 Visual Studio 中使用 vim 命令），这是最好的！Visual Studio 是一个很棒的 IDE，vim 是一个很棒的文本编辑器，这让我可以同时使用这两者。

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2008-08-22T03:05:33.153

@MrBrutal 我也喜欢 Notepad2。唯一的问题是它对大文件很蹩脚。:(

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2009-07-23T18:31:59.630

只要 Notepad++ 存在，我真的不想使用其他任何东西。在linux上我只使用vi。

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2008-08-19T00:18:15.190

我是 EditPlus 的忠实粉丝，主要是因为它流畅的内置 ftp 打开/保存功能。Crimson Editor 也有此功能，但该功能似乎有时不稳定。

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2008-08-18T04:10:32.053

我一直发现 Visual Studio 在代码编辑方面表现出色。我仍然认为这几乎是代码编辑的黄金标准（但我很想被证明是错误的）。

除此之外，我还使用[JCreator](http://www.jcreator.com/)进行 Java 编辑。当然，我用记事本做基本的东西。我也使用了很多其他的文本编辑器，但没有一个我可以真正推荐。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2008-08-18T04:19:34.983

寻求简单的答案。emacs

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2008-08-18T05:27:49.293

我正在尝试切换到[Code::Blocks](http://www.codeblocks.org/) IDE 进行所有 C/C++ 编辑，但我使用 Visual Studio 2003 和[Programmer's Notepad 2](http://www.pnotepad.org/)进行 C/C++ 项目。对于 Python，我目前使用 IDLE，但一直在寻找具有水平滚动条的其他东西。

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2008-10-17T19:15:45.400

[UltraEdit](http://www.ultraedit.com)适合我。那里可能有更好的，但是我需要很长时间才能学习它以及超编辑，我会在学习时失去任何潜在的投资回报率。这可能是关键......正如上面几篇文章所说的那样，选择一个并学会精通它。回报将是巨大的。如果你善变和转换，你将无法很好地学习它以从中受益。

-大学教师

* * *

## 回答 #47

> 赞同：1
> 
> 时间：2010-01-19T08:14:44.980

如果没有其他原因，我当然会推荐[PowerPad 。](http://quickmediasolutions.com/software/powerpad/)

以下是您将在其中找到的一些精彩功能：（使用最新的测试版获取所有这些功能）

*   多标签界面
*   基于 Python 的强大脚本语言
*   无限撤消
*   语法高亮和自动缩进
*   支持通过 FTP 打开和编辑文件
*   能够打开 UTF-8 和 UTF-16 编码文件

当前可用的脚本使您能够...

*   执行 RegEx 搜索
*   在 Google、Wikipedia 等上查找当前选择。
*   编码/解码 base64 数据

我意识到这个问题是专门针对 Windows 的，但我应该指出 PowerPad 也可用于 Linux。

* * *

## 回答 #48

> 赞同：1
> 
> 时间：2009-06-23T14:21:35.390

*   [Mac OSX 上的 TextMate](http://en.wikipedia.org/wiki/TextMate)用于除 ObjC/Cocoa 之外的所有内容（为此使用 XCode）。捆绑包很棒，几乎支持我迄今为止遇到的所有语言。

*   GVim 在 Windows 和 Linux 上，如果我喜欢的话，有时可能是 OSX :)。对于 C/Python，这就是我所需要的。

*   对于 Flash/AS，我猜几乎只有 FlexBuilder。即使我真的不关心 Eclipse。

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2009-01-28T09:22:16.523

记事本++

和[RJ TextEd](http://www.rj-texted.se/) [替代文本 http://www.rj-texted.se/bilder/mainsync-100.png](http://www.rj-texted.se/bilder/mainsync-100.png)

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2008-09-22T17:26:57.963

再次投票给 EditPlus。它是使用列选择、宏和非常强大的正则表达式搜索/替换手动按摩数据的好工具。适用于大文件。非常适合编码以及社区提供的语法和自动完成文件。

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2008-09-17T02:37:30.900

[Zeus](http://www.zeusedit.com)编辑器/IDE 充满了编程功能，但它仍然感觉很活泼。它还可以很好地模仿旧的 Brief 编辑器。

[替代文字 http://www.zeusedit.com/images/lookmain.png](http://www.zeusedit.com/images/lookmain.png)

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2008-08-22T02:20:31.047

开发自己的文本编辑器怎么样？您可以拥有自己的编辑器，拥有无价的经验。

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2008-08-22T02:56:21.257

gvim 有很多有用的插件，例如 taglist、c-syntax、matchit、vcscommand、bufexplorer 等等。gvim 也很好地与文件管理器 Total Commander 结合使用，其中 F4 调用 gvim 来编辑光标下的文件。

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2008-09-04T16:25:24.733

*   用于 Delphi 项目的**Delphi 7 IDE**
*   **.net 项目的**VS2005****
***   **记事本**用于任何快速的东西（我知道它很烂，但它很快）**

 *** * *

## 回答 #55

> 赞同：0
> 
> 时间：2009-07-22T20:25:47.003

我使用 Scite，因为它是高度可定制的，但是，我真的很喜欢 DrScheme 与 Scheme 一起工作。如果 Python 和 Ruby 有类似的东西，那就太好了。

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2008-08-18T05:04:48.373

我大多只使用 Notepad++，但当我需要在 unicode 路径中打开文件或需要对 unicode 内容进行更多控制时，我喜欢[BabelPad 。](http://www.babelstone.co.uk/Software/BabelPad.html)

我也喜欢 EditPlus。您可以将文件保存为模板并在文件菜单下创建它的新实例。它在加载中等大小的文件时也非常快。

JEDIT 是我最喜欢的，但在编辑稍微大的文件时它太慢了。

我不能说我对 Notepad++ 100% 满意，但它至少让我感到不安，所以......

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2008-09-22T16:06:56.860

UltraEdit 中的列模式非常棒。

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2008-08-18T05:40:15.883

@德里克公园

我也使用 VS 来满足我的大部分编码需求，但对所有其他纯文本文件使用 Notepad++。有一次我对 VS 感到失望，因为它无法打开一个 500 兆的文本文件，我希望在其中更改几个字符。看到它支持查看十六进制文件（即二进制数据），我希望它会更好地处理大文件。它似乎想加载整个文件而不是相关数据。也许我只是对它期望太高了。（注意：我也无法在 NP++ 中打开文件。）

编辑 - 我的错误。我并不是说 Notepad++ 成功打开了文件。实际上，我不记得我用什么来解决这个问题。

* * *

## 回答 #59

> 赞同：0
> 
> 时间：2008-08-18T06:11:31.827

@_l0ser

> 我也使用 VS 来满足我的大部分编码需求，但对所有其他纯文本文件使用 Notepad++。有一次我对 VS 感到失望，因为它无法打开一个 500 兆的文本文件，我希望在其中更改几个字符。看到它支持查看十六进制文件（即二进制数据），我希望它会更好地处理大文件。它似乎想加载整个文件而不是相关数据。也许我只是对它期望太高了。

如果 Notepad++ 可以打开一个 500meg 的文件，那对于 Notepad++ 来说无疑是一个优势。我试图打开一个这么大的文件的每个编辑器都被颠簸和/或冻结，直到我杀死它。

* * *

## 回答 #60

> 赞同：0
> 
> 时间：2008-08-18T13:19:38.437

Notepad++ 可能是我用得最多的一个，尽管每当我需要进行重复更改时我都会使用 GVIM。

我们最近获得了 UltraEdit 的公司许可证，它似乎也运行良好。当我没有运行完整的 IDE 并且不想等待它打开时，我一直在使用它来快速编辑 java 或 C++ 代码。

* * *

## 回答 #61

> 赞同：0
> 
> 时间：2009-05-20T19:48:52.430

*   [j编辑](http://www.jedit.org)
*   [记事本++](http://notepad-plus.sourceforge.net)
*   用于 Ruby 开发的[Netbeans](http://www.netbeans.org/downloads)

* * *

## 回答 #62

> 赞同：0
> 
> 时间：2011-01-27T02:35:29.413

很长一段时间后，我使用[TotalEdit](http://www.codertools.com/totaledit.aspx)。

学习曲线为零。左侧是项目资源管理器，右侧是选项卡式、语法突出显示的代码文件，界面干净整洁。稍微调整工具栏以包含我最常用的命令很简单。我还以 10 美元的价格升级到允许您在目录中搜索而不仅仅是在文件中搜索的版本。很高兴。

* * *

## 回答 #63

> 赞同：0
> 
> 时间：2009-01-28T10:12:38.590

[IntelliJ](http://www.jetbrains.com/)是我发现的最好的 Javascript

[维基百科上的大多数都](http://en.wikipedia.org/wiki/Comparison_of_text_editors#Windows-only_text_editors)做另一个做的事情。在我看来，Ultraedit、Notepad++ 是其中最好的。

对于零惊险记事本改进[metapad](http://liquidninja.com/metapad/)是好的。

* * *

## 回答 #64

> 赞同：0
> 
> 时间：2008-09-29T20:14:33.937

[Xemacs——](http://www.xemacs.org)适用于包括 Windows 在内的许多平台上的任何语言。对 Windows 约定有很好的支持。

让您访问 sqlplus 和其他用于 POSTGRESQL、MYSQL 的命令行 SQL 环境

* * *

## 回答 #65

> 赞同：0
> 
> 时间：2011-04-08T22:42:49.833

有人在上面建议 SCITE。我很惊讶——据我所知——从来没有人提到过（我相信）使用 SCITE“引擎”的编辑器：[程序员记事本](http://www.pnotepad.org/)（又名 PNotepad）——或者如果他们提到了，我错过了！ * 值得一看（点击拇指查看全尺寸）：

[PNotepad 2.2 截图 http://i54.tinypic.com/hv0zyu_th.png](http://i54.tinypic.com/hv0zyu.png)

我在 Notepad++ 旁边使用它，但我也将[AkelPad](http://akelpad.sourceforge.net/en/index.php)用于非常快速的事情：它是我拥有的最快的编辑器，甚至比 Notepad2 更快，我认为，并且有一些非常有用的插件。（但它们是略有不同的工具。）

* 更新：我确实错过了它：它在 2008 年[之前被提到过](https://stackoverflow.com/questions/14155/windows-based-text-editors/14212#14212)。从那时起，它是一个大大改进的编码编辑器！

* * *

## 回答 #66

> 赞同：0
> 
> 时间：2009-06-23T14:09:50.840

gVim 是我最喜欢的。Notepad++ 没问题，但没有 vim 键绑定我的工作效率只有一半。

* * *

## 回答 #67

> 赞同：0
> 
> 时间：2009-01-28T09:14:43.400

我使用 Netbeans 进行 Ruby 开发，使用 SciTE 进行快速编辑。

* * *

## 回答 #68

> 赞同：0
> 
> 时间：2009-01-28T09:56:11.400

我是[PS Pad的粉丝](http://www.pspad.com/)

尽管在 Windows 上确实没有具有我想要的一切的文本编辑器。

* * *

## 回答 #69

> 赞同：0
> 
> 时间：2009-06-23T13:25:28.497

**代码不是文本。这是代码**

如果您使用文本编辑器来编辑源代码，那么您对自己的伤害是难以置信的。我的意思是，很高兴 Notepad++ 可以为你做一些基本的颜色编码，但你真的为什么要这样浪费你的时间呢？

像 VS.NET + Resharper 这样的优秀 IDE 可以动态地对您的代码进行后台编译，让您可以做一些您在没有亲眼目睹时不可能完成的事情。导航到实际用法。自动导入依赖项。一键重构您的代码。就是这么好。而且也不贵。

我的意思是看。这是你的工作。这是您在工作生活中的每一天都会与之互动的一款软件。你为什么玩免费软件垃圾？获得金钱可以为您的利基市场购买的最佳 IDE。它会让你在你所做的事情上做得更好。

* * *

## 回答 #70

> 赞同：0
> 
> 时间：2009-06-23T13:39:34.913

[Editpad](http://www.editpadpro.com/editpadlite.html)在 Windows 中很有用

* * *

## 回答 #71

> 赞同：-1
> 
> 时间：2010-03-06T01:13:17.543

列表中没有[Eclipse](http://www.eclipse.org/)！！！**

# c++ - 具有 min()/max() 调用的代码出现奇怪的 C++ 错误

> ID：14165
> 
> 赞同：7
> 
> 时间：2008-08-18T04:13:34.920
> 
> 标签：c++, c

当我的 C++ 代码有 min() 或 max() 调用时，我看到了奇怪的错误。我正在使用 Visual C++ 编译器。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-08-18T04:15:34.510

检查您的代码是否包含**windows.h**头文件，并且您的代码或其他第三方头文件有自己的**min()** / **max()**定义。如果是，则在您的**windows.h**包含之前添加**NOMINMAX**的定义，如下所示：

```
#define NOMINMAX
#include <windows.h> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-23T11:17:25.570

另一种可能性可能来自副作用。大多数最小/最大宏将多次包含参数，并且可能无法达到您的预期。也可能产生错误和警告。

```
max(a,i++) 展开为 ((a) > (i++) ? (a) : (i++))之后 i 要么加 1 要么加 2

```

展开式中的 () 是为了避免用公式调用它时出现问题。尝试扩展 max(a,b+c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-01-24T14:32:20.687

由于 Windows 将此定义为函数样式的宏，因此可以使用以下解决方法：

```
int i = std::min<int>(3,5); 
```

之所以有效，是因为宏`min()`仅在`min`后面跟着时展开`(`，而不是在后面跟着. 时展开`<`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-18T04:20:09.693

呃......范围它，伙计：`std::min()`，`std::max()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T04:49:15.377

我已经很多年没有使用它了，但是从内存提升中也分配了最小值和最大值，可能吗？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-11-24T22:17:01.320

老实说，当涉及到最小值/最大值时，我发现最好只定义我自己的：

```
#define min(a,b) ((a) < (b) ? (a) : (b))
#define max(a,b) ((a) >= (b) ? (a) : (b)) 
```

# .net - System.Data.SqlClient.SqlException：无法生成 SQL Server 的用户实例

> ID：14209
> 
> 赞同：5
> 
> 时间：2008-08-18T05:24:47.817
> 
> 标签：.net, sql-server, ado.net

`System.Data.SqlClient.SqlException: Failed to generate a user instance of SQL Server due to a failure in starting the process for the user instance. The connection will be closed.`

有人遇到过这个错误和/或对它的原因和/或解决方案有任何想法吗？

[此链接可能有相关信息。](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=125227&SiteID=1)

**更新**

连接字符串是`=.\SQLEXPRESS;AttachDbFilename=C:\temp\HelloWorldTest.mdf;Integrated Security=True`

建议`User Instance=false`有效。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-07-06T10:55:19.310

这是您的问题的答案：

很多时候，旧用户实例会创建一些临时文件，这些文件会阻止创建新的 SQL Express 用户实例。删除这些文件后，一切都开始正常工作。

首先通过在 SQL Server Management Studio 中运行以下 SQL 来确认用户实例已启用：

```
exec sp_configure 'user instances enabled', 1.
GO
Reconfigure 
```

运行查询后，重新启动您的 SQL Server 实例。现在删除以下文件夹：

`C:\Documents and Settings\{YOUR_USERNAME}\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\{SQL_INSTANCE_NAME}`

确保使用适当的名称替换`{YOUR_USERNAME}`和。`{SQL_INSTANCE_NAME}`

来源：[修复错误“由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例。”](http://aspdotnetfaq.com/Faq/fix-error-Failed-to-generate-a-user-instance-of-SQL-Server-due-to-a-failure-in-starting-the-process-for-the-user-instance.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-18T05:31:26.697

您应该在连接字符串中添加显式 User Instance=true/false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T16:17:44.773

我今天早上在测试部署环境中开始收到此错误。我使用的是 SQL Server Express 2008，我得到的错误是

“由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例。连接将被关闭。”

不确定是什么原因造成的，我按照这篇文章和其他文章中关于删除“C:\Users\UserName\AppData\Local\Microsoft\Microsoft SQL Server Data\SQLEXPRESS”目录的说明进行操作，但无济于事。

对我来说诀窍是改变连接字符串

“数据源=.\SQLExpress；初始目录= **DBFilePath**；集成安全=SSPI；MultipleActiveResultSets=true”

至

“数据源=.\SQLExpress；初始目录= **DBName**；集成安全=SSPI；MultipleActiveResultSets=true”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-25T19:01:42.593

我遵循了所有这些步骤，但也必须进入

1.  控制面板 > 管理工具 > 服务
2.  右键单击 SQL Server (SQLEXPRESS)
3.  选择登录选项卡
4.  选择本地系统帐户，然后单击确定

问题解决了。。。谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-18T16:38:01.137

请注意，我发现[Jon Limjap](https://stackoverflow.com/users/372/jon-limjap)的回答很有帮助，只是在我做了更多研究后发现它仅适用于包含 的数据库连接字符串`AttachDBFilename`，因此我必须将连接字符串更改`web.config`为：

```
connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf" 
```

至：

```
connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" 
```

详情请参见[如果将 [user instances=true] 添加到连接字符串，则会引发异常](https://stackoverflow.com/questions/9555659/if-add-user-instances-true-to-connection-string-an-exception-is-thrown/9555870#9555870)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-18T19:02:59.670

我有 Windows 8，我测试了解决方案

1.  启用用户实例
    exec sp_configure 'user instances enabled', 1\.
    GO
    Reconfigure

2.  重新启动 SQL Server 实例。

3.  删除文件夹： `C:\Users\Arabic\{YOUR_USERNAME}\Local\Microsoft\Microsoft SQL Server Data`
    将 {YOUR_USERNAME} 替换为适当的名称。

来自 Roboblob 的来源

# .net - 与|管道分隔| 有什么关系？连接字符串中的变量？

> ID：14241
> 
> 赞同：3
> 
> 时间：2008-08-18T06:06:38.420
> 
> 标签：.net, ado.net, syntax, macros, connection-string

我知道**|数据目录|** 将`App_Data`在 ASP.NET 应用程序中解析为，但这是硬编码的，还是有一个通用机制在*%environment variables%*的行中起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-18T09:22:47.383

来自 MSDN[智能客户端数据博客](https://blogs.msdn.com/smartclientdata/archive/2005/08/26/456886.aspx)：

> 在这个版本中，.NET 运行时添加了对我们称之为 DataDirectory 宏的支持。这允许 Visual Studio 在连接字符串中放置一个特殊变量，该变量将在运行时扩展......
> 
> 默认情况下，|DataDirectory| 变量将扩展如下：
> 
> *   对于放置在用户计算机目录中的应用程序，这将是应用程序的 (.exe) 文件夹。
> *   对于在 ClickOnce 下运行的应用程序，这将是 ClickOnce 创建的特殊数据文件夹
> *   对于 Web 应用程序，这将是 App_Data 文件夹
> 
> 在后台，|DataDirectory| 的值 只是来自应用程序域上的属性。可以通过执行以下操作更改该值并覆盖默认行为：
> 
> ```
> AppDomain.CurrentDomain.SetData("DataDirectory", newpath) 
> ```

# apache-flex - Flex：是否存在无痛的编程数据绑定？

> ID：14247
> 
> 赞同：13
> 
> 时间：2008-08-18T06:15:08.840
> 
> 标签：apache-flex, actionscript-3, data-binding, mxml

到目前为止，我只做了一点 Flex 开发，但我更喜欢以编程方式创建控件而不是 mxml 文件的方法，因为（如果我错了，*请*纠正我！）我已经收集到你可以'不能兼得——也就是说，在单独的 ActionScript 类文件中具有类功能，但在 mxml 中声明包含的元素。

在生产力方面似乎没有太大差异，但以编程方式进行数据绑定似乎并不简单。我看了一下 mxml 编译器如何转换数据绑定表达式。结果是一堆生成的回调和比 mxml 表示中更多的行。那么问题来了：**有没有一种方法可以以编程方式进行数据绑定，而不会造成伤害？**

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-08-18T06:56:22.250

不要害怕 MXML。它非常适合布置视图。如果您编写自己的*可重用*组件，那么在 ActionScript 中编写它们有时可能会给您更多的控制权，但对于不可重用的视图，MXML 更好。它更简洁，绑定非常容易设置，等等。

但是，纯 ActionScript 中的绑定不必那么痛苦。它永远不会像在 MXML 中为您完成很多事情那样简单，但它可以不费力气地完成。

你所拥有的是`BindingUtils`和它的方法`bindSetter`和`bindProperty`。我几乎总是使用前者，因为我通常想做一些工作，或者`invalidateProperties`在值更改时调用，我几乎从不想设置一个属性。

您需要知道的是，这两个返回一个类型为 的对象`ChangeWatcher`，如果您出于某种原因要删除绑定，则必须保留该对象。这就是使 ActionScript 中的手动绑定不如 MXML 中方便的原因。

让我们从一个简单的例子开始：

```
BindingUtils.bindSetter(nameChanged, selectedEmployee, "name"); 
```

这设置了一个绑定，该绑定将在变量中对象的属性更改`nameChanged`时调用该方法。该方法将接收属性的新值作为参数，因此它应该如下所示：`name``selectedEmployee``nameChanged``name`

```
private function nameChanged( newName : String ) : void 
```

这个简单示例的问题在于，一旦您设置了此绑定，它将在每次指定对象的属性更改时触发。变量的值`selectedEmployee`可能会改变，但仍然为变量之前指向的对象设置了绑定。

有两种方法可以解决这个问题：要么保留around`ChangeWatcher`返回的`BindingUtils.bindSetter`值，并在你想删除绑定时调用`unwatch`它（然后设置一个新的绑定），或者绑定到你自己。我将首先向您展示第一个选项，然后解释我所说的绑定到自己的意思。

可以将`currentEmployee`其制成 getter/setter 对并像这样实现（仅显示 setter）：

```
public function set currentEmployee( employee : Employee ) : void {
    if ( _currentEmployee != employee ) {
        if ( _currentEmployee != null ) {
            currentEmployeeNameCW.unwatch();
        }

        _currentEmployee = employee;

        if ( _currentEmployee != null ) {
            currentEmployeeNameCW = BindingUtils.bindSetter(currentEmployeeNameChanged, _currentEmployee, "name");
        }
    }
} 
```

发生的情况是，当设置`currentEmployee`属性时，它会查看是否存在先前的值，如果是，则删除该对象的绑定 ( `currentEmployeeNameCW.unwatch()`)，然后设置私有变量，除非新值`null`设置为新绑定为`name`财产。最重要的是它保存了`ChangeWatcher`绑定调用返回的内容。

这是一个基本的绑定模式，我认为它工作得很好。然而，有一个技巧可以让它变得更简单一些。您可以改为绑定到自己。`currentEmployee`您可以让绑定系统为您完成，而不是每次属性更改时都设置和删除绑定。在您的`creationComplete`处理程序（或构造函数或至少提前一段时间）中，您可以像这样设置绑定：

```
BindingUtils.bindSetter(currentEmployeeNameChanged, this, ["currentEmployee", "name"]); 
```

这不仅设置了与 上的`currentEmployee`属性的绑定`this`，而且还设置了`name`与此对象上的属性的绑定。因此，无论何时更改，`currentEmployeeNameChanged`都会调用该方法。无需保存，`ChangeWatcher`因为永远不必删除绑定。

第二个解决方案在很多情况下都有效，但我发现第一个解决方案有时是必要的，尤其是在使用非视图类中的绑定时（因为`this`必须是事件调度程序并且`currentEmployee`必须是可绑定的才能工作） .

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-04-02T05:58:23.443

它存在于今天。:)

我刚刚将我的 ActionScript 数据绑定项目作为开源发布：[http ://code.google.com/p/bindage-tools](http://code.google.com/p/bindage-tools)

BindageTools 是 BindingUtils 的替代品（参见那里的文字游戏？），它使用流畅的 API，您可以在管道样式中声明数据绑定：

```
Bind.fromProperty(person, "firstName")
    .toProperty(firstNameInput, "text"); 
```

双向绑定：

```
Bind.twoWay(
    Bind.fromProperty(person, "firstName"),
    Bind.fromProperty(firstNameInput, "text")); 
```

显式数据转换和验证：

```
Bind.twoWay(
    Bind.fromProperty(person, "age")
        .convert(valueToString()),
    Bind.fromProperty(ageInput, "text")
        .validate(isNumeric()) // (Hamcrest-as3 matcher)
        .convert(toNumber())); 
```

等等。网站上有更多的例子。还有很多其他功能，快来看看吧。 - 马修

编辑：更新的 API

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-30T14:54:16.723

将组件的 MXML 和 ActionScript 分离到单独文件中的一种方法是执行类似于 ASP.Net 1.x 代码隐藏模型的操作。在此模型中，声明部分（在本例中为 MXML）是命令部分（ActionScript）的子类。所以我可能会为这样的类声明代码：

```
package CustomComponents
{
    import mx.containers.*;
    import mx.controls.*;
    import flash.events.Event;

    public class MyCanvasCode extends Canvas
    {
        public var myLabel : Label;

        protected function onInitialize(event : Event):void
        {
            MyLabel.text = "Lorem ipsum dolor sit amet, consectetuer adipiscing elit.";
        }
    }
} 
```

...和这样的标记：

```
<?xml version="1.0" encoding="utf-8"?>
<MyCanvasCode xmlns="CustomComponents.*" 
    xmlns:mx="http://www.adobe.com/2006/mxml"
    initialize="onInitialize(event)">
    <mx:Label id="myLabel"/>    
</MyCanvasCode> 
```

从这个例子可以看出，这种方法的一个缺点是你必须在两个文件中声明像**myLabel这样的控件。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T14:49:59.940

我通常使用一种方法将 mxml 和动作脚本一起使用：我所有的 mxml 组件都继承自一个动作脚本类，我在其中添加了更复杂的代码。然后可以在mxml文件中引用这个类中实现的事件监听器。

问候，

露丝

# http - 让用户从我的网站下载文件的最佳方式：http 或 ftp

> ID：14263
> 
> 赞同：5
> 
> 时间：2008-08-18T07:00:15.067
> 
> 标签：http, ftp, download

我们的网站上有一些文件可供我们软件的用户下载。一些文件在网站上的虚拟文件夹中，而其他文件在我们的 ftp 上。ftp 上的文件通常通过在浏览器中单击 ftp:// 链接来访问 - 我们的大多数客户没有 ftp 客户端。通过单击浏览器中的 http:// 链接访问其他文件。

我应该将所有文件移动到 ftp 吗？还是没关系？有什么不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-18T15:26:21.287

HTTP 比 FTP 有很多优点：

*   它可以在更多地方使用（想想那些阻止 HTTP/S 以外的任何东西的工作场所）
*   它可以很好地与代理配合使用（FTP 需要对代理进行额外设置 - 比如确保它允许 CONNECT 方法）
*   它提供了几乎所有浏览器都可以处理的内置压缩（使用 GZIP）（与具有非官方“MODE Z”扩展名的 FTP 不同）
*   NAT 网关必须配置为特殊模式以支持主动 FTP 连接，而被动 FTP 连接要求它们允许访问所有端口（它没有连接跟踪）
*   一些 FTP 客户端坚持为每次数据传输打开一个新的数据连接，这会给您留下很多“TIME_WAIT”套接字

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-18T07:07:29.077

如果速度对您的用户很重要，并且他们在技术上倾向于，http 允许一个文件的多个连接（如果客户端支持它。我使用[DownThemAll](http://www.downthemall.net/)）。不过，大多数浏览器应该可以很好地处理 ftp 链接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-18T07:58:11.393

我认为大多数用户，即使在今天，也比 ftp 更熟悉 http，因此您应该默认使用 http，除非有令人信服的理由使用 ftp。不过，这很挑剔。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-18T07:13:37.007

我认为这并不重要，因为 ftp 现在也是透明的。你不需要知道任何特别的东西，浏览器会处理所有的事情。

我建议如果他们一次下载一个文件，你可以去http。

但是，如果他们必须一次性下载多个文件，我更喜欢 ftp，因为它更易于管理。

_l0ser 提到了一些不错的浏览器扩展，但我更喜欢 ftp 进行大量文件传输。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-18T15:52:59.657

FTP 和 HTTP 似乎都足以满足您的需求，因此我绝对建议选择*最简单*的方法，即保持现状不变或在 HTTP 上进行整合。

就个人而言，我会将所有内容都放在 HTTP 上。如果不出意外，它消除了额外的服务器。没有令人信服的理由选择 FTP 而不是 HTTP，并且 HTTP 有一些小的优势（正如其他人指出的那样）。

# visual-studio - 将 GLUT 与 Visual C++ 速成版一起使用

> ID：14264
> 
> 赞同：11
> 
> 时间：2008-08-18T07:00:21.057
> 
> 标签：visual-studio, visual-c++, opengl, glut

在 Visual C++ Express Edition 下使用*GLUT (OpenGL Utility Toolkit)*编译 OpenGL 应用程序的基本步骤是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-18T07:00:32.600

1.  如果您没有 Visual C++ Express Edition (VCEE)，请下载并安装[VCEE](http://msdn.microsoft.com/vstudio/express/visualc/default.aspx)。
2.  Visual C++ Express Edition 的默认安装是为 .Net 平台构建的。我们需要为 Windows 平台构建，因为 .Net 还没有完全支持 OpenGL 和 GLUT。为此，我们需要 Microsoft 平台 SDK。（如果您使用的是旧版本的 VCEE，请下载并安装[Microsoft Platform SDK](http://www.microsoft.com/downloads/details.aspx?familyid=A55B6B43-E24F-4EA3-A93E-40C0EC4F68E5)。需要将 Visual C++ Express Edition 配置为针对 Windows 平台构建。所有这些说明都可以[在此处](http://msdn.microsoft.com/en-us/library/ms235626(VS.80).aspx)获得。）
3.  如果您没有 GLUT，请下载并解压缩 Nate Robin 的[GLUT Windows 端口](http://www.xmission.com/~nate/glut.html)。
4.  将**glut.h**添加到您的*Platform SDK/include/GL/*目录
5.  将项目与**glut.lib**链接。（转到 VCEE *Project Properties -> Additional Linker Directories*并添加具有**glut.lib**的目录。
6.  将**glut.dll**添加到*Windows/System32*目录，以便所有使用 GLUT 的程序在运行时都能找到它。

您使用 GLUT 或 OpenGL 的程序现在应该在 Visual C++ Express Edition 下编译。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-22T01:02:59.560

Nate Robin 网站上的 GLUT 端口是从 2001 年开始的，并且与比该版本更新的 Visual Studio 版本（.NET 2003 及更高版本）存在一些不兼容性。不兼容表现为关于重新定义的错误`exit()`。如果您看到此错误，有两种可能的解决方案：

1.  将`exit()`原型替换为`glut.h`您的原型，`stdlib.h`以便它们匹配。这可能是最好的解决方案。
2.  一个更简单的解决方案是`#define GLUT_DISABLE_ATEXIT_HACK`在你`#include <gl/glut.h>`的程序之前。

[（由于信用：我最初在TAMU 帮助台网站](http://helpdesk.cs.tamu.edu/docs/glut_Visual_Studio2003)上看到了这个建议。）

自从 .NET 2003 出现以来，我自己就一直在使用方法 #1，并且使用`glut.h`VC++ 2003、VC++ 2005 和 VC++ 2008 进行了相同的修改。

这是我使用#1 的 glut.h 的差异（但在适当的`#ifdef blocks`情况下，它仍然适用于旧版本的 Visual Studio）：

```
--- c:\naterobbins\glut.h       2000-12-13 00:22:52.000000000 +0900
+++ c:\updated\glut.h    2006-05-23 11:06:10.000000000 +0900
@@ -143,7 +143,12 @@

 #if defined(_WIN32)
 # ifndef GLUT_BUILDING_LIB
-extern _CRTIMP void __cdecl exit(int);
+/* extern _CRTIMP void __cdecl exit(int);  /* Changed for .NET */
+#  if _MSC_VER >= 1200
+extern _CRTIMP __declspec(noreturn) void __cdecl exit(int);
+#  else
+extern _CRTIMP void __cdecl exit(int);
+#  endif
 # endif
 #else
 /* non-Win32 case. */ 
```

# c++ - 使用 VC++ 9 增强警告

> ID：14271
> 
> 赞同：1
> 
> 时间：2008-08-18T07:20:19.940
> 
> 标签：c++, visual-studio, boost, warnings

当 Boost 库/头文件与 VC++ 9 编译器（Visual C++ 2008 Express Edition 或 Visual Studio 2008）一起使用时，会生成很多良性警告。它们有2种：

1.  关于 Wp64 设置的警告。
2.  关于编译器版本的警告。

如何关闭这些警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-18T07:20:33.373

1.  关于 Wp64 设置的警告。

    > 关闭默认设置的**/Wp64**设置。您可以在*Project Properties -> C/C++ -> General*中找到它。

2.  关于编译器版本的警告。

    > 去 Boost 主干（在线），获取最新的**boost\boost\config\compiler\visualc.hpp**头文件。将其与当前文件进行比较并合并**_MSC_VER**等于**1800**的部分。（*1800*是 Boost 配置中使用的 VC9 版本号。）

# .net - 如何在 .NET 中加载插件？

> ID：14278
> 
> 赞同：27
> 
> 时间：2008-08-18T07:34:56.917
> 
> 标签：.net, windows, plugins, add-in, extensibility

我想提供一些在我的软件中创建动态可加载插件的方法。执行此操作的典型方法是使用[LoadLibrary](http://msdn.microsoft.com/en-us/library/ms684175(VS.85).aspx) WinAPI 函数加载 dll 并调用[GetProcAddress](http://msdn.microsoft.com/en-us/library/ms683212(VS.85).aspx)以获取指向该 dll 内函数的指针。

我的问题是如何在 C#/.Net 应用程序中动态加载插件？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-08-18T08:07:21.047

从 .NET 3.5 开始，有一种正式的、内置的方法可以从 .NET 应用程序创建和加载插件。这一切都在[System.AddIn](http://msdn.microsoft.com/en-us/library/system.addin.aspx)命名空间中。有关更多信息，您可以查看 MSDN 上的这篇文章：[加载项和可扩展性](http://msdn.microsoft.com/en-us/library/bb384241.aspx)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-08-18T07:41:24.390

以下代码片段 (C#) 构造派生`Base`自在应用程序路径中的类库 (*.dll) 中找到的任何具体类的实例，并将它们存储在列表中。

```
using System.IO;
using System.Reflection;

List<Base> objects = new List<Base>();
DirectoryInfo dir = new DirectoryInfo(Application.StartupPath);

foreach (FileInfo file in dir.GetFiles("*.dll"))
{
    Assembly assembly = Assembly.LoadFrom(file.FullName);
    foreach (Type type in assembly.GetTypes())
    {
        if (type.IsSubclassOf(typeof(Base)) && type.IsAbstract == false)
        {
            Base b = type.InvokeMember(null,
                                       BindingFlags.CreateInstance,
                                       null, null, null) as Base;
            objects.Add(b);
        }
    }
} 
```

**编辑：**[Matt](https://stackoverflow.com/questions/14278/how-to-load-plugins-in-net#14305)提到的类可能是 .NET 3.5 中更好的选择。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-06T18:56:30.023

## 动态加载插件

有关如何动态加载 .NET 程序集的信息，请参阅[这个问题](https://stackoverflow.com/questions/1137781/c-sharp-correct-way-to-load-assembly-find-class-and-call-run-method/14184863#14184863)（和[我的答案](https://stackoverflow.com/a/14184863/184528)）。这是一些用于加载创建`AppDomain`和加载程序集的代码。

```
var domain = AppDomain.CreateDomain("NewDomainName");
var pathToDll = @"C:\myDll.dll"; 
var t = typeof(TypeIWantToLoad);
var runnable = domain.CreateInstanceFromAndUnwrap(pathToDll, t.FullName) 
    as IRunnable;
if (runnable == null) throw new Exception("broke");
runnable.Run(); 
```

## 卸载插件

插件框架的一个典型要求是卸载插件。要卸载动态加载的程序集（例如插件和加载项），您必须卸载包含的`AppDomain`. 有关详细信息，请参阅[MSDN 上有关卸载 AppDomains 的这篇文章](http://msdn.microsoft.com/en-us/library/c5b8a8f9.aspx)。

## 使用 WCF

有一个[堆栈溢出问题和答案](https://stackoverflow.com/questions/5801406/c-sharp-wcf-plugin-design-and-implementation)，描述了如何使用 Windows 通信框架 (WCF) 创建插件框架。

## 现有的插件框架

我知道两个插件框架：

*   [Mono.Add-ins](http://www.mono-project.com/Mono.Addins) - 如[另一个问题的答案中](https://stackoverflow.com/a/9045372/184528)所述。
*   [Managed Add-in Framework (MAF)](http://msdn.microsoft.com/en-us/library/bb384200.aspx) - 这是[Matt 在他的回答中提到](https://stackoverflow.com/a/14305/184528)`System.AddIn`的命名空间。

有些人将[托管可扩展性框架 (MEF)](http://msdn.microsoft.com/en-us/library/dd460648.aspx)称为插件或插件框架，但事实并非如此。有关更多信息，请参阅[此 StackOverflow.com 问题](https://stackoverflow.com/questions/835182/choosing-between-mef-and-maf-system-addin)和[此 StackOverflow.com 问题](https://stackoverflow.com/questions/124040/is-mef-a-replacement-for-system-addin)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-18T08:09:40.527

一个技巧是将所有插件等加载到自己的 AppDomain 中，因为运行的代码可能是恶意的。也可以使用自己的 AppDomain 来“过滤”您不想加载的程序集和类型。

```
AppDomain domain = AppDomain.CreateDomain("tempDomain"); 
```

并将程序集加载到应用程序域中：

```
AssemblyName assemblyName = AssemblyName.GetAssemblyName(assemblyPath);
Assembly assembly = domain.Load(assemblyName); 
```

要卸载应用程序域：

```
AppDomain.Unload(domain); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-09T22:03:07.717

是的，Matt 和 System.AddIn 的 ++（关于 System.AddIn 的两部分 MSDN 杂志文章可[在此处](http://msdn.microsoft.com/en-us/magazine/cc163476.aspx)和[此处](http://msdn.microsoft.com/en-us/magazine/cc163460.aspx)获得）。为了了解 .NET Framework 未来的发展方向，您可能希望了解的另一项技术是Codeplex 目前以 CTP 形式提供的[托管可扩展性框架。](http://www.codeplex.com/mef)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-18T07:44:55.757

基本上你可以通过两种方式做到这一点。

第一个是导入 kernel32.dll 并使用之前使用的 LoadLibrary 和 GetProcAddress：

```
[DllImport("kernel32.dll")]

internal static extern IntPtr LoadLibrary(String dllname);

[DllImport("kernel32.dll")]

internal static extern IntPtr GetProcAddress(IntPtr hModule, String procname); 
```

第二种是以 .NET 方式进行：通过使用反射。检查 System.Reflection 命名空间和以下方法：

*   [程序集.LoadFile](http://msdn.microsoft.com/en-us/library/b61s44e8.aspx)
*   [组装.GetType](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettype.aspx)
*   [Assembly.GetTypes](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettypes.aspx)
*   [类型.GetMethod](http://msdn.microsoft.com/en-us/library/8zz808e6.aspx)
*   [方法信息调用](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.invoke.aspx)

首先通过它的路径加载程序集，然后通过它的名称从中获取类型（类），然后再次通过它的名称获取类的方法，最后使用相关参数调用该方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-18T18:32:17.807

这篇文章有点老，但仍然适用于在您的应用程序中创建可扩展层：

[让用户使用宏和插件向您的 .NET 应用程序添加功能](http://msdn.microsoft.com/en-us/magazine/cc164072.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-02T23:17:34.590

这是我的实现，受此[代码](https://www.codeproject.com/Tips/546639/How-to-create-an-easy-plugin-system-in-Csharp)启发，避免迭代所有程序集和所有类型（或至少使用 linQ 过滤）。我只是加载库并尝试加载实现公共共享接口的类。简单快速:)

只需在单独的库中声明一个接口并在您的系统和插件中引用它：

```
public interface IYourInterface
{
    Task YourMethod();
} 
```

在您的插件库中，声明一个实现 IYourInterface 的类

```
public class YourClass: IYourInterface
{
    async Task IYourInterface.YourMethod()
    {
        //.....
    }
} 
```

在您的系统中，声明此方法

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq.Expressions;
using System.Reflection;
using System.Linq;

public abstract class ReflectionTool<TSource> where TSource : class
{
    public static TSource LoadInstanceFromLibrary(string libraryPath)
    {
        TSource pluginclass = null;
        if (!System.IO.File.Exists(libraryPath))
            throw new Exception($"Library '{libraryPath}' not found");
        else
        {
            Assembly.LoadFrom(libraryPath);

            var fileName = System.IO.Path.GetFileName(libraryPath).Replace(".dll", "");
            var assembly = AppDomain.CurrentDomain.GetAssemblies().FirstOrDefault(c => c.FullName.StartsWith(fileName));
            var type = assembly.GetTypes().FirstOrDefault(c => c.GetInterface(typeof(TSource).FullName) != null);

            try
            {
                pluginclass = Activator.CreateInstance(type) as TSource;
            }
            catch (Exception ex)
            {
                LogError("", ex);
                throw;
            }
        }

        return pluginclass;
    }
} 
```

并这样称呼它：

```
IYourInterface instance = ReflectionTool<IYourInterface>.LoadInstanceFromLibrary("c:\pathToYourLibrary.dll"); 
```

# python - zip文件中是否有用于正则表达式匹配的python模块

> ID：14281
> 
> 赞同：7
> 
> 时间：2008-08-18T07:41:09.010
> 
> 标签：python, regex, zip, text-processing

我有超过一百万个文本文件被压缩成 40 个 zip 文件。我还列出了大约 500 个手机型号名称。我想找出文本文件中提到特定模型的次数。

是否有任何 python 模块可以在不解压缩文件的情况下对文件进行正则表达式匹配。有没有一种简单的方法可以在不解压缩的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-18T08:19:06.390

没有什么可以自动执行您想要的操作。

但是，有一个 python zipfile 模块可以让这很容易做到。以下是如何遍历文件中的行。

```
#!/usr/bin/python

import zipfile
f = zipfile.ZipFile('myfile.zip')

for subfile in f.namelist():
    print subfile
    data = f.read(subfile)
    for line in data.split('\n'):
        print line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-18T08:06:30.707

您可以遍历 zip 文件，使用 zipfile 模块读取单个文件并在这些文件上运行您的正则表达式，从而无需一次解压缩所有文件。

我相当确定您不能对压缩数据运行正则表达式，至少没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T08:10:57.577

要访问 zip 文件的内容，您必须将其解压缩，尽管 zipfile 包使这相当容易，因为您可以单独解压缩存档中的每个文件。

[Python 压缩文件模块](http://docs.python.org/lib/module-zipfile.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-03T14:42:10.323

读入 ZIP 的霍夫曼编码然后将正则表达式翻译成霍夫曼代码，这不是（至少理论上）可能吗？这可能比首先解压缩数据然后运行正则表达式更有效吗？

（注意：我知道这不会那么简单：您还必须处理 ZIP 编码的其他方面——文件布局、块结构、反向引用——但可以想象这可能是相当轻量级的。）

编辑：另请注意，仅使用该解决方案可能更明智`zipfile`。

# c - 提高 OpenCV 中的相机捕获分辨率

> ID：14287
> 
> 赞同：52
> 
> 时间：2008-08-18T07:45:33.057
> 
> 标签：c, image, opencv, webcam, resolutions

在我的 C/C++ 程序中，我使用[OpenCV](http://opencvlibrary.sourceforge.net/)从我的网络摄像头捕获图像。相机 ( [Logitech QuickCam IM](http://en.wikipedia.org/wiki/Quickcam) ) 可以以**320x240、640x480**和**1280x960的****分辨率**进行拍摄。但是，出于某种奇怪的原因，OpenCV 只给了我**320x240**分辨率的图像。**使用cvSetCaptureProperty()**和其他分辨率值更改分辨率的调用不起作用。如何使用我的网络摄像头捕捉其他分辨率的图像？

 ******* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-04-03T12:40:21.170

我在windows下使用openCV 1.1pre1（windows下这个版本的openCv默认使用videoinput库）。

使用这些说明，我可以设置相机分辨率。请注意，我调用旧的 cvCreateCameraCapture 而不是 cvCaptureFromCam。

```
capture = cvCreateCameraCapture(cameraIndex);

cvSetCaptureProperty( capture, CV_CAP_PROP_FRAME_WIDTH, 640 );

cvSetCaptureProperty( capture, CV_CAP_PROP_FRAME_HEIGHT, 480 );

videoFrame = cvQueryFrame(capture); 
```

我已经用 Logitech、Trust 和 Philips 网络摄像头对其进行了测试

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-08-18T07:46:15.300

似乎没有解决办法。使用[lifebelt77](http://tech.groups.yahoo.com/group/OpenCV/message/28735)共享的这个技巧，分辨率可以*增加到***640x480**。以下是转载的细节：

 *添加到**highgui.h**：

```
#define CV_CAP_PROP_DIALOG_DISPLAY 8
#define CV_CAP_PROP_DIALOG_FORMAT 9
#define CV_CAP_PROP_DIALOG_SOURCE 10
#define CV_CAP_PROP_DIALOG_COMPRESSION 11
#define CV_CAP_PROP_FRAME_WIDTH_HEIGHT 12 
```

将函数**icvSetPropertyCAM_VFW**添加到**cvcap.cpp**：

```
static int icvSetPropertyCAM_VFW( CvCaptureCAM_VFW* capture, int property_id, double value )
{
    int result = -1;
    CAPSTATUS capstat;
    CAPTUREPARMS capparam;
    BITMAPINFO btmp;

    switch( property_id )
    {
        case CV_CAP_PROP_DIALOG_DISPLAY:
            result = capDlgVideoDisplay(capture->capWnd);
            //SendMessage(capture->capWnd,WM_CAP_DLG_VIDEODISPLAY,0,0);
            break;

        case CV_CAP_PROP_DIALOG_FORMAT:
            result = capDlgVideoFormat(capture->capWnd);
            //SendMessage(capture->capWnd,WM_CAP_DLG_VIDEOFORMAT,0,0);
            break;

        case CV_CAP_PROP_DIALOG_SOURCE:
            result = capDlgVideoSource(capture->capWnd);
            //SendMessage(capture->capWnd,WM_CAP_DLG_VIDEOSOURCE,0,0);
            break;

        case CV_CAP_PROP_DIALOG_COMPRESSION:
            result = capDlgVideoCompression(capture->capWnd);
            break;

        case CV_CAP_PROP_FRAME_WIDTH_HEIGHT:
            capGetVideoFormat(capture->capWnd, &btmp, sizeof(BITMAPINFO));
            btmp.bmiHeader.biWidth = floor(value/1000);
            btmp.bmiHeader.biHeight = value-floor(value/1000)*1000;
            btmp.bmiHeader.biSizeImage = btmp.bmiHeader.biHeight *
            btmp.bmiHeader.biWidth * btmp.bmiHeader.biPlanes *
            btmp.bmiHeader.biBitCount / 8;
            capSetVideoFormat(capture->capWnd, &btmp, sizeof(BITMAPINFO));
            break;

        default:
            break;
    }

    return result;
} 
```

并编辑**captureCAM_VFW_vtable**如下：

```
static CvCaptureVTable captureCAM_VFW_vtable =
{
6,
(CvCaptureCloseFunc)icvCloseCAM_VFW,
(CvCaptureGrabFrameFunc)icvGrabFrameCAM_VFW,
(CvCaptureRetrieveFrameFunc)icvRetrieveFrameCAM_VFW,
(CvCaptureGetPropertyFunc)icvGetPropertyCAM_VFW,
(CvCaptureSetPropertyFunc)icvSetPropertyCAM_VFW, // was NULL
(CvCaptureGetDescriptionFunc)0
}; 
```

现在重建**highgui.dll**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-19T00:20:02.300

我之前在 linux 中完成了图像处理并跳过了 OpenCV 的内置相机功能，因为它（正如你所发现的）不完整。

根据您的操作系统，与通过 openCV 相比，您可能更幸运地通过正常渠道直接访问硬件。如果您使用的是 Linux，video4linux 或 video4linux2 应该可以让您相对轻松地访问 USB 网络摄像头，并且您可以使用 libavc1394 进行火线。根据您所遵循的示例代码的设备和质量，您应该能够在一两个小时内以您想要的参数运行设备。

编辑添加：如果它的 Windows，你是你自己的。我想这并不难，但我从来没有做过。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-01T17:15:00.380

我强烈建议使用[VideoInput lib](http://muonics.net/school/spring05/videoInput/)，它支持任何 DirectShow 设备（甚至同时支持多个设备）并且更具可配置性。您将花 5 分钟时间让它与 OpenCV 一起玩。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2010-10-28T10:33:09.593

查看这张票： [https ://code.ros.org/trac/opencv/ticket/376](https://code.ros.org/trac/opencv/ticket/376)

“解决方案是使用更新的基于 libv4l 的包装器。

1.  安装 libv4l-dev （这就是它在 Ubuntu 中的调用方式）

2.  重新运行cmake，你会看到“V4L/V4L2: Using libv4l”

3.  重新运行。现在可以更改分辨率。在 MBP 上使用内置 isight 进行测试。”

这为我使用 Ubuntu 修复了它，也可能对你有用。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-09-03T20:26:00.340

一旦 Aaron Haun 指出我需要在使用 set 函数的参数之前定义它们，我终于可以在 Python 中工作了。

```
#Camera_Get_Set.py
#By Forrest L. Erickson of VRX Company Inc. 8-31-12.
#Opens the camera and reads and reports the settings.
#Then tries to set for higher resolution.
#Workes with Logitech C525 for resolutions 960 by 720 and 1600 by 896

import cv2.cv as cv
import numpy

CV_CAP_PROP_POS_MSEC = 0
CV_CAP_PROP_POS_FRAMES = 1
CV_CAP_PROP_POS_AVI_RATIO = 2
CV_CAP_PROP_FRAME_WIDTH = 3
CV_CAP_PROP_FRAME_HEIGHT = 4
CV_CAP_PROP_FPS = 5
CV_CAP_PROP_POS_FOURCC = 6
CV_CAP_PROP_POS_FRAME_COUNT = 7
CV_CAP_PROP_BRIGHTNESS = 8
CV_CAP_PROP_CONTRAST = 9
CV_CAP_PROP_SATURATION = 10
CV_CAP_PROP_HUE = 11

CV_CAPTURE_PROPERTIES = tuple({
CV_CAP_PROP_POS_MSEC,
CV_CAP_PROP_POS_FRAMES,
CV_CAP_PROP_POS_AVI_RATIO,
CV_CAP_PROP_FRAME_WIDTH,
CV_CAP_PROP_FRAME_HEIGHT,
CV_CAP_PROP_FPS,
CV_CAP_PROP_POS_FOURCC,
CV_CAP_PROP_POS_FRAME_COUNT,
CV_CAP_PROP_BRIGHTNESS,
CV_CAP_PROP_CONTRAST,
CV_CAP_PROP_SATURATION,
CV_CAP_PROP_HUE})

CV_CAPTURE_PROPERTIES_NAMES = [
"CV_CAP_PROP_POS_MSEC",
"CV_CAP_PROP_POS_FRAMES",
"CV_CAP_PROP_POS_AVI_RATIO",
"CV_CAP_PROP_FRAME_WIDTH",
"CV_CAP_PROP_FRAME_HEIGHT",
"CV_CAP_PROP_FPS",
"CV_CAP_PROP_POS_FOURCC",
"CV_CAP_PROP_POS_FRAME_COUNT",
"CV_CAP_PROP_BRIGHTNESS",
"CV_CAP_PROP_CONTRAST",
"CV_CAP_PROP_SATURATION",
"CV_CAP_PROP_HUE"]

capture = cv.CaptureFromCAM(0)

print ("\nCamera properties before query of frame.")
for i in range(len(CV_CAPTURE_PROPERTIES_NAMES)):
#    camera_valeus =[CV_CAPTURE_PROPERTIES_NAMES, foo]
    foo = cv.GetCaptureProperty(capture, CV_CAPTURE_PROPERTIES[i])
    camera_values =[CV_CAPTURE_PROPERTIES_NAMES[i], foo]
#    print str(camera_values)
    print str(CV_CAPTURE_PROPERTIES_NAMES[i]) + ": " + str(foo)

print ("\nOpen a window for display of image")
cv.NamedWindow("Camera", 1)
while True:
    img = cv.QueryFrame(capture)
    cv.ShowImage("Camera", img)
    if cv.WaitKey(10) == 27:
        break
cv.DestroyWindow("Camera")

#cv.SetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH, 1024)
#cv.SetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT, 768)
cv.SetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH, 1600)
cv.SetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT, 896)

print ("\nCamera properties after query and display of frame.")
for i in range(len(CV_CAPTURE_PROPERTIES_NAMES)):
#    camera_valeus =[CV_CAPTURE_PROPERTIES_NAMES, foo]
    foo = cv.GetCaptureProperty(capture, CV_CAPTURE_PROPERTIES[i])
    camera_values =[CV_CAPTURE_PROPERTIES_NAMES[i], foo]
#    print str(camera_values)
    print str(CV_CAPTURE_PROPERTIES_NAMES[i]) + ": " + str(foo)

print ("/nOpen a window for display of image")
cv.NamedWindow("Camera", 1)
while True:
    img = cv.QueryFrame(capture)
    cv.ShowImage("Camera", img)
    if cv.WaitKey(10) == 27:
        break
cv.DestroyWindow("Camera") 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2011-04-28T10:06:45.590

我正在使用 debian 和 ubuntu，我遇到了同样的问题，我无法使用**CV_CAP_PROP_FRAME_WIDTH**和**CV_CAP_PROP_FRAME_HEIGHT更改视频输入的分辨率**

我发现原因是缺少图书馆。我通过突触安装了**lib4l-dev ，***重建*了 OpenCV，问题解决了！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-05-01T15:16:52.530

我发布这个是为了确保没有其他人在这个 setproperty 函数上浪费时间。我花了 2 天的时间来查看似乎没有任何效果。所以我挖出了代码（我第一次安装了这个库）。这就是实际发生的情况 - cvSetCaptureProperty，在 CvCapture 类中调用 setProperty，你看 setProperty 什么也没做。它只是返回假。相反，我将使用另一个库来为 OpenCV 提供捕获视频/图像。我正在使用 OpenCV 2.2

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-11-11T18:32:52.927

我发现在 Windows（从 Win98 到 WinXP SP3）中，OpenCV 经常会使用微软的 VFW 库进行摄像头访问。这样做的问题是它通常非常慢（比如最多 15 FPS 帧捕获）和错误（因此为什么 cvSetCaptureProperty 经常不起作用）。幸运的是，您通常可以在其他软件中更改分辨率（特别是“AMCAP”，这是一个易于使用的演示程序），它将影响 OpenCV 将使用的分辨率。例如，您可以运行 AMCAP 将分辨率设置为 640x480，然后 OpenCV 将从那时起默认使用该分辨率！

但是，如果您可以使用不同的 Windows 摄像头访问库，例如“videoInput”库[http://muonics.net/school/spring05/videoInput/](http://muonics.net/school/spring05/videoInput/)，它使用非常高效的 DirectShow（DirectX 的一部分）访问摄像头。或者，如果您拥有专业品质的相机，那么它通常会附带一个自定义 API，让您可以访问相机，您可以使用它来快速访问，并能够更改分辨率和许多其他功能。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-03-21T15:33:30.423

在 Windows 下尝试使用 VideoInput 库： [http ://robocraft.ru/blog/computervision/420.html](http://robocraft.ru/blog/computervision/420.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-06-06T09:52:00.793

> cvSetCaptureProperty（捕获，CV_CAP_PROP_FRAME_WIDTH，WIDTH）；
> 
> cvSetCaptureProperty（捕获，CV_CAP_PROP_FRAME_HEIGHT，HEIGHT）；
> 
> cvQueryFrame（捕获）；

这不适用于 OpenCV 2.2，但如果您使用 OpenCV 2.1，它将正常工作！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-06-12T09:56:29.140

如果您在 Windows 平台上，请尝试 DirectShow (IAMStreamConfig)。

[http://msdn.microsoft.com/en-us/library/dd319784%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/dd319784%28v=vs.85%29.aspx)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-10-01T04:52:34.703

对于难以更改默认捕获分辨率 (640 x 480) 的人来说，这只是一个有价值的信息！我用 opencv 2.4.x 和一台罗技相机对自己进行了这样的实验......并找到了一种解决方法！

我检测到的行为是默认格式设置为相机捕获开始时的初始参数（cvCreateCameraCapture），以及所有更改高度或宽度的请求：

```
cvSetCaptureProperty( capture, CV_CAP_PROP_FRAME_WIDTH, ... 
```

或者

```
cvSetCaptureProperty( capture, CV_CAP_PROP_FRAME_HEIGHT, ... 
```

以后都不可能了！实际上，我通过添加 ioctl 函数的返回错误发现 V4l2 驱动程序正在为该请求返回**EBUSY ！**因此，一种解决方法应该是直接在 highgui/cap_v4l.cpp 中更改默认值：

```
*#define DEFAULT_V4L_WIDTH  1280    // Originally 640* 

*#define DEFAULT_V4L_HEIGHT 720     // Originally 480* 
```

在那之后，我刚刚重新编译了**opencv** ...并没有任何问题地得到1280 x 720！当然，更好的解决方法应该是停止采集，更改参数，然后重新启动流，但我对 opencv 不够熟悉，无法做到这一点！

希望它会有所帮助。

米歇尔·贝吉

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2010-10-05T21:24:47.070

试试这个：

```
capture = cvCreateCameraCapture(-1);
//set resolution
cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH, frameWidth);
cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT, frameHeight); 
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2010-06-19T17:27:47.963

```
cvQueryFrame(capture);

cvSetCaptureProperty( capture, CV_CAP_PROP_FRAME_WIDTH, any_supported_size );

cvSetCaptureProperty( capture, CV_CAP_PROP_FRAME_HEIGHT, any_supported_size);

cvQueryFrame(capture); 
```

应该够了！*******

# opengl - GL_FRAMEBUFFER_INCOMPLETE_DUPLICATE_ATTACHMENT_EXT 错误

> ID：14297
> 
> 赞同：4
> 
> 时间：2008-08-18T07:59:07.617
> 
> 标签：opengl, fbo

我在我的 OpenGL 代码中使用[FBO](http://en.wikipedia.org/wiki/Framebuffer_Object)`GL\_FRAMEBUFFER\_INCOMPLETE\_DUPLICATE\_ATTACHMENT\_EXT`并且在. 这是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-18T07:59:23.763

这个错误的原因是 NVIDIA 的**glext.h**的旧版本，它仍然有这个定义。而最新版本的[GLEW](http://glew.sourceforge.net/)则没有。这会导致您之前编写或从 Web 获得的代码中出现编译错误。

FBO的**GL_FRAMEBUFFER_INCOMPLETE_DUPLICATE_ATTACHMENT_EXT**定义曾经出现在规范中（因此也出现在头文件中）。但是，它后来被删除了。原因可以在[FBO 扩展规范](http://oss.sgi.com/projects/ogl-sample/registry/EXT/framebuffer_object.txt)中找到（查找第 87 期）：

```
(87) What happens if a single image is attached more than once to a
     framebuffer object?

     RESOLVED: The value written to the pixel is undefined.

     There used to be a rule in section 4.4.4.2 that resulted in
     FRAMEBUFFER_INCOMPLETE_DUPLICATE_ATTACHMENT_EXT if a single
     image was attached more than once to a framebuffer object.

         FRAMEBUFFER_INCOMPLETE_DUPLICATE_ATTACHMENT_EXT   0x8CD8

         * A single image is not attached more than once to the
           framebuffer object.

           { FRAMEBUFFER_INCOMPLETE_DUPLICATE_ATTACHMENT_EXT }

     This rule was removed in version #117 of the
     EXT_framebuffer_object specification after discussion at the
     September 2005 ARB meeting.  The rule essentially required an
     O(n*lg(n)) search.  Some implementations would not need to do that
     search if the completeness rules did not require it.  Instead,
     language was added to section 4.10 which says the values
     written to the framebuffer are undefined when this rule is
     violated. 
```

要修复此错误，请从您的代码中删除对**GL_FRAMEBUFFER_INCOMPLETE_DUPLICATE_ATTACHMENT_EXT的所有使用。**

如果这在您的设置中是不可能的，那么在您的**glext.h**或**glew.h**文件中添加一个虚拟定义，如下所示：

```
#define GL_FRAMEBUFFER_INCOMPLETE_DUPLICATE_ATTACHMENT_EXT 0x8CD8 
```

# powershell - 如何让 Powershell 运行批处理文件然后保持打开状态？

> ID：14300
> 
> 赞同：22
> 
> 时间：2008-08-18T08:00:15.820
> 
> 标签：powershell, batch-file

例如; 使用旧的命令提示符将是：

```
cmd.exe /k mybatchfile.bat 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-08-18T08:10:30.633

放入一个 cmd 实例（或者实际上是 PowerShell 本身）并输入：

```
powershell -? 
```

您会看到 powershell.exe 有一个“-noexit”参数，告诉它在执行“启动命令”后不要退出。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-18T23:21:04.110

运行 PowerShell.exe 时，只需提供**-NoExit**开关，如下所示：

```
PowerShell -NoExit -File "C:\SomeFolder\SomePowerShellScript.ps1"

PowerShell -NoExit -Command "Write-Host 'This window will stay open.'" 
```

或者，如果您想运行一个文件，然后运行一个命令并让窗口保持打开状态，您可以执行以下操作：

```
PowerShell -NoExit "& 'C:\SomeFolder\SomePowerShellScript.ps1'; Write-Host 'This window will stay open.'" 
```

**如果没有提供-Command**参数是隐含的，这里我们使用**&**来调用 PowerShell 脚本，而**;** 分隔 PowerShell 命令。

[此外，在我的博客文章](http://blog.danskingdom.com/fix-problem-where-windows-powershell-cannot-run-script-whose-path-contains-spaces/)的底部，我展示了一个快速的注册表更改，您可以在执行脚本/命令后始终让 PowerShell 保持打开状态，这样您就不需要始终显式提供 -NoExit 开关所有时间。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2011-03-18T00:53:10.907

我相信你已经知道了，但我只是把它贴出来

```
$CreateDate = (Get-Date -format 'yyyy-MM-dd hh-mm-ss')

$RemoteServerName ="server name"
$process = [WMICLASS]"\\$RemoteServerName\ROOT\CIMV2:win32_process"  
$result = $process.Create("C:\path to a script\test.bat") 
$result | out-file -file "C:\some path \Log-$CreatedDate.txt" 
```

# email - 用于批量发送电子邮件的良好电子邮件服务

> ID：14303
> 
> 赞同：4
> 
> 时间：2008-08-18T08:04:46.123
> 
> 标签：email

刚刚发现我可能会放置一个站点的托管公司每天限制 1000 封电子邮件。

他们建议使用专门处理大量电子邮件的外部电子邮件服务。你们人用什么？stackoverflow 将使用什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-18T08:21:49.240

这是[AuthSMTP](http://authsmtp.com)价格表。不确定这是否是“最佳”服务，但它是主要服务之一。

[http://www.authsmtp.com/auth-smtp/pricing.html](http://www.authsmtp.com/auth-smtp/pricing.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-18T09:29:23.517

我使用过一家名为“ [Campaign Monitor](http://campaignmonitor.com/) ”的公司——它们在各方面都非常出色。

还有——你好阿图尔！希望一切都好;-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-07-20T17:29:56.533

这是一个老问题，但 2010 年提供的另一个选项是[MailChimp](http://mailchimp.com/)。

对于事务性电子邮件，请参阅[此问题](https://stackoverflow.com/questions/2317560/any-web-services-with-apis-for-outsourcing-webapp-email)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-08-05T19:11:32.310

Responsys、Eloqua、Acxiom Digital、Blue Hornet、Constant Contact、Marketo 等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-18T10:21:33.240

根据发送的电子邮件数量，您可以使用类似 Mail::Bulkmail 的 perl 模块，使用信封发送更少的电子邮件（SMTP 功能）。每个域只会发送一封电子邮件。然后该域的邮件服务器将负责复制邮件并将其发送给所有用户。唯一的问题是您不能使用动态电子邮件，例如每封邮件中的不同名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-18T11:04:26.493

有大量的经销商批量邮寄；像[http://www.ezemail.com](http://www.ezemail.com)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-18T11:41:55.280

> 该服务似乎有点陡峭

除了发送电子邮件之外，所有这些公司都将提供许多增值服务。他们不只是代表您发送电子邮件，或出租您的原始计算能力。

他们将为您的电子邮件活动分析、防止您的电子邮件被标记为垃圾邮件、帮助您的电子邮件外观（提供模板等）、跟踪退回邮件等功能做出贡献（或向上销售）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-07-28T21:56:20.177

我会推荐 [http://madmimi.com/](http://madmimi.com/)这是一项非常简单的服务，根据您的会员数量按月收费，它还有一个 API（目前非常简单），但它允许管理一些事情不同的应用，

顺便说一句，它还有一个不错的实时邮件跟踪功能！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-09-14T04:44:14.147

您可以使用 email-m.com - 基于 SAAS [Web 的电子邮件营销服务提供商](http://www.email-m.com)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-18T09:26:25.817

一个酒店/音乐场所我做各种拍摄/录音/电脑的东西，以供使用[Constant Contact](http://www.constantcontact.com/index.jsp)愉快。价格不错，使用起来很容易，我永远不需要帮助所有者，它提供了大量关于点击/反弹/等的信息

它不仅仅是一个 SMTP 服务器，您可以从中发送数千封电子邮件 - 不确定这是否是您想要的？

# version-control - 小型办公室处理文件的最佳方式是什么？

> ID：14308
> 
> 赞同：4
> 
> 时间：2008-08-18T08:08:39.983
> 
> 标签：version-control, versioning, file-management

我目前在一家小型网络开发公司工作，我们主要做活动网站和其他促销活动。在我们的第一年，我们一直在使用“服务器”来共享项目文件，这是一台具有网络共享的普通 Windows 机器。但这并不完全是未来的证明。

SVN 非常适合代码（这是我们现在使用的），但我希望对我们的所有或大部分文件进行版本控制（或至少某种形式的同步）。

*我本质上想要的是颠覆对代码所做的事情，但对于我们的文档/psd/pdf文件。*

我意识到 subversion 也可以处理二进制文件，但我觉得这对于我们的目的来说可能有点矫枉过正。它不一定需要完整版本控制系统的所有花里胡哨，但可以消除对增量命名的需要（Notes_1.23.doc）并减少错误覆盖某些内容的机会。

它还需要是多平台的，可以处理大文件（100 mb+）并且可以被一些非技术人员使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-18T08:24:48.157

SVN 也非常适合二进制文件。如果您担心无法比较修订版，我可以告诉您 Word 文档可以使用 Tortoise。
但我不知道，“扩展版本控制”是什么意思。SVN 不是文档管理系统。

编辑：

> 但我觉得这对我们的目的来说可能有点矫枉过正

如果您已经在使用 SVN 并且它可以满足您的目的，为什么还要使用第二个系统呢？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-18T09:46:45.807

如果您有 Windows 2003 服务器，可以查看 Sharepoint Services 3.0 ( [http://technet.microsoft.com/en-us/windowsserver/sharepoint/bb684453.aspx](http://technet.microsoft.com/en-us/windowsserver/sharepoint/bb684453.aspx) )。

它可以对文档进行版本控制，并且与 Office 有很好的集成，从 Office xp 开始，但 Office 2003 和 2007 更好。Office 和 PDF 文件可以被索引（通过 Adob​​e IFilter）和搜索。您还可以添加 IFilter 来搜索文档中的元数据。

对于大文件，默认情况下最大文件大小为 50MB，但可以配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-18T09:00:35.790

我们刚刚搬到[Perforce](http://perforce.com/)并且对它非常满意。它是一种商业产品，但它功能强大且易于使用，值得每座恕我直言的价格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-18T10:30:21.787

一个体面的文件夹结构和命名方案？

VCS 并不能真正处理图像，而且非常好 - 是否有可能在 VCS（SVN/Git/Mercurial 等）中拥有代码，以及二进制资产的合理文件夹结构（源照片，Photoshop PSD文件、Illustrator 文件等）？

它不会处理同步，但中央文件服务器会实现同样的事情。

这需要一些强制执行和小猫放牧才能让人们正确命名事物，但我认为为每个资产（如 someproject/asset/header_logo/v01/header_logo_v01.psd）拥有一个版本文件夹基本上就像一个 VCS，但更容易在不同的版本之间移动（`vcs checkout blah -r 234`当客户决定他们更喜欢 v02 而不是 v03 时）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-18T13:47:01.843

您的问题很有趣，因为您指定它适用于小型办公室。在企业级别，我会推荐一些类似于[EMC Documentum 的 eRoom 的](http://www.emc.com/products/family/eroom-family.htm)东西，但显然这将远远超出您的需要，而且在成本方面也超出您的预期。我不确定这方面的许可细节，但我听说如果你的办公室有 MS Office，你就可以访问 Sharepoint，这可能对你很有效。我也确信有很多这类东西的[SAAS](http://en.wikipedia.org/wiki/Software_as_a_Service)实现，所以你可能想看看，记住服务器不会由你托管，所以如果材料非常敏感，那很明显不是正确的路线。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-18T08:55:07.813

您可能需要考虑使用 Mac 作为服务器并使用[Time Machine](http://www.apple.com/macosx/features/timemachine.html)来备份您的共享文件夹。这样做可以为您提供自动备份，并允许您通过 Samba 进行共享，这样每个人都可以在他们的计算机上拥有一个[网络驱动器。](http://support.microsoft.com/kb/308582)Mac 服务器可能是矫枉过正。Mac Mini 适用于小型办公室或改用台式机。

您也可以考虑[使用 Amazon 的 S3 服务](http://www.amazon.com/gp/browse.html?node=16427261)来进行离线备份。由于它是一种即用即付服务，因此可以随使用而扩展，如果您想转移到其他地方，您可以随时下载您的数据并将其带到其他地方。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-16T16:24:22.633

Windows Vista 在其文件系统中具有本地文件版本控制功能，这很有用，但在团队合作方面受到限制。但是，如果有人覆盖了其他人的文件，则会按原样存储新版本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-16T16:34:29.820

还要考虑知识树。看看它，一些演示/屏幕截图可在 [http://www.knowledgetree.com/获得](http://www.knowledgetree.com/)

它有一个免费的开源社区版——因此它具有成本效益。我们还没有尝试过，但我们选择了这个系统而不是其他系统，用于寻找文档版本控制解决方案的小型企业。

# opengl - 使用大于窗口/显示大小的 OpenGL 纹理

> ID：14310
> 
> 赞同：10
> 
> 时间：2008-08-18T08:09:10.840
> 
> 标签：opengl, textures

我在使用大于 OpenGL 窗口或显示尺寸的纹理作为非显示渲染目标时遇到问题。
这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-18T08:09:23.990

有一个简单的解决方案。

假设您的（非显示）纹理为**1024x1024**，并且您被限制为**256x256**窗口/显示。

```
unsigned int WIN_WIDTH = 256;
unsigned int WIN_HEIGHT = WIN_WIDTH;
unsigned int TEX_WIDTH = 1024;
unsigned int TEX_HEIGHT = TEX_WIDTH; 
```

使用*窗口大小*来创建您的 OpenGL 窗口：

```
glutInitWindowSize(WIN_WIDTH, WIN_HEIGHT); 
```

但是，将*纹理大小*用于其他所有内容：

```
glViewport(0, 0, TEX_WIDTH, TEX_HEIGHT);
gluOrtho2D(0.0, TEX_WIDTH, 0.0, TEX_HEIGHT);
glTexCoord2i(TEX_WIDTH, TEX_HEIGHT); 
```

# opengl - 使用 GLUT 位图字体

> ID：14318
> 
> 赞同：19
> 
> 时间：2008-08-18T08:18:27.827
> 
> 标签：opengl, fonts, bitmap, glut

我正在编写一个`OpenGL`使用`GLUT`. 我不想滚动自己的字体渲染代码，而是想使用`GLUT`. 让他们工作的步骤是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-08-18T08:18:38.433

在 OpenGL 中使用 GLUT 位图字体很容易实现简单的文本显示。这些是简单的 2D 字体，*不*适合*在*3D 环境中显示。但是，它们非常适合需要覆盖在显示窗口上的文本。

以下是在 GLUT 窗口上以绿色显示 Eric Cartman 最喜欢的名言的示例步骤：

我们将在屏幕坐标中设置光栅位置。因此，为 2D 渲染设置投影和模型视图矩阵：

```
glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();
gluOrtho2D(0.0, WIN_WIDTH, 0.0, WIN_HEIGHT);

glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity(); 
```

设置字体颜色。（现在设置，不要稍后设置。）

```
glColor3f(0.0, 1.0, 0.0); // Green 
```

设置应显示文本的窗口位置。这是通过在屏幕坐标中设置光栅位置来完成的。窗口的左下角是 (0, 0)。

```
glRasterPos2i(10, 10); 
```

**使用glutBitmapCharacter**设置字体并显示字符串字符。

```
string s = "Respect mah authoritah!";
void * font = GLUT_BITMAP_9_BY_15;
for (string::iterator i = s.begin(); i != s.end(); ++i)
{
    char c = *i;
    glutBitmapCharacter(font, c);
} 
```

恢复矩阵。

```
glMatrixMode(GL_MODELVIEW);
glPopMatrix();

glMatrixMode(GL_PROJECTION);
glPopMatrix(); 
```

# colors - RGB 到单色转换

> ID：14330
> 
> 赞同：19
> 
> 时间：2008-08-18T08:27:32.910
> 
> 标签：colors, rgb, monochrome

如何将像素的 RGB 值转换为单个单色值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-08-18T08:27:43.830

我在[颜色常见问题解答](http://www.poynton.com/notes/colour_and_gamma/ColorFAQ.html)中找到了一种可能的解决方案。*亮度分量*Y（来自*CIE XYZ 系统*）在一个通道中捕获人类最感知的颜色。所以，使用这些系数：

```
mono = (0.2125 * color.r) + (0.7154 * color.g) + (0.0721 * color.b); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-25T08:19:59.660

这篇[最近的科学文章](http://cadik.posvete.cz/color_to_gray_evaluation/)比较了将彩色照片转换为灰度的最新技术，包括简单的亮度公式和更复杂的技术。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-18T08:40:50.403

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb332387.aspx#tbconimagecolorizer_grayscaleconversion)使用`(0.299 * color.R + 0.587 * color.G + 0.114 * color.B);`

[这篇维基百科文章](http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale)使用`(0.3* color.R + 0.59 * color.G + 0.11 * color.B);`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-18T19:38:49.233

这取决于你的动机是什么。如果您只想将任意图像转换为灰度并让它看起来不错，那么此问题的其他答案中的转换就可以了。

如果您要将彩色照片转换为黑白，则该过程可能非常复杂且主观，需要对每张图像进行特定调整。要了解可能涉及的内容，请查看 Adob​​e for Photoshop 的本[教程](http://www.adobe.com/designcenter/photoshop/articles/phscs2mrblkwht.html)。

在代码中复制这一点相当复杂，并且仍然需要用户干预才能获得美学上“完美”的结果图像（无论这意味着什么！）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-25T08:30:01.367

如前所述，来自 RGB 三元组的灰度转换（请注意，单色图像不必是灰度的）取决于口味。

例如，您可以作弊，只提取蓝色分量，只需将红色和绿色分量扔掉，然后复制蓝色值来代替它们。另一个简单且通常可以的解决方案是取像素的 RGB 三元组的平均值，并在所有三个分量中使用该值。

仅用于 Photoshop 的专业且不是很便宜的灰度/单色转换器插件就有相当大的市场这一事实表明，转换与您希望的一样简单或复杂。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-10T09:50:23.130

将任何基于 RGB 的图片转换为单色的逻辑都不是简单的线性变换。在我看来，这样的问题最好通过“颜色分割”技术来解决。您可以通过 k-means 聚类实现“颜色分割”。

请参阅 MathWorks 网站上的参考示例。

[https://www.mathworks.com/examples/image/mw/images-ex71219044-color-based-segmentation-using-k-means-clustering](https://www.mathworks.com/examples/image/mw/images-ex71219044-color-based-segmentation-using-k-means-clustering)

**原图彩色。**

[![带颜色的图片](../Images/b6f7e00bc6c48e7496143e72da02c714.png)](https://i.stack.imgur.com/EcHkr.png)

**使用 k-means 聚类转换为单色后** [![使用 k-means 聚类转换为单色后的图片](../Images/2d81339eb960a1e4559b97c7789e1e63.png)](https://i.stack.imgur.com/VaLea.png)

**这是如何运作的？**

从整个图像中收集所有像素值。从 W 像素宽和 H 像素高的图像中，您将获得 W *H 颜色值。现在，使用 k-means 算法创建 2 个集群（或箱）并将颜色放入适当的“箱”中。2 个簇代表您的黑白色调。

**Youtube 视频演示使用 k-means 进行图像分割？** [https://www.youtube.com/watch?v=yR7k19YBqiw](https://www.youtube.com/watch?v=yR7k19YBqiw)

**这种方法的挑战**

k-means 聚类算法容易受到异常值的影响。RGB 距离远离其他人群的颜色的一些随机像素很容易使质心倾斜，从而产生意想不到的结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-15T21:07:16.847

只是为了在自选答案中指出，您必须先*线性*化 sRGB 值，然后才能应用系数。这意味着移除转移曲线。

要去除功率曲线，请将 8 位 RG 和 B 通道除以 255.0，然后使用推荐用于图像处理的[sRGB 分段变换](https://www.myndex.com/WEB/LuminanceContrast)，或者您可以作弊并将每个通道提高到 2.2 的幂。

只有在线性化之后才能应用显示的系数（在所选答案中也不完全正确）。

标准是**0.2126 0.7152**和**0.0722**。将每个通道乘以其系数，然后将它们相加得到 Y，即亮度。然后将伽玛重新应用到 Y 并乘以 255，然后复制到所有三个通道，然后你就有了一个灰度（单色）图像。

这一切都在一个简单的行中：

```
// Andy's Easy Greyscale in one line.
// Send it sR sG sB channels as 8 bit ints, and
// it returns three channels sRgrey sGgrey sBgrey
// as 8 bit ints that display glorious grey.

  sRgrey = sGgrey = sBgrey = Math.min(Math.pow((Math.pow(sR/255.0,2.2)*0.2126+Math.pow(sG/255.0,2.2)*0.7152+Math.pow(sB/255.0,2.2)*0.0722),0.454545)*255),255); 
```

就是这样。除非你必须解析十六进制字符串......

# opengl - Cygwin下的OpenGL开始

> ID：14344
> 
> 赞同：15
> 
> 时间：2008-08-18T08:48:34.037
> 
> 标签：opengl, cygwin

是否可以在 Cygwin 下编译和运行 OpenGL 程序？如果是，如何？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-18T08:50:35.327

可以在 Cygwin 下编译和运行 OpenGL 程序。我在这里说明基本步骤：

1.  我假设你知道 OpenGL 编程。如果没有，请获取[红皮书](http://www.opengl-redbook.com/)（*The OpenGL Programming Guide*）。无论如何，它是 OpenGL 的必读。

2.  我假设你已经安装了 Cygwin。如果没有，请访问[cygwin.com](http://www.cygwin.com/)并安装它。

3.  要编译和运行 OpenGL 程序，您需要名为**opengl**的 Cygwin 包。在 Cygwin 安装程序中，可以在*图形部分*下找到它。请安装此软件包。

4.  编写一个简单的 OpenGL 程序，比如*ogl.c*。

5.  使用标志**-lglut32 -lglu32 -lopengl32**编译程序。（这会将您的程序与 GLUT、GLU 和 OpenGL 库链接起来。OpenGL 程序通常可能会使用这三个库中的所有函数。）例如：

    > $ gcc ogl.c -lglut32 -lglu32 -lopengl32

6.  运行程序。就这么简单！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-04T20:43:15.680

如果上述方法不起作用（并且对我不起作用），请尝试以下方法（确实如此！）

gcc ogl.c -lglut -lglu -lgl

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-23T21:09:33.757

我记得几年前做过一次并取得了一些成功，基本上是在尝试交叉编译一个小型 Linux OpenGL C++ 程序。我确实记得 Windows OpenGL 驱动程序落后于时代的问题（由于 MS 专注于 DirectX）。我在我的 Windows 系统上安装了 NVidia OpenGL 和 DirectX 驱动程序，但 cygwin/g++ 似乎只想使用多年前的 Microsoft OpenGL DLL，它们没有对所有 ARB 扩展的最新支持，如着色器程序等.YMMV。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-21T21:19:57.867

我通常不会发布这么长的答案，但这是值得的。

我将为**Cygwin提供一个****Windows 10 64 位**设置，它使用与**Visual Studio***相同的库*。您将能够使用相同的代码（相同的包含和库）使用两个开发环境，因此您可以根据需要在两者之间切换。

 *****您需要三个库：**OpenGL**、**GLEW**和**GLFW**。

1.  *OpenGL*

**Visual Studio：**以下默认位置适用于当前版本的 Windows 10 和 Visual Studio 2019。

OpenGL静态库：

```
C:\Program Files(x86)\Microsoft Visual Studio\2019\Community\SDK\ScopeCPPSDK\vc15\lib\SDK\lib\opengl32.lib 
```

OpenGL DLL：

```
C:\Windows\SysWOW64\opengl32.dll 
```

该`opengl32.lib`库需要在 VS 项目下指定`Properties -> Configuration Properties -> Linker -> Input -> Additional Dependencies`。这同样适用于 Visual Studio 下的所有其他动态库。我不会再提了。

**赛格温：**

OpenGL静态库默认位置：

```
/lib/w32api/libopengl32.a 
```

OpenGL 动态库（使用 Windows DLL）：

```
C:\Windows\SysWOW64\opengl32.dll 
```

2.  *GLEW*

**Visual Studio：**从自定义文件夹下载 32 位/64 位二进制文​​件`http://glew.sourceforge.net/`并安装在自定义文件夹中，例如`C:\OpenGL\glew-2.1.0`. 相同的下载适用于 Visual Studio 和 Cygwin。

GLEW 标头（到`#include GL/glew.h`）：

```
C:\OpenGL\glew-2.1.0\include 
```

GLEW 静态库：

```
C:\OpenGL\glew-2.1.0\lib\Release\x64\glew32.lib 
```

GLEW DLL：

```
C:\OpenGL\glew-2.1.0\bin\Release\x64\glew32.dll 
```

这些可以在你的 VS 项目的属性菜单中指定。

**Cygwin：**您可以按原样从 Cygwin 链接到此库，这意味着您可以为您的 、 和变量指定其下载目录，`INCS`如下`LIBS`所示`LDLIBS`（`Makefile`与上面指定的下载目录一致）：

GLEW 头文件目录：

```
/cygdrive/c/OpenGL/glew-2.1.0/include 
```

GLEW 静态库目录：

```
/cygdrive/c/OpenGL/glew-2.1.0/lib/Release/x64 
```

GLEW动态库目录：

```
/cygdrive/c/OpenGL/glew-2.1.0/bin/Release/x64 
```

分别使用、 和的这些值`INCS`，然后您可以使用 UNIX 命名约定进行链接，如文章底部完整的 、 所示。`LIBS``LDLIBS``Makefile`

3.  *GLFW*

这可以在 下载`https://www.glfw.org/download`。对于我们的 64 位设置，您需要 Windows 64 位预编译二进制文件。您也可以将其放在自定义文件夹中，例如`C:\OpenGL\glfw-3.3.4.bin.WIN64`. 相同的下载适用于 VS 和 Cygwin。

**Visual Studio：** 您可以将下载位置直接指定到项目属性中，`#include GLFW/glfw3.h`分别用于标头（在源代码中）和 DLL（让 VS 链接到这些库）。

**Cygwin：** 对于 Cygwin，GLFW 比较棘手，因为您不能再直接从下载位置链接到它。你需要：

(a) 从下载位置复制标题、静态和动态库：

```
C:\OpenGL\glfw-3.3.4.bin.WIN64\include\GLFW\*.h
C:\OpenGL\glfw-3.3.4.bin.WIN64\lib-mingw-w64\*.a
C:\OpenGL\glfw-3.3.4.bin.WIN64\lib-mingw-w64\*.dll 
```

...进入您的工具链（MinGW）各自的位置：

GLFW 标头（创建`include`目录）：

```
/usr/x86_64-w64-mingw32/include/GLFW/*.h 
```

GLFW 静态库：

```
/usr/x86_64-w64-mingw32/lib/*.a 
```

GLFW 动态库：

```
/usr/x86_64-w64-mingw32/bin/*.dll 
```

(b) 将动态库位置放入您的 PATH 环境变量中，可在您`.bash_profile`的主目录中的文件中进行编辑。

`Makefile`Cygwin 是：

```
CC=/usr/bin/x86_64-w64-mingw32-c++.exe
OPTS=-std=c++11
DEBUG=-g
CFLAGS=-Wall -c ${DEBUG}

INCS=  -I.\
       -I/cygdrive/c/OpenGL/glew-2.1.0/include\
       -I/cygdrive/c/cygwin64/usr/x86_64-w64-mingw32

LIBS=   -L/usr/lib\
        -L/cygdrive/c/OpenGL/glew-2.1.0/lib/Release/x64\
        -L/cygdrive/c/cygwin64/usr/x86_64-w64-mingw32/lib

LDLIBS= -L/bin\
        -L/cygdrive/c/OpenGL/glew-2.1.0/bin/Release/x64\
        -L/cygdrive/c/cygwin64/usr/x86_64-w64-mingw32\bin

Program.o:  Program.cpp
            ${CC} ${OPTS} ${INCS} -c $<

Program:    Program.o
            ${CC} ${OPTS} ${LIBS} ${LDLIBS} Program.o -lopengl32 -lglew32 -lglew32.dll -lglfw3 -lgdi32 -luser32 -o Program 
```

通过此设置，您可以在 VS 和 Cygwin 中使用完全相同的源代码文件。`Program.exe`您可以使用以下命令从 Cygwin 中的目录编译、链接和运行：

```
$ make Program
$ ./Program.exe 
```

`*.exe`您可以通过将现有项目作为 SLN 项目打开并使用 IDE 界面运行它来从 VS 运行 Cygwin 编译的程序。相反，您可以使用上面的命令直接从 Cygwin 命令行运行 VS 可执行文件（由 VS 在`Project/Debug`或中创建）。`Project/Release`

包括：

```
#include <GL/glew.h>
#include <GLFW/glfw3.h> 
```

无需对源代码进行任何更改即可在黑白 VS 和 Cygwin 之间来回切换。快乐编码:-)*****

# apache-flex - 如何使用 Flash (AS3) 从远程域调用 Flex SWF？

> ID：14350
> 
> 赞同：2
> 
> 时间：2008-08-18T08:53:39.423
> 
> 标签：apache-flex, flash, actionscript-3, security

我有一个托管在[http://www.a.com/a.swf](http://www.a.com/a.swf)的 Flex swf 。我在另一个尝试加载 SWF 的域上有一个 flash 代码：

```
_loader = new Loader();
var req:URLRequest = new URLRequest("http://services.nuconomy.com/n.swf");
_loader.contentLoaderInfo.addEventListener(Event.COMPLETE,onLoaderFinish);
_loader.load(req); 
```

在 onLoaderFinish 事件中，我尝试从远程 SWF 加载类并创建它们：

```
_loader.contentLoaderInfo.applicationDomain.getDefinition("someClassName") as Class 
```

当此代码运行时，我得到以下异常

```
SecurityError: Error #2119: Security sandbox violation: caller http://localhost.service:1234/flashTest/Main.swf cannot access LoaderInfo.applicationDomain owned by http://www.b.com/b.swf.
    at flash.display::LoaderInfo/get applicationDomain()
    at NuconomyLoader/onLoaderFinish() 
```

有什么办法可以让这段代码工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-18T09:59:50.697

这在第 550 页[的 Adob​​e Flex 3 Programming ActionScript 3 PDF](http://livedocs.adobe.com/flex/3/progAS_flex3.pdf)（第 27 章：Flash Player 安全性/跨脚本）中有全部描述：

> 如果使用 ActionScript 3.0 编写的两个 SWF 文件来自不同的域（例如，[http](http://siteA.com/swfA.swf) ://siteA.com/swfA.swf和[http://siteB.com/swfB.swf](http://siteB.com/swfB.swf)），则默认情况下，Flash Player 不会允许 swfA.swf 编写 swfB.swf 脚本，也不允许 swfB.swf 编写 swfA.swf 脚本。SWF 文件通过调用 Security.allowDomain() 授予对来自其他域的 SWF 文件的权限。通过调用 Security.allowDomain("siteA.com")，swfB.swf 授予来自 siteA.com 的 SWF 文件编写脚本的权限。

它会更详细地进行，包括图表和所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-18T10:03:36.630

您需要在具有您加载文件的服务器上的 crossdomain.xml 策略文件，它应该看起来像这样：

```
<?xml version="1.0"?>
<!-- http://www.foo.com/crossdomain.xml -->
<cross-domain-policy>
  <allow-access-from domain="www.friendOfFoo.com" />
  <allow-access-from domain="*.foo.com" />
  <allow-access-from domain="105.216.0.40" />
</cross-domain-policy> 
```

将其作为 crossdomain.xml 放在要从中加载的域的根目录中。

您还需要将加载程序设置为读取此文件：

```
var loaderContext:LoaderContext = new LoaderContext();
loaderContext.checkPolicyFile = true;

var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener( Event.COMPLETE, onComplete );
loader.load( new URLRequest( "http://my.domain.com/image.png" ), loaderContext ); 
```

[来自http://blog.log2e.com/2008/08/15/when-a-cross-domain-policy-file-is-not-enough/](http://blog.log2e.com/2008/08/15/when-a-cross-domain-policy-file-is-not-enough/)的代码示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T09:36:26.063

也许[System.Security.allowDomain](http://livedocs.adobe.com/flex/15/flex_docs_en/wwhelp/wwhimpl/common/html/wwhelp.htm?context=Flex_Documentation&file=00001750.htm "Flex 文档：System.Security.allowDomain")是你需要的？

# opengl - 在 Cg 中访问 OpenGL 状态变量

> ID：14358
> 
> 赞同：3
> 
> 时间：2008-08-18T09:10:54.290
> 
> 标签：opengl, variables, state, cg

我需要在我的 Cg 着色器程序中访问*OpenGL 状态变量*（例如 MVP 矩阵）。我正在使用诸如`cgGLSetStateMatrixParameter()`C/C++ 代码中的调用手动将这些值传递给我的 Cg 着色器程序。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-18T09:11:13.117

如果您使用的是任何最近的*Cg 配置文件*（*arbvp1*和更高版本），您的 Cg 着色器程序实际上可以直接访问 OpenGL 状态（MVP 矩阵、材质和灯光设置）。这使得编写这些程序不那么痛苦。

以下是一些可以访问的状态变量：

所有类型的 MVP 矩阵：

```
state.matrix.mvp
state.matrix.inverse.mvp
state.matrix.modelview
state.matrix.inverse.modelview
state.matrix.modelview.invtrans
state.matrix.projection
state.matrix.inverse.projection 
```

光和材料特性：

```
state.material.ambient
state.material.diffuse
state.material.specular
state.light[0].ambient 
```

有关状态变量的完整列表，请参阅*[Cg 用户手册](http://developer.nvidia.com/object/cg_toolkit.html)*中的**访问 OpenGL 状态、OpenGL ARB 顶点程序配置文件 (arbvp1)**部分。

笔记：

*   在 Cg 中访问时，所有 OpenGL 状态变量都是**统一类型的。**
*   对于*轻*变量，*索引*是强制性的。（例如：*state.light[1].ambient*中的 1 ）
*   不需要启用照明或灯光以使用 Cg 内的那些相应的灯光值。但是，它们需要使用**glLight()**函数进行设置。

# c# - .Net 动态插件加载权限

> ID：14359
> 
> 赞同：1
> 
> 时间：2008-08-18T09:10:56.427
> 
> 标签：c#, .net, plugins, assemblies, dynamics-crm

对于必须执行以下操作的系统，您可以给出哪些建议：

加载插件（并最终执行它们），但有两种加载这些插件的方法：

*   仅加载授权插件（由软件所有者开发）
*   加载所有插件

而且我们需要相当安全地确保授权插件是真实的（未修改的）。但是，所有插件都必须在单独的程序集中。我一直在考虑为插件使用强命名程序集，并将公钥存储在加载程序应用程序中，但对我来说，修改加载程序应用程序中的公钥（如果用户如此倾向于）似乎太容易了，不管加载程序应用程序的任何混淆。还有更安全的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-08-18T09:14:30.973

基本上，如果您将代码放在其他人的机器上，则没有绝对的安全保证。

您可以查看各种安全技巧，但最后，代码在他们的机器上，因此不受您的控制。

如果最终用户加载未经授权的插件，您会损失多少？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-18T09:20:43.910

> 如果最终用户加载未经授权的插件，您会损失多少？

诚然，这不会经常发生，但是当/如果确实发生时，我们会损失很多，虽然我知道我们不会产生任何 100% 安全的东西，但我想让它成为一个足以阻止人们这样做的障碍。

使用具有完整强名称的简单动态加载的烦人之处在于，即使插件已签名，只需在加载器应用程序中进行简单的字符串文字更改即可加载任何其他程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T10:48:55.947

你可以扩大你的问题：“我怎样才能保护我的 .net 程序集免受逆向工程？”

答案是——你不能。对于那些还没有看过它的人，只需查找“reflector”，然后在一些幼稚的 exe 上运行它。

（顺便说一句，这始终是您无法控制的代码的答案，只要您没有随它一起发送加密/解密硬件），

混淆试图使逆向工程比开发更难（花费更多的钱），并且对于某些类型的算法它成功了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T12:06:59.947

签署程序集。

> 强名称签名或强命名为软件组件提供了一个全球唯一的身份，其他人无法对其进行欺骗。强名称用于保证组件依赖项和配置语句映射到正确的组件和组件版本。

[http://msdn.microsoft.com/en-us/library/h4fa028b(VS.80).aspx](http://msdn.microsoft.com/en-us/library/h4fa028b(VS.80).aspx)

# opengl - 有效的 OpenGL 上下文

> ID：14364
> 
> 赞同：4
> 
> 时间：2008-08-18T09:17:17.693
> 
> 标签：opengl, glut

在我的代码中如何以及在什么阶段创建有效的 OpenGL 上下文？即使是简单的 OpenGL 代码，我也会遇到错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-18T09:17:46.193

从上的帖子来看`comp.graphics.api.opengl`，似乎大多数新手都在为他们的第一个 OpenGL 程序而烦恼。在大多数情况下，错误是由于在创建有效的 OpenGL 上下文之前调用 OpenGL 函数引起的。OpenGL是一个状态机。只有机器启动并在就绪状态下嗡嗡作响，才能投入工作。

下面是一些创建有效 OpenGL 上下文的简单代码：

```
#include <stdlib.h>
#include <GL/glut.h>

// Window attributes
static const unsigned int WIN_POS_X = 30;
static const unsigned int WIN_POS_Y = WIN_POS_X;
static const unsigned int WIN_WIDTH = 512;
static const unsigned int WIN_HEIGHT = WIN_WIDTH;

void glInit(int, char **);

int main(int argc, char * argv[])
{
    // Initialize OpenGL
    glInit(argc, argv);

    // A valid OpenGL context has been created.
    // You can call OpenGL functions from here on.

    glutMainLoop();

    return 0;
}

void glInit(int argc, char ** argv)
{
    // Initialize GLUT
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE);
    glutInitWindowPosition(WIN_POS_X, WIN_POS_Y);
    glutInitWindowSize(WIN_WIDTH, WIN_HEIGHT);
    glutCreateWindow("Hello OpenGL!");

    return;
} 
```

笔记：

*   这里感兴趣的电话是`glutCreateWindow()`。它不仅创建了一个窗口，而且还创建了一个 OpenGL 上下文。
*   创建的窗口在被调用`glutCreateWindow()`之前是不可见`glutMainLoop()`的。

# opengl - 过剩弹出菜单

> ID：14370
> 
> 赞同：6
> 
> 时间：2008-08-18T09:22:49.833
> 
> 标签：opengl, glut, menu

为我的 OpenGL 应用程序创建 GLUT 弹出菜单是否容易？如果是，如何？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-18T09:23:11.627

使用 GLUT 创建和使用弹出菜单非常简单。下面是一个创建带有 4 个选项的弹出菜单的代码示例：

```
// Menu items
enum MENU_TYPE
{
        MENU_FRONT,
        MENU_SPOT,
        MENU_BACK,
        MENU_BACK_FRONT,
};

// Assign a default value
MENU_TYPE show = MENU_BACK_FRONT;

// Menu handling function declaration
void menu(int);

int main()
{
        // ...

        // Create a menu
        glutCreateMenu(menu);

        // Add menu items
        glutAddMenuEntry("Show Front", MENU_FRONT);
        glutAddMenuEntry("Show Back", MENU_BACK);
        glutAddMenuEntry("Spotlight", MENU_SPOT);
        glutAddMenuEntry("Blend 'em all", MENU_BACK_FRONT);

        // Associate a mouse button with menu
        glutAttachMenu(GLUT_RIGHT_BUTTON);

        // ...

        return;
}

// Menu handling function definition
void menu(int item)
{
        switch (item)
        {
        case MENU_FRONT:
        case MENU_SPOT:
        case MENU_DEPTH:
        case MENU_BACK:
        case MENU_BACK_FRONT:
                {
                        show = (MENU_TYPE) item;
                }
                break;
        default:
                {       /* Nothing */       }
                break;
        }

        glutPostRedisplay();

        return;
} 
```

# svn - CVS 到 SVN 的转换和重组分支

> ID：14373
> 
> 赞同：6
> 
> 时间：2008-08-18T09:26:17.487
> 
> 标签：svn, cvs

我正在从现有的 CVS 存储库转换为 SVN 存储库。CVS 存储库的分支很少，我想在转换时重命名分支。

想要的转换是这样的：

```
CVS branch         SVN branch
HEAD       ->      branches/branchX
branchA    ->      trunk
branchB    ->      branches/branchB
branchC    ->      branches/branchC 
```

也就是说，CVS HEAD 变成了一个普通的分支，而 CVS 的 branchA 变成了 SVN 主干。

CVS 和 SVN 存储库都将在同一台 linux 机器上。

怎么可能做到这一点？

CVS branchA 成为 SVN 主干并且所有其他 CVS 分支都被忽略的转换可能就足够了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-18T10:08:26.090

> 我对保存提交历史特别感兴趣。如果我在转换后在 SVN 中重命名和移动分支，会保留历史记录吗？

是的。Subversion 还跟踪目录结构的更改，即使文件在树中移动，所有版本历史记录也会保留。

我建议使用[cvs2svn](http://cvs2svn.tigris.org/)转换存储库，包括分支和标签。一旦存储库在 Subversion 中，您可以随意移动分支和标签。这也保留了被重命名的实际标签和分支的历史，这在以后的历史背景中可能会很有趣。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-18T09:34:58.280

自从我进行 CVS -> SVN 转换以来已经有一段时间了，自从我使用非平凡的分支结构进行转换以来可能更久。由于 SVN 可以相当容易地在目录树中移动，您可以先进行整个转换，然后再在 SVN 中完全整理出主干/分支结构。

如果您确实达到了这一点并且正在 SVN 中移动整个目录树，那么最好在每个树重命名/移动步骤之后提交。只是要记住的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-18T09:34:19.373

Subversion 分支是目录，因此您可以在导入完成后移动分支，不会丢失任何历史记录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-24T19:47:36.657

一些额外的信息来支持接受的答案：

cvs2svn 不允许从主干到分支或从分支到主干的转换

所以一旦你转换成 svn 就移动东西是最好的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-17T10:09:23.943

可以在转换后移动主干和分支目录，但这需要一个显式的转换后 SVN 提交，该提交将保留在您的 SVN 历史记录中，使历史探索更加复杂。

`--symbol-hints=symbol-hints.txt`但是您确实可以通过使用命令行选项或（如果您使用选项文件进行转换）`SymbolHintsFileRule('symbol-hints.txt')`符号策略规则来告诉 cvs2svn 将主干和分支存储到您想要的 SVN 路径，其中`symbol-hints.txt`包含行的文件如下所示：

```
. .trunk. trunk branches/branchX .
. branchX branch trunk . 
```

请注意，某些由 cvs2svn 自动生成的提交消息（例如，用于创建分支）会提及原始分支名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-03T18:57:14.127

尽管可以在转换完成后移动分支，但最好设置 cvs2svn 配置文件以准确指定每个现有分支所需的名称。这样做的好处之一是 FishEye 会更好地理解输出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T09:59:53.130

我对保存提交历史特别感兴趣。如果我在转换后在 SVN 中重命名和移动分支，会保留历史记录吗？

# c# - LINQ，在映射中实现接口和异常的实体

> ID：14375
> 
> 赞同：10
> 
> 时间：2008-08-18T09:28:22.520
> 
> 标签：c#, linq, repository

我在 LINQ 中使用存储库模式，有 IRepository.DeleteOnSubmit(T Entity)。它工作正常，但是当我的实体类有接口时，像这样：

```
public interface IEntity { int ID {get;set;} }

public partial class MyEntity: IEntity {

    public int ID { 
        get { return this.IDfield; }
        set { this.IDfield=value;  }
    }
} 
```

然后尝试删除一些这样的实体：

```
IEntity ie=repository.GetByID(1);
repoitory.DeleteOnSubmit(ie); 
```

throws
成员 'IEntity.ID' 没有支持的 SQL 转换。

从数据库中获取数据有效，但删除和插入无效。如何对 DataContext 使用接口？

* * *

这里是：
异常消息：成员“MMRI.DAL.ITag.idContent”没有支持的 SQL 转换。

代码：

```
var d = repContent.GetAll().Where(x => x.idContent.Equals(idContent));
foreach (var tagConnect in d)    <- error line
{
    repContet.DeleteOnSubmit(tagConnect); 
```

（它从数据库中获取所有标签，并删除它们）

和堆栈跟踪：

```
[NotSupportedException: The member 'MMRI.DAL.ITag.idContent' has no supported translation to SQL.]
   System.Data.Linq.SqlClient.Visitor.VisitMember(SqlMember m) +621763
   System.Data.Linq.SqlClient.SqlVisitor.Visit(SqlNode node) +541
   System.Data.Linq.SqlClient.SqlVisitor.VisitExpression(SqlExpression exp) +8
   System.Data.Linq.SqlClient.SqlVisitor.VisitBinaryOperator(SqlBinary bo) +18
   System.Data.Linq.SqlClient.Visitor.VisitBinaryOperator(SqlBinary bo) +18
   System.Data.Linq.SqlClient.SqlVisitor.Visit(SqlNode node) +196
   System.Data.Linq.SqlClient.SqlVisitor.VisitExpression(SqlExpression exp) +8
   System.Data.Linq.SqlClient.SqlVisitor.VisitSelectCore(SqlSelect select) +46
   System.Data.Linq.SqlClient.Visitor.VisitSelect(SqlSelect select) +20
   System.Data.Linq.SqlClient.SqlVisitor.Visit(SqlNode node) +1024
   System.Data.Linq.SqlClient.SqlProvider.BuildQuery( ... 
```

当我尝试装饰部分类时：

```
[Column(Storage = "_idEvent", DbType = "Int NOT NULL", IsPrimaryKey = true)]
public int idContent
{ get { return this.idEvent; } set { this.idEvent=value; } } 
```

它抛出错误“无效的列名'idContent'。”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-15T14:05:55.260

在 MVC4 中使用 linq-to-sql 时，微软似乎放弃了对`==`接口中运算符的支持（或者可能从未支持过）。但是，您可以使用`i.ID.Equals(someId)`代替`==`运算符。

铸造`IQueryable`到`IEnumerable`作品，但**不应该使用！**原因是：`IQueryable`有时髦的`IEnumerable`. 无论您将`IQueryable`通过`IEnumerable`接口在 a 上使用什么 linq 方法，都会首先执行查询，将所有结果从数据库中提取到内存中，并最终在数据上本地运行该方法（通常这些方法将被转换为 SQL并在数据库中执行）。想象一下，试图从包含十亿行的表中获取单行，获取所有行只是为了选择一个（如果粗心地转换`IQueryable`to`IEnumerable`和延迟加载相关数据，情况会变得更糟）。

显然，Linq 使用`==`带有本地数据接口的运算符（因此仅`IQueryable`受到影响）以及实体框架（或者我听说过）都没有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-01-15T04:48:13.977

这对我有用-

```
public partial class MyEntity: IEntity 
 {    [Column(Name = "IDfield", Storage = "_IDfield", IsDbGenerated = true)]
      public int ID 
       {         
          get { return this.IDfield; }        
          set { this.IDfield=value;  }    
       } 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T09:33:29.610

尝试这个：

```
using System.Data.Linq.Mapping;

public partial class MyEntity: IEntity 
 {    [Column(Storage="IDfield", DbType="int not null", IsPrimaryKey=true)]
      public int ID 
       {         
          get { return this.IDfield; }        
          set { this.IDfield=value;  }    
       } 
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-15T10:16:29.857

为了将您的 LINQ 查询转换为实际的 SQL，Linq2SQL 会检查您给它的表达式。问题是您没有为 L2S 提供足够的信息，无法将“ID”属性转换为实际的数据库列名。您可以通过确保 L2S 可以将“ID”映射到“IDField”来实现您想要的。

使用答案中提供的方法应该可以做到这一点。

如果您使用设计器，您还可以简单地将类属性“IDField”重命名为“ID”，额外的好处是您不必再在分部类中显式实现“ID”属性，即分部类MyEntity 的定义简单地变成：

```
public partial class MyEntity: IEntity 
{    
} 
```

# opengl - 在 GLUT 中使用鼠标滚轮

> ID：14378
> 
> 赞同：34
> 
> 时间：2008-08-18T09:29:34.593
> 
> 标签：opengl, glut, scrollwheel

我想在我的 OpenGL GLUT 程序中使用鼠标滚轮来放大和缩小场景？我怎么做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2011-10-25T07:08:52.280

Freeglut 的 glutMouseWheelFunc 回调取决于版本，在 X 中不可靠。使用标准鼠标功能并测试按钮 3 和 4。

OpenGlut 关于 glutMouseWheelFunc 状态的注释：

> 由于缺乏有关鼠标的信息，目前无法在 X 上正确实现这一点。使用此功能会限制应用程序的可移植性。（此功能在 X 上确实有效，只是不可靠。）我们鼓励您使用标准的、可靠的鼠标按钮报告，而不是滚轮事件。

使用标准 GLUT 鼠标报告：

```
#include <GL/glut.h>

<snip...>

void mouse(int button, int state, int x, int y)
{
   // Wheel reports as button 3(scroll up) and button 4(scroll down)
   if ((button == 3) || (button == 4)) // It's a wheel event
   {
       // Each wheel event reports like a button click, GLUT_DOWN then GLUT_UP
       if (state == GLUT_UP) return; // Disregard redundant GLUT_UP events
       printf("Scroll %s At %d %d\n", (button == 3) ? "Up" : "Down", x, y);
   }else{  // normal button event
       printf("Button %s At %d %d\n", (state == GLUT_DOWN) ? "Down" : "Up", x, y);
   }
}

<snip...>

glutMouseFunc(mouse); 
```

正如 OP 所说，它“非常简单”。他错了。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-08-18T09:29:49.010

请注意，古老[的 Nate Robin 的 GLUT](http://www.xmission.com/~nate/glut.html)库不支持滚轮。但是，像[FreeGLUT](http://freeglut.sourceforge.net/)这样的 GLUT 的后续实现确实如此。

在 FreeGLUT 中使用滚轮非常简单。方法如下：

声明一个回调函数，当滚轮滚动时调用该回调函数。这是原型：

```
void mouseWheel(int, int, int, int); 
```

使用（免费）GLUT 函数**glutMouseWheelFunc()**注册回调。

```
glutMouseWheelFunc(mouseWheel); 
```

定义回调函数。第二个参数给出滚动的方向。+1 的值是向前的，-1 是向后的。

```
void mouseWheel(int button, int dir, int x, int y)
{
    if (dir > 0)
    {
        // Zoom in
    }
    else
    {
        // Zoom out
    }

    return;
} 
```

就是这样！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-14T16:41:09.383

在 mouseClick 回调中观察下面 switch 语句中的情况 3 和 4

```
glutMouseFunc(mouseClick); 
```

...

```
void mouseClick(int btn, int state, int x, int y) {
  if (state == GLUT_DOWN) {
    switch(btn) {
    case GLUT_LEFT_BUTTON:
      std::cout << "left click at: (" << x << ", " << y << ")\n";
      break;
    case GLUT_RIGHT_BUTTON:
      std::cout << "right click at: (" << x << ", " << y << ")\n";
      break;
    case GLUT_MIDDLE_BUTTON:
      std::cout << "middle click at: (" << x << ", " << y << ")\n";
      break;
    case 3:  //mouse wheel scrolls
      std::cout << "mouse wheel scroll up\n";
      break;
    case 4:
      std::cout << "mouse wheel scroll down\n";
      break;
    default:
      break;
    }
  }
  glutPostRedisplay();
} 
```

# visual-c++ - fopen 弃用警告

> ID：14386
> 
> 赞同：70
> 
> 时间：2008-08-18T09:38:58.913
> 
> 标签：visual-c++, fopen, deprecated

在*Visual Studio 2005 C++ 编译器上，当我的代码使用***fopen**和此类调用时，我收到以下警告。

```
1>foo.cpp(5) : warning C4996: 'fopen' was declared deprecated
1>        c:\program files\microsoft visual studio 8\vc\include\stdio.h(234) : see declaration of 'fopen'
1>        Message: 'This function or variable may be unsafe. Consider using fopen_s instead. To disable deprecation, use _CRT_SECURE_NO_DEPRECATE. See online help for details.' 
```

我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2008-08-18T09:39:16.510

看起来微软已经弃用了许多使用缓冲区来提高代码安全性的调用。然而，他们提供的解决方案并不便携。无论如何，如果您对使用他们调用的安全版本（如**fopen_s**）不感兴趣，则需要在包含的头文件之前放置**_CRT_SECURE_NO_DEPRECATE的定义。**例如：

```
#define _CRT_SECURE_NO_DEPRECATE
#include <stdio.h> 
```

预处理器指令也可以添加到您的项目设置中，以影响项目下的所有文件。为此，将**_CRT_SECURE_NO_DEPRECATE**添加到*Project Properties -> Configuration Properties -> C/C++ -> Preprocessor -> Preprocessor Definitions*。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2008-08-18T12:18:13.647

那么你可以添加一个：

```
#pragma warning (disable : 4996) 
```

在您使用 fopen 之前，您是否考虑过按照警告提示使用 fopen_s？它返回一个错误代码，允许您检查函数调用的结果。

仅禁用已弃用的函数警告的问题在于，Microsoft 可能会在 CRT 的更高版本中删除有问题的函数，从而破坏您的代码（如下面的评论中所述，在 fopen 的这种情况下不会发生这种情况，因为它是C & C++ ISO 标准）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-11-12T17:34:49.640

这只是微软厚脸皮。根据标准委员会的规定，“已弃用”表示标准语言/标准库的未来版本中可能不会提供的语言功能。它并不或不应该意味着“我们单方面认为您不应该使用它”，无论该建议多么有根据。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2011-11-09T18:02:20.830

如果您的代码适用于不同的操作系统（如 Mac OS X、Linux），您可以使用以下内容：

```
#ifdef _WIN32
#define _CRT_SECURE_NO_DEPRECATE
#endif 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-07-15T03:35:23.293

我正在使用 VisualStdio 2008。在这种情况下，我经常设置**`Preprocessor Definitions`**

> **菜单 \ 项目 \ [项目名称] 属性... Alt+F7**

如果单击此菜单或在项目窗口中按 Alt + F7，您可以看到**“属性页”**窗口。

然后查看窗口左侧的菜单。

> **配置属性\C/C++\预处理器**

然后添加**`_CRT_SECURE_NO_WARNINGS`**到**\Preprocessor Definitions**。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-18T11:15:58.880

考虑使用像[glib](http://www.gtk.org/)或[apache 可移植运行时](http://apr.apache.org/)这样的可移植库。这些通常为此类调用提供安全、便携的替代方案。这也是一件好事，因为这些不安全的调用在大多数现代环境中已被弃用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-24T09:57:23.680

如果您希望它在许多平台上使用，您可以按照评论使用定义如下：

```
#if defined(_MSC_VER) || defined(WIN32)  || defined(_WIN32) || defined(__WIN32__) \
                        || defined(WIN64)    || defined(_WIN64) || defined(__WIN64__) 

        errno_t err = fopen_s(&stream,name, "w");

#endif

#if defined(unix)        || defined(__unix)      || defined(__unix__) \
                        || defined(linux)       || defined(__linux)     || defined(__linux__) \
                        || defined(sun)         || defined(__sun) \
                        || defined(BSD)         || defined(__OpenBSD__) || defined(__NetBSD__) \
                        || defined(__FreeBSD__) || defined __DragonFly__ \
                        || defined(sgi)         || defined(__sgi) \
                        || defined(__MACOSX__)  || defined(__APPLE__) \
                        || defined(__CYGWIN__) 

        stream = fopen(name, "w");

#endif 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-04T02:38:26.177

Microsoft 的许多安全函数，包括 fopen_s()，都是 C11 的一部分，因此它们现在应该是可移植的。您应该意识到，安全函数的异常行为不同，有时返回值也不同。此外，您需要注意，虽然这些功能是标准化的，但它是至少 glibc（Linux 上的默认设置）和 FreeBSD 的 libc 没有实现的标准（附件 K）的*可选部分。*

然而，我与这个问题斗争了几年。我在这里发布了一组更大的转换宏[。](https://stackoverflow.com/questions/6234682/need-a-define-for-visual-studio-versions-that-include-secure-string-functions/35191283#35191283), 对于您的直接问题，请将以下代码放入包含文件中，并将其包含在您的源代码中：

```
#pragma once
#if !defined(FCN_S_MACROS_H)
   #define   FCN_S_MACROS_H

   #include <cstdio>
   #include <string> // Need this for _stricmp
   using namespace std;

   // _MSC_VER = 1400 is MSVC 2005\. _MSC_VER = 1600 (MSVC 2010) was the current
   // value when I wrote (some of) these macros.

   #if (defined(_MSC_VER) && (_MSC_VER >= 1400) )

      inline extern
      FILE*   fcnSMacro_fopen_s(char *fname, char *mode)
      {  FILE *fptr;
         fopen_s(&fptr, fname, mode);
         return fptr;
      }
      #define fopen(fname, mode)            fcnSMacro_fopen_s((fname), (mode))

   #else
      #define fopen_s(fp, fmt, mode)        *(fp)=fopen( (fmt), (mode))

   #endif //_MSC_VER

#endif // FCN_S_MACROS_H 
```

当然，这种方法并没有实现预期的异常行为。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-03-20T16:03:40.323

对于那些使用 Visual Studio 2017 版本的人来说，运行不安全操作所需的预处理器定义似乎发生了变化。改用：

```
#define _CRT_SECURE_NO_WARNINGS 
```

然后它会编译。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-30T17:10:55.423

我也遇到了同样的问题。当我尝试添加 opencv 库时

```
#include <opencv\cv.h> 
```

我得到的不是警告而是错误。

```
error C4996: 'fopen': This function or variable may be unsafe. Consider using fopen_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.    c:\program files (x86)\opencv\build\include\opencv2\flann\logger.h 
```

我还使用了前面提到的预处理器指令。但这并没有解决问题。

我通过以下方式解决了它：

*   **转到 Properties -> C/C++ -> Precompiled Headers -> 选择 Not Using Precompiled Headers in Precompiled Header。**

# python - 正则表达式和 unicode

> ID：14389
> 
> 赞同：30
> 
> 时间：2008-08-18T09:41:14.273
> 
> 标签：python, regex, unicode, character-properties

我有一个脚本可以解析电视剧集的文件名（例如 show.name.s01e02.avi），获取剧集名称（来自 www.thetvdb.com API）并自动将它们重命名为更好的名称（显示名称 - [01x02 ].avi)

该脚本运行良好，直到您尝试在具有 Unicode 显示名称的文件上使用它（这是我从未真正想过的，因为我拥有的所有文件都是英文的，所以几乎所有文件都属于`[a-zA-Z0-9'\-]`）

如何允许正则表达式匹配重音字符等？目前正则表达式的配置部分看起来像..

```
config['valid_filename_chars'] = """0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@£$%^&*()_+=-[]{}"'.,<>`~? """
config['valid_filename_chars_regex'] = re.escape(config['valid_filename_chars'])

config['name_parse'] = [
    # foo_[s01]_[e01]
    re.compile('''^([%s]+?)[ \._\-]\[[Ss]([0-9]+?)\]_\[[Ee]([0-9]+?)\]?[^\\/]*$'''% (config['valid_filename_chars_regex'])),
    # foo.1x09*
    re.compile('''^([%s]+?)[ \._\-]\[?([0-9]+)x([0-9]+)[^\\/]*$''' % (config['valid_filename_chars_regex'])),
    # foo.s01.e01, foo.s01_e01
    re.compile('''^([%s]+?)[ \._\-][Ss]([0-9]+)[\.\- ]?[Ee]([0-9]+)[^\\/]*$''' % (config['valid_filename_chars_regex'])),
    # foo.103*
    re.compile('''^([%s]+)[ \._\-]([0-9]{1})([0-9]{2})[\._ -][^\\/]*$''' % (config['valid_filename_chars_regex'])),
    # foo.0103*
    re.compile('''^([%s]+)[ \._\-]([0-9]{2})([0-9]{2,3})[\._ -][^\\/]*$''' % (config['valid_filename_chars_regex'])),
] 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-08-18T09:43:10.493

使用`[\u0000-\uFFFF]`您想要的子范围。

您也可以使用`re.UNICODE`编译标志。[文档](http://docs.python.org/lib/re-syntax.html)说如果`UNICODE`设置，`\w`将匹配字符`[0-9_]`加上在 Unicode 字符属性数据库中归类为字母数字的任何内容。

另见[http://coding.derkeiler.com/Archive/Python/comp.lang.python/2004-05/2560.html](http://coding.derkeiler.com/Archive/Python/comp.lang.python/2004-05/2560.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-04-01T23:19:55.527

Python 的 re 模块不支持 \p{Letter} 或 \X。但是，[PyPI 上的新正则表达式实现](http://pypi.python.org/pypi/regex)确实如此。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-18T10:17:35.340

在 Jeffrey Friedl 的 Mastering Regular Expressions（好书）中提到，您可以使用 \p{Letter} 来匹配被视为字母的 unicode 内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-18T09:53:13.860

\X 似乎在某些语言中可用作通用单词字符，它允许您匹配单个字符而不管它占用多少字节。可能有用。

# svn - 托管源代码控制托管和与 CVSDude 和 CruiseControl.net 的持续集成

> ID：14395
> 
> 赞同：3
> 
> 时间：2008-08-18T09:49:56.440
> 
> 标签：svn, version-control, build-process, cruisecontrol.net

对于我自己在家的项目，我正在使用来自[CVSDude](http://cvsdude.com/)的相当出色的托管颠覆托管。因为现在只有我在处理代码，所以我没有使用 CruiseControl.net，但是我预计这将在接下来的几个月内发生变化，并且希望在签入时启动完整的构建过程。

有没有人设法让 CruiseControl.net 与 CVSDude 一起工作？我的同事 Mike 有这篇[博](http://mikehadlow.blogspot.com/2008/01/more-on-source-repository-hosting-what.html)文，来自 CVSDude 的人说：

> “您可以使用我们的提交后回调工具来调用您服务器上的 URL，该 URL 传递与上次签入相关的变量（我们的规范中详述的变量）。您的 CGI 脚本将处理这些变量并执行所需的任何任务，即更新 Cruise控制等”

听起来很可爱。但是有人*真的*用巡航控制做过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-13T18:47:55.687

我从 CVSDude 收到了这封电子邮件：

> 我们目前正在开发新版本的服务，最终将包括 CruiseControl 集成。

：-/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-16T10:48:35.820

不知道您是否仍然感兴趣，但我们有 CruiseControl（最初的基于 Java 的，不是 .NET，但这应该无关紧要）与 CVSDude 一起工作 - 它只是`svn log`每分钟检查是否有任何变化。我们计划改用他们的 API，但不幸`svn log`的是，实时更新有些滞后。

# java - 何时应该将多模块项目拆分为单独的存储库树？

> ID：14397
> 
> 赞同：7
> 
> 时间：2008-08-18T09:51:18.153
> 
> 标签：java, svn, osgi

目前我们有一个具有标准颠覆存储库布局的项目：

./trunk
./branches
./tags

然而，随着我们沿着 OSGi 和模块化项目的道路前进，我们最终得到了：

./trunk/bundle/main
./trunk/bundle/modulea
./trunk/bundle/moduleb ./tags/bundle/main-1.0.0
./tags/bundle/main-1.0.1
./tags/bundle/modulea -1.0.0

“构建”仍然非常单一，因为它按顺序构建所有模块，尽管我开始怀疑我们是否应该将构建/存储库重构为更像：

./bundle/main/trunk
./bundle/main/tags/main-1.0.0
./bundle/main/tags/main-1.0.1
./bundle/modulea/trunk
./bundle/modulea/tags/modulea- 1.0.0

在这种模式下，我会想象每个模块都构建自己，并将其二进制文件存储在存储库中（maven、ivy 或 subversion 存储库本身的其他路径）。

一旦模块化，是否有关于项目布局的指导方针或“最佳实践”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-18T10:45:46.640

Subversion 书包含两个部分：

*   [存储库布局](http://svnbook.red-bean.com/en/1.4/svn.branchmerge.maint.html#svn.branchmerge.maint.layout)
*   [规划您的存储库组织](http://svnbook.red-bean.com/en/1.4/svn.reposadmin.planning.html#svn.reposadmin.projects.chooselayout)

关于主题的博客条目：[“Subversion Repository Layout”](http://blogs.collab.net/subversion/subversion_repo)

不过，简短的回答是：虽然您的里程会有所不同（每种情况都是单独的），但您的`/bundle/<project>/(trunk|tags|branches)`方案相当普遍，并且可能对您很有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-18T10:27:55.473

这在很大程度上取决于个人喜好，但我发现以下结构适合由许多模块组成的大型项目：

```
分支机构
  项目名
    模块1
      分店名称
    模块2   
      可能是另一个分支名称
    更高级别的分支名称，包括两个模块
      模块1
      模块2
标签
  ...（与分支相同）
树干
  项目名
    模块1
    模块2

```

我还经常在包含许多项目的大型存储库中使用这种结构，因为将所有项目保存在同一个存储库中可以更轻松地交叉引用项目并在它们之间共享代码（带有历史记录）。

我喜欢从一开始就使用带有根主干、标签和分支文件夹的结构，因为根据我的经验（包含许多项目的大型存储库），许多子项目和模块永远不会有单独的标签或分支，所以没有必要为他们创建文件夹结构。它还使开发人员更容易检查存储库的整个主干，而不是获取所有标签和分支（他们大部分时间都不需要）。

我想这是项目或公司政策的问题。如果每个项目都有一个存储库，或者给定的开发人员一次只可能在存储库中处理一个项目，那么有根主干可能没有多大意义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-04T12:04:35.207

就我的两分钱...

我只想强调 SVN 文档中的评论（已在另一个答案中引用，同一线程）[http://svnbook.red-bean.com/en/1.4/svn.reposadmin.planning.html#svn.reposadmin.projects .chooselayout](http://svnbook.red-bean.com/en/1.4/svn.reposadmin.planning.html#svn.reposadmin.projects.chooselayout)

摘录引用了以下结构：/trunk/calc/calendar/电子表格/……标签/calc/日历/电子表格/……分支/calc/日历/电子表格/

“这种布局没有什么特别不正确的地方，但它对您的用户来说可能看起来那么直观，也可能不那么直观。尤其是在有许多用户的大型多项目情况下，这些用户可能往往只熟悉其中的一两个项目在存储库中。但是项目作为分支兄弟往往不强调项目的个性，而是将整个项目集作为一个整体来关注。不过，这是一个社会问题。我们喜欢我们最初建议的安排，纯粹是出于实际原因——当有一个单一的存储库路径保存该项目和该项目的整个历史（过去、现在、标记和分支）时，更容易询问（或修改或迁移到其他地方）单个项目的整个历史。”

就我自己而言，我倾向于非常同意这一点，并更喜欢以下布局：/utils/calc/trunk/tags/branches/calendar/trunk/tags/branches/…office/电子表格/trunk/tags/branches/

原因很简单，当人们只想标记一个特定的子集时，标记一个完整的项目集是不切实际的。

让我们举个例子：如果 project-1 依赖于 moduleA v1.1 和 moduleB v2.3，我不希望更新的 moduleA v2.x 出现在标签中。事实上，当几天/几周/几个月后回到这个标记版本时，我将被迫打开 project-1 标记版本中的包描述符以读取实际需要的 moduleA 版本。

此外，如果我必须将此版本的源代码特定备份到 CD 上，我只想导出此标签，而不需要下载数百兆字节的无关内容。

这只是我的两分钱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-20T08:13:59.340

我在 StackOverflow[版本控制结构问题中回答了类似的问题](https://stackoverflow.com/questions/16829/structure-of-projects-in-version-control#16915)。它实际上更适合这里，因为我们进行了大量的 OSGi 开发并且有很多捆绑包。我必须回应 Anders Sandvig 的评论：将主干/标签/分支保持在根级别，因为您只会分支一组有限的模块。它也不会干扰单独构建的模块。

我不会复制我之前做出的答案，但它与这个问题完全相关。

# visual-studio - Visual Studio 中的类设计器 - 值得吗？

> ID：14398
> 
> 赞同：14
> 
> 时间：2008-08-18T09:51:36.763
> 
> 标签：visual-studio, class-design, class-designer

有人在 Visual Studio 中大量使用类设计器吗？

我已经下载了 2005 年的 Modeling Power Toys，并且对我迄今为止所看到的印象深刻。MSDN 类设计器博客似乎有一段时间没有更新了，但看起来还是很有用的。

类设计器是构建基本应用程序的快速方法，还是我应该在纸上练习然后开始编码？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-08-19T00:24:39.280

作为一种可视化工具，或用于探索目的（绘制多个选项以查看它们的外观），它还不错，但通常我发现对象浏览器对于我关心的大多数内容都很好。

作为一个代码生成工具，这是一个糟糕的主意。

我们将首先设计所有代码结构，然后用少量实现来填补空白的整个想法从根本上被打破了。

你真正知道代码结构应该是什么样子的唯一时间是，如果你以前做过**完全相同**的事情 - 但是你可以**使用**你以前的代码，你不需要在任何地方编写任何新代码一种设计师。

如果您在实际尝试解决问题之前提前决定使用特定的类结构，那么您将有 100% 的机会选择错误的设计，并自取其辱。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-18T09:54:12.157

简短的回答：没有。

更长的答案：不，一点也不。没更新是有原因的。

[编辑] @MrBrutal - 对不起 - 你的意思是生成代码还是仅仅代表一个设计？因为我把你的问题当作为你生成代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T06:29:19.760

我想这是旧的，但我经常使用它。它肯定可以改进，但我发现能够可视化我的类结构并能够通过直观地单击跳转到特定的类或方法非常有用。

与解决方案资源管理器相比，添加类/接口也稍微容易一些，尽管新文件始终位于根文件夹中，而不是与 CD 相同的文件夹中。

我发现的主要好处是能够一次看到一组密切相关的类。我认为最好的方法可能是为每个代码文件夹/命名空间制作一张 CD。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-18T10:23:56.340

我已经使用它几次来获得一些看起来不错的类图，以放入演示文稿/博客文章等。但仅此而已......

关于其他易于使用并创建一些漂亮图表的简单 UML/类图工具有什么建议吗？必须能够从 .NET 代码生成图表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T10:01:36.433

我已经尝试了几次，主要是为了查看现有的课程。如果它会显示所有的关系，它会更有用。现在它只显示继承。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-18T10:02:04.153

我发现它有时很有用，之后更常用于文档。

这是一个新的小实用程序，但我认为您无法获得 VS Pro 中的全部功能 - 我认为您需要 Architect 版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T23:38:12.400

这里的评论表明很少有人觉得类设计器有用。

有趣的是，微软将类设计器设计为无用 UML 的有用替代品（一旦 UML 图与源代码失去同步，它们就变得不可信）。

类图的问题在于它们告诉我们我们已经知道的东西。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-19T00:07:48.987

我只使用类设计器来显示我现有的类，但我不会以其他方式使用它，例如，在那里设计你的类，然后让它生成代码。

# opengl - GLUT 退出重定义错误

> ID：14402
> 
> 赞同：34
> 
> 时间：2008-08-18T09:55:29.457
> 
> 标签：opengl, glut

在我简单的 OpenGL 程序中，我收到以下有关退出重定义的错误：

```
1>c:\program files\microsoft visual studio 8\vc\include\stdlib.h(406) : error C2381: 'exit' : redefinition; __declspec(noreturn) differs
1>        c:\program files\microsoft visual studio 8\vc\platformsdk\include\gl\glut.h(146) : see declaration of 'exit' 
```

我正在使用 Nate Robins 的[GLUT for Win32](http://www.xmission.com/~nate/glut.html)并在 Visual Studio 2005 或 Visual C++ 2005 (Express Edition) 中出现此错误。这个错误的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2008-08-18T09:55:45.883

**原因：**

与最新版本的 Visual Studio 一起提供的stdlib.h**对****exit()**函数有不同（且冲突）的定义。**它与glut.h**中的定义冲突。

**解决方案：**

用 stdlib.h 中的定义覆盖 glut.h 中的定义。将 stdlib.h 行放在代码中 glut.h 行的上方。

```
#include <stdlib.h>
#include <GL/glut.h> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-11-06T18:55:32.970

或者这个...要修复错误，请右键单击解决方案资源管理器选项卡中的项目名称，然后选择属性 -> C/C++ -> 预处理器 -> 预处理器定义并将 GLUT_BUILDING_LIB 附加到现有定义中，用分号分隔。

# vim - 为什么没有 vi* 的模态编辑器这么少？

> ID：14410
> 
> 赞同：32
> 
> 时间：2008-08-18T10:08:09.447
> 
> 标签：vim, editor, vi

几乎所有其他不是 vi 后代的编辑器（vim、cream、vi-emu）似乎都使用 emacs 快捷方式（`ctrl`+`w`删除一个单词等等）

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-08-18T12:03:03.380

早期的软件通常是模态的，但可用性在某些时候发生了转变，远离了这种风格。

基于 VI 的编辑器完全是个谜——他们是该软件秩序中唯一真正幸存的成员。

模式在可用性和交互设计中是一个禁忌，因为我们人类是善变的哺乳动物，不能相信他们会记住应用程序处于什么模式。

如果您认为自己处于一种“模式”，而实际上您处于另一种“模式”中，那么就会出现各种不良情况。您认为一系列无害的击键可能（在错误的模式下）造成无限的灾难。这被称为“模式错误”。

要了解更多信息，请搜索术语“无模式”（和“可用性”）

正如下面的评论中所提到的，一个有经验且不善变的人手中的模态界面可能非常有效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-18T10:12:49.280

嗯......也许没有太多需要，因为 Vi/Vim 几乎无处不在，并且得到了整个模态的东西，对吗？:)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-02-11T16:40:14.360

我认为这是因为 vi（及其同类）已经占据了模态编辑器的生态位。

喜欢模态但尚未被 vi 吸引的人数可能为 0，因此假设的 vi 竞争对手必须如此之大，以使大量 vi 用户切换。这不太可能。切换编辑器的成本是巨大的，而且 vi-s 可能已经和模态编辑器一样好。好吧，也许一个重大的突破可以改善他们，但我觉得这不太可能。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-18T21:00:57.287

@Leon：很好的答案。

@dbr：模态编辑需要一段时间才能习惯。如果您要构建一个适合这种范式的新编辑器，您将如何改进 VI/VIM/Emacs？我认为这部分是对这个问题的回答。让它“正确”已经够难了，与 VI/VIM/Emacs 之类的东西竞争将非常艰难——大多数使用这些编辑器的人都是“死忠”的粉丝，你必须给他们一个令人信服的理由移动到另一个编辑器。那些还没有使用它们的人很可能会留在非模态编辑器中。恕我直言，当然；）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-12-16T15:31:09.700

模态编辑器具有触摸打字员的巨大优势，您可以在屏幕上导航而无需将手从主行移开。我的手腕只有在我做的事情需要我把手从键盘上移到鼠标或箭头键上然后不断地移回来时才会受伤。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-07-04T13:12:12.450

请记住，记事本是一个模态编辑器！

要查看此内容，请尝试输入`E`, `D`, `I`, `T`; 现在尝试输入`Alt`, `E`, `D`, `I`, `T`. 在第二种情况下，Alt 键激活“菜单模式”，因此结果不同。:oP 人们似乎可以应付。

（是的，这是 Windows 的一项功能，而不是记事本的一项功能。我认为这是一个不好的功能，因为它很容易误按 Alt，而且我认为您无法将其关闭。）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-06-04T04:42:15.833

VIM 和 emacs 的用户界面设计意义与 qwerty 一样多。我们现在有可用的现代计算机优化键布局（参见 colemak 布局和 carpalx 项目）；有人为文本编辑器做同样的事情只是时间问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-18T10:13:17.407

我相信 Eclipse 具有 Vi 绑定，并且也有一个 Visual Studio 插件/扩展（称为 Vi-Emu 或其他东西）。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-12-16T23:14:17.720

值得注意的是，vi 输入模型的生存部分归功于它在 POSIX 标准中的采用，因此投入时间学习意味着您可以保证能够在任何符合这些标准的系统上工作。所以，就像英语一样，无处不在的力量。

就替代方案而言，我怀疑替代模型编辑器能否在 30 天的免费试用期中存活下来，所以这也是驾驶自动驾驶汽车的人多于驾驶喷气式飞机的原因。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-08-01T16:03:10.910

*由于这个问题已经与“没有主观问题”的口头禅相悖，请允许我以实物的形式面对这个问题。*

非模态编辑首先要解决非模态编辑带来的问题。

简而言之，通过模态编辑，我几乎可以在双手不离开键盘的情况下完成所有操作，甚至不会因为伸手去拿控件而折磨我的小指，或者通过寻找箭头键来打断我的手指放置。

1.  伸手去拿鼠标完全打断了思路。多年来，我一直讨厌 Intellij IDEA 和 Netbeans 对这一点的强烈依赖。即使使用 vim 风格的插件。

2.  您所做的大部分工作都与在同一段代码中以非常小的增量和更改进行微调有关。上移、移过、改变字符等等等等。这些东西被控制键和箭头和鼠标打断了。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-18T12:30:07.257

虽然没有真正回答你的问题，但以前在手机上写日语时曾经有一种“模态”方式：你击中的第一个字母是一个conson，比如说 K，然后，然后你会击中的下一个键会有一个conson的角色。（在日语中连续两个conson是不可能的）

虽然几年前它是主要的，但今天它只被真正想要快速击球的人使用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-08-27T20:13:32.017

我最近遇到了[divascheme -](http://www.cs.brown.edu/research/plt/software/divascheme/) [DrScheme](http://www.drscheme.org/)的一组替代键绑定。这是模态的，部分理由是与 RSI 相关 - 特别是避免大量手腕扭曲来击中`Ctrl`- `Alt`- `Shift`- `something`。编码员对其他编码员进行了一次非正式调查，发现 emacs 用户比 vi 编码员遭受更多的手腕疼痛。

你可以看到他在[LugRadio Live USA做一个](http://lugradio.org/live/USA2008/)[简短的演讲](http://video.google.com/videoplay?docid=-2721456512458968128&hl=en)。（该视频是一系列 5 分钟的演讲，我不记得它有多远，抱歉 - 如果有人观看它并在此处发布，我将编辑此帖子以说明它在视频中的时间）。

请注意，我没有使用 divascheme。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-04-25T21:56:36.850

我认为这个问题的答案实际上是有相当多的模式文本编辑器不是 vi/vim 的分支。但是*它们都使用 vi 键绑定*。Vi 用户将键绑定放入他们的肌肉记忆中，因此重新学习一组不同的键绑定将非常困难，因此没有人会创建一组不同的键绑定。

但是许多不同的编辑器从头开始重新实现了 vi 键绑定。看看[这个关于带有 vi 键绑定的 IDE 的问题](https://stackoverflow.com/questions/294613/does-any-ide-have-a-vi-keybindings-options)。至少有一半的答案是从头开始构建的实现 vi 键绑定的编辑器，而不是嵌入的 vi 版本。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-08-13T19:32:23.273

[鼠标](http://www.wired.com/science/discoveries/news/2009/01/dayintech_0126)的发明采用了一种模式并将其移至输入设备，而上下文菜单采用了另一种模式并将其移至按钮。具有讽刺意味的是，触摸设备的出现产生了相反的效果，产生了[多模式](https://www.experiencedynamics.com/blog/2007/06/multi-modal-design-gesture-touch-and-mobile-devicesnext-big-thing)界面：

*   感知多模态 - 触摸和语音相互感知并相交

*   不知道多模态 - 触摸和语音不知道彼此并发生冲突

> 传统的WIMP接口的基本前提是信息可以通过单通道或事件流进出系统。此事件流可以是输入（鼠标、键盘等）的形式，其中用户向系统输入数据并在系统响应时期望以输出形式的反馈（语音、振动、视觉等）。但渠道保持其独特性，可以一次处理一个来源的信息。例如，在今天的交互中，当按下鼠标按钮时，计算机会忽略输入的信息（通过键盘）。
> 
> 这与多模式交互有很大不同，在多模式交互中，系统具有多个事件流和通道，并且可以处理来自并行作用的各种输入模式的信息，例如上述那些。例如，在 IVR 系统中，用户可以通过键入或说话来浏览菜单。

**参考**

*   [用户代理可访问性指南工作组 (UAWG​​)：键盘界面用例](http://www.w3.org/WAI/UA/work/wiki/Keyboard_Interface_use_cases)

*   [W3C 多模式标准将 Web 带给更多人、更多方式](http://www.w3.org/2009/02/emma-pressrelease.html.en)

*   [W3C 在多模式标准方面的下一步工作](http://www.w3.org/Voice/multimodal-rfp.html)

*   [交互的未来是多模式的](http://johnnyholland.org/2008/11/the-future-of-interaction-is-it-multimodal/)

*   [超越鼠标和键盘：扩展信息可视化交互的设计考虑 - naturalinfovis_infovis2012.pdf](http://research.microsoft.com/en-us/um/people/nath/docs/naturalinfovis_infovis2012.pdf)

*   [设置基于 Web 的轻量级应用程序的范围](https://www.w3.org/People/Bos/webapps.html)

*   [1983 年 1 月 26 日：电子表格就像 1-2-3 一样简单](https://archive.wired.com/science/discoveries/news/2009/01/dayintech_0126)

*   [多模式设计：手势、触摸和移动设备……下一件大事？| 体验动态](https://www.experiencedynamics.com/blog/2007/06/multi-modal-design-gesture-touch-and-mobile-devicesnext-big-thing)

# opengl - 在 Windows 上使用 OpenGL 扩展

> ID：14413
> 
> 赞同：16
> 
> 时间：2008-08-18T10:11:45.600
> 
> 标签：opengl, glew

我想使用在 OpenGL 扩展下公开的函数。我在 Windows 上，我该怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-08-18T10:12:00.577

**简单的解决方案**：使用[GLEW](http://glew.sourceforge.net/)。看看[这里](https://stackoverflow.com/questions/17370/using-glew-to-use-opengl-extensions-under-windows)如何。

**困难的解决方案**：如果你有一个**非常充分的理由**不使用 GLEW，下面是如何在没有它的情况下实现相同的目标：

确定您希望使用的 OpenGL 扩展和扩展 API。OpenGL 扩展名列在[OpenGL Extension Registry](http://www.opengl.org/registry/)中。

> 示例：我希望使用[EXT_framebuffer_object](http://oss.sgi.com/projects/ogl-sample/registry/EXT/framebuffer_object.txt)扩展的功能。我希望从此扩展中使用的 API 是：

```
glGenFramebuffersEXT()
glBindFramebufferEXT()
glFramebufferTexture2DEXT()
glCheckFramebufferStatusEXT()
glDeleteFramebuffersEXT() 
```

检查您的显卡是否支持您希望使用的扩展。如果是这样，那么你的工作就差不多完成了！为您的显卡下载并安装最新的驱动程序和 SDK。

> 示例：我的 PC 中的显卡是**NVIDIA 6600 GT**。因此，我访问了[NVIDIA OpenGL 扩展规范](http://developer.nvidia.com/object/nvidia_opengl_specs.html)网页，发现支持[EXT_framebuffer_object](http://www.nvidia.com/dev_content/nvopenglspecs/GL_EXT_framebuffer_object.txt)扩展。然后我下载最新的[NVIDIA OpenGL SDK](http://developer.nvidia.com/object/sdk_home.html)并安装它。

您的显卡制造商提供**glext.h**头文件（或类似名称的头文件），其中包含使用支持的 OpenGL 扩展所需的所有声明。（请注意，并非所有扩展都受支持。）要么将此头文件放在编译器可以拾取的位置，要么将其目录包含在编译器的包含目录列表中。

在代码中添加`#include <glext.h>`一行以将头文件包含到代码中。

打开**[glext.h](http://oss.sgi.com/projects/ogl-sample/ABI/glext.h)**，找到你想要使用的 API 并获取其对应*的丑陋*声明。

> 示例：我搜索上述帧缓冲区 API 并找到它们对应的丑陋声明：

```
typedef void (APIENTRYP PFNGLGENFRAMEBUFFERSEXTPROC) (GLsizei n, GLuint *framebuffers); for GLAPI void APIENTRY glGenFramebuffersEXT (GLsizei, GLuint *); 
```

这意味着你的头文件有两种形式的 API 声明。一种是类似 wgl 的丑陋函数指针声明。另一个是看起来很理智的函数声明。

对于您希望使用的每个扩展 API，将函数名称的代码声明添加为难看的字符串类型。

> 例子：

```
PFNGLGENFRAMEBUFFERSEXTPROC glGenFramebuffersEXT;
PFNGLBINDFRAMEBUFFEREXTPROC glBindFramebufferEXT;
PFNGLFRAMEBUFFERTEXTURE2DEXTPROC glFramebufferTexture2DEXT;
PFNGLCHECKFRAMEBUFFERSTATUSEXTPROC glCheckFramebufferStatusEXT;
PFNGLDELETEFRAMEBUFFERSEXTPROC glDeleteFramebuffersEXT; 
```

虽然看起来很丑，但我们所做的只是声明与扩展 API 对应的类型的函数指针。

用它们的合法函数初始化这些函数指针。这些函数由库或驱动程序公开。我们需要使用**wglGetProcAddress()**函数来执行此操作。

> 例子：

```
glGenFramebuffersEXT = (PFNGLGENFRAMEBUFFERSEXTPROC) wglGetProcAddress("glGenFramebuffersEXT");
glBindFramebufferEXT = (PFNGLBINDFRAMEBUFFEREXTPROC) wglGetProcAddress("glBindFramebufferEXT");
glFramebufferTexture2DEXT = (PFNGLFRAMEBUFFERTEXTURE2DEXTPROC) wglGetProcAddress("glFramebufferTexture2DEXT");
glCheckFramebufferStatusEXT = (PFNGLCHECKFRAMEBUFFERSTATUSEXTPROC) wglGetProcAddress("glCheckFramebufferStatusEXT");
glDeleteFramebuffersEXT = (PFNGLDELETEFRAMEBUFFERSEXTPROC) wglGetProcAddress("glDeleteFramebuffersEXT"); 
```

不要忘记检查*NULL*的函数指针。如果偶然**wglGetProcAddress()**找不到扩展函数，它会用 NULL 初始化指针。

> 例子：

```
if (NULL == glGenFramebuffersEXT || NULL == glBindFramebufferEXT || NULL == glFramebufferTexture2DEXT
    || NULL == glCheckFramebufferStatusEXT || NULL == glDeleteFramebuffersEXT)
{
    // Extension functions not loaded!
    exit(1);
} 
```

就是这样，我们完成了！您现在可以使用这些函数指针，就像函数调用存在一样。

> 例子：

```
glGenFramebuffersEXT(1, &fbo);
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fbo);
glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, colorTex[0], 0); 
```

**参考： Dave Astle 的** [超越适用于 Windows](http://www.gamedev.net/reference/articles/article1929.asp)的 OpenGL 1.1 — 这篇文章有点过时，但包含了您需要了解为什么 Windows 上存在这种可悲情况以及如何解决它所需的所有信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-19T12:01:59.477

不使用 GLEW 的“非常充分的理由”可能是您的编译器/IDE 不支持该库。例如：Borland C++ Builder。

在这种情况下，您可能希望从源代码重建库。如果它有效，那就太好了，否则手动扩展加载并不像听起来那么糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-20T03:01:42.273

@Kronikarz：从外观上看，**GLEW**似乎是未来的道路。NVIDIA 已经将它与它的**[OpenGL SDK](http://developer.nvidia.com/object/sdk_home.html)**一起提供。与 2006 年的 GLEE 相比，它的最新版本是 2007 年。

但是，在我看来，这两个库的用法几乎相同。（GLEW 有一个*init()*需要在其他任何事情之前调用。）因此，除非您发现 GLEE 不支持某些扩展，否则您不需要切换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-03-26T04:05:43.760

GL3W 是一个公共域脚本，它创建一个仅加载 OpenGL 3/4 核心功能的库。它可以在 github 上找到：

[https://github.com/skaslev/gl3w](https://github.com/skaslev/gl3w)

GL3W 需要 Python 2.6 来为 OpenGL 生成库和头文件；之后它不需要 Python。

# python - 为什么 PyObjC 文档如此糟糕？

> ID：14422
> 
> 赞同：17
> 
> 时间：2008-08-18T10:23:22.113
> 
> 标签：python, macos, cocoa, pyobjc

例如， http: [//developer.apple.com/cocoa/pyobjc.html](http://developer.apple.com/cocoa/pyobjc.html)仍然适用于 OS X 10.4 Tiger，而不是 10.5 Leopard。这就是 Apple 的官方文档。

PyObjC 官方页面同样糟糕，[http ://pyobjc.sourceforge.net/](http://pyobjc.sourceforge.net/)

太糟糕了，令人费解.. 我正在考虑学习 Ruby，主要是因为 RubyCocoa 的东西有更好的文档记录，并且有很多不错的教程（例如[http://www.rubycocoa.com/](http://www.rubycocoa.com/)），而且因为鞋子图形用户界面工具包..

即使是[这个自动翻译得很糟糕的日语教程](http://66.163.168.225/babelfish/translate_url_content?lp=ja_en&url=http%3A%2F%2Fblog.monospace.jp%2F2007%2F11%2F05%2Fxcode3_cocoa_python%2F&fr=avbbf-us&.intl=us)也比我能找到的其他文档更有用..

我想做的就是使用 Cocoa GUI 创建相当简单的 Python 应用程序。
任何人都可以了解可怕的文档，或者指出一些教程，这些教程不仅给你大量的代码块，而且假设你知道做什么`NSThread.detachNewThreadSelector_toTarget_withObject_("queryController", self, None)`。 ?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-24T08:08:52.207

PyObjC 缺乏文档的主要原因是只有一个开发人员（我），而作为大多数开发人员，我并不特别喜欢编写文档。因为 PyObjC 对我来说是一个副项目，所以我倾向于专注于功能和错误修复，因为这对我来说更有趣。

改进文档的最佳方法是自愿在 pyobjc-dev 邮件列表中提供帮助。

顺便说一句：pythonmac-sig 邮件列表（参见 google）是在 MacOSX（不仅仅是 PyObjC）上获得 Python 帮助的绝佳资源。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-08-18T12:18:52.600

我同意该教程存在缺陷，将随机的、无法解释的代码扔在你的眼前。它介绍了诸如自动释放池和用户默认值之类的概念，而没有解释您为什么想要它们（“用于内存管理的自动释放池”几乎不是解释）。

也就是说……</p>

> 基本上我想做的就是编写 Cocoa 应用程序，而不必学习 ObjC。

恐怕目前，您*需要*基本掌握 ObjC 才能从使用 Cocoa 的任何语言中受益。PyObjC、RubyCocoa、Nu 等充其量只是小众，它们都是由非常熟悉 ObjC*和*Cocoa 来龙去脉的人开发的。

现在，如果您真正看到这些桥梁在脚本语言真正发挥作用的地方很有用，而不是试图用它们构建整个应用程序，那么您将受益最大。虽然这*已经*完成（使用 LimeChat，我现在正在使用 RubyCocoa 编写的应用程序），但这种情况很少见，并且可能会持续一段时间。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2008-10-25T21:07:47.490

说白了：

如果你想成为一名高效的 Cocoa 程序员，你必须学习 Objective-C。故事结局。

Python 或 Ruby 都不能通过各自的桥梁替代 Objective-C。您仍然需要了解 Objective-C API、NSObject 派生类的固有行为以及 Cocoa 的许多其他细节。

PyObjC 和 RubyCocoa 是从 Cocoa 应用程序访问 Python 或 Ruby 功能的好方法，包括大部分（如果不是完全）用 Python 或 Ruby 构建 Cocoa 应用程序。但其中的成功是建立在对 Cocoa 及其组成的 Objective-C API 的透彻理解之上的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-08-18T11:38:51.480

Tom 和 Martin 的回答绝对正确（在几乎任何开源项目中，您都会发现大多数贡献者对*开发*特别感兴趣；对文档等半相关问题不太感兴趣），但我不认为您最后的特定问题很适合 PyObjC 文档。

```
NSThread.detachNewThreadSelector_toTarget_withObject_("queryController", self, None) 
```

`NSThread`是 Cocoa API 的一部分，因此[记录在 Apple](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)，包括特定的方法`+ detachNewThreadSelector:toTarget:withObject:`（我会链接到那里，但显然 stackoverflow 有解析它的错误）。CocoaDev wiki[也有一篇文章](http://cocoadev.com/index.pl?NSThread)。

我认为 PyObjC 尝试记录 Cocoa 不是一个好主意，除了一些如何在 Python 中使用它的基本示例。解释选择器也可能超出了 PyObjC 的范围，因为这些也是 Objective-C 的一个特性，而不是 PyObjC 的一个特性。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-08-27T11:12:51.600

我偶然发现了一个关于 PyObjC/Cocoa 的好教程：

[http://lethain.com/entry/2008/aug/22/an-epic-introduction-to-pyobjc-and-cocoa/](http://lethain.com/entry/2008/aug/22/an-epic-introduction-to-pyobjc-and-cocoa/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-23T14:24:46.940

> 我想做的就是使用 Cocoa GUI 创建相当简单的 Python 应用程序。任何人都可以阐明可怕的文档，或者指出一些教程，这些教程不仅给你大量的代码块，而且假设你知道什么 NSThread.detachNewThreadSelector_toTarget_withObject_ ("queryController", self, None) 确实..？
> 
> [...]
> 
> 基本上我想做的就是编写 Cocoa 应用程序，而不必学习 ObjC。

虽然我基本上同意 Soeren 的回应，但我会更进一步：

如果有的话，在不了解 Objective C 的情况下使用 Cocoa 将需要很长时间。Cocoa 不是独立于 Objective C 构建的抽象，它明确地与它相关联。您可以在上面引用的示例代码行中看到这一点：

```
NSThread.detachNewThreadSelector_toTarget_withObject_("queryController", self, None) 
```

这是编写 Objective C 行的 Python 方式：

```
[NSThread detachNewThreadSelector:@selector(queryController:) toTarget:self withObject:nil]; 
```

现在，重要的是要注意，这条线可以通过两种方式看到：(1) 作为 Objective C 的一条线，或者 (2) 作为 Cocoa 框架的调用。从语法上看，我们将其视为 (1)。通过认识到 NSThread 是一个提供一组方便特性的 Cocoa 框架，我们将其视为 (2)。在这种情况下，这个特殊的 Cocoa 框架让我们可以很容易地让一个对象在一个新线程上开始做某事。

但更重要的是：这里的 Cocoa 框架 (NSThread) 以一种与框架编写的语言明确相关的方式为我们提供了这种方便的服务。也就是说，NSThread 为我们提供了一个明确引用“选择器”的特性. 实际上，选择器是关于 Objective C 工作原理的基本名称。

所以问题来了。Cocoa 从根本上说是 Objective-C 的产物，它的创建者在构建它时考虑了 Objective C。我并不是说不可能将 Cocoa 特性的界面翻译成其他语言更自然的形式。只是一旦您更改 Cocoa 框架以停止引用“选择器”，它就不再是真正的 Cocoa 框架了。是翻译版本。一旦你开始走这条路，我猜事情会变得非常混乱。您正在努力跟上 Apple 更新 Cocoa 的步伐，也许您遇到了 Cocoa 的某些部分，这些部分只是不能很好地翻译成新的语言，无论如何。所以相反，像 PyObjC 这样的东西选择直接公开 Cocoa，以一种非常清晰和简单的相关性。正如他们在文档中所说：

> 为了在 Objective-C 消息和 Python 方法之间进行无损且明确的转换，Python 方法名称等价物只是将冒号替换为下划线的选择器。

当然，它有点难看，它确实意味着你需要了解一些关于 Objective-C 的知识，但那是因为替代方案，如果真的存在，不一定更好。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-28T23:05:57.460

我对Objective C或Cocoa一无所知（但对Python了解很多），但我现在正在用PyObjc编写一个相当复杂的应用程序。我是怎么学的？我选择了[Cocoa Programming for OSX](https://rads.stackoverflow.com/amzn/click/com/0321503619)并使用 PyObjC 阅读了整本书（一个非常快速的过程）。只需忽略有关内存管理的任何内容，您就可以了。唯一需要注意的是，偶尔你必须使用像 endSheetMethod 这样的装饰器（实际上我认为这是我唯一遇到的）：

```
@PyObjcTools.AppHelper.endSheetMethod
def alertEnded_code_context_(self, alert, choice, context):
    pass 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-08-18T10:27:20.173

这个答案不会很有帮助，但是作为开发人员，我讨厌做文档。这是一个开源项目，很难找到做文档的人。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-08-18T10:41:41.547

汤姆说的都是真的。许多开源项目都有专门的开发人员，很少有人对文档感兴趣。球门柱每天都在变化这一事实无济于事，这意味着不仅要创建文档，还要维护文档。

# .net - 64 位 .NET 性能调优

> ID：14432
> 
> 赞同：10
> 
> 时间：2008-08-18T10:35:14.913
> 
> 标签：.net, performance, optimization, 64-bit, jit

我知道它`.NET`是`JIT`在应用程序运行之前编译到您正在运行的架构上的，但是 JIT 编译器是否针对 64 位架构进行了优化？

在编写将在`64bit system`. （即使用 Int64 会提高性能，JIT 编译器会自动使 Int64 在 32 位系统上工作吗？）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-18T11:11:31.767

[64 位 JIT 与](http://blogs.msdn.com/davbr/pages/tail-call-jit-conditions.aspx)32 位的JIT 不同，所以我预计输出会有一些差异 - 但我不会仅仅为此切换到 64 位，而且我不希望在 CPU 时间上获得太多速度（如果有的话）通过切换到 64 位。

如果您的应用程序使用大量内存并且 PC 有足够的 RAM 来跟上它，您会注意到性能有很大的提升。我发现 32 位 .NET 应用程序往往会在您使用大约 1.6gb 时开始抛出内存不足异常，但由于在此之前很久就有分页，它们开始破坏磁盘[-](http://en.wikipedia.org/wiki/Paging)所以您最终会受到 I/O 限制。

基本上，如果你的瓶颈是 CPU，那么 64 位不太可能有帮助。如果您的瓶颈是内存，那么您应该会看到很大的改进。

> 使用 Int64 会提高性能，JIT 编译器是否会自动使 Int64 在 32 位系统上工作

Int64 已经在 32 位和 64 位系统上运行，但在 64 位上运行会更快。因此，如果您主要使用 Int64 进行数字运算，那么在 64 位系统上运行应该会有所帮助。

最重要的是[衡量](http://channel9vip.orcsweb.com/shows/Behind+The+Code/Rico-Mariani-Writing-better-faster-code/?CommentID=290154)你的表现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-16T03:54:32.017

[这](http://blogs.msdn.com/joshwil/archive/2006/07/18/670090.aspx)是一篇关于该主题的好文章，由从事 64 位 JIT 工作的人撰写。基本上，除非您绝对需要 64 位可以提供的地址空间，或者需要进行 64 位数学运算，否则您可能会失去性能。例如，随着指针变大，缓存有效地减半。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-08T17:05:22.647

我注意到 64 位的速度要慢得多。

如前所述，64 位 JIT 编译器的行为与 x86 JIT 编译器不同。x86 编译器将利用 x64 没有的一些优化。

例如，在 .NET 3.5 中，32 位 JIT 将内联函数调用，并将结构作为参数，但 64 位 JIT 不会。

在生产代码中，我看到 x86 构建的运行速度比 x64 构建快 20%（没有其他更改）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-02-15T17:11:42.850

总而言之，仅在以下情况下使用 64 位

1.  你需要额外的内存，而且没有办法解决它。
2.  您编写科学应用程序等程序并需要提高数学精度

在其他所有方面，截至今天，.NET 中的 64 位编译器都落后了一步。

在 .NET 编译器中进行的性能优化是一个大问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T10:57:09.130

无论架构是 32 位还是 64 位，性能瓶颈都是相同的。性能问题往往是次优算法的结果——选择 32 位和 64 位类型不会显着影响性能。

最重要的是，在测量之前不要试图提高性能。特别是，您应该分析代码以确定您的性能瓶颈在哪里。

# editor - 班级设计师

> ID：14435
> 
> 赞同：4
> 
> 时间：2008-08-18T10:40:52.437
> 
> 标签：editor, class-design

在设计课程及其关系时，您使用什么软件，还是只使用笔和纸？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-18T10:44:30.527

我发现笔和纸非常有用，我尽量远离电脑。如果我在编译时这样做，我总是很想开始编写解决方案。这不可避免地导致我后来改变了一些事情，如果我实际上花了很多时间在它上面，我会在计划阶段发现的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-18T11:02:34.470

我通常从一个空界面开始，然后开始编写测试。然后我使用重构工具生成成员。对我来说，单元测试是设计的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-18T11:27:23.937

[OmniGraffle](http://www.omnigroup.com/applications/omnigraffle/)（Mac OS X 的 Visio-esque 应用程序），有时。否则，只需要笔和纸就可以了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-18T11:47:26.563

在纸笔（或任何您喜欢的非代码等效项）阶段，很容易过度停留，成为可怕的[YAGNI](http://en.wikipedia.org/wiki/You_Ain%27t_Gonna_Need_It)综合症的牺牲品。我们当中有多少人精心设计了一些最终从未被使用过的“性感”功能？（举手。手。）

小的迭代测试驱动步骤和频繁的重构——让代码告诉你它想要成为什么。

我的大多数项目一开始就唯一确定的是，我们不会以我们目前认为的方式结束。因此，将大量时间花在大前端设计（或者如果您愿意，也可以是[大](http://c2.com/cgi/wiki?BigDesignUpFront)前端设计）上是浪费 - 最好从我们想做的第一件事开始，看看我们最终的结果。

这有点取决于你认为设计在哪里结束。几年前我读过一篇文章，它提出了编码就是设计的想法——或者对于大流程的粉丝来说，至少它是设计的后端。它对我来说是真实的，并且永远改变了我看待开发过程阶段的方式。当然，我只是在谷歌上疯狂地搜索这该死的东西。我能找到吗？我能不能。也许我梦见了这篇文章，这完全是我自己的想法。是的，就是这样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-18T10:46:29.727

笔和纸的初稿。Umlet 将其数字化。它非常小，但它可以满足我的需要

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-18T11:05:14.930

我用笔和纸。

出于所有计划目的，这是最快的方法。当我使用 UML 包时，我迷失在布局和微调中。

但这是我的负担.. :-)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-18T11:20:39.097

去找铅笔和纸，或者白板。任何像笔这样的永久性标记，你都会有一个非常凌乱的设计！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-18T13:21:56.247

前 35 或 40 份草稿的白板。在那之后UML很好，但不是特别必要。详细讨论完详细信息后，最好的文档是干净的代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-18T10:42:57.783

主要是笔和纸，虽然我偶尔会打开 Visio 并做一些粗略的图表。

我想拥有一个花哨的工具会很好，但这只是另一回事。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-18T10:47:07.823

在进行初始设计时，我喜欢使用白板和 1 到 3 个其他开发人员来汲取灵感。这通常足以捕捉任何明显的错误/修复任何可能出现的棘手情况，而不会过多地降低信噪比。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-18T10:49:57.753

我发现笔和纸、白板和可能的一些[CRC 卡](http://en.wikipedia.org/wiki/Class-Responsibility-Collaboration_card)非常有用。大多数时候，我认为白板和一些带有类和/或模块名称的贴纸或卡片在作为一个团队进行规划和设计时效果最好。如果你一个人做这个活动，笔和纸很好。一旦你有了基本的结构集，你总是可以制作一个漂亮的 UML 图。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-18T11:23:31.150

用于绘图的笔和纸和/或白板，用于文档目的的更全面的工具。

我主要使用类图和一些带有序列图的草图来正确处理大部分关系。

关于工具：在工作中我使用[Enterprise Architect](http://www.sparxsystems.com.au/)，但我个人发现[Visual Paradigm for UML](http://www.visual-paradigm.com/product/vpuml/)是一个更好的选择。后者更灵活，也允许快速起草。

在 VP，他们现在也有一个名为[Agilian](http://www.visual-paradigm.com/product/ag/)的版本（我还没有使用过），它似乎更加灵活，允许草图立即成为文档......也许有一天这个工具会取代我的论文草图（保存树木：P）。

# delphi - 使 Delphi 应用程序完全全屏的最佳方法是什么？

> ID：14451
> 
> 赞同：20
> 
> 时间：2008-08-18T10:56:42.623
> 
> 标签：delphi, delphi-2007

使delphi应用程序（此处为win32的delphi 2007）完全全屏，删除应用程序边框并覆盖Windows任务栏的最佳方法是什么？

我正在寻找类似于按 F11 时 IE 所做的事情。

我希望这是用户的运行时选项，而不是我的设计时决定。

正如在接受的答案中提到的

```
BorderStyle := bsNone; 
```

是这样做的一部分。奇怪的是，我`E2010 Incompatible types: 'TFormBorderStyle' and 'TBackGroundSymbol'`在使用该行时一直出错（已`bsNone`定义另一种类型）。

为了克服这个我不得不使用：

```
BorderStyle := Forms.bsNone; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-08-18T11:30:00.310

好吧，这一直对我有用。好像简单一点...

```
procedure TForm52.Button1Click(Sender: TObject);
begin
  BorderStyle := bsNone;
  WindowState := wsMaximized;
end; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-18T11:41:42.113

谷歌搜索出现了以下附加方法：

（虽然我想我会先尝试罗迪的方法）

## [手动填充屏幕](http://delphi.about.com/cs/adptips2000/a/bltip0600_2.htm)（来自：关于Delphi）

```
procedure TSomeForm.FormShow(Sender: TObject) ;
var
   r : TRect;
begin
   Borderstyle := bsNone;
   SystemParametersInfo
      (SPI_GETWORKAREA, 0, @r,0) ;
   SetBounds
     (r.Left, r.Top, r.Right-r.Left, r.Bottom-r.Top) ;
end; 
```

## 罗迪主题变奏曲

```
FormStyle := fsStayOnTop;
BorderStyle := bsNone;
Left := 0;
Top := 0;
Width := Screen.Width;
Height := Screen.Height; 
```

## [WinAPI 方式](http://groups.google.nl/group/borland.public.delphi.objectpascal/msg/1cc7e07b0e80150e?hl=en)（来自 TeamB 的 Peter below）

```
private  // in form declaration
    Procedure WMGetMinMaxInfo(Var msg: TWMGetMinMaxInfo);
      message WM_GETMINMAXINFO;

Procedure TForm1.WMGetMinMaxInfo(Var msg: TWMGetMinMaxInfo);
  Begin
    inherited;
    With msg.MinMaxInfo^.ptMaxTrackSize Do Begin
      X := GetDeviceCaps( Canvas.handle, HORZRES ) + (Width - ClientWidth);
      Y := GetDeviceCaps( Canvas.handle, VERTRES ) + (Height - ClientHeight
);
    End;
  End;

procedure TForm1.Button2Click(Sender: TObject);
Const
  Rect: TRect = (Left:0; Top:0; Right:0; Bottom:0);
  FullScreen: Boolean = False;
begin
  FullScreen := not FullScreen;  
  If FullScreen Then Begin
    Rect := BoundsRect;
    SetBounds(
      Left - ClientOrigin.X,
      Top - ClientOrigin.Y,
      GetDeviceCaps( Canvas.handle, HORZRES ) + (Width - ClientWidth),
      GetDeviceCaps( Canvas.handle, VERTRES ) + (Height - ClientHeight ));
  //  Label2.caption := IntToStr(GetDeviceCaps( Canvas.handle, VERTRES ));
  End
  Else
    BoundsRect := Rect;
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-18T11:03:14.263

最大化表单并[隐藏标题栏](http://delphi.about.com/cs/adptips2000/a/bltip0100_5.htm)。最大化线是从内存中完成的，但我很确定 WindowState 是您想要的属性。

还有[这篇](http://www.delphicorner.f9.co.uk/articles/forms5.htm)文章，但这对我来说似乎太复杂了。

```
procedure TForm1.FormCreate(Sender: TObject) ;
begin
   //maximize the window
   WindowState := wsMaximized;
   //hide the title bar
   SetWindowLong(Handle,GWL_STYLE,GetWindowLong(Handle,GWL_STYLE) and not WS_CAPTION);
   ClientHeight := Height;
end; 
```

编辑：这是一个完整的示例，带有“全屏”和“恢复”选项。为了最大限度地清晰，我将不同的部分分解为小程序，因此可以将其大大压缩为几行。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm1 = class(TForm)
    btnGoFullScreen: TButton;
    btnNotFullScreen: TButton;
    btnShowTitleBar: TButton;
    btnHideTitleBar: TButton;
    btnQuit: TButton;
    procedure btnGoFullScreenClick(Sender: TObject);
    procedure btnShowTitleBarClick(Sender: TObject);
    procedure btnHideTitleBarClick(Sender: TObject);
    procedure btnNotFullScreenClick(Sender: TObject);
    procedure btnQuitClick(Sender: TObject);
  private
    SavedLeft : integer;
    SavedTop : integer;
    SavedWidth : integer;
    SavedHeight : integer;
    SavedWindowState : TWindowState;
    procedure FullScreen;
    procedure NotFullScreen;
    procedure SavePosition;
    procedure HideTitleBar;
    procedure ShowTitleBar;
    procedure RestorePosition;
    procedure MaximizeWindow;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.btnQuitClick(Sender: TObject);
begin
  Application.Terminate;
end;

procedure TForm1.btnGoFullScreenClick(Sender: TObject);
begin
  FullScreen;
end;

procedure TForm1.btnNotFullScreenClick(Sender: TObject);
begin
  NotFullScreen;
end;

procedure TForm1.btnShowTitleBarClick(Sender: TObject);
begin
  ShowTitleBar;
end;

procedure TForm1.btnHideTitleBarClick(Sender: TObject);
begin
  HideTitleBar;
end;

procedure TForm1.FullScreen;
begin
  SavePosition;
  HideTitleBar;
  MaximizeWindow;
end;

procedure TForm1.HideTitleBar;
begin
  SetWindowLong(Handle,GWL_STYLE,GetWindowLong(Handle,GWL_STYLE) and not WS_CAPTION);
  ClientHeight := Height;
end;

procedure TForm1.MaximizeWindow;
begin
  WindowState := wsMaximized;
end;

procedure TForm1.NotFullScreen;
begin
  RestorePosition;
  ShowTitleBar;
end;

procedure TForm1.RestorePosition;
begin
  //this proc uses what we saved in "SavePosition"
  WindowState := SavedWindowState;
  Top := SavedTop;
  Left := SavedLeft;
  Width := SavedWidth;
  Height := SavedHeight;
end;

procedure TForm1.SavePosition;
begin
  SavedLeft := Left;
  SavedHeight := Height;
  SavedTop := Top;
  SavedWidth := Width;
  SavedWindowState := WindowState;
end;

procedure TForm1.ShowTitleBar;
begin
  SetWindowLong(Handle,gwl_Style,GetWindowLong(Handle,gwl_Style) or ws_Caption or ws_border);
  Height := Height + GetSystemMetrics(SM_CYCAPTION);
  Refresh;
end;

end. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T14:51:48.837

***将这样的代码放入onShow***事件的形式：

```
 WindowState:=wsMaximized; 
```

对于***OnCanResize***这个：

```
 if (newwidth<width) and (newheight<height) then
    Resize:=false; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-07-01T12:49:50.187

如何在 Mainform 中约束子窗体，就像它是 MDI 应用程序一样，但没有头疼的问题！（注意：此页面上的回复帮助我完成了这项工作，这就是我在此处发布解决方案的原因）

```
private
{ Private declarations }
  StickyAt: Word;
  procedure WMWINDOWPOSCHANGING(Var Msg: TWMWINDOWPOSCHANGING); Message M_WINDOWPOSCHANGING;
  Procedure WMGetMinMaxInfo(Var msg: TWMGetMinMaxInfo); message WM_GETMINMAXINFO; 
```

之后...

```
 procedure TForm2.WMWINDOWPOSCHANGING(var Msg: TWMWINDOWPOSCHANGING);
    var
      A, B: Integer;
      iFrameSize: Integer;
      iCaptionHeight: Integer;
      iMenuHeight: Integer;
    begin

      iFrameSize := GetSystemMetrics(SM_CYFIXEDFRAME);
      iCaptionHeight := GetSystemMetrics(SM_CYCAPTION);
      iMenuHeight := GetSystemMetrics(SM_CYMENU);

      // inside the Mainform client area
      A := Application.MainForm.Left + iFrameSize;
      B := Application.MainForm.Top + iFrameSize + iCaptionHeight + iMenuHeight;

      with Msg.WindowPos^ do
      begin

        if x <= A + StickyAt then
          x := A;

        if x + cx >= A + Application.MainForm.ClientWidth - StickyAt then
          x := (A + Application.MainForm.ClientWidth) - cx + 1;

       if y <= B + StickyAt then
         y := B;

       if y + cy >= B + Application.MainForm.ClientHeight - StickyAt then
         y := (B + Application.MainForm.ClientHeight) - cy + 1;

      end;
end; 
```

还有更多...

```
Procedure TForm2.WMGetMinMaxInfo(Var msg: TWMGetMinMaxInfo);
var
  iFrameSize: Integer;
  iCaptionHeight: Integer;
  iMenuHeight: Integer;
Begin
  inherited;
  iFrameSize := GetSystemMetrics(SM_CYFIXEDFRAME);
  iCaptionHeight := GetSystemMetrics(SM_CYCAPTION);
  iMenuHeight := GetSystemMetrics(SM_CYMENU);
  With msg.MinMaxInfo^.ptMaxPosition Do
  begin
    // position of top when maximised
    X := Application.MainForm.Left + iFrameSize + 1;
    Y := Application.MainForm.Top + iFrameSize + iCaptionHeight + iMenuHeight + 1;
  end;
  With msg.MinMaxInfo^.ptMaxSize Do
  Begin
     // width and height when maximized
     X := Application.MainForm.ClientWidth;
     Y := Application.MainForm.ClientHeight;
  End;
  With msg.MinMaxInfo^.ptMaxTrackSize Do
  Begin
     // maximum size when maximised
     X := Application.MainForm.ClientWidth;
     Y := Application.MainForm.ClientHeight;
  End;
  // to do: minimum size (maybe)
End; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-09T13:46:27.903

就我而言，唯一可行的解​​决方案是：

```
procedure TFormHelper.FullScreenMode;
begin
  BorderStyle := bsNone;
  ShowWindowAsync(Handle, SW_MAXIMIZE);
end; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-29T14:46:01.163

您需要确保表单位置为 poDefaultPosOnly。

```
Form1.Position := poDefaultPosOnly;
Form1.FormStyle := fsStayOnTop;
Form1.BorderStyle := bsNone;
Form1.Left := 0;
Form1.Top := 0;
Form1.Width := Screen.Width;
Form1.Height := Screen.Height; 
```

经过测试并在 Win7 x64 上运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-01T22:35:34.083

嗯。看着回复，我似乎记得大约 8 年前我编写游戏时处理过这个问题。为了使调试更容易，我使用正常的 Delphi 表单的设备上下文作为全屏显示的源。

关键是，DirectX 能够全屏运行任何设备上下文 - 包括由您的表单分配的设备上下文。

因此，要为应用程序提供“真正的”全屏功能，请找到 Delphi 的 DirectX 库，它可能会包含您需要的开箱即用的内容。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-05-15T13:04:03.380

尝试：

```
Align = alClient    
FormStyle = fsStayOnTop 
```

这始终与主监视器对齐；

# c# - 有没有人有 .Net Excel IO 组件基准？

> ID：14453
> 
> 赞同：5
> 
> 时间：2008-08-18T10:58:45.007
> 
> 标签：c#, excel, components

我需要从 .Net 访问 Excel 工作簿。我知道所有不同的方法（我已经在[博客文章](http://blog.functionalfun.net/2008/06/reading-and-writing-excel-files-with.html "在 .Net 中读取和写入 Excel 文件")中写了它们），而且我知道使用原生 .Net 组件将是最快的。但问题是，哪个组件获胜？有人对它们进行基准测试吗？我一直在使用 Syncfusion XlsIO，但是对于某些关键操作（例如删除包含数千个命名范围的工作簿中的行）来说，这非常慢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-21T11:57:50.200

我没有做任何适当的基准测试，但我尝试了其他几个组件，发现[SpreadsheetGear](http://spreadsheetgear.com/)比我之前使用的 XlsIO 快得多。我在这篇[文章中写下了我的一些发现](http://blog.functionalfun.net/2008/08/which-net-excel-io-component-should-i.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-18T12:44:54.637

无法帮助您解决原始问题，但您是否知道您可以使用 OleDbConnection 访问 Excel 文件，因此将其视为数据库？然后，您可以将工作表读入 DataTable，对应用程序中的数据执行所需的所有更改，然后使用 OleDbConnection 将其全部保存回文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-06T10:55:06.500

是的，但出于对 Syncfusion 的礼貌，我不会同时发布它们（他们要求您不要发布基准测试），因为我不是经验丰富的测试人员，所以我的测试可能有些缺陷，但主要是因为您的实际基准测试结果谁赢和赢多少有很大的不同。

我采用了他们的一个“性能”示例，并在 EPPlus 中添加了相同的例程来比较它们。XLSIO 仅使用简单的插入就快了 15% 左右，具体取决于行/列比率（我尝试了一些），内存使用情况似乎非常相似。当我添加一个例程时，在添加所有行之后，每 10 行删除一次，然后从该行向上插入 2 行的新行 - 在这种情况下，XLSIO 的速度要慢得多。

通用基准对您几乎没有用处。您需要在您使用的特定场景中相互尝试。

我已经使用 EPPlus 几年了，性能一直很好，我不记得曾对它大喊大叫。

更值得您考虑的是功能、支持（根据我的经验，Syncfusion 一直很好）、文档、对源代码的访问（如果这很重要）以及 - 重要的是 - API 对您有多大意义，语法可以是很不一样。例如。命名样式

XLSIO

```
headerStyle.BeginUpdate();
workbook.SetPaletteColor(8, System.Drawing.Color.FromArgb(255, 174, 33));
headerStyle.Color = System.Drawing.Color.FromArgb(255, 174, 33);
headerStyle.Font.Bold = true;
headerStyle.Borders[ExcelBordersIndex.EdgeLeft]  .LineStyle = ExcelLineStyle.Thin;
headerStyle.Borders[ExcelBordersIndex.EdgeRight] .LineStyle = ExcelLineStyle.Thin;
headerStyle.Borders[ExcelBordersIndex.EdgeTop]   .LineStyle = ExcelLineStyle.Thin;
headerStyle.Borders[ExcelBordersIndex.EdgeBottom].LineStyle = ExcelLineStyle.Thin;
headerStyle.EndUpdate(); 
```

EPPlus

```
ExcelNamedStyleXml headerStyle = xlPackage.Workbook.Styles.CreateNamedStyle("HeaderStyle");
headerStyle.Style.Fill.PatternType = ExcelFillStyle.Solid; // <== needed or BackgroundColor throws an exception
headerStyle.Style.Fill.BackgroundColor.SetColor(System.Drawing.Color.FromArgb(255, 174, 33));
headerStyle.Style.Font.Bold = true;
headerStyle.Style.Border.Left.Style   = ExcelBorderStyle.Thin;
headerStyle.Style.Border.Right.Style  = ExcelBorderStyle.Thin;
headerStyle.Style.Border.Top.Style    = ExcelBorderStyle.Thin;
headerStyle.Style.Border.Bottom.Style = ExcelBorderStyle.Thin; 
```

# c# - C#中的位域

> ID：14464
> 
> 赞同：83
> 
> 时间：2008-08-18T11:19:28.367
> 
> 标签：c#, bit-fields

我有一个结构，我需要填充并写入磁盘（实际上是几个）。

一个例子是：

```
byte-6    
bit0 - original_or_copy  
bit1 - copyright  
bit2 - data_alignment_indicator  
bit3 - PES_priority  
bit4-bit5 - PES_scrambling control.  
bit6-bit7 - reserved 
```

在 CI 中可能会执行以下操作：

```
struct PESHeader  {
    unsigned reserved:2;
    unsigned scrambling_control:2;
    unsigned priority:1;
    unsigned data_alignment_indicator:1;
    unsigned copyright:1;
    unsigned original_or_copy:1;
}; 
```

在 C# 中是否有任何方法可以使我能够使用结构取消引用点运算符访问这些位？

对于几个结构，我可以在访问器函数中进行位移。

我有大量的结构要以这种方式处理，所以我正在寻找更容易阅读和更快编写的东西。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-08-18T13:31:30.533

我可能会使用属性拼凑一些东西，然后使用转换类将适当属性的结构转换为位域原语。就像是...

```
using System;

namespace BitfieldTest
{
    [global::System.AttributeUsage(AttributeTargets.Field, AllowMultiple = false)]
    sealed class BitfieldLengthAttribute : Attribute
    {
        uint length;

        public BitfieldLengthAttribute(uint length)
        {
            this.length = length;
        }

        public uint Length { get { return length; } }
    }

    static class PrimitiveConversion
    {
        public static long ToLong<T>(T t) where T : struct
        {
            long r = 0;
            int offset = 0;

            // For every field suitably attributed with a BitfieldLength
            foreach (System.Reflection.FieldInfo f in t.GetType().GetFields())
            {
                object[] attrs = f.GetCustomAttributes(typeof(BitfieldLengthAttribute), false);
                if (attrs.Length == 1)
                {
                    uint fieldLength  = ((BitfieldLengthAttribute)attrs[0]).Length;

                    // Calculate a bitmask of the desired length
                    long mask = 0;
                    for (int i = 0; i < fieldLength; i++)
                        mask |= 1 << i;

                    r |= ((UInt32)f.GetValue(t) & mask) << offset;

                    offset += (int)fieldLength;
                }
            }

            return r;
        }
    }

    struct PESHeader
    {
        [BitfieldLength(2)]
        public uint reserved;
        [BitfieldLength(2)]
        public uint scrambling_control;
        [BitfieldLength(1)]
        public uint priority;
        [BitfieldLength(1)]
        public uint data_alignment_indicator;
        [BitfieldLength(1)]
        public uint copyright;
        [BitfieldLength(1)]
        public uint original_or_copy;
    };

    public class MainClass
    {
        public static void Main(string[] args)
        {
            PESHeader p = new PESHeader();

            p.reserved = 3;
            p.scrambling_control = 2;
            p.data_alignment_indicator = 1;

            long l = PrimitiveConversion.ToLong(p);

            for (int i = 63; i >= 0; i--)
            {
                Console.Write( ((l & (1l << i)) > 0) ? "1" : "0");
            }

            Console.WriteLine();

            return;
        }
    }
} 
```

这会产生预期的 ...000101011。当然，它需要更多的错误检查和稍微理智的打字，但这个概念（我认为）是合理的、可重用的，并且可以让你轻松地淘汰几十个易于维护的结构。

亚当

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-08-18T12:25:51.697

通过使用枚举，您可以做到这一点，但会看起来很尴尬。

```
[Flags]
public enum PESHeaderFlags
{
    IsCopy = 1, // implied that if not present, then it is an original
    IsCopyrighted = 2,
    IsDataAligned = 4,
    Priority = 8,
    ScramblingControlType1 = 0,
    ScramblingControlType2 = 16,
    ScramblingControlType3 = 32,
    ScramblingControlType4 = 16+32,
    ScramblingControlFlags = ScramblingControlType1 | ScramblingControlType2 | ... ype4
    etc.
} 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2008-08-18T11:32:53.143

你想要[StructLayoutAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute(VS.71).aspx)

```
[StructLayout(LayoutKind.Explicit, Size=1, CharSet=CharSet.Ansi)]
public struct Foo 
{ [FieldOffset(0)]public byte original_or_copy; 
  [FieldOffset(0)]public byte copyright;
  [FieldOffset(0)]public byte data_alignment_indicator; 
  [FieldOffset(0)]public byte PES_priority; 
  [FieldOffset(0)]public byte PES_scrambling_control; 
  [FieldOffset(0)]public byte reserved; 
} 
```

这实际上是一个联合，但您可以将其用作位域——您只需要注意每个字段的位应该在字节中的哪个位置。AND 反对的实用函数和/或常量可以提供帮助。

```
const byte _original_or_copy = 1;
const byte _copyright        = 2;

//bool ooo = foo.original_or_copy();
static bool original_or_copy(this Foo foo) 
{ return  (foo.original_or_copy & _original_or_copy)  == original_or_copy;
} 
```

还有 LayoutKind.Sequential 可以让您以 C 方式进行操作。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-06-21T19:07:07.817

正如 Christophe Lambrechts 建议的那样，BitVector32 提供了一个解决方案。抖动的性能应该是足够的，但不确定。这是说明此解决方案的代码：

```
public struct rcSpan
{
    //C# Spec 10.4.5.1: The static field variable initializers of a class correspond to a sequence of assignments that are executed in the textual order in which they appear in the class declaration.
    internal static readonly BitVector32.Section sminSection = BitVector32.CreateSection(0x1FFF);
    internal static readonly BitVector32.Section smaxSection = BitVector32.CreateSection(0x1FFF, sminSection);
    internal static readonly BitVector32.Section areaSection = BitVector32.CreateSection(0x3F, smaxSection);

    internal BitVector32 data;

    //public uint smin : 13; 
    public uint smin
    {
        get { return (uint)data[sminSection]; }
        set { data[sminSection] = (int)value; }
    }

    //public uint smax : 13; 
    public uint smax
    {
        get { return (uint)data[smaxSection]; }
        set { data[smaxSection] = (int)value; }
    }

    //public uint area : 6; 
    public uint area
    {
        get { return (uint)data[areaSection]; }
        set { data[areaSection] = (int)value; }
    }
} 
```

你可以通过这种方式做很多事情。通过为每个字段提供手工访问器，您可以在不使用 BitVector32 的情况下做得更好：

```
public struct rcSpan2
{
    internal uint data;

    //public uint smin : 13; 
    public uint smin
    {
        get { return data & 0x1FFF; }
        set { data = (data & ~0x1FFFu ) | (value & 0x1FFF); }
    }

    //public uint smax : 13; 
    public uint smax
    {
        get { return (data >> 13) & 0x1FFF; }
        set { data = (data & ~(0x1FFFu << 13)) | (value & 0x1FFF) << 13; }
    }

    //public uint area : 6; 
    public uint area
    {
        get { return (data >> 26) & 0x3F; }
        set { data = (data & ~(0x3F << 26)) | (value & 0x3F) << 26; }
    }
} 
```

令人惊讶的是，最后一个手工制作的解决方案似乎是最方便、最简单、最短的解决方案。这当然只是我个人的喜好。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-03-29T06:42:02.003

另一个基于 Zbyl 的回答。这个对我来说更容易改变 - 我只需要调整 sz0,sz1... 并确保 set/Get 块中的 mask# 和 loc# 是正确的。

性能方面，它应该与它们都解析为 38 个 MSIL 语句相同。（常量在编译时解析）

```
public struct MyStruct
{
    internal uint raw;

    const int sz0 = 4, loc0 = 0,          mask0 = ((1 << sz0) - 1) << loc0;
    const int sz1 = 4, loc1 = loc0 + sz0, mask1 = ((1 << sz1) - 1) << loc1;
    const int sz2 = 4, loc2 = loc1 + sz1, mask2 = ((1 << sz2) - 1) << loc2;
    const int sz3 = 4, loc3 = loc2 + sz2, mask3 = ((1 << sz3) - 1) << loc3;

    public uint Item0
    {
        get { return (uint)(raw & mask0) >> loc0; }
        set { raw = (uint)(raw & ~mask0 | (value << loc0) & mask0); }
    }

    public uint Item1
    {
        get { return (uint)(raw & mask1) >> loc1; }
        set { raw = (uint)(raw & ~mask1 | (value << loc1) & mask1); }
    }

    public uint Item2
    {
        get { return (uint)(raw & mask2) >> loc2; }
        set { raw = (uint)(raw & ~mask2 | (value << loc2) & mask2); }
    }

    public uint Item3
    {
        get { return (uint)((raw & mask3) >> loc3); }
        set { raw = (uint)(raw & ~mask3 | (value << loc3) & mask3); }
    }
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2011-10-03T14:51:27.650

您也可以使用`BitVector32`，尤其是[`Section struct`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.bitvector32.section.aspx). 这个例子非常好。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2011-03-24T14:47:53.030

虽然它是一门课，但使用`BitArray`似乎是最少重新发明轮子的方法。除非你真的对性能有压力，否则这是最简单的选择。（索引可以用`[]`操作符引用。）

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-04-24T16:08:12.753

我发现自己对这些辅助函数很满意：

```
uint SetBits(uint word, uint value, int pos, int size)
{
    uint mask = ((((uint)1) << size) - 1) << pos;
    word &= ~mask; //resettiamo le posizioni
    word |= (value << pos) & mask;
    return word;
}

uint ReadBits(uint word, int pos, int size)
{
    uint mask = ((((uint)1) << size) - 1) << pos;
    return (word & mask) >> pos;
} 
```

然后：

```
uint the_word;

public uint Itemx
{
    get { return ReadBits(the_word, 5, 2); }
    set { the_word = SetBits(the_word, value, 5, 2) }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-08-18T11:23:21.027

带有标志属性的枚举可能有帮助吗？看这里：

[C# 中的 [Flags] 枚举属性是什么意思？](https://stackoverflow.com/questions/8447/enum-flags-attribute#8460)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-08-18T12:47:49.873

我认为，如果您将其设为字节枚举，则标志枚举也可以工作：

```
[Flags] enum PesHeaders : byte { /* ... */ } 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-07-04T16:43:49.390

我写了一个，分享一下，可能对某人有帮助：

```
[global::System.AttributeUsage(AttributeTargets.Field, AllowMultiple = false)]
public sealed class BitInfoAttribute : Attribute {
    byte length;
    public BitInfoAttribute(byte length) {
        this.length = length;
    }
    public byte Length { get { return length; } }
}

public abstract class BitField {

    public void parse<T>(T[] vals) {
        analysis().parse(this, ArrayConverter.convert<T, uint>(vals));
    }

    public byte[] toArray() {
        return ArrayConverter.convert<uint, byte>(analysis().toArray(this));
    }

    public T[] toArray<T>() {
        return ArrayConverter.convert<uint, T>(analysis().toArray(this));
    }

    static Dictionary<Type, BitTypeInfo> bitInfoMap = new Dictionary<Type, BitTypeInfo>();
    private BitTypeInfo analysis() {
        Type type = this.GetType();
        if (!bitInfoMap.ContainsKey(type)) {
            List<BitInfo> infos = new List<BitInfo>();

            byte dataIdx = 0, offset = 0;
            foreach (System.Reflection.FieldInfo f in type.GetFields()) {
                object[] attrs = f.GetCustomAttributes(typeof(BitInfoAttribute), false);
                if (attrs.Length == 1) {
                    byte bitLen = ((BitInfoAttribute)attrs[0]).Length;
                    if (offset + bitLen > 32) {
                        dataIdx++;
                        offset = 0;
                    }
                    infos.Add(new BitInfo(f, bitLen, dataIdx, offset));
                    offset += bitLen;
                }
            }
            bitInfoMap.Add(type, new BitTypeInfo(dataIdx + 1, infos.ToArray()));
        }
        return bitInfoMap[type];
    }
}

class BitTypeInfo {
    public int dataLen { get; private set; }
    public BitInfo[] bitInfos { get; private set; }

    public BitTypeInfo(int _dataLen, BitInfo[] _bitInfos) {
        dataLen = _dataLen;
        bitInfos = _bitInfos;
    }

    public uint[] toArray<T>(T obj) {
        uint[] datas = new uint[dataLen];
        foreach (BitInfo bif in bitInfos) {
            bif.encode(obj, datas);
        }
        return datas;
    }

    public void parse<T>(T obj, uint[] vals) {
        foreach (BitInfo bif in bitInfos) {
            bif.decode(obj, vals);
        }
    }
}

class BitInfo {

    private System.Reflection.FieldInfo field;
    private uint mask;
    private byte idx, offset, shiftA, shiftB;
    private bool isUnsigned = false;

    public BitInfo(System.Reflection.FieldInfo _field, byte _bitLen, byte _idx, byte _offset) {
        field = _field;
        mask = (uint)(((1 << _bitLen) - 1) << _offset);
        idx = _idx;
        offset = _offset;
        shiftA = (byte)(32 - _offset - _bitLen);
        shiftB = (byte)(32 - _bitLen);

        if (_field.FieldType == typeof(bool)
            || _field.FieldType == typeof(byte)
            || _field.FieldType == typeof(char)
            || _field.FieldType == typeof(uint)
            || _field.FieldType == typeof(ulong)
            || _field.FieldType == typeof(ushort)) {
            isUnsigned = true;
        }
    }

    public void encode(Object obj, uint[] datas) {
        if (isUnsigned) {
            uint val = (uint)Convert.ChangeType(field.GetValue(obj), typeof(uint));
            datas[idx] |= ((uint)(val << offset) & mask);
        } else {
            int val = (int)Convert.ChangeType(field.GetValue(obj), typeof(int));
            datas[idx] |= ((uint)(val << offset) & mask);
        }
    }

    public void decode(Object obj, uint[] datas) {
        if (isUnsigned) {
            field.SetValue(obj, Convert.ChangeType((((uint)(datas[idx] & mask)) << shiftA) >> shiftB, field.FieldType));
        } else {
            field.SetValue(obj, Convert.ChangeType((((int)(datas[idx] & mask)) << shiftA) >> shiftB, field.FieldType));
        }
    }
}

public class ArrayConverter {
    public static T[] convert<T>(uint[] val) {
        return convert<uint, T>(val);
    }

    public static T1[] convert<T0, T1>(T0[] val) {
        T1[] rt = null;
        // type is same or length is same
        // refer to http://stackoverflow.com/questions/25759878/convert-byte-to-sbyte
        if (typeof(T0) == typeof(T1)) { 
            rt = (T1[])(Array)val;
        } else {
            int len = Buffer.ByteLength(val);
            int w = typeWidth<T1>();
            if (w == 1) { // bool
                rt = new T1[len * 8];
            } else if (w == 8) {
                rt = new T1[len];
            } else { // w > 8
                int nn = w / 8;
                int len2 = (len / nn) + ((len % nn) > 0 ? 1 : 0);
                rt = new T1[len2];
            }

            Buffer.BlockCopy(val, 0, rt, 0, len);
        }
        return rt;
    }

    public static string toBinary<T>(T[] vals) {
        StringBuilder sb = new StringBuilder();
        int width = typeWidth<T>();
        int len = Buffer.ByteLength(vals);
        for (int i = len-1; i >=0; i--) {
            sb.Append(Convert.ToString(Buffer.GetByte(vals, i), 2).PadLeft(8, '0')).Append(" ");
        }
        return sb.ToString();
    }

    private static int typeWidth<T>() {
        int rt = 0;
        if (typeof(T) == typeof(bool)) { // x
            rt = 1;
        } else if (typeof(T) == typeof(byte)) { // x
            rt = 8;
        } else if (typeof(T) == typeof(sbyte)) {
            rt = 8;
        } else if (typeof(T) == typeof(ushort)) { // x
            rt = 16;
        } else if (typeof(T) == typeof(short)) {
            rt = 16;
        } else if (typeof(T) == typeof(char)) {
            rt = 16;
        } else if (typeof(T) == typeof(uint)) { // x
            rt = 32;
        } else if (typeof(T) == typeof(int)) {
            rt = 32;
        } else if (typeof(T) == typeof(float)) {
            rt = 32;
        } else if (typeof(T) == typeof(ulong)) { // x
            rt = 64;
        } else if (typeof(T) == typeof(long)) {
            rt = 64;
        } else if (typeof(T) == typeof(double)) {
            rt = 64;
        } else {
            throw new Exception("Unsupport type : " + typeof(T).Name);
        }
        return rt;
    }
} 
```

和用法：

```
class MyTest01 : BitField {
    [BitInfo(3)]
    public bool d0;
    [BitInfo(3)]
    public short d1;
    [BitInfo(3)]
    public int d2;
    [BitInfo(3)]
    public int d3;
    [BitInfo(3)]
    public int d4;
    [BitInfo(3)]
    public int d5;

    public MyTest01(bool _d0, short _d1, int _d2, int _d3, int _d4, int _d5) {
        d0 = _d0;
        d1 = _d1;
        d2 = _d2;
        d3 = _d3;
        d4 = _d4;
        d5 = _d5;
    }

    public MyTest01(byte[] datas) {
        parse(datas);
    }

    public new string ToString() {
        return string.Format("d0: {0}, d1: {1}, d2: {2}, d3: {3}, d4: {4}, d5: {5} \r\nbinary => {6}",
            d0, d1, d2, d3, d4, d5, ArrayConverter.toBinary(toArray()));
    }
};

class MyTest02 : BitField {
    [BitInfo(5)]
    public bool val0;
    [BitInfo(5)]
    public byte val1;
    [BitInfo(15)]
    public uint val2;
    [BitInfo(15)]
    public float val3;
    [BitInfo(15)]
    public int val4;
    [BitInfo(15)]
    public int val5;
    [BitInfo(15)]
    public int val6;

    public MyTest02(bool v0, byte v1, uint v2, float v3, int v4, int v5, int v6) {
        val0 = v0;
        val1 = v1;
        val2 = v2;
        val3 = v3;
        val4 = v4;
        val5 = v5;
        val6 = v6;
    }

    public MyTest02(byte[] datas) {
        parse(datas);
    }

    public new string ToString() {
        return string.Format("val0: {0}, val1: {1}, val2: {2}, val3: {3}, val4: {4}, val5: {5}, val6: {6}\r\nbinary => {7}",
            val0, val1, val2, val3, val4, val5, val6, ArrayConverter.toBinary(toArray()));
    }
}

public class MainClass {

    public static void Main(string[] args) {
        MyTest01 p = new MyTest01(false, 1, 2, 3, -1, -2);
        Debug.Log("P:: " + p.ToString());
        MyTest01 p2 = new MyTest01(p.toArray());
        Debug.Log("P2:: " + p2.ToString());

        MyTest02 t = new MyTest02(true, 1, 12, -1.3f, 4, -5, 100);
        Debug.Log("t:: " + t.ToString());
        MyTest02 t2 = new MyTest02(t.toArray());
        Debug.Log("t:: " + t.ToString());

        Console.Read();
        return;
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-21T07:04:05.053

我今天早上用 T4 写了一篇。:) 与 Zbyl 相同的示例，尽管我加入了一些 uint 大小调整的乐趣。这只是第一次通过，它显然可以使用一些错误检查。此外，bitFields 规范数组在单独的文件中会更好，可能是 .ttinclude 或 json/yaml..

```
=== BitFields.tt ===

<#@ template language="C#" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System.Linq" #>

<#
var bitFields = new[]
{
    new
    {
        Name = "rcSpan2", Fields = new[] { ("smin", 13), ("smax", 13), ("area", 6) },
    },  
};

foreach (var bitField in bitFields)
{
    static string getType(int size) =>
        size switch
        {
            > 32 => "ulong",
            > 16 => "uint",
            > 8 => "ushort",
            _ => "byte",
        };

    var bitFieldType = getType(bitField.Fields.Sum(f => f.Item2)); 
#>
public struct <#=bitField.Name#>
{
    <#=bitFieldType#> _bitfield;

<#
var offset = 0;
foreach (var (fieldName, fieldSize) in bitField.Fields)
{
    var fieldType = getType(fieldSize);
    var fieldMask = $"0x{((1UL<<fieldSize)-1):X}U";
#>
    public <#=fieldType#> <#=fieldName#> // : <#=fieldSize#>
    {
        get => (<#=fieldType#>)(<#=offset > 0 ? $"(_bitfield >> {offset})" : "_bitfield"#> & <#=fieldMask#>);
        set => _bitfield = (<#=bitFieldType#>)((_bitfield & ~((<#=bitFieldType#>)<#=fieldMask#> << <#=offset#>)) | ((<#=bitFieldType#>)(value & <#=fieldMask#>) << <#=offset#>));
    }  
<#
    offset += fieldSize;
}
#>
}

<#}#>

=== BitFields.cs === (generated)

public struct rcSpan2
{
    uint _bitfield;

    public ushort smin // : 13
    {
        get => (ushort)(_bitfield & 0x1FFFU);
        set => _bitfield = (uint)((_bitfield & ~((uint)0x1FFFU << 0)) | ((uint)(value & 0x1FFFU) << 0));
    }  
    public ushort smax // : 13
    {
        get => (ushort)((_bitfield >> 13) & 0x1FFFU);
        set => _bitfield = (uint)((_bitfield & ~((uint)0x1FFFU << 13)) | ((uint)(value & 0x1FFFU) << 13));
    }  
    public byte area // : 6
    {
        get => (byte)((_bitfield >> 26) & 0x3FU);
        set => _bitfield = (uint)((_bitfield & ~((uint)0x3FU << 26)) | ((uint)(value & 0x3FU) << 26));
    }  
} 
```

# c++ - MFC 应用程序如何自行终止？

> ID：14491
> 
> 赞同：11
> 
> 时间：2008-08-18T12:04:06.233
> 
> 标签：c++, visual-c++, mfc

MFC 应用程序干净地关闭自身的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-18T12:04:20.240

```
AfxGetMainWnd()->PostMessage(WM_CLOSE); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-01-07T10:23:40.803

以编程方式终止 MFC 应用程序

```
 void ExitMFCApp()
   {
        // same as double-clicking on main window close box
        ASSERT(AfxGetMainWnd() != NULL);
        AfxGetMainWnd()->SendMessage(WM_CLOSE);
   } 
```

[http://support.microsoft.com/kb/117320](http://support.microsoft.com/kb/117320)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-18T14:11:43.260

为了支持@Mike的回答，使用这种方法的原因是为了触发正确的关机顺序。对于 MDI/SDI 应用程序尤其重要，因为它使文档有机会在退出前提示保存或取消退出。

@Matt Noguchi，您的方法将绕过这个序列（我想这可能是预期的效果，但如果您将正常的拆解短路，您可能会遇到*问题。*

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-18T16:08:33.167

```
PostQuitMessage( [exit code] ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T10:23:26.777

如果它是基于对话框的应用程序，您可以通过调用 EndDialog() 函数来完成。

如果它是基于 SDI/MDI 的应用程序，您可以调用 DestroyWindow。但在此之前，您需要自己进行清理（关闭文档、释放内存和资源、销毁创建的任何其他窗口等）。

# command-line - 如何在命令行脚本完成之前阻止 MATLAB 返回？

> ID：14495
> 
> 赞同：23
> 
> 时间：2008-08-18T12:10:38.450
> 
> 标签：command-line, matlab

我在 MATLAB 帮助 ( `matlab -h`) 中看到我可以使用该`-r`标志来指定`m`要运行的 -file。我注意到当我这样做时，MATLAB 似乎启动了脚本，但立即返回。脚本处理正常，但主应用程序已经返回。

有什么方法可以让 MATLAB 仅在命令完成后返回？如果您从单独的程序中调用它，那么等待进程似乎比使用文件或套接字来确认完成更容易。

为了说明，这里有一个示例函数`waitHello.m`：

```
function waitHello
    disp('Waiting...');
    pause(3); %pauses 3 seconds
    disp('Hello World');
    quit; 
```

我尝试使用以下方法运行它：

```
matlab -nosplash -nodesktop -r waitHello 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-08-18T15:10:43.033

快速回答：

```
matlab -wait -nosplash -nodesktop -r waitHello 
```

在 Matlab 7.1（我拥有的版本）中，matlab.bat 中有一个未记录的命令行选项 -wait。如果它不适用于您的版本，您可以添加它。这是我发现的。最终启动 matlab 的底部命令是（第 153 行）：

```
start "MATLAB" %START_WAIT% "%MATLAB_BIN_DIR%\%MATLAB_ARCH%\matlab" %MATLAB_ARGS% 
```

在这种情况下，启动命令的相关语法（参见 cmd.exe 中的“帮助启动”）是：

```
start ["window title"] [/wait] myprogram.exe args ... 
```

在所有记录的命令行选项中，我发现（第 60 行）更高一点：

```
) else if (%opt%) == (-wait) (
  set START_WAIT=/wait
) else ( 
```

所以指定 -wait 应该做你想做的事，只要你也从你的脚本中退出 matlab （否则它会等待你以交互方式终止它）。

# unit-testing - 有没有人成功使用过 NUnitLite？

> ID：14497
> 
> 赞同：2
> 
> 时间：2008-08-18T12:10:52.897
> 
> 标签：unit-testing, windows-mobile, compact-framework, nunit

我最近开始研究 Compact Framework，我想知道是否有人对 VS 2008 中的单元测试提出了一些建议。MSTest 还可以*，*但是调试测试是一场噩梦，而且测试运行程序*很*慢。

我看到 codeplex 上的 NUnitLite 是一个选项，但它看起来不是很活跃；它也在 NUnit 3.0 的路线图中，但谁知道它什么时候会出来。有没有人成功过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-08T13:02:35.573

我们所做的真正提高我们的效率和质量的是多目标我们的移动应用程序。也就是说，只需一点点创造力和一些条件编译标签和自定义项目配置，就可以构建一个也可以在桌面上运行的移动应用程序版本。

如果您将需要测试的所有业务逻辑放在单独的项目/程序集中，那么可以使用您已经熟悉的任何桌面工具非常有效地测试这一层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-18T12:25:34.817

我们使用 NUnitLite，尽管我认为我们必须添加一些代码才能使其工作。

我们发现的问题之一是，如果您使用仅存在于 CF 中的平台部分，那么您只能在模拟器或 Windows Mobile 设备上的 NUnitLite 中运行这些测试，这使得将测试作为一个集成的构建过程。我们通过添加一个新的测试属性来解决这个问题，该属性允许您禁用仅在 CF 上运行的测试（通常这些测试将 p/调用某些仅限 windows mobile 的 dll）。

# ide - 比例字体IDE

> ID：14504
> 
> 赞同：12
> 
> 时间：2008-08-18T12:17:12.337
> 
> 标签：ide, fonts, tabs, text-editor

我真的很想看到一个比例字体 IDE，即使我必须自己构建它（也许作为 Visual Studio 的扩展）。我的意思是 MS Word 风格的代码编辑，有点像[The C++ Programming Language book](http://www.research.att.com/~bs/3rd.html)中的印刷风格。

我想为我的缩进设置制表位并排列函数签名和赋值语句的行，它们可以用点而不是固定的字符位置来指定。我也想要粗体和斜体。各种字体大小甚至样式表都会很酷。

有没有人见过这样的东西，或者知道开始建造一个的最佳方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-18T12:24:55.987

我仍然希望看到流行的编辑器或 IDE 实现[弹性制表符](http://nickgravgaard.com/elastictabstops/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-20T07:05:11.787

[Thinking with Style](http://www.lanovaz.org/daniel/Site/Blog/Entries/2004/10/31_Thinking_with_Style.html)建议使用您最喜欢的文本处理软件，如 Word 或 Writer。使用丰富的 XML 创建程序代码，并使用 XSLT 提取与编译器相关的部分。“Office”软件将提供所有高级文本处理和格式化功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-18T12:26:12.740

我希望你会因为这个建议而被修改并选择，但这个想法有一些真正的意义。

代码编辑器中传统的“非比例”字体要求的主要优点是减轻了执行代码格式化的负担。

但是对于现代 IDE 中出现的所有交互式自动格式化，比例字体确实有可能提高代码的可读性（而不是像我相信许多纯粹主义者所期望的那样妨碍它）。

一个名叫[Roedy Green](http://mindprod.com/)的人物（以他的“[如何编写不可维护的代码](http://mindprod.com/jgloss/unmain.html)”文章而闻名）写了关于一种基于 Java 的理论编辑器/语言，称为[Bali](http://mindprod.com/jgloss/bali.html)。它并没有完全包含非比例字体，但它确实包含了具有非统一字体大小的想法。

此外，这个简短[的 Joel Spolsky 帖子](http://www.joelonsoftware.com/items/2006/07/03.html)发布到一个解决方案，弹性制表位（正如另一位评论员所提到的），这将有助于支持非比例（和可变大小）字体。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-18T15:00:02.947

@托马斯欧文斯

> 我没有发现这样格式的代码更容易阅读。

没关系，这只是个人喜好，我们可以不同意。以您认为最好的方式格式化它，我会尊重它。我经常问自己“我应该如何格式化这个或那个东西？” 我的回答总是格式化它以提高可读性，我承认这可能是主观的。

关于您的示例，我只是喜欢在右侧有一个对齐良好的列，它是左侧代码中的一种快速“索引”。话虽如此，我可能会避免像那样评论每一行，因为代码本身不需要那么多解释。如果是这样，我倾向于在代码上方写一段。

但是考虑一下原始海报中的这个例子。在我看来，更容易发现第二个中的评论。

```
for (size-type i = 0; i<v.size(); i++) { // rehash:
    size-type ii = has(v[i].key)%b.size9); // hash
    v[i].next = b[ii]; // link
    b[ii] = &v[i];
}

for (size-type i = 0; i<v.size(); i++) {     // rehash:
    size-type ii = has(v[i].key)%b.size9);   // hash
    v[i].next = b[ii];                       // link
    b[ii] = &v[i];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-18T13:24:39.847

@托马斯欧文斯

> 但人们真的会这样排列评论吗？......我从不尝试排列声明或评论或任何东西，我见过的唯一地方是教科书。

是的，人们确实会排列评论和声明以及各种各样的事情。格式一致的代码更易于阅读，更易于阅读的代码更易于维护。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-20T08:12:04.273

我想知道为什么没有人真正回答您的问题，以及为什么接受的答案与您的问题没有任何关系。但无论如何...

**比例字体IDE**

在 Eclipse 中，您可以选择系统上的任何字体。

**为我的缩进设置制表位**

在 Eclipse 中，您可以配置自动缩进，包括将其设置为“仅选项卡”。

**排列函数签名和赋值语句行**

在 Eclipse 中，自动缩进就是这样做的。

**可以用点而不是固定的字符位置来指定。**

对不起，我不认为 Eclipse 可以帮助你。但它是开源的。;-)

**粗体和斜体**

Eclipse 有。

**各种字体大小甚至样式表都会很酷**

我认为 Eclipse 只为每种文件类型（例如 Java 源文件）使用一种字体和字体大小，但是对于不同的文件类型，您可以有不同的“样式表”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-18T12:21:23.343

当我上次查看 Eclipse 时（不久前！），它允许您选择任何已安装的字体来工作。不太确定它是否支持使用制表位缩进的概念。

它看起来很酷，但代码肯定更难阅读......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-18T12:27:56.277

Soeren：这很好，IMO。但人们真的会这样排列评论吗？对于我的行尾注释，我总是使用一个空格，然后是 // 或 /* 或等效项，具体取决于我使用的语言。我从不尝试排列声明或评论或任何东西，我见过的唯一地方就是教科书。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-18T13:27:14.647

@Brian Ensink：我不觉得这样的代码更容易阅读。

```
int var1 = 1 //Comment
int longerVar = 2 //Comment
int anotherVar = 4 //Command 
```

相对

```
int var2       = 1 //Comment
int longerVar  = 2 //Comment
int anotherVar = 4 //Comment 
```

我个人觉得第一行比第二行更容易阅读。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-09-12T20:47:10.847

您问题的缩进部分今天正在一个真实的产品中完成，尽管可能比您想象的自动化程度更高，我提到的产品是[XSLT IDE](http://coherentweb.com/)，但相同的格式原则适用于大多数（但不是全部) 常规代码语法。

这真的必须在[视频](http://youtu.be/IFJHG1EnS0A)中看到才能了解这一切（对不起音乐回溯）。还有一个轻量级的 XML 编辑器衍生产品[XMLQuire](http://xmlquire.com)用作技术演示器。

下面的屏幕截图显示了在此 XSLT IDE 中使用非常复杂的格式规则格式化的 XML，其中所有缩进都是以字处理器样式执行的，使用左边距 - 而不是空格或制表符。

![在此处输入图像描述](../Images/69aa354792d5b5976798ab86484b41d5.png)

为了强调这种格式概念，所有字符都被突出显示以显示左边距延伸的位置以保持缩进。我使用术语*虚拟格式*来描述这一点 - 它不像弹性制表位，因为根本没有制表符，只有作为“段落”格式一部分的边距信息（此处使用 RTF 代码）。解析器在与语法着色相同的过程中不断地重新格式化。

这里没有使用比例字体，但它可能很容易 - 因为缩进是在 TWIPS 中设置的。编辑体验非常引人注目，因为当您重构代码（在本例中为 XML）时，可能通过拖放，或通过扩展属性值的长度，缩进只会重新排列以适应 - 没有制表符 -键或“重新格式化”按钮按下。

所以，缩进是存在的，但字体工作是一个更复杂的问题。我已经对此进行了试验，但发现如果在您键入时重新选择字体，代码的水平移动太分散注意力 - 可能需要用户启动的“格式字体”命令。该产品还内置了用于注释代码的 Ink/Handwriting 技术，但我还没有在实时版本中利用这一点。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-06-19T19:04:24.307

人们都在抱怨评论没有排队。

在我看来，有一个非常简单的解决方案：将单位空间定义为字体中最宽的字符。现在，按比例间隔除空格以外的所有字符。该空间占用了尽可能多的空间，以便将下一个字符排列在该行上所有前面的字符都是字体中最宽的位置。

IE：

iii_space_Foo

xxxx_space_Foo

将排列“Foo”，“i”之后的空间比“x”之后的空间宽得多。

所以称之为弹性空间。而不是制表位。

如果你是一个聪明的编辑，特别对待评论，但这只是肉汁

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-09-02T22:36:24.707

让我回忆一下关于在 C# 中使用 'var' 关键字的论点。人们讨厌它，并认为它会使代码变得不那么清晰。例如，您无法知道以下内容的类型：

```
var x = GetResults("Main");
foreach(var y in x)
{
   WriteResult(x);
} 
```

他们的论点是，您看不到 x 是数组、List 还是任何其他 IEnumerable。或者 y 的类型是什么。在我看来，不清楚不是来自使用 var，而是来自选择不明确的变量名。为什么不直接输入：

```
var electionResults = GetRegionalElactionResults("Main");
foreach(var result in electionResults)
{
   Write(result); // you can see what you're writing!!
} 
```

“但你仍然看不到选举结果的类型！” - 真的有关系吗？如果要更改 GetRegionalElectionResults 的返回类型，可以这样做。任何 IEnumerable 都可以。

快进到现在。人们希望在类似的代码中对齐注释：

```
int var2       =  1; //The number of days since startup, including the first
int longerVar  =  2; //The number of free days per week
int anotherVar = 38; //The number of working hours per week 
```

因此，如果没有评论，一切都不清楚。而且，如果您不对齐值，则无法将它们与变量分开。但是你呢？这个怎么样（请忽略子弹）

*   int daysSinceStartup = 1; // 包括第一个
*   int freeDaysPerWeek = 2;
*   int workingHoursPerWeek = 38;

如果您需要对每一行发表评论，那您就做错了。“但你仍然需要调整价值观”——是吗？38和2有什么关系？

在 C# 中，大多数代码块只需使用制表符（或者实际上是四个空格的倍数）即可轻松对齐：

*   var regionWithIncrease =
    *   来自 GetRegionalElectionResults() 的结果
    *   其中 result.TotalCount > 结果 > PreviousTotalCount &&
        *   result.PreviousTotalCount > 0 // 只是新区域
    *   选择结果。区域；
*   foreach（regionsWithIncrease 中的 var 区域）
*   {
    *   写（区域）；
*   }

你永远不应该使用逐行注释，并且你应该很少需要垂直对齐的东西。很少，不是从来没有。所以我理解你们中的一些人是否更喜欢等宽字体。我更喜欢字体 Noto Sans 或 Source Sans Pro 的可读性。这些字体可从 Google 免费获得，类似于 Calibri，但专为编程而设计，因此具有所有必要的特征：

*   大的 ： ; . ，所以你可以清楚地看到区别
*   明显不同的 0Oo 和不同的 Il|

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-10-20T07:46:28.660

比例字体的主要问题是它们破坏了代码的垂直对齐方式，这在编写代码时是一个相当大的损失。

垂直对齐使得通过允许轻松执行块操作（如剪切、复制、粘贴、删除和缩进、取消缩进等）来操作跨越多行的矩形代码块成为可能。

例如，考虑以下代码片段：

```
a1 = a111;
B2 = aaaa;
c3 = AAAA;
w4 = wwWW;
W4 = WWWW; 
```

在等宽字体中***=***和***;*** 都排队。

现在，如果将此文本加载到**Word**中并使用**比例字体**显示，则文本实际上会变成：

**注意：**添加了额外的空白以显示***=***和***;*** 不再排队：

```
a1 = a1 1 1;
B2  = aaaa;
c3 = A A A A;
w4 = w w W  W;
W4  = W W W  W; 
```

随着垂直对齐的消失，那些漂亮的代码块实际上消失了。

此外，由于不再保证光标垂直移动（即，列号从一行到下一行并不总是恒定的），这使得编写用于操作相似外观行的丢弃宏脚本变得更加困难。

# c# - .NET Compact Framework 2.0 中的 Alpha 混合颜色

> ID：14505
> 
> 赞同：2
> 
> 时间：2008-08-18T12:17:16.113
> 
> 标签：c#, .net, graphics, compact-framework

在完整的 .NET 框架中，您可以使用 Color.FromArgb() 方法创建具有 alpha 混合的新颜色，如下所示：

```
Color blended = Color.FromArgb(alpha, color); 
```

或者

```
Color blended = Color.FromArgb(alpha, red, green , blue); 
```

但是在 Compact Framework（特别是 2.0）中，这些方法都不可用，您只能得到：

```
Color.FromArgb(int red, int green, int blue); 
```

和

```
Color.FromArgb(int val); 
```

显然，第一个甚至不允许您输入 alpha 值，但后者的文档显示“val”是一个 32 位 ARGB 值（作为 0xAARRGGBB，而不是标准的 24 位 0xRRGGBB），所以这是有道理的您可以构建 ARGB 值并将其传递给函数。我尝试了以下方法：

```
private Color FromARGB(byte alpha, byte red, byte green, byte blue)
{
    int val = (alpha << 24) | (red << 16) | (green << 8) | blue;
    return Color.FromArgb(val);
} 
```

但无论我做什么，alpha 混合永远不会起作用，即使将 alpha 值设置为 0，生成的颜色也总是完全不透明。

有没有人让它在紧凑框架上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-18T12:33:02.273

显然，如果您有 Windows Mobile 5.0 或更高版本，这不是那么简单，但[仍然可能。](http://blogs.msdn.com/chrislorton/archive/2006/04/07/570649.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-13T23:03:20.513

有一个[codeplex 站点](http://www.codeplex.com/alphamobilecontrols)似乎可以为您完成 com interop 的繁重工作：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T12:37:45.557

> 显然，这不是那么简单，但如果您有 Windows Mobile 5.0 或更高版本，它仍然是可能的。

哇...如果我必须将所有代码放入（并进行本机互操作！），这绝对不值得。不过，很高兴知道，感谢您的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-20T00:36:49.717

我拿了这个代码，然后添加了这个

```
device.RenderState.AlphaBlendEnable = true;
device.RenderState.AlphaFunction = Compare.Greater;
device.RenderState.AlphaTestEnable = true;
device.RenderState.DestinationBlend = Blend.InvSourceAlpha;
device.RenderState.SourceBlend = Blend.SourceAlpha;
device.RenderState.DiffuseMaterialSource = ColorSource.Material; 
```

在初始化的例程中，它工作得很好，谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T22:03:05.387

CE 6.0 不支持 alpha 混合。WM 5.0 及更高版本可以，但不是通过 .NET CF，您需要 P/Invoke GDI 东西才能这样做。那里有现成的解决方案，但是，如果您有兴趣，我明天可以在办公室挖掘链接。我目前必须使用 CE 6.0，所以我没有想到它们。

如果您使用的是 CE 6.0，您可以通过保留透明背景颜色（例如 ff00ff 或类似丑陋的颜色）并在图像中将其用于透明区域来使用伪透明。然后，您的父控件必须实现一个简单的接口，该接口允许在子控件的图形缓冲区上重新绘制相关部分。请注意，这不会为您提供真正的“阿尔法通道”，而只是一种硬开关二进制透明度。

It's not as bad as it sounds. Take a look at the OpenNETCF ImageButton for starters. If you are going to use this method, i have a somewhat extended version of some simple controls with this technique lying around if you are interested.

One additional drawback is that this technique relies on the parent control implementing a special interface, and the daugther controls using it in drawing. So with closed-source components (i.e. also the stock winforms components) you are out of luck.

# xml - 在字符串中反向查找

> ID：14527
> 
> 赞同：7
> 
> 时间：2008-08-18T12:35:42.050
> 
> 标签：xml, xslt

我需要能够找到元素中最后一次出现的字符。

例如：

```
<mediaurl>http://www.blah.com/path/to/file/media.jpg</mediaurl> 
```

如果我尝试通过 using 来定位它`substring-before(mediaurl, '.')`，`substring-after(mediaurl, '.')`那么它当然会匹配第一个点。

我将如何获得文件扩展名？本质上，我需要从这样的路径中获取文件名和扩展名，但是对于如何使用 XSLT 来做这件事我感到很困惑。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-19T15:34:44.903

以下是在 XSLT 1.0 中生成所需输出的模板示例：

```
<xsl:template name="getExtension">
<xsl:param name="filename"/>

  <xsl:choose>
    <xsl:when test="contains($filename, '.')">
    <xsl:call-template name="getExtension">
      <xsl:with-param name="filename" select="substring-after($filename, '.')"/>
    </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$filename"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>

<xsl:template match="/">
    <xsl:call-template name="getExtension">
        <xsl:with-param name="filename" select="'http://www.blah.com/path/to/file/media.jpg'"/>
    </xsl:call-template>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-18T14:27:21.327

如果您使用的是 XSLT 2.0，这很容易：

```
 <xsl:variable name="extension" select="tokenize($filename, '\.')[last()]"/> 
```

如果你不是，那就有点难了。[O'Reilly XSLT Cookbook](http://oreilly.com/catalog/9780596003722/toc.html)中有一个很好的例子。搜索“标记字符串”。

我相信还有一个 EXSLT 功能，如果你有的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T12:55:43.680

用“/”标记并从数组中取出最后一个元素怎么样？

```
Example: tokenize("XPath is fun", "\s+")
Result: ("XPath", "is", "fun") 
```

曾经是 XSLT 提琴手……现在失去了联系。但是 HTH

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-26T13:21:52.203

作为参考，这个问题在 XSLT 中通常称为“substring-after-last”。

# linq - LINQ-to-SQL 与存储过程？

> ID：14530
> 
> 赞同：190
> 
> 时间：2008-08-18T12:37:57.553
> 
> 标签：linq, linq-to-sql, stored-procedures

我查看了 StackOverflow 上的“LINQ 初学者指南”帖子（[LINQ 初学者指南](https://stackoverflow.com/questions/8050/beginners-guide-to-linq)），但有一个后续问题：

我们即将启动一个新项目，其中几乎我们所有的数据库操作都将是相当简单的数据检索（项目的另一部分已经写入数据）。到目前为止，我们的大多数其他项目都使用存储过程来处理这些事情。但是，如果更有意义，我想利用 LINQ-to-SQL。

所以，问题是：对于简单的数据检索，哪种方法更好，LINQ-to-SQL 还是存储过程？有什么具体的优点或缺点吗？

谢谢。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2008-08-26T20:04:51.347

LINQ 相对于存储过程的一些优点：

1.  **类型安全**：我想我们都明白这一点。
2.  **抽象：对于**[LINQ-to-Entities](http://msdn.microsoft.com/en-us/library/bb386964.aspx)尤其如此。这种抽象还允许框架添加您可以轻松利用的其他改进。 [PLINQ](http://msdn.microsoft.com/en-us/magazine/cc163329.aspx)是向 LINQ 添加多线程支持的示例。添加此支持的代码更改很少。执行这种仅调用 sprocs 的数据访问代码会困难得多。
3.  **调试支持**：我可以使用任何 .NET 调试器来调试查询。使用存储过程，您无法轻松调试 SQL，并且这种体验很大程度上取决于您的数据库供应商（MS SQL Server 提供了一个查询分析器，但通常这还不够）。
4.  **供应商不可知论**：LINQ 可与大量数据库一起使用，支持的数据库数量只会增加。由于不同的语法或功能支持（如果数据库完全支持 sprocs），Sprocs 并不总是在数据库之间可移植。
5.  **部署**：其他人已经提到了这一点，但是部署单个程序集比部署一组存储过程更容易。这也与#4 相关。
6.  **更简单**：您不必学习 T-SQL 来进行数据访问，也不必学习调用存储过程所需的数据访问 API（例如 ADO.NET）。这与#3 和#4 有关。

LINQ vs sprocs 的一些缺点：

1.  **网络流量**：当 LINQ 发送整个查询时，sprocs 只需要通过线路序列化 sproc-name 和参数数据。如果查询非常复杂，这可能会变得非常糟糕。然而，LINQ 的抽象允许微软随着时间的推移改进这一点。
2.  **不太灵活**：Sprocs 可以充分利用数据库的功能集。LINQ 的支持往往更通用。这在任何类型的语言抽象中都很常见（例如 C# 与汇编程序）。
3.  **重新编译**：如果需要更改数据访问方式，则需要重新编译、版本化和重新部署程序集。Sprocs*有时*可以让 DBA 调整数据访问例程，而无需重新部署任何东西。

安全性和可管理性也是人们争论的话题。

1.  **安全性**：例如，您可以通过直接限制对表的访问来保护您的敏感数据，并将 ACL 放在存储过程中。但是，使用 LINQ，您仍然可以限制对表的直接访问，而是将 ACL 放在可更新的表*视图*上以达到类似的目的（假设您的数据库支持可更新的视图）。
2.  **可管理性**：使用视图还可以使您的应用程序不受模式更改的影响（如表规范化）。您可以更新视图，而无需更改数据访问代码。

我曾经是一个大 sproc 人，但我开始倾向于将 LINQ 作为一个更好的选择。如果在某些领域存储过程明显更好，那么我可能仍会编写存储过程，但使用 LINQ 访问它。:)

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2008-08-18T12:59:51.457

由于 DBA 多年来一直在喋喋不休的所有原因，我通常支持将所有内容都放入存储过程中。在 Linq 的情况下，确实不会有简单的 CRUD 查询的性能差异。

但是在做出这个决定时要记住一些事情：使用任何 ORM 都会使您与数据模型紧密结合。DBA 不能在不强制您更改已编译代码的情况下更改数据模型。使用存储过程，您可以在一定程度上隐藏这些类型的更改，因为从过程返回的参数列表和结果集代表它的契约，只要仍然满足该契约，就可以更改内部结构.

而且，如果 Linq 用于更复杂的查询，则调整数据库将变得更加困难。当存储过程运行缓慢时，DBA 可以完全专注于孤立的代码，并且有很多选择，只是为了在他/她完成时仍然满足合同。

我见过很多很多情况下，应用程序中的严重问题是通过更改存储过程中的模式和代码来解决的，而无需对已部署的编译代码进行任何更改。

也许混合方法对 Linq 会很好？当然，Linq 可以用来调用存储过程。

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2008-08-18T12:40:52.447

Linq 到 Sql。

Sql server 将缓存查询计划，因此存储过程没有性能提升。

另一方面，您的 linq 语句将在逻辑上成为您的应用程序的一部分并与您的应用程序一起测试。Sprocs 总是有点分离，更难维护和测试。

如果我现在从头开始开发一个新应用程序，我只会使用 Linq，而不是存储过程。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2008-08-18T13:08:31.190

对于基本的数据检索，我会毫不犹豫地选择 Linq。

自从搬到 Linq 后，我发现了以下优势：

1.  调试我的 DAL 从未如此简单。
2.  架构更改时的编译时间安全是无价的。
3.  部署更容易，因为所有内容都编译成 DLL。不再需要管理部署脚本。
4.  因为 Linq 可以支持查询任何实现 IQueryable 接口的东西，所以您将能够使用相同的语法来查询 XML、对象和任何其他数据源，而无需学习新的语法

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2008-08-28T16:11:55.537

LINQ 会使过程缓存膨胀

如果应用程序正在使用 LINQ to SQL，并且查询涉及使用长度可变的字符串，则 SQL Server 过程缓存将因每个可能的字符串长度的查询版本而变得臃肿。例如，考虑以下针对 AdventureWorks2008 数据库中的 Person.AddressTypes 表创建的非常简单的查询：

```
var p = 
    from n in x.AddressTypes 
    where n.Name == "Billing" 
    select n;

var p = 
    from n in x.AddressTypes 
    where n.Name == "Main Office" 
    select n; 
```

如果这两个查询都运行，我们将在 SQL Server 过程缓存中看到两个条目：一个与 NVARCHAR(7) 绑定，另一个与 NVARCHAR(11) 绑定。现在想象一下，如果有成百上千个不同的输入字符串，都具有不同的长度。对于完全相同的查询，过程缓存将不必要地填充各种不同的计划。

更多信息：[https ://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=363290](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=363290&wa=wsignin1.0)

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2008-09-12T04:42:23.510

我认为 pro LINQ 论点似乎来自没有数据库开发历史的人（通常）。

特别是如果使用像 VS DB Pro 或 Team Suite 这样的产品，这里提出的许多论点都不适用，例如：

更难维护和测试：VS 提供完整的语法检查、样式检查、引用和约束检查等。它还提供完整的单元测试功能和重构工具。

LINQ 使真正的单元测试成为不可能，因为（在我看来）它没有通过 ACID 测试。

在 LINQ 中调试更容易：为什么？VS 允许从托管代码完全介入并定期调试 SP。

编译成单个 DLL 而不是部署脚本：VS 再次发挥作用，它可以构建和部署完整的数据库或进行数据安全的增量更改。

不必使用 LINQ 学习 TSQL：不，您不需要，但您必须学习 LINQ - 好处在哪里？

> 我真的不认为这是一个好处。能够单独更改某些东西在理论上可能听起来不错，但仅仅因为更改符合合同并不意味着它会返回正确的结果。为了能够确定正确的结果是什么，您需要上下文，并从调用代码中获取该上下文。

嗯，松散耦合的应用程序是所有优秀程序员的最终目标，因为它们确实增加了灵活性。能够独立地改变事物是很棒的，而且你的单元测试将确保它仍然返回适当的结果。

在大家不高兴之前，我认为 LINQ 有它的位置并且有一个美好的未来。但是对于复杂的数据密集型应用程序，我认为它还没有准备好取代存储过程。这是我今年在 TechEd 获得 MVP 的回应（他们将保持匿名）。

编辑：LINQ to SQL 存储过程方面的事情我仍然需要阅读更多内容 - 取决于我发现我可能会改变我上面的诽谤;）

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2008-12-03T05:40:53.513

LINQ 是新的并且有它的位置。LINQ 并不是为了取代存储过程而发明的。

在这里，我将重点介绍一些性能神话和缺点，仅针对“LINQ to SQL”，当然我可能完全错了;-)

(1)人们说LINQ语句可以在SQL server中“缓存”，所以不会损失性能。部分正确。“LINQ to SQL”实际上是将 LINQ 语法转换为 TSQL 语句的运行时。所以从性能的角度来看，硬编码的 ADO.NET SQL 语句与 LINQ 没有区别。

(2)举个例子，一个客服UI有“转帐”功能。这个函数本身可能会更新 10 个数据库表并一次性返回一些消息。使用 LINQ，您必须构建一组语句并将它们作为一个批次发送到 SQL 服务器。这个翻译后的 LINQ->TSQL 批处理的性能几乎无法与存储过程相提并论。原因？因为您可以使用内置的 SQL 分析器和执行计划工具来调整存储过程中语句的最小单元，所以在 LINQ 中不能这样做。

关键是，在谈论单个 DB 表和少量数据 CRUD 时，LINQ 与 SP 一样快。但是对于更复杂的逻辑，存储过程更容易调整性能。

(3)“LINQ to SQL”很容易让新手引入性能猪。任何高级 TSQL 人员都可以告诉您何时不使用 CURSOR（基本上，在大多数情况下，您不应该在 TSQL 中使用 CURSOR）。使用 LINQ 和带有查询的迷人的“foreach”循环，对于新手来说编写这样的代码非常容易：

```
foreach(Customer c in query)
{
  c.Country = "Wonder Land";
}
ctx.SubmitChanges(); 
```

你可以看到这个简单而体面的代码是如此吸引人。但在后台，.NET 运行时只是将其转换为更新批处理。如果只有 500 行，这是 500 行 TSQL 批处理；如果有百万行，这是一个成功。当然，有经验的用户不会用这种方式来做这项工作，但关键是，这种方式很容易沦陷。

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2008-08-18T12:45:13.140

最好的代码是无代码，使用存储过程，您必须在数据库中编写至少一些代码，并在应用程序中编写代码来调用它，而使用 LINQ to SQL 或 LINQ to Entities，您不必编写任何额外的代码除了实例化上下文对象之外的任何其他 LINQ 查询的代码。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2008-10-09T14:43:53.843

LINQ 在特定于应用程序的数据库和小型企业中肯定占有一席之地。

但是在大型企业中，中央数据库作为许多应用程序的公共数据中心，我们需要抽象。我们需要集中管理安全并显示访问历史。我们需要能够进行影响分析：如果我对数据模型进行小改动以满足新的业务需求，需要更改哪些查询以及需要重新测试哪些应用程序？视图和存储过程给了我这个。如果 LINQ 可以做到所有这些，并使我们的程序员更有效率，我会欢迎它——有没有人有在这种环境中使用它的经验？

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2008-08-19T14:28:23.010

> DBA 不能在不强制您更改已编译代码的情况下更改数据模型。使用存储过程，您可以在一定程度上隐藏这些类型的更改，因为从过程返回的参数列表和结果集代表它的契约，只要仍然满足该契约，就可以更改内部结构.

我真的不认为这是一个好处。能够单独更改某些东西在理论上可能听起来不错，但仅仅因为更改符合合同并不意味着它会返回正确的结果。为了能够确定正确的结果是什么，您需要上下文，并从调用代码中获取该上下文。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2009-06-30T19:04:17.387

恕我直言，RAD = LINQ，RUP = 存储过程。我在一家大型财富 500 强公司工作了很多年，在包括管理在内的多个层面工作，坦率地说，我永远不会聘请 RUP 开发人员来做 RAD 开发。他们是如此孤立，以至于他们对在流程的其他级别做什么的知识非常有限。对于孤立的环境，让 DBA 通过非常具体的入口点控制数据是有意义的，因为坦率地说，其他人不知道完成数据管理的最佳方法。

但大企业在发展的舞台上行动*缓慢*，代价非常高昂。有时您需要更快地行动以节省时间和金钱，而 LINQ 提供了这一点，甚至更多。

有时我认为 DBA 对 LINQ 有偏见，因为他们觉得它威胁到他们的工作安全。但这就是野兽的本性，女士们先生们。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2012-02-08T16:35:56.237

我认为您需要使用 procs 来处理任何真实的事情。

A）在 linq 中编写所有逻辑意味着您的数据库不太有用，因为只有您的应用程序可以使用它。

B）我不相信对象建模比关系建模更好。

C) 在 SQL 中测试和开发存储过程比在任何 Visual Studio 环境中的编译编辑周期快得多。您只需编辑、F5 并点击选择，您就可以参加比赛了。

D）存储过程比程序集更容易管理和部署。你只需将文件放在服务器上，然后按 F5 ......

E) Linq to sql 有时仍然会在您不期望的情况下编写蹩脚的代码。

老实说，我认为最终的事情是让 MS 增强 t-sql 以便它可以像 linq 那样隐式地进行连接投影。例如，t-sql 应该知道您是否想做 order.lineitems.part。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2008-08-28T12:39:55.017

LINQ 不禁止使用存储过程。我已经将混合模式与 LINQ-SQL 和[LINQ-storedproc 一起使用](http://codebetter.com/blogs/david.hayden/archive/2008/02/19/linq-to-sql-and-stored-procedures-visual-studio-2008-and-repository-factory.aspx)。就个人而言，我很高兴我不必编写存储的过程....pwet-tu。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2008-10-20T03:14:09.210

此外，还有可能 2.0 回滚的问题。相信我，它发生在我身上好几次了，所以我确信它也发生在其他人身上。

我也同意抽象是最好的。除此之外，ORM 的最初目的是使 RDBMS 与 OO 概念很好地匹配。但是，如果在 LINQ 之前一切正常，不得不偏离 OO 概念，那么就搞砸了。概念和现实并不总是很好地结合在一起。IT 中没有激进的狂热分子的空间。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2011-06-07T07:53:56.430

根据大师的说法，我将 LINQ 定义为摩托车，将 SP 定义为汽车。如果您想短途旅行并且只有少量乘客（在本例中为 2），请优雅地使用 LINQ。但是如果你想去旅行并拥有大乐队，我认为你应该选择SP。

总而言之，选择摩托车还是汽车取决于您的路线（业务）、长度（时间）和乘客（数据）。

希望对你有帮助，我可能错了。:D

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2008-08-18T12:44:12.300

我假设你的意思是 Linq To Sql

对于任何 CRUD 命令，都可以轻松地分析存储过程与任何技术的性能。在这种情况下，两者之间的任何差异都可以忽略不计。尝试对超过 100,000 个选择查询的 5 个（简单类型）字段对象进行分析，以确定是否存在真正的差异。

另一方面，真正的交易破坏者将是您是否愿意将业务逻辑放在数据库中的问题，这是反对存储过程的论据。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2012-09-25T21:36:30.933

所有这些倾向于 LINQ 的答案主要是在谈论 EASE of DEVELOPMENT，这或多或少与编码质量差或编码懒惰有关。我只是这样。

一些优点或 Linq，我在这里读为，易于测试，易于调试等，但这些与最终输出或最终用户无关。这总是会给最终用户带来性能上的麻烦。在内存中加载许多东西然后在使用 LINQ 时应用过滤器有什么意义？

再次使用 TypeSafety，请注意“我们小心避免错误的类型转换”，我们正试图通过使用 linq 来提高质量。即使在这种情况下，如果数据库中的任何内容发生变化，例如 String 列的大小，那么 linq 需要重新编译，并且如果没有它就不会是类型安全的。我试过了。

尽管在使用 LINQ 时我们发现它很好、很好、很有趣等，但它具有使开发人员变得懒惰的剪切缺点:) 与存储过程相比，它在性能上被证明是糟糕的（可能是最差的）1000 次。

别偷懒了。我正在努力。:)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2012-03-10T10:11:39.917

对于具有单个数据访问点的简单 CRUD 操作，如果您对语法感到满意，我会说选择 LINQ。对于更复杂的逻辑，如果您擅长 T-SQL 及其更高级的操作，我认为存储过程在性能方面会更高效。您还可以从 Tuning Advisor、SQL Server Profiler、从 SSMS 调试查询等获得帮助。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2011-08-24T04:30:03.467

结果可以概括为

LinqToSql 用于小型站点和原型。它确实节省了原型设计的时间。

Sps：通用。我可以微调我的查询并始终检查 ActualExecutionPlan / EstimatedExecutionPlan。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2011-10-20T17:32:46.473

```
Create PROCEDURE userInfoProcedure
    -- Add the parameters for the stored procedure here
    @FirstName varchar,
    @LastName varchar
AS
BEGIN

    SET NOCOUNT ON;

    -- Insert statements for procedure here
    SELECT FirstName  , LastName,Age from UserInfo where FirstName=@FirstName
    and LastName=@FirstName
END
GO 
```

[http://www.totaldotnet.com/Article/ShowArticle121_StoreProcBasic.aspx](http://www.totaldotnet.com/Article/ShowArticle121_StoreProcBasic.aspx)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2012-03-06T16:41:50.890

存储过程使测试更容易，您可以在不接触应用程序代码的情况下更改查询。同样对于 linq，获取数据并不意味着它是正确的数据。测试数据的正确性意味着运行应用程序，但使用存储过程很容易测试，而无需接触应用程序。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2011-08-12T15:34:50.857

LINQ 和 SQL 都有自己的位置。两者都有其缺点和优点。

有时对于复杂的数据检索，您可能需要存储过程。有时您可能希望其他人在 Sql Server Management Studio 中使用您的存储过程。

Linq to Entities 非常适合快速 CRUD 开发。

当然，您可以只使用其中一个来构建应用程序。或者你可以把它混合起来。这一切都取决于您的要求。但是 SQL 存储过程不会很快消失。

# html - 我应该如何处理 wiki 页面内容中的自动链接？

> ID：14545
> 
> 赞同：5
> 
> 时间：2008-08-18T12:52:53.887
> 
> 标签：html, database, wiki, hyperlink

我所说的自动链接是指将内联在页面内容中的 wiki 链接生成到页面的超链接（如果存在）或创建链接（如果页面不存在）的过程。

使用我正在使用的解析器，这是一个两步过程 - 首先，解析页面内容并提取源标记中指向 wiki 页面的所有链接。然后，在生成最终的 HTML 标记之前，我将现有页面的数组返回给解析器。

处理此过程的最佳方法是什么？似乎我需要保留网站上每个页面的缓存列表，而不是每次都提取页面标题的索引。还是单独检查每个链接以查看它是否存在更好？如果列表没有被缓存，这可能会导致大量的数据库查找。对于拥有数千页的大型 wiki 站点，这仍然可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-18T14:23:06.903

在我自己的 wiki 中，我检查了所有链接（没有缓存），但我的 wiki 仅由内部少数人使用。你应该对这样的东西进行基准测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-15T08:35:44.587

我试过这样做一次，这是一场噩梦！我的解决方案是 SQL 过程中的一个讨厌的循环，我不推荐它。

给我带来麻烦的一件事是决定在多词短语上使用什么链接。假设您有一些文字说“我正在使用堆栈溢出”，而您的 wiki 有 3 个页面，分别称为“堆栈”、“溢出”和“堆栈溢出”......您的短语的哪一部分与哪里相关联？它会发生！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-22T10:52:03.063

在我自己的 wiki 系统中，我的缓存系统非常简单——当页面更新时，它会检查链接以确保它们是有效的，并为那些不是的应用正确的格式/位置。缓存的页面在我的缓存根目录中保存为 HTML 页面。

在页面更新期间标记为“未创建”的页面被插入到保存页面的数据库表中，然后插入到链接到它的页面的 csv 中。

当有人创建该页面时，它会启动扫描以查看每个链接页面并使用正确的链接和格式重新缓存链接页面。

如果您对突出显示未创建的页面不感兴趣，但是您可以只使用一个检查器来查看当您尝试访问该页面时是否创建了该页面 - 如果没有重定向到创建页面。然后像往常一样链接到其他文章中的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-28T08:49:12.187

我的想法是查询类似的标题`SELECT title FROM articles`并简单地检查每个维基链接是否在该字符串数组中。如果是你链接到页面，如果不是，你链接到创建页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-09-01T00:26:20.517

根据我开发[Juli](http://sourceforge.net/projects/jjjuli/)的经验，这是一个带有自动链接的离线个人 wiki，生成静态 HTML 方法可能会解决您的问题。

如您所想，生成自动链接的 Wiki 页面需要很长时间。但是，在生成静态 HTML 的情况下，仅在新添加或删除 wikipage 时才会重新生成自动链接的 Wiki 页面（换句话说，更新 wikipage 时不会发生）并且“重新生成”可以在后台完成，因此通常我不管怎么花很长时间。用户只会看到生成的静态 HTML。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-18T15:23:49.397

[在我通过 Markdown 运行内容后，我使用 Sinatra（链接文本](https://github.com/darkhelmet/swiki/tree)）制作的个人项目中，我做了一个 gsub 来用适当的链接替换 ​​wiki 单词和其他内容（如 [[Here is my link]] 等），在每个检查页面是否存在并链接以创建或查看取决于。

这不是最好的，但我在构建这个应用程序时并没有考虑到缓存/速度。这是一个低资源的简单维基。

如果速度更重要，您可以将应用程序包装在缓存中。例如，sinatra 可以使用 Rack 缓存进行包装。

# sql-server - SSRS 计划报告不起作用

> ID：14552
> 
> 赞同：0
> 
> 时间：2008-08-18T13:02:27.037
> 
> 标签：sql-server, reporting-services, ssrs-2008

我在 SQL Server 中的计划报告不会运行。我检查了日志，发现了失败的工作。日志中的错误消息是：

> 请求的登录名“NT AUTHORITY\NETWORK SERVICE”的“EXECUTE AS LOGIN”失败。步骤失败。

我正在对报告使用 SQL 身份验证，因此它不应该是数据权限的问题。服务器上不会运行任何定期报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-18T14:34:31.373

我在这里找到了答案： [http ://www.themssforum.com/SVCS/Unable-execute/](http://www.themssforum.com/SVCS/Unable-execute/)

显然，“NT AUTHORITY\NETWORK SERVICE”的登录有问题，它无法正常运行它拥有的作业。任何人都明白为什么会发生这种情况？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-18T13:31:35.730

您可以检查您的网络服务帐户的权限吗？特别要确保他们拥有“作为操作系统的一部分”的权限。如果我正确阅读了错误消息，看起来 NT AUTHORITY\NETWORK SERVICE 帐户无法作为登录用户执行。看起来它从来没有进入过查询，看起来它在 Windows 身份验证部分失败了，所以永远不会进入 SQL 身份验证部分。

您还可以检查 Windows 中的安全事件日志。如果是身份验证问题，则操作系统可能会记录其他信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T13:45:33.050

您可以使用 Web 浏览器访问 SRS 的 Web 服务页面 (ReportService2005.asmx) 吗？如果不是，它可能指向 SRS 服务，如果可以，它可能指向调度程序服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-18T14:04:41.090

只是为了排除故障，您可以使用域帐户而不是内置的 NetworkService 帐户来运行您的服务吗？

我还发现[这篇](http://www.microsoft.com/communities/newsgroups/en-us/default.aspx?dg=microsoft.public.sqlserver.reportingsvcs&tid=ca2a5bdd-93a8-48d6-a675-ffea355dbac1&cat=&lang=&cr=&sloc=&p=1)文章描述了您报告的相同错误：

也许该解决方案对您有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-26T16:54:20.163

我似乎记得很久以前有类似的问题，该问题与访问 smtp 服务器以发送报告有关，并通过向服务器应用补丁来解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-07T12:37:57.540

我猜你正在运行一个非英语操作系统。

不知何故，无论出于何种原因，当操作系统被翻译成其他语言时，网络服务的登录名有时会被本地化。

现在很多程序都希望将登录名硬编码为“NT AUTHORITY\NETWORK SERVICE”——例如在德语版本的 Windows 中，帐户的名称是“NT-AUTORITÄT\NETZWERKDIENST”。所以你的程序正在寻找英文名称，找不到它，并显示错误。

甚至一些微软程序在安装时也会遇到这个陷阱并显示这样的错误！

# asp.net - 如何组织数据集查询以提高性能

> ID：14570
> 
> 赞同：0
> 
> 时间：2008-08-18T13:21:45.670
> 
> 标签：asp.net, database, performance

我不知道何时将 tableadapter 或工具箱中的查询添加到数据集。它有什么不同吗？

我也不知道在哪里创建适配器的实例。

*   我应该在里面做`Page_Load`吗？
*   当我要使用它时，我应该这样做吗？
*   创建新实例时是否打开了新连接？

这似乎不是很重要，但是每次我创建一个查询时，我的大脑中都会有一个小声音问我这些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-18T13:32:51.937

> 当我要使用它时，我应该这样做吗？

我建议您仅在要使用数据时才检索数据。如果您不需要它，没有理由通过在 Page_Load 中检索它来浪费资源。如果您将在整个页面加载过程中多次需要它，请考虑将查询结果保存到私有变量或集合中，以便在整个页面加载过程中可以多次重复使用相同的数据。

> 创建新实例时是否打开了新连接？

Asp.net 处理[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca(vs.71).aspx)，并以有效的方式打开和关闭连接。你不应该担心这个。

从性能角度考虑的另一件事是避免使用 Datasets 和 TableAdapter。在许多情况下，它们会为使用 Linq to Sql、存储过程或 DataReaders 时不存在的数据检索增加[额外的开销。](http://aspnet.4guysfromrolla.com/articles/050405-1.aspx)

# tsql - 如何避免在 Sybase (T-SQL) 中使用游标？

> ID：14577
> 
> 赞同：2
> 
> 时间：2008-08-18T13:24:55.710
> 
> 标签：tsql, sybase, cursors

想象一下场景，您正在更新一些遗留的 Sybase 代码并遇到一个游标。存储过程在#temporary 表中建立了一个结果集，该表已准备好返回，除了其中一列不是非常可读，它是一个字母数字代码。

我们需要做的是找出这段代码可能的不同值，调用另一个存储过程来交叉引用这些离散值，然后用新破译的值更新结果集：

```
declare c_lookup_codes for
select distinct lookup_code
from #workinprogress

while(1=1)
begin
    fetch c_lookup_codes into @lookup_code

    if @@sqlstatus<>0
    begin
        break
    end

    exec proc_code_xref @lookup_code @xref_code OUTPUT

    update #workinprogress
    set xref = @xref_code
    where lookup_code = @lookup_code
end 
```

现在，虽然这可能会让一些人心悸，但它确实有效。我的问题是，如何最好地避免这种事情？

_NB：出于本示例的目的，您还可以想象结果集在 500k 行的区域内，并且 look_up_code 有 100 个不同的值，最后，不可能有一个包含外部参照值的表proc_code_xref 中的逻辑太神秘了。_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-18T14:18:22.310

除非您愿意复制外部参照过程中的代码，否则无法避免使用游标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-18T14:33:03.343

如果要取出光标，则必须有一个外部参照表。假设您知道 100 个不同的查找值（并且它们是静态的），很容易通过调用 proc_code_xref 100 次并将结果插入到表中来生成一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-12T17:51:56.023

他们说，如果你必须使用光标，那么，你一定做错了什么;-) 这里是没有光标的解决方案：

```
declare @lookup_code char(8)

select distinct lookup_code
into #lookup_codes
from #workinprogress

while 1=1
begin
    select @lookup_code = lookup_code from #lookup_codes

    if @@rowcount = 0 break

    exec proc_code_xref @lookup_code @xref_code OUTPUT

    delete #lookup_codes
    where lookup_code = @lookup_code
end 
```

# windows - 我可以让 Windows 的 Subversion + TortoiseSVN 不区分大小写吗？

> ID：14582
> 
> 赞同：25
> 
> 时间：2008-08-18T13:27:00.653
> 
> 标签：windows, svn, tortoisesvn

在过去的几个月里，我一直在使用 Subversion 进行代码控制和 TortoiseSVN 与服务器的交互，总的来说它进展顺利！但是，有时我的 FoxPro IDE 会更改文件扩展名的大小写，而不会发出警告，其中“ *program.prg* ”变为“ *program.PRG ”） **TortoiseSVN***显然认为这意味着第一个文件已被删除，被标记为“丢失”，第二个名称显示为“非版本化”，严重破坏了我跟踪文件更改的能力。我知道 Subversion 起源于 *nix 的区分大小写的世界，但是，有没有办法控制 Subversion 或 TortoiseSVN 中的这种行为在与 Windows 一起使用时不区分文件名大小写？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-08-18T13:49:43.507

不幸的是，Subversion 是区分大小写的。这是因为来自 Subversion 的文件可以在区分大小写的文件系统（例如，*nix）和不区分大小写的文件系统（例如，Windows、Mac）上检出。

[这个预提交挂钩脚本](http://svn.apache.org/repos/asf/subversion/trunk/contrib/hook-scripts/case-insensitive.py)可以帮助您在签入文件时避免出现问题。如果它不能解决您的问题，我最好的建议是编写一个小脚本以确保所有扩展都是小写的，并在每次签入/签出之前运行它。这将是一个 PITA，但也许是你最好的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-05-20T20:32:08.727

Windows 确实支持区分大小写，但您必须从 Windows API 向 CreateFile 发送正确的 POSIX 标志！可能需要更改注册表项（SFU/Tools for Unix 和 Ultimate Windows 7 已设置此注册表项，因此 Windows 支持区分大小写的文件名）。

Windows 是根据 Unix 设计的，但 Explorer.exe 和其他程序等程序旨在禁止区分大小写以实现向后兼容性和安全性（主要是在处理执行 notepad.exe 与 NOTEPAD.EXE 的 dos 时，其中所有大写字母都是病毒或恶意软件）。

但是 Vista+ 具有安全属性，这使得它过时了。

TortiousSVN 只是不支持在制作和重命名文件时传递这个 posix 标志。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-22T13:25:26.223

我将 TortoiseSVN 与 VFP 一起使用，它几乎可以无缝地处理案例翻转。唯一没有的情况是，当我尝试提交时，我在 IDE 中打开了文件：VFP 持有的文件锁会混淆它。这是您的问题所在，还是有其他问题？

去年我在 FoxForward 上做了一个关于在 Subversion 中使用 VFP 的演讲：大部分演讲都是关于命令行的，但最后有几张幻灯片提供了一些工具的链接，这些工具可以帮助您在 VFP 中使用 Subversion。[http://docs.google.com/Presentation?id=dfxkh6x4_3ghnqc4](http://docs.google.com/Presentation?id=dfxkh6x4_3ghnqc4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T13:53:15.737

Kit，您在上面评论说 VFP 的基于二进制的源文件很难在 Subversion 中使用。我在上面给出的链接提到了一些使它更容易的工具，但我使用的是 Christof Wollenhaupt 的 TwoFox 实用程序——它将 VFP 项目转换为纯文本。您必须手动运行它，但我对此没有任何问题。

[http://www.foxpert.com/docs/cvs.en.htm](http://www.foxpert.com/docs/cvs.en.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-24T14:00:17.697

我相信扩展名上的随机大小写根本不是随机的。我记得对此进行了测试。如果您从项目经理处修改程序。通过单击修改按钮让我们说。然后保存扩展名是小写的更改。如果您从命令窗口执行修改命令并保存更改，则扩展名是大写的。显然，微软的编码人员并不担心扩展案例是相同的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-02T19:18:58.097

不，你肯定不能。SVN 是区分大小写的，除非您以某种方式重写代码……它*是*开源的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-18T10:13:32.427

我们遇到了类似的问题，我**找到了**比这里公开的更好的解决方案，所以我现在分享它：

*   对于手动**完成的提交**，现在 TortoiseSVN 自动修复文件名的大小写：它重命名本地文件以匹配版本化文件的大小写（只需打开该路径中的提交窗口），所以应该**没有问题**。

*   对于**自动提交**，您不能使用 TortoiseSVN，因为它需要您手动确认提交（它会打开带有特定消息的提交窗口，但您仍然必须单击确定）。但是如果您直接使用 Subversion (svn) 进行自动提交，那么您将在该提交上遇到区分大小写的问题，因为 Subversion 仍然区分大小写......

如何为自动提交解决这个问题？好吧，我尝试了一种混合方法：创建一个名为的批处理文件`FixCaseSensitiveFileNames.bat`，您可以调用它在提交之前传递您想要修复的路径，例如：`call FixCaseSensitiveFileNames.bat C:\MyRepo`. 批处理文件打开 TortoiseSVN 进行手动提交，并自动修复文件名，但随后在预定义的暂停后关闭提交窗口，因此您可以继续使用已修复的区分大小写的文件名进行自动提交。暂停是使用本地 ping 模拟的，您可以通过更改`-n`参数（即尝试次数）来更改持续时间。如果您没有进行足够长的暂停，则存在在 TortoiseSVN 窗口进行神奇修复之前关闭它的风险。这是**批处理文件的代码**：

```
@echo off
REM *** This BAT uses TortoiseSVN to fix the case-sensitive names of the files in Subversion
REM *** Call it before an automated commit. The Tortoise commit fixes this issue for manual commits,
REM *** so the trick is opening the commit window and close it automatically after a pause (with ping).
REM *** %1 = path to be fixed

start TortoiseProc.exe /command:commit /path:"%1"
ping localhost -n 10 >nul
taskkill /im TortoiseProc.exe 
```

这完全解决了我们自动化日常构建过程的问题。我看到的唯一问题是一个窗口会打开几秒钟，这对我们的日常构建来说不是问题，但如果这对你来说是个问题，也可能有解决方法......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-14T11:34:32.863

TortoiseSVN 具有[修复文件重命名](https://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-rename.html#tsvn-dug-rename-repair)功能。它需要手动干预，它实际上会发出要提交的文件重命名操作，但仍然通过保留文件历史记录来解决当前用例。

# svn - 除了源代码之外，您是否使用版本控制？

> ID：14588
> 
> 赞同：14
> 
> 时间：2008-08-18T13:30:21.283
> 
> 标签：svn, version-control, cvs

我发现 SVN 对于文档、个人文件以及其他非源代码用途非常有用。一般来说，您发现版本控制系统还有哪些其他实际用途？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-18T13:46:29.600

我已经看到版本控制被用于其他非源代码目的，例如，

1.  模式文件 - 一组表示真实世界模式的 XML 模式文件
2.  内容文件 - 以特定格式表示的内容，这与 VStudio 中的设计器相关联，使用源代码控制，允许历史记录，回滚所有内容，无需数据库交互

在这两种情况下，我们注意到它基本上是冗长的文件，将这些文件放在源代码管理中而不是“数据库中的文本记录”的主要原因是

1.  可能需要比较版本的文件
2.  历史（因为有多个用户在处理它们）
3.  能够回滚到早期版本
4.  通过获取特定标签来标记和发布
5.  如果你使用 Team Foundation (TFS)，整个 scrum 模板和工作项等
6.  不涉及数据库，以上所有内容都没有额外的开发

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-18T13:41:41.997

在我早期的一项工作中，我们使用 CVS 进行 DNS 修订控制。这主要是一种廉价而肮脏的备份区域文件的方式。

我还听说有人在他们的主目录中使用版本控制系统。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-18T13:55:27.193

在学校的最后一个学期，我参加了两门课，每门课都有一个大型的、耗时的项目在学期末到期。在整个学期中，他们都需要几篇长篇论文。我在两个课程中都大量使用 SVN 来跟踪我对每篇论文和项目所做的每一次更改。

在写作方面，我更像是一个“一次写完”的人，如果我试图将这个过程分散到多个会话中，我往往会失去思路。能够区分我论文的最新版本使我更容易回到正轨。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-18T13:33:52.293

我在 LaTeX 中编辑了很多文档，所以我使用 SVN 来存储 tex 文件和图像等。做 Diffs 很方便，如果我遇到灾难，希望能救我。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-18T13:37:28.680

通常，我将构建过程需要的任何东西放入源代码控制中。唯一出现的问题是，如果您有其他部门（例如市场营销）准备的资源，例如安装在您的安装中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-18T13:35:16.783

我在名为 bin 的路径中有一个文件夹，其中包含有用的实用程序，例如来自 sysinternals 和其他的实用程序。我使用 svn 使这些在不同的机器上保持最新。此外，诸如 powershell 脚本、vimrc 文件等之类的东西非常适合保持集中。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-18T13:36:51.227

我从来没有想过将它用于个人的东西，但是在软件项目中，我检查了几乎所有不能在以后重新生成的东西（这方面的例子包括可执行文件和代码生成的文档）。文档总是会被签入。如果有演示，向客户的演示文稿会被签入并与用于演示的代码库一起标记。

我认为 SVN 和 CVS 对非技术用户来说不够“友好”，但我现在很好奇可能用于非工程项目的版本控制......

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-18T13:38:12.673

大多数文档将由不止一对人眼查看。例如，在项目规划阶段，当分析师更新需求文档并且您想查看自上次看到它以来发生了什么变化时，它非常有用。Wiki 也有这个功能，natch。我们将 SharePoint 用于这些目的，但请选择您的供应商。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-08-25T21:43:54.517

我经常对常见文件使用版本控制，因为我有一台笔记本电脑、一台台式机在工作，还有一台家用台式机，我也在上面做很多工作（我每周有两天在家工作）。

他们中的任何一个的新会话都以一个名为“start”的脚本开始，该脚本更新了一堆结帐，并以一个名为“stop”的脚本结束，该脚本向 VCS 提交了一些内容，或者至少向我展示了修改。

我将它用于：

*   我的一个文件完成任务列表（请参阅[yagtd](https://gna.org/projects/yagtd/)，我使用的工具）
*   我的密码数据库（我应该将该建议发送到 StackOverflow 播客以回复 Joel 的问题）
*   我所有关于项目的随机笔记和文件
*   一堆电子表格（包括一个每天跟踪一些个人事情的电子表格）
*   一些图片（比如我使用的网络头像）

此外，我还在 Subversion 之上编写了一些东西来管理系统和我的用户帐户的配置文件。我在这么多机器上拥有这么多帐户，而且我厌倦了总是重新学习如何配置我的 shell/vim/...所以我现在也将大部分内容存储在版本控制中。这包括电子邮件签名文件、$HOME/bin 中的一堆 shell 脚本、...

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-18T14:28:47.813

出于任何目的，我几乎对所有文档都使用了修订控制。

我正在使用 Mercurial，因此在给定目录中设置新存储库是一个简单的“hg init”问题，我发现这比设置新的 Subversion 存储库要麻烦得多。

我还发现 RCS 在您需要同步文件的任何情况下都很棒——我现在使用它而不是 rsync 来满足我所有的同步需求。进行备份也更容易 - 将存储库克隆到另一个位置/机器/磁盘意味着我可以将更改推送到该位置，使用默认推送存储库更容易。如果您不在远程存储库中进行修改，那么您甚至无需过多担心设置默认值以外的设置。

对我来说最好的事情之一是我可以在任何我可以通过 SSH 访问的系统上进行同步、备份或任何操作。（好吧，如果他们在 Uni 为我安装 mercurial，那么我可以！）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-19T00:46:05.270

在我的公司，开发小组的目标是对几乎所有电子文档使用 Subversion。这取决于能否“锁定”无法合并的文件，例如 Excel 文档。SVN 提供“requires-lock”功能，并且获取锁定、修改、提交工作流程相当简单。

软件工程师在船上，但机械工程师有一些阻力。例如，他们希望使用 Excel 的同步协作编辑功能。他们还没有适应获取锁定、修改、提交工作流。

TortoiseSVN 可以让你区分 Word 文档，我觉得这*非常*有用。它显然也支持合并，尽管我太胆小了，无法尝试该功能......

我想认真考虑 DVCS，例如 git 或 Mercurial。但除非它可以锁定二进制文件格式（即不可合并）文件（从而变得更像此类文件的集中模型），和/或合并我们使用的二进制文件格式，否则它不适合我公司的使用。

我只希望所有软件公司都为其专有的文档格式提供良好的差异和合并工具。这将增加专有文档格式的版本控制系统的价值。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-18T14:30:36.950

是的，我在 git 中有一个 doc 目录。我包含一个待办事项列表、一个日历和一些其他文档。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-08-18T16:08:10.313

我使用 SVN 来检查对 Asterisk VOIP 服务器配置文件的更改。我有一个存储库，其中一个文件夹对应于几台服务器中的每台。该文件夹包含 /etc/asterisk 的全部内容。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-08-18T16:22:20.267

我已经将 Subversion 用于源代码控制、构建环境、安装程序脚本以及所有开发优势。我还为二进制文件的非技术用户建立了一个存储库，在这种情况下是旧的 Excel 和 Word 文档。考虑到我们丢失了任何合并功能，它工作正常。但它让我们所有的用户都能轻松获得大部分由两三个人编辑的大量信息。并通过简单的说明在您进行任何编辑之前如何更新（必要时锁定），然后处理冲突（检查您更新的内容，然后删除您的副本并执行更新），他们能够很好地处理存储库的事情，虽然我不确定他们是否真的喜欢它。:)

# sharepoint - 使用表单身份验证编辑用户配置文件

> ID：14611
> 
> 赞同：6
> 
> 时间：2008-08-18T13:40:33.387
> 
> 标签：sharepoint, moss, wss

我们在 SharePoint 中使用表单身份验证。创建帐户后，管理员可以添加一些信息，例如姓名和地址。但必填字段是用户名和电子邮件地址。

当用户进入他们的个人资料页面时，所有字段都是空白的，他们无法对其进行编辑。我已经阅读了许多讨论如何从另一个数据存储导入配置文件或同步配置文件的文章。这对我们不起作用，因为我们没有存储这些配置文件的另一个数据存储。

我是否只需要重新创建编辑配置文件页面并构建自定义配置文件编辑器？此信息是否通过 SharePoint API 公开？我不认为直接编辑数据库是一个好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-18T14:21:43.460

如果您通过“中央管理工具”登录到“共享服务管理”，则会出现“配置文件服务策略”选项。您可以在此处定义哪些字段是用户可覆盖的。

# .net - 接口/抽象类中的静态方法

> ID：14614
> 
> 赞同：10
> 
> 时间：2008-08-18T13:42:08.530
> 
> 标签：.net, abstract-class, static-methods, interface-design

首先，我了解接口或抽象类（在 .NET/C# 术语中）不能具有抽象静态方法的原因。然后我的问题更集中在最佳设计解决方案上。

我想要的是一组“帮助器”类，它们都有自己的静态方法，这样如果我从第三方供应商那里获得对象 A、B 和 C，我可以拥有带有方法的帮助器类，例如

```
AHelper.RetrieveByID(字符串 id);
AHelper.RetrieveByName(字符串名称);
AHelper.DumpToDatabase();

```

由于我的 AHelper、BHelper 和 CHelper 类基本上都具有相同的方法，因此将这些方法移动到这些类随后派生的接口似乎是有意义的。但是，希望这些方法是静态的，这使我无法拥有一个通用接口或抽象类来派生它们。

我总是可以使这些方法非静态，然后首先实例化对象，例如

```
AHelper a = 新的 AHelper();
a.DumpToDatabase();

```

但是，这段代码对我来说似乎并不直观。你有什么建议？我应该完全放弃使用接口或抽象类（我现在所处的情况）还是可以对其进行重构以完成我正在寻找的设计？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-18T14:30:19.777

如果我是你，我会尽量避免任何静态。恕我直言，我总是在静态的道路上遇到某种同步问题。话虽如此，您正在展示一个使用模板进行通用编程的经典示例。我将采用上面一篇文章中介绍的 Rob Copper 的基于模板的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-18T14:25:33.733

看了[你的回复](https://stackoverflow.com/questions/14614/static-methods-in-an-interfaceabstract-class#14655)，我的想法是这样的：

*   您可以只使用一个静态方法，该方法采用类型参数并根据类型执行预期的逻辑。
*   您可以在抽象基础中创建一个虚拟方法，在具体类中指定 SQL。因此，它包含了两者所需的所有公共代码（例如执行命令和返回对象），同时将“专家”位（例如 SQL）封装在子类中。

我更喜欢第二种选择，尽管它当然取决于你。如果您需要我进一步详细说明，请告诉我，我将很乐意编辑/更新 :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-18T14:30:03.053

对于您的示例的通用解决方案，您可以执行以下操作：

```
public static T RetrieveByID<T>(string ID)
{
     var fieldNames = getFieldNamesBasedOnType(typeof(T));
     QueryResult qr = webservice.query("SELECT "+fieldNames + " FROM "
                                     + tyepof(T).Name
                                     +" WHERE Id = '" + ID + "'");
     return (T) qr.records[0];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-18T13:53:27.010

我个人可能会质疑为什么每种类型都需要有一个静态方法，然后再进一步思考......

为什么不使用他们需要共享的静态方法创建一个实用程序类？（例如`ClassHelper.RetrieveByID(string id)`或`ClassHelper<ClassA>.RetrieveByID(string id)`

根据我对这些“障碍”的经验，问题不是语言的限制，而是我设计的限制。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-18T13:57:02.260

ObjectA 和 AHelper 有什么关系？是`AHelper.RetrieveByID()`一样的逻辑`BHelper.RetrieveByID()`

如果是，那么基于实用程序类的方法如何（仅具有公共静态方法且没有状态的类）

```
static [return type] Helper.RetrieveByID(ObjectX x) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-18T14:18:22.797

您不能仅通过改变返回类型来重载方法。

您可以使用不同的名称：

```
static AObject GetAObject(string id);
static BObject GetBObject(string id); 
```

或者您可以使用强制转换运算符创建一个类：

```
class AOrBObject
{ 
   string id;
   AOrBObject(string id) {this.id = id;}

   static public AOrBObject RetrieveByID(string id)
   {
        return new AOrBObject(id);
   }

   public static AObject explicit operator(AOrBObject ab) 
    { 
        return AObjectQuery(ab.id);
    }

   public static BObject explicit operator(AOrBObject ab)
    { 
        return BObjectQuery(ab.id);
    } 
} 
```

然后你可以这样称呼它：

```
 var a = (AObject) AOrBObject.RetrieveByID(5);
 var b = (BObject) AOrBObject.RetrieveByID(5); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-18T13:46:54.247

在 C# 3.0 中，静态方法可以通过使用扩展方法在接口上使用，就好像它们是接口的一部分一样，如下面的 DumpToDatabase()：

```
static class HelperMethods
 {  //IHelper h = new HeleperA();
    //h.DumpToDatabase() 
    public static void DumpToDatabase(this IHelper helper) { /* ... */ }

    //IHelper h = a.RetrieveByID(5)
    public static IHelper RetrieveByID(this ObjectA a, int id) 
     { 
          return new HelperA(a.GetByID(id));
     }

    //Ihelper h = b.RetrieveByID(5)       
    public static IHelper RetrieveByID(this ObjectB b, int id)
     { 
          return new HelperB(b.GetById(id.ToString())); 
     }
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-18T14:05:17.750

如何在 Stack Overflow 上发布反馈？编辑我的原始帖子或发布“答案”？无论如何，我认为举例说明 AHelper.RetrieveByID() 和 BHelper.RetrieveByID() 中发生的事情可能会有所帮助

基本上，这两种方法都针对第三方 Web 服务，该服务使用 Query 方法返回各种通用（可转换）对象，该方法将伪 SQL 字符串作为其唯一参数。

所以， AHelper.RetrieveByID(string ID) 可能看起来像

```
公共静态 AObject RetrieveByID（字符串 ID）
{
  QueryResult qr = webservice.query("SELECT Id,Name FROM AObject WHERE Id = '" + ID + "'");

  返回（AObject）qr.records[0]；
}

公共静态 BObject RetrieveByID（字符串 ID）
{
  QueryResult qr = webservice.query("SELECT Id,Name,Company FROM BObject WHERE Id = '" + ID + "'");

  返回 (BObject)qr.records[0];
}

```

希望这会有所帮助。如您所见，这两种方法是相似的，但是根据返回的不同对象类型，查询可能会有很大的不同。

哦，Rob，我完全同意——这很可能是我的设计限制，而不是语言。:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-18T14:07:03.240

您在寻找多态行为吗？然后你会想要接口和普通的构造函数。调用构造函数有什么不直观的？如果您不需要多态性（听起来您现在不使用它），那么您可以坚持使用静态方法。如果这些都是供应商组件的包装器，那么您可能会尝试使用工厂方法来创建它们，例如 VendorBuilder.GetVendorThing("A")，它可以返回 IVendorWrapper 类型的对象。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-18T14:42:11.407

[marxidad](https://stackoverflow.com/users/1659/marxidad)需要注意一点，Justin 已经说过 SQL 因类型而异，所以我的工作是基于它可能*完全*不同，取决于类型，因此将其委托给有问题的子类. 而您的解决方案将 SQL与类型**非常**紧密地结合在一起（即它*是*SQL）。

[rptony](https://stackoverflow.com/users/1781/rptony)关于静态可能的同步问题的好点，我没有提到，所以谢谢你:) 另外，它的 Rob **Cooper**（不是铜）顺便说一句;）：D（*编辑：*只是想我会提到，以防万一*' t*一个错字，我希望它是，所以没问题！）

# java - 如何通过 SFTP 从服务器检索文件？

> ID：14617
> 
> 赞同：238
> 
> 时间：2008-08-18T13:43:48.730
> 
> 标签：java, ftp, sftp, security

我正在尝试使用 Java 使用 SFTP（而不是 FTPS）从服务器检索文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2008-08-19T09:44:41.723

另一种选择是考虑查看[JSch 库](http://www.jcraft.com/jsch/ "JSch 库")。JSch 似乎是一些大型开源项目的首选库，包括 Eclipse、Ant 和 Apache Commons HttpClient 等。

它很好地支持用户/密码和基于证书的登录，以及所有其他美味的 SSH2 功能。

这是一个通过 SFTP 检索的简单远程文件。错误处理留给读者练习:-)

```
JSch jsch = new JSch();

String knownHostsFilename = "/home/username/.ssh/known_hosts";
jsch.setKnownHosts( knownHostsFilename );

Session session = jsch.getSession( "remote-username", "remote-host" );    
{
  // "interactive" version
  // can selectively update specified known_hosts file 
  // need to implement UserInfo interface
  // MyUserInfo is a swing implementation provided in 
  //  examples/Sftp.java in the JSch dist
  UserInfo ui = new MyUserInfo();
  session.setUserInfo(ui);

  // OR non-interactive version. Relies in host key being in known-hosts file
  session.setPassword( "remote-password" );
}

session.connect();

Channel channel = session.openChannel( "sftp" );
channel.connect();

ChannelSftp sftpChannel = (ChannelSftp) channel;

sftpChannel.get("remote-file", "local-file" );
// OR
InputStream in = sftpChannel.get( "remote-file" );
  // process inputstream as needed

sftpChannel.exit();
session.disconnect(); 
```

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2010-04-22T12:51:42.290

[这是使用JSch](http://www.jcraft.com/jsch/)的示例的完整源代码，无需担心 ssh 密钥检查。

```
import com.jcraft.jsch.*;

public class TestJSch {
    public static void main(String args[]) {
        JSch jsch = new JSch();
        Session session = null;
        try {
            session = jsch.getSession("username", "127.0.0.1", 22);
            session.setConfig("StrictHostKeyChecking", "no");
            session.setPassword("password");
            session.connect();

            Channel channel = session.openChannel("sftp");
            channel.connect();
            ChannelSftp sftpChannel = (ChannelSftp) channel;
            sftpChannel.get("remotefile.txt", "localfile.txt");
            sftpChannel.exit();
            session.disconnect();
        } catch (JSchException e) {
            e.printStackTrace();  
        } catch (SftpException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2010-03-30T20:46:43.820

下面是一个使用 Apache Common VFS 的示例：

```
FileSystemOptions fsOptions = new FileSystemOptions();
SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(fsOptions, "no");
FileSystemManager fsManager = VFS.getManager();
String uri = "sftp://user:password@host:port/absolute-path";
FileObject fo = fsManager.resolveFile(uri, fsOptions); 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2008-08-19T20:12:51.783

Jsch 之上的一个很好的抽象是 Apache [commons-vfs](http://commons.apache.org/vfs/)，它提供了一个虚拟文件系统 API，使得访问和写入 SFTP 文件几乎是透明的。为我们工作得很好。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2008-08-18T13:49:13.617

这是我提出的解决方案 [http://sourceforge.net/projects/sshtools/](http://sourceforge.net/projects/sshtools/)（为清楚起见省略了大多数错误处理）。[这是我博客](http://www.spindriftpages.net/blog/dave/2007/11/27/sshtools-j2ssh-java-sshsftp-library)的摘录

```
SshClient ssh = new SshClient();
ssh.connect(host, port);
//Authenticate
PasswordAuthenticationClient passwordAuthenticationClient = new PasswordAuthenticationClient();
passwordAuthenticationClient.setUsername(userName);
passwordAuthenticationClient.setPassword(password);
int result = ssh.authenticate(passwordAuthenticationClient);
if(result != AuthenticationProtocolState.COMPLETE){
     throw new SFTPException("Login to " + host + ":" + port + " " + userName + "/" + password + " failed");
}
//Open the SFTP channel
SftpClient client = ssh.openSftpClient();
//Send the file
client.put(filePath);
//disconnect
client.quit();
ssh.disconnect(); 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2016-04-05T09:52:24.350

对 SFTP 的 3 个成熟 Java 库进行了很好的比较：[Commons VFS、SSHJ 和 JSch](https://www.javacodegeeks.com/2015/08/commons-vfs-sshj-and-jsch-in-comparison.html)

综上所述，SSHJ 拥有最清晰的 API，如果您不需要 Commons VFS 提供的其他存储支持，它是其中最好的。

[这是来自github](https://github.com/hierynomus/sshj/blob/master/examples/src/main/java/net/schmizz/sshj/examples/SFTPDownload.java)的编辑 SSHJ 示例：

```
final SSHClient ssh = new SSHClient();
ssh.loadKnownHosts(); // or, to skip host verification: ssh.addHostKeyVerifier(new PromiscuousVerifier())
ssh.connect("localhost");
try {
    ssh.authPassword("user", "password"); // or ssh.authPublickey(System.getProperty("user.name"))
    final SFTPClient sftp = ssh.newSFTPClient();
    try {
        sftp.get("test_file", "/tmp/test.tmp");
    } finally {
        sftp.close();
    }
} finally {
    ssh.disconnect();
} 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2013-09-24T07:51:25.923

> Apache Commons SFTP 库

**所有示例的通用 java 属性文件**

服务器地址=111.222.333.444

用户 ID=我的用户 ID

密码=我的密码

远程目录=产品/

本地目录=进口/

> 使用 SFTP 将文件上传到远程服务器

```
import java.io.File;
import java.io.FileInputStream;
import java.util.Properties;

import org.apache.commons.vfs2.FileObject;
import org.apache.commons.vfs2.FileSystemOptions;
import org.apache.commons.vfs2.Selectors;
import org.apache.commons.vfs2.impl.StandardFileSystemManager;
import org.apache.commons.vfs2.provider.sftp.SftpFileSystemConfigBuilder;

public class SendMyFiles {

 static Properties props;

 public static void main(String[] args) {

  SendMyFiles sendMyFiles = new SendMyFiles();
  if (args.length < 1)
  {
   System.err.println("Usage: java " + sendMyFiles.getClass().getName()+
     " Properties_file File_To_FTP ");
   System.exit(1);
  }

  String propertiesFile = args[0].trim();
  String fileToFTP = args[1].trim();
  sendMyFiles.startFTP(propertiesFile, fileToFTP);

 }

 public boolean startFTP(String propertiesFilename, String fileToFTP){

  props = new Properties();
  StandardFileSystemManager manager = new StandardFileSystemManager();

  try {

   props.load(new FileInputStream("properties/" + propertiesFilename));
   String serverAddress = props.getProperty("serverAddress").trim();
   String userId = props.getProperty("userId").trim();
   String password = props.getProperty("password").trim();
   String remoteDirectory = props.getProperty("remoteDirectory").trim();
   String localDirectory = props.getProperty("localDirectory").trim();

   //check if the file exists
   String filepath = localDirectory +  fileToFTP;
   File file = new File(filepath);
   if (!file.exists())
    throw new RuntimeException("Error. Local file not found");

   //Initializes the file manager
   manager.init();

   //Setup our SFTP configuration
   FileSystemOptions opts = new FileSystemOptions();
   SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(
     opts, "no");
   SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, true);
   SftpFileSystemConfigBuilder.getInstance().setTimeout(opts, 10000);

   //Create the SFTP URI using the host name, userid, password,  remote path and file name
   String sftpUri = "sftp://" + userId + ":" + password +  "@" + serverAddress + "/" + 
     remoteDirectory + fileToFTP;

   // Create local file object
   FileObject localFile = manager.resolveFile(file.getAbsolutePath());

   // Create remote file object
   FileObject remoteFile = manager.resolveFile(sftpUri, opts);

   // Copy local file to sftp server
   remoteFile.copyFrom(localFile, Selectors.SELECT_SELF);
   System.out.println("File upload successful");

  }
  catch (Exception ex) {
   ex.printStackTrace();
   return false;
  }
  finally {
   manager.close();
  }

  return true;
 }

} 
```

> 使用 SFTP 从远程服务器下载文件

```
import java.io.File;
import java.io.FileInputStream;
import java.util.Properties;

import org.apache.commons.vfs2.FileObject;
import org.apache.commons.vfs2.FileSystemOptions;
import org.apache.commons.vfs2.Selectors;
import org.apache.commons.vfs2.impl.StandardFileSystemManager;
import org.apache.commons.vfs2.provider.sftp.SftpFileSystemConfigBuilder;

public class GetMyFiles {

 static Properties props;

 public static void main(String[] args) {

  GetMyFiles getMyFiles = new GetMyFiles();
  if (args.length < 1)
  {
   System.err.println("Usage: java " + getMyFiles.getClass().getName()+
   " Properties_filename File_To_Download ");
   System.exit(1);
  }

  String propertiesFilename = args[0].trim();
  String fileToDownload = args[1].trim();
  getMyFiles.startFTP(propertiesFilename, fileToDownload);

 }

 public boolean startFTP(String propertiesFilename, String fileToDownload){

  props = new Properties();
  StandardFileSystemManager manager = new StandardFileSystemManager();

  try {

   props.load(new FileInputStream("properties/" + propertiesFilename));
   String serverAddress = props.getProperty("serverAddress").trim();
   String userId = props.getProperty("userId").trim();
   String password = props.getProperty("password").trim();
   String remoteDirectory = props.getProperty("remoteDirectory").trim();
   String localDirectory = props.getProperty("localDirectory").trim();

   //Initializes the file manager
   manager.init();

   //Setup our SFTP configuration
   FileSystemOptions opts = new FileSystemOptions();
   SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(
     opts, "no");
   SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, true);
   SftpFileSystemConfigBuilder.getInstance().setTimeout(opts, 10000);

   //Create the SFTP URI using the host name, userid, password,  remote path and file name
   String sftpUri = "sftp://" + userId + ":" + password +  "@" + serverAddress + "/" + 
     remoteDirectory + fileToDownload;

   // Create local file object
   String filepath = localDirectory +  fileToDownload;
   File file = new File(filepath);
   FileObject localFile = manager.resolveFile(file.getAbsolutePath());

   // Create remote file object
   FileObject remoteFile = manager.resolveFile(sftpUri, opts);

   // Copy local file to sftp server
   localFile.copyFrom(remoteFile, Selectors.SELECT_SELF);
   System.out.println("File download successful");

  }
  catch (Exception ex) {
   ex.printStackTrace();
   return false;
  }
  finally {
   manager.close();
  }

  return true;
 }

} 
```

> 使用 SFTP 删除远程服务器上的文件

```
import java.io.FileInputStream;
import java.util.Properties;

import org.apache.commons.vfs2.FileObject;
import org.apache.commons.vfs2.FileSystemOptions;
import org.apache.commons.vfs2.impl.StandardFileSystemManager;
import org.apache.commons.vfs2.provider.sftp.SftpFileSystemConfigBuilder;

public class DeleteRemoteFile {

 static Properties props;

 public static void main(String[] args) {

  DeleteRemoteFile getMyFiles = new DeleteRemoteFile();
  if (args.length < 1)
  {
   System.err.println("Usage: java " + getMyFiles.getClass().getName()+
   " Properties_filename File_To_Delete ");
   System.exit(1);
  }

  String propertiesFilename = args[0].trim();
  String fileToDownload = args[1].trim();
  getMyFiles.startFTP(propertiesFilename, fileToDownload);

 }

 public boolean startFTP(String propertiesFilename, String fileToDownload){

  props = new Properties();
  StandardFileSystemManager manager = new StandardFileSystemManager();

  try {

   props.load(new FileInputStream("properties/" + propertiesFilename));
   String serverAddress = props.getProperty("serverAddress").trim();
   String userId = props.getProperty("userId").trim();
   String password = props.getProperty("password").trim();
   String remoteDirectory = props.getProperty("remoteDirectory").trim();

   //Initializes the file manager
   manager.init();

   //Setup our SFTP configuration
   FileSystemOptions opts = new FileSystemOptions();
   SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(
     opts, "no");
   SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, true);
   SftpFileSystemConfigBuilder.getInstance().setTimeout(opts, 10000);

   //Create the SFTP URI using the host name, userid, password,  remote path and file name
   String sftpUri = "sftp://" + userId + ":" + password +  "@" + serverAddress + "/" + 
     remoteDirectory + fileToDownload;

   //Create remote file object
   FileObject remoteFile = manager.resolveFile(sftpUri, opts);

   //Check if the file exists
   if(remoteFile.exists()){
    remoteFile.delete();
    System.out.println("File delete successful");
   }

  }
  catch (Exception ex) {
   ex.printStackTrace();
   return false;
  }
  finally {
   manager.close();
  }

  return true;
 }

} 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2010-03-08T21:12:35.633

[hierynomus/sshj](https://github.com/hierynomus/sshj)有一个完整的 SFTP 第 3 版实现（OpenSSH 实现的）

[SFTPUpload.java 中](https://github.com/hierynomus/sshj/blob/master/examples/src/main/java/net/schmizz/sshj/examples/SFTPUpload.java)的示例代码

```
package net.schmizz.sshj.examples;

import net.schmizz.sshj.SSHClient;
import net.schmizz.sshj.sftp.SFTPClient;
import net.schmizz.sshj.xfer.FileSystemFile;

import java.io.File;
import java.io.IOException;

/** This example demonstrates uploading of a file over SFTP to the SSH server. */
public class SFTPUpload {

    public static void main(String[] args)
            throws IOException {
        final SSHClient ssh = new SSHClient();
        ssh.loadKnownHosts();
        ssh.connect("localhost");
        try {
            ssh.authPublickey(System.getProperty("user.name"));
            final String src = System.getProperty("user.home") + File.separator + "test_file";
            final SFTPClient sftp = ssh.newSFTPClient();
            try {
                sftp.put(new FileSystemFile(src), "/tmp");
            } finally {
                sftp.close();
            }
        } finally {
            ssh.disconnect();
        }
    }

} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-10-04T07:59:19.850

JSch 库是功能强大的库，可用于从 SFTP 服务器读取文件。下面是从 SFTP 位置逐行读取文件的测试代码

```
JSch jsch = new JSch();
        Session session = null;
        try {
            session = jsch.getSession("user", "127.0.0.1", 22);
            session.setConfig("StrictHostKeyChecking", "no");
            session.setPassword("password");
            session.connect();

            Channel channel = session.openChannel("sftp");
            channel.connect();
            ChannelSftp sftpChannel = (ChannelSftp) channel;

            InputStream stream = sftpChannel.get("/usr/home/testfile.txt");
            try {
                BufferedReader br = new BufferedReader(new InputStreamReader(stream));
                String line;
                while ((line = br.readLine()) != null) {
                    System.out.println(line);
                }

            } catch (IOException io) {
                System.out.println("Exception occurred during reading file from SFTP server due to " + io.getMessage());
                io.getMessage();

            } catch (Exception e) {
                System.out.println("Exception occurred during reading file from SFTP server due to " + e.getMessage());
                e.getMessage();

            }

            sftpChannel.exit();
            session.disconnect();
        } catch (JSchException e) {
            e.printStackTrace();
        } catch (SftpException e) {
            e.printStackTrace();
        } 
```

请参阅[博客](https://ankurjain26.blogspot.in/2017/09/reading-file-from-remote-server-using.html)了解整个程序。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2011-03-08T07:54:05.963

Andy，要删除远程系统上的文件，您需要使用`(channelExec)`JSch 并通过 unix/linux 命令来删除它。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-27T10:32:54.363

尝试[edtFTPj/PRO](http://www.enterprisedt.com/products/edtftpjssl/overview.html)，这是一个成熟、强大的 SFTP 客户端库，支持连接池和异步操作。还支持 FTP 和 FTPS，因此涵盖了安全文件传输的所有基础。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-01-18T20:34:13.313

我使用 JSCH API [http://kodehelp.com/java-program-for-uploading-file-to-sftp-server/在 java 中找到了 SFTP 的完整工作示例](http://kodehelp.com/java-program-for-uploading-file-to-sftp-server/)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-08-01T22:28:42.660

虽然上面的答案非常有帮助，但我花了一天时间让它们工作，面临各种异常，如“损坏的通道”、“rsa 密钥未知”和“数据包损坏”。

下面是一个使用 JSch 库的 SFTP 文件上传/下载的可重用类。

上传使用：

```
SFTPFileCopy upload = new SFTPFileCopy(true, /path/to/sourcefile.png", /path/to/destinationfile.png"); 
```

下载使用：

```
SFTPFileCopy download = new SFTPFileCopy(false, "/path/to/sourcefile.png", "/path/to/destinationfile.png"); 
```

班级代码：

```
import com.jcraft.jsch.Channel;
import com.jcraft.jsch.ChannelSftp;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.Session;
import com.jcraft.jsch.UIKeyboardInteractive;
import com.jcraft.jsch.UserInfo;
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import javax.swing.JOptionPane;
import menue.Menue;

public class SFTPFileCopy1 {

    public SFTPFileCopy1(boolean upload, String sourcePath, String destPath) throws FileNotFoundException, IOException {
        Session session = null;
        Channel channel = null;
        ChannelSftp sftpChannel = null;
        try {
            JSch jsch = new JSch();
            //jsch.setKnownHosts("/home/user/.putty/sshhostkeys");
            session = jsch.getSession("login", "mysite.com", 22);
            session.setPassword("password");

            UserInfo ui = new MyUserInfo() {
                public void showMessage(String message) {

                    JOptionPane.showMessageDialog(null, message);

                }

                public boolean promptYesNo(String message) {

                    Object[] options = {"yes", "no"};

                    int foo = JOptionPane.showOptionDialog(null,
                            message,
                            "Warning",
                            JOptionPane.DEFAULT_OPTION,
                            JOptionPane.WARNING_MESSAGE,
                            null, options, options[0]);

                    return foo == 0;

                }
            };
            session.setUserInfo(ui);

            session.setConfig("StrictHostKeyChecking", "no");
            session.connect();
            channel = session.openChannel("sftp");
            channel.setInputStream(System.in);
            channel.setOutputStream(System.out);
            channel.connect();
            sftpChannel = (ChannelSftp) channel;

            if (upload) { // File upload.
                byte[] bufr = new byte[(int) new File(sourcePath).length()];
                FileInputStream fis = new FileInputStream(new File(sourcePath));
                fis.read(bufr);
                ByteArrayInputStream fileStream = new ByteArrayInputStream(bufr);
                sftpChannel.put(fileStream, destPath);
                fileStream.close();
            } else { // File download.
                byte[] buffer = new byte[1024];
                BufferedInputStream bis = new BufferedInputStream(sftpChannel.get(sourcePath));
                OutputStream os = new FileOutputStream(new File(destPath));
                BufferedOutputStream bos = new BufferedOutputStream(os);
                int readCount;
                while ((readCount = bis.read(buffer)) > 0) {
                    bos.write(buffer, 0, readCount);
                }
                bis.close();
                bos.close();
            }
        } catch (Exception e) {
            System.out.println(e);
        } finally {
            if (sftpChannel != null) {
                sftpChannel.exit();
            }
            if (channel != null) {
                channel.disconnect();
            }
            if (session != null) {
                session.disconnect();
            }
        }
    }

    public static abstract class MyUserInfo
            implements UserInfo, UIKeyboardInteractive {

        public String getPassword() {
            return null;
        }

        public boolean promptYesNo(String str) {
            return false;
        }

        public String getPassphrase() {
            return null;
        }

        public boolean promptPassphrase(String message) {
            return false;
        }

        public boolean promptPassword(String message) {
            return false;
        }

        public void showMessage(String message) {
        }

        public String[] promptKeyboardInteractive(String destination,
                String name,
                String instruction,
                String[] prompt,
                boolean[] echo) {

            return null;
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-02-14T11:38:05.307

您还拥有带有 SFTP 附加组件的 JFileUpload（Java 也是）： [http ://www.jfileupload.com/products/sftp/index.html](http://www.jfileupload.com/products/sftp/index.html)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-06-18T08:10:55.280

我使用这个名为 Zehon 的 SFTP API，它非常棒，使用大量示例代码非常容易使用。这是网站[http://www.zehon.com](http://www.zehon.com)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-01-11T15:02:20.873

我找到的最好的解决方案是[Paramiko](http://www.lag.net/paramiko/)。有一个Java版本。

# winforms - WinForms 上的多项选择

> ID：14618
> 
> 赞同：5
> 
> 时间：2008-08-18T13:44:23.300
> 
> 标签：winforms, combobox

在 Windows 窗体中实现多项选择选项的最佳方式是什么？我想强制从列表中选择一个，从默认值开始。

看起来 ComboBox 是一个不错的选择，但是有没有办法指定非空白默认值？
我可以在代码中的某个适当的初始化点设置它，但我觉得我错过了一些东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-18T13:56:40.797

如果您只想从小组中获得一个答案，那么 RadioButton 控件将是您的最佳选择，或者如果您有很多选项，您可以使用 ComboBox。要设置默认值，只需将项目添加到 ComboBox 的集合中并将 SelectedIndex 或 SelectedItem 设置为该项目。

根据您正在查看的选项数量，您可以使用将 SelectionMode 属性设置为 MultiSimple 的 ListBox，如果它是多项选择，或者您可以使用 CheckBox 控件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-18T13:47:12.763

您应该能够将 ComboBox.SelectedIndex 属性设置为您想要的默认值。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindex.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindex.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-18T13:48:25.070

插入项目后，使用[ComboBox.SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selecteditem.aspx)或[SelectedIndex属性选择默认项目。](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selecteditem.aspx)

您还可以考虑使用[RadioButton](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selecteditem.aspx)控件来强制选择单个选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-18T13:59:19.573

您可以使用将[DropDownStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.dropdownstyle.aspx)属性设置为 DropDownList 并将 SelectedIndex 设置为 0（或任何默认项）的 ComboBox。这将强制始终选择列表中的项目。如果您忘记这样做，用户可以在编辑框部分输入其他内容 - 这会很糟糕:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-18T14:37:09.293

如果您要为用户提供一小部分选择，请坚持使用单选按钮。但是，如果您想将组合框用于动态列表或长列表。将样式设置为 DropDownList。

```
private sub populateList( items as List(of UserChoices))
   dim choices as UserChoices
   dim defaultChoice as UserChoices 

   for each choice in items
      cboList.items.add(choice)
      '-- you could do user specific check or base it on some other 
      '---- setting to find the default choice here
      if choice.state = _user.State or choice.state = _settings.defaultState then 
          defaultChoice = choice
      end if 
   next 
   '-- you chould select the first one
   if cboList.items.count > 0 then
      cboList.SelectedItem = cboList.item(0)
   end if 

   '-- continuation of hte default choice
   cboList.SelectedItem = defaultChoice

end sub 
```

# svn - 是否可以从任何 VCS 自动结帐？

> ID：14634
> 
> 赞同：2
> 
> 时间：2008-08-18T13:53:54.093
> 
> 标签：svn, version-control, cvs, versions

让我们以一个 Web 开发环境为例，开发人员在其中将项目签出到他们的本地机器上，对其进行处理，并签入对开发的更改。
这些更改在开发过程中得到进一步测试，并定期（例如每周、每月等）上线。
是否可以自动升级最新的标记版本（而不是最新的签入，因为这可能不是 100% 稳定），例如星期一早上 8 点，使用脚本或内置功能风险控制系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-18T14:19:35.587

是的，有可能。这通常是[持续集成工具](http://en.wikipedia.org/wiki/Continuous_integration)提供的功能。通常，他们将从版本控制中获取最新的源代码，构建项目，对其进行测试（运行单元测试）并可能将其部署在（测试）服务器上。

如果您不需要所有这些步骤，您可以使用一些 shell 脚本或类似的脚本轻松地做同样的事情（即从版本控制中签出并复制到服务器上的生产文件夹）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-18T14:00:29.603

当然可以，但具体的产品可能取决于您使用的 VCS。

您可能想要做的是拥有几个不同的分支，并随着您的进展向上迁移。例如，开发 -> 稳定开发 -> Beta -> 生产。然后，您可以简单地为您的测试人员自动更新到最新版本的 Stable-Dev 和 Beta，并且始终能够随时部署新的生产版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-18T14:09:38.070

你可以用 cvs 做的任何事情都可以用命令行来完成，我很确定 svn 也是一样的。只需制定您想要的功能并将其粘贴到 shell 脚本或命令文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-18T14:23:59.757

我仅有的两个经验是 SVN 和 Mercurial。对于 Mercurial，您指定要从哪个分支更新（假设是默认分支），然后每当您将分支合并到默认分支时，您就可以让服务器运行：

```
hg update 
```

它将您的存储库更新为您设置的分支的最新版本。

SVN是同一个概念，你只检查你最初想要哪个分支

```
svn co http://host/repository/branchname/ 
```

然后你让你的服务器用一个 cron 作业更新它，ala

```
svn up 
```

但理论上，任何支持分支的 VCS（所有好的 VCS 都可以：git、mercurial、SVN 等），应该能够做类似的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T14:26:43.527

我怀疑许多 VCS 直接提供此功能，但是编写脚本应该非常简单。基于日期或分支的结帐。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-18T14:50:34.900

作为后续，

我认为一个应用程序应该做一项工作并且做得很好。通常，如果您开始将工具组合到一个产品中，它们中的任何一个都不会大放异彩，而且它们中的大多数都会是“'好吧，有点”。

如果我在做这样的事情，我会得到像 SVN、ANT 和 Subversion Ant 库（[http://ant.apache.org/antlibs/svn/index.html](http://ant.apache.org/antlibs/svn/index.html)）这样的东西——不过你的数量可能会有所不同。

# fogbugz - 如何在 FogBugz 中添加“项目描述”？

> ID：14646
> 
> 赞同：6
> 
> 时间：2008-08-18T14:00:11.303
> 
> 标签：fogbugz

当我创建一个新项目时（甚至当我编辑示例项目时），无法将描述添加到项目中。

还是我对显而易见的事情视而不见？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-08-24T03:22:54.313

真的没有项目描述之类的东西。Projects 页面中有一个列被使用，因此您可以看到哪个项目是默认的内置收件箱，我们想不出任何更好的东西来作为该列的列标题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-18T14:21:56.640

你没疯。它在内部使用，甚至不存储在数据库中。当我第一次开始使用 FogBugz 时，我想知道同样的事情，但我找到了一个论坛条目来回答我的问题。直到今天，我仍然认为他们没有实施它。如果您想让它可编辑，请跳转到 FogCreek 并提交请求。

*   [项目中缺少“描述”？](http://support.fogcreek.com/default.asp?fogbugz.4.7698.2)
*   [如何编辑项目描述](http://support.fogcreek.com/default.asp?fogbugz.4.21635.2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T14:15:30.710

该描述主要针对系统项目，例如电子邮件收件箱。

您也许可以在基础数据库表中设置一个。

# security - 代理服务器可以缓存 SSL GET 吗？如果没有，响应正文加密就足够了吗？

> ID：14656
> 
> 赞同：32
> 
> 时间：2008-08-18T14:06:13.973
> 
> 标签：security, encryption, caching, ssl, proxy

(||any) 代理服务器可以缓存客户端通过 https 请求的内容吗？由于代理服务器看不到查询字符串或 http 标头，我认为他们看不到。

我正在考虑一个桌面应用程序，由他们公司代理背后的许多人运行。这个应用程序可以访问互联网上的服务，我想利用内置的互联网缓存基础设施进行“读取”。如果缓存代理服务器无法缓存 SSL 传递的内容，那么简单地加密响应的内容是一个可行的选择吗？

我正在考虑通过 http 请求我们希望可缓存的所有 GET 请求，并使用非对称加密对正文进行加密，其中每个客户端都有解密密钥。每当我们希望执行不可缓存的 GET 或 POST 操作时，都将通过 SSL 执行。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-08-23T00:19:47.663

Rory 评论说，如果不是严格正确，代理将不得不使用自签名证书。

可以实现代理为每个被要求处理的新 SSL 主机生成一个新证书，并使用公共根证书对其进行签名。在 OP 的企业环境场景中，通用签名证书可以很容易地作为受信任的 CA 安装在客户端计算机上，并且他们很乐意为被代理的流量接受这些“伪造”的 SSL 证书，因为不会出现主机名不匹配的情况。

事实上，这正是[Charles Web Debugging Proxy](http://www.charlesproxy.com/)等软件允许检查 SSL 流量而不会导致浏览器出现安全错误等的方式。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-08-18T14:24:39.477

不，不能直接缓存 https。客户端和服务器之间的整个通信都是加密的。代理位于服务器和客户端之间，为了缓存它，您需要能够读取它，即解密加密。

你可以做一些事情来缓存它。您基本上在您的代理上执行 SSL，拦截发送到客户端的 SSL。基本上，数据在客户端和您的代理之间被加密，被解密、读取和缓存，数据被加密并在服务器上发送。来自服务器的回复同样被解密、读取和加密。我不确定您如何在主要代理软件（如 squid）上执行此操作，但这是可能的。

这种方法的唯一问题是代理必须使用自签名证书将其加密给客户端。客户端将能够判断中间的代理已读取数据，因为证书不会来自原始站点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-23T01:01:24.677

我认为您应该只使用 SSL 并依赖执行缓存的 HTTP 客户端库（例如：Windows 上的 WinInet）。很难想象企业级缓存的好处值得在代理上编写自定义安全加密方案或证书乐趣的痛苦。更糟糕的是，在您提到的加密方案中，在实体主体上执行非对称密码听起来像是对应用程序服务器端的巨大打击；SSL 使用对称密码作为连接的实际有效负载是有原因的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-18T21:26:12.057

在加密 https 响应的组件后面的应用服务器上设置服务器缓存怎么样？如果您有反向代理设置，这将很有用。

我在想这样的事情：

```
application server <---> Squid or Varnish (cache) <---> Apache (performs SSL encryption) 
```

# build-process - 本地与构建环境的不同解决方案/项目文件

> ID：14674
> 
> 赞同：1
> 
> 时间：2008-08-18T14:20:09.563
> 
> 标签：build-process

作为我们构建过程改进的一部分，我们目前正在讨论是否应该在我们的 CI 生产环境和本地开发环境中拥有单独的项目/解决方案文件。

出现这种情况的原因是我们在之前的项目中遇到的参考问题。人们经常会错误地将对程序集的引用添加到错误的位置，这意味着它可以在他们的本地环境中正常工作，但可能会在其他人或构建机器上中断。

此外，引用路径位于 csproj.user 文件中，这意味着这些文件必须提交到源代码管理，因此每个人都必须共享这些相同的设置。

所以我们正在考虑在我们的 CI 服务器上拥有单独的项目和解决方案，这样当我们进行构建时，它会使用这些项目而不是本地开发项目。

它有明显的缺点，例如维护这些单独的文件和需要定义和遵循的相关流程的开销，但它的好处是我们可以更好地控制*生产*环境中发生的事情。

我无法找到有关此主题的任何内容-无法相信我们是唯一考虑此问题的人-因此欢迎所有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-21T08:53:31.047

在我们最大的项目（由许多应用程序组成的系统）中，我们具有以下结构

> /3rdPartyAssemblies
> /App1
> /App2
> /App3
> /.....

所有外部程序集都添加到 3rdPartyAssemblies/Vendor/Version/...

我们有一个 CoreBuild.sln 文件，它充当所有共享程序集的 MSBuild 脚本，以确保按依赖顺序构建（即，确保 App1.Interfaces 在 App2 之前构建，因为 App2 具有对 App1.Interfaces 的引用）。

所有应用程序间引用都以 /bin 文件夹为目标（我们不使用 bin/debug 和 bin/release，只使用 bin，这样引用保持不变，我们只是根据构建目标更改发布配置）。

Cruise Control 在构建任何其他应用程序之前为任何依赖项构建核心解决方案，并且由于服务器上存在 3rdPartAssemblies 文件夹，我们确保开发人员机器和构建服务器具有相同的开发布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-21T12:10:00.857

我知道这是不合时宜的。但是我发现处理引用问题的唯一最佳方法是将文件夹映射到驱动器号，例如 R: 然后所有项目都构建到该文件夹​​中或将输出复制到该文件夹​​中。然后所有引用都是 R:\SomeFile.dll 等。这可以解决有时引用是通过绝对路径添加的问题，有时它们是相对添加的。（我不记得与“HintPath”有关）

那么好的事情是，您仍然可以在构建服务器上使用相同的解决方案文件。老实说，这是绝对必须的，因为您无法确定在开发机器上构建的内容与在构建服务器上构建的内容相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-21T08:40:06.307

我们已经改变了我们的项目结构（利用 SVN Externals），现在每个项目都是完全独立的。也就是说，任何引用都不会超出项目目录（例如，如果项目 A 引用 ASM X，则 ASM X 存在于 ProjectA 的子文件夹中）

我怀疑这应该有助于解决我们的一些问题，但我仍然可以看到对构建项目进行更多控制的一些优势。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-21T12:04:16.643

@David - 信不信由你，这就是我们现在真正拥有的，但它仍然给我们带来了问题！

不过，我们正在进行一些更改，这是由于迁移到 TeamCity 和多个构建代理而被迫进行的 - 所以我们不能引用当前项目之外的目录，正如我在之前的回答中提到的那样。

查看此链接的外部部分以了解我的意思 - [http://www.dummzeuch.de/delphi/subversion/english.html](http://www.dummzeuch.de/delphi/subversion/english.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T19:09:12.880

我强烈建议不要这样做。

1.  引用路径不仅存储在 .user 文件中。提示路径存储在项目文件本身中。您永远不必将 .user 文件签入源代码管理。

2.  让所有开发人员都使用一组（好吧，可能是版本化的）解决方案/项目文件，其发布配置是您最终在生产中构建的。当某些项目设置被调整，没有被传递并滑入生产时，拥有单独的项目文件会导致混乱。

你也可以看看这个：

[http://www.objectsharp.com/cs/blogs/barry/archive/2004/10/29/988.aspx](http://www.objectsharp.com/cs/blogs/barry/archive/2004/10/29/988.aspx) [http://bytes.com/forum/thread268546.html](http://bytes.com/forum/thread268546.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-18T14:24:48.710

通常，您会以某种形式为您的产品创建构建项目/脚本，因此将另一个解决方案文件放在一起不会出现在图片中。

培训大家使用项目引用会更容易，并在项目文件结构下为外部程序集引用创建一个目录。这样每个人都遵循相同的环境。

# asp.net - 您为 ASP.Net 使用什么 Url 重写器？

> ID：14697
> 
> 赞同：14
> 
> 时间：2008-08-18T14:32:12.237
> 
> 标签：asp.net, iis, url-rewriting, urlrewriter

我查看了几个用于 ASP.Net 和 IIS 的 URL 重写器，想知道其他人都在使用什么，以及为什么。

以下是我用过或看过的：

*   [ThunderMain URLRewriter](http://www.codeproject.com/KB/aspnet/urlrewriter.aspx)：在以前的项目中使用，没有我们想要的灵活性/性能
*   [Ewal UrlMapper](http://web.archive.org/web/20070202012119/blog.ewal.net/2004/04/14/a-url-redirecting-url-rewriting-httpmodule/)：在当前项目中使用，但源似乎已被放弃
*   [UrlRewritingNet.UrlRewrite](http://www.urlrewriting.net/149/en/home.html) : 看起来像一个不错的库，但文档的糟糕语法让我感到不安
*   [UrlRewriter.NET](http://urlrewriter.net/)：这是我目前的最爱，具有很大的灵活性，尽管注入到替换正则表达式中的额外功能会稍微改变标准.Net 正则表达式语法
*   [Managed Fusion URL Rewriter](http://www.managedfusion.com/products/url-rewriter/)：我在[上一个关于堆栈溢出的问题](https://stackoverflow.com/questions/2262/aspnet-url-rewriting#2268)中找到了这个，但还没有尝试过，从示例语法来看，它似乎无法通过 web.config 进行编辑

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-18T14:35:13.120

System.Web.Routing 刚刚随 .NET 3.5 发布。

您可以在自定义 HttpModule 中使用 Request.RewritePath()

我更喜欢使用 IHttpHandlerFactory 实现，并且可以完全控制所有传入的 URL 以及它们映射到的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-18T14:34:00.750

如果我现在开始一个新的 Web 项目，我会考虑从头开始使用 MVC。这使用重写的 URL 作为标准。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-20T09:09:50.953

+1 UrlRewritingNET.URLRewrite - 在一个盒子上的数百个服务/门户/站点中使用多年，没有问题！（@Jason——你说的是那个，对吧？）

而且我还在个人网站上用过URLRewriter.NET，发现它，啊，很有趣。@travis，您对更改的语法是正确的，但是一旦习惯了它，那就很好了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-27T14:23:47.270

IIS 7 有一个相当强大的[URL 重写模块](http://www.iis.net/extensions/URLRewrite)，并且与 IIS 集成得很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-18T15:15:01.480

我之前在一个流量非常大的网站上使用过 UrlRewriting.NET - 它对我们非常有用。我相信开发人员是德国人，所以英文文档可能没有它应该的那么好。我强烈推荐它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-18T19:56:55.013

我对[Ionic 的 ISAPI 重写过滤器](http://cheeso.members.winisp.net/IIRF.aspx)有很好的体验，它与 ISAPI_Rewrite 非常相似，除了免费。两者都是在 mod_rewrite 之后建模的，并且是 ISAPI 过滤器，因此您无法在代码中管理它们，因为您必须在 IIS 中设置它们。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-10-14T15:33:15.900

如果您在 IIS7 Windows 2008 环境中，我不会推荐 UrlRewritingNet。

原因：UrlRewritingNet 要求您的应用程序池模式 = 经典且未集成。这不是最优的而且，他们的项目在过去 2 年里似乎已经死了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-23T16:36:40.590

我刚刚安装了[Helicon 的 ISAPI Rewrite 3](http://www.helicontech.com/isapi_rewrite/)。与 htaccess 完全一样。到目前为止，我正在挖掘它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-07T06:19:12.420

我使用[.NET URL Rewriter 和 Reverse Proxy](http://www.codeplex.com/urlrewriter)取得了巨大成功。它几乎与 mod_rewrite 相当，并且使用几乎所有相同的语法。该项目的所有者非常乐于助人和友好，并且产品效果很好。这个 gem 提供了重写和代理功能，这是许多解决方案不提供的。海事组织，值得一看。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-05-26T12:30:10.950

也为 UrlRewritingNet.UrlRewrite +1，但为什么我总是需要用 .aspx 结束我的 URL？我认为应该改进更好的正则表达式部分。

为什么我在 virtualURL localhost/Products/Beverages.aspx", "localhost/Products/Condiments.aspx" 中总是要以 aspx 结尾。我只想输入 localhost/Products/Beverages", "localhost/Products/Condiments" 哪个看起来像 MVC 路线。

[这个](http://msdn.microsoft.com/en-us/library/ms972974#urlrewriting_topic2)看起来不错，但不适用于我的网站。我还是想不通。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-25T08:34:36.483

asp.net 路由也可以满足 url 重写的需求，甚至更多。使用 asp.net 路由，您不仅可以“重写 url”，还可以为各种请求创建自定义处理程序。然而，asp.net 路由至少需要 asp.net sp1。

要使简单路由正常工作，您所做的基本操作是在 Application_Start 中添加一些路由处理程序，甚至在 Global.asax.cs 文件中也是如此。

```
 protected void Application_Start(object sender, EventArgs e)
        {

                        RegisterRoutes(RouteTable.Routes);

        }
        private static void RegisterRoutes(RouteCollection routes)
        {          

            routes.Add("Routing1", new Route("/Blog/id/2","/Blog.aspx"));

        } 
```

# c - 如何让 Pro*C 应对 #warning 指令？

> ID：14698
> 
> 赞同：3
> 
> 时间：2008-08-18T14:32:41.830
> 
> 标签：c, oracle, oracle-pro-c

当我尝试预编译包含 #warning 指令的 *.pc 文件时，我收到以下错误：

> PCC-S-02014，在预期以下情况之一时遇到符号“警告”：（bla bla bla）。

如果 Pro*C 不知道如何处理它，我能以某种方式说服 Pro*C 忽略它吗？我无法删除该`#warning`指令，因为它用于我无法更改且必须包含的头文件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-22T21:44:00.983

根据*Pro*C/C++ 程序员指南*（第 5 章“高级主题”），Pro*C 默默地忽略了一些预处理器指令，包括#error 和#pragma，但遗憾的是没有#warning。由于您的警告指令包含在头文件中，因此您可以使用 ORA_PROC 宏：

```
#ifndef  ORA_PROC
#include <irrelevant.h>
#endif 
```

但是，由于某种原因，如果您尝试以这种方式隐藏直接的#warning，Pro*C 就会出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-10-12T03:25:49.750

使用`parse=none`proc选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T17:54:54.463

你不能。Pro*C 只知道#if 和#include。我最好的建议是将文件预处理作为构建过程的一部分，以删除 Pro*C 不喜欢的东西。就像是

```
grep -v -E '^#(warning|pragma|define)' unchangeable.h >unchangeable.pc.h 
```

我的另一个建议是避免 Pro*C 的可憎之处，但我猜你会坚持下去......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T19:53:26.550

Jons Ericsons 的回答是正确的。

在第二种情况下，您可能需要使用该技巧。

某些版本的 Pro*c 无法处理没有文件扩展名的包含文件。

ORA_PROC 常量也是该问题的一种可行解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-03T06:59:30.440

/bin/make -f /css/hwmig/pcprg/proc9i32.mk PROCFLAGS="sqlcheck=SEMANTICS userid=cssd/india09" PCCSRC=bic I_SYM=include= pc1 proc sqlcheck=SEMANTICS userid=cssd/india09 iname=bic include= . include=/oracle/Ora92/precomp/public include=/oracle/Ora92/rdbms/public include=/oracle/Ora92/rdbms/demo include=/oracle/Ora92/plsql/public include=/oracle/Ora92/network/public

Pro*C/C++：发布 9.2.0.6.0 - 2008 年 12 月 2 日星期二 14:05:38 生产

版权所有 (c) 1982, 2002，甲骨文公司。版权所有。

系统默认选项值取自：/oracle/Ora92/precomp/admin/pcscfg.cfg

第 135 行第 2 列的语法错误，文件 /usr/include/standards.h：第 135 行错误，文件 /usr/include/standards.h 中的第 2 列

# 警告 -qdfp 选项是处理标头中的 DFP 代码所必需的。

.1 PCC-S-02014，在预期以下情况之一时遇到“警告”符号：

数字常量、换行符、define、elif、else、endif、error、if、ifdef、ifndef、include、line、pragma、undef、立即预处理命令、C 标记、符号“换行符”被替换为“警告” “ 接着说。

文件 bic.pc 第 30 行第 7 列的语法错误：文件 bic.pc FILE *fp 中第 30 行第 7 列的错误；......1 PCC-S-02201，*在预期以下情况之一时遇到符号“”：

; , = ( [ 符号 ";" 被替换为 "*" 以继续。

文件 bic.pc PCC-F-02102 中第 0 行第 0 列出错，执行 C 预处理时出现致命错误

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-06-26T21:47:16.443

从 /usr/include/standards.h 中删除以下两行

# 警告 -qdfp 选项是处理标头中的 DFP 代码所必需的。

# 别的

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2011-01-19T11:38:20.497

修改`/usr/include/standards.h`.
删除行`#warning The -qdfp option is required to process DFP code in headers.` proc 不支持`#warning`，just`#else` `#if`等

# search - PowerShell FINDSTR 等效？

> ID：14708
> 
> 赞同：28
> 
> 时间：2008-08-18T14:36:49.280
> 
> 标签：search, powershell

[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)的 DOS FINDSTR 等效项是什么？我需要在一堆日志文件中搜索“错误”。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-08-18T14:44:22.273

这是快速答案

```
Get-ChildItem -Recurse -Include *.log | select-string ERROR 
```

我在[这里](http://www.interact-sw.co.uk/iangblog/2006/06/03/pshfindstr)找到了它，它有一个非常深入的答案！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-18T14:51:13.290

例如，在该目录及其所有子目录的 c 文件中查找“#include”的所有实例。

```
gci -r -i *.c | select-string "#include" 
```

gci 是 get-childitem 的别名

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-18T18:22:41.490

只是为了扩展 Monroecheeseman 的答案。gci 是 Get-ChildItem 的别名（相当于 dir 或 ls），-r 开关执行递归搜索，-i 表示包含。

将该查询的结果通过管道传输到 select-string 使其读取每个文件并查找与正则表达式匹配的行（在这种情况下提供的行是 ERROR，但它可以是任何 .NET 正则表达式）。

结果将是匹配对象的集合，显示行匹配、文件和其他相关信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-18T14:44:30.293

```
if ($entry.EntryType -eq "Error") 
```

[作为面向对象，您希望使用您可以在此处](http://www.computerperformance.co.uk/powershell/powershell_syntax.htm#Operators_)找到的标准比较运算符之一来测试相关属性。

我现在有一个[PS 脚本](http://slipsec.blogspot.com/2008/04/monitoring-remote-event-logs-from.html)远程监视日志 - 一些简单的修改应该可以让它为你工作。

编辑：我想我还应该添加一个已经为此构建的 cmdlet，如果您不想像我一样展开。查看：

```
man Get-EventLog
Get-EventLog -newest 5 -logname System -EntryType Error 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T19:35:43.050

在相关说明中，这里的搜索将列出包含特定正则表达式搜索或字符串的所有文件。它可以使用一些改进，所以请随意工作。此外，如果有人想将它封装在一个受欢迎的函数中。

我是新来的，所以如果这应该进入它自己的主题，请告诉我。我想我会把它放在她身上，因为这看起来很相关。

```
# Search in Files Script
# ---- Set these before you begin ---- 
$FolderToSearch="C:\" # UNC paths are ok, but remember you're mass reading file contents over the network
$Search="Looking For This" # accepts regex format
$IncludeSubfolders=$True #BUG: if this is set $False then $FileIncludeFilter must be "*" or you will always get 0 results
$AllMatches=$False
$FileIncludeFilter="*".split(",") # Restricting to specific file types is faster than excluding everything else
$FileExcludeFilter="*.exe,*.dll,*.wav,*.mp3,*.gif,*.jpg,*.png,*.ghs,*.rar,*.iso,*.zip,*.vmdk,*.dat,*.pst,*.gho".split(",")

# ---- Initialize ----
if ($AllMatches -eq $True) {$SelectParam=@{AllMatches=$True}}
else {$SelectParam=@{List=$True}}
if ($IncludeSubfolders -eq $True) {$RecurseParam=@{Recurse=$True}}
else {$RecurseParam=@{Recurse=$False}}

# ---- Build File List ---- 
#$Files=Get-Content -Path="$env:userprofile\Desktop\FileList.txt" # For searching a manual list of files
Write-Host "Building file list..." -NoNewline
$Files=Get-ChildItem -Include $FileIncludeFilter -Exclude $FileExcludeFilter -Path $FolderToSearch -ErrorAction silentlycontinue @RecurseParam|Where-Object{-not $_.psIsContainer} # @RecurseParam is basically -Recurse=[$True|$False]
#$Files=$Files|Out-GridView -PassThru -Title 'Select the Files to Search' # Manually choose files to search, requires powershell 3.0
Write-Host "Done"

# ---- Begin Search ---- 
Write-Host "Searching Files..."
$Files|
    Select-String $Search @SelectParam| #The @ instead of $ lets me pass the hastable as a list of parameters.  @SelectParam is either -List or -AllMatches
    Tee-Object -Variable Results|
    Select-Object Path
Write-Host "Search Complete"
#$Results|Group-Object path|ForEach-Object{$path=$_.name; $matches=$_.group|%{[string]::join("`t", $_.Matches)}; "$path`t$matches"} # Show results including the matches separated by tabs (useful if using regex search)

<# Other Stuff
    #-- Saving and restoring results
    $Results|Export-Csv "$env:appdata\SearchResults.txt" # $env:appdata can be replaced with any UNC path, this just seemed like a logical place to default to
    $Results=Import-Csv "$env:appdata\SearchResults.txt"

    #-- alternate search patterns
    $Search="(\d[-|]{0,}){15,19}" #Rough CC Match
#> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-13T08:44:40.697

这不是最好的方法：

```
gci <the_directory_path> -filter *.csv | where { $_.OpenText().ReadToEnd().Contains("|") -eq $true } 
```

这帮助我找到了所有包含该`|`字符的 csv 文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-15T20:37:50.357

仅供参考：如果您更新到 Powershell 版本 7，您可以使用 grep...我知道 egrep 在 Azure CLI 的 powershell 中...但是 SS 就在那里！这里有一篇旧文章：[https://devblogs.microsoft.com/powershell/select-string-and-grep/]

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-06T21:13:25.597

正如前面的答案所示，PowerShell 基本上排除了对*findstr.exe的需要。*这些答案中的任何一个都应该可以正常工作。

但是，**如果您确实需要使用*findstr.exe***（就像我的情况），这里有一个 PowerShell 包装器：

使用该`-Verbose`选项输出*findstr*命令行。

* * *

```
function Find-String
{
    [CmdletBinding(DefaultParameterSetName='Path')]
    param
    (
        [Parameter(Mandatory=$true, Position=0)]
        [string]
        $Pattern,

        [Parameter(ParameterSetName='Path', Mandatory=$false, Position=1, ValueFromPipeline=$true)]
        [string[]]
        $Path,

        [Parameter(ParameterSetName='LiteralPath', Mandatory=$true, ValueFromPipelineByPropertyName=$true)]
        [Alias('PSPath')]
        [string[]]
        $LiteralPath,

        [Parameter(Mandatory=$false)]
        [switch]
        $IgnoreCase,

        [Parameter(Mandatory=$false)]
        [switch]
        $UseLiteral,

        [Parameter(Mandatory=$false)]
        [switch]
        $Recurse,

        [Parameter(Mandatory=$false)]
        [switch]
        $Force,

        [Parameter(Mandatory=$false)]
        [switch]
        $AsCustomObject
    )

    begin
    {
        $value = $Pattern.Replace('\', '\\\\').Replace('"', '\"')

        $findStrArgs = @(
            '/N'
            '/O'
            @('/R', '/L')[[bool]$UseLiteral]
            "/c:$value"
        )

        if ($IgnoreCase)
        {
            $findStrArgs += '/I'
        }

        function GetCmdLine([array]$argList)
        {
            ($argList | foreach { @($_, "`"$_`"")[($_.Trim() -match '\s')] }) -join ' '
        }
    }

    process
    {
        $PSBoundParameters[$PSCmdlet.ParameterSetName] | foreach {
            try
            {
                $_ | Get-ChildItem -Recurse:$Recurse -Force:$Force -ErrorAction Stop | foreach {
                    try
                    {
                        $file = $_
                        $argList = $findStrArgs + $file.FullName

                        Write-Verbose "findstr.exe $(GetCmdLine $argList)"

                        findstr.exe $argList | foreach {
                            if (-not $AsCustomObject)
                            {
                                return "${file}:$_"
                            }

                            $split = $_.Split(':', 3)

                            [pscustomobject] @{
                                File = $file
                                Line = $split[0]
                                Column = $split[1]
                                Value = $split[2]
                            }
                        }
                    }
                    catch
                    {
                        Write-Error -ErrorRecord $_
                    }
                }
            }
            catch
            {
                Write-Error -ErrorRecord $_
            }
        }
    }
} 
```

# svn - TortoiseSVN & Putty 非常慢

> ID：14712
> 
> 赞同：1
> 
> 时间：2008-08-18T14:38:28.090
> 
> 标签：svn, tortoisesvn, putty

有谁知道为什么 TortoiseSVN windows 客户端（在 Win32 XP 和 Vista 中）与 Putty 和 PAM 一起使用时速度如此之慢？似乎它为每个请求连接，因为数据传输（结帐）一点也不慢？

任何想法如何改变它？

更新：我以前对 SSH 没有任何问题。但我必须使用基于密钥的身份验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-18T14:43:34.850

与服务器的标准 SSH 连接是否也有问题？如果通过 SSH 连接到您的服务器通常很慢，这可能是反向 DNS 查找的问题。

安德鲁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-18T14:51:40.747

我不使用 Putty 进行 ssh+svn 连接。我认为我使用 TortoisePlink，它是 Putty 的包装器。它由 TortoiseSVN 在 bin 下的安装目录中提供。

基本上转到设置对话框，通过右键单击 Windows 资源管理器窗口 -> TortoiseSVN -> 设置

单击树中的网络项。通过提供 TortoisePlink 的路径来设置你的 SSH 客户端：

C:\Program Files\TortoiseSVN\bin\TortoisePlink.exe -l 用户名 -pw 密码

我没有遇到任何问题以这种方式运行我的 svn 服务器并通过 SSH 使用 TortoiseSVN 连接到它。速度很好，安全性也很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T19:20:23.230

你连接的是什么类型的系统？例如，如果您连接到 OpenSUSE，默认的 DNS 反向查找设置通常会导致 SSH 连接非常慢。如果可以，请将您的客户端 IP 地址放入服务器上的 /etc/hosts 表中。如果反向 DNS 是您的问题，这将解决（记得重新启动 nscd 守护进程 - "/etc/init.d/nscd restart" 以便更改生效。）

SSH 将比本地 SVN 协议慢，但不会慢一个数量级或数量级，也不太可能达到您会注意到的水平。但是每个请求的反向 DNS 超时可能是几秒钟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T13:55:22.887

确保存在匹配的 PuTTY 会话。

如果您的网址是

```
svn+ssh://xxx.yy/path/to/svn/trunk/foobar 
```

那么你需要一个名为 PuTTY 的会话

```
xxx.yy 
```

必须完全配置，尤其是在

*   用户名
*   私钥文件

我将它与 Pageant 一起使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-12T15:57:40.073

尝试使用 Cygwin 的 ssh.exe 版本。

[我在这里](https://superuser.com/questions/656814/ssh-in-windows-has-very-slow-transfer-rates/675050#675050)找到了这个建议，它使我的下载速度提高了 3-5 倍

# sql-server - 识别 SQL Server 性能问题

> ID：14717
> 
> 赞同：9
> 
> 时间：2008-08-18T14:39:51.333
> 
> 标签：sql-server, performance, sql-server-2005

我们的 SQL Server 2005 群集上出现零星的随机查询超时。我拥有一些使用它的应用程序，所以我正在帮助调查。在常规的 ol' Perfmon 中查看 % CPU 时间时，您当然可以看到它的变化。但是，SQL 活动监视器只给出一个进程使用的累积 CPU 和 IO 时间，而不是它当时正在使用的时间，或者在特定时间范围内使用的时间。也许我可以使用分析器并运行跟踪，但是这个集群被大量使用，我担心我会在大海捞针。我在吠叫错误的树吗？

有没有人有一些好的方法可以在这种环境中追踪昂贵的查询/流程？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-18T15:09:27.683

这将为您提供平均 CPU 时间排名前 50 的语句，请在此处查看其他脚本：[http ://www.microsoft.com/technet/scriptcenter/scripts/sql/sql2005/default.mspx?mfr=true](http://www.microsoft.com/technet/scriptcenter/scripts/sql/sql2005/default.mspx?mfr=true)

```
SELECT TOP 50
        qs.total_worker_time/qs.execution_count as [Avg CPU Time],
        SUBSTRING(qt.text,qs.statement_start_offset/2, 
            (case when qs.statement_end_offset = -1 
            then len(convert(nvarchar(max), qt.text)) * 2 
            else qs.statement_end_offset end -qs.statement_start_offset)/2) 
        as query_text,
        qt.dbid, dbname=db_name(qt.dbid),
        qt.objectid 
FROM sys.dm_exec_query_stats qs
cross apply sys.dm_exec_sql_text(qs.sql_handle) as qt
ORDER BY 
        [Avg CPU Time] DESC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-18T16:34:43.987

我发现[Performance Dashboard Reports](http://www.microsoft.com/downloads/details.aspx?FamilyId=1d3a4a0d-7e0c-4730-8204-e419218c1efc&displaylang=en)非常有帮助。它们是 Microsoft 提供的一组自定义 RS 报告。您只需在客户端 PC 上运行安装程序，然后在 SQL Server 实例上运行 setup.sql。

之后，右键单击 SSMS 中的数据库（无论是哪个），然后转到 Reports -> Custom Reports。导航并选择默认位于 \Program Files\Microsoft SQL Server\90\Tools\PerformanceDashboard 文件夹中的 performance_dashboard_main.rdl。您只需执行一次。第一次之后，它将显示在报告列表中。

主仪表板视图将显示一段时间内的 CPU 利用率等。您可以不时刷新它。当您看到峰值时，只需单击图表中的条形即可获取其背后的详细数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-18T15:01:41.693

我们使用 Quest 的[Spotlight](http://www.quest.com/spotlight-on-sql-server-enterprise/)产品。显然这是对时间和金钱的投资，所以它可能在短期内对您没有帮助，但如果您有一个大型 SQL 环境，它非常有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-18T15:13:47.503

正如 Yaakov 所说，在典型负载下运行分析器几分钟并将结果保存到一个表中，这将允许您对结果运行查询，从而更容易发现任何占用资源的查询。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-18T14:47:52.907

Profiler 可能看起来像是“大海捞针”的方法，但它可能会发现一些有用的东西。尝试在数据库处于典型负载下时运行几分钟，看看是否有任何查询突出显示占用太多时间或以某种方式占用资源。虽然这样的情况可能指向一些一般性问题，但它也可能与一个或两个站点的某些特定问题有关，在某些情况下，这些问题足以导致整体性能非常差。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-18T15:24:17.123

运行 Profiler 并过滤读取次数超过一定次数的查询。对于我处理的应用程序，任何超过 5000 次读取的非报告查询都值得重新审视。你的应用可能有不同的阈值，但想法是一样的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-18T16:27:51.037

Erland Sommarskog 的[这个实用程序非常有用。](http://www.sommarskog.se/sqlutil/aba_lockinfo.html)

这是您添加到数据库中的存储过程。每当您想查看哪些查询处于活动状态并获得锁、块等的良好图片时运行它。当事情看起来很糟糕时，我经常使用它。

# c# - UrlEncode 通过控制台应用程序？

> ID：14731
> 
> 赞同：62
> 
> 时间：2008-08-18T14:48:27.213
> 
> 标签：c#, .net, console

通常我只会使用：

```
HttpContext.Current.Server.UrlEncode("url"); 
```

但由于这是一个控制台应用程序，`HttpContext.Current`所以总是`null`.

还有另一种方法可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-01-19T18:41:57.590

试试这个！

```
Uri.EscapeUriString(url); 
```

或者

```
Uri.EscapeDataString(data) 
```

无需引用 System.Web。

**编辑：**有关更多信息，请参阅[另一个](https://stackoverflow.com/a/34189188/7391)SO 答案...

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2008-08-18T14:51:06.503

我不是 .NET 人，但是，你不能使用：

```
HttpUtility.UrlEncode Method (String) 
```

此处描述：

[MSDN 上的 HttpUtility.UrlEncode 方法（字符串）](http://msdn.microsoft.com/en-us/library/4fkewx0t.aspx)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2010-10-24T01:25:40.773

来自 Ian Hopkins 的代码无需添加对 System.Web 的引用即可为我解决问题。对于不使用 VB.NET 的人来说，这里是 C# 的一个端口：

```
/// <summary>
/// URL encoding class.  Note: use at your own risk.
/// Written by: Ian Hopkins (http://www.lucidhelix.com)
/// Date: 2008-Dec-23
/// (Ported to C# by t3rse (http://www.t3rse.com))
/// </summary>
public class UrlHelper
{
    public static string Encode(string str) {
        var charClass = String.Format("0-9a-zA-Z{0}", Regex.Escape("-_.!~*'()"));
        return Regex.Replace(str, 
            String.Format("[^{0}]", charClass),
            new MatchEvaluator(EncodeEvaluator));
    }

    public static string EncodeEvaluator(Match match)
    {
        return (match.Value == " ")?"+" : String.Format("%{0:X2}", Convert.ToInt32(match.Value[0]));
    }

    public static string DecodeEvaluator(Match match) {
        return Convert.ToChar(int.Parse(match.Value.Substring(1), System.Globalization.NumberStyles.HexNumber)).ToString();
    }

    public static string Decode(string str) 
    {
        return Regex.Replace(str.Replace('+', ' '), "%[0-9a-zA-Z][0-9a-zA-Z]", new MatchEvaluator(DecodeEvaluator));
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-18T14:53:21.990

你会想要使用

```
System.Web.HttpUtility.urlencode("url") 
```

确保将 system.web 作为项目中的引用之一。我不认为它默认包含在控制台应用程序中作为参考。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-01-29T20:08:46.363

`WebUtility.UrlEncode(string)`从`System.Net`命名空间使用

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-18T14:50:38.127

尝试在 HttpUtility 类中使​​用 UrlEncode 方法。

1.  [http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-12-24T02:43:34.920

我自己遇到了这个问题，我没有将 System.Web 程序集添加到我的项目中，而是编写了一个用于编码/解码 URL 的类（它非常简单，我已经做了一些测试，但不是很多）。我在下面包含了源代码。请：如果你重用这个，请在​​顶部留下评论，如果它坏了不要怪我，从代码中学习。

```
''' <summary>
''' URL encoding class.  Note: use at your own risk.
''' Written by: Ian Hopkins (http://www.lucidhelix.com)
''' Date: 2008-Dec-23
''' </summary>
Public Class UrlHelper
    Public Shared Function Encode(ByVal str As String) As String
        Dim charClass = String.Format("0-9a-zA-Z{0}", Regex.Escape("-_.!~*'()"))
        Dim pattern = String.Format("[^{0}]", charClass)
        Dim evaluator As New MatchEvaluator(AddressOf EncodeEvaluator)

        ' replace the encoded characters
        Return Regex.Replace(str, pattern, evaluator)
    End Function

    Private Shared Function EncodeEvaluator(ByVal match As Match) As String
    ' Replace the " "s with "+"s
        If (match.Value = " ") Then
            Return "+"
        End If
        Return String.Format("%{0:X2}", Convert.ToInt32(match.Value.Chars(0)))
    End Function

    Public Shared Function Decode(ByVal str As String) As String
        Dim evaluator As New MatchEvaluator(AddressOf DecodeEvaluator)

        ' Replace the "+"s with " "s
        str = str.Replace("+"c, " "c)

        ' Replace the encoded characters
        Return Regex.Replace(str, "%[0-9a-zA-Z][0-9a-zA-Z]", evaluator)
    End Function

    Private Shared Function DecodeEvaluator(ByVal match As Match) As String
        Return "" + Convert.ToChar(Integer.Parse(match.Value.Substring(1), System.Globalization.NumberStyles.HexNumber))
    End Function
End Class 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-16T15:08:21.527

Kibbee 提供了真正的答案。是的，HttpUtility.UrlEncode 是正确的使用方法，但默认情况下它不适用于控制台应用程序。您**必须**添加对 System.Web 的引用。要做到这一点，

1.  在您的解决方案资源管理器中，右键单击引用
2.  选择“添加参考”
3.  在“添加引用”对话框中，使用 .NET 选项卡
4.  向下滚动到 System.Web，选择它，然后点击确定

现在您可以使用 UrlEncode 方法。你还想补充，

使用 System.Web

在控制台应用程序的顶部或在调用方法时使用完整的命名空间，

System.Web.HttpUtility.UrlEncode(someString)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-18T14:51:37.173

System.Web 中的 HttpUtility.UrlEncode("url")。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-18T14:52:08.640

使用静态 HttpUtility.UrlEncode 方法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-02T06:16:19.097

最好的办法是添加对 System.web..dll 的引用

并使用 var EncodedUrl=System.Web.HttpUtility.UrlEncode("URL_TEXT");

[您可以在System.web.dll](http://originaldll.com/download/11019.dll)中找到该文件

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-15T11:09:39.540

Uri.EscapeUriString 不应用于转义要在 URL 中传递的字符串，因为它不会像您预期的那样对所有字符进行编码。'+' 是一个很好的例子，它没有被转义。然后将其转换为 URL 中的空格，因为这就是简单 URI 中的含义。显然，当您尝试在 URL 中传递诸如 base 64 编码字符串之类的内容时，这会导致大量问题，并且空格会出现在接收端的整个字符串中。

您可以使用 HttpUtility.UrlEncode 并将所需的引用添加到您的项目中（如果您正在与 Web 应用程序通信，那么我认为您没有理由不这样做）。

或者在 Uri.EscapeUriString 上使用 Uri.EscapeDataString ，这里解释得很好：[https ://stackoverflow.com/a/34189188/7391](https://stackoverflow.com/a/34189188/7391)

# c# - 打印机不可用，除非共享

> ID：14756
> 
> 赞同：6
> 
> 时间：2008-08-18T15:00:54.037
> 
> 标签：c#, asp.net, printing, windows-server-2003

我们使用经典的 asp 来调用 C# dll，在 C# dll 中我们使用 System.Drawing.Printing.PrinterSettings.InstalledPrinters 来获取可用打印机的列表。如果打印机未共享，则在用户尝试打印时它们不会显示。本地系统帐户可以从 VB6 dll 中查看和打印，管理员可以从 C# dll 中正常打印，如您所料。我们是否需要授予用户某种权限，以便这些打印机可用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-18T15:15:06.097

我记得，运行网站使用网络用户帐户，该帐户可能无权查看本地打印机。

MSDN 上有一个页面说明了如何模拟另一个可能有权访问打印机的用户，但我找不到它。

编辑：我发布得太早了。[这是页面](http://support.microsoft.com/kb/306158)。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-18T23:09:48.713

我相当确定冒充用户或使用他们的凭据并不构成查看该用户的打印机的能力。我相信 explorer.exe 在登录时会重新连接所有网络资源（共享/打印机）。

# visual-studio - 是否可以在工具栏搜索框中禁用命令输入？

> ID：14760
> 
> 赞同：4
> 
> 时间：2008-08-18T15:04:25.603
> 
> 标签：visual-studio

在 Visual Studio 工具栏中，您可以在搜索框中输入命令，方法是在命令前加上 > 符号。有什么办法可以禁用它吗？我从未使用过该功能，并且在尝试实际搜索您知道在代码中以大于为前缀的内容时，这有点烦人。当您不小心搜索 ">exit" 并且 IDE 退出时，这尤其令人讨厌（我知道代码中有一行就像`if(counter > exitCount)`这样输入搜索时不假思索）。

至少，您可以转义 > 符号以便搜索它吗？用 ^ 前缀似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-18T22:42:12.513

这是一个非常酷的功能。我已经浏览了[功能文档](http://msdn.microsoft.com/en-us/library/1665hyw1(VS.80).aspx)和随附的[命令列表](http://msdn.microsoft.com/en-us/library/c338aexd(VS.80).aspx)，并且在关闭它方面并没有出现太多。

如果要搜索`>exit`，可以随时`>Edit.Find >exit`在搜索框中输入；这似乎可以解决问题。虽然有点冗长，但它确实是一个边缘案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-18T21:55:43.090

> 您可以在搜索框中输入命令，方法是在命令前加上 > 符号。

哇，我不知道。我在哪里可以找到可能的命令列表？

我从未真正使用过搜索框，我已将`ctrl`+重新映射`F`为增量搜索，通常是`ctrl`+`I`

我发现这比普通搜索*要*酷得多——试一试，你可能最终不再关心搜索框了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T22:13:33.430

> 哇，我不知道。我在哪里可以找到可能的命令列表？

这些命令与您可以在命令窗口中输入的命令相同，因此您几乎可以使用它来驱动整个 IDE 和调试器。有大量用于常用命令的预定义别名。打开命令窗口并输入`alias`一个列表，让您开始。

# .net - 如何最好地使用文件版本和汇编版本？

> ID：14770
> 
> 赞同：55
> 
> 时间：2008-08-18T15:10:12.660
> 
> 标签：.net, attributes, versions

在 .NET 中，构建项目时有两个可用的版本号，文件版本和程序集版本。你是如何使用这些数字的？让它们保持不变？自动增加一个，但手动更改另一个？

还有`AssemblyInformationalVersion`属性呢？

我发现这篇支持 Microsoft 知识库 (KB) 文章提供了一些帮助： [如何使用程序集版本和程序集文件版本](http://support.microsoft.com/kb/556041)。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2008-08-18T16:03:33.223

在具有多个项目的解决方案中，我发现非常有用的一件事是让所有 AssemblyInfo 文件都指向一个管理版本控制的项目。所以我的 AssemblyInfos 有一行：

```
[assembly: AssemblyVersion(Foo.StaticVersion.Bar)] 
```

我有一个项目，其中包含一个声明字符串的文件：

```
namespace Foo
{
    public static class StaticVersion
    {
         public const string Bar= "3.0.216.0"; // 08/01/2008 17:28:35
    }
} 
```

然后我的自动构建过程只是通过从数据库中提取最新版本并增加倒数第二个数字来更改该字符串。

当功能集发生巨大变化时，我只更改主要版本号。

我根本不更改文件版本。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-08-18T17:25:54.400

知识库文章提到了最重要的区别：文件版本仅用于显示目的，而程序集版本在 .NET 加载行为中起着重要作用。

如果您更改了程序集版本号，那么您的程序集作为一个整体的身份已经改变。开发人员需要重新构建以引用您的新版本（除非您设置了一些自动版本控制“策略”），并且在运行时只会加载具有匹配版本号的程序集。

这在我的环境中很重要，我们需要一个递增的、高度可见的版本号用于审计目的，但我们不想强迫开发人员重新构建或在生产中同时拥有多个版本。在这种情况下，对于向后兼容的微小更改，我们会更新文件版本，而不是程序集版本。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-08-18T15:20:59.377

在我有多个文件程序集（即 1 个 exe 和 5 个 dll）的情况下，我将为每个文件使用不同的文件版本，但对所有文件使用相同的程序集版本，让您知道每个 dll 使用哪个 exe。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-11-12T16:42:09.397

> 文件版本仅用于显示目的，而程序集版本在 .NET 加载行为中起着重要作用。

不完全的。当您将现有版本升级到以前的版本时，文件版本对于 Windows Installer 也很重要。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-11-12T16:48:08.213

对于我当前的应用程序，每个 VS 项目都有一个指向“AssemblyBuildInfo”源文件的链接，该文件具有以下属性：

```
[assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyCompany("Acme Corporationy")]
[assembly: AssemblyCopyright("Copyright ©  2009 Acme Corporation")] 
```

这样，我的解决方案中的所有程序集共享相同的版本和公司信息（这意味着如果我必须更改它，我只更改一次）。通过排除 FileVersion，它会自动设置为 AssemblyVersion。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-18T15:55:13.053

@Adam：您是否在每次构建时更改文件版本？您是否使用版本控制（SYN 或 VSS）并使用该信息将源链接回二进制文件？

大会版本保持不变似乎是有道理的。即“2.0.0.0”。这对应于产品的部署。

文件版本会更改以匹配源代码管理中的修订。“2.0.??.revision” 这将提供从特定 dll（或 exe）到构建它的源的链接。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-12-11T22:14:30.783

我写了一篇关于这个主题的博客文章，可能对社区有用[http://blog.raffaeu.com/archive/2011/12/11/sharing-assembly-version-in-visual-studio-2010.aspx](http://blog.raffaeu.com/archive/2011/12/11/sharing-assembly-version-in-visual-studio-2010.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-18T15:11:51.580

我让它们保持不变。但是，我没有多文件程序集，这是 AssemblyVersion 编号变得重要的时候。我对内部版本号使用 Microsoft 样式的日期编码，而不是自动递增（我没有发现构建某物的次数如此重要）。

# c# - 关于 C# 和 VB.net 异同的面试问题

> ID：14775
> 
> 赞同：7
> 
> 时间：2008-08-18T15:11:40.783
> 
> 标签：c#, vb.net

我已经做了几年 VB.net 开发人员，但我目前正在申请一些使用 C# 的公司。我什至被告知至少有一家公司不想要 VB.net 开发人员。

我一直在网上寻找两者之间的真正区别，并询问了crackoverflow。唯一的主要区别是一些对我来说微不足道的语法差异，因为我也是一名 Java 开发人员。

当面试官告诉我他们正在寻找 C# 开发人员或类似问题时，他们会怎样回答？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-18T16:18:29.823

我不得不面试一些 C# 职位的人，这是我对 VB.Net 开发人员面试 C# 职位的一般建议：

*   确保您清楚自己一直在使用 VB.Net。这似乎很明显，但显然不是（根据我的经验）。
*   如果可能，请尝试提供代码示例。我见过一些由 VB 程序员编写的可怕的 VB.Net（和 C#），他们在过渡到 .Net 时似乎没有学到太多东西。
*   如果被问到，能够在面试期间用 C# 编写代码。我知道两者之间没有太多真正的区别，但我不想付钱让你学习新语法。

对于您的具体问题：我之前问过这类问题，我想听的是底层系统和框架是如何相同的。如果可能的话，谈谈垃圾收集、IDisposable、终结器、不安全代码块的危险、堆栈与堆等。所有这些都表明你真正了解 .Net 框架的复杂性。对或错，VB 的传统带来了对底层编程和一般窗口缺乏理解的期望（具有讽刺意味的是，c++ 开发人员会拥有 ac# 开发人员......等等）。

最后，你如何构建你的体验可以让世界变得不同。如果您将自己定位为 .Net 开发人员，而不是 VB.Net 或 C#，那么愚蠢、伪宗教、玩笑可能不会进入对话。这当然要求您在面试时实际上同时了解 VB.Net 和 C#，但无论如何，这都是一个好政策。

事情的真相是，如果你发现面试你的人仅仅因为你以前在 VB.Net 中进行过开发而将你拒之门外，那么它很可能不会成为你想要工作的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-18T15:19:40.300

一些差异（比句法更重要）有时适合我：

*   VB.NET 没有匿名委托
*   不安全的代码块不在 VB.NET 中

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-18T15:43:23.093

我爱死 C#，但我羡慕 VB.NET 的可选参数。C# 中的办公自动化非常非常痛苦。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-18T15:15:31.243

我认为真相会在这方面出现：

我是一名软件开发人员，语言的语法是拼图的最后一部分。通过雇用我，您将得到一个具有解决问题和逻辑经验的人。我熟悉 .NET 环境、CLR 和相关的 Windows 堆栈，包括 SQL 和 Windows 服务器。我不知道 C# 语法，但是，我习惯了面向对象的方法，我将在几周内完全掌握语法的细节方面没有问题。您可以从我的代码示例中看出我是一位经验丰富的开发人员，我向您保证过渡将是无缝的。我已经开始学习这门语言了，到目前为止我还没有遇到任何问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-18T15:47:44.627

@DAC - VB 现在（在 .net3.5 中）支持 lambda：

```
Function(x) x.ToString() 
```

在一次采访中，我会说理解 CLR 和代码真正在做什么是最重要的，并且你很乐意在其中任何一个中编写代码（假设你是）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-27T07:29:26.657

我也是一个 C# 死忠，但差异不仅仅是语法。VB在某些地方胜出

1.  可选参数
2.  后期装订

从 C# 使用 COM 可能是一件非常令人沮丧的事情。（这并不是说不可能！）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-18T15:38:40.887

说实话？如果您也是 Java 开发人员，我会带头。具有一定 .NET 经验的 Java 开发人员通常会比具有 Java 经验的 VB 开发人员给人留下更好的印象。如果您可以回答有关 .NET 和 Java 之间差异的问题，那么您应该处于良好状态。

我还建议您尽快学习 C# 语法。如果您有 VB 和 Java 方面的经验，那不会花很长时间。

许多开发人员对 VB 和使用它的人有疑问。有效与否，您将不得不面对这个现实。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-27T07:17:11.110

VB 或 C# 都只是语法不同，但如果你应用逻辑的方式是相同的。

# html - shtml中的“包含文件”是保持非数据库更改数据的最佳方法吗

> ID：14791
> 
> 赞同：2
> 
> 时间：2008-08-18T15:23:33.693
> 
> 标签：html, include, shtml

我们有一个网站，它使用`#include file`命令将信息滚动到一些网页中。作者可以访问文本文件来更新诸如临时课程或部门联系信息等内容。

我的问题是，我没有*看到*有人使用这种方法，我想知道继续使用它是否是个好主意。如果不是，我应该改用什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-18T15:36:35.273

如果您使用的是 ASP.NET，那么您可以将该代码捆绑到一个漂亮的小用户控件中，该控件将显示所有重要信息。

其他平台应该允许您将逻辑捆绑到一个类对象中，并使用它来显示它。

这实际上取决于您用于部署应用程序的平台。如果您在更有限的平台上部署，包含文件可能是您的最佳解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-18T15:50:00.800

我不认为它有什么问题，我用 PHP 做过一些类似的事情。如果做出改变的人对他们如何做到这一点感到满意并且他们可以做他们需要做的事情，我认为你应该坚持下去。可能会涉及一些再培训和/或更改系统涉及的大量工作。

# java - 如果可能的话，如何使用通用参数覆盖 EJB 3 会话 bean 方法？

> ID：14801
> 
> 赞同：6
> 
> 时间：2008-08-18T15:34:34.920
> 
> 标签：java, generics, inheritance, jakarta-ee, ejb-3.0

假设您有以下 EJB 3 接口/类：

```
public interface Repository<E>
{
   public void delete(E entity);
}

public abstract class AbstractRepository<E>  implements Repository<E>
{
   public void delete(E entity){
      //...
   }
}

public interface FooRepository<Foo>
{
   //other methods
}

@Local(FooRepository.class)
@Stateless
public class FooRepositoryImpl extends
    AbstractRepository<Foo> implements FooRepository
{
   @Override
   public void delete(Foo entity){
      //do something before deleting the entity
      super.delete(entity);
   }
   //other methods
} 
```

然后是另一个访问 bean 的`FooRepository`bean：

```
//...
@EJB
private FooRepository fooRepository;

public void someMethod(Foo foo)
{
    fooRepository.delete(foo);
}
//... 
```

`FooRepository`但是，当调用 bean的 delete 方法时，不会执行覆盖方法。相反，仅执行中定义的删除方法的实现`AbstractRepository`。

我做错了什么，或者仅仅是 Java/EJB 3 的限制，泛型和继承还不能很好地结合在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-18T21:51:55.140

我用 pojo 试过了，它似乎有效。我不得不稍微修改你的代码。我认为您的界面有点偏离，但我不确定。

我假设“Foo”是一个具体的类型，但如果不是，我可以为你做更多的测试。

我刚刚写了一个主要方法来测试它。我希望这有帮助！

```
public static void main(String[] args){
        FooRepository fooRepository = new FooRepositoryImpl();
        fooRepository.delete(new Foo("Bar"));
}

public class Foo
{
    private String value;

    public Foo(String inValue){
        super();
        value = inValue;
    }
    public String toString(){
        return value;
    }
}

public interface Repository<E>
{
    public void delete(E entity);
}

public interface FooRepository extends Repository<Foo>
{
    //other methods
}

public class AbstractRespository<E> implements Repository<E>
{
    public void delete(E entity){
        System.out.println("Delete-" + entity.toString());
    }
}

public class FooRepositoryImpl extends AbstractRespository<Foo> implements FooRepository
{
     @Override
       public void delete(Foo entity){
          //do something before deleting the entity
            System.out.println("something before");
          super.delete(entity);
       }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-18T17:04:42.927

您能否仅将其用作 POJO 来针对您的 FooRepository 类编写单元测试。如果它按预期工作，那么我不熟悉它在容器内的功能会有所不同的任何原因。

我怀疑还有其他事情发生，如果您将它作为 POJO 进行测试，它可能会更容易调试。

# sql - 通过 MSFT 的数据库发布向导发布后的 DB 问题

> ID：14828
> 
> 赞同：3
> 
> 时间：2008-08-18T15:55:34.970
> 
> 标签：sql, deployment, dotnetnuke

我在相当多的 DotNetNuke 站点上工作，偶尔（我还没有弄清楚共同因素），当我使用 Microsoft 的数据库发布向导为我在开发服务器上创建的站点创建脚本后，运行主机上的脚本（通常是 GoDaddy.com），并上传站点文件，我收到一个错误...我 99.9% 确定它与文件无关，所以不确定从数据库的哪里开始。不幸的是，使用 DotNetNuke 你没有得到 YSOD，而是一个通用错误，没有真正的方法来找到发生的实际异常。

我只是好奇是否有人在使用数据库发布向导时遇到过类似的部署问题，如果是这样，他们是如何克服这些问题的？我拥有 RedGate 工具集，但像 GoDaddy 这样的一些主机不允许您直接连接到他们的服务器......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-18T19:39:33.130

数据库发布向导生成的脚本通常需要调整，因为在处理约束时它有时会导致表/过程创建的顺序错误。我所做的是首先备份数据库，然后运行脚本，如果出现错误，我将该查询移至脚本末尾。继续恢复数据库并运行脚本，直到它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-05T19:28:38.540

我会关注两个领域 -

1.  您是否在 dbo 模式中运行，并且您的脚本数据库是否使用 dbo？
2.  您是在开发环境还是生产环境中使用对象限定符？（查看您的 sqldataprovider 配置设置）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-19T15:10:29.820

You should be able to expose the underlying error message by setting the following in the web.config:

```
customErrors mode="Off" 
```

Could you elaborate on "and uploading the site files"? New instance of DNN? updating an existing site? upgrading DNN version? If upgrade or update -- what files are you adding/overwriting?

Also, when using GoDaddy, can you check to verify that the web site's identity (network service or asp.net machine account depending on your IIS version) has sufficient permissions to the website's file system? It should have modify permissions and these may need to be reapplied if you are overwriting files.

*   IIS6 (XP, Server 2000, 2003) = ASP.Net Machine Account
*   IIS7 (Vista, Server 2008) = Network Service

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T05:39:29.527

根据具体发生的情况和 DNN 向您显示的内容，您可能能够手动查看 EventLog 表内部，提取存储在那里的 XML 数据，并对其进行解析以查找堆栈跟踪和有关手头特定错误的详细信息。

然而，我发现虽然我在使用数据库备份和恢复的部署方面获得了更好的整体体验，但这样我 100% 确信所有对象都正确移动，老实说，它在我的经验中效果更好。

使用 GoDaddy，我知道另一个常见的主要问题是文件权限不正确，这会阻止 DNN 修改 web.config 和它需要执行的其他文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-04T20:54:35.473

如果您收到 DNN 的错误页面之一，它可能已将错误记录到事件日志表中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-04T02:49:05.960

Test your generated scripts on a new local database (using the free SQL Express product or the full meal deal). If it runs fine locally, then you can be confident that it will run elsewhere, all things being equal.

If it bombs when you run it locally, use the process of elimination and work your way through the script execution to find the offending code.

My hunch is that the order of scripts could be off. I *think* I've had that happen before with the database publishing wizard.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-04T02:51:05.377

Just read your follow up. In every case that I've had your problem, it was always something to do with the connection string in web.config. Even after hours of staring at it, it was always a connection string issue in web.config. Get up, take a walk and then come back.

# language-agnostic - 如何开始使用语音转文本？

> ID：14837
> 
> 赞同：10
> 
> 时间：2008-08-18T16:05:43.280
> 
> 标签：language-agnostic, speech-recognition

我对语音到文本算法非常感兴趣，但我不确定从哪里开始研究它们。一堆搜索让我找到了[这个](http://cslu.cse.ogi.edu/HLTsurvey/download.html)，但它是从 1996 年开始的，我相当肯定从那时起已经有了改进。

有没有对这类东西有任何经验的人有任何阅读/源代码检查的建议？如果我想进入编写语音识别程序的世界，或者只是关于我应该尝试了解的内容的一般建议（如果您对该领域没有太多了解，有时很难知道要搜索什么）。

编辑：我想做一些跨平台的事情，但目前我的目标是 linux。

编辑 2：感谢 csmba 的深思熟虑的答复。目前，我主要对能够创建允许自动化或通过语音执行不同命令的应用程序感兴趣。因此，可以将有限数量的可识别命令串在一起。一个例子是一个音乐播放器，它接受诸如“Play the album Hello Everything by Squarepusher”之类的命令，或者一个允许用户创建语音快捷方式来启动特定应用程序的应用程序启动器。

我意识到这是一个非常大的问题，而且我现在的知识水平远不及解决实现整个识别引擎所需的知识水平，尽管这样做所涉及的技术让我着迷，这是我想做的事情自己来做。很有可能，我最终可能会拿起一两本关于该主题的书，并在空闲时间学习/玩“简单”的实现。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-18T16:56:43.850

这是一个巨大的问题，我不知道如何开始......所以让我试着给你正确的“条款”，这样你就可以改进你的任务：

首先，要了解语音识别是一门多样而复杂的学科，它有许多不同的应用。人们倾向于将此域映射到他们想到的第一件事（通常是计算机理解您在 IVR 系统中所说的内容）。因此，首先让我们将这个概念分为主要类别：

**Human-to-Machine：**处理理解人类在说什么的应用程序，但人类知道他正在与机器交谈并且*语法*非常有限。例子是

*   计算机自动化
*   专业化：例如飞行员自动化一些控制（噪音是一个大问题）
*   IVR（交互式语音响应）系统，如 Google-411 或当您致电银行时，对方的计算机会说“说‘服务’以获得客户服务”

**人对人**（自发语音）：这是一个更大、更复杂的问题。在这里，我们还可以将其分解为不同的应用：

*   呼叫中心：代理-客户之间的对话，电话质量，压缩
*   情报：两个或更多人之间的无线电/电话/现场对话

现在，Speech-To-Text 不是你应该说的你关心的。你关心的是解决问题。不同的技术用于解决不同的问题。[在此处](http://knol.google.com/k/csmba/speech-analytics/2p76v0g9rhval/3#)查看其中一些的概述。总而言之，其他方法是音标、LVCSR 和基于直接的。

另外，你有兴趣成为这项技术的博士吗？您将需要一个涉及*信号处理*的硕士同等学历，并且可能需要一个 PHd 才能成为前沿。在这种情况下，您将在一家开发实际**语音引擎**的公司工作。像 Nuance 和 IBM 这样的公司是大公司，但菲利普斯和其他初创公司也存在。

另一方面，如果您想成为实现应用程序的人，您将不会在引擎上工作，而是在构建使用引擎的应用程序。我认为游戏行业的一个很好的类比：您是在开发图形引擎（如 Cry 引擎），还是在开发数百款游戏中的一款，都使用相同的图形引擎？

不要误会我的意思，在世界范围内的 IBM/Nuance 之外，搜索质量还有很多工作要做。该引擎通常非常开放，并且需要进行大量算法调整，这些调整会极大地影响性能。每个业务应用程序都有不同的约束和成本/收益函数，因此您可以进行多年的实验来构建更好的基于语音识别的应用程序。

还有一件事：一般来说，您还希望在堆栈中越低的位置就拥有良好的统计背景。

> 在这个时间点，我主要对能够创建允许自动化的应用程序感兴趣

好，我们在这里汇合……那你对“语音转文本”没有兴趣。流行语带您进入完全转录的世界，一个您不需要去的地方。您应该关注一些更人机交互的技术，例如 Voice XML 和 IVR 系统中使用的技术（Nuance 是其中最大的参与者）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-18T16:16:26.427

如果您是该领域的新手，我绝对会建议您拿起[一两本书。](http://www.amazon.com/s/ref=nb_ss_b?url=search-alias%3Dstripbooks&field-keywords=speech+recognition&x=0&y=0)我没有这方面的经验，所以我无法提出建议。如果你还在上大学（或仍然有密切的联系），你应该看看你的教授是否可以推荐。

您链接的调查可能也是一个很好的资源。我敢肯定，自 1996 年以来已经取得了一些进步，但基本情况不太可能发生根本性改变。如果调查写得很好，那么值得您花时间阅读它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-18T16:18:08.030

对于 OS X，请查看：[OS X Speech Technologies](http://developer.apple.com/documentation/MacOSX/Conceptual/OSX_Technology_Overview/AppTechnology/chapter_5_section_3.html#//apple_ref/doc/uid/TP40001067-CH270-TPXREF174)

对于 Windows，请查看：[Microsoft Speech API](http://www.microsoft.com/speech/speech2007/default.mspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-18T16:55:30.090

我曾使用[IBM 的 ViaVoice 产品](http://www-01.ibm.com/software/websphere/products/mobilespeech.jsp)。它有一个很好的 ASR（自动语音识别）引擎和一个很好的文本到语音引擎。

网站不是很好，但这是嵌入式版本的链接[http://www-01.ibm.com/software/voice/support/](http://www-01.ibm.com/software/voice/support/)

虽然它与平台无关，但一切都通过使用 vxml 的 MVC 架构进行，这是用于语音目的的 xml 变体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T16:14:49.033

你的目标是什么平台？如果适用于 Windows，则可以使用[Microsoft Speech API 。](http://www.microsoft.com/speech/speech2007/default.mspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-24T09:47:37.973

还有适用于 Android 的[语音识别服务](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)。

# compiler-construction - 混合 C++/CLI TypeLoadException 内部限制：字段太多

> ID：14843
> 
> 赞同：9
> 
> 时间：2008-08-18T16:11:14.860
> 
> 标签：compiler-construction, c++-cli, clr

为了将一些新的 UI 迁移到托管/C# 领域，我最近在一个大型遗留项目上打开了公共语言运行时支持 (/clr)，该项目在共享 DLL 中使用 MFC，并依赖于我们内部的大约十几个其他项目整体解决方案。这个项目是我们应用程序的核心，它将驱动生成的任何托管 UI 代码（因此需要打开 clr 对互操作的支持）。

在修复了大量的小错误和警告之后，我终于设法让应用程序编译。但是，运行应用程序会导致 EETypeLoadException 并且让我无法调试......

做了一些挖掘，我发现原因是“System.TypeLoadException：内部限制：字段太多”。这发生在编译结束时。然后我找到[了这个链接](http://forums.msdn.microsoft.com/en-US/vclanguage/thread/a52c3ee4-63f9-4ccd-b38c-b5cbefabc414/)，它建议将程序集分解为两个或多个 dll。但是，在我的情况下这是不可能的，因为我的限制是遗留代码基本上保持不变。

任何人都可以提出任何其他可能的解决方案吗？我在这里真的走投无路了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-18T16:21:39.380

确保打开C/C++ 代码生成下的[启用字符串池选项。](http://msdn.microsoft.com/en-us/library/ms924287.aspx)

这通常可以解决这个问题，这是其中之一“嗯？” MS 限制，例如 Excel 电子表格的 64k 限制。只有这一项会影响可能出现在程序集中的符号数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-18T17:33:24.743

我已经用非常大的混合模式（C#/C++）应用程序完成了三次（3x），并且一旦将上述修复到位，就再也没有看到错误。

不，如果有的话，这应该会导致运行时执行速度稍快（但是，您无法测量任何东西。）

但我同意这有点权宜之计。符号的内部限制过去不是问题，或者如果是，这个限制要高得多。然后 MS 更改了一些加载程序代码。我进入 MSDN 并对此进行了咆哮，并毫不含糊地告诉我，“只有白痴才会将这么多符号放在一个程序集中”。

（这也是我不再参与 MSDN 的原因之一。）

好吧，给我涂上愚蠢的颜色，但我认为我不应该改变我的应用程序的物理结构，将事情分解成附属 DLL，只是为了绕过加载程序决定 10,001 个符号是 1 太多的事实。

正如您所指出的，我们通常无法控制程序集/卫星 DLL 的结构以及它们包含的依赖类型。

但无论如何，我认为您不会再次看到此错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-18T17:40:27.847

您需要为整个项目打开 /clr 吗？您是否可以只为少数选定的文件打开它，并非常小心如何包含托管代码？我使用大型 C++/MFC 应用程序，我们发现使用托管 C++ 非常困难。我喜欢 C# 和 .NET，但托管 C++ 只是令人头疼。我们的大多数问题都发生在 .NET 1.0/1.1 上……也许现在情况好多了。

# .net - 为什么VS 2005不断给我“'x'在命名空间'y'中不明确”错误？

> ID：14857
> 
> 赞同：2
> 
> 时间：2008-08-18T16:18:31.430
> 
> 标签：.net, visual-studio, visual-studio-2005, namespaces

**赏金：**我将通过贝宝发送 5 美元，以获得为我解决此问题的答案。

我不确定我更改了哪些 VS 设置，或者它是 web.config 设置还是什么，但我在错误列表中不断收到此错误，但所有解决方案都可以正常运行。这里有些例子：

```
错误 5“CompilerGlobalScopeAttribute”在命名空间“System.Runtime.CompilerServices”中不明确。C:\projects\MyProject\Web\Controls\EmailStory.ascx 609 184 C:\...\Web\
错误 6 'ArrayList' 在命名空间 'System.Collections' 中不明确。C:\projects\MyProject\Web\Controls\EmailStory.ascx.vb 13 28 C:\...\Web\
错误 7“异常”在命名空间“系统”中不明确。C:\projects\MyProject\Web\Controls\EmailStory.ascx.vb 37 21 C:\...\Web\
错误 8 'EventArgs' 在命名空间 'System' 中不明确。C:\projects\MyProject\Web\Controls\EmailStory.ascx.vb 47 64 C:\...\Web\
错误 9 'EventArgs' 在命名空间 'System' 中不明确。C:\projects\MyProject\Web\Controls\EmailStory.ascx.vb 140 72 C:\...\Web\
错误 10 'Array' 在命名空间 'System' 中不明确。C:\projects\MyProject\Web\Controls\EmailStory.ascx.vb 147 35 C:\...\Web\

    [...ETC...]

错误 90 'DateTime' 在命名空间 'System' 中不明确。C:\projects\MyProject\Web\App_Code\XsltHelperFunctions.vb 13 8 C:\...\Web\

```

正如您可以想象的那样，这真的很烦人，因为代码中到处都有蓝色波浪下划线，并且在“错误列表”窗格中过滤掉相关错误几乎是不可能的。我检查了默认的 ASP.Net web.config 和 machine.config，但似乎没有什么突出的。

* * *

*编辑：*这是发生错误的一些来源：

```
'Error #5: whole line is blue underlined'
<%= addEmailToList.ToolTip %>

'Error #6: ArrayList is blue underlined'
Private _emails As New ArrayList()

'Error #7: Exception is blue underlined'
Catch ex As Exception

'Error #8: System.EventArgs is blue underlined'
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

'Error #9: System.EventArgs is blue underlined'
Protected Sub sendMessage_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles sendMessage.Click

'Error #10: Array is blue underlined'
Me.emailSentTo.Text = Array.Join(";", mailToAddresses)

'Error #90: DateTime is blue underlined'
If DateTime.TryParse(data, dateValue) Then 
```

* * *

*编辑*：GacUtil 结果

```
C:\WINDOWS\Microsoft.NET\Framework\v1.1.4322\gacutil -l mscorlib

Microsoft (R) .NET 全局程序集缓存实用程序。版本 1.1.4318.0
版权所有 (C) Microsoft Corporation 1998-2002。版权所有。

全局程序集缓存包含以下程序集：

ngen 文件的缓存包含以下条目：
        mscorlib，版本=1.0.5000.0，文化=中性，PublicKeyToken=b77a5c5619
34e089，自定义=5a00410050002d004e0035002e0031002d003800460053002d003700430039004
40037004500430036000000
        mscorlib，版本=1.0.5000.0，文化=中性，PublicKeyToken=b77a5c5619
34e089，自定义=5a00410050002d004e0035002e0031002d0038004600440053002d00370043003
900450036003100370035000000

项目数 = 2

```

```
"C:\Program Files\Microsoft Visual Studio 8\SDK\v2.0\Bin\gacutil" -l mscorlib

Microsoft (R) .NET 全局程序集缓存实用程序。版本 2.0.50727.42
版权所有 (c) 微软公司。版权所有。

全局程序集缓存包含以下程序集：

项目数 = 0

```

* * *

*编辑*：来自 ngen 的有趣结果：

```
C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\ngen display mscorlib /verbose

Microsoft (R) CLR Native Image Generator - Version 2.0.50727.832
Copyright (C) Microsoft Corporation 1998-2002\. All rights reserved.

NGEN Roots:

mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, Custom=5a00410050002d004e0035002e0031002d003800460053002d00330037004200430043003300430035000000 
    ScenarioDefault 
        mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, Custom=5a00410050002d004e0035002e0031002d003800460053002d00330037004200430043003300430035000000 
            DisplayName = mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
            Native image = {7681CE0F-F0E7-F03A-2B56-96345589D82B}
            Hard Dependencies:
            Soft Dependencies:
mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
    ScenarioNoDependencies 
        mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
            DisplayName = mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
            Native image = {7681CE0F-F0E7-F03A-2B56-96345589D82B}
            Hard Dependencies:
            Soft Dependencies:

NGEN Roots that depend on "mscorlib":
[...a bunch of stuff...]

Native Images:

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec

mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Source MVID:    {D34102CF-2ABF-4004-8B42-2859D8FF27F3}
    Source HASH:    bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec
    NGen GUID sign: {7681CE0F-F0E7-F03A-2B56-96345589D82B}
    OS:     WinNT
    Processor:  x86(Pentium 4) (features: 00008001)
    Runtime:    2.0.50727.832
    mscorwks.dll:   TimeStamp=461F2E2A, CheckSum=00566DC9
    Flags:      
    Scenarios:      <no debug info> <no debugger> <no profiler> <no instrumentation> 
    Granted set:    <PermissionSet class="System.Security.PermissionSet" version="1" Unrestricted="true"/>

    File:       

C:\WINDOWS\assembly\NativeImages_v2.0.50727_32\mscorlib\0fce8176e7f03af02b5696345589d82b\mscorlib.ni.dll
    Dependencies:
        mscorlib, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089:
            Guid:{D34102CF-2ABF-4004-8B42-2859D8FF27F3}
            Sign:bbf5cfc19bea4e13889e39eb1fb72479a45ad0ec 
```

本机映像中应该只有一个 mscorlib，对吗？我怎样才能摆脱其他人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T13:57:23.237

我最近有同样的错误。这是我修复它的方法（我希望它也适用于你）：

- 打开您的项目属性，转到参考部分。

-删除上部分对系统的引用。

我认为它引用了 System 两次，但它只显示一次。因此，模棱两可的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T19:43:00.240

根据您的 gacutil 输出结果（感谢您这样做；我认为它有帮助），我会说您需要尝试在 .NET Framework 安装和 Visual Studio 2005 上运行修复。我不确定这是否会修复它，但是从 gacutil 的输出中可以看出，2.0.0 没有。

从我的 VS2005 命令提示符中，我得到：

```
Microsoft (R) .NET 全局程序集缓存实用程序。版本 2.0.50727.42
版权所有 (c) 微软公司。版权所有。

全局程序集缓存包含以下程序集：
  mscorlib，版本=2.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089，处理器架构=x86

项目数 = 1

```

从我的 VS2003 命令提示符中，我得到：

```
Microsoft (R) .NET 全局程序集缓存实用程序。版本 1.1.4322.573
版权所有 (C) Microsoft Corporation 1998-2002。版权所有。

全局程序集缓存包含以下程序集：

ngen 文件的缓存包含以下条目：
    mscorlib，版本=1.0.5000.0，文化=中性，PublicKeyToken=b77a5c561934e089，自定义=5a00410050002d004e0035002e0031002d003800460053002d0033003700420043004300030043003
    mscorlib，版本=1.0.5000.0，文化=中性，PublicKeyToken=b77a5c561934e089，自定义=5a00410050002d004e0035002e0031002d0038004600440053002d003300370042004300360040000406004

项目数 = 2

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T16:22:15.370

在寻求帮助诊断编译问题时，发布有问题的源代码通常会有所帮助:)

这些错误实际上意味着指定的名称与另一个名称冲突，编译器无法解决这个问题。看起来确实有点奇怪。。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-18T16:34:18.480

我也受到了打击，特别是 System.Data.SqlClient。尝试在项目管理器中取消选中命名空间并手动将它们包含在 .vb 文件中，就像使用 C# 一样：

导入 System.Data.SqlClient

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T16:34:52.973

取一个错误（如 ArrayList）并将类型替换为全限定名称（我不确定，但我猜这里：System.Collection.ArrayList）。如果错误消失了，你真的有一个解决冲突。如果不是，那就是另外一回事了。
如果所有解决方案在这些错误的情况下都“正常”，我建议清理你的项目。删除所有已编译的内容（dll、pdb 等），以及影子缓存的内容。也许它编译是因为它使用了旧版本的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-18T18:20:48.327

我知道这听起来很奇怪，但您是使用“构建”还是“重建”来构建解决方案？如果我遇到这样有趣的问题，解决方案的“全部重建”会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-26T20:28:29.990

昨天我在 VS2005 ASP.NET 网站项目中得到了同样的结果：突然之间，由于之前的任何重大代码更改，在命名空间 'y' 中出现的负载 'x' 是模棱两可的，它们都源自非常基本的符号，例如 EventArgs，类型、DBNull 等

直接原因是双重引用的 mscorlib，正如我在 VS 的类视图中看到的那样。我相信，真正的原因是自动 Windows 更新迫使我在几分钟前重新启动机器。

尝试诸如建立一个全新的 ASP.NET 网站项目，将源文本复制粘贴到其上（在同一台机器上 - 没有帮助）或将项目移动到具有相同 VS2005 安装的第二台机器上（它有助于，项目正常工作）我几乎可以肯定我的代码没有问题，但我的 VS/.NET 配置。而且我非常不知道如何治愈它，因为除了这个之外，互联网上没有描述类似问题的痕迹。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-26T20:37:26.990

重新安装[.Net Framework 2.0](http://www.microsoft.com/downloads/details.aspx?familyid=0856eacb-4362-4b0d-8edd-aab15c5e04f5&displaylang=en)。

那应该解决它。之后，`gacutil`（从 v2.0 开始）将显示 1`mscorlib`而不是 0。

# sql-server - [ADO.NET 错误]：数据库 'master' 中的 CREATE DATABASE 权限被拒绝。尝试为文件 HelloWorld.mdf 附加自动命名数据库失败

> ID：14872
> 
> 赞同：6
> 
> 时间：2008-08-18T16:33:46.890
> 
> 标签：sql-server, database, ado.net, sql-server-express

> 数据库“master”中的 CREATE DATABASE 权限被拒绝。尝试为文件 C:\Documents and Settings\..\App_Data\HelloWorld.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

我找到了这些链接：

*   [http://blog.benhall.me.uk/2008/03/sql-server-and-vista-create-database.html](http://blog.benhall.me.uk/2008/03/sql-server-and-vista-create-database.html)
*   [http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=702726&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=702726&SiteID=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-02T13:29:56.573

通常，您用于运行 SQL Server 服务的用户将无权访问您的个人用户文件夹，这就是您收到错误的原因。您要么需要更改用于服务的凭据，要么将数据库移动到另一个文件夹，这在您的案例中起到了作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-11T16:38:53.470

对我来说，在 web.config 文件的 system.web 标签下设置这个标签有很大帮助：

```
<system.web>
    <identity impersonate="true" userName="admin_user" password="admin_password" />
... 
```

希望这可以帮助某人

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-05-06T00:01:27.677

我今天被困在这个问题上，首先是 mvc3 和实体框架代码中的复合问题。

我的 SqlExpress 安装搞砸了（权限问题），所以我切换到 SqlCE。

我的 ConnectionString.Name 属性与我的“ProjectNameContext”类名不匹配。

当未找到连接字符串时，它使用默认约定。默认约定意味着我的 SqlExpress 服务具有像“ProjectNameContext”这样的数据库名称。权限搞砸了，所以当我以为我在使用 SqlSE 时，我在 SqlExpress 上遇到了权限错误

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-13T06:46:24.763

我也遇到了同样的问题，最后我找到了解决方案——解决方案——简单地将数据库从 App_Data 文件夹移动或剪切到任何位置（例如桌面），然后将数据库移动或剪切回 App_Data 文件夹。这就对了..........

希望它有效！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T16:39:04.260

是的，以前的附件未正确取消附加，或者是手动附加的。进入 Management Studio 连接到数据库，并断开看起来像文件路径的长数据库名称。然后再试一次应该可以了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-18T22:26:57.630

我的朋友通过使用另一个目录来修复它，即 C:\TEMP。我认为这只是一个权限问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-17T09:52:18.980

对于像我这样的人，将“User Instance=true”添加到您的连接字符串中

# mysql - 如何在 Wordpress 网站上显示数据库查询统计信息？

> ID：14873
> 
> 赞同：15
> 
> 时间：2008-08-18T16:33:58.870
> 
> 标签：mysql, performance, wordpress, layout, statistics

我注意到一些 Wordpress 博客的页脚中有查询统计信息，这些统计信息简单地说明了查询的数量以及为特定页面处理它们所需的总时间，如下所示：

> 23 个查询。0.448 秒

我想知道这是如何实现的。是通过使用特定的 Wordpress 插件还是通过在页面代码中使用某些特定的 php 函数？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-08-18T17:40:51.717

尝试将其添加到模板的页脚底部：

```
<?php echo $wpdb->num_queries; ?> <?php _e('queries'); ?>. <?php timer_stop(1); ?> <?php _e('seconds'); ?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-18T23:39:03.443

解释pix0r的代码：

*   `$wpdb->num_queries`是数据库查询的数量。

*   `_e`用于本地化： http: [//faq.wordpress.net/view.php?p=50](http://faq.wordpress.net/view.php?p=50)

*   `timer_stop()`返回呈现页面所用的时间量：http:
    [//codex.wordpress.org/Function_Reference/timer_stop](http://codex.wordpress.org/Function_Reference/timer_stop)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T16:25:29.957

wordpress 现在有一个简单的解决方案

有一个函数称为[`get_num_queries()`](http://codex.wordpress.org/Function_Reference/get_num_queries)和其他答案中指定的[`timer_stop()`](http://codex.wordpress.org/Function_Reference/timer_stop)。

```
<?php echo get_num_queries(); _e(' queries'); ?> in <?php timer_stop(1); _e(' seconds'); ?></p> 
```

`get_num_queries()`- 返回 WordPress 执行期间的数据库查询次数，不接受任何参数

# objective-c - 将视图层次结构绘制到 Cocoa 中的特定上下文中

> ID：14874
> 
> 赞同：4
> 
> 时间：2008-08-18T16:34:01.040
> 
> 标签：objective-c, cocoa, macos

对于我的应用程序的一部分，我需要创建某个视图及其所有子视图的图像。

为此，我正在创建一个包含与视图大小相同的位图的上下文，但我不确定如何将视图层次结构绘制到其中。我可以通过设置上下文并显式调用 drawRect 来绘制单个视图，但这并不能处理所有子视图。

我在 NSView 界面中看不到任何可以帮助解决此问题的内容，因此我怀疑解决方案可能位于更高的级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-18T17:19:03.273

您可以使用[`-[NSView dataWithPDFInsideRect:]`](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/dataWithPDFInsideRect: "-[NSData dataWithPDFInsideRect:]")将您发送到的视图的整个层次结构呈现为 PDF，并作为`NSData`对象返回。然后，您可以做任何您想做的事情，包括将其渲染为位图。

你确定你想要一个位图表示吗？毕竟，该 PDF 可能（至少在理论上）与分辨率无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T20:21:51.760

我发现自己编写绘图代码是最好的方法：

*   处理潜在的透明度问题（其他一些选项确实为整个图像添加了白色背景）
*   性能要好得多

下面的代码并不完美，因为它不处理从边界到帧时的缩放问题，但它确实考虑了 isFlipped 状态，并且非常适合我使用它的用途。请注意，它只绘制子视图（以及子视图，......递归），但让它也绘制自己非常容易，只需`[self drawRect:[self bounds]]`在`imageWithSubviews`.

```
- (void)drawSubviews
{
    BOOL flipped = [self isFlipped];

    for ( NSView *subview in [self subviews] ) {

        // changes the coordinate system so that the local coordinates of the subview (bounds) become the coordinates of the superview (frame)
        // the transform assumes bounds and frame have the same size, and bounds origin is (0,0)
        // handling of 'isFlipped' also probably unreliable
        NSAffineTransform *transform = [NSAffineTransform transform];
        if ( flipped ) {
            [transform translateXBy:subview.frame.origin.x yBy:NSMaxY(subview.frame)];
            [transform scaleXBy:+1.0 yBy:-1.0];
        } else
            [transform translateXBy:subview.frame.origin.x yBy:subview.frame.origin.y];
        [transform concat];

        // recursively draw the subview and sub-subviews
        [subview drawRect:[subview bounds]];
        [subview drawSubviews];

        // reset the transform to get back a clean graphic contexts for the rest of the drawing
        [transform invert];
        [transform concat];
    }
}

- (NSImage *)imageWithSubviews
{
    NSImage *image = [[[NSImage alloc] initWithSize:[self bounds].size] autorelease];
    [image lockFocus];
    // it seems NSImage cannot use flipped coordinates the way NSView does (the method 'setFlipped:' does not seem to help)
    // Use instead an NSAffineTransform
    if ( [self isFlipped] ) {
        NSAffineTransform *transform = [NSAffineTransform transform];
        [transform translateXBy:0 yBy:NSMaxY(self.bounds)];
        [transform scaleXBy:+1.0 yBy:-1.0];
        [transform concat];
    }
    [self drawSubviews];
    [image unlockFocus];
    return image;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-19T01:25:23.587

您可以[`-[NSBitmapImageRep initWithFocusedViewRect:]`](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSBitmapImageRep_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBitmapImageRep/initWithFocusedViewRect: "-[NSBitmapImageRep initWithFocusedViewRect:]")在将焦点锁定在视图上后使用，以使视图本身（及其子视图）呈现到给定的矩形中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T12:26:15.907

您想要做的事情已经明确可用。请参阅 10.4 AppKit 发行说明中的​​“NSView 绘图重定向 API”部分。

制作一个 NSBitmapImageRep 进行缓存并清除它：

```
NSGraphicsContext *bitmapGraphicsContext = [NSGraphicsContext graphicsContextWithBitmapImageRep:cacheBitmapImageRep];
[NSGraphicsContext saveGraphicsState];
[NSGraphicsContext setCurrentContext:bitmapGraphicsContext];
[[NSColor clearColor] set];
NSRectFill(NSMakeRect(0, 0, [cacheBitmapImageRep size].width, [cacheBitmapImageRep size].height));
[NSGraphicsContext restoreGraphicsState]; 
```

缓存到它：

```
-[NSView cacheDisplayInRect:toBitmapImageRep:] 
```

如果您想更广泛地正确绘制指定的上下文处理视图递归和透明度，

```
-[NSView displayRectIgnoringOpacity:inContext:] 
```

# php - 从给定的多个集合中找到最佳组合

> ID：14884
> 
> 赞同：10
> 
> 时间：2008-08-18T16:39:23.557
> 
> 标签：php, algorithm, puzzle, combinations, np-complete

假设您有货物。它需要从 A 点到 B 点，从 B 点到 C 点，最后从 C 点到 D 点。您需要用最少的钱在五天内到达那里。每条支线有三个可能的托运人，每条支线都有自己不同的时间和成本：

```
Array
(
    [leg0] => Array
        (
            [UPS] => Array
                (
                    [days] => 1
                    [cost] => 5000
                )

            [FedEx] => Array
                (
                    [days] => 2
                    [cost] => 3000
                )

            [Conway] => Array
                (
                    [days] => 5
                    [cost] => 1000
                )

        )

    [leg1] => Array
        (
            [UPS] => Array
                (
                    [days] => 1
                    [cost] => 3000
                )

            [FedEx] => Array
                (
                    [days] => 2
                    [cost] => 3000
                )

            [Conway] => Array
                (
                    [days] => 3
                    [cost] => 1000
                )

        )

    [leg2] => Array
        (
            [UPS] => Array
                (
                    [days] => 1
                    [cost] => 4000
                )

            [FedEx] => Array
                (
                    [days] => 1
                    [cost] => 3000
                )

            [Conway] => Array
                (
                    [days] => 2
                    [cost] => 5000
                )

        )

) 
```

您将如何以编程方式寻找最佳组合？

到目前为止，我最好的尝试（第三或第四种算法）是：

1.  为每条腿找到最长的托运人
2.  淘汰最“贵”的一个
3.  为每条腿找到最便宜的托运人
4.  计算总成本和天数
5.  如果天数可以接受，则完成，否则，转到 1

在 PHP 中快速模拟（请注意，下面的测试数组可以流畅地工作，但是如果您使用上面的测试数组尝试它，它不会找到正确的组合）：

```
$shippers["leg1"] = array(
    "UPS"    => array("days" => 1, "cost" => 4000),
    "Conway" => array("days" => 3, "cost" => 3200),
    "FedEx"  => array("days" => 8, "cost" => 1000)
);

$shippers["leg2"] = array(
    "UPS"    => array("days" => 1, "cost" => 3500),
    "Conway" => array("days" => 2, "cost" => 2800),
    "FedEx"  => array("days" => 4, "cost" => 900)
);

$shippers["leg3"] = array(
    "UPS"    => array("days" => 1, "cost" => 3500),
    "Conway" => array("days" => 2, "cost" => 2800),
    "FedEx"  => array("days" => 4, "cost" => 900)
);    

$times = 0;
$totalDays = 9999999;

print "<h1>Shippers to Choose From:</h1><pre>";
print_r($shippers);
print "</pre><br />";

while($totalDays > $maxDays && $times < 500){
            $totalDays = 0;
            $times++;
            $worstShipper = null;
            $longestShippers = null;
            $cheapestShippers = null;

            foreach($shippers as $legName => $leg){
                //find longest shipment for each leg (in terms of days)
                unset($longestShippers[$legName]);
                $longestDays = null;        

                if(count($leg) > 1){
                    foreach($leg as $shipperName => $shipper){
                        if(empty($longestDays) || $shipper["days"] > $longestDays){
                            $longestShippers[$legName]["days"] = $shipper["days"];
                            $longestShippers[$legName]["cost"] = $shipper["cost"];
                            $longestShippers[$legName]["name"] = $shipperName;
                            $longestDays = $shipper["days"];
                        }
                    }           
                }
            }

            foreach($longestShippers as $leg => $shipper){
                $shipper["totalCost"] = $shipper["days"] * $shipper["cost"];

                //print $shipper["totalCost"] . " &lt;?&gt; " . $worstShipper["totalCost"] . ";";

                if(empty($worstShipper) || $shipper["totalCost"] > $worstShipper["totalCost"]){
                    $worstShipper = $shipper;
                    $worstShipperLeg = $leg;
                }
            }

            //print "worst shipper is: shippers[$worstShipperLeg][{$worstShipper['name']}]" . $shippers[$worstShipperLeg][$worstShipper["name"]]["days"];
            unset($shippers[$worstShipperLeg][$worstShipper["name"]]);

            print "<h1>Next:</h1><pre>";
            print_r($shippers);
            print "</pre><br />";

            foreach($shippers as $legName => $leg){
                //find cheapest shipment for each leg (in terms of cost)
                unset($cheapestShippers[$legName]);
                $lowestCost = null;

                foreach($leg as $shipperName => $shipper){
                    if(empty($lowestCost) || $shipper["cost"] < $lowestCost){
                        $cheapestShippers[$legName]["days"] = $shipper["days"];
                        $cheapestShippers[$legName]["cost"] = $shipper["cost"];
                        $cheapestShippers[$legName]["name"] = $shipperName;
                        $lowestCost = $shipper["cost"];
                    }
                }

                //recalculate days and see if we are under max days...
                $totalDays += $cheapestShippers[$legName]['days'];  
            }
            //print "<h2>totalDays: $totalDays</h2>";
        }

        print "<h1>Chosen Shippers:</h1><pre>";
        print_r($cheapestShippers);
        print "</pre>"; 
```

我想我实际上可能需要做一些事情，我逐个制作每个组合（带有一系列循环）并将每个组合的总“分数”相加，然后找到最好的一个......

编辑：澄清一下，这不是“家庭作业”（我不在学校）。这是我当前工作项目的一部分。

要求（一如既往）一直在不断变化。如果在我开始解决这个问题时给了我当前的限制，我将使用 A* 算法的一些变体（或 Dijkstra 或最短路径或单纯形或其他东西）。但是一切都在变化和变化，这将我带到了现在的位置。

所以我想这意味着我需要忘记我到目前为止所做的所有废话，只使用我知道我应该使用的东西，这是一种寻路算法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-18T16:52:36.930

可以更改一些[最短路径算法](http://en.wikipedia.org/wiki/Shortest_path_problem)，例如 Dijkstra 的，以按成本对每条路径进行加权，但还可以跟踪时间并在时间超过您的阈值时停止沿特定路径前进。应该找到最便宜的，让你以这种方式进入你的门槛

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-18T16:48:34.660

听起来你所拥有的被称为“线性规划问题”。这听起来也像是一个家庭作业问题，没有冒犯。

LP 问题的经典解决方案称为“单纯形法”。去谷歌上查询。

但是，要使用该方法，您必须正确地制定问题来描述您的要求。

尽管如此，还是有可能枚举所有可能的路径，因为你有这么小的一组。但是，这样的事情不会扩展。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-18T16:49:53.160

听起来像是[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)的工作：

> Dijkstra 算法，由荷兰计算机科学家 Edsger Dijkstra 于 1959 年构想，[1](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)是一种图搜索算法，用于解决具有非负边路径成本的图的单源最短路径问题，输出最短路径树。该算法常用于路由。

维基百科文章中也有实现细节。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-18T16:56:02.243

如果我知道我只需要按预定顺序处理 5 个城市，并且相邻城市之间只有 3 条路线，我会强行使用它。优雅没有意义。

另一方面，如果这是一项家庭作业，并且我应该生成一个可以实际扩展的算法，我可能会采取不同的方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-22T22:04:18.940

这是一个[背包问题](http://en.wikipedia.org/wiki/List_of_knapsack_problems)。重量是运输天数，利润应该是 5000 美元 - 腿成本。消除所有负面成本，然后从那里开始！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-19T19:52:57.623

正如 Baltimark 所说，这基本上是一个线性规划问题。如果托运人的系数（1 表示包含，0 表示不包含）不是每条腿的（二进制）整数，这将更容易解决。现在你需要找到一些（二进制）整数线性规划（ILP）启发式，因为问题是 NP 难的。有关链接，请参阅[有关整数线性规划的维基百科](http://en.wikipedia.org/wiki/Linear_programming#Integer_unknowns "关于整数线性规划的维基百科")；在我的线性规划课程中，我们至少使用了[Branch and bound](http://en.wikipedia.org/wiki/Branch_and_bound "分支和绑定")。

实际上，现在我想到了，这种特殊情况可以在没有实际 ILP 的情况下解决，因为天数并不重要，只要它 <= 5。现在首先选择最便宜的运营商作为首选（Conway 5:1000）。接下来你再次选择最便宜的，结果是 8 天和 4000 个货币单位，这太多了，所以我们放弃了。通过也尝试其他人，我们看到他们的结果都是 5 天以上，所以我们回到第一选择并尝试第二便宜的（FedEx 2:3000），然后在第二个选择 ups，最后一个是 fedex。这给了我们总共 4 天和 9000 个货币单位。

然后，我们可以使用此成本来修剪树中的其他搜索，这些搜索将通过某些子树阶段结果的成本大于我们已经找到的结果，并从此不再搜索该子树。这只有在我们知道在子树中搜索不会产生更好的结果时才有效，就像我们在成本不能为负时所做的那样。

希望这个漫无边际的帮助有点:)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-08-18T16:56:10.480

我认为 Dijkstra 的算法是为了找到一条最短路径。

**cmcculloh**正在寻找最低成本，但他必须在 5 天内完成。

因此，仅仅找到最快的方式不会让他以最便宜的方式到达那里，并且以最便宜的方式到达那里，不会在所需的时间内到达那里。

# build-process - 改进您的构建过程

> ID：14893
> 
> 赞同：27
> 
> 时间：2008-08-18T16:48:50.293
> 
> 标签：build-process, build-automation, build

或者，实际上在没有太多合适的开始时建立一个构建过程。

目前，这几乎就是我的团队所面临的情况。我们主要进行网络应用程序开发（但目前没有桌面开发）。即使使用我们普通的应用程序，软件部署也很丑陋且笨拙，而且在我加入这个团队（和公司）的两年里，我们遇到了太多的问题。现在是时候做点什么了，结果是我们将能够用一块石头杀死两只乔尔测试鸟（每日构建和一步构建，两者都不以任何形式存在）。

我在这里寻求的是对我需要做或考虑的事情的一些一般性见解，来自那些从事软件开发的时间比我更长并且大脑也更大的人。我相信目前大多数在测试版中发帖的人都会这样做。

相关工具：Visual Build Source Safe 6.0（我知道，但我目前对是否使用 Source Safe 无能为力。这可能是我的下一场战斗。）

暂时，我有一个 Visual Build 项目可以做到这一点：

1.  获取源并放置在本地目录中，包括项目所需的必要 DLL。
2.  获取配置文件并根据需要重命名（我们将它们存储在不属于实际应用程序的特殊子目录中，并根据用途命名）。
3.  使用 Visual Studio 构建
4.  使用命令行预编译，复制到“构建”目录中
5.  复制到目的地。
6.  获取任何必要的附加资源 - 主要是与项目相关的文档、图像和报告（并从步骤 5 放入目录）。有很多这样的东西，我以前不想包括它。但是，我只会复制更改的项目，所以可能无关紧要。我不确定我是否真的想在前面的步骤中包含这些内容。

对于所有这些，我仍然需要诱使一些注销 Visual Build，但我还没有到需要这样做的地步。

有没有人有任何意见或建议？我会注意，我们目前没有使用部署项目。我认为它会删除此构建中的一些必要步骤（如 web.config 交换）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-08-18T18:07:27.763

当承担一个从未有过自动化构建过程的项目时，分步进行会更容易。不要试图一次吞下太多，否则会感到难以承受。

1.  首先使用自动构建程序（即 nant/msbuild）一步编译您的代码。我不会讨论哪个更好。找一个让你感觉舒服的并使用它。让构建脚本与源代码控制中的项目一起使用。
2.  弄清楚您希望如何触发自动构建。无论是将其连接到 CruiseControl 还是使用计划任务运行夜间构建任务。CruiseControl 或 TeamCity 可能是最好的选择，因为它们包含许多工具，您可以使用它们来简化此步骤。CruiseControl 是免费的，TeamCity 在某种程度上是免费的，您可能需要根据项目的规模付费。
3.  好的，到此为止，您将对这些工具感到非常满意。现在您已准备好根据您想要为测试、部署等执行的操作添加更多任务......

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-18T16:55:46.457

我有一组 Powershell 脚本可以为我完成所有这些工作。

脚本 1：构建 - 这个很简单，主要通过调用 msbuild 来处理，它还创建了我的数据库脚本。

脚本 2：打包 - 这个脚本采用各种参数来打包各种环境的版本，例如测试，以及由许多机器组成的生产环境的子集。

脚本 3：部署 - 在包脚本创建的文件夹内的每台机器上运行（部署脚本作为打包的一部分复制进来）

从部署脚本中，我对机器名称等内容进行完整性检查，以免意外部署到错误的位置。

对于 web.config 文件，我使用

```
<appSettings file="Local.config"> 
```

具有覆盖已经在生产机器上的功能，并且它们是只读的，因此它们不会意外被覆盖。未签入 Local.config 文件，并且我不必在构建时进行任何文件切换。

[编辑] 配置部分的 appSettings file= 等效项是 configSource="Local.config"

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-18T17:11:15.740

两年前我们从使用 perl 脚本切换到 MSBuild，并且没有回头。只需在主 xml 文件中指定它们即可构建 Visual Studio 解决方案。

对于任何更复杂的事情（获取源代码、执行单元测试、构建安装包、部署网站），您只需在 .net 中创建一个从*Task*派生的新类，该类会覆盖 Execute 函数，然后从您的构建 xml 文件中引用它.

这里有一个很好的介绍： [介绍](http://en.csharp-online.net/MSBuild:_By_Example)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-18T16:58:47.137

我只从事过几个 .Net 项目（我主要从事 Java），但我推荐的一件事是使用像[NAnt](http://nant.sourceforge.net/)这样的工具。我在将我的构建与 IDE 耦合时遇到了一个真正的问题，它最终使得在路上设置构建服务器变得非常痛苦，因为你必须在你想要构建的任何盒子上进行完整的 VS 安装未来。

话虽如此，任何自动化构建都比没有自动化构建好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-18T17:23:13.560

我们的构建过程是一堆已经发展了十多年的本土 Perl 脚本，没有什么花哨的，但它完成了工作。一个脚本获取最新的源代码，另一个构建它，第三个将其转移到网络位置。我们进行桌面应用程序开发，因此我们的暂存过程还构建了用于测试并最终交付给客户的安装包。

我建议您将其分解为单独的步骤，因为有时您想重建但不想获得最新的，或者可能只需要重新上演。我们的脚本还可以处理来自不同分支的构建，因此请考虑您开发的任何解决方案。

最后，我们有一台专用的构建机器，它每晚都会重建主干和维护分支，并发送一封电子邮件，说明任何问题或是否成功完成。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-29T18:26:25.133

我建议确保您的构建脚本（和安装程序项目，如果与您的情况相关）在源代码控制中。我倾向于有一个非常简单的脚本，它只是检查\获取最新的“主”构建脚本，然后启动它。

我说这个 b/c 我看到团队只是在服务器上运行最新版本的构建脚本，但要么从未将其置于源代码控制中，要么当他们这样做时，他们只是随机签入。如果您将构建过程从源代码控制中“获取”，它将迫使您在其中保留最新和最好的构建脚本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T17:42:45.113

我们的构建系统是一个（或两个）makefile。让它工作起来相当有趣，因为它需要在两个窗口（作为 VS 下的构建任务）和 Linux 下（作为普通的“make bla”任务）运行。真正有趣的是构建从 .csproj 文件中获取实际的文件列表，从中构建（另一个）makefile，然后运行它。在这个过程中，make 文件实际上称它为 self。

如果这个想法没有吓到读者，那么（要么他们疯了，要么）他们可能会得到 make +“你最喜欢的字符串处理者”来为他们工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-16T18:54:49.077

我们使用 Uppercut。UppercuT 使用 NAnt 构建，非常容易使用。

[http://code.google.com/p/uppercut/](http://code.google.com/p/uppercut/)

这里有一些很好的解释：[Uppercut](http://ferventcoder.com/category/10094.aspx)

# javascript - 基于树（与基于 HTML）的 Web 框架？

> ID：14909
> 
> 赞同：5
> 
> 时间：2008-08-18T16:58:12.393
> 
> 标签：javascript, html, dom

任何编写客户端 JavaScript 的人都熟悉 DOM——浏览器在内存中引用的树结构，由它从服务器获取的 HTML 生成。JavaScript 可以添加、删除和修改 DOM 树上的节点以对页面进行更改。我发现使用它非常好（除了浏览器错误），并且与我的服务器端代码首先生成页面的方式非常不同。

我的问题是：哪些服务器端框架/语言从一开始就将其视为 DOM 树来构建页面 - 插入节点而不是回显字符串？如果客户端和服务器端代码都以相同的方式查看页面，我认为这将非常有帮助。您当然可以在任何 Web 服务器语言中一起破解类似的东西，但是专用于以这种方式创建页面的框架可以进行一些非常好的优化。

开源、被广泛部署并且已经存在了一段时间都是优点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-18T17:04:54.377

您正在描述[Rhino on Rails](http://www.youtube.com/watch?v=1QD9XQm_Jd4)，它还没有推出，但很快就会推出。同样，[Aptana Jaxer](http://www.aptana.com/jaxer/)，但是 RnR 将包含一个实际的框架（Rails），而 Jaxer 只是服务器技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-18T17:07:12.720

Aptana 的 Jaxer AJAX 服务器可能适合您查看，因为它也使用 JS 服务器端。

话虽如此，我认为最好不要使用打印语句或回声生成标记，而是在动态内容中使用模板和挂钩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-10T01:46:17.020

Jaxer 是服务器端 javascript + DOM。您可以通过对它们的输出进行后处理来将 jaxer 与其他语言集成。

同样在 java、php、...中，您可以使用 xpath 来操作 DOM。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-08-18T17:01:31.967

我知道你从哪里来，但这一切都没有实际意义，不是吗。除了渲染的内容之外，您不能向浏览器发送任何内容，而且您必须一次性完成所有操作（AJAX 除外）。您的建议（据我所见）没有任何价值，因为即使您像树一样构建它，您仍然只是构建一个批发发送给客户的页面。

# linux - 在 LAMP 环境中从 XHTML 生成 PDF

> ID：14911
> 
> 赞同：5
> 
> 时间：2008-08-18T16:58:50.007
> 
> 标签：linux, pdf, pdf-generation

任何人都可以推荐一个可以在 Linux 环境中工作的好的服务器端 PDF 生成工具。我希望尽可能简单，将其传递给 XHTML 文件（带有图像）并让它从**呈现的**源代码生成 PDF。

我没有大量预算，但任何低于 1000 美元的东西都应该没问题。

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-18T17:03:34.817

我听起来像[FPDF](http://www.fpdf.org/)可能会有所帮助......

此外，PDF 文档的创建称为“PDF 打印”。我相信这可能会帮助您找到其他资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T06:18:05.060

您可能想看看 FOP，它代表格式化对象处理器。它可以在 Linux 上生成 PDF 文件，因为它是基于 Java 的。从他们的网站：

> Apache FOP（格式化对象处理器）是一个由 XSL 格式化对象 (XSL-FO) 驱动的打印格式化程序和一个独立于输出的格式化程序。它是一个 Java 应用程序，它读取格式化对象 (FO) 树并将结果页面呈现到指定的输出。当前支持的输出格式包括 PDF、PS、PCL、AFP、XML（区域树表示）、打印、AWT 和 PNG，以及在较小范围内的 RTF 和 TXT。主要输出目标是 PDF。

你可以在[这里找到](http://xmlgraphics.apache.org/fop/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T11:30:46.010

大约 8 年前，我使用[了 HTMLDoc ，它在将带有一些基本格式的 HTML 表格转换为体面的 PDF 报告方面做得很好。](http://www.easysw.com/htmldoc/)似乎也有一个[开源版本](https://www.msweet.org/projects.php?Z1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-18T19:47:32.117

我做了一些搜索，[tbookdtd](http://tbookdtd.sourceforge.net/)呢？[它可以在这里](http://sourceforge.net/project/showfiles.php?group_id=48834)下载，但它自 2005 年以来一直没有激活。它似乎将 xml 转换为 Latex，转换为 PDF。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-19T01:36:50.257

你调查过 PHP 的[文档](http://php.net/manual/en/intro.pdf.php "php.net")吗？还有几个不同链接的 PHP[常见问题解答。](http://php.net/manual/en/faq.using.php#faq.using.freepdf "php.net")PHP 主要支持[PDFlib](http://www.pdflib.com/products/pdflib-family/ "www.pdflib.com")。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-20T15:46:05.760

我最近遇到了[dompdf](http://www.digitaljunkies.ca/dompdf/)，我用它来将 HTML 创建的页面转换为 PDF 文档。它使用 PHP5（假设使用 PHP 不会打扰您）。这也是假设您不想在文件系统上静态创建 HTML 文件，然后使用某种命令行工具对其进行转换？

我在 dompdf 中发现的一个问题是，您本身并没有获得大量的配置选项，但它是开源的，而且似乎并不太大，因此您可能很容易就可以临时组装一些东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-20T16:00:29.873

如果您确实有预算，请查看以下[OpenEdge](http://www.openedgesoft.com/)。我知道他们为我们做了你想要的。基于linux的PDF生成系统。我想问问他们能为你做什么。Val Cassidy 是人名。

顺便说一句：我没有得到任何东西，我什至不再为定制公司工作，也不再为 OpenEdge 工作......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T11:21:43.257

您可以看看通过[OpenOffice API](http://api.openoffice.org/)使用 OpenOffice来加载您的 XHTML 文档并导出 PDF 版本。使用 OpenOffice API 有一些学习曲线，但它非常强大，可以在没有任何图形界面的系统上以服务器模式运行。它表现良好——我们已经在一些内部项目中使用它。

# asp.net - 我可以从站点地图生成 ASP.NET MVC 路由吗？

> ID：14923
> 
> 赞同：4
> 
> 时间：2008-08-18T17:05:40.400
> 
> 标签：asp.net, asp.net-mvc, url, routing, sitemap

我正在考虑`ASP.NET MVC`为即将到来的项目学习框架。我可以使用高级路由根据站点地图层次结构创建长 URL 吗？

示例导航路径：

**首页 > 商店 > 产品 > 家用 > 厨房 > 炊具 > 炊具 > 不粘锅**

典型（我认为）MVC URL：
[http ://example.com/products/category/NonstickCooksets](http://example.com/products/category/NonstickCooksets)

所需网址：
[http ://example.com/shop/products/household/kitchen/cookware/cooksets/nonstick](http://example.com/shop/products/household/kitchen/cookware/cooksets/nonstick)

我可以这样做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-31T12:38:24.453

扎克，如果我理解正确，您想要子类别的无限深度。没什么大不了的，因为 MVC Preview 3（我认为是 3 或 4）这已经解决了。

只需定义一条路线

“{controller}/{action}/{*categoryPath}”

对于一个网址，例如：

[http://example.com/shop/products/household/kitchen/cookware/cooksets/nonstick](http://example.com/shop/products/household/kitchen/cookware/cooksets/nonstick)

你应该有一个带有 Products 操作的 ShopController ：

```
public class ShopController : Controller
{
...
    public ActionResult Products(string categoryPath)
    {
        // the categoryPath value would be
        // "household/kitchen/cookware/cooksets/nonstick". Process it (for ex. split it)
        // and then decide what you do..
        return View();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-18T17:50:58.763

MVC 路由允许您定义几乎任何您想要的结构，您只需要定义每个部分的语义含义。您可以拥有“硬编码”的位，例如“shop/products”，然后将其余部分定义为变量，“{category}/{subcategory}/{speciality}”等。

如果您愿意，您还可以定义多个映射到同一端点的路线。基本上，当一个 URL 进入你的 MVC 应用程序时，它会遍历路由表，直到找到匹配的模式，填充变量并将请求传递给适当的控制器进行处理。

虽然默认路由是简单的 Controller、Action、Id 类型的设置，但这肯定不是你能做的范围。

# c# - 参数绑定：幕后发生了什么？

> ID：14934
> 
> 赞同：7
> 
> 时间：2008-08-18T17:11:15.083
> 
> 标签：c#, .net, sql, database, api

.NET、Java 和其他各种语言的高级数据库 API 通常提供称为准备语句和参数绑定的技术，而不是向数据库服务器发送纯文本命令。我想知道的是当你执行这样的语句时会发生什么：

```
SqlCommand cmd = new SqlCommand("GetMemberByID");
cmd.CommandType = CommandType.StoredProcedure;
SqlParameter param = new SqlParameter("@ID", memberID);
para.DbType = DbType.Integer;
cmd.Parameters.Add(param); 
```

我知道这是一个最佳实践。SQL 注入攻击以这种方式被最小化。但是，当您执行这些语句时，幕后究竟发生了什么？最终结果仍然是 SQL 安全字符串吗？如果不是，最终结果是什么？这足以防止 SQL 注入攻击吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-18T17:18:50.310

[准备好的语句的 MySQL 手册页](http://dev.mysql.com/doc/refman/5.0/en/c-api-prepared-statements.html)提供了大量信息（应该适用于任何其他 RDBMS）。

基本上，您的语句会被提前解析和处理，并且参数是单独发送的，而不是与 SQL 代码一起处理。这消除了 SQL 注入攻击，因为 SQL 在参数设置之前就已被解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-18T17:48:04.900

如果您使用的是 MS SQL，请加载分析器，您将看到在使用参数化查询时生成了哪些 SQL 语句。下面是一个针对 SQL Server 2005 的示例（我使用的是 Enterprise Libary 3.1，但直接使用 SqlParameters 的结果是相同的）：

```
string sql = "SELECT * FROM tblDomains WHERE DomainName = @DomName AND DomainID = @Did";
Database db = DatabaseFactory.CreateDatabase();
using(DbCommand cmd = db.GetSqlStringCommand(sql))
{
  db.AddInParameter(cmd, "DomName", DbType.String, "xxxxx.net");
  db.AddInParameter(cmd, "Did", DbType.Int32, 500204);

  DataSet ds = db.ExecuteDataSet(cmd);
} 
```

这会产生：

```
exec sp[underscore]executesql N'SELECT * FROM tblDomains WHERE DomainName = @DomName AND DomainID = @Did',
  N'@DomName nvarchar(9),
  @Did int',
  @DomName=N'xxxxx.net',
  @Did=500204 
```

您还可以在这里看到，如果引号字符作为参数传递，它们会相应地转义：

```
db.AddInParameter(cmd, "DomName", DbType.String, "'xxxxx.net");

exec sp[underscore]executesql N'SELECT * FROM tblDomains WHERE DomainName = @DomName AND DomainID = @Did',
  N'@DomName nvarchar(10),
  @Did int',
  @DomName=N'''xxxxx.net',
  @Did=500204 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T17:53:15.030

用外行的话来说：如果发送了一个准备好的语句，那么数据库将使用一个可用的计划，它不必每次发送这个查询时都重新创建一个计划，而只是参数的值发生了变化。这与 procs 的工作方式非常相似，procs 的额外好处是您可以仅通过 procs 授予权限，而根本不能授予基础表

# c# - 如何禁用 Alt + F4 关闭表单？

> ID：14943
> 
> 赞同：80
> 
> 时间：2008-08-18T17:16:52.577
> 
> 标签：c#, .net, winforms

在 ac#win 表单中禁用`Alt`+`F4`以防止用户关闭表单的最佳方法是什么？

我使用表单作为弹出对话框来显示进度条，我不希望用户能够关闭它。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2008-08-18T17:27:38.343

这可以完成工作：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    e.Cancel = true;
} 
```

编辑：针对 pix0rs 的关注 - 是的，您是正确的，您将无法以编程方式关闭应用程序。但是，您可以在关闭表单之前简单地删除 form_closure 事件的事件处理程序：

```
this.FormClosing -= new System.Windows.Forms.FormClosingEventHandler(this.Form1_FormClosing);
this.Close(); 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2008-09-08T09:10:48.860

如果您查看 的[值](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.closereason?view=netframework-4.7.2)，`FormClosingEventArgs e.CloseReason`它会告诉您关闭表单的原因。然后您可以决定要做什么，可能的值是：

**成员名称**- 描述

* * *

**无**- 未定义或无法确定关闭的原因。

**WindowsShutDown** - 操作系统在关闭前关闭所有应用程序。

**MdiFormClosing** - 此多文档界面 (MDI) 窗体的父窗体正在关闭。

**UserClosing** - 用户正在通过用户界面 (UI) 关闭表单，例如通过单击表单窗口上的关闭按钮、从窗口的控制菜单中选择关闭或按`ALT`+ `F4`。

**TaskManagerClosing** - Microsoft Windows 任务管理器正在关闭应用程序。

**FormOwnerClosing** - 所有者表单正在关闭。

**ApplicationExitCall** - 调用了 Application 类的 Exit 方法。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2009-01-09T13:17:17.687

我相信这是正确的做法：

```
protected override void OnFormClosing(FormClosingEventArgs e)
{
  switch (e.CloseReason)
  {
    case CloseReason.UserClosing:
      e.Cancel = true;
      break;
  }

  base.OnFormClosing(e);
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-08-18T21:19:32.990

请注意，应用程序完全阻止自身关闭被认为是错误的形式。您应该检查 Closing 事件的事件参数以确定您的应用程序被要求关闭的方式和原因。如果是因为 Windows 关闭，则不应阻止关闭发生。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-08-18T17:20:15.580

您可以处理该`FormClosing`事件并设置`FormClosingEventArgs.Cancel`为`true`.

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2008-08-18T21:25:12.700

> 我使用表单作为弹出对话框来显示进度条，我不希望用户能够关闭它。

如果用户确定关闭您的应用程序（并且知识渊博）足以按下 alt+f4，那么他们很可能也知识渊博，可以运行任务管理器并终止您的应用程序。

至少使用 alt+f4 您的应用程序可以优雅地关闭，而不仅仅是让人们杀死它。根据经验，人们杀死您的应用程序意味着损坏的配置文件、损坏的数据库、无法恢复的半完成任务以及许多其他痛苦的事情。

至少用“你确定”来提示他们，而不是直接阻止它。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-11-16T13:53:15.393

这是禁用`Alt`+的技巧`F4`。

```
private void test_FormClosing(object sender, FormClosingEventArgs e)
{
    if (this.ModifierKeys == Keys.Alt || this.ModifierKeys == Keys.F4) 
    { 
        e.Cancel = true; 
    }    
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-03-05T04:45:40.880

订阅 FormClosing 事件

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    e.Cancel = e.CloseReason == CloseReason.UserClosing;
} 
```

方法体中只有一行。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-05-31T00:57:47.013

这可以完成工作：

```
bool myButtonWasClicked = false;
private void Exit_Click(object sender, EventArgs e)
{
  myButtonWasClicked = true;
  Application.Exit();
}
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
  if (myButtonWasClicked)
  {
    e.Cancel = false;
  }
  else
  {
    e.Cancel = true;
  }

} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-18T17:46:48.507

即使您以编程方式关闭窗口，也会调用 FormClosing 吗？如果是这样，您可能需要添加一些代码以允许在完成表单时关闭它（而不是总是取消操作）

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2016-06-19T16:09:17.517

通过在表单的构造函数中使用以下内容来隐藏表单上的关闭按钮：

```
this.ControlBox = false; 
```

# iis - .NET 3.5 Service Pack 1 导致 ASP.NET Web 应用出现 404 页

> ID：14963
> 
> 赞同：5
> 
> 时间：2008-08-18T17:30:18.553
> 
> 标签：iis, .net-3.5, servicepacks

在为`.NET 3.5`.

我有 2 台相同的虚拟专用服务器。在第一个上安装 SP1 没有不利影响。在第二个上安装它会导致 ASP.NET 页面开始返回 404 page not found。

静态 .html 页面在两台服务器上都可以正常工作。

有没有其他人经历过这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-18T19:14:46.223

这是一个广泛的问题，所以让我们从问一些故障排除问题开始：

> *   根据您的描述，ASP.NET 运行时没有捕获您的请求并处理 aspx 文件。您可能需要使用 ASPNET_REGIIS -i 再次向 IIS 注册 asp.net 管道。
> *   您是否确定 app_offline.htm 文件已从应用程序目录中删除？我之前更新后也遇到过这种情况。
> *   例如，您是否设置了[提琴手](http://www.fiddlertool.com/fiddler/)来遵循请求以查看确切请求的内容？
> *   确保在“Web 服务扩展”下的 IIS 管理控制台中启用了 ASP.NET。 [确保所有内容都设置为允许您的不同版本的框架。](http://www.dotnetjunkies.com/WebLog/photos/davetrux/images/295487/original.aspx)

好吧，让我们从这些开始，希望我们可以指导您解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-18T18:26:14.043

我最近看到很多人都有这个问题。[此链接](http://msmvps.com/blogs/omar/archive/2008/06/30/deploy-asp-net-mvc-on-iis-6-solve-404-compression-and-performance-problems.aspx)可能会有所帮助。

而[这个](http://randomtech.blogspot.com/2007/05/http-404-error-in-iis-6-on-new-aspnet.html)。

还有其他几个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-18T18:22:29.947

您的 web.config 中的 CustomErrors 是否设置为 On 或 RemoteOnly？如果是这样，当您将其更改为关闭时会得到什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-18T19:21:05.070

我在使用 .NET 3.5 SP1 时没有遇到过这个确切的错误，但过去也看到过类似的情况。通常，它可以通过打开命令提示符、转到相应的 .NET 文件夹并运行 ASPNET_REGIIS -i 来解决。在 .NET 3.5 的情况下，框架的主要部分没有更新，因此您实际上会转到 .NET 2.0 文件夹，该文件夹在我的机器上可以在以下位置找到：

\Windows\Microsoft.Net\framework\v2.0.50727

运行 ASPNET_REGIIS -i 将使用 IIS 重新注册所有 ASP.NET 库，并且应该相当于在给定机器上重新安装框架（就 IIS 而言）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T20:28:48.430

只是为了澄清。戴尔给出的最后（第四）点是问题所在。在安装 SP1 期间，ASP.NET 和 WebDAV 的状态在 Web 服务扩展下设置为禁止。

Why the installation of SP1 changed this setting on one server and not the other is a mystery that I wouldn't mind (but not expect) an answer to...

The second link provided by CodingTheWheel also had the answer so I'm also going to mark this as an answer.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-08-18T18:29:05.487

以前没有人这样做过，所以我将指出一个简单的解决方案：
您是否已经卸载了 Service Pack 并重新安装了它（或整个框架）？

编辑：@Kev：
简单解释：他说更新适用于一台机器，但不适用于另一台机器。我过去遇到过类似的问题，重新安装有助于解决其中的一些问题。这是微不足道的。
这就是我的方法：
1\. 微不足道
2\. 简单
3\. 头疼

你是对的，在生产系统上你必须小心，但这是他的决定。而且因为是虚拟服务器，可能他很容易复制过来，先作为测试环境试试。

# c# - 对于开发 C# 编码标准/最佳实践文档有什么建议吗？

> ID：14967
> 
> 赞同：159
> 
> 时间：2008-08-18T17:35:38.777
> 
> 标签：c#, standards, procedure

我是一名刚毕业的 AI 毕业生（大约 2 年），正在为一个适度的操作工作。我（主要是因为我是该部门的第一个“采用者”）创建了一个基本的（读起来有用吗？）C# 编码标准文档。

我想我应该解释一下，我可能是最初级的软件工程师，但我很期待这项任务，因为希望我实际上能够生产出一半可用的东西。我在 Internet 上进行了相当广泛的搜索，并阅读了有关编码标准文档应该/不应该包含什么的文章。这似乎是一个很好的地方，可以征求一些建议。

我意识到我可能会打开一扇通往全世界关于“最好的做事方式”的分歧的大门。我理解并尊重一个不可否认的事实，即每个程序员都有解决每个单独任务的首选方法，因此我不想写任何如此严厉的禁止性来扼杀个人天赋，而是试图获得一个通用的方法并同意标准（例如命名约定），以帮助使个人代码更具可读性。

所以这里......有什么建议吗？有吗？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2008-08-18T17:41:18.860

我们从

*   Microsoft 的 .NET 指南： http: [//msdn.microsoft.com/en-us/library/ms229042.aspx](http://msdn.microsoft.com/en-us/library/ms229042.aspx)（针对 .NET 4.5 更新的链接）
*   Microsoft 的 C# 指南：http: [//blogs.msdn.com/brada/articles/361363.aspx](http://blogs.msdn.com/brada/articles/361363.aspx)。

然后记录与该基线的差异和添加。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-08-18T17:45:39.430

[IDesign](http://www.idesign.net)有一个常用的 C# 编码标准文档。另请参阅[框架设计指南第 2 版](https://rads.stackoverflow.com/amzn/click/com/0321545613)。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2008-08-18T17:50:32.697

具有讽刺意味的是，设定实际标准可能是容易的部分。

我的第一个建议是征求其他工程师关于他们认为应该涵盖哪些内容以及他们认为重要的指导方针的建议。执行任何类型的指导方针都需要人们一定程度的支持。如果您突然将一份说明如何编写代码的文档放在他们身上，无论您是资历最深的人还是资历最深的人，您都会遇到阻力。

在您有一组提案后，然后将它们发送给团队以进行反馈和审查。再次，让人们都购买它们。

可能已经采用了非正式的编码实践（例如，为成员变量添加前缀、驼峰式函数名称）。如果这存在，并且大多数代码都符合它，那么将它的使用形式化是值得的。采用相反的标准会导致更多的悲伤而不是它的价值，即使它是普遍推荐的。

还值得考虑重构现有代码以满足新的编码标准。这似乎是在浪费时间，但如果代码不符合标准，可能会适得其反，因为您将拥有不同风格的混搭。这也让人们在某个模块中的代码是应该遵循新标准还是遵循现有的代码风格时陷入两难境地。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-08-18T17:45:27.197

在内部进行编码标准/最佳实践时，我一直使用 Juval Lowy 的[pdf](http://www.idesign.net/idesign/download/IDesign%20CSharp%20Coding%20Standard.zip)作为参考。[它与FxCop](http://msdn.microsoft.com/en-us/library/bb429476(VS.80).aspx) / [Source Analysis](http://blogs.msdn.com/sourceanalysis/archive/2008/05/23/announcing-the-release-of-microsoft-source-analysis.aspx)非常接近，后者是确保遵循标准的另一个宝贵工具。在这些工具和参考之间，您应该能够提出一个很好的标准，您的所有开发人员都不会介意遵循并能够强制执行它们。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-08-18T17:46:57.007

其他海报已将您指向基线，我要添加的只是使您的文档简短，甜美，并且重点突出，使用大量的 Strunk 和 White 来区分“必备品”和“如果”。

编码标准文档的问题在于，没有人真正按照他们应该的方式阅读它们，而且当他们阅读它们时，他们并没有遵循它们。**此类文档被阅读和遵循的可能性与其长度成反比。**

我同意 FxCop 是一个很好的工具，但是太多的东西会带走编程的所有乐趣，所以要小心。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-08-18T18:26:49.580

永远不要编写自己的编码标准，使用 MS 标准（或 Sun 标准或……根据您的语言而定）。线索就在标准这个词中，如果每个组织都没有决定编写自己的代码，世界将是一个更容易编写代码的地方。谁真的认为每次你改变团队/项目/角色时学习一套新的“标准”是对任何人时间的一种很好的利用。您应该做的最多的是总结关键点，但我建议您不要这样做，因为关键因人而异。我想就编码标准提出另外两点

1.  接近就足够了 - 只要代码足够接近，更改代码以遵循编码标准就是浪费时间。
2.  如果您要更改您没有编写的代码，请遵循“本地编码标准”，即让您的新代码看起来像周围的代码。

这两点是我希望每个人都编写看起来相同的代码的现实。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-10-30T15:25:54.900

我发现以下文档非常有用且简洁。它来自 idesign.net 网站，由 Juval Lowy 撰写

[C# 编码标准](http://idesign.net/idesign/download/IDesign%20CSharp%20Coding%20Standard.zip)

注意：上面的链接现在已经失效了。要获取 .zip 文件，您需要向他们提供您的电子邮件地址（但他们不会将其用于营销......老实说）试试[这里](http://idesign.net/Downloads)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-22T04:19:52.817

我会将[Code Complete 2](https://rads.stackoverflow.com/amzn/click/com/0735619670)添加到列表中（我知道 Jeff 是这里的粉丝）...如果您是初级开发人员，这本书会派上用场，以一种为最好的方式奠定基础的方式来设置您的想法有代码编写实践和软件构建。

我不得不说我在职业生涯中有点晚了，但它支配了我在职业生涯中思考编码和框架开发的许多方式。

值得一试；）

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-04-02T10:40:25.137

我刚刚开始在编码标准要求使用 m_ 表示成员变量、p_ 表示参数和类型前缀的地方，例如字符串的“str”。所以，你可能在方法体中有这样的东西：

m_strName = p_strName;

可怕。真的很可怕。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-08-18T17:41:00.530

微软自己的规则是一个很好的起点。您可以使用 FxCop 强制执行它们。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-09-22T04:11:46.907

我很想强制执行 Microsoft 的 StyleCop 作为标准。它可以在构建时强制执行。但如果你有遗留代码，那么只需在新代码上强制使用 StyleCop。

[http://code.msdn.microsoft.com/sourceanalysis](http://code.msdn.microsoft.com/sourceanalysis)

最终它将有一个重构选项来清理代码。

[http://blogs.msdn.com/sourceanalysis/](http://blogs.msdn.com/sourceanalysis/)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2009-07-29T06:14:00.380

就我个人而言，我喜欢[IDesign](http://www.idesign.net/idesign/download/IDesign%20CSharp%20Coding%20Standard.zip)整合的那个。但这不是我发帖的原因...

我公司的棘手问题是考虑到所有不同的语言。我知道我的公司并不孤单。我们使用 C#、C、程序集（我们制作设备）、SQL、XAML 等。虽然标准中会有一些相似之处，但通常处理方式不同。

另外，我相信更高级别的标准对最终产品的质量有更大的影响。例如：如何以及何时使用注释，何时强制异常（例如用户发起的事件），是否（或何时）使用异常与返回值，确定控制器代码与表示代码的客观方法是什么，等等不要误会我的意思，还需要低级标准（格式对可读性很重要！）我只是对整体结构有偏见。

要记住的另一件事是买入和执行。编码标准很棒。但是，如果没有人同意它们并且（可能更重要的是）没有人强制执行它们，那么这一切都是徒劳的。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2012-01-19T21:06:04.073

当我为 Philips Medical Systems 和[http://csharpguidelines.codeplex.com](http://csharpguidelines.codeplex.com)撰写的那篇文章时，我可能有点偏颇，但我在编写、维护和推广编码标准方面有 10 多年的时间。我试图编写一个具有不同意见的 CodePlex，并将大部分介绍用于如何在您的特定组织中处理该问题。阅读它并向我提供反馈......

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-02-11T10:51:51.727

[SSW 规则](http://www.ssw.com.au/ssw/standards)

它包括一些 C# 标准 + 更多……主要针对 Microsoft 开发人员

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-08-18T18:21:47.233

> 你很可能会失败。欢迎加入行业。

我不同意——只要他创建了文件，可能发生的最糟糕的情况就是它被所有人遗忘。

如果其他人对内容有疑问，那么您可以要求他们更新内容以显示他们更喜欢的内容。这样一来，你就不用管了，其他人有责任证明他们的改变是合理的。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-10-28T18:27:05.863

我最近发现[了 Encodo C# Handbook](http://code.msdn.microsoft.com/encodocsharphandbook/Wiki/View.aspx)，其中包含来自许多其他来源（IDesign、Philips、MSDN）的想法。

另一个来源可能是[Professional C#/VB .NET Coding Guidelines](http://submain.com/?nav=products.guidelines)。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-10-30T15:37:38.527

[我是 Francesco Balena 的书“面向 VB 和 C# 开发人员的实用指南和最佳实践](http://www.dotnet2themax.com/PracticalGuidelines.aspx)”的忠实粉丝。

它非常详细，涵盖了所有基本主题，它不仅为您提供规则，还解释了规则背后的原因，甚至提供了可能存在两种相反最佳实践的反规则。唯一的缺点是它是为 .NET 1.1 开发人员编写的。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-11-28T13:46:46.377

请参阅： [http](http://www.noesispedia.com/post/2008/11/28/C-Coding-Guidelines-and-Best-Practices.aspx) ://www.noesispedia.com/post/2008/11/28/C-Coding-Guidelines-and-Best-Practices.aspx 。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-07-29T13:07:00.407

我们的整个编码标准大致读作“使用 StyleCop”。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2010-06-02T13:07:08.943

我必须建议[dotnetspider.com](http://www.dotnetspider.com/tutorials/bestpractices.aspx)文档。
这是一个伟大而详细的文档，在任何地方都很有用。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2011-04-20T15:34:46.190

我以前用过 Juval 的，如果不是矫枉过正的话，那就是通过了，但我很懒，现在只符合[Resharper](http://www.jetbrains.com/resharper/)的意愿。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2011-12-16T02:52:47.910

您可以查看此，C#/.NET 开发人员的 7 大编码标准和指南文档[http://www.amazedsaint.com/2010/11/top-6-coding-standards-guideline.html](http://www.amazedsaint.com/2010/11/top-6-coding-standards-guideline.html) 希望对您有所帮助

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-08-18T18:14:55.190

我想我在这里回应其他评论，已经链接的 MS 指南是一个很好的起点。我主要基于这些来建模我的代码。

这很有趣，因为我的经理过去曾告诉我他不太喜欢他们：D

你有一个有趣的任务摆在你面前，我的朋友。祝你好运，请询问您是否需要更多:)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-17T16:55:57.420

飞利浦医疗系统的标准写得很好，主要遵循微软的指导方针：www.tiobe.com/content/paperinfo/gemrcsharpcs.pdf

我的标准在此基础上进行了一些调整，并对 .NET 2.0 进行了一些更新（飞利浦标准是为 .NET 1.x 编写的，所以有点过时了）。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2011-05-25T06:53:13.423

我也关注 Resharper。[还有 scott guthrie 博客http://weblogs.asp.net/scottgu/archive/2007/10/08/october-8th-links-asp-net-asp-net-ajax-silverlight-and-net](http://weblogs.asp.net/scottgu/archive/2007/10/08/october-8th-links-asp-net-asp-net-ajax-silverlight-and-net.aspx)上提到的指南 [.aspx](http://weblogs.asp.net/scottgu/archive/2007/10/08/october-8th-links-asp-net-asp-net-ajax-silverlight-and-net.aspx) 和 [http://csharpguidelines.codeplex.com/releases/view/46280](http://csharpguidelines.codeplex.com/releases/view/46280)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2011-05-25T07:13:54.763

在我编写的代码中，我通常遵循**针对公开 API 的****[.NET Framework 设计指南](http://msdn.microsoft.com/en-us/library/ms229042.aspx)和针对私有成员大小写和缩进的[Mono 编码指南](http://www.mono-project.com/Coding_Guidelines)**。Mono 是 .NET 的开源实现，我认为这些人知道他们的业务。

我讨厌 Microsoft 代码如何浪费空间：

```
try
{
    if (condition)
    {
        Something(new delegate
        {
            SomeCall(a, b);
        });
    }
    else
    {
        SomethingElse();
        Foobar(foo, bar);
    }
}
catch (Exception ex)
{
    Console.WriteLine("Okay, you got me");
} 
```

在 Mono 指南中，您可能会觉得奇怪的是它们使用 8 个空格的制表符。然而，经过一些练习，我发现它实际上通过强制一种缩进限制来帮助我编写更少纠结的代码。

我也喜欢他们在开括号之前放置空格的方式。

```
try {
        if (condition) {
                Something (new delegate {
                        SomeCall (a, b);
                });
        } else {
                SomethingElse ();
                Foobar (foo, bar);
        }
} catch (Exception ex) {
        Console.WriteLine ("Okay, you got me");
} 
```

但是，如果您的同事不喜欢它，请不要强制执行类似的操作（除非您愿意为 Mono 做出贡献；-）